[00:00:23] *** Joins: maik (maik___@moz-28AFE1D.dip0.t-ipconnect.de)
[00:00:26] *** Quits: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[00:00:26] <dbaupp> strcat: that's implementable in library code (with unsafe), I'd guess.
[00:00:32] <strcat> dbaupp: not properly
[00:00:41] <strcat> need a new kind for it
[00:00:47] <pcwalton> we do?
[00:00:57] <strcat> pcwalton: well to pass &mut
[00:01:03] <strcat> hm
[00:01:06] <strcat> well &const is gone now
[00:01:17] <pcwalton> not yet but I want to land that change ;)
[00:01:42] <strcat> I guess with &mut T with T: Freeze, it can't alias
[00:01:57] <graydon> bblum: thanks!
[00:01:58] <strcat> and &T with T: Freeze can't alias (in LLVM write dependency terms)
[00:02:10] <graydon> bblum: I imagine that's it and you're headed out?
[00:02:17] <adridu59> i++; is not possible in Rust?
[00:02:30] <graydon> (other interns having final day today?)
[00:02:48] <ecr> adridu59: nope.
[00:02:48] <strcat> pcwalton: &const is evil though since you could pass &mut T and &mut &const T and alias, afaict
[00:02:57] <bblum> graydon: yep
[00:03:13] <adridu59> bblum: I think this should be closed ain't it? https://github.com/mozilla/rust/issues/8232
[00:03:18] <ecr> graydon: everyone is leaving but me
[00:03:19] <adridu59> patch has been merged
[00:03:28] <graydon> oh gosh! giant going-away party for interns!
[00:03:30] <bblum> adridu59: no, patch was merged for testing but failed some tests
[00:03:32] <tjc> ecr: if you're the last one, you should come sit downstairs with us :-)
[00:03:37] *** Quits: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[00:03:39] <adridu59> bblum: ok!
[00:03:41] <strcat> rusti: let mut x = 5; let a = &mut x; let mut b = &const x; let c = &mut b; (*a, **c)
[00:03:43] <graydon> what are y'all doing here? go have going-away cake!
[00:03:45] -rusti- (5, 5)
[00:03:50] <strcat> pcwalton: ^
[00:03:50] <tjc> graydon: we had a going-away lunch :)
[00:03:51] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[00:03:52] <bblum> graydon: like i said a year ago, i will miss you guys :)
[00:04:05] <adridu59> ecr: is there a programmer's reason behind this?
[00:04:11] <strcat> pcwalton: so you could race on writes to one and reads from the &const
[00:04:12] <ecr> tjc: they moved the remaining interns' stuff downstairs yesterday. I stayed up here today
[00:04:27] <tjc> ecr: Heh ok, good that someone else had the thought not to leave you abandoned :-)
[00:04:29] <strcat> T: Freeze takes care of that anyway....
[00:04:34] <graydon> likewise. it's been a real honour working with all of you.
[00:04:37] <strcat> can't think of another hole atm
[00:05:02] *** Quits: KindOne (KindOne@moz-754ADD03.dynamic.ip.windstream.net) (Ping timeout)
[00:05:10] <strcat> pcwalton: although mutable arcs would be fine so it would be a shame to require Freeze
[00:05:19] <adridu59> ecr: or it's just not implemented?
[00:05:24] <strcat> maybe Freeze *or* Send, a sendable thing has to be thread-safe
[00:05:37] * strcat shrugs
[00:05:49] <strcat> could just try throwing it together and seeing if anyone finds a hole ;p
[00:06:05] <adridu59> Generally I find var++ or var-- statement practical when reading code
[00:06:30] <ecr> adridu59: there's no plan to implement it. the general consensus is that it (combined with ++i) can be confusing and interact poorly with overloading. use i += 1 instead.
[00:06:32] <dbaupp> bblum: https://github.com/mozilla/rust/issues/8726 any to add?
[00:07:09] <adridu59> adridu59: it's true that while working with the Linux Kernel I've seen abuse use of the preincrement operator
[00:07:11] <bblum> dbaupp: just did, thanks
[00:07:15] <adridu59> I meant ecr
[00:07:51] <strcat> Go's ++/-- aren't expressions so they are strictly just sugar for += 1 and -= 1, and I don't find that valuable at all
[00:07:54] <dbaupp> rusti: macro_rules! v( ($x:ident ++) => { { $x += 1; $x } } ($x:ident --) => { { $x -= 1; $x } } ) let mut x = 1; v!(x++)
[00:07:56] -rusti- <anon>:5:62: 5:63 error: No rules expected the token: (
[00:07:56] -rusti- <anon>:5          macro_rules! v( ($x:ident ++) => { { $x += 1; $x } } ($x:ident --) => { { $x -= 1; $x } } ) let mut x = 1; v!(x++)
[00:07:56] -rusti-                                                                        ^
[00:07:56] -rusti- application terminated with error code 101
[00:07:58] *** Joins: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP)
[00:08:12] <dbaupp> rusti: macro_rules! v( ($x:ident ++) => { { $x += 1; $x } }; ($x:ident --) => { { $x -= 1; $x } } ) let mut x = 1; v!(x++)
[00:08:13] -rusti- 2
[00:08:17] <graydon> I think people have read much more into the absence of ++ than I ever meant. I just left it out because it meant 2 more operators plus arguing with people about whether preinc or postinc are important / relevant.
[00:08:40] <strcat> it wouldn't be awful, it's just pretty pointless imo ;p
[00:08:43] <graydon> we had ternary for a while too, came and went.
[00:09:00] <strcat> like adding an 'until' statement that's like while !cond
[00:09:05] <strcat> just not really what rust does
[00:09:14] <graydon> yeah. diminishing returns after a point.
[00:09:17] *** Joins: KindOne (KindOne@moz-EE3D0E4D.dynamic.ip.windstream.net)
[00:09:24] *** Joins: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com)
[00:09:44] <adridu59> graydon: I think these features are cool to have so unless they cause safety issues I would like to have them in the todo list (with lowprio of course)
[00:10:07] <adridu59> graydon: anyways, just my point of view!
[00:11:30] <strcat> rusti: enum A {} unsafe { let x =  std::cast::transmute(()); x }
[00:11:35] -rusti- pastebinned 6 lines of output: http://ix.io/7wJ
[00:11:43] <strcat> rusti: enum A {} unsafe { let x: A = std::cast::transmute(()); x }
[00:11:45] -rusti- task <unnamed> failed at 'enum value matched no variant', /build/rust-git/src/rust/src/libstd/repr.rs:521
[00:11:45] -rusti- application terminated with error code 101
[00:12:40] *** Joins: vodik (simon@AB4CFA9A.7B706B64.578F951C.IP)
[00:14:00] <engla> is it wish-for-operator-day?
[00:14:00] <adridu59> rust: sqrt(2)
[00:14:01] *** Quits: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com) (Quit: ecr)
[00:14:07] <adridu59> rusti: sqrt(2)
[00:14:12] -rusti- <anon>:5:9: 5:13 error: unresolved name `sqrt`.
[00:14:12] -rusti- <anon>:5          sqrt(2)
[00:14:12] -rusti-                   ^~~~
[00:14:13] -rusti- error: aborting due to previous error
[00:14:13] -rusti- application terminated with error code 101
[00:14:16] <engla> rusti: std::num::sqrt(2.0)
[00:14:19] -rusti- 1.41421356
[00:14:28] <adridu59> engla: ty!
[00:14:43] <adridu59> what's the import statement for that?
[00:14:59] <engla> sqrt is not in the default namespace, we're not barbarians
[00:15:00] <dbaupp> rusti: 2.0f.sqrt()
[00:15:05] -rusti- timeout triggered!
[00:15:08] <maik> :D
[00:15:13] <dbaupp> rusti: 2.0f.sqrt()
[00:15:15] -rusti- 1.41421356
[00:15:18] <engla> use std::num::sqrt;  
[00:15:21] <heftig> rusti: use std::num::sqrt; sqrt(2.0)
[00:15:22] -rusti- 1.41421356
[00:15:36] <adridu59> thanks, I'm not familiar with these imports
[00:16:02] <engla> of course. everything math related is under std::num
[00:16:09] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[00:16:12] <dbaupp> rusti: use std::num; num::sqrt(2.0)
[00:16:14] -rusti- 1.41421356
[00:16:24] <dbaupp> engla: except for complex. rational and bigints
[00:16:34] *** Quits: brendan (brendaneic@moz-DA50D20B.public.wayport.net) (Ping timeout)
[00:16:35] <heftig> 2.0f is a "native" float?
[00:16:50] <adridu59> let's say I write use std::num::*; does that mean that everything in that sublibrary will get linked to my program?
[00:16:56] <engla> 2.0f is a float which is some kind of native float
[00:17:03] <heftig> does it default to f32 on all platforms right now?
[00:17:04] <adridu59> like C include?
[00:17:05] <strcat> adridu59: the stdlib is already 1 lib
[00:17:09] <strcat> linked against it by default
[00:17:11] <dbaupp> heftig: it's a `float` (which is always f64)
[00:17:11] <adridu59> or is it just to spare keywords
[00:17:24] <strcat> adridu59: num is a module
[00:17:28] <heftig> dbaupp: then what's the difference from f64?
[00:17:51] <engla> the docs say that `float` should be a native floating point type
[00:17:56] <adridu59> adridu59: so when I type "use something;" that module gets linked to my program?
[00:18:04] <dbaupp> heftig: don't know; there was a proposal to just remove float, don't think it' gone anywhere
[00:18:04] <adridu59> even if I don't use it all?
[00:18:11] <kmc> how do I enable rtdebug! prints
[00:18:14] <adridu59> I meant strcat derp
[00:18:27] <strcat> adridu59: no, modules are part of crates (libraries)
[00:18:36] <strcat> all rust programs link against libstd by default
[00:18:45] <strcat> an 'extern mod' statement links against a module
[00:18:46] <adridu59> I see, thanks for the info
[00:18:49] <strcat> 'extern mod extra', for example
[00:18:58] <dbaupp> adridu59: no, extern mod links a new crate against your program; `use` just extracts a name from a crate that is already linked so that you can use it with a short name in the current module.
[00:19:11] *** Joins: brendan (brendaneic@moz-DA50D20B.public.wayport.net)
[00:19:32] <engla> strcat: I've tested your fix-transmute PR and it fixed the microbenchmark regressions that concerned me, very nice
[00:19:42] <strcat> engla: :)
[00:19:51] <strcat> there will be more gains soon...
[00:20:29] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[00:22:05] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[00:22:24] *** Quits: mschifer (Adium@moz-BBE3ABD.mv.mozilla.com) (Quit: Leaving.)
[00:23:55] <adridu59> rusti: use std::num; num::sqrt(2)
[00:23:56] -rusti- <anon>:5:23: 5:32 error: failed to find an implementation of trait std::num::Algebraic for int
[00:23:56] -rusti- <anon>:5          use std::num; num::sqrt(2)
[00:23:56] -rusti-                                 ^~~~~~~~~
[00:23:56] -rusti- application terminated with error code 101
[00:24:08] <adridu59> is that intended behavior?
[00:24:10] <graydon> bblum sully toddaaro: I'm heading out soon, but please don't be strangers! was great working with you.
[00:24:20] <graydon> ecr: you're around next week still?
[00:25:27] <engla> adridu59: yes, needs to be a floating point type
[00:26:34] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[00:26:34] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1428fe2b5 to 142c0f9bd: 02http://git.io/N3iJvQ
[00:26:34] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[00:26:36] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[00:26:36] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/FAiSyw
[00:26:36] <ghrust> 13rust/06auto 14180e235 15Daniel Micay: fix performance regression from invalid IR...
[00:26:36] <ghrust> 13rust/06auto 147b5a91f 15bors: auto merge of #8724 : thestinger/rust/fix-transmute, r=graydon...
[00:26:37] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[00:26:55] *** Quits: brendan (brendaneic@moz-DA50D20B.public.wayport.net) (Quit: brendan)
[00:27:15] <strcat> acrichto: LLVM ERROR: Segmented stacks not supported on this platfrom.
[00:27:17] <strcat> :s
[00:27:25] <strcat> android
[00:27:28] <acrichto> oh dear, I gtg now, but I'll investigate later
[00:28:08] <sully> graydon: later!
[00:28:11] <sully> graydon: I had a great summer
[00:28:40] <bblum> graydon: likewise
[00:29:03] <graydon> glad to hear. hopefully we'll have a 1.x series compiler if you come back to hack on it again :)
[00:29:23] <bblum> graydon: it is always a great privilege to work on rust. thank you for providing me the opportunity to do so :)
[00:29:32] *** Quits: eschweic (Adium@moz-BBE3ABD.mv.mozilla.com) (Quit: Leaving.)
[00:29:57] <graydon> heh. I didn't arrange the internships, but always happy to have your help!
[00:30:16] <bblum> you arrange the team though :P
[00:31:03] <graydon> at this point I just try to keep up :)
[00:31:27] <graydon> ok, time to go. ttyl.
[00:31:33] <bblum> anyway, i mean it, i can't really imagine an internship which would give me more of a sense of changing the world than this one
[00:31:54] <bblum> at least in ways that i both care about and have the capacity to do
[00:32:08] <bblum> so, thanks to the whole community :)
[00:32:19] * bblum takes off
[00:32:41] <kmc> bye bblum!
[00:32:45] *** Joins: foobottesting (foobottest@moz-848F6087.sb.sd.cox.net)
[00:32:49] *** Quits: graydon (Adium@A5087023.2354C43D.D8E68FF6.IP) (Quit: Leaving.)
[00:32:58] *** Parts: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) ()
[00:33:06] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[00:34:09] <dave1629> is there a better/more canonical way to iterate through elements of an array than:        
[00:34:09] <dave1629>       for uint::range(0, args.len()) |i| {
[00:34:10] *** Joins: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net)
[00:34:11] <dave1629>           println(args[i]);
[00:34:11] <dave1629>       }
[00:34:18] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[00:34:33] *** Quits: foobottesting (foobottest@moz-848F6087.sb.sd.cox.net) (Quit: bye)
[00:34:35] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[00:34:37] *** Quits: maik (maik___@moz-28AFE1D.dip0.t-ipconnect.de) (Ping timeout)
[00:34:51] <strcat> dave1629: well, uint::range is removed in master
[00:34:55] <adridu59> dave1629: this syntax is deprecated on current trunk but if you're on 0.7 there's only that afaik
[00:34:58] <strcat> and arrays have iterators
[00:35:03] <engla> adridu59: no
[00:35:23] <dave1629> using 0.7
[00:35:25] <strcat> rusti: let xs = [1, 2, 3]; for x in xs.iter() { printfln!("%d", *x) }
[00:35:26] -rusti- 1
[00:35:26] -rusti- 2
[00:35:26] -rusti- 3
[00:35:26] -rusti- ()
[00:35:40] <engla> if you are on 0.7 use the iteration syntax on the front page of http://www.rust-lang.org/   but preferably compile rust master
[00:35:41] <strcat> rusti: let xs = [1, 2, 3, 4, 5]; for x in xs.iter().skip(2) { printfln!("%d", *x) }
[00:35:42] -rusti- 3
[00:35:42] -rusti- 4
[00:35:42] -rusti- 5
[00:35:42] -rusti- ()
[00:36:20] <adridu59> engla: exact I didn't see the part "through an array", I have always used range iterating in my projects to this date
[00:36:43] *** Quits: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net) (Ping timeout)
[00:37:00] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[00:37:03] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[00:37:05] <adridu59> rusti: for i in range(0, args.len()) { printlnn(args[i]); }
[00:37:08] -rusti- pastebinned 11 lines of output: http://ix.io/7wM
[00:37:10] <adridu59> rusti: for i in range(0, args.len()) { println(args[i]); }
[00:37:13] -rusti- pastebinned 8 lines of output: http://ix.io/7wN
[00:37:21] <strcat> well that's slow, in addition to being more error prone - array indexing is bounds checked
[00:37:28] <dbaupp> dave1629: for args.iter().advance |elem| { ... } with 0.7.
[00:37:29] <engla> it's an antipattern
[00:37:51] *** Joins: maik (maik___@moz-28AFE1D.dip0.t-ipconnect.de)
[00:37:53] <adridu59> rusti: let args = [1, 2, 3]; for i in range(0, args.len()) { println(args[i]); }
[00:37:53] -rusti- <anon>:5:71: 5:77 error: mismatched types: expected `&str` but found `<VI2>` (expected &str but found integral variable)
[00:37:53] -rusti- <anon>:5          let args = [1, 2, 3]; for i in range(0, args.len()) { println(args[i]); }
[00:37:54] -rusti-                                                                                 ^~~~~~
[00:37:54] -rusti- error: aborting due to previous error
[00:37:55] -rusti- application terminated with error code 101
[00:38:08] <adridu59> rusti: let args = [1, 2, 3]; for i in range(0, args.length()) { println(args[i]); }
[00:38:11] -rusti- pastebinned 8 lines of output: http://ix.io/7wO
[00:38:23] <dbaupp> rusti: let args = [1, 2, 3]; for i in range(0, args.len()) { printf!("%? ", args[i]); }
[00:38:24] -rusti- 1 2 3 ()
[00:38:35] <adridu59> right
[00:38:47] <dbaupp> rusti: let args = [1, 2, 3]; for elem in args.iter() { printf!("%? ", elem); } // better
[00:38:48] -rusti- &1 &2 &3 ()
[00:38:59] <adridu59> with D's println() this would be valid print code
[00:39:10] <dbaupp> rusti: let args = [1, 2, 3]; for &elem in args.iter() { printf!("%? ", elem); } // better
[00:39:11] -rusti- 1 2 3 ()
[00:39:27] <engla> I have a control question about DoubleEndedIterator.. this should only be implemented if the iterator produces the same sequence (but in reverse) with .next_back() as with .next()?  I have assumed this, but I don't know if it's a good rule
[00:39:40] <adridu59> nice, iterators def. have potential in Rust!
[00:39:54] <dave1629> thanks!
[00:40:28] *** Quits: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se) (Ping timeout)
[00:40:30] *** Quits: zxcdw (r-a@858B320D.B543C4DE.3933CC16.IP) (Ping timeout)
[00:40:47] <adridu59> is it planned to have an int sqrt implementation?
[00:40:52] <strcat> engla: yes
[00:41:24] <strcat> engla: you can interleave next/next_back
[00:41:26] <strcat> for example...
[00:41:30] *** Quits: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com) (Quit: eatkinson)
[00:41:44] <strcat> rusti: let mut xs = [1, 2, 3]; let mut ys = [4, 5, 6]; xs.iter().chain(ys.iter()).reverse_(); (xs, ys)
[00:41:46] -rusti- pastebinned 64 lines of output: http://ix.io/7wP
[00:41:48] <kmc> how would I set a struct field to None, without running the destructor in the case that it was previously Some(x)
[00:41:57] <strcat> rusti: let mut xs = [1, 2, 3]; let mut ys = [4, 5, 6]; xs.mut_iter().chain(ys.mut_iter()).reverse_(); (xs, ys)
[00:41:58] -rusti- ([6, 5, 4], [3, 2, 1])
[00:42:00] <strcat> engla: 
[00:42:20] <sfackler> kmc: try take()
[00:42:40] <engla> I was thinking about this because I'm impelmenting CharSplitIterator to be bidirectional. which is easy, splitting on chars is symmetric. But, the "splitN" version is different
[00:42:53] <kmc> sfackler: ah and then I can forget() it
[00:42:54] <kmc> thanks
[00:42:56] <engla> now it could be that it would split off front/back of the string depending on how it is called
[00:43:02] <engla> but it would violate the rule
[00:43:17] <strcat> engla: yeah it probably can't really be implemented
[00:43:20] *** Quits: maik (maik___@moz-28AFE1D.dip0.t-ipconnect.de) (Ping timeout)
[00:43:44] <engla> right. I'm separating into SplitIterator and SplitNIterator
[00:44:18] <engla> just because only the former is symmetrically bidirectional
[00:44:25] *** Joins: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au)
[00:45:47] <adridu59> rusti fn test() -> bool { true } fn main() { if test() == true { printf!("Works"); } }
[00:45:53] *** Quits: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net) (Ping timeout)
[00:45:55] <adridu59> rusti: fn test() -> bool { true } fn main() { if test() == true { printf!("Works"); } }
[00:45:56] -rusti- ()
[00:46:00] *** Joins: zxcdw (r-a@858B320D.B543C4DE.3933CC16.IP)
[00:46:34] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[00:46:42] *** Joins: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se)
[00:47:07] *** Joins: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net)
[00:49:29] *** Joins: heftig_ (heftig@moz-C0DBD4B2.dip0.t-ipconnect.de)
[00:49:43] *** Quits: heftig (heftig@moz-5E205539.dip0.t-ipconnect.de) (Ping timeout)
[00:50:08] *** Joins: brson (brson@5D3B67E3.71E1659D.DFB5E910.IP)
[00:50:08] *** ChanServ sets mode: +o brson
[00:50:57] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[00:52:16] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[00:52:33] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[00:52:50] <brson> where do i declare the self lifetime if i want to return 'self [u8] from a method?
[00:53:30] <brson> fn slice<'self>(...) is illegal
[00:53:44] <brson> oh maybe i just don't call it self
[00:53:53] <strcat> brson: are you sure you don't want <'r> -> &'r [u8]?
[00:53:59] <strcat> brson: you only want 'self when the lifetime comes from the type
[00:54:01] <strcat> like
[00:54:04] <brson> strcat: yeah that's what i want
[00:54:06] * brson rust expert
[00:54:07] <strcat> impl<'self> Foo for &'self T {}
[00:54:07] <sfackler> brson: fn foo<'a>(&'a self) -> &'self [u8]
[00:54:12] <sfackler> er,
[00:54:15] <sfackler> &'a [u8]
[00:54:34] <strcat> brson: 'self is just a really annoying naming restriction for type params :(
[00:54:56] <brson> sfackler: thanks
[00:54:57] <strcat> like, you can't write Foo<'r> sometimes
[00:55:02] <strcat> so it forces you to make a static method :(
[00:55:25] <strcat> niko will hopefully fix it soon :P
[00:55:29] <ChrisMorgan> If it's in an impl<'self>, you can use 'self without needing to specify it in the fn, or you can use another name.
[00:55:54] <strcat> yeah but it doesn't make sense to use 'self unless it comes from the type (or due to a bug, if you need a type param)
[00:55:57] <kmc> 'self delenda est
[00:56:07] *** Quits: riley (riley@8BA43816.9AA11D69.65DDFA89.IP) (Client exited)
[00:56:08] *** Quits: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com) (Ping timeout)
[00:56:10] *** Joins: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com)
[00:57:19] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[00:57:32] *** Joins: ariel (ariel@moz-AB2390D9.hsd1.fl.comcast.net)
[00:58:08] <adridu59> rusti: let n = 2; let mut nop = n.clone();
[00:58:11] -rusti- pastebinned 35 lines of output: http://ix.io/7wR
[00:58:55] <ChrisMorgan> rusti: let n = 2i; let mut nop = n.clone();
[00:58:58] -rusti- pastebinned 7 lines of output: http://ix.io/7wS
[00:59:37] <erickt1> strcat: got some free time to do a thought experiment with generators? If so, can you think of a case where a generator would have different typecheck/lifetime/etc rules than a function that takes a closure? I've put a couple examples here that seem to be equivalent: https://gist.github.com/erickt/6325347
[00:59:54] *** Joins: josh (josh@moz-D3896A24.dhcp.dlth.mn.charter.com)
[01:00:45] <strcat> erickt1: fwiw I think loops are artifically treated by closures in part of liveness/move checking
[01:00:48] *** Quits: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP) (Ping timeout)
[01:00:50] <strcat> treated as*
[01:01:12] <erickt1> interesting
[01:01:19] *** Joins: josh_ (josh@moz-D3896A24.dhcp.dlth.mn.charter.com)
[01:01:34] *** Quits: josh (josh@moz-D3896A24.dhcp.dlth.mn.charter.com) (Ping timeout)
[01:01:34] *** josh_ is now known as josh
[01:01:52] *** Quits: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: My lid went down)
[01:02:05] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[01:03:59] <erickt1> strcat: if my guess is correct, we might not have to touch that much code in typeck to get generators to work
[01:04:07] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[01:04:29] *** Quits: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:04:40] <strcat> oh heh
[01:04:45] <strcat> erickt1: it treats closures *as loops*
[01:04:50] <erickt1> heh
[01:04:50] <strcat> src/librustc/middle/dataflow.rs
[01:04:55] <strcat> line 437
[01:04:57] <strcat> big block comment
[01:05:07] <strcat> whenever there's a big block comment, niko probably wrote it ;p
[01:05:14] <strcat> git-blame agrees
[01:05:33] *** Joins: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net)
[01:05:35] <ChrisMorgan> Is there any way I could have a counter in a macro? e.g. given foo!(a, b, c, d), produce [(0, a), (1, b), (2, c), (3, d)]?
[01:05:47] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[01:05:53] <erickt1> I love nmatsakis's big block comments
[01:06:06] <adridu59> ChrisMorgan: what is the affacted value of "2i" in your code paste?
[01:06:36] <strcat> 2i is an int
[01:06:38] <strcat> 2 is generic
[01:06:45] <adridu59> ok thank you
[01:06:52] <strcat> it tries to infer the type of 2, and *sometimes* falls back to int
[01:06:53] <ChrisMorgan> adridu59: 2i is int, 2i8 is i8, etc.; 2u is uint, 2u8 is u8, etc.; 2 might be any of these.
[01:07:07] <strcat> imo the fallback should be removed completely because it's easy to screw up that way
[01:07:23] <adridu59> so why does the .clone() method need explicit type?
[01:07:31] <strcat> method calls do
[01:07:43] <strcat> originally, 5 was an int literal
[01:07:47] <strcat> then it became a general literal
[01:07:59] <strcat> in some cases, it still falls back to being an int literal but it isn't reliable
[01:08:07] <erickt1> strcat: wow, dataflow.rs is beautifully documented
[01:08:13] <adridu59> wow.
[01:08:22] <strcat> erickt1: yeah I stripped a bunch of stuff out of those ;p
[01:08:33] <erickt1> aww
[01:08:35] *** Quits: vodik (simon@AB4CFA9A.7B706B64.578F951C.IP) (Connection reset by peer)
[01:08:38] <strcat> erickt1: not comments!
[01:08:42] <erickt1> ooh
[01:08:47] <erickt1> phew
[01:08:51] <strcat> dead code from the old `for`
[01:08:54] <adridu59> strcat: also, why does .clone() exist? :p
[01:09:02] <strcat> adridu59: to perform copies
[01:09:03] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[01:09:09] <strcat> only types without destructors are implicitly copyable
[01:09:25] <adridu59> ok makes sense
[01:09:34] <strcat> types with destructors move ownership instead of copying (it's implemented as a shallow copy, but the source can't be used anymore)
[01:09:35] <adridu59> I'm not used to this stuff
[01:09:36] *** Quits: ariel (ariel@moz-AB2390D9.hsd1.fl.comcast.net) (Quit: WeeChat 0.4.2-dev)
[01:10:09] <adridu59> what types have destructors?
[01:10:22] <erickt1> adridu59: anything that implements the Drop trait
[01:10:23] <adridu59> (I'm doing projecteuler in Rust)
[01:10:31] <adridu59> k!
[01:10:33] <strcat> anything dynamically allocating memory
[01:10:42] <dbaupp> adridu59: ~ and ~[] are the most common ones you'll meet
[01:10:44] <strcat> unique pointers/vectors, most containers
[01:10:47] <strcat> files, sockets
[01:10:50] <strcat> database handle
[01:10:56] *** Joins: ariel (ariel@moz-AB2390D9.hsd1.fl.comcast.net)
[01:11:09] <strcat> anything where a resource has to be freed should have a destructor, for safety + automatic resource management
[01:11:35] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[01:11:45] <adridu59> ok thanks again!
[01:11:52] <strcat> np
[01:12:02] <ChrisMorgan> My precise case for wanting iteration in a macro: seeing if I can rewrite https://github.com/chris-morgan/rust-http/blob/master/src/libhttp/headers/request.rs and response.rs with macros instead of code generation. The header iterator there needs to keep track of its state in some way and currently uses ints.
[01:12:55] <ChrisMorgan> Actually, I guess it could be done with yet another enum instead of an int. Probably not quite as fast, though.
[01:13:20] *** Quits: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se) (Ping timeout)
[01:13:26] <erickt1> ChrisMorgan: you could use my ragel fork to generate the state machine: https://github.com/erickt/ragel
[01:14:12] <strcat> c-like enums are a neat performance tool now
[01:14:25] <strcat> because the loads have a range metadata node on them
[01:14:55] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[01:14:57] <ChrisMorgan> strcat: it'd still end up with assignment in each branch instead of simply having self.pos += 1 at the top
[01:15:57] <strcat> ChrisMorgan: you can cast an enum as an int
[01:16:09] <dbaupp> could we have enum bool { true = 1, false = 0 } ?
[01:16:31] <dbaupp> (it'd solve the non-canonical bools problem.)
[01:16:34] <strcat> dbaupp: there's an open issue
[01:16:52] <strcat> dbaupp: it won't solve the need to implement i1 stuff
[01:16:54] <strcat> ;p
[01:16:57] <strcat> for perf
[01:17:12] <strcat> well maybe that issue was closed
[01:17:12] *** Quits: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net) (Client exited)
[01:17:14] <strcat> don't remember.
[01:17:43] <ChrisMorgan> My code generation I'm working on now has a fancy macro of the form header!("Allow", Allow, allow, headers::allow::Allow)`, but I got caught by the fact that stringify!($ty) == "an interpolated type" rather than "~str", etc. So that last argument will need to be a string :-(
[01:18:04] <ChrisMorgan> (Yes, I reported that: https://github.com/mozilla/rust/issues/8709.)
[01:18:59] * ChrisMorgan is getting tired of putting his left Alt key cap back on
[01:19:34] <dbaupp> ChrisMorgan: I think you might need repeat Allow a few more time o_O
[01:20:50] <strcat> rusti: for _ in range(0, 9000) { println("allow") }
[01:20:54] -rusti- pastebinned 9001 lines of output: http://ix.io/7wT
[01:21:36] <ChrisMorgan> dbaupp: if doing it in a macro, I'd need two copies of the first string, one in typical HTTP case (e.g. "Content-MD5", "ETag") for writing, and one in normalised case (e.g. "Content-Md5", "Etag") for reading. The codegen form only needs two of them (I currently have three owing to laziness).
[01:22:08] <ChrisMorgan> strcat: it'd be rather nice if rusti could tell you when pastebinning whether compilation failed or not.
[01:22:20] <strcat> ChrisMorgan: it doesn't really know
[01:22:34] <strcat> atm at least
[01:22:54] <ChrisMorgan> There's a fairly good heuristic which you could use to suggest "compilation failed".
[01:23:06] <strcat> could print on the first line if it failed
[01:23:10] <strcat> fail or success
[01:23:15] <strcat> + strip it in the output here
[01:27:01] *** Quits: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net) (Ping timeout)
[01:27:18] <brson> how do you convert an unsafe pointer to a slice?
[01:27:29] <Eridius> brson: vec::raw has some stuff
[01:27:37] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[01:27:47] <Eridius> vec::raw::buf_as_slice() or mut_buf_as_slice()
[01:28:39] <brson> Eridius: thanks
[01:28:55] <kimundi> SimonSapin: late answer, a # prefix means the the actual rust pandoc doc generator will hide that line in the output
[01:29:45] *** Quits: andrew-d (andrew-d@6C6C9B53.23518FA3.CE794808.IP) (Ping timeout)
[01:30:54] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[01:31:04] *** Quits: josh (josh@moz-D3896A24.dhcp.dlth.mn.charter.com) (Quit: josh)
[01:32:03] *** Joins: andrew-d (andrew-d@6C6C9B53.23518FA3.CE794808.IP)
[01:32:31] *** Joins: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net)
[01:33:09] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[01:34:58] <strcat> well the node.js preprocessing step does that
[01:35:04] *** Joins: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net)
[01:35:08] *** Quits: carllerche (carllerche@1E2EB9E3.186539A3.965084DF.IP) (Quit: carllerche)
[01:35:14] <strcat> such a weird dep ;p
[01:36:35] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[01:36:35] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/FAiSyw
[01:36:35] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[01:37:12] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[01:39:35] <ChrisMorgan> How do I go about using an enum as numbers?
[01:39:47] <strcat> uh oh, that was recorded as slowing down the compile
[01:39:52] <strcat> we'll see if it was noise
[01:40:06] <Eridius> rusti: enum Foo { One, Two, Three }; printfln!((One as int), (Two as int), (Three as int))
[01:40:07] -rusti- <anon>:5:49: 5:62 error: first argument to fmt! must be a string literal.
[01:40:07] -rusti- <anon>:5          enum Foo { One, Two, Three }; printfln!((One as int), (Two as int), (Three as int))
[01:40:07] -rusti-                                                           ^~~~~~~~~~~~~
[01:40:07] -rusti- application terminated with error code 101
[01:40:19] <Eridius> rusti: enum Foo { One, Two, Three }; printfln!(((One as int), (Two as int), (Three as int)))
[01:40:20] -rusti- (0, 1, 2)
[01:40:20] -rusti- ()
[01:40:24] <Eridius> ChrisMorgan: ^
[01:40:27] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[01:40:33] <Eridius> although I don't know how you can go the other way
[01:40:58] <erickt1> Eridius: there's an issue out there to add support for it
[01:41:00] *** Quits: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se) (Input/output error)
[01:41:24] <erickt1> Eridius: https://github.com/mozilla/rust/issues/3868
[01:41:26] <ChrisMorgan> And that's what I'd needâ€”I'd need to be able to increment by one for it to work conveniently.
[01:41:32] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[01:41:32] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/7_kfnw
[01:41:32] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[01:41:56] *** Quits: sebcrozet (sebcrozet@moz-2517AE39.w80-13.abo.wanadoo.fr) (Ping timeout)
[01:42:57] <brson> strcat: jemalloc failed to build here on windows http://buildbot.rust-lang.org/builders/auto-win-32-nopt-c/builds/174/steps/compile/logs/stdio
[01:43:50] <strcat> huh.
[01:44:28] *** Quits: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net) (Input/output error)
[01:46:39] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[01:47:03] <strcat> brson: maybe it's because we pass along our CFLAGS to it
[01:47:09] <strcat> windows might have something weird in CFLAGS
[01:47:25] <strcat> EXTRA_CFLAGS="$$(CFG_GCCISH_CFLAGS) and LDFLAGS="$$(CFG_GCCISH_LINK_FLAGS)
[01:47:36] <strcat> hrm
[01:47:46] <strcat> we also pass LIBUV flags to jemalloc now
[01:47:55] <strcat> seems wrong
[01:48:07] *** Joins: josh (josh@moz-D3896A24.dhcp.dlth.mn.charter.com)
[01:48:36] <erickt1> hrm, if I add ToInt/FromInt so we can convert an integer into an enum, should I also add ToI8/FromI8 and etc?
[01:49:00] <Eridius> how are you going to add ToInt? Or rather, what would the failure case be? Task failure?
[01:49:17] <Eridius> having something that returns Option<Foo> might make sense
[01:49:22] <erickt1> Eridius: It'd probably return an option
[01:49:33] <Eridius> MaybeToInt ;)
[01:49:51] <kimundi> adridu59: You asked about 'use' etc earlier. I've just rewritten the module tuturial, mind reading it and giving feedback if it's understandable? https://gist.github.com/Kimundi/6322035
[01:49:58] <erickt1> Eridius: FromStr returns an option, so there's precedent 
[01:50:13] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[01:50:32] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Quit: Ex-Chat)
[01:52:10] *** Quits: ariel (ariel@moz-AB2390D9.hsd1.fl.comcast.net) (Quit: WeeChat 0.4.2-dev)
[01:53:57] <adridu59> kimundi: looks great, you're doing wonders. I haven't read the Rust tutorial much before but you're doing good job it seems
[01:54:01] <tjc> Eridius: this sounds like a good case to use conditions
[01:54:08] <Eridius> erickt1: so it does
[01:54:26] <Eridius> tjc: I disagree. A condition is useful when some part of an operation may fail. It's not really useful when the entire operation either passes or fails as a whole
[01:54:31] <Eridius> Option or Result is appropriate there
[01:54:33] <cmr> kimundi: nit: s/rust/Rust/g
[01:55:12] <kimundi> cmr: everywhere?
[01:55:23] <cmr> except in code blocks, but yes :p
[01:55:24] <tjc> Eridius: I don't think that's the criterion; see https://github.com/mozilla/rust/blob/master/doc/tutorial-conditions.md -
[01:55:27] * kimundi never learned the case rules for english
[01:55:32] <tjc> 'If an error can reasonably be handled at the site it occurs by one of a few strategies -- possibly including failure -- and it is not clear which strategy a caller would want to use, a condition is best.'
[01:55:34] <kimundi> kay
[01:55:41] <tjc> But, just throwing that out there
[01:55:42] <cmr> It's a minor nit, but the documentation needs to be consistent.
[01:56:23] <SiegeLord> The name of the language is Rust, not rust
[01:56:25] <Eridius> tjc: you need to apply some common sense though. A condition only makes sense if a component of some operation fails. The point is to be able to handle the error at the point of failure
[01:56:30] <SiegeLord> It'd be like calling C, c :P
[01:56:41] <Eridius> tjc: but when the operation as a whole either passes or fails, then the point of failure is in fact at the caller, where handling it with Option (or Result) is much simpler
[01:57:00] <Eridius> tjc: this also falls under the "and very likely dealt with by an immediate caller" bit from the first bullet that suggests Option or Result
[01:57:25] <adridu59> SiegeLord: the main tutorial page has "Rust" too
[01:58:00] *** Quits: vosen (vosen@moz-266BA656.icpnet.pl) (Quit: Leaving)
[01:58:38] <adridu59> is there a simple way to reverse an int? like 3456.reverse()?
[01:58:52] <dbaupp> adridu59: no
[01:58:54] <Eridius> adridu59: does "reverse" in this sense mean reverse the order of decimal digits?
[01:59:01] <kimundi> cmr: Sure, those problems are the reason why I'm trying to get feedback here :)
[01:59:01] <Eridius> if so, I'd say convert to a string, reverse that, and convert back
[01:59:24] <Eridius> adridu59: any chance you're doing Project Euler in Rust? I know that has some palindrome questions ;)
[01:59:32] <bjz> rusti: std::int::from_str(3456.to_str())
[01:59:34] -rusti- pastebinned 35 lines of output: http://ix.io/7wX
[01:59:44] <bjz> rusti: std::int::from_str(3456i.to_str())
[01:59:45] -rusti- Some(3456)
[01:59:56] <bjz> rusti: std::int::from_str(3456i.to_str().reverse())
[01:59:56] -rusti- <anon>:5:28: 5:53 error: type `~str` does not implement any method in scope named `reverse`
[01:59:57] -rusti- <anon>:5          std::int::from_str(3456i.to_str().reverse())
[01:59:57] -rusti-                                      ^~~~~~~~~~~~~~~~~~~~~~~~~
[01:59:57] -rusti- error: aborting due to previous error
[01:59:57] -rusti- application terminated with error code 101
[02:00:10] <bjz> :P
[02:00:27] <kimundi> rusti: std::int::from_str(3456i.to_str().reversed())
[02:00:28] -rusti- <anon>:5:28: 5:54 error: type `~str` does not implement any method in scope named `reversed`
[02:00:28] -rusti- <anon>:5          std::int::from_str(3456i.to_str().reversed())
[02:00:28] -rusti-                                      ^~~~~~~~~~~~~~~~~~~~~~~~~~
[02:00:28] -rusti- error: aborting due to previous error
[02:00:28] -rusti- application terminated with error code 101
[02:00:35] <strcat> you can't really reverse a string easily
[02:00:47] <strcat> flipping the code points isn't right
[02:00:52] <bjz> mmk
[02:00:53] <Eridius> strcat: well in this case it is
[02:01:00] <strcat> in this case you don't want a string
[02:01:03] <strcat> you want [u8]
[02:01:07] <bjz> arrg unicode
[02:01:12] <bytewise> rusti: std::int::from_str(3456i.to_str().rev_iter().collect())
[02:01:12] -rusti- <anon>:5:28: 5:64 error: failed to find an implementation of trait std::iterator::FromIterator<char> for &str
[02:01:13] -rusti- <anon>:5          std::int::from_str(3456i.to_str().rev_iter().collect())
[02:01:13] -rusti-                                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[02:01:13] -rusti- application terminated with error code 101
[02:01:24] <adridu59> well well well in that case I can do a triple flip function, I've done that in the past
[02:01:33] <Eridius> rusti: "1234".iter().invert().collect::<~str>()
[02:01:34] -rusti- ~"4321"
[02:01:34] <dbaupp> rusti: std::int::from_str(3456i.to_str().rev_iter().collect::<~str>())
[02:01:38] -rusti- pastebinned 11 lines of output: http://ix.io/7wY
[02:02:03] <adridu59> "1234".iter().invert()
[02:02:08] <adridu59> rusti "1234".iter().invert()
[02:02:13] <adridu59> rusti: "1234".iter().invert()
[02:02:27] <adridu59> rusti: printf!("1234".iter().invert())
[02:02:29] <Eridius> rusti: std::int::from_str({let x = 3456i.to_str(); x.rev_iter().collect::<~str>()})
[02:02:33] -rusti- {iter: {string: "1234"}}
[02:02:41] -rusti- {iter: {string: "1234"}}()
[02:02:42] -rusti- Some(6543)
[02:02:45] <Eridius> rusti seems a bit slow atm
[02:02:54] <adridu59> rusti: printf!("1234".invert())
[02:02:57] -rusti- pastebinned 9 lines of output: http://ix.io/7wZ
[02:03:00] <adridu59> rusti: printf!(1234.invert())
[02:03:01] <Eridius> adridu59: stop trying to print iterators. they're not very useful
[02:03:03] -rusti- pastebinned 9 lines of output: http://ix.io/7x0
[02:03:20] <adridu59> Eridius: right, I'll just write a function
[02:04:23] <Eridius> rusti: fn is_palindromic(x: int) -> bool { x == std::int::from_str({let s = x.to_str(); s.rev_iter().collect::<~str>()}) } (is_palindromic(1234), is_palindromic(45654)}
[02:04:25] -rusti- pastebinned 4 lines of output: http://ix.io/7x1
[02:04:32] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[02:04:34] <Eridius> rusti: fn is_palindromic(x: int) -> bool { x == std::int::from_str({let s = x.to_str(); s.rev_iter().collect::<~str>()}) } (is_palindromic(1234), is_palindromic(45654))
[02:04:37] -rusti- pastebinned 5 lines of output: http://ix.io/7x2
[02:04:48] <Eridius> rusti: fn is_palindromic(x: int) -> bool { x == std::int::from_str({let s = x.to_str(); s.rev_iter().collect::<~str>()}).unwrap() } (is_palindromic(1234), is_palindromic(45654))
[02:04:49] -rusti- (false, true)
[02:04:59] <Eridius> adridu59: assuming that's what you're trying to do: ^
[02:05:02] <adridu59> not bad
[02:05:06] <adridu59> ;)
[02:05:37] <dbaupp> rusti: fn is_palindromic(x: int) -> bool { let s = x.to_str(); s == std::int::from_str(s.rev_iter().collect::<~str>()).unwrap() } (is_palindromic(1234), is_palindromic(45654))
[02:05:42] -rusti- pastebinned 5 lines of output: http://ix.io/7x3
[02:05:57] <andrew-d> rusti: 3456i.to_str().rev_iter().collect::<~str>()
[02:06:00] -rusti- pastebinned 11 lines of output: http://ix.io/7x4
[02:06:05] <Eridius> dbaupp: you're comparing a string to an int there
[02:06:08] <dbaupp> rusti: fn is_palindromic(x: int) -> bool { let s = x.to_str(); s == s.rev_iter().collect::<~str>() } (is_palindromic(1234), is_palindromic(45654))
[02:06:09] -rusti- (false, true)
[02:06:15] <Eridius> I suppose you can skip the conversion to int entirely though
[02:06:18] <dbaupp> Eridius: I know
[02:06:33] * dbaupp can read error messages ;)
[02:06:38] <Eridius> :P
[02:07:02] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[02:08:05] <adridu59> rev_iter() is reverse order iterator?
[02:08:42] <Eridius> why do we have CharRevIterator anyway when CharIterator is double-ended?
[02:08:49] <andrew-d> rusti: 3456i % 2
[02:08:50] <Eridius> oh it's a type, not a struct
[02:08:50] -rusti- 0
[02:09:11] <Eridius> adridu59: str.rev_iter() returns the same thing as str.iter().invert(). So yeah, it's a reverse-order char iterator
[02:09:22] <adridu59> k!
[02:09:43] <adridu59> pretty powerful stuff
[02:09:48] <adridu59> I'm more used to C
[02:10:04] <adridu59> (maybe you can do that in C too, I don't know)
[02:10:12] <adridu59> an unrelated question
[02:10:34] <adridu59> can I just drop a false statement inside an if in a function? I tried and it didn't work
[02:10:39] <Eridius> what do you mean?
[02:10:46] <adridu59> = I want it to return false
[02:11:06] <Eridius> rusti: if true { false } else { true }
[02:11:07] -rusti- false
[02:11:35] <dbaupp> rusti: fn foo() -> bool { if true { return false; } /* something */ true } foo()
[02:11:36] -rusti- false
[02:11:49] <tjc> note that you need the return if the expression isn't in tail position
[02:12:03] <tjc> tail position (expression after the last stmt in a block) is special, and you don't need the "return" to return
[02:12:11] <tjc> elsewhere, it would be ambiguous, so you need to write "return" to do an early return
[02:12:18] <adridu59> that was my concern tjc thank you
[02:12:24] <tjc> adridu59: you're welcome
[02:12:46] <Eridius> hrm, is there some way to have a struct that holds a ~str, and holds a slice into that same str? I can't think of how to express the lifetime of the slice
[02:14:04] <ChrisMorgan> Hmm... can I create doc metadata in a macro-generated module?
[02:14:16] <andrew-d> rusti: std::num::log10(12345i)
[02:14:16] -rusti- <anon>:5:9: 5:24 error: failed to find an implementation of trait std::num::Exponential for int
[02:14:16] -rusti- <anon>:5          std::num::log10(12345i)
[02:14:16] -rusti-                   ^~~~~~~~~~~~~~~
[02:14:17] -rusti- application terminated with error code 101
[02:14:21] <andrew-d> rusti: std::num::log10(12345f)
[02:14:22] -rusti- 4.09149109
[02:15:02] *** Quits: inf-groupoid (user@580120F5.8ED93E28.1C8C8CE9.IP) (Quit: ERC Version 5.3 (IRC client for Emacs))
[02:15:03] <ChrisMorgan> I tried having $doc:expr and #[doc = $doc]; inside the mod, but that leads to ``unexpected token: `"Doc..."` ``
[02:16:54] <ChrisMorgan> rusti: macro_rules! m(($doc:expr)=>(mod x{#[doc = $doc];}))m!("Yay!");
[02:16:54] -rusti- <anon>:5:53: 5:56 error: unexpected token: `"Yay!"`
[02:16:55] -rusti- <anon>:5          macro_rules! m(($doc:expr)=>(mod x{#[doc = $doc];}))m!("Yay!");
[02:16:55] -rusti-                                                               ^~~
[02:16:55] -rusti- application terminated with error code 101
[02:17:59] <ChrisMorgan> I'll be sad if I can't have proper docs on my macro-generated http::headers::{request, response} :-(
[02:19:21] <tjc> ChrisMorgan: possibly it's because of this? https://github.com/mozilla/rust/issues/7126
[02:19:32] <ChrisMorgan> And I can't put the #[doc = "..."] before the macro call, "attrs on macros are not yet supported"
[02:20:00] <Eridius> tjc: naw, that issue is rustdoc not expanding macros, ChrisMorgan's running into a problem parsing the macro
[02:20:08] <tjc> Eridius: ah ok
[02:20:10] <Eridius> or maybe expanding it, or something. Anyway, not during docs
[02:20:24] <ChrisMorgan> I'm just trying to make it so that when rustdoc *does* expand the macros, the right stuff will be there.
[02:21:12] <adridu59> is there a #define alternative in Rust?
[02:21:21] <Eridius> adridu59: no, there's no preprocessor. Why do you want #define?
[02:21:30] *** Joins: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP)
[02:21:42] <adridu59> Eridius: for hard coded values
[02:21:51] <adridu59> Eridius: just to show them
[02:21:51] <Eridius> just use statics?
[02:21:55] <dbaupp> adridu59: static FOO: type = value;
[02:22:18] <adridu59> I would aswell allocate directly to my work vars
[02:22:26] <adridu59> which take this said value
[02:22:44] <ChrisMorgan> At first I tried writing #[doc($doc)] rather than #[doc = $doc] by accident. It complained of wanting ident, which suggests it works. However, #[doc = $doc] doesn't seem to like anything there :-(
[02:23:21] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[02:25:05] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Quit: eatkinson)
[02:26:33] <dbaupp> it has to be a literal
[02:26:35] <adridu59> Good night everyone.
[02:26:38] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[02:26:40] <tjc> goodnight!
[02:26:57] <dbaupp> ChrisMorgan: and I don't think the nliteral non-terminal is exposed to macros.
[02:27:01] <dbaupp> *literal
[02:27:26] *** Joins: sgreenlay (sgreenlay@moz-E795FA5B.hsd1.wa.comcast.net)
[02:27:41] *** Joins: ChemicalHarm (Mibbit@moz-A9F37238.hsd1.md.comcast.net)
[02:27:52] <ChrisMorgan> dbaupp: meaning there should be a $doc:lit or something of that sort, but there isn't?
[02:28:29] <dbaupp> ChrisMorgan: yeah
[02:28:55] *** Quits: mibitzi_ (mibitzi@794A2CC1.60DF3A09.8395810B.IP) (Quit: WeeChat 0.4.1)
[02:29:09] <ChrisMorgan> Wonder if I could figure out how to add it.
[02:29:11] <dbaupp> rusti: macro_rules! foo( ($doc:lit) => { mod foo { #[doc=$doc] fn foo() {} } } ) foo!("doc")
[02:29:12] -rusti- <anon>:5:88: 5:93 error: Unsupported builtin nonterminal parser: lit
[02:29:12] -rusti- <anon>:5          macro_rules! foo( ($doc:lit) => { mod foo { #[doc=$doc] fn foo() {} } } ) foo!("doc")
[02:29:12] -rusti-                                                                                                  ^~~~~
[02:29:12] -rusti- application terminated with error code 101
[02:29:22] <dbaupp> ChrisMorgan: it'd be in syntax/ext/tt/ I think
[02:29:46] <ChrisMorgan> Yep, looking there already :-)
[02:30:00] *** Joins: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net)
[02:30:20] <dbaupp> rusti: macro_rules! foo( ($attr:attr) => { mod foo { $attr fn foo() {} } } ) foo!(#[doc="doc"])
[02:30:20] -rusti- <anon>:5:45: 5:48 error: found `mod` in ident position
[02:30:20] -rusti- <anon>:5          macro_rules! foo( ($attr:attr) => { mod foo { $attr fn foo() {} } } ) foo!(#[doc="doc"])
[02:30:20] -rusti-                                                       ^~~
[02:30:21] -rusti- error: aborting due to previous error
[02:30:21] -rusti- application terminated with error code 101
[02:30:56] <dbaupp> rusti: macro_rules! foo( ($attr:attr) => { fn foo() { $attr fn bar() {} } } ) foo!(#[doc="doc"])
[02:30:57] -rusti- <anon>:5:45: 5:47 error: found `fn` in ident position
[02:30:57] -rusti- <anon>:5          macro_rules! foo( ($attr:attr) => { fn foo() { $attr fn bar() {} } } ) foo!(#[doc="doc"])
[02:30:57] -rusti-                                                       ^~
[02:30:57] -rusti- error: aborting due to previous error
[02:30:57] -rusti- application terminated with error code 101
[02:32:00] <ChrisMorgan> Hmm... they all seem to be there.
[02:32:28] <dbaupp> oh, lit is there?
[02:32:30] <kimundi> tjc: Do crate metadata attributes (likname, version etc) have a future, or will they get obsoleted by an alternate rustpkg-based mechanism?
[02:32:39] *** Quits: bent (chatzilla@moz-932324BF.hsd1.ca.comcast.net) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[02:33:11] *** Quits: cdidd (cdidd@moz-523C3FF8.broadband.corbina.ru) (Input/output error)
[02:33:37] <ChrisMorgan> dbaupp: no: I see no nt_lit
[02:33:39] <ChrisMorgan> g2g
[02:33:54] <tjc> kimundi: we haven't decided yet
[02:34:00] <tjc> as per https://github.com/mozilla/rust/issues/8523
[02:34:10] <tjc> I think it makes sense to have rustc and rustpkg have different behavior
[02:34:38] <tjc> that is, you can specify a name and version via link attributes and if you only use rustc to compile the code, that's fine
[02:34:44] <tjc> if you compile it with rustpkg, it will give a warning
[02:34:49] <tjc> (and ignroe them)
[02:34:58] <kimundi> tjc: Okay, so I should keep them in the module tutorial
[02:35:10] <tjc> kimundi: hmm, that's a good question
[02:35:27] <tjc> kimundi: I think keep them in for now, at least
[02:35:33] <tjc> since it's not the rustpkg tutorial
[02:36:06] <kimundi> As in  "this is a crate root. You can define various attributes there, like the linkname or version"
[02:36:15] <tjc> Yeah
[02:36:29] <tjc> If you want to, you could say something like "this does not apply if you are going to build your crate with rustpkg...
[02:36:34] <tjc> â€¦see the rustpkg tutorial for details"
[02:37:04] <kimundi> tjc: Well, the problem is more that I already removed them (complete rewrite) xD. But I need to add an paragraph where they fit anyway
[02:37:12] <kimundi> yeah
[02:37:15] *** Joins: eschweic (Adium@moz-CF8BEBEF.dia.static.qwest.net)
[02:38:52] *** Joins: z0w0 (zack@moz-7E6DC3A.lnse2.woo.bigpond.net.au)
[02:40:41] *** Quits: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP) (Ping timeout)
[02:40:44] *** Joins: lmandel (lmandel@245CCC73.D3D77677.ADB88A9.IP)
[02:40:51] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[02:41:00] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[02:42:08] <kimundi> tjc: What about this form? extern mod my_auxiliary_farm (name = "farm", author = "mjh");
[02:42:22] <tjc> kimundi: do we support that now?
[02:42:30] <kimundi> No idea
[02:42:34] <tjc> heh ok
[02:42:52] <tjc> I think the rustpkg-y way to do it would be to get the author from the version control system if there is one
[02:43:15] <tjc> we already have extern mod foo = "â€¦"; where the stuff in the "" is a package ID
[02:43:26] <tjc> so you can refer to packages however you want in your crate that uses them
[02:43:38] <kimundi> so version would just be folded in the package id
[02:43:48] <tjc> right
[02:44:20] <dbaupp> we do support `extern mod foo(name="..", ...);`
[02:44:43] <kimundi> And explicitly requesting an specific library version witout using the pkg if won't be supported?
[02:44:58] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[02:45:13] <kimundi> package id*
[02:45:59] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[02:46:05] <tjc> well, I mean, a library author could always give different versions of their library different names if they wanted to
[02:46:10] <tjc> but that would be frowned upon :-)
[02:46:20] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[02:46:30] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[02:46:30] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/M00bBA
[02:46:30] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[02:46:36] <tjc> that is, I don't think we have a way to *request* (as opposed to declare) a specific version of a library now, except by using package IDs
[02:46:51] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Quit: eatkinson)
[02:47:20] <kimundi> So, what should I do with this section in the docs?
[02:47:29] <kimundi> When a comma-separated list of name/value pairs appears after `extern
[02:47:29] <kimundi> mod`, the compiler front-end matches these pairs against the
[02:47:29] <kimundi> attributes provided in the `link` attribute of the crate file. The
[02:47:29] <kimundi> front-end will only select this crate for use if the actual pairs
[02:47:29] <kimundi> match the declared attributes.
[02:47:52] <kimundi> extern mod my_farm (name = "farm", vers = "2.5");
[02:47:52] <kimundi> extern mod my_auxiliary_farm (name = "farm", author = "mjh");
[02:47:52] <kimundi> If any of the requested metadata do not match, then the crate
[02:47:52] <kimundi> will not be compiled successfully.
[02:48:03] *** Joins: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net)
[02:48:49] <tjc> kimundi: since we haven't made the changes yet, I would say to leave it as is but add a note that this is likely to change in the future
[02:49:04] <kimundi> okay
[02:49:15] *** Joins: eschweic1 (Adium@moz-CF8BEBEF.dia.static.qwest.net)
[02:49:15] *** Quits: eschweic (Adium@moz-CF8BEBEF.dia.static.qwest.net) (Connection reset by peer)
[02:49:59] *** Quits: eschweic1 (Adium@moz-CF8BEBEF.dia.static.qwest.net) (Quit: Leaving.)
[02:51:30] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[02:51:30] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/usYDow
[02:51:30] <ghrust> 13rust/06auto 144c5f625 15Brian Anderson: Fix some vector function failure tests. Closes #8698
[02:51:30] <ghrust> 13rust/06auto 1499a3434 15bors: auto merge of #8701 : brson/rust/issue-8698, r=thestinger
[02:51:31] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[02:52:06] <jmgrosen> is the reason FileStream.eof just fail!s just that it hasn't been implemented yet?
[02:53:53] <tjc> jmgrosen: is your tree up-to-date? looks to me like it has an eof() method that doesn't just fail
[02:54:07] <strcat> yay
[02:54:09] <strcat> it was just noise
[02:54:13] <strcat> http://huonw.github.io/isrustfastyet/buildbot/ :)
[02:54:24] <strcat> guess I should have realized from the tests speeding up
[02:54:40] <jmgrosen> tic, derp, I meant TcpStream :3
[02:54:46] <jmgrosen> https://github.com/mozilla/rust/blob/master/src/libstd/rt/io/net/tcp.rs#L84
[02:54:50] <strcat> now to figure out how to fix all those other llvm lint errors...
[02:55:06] <tjc> jmgrosen: aha
[02:55:32] <dbaupp> strcat: have you tried enabling mergefuncs?
[02:55:36] <strcat> dbaupp: not yet
[02:55:43] <strcat> I want to get acrichto's branch to land first
[02:55:45] <strcat> going to work on that
[02:56:13] <tjc> jmgrosen: I don't know if TCP streams don't support that, by default (like, it gets closed when the destructor runs, and it's not EOF until it's closed), or if it's a not-implemented-yet
[02:56:19] <strcat> anyway it would be awesome to remove type_use
[02:56:23] <tjc> the person who wrote that didn't comment to say why :-)
[02:56:24] <strcat> it's the most awful thing in librustc
[02:56:33] <jmgrosen> tjc: ok, thanks anyway
[02:57:44] <strcat> mergefunc itself is one of the simplest passes in LLVM, so I could actually improve it
[02:57:49] * dbaupp wills the IRFY cache to clear faster
[02:58:00] *** Quits: kimundi (kimundi@moz-1D08C645.dip0.t-ipconnect.de) (Ping timeout)
[02:58:04] <strcat> unlike most of them where I think you have to be a compiler to understand them
[02:58:20] <dbaupp> improve it LLVM-side?
[02:58:23] <strcat> yes
[02:58:28] <strcat> it's not very good yet
[02:58:35] <strcat> it's better than type_use though :P
[02:58:42] <dbaupp> it's just hashing the IR or something, sin't it?
[02:58:46] <dbaupp> *isn't
[02:58:55] <strcat> kind of
[02:59:06] <strcat> dbaupp: http://llvm.org/docs/doxygen/html/MergeFunctions_8cpp_source.html
[02:59:37] *** Quits: boredomist (user@moz-63CF9F31.res-cmts.sesp.ptd.net) (Ping timeout)
[02:59:45] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[03:00:13] <strcat> could be faster, for one thing
[03:00:32] <dbaupp> yeah, the O(n^^2) thing sounds like a good place to start.
[03:00:36] <dbaupp> *^
[03:00:49] <strcat> hm I wonder how you ask an LLVM pass for statistics
[03:01:19] *** Joins: maik (maik___@moz-28AFE1D.dip0.t-ipconnect.de)
[03:01:26] *** Joins: kimundi (kimundi@moz-22DD76BD.dip0.t-ipconnect.de)
[03:01:39] <strcat> aha, not on by default
[03:03:56] <ChemicalHarm> So, now that #8666 is in master, is there a way to pass NULL to a C function that takes a function pointer, without having to re-specify the entire type of the function?
[03:04:43] <dbaupp> ChemicalHarm: doesn't foo(std::ptr::null()) type-infer correctly?
[03:04:50] *** Quits: lmandel (lmandel@245CCC73.D3D77677.ADB88A9.IP) (Quit: lmandel)
[03:05:00] <ChemicalHarm> I had it as a member of a struct, and no it didn't
[03:05:26] <ChemicalHarm> I had to use "as" to cast it, which meant repeating the whole function pointer type
[03:05:47] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[03:05:48] <ChemicalHarm> I.e. std::ptr::null() as extern "C" fn(args) -> returntype
[03:05:50] *** kimundi is now known as zz_kimundi
[03:06:05] <ChemicalHarm> if it's a bug I can put in an issue
[03:06:09] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[03:06:23] <dbaupp> std::ptr::null::<extern "C" fn(args) -> returntype>() would work too, but that only solves the "problem" of writing `as`
[03:06:36] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: Places to go, people to annoy)
[03:06:40] <engla> that's not the same
[03:07:22] <dbaupp> hm?
[03:07:26] <dbaupp> oh
[03:07:36] <ChemicalHarm> actually that doesn't work...ptr::null::<extern "C" fn...> would be a null pointer-to-function-pointer rather than a null function pointer
[03:07:41] <dbaupp> it's not *extern fn, it's just plain extern fn.
[03:07:49] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[03:07:57] <ChemicalHarm> I actually had to do this: ptr::null::<c_void>() as extern "C" fn ....
[03:08:15] <ChemicalHarm> which works, but is annoying
[03:08:16] <strcat> rusti: 0 as extern "C" fn()
[03:08:18] <dbaupp> yeah, I guess you need the cast. you could write `type CallbackType = extern "C" fn` and then "null() as CallbackType"
[03:08:23] <strcat> rusti: 2
[03:08:24] -rusti- 2
[03:08:26] <strcat> rusti: 0 as extern "C" fn()
[03:08:29] <strcat> ;\
[03:08:41] <strcat> rusti: let x = 0 as extern "C" fn(); println("foo")
[03:08:41] -rusti- <anon>:5:13: 5:14 warning: unused variable: `x` [-W unused-variable (default)]
[03:08:41] <dbaupp> rusti: (0 as extern "C" fn(), "functions are invisible")
[03:08:42] -rusti- <anon>:5          let x = 0 as extern "C" fn(); println("foo")
[03:08:43] -rusti-                       ^
[03:08:45] -rusti- foo
[03:08:47] -rusti- ()
[03:08:48] -rusti- (, "functions are invisible")
[03:09:37] <engla> nice safety hole
[03:10:03] <engla> rusti: let f = 0 as extern "Rust" fn() -> int; f()
[03:10:04] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[03:10:10] <engla> \o/ thanks ChemicalHarm 
[03:10:49] <ChemicalHarm> yes, 0 instead of ptr::null works, but it will type-check to see if the function signature matches.  Which, in the normal case, is good!  I want it catching me if I pass an extern fn with the wrong signature.
[03:10:58] <ChemicalHarm> I just wish it could infer it for null
[03:11:19] <engla> no, this is broken, you shouldn't be able to create a null function pointer without using unsafe
[03:12:11] <ChemicalHarm> Yes, I see that...it is a safety hole
[03:12:20] *** Quits: josh (josh@moz-D3896A24.dhcp.dlth.mn.charter.com) (Quit: josh)
[03:12:35] <ChemicalHarm> but is the safety hole creating the null function pointer, or calling it?
[03:12:44] *** zz_kimundi is now known as kimundi
[03:13:13] <dbaupp> at least one of casting to extern fn and calling an extern fn should be `unsafe`.
[03:13:14] <engla> creating it, at least for the extern "Rust" fn() type
[03:13:29] <ChemicalHarm> i.e. should it require "unsafe" to call any extern "C" fn, like it does for one declared extern "C" as an item
[03:13:33] <engla> dbaupp: extern "Rust" fn() is not an extern function, it's the normal function type
[03:13:37] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[03:13:37] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[03:13:44] <dbaupp> engla: I know
[03:14:03] <dbaupp> rusti: let f = 0 as extern "C" fn(); f()
[03:14:04] -rusti- <anon>:5:39: 5:40 error: invoking non-Rust fn in fn without #[fixed_stack_segment] [-D cstack (default)]
[03:14:04] -rusti- <anon>:5          let f = 0 as extern "C" fn(); f()
[03:14:04] -rusti-                                                 ^
[03:14:04] -rusti- error: aborting due to previous error
[03:14:04] -rusti- application terminated with error code 101
[03:14:05] <engla> ah sorry
[03:14:17] *** Quits: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net) (Quit: echristo)
[03:14:29] <dbaupp> rusti: #[fixed_stack_segment] fn foo () { let f = 0 as extern "C" fn(); f() }
[03:14:30] -rusti- ()
[03:14:40] <dbaupp> rusti: #[fixed_stack_segment] fn foo () { let f = 0 as extern "C" fn(); f() } foo()
[03:14:41] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[03:16:05] *** Quits: maik (maik___@moz-28AFE1D.dip0.t-ipconnect.de) (Ping timeout)
[03:16:09] <ChemicalHarm> I would think calling it is the unsafe action.  That's how it works for imported extern "C" functions, and it makes sense.  The reason you have an extern "C" fn in the first place is either you're about to give it to a C API, or you just got it from a C API, right?
[03:16:52] <ChemicalHarm> If you call to a pointer a C API just handed you, that's unsafe...and C APIs will hand you nulls.  It can't be assumed that they're never NULL...a lot of FFIs will need it
[03:17:26] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[03:17:32] *** Quits: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net) (Input/output error)
[03:19:18] <jmgrosen> could someone help me figure this error out? https://gist.github.com/jmgrosen/1e5fe5e40125417f98f9
[03:19:34] <jmgrosen> i haven't been able to reproduce it in a minimal example
[03:20:45] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[03:21:16] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[03:24:52] *** Parts: z0w0 (zack@moz-7E6DC3A.lnse2.woo.bigpond.net.au) ()
[03:25:09] <Eridius> rusti: ["a", "b", "c"].connect("/")
[03:25:10] -rusti- ~"a/b/c"
[03:25:16] <Eridius> rusti: ["", "a", "b"].connect("/")
[03:25:17] -rusti- ~"/a/b"
[03:25:48] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Quit: Leaving)
[03:25:50] <engla> jmgrosen: at least, I think it must be &'self mut T since the reader methods use &mut self
[03:25:53] <engla> ?
[03:25:53] *** Quits: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au) (Quit: gavinb)
[03:26:30] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[03:26:30] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1499a3434 to 14f997924: 02http://git.io/N3iJvQ
[03:26:30] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[03:26:32] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[03:26:32] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/PBRm1w
[03:26:32] <ghrust> 13rust/06auto 14877755b 15Alex Crichton: Rewrite pass management with LLVM...
[03:26:32] <ghrust> 13rust/06auto 1459215c3 15bors: auto merge of #8729 : thestinger/rust/better-llvm, r=thestinger...
[03:26:32] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[03:27:05] <jmgrosen> engla, you mean in the struct definition? as far as i know, you can't declare mutability for individual fields
[03:27:25] <Eridius> jmgrosen: & and &mut are two separate things
[03:27:25] <engla> not for the slot, but &mut T is a different type than &T
[03:27:56] <jmgrosen> oh. interesting >.<
[03:28:02] <jmgrosen> engla, thanks for the help!
[03:28:11] <engla> well I'm not sure that's the hold-up
[03:28:17] <jmgrosen> yeah, it was
[03:28:21] <engla> nice
[03:28:24] <jmgrosen> (well, there are others, but fixable)
[03:28:55] <engla> the old Reader/Writer traits didn't use &mut self
[03:30:31] <dbaupp> they just used @ instead!
[03:30:34] <dbaupp> <3 new-io
[03:30:52] *** kimundi is now known as zz_kimundi
[03:31:11] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[03:31:48] <jmgrosen> is there a way to take traits out of the prelude?
[03:31:52] <jmgrosen> or "forget" about them?
[03:32:02] <jmgrosen> it's annoying having std::io::Reader/Writer in there
[03:32:49] <dbaupp> you can use #[no_implicit_prelude] on a mod to avoid having the whole thing imported
[03:33:05] <dbaupp> (but that loses the rest of it too. :( )
[03:33:11] <jmgrosen> dbaupp, alright
[03:33:45] <dbaupp> rusti: #[no_implicit_prelude] mod foo { fn no_print() { print("nope"); } } 
[03:33:46] -rusti- <anon>:5:58: 5:63 error: unresolved name `print`.
[03:33:46] -rusti- <anon>:5          #[no_implicit_prelude] mod foo { fn no_print() { print("nope"); } } 
[03:33:46] -rusti-                                                                    ^~~~~
[03:33:46] -rusti- error: aborting due to previous error
[03:33:47] -rusti- application terminated with error code 101
[03:34:24] *** Quits: Quora (quora@moz-4E922014.student.iastate.edu) (Quit: WeeChat 0.4.1)
[03:35:06] <jmgrosen> rusti: #[no_implicit_prelude] mod foo { use std::io::print; fn print_test() { print("yup"); } }
[03:35:07] -rusti- ()
[03:35:36] *** Joins: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net)
[03:35:56] *** Quits: Nisstyre (wes@moz-FD86289.netflash.net) (Ping timeout)
[03:36:07] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[03:36:19] *** Quits: Nisstyre (wes@moz-FD86289.netflash.net) (Quit: Leaving)
[03:36:48] <ChemicalHarm> I created issue #8730 about the null extern fns...both the safety hole and the lack of inference
[03:37:02] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[03:38:26] <dbaupp> ChemicalHarm: could you make it specific to the lack of inference? (engla filed https://github.com/mozilla/rust/issues/8728, which I'm going to reopen.)
[03:39:43] <engla> hehe
[03:39:49] <ChemicalHarm> ok...you mean make 8730 about inference, and 8728 will be about the safety hole?
[03:40:08] <dbaupp> yup :)
[03:40:20] <dbaupp> (thanks for filing it, in any case.)
[03:41:43] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[03:43:45] *** Joins: mortisha (Mibbit@3D0FFDCF.95F86AD9.520CDC98.IP)
[03:44:13] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[03:46:09] *** Quits: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net) (Quit: echristo)
[03:46:09] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[03:46:20] <ChemicalHarm> updated...no problem
[03:46:55] <jfbk> is there any way to use a method as a closure?  something like impl Foo { fn foo(&self) {â€¦} }  â€¦ let x = Foo; Foo::foo(x), but that doesn't work.
[03:47:44] <dbaupp> jfbk: `|x| x.foo()` is the only way atm
[03:47:54] <jfbk> ok, thanks
[03:47:56] *** Joins: Sergio965 (sergiobz@moz-8D9DFEEF.hsd1.ma.comcast.net)
[03:48:40] <dbaupp> ChemicalHarm: looks good
[03:50:45] *** Quits: brson (brson@5D3B67E3.71E1659D.DFB5E910.IP) (Ping timeout)
[03:51:34] <enix> So, I've noticed that between a1674b6150b20616c954e37206012b356ff81b1c and 2c0f9bd35493def5e23f0f43ddeba54da9d788b4 there is a 7% decrease in performance for some of my code. Is it worth opening a bug?
[03:54:02] <strcat> enix: rebuild first
[03:54:05] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[03:54:06] *** ChanServ sets mode: +o brson
[03:54:07] <strcat> I just fixed a regression
[03:54:22] <strcat> 180e235d3dbe00ff3b247552bb83cca0be8cf06d
[03:54:47] *** Joins: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se)
[03:55:19] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[03:55:26] <strcat> enix: it's possible there are other issues caused by type_use too
[03:55:34] <dbaupp> strcat: android died again :(
[03:56:08] <enix> i did a make clean and full rebuild on both revisions
[03:56:30] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[03:56:30] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/T0OrAw
[03:56:30] <ghrust> 13rust/06auto 143479436 15Andrew Dunham: Fix two small warnings
[03:56:30] <ghrust> 13rust/06auto 14c96b1d8 15bors: auto merge of #8716 : andrew-d/rust/andrew-fix-warnings, r=alexcrichton...
[03:56:30] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[03:56:47] <strcat> enix: yes but I fixed a regression in 180e235d3dbe00ff3b247552bb83cca0be8cf06d so your issue may already be fixed
[03:57:05] <strcat> it's likely from the LLVM upgrade
[03:57:25] <strcat> it stopped being as lenient with our invalid IR
[03:57:43] <enix> ok, i'll try out that revision
[03:58:33] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[03:58:58] <enix> and if that doesn't fix it, try out the before and after llvm commits, and then if i feel like it, bisect
[04:00:24] <enix> thanks
[04:00:27] *** Quits: Jesin (Jessin_@moz-5654D37.washdc.fios.verizon.net) (Quit: Leaving)
[04:00:30] <pepper_chico> I'm just starting the rust tutorial, I've looked around a bit, just a bit, I've read moderately and learn more about Go, nowâ€¦ I pray my concerns about rust don't become true as I dive into it, the impression is that it has too many language details, in the same vein as c++, and contrary the simplicity of Goâ€¦ which I was liking
[04:00:31] <ChrisMorgan> Uh oh. deriving(Clone) for this macro is deriving Clone *twice*, which naturally doesn't work.
[04:02:54] <SiegeLord> pepper_chico: You need at least some complexity to enforce the guarantees Rust is meant to provide
[04:03:22] <SiegeLord> If you start dropping guarantees, you can drop complexity too... but that's not a tradeoff everybody wishes to make
[04:04:48] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[04:05:39] <pepper_chico> I wonder whether such assumption of complexity being directly proportional to efficiency & safety guarantees are really absolutely necessary
[04:06:29] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[04:06:46] <SiegeLord> It's an area of active research
[04:07:20] <pepper_chico> =)
[04:07:42] <SiegeLord> Rust developers are chopping stuff off all the time while retaining guarantees... they are definitely aware of the complexity issues and are trying to minimize them
[04:08:09] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[04:08:51] *** Quits: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net) (Ping timeout)
[04:08:52] *** Joins: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net)
[04:09:24] *** Joins: sammykim_ (Mibbit@48AEBDE2.ACF655DA.97B9B372.IP)
[04:09:27] <pepper_chico> I hope sooâ€¦ that's good, should be the main aimâ€¦. I'm long time c++ dev, good knowledge of the language, modern, but just feel the complexity being added in some gratuitous form
[04:09:43] <dbaupp> ChrisMorgan: you're using #[deriving] inside a macro, right?
[04:09:47] <ChrisMorgan> Yes.
[04:10:15] <mortisha> klutzy: ping
[04:10:30] <dbaupp> ChrisMorgan: https://github.com/mozilla/rust/issues/6976 :(
[04:10:38] *** Quits: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se) (Ping timeout)
[04:10:39] <ChemicalHarm> pepper_chico: speaking as a newbie myself, also with a C++ background, I'll say this: even in the current state, with many docs outdated and the API changing underneath me, I still find it easier to figure out what I did wrong in a rust program than I used to with C++
[04:10:42] <klutzy> mortisha: pong
[04:11:04] <ChemicalHarm> the error messages are very nice, especially for its unfinished state
[04:11:11] <mortisha> do u still need the build log for that jemalloc issue?
[04:11:28] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[04:11:33] <ChrisMorgan> dbaupp: I guess I'll just put in the impl manually.
[04:11:42] <strcat> pepper_chico: so what do you feel is gratuitous complexity is rust? do you have any specific suggestions?
[04:11:47] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[04:11:47] <mortisha> klutzy: do u still need the build log for that jemalloc issue?
[04:12:26] <pepper_chico> strcat, I was talking about c++
[04:12:45] <klutzy> mortisha: I think we should report build failure as a new issue
[04:13:25] <klutzy> so it's good to attach failure report for it, but I don't have windows right now :)
[04:13:29] <mortisha> klutzy: agreed. here's the error log if you still need it https://gist.github.com/anonymous/5af362d5ed1523a474c0
[04:13:55] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[04:13:58] <klutzy> mortisha: oh, thanks! can I link it on new issue?
[04:14:19] <mortisha> klutzy: sure
[04:15:11] <ChrisMorgan> Eww, don't like this: --pretty expanded produces invalid Rust code, with `pub impl ::std::clone::Clone for T`; the "pub" is no longer legal.
[04:15:34] <dbaupp> ChrisMorgan: the pprinter is amazing
[04:15:45] <dbaupp> -ly bad
[04:16:34] <dbaupp> it prints & &x as &&x, which doesn't work; and I'm pretty sure it'd print a syntax extension generated (*x).foo() as *x.foo()
[04:17:29] <dbaupp> ... running it on libstd is neat too; because it forgets to unindent sometimes, and then every lines ends up starting with hundreds of spaces
[04:17:40] <ChrisMorgan> Then too, there's the fact that on libhttp it ends up by the end of the file at an indent level of 106 spaces
[04:18:59] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[04:19:31] <pepper_chico> someone has sent me a compilable from trunk version of the front matter of the rust web site, today here, https://gist.github.com/kballard/6323670 â€¦ there was a problem initially, he forgot the i suffix for the first integer in the list, and got a bunch of errors because of that. Well, from a point of view, of most known programming languages, one would expect plain number to assume a default type and no problems, but that simple
[04:19:31] <pepper_chico>  array free of the initial explicitly suffixed constant causes a lot of trouble
[04:19:50] <pepper_chico> what's the rationale behind such code style?
[04:19:57] *** Joins: brson (brson@8ECA0B87.AD77F8DE.D1E74241.IP)
[04:19:57] *** ChanServ sets mode: +o brson
[04:20:36] <klutzy> mortisha: reported here https://github.com/mozilla/rust/issues/8731 thanks for log!
[04:20:39] <strcat> pepper_chico: integer literals are generic in rust
[04:20:53] <pepper_chico> oh
[04:20:56] *** Quits: sammykim_ (Mibbit@48AEBDE2.ACF655DA.97B9B372.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:20:58] <strcat> they only fall back to int, and due to a *bug* it didn't work there
[04:21:02] <strcat> not a design decision
[04:21:09] <pepper_chico> ah ok
[04:21:17] <strcat> however, I do think it's not a good idea for them to fall back to a signed fixed-size integer as a default
[04:21:36] <strcat> because if you're encouraged to use generic literals, and you remove your type hint somewhere in the function, you can gain a bug
[04:21:57] <Eridius> strcat: falling back to arbitrary-precision numbers would silently degrade performance though
[04:22:02] <Eridius> and would generally be unexpected
[04:22:03] <strcat> not saying it should
[04:22:20] <pepper_chico> well, generics are in another level of adoption compared to c++ hehe
[04:22:23] <Eridius> maybe just have an off-by-default lint that warns you when you're relying on integer fallback?
[04:22:26] <strcat> I'd rather not have a fallback if they are going to be generic
[04:22:51] <strcat> it's always going to cause surprises as-is
[04:23:05] <strcat> and it places `int` above other integer types
[04:23:10] *** Joins: sammykim_ (Mibbit@48AEBDE2.ACF655DA.97B9B372.IP)
[04:23:15] *** Parts: sammykim_ (Mibbit@48AEBDE2.ACF655DA.97B9B372.IP) ()
[04:23:19] <strcat> even though uint is really going to be more common, and int is not intuitive mathematically anyway
[04:23:22] *** Joins: mib_jrnbv5 (Mibbit@DDF2FC12.F553F9.14D5B978.IP)
[04:24:18] <strcat> uint covers any use case with a memory size or address, and most counters
[04:24:29] *** Quits: mib_jrnbv5 (Mibbit@DDF2FC12.F553F9.14D5B978.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:24:33] *** Quits: mortisha (Mibbit@3D0FFDCF.95F86AD9.520CDC98.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:24:39] *** Joins: chozza (Mibbit@DDF2FC12.F553F9.14D5B978.IP)
[04:24:45] <chozza> join #future
[04:24:48] *** Quits: Sergio965 (sergiobz@moz-8D9DFEEF.hsd1.ma.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[04:26:46] <strcat> meh
[04:26:53] <strcat> we can't use mergefunc before fixing the invalid casts
[04:27:13] <strcat> so much for checking if type_use was any use
[04:27:39] <olsonjeffery> friday night in #rust, aww yeah.
[04:28:13] *** Joins: mortisha (Mibbit@A151F86C.E1D01C6.520CDC98.IP)
[04:28:42] <strcat> rusti: if true {}
[04:28:47] -rusti- ()
[04:31:30] <strcat> Eridius: basically I am against having "default" types in general ;p
[04:31:58] <strcat> if it were up to me, vector literals wouldn't exist - [1, 2, 3] would be a generic container literal
[04:31:59] <Eridius> hrm, vec::push is #[inline], but vec::pop_opt isn't. Is that just an oversight?
[04:32:03] <strcat> probably
[04:32:48] <strcat> meh stupid invalid casts
[04:33:44] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[04:35:00] <dbaupp> strcat: implement [] as a generic container literal?
[04:35:18] <strcat> dbaupp: but it's not, it's a fixed-size vector ;p
[04:35:31] *** Quits: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[04:36:00] <dbaupp> strcat: that's why you change it :P
[04:36:15] <dbaupp> strcat: also, with your mergefunc experimentation, is that with type_use disabled?
[04:36:20] <strcat> yes
[04:36:23] <strcat> broken either way
[04:36:29] <strcat> asserts on invalid casts, we have lots
[04:36:51] <dbaupp> :(
[04:37:34] *** Joins: sankha93 (Instantbir@CAF6D3FF.9C875DCD.9105FBCF.IP)
[04:38:21] <brson> r? https://github.com/mozilla/rust/pull/8599
[04:38:32] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[04:40:03] <carleastlund> strcat: I like the idea of generic constructors.  I know writing integers of different bit widths in the examples I've been playing with would've been easier without writing "u32" and "u64" everywhere.
[04:40:54] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[04:41:33] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[04:41:36] <dbaupp> carleastlund: I think strcat is advocating for '1' *not* defaulting to int at all, rather than making it non-generic.
[04:41:53] *** Quits: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net) (Ping timeout)
[04:41:58] <strcat> yeah, so you can trust that you'll get an error if you're missing a hint
[04:42:23] <strcat> instead of putting `u` everywhere to be safe
[04:42:25] <carleastlund> dbaupp: I don't understand the "rather than making it non-generic" part.
[04:42:58] <dbaupp> it sounds like you're arguing against requiring 1u32 everytime you want a u32 literal
[04:43:31] <dbaupp> and making the suffix optional is exactly making the literals generic (conversely, requiring the suffix is making them non-generic.)
[04:43:36] <carleastlund> I had assumed -- and perhaps I missed the point -- that [1,2,3] could be a vector of int, a linked list of u16, or whatever other container of numeric types based on type inference, without having to annotate the [] or each number individually.
[04:44:13] <dbaupp> right, that's what strcat is saying.
[04:44:20] <strcat> as long as a hint is somewhere
[04:44:29] <strcat> rusti: let x = 5; x
[04:44:30] -rusti- 5
[04:44:32] <strcat> it's an int
[04:44:44] <strcat> rusti: fn foo(x: uint) {} let x = 5; foo(x); x
[04:44:45] -rusti- <anon>:5:16: 5:17 warning: unused variable: `x` [-W unused-variable (default)]
[04:44:45] -rusti- <anon>:5          fn foo(x: uint) {} let x = 5; foo(x); x
[04:44:45] -rusti-                          ^
[04:44:45] -rusti- 5
[04:44:51] <strcat> it's a uint
[04:44:54] <carleastlund> Yup.  And I'm all for it.  I'd much rather write "let nums : List<u16> = [1,2,3]" than "let nums = make_list(~[1u16,2u16,3u16])"
[04:44:56] *** Quits: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP) (Ping timeout)
[04:45:03] <strcat> that ends up pretty unpredicatable due to the fallback to int
[04:45:24] *** Joins: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net)
[04:45:40] <strcat> for i in range(0, 2) { printfln!("debug: %u", i); /* do something with i */ }
[04:45:45] <strcat> they're uints
[04:45:50] <strcat> for i in range(0, 2) { /* do something with i */ }
[04:45:52] <strcat> now they're ints
[04:47:01] *** Joins: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP)
[04:47:23] <strcat> strcat@thinktank i ~ master % ~/projects/rust/x86_64-unknown-linux-gnu/stage1/bin/rustc foo.rs -Z lint-llvm --test |& wc -l
[04:47:25] <strcat> 79
[04:47:28] <strcat> strcat@thinktank i ~ master % ~/projects/rust/x86_64-unknown-linux-gnu/stage1/bin/rustc foo.rs -Z lint-llvm -Z no-monomorphic-collapse --test |& wc -l
[04:47:30] <strcat> 0
[04:47:42] <strcat> so maybe I really just do need to track down the few remaining invalid casts
[04:47:46] <dbaupp> o_O
[04:47:57] <strcat> type_use is really bad
[04:48:02] <strcat> I think it's a major perf hit due to those
[04:48:10] <strcat> each one stops a function from being inlined
[04:48:18] <dbaupp> does mergefuncs work with -Z n-m-c ?
[04:48:26] <strcat> no
[04:48:31] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[04:48:35] <strcat> I hardwired n-m-c always on when I tried
[04:48:36] *** Quits: heftig_ (heftig@moz-C0DBD4B2.dip0.t-ipconnect.de) (Quit: Quitting)
[04:48:40] <dbaupp> oh there's stuff that lint doesn't catch?
[04:48:59] <strcat> this is a 100 line test file
[04:49:15] <strcat> dbaupp: but yes there's stuff it doesn't catch - but I think it should catch every invalid cast
[04:49:21] <strcat> invalid as in not defined in the LLVM IR
[04:49:41] <strcat> some of the other checks are less reliable
[04:50:06] * strcat hardwires lint-llvm on too
[04:50:18] *** Joins: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se)
[04:50:31] *** Quits: KindOne (KindOne@moz-EE3D0E4D.dynamic.ip.windstream.net) (Ping timeout)
[04:50:59] *** Joins: jclements (jclements@moz-37891906.dsl.snlo01.pacbell.net)
[04:52:11] <Eridius> hrm, how the heck can I truncate a ~str?
[04:53:13] <Eridius> strcat: rustdoc_ng doens't seem to tell me if a function is unsafe
[04:53:26] <Eridius> surely there's something better than str::raw::set_len()
[04:53:26] <strcat> bug cmr 
[04:53:29] <dbaupp> cmr, Seldaek: ^
[04:53:31] <Eridius> oops yeah that's who I meant
[04:53:34] <ChemicalHarm> The docs of std::task are really confusing me...under TaskOpts it talks about calling foreign code that blocks, and being able to start a task in a different scheduler
[04:53:34] <strcat> ;p
[04:53:35] <Eridius> cmr: what I said to strcat :P
[04:53:51] <Eridius> cmhttp://seld.be/rustdoc/master/std/str/raw/fn.set_len.html doesn't tell me it's unsafe
[04:53:54] <Eridius> gah
[04:53:59] <Eridius> cmr: http://seld.be/rustdoc/master/std/str/raw/fn.set_len.html doesn't tell me it's unsafe
[04:54:31] <Eridius> is there, in fact, no safe way of truncating a string? This seems like a very obvious thing to want to do
[04:54:33] <engla> well it's in the raw submodule
[04:54:52] *** Joins: KindOne (KindOne@moz-7019D552.dynamic.ip.windstream.net)
[04:55:16] <ChemicalHarm> It talks about starting the task in a new scheduler in context of a field sched of type SchedOpts, which in turn has only one field of type SchedMode, an enum that can be "Default" or "SingleThreaded"
[04:55:33] *** Joins: eatkinson (eatkinson@moz-7B0110AD.mv.mozilla.com)
[04:55:33] <enix> strcat: 180e235d3dbe00ff3b247552bb83cca0be8cf06d improves performance for me a bit
[04:55:38] <enix> but there is still a regression
[04:55:56] <ChemicalHarm> "SingleThreaded" says "all tasks run in the same OS thread", which is exactly what you don't want for calling foreign code that blocks
[04:56:15] <strcat> enix: I've confirmed there's another regression caused by type_use
[04:56:31] <strcat> enix: don't know if that will fix all that you're seeing
[04:56:50] <strcat> well and this will be hard to land
[04:57:09] <enix> ok, i'll test again after a fix lands
[04:57:26] <enix> ah, ok, is there a issue # so that I know when to retest?
[04:57:39] <strcat> enix: not yet
[04:57:40] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[04:57:41] <enix> this isn't critical for me, of course, just a toy project. just trying my best to help out
[04:57:42] <dbaupp> Eridius: add it
[04:57:45] <strcat> just investigating atm
[04:57:59] <strcat> enix: try compiling with -Z no-monomorphic-collapse
[04:58:05] <enix> ah, ok
[04:58:07] <Eridius> dbaupp: yeah I am
[04:58:15] <strcat> enix: may or may not fix it ;p
[04:58:49] <brson> ChemicalHarm: documentation is out of date there
[04:59:05] <enix> that doesn't really change performance for me
[04:59:06] <brson> ChemicalHarm: SingleThrheaded means put a task in its own thread
[04:59:34] <strcat> 9425 lint errors in libstd with type_use on
[04:59:37] <strcat> 378 without
[04:59:39] <ChemicalHarm> ah...that's kind of the opposite of what the docs say!  Ok, thanks
[04:59:41] <strcat> so yeah, that's most of them
[04:59:46] <Eridius> do failing tests no longer have to be annotated with #[cfg(not(windows))]?
[04:59:52] <Eridius> rather, intentionally failing tests
[04:59:55] <strcat> Eridius: don't think they have to be
[05:00:48] <strcat> enix: probably going to be helpful to bisect it then
[05:01:16] <enix> ok
[05:01:25] <strcat> dbaupp: the remaining lint errors are actually interesting
[05:01:28] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[05:01:29] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/T0OrAw
[05:01:29] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[05:01:34] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[05:02:12] <strcat> dbaupp: http://ix.io/7xd
[05:02:16] <enix> i will over the next few days
[05:02:20] <enix> thanks
[05:03:01] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[05:03:48] <strcat> dbaupp: 2 undef casts
[05:04:25] *** Quits: Earnestly (earnest@B0BDF733.8FDE20A.5411983D.IP) (Ping timeout)
[05:04:29] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[05:04:29] * ChrisMorgan wants new data for http://huonw.github.io/isrustfastyet/mem/
[05:05:07] <strcat> it's really bad now
[05:06:09] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[05:06:29] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[05:06:29] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1sMcSA
[05:06:29] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[05:06:38] <Eridius> r? https://github.com/mozilla/rust/pull/8732
[05:06:49] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[05:07:54] <strcat> Eridius: it's not actually safe
[05:07:58] <strcat> it can break the UTF-8 guarantee
[05:08:29] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[05:08:29] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[05:08:36] <Eridius> strcat: oh damn
[05:08:54] <dbaupp> strcat: oh, "interesting" in that you can fix them really easily and it's interesting that they haven't been fixed before?
[05:08:59] * dbaupp is hopeful
[05:09:02] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Connection reset by peer)
[05:09:18] <dbaupp> ChrisMorgan: pester cmr about /mem/
[05:09:24] <strcat> dbaupp: interesting as in I've never seen them because there were 9000 ones from type_use
[05:09:45] <ChrisMorgan> cmr: pester pester pester! Can you fix mem stats so http://huonw.github.io/isrustfastyet/mem/ works again?
[05:10:11] <dbaupp> ChrisMorgan: (or even better, pester cmr into dropping out of uni so he can focus on shepherding the bencher. :P )
[05:10:37] <dbaupp> Eridius: you might need to check is_char_boundary()
[05:10:41] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[05:10:49] <dbaupp> (unless set_len does this... ?)
[05:10:56] <Eridius> dbaupp: no set_len is unsafe. I'll check the char boundaries in a sec
[05:11:31] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[05:11:31] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1sMcSA
[05:11:31] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[05:11:57] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[05:12:06] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:12:14] <strcat> Eridius: I'm not really sure if a truncate method can make sense on str
[05:12:24] <strcat> at least with a byte index
[05:12:32] <strcat> how do you end up with the byte index in the first place?
[05:12:50] <Eridius> strcat: with find()
[05:12:58] *** Quits: eatkinson (eatkinson@moz-7B0110AD.mv.mozilla.com) (Quit: eatkinson)
[05:13:16] <Eridius> strcat: I can use byte indexes to slice a string, but in this case I don't want a slice, I want to just mutate the original string
[05:13:27] <strcat> ok that makes sense
[05:13:50] <Eridius> maybe there's a call for truncate_chars() too, I don't know
[05:13:58] <Eridius> but that can be added if someone decides they need it
[05:16:30] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[05:16:30] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1sMcSA
[05:16:30] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[05:18:08] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Client exited)
[05:19:24] * dbaupp wishes we had grapheme handling already
[05:19:57] <strcat>  i32 (%"enum.std::libc::types::common::c95::c_void[#2]"*, %"enum.std::libc::types::common::c95::c_void[#2]"*, i64)*
[05:19:59] <strcat>  i32 (%"enum.libc::types::common::c95::c_void"*, %"enum.libc::types::common::c95::c_void"*, i64)*)
[05:20:01] <strcat> uh
[05:20:09] <strcat> those are different types
[05:20:13] <strcat> that's not good
[05:21:04] <dbaupp> what? how?
[05:21:22] <strcat> look at them
[05:21:27] <strcat> enum.std::libc::types::common::c95::c_void
[05:21:30] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[05:21:30] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1sMcSA
[05:21:30] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[05:21:32] <strcat> enum.libc::types::common::c95::c_void
[05:21:44] <strcat> we are compiling it very wrong :s
[05:21:56] <dbaupp> yeah, I know; I'm asking how that could even happen
[05:22:09] <dbaupp> inlining/cross-crate stuff gone wrong?
[05:22:15] <strcat> pub use maybe
[05:22:29] <strcat> dbaupp: this is within libstd
[05:22:31] <strcat> no xcrate
[05:22:43] <dbaupp> strcat: oh!
[05:22:45] *** Quits: KindOne (KindOne@moz-7019D552.dynamic.ip.windstream.net) (Ping timeout)
[05:22:49] *** Quits: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net) (Ping timeout)
[05:23:19] <strcat> we must compile pub use statements wrong
[05:23:54] <dbaupp> yeah, we do
[05:23:55] <strcat> dbaupp: this is from memcmp
[05:23:58] <strcat> in vec.rs
[05:24:00] <strcat> I think
[05:24:16] <SingingBoyo> is it possible to have a private impl?
[05:24:19] <SingingBoyo> i.e. if I wanted to add a method to strings for a specific file/module but not have it visible outside?
[05:24:19] <dbaupp> `pub use` does a pile of strange things.
[05:24:29] <SingingBoyo> or to ~str, rather
[05:24:34] *** Quits: jdm (jdm@97DF0582.DEAB171B.971E19F6.IP) (Ping timeout)
[05:24:47] <strcat> SingingBoyo: functions/methods are private by default, and traits are private by default
[05:24:52] <dbaupp> SingingBoyo: yes, just write `trait Foo {}` rather than `pub trait Foo {}`
[05:24:54] <strcat> a trait impl has visibility determined by the trait
[05:25:18] <SingingBoyo> ah right fns are module-scoped, not struct-scoped
[05:25:40] <SingingBoyo> or was that some other language... been using too many lately
[05:26:10] *** Joins: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net)
[05:26:29] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[05:26:29] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1sMcSA
[05:26:29] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[05:27:03] *** Joins: KindOne (KindOne@83B13189.B3929A3A.34F73994.IP)
[05:27:59] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[05:29:50] *** Quits: jclements (jclements@moz-37891906.dsl.snlo01.pacbell.net) (Quit: jclements)
[05:31:15] *** Joins: jclements (jclements@moz-37891906.dsl.snlo01.pacbell.net)
[05:31:20] <Eridius> r? https://github.com/mozilla/rust/pull/8732
[05:31:23] <Eridius> strcat: fixed the problem
[05:31:30] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[05:31:30] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1sMcSA
[05:31:30] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[05:33:30] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[05:33:32] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[05:33:44] *** vfetwnuncszu is now known as dcrewi
[05:33:57] * jensnockert hugs the arduino due and hopes that will help it work.
[05:34:58] <dbaupp> Eridius: a positive unicode test?
[05:35:06] <SingingBoyo> is the only way to get a vector of a specific size to do something like let mut x = ~[]; x.reserve(size); ?  or can I allocate a specific size at creation?
[05:35:24] *** Joins: heftig (heftig@moz-E8E2034C.inf.fh-bonn-rhein-sieg.de)
[05:35:37] <dbaupp> Eridius: (there's a standard string with some thai or something in it in other str tests which you can just copy-paste)
[05:35:52] <dbaupp> SingingBoyo: vec::with_capacity(n)
[05:36:31] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[05:36:31] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1sMcSA
[05:36:31] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[05:37:40] <dbaupp> erm https://github.com/mozilla/rust/commit/092739956e55d9f262a895ea60e355ba0632b92e#commitcomment-3935816 ?
[05:40:05] <jeaye> Is there a way to capture a mutable stack var in a @fn?
[05:40:25] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[05:41:13] <jeaye> rusti: let mut c = 0; let f: @fn() = ||{ c = 1; }; f(); c
[05:41:24] -rusti- pastebinned 8 lines of output: http://ix.io/7xf
[05:41:29] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[05:41:29] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1sMcSA
[05:41:29] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[05:41:49] <Eridius> dbaupp: are you suggesting a test to make sure it can split between two unicode codepoints? Because ascii characters are unicode codepoints
[05:46:02] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[05:46:30] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[05:46:30] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1sMcSA
[05:46:30] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[05:46:31] <jeaye> rusti: let mut c = 0; let f: @fn<'s>(m: &'s mut int) = |m|{ *m = 1; }; f(&mut c); c
[05:46:32] -rusti- 1
[05:46:56] <jeaye> Woah, first try. That never happens.
[05:48:10] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[05:48:40] <brson> i guess the compile time regression was because of the visitor changes?
[05:48:44] *** Joins: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP)
[05:51:30] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[05:51:30] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1sMcSA
[05:51:30] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[05:52:28] <strcat> brson: type_use is causing 9000 llvm lint errors
[05:52:36] <strcat> brson: each one stops inlining (if applicable)
[05:52:43] <strcat> (and that's just in libstd)
[05:53:07] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[05:53:15] <strcat> I think that's one issue at least.
[05:53:19] <strcat> the visitor might be another
[05:53:37] <strcat> and we never recovered from the 400MiB AST mem usage
[05:53:45] <strcat> (400MiB increased*)
[05:54:03] *** Quits: heftig (heftig@moz-E8E2034C.inf.fh-bonn-rhein-sieg.de) (Quit: Quitting)
[05:54:38] <brson> strcat: i thought you had already committed the fix for the llvm-upgrade perf regression
[05:54:42] <brson> strcat: was looking at irfy
[05:54:56] <strcat> brson: it fixes a big part of it, by removing the monomorphize normalization
[05:55:07] <strcat> but type_use is still causing a lot
[05:55:28] *** Quits: jclements (jclements@moz-37891906.dsl.snlo01.pacbell.net) (Ping timeout)
[05:55:29] <strcat> it was also wrong before, but we didn't notice because LLVM treated the undef behaviour differently
[05:55:51] <strcat> brson: basically, type_use is casting function signatures with bitcast instead of function *parameters*
[05:55:55] <strcat> which is undef
[05:56:23] <strcat> throwing it out and using mergefunc would work but.... there are other undef casts making mergefunc break :(
[05:56:29] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[05:56:29] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1sMcSA
[05:56:29] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[05:57:30] <dbaupp> Eridius: I meant multibyte codepoints
[05:57:47] <strcat> brson: we could try just using -Z no-monomorphize-collapse for now...
[05:58:00] <strcat> brson: cuts lint errors in libstd from 9100 to 2 real ones
[05:58:24] <strcat> (over 300 "pessimization" ones, but they are just warning about compile speed afaik)
[05:59:35] *** Quits: carleastlund (cce@moz-C8071335.c3-0.smr-ubr1.sbo-smr.ma.cable.rcn.com) (Quit: carleastlund)
[05:59:42] <strcat> anyway LLVM is just really upset with us :(
[06:00:42] *** Quits: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net) (Client exited)
[06:01:14] *** Joins: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net)
[06:01:29] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[06:01:30] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1sMcSA
[06:01:30] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[06:02:42] <Eridius> dbaupp: do you want me to re-push with a positive unicode test? I have one now locally
[06:03:30] *** Quits: sankha93 (Instantbir@CAF6D3FF.9C875DCD.9105FBCF.IP) (Quit: Gone to save the world!)
[06:05:36] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[06:05:45] *** Quits: KindOne (KindOne@83B13189.B3929A3A.34F73994.IP) (Ping timeout)
[06:06:06] *** Quits: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP) (Ping timeout)
[06:06:30] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[06:06:30] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1sMcSA
[06:06:30] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[06:06:35] *** Joins: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP)
[06:06:42] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[06:08:32] *** Quits: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP) (Ping timeout)
[06:09:14] *** Quits: jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Ping timeout)
[06:09:16] *** Joins: KindOne (KindOne@moz-F892BEC1.dynamic.ip.windstream.net)
[06:11:32] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[06:11:33] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1sMcSA
[06:11:33] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[06:13:01] <dbaupp> Eridius: it would be good yes
[06:13:23] <dbaupp> gah, bors is unhappy too :(
[06:15:30] <SingingBoyo> how do I shield myself from the prelude?  i.e. I'm trying to use a write_str method but it complains about multiple applicable methods.
[06:15:50] <SingingBoyo> Is there a way to 'un-import' things from the prelude?
[06:16:31] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[06:16:31] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1sMcSA
[06:16:31] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[06:16:36] <strcat> uh, well
[06:16:38] <strcat> lets try this
[06:16:44] <strcat> hrm
[06:16:50] <strcat> auto is up-to-date ;\
[06:16:59] <Eridius> dbaupp: too late, it's been r+'d and I already kind of deleted my new test ;)
[06:17:00] <dbaupp> SingingBoyo: you can avoid importing the whole thing with #[no_implicit_prelude] on a mod
[06:17:15] <dbaupp> Eridius: :(
[06:17:22] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[06:17:23] <ghrust> 01[13rust01] 15thestinger 04force-pushed 06auto from 14c96b1d8 to 14f997924: 02http://git.io/N3iJvQ
[06:17:23] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[06:17:53] <dbaupp> SingingBoyo: (that is, putting that on a mod will stop prelude being imported automatically in that mod and any children.)
[06:19:12] <SingingBoyo> someone's going to hate this in code review, but since there's no string support in rt::io and no one can decide how to do it...
[06:21:30] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[06:21:30] <ghrust> 01[13rust01] 15bors merged 06master into 06auto: 02http://git.io/T0OrAw
[06:21:30] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[06:23:50] *** Quits: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net) (Client exited)
[06:25:55] *** Quits: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net) (Ping timeout)
[06:26:30] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[06:26:30] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1sMcSA
[06:26:30] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[06:27:16] <strcat> bors...
[06:29:39] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[06:31:28] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[06:31:28] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1sMcSA
[06:31:28] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[06:31:31] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[06:31:31] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/IvPPNg
[06:31:31] <ghrust> 13rust/06auto 147c0152f 15Alex Crichton: Upgrade libuv to the current master + our patches...
[06:31:31] <ghrust> 13rust/06auto 14b5ed563 15Alex Crichton: Implement process bindings to libuv...
[06:31:32] <ghrust> 13rust/06auto 14450c0fe 15Alex Crichton: Fix the libuv build system...
[06:31:34] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[06:31:58] <Eridius> rusti: "".split_iter('/').to_owned_vec()
[06:31:59] -rusti- ~[""]
[06:35:37] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[06:39:40] *** Joins: mr_clopy (Mibbit@moz-7F23009.telecom.net.ar)
[06:40:11] <toddaaro>  what is going on with this "whitespace" thing
[06:40:11] <mr_clopy> hello all
[06:40:14] <toddaaro> bors e-mailed me
[06:40:15] <toddaaro> a lot
[06:41:12] *** Joins: heftig (heftig@9402E290.2F84ED1F.1CE4FB2A.IP)
[06:41:29] <dbaupp> toddaaro: he didn't want you to get too lonely
[06:41:29] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[06:41:29] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 140ebf25c to 14c96b1d8: 02http://git.io/N3iJvQ
[06:41:29] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[06:41:32] <mr_clopy> Is it safe to ask about rust running on mingw 
[06:41:40] <mr_clopy> ?
[06:41:52] *** Quits: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[06:41:56] <dbaupp> mr_clopy: no-one is going to attack you, so yes, it is safe
[06:42:07] *** Joins: sebcrozet (sebcrozet@moz-2517AE39.w80-13.abo.wanadoo.fr)
[06:42:07] <mr_clopy> :)
[06:42:43] <mr_clopy> I just cant get around libpthread errors
[06:43:15] <bjz> rusti: macro_rules ! m(() => "hur") mod m { fn blurg() {} } (m!(), m::blurg())
[06:43:16] -rusti- <anon>:5:63: 5:68 error: macro rhs must be delimited
[06:43:16] -rusti- <anon>:5          macro_rules ! m(() => "hur") mod m { fn blurg() {} } (m!(), m::blurg())
[06:43:16] -rusti-                                                                         ^~~~~
[06:43:17] -rusti- application terminated with error code 101
[06:43:19] <mr_clopy> either rust fails to run or it says that libprthread2 is missing
[06:43:21] <strcat> toddaaro: dunno, it doesn't like it
[06:43:29] <bjz> rusti: macro_rules ! m(() => ("hur")) mod m { fn blurg() {} } (m!(), m::blurg())
[06:43:30] -rusti- <anon>:5:71: 5:79 error: unresolved name `m::blurg`.
[06:43:30] -rusti- <anon>:5          macro_rules ! m(() => ("hur")) mod m { fn blurg() {} } (m!(), m::blurg())
[06:43:30] -rusti-                                                                                 ^~~~~~~~
[06:43:30] -rusti- error: aborting due to previous error
[06:43:30] -rusti- application terminated with error code 101
[06:43:36] <strcat> toddaaro: I closed it and moved on, reopened and now it's probably going to do it again
[06:43:38] <strcat> ;\
[06:43:38] <bjz> rusti: macro_rules ! m(() => ("hur")) mod m { pub fn blurg() {} } (m!(), m::blurg())
[06:43:39] -rusti- ("hur", ())
[06:44:21] <mr_clopy> anyone has fixed those pthreads problems on mingw_
[06:44:23] <mr_clopy> ?
[06:45:17] <dbaupp> mr_clopy: https://mail.mozilla.org/pipermail/rust-dev/2013-July/004670.html maybe?
[06:46:32] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[06:46:32] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1sMcSA
[06:46:32] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[06:46:33] <mr_clopy> I didnt try that one, lets see...
[06:48:12] <toddaaro> strcat: weird
[06:48:24] <toddaaro> whitespace: really alluring to robots?
[06:48:40] <mr_clopy> :( i get the rust.exe failure now
[06:49:28] <mr_clopy> (i did install that lib by hand, yesterday
[06:49:29] <mr_clopy> )
[06:49:34] <strcat> brson: still around?
[06:50:29] <strcat> toddaaro: yeah he's just looping on it
[06:50:30] <strcat> closing again...
[06:50:53] *** Quits: heftig (heftig@9402E290.2F84ED1F.1CE4FB2A.IP) (Quit: Quitting)
[06:51:06] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[06:51:06] <ghrust> 01[13rust01] 15thestinger created 06rt-opt (+14 new commits): 02http://git.io/TBIdgg
[06:51:06] <ghrust> 13rust/06rt-opt 144c75d36 15Brian Anderson: std: Reduce TLS access
[06:51:06] <ghrust> 13rust/06rt-opt 1430a7a5b 15Brian Anderson: Define cfg(rtopt) when optimizing. Turn off runtime sanity checks...
[06:51:06] <ghrust> 13rust/06rt-opt 14468d023 15Brian Anderson: std: Convert some assert!s to rtassert!
[06:51:07] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[06:51:31] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[06:51:31] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1sMcSA
[06:51:31] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[06:51:33] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[06:51:33] <ghrust> 01[13rust01] 15thestinger 04force-pushed 06rt-opt from 140927399 to 14aac369f: 02http://git.io/dEQ8Jw
[06:51:33] <ghrust> 13rust/06rt-opt 14aac369f 15Brian Anderson: Whitespace
[06:51:33] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[06:51:49] *** Joins: heftig (heftig@9402E290.2F84ED1F.1CE4FB2A.IP)
[06:52:06] <dbaupp> mr_clopy: I don't know: do you have a version of gcc < 4.6 ?
[06:54:21] *** Joins: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net)
[06:54:43] <mr_clopy> nope, 4.7.2.1
[06:57:40] <dbaupp> mr_clopy: ah, that's the problem
[06:57:42] <dbaupp> https://github.com/mozilla/rust/wiki/Note-getting-started-developing-Rust#windows
[06:58:07] <bblum> http://buildbot.rust-lang.org/builders/auto-win-32-nopt-c/builds/187/steps/compile/logs/stdio
[06:58:10] <bblum> what is this
[06:58:12] <bblum> WHAT IS HAPPEN
[06:59:04] <brson> strcat: yes
[06:59:22] <mr_clopy> hehe, it seems that i dont read properly
[06:59:55] <strcat> bblum: I think it's similar to why we stopped passing CFLAGS to libuv
[06:59:58] <strcat> on windows
[07:00:13] *** Quits: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net) (Ping timeout)
[07:00:24] <strcat> something to do with windows caring about the order of the env variables
[07:00:43] * strcat can't remember
[07:01:32] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[07:01:32] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14b50e93d to 14c96b1d8: 02http://git.io/N3iJvQ
[07:01:32] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[07:02:13] <bblum> strcat: should i at bors retry it, or what?
[07:02:31] <strcat> bblum: don't know :(
[07:02:39] <strcat> I think so though
[07:02:50] <brson> i'll try to fix this jemalloc problem over the weekend. seems like a big problem
[07:03:37] <Eridius> strcat: I just had a use-case for a .zip_long() variant that yields (Option<A>, Option<B>) and doesn't stop until both are None. Thoughts on whether we should support that?
[07:03:54] <strcat> yes we probably should
[07:04:01] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[07:04:32] <mr_clopy>  now i'm busy again, thx for the directions!
[07:04:49] <strcat> Eridius: although, only if it's actually easier to use than manually doing it
[07:04:51] <strcat> and it might not be
[07:05:09] <strcat> loop { match (x.next(), y.next()) { } } isn't that bad
[07:06:31] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[07:06:31] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1sMcSA
[07:06:31] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[07:06:39] *** Quits: wilsonk-laptop (kvirc@moz-8E86F35A.cg.shawcable.net) (Ping timeout)
[07:06:51] *** Quits: rbancroft (rumble@moz-4E8E0D7F.cg.shawcable.net) (Ping timeout)
[07:06:52] *** Joins: rbancroft (rumble@moz-4E8E0D7F.cg.shawcable.net)
[07:07:10] <strcat> brson: bors really doesn't like that runtime optimization branch for some reason :\
[07:07:12] *** Quits: brson (brson@8ECA0B87.AD77F8DE.D1E74241.IP) (Ping timeout)
[07:07:14] <mr_clopy> dbaupp: its working, thanx a lot! 
[07:07:15] <strcat> ugh
[07:07:17] <strcat> irc!
[07:07:29] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[07:07:47] <Eridius> strcat: hrm yeah, maybe
[07:08:31] *** Joins: wilsonk-laptop (kvirc@moz-8E86F35A.cg.shawcable.net)
[07:08:35] <dbaupp> mr_clopy: np :)
[07:08:39] <mr_clopy> I deserve some comunity service or something....
[07:09:09] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[07:09:24] <bblum> Eridius: it should give ([(A,B)], Either<[A],[B]>)
[07:09:30] <bblum> for maximum expressiveness of type
[07:09:31] *** Quits: jb (Mibbit@moz-EE9A6FB0.bredband.comhem.se) (Quit: http://www.mibbit.com ajax IRC Client)
[07:09:38] <strcat> ok seriously bors
[07:09:43] <strcat> why do you hate this set of commits
[07:09:47] <strcat> I even amended one
[07:10:06] <Eridius> bblum: not sure what you mean
[07:10:10] *** Quits: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP) (Ping timeout)
[07:10:27] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[07:10:27] <ghrust> 01[13rust01] 15thestinger 04force-pushed 06rt-opt from 14aac369f to 142704cf1: 02http://git.io/dEQ8Jw
[07:10:27] <ghrust> 13rust/06rt-opt 148c8fdf2 15Brian Anderson: std: Reduce TLS access
[07:10:27] <ghrust> 13rust/06rt-opt 14a0dc98a 15Brian Anderson: Define cfg(rtopt) when optimizing. Turn off runtime sanity checks...
[07:10:27] <ghrust> 13rust/06rt-opt 14bf69b79 15Brian Anderson: std: Convert some assert!s to rtassert!
[07:10:28] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[07:10:36] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[07:10:36] *** ChanServ sets mode: +o brson
[07:10:41] <bblum> Eridius: the snd of the tuple would be the "remainder"
[07:10:52] <bblum> Eridius: if it instead return a [(Option<A>, Option<B>)],
[07:10:56] <Eridius> bblum: it's an iterator. It won't return a vector at all
[07:11:02] <bblum> oh, i see
[07:11:04] <bblum> hm, well,
[07:11:05] <bblum> hmm
[07:11:11] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[07:11:11] <ghrust> 01[13rust01] 15thestinger 04force-pushed 06rt-opt from 142704cf1 to 14f3c253d: 02http://git.io/dEQ8Jw
[07:11:11] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[07:11:31] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[07:11:31] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1sMcSA
[07:11:31] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[07:11:32] <Eridius> but that's ok. I'm not convinced that the actual usage of zip_long() would be any cleaner than just a manual loop, as strcat pointed out
[07:11:33] <SingingBoyo> how many times must I run a search and replace regex across extra::json :/
[07:13:00] <strcat> brson: bors seems to really hate that chain of commits...
[07:13:08] <strcat> he happily merges anything else
[07:13:16] * strcat tried rebasing it this time
[07:13:24] <dbaupp> SingingBoyo: what are you doing with extra::json?
[07:13:30] *** Joins: eatkinson (eatkinson@moz-7B0110AD.mv.mozilla.com)
[07:14:05] <SingingBoyo> dbaupp: moving it to rt::io.  which means moving from write_str to write(string.as_bytes())
[07:14:40] <SingingBoyo> dbaupp: for this: https://github.com/mozilla/rust/pull/8679
[07:14:53] <dbaupp> SingingBoyo: ah
[07:15:07] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Connection reset by peer)
[07:16:32] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[07:16:32] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1sMcSA
[07:16:32] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[07:17:14] <strcat> bblum: can you rebase https://github.com/mozilla/rust/pull/8718 ?
[07:17:17] <strcat> bors is stuck on it too
[07:17:39] <bblum> why do i need to rebase it
[07:17:53] <strcat> bblum: makes him forget about it
[07:18:02] <strcat> closing/reopening won't work
[07:18:39] <strcat> hm maybe it moved on
[07:18:48] * strcat gives up
[07:18:52] <SingingBoyo> is there a way to get a ~[u8] for a char directly instead of using len_utf8_bytes and encode_utf8?
[07:19:21] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[07:19:23] <bblum> strcat: why not just @retry?
[07:19:39] <strcat> bblum: something weird is wrong with it
[07:19:52] <strcat> tired of poking at it though
[07:20:02] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[07:20:12] <bblum> ok well
[07:20:13] <bblum> alright
[07:20:41] <strcat> bors needs a restart button
[07:21:31] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[07:21:32] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1sMcSA
[07:21:32] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[07:22:18] <toddaaro> did anyone start a snapshot today?
[07:22:28] * toddaaro eager for stage0 again
[07:22:44] <toddaaro> I'd start one but I can't commit the time to finishing it due to travel/moving
[07:23:09] <dbaupp> SingingBoyo: I think `let mut buf = [0, .. 4]; let len = c.encode_utf8(buf); /* use buf.slice_to(len) */`
[07:23:39] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[07:23:44] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: sleep)
[07:24:40] <brson> i'll start a snapshot tomorrow
[07:24:43] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[07:24:56] <SingingBoyo> dbaupp:  it'd probably work, but it's not that different, sadly.  I was really hoping for c.as_bytes().  Ah well.
[07:25:25] <dbaupp> SingingBoyo: yes, I was just thinking it's slightly shorter.
[07:25:53] <dbaupp> (c.as_bytes() would either have to allocate, return an enum, or return a [u8, .. 4] with extra bytes.)
[07:26:32] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[07:26:32] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1sMcSA
[07:26:32] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[07:26:54] <SingingBoyo> dbaupp: of course, but there's definitely use cases for it with the new rt::io until there's char/str support at least.
[07:29:46] <dbaupp> SingingBoyo: yes, I think any of those cases would be worse that (or equal to) the current situation; the "optimal" .as_bytes would be c.with_bytes(&fn(&[u8]) -> T) -> T
[07:29:57] <dbaupp> *worse than
[07:31:30] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[07:31:31] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1sMcSA
[07:31:31] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[07:31:47] <SingingBoyo> dbaupp: mmm fair enough.  It's really just ugly trying to work with char bytes unless you're sticking them into a vector along with other things.
[07:33:00] <dbaupp> yup
[07:33:45] <dbaupp> SingingBoyo: I think the with_bytes function would be a useful addition btw
[07:34:13] *** Joins: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net)
[07:34:52] <SingingBoyo> dbaupp: yeah probably.  though I just discovered I didn't read the json Encoder impl closely enough and already have a function for writing out chars.  oops.
[07:35:53] *** Quits: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net) (Ping timeout)
[07:36:03] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[07:36:08] <dbaupp> haha :)
[07:36:30] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[07:36:30] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1sMcSA
[07:36:30] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[07:37:12] <SingingBoyo> unfortunately I have no idea what kind of pointers I should be using for the new rt::io Reader/Writers
[07:40:13] <SingingBoyo> is it possible to store &-ptrs in structs?
[07:41:29] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[07:41:29] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1sMcSA
[07:41:29] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[07:41:34] <dbaupp> SingingBoyo: yes
[07:42:06] <dbaupp> rusti: struct Foo<'self> { some_ptr: &'self int } let x = 1; printfln!(Foo { some_ptr: &x })
[07:42:07] -rusti- {some_ptr: &1}
[07:42:07] -rusti- ()
[07:44:36] *** Quits: eatkinson (eatkinson@moz-7B0110AD.mv.mozilla.com) (Quit: eatkinson)
[07:44:37] *** Joins: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP)
[07:46:31] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[07:46:31] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1sMcSA
[07:46:31] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[07:48:50] *** Joins: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net)
[07:49:02] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[07:50:38] *** Quits: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net) (Ping timeout)
[07:50:41] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[07:51:30] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[07:51:30] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1sMcSA
[07:51:30] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[07:53:28] *** Quits: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP) (Ping timeout)
[07:54:05] <SingingBoyo> so when it says it expected a bound lifetime parameter but found a concrete lifetime (&'self) what should I be looking for to fix it?
[07:54:17] *** Joins: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com)
[07:56:11] <dbaupp> SingingBoyo: code?
[07:56:21] <SingingBoyo> https://gist.github.com/singingboyo/6326752
[07:56:29] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[07:56:29] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1sMcSA
[07:56:29] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[07:56:47] <SingingBoyo> that's the relevant part
[07:57:22] <bjz> sebcrozet: ping
[07:57:35] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[07:57:36] <sebcrozet> bjz: yep?
[07:57:51] <SingingBoyo> though I guess it should really be impl<'self> ... for Encoder<'self> or something similar
[07:58:00] <bjz> sebcrozet: just letting you know that gl-rs is now working
[07:58:13] <sebcrozet> bjz: oh, great.
[07:58:17] <bjz> sebcrozet: can't remember if you said you were interested
[07:58:25] *** Joins: squiddy (squiddy@moz-B3299262.adsl.alicedsl.de)
[07:58:35] <sebcrozet> bjz: so it replaces glcore-rs?
[07:58:37] <bjz> sebcrozet: or if you were using gles
[07:58:41] <bjz> sebcrozet: yup
[07:58:51] <bjz> should probably delet glcore now
[07:58:56] <bjz> *delete
[07:59:20] <bjz> sebcrozet: it takes a while to compile though, seeing as it includes all the extensions
[07:59:21] <sebcrozet> bjz: great. I will try gl-rs then :)
[07:59:33] *** Joins: squiddy_ (squiddy@moz-779AB2F2.adsl.alicedsl.de)
[07:59:38] <dbaupp> SingingBoyo: &'a mut self rather than &'self mut self
[07:59:39] <bjz> sebcrozet: when I get around to it I'll work out a way to limit them
[07:59:58] <bjz> sebcrozet: ie. to just have 4.3 core, for example
[08:00:03] *** Quits: ysuzuki (ysuzuki@moz-FEE44B6.net220148245.t-com.ne.jp) (Ping timeout)
[08:00:20] <dbaupp> SingingBoyo: also, you'll need priv wr: &'self mut Writer
[08:00:36] *** Joins: ysuzuki (ysuzuki@moz-FEE44B6.net220148245.t-com.ne.jp)
[08:00:38] <dbaupp> (i.e. with the `mut`; because Writers require mutability.)
[08:00:39] *** Quits: squiddy (squiddy@moz-B3299262.adsl.alicedsl.de) (Ping timeout)
[08:01:25] <sebcrozet> sebcrozet: ok. Thanks for the (great) news.
[08:01:27] <SingingBoyo> dbaupp: mmm it still blows up in my face with &'a mut self
[08:01:29] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[08:01:29] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1sMcSA
[08:01:29] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[08:01:52] <dbaupp> SingingBoyo: same error?
[08:02:01] <SingingBoyo> dbaupp yep
[08:02:26] *** Joins: ozten (ozten@moz-8B3F407D.hfc.comcastbusiness.net)
[08:02:39] <dbaupp> SingingBoyo: it's still complaining about the lifetime `'self`??
[08:02:52] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Ping timeout)
[08:02:56] *** Quits: mortisha (Mibbit@A151F86C.E1D01C6.520CDC98.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:03:15] <SingingBoyo> dbaupp: yeah.  I'm guessing it has something to do with the struct declaration at this point.
[08:03:33] *** Joins: busylizzy (lisa@85228838.12D0DC84.211374C4.IP)
[08:03:57] <dbaupp> SingingBoyo: so it's complaining about 'self in a line in which you don't mention 'self at all?
[08:04:47] <SingingBoyo> dbaupp: ah. it much prefers me not using 'self in the struct decl
[08:04:49] <dbaupp> oh! you probably need impl<'self> serialize::Encoder for Encoder<'self>, right? so you'll need `f: &fn(&'a mut Encoder<'self>)` (I think)
[08:05:05] * dbaupp is confused
[08:05:16] <SingingBoyo> dbaupp: or... it just bails completely
[08:05:30] <SingingBoyo> dbaupp: too many error messages hard to find relevant ones
[08:05:35] <dbaupp> yeah, you need the 'self if you have borrowed pointers
[08:06:01] *** Joins: Ms2ger (Ms2ger@moz-549ABB0C.adsl-dyn.isp.belgacom.be)
[08:06:29] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[08:06:29] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1sMcSA
[08:06:29] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[08:07:18] <SingingBoyo> dbaupp: hah, that did it.  that's going to make using Encoders ugly, and they're outward-facing too... ah well, can't be helped without using @-ptrs.
[08:07:49] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[08:08:38] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[08:09:03] <bjz> sebcrozet: hehe https://github.com/bjz/glcore-rs
[08:09:10] <bjz> sebcrozet: killed it at last!
[08:09:25] * bjz loves killing his babies
[08:09:29] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[08:09:36] <sebcrozet> bjz: :)
[08:09:37] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Connection reset by peer)
[08:09:45] <sebcrozet> bjz: why dont you just delete the repo?
[08:10:06] <bjz> so that the people following it know
[08:10:10] <dbaupp> bjz: never dead! https://github.com/bjz/glcore-rs/tree/9e4eb7b049e829a43479bb9a0336d810e76b6da2
[08:10:22] * dbaupp is a magician, resurrecting code from the dead
[08:10:59] <dbaupp> SingingBoyo: yes, a million lots of ugliness like that is worth a single @
[08:11:12] * dbaupp doesn't like @
[08:11:18] <SingingBoyo> yes.  though now I've broken flatpipes and workcache cause they use Encoders.  wonderful
[08:11:31] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[08:11:31] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1sMcSA
[08:11:31] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[08:11:49] <dbaupp> SingingBoyo: whoops
[08:12:05] * dbaupp has had patches that end up accidentally editing half the codebase too
[08:13:11] <SingingBoyo> bah, I'm just taking it out of flatpipes cause it's using std::io still
[08:13:35] <sebcrozet> bjz: I think you should add a `Compilation` section on the main README. It is not obvious that we have to look at the generator/README.md
[08:14:06] <bjz> sebcrozet: all you need to do is compile gl_ptr, but I should put that in the readme
[08:14:20] <bjz> sebcrozet: it's already generated for you
[08:15:56] <SingingBoyo> oh joy I just caused an ICE
[08:17:20] <sebcrozet> bjz: Providing a Makefile would be even better.
[08:17:41] <bjz> sebcrozet: would you be able to do one for me?
[08:18:52] <dbaupp> using rustpkg would be the best ;)
[08:19:20] *** Joins: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net)
[08:20:05] <sebcrozet> bjz: (I did not mean a Makefile handling all the generation stuff. I meant something simple like that:) all: rustc --opt-level=3 gl_ptr.rs
[08:20:30] <bjz> dbaupp: how do I do that?
[08:20:40] <SingingBoyo> https://gist.github.com/singingboyo/6326857 this ICEs... is it a known bug?
[08:20:48] <bjz> dbaupp: is it possible to supply options?
[08:21:13] <dbaupp> bjz: no idea!
[08:21:18] *** Quits: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net) (Ping timeout)
[08:21:18] <bjz> heh
[08:21:32] <dbaupp> SingingBoyo: yes
[08:21:50] <dbaupp> SingingBoyo: you can't skip the 'self can you? :(
[08:22:08] <SingingBoyo> dbaupp: nope.  needs a lifetime.
[08:22:36] <dbaupp> SingingBoyo: can you just do T: Encodable<E>, E: Encoder ?
[08:23:28] <dbaupp> SingingBoyo: https://github.com/mozilla/rust/issues/8579 btw
[08:24:08] <SingingBoyo> dbaupp: well it's more appreciative now.  not sure if that'll break something else though
[08:24:19] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[08:25:06] <dbaupp> SingingBoyo: https://github.com/mozilla/rust/issues/6551 also
[08:25:07] <sebcrozet> bjz: oh, you removed the 'gl' prefixâ€¦
[08:25:14] <bjz> ?
[08:25:26] <bjz> sebcrozet: gl::Blah
[08:25:52] <sebcrozet> bjz: well glGenBuffers is GenBuffers.
[08:26:23] <bjz> I normally call it like gl::GenBuffers
[08:26:37] <bjz> you no likey?
[08:26:53] <sebcrozet> bjz: Me too. It is just weird to have a function name starting with a capital.
[08:26:58] *** Joins: io2 (io2@moz-A6202C16.home.otenet.gr)
[08:27:17] <SingingBoyo> dbaupp: thanks, I'll note those as needing to be worked around to make this work
[08:27:40] <bjz> sebcrozet: I debated whether to kepp the gl/GL_ prefixes
[08:27:45] <bjz> *keep
[08:29:40] <dbaupp> SingingBoyo: yeah, it's normally done by `FIXME #<issue number>: short description`
[08:30:50] <sebcrozet> bjz: anyway, Iâ€™m ok with that. Maybe mentioning this on the README could be useful for people comming from the C api.
[08:31:01] <bjz> sebcrozet: ok cool
[08:31:13] <bjz> sebcrozet: yeah, that would probably be a good idea
[08:31:33] <bjz> sebcrozet: cheers for the feedback
[08:33:43] <SingingBoyo> dbaupp: ah okay thanks
[08:35:36] *** Joins: mortisha (Mibbit@A151F86C.E1D01C6.520CDC98.IP)
[08:36:22] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[08:40:16] <doomlord> I prefere keeping the gl/GL_ prefixes for sure, because i want to look at GL code and its more consistent whether its C or Rust
[08:40:41] <doomlord> ... so i simply made my own bindings to gl :)
[08:41:10] *** Joins: cdidd (cdidd@moz-50AC551E.broadband.corbina.ru)
[08:41:18] *** Quits: KindOne (KindOne@moz-F892BEC1.dynamic.ip.windstream.net) (Ping timeout)
[08:41:46] <bjz> doomlord: yeah, that was my dilemma
[08:42:02] <SingingBoyo> ahh not good, more utility methods missing from/not coming to rt::io :(
[08:42:37] *** Quits: txdv (quassel@966F3542.3BA477DA.14C26596.IP) (Ping timeout)
[08:42:59] <jensnockert> Random after-all-night-hack announcement: I am running Rust on an Arduino.
[08:43:01] <doomlord> does anyone here use scite or geany
[08:43:05] * jensnockert does victory pose.
[08:43:37] <Ralith> bjz: note that the official GL docs discard the prefixes; they're clearly intended solely as namespacing.
[08:43:57] <dbaupp> jensnockert: \o/
[08:43:59] <sebcrozet> bjz: I just finished to make Kiss3d use gl-rs. It works great :)
[08:44:03] <sebcrozet> bjz: thanks for the bindings
[08:44:08] <doomlord> on the other hand, with primitive tools they're *really* handy for completion support
[08:44:11] <dbaupp> jensnockert: how much hackery?
[08:44:18] <bjz> sebcrozet: not bindings - loader :P
[08:44:33] <bjz> sebcrozet: a painful difference :D
[08:44:40] <doomlord> write "gl" and you get all the gl functions, without needing a text editor that understands namespaces
[08:44:44] <bjz> Ralith: oh really?
[08:45:03] *** Joins: KindOne (KindOne@moz-E5452BBF.dynamic.ip.windstream.net)
[08:45:29] <doomlord> and working with rust is very much about making do with primitive tools at the minute :)
[08:46:06] <Ralith> bjz: yes; your approach is actually very common in namespace-having languages, and seems to clearly be what was intended by the spec.
[08:46:23] <bjz> Ralith: ok good, wasn't sure
[08:46:27] <jensnockert> dbaupp: Slight.
[08:46:38] <jensnockert> dbaupp: Pushing to github in a minute.
[08:47:00] <bjz> Ralith: are you doing the same with the idris bindings/loader?
[08:47:14] <Ralith> bjz: you might even normalize the capitalization, but the GL docs do not do this.
[08:47:29] <Ralith> bjz: I intend to, absolutely, when the time comes.
[08:47:34] <Ralith> well
[08:47:40] <Ralith> something along those lines
[08:47:45] <bjz> Ralith: I figured that would make finding the functions more difficult
[08:47:46] <Ralith> we'll see how the module/namespace system shapes up
[08:48:08] <bjz> Ralith: capitalisation should be the same, at least
[08:48:23] <Ralith> if we end up with Haskell-style modules, then I'd encourage 'import qualified OpenGL as GL'
[08:48:47] <bjz> Ralith: gotta make the modules better than Haskell :P
[08:48:56] <Ralith> haskell has a perfectly adequate module system
[08:49:16] <doomlord> the module system here surprised me but they seem to have good reasons for why it works the way it does
[08:49:43] <bjz> doomlord: yeah, Rust's is a little... confusing... at times
[08:49:43] <doomlord> i'd found haskell and others much more intuitive as a newcomer, but rust can   fix it with error messages (the whole create relative thing..)
[08:50:06] *** Joins: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net)
[08:50:11] <doomlord> there was a point where i thought "hang on, this is no easier than headers.."
[08:50:12] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[08:50:23] <bjz> heh
[08:50:48] <Ralith> personally I'd like to see some form of first-class polymorphic modules
[08:50:53] <bjz> mm
[08:50:57] <Ralith> but so far nobody's had the time and interest
[08:51:01] <bjz> that would be super nice
[08:51:21] <doomlord> with headers in c++ i'd just adopted the practice of foo.cpp includes foo.h *only*, and foo.h includes everything it needs, and that actually worked quite well...seemed to cut out the manual management, the headers managed eachother
[08:51:31] <bjz> Ralith: gotta love open source :)
[08:51:54] *** Quits: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net) (Ping timeout)
[08:52:13] <Ms2ger> doomlord, that's awful ;)
[08:52:18] <doomlord> "gotta love open source" . i'm trying to contribute rust support to geany and these guys are reminding me why i have NIH
[08:52:45] <doomlord> Ms2ger ... it cut down the number of actual includes , and cut down the amount of times they're modified.. i call that a win :)
[08:52:53] <bjz> doomlord: ?
[08:53:07] <doomlord> they dont like mixing declarations and code in C 
[08:53:12] <bjz> doomlord: how so - re. geany
[08:53:34] <doomlord> there's one chap there who doesn't accept code where you declare variables initialized. he wants all the variable declarations at the top.
[08:53:37] <doomlord> he doesn't like C99 :(
[08:53:38] <doomlord> LOL
[08:53:46] <dbaupp> o_O
[08:53:52] <Ms2ger> Who uses C anyway :)
[08:54:04] <doomlord> avoiding arguments over this is why people  like me have severe NIH
[08:54:09] <Ms2ger> Sorry, shouldn't bash languages here
[08:54:12] <bjz> Ms2ger: we are indebted to those who write C
[08:54:32] <bjz> Ms2ger: it is helping bootstrap Rust's ecosystem
[08:54:56] <Ms2ger> I guess that's fair
[08:55:02] <Ms2ger> I still don't like it :)
[08:55:04] <SingingBoyo> and then we can replace it :D
[08:55:07] <doomlord> then there's the scintilla business. they wont accept a scintilla patch in geany, i have to wait til those changes are accepted in scintilla (they could, and just over-write when scintilla updates, surely..)
[08:55:13] <bjz> doomlord: unfortunately VS is really behind with C support :(
[08:55:30] <bjz> doomlord: apparently that's why GLFW sticks to C89 :(
[08:55:32] <doomlord> i dont think C needs replacing.  i think there should always be a simple language above asm
[08:55:55] <Ms2ger> Not forking an upstream library makes good sense
[08:55:57] <doomlord> yikes. i've had access to C extentions for a veerry long time
[08:55:57] <bjz> doomlord: at least the ABI is important
[08:56:52] <doomlord> stuck with buggy highligting with the 'lifetimes ...
[08:56:53] <SingingBoyo> dbaupp: so about that <T:Encodable<E>, E: Encoder> thing... it's broken all the call-sites.  unconstrained types :/
[08:57:34] <doomlord> it thinks they're unterminated strings and it draws them with a bright background colour
[08:58:04] <dbaupp> SingingBoyo: :(
[08:58:10] <jensnockert> dbaupp: https://github.com/jensnockert/dueboot
[08:58:26] <doomlord> one good thing about C is it has half as much to argue over compared to C++
[08:58:39] <dbaupp> jensnockert: no modifications to rustc required?
[08:58:48] <jensnockert> dbaupp: Nope.
[08:59:54] <doomlord> so at the minute if you try and use rusts' modules as a graph ... you get duplicates. is that a permanent feature of the design, could it eventually work that way efficiently
[09:02:01] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[09:06:34] *** Quits: fyolnish (fyolnish@moz-F78970DC.uqwimax.jp) (Client exited)
[09:07:01] <dbaupp> jensnockert: awesome
[09:07:29] <dbaupp> doomlord: you mean writing `mod foo` in multiple modules?
[09:07:42] <doomlord> ye
[09:07:50] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[09:08:09] <dbaupp> doomlord: that's what `use` is for
[09:08:10] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[09:08:26] <dbaupp> one mod, many use
[09:09:50] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[09:10:46] <dbaupp> jensnockert: where's main?
[09:11:03] <jensnockert> dbaupp: It's implemented in the Arduino library.
[09:11:31] <dbaupp> jensnockert: ah, so it automatically calls core_loop?
[09:11:44] <dbaupp> (and core_setup)
[09:12:06] <jensnockert> dbaupp: Really loop, but that is reserved in Rust, so I am using sed <3.
[09:12:40] <jensnockert> SED ALL THE LLVM BYTECODE \o/
[09:12:42] <dbaupp> haha
[09:13:00] <dbaupp> and there's no #[export_name="loop"] ?
[09:13:07] <jensnockert> Maybe.
[09:13:11] <jensnockert> It's 11am.
[09:13:12] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[09:15:36] <Ms2ger> And you haven't slept?
[09:16:29] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[09:16:29] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/LUrwBw
[09:16:29] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[09:16:48] <jensnockert> Ms2ger: Nope.
[09:17:09] <Ms2ger> Maybe about time, then ;)
[09:20:57] *** Joins: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net)
[09:21:28] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[09:21:29] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/PjAUkw
[09:21:29] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[09:21:30] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[09:21:30] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/iWebgg
[09:21:30] <ghrust> 13rust/06auto 142fb5c49 15Graydon Hoare: test: add support for sharding testsuite by passing --test-shard=a.b
[09:21:30] <ghrust> 13rust/06auto 14bb9c71f 15bors: auto merge of #8722 : graydon/rust/2013-08-23-test-shard, r=msullivan...
[09:21:30] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[09:22:21] <jensnockert> dbaupp: Hmâ€¦ export_name doesn't work.
[09:22:46] *** Quits: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net) (Ping timeout)
[09:27:24] *** Quits: heftig (heftig@9402E290.2F84ED1F.1CE4FB2A.IP) (Ping timeout)
[09:27:50] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[09:30:00] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[09:31:01] *** Joins: heftig (heftig@9402E290.2F84ED1F.1CE4FB2A.IP)
[09:35:33] <bjz> rusti: file!()
[09:35:34] -rusti- "<anon>"
[09:35:55] <bjz> rusti: col!()
[09:35:56] -rusti- 9
[09:36:14] *** Joins: fabiand (fabiand@9402E290.2F84ED1F.1CE4FB2A.IP)
[09:36:27] <bjz> rusti: macro_rules ! c(() => (col!())) c!()
[09:36:28] -rusti- 41
[09:49:53] *** Quits: chozza (Mibbit@DDF2FC12.F553F9.14D5B978.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:50:30] *** Quits: fabiand (fabiand@9402E290.2F84ED1F.1CE4FB2A.IP) (Ping timeout)
[09:50:34] *** Quits: heftig (heftig@9402E290.2F84ED1F.1CE4FB2A.IP) (Ping timeout)
[09:50:41] *** Joins: fabiand (fabiand@9402E290.2F84ED1F.1CE4FB2A.IP)
[09:51:16] *** Joins: chozza (Mibbit@DDF2FC12.F553F9.14D5B978.IP)
[09:51:44] *** Joins: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net)
[09:52:21] *** Quits: fabiand (fabiand@9402E290.2F84ED1F.1CE4FB2A.IP) (Ping timeout)
[09:52:34] *** Joins: fabiand (fabiand@9402E290.2F84ED1F.1CE4FB2A.IP)
[09:53:32] *** Quits: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net) (Ping timeout)
[09:54:20] <nsf> is there any syntax to make a quick cast of 4 ints to c_int? or should I copy & paste: a as c_int, b as c_int, etc.?
[09:57:36] <nsf> hm, I guess it's possible to make a macro
[09:57:38] <nsf> but whatever
[09:57:42] <nsf> less readable
[10:00:41] *** Quits: fabiand (fabiand@9402E290.2F84ED1F.1CE4FB2A.IP) (Quit: Verlassend)
[10:03:19] *** Joins: doener (doener@moz-4D6ABE63.unitymediagroup.de)
[10:04:22] *** zz_kimundi is now known as kimundi
[10:05:13] *** Joins: threecreepio (jdp@moz-71E164C9.cust.bredbandsbolaget.se)
[10:06:48] *** Joins: fyolnish (fyolnish@moz-BC1EA420.uqwimax.jp)
[10:08:28] *** Quits: fyolnish (fyolnish@moz-BC1EA420.uqwimax.jp) (Ping timeout)
[10:08:29] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[10:10:03] *** Quits: sebcrozet (sebcrozet@moz-2517AE39.w80-13.abo.wanadoo.fr) (Ping timeout)
[10:10:09] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[10:14:37] *** Joins: sebcrozet (sebcrozet@moz-7FB6C00B.w193-252.abo.wanadoo.fr)
[10:17:22] *** Joins: fyolnish (fyolnish@moz-776C08AC.uqwimax.jp)
[10:19:03] *** Quits: fyolnish (fyolnish@moz-776C08AC.uqwimax.jp) (Ping timeout)
[10:22:30] *** Joins: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net)
[10:23:29] *** Joins: heftig (heftig@9402E290.2F84ED1F.1CE4FB2A.IP)
[10:24:18] *** Quits: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net) (Ping timeout)
[10:24:34] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[10:26:27] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[10:26:28] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/iWebgg
[10:26:28] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[10:27:43] <dbaupp> jensnockert: yeah, I was just making it up
[10:27:48] * dbaupp was feeling optimistic
[10:28:29] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[10:28:49] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[10:30:21] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[10:30:37] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[10:30:54] *** Quits: io2 (io2@moz-A6202C16.home.otenet.gr) (Quit: )
[10:30:55] *** Joins: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP)
[10:31:27] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[10:31:27] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/S-2SrA
[10:31:27] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[10:31:28] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[10:31:28] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/lnHZ3w
[10:31:28] <ghrust> 13rust/06auto 143b9e2ef 15Brandon Sanderson: Make json::to_xxx(&Json) fns Json::to_xxx(&self)...
[10:31:28] <ghrust> 13rust/06auto 14424e8f0 15bors: auto merge of #8679 : singingboyo/rust/json-to-impl, r=alexcrichton...
[10:31:28] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[10:33:30] <jensnockert> dbaupp: :(
[10:34:03] * dbaupp hugs jensnockert 
[10:34:19] <jensnockert> But it isn't much trickery anyhow.
[10:34:40] <Luqman> jensnockert: it wouldn't be that hard to add such an attribute though
[10:35:34] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Connection reset by peer)
[10:36:55] *** Joins: fyolnish (fyolnish@moz-8B0088E5.uqwimax.jp)
[10:37:24] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: bbl out4lunch)
[10:38:13] <dbaupp> filed as https://github.com/mozilla/rust/issues/8735
[10:38:45] <adridu59> did you try to interface Rust with Arduino?
[10:39:09] <dbaupp> adridu59: jensnockert didn't just try
[10:39:21] <adridu59> ok I found the repo
[10:39:25] <jensnockert> adridu59: I can run Rust code on a Due.
[10:39:44] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[10:40:03] <dbaupp> jensnockert: btw, modern zero.rs can be much smaller: https://github.com/huonw/rust-malloc/blob/master/zero.rs
[10:40:15] <jensnockert> dbaupp: Yeah.
[10:40:21] <adridu59> jensnockert: it takes advantage of Rust capacibilities to link C stuff I suppose?
[10:40:38] <dbaupp> jensnockert: cool, just checking you know :)
[10:41:51] <jensnockert> adridu59: Yeah, it links in the Arduino libraries.
[10:42:03] *** Joins: vosen (vosen@moz-266BA656.icpnet.pl)
[10:42:17] <dbaupp> jensnockert: also, can you define abort/malloc etc directly in C, rather than FFI'ing them from zero.c?
[10:42:19] <jensnockert> adridu59: So you can essentially write the same code as in C++.
[10:42:22] <dbaupp> *directly in Rust
[10:42:27] <jensnockert> dbaupp: Probably.
[10:42:59] *** Quits: fyolnish (fyolnish@moz-8B0088E5.uqwimax.jp) (Client exited)
[10:43:17] <dbaupp> jensnockert: ok; I was just interested if there was some limitation you met with. (but I guess not)
[10:43:20] <adridu59> jensnockert: that's cool, I was too thinking about Rust on Arduino the other day
[10:43:21] *** Joins: fyolnish (fyolnish@moz-8B0088E5.uqwimax.jp)
[10:43:21] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[10:43:40] <jensnockert> dbaupp: I don't think so, I just took whatever ran.
[10:43:43] <adridu59> jensnockert: but I have an Uno R3, maybe I can add support for it
[10:43:47] <jensnockert> dbaupp: And I had in my repos.
[10:43:59] <jensnockert> adridu59: You need a special LLVM build with AVR support in that case.
[10:44:02] <dbaupp> jensnockert: most sensible technique :)
[10:44:41] <dbaupp> you might need to modify rustc too
[10:44:45] * dbaupp doesn't know
[10:44:55] <adridu59> jensnockert: ah true, the Due is ARM
[10:45:01] *** Quits: fyolnish (fyolnish@moz-8B0088E5.uqwimax.jp) (Ping timeout)
[10:45:17] <jensnockert> adridu59: You probably just need to install AVR-LLVM.
[10:45:19] <dbaupp> jensnockert: have you submitted to reddit/sent to the mailing list yet? :P
[10:45:27] <jensnockert> dbaupp: Not yet.
[10:45:53] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[10:46:32] <adridu59> jensnockert: AVR/LLVM needs support from Rust compiler no?
[10:46:48] <jensnockert> adridu59: I don't use it like that, so probably not.
[10:46:57] <adridu59> ok
[10:47:01] <jensnockert> adridu59: I don't generate code for the right architecture in rustc.
[10:47:18] <jensnockert> adridu59: I'm just telling rust it is compiling for ARM, but it isn't actually.
[10:47:31] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[10:47:47] <jensnockert> It really runs on the Cortex M3, which only supports thumb.
[10:48:03] <jensnockert> And fix that by sed and invoking LLVM myself with the right amount of magic.
[10:48:21] <dbaupp> that makefile :O
[10:48:33] *** Joins: maxli1 (maxli@B5559308.9C54E60.2FA4EA88.IP)
[10:48:34] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Connection reset by peer)
[10:48:43] <adridu59> jensnockert: ok... I will look at your repo
[10:49:13] *** Joins: Earnestly (earnest@B0BDF733.8FDE20A.5411983D.IP)
[10:49:24] <jensnockert> dbaupp: Yeah :S
[10:49:40] <dbaupp> jensnockert: I imagine you can make LLVM barf if you even look at the code wrong
[10:49:47] *** Quits: mr_clopy (Mibbit@moz-7F23009.telecom.net.ar) (Quit: http://www.mibbit.com ajax IRC Client)
[10:49:50] <jensnockert> dbaupp: Probably.
[10:51:05] *** Quits: maxli1 (maxli@B5559308.9C54E60.2FA4EA88.IP) (Connection reset by peer)
[10:51:07] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[10:52:59] *** Quits: bytewise (bytewise@moz-4A801D04.unitymediagroup.de) (Ping timeout)
[10:53:17] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Connection reset by peer)
[10:53:19] *** Joins: maxli1 (maxli@B5559308.9C54E60.2FA4EA88.IP)
[10:54:04] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[10:54:24] <adridu59> wow, avr-llvm is in pre-alpha
[10:55:49] *** Joins: bytewise (bytewise@moz-4A801D04.unitymediagroup.de)
[10:58:24] *** Quits: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP) (Ping timeout)
[10:58:28] <Luqman> jensnockert: you can actually pass the mcpu and mattrs via rustc directly
[10:58:41] <jensnockert> Luqman: Possibly.
[10:58:52] <jensnockert> But I don't think you can pass the right ABI.
[10:58:57] <Luqman> --target-cpu and --target-feature
[10:59:08] <Luqman> jensnockert: float-abi ?
[10:59:21] <jensnockert> Luqman: Among other things.
[10:59:41] <jensnockert> It needs arm-none-eabi
[10:59:47] <Luqman> since you seem to be using soft floats it doesn't really matter since that's what llvm defaults to for arm
[11:00:14] <jensnockert> Luqman: It isn't an ARM processor though.
[11:00:23] <jensnockert> (Technically)
[11:00:32] <jensnockert> It doesn't support the ARM instruction set.
[11:00:36] <jensnockert> Only thumb.
[11:00:54] <Luqman> sure, but llvm afaik treats thumb as a subtarget of arm
[11:01:32] <jensnockert> Possibly.
[11:01:34] <jensnockert> No idea.
[11:01:38] <jensnockert> Been awake for 28 hours.
[11:06:25] <jensnockert> Luqman: I'll try and see if it works.
[11:08:49] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[11:09:18] *** Joins: robertknight (robertknig@moz-731801B5.range86-144.btcentralplus.com)
[11:09:31] *** kimundi is now known as zz_kimundi
[11:10:29] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[11:10:42] *** Joins: maik (maik___@moz-28AFE1D.dip0.t-ipconnect.de)
[11:10:52] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[11:13:08] <jensnockert> Luqman: Doesn't seem to work :S
[11:14:45] *** Quits: SingingBoyo (brandon@4DF3381A.51F4D838.4F048BDC.IP) (Ping timeout)
[11:15:21] *** Quits: dwhyte (dwhyte@1922756A.EDC594B0.7BF4A4B0.IP) (Client exited)
[11:15:50] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[11:16:15] <Luqman> jensnockert: --target-cpu cortex-m3 --target-feature=+thumb-mode,+thumb2 ?
[11:16:27] <doomlord> hehe. there's an observation...
[11:16:36] <jensnockert> Luqman: Nope.
[11:17:06] <doomlord> you probably add as many characters with lower_case_style as you save by eliminating the glPrefix :)
[11:17:33] <doomlord> and all you acheive is you disable the ability of simple autocomplete tools to help with gl apis :)
[11:17:34] <jensnockert> Luqman: "LLVM ERROR: Don't know how to emit this value."
[11:17:44] <Luqman> jensnockert: :(
[11:19:48] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[11:20:12] *** Joins: noam_ (noam@F6B530A7.720527A7.416762B.IP)
[11:20:20] *** Quits: maik (maik___@moz-28AFE1D.dip0.t-ipconnect.de) (Ping timeout)
[11:20:24] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[11:22:49] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[11:24:29] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[11:26:17] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Quit: WeeChat 0.4.1)
[11:27:44] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[11:29:54] *** Quits: mmmonk (mmmonk@moz-F145F0FF.xlshosting.net) (Ping timeout)
[11:33:20] *** Quits: goffrie (goffrie@moz-BF2A8336.dsl.ncf.ca) (Ping timeout)
[11:35:25] *** Quits: chozza (Mibbit@DDF2FC12.F553F9.14D5B978.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[11:35:37] *** Joins: maik (maik___@moz-6AB83A6F.dip0.t-ipconnect.de)
[11:35:48] *** Joins: goffrie (goffrie@moz-9669DF8E.dsl.ncf.ca)
[11:36:00] *** Joins: chozza (Mibbit@DDF2FC12.F553F9.14D5B978.IP)
[11:36:21] *** Joins: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP)
[11:36:25] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[11:36:25] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/lnHZ3w
[11:36:25] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[11:36:40] *** Quits: chozza (Mibbit@DDF2FC12.F553F9.14D5B978.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[11:37:28] *** Joins: chozza (Mibbit@DDF2FC12.F553F9.14D5B978.IP)
[11:38:44] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[11:41:25] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[11:41:25] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/wemHAA
[11:41:25] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[11:41:28] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[11:41:28] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/kXj6zw
[11:41:28] <ghrust> 13rust/06auto 14c678b22 15Ben Blum: Talk about trait bounds in the tutorial.
[11:41:28] <ghrust> 13rust/06auto 14d468b7c 15Ben Blum: Document the task watching / exit code propagation implementation.
[11:41:28] <ghrust> 13rust/06auto 14db5615d 15bors: auto merge of #8725 : bblum/rust/docs, r=graydon...
[11:41:30] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[11:42:43] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[11:42:53] *** Joins: mmmonk (mmmonk@moz-F145F0FF.xlshosting.net)
[11:45:40] *** Quits: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se) (Input/output error)
[11:47:01] *** Joins: fyolnish (fyolnish@moz-1DDCC2FB.uqwimax.jp)
[11:47:48] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[11:48:41] *** Quits: fyolnish (fyolnish@moz-1DDCC2FB.uqwimax.jp) (Ping timeout)
[11:50:47] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[11:53:58] *** Joins: mindcat (mindcat@27373DB7.2AF6B358.291A146C.IP)
[11:53:58] *** Joins: fyolnish (fyolnish@moz-1DDCC2FB.uqwimax.jp)
[11:55:39] *** Quits: fyolnish (fyolnish@moz-1DDCC2FB.uqwimax.jp) (Ping timeout)
[11:58:01] *** Quits: squiddy_ (squiddy@moz-779AB2F2.adsl.alicedsl.de) (Input/output error)
[12:00:14] *** Quits: threecreepio (jdp@moz-71E164C9.cust.bredbandsbolaget.se) (Quit: threecreepio)
[12:04:02] *** Joins: mitja_ (Mibbit@moz-A852F1B6.dial-up.dsl.siol.net)
[12:04:08] *** Quits: mitja (Mibbit@moz-242C57AA.dial-up.dsl.siol.net) (Quit: http://www.mibbit.com ajax IRC Client)
[12:04:10] *** mitja_ is now known as mitja
[12:06:29] <Thiez> well that's a shame, rustray performance got worse
[12:06:46] <Thiez> looks like it's the new llvm?
[12:07:38] <maik> didn't we revert the llvm change?
[12:07:51] <dbaupp> Thiez: most of the regression was fixed by https://github.com/mozilla/rust/pull/8724
[12:08:03] <dbaupp> maik: nope, strcat saved the day with ^
[12:08:50] <Thiez> hmmn, then I don't know what's causing it.
[12:09:09] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[12:09:21] <dbaupp> Thiez: your rust is after that?
[12:10:49] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[12:11:09] <dbaupp> Thiez: I think that there is still some vestigal slowness from the LLVM upgrade even with that fix; still lots of undefined behaviour in the IR that's making LLVM unhappy.
[12:12:35] <maik> can we get the size of a vector? like [1,2,3] vector.len * int 
[12:13:07] <dbaupp> rusti: let v = [1,2,3]; v.len() * 3
[12:13:08] -rusti- 9
[12:13:11] <dbaupp> maik: ^ ?
[12:13:53] * maik is confused
[12:13:58] *** Quits: glandium (glandium@moz-A09032B1.kimsufi.com) (Input/output error)
[12:14:02] <maik> I need to tell OpenGL the entire size of a vector
[12:14:06] *** Joins: glandium (glandium@moz-A09032B1.kimsufi.com)
[12:14:13] <maik> atm I do this with
[12:14:23] <maik> (vertices.len() * std::sys::size_of::<gl::types::GLfloat>()) as gl::types::GLsizeiptr
[12:14:36] <maik> but it's a bit noisy
[12:14:48] <dbaupp> oh, you want the byte size.
[12:15:55] <dbaupp> (woah, ~[].dedup has a big comment.)
[12:16:39] <mortisha> klutzy: ping
[12:16:46] *** Joins: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se)
[12:16:55] <klutzy> mortisha: pong
[12:17:12] <mortisha> this is re: jemalloc build error
[12:17:23] <maik> rusti: ~[1,2,3].capacity()
[12:17:24] -rusti- <anon>:5:10: 6:5 error: type `[<VI2>, .. 3]` does not implement any method in scope named `capacity`
[12:17:24] -rusti- <anon>:5          ~[1,2,3].capacity()
[12:17:24] -rusti- <anon>:6     };
[12:17:24] -rusti- error: aborting due to previous error
[12:17:24] -rusti- application terminated with error code 101
[12:17:32] *** Joins: kertap (kertap@moz-C906575A.b-ras3.mvw.galway.eircom.net)
[12:18:00] <dbaupp> maik: capacity isn't the byte size
[12:19:04] <mortisha> the original source for jemalloc downloaded from canonware.com/jemalloc builds perfectly with rust on mingw
[12:19:04] <dbaupp> maik: the shortest way to do it would be to define fn byte_len<T>(v: &[T]) -> uint { v.len() * sys::nonzero_size_of::<T>() } and just call that
[12:19:33] <mortisha> klutzy: the original source for jemalloc downloaded from canonware.com/jemalloc builds perfectly with rust on mingw
[12:19:34] <maik> dbaupp, ah okay I'll do that thanks
[12:19:47] <klutzy> mortisha: ah! it explains why bors is ok with broken malloc
[12:20:09] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[12:20:25] <dbaupp> maik: btw, this line https://gist.github.com/MaikKlein/6318088#file-triangle-rs-L67 is bad
[12:20:30] <klutzy> mortisha: since make clean does not clean jemalloc, some day windows jemalloc was built successfully but broken later, I think
[12:20:40] <mortisha> klutzy: i made the exact same changes as in master to the original configure.ac and makefile.in
[12:20:47] <mortisha> and it still builds correctly
[12:21:08] <maik> dbaupp, how can I do it better?
[12:21:16] <mortisha> klutzy: i'm guessing it has to do with the version of autoconf used. but i can't confirm it
[12:21:48] <dbaupp> maik: it should be `do fragment_src.with_c_str |ptr| { unsafe {gl::ShaderSource(fragment_shader, 1, &ptr, std::ptr::null())} }`
[12:22:01] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[12:22:04] <klutzy> mortisha: does it mean rust git's jemalloc is ok but rust's configure is likely broken?
[12:22:43] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[12:22:55] <maik> dbaupp, ah right :x that makes more sense
[12:23:00] <dbaupp> maik: returning an unsafe pointer from a closure is a good way to get segfaults: the reason it is in a closure is because it needs to do clean up (e.g. deallocating memory) after the inner function has finished, so the pointer could/will be invalid after the function returns
[12:23:11] <dbaupp> maik: also, line breaks are amazing :P
[12:23:15] <Thiez> dbaupp: I pulled and built master an hour ago :)
[12:23:27] <dbaupp> maik: https://gist.github.com/MaikKlein/6318088#file-triangle-rs-L62 should be fixed too
[12:23:29] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[12:23:42] <dbaupp> Thiez: oh!
[12:23:50] <mortisha> klutzy: yes, i think the version of configure in src/rt/jemalloc is the problem. 
[12:23:54] <dbaupp> Thiez: how much slower? 
[12:24:04] <mortisha> but again, i can't say for sure
[12:24:08] <maik> dbaupp, yeah I already rewrote nearly everything
[12:24:32] <engla> hmm that's a good reason (maybe?) for with_c_str to use a &c_char pointer instead
[12:24:38] <Thiez> dbaupp: about 1.5 seconds I think, from 3.3 to 4.8 seconds to trace
[12:24:42] <Thiez> +/- 0.1
[12:25:09] <dbaupp> Thiez: quite large!
[12:25:33] * dbaupp wonders if he should reopen the issue about the perf regression from LLVM
[12:26:10] <Thiez> if nobody else noticed perhaps it's just my code doing something weird
[12:26:18] <Thiez> well, strictly speaking it's not my code
[12:26:40] <dbaupp> Thiez: https://github.com/mozilla/rust/issues/8665
[12:27:06] <dbaupp> Thiez: (you're not the only one to notice, that is.)
[12:28:28] <Thiez> sadly I've been very busy lately so I don't know exactly atwhich commit this slowdown started
[12:28:34] <Thiez> perhaps it's not the llvm stuff at all
[12:29:20] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[12:29:40] <klutzy> mortisha: thanks a lot! I'm going to update issue. do you have some github id? I think you deserve credit for it :)
[12:31:04] <dbaupp> Thiez: if you've got the CPU time could you test a8c3fe45c6138cd1f4d143fdb0e843ee2d4759b2 (the commit with the LLVM upgrade) and 67c954e365970e4c2cd06f0c50724656d7010f45 (the one before) to compare against the current?
[12:31:06] *** Joins: DarK (KLBKvTurk@9D84D29C.8DB27383.4A5568AA.IP)
[12:31:50] *** Quits: robertknight (robertknig@moz-731801B5.range86-144.btcentralplus.com) (Ping timeout)
[12:32:00] <Thiez> dbaupp: I will :)
[12:35:14] *** Joins: upbeatsarcastic (Mibbit@moz-8728717F.skybroadband.com)
[12:36:20] *** Quits: upbeatsarcastic (Mibbit@moz-8728717F.skybroadband.com) (Quit: http://www.mibbit.com ajax IRC Client)
[12:36:56] <dbaupp> bjz: a 1MB rust file o_O
[12:37:46] <dbaupp> bjz: how long does rustc take to compile?
[12:37:56] <sebcrozet> Does anybody have an idea of what should be faster: a pattern maching with 10 cases, or a dynamic dispatch (using a trait-object) ?
[12:38:31] <sebcrozet> I have no idea how pattern matching is optimizedâ€¦
[12:39:09] <dbaupp> sebcrozet: https://github.com/mozilla/rust/wiki/Doc-unit-testing#benchmarking
[12:40:20] <dbaupp> in theory a pattern match could get optimised down to a jump table (especially if the pattern matching is on an enum with 10 variants)
[12:40:34] <sebcrozet> dbaupp: well, I knew about benchmarking. But I hopped someone knowing how thing are optimized could give me a more technical answer.
[12:41:35] <dbaupp> sebcrozet: at a guess, if you've got enum Foo { Case1, Case2, ..., Case10 }, I'd guess/hope that would be faster than dynamic dispatch.
[12:42:13] <sebcrozet> dbaupp: (btw, about the 1MB rust file from gl-rs, it takes 1mn to compile for me)
[12:42:34] *** Quits: DarK (KLBKvTurk@9D84D29C.8DB27383.4A5568AA.IP) (Quit: 2Kelebek 4v.Türkçe 12 Madem Türksün  2Kelebek 4v.Türkçe 12Kullan Herkes Ürksün..  12Download : 4http://www.kelebek.gen.tr 12Adresinde...)
[12:43:10] <dbaupp> sebcrozet: ah nice; not too long; given rustc general (lack of) speed.
[12:44:41] <sebcrozet> dbaupp: does rustc actually generate the "jump table" you talked about?
[12:44:58] *** Quits: kertap (kertap@moz-C906575A.b-ras3.mvw.galway.eircom.net) (Quit: kertap)
[12:44:59] <dbaupp> sebcrozet: it's up to LLVM, and I think it can
[12:45:18] <dbaupp> but we probably don't drive it correctly to get it to actually do it reliably
[12:45:51] <sebcrozet> dbaupp: ok. trait-objects are broken anyway, so I have no choice for now.
[12:45:53] <maik> dbaupp, this is now my progress https://gist.github.com/MaikKlein/6327919
[12:46:04] *** Joins: kertap (kertap@moz-C906575A.b-ras3.mvw.galway.eircom.net)
[12:46:07] *** Joins: shoo8que6U (shoo8que6U@moz-EB90881E.dip0.t-ipconnect.de)
[12:46:24] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[12:46:24] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/kXj6zw
[12:46:24] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[12:47:44] <maik> \n
[12:49:12] <Thiez> jump tables aren't always faster
[12:49:54] <dbaupp> Thiez: than a virtual call?
[12:50:11] <engla> than nested conditionals
[12:50:15] <Thiez> than some nested conditionals
[12:50:55] <Thiez> as I recall indirect goto can be tricky for cpus too
[12:51:22] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[12:51:22] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/0JMuOg
[12:51:22] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[12:51:24] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[12:51:25] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/ykSrSQ
[12:51:25] <ghrust> 13rust/06auto 146b4ceff 15Kevin Ballard: Add new function str.truncate()
[12:51:25] <ghrust> 13rust/06auto 14c643f1d 15bors: auto merge of #8732 : kballard/rust/str-truncate, r=thestinger
[12:51:25] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[12:51:32] <bjz> dbaupp: yah, it takes <1m fo me. maybe 30s? Pretty ugly. Need to reduce its size as per the todos on the repo
[12:52:11] <dbaupp> sebcrozet et al: https://gist.github.com/huonw/24745306ca05f1599ea8
[12:53:16] <bjz> dbaupp: what does that mean?
[12:53:32] <sebcrozet> dbaupp: looks great.
[12:53:33] <bjz> dbaupp: ie. what does it tell you about the optimisations
[12:54:29] <dbaupp> bjz: https://gist.github.com/huonw/24745306ca05f1599ea8#file-enum-jump-table-s-L72-L90 is an array of addresses
[12:54:39] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[12:54:54] <dbaupp> bjz: specifically, these ones https://gist.github.com/huonw/24745306ca05f1599ea8#file-enum-jump-table-s-L31-L63
[12:55:06] <dbaupp> (well, relative addresses)
[12:56:05] *** Quits: maxli1 (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[12:56:23] <dbaupp> bjz: so this block https://gist.github.com/huonw/24745306ca05f1599ea8#file-enum-jump-table-s-L27-L30 is loading those offsets and then just jumping straight to the relevant one (essentially `instruction_pointer += offset_array[x as uint]`)
[12:56:34] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[12:56:37] <bjz> ah nice
[12:56:49] <dbaupp> rather than going `if x == 0 { } else if x == 1 { } ... `
[12:57:35] <Luqman> r? https://github.com/mozilla/rust/pull/8736
[12:57:36] <maik> is this branch prediction?
[12:57:45] <cmr> maik: no, branch prediction is a hardware feature.
[12:57:59] <cmr> http://en.wikipedia.org/wiki/Branch_table
[12:58:02] <maik> cmr, ah okay
[12:58:03] <sebcrozet> dbaupp: so I will definitely go for pattern matching then.
[12:58:19] *** Quits: Voomer (Voomer@moz-CC05FF5E.hsd1.wa.comcast.net) (Quit: Leaving)
[12:58:21] <sebcrozet> dbaupp: thanks for the infos.
[12:58:24] *** Joins: Voomer (Voomer@moz-CC05FF5E.hsd1.wa.comcast.net)
[12:58:30] <cmr> Someone also suggested using a hash for string comparisons and other such structural equality.
[12:58:36] <cmr> which I think would be cool
[12:59:08] <dbaupp> cmr: how would hashing a string be faster than just comparing byte-by-byte?
[12:59:47] <maik> maybe if you need to compare it more often
[12:59:53] <Thiez> I guess you could cache the hash
[13:00:16] <dbaupp> ah, right
[13:00:30] <Thiez> then for very long strings that share a prefix the comparison  would be much faster
[13:00:56] <cmr> yup
[13:01:07] <cmr> still need to do a string compare to check for collisions.
[13:01:21] <dbaupp> maik: that new version of your gl program looks much nice wrt pointer safety :)
[13:01:54] <dbaupp> maik: although, https://gist.github.com/MaikKlein/6327919#file-gl-rs-L177-L178 should just be std::io::read_whole_file_str(&Path("vs.vs"))
[13:02:29] <darkf> couldn't you also have a fast check for equality in some cases based on the string length (i.e. s1.len() != s2.len())
[13:02:40] <dbaupp> we have that
[13:02:44] <darkf> nice
[13:02:45] <engla> I'm sure that's the first thing str checks
[13:02:55] <maik> dbaupp, I was wondering the same but I couldn't find path http://seld.be/rustdoc/master/std/path/index.html
[13:03:10] <dbaupp> darkf: https://github.com/mozilla/rust/blob/master/src/libstd/str.rs#L647
[13:03:22] <engla> maik: those rust docs are experimental and irregularly updated
[13:03:33] * dbaupp wishes someone would remove eq_slice/eq
[13:03:46] <dbaupp> maik: it's an alias
[13:03:52] <engla> why dbaupp?
[13:03:53] <darkf> dbaupp: that's good to know. i never thought about the benefits of not using C strings beyond "maybe we want to store NULs"
[13:03:56] <maik> engla, what is a fast way to look it up in the source? git grep "Path"?
[13:04:10] <dbaupp> maik: (the source is always the best source (heh) of knowledge)
[13:04:12] <maik> dbaupp, for GenericPath?
[13:04:14] <Thiez> C strings are quite awful for comparison
[13:04:16] <engla> sounds good. git grep -w Path
[13:04:19] <Thiez> also appending
[13:04:33] <maik> :D
[13:04:34] <dbaupp> maik: no, for PosixPath / WindowsPath as appropriate
[13:04:52] <Thiez> just abouth the only thing they're good for is using marginally less memory, especially when you have many short strings :)
[13:05:26] <dbaupp> ~str spends 3 words (pointer, length, capacity) minimum
[13:05:28] <maik> dbaupp, ah 
[13:06:08] <doomlord> lol. now i have some idiot complaining about me making things const . i have to explain const is SO good, i want a language where its default.
[13:06:24] <Thiez> doomlord: which language?
[13:06:29] <dbaupp> doomlord: for your geany stuff?
[13:06:31] <bjz> C++ I assume
[13:06:31] <engla> Thiez: string slices however, you don't need to allocate something new to take a piece of a string
[13:06:32] <doomlord> yes :)
[13:06:36] <bjz> oh
[13:06:36] <doomlord> i had this working 3 days ago.
[13:06:38] <bjz> C?
[13:06:40] <doomlord> the maintained is a control freak
[13:06:53] <doomlord> the maintainer.
[13:06:54] <bjz> where is your pull?
[13:07:09] <Thiez> engla: true, and with rust lifetimes strings don't even need to be immutable :)
[13:07:11] * dbaupp wonders why someone would complain about const
[13:07:21] <bjz> <3 const
[13:07:37] <engla> I'll just go with <3 Rust instead
[13:07:41] <darkf> probably because const requires syntactical overhead in C/C++
[13:07:43] <Thiez> I hear const can be annoying unless you're already using it everywhere
[13:07:48] <doomlord> well, to be fair a call to 'free' warns about dsicarding a qualifier. i wouldn't mind if he didn't just ask me to remove my SAFE_FREE wrapper 
[13:07:59] <bjz> dbaupp: my tutors always wonder why I do everything static or final in Java -_-
[13:08:30] <myname> bjz: do you have a simple example?
[13:08:41] <bjz> myname: not right here
[13:08:41] <doomlord> const is only annoying if you have confusion about what things are read/write , which would mean your programs are unstable
[13:08:42] <dbaupp> bjz: just go entirely the other way and modify everything in every method \o/
[13:09:13] <doomlord> heh yes. <3 const.  <3 not having to write it because its default even more :)
[13:09:16] <bjz> dbaupp: isn't it irritating how *everything* is a pointer?
[13:09:29] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[13:09:38] <bjz> (in java)
[13:09:43] <dbaupp> bjz: in Java? /me has only used it for one class 2 years ago
[13:09:46] <Thiez> I don't see what all the fuzz is about w.r.t. pointers
[13:09:56] * dbaupp hasn't been tempted to use it again
[13:09:59] <maik> bjz, haha let me guess you have started with c++ and then learned java?
[13:10:07] <Thiez> with java it's pretty transparent that everything is a pointer
[13:10:34] <Thiez> and the JVM can choose to stack-allocate when it knows an object doesn't escape
[13:10:35] <bjz> Thiez: at least it has that saving grace
[13:10:48] <bjz> Thiez: yeah
[13:11:01] <maik> bjz, I learned it the other way around and I was like " oh man .. how can int i = 5; not be a pointer" :D
[13:11:08] <bjz> Thiez: it's more scary for me because anything can modify anything
[13:11:09] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[13:11:55] <Thiez> it's not that scary when you make objects immutable and use the right visibility modifiers
[13:12:25] <dbaupp> does java have a concept of const methods like C++?
[13:12:33] <engla> everything as pointer + GC has the upside of simpler composition (see haskell). No T vs &T vs ~T problems when composing parts of the program
[13:12:40] <Thiez> dbaupp: nope
[13:12:51] <bjz> dbaupp: nor const
[13:12:57] <Thiez> although there are some tools that allow you to annotate stuff
[13:13:03] * dbaupp sighs
[13:13:23] <Thiez> engla: indeed, never heard anyone complain that java has too many pointer types ;)
[13:13:50] <bjz> Thiez: yep, that is true
[13:14:07] <Thiez> it has too few integer types however
[13:14:18] <Thiez> give us unsigned already...
[13:14:21] <dbaupp> engla: yeah, I imagine people will be complaining about `for &x in v` forever ("but python has `for x in v` perfectly ok" blahblah)
[13:14:42] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[13:15:08] <engla> yes, it's a cost. I think the worst part is the composition thing. we see it everywhere, you know .filter's closure takes &A and .filter_map's takes A
[13:15:19] <engla> it's a cost of the other things rust wants to do
[13:15:21] <doomlord> you can't worry about people complaining about pointer types. 
[13:15:45] <Thiez> just use *mut everywhere :p
[13:15:46] <doomlord> either people want them in whiich case they want rust, or they dont in which case they'll stick with GC languages
[13:15:52] <bjz> engla: yeah, composition is a pain in rust :(
[13:17:09] <dbaupp> Thiez++
[13:17:27] <doomlord> i wondered if HKTs might eventually smooth over that..
[13:17:40] <bjz> doomlord: yeh?
[13:17:51] <doomlord> wrap pointers (and lifetime?) in an template param :)
[13:18:20] <doomlord> then compose with ease
[13:19:56] <maik> the only thing I don't like is &'self
[13:20:22] <dbaupp> maik: which part of it?
[13:20:23] <maik> can't the compiler just automagically add &'self?
[13:20:58] <dbaupp> I think things like automatic lifetimes was tried, but it didn't work out so well
[13:21:15] *** Joins: threecreepio (jdp@moz-71E164C9.cust.bredbandsbolaget.se)
[13:21:35] <doomlord> i do remember thinking, "coulnd't there be a more intelligent defalt" often
[13:21:51] <doomlord> everything unmarked = the same, does it do that?
[13:21:54] <maik> I was thinking the same sometimes
[13:22:03] <doomlord> then you mark the exceptions
[13:22:09] <dbaupp> I believe that was the exact rule that was rejected
[13:22:10] <maik> but wasn't that bad after all
[13:22:34] <doomlord> did it have unintentded consequences?
[13:22:35] <cmr> doomlord: no.
[13:22:39] <cmr> everything unmarked is different.
[13:22:53] <cmr> It used to be the default but was found to be too limiting, and often not what you wanted.
[13:23:13] <cmr> (I don't know anything beyond that)
[13:23:47] <doomlord> i suppose you could have no default,then analyze programs and statistically make the most useful default :)
[13:24:01] <doomlord> ^statistically choose
[13:24:57] <dbaupp> and then you add some things and the default switches o_O
[13:25:07] <maik> :D
[13:25:26] <dbaupp> or do you mean take a pile of rust programs and work out which is the most common pattern and use that for all programs?
[13:25:26] <cmr> well no, for the whole language I imagine
[13:25:32] <cmr> yeah
[13:25:38] * dbaupp probably misinterpreted
[13:25:59] *** Joins: jdm (jdm@97DF0582.DEAB171B.971E19F6.IP)
[13:26:09] <doomlord> ^^^ yes take a pile of programs to figure out the best default
[13:26:11] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[13:26:27] <cmr> once rust has a large enough corpus to decide that I would think it'd be too late to change it.
[13:26:45] <doomlord> but would it.. it would be a nondestructive change
[13:26:56] <maik> but still for 'self.. it can only be used in structs right? 
[13:26:59] <doomlord> 'you used to have to annotate, now it can be removed..'
[13:27:22] *** Joins: victorporof (victorporo@C2FADE94.E7C615F.41763F20.IP)
[13:27:24] <doomlord> maybe the same for @Gc vs @Rc
[13:27:58] <doomlord> and make a nice AST based tool to refactor :)
[13:28:40] <dbaupp> maik: not really
[13:29:11] <maik> dbaupp, what would be a use case that is not in a struct?
[13:29:15] <maik> for 'self
[13:29:23] <dbaupp> maik: 'self is currently required the required name for pointers being stored in enums and structs
[13:29:27] <cmr> impl, traits.
[13:29:37] <dbaupp> but it's a bug that it has to be called "self"
[13:29:46] <cmr> it's the only lifetime name allowed in all type declarations.
[13:29:49] <dbaupp> it's a bug that 'self means anything different to 'a
[13:30:05] <doomlord> could the 'self be automatically declared to leverage its existence in current code
[13:31:54] <maik> rusti: Foo<'self>{i: &'self int} impl <'r> Foo<'r> {}
[13:31:54] -rusti- <anon>:5:18: 5:19 error: expected `:` but found `>`
[13:31:54] -rusti- <anon>:5          Foo<'self>{i: &'self int} impl <'r> Foo<'r> {}
[13:31:54] -rusti-                            ^
[13:31:54] -rusti- application terminated with error code 101
[13:32:03] <maik> rusti: struct Foo<'self>{i: &'self int} impl <'r> Foo<'r> {}
[13:32:04] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Ping timeout)
[13:32:04] -rusti- <anon>:5:58: 5:59 error: Illegal lifetime 'r: only 'self is allowed as part of a type declaration
[13:32:04] -rusti- <anon>:5          struct Foo<'self>{i: &'self int} impl <'r> Foo<'r> {}
[13:32:05] -rusti-                                                                    ^
[13:32:05] -rusti- error: aborting due to previous error
[13:32:05] -rusti- application terminated with error code 101
[13:32:13] <maik> hm okay
[13:32:31] <maik> rusti: struct Foo<'self>{i: &'self int} impl <'self> Foo<'self> {}
[13:32:32] -rusti- ()
[13:33:07] <doomlord> are there any problems casued if 'self is automatically declared and always means the lifetime of &'self self in impls'
[13:33:17] <cmr> I don't think so
[13:34:46] <doomlord> i wonder if that would work well with 'undeclared is different' 
[13:36:13] <nsf> uhm, is that supposed to work?: impl Type { my_macro!(whatever) }?
[13:36:59] <nsf> if not can I have partial implementations of the type? :)
[13:37:26] <dbaupp> nsf: no it doesn't :(
[13:37:56] <nsf> so, what about partial impls then?
[13:37:58] <dbaupp> nsf: but you can have multiple `impl` blocks, if that's what your second question means?
[13:38:02] <nsf> yep
[13:38:10] <mortisha> klutzy: ping
[13:38:27] <klutzy> mortisha: pong
[13:38:28] <dbaupp> rusti: struct Foo; impl Foo { fn bar(&self) {} } impl Foo { fn baz(&self) {} }
[13:38:29] -rusti- ()
[13:38:38] <dbaupp> nsf: ^
[13:39:29] *** Quits: mythos (mythos@moz-E5AF8019.uni-klu.teleweb.at) (Client exited)
[13:39:32] <nsf> k, thanks
[13:39:45] <mortisha> klutzy: i finally solved the jemalloc build error
[13:40:01] <klutzy> mortisha: wow!!!
[13:40:58] <mortisha> klutzy: you'll be more surprised if you knew the cause of the erro
[13:41:23] <dbaupp> Thiez: I just tested the testcase for the example in the llvm-regression-bug, and it goes /\ (and is possibly even a little faster with the fully up-to-date compiler), so the regression you're seeing is possibly a sign of something else
[13:41:34] <dbaupp> Thiez: quite probably still related to the LLVM upgrade though.
[13:41:43] <mortisha> klutzy: it was because git was configured to automatically convert line endings from LF to CR LF
[13:42:04] *** Joins: z0w0 (zack@moz-7E6DC3A.lnse2.woo.bigpond.net.au)
[13:42:08] <klutzy> mortisha: oh it's.. wait, what!??
[13:42:47] <dbaupp> jensnockert: https://news.ycombinator.com/item?id=6268291 !
[13:43:01] <jensnockert> dbaupp: Oh!
[13:43:15] * dbaupp didn't submit it
[13:43:29] * dbaupp did upvote, though
[13:43:33] <mortisha> klutzy: i know...i confirmed it by setting the git global option config.autocrlf to false and cloning the same commit from master...jemalloc compiles just fine
[13:44:37] * Ms2ger is not too surprised
[13:45:35] <klutzy> mortisha: there are some issues around crlf, e.g. license checker fails to check license of itself
[13:45:56] <klutzy> mortisha: but jemalloc error is even unexpected to me in this case
[13:45:58] <dbaupp> jensnockert: also, http://www.reddit.com/r/rust/comments/1kzy7s/jensnockertdueboot_github_template_for_arduino/
[13:46:05] <Thiez> dbaupp: I'm almost done with compiling the second commit, so we'll know soon enough :)
[13:46:20] <dbaupp> jensnockert: (you missed both your chances for sweet sweet karma :P )
[13:46:55] <jensnockert> dbaupp: I don't mind spreading the wealth.
[13:47:17] <mortisha> klutzy: i think it is better if we follow this https://help.github.com/articles/dealing-with-line-endings and set text eol=lf
[13:48:31] <dbaupp> heh, 2 and 4 on HN are Rust stories.
[13:48:39] * Ms2ger thinks it's better if vcs's didn't try to mess with files
[13:49:00] <dbaupp> jensnockert: you're doing better than servo, by the upvote-metric
[13:49:01] <mortisha> Ms2ger: agreed 
[13:50:31] <dbaupp> Thiez: I gotta go to sleep; if you turn up anything interesting you could put it on https://github.com/mozilla/rust/issues/8665 and get it reopened :)
[13:53:00] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[13:53:35] <Thiez> I will
[13:56:24] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[13:56:24] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/ykSrSQ
[13:56:24] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[13:58:46] *** Quits: KindOne (KindOne@moz-E5452BBF.dynamic.ip.windstream.net) (Ping timeout)
[14:01:08] <mortisha> klutzy: does the win32 buildbot have autocrlf turned on in git?
[14:02:06] <klutzy> mortisha: I think so. because.. `make check-fast` will fail if git checkouts crlf, but bors passes it.
[14:02:07] <maik> btw where do you guys get your programming news?
[14:02:20] <Thiez> there is programming news?
[14:02:29] <maik> :D
[14:02:36] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[14:02:38] *** Joins: KindOne (KindOne@moz-74BFC4EB.dynamic.ip.windstream.net)
[14:03:01] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[14:03:03] <klutzy> mortisha: could you leave some result at https://github.com/mozilla/rust/issues/8731 ?
[14:04:11] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[14:05:23] <mortisha> klutzy: if buildbot passes, then doesn't it mean autocrlf is false (to build jemalloc the files need to have just lf as eol)? and sure i'll update the issue in github
[14:07:10] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[14:08:04] <klutzy> mortisha: oh I misremembered "autocrlf"; I meant git is configured to checkout lf only.
[14:08:39] <klutzy> well I always don't remember autocrlf options therefore googles for helps :p
[14:09:02] *** Joins: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com)
[14:09:49] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[14:10:06] <jensnockert> maik: I follow http://hckrnews.com/ (an alternative hacker news interface)
[14:10:14] *** Joins: mib_gocmwy (Mibbit@moz-521C1204.hsd1.ca.comcast.net)
[14:10:18] <mortisha> klutzy: ha ...:)
[14:10:31] *** Quits: z0w0 (zack@moz-7E6DC3A.lnse2.woo.bigpond.net.au) (Quit: z0w0)
[14:11:29] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[14:11:41] *** Quits: mib_gocmwy (Mibbit@moz-521C1204.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[14:11:53] <mortisha> klutzy: as a permanent solution, should we set text eol=lf for all files under src/rt/jemalloc in .gitattributes?
[14:11:57] <maik> jensnockert, that looks nice
[14:13:03] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[14:14:38] <klutzy> mortisha: I guess it is sufficient for src/rt/jemalloc/configure only
[14:14:40] *** Quits: KindOne (KindOne@moz-74BFC4EB.dynamic.ip.windstream.net) (Ping timeout)
[14:15:22] <klutzy> mortisha: or... other configure files may have similar issues but just undiscovered. the safest solution is stripping out cr for all files
[14:15:31] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[14:15:41] <klutzy> I don't know whether it is rust's bug or not ;p
[14:16:04] <mortisha> klutzy: i think the problem was with the input files to configure (include/jemalloc/jemalloc.h.in & jemalloc_defs.h.in)...
[14:16:32] <klutzy> ah, you're right
[14:16:35] <mortisha> but i don't have evidence (as of now) to pin it on any particular files
[14:16:43] <nsf> may I ask why there is no automatic dereference for * pointers?
[14:17:05] <nsf> for fields access I mean
[14:17:19] <nsf> let x: *T; x.y;
[14:17:21] <mortisha> klutzy: as you said the safest solution would  be to strip out cr for all files
[14:17:34] *** Quits: heftig (heftig@9402E290.2F84ED1F.1CE4FB2A.IP) (Ping timeout)
[14:17:58] <Luqman> nsf: well they could be NULL
[14:18:39] *** Joins: KindOne (KindOne@moz-8BEECFC3.dynamic.ip.windstream.net)
[14:18:59] <nsf> but it doesn't really matter, it will die on explicit dereference anyway
[14:19:30] <nsf> and I thought * pointers are supposed to be used in unsafe sections mostly
[14:19:47] <nsf> I'm just a bit annoyed writing (*x).y
[14:20:26] <nsf> eh, never mind I guess I shouldn't use * pointers in the first place
[14:20:31] <nsf> will try to do it with borrowed pointers
[14:20:38] *** Quits: wilsonk-laptop (kvirc@moz-8E86F35A.cg.shawcable.net) (Ping timeout)
[14:20:43] <Luqman> nsf: what're you trying to do?
[14:21:13] <nsf> Luqman: working on sdl2 bindings for myself
[14:21:22] <nsf> just an ordinary bindings mess
[14:21:33] <nsf> let common_ev = (&raw as *ll::SDL_Event) as *ll::SDL_CommonEvent;
[14:21:36] <nsf> let et: ll::SDL_EventType = cast::transmute_copy(&common_ev._type);
[14:21:38] <nsf> like that
[14:21:52] <nsf> that code is incorrect actually
[14:21:59] <nsf> common_ev needs to be dereferenced manually
[14:22:28] <nsf> having explicitly typed enums would help a lot
[14:22:56] <nsf> do we have them? :)
[14:23:05] <nsf> or rather explicitly sized
[14:23:10] <nsf> sorry for my english :)
[14:23:33] <Luqman> i'm not sure what explicitly sized enums are
[14:23:35] <nsf> anyways, the same feature that was added in C++11
[14:23:52] <nsf> you can attach an integer type to an enum definition
[14:24:01] <nsf> which will use it as underlying representation
[14:24:28] <nsf> enum Enum3 : unsigned long {Val1 = 1, Val2};
[14:24:31] <nsf> like so
[14:24:33] <nsf> (C++11)
[14:24:36] <Luqman> ah
[14:25:17] <nsf> or maybe I can rely on the fact that numeric enums in rust have the same repr as C ones?
[14:25:24] <Luqman> you can't do that with rust enums
[14:25:37] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[14:25:41] <nsf> sure, I would like to be able to
[14:25:53] <bjz> What's the large source of Python from in servo?
[14:25:59] <nielsle> I am toying around with a very simple actor library, but I have problems passing a chan<int> to the constructor of the actor. Does anybody have a good idea how to fix it?  http://kib2.free.fr/pastebin/view_paste.php?id=116
[14:26:08] <Luqman> nsf: what are called enums in rust are more like tagged unions
[14:26:19] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[14:26:29] *** Joins: heftig (heftig@9402E290.2F84ED1F.1CE4FB2A.IP)
[14:26:46] <nsf> Luqman: even the ones that contain only numbers?
[14:26:56] <nsf> I don't think so
[14:27:49] <Luqman> sure, there are few different ways enums actually get represented
[14:28:00] <nsf> so, I understand that explicit type for an enum will not work with "tagged union" enums obviously
[14:28:08] <nsf> but for numeric ones it's a must have feature
[14:28:21] <Luqman> looking in rustc it has: CEnum, Univariant, General, & NullablePointer
[14:28:42] <nsf> in that particular case I'm interested in CEnum
[14:28:52] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[14:29:01] <nsf> I wonder if there is a feature request in rust about explicit enum sizing
[14:29:05] <nsf> if not I think I should create it
[14:29:25] <nsf> as there is an open issue about int <-> enum interchange
[14:29:36] <nsf> something about ToInt FromInt traits and such
[14:29:44] <nsf> https://github.com/mozilla/rust/issues/3868
[14:30:05] <nsf> not sure what rust devs would think about explicit enum sizing though
[14:30:23] <Luqman> there's also this https://github.com/mozilla/rust/issues/1647
[14:30:38] <Luqman> which seems to suggest maintaining compatibility with C
[14:30:40] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[14:31:16] <nsf> nice
[14:31:24] *** Quits: kertap (kertap@moz-C906575A.b-ras3.mvw.galway.eircom.net) (Quit: kertap)
[14:31:31] <nsf> but in my case I actually need explicit size anyway
[14:31:34] <Luqman> though jld does mention the possibility of being able to specify the size
[14:31:35] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[14:31:40] <nsf> in C even though enum is a type by itself
[14:31:51] <nsf> SDL uses Uint32 as a field in SDL_Event struct
[14:32:41] *** Joins: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP)
[14:32:54] <nsf> Luqman: yes indeed
[14:32:55] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[14:33:43] <engla> Luqman: no, see the comment  "we are not going to commit to a stable enum representation"
[14:34:33] <nsf> :(
[14:35:10] <nsf> it's ok for other enums
[14:35:17] <nsf> but numeric ones should be explicit or good default
[14:35:28] <nsf> that's a no brainer imho
[14:35:34] *** Quits: heftig (heftig@9402E290.2F84ED1F.1CE4FB2A.IP) (Ping timeout)
[14:35:54] <nsf> in any case, devs are aware of that small issue, whatever they decide I'm happy with it
[14:36:13] *** Joins: heftig (heftig@9402E290.2F84ED1F.1CE4FB2A.IP)
[14:36:22] <Luqman> nsf: afaik, i think they'll be as big as necessary
[14:36:30] <engla> right now the enum tag is always int/uint
[14:38:20] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[14:41:36] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[14:42:29] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[14:47:59] <nsf> also after writing a plenty of bindings for Go and now I'm working on same stuff on rust.. honestly it would be super awesome to just change the language semantics completely under within unsafe blocks
[14:48:05] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[14:48:05] <nsf> and make it very close to C
[14:48:17] <nsf> implicit numeric casts, pointer arithmetic, pointer casts, etc.
[14:48:23] <nsf> null pointers as well
[14:48:34] <nsf> I know from the compiler implementor point of view it's a crazy thing to do
[14:48:56] <nsf> but I'm honestly tired writing bindings where 70% of the time is spent fighting the type system
[14:49:02] <myname> there are null pointers, aren't there?
[14:49:10] <nsf> ptr::null()
[14:49:32] <nsf> that's what I mean basically, no hacks, please :)
[14:49:35] <myname> i agree on implicit casting, though
[14:50:10] <nsf> ptr::null() is this:
[14:50:12] <nsf> pub fn null<T>() -> *T { 0 as *T }
[14:50:33] <myname> :D
[14:50:36] <nsf> which means I can use (0 as *T) but that's what implicit casts are all about
[14:50:48] <nsf> and what I mean by "very close to C"
[14:51:18] <engla> pointer + and - are implemented I think
[14:51:33] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[14:51:33] <engla> rusti: let x = 0 as *int; x + 2
[14:51:34] -rusti- 16
[14:51:36] *** Joins: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP)
[14:51:41] <nsf> good
[14:52:23] <myname> nsf: i'm playing around a bit with termbox right now, still have no idea what blit is for :D
[14:52:34] <nsf> myname: it's just for optimization
[14:52:44] <nsf> if change_cell/set_cell work for you
[14:52:47] <nsf> don't bother
[14:53:05] <nsf> oh, right, put_cell
[14:53:22] <nsf> names are messed up, as I said at some point I'll do complete API revamp
[14:53:33] <myname> the only thing i'm missing so far is some way of letting the user input a string
[14:53:45] <myname> sure, one can do this alone
[14:53:50] <nsf> in Go you can get the back buffer as a slice explicitly, so there is no need for blit, and in Go there is only SetCell
[14:54:09] <nsf> myname: yes, you'll have to implement that on your own
[14:54:13] <nsf> which isn't very hard
[14:54:21] <nsf> I wrote a text editor using termbox-go
[14:54:27] <nsf> github.com/nsf/godit
[14:54:44] <myname> nsf: depends, you have to keep track on moving the cursor, using backspace and delete correctly and stuff
[14:54:46] <nsf> and using it since december for all my text editing needs :D
[14:54:56] <nsf> myname: yes, but it's not a lot of work
[14:55:42] <myname> yeah, in a way i like that minimalistic stuff
[14:56:01] <myname> got a hexmap working in no time, besides my lousy c skills
[14:56:48] <nsf> yeah it's a nice lib, but C version still needs some polishing
[14:57:07] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[14:57:14] <nsf> for example Go version has windows implementation and it works really well there
[14:57:14] <myname> so does C iself :p
[14:57:37] <nsf> and in C version it's still a TODO
[14:57:46] <jensnockert> dbaupp: I'm refactoring so that it can run on non-Arduino Cortex Ms now \o/
[14:58:28] <myname> nsf: i'd be unsure if you want it directly inside it or more like a layer above it provided with the lib together
[14:58:54] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[14:58:55] <nsf> myname: what exactly? windows implementation?
[14:58:59] *** Quits: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP) (Ping timeout)
[14:59:08] <nsf> by windows implementation I don't mean windows like in curses
[14:59:13] <nsf> I mean MS Windows implementation :)
[14:59:20] <myname> ah, i see
[14:59:27] <myname> okay
[14:59:34] <nsf> termbox was designed after windows console api actually :D
[15:00:02] <nsf> hence implementation on windows is even shorter than on *nix
[15:00:16] *** Joins: sigma (sigma@moz-6B8EDEEC.range86-159.btcentralplus.com)
[15:01:11] <doomlord> after trying to modify geany i'm tempted again to make a new editor aswell, lol
[15:01:37] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: jorendorff)
[15:01:48] <doomlord> open source or not , modifying someone elsese program is an unpleasant experience
[15:02:09] <nsf> whatever works for you :) I was a vimer for 5 years or so, then one year of emacs, now I'm on my own, lol
[15:02:10] <doomlord> i'm trying to give code away and ending up feeling violent
[15:02:14] <myname> nsf: i'd love to build stuff with it in rust if the later gets api stable :)
[15:02:33] <doomlord> there must be a better way
[15:02:46] *** Quits: sigma (sigma@moz-6B8EDEEC.range86-159.btcentralplus.com) (Ping timeout)
[15:02:51] <nsf> myname: well, for termbox you could make stable bindings right now, C api will change, but only slightly
[15:03:19] <nsf> it will look somewhat like this: http://godoc.org/github.com/nsf/termbox-go
[15:03:36] <nsf> change_cell/put_cell are merged and renamed into set_cell
[15:03:49] <myname> nsf: yeah, but the only stuff i really _want_ to build is too big to rewrite the stuff after rust updates
[15:04:00] *** Quits: maik (maik___@moz-6AB83A6F.dip0.t-ipconnect.de) (Ping timeout)
[15:04:12] <nsf> to set_clear_attributes crap, clear takes two arguments instead
[15:04:19] <nsf> that's I think two major changes in the API
[15:04:25] <nsf> the only two ones
[15:04:41] <nsf> myname: oh, termbox is a small lib
[15:04:44] <nsf> shouldn't be a big deal
[15:04:49] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[15:04:50] <myname> i don't got change_cell, either, it looks like put_cell with other arguments
[15:04:52] <nsf> or are you talking about your code
[15:04:55] <nsf> I guess, yeah
[15:05:02] *** Joins: sigma (sigma@moz-B2865FAB.range31-53.btcentralplus.com)
[15:05:05] <myname> nsf: termbox itself not, but the other stuff
[15:05:33] <nsf> yeah, using rust right now is kind of masochistic a bit
[15:05:44] <nsf> unless you're really pationate :D
[15:06:03] <nsf> *passionate
[15:06:19] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Ping timeout)
[15:06:47] <nsf> as for me I'm really tired writing C/C++
[15:06:50] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[15:06:54] <doomlord> 'termbox' is character cell rendering?
[15:06:55] <nsf> wanted something different, spent a lot of time with Go
[15:06:59] <nsf> but it's too high level to me
[15:07:16] <nsf> doomlord: it's just an abstract api for doing that + input handling
[15:07:22] <myname> i tried stuff with multi-dimensional arrays in C
[15:07:26] <myname> i could barf
[15:07:52] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[15:07:55] <nsf> no one does multi-dimensional arrays in C as multi-dimensional arrays really
[15:08:07] <nsf> in C you have a representation of memory
[15:08:08] <nsf> memory is 1d
[15:08:18] <nsf> doomlord: github.com/nsf/termbox
[15:08:22] *** Quits: sigma (sigma@moz-B2865FAB.range31-53.btcentralplus.com) (Ping timeout)
[15:08:41] <nsf> myname: so, for 2d arrays
[15:08:49] <nsf> you just need to remember two formulas :)
[15:08:57] <nsf> size = w*h (obvious one)
[15:09:05] <nsf> and i = y*w+x
[15:09:17] *** zz_kimundi is now known as kimundi
[15:09:17] <myname> yeah i know
[15:09:28] <nsf> I guess it's nice if language can help you with these, but really not a big deal
[15:09:51] <doomlord> textmode stuff is limited in palette though,right?
[15:10:06] <nsf> doomlord: right, termbox has 16 colors only
[15:10:14] <nsf> 8 colors + bold attribute
[15:10:20] <myname> nsf: are there reasons for that?
[15:10:37] <nsf> myname: ideological, yes
[15:10:44] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[15:10:51] <nsf> I didn't want to add any options whatsoever
[15:11:05] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[15:11:07] <nsf> the idea is to provide a subset of things that work everywhere
[15:11:15] <nsf> on all popular terminals under *nix and on windows
[15:11:40] <nsf> linux console doesn't have 256 colors, windows console api has 16 colors as well
[15:11:45] *** Quits: doener (doener@moz-4D6ABE63.unitymediagroup.de) (Quit: leaving)
[15:11:56] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: jorendorff)
[15:12:08] <nsf> but maybe... maaaaybe I'll add support for 256 colors and mouse eventually
[15:12:14] <nsf> especially the mouse
[15:12:35] <nsf> it's available everywhere actually, but not documented well on *nix
[15:12:49] *** Joins: sigma (sigma@moz-F92246F8.range109-151.btcentralplus.com)
[15:12:57] <nsf> like on xterm there is one way to enable it, on linux console it's a different esc seq
[15:13:06] <nsf> and it's not in the terminfo afaik
[15:13:25] <nsf> or maybe it is
[15:13:52] <nsf> anyways :) I'm lazy and do other stuff, so what termbox has right now is what it has
[15:14:30] *** Quits: sigma (sigma@moz-F92246F8.range109-151.btcentralplus.com) (Ping timeout)
[15:15:16] <doomlord> unless i can get scintilla changes aceepted rust is going to look ugly in geany, because of 'lifetime
[15:15:38] <doomlord> it highlights those as errors :(  (it thinks they're unterminated strings hehe)
[15:15:40] * nsf doesn't use syntax highlighting
[15:15:48] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[15:16:13] <doomlord> i dont see syntax highlighting as a gimmick.. with pages of text, it helps you navigate quickly
[15:16:52] <nsf> unless it doesn't work :)
[15:17:32] <doomlord> it usually does, and rust is easy to highlight... i setup gtksourceview nicely to show type parameters, types etc
[15:17:36] <doomlord> all with regex
[15:18:12] <doomlord> struct/trait/impl/fn all in different hues.. you can tell at a glance where you were with a tonne of windows open
[15:19:04] <nsf> in my opinion syntax highlighting is overrated
[15:19:25] <doomlord> another plus, if you change languages, having the same elements in the same colour helps
[15:19:29] <Ms2ger> It's reasonably useful
[15:19:36] <Axord> As a geany user who likes syntax highlighting, I appreciate your efforts doomlord 
[15:19:53] <doomlord> if you look at rust and see ->  in a different colour to c++.. you know its not pointer dereferencing
[15:20:20] <nsf> well, I know the benefits of it for sure, I was using it for 10 years or so
[15:20:26] *** Joins: sigma (sigma@moz-8D9B16E6.range31-53.btcentralplus.com)
[15:20:29] <doomlord> it really helps with the type switching from preceeding to trailing aswell IMO :)
[15:20:40] <doomlord> i find go hard to read for that reason..
[15:20:47] <nsf> early code::blocks/visual studio days, then vim, then emacs
[15:20:55] <doomlord> foo( a b)  .. can't see which is which at a glance
[15:21:03] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[15:22:23] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[15:22:57] *** Quits: sigma (sigma@moz-8D9B16E6.range31-53.btcentralplus.com) (Ping timeout)
[15:24:00] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[15:24:31] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[15:24:49] *** Joins: Kruppe (user@moz-EE1E894A.home3.cgocable.net)
[15:27:46] <kimundi> doomlord: Yesterday you asked about 'use'; Would you mind reading my module tutorial rewrite and giving feedback? :)
[15:27:54] <doomlord> sure
[15:27:55] <kimundi> https://github.com/Kimundi/rust/blob/doc_stuff/doc/tutorial.md#crates-and-the-module-system
[15:28:14] <kimundi> It renders a bit strange with github markdown, though
[15:28:34] <kimundi> (every line starting with a '#'' is normally hidden)
[15:28:54] <doomlord> i gather some of what i run into is bugs aswell :) cant' remember specifically which ones but there's workarounds
[15:29:10] <adridu59> kimundi: time for a PR?
[15:29:44] <kimundi> adridu59: Still need to re-add two paragraphs from the old tutorial, and I don't have time for that right now
[15:29:49] *** Quits: Kruppe (user@moz-EE1E894A.home3.cgocable.net) (Client exited)
[15:30:50] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[15:31:36] <doomlord> one small comment is: i've been reading several paragraphs and haven't yet encountered any mention of files - the first thing someone wants to do is bring in different files. just an impatient comment :) what usually confuses the new rust user is that goes wrong
[15:34:40] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[15:34:58] <doomlord> my suggestion would be to explain quickly how to use multiple files in one crate - then elaborate on how & why that works
[15:35:43] <doomlord> i can see you have to explain the details about visibility ..
[15:35:47] <kimundi> doomlord: Well, there is an extra paragraph just for explaining that files are irrelevant :P I get what you mean, but it'S kinda hard to explain at the beginning
[15:35:56] *** Joins: RMF (RMF@moz-4C3A3FAA.dsl.telepac.pt)
[15:36:20] <nsf> the most confusing part for me was that modules == files in rust and at the same time one file may contain more than one module
[15:36:25] <kimundi> need to know how modules and use works before you can properly convey what happens with multible files
[15:36:45] <nsf> (not in the docs, when learning rust I mean)
[15:37:15] <doomlord> the thing i remember running into was  not realising paths are crate relative.
[15:37:44] <doomlord> thats the bit that neither C++ nor seeing other module systems prepares one for
[15:38:37] <doomlord> i didn't know about "foo/mod.rs"  so thanks i've learned a bit more reading your tutorial :)
[15:39:11] <cmr> doomlord: it's a relatively new change
[15:39:19] <cmr> kimundi: I left my last suggestion as a comment. Looks great!
[15:39:55] <kimundi> nsf: well, that's the thing... modules == files is very misleading... It's usually true, but the full truth is that files are irrelvant for modules, just a place to store theri content
[15:41:07] <kimundi> cmr: haha, yeah that's maybe a bit harsh
[15:41:27] <doomlord> so with foo/mod.rs - is that a convinience for bringing in a directory full of stuff? foo/<various submodules> .. do you still need to reference the submodules.. in foo/mod.rs ?
[15:41:57] <cmr> doomlord: yes.
[15:41:57] *** Joins: maik (maik___@moz-6AB83A6F.dip0.t-ipconnect.de)
[15:43:38] <doomlord> foo/sub1.rs foo/sub2.rs  foo/mod.rs    foo/mod.rs:  " mod sub1; mod sub2;"   main.rs:   mod foo; use foo;   fn main(){  foo::sub1::something()  }
[15:43:45] <doomlord> perhaps
[15:43:56] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[15:44:04] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[15:44:09] <kimundi> doomlord: Right, for that kinda stuff
[15:44:59] <kimundi> nsf: More correct would propably be "A rust source file contains the body of a module" - It's only actually a module once it'S been declared somewhere with a mod statement
[15:45:35] <Thiez> dbaupp: I've done some tests and it seems it is not the LLVM change; performance regressed somewhere between a106613 and 67c954e
[15:45:54] *** Joins: fiirhok (fiirhok@moz-4BE3125.vc.shawcable.net)
[15:46:40] *** Quits: bytewise (bytewise@moz-4A801D04.unitymediagroup.de) (Quit: Leaving)
[15:46:54] <doomlord> i didnt know about "super::" either 
[15:47:04] *** Quits: heftig (heftig@9402E290.2F84ED1F.1CE4FB2A.IP) (Quit: Quitting)
[15:48:27] *** Joins: vodik (simon@moz-457C9D39.dsl.bell.ca)
[15:50:51] <doomlord> good information there,thanks.  For someone lazily speedreading, and assuming eveything works like in other programs, maybe add words to the effect of "remember use paths are relative to the crate root by default", early on in the block "files and modules"
[15:50:52] *** Quits: rossm (rossm@moz-EE3BB1DC.br.br.cox.net) (Ping timeout)
[15:51:19] <doomlord> lazily speedreading and assuming everything works how i expect, thats me :)
[15:51:36] *** Joins: rossm (rossm@moz-EE3BB1DC.br.br.cox.net)
[15:51:47] *** Quits: maik (maik___@moz-6AB83A6F.dip0.t-ipconnect.de) (Connection reset by peer)
[15:53:57] *** Quits: fiirhok (fiirhok@moz-4BE3125.vc.shawcable.net) (Quit: Leaving)
[15:54:01] <Luqman> cmr: well relatively re-introduced rather :P
[15:54:21] <cmr> Luqman: it existed as a formal loading method before?
[15:54:29] <cmr> I know the #[path="foo/mod.rs"] was common
[15:54:40] *** Quits: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP) (Quit: Textual IRC Client: www.textualapp.com)
[15:54:51] <Luqman> yea, i'm pretty sure it was there before
[15:55:14] <doomlord> (does github let mme make a comment on that without forking it changing it)
[15:55:26] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[15:55:34] <cmr> I'm going to try and give a 1hr workship at my university's open source lab in the next month.
[15:56:26] <doomlord> perhaps add to the files/modules section an example showing a.rs->b.rs   b.rs-> c.rs  showing the crate root relative thing    when b tries to use c :)
[15:56:32] <kimundi> doomlord: comment here: https://gist.github.com/Kimundi/6322035
[15:57:15] *** Joins: webber46 (webber46@moz-717E9C5B.cust.bredband2.com)
[15:58:46] *** Joins: maik (maik___@moz-6AB83A6F.dip0.t-ipconnect.de)
[16:00:17] <nsf> kimundi: I see, I know how modules work in rust (at least I think so), what I meant is that it's unintuitive and confusing, hence mentioning it early is a good idea
[16:00:28] <kimundi> nsf: yeah
[16:01:22] <maik> when is assert! executed?
[16:01:55] <maik> always?
[16:01:59] <kimundi> maik: yeah
[16:02:03] <olsonjeffery> cmr: on rust?
[16:02:50] <kimundi> maik: it's used for important invariants, so can't disable it. there was talk about adding a debug_assert!() though
[16:04:09] <cmr> olsonjeffery: yeah
[16:04:39] <cmr> Until a debug_assert! is added, there is if cfg!(debug) { assert!(foo) }
[16:04:50] <cmr> The impossible branch is optimized out.
[16:05:17] *** Joins: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP)
[16:07:17] <olsonjeffery> cmr: im gonna hazard a "The Rust Programming Language" intro talk at a local un-conf at the end of sept
[16:07:37] <jensnockert> olsonjeffery: Awesome!
[16:07:49] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[16:07:53] <olsonjeffery> when i think about what id like to talk about when going "off road" (that is, not hitting the tutorial bullet points), i think im most interested in pointers/memory
[16:08:05] <olsonjeffery> the novelty of the different pointer-annotated-self params in methods
[16:08:11] <olsonjeffery> do any other languages do anything like that?
[16:08:22] <olsonjeffery> like fn foo(self, ...) {} to "consume" a value?
[16:08:30] <cmr> Not any mainstream or destined-for-mainstream languages, not that I know of.
[16:08:34] <cmr> not statically at least.
[16:08:50] <cmr> nimrod and a few research langues do
[16:11:25] *** kimundi is now known as zz_kimundi
[16:14:10] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[16:15:07] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[16:15:26] <adridu59> I compiled rust on Linux x86-64 with GCC 4.7 and it worked fine
[16:15:38] <adridu59> dunno why 4.4 is required, should be 4.4+
[16:17:24] *** Quits: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com) (Ping timeout)
[16:18:03] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[16:22:00] <Luqman> adridu59: on windows?
[16:22:06] *** Joins: wilsonk-laptop (kvirc@moz-8E86F35A.cg.shawcable.net)
[16:24:32] *** Quits: vodik (simon@moz-457C9D39.dsl.bell.ca) (Quit: WeeChat 0.4.2-dev)
[16:28:22] <SiegeLord> Even on Windows some person managed to use GCC 4.7.2 : https://github.com/mozilla/rust/issues/8598
[16:30:35] <klutzy> I don't remember why rust+mingw required old gcc; was it from llvm only?
[16:30:44] *** Quits: KindOne (KindOne@moz-8BEECFC3.dynamic.ip.windstream.net) (Ping timeout)
[16:33:40] <adridu59> Luqman: Linux x86-64
[16:33:58] <adridu59> Luqman: Linux Mint 15 to be precise
[16:34:49] *** Joins: KindOne (KindOne@moz-9562A29C.dynamic.ip.windstream.net)
[16:37:26] <jensnockert> klutzy: It was a LLVM issue, yeah.
[16:38:37] *** Quits: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP) (Ping timeout)
[16:40:25] *** Joins: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP)
[16:41:10] <klutzy> jensnockert: then now I'm curious the issue was still valid recently (e.g. just before last llvm upgrade)
[16:41:27] *** Joins: eatkinson (eatkinson@A01051A9.6F669779.3D1CA460.IP)
[16:42:56] <klutzy> jensnockert: since I built llvm on mingw-w64 even 2 weeks ago. mingw-w64 provides quite new gcc; version 4.7.x if I remember correctly
[16:43:26] <klutzy> it may be weird if the issue occurs only on w32 or on mingw
[16:43:32] <klutzy> mingw32*
[16:44:03] <adridu59> klutzy: is your mingw-w64 ready for a merge?
[16:44:07] <adridu59> patch*
[16:44:51] <maik> rusti: let v = [1,2,3]; v.len()
[16:44:52] -rusti- 3
[16:45:03] <maik> I thought [] has no methods?
[16:45:19] <klutzy> ah, or successful build just does not mean successful work
[16:45:44] <maik> has this changed at some point or am I just stupid?
[16:46:00] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[16:46:05] *** zz_kimundi is now known as kimundi
[16:46:09] <jmgrosen> rusti: bytes!("hi there")
[16:46:10] -rusti- &[104, 105, 32, 116, 104, 101, 114, 101]
[16:46:10] <klutzy> adridu59: patches are safe to merge I think, but I'm digging into some newrt-related strange behavior so didn't looked again into llvm stuff yet
[16:46:56] <klutzy> and I have no windows machine right now ;p
[16:47:02] <adridu59> haha
[16:47:41] <Luqman> maik: you can borrow a fixed-length vector. and &[T] has various methods implemented for it
[16:48:12] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[16:48:33] *** Quits: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se) (Input/output error)
[16:48:37] <klutzy> well I actually have one but I failed to reboot on windows from linux remotely
[16:48:42] *** Quits: chozza (Mibbit@DDF2FC12.F553F9.14D5B978.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:52:27] <Luqman> bleh, i got gnueabihf builds to stop complaining about mismatched float abis but now gnueabi doesn't want to build :(
[16:54:05] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Ping timeout)
[16:54:22] <mortisha> klutzy: https://github.com/mozilla/rust/pull/8738
[16:56:17] <engla> maik: [T] has no methods but it borrows to &[T], which has
[16:58:20] *** Quits: victorporof (victorporo@C2FADE94.E7C615F.41763F20.IP) (Quit: victorporof)
[17:00:21] <maik> ahh okay
[17:01:43] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[17:01:48] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[17:02:55] *** Quits: maik (maik___@moz-6AB83A6F.dip0.t-ipconnect.de) (Ping timeout)
[17:07:57] <adridu59> Walter Bright (The D language developer) wrote: Segmented stacks are a great idea for 20 years ago. 64 bit code has rendered the  idea irrelevant - you can allocate 4 billion byte stacks for each of 4 billion  threads. You've got other problems that'll happen centuries before that limit is  reached.  (Segmented stacks are also a performance problem, and don't
[17:08:08] <adridu59>  interact well with  compiled C code.)
[17:08:24] <adridu59> http://forum.dlang.org/thread/kcklnceisavmhhsfvbge@forum.dlang.org#post-kssngi:249qv:241:40digitalmars.com
[17:08:35] *** Quits: StarLight (StarLight@moz-73DEB454.dynamic.avangarddsl.ru) (Connection reset by peer)
[17:11:01] *** Quits: KindOne (KindOne@moz-9562A29C.dynamic.ip.windstream.net) (Ping timeout)
[17:13:00] *** Joins: maik (maik___@moz-6AB83A6F.dip0.t-ipconnect.de)
[17:14:10] *** Joins: StarLight (StarLight@moz-E1BE90B5.dynamic.avangarddsl.ru)
[17:14:52] *** Joins: KindOne (KindOne@moz-3CD6C074.dynamic.ip.windstream.net)
[17:17:01] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[17:17:50] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Connection reset by peer)
[17:21:01] <jmgrosen> I have a bit of a fundamental problem that I understand but don't know how to fix.
[17:21:21] *** Quits: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net) (Ping timeout)
[17:21:25] *** Quits: maik (maik___@moz-6AB83A6F.dip0.t-ipconnect.de) (Ping timeout)
[17:21:32] *** Joins: heftig (heftig@moz-C0DBD4B2.dip0.t-ipconnect.de)
[17:21:51] <jmgrosen> I'm borrowing a mutable reference to a TcpStream as an iterator (`for line in stream.each_lines()`), but then need another mutable reference in order to write to it inside the for loop.
[17:22:25] <jmgrosen> So, of course I get "error: cannot borrow `stream` as mutable more than once at a time" -- how do I get around this?
[17:26:02] *** Quits: KindOne (KindOne@moz-3CD6C074.dynamic.ip.windstream.net) (Ping timeout)
[17:26:26] *** Quits: eatkinson (eatkinson@A01051A9.6F669779.3D1CA460.IP) (Ping timeout)
[17:28:48] <engla> jmgrosen: the iterator has exclusive acess as long as it's alive so you have to loop without an iterator
[17:28:56] *** Joins: maik (maik___@moz-6AB83A6F.dip0.t-ipconnect.de)
[17:28:56] <engla> *access
[17:29:18] <jmgrosen> engla, so no way around but the long way? :/
[17:30:36] *** Joins: KindOne (KindOne@moz-E30F2FA8.dynamic.ip.windstream.net)
[17:30:43] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[17:31:27] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[17:31:57] <jmgrosen> biz, I just commented on reddit but perhaps you could answer me here -- when would I want to use gl-rs over rust-opengles? Only when I need functions that are in OpenGL but not ES?
[17:32:12] <engla> now I don't know the TcpStream object, but that's how freezing while borrowing works
[17:32:59] <engla> are there iterators for rt::io?
[17:33:05] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[17:33:38] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[17:34:00] *** Quits: threecreepio (jdp@moz-71E164C9.cust.bredbandsbolaget.se) (Quit: threecreepio)
[17:34:02] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Ping timeout)
[17:34:20] <jmgrosen> engla, no, but I added my own
[17:35:37] <engla> since the iterator has a &mut to the TcpStream (thus exclusive access), it can provide the write methods if it's safe
[17:36:26] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[17:36:26] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/m0Jm2A
[17:36:26] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[17:36:26] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[17:36:27] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/Nijl9w
[17:36:27] <ghrust> 13rust/06auto 14dad2ccc 15Mukilan Thiagarajan: Force line ending of '.in' files in jemalloc to LF...
[17:36:27] <ghrust> 13rust/06auto 146e43067 15bors: auto merge of #8738 : mukilan/rust/master, r=thestinger...
[17:36:27] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[17:36:43] <engla> (but then you get the problem on the next level, the for loop also takes ownership of the iterator object right now, so you'd need to desugar the for loop manually)
[17:36:48] *** Quits: maik (maik___@moz-6AB83A6F.dip0.t-ipconnect.de) (Ping timeout)
[17:37:21] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:37:27] *** Quits: sebcrozet (sebcrozet@moz-7FB6C00B.w193-252.abo.wanadoo.fr) (Ping timeout)
[17:37:45] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[17:38:30] *** Quits: jdm (jdm@97DF0582.DEAB171B.971E19F6.IP) (Quit: Lost terminal)
[17:39:43] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[17:40:23] *** Joins: threecreepio (jdp@moz-71E164C9.cust.bredbandsbolaget.se)
[17:41:16] *** Joins: HollyRain (HollyRain@moz-50A83091.dyn.user.ono.com)
[17:42:07] <HollyRain> would be better to use v 0.7 or trunk?
[17:42:38] *** Joins: jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[17:43:02] <strcat> trunk
[17:43:22] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[17:43:30] <strcat> 0.7 was a time-based tag on trunk, it has no support or anything
[17:44:27] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Ping timeout)
[17:44:57] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[17:45:07] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[17:47:04] *** Joins: maik (maik___@moz-6AB83A6F.dip0.t-ipconnect.de)
[17:47:17] <HollyRain> so, should we update it every week? until that there is a beta release
[17:47:37] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[17:49:41] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[17:49:42] <bjz> jmgrosen: commented
[17:50:22] <jmgrosen> biz, great, thanks
[17:50:26] <bjz> jmgrosen: basically your right, it's more if you're looking for stuff that's outside the ES api
[17:50:46] <jmgrosen> looks like I'll be sticking with ES for the time being -- as a GL noob, I don't want anything more complex :P
[17:51:05] <bjz> jmgrosen: hehe, it's really not all that complex
[17:51:36] <bjz> jmgrosen: but yeah, if ES is fine for you than that's probably the better way :)
[17:51:47] *** Joins: robertknight (robertknig@moz-731801B5.range86-144.btcentralplus.com)
[17:52:13] <jmgrosen> bjz: the other nice advantage of using strictly ES is that I was able to port my Rust code to JS/WebGL in a matter of hours :P
[17:52:20] <adridu59> HollyRain: that would be a good idea, Rust gets regularly improved right now
[17:52:44] <bjz> jmgrosen: the thing is, if you ever need room to grow, you have the loader available
[17:53:06] *** kimundi is now known as zz_kimundi
[17:53:24] <bjz> jmgrosen: which was more my intension (rather than poaching everyone from rust-opengl-es
[17:53:29] <bjz> :P
[17:54:05] <jmgrosen> bjz: yeah, definitely -- if I ever need more stuff, I'll probably switch
[17:54:36] <jmgrosen> the reason I had to port it to JS/WebGL, though, is because of Rust's lousy/clumsy Windows support
[17:54:47] <jmgrosen> and it needs to run on Windows (even though I hate it)
[17:55:20] <jmgrosen> but now I can't get it *quite* working with JS because of stupid asynchronous stuff :(
[17:55:49] <bjz> yeah, windows :(
[17:55:55] <bjz> it will come
[17:56:09] <mindcat> a crap OS
[17:56:12] <bjz> hey, the extern fn ptrs came!
[17:56:20] <bjz> :)
[17:56:38] <HollyRain> does the trunk version is being packaged (just like http://static.rust-lang.org/dist/rust-0.7.tar.gz) to be easilly downloaded/installed?
[17:56:51] <jmgrosen> mind cat, a crap OS that is the only platform Solidworks runs on, so that's the platform my part of the school runs on :/
[17:57:01] <jmgrosen> derp, *mindcat
[17:57:09] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[17:57:09] <ghrust> 01[13rust01] 15thestinger 04force-pushed 06rt-opt from 14f3c253d to 14f356b37: 02http://git.io/dEQ8Jw
[17:57:09] <ghrust> 13rust/06rt-opt 148e1028b 15Brian Anderson: std: Reduce TLS access
[17:57:09] <ghrust> 13rust/06rt-opt 1447da9ea 15Brian Anderson: Define cfg(rtopt) when optimizing. Turn off runtime sanity checks...
[17:57:09] <ghrust> 13rust/06rt-opt 14f9c3ca2 15Brian Anderson: std: Convert some assert!s to rtassert!
[17:57:11] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[17:57:21] <jmgrosen> plus I have to manage them all from Windows Server </rant>
[17:58:31] *** Joins: victorporof (victorporo@C2FADE94.E7C615F.41763F20.IP)
[17:59:00] <jmgrosen> well, at least all I'm doing for them will look good on college apps :P
[18:00:16] <HollyRain> it's the same, I'm cloning the project
[18:00:19] <adridu59> HollyRain: https://github.com/mozilla/rust/archive/master.zip
[18:00:34] <adridu59> there's a "Download ZIP" on the repo frontpage
[18:01:11] <strcat> that might not have the submodules
[18:01:14] <strcat> well
[18:01:19] <strcat> configure will get them anyway
[18:01:39] <strcat> it's not a dist build though
[18:02:19] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[18:02:19] <ghrust> 01[13rust01] 15thestinger pushed 1 new commit to 06master: 02http://git.io/muYGiA
[18:02:19] <ghrust> 13rust/06master 1459ca7a8 15Daniel Micay: Merge pull request #8738 from mukilan/master...
[18:02:19] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[18:02:47] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[18:04:37] *** Quits: victorporof (victorporo@C2FADE94.E7C615F.41763F20.IP) (Ping timeout)
[18:04:54] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[18:06:10] <mindcat> jmgrosen: do we need replace Windows OS to newer for every 4 years? I talk about for PC. 
[18:08:49] <mindcat> jmgrosen: so I think it right, I installed Arch Linux in my computer.
[18:09:19] <jmgrosen> mindcat: but does Linux run Solidworks? if it did, we would switch in a heartbeat
[18:09:30] <jmgrosen> but for the moment we're stuck with Windows
[18:10:01] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[18:10:49] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:11:25] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[18:11:25] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 146e43067 to 1459ca7a8: 02http://git.io/N3iJvQ
[18:11:25] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[18:12:30] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[18:13:19] <HollyRain> mindcat, many people is changing to Arch Linux (although I want not fight against a system of installation based in text); and I want to change outside of Ubuntu (due to privacy related to searchs); is it worth switching to Arch?
[18:14:07] <nsf> HollyRain: I'm using arch for 5 years or so, perfect distro for a developer imho
[18:14:28] *** Quits: maik (maik___@moz-6AB83A6F.dip0.t-ipconnect.de) (Ping timeout)
[18:14:29] <sp3d> rather off-topic, but imo Arch does a great job of putting you in control without drowning you in unnecessary maintenance tedium
[18:14:44] <SiegeLord> If the only issue is the Amazon Search, then you could just switch to a distro that only is missing that feature :P
[18:15:04] *** Quits: robertknight (robertknig@moz-731801B5.range86-144.btcentralplus.com) (Ping timeout)
[18:16:01] <SiegeLord> It's a bit of throwing out the baby with the bathwater to ditch Ubuntu for Arch for that reason
[18:16:23] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[18:16:23] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/rPRFZg
[18:16:23] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[18:16:44] <HollyRain> I've come to use the graphical installer; I'll have to make an effort :)
[18:16:47] <mindcat> HollyRain: I don't like Ubuntu, because lag. but first, stay your place.
[18:17:15] <mindcat> HollyRain: if you installed linux
[18:17:23] <adridu59> I didn't experience lag in Ubuntu
[18:17:26] <strcat> arch doesn't have an installer, `pacstrap root base` works fine ;p
[18:17:55] <mindcat> adridu59: my computer does not good.
[18:17:55] <adridu59> smartass OS ;)
[18:18:22] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[18:18:46] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[18:18:47] <ghrust> 01[13rust01] 15thestinger 04deleted 06rt-opt at 14f356b37: 02http://git.io/G34Pbw
[18:18:47] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[18:18:55] <mindcat> HollyRain: may you can read Arch Linux Wiki, for install arch linux.
[18:19:05] <SiegeLord> I've yet to manage to install arch, and I've been using Linux for 7+ years
[18:19:57] <strcat> well you won't succeed if you've never tried
[18:20:04] <mindcat> HollyRain: oh yes!
[18:20:14] <mindcat> HollyRain: check out this
[18:20:14] <SiegeLord> I tried two or three times
[18:21:23] <mindcat> https://github.com/helmuthdu/aui
[18:21:38] <strcat> SiegeLord: it's seriously just `pacstrap mountpoint base`
[18:21:50] *** Joins: lkuper (lkuper@E564B03A.14CD977C.51B6877.IP)
[18:22:14] <strcat> it will boot if you point a bootloader at it
[18:22:56] <SiegeLord> Looking at the wiki, that's far beyond where I got to
[18:23:13] <strcat> it's the first step
[18:23:28] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[18:23:41] <goffrie> arch is so nice though
[18:23:43] <strcat> the beginners' guide tells you how to partition/format but you can do that yourself with a graphical interface if you want
[18:23:58] <goffrie> pacman is great, it's ~10000x faster than yum/apt :P
[18:24:03] <strcat> pacstrap just wants to be pointed at some mount point
[18:24:11] <mindcat> yep, pacman is great
[18:24:28] <SiegeLord> So I guess I'll have to use Ubuntu's live cd to partition the disk, and then install arch there :P
[18:24:47] <goffrie> that is an option :P
[18:25:09] <mindcat> I think I can do, Install Arch Linux in Ubuntu Live CD :D
[18:26:14] *** Joins: mib_8uldul (Mibbit@D16FF553.B0242E7E.689607DE.IP)
[18:26:19] <mindcat> it need Arch Linux bootstrap
[18:26:43] <olsonjeffery> how big is an enum value in memory? ptr sized?
[18:26:49] <olsonjeffery> a C enum, sorry
[18:26:52] <olsonjeffery> mapping a struct..
[18:27:07] <SiegeLord> Pretty sure that's implementation dependent
[18:27:27] <olsonjeffery> granted.
[18:28:57] <strcat> olsonjeffery: a regular C enum? depends on the compiler/arch :P
[18:29:12] <strcat> on x86, it will start as int-size with gcc and become bigger if it has enough variants
[18:29:26] <strcat> but with -fshort-enums, it will start at 1 byte
[18:29:33] <strcat> and that's the default on some archs.
[18:30:39] *** Joins: sebcrozet (sebcrozet@moz-A855F6C0.w82-127.abo.wanadoo.fr)
[18:32:11] *** Quits: KindOne (KindOne@moz-E30F2FA8.dynamic.ip.windstream.net) (Ping timeout)
[18:32:26] <mindcat> oh! Windows! we can use best free ram optimizer :P
[18:32:41] <engla> strcat: what do you think about this? https://gist.github.com/anonymous/e43e536ee19130aef174   I know that new iterator traits add complexity, but it would be nice to be able to reverse enumerate and zip
[18:34:08] <strcat> engla: dunno, although random-access range does already have that
[18:34:19] <strcat> and it's wrong for ones longer than uint
[18:34:20] *** Joins: KindOne (KindOne@FF5185B3.934C74C3.34F73994.IP)
[18:35:17] <engla> well that's why random access iter is not the same, ExactSizeHint would be only for finite and known-size iterators
[18:36:52] <engla> ExactSizeHint can't be implemented on longer than uint iterators, since that would not be exact
[18:38:44] *** Quits: threecreepio (jdp@moz-71E164C9.cust.bredbandsbolaget.se) (Quit: threecreepio)
[18:39:08] *** Quits: Yurume_ (yurume@AC58A8CE.8A059B47.E313B915.IP) (Connection reset by peer)
[18:39:30] *** Quits: Kroisse (Kroisse@7CF4064D.E3B51CAE.ECA1BB11.IP) (Ping timeout)
[18:40:01] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[18:40:26] *** Joins: Kroisse (Kroisse@7CF4064D.E3B51CAE.ECA1BB11.IP)
[18:41:33] *** Quits: KindOne (KindOne@FF5185B3.934C74C3.34F73994.IP) (Ping timeout)
[18:42:38] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[18:42:59] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[18:43:50] *** Joins: int3__ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[18:43:50] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Connection reset by peer)
[18:43:52] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[18:43:52] <ghrust> 01[13rust01] 15thestinger created 06rt-opt (+13 new commits): 02http://git.io/XRWJYA
[18:43:52] <ghrust> 13rust/06rt-opt 14fd1aa0e 15Brian Anderson: std: Reduce TLS access
[18:43:52] <ghrust> 13rust/06rt-opt 140afc0e4 15Brian Anderson: Define cfg(rtopt) when optimizing. Turn off runtime sanity checks...
[18:43:52] <ghrust> 13rust/06rt-opt 14aad5e4f 15Brian Anderson: std: Convert some assert!s to rtassert!
[18:43:54] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[18:44:24] *** Joins: josh (josh@moz-D3896A24.dhcp.dlth.mn.charter.com)
[18:45:25] *** Joins: KindOne (KindOne@moz-FB02FD5.dynamic.ip.windstream.net)
[18:46:29] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[18:46:29] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/rPRFZg
[18:46:29] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[18:46:36] *** Quits: josh (josh@moz-D3896A24.dhcp.dlth.mn.charter.com) (Quit: josh)
[18:50:02] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[18:50:09] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[18:50:09] <ghrust> 01[13rust01] 15thestinger merged 06rt-opt into 06auto: 02http://git.io/hqIPGg
[18:50:09] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[18:50:52] *** Joins: erickt3 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[18:50:52] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Connection reset by peer)
[18:51:28] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[18:51:29] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 141afb803 to 1459ca7a8: 02http://git.io/N3iJvQ
[18:51:29] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[18:51:53] *** Joins: maik (maik___@moz-6AB83A6F.dip0.t-ipconnect.de)
[18:53:23] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[18:53:24] <ghrust> 01[13rust01] 15thestinger 04deleted 06rt-opt at 141afb803: 02http://git.io/j7BATQ
[18:53:24] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[18:53:58] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[18:53:58] <ghrust> 01[13rust01] 15thestinger pushed 13 new commits to 06auto: 02http://git.io/hqIPGg
[18:53:58] <ghrust> 13rust/06auto 14fd1aa0e 15Brian Anderson: std: Reduce TLS access
[18:53:58] <ghrust> 13rust/06auto 140afc0e4 15Brian Anderson: Define cfg(rtopt) when optimizing. Turn off runtime sanity checks...
[18:53:58] <ghrust> 13rust/06auto 14aad5e4f 15Brian Anderson: std: Convert some assert!s to rtassert!
[18:54:00] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[19:00:27] <nsf> uhm, why does it look like this: size_of::<T>()
[19:00:57] <nsf> I mean, coming from C++ world, I assume sizeof<T>() is the right way to call it
[19:01:04] <strcat> ambiguous
[19:01:10] <nsf> some kind of grammar disambiguation? 
[19:01:12] <nsf> ah, ok
[19:01:14] <nsf> I see
[19:03:22] *** Quits: int3__ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[19:03:24] *** Joins: victorporof (victorporo@C2FADE94.E7C615F.41763F20.IP)
[19:03:42] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[19:05:10] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Connection reset by peer)
[19:05:22] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[19:05:28] *** Quits: victorporof (victorporo@C2FADE94.E7C615F.41763F20.IP) (Ping timeout)
[19:05:37] *** Quits: Nisstyre (wes@moz-FD86289.netflash.net) (Quit: Leaving)
[19:06:13] *** zz_kimundi is now known as kimundi
[19:06:22] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[19:06:46] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[19:06:50] *** Quits: rhelmer (rhelmer@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[19:06:53] *** Quits: gavin (gavin@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[19:06:59] *** Quits: Nisstyre (wes@moz-FD86289.netflash.net) (Quit: Leaving)
[19:07:04] *** Quits: sstangl (sstangl@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[19:07:10] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Ping timeout)
[19:07:10] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[19:07:19] *** Quits: nmatsakis (nmatsakis@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[19:07:44] *** Joins: josh (josh@moz-D3896A24.dhcp.dlth.mn.charter.com)
[19:08:36] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[19:09:16] *** Joins: josh_ (josh@moz-D3896A24.dhcp.dlth.mn.charter.com)
[19:09:24] *** Quits: josh (josh@moz-D3896A24.dhcp.dlth.mn.charter.com) (Ping timeout)
[19:09:24] *** josh_ is now known as josh
[19:10:20] *** Quits: Nisstyre (wes@moz-FD86289.netflash.net) (Ping timeout)
[19:11:15] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[19:11:28] *** Quits: mib_8uldul (Mibbit@D16FF553.B0242E7E.689607DE.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:11:38] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Connection reset by peer)
[19:12:06] *** Quits: Kroisse (Kroisse@7CF4064D.E3B51CAE.ECA1BB11.IP) (Ping timeout)
[19:12:27] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[19:13:20] *** Quits: Nisstyre (wes@moz-FD86289.netflash.net) (Client exited)
[19:14:19] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[19:14:55] *** Quits: josh (josh@moz-D3896A24.dhcp.dlth.mn.charter.com) (Quit: josh)
[19:14:58] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[19:15:30] *** Joins: Kroisse (Kroisse@7CF4064D.E3B51CAE.ECA1BB11.IP)
[19:16:54] *** Quits: webber46 (webber46@moz-717E9C5B.cust.bredband2.com) (Quit: webber46)
[19:17:37] *** Quits: Nisstyre (wes@moz-FD86289.netflash.net) (Client exited)
[19:17:38] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[19:17:38] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[19:18:44] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[19:19:14] *** Joins: nmatsakis (nmatsakis@moz-DB4A9C19.scl3.mozilla.com)
[19:19:14] *** ChanServ sets mode: +o nmatsakis
[19:19:19] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:19:23] *** Joins: gavin (gavin@moz-DB4A9C19.scl3.mozilla.com)
[19:19:47] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[19:22:33] *** Joins: rhelmer (rhelmer@moz-DB4A9C19.scl3.mozilla.com)
[19:22:47] *** Joins: sstangl (sstangl@moz-DB4A9C19.scl3.mozilla.com)
[19:23:34] *** rhelmer is now known as IRCMonkey52873
[19:23:51] *** Joins: tgummerer (tgummerer@moz-A5F2C112.retail.telecomitalia.it)
[19:26:15] <lenstr> https://www.refheap.com/18006
[19:26:27] <lenstr> probably a bug
[19:26:40] <nsf> rusti: enum Test {a, b(int), c}; b as int
[19:26:41] -rusti- 4208352
[19:26:59] <lenstr> rusti: enum Test {a, b(int), c}; c as int
[19:27:00] -rusti- <anon>:5:35: 5:43 error: non-scalar cast: `main::Test` as `int`
[19:27:00] -rusti- <anon>:5          enum Test {a, b(int), c}; c as int
[19:27:00] -rusti-                                             ^~~~~~~~
[19:27:00] -rusti- error: aborting due to previous error
[19:27:00] -rusti- application terminated with error code 101
[19:31:18] *** Quits: tgummerer (tgummerer@moz-A5F2C112.retail.telecomitalia.it) (Ping timeout)
[19:31:20] *** Quits: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP) (Ping timeout)
[19:34:39] *** kimundi is now known as zz_kimundi
[19:34:57] *** Joins: fabiand (fabiand@moz-C5D449A4.netcologne.de)
[19:36:25] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[19:37:29] *** Joins: webber46 (webber46@moz-717E9C5B.cust.bredband2.com)
[19:40:11] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[19:41:25] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[19:41:25] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 141afb803 to 1459ca7a8: 02http://git.io/N3iJvQ
[19:41:25] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[19:42:09] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Connection reset by peer)
[19:42:11] *** Quits: Kroisse (Kroisse@7CF4064D.E3B51CAE.ECA1BB11.IP) (Ping timeout)
[19:42:51] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[19:43:55] *** Joins: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP)
[19:44:25] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[19:45:34] *** Joins: Kroisse (Kroisse@7CF4064D.E3B51CAE.ECA1BB11.IP)
[19:45:58] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[19:46:24] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[19:46:24] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/rPRFZg
[19:46:24] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[19:48:09] *** Joins: vk (chatzilla@F92596F.2DEF7520.EF7679FA.IP)
[19:49:46] <nmatsakis> erickt3: glad to hear that ;)
[19:51:23] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[19:51:23] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/rPRFZg
[19:51:23] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[19:52:47] <erickt3> nmatsakis: I don't remember what I said :)
[19:54:12] <nmatsakis> erickt3: the value of big block quotes...I'm fond of 'em
[19:54:36] <erickt3> oh ok :)
[19:54:38] *** Quits: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP) (Quit: Textual IRC Client: www.textualapp.com)
[19:55:33] <nmatsakis> I am seriously glad to hear it, because sometimes I wonder if other people find them useful. For me, reading code, I love to see a big high-level introduction and then relatively minimal "interior" commenting...
[19:55:39] *** Quits: mitja (Mibbit@moz-A852F1B6.dial-up.dsl.siol.net) (Quit: http://www.mibbit.com ajax IRC Client)
[19:56:27] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[19:56:28] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/rPRFZg
[19:56:28] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[19:57:09] <etw> is there any way to do skip_while on a CharIterator?
[19:58:48] <strcat> yes
[19:58:54] <strcat> the adaptors work on any iterator
[20:00:26] <etw> is there some kind of conversion needed? I'm getting "failed to find an implementation of trait std::iterator..."
[20:01:04] <strcat> rusti: let s = "foo"; s.iter().skip(2)
[20:01:07] -rusti- {iter: {string: "foo"}, n: 2}
[20:01:18] <strcat> rusti: let s = "foo"; s.iter().skip_while(|x| *x == 'a')
[20:01:19] -rusti- {iter: {string: "foo"}, flag: false, predicate: }
[20:01:27] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[20:01:27] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/rPRFZg
[20:01:27] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[20:01:31] <strcat> rusti: let s = "foo abc"; s.iter().skip_while(|x| *x == 'a').to_owned_vec()
[20:01:32] -rusti- ~['f', 'o', 'o', ' ', 'a', 'b', 'c']
[20:01:48] <strcat> rusti: let s = "foo abc"; s.iter().skip(1).skip_while(|x| *x == 'o').to_owned_vec()
[20:01:49] -rusti- ~[' ', 'a', 'b', 'c']
[20:02:22] <strcat> etw: your error might be coming from somewhere else
[20:02:38] <etw> yeah I think you're right
[20:03:00] <etw> I think it's a type specification 
[20:03:55] *** Joins: victorporof (victorporo@C2FADE94.E7C615F.41763F20.IP)
[20:03:58] *** Quits: fabiand (fabiand@moz-C5D449A4.netcologne.de) (Quit: Verlassend)
[20:05:58] *** Quits: victorporof (victorporo@C2FADE94.E7C615F.41763F20.IP) (Ping timeout)
[20:06:27] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[20:06:28] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/rPRFZg
[20:06:28] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[20:08:30] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[20:08:44] <etw> so it I wanted to pass s.iter() to another method, which would then mutate the iterator by skipping over some characters, what might the syntax be? I would have thought let mut it = s.iter(); fn skip(it : &mut CharIterator) { it.skip_while(...
[20:09:31] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[20:11:01] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[20:11:25] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[20:11:25] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/rPRFZg
[20:11:25] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[20:12:17] <erickt3> nmatsakis: sorry, I was off doing tech support for my grandfather in law. The documentation is great, thanks for doing it. I really enjoyed the pictographs too :)
[20:12:57] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[20:13:27] <nmatsakis> erickt3: lately I've been movin to a doc.rs file that I can reference; I found the big block comments could get annoying when I am editing the code, since I often jump to the beginning of the file in order to view imports or just "reset" my mental state
[20:14:20] <erickt3> neat, I didn't know about doc.rs
[20:15:13] <erickt3> nmatsakis: also, if you got a free moment, I was wondering if I could ask you a question or two about generators
[20:15:24] <nmatsakis> bugzilla is down, so shoot
[20:15:31] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[20:15:37] <nmatsakis> thus blocking me from doing what i'd hoped to be doing right now while dearest wife + daughter are out of the house :)
[20:16:13] <HollyRain> I get unresolsed name => fmt::sprintf("number %d of %d", 3, 4);
[20:16:31] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[20:16:31] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/rPRFZg
[20:16:31] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[20:16:48] <nmatsakis> HollyRain: you need to use a macro, I'm not sure which one though. I still use fmt!(...) but maybe I'm outmoded
[20:16:58] <nmatsakis> e.g., fmt!("number %d of %d", 3, 4)
[20:17:23] <nmatsakis> erickt3: I've been half-following your discussion of generators...
[20:17:24] <HollyRain> nmatsakis, in the doc. says about ifmt!
[20:17:24] <erickt3> nmatsakis: Sorry to hear that / happy to get your free time :) So I've been having fun thinking through generators this past week. I'm really starting to think that we should get them in for 1.0. Otherwise iterators are just going to be too painful to write in a couple places
[20:17:35] <nmatsakis> HollyRain: yeah I don't what ifmt is
[20:17:48] <nmatsakis> HollyRain: I think that's the next gen fmt replacement though
[20:18:11] <nmatsakis> erickt3: ok
[20:18:35] <erickt3> nmatsakis: especially if we migrate serialize.rs to use iterators. I doubt many people would want to use the api if they had to write state machines to serialize their data structures
[20:18:40] <nmatsakis> erickt3: I can believe they are painful, yes. If we can add some form of generator without it being overly difficult, i'd not be opposed, unless it ties our hand in some painful way
[20:19:04] <nmatsakis> erickt3: huh. I never considered using iterators for serialize
[20:19:16] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[20:19:17] <nmatsakis> why would we do that?
[20:20:17] <strcat> streaming serialization/deserialization?
[20:20:27] <erickt3> well, I figured it'd be much easier to optimize. In my micro benchmark, my serialization-by-iterators without inlining performed the same speed as inlining everything in serialization-by-closures
[20:21:04] <erickt3> +1 strcat. that too
[20:21:31] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[20:21:31] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/rPRFZg
[20:21:31] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[20:21:36] <strcat> like if you wanted to send a huge hash table over a pipe
[20:22:42] <nmatsakis> hmm
[20:22:58] <nmatsakis> I suppose
[20:23:33] *** Quits: lkuper (lkuper@E564B03A.14CD977C.51B6877.IP) (Quit: lkuper)
[20:23:40] <nmatsakis> certainly one can iagine that it's useful to be able to "coroutine-ize" any particular computation
[20:23:58] *** Joins: igl1 (igl@moz-F3B0D1C8.adsl.alicedsl.de)
[20:24:10] <nmatsakis> tasks are of course nice for this but they carry a heavy cost (memory disjoint etc)
[20:24:23] <erickt3> one neat hack I was playing around with is that the serialization type would be `enum { Int(int), Str(&'self str), â€¦ Seq(Iterator<'self>), â€¦ }`. this would allow a serializer to skip serializing a seq if it didn't want to
[20:24:25] *** Quits: igl (igl@moz-628ABD1E.adsl.alicedsl.de) (Ping timeout)
[20:24:28] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[20:24:41] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[20:25:04] <erickt3> by not consuming the Seq iterator
[20:25:22] <nmatsakis> I don't quite follow, what is the "serialization type" -- this is the data returned by the serializer?
[20:25:36] <nmatsakis> note that producing iterators can be a bit tricky
[20:25:37] <erickt3> yeah, it'd be what was yielded by the iterator
[20:25:57] <nmatsakis> e.g., strcat wanted to make a chunked iterator that converted an iterator<T> into interator<interator<T>>, but I think this cannot be done
[20:26:04] <erickt3> oh yes, that's why I'm so pro generator :)
[20:26:05] <nmatsakis> at least not without extending the type system
[20:26:26] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[20:26:26] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/rPRFZg
[20:26:26] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[20:26:44] <nmatsakis> sorry, I didn't mean "writing an iterator is hard" -- though that is true -- I meant that "writing an iterator that produces another iterator may not be possible under the current type system"
[20:26:51] <nmatsakis> but I kind of forget the details of why it didn't work now
[20:26:55] <nmatsakis> not sure if it would apply here
[20:26:59] <strcat> nmatsakis: because of &self
[20:27:02] <strcat> er
[20:27:04] <strcat> &mut self
[20:27:05] <nmatsakis> yes, I know it had to do with 'self
[20:27:07] <nmatsakis> ah, right
[20:27:14] <strcat> when you'd need &'self mut self
[20:27:34] <nmatsakis> essentially there is no way to "loan out" the sub-iterator for a shorter time
[20:27:46] <SiegeLord> How does one write the type of a C callback for FFI interface purposes?
[20:27:46] <strcat> you could still do it if the chunk was external
[20:27:47] <nmatsakis> or rather, you have to disable the main iterator while the sub-iterator is in use
[20:27:48] <strcat> like
[20:27:53] <nmatsakis> yes
[20:27:54] <strcat> struct { state, ite }
[20:27:57] <strcat> struct { state, iter }
[20:28:06] <SiegeLord> It used to be *u8... is that still the right way?
[20:28:12] <strcat> but it's a pain because the outer one still can't impl it
[20:28:14] *** Quits: maik (maik___@moz-6AB83A6F.dip0.t-ipconnect.de) (Ping timeout)
[20:28:14] * strcat shrugs
[20:28:16] <nmatsakis> SiegeLord: no, it is now `extern "C" fn(S, T) -> U`
[20:28:30] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Quit: Ex-Chat)
[20:29:01] <SiegeLord> I get an error using it:
[20:29:06] <nmatsakis> strcat: I don't quite follow what you mean, but I'm not sure it's relevant to serializtaion anyhow, as that is still following the "contours" of the input data structure
[20:29:07] <SiegeLord> error: mismatched types: expected `extern "C" fn(extern "C" fn()) -> i32` but found `extern "C" unsafe fn(extern "C" fn()) -> i32` (expected impure fn but found unsafe fn)
[20:29:50] <erickt3> nmatsakis: hrm, that may impact my ideas. For example, serializing `struct A { x: int, y: ~[~str] }` with generators would be `gen encode_iter() { yield Int(self.x); yield Seq(self.y.encode_iter()); }
[20:29:52] *** Joins: maik (maik___@moz-6AB83A6F.dip0.t-ipconnect.de)
[20:29:56] <nmatsakis> SiegeLord: hmm I think there is a bug or two, I've seen some printouts like that, not 100% sure what causes it
[20:30:00] <nmatsakis> SiegeLord: do you have a small test case?
[20:30:18] *** Quits: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP) (Ping timeout)
[20:30:18] <SiegeLord> One second
[20:30:20] <strcat> nmatsakis: I have a vague idea of how you could implement one, would have to actually try to make sense of it ;p
[20:30:37] <erickt3> nmatsakis: but I didn't consider what happens if you iterate over the outer iterator at the same time as the inner iterator
[20:31:01] <nmatsakis> strcat: erickt3: unfortunately, I have to run now :( but I'd like to continue this discussion during week
[20:31:05] <strcat> \o
[20:31:10] <erickt3> nmatsakis: ok :)
[20:31:27] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[20:31:27] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/rPRFZg
[20:31:27] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[20:31:33] <nmatsakis> I'm interested in this limitation, not sure if it can be easily lifted, but it bugs me to have something so eminently reasonable that we just can't do :)
[20:31:43] <SiegeLord> nmatsakis: https://gist.github.com/SiegeLord/6330270
[20:32:15] <nmatsakis> SiegeLord: ah, interesting...I can sort of see how this comes about, could? you file a bug please
[20:32:27] <nmatsakis> SiegeLord: as for a fix, you could use transmute, or ... one sec lemme check something
[20:32:50] <erickt3> nmatsakis: yeah, I wonder if we could prevent access to an outer &mut if it loaned out an inner &mut 
[20:32:51] <nmatsakis> SiegeLord: actually you should be able to write "extern "C" unsafe fn ..."
[20:33:08] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[20:33:16] <nmatsakis> SiegeLord: though I think there is something goofy about the whole thing, since we consider calling any extern "C" fn unsafe
[20:33:20] <mindcat> rusti: "Are we still live?"
[20:33:24] -rusti- "Are we still live?"
[20:33:27] <SiegeLord> Ok, thanks
[20:33:33] <SiegeLord> I'll file a bug report too
[20:33:43] <nmatsakis> SiegeLord: please add `cc @nikomatsakis` in it
[20:33:49] <SiegeLord> Ok
[20:33:51] <nmatsakis> later all
[20:33:54] *** Quits: maik (maik___@moz-6AB83A6F.dip0.t-ipconnect.de) (Connection reset by peer)
[20:34:50] <erickt3> later
[20:35:27] *** Quits: mortisha (Mibbit@A151F86C.E1D01C6.520CDC98.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:35:41] <toddaaro> lol, so this whitespace commit is still driving bors bonkers?
[20:35:55] <strcat> toddaaro: yeah
[20:36:00] <strcat> toddaaro: I tried a dozen things
[20:36:04] <jeaye> rusti: let t = @mut 2; t.clone()
[20:36:06] -rusti- @2
[20:36:12] <toddaaro> that is so weird
[20:36:21] <strcat> toddaaro: it's not actually the commit that's bad
[20:36:23] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[20:36:23] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/rPRFZg
[20:36:23] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[20:36:25] <strcat> I rebased the PR and removed the last commit
[20:36:28] <strcat> and reopened it
[20:36:33] <strcat> and it didn't like the new one either
[20:36:48] <strcat> toddaaro: it's https://github.com/mozilla/rust/pull/8599 btw
[20:36:54] <strcat> maybe something is wrong with the history
[20:37:00] * strcat has no idea
[20:37:11] <strcat> toddaaro: also, buildbot refused to build it when I manually pushed it :|
[20:37:47] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: jorendorff)
[20:38:03] <jeaye> rusti: trait T; struct S; impl S for T {} let s = S; s.clone()
[20:38:03] -rusti- <anon>:5:16: 5:17 error: expected `{` but found `;`
[20:38:03] -rusti- <anon>:5          trait T; struct S; impl S for T {} let s = S; s.clone()
[20:38:04] -rusti-                          ^
[20:38:04] -rusti- application terminated with error code 101
[20:38:10] <toddaaro> oh hm, I wonder if it is the history, I might have rebased the commits brson based that on
[20:38:30] <jeaye> rusti: trait T{ } struct S; impl S for T {} let s = S; s.clone()
[20:38:32] <toddaaro> in fact I almost certainly did
[20:38:34] -rusti- pastebinned 7 lines of output: http://ix.io/7xP
[20:38:44] *** Joins: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP)
[20:38:56] <jeaye> rusti: trait T{ } struct S; impl T for S {} let s = S; s.clone()
[20:38:57] -rusti- <anon>:5:57: 6:5 error: type `main::S` does not implement any method in scope named `clone`
[20:38:57] -rusti- <anon>:5          trait T{ } struct S; impl T for S {} let s = S; s.clone()
[20:38:57] -rusti- <anon>:6     };
[20:38:58] -rusti- error: aborting due to previous error
[20:38:58] -rusti- application terminated with error code 101
[20:39:51] <jeaye> rusti: #[deriving(Clone)] trait T{ } struct S; impl T for S {} let s = S; s.clone()
[20:39:52] -rusti- <anon>:5:76: 6:5 error: type `main::S` does not implement any method in scope named `clone`
[20:39:52] -rusti- <anon>:5          #[deriving(Clone)] trait T{ } struct S; impl T for S {} let s = S; s.clone()
[20:39:52] -rusti- <anon>:6     };
[20:39:52] -rusti- error: aborting due to previous error
[20:39:52] -rusti- application terminated with error code 101
[20:39:57] <jeaye> Should be enough, right?
[20:40:10] <jeaye> What else would I need to do for the trait to be Clone-compliant?
[20:40:10] <strcat> deriving doesn't work in function scopes
[20:40:14] *** Joins: tautologico (shung@8ABDEDA.34CAB63A.7B974E06.IP)
[20:40:44] <jeaye> strcat: That same bit isn't working within my code either (not within a function scope). Should it?
[20:40:54] <strcat> you can't clone a trait
[20:41:07] <strcat> you don't know the type inside
[20:41:25] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[20:41:25] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/rPRFZg
[20:41:25] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[20:41:25] <jeaye> So I can never clone S because it is a T?
[20:41:31] <jeaye> That doesn't see right.
[20:41:33] <jeaye> seem
[20:41:38] <strcat> no
[20:41:42] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[20:41:47] *** Joins: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com)
[20:41:50] <strcat> you didn't implement Clone for it
[20:41:57] <jeaye> For S?
[20:42:00] <strcat> yes
[20:42:21] <jeaye> Ah, I see
[20:42:37] <strcat> Clone is a normal trait
[20:42:39] <strcat> it's not special
[20:42:49] <strcat> you can inherit from it or add it as a bound
[20:43:16] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[20:43:29] <jeaye> What if I have a std::vec<@mut T> and I try to clone it?
[20:43:45] <jeaye> Since it's of the trait type and not the implementor, can it still work?
[20:43:58] <strcat> what is T
[20:44:10] <jeaye> From the example above, it is an arbitrary trait.
[20:44:22] <jeaye> (sorry for the ambiguity, since T is normally any type)
[20:44:36] <strcat> it's not an @mut then, so no
[20:44:47] * mindcat 's cannon fires "T"
[20:45:20] <strcat> jeaye: if you have ~[@T] or ~[@mut T] you can clone them, where T is a type (possibly a trait type)
[20:45:25] <strcat> but @mut Trait is *not* an @mut
[20:45:31] <strcat> the pointer is part of the trait type
[20:45:59] <strcat> although it's possible that @Trait and @mut Trait could impl Clone, but *not* DeepClone
[20:46:06] <strcat> it would be no different than implicitly copying them
[20:46:22] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[20:46:22] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/rPRFZg
[20:46:22] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[20:46:34] <jeaye> rusti: trait T{ } struct S; impl T for S {} let v: ~[@mut T] = ~[@mut S]; v.clone();
[20:46:38] -rusti- pastebinned 7 lines of output: http://ix.io/7xQ
[20:46:40] <jeaye> Basically what I have ^
[20:46:42] *** Quits: webber46 (webber46@moz-717E9C5B.cust.bredband2.com) (Quit: webber46)
[20:46:50] <jeaye> Was just looking to copy the @muts.
[20:46:57] <jeaye> Not deep clone
[20:47:03] <strcat> you can't though, there are no @mut pointers
[20:47:07] <strcat> @mut Trait isn't an @mut pointer
[20:47:10] <strcat> it's an @mut Trait
[20:47:36] * strcat doesn't think trait objects are what you want 95% of the time anyway
[20:48:10] <jeaye> I feel like they're needed in my case.
[20:48:17] <strcat> why?
[20:49:01] <jeaye> I've a vec of `@mut State` which could be any state, where State is a trait.
[20:49:16] *** Quits: mindcat (mindcat@27373DB7.2AF6B358.291A146C.IP) (Quit: leaving)
[20:49:22] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[20:49:31] <strcat> why not an enum?
[20:49:39] <jeaye> To clarify, I'm thinking of `~[@mut State]` as `std::vector<std::shared_ptr<State>>`
[20:49:57] *** Quits: Ms2ger (Ms2ger@moz-549ABB0C.adsl-dyn.isp.belgacom.be) (Quit: nn)
[20:50:54] <jeaye> strcat: I haven't used Rust enums beyond their C-like capabilities, so it could be that they're a valid solution here.
[20:51:23] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[20:51:23] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/rPRFZg
[20:51:23] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[20:51:27] <strcat> well, enums are one of the core features of the language
[20:51:27] <strcat> @mut and trait objects aren't
[20:51:34] <strcat> they're for corner cases, and it shows
[20:51:54] <strcat> they should be the last thing you reach for, because if you use them heavily you're not benefiting from rust
[20:52:51] * strcat shrugs
[20:52:59] <jeaye> Noted. I'll refresh my knowledge of Rust enums.
[20:53:06] <jeaye> Thanks for the tip.
[20:53:24] <strcat> you could think of enums as dynamic typing
[20:53:29] <strcat> you just have to list all the types
[20:53:54] <jeaye> That sounds suitable.
[20:54:00] <strcat> but they're going to be far more efficient than trait objects in most cases, and much more integrated with the rest of the language
[20:54:14] <strcat> the only restriction compared to a trait object is that you have to know the possible types
[20:54:26] <strcat> but if it's not a library, you do
[20:54:36] <jeaye> Yeah, that's not a problem.
[20:55:20] <strcat> rusti: enum Foo { A(int), B(~str), C(~[Foo]) } C(~[A(5), A(10), B(~"foo")])
[20:55:22] -rusti- C(~[A(5), A(10), B(~"foo")])
[20:55:35] <strcat> each enum is essentially a little dynamic type system
[20:55:43] <strcat> anyway enums are your friend ;p
[20:55:44] <jeaye> So each variant can be a separate type
[20:55:55] <jeaye> But they're all Foo?
[20:56:05] <strcat> jeaye: yeah
[20:56:12] <strcat> jeaye: they're represented as a union + a tag
[20:56:23] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[20:56:23] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/rPRFZg
[20:56:23] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[20:56:25] <jeaye> Ah, I immediately though of boost::variant
[20:56:30] <strcat> jeaye: yep, that's what they are
[20:56:45] <jeaye> Yay, C++ terms I can understand. :D
[20:56:49] <strcat> pattern matching excels at unpacking enums though
[20:57:09] <strcat> jeaye: anyway, if you can - you want to use enums most of the time
[20:57:14] <strcat> and generic functions
[20:57:30] <strcat> trait objects are sometimes a good choice, but they should still be one of the last tools you reach for
[20:58:03] <jeaye> Aye, same with @mut. Unfortunately, I'm stuck with it for 90% of my code.
[20:59:18] *** Joins: mitja (Mibbit@moz-A852F1B6.dial-up.dsl.siol.net)
[20:59:22] <strcat> jeaye: for example though, rust represents json as an enum
[20:59:33] <strcat> whenever you have a nice case where you know all the types it works great
[20:59:38] *** Joins: webber46 (webber46@moz-717E9C5B.cust.bredband2.com)
[20:59:43] <jeaye> Since that 90% of my game is customizable via the in-game console, which means it needs to be stored in a closure as mutable for, basically, the lifetime of the program.
[20:59:50] <strcat> ah
[21:00:11] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[21:00:37] <jeaye> Yeah, I see how enums are perfect for JSON; I use boost::variant in my own JSON lib.
[21:00:56] <jeaye> Anyway, this'll be very helpful. Thanks again. :)
[21:01:23] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[21:01:24] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/rPRFZg
[21:01:24] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[21:04:28] *** Joins: victorporof (victorporo@C2FADE94.E7C615F.41763F20.IP)
[21:06:10] *** Quits: victorporof (victorporo@C2FADE94.E7C615F.41763F20.IP) (Ping timeout)
[21:06:23] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[21:06:23] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/rPRFZg
[21:06:24] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[21:07:15] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[21:10:10] *** Quits: vk (chatzilla@F92596F.2DEF7520.EF7679FA.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 24.0/20130819170952])
[21:11:22] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[21:11:22] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/rPRFZg
[21:11:22] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[21:11:46] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[21:11:47] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[21:13:18] *** Quits: webber46 (webber46@moz-717E9C5B.cust.bredband2.com) (Quit: webber46)
[21:13:19] <fread2281> when running ./configure I'm getting fatal: Needed a single revision; Unable to find current revision in submodule path 'src/llvm'
[21:14:33] *** Joins: nawfel (Mibbit@922DF532.8B092367.DFAB1F33.IP)
[21:14:47] <nawfel> rusti: "hello"
[21:14:48] -rusti- "hello"
[21:14:57] <nawfel> rusti: use std::task::spawn_unlinked; use std::comm::oneshot; use std::io::println;  fn main() {     let (port, chan) = oneshot();     do spawn_unlinked || {         chan.send(~0);     }     println(fmt!("%?", port.recv())); }
[21:15:01] -rusti- pastebinned 5 lines of output: http://ix.io/7xS
[21:15:55] <nawfel> rusti: "which heap closure do you mean?"
[21:15:57] -rusti- "which heap closure do you mean?"
[21:16:22] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[21:16:22] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/rPRFZg
[21:16:22] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[21:17:05] <nawfel> hello, help me please
[21:17:54] *** Quits: tautologico (shung@8ABDEDA.34CAB63A.7B974E06.IP) (Quit: tautologico)
[21:18:31] <nawfel> rusti: use std::task::spawn_unlinked; use std::comm::oneshot; use std::io::println;  fn main() {     let (port, chan) = oneshot();     do spawn_unlinked || {         chan.send(~0);     }     println(fmt!("%?", port.recv())); }
[21:18:34] -rusti- pastebinned 5 lines of output: http://ix.io/7xS
[21:19:02] <fread2281> ruediger: use std::{io,str};
[21:19:18] <fread2281> rusti: use std::{io,str}
[21:19:19] -rusti- <anon>:6:4: 6:5 error: expected `;` but found `}`
[21:19:19] -rusti- <anon>:6     };
[21:19:19] -rusti-              ^
[21:19:19] -rusti- application terminated with error code 101
[21:19:34] <fread2281> rusti: use std::{io::println,str}; 1
[21:19:34] -rusti- <anon>:5:21: 5:23 error: expected `,` but found `::`
[21:19:34] -rusti- <anon>:5          use std::{io::println,str}; 1
[21:19:34] -rusti-                               ^~
[21:19:34] -rusti- application terminated with error code 101
[21:21:23] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[21:21:23] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/rPRFZg
[21:21:23] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[21:21:59] *** Joins: webber46 (webber46@moz-717E9C5B.cust.bredband2.com)
[21:22:59] <nawfel> ok! i understood the problem...
[21:23:48] <nawfel> Why isn't there     spawn_unlinked_with  , just like spawn_with?
[21:24:49] *** Quits: mitja (Mibbit@moz-A852F1B6.dial-up.dsl.siol.net) (Quit: http://www.mibbit.com ajax IRC Client)
[21:24:55] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (Ping timeout)
[21:25:30] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[21:26:24] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[21:26:24] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/rPRFZg
[21:26:24] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[21:28:47] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[21:28:58] <Luqman> nawfel: maybe it's just not commonly used enough yet
[21:29:26] <Luqman> nawfel: you can also just mimic spawn_with yourself https://github.com/mozilla/rust/blob/master/src/libstd/task/mod.rs#L369
[21:30:34] *** Joins: SingingBoyo (brandon@4DF3381A.51F4D838.4F048BDC.IP)
[21:30:46] *** Joins: mitja (Mibbit@moz-A852F1B6.dial-up.dsl.siol.net)
[21:30:47] <nawfel> thanks Luqman 
[21:31:20] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[21:31:21] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/rPRFZg
[21:31:21] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[21:31:23] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[21:31:23] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/BCpntw
[21:31:23] <ghrust> 13rust/06auto 1439207a3 15Alex Crichton: Remove ifmt hax and implement fprintf
[21:31:23] <ghrust> 13rust/06auto 1467512f7 15Alex Crichton: Implement a wrapper macro around fprintf -- ifmtf
[21:31:24] <ghrust> 13rust/06auto 14eb836dd 15Alex Crichton: Settle on the format/write/print family of names
[21:31:26] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[21:34:06] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[21:34:06] *** ChanServ sets mode: +o brson
[21:34:36] *** Joins: tautologico (shung@8ABDEDA.34CAB63A.7B974E06.IP)
[21:34:56] *** Joins: victorporof (victorporo@C2FADE94.E7C615F.41763F20.IP)
[21:37:01] *** Quits: victorporof (victorporo@C2FADE94.E7C615F.41763F20.IP) (Ping timeout)
[21:39:28] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[21:41:24] <jeaye> rusti: for x in range(0, 3) { x }
[21:41:25] -rusti- <anon>:5:9: 6:5 error: mismatched types: expected `()` but found `int` (expected () but found int)
[21:41:26] -rusti- <anon>:5          for x in range(0, 3) { x }
[21:41:26] -rusti- <anon>:6     };
[21:41:26] -rusti- error: aborting due to previous error
[21:41:26] -rusti- application terminated with error code 101
[21:41:42] <jeaye> rusti: for x in range(0, 3) { prinfln!("%d", x); }
[21:41:43] -rusti- <anon>:5:32: 5:39 error: macro undefined: 'prinfln'
[21:41:43] -rusti- <anon>:5          for x in range(0, 3) { prinfln!("%d", x); }
[21:41:43] -rusti-                                          ^~~~~~~
[21:41:43] -rusti- application terminated with error code 101
[21:41:48] <jeaye> rusti: for x in range(0, 3) { printfln!("%d", x); }
[21:41:49] -rusti- 0
[21:41:50] -rusti- 1
[21:41:50] -rusti- 2
[21:41:50] -rusti- ()
[21:42:01] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[21:42:08] *** Joins: fabiand (fabiand@moz-C5D449A4.netcologne.de)
[21:44:33] <strcat> rusti: @mut 5
[21:44:34] -rusti- @mut 5
[21:44:38] <strcat> rusti: 5 as *int
[21:44:39] -rusti- (0x5 as *())
[21:44:40] *** Joins: wabbiteh (Mibbit@1ADC2370.4B9E65B8.B79EA657.IP)
[21:45:00] *** Joins: threecreepio (jdp@moz-71E164C9.cust.bredbandsbolaget.se)
[21:45:51] <myname> :O
[21:46:10] <nawfel> strcat: http://www.reddit.com/r/rust/comments/1l0utq/is_fns_onceness_issue_deferred_until_post_10/
[21:47:43] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[21:48:56] <wabbiteh> I have a (perhaps somewhat nonsensical) question: you can get a reader for a file with file_reader(path), a writer with file_writer(path), but is there a built-in way to get something that can both read and write using a single object?  Similar to how C++ has ifstream, ofstream, *and* fstream which effectively combines both.
[21:49:01] *** Quits: shoo8que6U (shoo8que6U@moz-EB90881E.dip0.t-ipconnect.de) (Quit: Verlassend)
[21:49:31] <wabbiteh> Or was that some deliberate design decision, since people don't read/write from files at the same time that often.
[21:50:20] *** Joins: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au)
[21:52:04] <cmr> wabbiteh: the old IO code is decrepit and abandoned.
[21:52:53] <wabbiteh> Ah, so it's still not near its final design
[21:53:17] <strcat> not much of the stdlib is
[21:53:32] <wabbiteh> Alright, good to know
[21:53:59] <strcat> iterators are near to what they will always be, not much else ;p
[21:54:06] *** Quits: fabiand (fabiand@moz-C5D449A4.netcologne.de) (Quit: Verlassend)
[21:54:08] <SiegeLord> Hmm... why don't I see "rt" in the documentation on the website?
[21:54:41] <cmr> SiegeLord: it's marked #[doc(hidden)]
[21:54:59] <cmr> as it should be; it's considered internal implementation detail until it's moved out of std::rt
[21:56:23] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[21:56:23] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/s9ICwg
[21:56:23] <ghrust> 13rust/06auto 14e173a96 15Steven Fackler: Add OwnedStr::into_bytes...
[21:56:23] <ghrust> 13rust/06auto 14ebcd840 15bors: auto merge of #8733 : sfackler/rust/str-to-bytes, r=alexcrichton...
[21:56:24] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[21:56:30] <SiegeLord> Where will it be moved to?
[21:57:12] *** zz_kimundi is now known as kimundi
[21:57:23] *** Quits: nawfel (Mibbit@922DF532.8B092367.DFAB1F33.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:57:25] *** Quits: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au) (Quit: gavinb)
[21:57:43] <cmr> std::io, std::task, etc.
[21:58:25] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: night)
[21:59:10] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Quit: Leaving)
[22:06:13] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[22:06:20] *** Quits: webber46 (webber46@moz-717E9C5B.cust.bredband2.com) (Quit: webber46)
[22:06:24] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[22:06:47] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[22:08:41] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: jorendorff)
[22:09:03] *** Quits: tautologico (shung@8ABDEDA.34CAB63A.7B974E06.IP) (Quit: tautologico)
[22:15:08] *** Joins: tikue (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[22:20:21] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[22:24:55] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[22:25:00] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[22:26:51] *** Joins: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP)
[22:27:59] *** Joins: lkuper (lkuper@moz-92200C74.lightspeed.iplsin.sbcglobal.net)
[22:28:31] <lkuper> Is there a way to exclude importing things from std by name?
[22:28:50] <cmr> lkuper: what do you mean?
[22:29:27] <lkuper> cmr: say I want all of the standard library except a particular function
[22:29:40] *** kimundi is now known as zz_kimundi
[22:29:44] <cmr> lkuper: no, can't do that
[22:30:12] *** Quits: wabbiteh (Mibbit@1ADC2370.4B9E65B8.B79EA657.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:31:04] <lkuper> :(
[22:31:28] <SiegeLord> Hmm... why is &fn 128 bits... I want to cast it to int :/
[22:31:35] <strcat> SiegeLord: it's a closure
[22:31:42] <strcat> they have an environment
[22:31:47] <strcat> extern fn is a function
[22:32:16] <SiegeLord> Oh, that worked... thanks
[22:32:30] <SiegeLord> Let's see... 6 transmutes... I bet it'll crash
[22:33:28] <SiegeLord> It's not crashing o_O
[22:35:28] *** Joins: victorporof (victorporo@C2FADE94.E7C615F.41763F20.IP)
[22:35:45] <SiegeLord> Hmm... I really like that transmute checks the pointer sizes
[22:36:42] *** Joins: webber46 (webber46@moz-717E9C5B.cust.bredband2.com)
[22:37:29] <sfackler> lkuper: you can disable the implicit "use std::prelude::*" with #[no_implicit_prelude], but then you have to manually import all of the things you need
[22:37:31] *** Quits: victorporof (victorporo@C2FADE94.E7C615F.41763F20.IP) (Ping timeout)
[22:38:23] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Ping timeout)
[22:41:52] <dbaupp> strcat, toddaaro etc: IIRC servo-bors had a problem where a commit message was too long and this upset buildbot, which is possibly what is making bors unhappy on the whitespace one: the body text of the PR is very long, and bors puts it into the merge commit.
[22:42:36] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[22:42:55] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[22:44:36] <lkuper> sfackler: thanks, but I don't think that helps here; the problem is that I'm calling an `equals` method that I've defined, but Rust thinks it's supposed to be a call to `equals` from std::cmp::TotalEq
[22:45:35] <dbaupp> lkuper: I think it would help; the problem is the prelude reexports TotalEq, so the implicit std::prelude::* brings it into scope => bam, conflicting methods
[22:45:49] *** Quits: tikue (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue)
[22:46:03] * dbaupp doesn't like how you can't specify which trait you want the method to come from
[22:46:39] <lkuper> dbaupp: nah, I get the same error message with #[no_implicit_prelude]
[22:46:45] <brson> lkuper: method resolution is becoming an ugly problem. there are lots of methods that end with _ to work around this
[22:47:08] <brson> all the newrt io extension methods end with _ because they have the same names as the old io methods
[22:47:10] <lkuper> brson: something like "except" or "excluding" would be nice
[22:47:11] <dbaupp> lkuper: it needs to go on a mod? (or the crate)
[22:47:34] <brson> i think this is mostly just a resolution bug
[22:47:46] <strcat> brson: there's a bug with generic impls
[22:47:49] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[22:47:56] <SingingBoyo> I wonder how difficult it'd be to add support for calling TraitName::method(x, args) instead of x.method(args)
[22:47:56] *** Quits: webber46 (webber46@moz-717E9C5B.cust.bredband2.com) (Quit: webber46)
[22:48:03] <strcat> impl<T: BoundA + BoundB> Foo for T { }
[22:48:04] <SingingBoyo> and whether that'd be something people want
[22:48:07] <strcat> will conflict with everything
[22:48:07] <sfackler> brson: speaking of that, could you re-r this? https://github.com/mozilla/rust/pull/8607
[22:48:35] <dbaupp> rusti: #{no_implicit_prelude] mod foo { trait Bar { fn equals(&self) {} } impl Bar for uint {} fn foo() { 1u.equals() } }
[22:48:37] -rusti- <anon>:5:30: 5:31 error: incorrect close delimiter: `]`
[22:48:37] -rusti- <anon>:5          #{no_implicit_prelude] mod foo { trait Bar { fn equals(&self) {} } impl Bar for uint {} fn foo() { 1u.equals() } }
[22:48:38] -rusti-                                        ^
[22:48:38] -rusti- application terminated with error code 101
[22:48:40] <dbaupp> rusti: #[no_implicit_prelude] mod foo { trait Bar { fn equals(&self) {} } impl Bar for uint {} fn foo() { 1u.equals() } }
[22:48:45] -rusti- pastebinned 7 lines of output: http://ix.io/7xY
[22:49:01] <dbaupp> huh
[22:49:02] <sfackler> what
[22:49:23] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[22:49:27] *** Joins: tikue (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[22:49:36] *** Quits: lkuper (lkuper@moz-92200C74.lightspeed.iplsin.sbcglobal.net) (Ping timeout)
[22:49:52] <dbaupp> lkuper: I apologise for my disbelief!
[22:50:43] *** Joins: lkuper (lkuper@moz-92200C74.lightspeed.iplsin.sbcglobal.net)
[22:50:56] *** Joins: fiirhok (fiirhok@moz-4BE3125.vc.shawcable.net)
[22:51:04] <Eridius> dbaupp: nice, timing that while hwas offline ;0
[22:51:29] <strcat> brson: my least favourite bug atm ;p
[22:51:40] * lkuper looks at logs.
[22:51:46] <strcat> luckily default methods mean most of the generic impls I had to make are gone
[22:52:08] <strcat> rusti: let mut xs = [1, 2, 3]; let ys = [4, 5, 6]; let zs = [7, 8, 9]; (xs, ys, xz)
[22:52:09] -rusti- <anon>:5:82: 5:84 error: unresolved name `xz`. Did you mean `xs`?
[22:52:09] -rusti- <anon>:5          let mut xs = [1, 2, 3]; let ys = [4, 5, 6]; let zs = [7, 8, 9]; (xs, ys, xz)
[22:52:09] -rusti-                                                                                            ^~
[22:52:09] -rusti- error: aborting due to previous error
[22:52:09] -rusti- application terminated with error code 101
[22:52:16] <strcat> rusti: let mut xs = [1, 2, 3]; let ys = [4, 5, 6]; let zs = [7, 8, 9]; (xs, ys, zs)
[22:52:17] -rusti- <anon>:5:17: 5:19 warning: variable does not need to be mutable [-W unused-mut (default)]
[22:52:18] -rusti- <anon>:5          let mut xs = [1, 2, 3]; let ys = [4, 5, 6]; let zs = [7, 8, 9]; (xs, ys, zs)
[22:52:18] -rusti-                           ^~
[22:52:18] -rusti- ([1, 2, 3], [4, 5, 6], [7, 8, 9])
[22:52:50] <strcat> rusti: let mut xs = [1, 2, 3]; let mut ys = [4, 5, 6]; let mut zs = [7, 8, 9]; xs.mut_iter().chain(ys.mut_iter()).chain(zs.mut_iter()).reverse_(); (xs, ys, zs)
[22:52:51] -rusti- ([9, 8, 7], [6, 5, 4], [3, 2, 1])
[22:53:16] <dbaupp> Eridius: oh, haha
[22:54:27] <lkuper> dbaupp: let me gist what I was trying to do. sorry, my laptop just fucking died.
[22:54:48] * lkuper fumbles around getting a bunch of buffers back like they were.
[22:57:04] <dbaupp> lkuper: it seems there is a something screwy and no_implicit_prelude isn't working properly :/
[22:58:28] <brson> strcat: I can't even build jemalloc standalone on win32 with just `./configure; make`
[22:58:39] <strcat> brson: did you try pulling from master?
[22:58:41] <sfackler> dbaupp: I would guess that #[no_implicit_prelude] is ignored if it isn't at module scope
[22:58:42] <strcat> someone submitted a fix
[22:58:50] <strcat> related to newlines breaking the jemalloc header templates
[22:58:50] <sfackler> in rusti it ends up inside of main()
[22:58:51] <brson> no
[23:00:01] <dbaupp> sfackler: I used it successfully in rusti yesterday
[23:00:30] <dbaupp> rusti: #[no_implicit_prelude] mod no_print { fn foo() { print("nope") } }
[23:00:31] -rusti- <anon>:5:58: 5:63 error: unresolved name `print`.
[23:00:31] -rusti- <anon>:5          #[no_implicit_prelude] mod no_print { fn foo() { print("nope") } }
[23:00:31] -rusti-                                                                    ^~~~~
[23:00:31] -rusti- error: aborting due to previous error
[23:00:31] -rusti- application terminated with error code 101
[23:00:34] <brson> i'll stop investigating jemalloc then. yay
[23:00:50] <dbaupp> rusti: mod yes_print { fn foo() { print("nope") } }
[23:00:51] -rusti- ()
[23:01:06] <strcat> brson: well I'm not 100% sure if it's actually fixed
[23:01:09] <lkuper> ok, yeah, it seems to be working for me on a module.
[23:01:27] <lkuper> uh, completely unrelated question:
[23:01:51] <lkuper> that was the first time I'd restarted emacs in a while, and I'm not sure what happened, but for some reason rust-mode is no longer doing 4-space tabs
[23:02:21] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[23:02:32] <lkuper> I just found https://github.com/mozilla/rust/issues/6222
[23:03:14] <lkuper> questions: (1) am I supposed to have something like `(setq rust-indent-unit 4)` in my .emacs?  (I don't think I've ever had to do that before...)
[23:03:40] <lkuper> (2) is there something busted with the rust-mode that is on marmalade?  because that's where I think mine's from.
[23:04:27] <brson> lkuper: I have `(setq default-tab-width 4)` in my .emacs
[23:04:51] <brson> lkuper: graydon rewrote rust-mode
[23:04:54] <brson> there are some regressions
[23:05:56] <lkuper> hm, there's nothing on http://marmalade-repo.org/packages/rust-mode indicating a date
[23:06:40] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[23:06:41] <lkuper> the file itself has a date: ;; Version: 20130808.1925
[23:06:49] *** Quits: vosen (vosen@moz-266BA656.icpnet.pl) (Quit: Leaving)
[23:07:20] <lkuper> 16 days old.  i.e. ancient
[23:07:38] <lkuper> in Rust World
[23:10:57] *** Quits: threecreepio (jdp@moz-71E164C9.cust.bredbandsbolaget.se) (Quit: threecreepio)
[23:12:51] <lkuper> brson: hm, I already have `(setq-default tab-width 4)` in mine, but that doesn't seem to do anything to help
[23:13:36] <lkuper> perhaps I need (setq-default default-tab-width 4)
[23:14:52] *** Quits: HollyRain (HollyRain@moz-50A83091.dyn.user.ono.com) (Quit: bye, bye)
[23:15:28] <brson> lkuper: my magic invokation is different from both that you listed: (setq default-tab-width 4)
[23:15:46] <lkuper> brson: that didn't seem to help either :(
[23:16:04] <lkuper> I suspect that the rust-mode that I have is old and busted
[23:24:50] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[23:25:19] <lkuper> hm.  it's badly messed up: now tab indents 16 spaces.
[23:25:28] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[23:25:41] <lkuper> this is having switched over to the in-tree rust-mode.
[23:27:14] *** Joins: tavoe (Mibbit@moz-3E6EF1F3.rh.rit.edu)
[23:27:39] <sfackler> is bors wedged? it looks like all the builders have been done for a half hour: http://buildbot.rust-lang.org/waterfall
[23:28:17] <tavoe> I'm trying to get glfw-rs to build. Having some trouble. Lots of "expected Option<extern "C"...>, but found "Option<*u8>" errors. Any ideas?
[23:29:21] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[23:29:21] *** Quits: sebcrozet (sebcrozet@moz-A855F6C0.w82-127.abo.wanadoo.fr) (Quit: Gone)
[23:29:28] <brson> sfackler: looks like the bsd bot is having trouble
[23:30:06] <brson> i'll investigate
[23:31:27] *** Joins: huddler (Mibbit@FB71A484.6BBDF347.94810E9.IP)
[23:31:30] <sfackler> tavoe: the type of extern "C" fns changed from *u8 to the type you would expect recently, and I guess glfw-rs hasn't been updated
[23:32:05] <sfackler> or glfw-rs is updated and your compiler is too old
[23:32:15] <bjz> tavoe: you need to update your compiler
[23:32:37] <bjz> tavoe: eiter that or you have an old version of glfw-rs
[23:32:48] <bjz> wait
[23:32:54] *** Quits: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP) (Ping timeout)
[23:32:57] <bjz> no I's your compiler
[23:33:01] <bjz> *it's
[23:33:13] <bjz> yep definitely compiler
[23:34:13] <bjz> brson: could you answer this question a little better for me? http://www.reddit.com/r/rust/comments/1kzybv/bjzglrs_github_an_opengl_function_loader_for_rust/cbugxls
[23:34:13] *** Quits: tavoe (Mibbit@moz-3E6EF1F3.rh.rit.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[23:35:56] *** Joins: victorporof (victorporo@C2FADE94.E7C615F.41763F20.IP)
[23:37:22] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[23:37:26] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[23:38:33] *** Joins: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[23:38:50] <lkuper> dbaupp, sfackler: so I *thought* the no_implicit_prelude thing would help, but I'm still getting the error I had before.  Here's a gist: https://gist.github.com/lkuper/6331033
[23:38:55] *** Joins: z0w0 (zack@moz-7E6DC3A.lnse2.woo.bigpond.net.au)
[23:39:40] <brson> i'm going to shutdown the bsd ec2 slaves then restart the buildmaster, in hopes that it starts up new instances. this may break things even worse...
[23:40:16] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: jorendorff)
[23:40:22] <strcat> might as well just merge this one manually
[23:40:51] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Quit: buildmaster reconfigured: bot disconnecting)
[23:40:54] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[23:41:07] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[23:41:07] <ghrust> 01[13rust01] 15thestinger pushed 1 new commit to 06master: 02http://git.io/0cqclQ
[23:41:07] <ghrust> 13rust/06master 14e311a1e 15Daniel Micay: Merge pull request #8733 from sfackler/str-to-bytes...
[23:41:07] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[23:41:24] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[23:41:25] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14ebcd840 to 14e311a1e: 02http://git.io/N3iJvQ
[23:41:25] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[23:41:54] <brson> strcat: why?
[23:42:28] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[23:42:30] <strcat> brson: since it passed on all the others and there's no way it's arch dependent (only adds a little new thing)
[23:42:36] *** Quits: victorporof (victorporo@C2FADE94.E7C615F.41763F20.IP) (Ping timeout)
[23:42:38] * strcat shrugs
[23:42:38] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[23:43:14] <strcat> did bors stop looping?
[23:43:16] <sfackler> lkuper: if I had to guess, I'd say that TotalEq may be "extra" implicitly used since it's hooked into ==
[23:43:17] *** Joins: HollyRain (HollyRain@moz-50A83091.dyn.user.ono.com)
[23:43:40] <lkuper> sfackler: hm
[23:43:45] <strcat> sfackler: == is Eq
[23:44:03] <lkuper> the culprit here is `equal`
[23:44:11] <strcat> life would be easier if floats just didn't implement those operators ;p
[23:44:25] <HollyRain> in trunk, where is core::str::len() ?
[23:44:31] <lkuper> if I use another name, it works fine, so this isn't that big a deal.  I just want the names I want!
[23:44:44] <sfackler> rusti: "foo".len()
[23:44:46] <strcat> HollyRain: it's a method on Container
[23:44:47] -rusti- 3
[23:45:52] <lkuper> HollyRain: `core` is no more; it should be src/libstd/str.rs
[23:46:25] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[23:46:25] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/rNZPXg
[23:46:25] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[23:46:26] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[23:46:26] <ghrust> 01[13rust01] 15bors pushed 14 new commits to 06auto: 02http://git.io/1PkKeg
[23:46:26] <ghrust> 13rust/06auto 144c75d36 15Brian Anderson: std: Reduce TLS access
[23:46:26] <ghrust> 13rust/06auto 1430a7a5b 15Brian Anderson: Define cfg(rtopt) when optimizing. Turn off runtime sanity checks...
[23:46:26] <ghrust> 13rust/06auto 14468d023 15Brian Anderson: std: Convert some assert!s to rtassert!
[23:46:28] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[23:46:45] <strcat> yay
[23:49:04] *** Joins: webber46 (webber46@moz-717E9C5B.cust.bredband2.com)
[23:49:04] <HollyRain> so now, there is only one way to call the method len(), isn't there?
[23:49:24] <strcat> I hope so ;p
[23:49:47] <strcat> the only really annoying thing left to clean up there is removing the map method from vec
[23:49:51] <strcat> to make way for Iterable
[23:50:21] *** Quits: lkuper (lkuper@moz-92200C74.lightspeed.iplsin.sbcglobal.net) (Quit: lkuper)
[23:50:26] *** Quits: webber46 (webber46@moz-717E9C5B.cust.bredband2.com) (Quit: webber46)
[23:52:00] *** Quits: a__ (a__@moz-25043B93.nycmny.fios.verizon.net) (Client exited)
[23:52:46] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[23:53:12] *** Joins: a__ (a__@moz-25043B93.nycmny.fios.verizon.net)
[23:53:30] <Eridius> ugh, ICE: https://github.com/mozilla/rust/issues/8741
[23:53:51] <Eridius> `fn foo<'self, T: Iterator<&'self str>>(it: T) -> ~[&'self str]` will trigger this
[23:54:43] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[23:54:43] <ghrust> 01[13rust01] 15brson merged 06master into 06snap-stage3: 02http://git.io/yrrcoA
[23:54:43] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[23:56:16] *** Joins: ofeldt- (ofeldt@moz-FE664078.dip0.t-ipconnect.de)
[23:56:23] <HollyRain> vec::capacity() => unresolved name; but that method is on http://static.rust-lang.org/doc/std/vec.html
[23:56:53] <strcat> it's a method, not a free function in the vec module
[23:56:56] *** Quits: ofeldt (ofeldt@moz-1ED42411.dip0.t-ipconnect.de) (Ping timeout)
[23:57:20] <HollyRain> ok
[23:58:06] *** Joins: Sergio965 (sergiobz@moz-BB21156B.dynamic.csail.mit.edu)
[23:58:19] *** zz_kimundi is now known as kimundi
[23:59:36] <Eridius> strcat: I assume you meant "can't", not "can" in your comment?
[23:59:48] <strcat> yes
