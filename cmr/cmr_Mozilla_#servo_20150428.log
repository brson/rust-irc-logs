[00:01:44] *** Joins: ghservo (ghservo@moz-0l2.5u0.30.192.IP)
[00:01:44] -ghservo- [13servo] 15bors-servo 04force-pushed 06auto from 14f98ad8a to 1442f57c6: 02http://git.io/A9I6iA
[00:01:44] *** Parts: ghservo (ghservo@moz-0l2.5u0.30.192.IP) ()
[00:06:53] *** Quits: system64 (uid17738@moz-7c4aav.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[00:07:12] *** AutomatedTester is now known as AutomatedTester|AFK
[00:07:13] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[00:11:20] <Manishearth> +1 this week in rust in gecko 
[00:12:18] <frewsxcv> out of curiosity, do the weekly meetings happen via audio?
[00:13:13] <mbrubeck> frewsxcv: By videoconference using "vidyo"
[00:13:29] <mbrubeck> frewsxcv: Though you can also dial in to the meeting from POTS
[00:13:42] *** Joins: duncank (duncank@moz-86pspf.compute.amazonaws.com)
[00:13:43] <frewsxcv> ah, cool. are they usually open to the public?
[00:14:15] <frewsxcv> where "public" == me :P
[00:14:37] * frewsxcv would be interested in to listen in to one at some point
[00:14:50] * frewsxcv (not this week though)
[00:15:39] *** Joins: Rym (y@moz-rmaga4.range86-187.btcentralplus.com)
[00:21:20] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[00:23:17] <mbrubeck> frewsxcv: Certainly anyone active in the project is welcome! Let us know if you want the connection info some week.
[00:23:26] *** Quits: Rym (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[00:26:04] *** Quits: MrZeus (MrZeus@moz-n8pa5v.skybroadband.com) (Ping timeout: 121 seconds)
[00:32:49] <mbrubeck> jdm is looking very Steve Jobs today
[00:33:01] <mbrubeck> esp. with the lighting and gray backdrop there
[00:33:27] *** Quits: marcusklaas (marcus@moz-14bm7d.upc-g.chello.nl) (Client exited)
[00:34:16] *** Quits: chmanchester (Chris@moz-ha9kvr.2rkg.9kg1.0101.2620.IP) (Ping timeout: 121 seconds)
[00:34:17] *** Quits: Nekit1234007 (nekit@moz-6p4sko.broadband.iskratelecom.ru) (A TLS packet with unexpected length was received.)
[00:34:22] *** Joins: jdm (jdm@moz-ilbt2e.cable.teksavvy.com)
[00:34:23] *** ChanServ sets mode: +qo jdm jdm
[00:38:06] *** Joins: caitp- (caitp@moz-lmogh4.cable.rogers.com)
[00:38:44] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[00:39:04] *** Joins: brson (brson@moz-ib4.pdv.48.37.IP)
[00:39:05] *** ChanServ sets mode: +o brson
[00:39:36] *** Joins: jinwoo_mbp2 (jinwoo@moz-t0r.chb.167.121.IP)
[00:42:30] *** Quits: Temur (Tarmashirin@moz-f5i.59e.201.117.IP) (Connection closed)
[00:42:40] *** Quits: caitp- (caitp@moz-lmogh4.cable.rogers.com) (Ping timeout: 121 seconds)
[00:43:41] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[00:44:06] *** Joins: Temur (Tarmashirin@moz-f5i.59e.201.117.IP)
[00:45:03] *** Quits: Savago (Savago@moz-8hd.3b6.246.162.IP) (Client exited)
[00:47:50] *** Joins: mr_pants (Mibbit@moz-juv.9o3.252.72.IP)
[00:50:55] *** Quits: nattokirai (nattokirai@moz-5i4.ii6.5.103.IP) (Client exited)
[00:53:00] *** Joins: jgallagher (john@moz-6ge.dhn.131.24.IP)
[00:55:43] *** Quits: qrlpx (smuxi@moz-n7t.3nb.211.95.IP) (Ping timeout: 121 seconds)
[01:00:43] *** Joins: qrlpx (smuxi@moz-n70fkn.dip0.t-ipconnect.de)
[01:08:10] *** Joins: caitp (caitp@moz-lmogh4.cable.rogers.com)
[01:08:17] *** Quits: jdm (jdm@moz-ilbt2e.cable.teksavvy.com) (Quit: )
[01:09:17] *** Quits: mr_pants (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:10:04] *** Quits: wldcordeiro (wldcordeiro@moz-metlmh.hmj8.a2nn.0007.2601.IP) (Ping timeout: 121 seconds)
[01:12:25] *** Joins: bdero (bran@moz-lbs.91h.47.73.IP)
[01:24:38] *** Quits: Temur (Tarmashirin@moz-f5i.59e.201.117.IP) (Ping timeout: 121 seconds)
[01:29:02] *** Joins: Temur (Tarmashirin@moz-f5i.59e.201.117.IP)
[01:31:13] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[01:31:13] -ghservo- [13servo] 15pcwalton opened pull request #5878: layout: Make the style-specified width affect minimum width. (06master...06intrinsic-style-specified-width) 02http://git.io/vfFmf
[01:31:13] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[01:31:24] <pcwalton> mbrubeck: r? ^ this fixes the overlapping text on google
[01:33:03] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[01:33:29] *** Joins: nattokirai (nattokirai@moz-rq9a8e.asahi-net.or.jp)
[01:34:07] *** Quits: Guest64 (textual@moz-6v6.a3e.152.1.IP) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[01:38:53] <frewsxcv> :)
[01:42:14] *** Quits: brson (brson@moz-ib4.pdv.48.37.IP) (Quit: leaving)
[01:42:45] *** Joins: slyu (slyu@moz-aj9ejj.HINET-IP.hinet.net)
[01:44:57] *** Joins: caitp- (caitp@moz-lmogh4.cable.rogers.com)
[01:52:20] *** Joins: Guest64 (textual@moz-6v6.a3e.152.1.IP)
[01:55:49] *** Joins: playjax (chatzilla@moz-gkl57r.optusnet.com.au)
[02:02:44] *** Quits: qrlpx (smuxi@moz-n70fkn.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[02:05:57] *** Quits: CoreDuo (CoreDuo@moz-jgeuu4.coreduo.me.uk) (Ping timeout: 121 seconds)
[02:06:58] *** Joins: CoreDuo (CoreDuo@moz-jgeuu4.coreduo.me.uk)
[02:07:30] *** Joins: kimundi_ (kimundi@moz-qie1ht.dip0.t-ipconnect.de)
[02:07:44] *** Joins: qrlpx (smuxi@moz-n7t.3nb.211.95.IP)
[02:10:57] *** Quits: kimundi (kimundi@moz-7st4bq.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[02:10:57] *** kimundi_ is now known as kimundi
[02:12:11] *** Quits: caitp- (caitp@moz-lmogh4.cable.rogers.com) (Ping timeout: 121 seconds)
[02:15:20] *** Quits: mwu (mwu@moz-74nlii.hntd.7296.000c.2601.IP) (A TLS packet with unexpected length was received.)
[02:16:30] *** kimundi is now known as zz_kimundi
[02:23:53] *** zz_kimundi is now known as kimundi
[02:24:21] *** Quits: Anupkumar (uid16774@moz-cf8smb.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[02:33:32] *** Joins: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net)
[02:33:32] *** ChanServ sets mode: +o pcwalton
[02:33:39] *** Quits: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net) (A TLS packet with unexpected length was received.)
[02:42:32] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[03:05:44] <barosl> Huh? The bot seems to be stopped
[03:05:55] <barosl> Any exceptions occurred?
[03:18:41] <mbrubeck> larsberg: ^ looks like stuff is piling up in the homu queue...
[03:27:45] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[03:31:49] *** Quits: adu (adu@moz-d3un5a.ms5a.74ae.000a.2601.IP) (Ping timeout: 121 seconds)
[03:32:01] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[03:33:40] *** Joins: madalynn]] (Mibbit@moz-juv.9o3.252.72.IP)
[03:34:24] *** Quits: madalynn]] (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:44:34] *** Quits: jinwoo_mbp2 (jinwoo@moz-t0r.chb.167.121.IP) (Quit: This computer has gone to sleep)
[03:44:42] *** Joins: gandalf (zbraniecki@moz-cp7c4m.ca.comcast.net)
[03:53:10] *** Joins: Jesse (jruderman@moz-pqc1f5.ca.comcast.net)
[03:56:41] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[04:04:02] *** Joins: xarcus (Mibbit@moz-juv.9o3.252.72.IP)
[04:06:08] *** Quits: xarcus (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:06:36] <jack> https://www.irccloud.com/pastebin/rbcHk2yX
[04:06:38] <jack> barosl: ^
[04:06:59] <jack> so looks like some PR is freaking it out
[04:08:10] <barosl> Umm, it looks like GitHub is having another inconsistent state issue...
[04:08:29] <barosl> I hope closing and reopening the topmost PR would work
[04:09:01] <barosl> FWIW, GitHub fairly often gives us an inconsistent API result. I should really be used to it
[04:09:08] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[04:09:08] -ghservo- [13servo] 15metajack closed pull request #5831: layout: Make `margin: auto` work properly with tables. (06master...06amazon-table-sizing) 02http://git.io/vfrCf
[04:09:08] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[04:09:09] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[04:09:09] -ghservo- [13servo] 15bors-servo 04force-pushed 06tmp from 1442f57c6 to 148ecb9d6: 02http://git.io/veWu4
[04:09:09] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[04:09:10] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[04:09:11] -ghservo- [13servo] 15bors-servo merged 06auto into 06tmp: 02http://git.io/vfFXk
[04:09:11] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[04:09:12] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[04:09:12] -ghservo- [13servo] 15metajack reopened pull request #5831: layout: Make `margin: auto` work properly with tables. (06master...06amazon-table-sizing) 02http://git.io/vfrCf
[04:09:12] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[04:09:34] <jack> that seems to have solved it.
[04:09:51] <jack> barosl: can we make homu recover in this situation?
[04:10:22] <barosl> I should consider if the assertion fails, make Homu automatically mark it as "error", or even closing and reoping it
[04:10:53] *** Joins: caitp- (caitp@moz-lmogh4.cable.rogers.com)
[04:11:04] <jack> have you pinged github about it? I've found their support pretty responsive.
[04:11:48] <barosl> Oh, not yet. I personally made a list of some situations that GitHub was lagging, but haven't made it public
[04:12:37] <barosl> However I'm skeptical it would actually be fixed. Many of the problems are temporal, so I guess that's due to the well-known "eventaul consistent" database
[04:12:51] *** Joins: acgtyrant (acgtyrant@moz-3kd.b79.160.124.IP)
[04:13:15] <barosl> Die, eventual consistency! Embrace the ACID!
[04:13:58] <jack> Seems like a bug in any case.
[04:14:06] <barosl> Yup
[04:14:09] <jack> Especially as that one kept happening for quite a few minutes
[04:14:20] *** Joins: jinwoo_mbp2 (jinwoo@moz-t0r.chb.167.121.IP)
[04:14:26] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[04:14:26] -ghservo- [13servo] 15bors-servo merged 06auto into 06tmp: 02http://git.io/vfFXb
[04:14:26] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[04:15:05] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[04:15:24] *** Quits: caitp- (caitp@moz-lmogh4.cable.rogers.com) (Ping timeout: 121 seconds)
[04:15:52] <barosl> http://build.servo.org/builders/gonk/builds/752/steps/git/logs/stdio
[04:15:59] <barosl> That's an interesting error ;)
[04:16:17] <barosl> GitHub seems to feel tired today
[04:16:25] <jack> That happened earlier today too
[04:18:48] *** Quits: dbaron (dbaron@moz-aa63r7.2rkg.9kg1.0101.2620.IP) (Quit: 8403864 bytes have been tenured, next gc will be global.)
[04:19:25] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[04:52:38] *** Quits: gandalf (zbraniecki@moz-cp7c4m.ca.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[04:53:02] *** Joins: gandalf (zbraniecki@moz-cp7c4m.ca.comcast.net)
[04:56:38] *** Joins: dbaron (dbaron@moz-12jr9n.dynamic.fusionbroadband.com)
[05:21:42] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[05:21:44] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[05:21:44] -ghservo- [13servo] 15bors-servo pushed 0 new commits to 06tmp: 02http://git.io/vfFdo
[05:21:44] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[05:21:45] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[05:21:45] -ghservo- [13servo] 15bors-servo merged 06auto into 06tmp: 02http://git.io/vfFdK
[05:21:45] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[05:21:46] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[05:21:46] -ghservo- [13servo] 15bors-servo merged 06tmp into 06auto: 02http://git.io/vfFdK
[05:21:46] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[05:21:49] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[05:21:49] -ghservo- [13servo] 15Manishearth closed issue #5737: Add a lint for moving RootedVec values 02http://git.io/vv7fz
[05:21:49] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[05:24:04] *** Quits: valentin (icecold@moz-o8uuic.5ljq.j4c9.2f0a.2a02.IP) (Quit: Leaving.)
[05:24:54] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[05:24:54] -ghservo- [13servo] 15bors-servo merged 06auto into 06tmp: 02http://git.io/vfFFG
[05:24:54] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[05:27:09] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[05:27:09] -ghservo- [13servo] 15Jinwoo-Song opened pull request #5879: Make NodeTypeId include CharacterData variant (06master...06character_data) 02http://git.io/vfFFg
[05:27:09] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[05:27:39] <mbrubeck> GitHub's still flaky. :/
[05:28:23] <SimonSapin> larsberg: jack: Reading meeting notes. Regarding Bugzilla, would our PRs stay on GitHub? For what itâ€™s worth, GitHub+Critic has made me wary of using separate tools together that were not designed to work together.
[05:44:38] *** Joins: jviereck (Adium@moz-ab7v54.dclient.hispeed.ch)
[05:48:44] *** Quits: jviereck (Adium@moz-ab7v54.dclient.hispeed.ch) (Ping timeout: 121 seconds)
[05:49:07] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[05:49:07] -ghservo- [13servo] 15bors-servo 04force-pushed 06auto from 14c783531 to 1440901a6: 02http://git.io/A9I6iA
[05:49:07] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[05:52:05] *** Quits: gandalf (zbraniecki@moz-cp7c4m.ca.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[05:56:39] *** Joins: dstrbad (dstrbad@moz-30hd9v.dsl.iskon.hr)
[05:58:29] <Manishearth> SimonSapin: we could go the Gaia way and do crazy things
[05:58:38] <Manishearth> or we could use patches and revert to stone-age Git
[05:59:07] <SimonSapin> Manishearth: My point exactly. Crazy things bolted on after the fact like Criticâ€™s integration with GitHub tend to be fragile
[06:01:03] <Manishearth> Gaia uploads PR links as patches. Bugzilla (the software) uses Git, but not Github ('cept for mirroring). Firefox uses hg anyway.
[06:01:13] <Manishearth> The latter two upload patches
[06:01:22] <Manishearth> we *could* simply post PR links as a comment
[06:01:55] <Manishearth> nobody does that
[06:02:02] <Manishearth> there's probably a reason why :p
[06:02:20] *** Quits: caitp (caitp@moz-lmogh4.cable.rogers.com) (Ping timeout: 121 seconds)
[06:02:23] <SimonSapin> Manishearth: I donâ€™t see how "Pile mork hacks on top of it!" helps with "Itâ€™s a pain to deal with multiple systems that donâ€™t know about each other"
[06:02:25] *** kimundi is now known as zz_kimundi
[06:02:54] <Manishearth> SimonSapin: oh, it doesn't
[06:03:03] <Manishearth> that's why I'm not fond of the idea
[06:03:32] <Manishearth> and want to keep using Github till it no longer works for our scale, even if that means doing some painful migration and whatnot later
[06:04:15] <SimonSapin> ok,
[06:04:28] <SimonSapin> so weâ€™re just agreeing loudly :)
[06:05:08] <Manishearth> yes
[06:05:28] <Manishearth> we ned to agree more loudly so that Ms2ger stops wanting it :P
[06:06:07] *** Joins: gandalf (zbraniecki@moz-cp7c4m.ca.comcast.net)
[06:09:52] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[06:09:52] -ghservo- [13servo] 15bors-servo 04force-pushed 06auto from 1440901a6 to 14db97cc6: 02http://git.io/A9I6iA
[06:09:52] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[06:15:09] *** Joins: Nekit1234007 (nekit@moz-6p4sko.broadband.iskratelecom.ru)
[06:16:21] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[06:16:21] -ghservo- [13servo] 15bors-servo 04force-pushed 06tmp from 14db97cc6 to 14d7987e4: 02http://git.io/veWu4
[06:16:21] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[06:16:23] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[06:16:23] -ghservo- [13servo] 15bors-servo 04force-pushed 06auto from 14db97cc6 to 14fced415: 02http://git.io/A9I6iA
[06:16:23] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[06:17:24] *** Joins: montezuma (Mibbit@moz-juv.9o3.252.72.IP)
[06:20:16] *** Quits: dstrbad (dstrbad@moz-30hd9v.dsl.iskon.hr) (A TLS packet with unexpected length was received.)
[06:24:26] *** Joins: valentin (icecold@moz-c8rcot.5ljq.j4c9.2f0a.2a02.IP)
[06:25:54] *** Quits: montezuma (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:30:48] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[06:30:48] -ghservo- [13servo] 15bors-servo 04force-pushed 06tmp from 14fced415 to 14d7987e4: 02http://git.io/veWu4
[06:30:48] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[06:30:53] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[06:30:53] -ghservo- [13servo] 15bors-servo pushed 0 new commits to 06tmp: 02http://git.io/vfFdo
[06:30:53] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[06:30:54] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[06:30:54] -ghservo- [13servo] 15bors-servo 04force-pushed 06auto from 14fced415 to 14cac6ef8: 02http://git.io/A9I6iA
[06:30:54] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[06:37:09] *** Quits: Temur (Tarmashirin@moz-f5i.59e.201.117.IP) (Connection closed)
[06:39:35] *** Joins: Temur (Tarmashirin@moz-f5i.59e.201.117.IP)
[06:41:47] *** Quits: gandalf (zbraniecki@moz-cp7c4m.ca.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[06:46:14] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[06:47:26] *** Joins: sillesta (sillesta@moz-501od2.business.telia.com)
[06:56:56] *** Joins: aney1 (Emanuel@moz-9t02qd.dyn.drei.com)
[06:57:38] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[06:58:55] *** Joins: aney11 (Emanuel@moz-imn7mj.dyn.drei.com)
[06:59:04] *** Joins: caitp (caitp@moz-lmogh4.cable.rogers.com)
[07:00:58] *** Quits: aney1 (Emanuel@moz-9t02qd.dyn.drei.com) (Ping timeout: 121 seconds)
[07:01:58] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[07:02:36] *** Joins: crowbot1 (nodebot@moz-p6jqu2.compute-1.amazonaws.com)
[07:02:37] *** Quits: crowbot (nodebot@moz-fsn3ka.compute-1.amazonaws.com) (A TLS packet with unexpected length was received.)
[07:03:53] *** Quits: caitp (caitp@moz-lmogh4.cable.rogers.com) (Ping timeout: 121 seconds)
[07:15:37] *** Joins: caitp- (caitp@moz-lmogh4.cable.rogers.com)
[07:17:27] *** Quits: Temur (Tarmashirin@moz-f5i.59e.201.117.IP) (Connection closed)
[07:19:25] *** Joins: Temur (Tarmashirin@moz-f5i.59e.201.117.IP)
[07:20:55] *** Quits: caitp- (caitp@moz-lmogh4.cable.rogers.com) (Ping timeout: 121 seconds)
[07:23:56] <nox> "We ought to have some new team members soon!"
[07:25:51] <nox> Manishearth, SimonSapin: Let's be an island and use Fossil.
[07:26:11] <Manishearth> nox: where does it say that?
[07:26:19] <Manishearth> or are you reading last week's twis?
[07:26:26] <nox> Manishearth: Yes.
[07:26:32] <Manishearth> ah
[07:26:33] <nox> Manishearth: And then I joked about Fossil.
[07:26:36] <nox> The two are unrelated.
[07:26:38] <Manishearth> yeah saw that
[07:26:45] <Manishearth> we should totally switch to the lkml model
[07:26:52] <Manishearth> use Git the way it was Meant To(tm)
[07:26:56] <nox> Mails and that's it?
[07:26:59] <Manishearth> git am, git format-patch, git request-pull
[07:27:02] <Manishearth> nox: yep!
[07:27:06] <Manishearth> all PRs are emails
[07:27:13] <nox> I am dubious about it.
[07:27:17] <Manishearth> heh
[07:27:26] <nox> It was refreshing to do that to fix a bug in Git itself,
[07:27:43] <Manishearth> oh there's a thread somewhere where Linus rants about the github workflow
[07:27:47] <Manishearth> entertaining
[07:27:52] <nox> Yes.
[07:28:03] <nox> He hates the GitHub edit form.
[07:28:13] <Manishearth> yeah
[07:28:31] <nox> There are many things I hate at GitHub, starting with Linguist.
[07:30:44] <nox> Manishearth: https://github.com/servo/servo/pull/5871#issuecomment-96944869 Can you make bors retry please?
[07:30:44] <crowbot1> PR #5871: Cleanup JS traits and methods - https://github.com/servo/servo/pull/5871
[07:31:55] *** Quits: dbaron (dbaron@moz-12jr9n.dynamic.fusionbroadband.com) (Ping timeout: 121 seconds)
[07:33:15] <Manishearth> nox: Ha! I bitroted you, for once! :P
[07:33:25] <nox> :)
[07:33:56] <nox> Manishearth: Thanks.
[07:34:45] *** Quits: playjax (chatzilla@moz-gkl57r.optusnet.com.au) (Ping timeout: 121 seconds)
[07:34:46] *** Quits: jinwoo_mbp2 (jinwoo@moz-t0r.chb.167.121.IP) (Quit: This computer has gone to sleep)
[07:36:54] *** Quits: capella (chatzilla@moz-jqv43v.res.rr.com) (Ping timeout: 121 seconds)
[07:39:31] *** Joins: capella (chatzilla@moz-jqv43v.res.rr.com)
[07:39:34] *** Quits: Temur (Tarmashirin@moz-f5i.59e.201.117.IP) (Connection closed)
[07:41:44] *** Joins: playjax (chatzilla@moz-haj81n.optusnet.com.au)
[07:43:24] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[07:43:24] -ghservo- [13servo] 15bors-servo merged 06auto into 06master: 02http://git.io/vfbUF
[07:43:24] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[07:43:25] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[07:43:25] -ghservo- [13servo] 15bors-servo merged 06tmp into 06auto: 02http://git.io/vfbca
[07:43:25] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[07:43:28] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[07:43:28] -ghservo- [13servo] 15bors-servo closed pull request #5874: Fix DOMImplementation.hasFeature() (06master...06hasfeature) 02http://git.io/vfdkG
[07:43:28] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[07:44:29] *** Joins: Temur (Tarmashirin@moz-f5i.59e.201.117.IP)
[07:46:32] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[07:46:32] -ghservo- [13servo] 15bors-servo 04force-pushed 06tmp from 14918b1f5 to 14cac6ef8: 02http://git.io/veWu4
[07:46:32] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[07:46:33] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[07:46:33] -ghservo- [13servo] 15bors-servo 04force-pushed 06auto from 14918b1f5 to 14f84514d: 02http://git.io/A9I6iA
[07:46:33] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[07:47:07] <nox> fatal: unable to access 'https://github.com/servo/servo/': Failed to connect to github.com port 443: Connection timed out
[07:47:11] * nox breaks pencil in hand.
[07:47:19] <nox> Manishearth: Retry again please. :(
[07:47:39] <Manishearth> network issue again cc larsberg 
[07:47:40] <Manishearth> http://build.servo.org/builders/linux1/builds/1588
[07:47:50] <Manishearth> no action needs to be taken (just letting you know it's happening again :) )
[07:48:39] *** Joins: Ms2ger (Ms2ger@moz-m2p.r4q.180.91.IP)
[07:51:48] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[07:56:06] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[07:58:48] *** Joins: jinwoo_mbp2 (jinwoo@moz-t0r.chb.167.121.IP)
[08:04:28] <nox> Ms2ger: I can resume playing with preshints once your thing is merged right?
[08:05:17] <Ms2ger> Yep
[08:05:36] * Ms2ger is severely annoyed by github
[08:05:47] *** Quits: aney11 (Emanuel@moz-imn7mj.dyn.drei.com) (Quit: Leaving.)
[08:06:21] <nox> Ms2ger: At which part?
[08:06:23] *** Joins: aney1 (Emanuel@moz-imn7mj.dyn.drei.com)
[08:06:49] <Ms2ger> http://build.servo.org/builders/linux1/builds/1588/steps/git/logs/stdio
[08:07:15] <nox> Oh right.
[08:08:16] <nox> I don't live GitHub very much, but IMO if you are going to use a different bugtracker etc, you are better off GH altogether.
[08:09:48] *** Joins: ldng (ldng@moz-q2un3b.abo.bbox.fr)
[08:10:19] <Ms2ger> Well, github makes it a lot easier to submit changes than anything else
[08:10:29] <Ms2ger> Mostly because of the network effect, of course
[08:11:12] <nox> Yes.
[08:12:02] <nox> I've been intensely pissed off at their Linguist developers in the past when they claimed some bug in their design was considered a feature.
[08:14:48] <Ms2ger> (I didn't really expect us to move right now, but I like to put the idea in people's minds every now and then :))
[08:14:51] *** Quits: Guest64 (textual@moz-6v6.a3e.152.1.IP) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[08:16:24] *** Joins: ghservo (ghservo@moz-0l2.5u0.30.192.IP)
[08:16:24] -ghservo- [13servo] 15bors-servo 04force-pushed 06tmp from 14f84514d to 14cac6ef8: 02http://git.io/veWu4
[08:16:24] *** Parts: ghservo (ghservo@moz-0l2.5u0.30.192.IP) ()
[08:16:26] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[08:16:26] -ghservo- [13servo] 15bors-servo 04force-pushed 06auto from 14f84514d to 1466d29a4: 02http://git.io/A9I6iA
[08:16:26] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[08:22:27] <Manishearth> Ms2ger: I'd like to stave off migrating as much as possible though
[08:24:14] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[08:24:14] -ghservo- [13servo] 15bors-servo 04force-pushed 06tmp from 1466d29a4 to 14cac6ef8: 02http://git.io/veWu4
[08:24:14] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[08:24:16] *** Joins: ghservo (ghservo@moz-0l2.5u0.30.192.IP)
[08:24:16] -ghservo- [13servo] 15bors-servo 04force-pushed 06auto from 1466d29a4 to 141cb012f: 02http://git.io/A9I6iA
[08:24:16] *** Parts: ghservo (ghservo@moz-0l2.5u0.30.192.IP) ()
[08:24:27] <Ms2ger> Perhaps
[08:29:02] *** Quits: ldng (ldng@moz-q2un3b.abo.bbox.fr) (Ping timeout: 121 seconds)
[08:31:16] *** Joins: caitp (caitp@moz-lmogh4.cable.rogers.com)
[08:32:41] *** Joins: laumann (thomas@moz-3v9.hq0.225.130.IP)
[08:35:50] *** Quits: caitp (caitp@moz-lmogh4.cable.rogers.com) (Ping timeout: 121 seconds)
[08:36:22] *** Quits: aney1 (Emanuel@moz-imn7mj.dyn.drei.com) (Quit: Leaving.)
[08:36:57] *** Joins: aney1 (Emanuel@moz-imn7mj.dyn.drei.com)
[08:39:46] <Ms2ger> frewsxcv, I added links to https://etherpad.mozilla.org/Servo-meeting-weekly
[08:40:44] *** Joins: caitp (caitp@moz-lmogh4.cable.rogers.com)
[08:42:18] *** Joins: ldng (ldng@moz-q2un3b.abo.bbox.fr)
[08:45:56] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[08:48:48] *** Joins: mib_4o7mtk (Mibbit@moz-juv.9o3.252.72.IP)
[08:49:58] *** Quits: caitp (caitp@moz-lmogh4.cable.rogers.com) (Ping timeout: 121 seconds)
[08:50:16] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[08:53:09] *** zz_kimundi is now known as kimundi
[09:02:31] *** Quits: burg (sid14893@moz-2ij.vkt.184.192.IP) (Ping timeout: 121 seconds)
[09:03:53] <nox> All properties that reflect an attribute can't actually do anything in their getter and setter directly and must go through the VirtualMethods if they have state to update, right?
[09:04:09] <nox> Couldn't them all be generated from a new Reflect WebIDL attribute then?
[09:05:37] *** Joins: burg (sid14893@moz-r6aeph.brockwell.irccloud.com)
[09:06:41] *** Quits: mib_4o7mtk (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:10:35] *** Joins: kmicu (kmicu@moz-uga.edn.218.91.IP)
[09:14:58] *** Quits: Jesse (jruderman@moz-pqc1f5.ca.comcast.net) (Client exited)
[09:15:38] <Ms2ger> nox, that's what WebKit does
[09:15:54] <Ms2ger> I'm not entirely convinced, myself
[09:16:24] <nox> Ms2ger: Why?
[09:16:51] <nox> Most reflecting attributes do absolutely nothing.
[09:17:28] <nox> Anyway I'll implement PutForwards first. Can't complete DOMSettableTokenList otherwise.
[09:18:16] <Ms2ger> I don't have a good explanation, it just feels like the wrong level of abstraction
[09:18:54] <nox> If you can't explain it, it's not an argument. =)
[09:19:12] <Ms2ger> I never said it was :)
[09:19:34] <nox> Given that most reflecting attributes end up as two macros uses,
[09:20:18] <Ms2ger> ... that we implement right now :)
[09:20:22] <nox> and given reflecting attributes of token lists can't use a macro without it being leaky (requires a MutNullableHeap field name),
[09:20:45] <nox> I would say the macros are the bad abstraction and my Reflect idea is the better one.
[09:21:20] <Ms2ger> You might well be right
[09:21:31] <nox> And it would enforce that no state can change from the getters and setters.
[09:21:50] <Ms2ger> On the other hand, would that allow us to call those methods from Rust?
[09:22:38] <nox> Why not?
[09:23:05] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[09:23:05] -ghservo- [13servo] 15bors-servo merged 06auto into 06master: 02http://git.io/vfbgq
[09:23:05] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[09:23:06] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[09:23:06] -ghservo- [13servo] 15bors-servo pushed 0 new commits to 06tmp: 02http://git.io/vfbHZ
[09:23:06] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[09:23:07] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[09:23:07] -ghservo- [13servo] 15bors-servo merged 06tmp into 06auto: 02http://git.io/vfbHc
[09:23:07] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[09:23:07] <nox> They could be in a new <Type>Reflections trait, in the Bindings module.
[09:23:09] *** Joins: ghservo (ghservo@moz-0l2.5u0.30.192.IP)
[09:23:09] -ghservo- [13servo] 15bors-servo closed pull request #5857: Create a new infrastructure for presentational hints. (06master...06preshints) 02http://git.io/vfymu
[09:23:09] *** Parts: ghservo (ghservo@moz-0l2.5u0.30.192.IP) ()
[09:23:14] <Ms2ger> \o/
[09:23:21] <Ms2ger> Mm, maybe that would work
[09:25:00] <nox> Ms2ger: Would we keep the macros? That's less Rust code in CodegenRust.py.
[09:25:45] <Ms2ger> I think so, yes
[09:25:59] *** Joins: jga__ (jga@moz-7oh.t1q.244.77.IP)
[09:27:04] <nox> Brace for impact btw, my PR under testing might bitrot everyone again.
[09:29:03] <Ms2ger> That reminds me
[09:29:32] <jga__> where are you in the world?
[09:29:39] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[09:29:39] -ghservo- [13servo] 15Ms2ger opened pull request #5880: Start moving Servo tests into wpt. (06master...06servo-tests) 02http://git.io/vfb7a
[09:29:39] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[09:29:41] <nox> Ms2ger: Regarding preshints, shouldn't the various get_background_color() methods be in a JSRef helper trait and go through the cast machinery instead of being methods on the raw type called after a mem::transmute() call?
[09:29:51] <nox> jga__: Who?
[09:29:58] *** Quits: ldng (ldng@moz-q2un3b.abo.bbox.fr) (Ping timeout: 121 seconds)
[09:30:06] <Ms2ger> nox, yes, if we keep them; I don't think we should
[09:30:25] <nox> Ms2ger: Don't we need them?
[09:30:36] <jga__> all you awake people, I've just moved to London and it's strange to find people awake at this hours in irc :p
[09:30:42] <Ms2ger> Belgium here
[09:30:48] <nox> jga__: Paris.
[09:31:10] * nox is currently going to work.
[09:31:13] <Ms2ger> I'm planning to store the computed data in the AttrValue, and just have my method loop over the attributes
[09:31:48] <jga__> cool
[09:31:56] <nox> Ms2ger: Should I stay away from preshints for now then?
[09:32:14] <Ms2ger> Nah, go ahead, I'll deal
[09:32:19] <nox> Ok.
[09:32:27] <jga__> Ms2ger, can you retry on #5845?
[09:32:27] <crowbot1> Issue #5845: Fix defineProperty codegen - https://github.com/servo/servo/pull/5845
[09:32:47] <jga__> the bot is having trouble doing git clone?
[09:32:48] <nox> Well if I continue lie this I'm even going to lose track of wtf I'm doing.
[09:32:49] <Ms2ger> jga__, I'll go through the list later
[09:33:01] <jga__> ok
[09:33:26] *** jga__ is now known as jga
[09:33:41] <Ms2ger> nox, I might wait to do that until I moved everything to the new infra, though
[09:39:01] *** Joins: caitp (caitp@moz-lmogh4.cable.rogers.com)
[09:40:03] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[09:41:01] <nox> Ok.
[09:43:18] *** Quits: caitp (caitp@moz-lmogh4.cable.rogers.com) (Ping timeout: 121 seconds)
[09:44:23] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[09:51:20] *** Joins: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr)
[09:52:35] *** Joins: ldng (ldng@moz-q2un3b.abo.bbox.fr)
[09:59:42] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[09:59:42] -ghservo- [13servo] 15bors-servo merged 06auto into 06master: 02http://git.io/vfbHc
[09:59:42] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[09:59:43] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[09:59:43] -ghservo- [13servo] 15bors-servo merged 06tmp into 06auto: 02http://git.io/vfNev
[09:59:43] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[09:59:46] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[09:59:46] -ghservo- [13servo] 15bors-servo closed pull request #5871: Cleanup JS traits and methods (06master...06rootable) 02http://git.io/vfQha
[09:59:46] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[10:00:50] <nox> I bitrotted myselfâ€¦
[10:01:58] *** Joins: mib_t83chd (Mibbit@moz-juv.9o3.252.72.IP)
[10:02:33] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[10:02:33] -ghservo- [13servo] 15bors-servo 04force-pushed 06tmp from 142a1d319 to 14b8ae33e: 02http://git.io/veWu4
[10:02:33] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[10:02:34] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[10:02:34] -ghservo- [13servo] 15bors-servo merged 06auto into 06tmp: 02http://git.io/vfNvk
[10:02:34] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[10:09:18] *** Joins: caitp (caitp@moz-lmogh4.cable.rogers.com)
[10:10:17] <Ms2ger> nox, that just means you're doing a great job :)
[10:11:12] *** Quits: slyu (slyu@moz-aj9ejj.HINET-IP.hinet.net) (Quit: Leaving.)
[10:13:03] *** Joins: dstrbad (dstrbad@moz-30hd9v.dsl.iskon.hr)
[10:13:39] *** Quits: caitp (caitp@moz-lmogh4.cable.rogers.com) (Ping timeout: 121 seconds)
[10:19:53] *** Joins: caitp (caitp@moz-lmogh4.cable.rogers.com)
[10:20:00] *** Joins: Jesse (jruderman@moz-pqc1f5.ca.comcast.net)
[10:21:20] *** Quits: mib_t83chd (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:22:13] *** Quits: Temur (Tarmashirin@moz-f5i.59e.201.117.IP) (Ping timeout: 121 seconds)
[10:22:26] *** Joins: jviereck (Adium@moz-46mgu8.ethz.ch)
[10:24:17] *** Quits: caitp (caitp@moz-lmogh4.cable.rogers.com) (Ping timeout: 121 seconds)
[10:27:25] *** Quits: jga (jga@moz-7oh.t1q.244.77.IP) (Ping timeout: 121 seconds)
[10:31:54] *** Joins: Temur (Tarmashirin@moz-f5i.59e.201.117.IP)
[10:32:23] *** Joins: caitp (caitp@moz-lmogh4.cable.rogers.com)
[10:32:24] *** Quits: Temur (Tarmashirin@moz-f5i.59e.201.117.IP) (Quit: Leaving)
[10:32:29] *** Joins: Temur (Tarmashirin@moz-f5i.59e.201.117.IP)
[10:34:17] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[10:36:38] *** Quits: Temur (Tarmashirin@moz-f5i.59e.201.117.IP) (Ping timeout: 121 seconds)
[10:37:03] *** Joins: Temur (Tarmashirin@moz-f5i.59e.201.117.IP)
[10:38:33] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[10:39:42] *** Quits: caitp (caitp@moz-lmogh4.cable.rogers.com) (Ping timeout: 121 seconds)
[10:40:45] *** Quits: jviereck (Adium@moz-46mgu8.ethz.ch) (Quit: Leaving.)
[10:44:18] *** Quits: nrc (nrc@moz-9v1svd.xtra.co.nz) (Ping timeout: 121 seconds)
[10:44:23] <jgraham> I hate naming things
[10:47:52] <jgraham> I already have a WebDriverCommand, and I want a name for a type that gets sent from the webdriver server to the constellation, *and* a name for the constellation_msg::Msg variant that wraps it
[10:48:24] <jgraham> WebDriverCommandMsgMsg(WebDriverCommandMsg) is just taking the piss
[10:49:05] *** Quits: playjax (chatzilla@moz-haj81n.optusnet.com.au) (Connection closed)
[10:49:14] <jgraham> (also, there is no consistency in the existing naming)
[10:49:56] *** Quits: aney1 (Emanuel@moz-imn7mj.dyn.drei.com) (Quit: Leaving.)
[10:50:32] *** Joins: aney1 (Emanuel@moz-imn7mj.dyn.drei.com)
[10:50:34] *** Quits: Temur (Tarmashirin@moz-f5i.59e.201.117.IP) (Connection closed)
[10:51:38] *** Joins: Temur (Tarmashirin@moz-f5i.59e.201.117.IP)
[11:02:28] <nox> jgraham: I don't get it.
[11:02:44] <nox> constellation_msg::Msg::WebDriverCommand(WebDriverCommandMsg)
[11:03:02] <nox> Why the suffix on the constellation_msg::Msg constructor?
[11:04:28] *** Joins: Tarmashirin (Tarmashirin@moz-rue.8s5.91.59.IP)
[11:05:43] *** Quits: Caspy7 (chatzilla@moz-q45ho1.6qgi.ef7f.0306.2602.IP) (Ping timeout: 121 seconds)
[11:07:41] *** Quits: Temur (Tarmashirin@moz-f5i.59e.201.117.IP) (Ping timeout: 121 seconds)
[11:08:26] <jgraham> nox: Because WebDriverCommand is already a thing (the message type from the server)
[11:08:34] <nox> jgraham: So?
[11:08:37] *** Quits: Tarmashirin (Tarmashirin@moz-rue.8s5.91.59.IP) (Quit: Leaving)
[11:08:41] <nox> jgraham: It's an enum constructor, it's namespaced.
[11:09:05] <jgraham> nox: Using the same name for different things in the same file seems very confusing
[11:09:05] <nox> And if the type is a message type, why isn't it itself suffixed?
[11:09:15] <nox> I would rather put the suffixes on the types than on the constructors.
[11:09:45] <nox> (Hence why I said WebDriverCommand(WebDriverCommandMsg) and not WebDriverCommand(WebDriverCommand).)
[11:10:30] <jgraham> Well that's not how MozBrowserEventMsg works, which is the closest analouge in the existing code
[11:11:00] *** Quits: bdero (bran@moz-lbs.91h.47.73.IP) (Ping timeout: 121 seconds)
[11:11:50] <nox> That just means MozBrowserEventMsg is a bad name too that's all. :)
[11:12:22] <nox> The suffix "Error" was recently dropped from dom::error::Error's constructors.
[11:12:55] *** Joins: ghservo (ghservo@moz-0l2.5u0.30.192.IP)
[11:12:55] -ghservo- [13servo] 15bors-servo merged 06auto into 06master: 02http://git.io/vfNvk
[11:12:55] *** Parts: ghservo (ghservo@moz-0l2.5u0.30.192.IP) ()
[11:13:00] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[11:13:00] -ghservo- [13servo] 15bors-servo closed pull request #5878: layout: Make the style-specified width affect minimum width. (06master...06intrinsic-style-specified-width) 02http://git.io/vfFmf
[11:13:00] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[11:13:17] *** Joins: nrc (nrc@moz-9v1svd.xtra.co.nz)
[11:13:42] <nox> jgraham: CanvasMsg is a counterexample.
[11:13:51] <nox> CanvasMsg::Canvas2d(Canvas2dMsg).
[11:14:16] *** Quits: ldng (ldng@moz-q2un3b.abo.bbox.fr) (Ping timeout: 121 seconds)
[11:16:58] *** Joins: ghservo (ghservo@moz-0l2.5u0.30.192.IP)
[11:16:58] -ghservo- [13servo] 15nox opened issue #5881: Introduce a new WebIDL attribute named Reflect 02http://git.io/vfNBq
[11:16:58] *** Parts: ghservo (ghservo@moz-0l2.5u0.30.192.IP) ()
[11:17:22] <nox> jgraham: Should I file an issue for these renaming shenanigans?
[11:17:55] <jgraham> nox: Sure, I guess
[11:18:13] *** Quits: nrc (nrc@moz-9v1svd.xtra.co.nz) (Ping timeout: 121 seconds)
[11:18:17] <jgraham> I guess Msg::WebDriver(WebDriverCommandMsg) is fine for my needs
[11:18:40] <nox> Not WebDriverCommand?
[11:20:01] *** Joins: marcusklaas (marcus@moz-14bm7d.upc-g.chello.nl)
[11:20:29] *** Quits: aney1 (Emanuel@moz-imn7mj.dyn.drei.com) (Quit: Leaving.)
[11:20:42] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[11:20:42] -ghservo- [13servo] 15nox opened issue #5882: Uniformise the various Msg types 02http://git.io/vfNRG
[11:20:42] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[11:21:01] *** Joins: aney1 (Emanuel@moz-imn7mj.dyn.drei.com)
[11:23:27] <nox> Manishearth: Btw, following your no_move lint,
[11:23:42] <nox> Manishearth: https://github.com/servo/servo/issues/5724 I still can't explain this.
[11:23:43] <crowbot1> Issue #5724: Write a lint to flag moving Root values - https://github.com/servo/servo/issues/5724
[11:23:46] <nox> â€¦
[11:24:01] <nox> Manishearth: https://github.com/servo/servo/issues/5720 This.
[11:24:02] <crowbot1> Issue #5720: Inexplicable unrooting ordering error - https://github.com/servo/servo/issues/5720
[11:26:05] *** Joins: Temur (Tarmashirin@moz-rue.8s5.91.59.IP)
[11:26:07] <nox> (The faulty code still compiles with your lint, in case that wasn't sure.)
[11:28:10] *** Joins: jviereck (Adium@moz-8950tu.bmup.g469.067c.2001.IP)
[11:28:25] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[11:28:32] *** Quits: Jesse (jruderman@moz-pqc1f5.ca.comcast.net) (Client exited)
[11:31:02] *** Quits: jviereck (Adium@moz-8950tu.bmup.g469.067c.2001.IP) (Connection closed)
[11:32:43] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[11:34:58] *** Joins: ldng (ldng@moz-q2un3b.abo.bbox.fr)
[11:35:14] *** Quits: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr) (Connection closed)
[11:36:03] *** Quits: jinwoo_mbp2 (jinwoo@moz-t0r.chb.167.121.IP) (Quit: Leaving)
[11:42:36] *** Joins: bogdan_maris (Instantbird@moz-662.esi.231.62.IP)
[11:51:03] *** Quits: aney1 (Emanuel@moz-imn7mj.dyn.drei.com) (Quit: Leaving.)
[11:51:38] *** Joins: aney1 (Emanuel@moz-imn7mj.dyn.drei.com)
[12:03:09] *** Quits: Temur (Tarmashirin@moz-rue.8s5.91.59.IP) (Connection closed)
[12:03:10] *** Joins: Temur (Tarmashirin@moz-rue.8s5.91.59.IP)
[12:04:20] *** Joins: bdero (bran@moz-mqs.7dh.189.18.IP)
[12:06:17] *** Joins: Tarmashirin (Tarmashirin@moz-rue.8s5.91.59.IP)
[12:06:27] *** Quits: Temur (Tarmashirin@moz-rue.8s5.91.59.IP) (Connection closed)
[12:07:36] *** Joins: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr)
[12:07:42] *** Joins: m_khvoinitsky (quassel@moz-bkl6sn.d57a.lq23.04f8.2a01.IP)
[12:09:52] *** Quits: bdero (bran@moz-mqs.7dh.189.18.IP) (Ping timeout: 121 seconds)
[12:11:52] *** Joins: bdero (bran@moz-mqs.7dh.189.18.IP)
[12:11:56] *** Quits: Tarmashirin (Tarmashirin@moz-rue.8s5.91.59.IP) (Connection closed)
[12:13:54] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[12:13:54] -ghservo- [13servo] 15bors-servo pushed 0 new commits to 06tmp: 02http://git.io/vfNMW
[12:13:54] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[12:13:55] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[12:13:55] -ghservo- [13servo] 15bors-servo merged 06tmp into 06auto: 02http://git.io/vfNMl
[12:13:55] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[12:22:35] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[12:23:24] *** Joins: caitp- (caitp@moz-lmogh4.cable.rogers.com)
[12:24:25] *** Quits: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr) (Connection closed)
[12:24:48] *** Joins: Temur (Tarmashirin@moz-rue.8s5.91.59.IP)
[12:26:32] *** Joins: jdm (jdm@moz-ilbt2e.cable.teksavvy.com)
[12:26:32] *** ChanServ sets mode: +qo jdm jdm
[12:26:53] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[12:27:16] *** Joins: ahal (ahal@moz-b8e0a0.cpe.pppoe.ca)
[12:27:54] *** Quits: caitp- (caitp@moz-lmogh4.cable.rogers.com) (Ping timeout: 121 seconds)
[12:28:25] *** AutomatedTester|AFK is now known as AutomatedTester
[12:29:18] *** Joins: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr)
[12:34:25] *** Joins: caitp (caitp@moz-lmogh4.cable.rogers.com)
[12:38:32] *** Quits: caitp (caitp@moz-lmogh4.cable.rogers.com) (Ping timeout: 121 seconds)
[12:38:50] *** Joins: jga (jga@moz-7oh.t1q.244.77.IP)
[12:43:40] *** Quits: filsmick (filsmick@moz-bar7fk.abo.wanadoo.fr) (Quit: )
[12:45:41] <jga> is there an issue for the bots connection problem?
[12:46:24] *** Quits: jga (jga@moz-7oh.t1q.244.77.IP) (Connection closed)
[12:46:31] *** Joins: jga (jga@moz-7oh.t1q.244.77.IP)
[12:51:31] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[12:51:31] -ghservo- [13servo] 15bors-servo merged 06auto into 06master: 02http://git.io/vfNMl
[12:51:31] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[12:51:32] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[12:51:32] -ghservo- [13servo] 15bors-servo pushed 0 new commits to 06tmp: 02http://git.io/vfNxk
[12:51:32] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[12:51:33] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[12:51:33] -ghservo- [13servo] 15bors-servo merged 06auto into 06tmp: 02http://git.io/vfNxL
[12:51:33] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[12:51:35] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[12:51:35] -ghservo- [13servo] 15bors-servo closed pull request #5694: layout: Generate anonymous table objects as necessary per CSS 2.1 Â§ 17.2.1. (06master...06anonymous-table-objects) 02http://git.io/vv0OQ
[12:51:35] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[12:52:24] *** Quits: ldng (ldng@moz-q2un3b.abo.bbox.fr) (Ping timeout: 121 seconds)
[12:54:11] *** Quits: Temur (Tarmashirin@moz-rue.8s5.91.59.IP) (Connection closed)
[12:54:19] <jdm> jga: nope!
[12:54:34] *** Joins: Temur (Tarmashirin@moz-rue.8s5.91.59.IP)
[12:57:40] *** Joins: ldng (ldng@moz-q2un3b.abo.bbox.fr)
[13:00:37] *** Joins: deokjinkim (Mibbit@moz-g81.0bj.108.114.IP)
[13:02:15] *** Joins: caitp (caitp@moz-lmogh4.cable.rogers.com)
[13:15:38] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[13:16:55] <Manishearth> nox: can't follow what?
[13:17:13] <Manishearth> > try!(doc.r().node_from_nodes_and_strings(nodes)).root();
[13:17:17] <Manishearth> that's the problem
[13:17:19] <Manishearth> temporaries
[13:17:31] <nox> What?
[13:19:40] *** Quits: Temur (Tarmashirin@moz-rue.8s5.91.59.IP) (Ping timeout: 121 seconds)
[13:20:37] *** Joins: eibwen (eibwen@moz-7rm68g.dip0.t-ipconnect.de)
[13:20:46] <nox> Manishearth: Isn't the idiom "match optional_temporary { Some(t) => t, None => return â€¦ }.root();" common?
[13:22:37] <Manishearth> no
[13:23:26] <nox> Manishearth: https://github.com/nox/servo/blob/b8ae33e510ea30e3200834fc2f7fbc426b86701e/components/script/dom/node.rs#L1223-1230
[13:24:06] <nox> https://github.com/nox/servo/blob/b8ae33e510ea30e3200834fc2f7fbc426b86701e/components/script/dom/document.rs#L525-534
[13:24:41] *** Joins: caitp- (caitp@moz-lmogh4.cable.rogers.com)
[13:26:10] <Manishearth> nox: that's okay
[13:26:13] *** Quits: deokjinkim (Mibbit@moz-g81.0bj.108.114.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:26:23] <Manishearth> there's no additional rooting there
[13:26:31] <Manishearth> when i say temporary I don't mean Temporary
[13:26:35] <Manishearth> I mean a temporary
[13:26:46] <nox> Ah.
[13:26:53] <nox> What's the problem with it being a temporary?
[13:26:56] *** Joins: Temur (Tarmashirin@moz-rue.8s5.91.59.IP)
[13:27:01] <nox> Why does the order change because of this?
[13:27:04] <Manishearth> let   (get_temp().root()).r().fn().root()
[13:27:11] <Manishearth> the stuf in the parens is a temporary Root
[13:27:22] <Manishearth> it dies out after the let expr ends
[13:27:26] <Manishearth> so
[13:27:39] <nox> Yes but there is only one value rooted there.
[13:27:56] <Manishearth> no there isn't
[13:28:52] <Manishearth> nox: https://manishearth.pastebin.mozilla.org/8831621
[13:28:57] <Ms2ger> In try!(doc.r().node_from_nodes_and_strings(nodes)).root();?
[13:29:00] *** Quits: caitp- (caitp@moz-lmogh4.cable.rogers.com) (Ping timeout: 121 seconds)
[13:29:10] <nox> I don't see why self.next_sibling().root() should be dropped after node.
[13:29:26] <nox> Manishearth: Where do you see two consecutive .root() in my code exactly?
[13:29:40] <nox> Ms2ger: How do I compile an arbitrary Rust file from Servo to LLVM code?
[13:30:09] *** Joins: deokjinkim (Mibbit@moz-g81.0bj.108.114.IP)
[13:30:10] <Ms2ger> Not my forte
[13:30:45] <Ms2ger> I think there's a flag to rustc?
[13:30:47] <Manishearth> nox: match ElementCast::to_ref(node.r() 
[13:30:50] <Manishearth> that creates an rvalue
[13:31:10] <Manishearth> the rvalue is dropped at the end of the match blo
[13:31:13] <Manishearth> *block
[13:31:16] <nox> That's a JSRef, not a Root.
[13:31:24] <Manishearth> d'oh
[13:31:29] <Manishearth> hm
[13:31:43] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[13:31:43] -ghservo- [13servo] 15bors-servo merged 06auto into 06homu-tmp: 02http://git.io/vfAmM
[13:31:43] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[13:31:54] <nox> And I don't see that in my code.
[13:32:17] <Manishearth> nox: where is the assertion there?
[13:32:32] <Manishearth> which two variables?
[13:32:46] *** Joins: mccr8 (mccr8@moz-8du2kt.east.verizon.net)
[13:32:51] <nox> Manishearth: https://github.com/servo/servo/issues/5720 Node::pre_insert call.
[13:32:51] <crowbot1> Issue #5720: Inexplicable unrooting ordering error - https://github.com/servo/servo/issues/5720
[13:33:12] *** Quits: Temur (Tarmashirin@moz-rue.8s5.91.59.IP) (Connection closed)
[13:33:20] <Manishearth> nox:  match self.parent_node.root()
[13:33:23] <Manishearth> that's an rvalue
[13:33:26] <Manishearth> Hm
[13:33:38] <nox> That's a Temporary, not a Root.
[13:33:43] <Manishearth> perhaps it would make life easier if we just made the lint overzealous on the rvalues :)
[13:33:53] <Manishearth> nox: .root() makes it a Root
[13:34:05] <Manishearth> but isnce it's in a match block like that, it's a temporary Root
[13:34:10] <nox> Nevermind I wasn't looking at the right code.
[13:34:21] <Manishearth> i can tweak the link to work with rvalues
[13:34:24] <Manishearth> *lint
[13:34:28] <Manishearth> it might even solve fifo
[13:34:45] <nox> Manishearth: I don't see why it should be dropped not in order either,
[13:34:50] <nox> I only borrow it in the match,
[13:35:07] <nox> shouldn't it wait for the end of the borrow to be dropped?
[13:36:01] <Manishearth> nox: oh sorry I misread that
[13:36:23] *** Joins: Temur (Tarmashirin@moz-rue.8s5.91.59.IP)
[13:36:47] <SimonSapin> crowbot1: ping pcwalton ping https://github.com/servo/servo/pull/5480
[13:36:47] <crowbot1> PR #5480: Preliminary steps for CSS Multi-column Layout - https://github.com/servo/servo/pull/5480
[13:38:35] <Manishearth> nox: pre_insert roots internally
[13:38:41] <Manishearth> that *could* be it
[13:38:52] <Manishearth> in which case i better turn on rvalue errors
[13:39:54] <nox> Values rooted in pre_insert are rooted after its caller roots anything and they can't be dropped after the caller drops,
[13:40:33] <nox> I don't return any root from Node::pre_insert so it would be weird.
[13:40:39] <Manishearth> hm
[13:41:06] <nox> And all the roots in the after call are actually passed to Node::insert as JSRefs,
[13:41:24] <Manishearth> yeah
[13:41:28] <nox> so nothing can be dropped before the call by TCO or whatnot.
[13:41:38] <Manishearth> but the question is, when an rvalue is created for a method call, when does its destructor get run?
[13:41:47] *** Quits: Temur (Tarmashirin@moz-rue.8s5.91.59.IP) (Connection closed)
[13:42:16] <nox> Manishearth: Judging by foo.root().r().bar().root()'s behaviour, I would say ASAP.
[13:42:31] <Manishearth> no that's not possible
[13:42:48] <Manishearth> the jsref needs to stay alive for the duration of the preinsert 
[13:42:55] <Ms2ger> End of the statement
[13:42:56] * Manishearth tries something
[13:43:47] *** AutomatedTester is now known as AutomatedTester|AFK
[13:43:58] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[13:45:07] <nox> Manishearth: What do you mean it's not possible?
[13:45:26] <nox> Once .bar() has been called, nothing holds onto foo.root().r() anymore.
[13:45:43] <Manishearth> well that worked fine
[13:45:49] <Manishearth> http://is.gd/YbqekR
[13:47:11] <nox> What's that supposed to show?
[13:48:15] <nox> I don't know how to emit LLVM IR. :(
[13:48:24] <Manishearth> no just execute it
[13:48:33] <Manishearth> nox: not showing naything, that's whatI was trying
[13:48:43] <Manishearth> it didn't work
[13:48:51] <Manishearth> clearly there's something worse at play
[13:49:21] <nox> Oh ok.
[13:50:08] *** Joins: Temur (Tarmashirin@moz-rue.8s5.91.59.IP)
[13:52:19] <nox> Manishearth: How do I use Servo's rustc directly?
[13:52:32] <Manishearth> nox: ./mach rustc
[13:52:37] <Manishearth> also ./mach cargo exists
[13:53:11] <nox> Thanks.
[13:53:25] <nox> Compiling to LLVM-IRâ€¦
[13:53:35] <mbrubeck> Manishearth, nox: Using a temporary doesn't change the order in your example, but it does change where the drop happens: http://is.gd/TpCuml
[13:53:38] <Manishearth> no, why would I ?
[13:54:10] <Manishearth> mbrubeck: huh
[13:54:25] *** Joins: alex-abreu (alex@moz-j54ho8.biz.rr.com)
[13:54:27] *** Quits: Temur (Tarmashirin@moz-rue.8s5.91.59.IP) (Connection closed)
[13:54:32] <Manishearth> mbrubeck: yeah, but that seems irrelevant here
[13:54:33] <Manishearth> I think
[13:55:04] <mbrubeck> yeah, I can't see how it would change the order in `after`
[13:55:04] <nox> It does.
[13:55:09] <nox> End main
[13:55:09] <nox> Dropped 3
[13:55:17] <nox> It doesn't.
[13:55:23] *** Joins: Temur (Tarmashirin@moz-rue.8s5.91.59.IP)
[13:55:35] <nox> I forgot that the last call doesn't return a root.
[13:55:55] <Manishearth> :)
[13:56:00] <Manishearth> returning a root causes issues
[13:56:05] <Manishearth> your case is ... special
[13:56:19] <Manishearth> it gets fixed by banning root temporaries from being used in anywhere but a let statement
[13:56:22] <Manishearth> but.
[13:56:36] <Manishearth> I have no idea why that happens
[13:56:58] <Manishearth> nox: could you step through that code in a debugger and find out exactly where drop is being called?
[13:57:07] <Manishearth> IIRC on rooting and on drop Root calls debug!()
[13:57:40] <nox> I will look at the LLVM-IR first.
[13:58:43] <Manishearth> cool
[13:59:19] *** Joins: syrobee (smuxi@moz-0o36lq.as13285.net)
[14:00:34] *** Quits: jdm (jdm@moz-ilbt2e.cable.teksavvy.com) (Quit: )
[14:01:30] *** Quits: nattokirai (nattokirai@moz-rq9a8e.asahi-net.or.jp) (Client exited)
[14:04:29] *** Joins: dstrbad_ (dstrbad@moz-6an0vh.dsl.iskon.hr)
[14:05:15] *** Quits: marcusklaas (marcus@moz-14bm7d.upc-g.chello.nl) (A TLS packet with unexpected length was received.)
[14:07:05] *** Quits: dstrbad (dstrbad@moz-30hd9v.dsl.iskon.hr) (Ping timeout: 121 seconds)
[14:08:44] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[14:08:44] -ghservo- [13servo] 15bors-servo pushed 0 new commits to 06tmp: 02http://git.io/vfAut
[14:08:44] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[14:08:46] *** Joins: ghservo (ghservo@moz-0l2.5u0.30.192.IP)
[14:08:46] -ghservo- [13servo] 15bors-servo merged 06tmp into 06auto: 02http://git.io/vfAum
[14:08:46] *** Parts: ghservo (ghservo@moz-0l2.5u0.30.192.IP) ()
[14:08:48] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[14:08:48] -ghservo- [13servo] 15bors-servo closed pull request #5845: Fix defineProperty codegen (06master...06defineProperty_fix) 02http://git.io/vfXen
[14:08:48] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[14:09:54] *** Joins: mwu (mwu@moz-of5il1.hntd.7296.000c.2601.IP)
[14:10:05] *** Quits: alex-abreu (alex@moz-j54ho8.biz.rr.com) (Ping timeout: 121 seconds)
[14:12:11] *** Joins: alex-abreu (alex@moz-j54ho8.biz.rr.com)
[14:13:20] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[14:13:23] <jgraham> This whole "servo eating all my ram when it crashes" thing is getting pretty old
[14:13:48] <Manishearth> sadly njn is on vacation :p
[14:14:52] <jgraham> You were supposed to say something like "don't worry, it's fixed in the rustup which we're about to land"Â :p
[14:16:47] <Ms2ger> It is, though
[14:16:59] <Ms2ger> Except that one hits another compiler bug
[14:17:29] <SimonSapin> Felix is working on thaâ€¦ heâ€™s gone.
[14:20:46] <jgraham> Ms2ger: So, not so much with the "which we're about to land" :)
[14:21:17] <Ms2ger> Uhuh
[14:21:58] <evilpie> Ms2ger: #5857 looks interesting. I think I will try to use that approach for my pull request
[14:21:58] <crowbot1> Issue #5857: Create a new infrastructure for presentational hints. - https://github.com/servo/servo/pull/5857
[14:22:05] <mwu> is the rustup landing soon
[14:22:21] <Ms2ger> Go me :)
[14:22:26] <SimonSapin> mwu: weâ€™re blocked on https://github.com/rust-lang/rust/issues/24687
[14:22:27] <crowbot1> Issue #24687: ICE in codemap::CodeMap::bytepos_to_file_charpos - https://github.com/rust-lang/rust/issues/24687
[14:22:29] <Ms2ger> mwu, unclear
[14:22:34] <SimonSapin> or on an ICE that looks just like it
[14:22:37] <mwu> ah
[14:23:55] <mwu> do we ever backport rust fixes, or are we just going to pick up a rust after a fix lands?
[14:24:49] <Ms2ger> We sometimes do
[14:24:55] <Ms2ger> It's been a while, though, I think
[14:24:59] <mwu> ah
[14:25:14] *** Joins: caitp- (caitp@moz-lmogh4.cable.rogers.com)
[14:26:17] <larsberg> Yeah, it's been at least three updates. We used to have to cherry pick because we would often go from one ICE to another if we upgraded
[14:26:28] <mwu> makes sense
[14:26:34] <larsberg> That's not as true anymore and we can often just update
[14:28:04] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[14:28:04] -ghservo- [13rust-png] 15jgraham opened pull request #68: Add to_vec function for writing PNG data to a Vec<u8>. (06master...06to_vec) 02http://git.io/vfAKs
[14:28:04] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[14:29:55] *** Quits: caitp- (caitp@moz-lmogh4.cable.rogers.com) (Ping timeout: 121 seconds)
[14:41:37] *** Joins: hyunjune (Mibbit@moz-54l.vhi.163.221.IP)
[14:44:17] *** Joins: jdm (jdm@moz-4vu.06r.98.75.IP)
[14:44:17] *** ChanServ sets mode: +qo jdm jdm
[14:46:24] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[14:46:24] -ghservo- [13servo] 15bors-servo merged 06auto into 06master: 02http://git.io/vfAum
[14:46:24] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[14:46:28] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[14:46:28] -ghservo- [13servo] 15bors-servo closed pull request #5877: Remove node dirty on img width/height that is no longer needed. (06master...06img-cache-tidy) 02http://git.io/vfdrA
[14:46:28] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[14:46:46] <hyunjune> @jdm, Hello, It has been a long time.
[14:46:53] <jdm> hi hyunjune!
[14:47:19] <hyunjune> I have some question about SVG.
[14:47:25] <hyunjune> on gecko.
[14:47:41] <hyunjune> In the gecko, when select text on svg inline text, What algorithm use on gecko layout engine?
[14:48:03] <hyunjune> If you know, Could you tell me this?
[14:48:05] <jdm> I honestly have no clue :)
[14:48:10] <jdm> hyunjune: #layout is more likely
[14:48:23] <hyunjune> Ok :) thank you.
[14:51:23] *** Joins: Tarmashirin (Tarmashirin@moz-rue.8s5.91.59.IP)
[14:51:29] *** Joins: Jackneill (Jackneill@moz-j386q9.pool.digikabel.hu)
[14:52:21] *** Quits: Temur (Tarmashirin@moz-rue.8s5.91.59.IP) (Connection closed)
[14:56:02] *** Quits: mccr8 (mccr8@moz-8du2kt.east.verizon.net) (Ping timeout: 121 seconds)
[14:56:08] *** Quits: hyunjune (Mibbit@moz-54l.vhi.163.221.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:56:25] *** Joins: hyunjune (Mibbit@moz-54l.vhi.163.221.IP)
[14:56:33] *** Joins: mccr8 (mccr8@moz-8du2kt.east.verizon.net)
[15:02:51] *** Quits: bogdan_maris (Instantbird@moz-662.esi.231.62.IP) (Client exited)
[15:04:27] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Connection closed)
[15:04:49] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[15:07:36] *** Quits: laumann (thomas@moz-3v9.hq0.225.130.IP) (Ping timeout: 121 seconds)
[15:08:24] *** Quits: Tarmashirin (Tarmashirin@moz-rue.8s5.91.59.IP) (Connection closed)
[15:10:44] *** Quits: dstrbad_ (dstrbad@moz-6an0vh.dsl.iskon.hr) (A TLS packet with unexpected length was received.)
[15:11:47] *** Joins: dstrbad (dstrbad@moz-6an0vh.dsl.iskon.hr)
[15:12:28] <jdm> crowbot1: what should I work on?
[15:12:29] <crowbot1> jdm: write a better spec for offline web applications (http://www.whatwg.org/specs/web-apps/current-work/multipage/offline.html#offline)
[15:12:34] <jdm> nooooooooo
[15:13:37] <froydnj> jdm: take your medicine, it's good for you
[15:14:03] <jdm> this medicine will not improve my quality of life
[15:14:34] <froydnj> known side effects may include hair loss, lack of sleep, anxiety
[15:16:45] *** Joins: Temur (Tarmashirin@moz-rue.8s5.91.59.IP)
[15:18:38] *** Quits: aney1 (Emanuel@moz-imn7mj.dyn.drei.com) (Ping timeout: 121 seconds)
[15:20:05] *** Joins: aney1 (Emanuel@moz-ja1p0h.dyn.drei.com)
[15:21:17] *** Quits: vodik (simon@moz-86ind4.dedicated.allstream.net) (Connection closed)
[15:21:48] *** Quits: Temur (Tarmashirin@moz-rue.8s5.91.59.IP) (Ping timeout: 121 seconds)
[15:23:17] *** Joins: Temur (Tarmashirin@moz-rue.8s5.91.59.IP)
[15:23:55] <Ms2ger> jgraham, jdm: r? #5880
[15:23:56] <crowbot1> Issue #5880: Start moving Servo tests into wpt. - https://github.com/servo/servo/pull/5880
[15:24:46] <jdm> Ms2ger: what's the deal with https://github.com/Ms2ger/servo/commit/5e85dc9254dfd3318d290245803ce47e039ffdc7#diff-17b8fa9e133e1a12b46ec084d627ebb7R31 ?
[15:26:52] <jgraham> Ms2ger: Sure, need to line up some ducks first
[15:27:25] <jdm> Ms2ger: otherwise all of those commits look fine to me
[15:27:32] <Ms2ger> jdm, what do you mean?
[15:27:53] *** Joins: caitp- (caitp@moz-lmogh4.cable.rogers.com)
[15:27:54] <Ms2ger> It makes us test createElement("SPAN") as well as "span"
[15:28:01] <jdm> ah, ok
[15:28:32] *** mccr8 is now known as mccr8|away
[15:29:35] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[15:29:35] -ghservo- [13servo] 15bors-servo pushed 0 new commits to 06tmp: 02http://git.io/vfxLr
[15:29:35] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[15:29:36] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[15:29:36] -ghservo- [13servo] 15bors-servo merged 06auto into 06tmp: 02http://git.io/vfxL6
[15:29:36] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[15:31:01] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[15:32:35] *** Quits: caitp- (caitp@moz-lmogh4.cable.rogers.com) (Ping timeout: 121 seconds)
[15:35:01] *** Joins: sprocket (Mibbit@moz-juv.9o3.252.72.IP)
[15:35:33] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[15:36:54] *** Joins: vodik (simon@moz-86ind4.dedicated.allstream.net)
[15:37:52] *** Joins: gandalf (zbraniecki@moz-cp7c4m.ca.comcast.net)
[15:38:26] *** Joins: dbaron (dbaron@moz-12jr9n.dynamic.fusionbroadband.com)
[15:38:40] *** Quits: jgallagher (john@moz-6ge.dhn.131.24.IP) (Ping timeout: 121 seconds)
[15:41:29] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[15:42:55] *** Quits: sprocket (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:45:44] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[15:47:58] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[15:47:58] -ghservo- [13servo] 15Ms2ger created 06dialog (+1 new commit): 02http://git.io/vfxcG
[15:47:58] -ghservo- 13servo/06dialog 1450ea682 15Dave Hodder: Add attributes to the HTMLDialogElement interface.
[15:47:58] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[15:48:11] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[15:48:23] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[15:48:23] -ghservo- [13servo] 15Ms2ger opened pull request #5883: Add attributes to the HTMLDialogElement interface. (06master...06dialog) 02http://git.io/vfxc2
[15:48:23] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[15:48:49] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[15:48:55] *** Joins: ghservo (ghservo@moz-0l2.5u0.30.192.IP)
[15:48:55] -ghservo- [13servo] 15Ms2ger closed pull request #5653: Add attributes to HTMLDialogElement interface (06master...06master) 02http://git.io/vvIa5
[15:48:55] *** Parts: ghservo (ghservo@moz-0l2.5u0.30.192.IP) ()
[15:53:12] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[15:53:45] *** mccr8|away is now known as mccr8
[15:54:40] <nox> jdm: Mmmh, wouldn't it be even better if all interface types went through FromJSValConvertible with my RootedArena trick?
[15:55:10] <jdm> nox: why?
[15:56:07] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[15:56:07] -ghservo- [13servo] 15bors-servo 04force-pushed 06tmp from 1466b958e to 14ae99a17: 02http://git.io/veWu4
[15:56:07] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[15:56:08] *** Joins: ghservo (ghservo@moz-0l2.5u0.30.192.IP)
[15:56:08] -ghservo- [13servo] 15bors-servo fast-forwarded 06tmp from 14ae99a17 to 14ae98f76: 02http://git.io/vfx4Y
[15:56:08] *** Parts: ghservo (ghservo@moz-0l2.5u0.30.192.IP) ()
[15:56:08] <nox> Well let's say my method takes 2 Node values. The current bindings need two roots in the binding function, so that's two roots directly on the stack right?
[15:56:57] <jdm> yes
[15:57:16] <nox> Going through FromJSVal, you get a JSRef from an Unrooted value and you put JS<T> into the rooted arena just like the root would put it in STACK_ROOTS.
[15:58:15] <nox> So instead of having n roots for n arguments,
[15:58:18] <nox> you have a single rooted arena.
[15:58:23] <jdm> ooh, that would mean less TLS usage in binding methods
[15:58:38] <nox> Isn't unrooting a whole RootedVec faster than unrooting N roots too?
[15:58:48] <nox> (The Ticket That Kept On Growing.)
[15:58:53] <jdm> should be
[15:58:55] <jdm> haha
[15:59:21] *** Joins: Tarmashirin (Tarmashirin@moz-rue.8s5.91.59.IP)
[15:59:30] <nox> So Ms2ger, It's not that FromJSValConvertible didn't go well, but that it wasn't used enough!
[15:59:40] <Ms2ger> Clearly :)
[15:59:43] *** Quits: Temur (Tarmashirin@moz-rue.8s5.91.59.IP) (Connection closed)
[16:02:14] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[16:03:47] * jdm contemplates resource cancellation
[16:04:20] * Ms2ger sighs at the thought of reviewing more of jdm :)
[16:04:59] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[16:05:08] *** Quits: acgtyrant (acgtyrant@moz-3kd.b79.160.124.IP) (Ping timeout: 121 seconds)
[16:05:47] *** Quits: jga (jga@moz-7oh.t1q.244.77.IP) (Ping timeout: 121 seconds)
[16:06:30] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[16:09:25] <jdm> you made more bed
[16:09:32] <jdm> now I will cover it in blankets
[16:09:37] <jdm> s/more/your/
[16:09:52] <jdm> how do I keep making such weird typos on irc :<
[16:10:29] * Ms2ger rolls all the blankets into a ball around himself
[16:11:24] <nox> I can even root 'this' in the RootedArena.
[16:16:17] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[16:17:17] *** Quits: dstrbad (dstrbad@moz-6an0vh.dsl.iskon.hr) (A TLS packet with unexpected length was received.)
[16:18:22] *** Quits: hyunjune (Mibbit@moz-54l.vhi.163.221.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:18:23] *** Joins: dstrbad (dstrbad@moz-6an0vh.dsl.iskon.hr)
[16:18:37] *** Quits: bdero (bran@moz-mqs.7dh.189.18.IP) (Quit: Leaving.)
[16:19:36] *** ahal is now known as ahal|lunch
[16:20:32] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[16:20:51] *** Joins: pcwalton (pcwalton@moz-nh2.o1i.216.216.IP)
[16:20:51] *** ChanServ sets mode: +o pcwalton
[16:20:51] <crowbot1> pcwalton: SimonSapin said ping https://github.com/servo/servo/pull/5480
[16:21:33] <pcwalton> SimonSapin: looking
[16:21:38] <pcwalton> was very happy to see a bunch of my layout PRs land this morning -- many thanks to everyone for helping shepherd them through the bots!
[16:22:39] *** Quits: dstrbad (dstrbad@moz-6an0vh.dsl.iskon.hr) (Ping timeout: 121 seconds)
[16:23:35] *** Joins: jgallagher (john@moz-6ge.dhn.131.24.IP)
[16:24:44] <mbrubeck> pcwalton: unfortunately https://github.com/servo/servo/pull/5831 didn't make it through the gauntlet. :P
[16:24:44] <crowbot1> PR #5831: layout: Make `margin: auto` work properly with tables. - https://github.com/servo/servo/pull/5831
[16:25:03] <mbrubeck> which is the one I'm waiting on because https://github.com/mbrubeck/servo/tree/empty-table depends on it.  :)
[16:25:07] <pcwalton> yeah, but it just needs a rebase, no big deal
[16:25:09] <pcwalton> I'll rebase it now.
[16:26:32] <pcwalton> was just a reftest list merge conflict, no big
[16:26:34] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[16:26:55] <pcwalton> in queue now
[16:27:42] *** Quits: mwu (mwu@moz-of5il1.hntd.7296.000c.2601.IP) (Quit: Leaving)
[16:31:31] *** Quits: jevin (jevin@moz-sra.ovp.12.72.IP) (Ping timeout: 121 seconds)
[16:32:02] *** Quits: Tarmashirin (Tarmashirin@moz-rue.8s5.91.59.IP) (Connection closed)
[16:32:31] *** Joins: Temur (Tarmashirin@moz-rue.8s5.91.59.IP)
[16:32:55] *** Joins: jevin (jevin@moz-sra.ovp.12.72.IP)
[16:34:20] *** Quits: jdm (jdm@moz-4vu.06r.98.75.IP) (Quit: )
[16:35:11] *** Joins: mwu (mwu@moz-ob3jkh.hntd.7296.000c.2601.IP)
[16:35:44] *** Joins: ghservo (ghservo@moz-0l2.5u0.30.192.IP)
[16:35:44] -ghservo- [13servo] 15jgraham opened pull request #5884: Support WebDriver takeScreenshot command. (06master...06webdriver_screenshot) 02http://git.io/vfxMl
[16:35:44] *** Parts: ghservo (ghservo@moz-0l2.5u0.30.192.IP) ()
[16:38:34] *** Quits: Temur (Tarmashirin@moz-rue.8s5.91.59.IP) (Connection closed)
[16:38:55] *** Joins: Temur (Tarmashirin@moz-rue.8s5.91.59.IP)
[16:44:40] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[16:44:40] -ghservo- [13servo] 15bors-servo pushed 0 new commits to 06tmp: 02http://git.io/vfx9V
[16:44:40] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[16:44:41] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[16:44:41] -ghservo- [13servo] 15bors-servo merged 06tmp into 06auto: 02http://git.io/vfx9K
[16:44:41] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[16:44:44] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[16:44:44] -ghservo- [13servo] 15bors-servo closed pull request #5883: Add attributes to the HTMLDialogElement interface. (06master...06dialog) 02http://git.io/vfxc2
[16:44:44] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[16:48:23] <mbrubeck> Lovely how all of our merges have `[<img src="https://reviewable.io/review_button.png"...` in the commit message now...
[16:48:40] <mbrubeck> We should probably teach homu to strip out the stuff between the Reviewable: comments.
[16:49:23] <Manishearth> that should be easy
[16:50:41] <Ms2ger> barosl, ^
[16:50:48] *** Quits: Temur (Tarmashirin@moz-rue.8s5.91.59.IP) (Connection closed)
[16:51:45] *** Quits: alex-abreu (alex@moz-j54ho8.biz.rr.com) (Ping timeout: 121 seconds)
[16:52:46] *** Joins: alex-abreu (alex@moz-j54ho8.biz.rr.com)
[16:55:32] * jgraham mutters something about tools that spam
[16:55:48] *** Joins: Temur (Tarmashirin@moz-rue.8s5.91.59.IP)
[16:56:14] <jgraham> Ms2ger: You know how you want to review #5804 ?
[16:56:14] <crowbot1> Issue #5804: Add simple document load tracking infrastructure - https://github.com/servo/servo/pull/5804
[17:00:53] <Ms2ger> jgraham, I already have a headache, thank you :)
[17:01:13] *** Quits: mccr8 (mccr8@moz-8du2kt.east.verizon.net) (Quit: quit)
[17:03:03] <jgraham> Dammit
[17:05:04] <mbrubeck> Manishearth: is #2 on Hacker News
[17:06:50] *** Quits: pcwalton (pcwalton@moz-nh2.o1i.216.216.IP) (Ping timeout: 121 seconds)
[17:06:51] <nox> Is the implicitness of the rooting machinery a feature or a design flaw?
[17:07:41] <nox> The fact that we must rely on us writing code that don't drop roots in misorder and whatnot because rooting is a spooky action at distance in STACK_ROOTS etc.
[17:07:59] <mwu> nox: it's going to be a lot more explicit with the sm upgrade
[17:08:02] <nox> Would it be too heavy to pass some sort of rooting structure around?
[17:08:14] <nox> mwu: Vaporware! I want the damn SM upgrade. :(
[17:08:22] <mwu> stop bitrotting me then
[17:08:27] <nox> Hah.
[17:09:04] <nox> mwu: Do you have some minutes to waste to describe to me how it's going to be more explicit?
[17:09:05] <mwu> I have a wip up if you want to look at it, but I totally missed servo's own rooting mechanism when I did my first pass
[17:09:50] <nox> I do.
[17:09:56] <mwu> a lot of the APIs in SM now take Handle<T> rather than raw JSObject* and other raw GC'd things
[17:10:12] <sillesta> mbrubeck: #1 for me
[17:10:27] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[17:10:28] <nox> Mmmh, if that's just that that's probably orthogonal to what I mean.
[17:11:16] <mwu> which part then? I also rip out most of STACK_ROOTS
[17:11:21] <Manishearth> mbrubeck: whagt
[17:11:23] <Manishearth> so fast?
[17:11:25] <nox> mwu: Basically, I would make all interface methods take an additional argument meant to hold roots along the code. Like in region-based memory management.
[17:11:34] <Manishearth> I submitted that like half an hour ago
[17:11:35] <Manishearth> ooooo
[17:11:37] <Manishearth> now #1
[17:11:54] *** Quits: Temur (Tarmashirin@moz-rue.8s5.91.59.IP) (Ping timeout: 121 seconds)
[17:11:54] <mwu> not sure I understand what you mean
[17:12:18] <jgraham> Manishearth: So if you have time to do that, do *you* want to review jdm's PR ;)
[17:12:23] <nox> Let me try to write some code to show you.
[17:12:26] <mwu> stack based roots are stored on a singly linked list on the JSContext
[17:12:41] <nox> I know that. I don't like that.
[17:12:53] <nox> Or did you mean in your new code?
[17:12:58] <mwu> that's in the new code
[17:13:10] <larsberg> Manishearth: the rust HN/reddit upvote brigade never ceases to amaze me. Of course, that's why the HN mods have complained they have to manually unflag Mozilla & Rust entries sometimes because it often triggers their "colluding upvoting" checks :-)
[17:13:12] <nox> Ok, then I don't understand and you can disregard me until I actually show some code.
[17:13:25] <mwu> current code has some magic that uses STACK_ROOTS and storing pointers so the conservative GC can find the pointers
[17:13:27] <Manishearth> larsberg: I didn't share it on /r/rust though :)
[17:13:27] <nox> mwu: What I mean is, what happens in your new code if I root a Temporary with .root()?
[17:13:36] <Manishearth> because I'd shared the original post a month ago
[17:14:13] <mwu> oh, it has to dig into STACK_ROOTS to find the JSContext. which doesn't seem good, but it's the simplest thing to do with the upgrade
[17:14:21] <Manishearth> > gofmt has syntax-level replacements. So you could do:
[17:14:21] <nox> Ok,
[17:14:30] <mwu> a lot of places can pass the JSContext explicitly, but not everything can do it easily
[17:14:32] <Manishearth> > `gofmt -w -r 'unexportedName -> ExportedName' *.go`
[17:14:34] *** Joins: Temur (Tarmashirin@moz-rue.8s5.91.59.IP)
[17:14:35] <Manishearth> that is amazing
[17:14:42] <nox> so what if, instead of being STACK_ROOTS somewhere,
[17:14:43] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[17:14:52] <mwu> basically all the bindings can usually grab a JSContext since SM gives us one
[17:14:56] *** Quits: alex-abreu (alex@moz-j54ho8.biz.rr.com) (Ping timeout: 121 seconds)
[17:15:05] <nox> the methods took an additional argument in which roots can only be appended, and when that argument is dropped, everything is unrooted at once?
[17:15:54] <nox> The returned JSRef's lifetimes could actually be tied to that additional argument, giving us more safety than the Root<T> values that can't move etc.
[17:15:56] <mwu> I agree with adding an additional argument, but I don't think we need anything more than a JSContext
[17:16:11] <mwu> the new rooting mechanism is pretty safe
[17:16:12] <nox> My idea abuse types to be more fine-grained.
[17:16:20] <mwu> it crashes quite rapidly if you manage to do it wrong
[17:16:56] <mwu> nox: https://github.com/michaelwu/rust-mozjs/blob/smupgrade2/src/rust.rs#L175
[17:17:23] <nox> Not very different from the current Root, isn't it?
[17:17:25] <mwu> this is basically a rust version of C++ Rooted<T> impl
[17:17:29] <mwu> no the current root doesn't really root
[17:17:47] <mwu> it just stores a pointer for the stack scanner to find
[17:18:19] *** Joins: duncan (paul@moz-dst.ms6.225.173.IP)
[17:18:31] <mwu> I mean, yeah it roots, but exact rooting makes it all very explicit
[17:19:13] *** Joins: dstrbad (dstrbad@moz-6an0vh.dsl.iskon.hr)
[17:19:48] <nox> Don't the root() methods still need to fetch something similar to STACK_ROOTS?
[17:20:19] <mwu> STACK_ROOTS is mostly for safety AIUI
[17:20:55] <mwu> (right now, that is)
[17:21:53] <mwu> so you're looking for a more rust like ownership model where we can call into a function and have it drop the rooting?
[17:22:34] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[17:23:01] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[17:23:01] -ghservo- [13servo] 15bors-servo merged 06auto into 06master: 02http://git.io/vfx9K
[17:23:01] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[17:23:04] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[17:23:04] -ghservo- [13servo] 15bors-servo closed pull request #5831: layout: Make `margin: auto` work properly with tables. (06master...06amazon-table-sizing) 02http://git.io/vfrCf
[17:23:04] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[17:23:16] <mwu> nox: I think no matter how you cut it, you have to store some global list of roots for when we want to trace
[17:23:19] <nox> A more Rust-like ownership model yes definitely, the latter part I'm not sure I understand it.
[17:23:35] <mwu> with conservative GC we didn't need a global list of roots, but now we do
[17:23:49] <nox> mwu: The global list is actually a list of list of roots right?
[17:23:54] *** Quits: dstrbad (dstrbad@moz-6an0vh.dsl.iskon.hr) (Ping timeout: 121 seconds)
[17:24:17] *** Quits: gandalf (zbraniecki@moz-cp7c4m.ca.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[17:24:37] <mwu> the list that's stored in JSContext is an array of singly linked lists, 
[17:24:43] <mwu> a different list for different root types
[17:25:36] <nox> mwu: What's RootedCollectionSet then?
[17:26:16] *** Joins: chmanchester (Chris@moz-ha9kvr.2rkg.9kg1.0101.2620.IP)
[17:27:11] <mwu> looks like another rooting mechanism
[17:27:32] *** ahal|lunch is now known as ahal
[17:27:33] <nox> That's the one on which Root etc depends upon currently, AFAICT.
[17:27:41] <nox> s/upon//
[17:28:19] <mwu> yeah. for the SM upgrade, there is another rooting mechanism available, which I'm moving Root<T> to
[17:29:06] <nox> Ok.
[17:29:58] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[17:29:58] -ghservo- [13servo] 15mbrubeck opened pull request #5885: Ignore border-spacing for tables with zero cells (06master...06empty-table) 02http://git.io/vfptX
[17:29:58] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[17:30:06] <nox> My idea is to add a single RootedVec into a RootedCollectionSet on a call to a DOM method (from the bindings), and then pass it around in the Rust code.
[17:30:42] <nox> That way you only add and remove from that RootedVec (or rather a structure holding onto it) that is currently in scope and you don't need to maintain root values on the stack.
[17:30:59] *** Joins: alex-abreu (alex@moz-j54ho8.biz.rr.com)
[17:31:37] <mwu> what do you mean by not maintaining rooted values on the stack
[17:32:31] <nox> https://github.com/nox/servo/commit/cd66e27db68ec845c7ad46a709e4d1332ee2db38#diff-77e42f966279a10a63070b5c62117a56R213 <- This, but with Rootable<T> instead of Unrooted<T>.
[17:32:47] *** Joins: caitp- (caitp@moz-lmogh4.cable.rogers.com)
[17:33:01] <nox> a structure which is just a RootedVec in disguise, and with a method that goes directly from Rootable<T> to the JSRef<T>.
[17:34:36] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[17:35:51] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[17:36:28] *** Quits: alex-abreu (alex@moz-j54ho8.biz.rr.com) (Ping timeout: 121 seconds)
[17:36:43] <mwu> ah ok
[17:37:09] *** Quits: caitp- (caitp@moz-lmogh4.cable.rogers.com) (Ping timeout: 121 seconds)
[17:37:10] <mwu> this makes sense with the current vector of roots we use
[17:37:19] <nox> Does it make sense post-upgrade,
[17:37:22] <nox> s/,/?/
[17:37:42] <mwu> the on-stack roots are part of the linked list of roots so I think it's more efficient to keep things on stack
[17:37:44] *** Joins: jdm (jdm@moz-br6siv.cpe.teksavvy.com)
[17:37:44] *** ChanServ sets mode: +qo jdm jdm
[17:38:00] <mwu> it doesn't make sense now, but I think it works out better after the upgrade
[17:38:11] <nox> Post-upgrade they are part of the linked lists you mean?
[17:38:14] <mwu> yeah
[17:38:18] <nox> Personally I hate the LIFO restrictions that rely on a lint.
[17:38:24] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[17:38:24] -ghservo- [13servo] 15Ms2ger 04force-pushed 06rustup_2015-04-25 from 141115850 to 1455ff73f: 02http://git.io/vfPdF
[17:38:24] -ghservo- 13servo/06rustup_2015-04-25 14c4d19b1 15Simon Sapin: Upgrade to rustc 47551b574 2015-04-14
[17:38:24] -ghservo- 13servo/06rustup_2015-04-25 14cfcc1fd 15Simon Sapin: WIP
[17:38:24] -ghservo- 13servo/06rustup_2015-04-25 14e48cdd3 15Simon Sapin: WIP
[17:38:24] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[17:38:51] <mwu> right now, the Roots don't actually do much more work than calling the rootcollection to get itself added
[17:40:11] <nox> My idea also allows to unroot many values at once,
[17:40:17] <mwu> https://github.com/michaelwu/rust-mozjs/blob/smupgrade2/src/jsapi.rs#L585
[17:40:18] <nox> instead of one by one when they are dropped individually.
[17:40:20] *** Joins: MrZeus (MrZeus@moz-n8pa5v.skybroadband.com)
[17:41:02] <mwu> the roots are on stack though
[17:41:31] *** Quits: jgallagher (john@moz-6ge.dhn.131.24.IP) (Client exited)
[17:41:33] <nox> 3 words on stack for the root, separate unrooting, LIFO restrictions not guaranteed by the compiler vs just the JSRef, unrooting by "blocks", LIFO restrictions relying on lifetiles.
[17:41:35] <mwu> and we get most of our roots for free
[17:41:50] <mwu> AIUI everything passed to us is already rooted
[17:41:59] *** Quits: Temur (Tarmashirin@moz-rue.8s5.91.59.IP) (Connection closed)
[17:42:07] <mwu> at least from the bindgen side
[17:42:29] *** Joins: Temur (Tarmashirin@moz-rue.8s5.91.59.IP)
[17:42:42] <nox> The bingden roots things itself but it still roots.
[17:42:51] <mwu> no, I mean SM roots it, not bindgen
[17:43:05] <nox> In your new code?
[17:43:16] <mwu> in the new SM
[17:43:20] <nox> Ok.
[17:44:22] <nox> I guess that if there is no rooting linked list off-stack anymore after the upgrade my idea could be less useful indeed.
[17:44:38] <mwu> also not sure why LIFO restrictions aren't guaranteed by the compiler. Rooted<T> shouldn't be movable...
[17:44:46] <nox> But I still would rather have an explicit rooting mechanism in the code that I can follow and not spooky action at distance.
[17:45:24] <nox> mwu: Manishearth had to write a lint to forbid moving of Root<T> and there are still issues with temporaries.
[17:46:33] <Manishearth>  huh, just got an email from microsoft with 9 identical copies of the MS logo attached
[17:46:36] <Manishearth> neato
[17:47:17] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[17:47:31] <mwu> Manishearth: how was Root<T> getting moved?
[17:47:36] <Manishearth> nox: it's a fixable issue, just that the fix might lead to a lot of false positives that I wanted to avoid
[17:47:44] <nox> Manishearth: Still a lint.
[17:47:45] <Manishearth> mwu: in match statements et cetera
[17:47:54] <nox> mwu: It doesn't need to be moved to fail LIFO restrictions.
[17:48:02] <nox> mwu: foo.root().r().bar().root()
[17:48:19] <Manishearth> technically a move :p
[17:48:24] <nox> Ah? Nevermind then.
[17:48:33] <nox> Where is the move though?
[17:48:34] <Manishearth> mwu: look at the changes to the DOM code here
[17:48:35] <Manishearth> https://github.com/servo/servo/pull/5855
[17:48:35] <crowbot1> PR #5855: Add move protection to `Root` and friends - https://github.com/servo/servo/pull/5855
[17:48:45] <Manishearth> nox: the temporary (not Temporary, the Root rvalue) gets moved
[17:48:46] <nox> Temporary -> Root -> JSRef -> Temporary -> Root
[17:48:47] <jwilm_> Ms2ger: I ran into a few issues adding an InterruptCallback when terminating a worker. The worker and the dedicated worker task both need access to the Runtime, but there's no support for Sending. I think we either need to wait to merge this until the runtime can be shared across tasks, or just file an issue to circle around and fix this once that's possible.
[17:48:50] <Manishearth> just not in memory moved
[17:48:52] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[17:48:54] <nox> Manishearth: Where?
[17:49:01] <mwu> because I was hoping the lack of copy means it can't be moved
[17:49:42] <Manishearth> mwu: no, Copy means that a in memory stack copy is enough  to clone the struct
[17:49:50] <Ms2ger> jwilm, mm
[17:49:53] <mwu> hmm
[17:50:06] <Manishearth> !Copy doesn't prevent moves, it just means that a move invalidates the original handle
[17:50:18] *** Joins: Tarmashirin (Tarmashirin@moz-rue.8s5.91.59.IP)
[17:50:20] <Ms2ger> jwilm, you can create a struct that contains *mut JSRuntime and impl Send for Foo {}
[17:50:23] <nox> I don't see where there is a move in what I said.
[17:51:01] <nox> Temporary::root() doesn't move, Root::r() borrows, methods returning Temporary and taking JSRefs don't move, and we are back to Temporary::root().
[17:51:26] *** Quits: Temur (Tarmashirin@moz-rue.8s5.91.59.IP) (Connection closed)
[17:51:36] <Manishearth> nox: hmm
[17:51:46] <Manishearth> also, should Temporary be nomove too?
[17:54:25] *** Quits: chmanchester (Chris@moz-ha9kvr.2rkg.9kg1.0101.2620.IP) (A TLS packet with unexpected length was received.)
[17:54:26] <nox> AFAIK, no.
[17:55:07] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[17:55:07] *** ChanServ sets mode: +o brson
[17:55:29] <Manishearth> cool
[17:55:33] *** Joins: chmanchester (Chris@moz-k2b6dp.rgd2.9kg1.0101.2620.IP)
[17:55:53] <mwu> nox: exact rooting in new SM is all about explicit rooting, so I think it's actually easier to follow if we can stop relying on STACK_ROOTS
[17:56:22] <jwilm_> Ms2ger: The worker needs to start with ownership of the js::rust::Runtime. The worker task needs js::rust::Cx to eval the script. I guess I can just Send a struct with both the *mut JSRuntime and *mut JSContext and recreate the Cx in the task.
[17:56:30] <nox> I come from Erlang land, where the code is terse and explicitness means passing things around.
[17:57:11] <jwilm_> seems a bit dangerous
[17:57:31] <Ms2ger> What?
[17:57:37] <Ms2ger> Why do you need a Cx?
[17:58:04] <Ms2ger> You definitely want to create the JSRuntime in the new thread
[17:58:27] <jwilm_> They come as a pair from new_rt_and_cx
[17:59:19] <mwu> nox: with the new rooting apis, things are explicitly stored in JSContext. it's just that our current apis don't pass that around in an obvious way
[17:59:31] <jwilm_> How is Worker supposed to get a reference to the JSRuntime then?
[18:00:19] *** Joins: rbrandao (uid30340@moz-89qrca.ealing.irccloud.com)
[18:00:22] <nox> mwu: I value the obvious way and relying on actual lifetimes, and the fact that the order in which things are dropped isn't a guaranteed thing when there are temporaries doesn't help.
[18:03:00] <Ms2ger> I guess pass another Sender to the workerglobalscope and block on it sending the *mut JSRuntime back
[18:04:34] <mwu> nox: not sure I understand what you mean about the order in which things are dropped
[18:04:36] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[18:08:01] *** Joins: nrc (nrc@moz-9v1svd.xtra.co.nz)
[18:08:23] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[18:08:23] *** ChanServ sets mode: +o pcwalton
[18:08:53] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[18:09:10] <jwilm_> Ms2ger: eek. Ok. That sounds like it will do the job. Hopefully that doesn't block too long. Thanks for the help! I'll submit a fix for that later.. need to get to work =x
[18:09:34] <Ms2ger> Great, thanks :)
[18:10:19] <nox> mwu: Nevermind, I didn't notice that in your code Rooted<T> can be dropped not in LIFO order.
[18:10:53] <mwu> that would probably assert
[18:11:19] <nox> mwu: Aren't you correcting the linked-list pointers in Drop?
[18:11:53] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[18:11:54] *** Joins: Jayflux (Jason@moz-gbtrd0.dsl.as9105.com)
[18:11:55] *** Joins: Temur (Tarmashirin@moz-rue.8s5.91.59.IP)
[18:12:07] *** Quits: Tarmashirin (Tarmashirin@moz-rue.8s5.91.59.IP) (Connection closed)
[18:12:15] <mwu> drop unlinks the Rooted<T> and also asserts that the thing that's being unlinked is itself
[18:13:05] *** Quits: nrc (nrc@moz-9v1svd.xtra.co.nz) (Ping timeout: 121 seconds)
[18:13:10] *** Quits: Jayflux (Jason@moz-gbtrd0.dsl.as9105.com) (Quit: Leaving)
[18:16:38] *** Joins: Tarmashirin (Tarmashirin@moz-rue.8s5.91.59.IP)
[18:16:45] *** Quits: Temur (Tarmashirin@moz-rue.8s5.91.59.IP) (Connection closed)
[18:17:25] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[18:19:07] <seanmonstar> Manishearth: interested in connection pooling for servo? (i cant imagine the answer is no)
[18:19:32] *** Quits: dbaron (dbaron@moz-12jr9n.dynamic.fusionbroadband.com) (Ping timeout: 121 seconds)
[18:19:42] <jdm> seanmonstar: what would that mean in practice?
[18:19:55] <Manishearth> seanmonstar: ^
[18:20:11] <Manishearth> but yes, interested :D
[18:20:14] <seanmonstar> jdm: using a connection for multiple requests, instead of connecting over and over again
[18:20:22] *** Joins: dstrbad (dstrbad@moz-6an0vh.dsl.iskon.hr)
[18:20:22] <seanmonstar> Connection: keep-alive
[18:20:27] <Manishearth> we don't use that?
[18:20:30] <Manishearth> what am I saying
[18:20:33] <Manishearth> we probably don't :p
[18:20:46] <jdm> I'm quite interested
[18:20:58] <Manishearth> I bet we need some sort of persistent vec of connection handles for that to work
[18:21:05] <Manishearth> but that sounds pretty awesome :)
[18:21:09] <seanmonstar> there wasnt automatic support in hyper (tho someone could have used the building blocks to do so themselves)
[18:21:49] *** Joins: Jayflux (Jason@moz-gbtrd0.dsl.as9105.com)
[18:21:56] <Manishearth> hyper could expose an API where you hand in a T: ConnectionPool, where the ConnectionPool interface can store existing connections, and create new ones when necessary
[18:22:14] <jgraham> Do we have any existing examples of code that calls from js back into some rust? I'm sure that DOM must do this somewhere but I can't think where right now
[18:22:16] <Manishearth> keep the implementation details of where the pool is stored, how long things are kept alive, etc up to the api user
[18:22:27] <Manishearth> jgraham: the dom does this ... everywhere?
[18:22:29] <seanmonstar> Manishearth: i have a PR introducing a basic pool
[18:22:35] <Manishearth> that *is* the dom
[18:22:39] <Manishearth> seanmonstar: +1
[18:22:57] <seanmonstar> Manishearth: however, its quite naive
[18:23:02] * Manishearth gives seanmonstar a cookie
[18:23:05] <Manishearth> and a cookie2
[18:23:17] <jgraham> Manishearth: The DOM is perhaps more static than I have in mind :)
[18:23:25] <seanmonstar> i'd love 1) review, and 2) pointing out places to make it less naive
[18:23:26] <Manishearth> as in?
[18:23:33] <Manishearth> seanmonstar: sure, tomorrowish I guess
[18:24:03] <mwu> jgraham: look at all the output of codegen in components/script/dom/bindings/codegen/Bindings
[18:24:21] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[18:24:30] <jgraham> Manishearth: I need a way to run some js with the signature function(callback) {/* user code goes here */} where "callback" is a rust function that sends its inputs back over webdriver
[18:24:35] *** Quits: dstrbad (dstrbad@moz-6an0vh.dsl.iskon.hr) (Ping timeout: 121 seconds)
[18:24:44] <jdm> oho
[18:25:01] <jdm> and so it has come to this
[18:25:05] <seanmonstar> Manishearth: i started with a Pool trait, but found it looked just about the same as a NetworkConnector, so... it's just a NetworkConnector, which can accept other connectors internally. this means, you could use the Pool in servo without having to use hyper::Client, by just doing `let pool = Pool::with_connector(your_servo_connector());` and then the
[18:25:05] <seanmonstar> typical `Request::with_connector(pool)`
[18:25:37] *** Joins: nefzaoui (nefzaoui@moz-bec.7fg.228.41.IP)
[18:25:52] <pcwalton> uh-oh, layout crashes on the google SERPs now :(
[18:25:57] <jdm> jgraham: the proper way to do this is add a WebIDL callback; unfortunately, we don't have any way of hiding something like this from the rest of the web
[18:26:03] <pcwalton> I'll work on a fix
[18:26:20] <jgraham> jdm: I see
[18:26:29] <jgraham> Also I just realised I have a train to catch
[18:26:47] <jdm> fly, you fool!
[18:26:53] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[18:27:37] <pcwalton> amazon is looking better http://i.imgur.com/GCZ0F6g.jpg
[18:27:48] <pcwalton> the only major problem is the search box layout (annoying, because I thought I fixed it)
[18:27:54] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[18:33:47] *** Joins: caitp- (caitp@moz-lmogh4.cable.rogers.com)
[18:34:51] *** Joins: Savago (Savago@moz-8hd.3b6.246.162.IP)
[18:36:22] *** Quits: jevin (jevin@moz-sra.ovp.12.72.IP) (Connection closed)
[18:36:44] *** Joins: jevin (jevin@moz-sra.ovp.12.72.IP)
[18:38:06] *** Quits: caitp- (caitp@moz-lmogh4.cable.rogers.com) (Ping timeout: 121 seconds)
[18:38:30] *** Joins: alex-abreu (alex@moz-j54ho8.biz.rr.com)
[18:41:58] <pcwalton> hmm, Yahoo still crashes with JS_IsExceptionPending
[18:43:49] *** Joins: Temur (Tarmashirin@moz-rue.8s5.91.59.IP)
[18:43:50] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[18:43:50] -ghservo- [13servo] 15mbrubeck opened issue #5886: Empty table with borders has incorrect layout 02http://git.io/vfpHT
[18:43:50] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[18:43:55] *** Quits: Tarmashirin (Tarmashirin@moz-rue.8s5.91.59.IP) (Connection closed)
[18:45:03] *** AutomatedTester|AFK is now known as AutomatedTester
[18:46:05] *** Joins: Jesse (jruderman@moz-vhjd7l.ujol.1ibb.0101.2620.IP)
[18:48:09] *** Quits: Temur (Tarmashirin@moz-rue.8s5.91.59.IP) (Connection closed)
[18:48:13] *** Quits: alex-abreu (alex@moz-j54ho8.biz.rr.com) (Ping timeout: 121 seconds)
[18:48:15] *** Joins: Temur (Tarmashirin@moz-rue.8s5.91.59.IP)
[18:51:52] *** Quits: m_khvoinitsky (quassel@moz-bkl6sn.d57a.lq23.04f8.2a01.IP) (Client exited)
[18:51:56] *** Joins: m_khvoinitsky (quassel@moz-bkl6sn.d57a.lq23.04f8.2a01.IP)
[18:52:05] *** Joins: aney11 (Emanuel@moz-ja1p0h.dyn.drei.com)
[18:54:00] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[18:54:00] -ghservo- [13servo] 15bors-servo pushed 0 new commits to 06tmp: 02http://git.io/vfpbz
[18:54:00] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[18:54:01] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[18:54:01] -ghservo- [13servo] 15bors-servo merged 06tmp into 06auto: 02http://git.io/vfpbg
[18:54:01] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[18:54:32] *** Quits: aney1 (Emanuel@moz-ja1p0h.dyn.drei.com) (Ping timeout: 121 seconds)
[18:57:04] *** Quits: syrobee (smuxi@moz-0o36lq.as13285.net) (Connection closed)
[18:58:50] *** Quits: Jesse (jruderman@moz-vhjd7l.ujol.1ibb.0101.2620.IP) (Client exited)
[19:00:59] *** Joins: alex-abreu (alex@moz-j54ho8.biz.rr.com)
[19:05:29] *** Joins: dbaron (dbaron@moz-aa63r7.2rkg.9kg1.0101.2620.IP)
[19:08:35] *** Joins: nrc (nrc@moz-9v1svd.xtra.co.nz)
[19:10:24] *** Quits: kmicu (kmicu@moz-uga.edn.218.91.IP) (Connection closed)
[19:10:49] *** Joins: kmicu (kmicu@moz-uga.edn.218.91.IP)
[19:10:51] *** Quits: Temur (Tarmashirin@moz-rue.8s5.91.59.IP) (Ping timeout: 121 seconds)
[19:12:57] *** Joins: Temur (Tarmashirin@moz-rue.8s5.91.59.IP)
[19:14:52] *** Joins: dstrbad (dstrbad@moz-6an0vh.dsl.iskon.hr)
[19:14:59] *** Joins: Caspy7 (chatzilla@moz-q45ho1.6qgi.ef7f.0306.2602.IP)
[19:15:05] <pcwalton> crash fixed, it was an easy one
[19:19:56] *** Joins: aney1 (Emanuel@moz-en1m4c.dyn.drei.com)
[19:21:06] *** Quits: aney11 (Emanuel@moz-ja1p0h.dyn.drei.com) (Ping timeout: 121 seconds)
[19:22:16] <mbrubeck> This patch gives me a surprising result on the testcase for #5886 ... https://github.com/mbrubeck/servo/compare/empty-table...mbrubeck:empty-table-border
[19:22:16] <crowbot1> Issue #5886: Empty table with borders has incorrect layout - https://github.com/servo/servo/issues/5886
[19:22:25] <mbrubeck> Instead of a square, the table is now a diamond!
[19:23:30] <mbrubeck> I guess I changed the border width in layout, but not in the display list builder.
[19:28:08] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[19:28:12] *** Quits: Jackneill (Jackneill@moz-j386q9.pool.digikabel.hu) (Connection closed)
[19:31:24] <Savago> SimonSapin: ping? It is about the undefined behavior for css property border-style (related to #4324).
[19:31:25] <crowbot1> Issue #4324: Groove and Ridge rendering shows a solid border when color is black - https://github.com/servo/servo/pull/4324
[19:31:44] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[19:31:44] -ghservo- [13servo] 15bors-servo merged 06auto into 06master: 02http://git.io/vfpbg
[19:31:44] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[19:31:49] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[19:31:49] -ghservo- [13servo] 15bors-servo closed pull request #5885: Ignore border-spacing for tables with zero cells (06master...06empty-table) 02http://git.io/vfptX
[19:31:49] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[19:31:51] <Savago> For â€˜grooveâ€™, the spec says: Looks as if it were carved in the canvas. (This is typically achieved by creating a â€œshadowâ€ from two colors that are slightly lighter and darker than the â€˜border-colorâ€™.)
[19:32:17] <Savago> I think the â€˜two colorsâ€™ are not really precise. 
[19:34:22] <Savago> What if we suggested to change it to â€œThe lighter color should be a percentage of the darker color, between 20% to 50% of its absolute valueâ€?
[19:37:11] <Savago> That would contemplate the implementation on servo and gecko. I think it would be ok with WebKit too.
[19:40:15] <Savago> And maybe add â€œIn case the border color is Black, the shadow has to be a shade of gray.â€
[19:53:58] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[20:01:06] *** Quits: Temur (Tarmashirin@moz-rue.8s5.91.59.IP) (Ping timeout: 121 seconds)
[20:02:21] *** Joins: Temur (Tarmashirin@moz-rue.8s5.91.59.IP)
[20:02:26] *** chmanchester is now known as chmanchester|afk
[20:04:26] *** Parts: duncan (paul@moz-dst.ms6.225.173.IP) ()
[20:07:13] *** Joins: mib_gj65l7 (Mibbit@moz-juv.9o3.252.72.IP)
[20:07:28] <gw> Ms2ger: i assume you saw my reply to your mesa bug yesterday, but just pinging you to make sure you did see my reply there
[20:07:52] *** Joins: aney11 (Emanuel@moz-lp3olr.dyn.drei.com)
[20:08:36] <Ms2ger> Yeah, thanks
[20:08:39] <SimonSapin> Savago: I donâ€™t think replacing a hand-wavy bit a spec with a slightly less hand-wavy one is that valuable. What would help IMO would be a non-normative but exact suggested alogithm.
[20:08:46] *** Quits: aney1 (Emanuel@moz-en1m4c.dyn.drei.com) (Ping timeout: 121 seconds)
[20:09:18] <SimonSapin> Savago: also, it doesnâ€™t sound great to have a discontinuity between black and very dark grey
[20:09:25] *** Parts: aney11 (Emanuel@moz-lp3olr.dyn.drei.com) ()
[20:10:01] <nox> jdm: Ping?
[20:10:03] <jdm> nox: pong
[20:10:31] <nox> jdm: Re: Implementing methods on NodeBase instead of Node, what if extended_deref was implemented on NodeBase too?
[20:11:19] <jdm> nox: I don't understand the question - extended_deref is a method on all JSRef, isn't it?
[20:13:10] <nox> Well, we can make that fn extended_deref<'a, T: NodeBase+Reflectable>(node: JSRef<'a, T>) -> &'a, no?
[20:13:16] <nox> Err,
[20:13:27] <nox> fn extended_deref<'a, T: NodeBase+Reflectable>(node: JSRef<'a, T>) -> &'a Node
[20:14:41] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[20:15:23] <nox> Actually, couldn't NodeBase+Reflectable have such a Deref trait?
[20:17:40] <jdm> nox: that's what Deref does already, isn't it?
[20:18:14] * jdm reads
[20:18:22] <nox> jdm: The Deref impl is just on JSRef<T> where T: Reflectable.
[20:18:55] <jdm> nox: so why do we want to specialize this for Node-derivatives?
[20:19:30] <nox> I took Node just as an example,
[20:19:41] <jdm> ok, so help me understand the motivation here
[20:19:45] <jdm> I don't understand the problem you're solving
[20:20:06] <nox> I should just find the GH issue ah ah.
[20:20:33] <nox> jdm: https://github.com/servo/servo/issues/5830
[20:20:33] <jdm> I just don't understand the relationship to #5830
[20:20:33] <crowbot1> Issue #5830: Generate WebIDL traits that use type parameters bounded by FooBase instead of just Foo - https://github.com/servo/servo/issues/5830
[20:20:33] <crowbot1> Issue #5830: Generate WebIDL traits that use type parameters bounded by FooBase instead of just Foo - https://github.com/servo/servo/issues/5830
[20:20:39] <nox> Hah.
[20:20:50] <nox> jdm: "That wouldn't allow manipulating fields of the concrete type or using helper methods, unfortunately."
[20:21:10] <nox> If NodeBase+Reflectable has a Deref impl to &Node, doesn't that fix that
[20:21:11] <nox> ?
[20:22:10] <nox> or to JSRef<Node>, to keep the helper traits on the JSRef.
[20:22:10] <jdm> it would allow access to fields, yes
[20:22:17] <jdm> helper methods on JSRef<Node>, no
[20:22:24] <jdm> right
[20:22:32] <jdm> huh
[20:23:03] <jdm> no wait, I don't think that would work
[20:23:19] <jdm> since Deref would give us &JSRef<Node>, and that JSRef would be on the stack inside deref
[20:23:20] <nox> Why?
[20:23:20] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[20:23:20] -ghservo- [13servo] 15mbrubeck closed issue #5873: Empty table with border-spacing has wrong size 02http://git.io/vf5Al
[20:23:20] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[20:23:25] <nox> Ah.
[20:25:38] <nox> jdm: Wait, shouldn't the helper traits be implemented on NodeBase+Reflectable too anyway?
[20:25:57] <nox> No reason the helper should be specific to the actual type if the methods aren't.
[20:26:19] <jdm> nox: well, this comes back to my point about generating lots of unnecessary code
[20:27:19] <jdm> I expect this would make our build times much work
[20:27:23] <jdm> s/work/worse/
[20:27:30] <nox> Rightâ€¦
[20:28:12] <jdm> nox: if we used my idea of implementing the trait twice, with the generic one just performing the cast and calling through to the concrete one, that would be much more painful for the helper traits
[20:28:18] <jdm> since they don't get any codegen benefits
[20:29:05] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[20:29:05] -ghservo- [13servo] 15pcwalton opened pull request #5887: layout: Don't panic in border collapse when a row has fewer cells than its previous sibling. (06master...06border-collapse-missing-cells) 02http://git.io/vfho1
[20:29:05] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[20:29:15] <pcwalton> mbrubeck: r? https://github.com/servo/servo/pull/5887 -- quick crash fix
[20:29:15] <crowbot1> PR #5887: layout: Don't panic in border collapse when a row has fewer cells than its previous sibling. - https://github.com/servo/servo/pull/5887
[20:30:32] *** chmanchester|afk is now known as chmanchester
[20:31:11] <nox> jdm: Right.
[20:31:32] <nox> Oh well.
[20:31:42] * nox goes back to PutForwards.
[20:32:34] *** Joins: ghservo (ghservo@moz-0l2.5u0.30.192.IP)
[20:32:34] -ghservo- [13servo] 15bors-servo pushed 0 new commits to 06tmp: 02http://git.io/vfhif
[20:32:34] *** Parts: ghservo (ghservo@moz-0l2.5u0.30.192.IP) ()
[20:32:35] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[20:32:35] -ghservo- [13servo] 15bors-servo merged 06auto into 06tmp: 02https://github.com/servo/servo/compare/b5beebbc6280...b6fc83cf2b4b
[20:32:35] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[20:34:34] *** Quits: chmanchester (Chris@moz-k2b6dp.rgd2.9kg1.0101.2620.IP) (Ping timeout: 121 seconds)
[20:38:29] <pcwalton> heh, the servo-static-suite version of the Google SERPs is kinda broken in Firefox too
[20:38:32] <pcwalton> I think it relies on the images loading
[20:38:59] *** Joins: caitp- (caitp@moz-lmogh4.cable.rogers.com)
[20:40:51] *** Joins: chmanchester (Chris@moz-smnb3q.2rkg.9kg1.0101.2620.IP)
[20:41:12] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[20:44:55] *** Quits: chmanchester (Chris@moz-smnb3q.2rkg.9kg1.0101.2620.IP) (A TLS packet with unexpected length was received.)
[20:45:17] <Savago> SimonSapin: do you happen to have the link when you first commented about this spec issue (on w3c mailing list)?
[20:45:19] *** Quits: caitp- (caitp@moz-lmogh4.cable.rogers.com) (Ping timeout: 121 seconds)
[20:45:32] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[20:45:55] <SimonSapin> looking
[20:46:05] *** Joins: chmanchester (Chris@moz-v6t8hm.rgd2.9kg1.0101.2620.IP)
[20:46:33] <SimonSapin> Savago: https://lists.w3.org/Archives/Public/www-style/2013May/0529.html probably
[20:49:06] <Savago> SimonSapin: only 1 comment? :-P
[20:49:56] <SimonSapin> Savago: welcome to www-style v.s. non-shiny topics :)
[20:50:05] <Savago> LOL!
[20:50:26] <Savago> Well, I want to validate both FF + Servo and make the spec better.
[20:50:39] <SimonSapin> What do you mean by validate?
[20:51:29] <Savago> If we manage to change the spec, change it to something that is compatible with FF + servo (or that wouldnâ€™t require heavy changes).
[20:52:17] <SimonSapin> So, here is the thing:
[20:52:39] <SimonSapin> 1. (Almost) nobody cares about this
[20:53:01] <SimonSapin> 2. CSSWG has members from every major browser
[20:53:19] <SimonSapin> 3. People donâ€™t like to be made to do work for things they donâ€™t care about
[20:53:53] <SimonSapin> As a result, any spec change in this area that makes any browser non-conforming is probably not gonna be accepted by the group
[20:54:04] *** Joins: Tarmashirin (Tarmashirin@moz-rue.8s5.91.59.IP)
[20:54:09] *** Quits: Temur (Tarmashirin@moz-rue.8s5.91.59.IP) (Connection closed)
[20:54:16] <SimonSapin> Also, if you ask people to work on spec text with you, the probably wonâ€™t
[20:54:23] <SimonSapin> (or say theyâ€™ll do it "later")
[20:54:34] <SimonSapin> So
[20:55:11] <Savago> The current editors are Bert Bos + Elika (fantasai) + Brad Kemper.
[20:55:19] <SimonSapin> If you want to change the spec on this, you need to have a precise proposal with exact wording that can be just accepted as-is
[20:55:23] <Savago> Do you know Bert or Brad? Are they â€˜nice'?
[20:55:42] <SimonSapin> The best way to make this un-controversial is to make it non-normative
[20:56:01] <SimonSapin> "Here is an example of algorithm that you *may* use to achieve this"
[20:56:04] <Savago> â€˜mustâ€™ â€”> â€˜should'?
[20:56:40] <SimonSapin> In a note, on green background
[20:56:46] <Savago> Coolio.
[20:57:55] *** Quits: ahal (ahal@moz-b8e0a0.cpe.pppoe.ca) (A TLS packet with unexpected length was received.)
[20:57:59] <gw> jdm: I see you mentioned resource cancellation in the backscroll
[20:58:08] <jdm> gw: yeah, there's a PR
[20:58:16] <gw> jdm: oh, looking
[20:59:53] <SimonSapin> So, my suggestion is: do whatever changes you want to the algorithm in Servo until youâ€™re satisfied with how it looks. Preferably, it should be "continuous": a tiny change in any of the input should not result in a big change in the result. Then I can help you convert that code into spec-like wording, and we can propose it for inclusion in the spec.
[20:59:55] <gw> jdm: I ask because, one of the things I'm working on is cleaning up iframes / pipelines properly. and it's *almost* working now (paint, layout, compositor seem ok), except when the script task tries to exit while things are still loading
[21:00:40] <gw> jdm: is the resource cancelling PR you're looking at likely to land soon and be applicable to things like that?
[21:01:13] <SimonSapin> Savago: Itâ€™s not so much a question of whether editors are nice as whether they care about your issue, and how much priority it has to them compared to everything else theyâ€™re working on.
[21:01:23] <jdm> gw: no - this is for situations where we want to abort loads before they're complete and treat it as a network error
[21:01:41] <gw> jdm: ah ok. I'll continue as planned then :)
[21:01:49] <jdm> gw: I mean, kind of yes in that we will want to abort all tracked loads in the future when a page is removed from the page tree
[21:02:16] *** Joins: Jesse (jruderman@moz-cfhap5.mtv2.mozilla.com)
[21:02:18] <jdm> gw: what's giving you trouble?
[21:02:56] <gw> jdm: sure. in the interim, do you have any preference as to whether I try and make script (a) exit immediately and leak (?) resources that were loading (b) the script enters a state on getting the exit msg where it waits for pending loads to finish before exiting?
[21:03:53] * larsberg lost so many days to trying to get window.close() to not bork Servo when things were still starting up...
[21:03:56] *** Quits: chmanchester (Chris@moz-v6t8hm.rgd2.9kg1.0101.2620.IP) (Ping timeout: 121 seconds)
[21:04:00] <gw> jdm: the current issue is a fairly simple one - exit msg arrives before the root page arrives which triggers an unwrap() panic in handle_exit_msg while getting the root page. that should be fairly simple to fix, I am just assuming there will be more similar to that afterwards
[21:04:43] <jdm> gw: I think I favour waiting for pending loads, but it sort of depends on what leaks we expect
[21:04:51] *** Quits: darkowlzz|afk (Elite12883@moz-kue6ah.elitebnc.org) (Ping timeout: 121 seconds)
[21:05:06] <jgraham> Savago: I see you got the introduction to all the failings of the CSSWG
[21:05:11] <gw> jdm: yea. ok I'll fix this panic unwrapping the root page first, and then see what happens next :)
[21:05:19] <jdm> sounds goo
[21:05:20] <jdm> +
[21:05:21] <jdm> d
[21:05:48] *** Joins: darkowlzz|afk (Elite12883@moz-kue6ah.elitebnc.org)
[21:05:53] <pcwalton> hmmmmmmmmmmmmmmm
[21:05:59] <pcwalton> looks like inlines can't be absolute containing blocks in Servo
[21:06:01] <gw> it's now able to open / close about 200 iframes in the jquery test suite, so I hope I'm getting close to handling most edge cases now
[21:06:01] <SimonSapin> jgraham: haha
[21:06:05] <pcwalton> that's pretty severe
[21:06:08] * pcwalton works on a fix
[21:06:28] <SimonSapin> jgraham: I got involved (partly) by filing issues on Paged Media, you can imagine how that wentâ€¦
[21:08:28] *** Quits: sillesta (sillesta@moz-501od2.business.telia.com) (A TLS packet with unexpected length was received.)
[21:08:54] *** Joins: sillesta (sillesta@moz-501od2.business.telia.com)
[21:09:25] <Ms2ger> SimonSapin, could've been gcpm...
[21:09:34] <Ms2ger> gw, I don't think we want script to hang around potentially forever if loads don't hurry up
[21:09:39] <SimonSapin> yeahâ€¦
[21:10:31] <Savago> pcwalton: why they canâ€™t be containing blocks?
[21:10:33] <gw> Ms2ger: yeah. I'll see what I run into after fixing this. the jquery test suite is a great stress test for opening / closing a *lot* of iframes quickly
[21:10:44] <pcwalton> we just don't have the infrastructure hooked up yet
[21:10:45] <pcwalton> I'm working on it
[21:10:56] <Savago> ah, ok. :-)
[21:10:58] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[21:10:58] -ghservo- [13servo] 15bors-servo merged 06auto into 06master: 02http://git.io/vfhiU
[21:10:58] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[21:11:02] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[21:11:02] -ghservo- [13servo] 15bors-servo closed pull request #5887: layout: Don't panic in border collapse when a row has fewer cells than its previous sibling. (06master...06border-collapse-missing-cells) 02http://git.io/vfho1
[21:11:02] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[21:12:53] *** Joins: nefzaoui_ (nefzaoui@moz-8n7.74g.227.41.IP)
[21:14:47] *** Quits: nefzaoui (nefzaoui@moz-bec.7fg.228.41.IP) (Ping timeout: 121 seconds)
[21:15:55] *** Quits: dstrbad (dstrbad@moz-6an0vh.dsl.iskon.hr) (A TLS packet with unexpected length was received.)
[21:18:16] *** Joins: chmanchester (Chris@moz-nie1j1.2rkg.9kg1.0101.2620.IP)
[21:18:47] <pcwalton> ummmâ€¦what happens if you have an inline containing block and the fragment gets split across lines?
[21:18:49] <pcwalton> SimonSapin: ^
[21:19:19] <pcwalton> I guess I can try in Gecko
[21:19:26] <SimonSapin> pcwalton: "In the case that the ancestor is an inline element, the containing block is the bounding box around the padding boxes of the first and the last inline boxes generated for that element. In CSS 2.1, if the inline element is split across multiple lines, the containing block is undefined. "
[21:19:29] <SimonSapin> http://dev.w3.org/csswg/css2/visudet.html#containing-block-details
[21:19:39] <pcwalton> haha
[21:19:41] <pcwalton> ok
[21:19:45] <pcwalton> I wonder what Gecko does
[21:19:46] <SimonSapin> good luck :)
[21:20:13] <pcwalton> I think I may just make a separate data structure in InlineFlow
[21:20:27] <pcwalton> that contains absolute descendants
[21:20:48] *** Quits: Tarmashirin (Tarmashirin@moz-rue.8s5.91.59.IP) (Connection closed)
[21:20:54] *** Quits: jdm (jdm@moz-br6siv.cpe.teksavvy.com) (Quit: )
[21:21:08] <pcwalton> SimonSapin: do you remember what Weasyprint did?
[21:21:17] *** Quits: nefzaoui_ (nefzaoui@moz-8n7.74g.227.41.IP) (Ping timeout: 121 seconds)
[21:21:25] <SimonSapin> let me have a look
[21:22:21] *** Quits: chmanchester (Chris@moz-nie1j1.2rkg.9kg1.0101.2620.IP) (Ping timeout: 121 seconds)
[21:22:41] *** Joins: Temur (Tarmashirin@moz-rue.8s5.91.59.IP)
[21:23:14] *** Joins: chmanchester (Chris@moz-nie1j1.2rkg.9kg1.0101.2620.IP)
[21:23:47] <SimonSapin> pcwalton: WeasyPrint only considers the inline fragment that contains the static position of the absolute
[21:23:55] <SimonSapin> this is probably wrong
[21:24:18] <SimonSapin> but itâ€™s a fairly contrieved set of conditions for this to matter, soâ€¦
[21:24:36] <SimonSapin> (the inline has to be `position: relative`)
[21:29:19] <pcwalton> SimonSapin: sadly it affects google.com :(
[21:29:21] <pcwalton> the SERPs
[21:29:25] <pcwalton> so Gecko does something funny
[21:29:42] <pcwalton> namely: it tries to only consider the portion before the split as the CB
[21:29:47] <pcwalton> but with dynamic behavior it causes painting corruption
[21:29:52] <pcwalton> presumably due to incorrect invalidation
[21:30:17] <SimonSapin> looks like I still have to learn the lesson: itâ€™s the web, never count on people not doing crazy shit :(
[21:30:19] <pcwalton> WebKit is incompatible
[21:30:31] <pcwalton> the containing block becomes zero size if the fragment gets split
[21:30:52] <SimonSapin> fun
[21:30:59] <pcwalton> it does have the right static position though
[21:31:03] <pcwalton> and its height becomes the size of the split
[21:31:06] <pcwalton> but its width becomes zero
[21:31:11] <SimonSapin>  yay bugward-compat
[21:31:12] <pcwalton> yay!
[21:31:17] <pcwalton> I can do whatever the hell I want!
[21:31:22] <pcwalton> as long as it doesn't break google
[21:32:17] <pcwalton> oh, and Safari is incompatible from Blink!
[21:32:19] <Savago> â€œdonâ€™t break googleâ€ should be in the spec.
[21:32:34] <pcwalton> it completely disappears in Safari
[21:32:49] <pcwalton> I love it.
[21:32:50] <Savago> pcwalton: interestingâ€¦ do you have a test case?
[21:33:04] <Ms2ger> Savago, the Google sent to Gecko, or to WebKit, or to Blink, or to Trident?
[21:33:10] <pcwalton> Savago: https://gist.github.com/pcwalton/33734e76dae6788e000c
[21:33:10] <SimonSapin> war is peace, freedom is slavery, google is the web
[21:33:24] <pcwalton> resize the window in Firefox, Chrome, and Safari
[21:33:32] <SimonSapin> pcwalton: google.com might also be sending different content based on the User-Agent header
[21:33:37] <pcwalton> it definitely is
[21:33:41] <pcwalton> we get the "space jam" version
[21:33:45] <pcwalton> i.e. tables for layout
[21:34:37] <SimonSapin> Time to land something from https://github.com/servo/servo/issues/4331 ?
[21:34:38] <crowbot1> Issue #4331: servo needs a user agent string - https://github.com/servo/servo/issues/4331
[21:34:52] <pcwalton> well, this particular case is cross browser compatible
[21:34:58] <pcwalton> and google probably sends it to all UAs
[21:35:01] <pcwalton> I mean
[21:35:04] <pcwalton> the case I'm working on
[21:35:14] <larsberg> SimonSapin: that thread does appear to have come to a conclusion
[21:35:23] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[21:35:27] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[21:35:27] -ghservo- [13servo] 15Ms2ger opened pull request #5888: Prepare for the rustup. (06master...06prepare-rustup) 02http://git.io/vfjUY
[21:35:27] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[21:35:41] <SimonSapin> larsberg: gervâ€™s last comment sounds reasonable
[21:37:02] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[21:37:02] -ghservo- [13servo] 15bors-servo merged 06tmp into 06auto: 02http://git.io/vfjUA
[21:37:02] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[21:37:22] <jgraham> Savago: The spec is supposed to stop you breaking Google. Google oftentimes have other ideas (e.g. by whitelisting specific browsers that they permit on their properties)
[21:38:01] <Savago> jgraham: do you meanâ€¦ that google can be evilâ€¦?
[21:38:30] <Savago> jgraham: but FB also does UA sniffing.
[21:38:32] <Savago> :-P
[21:38:46] <jgraham> Lots of people do UA sniffing of various kinds
[21:38:54] <jgraham> The "One Web" thing is a bit of a myth
[21:39:03] <pcwalton> I think I'll do what Gecko does, since it seems the most sensible
[21:39:08] <pcwalton> and we can do it without too much trouble
[21:39:40] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[21:40:09] <SimonSapin> pcwalton: Do you find out what Gecko does by reading the code or black-box-testing it?
[21:40:20] <pcwalton> just black box testing it
[21:40:22] <SimonSapin> (Did I already ask that same question not long ago?)
[21:40:24] <jgraham> Apparently Microsoft have some crazy magic where they can make a change and go "supporting this feature breaks 2% of the web" (because they suddenly get detected as !IE)
[21:40:24] <pcwalton> Gecko inline layout code isâ€¦ scary :)
[21:41:10] <pcwalton> actually, what Gecko does may be a parallelism hazard
[21:41:15] <pcwalton> so I may do something else in the undefined case
[21:41:38] <pcwalton> given that Safari makes such elements vanish entirely
[21:41:42] <pcwalton> I probably can do whatever the heck I want
[21:42:36] <Savago> pcwalton: heheheehâ€¦ chrome will bleed the green box on the lines below. And WK wonâ€™t show anything unless resized.
[21:42:46] <Ms2ger> Write a spec for it :)
[21:43:16] <Ms2ger> Especially if standardizing on a current behaviour would break parallelism
[21:43:16] <Savago> Ms2ger: sounds like a good idea. :-P
[21:43:23] *** Quits: Caspy7 (chatzilla@moz-q45ho1.6qgi.ef7f.0306.2602.IP) (Ping timeout: 121 seconds)
[21:43:44] *** Quits: Temur (Tarmashirin@moz-rue.8s5.91.59.IP) (Ping timeout: 121 seconds)
[21:45:21] <Ms2ger> pcwalton, oh, and write some style sharing docs :)
[21:45:55] *** Quits: eibwen (eibwen@moz-7rm68g.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[21:48:22] *** Joins: nefzaoui (nefzaoui@moz-u0l.0k2.228.41.IP)
[21:57:30] *** Joins: jtdowney (jtdowney@moz-gh1isj.static.twtelecom.net)
[22:01:20] *** Quits: kmicu (kmicu@moz-uga.edn.218.91.IP) (Client exited)
[22:02:04] <gw> does this segfault in SM mean anything to anyone here? https://pastebin.mozilla.org/8831683
[22:06:41] <Ms2ger> Uh... Ask #jsapi ?
[22:14:37] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[22:14:37] -ghservo- [13servo] 15bors-servo 04force-pushed 06auto from 14aa0875d to 144f6b7b5: 02http://git.io/A9I6iA
[22:14:37] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[22:16:15] *** Joins: Caspy7 (chatzilla@moz-q45ho1.6qgi.ef7f.0306.2602.IP)
[22:20:08] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[22:22:04] *** Quits: sillesta (sillesta@moz-501od2.business.telia.com) (A TLS packet with unexpected length was received.)
[22:26:25] *** Joins: bholley (bholley@moz-hb3rtc.ca.comcast.net)
[22:27:26] *** Joins: jga (jga@moz-ppf.t1q.244.77.IP)
[22:29:31] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[22:33:51] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[22:35:39] *** Quits: Ms2ger (Ms2ger@moz-m2p.r4q.180.91.IP) (Quit: nn)
[22:39:37] *** Quits: jtdowney (jtdowney@moz-gh1isj.static.twtelecom.net) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[22:40:35] *** Joins: nattokirai (nattokirai@moz-rq9a8e.asahi-net.or.jp)
[22:40:40] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[22:40:40] -ghservo- [13servo] 15pcwalton opened pull request #5889: layout: Remove `absolute_static_i_offset` and `fixed_static_i_offset`. (06master...06remove-absolute-static-i-offset) 02http://git.io/vfjRQ
[22:40:40] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[22:40:46] <pcwalton> gw: r? ^ quick refactoring
[22:41:05] <gw> pcwalton: looking
[22:41:11] *** Quits: deokjinkim (Mibbit@moz-g81.0bj.108.114.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:41:40] <gw> pcwalton: done, easy one :)
[22:41:43] <pcwalton> thanks :
[22:41:45] <pcwalton> :)
[22:42:15] *** Quits: jga (jga@moz-ppf.t1q.244.77.IP) (Connection closed)
[22:42:42] <kmc> yay, kcov is finally working on the latest nightly
[22:45:34] *** Joins: caitp- (caitp@moz-lmogh4.cable.rogers.com)
[22:51:11] *** Quits: nattokirai (nattokirai@moz-rq9a8e.asahi-net.or.jp) (Client exited)
[22:52:50] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[22:52:50] -ghservo- [13servo] 15bors-servo pushed 0 new commits to 06tmp: 02http://git.io/vfjzM
[22:52:50] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[22:52:51] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[22:52:51] -ghservo- [13servo] 15bors-servo merged 06tmp into 06auto: 02http://git.io/vfjzD
[22:52:51] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[22:52:53] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[22:52:53] -ghservo- [13servo] 15bors-servo closed pull request #5880: Start moving Servo tests into wpt. (06master...06servo-tests) 02http://git.io/vfb7a
[22:52:53] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[22:54:36] <larsberg> So. It looks like we can work around the rustup blocker by disabling debug info until the next rustup. Opinions?
[22:55:00] * larsberg was terrified because no debug info => no profiling => massive regressions
[22:55:42] <larsberg> The alternative is waiting for a patch, which will either be a fix or something that emits a warning + puts bogus debug info in the spots where rustc is currently having issues.
[22:56:15] *** Joins: Azdle (Azdle@moz-fv6arh.mn.comcast.net)
[22:57:15] <frewsxcv> kmc: do you have a link regarding kcov compatiblity?
[22:57:53] *** Joins: jga (jga@moz-ppf.t1q.244.77.IP)
[23:00:08] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[23:01:44] <Manishearth> larsberg: lgtm, provided we push hard for the ice to be fixed and rustup immediately
[23:02:18] <larsberg> Manishearth: yeah, I'm tempted to even just turn it off so we can see if we get killed by something else post-script. There may be a fix before we could land the rustup anyway :-)
[23:02:22] <Manishearth> larsberg: there might be a hackish workaround what we can apply to our Rust
[23:02:46] <larsberg> Manishearth: I think if we're willing to do that, pnkfelix said he might be able to just give us a "emit a warning" mode
[23:02:50] <Manishearth> (haven't looked at the code yet)
[23:02:52] <Manishearth> cool
[23:02:55] <Manishearth> that sounds good enough for now
[23:02:58] <kmc> frewsxcv: https://users.rust-lang.org/t/tutorial-how-to-collect-test-coverages-for-rust-project/650
[23:03:04] <kmc> it wasn't working for me before, but it works now :)
[23:03:13] <Manishearth> let's disable debuginfo, continue with the rustup, and when the hack is ready use it instead
[23:03:19] <Manishearth> (and then rustup when the problem is fixed)
[23:04:11] *** Quits: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[23:04:23] *** Quits: ldng (ldng@moz-q2un3b.abo.bbox.fr) (Quit: Leaving)
[23:04:44] <SimonSapin> Manishearth: larsberg: So is it [profile.dev] debug = false ?
[23:05:22] <Manishearth> I ... think?
[23:05:32] <SimonSapin> "Controls whether the compiler passes -g or `--cfg ndebug`"
[23:05:59] <SimonSapin> debuginfo is -g, right?
[23:06:01] <Manishearth> yes
[23:06:03] <larsberg> SimonSapin: that sounds right
[23:06:56] <SimonSapin> but Iâ€™d rather we donâ€™t disable debug_assert
[23:07:50] <mwu> is there a workaround if we need debug info?
[23:08:12] <Manishearth> mwu: it involves poking people to do work :p
[23:08:40] <mwu> as in, some hack on the servo side to avoid the ICE
[23:08:55] <Manishearth> I poked at it earlier today and I couldn't think of anything
[23:09:01] <mwu> :/
[23:09:56] <Manishearth> mwu: wait, you could ./mach build --release I guess?
[23:10:10] <Manishearth> I forgot if that passes ndebug
[23:10:23] <Manishearth> oh wait you want debuginfo
[23:10:25] <Manishearth> sorry, sleepy
[23:10:43] * mwu working on too much unsafe code
[23:13:38] *** Quits: Azdle (Azdle@moz-fv6arh.mn.comcast.net) (Ping timeout: 121 seconds)
[23:14:59] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[23:16:54] *** Quits: caitp- (caitp@moz-lmogh4.cable.rogers.com) (Ping timeout: 121 seconds)
[23:18:30] *** Quits: Jayflux (Jason@moz-gbtrd0.dsl.as9105.com) (Quit: Leaving)
[23:21:26] *** Joins: bdero (bran@moz-216hqv.oo5r.e4su.0006.2601.IP)
[23:24:17] *** Quits: bholley (bholley@moz-hb3rtc.ca.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[23:26:21] <SimonSapin> into layout!
[23:27:14] <Manishearth> yay
[23:27:59] *** Quits: alex-abreu (alex@moz-j54ho8.biz.rr.com) (Ping timeout: 121 seconds)
[23:29:00] *** Joins: jinwoo_mbp2 (jinwoo@moz-t0r.chb.167.121.IP)
[23:29:41] *** Joins: alex-abreu (alex@moz-j54ho8.biz.rr.com)
[23:30:38] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[23:30:38] -ghservo- [13servo] 15bors-servo pushed 0 new commits to 06tmp: 02http://git.io/vfjXn
[23:30:38] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[23:30:40] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[23:30:40] -ghservo- [13servo] 15bors-servo merged 06tmp into 06auto: 02https://github.com/servo/servo/compare/ab2d07db1fab...0a4db7ae0f58
[23:30:40] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[23:30:42] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[23:30:42] -ghservo- [13servo] 15bors-servo closed pull request #5888: Prepare for the rustup. (06master...06prepare-rustup) 02http://git.io/vfjUY
[23:30:42] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[23:32:18] *** Quits: mib_gj65l7 (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[23:38:14] *** Joins: Rym_ (y@moz-rmaga4.range86-187.btcentralplus.com)
[23:39:32] *** Quits: rbrandao (uid30340@moz-89qrca.ealing.irccloud.com) (Quit: Connection closed for inactivity)
[23:39:54] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[23:39:54] -ghservo- [13servo] 15glennw opened pull request #5890: Various fixes for cleaning up iframes, compositor layers, pipelines and threads. (06master...06iframe-cleanup) 02http://git.io/vfjMu
[23:39:54] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[23:39:56] *** Joins: brson (brson@moz-0i1.c9m.56.172.IP)
[23:39:56] *** ChanServ sets mode: +o brson
[23:44:36] <larsberg> SimonSapin: awesome!
[23:45:20] *** Joins: nattokirai (nattokirai@moz-86b4bs.bitcat.net)
[23:47:43] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[23:47:43] -ghservo- [13servo] 15SimonSapin pushed 2 new commits to 06rustup_2015-04-25: 02http://git.io/vfjyu
[23:47:43] -ghservo- 13servo/06rustup_2015-04-25 143d118ba 15Simon Sapin: Disable debuginfo to work around https://github.com/rust-lang/rust/issues/24687
[23:47:43] -ghservo- 13servo/06rustup_2015-04-25 1460c96c9 15Simon Sapin: Some layout
[23:47:43] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[23:48:05] <SimonSapin> 43 errors left in this phase of layout for anyone wants to have a go at them
[23:50:17] *** Quits: chmanchester (Chris@moz-nie1j1.2rkg.9kg1.0101.2620.IP) (Ping timeout: 121 seconds)
[23:52:13] *** Quits: caitp (caitp@moz-lmogh4.cable.rogers.com) (Ping timeout: 121 seconds)
[23:52:58] *** Quits: nefzaoui (nefzaoui@moz-u0l.0k2.228.41.IP) (Quit: Leaving)
[23:59:16] *** Quits: Nekit1234007 (nekit@moz-6p4sko.broadband.iskratelecom.ru) (Quit: leaving)
