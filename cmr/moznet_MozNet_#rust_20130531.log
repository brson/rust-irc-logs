[00:00:10] <rntz> strcat: is this just a chroot jail, or what?
[00:00:12] <mark_edward> ah. good work rusti
[00:00:17] <strcat> rntz: well it's not just a chroot
[00:00:19] <bblum> rusti: botsnack
[00:00:21] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/XahQ
[00:00:27] <bblum> oh come on
[00:00:30] <strcat> rntz: it has a pid, mount, ipc, and hostname namespace
[00:00:31] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:00:32] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[00:00:33] <strcat> and a whitelist of syscalls
[00:00:39] <rntz> strcat: okay.
[00:00:42] <strcat> a whitelist of devices (read access to 1:9)
[00:00:54] <strcat> and a cgroup to limit resources + kill it reliably
[00:01:03] <strcat> I am pretty certain it is secure.
[00:01:16] *** Joins: eholk (eholk@moz-3D703D55.uconnect.utah.edu)
[00:01:19] <strcat> unless you find a local root exploit in something mundane like read()... ;p
[00:01:34] <strcat> well you need more than root but... usually a local root exploit implies that
[00:01:46] <strcat> root isn't enough to escape the sandbox, unlike a chroot
[00:02:03] *** Joins: KindOne (KindOne@B2A5C4FE.9C5C45A3.EC6A1518.IP)
[00:02:05] <strcat> you need either mount or ptrace or something else.
[00:02:46] *** Joins: doomlord (doomlod@moz-3CF8202D.range81-159.btcentralplus.com)
[00:03:42] <steveklabnik> woo, first two security challenges done
[00:03:42] <bblum> strcat: you should add static botsnack = "thanks!"; to the scope of the code rusti runs
[00:04:52] <strcat> rusti: botsnack
[00:04:52] -rusti- foo.rs:6:0: 6:17 error: `use` and `extern mod` declarations must precede items
[00:04:52] -rusti- foo.rs:6 extern mod extra;
[00:04:52] -rusti-          ^~~~~~~~~~~~~~~~~
[00:04:52] -rusti- error: aborting due to previous error
[00:04:53] -rusti- application terminated with error code 101
[00:04:59] <strcat> heh
[00:05:02] <strcat> rusti: botsnack
[00:05:04] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/GPcP
[00:05:15] *** Quits: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[00:05:16] <bblum> also botsmack
[00:05:18] <strcat> rusti: botsnack
[00:05:20] -rusti- "nom nom"
[00:05:27] <bblum> XLNT
[00:05:32] <mark_edward> http://smallcultfollowing.com/babysteps/blog/2013/05/30/removing-procs/
[00:05:41] <mark_edward> this reminds me of the C++ lambda syntax
[00:05:43] <vcl> So I added a new LLVM API call to rustllvm wrappers and when it gets invoked, all parameters on stack seem to be off by 4 bytes
[00:05:44] <Ralith> why does rusti use notices?
[00:06:02] <rntz> rusti: 2
[00:06:03] <mark_edward> where you can decide how variables are captured (copy, ref, move)
[00:06:03] -rusti- 2
[00:06:06] <vcl> this only happens on Linux, Windows builds appear to be fine...
[00:06:06] <strcat> Ralith: so it doesn't get it bot loops, especially in PMs
[00:06:27] <strcat> I should stop using CTCP ACTION
[00:06:32] <strcat> I forgot it counted as a PRIVMSG
[00:06:50] <vcl> Does this remind anyone of any common gotchas with FFI?
[00:07:06] <strcat> vcl: did you use the C types?
[00:07:12] <Ralith> strcat: huh, unusual approach
[00:07:18] <strcat> Ralith: why?
[00:07:22] <strcat> Ralith: that's what notice is for
[00:07:29] <strcat> freenode bots all use it
[00:07:54] <strcat>    The NOTICE command is used similarly to PRIVMSG.  The difference
[00:07:54] <Eridius> strcat: how likely do you think you are to hit a bot loop with `/me produced no output`?
[00:07:56] <strcat>    between NOTICE and PRIVMSG is that automatic replies MUST NEVER be
[00:07:57] <strcat>    sent in response to a NOTICE message. 
[00:08:08] <Ralith> strcat: what is that a quote from?
[00:08:12] <strcat> Ralith: the RFC
[00:08:12] <Eridius> Ralith: the IRC RFCs
[00:08:17] <vcl> strcat: yes.   first parameter is a pointer to opaque enum, like other LLVM wrappers, the other two are *c_char
[00:08:20] <Ralith> neat, never noticed that part
[00:08:31] <strcat> The object of this rule is to avoid loops
[00:08:32] <Ralith> most bots just prepend a space or something
[00:08:33] <strcat>    between clients automatically sending something in response to
[00:08:35] <strcat>    something it received.
[00:09:19] <strcat> anyway I'll start using colours instead of ACTIONs
[00:09:24] <Eridius> Ralith: can't say I've ever seen a bot prepend a space
[00:09:29] <Eridius> strcat: oh good idea.
[00:09:39] <strcat> it was someone else's idea ;p
[00:09:42] <Eridius> I vote for purple as the "no output" response
[00:09:51] <Eridius> strcat: you could also use red for a non-0 return code and green for a 0 return code
[00:10:02] <Ralith> Eridius: then you've never used lambdabot, for one
[00:10:08] <Eridius> Ralith: it's been a while
[00:10:41] <strcat> but meh I think I'll just go back to printing ()
[00:10:44] <strcat> it's weird that it doesn't
[00:10:46] <strcat> rusti: ()
[00:10:47] * rusti produced no output
[00:11:08] <Eridius> prepending a space isn't much of a defense against bot loops though, because you don't know what other bots are going to respond to
[00:11:10] <Ralith> the decision struck me as strange because irssi, at least, beeps on notices by default
[00:11:20] <Ralith> Eridius: well, it's worked so far
[00:11:20] <strcat> Ralith: well irssi is doing it wrong ;p
[00:11:25] <Ralith> strcat: evidently
[00:11:33] <Ralith> still took me like a month to work out what was pinging me
[00:11:35] <strcat> no other client does it, a few other irssi users complained ;p
[00:11:36] <Eridius> Ralith: irssi doesn't beep for me. are you using some gui variant? I'm just using terminal
[00:11:44] <strcat> Eridius: you might have urgent on bell set
[00:11:46] <strcat> it prints \a
[00:11:46] * Eridius idles for 10 min
[00:11:56] <strcat> rusti: ()
[00:11:57] -rusti- ()
[00:12:19] <rntz> rusti: fn f() { f(); }; f()
[00:12:20] -rusti- application terminated abnormally with signal 9 (Killed)
[00:12:22] <cmr> strcat: r? https://github.com/mozilla/rust/pull/6826
[00:12:24] <Ralith> Eridius: then your terminal is discarding the beep
[00:12:41] <pcwalton> nmatsakis: jld: r? for one of you https://github.com/mozilla/rust/pull/6848
[00:12:45] <pcwalton> one liner
[00:13:34] *** Quits: mschifer1 (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[00:13:43] <strcat> rntz: it only gets 128MiB so... ;p
[00:14:10] <rntz> oh, that got mem-killed rather than time-killed?
[00:14:14] <strcat> rntz: yes
[00:14:18] <rntz> blah, I suppose I could do a proper loop
[00:14:20] <strcat> rntz: timeout is 5 secs atm
[00:14:29] <strcat> rntz: it's not using -O so it won't get sibling call opt
[00:14:29] <rntz> rusti: fn f() { while true {} }; f()
[00:14:37] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/eiII
[00:14:46] <rntz> rusti: fn f() { loop {} }; f()
[00:14:52] -rusti- timeout triggered!
[00:15:01] <bblum> huh, we got rid of while?
[00:15:05] <cmr> no
[00:15:07] <bblum> oh, no, it's just
[00:15:08] <bblum> ok
[00:15:08] <strcat> bblum: no just warns on while true
[00:15:08] <bblum> good
[00:15:12] <cmr> it's just a suggestion
[00:15:39] * strcat likes for (;;) {} in C ;p
[00:15:52] <mark_edward> thanks for all the help and advice guys. this is a great channel
[00:16:13] <mark_edward> i'd love to be involved in rust development somehow, probably in the library
[00:16:16] <Eridius> strcat: what's "urgent on bell"?
[00:16:22] <steveklabnik> other than 'use 4 spaces not 2,' anybody have any feedback on https://gist.github.com/steveklabnik/dedfe4aeff82fb4743af ?
[00:16:28] <cmr> mark_edward: there's tons of low hanging fruit :)
[00:16:33] * steveklabnik doesn't know why his editor isn't picking up the .rs file stuff
[00:16:37] <Eridius> Ralith: my terminal is defnitely not discarding the beep
[00:16:41] <Eridius> `echo $'\a'` beeps as expected
[00:16:43] <strcat> Eridius: tags the window as urgent (for me that means borders/title turn red and the workspace # turns red in the statusbar if I'm not on it)
[00:16:54] <mark_edward> can you recommend anything i could look at cmr?
[00:17:03] <strcat> Eridius: terminal option rather than irc client option
[00:17:07] <Ralith> Eridius: then someone has reconfigured your irssi.
[00:17:13] <Eridius> strcat: not in my terminal
[00:17:19] <strcat> Eridius: yeah it's usually a setting
[00:17:26] <cmr> mark_edward: pretty much everywhere needs docs, which is a good way to get introduced to the codebase
[00:17:32] <strcat> and then the wm has to deal with the urgent tag
[00:17:39] <Eridius> irssi has a setting 'bell_beeps'. It's OFF. I wonder if that controls it?
[00:17:40] <cmr> mark_edward: can also do a "git grep FIXME"
[00:17:48] <Eridius> strcat: I'm on OS X. no such thing as urgent
[00:18:02] <strcat> Eridius: probably is. don't things get marked when they need attention?
[00:18:02] <Ralith> really? what does OSX call the bouncing icon thing?
[00:18:04] <mark_edward> yeah. i think every function should have an example usage or something
[00:18:06] <strcat> Eridius: windows has it
[00:18:10] <steveklabnik> yes!
[00:18:12] <strcat> just not called urgent
[00:18:19] <steveklabnik> adding exmaple usages to docs would be great
[00:18:19] <Eridius> Ralith: the app is requesting attention, not a particular window
[00:18:22] *** Joins: MaikKlein (maik@moz-AC9459D8.dip0.t-ipconnect.de)
[00:18:27] <steveklabnik> it's what i've been doing, but there's so much stuff, always room for more
[00:18:29] <Eridius> strcat: windows also has a per-window taskbar, instead of per-app like os x
[00:18:36] <strcat> Eridius: it doesn't bounce it in the dock or something?
[00:18:47] <Eridius> strcat: the app requests attention. It's not a window manager thing
[00:18:51] <Eridius> it's just an OS X API that you can use
[00:19:16] <strcat> Eridius: well... the X11 idea of a window isn't the human idea of a window anyway ;p
[00:19:25] *** Joins: brendan (brendaneic@moz-786CED74.public.wayport.net)
[00:19:30] <mark_edward> if i were to try and do anything, it would be on the incoming branch, correct?
[00:19:35] <cmr> mark_edward: yes
[00:19:35] <Eridius> mark_edward: yes
[00:19:38] <strcat> in ye ol days all buttons were "windows"
[00:19:42] <strcat> any widget
[00:19:43] <Eridius> strcat: o_O
[00:19:51] <cmr> Eridius: yeah X is messed
[00:20:01] *** Quits: caitp (caitp@moz-9FE842F.cpe.net.cable.rogers.com) (Quit: caitp)
[00:20:04] *** Joins: sluggo (Mibbit@5F7BDAE1.AB93D072.913B224A.IP)
[00:20:04] <strcat> that might have just been toolkits being messed up
[00:20:17] <steveklabnik> mark_edward: https://github.com/mozilla/rust/pull/6619 and https://github.com/mozilla/rust/pull/6841 are good PRs to work off of
[00:20:18] <cmr> nah it was mostly X, easiest way to receive events
[00:20:38] <steveklabnik> mark_edward: where i did that. the second one shows the formatting to add syntax highlighting, should be in all doc blocks going forward
[00:20:39] *** Quits: a__ (a__@moz-250D9B4.nycmny.fios.verizon.net) (Quit: I haz left.)
[00:20:41] *** Quits: sluggo (Mibbit@5F7BDAE1.AB93D072.913B224A.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:21:02] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:21:45] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[00:21:45] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/Y7_9GA
[00:21:45] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[00:22:44] <cmr> strcat: I'm going to bed. Would you mind sheparding the term patch through if there are win32 failures?
[00:23:08] <strcat> cmr: I'll try
[00:23:12] <cmr> thanks :)
[00:23:53] *** Quits: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[00:23:55] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[00:24:23] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[00:24:45] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[00:24:45] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/NN7-3w
[00:24:45] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[00:26:57] *** Quits: jclements (jclements@2557E599.66715431.D25A875A.IP) (Quit: jclements)
[00:27:49] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[00:28:22] *** Quits: Boreeas (Boreeas@moz-F35C832D.boreeas.net) (Ping timeout)
[00:28:35] *** Quits: brendan (brendaneic@moz-786CED74.public.wayport.net) (Quit: brendan)
[00:28:51] *** Joins: Boreeas (Boreeas@moz-F35C832D.boreeas.net)
[00:30:44] *** Joins: sp3d (a@moz-49806493.dhcp.stls.mo.charter.com)
[00:30:46] *** Joins: jclements (jclements@2557E599.66715431.D25A875A.IP)
[00:32:56] *** Quits: doomlord (doomlod@moz-3CF8202D.range81-159.btcentralplus.com) (Ping timeout)
[00:33:14] <bblum> in rustc::middle:ty.rs, in type_contents(), why does tc_mt() need to be a separate function from tc_ty() ?
[00:34:01] <aatch> bblum, what's mt again?
[00:34:25] <bblum> "mutable type", it seems
[00:34:25] <strcat> mutability
[00:34:31] <strcat> it's possible it's not used anymore?
[00:34:41] <strcat> I guess it distinguishes & from &mut
[00:34:50] <bblum> oh, it's just a helper function that factors out the mutability thing
[00:34:57] <bblum> because it's called in a bunch of cases
[00:35:43] <jld> pcwalton: Are the clownshoes I'm wearing in #6848 as large as they look like at first glance?
[00:35:44] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[00:36:04] <pcwalton> jld: heh, it took quite a while to find
[00:36:08] <pcwalton> I've done worse things!
[00:37:31] <bblum> what's the bit-flip operator again? neg?
[00:37:35] <pcwalton> !
[00:37:54] <bblum> ah yes, that's what the final use of ! was
[00:38:21] <strcat> iirc it's missing a trait though...
[00:38:35] *** Parts: jrfeenst (jrfeenst@moz-3265BD65.cpe.norwoodlight.com) ()
[00:38:36] *** Joins: ziad (ziad@moz-5003F925.members.linode.com)
[00:38:36] <aatch> strcat, isn't it the Neg trait?
[00:38:42] <strcat> aatch: Neg is -
[00:38:50] <aatch> oh right.
[00:38:55] <strcat> ! would be Compl I guess?
[00:39:01] <strcat> but we don't have it
[00:39:05] <pcwalton> BitNeg
[00:39:08] <pcwalton> maybe
[00:40:55] <jld> I think I need to filter my rust-related github mail a little better.
[00:40:57] *** Quits: graydon (graydon@3853DDD.39EEDBB3.D758B1AA.IP) (Quit: Leaving.)
[00:41:18] <ski> strcat : "colours instead of ACTIONs" :(
[00:41:33] <strcat> jld: it isn't that bad with bors gone :)
[00:42:01] <jld> Oh, I see: `List-ID: mozilla/rust <rust.mozilla.github.com>` matches `^List-Id:.*\<rust.*mozilla\>`.
[00:42:05] <Eridius> is there any syntax when creating a closure that says to copy a given captured value instead of moving it?
[00:42:25] <steveklabnik> wait, you got rid of bors in your emails? how?
[00:42:26] <pcwalton> Eridius: no, there used to be, but it got removed. just copy on the outside and move the copy in
[00:42:38] <Eridius> pcwalton: argh. extra lines of code for this make me unhappy
[00:42:44] <jld> I guess I actually hadn't meant for my rusty github mail to go to the folder with the rust-dev mail that I don't look at often enough.
[00:43:04] <pcwalton> good news is niko's proposal might add it back in
[00:43:06] <pcwalton> with a macro
[00:43:22] <Eridius> yay
[00:43:29] <Eridius> hmm, I'm surprised at the precedence of `as`
[00:43:32] <aatch> bjz, ping
[00:43:36] <pcwalton> everyone is :)
[00:43:39] <pcwalton> I plan to bring it up
[00:43:51] <benh> What _is_ the precedence of `as`?
[00:44:03] <bjz> aatch: pong
[00:44:06] <bblum> the 'int' inside of vstore_fixed(_) is the length of the array, right?
[00:44:22] <Eridius> umm, I just had a task failure inside a task::try block kill my process
[00:44:30] *** Joins: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net)
[00:44:52] <bblum> Eridius: what did it do
[00:45:05] <Eridius> bblum: I called a function that failed an assert!()
[00:45:06] <Thiez> did something major change recently? I'm getting all kinds of 'use of undeclared module'/'unresolved name'/'use of undeclared type name' errors
[00:45:14] <Eridius> libc++abi.dylib: terminating with uncaught exception of type rust_task*
[00:45:27] <Eridius> Thiez: prelude stopped rexporing large swaths of std
[00:45:37] <Thiez> why would it do such a thing?
[00:45:45] <Eridius> Thiez: apparently people were confused that `use vec::foo` didn't work
[00:45:51] <aatch> bjz, I was thinking about rusp, and implementing JIT for it, and I don't think it'll actually be that hard to implement using LLVM's ExecutionEngine
[00:46:03] <Thiez> Eridius: I'm not sure I consider this an upgrade... :p
[00:46:22] <pcwalton> does anyone know if GLFW or SDL supports pinch-to-zoom?
[00:46:23] <Eridius> rusti: do task::try { assert!(false) }; print("yes")
[00:46:25] -rusti- rust: task failed at 'assertion failed: false', foo.rs:9
[00:46:26] -rusti- yes()
[00:46:29] <Thiez> so will adding 'use std::*;' to every file fix the problem? ;)
[00:46:37] <pcwalton> Thiez: it would, yeah
[00:46:39] <pcwalton> if you want that
[00:46:54] <Thiez> I will throw up in my mouth a little, and add that to all the files :p
[00:47:15] <bjz> aatch: neat!
[00:47:45] <aatch> It'll probably wipe out a lot of the work that you've already done however...
[00:47:49] <strcat> or we could make a dozen top-level crates and have incremental/parallel compiles ;p
[00:48:01] <Eridius> whoa, merely compiling my file now aborts
[00:48:02] <strcat> ofc inlining screws it all over anyway
[00:49:20] <aatch> bjz, it's interesting, a lot of stuff on the web about LLVM's JIT is that it isn't that good, but as far as I can tell, the problem is actually more that people aren't using it properly.
[00:49:45] <strcat> aatch: I think it's fine
[00:49:50] <strcat> it's just not meant for dynamic languages
[00:50:00] <bjz> aatch: it would be nice to do it properly :)
[00:50:13] <aatch> strcat, except that it can work for dynamic languages, you just have to be smart about it.
[00:50:16] *** Joins: caitp (caitp@moz-9FE842F.cpe.net.cable.rogers.com)
[00:50:28] <strcat> rusti isn't benefiting in any way from the JIT
[00:50:32] <strcat> because it compiles every time anyway
[00:50:40] <steveklabnik> can Rust do closures with varargs?
[00:50:41] <strcat> the JIT is just slowing it down
[00:50:45] <aatch> steveklabnik, nope
[00:50:49] <Thiez> steveklabnik: Rust doesn't do varargs
[00:50:54] <steveklabnik> bummer.
[00:50:56] *** Joins: deepdog (deepdog@moz-490E834C.client.mchsi.com)
[00:51:04] <strcat> steveklabnik: &[T] ;p
[00:51:08] <steveklabnik> heh
[00:51:10] <pcwalton> we need 'em
[00:51:11] <steveklabnik> http://blog.steveklabnik.com/posts/2013-05-30-rust--y-scraps--iterating-with-a-step
[00:51:11] <pcwalton> well
[00:51:14] <steveklabnik> is the motivation
[00:51:15] <pcwalton> at least for interop with C.
[00:51:21] <steveklabnik> see existing code up top and desired code in bottom
[00:52:11] <bblum> what is ty_unboxed_vec for?
[00:52:14] <steveklabnik> i can always stick with doing the top thing, it's no big deal
[00:52:39] <Eridius> https://github.com/mozilla/rust/issues/6849
[00:52:47] <Eridius> task::try is wholly unusable for me at the moment
[00:52:55] <strcat> pcwalton: or just #[abi = "vararg"] and not check the # of params (it's already unsafe)
[00:53:42] <pcwalton> Eridius: yikes, that seems bad -- brson, don't we have tests for that?
[00:53:45] <strcat> maybe people want varargs as a language feature but... you have to deal with types somehow
[00:53:52] <strcat> C doesn't
[00:54:04] <strcat> it just gets the types from elsewhere and assumes that source is write (printf format string)
[00:54:09] <strcat> is right*
[00:54:12] <aatch> bblum, [1,2,3] vectors
[00:54:22] <steveklabnik> i think with a ridiculous amount of reflection this case wouldn't be a big deal, but i'm used to a ridiculous amount and usage of reflection :)
[00:54:26] <acrichto> Eridius: are you using rusti or --jit ?
[00:54:45] <strcat> Eridius: which platform?
[00:54:45] *** Joins: n0vember (n0vember@moz-690FFF9D.org)
[00:54:48] <aatch> it's also the type of a dynamic vector once you strip the sigil
[00:54:56] <Eridius> acrichto: `rust build` or `rustc` directly. I didn't even know there was a --jit
[00:55:04] <steveklabnik> strcat: what i really want is the number of args a closure accepts, that would be enough. they aren't actually varargs, i guess
[00:55:08] <Eridius> strcat: OS X. I thought the host line in my issue said that ;)
[00:55:25] <acrichto> Eridius: the issue has the command `rustc foo.rs`, but that doesn't normally run any code
[00:55:26] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:55:27] <bblum> aatch: those aren't... legal, though, right? or how are they different from ty_evec(_, vstore_fixed(_)) ?
[00:55:29] <jld> pcwalton: I've commented on the PR with a nit, but I suspect it doesn't actually matter.
[00:55:29] <strcat> Eridius: oh, I see
[00:55:30] <Eridius> steveklabnik: what you're asking for is some sort of reflection
[00:55:45] <Eridius> acrichto: yes, my initial program fails when running, but the reduced testcase fails when _building_
[00:55:46] <strcat> Eridius: well,... I think we assume libstdc++
[00:55:50] <steveklabnik> Eridius: ccc. which isn't really in line with 'zero cost abstraction'
[00:56:03] <steveklabnik> Eridius: errr, 'yes' is what i meant to say
[00:56:07] <acrichto> oh dear that's not good...
[00:56:15] <aatch> bblum, sure, in user code, but it makes things like coercion from ~[T] to &[T] easier
[00:56:25] <bblum> hmmm
[00:56:32] <pcwalton> jld: ah, I was unsure about the difference
[00:57:21] <jld> pcwalton: I'm also not sure about the difference.  I tried tracing through the LLVM source a while back, and I was becoming unconvinced that there could be a difference.
[00:58:00] <Eridius> strcat: if you assume libstdc++, why is it apparently linking against libc++? Did it simply not pass the --stdlib flag to clang when building?
[00:58:05] <bjz> steveklabnik: I know it's not what you're after, but you might be able to do something like: for nums.in_groups(3) |[i, j, k]| { ... }
[00:58:14] <Eridius> although working with libc++ would be better because that's the future
[00:58:25] <steveklabnik> bjz: that's still pretty close
[00:58:35] <steveklabnik> bjz: does that kind of thing work now?
[00:58:40] *** Quits: eholk (eholk@moz-3D703D55.uconnect.utah.edu) (Quit: eholk)
[00:58:41] <strcat> Eridius: I wouldn't really say "it's the future", both are going to stay around for a long time.
[00:58:54] <Eridius> strcat: libstdc++ will never support C++11 on apple platforms
[00:58:55] <strcat> but rust hardcodes for unwinding stuff
[00:58:56] <bjz> steveklabnik: <3 argument pattern matching
[00:58:59] <Eridius> it's frozen to gcc 4.2.1
[00:59:03] <strcat> Eridius: sure it does, just not the version apple ships
[00:59:21] <strcat> by that logic rust doesn't support OS X
[00:59:21] <Eridius> strcat: ok fair enough, if you want to bundle libstdc++ yourself you can do whatever you want
[00:59:30] <steveklabnik> bjz: yeah, that's 90% of the way there. i dont think specifying the length runs how much nicer that kind of thing is.
[00:59:38] <steveklabnik> bjz: i'll play around with that, thanks!
[00:59:40] <bjz> steveklabnik: that's actually what you're doing when you do: foo.map(|&x| x * x)
[00:59:43] <strcat> Eridius: we should be using libunwind or something
[00:59:54] <strcat> there are hardcoded libstdc++ ABI things.
[00:59:54] <Eridius> strcat: but I'm guessing it's using the OS-provided stdlib, and letting clang decide which stdlib to use, otherwise you wouldn't be using libc++
[01:01:20] <jld> pcwalton: But, especially given that I'm currently waiting on review for a one-line patch elsewhere, I don't want to be *too* full of nitpicking here.
[01:01:36] <jld> pcwalton: (Elsewhere as in not Rust, I mean.)
[01:01:44] <strcat> /Unwinding ABI declarations.
[01:01:46] <strcat> typedef int _Unwind_Reason_Code;
[01:01:47] *** Quits: judder (maradukewa@385DDD8F.206937E4.78E362FE.IP) (Ping timeout)
[01:01:48] <strcat> typedef int _Unwind_Action;
[01:01:49] *** Quits: EXetoC (ex@moz-C741B177.customer.t3.se) (Quit: WeeChat 0.4.1)
[01:01:51] <strcat> it does that among other things
[01:01:58] <strcat> maybe that's the issue
[01:02:04] *** Joins: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP)
[01:02:04] *** Quits: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP) (Z:lined (Open Proxy found on your host. Please visit www.blitzed.org/proxy?ip=115.68.131.49 for more information.))
[01:02:53] <strcat> http://ix.io/5Sl afaik that definitely depends on the implementation details about the exception ABI
[01:03:13] <strcat> could be wrong
[01:03:15] *** Quits: jclements (jclements@2557E599.66715431.D25A875A.IP) (Quit: jclements)
[01:04:03] <strcat> and it uses __gxx_personality_v0
[01:04:45] <Eridius> well, when I get home, I'll see if I can figure out how to rebuild with the --stdlib=stdc++ flag passed to clang
[01:04:51] <Eridius> and see if that fixes it
[01:05:10] <Eridius> this assumes, of course, that there's no C++ code that uses C++11 stdlib features
[01:05:12] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[01:05:41] *** Joins: doomlord (doomlod@moz-3CF8202D.range81-159.btcentralplus.com)
[01:13:40] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[01:15:53] <Jeaye> The latest incoming has introduced an incorrect error on a potentially uninitialized variable within a macro. In this macro https://github.com/Jeaye/q3/blob/master/src/obj/voxel/map.rs#L277 (along with the others there) I get errors like: src/obj/voxel/map.rs:284:9: 284:12 error: use of possibly uninitialized value: `_p0`
[01:16:21] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Ping timeout)
[01:19:11] <Jeaye> Any ops know about this?
[01:20:30] *** Quits: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP) (Quit: pcwalton)
[01:20:48] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[01:21:57] *** Joins: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP)
[01:21:57] *** ChanServ sets mode: +o pcwalton
[01:22:26] *** Quits: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP) (Quit: pcwalton)
[01:27:43] *** Quits: MaikKlein (maik@moz-AC9459D8.dip0.t-ipconnect.de) (Ping timeout)
[01:28:14] *** Quits: thomaslee (thomaslee@moz-6C3931E3.static.twtelecom.net) (Client exited)
[01:29:37] <BitPuffin> are we far from 0.7?
[01:30:34] <aatch> BitPuffin, end-of-June
[01:30:36] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[01:30:42] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[01:30:47] <BitPuffin> oh cool!
[01:35:22] <strcat> rusti: 5
[01:35:23] -rusti- 5
[01:35:31] <strcat> rusti: print("foo")
[01:35:32] -rusti- foo()
[01:35:35] <strcat> uhh
[01:35:44] <strcat> rusti: print("foo\n")
[01:35:45] -rusti- foo
[01:35:45] -rusti- ()
[01:36:43] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[01:36:50] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:38:10] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[01:38:10] *** Quits: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se) (Client exited)
[01:38:12] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:38:33] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[01:38:35] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:39:18] <steveklabnik> in a situation like this, what do I do? https://gist.github.com/steveklabnik/5682476 repeat deals with ~strs...
[01:39:32] * steveklabnik is slowly but surely remembering how strong static typing works ;)
[01:39:42] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[01:39:42] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/3kmiEg
[01:39:42] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[01:39:48] <steveklabnik> a slightly contrived example for simplicity's sake
[01:40:03] <strcat> steveklabnik: if repeat really needs ~str, you have to copy with to_owned
[01:40:25] <steveklabnik> it gives one
[01:40:45] <steveklabnik> which would change the type of the returned string
[01:40:54] <steveklabnik> i want 'give me any kind of string, i'm making a new one'
[01:40:57] <steveklabnik> clone is only on ~strs
[01:41:16] <strcat> steveklabnik: to_str()/to_owned() is on slices though
[01:42:11] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[01:42:13] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:42:32] <steveklabnik> ahhh, to_owned would make a copy
[01:42:44] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[01:42:44] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/SPu_lQ
[01:42:44] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[01:42:45] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[01:42:45] <ghrust> 01[13rust01] 15bors pushed 7 new commits to 06auto: 02http://git.io/1GqVhA
[01:42:45] <ghrust> 13rust/06auto 1489f005d 15Tim Chevalier: rustc: Remove unused import
[01:42:45] <ghrust> 13rust/06auto 14bd12102 15Tim Chevalier: rustc: Improve astconv error message
[01:42:47] <ghrust> 13rust/06auto 1434d8eaa 15Tim Chevalier: syntax: Add an each_view_item method on traits
[01:42:48] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[01:43:06] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[01:43:07] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:43:17] <acrichto> r? https://github.com/mozilla/rust/pull/6570
[01:43:19] <strcat> heh rusti had a really weird bug in the PM handling
[01:43:29] <steveklabnik> strcat: thanks, i _think_ i got it now
[01:43:33] <strcat> it was eval'ing it and piping it to another rust instance
[01:43:35] <sp3d> strcat: sending himself responses?
[01:43:38] <steveklabnik> i really appreciate everyone answering my stupid questions
[01:43:39] <steveklabnik> :)
[01:43:40] <sp3d> ah
[01:43:44] <strcat> sp3d: weirder
[01:43:48] <sp3d> indeed
[01:43:50] <strcat> println("5");
[01:43:54] <strcat> would send 5 to itself
[01:43:57] <strcat> println("5 + 5");
[01:43:59] <strcat> would print 10
[01:44:02] <strcat> ;p
[01:44:38] <bblum> pull requests should come from branches based off of incoming, right?
[01:44:41] * strcat forgot to delete a line from before
[01:44:46] <strcat> bblum: yes
[01:45:10] *** Joins: SimonSapin (simon@moz-99690620.hinet-ip.hinet.net)
[01:45:42] *** Joins: mflamer (Mibbit@moz-FE8B7976.dsl.pltn13.sbcglobal.net)
[01:50:46] *** Quits: deepdog (deepdog@moz-490E834C.client.mchsi.com) (Ping timeout)
[01:50:52] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: sleep)
[01:52:01] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Client exited)
[01:54:11] *** Quits: mflamer (Mibbit@moz-FE8B7976.dsl.pltn13.sbcglobal.net) (Quit: http://www.mibbit.com ajax IRC Client)
[01:55:11] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[01:55:14] <Eridius> ugh, trying to tweak rust to pass -stdlib=libstdc++ to clang results in a linker failure
[01:59:36] <Eridius> I'm guessing the issue is llvm is compiled with libc++, but it's not obvious how to tweak that
[02:05:44] <acrichto> bblum: it looks like a few binaries leaked into your request, I'd also recommend the "//~ ERROR:" syntax for compile-fail tests
[02:06:47] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[02:06:47] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 145de5afd to 14237dce1: 02http://git.io/N3iJvQ
[02:06:47] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[02:06:48] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[02:06:48] <ghrust> 01[13rust01] 15bors pushed 10 new commits to 06auto: 02http://git.io/TwjT7g
[02:06:48] <ghrust> 13rust/06auto 14dcd8490 15Niko Matsakis: Remove TrByImplicitRef and source field on datums
[02:06:48] <ghrust> 13rust/06auto 142616581 15Niko Matsakis: Refactor helper routines to be less tied to match syntax
[02:06:48] <ghrust> 13rust/06auto 147dfb865 15Niko Matsakis: Remove local_imm/local_mem since all variables are now by reference
[02:06:51] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[02:10:00] <jld> Does Github not keep history of issue metadata changes?
[02:10:15] <jld> Like, show where in the chain of responses someone changed the title/tags/etc.
[02:10:37] <steveklabnik> jld: no
[02:14:35] *** Joins: eholk (eholk@moz-9AB4D52F.hsd1.ut.comcast.net)
[02:15:15] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[02:21:45] <bstrie> jld: it's understandable, keeping track of changes to an item over time is a problem that has never been solved
[02:22:12] <bstrie> if it had been solved, I'm sure someone would have built a website for it by now. a "hub", as it were
[02:22:24] <bstrie> but such is life
[02:28:33] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[02:28:44] <engla> github didn't use to be a "real" project host, just a git host
[02:29:00] *** Quits: Sorella (queen@B12A78F5.BA14766C.95C8B7C6.IP) (Quit: (quit))
[02:30:22] *** Quits: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP) (Ping timeout)
[02:34:51] <Jesse> why is https://github.com/mozilla/rust/blob/incoming/src/librustc/middle/borrowck/doc.rs a .rs file
[02:38:06] *** Quits: kimundi (kimundi@moz-3E75C1CD.dip0.t-ipconnect.de) (Ping timeout)
[02:41:01] *** Joins: kimundi (kimundi@moz-A9D9FFFC.dip0.t-ipconnect.de)
[02:41:13] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[02:41:24] *** Quits: eholk (eholk@moz-9AB4D52F.hsd1.ut.comcast.net) (Quit: eholk)
[02:41:32] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[02:41:50] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (Ping timeout)
[02:42:49] <lkuper> steveklabnik: ping
[02:43:30] <steveklabnik> lkuper: hi
[02:43:32] *** kimundi is now known as zz_kimundi
[02:43:42] <steveklabnik> when we talk to each other, our :s line up
[02:43:44] <steveklabnik> that's pretty funny
[02:44:02] <mcpherrin> steveklabnik: if you think about it, that always happens :)
[02:44:03] <steveklabnik> i guess that'd happen with anyone, i just noticed it now
[02:44:04] <steveklabnik> anyway
[02:44:18] <steveklabnik> sorry, slightly agitated at the moment.
[02:44:22] <lkuper> steveklabnik: ..wait, what?
[02:44:24] <steveklabnik> what's up?
[02:44:29] *** Quits: cjh (chellmuth@moz-45C21C42.compute-1.amazonaws.com) (Ping timeout)
[02:44:38] <steveklabnik> nothing, just babbling.
[02:44:58] <lkuper> heh!  ok.  I was wondering about this tweet: https://twitter.com/steveklabnik/status/340254788795133952
[02:45:14] * steveklabnik opens with care
[02:45:18] <lkuper> and what you're trying to accomplish
[02:45:18] <steveklabnik> whew! just _that_ tweet :)
[02:45:29] <lkuper> hah, what did you think it would be?
[02:45:29] <steveklabnik> okay, so, i'm parsing values out of a string
[02:45:36] <steveklabnik> and then i want to do an operation on them
[02:45:50] <steveklabnik> so, i get two Option(u8)s
[02:46:01] <lkuper> is the idea that you just don't want to have to write the _ case?
[02:46:04] *** Joins: cjh (chellmuth@moz-45C21C42.compute-1.amazonaws.com)
[02:46:25] <steveklabnik> in something like Haskell, which is rusty, Maybe would just cause the _ case to always happne, yeah
[02:46:37] <steveklabnik> just lift the operation into the maybe monad or whatever
[02:46:42] <steveklabnik> operate on the two values, get the result out
[02:47:04] <steveklabnik> the monad would be arbitrary of these computations, of course, with just two, it's not that big of a win over what i have there
[02:47:09] *** Quits: jack (jack@2557E599.66715431.D25A875A.IP) (Ping timeout)
[02:47:38] <lkuper> steveklabnik: well, I wonder if you can accomplish what you want using option::chain and friends, or a macro, or both
[02:47:44] <steveklabnik> my usage of "rusty" meant that my skills in haskell have atrophied, I just realized how amusing it is using that adjective in #rust
[02:48:03] <steveklabnik> it's possible! do you want me to gist you the Actual Code?
[02:48:08] <lkuper> sure
[02:49:13] <steveklabnik> https://gist.github.com/steveklabnik/5682680
[02:50:34] <lkuper> steveklabnik: my real motivation here is that I need to come up with a blog post by tomorrow to keep up my twice-a-month schedule
[02:51:15] <steveklabnik> haha
[02:51:20] <lkuper> and it's been a while since I did one about rust
[02:51:57] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: jorendorff)
[02:52:04] <steveklabnik> i think that effective usage of option types would make for a decent post
[02:52:53] <lkuper> yeah, and I've got this endless side project of actually documenting option.rs
[02:53:01] <steveklabnik> nice
[02:53:25] <lkuper> well, it would be nice if I actually ever worked on it
[02:54:17] <steveklabnik> :)
[02:54:19] <steveklabnik> docs are hard.
[02:54:26] <steveklabnik> i just got into a twitter argument over this :)
[02:54:37] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[02:54:52] <steveklabnik> (not rust related)
[02:55:04] <steveklabnik> i've just been focusing on examples
[02:55:20] <steveklabnik> as a newbie, getting the syntax 100% right can be tricky, examples make it so much nicer
[02:56:47] <thomaslee_> evening all
[02:57:04] <thomaslee_> kaeso, happen to be around?
[03:01:53] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[03:05:22] *** Joins: deepdog (deepdog@moz-490E834C.client.mchsi.com)
[03:08:01] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[03:09:10] *** Quits: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP) (Quit: lmandel)
[03:10:47] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Connection reset by peer)
[03:13:39] <lkuper> steveklabnik: well, this is defninitely not the recommended way to deal with option types, but it was a fun little experiment: https://gist.github.com/lkuper/5682750
[03:14:45] <lkuper> steveklabnik: I actually can't run your gist locally because I only have 0.5 on this machine
[03:15:07] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[03:15:07] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Connection reset by peer)
[03:15:38] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[03:15:38] <lkuper> I didn't know you could pass a closure to a macro.
[03:17:19] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Connection reset by peer)
[03:18:38] *** Quits: KindOne (KindOne@B2A5C4FE.9C5C45A3.EC6A1518.IP) (Quit: killed (ChanServ (Quit Message Spam is off topic.)))
[03:18:47] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[03:18:47] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/TwjT7g
[03:18:47] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[03:19:14] *** Joins: KindOne (KindOne@B2A5C4FE.9C5C45A3.EC6A1518.IP)
[03:19:19] *** Quits: Jesse (jruderman@2557E599.66715431.D25A875A.IP) (Quit: Jesse)
[03:19:55] <steveklabnik> lkuper: nice!, thanks, i'll check it out...
[03:20:35] <steveklabnik> cool
[03:20:41] <steveklabnik> i barely know macros
[03:20:51] <steveklabnik> so that's interesting even though, as you say, it doesnt really _work_ very well
[03:21:13] <lkuper> it was kinda just to see if I could.  there's got to be something in the option library that already does what you want
[03:21:24] <lkuper> but macros are fun
[03:21:38] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[03:21:44] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[03:21:44] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/DLlW6Q
[03:21:44] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[03:21:45] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[03:21:45] <ghrust> 01[13rust01] 15bors pushed 8 new commits to 06auto: 02http://git.io/Un1t1A
[03:21:45] <ghrust> 13rust/06auto 14d32ca22 15Corey Richardson: extra::term overhaul
[03:21:45] <ghrust> 13rust/06auto 14a5fdc99 15Corey Richardson: Use find_equiv in term
[03:21:45] <ghrust> 13rust/06auto 1463d308a 15Corey Richardson: rustpkg borrowed pointers
[03:21:46] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[03:22:28] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Connection reset by peer)
[03:23:19] <lkuper> you get a big ol' pile of errors if you forget the parens around `($fun)` in that code
[03:23:24] <lkuper> one for each expansion site
[03:23:32] <steveklabnik> heh
[03:23:34] <lkuper> like C++ templates
[03:23:54] <engla> here is some do notation for rust, https://mail.mozilla.org/pipermail/rust-dev/2013-May/004182.html
[03:24:42] <engla> and yes the monadic bind operation is called .chain for Option and Result
[03:24:51] <engla> but there are details like chain_ref etc.
[03:25:47] <lkuper> engla: oh, slick
[03:26:24] <engla> well except it's a syntax extension and not just a macro
[03:26:57] <engla> could it also be extended to give list comprehensions?
[03:27:04] <engla> "vec" comprehensions
[03:27:06] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[03:27:07] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[03:28:33] <lkuper> engla: ah, yeah, I see.  it had to be baked in.
[03:29:06] *** Joins: eholk (eholk@moz-9AB4D52F.hsd1.ut.comcast.net)
[03:29:07] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Connection reset by peer)
[03:30:31] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[03:30:39] <lkuper> I missed that whole thread.  interesting.
[03:30:44] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[03:30:44] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1473bab4e to 143869f7a: 02http://git.io/N3iJvQ
[03:30:44] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[03:31:07] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[03:34:08] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[03:34:08] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Connection reset by peer)
[03:34:39] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[03:37:22] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Connection reset by peer)
[03:37:37] *** Quits: deepdog (deepdog@moz-490E834C.client.mchsi.com) (Quit: Leaving)
[03:38:11] <steveklabnik> neat
[03:40:39] *** Quits: bent (chatzilla@moz-932324BF.hsd1.ca.comcast.net) (Quit: ChatZilla 0.9.90-rdmsoft [XULRunner 18.0.2/20130201065344])
[03:41:42] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[03:42:12] *** Quits: caitp (caitp@moz-9FE842F.cpe.net.cable.rogers.com) (Quit: caitp)
[03:43:42] *** Quits: SiegeLord (siege@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[03:46:09] *** Joins: brson (brson@E9CDE21E.991753BB.CA4D1600.IP)
[03:46:09] *** ChanServ sets mode: +o brson
[03:49:24] *** Joins: z0w0 (zack@moz-2EC4AEFE.lns7.cha.bigpond.net.au)
[03:49:25] *** cscott is now known as cscottnet_away
[03:49:57] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Connection reset by peer)
[03:54:11] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[03:54:42] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[03:55:24] *** Quits: jaen (jaen@moz-AEEB3C04.play-internet.pl) (Ping timeout)
[03:56:08] <bjz> steveklabnik: https://gist.github.com/bjz/5682854
[03:56:33] <bjz> steveklabnik: unfortunately you can't do the pattern matching because it's refutable
[03:56:40] <bjz> ie. it can fail
[03:57:08] <bjz> the vector could be greater or less than n
[03:57:26] <bjz> (ie. the vector arg of the closure)
[03:58:32] *** cscottnet_away is now known as cscottnet
[04:00:13] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Connection reset by peer)
[04:00:57] <tikue> rusti: use core::num::Algebraic; Algebraic::sqrt(2)
[04:00:59] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/REPd
[04:02:54] *** Quits: wizeman (quassel@moz-9C343656.dyn.user.ono.com) (Connection reset by peer)
[04:03:06] *** Joins: wizeman (quassel@moz-9C343656.dyn.user.ono.com)
[04:03:47] *** Quits: tiffnya (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Ping timeout)
[04:04:42] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[04:07:23] <bjz> rusti: 2f.sqrt() // tikue
[04:07:23] *** cscottnet is now known as cscottnet_away
[04:07:25] -rusti- 1.41421356
[04:07:38] <tikue> bjz: thanks :)
[04:07:59] <bjz> tikue: you can't use that notation *yet*
[04:08:11] <bjz> although it will be added I think
[04:08:56] <tikue> rusti: 2.sqrt()
[04:08:56] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Connection reset by peer)
[04:08:58] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/ZSCb
[04:09:19] <bjz> tikue: not possible
[04:09:27] <bjz> nor is this:
[04:09:38] <bjz> rusti: 2.0.sqrt() // :(
[04:09:39] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/RVFX
[04:09:49] <tikue> darn
[04:09:50] *** Joins: adu (ajr@moz-96FE9B84.washdc.fios.verizon.net)
[04:09:51] <bjz> rust can't infer from methods
[04:09:57] *** Quits: eholk (eholk@moz-9AB4D52F.hsd1.ut.comcast.net) (Quit: eholk)
[04:09:57] <adu> hi
[04:09:59] <bjz> which is really silly
[04:10:18] <bjz> adu: hiya
[04:10:53] <adu> wow that's a lot of ppl
[04:11:16] <bjz> aye :)
[04:11:55] <tikue> bjz: apparently you can't cast T:Num to float?
[04:11:56] <bjz> not as much as go-nuts yet, however ;)
[04:11:58] <lkuper> steveklabnik: see if this works? https://gist.github.com/lkuper/5682894
[04:12:02] <bjz> but more than #D
[04:12:04] <bjz> :D
[04:12:24] <lkuper> steveklabnik: I might have messed something up...I'd run it if I had 0.6 installed!
[04:12:59] <bjz> tikue: no, unfortunately I haven't got around to adding those methods yet
[04:13:34] <bjz> tikue: you can cast from NumCast though (for casting primitive numbers)
[04:13:42] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[04:13:58] <adu> bjz: #go-nuts is a room I also like to frequent :)
[04:14:24] <bjz> tikue: this is the current numeric issue: https://github.com/mozilla/rust/issues/4819
[04:14:28] *** cscottnet_away is now known as cscottnet
[04:14:32] <bjz> tikue: feel free to contribute
[04:14:57] <bjz> tikue: I've been distracted by other things lately, like making a mini-scripting language :)
[04:15:35] <adu> I have 0.6 installed
[04:15:35] <bjz> tikue: although I'm back working on my maths lib again, so I might have to do more work on that front
[04:15:43] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[04:15:43] <bjz> adu: use incoming
[04:15:53] <bjz> adu: 0.6 is ancient history
[04:15:56] <adu> is that the one where core no longer exists?
[04:16:00] <bjz> yah
[04:16:06] <adu> hrm ok
[04:16:43] <bjz> adu: you're far better off keeping up to date with incoming and evolving your code than waiting for the next release
[04:16:58] <tikue> bjz: how much is left to be done to get methods working with Num generics? I was just trying to add Point2D.norm()  in rust-geom but ran into this sqrt stumbling block
[04:17:32] <bjz> adu: we have a buildbot (bors, bless him), so a burning tree is *exteremely* rare
[04:17:44] <adu> "burning tree"?
[04:17:51] <bjz> tikue: I have a generic lib, you might want to check it out
[04:18:07] <bjz> tikue: I'm actually updating it today
[04:18:16] <bjz> tikue: it's bitrotted
[04:18:33] <bjz> tikue: but you might see some useful stuff in terms of generics
[04:18:34] <adu> any chance my posix-compliant echo might become an example in the tutorial?
[04:18:45] <bjz> tikue: https://github.com/bjz/lmath-rs
[04:18:51] <bjz> adu: gist it
[04:18:55] <adu> http://pastie.org/7987153
[04:19:11] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[04:20:31] <adu> https://gist.github.com/andydude/5682918
[04:20:44] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[04:21:33] <lkuper> adu: burning tree means that the head-of-the-tree build is broken.  it's a mozilla-ism.
[04:22:04] <adu> ah, I thought that was forbidden in every coder subculture
[04:22:14] <lkuper> oh, it is
[04:22:22] <lkuper> but "burning tree" is what it's called at mozilla
[04:22:49] <adu> it bothers me a little bit when people come up with names for forbidden things
[04:23:01] <mcpherrin> adu: well it's not a situation you want to be in, but it happens sometimes
[04:23:02] <bjz> adu: like Voldermort?
[04:23:14] <adu> bjz: no, like donkey punch
[04:23:26] <bjz> "the situation that shall not be named"
[04:23:32] <adu> lol
[04:23:32] <Jesse> i don't want to look that up on urbandictionary, do i
[04:23:51] <lkuper> adu: heh, well, incoming burning is not nearly as bad as master burning
[04:24:20] <lkuper> although either rarely happens these days due to bors
[04:24:39] <adu> sweet
[04:25:04] <adu> Jesse: don't
[04:27:01] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[04:27:16] *** Joins: jack (jack@2557E599.66715431.D25A875A.IP)
[04:28:27] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[04:31:29] *** Joins: dbaupp (Thunderbir@moz-C6B1454A.lns20.syd7.internode.on.net)
[04:32:27] *** Quits: wizeman (quassel@moz-9C343656.dyn.user.ono.com) (Connection reset by peer)
[04:33:15] *** Joins: wizeman (quassel@moz-9C343656.dyn.user.ono.com)
[04:33:45] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[04:33:45] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/NoQ13Q
[04:33:45] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[04:35:07] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[04:36:41] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[04:36:41] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/wriR-Q
[04:36:41] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[04:39:42] *** Quits: z0w0 (zack@moz-2EC4AEFE.lns7.cha.bigpond.net.au) (Quit: Leaving.)
[04:40:13] <bjz> adu: https://gist.github.com/bjz/5682965
[04:41:02] <bjz> oh wait, mistake
[04:41:47] <bjz> adu: ./echo hi hi prints one hi
[04:41:52] <bjz> :S
[04:42:27] <adu> I think you forgot spaces
[04:43:06] <bjz> ohh
[04:43:18] <bjz> indeed :)
[04:43:46] <adu> and for some reason it's always matching the first one
[04:43:48] *** Quits: aruniiird (arun@84E199D6.DCDBCF8E.83D0DF30.IP) (Ping timeout)
[04:45:48] <adu> also, how does it compare os::args()[1] and ~"-n"?
[04:45:50] *** Joins: jaen (jaen@moz-AEEB3C04.play-internet.pl)
[04:46:04] <adu> is it based on string equality or pointer?
[04:46:47] <dbaupp> rusti: match [~"foo"] { [~"foo"] => true, _ => false }
[04:46:48] -rusti- true
[04:46:57] <dbaupp> adu: string equality,
[04:47:09] <adu> ok
[04:47:31] <dbaupp> bjz: you probably want the second match to be [_, .. strs]
[04:47:59] <bjz> dbaupp: yeah
[04:48:01] <bjz> just a sec
[04:48:05] <bjz> lmost have it
[04:48:05] <dbaupp> bjz: and print(str::connect(strs, " ")); might work
[04:48:43] <dbaupp> bjz: should I merge that PR on rusp and add nil? and = separately? (or push a commit doing that to dev-bjz?)
[04:48:51] <adu> dbaupp: but then it complains that a rule doesn't exist for []
[04:48:52] <bjz> yeah
[04:49:32] <dbaupp> adu: the patterns are incomplete (since if os::args() returns ~[], nothing matches) and that is illegal in rust
[04:49:33] *** Joins: brendan (brendaneic@moz-EAC95265.hfc.comcastbusiness.net)
[04:49:58] <dbaupp> adu: just adding a `_ => fail!("no program name")` line should work
[04:50:06] <dbaupp> bjz: yeah to which? :p
[04:50:52] <adu> fail!(~"no program name")
[04:51:12] *** Quits: steveklabnik (steve@moz-5EF6C37C.socal.res.rr.com) (Ping timeout)
[04:51:46] *** cscottnet is now known as cscottnet_away
[04:52:00] *** cscottnet_away is now known as cscottnet
[04:52:39] <bjz> dbaupp: https://gist.github.com/bjz/5682965
[04:52:50] <bjz> for some reason it doesn't print the first arg
[04:53:08] <adu> bjz: that's what I was saying, it always matches the first branch
[04:53:22] <adu> it thinks "-n" == first arg even when it's not
[04:53:35] <dbaupp> bjz: that's pretty strange
[04:53:43] <bjz> yeah
[04:53:53] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Connection reset by peer)
[04:53:54] <bjz> problem with patterns?
[04:54:25] <adu> bjz found a bug!
[04:54:52] <bjz> also if you remove the 'ref' and the deref you get a malloc error
[04:55:08] <bjz> adu: but that should work :(
[04:55:20] <adu> I agree, the logic is sound
[04:55:24] <dbaupp> this seems to work https://gist.github.com/huonw/5683000
[04:55:40] <bjz> nice
[04:55:42] <dbaupp> so it does look likes it's a bug with patterns
[04:55:45] <bjz> not too shabby
[04:56:02] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[04:56:05] <bjz> adu: vec destructuring is so nice
[04:56:08] <dbaupp> (it's annoying that a temp is required)
[04:56:10] <bjz> when it works :)
[04:57:52] <bjz> dbaupp: ok
[04:57:53] <adu> dbaupp: that's cool
[04:57:58] <bjz> dbaupp: um
[04:58:20] <dbaupp> just added a new version... first class functions are awesome! hehe
[04:58:20] <bjz> dbaupp: I was looking at the clojure doecs for arithmetic
[04:58:30] <adu> dbaupp: I got "note: ...but borrowed value is only valid for the method call at 2:10"
[04:58:38] *** Joins: lkuper_ (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[04:58:43] <bjz> adu: incoming?
[04:59:06] <dbaupp> adu: what version of rust?
[04:59:19] <dbaupp> bjz: and clojure does... ?
[04:59:28] <adu> dbaupp: 0.6, I'm working on installing incoming right now
[04:59:44] <bjz> dbaupp: (do (= (+) 0) (= (+ 1) 1) (= (-) 0) (= (- 1) -1))
[05:00:06] <bjz> dbaupp: atm we don't do that
[05:00:30] <bjz> dbaupp: I think that's a better way to go
[05:00:31] <dbaupp> bjz: oh
[05:00:36] <dbaupp> bjz: yeah, it's nice
[05:00:54] <bjz> dbaupp: for rust: copy haskell, for rusp: copy clojure x)
[05:00:57] <dbaupp> wait
[05:00:59] <dbaupp> user=> (-)
[05:00:59] <dbaupp> java.lang.IllegalArgumentException: Wrong number of args (0) passed to: core$- (NO_SOURCE_FILE:0)
[05:01:03] <ski> bjz : what does that do ?
[05:01:14] <bjz> ski: ?
[05:01:26] <ski> the `do' stuff
[05:01:29] <dbaupp> ski: that code isn't rust, but those statements are all true in clojure
[05:01:35] <dbaupp> (i.e. it's clojure)
[05:01:36] <bjz> ski: me and dbaupp are doing a little scripting language
[05:01:45] <bjz> dbaupp: ahh
[05:01:50] <dbaupp> (all true except for the (-) one)
[05:01:50] <ski> dbaupp : oh, i see
[05:02:03] <bjz> dbaupp: I guess that makes sense
[05:02:29] <dbaupp> bjz: we currently expect at least (+ a b) right?
[05:02:31] *** Joins: victorporof (victorporo@DE2B5DEF.67CDC207.79933D60.IP)
[05:02:43] <bjz> ski: s-exprs are super nice bacause after less than a week of work we have a semi-functioning language
[05:02:49] <bjz> dbaupp: yah
[05:02:58] * ski was thinking of `do' in Scheme,Common Lisp
[05:03:04] <bjz> dbaupp: also (/) == 1
[05:03:11] <bjz> ski: it's the same
[05:03:30] <dbaupp> bjz: it could just be a foldl
[05:03:30] <bjz> ski: oh wait
[05:03:37] <ski> bjz : looked more like `begin'/`progn', iiuc
[05:03:49] <bjz> ski: that doesn't wactually work, you're right
[05:04:09] <dbaupp> bjz: `do params.foldl(@Int(0)) |old, new| { match env.eval(new) { ... } }`
[05:04:21] <dbaupp> (or whatever the starting conditions should be)
[05:04:32] <bjz> dbaupp: that looks nice
[05:04:47] <dbaupp> bjz: also (*) == 1, (/) == exception ;P
[05:05:16] <bjz> oh wait, I meant also (*) == 1
[05:05:22] <bjz> *facepalm*
[05:05:27] <dbaupp> heh
[05:05:43] <dbaupp> do you want to update the PR?
[05:05:58] <bjz> have you started on it yet?
[05:06:04] <bjz> or shall I
[05:06:26] <dbaupp> nah, I haven't even got the code open yet
[05:06:35] <bjz> ok
[05:06:46] <bjz> I shall then
[05:07:17] <bjz> trouble with foldl is you can't short-circuit
[05:07:20] <bjz> :(
[05:07:25] <dbaupp> bjz: oh
[05:07:42] <dbaupp> a manual loop then, I guess
[05:08:00] <bjz> yeah, unfortunately
[05:08:25] <dbaupp> ok, code open now. I guess just changing the result.head() thing would work?
[05:08:55] <dbaupp> except a condition to distinguish between + * and / - % is probably necessary
[05:09:30] <bjz> dbaupp: I'm actually doing a list destructure atm
[05:09:34] <tikue> if I have a function defined somewhere outside the working file, and I want to be able to pass that function in as an argument to functions in my current file, what steps must I take?
[05:09:43] <bjz> the macro takes a default expr
[05:09:43] <dbaupp> bjz: oh, you changed it?
[05:10:12] <dbaupp> bjz: cool... I'll leave it entirely in your hands then, since you seem to know what's what :)
[05:10:16] <bjz> in the process of
[05:10:35] <dbaupp> (it seems that clojure's mod takes exactly 2 arguments, btw)
[05:11:12] <dbaupp> tikue: if it's in a mod you've got in scope, `foo(bar::baz::my_function)` should work file
[05:11:13] <dbaupp> *fine
[05:11:26] <bjz> ok
[05:11:39] <dbaupp> tikue: (or `foo(|x, y, z| bar::baz::my_function(x, y, z))`)
[05:13:36] *** Joins: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net)
[05:14:51] <bjz> dbaupp: actually, I don't know wtf I'm doing
[05:15:01] <bjz> we need a better way to do promotions
[05:15:15] <bjz> if we want promotions at all
[05:15:31] <bjz> ie. implicit conversions of numbers
[05:15:58] <dbaupp> bjz: I'd probably be happy with an '(as value type)' function
[05:16:02] <dbaupp> (or just (type value))
[05:16:05] <dbaupp> to convert
[05:16:12] <dbaupp> and have no implicit conversions
[05:16:24] <bjz> (float->int 4)
[05:16:28] <dbaupp> (it'd make adding a type system easier, if we want to do that)
[05:16:36] <bjz> :)
[05:16:48] <dbaupp> what to you think?
[05:16:51] <dbaupp> *do
[05:16:57] <bjz> ok
[05:17:11] <bjz> sounds good
[05:17:20] <adu> bjz: this is my favorite version yet: https://gist.github.com/andydude/5682918
[05:18:01] <dbaupp> adu: that is nice!
[05:18:12] <adu> :) I learn quick
[05:18:37] <adu> and unwords comes from haskell
[05:18:37] <bjz> adu: we're all still learning to be rustic
[05:18:45] <bjz> :)
[05:19:03] <bjz> adu: might be a good one to have in std::str
[05:19:06] <dbaupp> (and what's rustic keeps changing as the the language improves)
[05:20:53] *** Joins: steveklabnik (steve@moz-5EF6C37C.socal.res.rr.com)
[05:21:00] <adu> :)
[05:23:30] *** Quits: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net) (Ping timeout)
[05:23:59] *** Quits: adu (ajr@moz-96FE9B84.washdc.fios.verizon.net) (Quit: adu)
[05:25:50] *** Quits: steveklabnik (steve@moz-5EF6C37C.socal.res.rr.com) (Ping timeout)
[05:26:38] <bjz> rusti: 0/0
[05:26:40] -rusti- rust: task failed at 'attempted to divide by zero', foo.rs:10
[05:26:40] -rusti- rust: domain main @0x81f1b0 root task failed
[05:26:40] -rusti- application terminated with error code 101
[05:26:45] <bjz> rusti: 1/0
[05:26:46] -rusti- rust: task failed at 'attempted to divide by zero', foo.rs:10
[05:26:46] -rusti- rust: domain main @0x20f51b0 root task failed
[05:26:46] -rusti- application terminated with error code 101
[05:26:51] <bjz> rusti: 0/1
[05:26:52] -rusti- 0
[05:26:58] *** Quits: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[05:28:51] <tikue> How does one go about creating an @fn? let foo = || bar; doesn't do the trick
[05:29:02] <tikue> (Obviously)
[05:29:13] *** Joins: steveklabnik (steve@moz-5EF6C37C.socal.res.rr.com)
[05:29:25] *** zz_kimundi is now known as kimundi
[05:30:29] <dbaupp> rusti: let foo: @fn() = || {};
[05:30:31] -rusti- ()
[05:30:58] <dbaupp> rusti: fn foo(_: @fn()) { } foo(|| {})
[05:30:59] -rusti- ()
[05:31:07] <dbaupp> tikue: it's inferred
[05:31:19] <dbaupp> but sometimes you might need to give it a specific type
[05:31:25] *** Joins: pcwalton (pcwalton@moz-481A040C.hsd1.ca.comcast.net)
[05:31:26] *** ChanServ sets mode: +o pcwalton
[05:31:27] <bjz> rusti: 1 % 0
[05:31:28] -rusti- rust: task failed at 'attempted remainder with a divisor of zero', foo.rs:10
[05:31:28] -rusti- rust: domain main @0xdf41b0 root task failed
[05:31:28] -rusti- application terminated with error code 101
[05:31:38] <tikue> hmmm
[05:31:45] *** Joins: sankha93 (Instantbir@C6B0638B.9B0C8999.BE90E62C.IP)
[05:31:53] <dbaupp> bjz: (didn't you write most of those error messages? :P )
[05:32:01] <bjz> I forgot them
[05:32:03] <bjz> :P
[05:33:17] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[05:33:44] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Quit: Tschuss!)
[05:34:19] <tikue> well rustic isn't doing a very good job of inferring them for me :( just an ICE to meet u
[05:34:41] <dbaupp> tikue: oh :(
[05:34:45] <dbaupp> what version of rust?
[05:34:56] <tikue> whatever servo is running
[05:35:01] <dbaupp> can you put the code in a gist?
[05:35:27] <tikue> gist?
[05:35:43] <dbaupp> or pastebin? (online somewhere)
[05:35:46] <tikue> ah
[05:35:50] <dbaupp> https://gist.github.com/
[05:36:00] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Quit: Computer has gone to sleep.)
[05:36:08] <tikue> I don't know if I can make it into a small example
[05:36:13] <tikue> let me think
[05:36:36] <dbaupp> tikue: what's the error message for the ICE?
[05:36:45] <dbaupp> (and/or the backtrace from RUST_LOG=::rt::backtrace)
[05:36:46] <bjz> tikue: are you doing generic math?
[05:37:06] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[05:37:38] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[05:37:44] <tikue> I'm not doing generic math -- here's the message
[05:38:00] <tikue> rust: ~"failed to find block with tag 12"
[05:38:01] <tikue> rust: task failed at 'explicit failure', /Users/tkuehn/servo/src/compiler/rust/src/libstd/ebml.rs:198
[05:38:02] <tikue> error: internal compiler error: unexpected failure
[05:38:04] <tikue> note: the compiler hit an unexpected failure path. this is a bug
[05:38:05] <tikue> note: try running with RUST_LOG=rustc=1,::rt::backtrace to get further details and report the results to github.com/mozilla/rust/issues
[05:38:06] <tikue> rust: task failed at 'explicit failure', /Users/tkuehn/servo/src/compiler/rust/src/librustc/rustc.rc:355
[05:38:07] <tikue> rust: domain main @0x7ff9e380ba10 root task failed
[05:38:13] <bjz> tikue: oh ok
[05:38:56] <bjz> tikue: you were asking before about it, that's why I asked. If you were I was going to say, "I know your pain".
[05:39:15] <tikue> bjz: :) I simply gave up on that stuff. I was getting lots of ICE's earlier when trying to use sqrt
[05:39:22] <bjz> hah
[05:39:29] <tikue> bjz: just hardcoding the distance formula for now
[05:39:31] *** Joins: aruniiird (arun@92D70115.B332A52C.E3D0A897.IP)
[05:39:41] <tikue> here's what I'm trying to do now:
[05:39:52] <bjz> tikue: I'm rigigging lmath, will be done soon
[05:39:59] <bjz> hopefully in a day or so
[05:40:05] <bjz> it keeps breaking :P
[05:40:20] <tikue> let create_mouse_callback: &fn(SharedChan<ScriptMsg>, &fn(Point2D<f32>) -> Event) -> @fn(Point2D<f32>) = |chan, event| { |point| {stuff} }
[05:40:35] <tikue> bjz: great :)
[05:40:39] *** Joins: MaikKlein (maik@moz-AC9459D8.dip0.t-ipconnect.de)
[05:40:40] *** Joins: haard (fredrik@18E6EC45.6A26450D.BE04C429.IP)
[05:41:21] *** Quits: sankha93 (Instantbir@C6B0638B.9B0C8999.BE90E62C.IP) (Ping timeout)
[05:41:45] <tikue> that last bit is more like: |chan, event| { |point| { chan.send(event(point)) } }
[05:41:51] <bjz> tikue: I'll have to do some regressions, it won't be as pretty as it was, but that will be fixed in the future
[05:42:05] <dbaupp> tikue: you could possibly skip the big type declaration and use `let create_mouse_callback = |char, event| -> @fn(Point2D<f32>) { |point| ... }`
[05:42:13] <dbaupp> *chan
[05:42:15] <bjz> tikue: what lib are you using btw?
[05:42:39] <tikue> bjz: what lib am I using for which stuff?
[05:42:52] <bjz> tikue: io
[05:42:57] <bjz> tikue: mouse events
[05:43:01] <tikue> ah, glut
[05:43:29] <bjz> tikue: does it have ports/chans in it now?
[05:43:39] <tikue> no, that's just from core::
[05:43:40] *** Quits: MaikKlein (maik@moz-AC9459D8.dip0.t-ipconnect.de) (Ping timeout)
[05:43:57] <bjz> tikue: no, I mean does it use them
[05:44:04] <bjz> tikue: or are you wrapping a callback
[05:44:22] <tikue> Yes I'm just wrapping a callback
[05:44:25] <bjz> ok
[05:44:45] <tikue> Basically I'm adding callbacks for click, mouse_up, and mouse_down
[05:44:49] <bjz> yeah just wondering if there was something I could steal for glfw-rs ^_^
[05:45:02] * bjz wants to move to ports/chans
[05:45:18] <tikue> but they're all basically the same, so I thought it'd be nice if they were created via a function
[05:45:25] <tikue> rather than manually
[05:45:32] <tikue> DRY, etc.
[05:45:49] <bjz> yeah, I want it integrated into glfw-rs
[05:45:49] *** Joins: sankha93 (Instantbir@AA246FA9.205A684B.BE90E62C.IP)
[05:46:03] <bjz> most of the wrapper is ideomatic as it stands
[05:46:15] <bjz> apart from the consts and callbacks
[05:46:20] <tikue> bjz: I'm not sure I follow -- what do you want to steal for glow?
[05:46:27] <tikue> glfw*
[05:46:30] <bjz> ports/chans
[05:46:40] <bjz> but apparently it doesn't use them
[05:46:59] <tikue> bjz: oh ok, yeah I don't know what glut does. I know little about it other what is exposed to servo :O)
[05:47:13] * bjz weeps at glut
[05:47:17] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[05:47:53] <bjz> major crnge factor
[05:47:58] <bjz> *cringe
[05:48:21] <bjz> :P
[05:48:50] <tikue> dbaupp: thanks, i tried that. still ICE'ing
[05:48:52] <tikue> :(
[05:49:13] *** Joins: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP)
[05:50:03] <bjz> dbaupp: I'm also impling the other operators while I'm ata it
[05:50:06] <bjz> *at
[05:50:08] *** Quits: sankha93 (Instantbir@AA246FA9.205A684B.BE90E62C.IP) (Ping timeout)
[05:50:25] <dbaupp> bjz: xor and so on?
[05:50:30] <dbaupp> bjz: (** for power?)
[05:50:35] <bjz> yah
[05:50:36] <dbaupp> tikue: not really sure :(
[05:51:15] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[05:51:44] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[05:51:44] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/grEqbg
[05:51:44] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[05:53:12] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[05:54:17] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[05:54:42] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[05:54:42] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/6Yznmg
[05:54:42] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[05:54:43] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[05:54:43] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/Pb_IIA
[05:54:43] <ghrust> 13rust/06auto 143772c1e 15Steve Klabnik: Switch expected and actual in assert_eq!...
[05:54:43] <ghrust> 13rust/06auto 147010b43 15bors: auto merge of #6847 : steveklabnik/rust/switch_expected_given, r=brson...
[05:54:44] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[05:55:41] *** Joins: sankha93 (Instantbir@2E16043C.BBCFAF58.F4137E23.IP)
[05:55:42] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[05:56:19] <dbaupp> bjz: have you done any work towards the functions and environments/scoping thing?
[05:56:27] <bjz> no
[05:56:34] <bjz> you're welcome to take that
[05:56:36] <dbaupp> cool, I'll have a go now
[05:59:56] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[06:00:14] *** Joins: MaikKlein (maik@moz-AC9459D8.dip0.t-ipconnect.de)
[06:02:08] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Quit: Tschuss!)
[06:08:28] <dbaupp> bjz: I feel like they're be less code duplication if we had Fn(~[Ident], @Value, FnType), Extern(@fn(..) ..., FnType) enum FnType { Fn, Macro }
[06:08:35] <dbaupp> do you disagree with that sort of flag?
[06:09:03] <bjz> no
[06:09:11] <bjz> that's self-documenting
[06:13:00] *** Joins: ysuzuki (ysuzuki@moz-A563888C.ics.keio.ac.jp)
[06:16:07] *** Joins: busylizzy (lisa@85228838.12D0DC84.211374C4.IP)
[06:16:15] *** Quits: aruniiird (arun@92D70115.B332A52C.E3D0A897.IP) (Ping timeout)
[06:17:58] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[06:19:38] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[06:19:47] *** Quits: Jesin (Jessin_@moz-3AD6F09F.res.lehigh.edu) (Ping timeout)
[06:20:28] <Jeaye> bjz: Do you know how those 'mods' vars are supposed to be used for the keyboard callbacks?
[06:20:46] <Jeaye> I'd wager they were bitmasks, but they're signed.
[06:21:05] <bjz> Jeaye: look ar callbacks.rs
[06:21:06] <bjz> *at
[06:21:11] <Jeaye> sure
[06:21:30] *** Quits: sankha93 (Instantbir@2E16043C.BBCFAF58.F4137E23.IP) (Ping timeout)
[06:22:13] *** Quits: MaikKlein (maik@moz-AC9459D8.dip0.t-ipconnect.de) (No route to host)
[06:22:25] <Jeaye> Ah, they are.
[06:22:33] <Jeaye> Odd that they're signed.
[06:22:41] *** Joins: MaikKlein (maik@moz-AC9459D8.dip0.t-ipconnect.de)
[06:23:03] <bjz> Jeaye: seems to be that dreda makes everything ints
[06:23:12] <Jeaye> hah
[06:23:39] <bjz> Jeaye: I want to wrap all the consts in structs to make it typesafe, but there are bugs blocking that
[06:23:51] <Jeaye> Bugs >.<
[06:23:57] <bjz> >.<
[06:24:00] <bjz> ICEs
[06:24:18] <bjz> ICE knowing you!
[06:24:18] <Jeaye> Aye
[06:24:24] <Jeaye> heh
[06:24:33] <Jeaye> Aye[ce]
[06:24:39] <bjz> *reverts to FORTRAN*
[06:24:52] <Jeaye> Oh dear.
[06:25:46] <tikue> ugh, come on, I feel like people must do this kind of thing all the time. why won't it work for me:((
[06:26:00] <tikue> a function that makes functions! classic pattern
[06:26:01] *** Joins: sankha93 (Instantbir@CA89B766.3C13EDA5.F4137E23.IP)
[06:26:17] <bjz> I do
[06:26:22] *** Quits: victorporof (victorporo@DE2B5DEF.67CDC207.79933D60.IP) (Quit: victorporof)
[06:27:56] *** Quits: pcwalton (pcwalton@moz-481A040C.hsd1.ca.comcast.net) (Quit: .)
[06:30:35] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[06:33:30] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[06:33:35] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[06:33:44] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[06:33:44] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 147010b43 to 147272743: 02http://git.io/N3iJvQ
[06:33:44] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[06:33:46] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[06:33:46] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/husW-Q
[06:33:46] <ghrust> 13rust/06auto 1440b4557 15Patrick Walton: librustc: Bump the offset when translating const structs. Closes #6352.
[06:33:46] <ghrust> 13rust/06auto 146fcb483 15bors: auto merge of #6848 : pcwalton/rust/issue-6352, r=pcwalton...
[06:33:46] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[06:34:56] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[06:35:21] *** Joins: aruniiird (arun@92D70115.B332A52C.E3D0A897.IP)
[06:37:34] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[06:38:08] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Connection reset by peer)
[06:38:41] <MaikKlein> bjz: any news on extern function pointers?
[06:39:17] *** Quits: steveklabnik (steve@moz-5EF6C37C.socal.res.rr.com) (Ping timeout)
[06:39:40] <bjz> MaikKlein: I'm not sure. last I heard nmatsakis' patch kept bouncing :(
[06:39:44] <bjz> bloody windows
[06:39:46] <bjz> -_-
[06:40:01] <MaikKlein> :(
[06:41:36] <bjz> it'll happen
[06:41:45] <bjz> patience, grasshopper
[06:42:52] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[06:43:45] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Connection reset by peer)
[06:44:30] *** Joins: berak (chatzilla@D0CA9694.4742BCFA.1A5CC7E5.IP)
[06:44:39] *** Joins: fdr (user@B280A391.27376607.189F3E15.IP)
[06:44:41] <dbaupp> tikue: :(
[06:44:46] *** Joins: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net)
[06:44:57] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[06:45:35] *** Joins: cdidd (cdidd@moz-B3EDB33C.broadband.corbina.ru)
[06:46:09] *** Quits: MaikKlein (maik@moz-AC9459D8.dip0.t-ipconnect.de) (Quit: Leaving)
[06:46:19] *** Joins: MaikKlein (maik@moz-AC9459D8.dip0.t-ipconnect.de)
[06:46:36] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Quit: tikue)
[06:47:21] <aatch> Woo, I now have not-in-rust-tree binding to LLVM
[06:48:11] *** Quits: hansjorg (hansjorg@moz-EECB5F79.static.cust.telenor.com) (Quit: Leaving.)
[06:48:22] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[06:48:32] <dbaupp> bjz: should `do` introduce a new environment?
[06:49:10] <bjz> dbaupp: I thought let introduced a new environment, usually
[06:49:27] <aatch> dbaupp, what does `do`, err... do?
[06:49:33] <dbaupp> bjz: so (do (def a 1) (def b 2)) will define a and b in the global scope?
[06:49:43] <dbaupp> aatch: heh
[06:49:49] <dbaupp> aatch: sequences actions
[06:50:09] * dbaupp consults clojure
[06:50:31] <aatch> dbaupp, traditionally `let` introduces a new scope, a long with any vars you might want
[06:51:02] <dbaupp> yup, I knew about let's behaviour... wasn't sure about whether do did the same
[06:51:06] <aatch> so (let ((a 1) b (c 2)) ())
[06:51:19] <dbaupp> (clojure's do doesn't introduce a new scope, so that's that)
[06:51:23] *** Parts: berak (chatzilla@D0CA9694.4742BCFA.1A5CC7E5.IP) ()
[06:51:24] <aatch> I'm assuming (do) is the similar to lisp
[06:51:27] <aatch> 's progn
[06:52:01] <ski> Scheme's `begin' doesn't introduce a new scope, either
[06:52:02] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[06:52:11] <dbaupp> aatch: I guess so
[06:52:36] <fdr> can anyone give me a r+ to get a build farm attempt on some formulaic (ish) cleanup stuff?
[06:52:51] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Connection reset by peer)
[06:52:55] <dbaupp> aatch: did your LLVM passes patch land?
[06:53:06] <aatch> dbaupp, I don't think so.
[06:53:15] <dbaupp> fdr: aatch can probably do it, if you give a link :)
[06:53:15] <aatch> I was getting some really odd resolve errors.
[06:53:43] <dbaupp> in the code you wrote?
[06:53:53] <aatch> dbaupp, no, during building.
[06:53:53] <dbaupp> or "randomly" in the code base?
[06:54:01] <aatch> Like 2500+ errors
[06:54:03] <MaikKlein> do you guys all work at mozilla?
[06:54:07] <aatch> Nope
[06:54:12] <dbaupp> MaikKlein: I don't think any of us do
[06:54:17] <fdr> https://github.com/mozilla/rust/pull/6833 ; it had a previous failure...I made a change and don't repro on my Ubuntu machine, butg I thought that was the case before, so...
[06:54:24] <Jeaye> dbaupp: Surely some do.
[06:54:27] <Jeaye> Most don't though.
[06:54:41] <MaikKlein> okay so just random ppl who love rust :)?
[06:55:01] <dbaupp> Jeaye: yeah, well obviously :P but not involved in any of the recent discussion
[06:55:08] <Jeaye> Aye.
[06:55:45] <Jeaye> MaikKlein: The operators of this channel officially work on Rust. The rest of us are Rust users, some new, some very experienced.
[06:56:14] <fdr> aatch: shanks
[06:56:18] <Jeaye> Rust users, and Rust contributors, quite commonly.
[06:56:35] <dbaupp> Jeaye: they're mostly the same thing :P
[06:56:41] <Jeaye> heh
[06:57:26] <Jeaye> Well, I've no commits in Rust. Lots in Servo repos though, if that counts.
[06:57:52] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[06:59:24] *** Joins: pyrac (pyrac@BC2AA53D.73C89388.AD05C589.IP)
[06:59:54] <dbaupp> Jeaye: nope, doesn't count. get back to #servo where you belong
[06:59:56] <dbaupp> :P
[07:00:09] <Jeaye> Aww! >.<
[07:00:28] <dbaupp> hehehe :)
[07:02:28] <MaikKlein> btw what does "#[license = "MPL"];" really do?
[07:02:45] <mcpherrin> MaikKlein: it's metadata
[07:03:25] *** Quits: devbug (quassel@moz-E1DE087C.bchsia.telus.net) (Client exited)
[07:03:40] <MaikKlein> mcpherrin: so it's useful for sth like "  only want to compile MPL sources"?
[07:03:47] <dbaupp> speaking of licensing...
[07:03:58] <dbaupp> bjz: is there any particular reason rusp isn't the same as rust?
[07:04:26] <dbaupp> bjz: (I don't particularly care, just wondering why only apache rather than mit too?)
[07:04:30] <mcpherrin> MaikKlein: Well, I don't know of any tool that uses it right now.  But usually code has a comment declaring the license, so why not make it machine readable?
[07:04:55] *** Quits: thou (thou@moz-1C1CA9F7.fasttrackcomm.net) (Input/output error)
[07:05:41] <Eridius> what's the purpose of the return value from an iteration function (note: not the closure passed to it; the function itself)?
[07:05:49] <MaikKlein> Well I always thought that we had to put the license in every file explicitly, so metadata is enough?
[07:06:16] <MaikKlein> I am not a lawyer though
[07:06:20] <dbaupp> Eridius: to allow composition
[07:06:35] <Eridius> dbaupp: ahh
[07:06:38] <dbaupp> Eridius: vec1.each(f) && vec2.each(f)
[07:07:11] <Eridius> wait, how is that helpful?
[07:07:26] <Eridius> you want to iterate vec2 only if vec1 didn't break?
[07:07:42] <Eridius> so what, `break` means it returns false, and otherwise returns true?
[07:07:48] *** Quits: brendan (brendaneic@moz-EAC95265.hfc.comcastbusiness.net) (Quit: brendan)
[07:07:52] <dbaupp> Eridius: that code should be the same as (vec1 + vec2).each(f)
[07:08:10] <dbaupp> i.e. if it breaks in vec1.each, then it doesn't iterate over vec2
[07:08:25] <MaikKlein> cool
[07:08:28] <Eridius> dbaupp: vec::each is broken, it always returns true. I just filed #6858 about this. Looks like vec::each_mut is broken too, because it returns true if it broke and false otherwise
[07:08:57] <dbaupp> Eridius: hmm... well it should return false if it broke, as you say
[07:09:17] <Eridius> ok updated #6858 based on this
[07:09:27] <dbaupp> rusti: for [1].each |x| { break; }
[07:09:29] -rusti- ()
[07:09:52] <dbaupp> rusti: [1].each(|_| false)
[07:09:54] -rusti- true
[07:10:02] *** Quits: lkuper_ (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Ping timeout)
[07:10:10] <Eridius> rusti: [1].each(|_| true)
[07:10:11] -rusti- true
[07:10:18] <Eridius> rusti: [1].each_mut(|_| false)
[07:10:20] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/hSMi
[07:10:27] <Eridius> rusti: ~[1].each_mut(|_| false)
[07:10:28] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/LhUL
[07:10:39] <Eridius> rusti: (~[1]).each_mut(|_| false)
[07:10:40] -rusti- true
[07:10:43] <Eridius> rusti: (~[1]).each_mut(|_| true)
[07:10:44] -rusti- false
[07:10:49] <dbaupp> Eridius: the problem is in _each in std/vec.rs
[07:11:05] <dbaupp> it returns true, instead of returning 'broke', like each_mut
[07:11:18] <Eridius> dbaupp: I don't see an _each. there's a fn each, which is what I'm loking at
[07:11:26] <MaikKlein> what type is VI3?
[07:11:26] <Eridius> and yes, it returns true. But each_mut is returning the wrong result too
[07:11:27] <dbaupp> Eridius: what version of rust?
[07:11:31] <Eridius> dbaupp: incoming
[07:11:39] <dbaupp> (or maybe I'm too behind)
[07:11:47] * dbaupp git fetch's
[07:11:53] *** Joins: hansjorg (hansjorg@moz-EECB5F79.static.cust.telenor.com)
[07:12:15] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[07:12:26] <dbaupp> Eridius: ok, yeah, fn each
[07:12:39] <dbaupp> looks like the _'d methods have been removed
[07:12:49] <dbaupp> (does anyone know why they were there?)
[07:15:30] <MaikKlein> lol
[07:16:27] <MaikKlein> if I do a.each(|x|{true}) it tells me expected () but found bool and if I do a.each(|x|{}) it tells me expected bool but found ()
[07:16:48] <dbaupp> rusti: [].each(|x|{true})
[07:16:50] -rusti- error: internal compiler error: unexpected failure
[07:16:50] -rusti- note: the compiler hit an unexpected failure path. this is a bug
[07:16:50] -rusti- note: try running with RUST_LOG=rustc=1,::rt::backtrace to get further details and report the results to github.com/mozilla/rust/issues
[07:16:50] -rusti- application terminated with error code 101
[07:16:58] <dbaupp> rusti: [1].each(|x|{true})
[07:16:59] -rusti- true
[07:17:09] <dbaupp> rusti: [1].each(|x|{})
[07:17:10] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/dXYd
[07:17:35] <dbaupp> MaikKlein: are you sure you don't have a ; in there?
[07:17:36] <MaikKlein> rusti: let a = [1,2,3,4]; a.each(|x|{});
[07:17:37] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/gWNI
[07:18:01] *** Quits: brson (brson@E9CDE21E.991753BB.CA4D1600.IP) (Quit: leaving)
[07:18:12] <dbaupp> MaikKlein: that's the correct behaviour
[07:18:31] <dbaupp> rusti: let a = [1,2,3,4]; a.each(|x|{true});
[07:18:32] -rusti- ()
[07:19:15] <MaikKlein> rusti: let a = [1,2,3,4]; a.each(|x|{true});
[07:19:17] -rusti- ()
[07:19:19] <MaikKlein> oO
[07:19:27] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Connection reset by peer)
[07:19:46] <MaikKlein> ah yeah
[07:19:51] <MaikKlein> u are right I forgot the ;
[07:19:52] <MaikKlein> :X
[07:21:04] <MaikKlein> how would I do sth like this? let a = [1,2,3,4]; a.each(|x|{ x < 5});
[07:21:22] <dbaupp> what are you trying to do?
[07:21:26] <dbaupp> filter the vec?
[07:22:10] <MaikKlein> I am messing around with each, it returns true if every x is below 5 right?
[07:22:17] *** cscottnet is now known as cscottnet_away
[07:22:52] <Eridius> MaikKlein: sounds like you want to use the method all, not each
[07:22:56] <Eridius> if you're trying to test a predicate against all elements
[07:22:59] <MaikKlein> oh
[07:23:07] <MaikKlein> what is each doing then?
[07:23:08] <dbaupp> MaikKlein: wow, that does work as all though
[07:23:20] <dbaupp> that's pretty cool! nice find :)
[07:23:24] <Eridius> MaikKlein: it does seem that due to the for loop protocol, each actually behaves like all, but semantically it's different
[07:23:44] <dbaupp> rusti: ([1,2,3,4].each(|x| *x < 2), [1,2,3,4].each(|x| *x < 5))
[07:23:45] -rusti- (true, true)
[07:23:56] <dbaupp> (ergh, ignoring the broken .each)
[07:23:59] <Eridius> hah, the definition of vec::all is slightly weird
[07:24:17] <aatch> A parting gift: https://github.com/Aatch/rust-llvm
[07:24:22] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[07:24:22] <Eridius> I guess the author didn't realize that he could just pass through to each directly
[07:24:39] <dbaupp> Eridius:  the for loop change is recent
[07:24:53] <dbaupp> vec, str and io are all really old and crufty modules
[07:25:05] <dbaupp> aatch: wooo :D
[07:25:21] *** Quits: aatch (aatch@moz-B437F499.pocketrent.com) (Client exited)
[07:25:29] <Eridius> dbaupp: what did it used to be?
[07:25:40] <Eridius> dbaupp: and surely the all function was rewritten when the for loop changed, or it wouldn't work ;)
[07:25:40] <dbaupp> Eridius: each(..) -> ()
[07:25:53] *** Joins: victorporof (victorporo@A2ABEB67.124F9E.4A6B528C.IP)
[07:25:56] <Eridius> oh, I guess all didn't need to be rewritten then
[07:26:15] <Eridius> since it's actually not conforming to the for loop protocol, even though the method signature ends up being identical
[07:26:22] <dbaupp> yup
[07:29:02] <MaikKlein> rusti: let a = [1,2,3,4]; a.all(|x|{ x < 5});
[07:29:04] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/bSci
[07:29:21] <MaikKlein> I find this error weird
[07:29:23] <MaikKlein> &<VI3>` but found `<VI4>
[07:29:44] <MaikKlein> VI4 means vector int of size 4 right?
[07:30:01] *** Joins: fabiand (fabiand@moz-5C54B01D.adsl.alicedsl.de)
[07:31:23] <dbaupp> MaikKlein: I don't think so
[07:31:43] <dbaupp> it's just an internal name for generic types
[07:31:49] <dbaupp> rusti: let a = [1,2,3,4]; a.all(|x|{ *x < 5})
[07:31:50] -rusti- true
[07:32:36] <dbaupp> the problem is `x` is a pointer into the vec
[07:34:17] <MaikKlein> yeah I should probably have looked at "expected &-ptr but found integral variable"
[07:41:28] *** Quits: sankha93 (Instantbir@CA89B766.3C13EDA5.F4137E23.IP) (Ping timeout)
[07:42:41] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[07:42:41] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/husW-Q
[07:42:41] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[07:43:24] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[07:45:40] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[07:45:40] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/15CrEw
[07:45:40] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[07:45:41] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[07:45:41] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/R0V0KA
[07:45:41] <ghrust> 13rust/06auto 14aef1e10 15Daniel Farina: Remove unnecessary 'use' forms...
[07:45:41] <ghrust> 13rust/06auto 141dd5cd9 15bors: auto merge of #6833 : fdr/rust/fix-warnings, r=Aatch...
[07:45:43] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[07:48:32] *** Joins: sankha93 (Instantbir@5220363.40FC9729.BE90E62C.IP)
[07:49:11] <fdr> yay.
[07:54:08] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[07:55:07] *** Quits: MaikKlein (maik@moz-AC9459D8.dip0.t-ipconnect.de) (Ping timeout)
[07:57:28] *** Quits: sankha93 (Instantbir@5220363.40FC9729.BE90E62C.IP) (Ping timeout)
[07:58:37] *** Joins: snearch (snearch@moz-77B8B28D.pool.mediaways.net)
[08:00:38] *** Quits: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP) (Ping timeout)
[08:00:41] *** Joins: MaikKlein (maik@moz-AC9459D8.dip0.t-ipconnect.de)
[08:03:03] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[08:03:56] *** Joins: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP)
[08:04:23] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: zzz)
[08:04:34] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[08:06:23] *** Joins: steveklabnik (steve@moz-5EF6C37C.socal.res.rr.com)
[08:07:02] *** Joins: sankha93 (Instantbir@305C4A38.B3B425BB.BE90E62C.IP)
[08:07:36] *** Joins: mib_g43yw0 (Mibbit@1DB23570.BB17BC09.ABB5C4AE.IP)
[08:09:58] *** Joins: sanxiyn (tinuviel@858F408C.B797260D.EF43EC08.IP)
[08:11:47] <sanxiyn> I have a question regarding new I/O
[08:12:08] <sanxiyn> Is "Error Handling" documented in libstd/rt/io/mod.rs usable at all?
[08:12:19] <sanxiyn> It seems that I can't reference io_error at all
[08:12:33] <sanxiyn> Probably is https://github.com/mozilla/rust/issues/6009
[08:12:34] <sanxiyn> Am I correct?
[08:13:18] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[08:16:47] *** Quits: victorporof (victorporo@A2ABEB67.124F9E.4A6B528C.IP) (Client exited)
[08:16:51] *** Joins: victorporof (victorporo@A2ABEB67.124F9E.4A6B528C.IP)
[08:18:30] *** Joins: Blub\w (wry@moz-36E16D18.wireless.dyn.drei.com)
[08:18:52] *** Quits: victorporof (victorporo@A2ABEB67.124F9E.4A6B528C.IP) (Ping timeout)
[08:19:13] *** Quits: MaikKlein (maik@moz-AC9459D8.dip0.t-ipconnect.de) (Ping timeout)
[08:21:43] *** Joins: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP)
[08:23:29] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[08:24:50] *** Joins: victorporof (victorporo@A2ABEB67.124F9E.4A6B528C.IP)
[08:24:51] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Quit: Computer has gone to sleep.)
[08:25:54] *** Joins: ac_dc (ac@moz-FD24B77.sohonet.co.uk)
[08:26:41] *** Joins: z0w0 (zack@moz-B5D18119.lns1.woo.bigpond.net.au)
[08:29:59] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[08:35:14] *** Quits: ac_dc (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[08:38:47] *** Quits: jack (jack@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[08:48:58] *** Quits: Nisstyre (wes@moz-FD86289.netflash.net) (Quit: Leaving)
[08:49:19] *** cscottnet_away is now known as cscottnet
[08:50:14] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[08:55:46] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[09:00:38] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[09:00:38] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/R0V0KA
[09:00:38] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[09:01:19] *** Quits: Blub\w (wry@moz-36E16D18.wireless.dyn.drei.com) (Ping timeout)
[09:01:57] *** Quits: steveklabnik (steve@moz-5EF6C37C.socal.res.rr.com) (Quit: Lost terminal)
[09:03:39] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[09:03:39] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/qvKlRA
[09:03:39] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[09:03:41] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[09:03:41] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/5JygEw
[09:03:41] <ghrust> 13rust/06auto 14b8a53b5 15Ben Blum: Add 'Sized' builtin kind; doesn't do anything yet
[09:03:41] <ghrust> 13rust/06auto 1432cd9b3 15Ben Blum: Highlight Sized in vim and kate
[09:03:42] <ghrust> 13rust/06auto 145113f68 15Ben Blum: Add simple tests for Sized
[09:03:44] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[09:04:06] *** Joins: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk)
[09:07:29] *** Quits: pyrac (pyrac@BC2AA53D.73C89388.AD05C589.IP) (Quit: pyrac)
[09:08:56] *** Quits: haard (fredrik@18E6EC45.6A26450D.BE04C429.IP) (Ping timeout)
[09:11:54] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[09:13:32] *** Joins: giselher (Mibbit@1EDD6A5B.69A336E4.27150B55.IP)
[09:14:21] *** Joins: catalin (Mibbit@moz-933D980B.adsl2.static.versatel.nl)
[09:14:57] *** Quits: victorporof (victorporo@A2ABEB67.124F9E.4A6B528C.IP) (Quit: victorporof)
[09:18:56] *** Joins: pyrac (pyrac@BC2AA53D.73C89388.AD05C589.IP)
[09:21:02] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[09:25:16] *** Joins: victorporof (victorporo@A2ABEB67.124F9E.4A6B528C.IP)
[09:27:22] *** Quits: sankha93 (Instantbir@305C4A38.B3B425BB.BE90E62C.IP) (Ping timeout)
[09:31:02] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[09:31:43] *** Joins: sankha93 (Instantbir@FB7F1EDF.65007A19.BE90E62C.IP)
[09:37:45] *** Quits: sanxiyn (tinuviel@858F408C.B797260D.EF43EC08.IP) (Quit: Leaving)
[09:38:03] *** Quits: tav (tav@moz-F64BC922.range86-145.btcentralplus.com) (Quit: tav)
[09:38:22] *** Joins: Blub\w (wry@moz-36E16D18.wireless.dyn.drei.com)
[09:43:27] *** Quits: ysuzuki (ysuzuki@moz-A563888C.ics.keio.ac.jp) (Client exited)
[09:44:07] *** Quits: sankha93 (Instantbir@FB7F1EDF.65007A19.BE90E62C.IP) (Ping timeout)
[09:47:48] *** Joins: doener (bs@moz-AA189A5A.unitymedia.biz)
[09:51:28] *** Joins: q66 (q66@moz-33080A7E.static.bluetone.cz)
[09:55:41] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[10:02:57] *** Quits: Blub\w (wry@moz-36E16D18.wireless.dyn.drei.com) (Ping timeout)
[10:06:42] *** Quits: q66 (q66@moz-33080A7E.static.bluetone.cz) (Ping timeout)
[10:06:44] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[10:07:13] *** Quits: mib_g43yw0 (Mibbit@1DB23570.BB17BC09.ABB5C4AE.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:09:31] *** Quits: pyrac (pyrac@BC2AA53D.73C89388.AD05C589.IP) (Quit: pyrac)
[10:12:29] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[10:13:12] <bjz> dbaupp: we can do that
[10:13:23] <bjz> dbaupp: sorry, I was out
[10:15:02] <bjz> dbaupp: sorry for being slow with the pull
[10:17:52] *** Quits: SimonSapin (simon@moz-99690620.hinet-ip.hinet.net) (Quit: Leaving.)
[10:18:34] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[10:18:34] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/5JygEw
[10:18:34] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[10:23:49] *** Joins: EXetoC (ex@moz-2DBEB1E4.customer.t3.se)
[10:31:17] *** Joins: FrozenCow (FrozenCow@moz-9DF5D010.dynamic.upc.nl)
[10:37:17] <cmr> r? https://github.com/mozilla/rust/pull/6826
[10:41:43] <dbaupp> bjz: what was "that" again?
[10:42:01] <bjz> licensing
[10:42:30] <bjz> Why would you do dual?
[10:43:23] <dbaupp> no idea what pro/cons are of dual licensing are, I suggested it purely to match the rust licensing
[10:43:36] <cmr> Why is rust dual licensed, anyway?
[10:44:03] <bjz> It used to be MIT
[10:44:11] <bjz> then they switched to Apache
[10:44:27] <bjz> I don't know why it's dual though
[10:47:46] <pascal> I'm getting "illegal by-move capture of captured outer variable in a heap closure". Where is client_chan illegaly captured? https://gist.github.com/pascalj/4a749af0eae2cd3d445b
[10:47:48] <dbaupp> bjz: to be clear, I'm happy with whatever. :)
[10:48:08] <bjz> dbaupp: not it's a good question
[10:48:15] <pascal> is the problem the two nested closures?
[10:48:36] <bjz> dbaupp: I should probably put the license at the top of my lmath/glfw sources too
[10:48:46] <bjz> dbaupp: now that I think of it
[10:49:09] * bjz is down to 29 errors in lmath
[10:50:07] <bjz> 25
[10:50:07] *** Joins: pyrac (pyrac@BC2AA53D.73C89388.AD05C589.IP)
[10:52:51] <bjz> YAY!
[10:53:02] <bjz> now to fix de tests
[10:56:13] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[10:56:50] <dbaupp> bjz: is this fixing the resolve errors?
[10:57:09] <dbaupp> (after the prelude change?)
[10:57:51] <bjz> well, giving up on the index trait until it can be sorted out
[10:57:58] <bjz> to reduce copying
[10:58:17] <bjz> and hence fix some (resolve?) errors
[10:59:02] <bjz> I'll also have to fix up the constructors after impling on type aliases was removed
[10:59:19] <bjz> in lieu of that fix that was talked about
[10:59:34] * bjz sighs
[10:59:50] <bjz> I really want lmath working for 0.7
[11:00:01] <bjz> and the opengl loader
[11:00:22] <bjz> that way I can do a short tutorial on getting started with opengl and rust
[11:00:43] <bjz> but I don't want to do it with completely broken stuff
[11:05:44] *** Joins: Sorella (queen@B12A78F5.BA14766C.95C8B7C6.IP)
[11:07:58] <bjz> Luqman: I might be able to speed up rray
[11:08:43] *** Quits: victorporof (victorporo@A2ABEB67.124F9E.4A6B528C.IP) (Quit: victorporof)
[11:08:53] *** Joins: victorporof (victorporo@A2ABEB67.124F9E.4A6B528C.IP)
[11:08:55] *** Joins: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com)
[11:13:09] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[11:15:55] *** Quits: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com) (Client exited)
[11:16:51] <bjz> heh 822 errors in my tests
[11:17:30] *** Quits: wycats_ (uid79@moz-C944F5EC.irccloud.com) (Ping timeout)
[11:17:30] *** Quits: geomyidae__ (uid214@moz-C944F5EC.irccloud.com) (Ping timeout)
[11:18:31] <dbaupp> bjz: ship it! :P
[11:18:40] <dbaupp> bjz: I think I've got rusp function scoping working!
[11:18:55] <bjz> yaya!
[11:19:13] <bjz> sorry, I feel like I'm letting you do all the work atm
[11:19:25] <EXetoC> error overload. time to deal with the latest changes to prelude
[11:19:35] <bjz> ?
[11:19:38] <dbaupp> bjz: no problem, I'm enjoying it :)
[11:20:14] <dbaupp> bjz: all the module reexports were removed from the prelude
[11:20:16] *** Joins: judder (maradukewa@385DDD8F.206937E4.78E362FE.IP)
[11:20:28] <bjz> dbaupp: really 8o
[11:20:33] <dbaupp> so (for example) uint::range doesn't work with incoming
[11:20:40] <dbaupp> without explicitly importing uint
[11:20:47] <bjz> ah
[11:20:53] <dbaupp> (or doing `use std::*;` at the top)
[11:21:03] <bjz> that's ok I think
[11:21:26] <bjz> are the traits re-exported?
[11:21:58] <dbaupp> bjz: it was literally just the module reexports that were removed
[11:22:06] <dbaupp> a huge red block at the end of prelude.rs
[11:22:07] <bjz> ok cool
[11:22:37] <bjz> that's not too  bad
[11:22:53] <bjz> yeah, my errors are a little hairier than that
[11:22:58] <dbaupp> have you finished that arithmetic stuff, btw?
[11:23:03] <dbaupp> (for rusp)
[11:23:35] <bjz> no, I'm having trouble making it work well
[11:23:42] <bjz> lots of copy paste :(
[11:23:50] <bjz> I overloaded Value
[11:23:50] *** Quits: pyrac (pyrac@BC2AA53D.73C89388.AD05C589.IP) (Ping timeout)
[11:23:59] <bjz> withe the operator traits
[11:24:07] <bjz> maybe I could gist that to you?
[11:24:29] <dbaupp> for what purpose? (to review?)
[11:24:52] <bjz> no as in, if you were itching to get it done
[11:25:03] <bjz> (I'm currently working on lmath)
[11:25:41] <bjz> that's what I was doing: https://gist.github.com/bjz/b6796faf0f3609866bb2
[11:25:45] <EXetoC> was someone working on printf-ish functions?
[11:25:45] <bjz> but yeah
[11:26:00] <bjz> I won't do it tonight, the rusp arithmetic
[11:26:15] <dbaupp> bjz: nah, just wondering if I should wait before doing a pull request or not
[11:26:24] <bjz> dbaupp: you're welcome to PR
[11:26:45] <dbaupp> yup, I'll write some tests and then open one :)
[11:27:16] <dbaupp> EXetoC: i.e. https://mail.mozilla.org/pipermail/rust-dev/2013-May/003999.html ?
[11:27:29] <dbaupp> (that was/is aatch and I)
[11:27:48] <EXetoC> neat
[11:28:34] *** kimundi is now known as zz_kimundi
[11:29:04] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[11:29:57] <EXetoC> and then actual wrappers around print{,ln} I guess
[11:30:04] <EXetoC> not that rolling your own would be hard
[11:30:55] <dbaupp> EXetoC: yeah, I think the plan was for writef!(any_writer, "format", args...), fmt!("format", args...) -> ~str, printf!("format", args...) -> stdout
[11:45:23] *** Joins: xandy (xandy@moz-EA2E101B.eventnet.ccc.de)
[11:46:16] <bjz> you can already do assert!(0 == 0, "Woopsie, %s", ~"hi")
[11:46:22] <bjz> :)
[11:47:11] <dbaupp> rusti: assert!(false, "foo %s %d", "bar", 10)
[11:47:11] -rusti- rust: task failed at 'foo bar 10', foo.rs:9
[11:47:12] -rusti- rust: domain main @0xd991b0 root task failed
[11:47:12] -rusti- application terminated with error code 101
[11:48:09] <bjz> rusti: fail!("hahaha %s", "ho")
[11:48:10] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/BAZS
[11:48:30] <bjz> haha
[11:48:43] <bjz> rusti: assert_eq!(1, 2, "hahaha %s", "ho")
[11:48:44] -rusti- foo.rs:10:24: 10:25 error: No rules expected the token: ,
[11:48:44] -rusti- foo.rs:10          assert_eq!(1, 2, "hahaha %s", "ho")
[11:48:44] -rusti-                                   ^
[11:48:44] -rusti- application terminated with error code 101
[11:48:52] <bjz> :(
[11:48:56] <bjz> I thought that worked
[11:49:34] *** Quits: DasIch (dasich@moz-756B08B1.clients.your-server.de) (Ping timeout)
[11:49:35] * bjz checks expand.rs
[11:49:48] <bjz> nope :(
[11:50:27] <bjz> rusti: error!("hihi", "howdy")
[11:50:28] -rusti- <core-macros>:9:24: 9:42 error: too many arguments to fmt!. found 2, expected 1
[11:50:28] -rusti- <core-macros>:9             __log(1u32, fmt!( $($arg),+ ))
[11:50:28] -rusti-                                         ^~~~~~~~~~~~~~~~~~
[11:50:28] -rusti- application terminated with error code 101
[11:50:37] <bjz> rusti: error!("hihi %s", "howdy")
[11:50:38] -rusti- rust: ~"hihi howdy"
[11:50:38] -rusti- ()
[11:50:52] <bjz> rusti: warn!("hihi %s", "howdy")
[11:50:54] -rusti- ()
[11:51:04] <bjz> rusti: info!("hihi %s", "howdy")
[11:51:05] -rusti- ()
[11:51:08] *** Joins: adu (ajr@moz-96FE9B84.washdc.fios.verizon.net)
[11:52:07] *** Quits: adu (ajr@moz-96FE9B84.washdc.fios.verizon.net) (Client exited)
[11:54:13] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[11:55:47] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[12:07:51] <dbaupp> bjz: I think we're turing complete now
[12:08:05] <dbaupp> bjz: (def fib (fn (n) (if (= 0 n) 0 (if (= 1 n) 1 (+ fib (- n 1) (- n 2))))))
[12:08:11] <dbaupp> works and everything
[12:11:29] *** Quits: EXetoC (ex@moz-2DBEB1E4.customer.t3.se) (Quit: WeeChat 0.4.1)
[12:11:47] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[12:13:31] *** Joins: keruspe (keruspe@moz-F2539FEC.imagination-land.org)
[12:13:57] <bjz> dbaupp: awesome!
[12:14:19] <bjz> dbaupp: now I guess we can start adding stuff to init.rsp
[12:14:42] <dbaupp> bjz: sort of, we need functions to process lists
[12:14:53] <bjz> yeah ofc
[12:15:03] <bjz> those should be built in
[12:15:10] <dbaupp> (once we do that we can move some of the built-in macros to init.rsp
[12:15:11] <dbaupp> )
[12:15:16] <bjz> mm
[12:15:21] *** Joins: DasIch (dasich@moz-756B08B1.clients.your-server.de)
[12:18:08] <dbaupp> bjz: https://github.com/bjz/rusp/pull/8 r?
[12:18:31] <dbaupp> (I included your arithmetics commit, as I'm sure you can see.)
[12:22:00] <dbaupp> bjz: did you actually like dynamic scoping?
[12:22:22] <dbaupp> (it's still there, btw, e.g. fn, if, macro and do are all dynamically scoped)
[12:22:30] <bjz> :D
[12:22:57] <dbaupp> it's controlled by the Option in the FnEnv() variant of value... None means dynamically scoped
[12:23:19] <dbaupp> oh, right
[12:23:24] <dbaupp> hehe
[12:25:06] <dbaupp> hm, actually... maybe macros need to be dynamically scoped? :S
[12:25:21] *** Joins: novabyte (Instantbir@2DD7DBE9.2CF725C4.65C00F68.IP)
[12:25:32] *** Joins: caitp (caitp@moz-9FE842F.cpe.net.cable.rogers.com)
[12:26:17] *** Joins: reyre_ (reyre@F2D29657.F60B0462.67AC9B1.IP)
[12:27:03] <dbaupp> bjz: (I just realised I'd but a doc comment in the wrong spot. pushed the fix straight to master.)
[12:28:00] *** Joins: jviereck (Adium@moz-5BAB09C7.dclient.hispeed.ch)
[12:28:08] *** Quits: reyre_ (reyre@F2D29657.F60B0462.67AC9B1.IP) (Ping timeout)
[12:28:09] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: jorendorff)
[12:28:11] <cmr> So rusp seems like the natural choice for the irc client written in rust
[12:28:25] <cmr> (for configuration and scripting, that is)
[12:29:18] <dbaupp> cmr: that's the theory, I think
[12:30:18] *** Joins: EXetoC (ex@moz-2DBEB1E4.customer.t3.se)
[12:30:34] <bjz> cmr: aye
[12:30:44] *** Joins: reyre_ (reyre@F2D29657.F60B0462.67AC9B1.IP)
[12:30:58] <bjz> cmr: my idea was game scripting and config actually
[12:31:04] <bstrie> so how is rusp different from lisp? it's all parentheses to me :P
[12:31:21] <cmr> bstrie: it is a lisp
[12:31:24] <bjz> bstrie: doesn't manipulate cons cells
[12:31:49] <bstrie> also I'm sad taht you passed up the name "Lust" :)
[12:32:07] <bjz> :)
[12:32:11] <bstrie> or perhaps "Rutht"
[12:32:16] <cmr> hah
[12:32:19] <bjz> bstrie: RHAHAAAR
[12:33:29] <cmr> bjz: normally I'd use lua but rusp seems worth the shot
[12:33:48] <bjz> bstrie: the idea by using s-exprs is they're super easy to parse
[12:34:21] <bstrie> comments should also be written in sexps
[12:34:27] <bstrie> (// foo )
[12:34:48] <bjz> but comments aren't part of the data
[12:34:54] <dbaupp> bstrie: that requires they parse
[12:36:01] <bstrie> bjz: they could be! their data-ness should be determined by their surrounding code
[12:36:06] <bjz> bstrie: I think clojure has some sort of sexpr format for doc comments, but that's different
[12:36:54] <bstrie> that reminds me, clojure also uses [] in addition to (), it seems much more readable and I request that :)
[12:37:11] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[12:37:15] <bjz> we were thinking of using ||
[12:37:49] <bstrie> I'm still unsure of how this will interoperate with rust
[12:38:01] <bjz> but there is still something nice about arguments being lists too
[12:38:20] <bjz> bstrie: me neither, we need to work that out
[12:38:49] <bstrie> apparently "rusp" isn't recognized by google translate, but it says that "ruspa" is italian for "bulldozer"
[12:38:56] <bjz> maybe some traits you can implement
[12:39:54] <bjz> bstrie: yeah, we don't want some unfortunate name like 'coq'
[12:40:37] <bjz> cmr: at the moment it's ver much me and dbaupp playing
[12:40:48] <bjz> cmr: but you're most welcome to assist
[12:41:28] <bjz> cmr: I've been distracted by lmath atm, so it's been mostly dbaupp atm :)
[12:41:37] <dbaupp> gaah... should macros be dynamically scoped or lexically scoped?
[12:41:53] <dbaupp> (or have the option for either?)
[12:41:53] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Quit: Computer has gone to sleep.)
[12:43:08] <bjz> dbaupp: I'm researching
[12:44:09] <bjz> dbaupp: we could have also cloned REBOL xD
[12:44:47] <bjz> dbaupp: http://www.red-lang.org/
[12:44:59] <bjz> dbaupp: that language is cool
[12:45:16] <bjz> dbaupp: but the systems side is C-style malloc/free
[12:45:53] *** Joins: vmx (vmx@moz-EB247BDF.pools.arcor-ip.net)
[12:46:58] <bjz> dbaupp: I think it seems macros are dynamically scoped? They don't have their own wnvironment?
[12:47:19] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[12:48:06] <dbaupp> bjz: ok, I think that might work better
[12:48:21] *** Joins: katsuki (SouSuk3@7DD8AB10.E312BED7.67CC77FD.IP)
[12:48:32] <bjz> dbaupp: what are the pros for and against?
[12:48:58] <dbaupp> bjz: for dynamically scoped macros: things work
[12:49:08] <dbaupp> against: dynamic scoping seems icky
[12:49:29] <bjz> heh
[12:49:56] <bjz> we can always change, it's not like our userbase is huge
[12:50:17] <bjz> *famous last words*
[12:50:18] <bjz> :P
[12:50:23] <dbaupp> bjz: it's pretty large! we've got 6 whole stars on github!
[12:50:27] <bjz> heh
[12:50:29] <dbaupp> :P
[12:50:59] <dbaupp> we want def to modify global scope always, right?
[12:51:05] <dbaupp> (rather than just local scope?)
[12:51:24] <bjz> def adds a symbol to the current environment right?
[12:51:37] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[12:51:46] <caitp> something that is a bit bothersome with rust crates is getting Makefiles to figure out that it needs to relink a crate if a dependent source changes. I realize I could have it relink indiscriminately, but that's not very good either
[12:51:59] <dbaupp> bjz: well, in clojure it's global variables always
[12:52:23] <dbaupp> (that said, I think i'd prefer local)
[12:52:36] <bjz> dbaupp: yeah lets go that way
[12:52:43] <dbaupp> local?
[12:52:47] <strcat> caitp: the rust makefiles use dummy files without the hash
[12:52:47] <bjz> aye
[12:52:57] <strcat> as in they have that as the target and touch it when they finish building
[12:53:26] <caitp> right, but it's kind of terrible
[12:53:28] <caitp> convoluted
[12:53:36] <indutny> hey people
[12:53:41] <indutny> what's up with uint::range
[12:53:50] <indutny> what should I include to make it work again?
[12:53:52] <dbaupp> indutny: uint got removed from the prelude
[12:53:54] <strcat> caitp: well ideally rustpkg will remove the need to use a makefile
[12:53:59] <cmr> indutny: module reexports in prelude changed, "use std::uint"
[12:54:05] <indutny> ah, thanks
[12:54:06] <dbaupp> indutny: (and along with all the other reexported modules)
[12:54:14] <indutny> yeah
[12:54:16] <indutny> I see other errors
[12:54:22] <indutny> ok, going to fix it right now
[12:54:24] <dbaupp> indutny: you can also do `use std::*;` to just get everything
[12:54:44] <caitp> seems unlikely though, people are going to keep using make/gyp/waf/scons/cmake/whatever else
[12:54:47] <dbaupp> bjz: how are we going to load init.rsp?
[12:54:57] <caitp> especially when their rust code links with C stuff
[12:55:08] <dbaupp> bjz: have it compiled in to the library, or an external file?
[12:55:27] *** Joins: strcat1 (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[12:55:33] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[12:55:42] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[12:55:47] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[12:55:54] *** strcat1 is now known as strcat
[12:56:02] <bjz> dbaupp: I would say as an external. would be nice if ther was some kind of (extern-mod ) thing
[12:56:04] <bjz> :P
[12:56:29] <indutny> wow
[12:56:29] <dbaupp> bjz: (exec-file) ?
[12:56:31] <strcat> dbaupp: scheme does lexical scoping, doesn't clojure?
[12:56:34] <indutny> binary growed in 1.5x times
[12:56:39] <dbaupp> strcat: for macros?
[12:56:41] <indutny> when compiled without optimizations
[12:56:52] <dbaupp> indutny: with `use std::*`?
[12:57:02] <indutny> no, I've added use::std::uint where needed
[12:57:05] <dbaupp> strcat: or for fns?
[12:57:12] <indutny> with optimization it has grown 2x
[12:57:20] <dbaupp> indutny: it's probably some unrelated change
[12:57:31] <strcat> bbvectorize needs to be off again.
[12:57:41] <indutny> yeah, probably
[12:57:46] <indutny> anyway, just FYI
[12:58:12] *** Quits: giselher (Mibbit@1EDD6A5B.69A336E4.27150B55.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:58:51] <cmr> dbaupp: would it be posible to get size of files from the buildbots?
[12:58:59] <dbaupp> cmr: don't think so
[12:59:01] <cmr> that;d be a nice thing to graph
[12:59:20] <dbaupp> cmr: this is the info I can get http://buildbot.rust-lang.org/json/builders/auto-linux/builds?select=-1&as_text=1
[12:59:40] *** Quits: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP) (Ping timeout)
[13:00:04] *** Joins: pyrac (pyrac@moz-11888CFC.math.u-bordeaux1.fr)
[13:00:23] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[13:00:46] <strcat> I'll just get aatch's fix through
[13:00:48] *** Quits: glandium (glandium@moz-A09032B1.kimsufi.com) (Quit: Coyote finally caught me)
[13:00:49] <strcat> sec
[13:01:04] <cmr> dbaupp: maybe graydon or someone else can get more reporting in?
[13:01:22] <dbaupp> cmr: quite possibly
[13:01:36] * dbaupp has no idea how buildbot works
[13:01:57] <strcat> there
[13:01:59] <strcat> should work this time
[13:02:31] <strcat> err, sec
[13:02:46] *** Joins: glandium (glandium@moz-A09032B1.kimsufi.com)
[13:02:59] *** Joins: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP)
[13:03:22] <cmr> dbaupp: sent a req to the ML
[13:03:39] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[13:03:39] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/k9f4Qg
[13:03:39] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[13:03:41] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[13:03:41] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/NT6jkA
[13:03:41] <ghrust> 13rust/06auto 14c857eb4 15James Miller: Remove the slow bb-vectorize pass
[13:03:41] <ghrust> 13rust/06auto 14e78c2ee 15James Miller: Improve optmization pipeline
[13:03:41] <ghrust> 13rust/06auto 14e69d01a 15Daniel Micay: Merge branch 'pass-refactor' of git://github.com/Aatch/rust into optimize
[13:03:44] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[13:03:50] <dbaupp> cmr: oh, yes, got the email!
[13:03:55] <strcat> uh, bors
[13:03:57] <strcat> wat
[13:04:11] <cmr> strcat: r? https://github.com/mozilla/rust/pull/6826
[13:04:15] <dbaupp> strcat: ?
[13:04:52] <bjz> strcat: ?
[13:05:03] <strcat> he took the old one :|
[13:05:22] <bjz> silly bors
[13:05:27] <cmr> dbaupp: if the buildbots can't be modified I can setup a VM for it
[13:05:43] <strcat> I'll just make the builds fail
[13:05:45] <strcat> and do that again
[13:05:51] <strcat> err
[13:05:56] <strcat> it never started building
[13:06:19] * strcat broke bors ;p
[13:06:28] <dbaupp> cmr: which could monitor memory and so on?
[13:06:35] <cmr> dbaupp: yup
[13:06:38] <dbaupp> strcat: vandal!
[13:06:39] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[13:06:39] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14eca085a to 14030f471: 02http://git.io/N3iJvQ
[13:06:39] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[13:07:00] <dbaupp> cmr: that'd be another solution
[13:07:02] <cmr> dbaupp: could also run the full set of benchmarks and time those :)
[13:07:09] <cmr> (individually)
[13:07:11] <strcat> windows bot won't stop
[13:07:13] <strcat> ;\
[13:07:54] <dbaupp> cmr: oooh, yes!! but how repeatable will it be on a VM?
[13:07:56] <strcat> cmr: you can measure cpu + io too
[13:07:58] <strcat> with cgroups
[13:08:47] <strcat> ok buildbot is totally screwed
[13:08:48] <strcat> hold on a sec
[13:08:58] <strcat> it thinks those auto builds were for 2 commits
[13:09:53] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[13:10:28] *** Quits: jviereck (Adium@moz-5BAB09C7.dclient.hispeed.ch) (Quit: Leaving.)
[13:11:29] *** Quits: aruniiird (arun@92D70115.B332A52C.E3D0A897.IP) (Ping timeout)
[13:13:17] * strcat is building a non-regular-schedule "nightly" with the zsh completion + docs :)
[13:14:08] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Textual IRC Client: www.textualapp.com)
[13:14:33] *** Joins: jviereck (Adium@moz-5BAB09C7.dclient.hispeed.ch)
[13:15:20] <strcat> silly build server doesn't have as much ram as my laptop
[13:16:19] <strcat> cmr: terminfo thing failed :(
[13:16:22] <strcat> on windows again
[13:16:46] *** Joins: wycats_ (uid79@moz-C944F5EC.irccloud.com)
[13:17:15] <cmr> strcat: oops, thought i had fixed that one
[13:17:25] <cmr> dbaupp: Should be fine
[13:17:50] *** Joins: geomyidae__ (uid214@moz-C944F5EC.irccloud.com)
[13:17:51] <cmr> dbaupp: I can run it in a container instead of a VM, and make sure it only runs when the box is otherwise idle
[13:18:19] <dbaupp> cmr: sounds good!
[13:18:38] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[13:18:38] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 147d2034d to 14030f471: 02http://git.io/N3iJvQ
[13:18:38] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[13:18:38] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[13:18:38] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/tmKQtQ
[13:18:38] <ghrust> 13rust/06auto 1485e3c96 15James Miller: Remove the slow bb-vectorize pass
[13:18:38] <ghrust> 13rust/06auto 14266093d 15James Miller: Improve optmization pipeline
[13:18:39] <ghrust> 13rust/06auto 14ef253a1 15Daniel Micay: disable SROA pass for now
[13:18:39] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[13:18:59] <strcat> there
[13:19:06] <strcat> that should fix binary size + build time
[13:19:27] <strcat> assuming it was the SROA pass that was making the build fail
[13:20:08] <cmr> Cross platform path handling is not nice
[13:20:22] <Yoric> It certainly is not.
[13:20:28] <dbaupp> cmr: doesn't Path handle it all for you?
[13:20:39] <Yoric> You can take a look at OS.Path, to see the implementation we needed for JavaScript.
[13:20:40] <cmr> dbaupp: For the most part
[13:20:51] <cmr> but PosixPath and WindowsPath are separate
[13:20:53] *** Joins: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com)
[13:20:59] <strcat> cmr: there's Path
[13:21:03] <cmr> there's GenericPath but the construction isn't the same
[13:21:13] <strcat> rusti: Path("/foo")
[13:21:14] -rusti- {is_absolute: true, components: ~[~"foo"]}
[13:21:25] <cmr> strcat: where's that come from?
[13:21:28] <strcat> cmr: dunno
[13:21:30] <strcat> path::Path?
[13:21:32] * strcat shrugs
[13:21:49] <strcat> cmr: pretty sure it's probably a type alias based on platform
[13:21:58] <dbaupp> cmr: Path is just an alias for the appropriate {Windows,Posix}Path
[13:22:34] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[13:22:35] <cmr> typedefs really need to be documented with rustdoc
[13:24:00] *** Joins: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP)
[13:24:27] *** Joins: maxli1 (maxli@F2D29657.F60B0462.67AC9B1.IP)
[13:24:33] *** Quits: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP) (Connection reset by peer)
[13:25:28] <cmr> strcat: can you push it to try or something?
[13:27:08] <strcat> cmr: your thing? yeah
[13:27:15] <strcat> cmr: what's the branch name?
[13:27:21] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[13:27:54] <cmr> terminfo
[13:28:00] <strcat> cmr: it will have a merge commit in try... doesn't matter I guess? ;p
[13:28:13] <strcat> too lazy to fetch it properly
[13:28:31] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[13:28:31] <ghrust> 01[13rust01] 15thestinger 04force-pushed 06try from 145a8bc6d to 1494af698: 02http://git.io/k471pw
[13:28:31] <ghrust> 13rust/06try 147d32c41 15Corey Richardson: extra::term overhaul
[13:28:31] <ghrust> 13rust/06try 148543651 15Corey Richardson: Use find_equiv in term
[13:28:31] <ghrust> 13rust/06try 14e6e1984 15Corey Richardson: rustpkg borrowed pointers
[13:28:31] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[13:28:41] <strcat> I guess it's supposed to build now
[13:30:33] *** Joins: aruniiird (arun@92D70115.B332A52C.E3D0A897.IP)
[13:31:03] <strcat> yay the i686 one built
[13:31:41] <strcat> errr, there are no docs.
[13:32:42] <strcat> I guess make install doesn't install them
[13:38:01] <strcat> huh why is this failing
[13:39:32] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[13:40:46] *** Joins: dylukes (dylukes@moz-B5418F79.hsd1.pa.comcast.net)
[13:42:28] *** Joins: jdm (jdm@DB05BBF2.BB1F48F2.971E19F6.IP)
[13:42:44] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[13:42:44] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1494c4179 to 14030f471: 02http://git.io/N3iJvQ
[13:42:44] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[13:42:46] <jdm> huh, we have str.each_split_char but not str.split_char?
[13:42:47] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[13:42:47] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/3U_WMg
[13:42:47] <ghrust> 13rust/06auto 1485e3c96 15James Miller: Remove the slow bb-vectorize pass
[13:42:47] <ghrust> 13rust/06auto 142a30c00 15bors: auto merge of #6859 : thestinger/rust/optimize, r=thestinger...
[13:42:47] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[13:43:02] <strcat> jdm: we don't need both
[13:43:06] <strcat> we have iter::to_vec
[13:43:21] <jdm> ah, that's the missing puzzle piece
[13:43:21] <dbaupp> bjz: would you prefer (match foo (() empty) ((a b) (+ a b))) or (match foo () empty (a b) (+ a b))?
[13:43:26] <strcat> we really don't need split_to_each_kind_of_container ;p
[13:43:57] <strcat> anyway that commit better land :)
[13:43:57] <dbaupp> bjz: i.e. bracketing the match pattern and the result, or not
[13:44:51] <jdm> huh, iter::to_vec's example is.. not clear to me
[13:44:53] <dbaupp> eh, the unresolved import spans are off by one
[13:44:59] <jdm> I guess that's a verbose identity operator?
[13:45:04] <strcat> jdm: iter::to_vec(iterator_taking_one_arg)
[13:45:05] <dbaupp> "error: unresolved import (maybe you meant `Selectabl::*`?)"
[13:45:18] <strcat> jdm: it has to take one argument (the closure) so you have to wrap most of them
[13:45:36] <strcat> if we have a syntax for partial fn application... ;p
[13:45:43] <strcat> uint::range(1, 10, _)
[13:45:47] <strcat> but we don't
[13:46:26] <jdm> rusti: let s = "foo bar"; iter::to_vec(|f| { f(s.each_split_char(' ')) }
[13:46:27] -rusti- foo.rs:11:4: 11:5 error: incorrect close delimiter: `}`
[13:46:27] -rusti- foo.rs:11     }));
[13:46:27] -rusti-               ^
[13:46:27] -rusti- application terminated with error code 101
[13:46:36] <jdm> rusti: let s = "foo bar"; iter::to_vec(|f| { f(s.each_split_char(' ')) })
[13:46:37] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/MZJN
[13:46:48] <strcat> jdm: have to pass f to each_split_char
[13:46:55] <jdm> ah, right
[13:47:11] <cmr> dbaupp: yeah I know
[13:47:15] <jdm> rusti: let s = "foo bar"; iter::to_vec(|f| { s.each_split_char(' ', f) })
[13:47:17] <cmr> dbaupp: I haven't gotten around to fixing it yet
[13:47:17] -rusti- ~["foo", "bar"]
[13:47:21] <strcat> on the other hand we could throw out this weird protocol and use external iterators... ;p
[13:47:36] <jdm> rusti: let s = "foo bar"; iter::to_vec(|f| { s.each_split_char(' ', f) }).contains("foo")
[13:47:37] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/AYMI
[13:47:38] <cmr> dbaupp: I'm 90% certain it was correct when the PR was accepted...
[13:47:46] <dbaupp> cmr: it's probably just delete a - 1 or add a + 1, right?
[13:47:49] <engla> do you know if it's even decided what to do with the two protocols? Keep both.
[13:47:50] <engla> ?
[13:47:53] <jdm> rusti: let s = "foo bar"; iter::to_vec(|f| { s.each_split_char(' ', f) }).contains(&"foo")
[13:47:55] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/PKTd
[13:47:58] <cmr> dbaupp: hopefully!
[13:48:19] <cmr> dbaupp: I can't fix it until later today
[13:48:20] <strcat> jdm: basically, vec/str/old_iter are terrible ;p
[13:48:21] <jdm> ooh, reversed expected and found
[13:48:21] <jdm> nice
[13:48:34] <strcat> jdm: it's implemented really wrong though
[13:48:48] <strcat> at this point it would be easier to move vec to old_vec and implement a proper one
[13:49:16] <strcat> all those functions do a lot of copying and allocate lots of temporaries
[13:49:49] <strcat> splitting on a character and looking for a token shouldn
[13:49:53] <strcat> shouldn't require a single alloc*
[13:50:39] *** Quits: jviereck (Adium@moz-5BAB09C7.dclient.hispeed.ch) (Quit: Leaving.)
[13:50:43] * strcat shrugs ;p
[13:51:05] <strcat> we enshrined bad practices in "convenience" functions and made them more convenient than the proper ways of doing things
[13:52:41] *** Parts: maxli1 (maxli@F2D29657.F60B0462.67AC9B1.IP) ()
[13:52:50] *** Joins: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP)
[13:54:21] <dbaupp> cmr: let err = fmt!("unresolved import (maybe you meant `%s::*`?)",
[13:54:22] <dbaupp>                                sn.slice(0, sn.len() - 1)); // -1 to adjust for semicolon
[13:54:37] <dbaupp> so presumably the spans have been tighted up
[13:55:10] <cmr> dbaupp: yep, that'd do it
[13:55:17] <cmr> mind fixing it and adding a test? :)
[13:55:27] <dbaupp> cmr: doing it now!
[13:55:29] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[13:55:32] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[13:55:38] *** Joins: strcat1 (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:55:42] <strcat1> rusti: 5
[13:55:49] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:55:50] <strcat1> rusti: 5
[13:55:51] -rusti- 5
[13:56:12] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[13:56:17] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[13:57:19] <dbaupp> cmr: erm, how do I trigger that warning?
[13:57:34] <dbaupp> *error
[13:57:35] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[13:58:06] <cmr> dbaupp: good question
[13:58:36] <cmr> rusti: use nonexistent;
[13:58:37] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/IUaL
[13:58:53] <cmr> rusti: use std::nonexistent;
[13:58:54] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/aDCh
[13:59:10] <dbaupp> cmr: it appears a lot here http://buildbot.rust-lang.org/builders/auto-linux/builds/1513/steps/compile/logs/stdio
[13:59:33] <dbaupp> it looks like it's something about use ..::{...}?
[14:00:17] <cmr> hm
[14:00:24] <cmr> actually the error shouldn't be reported in those cases
[14:00:34] <dbaupp> there doesn't appear to be a test for it either
[14:00:49] <cmr> rusti: mod foof {} use foof;
[14:00:50] -rusti- foo.rs:10:21: 10:30 error: `use` and `extern mod` declarations must precede items
[14:00:50] -rusti- foo.rs:10          mod foof {} use foof;
[14:00:50] -rusti-                                ^~~~~~~~~
[14:00:50] -rusti- error: aborting due to previous error
[14:00:50] -rusti- application terminated with error code 101
[14:00:56] <cmr> rusti: mod foof {}; use foof;
[14:00:57] -rusti- foo.rs:10:22: 10:31 error: view items must be declared at the top of the block
[14:00:57] -rusti- foo.rs:10          mod foof {}; use foof;
[14:00:57] -rusti-                                 ^~~~~~~~~
[14:00:57] -rusti- application terminated with error code 101
[14:00:57] *** concrete.mozilla.org sets mode: +M 
[14:01:11] *** strcat1 is now known as strcat
[14:01:18] <strcat> lol
[14:01:20] * strcat sighs
[14:01:26] <strcat> rusti: 5 + 5
[14:01:27] -rusti- 10
[14:01:37] <strcat> that's a really bad anti-spam measure
[14:01:50] *** Quits: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com) (Client exited)
[14:05:36] <cmr> is there a way to search the diff introduced by a commit for text? git log --grep but for the change, not the log
[14:05:52] *** concrete.mozilla.org sets mode: -M 
[14:05:58] <cmr> is there a way to search the diff introduced by a commit for text? git log --grep but for the change, not the log
[14:06:50] <dbaupp> cmr: do you know which commit?
[14:07:14] <cmr> dbaupp: nope
[14:07:14] <dbaupp> because you can `git diff commit-ref^! | grep whatever` at the very least
[14:07:18] <dbaupp> oh :(
[14:07:20] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[14:07:25] <cmr> trying to find the commit that added that warning
[14:07:35] <cmr> Ah, -S
[14:07:39] <strcat> rusti: 5
[14:07:40] -rusti- 5
[14:07:55] <cmr> b085b51357769acb68f6ba10d30df5a98e04c418
[14:08:30] <cmr> rusti: use std::{vec, foo};
[14:08:31] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/EDgF
[14:08:48] <dbaupp> cmr: this is really confusing :S
[14:09:04] <cmr> dbaupp: yes it is
[14:09:42] <cmr> Oh...
[14:09:57] *** Joins: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com)
[14:09:58] <cmr> rusti: extern mod std; use std;
[14:09:58] -rusti- foo.rs:10:9: 10:24 error: "extern mod" declarations are not allowed here
[14:09:59] -rusti- foo.rs:10          extern mod std; use std;
[14:09:59] -rusti-                    ^~~~~~~~~~~~~~~
[14:09:59] -rusti- error: aborting due to previous error
[14:09:59] -rusti- application terminated with error code 101
[14:10:02] <cmr> well
[14:10:28] <cmr> dbaupp: what originally prompted me to add the warning was something like "extern mod one; use one;"
[14:10:52] <dbaupp> cmr: aha, got it
[14:10:56] <dbaupp> extern mod syntax;
[14:10:56] <dbaupp> use syntax;
[14:11:03] <dbaupp> error: unresolved import (maybe you meant `synta::*`?)
[14:12:38] <cmr> the error shouldn't be given for multi-imports though.
[14:14:21] <dbaupp> cmr: yeah, the log I liked before had LLVM changes, and it was possibly generating invalid code
[14:14:41] <strcat> dbaupp: that's what's happening
[14:14:43] <strcat> don't know why
[14:14:56] <cmr> well it *is* reportied for multi-imports, but it should be changed so it isn't, is what I mean
[14:15:00] <dbaupp> strcat: it's just the sroa pass, isn't it?
[14:15:04] <strcat> dbaupp: nope
[14:15:05] <dbaupp> cmr: oh
[14:15:07] <dbaupp> right
[14:15:20] <strcat> dbaupp: I just sent a pull with only the bb-vectorize removal for now
[14:15:28] <strcat> we can deal with the others later but... that one really has to go
[14:15:43] <dbaupp> invalid? or too slow?
[14:15:44] <strcat> we should just copy clang imo and variations on it should really be thought out
[14:15:48] <cmr> way too slow
[14:15:50] <strcat> dbaupp: generates slow code, runs slowly
[14:15:53] <cmr> and dubiously useless
[14:15:55] <strcat> and code bloat
[14:16:06] <strcat> dbaupp: it's not enabled by default for clang *because* it's terribl
[14:16:08] <dbaupp> hehe, worst optimisation pass ever
[14:16:08] <strcat> e
[14:16:13] <cmr> well it's brand new
[14:16:16] <strcat> dbaupp: it needs a proper cost model
[14:16:29] <strcat> it doesn't know when not to kick in
[14:16:41] <dbaupp> cmr: oh
[14:16:47] <strcat> just vectorizes all the things
[14:16:50] <strcat> and makes it bad
[14:16:52] <strcat> ;p
[14:17:08] <dbaupp> but vectorised code is fast, right?
[14:17:09] <dbaupp> :P
[14:17:25] <strcat> sometimes
[14:17:40] <strcat> there are costs for switching in and out of SSE or AVX
[14:18:03] <strcat> it's only faster if you're doing a bunch of them
[14:18:05] *** Quits: katsuki (SouSuk3@7DD8AB10.E312BED7.67CC77FD.IP) (Client exited)
[14:18:20] <engla> and costs to load the data and correct its alignment
[14:18:20] *** Joins: sk (sk@EA324BFE.54A580E3.78DD174B.IP)
[14:18:49] *** Joins: katsuki (SouSuk3@7DD8AB10.E312BED7.67CC77FD.IP)
[14:20:22] <cmr> strcat: try doesn't seem to be building :s
[14:20:33] <strcat> cmr: I'll force it
[14:20:34] <strcat> sec
[14:20:38] <strcat> buildbot sucks
[14:20:52] <cmr> I really only care about try-win
[14:21:12] *** Joins: thou (thou@moz-1C1CA9F7.fasttrackcomm.net)
[14:21:26] *** Quits: aruniiird (arun@92D70115.B332A52C.E3D0A897.IP) (Quit: Leaving)
[14:22:47] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[14:22:48] *** Joins: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net)
[14:23:14] *** zz_kimundi is now known as kimundi
[14:24:14] <cmr> error: aborting due to 2569 previous errors
[14:24:21] <cmr> whatever's on auto really exploded
[14:27:12] <dbaupp> cmr: it's the same LLVM one
[14:27:55] <strcat> cmr: well that's a PITA ;p
[14:28:11] <strcat> so we're stuck with bb-vectorize because apparently our code-correctness depends on it? ....
[14:28:24] * strcat cries
[14:29:24] <cmr> strcat: it shouldn't be... wasn't it just recently enabled by aatch in the pass builder patch?
[14:29:31] <bstrie> haha, so rust fails to compile if you turn off the vectorization pass?
[14:29:31] <strcat> cmr: yes
[14:29:38] <strcat> bstrie: apparently
[14:29:42] <strcat> we'll see, I put it through again
[14:29:45] <bstrie> what if you just disable all opts?
[14:30:46] *** Joins: blaphmat (Mibbit@ACE15FDA.6F0DF653.B9D97DBA.IP)
[14:30:54] <cmr> I'm pretty sure I had built the pass refactoring (which also disabled bb-vectorize) locally just fine
[14:32:29] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[14:33:40] <cmr> strcat: try-win failed compiling llvm, bah
[14:33:48] <strcat> cmr: oh right try-win doesn't work
[14:33:50] <strcat> sorry :(
[14:34:00] <strcat> cmr: I could hijack the incoming bot for you, hold on
[14:34:35] *** Parts: judder (maradukewa@385DDD8F.206937E4.78E362FE.IP) ()
[14:34:41] <strcat> cmr: http://buildbot.rust-lang.org/builders/incoming-full-win/builds/1385
[14:35:11] <cmr> strcat: coolio, thanks
[14:36:06] *** Quits: fabiand (fabiand@moz-5C54B01D.adsl.alicedsl.de) (Quit: Verlassend)
[14:36:33] *** Parts: katsuki (SouSuk3@7DD8AB10.E312BED7.67CC77FD.IP) ()
[14:37:24] <strcat> anyway
[14:37:29] <strcat> the bb-vectorize part is going to land
[14:37:33] <strcat> I will try getting through the rest too
[14:37:41] <strcat> bit-by-bit so we can see where it goes wrong...
[14:38:05] <cmr> Is going as in "it is succeeding" or as in "it will land whether bors likes it or not"?
[14:38:26] <strcat> cmr: it is succeeding
[14:38:30] <cmr> oh good
[14:38:34] *** Joins: bent (chatzilla@moz-932324BF.hsd1.ca.comcast.net)
[14:38:45] <strcat> it failed as a whole, it failed as all but enable-sroa
[14:38:54] <strcat> so just getting through killing bb-vectorize
[14:39:29] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[14:39:29] <ghrust> 01[13rust01] 15thestinger created 06swap (+1 new commit): 02http://git.io/xPQx9w
[14:39:29] <ghrust> 13rust/06swap 1429aba80 15Daniel Micay: mv the raw pointer {swap,replace}_ptr to std::ptr
[14:39:29] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[14:39:36] <strcat> ugh
[14:40:01] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[14:40:01] <ghrust> 01[13rust01] 15thestinger 04deleted 06swap at 1429aba80: 02http://git.io/ni4_Bw
[14:40:01] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[14:41:17] <strcat> yay
[14:41:19] <strcat> it passed
[14:41:35] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Quit: eatkinson)
[14:42:20] <cmr> it looks like the terminfo PR is good too, mind r+'ing it?
[14:42:39] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[14:42:39] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/3U_WMg
[14:42:39] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[14:42:55] <dbaupp> strcat: https://github.com/mozilla/rust/pull/6863 r?
[14:43:06] <dbaupp> cmr: fixed it! :)
[14:43:47] <cmr> dbaupp: thanks :)
[14:43:54] *** Quits: blaphmat (Mibbit@ACE15FDA.6F0DF653.B9D97DBA.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:45:20] <strcat> Thiez: fyi incoming should be fixed optimization wise now
[14:45:45] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[14:45:45] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/3S3s0w
[14:45:45] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[14:45:45] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[14:45:45] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/jnVGZg
[14:45:45] <ghrust> 13rust/06auto 144f92d3a 15Huon Wilson: rustc: adjust span for error message to not trim last letter
[14:45:45] <ghrust> 13rust/06auto 145028ac7 15bors: auto merge of #6863 : huonw/rust/error-span, r=thestinger
[14:45:45] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[14:47:13] <strcat> uhh, something is wrong with the unsafe warnings.
[14:47:24] <strcat> unneeded unsafe
[14:47:28] <cmr> no there isn't
[14:47:42] <cmr> snapshot doesn't think unsafe blocks are needed to call unsafe methods
[14:47:42] <strcat> chmod is definitely marked as unsafe
[14:47:45] <cmr> stage1+ does
[14:47:47] <strcat> and it's not a method
[14:47:49] <cmr> oh
[14:47:55] <strcat>                 unsafe fn chmod(path: *c_char, mode: c_int) -> c_int;
[14:48:02] <strcat> /home/strcat/projects/rust/src/libstd/os.rs:962:12: 968:13 warning: unnecessary `unsafe` block [-W unused-unsafe (default)]
[14:48:04] <strcat> /home/strcat/projects/rust/src/libstd/os.rs:962             unsafe {
[14:48:06] <strcat> /home/strcat/projects/rust/src/libstd/os.rs:963                 if do str::as_c_str(to.to_str()) |to_buf| {
[14:48:08] <strcat> /home/strcat/projects/rust/src/libstd/os.rs:964                     libc::chmod(to_buf, from_mode as mode_t)
[14:48:10] <strcat> ok maybe 'pub use' breaks unsafe
[14:48:15] <strcat> that would be really bad, we should check
[14:49:20] <dbaupp> strcat: pcwalton landed a rewrite of the unsafe checker to try to get unsafe methods to be properly unsafe
[14:49:33] <dbaupp> but it seems to have broken it entirely
[14:49:48] <strcat> well that's not good
[14:49:53] <strcat> do we really not have tests for this?
[14:49:59] <strcat> ;\
[14:50:26] <dbaupp> strcat: nope, there are tests
[14:50:44] *** Quits: xandy (xandy@moz-EA2E101B.eventnet.ccc.de) (Ping timeout)
[14:51:08] <dbaupp> strcat: 10 cfail ones with 'unsafe' in the name, and they all pass (no xfails or ignores)
[14:52:35] *** Joins: xandy (xandy@moz-EA2E101B.eventnet.ccc.de)
[14:53:42] *** Joins: robo (Mibbit@1BF3E81.DCF3E831.27560D6E.IP)
[14:54:48] *** Joins: strcat1 (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[14:54:52] <strcat1> rusti: 5
[14:55:26] <jdm> strcat1: that was an identified bug before pcwalton's changes
[14:55:29] <jdm> nobody's looked into it yet
[14:55:31] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[14:55:32] <strcat1> ah
[14:55:41] *** Joins: xazax (xazax@moz-D7592A2A.csoma.elte.hu)
[14:55:50] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[14:55:56] <strcat1> rusti: stawp
[14:55:59] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/WBHL
[14:56:01] <jdm> https://github.com/mozilla/rust/issues/6030
[14:56:14] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[14:56:44] <strcat1> jdm: k, added a comment
[14:56:51] <strcat1> I'll do some testing once this current thing finishes
[14:57:02] <robo> i m implementin wrapper for leveldb in rust and hence also plan to make snappy compression wrapper.. is there a package already for tat which i can use?
[14:57:17] <strcat1> robo: there are snappy bindings and leveldb bindings, yes
[14:57:22] *** Joins: lmandel (lmandel@F2D29657.F60B0462.67AC9B1.IP)
[14:57:23] <jdm> strcat1: can you clarify that? I don't understand your comment.
[14:57:27] <strcat1> the leveldb bindings are totally unfinished
[14:57:38] <strcat1> jdm: I think the pub use statements change the path and the unsafe checker doesn't work
[14:57:43] <strcat1> we re-export all the libc stuff
[14:57:52] <strcat1> it's really libc::a::bunch::of::stuff
[14:57:52] <jdm> ah, that sounds reasonable
[14:57:55] <strcat1> and pub use in libc::
[14:57:59] *** strcat1 is now known as strcat
[14:58:52] <strcat> robo: https://github.com/thestinger/rust-snappy snappy, https://github.com/thestinger/rust-leveldb leveldb
[14:58:59] <robo> @strcat where can i find those bindings?
[14:59:00] <bstrie> I just found out about git diff -w and I am in love
[14:59:01] <strcat> leveldb really needs a lot more work
[14:59:08] <robo> oh thanks
[14:59:08] <strcat> bstrie: --color-words
[14:59:38] <strcat> I'm assuming you already have color enabled in general though
[15:00:23] <bstrie> strcat: this is wonderful, why isn't it the default?
[15:00:31] <strcat> bstrie: because git
[15:00:36] <bstrie> also, how do I make it the default in my global git config?
[15:00:49] <strcat> hm
[15:00:53] * strcat doesn't know that
[15:00:55] <strcat> I just have
[15:00:58] <bstrie> internet time
[15:00:58] <strcat> [color]
[15:01:00] <strcat>  ui = auto
[15:01:00] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[15:01:04] <strcat> and some other things like decorate = full for log
[15:01:30] <strcat> bstrie: https://github.com/thestinger/dotfiles/blob/master/.config/git/config if you want a starting place ;p
[15:01:51] <strcat> the autocrlf thing is set poorly tho
[15:01:53] <strcat> ignore that.
[15:02:32] *** Quits: pyrac (pyrac@moz-11888CFC.math.u-bordeaux1.fr) (Ping timeout)
[15:02:49] <strcat> bstrie: also you can use git diff instead of git
[15:02:51] <strcat> err
[15:02:53] <strcat> instead of diff
[15:02:55] <strcat> without a git repo
[15:03:04] <strcat> git diff --color-words --no-index path path2
[15:03:08] <strcat> :)
[15:03:35] <bstrie> haha
[15:04:30] <bstrie> screw it, I already have "gg" aliased to git grep, I'm fine with "gd" as git diff -w --color-words
[15:04:50] <strcat> bstrie: also turn on the default pre-commit hook
[15:04:56] <strcat> it checks for leftover merge markers and whitespace errors
[15:05:07] <bstrie> how do I do this
[15:05:09] <strcat> cp .git/hooks/pre-commit.sample .git/hooks/pre-commit
[15:05:11] <strcat> it's per-repo
[15:05:14] <bstrie> gross
[15:05:25] <strcat> and I added a .gitattributes to set the whitespace stuff for rust properly...
[15:05:44] <bstrie> I have like a hundred rust repos, this is not a viable solution
[15:07:01] <bstrie> not to mention that I'd have to remember to re add it every time that I blow away my repo, which is not infrequent
[15:07:08] <doener> you can also do the copy in the template directory
[15:07:32] <bstrie> tell me of this magic
[15:07:37] <doener> usually /usr/share/git-core/templates/hooks
[15:07:54] *** Joins: jrfeenst (jrfeenst@moz-3265BD65.cpe.norwoodlight.com)
[15:07:55] <doener> that's the directory that's copied when a new repo is initialized/clone
[15:07:56] <doener> d
[15:08:10] <bstrie> I will try
[15:12:31] *** Parts: robo (Mibbit@1BF3E81.DCF3E831.27560D6E.IP) ()
[15:14:04] *** Quits: doener (bs@moz-AA189A5A.unitymedia.biz) (Quit: leaving)
[15:17:50] <strcat> bstrie: you can also just remember to run 'git diff --check' before a commit but... ;p
[15:18:04] <strcat> no way I can remember that
[15:23:58] <strcat> rusti: let x = 5; let y = &x; let z = y as int; z
[15:24:00] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/aBYL
[15:24:03] <strcat> rusti: let x = 5; let y = &x; let z = y as *int; z
[15:24:05] -rusti- 31878680
[15:24:11] <strcat> rusti: let x = 5; let y = &x; let z = y as *int as uint; z
[15:24:11] -rusti- 37916184
[15:24:12] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[15:25:16] *** Quits: victorporof (victorporo@A2ABEB67.124F9E.4A6B528C.IP) (Quit: victorporof)
[15:25:45] *** Quits: xandy (xandy@moz-EA2E101B.eventnet.ccc.de) (Ping timeout)
[15:27:10] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke. It's all a joke.)
[15:27:30] <strcat> rusti: fn null() -> *int { 0 }
[15:27:32] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/FEbY
[15:27:35] <strcat> rusti: fn null() -> *int { 0 as *int }
[15:27:36] -rusti- ()
[15:27:51] *** Quits: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net) (Quit: computer sleeping)
[15:30:42] *** Quits: jaen (jaen@moz-AEEB3C04.play-internet.pl) (Quit: WeeChat 0.4.1)
[15:30:48] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[15:31:27] *** Joins: xandy (xandy@moz-EA2E101B.eventnet.ccc.de)
[15:36:40] *** Joins: ysuzuki (ysuzuki@moz-60FA9D06.net119083145.t-com.ne.jp)
[15:37:11] <strcat> dbaupp: so you have r+ powers? I forget
[15:37:19] <dbaupp> strcat: nope
[15:37:30] <dbaupp> i'm a mere commoner
[15:37:35] * strcat needs someone to nag ;p
[15:37:43] <dbaupp> bstrie?
[15:38:07] <strcat> https://github.com/mozilla/rust/pull/6862 anyway, if someone is around :)
[15:38:34] *** Quits: jdm (jdm@DB05BBF2.BB1F48F2.971E19F6.IP) (Ping timeout)
[15:39:20] <bstrie> ah, a chance to review something that's not completely over my head
[15:40:10] <bstrie> I agree that having a `util` module at all is a smell
[15:46:03] *** Joins: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net)
[15:47:20] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[15:48:04] <bstrie> strcat: r+'d
[15:48:07] <strcat> :)
[15:48:09] <strcat> thanks
[15:48:21] <bstrie> very happy to get rid of so many unsafe blocks
[15:49:20] <strcat> if only there was a snapshot ;p
[15:49:37] <bstrie> yes
[15:49:49] *** Joins: jeff (jeff@4231C034.745B261B.F12515B4.IP)
[15:52:39] <dbaupp> strcat: unsuprisingly, removing bb-vectorise seemed to make the build faster
[15:54:15] <EXetoC> alright, better number interfaces! 1.0f32.sqrt()
[15:54:28] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[15:55:30] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[15:55:39] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[15:56:50] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[15:57:19] *** Joins: tiffnya (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[15:57:38] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[15:57:38] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/jnVGZg
[15:57:38] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[16:00:04] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:00:36] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:00:44] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[16:00:44] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/krR2rg
[16:00:44] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[16:00:46] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[16:00:46] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/S1s6hA
[16:00:46] <ghrust> 13rust/06auto 1429aba80 15Daniel Micay: mv the raw pointer {swap,replace}_ptr to std::ptr
[16:00:46] <ghrust> 13rust/06auto 14042618d 15Daniel Micay: ptr: replace unnecessary unsafe code
[16:00:46] <ghrust> 13rust/06auto 14a7e7c99 15bors: auto merge of #6862 : thestinger/rust/swap, r=bstrie...
[16:00:48] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[16:01:23] *** Joins: txdv (quassel@966F3542.3BA477DA.14C26596.IP)
[16:02:14] *** Quits: catalin (Mibbit@moz-933D980B.adsl2.static.versatel.nl) (Quit: http://www.mibbit.com ajax IRC Client)
[16:02:24] <Thiez> strcat: awesome, I'll check it out :)
[16:02:38] *** Joins: shmoo (Mibbit@moz-FD9A8D70.tvc-ip.com)
[16:03:19] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[16:03:20] *** Quits: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP) (Ping timeout)
[16:05:39] <cmr> strcat: r? https://github.com/mozilla/rust/pull/6826
[16:07:03] *** Quits: shmoo (Mibbit@moz-FD9A8D70.tvc-ip.com) (Quit: http://www.mibbit.com ajax IRC Client)
[16:07:09] *** Joins: cornelius (Mibbit@moz-FD9A8D70.tvc-ip.com)
[16:07:18] <strcat> cmr: I still need to figure out a sane way of whitelisting devices for playpen
[16:07:19] * strcat sighs
[16:07:30] <strcat> why must they have spaces in the commands ;p
[16:08:01] <strcat> oh well, hardcoded read access to 1:9 isn't that bad (/dev/urandom) for now
[16:09:13] *** Joins: eholk (eholk@moz-3D703D55.uconnect.utah.edu)
[16:09:25] <erickt> Eridius: ping
[16:09:44] *** Joins: MaikKlein (maik@moz-AC9459D8.dip0.t-ipconnect.de)
[16:09:54] *** Quits: z0w0 (zack@moz-B5D18119.lns1.woo.bigpond.net.au) (Quit: Leaving.)
[16:10:19] *** Joins: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP)
[16:11:20] <strcat> rusti: 5
[16:11:24] -rusti- 5
[16:12:23] *** Quits: dbaupp (Thunderbir@moz-C6B1454A.lns20.syd7.internode.on.net) (Ping timeout)
[16:13:51] *** Quits: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP) (Ping timeout)
[16:15:50] <MaikKlein> rusti: ~"Hey"
[16:15:51] -rusti- ~"Hey"
[16:17:08] *** Joins: jack (jack@2557E599.66715431.D25A875A.IP)
[16:22:56] <MaikKlein> is there no .foreach?
[16:23:11] <strcat> it's called each
[16:23:22] <MaikKlein> but it has to return a bool?
[16:23:32] <strcat> it returns whether it was broken out of
[16:23:58] <bstrie> MaikKlein: you use it with the `for` keyword. `for [1,2,3].each |element| { ... }`
[16:25:00] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[16:25:25] <MaikKlein> bstrie: oh okay
[16:25:27] <MaikKlein> thanks
[16:26:02] <cmr> MaikKlein: it uses the for loop protocol, http://smallcultfollowing.com/babysteps/blog/2013/01/16/revised-for-loop-protocol/
[16:26:23] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[16:26:28] *** Joins: jviereck (Adium@moz-7D34B37E.dclient.hispeed.ch)
[16:26:50] <strcat> core::iter documents it too
[16:26:53] <strcat> err
[16:26:56] <strcat> std::iter :)
[16:27:04] *** Joins: deepdog (deepdog@moz-490E834C.client.mchsi.com)
[16:27:59] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[16:28:00] *** Joins: jdm (jdm@F2D29657.F60B0462.67AC9B1.IP)
[16:30:24] *** Joins: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP)
[16:30:57] *** Quits: lerc (quassel@121-74-233-23.telstraclear.net) (Ping timeout)
[16:30:57] <strcat> rusti: time for you to do the usr move ;p
[16:30:58] -rusti- foo.rs:10:14: 10:17 error: expected `;` or `}` after expression but found `for`
[16:30:58] -rusti- foo.rs:10          time for you to do the usr move ;p
[16:30:58] -rusti-                         ^~~
[16:30:58] -rusti- application terminated with error code 101
[16:31:14] <mark_edward> why isn't there any convention on how to create new objects
[16:31:21] <mark_edward> like constructors or anything
[16:31:32] <strcat> because it doesn't need to be a language feature
[16:31:36] <strcat> there's certainly a convention
[16:31:53] <strcat> static methods called new, new_foo_bar, from_type
[16:31:57] <bstrie> mark_edward: a static "new" method on the type
[16:32:14] <mark_edward> how do i create a new empty vec without doing let mut v: ~[float] = ~[];
[16:32:16] <strcat> rusti: do you still work
[16:32:16] -rusti- playpen: execve: No such file or directory
[16:32:16] -rusti- application terminated abnormally with signal 31 (Bad system call)
[16:32:21] *** Joins: pyrac (pyrac@moz-285C535.w92-156.abo.wanadoo.fr)
[16:32:21] <strcat> :)
[16:32:24] <strcat> rusti: 5
[16:32:25] -rusti- playpen: execve: No such file or directory
[16:32:25] -rusti- application terminated abnormally with signal 31 (Bad system call)
[16:32:30] <strcat> hm what did I hardcode
[16:32:33] <bstrie> `impl Foo { fn new() -> Foo { ... } }` and then `Foo::new()`
[16:32:37] <bstrie> mark_edward: ^
[16:32:41] <strcat> oh it's trying to follow a symlink with a syscall
[16:33:13] <cmr> mark_edward: you... don't. ~[] is how you make a new empty vec
[16:33:19] <cmr> mark_edward: there is also with_capacity
[16:33:28] <bstrie> mark_edward: rust has to be able to infer the type from use. if you don't use the empty vec anywhere, it can't tell the type, so you need to be explicit
[16:33:30] <cmr> mark_edward: note that you donh't need the type, it will be infered
[16:33:45] <strcat> rusti: let mut xs = ~[]; xs.push(5); xs
[16:33:45] -rusti- playpen: execve: No such file or directory
[16:33:45] -rusti- application terminated abnormally with signal 31 (Bad system call)
[16:33:48] <strcat> well
[16:33:49] <strcat> let me fix that
[16:34:08] <mark_edward> it can infer it from how the vec is used later on? i thought it needed something in the declaration
[16:34:14] <bstrie> nope
[16:34:16] <cmr> nope, it;s smart
[16:34:22] <bstrie> if you user it later, it knows
[16:34:29] <bstrie> this is what *real* type inference is :)
[16:34:29] <cmr> same with hashmaps and everything else.
[16:34:55] <mark_edward> lot smarter than auto in C++11 then
[16:34:56] <bstrie> is C++ `auto` HM-style inference?
[16:35:02] <strcat> bstrie: no
[16:35:03] <cmr> rusti: let mut h = HashMap::new(); h.insert(1234, "foo"); h.insert("foo", 1234);
[16:35:04] -rusti- playpen: execve: No such file or directory
[16:35:04] -rusti- application terminated abnormally with signal 31 (Bad system call)
[16:35:09] <strcat> bstrie: it infers from the expr on the right
[16:35:10] <bstrie> strcat: is it the same as go, then?
[16:35:14] <strcat> bstrie: yes
[16:35:19] <bstrie> ok, good to know
[16:35:20] <strcat> but it has return-type inference too
[16:35:26] <bstrie> "it" being what?
[16:35:42] <bstrie> go or c++?
[16:35:50] <MaikKlein> out of curiosity, has "any" not the same meaning as "all"?
[16:36:00] <bstrie> MaikKlein: where?
[16:36:01] <strcat> rust doesn't
[16:36:01] <strcat> auto foo() -> decltype(some expr) {}
[16:36:01] <strcat> C++14 will let you omit decltype(body of function)
[16:36:03] <strcat> (decltype is just a standard typeof operator)
[16:36:03] <MaikKlein> if we speak about elements of a vector
[16:36:05] <strcat> bstrie: C++
[16:36:17] <strcat> MaikKlein: no, any means predicate is true for at least 1
[16:36:19] <strcat> all means true for all
[16:36:29] <bstrie> ok
[16:36:41] <MaikKlein> oh
[16:36:41] <strcat> rusti: 5
[16:36:42] <cmr> Return type inference would be nice but it'd be easy to screw up an ABI with it
[16:36:43] -rusti- 5
[16:36:46] <strcat> cmr: there.
[16:36:46] <cmr> rusti: let mut h = HashMap::new(); h.insert(1234, "foo"); h.insert("foo", 1234);
[16:36:48] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/PhDc
[16:36:58] <cmr> mark_edward: is what happens when TI fails
[16:37:02] <strcat> for some reason #!/bin/dash uses a syscall that's not whitelisted because /bin is a symlink to /usr/bin
[16:37:09] <cmr> well
[16:37:18] <cmr> rusti: let mut h = std::hashmap::HashMap::new(); h.insert(1234, "foo"); h.insert("foo", 1234);
[16:37:19] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/hDEj
[16:37:45] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[16:37:46] <MaikKlein> but should I then use .all instead of each? 
[16:37:49] <Thiez> I love Rust type inference
[16:37:51] <MaikKlein> rusti: let a = [1,2,3]; for a.all |x|{ println(fmt!("%i",*x));}
[16:37:52] -rusti- 1
[16:37:52] -rusti- 2
[16:37:52] -rusti- 3
[16:37:52] -rusti- ()
[16:37:56] <Thiez> it's so convenient
[16:38:01] <mark_edward> in .06 it's core::hashmap::linear::LinearMap i think
[16:38:04] <cmr> MaikKlein: that is not what all is for
[16:38:12] <mark_edward> *0.6
[16:38:26] <cmr> MaikKlein: all is for testing that a predicate is true for all items. you shouldn't be using it with a for loop like that
[16:38:47] <cmr> MaikKlein: you should be using each
[16:38:49] <mark_edward> rusti: let mut h = core::hashmap::LinearMap::new(); h.insert(1234, "foo"); h.insert("foo", 1234);
[16:38:50] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/dXYP
[16:38:53] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[16:39:12] <Thiez> mark_edward: rusti runs a more recent version of Rust
[16:39:15] <cmr> mark_edward: core was renamed to std on incoming
[16:39:21] <mark_edward> oh ok
[16:39:21] <Thiez> as I recall it updates every day?
[16:39:34] <MaikKlein> every few hours
[16:39:35] <Thiez> no more LinearMap
[16:39:44] <mark_edward> oh alright.
[16:39:48] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[16:39:54] <Thiez> it's bleeding edge :p
[16:39:59] <strcat> rusti: std::create_process("ls", [~"-l", ~"/"]);
[16:40:00] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/SjDQ
[16:40:06] <strcat> meh
[16:40:16] <mark_edward> how would you build rust from the mozilla/rust repo, and not the static snapshot?
[16:40:22] <strcat> rusti: print(str::from_bytes(std::process_output("ls", [~"-l", ~"/"])));
[16:40:23] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/IHig
[16:40:31] <strcat> rusti: print(str::from_bytes(std::process_output("ls", [~"-l", ~"/"]).output));
[16:40:32] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/bWSN
[16:40:45] <strcat> rusti: print(str::from_bytes(std::run::process_output("ls", [~"-l", ~"/"]).output));
[16:40:46] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/eXKQ
[16:40:58] <strcat> rusti: print(std::str::from_bytes(std::run::process_output("ls", [~"-l", ~"/"]).output));
[16:40:59] -rusti- ()
[16:41:05] <Thiez> you would git clone the mozilla/rust repo, then checkout incoming, then mkdir build, cd build, ../configure, and make
[16:41:06] <strcat> yay for not having anything in prelude
[16:41:09] <Thiez> or something along those lines
[16:41:12] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[16:41:19] <strcat> rusti: print(std::str::from_bytes(std::run::process_output("ls", [~"-l", ~"/"]).error));
[16:41:20] -rusti- ()
[16:41:23] <strcat> wat
[16:41:39] <cmr> strcat: yeah, I think it's annoying :/
[16:41:45] <strcat> rusti: std::run::process_output("ls", [~"-l", ~"/"])
[16:41:46] -rusti- {status: 1, output: ~[], error: ~[]}
[16:41:47] <cmr> I didn;t mind the reexports and they were nice
[16:41:51] <strcat> what the hell.
[16:41:53] <Thiez> I liked them too
[16:41:59] <Thiez> they were very convenient
[16:42:01] <strcat> rusti: std::run::process_output("ls", [~"-l", ~"/home/rust"])
[16:42:02] -rusti- {status: 1, output: ~[], error: ~[]}
[16:42:07] <strcat> rusti: std::run::process_output("ls", [~"/home/rust"])
[16:42:08] -rusti- {status: 0, output: ~[102, 111, 111, 10, 102, 111, 111, 46, 114, 115, 10], error: ~[]}
[16:42:22] <strcat> hm
[16:42:23] <Thiez> you can 'fix' it by doing 'use std::*'
[16:42:27] <strcat> I guess it's being killed
[16:42:29] <mark_edward> they are too confusing to me
[16:42:41] <mark_edward> you don't know what's exported or not 
[16:42:50] <mark_edward> and it doesn't seem to be documented anywhere
[16:42:53] *** Quits: jeff (jeff@4231C034.745B261B.F12515B4.IP) (Quit: jeff)
[16:42:54] <Thiez> mark_edward: well the compiler tells you if you got it wrong :p
[16:43:07] <cmr> mark_edward: src/libstd/prelude.rs s the list
[16:43:16] <strcat> mark_edward: http://ix.io/5ST not much anymore
[16:43:44] <strcat> really need to phase out old_iter
[16:43:59] <mark_edward> yeah but it'd be better if you didn't need to look at source all the time
[16:44:04] <mark_edward> to figure things out
[16:44:10] <strcat> yes it would be better if rustdoc output pub use statements but it doesn't
[16:44:15] <mark_edward> bu i get that rust isn't at 1.0 now
[16:44:16] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[16:44:50] <strcat> rusti: botsnack
[16:44:51] -rusti- "nom nom"
[16:45:11] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[16:45:21] *** Joins: brendan (brendaneic@moz-EAC95265.hfc.comcastbusiness.net)
[16:45:38] <strcat> oh ls -l uses a bunch of weird syscalls
[16:45:42] <strcat> heh
[16:45:53] *** Quits: MaikKlein (maik@moz-AC9459D8.dip0.t-ipconnect.de) (Ping timeout)
[16:46:10] <strcat> wants socket, connect, getxattr
[16:46:46] <strcat> rusti: std::run::process_output("ls", [~"-l", ~"/home/rust"])
[16:46:48] -rusti- line longer than 150 columns, pastebinned: http://sprunge.us/SQWS
[16:47:09] <strcat> rusti: print(std::str::from_bytes::std::run::process_output("ls", [~"-l", ~"/home/rust"]).output)
[16:47:10] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/GDCI
[16:47:14] <strcat> rusti: print(std::str::from_bytes::std::run::process_output("ls", [~"-l", ~"/home/rust"]).output))
[16:47:15] -rusti- foo.rs:10:99: 10:100 error: incorrect close delimiter: `)`
[16:47:15] -rusti- foo.rs:10          print(std::str::from_bytes::std::run::process_output("ls", [~"-l", ~"/home/rust"]).output))
[16:47:15] -rusti-                                                                                                              ^
[16:47:15] -rusti- application terminated with error code 101
[16:47:20] <strcat> heh
[16:47:31] <strcat> rusti: print(std::str::from_bytes(std::run::process_output("ls", [~"-l", ~"/home/rust"]).output))
[16:47:33] -rusti- total 108
[16:47:33] -rusti- -rwx------ 1 rust users 103047 May 31 12:45 foo
[16:47:33] -rusti- -rw------- 1 rust users    264 May 31 12:45 foo.rs
[16:47:33] -rusti- ()
[16:47:36] <strcat> finally.
[16:49:53] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[16:50:47] *** Quits: deepdog (deepdog@moz-490E834C.client.mchsi.com) (Ping timeout)
[16:52:43] *** Quits: xazax (xazax@moz-D7592A2A.csoma.elte.hu) (Quit: Ex-Chat)
[16:53:37] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[16:54:01] <Thiez> strcat: when you said 'fixed optimization wise', what exactly did you mean?
[16:54:13] <Thiez> because the ray-tracer seems to have gotten even slower :p
[16:54:14] <strcat> Thiez: horrible basic block vectorize pass turned back off
[16:54:20] <strcat> Thiez: what are you comparing to?
[16:54:41] <Thiez> now comparing 682afca to 5028ac7
[16:55:09] <Thiez> used to be 10.066 seconds tracing, now 13.815
[16:55:14] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[16:55:18] <Thiez> I guess rustray liked the vectorize pass
[16:55:35] *** Joins: strcat1 (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:55:35] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[16:55:51] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[16:55:52] *** Joins: lkuper_ (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[16:56:03] <Thiez> then again, only a while ago (f245d11) tracing took 4.722 seconds
[16:56:07] *** Joins: thomaslee (thomaslee@moz-6C3931E3.static.twtelecom.net)
[16:56:12] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[16:56:14] <Thiez> so the regression is not all that impressive :p
[16:56:18] *** strcat1 is now known as strcat
[16:56:25] <strcat> Thiez: what about with RUST_MIN_STACK=5000000
[16:56:33] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[16:56:33] *** ChanServ sets mode: +o dherman
[16:57:18] <Thiez> strcat: no real change, tracing took 13.683
[16:57:32] <strcat> well, *shrug*
[16:57:40] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[16:57:40] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14a7e7c99 to 145028ac7: 02http://git.io/N3iJvQ
[16:57:40] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[16:57:40] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[16:57:40] <ghrust> 01[13rust01] 15bors pushed 1 new commit to 06auto: 02http://git.io/NW3Kow
[16:57:40] <ghrust> 13rust/06auto 1471f9dde 15bors: auto merge of #6826 : cmr/rust/terminfo, r=thestinger...
[16:57:41] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[16:57:43] <strcat> bb vectorize can go back on when they mark it as stable
[16:57:57] <Thiez> did we upgrade llvm last week?
[16:58:06] <Thiez> perhaps they got worse :p
[16:58:06] <strcat> no, don't think so
[16:58:16] <strcat> Thiez: we replaced the old optimization pass stuff
[16:58:23] <strcat> and I don't think the new code is right
[16:58:34] <strcat> have to talk to aatch about it but... it's a big regression
[16:58:53] <strcat> it's obviously not doing the same thing as clang
[16:58:56] <strcat> or what we did before
[16:59:07] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[16:59:15] <Thiez> Do we keep track of the #bench numbers somewhere?
[16:59:18] <strcat> nope
[16:59:30] <strcat> imo we should revert it though ;\
[16:59:33] <Thiez> that sort of defeats the purpose... :p
[17:01:01] <Thiez> I'm inclined to agree there
[17:05:56] <nmatsakis> strcat: the "is rust fast yet" numbers seem stable but ... hard to understand
[17:06:01] <nmatsakis> strcat: that is, jumps occur at odd pull requests
[17:06:11] <strcat> nmatsakis: that's compile-time though, doesn't really mean much
[17:07:32] <strcat> I guess what we need to do is copy clang's optimization pass code
[17:07:40] <strcat> and *not* try to be smarter without hard numbers to back it up
[17:08:11] *** Quits: brendan (brendaneic@moz-EAC95265.hfc.comcastbusiness.net) (Quit: brendan)
[17:08:15] <strcat> like, mergefuncs sounds good but we don't know what it costs in compile-time
[17:08:36] <strcat> or what the gains are
[17:09:02] <cmr> clang is a good basepoint
[17:10:03] <cmr> there was that tool that picked GCC flags for a program based on a genetic algorithm
[17:10:17] <cmr> doing that with --passes would be neat
[17:10:26] *** Joins: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP)
[17:10:26] *** ChanServ sets mode: +o pcwalton
[17:11:08] <strcat> pcwalton: do you think it would be sane to put swap/replace in prelude? I really want to get rid of util
[17:11:18] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:11:24] <pcwalton> I'm ok with that
[17:11:31] <cmr> what woudld be best though is probably a plot of optimizations with speed and compiletime as the two axes, and someone can decide which point to use. it;s a huge, slow process to do though
[17:11:40] <cmr> and is N! ...
[17:12:18] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[17:12:22] <strcat> util::id vs |x| x, might as well just rm that
[17:12:38] <strcat> ignore can be replaced with explicit destructor calls once it takes self by-value
[17:13:33] *** Quits: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net) (Ping timeout)
[17:14:00] <pcwalton> I like ignore
[17:14:09] <pcwalton> some people don't like "let _ = ..."
[17:14:18] <strcat> pcwalton: I mean we could allow foo.drop()
[17:14:24] <strcat> and just move into the destructor
[17:14:25] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[17:14:28] <nmatsakis> strcat: yeah, I'm aware that isrustfastyet is not a good metric of whether rust is, you know, fast. Though a frozen version of rustc would be a good benchmark. But it IS a good metric for "why the hell does it take so long to build these days?"
[17:14:31] <pcwalton> hmm, doesn't work for ~T
[17:14:43] <strcat> pcwalton: it should ;p
[17:14:46] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[17:14:49] <nmatsakis> strcat: my achine seems to have had a major build-time regression recently, in particular, which seems to be not be fully reflected in isrustfastyet---possibly because I'm running 32 bit linux
[17:15:01] <pcwalton> 32 bit linux is segfaulting on the bots
[17:15:01] <strcat> pcwalton: we should make it possible to implement with Drop
[17:15:12] <strcat> #[no_drop_flag]
[17:15:19] <nmatsakis> pcwalton: hmm. well, I am not seeing segfaults, though I do see some random failing test.
[17:15:26] <strcat> something like that
[17:16:24] <bstrie> getting rid of util would be awesome
[17:16:31] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[17:16:37] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Ping timeout)
[17:16:49] <bstrie> is there really a function in std right now that just emulates `let _ = foo` ?
[17:16:56] <bstrie> because that's very silly
[17:16:56] <strcat> bstrie: yes
[17:17:08] <cmr> util::unused or something
[17:17:14] <bstrie> embrace pattern matching
[17:17:26] <cmr> oh you;re mocking the function
[17:17:35] <bstrie> yes
[17:17:38] <strcat> rusti: fn Foo { x: int } impl Drop for Foo { fn finalize(&self) { for self.x.times { println("bar") } } Foo{x: 5}
[17:17:38] -rusti- foo.rs:11:5: 11:6 error: incorrect close delimiter: `)`
[17:17:38] -rusti- foo.rs:11     }));
[17:17:38] -rusti-                ^
[17:17:38] -rusti- application terminated with error code 101
[17:17:56] <strcat> rusti: struct Foo { x: int } impl Drop for Foo { fn finalize(&self) { for self.x.times { println("bar") } } Foo{x: 5}
[17:17:56] -rusti- foo.rs:11:5: 11:6 error: incorrect close delimiter: `)`
[17:17:56] -rusti- foo.rs:11     }));
[17:17:57] -rusti-                ^
[17:17:57] -rusti- application terminated with error code 101
[17:18:15] *** Joins: deepdog (deepdog@moz-490E834C.client.mchsi.com)
[17:18:15] <strcat> rusti: struct Foo { x: int } impl Drop for Foo { fn finalize(&self) { for self.x.times { println("bar") } } } Foo{x: 5}
[17:18:16] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/dNFS
[17:18:28] <strcat> rusti: struct Foo { x: uint } impl Drop for Foo { fn finalize(&self) { for self.x.times { println("bar") } } } Foo{x: 5}
[17:18:29] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/QDiF
[17:18:51] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Quit: ["Textual IRC Client: www.textualapp.com"])
[17:18:56] <strcat> rusti: struct Foo { x: uint } impl Drop for Foo { fn finalize(&self) { for self.x.times { println("bar") } } } let  = Foo{x: 5}; util::ignore(x); println("end")
[17:18:57] -rusti- line longer than 150 columns, pastebinned: http://sprunge.us/hLLN
[17:19:07] <strcat> rusti: struct Foo { x: uint } impl Drop for Foo { fn finalize(&self) { for self.x.times { println("bar") } } } let x = Foo{x: 5}; util::ignore(x); println("end")
[17:19:08] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/WObW
[17:19:14] * strcat gives up
[17:19:16] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[17:19:24] <strcat> rusti: struct Foo { x: uint } impl Drop for Foo { fn finalize(&self) { for self.x.times { println("bar") } } } let x = Foo{x: 5}; std::util::ignore(x); println("end")
[17:19:25] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/HYGj
[17:19:42] <strcat> rusti: struct Foo { x: uint } impl Drop for Foo { fn finalize(&self) { for self.x.times { println("bar") } } } let x = Foo{x: 5}; let _ = x; println("end")
[17:19:43] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/QJJN
[17:19:56] <strcat> pcwalton: let _ = y doesn't call the destructor immediately :(
[17:20:52] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (Ping timeout)
[17:22:01] <Thiez> the patch that allows calling finalize explicitly is only about 10 lines of changes :p
[17:22:24] *** Joins: jclements (jclements@2557E599.66715431.D25A875A.IP)
[17:22:37] *** Joins: graydon (Adium@A5087023.2354C43D.D8E68FF6.IP)
[17:22:37] *** ChanServ sets mode: +qo graydon graydon
[17:22:44] <strcat> it needs to take it by-value though or it's not going to be safe
[17:23:21] <nmatsakis> strcat: yeah I've been thinking about what's needed to make that change
[17:23:23] <Thiez> if you want it safe just define '#[inline(always)] fn finalize_please<T>(_: T) {}
[17:23:27] <nmatsakis> strcat: updating the safety analysis seems fairly straight-forward
[17:23:51] <nmatsakis> strcat: actually most of the work seems pretty straight-forward, dstructors are used rarely enough it...might be worth just doing the switch in one big step with #[cfg(stage0)]
[17:27:29] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[17:27:41] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[17:27:41] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1471f9dde to 145028ac7: 02http://git.io/N3iJvQ
[17:27:41] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[17:27:41] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[17:27:41] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/v0refg
[17:27:41] <ghrust> 13rust/06auto 14aed53f9 15Alex Crichton: Promote unreachable code to being a lint attribute
[17:27:41] <ghrust> 13rust/06auto 14d01c7d0 15Alex Crichton: Fix a bug with HashMap::consume
[17:27:42] <ghrust> 13rust/06auto 14a25c704 15Alex Crichton: Rewrite deriving(Decodable, Encodable)...
[17:27:44] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[17:28:32] <cmr> awwwwww
[17:28:34] <keruspe> Hi
[17:28:35] *** Joins: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP)
[17:28:43] <bstrie> keruspe: hello
[17:28:51] <keruspe> I'm packaging rust for my distribution and getting some test failure
[17:29:17] *** Quits: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk) (Quit: Leaving)
[17:29:18] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[17:29:20] <cmr> keruspe: 0.6?
[17:29:22] <keruspe> Here is the full configure/build/test log: http://bpaste.net/raw/103389/ 
[17:29:23] <keruspe> Yep
[17:29:27] *** Quits: jclements (jclements@2557E599.66715431.D25A875A.IP) (Quit: jclements)
[17:29:34] <keruspe> "
[17:29:38] <keruspe> run debuginfo: x86_64-unknown-linux-gnu/stage2/bin/compiletest" is failing
[17:30:18] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[17:30:19] *** Quits: jack (jack@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[17:31:06] *** Quits: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP) (Quit: pcwalton)
[17:31:36] <cmr> error: line not found in debugger output: $1 = {4, 5.5, true}
[17:31:57] <cmr> hhm
[17:31:59] <cmr> x86_64-unknown-linux-gnu/test/debug-info/tuple.debugger.script:3: Error in sourced command file:
[17:32:05] <cmr> keruspe: what version of gcc do you have?
[17:32:10] <cmr> gdb, rather
[17:32:28] <bstrie> keruspe: what distro?
[17:32:34] <cmr> exherbo I'm betting
[17:32:51] <cmr> only one I know tat uses paludis
[17:33:22] <keruspe> cmr: gcc 4.7.3
[17:33:39] <keruspe> cmr: gdb 7.5.1
[17:33:42] <bstrie> cmr: that sounds like you're intermittently lapsing into latin
[17:33:44] <keruspe> exherbo, yep
[17:34:14] <keruspe> gentoo can use paludis too, but it's only the default for exherbo indeed
[17:34:27] *** Joins: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP)
[17:34:27] *** ChanServ sets mode: +o pcwalton
[17:34:33] <bstrie> "A distribution 'designed for people who know what they're doing with Linux'."
[17:34:33] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[17:34:33] *** ChanServ sets mode: +o brson
[17:34:34] <cmr> keruspe: tests pass with gdb 7.6, I'm not sure what version the tests are written against
[17:34:38] * bstrie runs away
[17:34:50] *** Joins: mib_pk4bav (Mibbit@moz-FFF7D549.pool.mediaways.net)
[17:34:58] *** Quits: mib_pk4bav (Mibbit@moz-FFF7D549.pool.mediaways.net) (Quit: http://www.mibbit.com ajax IRC Client)
[17:35:03] <keruspe> cmr: will try upgrading gdb then, thanks
[17:35:10] *** Joins: thatfreakingguy (Mibbit@moz-FFF7D549.pool.mediaways.net)
[17:35:35] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[17:36:36] *** Joins: mschifer (Adium@2557E599.66715431.D25A875A.IP)
[17:37:22] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[17:37:30] *** Joins: tikue (tkuehn@2557E599.66715431.D25A875A.IP)
[17:39:54] *** Quits: sk (sk@EA324BFE.54A580E3.78DD174B.IP) (Quit: Leaving)
[17:40:54] <strcat> nmatsakis: I'm going to add back noalias for &mut but fail out if there are any @mut, &const or closures in parameters
[17:41:03] <strcat> bail*
[17:41:16] * strcat thinks that should be fine
[17:41:33] <strcat> can make it more specific later if/when we decide &T and &U can't alias on certain circumstances
[17:42:09] *** Quits: tiffnya (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Input/output error)
[17:42:40] <nmatsakis> strcat: I am not sure if that is sufficient
[17:42:45] <strcat> hm
[17:42:53] <nmatsakis> strcat: in particular, 
[17:43:01] <nmatsakis> strcat: it wasn't clear to me from the text,
[17:43:13] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[17:43:24] <nmatsakis> strcat: if you had something like this: fn foo(x: &mut, y: @@mut) where x == &mut **y
[17:43:34] *** Quits: novabyte (Instantbir@2DD7DBE9.2CF725C4.65C00F68.IP) (Ping timeout)
[17:43:43] <nmatsakis> strcat: I was afraid that it would consider x to not alias **y. Certianly if you take the text at face value,
[17:43:45] *** Joins: carllerche (carllerche@moz-BF6CB667.hsd1.ca.comcast.net)
[17:43:46] <nmatsakis> strcat: it sounds like it will.
[17:44:01] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[17:44:03] <strcat> nmatsakis: well it could just bail out on non-Const
[17:44:07] <strcat> any non-Const param
[17:44:15] <strcat> hm
[17:44:22] <strcat> that's too strict though
[17:44:31] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Input/output error)
[17:45:00] <cmr> strcat: r? https://github.com/mozilla/rust/pull/6826 sorry for all the churn on this one, I'll be better next time :(
[17:45:04] <Thiez> brson: how does RUST_NEWRT work?
[17:45:12] <strcat> nmatsakis: well, does that problem exist for non-@ pointers?
[17:45:29] <strcat> it's totally a non-issue if this doesn't work for @, since it only matters for tight loops that could be vectorized
[17:45:54] *** Quits: jviereck (Adium@moz-7D34B37E.dclient.hispeed.ch) (Quit: Leaving.)
[17:46:05] <strcat> cmr: it's fine ;p
[17:46:12] <strcat> the end result will be me having colours without hacks
[17:46:23] <Thiez> when trying it with a Rust program (RUST_NEWRT=1 ./theprogram) it instantly crashes with 'rust_task.h:656: rust_task* rust_Get_current_task(): ASsertion `task != __null && "no current task"' failed.
[17:46:28] <nmatsakis> strcat: I was worried about an @mut that is hiding in a struct or something.
[17:46:41] <strcat> nmatsakis: well I will use the type contents stuff
[17:46:42] <nmatsakis> strcat: it's an issue with &const and @mut, I think that's it.
[17:46:54] <nmatsakis> strcat: yes, but type contents... well, it's probably good enough.
[17:47:02] <cmr> strcat: except in screen/tmux right now... parameterized string evaluator needs more work.
[17:47:11] <nmatsakis> strcat: yeah, if you add a bit for "possibly aliasing" or something, and use TC, *that* should be ok.
[17:47:57] *** Quits: vmx (vmx@moz-EB247BDF.pools.arcor-ip.net) (Quit: Leaving)
[17:48:26] *** Joins: vosen (vosen@moz-266BA656.icpnet.pl)
[17:49:07] <strcat> rusti: let mut x = 5; let y = @ &mut x; y
[17:49:09] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/FALa
[17:50:09] <strcat> nmatsakis: hmm, I guess you could do the same stuff with types like Rc/RcMut though
[17:50:15] <thatfreakingguy> Am I completely misunderstanding something or are traits buggy? https://gist.github.com/thatfreakingguy/5c0ddca8965b83147cb8
[17:50:46] *** Joins: MaikKlein (maik@moz-AC9459D8.dip0.t-ipconnect.de)
[17:50:54] <strcat> nmatsakis: well right not Rc/RcMut don't allow read without a borrow check but...
[17:50:56] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[17:51:01] <strcat> if they did
[17:51:04] *** Quits: dylukes (dylukes@moz-B5418F79.hsd1.pa.comcast.net) (Quit: Computer has gone to sleep.)
[17:51:20] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[17:51:55] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[17:52:09] <bstrie> someone please explain why rust refuses to compile because I haven't commented a method, despite the fact that the method is commented
[17:52:19] <bstrie> and I'm in a bad mood today, so it had better be a good reason :)
[17:52:27] <strcat> bstrie: with a doc comment?
[17:52:29] <bstrie> yes
[17:52:35] <strcat> bug? ;p
[17:52:36] *** Quits: MaikKlein (maik@moz-AC9459D8.dip0.t-ipconnect.de) (Ping timeout)
[17:52:41] <strcat> bstrie: what's the snippet?
[17:52:51] <bstrie> is it illegal to have an attribute between the comment and the item?
[17:52:57] <strcat> no
[17:53:10] <bstrie> because I have `/** foo */ \n #[inline] \n fn etc`
[17:53:47] <bstrie> strcat: https://github.com/mozilla/rust/pull/6729/files#L1R2158
[17:54:01] <strcat> nmatsakis: & is Const, right?
[17:54:14] <strcat> just &mut, @mut and &const aren't (and RcMut, Cell, etc.)
[17:54:56] <cmr> bstrie: are you sure that's the as_c_str it's complaining about?
[17:55:04] <cmr> bstrie: the one on line 2171 isn;t doc'd
[17:55:16] <bstrie> cmr: yes, it was complaining about that one too, which I fixed
[17:55:24] <cmr> ah ok
[17:55:41] <bstrie> it's the one with the method, because I can see the self in the error message
[17:55:49] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[17:56:15] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[17:56:32] <bstrie> fffffffffffffffffffffffff
[17:56:34] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:56:40] <bstrie> it was complaining about the method in the trait
[17:56:42] <bstrie> not the one in the impl
[17:56:48] <bstrie> whyyyyyyy does it require me to comment on both
[17:56:59] <bstrie> what do I even say?
[17:57:17] <cmr> #[allow(missing_doc)] is what you say ;)
[17:57:18] <strcat> copy-paste? ;p
[17:57:26] <strcat> it should have a comment on both though
[17:57:44] <bstrie> strcat: the trait itself is only because I can't make anonymous impls on str
[17:57:48] <bstrie> it's a useless trait
[17:57:54] <strcat> ah
[17:57:58] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[17:58:02] <nmatsakis> strcat: yes.
[17:58:03] <Thiez> Why require a doc on a trait impl if the trait has docs?
[17:58:21] <Thiez> seems rather redundant in most cases
[17:58:28] <nmatsakis> strcat: & is Const. But you are correct, RcMut is equally bad as @mut I guess
[17:58:31] <bstrie> Thiez: well maybe it doesn't, right now I have a doc on the impl and not on the method in the trait
[17:58:43] <bstrie> this is getting confusing
[17:58:47] *** Quits: wizeman (quassel@moz-9C343656.dyn.user.ono.com) (Client exited)
[17:58:53] <strcat> nmatsakis: not yet since I didn't add a read fn
[17:58:58] <strcat> just with_borrow and with_mut_borrow
[17:59:06] <Thiez> it makes sense for the doc to be on the trait tho :)
[17:59:09] <bstrie> I *have* comments on the *trait* and on the *method in the impl* but it is complaining that there is no comment on the *method in the trait*
[17:59:25] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:59:32] <bstrie> I will try reversing them
[17:59:40] <nmatsakis> strcat: ok.
[17:59:43] <strcat> nmatsakis: so I'm going to make the check...
[17:59:46] <nmatsakis> strcat: the equiv would be const_borrow I guess
[17:59:49] <nmatsakis> strcat: ok, r? me please
[17:59:58] <strcat> nmatsakis: k, I will
[18:00:26] <strcat> nmatsakis: I think what I'll do is say &mut parameters are noalias if no other parameter contains a closure, or is non-Const *excluding* an &mut parameter to a Const thing
[18:00:34] <strcat> that's not bad at all
[18:00:41] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[18:01:38] <strcat> so...
[18:02:14] <strcat> foo(&mut T, &T) and foo(&mut T, &mut T) can mark &mut noalias if T is Const and contains no closures
[18:03:05] <strcat> and I forget if we decided that trait objects are another hole
[18:03:51] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[18:03:51] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 144998c69 to 145028ac7: 02http://git.io/N3iJvQ
[18:03:51] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[18:03:52] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[18:03:52] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/rF_DGQ
[18:03:52] <ghrust> 13rust/06auto 1444353af 15Corey Richardson: Fix formatting for tidy
[18:03:52] <ghrust> 13rust/06auto 141533427 15bors: auto merge of #6826 : cmr/rust/terminfo, r=thestinger...
[18:03:52] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[18:04:46] *** Quits: deepdog (deepdog@moz-490E834C.client.mchsi.com) (Ping timeout)
[18:05:59] <Eridius> erickt: what's up?
[18:06:57] *** Quits: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP) (Client exited)
[18:07:51] <strcat> nmatsakis: meh maybe it's harder than I thought, I need to check if marking it noalias includes stuff contained in it
[18:08:03] <strcat> if so... might as well abandon the idea and just rely on TBAA
[18:08:25] *** Joins: jeff (jeff@4231C034.745B261B.F12515B4.IP)
[18:08:47] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[18:08:53] <strcat> because we can't even mark ~
[18:08:54] <bstrie> /r/rust is at 999 subscribers
[18:08:58] <bstrie> I'm on tenterhooks
[18:09:27] *** Quits: pyrac (pyrac@moz-285C535.w92-156.abo.wanadoo.fr) (Quit: pyrac)
[18:09:38] <thatfreakingguy> Am I completely misunderstanding something or are traits buggy? https://gist.github.com/thatfreakingguy/5c0ddca8965b83147cb8
[18:09:41] <strcat> well I guess we can mark ~ and ~[] that are Const
[18:09:43] <bstrie> ok, commenting on the method in the trait rather than the method in the impl managed to fix the doc error
[18:09:49] <bstrie> which seems weird but w/e
[18:10:03] <strcat> thatfreakingguy: need to 'use' the trait
[18:10:08] <Eridius> thatfreakingguy: `use foo:Greeter`
[18:10:15] <Eridius> err ::
[18:10:28] <cmr> bstrie: makes sense to me... the trait should be the same everyhwere it's implemented, no need to document the impl
[18:10:29] *** Quits: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP) (Quit: pcwalton)
[18:11:04] <Eridius> cmr: would be nice if if the doc builder would copy the trait's method doc to the impl if the impl doesn't have its own doc
[18:11:07] <bstrie> cmr: do impl methods without a doc comment block inherit the doc comment block of the trait method?
[18:11:09] <brson> Thiez: when RUST_NEWRT is set, then at startup the unstable::lang::start function just sets up the new scheduler instead of the C++ scheduler. it's all dynamic at runtime
[18:11:23] <Eridius> quite often I'm looking at the impl of some trait when perusing docs, because I'm, say, looking at everything relating to evc
[18:11:26] <Eridius> *vec
[18:11:32] <cmr> bstrie: no but impls can exist outside of the crate
[18:11:34] *** Joins: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP)
[18:11:34] *** ChanServ sets mode: +o pcwalton
[18:11:49] <bstrie> cmr: right, but doc comments are already written to metadata
[18:11:54] <bstrie> at least allegedly
[18:12:24] <cmr> hm, that could happen then
[18:12:40] <bstrie> allegedly I think all attributes get written to the metadata
[18:12:47] <Thiez> brson: I tried that, but it crashed immediately
[18:13:22] <bstrie> thatfreakingguy: but also traits *are* buggy
[18:13:32] <Thiez> brson: specifically, I did: RUST_NEWRT=1 ./rustray cow-nonormals.obj
[18:13:33] <bstrie> so the answer to your question was "both" :)
[18:13:47] <Eridius> everything's buggy
[18:13:51] <thatfreakingguy> Is this intended behaviour though?
[18:13:59] <Eridius> thatfreakingguy: that you need to `use` it? Yes
[18:14:45] <bstrie> Eridius: actually, it seems weird to me that you can get NumberGreeter without "use", but not Greeter
[18:15:12] <Eridius> bstrie: well you're qualifying NumberGreeter with foo::
[18:15:21] <Eridius> bstrie: seems to me there should be some way of qualifying a trait method for when the trait isn't in scope
[18:15:26] <bstrie> I feel like when you import a type from another crate, and that other crate impls a pub trait on that type, you should get all the methods
[18:15:35] <Eridius> which would also let you use two traits simultaneously that would otherwise conflict if in scope (because they define the same method)
[18:15:58] <thatfreakingguy> Also, when I replace "g.greet()" with "foo::Greeter::greet(g);" I get an ICE.
[18:16:16] <Eridius> thatfreakingguy: I wouldn't expect foo::Greeter::greet(g) to work
[18:16:30] <thatfreakingguy> Still shouldn't crash though :P
[18:16:35] <Eridius> true
[18:17:34] <Eridius> rusti: mod foo { pub trait Greeter { pub fn greet(&self); } pub struct Foo { a: int } impl Greeter for Foo { fn greet(&self) { println("hai"); } } } foo::Greeter::greet(foo::NumberGreeter { a: 3 })
[18:17:36] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/dcKM
[18:17:40] <cmr> thatfreakingguy: what bout foo::Greeter::greet(g as &Greeter)?
[18:17:46] <Eridius> rusti: mod foo { pub trait Greeter { pub fn greet(&self); } pub struct Foo { a: int } impl Greeter for Foo { fn greet(&self) { println("hai"); } } } foo::Greeter::greet(foo::Foo { a: 3 })
[18:17:48] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/RhZe
[18:18:08] *** Joins: jack (jack@2557E599.66715431.D25A875A.IP)
[18:18:16] <cmr> or some similar cast
[18:18:24] <Eridius> foo::Greeter(g).greet
[18:18:33] <thatfreakingguy> Same thing
[18:18:44] <cmr> thatfreakingguy: enable logging and file an issue :)
[18:20:52] *** Joins: Blei (philipp@moz-96D25F7A.cust.bluewin.ch)
[18:28:02] <thatfreakingguy> Alright, submitted.
[18:29:54] *** Joins: deepdog (deepdog@moz-490E834C.client.mchsi.com)
[18:30:45] <brson> Thiez: what was the backtrace of the crash?
[18:31:03] <bstrie> delicious bugs. they sustain us
[18:31:48] <thatfreakingguy> Did I miss some change? Is "None" not of type Option anymore?
[18:31:54] <thatfreakingguy> "expected `std::option::Some<sfml_window::ContextSettings>` but found `std::option::Option<<V5>>` (expected enum std::option::Some but found enum std::option::Option)"
[18:31:56] *** Joins: tjc (tjc@AF22D5E6.37321275.D5459328.IP)
[18:31:56] *** ChanServ sets mode: +o tjc
[18:32:02] <Thiez> brson: there isn't one, I just get this:
[18:32:08] <Thiez> brson: rustray: /home/thiez/sources/rust/src/rt/rust_task.h:656: rust_task* rust_get_current_task(): Assertion `task != __null && "no current task"' failed.
[18:32:53] <Thiez> then it says 'Aborted'
[18:32:55] <strcat> nmatsakis: I'm not entirely sure how valid pointers created from non-pointer data are... but that would be an issue without noalias involved and can't be done in safe code
[18:33:07] <strcat> nmatsakis: like if you went &mut a -> uint -> &mut b
[18:33:12] <strcat> it might not consider b based on a
[18:34:18] <brson> Thiez: that's because rustray is using a library function that isn't aware of the new scheduler. in gdb you can break on abort and get a backtrace to figure out what function that is
[18:35:09] <mark_edward> is there a simple way to compose functions
[18:35:26] <mark_edward> like the (.) haskell
[18:35:33] <pcwalton> brson: r? https://github.com/mozilla/rust/pull/6866
[18:36:41] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[18:36:41] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 141533427 to 145028ac7: 02http://git.io/N3iJvQ
[18:36:42] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[18:36:44] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[18:36:44] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/vYE4UQ
[18:36:44] <ghrust> 13rust/06auto 14e86ac24 15Alex Crichton: Implement unimplemented methods in ebml
[18:36:44] <ghrust> 13rust/06auto 1491a7073 15bors: auto merge of #6857 : alexcrichton/rust/ebml-fixes, r=pcwalton...
[18:36:44] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[18:37:02] *** Quits: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com) (Client exited)
[18:37:37] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[18:37:48] <tjc> mark_edward: no, Rust doesn't have a composition operatorâ€¦ in general we've tried to limit the number of infix operators and you can't define your own
[18:38:20] <Thiez> brson: thanks, but since I have no idea how to use gdb I guess I won't :p
[18:38:34] <bblum> |x| f(g(x))
[18:38:37] <Thiez> I'll try the new scheduler when it's a little better :)
[18:38:40] <mark_edward> ok. is there a function like that or something? I think boost in C++ had something like that witht he << operator
[18:39:12] <bblum> it would be easy to write a macro compose!(f,g) that expanded to |x| f(g(x))
[18:39:19] <bblum> but hard to write a typed function
[18:39:49] *** Quits: jeff (jeff@4231C034.745B261B.F12515B4.IP) (Ping timeout)
[18:40:25] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[18:40:58] *** Joins: jeff (jeff@4231C034.745B261B.F12515B4.IP)
[18:42:09] *** Joins: wizeman (quassel@moz-9C343656.dyn.user.ono.com)
[18:43:38] <bblum> haha oh that's why there are so many unnecessary unsafe block warnings
[18:43:46] <bblum> because unsafe on methods *still* doesn't work
[18:45:00] <mark_edward> maybe chain<A,B,C>( f1: &fb(a: A) -> B,f2:  &fn(b: B) -> C) -> fn(A) -> C { |x: A| { f1(f2(x)) } }
[18:45:12] <mark_edward> i'm gonna try it
[18:45:15] <strcat> bblum: some aren't methods :(
[18:45:18] <strcat> libc::chmod
[18:45:26] <strcat> I think pub use screws it up...
[18:46:13] <bblum> mark_edward: the problem is such a function would have to return a heap closure rather than a stack closure
[18:46:33] <bblum> so simply writing it out on your own stack frame saves an allocation
[18:46:34] <mark_edward> what's the problem there?
[18:47:21] *** Quits: dcoates (dcoates@moz-BE33DA21.fw1.sfo1.mozilla.net) (Connection reset by peer)
[18:47:39] <bblum> it means the argument closures would also have to be heap closures to be able to capture them
[18:47:46] <bblum> since we don't have lifetime bounds on closures yet
[18:50:47] *** Quits: jack (jack@2557E599.66715431.D25A875A.IP) (Ping timeout)
[18:55:35] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[18:56:03] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[18:56:52] <mark_edward> what baout this: https://gist.github.com/MarkJr94/5687112
[18:57:13] <mark_edward> *about
[18:58:22] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[18:59:00] *** Quits: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP) (Ping timeout)
[18:59:37] <benh> Doesn't that also mean you can only chain functions with no trait bounds on the type parameters?
[19:00:00] *** Joins: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP)
[19:00:14] <benh> or am I getting my variance backwards
[19:00:17] <mark_edward> does it?
[19:00:33] <mark_edward> i haven't done any generics in rust yet. i'lll try adn figure i tout
[19:00:39] <mark_edward> *and figure it out
[19:00:59] *** Joins: victorporof (victorporo@A323B879.C75CDC83.4A6B528C.IP)
[19:03:34] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Quit: tikue)
[19:05:23] *** Quits: eholk (eholk@moz-3D703D55.uconnect.utah.edu) (Quit: eholk)
[19:05:35] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[19:06:02] <cmr> fdr: ping
[19:08:49] *** Quits: ssbr (ssbr@A9D9D38C.B6F034AC.72A31D6.IP) (Ping timeout)
[19:10:15] *** bnicholson is now known as bnicholson|lunch
[19:11:21] <keruspe> cmr: Tried with gdb 7.6, downgrading from O3 to O2, and adding -g, still the same error
[19:12:07] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:12:36] <cmr> keruspe: Alright, I don't know what to say, sorry :(
[19:12:57] <cmr> keruspe: Someone familiar with those bits of the codebase might
[19:13:42] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:13:50] <bstrie> keruspe: is it impossible to build rust at all on your system, or is the problem only when trying to package it?
[19:15:00] <keruspe> bstrie: oh, that actually is a pretty good question, sandboxing didn't yet come to my mind
[19:16:42] <keruspe> And it seems that I bothered for nothing actually, since disabling sandboxing makes the tests pass. Will bug the sandbox man then, thank you :)
[19:17:50] <mark_edward> benh: this works https://gist.github.com/MarkJr94/5687262
[19:18:49] <bstrie> keruspe: good to hear that it isn't our fault for once :)
[19:18:50] <mark_edward> i'm actually surprised it does. Rust's type system is pretty sweet
[19:19:02] <strcat> pcwalton: I don't understand why ty_ exists ;\
[19:19:03] <bstrie> haha
[19:19:06] <bstrie> are you using the conceal file
[19:19:12] *** Quits: deepdog (deepdog@moz-490E834C.client.mchsi.com) (Ping timeout)
[19:19:15] <bstrie> mark_edward: ^
[19:19:50] <strcat> I guess those are the parsed types
[19:20:25] <mark_edward> bstrie: i think through my exhaustive study we can conclude that a basic chain function on named functions only is possible
[19:21:16] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[19:22:17] <bstrie> mark_edward: you don't think you could use anonymous functions there?
[19:23:05] <mark_edward> when i used &fn there was a complaint about them containeng borrowed pointers
[19:24:20] <bstrie> mark_edward: can you upload a version that doesn't contain the unicode characters?
[19:24:37] <bstrie> when I try taking them out I get... weirdness
[19:24:52] <mark_edward> okay
[19:24:55] <bstrie> conceal files considered harmful
[19:25:56] <mark_edward> https://gist.github.com/MarkJr94/5687331
[19:28:14] <graydon> hm
[19:28:32] <bstrie> mark_edward: behold https://gist.github.com/bstrie/5687356
[19:28:35] <graydon> why would I get "duplicate entry for 'const'" compiling something from stage0
[19:28:36] <graydon> ?
[19:28:36] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[19:28:44] <graydon> (also copy, owned, drop, etc. all lang items)
[19:29:15] <bstrie> mark_edward: note the type annotations on the closure arguments; this is actually one of the places where our type inference doesn't help, apparently
[19:29:44] <mark_edward> I see. how do you know what type a closure will be?
[19:29:49] <graydon> are we still producing a libcore?
[19:30:01] <strcat> graydon: don't think so, but you start with one
[19:30:04] <mark_edward> whether it's ~fn or &fn 
[19:30:10] <mark_edward> can it be @fn as well?
[19:30:11] <bstrie> mark_edward: you can annotate it with `-> int` if you want, otherwise it gets inferred
[19:30:17] <bstrie> mark_edward: ah I see
[19:30:40] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[19:30:40] *** ChanServ sets mode: +o dherman
[19:30:54] <bstrie> mark_edward: in the future closure types are getting an enormous overhaul that's probably too complicated to elaborate here
[19:31:50] <bstrie> mark_edward: if you're interested to know the direction that we're going in this area, read the first four articles here http://smallcultfollowing.com/babysteps/blog/categories/rust/ (but read them from bottom to top)
[19:32:06] <mark_edward> Okay, I will
[19:33:05] <bstrie> mark_edward: be warned, it's a rabbit hole of feature interaction corner cases :)
[19:33:31] <bstrie> it may not make any sense to you unless you take the time to work through all the linked articles as well
[19:33:36] <mark_edward> that sort of stuff is fun to me. I love reading this sort of stuff with C++
[19:33:45] <mark_edward> but yeah it will take some time
[19:34:12] <bstrie> the worst part is that half of the features with problematic interactions have yet to be implemented :P
[19:35:14] <mark_edward> haha
[19:35:44] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[19:35:59] <bstrie> I especially like how niko both proposes procs and proposes to replace procs within a span of three articles
[19:36:41] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[19:36:41] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/vYE4UQ
[19:36:41] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[19:36:50] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[19:37:22] <mark_edward> that was pretty cool. do youknow of any other rust focused blogs?
[19:37:31] <mark_edward> i've been looking for more reading material
[19:37:43] <bstrie> niko's is the more prolific
[19:37:58] <bstrie> pcwalton has another one: http://pcwalton.github.io/
[19:38:23] <mark_edward> thanks
[19:39:36] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[19:40:32] *** Joins: MaikKlein (maik@moz-2DD31E66.dip0.t-ipconnect.de)
[19:42:03] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:42:49] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[19:42:49] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/qkDFvA
[19:42:49] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[19:42:56] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:42:58] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[19:43:56] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Quit: Lost terminal)
[19:44:49] <cmr> r? https://github.com/mozilla/rust/pull/6826
[19:44:49] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[19:45:25] *** Quits: MaikKlein (maik@moz-2DD31E66.dip0.t-ipconnect.de) (Ping timeout)
[19:46:12] *** Quits: thatfreakingguy (Mibbit@moz-FFF7D549.pool.mediaways.net) (Quit: http://www.mibbit.com ajax IRC Client)
[19:46:31] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[19:48:25] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[19:49:16] <mark_edward> can you impl a trait for a generic type?
[19:49:41] <benh> yes
[19:50:04] <mark_edward> can you impl a trait on a function?
[19:50:14] <bstrie> mark_edward: on a function type, yes
[19:50:29] <mark_edward> can you impl a trait on a generic function type?
[19:50:32] *** Joins: MaikKlein (maik@moz-2DD31E66.dip0.t-ipconnect.de)
[19:50:34] <bstrie> yes
[19:50:42] <bstrie> at least I presume so, I've never tried it
[19:50:51] <mark_edward> hm... i'm having some trouble... probably a dumb typo somewhere
[19:50:52] *** Joins: gareth0 (gareth0@moz-91A9AAC4.dynamic.dsl.as9105.com)
[19:51:07] <mark_edward> i'll report shortly with glorious results
[19:51:11] * mark_edward salutes
[19:51:19] <cmr> rusti: trait Foo {} impl<T> Foo for ~fn(a: T) {}
[19:51:26] -rusti- ()
[19:51:33] <cmr> mark_edward: is that what you're asking?
[19:51:37] <mark_edward> yeah
[19:53:33] <cmr> rusti: trait Foo { fn foo(); } impl<T> Foo for ~fn(a: T) { fn foo() { println("hi") } } (|a: uint| {}).foo()
[19:53:35] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/ELEg
[19:54:14] <cmr> rusti: trait Foo { fn foo(); } impl<T> Foo for ~fn(a: T) { fn foo() { println("hi") } } fn bar(a: uint) {} bar.foo()
[19:54:17] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/jUHQ
[19:54:29] <cmr> hm
[19:54:31] <cmr> well
[19:54:32] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[19:54:39] <cmr> rusti: trait Foo { fn foo(); } impl<T> Foo for &fn(a: T) { fn foo() { println("hi") } } (|a: uint| {}).foo()
[19:54:50] *** Quits: heftig (heftig@moz-9DDB7EFC.dip0.t-ipconnect.de) (Ping timeout)
[19:55:06] <bstrie> mark_edward: https://gist.github.com/5687546
[19:55:13] <cmr> rusti: 5
[19:55:22] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[19:55:45] <cmr> oh methods
[19:55:49] <mark_edward> thanks bstrie!
[19:55:54] * cmr goes to the shame corner
[19:56:02] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[19:56:10] <bstrie> mark_edward: actually, you don't even need that <T> on `trait Foo<T>`
[19:56:15] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:57:20] *** Joins: heftig (heftig@moz-744DA51.dip0.t-ipconnect.de)
[19:58:44] <mark_edward> whatdoes &'self mean
[19:59:10] <Eridius> 'self is a lifetime
[19:59:36] <Eridius> specifically, it's the lifetime of fields of &self, IIRC (which is distinct from the lifetime of &self in some fashion but I'm not quite sure what)
[19:59:47] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[19:59:57] * mark_edward explodes
[20:00:08] <bstrie> mark_edward: a slightly more interesting example //gist.github.com/5687574
[20:01:02] <bstrie> mark_edward: 'self is a thing with borrowed pointers. they're awesome. see http://static.rust-lang.org/doc/tutorial-borrowed-ptr.html
[20:01:07] <mark_edward> what's the output of that
[20:01:17] <bstrie> mark_edward: prints "hello" and then "4" on another line
[20:01:30] *** bnicholson|lunch is now known as bnicholson
[20:01:49] *** Joins: tikue (tkuehn@2557E599.66715431.D25A875A.IP)
[20:03:13] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Quit: tikue)
[20:03:16] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[20:04:16] *** Joins: tikue (tkuehn@2557E599.66715431.D25A875A.IP)
[20:04:21] <bstrie> I'm actually impressed that that example worked, I was expecting an ICE when calling self()
[20:04:37] <Eridius> bstrie: I didn't realize you could have self as a param without &
[20:04:50] <caitp> what happens if a str contains a non-utf8 sequence of bytes?
[20:04:56] <bstrie> Eridius: yeah, you can have &self, self, ~self, @self, &mut self, @mut self
[20:04:59] <bstrie> all the pointer types
[20:05:06] <caitp> would the char be returned as U+FFFD
[20:05:15] <strcat> caitp: you aren't allowed
[20:05:21] <strcat> it shouldn't be possible to make one
[20:05:32] <bstrie> does rust actually guarantee that a str will only be valid utf8?
[20:05:35] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[20:05:38] <strcat> bstrie: it tries
[20:05:45] <strcat> if it doesn't, it's a bug
[20:05:49] <strcat> there are a few known ones
[20:05:52] <Eridius> bstrie: every mechanism of constructing a str, outside of str::unsafe, should validate that it's utf8
[20:05:56] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[20:05:58] <strcat> they are essentially soundness bugs
[20:06:02] <bstrie> ah I see
[20:06:08] <Eridius> although tbh it seems really weird to me that str does this
[20:06:24] <Eridius> I feel like, if I wanted to be sure I had valid chars, I'd just use a ~[char]
[20:07:01] <caitp> so, if I want a byte array that isn't necessarily utf8 encoded I probably want to use ~[u8] or something
[20:07:06] <caitp> or dvec<u8>
[20:07:07] <bstrie> yeah
[20:07:26] <Blei> (dvec is dead though)
[20:07:35] *** Quits: MaikKlein (maik@moz-2DD31E66.dip0.t-ipconnect.de) (Ping timeout)
[20:07:35] <caitp> the d stands for dead!
[20:07:41] *** Joins: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com)
[20:07:52] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[20:07:54] <bblum> hm
[20:08:20] <bblum> i'm beginning to think it should be illegal to construct dynamically-sized types at all, not just illegal to construct such values
[20:08:29] <bblum> otherwise you could be like
[20:08:42] <bblum> let x: ~[[int]] = ~[];
[20:08:49] <bblum> and then never be able to push to it
[20:10:04] <bblum> still not sure how i'm going to enforce it either way though
[20:10:23] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[20:10:23] *** ChanServ sets mode: +o dherman
[20:10:41] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[20:12:22] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:12:29] *** Quits: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP) (Quit: Ex-Chat)
[20:12:49] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:14:17] <mark_edward> cannot provide an extension implementation for a trait not defined in this crate
[20:14:21] <mark_edward> what does that mean?
[20:14:53] *** Joins: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP)
[20:15:45] *** Joins: thatfreakingguy (Mibbit@moz-58BE3330.pool.mediaways.net)
[20:15:53] *** Quits: victorporof (victorporo@A323B879.C75CDC83.4A6B528C.IP) (Quit: victorporof)
[20:17:32] *** Joins: dcoates (dcoates@moz-BE33DA21.fw1.sfo1.mozilla.net)
[20:17:43] *** Joins: jack (jack@2557E599.66715431.D25A875A.IP)
[20:17:48] <bstrie> mark_edward: when you do something like `impl Foo for Bar`, either the trait Foo and/or the type Bar have to be defined in that crate
[20:18:43] <bstrie> this is a restriction from haskell, I believe
[20:19:02] <mark_edward> it's to avoid ruby style monkeypatchung?
[20:19:11] <bstrie> sort of
[20:19:34] <mark_edward> but then how did you imple that trait on a function?
[20:19:44] <mark_edward> you didn't define that function type
[20:19:46] <bstrie> mark_edward: that was the reason that I defined the trait there
[20:19:47] <mark_edward> or did you?
[20:20:15] <mark_edward> can you alias traits?
[20:20:23] <bstrie> mark_edward: so what this means is that when you want to implement something on a built-in type like int or fn, you have to define the trait yourself
[20:20:28] <bstrie> or else build it into the compiler :)
[20:21:01] <mark_edward> can you say trait A = B?
[20:21:10] <bstrie> I don't think so
[20:21:12] <bstrie> however
[20:21:27] <bstrie> there's a thing called trait inheritance that would probably allow you to do something like that
[20:21:29] <caitp> speaking of support for multiple text encodings, does rust expose functions to know if a byte is a utf8 lead byte and if so, how long it is?
[20:21:34] <bstrie> but I don't think trait inheritance is implemented yet
[20:21:43] <caitp> it would be nice to use existing ones
[20:21:54] <strcat> bstrie: it kind of it
[20:21:56] <strcat> kind of is*
[20:22:00] <strcat> but it doesn't work very well
[20:22:24] <strcat> caitp: why?
[20:22:39] <strcat> utf-8 doesn't actually have any kind of lead byte/header in practice
[20:22:52] <strcat> utf-16 has a byte-order so it has to
[20:22:57] <caitp> i'm not talking about BOM
[20:23:05] <caitp> a lead byte indicates the length of a sequence
[20:23:15] <mark_edward> bstrie: so you couldn't say implement core::ops::Rem on floats?
[20:23:23] <bstrie> mark_edward: the reason for this restriction is because of what we called the "hashtable problem", as described here https://mail.google.com/mail/?ui=2&shva=1#search/label%3Arust-dev+hash+problem/133fd0577210763d (apologies for the 2011-era syntax)
[20:23:48] <bstrie> mark_edward: you could if you were in the stdlib, where ops::Rem is defined :)
[20:23:56] <mark_edward> you linked me to my inbox...
[20:24:00] <bstrie> hahaha
[20:24:02] <bstrie> right, right...
[20:24:09] <bstrie> let me find the actual link
[20:24:22] <caitp> a lead byte is followed by 0 or more trail bytes (bytes & 0b11000000 == 0x80) -- it's nice to have that stuff provided rather than rewriting it 50 times
[20:24:37] <caitp> and since rust uses utf8 a lot in practice, you'd expect it to have such routines or macros
[20:24:48] <caitp> just not sure if they're exported in the stdlib or not
[20:26:03] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[20:26:20] <mark_edward> do type aliases count as declaring a new type for my purpose
[20:26:21] <bstrie> mark_edward: http://thread.gmane.org/gmane.comp.lang.rust.devel/965/match=addressing+the+hashtable+problem+type+classes
[20:26:30] <bstrie> mark_edward: no, an alias is not a new type
[20:26:49] <bstrie> however, you can do `struct Foo(int)` to make an actual new type (out of an int, in this case)
[20:26:57] <mark_edward> hm...
[20:27:20] <mark_edward> can you define implicit conversion methods?
[20:27:45] *** Joins: jensnockert (jensnocker@moz-D12E3C1F.mobileonline.telia.com)
[20:27:59] <bstrie> mark_edward: on which types?
[20:28:02] <bstrie> and for which operations?
[20:28:26] <mark_edward> say a custom type to a builtin, and for the purposes of passing it as an argument
[20:28:32] *** Quits: ysuzuki (ysuzuki@moz-60FA9D06.net119083145.t-com.ne.jp) (Client exited)
[20:28:32] <mark_edward> say i wanted to pass
[20:28:43] <strcat> caitp: well you could look in the str module
[20:28:54] <mark_edward> MyComplex to add_one(x: float)
[20:29:15] <mark_edward> is there somefunction i could define to let
[20:29:29] <keruspe> Ok, now compiling with --enable-local-rust, I hit: "rustc: /var/tmp/paludis/build/dev-lang-rust-0.6/work/rust-0.6/src/llvm/lib/VMCore/Instructions.cpp:280: void llvm::CallInst::init(llvm::Value*, llvm::ArrayRef<llvm::Value*>, const llvm::Twine&): Assertion `(i >= FTy->getNumParams() || FTy->getParamType(i) == Args[i]->getType()) && "Calling a function with a bad signature!"' failed.
[20:29:39] <mark_edward> let x = MyComplex::new(); let x_p1 = add_one(x); 
[20:29:39] <sp3d> caitp: pub fn is_char_boundary looks suspect
[20:29:40] <mark_edward> work
[20:29:55] <sp3d> "Returns false if the index points into the middle of a multi-byte character sequence."
[20:30:21] <bstrie> mark_edward: not without changing the definition of add_one
[20:30:22] *** Joins: bytbox (s@moz-2E27684C.student.umd.edu)
[20:30:38] <strcat> sp3d: strings are already valid utf-8 though so it's not really what he wants
[20:30:46] <strcat> he'd need something for [u8]
[20:30:53] <strcat> or u8
[20:30:55] <sp3d> ah, indeed
[20:31:00] <bblum> Does ty_self get substituted out for the actual type it refers to before type-check time?
[20:31:02] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[20:31:22] <mark_edward> bstrie: if i said struct Foo(int);
[20:31:34] <bblum> (I ask because of the cx.sess.bug("non concrete type in type_is_pod") in type_is_pod)
[20:31:36] <mark_edward> could i say let x:Foo = 1
[20:31:49] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[20:32:05] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[20:32:11] <caitp> well it's simple enough to write the function, if rust doesn't provide it in core then I guess there's no choice
[20:32:17] <caitp> no big deal :>
[20:33:21] <bstrie> mark_edward: no, I think you have to say `let x = Foo(1);`
[20:34:03] <mark_edward> then could is say `*x += 1`
[20:34:11] <mark_edward> (if x is in a mutable box)
[20:34:42] *** Joins: eholk (eholk@moz-3D703D55.uconnect.utah.edu)
[20:37:39] <bstrie> mark_edward: https://gist.github.com/5687799 for an example of passing different types to a single function, by using bounds on the generic parameter
[20:37:40] *** Joins: pyrac (pyrac@moz-285C535.w92-156.abo.wanadoo.fr)
[20:38:07] *** Joins: brendan (brendaneic@moz-EAC95265.hfc.comcastbusiness.net)
[20:38:45] <mark_edward> thanks
[20:39:02] *** Quits: Blei (philipp@moz-96D25F7A.cust.bluewin.ch) (Quit: WeeChat 0.4.1)
[20:39:21] <thatfreakingguy> Can I force one borrowed pointer that is an argument to live at least as long as another argument (that is also borrowed pointer)?
[20:39:42] <bblum> use the same lifetime variable for each one
[20:39:44] <bstrie> thatfreakingguy: if you give them the same lifetime?
[20:40:03] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[20:40:03] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14dca6765 to 1491a7073: 02http://git.io/N3iJvQ
[20:40:03] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[20:40:04] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[20:40:04] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/h2ZRPA
[20:40:04] <ghrust> 13rust/06auto 148d78282 15Daniel Micay: bool: rm functions duplication methods
[20:40:04] <ghrust> 13rust/06auto 1408333de 15bors: auto merge of #6864 : thestinger/rust/bool, r=pcwalton
[20:40:05] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[20:40:06] <bstrie> x: &'foo T, y: &'foo T
[20:40:20] <thatfreakingguy> Right now I have "fn set_texture<'r>(&'r mut self, texture: &'r Texture)"
[20:40:41] <bstrie> thatfreakingguy: then 'r should be the intersection of the lifetimes of both parameters
[20:40:53] <thatfreakingguy> But I can still pass an Texture that dies before the one by referenced by self dies
[20:41:33] <thatfreakingguy> Which sadly makes the programm try to draw an deleted image
[20:41:39] <mark_edward> bstrie: if you say `struct Foo(int);` how can you operate on the int inside of Foo
[20:42:02] <bstrie> mark_edward: ...that's a good question :)
[20:42:10] <bblum> tjc: pcwalton: shouldn't the "vec::any" calls in type_is_pod for ty_struct be vec::all?
[20:42:20] <pcwalton> yes, probably
[20:42:43] <bblum> i will new-issue it
[20:42:45] <thatfreakingguy> mark_edward: Use "*" on an Foo variable to get it's int.
[20:42:57] <bstrie> oh right, you have to dereference it
[20:42:59] <bstrie> that's a weird thing
[20:43:05] <mark_edward> oh ok.
[20:43:17] <tjc> bblum: yup, my mistake, it looks like
[20:43:58] *** Joins: jviereck (Adium@moz-7B4B0A42.dclient.hispeed.ch)
[20:44:44] <bblum> tjc: #6868
[20:48:01] *** Quits: brendan (brendaneic@moz-EAC95265.hfc.comcastbusiness.net) (Quit: brendan)
[20:48:30] *** Quits: cdidd (cdidd@moz-B3EDB33C.broadband.corbina.ru) (Ping timeout)
[20:48:56] <mark_edward> thanks 
[20:49:13] *** Quits: jensnockert (jensnocker@moz-D12E3C1F.mobileonline.telia.com) (Input/output error)
[20:49:35] *** Joins: jensnockert (jensnocker@moz-D12E3C1F.mobileonline.telia.com)
[20:50:15] <bstrie> graydon: if I find issues tagged with "nominated" that are assigned a milestone, should I remove the tag?
[20:50:30] *** Quits: cornelius (Mibbit@moz-FD9A8D70.tvc-ip.com) (Quit: http://www.mibbit.com ajax IRC Client)
[20:51:20] *** Quits: jensnockert (jensnocker@moz-D12E3C1F.mobileonline.telia.com) (Ping timeout)
[20:51:35] <bstrie> graydon: also https://github.com/blog/1517-introducing-octokit , which might interest you for bors perhaps
[20:51:59] <bstrie> or, I suppose, if you were interested in rewriting bors in ruby...
[20:52:34] *** Joins: cdidd (cdidd@moz-3B84D95A.broadband.corbina.ru)
[20:53:02] <bstrie> for some reason I thought it was a whole suite of libraries for lots of languages
[20:53:26] <bstrie> should have scrolled down
[20:53:35] <strcat> pcwalton: how do I get a ty from an ast::arg?
[20:53:48] <pcwalton> strcat: if you're post typeck use node_id_type
[20:53:52] <strcat> looking up arg.id in the crate's type context fails
[20:53:55] <pcwalton> oh
[20:54:03] <strcat> it's post typeck
[20:54:03] <pcwalton> look up the id of the fn then
[20:54:12] <pcwalton> and figure out which arg it is
[20:54:23] <strcat> pcwalton: well I know the arg index and I have the ty of the fn
[20:54:30] <pcwalton> you can deconstruct it there
[20:54:34] <pcwalton> there might be a helper, ty_fn_args or whatever
[20:54:38] <strcat> ah
[20:55:36] *** Quits: cdidd (cdidd@moz-3B84D95A.broadband.corbina.ru) (Ping timeout)
[20:56:21] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[20:56:21] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[20:56:54] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:57:02] *** Quits: lmandel (lmandel@F2D29657.F60B0462.67AC9B1.IP) (Quit: lmandel)
[20:58:34] <bblum> pcwalton: where in the compiler are types (and kinds?) figured out for argument variables and stack variables?
[20:58:48] <pcwalton> for kinds, kind.rs
[20:58:55] <pcwalton> for types, typeck/check/mod.rs I think
[20:59:07] <bblum> hm ok thanks
[20:59:16] <thatfreakingguy> What happens to an owned pointer in an struct when you use "#[unsafe_destructor]" on the Drop trait?
[21:00:31] <strcat> thatfreakingguy: you probably don't want unsafe_destructor
[21:00:49] <strcat> thatfreakingguy: the owned pointer is destroyed after the custom destructor runs
[21:01:16] <strcat> but... you don't need unsafe_destructor to add destructors to types where it's known to be safe
[21:01:31] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[21:01:50] <mark_edward> can you copy types of ~fn
[21:01:58] <mark_edward> or clone
[21:02:06] <strcat> pcwalton: thanks, that works :)
[21:02:45] <thatfreakingguy> I have a struct that contains an owned and a raw pointer. I need a destructor to safely destroy the raw pointer. The compiler complains: "cannot implement a destructor on a struct that is not Owned"
[21:02:46] <nmatsakis> bblum: what does that question mean?
[21:03:10] * nmatsakis readnomly reads backscroll.
[21:03:13] <nmatsakis> *randomly
[21:03:28] <nmatsakis> bblum: because the full answer is a bit involved :)
[21:04:45] <bblum> ok, i think i have an idea for an answer to that question thoughj
[21:05:10] <pcwalton> thatfreakingguy: you can use #[unsafe_destructor] to work around it but be wary of the safety ramifications
[21:05:12] <bblum> i'm also wondering why the ty_self case in type_is_pod is just a cx.sess.bug()
[21:05:19] <bblum> seems fishy
[21:05:19] <pcwalton> if you're destroying a raw pointer you're OK though
[21:05:23] <pcwalton> you're already unsafe
[21:06:42] *** Joins: aatch (aatch@moz-2BB0AC01.cable.telstraclear.net)
[21:07:38] *** Quits: tjc (tjc@AF22D5E6.37321275.D5459328.IP) (Quit: Places to go, people to annoy)
[21:08:49] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[21:09:52] <bblum> nmatsakis: get a chance to read the proposal document?
[21:11:02] <nmatsakis> bblum: yes, I read it. I didn't write up a response yet, though I took some notes.
[21:11:43] <nmatsakis> bblum: let me copy those notes into an e-mail or something
[21:12:09] <bblum> ok, no hurry
[21:13:43] <aatch> Coco-Pops and Compilers. Great way to start my long weekend
[21:15:37] *** Joins: brendan (brendaneic@moz-EAC95265.hfc.comcastbusiness.net)
[21:16:05] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Quit: No Ping reply in 180 seconds.)
[21:18:09] *** Quits: EXetoC (ex@moz-2DBEB1E4.customer.t3.se) (Quit: WeeChat 0.4.1)
[21:18:45] *** Joins: EXetoC (ex@moz-C741B177.customer.t3.se)
[21:19:05] <mark_edward> why can't you clone or copy ~fn types
[21:19:26] <bblum> mark_edward: because of https://github.com/mozilla/rust/issues/2828
[21:19:47] *** Quits: eholk (eholk@moz-3D703D55.uconnect.utah.edu) (Quit: eholk)
[21:19:56] <bblum> hopefully someday you'll be able to write ~fn:Clone
[21:21:36] *** Joins: adu (ajr@moz-96FE9B84.washdc.fios.verizon.net)
[21:22:09] *** Quits: adu (ajr@moz-96FE9B84.washdc.fios.verizon.net) (Quit: adu)
[21:22:14] <mark_edward> what;s an extern fn
[21:22:41] <strcat> function pointer without an environment (captured state)
[21:23:30] <mark_edward> what's the difference between that and a ~fn
[21:23:33] *** Quits: brendan (brendaneic@moz-EAC95265.hfc.comcastbusiness.net) (Quit: brendan)
[21:23:52] <aatch> strcat, thanks for doing that optimization stuff.
[21:24:16] <strcat> aatch: I only got the one getting rid of bbvectorize in
[21:24:19] <strcat> :(
[21:24:24] <strcat> the other change refused to land
[21:24:29] <strcat> screwed up resolve
[21:24:50] <aatch> I have no idea how that happened, but I think you're right that SROA did it.
[21:24:55] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[21:25:05] <strcat> aatch: I tried removing the sroa pass though and it still didn't land
[21:25:08] <strcat> so maybe the AA one?
[21:25:10] <bblum> mark_edward: ~fn is a pair of an extern function and a heap pointer to an environment packet
[21:25:24] *** Quits: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP) (Quit: Leaving.)
[21:25:37] <mark_edward> so it's environment is self contained?
[21:25:45] <aatch> strcat, the scev-aa?
[21:25:51] <strcat> aatch: yes
[21:25:55] <aatch> hmm, maybe...
[21:26:13] <bblum> mark_edward: in the case of ~fn, yes; in the case of &fn, no
[21:26:25] <bblum> this may change, depending what becomes of my proposal for closure reform
[21:26:57] <mark_edward> so why are extern fn and ~fn different types? they should both be equally portable since they'r enot tied to an environment
[21:27:01] *** Quits: reyre_ (reyre@F2D29657.F60B0462.67AC9B1.IP) (Client exited)
[21:27:18] <bblum> what sort of portability do you mean :P
[21:27:23] *** Quits: pyrac (pyrac@moz-285C535.w92-156.abo.wanadoo.fr) (Quit: pyrac)
[21:27:32] <mark_edward> like. they should both be clonable/copyable
[21:27:43] <aatch> I'm not really up for the idea of doing full builds until things work again though. I'm at home and my home computer isn't as beefy as my work one
[21:27:46] <bblum> what if the ~fn had a noncopyable inside its environment?
[21:28:01] <aatch> so building rustc takes like an hour
[21:28:03] <mark_edward> hm...
[21:28:10] <mark_edward> i see the problem
[21:28:13] *** Quits: bytbox (s@moz-2E27684C.student.umd.edu) (Ping timeout)
[21:29:45] *** Joins: eholk (eholk@moz-3D703D55.uconnect.utah.edu)
[21:29:50] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[21:30:04] <bjz> nmatsakis: I'm writing my own index/col functions now
[21:30:17] <bjz> nmatsakis: it's actually not that bad
[21:30:27] <bjz> (using methods)
[21:30:48] <strcat> // Contains a closure, `&const`, `@mut` or a type explicitly marked as either mutable or non-owned
[21:30:49] <strcat> static TC_ALIAS_MUT_RPTR: TypeContents =   TypeContents{bits: 0b0001_0000_0000_0000};
[21:30:51] <bjz> I might shorten the names to `i` and `c` thatough :D
[21:30:52] <strcat> nmatsakis: ^ hopefully that's enough
[21:31:09] <pcwalton> nmatsakis: for someone who disliked "pub impl" you sure did use it everywhere ;)
[21:31:11] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[21:31:15] <strcat> so it doesn't count other &mut pointers but it counts just about everything else
[21:32:09] *** Joins: wgodwfeh (Mibbit@moz-50CDC61B.org.all.de)
[21:32:29] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[21:33:10] <bblum> is "let x = 5" translated into both a stmt_decl and an expr_assign? or what?
[21:33:21] <nmatsakis> bjz: great.
[21:33:27] <nmatsakis> bjz: I'd like to see what you come up with.
[21:33:29] <nmatsakis> bblum: no.
[21:33:32] <nmatsakis> bblum: just a stmt_decl
[21:33:57] <pcwalton>  72 files changed, 1402 insertions(+), 1319 deletions(-)
[21:33:59] <nmatsakis> pcwalton: yeah I did :)
[21:34:01] <pcwalton> with de-"pub impl"
[21:34:04] <pcwalton> not done yet
[21:34:05] <bblum> oh, i see, decl_local
[21:35:02] <nmatsakis> strcat: sounds...about right. 
[21:36:31] <bjz> nmatsakis: one issue is:
[21:36:50] <strcat> nmatsakis: could also do it by adding TC_CLOSURE, TC_MUT_MANAGED, TC_CONST_RPTR and splitting out the explicit part of TC_MUTABLE but... that's probably overcomplicating things
[21:37:01] *** Quits: Excureo (c@moz-DE8C33F1.static.yakm.wa.charter.com) (Input/output error)
[21:37:02] *** Quits: gareth0 (gareth0@moz-91A9AAC4.dynamic.dsl.as9105.com) (Connection reset by peer)
[21:37:06] <strcat> or not? might be easier to understand the code from that
[21:37:21] *** Joins: brendan (brendaneic@moz-EAC95265.hfc.comcastbusiness.net)
[21:37:30] <nmatsakis> strcat: yeah, I don't know, my original idea with that code was to have the bits be very fine-grained,
[21:37:36] <nmatsakis> strcat: and then collect them at a later point,
[21:37:45] <nmatsakis> strcat: but they became very fine-grained, and I'm not sure that was right anymore.
[21:37:46] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Bye!)
[21:37:52] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[21:38:00] <bjz> nmatsakis: src/vec.rs:857:38: 857:43 error: cannot borrow `*self` as mutable more than once at at a time
[21:38:01] <bjz> src/vec.rs:857         util::swap(self.index_mut(a), self.index_mut(b));
[21:38:03] <nmatsakis> strcat: I've thought about trying to reorganize the other way, such that the bits are more "thematic"
[21:38:18] <nmatsakis> bjz: you will need a way to get 2 indices at once, yes.
[21:38:25] <nmatsakis> bjz: or perhaps just to swap two incides.
[21:38:41] <bjz> nmatsakis: I use a tmp
[21:38:48] <bjz> nmatsakis: atm
[21:39:03] *** Quits: jeff (jeff@4231C034.745B261B.F12515B4.IP) (Quit: jeff)
[21:39:12] <nmatsakis> bjz: or that. :)
[21:39:24] <bjz> so there will be no way around that?
[21:39:47] *** Joins: deepdog (deepdog@moz-490E834C.client.mchsi.com)
[21:39:49] <nmatsakis> bjz: no, not really, the type system would have to know that a != b
[21:40:01] <nmatsakis> bjz: that's why I leave it to you to add an unsafe method with an assertion or something :)
[21:40:11] <strcat> nmatsakis: hm
[21:40:17] <strcat> nmatsakis: it actually runs a closure_contents thing
[21:40:18] <nmatsakis> bjz: not to mention, index_mut could have a bug,
[21:40:19] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[21:40:25] <nmatsakis> bjz: and just return the same pointer all the time,
[21:40:31] <nmatsakis> bjz: for all the type system know.
[21:40:41] <bjz> nmatsakis: yeah that makes sense
[21:40:58] <nmatsakis> strcat: you mean TypeContents? yes. so you probably don't need that case.
[21:41:03] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[21:41:05] <nmatsakis> strcat: true.
[21:41:22] <mark_edward> can closure ever be an extern fn?
[21:42:08] <nmatsakis> mark_edward: extern fn is coercable to a closure type,
[21:42:10] <strcat> nmatsakis: it looks wrong though
[21:42:14] <nmatsakis> mark_edward: the environment is just NULL.
[21:42:17] <nmatsakis> strcat: well that maybe :)
[21:42:32] <strcat> nmatsakis: it seems to check if the contents are borrowed, but it doesn't bubble up MANAGED, etc.
[21:42:35] <bjz> Luqman: beep
[21:42:44] <mark_edward> can a closure be coerced to an extern fn?
[21:42:55] <nmatsakis> bblum: so, I've got these comments, but I'm not sure what to do with 'em. Mostly some minor corrections, I think your menu of choices is basically correct.
[21:43:01] <nmatsakis> bblum: I can send you an e-mail, or maybe add them into the wiki
[21:43:14] <aatch> nmatsakis, strcat, Question: would a type-based alias analysis make sense to say that two pointers to different types can't ever alias?
[21:43:35] <bblum> nmatsakis: if they are amenable to just editing the proposal, i can look at the diff
[21:43:53] <bblum> if there are deeper concerns, email
[21:43:56] <strcat> aatch: I don't know
[21:44:01] <strcat> aatch: C has type punning rules but that's C ;p
[21:44:16] *** Joins: Excureo (c@moz-DE8C33F1.static.yakm.wa.charter.com)
[21:44:18] <aatch> I mean, I know that the presence of cast::transmute can break it, but the unsafety of it seems like we could get away with it.
[21:44:27] <strcat> safe code can't do it... unsafe code can and probably does
[21:44:46] <Luqman> bjz: boop
[21:44:53] <strcat> aatch: that's what TBAA actually does in C
[21:45:04] *** Quits: jdm (jdm@F2D29657.F60B0462.67AC9B1.IP) (Quit: Lost terminal)
[21:45:20] <strcat> it has weird rules
[21:45:21] <mark_edward> nmatsakis: can a closure be coerced to an extern fn?
[21:45:33] <nmatsakis> mark_edward: no.
[21:45:37] <mark_edward> ok thanks
[21:45:57] <strcat> nmatsakis: meh, on the other hand I feel like just adding TC_CLOSURE and making it really conservative at first
[21:46:14] <nmatsakis> strcat: why do you think the code is wrong?
[21:46:20] <aatch> One advantage we have over C is that it's much, much harder to get a pointer to the member of an array
[21:46:36] <nmatsakis> strcat: let me look at it, one sec
[21:46:39] <strcat> nmatsakis: it adds the pointer sigil, onceness and borrowed_contents
[21:46:46] <cmr> r? https://github.com/mozilla/rust/pull/6826
[21:46:56] <aatch> I guess for everything other than *-ptrs we can make some pretty strong assertions.
[21:46:59] <strcat> nmatsakis: closure_contents is the function I think is wrong btw
[21:47:17] <bjz> Luqman: I'm redoing lmath to use an index method instead of the traits
[21:47:20] <strcat> nmatsakis: for example, what if a ~fn captures @mut
[21:47:27] <strcat> it doesn't seem like it bubbles that up atm
[21:47:33] <strcat> I don't know if it should
[21:47:37] <bjz> Luqman: so it returns refernces
[21:47:46] <bjz> Luqman: ie, no copies!
[21:47:48] <nmatsakis> strcat: that can't happen right now
[21:47:52] <nmatsakis> strcat: ~fn requires all things to be Owned
[21:47:56] <aatch> It might require changing code that is currently using &-ptrs to have it use *-ptrs
[21:48:09] <nmatsakis> strcat: however I agree the code is not written in the most forward-looking style
[21:48:09] <Luqman> bjz: ah, cool! though i guess that means giving up the index syntax sugar
[21:48:18] <nmatsakis> strcat: it should be starting with "anything" and then removing the things it knows are impossible,
[21:48:21] <nmatsakis> strcat: like we do with type parameters
[21:48:35] <strcat> nmatsakis: yeah I'm kind of worried about getting this wrong
[21:48:37] <aatch> (in the appropriate places)
[21:48:38] <strcat> because it's hard to test for
[21:48:53] <bjz> Luqman: would you be ok with maybe using i, c and r for the method names?
[21:48:53] <strcat> so I would rather start with a really conservative noalias annotation
[21:49:09] <strcat> we really need IR testing :(
[21:49:52] <Luqman> bjz: what're c and r?
[21:50:01] <bjz> Luqman: col row
[21:50:11] <nmatsakis> strcat: did you decide to use fine-grained bits?
[21:50:17] <strcat> nmatsakis: I think I will
[21:51:39] <graydon> grr why is stage0 barfing looking for libcore
[21:51:42] <nmatsakis> strcat: I am not sure that TypeContents is giving you what you want.
[21:51:51] <nmatsakis> strcat: I think you may have to add a special bit
[21:51:59] *** Quits: brendan (brendaneic@moz-EAC95265.hfc.comcastbusiness.net) (Quit: brendan)
[21:52:01] <bjz> Luqman: is that ok? :P
[21:52:07] <nmatsakis> strcat: oh, wait, maybe i'm wrong, one sec
[21:52:14] <strcat> nmatsakis: well it's currently missing what I need
[21:52:25] <thatfreakingguy> Is there a way to fake lifetimes? I am creating a struct with a raw pointer (again) and want to return a borrowed pointer to it. Problem is, the actual struct has nowhere to live.
[21:52:56] <thatfreakingguy> Can I use some manual pointer magic to make this work?
[21:53:20] <strcat> thatfreakingguy: in std::cast there are things for adding lifetimes to ptrs
[21:53:32] <strcat> copy_lifetime, etc.
[21:53:43] <strcat> easy to get wrong
[21:54:03] <nmatsakis> strcat: well, it's not only that,
[21:54:10] <nmatsakis> strcat: but for example &@T doesn't contain the MANAGED bit.
[21:54:16] <nmatsakis> strcat: since it does not itself own a managed value
[21:54:19] <strcat> nmatsakis: ah, didn't realize that
[21:54:35] <nmatsakis> strcat: this is partly why I think the current design is somewhat flawed
[21:54:48] <nmatsakis> strcat: because sometimes you want managed to "propagate"
[21:54:49] *** Quits: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com) (Client exited)
[21:54:51] <nmatsakis> strcat: and sometimes you don't
[21:55:00] <nmatsakis> strcat: basically sometimes you want reachable and sometimes you want owned
[21:55:12] <nmatsakis> strcat: maybe we should be computing those as two separate type sets,
[21:55:14] *** Joins: strcat1 (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[21:55:20] <nmatsakis> strcat: or else having "higher-level" bits 
[21:55:29] <nmatsakis> strcat: I'm inclined to say higher-level is easier to understand
[21:55:34] <nmatsakis> strcat: but I'm not sure.
[21:56:02] <strcat1> nmatsakis: I'm starting to think it would be easier to just start on a TBAA pass than figuring out this ;p
[21:56:02] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[21:56:02] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[21:56:04] *** strcat1 is now known as strcat
[21:56:28] <nmatsakis> strcat: that is quite plausible. :) the typecontents stuff is not designed for this kind of conservative optimization, but is more concerned with language semantics...
[21:56:35] <Luqman> bjz: yea i'm fine with that. i guess you could also keep the index one except they'd return copies
[21:56:54] <pcwalton> over 4,000 lines now
[21:57:04] <cmr> pcwalton: lines of what?
[21:57:18] <pcwalton> my patch to remove "pub impl" everywhere is over 4,000 lines
[21:57:20] <pcwalton> and isn't done
[21:57:40] <graydon> pcwalton: can I get a hand for a moment?
[21:57:42] <pcwalton> sure
[21:57:45] <graydon> I need to compile something with stage0
[21:57:49] <bblum> is kind.rs post-typecheck?
[21:57:55] <graydon> during the great renaming...
[21:57:56] <graydon> something changed
[21:58:09] <graydon> and now stage0/bin/rustc myfile.rs gets upset that there's no crate 'core'
[21:58:14] <graydon> which is correct!
[21:58:28] <graydon> what do I need to tell it?
[21:58:29] <pcwalton> did it use some kind of macro that expects core to be at core?
[21:58:38] <pcwalton> oh, I see
[21:58:42] <graydon> oh, maybe? um
[21:58:43] *** Quits: jviereck (Adium@moz-7B4B0A42.dclient.hispeed.ch) (Quit: Leaving.)
[21:58:48] *** Quits: lkuper_ (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Ping timeout)
[21:58:51] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Textual IRC Client: www.textualapp.com)
[21:58:54] <pcwalton> maybe #[no_std]; or #[no_core]; as appropriate and import it manually
[21:59:16] <nmatsakis> bblum: didn't have time to edit them in more carefully https://github.com/mozilla/rust/wiki/Proposal-for-closure-reform#nikos-comments
[21:59:32] <graydon> hey hey
[21:59:37] *** Joins: igl (igl@moz-8E23CEF5.adsl.alicedsl.de)
[21:59:41] <graydon> #[no_core]; extern mod std; does it
[21:59:42] <graydon> thanks!
[21:59:46] <pcwalton> no problem :)
[21:59:49] <nmatsakis> bblum: yes, kind.rs runs after type check.
[21:59:54] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[22:01:21] <cmr> cmake has to be the least documented, most useful software I use..
[22:02:11] <bblum> nmatsakis: this means that, e.g., a local.ty field will be filled in, right?
[22:02:52] <bblum> (also locals are also used for global variable declarations, right?)
[22:03:20] <aatch> strcat, for TBAA, the first thing to do is to start emitting the appropriate metadata.
[22:03:33] *** Quits: caitp (caitp@moz-9FE842F.cpe.net.cable.rogers.com) (Quit: caitp)
[22:03:35] <strcat> aatch: yep but we don't need much metadata to start
[22:03:53] <aatch> But I'm unsure as to whether we should just use LLVM's existing TBAA or have our own.
[22:04:09] <strcat> aatch: there isn't existing TBAA is there?
[22:04:25] <strcat> it just calls into some language-specific thing
[22:04:48] <aatch> strcat, kinda, is designed for C/C++, but the format is pretty conservative.
[22:05:04] <aatch> it's actually just names, sizes and constantcy
[22:05:23] <aatch> the analysis doesn't care about what the names actually are
[22:05:26] <strcat> aatch: but isn't that then just passed to the function it calls to query?
[22:05:53] <strcat> I don't think tbaa attributes *do* anything on their own
[22:05:56] <aatch> It's more like TBAA looks for the named metadata nodes during the analysis
[22:06:11] <aatch> strcat, so yes
[22:08:25] <aatch> but the existing analysis pass does do something, specifically, it uses the information in the metadata to decided whether is aliases or not
[22:08:40] *** Quits: thatfreakingguy (Mibbit@moz-58BE3330.pool.mediaways.net) (Quit: http://www.mibbit.com ajax IRC Client)
[22:09:02] <strcat> aatch: how?
[22:09:18] <strcat> I thought it just passed that metadata along with the pointers
[22:09:31] <strcat> so you can respond NoAlias, MustAlias, MayAlias or PartialAlias
[22:09:46] <strcat> I don't see how it would do any analysis by itself
[22:09:48] *** Joins: brendan (brendaneic@moz-EAC95265.hfc.comcastbusiness.net)
[22:09:49] <aatch> strcat, yes, into the specific pass, but there isn't any machinery to hook into like you thought.
[22:09:55] *** Joins: terra (Adium@moz-D09C25DF.pool.mediaways.net)
[22:10:12] <aatch> other than subclassing the AliasAnalysis pass
[22:10:14] <EXetoC> I'm yet again puzzled by the inability to reference certain symbols, like "impl Real for f64 { fn two_pi() ... }" for instance
[22:10:41] <aatch> but TBAA is a specific pass in LLVM
[22:11:28] *** Joins: caitp (caitp@moz-9FE842F.cpe.net.cable.rogers.com)
[22:11:44] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[22:11:52] <aatch> Also, analysises chain, so anything other than NoAlias is actually punted to the next analysis until it hits the no-aa pass (which always returns MayAlias)
[22:12:11] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[22:12:56] <strcat> so we need to actually make a pass? ;\
[22:13:21] <aatch> strcat, yep, but it's not that hard. it just has to be in C++
[22:13:31] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:14:02] <aatch> The other option is that we just use LLVM's TBAA, but that means using their format.
[22:14:05] *** Quits: seth (seth@moz-D840E602.dsl.static.sonic.net) (Input/output error)
[22:14:08] <pcwalton> ok, 5000 lines, libstd/libextra/libsyntax/librustc are done
[22:14:22] * aatch hugs pcwalton
[22:14:28] <graydon> pcwalton: what are you doing today?
[22:14:36] <pcwalton> graydon: removal of "pub impl"
[22:14:40] <pcwalton> it's used *everywhere*
[22:14:42] <graydon> I see
[22:14:47] <bjz> pcwalton: Nice!
[22:14:55] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
[22:14:58] <bjz> pcwalton: that's gonna be super great :)
[22:14:58] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[22:15:10] <bjz> pcwalton: pub impl was always confusing
[22:15:36] <bjz> pcwalton: ie, when it was forbidden for traits especially
[22:16:00] <bjz> pcwalton: seemed very assymetric
[22:16:21] <EXetoC> are there any bugs related to referencing modules named after some built in type?
[22:17:11] <EXetoC> I was struggling with something similar before. might've been f32 at that time. there's a lot going on in those modules, so maybe that's why
[22:17:59] <strcat> aatch: their format can't do what we want though, afaik
[22:18:10] <strcat> aatch: for example mark ~ pointers as non-aliasing
[22:18:36] <aatch> strcat, I know, that's why I proposed using our own format
[22:19:41] <aatch> that would have some sort of type identifier, mutability, pointer type, maybe a few other things
[22:20:27] <aatch> unfortunately, it means going through every location a Load, Store or GEP is made and adding the metadata
[22:20:41] <aatch> (and maybe some other places, I haven't looked too hard yet)
[22:20:42] *** Joins: a_m0d (a_m0d@moz-9F925EFA.hm.shawcable.net)
[22:20:59] <bblum> um... how do i turn a ast::ty_ or a ast::Ty into a ty::t ?
[22:21:33] <bjz> rusti: pub mod lib { pub type MyInt = int; pub mod MyInt { pub fn new(x: ::MyInt) -> ::MyInt { x } } } lib::MyInt::new(1)
[22:21:35] <pcwalton> bblum: ast_ty_to_ty but you probably don't want to do that outside of trans
[22:21:36] <pcwalton> err
[22:21:38] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/fgEh
[22:21:39] <pcwalton> outside of typeck
[22:22:20] <bjz> rusti: pub mod lib { pub type MyInt = int; pub mod MyInt { use super::MyInt; pub fn new(x: MyInt) -> MyInt { x } } } lib::MyInt::new(1)
[22:22:22] -rusti- 1
[22:22:24] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: night)
[22:22:58] <EXetoC> bjz: you've done a lot of numeric stuff. could you try to reference std::num::f64::f64::two_pi() for example?
[22:23:02] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[22:23:10] <bjz> EXetoC: no
[22:23:11] <EXetoC> or maybe f64 doesn't have to be there twice, but I've tried a gazillion variations :-)
[22:23:32] <bjz> EXetoC: that's a change pcwalton was talking about
[22:23:40] <bjz> you wouldn't import
[22:23:50] <EXetoC> oh
[22:23:50] <bjz> you'd just do f64::pi()
[22:24:04] <bjz> atm you have to do Real::pi::<f64>()
[22:24:26] <bjz> EXetoC: hence those tests befpre
[22:24:29] <bjz> *before
[22:24:39] <bjz> I'm trying to see if you can fudge it
[22:24:41] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[22:24:41] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1408333de to 1491a7073: 02http://git.io/N3iJvQ
[22:24:41] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[22:24:41] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[22:24:42] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/ec_aKQ
[22:24:42] <ghrust> 13rust/06auto 1429aba80 15Daniel Micay: mv the raw pointer {swap,replace}_ptr to std::ptr
[22:24:42] <ghrust> 13rust/06auto 14042618d 15Daniel Micay: ptr: replace unnecessary unsafe code
[22:24:42] <ghrust> 13rust/06auto 14ed93cc1 15Daniel Micay: fix tutorial lint warnings
[22:24:43] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[22:25:11] <bjz> rusti: pub mod lib { pub struct Num<T>(T); pub type MyInt = Num<int>; pub mod MyInt { use super::MyInt; pub fn new(x: MyInt) -> MyInt { x } } } lib::MyInt::new(1)
[22:25:13] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/EdUS
[22:25:35] <bjz> :(
[22:25:40] <bjz> ohh
[22:25:50] <bjz> rusti: pub mod lib { pub struct Num<T>(T); pub type MyInt = Num<int>; pub mod MyInt { use super::MyInt; pub fn new(x: MyInt) -> MyInt { Num(x) } } } lib::MyInt::new(1)
[22:25:51] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/SMLG
[22:26:01] <bjz> rusti: pub mod lib { pub struct Num<T>(T); pub type MyInt = Num<int>; pub mod MyInt { use super::*; pub fn new(x: MyInt) -> MyInt { Num(x) } } } lib::MyInt::new(1)
[22:26:03] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/GOgM
[22:26:30] <bjz> rusti: pub mod lib { pub struct Num<T>(T); pub type MyInt = Num<int>; pub mod MyInt { use super::*; pub fn new(x: int) -> MyInt { Num(x) } } } lib::MyInt::new(1)
[22:26:31] -rusti- {__field__: 1}
[22:26:57] <bjz> I think I might be able to fudge it for lmath then
[22:27:17] <EXetoC> bjz: thanks, that worked
[22:27:22] * bjz is trying to fix it
[22:27:33] <bjz> again :)
[22:30:19] <EXetoC> at least it works generically: Real::two_pi::<R>::()
[22:30:29] <bjz> EXetoC: the problem is rust's type inference gets say
[22:30:31] <bjz> *sad
[22:30:43] <bjz> rusti: Real::pi() * 2.0
[22:30:45] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/VgVd
[22:31:41] <bjz> rusti: use std::num::Zero; Zero::zero()
[22:31:42] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[22:31:43] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/TEGA
[22:31:56] <bjz> in the future you could do T::zero()
[22:32:02] <bjz> or f64::zero()
[22:32:10] <bjz> or BigInt::zero()
[22:32:17] <bjz> which would be super cool
[22:32:32] <bjz> same if you had, say, an Init trait
[22:32:35] <bjz> T::init()
[22:32:39] <bblum> pcwalton: ty_closure(ClosureTy { sig: FnSig { output: return_type } }) look right to you?
[22:32:45] <pcwalton> yes
[22:33:56] <EXetoC> yeah
[22:34:13] *** Quits: Excureo (c@moz-DE8C33F1.static.yakm.wa.charter.com) (Ping timeout)
[22:34:38] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[22:34:38] *** ChanServ sets mode: +o dherman
[22:34:53] <bjz> EXetoC: but yeah, at least there are interim measures
[22:35:03] <bjz> EXetoC: and fudges XD
[22:35:09] *** Joins: Excureo (c@moz-DE8C33F1.static.yakm.wa.charter.com)
[22:35:12] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[22:36:23] *** Joins: seth (seth@moz-D840E602.dsl.static.sonic.net)
[22:37:16] *** Joins: reyre_ (reyre@95877379.B2A8FD7A.47C41102.IP)
[22:38:45] <EXetoC> I like this syntax T(42, "ohai"); it's possible using global functions but maybe it has some limitations
[22:38:51] <EXetoC> bjz: fudge? mmmmmm
[22:39:18] *** Quits: reyre_ (reyre@95877379.B2A8FD7A.47C41102.IP) (Ping timeout)
[22:39:42] <bjz> yummy :)
[22:40:20] <bjz> I like fudge
[22:40:27] <bjz> fuges not so much x)
[22:40:31] <bjz> *fudges
[22:41:40] <EXetoC> bjz: google makes me none the wiser
[22:44:28] *** Joins: dimension (dimension@moz-4CCD79C5.dsl.dynamic.simnet.is)
[22:47:36] <EXetoC> fudges, wut :>
[22:48:22] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[22:49:30] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[22:51:21] *** Joins: lerc (quassel@moz-598ED764.telstraclear.net)
[22:51:52] *** Quits: dimension (dimension@moz-4CCD79C5.dsl.dynamic.simnet.is) (Connection reset by peer)
[22:52:28] *** Quits: doomlord (doomlod@moz-3CF8202D.range81-159.btcentralplus.com) (Ping timeout)
[22:52:39] *** Quits: FrozenCow (FrozenCow@moz-9DF5D010.dynamic.upc.nl) (Client exited)
[22:53:11] *** Joins: FrozenCow (FrozenCow@moz-9DF5D010.dynamic.upc.nl)
[22:53:58] *** Quits: Excureo (c@moz-DE8C33F1.static.yakm.wa.charter.com) (Ping timeout)
[22:55:55] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[22:56:03] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[22:56:04] <bjz> EXetoC: Fudge: verb: present or deal with (something) in a vague or inadequate way, especially so as to conceal the truth or mislead
[22:56:10] <bjz> :)
[22:56:34] <bjz> rusti: pub mod lib { pub struct Num<T>(T); pub type MyInt = Num<int>; pub mod MyInt { use super::*; pub fn new(x: int) -> MyInt { Num(x) } } } lib::MyInt::new(1)
[22:56:52] <bjz> :)
[22:57:04] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[22:57:07] *** Joins: Excureo (c@moz-DE8C33F1.static.yakm.wa.charter.com)
[22:57:31] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[22:59:24] <bblum> 'method' is an ungreppable type name :<
[23:00:27] *** Joins: devbug (quassel@moz-E1DE087C.bchsia.telus.net)
[23:00:40] <strcat> bblum: well we need a rust grep tool
[23:00:44] *** Joins: samnardoni (samnardoni@moz-D9412C6E.cable.virginmedia.com)
[23:00:46] <bstrie> https://github.com/mozilla/rust/pull/6729 r?
[23:00:52] <EXetoC> bjz: English... when are we all going to start using Lojban instead? :>
[23:00:55] <strcat> parse -> find a specific kind of token matching a pattern
[23:00:56] <strcat> ;p
[23:01:09] <erickt> Eridius: I wanted to see if you saw nmatsakis's comments on https://github.com/mozilla/rust/pull/6815
[23:03:01] <cmr> strcat: r again? https://github.com/mozilla/rust/pull/6826
[23:03:06] <bblum> hm i guess i should check the self and return type of trait function signatures too
[23:05:05] *** Quits: FrozenCow (FrozenCow@moz-9DF5D010.dynamic.upc.nl) (Client exited)
[23:05:07] <bblum> ha! method.self_id. perfect.
[23:05:26] *** Quits: jack (jack@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[23:08:56] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[23:09:22] *** Quits: brendan (brendaneic@moz-EAC95265.hfc.comcastbusiness.net) (Quit: brendan)
[23:10:35] <graydon> adding small 2-byte adjacent allocation [0xffffffffffffffed,0xffffffffffffffef)
[23:10:35] <graydon> rust: task failed at 'left: 2 does not equal right: 16', ./testheapmap.rs:811
[23:10:38] <aatch> Man LLVM objects have annoying life cycles.
[23:10:38] <graydon> hello bug!
[23:10:53] <graydon> (rust is _so nice_ for writing fuzz testers in, omg)
[23:11:03] <bblum> "error: aborting due to 953 previous errors" welp
[23:11:15] <bblum> ("add Sized bound" errors on stage1 libstd)
[23:11:27] <graydon> heh
[23:11:33] *** Quits: Nisstyre (wes@moz-FD86289.netflash.net) (Quit: Leaving)
[23:11:41] <aatch> bblum, I got you beat with whatever my optimization pass stuff did, ~2500 errors
[23:14:29] <strcat> well you broke resolve ;p
[23:16:28] <bblum> i wonder if it will take more time for me to add thousands of sized kind bounds or for the next snapshot (which needs to happen before i can commit any sized checks)
[23:17:09] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[23:19:40] <graydon> bblum: will we wind up needing them on .. _all_ functions that make copies or deal with movement?
[23:20:35] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[23:21:54] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[23:23:32] <bblum> graydon: not necessarily *all*... "let x = ~copy *some_vec" would be fine
[23:23:36] <bblum> a big issue appears to be return values
[23:23:54] <graydon> why would that work?
[23:23:58] <graydon> (~copy ...)
[23:24:13] *** Quits: deepdog (deepdog@moz-490E834C.client.mchsi.com) (Ping timeout)
[23:24:39] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[23:24:39] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/ec_aKQ
[23:24:39] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[23:24:44] <bblum> hmm, it could feasibly work if trans emitted smart code for knowing how much to copy
[23:24:52] <bblum> now that you mention it... i should probably forbid that as well
[23:25:02] *** Quits: samnardoni (samnardoni@moz-D9412C6E.cable.virginmedia.com) (Client exited)
[23:25:23] *** Joins: samnardoni (samnardoni@moz-D9412C6E.cable.virginmedia.com)
[23:26:19] <bblum> return types is gonna be a big one though
[23:26:40] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[23:26:42] *** Joins: jeff (jeff@moz-A2645AF4.nycmny.east.verizon.net)
[23:27:03] *** Quits: jeff (jeff@moz-A2645AF4.nycmny.east.verizon.net) (Quit: jeff)
[23:27:06] *** Quits: samnardoni (samnardoni@moz-D9412C6E.cable.virginmedia.com) (Ping timeout)
[23:27:13] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Quit: Eaten by a grue)
[23:27:41] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[23:27:41] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/kCVrQQ
[23:27:41] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[23:27:43] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[23:27:43] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/eV3i6Q
[23:27:43] <ghrust> 13rust/06auto 1444353af 15Corey Richardson: Fix formatting for tidy
[23:27:43] <ghrust> 13rust/06auto 1425cc99b 15Corey Richardson: Fixes
[23:27:43] <ghrust> 13rust/06auto 14daf5010 15bors: auto merge of #6826 : cmr/rust/terminfo, r=thestinger...
[23:27:45] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[23:33:14] <cmr> graydon: can LGPL libraries be used in the rust source? specifically looking at libstatgrap (psutils is too tightly bound to python)
[23:33:22] <cmr> *libstatgrab
[23:33:55] <graydon> cmr: not in our standard library
[23:35:24] <cmr> graydon: Why not? (I'm not at all familiar with the particularities of licensing)
[23:35:38] *** Quits: sam1 (sam@moz-ADDDDFB1.mc.videotron.ca) (Ping timeout)
[23:35:59] <graydon> it would mean that a downstream app written in rust that wanted to statically link our libstd.a
[23:36:08] <graydon> would be infected by the requirement to distribute source
[23:36:14] <graydon> which is not an acceptable burden to place on them
[23:36:27] <graydon> (or "relinkable objects")
[23:36:28] <cmr> Ah, that makes sense.
[23:36:55] <graydon> the provision is that the LGPL library promises that anyone who receives it can modify it and use their modifications in the derived work, where the LGPL library is being used
[23:37:07] <graydon> that is .. not practical for a standard library :(
[23:37:14] <cmr> no, not at all
[23:38:21] <graydon> https://lwn.net/Articles/117972/
[23:40:50] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[23:40:55] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[23:41:59] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[23:42:08] <aatch> Man, I wish I could specify lifetimes without needing a borrowed pointer around.
[23:43:33] <bblum> ok, so here
[23:43:37] <bblum> http://pastebin.mozilla.org/2468971
[23:49:04] <bjz> rusti: pub mod lib { pub struct Num<T>(T); pub type MyInt = Num<int>; pub mod MyInt { use super::*; pub fn new(x: int) -> MyInt { Num(x) } } } let num: lib::MyInt = Num(1);
[23:49:05] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/THZZ
[23:49:26] <bjz> rusti: pub mod lib { pub struct Num<T>(T); pub type MyInt = Num<int>; pub mod MyInt { use super::*; pub fn new(x: int) -> MyInt { Num(x) } } } let num: lib::MyInt = lib::Num(1);
[23:49:29] -rusti- ()
[23:49:40] <bjz> hmm
[23:49:41] *** Quits: mschifer (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[23:50:58] <pcwalton> brson: https://docs.google.com/document/d/1TTj4T2JO42uD5ID9e89oa0sLKhJYD0Y_kqxDv3I3XMw/edit#
[23:51:03] <bjz> rusti: pub mod lib { pub struct Num<T>(T); pub type MyInt = Num<int>; pub mod MyInt { use super::*; pub fn new(x: int) -> MyInt { Num(x) } } } type MyMyInt = Num<MyInt>;
[23:51:04] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/PcTf
[23:51:27] <bjz> rusti: pub mod lib { pub struct Num<T>(T); pub type MyInt = Num<int>; pub mod MyInt { use super::*; pub fn new(x: int) -> MyInt { Num(x) } } } type MyMyInt = lib::Num<lib::MyInt>;
[23:51:29] -rusti- ()
[23:51:49] <bjz> Now why doesn't that work in my lib :P
[23:52:30] <bjz> *weird type errors*
[23:54:36] <bjz> I mean, resolve errors
[23:55:43] *** Joins: dbaupp (Thunderbir@moz-C6B1454A.lns20.syd7.internode.on.net)
[23:55:53] *** kimundi is now known as zz_kimundi
[23:55:55] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[23:56:02] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[23:56:59] <dbaupp> bjz: ping
[23:57:29] <bblum> most common Sized error: using T as a function return type, 257 times
[23:57:35] <bblum> 2nd most: using T as a function argument
[23:57:41] <bblum> , 201 times
[23:57:49] <bblum> 142 times: T as a tuple element
[23:57:59] <bblum> 76 times: using Option<T> as a function return type
[23:58:25] <bjz> dbaupp: sorry, must head out for a bit
[23:58:34] <bjz> dbaupp: will be back later
[23:58:44] <dbaupp> bjz: no problem, i'm in no rust
[23:58:46] <dbaupp> *rush
[23:58:50] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[23:58:52] <cmr> heh
[23:59:03] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[23:59:06] <bjz> baha
[23:59:11] <bjz> you so funneh
