[00:10:09] *** Quits: dherman (dherman@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: dherman)
[00:19:11] *** Quits: gal (gal@moz-BBE3ABD.mv.mozilla.com) (Quit: gal)
[00:24:14] *** Quits: mccr8 (mccr8@moz-BBE3ABD.mv.mozilla.com) (Quit: computer sleep)
[00:27:55] *** Joins: mccr8 (mccr8@moz-F6A7B612.dsl.dynamic.sonic.net)
[00:57:09] *** Quits: azita (Azita@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: azita)
[01:32:13] <roc> cjones: ok so I just tried running gdb with -p specifying a child process
[01:32:15] <roc> that worked
[01:32:53] <roc> but when I tried to restart with "run", it didn't work. Replay resumed but when the child process launched, I got
[01:33:09] <roc>  ---> Reached target process 1125 at event 55227.
[01:33:10] <roc> Malformed response to offset query, 1
[01:33:29] <cjones> hm
[01:33:39] <cjones> do the tests all pass on your machine?  there's a restart test
[01:34:00] <roc> does it test restarting of a child process
[01:34:00] <cjones> you're still on fedora 20 right?
[01:34:03] <roc> yes
[01:34:05] <cjones> yes
[01:34:11] <cjones> ok
[01:34:28] <roc> running tests now...
[01:34:31] <cjones> they pass for me on my x64 box, so i wouldn't expect anything different
[01:34:35] <cjones> but that's relatively quick ot check
[01:34:44] <roc> it's 100% repeatable during replay
[01:34:52] <cjones> i assume you're recording FF?
[01:35:15] <roc> yes
[01:35:18] <roc> reftest-ipc
[01:35:42] <roc> tests pass
[01:37:53] <cjones> reftest-ipc is why i switched out of my VM, couldn't record it without exhausting disk space
[01:39:35] <roc> also, did you add support for "run" with parameters, or did I imagine that?
[01:40:15] <cjones> yes, you can pass an event number
[01:40:38] <cjones> we can add whatever args you want, in case you'd find it convenient to specify another process with the same exe image
[01:40:39] <roc> ah ok
[01:40:50] <roc> never mind for now
[01:41:42] *** Quits: mccr8 (mccr8@moz-F6A7B612.dsl.dynamic.sonic.net) (Quit: )
[01:45:53] *** Quits: sunfish (chatzilla@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:47:10] <cjones> roc, were you targeting a process that started late in the trace?
[01:47:17] <cjones> so that the -p step takes a long time
[01:52:21] <roc> yes
[01:53:08] <roc> depends on what you mean by"long"
[01:53:16] <roc> it was just the child process for the reftests
[01:57:37] <cjones> oh right, there's only child for them
[01:57:39] <cjones> ok
[01:57:43] <cjones> looking at it now
[02:01:25] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:03:21] <roc> can you reproduce it?
[02:06:44] <cjones> no :/
[02:07:25] <cjones> it works too if i break on main and restart
[02:07:42] <cjones> roc, anything unusual you're doing?
[02:08:02] <cjones> at the worst i can get you to send me your gdb protocol traffic
[02:08:13] <roc> nope
[02:08:19] <roc> what information would help you debug this?
[02:11:02] <roc> ok here's another bug
[02:11:08] <cjones> so open debugger_gdb.cc
[02:11:22] <cjones> at the top, uncomment the #define DEBUGTAG
[02:11:34] <roc> I just did "rr replay -p 1125 obj-ff-debug-32/trace_1"
[02:11:40] <roc> which worked
[02:11:44] <roc> then I immediately did "run"
[02:11:47] <cjones> then add
[02:11:49] <roc> to restart the process
[02:11:54] <cjones> static FILE* locallog = fopen("/tmp/rr-sched.log", "w");
[02:11:54] <cjones> #define LOG_FILE locallog
[02:11:58] <cjones> just under that
[02:12:01] <roc> and I got [FATAL] (/home/roc/rr/src/hpc.cc:199:stop_counter: errno: Inappropriate ioctl for device) (trace line 55227)
[02:12:02] <roc>  -> Failed to stop counter
[02:12:19] <cjones> you can ignore than
[02:12:21] <cjones> that
[02:12:30] <cjones> it's a runaway tracee
[02:12:46] <cjones> (#775)
[02:12:48] <cjones> so it's working?
[02:13:22] <roc> no
[02:13:42] <cjones> ok, so send me the trace file you generate from above
[02:13:51] <cjones> the log file i mean
[02:14:05] <roc> it's fatal since I get "Remote connection closed"
[02:14:21] <cjones> oh, sorry
[02:14:30] <cjones> that's a different error message than i thought it was
[02:14:37] <cjones> hm, i've never seen that one before
[02:16:04] *** Quits: mchang (mchang@BE99BE02.84BCE52A.BCAEBB33.IP) (Quit: mchang)
[02:16:21] <roc> it sounds like the fd might be closed or something?
[02:17:00] <roc> just try attaching to the child process and do an immediate "run" as the first gdb command
[02:17:13] <cjones> it looks like that error could happen if we clean up a tracee that never ran
[02:17:29] <cjones> that's what i did :/
[02:17:32] <cjones> let me try again
[02:18:06] <cjones> record, then "$ rr replay -p PID", "(gdb) r"
[02:19:09] *** Joins: mchang (mchang@BE99BE02.84BCE52A.BCAEBB33.IP)
[02:19:47] *** Quits: mchang (mchang@BE99BE02.84BCE52A.BCAEBB33.IP) (Quit: mchang)
[02:19:52] <roc> sending log
[02:20:03] <roc> yeah, where PID is the PID of the content process
[02:20:08] <cjones> do you think we should make stdio marking default for replay?
[02:20:11] <cjones> ok
[02:20:15] <roc> dunno
[02:20:17] <roc> maybe not
[02:20:39] *** Quits: pcwalton (pcwalton@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: pcwalton)
[02:21:47] *** Quits: brson (brson@4A08E125.708C0A12.C7EEF3A2.IP) (Ping timeout)
[02:22:19] *** Joins: mchang (mchang@BE99BE02.84BCE52A.BCAEBB33.IP)
[02:22:50] *** Quits: mchang (mchang@BE99BE02.84BCE52A.BCAEBB33.IP) (Quit: mchang)
[02:24:18] <cjones> roc, which gdb are you using?
[02:24:29] <cjones> yours is doing different things from mine
[02:25:33] <roc> [roc@eternity rr]$ gdb --version
[02:25:35] <roc> GNU gdb (GDB) Fedora 7.6.50.20130731-16.fc20
[02:26:25] <cjones> mine is the same except "-19.fc20"
[02:26:29] <cjones> can you email me your gdb?
[02:27:12] <roc> the binary?
[02:27:23] <cjones> yes
[02:27:34] <roc> oookay
[02:28:04] <cjones> i need more log data, but it's easier if i just do it myself instead of swapping logs over email
[02:28:20] <roc> http://people.mozilla.com/~roc/gdb
[02:28:39] <roc> er it's still uploading
[02:29:14] <roc> done
[02:29:22] <roc> should I try updating it?
[02:29:42] <cjones> sure
[02:29:49] <cjones> it's almost 2MB smaller than mine, odd
[02:29:59] *** Quits: nrc (nrc@F16146EB.9D3722BB.58DC3EE6.IP) (Ping timeout)
[02:33:14] <cjones> well wtf
[02:33:19] <cjones> your gdb wfm
[02:33:27] <cjones> hmmm
[02:33:40] <roc> updated gdb
[02:33:41] <roc> no change
[02:33:54] <cjones> roc, can you change the locallog fopen() mode from "w" to "a" and send me that log?
[02:34:12] <cjones> what commands are you issuing to record and replay?
[02:35:04] <roc> I just ran reftest-ipc on a subdirectory (layout/reftests/async-scroll/reftest.list, which you don't have because I'm trying to fix an intermittent failure so it can land)
[02:35:18] <roc> with --debugger rr-record, which is a script which runs "rr record" without any options
[02:35:40] <roc> now I'm replaying with rr replay -p 1125 obj-ff-debug-32/trace_1
[02:36:42] <roc> maybe it's better if I just debug this mysefl
[02:38:01] <cjones> ok
[02:38:46] <cjones> gdb doesn't recover well if it thinks there was a protocol error, it usually times out
[02:38:59] <cjones> at worst we can implement the qOffsets query
[02:39:11] <roc> seems like we should
[02:39:20] <cjones> i've been adding the bare minimum to get gdb working
[02:39:28] *** Quits: mbx (mbebenita@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: mbx)
[02:39:40] <roc> looks like the bare minimum just increased a bit :-)
[02:40:27] <roc> if you do that, I'll look into this ioctl thing
[02:42:23] <cjones> sure
[02:43:00] <cjones> i'm not sure the offsets issue is it though
[02:44:02] *** terrence is now known as terrence-afk
[02:44:10] <cjones> looks like it might not be in multiprocess mode
[02:51:44] <roc> cjones: this ioctl error is due to the counters never having been started
[02:52:13] <roc> looks like we're relying on the replaying having called reset_hpc at some point
[02:53:05] <roc> seems like stop_hpc should just bail if the counters haven't started
[02:54:11] <roc> cjones: did you notice the "Ignoring packet error, continuing..." in the log I sent you?
[02:54:23] <cjones> i agree
[02:54:31] <cjones> let me look
[02:55:39] <cjones> i'd need the fopen("a") output to diagnose that, but usually it happens when gdb doesn't get a reply to a request in a reasonable amount of time
[02:57:22] <cjones> ignore me about "a"
[02:57:30] <cjones> on the phone, hard to concentrate
[03:02:49] *** Quits: tobytailor (tobytailor@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: tobytailor)
[03:03:28] <cjones> so the [FATAL] errors from preload.c are #775, which you can ignore
[03:13:27] <cjones> roc, running off for a bit, but you can get the old behavior back by running "rr replay -s PORT" to work around this
[03:13:40] <cjones> to unblock your gecko patch
[03:14:00] *** Quits: cjones (cjones@moz-45913895.socal.res.rr.com) (Quit: Ex-Chat)
[03:37:26] *** Joins: tobytailor (tobytailor@95595BAF.CB3251F2.284344F5.IP)
[03:56:16] *** Quits: tobytailor (tobytailor@95595BAF.CB3251F2.284344F5.IP) (Quit: tobytailor)
[03:57:04] *** Joins: gal (gal@moz-D6B8E762.hsd1.ca.comcast.net)
[04:00:28] *** Joins: mbx (mbebenita@moz-B45FE61C.hsd1.ca.comcast.net)
[04:07:27] *** Quits: roc (chatzilla@34E8ECDF.DC2C3734.616A18A6.IP) (Ping timeout)
[04:10:38] *** Quits: gal (gal@moz-D6B8E762.hsd1.ca.comcast.net) (Quit: gal)
[04:19:13] *** Joins: gal (gal@moz-D6B8E762.hsd1.ca.comcast.net)
[04:26:08] *** Joins: cjones (cjones@moz-45913895.socal.res.rr.com)
[04:29:14] *** Quits: gal (gal@moz-D6B8E762.hsd1.ca.comcast.net) (Quit: gal)
[04:50:56] *** Joins: mchang (mchang@BE99BE02.84BCE52A.BCAEBB33.IP)
[04:52:20] *** Joins: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net)
[04:58:21] *** Quits: mchang (mchang@BE99BE02.84BCE52A.BCAEBB33.IP) (Quit: mchang)
[05:05:54] *** Joins: gal (gal@moz-D6B8E762.hsd1.ca.comcast.net)
[05:17:13] *** Quits: gal (gal@moz-D6B8E762.hsd1.ca.comcast.net) (Quit: gal)
[05:54:34] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[05:54:34] *** ChanServ sets mode: +o brson
[06:15:14] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Ping timeout)
[06:15:28] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[06:15:28] *** ChanServ sets mode: +o brson
[06:34:43] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Ping timeout)
[06:39:09] *** Joins: brson (brson@F16146EB.9D3722BB.58DC3EE6.IP)
[06:39:09] *** ChanServ sets mode: +o brson
[06:48:31] *** Quits: brson (brson@F16146EB.9D3722BB.58DC3EE6.IP) (Ping timeout)
[06:48:55] *** Joins: brson (brson@F16146EB.9D3722BB.58DC3EE6.IP)
[06:48:55] *** ChanServ sets mode: +o brson
[06:57:20] *** Quits: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net) (Quit: tobytailor)
[07:01:45] *** Joins: azita (Azita@F16146EB.9D3722BB.58DC3EE6.IP)
[07:30:56] *** Quits: azita (Azita@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: azita)
[07:53:47] *** Quits: brson (brson@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: leaving)
[08:39:46] *** Joins: gds (user@moz-A16AA4E1.eduroam.ic.ac.uk)
[09:23:50] *** lth|away is now known as lth
[09:31:08] *** Quits: cjones (cjones@moz-45913895.socal.res.rr.com) (Quit: Ex-Chat)
[09:33:05] *** Quits: yury (yury@moz-86474802.ok.ok.cox.net) (Ping timeout)
[09:33:13] *** Joins: yury (yury@moz-86474802.ok.ok.cox.net)
[10:42:20] *** Quits: mbx (mbebenita@moz-B45FE61C.hsd1.ca.comcast.net) (Quit: mbx)
[11:12:32] *** Quits: gds (user@moz-A16AA4E1.eduroam.ic.ac.uk) (Ping timeout)
[11:26:06] *** Quits: san (anirudh@57DDC4C1.F2DEA9A7.1C37C358.IP) (Input/output error)
[11:26:24] *** Joins: san (anirudh@57DDC4C1.F2DEA9A7.1C37C358.IP)
[12:40:32] *** lth is now known as lth|test
[12:40:35] *** lth|test is now known as lth
[13:01:02] *** jorendorff_away is now known as jorendorff
[13:30:00] *** jorendorff is now known as jorendorff_away
[13:46:24] *** Joins: gal (gal@moz-D6B8E762.hsd1.ca.comcast.net)
[14:25:59] *** jorendorff_away is now known as jorendorff
[14:37:19] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[14:47:33] *** Quits: gal (gal@moz-D6B8E762.hsd1.ca.comcast.net) (Quit: gal)
[14:50:15] *** Joins: gal (gal@moz-D6B8E762.hsd1.ca.comcast.net)
[16:06:09] *** Quits: gal (gal@moz-D6B8E762.hsd1.ca.comcast.net) (Quit: gal)
[16:08:53] *** Quits: mekki (mekki@moz-86249198.dsl.teksavvy.com) (Ping timeout)
[16:09:46] *** Joins: mekki (mekki@moz-86249198.dsl.teksavvy.com)
[16:11:06] *** Joins: gal (gal@moz-D6B8E762.hsd1.ca.comcast.net)
[16:25:13] *** Joins: cjones (cjones@moz-45913895.socal.res.rr.com)
[16:32:42] *** Joins: mbx (mbebenita@moz-B45FE61C.hsd1.ca.comcast.net)
[16:37:28] *** terrence-afk is now known as terrence
[16:38:05] *** Joins: mchang (mchang@BE99BE02.84BCE52A.BCAEBB33.IP)
[16:40:36] *** Joins: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net)
[16:47:19] *** Joins: tobytailor (tobytailor@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[16:57:29] *** lth is now known as lth|away
[17:00:21] *** Joins: brson (brson@F16146EB.9D3722BB.58DC3EE6.IP)
[17:00:21] *** ChanServ sets mode: +o brson
[17:04:22] *** Joins: dherman (dherman@F16146EB.9D3722BB.58DC3EE6.IP)
[17:04:23] *** ChanServ sets mode: +qo dherman dherman
[17:06:10] *** Joins: pcwalton (pcwalton@F16146EB.9D3722BB.58DC3EE6.IP)
[17:06:10] *** ChanServ sets mode: +o pcwalton
[17:08:11] *** Joins: nrc (nrc@F16146EB.9D3722BB.58DC3EE6.IP)
[17:14:37] *** Joins: mccr8 (mccr8@moz-BBE3ABD.mv.mozilla.com)
[17:15:02] *** Joins: pnkfelix (pnkfelix@F16146EB.9D3722BB.58DC3EE6.IP)
[17:17:01] *** Joins: azita (Azita@F16146EB.9D3722BB.58DC3EE6.IP)
[17:50:45] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[18:00:20] *** Joins: azakai_ (alon@moz-BBE3ABD.mv.mozilla.com)
[18:01:03] *** Quits: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net) (Ping timeout)
[18:03:41] *** Joins: ecr (chatzilla@moz-B9C0B7F6.dhcp4.washington.edu)
[18:16:50] *** Joins: gds (user@moz-E3A7B2B5.range86-160.btcentralplus.com)
[18:21:52] *** Quits: gal (gal@moz-D6B8E762.hsd1.ca.comcast.net) (Quit: gal)
[18:22:00] *** Joins: gal (gal@moz-D6B8E762.hsd1.ca.comcast.net)
[18:30:47] *** Quits: ecr (chatzilla@moz-B9C0B7F6.dhcp4.washington.edu) (Ping timeout)
[18:31:38] *** Joins: ecr (chatzilla@moz-B9C0B7F6.dhcp4.washington.edu)
[18:36:52] *** faramarz is now known as faramarz|afk
[18:42:36] *** Joins: sunfish (chatzilla@moz-BBE3ABD.mv.mozilla.com)
[18:48:34] *** Quits: mbx (mbebenita@moz-B45FE61C.hsd1.ca.comcast.net) (Quit: mbx)
[19:00:39] *** Quits: gal (gal@moz-D6B8E762.hsd1.ca.comcast.net) (Quit: gal)
[19:02:39] *** Joins: mbx (mbebenita@moz-B45FE61C.hsd1.ca.comcast.net)
[19:19:14] *** Quits: pnkfelix (pnkfelix@F16146EB.9D3722BB.58DC3EE6.IP) (Ping timeout)
[19:38:38] *** Joins: gal (gal@moz-D6B8E762.hsd1.ca.comcast.net)
[19:39:57] *** Quits: ecr (chatzilla@moz-B9C0B7F6.dhcp4.washington.edu) (Ping timeout)
[19:50:40] *** Quits: gal (gal@moz-D6B8E762.hsd1.ca.comcast.net) (Quit: gal)
[19:52:38] *** Quits: pcwalton (pcwalton@F16146EB.9D3722BB.58DC3EE6.IP) (Ping timeout)
[20:03:17] *** lth|away is now known as lth
[20:10:57] *** Quits: nrc (nrc@F16146EB.9D3722BB.58DC3EE6.IP) (Ping timeout)
[20:11:15] *** Joins: gal (gal@moz-BBE3ABD.mv.mozilla.com)
[20:13:27] *** Joins: ecr (chatzilla@moz-5A94AC46.dhcp4.washington.edu)
[20:22:34] *** lth is now known as lth|away
[21:00:12] *** Joins: nrc (nrc@F16146EB.9D3722BB.58DC3EE6.IP)
[21:02:26] *** Joins: ecr_ (chatzilla@moz-10C88DA7.dyn.cs.washington.edu)
[21:02:31] *** Quits: ecr (chatzilla@moz-5A94AC46.dhcp4.washington.edu) (Ping timeout)
[21:02:32] *** ecr_ is now known as ecr
[21:07:00] *** faramarz|afk is now known as faramarz
[21:09:36] *** Quits: gal (gal@moz-BBE3ABD.mv.mozilla.com) (Quit: gal)
[21:11:31] *** Joins: gal (gal@moz-BBE3ABD.mv.mozilla.com)
[21:17:19] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[21:20:16] *** Quits: gal (gal@moz-BBE3ABD.mv.mozilla.com) (Quit: gal)
[21:31:20] *** Joins: gal (gal@moz-BBE3ABD.mv.mozilla.com)
[21:32:07] *** Joins: roc (chatzilla@34E8ECDF.DC2C3734.616A18A6.IP)
[21:46:54] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[21:48:32] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[21:52:19] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[21:54:28] *** Joins: pcwalton (pcwalton@F16146EB.9D3722BB.58DC3EE6.IP)
[21:54:28] *** ChanServ sets mode: +o pcwalton
[21:58:12] *** Quits: brson (brson@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: leaving)
[21:58:30] *** Joins: brson (brson@4A08E125.708C0A12.C7EEF3A2.IP)
[21:58:30] *** ChanServ sets mode: +o brson
[21:59:17] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[21:59:49] *** Quits: gal (gal@moz-BBE3ABD.mv.mozilla.com) (Quit: gal)
[22:02:12] *** Joins: eholk (eholk@moz-BA312F07.crest.iu.edu)
[22:06:15] *** Joins: gal (gal@moz-BBE3ABD.mv.mozilla.com)
[22:07:04] *** Quits: gal (gal@moz-BBE3ABD.mv.mozilla.com) (Quit: gal)
[22:11:22] *** Joins: gal (gal@moz-BBE3ABD.mv.mozilla.com)
[22:24:03] *** Quits: mekki (mekki@moz-86249198.dsl.teksavvy.com) (Quit: Leaving.)
[22:24:36] *** Joins: mekki (mekki@moz-86249198.dsl.teksavvy.com)
[22:32:49] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[22:33:01] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[22:46:58] *** Quits: dherman (dherman@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: dherman)
[23:01:41] *** Quits: gal (gal@moz-BBE3ABD.mv.mozilla.com) (Quit: gal)
[23:12:30] *** Quits: mccr8 (mccr8@moz-BBE3ABD.mv.mozilla.com) (Quit: computer sleep)
[23:13:14] *** Joins: mccr8 (mccr8@moz-BBE3ABD.mv.mozilla.com)
[23:20:35] *** Joins: gal (gal@moz-BBE3ABD.mv.mozilla.com)
[23:28:02] *** Quits: mccr8 (mccr8@moz-BBE3ABD.mv.mozilla.com) (Quit: computer sleep)
[23:28:08] *** Joins: mccr8 (mccr8@moz-BBE3ABD.mv.mozilla.com)
[23:29:09] *** Quits: cjones (cjones@moz-45913895.socal.res.rr.com) (Quit: Ex-Chat)
