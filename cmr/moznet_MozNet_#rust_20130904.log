[00:01:14] *** Joins: fyolnish (fyolnish@moz-5FB9FC4D.uqwimax.jp)
[00:02:55] *** Quits: fyolnish (fyolnish@moz-5FB9FC4D.uqwimax.jp) (Ping timeout)
[00:04:09] <jmgrosen> woah, rust has changed a lot o_O https://github.com/grahame/rust-csv/blob/master/csv.rs
[00:05:45] <a_m0d> Can anyone tell me how I can export enum variants from a module?
[00:05:49] *** Joins: eatkinson (eatkinson@moz-C96E3036.airbears.berkeley.edu)
[00:06:22] <strcat> a_m0d: they are public if the enum is
[00:06:55] <a_m0d> strcat: so pub use EnumName in the mod.rs file should be enough?
[00:07:01] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[00:07:13] <jmgrosen> is there a pickle-like library for rust?
[00:07:15] <strcat> oh you mean re-export
[00:07:39] <a_m0d> strcat: Yeah, that might be it
[00:07:44] <strcat> a_m0d: you still need to re-export the variants like that too
[00:07:52] <engla> strcat: is_utf8 doesn't reject surrogate codepoints at the moment. I could try doing that though
[00:08:08] <a_m0d> do I need to re-export every variant? Or just the enum itself?
[00:08:11] <tjc> jmgrosen: extra::serialize
[00:08:14] <tjc> (if that means what I think it does)
[00:08:28] *** Quits: dherman (dherman@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: dherman)
[00:08:39] *** Joins: rust (Mibbit@moz-35DE53D0.bootp.virginia.edu)
[00:08:41] <jmgrosen> tjc: hadn't noticed that, thanks
[00:08:56] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[00:10:22] <jmgrosen> what's a not totally trivial but not super hard (like the html and datetime libraries listed) that would be helpful to make?
[00:10:26] *** Joins: simon (simon@moz-CBE4BB13.cable.teksavvy.com)
[00:10:46] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[00:11:03] <strcat> a proper owned rope
[00:11:10] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[00:11:15] <aatch> Yes, a decent rope implementation.
[00:11:33] <tjc> jmgrosen: Try https://github.com/mozilla/rust/issues?direction=desc&labels=I-wishlist&page=1&sort=created&state=open and https://github.com/mozilla/rust/issues?direction=desc&labels=A-an-interesting-project&page=1&sort=created&state=open
[00:11:36] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[00:11:39] <tjc> not all of those are libraries, but some of them are
[00:13:05] *** Quits: six600110 (six600110@moz-2FA48202.neo.res.rr.com) (Ping timeout)
[00:13:22] <strcat> this is probably going to totally break chars
[00:13:25] <strcat> :(
[00:13:31] * strcat accidentally made them non-scalar and it was not pretty
[00:13:32] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[00:14:51] <mm> I made an image on Amazon AWS that includes rust 0.7.  Because why not.  The ID is ami-929cb6d7 if anybody cares.
[00:14:54] <strcat> my kindred spirit, a tycat
[00:15:37] <strcat> rust 0.7 is in the official arch linux repos btw, and there are nightly builds of rust-git, if you want a really easy life
[00:16:16] <strcat> so I guess ty_char will become non-binopable simply by being tycat_other
[00:16:29] <strcat> maybe I could have saved myself a lot of time and done a hack in this function only ;p
[00:16:32] <mm> well sudo yum install gcc-c++ && ./configure && make && make install isn't too much harder than figuring out wtf arch linux broke ;)
[00:16:51] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[00:17:11] <strcat> /home/strcat/projects/rust/src/libstd/char.rs:94:9: 94:12 error: unexpected token: `' '`
[00:17:14] <strcat> /home/strcat/projects/rust/src/libstd/char.rs:94     c == ' '
[00:17:16] <strcat> oh yay
[00:17:26] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[00:17:35] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[00:17:56] <rust> if i have a variable created like let args: ~[~str] = os::args(); how do i check the size of the "array of args"?
[00:18:05] <erickt> strcat: what are you working on?
[00:18:11] <bblum> is your nick seriously rust
[00:18:15] <strcat> making char not an integer
[00:18:31] <strcat> but I also succeeded in many it not parse
[00:18:33] <strcat> somehow
[00:18:42] <mm> rust: args.len()
[00:18:54] <strcat> I'm guessing I need to add a LIT_CHAR case somewhere
[00:19:18] <strcat> found it
[00:19:19] <erickt> strcat: hehe
[00:19:22] <mm> rust: let args: ~[~str] = ~[~"/usr/bin/cat", ~"foo"]; args.len()
[00:19:36] <mm> rusti: let args: ~[~str] = ~[~"/usr/bin/cat", ~"foo"]; args.len()
[00:19:37] -rusti- 2u
[00:19:50] *** Quits: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net) (Quit: Leaving.)
[00:20:42] <erickt> strcat: are you preserving the ability to do `let ch: char = 'c'; ch as int`?
[00:20:53] <strcat> erickt: I could
[00:21:01] <strcat> I'm not sure exactly where that's implemented yet
[00:21:22] <strcat> it can work like C-like enums
[00:21:31] <erickt> I was just about to suggest that :)
[00:22:14] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[00:22:23] <strcat> erickt: https://paste.xinu.at/167km/ so far ;p
[00:22:40] <erickt> speaking on casting C-like enums, would anyone complain if I made functions like `to_int()` return an Option<int> so I can do some bounds checking on the cast?
[00:22:41] <strcat> the hard part will be actually removing all uses of 'foo as char'
[00:23:32] <strcat> and ideally I didn't miss anything in ty.rs :s
[00:23:35] *** Quits: bent (chatzilla@C36F5748.8CE62E0F.A36C57B9.IP) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[00:23:39] <strcat> evil match exprs with _ cases
[00:23:42] <benh> petition to ban ru*!*@* and except rusti!*@* to ensure tab completion goes right in irc
[00:24:01] *** mm is now known as russel
[00:24:05] <benh> boo
[00:24:12] <russel> :)
[00:24:13] <erickt> strcat: ooh good point. How are you dealing with the `io.rs` files that do `-1 as char` to signify EOF?
[00:24:16] *** russel is now known as mm
[00:24:23] *** Joins: tikue_ (tkuehn@296E74A0.D038900B.689607DE.IP)
[00:24:32] <strcat> erickt: well, that's not sound... they can use Option<char>
[00:24:41] <mm> rusti should just with every prefix of rusti
[00:24:45] *** Quits: tikue_ (tkuehn@296E74A0.D038900B.689607DE.IP) (Quit: tikue_)
[00:24:47] <mm> r, ru, rus, rust, rusti
[00:24:48] <strcat> I don't mind making them use transmute for now and leaving them broken
[00:24:49] <engla> well io.rs will die at some point
[00:24:54] <strcat> I just want to fix rust the language atm, not rust's stdlib ;p
[00:25:06] <strcat> /home/strcat/projects/rust/src/libstd/char.rs:168:6: 168:16 error: non-numeric type used in range
[00:25:09] <strcat> /home/strcat/projects/rust/src/libstd/char.rs:168       '0' .. '9' => c as uint - ('0' as uint),
[00:25:11] <strcat>                                                         ^~~~~~~~~~
[00:25:13] <strcat> hm
[00:25:20] <strcat> this is going to be a problem
[00:25:55] <strcat> I guess I'll just add an exception for char
[00:26:17] <strcat> then again this function is incorrect
[00:26:19] <strcat> only works on ascii
[00:26:21] <erickt> strcat: heh. Option<char> is probably the right way to do it
[00:26:23] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[00:26:40] <strcat> to_digit/from_digit
[00:26:41] <engla> erickt: the new io does it right
[00:26:44] <sfackler> strcat: that pattern is useful when you know you're dealing with ascii
[00:26:49] <strcat> char isn't for ascii
[00:26:52] <strcat> it's a code point
[00:27:02] <strcat> if you know you're dealing with ascii you don't want to use char :s
[00:27:04] <erickt> engla: cool. Do you know when the new io will replace the old?
[00:27:19] <sfackler> but char is the only way you can match against '0'
[00:27:26] *** Joins: tikue_ (tkuehn@296E74A0.D038900B.689607DE.IP)
[00:27:31] <strcat> sfackler: it's not
[00:27:45] <strcat> afaik there are byte literals via a syntax ext
[00:27:50] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[00:28:00] <strcat> rusti: bytes!("foo")
[00:28:01] -rusti- &[102u8, 111u8, 111u8]
[00:28:02] <strcat> rusti: bytes!('a')
[00:28:03] -rusti- &[97u8]
[00:28:05] <strcat> oh
[00:28:05] <engla> erickt: I don't, I guess it could do it soon
[00:28:10] <strcat> I guess it doesn't make an integer yet
[00:28:11] <strcat> it should
[00:28:16] <benh> rusti: bytes!(42u)
[00:28:17] -rusti- <anon>:5:9: 6:5 error: Unsupported literal in bytes!
[00:28:17] -rusti- <anon>:5          bytes!(42u)
[00:28:17] -rusti- <anon>:6     };
[00:28:17] -rusti- error: aborting due to previous error
[00:28:17] -rusti- application terminated with error code 101
[00:28:37] <sfackler> oh yeah, but bytes!('0') .. bytes('9') => c as uint - (bytes!('0') as uint) is gross
[00:28:39] *** Quits: RMF (RMF@moz-5FC5A0D8.dsl.telepac.pt) (Quit: Textual IRC Client: www.textualapp.com)
[00:28:47] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[00:28:54] <engla> also it doesn't work, macros don't expand there
[00:28:58] <strcat> sfackler: so express your opinion on my issue asking for byte literals ;p
[00:29:25] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[00:29:45] *** Joins: six600110 (six600110@moz-2FA48202.neo.res.rr.com)
[00:30:04] <strcat> engla: they should expand there
[00:30:06] <strcat> that's a bug
[00:30:12] <tavoe> Anyone know why I may be getting an "unresolved name" error?
[00:30:13] <strcat> not char's problem ;p
[00:30:14] <erickt> tjc: ya know, with workcache in libextra, I *could* slip in a syntax extension that supports caching functions
[00:30:31] <tjc> erickt: hmm! That would be neat
[00:31:03] <strcat> -        } else if !ty::type_is_numeric(b_ty) {
[00:31:06] <strcat> +        } else if !ty::type_is_numeric(b_ty) && b_ty != ty::ty_char {
[00:31:08] <strcat> just doing that for match
[00:31:17] *** Quits: jpf (jan@moz-A8C26A15.org) (Ping timeout)
[00:31:20] <strcat> anyway it's this evil opaque type thing so that doesn't actually work as-is ;p
[00:31:59] <rust> mm: thank you!
[00:32:46] <tavoe> I win. Nevermind. Apperently a file is automatically wrapped in it's module name, and I don't have to do it explicitly. 
[00:34:39] * strcat wonders why 'as' still works :|
[00:34:43] <strcat> I guess it works on any scalar....
[00:35:06] *** Joins: jpf (jan@moz-A8C26A15.org)
[00:36:16] <strcat> rusti: fn foo() {} foo < foo
[00:36:17] -rusti- <anon>:5:21: 5:30 error: binary operation < cannot be applied to type `extern "Rust" fn()`
[00:36:17] -rusti- <anon>:5          fn foo() {} foo < foo
[00:36:17] -rusti-                               ^~~~~~~~~
[00:36:17] -rusti- error: aborting due to previous error
[00:36:17] -rusti- application terminated with error code 101
[00:36:30] <strcat> what is a "non-scalar comparison"? :
[00:36:33] <strcat> :|
[00:36:59] <strcat> anyway found the 'as' stuff
[00:37:02] <tjc> strcat: a comparison on a type that we don't support comparing :-)
[00:37:05] <benh> rusti: static i: int = 42; static j: int = 42; let pi: *int = &i; let pj: *int = &j; pi == pj
[00:37:05] -rusti- false
[00:37:25] <strcat> tjc: just seems like you could never actually hit that error
[00:37:40] <benh> I'm not sure how I feel about constants being merged if it's visible in user code
[00:37:49] <tjc> strcat: at some point, not all types supported comparison; but maybe all types do now? I'm not sure
[00:38:07] <strcat> benh: we already merge functions and it's visible in user code
[00:38:34] <strcat> and addresses of the contents of strings aren't significant
[00:38:45] <strcat> only the slice itself is significant
[00:38:55] <strcat> (it merges the actual string constants)
[00:39:08] *** nrc is now known as nrc|lunch
[00:39:20] <strcat> rusti: let a = "foo"; let b: *u8 = &a[0];b 
[00:39:21] -rusti- (0x4084c0 as *())
[00:39:22] *** Joins: Mister_Abc (Mibbit@moz-35250D84.bootp.virginia.edu)
[00:39:30] <strcat> well I have optimization off so...
[00:39:32] <strcat> lets see
[00:39:34] <benh> rusti: &42 as *int
[00:39:35] -rusti- (0x7feb07a170f0 as *())
[00:39:49] <strcat> benh: raw pointer addresses can't really be relied upon
[00:39:54] <strcat> if we had a partially moving gc, for example
[00:40:07] <strcat> it's an arbitrary number
[00:40:08] *** flaper87 is now known as flaper87|afk
[00:40:23] <strcat> rusti: let a = "foo"; let b = "bar"; let c: *u8 = &a[0]; let d: *u8 = &b[0]; (c, d)
[00:40:23] -rusti- ((0x408680 as *()), (0x408684 as *()))
[00:40:28] <strcat> rusti: let a = "foo"; let b = "foo"; let c: *u8 = &a[0]; let d: *u8 = &b[0]; (c, d)
[00:40:29] -rusti- ((0x408680 as *()), (0x408680 as *()))
[00:40:33] <strcat> it merged the strings
[00:40:39] *** Quits: simon (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[00:41:36] <strcat> also, I don't think we want to output 1 function addr per closure fn ptr
[00:41:42] <strcat> if there are many duplicate closures
[00:43:36] <strcat> hrm
[00:43:57] <benh> Wasn't it a thing to use addresses of constants as... tls keys or hashtable keys or something a while ago?
[00:44:24] <strcat> tls uses it
[00:44:32] <strcat> but tls can be dealt with differently
[00:45:24] <strcat> acrichto had to add address_insignificant to reduce the code bloat from the formatting stuff
[00:45:37] <strcat> it's just odd for it not to be the default imo, since we already merge fns
[00:45:54] <strcat> with an address_significant attribute for the rare cases it is (TLS)
[00:47:04] *** Quits: msingle (Thunderbir@moz-20675462.nrflva.fios.verizon.net) (Ping timeout)
[00:47:06] *** Joins: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net)
[00:47:11] <benh> If you have two constants with the same value and one has that tag and one doesn't, do they get merged?
[00:47:20] <strcat> no
[00:47:23] <strcat> well
[00:47:26] <strcat> it could
[00:47:51] <strcat> hm
[00:48:06] <strcat> Global variables can be marked with unnamed_addr which indicates that the address is not significant, only the content. Constants marked like this can be merged with other constants if they have the same initializer. Note that a constant with significant address can be merged with a unnamed_addr constant, the result being a constant whose address is significant.
[00:48:21] <strcat> so TLS just needs #[address_significant]
[00:48:39] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[00:50:08] *** Quits: heftig (heftig@moz-76E8421A.dip0.t-ipconnect.de) (Ping timeout)
[00:50:20] <Mister_Abc> Question: is there any way to build rust on a low memory system? My netbook has 1gig of ram in it but I'd like Rust on there if possible
[00:50:40] <strcat> Mister_Abc: which OS is it?
[00:50:52] <Mister_Abc> ubuntu, linux
[00:51:01] <strcat> there are nightly ubuntu packages
[00:51:16] <Mister_Abc> are there packages for 0.7?
[00:51:22] <jmgrosen> anyone know of any issues that would be a good beginning into the compiler?
[00:51:30] <strcat> Mister_Abc: probably but it's unlikely you want to use 0.7
[00:51:43] <benh> There is a tag for "easy" issues, I guess
[00:51:44] *** Quits: ktt3ja (Mibbit@moz-6B6EE8C0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[00:51:45] <Mister_Abc> I'm taking a class that requires 0.7
[00:51:47] <strcat> Mister_Abc: https://launchpad.net/~hansjorg/+archive/rust (yes though, there are 0.7 ones there)
[00:51:52] *** Quits: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Quit: ozten)
[00:51:56] <Mister_Abc> ah, thanks a bunch!
[00:52:06] <jmgrosen> Mister_Abc: you're taking that OS course?
[00:52:09] <strcat> erickt: found it
[00:52:14] *** Quits: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net) (Ping timeout)
[00:52:19] <Mister_Abc> yea
[00:52:23] <jmgrosen> ah, cool
[00:52:28] <strcat> erickt: works exactly like enums now
[00:52:33] <strcat>                     if (type_is_c_like_enum(fcx, expr.span, t_e) || is_char(fcx, expr.span, t_e))
[00:52:35] <strcat>                         && t_1_is_trivial {
[00:52:41] <acrichto> strcat: dbaupp added a macro to declare TLS keys, so as long as everyone uses that we could have that explicitly add the address_significant attribute without too much pain
[00:52:50] <erickt> strcat: cool
[00:53:16] *** Quits: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com) (Quit: ecr)
[00:53:57] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[00:54:15] *** Joins: jdsanders (Adium@moz-84CB7548.hlrn.qwest.net)
[00:54:43] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[00:54:56] <strcat> benh: also we have zero-size types
[00:55:06] <strcat> so not all types even have addresses :)
[00:55:12] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Connection reset by peer)
[00:55:21] <benh> rusti: &() as *()
[00:55:21] -rusti- (0x0 as *())
[00:55:24] <benh> woah
[00:55:25] <strcat> C++ requires that all types have an address, and that all functions have a unique address
[00:55:29] <strcat> benh: that's an arbitrary address
[00:55:31] <strcat> it is sometimes not 0
[00:55:58] <strcat> rust: struct Foo; &Foo as *Foo
[00:56:02] <strcat> er
[00:56:05] <strcat> rusti: struct Foo; &Foo as *Foo
[00:56:05] -rusti- (0x7f9889a170f0 as *())
[00:56:07] <strcat> rusti: struct Foo; &Foo as *Foo
[00:56:08] -rusti- (0x7f625fe170f0 as *())
[00:56:09] <strcat> :)
[00:56:19] <strcat> rusti: struct Foo; std::sys::size_of::<Foo>()
[00:56:20] -rusti- 0u
[00:56:24] <strcat> rusti: struct Foo; std::sys::size_of::<[Foo, ..100000]>()
[00:56:25] -rusti- 0u
[00:56:43] <benh> rusti: struct Foo; (&Foo, &Foo, &Foo) as (*Foo, *Foo, *Foo)
[00:56:43] -rusti- <anon>:5:21: 5:61 error: non-scalar cast: `(&main::Foo,&main::Foo,&main::Foo)` as `(*main::Foo,*main::Foo,*main::Foo)`
[00:56:43] -rusti- <anon>:5          struct Foo; (&Foo, &Foo, &Foo) as (*Foo, *Foo, *Foo)
[00:56:44] -rusti-                               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[00:56:44] -rusti- error: aborting due to previous error
[00:56:44] -rusti- application terminated with error code 101
[00:56:47] <benh> boo :(
[00:56:54] <benh> rusti: struct Foo; (&Foo, &Foo, &Foo as *Foo)
[00:56:55] -rusti- (&main::Foo, &main::Foo, (0x7f0f036170d0 as *()))
[00:56:57] * strcat was just looking at that error msg
[00:57:03] <benh> rusti: struct Foo; [&Foo, &Foo, &Foo as *Foo]
[00:57:03] -rusti- <anon>:5:34: 5:46 error: mismatched types: expected `&main::Foo` but found `*main::Foo` (expected &-ptr but found *-ptr)
[00:57:03] -rusti- <anon>:5          struct Foo; [&Foo, &Foo, &Foo as *Foo]
[00:57:03] -rusti-                                            ^~~~~~~~~~~~
[00:57:04] -rusti- error: aborting due to previous error
[00:57:04] -rusti- application terminated with error code 101
[00:57:06] <Scaevolus> why does rusti use notices instead of messages?
[00:57:13] <strcat> because that's what notices are for
[00:57:21] <strcat> automated messages that should not be replied to
[00:57:28] <benh> Scaevolus: i seem to recall we had that same argument like five years ago :D
[00:57:32] <pnkfelix> we need to train rusti to auto-respond to that question.  :)
[00:57:53] <Scaevolus> I've just never seen an irc bot use channel notices like that
[00:57:55] <strcat> erickt: http://ix.io/7Pd the errors I caused in libstd
[00:57:57] <strcat> erickt: perfect! :)
[00:58:16] <benh> rusti: struct Foo; (&Foo as *Foo, &Foo as *Foo, &Foo as *Foo)
[00:58:17] -rusti- ((0x7f57e56170e0 as *()), (0x7f57e56170d8 as *()), (0x7f57e56170d0 as *()))
[00:58:23] <mm> Scaevolus: among other things, it prevents bots talking to each other
[00:58:27] <pnkfelix> (and also train it to remind people that it can be private messaged.  Or maybe that should just be a channel topic.)
[00:58:31] <erickt> strcat: wow, that's a bunch of them
[00:58:49] <strcat> erickt: yep but no false positives, all unsafe ;p
[00:59:13] <Scaevolus> mm: much safer than my manual blacklisting/pattern match *bot
[00:59:18] <strcat> (I mean overall, not the specific use cases)
[00:59:24] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[00:59:37] <strcat> anyway easy enough to fix most of these
[00:59:47] <mm> Though cobbling together turing machines out of irc bots that have simple functions is a fun hobby :)
[01:01:03] <Scaevolus> rusti could probably drop those last 3 lines
[01:01:25] <Scaevolus> who cares about "\nhey there was an error\nyep, we terminated with an error\n"
[01:01:35] *** Joins: fyolnish (fyolnish@moz-6B8CACE6.uqwimax.jp)
[01:01:37] <strcat> the exit code + signal is sometimes useful to know
[01:01:38] <Scaevolus> last 2*
[01:01:40] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[01:01:47] <strcat> rust: let xs = ~[1, 100000000000];
[01:01:50] <strcat> ugh
[01:01:53] <strcat> rusti: let xs = ~[1, 100000000000];
[01:01:54] -rusti- <anon>:5:13: 5:15 warning: unused variable: `xs` [-W unused-variable (default)]
[01:01:54] -rusti- <anon>:5          let xs = ~[1, 100000000000];
[01:01:54] -rusti-                       ^~
[01:01:54] -rusti- ()
[01:01:58] * strcat should rename rusti to r
[01:02:06] *** mm is now known as r
[01:02:08] <strcat> rusti: let _xs = ~[1, 100000000000];
[01:02:09] -rusti- ()
[01:02:11] *** r is now known as mm
[01:02:12] <strcat> rusti: let _xs = ~[1, 1000000000000];
[01:02:12] -rusti- ()
[01:02:15] <strcat> rusti: let _xs = ~[1, 100000000000000000];
[01:02:16] -rusti- ()
[01:02:22] <strcat> rusti: let _xs = ~[1, 100000000000000000]; println("foo")
[01:02:23] -rusti- foo
[01:02:23] -rusti- ()
[01:02:25] <strcat> um
[01:02:31] <tikue_> ?
[01:02:44] <strcat> it was supposed to go OOM
[01:02:47] <tikue_> o
[01:02:52] <engla> it's a 2-length vec
[01:02:58] <pnkfelix> strcat: don't you mean ..1000000
[01:03:00] <strcat> engla: oh whoops
[01:03:00] <engla> might not go oom
[01:03:03] <strcat> hehe
[01:03:04] <engla> :-)
[01:03:10] <strcat> rusti: let _xs = ~[1, ..100000000];
[01:03:15] *** Quits: fyolnish (fyolnish@moz-6B8CACE6.uqwimax.jp) (Ping timeout)
[01:03:16] -rusti- timeout triggered!
[01:03:21] <strcat> meh
[01:03:22] <strcat> rusti: let _xs = ~[1, ..1000000000];
[01:03:23] *** Quits: miloshadzic (miloshadzi@F8195CC5.425C93D4.449B8A48.IP) (Quit: My MacBook has gone to sleep. ZZZzzz‚Ä¶)
[01:03:23] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[01:03:29] <strcat> :s
[01:03:41] <strcat> neither of those were supposed to happen...
[01:03:54] <strcat> rusti: let _xs = ~[1, ..10000000000];
[01:03:54] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[01:04:16] <engla> rust: let mut v: ~[u8] = ~[]; v.reserve(-1024)
[01:04:20] <engla> rusti: let mut v: ~[u8] = ~[]; v.reserve(-1024)
[01:04:20] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[01:04:22] <Scaevolus> mm: are you running it in a chroot jail with restrictive ulimits?
[01:04:43] <strcat> Scaevolus: it's a better sandbox than that
[01:04:53] <strcat> it uses a cgroup for the memory limit
[01:06:08] <strcat> but it's not going OOM and being killed, it's segfaulting :s
[01:06:16] <erickt> should .reserve() really be taking an int?
[01:06:29] <strcat> erickt: pretty sure it's a uint
[01:06:35] <strcat> rust: let x: uint = -1; x
[01:06:39] <strcat> again.
[01:06:42] <strcat> rusti: let x: uint = -1; x
[01:06:43] -rusti- 18446744073709551615u
[01:06:45] * strcat can't untrain himself
[01:06:54] <strcat> [435227.475507] traps: out[13818] general protection ip:7fe34acd48b7 sp:7fe34a216e70 error:0 in libc-2.18.so[7fe34ac9e000+1a1000]
[01:07:05] <erickt> strcat: you're right. Is -1024 geting auto-cast to a uint?
[01:07:36] <erickt> I think that should need an explicit cast
[01:07:48] <strcat> it is
[01:07:52] <strcat> (being auto-cast)
[01:07:55] <strcat> well
[01:08:00] <strcat> it's inferring it, rather
[01:08:16] *** Quits: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[01:08:25] * erickt files a bug
[01:08:32] *** Joins: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com)
[01:09:36] <erickt> strcat: nevermind, I think this covers it: https://github.com/mozilla/rust/issues/5477
[01:11:15] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[01:11:16] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz‚Ä¶)
[01:11:41] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[01:12:05] *** Joins: RMF (RMF@moz-5FC5A0D8.dsl.telepac.pt)
[01:12:11] <engla> I think it's a feature erickt 
[01:14:06] <erickt> engla: really? why is that? And also, this issue is a little more relevant: https://github.com/mozilla/rust/issues/4220. It's about adding a lint pass to check integer constant ranges
[01:14:44] <erickt> that would allow for the rare cases when you need to define `let max_value: uint = -1 as uint`
[01:15:20] <engla> I guess it's just convenience for max value yes
[01:16:20] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[01:16:41] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[01:17:36] <strcat> error: internal compiler error: no type for node 28744: block unsafe { transmute(u2 - 56320u16) } (id=28744) in fcx 7f85605acf40
[01:17:39] <strcat> :|
[01:19:36] *** Quits: jstevans (Instantbir@C58969A2.387BC77F.DDE5D3F6.IP) (Ping timeout)
[01:19:39] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[01:22:06] *** Joins: ktt3ja (Mibbit@moz-6B6EE8C0.hsd1.va.comcast.net)
[01:23:46] <strcat> hm
[01:23:51] <strcat> so I could continue to allow 'u8 as char'
[01:23:58] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[01:24:16] *** Quits: a_m0d (a_m0d@moz-322CEC3.acanac.net) (Quit: Leaving.)
[01:24:49] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[01:24:57] <ktt3ja> I have a question
[01:24:59] <ktt3ja> http://pastebin.com/2CuHXUpY
[01:25:14] <ktt3ja> how do I get to the Err branch if I happened to read a folder
[01:25:41] *** Joins: carllerche (carllerche@moz-824E40D5.compute-1.amazonaws.com)
[01:26:34] <engla> std::io doesn't do error handling properly ktt3ja 
[01:26:45] *** Joins: roboguy (roboguy@moz-266CFD9E.cm.sunflower.com)
[01:27:05] <ktt3ja> oh
[01:27:07] *** Quits: carllerche (carllerche@moz-824E40D5.compute-1.amazonaws.com) (Client exited)
[01:27:08] <tjc> ktt3ja: as engla said, this is a bug in the 0.7 IO library (not your fault), but you can work around it by adding an assertion...
[01:27:09] <engla> IO is being reworked inside std::rt::io
[01:27:17] <tjc> assert!(!os::path_is_dir(file_you_are_reading))
[01:27:26] <tjc> and then you'll see it right away if you accidentally try to read a directory
[01:27:38] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[01:29:24] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[01:29:28] <benh> presumably you'd skip instead of asserting
[01:30:12] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[01:30:21] <ktt3ja> yea, I want to do something when path is a dir
[01:31:19] <tikue_> rusti: struct Foo; unsafe { &Foo as uint }
[01:31:20] -rusti- <anon>:5:30: 5:42 error: non-scalar cast: `&main::Foo` as `uint`
[01:31:20] -rusti- <anon>:5          struct Foo; unsafe { &Foo as uint }
[01:31:20] -rusti-                                        ^~~~~~~~~~~~
[01:31:20] -rusti- error: aborting due to previous error
[01:31:20] -rusti- application terminated with error code 101
[01:31:56] <tikue_> rusti: struct Foo; &Foo as *()
[01:31:56] *** Joins: Ralith (ralith@114DA04D.CD83ED0A.BCDF04A6.IP)
[01:31:56] -rusti- <anon>:5:21: 5:25 error: mismatched types: expected `*()` but found `&main::Foo` (expected () but found struct main::Foo)
[01:31:56] -rusti- <anon>:5          struct Foo; &Foo as *()
[01:31:56] -rusti-                               ^~~~
[01:31:57] -rusti- error: aborting due to previous error
[01:31:57] -rusti- application terminated with error code 101
[01:32:02] <tikue_> rusti: struct Foo; &Foo as *
[01:32:03] -rusti- <anon>:6:4: 6:5 error: expected type, found token RBRACE
[01:32:03] -rusti- <anon>:6     };
[01:32:03] -rusti-              ^
[01:32:04] -rusti- application terminated with error code 101
[01:33:11] *** Joins: Jesin (Jessin_@moz-AFC45767.cc.lehigh.edu)
[01:35:38] *** nrc|lunch is now known as nrc
[01:35:41] *** Joins: echristo (echristo@60A74940.D6CCE4AE.77834EAA.IP)
[01:38:36] *** Joins: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com)
[01:38:39] <dcrewi> can I assume that obvious tail-call optimizations happen?
[01:39:16] <pnkfelix> dcrewi: Depends on what you mean by "obvious."  strcat had a long dialogue with tikue about this last night
[01:39:25] <tikue_> yep
[01:39:28] <tikue_> the bottom line is
[01:39:32] *** Quits: dew1 (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com) (Ping timeout)
[01:39:34] <tikue_> well, i'll let strcat say the bototm line
[01:39:35] <cmr> (it was quite fascinating to follow too)
[01:39:40] <strcat> dcrewi: LLVM will do sibling call optimization when you have optimizations on
[01:39:51] <strcat> but it's not obvious when a function is truly tail recursive
[01:39:52] <tikue_> but there are a bunch of IFs
[01:40:10] <strcat> so, sibling call optimization means all the mutually recursive functions must have matching signatures
[01:40:19] <strcat> a function calling itself is the trivial case
[01:40:34] <strcat> and ofc... it has to be tail recursive, so it generally can't have any types with destructors in scope
[01:40:43] <tikue_> and it can't make any opaque function calls 
[01:40:46] <strcat> in some cases it might be able to see that you move from them in every branch
[01:40:48] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[01:40:53] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: Places to go, people to annoy)
[01:40:59] <strcat> tikue_: well, you can if you have no types with destructors in scope and it's clearly tail recursive
[01:41:10] <strcat> but any function call could unwind
[01:41:29] <strcat> anyway
[01:41:35] *** Joins: RADSR (RADSR@moz-1819769E.cpe.netcabo.pt)
[01:41:37] <RADSR> ÿ≥ŸÖŸéŸÄŸéŸëŸàŸèŸàŸèÿ≠ÿÆ Ã∑Ã¥ÃêÿÆ Ã∑Ã¥ÃêÿÆ Ã∑Ã¥ÃêÿÆ ÿßŸÖÿßÿ±ÿ™ŸäÿÆ Ã∑Ã¥ÃêÿÆ 
[01:41:38] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Input/output error)
[01:41:39] *** Quits: riley (riley@8BA43816.9AA11D69.65DDFA89.IP) (Client exited)
[01:41:39] *** Quits: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net) (Input/output error)
[01:41:39] *** Quits: tikue_ (tkuehn@296E74A0.D038900B.689607DE.IP) (Broken pipe)
[01:41:43] *** Joins: riley (riley@8BA43816.9AA11D69.65DDFA89.IP)
[01:41:43] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Client exited)
[01:41:46] *** Quits: etw (john@moz-D871A25B.nyc.res.rr.com) (Client exited)
[01:41:48] <strcat> if a function calls itself as the last expression and there are no types will destructors in scope, it will do tail call elim.
[01:41:51] *** Joins: tikue_ (tkuehn@296E74A0.D038900B.689607DE.IP)
[01:41:52] *** Joins: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net)
[01:42:28] <strcat> it will optimize in more cases than that but it's not always obvious
[01:42:29] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[01:42:39] <tikue_> speaking of which, i never figured out why my program was ice'ing
[01:43:06] <tikue_> https://gist.github.com/tikue/8bf1ccb9aadde0ff3bc5#file-tco-rs
[01:43:15] * tikue_ is bad at ice debugging :(
[01:44:09] <tikue_> it compiles (but obviously isn't correct) if the second case is removed and _ => () is put at the bottom
[01:46:17] <tikue_> rusti: [1].slice_from(1) == []
[01:46:32] -rusti- pastebinned 11 lines of output: http://ix.io/7Pi
[01:46:51] *** Joins: Shaladdle (Shaladdle@moz-424BC304.hsd1.pa.comcast.net)
[01:46:52] <tikue_> let v = [1]; v.slice_from(1) == []
[01:47:03] *** Joins: enticeing (user@CB864A86.D932A275.5037098C.IP)
[01:47:10] <tikue_> rusti: let v = [1]; v.slice_from(1) == []
[01:47:11] -rusti- true
[01:47:12] <enticeing> Hey aatch
[01:47:20] *** Joins: jgilbert_ (jgilbert@moz-7B0110AD.mv.mozilla.com)
[01:47:36] *** Quits: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com) (Ping timeout)
[01:47:48] *** Quits: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net) (Input/output error)
[01:47:51] *** Quits: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[01:47:54] <RADSR> ÿ≥ŸÖŸéŸÄŸéŸëŸàŸèŸàŸèÿ≠ÿÆ Ã∑Ã¥ÃêÿÆ Ã∑Ã¥ÃêÿÆ Ã∑Ã¥ÃêÿÆ ÿßŸÖÿßÿ±ÿ™ŸäÿÆ Ã∑Ã¥ÃêÿÆ 
[01:47:54] *** Quits: enticeing (user@CB864A86.D932A275.5037098C.IP) (Client exited)
[01:47:55] *** Quits: riley (riley@8BA43816.9AA11D69.65DDFA89.IP) (Client exited)
[01:47:55] *** Quits: tikue_ (tkuehn@296E74A0.D038900B.689607DE.IP) (Client exited)
[01:47:55] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Client exited)
[01:48:07] *** Joins: tikue_ (tkuehn@296E74A0.D038900B.689607DE.IP)
[01:49:08] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[01:49:13] <mark_edward> you know what's be sweet to go with sebcrozet's awesome work? a sound library in Rust
[01:49:15] <tautologico> so l33t h4x0r
[01:49:30] *** Quits: jgilbert_ (jgilbert@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[01:49:59] *** Joins: maxli (maxli@moz-6EADA619.cpe.net.cable.rogers.com)
[01:50:12] *** Quits: maxli (maxli@moz-6EADA619.cpe.net.cable.rogers.com) (Input/output error)
[01:50:22] *** Quits: eatkinson (eatkinson@moz-C96E3036.airbears.berkeley.edu) (Quit: eatkinson)
[01:52:07] <cmr> brson: can you kickban him?
[01:52:19] <RADSR> i just arab
[01:52:23] <RADSR> i so sorry
[01:52:28] <RADSR> my language crash shit compootar
[01:52:33] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[01:52:40] *** brson sets mode: +b *!*RADSR@*.cpe.netcabo.pt
[01:52:40] *** RADSR was kicked by brson (brson)
[01:53:28] *** Joins: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com)
[01:53:45] *** Joins: enticeing (user@CB864A86.D932A275.5037098C.IP)
[01:54:11] <enticeing> aatch: anyways, i'm not exactly sure how to run r_client.py or i'd probably make the changes myself
[01:56:08] *** Joins: etw (john@moz-D871A25B.nyc.res.rr.com)
[01:57:31] *** Joins: riley (riley@8BA43816.9AA11D69.65DDFA89.IP)
[01:57:50] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[01:58:35] *** Quits: ktt3ja (Mibbit@moz-6B6EE8C0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:00:52] *** Joins: ross (ross@moz-5EA04060.br.br.cox.net)
[02:02:00] *** Joins: fyolnish (fyolnish@moz-7B4E6E78.uqwimax.jp)
[02:08:12] *** Quits: fyolnish (fyolnish@moz-7B4E6E78.uqwimax.jp) (Client exited)
[02:10:20] *** Quits: MrByte (MrByte@moz-147070D0.chy-wy.client.bresnan.net) (Quit: )
[02:10:20] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[02:12:40] *** Joins: ChrisMorgan (chris@moz-BCC8D00A.its.monash.edu.au)
[02:12:59] *** Joins: mihneadb (mihneadb@moz-329F29A3.lightspeed.sntcca.sbcglobal.net)
[02:13:27] *** Quits: jdsanders (Adium@moz-84CB7548.hlrn.qwest.net) (Client exited)
[02:13:34] *** Joins: jdsanders (Adium@moz-84CB7548.hlrn.qwest.net)
[02:14:09] *** Joins: MrByte (MrByte@moz-147070D0.chy-wy.client.bresnan.net)
[02:14:53] *** Quits: robarnold (rob@BD56354E.DB510C09.6E370BFC.IP) (Ping timeout)
[02:17:02] *** Quits: sebcrozet (sebcrozet@moz-6DA639AF.w80-13.abo.wanadoo.fr) (Ping timeout)
[02:17:06] *** Joins: msingle (Thunderbir@moz-20675462.nrflva.fios.verizon.net)
[02:21:18] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[02:23:11] *** Quits: enticeing (user@CB864A86.D932A275.5037098C.IP) (Client exited)
[02:25:10] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Ping timeout)
[02:28:10] *** Quits: Ralith (ralith@114DA04D.CD83ED0A.BCDF04A6.IP) (No route to host)
[02:28:20] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[02:28:23] *** Joins: Ralith (ralith@114DA04D.CD83ED0A.BCDF04A6.IP)
[02:29:00] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[02:30:39] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[02:32:09] *** Joins: five (five@42F5F149.B0C59399.CD9327E5.IP)
[02:32:10] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[02:33:28] *** Quits: five (five@42F5F149.B0C59399.CD9327E5.IP) (Connection reset by peer)
[02:40:02] *** Quits: zz_kimundi (kimundi@moz-57175039.dip0.t-ipconnect.de) (Ping timeout)
[02:42:34] <mark_edward> any successfully compiled kiss3d from sebcrozet?
[02:42:41] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[02:42:46] <cmr> I did a while back.
[02:42:53] <cmr> Like, before it was publically announced.
[02:42:59] <jmgrosen> yeah, I have it working right now
[02:43:28] *** Joins: zz_kimundi (kimundi@moz-A6FA77E4.dip0.t-ipconnect.de)
[02:43:45] *** zz_kimundi is now known as kimundi
[02:44:26] <strcat> well that didn't work very well
[02:44:34] <strcat> forgot to do the resolve thing
[02:44:39] <strcat> /home/strcat/projects/rust/src/libstd/str.rs:878:14: 878:23 error: only `u8` can be cast as `char`, not `u16`
[02:44:41] <strcat> /home/strcat/projects/rust/src/libstd/str.rs:878             f(u as char);
[02:44:43] <strcat> ;p
[02:44:47] *** Quits: RMF (RMF@moz-5FC5A0D8.dsl.telepac.pt) (Ping timeout)
[02:46:15] <jmgrosen> also, pronouncing that line out loud may produce some slightly strange-sounding results :P
[02:46:43] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[02:46:43] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1401dd460 to 143c4e943: 02http://git.io/N3iJvQ
[02:46:43] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[02:46:45] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[02:46:45] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/4Dy8fg
[02:46:45] <ghrust> 13rust/06auto 144a18d46 15jmgrosen: Fixes #8881. condition! imports parent's pub identifiers
[02:46:45] <ghrust> 13rust/06auto 143830738 15bors: auto merge of #8963 : jmgrosen/rust/issue-8881, r=alexcrichton
[02:46:46] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[02:46:53] <jmgrosen> ah, cool!
[02:47:03] <jmgrosen> my second PR merged :)
[02:48:38] *** Joins: RMF (RMF@moz-BFEC31A2.dsl.telepac.pt)
[02:49:04] *** Joins: heftig (heftig@moz-DB953191.dip0.t-ipconnect.de)
[02:50:02] <strcat> rusti: 0x1_0000_u32 as char
[02:50:02] -rusti- '\U00010000'
[02:50:24] <strcat> rusti: '\x10000'
[02:50:24] -rusti- <anon>:4:12: 4:13 error: unterminated character constant
[02:50:25] -rusti- <anon>:4     let r = {
[02:50:25] -rusti-                      ^
[02:50:25] -rusti- application terminated with error code 101
[02:53:58] *** Quits: RMF (RMF@moz-BFEC31A2.dsl.telepac.pt) (Quit: Textual IRC Client: www.textualapp.com)
[02:56:00] <jfbk> just curious, what's the use case for the tcp patch that splits listening from accepting that landed today? 
[02:56:26] <engla> jmgrosen: the push to the auto branch is the start of the build and test run, and it will really merge into master if bors find that it passes
[02:56:35] <acrichto> brson: ping
[02:56:40] <jmgrosen> engla: yeah, I know, but close enough :P
[02:56:50] <engla> right
[02:56:56] <cmr> jfbk: one of the proprietary projects I worked on created the listening socket in the constructor of a Server object, but never actually accepted until placed into an event loop.
[02:58:00] <cmr> Not sure about the details of this patch or its intended usecases though.
[02:58:55] <Luqman> jfbk: cmr https://github.com/mozilla/rust/issues/8689 seems like it makes it easier to test TCP in the multithreaded case
[03:01:08] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[03:01:29] <MrByte> Does anyone know if this is intended behavior? https://gist.github.com/Mr-Byte/6432320
[03:02:02] <cmr> MrByte: yes, it is.
[03:02:13] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[03:02:22] <MrByte> Alright, thanks
[03:02:26] <cmr> MrByte: typedefs (type X = Y) does not reintroduce a namespace.
[03:02:42] <engla> did pcwalton want to fix that?
[03:02:52] <cmr> No, I thought he was strongly against it.
[03:02:53] <mark_edward> cmr: i have kiss3d, i successfully run `make deps` and `make` but when i try to `make examples` i get a lot of `undefined reference to glfw***` errors
[03:03:05] <MrByte> Just didn't expect it to do that, so I wanted to be sure it was intended before reporting it.
[03:03:24] <engla> hehe ok so the other way around
[03:03:44] <cmr> MrByte: afaict typedefs aren't that useful :\
[03:04:35] *** Joins: Nisstyre (wes@moz-7ED344EE.dsl.bell.ca)
[03:04:40] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[03:04:41] <MrByte> It mostly arose because I have some long, nested generics and wanted to do a typedef on them to make them more friendly, and when I couldn't call the function from the impl... I was mostly just surprised.
[03:04:58] <ChrisMorgan> Yep, making generics nicer is how I've used typedefs.
[03:05:17] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Client exited)
[03:05:19] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[03:06:19] *** Quits: Nisstyre (wes@moz-7ED344EE.dsl.bell.ca) (Ping timeout)
[03:06:59] *** Joins: Nisstyre (wes@moz-7ED344EE.dsl.bell.ca)
[03:08:27] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[03:09:08] *** Quits: Nisstyre (wes@moz-7ED344EE.dsl.bell.ca) (Ping timeout)
[03:10:42] *** Quits: sp3d (a@moz-6F12212B.fidnet.com) (Ping timeout)
[03:10:45] *** Joins: fyolnish_ (fyolnish@moz-BE2BAE5B.miinet.jp)
[03:11:09] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[03:14:33] <jfbk> Luqman: so the idea is that you can call listener.listen() and be happy that your server is up, then spin up a bunch of clients on other threads, then go back and call acceptor.accept()?
[03:15:17] *** Joins: pepper_chico (pepper_chi@14AC4DFD.704EE6B0.E4090502.IP)
[03:17:11] *** Quits: pepper_chico (pepper_chi@14AC4DFD.704EE6B0.E4090502.IP) (Quit: Textual IRC Client: www.textualapp.com)
[03:18:14] <acrichto> ChrisMorgan: ping
[03:18:20] <ChrisMorgan> acrichto: pong
[03:18:36] <acrichto> ChrisMorgan: I updated rust.vim awhile ago, and now when I edit rust files I'm getting errors like https://gist.github.com/alexcrichton/6432407
[03:18:44] <acrichto> does that just mean that my vim is outdated?
[03:18:58] <cmr> vim --version ?
[03:19:01] <ChrisMorgan> Oh yeah, I intended to fix that, didn't I.
[03:19:10] <cmr> I don't see that error
[03:19:11] <acrichto> 7.3 is the relevant number
[03:19:15] <cmr> ah
[03:19:16] <acrichto> it's just the default vim on osx
[03:19:17] <cmr> I'm 7.4
[03:19:41] <MrByte> Also, if I have a function pointer stored in a struct field, I can't call the function pointer like foo.bar();  I have to assign bar to a local variable, then call it that way.  It appears that the compiler is looking for an imply with a method named bar() on foo.
[03:19:53] <MrByte> impl, that is.
[03:20:02] <acrichto> MrByte: youc an do (foo.bar)()
[03:20:11] <MrByte> Aha, cool
[03:20:18] <strcat> why must so many things cast to char
[03:20:19] <acrichto> it looks sad, but that's the way to do it for now
[03:20:34] <MrByte> It's better than assigning it to a local variable.
[03:20:48] <acrichto> true
[03:20:52] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[03:21:00] <strcat> acrichto: it used to be foo.bar()
[03:21:07] <strcat> it was changed to (foo.bar)()
[03:21:10] <acrichto> whoa when?
[03:21:17] <strcat> a while ago, but I remember
[03:22:04] <tikue_> to disambiguate it?
[03:22:31] <tikue_> from method calls?
[03:23:01] <acrichto> tikue_: maybe at some point yeah, although I thought the consensus now was that it'd be nice to be able to do foo.bar()
[03:23:35] <tikue_> rusti: struct Foo; impl Foo { fn bar(&self) { println("bar!"); } } Foo.bar
[03:23:36] -rusti- <anon>:5:69: 5:76 error: attempted to take value of method `bar` on type `main::Foo` (try writing an anonymous function)
[03:23:36] -rusti- <anon>:5          struct Foo; impl Foo { fn bar(&self) { println("bar!"); } } Foo.bar
[03:23:36] -rusti-                                                                               ^~~~~~~
[03:23:36] -rusti- error: aborting due to previous error
[03:23:38] -rusti- application terminated with error code 101
[03:23:51] <tikue_> rusti: struct Foo; impl Foo { fn bar(&self) { println("bar!"); } } &Foo.bar
[03:23:51] -rusti- <anon>:5:70: 5:77 error: attempted to take value of method `bar` on type `main::Foo` (try writing an anonymous function)
[03:23:51] -rusti- <anon>:5          struct Foo; impl Foo { fn bar(&self) { println("bar!"); } } &Foo.bar
[03:23:52] -rusti-                                                                                ^~~~~~~
[03:23:52] -rusti- error: aborting due to previous error
[03:23:53] -rusti- application terminated with error code 101
[03:24:09] <acrichto> ChrisMorgan: I'm no vim expert by any means, but I'd be willing to r+ your vim changes. Did you want to make a commit for the `j` thing though?
[03:24:10] <tikue_> methods arent first class functions?
[03:24:19] <strcat> acrichto: you can have a field call foo and also a method called foo
[03:24:25] <strcat> called foo*
[03:24:36] <ChrisMorgan> I found on my Android/Ubuntu tablet which has Vim 7.3.286 or so it didn't have j, and no docs about when it was introduced.
[03:24:38] <acrichto> strcat: oh, then perhaps this is the best alternative
[03:24:47] <acrichto> ChrisMorgan: what is 'j'?
[03:24:47] *** Joins: eatkinson (eatkinson@moz-D382C38F.airbears.berkeley.edu)
[03:25:25] <ChrisMorgan> "Where it makes sense, remove a comment leader when joining lines."
[03:25:38] <cmr> It's very convenient.
[03:25:38] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[03:25:51] <acrichto> sounds handy
[03:25:52] *** Quits: eatkinson (eatkinson@moz-D382C38F.airbears.berkeley.edu) (Input/output error)
[03:26:01] *** Joins: eatkinson (eatkinson@moz-D382C38F.airbears.berkeley.edu)
[03:26:13] <tikue_> strcat: why can't you get a method by value? i.e. Foo.bar -- purely for disambiguity?
[03:26:25] <strcat> methods aren't objects
[03:26:45] <tikue_> but regular functions are?
[03:26:48] <strcat> yes
[03:26:49] <cmr> Hm, I think methods could be converted to a closure?
[03:27:01] <strcat> that's what the error msg suggests
[03:27:02] <tikue_> cmr:  you mean || Foo.bar()
[03:27:14] <cmr> tikue_: no, I mean making a closure directly out of a method
[03:27:19] <tikue_> cmr: how?
[03:27:24] *** Joins: RMF (RMF@moz-BFEC31A2.dsl.telepac.pt)
[03:27:28] <cmr> envp would be self, fnp would be the function pointer to the method
[03:27:32] <ChrisMorgan> (acrichto: you know why I took six minutes to continue to respond? I started writing but then my machine started running out of memory, so I quickly switched to tty1 and killed the rust build that I had incautiously started.)
[03:28:10] <tikue_> cmr: but how do you do it?
[03:28:22] <acrichto> that should totally be a feature, rust has a 10% chance at any time of spawning off a build of itself
[03:28:23] <cmr> tikue_: I don't think it can be expressed right now.
[03:28:27] <tikue_> ah, gotcha
[03:28:51] <cmr> Not 100% sure it's possible.
[03:29:09] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[03:30:39] *** Quits: fyolnish_ (fyolnish@moz-BE2BAE5B.miinet.jp) (Client exited)
[03:30:45] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[03:31:00] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[03:31:47] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[03:32:29] <ChrisMorgan> The formatoptions value j was added in Vim 7.3.541.
[03:33:27] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[03:34:19] <acrichto> how do I find my vim minor version number
[03:34:19] <strcat> I really hope this compiles now
[03:34:22] <strcat> so much unsound code
[03:35:12] <ChrisMorgan> acrichto: :version shows it
[03:35:23] <ChrisMorgan> As does vim --version.
[03:35:27] <acrichto> ChrisMorgan: weird, not for me
[03:35:39] <ChrisMorgan> If it shows just Vim 7.3 with no mention of any patches included, then you have vanilla 7.3 with no patches included.
[03:35:49] <acrichto> ChrisMorgan: https://gist.github.com/alexcrichton/6432511
[03:35:53] <acrichto> oh huh
[03:35:55] <acrichto> nvmd then
[03:36:16] <ChrisMorgan> Anyway, I've silenced the error for old Vim.
[03:36:35] <acrichto> if it's useful though, couldn't you have a version check?
[03:36:49] <ChrisMorgan> ?
[03:37:08] <acrichto> something like `if version > min; do the j thing; endif`
[03:38:07] <ChrisMorgan> You'd do that with feature detection. Don't think you can do feature detection on a 'fo' option (sure, on an option itself or a flag you can use has()). Version? Nah. Just try it and ignore any error.
[03:38:24] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[03:38:59] <acrichto> ah, nvmd then
[03:39:04] <ChrisMorgan> Anyway, you can now give an r+ if you'd like.
[03:39:45] *** Joins: dymk (dymk@D7ACE00F.DF3E3FB3.AC7F8427.IP)
[03:39:51] <acrichto> oh silent! is cool
[03:40:35] *** Quits: dymk (dymk@D7ACE00F.DF3E3FB3.AC7F8427.IP) (Quit: ZNC Bouncer Quitting)
[03:40:38] <acrichto> I'm not sure I entirely agree with the rainbow of colors that now come with pointer-type colors, but I'm certainly willing to try it out
[03:41:02] *** Quits: riley (riley@8BA43816.9AA11D69.65DDFA89.IP) (Client exited)
[03:41:07] <ChrisMorgan> That doesn't come from this pull request.\
[03:41:11] <acrichto> dbaupp: ping
[03:41:20] <strcat> imo we should stop trying to highlight functions
[03:41:23] <strcat> it doesn't work
[03:41:40] <strcat> enum Foo { Bar(int, int), Baz }
[03:41:44] <strcat> it highlights Bar
[03:41:50] *** Quits: eatkinson (eatkinson@moz-D382C38F.airbears.berkeley.edu) (Ping timeout)
[03:41:56] <strcat> unless we actually consider enum constructors functions
[03:42:05] <strcat> (they technically are, at a codegen level)
[03:42:16] *** Joins: eatkinson (eatkinson@moz-D382C38F.airbears.berkeley.edu)
[03:42:18] <ChrisMorgan> I considered that point and came to that conclusion...
[03:42:22] *** Joins: five (five@9500BE4B.C4AAC3ED.10BB00EE.IP)
[03:42:22] <acrichto> rusti: enum A { B(int) }; let a: &fn(int) -> A = B; a
[03:42:23] -rusti- fn(int) -> main::A
[03:42:28] <acrichto> strcat: ^
[03:42:44] <acrichto> also man that repr is cool
[03:42:46] <strcat> oh, I guess we do.
[03:42:55] <acrichto> although why is it missing &fn ?
[03:42:55] <ChrisMorgan> acrichto: you can also easily override highlighting yourself‚Äîe.g. ``hi link rustSigil Normal``
[03:43:06] <acrichto> ChrisMorgan: oh man you are a vim wizard
[03:43:28] * ChrisMorgan was fortunate enough to have a Vim-using father and so grew up with Vim
[03:44:29] *** Joins: m_kato (m_kato@moz-C286AD9A.bitcat.net)
[03:44:47] *** Quits: boredomist (user@moz-63CF9F31.res-cmts.sesp.ptd.net) (Ping timeout)
[03:44:54] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[03:45:18] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[03:45:39] *** Quits: eatkinson (eatkinson@moz-D382C38F.airbears.berkeley.edu) (Ping timeout)
[03:46:10] <ChrisMorgan> I still remember a time at the age of 9, a couple of years before I started using Vim: Dad was away and had a Vim session open. The command line was open with the contents ``:q``. I (who shouldn't have been touching it) pressed Enter. Looking back on it, I rather think my panic that Dad would notice what I'd done (Vim was gone!) was unreasonable.
[03:46:54] <bjz_> ha
[03:47:15] <bjz_> lesson one
[03:47:16] <acrichto> kids playing around with command lines has got to be one of the most dangerous and hilarous thing
[03:47:17] <bjz_> :)
[03:47:34] <strcat> ugh wtd
[03:47:36] <strcat> wtf*
[03:47:41] *** Joins: eatkinson (eatkinson@moz-DC7CD72F.airbears2.berkeley.edu)
[03:47:43] <strcat> constants don't work anymore
[03:47:46] * strcat sighs
[03:47:49] <bjz_> ?
[03:48:09] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[03:48:13] <bjz_> which? statics?
[03:48:13] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[03:48:18] <strcat> I mean from my changes
[03:48:21] <strcat> hm
[03:48:24] <bjz_> ah
[03:48:37] <ChrisMorgan> acrichto: yep. My elder brother once managed to do something to a Windows 3.11 computer so that it wouldn't start Windows. At the age of four.
[03:48:55] *** Joins: brson_ (brson@6A848D32.C1B840DD.76F66111.IP)
[03:49:13] <strcat> ah
[03:49:16] <strcat> easy peasy fix
[03:49:29] <tikue_> rusti: enum Foo { Bar(int) } Bar
[03:49:30] -rusti- fn(int) -> main::Foo
[03:49:41] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[03:49:54] <jmgrosen> wait, what?
[03:49:57] <jmgrosen> o_O
[03:50:08] <strcat> bjz_: https://paste.xinu.at/kNNk/ if you're curious what I'm banging my head against ;p
[03:50:09] <tikue_> rusti: enum Foo { Bar(int) } format!("{}", Bar)
[03:50:17] <tikue_> rusti: enum Foo { Bar(int) } format!("{:?}", Bar)
[03:50:27] <strcat> bjz_: makes 'integer as char', 'char + char', 'char - char', etc. no longer work
[03:50:27] -rusti- pastebinned 6 lines of output: http://ix.io/7Pn
[03:50:27] -rusti- ~"fn(int) -> main::Foo"
[03:50:34] <strcat> still allows 'char as integer' and 'u8 as char'
[03:50:40] <strcat> to make char sound.
[03:50:45] <jmgrosen> rusti: enum Foo { Bar { baz: int } } Bar
[03:50:46] -rusti- <anon>:5:39: 5:42 error: unresolved name `Bar`.
[03:50:46] -rusti- <anon>:5          enum Foo { Bar { baz: int } } Bar
[03:50:47] -rusti-                                                 ^~~
[03:50:47] -rusti- error: aborting due to previous error
[03:50:47] -rusti- application terminated with error code 101
[03:50:52] <strcat> but I'm not bothering to make the stdlib sound :s
[03:50:55] <strcat> that can be done later
[03:51:15] <acrichto> strcat: wasn't the result of the discussion earlier that 0x80 as char shouldn't be allowed?
[03:51:19] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[03:51:19] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/4Dy8fg
[03:51:19] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[03:51:26] <strcat> acrichto: it's a valid code point
[03:51:27] <tikue_> jmgrosen: presumably that doesn't work because it's not a function
[03:51:35] <tikue_> rusti: struct Foo(int); Foo
[03:51:35] -rusti- fn(int) -> main::Foo
[03:51:39] <acrichto> strcat: why not allow u8 and u16 then?
[03:51:50] <strcat> acrichto: I *am* allowing casts from u8
[03:51:50] <jmgrosen> tikue_: so tuple structs and enums are functions?
[03:51:55] <strcat> acrichto: casts from u16 aren't sound
[03:51:56] <ChrisMorgan> What's happening with printf! with regard to the new format!?
[03:51:57] <tikue_> jmgrosen: it apepars that way :P
[03:52:03] <jmgrosen> interesting
[03:52:07] <acrichto> strcat: how come u16 isn't sound?
[03:52:14] <tikue_> rusti: struct Foo(int); Foo(1)
[03:52:15] -rusti- main::Foo(1)
[03:52:15] <strcat> U+0000..U+D7FF and U+E000..U+10FFFF
[03:52:18] <acrichto> ChrisMorgan: print! and println! use format!
[03:52:26] <acrichto> ChrisMorgan: printf! and printfln! will be removed
[03:52:29] <strcat> are the valid ranges of unicode characters
[03:52:29] <ChrisMorgan> Oh, good. Much nicer name.
[03:52:32] <acrichto> strcat: ah
[03:52:46] <jmgrosen> fn return_thing<T>(f: &fn(int) -> T) -> T { f(5) } enum Foo { Bar(int) } return_thing(Bar)
[03:52:50] <strcat> acrichto: surrogate characters aren't valid characters
[03:52:55] <tikue_> ChrisMorgan: you won't be able to do println!(foo) though
[03:52:57] <strcat> they're special magic numbers for utf-16
[03:52:57] *** Joins: jwilm (Mibbit@moz-E101D73A.hsd1.ca.comcast.net)
[03:52:58] <jmgrosen> rusti: fn return_thing<T>(f: &fn(int) -> T) -> T { f(5) } enum Foo { Bar(int) } return_thing(Bar)
[03:52:59] -rusti- Bar(5)
[03:53:01] <jmgrosen> wow
[03:53:06] <acrichto> strcat: makes sense
[03:53:48] <tikue_> heh
[03:53:53] <engla> strcat: this is the change for is_utf8 https://github.com/blake2-ppc/rust/compare/no-surrogate
[03:54:01] <tikue_> rusti: struct Foo();
[03:54:02] -rusti- ()
[03:54:04] <tikue_> haha
[03:54:09] <tikue_> rusti: struct Foo(); Foo
[03:54:10] -rusti- main::Foo
[03:54:15] <tikue_> not a fn???
[03:54:21] <strcat> acrichto: we can make a u32 -> Option<char> fn
[03:54:49] <tikue_> rusti: struct Foo(); fn return_thing<T>(f: &fn() -> T) -> T { f() } return_thing(Foo)
[03:54:51] <acrichto> strcat: it seems for consistency we woudln't want u8 as char b/c nothing else exists, but it'd also probably be the most common conversion
[03:54:53] -rusti- pastebinned 9 lines of output: http://ix.io/7Po
[03:55:04] <strcat> acrichto: well I only allowed it to give me less work
[03:55:07] <strcat> I don't really care
[03:55:14] <strcat> acrichto: the error message is good, believe me :)
[03:55:21] * acrichto awaits
[03:55:27] <strcat>                             fcx.type_error_message(expr.span, |actual| {
[03:55:30] <strcat>                                 fmt!("only `u8` can be cast as `char`, not `%s`", actual)
[03:55:32] <strcat>                             }, t_e, None);
[03:55:37] <tikue_> so it seems `struct Foo();` is not &fn but `struct Foo(int);` is?
[03:56:01] *** Quits: five (five@9500BE4B.C4AAC3ED.10BB00EE.IP) (Ping timeout)
[03:56:03] <strcat> tikue_: the type is never a fn
[03:56:14] <tikue_> strcat: the type of Foo
[03:56:20] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[03:56:20] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/PgvBxg
[03:56:20] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[03:56:23] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[03:56:23] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/Nabl9g
[03:56:23] <ghrust> 13rust/06auto 145977376 15novalis: Test and document escaping on format!()
[03:56:23] <ghrust> 13rust/06auto 14523701a 15bors: auto merge of #8942 : novalis/rust/fmt, r=alexcrichton
[03:56:24] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[03:56:26] <strcat> struct Foo(int) is not a fn
[03:56:27] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[03:56:33] <tikue_> strcat: i'm talking about just Foo
[03:56:37] <strcat> neither is a fn
[03:56:43] <tikue_> rusti: struct Foo(int); Foo
[03:56:44] -rusti- fn(int) -> main::Foo
[03:56:47] <tikue_> looks like a fn to me
[03:56:48] <acrichto> strcat: I would put in a vote to removing it, but others should provide feedback probably
[03:56:51] <strcat> tikue_: that's not the type.
[03:57:00] <tikue_> strcat: what is it then?
[03:57:00] <strcat> tikue_: struct Foo(int); is a type
[03:57:11] <strcat> tikue_: it is the constructor function, it is *not* the type
[03:57:21] <strcat> foo(a, b, c) parses as a function
[03:57:27] <tikue_> right right, but not all structs have constructor functions
[03:57:28] <strcat> so tuple structs have to create a function
[03:57:46] <strcat> acrichto: well that can be a separate conversation
[03:57:51] <strcat> it's allowed right now and is sound
[03:57:55] <strcat> I'm just removing the unsound ones
[03:58:01] <strcat> error: internal compiler error: non-scalar type passed to compare_scalar_types
[03:58:03] * strcat cries
[03:58:33] *** Quits: eatkinson (eatkinson@moz-DC7CD72F.airbears2.berkeley.edu) (Quit: eatkinson)
[03:58:45] <strcat> oh good
[03:58:47] <strcat> another easy fix
[03:58:54] <acrichto> strcat: yeah I would only vote for consistency
[03:59:05] *** Quits: rust (Mibbit@moz-35DE53D0.bootp.virginia.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[03:59:05] <acrichto> not for soundness/unsoundness
[03:59:44] <tikue_> what is unsound?
[04:00:04] <strcat> casts of arbitrary integers to char
[04:00:08] <strcat> and arithmetic of char
[04:00:17] *** Quits: jdsanders (Adium@moz-84CB7548.hlrn.qwest.net) (Quit: Leaving.)
[04:00:27] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[04:00:34] <tikue_> by unsound, do you mean that it can fail? or that it returns something nonsensical?
[04:00:51] <strcat> memory unsafe when combined with the stdlib because char is assumed to be a valid code point
[04:01:01] <tikue_> oh
[04:01:07] <strcat> and that's a sane assumption, if only char was implemented properly
[04:01:15] <strcat> which is what I'm doing
[04:01:21] <tikue_> so you mean the fact casting to char can return something invalid, but it isn't caught or anything?
[04:01:22] <brson_> i'm also a little unclear on how it's unsound. char constants also aren't necessarily valid codeponits
[04:01:43] <strcat> brson_: char represents a valid code point
[04:01:48] <strcat> we encode them to utf-8
[04:02:05] <strcat> we assume they can be represented as utf-8, I did add one assertion to push_char but it's incomplete
[04:02:15] <brson_> there's nothing in the compiler that guarantees that a char is a valid codepoint that i'm aware of
[04:02:34] <strcat> brson_: yeah, that's why I'm changing it ;p
[04:03:02] <brson_> what char values are not valid unicode?
[04:03:04] <strcat> and adding u32 -> Option<char> checking for surrogates + over 21-bit
[04:03:34] <strcat> brson_: over 21-bit is invalid (would become overlong if you encoded them as utf-8 too, which is the memory unsafety)
[04:03:39] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Ping timeout)
[04:03:41] <strcat> + surrogates are invalid
[04:04:00] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[04:04:17] <strcat> although, some languages like python only prevent you from doing over 21-bit and don't worry about surrogates
[04:04:27] <strcat> because they're not a safety issue, just a unicode correctness one
[04:04:41] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[04:05:09] * strcat has no idea why '\n' stopped parsing :(
[04:05:18] <tikue_> rusti: '\n'
[04:05:19] -rusti- '\n'
[04:05:24] <strcat> /home/strcat/projects/rust/src/libextra/fileinput.rs:297:23: 297:27 error: expected one of `; }` but found `'\n'`
[04:05:27] <strcat> /home/strcat/projects/rust/src/libextra/fileinput.rs:297                 return '\n' as int;
[04:05:27] <tikue_> rusti: "\n"
[04:05:28] -rusti- "\n"
[04:05:29] <strcat> :s
[04:05:32] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[04:05:35] <tikue_> oh
[04:06:21] <strcat> it actually does parse if I do it alone
[04:06:40] <ChrisMorgan> OK, I'm transitioning from old formatting to new formatting, but this becomes rather difficult in my code generation stuff where in places I have a few stray { and }. Can I escape them in any way?
[04:07:04] <engla> yes ChrisMorgan with \\
[04:07:07] <acrichto> ChrisMorgan: \\{ sadly
[04:07:12] <acrichto> in theory it's just \{
[04:07:18] <tikue_> acrichto: why the two?
[04:07:21] <acrichto> as one would expect, but to escape the \ in a rust string you need \\
[04:07:29] <tikue_> o
[04:07:39] <tikue_> acrichto: then does that mean you need to do \\n as well
[04:07:49] <acrichto> tikue_: no, \n would still just work
[04:07:52] <tikue_> rusti: format!("hi\ndave")
[04:07:53] -rusti- ~"hi\ndave"
[04:07:58] <acrichto> you're telling the format string parser to escape the {
[04:08:03] <strcat> ah just silly parser bug
[04:08:09] <engla> rusti: print("\\n")
[04:08:10] -rusti- \n()
[04:08:13] <tikue_> rusti: println!("hi\ndave")
[04:08:15] -rusti- hi
[04:08:15] -rusti- dave
[04:08:15] -rusti- ()
[04:08:16] <acrichto> the format string parser expects to see a \ character, and the only way to give it to it is with a \\
[04:08:42] <acrichto> rusti: format!("\\{ \\} \\# \\\\")
[04:08:43] -rusti- ~"{ } # \\"
[04:08:51] <acrichto> rusti: println!("\\{ \\} \\# \\\\")
[04:08:51] -rusti- { } # \
[04:08:52] -rusti- ()
[04:09:03] <acrichto> four slashes hurts my eyes
[04:09:06] <aatch> acrichto, it might be worth treating \{ and \} as just what you normally expect in the parser.
[04:09:08] <strcat> rusti: -1 as char
[04:09:09] -rusti- '\xff'
[04:09:25] <acrichto> aatch: this is the format string parser though, which receives a string literal 
[04:09:25] <strcat> rusti: (-1 as char).to_str()
[04:09:26] -rusti- <anon>:5:9: 6:5 error: type `char` does not implement any method in scope named `to_str`
[04:09:26] -rusti- <anon>:5          (-1 as char).to_str()
[04:09:26] -rusti- <anon>:6     };
[04:09:26] -rusti- error: aborting due to previous error
[04:09:26] -rusti- application terminated with error code 101
[04:09:33] <acrichto> aatch: there's 2 levels of escaping going on which is sad
[04:09:49] <strcat> brson_: there are bigger holes anyway :(
[04:10:07] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[04:10:11] <strcat> rusti: let mut xs = ~"foo"; xs[2] = 12; xs
[04:10:12] -rusti- ~"fo\x0c"
[04:10:13] <acrichto> the best suggestion I've seen so far is %{ or %#, but I'm afraid that it would get confused with C-like printf things
[04:10:22] <strcat> that doesn't check if you're turning it into invalid utf-8
[04:10:33] <ChrisMorgan> Erk. format! moves rather than borrowing?
[04:10:48] <acrichto> ChrisMorgan: just committed a fix for that
[04:10:55] <tikue_> acrichto: \O/
[04:10:57] <acrichto> (sorry about that)
[04:10:58] <tikue_> that was boterhing me :P
[04:11:01] <aatch> acrichto, I know, but if we are sticking with that formatting, then having the parser *not* interpret \{ as an escape and instead as just '\{' might work.
[04:11:07] <acrichto> ChrisMorgan: https://github.com/mozilla/rust/commit/7e7024718a8f9668c3ae6f885ba77d2957362d46
[04:11:37] <engla> aatch: so the parser would accept \{ as a valid escape for \{?
[04:11:48] <acrichto> aatch: it seems like a nasty hack to change the grammar of string literals in the entire language to accomodate the format string syntax
[04:12:00] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[04:12:08] <tikue_> acrichto: agreed
[04:12:18] <doy> why can't the formatting syntax extensions just have their own parser?
[04:12:20] <ChrisMorgan> It was bothering me that it says it's moved, use "ref" to override... does that mean "ref x"? The format! rules don't accept "ref x".
[04:12:22] <doy> rather than using a string?
[04:12:34] <tikue_> ChrisMorgan: no it's a bad error msg
[04:12:37] <aatch> acrichto, well right now it'll just fail on an invalid escape.
[04:12:39] *** Joins: eatkinson (eatkinson@moz-DC7CD72F.airbears2.berkeley.edu)
[04:12:46] <acrichto> doy: coming from a C/C++ background people expect format strings to be actual strings
[04:12:53] <tikue_> acrichto: i think %{ is reasonable.
[04:12:56] <acrichto> doy: although you're right in that we require them all to be string literals...
[04:13:04] <acrichto> aatch: yeah
[04:13:11] <aatch> rusti: "\{"
[04:13:12] -rusti- <anon>:4:12: 4:13 error: unknown string escape: 123
[04:13:12] -rusti- <anon>:4     let r = {
[04:13:12] -rusti-                      ^
[04:13:12] -rusti- application terminated with error code 101
[04:13:17] <strcat> engla: can you link the surrogate char thing again?
[04:13:24] <acrichto> aatch: oht hat's a terrible span
[04:13:52] <engla> strcat: this branch (1 commit) https://github.com/blake2-ppc/rust/tree/no-surrogate
[04:13:54] <acrichto> ChrisMorgan: that's more of a reference to match patterns (to use ref)
[04:13:55] <doy> acrichto: coming from a c/c++ background, people expect printf style formatting
[04:14:03] <acrichto> doy: fair point
[04:14:05] <doy> also, you could make that same argument about regular expressions
[04:14:22] <doy> and i would certainly hope that a regex library wouldn't require using plain strings either
[04:14:23] <aatch> acrichto, well that too. But it's not actually that big of a hack to have "\{" "escape" to "\{"
[04:14:34] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[04:14:39] <acrichto> aatch: but then "\\{" == "\{" which seems odd
[04:14:57] *** Quits: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net) (Ping timeout)
[04:15:05] <aatch> acrichto, I guess. Maybe adding in some sort of raw-string literal would be a good idea.
[04:15:08] *** Quits: jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: packing)
[04:15:09] <acrichto> doy: I thought go did something cool here by having `-string literals as well
[04:15:24] <tikue_> aatch++
[04:15:27] <acrichto> aatch: yeah I wanted more impetus for a new type of string literal than just this though
[04:15:37] <tikue_> format!("""can't {escape} me now!""")
[04:15:45] <acrichto> plz no :(
[04:15:48] <tikue_> lol
[04:15:55] <aatch> acrichto, regexes are pretty much the reason.
[04:15:56] <acrichto> no offense to python at all
[04:16:06] *** Joins: five (five@9B2B20EC.C407240D.CD9327E5.IP)
[04:16:08] <tikue_> acrichto: what would you choose?
[04:16:09] <aatch> we will, eventually, have a regex library.
[04:16:13] <acrichto> doy: having a string syntax for regexes though is a good point
[04:16:26] <acrichto> tikue_: I would love to have a new string literal syntax
[04:16:35] <tikue_> acrichto: what syntax would you prefer
[04:16:37] <acrichto> but I'm not sure if rust-as-a-language would also want that
[04:16:39] <strcat> the C++11 ones are basically here docs, you pick the sequence marking the end
[04:17:01] <acrichto> tikue_: I want to keep \ as an escape character b/c that's what it always is, but I also don't want usage of it to be henioiusly silly
[04:17:16] <strcat> acrichto: how about making \\ compile to \\
[04:17:25] <strcat> and then adding all the string escape sequences to your parser
[04:17:25] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[04:17:28] <acrichto> but then how can you get "\" ?
[04:17:32] <strcat> acrichto: you don't
[04:17:38] <acrichto> :(
[04:17:47] <strcat> your parser becomes responsible for handling those
[04:17:56] <acrichto> strcat: what would an example be?
[04:17:57] <strcat> \n -> you handle it
[04:17:59] <aatch> There are a number of simple syntaxes. backticks (`), prefix the string with something (like 'r').
[04:18:08] <tikue_> pls not backticks
[04:18:15] <acrichto> tikue_: how come?
[04:18:16] <strcat> acrichto: you pass \n through as \n, you pass \\ through as \\
[04:18:20] <tikue_> too hard to parse with your eyes
[04:18:21] <strcat> acrichto: etc.
[04:18:28] <strcat> acrichto: you *only* add \{ and \}
[04:18:38] <strcat> doesn't that work?
[04:18:51] <acrichto> strcat: so format! would no longer take a string literal?
[04:18:53] *** Quits: relrod (relrod@moz-AABB5D31.redhat.com) (Ping timeout)
[04:19:00] <acrichto> tikue_: even if you don't have '-style strings, only "-stle strings?
[04:19:11] <strcat> acrichto: how do you currently escape {}
[04:19:14] <tikue_> acrichto: i suppose that's a good point...
[04:19:23] <acrichto> rusti: println!("\\{")
[04:19:24] -rusti- {
[04:19:24] -rusti- ()
[04:19:33] <acrichto> rusti: println!("\\{ \\\\")
[04:19:34] -rusti- { \
[04:19:34] -rusti- ()
[04:19:40] <acrichto> that just looks terrible
[04:19:46] <strcat> acrichto: I don't see what you're getting from doing it that way
[04:19:54] <aatch> strcat, the issue is that the parser/tokenizer evaluates the escapes.
[04:20:00] <strcat> you're neither getting normal escapes conveniently or {} escapes conveniently 
[04:20:12] <aatch> so the macro is way too late to affect it.
[04:20:13] <tikue_> wait
[04:20:18] <strcat> aatch: ah
[04:20:18] <tikue_> four backslashes to escape \?
[04:20:19] <acrichto> strcat: first the rust parser parses the string, so you need one layer of escapes, then the next layer of escapes is for the format string parser
[04:20:24] <acrichto> tikue_: yeah it's real bad :(
[04:20:34] <strcat> acrichto: can you just design it to not need double {{ and double }}?
[04:20:41] <tikue_> rusti: println!("\\");
[04:20:42] -rusti- <anon>:5:18: 5:22 error: expected an escape sequence, but format string was terminated
[04:20:42] -rusti- <anon>:5          println!("\\");
[04:20:42] -rusti-                            ^~~~
[04:20:42] -rusti- error: aborting due to previous error
[04:20:42] -rusti- application terminated with error code 101
[04:20:43] <acrichto> "\\\\" => rust => "\\" => (format syntax) => "\"
[04:20:43] <strcat> add another special character?
[04:20:58] <strcat> use % for the fancy things, require %%, {{ and }}
[04:20:59] <acrichto> strcat: what about format!("{0, select, other{{0}}}")
[04:21:01] <strcat> better than what it is now
[04:21:06] <strcat> acrichto: reserve another special character
[04:21:10] <tikue_> rusti: println!("\\\\");
[04:21:10] -rusti- \
[04:21:10] -rusti- ()
[04:21:19] <strcat> acrichto: ugly, but better than the current situation
[04:21:28] <acrichto> strcat: yeah but \ is the de-facto escape character almost everywhere (except printf)
[04:21:34] <strcat> acrichto: I'm not saying to change \
[04:21:42] <strcat> acrichto: anyway it's not the defacto escape character
[04:21:45] <strcat> python uses {{ and }}
[04:21:50] <strcat> C uses %%
[04:21:50] <acrichto> python doesn't have nested formats
[04:22:06] <strcat> acrichto: ok, so reserve another character
[04:22:20] <acrichto> so far % seems the best candidate for that
[04:22:34] <acrichto> %{, %}, %#, and %%
[04:22:48] <acrichto> which are all completely sane
[04:22:57] <strcat> would you need %{%} ?
[04:23:01] <acrichto> the drawback though is that % is associated with printf and this is explicitly not printf
[04:23:10] <acrichto> that would just naturally escape to {}
[04:23:22] <acrichto> it's not a full-blown tokenizer => parser
[04:23:29] <acrichto> just kinda an ad-hoc thing
[04:24:14] *** Joins: relrod (relrod@moz-AABB5D31.redhat.com)
[04:24:26] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[04:25:09] <strcat> huh
[04:25:13] <strcat> why does read_byte return int?
[04:25:24] <acrichto> what
[04:25:30] <acrichto> in std::io or std::rt::io
[04:25:30] <engla> it's a port of getc
[04:25:40] <engla> just the old version
[04:25:44] <acrichto> oh perhaps for -1
[04:25:55] *** Quits: eevee (eevee@moz-9A8E1439.evrt.wa.frontiernet.net) (Connection reset by peer)
[04:26:05] <strcat> we certainly do have a lot of incorrect code dealing with this stuff
[04:26:12] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (Quit: Coyote finally caught me)
[04:26:17] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[04:26:17] *** Joins: eevee (eevee@moz-9A8E1439.evrt.wa.frontiernet.net)
[04:28:04] *** Quits: SingingBoyo (Brandon@4DF3381A.51F4D838.4F048BDC.IP) (Quit: Leaving)
[04:28:04] *** Quits: five (five@9B2B20EC.C407240D.CD9327E5.IP) (Connection reset by peer)
[04:29:18] *** Joins: SingingBoyo (brandon@4DF3381A.51F4D838.4F048BDC.IP)
[04:31:19] <strcat> char is just being used as 'some integer type with sugar for initialization from a character constant'
[04:31:25] <strcat> so yay, transmutes everywhere
[04:31:27] <strcat> :(
[04:31:46] *** Quits: SingingBoyo (brandon@4DF3381A.51F4D838.4F048BDC.IP) (Ping timeout)
[04:31:54] *** Quits: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP) (Ping timeout)
[04:32:19] *** Joins: SingingBoyo (brandon@4DF3381A.51F4D838.4F048BDC.IP)
[04:34:57] <acrichto> :(
[04:35:15] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz‚Ä¶)
[04:37:24] <ChrisMorgan> Just think how much easier it would have been if UTF-8 had been invented earlier and UTF-16 had died out.
[04:38:55] *** Quits: six600110 (six600110@moz-2FA48202.neo.res.rr.com) (Ping timeout)
[04:39:46] <strcat> rusti: 0x10ffff as char
[04:39:47] -rusti- '\U0010ffff'
[04:39:57] <engla> utf-8 was designed in the early '90s
[04:40:30] *** Quits: tikue_ (tkuehn@296E74A0.D038900B.689607DE.IP) (Quit: tikue_)
[04:40:46] *** Joins: six600110 (six600110@moz-2FA48202.neo.res.rr.com)
[04:41:17] *** Quits: SingingBoyo (brandon@4DF3381A.51F4D838.4F048BDC.IP) (Ping timeout)
[04:41:28] *** Quits: Scaevolus (none@moz-C0499EDF.hsd1.wa.comcast.net) (Quit: quitting)
[04:41:29] *** Joins: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP)
[04:42:34] *** Joins: SingingBoyo (brandon@4DF3381A.51F4D838.4F048BDC.IP)
[04:43:58] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[04:44:45] <brson_> ChrisMorgan: I see test_connection_12/13/14/8 all failing. Is there an obvious solution? Did I break something with my patches?
[04:44:54] <ChrisMorgan> brson_: no, that's my fault.
[04:45:03] <ChrisMorgan> It's a design flaw with my LWS collapsing.
[04:45:09] <brson_> Can I mark them #[ignore]?
[04:45:15] <ChrisMorgan> Probably a good plan.
[04:45:33] <strcat> engla: so you just need to check for x >= 0xD800 && x <= 0xDFFF, right?
[04:45:37] <strcat> and that's invalid
[04:46:21] <strcat> also
[04:46:27] <engla> yes
[04:46:35] <strcat> 0xffff and 0xfffe seem forbidden?
[04:46:47] *** Joins: jstevans (Instantbir@moz-8600B6E4.bootp.virginia.edu)
[04:47:15] <strcat> FFFE and FFFF are not unassigned in the usual sense, but guaranteed not to be a Unicode character at all. They can be used to guess a text's encoding scheme, since any text containing these is by definition not a correctly encoded Unicode text.
[04:49:07] <strcat> engla: http://ix.io/7Pr what I have
[04:49:21] <ChrisMorgan> brson_: the problem is the way I can only cope with pushing one byte back (which I do in the LWS code), but I end up needing two in this one place. I do have a solution in mind, which involves restructuring the LWS collapsing to yield the space at the *start* of the collapsing rather than the *end*, so that I don't need to store the next byte there, leaving it free for the other one.
[04:49:58] <brson_> ChrisMorgan: i sent you another pr
[04:50:05] <strcat> unicode is so weird :(
[04:50:06] <ChrisMorgan> Then too, I'm not sure whether LWS collapsing is the best plan. It leads to a little bit of standards non-compliance with asctime dates at present.
[04:50:06] <engla> sounds good. 'i == 0xFFF'
[04:50:16] <strcat> engla: heh typo
[04:50:41] *** Joins: jdm (jdm@moz-F20C695E.dsl.teksavvy.com)
[04:50:41] *** ChanServ sets mode: +o jdm
[04:50:44] <strcat> anyway I'm sort of haphazardly porting the existing stdlib code...
[04:50:47] <brson_> ChrisMorgan: what does lws stand for?
[04:50:51] <ChrisMorgan> Linear White Space
[04:50:58] <strcat> some to transmutes, some to 'as u8 as char' and some to from_u32 based on what I think they need.... :(
[04:51:23] <strcat> ofc they could use from_u32(x).unwrap() instead of transmute
[04:51:30] <ChrisMorgan> Multiple spaces/tabs, mostly, but it can also have CR LF in the middle of it.
[04:52:48] *** Quits: etw (john@moz-D871A25B.nyc.res.rr.com) (Ping timeout)
[04:52:58] <strcat> we really need byte literals
[04:53:42] <strcat> bytes! is too inconvenient/obscure so it's not being used
[04:53:49] <engla> Noncharacters. Sixty-six code points are not used to encode characters. Noncharacters
[04:53:52] <engla> consist of U+FDD0..U+FDEF and any code point ending in the value FFFE16 or FFFF16‚Äî
[04:53:55] <engla> that is, U+FFFE, U+FFFF, U+1FFFE, U+1FFFF, ... U+10FFFE, U+10FFFF. (See
[04:53:58] <engla> Section 16.7, Noncharacters.)
[04:54:00] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[04:54:19] *** Quits: eatkinson (eatkinson@moz-DC7CD72F.airbears2.berkeley.edu) (Quit: eatkinson)
[04:54:29] <strcat> engla: yeah but only FFFE and FFFF are supposed to be forbidden afaict
[04:54:32] <strcat> and surrogates
[04:55:49] *** Joins: five (five@BDEFD043.B1FD3B42.4DD432BA.IP)
[04:55:50] <engla> ok I'll look more but maybe 0xFFFE should be treated like the other noncharacters, i.e. be accepted in utf-8
[04:55:51] <strcat> noncharacters are allowed to be mapped to utf-8 except for surrogates + those 2
[04:55:56] <acrichto> brson_: would you have any insight on https://github.com/mozilla/rust/issues/8969 ?
[04:56:03] <strcat> engla: no it's not supposed to be
[04:57:38] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[04:58:05] <strcat> anyway don't know for sure if those 2 are supposed to be forbidden :(
[04:58:15] *** Quits: five (five@BDEFD043.B1FD3B42.4DD432BA.IP) (Connection reset by peer)
[04:58:33] <strcat> oh it seems that's wrong info
[04:58:38] <strcat> that's what I get for trusting glibc
[04:59:03] <strcat> engla: http://www.unicode.org/faq/private_use.html#sentinel6
[04:59:24] <ChrisMorgan> strcat: yes, we do need byte literals. Can you implement them for tomorrow please?
[04:59:29] <strcat> heh
[04:59:45] *** Joins: eatkinson (eatkinson@moz-DC7CD72F.airbears2.berkeley.edu)
[04:59:48] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[04:59:49] <strcat> ChrisMorgan: if I felt like it ;p
[05:00:15] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[05:00:26] *** Quits: six600110 (six600110@moz-2FA48202.neo.res.rr.com) (Ping timeout)
[05:00:33] <engla> strcat: ok great, so we don't have to exclude them I guess
[05:01:08] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[05:01:08] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/Nabl9g
[05:01:08] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[05:01:30] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[05:01:46] *** Joins: tikue_ (tkuehn@296E74A0.D038900B.689607DE.IP)
[05:01:47] <jwilm> is there no way to initialize a struct without a comprehensive field list?
[05:02:15] <jdm> jwilm: you can initialize it from another one and list only certain fields to modify
[05:02:34] <tikue_> jdm: whoa, what?
[05:02:36] <jdm> and use can initialize it with uninit() and memcpy into it if you're careful
[05:02:38] <brson_> acrichto: no :( it's distressing. concurrency bugs are the worst
[05:02:52] <acrichto> yeah :(, reproduction locally would be nice
[05:02:54] <brson_> i'll try to get back to the scheduler soon
[05:02:56] <jdm> tikue_: it's called functional update or something
[05:03:17] <acrichto> brson_: no worries, just wanted to make sure awareness was present
[05:03:23] <acrichto> @bors:retry is convenient
[05:03:44] <aatch> jdm, I think so, we nicked it from Haskell's records afaict
[05:03:48] <jdm> tikue_: let base = Point3d {x: 1, y: 2, z: 3};
[05:03:49] <jdm> Point3d {y: 0, z: 10, .. base};
[05:04:00] <tikue_> wow!
[05:04:01] <sfackler> is there any way to do something like trait Foo<B: Bar> { fn foo<'a>(&'a self) -> B<'a> } currently?
[05:04:03] <tikue_> i never knew about that
[05:04:04] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz‚Ä¶)
[05:04:08] <tikue_> @_@
[05:04:10] <jdm> from the manual: "A structure expression can terminate with the syntax .. followed by an expression to denote a functional update."
[05:04:14] <jack> jdm: i didn't know about that either. reminds me of Erlang record syntax.
[05:04:45] <jack> foo#Foo{bar=Bar}
[05:05:11] <tikue_> rusti: struct Foo { a: int, b: int, c: int } let foo = Foo { a: 1, b: 2, c: 3 }; let bar = Foo { .. foo }; bar
[05:05:11] -rusti- <anon>:5:97: 5:98 error: expected `;` but found `{`
[05:05:11] -rusti- <anon>:5          struct Foo { a: int, b: int, c: int } let foo = Foo { a: 1, b: 2, c: 3 }; let bar = Foo { .. foo }; bar
[05:05:12] -rusti-                                                                                                           ^
[05:05:12] -rusti- application terminated with error code 101
[05:05:31] <engla> the unicode docs are so good
[05:05:42] <engla> "Table 3-7. Well-Formed UTF-8 Byte Sequences
[05:05:47] <jack> tikue: you should file that. having nullary ones work would be helpful for macros.
[05:05:51] <jwilm> @jdm: where can I read about the use/uninit()?
[05:05:52] <tikue_> rusti: struct Foo { a: int, b: int, c: int } let foo = Foo { a: 1, b: 2, c: 3 }; let bar = Foo { a: 0, .. foo }; bar
[05:05:53] -rusti- main::Foo{a: 0, b: 2, c: 3}
[05:05:58] <engla> now the table agrees with is_utf8 with the surrogates gone
[05:06:00] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[05:06:00] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/xSOX5w
[05:06:00] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[05:06:03] *** Joins: Uther (Instantbir@moz-1B244B05.hfc.dyn.abo.bbox.fr)
[05:06:04] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[05:06:04] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/tkqZ9Q
[05:06:04] <ghrust> 13rust/06auto 14aeb2f88 15Alex Crichton: Raise the file descriptor limits when running compiletest...
[05:06:04] <ghrust> 13rust/06auto 141611e7b 15bors: auto merge of #8943 : alexcrichton/rust/issue-8904, r=brson...
[05:06:05] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[05:06:17] <tikue_> jack: i'll check if it's already an issue
[05:06:47] * jdm tries to remember where init() is located
[05:07:01] *** Quits: aatch (aatch@moz-B437F499.pocketrent.com) (Ping timeout)
[05:07:07] <jdm> I thought it was std::util
[05:07:16] <jwilm> I'll take a look
[05:07:36] <engla> it's in intrisics
[05:07:47] <engla> std::unstable::intrinsics
[05:07:55] *** Joins: sankha93 (Instantbir@CAF6D3FF.9C875DCD.9105FBCF.IP)
[05:08:02] <jwilm> thanks
[05:09:35] *** Joins: etw (john@moz-D871A25B.nyc.res.rr.com)
[05:09:50] <strcat> init/uninit aren't there to provide convenient initialization though
[05:10:13] <tikue_> jack: wouldn't it be better to just use clone() ?
[05:10:28] <strcat> they're completely unsafe and exist for low-level hacks
[05:10:30] <tikue_> maybe it shouldn't be idiomatic to do let foo = Foo { .. other_foo }
[05:10:38] <jack> tikue: so if you pass the updates as macro arguments, you need a big if for if there are 0 of them? that seems sub-par
[05:10:44] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[05:10:46] <tikue_> ah
[05:10:48] <tikue_> yes that's true
[05:10:56] <jack> tikue: i don't think you should ever use it when you are writing code by hand
[05:11:05] <tikue_> fair enough
[05:11:39] <jack> it's like allowing the extra ',' after the last struct field, etc
[05:11:59] <jack> it's so much better when you don't have to deal with a special case at the end
[05:12:23] <tikue_> tru
[05:12:27] <tikue_> e
[05:12:28] <jwilm> Well, I've got a stream of binary records (~3kb/ea) which inflates to a struct with about 170 fields. init() + memcpy() seem to be the easiest way to deal with it
[05:12:56] <tikue_> jack: what would you call this? functional update with no changed values?
[05:13:00] *** Joins: aatch (aatch@moz-B437F499.pocketrent.com)
[05:13:56] <strcat> jwilm: you can use init() if they're all primitive integers types
[05:14:38] <strcat> anyway hard to say what the best way to do it would be without having all the details
[05:16:12] *** Joins: six600110 (six600110@moz-2FA48202.neo.res.rr.com)
[05:16:57] <jack> tikue: or "empty functional update"
[05:16:59] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[05:17:19] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[05:18:03] <tikue_> ah yes
[05:19:03] *** Joins: sebcrozet (sebcrozet@moz-C27D92D8.w193-252.abo.wanadoo.fr)
[05:19:37] <ChrisMorgan> brson_: I've added you as a collaborator on chris-morgan/rust-http, feel free to push things directly to it.
[05:20:44] <jwilm> strcat: thanks. I'm having difficulty seeing a concise way to make it happen. Struct with only primitive types (u8, u32, i8/16/32, f32/64 and some arrays thereof) populated from a bitstream. This would be a simple memcpy or read to a (void*) struct reference in C.
[05:20:52] <brson_> ChrisMorgan: ooh, risky. thanks, I'll try not to muck things up too bad
[05:21:18] <strcat> jwilm: ptr::copy_nonoverlapping_memory
[05:21:20] <tikue_> rusti: struct Foo { bar: int, baz: int } let foo = Foo { bar: 0, baz: 1 }; let foo_clone = Foo { bar: foo.bar, ..foo };
[05:21:21] -rusti- <anon>:5:81: 5:90 warning: unused variable: `foo_clone` [-W unused-variable (default)]
[05:21:21] -rusti- <anon>:5          struct Foo { bar: int, baz: int } let foo = Foo { bar: 0, baz: 1 }; let foo_clone = Foo { bar: foo.bar, ..foo };
[05:21:21] -rusti-                                                                                           ^~~~~~~~~
[05:21:21] -rusti- ()
[05:21:24] <strcat> jwilm: that's memcpy
[05:22:09] <strcat> you'll have to be careful that the right amount of data is there to copy ofc
[05:22:22] * ChrisMorgan likes distributed version control systems
[05:22:55] <jwilm> Thanks for the pointer and the warning
[05:37:09] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz‚Ä¶)
[05:39:40] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[05:42:00] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[05:42:06] *** Quits: jstevans (Instantbir@moz-8600B6E4.bootp.virginia.edu) (Ping timeout)
[05:43:26] *** Quits: Jesin (Jessin_@moz-AFC45767.cc.lehigh.edu) (Ping timeout)
[05:43:33] *** Joins: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com)
[05:44:12] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[05:47:31] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Quit: Leaving)
[05:47:46] <dbaupp> acrichto: pong
[05:47:57] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[05:48:27] *** Quits: eatkinson (eatkinson@moz-DC7CD72F.airbears2.berkeley.edu) (Quit: eatkinson)
[05:48:42] <strcat> this is really annoying me now ;[
[05:49:22] <strcat> we use invalid escape codes somewhere
[05:49:29] <strcat> so ofc now it's failing and causing an ICE
[05:49:48] <SingingBoyo> does rustc do tail-call optimization?
[05:50:02] <strcat> when possible
[05:50:05] <strcat> LLVM does tail call elimination for sibling calls
[05:50:14] <strcat> if you have optimizations enabled, it will do it
[05:50:20] <mm> I thought there was some calling convention reason we didn't?
[05:50:32] <strcat> sibling call optimization != general tail call optimization
[05:50:35] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[05:50:38] <strcat> the function signatures have to match
[05:50:58] <strcat> LLVM's general tail call optimization only works on certain architectures, not cross-crate and has a performance impact
[05:51:34] <dbaupp> strcat: you could probably write this tco spiel into a faq page on the wiki
[05:51:45] <mm> https://github.com/mozilla/rust/issues/217 has most of the information I was thinking of
[05:51:59] <acrichto> dbaupp: did you mean to close 3360 ?
[05:52:04] *** Joins: zeuxcg (zeuxcg@moz-80D1F912.hsd1.ca.comcast.net)
[05:52:12] <dbaupp> https://github.com/mozilla/rust/wiki/Doc-language-FAQ
[05:52:28] <strcat> doesn't really seem like a language issue to me
[05:52:40] <strcat> you can pass -tailcallopt to llvm if you desire, and have tail call optimization
[05:52:42] <dbaupp> acrichto: no; I didn't feel comfortable making the decision
[05:52:59] <strcat> rustc has --llvm-args now
[05:53:00] <acrichto> dbaupp: oh ok, just wanted to make sure
[05:53:11] <acrichto> and --passes
[05:53:17] <acrichto> well, non-overwriting --passes
[05:53:19] <strcat> tailcallelim is on by default though
[05:53:23] <dbaupp> strcat: oh, neat; well, write it somewhere so you can link to it, rather than writing it out n times.
[05:53:26] <strcat> it just only works for sibling calls
[05:53:30] * strcat shrugs
[05:54:01] <strcat> rustc is the same as clang here
[05:54:13] <dbaupp> (given this is question has been asked at least 3 times in the last 24 hours)
[05:54:16] <dbaupp> s/ is//
[05:54:21] <mm> rust has unwinding on windows now, right?
[05:54:29] <dbaupp> believe so
[05:54:32] <mm> if so, Doc-language-FAQ needs updating
[05:55:00] <strcat> the thing is no one is actually going to read that wiki page ;p
[05:55:19] <dbaupp> strcat: but we can all link to it
[05:56:43] *** Quits: SingingBoyo (brandon@4DF3381A.51F4D838.4F048BDC.IP) (Ping timeout)
[05:56:55] * strcat is getting really annoyed by how flimsy rustc is :(
[05:57:06] <dbaupp> acrichto: for, https://github.com/mozilla/rust/pull/8944, could you add a `depth` field to the struct, and error if you encounter a } with depth == 0?
[05:57:11] *** Joins: Lovely_Words (maybe_1_da@A72FBFA7.6D9BAB03.D453E46F.IP)
[05:57:11] <strcat> there are really a ridiculous # of soundness bugs related to this
[05:57:17] <strcat> you'd think our str wasn't unicode at all
[05:57:30] *** Joins: SingingBoyo (brandon@4DF3381A.51F4D838.4F048BDC.IP)
[05:57:41] <acrichto> dbaupp: I could indeed, I like that
[05:58:51] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[05:59:05] *** Joins: Jesin (Jessin_@moz-AFC45767.cc.lehigh.edu)
[05:59:23] <strcat> hm
[06:00:03] *** Quits: Lovely_Words (maybe_1_da@A72FBFA7.6D9BAB03.D453E46F.IP) (Ping timeout)
[06:00:30] <tikue_> dbaupp: there's probably a page already, rust could just have a page called "useful links"
[06:00:36] <tikue_> and have information about llvm and such
[06:00:41] <tikue_> links to information rather
[06:01:54] <strcat> dbaupp: can just link to http://llvm.org/docs/CodeGenerator.html#tail-call-optimization and http://llvm.org/docs/CodeGenerator.html#sibling-call-optimization
[06:02:48] <acrichto> dbaupp: just updated
[06:03:21] <acrichto> dbaupp: actually amending commit message now
[06:03:23] <sfackler> rusti: trait Foo {} trait Bar<F: Foo> { fn bar<'a>(&'a self) -> F<'a>; }
[06:03:25] -rusti- <anon>:5:66: 5:71 error: region parameters are not allowed on this type
[06:03:25] -rusti- <anon>:5          trait Foo {} trait Bar<F: Foo> { fn bar<'a>(&'a self) -> F<'a>; }
[06:03:25] -rusti-                                                                            ^~~~~
[06:03:26] -rusti- error: aborting due to previous error
[06:03:26] -rusti- application terminated with error code 101
[06:03:33] <sfackler> is there any way to do something like that?
[06:03:56] <sfackler> I'm okay restricting F to impls of Foo that have lifetime parameters
[06:04:03] <sfackler> *okay with
[06:04:49] *** Joins: jaen (jaen@FB01674D.56B727FE.4B52F012.IP)
[06:05:10] <acrichto> sfackler: that is a good question... Not that I know of, and I'm not aware of any discussion about making that possible, perhaps open an issue?
[06:06:00] <sfackler> it seems like it'd probably have to depend on https://github.com/mozilla/rust/issues/5922
[06:07:01] *** Quits: sebcrozet (sebcrozet@moz-C27D92D8.w193-252.abo.wanadoo.fr) (Quit: Gone)
[06:07:07] <strcat> scan_numeric_escape
[06:07:19] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[06:07:50] * strcat sighs
[06:08:26] *** Quits: brson_ (brson@6A848D32.C1B840DD.76F66111.IP) (Quit: leaving)
[06:11:05] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[06:11:05] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/tkqZ9Q
[06:11:05] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[06:11:20] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[06:13:04] <strcat> /home/strcat/projects/rust/src/libstd/unicode.rs:60:8: 60:9 error: illegal numeric character escape
[06:13:07] <strcat> /home/strcat/projects/rust/src/libstd/unicode.rs:60         ('\ud800', '\udfff')
[06:13:09] <strcat>                                                             ^
[06:13:11] <strcat> :|
[06:13:55] <strcat> so um, what the heck do I do about all this invalid code?
[06:13:58] <strcat> this looks autogenerated
[06:14:01] <strcat> there's no way a person wrote this
[06:15:22] <strcat> d800 is a surrogate :|
[06:15:57] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[06:15:58] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/vce0DQ
[06:15:58] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[06:16:01] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[06:16:01] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/7Ts-qA
[06:16:01] <ghrust> 13rust/06auto 14877e7f3 15Seo Sanghyeon: Correctly determine OS to xfail in cross build
[06:16:01] <ghrust> 13rust/06auto 1464ff315 15bors: auto merge of #8950 : sanxiyn/rust/cross-xfail, r=brson
[06:16:02] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[06:16:53] <engla> strcat: there is a category for the surrogates, Cs
[06:17:05] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[06:17:07] <dbaupp> strcat: generated by etc/unicode.py
[06:17:09] <strcat> yes but they aren't valid code points so it has to omit that
[06:18:08] * strcat cries
[06:18:45] <bjz_> hah
[06:19:01] * bjz_ pats strcat on the back
[06:19:09] <strcat> dbaupp: how do I make it generate
[06:19:12] <strcat> just run it?
[06:19:18] *** Joins: NewGuy (Mibbit@moz-E759CEF9.resnet.usf.edu)
[06:19:27] *** Quits: mihneadb (mihneadb@moz-329F29A3.lightspeed.sntcca.sbcglobal.net) (Input/output error)
[06:19:33] <bjz_> NewGuy: hullo! are you new?
[06:20:03] <NewGuy> bjz_: Somewhat! Lurked for a while, but I've asked a few questions here
[06:20:32] <NewGuy> Speaking of questions: Is it true? Can I finally use mingw64 with SEH exceptions to compile Rust!?
[06:20:33] <strcat> dbaupp: alright it's totally possible it will work now
[06:20:40] <bjz_> NewGuy: oh good. was wondering if I should take your name literally :P
[06:20:50] *** Joins: fabiand (fabiand@moz-D0902417.adsl.alicedsl.de)
[06:21:00] * bjz_ uses OSX, and therefore not of much use
[06:21:13] * mm uses windows, but not for rust
[06:21:18] <strcat> I don't think rust will ever work properly on windows due to segmented stacks, based on what I read after someone told me about it
[06:21:21] <bjz_> NewGuy: what is an SEH exception?
[06:21:28] <bjz_> strcat: O_O
[06:21:36] <mm> maybe I should just become the rust windows fanatic
[06:21:42] <NewGuy> bjz_: The only alternative to sljl on Win64
[06:21:51] <bjz_> strcat: games?!
[06:22:12] <strcat> bjz_: well as long as you don't call any modern windows API using exceptions internally
[06:22:14] <strcat> ;p
[06:22:18] <NewGuy> strcat: Well the latest LLVM update/rust update says in the issue report that mingw64 support added, segmented stacks working, and SEH exception compatible...?
[06:22:27] <bjz_> strcat: oh
[06:22:47] <strcat> NewGuy: as long as nothing throws internally, because rust doesn't respect the stack and calling conventions required
[06:22:48] <bjz_> strcat: what about something like glfw?
[06:22:53] <strcat> bjz_: don't know
[06:22:57] <bjz_> :P
[06:23:04] <strcat> but you have to use the windows fibers API apparently, you can't roll your own
[06:23:07] <NewGuy> strcat: Windows API uses exceptions internally? Well shit - I've been doing something wrong.
[06:23:08] <strcat> Go has this issue too
[06:23:08] *** Quits: sankha93 (Instantbir@CAF6D3FF.9C875DCD.9105FBCF.IP) (Quit: Gone to save the world!)
[06:23:27] <bjz_> arrrgh why you weird windows
[06:23:33] * bjz_ shakes fist
[06:23:52] <NewGuy> bjz_: Unfortunately, many of us are stuck over here... Pray for us.
[06:23:57] <bjz_> :(
[06:24:10] <bjz_> NewGuy: they will be most of my users, unfortunately
[06:24:43] <strcat> bjz_: https://github.com/mozilla/rust/issues/3445
[06:25:05] <strcat> it's nice that everything already seems to be reported
[06:25:08] <strcat> ;p
[06:25:09] <bjz_> NewGuy: at least for the foreseeable future, barring the extremely remote possibility of a mass exodus to ubuntu
[06:25:36] <strcat> ideally no since ubuntu is a terrible distribution ;p
[06:25:46] <NewGuy> bjz_: Woah, woah, woah. What about Manjaro? That's a distro that doesn't suck!
[06:26:02] <strcat> manjaro is awful for other reasons ;)
[06:26:15] <bjz_> strcat: yep. but it's the most user friendly, and at least they think about design
[06:26:24] <NewGuy> strcat: You wanna tumble!? I'll tumble!
[06:26:31] <strcat> manjaro doesn't have security updates and don't use the latest releases, so they have a 3-12 week security hole window
[06:26:58] <NewGuy> strcat: A hole that I've never had attacked since I don't use Manjaro on high-security systems... Just like I don't use Debian on my testbox
[06:27:03] <SingingBoyo> Hey don't bash it I'm using ubuntu and looking at writing a bunch of docs for you people if I get the chance.
[06:27:14] *** Quits: tikue_ (tkuehn@296E74A0.D038900B.689607DE.IP) (Quit: tikue_)
[06:27:18] <strcat> SingingBoyo: I don't have any problem with ubuntu users ;p, just ubuntu
[06:27:31] * bjz_ sighs
[06:27:36] * NewGuy worships SingingBoyo.
[06:27:54] <bjz_> NewGuy: Manjaro looks cool
[06:27:58] <SingingBoyo> NewGuy: don't worship me yet.  Having me writing docs could go poorly.
[06:28:29] * NewGuy changes his focus of worship back to a certain flying food.
[06:28:43] <NewGuy> bjz_: It's my favorite distro when I use one.
[06:28:44] <sfackler> acrichto: https://github.com/mozilla/rust/issues/8973 if you're interested
[06:29:15] <bjz_> NewGuy: there was also this one - shame it borrows a little *too* heavily from OSX: http://elementaryos.org/
[06:29:31] <NewGuy> My only problem with Linux is -> Windows 8 feels better lately... And I feel kind of like eating my own face for saying that.
[06:30:00] <NewGuy> bjz_: My girlfriend adores EOS. I showed it to her the other week and she begged me to put it on her laptop. 
[06:30:27] <bjz_> NewGuy: does she? how does it sit with her now that she uses it?
[06:30:41] * bjz_ is curious
[06:31:08] <strcat> acrichto: alright it appears to self-host now
[06:31:22] * strcat can stop being super annoyed now
[06:31:27] <strcat> until a run-pass test or bench fails
[06:31:43] <bjz_> NewGuy: If I'm honest, I'm a snob at heart and most linux guis leave a lot to be desired on the design front
[06:31:44] <NewGuy> bjz_: Still won't let me take the damn thing off. I've lately had to learn more about apt-get than I ever wanted to.
[06:31:55] <bjz_> hahaha
[06:32:13] * strcat doesn't understand how debian managed to fragment their package management stuff so much :|
[06:32:25] <strcat> I guess backwards compatiblity
[06:32:34] <NewGuy> \me is curious what strcat uses...
[06:32:40] <bjz_> NewGuy: what do you normally use for package management?
[06:32:52] * NewGuy offs himself for using the wrong slash.
[06:33:01] <NewGuy> bjz_: pacman. Like I said, manjaro guy myself.
[06:33:12] * bjz_ slaps NewGuy with a big smelly fish
[06:33:42] * SingingBoyo may need to install elementaryOS just to get away from Ubuntu
[06:33:50] <NewGuy> bjz_: Also, I think Linux GUI can look gorgeous (XFCE is my favorite). But sometimes font rendering can keep me up at nights.
[06:33:56] <strcat> SingingBoyo: elementaryos is ubuntu
[06:34:06] * NewGuy laughs at SingingBoyo - EOS is an Ubuntu-derived distro.
[06:34:09] <SingingBoyo> strcat: but it doesn't look like ubuntu
[06:34:22] <strcat> ubuntu doesn't look like anything specific - it ships a bunch of DEs, etc.
[06:34:27] <SingingBoyo> so it'd be progress, if not much
[06:34:43] <SingingBoyo> I'm just annoyed at the ubuntu one stuff popping up half the time when I misclick
[06:34:49] *** Quits: richard|s (mindginati@moz-9C555AF3.spmconsultants.co.nz) (Quit: zzZZZ)
[06:34:53] <strcat> they'll be forced to do something because of how much canonical has forked everything
[06:34:56] <NewGuy> strcat: So what do you currently use?
[06:35:12] <bjz_> NewGuy: at least Ubuntu and Elementary are pushing the boundaries on that front. Still much to do, but I live in hope.
[06:35:27] * strcat uses arch linux on his laptop/desktop and silly debian on a server
[06:35:34] <strcat> but debian is temporary there
[06:35:41] <SingingBoyo> also I can confuse the poor first-year CS students I get to TA for by running what looks like OSX on a windows laptop.
[06:35:50] <bjz_> haha
[06:36:03] <NewGuy> strcat: Tried to install arch manually - failed miserably. I felt bad about myself.
[06:36:15] <strcat> it's just 1 command now
[06:36:23] <strcat> the old installer stuff is all killed
[06:36:35] <NewGuy> Woah, woah, woah. WHAT?!
[06:36:44] <strcat> pacstrap just bootstraps pacman on a root
[06:36:51] * NewGuy furiously looks up arch and prepares to install
[06:36:52] <sfackler> there's a new installer?
[06:36:54] <strcat> you partition the root however you want, and pacstrap /root base
[06:36:57] <strcat> sfackler: there's no installer
[06:37:06] <strcat> there's just pacman and little script to bootstrap it
[06:37:30] <strcat> ofc, there's till the pain of configuring things and making choices about what you want ;p
[06:37:32] *** Quits: roboguy (roboguy@moz-266CFD9E.cm.sunflower.com) (Input/output error)
[06:37:42] <NewGuy> That's the hardest part...
[06:37:43] <strcat> but it will happily boot if you partition + install, and put a bootloader on it
[06:38:15] <strcat> NewGuy: the painful parts are gone though, since there's stuff like menu-based wifi scanning/connection
[06:38:35] <strcat> I think I'd have to call wpa_supplicant/iwconfig the most painful thing that ever existed
[06:38:44] <NewGuy> strcat: Worth the hassle? Never got a chance to test out it's stability and how often I'd need to dick around to get it working.
[06:39:16] <strcat> well it's no less stable than manjaro
[06:39:20] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[06:39:31] <strcat> it's as stable as the software projects you use are ;p
[06:39:36] <strcat> unlike debian, which shields you from that
[06:40:07] <NewGuy> strcat: I use Rust... What does that tell you about my choice in software.
[06:40:17] <strcat> rust has a pretty nice test suite compared to most software
[06:40:37] <NewGuy> Definitely, and the built-in unit tests are a life saver.
[06:41:14] <NewGuy> bjz_: I miss the sound of your voice.
[06:41:24] <bjz_> huh?
[06:41:35] <strcat> error: Unrecognized option: ''.
[06:41:37] <strcat> great :(
[06:41:38] * bjz_ is a little creeped out
[06:41:55] * NewGuy continually get's closer to bjz_.
[06:42:11] * bjz_ shuffles away abit
[06:42:25] <NewGuy> There is no escape.
[06:42:30] <bjz_> O_O
[06:42:37] <strcat> how could I have possibly broken getopts
[06:42:39] <strcat> I didn't touch it :|
[06:42:46] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[06:43:10] <NewGuy> Well screw me sideways - I just saved a couple huge changes when I closed my VStudio that I didn't want to keep...
[06:43:30] <mm> and that's what source control is for :P
[06:43:37] *** Joins: victorporof (victorporo@9D964D4D.36D485C.2B3D3D4.IP)
[06:44:02] <strcat> % ~/projects/rust/x86_64-unknown-linux-gnu/stage2/bin/rustc -h
[06:44:05] <strcat> error: Unrecognized option: 'h'.
[06:44:07] <strcat> :(
[06:44:19] <NewGuy> strcat: You dun goofed.
[06:44:21] <strcat> so..
[06:44:29] <strcat> anyway bad example
[06:44:34] <strcat> % ~/projects/rust/x86_64-unknown-linux-gnu/stage2/bin/rustc --help
[06:44:37] <strcat> error: Unrecognized option: ''.
[06:45:40] <NewGuy> Oh, anyway, back on my topic. So Win64 support, it works as long as you don't interact with the outside world using exceptions?
[06:45:43] <strcat> and yet stage1 works
[06:45:57] <strcat> NewGuy: I guess so
[06:45:59] *** Quits: jdm (jdm@moz-F20C695E.dsl.teksavvy.com) (Ping timeout)
[06:46:17] <strcat> haven't tested it and we don't have a win64 buildbot
[06:46:25] <strcat> it definitely works on win32 now (including unwinding)
[06:46:37] *** Joins: mihneadb (mihneadb@moz-329F29A3.lightspeed.sntcca.sbcglobal.net)
[06:46:39] <NewGuy> strcat: Why no win64 bb?
[06:46:55] <strcat> because the effort needed to have one hasn't been spent
[06:47:08] <strcat> and we only recently had theoretical win64 support at all
[06:47:21] <NewGuy> Definitely a good reason. 
[06:47:57] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[06:48:10] <strcat> bootstrapping on a new arch isn't really trivial - I guess you would cross-compile from linux or something :s
[06:49:20] <NewGuy> Yeah, I was just going to throw a dual boot partition onto my machine... whitehatters club (uni) requires linux anywho
[06:50:35] <strcat> maybe I'm encoding metadata wrong, not sure
[06:51:14] * strcat doesn't think so though
[06:54:45] <strcat> I guess I broke macros
[06:56:50] <strcat> dbaupp: any idea what libsyntax/ext/quote.rs is supposed to do? :s
[06:56:57] *** Quits: SingingBoyo (brandon@4DF3381A.51F4D838.4F048BDC.IP) (Ping timeout)
[06:57:17] <strcat> why would it turn all integers to i64?
[06:58:16] *** Quits: mihneadb (mihneadb@moz-329F29A3.lightspeed.sntcca.sbcglobal.net) (Input/output error)
[06:59:43] <sfackler> strcat: it's a quasiquoter. it turns the stuff inside of it into an AST. Check out libsyntax/ext/opt.rs for example usage
[07:00:11] <strcat> yeah but I don't get why it's turning all LIT_INT into lit_int(_, i64)
[07:02:12] <strcat> seems important ;p
[07:02:20] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Quit: WeeChat 0.4.2-dev)
[07:02:20] <strcat> since char is going to become lit_char now...
[07:05:53] *** Joins: bugweiser (Mibbit@2CA39826.4D688723.BFB6C2CE.IP)
[07:07:25] *** Quits: bugweiser (Mibbit@2CA39826.4D688723.BFB6C2CE.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:08:02] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Quit: Leaving)
[07:17:57] *** Quits: NewGuy (Mibbit@moz-E759CEF9.resnet.usf.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[07:20:34] *** Quits: Jesin (Jessin_@moz-AFC45767.cc.lehigh.edu) (Ping timeout)
[07:21:00] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[07:21:00] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/7Ts-qA
[07:21:00] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[07:21:11] <zeuxcg> rusti: fn foo(v: &int) {} foo(5)
[07:21:12] -rusti- <anon>:5:32: 5:33 error: mismatched types: expected `&int` but found `<VI0>` (expected &-ptr but found integral variable)
[07:21:12] -rusti- <anon>:5          fn foo(v: &int) {} foo(5)
[07:21:12] -rusti-                                          ^
[07:21:12] -rusti- error: aborting due to previous error
[07:21:12] -rusti- application terminated with error code 101
[07:21:34] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[07:21:35] <zeuxcg> is implicit conversion from values to borrowed pointers something that's planned as a language feature?
[07:22:19] <strcat> don't really think so
[07:23:32] *** Joins: bytewise (bytewise@moz-4A801D04.unitymediagroup.de)
[07:25:58] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[07:25:58] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/_n4yBQ
[07:25:58] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[07:25:59] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[07:26:00] <ghrust> 01[13rust01] 15bors pushed 6 new commits to 06auto: 02http://git.io/U0wESg
[07:26:00] <ghrust> 13rust/06auto 1415f05dc 15Chris Morgan: Modernise some Vim syntax highlighting....
[07:26:00] <ghrust> 13rust/06auto 14afbf908 15Chris Morgan: Update a handful of keywords highlighted in Vim....
[07:26:00] <ghrust> 13rust/06auto 14c4b180a 15Chris Morgan: Highlight everything in the prelude in Vim....
[07:26:02] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[07:26:39] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[07:26:51] *** flaper87|afk is now known as flaper87
[07:26:52] *** Quits: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[07:27:09] *** Joins: freax (Mibbit@A63570ED.6F53187D.520CDC98.IP)
[07:27:11] <bjz> rusti: fn foo(ss: &[&str]) { for s in ss.iter() { println(s) } } foo(["hi", ~"howdy".as_slice()])
[07:27:18] -rusti- pastebinned 8 lines of output: http://ix.io/7Pu
[07:27:40] <bjz> rusti: fn foo(ss: &[&str]) { for s in ss.iter() { println(s) } } foo(["hi", (~"howdy").as_slice()])
[07:27:40] -rusti- <anon>:5:60: 5:61 error: mismatched types: expected `&str` but found `&&str` (expected &str but found &-ptr)
[07:27:41] -rusti- <anon>:5          fn foo(ss: &[&str]) { for s in ss.iter() { println(s) } } foo(["hi", (~"howdy").as_slice()])
[07:27:41] -rusti-                                                                      ^
[07:27:41] -rusti- error: aborting due to previous error
[07:27:41] -rusti- application terminated with error code 101
[07:28:11] <bjz> strcat: ^?
[07:28:25] <zeuxcg> fn foo(ss: &[&str]) { for s in ss.iter() { println(*s) } } foo(["hi", (~"howdy").as_slice()])
[07:28:31] <zeuxcg> rusti: fn foo(ss: &[&str]) { for s in ss.iter() { println(*s) } } foo(["hi", (~"howdy").as_slice()])
[07:28:35] -rusti- pastebinned 11 lines of output: http://ix.io/7Pv
[07:28:51] <zeuxcg> yeah
[07:28:58] <bjz> zeuxcg: println takes a borrowed str
[07:28:59] <engla> bjz: a vector &[T] has iterator type Iterator<&T>
[07:29:08] <bjz> ohhhh
[07:29:21] <bjz> I get it
[07:29:22] <zeuxcg> bjz: but now ~"howdy" dies too early
[07:29:41] *** Quits: Mister_Abc (Mibbit@moz-35250D84.bootp.virginia.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[07:29:44] <bjz> hmm
[07:29:52] <bjz> problem indeed
[07:30:16] <bjz> rusti: fn foo(ss: &[&str]) { for s in ss.iter() { println(s) } } let s = ~"howdy"; foo(["hi", s.as_slice()])
[07:30:17] -rusti- <anon>:5:60: 5:61 error: mismatched types: expected `&str` but found `&&str` (expected &str but found &-ptr)
[07:30:17] -rusti- <anon>:5          fn foo(ss: &[&str]) { for s in ss.iter() { println(s) } } let s = ~"howdy"; foo(["hi", s.as_slice()])
[07:30:17] -rusti-                                                                      ^
[07:30:17] -rusti- error: aborting due to previous error
[07:30:18] -rusti- application terminated with error code 101
[07:30:22] <bjz> rusti: fn foo(ss: &[&str]) { for s in ss.iter() { println(*s) } } let s = ~"howdy"; foo(["hi", s.as_slice()])
[07:30:23] -rusti- hi
[07:30:24] -rusti- howdy
[07:30:24] -rusti- ()
[07:30:27] <zeuxcg> yeah
[07:30:51] <dbaupp> rusti: fn foo(ss: &[&str]) { for s in ss.iter() { println(*s) } } foo([(~"howdy").as_slice(), "hi"])
[07:31:08] <bjz> rusti: fn foo(ss: &[&str]) { for s in ss.iter() { println(*s) } } foo(["hi", fmt!("hi")])
[07:31:36] -rusti- pastebinned 11 lines of output: http://ix.io/7Pw
[07:31:36] -rusti- <anon>:5:79: 5:90 error: mismatched types: expected `&'static str` but found `~str` (str storage differs: expected &'static  but found ~)
[07:31:36] -rusti- <anon>:5          fn foo(ss: &[&str]) { for s in ss.iter() { println(*s) } } foo(["hi", fmt!("hi")])
[07:31:36] -rusti-                                                                                         ^~~~~~~~~~~
[07:31:37] -rusti- error: aborting due to previous error
[07:31:39] -rusti- application terminated with error code 101
[07:32:10] <bjz> rusti: fn foo(ss: &[&str]) { for s in ss.iter() { println(*s) } } foo(["hi", fmt!("hi").as_slice()]) // probably will die too early
[07:32:16] *** Joins: threecreepio (jdp@moz-1A9F0A3C.cust.bredband2.com)
[07:32:21] -rusti- pastebinned 11 lines of output: http://ix.io/7Px
[07:32:28] <bjz> yep
[07:32:41] <bjz> zeuxcg: interesting
[07:32:59] <strcat> scary
[07:33:08] <zeuxcg> this is the reason why C++ prolongs the lifetime of temporaries
[07:33:17] <strcat> zeuxcg: kind of
[07:33:26] <strcat> it extends them as long as there are const refs to them
[07:33:29] <zeuxcg> yeah
[07:33:31] <strcat> normal refs don't extend their lifetimes
[07:33:50] <bjz> strcat: why scary?
[07:33:55] <strcat> bjz: oh no something else
[07:33:59] <zeuxcg> yeah, but temporaries can't be used as normal refs in standard compliant C++ :)
[07:34:13] <strcat> bjz: I'm just disturbed by the horrible bugs my attempt at fixing char has caused
[07:34:16] <bjz> zeuxcg: so is this good or bad?
[07:34:35] <bjz> strcat: RUSTC IS BROKED TO THE CORE!
[07:34:40] <bjz> strcat: :P
[07:34:46] <strcat> bjz: yeah and I broke it more
[07:34:49] <bjz> hehe
[07:34:56] <strcat> bjz: it manages to compile a rustc, that almost works
[07:35:03] <strcat> except, option parsing is broken
[07:35:11] <bjz> and yet it keeps on munching its own tail....
[07:35:13] <zeuxcg> bjz: so I understand the behavior of rustc, it makes sense unless you introduce extra rules for temporaries
[07:35:16] *** Joins: ecr (Thunderbir@moz-A7CDB794.dia.static.qwest.net)
[07:35:16] <bjz> munch munch munch
[07:35:22] <strcat> bjz: http://ix.io/7Py look at what happened to the help output
[07:35:24] <strcat> O_o
[07:35:29] <zeuxcg> bjz: at the same time, it's not very convenient
[07:35:56] <dbaupp> strcat: how on earth did changing char break getopts?? :(
[07:36:00] <bjz> zeuxcg: I'm guessing that could be improved though, since the compiler has lots of information
[07:36:02] *** Quits: victorporof (victorporo@9D964D4D.36D485C.2B3D3D4.IP) (Quit: victorporof)
[07:36:07] <kimundi> strcat: whoops! ;)
[07:36:10] *** Joins: sk (sk@76BFB31C.71F9CB99.78DD174B.IP)
[07:36:13] <bjz> zeuxcg: maybe file an issue?
[07:36:20] <dbaupp> strcat: (I take it https://github.com/mozilla/rust/pull/8974 isn't ready yet?)
[07:36:22] * strcat needs a fresh pair of eyes :(
[07:36:25] <strcat> dbaupp: yeah, broken
[07:36:31] <bjz> zeuxcg: I agree all this micro-management is annoying
[07:36:34] <strcat> it made it far enough that I thought it was okay
[07:36:35] <dbaupp> bjz, zeuxcg: https://github.com/mozilla/rust/issues/3511
[07:36:37] <strcat> but no.
[07:36:51] <strcat> dbaupp: open getopts.rs
[07:36:54] <strcat> look at the 
[07:36:59] <bjz> dbaupp: is that it?
[07:36:59] <strcat> 'let machine: &fn' ... block
[07:37:04] <strcat> dbaupp: I think that's what broke
[07:37:23] <strcat> so maybe I broke the std::char pattern matching
[07:37:25] <strcat> I'm not sure
[07:37:32] <bjz> zeuxcg: lots of work into that issue it seems
[07:37:54] <strcat> dbaupp: anyway taking a break ;[
[07:37:56] <dbaupp> bjz: that's the issue for rvalue lifetimes yes.
[07:38:05] <strcat> dbaupp: I'd guess that char matching is broken
[07:38:13] <bjz> dbaupp: so it can't infer backwards?
[07:38:22] <dbaupp> strcat: do you want me to have a poke at it?
[07:38:29] <dbaupp> strcat: (your latest code is in that pr?)
[07:38:35] <strcat> dbaupp: yes please ;p
[07:39:18] <strcat> dbaupp: and yeah, it's the latest
[07:39:34] <dbaupp> bjz: no idea; I just know the issue numbers :P
[07:39:42] <strcat> anyway the stage1 compiler works, but fails to generate a working stage2
[07:39:45] <bjz> haha
[07:39:57] <bjz> dbaupp: guess that's and nmatsakis question
[07:40:35] <bjz> zeuxcg: luckily rustc has a lot of information at compile time, so hopefully this kind of stuff will improve
[07:41:53] <bjz> zeuxcg: needs bug reports and a lot of grind by our amazing ministry of magic to knock things into shape though
[07:42:06] * bjz is only a library guy
[07:42:56] *** Quits: ChrisMorgan (chris@moz-BCC8D00A.its.monash.edu.au) (Ping timeout)
[07:42:58] <strcat> dbaupp: https://github.com/thestinger/rust/blob/278e4a38eaeeaa32f297f14a9eb43d1ec50c9eca/src/librustc/middle/ty.rs#L4322 look at this funny thing
[07:43:19] <strcat> it amused me ;p
[07:43:37] <dbaupp> weird
[07:43:38] <bjz> haha wut
[07:43:45] <strcat> tycat!
[07:43:52] *** Quits: freax (Mibbit@A63570ED.6F53187D.520CDC98.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:43:54] <strcat> my long lost twin
[07:44:15] <dbaupp> your statically typed brother
[07:44:31] <strcat> anyway that's what decides whether types have binops O_o
[07:45:05] <dbaupp> heh, yet another instance of hardcoded numbers spread through the codebase. <3
[07:45:29] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[07:45:37] * bjz liked the matrix of thingies
[07:46:38] <strcat> we should rename true to truey so it aligns with false
[07:47:07] <acrichto> t/f
[07:47:07] <mm> or go to #t and #f, lisp style
[07:47:24] <strcat> or just yea/nay
[07:47:37] <mm> right/wrong
[07:47:53] <mm> true/nope
[07:47:57] <strcat> enum bool { right, wrong, MorallyAmbiguous }
[07:48:11] <bjz> troo/nooo
[07:48:11] <acrichto> match all_in_favor() { yea => {} nea => {} }
[07:48:18] <mm> strcat: and FileNotFound
[07:48:20] <bjz> yes/noo
[07:49:12] <strcat> dbaupp: today I learned about many layers of rustc at least ;p
[07:49:28] <strcat> trans is not actually that bad compared to some of this ;p
[07:49:34] <bjz> strcat: into the very depths of hell?
[07:49:49] <strcat> there were a few nice parts
[07:49:55] <bjz> yea?
[07:50:47] <bjz> so which were the main offending parts?
[07:51:15] <strcat> debuginfo is really nice now
[07:51:32] <strcat> bjz: well I guess everything else was pretty bad :(
[07:51:53] <strcat> scary parser/token hacks, scary typeck hacks
[07:52:26] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[07:52:38] <bjz> :P
[07:52:51] <bjz> strcat will unscarify?
[07:52:58] <strcat> one day
[07:53:11] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[07:53:15] <strcat> first, deunsoundify ;p
[07:54:09] <bjz> :)
[07:54:22] <bjz> you mean, soundify?
[07:54:35] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[07:54:53] <strcat> bjz: it's scary that there's a place where you have a ty::t but have to remember to pass it through a resolvify-gizmo to get back a ty::t that's not broken
[07:54:59] <strcat> :s
[07:55:00] * bjz always cringes at 'disallow'. 'forbid' damnnit!
[07:55:19] <bjz> yikey
[07:55:38] * bjz doesn't know what that means, but it sounds scary
[07:55:49] <strcat> like
[07:56:02] <strcat> type_is_char(t) -> false
[07:56:03] <bjz> so there's no type safetey?
[07:56:08] *** Quits: six600110 (six600110@moz-2FA48202.neo.res.rr.com) (Ping timeout)
[07:56:12] <bjz> just remembering?
[07:56:16] <strcat> type_is_char(resolve(t)) -> true
[07:56:20] <strcat> bjz: pretty much
[07:56:26] <bjz> ok, I get that
[07:56:28] <bjz> icky
[07:56:32] * kimundi hopes in the meanwhile that his recent syntax::ast renamings did not introduce any more compiler bugs
[07:57:08] *** Joins: six600110 (six600110@moz-2FA48202.neo.res.rr.com)
[07:57:27] <bjz> strcat: I'm guessing lots of this is a hangover from the old days
[07:57:35] <strcat> yeah
[07:57:42] <strcat> the new parts are nice
[07:57:46] <strcat> most isn't new,
[07:57:47] <bjz> strcat: when rust's type system was less expressive
[07:57:50] <dbaupp> <3 new rust
[07:58:04] * dbaupp couldn't imagine a rust with only @ o_O
[07:58:12] <bjz> dbaupp: still lots of micromanaging :(
[07:58:27] <bjz> dbaupp: hopefully that can be improved
[07:58:36] <bjz> dbaupp: was there only @?
[07:58:45] * bjz didn't know that
[08:01:30] <dbaupp> bjz: I thought so, but I wasn't around that long ago, so I dunno.
[08:04:30] <bjz> dbaupp: we think we've been around for awhile, but not really
[08:04:32] <flaper87> dbaupp: Have you done any work here? https://github.com/mozilla/rust/issues/8962
[08:04:48] <bjz> oooh
[08:05:01] <bjz> yes yes yes please
[08:06:26] <flaper87> I guess that has to wait for #6875 to be completed
[08:07:27] *** Quits: msingle (Thunderbir@moz-20675462.nrflva.fios.verizon.net) (Ping timeout)
[08:07:32] <mm> rusti: (3,4)
[08:07:33] -rusti- (3, 4)
[08:08:07] <mm> rusti: ("atthew".len(), "cpherrin".len())
[08:08:08] -rusti- (6u, 8u)
[08:10:38] *** Quits: relrod (relrod@moz-AABB5D31.redhat.com) (Ping timeout)
[08:10:46] *** Joins: sprog (Mibbit@CCBA8AEB.F976102B.520CDC98.IP)
[08:11:42] <sprog> hi! I would like to work on some of the rt related issues on windows. how do i get run this test https://github.com/mozilla/rust/issues/8815?
[08:11:48] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[08:11:48] *** ChanServ sets mode: +o pnkfelix
[08:12:41] <dbaupp> bjz: https://github.com/mozilla/rust/issues/8965
[08:13:08] <dbaupp> flaper87: no, closing #8962 is part of completing #6875
[08:13:09] *** Quits: Earnestly (earnest@moz-F387F877.dyn.plus.net) (Ping timeout)
[08:13:19] <dbaupp> flaper87: and I haven't done any work on it.
[08:13:25] <flaper87> dbaupp: right, just read it all! 
[08:13:27] <flaper87> :D
[08:13:39] <bjz> sprog: that's great! dunno much about the rt personally, but brson is the dude that built the new one. If you need some work to do, he's the fellow to talk to. But there might be other folks here that could help.
[08:14:07] <bjz> dbaupp: sweet
[08:14:33] <dbaupp> sprog: I think you probably need to remove the #[ignore]'s on those tests
[08:14:44] <dbaupp> (assuming that there is some)
[08:14:59] <flaper87> dbaupp: I can take it if you can give me some support w/ the implementation details.
[08:15:00] <dbaupp> and then `make check-stage2-std NO_REBUILD=1`
[08:15:11] <dbaupp> flaper87: sure :)
[08:15:32] <dbaupp> flaper87: it all happens in rustc::middle::lint, the StabilityLintVisitor
[08:15:41] <flaper87> dbaupp: awesome, it's done: https://github.com/mozilla/rust/issues/8962#issuecomment-23772885 :D
[08:15:49] *** Quits: sprog (Mibbit@CCBA8AEB.F976102B.520CDC98.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:16:45] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[08:17:27] *** Joins: sprog (Mibbit@76D28959.412F0AB5.520CDC98.IP)
[08:17:55] *** Quits: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP) (Ping timeout)
[08:18:10] <sprog> dbaupp: how do i run only that particular test?
[08:18:26] <flaper87> sprog: TESTNAME=
[08:18:27] <strcat> dbaupp: really don't understand why it broke ;[
[08:18:28] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Ping timeout)
[08:19:05] <dbaupp> acrichto: test https://github.com/mozilla/rust/pull/8976?
[08:19:12] <sprog> flaper87: will that rebuild the entire std crate?
[08:19:27] <dbaupp> strcat: i'm currently trying to get stdtest to work
[08:19:29] <flaper87> sprog: TESTNAME=mytest NO_REBUILD=1
[08:19:32] <acrichto> dbaupp: it was tough, it only manifests itself with -o "" and you can't specify two -o flags on the command line
[08:19:40] <acrichto> strcat: (as in putting a test in compile-fail)
[08:19:49] <flaper87> sprog: you need to specify NO_REBUILD to avoid rebuilding the whole thing
[08:20:04] <sprog> flaper87: oh! thanks.
[08:20:05] *** Joins: nkoep (nik@moz-16EFBB02.vpn.rwth-aachen.de)
[08:20:08] <strcat> oh that's a good point, can compile stdtest with the stage1 compiler
[08:20:29] <acrichto> oh whoops wrong direction, dbaupp*
[08:20:38] <strcat> acrichto: yes but you gave me an idea >:)
[08:20:58] <acrichto> hurrah!
[08:21:49] * strcat will just rm map_chars
[08:22:00] <dbaupp> acrichto: right I see
[08:22:01] <klutzy> acrichto: does your patch treats e.g. -o ".." or -o "/"? I guess so but it's good to confirm
[08:22:16] <acrichto> klutzy: oh let me check
[08:23:18] <acrichto> klutzy: treats '.' and '/' just fine, and '..' creates "lib.-{hash}-0.0.dylib" as in it infers the name of the library to be "."
[08:23:28] <acrichto> none of them ice though
[08:23:49] *** Joins: ac_dc (ac@moz-FD24B77.sohonet.co.uk)
[08:23:51] *** Joins: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP)
[08:23:55] *** Quits: ac_dc (ac@moz-FD24B77.sohonet.co.uk) (Quit: ac_dc)
[08:24:06] *** Joins: sigma (sigma@moz-B8E78D5.range86-136.btcentralplus.com)
[08:24:15] <klutzy> acrichto: great! what about -o ".ice"? I found this yesterday but forgot to mention at issue
[08:24:32] <acrichto> error: missing crate link meta `name`, and the provided name is blank
[08:24:39] <acrichto> (as in no ice)
[08:24:39] <klutzy> :D
[08:25:04] <acrichto> compiling rustc takes so long :(
[08:25:34] <dbaupp> strcat: did your remove the Rand impl for char?
[08:25:36] <dbaupp> *you
[08:25:41] <strcat> dbaupp: yes
[08:25:49] <strcat> it needs to be redone 
[08:25:57] <strcat> can't just truncate
[08:26:04] <strcat> and I don't know exactly how to do it properly
[08:26:13] <dbaupp> yup, just checking that it was meant to be not complaining about that
[08:26:25] <dbaupp> *be complaining
[08:26:28] <acrichto> isn't it just rand(unicode range - # surrogates) + maybe offset?
[08:26:59] <strcat> acrichto: truncate to 21-bit, then there is a range within it that are surrogates
[08:27:06] <strcat> so what do you do about those?
[08:27:09] <acrichto> yeah
[08:27:11] <strcat> discard until the RNG returns a proper one?
[08:27:15] <acrichto> no
[08:27:23] <acrichto> rand(# valid codepoints) + maybe offset
[08:27:31] <acrichto> where maybe offset is the # surrogates for that hole in the middle
[08:28:03] <strcat> oh, yeah, that makes sense
[08:28:11] <klutzy> hmm, -o "con" makes g++ die. I don't think this is in scope of rustc though
[08:28:19] <strcat> beware off-by-one errors
[08:28:20] <acrichto> oh god con
[08:28:26] *** Quits: sprog (Mibbit@76D28959.412F0AB5.520CDC98.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:28:28] <acrichto> klutzy: apparently that file on windows is "special"
[08:28:34] <klutzy> yep :)
[08:29:05] <klutzy> acrichto: long days ago I git-cloned some repo on windows then it had "con.h"
[08:29:23] <strcat> dbaupp: fixing libstd tests atm
[08:29:24] <acrichto> does it not like that file either?
[08:29:28] *** Joins: Jesin (Jessin_@moz-AFC45767.cc.lehigh.edu)
[08:29:35] <klutzy> acrichto: git could not checkout it, so build failure occurred
[08:29:49] <acrichto> :(
[08:30:02] <klutzy> "con.h" is able to open, but not with usual file apis we use
[08:30:16] <dbaupp> strcat: I've suceeded (I think, building now)
[08:30:24] <strcat> dbaupp: what was wrong?
[08:30:27] <mm> klutzy: woah, confirmed con.h doesn't work
[08:30:36] <strcat> or you mean for the libstd tests
[08:30:41] <dbaupp> strcat: hm?
[08:30:41] <mm> I knew "con" was special, but didn't realize it worked with extensions
[08:30:46] <dbaupp> strcat: yeah, tests
[08:30:56] <mm> I guess it's just the 8.3 filename having 8 = "con"
[08:31:02] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[08:31:02] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/U0wESg
[08:31:02] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[08:31:16] <klutzy> mm: maybe you can create "con.h" if you use "\\?\" syntax (I didn't tried it)
[08:31:38] <klutzy> but well, even explorer.exe does not support it
[08:32:00] <patrickg> does nul.h fail, too?
[08:32:03] <mm> klutzy: Or if you avoid the windows api, but I don't care
[08:32:20] <dbaupp> strcat: ok, running them now
[08:32:24] <klutzy> patrickg: yes
[08:32:31] <mm> (like using services for unix or something else built on NT but not win.32)
[08:32:32] <dbaupp> (how do I ignore benchmarks?
[08:32:36] <dbaupp> )
[08:33:52] <dbaupp> strcat: failures: https://gist.github.com/huonw/2794c5aaea21b24a0d1f
[08:34:17] <dbaupp> (some of those are probably because I fixed them wrong, but most I didn't have to touch.)
[08:35:59] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[08:35:59] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/UT4ZHw
[08:35:59] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[08:36:01] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[08:36:01] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/fdRWXw
[08:36:01] <ghrust> 13rust/06auto 148d610e1 15Marvin L√∂bel: Added ToStr impl for char...
[08:36:01] <ghrust> 13rust/06auto 14142dab4 15bors: auto merge of #8960 : Kimundi/rust/master, r=alexcrichton...
[08:36:02] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[08:36:05] *** Joins: richard|s (mindginati@moz-C62D9A3C.dsl.dyn.ihug.co.nz)
[08:36:24] <dbaupp> strcat: fn main() { printfln!('a'.is_digit()) } => true
[08:36:26] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[08:37:26] <strcat> heh
[08:37:45] *** Quits: richard|s (mindginati@moz-C62D9A3C.dsl.dyn.ihug.co.nz) (Ping timeout)
[08:38:33] <dbaupp> fn main() { printfln!('√∂') } => '\x'
[08:39:48] *** Joins: Aszarsha (Aszarsha@moz-9F33802B.s-cbib.u-bordeaux2.fr)
[08:42:51] <strcat> dbaupp: ;[
[08:43:17] <dbaupp> hm, it appears to be reading them perfectly fine
[08:43:58] *** Joins: richard|s (mindginati@moz-C62D9A3C.dsl.dyn.ihug.co.nz)
[08:44:14] *** Quits: fabiand (fabiand@moz-D0902417.adsl.alicedsl.de) (Quit: Verlassend)
[08:44:18] <strcat> rusti: printfln!('a')
[08:44:19] -rusti- 'a'
[08:44:19] -rusti- ()
[08:44:22] *** Joins: fabiand (fabiand@moz-D0902417.adsl.alicedsl.de)
[08:44:25] *** Joins: squiddy (squiddy@moz-F34769CA.adsl.alicedsl.de)
[08:44:26] <strcat> rusti: printfln!('√∂')
[08:44:27] -rusti- '\xf6'
[08:44:27] -rusti- ()
[08:45:07] <dbaupp> anything that's not a printable ascii is getting printed as `\x`
[08:45:38] <dbaupp> fn main() { printfln!('a' < 'a') } => Segfault
[08:45:46] <strcat> heh
[08:46:03] * dbaupp thinks strcat slightly missed the "make it more sound" goal
[08:46:24] <strcat> it's a work in progress ;p
[08:46:29] <dbaupp> (it doesn't even need the printfln! to segfault)
[08:46:48] <strcat> there are probably some missed match exprs
[08:46:51] <strcat> ;[
[08:46:58] <myname> 'a' < 'a' segfaults?
[08:47:27] *** Quits: sigma (sigma@moz-B8E78D5.range86-136.btcentralplus.com) (Ping timeout)
[08:47:27] <dbaupp> myname: yeah
[08:47:38] <myname> lol
[08:47:48] *** Quits: Jesin (Jessin_@moz-AFC45767.cc.lehigh.edu) (Ping timeout)
[08:48:17] <dbaupp> strcat: (it's the binary segfaulting, not the compiler, btw.)
[08:49:30] <strcat> well, hm
[08:49:42] <strcat> before it was ty_int
[08:49:48] <strcat> hrm
[08:50:19] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[08:50:21] <strcat> rusti: 'a'
[08:50:22] -rusti- 'a'
[08:51:27] <strcat> dbaupp: it segfaults because there's no stack overflow protection
[08:51:42] <strcat> it's because I accidentally made it not generate ops for those
[08:51:45] <strcat> so the trait is calling itself
[08:51:53] <strcat> yay LLVM IR
[08:52:33] <strcat> ugh where was that table thing again
[08:52:45] <dbaupp> ah
[08:52:54] <strcat> ah right ty.rs
[08:53:21] <strcat> dbaupp: so, I guess it calls those 'rel'
[08:53:24] <strcat> and I didn't know what it was
[08:53:26] <strcat> so I said f
[08:53:42] <dbaupp> why is logic t?
[08:53:47] <dbaupp> (and eq f?)
[08:54:29] <strcat> logic isn't t
[08:54:32] <strcat> I think you're reading it wrong
[08:54:42] <strcat> the comments align with the table columns
[08:54:43] <strcat> kind of.
[08:54:46] <strcat> they are a bit off
[08:54:48] <strcat> :s
[08:54:53] <dbaupp> oh.
[08:54:55] <dbaupp> ew
[08:55:05] <dbaupp> yuckyuckyuck
[08:55:05] <strcat> so yeah I am renaming rel to cmp
[08:55:09] <ecr> when do you people sleep? :P
[08:55:15] <strcat> sleep? what's that
[08:55:25] <strcat> only humans need to sleep
[08:55:31] * strcat is a strcat
[08:55:40] <dbaupp> ecr: in about 6 hours
[08:55:44] *** Joins: Jesin (Jessin_@moz-AFC45767.cc.lehigh.edu)
[08:55:47] * ecr *stack overflow* should've added TCO...
[08:56:07] <kimundi> ecr: In about 14h
[08:56:37] <ecr> I'm only awake because I'm working on my intern presentation
[08:56:55] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[08:57:08] <strcat> and because interns aren't allowed to sleep
[08:58:00] <ecr> ... but my code's compiling...
[08:58:05] <ecr> please?
[08:59:01] <strcat> it could ICE at any moment.
[08:59:42] <strcat> dbaupp: so I guess I need to fix is_digit
[08:59:44] <strcat> whatever is wrong with it :s
[09:00:14] <strcat> um
[09:00:19] <strcat> is_digit is just the table lookups? :(
[09:00:27] <dbaupp> strcat: I'd guess it's all because < and > are broken
[09:00:36] <strcat> I hope
[09:00:40] <strcat> wouldn't it overflow then?
[09:00:57] <strcat> dbaupp: it's kind of funny that the only reason those traits work is that it checks for the built-ins first
[09:00:58] <dbaupp> llvm infinite recursion removal strikes again
[09:01:06] <strcat> ;[
[09:01:16] <strcat> ah right, optimizations
[09:01:21] <dbaupp> ok, works for me
[09:01:30] <strcat> dbaupp: as in... it compiles? ;0
[09:01:44] * dbaupp no longer segfaults on 'a' < 'a'
[09:01:46] <strcat> this was a stupid mistake
[09:01:48] <strcat> damn that table
[09:02:01] <strcat> I looked at it so many times too
[09:02:21] * strcat really thinks cmp is a better name than rel
[09:02:29] <strcat> but anyway leaving it alone for now
[09:03:51] *** Joins: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP)
[09:04:55] <kimundi> strcat: Are you looking for a is_digit that only accepts 0-9 ?
[09:05:07] <strcat> no it's just broken
[09:05:17] <strcat> as in I broke chars so much that the unicode tables no longer work
[09:05:55] <dbaupp> kimundi: don't panic, though, we fixed it.
[09:06:09] <strcat> I accidentally ran 3 rustc builds
[09:06:21] *** Joins: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk)
[09:06:25] <strcat> was wondering where all my memory was going, made a huge swapfile
[09:06:27] <kimundi> lol. don't worry
[09:06:34] <dbaupp> haha
[09:08:49] <strcat> compile_and_link: x86_64-unknown-linux-gnu/stage2/lib/rustc/x86_64-unknown-linux-gnu/lib/libstd.so
[09:08:52] <strcat> compile_and_link: x86_64-unknown-linux-gnu/stage2/lib/rustc/x86_64-unknown-linux-gnu/lib/libextra.so
[09:08:54] <strcat> dbaupp: 
[09:08:57] <strcat> I hope that means it's going to work
[09:09:48] <strcat> test result: FAILED. 1160 passed; 6 failed; 73 ignored; 0 measured
[09:09:51] <strcat> :s
[09:09:57] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Client exited)
[09:10:10] <strcat>     char::test_escape_default
[09:10:12] <strcat>     char::test_escape_unicode
[09:10:14] <strcat>     io::tests::test_readchar_empty
[09:10:16] <strcat>     repr::test_repr
[09:10:18] <strcat>     str::tests::test_escape_default
[09:10:20] <strcat>     str::tests::test_escape_unicode
[09:10:22] <strcat> that escaping issue
[09:10:44] <strcat> dbaupp: it will be awesome when it works though :)
[09:11:11] <strcat> so
[09:11:17] <strcat> I think I just broke char::escape_unicode
[09:11:19] *** Joins: kniteli (Mibbit@moz-F217D31A.hsd1.or.comcast.net)
[09:11:24] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[09:11:41] <strcat> I see why too
[09:12:04] <dbaupp> but it builds! <3
[09:12:05] <strcat> I switched int range to u32 range
[09:12:14] * strcat sighs
[09:12:18] * dbaupp focuses on the positives
[09:12:28] <strcat> actually, it's the negatives that matter in this case :)
[09:13:18] *** Quits: Jesin (Jessin_@moz-AFC45767.cc.lehigh.edu) (Input/output error)
[09:13:22] <strcat> I think it should be good now
[09:13:33] <strcat> til the next problem
[09:13:46] <strcat> there's always a next problem.
[09:14:04] <tikue> strcat: what'd you fix :3
[09:14:20] <strcat> chars
[09:14:31] <tikue> the casting stuff?
[09:14:35] *** Quits: jaen (jaen@FB01674D.56B727FE.4B52F012.IP) (Ping timeout)
[09:14:36] <strcat> everything
[09:14:45] <strcat> they no longer have arithmetic ops
[09:14:53] <strcat> you can no longer cast anything but u8 to them with 'as'
[09:14:59] <strcat> you can still cast from them
[09:15:01] *** Quits: KindOne (KindOne@moz-A03C5F46.dynamic.ip.windstream.net) (Ping timeout)
[09:15:03] *** Joins: msingle (Thunderbir@B9A7424F.3D69E65D.A6DC652B.IP)
[09:15:08] <tikue> rusti: 2*"abc"
[09:15:10] -rusti- <anon>:5:11: 5:16 error: mismatched types: expected `<VI0>` but found `&'static str` (expected integral variable but found &'static str)
[09:15:11] -rusti- <anon>:5          2*"abc"
[09:15:11] -rusti-                     ^~~~~
[09:15:11] -rusti- error: aborting due to previous error
[09:15:11] -rusti- application terminated with error code 101
[09:15:17] <tikue> rusti: "abc" * 2
[09:15:17] -rusti- <anon>:5:9: 5:18 error: binary operation * cannot be applied to type `&'static str`
[09:15:17] -rusti- <anon>:5          "abc" * 2
[09:15:18] -rusti-                   ^~~~~~~~~
[09:15:18] -rusti- error: aborting due to previous error
[09:15:20] -rusti- application terminated with error code 101
[09:15:21] <strcat> rusti: 'a' * 'c'
[09:15:22] -rusti- '\u2583'
[09:15:30] <strcat> rusti: 'D' / '\n'
[09:15:30] -rusti- '\x06'
[09:15:32] <strcat> unsound
[09:15:34] <tikue> lol
[09:15:44] <strcat> also really weird, but mostly unsound
[09:15:49] <strcat> tikue: they were parsed as
[09:15:49] <tikue> well, good job!
[09:15:52] <strcat> ints
[09:15:56] <tikue> ah
[09:16:00] <strcat> they were basically a sub-class of signed ints
[09:16:07] <strcat> a strongly typed i32
[09:16:18] <strcat> so I basically added a new primitive to the compiler
[09:16:19] *** Quits: Uther (Instantbir@moz-1B244B05.hfc.dyn.abo.bbox.fr) (Ping timeout)
[09:16:26] <strcat> learned a fair bit about how it works despite it not being a lot of code
[09:16:38] <tikue> all in a day's work? :P
[09:16:59] <strcat> not much work, mostly waiting for compiles playing eu4
[09:17:00] <strcat> ;D
[09:17:00] <tikue> does that mean we'll be able to get proper chars from indexing into strings now?
[09:17:07] <strcat> tikue: no
[09:17:10] <tikue> aw
[09:17:20] <tikue> why nawt ;(
[09:17:27] <strcat> it means strcat will stop complaining about chars being unsound
[09:17:31] <tikue> lol
[09:17:34] <strcat> and start complaining about str being unsound
[09:17:43] <tikue> better question:
[09:17:51] <tikue> will we _ever_ be able to get chars from indexing into strings?
[09:18:04] <strcat> well, it's defined as returning bytes atm
[09:18:12] <strcat> getting chars would be O(n)
[09:18:18] <strcat> graphemes would also be O(n)
[09:18:26] <tikue> is getting bytes O(1)?
[09:18:30] <strcat> yeah
[09:18:44] <strcat> indexing strings isn't incredibly useful though
[09:18:50] <tikue> true
[09:18:53] <strcat> it's not very meaningful without grapheme support
[09:18:55] <tikue> i don't know if i've ever wanted to do it in practice
[09:19:16] <tikue> but when we get syntactic support for slicing
[09:19:16] <strcat> if you write a fixed-grid program using monospace fonts, you end up needing a lot of indexing, etc.
[09:19:20] <kimundi> should just remove any str indexing
[09:19:35] *** Joins: KindOne (KindOne@moz-A03C5F46.dynamic.ip.windstream.net)
[09:19:39] <strcat> but you need a function to get the width of a char
[09:19:48] <strcat> combining char -> 0, grapheme -> 1, double-width grapheme -> 2
[09:19:51] <tikue> kimundi: but what about string slicing?
[09:20:01] <tikue> when we get syntactic support for slicing it'll be inconsistent to be able to slice a string but not index it
[09:20:03] <kimundi> that should be okay
[09:20:15] <kimundi> I don't see why
[09:20:21] <strcat> it's basically just another lookup table
[09:20:24] <strcat> the grapheme stuff
[09:20:28] <kimundi> slicing is already something different than indexing
[09:20:32] <tikue> they both like like "foo"[ .. ]
[09:20:40] <tikue> they're quite similar superficially
[09:20:53] <tikue> but appearences matter imo
[09:21:03] <strcat> dbaupp: I wait for compiles by compiling the tests in advance now >.<
[09:21:14] <strcat> silly make
[09:21:30] <tikue> so rustpkg replaces make files right?
[09:21:33] <tikue> or do i not understand that
[09:21:54] <strcat> well it builds a crate
[09:22:06] <strcat> hm
[09:22:10] <strcat> I guess it does replace makefiles
[09:22:19] <pnkfelix> strcat: when did that start?  I don't think I've noticed the tests being compiled during a default `make`
[09:22:28] <kimundi> indexing a vector gives you T, slicing it gives you &[T]. Slicing a str gives you &str, indexing it should give you... what? u8 is pretty useless, if you want u8 you usually want all the bytes of the str. And char or grapheme cluster should not pretend to be O(1)
[09:22:29] <strcat> pnkfelix: I mean make check ;p
[09:22:45] <pnkfelix> strcat: ‚Ä¶ well then I don't know what you're complaining about ...
[09:23:03] <strcat> pnkfelix: I usually take the old rustc and compile std.rs, extra.rs, syntax.rs and rustc.rs with --test
[09:23:06] <strcat> while I wait
[09:23:15] <strcat> depends on the change
[09:23:26] <bjz> tikue: that is the idea, yes
[09:23:39] <bjz> tikue: eventually it will be able to, but not yet
[09:23:49] <tikue> bjz: will they be _easier_ or just _different_ ?
[09:23:55] <strcat> pnkfelix: most of the build failures I get are from unused imports or some lonely test failing for a simple reason ;p
[09:24:05] <bjz> tikue: rustpkg is super easy
[09:24:13] * strcat isn't really complaining about anything substantial
[09:24:22] <strcat> I just want make to be psychic
[09:24:26] <pnkfelix> strcat: Sounds to me like you're taking advantage of knowledge (or really, a guess) that make cannot have
[09:24:33] <pnkfelix> strcat: okay, we're agreed
[09:24:48] <tikue> bjz: well i mean, take servo for example. it's got a couple-hundred-line makefile. how will that be replaced with rustpkg? some kind of rust compile file? 
[09:25:01] <bjz> tikue: hopefully yes
[09:25:26] <bjz> tikue: not sure how though
[09:25:29] <pnkfelix> strcat: though I guess we could add a target that does what you describe (i.e. using the snapshot rustc), to at least ease that usage pattern.
[09:25:39] <tikue> bjz: it'd be nice if rustpkg could do most of the heavy lifting :P
[09:25:40] <strcat> pnkfelix: the snapshot is almost always too old
[09:25:48] <pnkfelix> strcat: yeah I was just thinking that
[09:25:50] <strcat> pnkfelix: I happen to always have a build of rustc installed as a package that's at most a day old
[09:26:02] <strcat> since I have a cron job building them on a server
[09:26:04] <bjz> tikue: it has for me - I've zapped all my makefiles
[09:26:19] <tikue> wow!
[09:26:22] <tikue> wait
[09:26:26] <tikue> you just don't have any makefiles at all?
[09:26:33] <tikue> and nothing to replace them? it just does it all for you like magic?
[09:26:38] <bjz> tikue: well, for my projects
[09:26:39] <strcat> it's likely enough for 99% of rust projects you could dream of
[09:26:43] <tikue> wow
[09:26:43] <bjz> yep
[09:26:45] <tikue> <3
[09:26:49] <strcat> for rust itself? likely no ;p, without significant pain
[09:26:52] <tikue> hahah
[09:27:01] <strcat> it would still still to call the libuv, llvm, jemalloc configure/make anyway
[09:27:03] <bjz> you can do logic as well with pkg.rs
[09:27:04] <tikue> rust the self hosted language without a self hosted package manager
[09:27:17] <strcat> bjz: yeah, but will it do caching and everything properly? considering there's a lot of mixed messes
[09:27:33] <strcat> cross-compilation logic in our makefile is this horrific templated stuff no one will ever decode
[09:28:07] <bjz> tikue: make will always be more flexible, but the downside of flexibility is that you have to do a lot of the lifting
[09:28:10] <strcat> it really should be written in rust, it'd be saner, but good luck to anyone who wants to duplicate the same behaviour :P
[09:28:29] <bjz> aye
[09:28:39] <tikue> bjz: well hey now
[09:28:40] <pnkfelix> strcat: I thought porting rustc to build via rustpkg was part of the plan-of-record.  Or is that not what you are talking about?
[09:28:46] <strcat> it would likely be easier to make servo use rustpkg first
[09:28:57] <strcat> pnkfelix: yeah, I think it's the plan, it's just going to be a huge pain :)
[09:28:57] <tikue> bjz: eh..i was going to rebut. but you're right. : ]
[09:29:04] <pnkfelix> strcat: (yes, that is also part of the plan-of-record)
[09:29:10] <strcat> pnkfelix: because we've gone way beyond what should be done with a makefile :(
[09:29:24] <tikue> strcat: there's already a plan to move servo to rustpkg afaik
[09:29:27] <pnkfelix> strcat: Heh.  I meant that to mean "building Servo first" is POR.  But I guess Pain is also part of the POR
[09:29:33] <bjz> tikue: the start of a guide is here: http://static.rust-lang.org/doc/rustpkg.html
[09:29:40] <bjz> tikue: you can also look at the tests in the source
[09:30:03] <tikue> bjz: oh awesome! thank you. 
[09:30:06] <tikue> i'm going to play around with it
[09:30:33] <strcat> pnkfelix: it seems like servo mostly just needs good logic to build a thousand submodules
[09:30:37] <bjz> tikue: also: http://tim.dreamwidth.org/1820526.html
[09:30:58] <strcat> it'd be much easier than rustc
[09:31:45] <strcat> rt/$(1)/stage$(2)/%.o: rt/%.cpp $$(MKFILE_DEPS)
[09:31:48] <strcat>  @$$(call E, compile: $$@)
[09:31:50] <strcat>  $$(Q)$$(call CFG_COMPILE_CXX_$(1), $$@, $$(RUNTIME_INCS_$(1)_$(2)) \
[09:31:52] <strcat>                  $$(SNAP_DEFINES) $$(RUNTIME_CXXFLAGS_$(1)_$(2))) $$<
[09:31:54] <strcat> this stuff is basically line noise
[09:32:13] <strcat> the $(1) and $(2) for the stage and target triple, etc. - all adds up to unreadable noise :)
[09:33:17] <strcat> hm afaict we still don't optimize libuv on windows
[09:33:20] <strcat> I thought we fixed that
[09:33:38] *** kimundi is now known as zz_kimundi
[09:34:37] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[09:35:36] <strcat> oh was reverted.
[09:35:48] <strcat> if only github was clever enough to reopen bugs
[09:36:44] <pnkfelix> strcat: you don't need to tell me about it being line noise; i've been the one maintaining the mk/* files for a little while now
[09:36:51] <strcat> pnkfelix: heh :)
[09:37:23] * strcat is too scared to go near it
[09:37:28] <strcat> I seem to break something every time I do
[09:37:56] <strcat> I broke jemalloc on windows, backtraces on OS X, android several times
[09:37:58] <nmatsakis> my first Rust job was to port to 64 bit, which involved generalizing that gobbly gook to be parameterized over both stage and host
[09:38:09] <nmatsakis> blew my mind
[09:38:11] *** Quits: Aetherspawn_BNC (uid6924@moz-31ABA2C0.irccloud.com) (Ping timeout)
[09:39:08] <tikue> yuckk
[09:39:47] <strcat> 'Q' >> 'a' % 'b'
[09:39:51] <strcat> rusti: 'Q' >> 'a' % 'b'
[09:39:54] -rusti- '\u7fb8'
[09:40:01] * strcat can't get over how terrible that is
[09:40:41] <tikue> what am i reading >_>
[09:40:54] <tikue> bit shifting Q by the integral amount 'a' % 'b'?
[09:40:57] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[09:40:57] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/fdRWXw
[09:40:57] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[09:41:08] <klutzy> rusti: '0' + '0'
[09:41:12] <pnkfelix> tikue: he's illustrating the bug he's fixing, that chars should not have all the numeric traits.
[09:41:14] -rusti- timeout triggered!
[09:41:21] <strcat> rusti: '0' + '0'
[09:41:26] -rusti- timeout triggered!
[09:41:28] <klutzy> rusti: 0
[09:41:32] <klutzy> huh
[09:41:33] -rusti- timeout triggered!
[09:41:37] <tikue> pnkfelix: haha i know, but still! it's freaky stuff
[09:41:37] <StarLight> not again
[09:41:39] <pnkfelix> rusti: '\0' + '\0'
[09:41:40] -rusti- <anon>:4:12: 4:13 error: unknown character escape: 48
[09:41:41] -rusti- <anon>:4     let r = {
[09:41:41] -rusti-                      ^
[09:41:41] -rusti- application terminated with error code 101
[09:41:43] <strcat> it's because I disabled the rusti ramdisk
[09:42:02] <strcat> needed more memory to deal with eu4 being open + run-pass tests
[09:42:16] *** Quits: ecr (Thunderbir@moz-A7CDB794.dia.static.qwest.net) (Ping timeout)
[09:42:31] <strcat> rusti: '0' + '0'
[09:42:36] -rusti- '`'
[09:43:00] <strcat> pnkfelix: have to use \x00 or \u0000 because for some reason we're missing that :(
[09:43:07] <strcat> it should be pretty easy to add
[09:43:12] <strcat> I bet it's just a match branch
[09:43:35] <pnkfelix> strcat: eh, I don't mind forcing people to use '\x00'
[09:43:43] <pnkfelix> strcat: the above was just an old habit
[09:46:00] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[09:46:00] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/TLBEdg
[09:46:00] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[09:46:01] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[09:46:01] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/aXLfsA
[09:46:01] <ghrust> 13rust/06auto 141fbbc71 15Alex Crichton: Move llvm into the artifacts build directory
[09:46:01] <ghrust> 13rust/06auto 1444be4a4 15Alex Crichton: Move the llvm auto-clean stamp into $target/llvm
[09:46:02] <ghrust> 13rust/06auto 146b3c7cb 15Alex Crichton: Build rustllvm into $target/rustllvm
[09:46:04] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[09:46:12] <strcat> the arithmetic ops were mostly unused but so many places cast uint/int to char
[09:46:40] <strcat> huh
[09:46:47] <strcat> rusti: 1 << 1i8 << 1u8 << 1i16 << 1 as char << 1u64
[09:46:48] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[09:46:52] -rusti- timeout triggered!
[09:46:59] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[09:47:02] <strcat> rusti: 1 << 1i8 << 1u8 << 1i16 << 1 as char << 1u64
[09:47:05] -rusti- 32
[09:47:13] <strcat> I didn't think we allowed stuff like that
[09:47:18] <strcat> rusti: 1u + 2i
[09:47:19] -rusti- <anon>:5:14: 5:16 error: mismatched types: expected `uint` but found `int` (expected uint but found int)
[09:47:19] -rusti- <anon>:5          1u + 2i
[09:47:19] -rusti-                        ^~
[09:47:19] -rusti- error: aborting due to previous error
[09:47:19] -rusti- application terminated with error code 101
[09:47:33] <dbaupp> rusti: 1 << ' '
[09:47:35] -rusti- 4294967296
[09:48:13] <strcat> rusti: 0x10000 as char
[09:48:14] -rusti- '\U00010000'
[09:48:29] *** Joins: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[09:48:34] <strcat> done run-pass
[09:49:20] *** Joins: z0w0 (zack@moz-30F36A45.qld.bigpond.net.au)
[09:49:51] <strcat> dbaupp: ideally fixing bool won't be this annoying :)
[09:50:11] <strcat> rusti: 3.3 as bool as f32
[09:50:17] -rusti- timeout triggered!
[09:50:22] <strcat> rusti: 3.3 as bool as f32
[09:50:25] -rusti- 3f32
[09:50:32] <tikue_> rusti: 3.3 as bool
[09:50:35] -rusti- true
[09:50:42] <tikue_> is there a boolean trait?
[09:50:43] <strcat> rusti: 3.3 as bool == true
[09:50:44] -rusti- false
[09:50:57] <dbaupp> strcat: "ideally", haha.
[09:50:59] <strcat> rusti: let b = 3.3 as bool; (b, b == true, b == false)
[09:51:02] -rusti- (true, false, false)
[09:51:07] <tikue_> wow
[09:51:09] <tikue_> what
[09:51:14] *** Joins: novabyte (Instantbir@moz-3E0F9699.cable.virginmedia.com)
[09:51:19] <dbaupp> heh
[09:51:32] <strcat> char was more problematic anyway
[09:51:33] * dbaupp loves non-canonical bools
[09:51:34] <tikue_> so is there a trait that allows things to be casted to bool?
[09:51:36] <strcat> the compiler already has a ty_bool
[09:51:38] <strcat> not much work to do
[09:51:41] <strcat> tikue_: no
[09:51:52] <tikue_> strcat: why can numbers do it?
[09:51:54] <strcat> it's just hardcoded scalar cast handwaving ;p
[09:52:08] <strcat> tikue_: lemme show you the scariest thing in rustc
[09:52:13] <tikue_> lol ok
[09:52:18] <strcat> well, scariest thing I saw today
[09:52:22] <tikue_> :P
[09:53:00] *** Joins: Ms2ger (Ms2ger@moz-B53902AE.adsl-dyn.isp.belgacom.be)
[09:53:09] *** Quits: fhahn (fhahn@moz-7924DB5C.vie.surfer.at) (Ping timeout)
[09:54:00] <strcat> tikue_: https://github.com/thestinger/rust/blob/d140940d8e62774bcf9583dbacfe6cac85bb70da/src/librustc/middle/ty.rs#L4322 this thing
[09:54:08] <strcat> bane of my existence
[09:54:37] <dbaupp> at least it's t == true and f == false
[09:54:52] <tikue_> lol
[09:54:56] * dbaupp would *love* debugging typo swapping those two
[09:55:02] <strcat> I accidentally left 'rel' as 'f' and the compiler generated the comparison functions as infinitely recursively calls
[09:55:15] <nmatsakis> strcat: oh I had that table too
[09:55:16] <nmatsakis> *hate
[09:55:28] <strcat> and since we don't have stack overflow safety atm.... and there's also an LLVM bug eliminating no-op infinite recursion
[09:55:31] <nmatsakis> I feel like there's got to be a better wya to do it, or at least to format it
[09:55:49] <nmatsakis> also, we should clearly use fixed-length vectors there
[09:56:03] *** jorendorff_away is now known as jorendorff
[09:56:05] <nmatsakis> that's a lot of allocations for a temp table we're going to throw away
[09:56:22] <tikue_> good point
[09:56:36] <dbaupp> static hashmaps would be cool.
[09:56:43] <tikue_> yes
[09:56:50] <dbaupp> (in general, and also for this.)
[09:56:52] <strcat> nmatsakis: I can just fix it as part of this
[09:57:00] <nmatsakis> hashmap would be overkill for this...
[09:57:07] <nmatsakis> ...but moving it to a static would be nice
[09:57:10] * strcat had to add a row so he's responsible for making it ever so slightly worse ;p
[09:57:22] <nmatsakis> and I'd personally just format it in a not-so-condensed way,
[09:57:28] <nmatsakis> though that might make tidy upset
[09:57:39] <tikue_> fls and tru
[09:57:56] <nmatsakis> well I just meant inserting padding so that the columns don't have to be stacked on top,
[09:58:09] <tikue_> ah yeah
[09:58:11] <nmatsakis> strcat: in the old days, the labels had gotten messed up by a trip through the pretty printer,
[09:58:12] <tikue_> that too lol
[09:58:17] <nmatsakis> strcat: so that they didn't even line up
[09:58:25] <nmatsakis> at all...
[09:58:34] <strcat> nmatsakis: my brain didn't interpret 'rel' as comparison operators for some reason
[09:58:40] *** Joins: mihneadb (mihneadb@moz-329F29A3.lightspeed.sntcca.sbcglobal.net)
[09:58:45] <nmatsakis> can't imagine why not
[09:58:46] <tikue_> i still don't know what rel means
[09:58:52] <strcat> "oh some weird thing I obviously don't need"
[09:59:05] <tikue_> wait, comparison as in 
[09:59:08] <nmatsakis> relational operators
[09:59:13] <strcat> <, >, <=, >=
[09:59:13] <tikue_> rusti: 0u.cmp(1u)
[09:59:16] -rusti- <anon>:5:16: 5:18 error: mismatched types: expected `&uint` but found `uint` (expected &-ptr but found uint)
[09:59:16] -rusti- <anon>:5          0u.cmp(1u)
[09:59:16] -rusti-                          ^~
[09:59:16] -rusti- error: aborting due to previous error
[09:59:16] -rusti- application terminated with error code 101
[09:59:21] <tikue_> rusti: 0u.cmp(&1u)
[09:59:23] -rusti- Less
[09:59:23] <strcat> no that's from TotalOrd, the compiler is unaware of it
[09:59:27] <tikue_> oh
[09:59:43] <tikue_> so just Ord stuff?
[09:59:44] <strcat> it tries using this stuff before using the lang item traits
[09:59:57] <strcat> so since I left one 'f', it fell back to calling itself recursively
[10:00:15] <strcat> with optimizations on -> LLVM eliminates the infinitely recursive loops due to a known bug
[10:00:22] <strcat> yay weird unexplainable failures ;p
[10:00:33] <strcat> with optimizations off at least you get a nice segfault or bus error
[10:00:36] *** Quits: mihneadb (mihneadb@moz-329F29A3.lightspeed.sntcca.sbcglobal.net) (Ping timeout)
[10:00:52] * strcat wants __morestack to work again, at least just verify against a static size
[10:01:05] *** Joins: fhahn (fhahn@moz-7924DB5C.vie.surfer.at)
[10:01:11] <strcat> maybe it just needs an abort call somewhere
[10:02:26] *** Parts: patrickg (patrick@moz-35CE42C5.de) ()
[10:03:33] <strcat> nmatsakis: any idea what the last column does? "logic"... it's true for struct? :|
[10:03:39] <strcat> I guess it's just !
[10:03:56] <strcat> well no that doesn't make sense
[10:04:18] <tikue_> rusti: struct Foo; !Foo
[10:04:18] -rusti- <anon>:5:21: 5:25 error: cannot apply unary operator `!` to type `main::Foo`
[10:04:18] -rusti- <anon>:5          struct Foo; !Foo
[10:04:18] -rusti-                               ^~~~
[10:04:19] -rusti- error: aborting due to previous error
[10:04:19] -rusti- application terminated with error code 101
[10:05:06] *** Quits: msingle (Thunderbir@B9A7424F.3D69E65D.A6DC652B.IP) (Ping timeout)
[10:05:09] <dbaupp> strcat: see the match in fn opcat above
[10:05:11] <nmatsakis> strcat: uh... let me look
[10:05:20] <dbaupp>           ast::BiAnd => opcat_logic,
[10:05:21] <dbaupp>           ast::BiOr => opcat_logic,
[10:05:23] <strcat> oh it's && and ||
[10:05:25] <strcat> nmatsakis: nvm
[10:05:37] <strcat> I don't understand the struct row though
[10:05:56] <dbaupp> rusti: struct Foo; Foo && Foo
[10:05:56] -rusti- <anon>:5:21: 5:31 error: binary operation && cannot be applied to type `main::Foo`
[10:05:56] -rusti- <anon>:5          struct Foo; Foo && Foo
[10:05:57] -rusti-                               ^~~~~~~~~~
[10:05:57] -rusti- error: aborting due to previous error
[10:05:57] -rusti- application terminated with error code 101
[10:06:00] <nmatsakis> strcat: yes, I thnk it's logical not, but why it's true for struct I don't know.
[10:06:10] <nmatsakis> strcat: for that matter, I don't know why anything is true for struct
[10:06:12] <strcat> nmatsakis: I think ! is actually part of 'bit'
[10:06:23] <strcat> nmatsakis: or why struct is even there... :)
[10:06:34] <tikue_> yay for comments
[10:06:34] <nmatsakis> strcat: I'm wondering if struct is never used
[10:06:34] <strcat> they're all false for 'other'
[10:06:40] <strcat>           ty_tup(_) | ty_enum(_, _) => tycat_struct,
[10:06:43] <strcat> it does that though
[10:06:56] <strcat> maybe ty_enum is a C-like variant?
[10:06:56] <nmatsakis> strcat: oh, you're right, duh logic is && and ||
[10:07:17] <strcat> rusti: (1,) & (1,)
[10:07:17] -rusti- <anon>:5:9: 5:20 error: binary operation & cannot be applied to type `(<VI0>)`
[10:07:17] -rusti- <anon>:5          (1,) & (1,)
[10:07:18] -rusti-                   ^~~~~~~~~~~
[10:07:18] -rusti- error: aborting due to previous error
[10:07:18] -rusti- application terminated with error code 101
[10:07:19] <nmatsakis> tikue_: (not to defend rustc's comments, but this part -- what category is what -- is pretty clearly laid out up above)
[10:07:38] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[10:07:57] <tikue_> nmatsakis: oh i was responding to "why is struct even there" :P
[10:08:23] <strcat> rusti: enum Foo { A } A + A
[10:08:24] -rusti- <anon>:5:24: 5:29 error: binary operation + cannot be applied to type `main::Foo`
[10:08:24] -rusti- <anon>:5          enum Foo { A } A + A
[10:08:24] -rusti-                                  ^~~~~
[10:08:24] -rusti- error: aborting due to previous error
[10:08:24] -rusti- application terminated with error code 101
[10:08:25] <nmatsakis> ah, that indeed is not documented and I don't know, actually
[10:08:32] * strcat doesn't get it
[10:08:32] <nmatsakis> strcat: it seems like struct should not be there to me.
[10:08:45] <nmatsakis> confusing
[10:09:02] <tikue_> it seems to be ignored completely
[10:09:37] <nmatsakis> it's not ignored completely, I don't think
[10:09:39] <nmatsakis> for one thing,
[10:09:46] <nmatsakis> the category "struct" corresponds to tuples and enums
[10:09:55] <nmatsakis> naturally
[10:10:07] <strcat> strangely it doesn't actually work though
[10:10:15] <strcat> maybe there's another layer protecting it
[10:10:22] <nmatsakis> what do you mean by "doesn't actually work"
[10:10:44] <strcat> nmatsakis: I mean I'd expect it to try trans'ing 'enum Foo { A } A + A'
[10:10:48] <tikue_> strcat: you mean the fact that it says all true for struct, but none of the associated operations work?
[10:10:48] <strcat> since it's in that table
[10:10:52] <strcat> tikue_: yeah
[10:10:56] <nmatsakis> yes, I see, I expected that error was coming from somewhere else,
[10:11:10] <nmatsakis> but I'm not sure where, it'd have to be check.rs
[10:11:10] <tikue_> rusti: true + true
[10:11:11] -rusti- <anon>:5:9: 5:20 error: binary operation + cannot be applied to type `bool`
[10:11:11] -rusti- <anon>:5          true + true
[10:11:11] -rusti-                   ^~~~~~~~~~~
[10:11:11] -rusti- error: aborting due to previous error
[10:11:12] -rusti- application terminated with error code 101
[10:11:39] <tikue_> rusti: (true as uint + 1) as bool
[10:11:40] -rusti- true
[10:11:55] <tikue_> rusti: ((true as uint + 1) as bool) == true
[10:12:00] -rusti- false
[10:12:20] <tikue_> personally, i like being able to cast objects to bool
[10:12:30] <tikue_> but 
[10:12:47] <tikue_> idk
[10:12:53] <tikue_> rusti: struct Foo; Foo as bool
[10:12:53] -rusti- <anon>:5:21: 5:32 error: non-scalar cast: `main::Foo` as `bool`
[10:12:54] -rusti- <anon>:5          struct Foo; Foo as bool
[10:12:54] -rusti-                               ^~~~~~~~~~~
[10:12:54] -rusti- error: aborting due to previous error
[10:12:54] -rusti- application terminated with error code 101
[10:13:22] <Ms2ger> tikue_, objects? Why's that?
[10:13:35] <tikue_> Ms2ger: it's a python idiom i've just grown accustomed to
[10:13:40] <nmatsakis> strcat: I ... don't get it either :)
[10:14:26] <strcat> tikue_: 'as' always just truncates though
[10:14:26] <tikue_> Ms2ger: so you could, for example, test whether a list is empty by saying `if list: ..`
[10:14:30] <strcat> it doesn't do what you'd expect
[10:14:33] <strcat> like
[10:14:36] <strcat> rusti: 0b011110
[10:14:36] -rusti- 30
[10:14:38] <strcat> rusti: 0b011110 as bool
[10:14:39] -rusti- true
[10:14:42] <strcat> rusti: 0b011111 as bool
[10:14:42] -rusti- true
[10:14:46] <strcat> rusti: 0b00001 as bool
[10:14:47] -rusti- true
[10:14:53] <Ms2ger> tikue_, yeah, that's pretty useful indeed
[10:14:56] * strcat gives up
[10:14:58] <nmatsakis> tikue_: makes more sense in Python where you have None than in Rust where you don't...
[10:14:59] <strcat> oh
[10:15:19] <nmatsakis> though lists are true if they are non-empty, iirc
[10:15:20] <strcat> rusti: 0b10000000000 as bool
[10:15:21] -rusti- false
[10:15:24] <strcat> there we go
[10:15:25] <Ms2ger> What nmatsakis said
[10:15:25] <tikue_> nmatsakis: yeah, i agree. i don't think it'd be very defensible in rust
[10:15:29] <strcat> I forgot that it's i8, not i1
[10:15:38] <strcat> it just truncates
[10:16:03] <tikue_> nmatsakis: yeah, true if nonempty, false if empty
[10:16:12] * strcat doesn't *think* a cast to bool in C++ does that
[10:16:26] *** Joins: relrod (relrod@moz-AABB5D31.redhat.com)
[10:17:44] <tikue_> rusti: [0, 0, 0].any(|&el| el as bool)
[10:17:48] -rusti- pastebinned 8 lines of output: http://ix.io/7PF
[10:17:57] <tikue_> rusti: [0, 0, 0].iter().any(|&el| el as bool)
[10:17:59] -rusti- pastebinned 11 lines of output: http://ix.io/7PG
[10:18:14] <strcat> rusti: true | 3
[10:18:15] -rusti- <anon>:5:16: 5:17 error: mismatched types: expected `bool` but found `<VI0>` (expected bool but found integral variable)
[10:18:15] -rusti- <anon>:5          true | 3
[10:18:15] -rusti-                          ^
[10:18:15] -rusti- error: aborting due to previous error
[10:18:15] -rusti- application terminated with error code 101
[10:18:18] <strcat> rusti: true << 3
[10:18:18] -rusti- <anon>:5:9: 5:18 error: binary operation << cannot be applied to type `bool`
[10:18:19] -rusti- <anon>:5          true << 3
[10:18:19] <tikue_> rusti: ~[0, 0, 0].imove_ter().any(|&el| el as bool)
[10:18:21] -rusti-                   ^~~~~~~~~
[10:18:23] -rusti- error: aborting due to previous error
[10:18:25] -rusti- application terminated with error code 101
[10:18:26] -rusti- <anon>:5:21: 5:22 error: unknown start of token: \x1c
[10:18:26] <tikue_> rusti: ~[0, 0, 0].move_ter().any(|&el| el as bool)
[10:18:28] -rusti- <anon>:5          ~[0, 0, 0].imove_ter().any(|&el| el as bool)
[10:18:30] -rusti-                               ^
[10:18:32] -rusti- application terminated with error code 101
[10:18:33] -rusti- pastebinned 8 lines of output: http://ix.io/7PH
[10:18:34] <tikue_> rusti: ~[0, 0, 0].move_iter().any(|&el| el as bool)
[10:18:34] -rusti- <anon>:5:45: 5:46 error: unknown start of token: \x1c
[10:18:36] -rusti- <anon>:5          ~[0, 0, 0].move_iter().any(|&el| el as bool)
[10:18:38] -rusti-                                                       ^
[10:18:40] -rusti- application terminated with error code 101
[10:18:45] <pnkfelix> okay guys, reminder: rusti has private message support
[10:18:56] <tikue_> rusti: ~[0, 0, 0].move_iter().any(|&el| el as bool)
[10:18:58] -rusti- pastebinned 8 lines of output: http://ix.io/7PI
[10:19:13] <tikue_> pnkfelix: you never expect it to take as many tries as it does
[10:19:19] <tikue_> at least i don't :\
[10:19:24] <pnkfelix> strcat: Can you maybe put something in where if someone repeatedly publically sends erroneous inputs to rusti, it privately reminds them that it has a private message mode available?
[10:19:36] <tikue_> rusti: (~[0, 0, 0]).move_iter().any(|&el| el as bool)
[10:19:37] -rusti- <anon>:5:39: 5:42 error: mismatched types: expected `<VI2>` but found an &-pointer pattern
[10:19:37] -rusti- <anon>:5          (~[0, 0, 0]).move_iter().any(|&el| el as bool)
[10:19:37] -rusti-                                                 ^~~
[10:19:37] -rusti- error: aborting due to previous error
[10:19:37] -rusti- application terminated with error code 101
[10:19:41] <tikue_> ok i'm done
[10:19:45] <strcat> pnkfelix: I guess so, but it's a pretty awful async irc library
[10:19:53] <strcat> so it is pretty much stateless ;p
[10:20:08] <pnkfelix> strcat: (usually when someone makes multiple erroneous inputs, its a sign that they are not trying to illustrate a point to the group)
[10:20:12] * strcat could hack it together in a few mins
[10:20:23] <pnkfelix> strcat: hmm, I guess maintaining state is indeed an issue...
[10:20:35] <strcat> since it'd be bad if it leaked
[10:20:57] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[10:20:57] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 144711e96 to 14142dab4: 02http://git.io/N3iJvQ
[10:20:57] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[10:20:59] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[10:20:59] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/CsizrQ
[10:20:59] <ghrust> 13rust/06auto 142c573e9 15Alex Crichton: Don't die with an ICE on a blank library name...
[10:20:59] <ghrust> 13rust/06auto 14787f4c9 15bors: auto merge of #8976 : alexcrichton/rust/issue-5425, r=pnkfelix...
[10:20:59] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[10:21:08] <tikue_> rusti: (~[0, 0, 0]).move_iter().any(|el| el as bool)
[10:21:09] -rusti- false
[10:21:13] <tikue_> nailed it
[10:21:19] <pnkfelix> strcat: a more brute force approach would be for it to send the private message reminder on *any* public input that is erroneous.
[10:21:35] *** Quits: StarLight (StarLight@moz-BFE8DFC0.dynamic.avangarddsl.ru) (Ping timeout)
[10:21:37] <strcat> pnkfelix: I could also just teach it to always pastebin errors
[10:21:37] <pnkfelix> strcat: but I'm not sure that people would be happy with that...
[10:21:48] <tikue_> strcat++
[10:21:50] <strcat> ix.io is getting really slow though
[10:21:59] <strcat> I think I must have created half the pastebins on it through rusti
[10:22:02] <tikue_> orrr
[10:22:06] <tikue_> you could send errors privately
[10:22:07] <pnkfelix> strcat: no, I think the noise in the channel by the REPL cycle is too much, even with one line pastebins
[10:22:16] <strcat> pnkfelix: that's true
[10:22:30] * strcat wonders how lambdabot survives
[10:22:47] <strcat> lambdabot actually lets you invite it to other channels so it's good at making people angry
[10:23:19] <tikue_> strcat: put rusti in servo
[10:23:30] <tikue_> #servo
[10:23:33] <Ms2ger> Put rusti in #rusti? :)
[10:23:44] <tikue_> Ms2ger has a point
[10:23:54] <pnkfelix> Let me be clear: I don't mind having rusti here.
[10:24:00] <pnkfelix> I think its a great toool
[10:24:20] <pnkfelix> I just think its not doing enough to encourage good usage habits
[10:24:23] <sigma> I've just been PMing rusti unless I want to use it's output to show I've found a solution to my problem
[10:24:29] <Ms2ger> (I think it's useful at times to be able to show input/output to people, but maybe it's used too much as a repl)
[10:24:37] <pnkfelix> sigma: Yes, that is the usage pattern I am trying to get rusti to encourage
[10:24:59] <strcat> pnkfelix: could have it require you specify a name to send something to
[10:25:02] <strcat> hm
[10:25:14] <sigma> and making my input to rusti short enough that it isn't spam normally helps me understand whay I'm trying to do better
[10:25:17] <strcat> probably a bad idea
[10:25:26] <tikue_> lol
[10:25:36] *** Joins: StarLight (StarLight@moz-69132723.pppoe.avangarddsl.ru)
[10:25:43] <tikue_> it'd look like /msg rusti strcat "huehuehuehuehue"
[10:25:47] <Ms2ger> "rusti: tell channel about ..."
[10:26:14] <tikue_> strcat: definitely too abusable lol
[10:27:58] <sigma> you could have it so that rusti asked you if you wanted to receive messages that others had directed at you... but that seems like a feature too far
[10:28:38] <tikue_> anything involving state doesn't seem great imo
[10:28:53] * dbaupp votes for putting rusti on github so that others can implement all these weird and wonderful features
[10:29:02] *** Joins: sprog (Mibbit@CFE66284.9E6A9297.520CDC98.IP)
[10:29:08] <strcat> pnkfelix: also, if we had the web version on the site people would use that ;P
[10:29:10] <sigma> sounds like a great idea 
[10:29:21] <pnkfelix> dbaupp: true, I don't want strcat distracted by this
[10:29:25] <strcat> rusti is sort of on github
[10:29:27] <fabiand> dbaupp, +1
[10:29:39] <strcat> I didn't put the irc bot script because it's so embarrassingly bad
[10:29:50] <Ms2ger> Don't we have a rusti command line tool too?
[10:29:55] <fabiand> strcat, can you provide an url?
[10:30:04] <pnkfelix> Ms2ger: its broken
[10:30:04] <strcat> http://strcat.zapto.org:8000/
[10:30:11] <Ms2ger> Ah
[10:30:15] <strcat> oh you mean the github url
[10:30:18] <Ms2ger> Can it be fixed? :)
[10:30:21] <tikue_> strcat's rusti is best rusti
[10:30:27] <strcat> https://github.com/thestinger/rust-playpen
[10:30:46] <strcat> it's the web one
[10:30:47] <sigma> rusty playpen, that sounds safe
[10:31:03] <Yoric> I wouldn't put my kid in a rust playpen.
[10:31:07] <strcat> but rusti is just a bash script in that 'bin' dir + a generic irc bot running it
[10:31:37] <tikue_> strcat: ooh, that web editor should be on rust-lang.org
[10:31:40] <strcat> s/bash/dash/ (bash requires syscalls I don't want to allow :P)
[10:32:01] <strcat> rusti: 2
[10:32:02] -rusti- 2
[10:32:15] <sprog> Hi! I'm would like to work on this issue https://github.com/mozilla/rust/issues/8815 . I am trying to run the tests (after removing the #ignore 's) but when i run 'make check TESTNAME=src/libstd/rt/uv/net.rs NO_REBUILD=1' I am getting an entry point not found error 'The procedure entry point rust_uv_fs_close could not be located in the dynamic link library 
[10:32:20] <sprog> rustrt.dll'
[10:32:32] <strcat> tikue_: yeah, but it needs a shiny server devoted to it
[10:32:42] <tikue_> strcat: good point
[10:33:09] <strcat> the irc bot is synchronous
[10:33:18] <strcat> so at most it's going to use 128MiB
[10:33:37] <tikue_> right
[10:33:39] <fabiand> strcat, what about putting it into an lxc container?
[10:33:57] <strcat> fabiand: it's more secure than that
[10:34:04] <fabiand> ack
[10:34:15] <strcat> fabiand: it uses https://github.com/thestinger/playpen
[10:34:16] <fabiand> but lxc with selinux is quite secure .. :)
[10:34:32] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Client exited)
[10:34:40] <strcat> well it doesn't actually have write access to anything but tmpfs dirs, and no network
[10:34:45] <strcat> so there's not much for selinux to do
[10:34:50] <strcat> lxc doesn't like a read-only root
[10:35:13] <strcat> and I don't *think* it uses MS_PRIVATE
[10:35:25] <strcat> so the mounts would probably leak into each other if you mounted N on one mount point
[10:36:57] <strcat> fabiand: it actually originally used lxc, but I just found it a pain
[10:37:19] <strcat> so I wrote a little C program with what I actually needed
[10:37:21] *** Quits: richard|s (mindginati@moz-C62D9A3C.dsl.dyn.ihug.co.nz) (Quit: brb)
[10:37:36] <fabiand> right, that might also do the job :)
[10:40:55] <strcat> lxc and systemd-nspawn both just seem aimed at the use case of running a nested OS
[10:43:03] *** Quits: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue_)
[10:44:11] <fabiand> strcat, do you know virt-sandbox and sandbox?
[10:44:21] <fabiand> I see them more as running an app in a secure containmen
[10:44:22] <fabiand> t
[10:44:34] <strcat> fabiand: nope, didn't know about them
[10:44:46] * strcat knows about libvirt, but not those things
[10:45:03] <fabiand> strcat, at least virt-sandbox works fine for me on fedora ... but they are still a bit rough around the edges ..
[10:45:22] * strcat uses arch linux so no easy selinux
[10:45:24] <fabiand> IIUIC sandbox is an selinux only sandbox and virt-sandbox is selinux+lxc and you can tune what is allowed ..
[10:45:27] <fabiand> :)
[10:45:32] <fabiand> but it should still be in there
[10:46:13] <strcat> of all things that could have failed, a benchmark of not reading anything
[10:46:19] <fabiand> e.g. virt-sandbox -c lxc:/// -N dhcp -- $cmd
[10:46:47] *** Quits: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com) (Ping timeout)
[10:51:22] <strcat> huh, I don't really see how this test could have possibly ever worked
[10:51:28] <strcat> rusti: -1 as char as int
[10:51:31] -rusti- -1
[10:51:40] <strcat> rusti: -1u32 as char as int
[10:51:40] -rusti- -1
[10:51:48] *** Joins: miloshadzic (miloshadzi@F8195CC5.425C93D4.449B8A48.IP)
[10:52:06] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[10:52:24] <strcat> rusti: unsafe { let x: char = std::cast::transmute(-1u32); x as int }
[10:52:25] -rusti- -1
[10:55:27] *** Joins: fyolnish (fyolnish@moz-E730FCE7.uqwimax.jp)
[10:58:23] <strcat> dbaupp: a libstd test *started* failing
[10:58:27] <strcat> it wasn't before :s
[10:59:41] <dbaupp> strcat: :( which?
[10:59:54] <strcat> io::tests::test_readchar_empty
[11:00:17] <strcat> one of those ones casting -1 to char, but it worked just a moment ago
[11:00:28] * strcat didn't change anything
[11:00:54] *** Quits: novabyte (Instantbir@moz-3E0F9699.cable.virginmedia.com) (Quit: bye bye)
[11:03:19] *** Quits: wilsonk-laptop (kvirc@moz-8E86F35A.cg.shawcable.net) (Ping timeout)
[11:03:52] <strcat> rusti: 4294967295 + 1
[11:03:54] -rusti- 4294967296
[11:04:09] <strcat> rusti: 4294967295 as i32
[11:04:10] -rusti- -1i32
[11:04:38] <strcat> dbaupp: I think it might have to do with me making chars unsigned
[11:05:40] <strcat> rusti: -1u32 as char as int
[11:05:40] -rusti- -1
[11:05:43] <strcat> rusti: -1i32 as char as int
[11:05:44] -rusti- -1
[11:05:48] * strcat doesn't get it
[11:06:39] <strcat> rusti: -1u32 as char as u32
[11:06:40] -rusti- 4294967295u32
[11:06:43] <strcat> rusti: -1u32 as char as i32
[11:06:44] -rusti- -1i32
[11:07:41] * strcat sees where it goes wrong
[11:08:00] <strcat> rusti: -1u32 as char as i64
[11:08:00] -rusti- -1i64
[11:08:06] <strcat> rusti: -1u32 as i64
[11:08:06] -rusti- 4294967295i64
[11:10:12] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[11:11:30] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[11:12:34] <strcat> dbaupp:  https://github.com/mozilla/rust/pull/8974 r?
[11:12:44] <strcat> think it's all good
[11:13:43] <strcat> was just because I made char unsigned, so it doesn't use sign extend
[11:14:03] *** Quits: z0w0 (zack@moz-30F36A45.qld.bigpond.net.au) (Client exited)
[11:14:46] *** Joins: a_m0d|home (a_m0d@moz-8A06F789.acanac.net)
[11:15:58] *** Joins: Aetherspawn_BNC (uid6924@moz-31ABA2C0.irccloud.com)
[11:17:28] *** Quits: bblum (bblum@moz-2B41ACB5.andrew.cmu.edu) (Ping timeout)
[11:17:34] *** Quits: rpearl (rpearl@moz-2B41ACB5.andrew.cmu.edu) (Ping timeout)
[11:18:06] <dbaupp> strcat: https://github.com/mozilla/rust/pull/8974/files#L41L45 heh, we were testing that the chars were weird
[11:20:38] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Input/output error)
[11:24:16] *** Joins: Earnestly (earnest@moz-F387F877.dyn.plus.net)
[11:25:03] <strcat> once std::io is replaced we can make size_of::<char>() == size_of::<Option<char>>()
[11:25:47] <strcat> or before then... but it setting the most significant bit to indicate EOF is bad
[11:26:01] <Ms2ger> Mm, EOF
[11:26:13] <Ms2ger> That's a terrible API in any case
[11:26:54] *** Joins: Upstream (Upstream@B7461B57.E9ECED8E.4E275CC3.IP)
[11:26:56] <strcat> well it was casting -1 as char, setting the most + least significant bits
[11:27:03] <strcat> and it was also casting to int, to check against -1
[11:27:22] <strcat> so not only was it storing an invalid code point, it was depending on char being signed, for sign extend to work
[11:27:37] * Ms2ger cries a little
[11:28:11] * strcat made char unsigned since.... the sign bit is always going to be zero if it's signed, kinda pointless
[11:28:34] <sigma> hmm, is there a reason CharIterator only implements Iterator/DoubleEndedIterator and not Peekable etc? or has it just not been done?
[11:29:16] <strcat> sigma: those aren't things it has to impl
[11:29:24] <strcat> they are provided as default methods
[11:29:35] <sigma> ahh, cool
[11:30:04] <strcat> sigma: http://seld.be/rustdoc/master/std/iterator/trait.Iterator.html
[11:30:14] <strcat> only 'next' is not a default method, but most will override size_hint
[11:30:56] <sigma> Aha, ok, I worked out what I was doing wrong
[11:30:59] <sigma> thanks
[11:31:04] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[11:31:05] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/CsizrQ
[11:31:05] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[11:31:32] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[11:35:58] *** Quits: a_m0d|home (a_m0d@moz-8A06F789.acanac.net) (Quit: Leaving.)
[11:36:00] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[11:36:00] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/Y1zbVw
[11:36:00] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[11:36:01] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[11:36:01] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/KzO9vQ
[11:36:01] <ghrust> 13rust/06auto 14fc9511c 15Daniel Micay: stop treating char as an integer type...
[11:36:01] <ghrust> 13rust/06auto 14968f947 15bors: auto merge of #8974 : thestinger/rust/char, r=huonw...
[11:36:01] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[11:37:06] <strcat> nmatsakis: https://github.com/mozilla/rust/compare/787f4c986c5c...968f947f2cd0#L17L4319 now human compatible ;p
[11:46:06] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[11:46:39] *** Joins: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net)
[11:47:12] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[11:48:04] *** Joins: a_m0d|home (a_m0d@moz-8A06F789.acanac.net)
[11:51:29] *** Quits: a_m0d|home (a_m0d@moz-8A06F789.acanac.net) (Quit: Leaving.)
[11:52:56] <strcat> dbaupp: nooo, debuginfo tests failed ;[
[11:55:02] *** Quits: sammykim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[11:55:27] <dbaupp> strcat: :'(
[11:55:57] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[11:55:57] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14968f947 to 14787f4c9: 02http://git.io/N3iJvQ
[11:55:57] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[11:55:59] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[11:55:59] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/fvbvvg
[11:55:59] <ghrust> 13rust/06auto 14324a46c 15Daniel Micay: stop treating char as an integer type...
[11:55:59] <ghrust> 13rust/06auto 14f2a7656 15bors: auto merge of #8974 : thestinger/rust/char, r=huonw...
[11:56:00] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[11:57:57] *** Quits: sprog (Mibbit@CFE66284.9E6A9297.520CDC98.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[11:58:11] <nmatsakis> strcat: much improved
[11:58:52] *** Joins: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com)
[12:02:11] *** Joins: jaen (jaen@moz-54938B4E.neoplus.adsl.tpnet.pl)
[12:07:21] <strcat> that's good, spurious github failure
[12:10:57] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[12:10:57] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14f2a7656 to 14787f4c9: 02http://git.io/N3iJvQ
[12:10:57] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[12:10:58] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[12:10:58] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/QRTuuQ
[12:10:58] <ghrust> 13rust/06auto 1462a3434 15Daniel Micay: stop treating char as an integer type...
[12:10:58] <ghrust> 13rust/06auto 1451331f6 15bors: auto merge of #8974 : thestinger/rust/char, r=huonw...
[12:10:59] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[12:11:44] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: out)
[12:12:05] *** Joins: mukilan (Mibbit@898A21C0.5F016CAB.520CDC98.IP)
[12:13:39] *** jorendorff is now known as jorendorff_away
[12:16:52] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[12:20:40] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[12:21:24] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[12:21:31] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[12:22:31] *** Joins: kspaans (kspaans@moz-21D6B3DE.csclub.uwaterloo.ca)
[12:24:41] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[12:29:23] *** Joins: victorporof (victorporo@9D964D4D.36D485C.2B3D3D4.IP)
[12:34:42] *** Quits: Shaladdle (Shaladdle@moz-424BC304.hsd1.pa.comcast.net) (Ping timeout)
[12:35:02] *** Joins: Shaladdle (Shaladdle@moz-424BC304.hsd1.pa.comcast.net)
[12:37:28] *** Joins: mindcat (mindcat@239A9CA4.C53DF77.D6E1F3C4.IP)
[12:39:00] *** Quits: mukilan (Mibbit@898A21C0.5F016CAB.520CDC98.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:39:05] <mindcat> dbaupp: I made it! a echo server! http://paste.ubuntu.com/6062502/
[12:39:59] *** Joins: shmax (Mibbit@6F798661.E5EFB142.520CDC98.IP)
[12:40:28] <shmax> what is the RUSTLOG value for logging all crates/modules?
[12:42:25] <dbaupp> shmax: RUST_LOG=4 ./foo (maybe)
[12:42:45] <dbaupp> mindcat: nice, what was the problem?
[12:45:29] <mindcat> dbaupp: by "fmt!" problem
[12:46:42] *** Quits: shmax (Mibbit@6F798661.E5EFB142.520CDC98.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:46:54] <mindcat> dbaupp: look 46 and 47 lines, I just did that, then worked.
[12:47:33] <mindcat> dbaupp: no error now
[12:47:56] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[12:48:34] <mindcat> dbaupp: Oh! I forget something, it still not completed
[12:50:36] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[12:52:52] <mindcat> and now, how can I change string to bytes?
[12:53:26] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[12:53:26] *** ChanServ sets mode: +o pnkfelix
[12:54:10] <dbaupp> .as_bytes()
[12:54:21] *** Joins: shmax (Mibbit@FA7E207E.8C5DFFF8.520CDC98.IP)
[12:54:28] <shmax> dbaupp: if i modify a file in std::rt (specifically remove an #ignore on a test), should i rebuild rustc? how will i run that particular test case ?
[12:56:30] <cmr> shmax: you should be able to do make check-stage1 NO_REBUILD=1
[12:56:52] <dbaupp> `make check-stage1-std NO_REBUILD=1 TESTNAME=name-of-test-here`
[12:57:04] <shmax> cmr & dbaupp: thanks!
[12:57:25] <shmax> is TESTNAME the filename or the function name?
[12:57:46] <dbaupp> mindcat: https://gist.github.com/huonw/6436572
[12:57:50] <mindcat> dbaupp: thanks, it is really echo server now. http://paste.ubuntu.com/6062571/
[12:57:58] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[12:58:26] <dbaupp> mindcat: (you definitely should *not* be using `unsafe` functions for such code. :) )
[12:58:50] <mindcat> dbaupp: Ok. :D
[12:59:20] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[13:00:15] <dbaupp> mindcat: the reason it works if you do use `unsafe` is because that is avoiding the utf8 checks. That is, it is actually incorrect.
[13:00:20] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[13:00:45] <dbaupp> (that is, `push_bytes` doesn't check that the bytes are valid utf8.)
[13:01:09] <cmr> Why @mut ~str O_o
[13:02:22] <mindcat> cmr: it was something functions need that type, then I did it.
[13:05:18] *** Quits: shmax (Mibbit@FA7E207E.8C5DFFF8.520CDC98.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:05:52] <dbaupp> slightly nicer, and it handles non-utf8 input properly. https://gist.github.com/huonw/6436572
[13:05:59] <jensnockert> Wiring? In my Rust? More likely than you think! https://github.com/jensnockert/dueboot/blob/master/arduino.rs
[13:07:29] <cmr> Wiring?
[13:07:34] <dbaupp> jensnockert: you're rusting up all your wires? won't they stop working :(
[13:07:52] <jensnockert> cmr: The main Arduino library for doing stuff(tm).
[13:07:56] *** jorendorff_away is now known as jorendorff
[13:07:58] <cmr> oh
[13:08:00] <jensnockert> dbaupp: Yeah :(
[13:08:47] <mindcat> dbaupp: can we show that non-utf8 bytes like that "/x00/xff"?
[13:10:20] *** Quits: kniteli (Mibbit@moz-F217D31A.hsd1.or.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[13:10:58] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[13:11:20] <dbaupp> mindcat: sure, https://gist.github.com/huonw/6436572#file-echo-server-rs-L35
[13:11:49] <dbaupp> (although that's just printing &[0, 255], ...)
[13:14:35] <mindcat> dbaupp: display connection IP? :D
[13:15:45] *** Parts: kspaans (kspaans@moz-21D6B3DE.csclub.uwaterloo.ca) ()
[13:16:00] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[13:16:00] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/QRTuuQ
[13:16:00] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[13:16:34] <dbaupp> mindcat: I don't know how to
[13:17:16] <mindcat> dbaupp: oh, if I sent some non-utf8 bytes, it won't send back
[13:17:16] <dbaupp> mindcat: I was just editing your work, I didn't know how to use std::rt::io::net before touching your code :)
[13:17:51] <mindcat> dbaupp: then we research this?
[13:17:54] <dbaupp> it should, the send is outside the match that checks for utf8 vs non-utf8. Maybe telnet doesn't show them?
[13:17:56] *** jorendorff is now known as jorendorff_away
[13:17:57] *** Quits: Upstream (Upstream@B7461B57.E9ECED8E.4E275CC3.IP) (Ping timeout)
[13:18:41] <mindcat> dbaupp: yes, it is telnet problem :D
[13:18:58] *** Quits: Aszarsha (Aszarsha@moz-9F33802B.s-cbib.u-bordeaux2.fr) (Ping timeout)
[13:20:16] <ChrisMorgan> You can also try using netcat instead of netcat.
[13:20:23] <cmr> erm
[13:20:59] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[13:20:59] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/QvynHw
[13:20:59] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[13:21:00] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[13:21:00] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/tIaPYQ
[13:21:00] <ghrust> 13rust/06auto 1428f3625 15Daniel Micay: add test for tydesc name
[13:21:00] <ghrust> 13rust/06auto 1467555d9 15bors: auto merge of #8956 : thestinger/rust/test, r=huonw
[13:21:00] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[13:21:04] <ChrisMorgan> s/netcat\.$/telnet./
[13:21:07] <mindcat> ChrisMorgan: Oh, its worked too
[13:21:54] <ChrisMorgan> Note that telnet uses CRLF, while netcat in interactive mode uses LF (on my machine, anyway).
[13:21:55] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[13:22:18] <ChrisMorgan> But you can pipe to it: e.g. ``echo 'GET / HTTP/1.0\r\n' | netcat localhost 8001``
[13:22:56] <mindcat> ChrisMorgan: I just run with you said mode
[13:23:04] <mindcat> ChrisMorgan: interactive mode
[13:23:05] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[13:24:02] <jensnockert> dbaupp: Do you know if there is a version if zero.rs working with the #[fixed_stack_segment] changes?
[13:24:29] <dbaupp> jensnockert: no idea
[13:25:38] * jensnockert hugs dbaupp.
[13:25:45] <mindcat> str[:] -> `a str
[13:26:44] * dbaupp hugs jensnockert 
[13:27:09] * mindcat hugs both
[13:27:17] <cmr> jensnockert: I know of one!
[13:27:19] <cmr> The empty file.
[13:27:48] <dbaupp> cmr: need a #[start], so no. :P
[13:28:04] <jensnockert> I don't need a start.
[13:28:08] <dbaupp> jensnockert: also, #[export_name="loop"] landed, so you can use less sed :)
[13:28:44] <jensnockert> dbaupp: Hurray!
[13:30:50] <jensnockert> Yeah, it actually works without zero.rs.
[13:31:00] <cmr> :3
[13:31:02] <jensnockert> I assume some things like ~ got broken though, but *meh*
[13:31:09] <dbaupp> woah, that's pretty cool.
[13:31:25] <cmr> If it needs a language item, it will warn you
[13:31:28] <dbaupp> (yeah, but rustc will tell you if you need a certain lang item)
[13:31:30] <dbaupp> heh
[13:31:37] <cmr> Elsewise, you should be home safe.
[13:31:54] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[13:33:18] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[13:33:20] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[13:35:03] <jensnockert> https://gist.github.com/jensnockert/b709045ca4b437f17b18 compiles, and is just about a minimal program.
[13:35:17] *** Quits: austincheney (quassel@8276C73B.985A737F.603BFF2.IP) (Ping timeout)
[13:35:36] <dbaupp> cool
[13:35:52] <dbaupp> (#[no_core] does nothing, btw.)
[13:36:39] <jensnockert> Oh, that got fixed?
[13:36:42] <jensnockert> \o/
[13:36:46] <jensnockert> -1 line!
[13:38:00] *** Quits: aeqwa_ (aeqwa@moz-717CB772.dsl.tropolys.de) (Ping timeout)
[13:38:05] <cmr> jensnockert: perhaps you could chime in on https://github.com/mozilla/rust/pull/8955 ? I haven't started working with tiny chips yet
[13:38:53] *** Joins: dew1 (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com)
[13:39:10] *** Joins: austincheney (quassel@8276C73B.985A737F.603BFF2.IP)
[13:39:42] *** Quits: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com) (Ping timeout)
[13:42:09] *** Joins: dave1629 (dave@7E4E63D.C422786F.DDE5D3F6.IP)
[13:46:07] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
[13:46:08] <ChrisMorgan> I'd like to have tests for rust-http stored on the filesystem as e.g. tests/full-messages/servername/testname/{request.dat, response.dat}, where request.dat would be the request to send to the server identified by servername and response.dat the exact expected response. Is Rust's test framework going to make this feasible?
[13:46:13] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[13:48:40] <dbaupp> you can use include_str and include_bin to load files at compile time, so you could load them and use assert_eq etc.
[13:49:05] <dbaupp> (~str and ~[u8] respectively.)
[13:49:19] *** jorendorff_away is now known as jorendorff
[13:49:21] <dbaupp> (or &'static str, and &'static [u8], I can't remember.)
[13:49:46] <dbaupp> rusti: (include_str!("/etc/passwd"), include_bin!("/etc/passwd"))
[13:49:51] <ChrisMorgan> I'd forgotten about include_(str|bin)...
[13:49:54] -rusti- pastebinned 1 lines of output: http://ix.io/7Q3
[13:50:14] *** Joins: jdsanders (Adium@moz-84CB7548.hlrn.qwest.net)
[13:51:11] *** Joins: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP)
[13:51:11] *** ChanServ sets mode: +o jdm
[13:51:20] *** Quits: dave1629 (dave@7E4E63D.C422786F.DDE5D3F6.IP) (Quit: dave1629)
[13:51:35] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[13:51:51] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[13:52:32] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[13:55:15] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[13:55:50] *** Quits: tupshin (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com) (Ping timeout)
[13:56:40] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[13:56:54] *** Joins: aeqwa (aeqwa@moz-717CB772.dsl.tropolys.de)
[13:57:49] <bjz> rusti: [0,..8].slice_to(4)
[13:57:55] *** Joins: sk_ (sk@76BFB31C.71F9CB99.78DD174B.IP)
[13:57:57] -rusti- pastebinned 15 lines of output: http://ix.io/7Q4
[13:58:07] *** Joins: tupshin (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com)
[13:58:17] <bjz> rusti: let v = [0,..8]; v.slice_to(4)
[13:58:20] -rusti- pastebinned 16 lines of output: http://ix.io/7Q5
[13:58:40] <bjz> rusti: let v = [0,..8]; v.slice_to(4).to_owned()
[13:58:41] -rusti- ~[0, 0, 0, 0]
[13:59:59] <mindcat> how change ~str to &str?
[14:01:16] <dbaupp> mindcat: it normally happens automatically
[14:02:14] <dbaupp> (but if it's not; .as_slice())
[14:02:49] *** Joins: wilsonk-laptop (kvirc@moz-8E86F35A.cg.shawcable.net)
[14:06:47] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[14:07:14] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[14:07:42] <bjz> rusti: pub unsafe fn f() {}
[14:07:43] -rusti- ()
[14:08:24] <mindcat> dbaupp: completed. https://gist.github.com/mindcat/6437427
[14:09:01] <dbaupp> mindcat: cool! :D
[14:09:11] <mindcat> dbaupp: :D
[14:10:17] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[14:10:38] *** Quits: aeqwa (aeqwa@moz-717CB772.dsl.tropolys.de) (Quit: Lost terminal)
[14:10:44] *** Quits: jaen (jaen@moz-54938B4E.neoplus.adsl.tpnet.pl) (Ping timeout)
[14:14:02] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[14:18:42] *** Joins: MMII (Mibbit@12371ED5.1B325946.FCBFD269.IP)
[14:18:46] <MMII> http://goo.gl/Jg0Kys
[14:18:47] *** Parts: MMII (Mibbit@12371ED5.1B325946.FCBFD269.IP) ()
[14:21:58] <bjz> dbaupp: am I correct here? http://www.reddit.com/r/rust/comments/1lpmrx/storing_structsenums_of_structs_more_compactly_in/cc1jbku
[14:22:11] <bjz> "The layout of enums is intentionally left undefined so that the compiler can perform optimizations."?
[14:22:20] <bjz> (just checking)
[14:23:28] <dbaupp> yeah, I think so
[14:24:15] <bjz> ok
[14:25:58] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[14:25:59] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/tIaPYQ
[14:25:59] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[14:30:59] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[14:30:59] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/Xu7h8A
[14:30:59] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[14:35:40] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[14:36:00] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[14:36:00] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/Xu7h8A
[14:36:00] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[14:36:02] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[14:36:02] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/jEy3Wg
[14:36:02] <ghrust> 13rust/06auto 1483e19d2 15Felix S. Klock II: Added explicit pub to several conditions.  Enables completion of #6009.
[14:36:02] <ghrust> 13rust/06auto 146fbb64a 15Felix S. Klock II: Make non-pub condition! expand to non-pub mod.  Fix #6009.
[14:36:02] <ghrust> 13rust/06auto 14d49c0b4 15bors: auto merge of #8977 : pnkfelix/rust/fsk-followup-on-6009-rebased, r=alexcrichton...
[14:36:04] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[14:36:04] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[14:39:29] *** Quits: wting (wting@moz-B19BCE71.austin.res.rr.com) (Ping timeout)
[14:40:15] *** Quits: sk_ (sk@76BFB31C.71F9CB99.78DD174B.IP) (Quit: Leaving)
[14:40:42] *** Quits: sk (sk@76BFB31C.71F9CB99.78DD174B.IP) (Quit: Leaving)
[14:41:11] <SimonSapin> rusti: 0xDC00_u16 == 0xDC00u16
[14:41:12] -rusti- true
[14:41:18] <SimonSapin> I didn‚Äôt know that was valid syntax
[14:41:27] <SimonSapin> rusti: 1_2_3 = 123
[14:41:30] -rusti- pastebinned 4 lines of output: http://ix.io/7Q8
[14:41:52] <SimonSapin> rusti: 1_000
[14:41:53] -rusti- 1000
[14:43:53] *** Joins: wting (wting@moz-B19BCE71.austin.res.rr.com)
[14:43:54] <mindcat> "comm::stream", when chan sent data, how do we know port has data?
[14:44:00] *** Joins: jstevans (Instantbir@moz-84080BCB.bootp.virginia.edu)
[14:44:37] <mindcat> no, I asked a wrong question.
[14:48:38] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[14:49:45] *** Joins: boredomist (user@moz-63CF9F31.res-cmts.sesp.ptd.net)
[14:50:47] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[14:53:03] *** Quits: threecreepio (jdp@moz-1A9F0A3C.cust.bredband2.com) (Quit: threecreepio)
[14:53:47] *** Joins: pepper_chico (pepper_chi@14AC4DFD.704EE6B0.E4090502.IP)
[14:54:16] *** Joins: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[14:54:33] *** Quits: pepper_chico (pepper_chi@14AC4DFD.704EE6B0.E4090502.IP) (Quit: Textual IRC Client: www.textualapp.com)
[15:01:11] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[15:05:03] <olsonjeffery> rusti: ((3279308 as c_int) & libc::S_IFMT) == libc::S_IFREG
[15:05:06] -rusti- pastebinned 23 lines of output: http://ix.io/7Q9
[15:05:20] <olsonjeffery> rusti: use libc; ((3279308 as c_int) & libc::S_IFMT) == libc::S_IFREG
[15:05:24] -rusti- pastebinned 8 lines of output: http://ix.io/7Qa
[15:05:46] <olsonjeffery> well, guess i can't blame strcat for forbidding includes of libc :P
[15:05:56] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[15:05:57] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14d49c0b4 to 1467555d9: 02http://git.io/N3iJvQ
[15:05:57] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[15:05:57] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[15:05:57] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/3D483g
[15:05:57] <ghrust> 13rust/06auto 140f3c87e 15Felix S. Klock II: Revise path.rs API to not allocate ~str so much....
[15:05:57] <ghrust> 13rust/06auto 147f834c5 15Felix S. Klock II: Update clients of path.rs to use new API....
[15:05:58] <ghrust> 13rust/06auto 1471e71b3 15bors: auto merge of #8978 : pnkfelix/rust/make-path-api-less-allocation-happy, r=huonw...
[15:06:00] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[15:06:02] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Ping timeout)
[15:06:20] <dbaupp> rusti: use std::libc; ((3279308 as c_int) & libc::S_IFMT) == libc::S_IFREG
[15:06:20] -rusti- <anon>:5:37: 5:42 error: use of undeclared type name `c_int`
[15:06:20] -rusti- <anon>:5          use std::libc; ((3279308 as c_int) & libc::S_IFMT) == libc::S_IFREG
[15:06:21] -rusti-                                               ^~~~~
[15:06:21] -rusti- error: aborting due to previous error
[15:06:21] -rusti- application terminated with error code 101
[15:06:33] <dbaupp> rusti: use std::libc; ((3279308 as libc::c_int) & libc::S_IFMT) == libc::S_IFREG
[15:06:34] -rusti- false
[15:06:38] <dbaupp> olsonjeffery: ^
[15:08:42] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[15:08:42] <olsonjeffery> dbaupp: ty
[15:08:54] <olsonjeffery> rusti: use std::libc; ((3279308 as c_int) & libc::S_IFMT) == libc::S_IFDIR
[15:08:54] -rusti- <anon>:5:37: 5:42 error: use of undeclared type name `c_int`
[15:08:54] -rusti- <anon>:5          use std::libc; ((3279308 as c_int) & libc::S_IFMT) == libc::S_IFDIR
[15:08:55] -rusti-                                               ^~~~~
[15:08:55] -rusti- error: aborting due to previous error
[15:08:55] -rusti- application terminated with error code 101
[15:08:59] *** Joins: cgrks (Mibbit@moz-A5A22371.anonymizer.ccc.de)
[15:09:03] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[15:09:03] <olsonjeffery> rusti: use std::libc; ((3279308 as libc::c_int) & libc::S_IFMT) == libc::S_IFDIR
[15:09:04] -rusti- false
[15:09:11] <olsonjeffery> rusti: use std::libc; ((3279308 as libc::c_int) & libc::S_IFMT) == libc::S_IFLNK
[15:09:11] -rusti- <anon>:5:69: 5:82 error: unresolved name `libc::S_IFLNK`.
[15:09:11] -rusti- <anon>:5          use std::libc; ((3279308 as libc::c_int) & libc::S_IFMT) == libc::S_IFLNK
[15:09:12] -rusti-                                                                               ^~~~~~~~~~~~~
[15:09:12] -rusti- error: aborting due to previous error
[15:09:12] -rusti- application terminated with error code 101
[15:10:28] <olsonjeffery> rusti: use std::libc; ((770970246 as libc::c_int) & libc::S_IFMT) == libc::S_IFDIR
[15:10:29] -rusti- false
[15:10:32] <olsonjeffery> rusti: use std::libc; ((770970246 as libc::c_int) & libc::S_IFMT) == libc::S_IFREG
[15:10:32] -rusti- false
[15:11:06] <dbaupp> olsonjeffery: np (also, you can private-message rusti)
[15:11:16] <olsonjeffery> :P
[15:12:43] *** Quits: Ralith (ralith@114DA04D.CD83ED0A.BCDF04A6.IP) (Ping timeout)
[15:13:12] <jdsanders> I'm perusing the Doc-language-FAQ on the wiki and I noticed this line: "Go has its own strengths and in particular has a great user experience that Rust still lacks." - what does that refer to?
[15:14:34] <jdsanders> There are three specific things I can think of that are *much nicer* about Rust's user experience than Go's, and none really the other way around: 1) `rust sketch` actually works super well compared to Go's various efforts along that line, 2) rustpkg has a versioning story, which is still under discussion for Go, 3) generics
[15:14:43] *** Joins: bblum (bblum@moz-2B41ACB5.andrew.cmu.edu)
[15:14:45] *** Joins: rpearl (rpearl@moz-2B41ACB5.andrew.cmu.edu)
[15:15:39] <jdsanders> I'm curious what I'm missing in Go
[15:17:13] <Ms2ger> We tend to avoid making this a language-review channel :)
[15:17:22] <bjz> :)
[15:17:36] <bjz> Ms2ger: but sometimes we lapse
[15:17:41] *** Quits: mindcat (mindcat@239A9CA4.C53DF77.D6E1F3C4.IP) (Ping timeout)
[15:17:48] <hoelzro> what's rust sketch?
[15:19:00] <dbaupp> jdsanders: there are some patterns that are tricky to squeeze past the rust compiler (i.e. which normally means those patterns are/can be unsafe, but occassionally is just because the compiler isn't/can't be smart enough to prove that it it safe.)
[15:19:00] *** Quits: wting (wting@moz-B19BCE71.austin.res.rr.com) (Quit: leaving)
[15:19:44] *** Joins: jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[15:20:17] *** Quits: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP) (Quit: Lost terminal)
[15:20:19] *** Quits: zeuxcg (zeuxcg@moz-80D1F912.hsd1.ca.comcast.net) (Ping timeout)
[15:20:42] <jdsanders> dbaupp: ah, I gotcha, it's that vague quality of "how easy and intuitive is it to write something that works without fiddling around too much"
[15:20:48] <bjz> jdsanders: speed of compilation, simplicity, consistent formatting, auto updates to code when the compiler changes using fmt
[15:21:19] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[15:22:00] <dbaupp> jdsanders: yeah, exactly
[15:22:12] <jdsanders> hoelzro: it's just an alias for rusti, which is a REPL for rust
[15:22:22] <hoelzro> oh, that makes sense.
[15:22:59] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[15:23:03] <dbaupp> jdsanders: btw, "`rust sketch` actually works super well" is currently incorrect in master: it is segfaulting on any input :(
[15:23:15] <jdsanders> bjz: cool, good list - I guess I haven't run into too much oddly formatted rust yet, to make me get frustrated, but that is something I like about Go
[15:23:19] <jdsanders> ha
[15:23:30] <jdsanders> well I have a version of master from yesterday where it is working super well :)
[15:23:50] <bjz> jdsanders: yeah, rust at the moment requires lots of fiddling and micromanagement to get things to compile. that might always be the case though
[15:24:01] <dbaupp> jdsanders: oh, really? what platform?
[15:24:05] <jdsanders> OSX
[15:24:18] <jdsanders> 3c4e943881fc93136c4b6ad80f23aead9fee9d1b
[15:24:29] <bjz> dbaupp: I've used it on osx and it seems to work ok
[15:24:51] <Ms2ger> bjz, convincing people your C++ is correct also requires lots of fiddling and micromanagement ;)
[15:24:55] <dbaupp> linux has the short end of the stick :(
[15:25:01] <bjz> Ms2ger: agreed
[15:25:27] <bjz> Ms2ger: the flipside of my statement is all of those could have been bugs that would have popped up later
[15:25:31] <jdsanders> btw: I'm trying to stay pretty close to the tip of master, but since it doesn't compile particularly fast, I've just been compiling once a day or so - is there a better way to stay up to date?
[15:25:39] <Ms2ger> Right
[15:25:49] <bjz> jdsanders: I normally do it that way
[15:25:59] *** Joins: wting (wting@moz-250C027.csres.utexas.edu)
[15:26:01] *** Quits: wting (wting@moz-250C027.csres.utexas.edu) (Quit: wting)
[15:26:03] <jdsanders> ok, thanks
[15:26:04] <bjz> jdsanders: that's a user experience thing too :P
[15:26:17] <jdsanders> haha yeah, but only because it's moving so fast in major ways
[15:26:39] <bjz> Ms2ger: type/lifetime inference could be also vastly improved though
[15:26:53] <jdsanders> compiling the Go compiler itself is not particularly fast either
[15:26:56] <bjz> you need to help it along often
[15:27:01] <bjz> jdsanders: really?
[15:27:10] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[15:27:16] <bjz> jdsanders: oh well, at least that's something
[15:27:35] <jdsanders> bjz: yeah, somewhat faster, but it isn't self-hosted, so the "Go has fast compilation time" thing doesn't apply to compiling the compiler
[15:27:46] <bjz> jdsanders: anyway, hope that gives you a general, semi-balanced response
[15:28:00] <bjz> jdsanders: yeah, that's understandable
[15:28:40] <jdsanders> bjz: it totally does - I think dbaupp totally nailed it, Go does have more of that Ruby-esque feel of just throwing a bunch of stuff in there and being pleasantly surprised to see it actually work properly
[15:28:58] <jdsanders> "properly"
[15:29:03] <bjz> hehe
[15:29:05] *** Joins: tav (tav@moz-C302A43C.range86-149.btcentralplus.com)
[15:30:11] <bjz> jdsanders: I would also say that it'll likely never support the elegant function composition that you can do in ISWIM langs
[15:30:33] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[15:30:46] <bjz> jdsanders: but they're all trade-offs. personally I think it's worth it.
[15:30:47] <dbaupp> jdsanders: yeah, Rust has a more Haskell-y feel; "fight" the type-system to get anything to work, but once it does pass the compiler, it's got a reasonable chance of being correct(-ish).
[15:30:57] <bjz> yeah
[15:31:00] <bjz> :)
[15:31:55] <jdsanders> bjz: where "it" refers to Go presumably not having great function composition, correct?
[15:31:59] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[15:32:02] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[15:32:23] <bjz> jdsanders: "it" == Rust.
[15:32:32] <jdsanders> hmmm
[15:32:38] <jdsanders> I'll have to think about that one
[15:33:09] *** Joins: wting (wting@CB5A13C8.2A6289A6.9510F13D.IP)
[15:33:30] <dbaupp> I think bjz is refering to the difference between `f . g x . h` and `|y| f(g(x, h(y)))`
[15:33:41] <bjz> jdsanders: you have to make sure the lifetimes/references match up, and making/calling curried functions is awkward
[15:33:45] <dbaupp> + all the lifetime concerns that happen
[15:33:51] <bjz> yep
[15:34:27] <jdsanders> bjz: yeah, I've been discussing with my friend how references muck up the elegance of the type system a bit
[15:34:30] * bjz likes to be honest
[15:34:42] <jdsanders> (his comment on the map type signature was "wow, that's worse than haskell!")
[15:34:43] <jdsanders> :)
[15:34:55] <bjz> jdsanders: this is from personal experience btw
[15:35:15] <bjz> jdsanders: hehe
[15:35:29] <jdsanders> bjz: nice, thanks, it's good to get a heads up of what to look for - I still don't have too much actual useful rust code under my belt
[15:35:41] <dbaupp> but Haskell has some of the nicest type signatures around, so that's not saying much :P
[15:35:49] <bjz> yep
[15:36:13] <bjz> Rust does the whole 'mix the types and the identifiers on the same line' thing
[15:36:14] *** Joins: threecreepio (jdp@moz-71E164C9.cust.bredbandsbolaget.se)
[15:36:24] <Yoric> I actually like this.
[15:36:39] <Yoric> I believe that this is a good documentation practice.
[15:36:43] <bjz> Yoric: yeah
[15:36:50] <Yoric> Even better when these identifiers can be used as labels.
[15:38:03] *** Joins: miza (miza@moz-BE2AF601.ws.skroutz.gr)
[15:38:12] <bjz> jdsanders: what are you interested in using Rust for?
[15:38:24] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[15:40:17] <jdsanders> bjz: not sure, really. But it *seems* to live in a sweet spot of convenience, strictness, and concurrency that I envision making it useful for all sorts of things, so I'm checking my assumptions
[15:40:21] <jdsanders> (by learning it)
[15:41:45] <jdsanders> I'm sort of in the C++ -> Java -> Python/Ruby -> ? boat, where each -> represents a "got sick of for various reasons" transition
[15:41:48] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[15:41:48] *** ChanServ sets mode: +o pnkfelix
[15:42:09] <jdsanders> I still mostly write Ruby, but I'm tired of tracking down nil references and writing unit tests for type signatures :)
[15:42:37] <bjz> mm. I find it hard to go back to Algol-esq langs after being spoilt by Rust's lovely defaults
[15:43:42] <miza> where is the definition for this [0, ..100]
[15:43:56] <miza> is this doing 100 loops or doing something more efficient?
[15:44:30] *** Joins: pnkfelix|rcirc (pnkfelix@moz-43495417.fbx.proxad.net)
[15:45:15] *** Joins: dave1629 (dave@36A3852.79CA65DB.DDE5D3F6.IP)
[15:45:43] *** Joins: jdm (jdm@FCCEA34F.7672369.D8E68FF6.IP)
[15:45:44] *** ChanServ sets mode: +o jdm
[15:45:58] *** Joins: jdm_ (jdm@13F2CEC5.7672369.D8E68FF6.IP)
[15:47:23] *** Quits: jdm (jdm@FCCEA34F.7672369.D8E68FF6.IP) (Ping timeout)
[15:49:52] *** Joins: riley (riley@8BA43816.9AA11D69.65DDFA89.IP)
[15:50:28] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[15:50:54] *** Joins: bent (chatzilla@C36F5748.8CE62E0F.A36C57B9.IP)
[15:51:00] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[15:51:00] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1471e71b3 to 1467555d9: 02http://git.io/N3iJvQ
[15:51:00] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[15:51:04] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[15:51:04] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/kwajPg
[15:51:04] <ghrust> 13rust/06auto 14b22861d 15Flaper Fesp: Rename MutexArc access methods to unsafe_access
[15:51:04] <ghrust> 13rust/06auto 14408367b 15Flaper Fesp: Add a safe implementation of MutexArc::access* methods...
[15:51:04] <ghrust> 13rust/06auto 14c0aa62c 15Flaper Fesp: Fixed docs and styles
[15:51:05] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[15:52:35] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[15:53:15] *** Joins: mindcat (mindcat@239A9CA4.C53DF77.D6E1F3C4.IP)
[15:58:20] *** Joins: pepper_chico (pepper_chi@14AC4DFD.704EE6B0.E4090502.IP)
[15:58:42] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[15:58:48] <adridu59> https://github.com/mozilla/rust/pull/8901 someone?
[15:58:51] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[16:00:14] *** Quits: bent (chatzilla@C36F5748.8CE62E0F.A36C57B9.IP) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[16:00:24] *** Quits: dave1629 (dave@36A3852.79CA65DB.DDE5D3F6.IP) (Quit: dave1629)
[16:00:40] *** Joins: bent (chatzilla@C36F5748.8CE62E0F.A36C57B9.IP)
[16:01:12] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[16:01:31] *** Joins: dave1629 (dave@36A3852.79CA65DB.DDE5D3F6.IP)
[16:01:48] *** Quits: echristo (echristo@60A74940.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[16:04:01] *** Joins: jclements (jclements@moz-9C0ABCFC.wireless.calpoly.edu)
[16:04:41] *** jdm_ is now known as jdm
[16:04:43] *** Quits: dave1629 (dave@36A3852.79CA65DB.DDE5D3F6.IP) (Quit: dave1629)
[16:08:23] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[16:08:34] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[16:08:46] <adridu59> dbaupp: r? https://github.com/mozilla/rust/pull/8901
[16:08:57] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[16:14:13] *** Joins: sp3d (a@moz-6F12212B.fidnet.com)
[16:14:45] <mindcat> rusti: let a = 2; for i in range(2,65) {a = a * 2;};a
[16:14:48] -rusti- pastebinned 8 lines of output: http://ix.io/7Qd
[16:14:52] *** Joins: Kruppe (user@moz-4DDA8AB8.uwaterloo.ca)
[16:15:03] <mindcat> rusti: let mut a = 2; for i in range(2,65) {a = a * 2;};a
[16:15:03] -rusti- <anon>:5:28: 5:29 warning: unused variable: `i` [-W unused-variable (default)]
[16:15:03] -rusti- <anon>:5          let mut a = 2; for i in range(2,65) {a = a * 2;};a
[16:15:04] -rusti-                                      ^
[16:15:04] -rusti- 0
[16:15:34] <mindcat> rusti: let mut a = 2; for 64.times {a = a * 2;};a
[16:15:34] -rusti- <anon>:5:30: 5:31 error: expected `in`, found `.`
[16:15:34] -rusti- <anon>:5          let mut a = 2; for 64.times {a = a * 2;};a
[16:15:34] -rusti-                                        ^
[16:15:34] -rusti- application terminated with error code 101
[16:17:09] *** jorendorff is now known as jorendorff_away
[16:18:58] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[16:23:03] *** Joins: eholk (eholk@moz-BA312F07.crest.iu.edu)
[16:25:57] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[16:27:08] *** Joins: dave1629 (dave@36A3852.79CA65DB.DDE5D3F6.IP)
[16:28:09] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[16:29:21] *** Joins: echristo (echristo@4241698A.2E4FD3DD.225F4543.IP)
[16:30:59] <mindcat> rusti: let a = "Hello World!"; a[0:5]
[16:30:59] -rusti- <anon>:5:36: 5:37 error: expected `]` but found `:`
[16:31:00] -rusti- <anon>:5          let a = "Hello World!"; a[0:5]
[16:31:00] -rusti-                                              ^
[16:31:00] -rusti- application terminated with error code 101
[16:31:12] <cmr> mindcat: that isn't valid
[16:31:23] <cmr> Also, you can query rusti
[16:31:52] <sam113101> rusti:¬†let a = "Hello World!"; a[0..5]
[16:31:52] -rusti- <anon>:5:8: 5:8 error: unknown start of token: \xa0
[16:31:52] -rusti- <anon>:5         ¬†let a = "Hello World!"; a[0..5]
[16:31:52] -rusti-                  ^
[16:31:52] -rusti- application terminated with error code 101
[16:31:55] *** Parts: azita (Azita@moz-BBE3ABD.mv.mozilla.com) ()
[16:31:59] <cmr> There's no syntax for slices.
[16:32:04] *** Quits: echristo (echristo@4241698A.2E4FD3DD.225F4543.IP) (Ping timeout)
[16:32:22] <mindcat> cmr: yea, I know
[16:32:23] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[16:32:51] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Ping timeout)
[16:35:18] <cmr> I'm giving a lightning talk on Rust, what's a good showcase for Rust's task system?
[16:35:29] <cmr> Parallel fib is a mess because you need to construct ports and chans
[16:35:40] *** Joins: echristo (echristo@60A74940.D6CCE4AE.77834EAA.IP)
[16:36:06] <cmr> And for just quick oneshot computations like that it's super slow.
[16:36:29] <erickt> cmr: how about a work queue using sleep and random to simulate work?
[16:36:31] <dbaupp> cmr: testing 10000 numbers for primality?
[16:36:51] <cmr> Primality testing should fit in a slide, yeah.
[16:37:23] <dbaupp> you get to show off iterators too :P
[16:37:47] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[16:38:00] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[16:38:10] <cmr> What's the status of extra::par? It'd make it prettier
[16:38:16] *** Joins: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net)
[16:38:20] <cmr> specifically extra::par::map
[16:38:22] * cmr looks
[16:38:41] <dbaupp> rusti: let n = 17; range(2,(n as float).sqrt() as uint).all(|x| n % x != 0)
[16:38:42] -rusti- true
[16:38:46] <dbaupp> cmr: bad bad bad
[16:38:55] <dbaupp> there's a bug about deleting it entirely
[16:39:05] <mindcat> rusti: 1 \ 0
[16:39:06] <cmr> ok
[16:39:06] -rusti- <anon>:5:11: 5:12 error: unknown start of token: \\
[16:39:06] -rusti- <anon>:5          1 \ 0
[16:39:06] -rusti-                     ^
[16:39:06] -rusti- application terminated with error code 101
[16:39:10] <dbaupp> rusti: let n = 12345671; range(2,(n as float).sqrt() as uint).all(|x| n % x != 0)
[16:39:10] -rusti- false
[16:39:32] *** Joins: jstevans1 (Instantbir@moz-84080BCB.bootp.virginia.edu)
[16:39:33] *** Quits: jstevans (Instantbir@moz-84080BCB.bootp.virginia.edu) (Connection reset by peer)
[16:41:49] <benh> Does rust have a neat way of handling bitflags yet?
[16:41:54] <cmr> benh: no
[16:42:01] <cmr> well, there's EnumSet
[16:42:06] <cmr> but its api leaves much to be desired.
[16:42:56] <erickt> cmr / benh: what about extra::bitv?
[16:44:02] *** Quits: jstevans1 (Instantbir@moz-84080BCB.bootp.virginia.edu) (Ping timeout)
[16:44:33] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[16:45:03] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[16:45:15] <cmr> erickt: you still need to use magic constants with bitv don't you?
[16:45:18] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:45:47] *** Joins: aeqwa (aeqwa@moz-D8434BEB.dsl.tropolys.de)
[16:47:51] <cmr> dbaupp: so is there any easy way to partition a vector into n subvectors to send to a worker task? What would be the cleanest-looking most-likely-to-convert-unbelievers way to do this?
[16:48:24] <cmr> ("this" being "test primality of a lot of numbers in parallel)
[16:48:27] <cmr> "
[16:49:21] <dbaupp> cmr: .chunk_iter(5) will give you slices of length 5
[16:49:33] <dbaupp> (nonoverlapping slices)
[16:50:38] *** Joins: shmax (Mibbit@FD022374.BB211C3B.520CDC98.IP)
[16:50:39] <dbaupp> so, until we get fork join parallelism, you'd do something like `for subv in v.chunk_iter(5) { let subv = subv.to_owned(); do spawn { ... } }` or whatever
[16:50:47] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[16:50:51] <dbaupp> that's starting to get pretty complicated though
[16:50:51] <shmax> hi! when i do 
[16:51:38] <dbaupp> cmr: I'd not worry about chunking it for a brief intro; just use huge numbers or something like that, so having one number per task is reasonable.
[16:52:02] <jdsanders> cmr: where are you doing your lightning talk?
[16:52:41] <dbaupp> cmr: (or just ignore the fact that having one number per task is unreasonable, and do it anyway.)
[16:53:53] <shmax> hi! when i do 'make check TESTNAME=src/libstd/rt/uv/net.rs NO_REBUILD=1'. i get the error 'The procedure entry point for 'rust_uv_fs_close' could not be located in the dynamic link library rustrt.dll'. When i looked into the issue, i found that the test executable 'stdtest-<versionhash>.dll'  is placed under i686-mingw32/stage2/test while the dlls required 
[16:53:59] <olsonjeffery> acrichto: ping
[16:54:02] *** Quits: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net) (Quit: Leaving.)
[16:54:06] <acrichto> olsonjeffery: pong
[16:54:12] <shmax> are placed in i686-mingw32/stage2/bin
[16:54:31] <olsonjeffery> acrichto: ive changed my mind. im more than happy to rebase against a libuv upgrade.
[16:54:42] <shmax> is this the intended design on mingw?
[16:55:01] <olsonjeffery> acrichto: whenever you have time. not a high priority.
[16:55:25] <acrichto> olsonjeffery: ok, I'm curious if #8863 is related to the failures on bsd and before when libuv was upgraded, but I'll try to get a patch for upgradeing libuv tonight
[16:55:28] <olsonjeffery> but making the old stat api work w/ rust is going to be super fragile and i wouldn't even want to make a PR for it.
[16:55:53] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[16:55:53] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/kwajPg
[16:55:53] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[16:56:28] <olsonjeffery> acrichto: great. thanks.
[16:56:38] <olsonjeffery> i had my tests passing with the newer version of libuv, as well
[16:56:43] <olsonjeffery> and everything's broken now
[16:56:53] <acrichto> :(, at least they passed at some point :)
[16:56:58] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[16:57:08] <olsonjeffery> probably beacuse of bit alignment issues between whatever "version" of the stat struct rust and libuv link against
[16:57:39] <olsonjeffery> and this will all go away if we upgrade libuv.
[16:58:07] *** Quits: miza (miza@moz-BE2AF601.ws.skroutz.gr) (Quit: Leaving.)
[17:01:00] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[17:01:00] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/353mDw
[17:01:00] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[17:01:03] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[17:01:03] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/gtktvg
[17:01:03] <ghrust> 13rust/06auto 1450d4714 15adridu59: libstd/os: set tmp dir to /data/tmp on Android...
[17:01:03] <ghrust> 13rust/06auto 14d1f9055 15bors: auto merge of #8901 : adridu59/rust/issue-8511, r=huonw...
[17:01:03] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[17:03:39] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[17:03:45] *** Quits: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk) (Client exited)
[17:04:02] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[17:04:36] <olsonjeffery> magical upgrade salve, if you will.
[17:04:41] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[17:04:43] *** Joins: jgilbert (jgilbert@moz-4C088FCE.hsd1.ca.comcast.net)
[17:08:49] *** abacus is now known as [a]bacus
[17:11:28] *** Quits: tautologico (lymph@8ABDEDA.34CAB63A.7B974E06.IP) (Quit: tautologico)
[17:11:36] *** zz_kimundi is now known as kimundi
[17:14:07] *** Joins: eatkinson (eatkinson@moz-C2126207.airbears2.berkeley.edu)
[17:14:49] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[17:16:14] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[17:16:15] *** ChanServ sets mode: +o tjc
[17:16:33] *** Joins: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP)
[17:17:44] *** Quits: dave1629 (dave@36A3852.79CA65DB.DDE5D3F6.IP) (Quit: dave1629)
[17:18:35] *** Joins: sw17ch (sw17ch@moz-39D8564F.wndsny.tds.net)
[17:20:48] <cmr> jdsanders: At my university's open source lab.
[17:21:10] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[17:21:23] <cmr> dbaupp: well spawning one task per is why I didn't want to use fibonacci; it essentially becomes fork/join problem and port/chans are very ugly :(
[17:23:26] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[17:24:07] <cmr> well, hm
[17:24:32] *** Joins: ofeldt- (ofeldt@moz-E3B4877F.dip0.t-ipconnect.de)
[17:24:59] <cmr> ideally I'd change it from "for x in primes { if isprime(x) { println(format!("{} is prime", x)) } }" do "for x in primes { do spawn { ... } }"
[17:25:03] <cmr> and that works
[17:25:12] *** Quits: ofeldt (ofeldt@moz-432725D0.dip0.t-ipconnect.de) (Ping timeout)
[17:25:12] <cmr> since it's printing and not collating, like fib requires
[17:25:46] <Ms2ger> for x in precomputedlistofprimes { print(x)
[17:25:48] <Ms2ger> }
[17:26:04] <cmr> not the point :p
[17:27:43] *** Quits: eatkinson (eatkinson@moz-C2126207.airbears2.berkeley.edu) (Quit: eatkinson)
[17:31:11] <cmr> rusti: printfln!("{}", 4)
[17:31:11] -rusti- <std-macros>:240:20: 240:36 error: too many arguments to fmt!. found 2, expected 1
[17:31:11] -rusti- <std-macros>:240             println(fmt!($($arg),+))
[17:31:11] -rusti-                                      ^~~~~~~~~~~~~~~~
[17:31:11] -rusti- application terminated with error code 101
[17:31:18] <cmr> shame
[17:32:29] <SiegeLord> rusti: println!("{}", 4)
[17:32:30] -rusti- 4
[17:32:30] -rusti- ()
[17:32:42] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[17:32:47] *** Quits: echristo (echristo@60A74940.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[17:33:24] *** Quits: zwol (zack@moz-B5C129C.ece.cmu.edu) (Ping timeout)
[17:34:54] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[17:35:59] <cmr> whoa
[17:37:04] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[17:37:51] *** Quits: squiddy (squiddy@moz-F34769CA.adsl.alicedsl.de) (Ping timeout)
[17:38:40] *** Quits: jgilbert (jgilbert@moz-4C088FCE.hsd1.ca.comcast.net) (Ping timeout)
[17:39:04] *** Joins: zwol (zack@moz-B5C129C.ece.cmu.edu)
[17:40:15] *** Quits: shmax (Mibbit@FD022374.BB211C3B.520CDC98.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:40:29] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:40:30] *** Joins: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP)
[17:42:02] *** Joins: echristo_ (echristo@60A74940.D6CCE4AE.77834EAA.IP)
[17:42:10] *** Quits: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP) (Ping timeout)
[17:42:10] *** echristo_ is now known as echristo
[17:42:47] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Connection reset by peer)
[17:43:43] *** Quits: echristo (echristo@60A74940.D6CCE4AE.77834EAA.IP) (Client exited)
[17:43:50] *** Joins: echristo (echristo@60A74940.D6CCE4AE.77834EAA.IP)
[17:44:06] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[17:45:32] *** Quits: echristo (echristo@60A74940.D6CCE4AE.77834EAA.IP) (Ping timeout)
[17:47:17] *** Joins: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP)
[17:47:32] <sfackler> cmr: there's also log2/info2/debug2/fail2 that use the new format system
[17:48:48] *** Joins: dherman (dherman@moz-7B0110AD.mv.mozilla.com)
[17:48:48] *** ChanServ sets mode: +ao dherman dherman
[17:49:02] <acrichto> hopefully that will change soon, still bugs with statics in functions though :(
[17:49:50] <sfackler> acrichto: is #[deriving(Default)] planned?
[17:49:59] <acrichto> sfackler: it is not
[17:50:13] <acrichto> that's pretty much the same as {:?}
[17:50:22] <erickt> cmr: I'm not sure, I haven't used bitv
[17:52:36] <bblum> #[deriving(Default)] enum Void { }
[17:52:42] <bblum> i still think it should be called New
[17:53:11] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[17:53:22] <acrichto> bblum: this Default would be for formatting, not for Type::new
[17:53:30] <bblum> oh
[17:53:36] <bblum> ??
[17:53:40] *** Quits: pnkfelix|rcirc (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[17:53:45] <acrichto> for {}
[17:54:56] <bblum> what's the deal with {}?
[17:55:09] <acrichto> rusti: format!("{}", -1i8}
[17:55:10] -rusti- <anon>:5:27: 5:28 error: incorrect close delimiter: `}`
[17:55:10] -rusti- <anon>:5          format!("{}", -1i8}
[17:55:10] -rusti-                                     ^
[17:55:10] -rusti- application terminated with error code 101
[17:55:11] <acrichto> rusti: format!("{}", -1i8)
[17:55:12] -rusti- ~"-1"
[17:55:31] <acrichto> anything which implements std::fmt::Default can be formatted with {}
[17:55:50] *** Joins: jstevans (Instantbir@C9D2B236.D7E9E509.B7830B68.IP)
[17:56:37] *** Quits: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP) (Ping timeout)
[17:56:41] <SiegeLord> #[deriving(Default)] could just map {:s} to {}
[17:56:54] <myname> rusti: format!("{}", -1u8)
[17:56:55] -rusti- ~"255"
[17:57:05] *** Joins: azakai_ (alon@moz-BBE3ABD.mv.mozilla.com)
[17:58:27] <acrichto> rusti: format!("{:t}", -1i8)
[17:58:27] -rusti- ~"11111111"
[17:58:35] <acrichto> rusti: format!("{:#x}", -1i16)
[17:58:36] -rusti- ~"0xffff"
[17:58:55] <SiegeLord> rusti: format!("{:s}", 1.0f)
[17:59:04] -rusti- pastebinned 6 lines of output: http://ix.io/7Qu
[18:00:08] *** Joins: dherman_ (dherman@moz-BBE3ABD.mv.mozilla.com)
[18:00:20] <sfackler> ooh, binary output
[18:00:24] *** Quits: dherman (dherman@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[18:00:24] *** dherman_ is now known as dherman
[18:01:05] <acrichto> rusti: format!("{:b}", true)
[18:01:05] -rusti- ~"true"
[18:02:06] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[18:02:38] <mindcat> rusti: fmt!("{:?}",456)
[18:02:39] -rusti- <anon>:5:9: 6:5 error: too many arguments to fmt!. found 2, expected 1
[18:02:39] -rusti- <anon>:5          fmt!("{:?}",456)
[18:02:39] -rusti- <anon>:6     };
[18:02:39] -rusti- application terminated with error code 101
[18:02:51] <mindcat> rusti: fmt!("{:?}",456,789)
[18:02:51] -rusti- <anon>:5:9: 6:5 error: too many arguments to fmt!. found 3, expected 1
[18:02:52] -rusti- <anon>:5          fmt!("{:?}",456,789)
[18:02:52] -rusti- <anon>:6     };
[18:02:52] -rusti- application terminated with error code 101
[18:03:03] <acrichto> mindcat: fmt! is the old syntax, format! is the new syntax
[18:03:24] <mindcat> acrichto: I see :D
[18:03:33] <acrichto> rusti: format!("{:?}" 100)
[18:03:33] -rusti- <anon>:5:9: 6:5 error: expected token: `,`
[18:03:34] -rusti- <anon>:5          format!("{:?}" 100)
[18:03:34] -rusti- <anon>:6     };
[18:03:34] -rusti- error: aborting due to previous error
[18:03:34] -rusti- application terminated with error code 101
[18:03:37] <acrichto> rusti: format!("{:?}", 100)
[18:03:38] -rusti- ~"100"
[18:03:48] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[18:04:30] <mindcat> rusti: format!("{:?}", "124").as_slice()
[18:04:30] -rusti- <anon>:5:31: 5:32 error: unexpected token: `.`
[18:04:31] -rusti- <anon>:5          format!("{:?}", "124").as_slice()
[18:04:31] -rusti-                                         ^
[18:04:31] -rusti- application terminated with error code 101
[18:04:50] *** Quits: cantsin (cantsin@moz-F99612CC.members.linode.com) (Client exited)
[18:04:56] <sfackler> rusti: (format!("{:?}", "124")).as_slice()
[18:04:59] -rusti- pastebinned 15 lines of output: http://ix.io/7Qv
[18:05:08] *** Joins: cantsin (cantsin@moz-F99612CC.members.linode.com)
[18:05:10] *** Joins: FrozenCow (FrozenCow@63514305.86540B92.A9B2C039.IP)
[18:05:38] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[18:05:59] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[18:05:59] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/gtktvg
[18:05:59] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[18:06:06] <mindcat> rusti: let a = format("{:?}","124"); let a = a.as_slice();a
[18:06:06] -rusti- <anon>:5:17: 5:23 error: unresolved name `format`.
[18:06:07] -rusti- <anon>:5          let a = format("{:?}","124"); let a = a.as_slice();a
[18:06:07] -rusti-                           ^~~~~~
[18:06:07] -rusti- error: aborting due to previous error
[18:06:07] -rusti- application terminated with error code 101
[18:06:13] <mindcat> rusti: let a = format!("{:?}","124"); let a = a.as_slice();a
[18:06:18] -rusti- pastebinned 16 lines of output: http://ix.io/7Qw
[18:07:17] *** Quits: cantsin (cantsin@moz-F99612CC.members.linode.com) (Quit: ZNC - http://znc.in)
[18:07:50] *** Joins: cantsin (cantsin@moz-F99612CC.members.linode.com)
[18:10:52] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[18:10:52] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/POFUVQ
[18:10:52] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[18:10:54] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[18:10:54] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/Ht3wtw
[18:10:54] <ghrust> 13rust/06auto 1483e19d2 15Felix S. Klock II: Added explicit pub to several conditions.  Enables completion of #6009.
[18:10:54] <ghrust> 13rust/06auto 146fbb64a 15Felix S. Klock II: Make non-pub condition! expand to non-pub mod.  Fix #6009.
[18:10:55] <ghrust> 13rust/06auto 14c326ff0 15Felix S. Klock II: Another followup on #6009....
[18:10:57] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[18:13:08] *** jorendorff_away is now known as jorendorff
[18:13:31] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:13:31] *** ChanServ sets mode: +ao brson brson
[18:15:38] *** Joins: Florob (Florob@moz-39532932.de)
[18:15:38] *** Joins: squiddy (squiddy@moz-F34769CA.adsl.alicedsl.de)
[18:15:57] *** Joins: pnkfelix|rcirc (pnkfelix@moz-43495417.fbx.proxad.net)
[18:16:06] <zxcdw> damn, usercount here has tripled since the last time I checked
[18:16:38] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[18:16:49] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[18:16:49] *** ChanServ sets mode: +o pnkfelix
[18:18:42] *** Quits: pnkfelix|rcirc (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.2.1)
[18:19:50] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[18:19:54] *** Quits: fyolnish (fyolnish@moz-E730FCE7.uqwimax.jp) (Connection reset by peer)
[18:20:11] *** Joins: fyolnish (fyolnish@moz-E730FCE7.uqwimax.jp)
[18:20:56] <olsonjeffery> brson: ping
[18:23:10] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[18:23:55] *** Joins: kvark (Mibbit@9A8A5739.49975FB2.AE2D72A6.IP)
[18:25:39] *** Joins: mihneadb_ (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net)
[18:25:46] *** Quits: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net) (Connection reset by peer)
[18:25:58] <kvark> Could someone justify the latest iterator changes to me please? What looked like that in 0.6: "primes.find(|p| {i%p==0})" now looks like an unconsumable moster: "std::iter::find( |&p:&uint| {i%p==0}, |f| primes.iter().advance(f) )"
[18:26:22] <kvark> am I doing something wrong or that's really the way new iterators are supposed to work?..
[18:28:17] <nmatsakis> I think you are doing something wrong. 
[18:28:20] <kmc> the .advance() is an adaptor to the old style ("internal" iterators)
[18:28:30] <benh> wouldn't primes.iter.find(|&p| i%p==0) work?
[18:28:37] <kmc> the new iterators are designed to be used with the new 'for' syntax; I don't know anything about iter::find or how it's meant to be used
[18:28:54] <nmatsakis> I think what benh suggested looks like what I expect
[18:29:09] <nmatsakis> but I confess I haven't used a lot of iterator stuff
[18:29:21] <kmc> primes.iter().find(...) you mean?
[18:29:32] <benh> yes, sorry
[18:29:46] <benh> I believe there is some optimism regarding making it work like "primes.find(...)" again in the future
[18:34:29] <kvark> sorry, I'm back
[18:35:16] <kmc> also you don't need the braces around the lambda body
[18:35:59] <kvark> "primes.iter().find(..)" gives me error: type `std::vec::VecIterator<,uint>` does not implement any method in scope named `find`
[18:36:28] <kmc> use std::iterator::Iterator;
[18:36:29] <kmc> I think
[18:36:54] <kvark> kmc: still the same error
[18:37:32] <kvark> https://gist.github.com/kvark/6440972
[18:37:47] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[18:38:15] <bstrie> hm
[18:38:16] <bstrie> question
[18:38:25] <bstrie> why isn't it required to implement .clone() to pass something by-value?
[18:38:38] <kmc> because passing by value is a move, not a copy
[18:38:40] *** Joins: pnkfelix|rcirc (pnkfelix@moz-43495417.fbx.proxad.net)
[18:38:43] <kmc> unless it's an implicitly copyable type like int
[18:38:45] <bstrie> aha
[18:39:12] <kmc> there's no trait for "implicitly copyable" afaik; just some builtin stuff allows it
[18:40:05] <bstrie> kmc: if by-value moves, then can you explain why this works? https://gist.github.com/bstrie/6441010
[18:40:12] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[18:40:16] <bstrie> surely the Point isn't implicitly copyable
[18:40:21] *** Quits: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw) (Ping timeout)
[18:40:27] <tjc> I thought we were eventually getting rid of the notion of "implicitly copyable"
[18:40:33] *** Joins: jyyou (jyyou@28A2398D.56303981.3A70C586.IP)
[18:40:50] <bstrie> no idea
[18:41:45] <bstrie> ^ challenge for anyone else who wants to take a crack at clarifying rust's by-value rules
[18:42:14] <kvark> ok, the following works: "primes.iter().find_(|&p:&uint| i%p==0)"
[18:42:27] <kvark> dunno why we have "_" at the end of *some* iterator functions...
[18:42:29] <bstrie> kvark: I thought we renamed .find_ to .find
[18:42:38] <bstrie> kvark: because there's a bug with method resolution
[18:42:39] <kvark> i'm testing on 0.7
[18:42:40] <kmc> yeah there was a name resolution bug
[18:42:44] <kmc> think it's fixed now
[18:42:54] <bstrie> kmc: I don't think it's fixed yet. I think we just got a better workaround
[18:43:03] * kmc -> lunch
[18:43:08] <bstrie> if it is fixed, then I'd be ecstatic
[18:43:12] <kmc> ah :/
[18:43:34] <kvark> ok, thanks all. I'm slightly relieved... crossing fingers for a good 0.8 release ;)
[18:43:39] *** Joins: dave1629 (dave@56A39CDB.8FFBE666.DDE5D3F6.IP)
[18:43:46] *** Joins: sebcrozet (sebcrozet@moz-D8879CC3.w80-13.abo.wanadoo.fr)
[18:44:10] <bstrie> kvark: actually we all just decided that adding arbitrary underscores to the ends of random methods was one of our design goals
[18:44:13] <bstrie> keeps users on their toes
[18:45:13] <nmatsakis> bstrie: Point is implicitly copyable, yes.
[18:45:21] <bstrie> nmatsakis: can you explain why?
[18:45:27] <nmatsakis> it consists of scalar data
[18:45:29] <bstrie> just because it doesn't have a destructor?
[18:45:35] <nmatsakis> yes, and it has no dtor
[18:45:45] <bstrie> ok, and by scalar data you mean it doesn't contain any pointers?
[18:45:52] <nmatsakis> no ~ pointers in particular
[18:45:58] <nmatsakis> and no &mut
[18:46:16] <bstrie> but &foo would also be implicitly copyable?
[18:46:32] <nmatsakis> yes, &T is copyable
[18:46:33] *** jorendorff is now known as jorendorff_away
[18:46:35] <bstrie> nifty
[18:46:35] <nmatsakis> &mut implies no aliasing
[18:46:37] <nmatsakis> &T does not
[18:46:45] <nmatsakis> &mut and ~ imply no aliasing, hence they require moves
[18:46:48] *** jorendorff_away is now known as jorendorff
[18:48:19] <flaper87> has there been an issue / discussion about supporting timeouts on port.recv() ? Currently recv / try_recv block but what if I'd like to listen on that port N seconds and then retry if it didn't get anything back?
[18:48:25] *** jorendorff is now known as jorendorff_away
[18:48:34] <flaper87> I guess it would be possible to spawn a new task and make let it there waiting
[18:48:51] <flaper87> but, I'm curious to know what you guys think about this
[18:49:36] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Ping timeout)
[18:50:45] <bstrie> flaper87: good question, I'm not sure about the best way of supporting that atm
[18:51:10] <kvark> bstrie: do you also keep Servo guys on their toes all the time? :D
[18:51:38] <bstrie> kvark: the servo folks don't need me to keep them on their toes :)
[18:51:46] <olsonjeffery> we had a mechanism to support that in timer in oldrt
[18:51:52] <olsonjeffery> but haven't really put the time/effort into doing it in newrt
[18:52:17] <flaper87> olsonjeffery: if it's there in the oldrt, I'll be very happy to port it to the new one
[18:52:28] <flaper87> olsonjeffery: is there an issue for it on GH?
[18:52:43] <olsonjeffery> flaper87: we would support that by representing a timeout_recv() call as an initial peek(), then sleep for the timeout and then check again..
[18:52:52] <olsonjeffery> that's probably the easiest way..
[18:53:02] <flaper87> olsonjeffery: yeah, that's what I was thinking
[18:53:03] <bstrie> olsonjeffery: but is sleeping implemented in newrt yet?
[18:53:14] <olsonjeffery> bstrie: yes.
[18:53:19] <bstrie> cool
[18:53:23] <olsonjeffery> rt::io::timer
[18:53:52] *** Quits: eholk (eholk@moz-BA312F07.crest.iu.edu) (Ping timeout)
[18:54:10] <olsonjeffery> recv_timeout<T>(wait_msecs: uint) -> Option<T>
[18:54:32] <flaper87> if there's not an issue for that on GH, I'll create one
[18:54:34] <olsonjeffery> add that on a trait called TimeoutCapablePort or somesuch
[18:54:40] <olsonjeffery> and impl that port for the types in rt::comm as desired
[18:55:00] <bstrie> flaper87: thanks
[18:55:04] *** jorendorff_away is now known as jorendorff
[18:55:45] <flaper87> ok, there's this one https://github.com/mozilla/rust/issues/3015
[18:55:55] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[18:55:55] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14c2e2ba5 to 14d1f9055: 02http://git.io/N3iJvQ
[18:55:55] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[18:56:10] <flaper87> bstrie: my pleasure
[18:56:25] <olsonjeffery> flaper87: if you want to take it on in a PR, you're welcome to.. as i said, check out std::rt::io::timer
[18:56:32] <bstrie> olsonjeffery: what is the src/rt directory still being used for? (as opposed to the new stuff in src/libstd/rt)
[18:56:56] <olsonjeffery> bstrie: everything that rust relies on that still has to be done in c/c++
[18:57:03] *** kimundi is now known as zz_kimundi
[18:57:04] <olsonjeffery> like wrapping libuv calls
[18:57:13] <bstrie> ok
[18:57:21] <flaper87> olsonjeffery: I'm planing to work on that :P
[18:57:24] <olsonjeffery> some translation with libuv types that were defined via C preprocessor commands
[18:57:31] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[18:57:37] <olsonjeffery> + lots and lots of other stuff that i have little visability on :)
[18:57:54] <bstrie> olsonjeffery: maybe we can submit a patch to libuv to remove the preprocessor types :P
[18:58:24] <olsonjeffery> it's their world, dude. we're just living in it.
[18:59:32] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[18:59:33] *** zz_kimundi is now known as kimundi
[19:00:43] *** Joins: valenting (Thunderbir@1FD252AB.ECBF5C84.FB866788.IP)
[19:01:02] <flaper87> olsonjeffery: bstrie I got it: https://github.com/mozilla/rust/issues/3015
[19:01:06] <flaper87> thanks for the heads up
[19:01:19] <bstrie> cool
[19:02:21] *** bent is now known as bent|lunch
[19:03:18] <jclements> ugggggh.... death by boilerplate.  is default impls for traits a now-thing or a future-thing?
[19:03:37] *** Quits: cgrks (Mibbit@moz-A5A22371.anonymizer.ccc.de) (Quit: http://www.mibbit.com ajax IRC Client)
[19:03:47] <tjc> jclements: now-thing
[19:03:58] <cmr> jclements: we have default methods now.
[19:04:28] <jclements> tjc: oh! is it a thing that got added in the last month or so? I'm trying to decipher other peoples' changes to my code :).
[19:04:47] <tjc> jclements: sully made a lot of bug fixes recently; some of them probably in the last month
[19:04:57] <bstrie> jclements: you know what helps with boilerplate? macros! here, let me link you to the tutorial... :)
[19:05:00] <cmr> since at least 0.7 they've been mostly-solid.
[19:05:24] <jclements> bstrie: ouch. :)
[19:06:07] <SimonSapin> well, 0.7 needs a flag for the lint pass to accept default methods
[19:06:33] <flaper87> #[allow(default_methods)]
[19:07:09] <SimonSapin> I was thinking of "rustc -A default-methods", but that too apparently
[19:07:18] <flaper87> :P
[19:08:09] *** Joins: eholk (eholk@moz-BA312F07.crest.iu.edu)
[19:08:34] *** Quits: igl (igl@moz-54314CA5.adsl.alicedsl.de) (Ping timeout)
[19:09:29] *** Joins: igl (igl@moz-8851FCBB.adsl.alicedsl.de)
[19:10:41] *** Quits: eholk (eholk@moz-BA312F07.crest.iu.edu) (Ping timeout)
[19:10:44] *** Quits: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Quit: msingle)
[19:12:20] *** Quits: mindcat (mindcat@239A9CA4.C53DF77.D6E1F3C4.IP) (Ping timeout)
[19:14:32] *** Joins: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net)
[19:14:33] *** Quits: jstevans (Instantbir@C9D2B236.D7E9E509.B7830B68.IP) (Ping timeout)
[19:14:34] *** Quits: mihneadb_ (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net) (Connection reset by peer)
[19:17:50] *** Quits: six600110 (six600110@moz-2FA48202.neo.res.rr.com) (Ping timeout)
[19:18:19] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[19:20:27] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[19:22:50] *** Joins: Jesin (Jessin_@moz-4CC9F20B.cc.lehigh.edu)
[19:26:06] *** Quits: dave1629 (dave@56A39CDB.8FFBE666.DDE5D3F6.IP) (Quit: dave1629)
[19:26:13] *** Joins: tikue_ (tkuehn@DB1D7575.B7A42AA3.689607DE.IP)
[19:26:32] *** Quits: tikue_ (tkuehn@DB1D7575.B7A42AA3.689607DE.IP) (Quit: tikue_)
[19:26:53] *** Joins: tikue_ (tkuehn@DB1D7575.B7A42AA3.689607DE.IP)
[19:26:56] *** Quits: tikue_ (tkuehn@DB1D7575.B7A42AA3.689607DE.IP) (Quit: tikue_)
[19:27:30] *** Joins: tikue_ (tkuehn@DB1D7575.B7A42AA3.689607DE.IP)
[19:27:39] *** Quits: tikue_ (tkuehn@DB1D7575.B7A42AA3.689607DE.IP) (Quit: tikue_)
[19:28:13] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[19:28:13] *** ChanServ sets mode: +ao dherman dherman
[19:28:14] *** Joins: jstevans (Instantbir@BB267021.599F34EC.DDE5D3F6.IP)
[19:28:29] <tjc> strcat: Is there an iterator tutorial anyplace?
[19:28:58] *** Quits: eevee (eevee@moz-9A8E1439.evrt.wa.frontiernet.net) (Ping timeout)
[19:29:47] <bstrie> tjc: http://static.rust-lang.org/doc/tutorial-container.html#iterators
[19:30:03] <tjc> bstrie: thanks!
[19:31:33] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[19:33:21] *** Joins: eevee (eevee@moz-9A8E1439.evrt.wa.frontiernet.net)
[19:33:25] *** Joins: six600110 (six600110@moz-2FA48202.neo.res.rr.com)
[19:35:31] *** Quits: rhodesd (none@3646D136.4C5731DA.F395EA5B.IP) (Ping timeout)
[19:35:38] *** Quits: kemurphy (kemurphy@3863AC20.C4E71399.9510F13D.IP) (Ping timeout)
[19:35:48] *** Quits: reyre (reyre@moz-89E9865B.com) (Ping timeout)
[19:36:12] *** Quits: kdj (kyle@FA39BFBF.D27A4F86.8BEFA1E3.IP) (Ping timeout)
[19:36:13] *** Quits: xymostech (xymostech@22A34502.AFC2BCFF.2CFD4520.IP) (Ping timeout)
[19:36:14] *** Quits: sindork (sindork@ABFA98AB.DD47BB48.F7A44A1B.IP) (Ping timeout)
[19:36:15] *** Quits: nonehaxor (nonehaxor@BA9CBAE.4C3B0355.EE6E63A5.IP) (Ping timeout)
[19:36:17] *** Quits: callen (callen@95EE74F7.F6EF2525.EE6E63A5.IP) (Ping timeout)
[19:40:49] *** Joins: kemurphy (kemurphy@3863AC20.C4E71399.9510F13D.IP)
[19:40:54] *** Joins: sindork (sindork@ABFA98AB.DD47BB48.F7A44A1B.IP)
[19:41:01] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[19:41:11] *** Joins: rhodesd (none@3646D136.4C5731DA.F395EA5B.IP)
[19:41:17] *** Quits: pnkfelix|rcirc (pnkfelix@moz-43495417.fbx.proxad.net) (Input/output error)
[19:41:47] *** Joins: reyre (reyre@moz-89E9865B.com)
[19:41:54] *** Joins: xymostech (xymostech@22A34502.AFC2BCFF.2CFD4520.IP)
[19:42:34] *** Joins: kdj (kyle@FA39BFBF.D27A4F86.8BEFA1E3.IP)
[19:42:38] *** Joins: callen (callen@95EE74F7.F6EF2525.EE6E63A5.IP)
[19:42:46] *** Joins: nonehaxor (nonehaxor@BA9CBAE.4C3B0355.EE6E63A5.IP)
[19:42:47] <fhahn> is it possible to use functions from extra:: in stdlib functions? I'm having a look at https://github.com/mozilla/rust/issues/8949 and it would require sorting a vector, which is implemented in extra::sort
[19:43:40] *** Joins: pnkfelix|rcirc (pnkfelix@moz-43495417.fbx.proxad.net)
[19:43:41] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:44:32] <bstrie> fhahn: I believe std is intended to be entirely free of references to extra
[19:44:48] *** bent|lunch is now known as bent
[19:44:55] <bstrie> fhahn: that said, if something really needs to be used in std, then that's a good argument for having it live in std instead of extra :)
[19:45:41] *** Quits: Kruppe (user@moz-4DDA8AB8.uwaterloo.ca) (Ping timeout)
[19:46:05] *** Quits: six600110 (six600110@moz-2FA48202.neo.res.rr.com) (Ping timeout)
[19:46:35] <fhahn> bstrie: apparently nobody uses sorting in std :P
[19:47:25] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[19:47:40] <fhahn> bstrie: seems like sorting war part of std in rust 0.6 and moved to extra later
[19:48:51] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[19:49:36] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[19:49:41] *** Joins: _y_ (Mibbit@moz-1264150D.dynamic.isp.telekom.rs)
[19:51:08] *** Joins: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com)
[19:51:18] *** Joins: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu)
[19:55:06] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[19:55:06] *** ChanServ sets mode: +ao brson brson
[19:57:07] <_y_> Hi rust fellows :)
[19:57:07] <bstrie> so is sizeof a keyword now?
[19:57:11] <bstrie> _y_: hello
[19:57:22] *** Quits: Jesin (Jessin_@moz-4CC9F20B.cc.lehigh.edu) (Ping timeout)
[19:57:38] <bstrie> what's the typical size of `float` on x86 and x64?
[19:57:40] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[19:58:06] <kimundi> 64bit
[19:58:11] <bstrie> kimundi: on both platforms?
[19:58:12] <kimundi> allways right now :P
[19:58:15] <bstrie> kk
[19:58:31] <kimundi> part of the reason people debate removing it
[19:58:36] <_y_> So I have a design problem, i have a parser struct that can take various input 
[19:58:39] *** Quits: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[19:58:49] <doomlord> float = double, float32=float :)
[19:58:59] <_y_> or better to say that I want to take various input
[19:59:23] <_y_> what is best way to store the input stream/string/etc?
[19:59:39] *** Joins: jviereck (Adium@moz-58A87BA7.dip0.t-ipconnect.de)
[19:59:49] <sfackler> an io::Reader maybe?
[19:59:50] <bstrie> _y_: I've never used input streams in rust before, I think they might be really new
[20:00:01] <_y_> i meant reader
[20:00:03] <bstrie> at least, wrt thew new io stuff
[20:00:15] <_y_> reader reads a stream, iirc?
[20:00:34] *** Joins: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com)
[20:00:40] <sfackler> reader's a trait
[20:00:53] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[20:00:54] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/EbaI2w
[20:00:54] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[20:01:20] <sfackler> sockets, file streams, etc implement it
[20:01:23] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[20:01:27] <sfackler> and there are wrappers to build a reader from a byte array or a string
[20:01:35] <nmatsakis> weren't we going to remove overloaded `+=` operators until we settled on the right way to handle that?
[20:01:39] <nmatsakis> did we do that?
[20:01:42] <bstrie> nmatsakis: I think we did
[20:01:54] <bstrie> just not for int and such
[20:02:08] <nmatsakis> oh, we just removed the impls?
[20:02:21] <nmatsakis> well, for ints it's builtin
[20:02:22] <bstrie> not sure of the specifics
[20:02:24] <nmatsakis> ok
[20:02:38] <nmatsakis> I'm wondering b/c all the support code is still in the compiler and it's so...bad. 
[20:02:41] * nmatsakis hates that code
[20:02:47] <doomlord> at the minute overloading only works on '1 parameter', is that right eg you can't overload matrux*vec matrix*matrix etc
[20:02:48] <nmatsakis> and it's making my life more complex right now :)
[20:03:13] *** Joins: jgilbert (jgilbert@moz-4C088FCE.hsd1.ca.comcast.net)
[20:03:38] *** Joins: jensnock_ (jensnocker@moz-8BE55278.customer.t3.se)
[20:03:40] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[20:04:28] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Ping timeout)
[20:04:28] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[20:04:43] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[20:05:19] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[20:05:22] *** Joins: Jesin (Jessin_@moz-4CC9F20B.cc.lehigh.edu)
[20:05:50] <bstrie> so when getting the value of a struct field, is the cost the same regardless of whether the struct is locally on the stack or whether it's a pointer borrowed from elsewhere? they're both a single pointer indirection, right?
[20:05:53] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[20:05:53] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/07tQeA
[20:05:53] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[20:05:55] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[20:05:55] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/_JGVJQ
[20:05:55] <ghrust> 13rust/06auto 14e38739b 15Florian Hahn: Convert rust_log.cpp to Rust, closes #8703
[20:05:55] <ghrust> 13rust/06auto 1460fba4d 15bors: auto merge of #8880 : fhahn/rust/issue_8703, r=brson...
[20:05:55] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[20:06:07] *** Joins: eholk (eholk@moz-BA312F07.crest.iu.edu)
[20:06:12] <sfackler> doomlord: you can get around that by doing something like impl<M: MatrixMultipliable> Mul<Matrix, M> for Matrix {} and doing all of the work in the MatrixMultipliable trait
[20:06:20] <bstrie> <-- bad at systems programming
[20:06:53] <sfackler> stuff on the stack may be more likely to be in cache
[20:07:02] <bstrie> ok, thanks
[20:07:04] <sfackler> depending on which cache frame
[20:07:37] <nmatsakis> bstrie: this is very unpredictable
[20:07:40] <doomlord> sfackler... like a sort of compile-time double dispatch  ?
[20:08:35] <sfackler> maybe?
[20:09:15] <doomlord> reminds me of double-dispatch idea with vtables 
[20:09:31] * nmatsakis hopes to fix that soon
[20:09:40] <nmatsakis> still a couple of items down on the stack though
[20:09:40] *** Quits: valenting (Thunderbir@1FD252AB.ECBF5C84.FB866788.IP) (Ping timeout)
[20:09:53] <nmatsakis> but getting closer to the top....
[20:09:55] <sfackler> nmatsakis: the double trait impl thing?
[20:09:57] <nmatsakis> yes
[20:09:59] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[20:09:59] <sfackler> sweet
[20:10:02] <ecr> hey guys, my intern presentation is about to go down: https://vreplay.mozilla.com/replay/webcastShow.html?key=mow46oq2waCq5T7
[20:10:08] <nmatsakis> the various bugs and deficiencies of our vtable matching
[20:10:19] <nmatsakis> ecr: cool thanks for the heads up
[20:10:29] <bstrie> ecr: what's the topic?
[20:10:34] <ecr> the I/O system
[20:10:46] <bstrie> ecr: post it somewhere where I'll remember to watch it after work :)
[20:11:23] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[20:11:27] *** Quits: kvark (Mibbit@9A8A5739.49975FB2.AE2D72A6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:11:48] *** Quits: eholk (eholk@moz-BA312F07.crest.iu.edu) (Quit: eholk)
[20:12:37] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[20:13:09] <_y_> Guys, I have a question, here is a small example what I tried to make: http://pastebin.com/VVV1auE2
[20:13:27] <_y_> but I get errors error: mismatched types: expected `&std::io::Reader<no-bounds>` but found `&str` (expected trait std::io::Reader but found &str)
[20:13:39] *** Quits: bytewise (bytewise@moz-4A801D04.unitymediagroup.de) (Quit: Leaving)
[20:13:43] <_y_> do I need to cast the str?
[20:13:47] *** Joins: eholk (eholk@moz-BA312F07.crest.iu.edu)
[20:14:27] <jdsanders> Is there an easy way to search through the rust-dev archives?
[20:14:39] <jdsanders> I only see https://mail.mozilla.org/pipermail/rust-dev/, which isn't very easy to search...
[20:14:56] <jdsanders> just google?
[20:15:17] <Ms2ger> Go back in time to when the list was started and subscribe with a gmail address? :
[20:15:18] <Ms2ger> )
[20:15:49] <sfackler> str doesn't implement reader by itself. check out std::io::with_str_reader()
[20:16:55] *** Parts: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com) (Leaving)
[20:17:12] <bstrie> jdsanders: http://thread.gmane.org/gmane.comp.lang.rust.devel/ is indispensible
[20:17:27] <bstrie> sfackler: is that intended for _y_?
[20:18:12] <sfackler> yeah
[20:18:18] <sfackler> _y_: ^
[20:18:20] <_y_> yeah
[20:18:31] <jdsanders> Ms2ger: :)
[20:18:34] <jdsanders> bstrie: thanks!
[20:18:58] <nkoep> hello, is there any way to match a struct inside a Some instance? it works fine with tuples, but the usual pattern matching syntax for structs wrapped in a Some() produces a parsing error
[20:19:22] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[20:19:27] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[20:19:30] *** Quits: fabiand (fabiand@moz-D0902417.adsl.alicedsl.de) (Quit: Verlassend)
[20:19:48] <sfackler> rusti: struct Foo { foo: int } match Some(Foo { foo: 10 }) { Some(Foo { foo }) => foo, None => 0 }
[20:19:49] -rusti- 10
[20:20:08] <sfackler> or
[20:20:18] <sfackler> rusti: struct Foo { foo: int } match Some(Foo { foo: 10 }) { Some(Foo { foo: my_foo }) => my_foo, None => 0 }
[20:20:19] -rusti- 10
[20:20:43] *** Joins: six600110 (six600110@moz-2FA48202.neo.res.rr.com)
[20:20:52] *** Quits: sw17ch (sw17ch@moz-39D8564F.wndsny.tds.net) (Quit: sw17ch)
[20:21:33] <sfackler> nkoep: ^
[20:21:54] <_y_> would someone be so kind to point me or show an with_str_reader example. Someone showed me yesterday, but I forgot :X
[20:22:30] *** Quits: jviereck (Adium@moz-58A87BA7.dip0.t-ipconnect.de) (Quit: Leaving.)
[20:23:58] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:25:20] *** Joins: enticeing (enticeing@CB864A86.D932A275.5037098C.IP)
[20:25:59] <enticeing> Hey aatch
[20:26:04] *** Quits: jstevans (Instantbir@BB267021.599F34EC.DDE5D3F6.IP) (Ping timeout)
[20:26:07] *** Joins: jstevans (Instantbir@BB267021.599F34EC.DDE5D3F6.IP)
[20:26:27] <bstrie> enticeing: no love for the rest of us? :(
[20:27:18] <enticeing> Well, the recent change to default extern functions to unsafe has messed up some stuff
[20:27:41] <enticeing> I would try and fix it myself, but i'm not sure how he calls his script to generate the bindings
[20:27:47] <bstrie> I thought that change happened in like march or so
[20:28:09] <enticeing> More recent than that, but rust-xcb hasn't been update in a while either way
[20:28:22] <strcat> yay, the char stuff landed
[20:28:35] <jclements> nmatsakis: simple type question?
[20:28:40] <strcat> now maybe I should figure out how to fix str
[20:28:42] <bstrie> strcat: yay indeed, though I was curious if the actual behavior for this stuff was documented anywhere
[20:28:58] *** Quits: eholk (eholk@moz-BA312F07.crest.iu.edu) (Quit: eholk)
[20:29:04] <strcat> bstrie: well, the error message tells you ;p
[20:29:17] <bstrie> enticeing: also, aatch might not even be awake yet... still morning in NZ
[20:29:25] <strcat> bstrie: ideally, you can look at the type's module and see the traits it implements
[20:29:34] <strcat> and they will line up the stuff the compiler secretly implements
[20:29:41] <bstrie> haha
[20:29:42] <strcat> if it doesn't line up, it's a bug
[20:29:55] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[20:29:59] *** Joins: eholk (eholk@E0C005DE.48D4C455.51B6877.IP)
[20:29:59] <strcat> rusti: 'c' * 'c' * 'c' << 'G
[20:29:59] -rusti- <anon>:6:4: 6:5 error: expected `:` but found `}`
[20:29:59] -rusti- <anon>:6     };
[20:30:00] -rusti-              ^
[20:30:00] -rusti- application terminated with error code 101
[20:30:01] <strcat> rusti: 'c' * 'c' * 'c' << 'G'
[20:30:02] -rusti- '\u7f50'
[20:30:03] *** Joins: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com)
[20:30:11] <strcat> rusti: 143153253253 as char
[20:30:12] -rusti- '\U54994b85'
[20:30:14] <nmatsakis> jclements: k
[20:30:18] <strcat> these were bad since you get invalid code points
[20:30:18] <bstrie> strcat: surely rusti doesn't have the change yet
[20:30:23] <strcat> bstrie: that's the old way
[20:30:27] <bstrie> right
[20:30:41] <strcat> rust builds daily at 9pm on the server and it's 8:30pm atm
[20:30:48] * strcat tells it to runnow
[20:31:30] <jclements> nmatsakis: if I try *(foo.clone()) and get an error "cannot move out of dereference of @ pointer", I'm guessing this is because the foo contains... an @closure? or just ... any owned pointer? Gee whiz I'm out of it.
[20:31:43] <strcat> bstrie: I'm not sure if the weird truncating 'as' conversions to bool make any sense....
[20:31:48] <strcat> they are not what people will expect
[20:31:57] <strcat> even once they are fixed to truncate to i1, not i8
[20:32:19] <bstrie> strcat: I've always sort of hated `as bool`
[20:32:20] <strcat> you'd expect a positive value to coerce to true, right? because it doesn't
[20:32:38] <strcat> rusti: 0b100000000 as true
[20:32:38] -rusti- <anon>:5:21: 5:23 error: found `true` in ident position
[20:32:39] -rusti- <anon>:5          0b100000000 as true
[20:32:39] -rusti-                               ^~
[20:32:39] -rusti- error: aborting due to previous error
[20:32:39] -rusti- application terminated with error code 101
[20:32:40] <nmatsakis> jclements: an owner pointer, probably -- I would guess you might want @(*foo).clone()
[20:32:43] <strcat> rusti: 0b100000000 as bool
[20:32:44] -rusti- false
[20:32:50] <strcat> rusti: 0b010000000 as bool
[20:32:51] -rusti- true
[20:32:57] <nmatsakis> jclements: @((*foo).clone()) to be more explicit about precedence
[20:33:00] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[20:33:03] <sfackler> seems like the "right" way to coerce to bool should be 0b1000000000 != 0
[20:33:05] <strcat> it just truncates, it's only true if the lowest bit is set
[20:33:08] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[20:33:08] *** ChanServ sets mode: +o pnkfelix
[20:33:15] <strcat> 0b010000000 being true is from the bug
[20:33:15] <bstrie> sfackler: might as well just test against zero then
[20:33:23] <bstrie> no reason to conflate all this with bools
[20:33:29] <aeqwa> qq
[20:33:35] <strcat> bstrie: it would be ~4 lines of code to fix this + add an error msg
[20:33:39] <strcat> just wondering what people think
[20:34:07] <strcat> the thing is, if you *really* want to check if the lowest bit is set you can use &
[20:34:09] <bstrie> well I think coercing to bool is an anti-pattern, so... :P
[20:34:13] <jclements> nmatakis: christ... I *swear* I tried that. grr....
[20:34:16] <strcat> so unlike other types I don't think truncating to bool has any use
[20:34:26] <jclements> nmatsakis: which is to say: many thanks for your time, sorry to bother you! :)
[20:34:31] <strcat> you have == 0, and & 1
[20:34:44] * strcat will just kill it
[20:34:53] <nmatsakis> jclements: np :)
[20:34:59] <nmatsakis> jclements: (you see the diff I guess?)
[20:35:02] <sfackler> bstrie: converting an int to a bool and vice versa is useful for interfacing with C stuff, but "as" coercion is probably not the right way to do that
[20:35:05] <strcat> rusti: let x = 3.3 as bool; (x, x == true, x == false) /* goodbye, best bug ever */
[20:35:06] -rusti- (true, false, false)
[20:36:09] <strcat> (although we should still compile them to store as i8, pass/return as i1 zeroext and fiddle with as i1)
[20:36:40] <bstrie> sfackler: exactly, c interop is the only reason I can think of to support it
[20:36:42] <jclements> nmatsakis: well, I obviously see that I'm de-refing then calling the method. The difference presumably is that calling a method on a value doesn't imply a move, whereas passing it to another method or giving it a name does.
[20:37:02] <strcat> bstrie: C doesn't truncate to bools like that afaik
[20:37:06] * strcat checks
[20:37:13] *** Joins: thpickert (thpickert@moz-F526B0F7.dynamic.dsl.tng.de)
[20:37:44] <sfackler> i'd vote for banning "as bool". "foo != 0" is not any longer and is more explicit
[20:37:53] <strcat> sfackler: they don't do the same thing
[20:37:54] <nmatsakis> jclements: point is that clone on @T just returns the same box again,
[20:38:04] <strcat> 'as bool' is '& 1'
[20:38:06] <nmatsakis> jclements: but (I think?) you wanted to clone the interior of the box
[20:38:09] <bstrie> strcat: by "it" I was referring to "as bool"
[20:38:17] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[20:38:17] <bstrie> strcat: I still agree that the truncating behavior is bad
[20:38:23] <strcat> good :)
[20:38:25] <nmatsakis> jclements: actually the `@` that I added in front may not be necessary, it just reboxes that 
[20:38:35] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[20:38:45] <jclements> nmatsakis: yep, I omitted it already. Makes sense.
[20:38:51] <strcat> I think it makes sense for 'as' to always have the truncate/zero-extend behaviour, with sign extend for signed -> signed
[20:38:53] <sfackler> strcat: right, which is not really what you want interfacing with C since C treats not-0 as true
[20:39:09] <strcat> sfackler: C as _Bool, and it's undefined behaviour to store 2 in it
[20:39:22] <strcat> clang has -fsanitize=bool ;p
[20:39:50] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[20:39:53] <strcat> -fsanitize=bool: Load of a bool value which is neither true nor false.
[20:40:12] <strcat> it would be neat for us to have instrumentation like that
[20:40:24] <strcat> check that enums/bools always have a valid discriminant/value
[20:40:36] * strcat wonders if it just leverages range asserts
[20:40:52] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:41:11] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[20:41:28] <strcat> sfackler: yeah C doesn't truncate
[20:41:50] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[20:41:51] <strcat> (_Bool)x where x doesn't have the lowest bit(s) set is true as long as it's not 0
[20:42:06] <jdsanders> What is the reasoning behind having different syntax for inner and outer doc-comments? Is there some reason they need to be able to be parsed differently?
[20:42:07] <kmc> I concur with banning "as bool"
[20:42:08] <nkoep> sfackler, you're right, matching like this works. why doesn't this though: http://pastebin.com/prLgR1rV
[20:42:34] *** Quits: enticeing (enticeing@CB864A86.D932A275.5037098C.IP) (Client exited)
[20:42:39] <Florob> I like " as bool", but only if it gets C99 semantics :P
[20:42:46] <kmc> rusti: 2.5f as int
[20:42:46] -rusti- 2
[20:42:47] <olsonjeffery> ecr: great talk.
[20:42:50] <kmc> see I don't like that either
[20:42:55] <kimundi> jdsanders: well how would you differentiate?
[20:42:55] <ecr> olsonjeffery: thanks!
[20:43:00] <olsonjeffery> a lot in there for me to crib for my codecamp talk at the end of the month
[20:43:03] <kmc> there are like five reasonable ways to convert a float to an int, why pick one arbitrarily and give it special syntax?
[20:43:06] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[20:43:06] *** ChanServ sets mode: +o pnkfelix
[20:43:12] *** Quits: Shaladdle (Shaladdle@moz-424BC304.hsd1.pa.comcast.net) (Client exited)
[20:43:19] <kmc> conversions can be ordinary functions/operators
[20:44:04] *** Joins: jstevans1 (Instantbir@BB267021.599F34EC.DDE5D3F6.IP)
[20:44:06] *** Quits: jstevans (Instantbir@BB267021.599F34EC.DDE5D3F6.IP) (Connection reset by peer)
[20:44:19] <strcat> kmc: I agree, but I think the only reason `as` exists is that we don't have CTFE
[20:44:21] <ecr> olsonjeffery: feel free :)
[20:44:23] <strcat> it's just for use in constant exprs
[20:44:35] <strcat> I try to avoid `as` whenever possible in regular code
[20:44:36] *** Joins: Shaladdle (Shaladdle@moz-424BC304.hsd1.pa.comcast.net)
[20:44:37] <olsonjeffery> ecr: the point about affine types enforcing IO workflows is especially astute
[20:44:46] <strcat> we should have plain old conversion traits
[20:44:54] <strcat> a truncation one, a zero-extend one, etc.
[20:44:58] <olsonjeffery> i kind of backed out of it w/ my file io work, sadly, as per our previous conversation
[20:45:04] <kmc> strcat: ah, that makes sesne
[20:45:08] <strcat> 5u8.zext::<uint>()
[20:45:10] <olsonjeffery> still chewing on how to do that right.
[20:45:15] *** Joins: doomlord__ (doomlod@moz-13E69BC8.range86-180.btcentralplus.com)
[20:45:20] <strcat> makes you think more about what you're doing
[20:45:20] *** Quits: doomlord__ (doomlod@moz-13E69BC8.range86-180.btcentralplus.com) (Connection reset by peer)
[20:45:32] <strcat> rather than thinking int -> u8 will be u8::max_value if it's over it
[20:45:35] <olsonjeffery> i think it might involving locking down FileStream and only returning trait objects that represent the permissions of the fd when it was opened.
[20:45:42] <strcat> since that's a reasonable thing to think
[20:46:23] <strcat> it'd be nice if `as` was just for trait objects
[20:46:31] <strcat> rusti: ~5 as ~ToStr
[20:46:32] -rusti- ~std::to_str::ToStr:Send
[20:46:33] <ecr> olsonjeffery: I haven't looked into files too much. The permissions seem much trickier than network stuff
[20:46:36] <strcat> rusti: ~5 as ~ToStr:
[20:46:37] -rusti- ~std::to_str::ToStr<no-bounds>
[20:47:04] <jdsanders> kimundi: do they need to be differentiated? If so, aren't they already differentiated by being either outside or inside something?
[20:47:08] <ecr> I may look into it if I get time
[20:47:13] <kimundi> strcat: He, so if trait objects autocoerce we wouldn'T need as anymore? :)
[20:47:15] <strcat> ecr: I think ideally you would represent it in the type system
[20:47:16] *** Joins: IJTGN9W4 (egyptmosle@F0AB3C8A.D0EEB247.DB9D6342.IP)
[20:47:17] <strcat> ofc that's more work
[20:47:22] <kimundi> jdsanders:
[20:47:25] <strcat> but having 'write' on a read-only file is silly
[20:47:30] <kmc> I'm ok with "as" also in cases where the new type is logically a superset of the old one
[20:47:34] <kmc> 1u8 as u32
[20:47:37] <jdsanders> kimundi: hmmm, I think I get it now, one block of docs is presumably both outside a function and inside a module
[20:47:39] <kimundi> mod foo { // what do I apply to? ; mod bar {}}
[20:47:40] <ecr> strcat: right, that's the goal.
[20:47:50] <olsonjeffery> ecr: yeah im elbow deep in it right now. doesn't seem to be much concensus beyond "inspired by C#'s system.io" .. but the semantics are way way way off
[20:47:55] <jdsanders> kimundi: gotcha
[20:48:09] <olsonjeffery> (c# semantics vs rust, that is)
[20:48:12] *** Quits: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com) (Quit: Leaving)
[20:48:24] <strcat> steal all the things from other languages :)
[20:48:26] <olsonjeffery> you can try to call .Read() on a write-only FileStream, and that's how rust's api looks, right now.
[20:48:37] <kmc> but are floats logically a superset of integers? no, integers are a beautifully simple inductive datatype; real numbers are a monstrosity which we distort further with floating point ;)
[20:48:42] <ecr> I vote we go with Haskell style Iteratees :P
[20:48:45] <IJTGN9W4> Do skype,yahoo,other chat and social communication prog (facebook&twitter) spy for  Israel  &   usa  ???
[20:48:47] <IJTGN9W4> Do they record and analyse everything we type on the internet???
[20:48:48] <IJTGN9W4> ŸáŸÑ ÿ™ÿ™ÿ¨ÿ≥ÿ≥ ÿ®ÿ±ÿßŸÖÿ¨ ÿßŸÑÿ¥ÿßÿ™ Ÿà ÿßŸÑÿ™ŸàÿßÿµŸÑ ÿßŸÑÿßÿ¨ÿ™ŸÖÿßÿπŸâ ŸÑÿßÿ≥ÿ±ÿßÿ¶ŸäŸÑ Ÿà ÿßŸÖÿ±ŸäŸÉÿßÿüÿüÿüÿü
[20:48:50] <IJTGN9W4> Do skype,yahoo,other chat and social communication prog (facebook&twitter) spy for  Israel  &   usa  ???
[20:48:50] <erickt> strcat: I was working on making proper ToInt/ToI8/etc traits.
[20:48:51] <ecr> (but seriously)
[20:48:52] <IJTGN9W4> Do they record and analyse everything we type on the internet???
[20:48:52] *** IJTGN9W4 was kicked by kmc (kmc)
[20:49:00] <olsonjeffery> strcat: and yes, ecr hit on that very well in his presentation (type-system enforcing no-writes on a read-only stream)
[20:49:15] <olsonjeffery> even though we aren't doing it, right now. there's nothing stopping us.
[20:49:19] <kmc> did the Haskell community ever decide on which of the 50 iteratee libraries is best
[20:49:25] <olsonjeffery> im mostly doing all of the libuv plumbing
[20:49:31] <strcat> erickt: I think they should specify how you convert though (zero-extend, truncate, clamp to max value, etc.)
[20:49:37] <ecr> kmc: it's down to pipes and conduits now
[20:50:05] <erickt> strcat: that sounds like a great use of conditions :)
[20:50:09] *** Joins: jstevans (Instantbir@33DD034B.362CC69C.B7830B68.IP)
[20:50:15] <strcat> erickt: well this needs to be fast, so no
[20:50:29] <strcat> using conditions also means you need a separate lib for runtime-less rust
[20:51:10] * strcat thinks numeric conversions are basic enough to just want traits for each kind
[20:51:27] *** Quits: jstevans1 (Instantbir@BB267021.599F34EC.DDE5D3F6.IP) (Ping timeout)
[20:51:33] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[20:51:38] <erickt> strcat: hrm or just separate functions
[20:51:53] *** Joins: jstevans1 (Instantbir@6E3A0EE4.C6383AE7.DDE5D3F6.IP)
[20:52:34] <strcat> olsonjeffery: do you know the vague time frame for removing std::io?
[20:52:37] *** Joins: W56357 (egyptmosle@F0AB3C8A.D0EEB247.DB9D6342.IP)
[20:52:39] *** Quits: jstevans (Instantbir@33DD034B.362CC69C.B7830B68.IP) (Ping timeout)
[20:52:42] * strcat is kind of worried about the old -1 in char as EOF thing
[20:52:53] <strcat> chars are no longer signed
[20:52:57] <strcat> so they don't sign-extend
[20:52:58] <ecr> kmc: floats make me sad
[20:53:06] <W56357> Do skype,yahoo,other chat and social communication prog (facebook&twitter) spy for  Israel  &   usa  ???
[20:53:08] <W56357> Do they record and analyse everything we type on the internet???
[20:53:09] <W56357> ŸáŸÑ ÿ™ÿ™ÿ¨ÿ≥ÿ≥ ÿ®ÿ±ÿßŸÖÿ¨ ÿßŸÑÿ¥ÿßÿ™ Ÿà ÿßŸÑÿ™ŸàÿßÿµŸÑ ÿßŸÑÿßÿ¨ÿ™ŸÖÿßÿπŸâ ŸÑÿßÿ≥ÿ±ÿßÿ¶ŸäŸÑ Ÿà ÿßŸÖÿ±ŸäŸÉÿßÿüÿüÿüÿü
[20:53:11] <W56357> Do skype,yahoo,other chat and social communication prog (facebook&twitter) spy for  Israel  &   usa  ???
[20:53:13] <W56357> Do they record and analyse everything we type on the internet???
[20:53:14] <W56357> ŸáŸÑ ÿ™ÿ™ÿ¨ÿ≥ÿ≥ ÿ®ÿ±ÿßŸÖÿ¨ ÿßŸÑÿ¥ÿßÿ™ Ÿà ÿßŸÑÿ™ŸàÿßÿµŸÑ ÿßŸÑÿßÿ¨ÿ™ŸÖÿßÿπŸâ ŸÑÿßÿ≥ÿ±ÿßÿ¶ŸäŸÑ Ÿà ÿßŸÖÿ±ŸäŸÉÿßÿüÿüÿüÿü
[20:53:18] <_y_> um? bot?
[20:53:19] <olsonjeffery> strcat: i think we're close'ish to having a conversation around how to transition away from the old std::io
[20:53:20] *** brson sets mode: +b *!*gyptmosle@*.D0EEB247.DB9D6342.IP
[20:53:20] *** W56357 was kicked by brson (brson)
[20:53:23] <strcat> so 'x as int' where x is -1 unsoundly forced into a char will not be -1, if int is 64-bit
[20:53:23] <olsonjeffery> graydon had an idea in his how to do it
[20:53:24] *** Joins: jstevans (Instantbir@6D2E2540.6925E1D4.DDE5D3F6.IP)
[20:53:27] <olsonjeffery> no doubt brson does as well
[20:53:34] *** ChanServ sets mode: +o jdm
[20:53:37] <strcat> this issue bit me hard ;]
[20:53:40] <olsonjeffery> but that vision hasn't really been communicated to me
[20:53:47] <strcat> rusti: -1 as char as int
[20:53:48] -rusti- -1
[20:53:53] <strcat> if char is unsigned you get
[20:53:56] <strcat> rusti: -1 as u32 as int
[20:53:57] -rusti- 4294967295
[20:54:04] <strcat> signed -> signed moves the sign bit appropriately
[20:54:23] *** Quits: jstevans1 (Instantbir@6E3A0EE4.C6383AE7.DDE5D3F6.IP) (Ping timeout)
[20:54:30] *** Quits: bent (chatzilla@C36F5748.8CE62E0F.A36C57B9.IP) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[20:54:33] <strcat> ofc it shouldn't be putting -1 in there in the first place because a utf-8 encoder will go bonkers and make some 6-byte overlong encoding
[20:54:35] *** Joins: jstevans1 (Instantbir@CB0D4477.83BCE10.DDE5D3F6.IP)
[20:54:58] <olsonjeffery> strcat: fwiw, in newrt file io, eof is signalled different
[20:55:04] *** Quits: jstevans (Instantbir@6D2E2540.6925E1D4.DDE5D3F6.IP) (Ping timeout)
[20:55:05] *** Joins: jstevans (Instantbir@D3102178.9875BCA6.DDE5D3F6.IP)
[20:55:06] <strcat> Option<char> can be the same size as char in the future
[20:55:07] <olsonjeffery> by a 0-byte read result
[20:55:18] <olsonjeffery> (that's how libuv lets us know, that is)
[20:55:23] <strcat> olsonjeffery: ah
[20:55:31] <erickt> strcat: what do you think about having .to_i8() return an Option<i8>? Where it returns None if the input type is out of range?
[20:55:34] <ecr> strcat, olsonjeffery: that sounds right
[20:56:00] <strcat> erickt: I'm not sure :)
[20:56:05] <olsonjeffery> brson: ping
[20:56:14] *** Quits: jstevans1 (Instantbir@CB0D4477.83BCE10.DDE5D3F6.IP) (Ping timeout)
[20:56:54] <olsonjeffery> also: heh, redpill irc spam. that's a first.
[20:58:17] <brson> olsonjeffery: pong, but i'm in a meeting atm
[20:58:35] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[20:58:49] <olsonjeffery> will you be around later to chat about the state of file io and conversation topics referenced above?
[21:00:06] *** Quits: vk (chatzilla@3E9D68F2.B1163E0C.2A6693DD.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 25.0a2/20130903004001])
[21:00:06] <brson> sure. i'll ping you
[21:00:23] <olsonjeffery> ecr: re: the unkillable task audit thing.. seems that would be easy to enforce in the scheduler API for task resumption?
[21:00:40] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[21:00:49] <olsonjeffery> dovetailing on tailoring the homing IO api to also provide the scheduler..
[21:00:54] <olsonjeffery> less boilerplate, the better
[21:00:56] *** Quits: _y_ (Mibbit@moz-1264150D.dynamic.isp.telekom.rs) (Quit: http://www.mibbit.com ajax IRC Client)
[21:01:03] <olsonjeffery> especially since all of the scheduler/task stuff is exposed in uvio..
[21:01:12] <ecr> olsonjeffery: that's what I was thinking. we just need to be careful about it.
[21:01:22] <strcat> brson: btw, can you clear the workspace on the linux snapshot bot (linux1b and maybe also linux2b) when you have time?
[21:01:30] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[21:01:33] <strcat> brson: something is wrong with the llvm they have, and clean-llvm didn't deal with it
[21:02:22] *** Quits: pnkfelix|rcirc (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[21:02:25] <ecr> olsonjeffery: I'd also like to make consuming the scheduler provide some sort of token at the type level so I can require home_for_io_with_sched's passed closure to actually use the scheduler and avoid it dropping into the abyss
[21:02:34] <strcat> (strangely enough it fixed a similar issue on the mac bot)
[21:02:36] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[21:03:03] <olsonjeffery> ecr: you could easily enforce it at runtime
[21:03:21] <olsonjeffery> did you ever see pcwalton's post to the list about the steal/swap library api?
[21:04:33] <ecr> olsonjeffery: we do I think (if the scheduler isn't where we expect it then we rtabort), but I think we can do it at compile time as well. basically all the methods in sched.rs that take Scheduler by value (ex: deschedule_running_task_and_then) would return SchedCosumed instead of nothing. Then I can just make home_for_io_with_sched take a closure &fn(Scheduler) -> SchedConsumed
[21:05:14] <ecr> olsonjeffery: I think I glanced at it, but didn't nmataskis say it was unsound?
[21:05:34] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[21:05:34] *** ChanServ sets mode: +o tjc
[21:05:43] <olsonjeffery> ecr: i brought it up, re: the dynamic check that the scheduler is consumed
[21:05:49] <olsonjeffery> but that doesn't matter if its already happening
[21:06:08] *** Joins: brendan (brendaneic@F689B55.D90C1611.426D2C95.IP)
[21:06:18] <olsonjeffery> but i like your idea more :)
[21:06:30] <strcat> rusti: 5 as int
[21:06:31] -rusti- 5
[21:06:33] <strcat> rusti: 5i as int
[21:06:33] -rusti- 5
[21:06:40] <strcat> rusti: struct Foo; Foo as Foo
[21:06:40] -rusti- <anon>:5:21: 5:31 error: non-scalar cast: `main::Foo` as `main::Foo`
[21:06:41] -rusti- <anon>:5          struct Foo; Foo as Foo
[21:06:41] -rusti-                               ^~~~~~~~~~
[21:06:41] -rusti- error: aborting due to previous error
[21:06:41] -rusti- application terminated with error code 101
[21:06:46] <ecr> rusti: -3i as uint
[21:06:47] -rusti- 18446744073709551613u
[21:06:54] <ecr> hm
[21:06:56] <strcat> rusti: -3u
[21:06:56] -rusti- 18446744073709551613u
[21:07:01] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[21:07:10] <ecr> I'm not sure how I feel about that
[21:07:11] <strcat> rusti: let x = 1; -x
[21:07:12] -rusti- -1
[21:07:15] <strcat> rusti: let x = 1u; -x
[21:07:16] -rusti- 18446744073709551615u
[21:07:24] <strcat> why is - implementing on unsigned things?
[21:07:25] <strcat> :s
[21:07:38] <strcat> I guess it's useful
[21:07:45] <ecr> strcat: probably because Num requires Negate
[21:07:48] <ecr> I think
[21:08:56] <ecr> rusti: -3u + 3u
[21:08:56] -rusti- 0u
[21:09:05] <ecr> oh, good. at least it's a proper inverse
[21:09:49] <ecr> strcat: just consider it the inverse on Z+ (mod 64) or whatever the size it
[21:10:15] <ecr> rusti: -(-3u)
[21:10:15] -rusti- 3u
[21:11:10] <engla> why not implement Neg when you impl Sub
[21:11:22] <strcat> ecr: the modular arithmetic part falls apart with signed ones :}
[21:11:24] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[21:11:36] <strcat> rusti: int::min_value
[21:11:43] -rusti- pastebinned 11 lines of output: http://ix.io/7QH
[21:11:43] <strcat> rusti: std::int::min_value
[21:11:44] -rusti- -9223372036854775808
[21:12:04] <strcat> rusti: std::int::min_value / -1 /* this is actually *undefined behaviour*, not just an unspecified result - we should fail!() */
[21:12:05] -rusti- -9223372036854775808
[21:12:12] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[21:12:12] *** ChanServ sets mode: +o tjc
[21:12:18] *** Joins: robarnold (rob@moz-59F6B5.hfc.comcastbusiness.net)
[21:13:05] <ecr> engla: theoretically, there are objects with subtraction, but not inverses, although that's not what Sub is representing...
[21:13:22] <ecr> engla: pointers are an example actually
[21:13:43] <cmr> strcat: re: segmented stacks, could one tell rustc what the stack size is, and it compares to the constant value? Is that what fixed_segment_size does?
[21:13:59] <strcat> cmr: well that's what I want implemented
[21:13:59] <brson> strcat: i deleted the snapshot workspace on linux1b. linux2b is mia
[21:14:19] <cmr> strcat: how would it calculate the current stack size?
[21:14:27] <strcat> it's hardcoded in the binary
[21:14:27] <cmr> walk the stack?
[21:14:38] <strcat> well
[21:14:43] <strcat> if it's pthread, it can ask pthread
[21:14:44] <cmr> The current stack used, not the maximum.
[21:14:49] <strcat> you can never really know
[21:14:52] <cmr> This is for a standalone environment.
[21:14:57] <strcat> you have to trust that you weren't screwed over by the parent process
[21:15:12] <strcat> I guess you can probably look in /proc
[21:15:26] <cmr> Once again, standalone. Bare metal, freestanding.
[21:15:34] <strcat> then it's hardcoded
[21:15:43] <kimundi> strcat: why is dividing int_min_value by -1 undefined? wouldn't it result in an sign switch resulting in an over/underflow?
[21:15:48] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[21:15:49] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/_JGVJQ
[21:15:49] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[21:15:57] <ecr> strcat: does (-(z-1), ..., 0, ... , z-1) form a group under + (mod z) ? 
[21:15:59] <strcat> kimundi: abs(int_min) is unspecified
[21:16:05] <strcat> there's no equivalent int_max
[21:16:08] <strcat> yay two's complement
[21:16:12] <kimundi> I knwo
[21:16:23] *** Joins: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net)
[21:16:30] <kimundi> I guess my question is if that's truly 'undefined'
[21:16:38] <strcat> it is truly undefined because LLVM says it is
[21:16:57] <strcat> we don't deal with hardware
[21:17:08] <kimundi> rusti: -(-128i8)
[21:17:08] -rusti- -128i8
[21:17:13] *** Quits: thpickert (thpickert@moz-F526B0F7.dynamic.dsl.tng.de) (Quit: thpickert)
[21:17:20] <ecr> what
[21:17:26] <strcat> I think that's either well defined or unspecified, not undefined behaviour
[21:17:30] <ecr> what happened there?
[21:17:34] <strcat> ecr: there's no '128', it overflows after 127
[21:17:48] <strcat> 0 counts as a positive number
[21:17:49] <kimundi> strcat: Interesting, I see it as analouge to divinding by -1
[21:17:57] <ecr> *sigh* crazy machine integers...
[21:17:57] <kimundi> strcat: or calling abs
[21:17:59] <strcat> ecr: two's complement :)
[21:18:08] <strcat> rusti: 127i8 + 1
[21:18:09] -rusti- -128i8
[21:18:10] <kimundi> Of course, whatever llvm says goes, but...
[21:18:22] <strcat> ecr: 128 negative numbers, 128 positive numbers
[21:18:28] <strcat> I think.
[21:18:34] <ecr> strcat: *twitch*
[21:18:48] <kimundi> Isn't it still the same mechanism? the 'actual result value' lies beyond the exprssible range, thus overflow happens?
[21:19:01] <strcat> kimundi: well not in LLVM
[21:19:55] <ecr> strcat: oh, I had a question for you. What's the rationale for iterator adaptors takes self by value (consuming the iterator) rather than a reference that outlives the adaptor?
[21:19:59] *** Quits: Jesin (Jessin_@moz-4CC9F20B.cc.lehigh.edu) (Ping timeout)
[21:20:23] *** Quits: Ms2ger (Ms2ger@moz-B53902AE.adsl-dyn.isp.belgacom.be) (Quit: nn)
[21:20:27] <strcat> ecr: it lets them chain in the current rvalue system
[21:20:33] <strcat> ecr: if you want, you can actually still do it by-ref
[21:20:40] <strcat> ecr: just make a by_ref adaptor
[21:20:47] <strcat> sec
[21:20:49] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[21:20:49] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/n7uGuA
[21:20:49] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[21:20:50] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[21:20:50] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/NGB8eg
[21:20:50] <ghrust> 13rust/06auto 1461026ae 15blake2-ppc: rt::io: Add Bytes iterator for Reader...
[21:20:50] <ghrust> 13rust/06auto 14913d1b4 15blake2-ppc: rt::io: Rename Bytes to ByteIterator and add note about iteration
[21:20:50] <ghrust> 13rust/06auto 146c13b0f 15bors: auto merge of #8935 : blake2-ppc/rust/reader-bytes, r=brson...
[21:20:52] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[21:20:52] *** Quits: nkoep (nik@moz-16EFBB02.vpn.rwth-aachen.de) (Ping timeout)
[21:21:20] *** Quits: eholk (eholk@E0C005DE.48D4C455.51B6877.IP) (Quit: eholk)
[21:21:23] <kimundi> I guess I just find it strange that one is undefined, and the other defined/specified, despite both operations "misbehaving" for the same physically reasons.
[21:21:35] <strcat> you can make overflow undefined in LLVM
[21:21:38] <strcat> it's opt-in
[21:21:52] <strcat> C opts into nsw (no-signed-wrap) so signed int overflow is undefined
[21:21:58] <ecr> strcat: this mostly comes from wanting to use take().collect() for fill a vector, and then using it again for fill another vector.
[21:21:59] <strcat> but you can make unsigned overflow undefined too
[21:22:04] <strcat> ecr: well sec, you can do it
[21:22:06] *** Joins: jstevans1 (Instantbir@D3102178.9875BCA6.DDE5D3F6.IP)
[21:22:11] *** Quits: jstevans (Instantbir@D3102178.9875BCA6.DDE5D3F6.IP) (Connection reset by peer)
[21:22:15] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Ping timeout)
[21:22:22] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[21:22:31] <Florob> kimundi, isn't the issue precisely that overflow happens? I think you're assuming overflow = wrap-around. But generally if you don't define a behaviour for overflow there is nothing that "naturally should happen" IMHO. (except pretty much all platforms use twos complement and wrap)
[21:22:35] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[21:22:36] *** Parts: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) ()
[21:22:45] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[21:22:45] *** ChanServ sets mode: +o pnkfelix
[21:22:50] <strcat> it's not about hardware.
[21:23:03] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:23:04] <strcat> undefined here doesn't mean the hardware leaves it as unspecified
[21:23:13] <strcat> it means LLVM explicitly considers it undefined
[21:23:22] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[21:23:26] <kimundi> strcat: Just curious, does llvm allow making divide by -1 defined?
[21:23:30] <strcat> kimundi: no
[21:23:39] <strcat> but it allows making 127i8 + 1 undefined
[21:23:54] <kimundi> I knwo, you said that thrice now :P
[21:23:59] <strcat> since there are many optimization opportunities when every valid program can be assumed to not overflow
[21:24:06] <strcat> it's opt-in for pointer arithmetic, signed ints and unsigned ints
[21:24:14] <strcat> division by zero or that case is always undef
[21:24:28] <strcat> undefined behaviour for some other things (bit shifts maybe?) is also opt-in
[21:24:45] <strcat> there are things with *unspecified results*
[21:24:47] <strcat> like
[21:24:55] <strcat> rusti: 1 >> 65 /* unspecified, not undefined */
[21:24:56] -rusti- 140078085103680
[21:25:07] <adridu59> rusti: let mut i = -50; let mut j = -48; loop { if (a+b)/2 >= sqrt(a*b) { printf!("Yea!"); } else { printf!("No!"); } if i > 50 { break; } i += 1; }
[21:25:11] -rusti- pastebinned 17 lines of output: http://ix.io/7QP
[21:25:32] <brson> lkuper: your rust-redex model is on the front page of hn, for some reason!
[21:25:33] <strcat> adridu59: you most likely want to use an iterator for `i`
[21:25:45] <strcat> rusti: struct ByRef<'self, T> { iter: &'self mut T } impl<'self, A, T: Iterator<A>> Iterator<A> for ByRef<T> { fn next(&mut self) { self.iter.next() } }
[21:25:46] <Florob> rusti: 1 << 64
[21:25:51] -rusti- pastebinned 8 lines of output: http://ix.io/7QQ
[21:25:51] -rusti- 140311124828224
[21:26:02] <strcat> rusti: struct ByRef<'self, T> { iter: &'self mut T } impl<'self, A, T: Iterator<A>> Iterator<A> for ByRef<'self, T> { fn next(&mut self) { self.iter.next() } }
[21:26:04] -rusti- pastebinned 5 lines of output: http://ix.io/7QR
[21:26:06] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[21:26:16] <strcat> rusti: struct ByRef<'self, T> { iter: &'self mut T } impl<'self, A, T: Iterator<A>> Iterator<A> for ByRef<'self, T> { fn next(&mut self) -> Option<A>{ self.iter.next() } }
[21:26:17] -rusti- ()
[21:26:19] <strcat> ecr: ^
[21:26:20] <lkuper> brson: hahahahahahahahahah
[21:26:23] * lkuper takes breath
[21:26:27] <lkuper> hahahahahahahahahah
[21:26:32] <lkuper> oh dear.
[21:26:39] <adridu59> rusti: let mut a = -50; let mut b = -48; loop { if (a+b)/2 >= std::num::sqrt(a*b) { printf!("Yea!"); } else { printf!("No!"); } if a > 50 { break; } a += 1; }
[21:26:40] <kimundi> What's the difference between the two words 'to specify' and 'to define' in this context? :P
[21:26:41] -rusti- pastebinned 4 lines of output: http://ix.io/7QS
[21:26:58] <kimundi> strcat:
[21:27:01] <kimundi> whoops
[21:27:05] <adridu59> rusti: let mut a = -50; let mut b = -48; loop { if (a+b)/2 >= num::sqrt(a*b) { printf!("Yea!"); } else { printf!("No!"); } if a > 50 { break; } a += 1; }
[21:27:08] -rusti- pastebinned 11 lines of output: http://ix.io/7QT
[21:27:20] <kimundi> Anyway, I couldn't read any different meaning into them :P
[21:27:31] <strcat> kimundi: undefined means 'no valid program does this'
[21:27:43] <adridu59> rusti: use std::num::sqrt; let mut a = -50; let mut b = -48; loop { if (a+b)/2 as float >= num::sqrt((a*b) as float) { printf!("Yea!"); } else { printf!("No!"); } if a > 50 { break; } a += 1; }
[21:27:46] -rusti- pastebinned 11 lines of output: http://ix.io/7QU
[21:27:49] <strcat> optimization passes assume it never happens, codegen assumes it never happens
[21:27:50] <ecr> strcat: thx
[21:27:57] <adridu59> rusti: use std::num::sqrt; let mut a = -50; let mut b = -48; loop { if (a+b)/2 as float >= sqrt((a*b) as float) { printf!("Yea!"); } else { printf!("No!"); } if a > 50 { break; } a += 1; }
[21:28:00] -rusti- pastebinned 8 lines of output: http://ix.io/7QV
[21:28:10] <strcat> ecr: so you'd just do byref(iter).take(2) and it wouldn't move into take
[21:28:18] <adridu59> rusti: use std::num::sqrt; let mut a = -50; let mut b = -48; loop { if ((a+b)/2) as float >= sqrt((a*b) as float) { printf!("Yea!"); } else { printf!("No!"); } if a > 50 { break; } a += 1; }
[21:28:20] -rusti- pastebinned 4 lines of output: http://ix.io/7QW
[21:28:23] *** [a]bacus is now known as abacus
[21:28:42] <lkuper> brson: Ah, danluu posted it.  I sort of know him via Hacker School channels.
[21:28:51] <adridu59> rusti: use std::num::sqrt; let mut a = -50; let mut b = -48; loop { if ((a+b)/2) >= sqrt((a*b)) { printf!("Yea!"); } else { printf!("No!"); } if a > 50 { break; } a += 1; }
[21:28:53] -rusti- pastebinned 4 lines of output: http://ix.io/7QX
[21:28:58] <ecr> strcat: I think I need to stare at that for a while to grok how it works.
[21:29:28] <strcat> ecr: the thing about the self by-value is that it's generic - it's implemented on T where T is Iterator<A>
[21:29:40] <strcat> so it will take the ByRef struct by-value, but that has another iterator by-mut-ref
[21:29:41] <adridu59> rusti: use std::num::sqrt; let mut a = -50; let mut b = -48; loop { if ((a+b)/2) as float >= sqrt((a*b) as float) { printf!("Yea!"); } else { printf!("No!"); } if a > 50 { break; } a += 1; b+= 1; }
[21:29:44] -rusti- pastebinned 1 lines of output: http://ix.io/7QY
[21:29:48] *** Joins: cwmma (Mibbit@moz-468348D6.hsd1.ma.comcast.net)
[21:29:51] <ecr> strcat: ah, that makes sense then
[21:29:58] <adridu59> yess I was right
[21:30:01] <strcat> ecr: just makes life much easier for the common case with by-value
[21:30:18] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[21:30:18] *** ChanServ sets mode: +ao dherman dherman
[21:30:34] <ecr> strcat: is ByRef a normal adaptor? maybe we should add it if not.
[21:30:38] <adridu59> rusti: use std::num::sqrt; let mut a = -50; let mut b = -48; loop { if ((a+b)/2) as float >= sqrt((a*b) as float) { printf!("Yea!"); } else { printf!("No!"); } if a > 50 { break; } a += 1; b+= 1; }
[21:30:43] -rusti- pastebinned 1 lines of output: http://ix.io/7QY
[21:32:03] <engla> ecr: I think ByRef will wrap ~Iterator objects properly as well
[21:32:50] <engla> there is a problem I can't resolve though, and that is implementing fn size_hint(&self)   -- can't deref self.iter because it's &mut
[21:32:59] <strcat> ecr: yeah it's something I've been meaning to add
[21:33:03] <strcat> I'll send in a PR today
[21:33:26] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[21:39:38] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[21:41:21] *** Joins: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com)
[21:42:12] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[21:43:08] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[21:43:08] <ghrust> 01[13rust01] 15thestinger merged 06master into 06snap-stage3: 02http://git.io/z8Oe8g
[21:43:08] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[21:43:51] *** Joins: nkoep (nik@moz-45A70240.pool.mediaways.net)
[21:45:15] <strcat> why do we always have 1337 bugs :|
[21:45:22] * strcat keeps closing them
[21:45:37] <strcat> obviously a conspiracy of some sort
[21:45:50] <tjc> because our bugs are 1337
[21:47:11] * strcat hopes he didn't break macros by adding a literal type
[21:47:25] *** Joins: ktt3ja (Mibbit@moz-6B6EE8C0.hsd1.va.comcast.net)
[21:48:11] *** Quits: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[21:49:11] <strcat> rusti: 3.3 as bool as float as int as u8 as i8
[21:49:13] -rusti- 3i8
[21:49:42] <strcat> rusti: -3.3 as bool as i8
[21:49:43] -rusti- 0i8
[21:49:59] <strcat> rusti: -3i8 as bool as i8
[21:50:00] -rusti- -3i8
[21:50:05] <strcat> rusti: -3i8 as bool as i64
[21:50:06] -rusti- 253i64
[21:50:12] <strcat> well at least bools are unsigned
[21:50:27] <ktt3ja> http://pastebin.com/dMP5ttmu
[21:50:32] <ktt3ja> why do I get that error?
[21:50:53] <strcat> ktt3ja: need .iter() before filter_map
[21:51:16] <strcat> there are several kinds of vec iterators, vecs themselves aren't iterators
[21:51:31] <flaper87> hey guys, I need some help here: If I uncoment this line I get an error saying that the type couldn't be determined https://github.com/FlaPer87/rust-actors/blob/master/src/actor.rs#L41
[21:51:35] <flaper87> what am I doing wrong?
[21:52:06] <ktt3ja> strcat: thank you
[21:52:11] <flaper87> Also, the compiler fails here saying that Actor::new is not defined https://github.com/FlaPer87/rust-actors/blob/master/src/tests/actor.rs#L10
[21:52:30] * flaper87 is definitely missing something
[21:52:33] <kmc> flaper87: you say "Actors Trait" but you're neither defining nor implementing a trait
[21:52:35] <engla> flaper87: receive never returns
[21:52:40] <kmc> you're just writing methods for Actor
[21:53:05] <engla> flaper87: you could mark it with the return type -> !
[21:53:06] <kmc> yeah receive should be pub fn receive(&self) -> ! { ...
[21:53:11] <flaper87> kmc: yeah, soryr, that doc is not updated
[21:53:13] <kmc> ok
[21:53:30] <flaper87> kmc: what does -> ! do ?
[21:53:35] <kmc> says the function doesn't return
[21:54:00] <kmc> so e.g. you can call it on one branch of an "if", no matter what type the other branch has
[21:54:05] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[21:54:07] <kmc> also what does "impl<Send> Actor" mean? I think you're defining a type variable named Send and then not using it
[21:54:15] <kmc> which is also a confusing name because Send is a built in trait
[21:55:02] <strcat> 1 usage of 'as bool' in libextra
[21:55:14] * strcat hopes it's alone
[21:55:21] <flaper87> kmc: yeah, removed that Send, that's a left over from a test. Ok, I no longer get that error on receive. But I still get unrseolved name in the test
[21:55:30] <strcat> meh we also do it in librustc
[21:57:41] <kmc> flaper87: if you intend 'new' to be a static method, drop the &self parameter
[21:58:18] <flaper87> kmc: Damn it, I knew I was failing in something really stupid!
[21:58:24] <flaper87> kmc: thanks! Fixed!
[21:58:30] <kmc> no prob :)
[21:58:34] * flaper87 needs to sharp his rust-eye
[21:58:43] <kmc> it often takes a second set of eyes to spot this kind of thing
[21:58:58] <flaper87> yeah
[21:59:52] *** Quits: FrozenCow (FrozenCow@63514305.86540B92.A9B2C039.IP) (Ping timeout)
[22:02:42] *** jorendorff is now known as jorendorff_away
[22:02:44] <strcat> tjc: https://github.com/mozilla/rust/pull/8980 r?
[22:03:56] <tjc> strcat: in a meeting but will look at it after
[22:05:32] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:05:53] *** Joins: miza (miza@moz-4DD51325.home.otenet.gr)
[22:07:24] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:07:54] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:08:48] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[22:11:11] <strcat> rusti: 'c' + 'd'
[22:11:12] -rusti- <anon>:5:9: 5:18 error: binary operation + cannot be applied to type `char`
[22:11:12] -rusti- <anon>:5          'c' + 'd'
[22:11:13] -rusti-                   ^~~~~~~~~
[22:11:13] -rusti- error: aborting due to previous error
[22:11:13] -rusti- application terminated with error code 101
[22:11:20] <strcat> rusti: 5i as char
[22:11:21] -rusti- <anon>:5:9: 5:19 error: only `u8` can be cast as `char`, not `int`
[22:11:21] -rusti- <anon>:5          5i as char
[22:11:21] -rusti-                   ^~~~~~~~~~
[22:11:21] -rusti- error: aborting due to previous error
[22:11:21] -rusti- application terminated with error code 101
[22:11:27] *** flaper87 is now known as flaper87|afk
[22:11:36] <miza> rusti: ()
[22:11:37] -rusti- ()
[22:11:46] <miza> rusti: !()
[22:11:46] -rusti- <anon>:5:9: 5:12 error: cannot apply unary operator `!` to type `()`
[22:11:46] -rusti- <anon>:5          !()
[22:11:47] -rusti-                   ^~~
[22:11:47] -rusti- error: aborting due to previous error
[22:11:47] -rusti- application terminated with error code 101
[22:11:49] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[22:13:46] * strcat tries to think of more char/bool holes
[22:14:19] <strcat> other than evil str index-assign
[22:16:16] *** Joins: jstevans (Instantbir@D3102178.9875BCA6.DDE5D3F6.IP)
[22:16:16] *** Quits: jstevans1 (Instantbir@D3102178.9875BCA6.DDE5D3F6.IP) (Connection reset by peer)
[22:17:10] *** Joins: jstevans1 (Instantbir@EB68F56.C422786F.DDE5D3F6.IP)
[22:17:56] *** Quits: jstevans (Instantbir@D3102178.9875BCA6.DDE5D3F6.IP) (Ping timeout)
[22:19:23] *** Joins: a_m0d|home (a_m0d@moz-68E0CFD0.acanac.net)
[22:20:22] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[22:21:11] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Quit: WeeChat 0.4.1)
[22:21:15] *** Quits: cwmma (Mibbit@moz-468348D6.hsd1.ma.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[22:21:29] *** Joins: tikue_ (tkuehn@DAF45FBE.28259105.689607DE.IP)
[22:21:41] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[22:21:48] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: night)
[22:22:46] *** Quits: threecreepio (jdp@moz-71E164C9.cust.bredbandsbolaget.se) (Quit: threecreepio)
[22:22:49] *** Quits: jstevans1 (Instantbir@EB68F56.C422786F.DDE5D3F6.IP) (Ping timeout)
[22:23:58] <engla> no but I can confuse people
[22:24:04] <engla> rusti: '√°'
[22:24:04] -rusti- '\xe1'
[22:24:04] *** Joins: jstevans (Instantbir@moz-B4B8B60A.bootp.virginia.edu)
[22:24:10] <engla> rusti: 'aÃÅ'
[22:24:10] -rusti- <anon>:5:9: 5:11 error: unterminated character constant
[22:24:10] -rusti- <anon>:5          'aÃÅ'
[22:24:10] -rusti-                   ^~
[22:24:10] -rusti- application terminated with error code 101
[22:24:29] <engla> second is two codepoints
[22:24:32] <sfackler> ~unicode~
[22:24:32] *** Joins: jstevans1 (Instantbir@87E9DD84.EEDD3B02.DDE5D3F6.IP)
[22:24:57] <engla> ≈©nicod·∫Ω
[22:25:14] <strcat>  éllƒ±s «ù…π…ê s én∆É no é
[22:25:44] *** Quits: jstevans (Instantbir@moz-B4B8B60A.bootp.virginia.edu) (Ping timeout)
[22:26:14] *** Quits: sebcrozet (sebcrozet@moz-D8879CC3.w80-13.abo.wanadoo.fr) (Quit: Gone)
[22:27:16] <kmc> ÍôÆ
[22:28:55] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[22:29:45] *** Joins: askalski (akuda@2BA4E5A7.CC7751E8.6712E96B.IP)
[22:30:17] *** Quits: askalski (akuda@2BA4E5A7.CC7751E8.6712E96B.IP) (Quit: Wychodzi)
[22:31:21] *** Joins: Samulus (sam@moz-212ECDA5.phnx.qwest.net)
[22:32:40] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[22:34:28] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[22:35:48] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[22:35:48] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/NGB8eg
[22:35:48] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[22:36:29] *** Quits: brendan (brendaneic@F689B55.D90C1611.426D2C95.IP) (Quit: brendan)
[22:37:17] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[22:38:32] *** Joins: brendan (brendaneic@F689B55.D90C1611.426D2C95.IP)
[22:38:51] <miza> what is the point of range_step and range to has different way to call
[22:39:52] *** Quits: jensnock_ (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[22:40:45] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[22:40:45] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/jauC1A
[22:40:45] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[22:40:46] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[22:40:47] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/__Gfng
[22:40:47] <ghrust> 13rust/06auto 141fbbc71 15Alex Crichton: Move llvm into the artifacts build directory
[22:40:47] <ghrust> 13rust/06auto 1444be4a4 15Alex Crichton: Move the llvm auto-clean stamp into $target/llvm
[22:40:47] <ghrust> 13rust/06auto 146b3c7cb 15Alex Crichton: Build rustllvm into $target/rustllvm
[22:40:49] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[22:41:11] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[22:41:11] *** ChanServ sets mode: +ao brson brson
[22:41:17] <brson> olsonjeffery: ping
[22:41:31] <pnkfelix> miza: range captures the most common use case.  range_step is strictly more general.
[22:41:53] <miza> i would like to have a syntax way
[22:42:07] <pnkfelix> miza: (also, the current range impl has been kept up to date with iterators.  not so for range_step, range_rev, etc)
[22:42:21] <engla> miza: range_step isn't implemented as iterator yet
[22:42:35] <miza> ok
[22:42:48] *** Quits: Voomer (Voomer@moz-CC05FF5E.hsd1.wa.comcast.net) (Connection reset by peer)
[22:42:58] *** Joins: Voomer (Voomer@moz-CC05FF5E.hsd1.wa.comcast.net)
[22:44:15] <miza> in general it nice to could guess the sintax of something
[22:44:30] <miza> if you have some knowledge in the language
[22:44:34] *** Quits: ktt3ja (Mibbit@moz-6B6EE8C0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[22:46:10] <kmc> keyword args are good for that sort of thing
[22:47:32] <engla> strcat: nice, I didn't realize your char change merged
[22:47:41] *** Quits: aeqwa (aeqwa@moz-D8434BEB.dsl.tropolys.de) (Quit: Lost terminal)
[22:47:48] <olsonjeffery> brson: po
[22:47:53] <olsonjeffery> +ng
[22:48:15] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[22:49:31] <dbaupp> ecr: btw, -(z-1), .. (z-1) mod z isn't a group under + (-z, ..., z-1 mod (2*z) is though)
[22:50:06] <ecr> dbaupp: that's what I thought
[22:50:16] <strcat> pnkfelix: range_rev does exist
[22:50:21] <strcat> it's range(0, 10).invert()
[22:50:26] *** Joins: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com)
[22:50:28] <strcat> range is double-ended, like a vector/dlist/deque
[22:50:34] <olsonjeffery> brson: so, i guess to start off, ill link to this: https://github.com/olsonjeffery/rust/blob/newrt_file_io_1/src/libstd/rt/io/file.rs#L182
[22:50:35] <ecr> since it's just isomorphic to (0, ... 2z-1)
[22:50:49] <dbaupp> ecr: yeah, and the signed integer types (with the normal (undefined) overflow) are of the latter form, so it's fine
[22:51:16] <dbaupp> strcat: commented on 8980 btw
[22:51:26] <olsonjeffery> brson: this is pretty much where i am, right now, with the high-level API .. a bit more of the low-level stuff has been mapped.. the only thing left that'll require real thought it readdir which is pretty wild in libuv
[22:52:02] <bjz> jeaye: might be of interest: https://github.com/bjz/glfw-rs/pull/33
[22:52:09] <olsonjeffery> i need acrichto to land that libuv upgrade, decoupled from 8645, which he will have a PR for soon, i think..
[22:52:22] <olsonjeffery> so that's #1
[22:52:45] <bjz> jeaye: jack and lbergstrom have raised some concerns about the safety of using managed closures there
[22:52:47] <engla> strcat: r on the is_utf8 update? https://github.com/mozilla/rust/pull/8982
[22:52:56] <olsonjeffery> #2 the FileInfo/DirectoryInfo stuff is really lame right now, IMO, because i guess after our last conversation i shelved any attempt at cleverness and just hewed to what is done in System.IO in .NET
[22:53:26] <olsonjeffery> but, especially after catching ecr's presentation today, i really do feel that the high-level API should be taking a hardcore affine-type-driven approach
[22:53:40] <olsonjeffery> to include busting up FileStream into read/write/rw versions
[22:53:51] <olsonjeffery> and consuming/closing file handlers when transitioning between them
[22:54:23] <pnkfelix> strcat: ah i see
[22:54:45] <olsonjeffery> brson: tl;dr -- id like to break from the FileInfo/FileStream separation present in .NET and focus on fd lifetime as the organizing scheme. so this is a roundabout way of coming back to my original approach where there was a FileInfo trait impl'd on FileStream and PathLike
[22:54:48] <strcat> rusti: let mut x = range(0, 3); (x.next(), x.next_back())
[22:54:48] -rusti- (Some(0), Some(2))
[22:54:58] <strcat> rusti: let mut x = range(0, 3); (x.next(), x.next_back(), x.next(), x.next_back())
[22:54:59] -rusti- (Some(0), Some(2), Some(1), None)
[22:55:11] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:55:12] <strcat> rusti: let mut x = range(0, 3); x.invert()
[22:55:12] -rusti- <anon>:5:17: 5:18 warning: variable does not need to be mutable [-W unused-mut (default)]
[22:55:12] -rusti- <anon>:5          let mut x = range(0, 3); x.invert()
[22:55:12] -rusti-                           ^
[22:55:13] -rusti- std::iterator::Invert<std::iterator::Range<int>>{iter: std::iterator::Range<int>{state: 0, stop: 3, one: 1}}
[22:55:31] <strcat> (just flips next/next_back)
[22:55:37] <olsonjeffery> brson: and #3 i guess i would like to here your thoughts on strategically approaching transitioning std::io to being newrt based and what that entails.
[22:55:56] <dbaupp> rusti: fn f(_: ~fn:()) {} let x = @mut 1i; f(|| *x += 1); f(|| *x += 2) /* note the : in the fn, ~fn is ~fn:Send by default */
[22:55:57] -rusti- ()
[22:55:57] -rusti- leaked memory in rust main loop (2 objects)
[22:55:58] -rusti- out: /build/rust-git/src/rust/src/rt/memory_region.cpp:184: memory_region::~memory_region(): Assertion `false' failed.
[22:55:58] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[22:56:15] <dbaupp> bjz: that^ should be a way to avoid @fn
[22:56:19] <olsonjeffery> mainly.. what more do we need in rt::io between we can start basing std::io off of that work? what do we want to change? what do we want to keep? graydon had something in his head, i take it. and i figure you do to.
[22:56:36] <olsonjeffery> and that's it, pretty much.
[22:56:59] <brson> olsonjeffery: I'll start with std::io first
[22:57:01] <dbaupp> bjz: (although it clearly doesn't work, and it has all the disadvantages of ~ and non of the advantages (e.g. it's not possible to call `~fn:` cross-taks))
[22:57:10] * olsonjeffery listens
[22:57:49] *** Quits: squiddy (squiddy@moz-F34769CA.adsl.alicedsl.de) (Quit: Leaving)
[22:58:06] <bjz> dbaupp: well, the closures should only be called on the main thread
[22:58:13] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[22:58:41] <bjz> dbaupp: what was the scary error?
[22:59:02] <strcat> dbaupp: I'm not really sure if it should say "as" or "to"
[22:59:02] <dbaupp> bjz: dunno, filing a bug. But I guess segfaulting is not something you want.
[22:59:07] <brson> There are a few things that are going to make porting std::io hard. The big thing we're missing in rt::io is string encoding and decoding, and I don't know that should work yet. The other problem is that i'm not at all confident about the design of rt::io at this point.
[22:59:11] <strcat> I'm only really saying "as" because that's what the keyword is called
[22:59:15] <brson> Still though, we should probably move ahead with purging std::io
[22:59:16] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[22:59:17] <bjz> dbaupp: hehe
[22:59:37] <brson> So we can port whatever extension methods are strictly required to make the port work
[22:59:47] <brson> then start replacing uses of std::io with std::rt::io
[22:59:49] <miza> is there an alternative to set a step to range withou range_step?
[22:59:58] <strcat> miza: no, not yet
[23:00:04] <olsonjeffery> brson: yes, i gathered that re: faith in the rt::io design .. how do we get to that point in confidence? call for shakedown test in the community?
[23:00:28] <olsonjeffery> the community knows the new API is there.. but not really a lot of discussion around validating the API design..
[23:00:46] <dbaupp> strcat: whatever, I'm not so bothered, it just seems that "casting to" is nicer than "casting as"
[23:02:09] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[23:02:34] <brson> I'm not sure. Good design requires concerted effort and refinement over a long time, and I haven't been able to dedicate that time. There are a lot of missing bits that still need to be implemented, and some loving person needs to make sure they all fit together well. ChrisMorgan has some experience using rt::io and I know has some issues with it.
[23:03:06] * olsonjeffery nods
[23:03:15] <bjz> dbaupp brson: I haven't heard much about ~fn:() is that something that I can count on to stay?
[23:03:33] <brson> bjz: no, the plan is still to remove it
[23:03:57] <engla> that's removing ~fn altogether, you mean?
[23:04:00] <brson> yes
[23:04:11] <ecr> bjz: my understanding is that ~fn and @fn will go away and because macros that create traits. I'm not a fan personally.
[23:04:37] <bjz> brson: https://github.com/bjz/glfw-rs/pull/33
[23:04:47] <brson> olsonjeffery: but we can get rid of std::io, force people to start using rt::io, now, even if it kind of sucks
[23:05:06] <brson> as with all things rust, I'll do it half-assed, and hope somebody else picks up the slack :(
[23:05:15] <olsonjeffery> heh.
[23:05:43] <strcat> brson: it can't be worse than std::io :)
[23:06:14] <ecr> I'm fairly confident that it's not so horrible that I'll need to change my email and hide.
[23:06:33] * strcat wishes snapshots went faster
[23:06:41] <strcat> I'll be sad if valgrind catches something
[23:07:08] <miza> range_step is look to me now broken, i hope to has a fix soon :/
[23:07:11] <brson> so then we'll move std::rt::io to std::io. Probably we need to do some restructuring of the io modules still. I want everything to be implementable in both blocking and non-blocking versions, and have the primary std::io interface simply be a facade over the two, chosen dynamically
[23:07:21] <miza> it expect tha the step is int
[23:07:36] <miza> and i want to have also uint
[23:07:41] <olsonjeffery> brson: ok.. so that implies IoFactory/scheduler work.. ?
[23:07:42] <strcat> miza: the current range_step will be removed
[23:08:01] *** Quits: nkoep (nik@moz-45A70240.pool.mediaways.net) (Client exited)
[23:08:03] <miza> i dont know how to right with this implementation
[23:08:08] <miza> a simple for loop
[23:08:16] <olsonjeffery> that is, RtioFoo would be where we split between backing impls..
[23:08:22] <olsonjeffery> blocking/non-blocking
[23:08:22] <miza> with a big uint number
[23:08:29] <ecr> brson: as in thread blocking?
[23:08:36] <strcat> I had to add the overflow checked arithmetic before I could write a proper generic range_step
[23:08:39] <olsonjeffery> ecr: as in direct calls in the c stdlib
[23:08:45] <olsonjeffery> TcpStream backed by platform sockets
[23:08:45] <brson> olsonjeffery: no I don't think so. the blocking version can be indepentent of the IoFactory and the event loop abstraction layer (though it could also be an alternate implementation of that layer - tough choice)
[23:08:49] <brson> ecr: yes
[23:08:51] <ecr> ah ok. didn't know we had that
[23:08:55] <brson> we don't yet!
[23:09:05] <brson> but lots of people want to do I/O but don't want to use tasks
[23:09:36] <ecr> ah, right. all the bare metal folks
[23:09:39] <olsonjeffery> i think this dovetails which initial longterm questions about breaking the runtime/TLS/etc out from std
[23:09:39] <strcat> what we need most of all is a posix_spawn binding so people stop hitting OOM from fork ;P
[23:09:41] <dbaupp> rusti: do std::int::range_step(0, 10, 2) |i| { print!("{} ", i); true }
[23:09:42] -rusti- 0 2 4 6 8 true
[23:09:53] <dbaupp> miza: ^ ?
[23:09:58] *** Quits: brendan (brendaneic@F689B55.D90C1611.426D2C95.IP) (Quit: brendan)
[23:10:01] *** Joins: ChrisMorgan (chris@moz-F0B57727.its.monash.edu.au)
[23:10:08] <olsonjeffery> speak of the devil
[23:10:09] <miza> dbaupp no i dont want something like this
[23:10:12] <pnkfelix> miza: ‚Ä¶ you want the step to be larger than the most positive int ?
[23:10:23] <miza> i try to implement a sieve atking algorith
[23:10:38] <miza> and maybe i have a real big step
[23:10:40] <pnkfelix> miza: That does not sound like an iteration that is going to last for very long ‚Ä¶ unless you're using big nums
[23:10:44] <miza> so i need this to be uint
[23:11:36] <dbaupp> miza: let mut i = 0; while i < limit { ... ; i += step; }
[23:11:55] <miza> dbaupt i ll do something like this
[23:12:05] <miza> but looks ugly to me
[23:12:09] <brson> olsonjeffery: my current belief is that there are too many interdependencies to remove rt from std, and that the language semantics pretty much require some sort of local state to be more than minimally useful
[23:12:21] <dbaupp> miza: note that the interation will last for either 0 or 1 steps with a number that's larger than the maximum int, since that's half the maximum uint
[23:12:35] <dbaupp> (at least half)
[23:12:49] <strcat> int::max_value * 2 is 1 less than the uint max value
[23:13:50] <dbaupp> miza: also, `uint + (int as uint)` is exactly* the same as `uint + uint` (*may not be true on all platforms), so you can just use range_step with an int step
[23:14:12] <dbaupp> hm, actually that's not true; range_step changes behaviour based on < / > 0
[23:14:16] *** Joins: brendan (brendaneic@F689B55.D90C1611.426D2C95.IP)
[23:14:26] <joelteon> a =* b (*may not equal b)
[23:14:39] *** Joins: ChrisMorgan1 (chris@moz-80C478D2.its.monash.edu.au)
[23:14:52] <miza> i ll do with while for now
[23:15:02] *** Quits: ChrisMorgan (chris@moz-F0B57727.its.monash.edu.au) (Ping timeout)
[23:15:31] <miza> maybe i ll refactor it when we have a new implementation for range step, that at least behaves like range
[23:16:30] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[23:18:12] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[23:19:03] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[23:19:24] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[23:20:42] *** Quits: brendan (brendaneic@F689B55.D90C1611.426D2C95.IP) (Quit: brendan)
[23:20:47] *** jorendorff_away is now known as jorendorff
[23:20:50] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[23:20:50] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14c307f8e to 146c13b0f: 02http://git.io/N3iJvQ
[23:20:50] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[23:20:52] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[23:20:52] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/Sp0xVw
[23:20:52] <ghrust> 13rust/06auto 1483e19d2 15Felix S. Klock II: Added explicit pub to several conditions.  Enables completion of #6009.
[23:20:52] <ghrust> 13rust/06auto 146fbb64a 15Felix S. Klock II: Make non-pub condition! expand to non-pub mod.  Fix #6009.
[23:20:52] <ghrust> 13rust/06auto 14c326ff0 15Felix S. Klock II: Another followup on #6009....
[23:20:54] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[23:21:04] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[23:22:30] <brson> olsonjeffery: Your FileInfo looks good to me
[23:23:30] <brson> olsonjeffery: I still don't understand the desire to implement FileInfo for every type file related though, but I'll try to
[23:24:14] <bjz> strcat: interesting: http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3572.html
[23:26:13] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[23:26:31] <bjz> strcat: the insanity is insane. o_o
[23:28:07] *** Quits: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP) (Ping timeout)
[23:28:27] <olsonjeffery> brson: so just to parrot my understanding back to yo i would imagine that we have a scheduler-backed impl and a "platform"-impl of everything in rt::io
[23:28:29] *** Joins: brendan (brendaneic@F689B55.D90C1611.426D2C95.IP)
[23:31:14] *** Joins: jstevans (Instantbir@87E9DD84.EEDD3B02.DDE5D3F6.IP)
[23:31:14] *** Quits: jstevans1 (Instantbir@87E9DD84.EEDD3B02.DDE5D3F6.IP) (Connection reset by peer)
[23:31:18] <brson> olsonjeffery: yes
[23:32:01] <olsonjeffery> brson: re: FileInfo as a trait on PathLike, etc .. .let's put that aside; not a major issue
[23:32:07] <olsonjeffery> im fine w/ keeping it a struct, more or less
[23:32:49] <olsonjeffery> that being said.. i really do feel like, given our type system richness, vis-a-vis c#, we can do a lot better in terms of modelling file interactions
[23:33:36] <olsonjeffery> keep free functions for non-fd related stuff, perhaps. im not really keen on slavish OO-isms just for the sake of it <-- that's hyperbolic, i know. but you get my drift.
[23:34:16] *** Joins: jstevans1 (Instantbir@moz-9331A678.bootp.virginia.edu)
[23:34:17] *** Quits: brendan (brendaneic@F689B55.D90C1611.426D2C95.IP) (Quit: brendan)
[23:34:36] *** Quits: jstevans (Instantbir@87E9DD84.EEDD3B02.DDE5D3F6.IP) (Connection reset by peer)
[23:34:58] <MrByte> With recursive macros, is there any concept of of a "everything else" fragment specifier?  I want to do a macro of semi-colon separated items, but the items can differ slightly in form from each other.  Having a pattern for each possible form and every possible form that can follows feels a bit unwieldy.
[23:35:10] *** Joins: jstevans (Instantbir@87E9DD84.EEDD3B02.DDE5D3F6.IP)
[23:35:19] <olsonjeffery> brson: re: scheduler-impl of rt::io vs platform-backed.. that would imply, to me, an abstraction that sits between rt::io types and what is now the borrows of RtioIoFactory that occur there
[23:35:34] <olsonjeffery> with an impl for "the generic scheduler" and one for platform-backed impls
[23:35:48] <olsonjeffery> the goal being to have the former be something that can be used in zero.rs ..
[23:35:55] *** Joins: jstevans2 (Instantbir@moz-9331A678.bootp.virginia.edu)
[23:35:55] <olsonjeffery> s/former/latter/
[23:35:56] *** Quits: jstevans1 (Instantbir@moz-9331A678.bootp.virginia.edu) (Ping timeout)
[23:36:48] *** Quits: wilkie (wilkie@moz-CEF5E490.pitbpa.fios.verizon.net) (Ping timeout)
[23:36:50] *** Quits: jstevans (Instantbir@87E9DD84.EEDD3B02.DDE5D3F6.IP) (Ping timeout)
[23:37:11] <ecr> I wonder how much of the scheduler we could divorce from libuv and hide the rest behind trait boundaries like we do with IO
[23:37:42] <olsonjeffery> ecr: my understanding is that IoFactory and EventLoop are it..
[23:37:57] <olsonjeffery> maybe pull the thread-creation out of Scheduler, as needed (im not super familiar with its impl..)
[23:38:00] <olsonjeffery> ?
[23:38:37] *** Quits: jstevans2 (Instantbir@moz-9331A678.bootp.virginia.edu) (Ping timeout)
[23:38:37] <ecr> I really haven't looked at it. I'm not sure if it would actually help in the that effort anyway.
[23:38:40] <brson> the scheduler only knows about the abstract EventLoop
[23:38:50] *** Joins: jstevans (Instantbir@958F6D44.A9DA0237.DDE5D3F6.IP)
[23:38:50] <ecr> Oh, alright then.
[23:39:00] <olsonjeffery> but it still does thread management which is a platform concern, right?
[23:39:02] <brson> it's intended to be backable by UI event loops and stuff
[23:39:18] <brson> the scheduler itself does nothing with threads
[23:39:24] *** Joins: brendan (brendaneic@F689B55.D90C1611.426D2C95.IP)
[23:39:27] <brson> though creating threads is part of setting up a group of schedulers
[23:39:46] <brson> it's pretty minimal though
[23:41:24] <Lovot_> How would I check if a file exists?
[23:42:36] <brson> olsonjeffery: yes, another abstraction layer, though rtio could be reused for that purpose. I think that's what acrichto wanted to do with std::run. I originally just wanted to make the facade contain a bunch of enums representing either the blocking or non-blocking versions, but that would be a mess if one ever wanted to compile out the libuv versions. Just reusing the Rtio traits may be smartest
[23:43:00] * olsonjeffery nods
[23:43:19] <olsonjeffery> but the Rtio traits come from something besides an IoFactory borrow from TLS...
[23:43:23] <acrichto> brson: oh I was thinking of having "enum Process { NativeHandle(...), UvHandle(...) }", but that's not the direction we should go?
[23:43:57] <brson> acrichto: you mean like `NativeHandle, RtioHandle` I assume?
[23:44:07] <acrichto> yeah
[23:44:09] <brson> uv is always buried
[23:44:14] <acrichto> oh, good point
[23:44:14] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[23:44:17] <ecr> I would say using traits is better since we can extend it easier.
[23:44:43] <acrichto> brson: so you were thinking "type Process = ~rt::RtioProcess" ?
[23:44:47] <acrichto> or some rough equivalent
[23:44:48] <ecr> Since we'd be primarily adding variants instead of functions.
[23:44:56] <dbaupp> Lovot_: os::file_exists or something like
[23:44:58] * dbaupp checks
[23:45:36] <olsonjeffery> {Uv, NSPR, Gtk, ...} <- IoFactory Impls <- ??? <- user-facing code
[23:45:45] <brson> acrichto: no, like in rt::net, Process is it's own type that usus RtioProcess through composition. The rtio traits tend to do error handling differently and are allowed to have awkward, unstable interfaces
[23:45:46] <olsonjeffery> platform-backed impl(s) <- ??? <- user-facing code
[23:45:49] <dbaupp> Lovot_: std::os::path_exists
[23:45:55] <olsonjeffery> so the ??? is the branch we currently lack..
[23:45:56] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[23:46:02] <brson> acrichto: but then RtioProcess is implemented vio both uv and the native calls
[23:46:07] <olsonjeffery> </stating-the-obvious>
[23:46:44] <acrichto> brson: cool, I shall use rt::net as guidance then. Sadly it'll be awhile before I get back around to it. Hopefully can upgrade libuv tonight though!
[23:46:52] <Lovot_> dbaupp: Thanks, I needed that
[23:47:04] <olsonjeffery> acrichto: i might do pipes on my own, time permitting
[23:47:16] <olsonjeffery> or harvest it from 8645, more likely..
[23:47:20] *** Joins: SingingBoyo (brandon@4DF3381A.51F4D838.4F048BDC.IP)
[23:47:21] *** Quits: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[23:47:25] <acrichto> olsonjeffery: cool, the only thing which I would need out of it for processes is to acquire the underlying *uv_pipe_t somehow
[23:47:26] <olsonjeffery> in which case, maybe you can do it as part of your libuv upgrade?
[23:47:43] <acrichto> I think this time around I want to isolate the upgrade from as much as possible
[23:47:48] <brson> olsonjeffery: if we used rtio as the abstraction layer then the native implementations would need to be retrieved a different way. maybe there would be a NativeIoFactory that you could just construct instead of pulling it out of the scheduler
[23:48:40] <olsonjeffery> brson: i guess it comes down to where/how we want to branch. is it a user-decision via a code path? is it a compile flag?
[23:48:42] *** Quits: jwilm (Mibbit@moz-E101D73A.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:49:24] <olsonjeffery> make all constructors for IO types take a enum IoBackingImpl { Platform, Scheduler } value ?
[23:49:34] <olsonjeffery> different methods for everything?
[23:49:36] <brson> olsonjeffery: oh that's a good point. if it was just a matter of pulling it out of the IoFactory then the user doesn't have any control over which implementation they get, without also exposing the IoFactory
[23:49:45] <olsonjeffery> everything in rt::io (FileStream, etc) become trait objects?
[23:49:50] <olsonjeffery> and we have different free functions?
[23:50:03] <olsonjeffery> file::open_platform, open_non_blocking, etc
[23:50:07] *** Quits: jdsanders (Adium@moz-84CB7548.hlrn.qwest.net) (Quit: Leaving.)
[23:50:11] <miza> i did a compare at sieve atkin algorith with the same implementation at rust and go
[23:50:24] *** Joins: jdsanders (Adium@moz-84CB7548.hlrn.qwest.net)
[23:50:29] <miza> and the result is desapointed :/
[23:50:33] <strcat> brson: snapshot failed due to being valgrind unclean :(
[23:50:40] <strcat> brson: http://buildbot.rust-lang.org/builders/snap3-linux/builds/509/steps/test/logs/stdio
[23:50:43] <dbaupp> miza: code?
[23:50:45] <olsonjeffery> brson: lots of directions to go, with this..
[23:51:06] <miza> the go implementation
[23:51:07] <miza> https://github.com/Agis-/gofool/blob/master/atkin.go
[23:51:28] <strcat> brson: seems that it occurs for almost every binary
[23:51:30] <miza> rust implementation
[23:51:31] <miza> https://github.com/Zorbash/linguaphone/blob/master/rust/sieve_atkin.rs
[23:51:37] *** Joins: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP)
[23:51:42] <miza> is almost the same
[23:52:11] <dbaupp> miza: you were compiling with `rustc -O` ?
[23:52:16] <miza> it could have some improvments, but the compare is in same implementation
[23:52:25] <brson> strcat: that's a pretty bizarre error
[23:52:26] <miza> rust build
[23:52:36] <cmr> miza: use rustc -O
[23:52:40] <cmr> You're not building with optimizatinos.
[23:52:44] <cmr> *optimizations
[23:52:51] <joelteon> heh
[23:52:53] <strcat> brson: an atexit handler maybe?
[23:52:56] <joelteon> the lesser known cousin of latinos
[23:53:00] <strcat> brson: maybe from libuv
[23:53:09] * strcat shrugs
[23:53:15] *** Joins: matt444 (matthew@moz-CFC97445.wi.res.rr.com)
[23:53:26] <strcat> we'll see if it happens on OS X too
[23:53:30] <matt444> Hello, I was wondering if rust had the functional function `apply` ?
[23:54:05] <dbaupp> matt444: you mean apply(f, args...) ? no, variable length args are pretty complicated in a language like Rust
[23:54:09] *** Quits: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP) (Ping timeout)
[23:54:21] <matt444> hm, ok
[23:54:22] <strcat> doesn't exist in haskell either
[23:54:27] <matt444> oh
[23:54:29] <matt444> didn't know that
[23:54:39] <dbaupp> strcat: it does
[23:54:48] <dbaupp> <3 typeclasses
[23:54:57] <matt444> seems like the compiler could catch that, but maybe not
[23:54:58] <miza> cmr: omg far away from the build version
[23:55:04] <miza> vuild version 12sec
[23:55:08] <ecr> well Haskell has Applicative which provides <*> which is basically an iterated apply thing
[23:55:16] <miza> rustc -O
[23:55:19] <miza> 0.2 sec
[23:55:21] <miza> :p
[23:55:25] <ecr> you can chain it as much as you need to
[23:55:31] <cmr> Yes, optimizations are useful.
[23:55:39] <dbaupp> strcat: `printf "%d %f\n" 1 2.0` is valid haskell.
[23:55:46] <ecr> Rust can't copy Applicative at the moment because we don't have higher-kinded types
[23:55:50] <miza> cmr: thanks
[23:55:52] <olsonjeffery> brson: anyways.. do you have an issue with me sketching out a more linear-type'ish approach to FileStream/FileInfo ... i know this is the most bikeshed'ish, but i would like to just get it right and move on to bigger-fish in need of frying (like std::io)
[23:55:57] <matt444> higher-kinded?
[23:56:01] <kmc> <*> is pretty different
[23:56:05] <kmc> Haskell only has one-argument functions, anyway
[23:56:06] <miza> i was disapointed for a minute :p
[23:56:06] <olsonjeffery> or should i just leave as-is?
[23:56:17] <cmr> miza: try also comparing to gccgo
[23:56:20] <kmc> <*> just sort of lifts the nice syntax for applying multiple curried functions into another context
[23:56:21] <ecr> <*> is the same as Monad's `ap`. what are you thinking of?
[23:56:25] <cmr> afaik 6g doesn't optimize
[23:56:26] <miza> i ll try it
[23:56:33] <brson> olsonjeffery: i don't have a problem with that
[23:56:36] <olsonjeffery> i would exercise restraint (i can do FileInfo impl on FileStream w/o having the filestream carry around a Path, for example)
[23:56:40] <ecr> matt444: a type is higher kinded if it takes other types as parameters.
[23:56:46] <kmc> sure but I wouldn't say that either <*> or ap has much to do with, say, Scheme's apply
[23:56:51] <dbaupp> matt444: we can't express that Option or ~[] take a generic "argument"
[23:56:57] *** Joins: echristo (echristo@60A74940.D6CCE4AE.77834EAA.IP)
[23:57:03] <matt444> i see
[23:57:11] <matt444> thanks
[23:57:25] <ecr> Scheme's apply is just 'pass this list of stuff as args to the function' right?
[23:57:35] <matt444> yep
[23:57:46] <ecr> hm, I think we could do that in a macro
[23:57:49] <ecr> maybe? not sure
[23:57:56] <ecr> probably...
[23:58:02] <strcat> dbaupp: isn't that just returning a new fn?
[23:58:07] * strcat shrugs
[23:58:20] *** Quits: jstevans (Instantbir@958F6D44.A9DA0237.DDE5D3F6.IP) (Ping timeout)
[23:58:28] <ecr> apply!($func:ident, $($arg:ident)*)  maybe?
[23:58:41] <strcat> in C++ you can express it as a variadic template
[23:58:42] <ecr> that sounds plausible
[23:59:23] <kmc> ecr: doesn't that just match the normal function application syntax, effectively?
[23:59:24] <matt444> that would be great
[23:59:34] <ecr> have a macro apply!(f, [x1, x2, x3]) that creates f(x1, x2, x3)
[23:59:35] <dbaupp> strcat: I guess?
[23:59:50] <kmc> it's not very useful unless the vector is allowed to be something other than a vector literal
[23:59:56] <kmc> which it won't be, with a macro implementation
