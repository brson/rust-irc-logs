[00:01:07] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[00:01:07] <ghrust> 01[13rust01] 15luqmana 04force-pushed 06try from 1409c31dc to 1415b7e22: 02http://git.io/k471pw
[00:01:07] <ghrust> 13rust/06try 14b4414d0 15Luqman Aden: Fix up mingw64 target.
[00:01:07] <ghrust> 13rust/06try 1415b7e22 15Luqman Aden: mk: Get rid of redundant LIBUV_FLAGS.
[00:01:08] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[00:01:38] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[00:01:38] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1429bbc6c to 14fb279aa: 02http://git.io/N3iJvQ
[00:01:38] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[00:01:45] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[00:01:45] <ghrust> 01[13rust01] 15bors pushed 12 new commits to 06auto: 02http://git.io/n6KRWw
[00:01:45] <ghrust> 13rust/06auto 14465dd4b 15Patrick Walton: test: Remove most uses of `&fn()` from the tests.
[00:01:45] <ghrust> 13rust/06auto 14f935861 15Patrick Walton: librustc: Remove remaining uses of `&fn()` in favor of `||`.
[00:01:46] <ghrust> 13rust/06auto 1492c95f9 15Patrick Walton: libsyntax: Remove the old-style borrowed closure type syntax from the...
[00:01:48] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[00:02:12] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[00:03:52] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[00:03:52] *** ChanServ sets mode: +qo brson brson
[00:08:16] *** Joins: jdm (jdm@moz-ED0C7AC7.hinet-ip.hinet.net)
[00:09:58] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[00:11:34] *** Quits: bjz (bjz@1009100.A27A8065.D3BA2C17.IP) (Ping timeout)
[00:16:27] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[00:16:27] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/yVvsYA
[00:16:27] <ghrust> 13rust/06auto 141889df6 15Alex Crichton: Remove linked failure from the runtime...
[00:16:27] <ghrust> 13rust/06auto 149838e64 15bors: auto merge of #10603 : alexcrichton/rust/no-linked-failure, r=brson...
[00:16:27] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[00:18:48] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[00:18:48] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[00:19:14] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[00:24:54] *** Quits: mark_edward (AndChat806@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Ping timeout)
[00:25:38] *** Joins: mark_edward (AndChat806@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[00:32:38] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[00:42:35] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[00:45:03] *** Joins: tikue_ (tkuehn@moz-DB51A23.pitbpa.fios.verizon.net)
[00:47:01] *** Joins: dcrewi (david@moz-AB8667CE.gyrae.net)
[00:50:02] *** Quits: mark_edward (AndChat806@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Ping timeout)
[00:53:42] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[01:02:31] *** Quits: tikue_ (tkuehn@moz-DB51A23.pitbpa.fios.verizon.net) (Quit: tikue_)
[01:06:01] <brson> i'm definitely not going to get android automation up tonight
[01:06:11] <brson> working on configuring the aws image right now
[01:06:23] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[01:06:24] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 149838e64 to 14fb279aa: 02http://git.io/N3iJvQ
[01:06:24] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[01:06:28] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[01:06:28] <ghrust> 01[13rust01] 15bors pushed 12 new commits to 06auto: 02http://git.io/F5P9RA
[01:06:28] <ghrust> 13rust/06auto 1437107f4 15Patrick Walton: test: Remove most uses of `&fn()` from the tests.
[01:06:28] <ghrust> 13rust/06auto 14518bdee 15Patrick Walton: librustc: Remove remaining uses of `&fn()` in favor of `||`.
[01:06:28] <ghrust> 13rust/06auto 14d847933 15Patrick Walton: libsyntax: Remove the old-style borrowed closure type syntax from the...
[01:06:30] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[01:07:01] <brson> mac bots going down for the night in 50 minutes!
[01:08:22] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Quit: Sharp)
[01:08:59] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[01:09:04] <Luqman> acrichto: so the try build for https://github.com/mozilla/rust/pull/10578 succeed. how did you want to proceed with this?
[01:09:05] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:09:53] <acrichto> Luqman: but unwinding does not work on win64?
[01:10:04] <acrichto> and neither does a ./configure make cycle build a usable snapshot?
[01:10:49] <Luqman> so klutzy managed to get something working https://github.com/mozilla/rust/issues/8996#issuecomment-29057155
[01:11:21] *** Joins: tikue_ (tkuehn@moz-DB51A23.pitbpa.fios.verizon.net)
[01:11:35] <acrichto> where did rust-stage0 come from?
[01:12:06] <Luqman> one of the existing mingw ones afaik
[01:12:20] <acrichto> hm, so to me this patch looks like "it all should land anyway" except for the sjlj business
[01:12:46] <acrichto> makefile changes all look good to me, along with the bugfix you found in rustc
[01:13:06] <acrichto> it's a known bug though that sjlj doesn't work even if wired up on windows
[01:13:07] <Luqman> so the reason for that is that llvm makes calls to _Unwind_Resume http://llvm.org/docs/ExceptionHandling.html#throw-filters
[01:13:10] *** Joins: mark_edward (AndChat806@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[01:13:42] <Luqman> but with sjlj the name of the function is different http://stackoverflow.com/a/17968530
[01:13:53] <acrichto> but we're compiling code that doesn't work
[01:14:35] <acrichto> I agree that sjlj is a thing and it's wired up, but it's not running any rust destructos
[01:14:57] <Luqman> well it's a step forward since right now it just won't compile at all
[01:15:39] <acrichto> but it doesn't really seem like it is because you can't rely on the generated binaries
[01:17:22] <acrichto> Luqman: hm, well running at all is better than not running, r+
[01:21:06] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[01:21:30] <acrichto> brson: the static linking patch is at the point that it passes try on {linux,mac,bsd}, and I think I just found the fix for windows, were you waiting on me to change something?
[01:22:18] *** Quits: tikue_ (tkuehn@moz-DB51A23.pitbpa.fios.verizon.net) (Quit: tikue_)
[01:26:32] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[01:26:32] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14366e58b to 14fb279aa: 02http://git.io/N3iJvQ
[01:26:32] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[01:26:40] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[01:26:40] <ghrust> 01[13rust01] 15bors pushed 1 new commit to 06auto: 02http://git.io/Uf_OjQ
[01:26:40] <ghrust> 13rust/06auto 14242c56a 15bors: auto merge of #10578 : luqmana/rust/mingw64, r=alexcrichton...
[01:26:40] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[01:29:23] *** Joins: tikue_ (tkuehn@moz-DB51A23.pitbpa.fios.verizon.net)
[01:29:28] <brson> acrichto: how stable has the runtime been lately?
[01:29:55] <acrichto> brson: there's a problem in testing where sometimes we read the first 64-ish bytes of a subprocess, and then tests fail due to a pattern not being found
[01:30:08] <acrichto> brson: I have never been able to reproduce. That's the only problem I know of at least
[01:31:34] <brson> acrichto: oh is that what just happened on your pr?
[01:32:19] <acrichto> brson: that's what happened the first time on http://buildbot.rust-lang.org/builders/auto-linux-64-nopt-t/builds/1691/steps/test/logs/stdio
[01:32:28] <acrichto> the second time was legit, I never re-ran the bench tests
[01:34:59] <brson> 25 minutes to go
[01:36:26] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[01:36:26] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14242c56a to 14fb279aa: 02http://git.io/N3iJvQ
[01:36:26] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[01:36:34] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[01:36:34] <ghrust> 01[13rust01] 15bors pushed 12 new commits to 06auto: 02http://git.io/D-MNPg
[01:36:34] <ghrust> 13rust/06auto 1437107f4 15Patrick Walton: test: Remove most uses of `&fn()` from the tests.
[01:36:34] <ghrust> 13rust/06auto 14518bdee 15Patrick Walton: librustc: Remove remaining uses of `&fn()` in favor of `||`.
[01:36:34] <ghrust> 13rust/06auto 14d847933 15Patrick Walton: libsyntax: Remove the old-style borrowed closure type syntax from the...
[01:36:36] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[01:37:44] <acrichto> brson: so I wrote a dumb chan/port that's still a little racy based on the queue I showed you earlier today
[01:37:52] <acrichto> brson: we're 2x faster than go, but we use like 3-4x more memory
[01:38:32] <acrichto> brson: but some of that memory is misleading b/c hello world for rust shows up as 3MB for me, and hello world for go is 640k
[01:40:39] <brson> acrichto: that's encouraging!
[01:41:20] <acrichto> brson: I was thinking about the native case, and if futex were everywhere I think it would be perfect but it turns out that futex is only on linux
[01:41:31] <acrichto> I think for the native case we're going to have to resort to a mutex/cond var
[01:41:42] <acrichto> which we can lazily allocate via using unstable::mutex
[01:41:57] <brson> acrichto: what would you do differently with a futex? linux pthread mutexes are implemented with futexes
[01:42:18] <acrichto> I think we could use futex to wake up threads that are not blocking on the scheduler
[01:42:55] <acrichto> so a thread in the native world would block in recv() via futex
[01:43:08] <acrichto> and a thread in the runtime world would still block with the scheduler
[01:43:35] <acrichto> waking up the native world would involve modifying a memory location and calling futex I think, while waking up a thread in the runtime world would mean firing on a sched handle
[01:44:59] <brson> i'm not sure if using futexes directly is more efficient than mutex+condvar, but i'd be curious to know
[01:45:09] <acrichto> that's a good point actually
[01:45:21] <acrichto> I fear I am pre-optimizing way too much
[01:45:39] <acrichto> btw our memory usage was super high because the queues have an infinite cache of nodes
[01:45:48] <acrichto> I added code to put a cap on the cache but it's still a little racy
[01:46:54] <brson> acrichto: how does it perform without the cache?
[01:47:10] <acrichto> brson: I haven't been able to get stable numbers yet
[01:47:17] <acrichto> it keeps segfaulting when I do it for real
[01:47:33] <brson> i wonder what the best policy is here. we're going to need caching in other places in the scheduler too and i'm worried about picking arbitrary constants
[01:47:53] <acrichto> I was hoping to benchmark a few and see what's reasonable
[01:48:04] <acrichto> In theory channels aren't really ever all that full
[01:48:23] <acrichto> but you should also be able to tweak the channel yourself
[01:48:54] <acrichto> I also like the idea of making this single consumer single producer queue a nice first-class type in stdlib
[01:49:11] <acrichto> in addition to the other queues we're using in the runtime
[01:49:15] <acrichto> (although they need polishing first)
[01:49:28] *** Joins: bjz (bjz@1009100.A27A8065.D3BA2C17.IP)
[01:49:49] <brson> i have to shut down the mac bots now
[01:49:50] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[01:49:57] * acrichto sheds a single tear
[01:52:52] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:53:26] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[01:56:07] *** Quits: bjz (bjz@1009100.A27A8065.D3BA2C17.IP) (Ping timeout)
[01:56:27] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[01:56:27] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/_eqwWA
[01:56:27] <ghrust> 13rust/06auto 146820ed4 15Luqman Aden: Fix up mingw64 target.
[01:56:27] <ghrust> 13rust/06auto 14a2c111a 15Luqman Aden: mk: Get rid of redundant LIBUV_FLAGS.
[01:56:28] <ghrust> 13rust/06auto 140499a92 15bors: auto merge of #10578 : luqmana/rust/mingw64, r=alexcrichton...
[01:56:30] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[01:57:11] <Luqman> shouldn't bors be turned off if the mac bots are not up?
[01:58:04] *** Quits: jdm (jdm@moz-ED0C7AC7.hinet-ip.hinet.net) (Quit: Lost terminal)
[02:01:13] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[02:03:49] *** Quits: hack (chatzilla@moz-611CC244.rev.onenet.an) (Ping timeout)
[02:06:46] *** Joins: ktt3ja (Mibbit@moz-D69B60E4.hsd1.va.comcast.net)
[02:09:56] *** Quits: SiegeLord (sl@moz-1DF56822.twcny.res.rr.com) (Connection timed out)
[02:10:20] *** Joins: SiegeLord (sl@moz-1DF56822.twcny.res.rr.com)
[02:21:23] *** Quits: SiegeLord (sl@moz-1DF56822.twcny.res.rr.com) (Quit: Leaving)
[02:22:49] <Luqman> acrichto: so i removed the sjlj since it seems like the android build doesn't like it.
[02:23:10] <Luqman> also put back the -Werror but made it not be passed to libuv
[02:23:13] <acrichto> Luqman: but doesn't it not build on windows if it doesn't work?
[02:23:23] <acrichto> if it's not ther*
[02:23:47] <Luqman> acrichto: well if you use the sjlj exception model.
[02:23:59] <Luqman> we've been using dwarf afaik
[02:24:22] <acrichto> but I thought you said it didn't compile on windows b/c windows doesn't have _Unwind_Resume
[02:24:48] <Luqman> well, it depends on how your toolchain is built
[02:25:07] <Luqman> the one provided by the debian repo i was using uses sjlj
[02:25:18] <Luqman> but thus far we've been using dwarf
[02:25:34] <Luqman> there's also seh but no clue whether it works
[02:25:37] <acrichto> I don't know if we have to configure llvm differently to emit sjlj stuff
[02:27:43] <Luqman> hmmm, googling around it seems like llvm doesn't support sjlj exceptions 
[02:28:19] <Luqman> so i guess it means we need to use dwarf on 32bit windows and seh on 64bit
[02:28:36] <Luqman> but i don't know if llvm supports seh on 64bit either
[02:29:07] <acrichto> llvm looked like it had things named sjlj
[02:29:16] <Luqman> for arm only it seems
[02:29:17] <acrichto> but I don't claim to be an expert on this at all
[02:32:08] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[02:32:54] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[02:36:13] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[02:38:30] <Luqman> acrichto: so it looks like for 32bit the options are: seh (native), sjlj & dwarf. gcc/llvm don't want to implement seh due to patent concerns. LLVM doesn't seem to support sjlj on windows. Dwarf works but it means not integrating with any exceptions thrown by other libraries which use the native model
[02:40:20] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[02:40:29] <Luqman> on 64bit, there's: sjlj, seh (not the same as 32bit): again llvm doesn't support sjlj. there seems to be work towards supporting seh in llvm. (3 out of 5 patchs have supposedly been commited https://github.com/ldc-developers/ldc/issues/166 )
[02:52:37] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[02:55:01] <acrichto> Luqman: and there's no support for dwarf on 64bit?
[03:06:12] <Luqman> acrichto: no, it just isn't designed to work on 64bit
[03:06:50] <acrichto> so it sounds like exceptions don't work at all on 64bit windows?
[03:08:26] <Luqman> well gcc supports sjlj & seh on 64bit
[03:08:58] <Luqman> llvm though doesn't support sjlj on windows and an unclear level of support for seh as far as i can tell
[03:09:03] <acrichto> hmm...
[03:09:27] <acrichto> I wonder if we could compile .s files with gcc
[03:09:32] <acrichto> I don't think that'd work though
[03:11:06] <Luqman> no, since you need llvm to cooperate
[03:12:27] <acrichto> this sounds... unfortunate
[03:12:50] <acrichto> as in we cannot compile for 64bit windows at all until LLVM supports some form of exception handling mechanism
[03:13:17] <Luqman> well we can, just won't have proper unwinding support
[03:15:40] <Luqman> http://llvm.org/docs/doxygen/html/Win64EH_8h.html
[03:16:37] <acrichto> looks promising
[03:27:52] *** Joins: kimundi_ (kimundi@moz-A6DB8B95.dip0.t-ipconnect.de)
[03:28:59] *** Quits: kimundi (kimundi@moz-647B2DEA.dip0.t-ipconnect.de) (Ping timeout)
[03:29:00] *** kimundi_ is now known as kimundi
[03:29:50] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[03:35:54] <vadimcn> Luqman: as far as I know, Win32 SEH does not provide stack unwinding
[03:36:39] *** Joins: vadimcn_ (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[03:36:50] *** kimundi is now known as zz_kimundi
[03:37:11] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Client exited)
[03:37:11] *** Quits: vadimcn_ (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Client exited)
[03:37:31] <Luqman> vadimcn: well it's a moot point since seh on 32bit patent protected and hence not implmented by either gcc or llvm
[03:37:48] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[03:38:47] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Connection reset by peer)
[03:39:02] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[03:40:28] <vadimcn> Luqman: I've seen this claim many times, but I can't figure out what it means, because Win32 SEH just does not do stack unwinding.
[03:40:58] <vadimcn> Luqman: It allows you to register a handler, but how it unwinds the stack is unspecified.
[03:43:52] *** zz_kimundi is now known as kimundi
[03:46:00] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Quit: Leaving...)
[03:52:26] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[04:19:37] *** Quits: ktt3ja (Mibbit@moz-D69B60E4.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:19:52] *** Quits: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au) (Ping timeout)
[04:20:25] *** Joins: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au)
[04:47:34] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[04:49:08] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[05:16:05] *** Joins: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net)
[05:19:00] *** Quits: tikue_ (tkuehn@moz-DB51A23.pitbpa.fios.verizon.net) (Quit: tikue_)
[05:28:35] *** Joins: tikue_ (tkuehn@moz-DB51A23.pitbpa.fios.verizon.net)
[05:35:22] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[05:37:58] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Quit: Sharp)
[05:52:02] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[05:54:13] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[05:59:49] *** Quits: tikue_ (tkuehn@moz-DB51A23.pitbpa.fios.verizon.net) (Quit: tikue_)
[06:01:48] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[06:13:31] *** Quits: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu) (Ping timeout)
[06:25:30] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[06:26:08] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[06:34:09] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[06:37:16] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[06:43:02] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[06:51:03] <cmr> http://colinm.org/language_checklist.html
[06:51:07] <cmr> Rust does well on this ;p
[07:06:25] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[07:06:25] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 140499a92 to 14fb279aa: 02http://git.io/N3iJvQ
[07:06:25] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[07:06:32] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[07:06:32] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/g0BnvA
[07:06:32] <ghrust> 13rust/06auto 1409af9d4 15Corey Richardson: Add ctype-likes to Ascii
[07:06:32] <ghrust> 13rust/06auto 146cbc57c 15bors: auto merge of #10611 : cmr/rust/ascii_flesh, r=pcwalton...
[07:06:32] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[07:08:56] <cmr> Uhh, aren't the mac builders down?
[07:10:43] *** Quits: doomlord_ (servitor@moz-4625DF14.range86-184.btcentralplus.com) (Ping timeout)
[07:25:17] <acrichto> mozilla's mtv office lost power for the night
[07:25:23] <acrichto> brson's gonna bring them back online tomorrow
[07:25:30] <cmr> ah
[07:25:33] <cmr> was this on purpose?
[07:25:40] <cmr> Also my comment was more about "why is bors running" than anything
[07:25:46] <acrichto> yeah, the building is doing some stuff apparently
[07:39:54] <cmr> vadimcn: klutzy: Luqman: So apparently there's a #windev channel that is very knowledgable about all things Windows
[07:40:46] <klutzy> wow. thanks! :D
[07:42:49] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[07:44:06] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[07:44:46] <TimAbraldes> cmr: okey dokey :)
[08:06:15] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[08:17:47] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[08:20:01] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[08:37:56] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[08:37:56] *** ChanServ sets mode: +o pnkfelix
[08:43:07] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[08:51:35] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[08:52:54] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[08:55:06] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[08:56:53] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[09:06:17] <acrichto> wheee channels working seamlessly across the runtime/native boundary
[09:08:16] <cmr> acrichto: would it be possible to have a port/chan using pipes, for transparent IPC?
[09:08:21] * cmr thinks that'd be usper interesting
[09:09:03] <acrichto> if we want to be performant, we need to avoid syscalls
[09:09:10] <acrichto> I can imagine a flavor of pipes which does that though
[09:09:14] <acrichto> b/c that'd be amazing
[09:09:14] <cmr> Although I think most uses of ports and chans would need to either be generic or use trait objects for that to work seamlessly
[09:09:26] <cmr> Well yes, obviously if you're not doing IPC you wouldn't use them :P
[09:09:39] <acrichto> we discussed that though
[09:09:53] <acrichto> select() over channels and I/O would be super easy
[09:10:03] <acrichto> it's just that everything else would be terrible
[09:10:31] <acrichto> and we're *still* better than go!
[09:11:14] <acrichto> anyway, I need sleep now
[09:11:15] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[09:11:15] *** ChanServ sets mode: +ao pcwalton pcwalton
[09:11:48] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Client exited)
[09:12:53] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[09:20:51] *** Joins: leaper (Mibbit@4742843F.3AABCBEA.520CDC98.IP)
[09:30:31] *** Quits: Kxepal (Miranda@moz-68A931EE.pppoe.mtu-net.ru) (Ping timeout)
[09:33:55] *** Joins: Kxepal (Miranda@moz-77167FE1.pppoe.mtu-net.ru)
[09:37:18] <Luqman> klutzy: wait, were you running into the CC vs CXX on windows?
[09:37:41] <Luqman> also nice catch!
[09:38:18] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[09:40:21] <klutzy> Luqman: I was investigating broken unwinding only on `../configure --build=...`
[09:41:24] <klutzy> then I found 1) since CFG_BUILD was CFG_BUILD_TRIPLE yesterday, it got cross-build setting
[09:41:51] <klutzy> 2) then rustc got --linker=i686-w64-mingw32-gcc.exe which caused the issue
[09:43:04] <Luqman> oh right, you were getting that flag which should only apply when cross compiling since it was checking CFG_BUILD_TRIPLE and not not CFG_BUILD right?
[09:43:30] <klutzy> yep
[09:47:03] <Luqman> sweet, i also got rustc working with mingw64
[09:48:25] <klutzy> I don't know if CC -> CXX affects unwinding on cross-build-on-linux, but it is at least harmless I think :)
[09:50:23] <Luqman> i think it should be g++
[09:50:35] <cmr> it should be, yes.
[09:50:45] <Luqman> we use g++ for windows in back::link too
[09:51:17] <klutzy> right
[09:52:22] <klutzy> well, currently gcc/g++ issue occurs only on cross setting since 1) is fixed
[09:52:31] <Luqman> yep
[09:52:49] <Luqman> and i've pushed a fix for the cross case
[09:53:18] <klutzy> looks great!
[09:53:22] <Luqman> yay! check-fast passed
[09:54:32] <Luqman> so now we need brson or acrichto or someone to transition the windows bots to mingw64 instead
[09:55:23] <klutzy> Luqman: I think LLVM_OPTS = "$LLVM_OPTS --disable-pthreads" is also needed, but not totally sure
[09:56:11] <cmr> Luqman: any bench numbers go up?
[09:56:30] <klutzy> llvm checks whether -lpthread works or not, but on mingw64 it works slowly
[09:56:37] <Luqman> cmr: what can i compare them to?
[09:56:44] <cmr> Luqman: mingw?
[09:57:06] <Luqman> klutzy: well, we originally needed pthreads in llvm for rusti
[09:57:36] <Luqman> cmr: right, but that means i need to build mingw :P
[09:57:49] <cmr> Luqman: oh, I assumed you had an old build lying around
[09:58:11] <Luqman> well i guess i do..., but a much much older build
[09:58:16] <Luqman> like months old
[09:58:21] <cmr> what aobut the snapshot?
[09:58:45] <Luqman> is there a stage0 bench target?
[09:59:05] <cmr> no, but you can build libstd with --test --cfg stage0
[10:00:34] *** Joins: bjz (bjz@1009100.A27A8065.D3BA2C17.IP)
[10:01:38] *** Quits: leaper (Mibbit@4742843F.3AABCBEA.520CDC98.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:03:26] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[10:03:38] <klutzy> ah we need some way to differentiate mingw and mingw64 during configure.
[10:03:56] <klutzy> currently it uses `uname -a` but it relies on msys
[10:04:20] <klutzy> and since mingw-w64 doesn't provide own msys, I've used one that mingw provides
[10:05:27] <Luqman> can't we do it based on target?
[10:05:35] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Ping timeout)
[10:05:36] <Luqman> pc-mingw32 vs w64-mingw32
[10:06:41] <klutzy> of gcc?
[10:06:56] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[10:07:15] <Luqman> no i mean the target triple passed to configure
[10:08:09] <klutzy> currently I pass --build=i686-w64-mingw32 flag manually
[10:08:10] <Luqman> or do you mean the default chosen in configure:275 ?
[10:08:35] <klutzy> yep, the default one I meant
[10:09:02] <Luqman> right, so i think we should just default to mingw64 and if someone wants mingw32 they need to manually pass the --build flag themselves
[10:11:04] <klutzy> it's simple, but I'm worried by bug reports due to missing flag :p
[10:12:04] <Luqman> well really i'm of the opinion we should only officially support mingw64 going forward :P
[10:13:02] *** Quits: bjz (bjz@1009100.A27A8065.D3BA2C17.IP) (Ping timeout)
[10:13:18] <klutzy> hmm, on second thought there are already reports due to bad mingw/msys setting, so it would be ok :p
[10:14:08] <klutzy> I also agree that we should drop mingw support officially
[10:15:45] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[10:29:52] <Luqman> ok, confirmed that this failure is not mingw64 specific
[10:42:04] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[11:20:44] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[11:21:33] *** Quits: Kxepal (Miranda@moz-77167FE1.pppoe.mtu-net.ru) (Quit: Kxepal)
[11:21:47] *** Joins: Kxepal (Miranda@moz-77167FE1.pppoe.mtu-net.ru)
[11:24:30] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[11:29:08] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[11:38:11] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[11:38:27] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[11:41:50] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[11:46:11] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[11:48:25] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[11:49:04] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[12:16:52] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[12:30:57] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[12:33:09] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[12:33:42] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[12:42:07] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[12:56:55] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[12:57:13] *** Joins: jdm (jdm@883B1788.FA8F8F63.51315CC9.IP)
[12:59:24] *** Quits: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au) (Quit: ChatZilla 0.9.90.1 [Firefox 26.0/20131118212339])
[13:00:40] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[13:01:09] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[13:02:04] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Connection reset by peer)
[13:02:13] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[13:17:08] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[13:17:08] <cmr> strcat: ping
[13:17:12] <strcat> pong
[13:17:33] <cmr> is there a way to mark a section as *not* eligible for gc, with --gc-sections?
[13:17:39] <cmr> (it's gc'ing metadata, which is bad)
[13:17:40] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[13:17:42] <strcat> llvm.used
[13:17:46] <strcat> I guess
[13:19:26] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[13:21:21] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[13:21:25] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:27:35] *** Joins: bjz (bjz@1009100.A27A8065.D3BA2C17.IP)
[13:27:39] <cmr> strcat: metadata already is llvm.used :(
[13:28:40] <strcat> need a KEEP section I guess
[13:28:59] <strcat> I'm sure the 4 bytes gc-sections is able to remove aren't really going to matter though ;p
[13:29:15] <cmr> hm?
[13:33:01] *** Quits: bjz (bjz@1009100.A27A8065.D3BA2C17.IP) (Ping timeout)
[13:43:07] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[13:44:18] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[13:48:14] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[14:01:16] *** Joins: doomlord_ (servitor@moz-4625DF14.range86-184.btcentralplus.com)
[14:16:09] <cmr> strcat: r? https://github.com/mozilla/rust/pull/10620
[14:22:01] *** kimundi is now known as zz_kimundi
[14:26:42] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[14:38:17] *** Joins: hack (chatzilla@moz-611CC244.rev.onenet.an)
[14:46:13] <cmr> strcat: updated
[14:47:10] <strcat> cmr: hm, perhaps it should only optimize if optimizations are enabled though
[14:47:33] <cmr> strcat: are there any visible effects of this? I thought it just did things with the hash table.
[14:47:41] <strcat> cmr: yeah but it takes time
[14:47:51] <strcat> so maybe -O should only be at -O2 and above
[14:48:14] <strcat> it will probably be an insignificant amount of time right now
[14:48:18] <strcat> but eventually it might not be
[14:49:29] <strcat> cmr: anyway not too worried about it
[14:49:49] <cmr> strcat: it's a trivial change if you think it matters
[14:53:35] <strcat> cmr: yeah I think you should do it
[14:53:42] <strcat> enable if optimization is > Less
[14:53:44] <strcat> so not at 0 and 1
[15:08:19] <cmr> strcat: re-r?
[15:11:01] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[15:14:00] <strcat> cmr: we could run --gc-sections there when building_library is false
[15:15:42] <strcat> cmr: anyway lets not
[15:15:50] <strcat> cmr: because we don't have a way to mark sections as used
[15:15:52] * strcat shrugs
[15:16:01] <strcat> can figure it out later
[15:18:18] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[15:20:16] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[15:28:03] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[15:36:24] *** Quits: hack (chatzilla@moz-611CC244.rev.onenet.an) (Ping timeout)
[15:54:24] *** Quits: jdm (jdm@883B1788.FA8F8F63.51315CC9.IP) (Ping timeout)
[15:54:55] *** Joins: jdm (jdm@883B1788.FA8F8F63.51315CC9.IP)
[16:01:18] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[16:11:36] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[16:12:08] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[16:13:56] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[16:22:33] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[16:38:02] *** zz_kimundi is now known as kimundi
[16:39:23] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[16:40:02] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[16:42:28] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[16:42:28] *** ChanServ sets mode: +o pnkfelix
[16:43:11] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[16:48:45] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[16:49:48] *** Quits: jdm (jdm@883B1788.FA8F8F63.51315CC9.IP) (Ping timeout)
[16:49:54] *** Joins: jdm (jdm@883B1788.FA8F8F63.51315CC9.IP)
[17:21:32] *** kimundi is now known as zz_kimundi
[17:23:38] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[17:26:28] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[17:26:28] *** ChanServ sets mode: +o pnkfelix
[17:26:32] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Client exited)
[17:37:32] <klutzy> wrong span on transmute is annoying.. I can't figure out what is wrong
[17:38:28] <klutzy> so I fixed rustc to print just the item who called the intrinsics
[17:38:37] <klutzy> then it printed pub fn transmute<T,U>(e: T) -> U;
[17:38:56] <klutzy> so I figured out I need the function who called transmute, not the transmute itself
[17:39:03] <klutzy> now the problem becomes harder!
[17:39:46] <cmr> Heh
[18:01:22] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[18:02:01] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[18:04:15] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[18:16:52] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[18:17:48] *** zz_kimundi is now known as kimundi
[18:19:37] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[18:22:14] *** lbergstrom is now known as larsberg
[18:28:40] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[18:29:10] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[18:31:00] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[18:33:29] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[18:33:29] <ghrust> 01[13rust01] 15alexcrichton 04force-pushed 06try from 1415b7e22 to 14e0d0d51: 02http://git.io/k471pw
[18:33:29] <ghrust> 13rust/06try 140e7da7b 15Alex Crichton: Add generation of static libraries to rustc...
[18:33:29] <ghrust> 13rust/06try 1495e3586 15Alex Crichton: Statically link librustrt to libstd...
[18:33:30] <ghrust> 13rust/06try 142cc2afd 15Alex Crichton: Add a new run-make test directory...
[18:33:32] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[18:37:32] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[19:10:59] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[19:11:17] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[19:14:30] *** Quits: blank_name (blank_name@FAB53C88.7071B2C8.31EC03F3.IP) (Ping timeout)
[19:14:53] *** Joins: blank_name (blank_name@FAB53C88.7071B2C8.31EC03F3.IP)
[19:14:54] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Input/output error)
[19:15:11] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[19:15:11] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[19:18:21] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[19:30:31] *** Joins: jeffdb_ (jeff@moz-ED35AD97.hsd1.ca.comcast.net)
[19:32:12] *** Quits: jeffdb_ (jeff@moz-ED35AD97.hsd1.ca.comcast.net) (Quit: jeffdb_)
[19:32:17] *** Joins: jeffdb_ (jeff@moz-ED35AD97.hsd1.ca.comcast.net)
[19:38:33] *** Joins: tikue_ (tkuehn@moz-DB51A23.pitbpa.fios.verizon.net)
[19:48:54] *** Quits: tikue_ (tkuehn@moz-DB51A23.pitbpa.fios.verizon.net) (Quit: tikue_)
[19:49:31] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[19:49:31] <ghrust> 01[13rust01] 15alexcrichton pushed 1 new commit to 06try: 02http://git.io/_FzMTw
[19:49:31] <ghrust> 13rust/06try 14c9c9b5b 15Alex Crichton: fixes
[19:49:31] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[19:53:39] *** Quits: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[19:54:09] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[19:54:38] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[19:56:31] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[20:13:11] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:26:28] *** Joins: ktt3ja (Mibbit@moz-D69B60E4.hsd1.va.comcast.net)
[20:40:41] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:40:57] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[20:42:30] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[20:45:38] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:48:29] *** Joins: _eddyb_ (eddy@336E3A7F.D51DAF03.FB866788.IP)
[20:52:33] <klutzy> ah, just got what caused transmute error
[20:52:53] <klutzy> was like let val: u32 = cast::transmute(0);
[20:53:41] <klutzy> I was unware of that 0 is coerced to uint in the case
[20:57:34] *** _eddyb_ is now known as eddyb
[20:58:00] *** Joins: bjz (bjz@1009100.A27A8065.D3BA2C17.IP)
[20:58:14] <ktt3ja> @acrichto: is this a false positive? http://pastebin.com/8T8T3MRS
[20:59:32] <cmr> ktt3ja: certainly.
[21:00:08] <cmr> ktt3ja: those are pub fns, and the private "delegated" module's contents are reexported on line 24
[21:03:08] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[21:06:42] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[21:12:28] *** Quits: jdm (jdm@883B1788.FA8F8F63.51315CC9.IP) (Quit: Lost terminal)
[21:12:30] <ktt3ja> cmr: so I would be able to use them with `use std::f32;  fn main() { f32::powi(1, 2); }`?
[21:17:31] <ktt3ja> f32::powi(1f32, 2 as c_int); *
[21:19:20] <eddyb> ^ is not actually defined for floats, right?
[21:19:38] <eddyb> rusti: 0f32 ^ 1f32
[21:19:39] -rusti- <anon>:9:9: 9:20 error: binary operation ^ cannot be applied to type `f32`
[21:19:39] -rusti- <anon>:9          0f32 ^ 1f32
[21:19:39] -rusti-                   ^~~~~~~~~~~
[21:19:39] -rusti- error: aborting due to previous error
[21:19:39] -rusti- application terminated with error code 101
[21:20:07] <eddyb> but I don't think you can impl BitXor for builtin types
[21:29:51] <cmr> rusti: std::num::f32::powi(1f32, 2 as std::libc::c_int)
[21:29:53] -rusti- pastebinned 11 lines of output: http://sprunge.us/JaZb
[21:30:02] <cmr> rusti: std::f32::powi(1f32, 2 as std::libc::c_int)
[21:30:03] -rusti- <anon>:9:9: 9:23 error: unresolved name `std::f32::powi`.
[21:30:03] -rusti- <anon>:9          std::f32::powi(1f32, 2 as std::libc::c_int)
[21:30:03] -rusti-                   ^~~~~~~~~~~~~~
[21:30:03] -rusti- error: aborting due to previous error
[21:30:04] -rusti- application terminated with error code 101
[21:30:13] * cmr has no idea what it was like in 0.8
[21:30:16] <cmr> ktt3ja: but yes
[21:30:36] <ktt3ja> I'm no longer using 0.8
[21:30:41] <ktt3ja> using rust nightly now
[21:30:45] <eddyb> rusti: ::std::f32::powi(1f32, 2 as std::libc::c_int)
[21:30:46] <cmr> neither am I, but rusti is
[21:30:46] -rusti- <anon>:9:9: 9:25 error: unresolved name `std::f32::powi`.
[21:30:46] -rusti- <anon>:9          ::std::f32::powi(1f32, 2 as std::libc::c_int)
[21:30:46] -rusti-                   ^~~~~~~~~~~~~~~~
[21:30:46] -rusti- error: aborting due to previous error
[21:30:46] -rusti- application terminated with error code 101
[21:30:55] <ktt3ja> oh
[21:30:56] <eddyb> it was probably all in std::float
[21:30:59] <cmr> rusti: version
[21:31:00] -rusti- "rustc 0.8"
[21:31:55] <ktt3ja> I tried it on my comp, but it didn't work, either
[21:43:06] <sfackler> cmr: re-r? https://github.com/mozilla/rust/pull/10514
[21:44:02] <cmr> sfackler: "Fixes for for rebase"?
[21:44:12] <cmr> Mind squashing that in somewhere?
[21:44:52] <sfackler> sure
[21:45:21] <sfackler> eon
[21:45:23] <sfackler> *done
[21:49:02] <eddyb> I just amend and force push :P
[21:55:15] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[21:56:18] <sfackler> i like to keep the fixes separate for at least the initial review since otherwise people have no way of knowing what the changes are
[21:57:04] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[21:57:28] <cmr> yes, I appreciate that very much :)
[22:10:23] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:15:21] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:15:54] *** Quits: bjz (bjz@1009100.A27A8065.D3BA2C17.IP) (Ping timeout)
[22:21:11] *** Joins: bjz (bjz@1009100.A27A8065.D3BA2C17.IP)
[22:51:41] <sfackler> bors looks wedged. are the mac servers still down?
[22:51:54] <Luqman> yep
[22:57:02] *** Quits: bjz (bjz@1009100.A27A8065.D3BA2C17.IP) (Ping timeout)
[23:22:18] <dbaupp> https://github.com/mozilla/rust/pull/10625 (running tests now)
[23:23:56] <dbaupp> err, r?^
[23:29:35] <ktt3ja> if I have `struct Foo; impl Foo { fn foo(); }`, is there a way to get the id of `Foo` from `foo`?
[23:29:48] <cmr> ktt3ja: so, the struct given the method?
[23:30:06] <ktt3ja> cmr: yea
[23:30:11] <eddyb> ktt3ja: Foo is 'static
[23:30:19] <cmr> eddyb: eh?
[23:30:21] <dbaupp> eddyb: huh?
[23:30:29] <eddyb> am I wrong?
[23:30:35] <ktt3ja> static method
[23:30:41] <cmr> Associated function.
[23:30:50] <eddyb> then what id is he talking about?
[23:30:51] <ktt3ja> is that what it's called?
[23:30:58] <dbaupp> eddyb: AST NodeID
[23:31:01] <dbaupp> *NodeId
[23:31:04] <eddyb> >_>
[23:31:07] * eddyb looks away
[23:31:16] <cmr> ktt3ja: yep!
[23:31:37] <dbaupp> cmr: only you call it that :P
[23:31:38] <eddyb> all I can think of is mmap and bytes and gigs
[23:31:39] <strcat> ktt3ja: in librustc or libsyntax
[23:31:53] <cmr> dbaupp: It's what they are! :P
[23:32:07] <strcat> in librustc it's just method.container
[23:32:19] <strcat> gets you trait/impl
[23:32:56] <eddyb> any way to get the number of nodes or some stat like that?
[23:33:21] <eddyb> I'm seeing something like 16M in dataflow :(
[23:33:39] <dbaupp> eddyb: the driver::session object has a @mut uint parameter that stores the maximum NodeId, iirc
[23:33:55] <dbaupp> erm, driver::sessions::Session_
[23:34:11] <eddyb> dbaupp: thanks, I guess I just have to print it. but do I want to compile librustc at this late hour? eeeeeeh
[23:35:16] <dbaupp> eddyb: break in gdb?
[23:35:26] <eddyb> I don't dare
[23:35:32] <dbaupp> it'll be fun
[23:35:46] <eddyb> I already handle mmap and mremap
[23:35:49] <ktt3ja> strcat: there doesn't seem to be a `container` field: https://github.com/mozilla/rust/blob/master/src/libsyntax/ast.rs#L940-L952
[23:36:11] <strcat> ktt3ja: well that's why I asked librustc or libsyntax
[23:36:15] <strcat> ty::Method has that field
[23:36:51] <strcat> dunno how you'd do it in libsyntax
[23:36:55] <eddyb> I'm pretty sure the weird characters would mess up the breakpoint command
[23:37:03] <dbaupp> eddyb: break on `phase_6_link_method` (or the mangled name, whatever) and print *sess.node_id
[23:37:21] <dbaupp> hm, without debuginfo there won't be locals
[23:37:23] <dbaupp> ignore me
[23:37:25] <dbaupp> :P
[23:37:26] <eddyb> lol
[23:37:42] <eddyb> I so want lldb support. and lldb
[23:37:58] <eddyb> imagine {:?} but in a debugger
[23:43:48] *** Joins: bjz (bjz@1009100.A27A8065.D3BA2C17.IP)
[23:56:22] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[23:56:38] <ktt3ja> strcat: hmm, but it still only gets me an Impl
[23:57:03] <ktt3ja> unless there's a map from Impl's id to its struct
[23:58:14] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[23:58:53] <dbaupp> ktt3ja: there should be a map via the impl Ty
