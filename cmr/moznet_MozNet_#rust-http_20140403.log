[06:20:38] *** Quits: ChrisMorgan (chris@moz-8DCBEA52.vic.adsl.internode.on.net) (Ping timeout)
[06:52:02] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Connection reset by peer)
[06:52:15] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[11:17:04] *** Joins: whitglint (uid15486@moz-31ABA2C0.irccloud.com)
[11:30:13] <whitglint> cmr: Hi
[11:32:29] <whitglint> cmr: I read the source code https://github.com/chris-morgan/rust-http/blob/master/src/http/server/mod.rs
[11:33:54] <whitglint> When accepted a connection, it spawn task
[11:37:08] <whitglint> If link with libnative, it will spawn too many kernel thread?
[11:39:45] <huon> linux can handle thousands of kernel threads
[11:40:08] <huon> but you can explicitly run it inside a libgreen scheduler to force it to be on libgreen.
[11:41:00] <huon> specifically the first pool.spawn part of http://static.rust-lang.org/doc/master/green/index.html#using-a-scheduler-pool
[11:47:03] *** Quits: huon (huon@moz-EC676DFE.members.linode.com) (Ping timeout)
[11:47:18] *** Joins: huon (huon@moz-EC676DFE.members.linode.com)
[12:00:14] *** Quits: huon (huon@moz-EC676DFE.members.linode.com) (Quit: ZNC - http://znc.in)
[12:00:22] *** Joins: huon (huon@moz-EC676DFE.members.linode.com)
[12:05:35] *** Parts: huon (huon@moz-EC676DFE.members.linode.com) (Leaving)
[12:05:38] *** Joins: huon (huon@moz-EC676DFE.members.linode.com)
[12:05:38] *** ChanServ sets mode: +v huon
[12:18:54] <whitglint> huon: but each kernel thread allocate 2MB stack?
[12:19:28] <huon> whitglint: so does a libgreen thread
[12:19:38] <huon> (and I think it may possibly be 8MB)
[12:20:26] <huon> note that this is normally just virtual memory, and physical memory is essentially only required for the part of the stack that is used
[12:21:55] <huon> e.g. you can have 1000 threads (80 GB of virtual memory) that only use 16 kilobytes of stack each, which requires on 160MB of physical memory
[12:22:21] <whitglint> I see, thanks
[12:23:09] <whitglint> so which runtime is suitable for rust-http?
[12:23:18] <whitglint> libnative or libgreen?
[12:23:27] <huon> don't know
[12:28:25] <whitglint> http://static.rust-lang.org/doc/master/guide-runtime.html#1:1---using-%3Ccode%3Elibnative%3C/code%3E in this doc, "Less I/O overhead as opposed to M:N in some cases." why?
[12:30:47] <huon> libuv has to do some contortions to get the API it wants
[12:31:19] <huon> but libnative just calls straight into the operating system basically (well, it goes via libc, but mostly just functions that are thin wrappers over syscalls and other basic functions like that)
[12:31:27] <huon> (libgreen uses libuv internally.)
[12:36:55] <whitglint> hmmm... i see
[12:38:03] <huon> you can/should just test to see which one works best for you :)
[12:38:58] <whitglint> i want to develop a restful web app
[12:42:11] <whitglint> maybe... wait for rust 1.0 :D
[21:52:17] *** Quits: whitglint (uid15486@moz-31ABA2C0.irccloud.com) (Quit: Connection closed for inactivity)
[22:16:33] *** Joins: ChrisMorgan (chris@moz-8DCBEA52.vic.adsl.internode.on.net)
[22:16:33] *** ChanServ sets mode: +qo ChrisMorgan ChrisMorgan
[22:26:31] *** Quits: ChrisMorgan (chris@moz-8DCBEA52.vic.adsl.internode.on.net) (Ping timeout)
[22:47:35] *** Joins: ChrisMorgan (chris@moz-8DCBEA52.vic.adsl.internode.on.net)
[22:47:35] *** ChanServ sets mode: +qo ChrisMorgan ChrisMorgan
