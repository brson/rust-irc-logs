[00:04:13] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[00:04:19] *** Quits: dcb (dcb@moz-4hh.6p3.217.74.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[00:06:58] *** Joins: dcb (dcb@moz-4hh.6p3.217.74.IP)
[00:07:49] *** Quits: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net) (Client exited)
[00:09:38] *** chmanchester|afk is now known as chmanchester
[00:16:53] * WindowsBunny mutters about alex not following the indentation style of functions
[00:18:07] *** Joins: yjv (yjv@moz-vh1.8h1.153.50.IP)
[00:19:10] *** Joins: jgallagher (john@moz-6ge.dhn.131.24.IP)
[00:23:31] <arielb1> nmatsakis: notes on my wf-fixes: http://cs.tau.ac.il/~arielb1/doc/wf_notes/index.html
[00:23:47] *** Joins: yjv_ (yjv@moz-vh1.8h1.153.50.IP)
[00:24:19] *** Quits: arielb1 (Ariel@moz-ovd.f7o.66.109.IP) (Connection closed)
[00:24:51] *** Quits: jgallagher (john@moz-6ge.dhn.131.24.IP) (Client exited)
[00:26:05] *** Quits: yjv (yjv@moz-vh1.8h1.153.50.IP) (Ping timeout: 121 seconds)
[00:27:21] *** Quits: brson (brson@moz-u3dg2t.sfo1.mozilla.com) (Ping timeout: 121 seconds)
[00:29:56] *** Joins: yjv (yjv@moz-3b6.8h1.153.50.IP)
[00:31:42] *** Quits: yjv_ (yjv@moz-vh1.8h1.153.50.IP) (Ping timeout: 121 seconds)
[00:32:52] *** Joins: swgillespie (swgillespie@moz-apj.3un.220.167.IP)
[00:34:58] *** Joins: yjv_ (yjv@moz-3b6.8h1.153.50.IP)
[00:36:55] *** Quits: yjv (yjv@moz-3b6.8h1.153.50.IP) (Ping timeout: 121 seconds)
[00:37:44] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[00:40:08] *** chmanchester is now known as chmanchester|afk
[00:40:34] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[00:40:35] *** Joins: yjv (yjv@moz-3b6.8h1.153.50.IP)
[00:40:36] *** Quits: yjv (yjv@moz-3b6.8h1.153.50.IP) (Connection closed)
[00:43:03] *** Quits: yjv_ (yjv@moz-3b6.8h1.153.50.IP) (Ping timeout: 121 seconds)
[01:01:18] *** Quits: swgillespie (swgillespie@moz-apj.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:04:22] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[01:05:51] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Connection closed)
[01:09:00] *** kimundi is now known as zz_kimundi
[01:09:27] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[01:09:27] *** ChanServ sets mode: +ao erickt erickt
[01:14:50] *** Quits: dcb (dcb@moz-4hh.6p3.217.74.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:15:12] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[01:17:27] *** Joins: yjv (yjv@moz-c2t.p4q.153.50.IP)
[01:17:50] *** Quits: yjv (yjv@moz-c2t.p4q.153.50.IP) (Connection closed)
[01:18:05] *** Joins: yjv (yjv@moz-c2t.p4q.153.50.IP)
[01:18:48] *** Quits: nham (nham@moz-lglsfe.il.comcast.net) (Quit: Lost terminal)
[01:20:19] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[01:22:08] *** Quits: yjv (yjv@moz-c2t.p4q.153.50.IP) (Ping timeout: 121 seconds)
[01:22:53] *** Quits: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[01:25:34] *** Joins: dcb (dcb@moz-4hh.6p3.217.74.IP)
[01:26:23] *** Quits: dcb (dcb@moz-4hh.6p3.217.74.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:37:39] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[01:47:36] *** Quits: Sho (sho@moz-l3v.s57.28.5.IP) (Quit: Konversation terminated!)
[01:57:16] *** Joins: Quxxy (chatzilla@moz-efh10q.internode.on.net)
[02:01:11] *** Joins: yjv (yjv@moz-3a7.2iq.153.50.IP)
[02:06:06] *** Joins: yjv_ (yjv@moz-3a7.2iq.153.50.IP)
[02:08:27] <eddyb> bstrie: so I made the mistake of thinking cargo check was going to be easy
[02:08:54] <eddyb> well, it *was* easy but the bits of rustc that needed to be changed were all weird
[02:09:07] <eddyb> and quite specialized to the current setup
[02:09:09] *** Quits: yjv (yjv@moz-3a7.2iq.153.50.IP) (Ping timeout: 121 seconds)
[02:09:47] *** Joins: dcb (dcb@moz-eir6bu.ca.comcast.net)
[02:09:56] <eddyb> it better bloody work *now*
[02:11:36] *** Joins: yjv (yjv@moz-3a7.2iq.153.50.IP)
[02:14:02] *** Quits: yjv_ (yjv@moz-3a7.2iq.153.50.IP) (Ping timeout: 121 seconds)
[02:18:12] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[02:19:10] *** Joins: yjv_ (yjv@moz-3a7.2iq.153.50.IP)
[02:19:36] *** Quits: yjv (yjv@moz-3a7.2iq.153.50.IP) (Ping timeout: 121 seconds)
[02:22:40] *** Joins: yjv (yjv@moz-vsa.hqu.153.50.IP)
[02:24:37] *** Joins: pachuco (Mibbit@moz-hu6.nja.252.72.IP)
[02:25:00] *** Quits: yjv_ (yjv@moz-3a7.2iq.153.50.IP) (Ping timeout: 121 seconds)
[02:28:21] *** Joins: yjv_ (yjv@moz-2a2.tv7.153.50.IP)
[02:28:27] <eddyb> hehehehe
[02:28:33] <eddyb> bstrie: ./x86_64-unknown-linux-gnu/stage1/bin/rustc src/liblibc/lib.rs --extern core=libcore.rlib2 --cfg stage1 -Z time-passes -Z no-trans
[02:28:43] <eddyb> err, not rlib2, just rlib
[02:28:47] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[02:28:53] <eddyb> benh: that libcore.rlib file was built without any codegen
[02:28:58] <eddyb> bstrie: ^^
[02:29:07] <eddyb> (what's wrong with me today)
[02:29:19] <eddyb> now the file is wrong, but that's the last issue AFAICT
[02:30:48] *** Quits: yjv (yjv@moz-vsa.hqu.153.50.IP) (Ping timeout: 121 seconds)
[02:33:43] *** Joins: yjv (yjv@moz-1t1.2iq.153.50.IP)
[02:36:07] *** Quits: yjv_ (yjv@moz-2a2.tv7.153.50.IP) (Ping timeout: 121 seconds)
[02:37:24] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[02:39:16] *** Joins: yjv_ (yjv@moz-2ah.tv7.153.50.IP)
[02:41:46] *** Quits: yjv (yjv@moz-1t1.2iq.153.50.IP) (Ping timeout: 121 seconds)
[02:42:12] <eddyb> error: extern location for core is of an unknown type: libcore.rmeta
[02:42:19] <eddyb> oh come on, these things are hardcoded?
[02:42:25] <eddyb> it's "just" an rlib :/
[02:43:10] <WindowsBunny> acrichto: Just a warning, all dbghelp functions are single threaded
[02:43:21] <WindowsBunny> acrichto: So make sure you synchronize all access with a global mutex
[02:44:43] *** Joins: yjv (yjv@moz-2ah.tv7.153.50.IP)
[02:44:54] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[02:47:12] *** Quits: yjv_ (yjv@moz-2ah.tv7.153.50.IP) (Ping timeout: 121 seconds)
[02:48:42] <eddyb> ./x86_64-unknown-linux-gnu/stage1/bin/rustc src/liblibc/lib.rs --extern core=libcore.rmeta.rlib --cfg stage1 -Z time-passes -Z no-trans
[02:48:47] <eddyb> so this just finished
[02:48:59] <eddyb> it takes 160ms in total
[02:49:42] *** Quits: Murarth (Murarth@moz-jpotpi.phnx.qwest.net) (Quit: Alfador is the Entity!)
[02:49:56] <eddyb> acrichto: now the hard part is writing the cargo check code :D
[02:50:05] *** Joins: Murarth (Murarth@moz-80r.b85.166.46.IP)
[02:50:16] *** Joins: yjv_ (yjv@moz-o0a.hqu.153.50.IP)
[02:50:31] <eddyb> acrichto: all new builds of rlibs would use different rustc invocations to avoid codegen
[02:51:14] *** Quits: ytain_ (ytain@moz-o0gerq.dsl.teksavvy.com) (Quit: Textual IRC Client: www.textualapp.com)
[02:52:44] *** Quits: yjv (yjv@moz-2ah.tv7.153.50.IP) (Ping timeout: 121 seconds)
[02:54:22] *** Quits: zz_kimundi (kimundi@moz-o5192b.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[02:55:34] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[02:55:34] *** Joins: zz_kimundi (kimundi@moz-vprdic.dip0.t-ipconnect.de)
[02:55:35] *** zz_kimundi is now known as kimundi
[02:55:50] *** Joins: yjv (yjv@moz-cj4.02o.153.50.IP)
[02:56:00] *** Quits: dcb (dcb@moz-eir6bu.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[02:56:34] *** Joins: dcb (dcb@moz-eir6bu.ca.comcast.net)
[02:58:19] *** Quits: yjv_ (yjv@moz-o0a.hqu.153.50.IP) (Ping timeout: 121 seconds)
[02:59:22] *** Joins: adu (ajr@moz-0foa9t.md.comcast.net)
[02:59:33] <eddyb> why did we start adding explicit iter calls?
[03:00:19] <eddyb> or was it the other way around
[03:01:15] *** Joins: yjv_ (yjv@moz-j2g.tv7.153.50.IP)
[03:03:58] *** Quits: yjv (yjv@moz-cj4.02o.153.50.IP) (Ping timeout: 121 seconds)
[03:06:47] *** Joins: yjv (yjv@moz-j2g.tv7.153.50.IP)
[03:09:12] *** Quits: yjv_ (yjv@moz-j2g.tv7.153.50.IP) (Ping timeout: 121 seconds)
[03:09:26] *** Joins: jgallagher (john@moz-6ge.dhn.131.24.IP)
[03:09:41] *** Joins: bkoropoff (bkoropoff@moz-kthi5c.wa.comcast.net)
[03:09:49] <bkoropoff> hello hello
[03:11:42] <WindowsBunny> bkoropoff: hello
[03:12:25] *** Quits: Murarth (Murarth@moz-80r.b85.166.46.IP) (Quit: Alfador is the Entity!)
[03:12:27] *** Joins: yjv_ (yjv@moz-95u.hqu.153.50.IP)
[03:12:40] *** Joins: Murarth (Murarth@moz-jpotpi.phnx.qwest.net)
[03:13:02] *** Quits: dcb (dcb@moz-eir6bu.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[03:13:46] *** Quits: yjv (yjv@moz-j2g.tv7.153.50.IP) (Ping timeout: 121 seconds)
[03:18:20] *** Joins: yjv (yjv@moz-e85.2iq.153.50.IP)
[03:20:27] *** Quits: yjv_ (yjv@moz-95u.hqu.153.50.IP) (Ping timeout: 121 seconds)
[03:23:47] *** Joins: yjv_ (yjv@moz-e85.2iq.153.50.IP)
[03:26:13] *** Quits: yjv (yjv@moz-e85.2iq.153.50.IP) (Ping timeout: 121 seconds)
[03:27:36] *** Joins: semarie (semarie@moz-4lmh4m.privacyfoundation.ch)
[03:28:18] <bkoropoff> Is anyone familiar with any literature about persistent hash tables?
[03:29:29] *** Joins: yjv (yjv@moz-62i.02o.153.50.IP)
[03:31:12] <WindowsBunny> I think I found an issue with the unused_qualifications lint
[03:31:47] *** Quits: yjv_ (yjv@moz-e85.2iq.153.50.IP) (Ping timeout: 121 seconds)
[03:31:48] <WindowsBunny> hmmm, it in particular affects #[derive(Clone)] :|
[03:34:15] <WindowsBunny> oh, already has an issue gh19102
[03:34:15] <[o__o]> #[deriving] implementations need #[allow(unused_qualifications)]: https://github.com/rust-lang/rust/issues/19102
[03:34:22] <bkoropoff> Looks like I want a Hash Array Mapped Trie...
[03:34:59] *** Joins: yjv_ (yjv@moz-6iv.02o.153.50.IP)
[03:37:25] *** Quits: yjv (yjv@moz-62i.02o.153.50.IP) (Ping timeout: 121 seconds)
[03:39:19] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[03:39:40] *** Quits: joh (uid13099@moz-2c7ap3.ealing.irccloud.com) (Quit: Connection closed for inactivity)
[03:40:31] *** Joins: yjv (yjv@moz-s1s.02o.153.50.IP)
[03:42:53] *** Quits: yjv_ (yjv@moz-6iv.02o.153.50.IP) (Ping timeout: 121 seconds)
[03:44:07] *** Quits: pachuco (Mibbit@moz-hu6.nja.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:45:30] *** Joins: dcb (dcb@moz-eir6bu.ca.comcast.net)
[03:45:45] *** Quits: jgallagher (john@moz-6ge.dhn.131.24.IP) (Client exited)
[03:46:01] *** Joins: yjv_ (yjv@moz-ahi.2iq.153.50.IP)
[03:48:24] *** Quits: yjv (yjv@moz-s1s.02o.153.50.IP) (Ping timeout: 121 seconds)
[03:51:33] *** Joins: yjv (yjv@moz-6id.tv7.153.50.IP)
[03:53:55] *** Quits: yjv_ (yjv@moz-ahi.2iq.153.50.IP) (Ping timeout: 121 seconds)
[03:56:18] *** Joins: aatch (james@moz-is4j4r.cable.telstraclear.net)
[03:57:02] *** Joins: yjv_ (yjv@moz-pk7.hqu.153.50.IP)
[03:58:51] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Ping timeout: 121 seconds)
[03:59:33] *** Quits: yjv (yjv@moz-6id.tv7.153.50.IP) (Ping timeout: 121 seconds)
[04:00:17] *** Joins: brson (brson@moz-4pq.28j.56.172.IP)
[04:00:17] *** ChanServ sets mode: +o brson
[04:02:32] *** Joins: yjv (yjv@moz-mk9.02o.153.50.IP)
[04:04:58] *** Quits: yjv_ (yjv@moz-pk7.hqu.153.50.IP) (Ping timeout: 121 seconds)
[04:08:05] *** Joins: yjv_ (yjv@moz-p72.02o.153.50.IP)
[04:10:35] *** Quits: yjv (yjv@moz-mk9.02o.153.50.IP) (Ping timeout: 121 seconds)
[04:13:35] *** Joins: yjv (yjv@moz-7vb.2iq.153.50.IP)
[04:15:20] *** Joins: p1start (p1start@moz-nftjhe.org)
[04:16:03] *** Quits: yjv_ (yjv@moz-p72.02o.153.50.IP) (Ping timeout: 121 seconds)
[04:16:09] *** Quits: dcb (dcb@moz-eir6bu.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[04:16:23] *** Quits: adu (ajr@moz-0foa9t.md.comcast.net) (Client exited)
[04:19:06] *** Joins: yjv_ (yjv@moz-7vb.2iq.153.50.IP)
[04:21:31] *** Quits: yjv (yjv@moz-7vb.2iq.153.50.IP) (Ping timeout: 121 seconds)
[04:23:37] *** Quits: Jesin (Jesin@moz-4jre1i.eecs.lehigh.edu) (Quit: Leaving)
[04:24:49] *** Joins: yjv (yjv@moz-8qc.2iq.153.50.IP)
[04:26:03] *** Quits: yjv (yjv@moz-8qc.2iq.153.50.IP) (Connection closed)
[04:27:02] *** Quits: yjv_ (yjv@moz-7vb.2iq.153.50.IP) (Ping timeout: 121 seconds)
[04:28:36] *** Joins: nham (nham@moz-lglsfe.il.comcast.net)
[04:37:39] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[04:37:39] *** ChanServ sets mode: +ao erickt erickt
[04:50:47] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[04:52:37] *** Quits: Rym (uid91135@moz-n2i7qm.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[04:54:01] <nrc> bstrie: the cargo check thing sounds like a really cool idea. How is progress?
[04:56:26] *** Quits: Rusky (russell@moz-per60o.slkc.qwest.net) (Ping timeout: 121 seconds)
[05:12:42] *** Joins: Rusky (russell@moz-foe3s5.slkc.qwest.net)
[05:15:17] *** Joins: yjv (yjv@moz-8sv.tv7.153.50.IP)
[05:20:48] *** Joins: yjv_ (yjv@moz-8sv.tv7.153.50.IP)
[05:23:15] *** Quits: yjv (yjv@moz-8sv.tv7.153.50.IP) (Ping timeout: 121 seconds)
[05:26:23] *** Joins: yjv (yjv@moz-8sv.tv7.153.50.IP)
[05:28:46] *** Quits: yjv_ (yjv@moz-8sv.tv7.153.50.IP) (Ping timeout: 121 seconds)
[05:29:56] *** Quits: bkoropoff (bkoropoff@moz-kthi5c.wa.comcast.net) (Client exited)
[05:30:08] <Manishearth> brson: around?
[05:31:50] *** Joins: yjv_ (yjv@moz-8sv.tv7.153.50.IP)
[05:33:19] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[05:34:18] *** Quits: yjv (yjv@moz-8sv.tv7.153.50.IP) (Ping timeout: 121 seconds)
[05:37:23] *** Joins: yjv (yjv@moz-ssl.hqu.153.50.IP)
[05:39:48] *** Quits: yjv_ (yjv@moz-8sv.tv7.153.50.IP) (Ping timeout: 121 seconds)
[05:42:56] *** Joins: yjv_ (yjv@moz-ssl.hqu.153.50.IP)
[05:45:19] *** Quits: yjv (yjv@moz-ssl.hqu.153.50.IP) (Ping timeout: 121 seconds)
[05:48:58] *** Joins: yjv (yjv@moz-ssl.hqu.153.50.IP)
[05:50:51] *** Quits: yjv_ (yjv@moz-ssl.hqu.153.50.IP) (Ping timeout: 121 seconds)
[05:53:48] *** Quxxy is now known as QuxxyAfk
[05:53:59] *** Joins: yjv_ (yjv@moz-ssl.hqu.153.50.IP)
[05:55:41] *** Joins: oli_obk__ (Mibbit@moz-7bq.0sb.52.141.IP)
[05:56:36] *** Joins: James (quassel@moz-8qs8a3.range86-148.btcentralplus.com)
[05:56:48] *** Quits: yjv (yjv@moz-ssl.hqu.153.50.IP) (Ping timeout: 121 seconds)
[05:59:27] *** Joins: yjv (yjv@moz-ssl.hqu.153.50.IP)
[06:01:56] *** Quits: yjv_ (yjv@moz-ssl.hqu.153.50.IP) (Ping timeout: 121 seconds)
[06:05:00] *** Joins: yjv_ (yjv@moz-ssl.hqu.153.50.IP)
[06:05:57] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[06:07:25] *** Quits: yjv (yjv@moz-ssl.hqu.153.50.IP) (Ping timeout: 121 seconds)
[06:10:31] *** Joins: yjv (yjv@moz-8qc.2iq.153.50.IP)
[06:12:58] *** Quits: yjv_ (yjv@moz-ssl.hqu.153.50.IP) (Ping timeout: 121 seconds)
[06:13:29] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Quit: Leaving)
[06:15:46] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[06:16:14] *** Joins: yjv_ (yjv@moz-8qc.2iq.153.50.IP)
[06:18:33] *** Quits: yjv (yjv@moz-8qc.2iq.153.50.IP) (Ping timeout: 121 seconds)
[06:18:51] *** Joins: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP)
[06:18:54] *** Quits: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP) (Connection closed)
[06:19:07] *** Joins: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP)
[06:19:35] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[06:21:32] *** Joins: yjv (yjv@moz-8qc.2iq.153.50.IP)
[06:24:07] *** Quits: yjv_ (yjv@moz-8qc.2iq.153.50.IP) (Ping timeout: 121 seconds)
[06:24:16] *** Quits: brson (brson@moz-4pq.28j.56.172.IP) (Ping timeout: 121 seconds)
[06:27:04] *** Joins: yjv_ (yjv@moz-8qc.2iq.153.50.IP)
[06:29:27] *** Quits: yjv (yjv@moz-8qc.2iq.153.50.IP) (Ping timeout: 121 seconds)
[06:30:09] *** Quits: aatch (james@moz-is4j4r.cable.telstraclear.net) (Connection closed)
[06:30:52] *** Joins: erz (erz@moz-fiq1tl.broadband.corbina.ru)
[06:31:16] *** Quits: zxq9 (ceverett@moz-qsm369.mesh.ad.jp) (Quit: Konversation terminated!)
[06:32:35] *** Joins: yjv (yjv@moz-8qc.2iq.153.50.IP)
[06:35:03] *** Quits: yjv_ (yjv@moz-8qc.2iq.153.50.IP) (Ping timeout: 121 seconds)
[06:38:03] *** Joins: yjv_ (yjv@moz-8qc.2iq.153.50.IP)
[06:38:12] *** Joins: aatch (james@moz-is4j4r.cable.telstraclear.net)
[06:40:35] *** Quits: yjv (yjv@moz-8qc.2iq.153.50.IP) (Ping timeout: 121 seconds)
[06:43:36] *** Joins: yjv (yjv@moz-jmp.02o.153.50.IP)
[06:45:59] *** Joins: whidgle (Mibbit@moz-hu6.nja.252.72.IP)
[06:46:06] *** Quits: yjv_ (yjv@moz-8qc.2iq.153.50.IP) (Ping timeout: 121 seconds)
[06:49:15] *** Joins: yjv_ (yjv@moz-s1s.02o.153.50.IP)
[06:51:31] *** Quits: yjv (yjv@moz-jmp.02o.153.50.IP) (Ping timeout: 121 seconds)
[06:54:38] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[06:54:46] *** Joins: yjv (yjv@moz-s1s.02o.153.50.IP)
[06:56:21] *** Quits: whidgle (Mibbit@moz-hu6.nja.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:56:38] *** Quits: James (quassel@moz-8qs8a3.range86-148.btcentralplus.com) (Ping timeout: 121 seconds)
[06:57:19] *** Quits: yjv_ (yjv@moz-s1s.02o.153.50.IP) (Ping timeout: 121 seconds)
[06:58:07] *** Joins: zmack (zmack@moz-qdq.e19.24.188.IP)
[07:00:11] *** Joins: yjv_ (yjv@moz-21p.hqu.153.50.IP)
[07:02:35] <aatch> Did something change with the test stuff. I'm not getting stderr output on test failures.
[07:02:44] *** Quits: yjv (yjv@moz-s1s.02o.153.50.IP) (Ping timeout: 121 seconds)
[07:03:22] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[07:04:05] *** QuxxyAfk is now known as QUxxy
[07:04:10] *** QUxxy is now known as Quxxy
[07:05:15] *** Quits: jbomo (dkd@moz-uol4mm.fios.verizon.net) (Ping timeout: 121 seconds)
[07:05:49] *** Joins: yjv (yjv@moz-7br.02o.153.50.IP)
[07:06:59] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[07:08:07] *** Quits: yjv_ (yjv@moz-21p.hqu.153.50.IP) (Ping timeout: 121 seconds)
[07:10:14] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[07:10:45] *** Joins: laumann (thomas@moz-3m6.3kq.109.2.IP)
[07:11:09] *** Joins: yjv_ (yjv@moz-7br.02o.153.50.IP)
[07:13:48] *** Quits: yjv (yjv@moz-7br.02o.153.50.IP) (Ping timeout: 121 seconds)
[07:16:40] *** Joins: yjv (yjv@moz-7br.02o.153.50.IP)
[07:19:07] *** Quits: yjv_ (yjv@moz-7br.02o.153.50.IP) (Ping timeout: 121 seconds)
[07:20:46] *** Quits: yjv (yjv@moz-7br.02o.153.50.IP) (Ping timeout: 121 seconds)
[07:34:57] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:36:32] *** Joins: squiddy (squiddy@moz-md4.pm3.19.178.IP)
[07:42:51] *** Quits: grant (grant@moz-jfh.0nq.187.64.IP) (Client exited)
[07:43:24] *** Joins: doener (doener@moz-eku96m.hsi08.unitymediagroup.de)
[08:06:53] *** Joins: madmalik (uid13697@moz-lfin5p.brockwell.irccloud.com)
[08:07:06] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[08:08:12] *** Quits: aatch (james@moz-is4j4r.cable.telstraclear.net) (Ping timeout: 121 seconds)
[08:14:59] *** Quits: erz (erz@moz-fiq1tl.broadband.corbina.ru) (Quit: My Mac has gone to sleep. ZZZzzz…)
[08:16:02] *** Joins: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se)
[08:17:11] *** Quits: elif (chatzilla@moz-ev8m1p.res.rr.com) (Ping timeout: 121 seconds)
[08:19:09] *** Joins: zxq9 (ceverett@moz-qsm369.mesh.ad.jp)
[08:35:25] *** Joins: erz (erz@moz-fiq1tl.broadband.corbina.ru)
[08:47:10] *** Joins: skeuomorf (skeuomorf@moz-d5k.lok.32.197.IP)
[08:49:15] *** Quits: Yurume (Yurume@moz-0t8.piq.68.115.IP) (Ping timeout: 121 seconds)
[08:49:49] *** Quits: _Vi (vi@moz-bbs.vhj.131.104.IP) (Ping timeout: 121 seconds)
[08:49:58] *** Quits: klutzy (not@moz-0t8.piq.68.115.IP) (Ping timeout: 121 seconds)
[08:55:06] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[08:55:37] *** Quits: nham (nham@moz-lglsfe.il.comcast.net) (Quit: leaving)
[08:57:50] *** Joins: Yurume (Yurume@moz-0t8.piq.68.115.IP)
[09:05:58] *** Joins: joh (uid13099@moz-2c7ap3.ealing.irccloud.com)
[09:17:14] *** Joins: klutzy (not@moz-0t8.piq.68.115.IP)
[09:24:58] *** Quits: zmack (zmack@moz-qdq.e19.24.188.IP) (Connection closed)
[09:26:33] *** Quits: Kingsquee (kingsley@moz-3fm07c.bchsia.telus.net) (Quit: Konversation terminated!)
[09:27:04] *** Quits: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com) (Ping timeout: 121 seconds)
[09:29:20] *** Joins: zmack (zmack@moz-qdq.e19.24.188.IP)
[09:30:00] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[09:35:04] *** Quits: zmack (zmack@moz-qdq.e19.24.188.IP) (Connection closed)
[09:37:17] *** Joins: zmack (zmack@moz-qdq.e19.24.188.IP)
[09:46:57] *** Joins: vmx (vmx@moz-mmstme.pools.vodafone-ip.de)
[09:49:17] *** Joins: eerie (eerie@moz-qld.8t4.67.109.IP)
[10:08:59] *** Quits: klutzy (not@moz-0t8.piq.68.115.IP) (Ping timeout: 121 seconds)
[10:09:41] *** Quits: Yurume (Yurume@moz-0t8.piq.68.115.IP) (Ping timeout: 121 seconds)
[10:17:24] *** Joins: Yurume (Yurume@moz-0t8.piq.68.115.IP)
[10:17:46] *** Joins: _Vi (vi@moz-bbs.vhj.131.104.IP)
[10:19:21] *** Joins: eerie_ (eerie@moz-qld.8t4.67.109.IP)
[10:20:34] *** Quits: eerie_ (eerie@moz-qld.8t4.67.109.IP) (Connection closed)
[10:22:11] *** Joins: eerie_ (eerie@moz-qld.8t4.67.109.IP)
[10:22:19] *** Quits: eerie (eerie@moz-qld.8t4.67.109.IP) (Ping timeout: 121 seconds)
[10:24:38] *** Quits: eerie_ (eerie@moz-qld.8t4.67.109.IP) (Connection closed)
[10:25:29] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[10:36:02] *** Joins: mukilan (mukilan@moz-5ke.d4s.164.122.IP)
[10:36:19] *** Joins: klutzy (not@moz-0t8.piq.68.115.IP)
[10:56:25] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[10:57:40] *** Quits: zmack (zmack@moz-qdq.e19.24.188.IP) (Connection closed)
[10:58:27] *** Joins: zmack (zmack@moz-qdq.e19.24.188.IP)
[10:59:36] *** Quits: zmack (zmack@moz-qdq.e19.24.188.IP) (Connection closed)
[11:02:37] *** Joins: zmack (zmack@moz-qdq.e19.24.188.IP)
[11:03:06] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[11:03:10] *** Joins: arielb1 (Ariel@moz-7ip.m8n.66.109.IP)
[11:04:00] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[11:15:40] *** Quits: jincreator (Thunderbird@moz-d7i.i1g.195.175.IP) (Client exited)
[11:19:59] *** Quits: arielb1 (Ariel@moz-7ip.m8n.66.109.IP) (Ping timeout: 121 seconds)
[11:20:20] *** Joins: arielb1 (Ariel@moz-7ip.m8n.66.109.IP)
[11:29:18] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[11:33:03] *** Joins: Sho (sho@moz-doej59.cust.telecolumbus.net)
[11:35:02] *** Joins: ytain (ytain@moz-o0gerq.dsl.teksavvy.com)
[11:39:45] *** Quits: zmack (zmack@moz-qdq.e19.24.188.IP) (Connection closed)
[11:40:06] *** Joins: zmack (zmack@moz-qdq.e19.24.188.IP)
[11:44:08] *** Quits: zmack (zmack@moz-qdq.e19.24.188.IP) (Ping timeout: 121 seconds)
[11:44:55] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[11:47:42] *** Joins: zmack (zmack@moz-qdq.e19.24.188.IP)
[11:53:33] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[12:01:53] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[12:08:32] *** Joins: eerie (eerie@moz-clf3jc.red.bezeqint.net)
[12:24:31] <nmatsakis> arielb1: I'll take a look; I'm also writing up an RFC that touches on these topics, I'm hoping to get a draft ready today, I'll send to you, it's kind of hard to communicate this over IRC
[12:30:42] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[12:31:31] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[12:35:28] <pnkfelix> Terminology/convention Q: The word "slice" is used to denote `&[T]` ; do we have a similar word for just `[T]` on its own?
[12:36:15] <Mutabah> pnkfelix: I think "borrowed slice" is becoming the term for &[T]
[12:36:23] <cmr> pnkfelix: I've seen `[T]` referred to as a slice, as an array, and as an unsized array.
[12:36:28] <Mutabah> pnkfelix: with "slice" meaning [T] (or any pointer to one)
[12:36:36] <cmr> I personally prefer array, with [T; n] being a fixed-size array.
[12:37:37] <pnkfelix> hmm, okay.  Maybe I'll used "unsized array" since that seems 100% unambiguous, but point out the other potential conventions for [T], especially "slice"
[12:38:02] <cmr> slice is my least favorite for [T] since the length bit that is super important lies outside of that type.
[12:38:11] <Mutabah> Yeah...
[12:38:20] <Mutabah> unsized array sounds best
[12:38:47] <nmatsakis> pnkfelix: I believe `[T]` is slice
[12:39:01] <nmatsakis> and [T;n] is array
[12:39:08] <nmatsakis> or at least that's what strcat convinced me was best some time ago ;)
[12:39:14] <nmatsakis> but I agree it's not 100% obvious
[12:40:21] <Mutabah> in the docs, the "slice" page covers 'impl<T> [T]'... not sure where that originated
[12:40:21] <pnkfelix> nmatsakis: the docs for https://doc.rust-lang.org/std/primitive.slice.html were what led me to think that "slice" denotes `&[T]` (and "mutable slice" denotes `&mut [T]`)
[12:41:00] <nmatsakis> pnkfelix: well, I think "mutable slice" is really short for "mutably borrowed slice"
[12:41:13] <nmatsakis> and "slice" is short for "borrowed slice"
[12:41:14] <nmatsakis> in those docs
[12:41:16] <nmatsakis> but yeah 
[12:41:26] <nmatsakis> I guess the docs don't quite agree with me
[12:41:40] <nmatsakis> or at least, they are quite.. sloppy
[12:41:43] <pnkfelix> I would think that using "slice" to mean `&[T]` and potentially also `&mut [T]` if not otherwise stated would be best if we care about consistency with Go terminology and/or Go programmers mental models.
[12:41:46] <nmatsakis> e.g. Slices are either mutable or shared. 
[12:42:03] <nmatsakis> I mean, I think people are going to call &[t] a "slice"
[12:42:04] <pnkfelix> since I think its strongly implied that "slice" means "pointer-to-data + length"
[12:42:05] <nmatsakis> no matter what we say :)
[12:42:52] <nmatsakis> it does seem like using the term array for "consecutive instances of T in memory" (whether unsized or not)
[12:42:55] <nmatsakis> is good
[12:42:59] <nmatsakis> that being what array means :)
[12:43:47] <nmatsakis> the docs don't necessarily clarify, since while I consider that "slice" page to be associated with [T], all the actual *methods* operate on &[T] or &mut [T], not (e.g.) Box<[t]>
[12:44:36] <Mutabah> nmatsakis: Is there a way of having "self: Box<Self>"?
[12:44:46] <nmatsakis> Mutabah: that syntax works
[12:44:54] <nmatsakis> fn foo(self: Box<Self>, ...)
[12:44:56] <nmatsakis> what does not yet work is
[12:45:00] <nmatsakis> fn foo(self: Rc<Self>, ...)
[12:45:02] <nmatsakis> but it's supposed to :)
[12:45:02] *** Quits: njn (chatzilla@moz-c6c476.iinet.net.au) (Quit: ChatZilla 0.9.91.1 [Firefox 41.0a1/20150531163607])
[12:45:03] <Mutabah> *nod*
[12:45:05] <nmatsakis> just we haven't made it work
[12:45:23] <Mutabah> Anyway, the methods on the slice page cover anything that derefs to a [T]
[12:46:01] <Mutabah> and could have specfic implementations for Box... but that might be something to leave to boxed::Box
[12:47:58] <nmatsakis> i'm just saying that if we said that a "slice" is &[T] or &mut [T], as the docs clearly suggest, then the name of the module is still consistent
[12:48:09] <nmatsakis> but I do believe the intention was that he type `[T]` is a slice
[12:48:29] <nmatsakis> pnkfelix: note that Foo<[T]> for any `Foo` still corresponds to "pointer-to-data+length"
[12:48:38] * nmatsakis belabors a point
[12:48:42] <nmatsakis> back to whatever it was I was doing...
[12:48:59] <pnkfelix> nmatsakis: true, okay
[13:02:29] *** Joins: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP)
[13:02:29] *** Quits: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP) (Connection closed)
[13:02:50] *** Joins: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP)
[13:05:12] *** Joins: bdero (bran@moz-91hi89.mit.edu)
[13:06:53] *** Quits: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP) (Ping timeout: 121 seconds)
[13:07:22] *** Quits: squiddy (squiddy@moz-md4.pm3.19.178.IP) (Quit: Leaving)
[13:07:38] *** Quits: oli_obk__ (Mibbit@moz-7bq.0sb.52.141.IP) (Ping timeout: 121 seconds)
[13:14:05] *** Parts: bdero (bran@moz-91hi89.mit.edu) ()
[13:30:40] *** Joins: oli_obk__ (Mibbit@moz-7bq.0sb.52.141.IP)
[13:35:51] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[13:44:47] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[13:58:05] *** Quits: oli_obk__ (Mibbit@moz-7bq.0sb.52.141.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:59:00] *** Quits: zmack (zmack@moz-qdq.e19.24.188.IP) (Connection closed)
[13:59:30] *** Joins: zmack (zmack@moz-qdq.e19.24.188.IP)
[14:03:33] *** Quits: zmack (zmack@moz-qdq.e19.24.188.IP) (Ping timeout: 121 seconds)
[14:06:59] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[14:07:28] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[14:12:41] *** Quits: eerie (eerie@moz-clf3jc.red.bezeqint.net) (Connection closed)
[14:22:29] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[14:22:41] *** Quits: _Vi (vi@moz-bbs.vhj.131.104.IP) (Ping timeout: 121 seconds)
[14:26:15] *** Joins: eerie (eerie@moz-qld.8t4.67.109.IP)
[14:26:37] *** Joins: bjz (bjz@moz-puppgq.tpgi.com.au)
[14:29:42] *** Quits: eerie (eerie@moz-qld.8t4.67.109.IP) (Connection closed)
[14:29:52] *** Joins: jgallagher (john@moz-d5e8oc.hfc.comcastbusiness.net)
[14:29:57] *** Joins: dinfuehr (dinfuehr@moz-fd7jlp.highway.telekom.at)
[14:31:01] *** Quits: bjz (bjz@moz-puppgq.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[14:31:19] *** Joins: bjz (bjz@moz-puppgq.tpgi.com.au)
[14:32:35] *** Joins: xilec (Mibbit@moz-g6k.oht.161.46.IP)
[14:56:46] *** Quits: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP) (Connection closed)
[14:57:39] *** Joins: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP)
[14:57:46] *** Quits: dinfuehr (dinfuehr@moz-fd7jlp.highway.telekom.at) (Connection closed)
[14:58:06] *** Joins: dinfuehr (dinfuehr@moz-fd7jlp.highway.telekom.at)
[15:01:55] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[15:02:07] *** Quits: Kxepal (Miranda@moz-b6og7h.pppoe.mtu-net.ru) (Ping timeout: 121 seconds)
[15:02:09] *** Quits: dinfuehr (dinfuehr@moz-fd7jlp.highway.telekom.at) (Ping timeout: 121 seconds)
[15:03:14] <bluss> if we could just change our makefiles to not use absolute paths when passing crates to rustc, then it would rid us of this uglyness in panic messages: /home/rustbuild/src/rust-buildbot/slave/nightly-dist-rustc-linux/build
[15:03:43] <bluss> it would be quite nice, we don't have to show that on every None.unwrap()
[15:04:12] *** Joins: Kxepal (Miranda@moz-5p74si.pppoe.mtu-net.ru)
[15:06:36] <bluss> as a bonus, backtraces become more independent of build config
[15:06:54] *** Quits: poorman (poorman@moz-dpk.91o.74.71.IP) (Ping timeout: 121 seconds)
[15:10:41] *** Joins: poorman (poorman@moz-sdl0oq.res.rr.com)
[15:16:47] *** Quits: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP) (Connection closed)
[15:18:56] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[15:26:15] *** Quits: laumann (thomas@moz-3m6.3kq.109.2.IP) (Ping timeout: 121 seconds)
[15:28:02] *** Joins: sp3d (sp3d@moz-ik970v.enn1.s22b.000d.2601.IP)
[15:28:25] *** Quits: xilec (Mibbit@moz-g6k.oht.161.46.IP) (Ping timeout: 121 seconds)
[15:30:05] *** Joins: eerie (eerie@moz-qld.8t4.67.109.IP)
[15:34:13] *** Quits: eerie (eerie@moz-qld.8t4.67.109.IP) (Ping timeout: 121 seconds)
[15:38:28] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[15:45:37] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[15:49:25] *** Joins: jbomo (dkd@moz-uol4mm.fios.verizon.net)
[15:50:49] *** Joins: yjv (yjv@moz-j0cdis.fios.verizon.net)
[15:51:35] *** Quits: yjv (yjv@moz-j0cdis.fios.verizon.net) (Connection closed)
[15:51:56] *** Joins: yjv (yjv@moz-j0cdis.fios.verizon.net)
[15:51:57] *** Quits: doener (doener@moz-eku96m.hsi08.unitymediagroup.de) (Quit: leaving)
[15:53:03] *** Joins: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP)
[15:59:21] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[16:01:25] *** Joins: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net)
[16:14:35] *** Quits: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP) (Connection closed)
[16:15:54] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[16:16:02] *** Quits: madmalik (uid13697@moz-lfin5p.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[16:16:58] *** Joins: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP)
[16:22:18] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[16:22:18] *** ChanServ sets mode: +ao erickt erickt
[16:23:48] *** Quits: Quxxy (chatzilla@moz-efh10q.internode.on.net) (Ping timeout: 121 seconds)
[16:26:52] <eddyb> nmatsakis: about the Rc thing, I was telling arielb1 that the way forward would be tables from method names to implementations (rather than starting from the type)
[16:27:06] <eddyb> not sure how good that is
[16:30:26] <steveklabnik> bluss: suuuper +1 here
[16:31:03] *** Joins: eerie (eerie@moz-qld.8t4.67.109.IP)
[16:31:04] <steveklabnik> bluss: i was actualy talking with buildbot about changing their terms and default directories, but there's over 6000 references to 'slave' in their codebase O_O
[16:31:22] <steveklabnik> haven't had the time :/ they're also pro moving towards leader/follower
[16:31:22] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[16:31:27] *** Quits: wca (will@moz-oonm1e.firepipe.net) (Quit: leaving)
[16:32:43] <eddyb> bluss: and errors aren't 3 screens wide!
[16:34:06] *** Joins: dcb (dcb@moz-4hh.6p3.217.74.IP)
[16:35:24] *** Quits: eerie (eerie@moz-qld.8t4.67.109.IP) (Ping timeout: 121 seconds)
[16:37:29] *** Joins: pcwalton (pcwalton@moz-nh2.o1i.216.216.IP)
[16:37:29] *** ChanServ sets mode: +o pcwalton
[16:37:41] *** Quits: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP) (Connection closed)
[16:37:53] *** Joins: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP)
[16:47:42] *** Joins: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net)
[16:51:11] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[16:51:50] *** chmanchester|afk is now known as chmanchester
[16:55:15] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Quit: Leaving)
[17:08:00] *** Quits: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP) (Connection closed)
[17:08:31] *** Joins: madmalik (uid13697@moz-lfin5p.brockwell.irccloud.com)
[17:16:17] <WindowsBunny> sfackler: STD_OUTPUT_HANDLE isn't a HANDLE :P
[17:18:39] *** Quits: erz (erz@moz-fiq1tl.broadband.corbina.ru) (Ping timeout: 121 seconds)
[17:19:19] *** Joins: erz (erz@moz-fiq1tl.broadband.corbina.ru)
[17:22:43] <WindowsBunny> Question, when running the test infrastructure, does it replace the LOCAL_STDOUT of each test thread with a sink?
[17:23:29] <steveklabnik> acrichto: that 'wut' made me laugh out loud
[17:23:40] <WindowsBunny> well, it shouldn't apply to a run-pass test anyway
[17:23:43] <acrichto> steveklabnik: :D
[17:24:56] <steveklabnik> acrichto: i'm generally trying to clear out some of these old tests, so expect a lot more 'wut' from me today, hehe
[17:25:04] *** Joins: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP)
[17:25:19] <acrichto> steveklabnik: awesome! feel free to lump them all into one PR as well, I doubt this will be contentious at all
[17:25:42] <steveklabnik> yeah, maybe i should do that. there are 57 tests currently, and i'm investigating the history before i make the call
[17:25:59] <steveklabnik> it's nice to have the specific reasons, if indidual PRs aren't terrible
[17:26:37] <acrichto> ah it's fine to have a commit-per-test as well
[17:26:42] <acrichto> if you want to separate it apart like that
[17:28:03] <steveklabnik> maybe i'll just batch up 'this has been ignored since 2013, it's fine' at first, heh
[17:29:08] <acrichto> yeah I would suspect that's pretty safe
[17:30:09] <steveklabnik> git grep -l '//\s*ignore-test' -- src/test | xargs -I {} firefox https://github.com/rust-lang/rust/commits/master/{}
[17:30:13] <steveklabnik> ha!
[17:30:17] <steveklabnik> nothing like opening 50 tabs from the command line...
[17:30:56] *** Quits: pcwalton (pcwalton@moz-nh2.o1i.216.216.IP) (Client exited)
[17:31:48] *** Joins: eerie (eerie@moz-2u3428.red.bezeqint.net)
[17:32:43] <acrichto> oh dear
[17:33:29] <steveklabnik> you added some files that are ignored in src/test/auxilary that say 'this is not a test'. those are legitimate, i'm assuming?
[17:33:36] <seanmonstar> just noticed that nightly claims its 1.1.0-nightly, isn't it 1.2.0-nightly?
[17:33:51] <steveklabnik> seanmonstar: my nightly says 1.2.0-nightly
[17:33:56] <steveklabnik> rustc 1.2.0-nightly (764877650 2015-06-12)
[17:34:19] <seanmonstar> oh noes whats happening
[17:34:43] *** Quits: O01eg (o01eg@moz-kdi.38l.112.37.IP) (Client exited)
[17:35:25] <seanmonstar> oh thats right. i override my rustc to test the slow compiling regression (no wonder it was compiling so slow)
[17:35:32] <steveklabnik> hehehe
[17:35:48] <steveklabnik> seanmonstar: btw, did you see that the hyper stuff did land in that benchmark?
[17:36:15] *** Quits: eerie (eerie@moz-2u3428.red.bezeqint.net) (Ping timeout: 121 seconds)
[17:36:15] <seanmonstar> yea, nice job! \o/
[17:36:44] <steveklabnik> someone else got iron and nickel in too
[17:39:06] * seanmonstar needs spellck plugin for rustdoc
[17:41:48] <steveklabnik> yessss
[17:43:42] *** Quits: andrew-d_w (andrew-d_w@moz-f7k.iq2.247.50.IP) (Ping timeout: 121 seconds)
[17:45:19] *** Joins: Jesin (Jesin@moz-4jre1i.eecs.lehigh.edu)
[17:45:35] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[17:45:36] *** ChanServ sets mode: +o brson
[17:48:51] *** Joins: andrew-d_w (andrew-d_w@moz-f7k.iq2.247.50.IP)
[17:50:01] <seanmonstar> the broken crates.io link on 1.0.0 docs main page kills me
[17:50:14] *** Quits: vmx (vmx@moz-mmstme.pools.vodafone-ip.de) (Quit: Leaving)
[17:50:33] <steveklabnik> hehe
[17:50:38] <steveklabnik> it'll be gone soon
[17:53:33] *** Joins: elif (chatzilla@moz-ev8m1p.res.rr.com)
[17:56:20] <bluss> acrichto: thanks for the instructions -- I'll test this out, but I can't do more today
[17:57:14] <acrichto> bluss: no worries!
[17:59:00] <seanmonstar> hm, just realized thread::spawn requires 'static, so i can really use it to show an example of Sync...
[17:59:15] <seanmonstar> cant*
[18:05:13] *** Quits: skeuomorf (skeuomorf@moz-d5k.lok.32.197.IP) (Ping timeout: 121 seconds)
[18:06:15] *** Quits: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP) (Connection closed)
[18:06:53] <seanmonstar> oh right, i can use Arc
[18:07:49] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[18:07:49] *** ChanServ sets mode: +o pcwalton
[18:09:16] *** Joins: arielby (Mibbit@moz-3aue0b.012.net.il)
[18:09:33] *** Joins: skeuomorf (skeuomorf@moz-d5k.lok.32.197.IP)
[18:12:10] *** Joins: avikpal_ (avikpal@moz-ovp.8df.232.117.IP)
[18:16:57] *** Quits: mtsr_ (mtsr@moz-s5jpgs.yourbnc.co.uk) (Quit: YourBNC - (https://yourbnc.co.uk))
[18:16:59] <arielby> nmatsakis: ping
[18:17:16] <nmatsakis> arielby: pong
[18:17:52] <steveklabnik> acrichto: https://github.com/rust-lang/rust/pull/26253
[18:18:00] <arielby> what should be done with wf for associated items?
[18:18:25] *** Joins: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP)
[18:19:13] *** Joins: mtsr_ (mtsr@moz-s5jpgs.yourbnc.co.uk)
[18:19:39] *** Quits: dcb (dcb@moz-4hh.6p3.217.74.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[18:21:02] *** Joins: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk)
[18:22:27] *** Quits: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP) (Ping timeout: 121 seconds)
[18:22:46] *** Joins: dcb (dcb@moz-4hh.6p3.217.74.IP)
[18:23:31] <WindowsBunny> acrichto: good luck with your backtrace adventures
[18:24:01] <acrichto> WindowsBunny: https://github.com/alexcrichton/backtrace-rs
[18:24:23] *** Joins: _Vi (vi@moz-bbs.vhj.131.104.IP)
[18:27:43] <nmatsakis> arielby: I'm trying to write up my plan, I was just getting to the WF section. I think we should make vacuous predicates an error, but I haven't gotten to impl'ing that yet
[18:32:56] *** Joins: eerie (eerie@moz-2u3428.red.bezeqint.net)
[18:33:35] <WindowsBunny> acrichto: You should fix your FIXME https://github.com/alexcrichton/backtrace-rs/blob/master/src/backtrace/dbghelp.rs#L34
[18:33:38] <WindowsBunny> :P
[18:33:49] <acrichto> oh right duh
[18:34:00] <arielby> nmatsakis: that's my patch
[18:34:42] <nmatsakis> arielby: what's your patch? do you mean gh25701?
[18:34:42] <[o__o]> [WIP] Check more things for well-formedness: https://github.com/rust-lang/rust/pull/25701
[18:34:47] <arielby> nmatsakis: sure
[18:35:00] <arielby> I need to update it
[18:35:04] <arielby> and rebase it
[18:35:50] *** Joins: frogonia (Mibbit@moz-3aue0b.012.net.il)
[18:35:52] <nmatsakis> so this part in particular I think we should try to avoid: https://github.com/arielb1/rust/commit/3923108d4997de0bf2b301f64f8030e40ef35ac4
[18:36:15] <frogonia> nmatsakis: the backwards-incompatiblity?
[18:36:28] <nmatsakis> well, primarily because it's annoying
[18:36:31] *** frogonia is now known as arielby_
[18:36:37] <nmatsakis> backwards compat is good too and all
[18:36:40] <nmatsakis> ;)
[18:36:47] <nmatsakis> but I think that we can use a notion of implied bounds here
[18:36:48] <nmatsakis> in particular
[18:36:59] <arielby_> nmatsakis: we should probably add the free-regions from the self type
[18:37:01] <nmatsakis> that's what I've been trying to write up and work through a bit
[18:37:04] *** Quits: eerie (eerie@moz-2u3428.red.bezeqint.net) (Ping timeout: 121 seconds)
[18:37:44] <arielby_> I think that's the part of wf that implicator handles
[18:38:05] <nmatsakis> arielby_: that's roughly what I mean, but we have to make sure to do it right (e.g., we have to make sure you can't wind up with a projection where we don't check it's component types for WFness)
[18:38:14] <nmatsakis> there are some bugs in the existing logic on this part 
[18:38:18] <nmatsakis> which is part of what i've been working through
[18:38:26] <nmatsakis> but those bugs aren't too relevant to this case
[18:38:36] <nmatsakis> (I'm referring to gh25860)
[18:38:36] <[o__o]> Implied bounds on nested references + variance = soundness hole: https://github.com/rust-lang/rust/issues/25860
[18:38:49] <seanmonstar> steveklabnik: is there support for having doc pages that aren't from a specific code file?
[18:38:51] <arielby_> nmatsakis: different issue
[18:39:07] <steveklabnik> seanmonstar: what do you mean by 'support' and 'code file'
[18:39:09] <steveklabnik> :)
[18:39:19] *** Quits: yjv (yjv@moz-j0cdis.fios.verizon.net) (Connection closed)
[18:39:19] <steveklabnik> like, you mean, 'i want to document hyper'
[18:39:24] <steveklabnik> 'with markdown files'?
[18:39:30] <seanmonstar> steveklabnik: like, in cargo doc, and not a doc string in a file.rs
[18:39:35] <steveklabnik> yeah
[18:39:39] <arielby_> traits are invariant so it shouldn't be an issue there
[18:39:41] <steveklabnik> uhhhhh to be honest i have no idea
[18:39:47] <seanmonstar> yea, i'd like to expand on some topics without flooding the literal doc page
[18:39:48] <steveklabnik> i mean, rustdoc can obviously process whatever.md files
[18:40:01] <steveklabnik> acrichto: ^ ?
[18:40:05] *** Quits: arielby (Mibbit@moz-3aue0b.012.net.il) (Quit: http://www.mibbit.com ajax IRC Client)
[18:40:10] *** arielby_ is now known as arielby
[18:40:40] <acrichto> steveklabnik: seanmonstar: cargo/rustdoc currently don't support pulling in arbitrary .md into the doc tree
[18:41:04] <arielby> I mean 25860 shouldn't be an issue with traits
[18:41:08] <nmatsakis> arielby: I agree that particular bug is not too relevant (s aI think I wrote above), but my main point is that we need to be careful
[18:41:16] <arielby> but we *do* need to check wf on self somewhere
[18:41:23] <seanmonstar> acrichto: so, rfc to have a docs/ directory that gets included in `cargo doc`?
[18:41:25] <arielby> currently we don't
[18:42:48] *** Joins: eerie (eerie@moz-2u3428.red.bezeqint.net)
[18:42:58] <nmatsakis> arielby: precisely. I tried adding some WF checks to that end in my branch and started hitting some problems, I've not investigated deeply yet, since I've been trying to write stuff up
[18:43:17] <brson> today i'm going to work on supporting production users, publish a new beta, run some crater tests
[18:43:20] <brson> that's probably it
[18:44:31] *** Joins: dinfuehr (dinfuehr@moz-fd7jlp.highway.telekom.at)
[18:44:33] *** Quits: dinfuehr (dinfuehr@moz-fd7jlp.highway.telekom.at) (Connection closed)
[18:44:34] *** Joins: dinfuehr (dinfuehr@moz-fd7jlp.highway.telekom.at)
[18:45:26] <brson> beta version bump r? https://github.com/rust-lang/rust/pull/26254
[18:46:04] <seanmonstar> there a calendar or milestones or something that marks when the trains roll?
[18:46:18] <seanmonstar> i know its 6 weeks, but who wants to math
[18:46:24] <brson> seanmonstar: no, but there probably should be
[18:46:31] <brson> like for fx
[18:46:58] <brson> acrichto: r? https://github.com/rust-lang/rust/pull/26254
[18:47:31] <brson> github diffs look funny today
[18:48:16] <brson> spacing on diffed lines is inconsistent https://github.com/rust-lang/rust/pull/26242/files
[18:49:00] <acrichto> zomg llvm will not stop segfaulting
[18:49:09] *** Joins: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP)
[18:49:37] <seanmonstar> acrichto: even if not automatic, can i feed in manually extra markdown files to cargo doc?
[18:49:51] <acrichto> seanmonstar: no
[18:50:14] <arielby> nmatsakis: do you have a case where selection misses wf?
[18:50:42] *** Joins: yjv (yjv@moz-fvgv5t.public.wayport.net)
[18:52:20] <WindowsBunny> acrichto: omgwtfbbq
[18:53:40] <Manishearth> acrichto: trying to build servo with msvc now :)
[18:53:56] *** Quits: mukilan (mukilan@moz-5ke.d4s.164.122.IP) (A TLS packet with unexpected length was received.)
[18:54:15] <acrichto> Manishearth: man I can't even get rustc-serialize to build with it lol
[18:54:24] <Manishearth> acrichto: what why not?
[18:54:27] <Manishearth> oh plugins?
[18:54:28] <acrichto> Manishearth: but more seriously no build script and/or plugin will work righ tnow, so you may not get far
[18:54:37] <acrichto> that'll be fixed in the next nightly
[18:54:40] <Manishearth> acrichto: why no build scripts?
[18:54:47] <Manishearth> oh gcc doesn't work?
[18:54:48] *** Quits: yjv (yjv@moz-fvgv5t.public.wayport.net) (Ping timeout: 121 seconds)
[18:54:51] <acrichto> build scripts are linked dynamically
[18:54:56] <acrichto> but right now the compiler cannot link dynamically
[18:55:01] <acrichto> it's missing the necessary files
[18:55:02] <Manishearth> gah
[18:55:04] <acrichto> (fixed in the next nightly)
[18:55:15] *** Joins: yjv (yjv@moz-j0cdis.fios.verizon.net)
[18:55:18] <acrichto> abort-on-panic is a nightmare as well
[18:55:23] <acrichto> makes debugging anything a massive pain
[18:55:27] <acrichto> brb
[18:56:00] <Manishearth> acrichto: it's just one library I want to compile with msvc really. any chance I'd be able to compile the rest with mingw as usual?
[18:56:24] <WindowsBunny> Manishearth: msvc has a hard time understand libraries built by mingw
[18:56:32] <WindowsBunny> *understanding
[18:56:33] <Manishearth> define hard time
[18:56:48] <arielby> nmatsakis: on fulfillment caching
[18:56:50] <WindowsBunny> Manishearth: linker errors usually
[18:56:51] <Manishearth> I am having a hard time teaching skia to compile like a good little library
[18:56:57] <Manishearth> WindowsBunny: fixable?
[18:57:08] <Manishearth> I mean, yeah, linker errors were expected
[18:57:08] <arielby> rustc self-compilation spends almost no time in evaluate_predicates_recursively
[18:57:50] <WindowsBunny> Manishearth: Well, really if you create a .dll and a .def file using mingw and then ask msvc to generate a .lib from the .def and then link to that .lib it'll work
[18:58:19] <WindowsBunny> Manishearth: But if you try to give msvc a .a created directly by mingw, things will fail
[18:59:02] <Manishearth> er okay this is back in windows land
[18:59:04] <Manishearth> hmm
[18:59:11] * Manishearth will try to bang it with msvc rocks instead
[18:59:15] <Manishearth> eventually ill find the right rock
[19:00:03] *** Joins: grant (grant@moz-jfh.0nq.187.64.IP)
[19:00:06] <arielby> but that is workload dependent
[19:00:16] *** Joins: chc4 (chc4@moz-pdo0at.ma.comcast.net)
[19:00:22] <WindowsBunny> Manishearth: https://sites.google.com/site/skiadocs/user-documentation/quick-start-guides/windows
[19:00:34] <WindowsBunny> Manishearth: should be as simple as using gyp to generate project files
[19:00:34] <Manishearth> WindowsBunny: yeah I know
[19:00:42] <Manishearth> WindowsBunny: we use a makefile
[19:00:45] <WindowsBunny> Manishearth: and then call msbuild on the command line
[19:00:47] <Manishearth> it's .... complicated
[19:00:50] <arielby> nmatsakis: I think the main benefit here is that you avoid the exponential worst-case
[19:00:50] *** Quits: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk) (Ping timeout: 121 seconds)
[19:00:53] <Manishearth> whats an msbuild
[19:01:06] <WindowsBunny> Manishearth: msbuild is the program that takes project files and compiles shit
[19:01:10] <arielby> that can occasionally occur in evaluate_predicates_recursively
[19:01:10] <Manishearth> heh
[19:01:15] <Manishearth> WindowsBunny: it knows makefiles?
[19:01:17] <WindowsBunny> Manishearth: it is to make what project files are to makefiles
[19:01:24] <WindowsBunny> Manishearth: it knows project files
[19:01:26] <Manishearth> WindowsBunny: also, the command line tool JUST GAVE ME A GUI ERROR
[19:01:30] <Manishearth> what madness is this
[19:01:34] <WindowsBunny> Manishearth: so you need gyp to make project files
[19:01:46] <Manishearth> It couldn't find strncpy
[19:01:49] <WindowsBunny> and then you figure out how to call msbuild to build those project files
[19:01:51] <Manishearth> what C++ can't copy strings?
[19:02:07] <WindowsBunny> Manishearth: strncpy does exist
[19:02:37] *** Quits: eerie (eerie@moz-2u3428.red.bezeqint.net) (Connection closed)
[19:02:40] <Manishearth> "The procedure entry point strncpy could not be located in the dll ....\link.exe"
[19:02:45] <WindowsBunny> :|
[19:02:51] <WindowsBunny> wat
[19:03:04] <WindowsBunny> Manishearth: What are you even doing
[19:03:06] <Manishearth> mind you cargo didn't tell me there were errors
[19:03:12] <Manishearth> it seems to still be going
[19:03:27] <Manishearth> WindowsBunny: cargo build in servo
[19:03:45] <nmatsakis> arielby: I don't have a specific example yet, but I haven't tried to make one. As far as fulfillment caching, the main benefit is that we avoid doing the same work over and over. In particular, even if there is a cache hit in selection, we still process the "nested obligations". Is that what you meant?
[19:04:07] <nmatsakis> arielby: but it's also useful for `evaluate_obligation`, that's actually the biggest win
[19:04:15] <WindowsBunny> Manishearth: link.exe isn't even a dll!
[19:04:15] <nmatsakis> arielby: mostly driven by evaluations of builtin-boiunds
[19:04:28] <Manishearth> WindowsBunny: it said "dynamic link library" but whatevers
[19:05:54] <Manishearth> When Ballmer chanted Developers Developers Developers Developers I'm now pretty certain he just wanted to say he liked eating them for lunch. 
[19:06:06] <Manishearth> this os seems to hate developers
[19:06:52] <Manishearth> WindowsBunny: it is now failing with negative exit codes
[19:07:31] <Manishearth> WindowsBunny: https://manishearth.pastebin.mozilla.org/8836711
[19:07:52] <WindowsBunny> Manishearth: It's just very different from the posix/gnu model, and servo and all the related libraries haven't yet updated to support the new paradigm
[19:07:59] <Manishearth> yeah I know :)
[19:08:19] <Manishearth> but still. gui errors when using a cui tool. gui errors that I'm spammed with which keep grabbing focus
[19:08:55] <WindowsBunny> xD
[19:09:06] <WindowsBunny> Manishearth: Do you mean "blah has stopped working"?
[19:09:07] *** Quits: Murarth (Murarth@moz-jpotpi.phnx.qwest.net) (Quit: I have come here to chew bubblegum and kick ass. And I'm all out of bubblegum.)
[19:09:11] <Manishearth> and after all these years, cmd still doesn't go fullscreen
[19:09:17] <Manishearth> WindowsBunny: no, the link.exe dll thing
[19:09:30] *** Joins: Murarth (Murarth@moz-2kf.78t.166.46.IP)
[19:09:32] <WindowsBunny> oh, if a DLL symbol can't be found it'll typically popup an error dialog to say so
[19:09:38] <WindowsBunny> that's typical windows behavior
[19:09:50] <Manishearth> WindowsBunny: yes, like I said, eatign developers
[19:09:56] <WindowsBunny> Manishearth: So its a very simple problem
[19:10:06] <WindowsBunny> Manishearth: Your PATH is borked so that link.exe is loading the wrong DLL
[19:10:19] <Manishearth> oh nvm these are build script problems
[19:10:36] <WindowsBunny> You're simply in DLL hell, that's all
[19:10:49] <Manishearth> it is a hell wrought by Ballmer
[19:10:54] <WindowsBunny> Fix your DLL hell and link.exe will start actually running and giving you normal linker errors :D
[19:10:58] <Manishearth> to cook developers before consumption
[19:11:14] <Manishearth> WindowsBunny: anyway these were build script stuff which acrichto said won't work
[19:11:17] <Manishearth> I just didn't notice
[19:11:21] * WindowsBunny sprinkles some spices on Manishearth
[19:11:22] <Manishearth> normal crates are compiling fine
[19:12:07] * Manishearth still doesn't get the strncpy problem
[19:12:24] * Manishearth wishes there was a cargo-compile-as-muich-as-possible command
[19:12:29] <WindowsBunny> Manishearth: it means link.exe depends on certain DLLs
[19:12:46] <WindowsBunny> Manishearth: But due to your PATH, it is loading DLLs with the same name, but not the right version
[19:12:56] <Manishearth> WindowsBunny: huh
[19:13:17] <Manishearth> WindowsBunny: I took a previous rust install and replaced the program files folder
[19:13:48] <WindowsBunny> Manishearth: Which link.exe are you using?
[19:14:03] <Manishearth> WindowsBunny: um
[19:14:10] <WindowsBunny> Manishearth: VS 2013 amd64?
[19:14:25] <Manishearth> vs2014 native command prompt
[19:14:28] <Manishearth> whatever that is
[19:14:39] <WindowsBunny> There's no VS 2014 :|
[19:14:45] <Manishearth> wait why am I not using vs 2015
[19:14:47] *** Quits: poorman (poorman@moz-sdl0oq.res.rr.com) (Ping timeout: 121 seconds)
[19:14:48] <WindowsBunny> VS 2013 and VS 2015
[19:15:01] <Manishearth> WindowsBunny: yeah its the one with 2015
[19:15:10] <Manishearth> its just called the 2014 command shell
[19:15:13] <Manishearth> for some silly reason
[19:15:14] <WindowsBunny> Manishearth: Ah okay, in that command prompt...
[19:15:33] <WindowsBunny> Manishearth: If you do cl /?
[19:15:36] <WindowsBunny> what is the first line
[19:15:59] <Manishearth> WindowsBunny: something about __vcrt_TerminateProcess
[19:16:07] <WindowsBunny> Manishearth: what
[19:16:09] *** Joins: poorman (poorman@moz-sdl0oq.res.rr.com)
[19:16:32] <WindowsBunny> Manishearth: What kind of horribly borked setup do you have
[19:16:43] <Manishearth> but this is an official microsoft vs install
[19:16:47] <Manishearth> it's as official as it gets
[19:16:48] <WindowsBunny> :|
[19:16:52] <Manishearth> pls dont tell me its broken
[19:17:06] <WindowsBunny> It should print something like "Microsoft (R) C/C++ Optimizing Compiler Version 19.00.22609 for x86"
[19:18:02] <Manishearth> WindowsBunny: is there something I should have in my path?
[19:18:05] <WindowsBunny> Manishearth: Okay, let's try this, create a .bat file with the following contents and then double click on it to open a command prompt https://gist.github.com/11ddcaa196182983f250
[19:18:51] <Manishearth> WindowsBunny: ah works now
[19:19:24] <WindowsBunny> Manishearth: Okay, now from there do your cargo build --target x86_64-pc-windows-msvc
[19:19:56] <Manishearth> still has problems with build scripts, but no longer gives linkers
[19:19:57] <Manishearth> yay
[19:20:03] <Manishearth> *linker errors
[19:20:14] *** Quits: yjv (yjv@moz-j0cdis.fios.verizon.net) (Connection closed)
[19:21:35] <Manishearth> WindowsBunny: now I have stuff like LINK : fatal error LNK1181: cannot open input file 'std-11582ce5.lib
[19:21:44] <Manishearth> which I suspect is due to build scripts
[19:21:55] <WindowsBunny> Manishearth: yep, a fix for that just landed
[19:22:00] <WindowsBunny> and will be in the next nightly
[19:22:07] <Manishearth> cool
[19:23:38] <WindowsBunny> Manishearth: gh26226
[19:23:39] <[o__o]> mk: Tweak the LIB_GLOB for MSVC: https://github.com/rust-lang/rust/pull/26226
[19:25:08] *** Joins: bdero (bran@moz-3au5rc.dyn.MIT.EDU)
[19:25:55] *** Joins: yjv (yjv@moz-2g7.oj0.45.100.IP)
[19:26:46] *** Joins: yjv_ (yjv@moz-fvgv5t.public.wayport.net)
[19:29:57] *** Quits: yjv (yjv@moz-2g7.oj0.45.100.IP) (Ping timeout: 121 seconds)
[19:30:51] *** Quits: untitaker (untitaker@moz-qarldn.highway.telekom.at) (Ping timeout: 121 seconds)
[19:31:51] *** Quits: yjv_ (yjv@moz-fvgv5t.public.wayport.net) (Connection closed)
[19:33:08] *** Joins: untitaker (untitaker@moz-naaq3a.highway.telekom.at)
[19:35:13] *** Quits: dcb (dcb@moz-4hh.6p3.217.74.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[19:38:49] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[19:39:58] *** Joins: dcb (dcb@moz-4hh.6p3.217.74.IP)
[19:40:50] *** Joins: sprocket (Mibbit@moz-hu6.nja.252.72.IP)
[19:41:22] *** Joins: eerie (eerie@moz-2u3428.red.bezeqint.net)
[19:41:43] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Connection closed)
[19:41:58] *** Quits: grant (grant@moz-jfh.0nq.187.64.IP) (Client exited)
[19:42:04] *** Quits: jbomo (dkd@moz-uol4mm.fios.verizon.net) (Quit: )
[19:43:42] *** Quits: arielby (Mibbit@moz-3aue0b.012.net.il) (Quit: http://www.mibbit.com ajax IRC Client)
[19:44:27] *** Quits: dinfuehr (dinfuehr@moz-fd7jlp.highway.telekom.at) (Connection closed)
[19:45:02] *** Quits: semarie (semarie@moz-4lmh4m.privacyfoundation.ch) (A TLS packet with unexpected length was received.)
[19:45:24] <brson> pcwalton: can you post your opinion of this resolve patch sometime https://github.com/rust-lang/rust/pull/26242
[19:46:37] *** Joins: zmack (zmack@moz-qdq.e19.24.188.IP)
[19:47:55] <brson> there's a new 'relnotes' tag that should be liberally applied to PRs of interest
[19:48:09] <brson> re https://internals.rust-lang.org/t/adding-a-notable-tag-to-rust-lang-rust-for-prs/2234/5
[19:48:29] <bstrie> nrc: I'm digging through the compiler as we speak, it's my first time trying to do anything substantial deep in the compiler's guts so bear with me
[19:48:54] *** Quits: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP) (Connection closed)
[19:49:16] <brson> where do we keep descriptions of the issue tags?
[19:49:44] <bstrie> brson: awesome
[19:51:35] *** chmanchester is now known as chmanchester|afk
[19:52:15] <brson> acrichto: fyi the beta for msvc is failing. i assume that's expected
[19:52:42] * acrichto looks
[19:53:07] <acrichto> brson: ah yeah I think the self-bootstrap support wasn't cherry-picked
[19:53:11] <acrichto> brson: so sgtm
[19:54:30] *** Quits: zmack (zmack@moz-qdq.e19.24.188.IP) (Connection closed)
[20:00:05] *** Joins: yjv (yjv@moz-2g7.oj0.45.100.IP)
[20:01:02] *** Joins: yjv_ (yjv@moz-fvgv5t.public.wayport.net)
[20:01:26] *** Quits: dcb (dcb@moz-4hh.6p3.217.74.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[20:02:05] *** Quits: Jesin (Jesin@moz-4jre1i.eecs.lehigh.edu) (Quit: Leaving)
[20:02:06] *** Joins: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk)
[20:02:52] <Gankro> nrc: I probbaly shouldn't be assigned a T-lang RFC?
[20:04:13] *** Quits: yjv (yjv@moz-2g7.oj0.45.100.IP) (Ping timeout: 121 seconds)
[20:05:03] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Connection closed)
[20:06:17] *** Quits: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk) (Ping timeout: 121 seconds)
[20:06:53] *** Quits: bdero (bran@moz-3au5rc.dyn.MIT.EDU) (Ping timeout: 121 seconds)
[20:11:43] *** Joins: eerie_ (eerie@moz-2u3428.red.bezeqint.net)
[20:14:24] *** Quits: eerie (eerie@moz-2u3428.red.bezeqint.net) (Ping timeout: 121 seconds)
[20:15:56] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[20:21:20] <Manishearth> acrichto: oh, btw, small msvc bug, it ships with an install.sh
[20:21:37] <acrichto> Manishearth: ah all tarballs do that
[20:21:37] <Manishearth> Given that msvc is not mingw, I'm not entirely sure what it wants me to do after looking at that
[20:21:46] <acrichto> Manishearth: the official installers (exe/msi) won't havethat
[20:21:49] <Manishearth> do I msvc my mingw shell? do I mingw my msvc shell?
[20:21:52] <Manishearth> acrichto: ah okay
[20:21:56] <acrichto> but they're not built right now b/c we don't have a cargo msvc nightly
[20:21:59] <acrichto> so the install story isn't great
[20:22:03] <Manishearth> acrichto: ah
[20:22:08] <acrichto> once cargo nightlies are done (next on my list) we'll have a combined exe/msi installer
[20:22:12] <Manishearth> acrichto: cargo gnu seems to work for me in an msvc shell
[20:22:22] <acrichto> indeed :)
[20:22:33] <acrichto> we should be able to build cargo with msvc though
[20:22:36] <acrichto> e.g. no makefile at all
[20:22:39] <Manishearth> hm
[20:22:44] <acrichto> it's in the works
[20:22:45] <acrichto> nothing major
[20:22:46] <Manishearth> acrichto: wait, msvc can't do makefiles?
[20:22:48] <acrichto> just need to get it done
[20:22:51] <Manishearth> cool
[20:22:54] <acrichto> well msvc doesn't have make
[20:23:00] <acrichto> it's got nmake, but subtly different I think
[20:23:09] <Manishearth> acrichto: what horrid dystopia is this
[20:23:15] <acrichto> :D
[20:23:56] <Manishearth> acrichto: well this is going to complicate the servo stuff
[20:24:04] <Manishearth> acrichto: would nmake suffice for most makefiles?
[20:24:14] *** Joins: dcb (dcb@moz-4hh.6p3.217.74.IP)
[20:24:24] <brson> i believe no, nmake is very different from gnu make
[20:24:27] <Manishearth> I know that skia does something special for msvc, and spidermonkey is supposed to work on msvc, so it's just the small deps that I don't want to work
[20:24:29] <WindowsBunny> acrichto: A powershell script then?
[20:25:18] <WindowsBunny> Manishearth: Basically, every library that is built by cargo build.rs files, needs to specifically use project files that msbuild can understand
[20:25:45] <WindowsBunny> Manishearth: for various small deps, it's not hard to whip up a project file
[20:25:56] <Manishearth> WindowsBunny: bah
[20:26:31] <WindowsBunny> Manishearth: What will be more difficult is libraries that use C with gnu extensions that msvc doesn't understand
[20:26:37] <Manishearth> ick
[20:27:33] <WindowsBunny> acrichto: we should probably make it clear which version of msvc a given version of Rust is built with
[20:27:52] <WindowsBunny> otherwise there may be... issues if someone tries to use it with a different msvc version
[20:28:14] *** Joins: Jesin (Jesin@moz-4jre1i.eecs.lehigh.edu)
[20:28:16] <acrichto> WindowsBunny: hm interesting, should we be targeting a super old msvc versions?
[20:28:22] <acrichto> what sort of incompatibilities may arise?
[20:29:07] <WindowsBunny> acrichto: Well, it's just that all statically linked code needs to use the same msvc version
[20:29:22] <Manishearth> WindowsBunny: we don't do that?
[20:29:25] <acrichto> hmm
[20:29:28] <WindowsBunny> acrichto: so if you're statically linking to libstd, you need everything to have the same CRT as libstd
[20:29:42] <Manishearth> I mean regular rust complains if std mismatches
[20:29:48] <Manishearth> or whatever
[20:29:50] *** Quits: yjv_ (yjv@moz-fvgv5t.public.wayport.net) (Connection closed)
[20:30:12] <WindowsBunny> acrichto: Each CRT version is allowed to break ABI compatibility with the previous version
[20:30:17] *** Quits: dcb (dcb@moz-4hh.6p3.217.74.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[20:31:02] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[20:31:16] <acrichto> WindowsBunny: surely this can't be true
[20:31:34] <acrichto> there's some caveat here
[20:31:41] <acrichto> I can compile an app and distribute it everywhere and it works
[20:31:44] *** Joins: dcb (dcb@moz-4hh.6p3.217.74.IP)
[20:31:51] <WindowsBunny> sure, you can distribute it everywhere and it works
[20:31:52] <acrichto> and surely everyone doesn't have the *exact same* version of everything
[20:31:53] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[20:31:53] *** ChanServ sets mode: +ao erickt erickt
[20:32:12] <WindowsBunny> acrichto: each CRT version has a different named DLL
[20:32:20] <WindowsBunny> msvcrt120.dll msvcrt140.dll and stuff
[20:32:28] <WindowsBunny> so you can distribute binaries and it all works fine
[20:33:14] <WindowsBunny> acrichto: But when it comes to linking together code statically, all that code needs to use the same CRT
[20:33:57] <acrichto> I'm not sure I understand this
[20:34:04] <acrichto> I'd need to see a concrete case that can fail
[20:34:17] <acrichto> e.g. we are not statically linking anyting?
[20:35:17] <WindowsBunny> acrichto: a rust program statically links to libstd
[20:35:44] <WindowsBunny> acrichto: and that libstd was built with a specific version of the CRT
[20:36:00] <WindowsBunny> >A reusable library and all of its users should use the same CRT library types and therefore the same compiler switch.
[20:36:16] <acrichto> WindowsBunny: we're not using cl.exe though, most of that stuff doesn't apply to us
[20:36:25] <acrichto> or so I thought
[20:36:33] <acrichto> libstd just links to msvcrt.lib
[20:36:47] <acrichto> which I believe is the dynamic CRT?
[20:36:52] <WindowsBunny> acrichto: Yep
[20:37:14] <WindowsBunny> acrichto: But msvcrt for msvc 12 is not ABI compatible with msvcrt for msvc 14 for example
[20:37:22] *** Quits: dcb (dcb@moz-4hh.6p3.217.74.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[20:37:45] <acrichto> what in the world
[20:37:47] <acrichto> this is madness
[20:37:55] <acrichto> so literally every windows app ships msvcrt.dll?
[20:38:13] <WindowsBunny> most installers come with redist installers
[20:38:28] <WindowsBunny> and silently install the redists during the installation process
[20:38:29] <acrichto> so there's like 100 copies of msvcrt.dll on any one windows machine?
[20:38:38] <WindowsBunny> acrichto: But msvcrt.lib != msvcrt.dll
[20:38:55] <WindowsBunny> if you link to msvcrt.lib with msvc you are really linking to msvcrt120.dll or some similarly versioned DLL
[20:39:11] *** Quits: jgallagher (john@moz-d5e8oc.hfc.comcastbusiness.net) (Client exited)
[20:39:23] <acrichto> sure, but you're saying what the runtime dependency is totally nonstandard
[20:39:27] <acrichto> and can change at any time
[20:39:32] <acrichto> so *everyone* is shipping their own dll
[20:39:41] <acrichto> something about this seems off
[20:39:42] <WindowsBunny> the DLL you depend on depends on the version of msvc you built your code with
[20:40:02] <WindowsBunny> if you built with msvc 12, you depend on msvcrt120.dll
[20:40:52] <WindowsBunny> acrichto: At runtime everything is fine, because as long as the DLL with the correct name is installed, it'll have the right ABI and everything is fine and dandy
[20:41:19] <WindowsBunny> if that version of the CRT redistributable isn't installed, then you just have to install the appropriate redistributable
[20:41:38] <WindowsBunny> which you can either bundle in the installer or ask the end user to download and install themselves
[20:41:38] *** Quits: eerie_ (eerie@moz-2u3428.red.bezeqint.net) (Connection closed)
[20:41:43] <acrichto> this just sounds like the standard "use an old dll that everyone has for compatibility" problem
[20:41:45] *** Joins: eerie (eerie@moz-2u3428.red.bezeqint.net)
[20:41:55] <WindowsBunny> acrichto: msvc does not use msvcrt.dll
[20:42:10] <acrichto> there has to be a dll present on basically all modern windows machine
[20:42:17] <acrichto> that is msvcrt
[20:42:24] <acrichto> like old apps are expected to work
[20:42:31] <acrichto> this is the same problem as libc on linux
[20:42:40] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Quit: No Ping reply in 180 seconds.)
[20:42:43] <acrichto> there you just compile against some ancient libc
[20:43:08] <WindowsBunny> apps built before msvcrt started having versioned DLLs will depend on msvcrt.dll
[20:43:40] <WindowsBunny> apps built for a specific version of the CRT will depend on that named version of the CRT
[20:44:22] <acrichto> WindowsBunny: can you open an issue perhaps? I'm really not following what's going on here
[20:44:30] <acrichto> I'm losing sight of what actually needs to be done
[20:44:44] <WindowsBunny> Okay, I'll write up a detailed issue :P
[20:45:00] <acrichto> thanks!
[20:45:02] <WindowsBunny> acrichto: in rust-lang/rust?
[20:45:32] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[20:45:54] <acrichto> WindowsBunny: yeah
[20:47:47] *** Joins: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP)
[20:48:35] *** Quits: sprocket (Mibbit@moz-hu6.nja.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:52:59] *** Joins: yjv (yjv@moz-j0cdis.fios.verizon.net)
[20:56:25] *** Joins: dcb (dcb@moz-4hh.6p3.217.74.IP)
[20:57:42] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[20:57:56] *** Quits: eerie (eerie@moz-2u3428.red.bezeqint.net) (Connection closed)
[20:58:19] *** Quits: dcb (dcb@moz-4hh.6p3.217.74.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[20:59:17] <WindowsBunny> acrichto: Note that for each version of the CRT, there is a debug version which is ABI incompatible with the release version
[20:59:24] *** Joins: Kingsquee (kingsley@moz-3fm07c.bchsia.telus.net)
[20:59:50] *** Joins: phynx (chatzilla@moz-b3u.tp7.235.62.IP)
[20:59:57] *** Joins: dcb (dcb@moz-4hh.6p3.217.74.IP)
[21:00:01] <WindowsBunny> I wonder what happens if rustc tries to link to an llvm built in debug mode, will llvm be built using the debug crt while rustc tries to link to the release crt?
[21:00:41] *** Joins: bdero (bran@moz-lbs.91h.47.73.IP)
[21:02:21] *** Quits: dcb (dcb@moz-4hh.6p3.217.74.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:05:28] <phynx> I'm working on rustfmt, currently trying to format fn pointers. As I understand it, they are represented by syntax::ast::BareFnTy, which has a field "lifetimes". What's the syntax corresponding to a fn pointer with lifetime parameters ? I have never seen something like this.
[21:05:52] <acrichto> WindowsBunny: yeah I've done that by accident for various C files and it always ends poorly
[21:05:59] <acrichto> WindowsBunny: I think the linker makes sure that there's only one CRT
[21:06:02] <WindowsBunny> acrichto: gh26258
[21:06:02] <[o__o]> Indicate which version of MSVC Rust was built with: https://github.com/rust-lang/rust/issues/26258
[21:06:06] <acrichto> WindowsBunny: thanks!
[21:06:09] <WindowsBunny> Yeah, the linker should emit a warning
[21:06:11] *** Joins: swgillespie (swgillespie@moz-apj.3un.220.167.IP)
[21:06:34] <WindowsBunny> But it's a good idea for the developer to know ahead of time which msvc they need
[21:07:59] *** Joins: dcb (dcb@moz-4hh.6p3.217.74.IP)
[21:08:38] <WindowsBunny> acrichto: Many libraries will even provide multiple prebuilt versions, for each versions of msvc
[21:08:41] <WindowsBunny> for example sfml: http://www.sfml-dev.org/download/sfml/2.3/
[21:09:07] <Zoxc> No stock crt love?
[21:09:19] <acrichto> I... hope we don't go down that route
[21:09:26] <acrichto> surely this doesn't have to be that complicated
[21:09:54] <WindowsBunny> acrichto: If some production company needs to use rust with a different version of msvc, and it is unacceptable for them to build their own rust, then we will have to go that route
[21:11:13] <WindowsBunny> acrichto: unless we manage to make libstd have zero dependencies on the CRT
[21:11:31] *** Quits: dcb (dcb@moz-4hh.6p3.217.74.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:11:37] <WindowsBunny> then libstd would be CRT ABI independent
[21:11:48] <acrichto> we do at least have some C code linked into libstd
[21:11:51] <acrichto> which has CRT dependencies
[21:12:01] <acrichto> but we may be able to omit those entirely on windows perhaps
[21:12:19] <acrichto> it's all tiny stuff anyway and mostly just related to header madness on linux
[21:12:34] <WindowsBunny> there's also compiler-rt
[21:12:36] *** Joins: dcb (dcb@moz-4hh.6p3.217.74.IP)
[21:12:47] <WindowsBunny> we include compiler-rt and always link to that
[21:12:55] <acrichto> that has no msvc dependencies though I believe
[21:12:58] <acrichto> it's 100% standalone
[21:13:00] <acrichto> (and compiled with gcc)
[21:13:47] <WindowsBunny> well, we'd just need to carefully audit everything that a stable rust program can link to from the rust distribution, and ensure there is no dependence on the CRT whatsoever
[21:14:12] <WindowsBunny> and then we'd be freeeeeeeeee!
[21:23:42] *** Quits: avikpal_ (avikpal@moz-ovp.8df.232.117.IP) (Connection closed)
[21:31:04] <brson> running a regression report from 1.0 stable to today's nightly
[21:31:11] <steveklabnik> \O/
[21:31:16] <brson> i'll do one from stable to beta tomorrow once the beta is done
[21:31:25] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[21:32:27] *** Joins: nodweber_ (nodweber@moz-knt.fgq.178.5.IP)
[21:32:40] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[21:32:50] *** rkruppe_ is now known as rkruppe
[21:32:55] *** Quits: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP) (Ping timeout: 121 seconds)
[21:35:51] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[21:36:46] <pcwalton> nmatsakis: https://github.com/rust-lang/rust/pull/26173 looks good to me -- what the next steps for it?
[21:37:22] <nmatsakis> pcwalton: I should finish my review, I can do that now, I've been neglecting my queue :( but then I guess we can land!
[21:37:34] <pcwalton> gentle ping then on it
[21:37:36] <pcwalton> :)
[21:37:38] <pcwalton> I really want it
[21:39:51] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[21:41:51] <steveklabnik> brson: ping re https://github.com/rust-lang/rust/pull/24477, is this PR still important?
[21:44:14] <brson> steveklabnik: no, closed
[21:44:25] <steveklabnik> roger :)
[21:46:29] *** Quits: Skyler (Skyler@moz-rv949t.sd.cox.net) (Client exited)
[21:48:50] *** Joins: James_ (quassel@moz-8qs8a3.range86-148.btcentralplus.com)
[21:52:15] *** Quits: dcb (dcb@moz-4hh.6p3.217.74.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:00:35] *** Joins: dcb (dcb@moz-4hh.6p3.217.74.IP)
[22:01:33] *** Quits: skeuomorf (skeuomorf@moz-d5k.lok.32.197.IP) (Ping timeout: 121 seconds)
[22:02:32] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[22:03:16] <kimundi> Hm, can anyone point me at the lifetime bug issue that prevents the new scoped() API proposal from being sound?
[22:04:51] <arielb1> why does method probing work on the fcx's fullfillcx
[22:04:54] <arielb1> ?
[22:05:48] <steveklabnik> kimundi: https://github.com/rust-lang/rust/issues/24292
[22:05:51] <steveklabnik> oh wait
[22:05:52] <steveklabnik> you said NEW
[22:05:53] <steveklabnik> sorry :(
[22:06:21] *** Quits: James_ (quassel@moz-8qs8a3.range86-148.btcentralplus.com) (Ping timeout: 121 seconds)
[22:08:15] <aturon> kimundi: i'm not sure an issue has actually been filed
[22:08:33] <aturon> kimundi: but nmatsakis has been working on a couple RFCs dealing with that and other soundness holes
[22:08:37] <kimundi> aturon: Hm... 
[22:08:56] <kimundi> I'd be interested in tracking any of those :)
[22:10:07] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[22:10:28] <aturon> kimundi:  https://gist.github.com/nikomatsakis/fc631c87f30d4441ad0c
[22:10:46] <aturon> (he's made a lot of progress since then though)
[22:10:48] <kimundi> aturon: thanks!
[22:10:58] <aturon> (but i'm not sure whether the RFC branches are pushed)
[22:14:20] <kimundi> geez, thats a lot of text. And here I thought Rusts managed to arrive comparativly sound at 1.0 :)
[22:16:54] <aturon> kimundi: can't it be both? :)
[22:18:39] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: Lost terminal)
[22:18:49] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[22:18:49] *** ChanServ sets mode: +o brson
[22:19:13] <acrichto> aturon: r? https://github.com/rust-lang/rust/pull/26160
[22:23:17] *** Joins: p1start (p1start@moz-nftjhe.org)
[22:24:11] <acrichto> pnkfelix: ping
[22:24:24] <pnkfelix> acrichto: pong
[22:25:15] <acrichto> pnkfelix: I've got a test of yours failing after an LLVM update, and I"m wondering if you can help me debug it?
[22:25:23] <acrichto> and ofc it only fails on osx...
[22:25:27] <pnkfelix> acrichto: which test?
[22:25:46] <acrichto> pnkfelix: issue-23611-enum-swap-in-drop
[22:25:53] <pnkfelix> oy
[22:25:56] <acrichto> oh wait, hm
[22:25:59] <acrichto> it fails unoptimized
[22:26:02] <acrichto> but passes optimized
[22:26:13] *** Joins: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com)
[22:26:15] <acrichto> so, my first question is, does our backend ever emit breakpoint instructions?
[22:26:21] <acrichto> e.g. why `int3` would show up in the instruction stream
[22:26:23] <pnkfelix> acrichto: yes
[22:26:26] <pnkfelix> acrichto: in particular
[22:26:34] <pnkfelix> acrichto: the drop-flag consistency check
[22:26:38] <acrichto> the logs also look like: https://gist.github.com/alexcrichton/187a070b741c7555178d
[22:26:40] <pnkfelix> acrichto: issues int3 when the check fails
[22:26:41] <acrichto> interesting
[22:26:46] <acrichto> which part of the check?
[22:26:59] <pnkfelix> acrichto: So this is usually a sign that the drop flag was filled with an unexpected value
[22:27:08] <acrichto> hmm
[22:27:18] <pnkfelix> acrichto: because we try to confirm that it is one of the two expected values
[22:27:33] <acrichto> the init or dropped values?
[22:27:42] <pnkfelix> acrichto: the reason it may be working on optimized builds
[22:28:11] <pnkfelix> acrichto: is that I am not sure if we emit the consistency checks unless you have the checked-mode stuff turned on, analogous to arith-overflow checks
[22:28:19] <pnkfelix> acrichto: (I cannot remember off hand)
[22:28:27] <acrichto> aha
[22:28:34] <acrichto> ok that makes sense
[22:28:39] <acrichto> well... kinda
[22:28:58] <pnkfelix> acrichto: right, it checks if the drop flag is set to either the "i-am-initialized" value or to the "i-was-moved-or-dropped-already" value
[22:29:23] <pnkfelix> acrichto: I helped SimonSapin debug one of these earlier this week; I usually jump into a debugger for it
[22:29:34] *** Joins: nham (nham@moz-lglsfe.il.comcast.net)
[22:29:36] <pnkfelix> acrichto: I am quite surprised, however, that you are only seeing this on Mac OS X for that test
[22:29:46] <pnkfelix> acrichto: that test was meant to be pretty platform agnostic, I had thought ...
[22:29:51] <acrichto> oh no it just turned out OSX tests weren't optimized but linux was
[22:29:57] <acrichto> but unoptimized on linux also fails
[22:29:59] <acrichto> same bug
[22:30:02] <pnkfelix> acrichto: okay
[22:30:07] <acrichto> I'll try to see what value it was filled in with at least
[22:30:15] <pnkfelix> acrichto: great, I was going to suggest that
[22:31:03] <acrichto> I think it's... 0?
[22:31:10] <acrichto> (lldb) print/x $eax
[22:31:10] <acrichto> (unsigned int) $1 = 0x1d1d1d00
[22:31:20] <acrichto> and a bunch of instructions are checking %al
[22:33:02] *** Joins: Quxxy (chatzilla@moz-efh10q.internode.on.net)
[22:42:43] *** Quits: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net) (Client exited)
[22:42:49] <pnkfelix> acrichto: oh sorry i looked away
[22:43:46] <acrichto> pnkfelix: ah no worries, trying to reduce the test case
[22:44:06] <pnkfelix> acrichto: 0x1d is indeed the drop-fill-byte
[22:44:13] <pnkfelix> acrichto: i.e. it marks something as dropped or moved
[22:44:23] <pnkfelix> acrichto: but the drop-flag itself was not 
[22:45:07] <pnkfelix> acrichto: (at least if I remember how bytes are ordered in $eax ...)
[22:45:24] <acrichto> yeah that'd do it
[22:45:31] <acrichto> e.g. $eax is the lowest byte
[22:45:34] <acrichto> er, %al
[22:46:01] <acrichto> playbot: format!("{:x}", -44)
[22:46:02] -playbot- "ffffffd4"
[22:46:14] <acrichto> pnkfelix: does 0xd4 look familiar?
[22:46:22] *** Quits: andrew-d_w (andrew-d_w@moz-f7k.iq2.247.50.IP) (Connection closed)
[22:46:32] *** Joins: andrew-d_w (andrew-d_w@moz-f7k.iq2.247.50.IP)
[22:47:00] <arielb1> why does RFC 447 doesn't apply to inherent impls?
[22:47:10] <pnkfelix> acrichto: yes that's that's the "i-am-initialized" value for the drop flag
[22:47:22] <pnkfelix> acrichto: i.e. "I need to have my destructor run at the end of my scope"
[22:47:28] <acrichto> pnkfelix: and the drop flag is at the end of the struct in memory?
[22:47:32] <pnkfelix> acrichto: exactl
[22:47:54] <pnkfelix> acrichto: have you by the way
[22:48:03] <pnkfelix> acrichto: checked wheter `-O -C debug-assertions`
[22:48:08] <pnkfelix> acrichto: reproduces the bug?
[22:48:46] <acrichto> pnkfelix: does not repro
[22:49:08] <pnkfelix> acrichto: hmm. Maybe my memory is wrong about what puts it back.  Maybe its only a -Z switch.  let me chek
[22:49:30] <acrichto> pnkfelix: oh wait hm, are you familiar with the change I made from 'unreachable => ret void' ?
[22:49:48] <pnkfelix> yes I remember seeing that
[22:50:00] <acrichto> so that's still in this enum's drop impl
[22:50:03] <acrichto> and I wonder if that's the bug
[22:50:07] <acrichto> if that just  needs to be a `ret void`
[22:50:09] <pnkfelix> I had thought it would be compatible
[22:50:22] <pnkfelix> oh you're saying its still producing `unreachable` there?
[22:50:34] <acrichto> yeah
[22:50:36] <pnkfelix> ah
[22:50:46] <pnkfelix> that definitely sounds like a potential smoking gun
[22:50:48] <acrichto> I think if the enum has an explicit Drop impl a different code path is taken?
[22:51:28] <acrichto> pnkfelix: e.g. https://github.com/alexcrichton/rust/blob/update-llvm/src/librustc_trans/trans/adt.rs#L1032-L1033
[22:51:44] <WindowsBunny> Where do we define the int main method which calls lang_start?
[22:51:48] <acrichto> I only fixed https://github.com/alexcrichton/rust/blob/update-llvm/src/librustc_trans/trans/base.rs#L484-L498
[22:52:34] <pnkfelix> acrichto: I have no idea ofhand what's going on there
[22:52:54] <acrichto> ah oh well, b/c neither do I :P
[22:53:02] <arielb1> I think `impl<T: IntoIterator> Trait for <T as IntoIterator>::Item` is ought to violate RFC447
[22:53:13] <arielb1> or give E0207
[22:53:18] <arielb1> cc nmatsakis: ^
[22:53:24] <pnkfelix> acrichto: Can you easily change the `unr_cx` to be another "ret void"?  Or is that not right in this context? Hmm...
[22:53:35] <acrichto> pnkfelix: but bingo! I see a spot where we memset the memory to 0x1d and then we'd hit the unreachable block
[22:53:47] <acrichto> pnkfelix: I've made the change to move that to RetVoid (waiting for the compile now)
[22:53:54] *** Joins: andrew-__ (andrew-d_w@moz-121.iq2.247.50.IP)
[22:53:56] <pnkfelix> acrichto: okay cool
[22:54:05] <acrichto> pnkfelix: confirmed fix
[22:54:12] <pnkfelix> acrichto: sweet
[22:54:15] <acrichto> pnkfelix: cool, thank!
[22:55:07] *** Quits: sp3d (sp3d@moz-ik970v.enn1.s22b.000d.2601.IP) (Ping timeout: 121 seconds)
[22:55:21] <arielb1> the inherent impl version of that works
[22:56:17] <arielb1> I mean, impl<T: Trait> Foo<T::Assoc>
[22:56:35] <arielb1> for some value of works that includes the occasional ICE (of course)
[22:56:54] *** Joins: sp3d (sp3d@moz-ik970v.enn1.s22b.000d.2601.IP)
[22:57:34] *** Quits: andrew-d_w (andrew-d_w@moz-f7k.iq2.247.50.IP) (Ping timeout: 121 seconds)
[22:57:38] *** Joins: andrew-d_w (andrew-d_w@moz-121.iq2.247.50.IP)
[22:57:46] *** Quits: arielb1 (Ariel@moz-7ip.m8n.66.109.IP) (Quit: Ex-Chat)
[22:57:54] *** Quits: andrew-d_w (andrew-d_w@moz-121.iq2.247.50.IP) (A TLS packet with unexpected length was received.)
[22:57:56] *** Quits: andrew-__ (andrew-d_w@moz-121.iq2.247.50.IP) (Ping timeout: 121 seconds)
[22:58:15] *** Joins: andrew-d_w (andrew-d_w@moz-f7k.iq2.247.50.IP)
[22:58:15] *** Quits: chc4 (chc4@moz-pdo0at.ma.comcast.net) (Ping timeout: 121 seconds)
[22:58:48] <WindowsBunny> wow, our lang_start on windows is so....useless
[22:59:02] <WindowsBunny> a bunch of stack math that doesn't matter because no __morestack
[22:59:19] <WindowsBunny> and we pretend to store the args, but the impl of args::init on windows is empty
[23:02:34] *** Quits: bdero (bran@moz-lbs.91h.47.73.IP) (Connection closed)
[23:02:36] *** Quits: nodweber_ (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[23:02:42] *** Joins: bdero (bran@moz-0e2lk5.sns9.e6pb.0197.2601.IP)
[23:05:13] <WindowsBunny> sys::thread::guard::init does nothing as well
[23:05:37] *** Quits: erz (erz@moz-fiq1tl.broadband.corbina.ru) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:05:37] <WindowsBunny> Oh okay, so on Windows we at least add a stack overflow handler
[23:06:23] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[23:07:37] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[23:07:43] *** Quits: _Vi (vi@moz-bbs.vhj.131.104.IP) (Ping timeout: 121 seconds)
[23:07:44] <WindowsBunny> So many functions, and all it does is install a stack overflow handler
[23:08:27] *** Quits: dcb (dcb@moz-4hh.6p3.217.74.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:08:48] *** Joins: dcb (dcb@moz-4hh.6p3.217.74.IP)
[23:13:21] *** Quits: yjv (yjv@moz-j0cdis.fios.verizon.net) (Connection closed)
[23:14:42] <WindowsBunny> acrichto: I got an improved list of CRT functions we link to :D
[23:15:25] *** Quits: dcb (dcb@moz-4hh.6p3.217.74.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:15:48] <WindowsBunny> now to cross reference all functions that are not math functions to see where they are called
[23:17:43] <acrichto> WindowsBunny: nice!
[23:17:51] *** Joins: dcb (dcb@moz-4hh.6p3.217.74.IP)
[23:18:06] <acrichto> WindowsBunny: by my count these are the non-libm-like ones: https://gist.github.com/alexcrichton/ba510ac8d94e5f8893a4
[23:20:29] *** Joins: _Vi (vi@moz-bbs.vhj.131.104.IP)
[23:22:12] <WindowsBunny> we can get rid of CStr's use of strlen, adjust liballoc to invoke HeapAlloc directly on msvc
[23:22:27] <WindowsBunny> and the memory operations will need optimized implementations from.... somewhere
[23:25:05] *** Quits: dcb (dcb@moz-4hh.6p3.217.74.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:25:25] <WindowsBunny> I'm gonna do an experimental PR messing with liballoc
[23:27:23] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[23:27:48] <WindowsBunny> oh good, we already have an imp section specifically for Windows
[23:28:18] *** Joins: dcb (dcb@moz-4hh.6p3.217.74.IP)
[23:30:10] <WindowsBunny> ick, HeapAlloc only aligns to 8 bytes, so we'll need a wrapper for > 8
[23:38:09] <WindowsBunny> oh god, the implementation for aligned_malloc is gross
[23:39:56] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[23:40:42] * seanmonstar grabs popcorn
[23:52:41] *** Quits: dcb (dcb@moz-4hh.6p3.217.74.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:55:54] *** Joins: dcb (dcb@moz-4hh.6p3.217.74.IP)
[23:57:11] *** Quits: dcb (dcb@moz-4hh.6p3.217.74.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:57:38] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
