[00:00:49] <acrichto> strcat: it got snapshotted?
[00:00:57] <strcat> acrichto: uhh, no nvm
[00:01:04] <strcat> I'm just confused due to a weird thing I did
[00:13:33] <strcat> acrichto: I think we could pass bool as i1, not sure
[00:13:47] <strcat> acrichto: clang passes them as i1 zeroext
[00:13:53] <strcat> but I don't know if that matters for an ABI reason
[00:13:59] <strcat> we only need to *store* them as i8 (alloca/struct)
[00:14:24] <strcat> passing as i8 sucks
[00:14:35] <strcat> since LLVM won't know it's 0 or 1
[00:14:51] <strcat> storing as i8 is fine since a load instruction has a range assert
[00:15:33] <acrichto> makes sense
[00:15:46] <acrichto> I don't think we could seamlessly use the intrinsics anyway though
[00:19:42] <strcat> acrichto: yeah because they need a constant
[00:19:44] <strcat> I think
[00:20:09] <strcat> if we end up having a gcc backend we'll have so many intrinsics ;s
[00:21:00] <acrichto> does gcc have more than llvm?
[00:21:16] <acrichto> note: consider removing this semicolon
[00:21:20] <acrichto> I will indeed consider removing it!
[00:21:26] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[00:21:26] *** ChanServ sets mode: +ao pcwalton pcwalton
[00:21:34] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[00:21:41] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[00:21:41] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/BKItXA
[00:21:42] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[00:25:26] * acrichto finally got libstd building without io_error
[00:26:36] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[00:26:36] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/KiRjhA
[00:26:37] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[00:26:39] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[00:26:39] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/py1BUA
[00:26:39] <ghrust> 13rust/06auto 148a71b53 15Virgile Andreani: Rename CopyableVector to CloneableVector
[00:26:39] <ghrust> 13rust/06auto 148642601 15Virgile Andreani: Rename OwnedCopyableVector to OwnedCloneableVector
[00:26:39] <ghrust> 13rust/06auto 140c081af 15Virgile Andreani: Rename ImmutableCopyableVector to ImmutableCloneableVector
[00:26:41] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[00:28:43] *** Quits: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP) (Input/output error)
[00:31:20] *** Joins: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP)
[00:39:27] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[00:48:51] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[00:54:01] *** Joins: lpy (lpy@4F2FE573.2EDA7147.E99F7FDB.IP)
[00:56:13] *** Quits: lpy (lpy@4F2FE573.2EDA7147.E99F7FDB.IP) (Ping timeout)
[01:01:17] *** Quits: dherman (dherman@moz-21F91504.cfw-a-gci.corp.yahoo.com) (Quit: dherman)
[01:01:39] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[01:01:40] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14acd4dcd to 14f84b729: 02http://git.io/N3iJvQ
[01:01:40] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[01:01:40] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[01:01:40] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/KxHgHw
[01:01:40] <ghrust> 13rust/06auto 148a71b53 15Virgile Andreani: Rename CopyableVector to CloneableVector
[01:01:40] <ghrust> 13rust/06auto 148642601 15Virgile Andreani: Rename OwnedCopyableVector to OwnedCloneableVector
[01:01:40] <ghrust> 13rust/06auto 140c081af 15Virgile Andreani: Rename ImmutableCopyableVector to ImmutableCloneableVector
[01:01:43] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[01:02:00] *** flaper87 is now known as flaper87|afk
[01:02:04] *** kimundi is now known as zz_kimundi
[01:08:55] <brson> acrichto: \o/
[01:18:06] *** Quits: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca) (Quit: canhtak)
[01:18:41] *** Joins: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca)
[01:18:52] *** Quits: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw) (Ping timeout)
[01:22:57] *** Joins: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw)
[01:24:46] *** Quits: pnkfelix (pnkfelix@moz-B1D2E7D0.pck.nerim.net) (Quit: rcirc on GNU Emacs 24.3.1)
[01:26:33] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[01:35:02] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[01:36:10] *** Quits: SimonSapin (simon@moz-9A1FE870.exyr.org) (Ping timeout)
[01:37:53] *** Joins: SimonSapin (simon@moz-9A1FE870.exyr.org)
[01:39:53] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:40:30] <cmr> I'm warming up to this round of github's redesign.
[01:43:41] <Eridius> I like this redesign
[01:43:46] <Eridius> I just wish they'd spend some effort making issues more usable
[01:43:58] <cmr> yeah.
[01:44:00] <Eridius> e.g. letting me favorite issues, or even just see the issues I'm CC'd on
[01:44:11] <cmr> from my perspective, github has basically stagnated ;(
[01:44:21] <Eridius> :/
[01:44:26] <cmr> maybe there's lots going on underneath, but it doesn't seem to benefit me as a user.
[01:44:41] <larsberg> eridius: or add a label without owning the repo
[01:44:57] <Eridius> larsberg: private labels would be nice, basically a generalization of favorites
[01:44:58] <cmr> larsberg: or be able to let people manage issues without having commit access
[01:45:07] <larsberg> cmr: supposedly we don't use it like most of their customers, who normally give all their users commit access to a shared repo and do everything as branches on that repo
[01:45:16] <Eridius> cmr: I feel like GitHub doesn't have any good competition, so if something is Good Enough it doesn't change much
[01:45:25] <larsberg> so lots of features (e.g., the new "edit branch in place") don't work for our workflow
[01:45:39] <Eridius> yeah, it would be nice if you could disable the inline code editor for a repo
[01:45:50] <Eridius> or really, just have more fine-grained permissions in general
[01:46:18] <cmr> My interactions with gitlab and bitbucket have been super positive
[01:46:23] *** Quits: SimonSapin (simon@moz-9A1FE870.exyr.org) (Ping timeout)
[01:46:49] <Eridius> I haven't looked at bitbucket since they added Git support
[01:47:14] <Eridius> although I have looked at a couple of repos in order to find the ppa string for Ubuntu, and I found the repo page to be rather crowded and confusing :/
[01:47:23] <Eridius> as stagnant as GitHub is, they do have a pleasing clean design
[01:47:31] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[01:47:48] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[01:47:56] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[01:49:40] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[01:52:30] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[01:53:50] *** Quits: b (b@moz-55CA322E.org) (Quit: !)
[01:54:46] *** Joins: lpy (lpy@4F2FE573.2EDA7147.E99F7FDB.IP)
[01:55:39] *** Joins: b (b@moz-55CA322E.org)
[01:55:44] *** Quits: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP) (Input/output error)
[01:56:22] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[01:56:50] *** Quits: lpy (lpy@4F2FE573.2EDA7147.E99F7FDB.IP) (Ping timeout)
[01:56:56] *** Joins: SimonSapin (simon@moz-9A1FE870.exyr.org)
[02:10:16] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[02:10:16] *** ChanServ sets mode: +ao pcwalton pcwalton
[02:12:50] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:17:32] <strcat> acrichto: can confirm that rpaths are now gone btw
[02:21:34] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[02:21:35] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/KxHgHw
[02:21:35] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[02:23:30] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[02:23:58] *** Quits: jdm (jdm@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: Lost terminal)
[02:24:07] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[02:25:49] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[02:26:32] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[02:26:32] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/QiZLhw
[02:26:32] <ghrust> 13rust/06auto 147a93157 15Johannes Muenzel: Check enum and struct representability properly (issues #3008 and #3779)
[02:26:32] <ghrust> 13rust/06auto 14b46c0da 15Johannes Muenzel: Add compile-fail tests for non-representable structs and enums
[02:26:32] <ghrust> 13rust/06auto 14895d6c9 15bors: auto merge of #11839 : typelist/rust/issue3008, r=huonw...
[02:26:35] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[02:28:53] *** Quits: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca) (Quit: canhtak)
[02:51:01] *** Joins: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca)
[02:51:04] *** Joins: dbaupp (Thunderbir@5A4F80CD.D5A1DCF.37681C44.IP)
[02:51:09] <cmr> acrichto: is there a way to get the dir libstd etc get output to in rmake tests?
[02:51:53] <acrichto> cmr: no, but we can always pass it in
[02:52:07] <cmr> ok, I could pass it in if I knew what it was called.
[02:52:21] <acrichto> are you intersted in the host or target version?
[02:52:26] <cmr> hm
[02:52:28] <acrichto> or rather what's it going to be used for?
[02:52:44] <cmr> trying to write a test for the (lib.dylib.is_none()) assertion
[02:53:07] <acrichto> out of curiosity how'd you fix it?
[02:53:09] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[02:53:10] <acrichto> (a bit of a tangent)
[02:53:18] <acrichto> I tried to fix it this morning but wasn't satisfied with the fix
[02:53:28] <cmr> xales is working on it..
[02:53:38] <cmr> what was the fix you were unsatisfied with?
[02:53:42] <xales> I'm doing the thing cmr told me to do, but I don't think it will work now that I think about it
[02:53:47] <acrichto> printing out all the candidates 
[02:53:52] <acrichto> a legit compiler error
[02:54:03] <acrichto> there's a few issues going on here
[02:54:20] <acrichto> we don't read the metadata of dylib/rlib pairs to make sure that they're the same
[02:54:34] <acrichto> but then we validate that we only fine one library of type X once we've found a library of type Y
[02:54:36] <cmr> I think the easiest thing to fix is -L /usr/local/lib shouldn't break..
[02:54:42] <acrichto> it's kinda all conflated together
[02:54:47] <acrichto> that *should* break actually
[02:54:59] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[02:55:00] <acrichto> the version of libstd in /usr/local/lib is different from /usr/local/lib/$target
[02:55:11] <acrichto> a little counterintuitive, though
[02:55:26] <acrichto> and we're expecting libs to go in /usr/local/lib, so I'm beginning to think this is a broader issue
[02:55:30] <cmr> that's wrong actually
[02:55:31] *** Joins: lpy (lpy@4F2FE573.2EDA7147.E99F7FDB.IP)
[02:55:43] <cmr> it should be /usr/$TARGET/lib and /usr/local/$TARGET/lib
[02:55:47] <cmr> I meant to bring this up before
[02:56:09] <cmr> That's how cross compilation works in the wider ecosystem
[02:56:11] <acrichto> I guess technically it's actually /usr/local/rustlib/$target/lib
[02:56:19] <cmr> If we need to we can stuff things int /usr/local/$target/rustlib
[02:56:27] <cmr> (though I don't know why it'd be necessary)
[02:56:30] <acrichto> does everyone else use target triples like we do?
[02:56:39] <cmr> what do you mean
[02:56:41] <cmr> ?
[02:56:49] <acrichto> our target libs are named by the target triple
[02:56:55] <acrichto> on linux I think they're just the architecture
[02:56:59] <acrichto> b/c it's assumed that the platform is linux
[02:57:08] <cmr> I have a /usr/{arm-linux-gnueabi,i486-mingw32,i686-w64-mingw,x86_64-w64-mingw32,x86_64-unknown-linux-gnu}/*
[02:57:18] <acrichto> I stand corrected!
[02:57:19] <acrichto> nevermind!
[02:57:34] <cmr> What we do isn't special, we just organize it wrongly on the filesystem.
[02:57:41] *** Quits: lpy (lpy@4F2FE573.2EDA7147.E99F7FDB.IP) (Ping timeout)
[02:57:55] <acrichto> hmm...
[02:58:45] <xales> cmr: yeah, so that doesn't actually fix the issue at all :p
[02:58:59] <acrichto> my basic conclusion is that we should actually be reading the metadata of *all* libraries
[02:59:05] <cmr> xales: sorry for the rabit hole ;(
[02:59:09] <acrichto> but the problem is that it's slow...
[02:59:13] <acrichto> xales: yeah sorry about that :(
[02:59:28] <xales> cmr: well, I only changed one line, you should be more sorry about making me touch trans >_>
[02:59:36] <xales> :p
[02:59:49] <acrichto> cmr: actually, the hash is only based on the crate id now
[02:59:57] <cmr> brson: have we looked into open badges recently? is it still a super pain to get started with?
[02:59:58] <acrichto> cmr: so in theory we don't even need to read the metadata to see if it's the right library
[03:00:51] <cmr> brson: I'd be interested in setting it up even if it is..
[03:01:28] <cmr> acrichto: we could also reorganize metadata slightly so that we don't need to read all of it to find what we're looking for
[03:01:41] <acrichto> that is also very true
[03:01:44] <cmr> read elf header, find where metadata section is, read the first X bytes to check if it's what we need.
[03:01:49] <acrichto> llvm's mmap implementation is super fast
[03:02:01] <cmr> mm
[03:02:10] <cmr> ebml is really bad :(
[03:02:27] <acrichto> I'm still amused by how our metadata is like 10x bigger than the source :P
[03:02:30] <acrichto> it's like 50MB for libstd
[03:02:47] <cmr> well it's basically most of libstd's ast since everything is generic, isn't it?
[03:03:01] <acrichto> yeah
[03:03:40] <strcat> cmr: and everything else is #[inline]
[03:06:55] <brson> cmr: i have been looking into it recently
[03:07:39] <brson> cmr: badges.mozilla.org works ok now but supposedly they are going to have new tools for creating them soon
[03:09:58] <brson> i have a little concern about how badges are owned and awarded. i'd like to have multiple people responsible for them, but i'm not clear on how it works
[03:11:47] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[03:13:06] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[03:13:37] <brson> cmr: here's a template for designing badge systems https://docs.google.com/spreadsheet/ccc?key=0AnUOR-0CBMsTdE1hWnJnYXlNdnktVUlhWWdjVzFVR0E#gid=0
[03:14:03] <cmr> whoa the macarthuer foundation was involved with open badges? that's cool.
[03:15:17] <brson> supposedly badgekit is what we should use for making open badges, but it's not ready yet http://badgekit.openbadges.org/
[03:22:07] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[03:23:50] <cmr> brson: thanks
[03:26:31] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[03:26:31] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14895d6c9 to 14704f93f: 02http://git.io/N3iJvQ
[03:26:31] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[03:26:32] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[03:26:32] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/EwO8tg
[03:26:32] <ghrust> 13rust/06auto 146e015b4 15JeremyLetang: Add test case for issue 7911
[03:26:32] <ghrust> 13rust/06auto 14016cd96 15bors: auto merge of #11898 : JeremyLetang/rust/issue-7911, r=alexcrichton...
[03:26:33] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[03:28:22] *** Quits: zz_kimundi (kimundi@moz-F50B31A7.dip0.t-ipconnect.de) (Ping timeout)
[03:32:15] *** Joins: zz_kimundi (kimundi@moz-260B6EEA.dip0.t-ipconnect.de)
[03:32:17] *** zz_kimundi is now known as kimundi
[03:33:32] <cmr> brson: the reason I ask is that I have quite a few interested Rust contributors here, and badges would be a sweet way to gain interest.
[03:34:50] <cmr> (or, potential Rust contributors, that is)
[03:35:01] <cmr> xales is only the first of many who will fall to my influence!
[03:35:10] <dbaupp> cmr: stickers hold no sway?
[03:35:22] <cmr> dbaupp: everyone got stickers from the workshops I gave at the beginning of last semester ;(
[03:36:10] <dbaupp> hahaha :)
[03:38:29] <brson> cmr: let's make some badges
[03:39:03] <cmr> atm I'm doing homework, but can later.
[03:44:56] <ChrisMorgan> What types of badges?
[03:45:40] <cmr> ChrisMorgan: http://openbadges.org/
[03:45:49] <ChrisMorgan> I mean, badges for what?
[03:46:16] <ChrisMorgan> (I'm passingly familiar with OpenBadges.)
[03:47:18] *** Joins: lpy (lpy@4F2FE573.2EDA7147.E99F7FDB.IP)
[03:51:05] <brson> ChrisMorgan: committing, writing docs, fixing 1.0 bugs, blogging, helping rust
[03:51:46] <ChrisMorgan> I presume "helping rust" would include cmr-style evangelism?
[03:51:59] <brson> probably have badges for silly things too, not just contributions
[03:52:38] <brson> ChrisMorgan: yeah, evangelism badges
[03:53:03] <cmr> "Answered own question on IRC" :D
[03:53:17] <cmr> "Accidentally pushed directly to master"
[03:53:26] <brson> nice, yes
[03:53:31] <cmr> "Accidentally closed issue when commenting"
[03:53:32] <bjz> r? https://github.com/mozilla/rust/pull/11672
[03:53:42] <brson> badge for # of bors failures on a single pr
[03:53:43] <bjz> (removal of std::num::Times)
[03:53:49] <cmr> Hahah, definitely
[03:53:59] <cmr> "Closed own issue with pull request"
[03:54:14] <cmr> "Triaged own issue more than X months later"
[03:54:19] *** Joins: Diamond (dick@moz-80556682.ks.ks.cox.net)
[03:54:21] <cmr> "Had issue open for more than X months"
[03:54:34] <brson> closed issue <1000
[03:54:41] <brson> closed issue < 2000, etc
[03:54:43] <cmr> mm
[03:55:10] <ChrisMorgan> "Did something‚Äîanything‚Äîwith the Rust logo"
[03:55:41] <cmr> "Posed with Rust logo next to oxidized metal"
[03:56:26] <ChrisMorgan> "Suggested a silly Rust badge"
[03:56:40] <cmr> meta
[03:56:50] <cmr> Suggesting a badge is a good thing to have a badge for though
[03:57:00] <bjz> "Contributed to borrowk or typeck"
[03:57:01] <cmr> "Renamed a type in the compiler"
[03:57:07] <cmr> "Found soundness hole"
[03:57:30] <cmr> "Commit incorrect unsafe code"
[03:58:03] <cmr> "Write documentation for something undocumented"
[03:58:07] <cmr> "Fix an xfailed issue"
[03:58:19] <cmr> s/issue/test/
[03:59:03] * dbaupp gives ChrisMorgan a badge for suggesting a badge for suggesting a badge
[04:02:22] <cmr> "More than N pull requests submitted"
[04:02:41] <cmr> similarly for N issues
[04:02:50] <cmr> "Write a library"
[04:02:55] <cmr> "Write an application"
[04:03:03] <cmr> "Deploy a Rust application in production"
[04:03:21] <cmr> That reminds me that we need a test coverage tool
[04:03:58] <cmr> I wonder if LLVM has anything builtin for verifying that every basic block in a module was executed...
[04:05:11] <dbaupp> isn't that basically what gcov does?
[04:05:33] <cmr> for the most part
[04:06:26] <cmr> gcov is gcc-specific, which is why it's undesirable
[04:06:34] <cmr> I wonder how hard it is to generate the instrumentation it wants
[04:06:36] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[04:06:36] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14016cd96 to 14704f93f: 02http://git.io/N3iJvQ
[04:06:36] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[04:06:41] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[04:06:41] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/0K9B4Q
[04:06:41] <ghrust> 13rust/06auto 14729060d 15Brendan Zabarauskas: Remove Times trait...
[04:06:41] <ghrust> 13rust/06auto 143cb72a3 15bors: auto merge of #11672 : bjz/rust/remove-times, r=brson...
[04:06:41] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[04:06:51] <dbaupp> are there any tools that do it based on normal DWARF debuginfo?
[04:07:22] *** Quits: gwty (gwtypc@4014B10F.C875E086.8A00C703.IP) (Ping timeout)
[04:07:51] <cmr> hm, http://expcov.com/ is a thing
[04:09:34] <cmr> hm single stepping in gdb could be a super hacky way to achieve, given that we have perfect debuginfo
[04:10:05] <cmr> (http://libre.adacore.com/uploads/project_coverage.pdf)
[04:10:26] <cmr> I love that Ada pioneered all the infrastructure we need in the gnu tools for the most part
[04:11:06] <cmr> http://code.google.com/p/coverstory/wiki/UsingCoverstory
[04:11:08] <cmr> whoaaaa
[04:11:15] <cmr> iOS 7 doesn't have any life after main
[04:11:33] <cmr> pcwalton: ^
[04:11:44] <cmr> that's another good reason for us to continue not to have it, imo
[04:11:50] <pcwalton> life before main or after?
[04:11:59] <cmr> after..
[04:11:59] <aatch> yes
[04:12:03] <cmr> no before main either?
[04:12:05] <cmr> even better
[04:12:29] * pcwalton tells strcat "I told you so" :)
[04:12:34] <aatch> cmr, we have neither. Which can be frustrating at times, but overall it's better.
[04:12:48] <cmr> I know that *we* have neither, thinking about iOS7 right now.
[04:12:51] <pcwalton> life before main was a *huge* issue in Firefox
[04:12:58] <pcwalton> it's just too insidious of a performance problem
[04:17:37] <cmr> hmm, http://llvm.org/releases/3.1/docs/CommandGuide/html/llvm-cov.html
[04:17:50] <cmr> looks like it stopped existing though
[04:18:06] <bjz> does next_power_of_two only make sense for unsigned integers?
[04:18:38] <cmr> bjz: to me, yes.
[04:19:11] <cmr> http://llvm.org/svn/llvm-project/compiler-rt/trunk/lib/profile/GCDAProfiling.c
[04:19:22] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[04:22:16] <cmr> Ok, so it looks like if we use compiler-rt and run the insert-gcov-profiling pass, we can get it..
[04:22:51] <Eridius> cmr: how does iOS not have life after main? C++ destructor on a static shoudl do it
[04:23:02] <Eridius> or maybe __attribute__((destructor)) in C
[04:23:08] <cmr> Eridius: according to that coverstory page, none of those are run.
[04:23:16] <cmr> (and atexit handlers too)
[04:23:30] <cmr> I don't know where to look to confirm what it says.
[04:23:46] <Eridius> oh maybe due to how iOS shuts down apps?
[04:23:56] <Eridius> the app doesn't terminate itself. iOS terminates it
[04:29:49] <Eridius> hrm, I would expect coverstory ot have issues on Mac apps too if the app opts in to Sudden Termination
[04:36:01] <strcat> iOS is nice
[04:36:07] <strcat> it tells you you're going to the background
[04:36:21] <strcat> if you do anything else after it sends the event, death
[04:36:22] <strcat> ;p
[04:39:38] <Eridius> well, if you don't return from the background notification function within ~5 seconds, you get killed
[04:40:12] <strcat> Eridius: or if you draw anything
[04:40:25] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[04:40:34] <strcat> or probably do anything else like that
[04:40:35] <Eridius> oh if you request background time, then you can run after returning, and at that point you can't touch the screen, sure
[04:40:48] <Eridius> but if you don't request background time you don't even get the chance, because your CPU is suspended once you return from the notification
[04:41:03] <strcat> ah
[04:41:45] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[04:42:37] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: sleep)
[04:48:42] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[04:54:07] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[04:54:16] *** Quits: jxs (joaoxsouls@1FF12F4F.CDF09DE2.D6573861.IP) (Ping timeout)
[04:54:16] *** Quits: dbussink (dbussink@moz-E0A5568C.bussink.me) (Ping timeout)
[04:55:26] *** Joins: jxs (joaoxsouls@1FF12F4F.CDF09DE2.D6573861.IP)
[04:55:27] *** Joins: dbussink (dbussink@moz-E0A5568C.bussink.me)
[04:55:57] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[05:00:46] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[05:08:25] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[05:21:33] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[05:21:34] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/0K9B4Q
[05:21:34] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[05:26:31] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[05:26:31] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/uN-8_g
[05:26:31] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[05:26:31] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[05:26:31] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/_Me00Q
[05:26:31] <ghrust> 13rust/06auto 145f68142 15Seo Sanghyeon: Fix SIMD bit shifts
[05:26:31] <ghrust> 13rust/06auto 14d825902 15bors: auto merge of #11907 : sanxiyn/rust/simd-shift, r=thestinger...
[05:26:32] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[05:34:00] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[05:34:03] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[05:34:03] *** ChanServ sets mode: +ao dherman dherman
[05:38:27] <bjz> yayy
[05:38:34] <bjz> goodbye .times!
[05:38:50] <cmr> goood ridance
[05:38:51] <dbaupp> All the good .times we had together :'(
[05:38:57] <cmr> dbaupp--
[05:39:02] <cmr> 0/5, awful joke
[05:39:23] <dbaupp> well, fine
[05:39:31] <cmr> it's a shame we don't even have postfix incr/decrement
[05:39:38] * dbaupp takes his jokes some place they'll be appreciated for the masterpieces they are
[05:40:00] <cmr> dbaupp -= 1  just doesn't have the same ring to it, and doesn't work for generic types anyway :(
[05:40:14] <dbaupp> cmr -= std::num::one()
[05:46:59] *** Joins: eddyb (eddy@832D2DE5.66315F97.FB866788.IP)
[05:47:54] <eddyb> hmpf... no r+, no comments :(
[05:48:23] <dbaupp> eddyb: r+
[05:48:27] <dbaupp> feeling better?
[05:49:38] <eddyb> heh. did strcat say anything after I left?
[05:49:51] <cmr> I don't think so?
[05:49:54] <dbaupp> yes; don't know if he said anything relevant to you :P
[05:49:56] <cmr> Did you fix the issue with printing them.
[05:50:08] <eddyb> cmr: yupp
[05:50:12] <cmr> cool!
[05:50:14] * cmr goes to look
[05:50:21] <eddyb> see the one test
[05:51:31] <eddyb> https://github.com/mozilla/rust/pull/11217/files#diff-01544bfff7c234266af763592ab83284R1
[05:52:24] <dbaupp> eddyb: what about a test for printing with a non-default argument?
[05:53:01] <eddyb> ok, I'll add more combinations
[05:54:32] <dbaupp> yeah, testing say T<A, B=X, C=Y> with the 4 possible combos would be good
[05:54:41] <dbaupp> (err, 3 possibilities?)
[05:54:45] <ChrisMorgan> cmr: "Made a bad joke in #rust-internals"
[05:54:57] <cmr> ChrisMorgan: yup
[05:55:11] <dbaupp> "Made a good joke in #rust-internals"
[05:55:51] <ChrisMorgan> ***dbaupp wins that
[05:56:18] <dbaupp> "error: type dbaupp cannot be dereferenced"
[05:56:40] <dbaupp> (eh. "value of type dbaupp"?)
[05:56:44] * dbaupp isn't rustc...
[05:56:45] <eddyb> impl MutDeref for dbaupp
[05:56:50] <cmr> rusti: *()
[05:56:51] -rusti- <anon>:10:9: 10:12 error: type `()` cannot be dereferenced
[05:56:51] -rusti- <anon>:10         *()
[05:56:51] -rusti-                   ^~~
[05:56:52] -rusti- error: aborting due to previous error
[05:56:52] -rusti- application terminated with error code 101
[05:57:06] <cmr> rusti: *13
[05:57:07] -rusti- <anon>:10:9: 10:12 error: type `<generic integer #0>` cannot be dereferenced
[05:57:07] -rusti- <anon>:10         *13
[05:57:07] -rusti-                   ^~~
[05:57:07] -rusti- error: aborting due to previous error
[05:57:07] -rusti- application terminated with error code 101
[05:57:15] <eddyb> "error: MutDeref is not there yet. want to implement it?"
[05:57:20] <cmr> I actually expected it to be "value of type..."
[05:57:44] * dbaupp would r+ a change to the wording
[05:58:16] <cmr> "r+ your own PR"
[05:58:35] <cmr> "Make a breaking change"
[05:58:51] <cmr> "Write a benchmark"
[05:58:56] <cmr> "Write a testcase"
[05:58:57] <dbaupp> "Made a breaking change incorrectly, breaking everything"
[05:59:07] <eddyb> flaper87|afk: there's only two keywords that I know of that you can actually use as idents: self and static. and that's because there is a hack in the ident/keyword table allowing them to share the same place in the interner
[05:59:08] <cmr> "Optimize codegen"
[05:59:12] <cmr> "Optimize rustc's memory usage"
[05:59:18] <cmr> "Optimize a library function"
[05:59:22] <cmr> brson: you keeping track? :P
[05:59:36] <dbaupp> (is someone writing these down?)
[05:59:42] <cmr> [o__o] is!
[05:59:51] <eddyb> [o__o]: dance
[05:59:57] <cmr> I like that it looks like both a robot and a casette tape
[06:00:01] <cmr> due to its function
[06:00:04] <eddyb> cmr: hey, I've done some of those!
[06:00:15] <eddyb> and failed trying too do even more :P
[06:02:33] <dbaupp> "Have n PRs in the queue"
[06:04:46] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[06:04:52] <cmr> eddyb: is there any particular reason you aren't using format!'s built-in pluralization?
[06:04:56] <cmr> or is it not powerful enough for this
[06:05:04] *** Joins: brson (brson@6A848D32.C1B840DD.76F66111.IP)
[06:05:04] *** ChanServ sets mode: +qo brson brson
[06:05:14] <eddyb> cmr: I don't really know how to use it, to be honest
[06:05:42] <eddyb> and IIRC code in typeck isn't (always) using it
[06:05:53] <cmr> well it didn't exist when typeck was written :p
[06:06:29] <dbaupp> `{arg_identifier, plural, =1{# parameter} other{# parameters}}` iirc
[06:06:49] <dbaupp> (where arg_identifier is either an index or an ident)
[06:08:04] <eddyb> or... nothing?
[06:08:12] <dbaupp> don't think so
[06:08:21] * dbaupp consults the oracle
[06:08:24] <eddyb> bah I should just read the docs
[06:08:48] <dbaupp> rusti: println!("{,plural, =1{# error} other{# errors}}", 1)
[06:08:49] -rusti- 1 error
[06:08:50] -rusti- ()
[06:08:56] <dbaupp> oh, nothing does work
[06:09:57] <eddyb> rusti: println!("{,plural, =1{# error} other{# errors}}", 2)
[06:09:58] -rusti- 2 errors
[06:09:58] -rusti- ()
[06:10:11] <eddyb> dbaupp: cool :D
[06:10:26] <dbaupp> rusti: println!("{0} error{0,plural, =1{} other{s}}", 1)
[06:10:26] -rusti- <anon>:10:56: 10:57 error: argument used to format with `` was attempted to not be used for formatting
[06:10:26] -rusti- <anon>:10         println!("{0} error{0,plural, =1{} other{s}}", 1)
[06:10:26] -rusti-                                                                  ^
[06:10:27] -rusti- error: aborting due to previous error
[06:10:27] -rusti- application terminated with error code 101
[06:10:30] <dbaupp> bah
[06:11:10] <eddyb> though cmr's comment was probably about my "at most/at least" additions
[06:11:31] <cmr> https://github.com/mozilla/rust/pull/11217/files#diff-31c6a728eb925b9f6b0124e93948d270R1517 specifically
[06:13:15] <eddyb> can I do the comparison with plural?
[06:13:28] <cmr> eddyb: so, add some tests for the cross-crate cases, and I'd be happy.
[06:13:45] <dbaupp> eddyb: don't think so
[06:14:12] <eddyb> cmr: cross-crate are the hardest. do you have any helpful example, or should I look myself? (after I finish with this test for errors)
[06:14:46] <dbaupp> eddyb: i.e. writing a cross-crate test?
[06:15:23] <eddyb> yeah. I remember seeing some auxiliary contraption, but I'm not sure about it
[06:15:35] <dbaupp> eddyb: issue-11593.rs
[06:15:46] <dbaupp> in test/compile-fail
[06:15:49] <eddyb> thanks
[06:16:09] <dbaupp> aux-build refers to files in test/auxiliary
[06:16:30] <cmr> eddyb: default typarams where the default type is from another crate, substituting types from another crate, and using a type with a default type param where that other type is itself in another crate, and one where the type with the default type params is in another crate, and the default type param is in yet another, third crate.
[06:20:21] <eddyb> heh. a bit overkill considering my implementation
[06:20:37] <cmr> yes
[06:20:41] <cmr> but they are tests that need to happen
[06:20:48] <cmr> literally every case should be tested.
[06:21:00] <cmr> oh also a type using super:: or self:: in the default type param
[06:21:31] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[06:21:31] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/k5KY2Q
[06:21:31] <ghrust> 13rust/06auto 147a93157 15Johannes Muenzel: Check enum and struct representability properly (issues #3008 and #3779)
[06:21:31] <ghrust> 13rust/06auto 14b46c0da 15Johannes Muenzel: Add compile-fail tests for non-representable structs and enums
[06:21:31] <ghrust> 13rust/06auto 148d097b3 15Johannes Muenzel: Consider types that contain fixed-length-zero vectors of themselves as non-representable until #11924 is resolved
[06:21:35] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[06:21:56] <eddyb> cmr: I shouldn't have said anything :P
[06:22:06] <cmr> eddyb: hey, if you want my r+, you gotta have tests :P
[06:23:01] <xales> *cough*terminfo*cough*
[06:23:31] <dbaupp> xales: cmr didn't r+ that one
[06:23:34] <dbaupp> ;P
[06:23:35] <cmr> http://quotes.burntelectrons.org/7187 bahah
[06:23:38] <xales> but he submitted it!
[06:23:45] <cmr> hey that was my first non-trivial PR!
[06:23:46] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[06:24:01] <cmr> Someone seriously needs to get on that photoshop asap
[06:25:20] <eddyb> error: mismatched types: expected `Foo<int,A,B>` but found `()`
[06:25:26] <eddyb> oops (the defaults are A, B, C)
[06:26:01] <dbaupp> yay tests! :P
[06:27:31] <eddyb>  let defaults = decl_generics.type_param_defs.slice_from(required_ty_param_count)
[06:27:52] <eddyb> I'm guessing that should've been supplied_ty_param_count, instead
[06:31:06] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[06:32:16] <cmr> eddyb: default methods were broken forever because of insufficient tests, default typarams won't suffer the same fate :)
[06:32:54] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[06:41:11] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[06:41:49] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[06:49:10] <eddyb> test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured
[06:49:25] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[07:01:14] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[07:02:54] *** Quits: new_one (new_one@103577DD.641FCA23.B3C0173E.IP) (Client exited)
[07:04:37] *** Quits: dbaupp (Thunderbir@5A4F80CD.D5A1DCF.37681C44.IP) (Ping timeout)
[07:09:51] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Quit: Leaving...)
[07:15:49] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[07:20:21] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[07:41:28] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[07:41:28] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/k5KY2Q
[07:41:28] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[07:46:28] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[07:46:28] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/ixGbaQ
[07:46:28] <ghrust> 13rust/06auto 148cd935f 15Alex Crichton: Upgrade LLVM...
[07:46:28] <ghrust> 13rust/06auto 14e3b1f3c 15bors: auto merge of #11853 : alexcrichton/rust/up-llvm, r=brson...
[07:46:28] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[07:46:31] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[07:46:31] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/RUGrxg
[07:46:31] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[07:47:07] *** Quits: brson (brson@6A848D32.C1B840DD.76F66111.IP) (Ping timeout)
[07:49:19] *** flaper87|afk is now known as flaper87
[07:49:44] <flaper87> eddyb: hey
[07:49:53] <flaper87> eddyb: good to know!
[07:50:09] <eddyb> flaper87: extern crate is totally doable, I guess
[07:50:26] <eddyb> flaper87: depends on whether there is a meaning for extern IDENT already
[07:51:15] <flaper87> eddyb: This is the method that does the magic, I think there is: https://github.com/mozilla/rust/blob/master/src/libsyntax/parse/parser.rs#L4315
[07:51:35] <flaper87> I haven't looked in detail
[07:51:55] <flaper87> I was planning to start doing that today so... I still don't have all the info I need in my head
[07:52:13] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[07:52:13] *** ChanServ sets mode: +qo brson brson
[07:53:25] <flaper87> brb
[07:54:04] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[07:54:52] <acrichto> this unused_must_use lint is working beautifully
[08:00:18] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[08:00:18] *** ChanServ sets mode: +qo brson brson
[08:03:56] *** Joins: dbaupp (Thunderbir@moz-68C83524.lns20.syd6.internode.on.net)
[08:09:12] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[08:11:03] *** Joins: zimbabao (rajaram@47769425.AE842F9B.81C3DAA1.IP)
[08:11:18] *** Joins: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se)
[08:12:07] *** Quits: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca) (Quit: canhtak)
[08:15:17] *** Quits: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se) (Input/output error)
[08:16:47] *** Quits: luzie (lucy@moz-CD18B14B.customer.cdi.no) (Quit: 04‚Üê)
[08:16:49] *** Joins: luz (lucy@moz-CD18B14B.customer.cdi.no)
[08:17:03] *** Joins: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se)
[08:19:55] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[08:36:46] <eddyb> task 'rustc' failed at 'assertion failed: `(left == right) && (right == left)` (left: `3u`, right: `2u`)', /home/eddy/Projects/rust/src/librustc/middle/typeck/check/mod.rs:3846
[08:36:49] <eddyb> erm, what?
[08:37:00] <cmr> that's assert_eq's output
[08:37:13] * dbaupp wants to make that sane
[08:37:22] * cmr thinks it's fine
[08:37:24] <dbaupp> why are we even checking both directions?
[08:37:39] <cmr> something about eq being stupid
[08:38:08] <dbaupp> at the very least, we should check the separately, so that it's clear which direction failed
[08:38:19] <cmr> yes, that is true.
[08:38:39] <dbaupp> (and so that the default failure message is just `left == right failed (left: 3, right: 2)`)
[08:38:50] <dbaupp> oh... this a place where removing :? would be mildly annoying
[08:39:28] <eddyb> we don't want to remove :?, do we?
[08:39:55] <cmr> we do
[08:40:22] <dbaupp> it's getting less and less useful with Rc etc. being in libraries
[08:40:38] <eddyb> so do we want to remove TyVisitor?
[08:40:45] <cmr> all reflection
[08:40:53] <dbaupp> <3 deriving
[08:41:11] <cmr> I'm not actually convinced we should remove all reflection
[08:41:21] <eddyb> I was planning on making it even more compile-time-resolved
[08:41:22] <cmr> we could just emit type info into metadata or something though
[08:41:52] <eddyb> cmr: TyVisitor can be completely statically resolved
[08:42:08] <eddyb> well, at least for what {:?} was using it...
[08:43:01] <eddyb> (then RTTI can build atop that, if someone decides they want that information)
[08:43:19] <dbaupp> cmr: we need some sort of "reflection" for GC tracing
[08:43:33] <dbaupp> it's not clear how we'll be doing this though.
[08:43:49] <cmr> last I heard Encodable was the best path forward..
[08:44:01] <cmr> maybe that was just idle workaround though
[08:44:18] <dbaupp> I think servo is using it
[08:44:28] <cmr> if it isn't it will beu
[08:44:29] <dbaupp> I'm not sure it's perfect though
[08:44:30] <cmr> afaik
[08:44:33] <eddyb> cmr: I guess we can remove TyVisitor and do it right if we want it again
[08:44:45] <dbaupp> cmr: https://github.com/mozilla/servo/pull/1591
[08:45:01] <dbaupp> is the (unlanded) PR doing the conversion to Encodable
[08:45:09] <cmr> oh hey he actually pushed that today
[08:45:11] <cmr> exciting
[08:45:34] <eddyb> that's... smaller than one of my PRs
[08:45:46] <dbaupp> eddyb: you win! \o/
[08:46:12] <eddyb> though it was probably the renaming one so it doesn't count
[08:46:16] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[08:46:18] <eddyb> wasn't it supposed to be just JS or Js?
[08:47:25] <eddyb> the Node stuff reminds me I have to write down my fields-in-traits-with-optional-fixed-positions proposal
[08:49:27] <eddyb> cmr: hmpf, I had to do "touch src/librustc/lib.rs" to get librustc to recompile
[08:53:28] <eddyb> nmatsakis: does this make any sense? trait Slice<T>: Invariant<Self> + Covariant<T> {pure fn len(&self) -> uint;} impl<T, static N: uint> Slice<T> for [T, ..N] {pure fn len(&self) -> uint {N}}
[08:56:11] <eddyb> nmatsakis: the invariant/covariant part is there hoping to express that ~Slice<T> doesn't need a dtor in the vtable (so it can benefit from the same store-method-or-associated-constant-instead-of-vtable optimization as &Trait with one method)
[09:01:21] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Ping timeout)
[09:02:18] *** Quits: mrmonday_ (mrmonday@moz-1E82AE75.members.linode.com) (Quit: Lost terminal)
[09:04:45] <eddyb> cmr: r? https://github.com/mozilla/rust/pull/11217
[09:06:21] *** Joins: c-a (c-a@moz-57C82A9.a163.priv.bahnhof.se)
[09:07:17] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[09:08:47] <cmr> eddyb: did adding those tests find any bugs?
[09:09:12] <eddyb> cmr: yes. nothing cross-crate, that code was really too simple to get wrong
[09:10:02] <eddyb> the two bugs were the same, slicing the defaults from required_type_param_count instead of provided_type_param_count
[09:10:29] <eddyb> cmr, dbaupp: the last snapshot was over a week ago, could we get a new one after this lands?
[09:10:47] <cmr> good
[09:10:59] <cmr> (that's what I expected, re xcrate)
[09:11:05] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[09:11:26] <cmr> eddyb: needs rebase..
[09:11:41] <eddyb> how.... didn't I rebase this morning?
[09:11:46] * cmr doesn't know
[09:12:07] <eddyb> oh, someone changed the lints in the meanwhile
[09:13:29] <eddyb> cmr: there
[09:15:36] <cmr> eddyb: may the bors be with you
[09:15:44] <cmr> I'll snapshot tomorrow if no one else does
[09:15:58] <eddyb> cmr: thanks :D
[09:17:57] <flaper87> eddyb: great work in #11217
[09:18:05] <flaper87> I really like that feature
[09:18:41] <eddyb> flaper87: thanks :). can't wait to replace all HashMap uses in libsyntax/librustc with HashMap<K, V, SimpleHash>
[09:19:02] <flaper87> eddyb: yeah, that'd be awesome!
[09:20:14] <eddyb> if that doesn't shrink pre-LLVM pass times considerably, I don't know what will (well, getting rid of @T would also help)
[09:21:37] * flaper87 is not *that* familiar with llvm, he should probably dive into it
[09:21:42] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[09:21:43] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/ixGbaQ
[09:21:43] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[09:21:49] <flaper87> eddyb: mind sharing what optimizations you're expecting ?
[09:22:12] <eddyb> flaper87: SipHash is really bad
[09:22:43] <eddyb> I mean, if you don't care that much about performance and you want to be protected against hash-table-based DDoS, sure
[09:23:10] <eddyb> but not in something as HashMap-abusing as rustc
[09:23:23] <eddyb> (which is slow enough already)
[09:26:28] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[09:26:28] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/lXKf3A
[09:26:28] <ghrust> 13rust/06auto 14c5cf521 15Eduard Burtescu: Implement default type parameters in generics.
[09:26:28] <ghrust> 13rust/06auto 149639c07 15bors: auto merge of #11217 : eddyb/rust/generic-default-type-params, r=cmr
[09:26:29] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[09:36:47] <kimundi> rustilite: mod foo { extern mod extra; fn bar() { let x: ::extra::arc::Arc<uint> = ::foo::extra::arc::Arc::new(5u) } }
[09:36:48] -rustilite- <anon>:1:105: 1:106 error: expected `;` but found `}`
[09:36:48] -rustilite- <anon>:1 mod foo { extern mod extra; fn bar() { let x: ::extra::arc::Arc<uint> = ::foo::extra::arc::Arc::new(5u) } }
[09:36:48] -rustilite-                                                                                                                  ^
[09:36:48] -rustilite- application terminated with error code 101
[09:36:59] <kimundi> rustilite: mod foo { extern mod extra; fn bar() { let x: ::extra::arc::Arc<uint> = ::foo::extra::arc::Arc::new(5u); } }
[09:37:02] -rustilite- pastebinned 11 lines of output: http://ix.io/acn
[09:42:35] *** Joins: jensnock_ (jensnocker@moz-33279404.customers.ownit.se)
[09:43:04] *** Quits: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se) (Ping timeout)
[09:44:45] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[09:47:18] *** Joins: drhjdryjdxfh (hjbviuerbg@E6CF30E6.7D09F265.DB9D6342.IP)
[09:47:33] *** Quits: drhjdryjdxfh (hjbviuerbg@E6CF30E6.7D09F265.DB9D6342.IP) (Excess Flood)
[09:52:29] <eddyb> what's with those tests? nothing broke when I originally tested this :|
[09:52:36] <eddyb> *sigh*
[09:55:48] *** Joins: rca (rcatolino@68C2C935.20EF280.520D6FA6.IP)
[09:56:25] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[09:56:25] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/ZS983w
[09:56:25] <ghrust> 13rust/06auto 145f68142 15Seo Sanghyeon: Fix SIMD bit shifts
[09:56:25] <ghrust> 13rust/06auto 146b305f3 15bors: auto merge of #11907 : sanxiyn/rust/simd-shift, r=thestinger...
[09:56:25] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[09:56:27] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[09:56:27] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 149639c07 to 14e3b1f3c: 02http://git.io/N3iJvQ
[09:56:27] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[10:00:56] <dbaupp> eddyb: have you "benched" rustc with perf to see if we're actually spending a lot of time in HashMap?
[10:01:47] <eddyb> hmm, that's actually doable, I might try it
[10:03:01] <dbaupp> yes, it's rather easy :)
[10:09:21] <eddyb> // Build up the list of type parameters, inserting the self parameter at the appropriate position.
[10:10:36] <eddyb> using "insert" might make it less of an unreadable mess
[10:26:18] *** Quits: rca (rcatolino@68C2C935.20EF280.520D6FA6.IP) (Ping timeout)
[10:27:27] *** Joins: rca (rcatolino@68C2C935.20EF280.520D6FA6.IP)
[10:31:18] *** Joins: doener (doener@moz-C68F600D.unity-media.net)
[10:38:34] <c-a> dbaupp, eddyb, from the profiling I've done we seem to atleast spend a fair bit of time hashing middle::ty::sty from middle::ty::mk_t()
[10:39:14] <eddyb> and typeck takes > 50s
[10:39:16] <dbaupp> c-a: ok, cool.
[10:44:54] *** Quits: jensnock_ (jensnocker@moz-33279404.customers.ownit.se) (Input/output error)
[10:45:24] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[10:47:18] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[11:29:57] *** Quits: limeburst (me@247D1419.D73964AC.27A8748.IP) (Ping timeout)
[11:31:37] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[11:31:37] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/ZS983w
[11:31:37] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[11:36:25] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[11:36:26] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/_2FeHg
[11:36:26] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[11:36:26] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[11:36:26] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/m_XCVw
[11:36:26] <ghrust> 13rust/06auto 1450bee30 15Daniel Micay: stop making visit glue for closures and traits
[11:36:26] <ghrust> 13rust/06auto 14383e3fd 15Daniel Micay: use a more efficient vtable representation...
[11:36:26] <ghrust> 13rust/06auto 14a6764c2 15bors: auto merge of #11909 : thestinger/rust/tydesc, r=pcwalton
[11:36:29] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[11:38:00] *** Joins: limeburst (me@247D1419.D73964AC.27A8748.IP)
[11:40:53] <bjz> r? https://github.com/mozilla/rust/pull/11930
[11:43:27] *** Quits: zimbabao (rajaram@47769425.AE842F9B.81C3DAA1.IP) (Ping timeout)
[11:46:47] *** Quits: rca (rcatolino@68C2C935.20EF280.520D6FA6.IP) (Ping timeout)
[12:02:40] *** Joins: rca (rcatolino@68C2C935.20EF280.520D6FA6.IP)
[12:10:55] <eddyb> dbaupp: r=cmr? https://github.com/mozilla/rust/pull/11217
[12:11:04] <dbaupp> eddyb: what changed?
[12:11:07] <eddyb> I've finally fixed the Self issue. it was silly
[12:11:14] <eddyb> dbaupp: the logic in typeck::check::mod
[12:11:50] <dbaupp> geez that's a lot of space spent on plurals :P
[12:12:25] <dbaupp> do `if ... == 1 {""} else {"s"};` fit on one line?
[12:13:12] <eddyb> is that in astconv
[12:13:55] <dbaupp> nah, typeck::check::mod
[12:14:53] <eddyb> dbaupp: but that doesn't do manual pluralization
[12:15:11] <dbaupp> eddyb: https://github.com/eddyb/rust/commit/56b4d0b9023e51e58017ee89e3a286cef2f577ee#diff-31c6a728eb925b9f6b0124e93948d270R1515
[12:15:28] <dbaupp> in particular L1532
[12:16:22] <eddyb> dbaupp: oh, it's in a different function
[12:17:59] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[12:19:44] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[12:23:40] <bjz> dbaupp: could you check my PR?
[12:24:56] <eddyb> dbaupp: sooo, r(=cmr)?
[12:25:21] <dbaupp> bjz: why the removal of div_*?
[12:25:38] <bjz> dbaupp: don't we already have them in the traits?
[12:25:59] <dbaupp> bjz: oh, they're not generic
[12:26:05] <bjz> no
[12:26:57] *** Joins: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se)
[12:28:20] <bjz> typeck::check::check_expr_with_unifier is big
[12:28:34] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[12:28:38] <bjz> :D
[12:31:50] <eddyb> dbaupp: thanks :D
[12:32:13] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[12:32:28] *** vfetwnuncszu is now known as dcrewi
[12:34:33] *** Joins: andrew-__ (andrew-d_w@4CCE6E0C.339B431B.1E537B93.IP)
[12:35:07] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[12:39:18] *** Joins: zimbabao (rajaram@EC712D4.E5EB8737.D2D1FAF0.IP)
[12:41:58] *** Joins: jensnock_ (jensnocker@moz-33279404.customers.ownit.se)
[12:42:17] *** Quits: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se) (Ping timeout)
[12:51:34] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[12:51:34] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/m_XCVw
[12:51:34] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[12:56:28] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[12:56:28] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/MR1W5g
[12:56:28] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[12:56:28] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[12:56:28] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/f_Shig
[12:56:28] <ghrust> 13rust/06auto 1456b4d0b 15Eduard Burtescu: Implement default type parameters in generics.
[12:56:28] <ghrust> 13rust/06auto 14a3e253b 15bors: auto merge of #11217 : eddyb/rust/generic-default-type-params, r=cmr
[12:56:29] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[12:58:03] *** Quits: andrew-__ (andrew-d_w@4CCE6E0C.339B431B.1E537B93.IP) (Input/output error)
[12:58:25] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[13:06:32] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[13:06:33] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/lYqdig
[13:06:33] <ghrust> 13rust/06auto 142258243 15Kevin Ballard: Allow empty functional updating of structs...
[13:06:33] <ghrust> 13rust/06auto 14e3dc5f5 15bors: auto merge of #11911 : kballard/rust/empty-functional-update, r=pcwalton...
[13:06:33] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[13:06:35] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[13:06:35] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14a3e253b to 14a6764c2: 02http://git.io/N3iJvQ
[13:06:35] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[13:07:43] <eddyb> what not :(
[13:07:53] <eddyb> *now
[13:09:08] <eddyb> dbaupp: you have to be kidding me. I forgot to push a tiny fix. I blame git gui for not auto-refreshing
[13:09:54] <eddyb> dbaupp: https://github.com/mozilla/rust/pull/11217 if you want to give me one more try
[13:10:10] <dbaupp> what fix?
[13:11:10] <eddyb> dbaupp: it failed to compile because I had Some(default) instead of default in one place
[13:19:14] <eddyb> thanks (I'm gonna run out of these if I keep failing like that :P)
[13:20:44] <eddyb> acrichto: heh, I think your unused result lint found a bug in my PNG decoder (where I use Result a lot)
[13:20:51] *** Joins: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca)
[13:23:11] *** Quits: luz (lucy@moz-CD18B14B.customer.cdi.no) (Connection reset by peer)
[13:28:13] *** Joins: luz (lucy@moz-CD18B14B.customer.cdi.no)
[13:48:54] *** Quits: jensnock_ (jensnocker@moz-33279404.customers.ownit.se) (Connection reset by peer)
[13:49:19] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[13:51:15] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[13:51:48] *** Joins: rca_ (rcatolino@moz-7F9205D.adsl.proxad.net)
[13:51:50] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[13:52:26] *** Quits: rca (rcatolino@68C2C935.20EF280.520D6FA6.IP) (Ping timeout)
[14:04:49] *** Quits: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca) (Quit: canhtak)
[14:21:30] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[14:21:30] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/lYqdig
[14:21:30] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[14:22:06] *** Joins: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca)
[14:26:27] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[14:26:27] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/3yPBVQ
[14:26:27] <ghrust> 13rust/06auto 1474b0381 15Eduard Burtescu: Implement default type parameters in generics.
[14:26:27] <ghrust> 13rust/06auto 149a453ab 15bors: auto merge of #11217 : eddyb/rust/generic-default-type-params, r=cmr
[14:26:27] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[14:26:30] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[14:26:30] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/d5mBig
[14:26:30] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[14:27:34] <bstrie_rules> I've got heap questions!
[14:27:58] <bstrie_rules> where to owned pointers actually get allocated? is there a single per-process heap for them?
[14:28:10] <dbaupp> yes
[14:28:18] <bstrie_rules> managed pointers allegedly used to have task-local heaps, are those still around? are they around but unused?
[14:28:22] <dbaupp> no
[14:28:31] <dbaupp> it's just a conceptual thing
[14:28:35] *** Joins: new_one (new_one@moz-6F89B0D0.rice.edu)
[14:28:56] <dbaupp> (at least, it's best to regard "local heap" as a conceptual thing)
[14:29:36] <dbaupp> they all get allocated into a process's address space
[14:29:49] <dbaupp> i.e. all into the same heap
[14:30:13] <dbaupp> there are (some) user-space semantics we apply to the allocations (verified at compile time)
[14:30:13] <bstrie_rules> cool, thanks
[14:30:31] <dbaupp> but fundamentally they're all just wrappers for the same malloc & free
[14:31:37] <bstrie_rules> dbaupp: so if I wanted to I could get the address of a pointer in my task, send the pointer to another task, and then unsafely cast a uint to a pointer and still access the data?
[14:31:46] <bstrie_rules> not saying I wanna do it, just making sure my mental model is correct
[14:32:18] <eddyb> bstrie_rules: threads share the address space
[14:32:19] <dbaupp> yes
[14:32:25] <eddyb> (module TLS, maybe)
[14:32:32] <eddyb> *modulo
[14:32:33] <bstrie_rules> eddyb: do we lock the heap for allocation?
[14:32:38] <bstrie_rules> this is a question from another irc channel
[14:32:39] <dbaupp> (aiui servo is actually currently doing this with @... :/ )
[14:32:42] <eddyb> bstrie_rules: no, malloc/free are reentrant
[14:32:54] <dbaupp> well malloc and free may lock internally
[14:33:02] <dbaupp> but it's not a Rust-level locking
[14:33:09] <eddyb> or they can be lock-free (but atomic)
[14:33:26] <dbaupp> (i.e. that would be an implementation detail of the libc allocator; nothing much Rust itself can do.)
[14:33:31] <eddyb> there might be a standard somewhere requiring malloc/free to be thread-safe
[14:34:13] <eddyb> dbaupp: I just realized that sharing a non-global allocator in Rust across tasks would require mutable Arc semantics
[14:34:59] <eddyb> or UnsafeArc, if you want to guarantee the thread-safety yourself
[14:55:43] *** Quits: zimbabao (rajaram@EC712D4.E5EB8737.D2D1FAF0.IP) (Connection reset by peer)
[15:02:58] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[15:03:34] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[15:06:29] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[15:06:29] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/1xb9ew
[15:06:29] <ghrust> 13rust/06auto 14dbd8f26 15Flavio Percoco: Add test for issue 6157
[15:06:29] <ghrust> 13rust/06auto 1430e9bba 15bors: auto merge of #11914 : FlaPer87/rust/issue-6157, r=alexcrichton...
[15:06:29] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[15:07:30] <eddyb> BSD of all things?
[15:07:57] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[15:09:02] <eddyb> dbaupp: *sigh* fast tests bit me again
[15:11:57] *** Joins: zimbabao (rajaram@CF13308B.F0C8214C.D2D1FAF0.IP)
[15:12:28] <eddyb> dbaupp: how to features work with fast test?
[15:12:52] <eddyb> s/to/do/
[15:12:55] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[15:12:56] *** Joins: jensnock_ (jensnocker@moz-C4B24C3.customers.ownit.se)
[15:13:01] <bjz> dbaupp: beep
[15:14:03] <bjz> dbaupp: I was testing my PR, and I got this: https://gist.github.com/bjz/909695aadf1b6a38aaaf#file-o_o-L137-L143
[15:14:12] <bjz> (I thought all was well before -_-
[15:14:14] <bjz> )
[15:14:37] <bjz> test bigint::bigint_tests::test_gcd ... task 'bigint::bigint_tests::test_negative_rand_range' failed at 'assertion failed: *lbound < *ubound', /Users/brendan/dev/rust/rust/src/libextra/num/bigint.rs:1381
[15:14:37] <bjz>  
[15:14:37] <bjz> You've met with a terrible fate, haven't you?
[15:14:37] <bjz>  
[15:14:37] <bjz> fatal runtime error: Could not unwind stack, error = 5
[15:14:39] <bjz> make: *** [tmp/check-stage2-T-x86_64-apple-darwin-H-x86_64-apple-darwin-extra.ok] Error 132
[15:15:43] *** Quits: jensnock_ (jensnocker@moz-C4B24C3.customers.ownit.se) (Ping timeout)
[15:16:36] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Client exited)
[15:16:57] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[15:17:18] <eddyb> dbaupp: r? https://github.com/mozilla/rust/pull/11217 (added xfail-fast to the run-pass tests)
[15:18:31] <bjz> eddyb: I think he might have gone to bed
[15:18:36] <bjz> where I should be
[15:18:36] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[15:18:45] <bjz> (it's 2:00am here)
[15:18:45] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Ping timeout)
[15:18:46] <eddyb> cmr: ping me when you wake up
[15:18:49] <bjz> :P
[15:19:10] <eddyb> bjz: do you have bors perms?
[15:19:29] <eddyb> I just want to get this over with. at least I'm working on the PNG stuff in parallel
[15:20:19] <bjz> I do, but I've always been to scared to exercise them :P
[15:20:29] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[15:20:59] <bjz> I'm off anyway
[15:21:03] <bjz> o/
[15:21:20] <eddyb> *great*
[15:22:07] *** Joins: pnkfelix (pnkfelix@moz-B1D2E7D0.pck.nerim.net)
[15:22:15] <eddyb> strcat: hey, I didn't see you show up. mind r=cmr? https://github.com/mozilla/rust/pull/11217
[15:22:46] <eddyb> he finished the review, made me write some tests and I've ended up fighting bors ever since
[15:23:00] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[15:29:16] <eddyb> strcat: thanks, now to hope nothing breaks it again :P
[15:33:12] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[15:42:03] *** Joins: jdm (jdm@4F3ABECF.C2B3DA4.70288106.IP)
[15:44:41] *** Quits: rca_ (rcatolino@moz-7F9205D.adsl.proxad.net) (Ping timeout)
[15:45:41] *** Joins: rca (rcatolino@moz-7F9205D.adsl.proxad.net)
[16:05:13] *** Quits: Kxepal (Miranda@moz-56282A8D.pppoe.mtu-net.ru) (Ping timeout)
[16:07:55] *** Joins: Kxepal (Miranda@moz-59E1BFE6.pppoe.mtu-net.ru)
[16:08:43] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:21:39] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[16:21:39] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/1xb9ew
[16:21:39] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[16:25:46] *** Quits: Kxepal (Miranda@moz-59E1BFE6.pppoe.mtu-net.ru) (Quit: Kxepal)
[16:26:08] *** Joins: Kxepal (Miranda@moz-59E1BFE6.pppoe.mtu-net.ru)
[16:26:30] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[16:26:30] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1IIhKw
[16:26:30] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[16:32:15] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[16:39:52] *** Quits: new_one (new_one@moz-6F89B0D0.rice.edu) (Client exited)
[16:44:55] * strcat feels like removing TyDesc completely
[16:45:18] * eddyb starts drooling
[16:45:46] *** Joins: gwty (gwtypc@ED137413.D804B340.F44414AF.IP)
[16:50:25] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[16:57:29] <cmr> eddyb: morning
[16:58:09] <eddyb> cmr: just in time :D
[16:59:19] <cmr> need another r+?
[16:59:59] <eddyb> hopefully not
[17:00:11] <cmr> awesome :D
[17:00:21] <eddyb> http://buildbot.rust-lang.org/console?branch=auto&refresh=15 still testing
[17:00:40] <eddyb> (I wish it would show the information on hover, without having to click and wait ten seconds)
[17:01:03] <cmr> I'm glad it doesn't, mousing around the page would be crazy :p
[17:01:43] <eddyb> cmr: it takes like one second for chrome to show you the label. in that time it could very well grab the data and then display it
[17:02:32] <eddyb> this is better than the waterfall when it starts getting green
[17:02:51] <eddyb> cmr: feel free to prepare for a snapshot :D
[17:02:54] * cmr always uses the console
[17:08:24] *** Quits: lpy (lpy@4F2FE573.2EDA7147.E99F7FDB.IP) (Client exited)
[17:11:32] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[17:11:32] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 146880255 to 1430e9bba: 02http://git.io/N3iJvQ
[17:11:32] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[17:11:33] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[17:11:34] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/qMFO5w
[17:11:34] <ghrust> 13rust/06auto 148581202 15Birunthan Mohanathas: extra: Move uuid to libuuid...
[17:11:34] <ghrust> 13rust/06auto 14c149e04 15bors: auto merge of #11912 : poiru/rust/8784-libuuid, r=alexcrichton...
[17:11:34] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[17:11:53] <eddyb> please don't tell me it failed again. please don't
[17:12:45] *** Quits: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca) (Quit: canhtak)
[17:12:53] <eddyb> "error: pretty-printed source does not typecheck"
[17:12:56] <eddyb> cmr: what is this?
[17:13:04] <cmr> hm
[17:13:13] <cmr> seems you broke the pretty printer
[17:13:25] <eddyb> yay
[17:13:25] <cmr> in that running rustc --pretty expanded on it doesn't compile
[17:13:33] <eddyb> but why android?
[17:14:02] <cmr> hm, did others pass?
[17:14:04] <eddyb> I guess the others never actually tested
[17:14:46] <eddyb> cmr: do we have xfail-pretty?
[17:16:38] <cmr> yes actually
[17:16:58] <cmr> kt'd be nice if you fixed it instead :(
[17:17:09] * cmr would r+ anyway
[17:17:27] <eddyb> cmr: maybe I just forgot to implement = Foo in syntax::print
[17:18:53] <eddyb> cmr: hehe struct Vec<T, A>;
[17:22:29] *** Joins: bjz_ (bjz@B398BE78.F804C29E.D35A31DF.IP)
[17:23:38] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[17:24:07] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[17:25:05] *** Quits: jdm (jdm@4F3ABECF.C2B3DA4.70288106.IP) (Quit: Lost terminal)
[17:29:00] *** Quits: zimbabao (rajaram@CF13308B.F0C8214C.D2D1FAF0.IP) (Ping timeout)
[17:34:53] <eddyb> cmr: no idea if it compiles, but here it is if you want to preemptively r+ it https://github.com/mozilla/rust/pull/11217
[17:35:02] <eddyb> cmr: I'm waiting on LLVM :/
[17:35:33] *** Joins: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca)
[17:38:56] *** Joins: lpy (lpy@4F2FE573.2EDA7147.E99F7FDB.IP)
[17:40:08] *** Quits: lpy (lpy@4F2FE573.2EDA7147.E99F7FDB.IP) (Connection reset by peer)
[17:40:32] *** Joins: lpy (lpy@4F2FE573.2EDA7147.E99F7FDB.IP)
[17:41:29] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[17:41:29] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14c149e04 to 1430e9bba: 02http://git.io/N3iJvQ
[17:41:29] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[17:42:34] *** Quits: lpy (lpy@4F2FE573.2EDA7147.E99F7FDB.IP) (Ping timeout)
[17:49:02] *** Quits: gwty (gwtypc@ED137413.D804B340.F44414AF.IP) (Ping timeout)
[17:54:06] *** Joins: jdm (jdm@moz-C07D5168.p2p.sfo1.mozilla.com)
[17:54:26] *** Joins: gwty (gwtypc@ED137413.D804B340.F44414AF.IP)
[17:59:45] <cmr> dear lord I almost hit the merge button
[18:03:53] <eddyb> cmr: which PR?
[18:04:17] <cmr> yours
[18:04:58] <eddyb> instead of r+?
[18:05:08] <cmr> yup 
[18:05:08] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:05:09] *** ChanServ sets mode: +qo brson brson
[18:05:18] <eddyb> it's compiling... let's see if pretty works
[18:06:39] <bstrie_rules> brson: check out https://github.com/mozilla/rust/graphs/traffic
[18:11:21] <eddyb> bstrie_rules: private stuff :(?
[18:12:31] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[18:12:31] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:13:38] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[18:15:21] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[18:15:41] <eddyb> cmr: thanks - it passes locally btw (assuming there's nothing even more obscure that I missed)
[18:16:22] <cmr> eddyb: you... *did* run make check, right?
[18:17:10] <bstrie_rules> eddyb: just github's new traffic analysis page for a repo, telling you pageviews/uniques for the past month and top referers and stuff
[18:17:29] <eddyb> cmr: compiling stdtest takes more RAM than librustc :(
[18:19:54] *** Quits: blank_name (blank_name@E7821509.94CCB18F.53C6B850.IP) (Ping timeout)
[18:22:24] *** Joins: dherman (dherman@moz-21F91504.cfw-a-gci.corp.yahoo.com)
[18:22:24] *** ChanServ sets mode: +ao dherman dherman
[18:22:36] <brson> bstrie_rules: what should i be noticing about the traffic?
[18:24:16] <bstrie_rules> brson: I was under the impression that that was a brand-new graph, thought you might like to know how many uniques we get daily to the github page
[18:24:21] <bstrie_rules> I was surprised that it was so high
[18:24:32] <cmr> bstrie_rules: it's like a month old :P
[18:24:37] <bstrie_rules> nobody told me!!
[18:24:43] <bstrie_rules> I like graphs :(
[18:25:39] <bstrie_rules> it's also much more than a month old, github originally rolled it out when they revamped all their graphs, and then removed it almost immediately...
[18:25:46] <bstrie_rules> I was excited to see it back
[18:26:04] <brson> bstrie_rules: oh, yeah, our numbers are encouraging!
[18:26:15] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[18:26:17] <xales> acrichto: I've updated https://github.com/mozilla/rust/pull/11895
[18:26:18] <bstrie_rules> brson: could also be a hint as to which wiki pages need the most attention
[18:26:32] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[18:26:32] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:28:46] <cmr> oh good idea
[18:31:00] <cmr> bstrie_rules: ah I didn't realize they had removed it and then re-added it
[18:41:16] *** Joins: lpy (lpy@4F2FE573.2EDA7147.E99F7FDB.IP)
[18:41:47] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[18:41:47] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14b1d5022 to 1430e9bba: 02http://git.io/N3iJvQ
[18:41:47] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[18:41:47] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[18:41:48] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/X6UxUQ
[18:41:48] <ghrust> 13rust/06auto 147d96774 15Eduard Burtescu: Implement default type parameters in generics.
[18:41:48] <ghrust> 13rust/06auto 143427137 15bors: auto merge of #11217 : eddyb/rust/generic-default-type-params, r=cmr
[18:41:48] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[18:43:25] *** Quits: lpy (lpy@4F2FE573.2EDA7147.E99F7FDB.IP) (Ping timeout)
[18:46:46] <jdm> anybody know if derived Eq implementations are inlined?
[18:46:55] <jdm> there's a servo fixme about it from a long time ago
[18:47:22] <strcat> I think they're marked #[inline]
[18:47:34] <cmr> checkt --pretty expanded
[18:51:14] *** Quits: doener (doener@moz-C68F600D.unity-media.net) (Quit: leaving)
[18:51:16] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[18:55:30] *** Quits: jdm (jdm@moz-C07D5168.p2p.sfo1.mozilla.com) (Input/output error)
[19:00:45] *** Joins: jdm (jdm@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[19:00:56] *** Quits: jdm (jdm@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: Lost terminal)
[19:00:59] *** Joins: jdm (jdm@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[19:06:23] *** Quits: pnkfelix (pnkfelix@moz-B1D2E7D0.pck.nerim.net) (Ping timeout)
[19:12:40] <eddyb> brson: oh, I am late on watching the meetup recording - the announcement sounds interesting, but "ABI design" is a tad too specific
[19:14:30] <Eridius> jdm: from the source: `inline: true`
[19:14:50] <Eridius> in the macro rules for the generation of the `eq` and `ne` methods
[19:14:58] <jdm> eddyb: API design, right?
[19:15:13] <jdm> Eridius: ah, cool
[19:15:17] <eddyb> jdm: I'm not sure I heard it right, but it sounded like "ABI"
[19:15:27] <Eridius> eddyb: I heard "API Design" in person
[19:15:32] <jdm> I'm pretty sure it's someone to focus on getting the stdlib in shape
[19:17:53] <eddyb> hmm doesn't sound like something I'd do full time. so it's probably not for me
[19:18:32] <eddyb> oh, oh, it's going to land soon :D
[19:19:00] <cmr> I heard ABI design too
[19:19:12] <eddyb> err, I reversed yellow/green in my head
[19:19:42] <eddyb> cmr: I guess it depends on the accent, P can get too close to B
[19:22:19] *** Joins: luzie (lucy@moz-CD18B14B.customer.cdi.no)
[19:22:24] *** Quits: luz (lucy@moz-CD18B14B.customer.cdi.no) (Quit: 04‚Üê)
[19:24:01] *** Quits: pauls (pauls@moz-7140CF01.ccs.neu.edu) (Ping timeout)
[19:24:22] <eddyb> brson: was "Experience in public API design" recently added here? https://careers.mozilla.org/en-US/position/o3VZWfwD - that is, it's the same position that was open before, but with more precise requirements?
[19:24:33] <Eridius> working on libs full-time interests me, but I already have a job
[19:25:12] <eddyb> "some of you tried to read them. I'm sorry" <3 nmatsakis :))
[19:29:30] <eddyb> strcat: did you watch the meetup? nmatsakis' talk either focuses on vectors or at least starts with them, while you were skeptic about vectors under DST
[19:35:48] <eddyb> oooh, arrays vs vectors. I love this :D
[19:37:22] <nmatsakis> strcat: I wanted to talk to you about doing some of the work needed for DST, mostly the changes to repr etc that you were championing for perf reasons
[19:38:08] <strcat> nmatsakis: is the current plan to have ~[T] and Vec<T>?
[19:38:31] <nmatsakis> strcat: depends what you mean by that :) but I think the answer is yes..
[19:38:42] <nmatsakis> strcat: ...current plan is to have a type [T] that means exists n. [T, ..n]
[19:38:53] <nmatsakis> strcat: can't grow it, therefore, Vec<T> is for growable mem
[19:39:00] <eddyb> and ~[T] is a natural consequence of [T] :D
[19:39:00] <strcat> so ~[T, ..5] is ~[T]?
[19:39:19] <nmatsakis> you can coerce ~[T, ..n] into ~[T]
[19:39:27] <nmatsakis> the precise coercion rules are onmy blog
[19:39:34] <nmatsakis> they permit e.g. Rc<[T, ..n]> to Rc<[T]>
[19:39:39] <strcat> ah
[19:40:03] <eddyb> nmatsakis: well, it's the scenario I was hoping for :D. I think I tried to convince strcat that we could have Rc<RefCell<[T]>>, but failed
[19:40:31] <nmatsakis> eddyb: actually I believe that will work too
[19:40:50] <nmatsakis> because RefCell doesn't introduce indirection
[19:40:53] <eddyb> nmatsakis: me too. point was, strcat didn't believe
[19:41:05] <nmatsakis> I am behind on blog posts,
[19:41:05] <eddyb> as long as we move the refcount in RefCell at the top
[19:41:09] <nmatsakis> but it'd be a nice write up to show that it can work
[19:41:09] <nmatsakis> yes
[19:41:11] <nmatsakis> you'd have to do that
[19:41:49] <nmatsakis> I believe that would be covered by the rules in http://smallcultfollowing.com/babysteps/blog/2014/01/05/dst-take-5/ though
[19:41:57] *** Joins: pauls (pauls@moz-BFEF1F22.ccs.neu.edu)
[19:42:01] *** Joins: lpy (lpy@4F2FE573.2EDA7147.E99F7FDB.IP)
[19:42:07] * eddyb is filled with excitement. one day type id = RWArc<Many>; will work :D
[19:44:03] * strcat should make a blog ;P
[19:44:06] *** Quits: lpy (lpy@4F2FE573.2EDA7147.E99F7FDB.IP) (Ping timeout)
[19:45:06] <brson> eddyb: it's the same position, yes, but we've changed the focus from compiler engineering to library engineering
[19:45:39] <eddyb> brson: *sigh* should've applied earlier
[19:49:13] <Eridius> brson: if only you had this position open (with this focus) a few months ago...
[19:50:51] <brson> :-(
[19:52:53] <eddyb> cmr: green! prepare the snapshot cannons :D
[19:54:54] <cmr> \o/
[19:57:38] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[19:59:24] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[19:59:24] *** ChanServ sets mode: +qo brson brson
[20:06:21] <eddyb> cmr: weird, there was no IRC message about the merge
[20:08:10] <cmr> it seems someone else had already merged it into snap-stage3 too
[20:09:05] <eddyb> ooh
[20:09:07] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[20:09:24] <bstrie_rules> rusti: 0^0
[20:09:25] -rusti- 0
[20:09:30] <bstrie_rules> ^ this used to be 1. what happened?
[20:09:39] <cmr> rusti: 1 ^ 1
[20:09:40] -rusti- 0
[20:09:42] <cmr> it's xor
[20:09:44] <eddyb> bstrie_rules: huh?
[20:09:46] <bstrie_rules> oh dur
[20:09:52] <cmr> rusti: 0f32 ^ 0
[20:09:53] -rusti- <anon>:10:9: 10:17 error: binary operation `^` cannot be applied to type `f32`
[20:09:53] -rusti- <anon>:10         0f32 ^ 0
[20:09:53] -rusti-                   ^~~~~~~~
[20:09:53] -rusti- error: aborting due to previous error
[20:09:53] -rusti- application terminated with error code 101
[20:09:58] <bstrie_rules> I will NEVER get over that symbol as exponentiation
[20:09:58] <eddyb> rusti: pow(0, 0)
[20:09:58] -rusti- <anon>:10:9: 10:12 error: unresolved name `pow`.
[20:09:59] -rusti- <anon>:10         pow(0, 0)
[20:09:59] -rusti-                   ^~~
[20:10:00] -rusti- error: aborting due to previous error
[20:10:02] -rusti- application terminated with error code 101
[20:10:02] <bstrie_rules> damn you visual basic!
[20:10:07] <bstrie_rules> you've ruined me for life
[20:10:16] <eddyb> bstrie_rules: you can still implement it like that for floats
[20:10:47] <bstrie_rules> no thanks
[20:10:53] <Eridius> bstrie_rules: we should introduce ^^ for exponentiation ;)
[20:10:56] <bstrie_rules> lest future generations repeat my mistakes
[20:11:04] <bstrie_rules> Eridius: I'd rather ** from python :P
[20:11:11] <Eridius> or that
[20:11:29] <Eridius> although we should probably avoid both. Exponentiation ain't free
[20:15:04] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[20:15:16] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[20:15:18] *** Joins: blank_name (blank_name@6857152D.7C86004B.6D228269.IP)
[20:15:33] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[20:16:49] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:23:34] <Eridius> hrm, watching my own rust-lua presentation is kind of weird
[20:24:09] <Eridius> also, I spoke a lot faster than I intended to :/ but I guess that was ok because I took longer than I intended to as well
[20:24:15] <cmr> is it just me or does amo almost never work
[20:24:34] <cmr> I wonder if it's flashblock..
[20:24:52] <cmr> seems so
[20:24:53] <cmr> yay
[20:24:55] <Eridius> it appears to use flash
[20:25:08] <Eridius> if I try in Safari it just gives me a black box once I hit play
[20:25:16] <cmr> yeah but after I click past the player it's just an empty black box
[20:25:17] <cmr> yeah
[20:25:26] <cmr> I had to add vid.ly to the whitelist
[20:25:37] <Eridius> I just don't have flash installed on the system at all. I use Chrome for that
[20:26:55] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:27:32] <eddyb> cmr: snap3-win failed?
[20:28:17] <cmr> hm
[20:28:19] <cmr> acrichto: ping
[20:28:25] <cmr> or maybe brson 
[20:28:28] <cmr> http://buildbot.rust-lang.org/builders/snap3-win/builds/641/steps/clean/logs/stdio
[20:28:38] <cmr> the slave seems to be having some control issues
[20:31:18] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:38:13] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[20:42:46] *** Joins: lpy (lpy@4F2FE573.2EDA7147.E99F7FDB.IP)
[20:42:49] <strcat> nmatsakis: I'm wondering how we will migrate away from the old vector repr
[20:43:10] <strcat> I guess it can be changed to (ptr, len, cap)
[20:43:20] <strcat> then move everything needing to grow to Vec<T>
[20:43:21] <strcat> then drop cap
[20:43:23] <strcat> dunno
[20:43:49] <strcat> going to be a bit annoying
[20:44:37] <strcat> I'd like to have a separate module for Vec<T> in the end...
[20:44:40] <strcat> std::slice and std::vec
[20:44:56] *** Quits: lpy (lpy@4F2FE573.2EDA7147.E99F7FDB.IP) (Ping timeout)
[20:45:01] <strcat> it's too big
[20:45:19] * strcat will start with that ;p
[20:45:34] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Client exited)
[20:47:42] <brson> cmr: usually a retry fixes?L
[20:52:53] <acrichto> jdm: oh I should tell you that I am at my desk and will be for awhile now (for stickers)
[20:52:54] <acrichto> cmr: pong
[20:53:08] <acrichto> cmr: yeah the windows builders are really weird sometimes
[20:53:27] *** Joins: notmatt (notmatt@CC62CF7E.1E7FDFDB.A82DBDDB.IP)
[20:55:09] <cmr> is that... expected?
[20:55:36] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[20:55:52] <eddyb> why did linux fail?
[20:56:03] <acrichto> oh that's the snapshot
[20:56:16] <eddyb> and chrome is broken. great!
[20:56:20] <acrichto> oh man they all failed
[20:56:31] <eddyb> and I can't see why
[20:56:34] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[20:56:35] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14ba70bd1 to 143427137: 02http://git.io/N3iJvQ
[20:56:35] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[20:56:47] <acrichto> oh it's all llvm stuff
[20:56:49] <cmr> it looks like they really didn't like the llvm upgrade
[20:56:51] <cmr> yeah
[20:57:04] <acrichto> I'm rebuilding all of the
[20:57:05] <eddyb> nuke everything and try again?
[20:57:14] *** Quits: pauls (pauls@moz-BFEF1F22.ccs.neu.edu) (Ping timeout)
[20:57:30] <Eridius> is there any way for Rust to be able to tell that it's unwinding due to a C++ exception?
[20:57:47] <cmr> Eridius: C++ unwinds don't unwind through rust anymore afaik
[20:57:50] <acrichto> Eridius: you'd have to query libunwind directly probably
[20:57:52] <eddyb> acrichto: well, I want to play with some things tomorrow and I don't want to have to put down #[cfg(not(stage0))] everywhere
[20:58:02] <Eridius> cmr: it did when I tested on monday. libunwind seems to be compatible with C++ exceptions
[20:58:04] <acrichto> eddyb: yeah I'm gonna try to get a snapshot through tonight
[20:58:09] <cmr> hm
[20:58:11] <Eridius> I don't know if this necessarily holds true on all platforms of course
[20:58:11] <eddyb> cmr: personality guards against that?
[20:58:14] <strcat> Eridius: walking the undefined behaviour path there
[20:58:16] <acrichto> libunwind *is* C++ exceptions
[20:58:23] <Eridius> acrichto: on all platforms?
[20:58:23] <strcat> Eridius: C++ considers it UB to throw an exception past extern "C"
[20:58:31] <Eridius> strcat: sure, because C has no notion of exceptions
[20:58:37] <acrichto> Eridius: at least on all the platforms we do, msvc stuff I imagine is all different
[20:58:49] <acrichto> Eridius: but strcat is right, this is all undefined
[20:58:57] <strcat> Eridius: but I mean... how do you get a C++ exception in rust without throwing it past extern "C"?
[20:59:03] <Eridius> I'm just trying to figure out if there's any way we can make Rust slightly more resilient against C++ exceptions, such as allowing MutexARC to poison itself on C++ exceptions and not just on task failure
[20:59:09] <Eridius> strcat: oh I see what you're saying
[20:59:30] <strcat> I think we should explicitly state that unwinding from an extern "C" ABI function is undefined
[20:59:44] <strcat> I don't think we can really guarantee it works
[20:59:52] <acrichto> I was thinking the same, and possibly going as far as marking them all as nounwind
[20:59:56] <strcat> in the unsafe section of the manual I started
[21:00:19] <strcat> http://static.rust-lang.org/doc/master/rust.html#unsafety
[21:00:34] <strcat> acrichto: we miss out on the __attribute__((nothrow)) in the headers
[21:00:49] <acrichto> brson: what's the ip for mac6?
[21:00:50] <strcat> so it wouldn't necessarily always be as bad as it is now
[21:02:39] <brson> acrichto: 10.250.3.151
[21:03:11] <acrichto> brson: thanks
[21:03:38] <acrichto> rust-mac6:cores administrator$ du -sh .
[21:03:38] <acrichto> 817G	.
[21:03:40] <acrichto> um
[21:03:44] <acrichto> we have a lot of core files
[21:03:49] <eddyb> hahaha. again?
[21:04:25] <strcat> acrichto: you can set it up to manage them with a script
[21:04:33] <strcat> the kernel can automatically run some script
[21:04:34] <acrichto> this is osx though
[21:04:37] <strcat> oh
[21:04:42] <strcat> well then you're screwed!
[21:04:52] <strcat> (probably)
[21:04:53] <Eridius> why do you have core files on OS X? Core dumps are disabled by default
[21:05:05] <acrichto> we have them on the bots
[21:05:07] <Eridius> you could also just set up a cronjob or launchd task to periodically clean them out
[21:05:08] <acrichto> b/c they're super useful
[21:06:00] <acrichto> we do have a cron job
[21:06:07] <acrichto> not sure why it's not working
[21:06:11] <acrichto> 0 0 * * * rm -f /cores/*
[21:06:33] * strcat hates cron
[21:06:58] <strcat> tmpfiles.d and timer units make me happy ;P
[21:19:12] <nmatsakis> strcat: re: the migration, there are various options I guess; we could change repr first, then move to Vec<T>,
[21:19:20] <nmatsakis> strcat: or vice versa. 
[21:19:38] <nmatsakis> I'd probably move to Vec<T> first (i.e., drop push() from ~[T], make Vec<T>'s repr compatible with ~[T] today)
[21:19:46] <nmatsakis> because this is the majorly backwards incompat part
[21:22:01] *** Quits: eddyb (eddy@832D2DE5.66315F97.FB866788.IP) (Ping timeout)
[21:22:03] *** Quits: acrichto (acrichto@moz-B63D64BD.res.cmu.edu) (Connection reset by peer)
[21:22:06] *** Joins: acrichto (acrichto@moz-B63D64BD.res.cmu.edu)
[21:22:06] *** ChanServ sets mode: +o acrichto
[21:22:16] *** Joins: pnkfelix (pnkfelix@moz-B1D2E7D0.pck.nerim.net)
[21:23:59] *** Quits: acrichto (acrichto@moz-B63D64BD.res.cmu.edu) (Ping timeout)
[21:25:10] *** Joins: andrew-d_w (andrew-d_w@moz-1FD1C064.nat.bb.dnainternet.fi)
[21:25:14] *** Quits: andrew-d_w (andrew-d_w@moz-1FD1C064.nat.bb.dnainternet.fi) (Input/output error)
[21:25:38] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[21:27:07] *** Joins: acrichto (acrichto@moz-B63D64BD.res.cmu.edu)
[21:27:07] *** ChanServ sets mode: +o acrichto
[21:28:11] <jdm> acrichto: which floor? I'm in a meeting now, but I'll swing by later
[21:28:37] <acrichto> jdm: 7
[21:28:47] <acrichto> jdm: in the area behind the kitchen
[21:30:16] <brson> rust's dev process is humming along nicely this week with ~10 landings per day
[21:31:31] <cmr> I looked into generating gcov data
[21:31:40] <jdm> aaaaand?
[21:31:46] <cmr> And also discovered that the various sanitizers (asan, tsan) are not clang-specific
[21:31:59] <cmr> I'm going to be playing with those this weekend.
[21:32:03] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[21:32:05] <jdm> excellent
[21:32:09] <cmr> or, you know, as soon as I'm done homework
[21:32:15] <cmr> whichever comes first :p
[21:32:17] <jdm> there's a very old issue about asan that I filed years ago
[21:32:26] <cmr> on asan or on rust?
[21:32:30] <jdm> on rust
[21:33:36] *** Quits: dherman (dherman@moz-21F91504.cfw-a-gci.corp.yahoo.com) (Quit: dherman)
[21:34:09] <cmr> https://github.com/mozilla/rust/issues/749
[21:34:11] <cmr> years ago indeed
[21:35:11] *** Quits: bjz_ (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[21:36:25] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[21:36:41] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[21:36:41] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14ee27448 to 143427137: 02http://git.io/N3iJvQ
[21:36:41] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[21:36:42] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[21:36:42] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/KkIOAA
[21:36:42] <ghrust> 13rust/06auto 14d7f97e3 15xales: Rename std::borrow to std::reference....
[21:36:42] <ghrust> 13rust/06auto 14d547f7a 15xales: Remove double-use of logging.
[21:36:42] <ghrust> 13rust/06auto 14f17d972 15xales: Remove seldom-used std::reference functions.
[21:36:44] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[21:36:56] *** Joins: dherman (dherman@moz-21F91504.cfw-a-gci.corp.yahoo.com)
[21:36:56] *** ChanServ sets mode: +ao dherman dherman
[21:42:48] <bstrie_rules> who's nick cameron? I see their name on the 1.0 spreadsheet
[21:42:52] <cmr> nrc
[21:43:03] <bstrie_rules> nrc: hello!
[21:43:29] <cmr> they're the person working on getting rust for https://wiki.mozilla.org/DXR
[21:43:32] *** Joins: lpy (lpy@4F2FE573.2EDA7147.E99F7FDB.IP)
[21:43:34] <bstrie_rules> ah ok
[21:44:38] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:45:44] *** Quits: lpy (lpy@4F2FE573.2EDA7147.E99F7FDB.IP) (Ping timeout)
[21:51:04] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:58:39] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[22:09:20] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[22:14:31] *** Quits: dbaupp (Thunderbir@moz-68C83524.lns20.syd6.internode.on.net) (Ping timeout)
[22:24:05] *** kimundi is now known as zz_kimundi
[22:25:14] *** Quits: rca (rcatolino@moz-7F9205D.adsl.proxad.net) (Ping timeout)
[22:44:16] *** Joins: lpy (lpy@4F2FE573.2EDA7147.E99F7FDB.IP)
[22:46:24] *** Quits: lpy (lpy@4F2FE573.2EDA7147.E99F7FDB.IP) (Ping timeout)
[22:50:59] *** Quits: gwty (gwtypc@ED137413.D804B340.F44414AF.IP) (Ping timeout)
[22:52:21] *** Quits: dherman (dherman@moz-21F91504.cfw-a-gci.corp.yahoo.com) (Quit: dherman)
[22:53:47] *** Quits: jdm (jdm@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Input/output error)
[22:53:58] *** Joins: jdm (jdm@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[23:06:54] <cmr> Eridius: acrichto: r? https://github.com/mozilla/rust/pull/11840
[23:07:58] <acrichto> cmr: might be worth adding a tests
[23:08:00] <acrichto> a test*
[23:08:03] <acrichto> just like simple equality
[23:08:19] <cmr> equality of what?
[23:08:27] <cmr> Oh that reminds me that I meant to impl Eq
[23:08:41] <acrichto> just something like foo == foo.clone()
[23:08:49] <cmr> yeah, CString doesn't implement Eq :P
[23:08:54] <Eridius> is it safe to pair malloc_raw() with libc::free()?
[23:09:08] <cmr> Eridius: yes, malloc_raw is just a wrapper around libc::malloc with null checking
[23:09:12] <Eridius> ok
[23:09:13] <acrichto> yeah right now it is
[23:09:14] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[23:09:14] *** ChanServ sets mode: +qo brson brson
[23:09:24] <cmr> should I be using exchange_alloc and exchange_free?
[23:09:30] <Eridius> hmm, this clone will fail if the CString's pointer is nul then
[23:09:33] <strcat> cmr: not just null checking
[23:09:33] <Eridius> won't it?
[23:09:39] <strcat> also makes malloc(0) defined as a null ptr
[23:09:53] <strcat> instead of implementation defined as either null or a valid unique allocation address
[23:09:55] <Eridius> well actually I guess that depends on how .len() behaves with a null CString
[23:10:41] <Eridius> hrm, .len() doesn't check for null, it just uses ptr::position
[23:11:11] <Eridius> I know some methods on CString check for null, now I'm kind of worried that .len() doesn't
[23:12:02] <Eridius> in any case, .clone() shouldn't fail. cmr, maybe you should check if self.buf.is_null()
[23:12:04] <cmr> I don't think you can have an empty CString... all the constructors allocate at least one byte.
[23:12:07] <cmr> I agree
[23:12:28] <Eridius> CString::new() takes an arbitrary buf pointer
[23:12:34] <cmr> it's also unsafe.
[23:12:40] <cmr> so s/constructors/safe constructors/
[23:12:40] <Eridius> all the methods implemented on CString directly check for null
[23:12:45] <Eridius> which is why I'm surprised .len() doesn't
[23:13:04] <Eridius> there are no safe constructors for CString(). There are only safe implementations of ToCStr
[23:13:13] <strcat> any Clone implementation can hit the failure case of a stack overflow and many can hit out-of-memory, and we may eventually unwind on those
[23:13:35] <Eridius> honestly, I'm surprised CString doesn't null-check in its constructor and fail immediately
[23:13:49] <Eridius> but I guess that lets FFI functions return a CString that's allowed to be null, instead of returning Option<CString>. I dunno
[23:14:15] <Eridius> in any case, as long as CString attempts to handle null internally, clone() should work
[23:16:23] <Eridius> rusti: unsafe { std::ptr::position<u8>(std::ptr::null(), |c| *c == 00 }
[23:16:30] -rusti- pastebinned 7 lines of output: http://ix.io/ady
[23:16:40] <Eridius> rusti: unsafe { std::ptr::position::<u8>(std::ptr::null(), |c| *c == 0 }
[23:16:44] -rusti- pastebinned 7 lines of output: http://ix.io/adz
[23:16:52] <Eridius> argh
[23:16:54] <Eridius> rusti: unsafe { std::ptr::position::<u8>(std::ptr::null(), |c| *c == 0) }
[23:16:59] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[23:17:03] <Eridius> yay ok, that segfaults.
[23:20:25] *** Joins: dherman (dherman@moz-21F91504.cfw-a-gci.corp.yahoo.com)
[23:20:25] *** ChanServ sets mode: +ao dherman dherman
[23:22:34] <acrichto> snapshot bots are soooooooooo slow
[23:23:31] <cmr> it's painful :(
[23:25:40] <brson> acrichto: maybe we could set up new snapshot machines
[23:25:59] <brson> maybe the newer machines can do snapshots now
[23:26:03] <acrichto> brson: eh, it's not like we're making snapshots every few hours
[23:26:08] <acrichto> we probably have bigger fish to fry
[23:26:13] <acrichto> I'm just impatient lol
[23:26:15] <brson> the snapshot machines are very old oses for max binary compatibility
[23:26:56] <acrichto> makes sense
[23:29:00] *** Joins: new_one (new_one@75DA6967.1BCA12AB.B3C0173E.IP)
[23:30:28] <Eridius> r? https://github.com/mozilla/rust/pull/11942 related to cmr's PR
[23:33:05] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[23:35:58] *** Quits: pnkfelix (pnkfelix@moz-B1D2E7D0.pck.nerim.net) (Quit: rcirc on GNU Emacs 24.3.1)
[23:41:30] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[23:41:30] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/KkIOAA
[23:41:30] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[23:41:30] <acrichto> brson: fn read_bytes(&mut self, len: uint) -> IoResult<~[u8]>
[23:41:39] <acrichto> that used to be -> ~[u8]
[23:41:59] <cmr> acrichto: deconditioning io?
[23:42:02] <acrichto> what should happen when you requested N bytes, but you didn't read that many and then encountered an error?
[23:42:25] <acrichto> cmr: 129 files changed, 4229 insertions(+), 4083 deletions(-)
[23:43:03] <acrichto> brson: so with conditions, the condition raise would alert you that the array is too small, but otherwise the return value would look like Result<~[u8], (~[u8], IoError)>
[23:43:05] <acrichto> which seems weird
[23:43:53] <Eridius> acrichto: maybe return (~[u8], Option<IoError>) and mark IoError as #[must_use]? (does #[must_use] propagate outwards?)
[23:44:11] <Eridius> well, Option<~[u8]> possibly, to avoid allocation a zero-length vec :/
[23:44:21] <acrichto> #[must_use] doesn't propagate
[23:44:29] <acrichto> you also must do an allocation
[23:44:35] <Eridius> although I suppose with the DST proposal a zero-length ~[u8] coudl actually have the data pointer be NULL
[23:44:47] <acrichto> I'm tempted to say that if you want to be super fancy then don't call this method
[23:44:55] <acrichto> this is just a convenience method
[23:45:00] <Eridius> why does this allocate anyway, instead of taking a &[u8] and filling it?
[23:45:01] *** Joins: lpy (lpy@4F2FE573.2EDA7147.E99F7FDB.IP)
[23:45:11] <cmr> it's a convenience method
[23:45:15] <Eridius> hmm
[23:45:18] <cmr> .read() takes a &mut [u8]
[23:45:21] <Eridius> ah
[23:45:22] <acrichto> there are many flavors of methods on readers
[23:45:23] <acrichto> this is just one
[23:45:55] <Eridius> ok, then just use IoResult<~[u8]> and maybe document the fact that if an error is encountered after a partial read, the partially-read data is discarded and that .read() should be used if you want it
[23:46:14] <acrichto> well yeah, that's the question
[23:46:17] <acrichto> is that the right thing to do?
[23:46:29] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[23:46:29] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/H2_FtQ
[23:46:29] <ghrust> 13rust/06auto 1489278f7 15Nathaniel Herman: Make size_of, align_of, and element_offset functions return u64 instead of uint in trans::machine (per #5172)
[23:46:29] <ghrust> 13rust/06auto 147ac516a 15bors: auto merge of #11759 : nathanielherman/rust/master, r=alexcrichton...
[23:46:29] <Eridius> acrichto: it seems to me #[must_use] should propagate. Embedding Result in another type may not make much sense, but this attribute can be used on other things (e.g. IoError)
[23:46:30] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[23:46:54] <acrichto> Eridius: perhaps, it's much easier for it to not propagate
[23:47:05] <Eridius> if we document .read_bytes() as saying it must read the given number of bytes, then throwing them away on error is reasonable
[23:47:05] *** Quits: lpy (lpy@4F2FE573.2EDA7147.E99F7FDB.IP) (Ping timeout)
[23:47:09] <acrichto> I like starting with the easy thing and then trying to understand why it's not sufficient
[23:48:15] <cmr> So
[23:48:24] <cmr> Do we run tests in both opt and nopt configurations?
[23:48:38] <acrichto> yes
[23:48:59] <cmr> ok goo
[23:49:01] <cmr> d
[23:49:02] <acrichto> *-opt == optimize, *-nopt-c == not-optimized compiler, no tests run, *-nopt-t == optimized compiler, unoptimized tests
[23:49:22] <cmr> I'm always frightened that LLVM is going to optimize out test cases I write
[23:51:39] *** flaper87 is now known as flaper87|afk
[23:59:01] <brson> acrichto: agree with Eridius that as long as there's a way to not discard the bytes, that read_bytes can, as long is it's documented. tough call
[23:59:54] <Eridius> it simplifies .read_bytes() and makes it a convenience call to use when you know you want all the bytes
