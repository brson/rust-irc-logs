[00:01:09] <jedisct1> I think yes, this is what he got on Linux
[00:01:21] *** Quits: mihneadb (mihneadb@E48845AB.3A9F9BD4.4C2245EF.IP) (Ping timeout)
[00:01:51] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[00:01:57] *** Quits: lkuper (lkuper@63686BC7.F689A8C9.EB438161.IP) (Quit: lkuper)
[00:02:41] *** Quits: mschifer (Adium@moz-BBE3ABD.mv.mozilla.com) (Quit: Leaving.)
[00:04:23] <tikue> rusti: use std::rand; let v = [1, 2, 3]; let rng = rand::rng(); rng.shuffle(v)
[00:04:24] -rusti- <anon>:5:66: 6:5 error: type `std::rand::IsaacRng` does not implement any method in scope named `shuffle`
[00:04:24] -rusti- <anon>:5          use std::rand; let v = [1, 2, 3]; let rng = rand::rng(); rng.shuffle(v)
[00:04:24] -rusti- <anon>:6     };
[00:04:24] -rusti- error: aborting due to previous error
[00:04:25] -rusti- application terminated with error code 101
[00:04:25] *** Joins: eschweic (Adium@moz-BBE3ABD.mv.mozilla.com)
[00:04:44] <cmr> rusti: use std::rand; use std::rand::RngUtil; let v = [1, 2, 3]; let rng = rand::rng(); rng.shuffle(v)
[00:04:45] -rusti- <anon>:5:90: 5:93 error: cannot borrow immutable local variable as mutable
[00:04:45] -rusti- <anon>:5          use std::rand; use std::rand::RngUtil; let v = [1, 2, 3]; let rng = rand::rng(); rng.shuffle(v)
[00:04:45] -rusti-                                                                                                    ^~~
[00:04:45] -rusti- error: aborting due to previous error
[00:04:46] -rusti- application terminated with error code 101
[00:04:51] <cmr> rusti: use std::rand; use std::rand::RngUtil; let v = [1, 2, 3]; let mut rng = rand::rng(); rng.shuffle(v)
[00:04:52] -rusti- ~[1, 3, 2]
[00:04:59] <tikue> rusti: use std::{rand, RngUtil}; let v = [1, 2, 3]; let rng = rand::rng(); rng.shuffle(v)
[00:05:01] -rusti- pastebinned 8 lines of output: http://ix.io/7aV
[00:05:01] <cmr> Really, why isn't RngUtil in the prelude yet?
[00:05:11] <cmr> And/or why haven't they been updated to default methods
[00:05:27] <brson> jedisct1: can you try setting RUST_THREADS=1?
[00:05:33] <tikue> rusti: use std::rand; use std::rand::RngUtil; let v = [1, 2, 3]; let rng = rand::rng(); rng.shuffle(v)
[00:05:34] -rusti- <anon>:5:90: 5:93 error: cannot borrow immutable local variable as mutable
[00:05:34] -rusti- <anon>:5          use std::rand; use std::rand::RngUtil; let v = [1, 2, 3]; let rng = rand::rng(); rng.shuffle(v)
[00:05:34] -rusti-                                                                                                    ^~~
[00:05:34] -rusti- error: aborting due to previous error
[00:05:35] -rusti- application terminated with error code 101
[00:05:35] <brson> jedisct1: rt::io is not threadsafe
[00:05:46] <tikue> rusti: use std::rand; use std::rand::RngUtil; let v = [1, 2, 3]; let mut rng = rand::rng(); rng.shuffle(v)
[00:05:47] -rusti- ~[1, 2, 3]
[00:05:48] <jedisct1> brson: tried. Same thing.
[00:05:53] <tikue> rusti: use std::rand; use std::rand::RngUtil; let v = [1, 2, 3]; let mut rng = rand::rng(); rng.shuffle(v)
[00:05:54] -rusti- ~[3, 2, 1]
[00:05:57] *** Quits: Kroisse (Kroisse@7CF4064D.E3B51CAE.ECA1BB11.IP) (Ping timeout)
[00:06:21] <jedisct1> What does RUST_THREADS=1 do?
[00:06:22] <brson> strcat: jedisct1 said nginx was in that same ballpark. why is 2k/s slow?
[00:06:33] <tikue> cmr: What would RngUtil being in the prelude mean? you'd still have to import rand right
[00:06:36] <brson> jedisct1: sets the number of task scheduler threads
[00:06:44] *** Joins: Kroisse (Kroisse@7CF4064D.E3B51CAE.ECA1BB11.IP)
[00:06:48] <brson> jedisct1: by defaults it's the same as the number of cores
[00:06:50] <cmr> tikue: it would mean you wouldn't need to import RngUtil to use the methods
[00:06:54] <jedisct1> Oh ok.
[00:07:28] <engla> strcat: you can't dislike the peekable after seeing how nice the set operation look with it. https://github.com/blake2-ppc/rust/blob/569874ed440c8fc99b8203178ae630b4144b36f9/src/libextra/treemap.rs#L598  also, they don't need .peek_clone()
[00:07:44] <strcat> engla: that's great
[00:07:52] <jedisct1> Mmmm... even with RUST_THREADS=1, I see it using 4 threads
[00:07:59] <tikue> cmr: how would they work as default methods? like ```let mut v = [1, 2, 3]; v.shuffle()```
[00:08:08] <cmr> tikue: No, the default methods would be on Rng.
[00:08:14] <tikue> oh ok
[00:08:15] <cmr> Rather than having impl<T: Rng> RngUtil for T
[00:08:23] <tikue> ah 
[00:08:23] <strcat> brson: what's the github link to the rust http server again?
[00:08:26] <jedisct1> When was support for RUST_THREADS committed? I compiled rust like 3 days ago.
[00:08:36] <cmr> strcat: https://github.com/chris-morgan/rust-http
[00:08:51] <cmr> jedisct1: a long time ago ;p
[00:08:54] * strcat has the old hg repo cloned
[00:09:01] <brson> strcat: that's not the code jedisct1 is testing
[00:09:06] <strcat> oh
[00:09:19] <jedisct1> I can push it to github
[00:09:32] <jedisct1> Hold on
[00:09:53] <cmr> Anyone familiar with extra::json? I'm having test failure with https://github.com/cmr/rust/commit/635b06a9e4d3e65f8e088d057122f3f910ab17dc, and I can't figure out how, why, or where.
[00:09:59] <brson> jedisct1: it's always existed. on mac with RUST_THREADS=1 i would actually expect there to be 3 total, but only one is used for scheduling tasks. not sure what the other one might be
[00:10:09] <cmr> It has sometime to do with the closure being passed to read_enum_variant I thinki
[00:10:16] <cmr> but I don't know what it is or what it's supposed to do :\
[00:10:44] <cmr> or where it comes from.
[00:11:06] <strcat> brson: well I'm not sure exactly what we're testing now ;]
[00:11:11] *** Joins: eschweic1 (Adium@moz-BBE3ABD.mv.mozilla.com)
[00:11:16] *** Quits: eschweic (Adium@moz-BBE3ABD.mv.mozilla.com) (Connection reset by peer)
[00:11:21] <strcat> I get 6.5k/s requests per second from the rust-http one
[00:11:28] <strcat> but maybe you're actually serving files
[00:11:45] *** Joins: Yurume_ (yurume@AC58A8CE.8A059B47.E313B915.IP)
[00:11:52] <jedisct1> strcat: https://github.com/jedisct1/rust-httpserver
[00:12:13] <jedisct1> No, not serving files, just echoing the path
[00:12:24] <jedisct1> But there's no keepalive.
[00:12:58] <brson> what are some published videos about rust (not servo)?
[00:13:00] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[00:13:03] <brson> need links for the wiki
[00:13:09] <brson> is it just dherman's one strange loop talk?
[00:13:15] <cmr> brson: afaik yes
[00:13:22] <cmr> there are lots of slides though :p
[00:13:26] <strcat> jedisct1: are you just using ab, or something else?
[00:13:30] <jedisct1> I use siege
[00:13:33] <strcat> ah
[00:13:35] <strcat> Requests per second:    5841.04 [#/sec] (mean)
[00:13:38] <strcat> from ab
[00:13:39] * strcat tries siege
[00:14:07] <brson> cmr: oh :( that's disappointing
[00:14:10] <jedisct1> Is that on OSX?
[00:14:16] <strcat> jedisct1: no, linux
[00:14:59] <jedisct1> Try siege -c 100 -q -b -t 30s http://localhost:8000
[00:15:25] <strcat> httptest: /build/rust-git/src/rust/src/libuv/src/unix/linux-core.c:144: uv__io_poll: Assertion `w->fd < (int) loop->nwatchers' failed.
[00:15:28] <strcat> ;[
[00:15:34] <strcat> I guess this is why you need to set threads to 1?
[00:15:43] *** Quits: dherman (dherman@moz-FEEC7E9.hsd1.ut.comcast.net) (Quit: dherman)
[00:16:13] <brson> strcat: I think RUST_THREADS=1 fixes that, yes
[00:16:23] <strcat> Transaction rate:     6367.87 trans/sec
[00:16:30] <jedisct1> With siege and my code?
[00:16:31] <jedisct1> Wow.
[00:16:32] <strcat> yes
[00:16:37] <brson> my most recent test with opts on has something more like that too
[00:16:42] <cmr> (we call that "good hardware" ;p)
[00:16:46] <strcat> it's a dual core laptop
[00:16:49] <strcat> Linux thinktank 3.10.5-1-ARCH #1 SMP PREEMPT Mon Aug 5 08:04:22 CEST 2013 x86_64 GNU/Linux
[00:16:52] * strcat shrugs
[00:16:55] <jedisct1> Good to see that it works fine on Linux...
[00:17:09] <jedisct1> But on OSX I get the SIGPIPE everytime
[00:17:12] <brson> strcat: did you compare to nginx?
[00:17:23] <strcat> I'll do that now
[00:17:24] <brson> raw numbers don't mean much to me
[00:17:57] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[00:17:57] *** ChanServ sets mode: +o tjc
[00:18:00] <brson> jedisct1: still building on os x ...
[00:18:01] <cmr> tjc: ping
[00:18:05] <brson> my macbook is old
[00:18:12] <tjc> cmr: pong
[00:18:14] <strcat> brson: with nginx configured a certain way?
[00:18:23] <brson> strcat: with 1 worker
[00:18:31] <brson> multithreading is cheating
[00:18:47] <strcat> worker_processes is 1, is there something else to change too?
[00:18:54] *** Joins: mihneadb (mihneadb@E48845AB.3A9F9BD4.4C2245EF.IP)
[00:18:56] <cmr> tjc: rustdoc_ng nears mainline-readiness. would it be possible to set it up to build with rustpkg, thus being the first package in rust to be built with it?
[00:18:58] <brson> strcat: idk anything about nginx really
[00:19:04] <brson> jedisct1: do you know what strcat should do?
[00:19:15] <tjc> cmr: I think it's at a point where you could at least try to use rustpkg
[00:19:33] <tjc> cmr: the big thing missing is workcache, so, rustpkg will recompile stuff unconditionally
[00:19:39] <ecr> so...default methods in traits...is that working yet?
[00:19:41] <tjc> I'm working on that, but workcache itself needs work, so
[00:19:44] <strcat> it's not really going to be fair because nginx is serving several actual files
[00:19:46] <cmr> ecr: yes, works quite well
[00:19:47] *** Quits: pcwalton (pcwalton@moz-BBE3ABD.mv.mozilla.com) (Quit: pcwalton)
[00:19:49] <strcat> Transaction rate:    14612.10 trans/sec
[00:20:00] <tjc> cmr: I'd love for you to be a guinea pig for it, but be prepared to find/report bugs if so
[00:20:12] <cmr> tjc: I already build it with rustpkg locally
[00:20:14] <strcat> brson: http://ix.io/7aX serving this file
[00:20:19] <strcat> hm
[00:20:26] <cmr> only bug so far is the #[link(name)] one
[00:20:30] <ecr> cmr: I assume the syntax is just giving the method a body in the trait definition? I did that but I'm getting a 'does not implement method' error.
[00:20:33] <tjc> cmr: then I don't see why not, as far as building it with rustpkg on the botsâ€¦ should be a good test
[00:20:42] <brson> strcat: thanks. that's not too discouraging
[00:21:08] <cmr> ecr: https://github.com/mozilla/rust/blob/master/src/libstd/iterator.rs#L51 is an example
[00:21:20] <brson> been running siege for several minutes here on linux. totally pleased that it's not crashing
[00:21:43] <ecr> cmr: thanks
[00:22:10] <tjc> cmr: oh yeah, I should try to fix the link thing while I'm bisecting other stuff
[00:22:14] *** Quits: jedisct1 (Mibbit@F4489DB3.9747582C.3464FAC3.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:22:25] <strcat> brson: I get ~6k/s from both rust web server impls
[00:22:37] <cmr> tjc: I have almost 400 revisions of rustc, whatcha need bisected? :)
[00:22:46] <strcat> maybe I should try go or node.js
[00:22:58] <tjc> cmr: haha, well, I get a segfault building master (with no changes from me) on my machine, while building docs...
[00:23:01] <tjc> and it doesn't happen on the bots
[00:23:02] <cmr> ah
[00:23:04] <cmr> yikes
[00:23:05] <tjc> so you may not be able to reproduce it
[00:23:11] <cmr> yeah I haven't seen anything like that
[00:24:00] <dbaupp> tjc: is it a stack overflow, given the newrt doesn't have expanding stacks yet?
[00:24:54] <tjc> dbaupp: seems likely. I'm guessing bisection will identify the newrt patch. I want to be sure, though
[00:25:25] <brson> strcat: go and node are the most interesting comparisons imo
[00:26:01] <brson> tjc: there's a patch in the queue to raise rustc's stack size to 6mb
[00:26:09] <tjc> brson: great!
[00:26:10] <engla> strcat: do you want me to open a PR with both SimonSapin's and my treemap commit together?
[00:26:14] <strcat> engla: yeah
[00:26:20] <brson> maybe i should go ahead and put an abort in __morestack. it probably wouldn't take but a few days
[00:26:20] <strcat> that'd be ideal
[00:26:24] *** Quits: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com) (Quit: ecr)
[00:26:31] <engla> and without .peek_clone?
[00:26:38] <brson> need to remove the c++ runtime first
[00:26:48] <strcat> brson: I get 6.7k/s from node
[00:26:55] <strcat> compared to 6.5k/s from rust
[00:27:08] <brson> nice!
[00:27:19] <strcat> trying go
[00:28:03] <strcat> wow Go is huge now
[00:28:05] <strcat> 287MiB, wat
[00:28:26] <sam113101> do you like Go?
[00:28:40] <engla> strcat: effects of static linking?
[00:28:44] <strcat> brson: Go does 12k/s
[00:29:31] <brson> strcat: can you tell if it's doing multithreading?
[00:29:43] <engla> SimonSapin: I'm going to rebase your peekable branch and republish it, is that OK?
[00:29:50] <strcat> brson: set
[00:29:53] <strcat> sec*
[00:30:19] <strcat> brson: yeah it's using 4 threads
[00:30:22] <strcat> don't know how to stop it
[00:31:13] *** Quits: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com) (Quit: eatkinson)
[00:32:06] <brson> strcat: GOMAXPROCS=1?
[00:32:13] <strcat> brson: still using 4 threads :s
[00:32:53] <strcat> brson: even with runtime.GOMAXPROCS(1), it uses 4.
[00:33:08] <strcat> brson: http://ix.io/7aZ *shrug*
[00:34:10] <strcat> brson: I could just use schedtool to restrict it to 1 cpu
[00:34:22] <strcat> I'm not sure that's fair since it will probably still spawn 4
[00:35:36] *** Joins: dim-an (ermolovd@moz-FE167E47.nationalcablenetworks.ru)
[00:35:52] <strcat> brson: it's not actually gaining anything from threads
[00:36:03] <strcat> it's still 12k/s with or without being locked to 1 cpu
[00:36:07] <strcat> it doesn't max out the cpu
[00:36:15] <strcat> 87% usage on that core
[00:36:49] <strcat> you'd have to be doing more than hello world
[00:37:06] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[00:37:50] * strcat doesn't understand how go can be that huge
[00:38:03] <brson> we've got some work cut out for us
[00:38:32] <sully> tjc: hey, I have another match codegen change I want to land
[00:38:44] <sully> tjc: could I just push it into my existing PR and have you take a look at it?
[00:39:14] *** Quits: graydon (graydon@moz-F14EE0DB.cable.teksavvy.com) (Ping timeout)
[00:39:35] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[00:39:45] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[00:39:55] *** Quits: Yurume_ (yurume@AC58A8CE.8A059B47.E313B915.IP) (Connection reset by peer)
[00:40:04] *** Quits: Kroisse (Kroisse@7CF4064D.E3B51CAE.ECA1BB11.IP) (Ping timeout)
[00:40:37] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[00:41:17] *** Joins: Kroisse (Kroisse@7CF4064D.E3B51CAE.ECA1BB11.IP)
[00:41:43] <sully> guess not
[00:42:49] *** Joins: vk_ (chatzilla@F92596F.2DEF7520.EF7679FA.IP)
[00:43:25] <strcat> brson: the go program spends 60% of the time in Go, and 40% in the kernel
[00:43:29] <strcat> doesn't hit libc
[00:44:30] <tikue> brson: work cut out for what? i missed the topic of conversation
[00:44:39] <strcat> although nginx is faster despite the fact that it has to serve a file
[00:45:24] <Seldaek> strcat: I doubt it hits the file system at all though, so probably doesn't add so much overhead
[00:45:35] <strcat> yeah it uses sendfile
[00:45:38] <Seldaek> but definitely interesting numbers
[00:45:44] <strcat> so I don't think it even hits the ext4 driver
[00:46:11] * strcat shrugs
[00:46:29] *** Joins: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com)
[00:46:47] <strcat> I don't understand why perf dumps so much crap in ~/.debug
[00:46:54] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[00:46:54] *** ChanServ sets mode: +o tjc
[00:47:10] *** Joins: z0w0 (zack@moz-E12708D5.lns6.woo.bigpond.net.au)
[00:47:13] <tjc> sully: sorry, was afk -- sure, i can take a look at it
[00:47:22] <sully> ok, one second, about to p ush
[00:47:35] <vk_> Hey all, what does this error, "error: the type of this value must be known in this context", mean? It's coming up on '&Text(s)', error on Text.
[00:47:38] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Client exited)
[00:47:46] <engla> strcat: https://github.com/mozilla/rust/pull/8428 rebased, new PR
[00:47:47] <cmr> vk_: it means type inference failed earlier on
[00:47:56] <cmr> ...where I've seen it
[00:47:56] <strcat> engla: yeah, r+'ed already :)
[00:48:03] <engla> haha ok thanks
[00:48:08] <sully> tjc: https://github.com/mozilla/rust/pull/8403
[00:48:12] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[00:48:26] <tjc> sully: ok, looking
[00:48:56] <brson> tikue: matching go's networking perf
[00:49:05] <brson> they are surprisingly fast
[00:49:28] <dbaupp> strcat: is that sending a static file?
[00:49:31] <tikue> ah i see.
[00:49:35] <strcat> dbaupp: yes but it's sending it from memory anyway
[00:49:45] *** Joins: dherman (dherman@moz-FEEC7E9.hsd1.ut.comcast.net)
[00:49:45] *** ChanServ sets mode: +o dherman
[00:49:51] <tjc> sully: approved, thanks!
[00:49:53] <dbaupp> strcat: oh, sendfile works in memory?
[00:50:01] <strcat> dbaupp: well all file operations do
[00:50:11] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[00:50:11] <strcat> but sendfile doesn't require read/write calls
[00:50:13] <vk_> cmr: hrm. any methods of figuring out why/how the type inference is failing? 
[00:50:17] <tikue> i mean, eventually i would assume rust will be doing more than matching go's networking performance, no? brson 
[00:50:22] <cmr> vk_: it should explicitly be an error
[00:50:29] <strcat> for the recap, 6.5k/s for rust, 6.7k/s for node.js, 12k/s for go, 15k/s for nginx
[00:50:29] <sully> tjc: thanks
[00:50:32] <cmr> vk_: is that the *only* error you have?
[00:50:47] <strcat> and nginx is doing more work in theory since it's serving a file, the others are just hello world ones
[00:51:03] <cmr> strcat: perhaps you could compare it to a pure-C libuv http server?
[00:51:12] <strcat> if someone can point me at one ;p
[00:51:37] <vk_> nope, having these errors as well: https://github.com/erickt/rust-mustache/issues/4, but they didn't really seem related.
[00:51:50] <strcat> could try https://github.com/philips/libuv-webserver
[00:52:00] <strcat> probably won't compile anymore :s
[00:52:03] <cmr> https://github.com/springmeyer/libuv-webserver seems to be more robust
[00:52:06] <cmr> and also recently updated
[00:52:16] *** Quits: eschweic1 (Adium@moz-BBE3ABD.mv.mozilla.com) (Quit: Leaving.)
[00:52:48] <strcat> yay it assumes python is python2.x
[00:52:56] * strcat makes a fake bin dir to prepend to PATH
[00:53:42] <cmr> vk_: weird, it's definitely related I think but I can't untangle what the compiler is trying to say
[00:53:56] <strcat> cmr: it does a ton of debug printing :|
[00:54:07] *** Parts: nrc|afk (nrc@7BE24E90.A5032A01.3CFC199D.IP) ()
[00:54:20] <strcat> 19k/s
[00:54:26] <cmr> woo!
[00:54:30] <cmr> is that one thread?
[00:54:38] <strcat> I don't know, the default - let me look in htop
[00:54:46] <strcat> cmr: no, 4 threads
[00:55:16] <strcat> but it's only getting to ~80% on a single cpu core
[00:55:16] <brson> looks like jedisct1 left ...
[00:55:27] <strcat> Transaction rate:    19110.03 trans/sec
[00:55:35] *** Quits: dim-an (ermolovd@moz-FE167E47.nationalcablenetworks.ru) (Quit: dim-an)
[00:55:41] *** Quits: mihneadb (mihneadb@E48845AB.3A9F9BD4.4C2245EF.IP) (Input/output error)
[00:55:45] <strcat> final numbers: 6.5k/s for rust, 6.7k/s for node.js, 12k/s for go, 15k/s for nginx, 19k/s for libuv in C++
[00:55:50] <strcat> so ideally, we'd match C++ there.
[00:55:54] <cmr> yup
[00:56:01] <cmr> glad to know we're not limited by libuv then
[00:56:06] <cmr> I was kinda worried, with the node numbers
[00:56:18] *** Quits: dherman (dherman@moz-FEEC7E9.hsd1.ut.comcast.net) (Ping timeout)
[00:56:34] *** Joins: samx (sami@moz-48EC0983.dyn.optonline.net)
[00:57:14] <Seldaek> strcat: looking good! well at least hopeful ;)
[00:58:00] <brson> i can't reproduce jedisct1's i/o error on mac
[00:58:05] <strcat> brson: the libuv webserver is using joyent's http parser btw
[00:58:07] <Seldaek> strcat: do you happen to have numbers for a simple loopback socket? that'd be interesting too IMO to see the base overhead of the IO stuff
[00:58:21] <strcat> Seldaek: that would probably be ridiculously high ;p
[00:58:24] <strcat> hm
[00:58:30] <strcat> you mean not http?
[00:58:33] <strcat> just tcp
[00:58:43] <Seldaek> yeah I mean just blast data at it and have the server send it back
[00:58:46] <vk_> cmr: hrm. how about this, " error: mismatched types: expected `&&<V1087>` but found an enum or structure pattern"? 
[00:58:57] <Seldaek> plain tcp read/write
[00:59:50] <Seldaek> strcat: just curious to see what part of the 6.5k/s is due to networking and how much http parsing
[01:00:12] *** Joins: Michael_ (chatzilla@moz-985E1E74.sw.biz.rr.com)
[01:00:17] *** Michael_ is now known as michael_rb
[01:00:33] <strcat> Seldaek: it's not maxing out the kernel's I/O capabilities
[01:00:45] <strcat> need a really tight epoll loop like that C++ program turns into
[01:00:45] <brson> strcat: you might want to try applying https://github.com/mozilla/rust/pull/8419 too
[01:00:51] <cmr> vk_: promising, usually that means you need &Variant
[01:01:06] <vk_> cmr: &Variant?
[01:01:08] <brson> the scheduler code on master suffers from rtdebug! doing a bunch of allocation
[01:01:14] <strcat> brson: I'll try again tommorow
[01:01:16] <cmr> vk_: enum variant, yes
[01:01:28] * strcat actually had a day old rustc atm anyway
[01:01:46] *** Joins: hjr3 (hradtke@moz-842BF853.hsd1.ca.comcast.net)
[01:02:29] <Seldaek> changes happen faster than my laptop can compile :/
[01:03:12] <engla> the buildbots say the same
[01:03:18] <strcat>  14.54%  httptest  libstd-6c65cf4b443341b1-0.8-pre.so     [.] str::is_utf8::_883a4eebbe9e7195::_0$x2e8$x2dpre
[01:03:27] <cmr> strcat: yeah that's what my PR fixes
[01:03:50] <cmr> it happens everywherre in the runtime because of a shoddy rtdebug!() implementation that always calls fmt!
[01:03:53] <strcat> we can make strings/vectors much faster anyway
[01:03:59] <strcat>   0.57%  httptest  libpthread-2.17.so                     [.] pthread_setspecific
[01:04:02] <strcat>   0.50%  httptest  libpthread-2.17.so                     [.] pthread_getspecific
[01:04:16] <strcat> hm
[01:04:26] <strcat> I wonder what it's using upcall_call_shim_on_c_stack for
[01:04:54] <dbaupp> strcat: perf --call-graph (or whatever the syntax is)?
[01:05:12] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[01:05:22] <cmr> clock_gettime is also really slow
[01:05:26] <cmr> or, at least, a major part of performance
[01:05:40] <strcat> then we're doing something wrong
[01:05:49] <cmr> Well, when using a crappy clocksource
[01:05:51] <cmr> nevermind
[01:05:54] <cmr> (http://octayn.net/benches/nortdebug_pingpong.svg vs http://octayn.net/benches/nortdebug_pingpong_tsc.svg)
[01:06:06] <strcat> clock_gettime with CLOCK_MONOTONIC or CLOCK_MONOTONIC_RAW doesn't even do a syscall for me
[01:06:09] <cmr> forgot about that detail
[01:07:06] <strcat> it's not even whitelisted for rusti 
[01:07:44] <cmr> vk_: oh lord you're porting code from 0.5
[01:07:47] <cmr> vk_: good luck!
[01:07:52] <vk_> cmr: thanks :)
[01:08:21] <strcat> cmr: it's from the header processing
[01:08:24] <strcat> mostly
[01:08:28] <strcat> our strings are so slow
[01:08:35] <cmr> ah
[01:08:42] <strcat> and afaik http headers aren't utf-8 so it shouldn't use str at all
[01:08:46] <cmr> nope
[01:09:08] <brson> strcat: why are our strings slow?
[01:09:31] <strcat> brson: we just have really slow utf-8 decode/encode and we pay a lot for FFI still
[01:09:42] <strcat> malloc is ~2-3x as slow as C++ for small objects
[01:09:43] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[01:09:55] <strcat> don't know why
[01:10:39] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[01:10:40] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[01:10:40] *** ChanServ sets mode: +o tjc
[01:10:52] <strcat> brson: for example conversion from [u8] -> str is two-pass
[01:10:56] <strcat> once to check that it's utf-8, again to copy
[01:11:03] *** Quits: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Quit: ozten)
[01:11:03] <cmr> someone write a str benchmark and I can poke around at it
[01:11:04] <strcat> probably the wrong way to do it
[01:11:31] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[01:11:57] <engla> ~[u8] to str is without copy though, just check
[01:12:19] <doomlord_> utf8, thats the extended char stuff ? i was running into  is_boundary_char() assertions in code that assumed strings where just like c_chars i think
[01:12:37] <strcat> doomlord_: they aren't
[01:12:47] <strcat> `char` is a ucs4 code point, `str` is a utf-8 encoded string
[01:12:52] <dbaupp> cmr: #[bench] fn bench_utf8() { let v = &[some bytes]; do bh.uter { is_utf8(v) } }
[01:13:00] <strcat> you don't want str if you have arbitrary bytes
[01:13:13] <engla> there's an is_utf8 bench in the str module, but I don't think it's very good
[01:14:02] <strcat> brson: there are lots of perf problems in str that I fixed for vectors already
[01:14:05] <strcat> now that I look
[01:14:18] <strcat> with_capacity does 2 allocations, Add does 2 allocations, etc.
[01:14:26] <strcat> lots of easy fixes
[01:14:48] <dbaupp> has the remove-nulls patch landed yet?
[01:15:00] <cmr> I think so?
[01:15:08] <brson> no
[01:15:33] <engla> doesn't the remove-nulls patch remove much of the special cases from str (compared to vec)?
[01:16:49] *** Quits: bent (chatzilla@moz-932324BF.hsd1.ca.comcast.net) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[01:18:13] *** Joins: brianm (brianm@moz-9B7D279E.dsl.static.sonic.net)
[01:18:55] <strcat> acrichto also has a PR open migrating the remaining users of the old offset fn to inbounds offset
[01:19:35] *** Quits: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[01:19:50] <strcat> hm
[01:20:01] <strcat> doesn't seem like anything important still used it though
[01:20:45] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[01:21:34] <erickt> dbaupp: remove-nulls is sooo close to landing
[01:21:55] <erickt> dbaupp: if only everyone else would just stop working so I could fix all these silly little issues on windows
[01:22:21] <strcat> 59 pull requests :s
[01:23:03] <dbaupp> erickt: sneak a transient bug into a pr so nothing else can land :P
[01:23:52] <erickt> well just as long as no one approves a PR with a priority of 2, I'm golden
[01:23:57] <cmr> strcat: and I closed 14 in a rollup the other day :\
[01:24:00] <erickt> I'm up next at the moment
[01:24:10] *** Quits: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se) (Client exited)
[01:24:34] <cmr> bors isn't keeping up very well
[01:24:46] <cmr> there are lots of non-approved ones though
[01:24:48] <erickt> I think our problem is we just test far too much. Our builds would go a lot better if we did a `rm -r src/test`
[01:25:21] <cmr> erickt: you mean, the problem is rustc is too slow for small crates ;p
[01:25:39] <erickt> :)
[01:25:53] *** Joins: jedisct1 (Mibbit@moz-2FCD418B.hsd1.ca.comcast.net)
[01:26:09] <nmatsakis> erickt: my poor little pr seems to have just sunk further down in the queue. all you p=1 folk
[01:26:10] <erickt> I'm willing to consider that making rustc faster for small crates may be better than my solution
[01:26:27] <erickt> hey nmatsakis! welcome back from paris :)
[01:26:37] <nmatsakis> thanks :)
[01:27:35] <erickt> nmatsakis: well, you have the advantage of getting a 3 hour head start over us west coasters on getting PRs into bors
[01:27:53] <cmr> bors is always busy, there's not really an advantage
[01:27:56] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[01:28:24] <erickt> cmr: yeah but he could increase the priority of his stuff and no one would be awake to catch him :)
[01:28:33] <cmr> that's true!
[01:29:05] <nmatsakis> erickt: you'd think this would help, but not today :)
[01:29:18] *** Quits: hjr3 (hradtke@moz-842BF853.hsd1.ca.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[01:29:21] <nmatsakis> but hmm p=100 here we come
[01:29:44] <nmatsakis> consider that my branch for #3678 is blocked on that PR... I may have to up the priority at some point :)
[01:30:04] <cmr> do it now :p
[01:30:19] <erickt> noooo
[01:30:31] <nmatsakis> don't worry erickt, I'll let bors run his course :)
[01:30:32] <erickt> after me :)
[01:30:47] <nmatsakis> at least for now
[01:30:54] <nmatsakis> since I'm going to sleep anyhow
[01:31:07] <erickt> ok :) gnight!
[01:31:10] <nmatsakis> I think I just fixed the last bug in my &object/~object branch tho
[01:31:21] <nmatsakis> so hopefully that will be landing soon too...
[01:31:29] <erickt> do our try bots still work? That'd probably be a better way for me to shake out my windows issues
[01:31:40] <nmatsakis> I'm not sure :/
[01:31:44] <cmr> I don't think so
[01:31:51] <cmr> the windows one has been broken for a long time afaik
[01:31:56] <cmr> maybe it has been fixed?
[01:32:01] *** Joins: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP)
[01:32:23] <nmatsakis> ok, night
[01:32:32] <Seldaek> erickt: I have a fresh windows  build if I can help with anything..
[01:32:46] <erickt> cmr: ooh try worked back on http://buildbot.rust-lang.org/tgrid?branch=try&refresh=15
[01:32:52] <erickt> which was just 6 days ago
[01:32:58] <erickt> Seldaek: thanks for the offer!
[01:33:15] <erickt> I'm just about to build now though
[01:33:23] <erickt> I *think* I'm okay
[01:33:32] <Seldaek> ok, only took me 1h30 ;)
[01:33:38] <erickt> !
[01:33:39] <brson> erickt: try bots do work
[01:33:40] <erickt> eek
[01:33:52] <Seldaek> and now I figured rust-sdl doesn't work on windows, so it was all for nothing :p
[01:34:01] <erickt> :(
[01:35:01] *** Joins: infynyxx (infynyxx@82680D2B.9F7BDBDF.8B824544.IP)
[01:35:16] *** Joins: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP)
[01:35:16] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/pibn-w
[01:35:16] *** Parts: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP) ()
[01:38:21] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[01:38:21] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/F-Djdw
[01:38:22] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[01:41:16] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[01:41:16] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/F-Djdw
[01:41:16] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[01:41:59] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: Places to go, people to annoy)
[01:42:17] *** Quits: infynyxx (infynyxx@82680D2B.9F7BDBDF.8B824544.IP) (Client exited)
[01:42:28] <brson> hey something merged!
[01:42:31] <brson> congrats
[01:42:44] <erickt> yay!
[01:42:48] <brson> i wish bors kept a log of successful integrations
[01:43:01] *** Quits: michael_rb (chatzilla@moz-985E1E74.sw.biz.rr.com) (Quit: ChatZilla 0.9.90.1 [Firefox 22.0/20130618035212])
[01:43:29] <cmr> I present to you, http://huonw.github.io/isrustfastyet/pull_requests/ !
[01:43:45] *** Quits: Jesin (Jessin_@moz-3AD6F09F.res.lehigh.edu) (Quit: Leaving)
[01:43:45] <brson> oh, but erickt yours didn't :(
[01:43:57] <erickt> already?!
[01:44:13] <brson> cmr: lol thanks for writing that in like 2s
[01:44:19] <brson> you're on top of things
[01:44:24] <cmr> hm?
[01:44:37] <cmr> dbaupp wrote that the other day
[01:44:38] * erickt shakes fist
[01:45:16] *** Joins: thesnowdog (doug@9842E8BA.8E46834.6F17036B.IP)
[01:46:13] <brson> that pull requests page is kinda lying. maybe it just records closed prs?
[01:46:31] <brson> some things there aren't merged
[01:46:34] <cmr> Is there any unsafe function for indexing a string?
[01:47:08] <cmr> to avoid bounds checks that is
[01:47:23] <erickt> cmr: you could transmute to a &[u8] and call .unsafe_get()
[01:47:34] <dbaupp> cmr: str::raw::slie_bytes or something
[01:47:52] <dbaupp> cmr: or .as_bytes()
[01:48:38] <engla> there is as_imm_buf to get the *u8
[01:48:51] <cmr> Context: I'm writing a longest-common-prefix function over a ~[~str]. The algorithm I'm using ensures that I'll never try to index past the end of a string, so I'd like to have zero-cost indexing because I can
[01:49:23] <engla> probably as_bytes and use vec methods?
[01:49:34] <cmr> alright
[01:50:19] <steven_is_false> cmr: Isn't indexing utf8 expensive?
[01:50:26] <cmr> steven_is_false: bytes indexing
[01:50:40] <steven_is_false> Okay, then you should probable be using as_bytes anyways.
[01:50:48] <cmr> I think it'll always be correct if I do it bytewise..
[01:51:02] <cmr> hm no it won't be, not at all
[01:51:52] <dbaupp> cmr: why?
[01:52:18] *** Quits: brianm (brianm@moz-9B7D279E.dsl.static.sonic.net) (Quit: Leaving...)
[01:52:20] <engla> you need to check char boundaries
[01:52:44] <cmr> "â˜ƒ"  and "â˜„"
[01:52:57] <cmr> have the same first 2 bytes
[01:53:02] *** Quits: jedisct1 (Mibbit@moz-2FCD418B.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[01:53:17] <cmr> if I strip the first two bytes since it's the longest common prefix, I'm now left with an invalid string
[01:53:51] <engla> you can always step backwards to the last char boundary
[01:53:54] <cmr> I suppose I could do that, and then look backwards to find the char boundary
[01:53:56] <cmr> right
[01:54:05] <engla> but that's not necessarily the longest common prefix anymore
[01:54:09] <engla> I think
[01:54:16] <cmr> it will be, char-wise
[01:54:49] <dbaupp> one could just check .is_char_boundary(current) and skip backwards one if that's false. I think.
[01:55:11] <engla> should it be the longest prefix in chars or graphemes or bytes?
[01:55:27] <cmr> ideally graphemes but chars works for now
[01:55:35] <cmr> I'm trying to robustly strip comments from docstrings
[01:56:19] *** Joins: mark_edward (quassel@moz-57A72B6E.hsd1.in.comcast.net)
[01:56:42] <dbaupp> cmr: I'd suggest that you use char iterators if possible; it'll make the transition to graphemes easier than hardcoding byte/char manipulations
[01:57:23] <cmr> dbaupp: ok
[01:58:58] <pnkfelix> brson: For log of bors-successful integrations, why not: "git log â€”author=bors" ?
[01:59:44] *** Joins: engla_ (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[02:00:31] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[02:01:58] *** Quits: eevee (eevee@moz-58058235.evrt.wa.frontiernet.net) (Connection reset by peer)
[02:02:11] *** Joins: eevee (eevee@moz-58058235.evrt.wa.frontiernet.net)
[02:04:26] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[02:04:40] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[02:04:40] <ghrust> 01[13rust01] 15erickt 04force-pushed 06try from 148116b64 to 14ee59aac: 02http://git.io/k471pw
[02:04:40] <ghrust> 13rust/06try 146011f83 15Erick Tryzelaar: std: minor cleanup
[02:04:40] <ghrust> 13rust/06try 1408b6cb4 15Erick Tryzelaar: std: add str.to_c_str()
[02:04:40] <ghrust> 13rust/06try 14fd293df 15Erick Tryzelaar: std: rewrite run::with_{argv,envp,dirp} to copy C strings
[02:04:41] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[02:08:32] <dbaupp> how do I get a backtrace for failure with the newrt with gdb?
[02:11:56] <cmr> dbaupp: should be the same, break on upcall_fail
[02:16:39] *** Quits: sebcrozet (sebcrozet@moz-A855F6C0.w82-127.abo.wanadoo.fr) (Ping timeout)
[02:20:30] *** Joins: Sergio965 (nobody@A989F00F.32AC2C96.3A99D594.IP)
[02:20:30] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[02:21:20] <Sergio965> So I've been wondering: if you're only using one task, shouldn't static mutable variable be safe?
[02:21:35] <Sergio965> variables*
[02:21:50] <cmr> Sergio965: there's no way the compiler can assert you're only using one task or not accessing the data from C or other code
[02:21:51] <tikue> Sergio965: is mutating an iterator while iterating safe?
[02:22:11] <Sergio965> tikue, how is that relevant?
[02:22:32] <tikue> Sergio965: it's an example of how you don't need more than one task to be unsafe with mutable state
[02:22:58] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:23:31] <Sergio965> cmr, why not? The variables are mangled, so it's unlikely they're being used by C code unless unmangled. It seems like it would be pretty easy to tell if two tasks reference the same global variable.
[02:23:48] <cmr> Sergio965: tasks are a library concept, they aren't baked into the compiler
[02:24:36] <Sergio965> Okay, but there's a massive amount of runtime support built around it.
[02:24:44] <cmr> the runtime is all normal rust code
[02:24:55] <Sergio965> Now it is.
[02:25:00] <cmr> And why would it make sense for the compiler to treat `static mut` differently depending on how it's used?
[02:25:04] <cmr> before it was just normal c++
[02:25:21] <dbaupp> Sergio965: one can pass &mutable_global to a C function
[02:25:46] <cmr> In theory yes, it can be proven to not race in some contexts.
[02:26:33] <Sergio965> dbaupp, at which point the compiler can tell you what you're doing is unsafe. But just passing it to C code doesn't make it racy.
[02:27:01] <ChrisMorgan> "borrowed pointer must be valid for the anonymous lifetime #1 defined on the block at 44:53..." "...but borrowed value is only valid for the block at 44:53"
[02:29:04] <Sergio965> It seems to me that Rust assumes everything is used concurrently and thus makes satix mutable variables unsafe. But static mutable variables are only unsafe if two concurrent/parallel routines can mutate the variable.
[02:29:04] <Sergio965> static*
[02:29:10] <ChrisMorgan> It takes a lot of thinking before that error message makes senseâ€”the 44:53 bit distracted me for quite some time.
[02:29:35] <Sergio965> If a static mutable variable is only used in one task, it's perfectly safe.
[02:29:43] <cmr> Sergio965: also no signal handlers
[02:29:59] <Sergio965> Calling it 'unsafe' is wrong.
[02:30:00] <cmr> Sergio965: And we have `unsafe` blocks for when you know something is perfectly safe
[02:30:33] *** Joins: Jesin (Jessin_@moz-1B1307FF.eecs.lehigh.edu)
[02:30:47] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[02:30:53] <cmr> That's what `unsafe` means: you're telling the compiler you know more than it does.
[02:30:53] <Sergio965> But there's nothing unsafe about it...
[02:30:59] <cmr> Sergio965: in some contexts
[02:31:16] <cmr> just like there's nothing unsafe about shared unlocked queues, in some contexts
[02:31:48] <Sergio965> Yes, and I believe it should let me use it safely when it's trivial to figure out everything is safe. I assert it's incorrect behavior.
[02:31:59] <strcat> so use TLS
[02:32:12] <cmr> PRs welcome
[02:32:18] <Sergio965> How do I do that?
[02:32:25] <cmr> http://static.rust-lang.org/doc/std/local_data.html
[02:33:07] <Sergio965> But I'm running in bare metal...
[02:33:21] *** Joins: fread2281 (Mibbit@moz-CB181B42.dia.static.qwest.net)
[02:33:21] <Sergio965> That's a solution, but honestly, the other way should work too.
[02:33:36] <doomlord_> anyone know if the ast keeps a span for each named type parameter .. i can't seem to find one, can't remember off hand if the compiler error messages actually ever underline one. i've certatinly got the type param nodes themselves, and i've got spans for their trait-bounds
[02:33:44] <cmr> additionally, it'd require special-casing all functions which let code run concurrently.
[02:34:03] <strcat> you can't really know
[02:35:27] <cmr> I don't think it's a big deal. Adding small #[inline] safe wrappers around a static mut is easy, and `unsafe` blocks aren't really a burden
[02:35:33] <Sergio965> cmr, at that point, you'd need to use 'unsafe'. 
[02:35:46] *** Quits: zz_kimundi (kimundi@moz-8FE337DC.dip0.t-ipconnect.de) (Ping timeout)
[02:36:31] <strcat> running on bare metal doesn't mean you have no threads - you just haven't implemented it
[02:36:31] <Sergio965> I just think it's fairly easy to statically verify when the use of a global mutable is safe and when it can potentially be unsafe.
[02:36:51] <Sergio965> strcat, yeah. That's quite a bit of work. :P
[02:36:56] <cmr> Sergio965: I don't think that analysis would be easy to implement or usefully define at all
[02:37:21] <doomlord_> i like the fact global mutables are thought of as unsafe 
[02:37:44] <strcat> they aren't memory safe, that's why they require unsafe
[02:37:55] <strcat> rust has a black and white approach to memory safety
[02:38:05] <Sergio965> strcat, they are if it's never accessed concurrently.
[02:38:10] <Sergio965> they're*
[02:38:11] <doomlord_> unsafe r.e. multiple tasks ?
[02:38:13] <strcat> Sergio965: and how do you prove that?
[02:38:18] <strcat> doomlord_: yes
[02:38:31] <strcat> there are safe task-local globals
[02:38:33] <strcat> std::local_data
[02:38:43] <Sergio965> strcat, assert no references to the variable exist concurrently?
[02:38:57] <strcat> Sergio965: you can't do that
[02:38:57] <cmr> The compiler currently has no concept of concurrency at all
[02:39:07] <Sergio965> strcat, kind of the way no two &mut references can be out at the same time.
[02:39:10] <strcat> rust doesn't know which calls may or may not involve concurrency
[02:39:12] *** Joins: zz_kimundi (kimundi@moz-E3F95B53.dip0.t-ipconnect.de)
[02:39:19] <strcat> Sergio965: borrow checking is *entirely* function-local analysis
[02:39:29] *** zz_kimundi is now known as kimundi
[02:39:39] <Sergio965> strcat, of course you can. See "Eracer"
[02:39:48] <strcat> it makes no attempt to cross function boundaries, let alone look into the C libraries you're calling
[02:40:22] <cmr> Sergio965: eraser isn't static analysis
[02:40:34] <Sergio965> If you're calling C, then it should immediately assume it will be used concurrently, that's okay.
[02:40:48] *** Quits: Ralith (ralith@moz-AB653EB1.wireless.sfu.ca) (Ping timeout)
[02:40:52] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[02:41:02] <Sergio965> cmr: True, but it's also operating under a much more dynamic scenario.
[02:41:22] <Sergio965> Here, the only source of concurrency we have is that of Tasks.
[02:41:29] <cmr> That's not true
[02:41:32] <cmr> Signal handlers too
[02:41:38] <Sergio965> (and whatever the user implements, which will be unsafe)
[02:42:07] <strcat> rustc isn't going to have whole program analysis, checking for errors
[02:42:11] <strcat> counter to the design goals
[02:42:25] <strcat> error checking is function-local
[02:42:28] <Sergio965> I'm just asking for the simple case.
[02:43:03] <strcat> changing the internals of one function causing an error in another function isn't going to be implemented
[02:43:40] <strcat> graydon is against even having module-level type inference
[02:44:01] <steven_is_false> I have a bunch of symbols like str10200 in my program. This would be a bug in Rust right?
[02:44:13] <Sergio965> Look at all static mutable variables. Take the intersection of all pairs of all tasks. Any non-zero sets of variables are declared unsafe.
[02:44:26] <strcat> Sergio965: it's not going to do global analysis like that
[02:44:37] <strcat> especially where every FFI definition has to define whether or not it's concurrent
[02:44:40] <cmr> Sergio965: And what about if you link to a crate that also uses your static mut?
[02:44:45] <Sergio965> The intersection of the set of static variables*
[02:45:02] <cmr> You can't know that, that is a link-time thing.
[02:45:08] <Sergio965> cmr: that doesn't change the analysis.
[02:45:22] <cmr> Sergio965: Why doesn't it? This other crate could do something concurrently with yours.
[02:45:33] <Sergio965> The compiler knows is the same variable.
[02:45:38] <Sergio965> it's
[02:45:41] <james4k> new to rust; is it recommended to run trunk or 0.7? i understand there's been a lot of changes already since 0.7
[02:45:46] <cmr> james4k: trunk
[02:45:49] <strcat> james4k: definitely trunk
[02:45:51] <tikue> Sergio965: what's wrong with simply using an unsafe {} block?
[02:45:57] <james4k> thanks
[02:45:58] <tikue> james4k: trunk!
[02:46:00] <strcat> if you're on ubuntu or arch linux there are even daily builds of trunk
[02:46:20] <Sergio965> tikue: I have to do it every time I reference the variable.
[02:46:34] <james4k> im on osx
[02:46:34] <tikue> Sergio965: make a helper function
[02:47:08] <james4k> though maybe ill jump over to the desktop
[02:47:16] <Sergio965> I currently use a macro for this.
[02:47:25] <Sergio965> But I don't see why I have to use 'unsafe' when it's not and it's easy to check.
[02:47:44] <tikue> james4k: i'm on osx, i just cloned the repo and do a dailyish git pull
[02:47:52] <tikue> easy enough
[02:48:06] <strcat> Sergio965: because global analysis is counter to the desire to have any internal change in a function only able to cause an internal error
[02:48:23] <strcat> and we aren't going to annotate every FFI definition with concurrency info
[02:48:35] <cmr> It could fit into the effect system maybe
[02:48:43] <cmr> since effects are part of the signature
[02:48:49] <Sergio965> strcat, can you elaborate? 
[02:48:49] <strcat> it's intended for interaction with other languages to be very easy, so it would be too much of a burden to require annotating all of that
[02:48:59] <Sergio965> What's the 'external' error?
[02:49:14] <Sergio965> And why do you have to annotate? 
[02:49:14] <strcat> Sergio965: edit the internals of 'fn foo()' and get an error elsewhere in the program
[02:49:18] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[02:49:27] <cmr> Sergio965: spawning a task that uses a static mut in a function causes every other use of that static mut to suddenly be unsafe.
[02:49:32] <cmr> outside of that function
[02:49:41] <strcat> Sergio965: because threads are started outside of rust
[02:49:46] <james4k> tikue: you build dailyish?
[02:50:05] <cmr> I build every few days or whenever there's a change I care about
[02:50:07] <tikue> james4k: it doesn't take all that long, at least it hasn't bothered me
[02:50:22] <strcat> all the information rust requires about FFI should be obtainable from C headers
[02:50:33] <james4k> :o
[02:50:40] *** Joins: brianm (brianm@moz-9B7D279E.dsl.static.sonic.net)
[02:50:41] <james4k> has it sped up recently?
[02:50:42] <strcat> if it's not in the headers, we can't depend on it being there or we're always going to be writing FFI definitions by hand
[02:50:48] <Sergio965> strcat, yeah, like I said before, calling C that uses static mutanle variables can just assume it will be used concurrently.
[02:51:09] <strcat> Sergio965: so your analysis will always assume there is concurrency
[02:51:14] <Sergio965> (sorry, on a phone)
[02:51:19] <Sergio965> No.
[02:51:39] <Sergio965> The variable needs to be passed to the C function...
[02:52:04] <strcat> Sergio965: C functions are passed raw pointers
[02:52:13] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[02:52:13] <strcat> rust doesn't know where raw pointers came from
[02:52:19] <Sergio965> And it can't just access it, though.
[02:52:38] <strcat> it knows essentially what LLVM knows about raw pointers
[02:52:43] <Sergio965> We know when it can access it because the variable was used as a parameter of a function.
[02:52:48] <Sergio965> of a C function
[02:52:59] <strcat> Sergio965: the variable wouldn't be used as a parameter of a C function
[02:53:04] <strcat> if you pass it by-value, it's not an issue
[02:53:14] <Sergio965> By reference.
[02:53:24] <strcat> right, and C functions are passed raw pointers
[02:53:29] <strcat> which rust doesn't analyze
[02:53:42] <strcat> they can be created from arbitrary ints
[02:54:14] <Sergio965> Well, if someone gets the memory location of the variable and messes with it, too bad.
[02:54:24] <Sergio965> That can happen now with immutable variables.
[02:54:31] <strcat> it can't
[02:54:39] <strcat> it would be incorrect for them to do it with an immutable variable
[02:54:50] <Sergio965> Are they RO memory?
[02:54:58] <strcat> they can be, it would be incorrect to mutate them
[02:54:59] <cmr> (also, it would require unsafe code)
[02:55:01] <strcat> whether or not they are
[02:55:07] <strcat> we tell LLVM they are immutable
[02:55:21] <strcat> it would be undefined behaviour to mutate them in unsafe code, or mutate through an & ptr, etc.
[02:55:44] <Sergio965> LLVM can't insure C code doesn't change it.
[02:55:47] *** Joins: dherman (dherman@moz-FEEC7E9.hsd1.ut.comcast.net)
[02:55:47] *** ChanServ sets mode: +o dherman
[02:56:09] <strcat> it doesn't need to
[02:56:19] <Sergio965> The argument your making applies to everything.
[02:56:23] <strcat> the unsafe block is explicitly trusted to do the right thing - mutating a static mut is okay, mutating a static is not
[02:56:28] <strcat> no, it doesn't apply to everything
[02:56:31] <fread2281> james4k: no, but weeklyish is fine. For people that are really actively using rust or working on it, it makes sense
[02:56:32] <Sergio965> It's not unique to the analysis I'm proposing.
[02:56:38] <strcat> you are allowed to mutate static muts via FFI
[02:56:49] <strcat> they are explicitly interoperable with C, you can list them in extern blocks
[02:57:03] <strcat> (well, C or any other language exposing a cdecl ABI)
[02:57:20] <strcat> extern { static mut x: int ... }
[02:57:34] <strcat> or a non-extern one, you can pass to C
[02:57:41] *** Quits: dherman (dherman@moz-FEEC7E9.hsd1.ut.comcast.net) (Ping timeout)
[02:58:06] <Sergio965> Okay? But we can tell if a variable is used in C, can't we? I mean, if a static mut is used in unsafe code, just consider it concurrent.
[02:58:13] <james4k> i think last time i built it, it took a few hours.. ofc it is an older macbook, but is there room for improving the build time of rust?
[02:58:23] <cmr> james4k: how old? :\
[02:58:35] <strcat> Sergio965: rust considers taking raw pointer references to be safe
[02:58:43] <james4k> 2010
[02:58:47] <cmr> james4k: it should only take 1 hour the first time, with -j4.
[02:58:49] <strcat> in the unsafe code, it doesn't know where the raw pointer came from
[02:58:53] <cmr> Most of the time is building LLVM the first time
[02:58:55] <strcat> the dereference is considered unsafe
[02:58:57] <cmr> after that it's ~15-20 min
[02:59:03] <james4k> ah
[02:59:13] <strcat> the point is raw pointers is that they are an escape hatch from rust's analysis
[02:59:16] <james4k> ok, that's not bad at all
[02:59:21] <Sergio965> strcat, but for the purposes of this analysis, consider it "concurrent-able".
[02:59:34] <strcat> Sergio965: you can take an *mut pointer in safe
[02:59:35] <Sergio965> Problem solved.
[02:59:38] <strcat> safe code*
[02:59:53] <Sergio965> consider it*
[03:00:08] <Sergio965> Consider that "concurrent-able", too.
[03:00:18] <strcat> if you do that, static mut will not longer be memory-safe
[03:00:22] <strcat> no longer*
[03:00:37] <strcat> you will be able to cause data races without unsafe {}
[03:00:48] *** Quits: tikue (tkuehn@moz-BBE3ABD.mv.mozilla.com) (Quit: tikue)
[03:00:54] <Sergio965> Why not? I use a static mutable variable now without ever casting it as a raw pointer.
[03:01:39] <Sergio965> By "concurrent-able", I mean consider it able to be uses concurrently and thus unsafe.
[03:01:44] <Sergio965> used*
[03:02:15] <cmr> A limited form of such analysis is technically feasible, but it'd be a lot of work to implement and would never get merged.
[03:03:02] <strcat> because rustc is never going to have errors based on global program analysis
[03:03:02] <Sergio965> Honestly, I don't think it would be very difficult assuming there's a nice data flow analysis framework in place.
[03:03:08] <vk_> In this case, "let xs = ~[];", when should xs need to be assigned a type?
[03:03:18] <cmr> vk_: only if it can't be infered from use
[03:03:19] <strcat> Sergio965: there is no global data flow analysis in place
[03:03:39] <Sergio965> But the latter, that it's against the philosophy, is a grander sticking point.
[03:03:49] <vk_> cmr: Seems that was causing the error from earlier, how can one tell when it can't be inferred?
[03:04:09] <Sergio965> There's no global DCE, CSE, CF, etc?
[03:04:11] <cmr> vk_: it will explicitly tell you so in an error
[03:04:12] <dbaupp> is there a port/chan thing that has a finite buffer, and so `send`s block until a `recv` if it's too full?
[03:04:15] <cmr> Sergio965: LLVM does it for us
[03:04:31] <Sergio965> Oh, interesting.
[03:04:33] <cmr> Sergio965: also they're optimizations that have no observable impact on the correctness of code, or can possibly create errors
[03:04:40] <strcat> Sergio965: clang/rustc don't do optimizations
[03:04:58] <cmr> (kinda the purpose of llvm)
[03:05:08] <Sergio965> Not really.
[03:05:10] <strcat> they both make decisions about calling conventions (when to return by-value, when to use an out pointer) but that's it
[03:05:21] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[03:05:28] <cmr> "not really"? then what's the purpose?
[03:05:38] <cmr> If all it does is native codegen, it's not really that useful
[03:05:45] <strcat> a design goal of clang is to not do any optimizations in the frontend
[03:06:08] <Sergio965> It's much easier to emit LLVM IR and have LLVM emit architecture specific machine code than it is for me to do it.
[03:06:33] <cmr> it needs to optimize the native code too
[03:06:39] <cmr> otherwise you'll get crappy native code
[03:06:40] <Sergio965> Optimizations for free are nice, but I wouldn't consider it the goal of LLVM.
[03:06:47] <vk_> cmr: hm, thanks.
[03:07:04] <cmr> Almost all of LLVM is optimization passes, I think it's really silly to not consider optimization a goal of LLVM
[03:07:22] <strcat> Sergio965: LLVM IR is specific to a platform
[03:07:28] <Sergio965> That comes with emitting architecture specific code.
[03:07:48] <strcat> google defined their own IR as part of NaCl that's somewhat portable
[03:07:53] <Sergio965> I'm not saying it's not "a" goal, I'm saying it's not the "sole" goal.
[03:08:28] <strcat> LLVM IR is a platform specific intermediate representation, enabling analysis and optimizations to be independent of the frontend/backend
[03:08:33] <strcat> it's not portable
[03:09:36] <Sergio965> Platform specfific?
[03:09:38] <strcat> for example if you compile for x86_64, it will output <2 * double> and <4 * float> vectors
[03:09:38] <Sergio965> specific*
[03:09:53] <Sergio965> What will? Rust?
[03:09:57] <strcat> no, LLVM
[03:09:59] <strcat> the optimization passes
[03:10:15] <strcat> and just the IR builder
[03:10:22] <strcat> the IR includes targetinfo
[03:10:27] <Sergio965> Yeah, that was my point.
[03:10:43] <strcat> int main() {}
[03:10:43] <Sergio965> Does Rust worry about the architecture?
[03:10:59] <strcat> if you compile that with clang, the IR is only going to work on the platform you compiled for
[03:11:04] <Sergio965> (when it emits LLVM?)
[03:11:06] <strcat> target datalayout = "e-p:64:64:64-i1:8:8-i8:8:8-i16:16:16-i32:32:32-i64:64:64-f32:32:32-f64:64:64-v64:64:64-v128:128:128-a0:0:64-s0:64:64-f80:128:128-n8:16:32:64-S128"
[03:11:09] <strcat> target triple = "x86_64-unknown-linux-gnu"
[03:11:11] <strcat> yes
[03:11:13] <strcat> the IR builder is inherently platform dependent
[03:11:18] <strcat> how it treats different data types
[03:11:20] <strcat> how it handles alignment
[03:11:24] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[03:11:24] *** ChanServ sets mode: +o brson
[03:11:27] <strcat> can you index bytes? can you index bits?
[03:11:36] <strcat> maybe 16-byte is the smallest chunk you can index
[03:11:42] <strcat> the IR isn't portable
[03:12:08] <strcat> http://www.chromium.org/nativeclient/pnacl/bitcode-abi
[03:12:13] <strcat> they had to define their own IR
[03:12:34] <Sergio965> You're right. I was misinformed about LLVM.
[03:12:39] <Sergio965> My apologies.
[03:13:44] <mark_edward> can you call Reader.read_line() inside a closure you passed to reader.each_line()?
[03:14:18] <Sergio965> In any case, global data flow analysis is not too difficult.
[03:14:41] *** Joins: hjr3 (hradtke@moz-842BF853.hsd1.ca.comcast.net)
[03:15:28] <Sergio965> Well, some of the analyses are difficult, like an SSA transformation, but the one I'm proposing is really simple.
[03:15:49] *** Joins: achin (Mibbit@moz-193F7FAD.ri.ri.cox.net)
[03:16:16] *** Quits: Earnestea (earnest@3F74F9E2.8E6FE497.30311652.IP) (Ping timeout)
[03:16:23] <Sergio965> Why is it against Rust methadology to issue non-function-internal errors?
[03:18:01] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[03:18:17] <strcat> Sergio965: so changing code in a function can only cause errors there
[03:18:23] <strcat> to make the language much more usable than say, C++
[03:18:41] <strcat> the same reason generics are designed to be type-checked from the definition
[03:18:47] <strcat> not each instantiation, like C++ templates
[03:19:02] <strcat> if you change the generic function's body, it can only produce an error locally
[03:19:36] <strcat> if it type checks alone, it will compile for any usage of it with any types meeting the requirements
[03:19:40] <Sergio965> I'll take a look at the task local module. Perhaps it's the way to do it.
[03:19:50] <achin> hi all.  rust 0.7 is segfaulting on my mac (10.8.4).   i'm currently re-building with --enable debug, but gdb gives me this: https://gist.github.com/eminence/a13e325b961add338300
[03:20:21] <achin> this was while compiling a very trivial main function
[03:20:35] <Sergio965> strcat, that seems reasonable, yeah.
[03:20:45] <Sergio965> Thanks for the lively discussion, as always.
[03:20:52] <strcat> C++ templates are a lot more powerful than Rust generics - there are sacrifices to be made for having these design decisions
[03:20:56] <strcat> I think it's definitely worth it though
[03:21:31] <strcat> (ofc, there's room for other languages with different compromises :P)
[03:22:02] *** Quits: samx (sami@moz-48EC0983.dyn.optonline.net) (Quit: This computer has gone to sleep)
[03:22:12] <Sergio965> Indeed, indeed. I'm not sure how I feel about that, but I understand the motivation.
[03:22:16] *** Quits: Sergio965 (nobody@A989F00F.32AC2C96.3A99D594.IP) (Client exited)
[03:23:09] *** Joins: Sergio965 (nobody@A989F00F.32AC2C96.3A99D594.IP)
[03:23:11] <strcat> Go has no generics, and D has turing complete templates essentially doing compile-time pattern matching recursively ;]
[03:23:11] <Sergio965> Beep
[03:23:15] <strcat> rust falls somewhere between
[03:23:45] <Sergio965> D has too much.
[03:23:55] <Sergio965> (imo)
[03:25:38] *** Quits: Sergio965 (nobody@A989F00F.32AC2C96.3A99D594.IP) (Client exited)
[03:38:28] *** Quits: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com) (Quit: eatkinson)
[03:38:36] <fread2281> How can I get started working on rust?
[03:38:41] <erickt> is bors off again?
[03:38:57] <erickt> it hasn't built anything for a bit
[03:39:39] <strcat> erickt: there's a set of builds going
[03:40:07] <erickt> strcat: really? I don't see any yellow on http://buildbot.rust-lang.org/console?refresh=15
[03:40:24] <strcat> erickt: http://buildbot.rust-lang.org/console?branch=auto&refresh=15
[03:40:31] <erickt> oooh weird.
[03:40:34] <strcat> buildbot is messed up
[03:41:04] <erickt> well good :)
[03:41:05] <strcat> erickt: when you click auto, it shows the commits in auto
[03:41:07] <strcat> and then builds
[03:41:27] <strcat> so if you actually forced a build on the try bots of an auto commit, it'd show it
[03:41:38] <strcat> in theory, but in reality it won't because forced builds are broken in the UI
[03:41:43] *** Joins: pcwalton (pcwalton@FF66E3F0.B6833A04.1D6E592A.IP)
[03:41:44] *** ChanServ sets mode: +o pcwalton
[03:42:02] <strcat> there's not much point in it showing those other bots :s
[03:42:25] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[03:42:55] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Quit: Konversation terminated!)
[03:43:26] <vk_>  Hey, I've got another error I could use help with, "error: mismatched types: expected `std::option::Option<Data>` but found `std::option::Option<&Data>` (expected enum Data but found &-ptr)", can I force the the variable to what the compiler is looking for?
[03:44:10] *** Quits: bytewise (bytewise@moz-4A801D04.unitymediagroup.de) (Quit: Leaving)
[03:44:31] <strcat> vk_: you can use .map_consume and dereference Data (or clone it, if it's non-implicitly-copyable)
[03:45:14] *** Joins: brendan (brendaneic@FF66E3F0.B6833A04.1D6E592A.IP)
[03:45:26] <vk_> strcat: cool, thanks.
[03:45:52] *** Joins: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP)
[03:47:02] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: sleep)
[03:49:07] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[03:50:10] *** Joins: Ralith (ralith@moz-50F3C77.vc.shawcable.net)
[03:51:16] <doomlord_> 'crate metadata' ... is there such a thing spat out by the compiler that has the node/source-span information for library crates (do you want that for debugging..) 
[03:52:24] <doomlord_> i can see how to emit this myself ... but  i should check if the existing source base can do this. (i'm trying to get my code-browser to find sourcecode definitions between crates)
[03:53:30] <pcwalton> doomlord_: you can perhaps read the DWARF.
[03:53:38] <pcwalton> we do try to emit it when -g is on
[03:53:44] <doomlord_> (i can see from my own json dump that i could write out such a node/span table for each crate in turn, and get my code to read that back in)
[03:54:14] *** Joins: milinda (milinda@moz-C79ADF95.dhcp-bl.indiana.edu)
[03:55:02] <doomlord_> just grepping and googling "DWARF"... i take it thats debug symbols ..
[03:56:17] <doomlord_> heh ok DWARF for ELFs of course
[03:56:50] <mark_edward> man i love concurrency in rust. i literally just added a `do spawn`, moved some mutable variables into the closure, and BOOM massive speedup in one of my tests
[03:57:27] <doomlord_> how many cores are you playing with :)
[03:58:02] <mark_edward> 4 real, 8 virtual on my laptop
[03:58:10] *** Quits: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP) (Client exited)
[03:58:22] <mark_edward> i think it's mainly I/O bound, so it should help on any machine i think
[03:59:38] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[03:59:38] *** ChanServ sets mode: +o brson
[04:00:44] <doomlord_> pcwalton, i'm guessing from what i read the DWARF is going to have a lot more than i need, it might be simpler to go with my own JSON dump - i should write that out anyway, it could be used to implement code browsing in differnt tools..
[04:01:42] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[04:02:11] <pcwalton> doomlord_: ok, that works
[04:03:11] <steven_is_false> With the newrt now landed I can have asynchronous console input right?
[04:04:03] *** Joins: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP)
[04:04:44] *** Quits: fread2281 (Mibbit@moz-CB181B42.dia.static.qwest.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:04:56] <achin> hm, no ddifference in the backtrace.  rust is still segfaulting
[04:05:01] <achin> i mean rustc
[04:05:17] <achin> i mean.. wait
[04:05:30] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[04:06:00] *** Quits: brendan (brendaneic@FF66E3F0.B6833A04.1D6E592A.IP) (Quit: brendan)
[04:06:04] <achin> sorry.  rustc is fine.  rust is segfaulting
[04:06:10] *** Quits: pcwalton (pcwalton@FF66E3F0.B6833A04.1D6E592A.IP) (Quit: pcwalton)
[04:06:36] <mark_edward> doomlord_: any suggestions for more tests here: https://github.com/MarkJr94/rust-keccak i only have three, and i can't figure out how to break them down much more
[04:06:37] <steven_is_false> Basically, I want to treat console input as if it is a Port.
[04:06:54] <mark_edward> doomlord_: the three are in nist.rs, sponge.rs, and reference.rs
[04:08:27] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[04:08:27] *** ChanServ sets mode: +o brson
[04:09:14] <doomlord_> i must try the concurency out myself soon :)
[04:09:56] <mark_edward> doomlord_: indeed! 
[04:10:33] <mark_edward> doomlord_: do you have anythoughts on the tests?
[04:11:27] <doomlord_> can't really suggest anything useful without reading a lot of this code, i'm not familiar with the details of this problem
[04:12:00] <engla_> do you test all the KATs?
[04:12:10] <engla_> if you do, that's plenty of tests ^^
[04:12:49] <mark_edward> engla_: i test all of the ShortMsgKATs. do you think i should add the longs and extrememly longs as well?
[04:13:43] <engla_> at least have some long test vectors
[04:14:24] <mark_edward> engla_: ok cool, that should be a quick addition. thanks for the advice! ShortMsg and LongMsg it is! do you have experience with KEccak why you know about it?
[04:15:24] <engla_> no experience, I was just playing with it and implementing it in C and Rust (but I didn't get far with Rust just the 8-bit lane version)
[04:16:07] *** Quits: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP) (Client exited)
[04:17:27] <mark_edward> engla_: LongMsg passes too! nice! I have a working rust implementation of keccak! what should i do wrt optimization? they have a 64nit and 32bit omptimized versoon. should i look into that?
[04:18:06] <engla_> If you need a fast 32-bit version maybe :)
[04:18:37] <ChrisMorgan> `pub trait Stream: Reader + Writer { }` means that although TcpStream implements Reader and Writer it doesn't implement Stream without `impl Stream for TcpStream;`, right?
[04:18:39] <mark_edward> engla_: well my goal is to get this into extra, 
[04:20:14] *** Quits: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP) (Client exited)
[04:20:49] <jeaye> rusti: let v = ~[(1, 2), (3, 4)]; for (x, y) in v.iter() { }
[04:20:49] -rusti- <anon>:5:40: 5:46 error: mismatched types: expected `&(<VI2>,<VI3>)` but found tuple (types differ)
[04:20:49] -rusti- <anon>:5          let v = ~[(1, 2), (3, 4)]; for (x, y) in v.iter() { }
[04:20:49] -rusti-                                                  ^~~~~~
[04:20:49] -rusti- error: aborting due to previous error
[04:20:50] -rusti- application terminated with error code 101
[04:21:03] <jeaye> How can I do that? ^
[04:21:33] <mark_edward> rusti: let v = ~[(1, 2), (3, 4)]; for &(x, y) in v.iter() { }
[04:21:37] -rusti- pastebinned 7 lines of output: http://ix.io/7b7
[04:21:40] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Client exited)
[04:21:52] <mark_edward> rusti: let v = ~[(1, 2), (3, 4)]; for &(_, _) in v.iter() { }
[04:21:53] -rusti- ()
[04:22:04] <jeaye> rusti: let v = ~[(1, 2), (3, 4)]; for (*x, *y) in v.iter() { }
[04:22:04] -rusti- <anon>:5:41: 5:42 error: unexpected token: `*`
[04:22:04] -rusti- <anon>:5          let v = ~[(1, 2), (3, 4)]; for (*x, *y) in v.iter() { }
[04:22:04] -rusti-                                                   ^
[04:22:04] -rusti- application terminated with error code 101
[04:22:11] <jeaye> rusti: let v = ~[(1, 2), (3, 4)]; for (&x, &y) in v.iter() { }
[04:22:12] -rusti- <anon>:5:40: 5:48 error: mismatched types: expected `&(<VI2>,<VI3>)` but found tuple (types differ)
[04:22:12] -rusti- <anon>:5          let v = ~[(1, 2), (3, 4)]; for (&x, &y) in v.iter() { }
[04:22:12] -rusti-                                                  ^~~~~~~~
[04:22:12] -rusti- error: aborting due to previous error
[04:22:12] -rusti- application terminated with error code 101
[04:22:12] *** concrete.mozilla.org sets mode: +M 
[04:22:22] <jeaye> I can't name them? :|
[04:22:27] <tiffany> no you can
[04:22:46] <tiffany> it's just that the first one mark pasted produced unused variable warnings
[04:23:01] <jeaye> oh, gotcha
[04:23:12] <jeaye> Perfect.
[04:23:13] <erickt> r? https://github.com/mozilla/rust/pull/8430
[04:23:18] <jeaye> Just needed the &. Thanks
[04:23:34] <erickt> It's all about cleaning up the iterator methods. transform -> map, find_ -> find, etc
[04:27:14] *** concrete.mozilla.org sets mode: -M 
[04:27:30] <engla_> erickt: .map!! finally!
[04:27:32] <engla_> :-)
[04:27:36] <jeaye> rusti: let mut v = ~[(1, 2), (3, 4)]; let (x, y) = v.pop(); y
[04:27:37] -rusti- <anon>:5:45: 5:46 warning: unused variable: `x` [-W unused-variable (default)]
[04:27:37] -rusti- <anon>:5          let mut v = ~[(1, 2), (3, 4)]; let (x, y) = v.pop(); y
[04:27:37] -rusti-                                                       ^
[04:27:37] -rusti- 4
[04:27:44] <erickt> ack, it's already unmergable
[04:27:48] <mark_edward> rusti: let v = ~[(1, 2), (3, 4)]; for &(x, y) in v.iter() { println(fmt!("x = %d, y = %d", x, y)); }
[04:27:49] -rusti- x = 1, y = 2
[04:27:49] -rusti- x = 3, y = 4
[04:27:49] -rusti- ()
[04:27:55] <mark_edward> cool
[04:28:02] <jeaye> rusti: let mut v = ~[(1, 2), (3, 4)]; let mut (_x, y) = v.pop(); y
[04:28:04] -rusti- pastebinned 6 lines of output: http://ix.io/7b8
[04:28:06] <engla_> mark_edward: ah that's nice. Look at the other digests in extra for their traits and interfaces (those might change though)
[04:28:20] <engla_> mark_edward: also you'll need to byteswap the input to little endian I think
[04:28:46] <jeaye> rusti: let mut v = ~[(1, 2), (3, 4)]; let (mut _x, mut y) = v.pop(); y
[04:28:48] -rusti- pastebinned 7 lines of output: http://ix.io/7bb
[04:29:05] <jeaye> How can I get them mut?
[04:29:06] <engla_> Now keccak becomes interesting when NIST finally release their SHA-3 standards document..
[04:29:12] <jeaye> It said the first one I tried was obsolete.
[04:29:28] *** Quits: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com) (Ping timeout)
[04:29:30] <engla_> jeaye: I don't think you can, in one statement at the moment
[04:29:42] <engla_> jeaye: let (x,y) = v.pop(); let mut x = x
[04:29:55] <jeaye> But that's a copy, right?
[04:30:35] <engla_> well, it's by move, sure
[04:30:38] <jeaye> rusti: let mut v = ~[(1, 2), (3, 4)]; let (_x, y) = v.pop(); let mut y = y; y = 7; v
[04:30:40] -rusti- pastebinned 7 lines of output: http://ix.io/7bc
[04:31:14] <jeaye> rusti: let mut v = ~[(1, 2), (3, 4)]; let (_x, y) = v[1]; let mut y = y; y = 7; v
[04:31:16] -rusti- pastebinned 10 lines of output: http://ix.io/7bd
[04:31:43] <mark_edward> engla_: thanks for the advice! i'll certainly get on that. the reference code im using does that too
[04:32:24] <mark_edward> engla_: do you know of any #[cfg()] statements that test for big/little endianness?
[04:32:41] <jeaye> engla_: So that "moves" it into a mutable variable? Essentially, a const_cast<T>?
[04:32:44] <engla_> best to use the to_le64 and similar intrinsics I think
[04:33:19] <mark_edward> engla_: where are such intrinsics/
[04:33:45] <engla_> jeaye: no, the slot determines the mutability. You don't need a const_cast here right?  const int x = 1; int y = x;
[04:34:32] <jeaye> engla_: In my case, I'm hoping not to copy any values; I wanted to still affect the array.
[04:35:20] <jeaye> So I was thinking `int const x(1); int &y(const_cast<int&>(x));`
[04:35:59] <jeaye> But I can probably get away with what you shared above.
[04:36:13] <engla_> this is way too complicated. It's just values being copied from one variable to another
[04:36:21] <engla_> the compiler is free to make whatever it want out of it
[04:36:26] <engla_> (no copies)
[04:36:52] <jeaye> In my case, I'm using obejcts much more complicated than ints. :P
[04:37:06] *** Joins: jdm (jdm@9FB21CB6.76DE1AD5.AE2B2F80.IP)
[04:37:09] <ChrisMorgan> Bah. I fix up my client code so that the buffered reader hasn't already consumed the response body, and now it starts segfaulting instead.
[04:37:30] *** Quits: vk_ (chatzilla@F92596F.2DEF7520.EF7679FA.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 23.0/20130729175331])
[04:39:11] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[04:39:52] <erickt> re-r? https://github.com/mozilla/rust/pull/8430
[04:42:33] <jeaye> rusti: struct T; impl T { fn f() -> ~str { ~"foo" } } let t = T; t.f()
[04:42:34] -rusti- <anon>:5:67: 6:5 error: type `main::T` does not implement any method in scope named `f`
[04:42:34] -rusti- <anon>:5          struct T; impl T { fn f() -> ~str { ~"foo" } } let t = T; t.f()
[04:42:34] -rusti- <anon>:6     };
[04:42:34] -rusti- error: aborting due to previous error
[04:42:35] -rusti- application terminated with error code 101
[04:42:53] <jeaye> Given just an object, can I call a static function (like in C++)?
[04:42:59] <jeaye> Or do I need to know the type?
[04:43:33] <erickt> jeaye: you need to do T::f()
[04:43:39] <jeaye> damn
[04:43:46] * jeaye doesn't know T in this instance
[04:44:30] <jeaye> That's a bummer.
[04:44:44] <engla_> jeaye: is it a trait static method?
[04:44:46] <jeaye> And it forces the mixture of polymorphism with generics.
[04:44:49] <jeaye> engla_: Yup
[04:44:53] <engla_> Trait::method()
[04:44:54] <erickt> jeaye: are you trying to call a method on a constrained type? If so, you can do something like `fn foo<T: Trait>() { let x: T= Trait::foo(); }`
[04:45:05] <engla_> jeaye: you call it on the trait, not the type in that case.
[04:45:41] <jeaye> Right, but I don't see how it'd go to the right impl of that trait.
[04:46:38] <jeaye> Trying: https://gist.github.com/Jeaye/a1e30ade9ac888cf157b
[04:46:56] <jeaye> state could be a dozen different types
[04:47:16] <jeaye> get_key is static
[04:47:47] <engla_> aha
[04:47:53] <ChrisMorgan> OK... when compiled with -Z debug-info and it was showing the line number of the start of the function I assumed that to be an error, but it does actually seem to be crashing right there...
[04:48:29] <erickt> jeaye: can you write `fn push<T: State>(&mut self, mut state: @mut T) â€¦ State::get_key() â€¦ `?
[04:49:13] <jeaye> erickt: I could. I was just hoping to avoid it. :)
[04:49:34] <jeaye> Rust generics still haven't grown on me.
[04:49:53] <jeaye> But if that's what I need to do, so be it. Thanks for takin' a look.
[04:50:25] <erickt> jeaye: I'd file a bug about this. trait pointers hasn't been really explored much. Maybe no one implemented the ability to call a static method through them yet
[04:50:40] <jeaye> Oh, shit.
[04:50:45] <jeaye> I remember that, actually.
[04:50:55] <engla_> you're an explorer jeaye
[04:50:57] <jeaye> One can't call static methods on trairs.
[04:51:14] <jeaye> engla_: Oh yeah? ^_^
[04:53:15] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[04:53:15] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/2bprZQ
[04:53:15] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[04:53:33] <erickt> go go bors!
[04:53:34] <goffrie> bye bye c++ runtime!
[04:54:45] <jeaye> :)
[04:54:45] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[04:54:58] *** Joins: leaper (Mibbit@393F3D58.CB450964.520CDC98.IP)
[04:55:14] <erickt> bors: now build my stuff! kthxbye!
[04:56:18] *** Joins: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP)
[04:56:18] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/vg-7hw
[04:56:18] *** Parts: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP) ()
[04:56:19] *** Joins: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP)
[04:56:20] <ghrust> 01[13rust01] 15bors pushed 1 new commit to 06auto: 02http://git.io/wRmn4A
[04:56:20] <ghrust> 13rust/06auto 1460f5011 15bors: auto merge of #8296 : erickt/rust/remove-str-trailing-nulls, r=erickt...
[04:56:20] *** Parts: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP) ()
[04:56:33] <erickt> woo
[04:56:46] *** Joins: dherman (dherman@moz-FEEC7E9.hsd1.ut.comcast.net)
[04:56:47] *** ChanServ sets mode: +o dherman
[04:57:43] <engla_> hope it merges erickt
[04:58:00] <erickt> engla_: I just checked, it did!
[04:58:12] <engla_> ah, s/merges/integrates/
[04:58:43] <engla_> merges, compiles, passes, and bors doesn't have some regularly occuring disaster
[04:58:44] *** Quits: dherman (dherman@moz-FEEC7E9.hsd1.ut.comcast.net) (Ping timeout)
[04:58:58] *** Joins: alisdair (textual@moz-FBF4138A.vc.shawcable.net)
[04:59:53] <erickt> wooo it's running
[04:59:54] <erickt> !
[04:59:56] * erickt dances
[05:01:34] <engla_> erickt: the mini-regression comment is mine
[05:01:39] <engla_> nothing to worry about now
[05:01:58] * erickt is nervous
[05:03:03] <erickt> I've been working off and on this PR for 2 months
[05:04:35] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[05:07:01] *** Quits: igl (igl@moz-5D0EF5D5.adsl.alicedsl.de) (Connection reset by peer)
[05:08:54] *** Quits: thesnowdog (doug@9842E8BA.8E46834.6F17036B.IP) (Ping timeout)
[05:08:59] <engla_> nice
[05:09:16] *** Quits: milinda (milinda@moz-C79ADF95.dhcp-bl.indiana.edu) (Input/output error)
[05:09:23] *** Joins: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com)
[05:09:37] *** Joins: thesnowdog (doug@9842E8BA.8E46834.6F17036B.IP)
[05:13:32] <jeaye> What's a Rustic was of C++'s std::remove_if on a vec?
[05:13:47] <jeaye> Basically, remove if a unary operator returns true
[05:13:57] <jeaye> s/was/way/
[05:15:25] <engla_> I think that's .retain()  with the predicate inversed
[05:15:34] <engla_> *inverted :)
[05:20:08] *** Quits: alisdair (textual@moz-FBF4138A.vc.shawcable.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[05:24:02] *** Quits: thesnowdog (doug@9842E8BA.8E46834.6F17036B.IP) (Ping timeout)
[05:25:18] <jeaye> Oh, good call.
[05:25:30] * jeaye would've never thought to look at retain.
[05:26:41] *** Joins: alisdair (textual@moz-FBF4138A.vc.shawcable.net)
[05:27:23] *** Joins: thesnowdog (doug@9842E8BA.8E46834.6F17036B.IP)
[05:28:53] *** Quits: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com) (Quit: eatkinson)
[05:29:32] *** Quits: alisdair (textual@moz-FBF4138A.vc.shawcable.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[05:30:02] *** Quits: thesnowdog (doug@9842E8BA.8E46834.6F17036B.IP) (Ping timeout)
[05:30:31] *** Joins: ross (ross@moz-8A84103E.br.br.cox.net)
[05:30:50] <jeaye> engla_: Know how I can compare ~str to &str?
[05:31:22] <jeaye> rusti: let s = ~"foo"; let ss = &"foo"; s == ss
[05:31:25] -rusti- <anon>:5:47: 5:49 error: mismatched types: expected `~str` but found `&str` (str storage differs: expected ~ but found &)
[05:31:25] -rusti- <anon>:5          let s = ~"foo"; let ss = &"foo"; s == ss
[05:31:25] -rusti-                                                         ^~
[05:31:25] -rusti- error: aborting due to previous error
[05:31:25] -rusti- application terminated with error code 101
[05:31:51] <jeaye> Other than ss.to_owned()
[05:32:22] *** Joins: thesnowdog (doug@9842E8BA.8E46834.6F17036B.IP)
[05:32:45] <dbaupp> rusti: let s = ~"foo"; let ss = "foo"; ss = s
[05:32:46] -rusti- <anon>:5:46: 5:47 error: mismatched types: expected `&'static str` but found `~str` (str storage differs: expected &'static  but found ~)
[05:32:46] -rusti- <anon>:5          let s = ~"foo"; let ss = "foo"; ss = s
[05:32:46] -rusti-                                                        ^
[05:32:47] -rusti- error: aborting due to previous error
[05:32:47] -rusti- application terminated with error code 101
[05:32:49] <dbaupp> rusti: let s = ~"foo"; let ss = "foo"; ss == s
[05:32:51] -rusti- true
[05:33:07] <engla_> there is an answer, and you're not going to like it :)
[05:33:21] <dbaupp> rusti: let s = ~"foo"; let ss = "foo"; s.as_slice() == ss
[05:33:22] -rusti- true
[05:33:51] <dbaupp> (neither allocate.)
[05:34:23] <engla_> using the .eq method makes it seem a bit more consistent
[05:34:36] *** Joins: maik (maik___@moz-B6A195EA.dip0.t-ipconnect.de)
[05:35:24] <engla_> ah maybe not
[05:35:56] <ChrisMorgan> I was hitting this earlier today in a match ~str { &'static str => ... } block, and so as_slice() was the solution I usedâ€”can't swap LHS and RHS.
[05:36:33] <jeaye> dbaupp: So as_slice doesn't reallocate anything? Just treats the string differently?
[05:37:33] <dbaupp> jeaye: it's type is &'a self -> &'a str; it's an explicit way of auto-slicing strings
[05:37:41] <engla_> yes. That's why slices are called &str  or &[], it's a reference  into the string or vec
[05:37:45] <dbaupp> jeaye: (so yes.)
[05:38:08] <jeaye> error: borrowed value does not live long enough
[05:38:16] <jeaye> When I try adding as_slice
[05:38:49] <jeaye> https://gist.github.com/Jeaye/4a1805687c37c3f8387f
[05:39:15] <engla_> that's a known bug
[05:39:33] <ChrisMorgan> let s = state.get_key(); s.as_slice() == key
[05:39:34] <jeaye> Gar
[05:39:45] <engla_> or switch the lhs and rhs
[05:39:49] <jeaye> Ok
[05:40:06] <ChrisMorgan> i.e. `key == state.get_key()`
[05:40:54] <engla_> jeaye: does get_key allocate a new ~str for every call?
[05:41:08] <engla_> no it must be a &~str ?
[05:41:17] *** Quits: thesnowdog (doug@9842E8BA.8E46834.6F17036B.IP) (Ping timeout)
[05:41:34] <jeaye> fn get_key(&self) -> ~str { ~"foo" }
[05:41:40] <jeaye> ^ basic impl
[05:41:50] <maik> will we remove the keyword "const"? or do we just rename it?
[05:41:59] <jeaye> I guess it doesn't need to be ~ at all
[05:42:09] <jeaye> Since all of the keys are constexpr
[05:42:18] *** Joins: thesnowdog (doug@9842E8BA.8E46834.6F17036B.IP)
[05:42:40] <engla_> allocating new strings in a loop like that (rposition) is a bad idea
[05:42:45] <engla_> so yeah
[05:43:04] *** Joins: curmet (Mibbit@94F79552.C304F435.14AEBF32.IP)
[05:43:15] <jeaye> rusti fn get_key() -> &str { &"foo" } get_key()
[05:43:17] <dbaupp> maik: probably remove
[05:43:47] <jeaye> o.O
[05:43:56] <jeaye> rusti: fn get_key() -> &str { &"foo" } get_key()
[05:43:57] -rusti- "foo"
[05:44:00] *** Quits: curmet (Mibbit@94F79552.C304F435.14AEBF32.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[05:44:09] <jeaye> engla_: Thanks for the help
[05:44:32] <engla_> no problem
[05:44:53] <engla_> the & in front of &"foo" is superfluous btw
[05:45:20] <engla_> inconsistent but convenient
[05:46:03] <jeaye> I favor consistency to convenience (but I didn't know that, so thanks again)
[05:46:30] *** Quits: Diamond (dick@moz-C01E1CD1.ks.ks.cox.net) (Quit: Leaving.)
[05:47:29] *** Quits: mark_edward (quassel@moz-57A72B6E.hsd1.in.comcast.net) (Ping timeout)
[05:47:37] *** Joins: tedh (tedh@moz-76BF83CB.z180-91-67.customer.algx.net)
[05:54:51] <ChrisMorgan> Well, my HTTP client as it is now on GitHub segfaults. :-(
[05:55:58] <ChrisMorgan> The construct() call at https://github.com/chris-morgan/rust-http/blob/master/src/libhttp/client/request.rs#L155 dies, never getting through to actually executing the body of the construct function. Not sure why yet.
[05:56:10] <maik> dbaupp, will there be a replacement?
[05:56:58] <dbaupp> maik: unlikely
[05:56:58] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Connection reset by peer)
[05:57:05] <ChrisMorgan> My suspicion is that `let mut mut_self = self;` doesn't work so terribly well and something gets broken in then moving mut_self to construct().
[05:57:17] *** Joins: dherman (dherman@moz-FEEC7E9.hsd1.ut.comcast.net)
[05:57:17] *** ChanServ sets mode: +o dherman
[05:57:20] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[05:57:31] <maik> it doesn't find bar any idea why? https://gist.github.com/MaikKlein/6199257 
[05:58:22] *** Quits: thesnowdog (doug@9842E8BA.8E46834.6F17036B.IP) (Ping timeout)
[05:58:44] <maik> ah hm
[05:58:47] <maik> Baz::Bar
[05:58:49] <engla_> maik: I think bar has to be called like it is anywhere else
[05:58:51] <engla_> yeah
[05:59:13] *** Quits: dherman (dherman@moz-FEEC7E9.hsd1.ut.comcast.net) (Ping timeout)
[06:00:48] *** Joins: thesnowdog (doug@9842E8BA.8E46834.6F17036B.IP)
[06:00:56] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[06:01:17] *** Quits: jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: zzz)
[06:06:07] *** Joins: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com)
[06:09:01] *** Joins: vk_ (chatzilla@moz-389FEE13.hsd1.ca.comcast.net)
[06:10:18] <maik> if I have to use @ here I would be sad :( http://stackoverflow.com/questions/18140088/borrow-issue-with-self/18144257
[06:13:43] *** Quits: maik (maik___@moz-B6A195EA.dip0.t-ipconnect.de) (Ping timeout)
[06:16:05] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Quit: Konversation terminated!)
[06:19:39] *** Joins: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP)
[06:20:01] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[06:21:19] <james4k> hmm.. just went through the tutorial, and see lots of code with an apostrophe; is that new syntax for a borrowed pointer?
[06:21:33] <ChrisMorgan> james4k: lifetimes
[06:22:19] *** Joins: maik (maik___@moz-B6A195EA.dip0.t-ipconnect.de)
[06:22:57] *** Joins: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP)
[06:23:43] <james4k> "static items"? http://static.rust-lang.org/doc/rust.html#static-items
[06:24:53] <ChrisMorgan> james4k: ?
[06:26:16] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[06:26:16] *** ChanServ sets mode: +o brson
[06:26:17] <james4k> is it not documented?
[06:26:28] <ChrisMorgan> james4k: is what not documented?
[06:26:37] <james4k> like 'self
[06:26:40] <james4k> what is the apostrophe
[06:27:22] <ChrisMorgan> Try http://static.rust-lang.org/doc/tutorial-borrowed-ptr.html
[06:27:50] <ChrisMorgan> brson: hey! You must be exhausted by now, right? ;-)
[06:28:18] <brson> lol
[06:28:46] <brson> not like last night
[06:28:48] <ChrisMorgan> What syntax highlighter is being used in those tutorials? It really needs its lifetime highlighting fixed.
[06:29:06] <dbaupp> ChrisMorgan: pandoc's one
[06:29:19] <ChrisMorgan> brson: well, I've just got my client into the delightful position of hitting a segfault as I call a certain method.
[06:29:24] <brson> ChrisMorgan: it's in doc/prep.js
[06:29:26] <brson> or somewhere
[06:29:47] <brson> oh, I guess maybe we are using pandoc these days
[06:29:59] <brson> ChrisMorgan: ok
[06:30:18] <brson> do you have a test case?
[06:30:40] <ChrisMorgan> I tried to make a minimal test case of what I thought the issue to be, but it was clearly too minimal.
[06:30:44] *** Quits: maik (maik___@moz-B6A195EA.dip0.t-ipconnect.de) (Ping timeout)
[06:31:04] <ChrisMorgan> https://github.com/chris-morgan/rust-http/commit/f78236284b73ba5e980962b1ffbd71ea9a03fbbc
[06:32:32] <brson> ChrisMorgan: what do i have to run to reproduce?
[06:33:09] <ChrisMorgan> make, then run any of the servers (e.g. build/examples/info) and while it's running run the client (build/examples/client/client)
[06:34:59] *** Quits: ross (ross@moz-8A84103E.br.br.cox.net) (Quit: )
[06:36:11] <james4k> hmm so lifetimes are sort of a generic pointer
[06:37:19] <james4k> is that a flawed understanding?
[06:38:34] <ChrisMorgan> james4k: a "borrowed pointer" is a reference. The lifetime indicates how long that reference is valid for.
[06:40:43] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[06:41:16] <james4k> and that lifetime is determined by the caller's pointer type?
[06:41:21] *** Joins: tedh_ (tedh@moz-76BF83CB.z180-91-67.customer.algx.net)
[06:41:25] *** Quits: tedh (tedh@moz-76BF83CB.z180-91-67.customer.algx.net) (Connection reset by peer)
[06:42:14] <ChrisMorgan> james4k: no
[06:42:34] *** Quits: jdm (jdm@9FB21CB6.76DE1AD5.AE2B2F80.IP) (Ping timeout)
[06:42:35] <dbaupp> (well, to some extend yes)
[06:42:45] <dbaupp> *extent
[06:43:45] <jack> does RUST_STACK_MIN work on newrt?
[06:44:00] *** Joins: ChemicalHarm (Mibbit@moz-2FE8A53C.hfc.comcastbusiness.net)
[06:44:22] *** Quits: ChemicalHarm (Mibbit@moz-2FE8A53C.hfc.comcastbusiness.net) (Quit: http://www.mibbit.com ajax IRC Client)
[06:44:58] <brson> jack: RUST_MIN_STACK works to set the task stack size, yes
[06:45:15] <brson> jack: rustc currently overrides this though and requests it's own stack size explicitly
[06:45:19] <ChrisMorgan> dbaupp: I think you need to explain that.
[06:45:32] <brson> there's a patech enqueued to make rustc follow RUST_MIN_STACK too
[06:46:41] <jack> brsoN: thankfully this is my own code, so hopefully RUST_MIN_STACK will work
[06:49:16] *** Joins: maik (maik___@moz-B6A195EA.dip0.t-ipconnect.de)
[06:49:20] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Connection reset by peer)
[06:49:30] *** Joins: doener (doener@moz-121949B3.unitymediagroup.de)
[06:50:10] <james4k> hmm ok, think im starting to understand a bit more; lifetime is referring to scope? is it all about scope?
[06:50:17] *** Joins: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP)
[06:50:32] *** Joins: sebcrozet (sebcrozet@moz-6DA639AF.w80-13.abo.wanadoo.fr)
[06:50:42] <ChrisMorgan> Yep, scope is another word for it.
[06:50:46] *** Quits: Jesin (Jessin_@moz-1B1307FF.eecs.lehigh.edu) (Quit: Leaving)
[06:51:27] *** Quits: KindOne (KindOne@moz-D762C29B.dynamic.ip.windstream.net) (Ping timeout)
[06:51:43] <ChrisMorgan> brson: this is proving to be exceptionally difficult to whittle down. Looks like it's a very complex bug.
[06:51:53] <james4k> ah :) ok, thanks for being patient
[06:53:13] <brson> ChrisMorgan: oh, wow. you build with debug info, and *gdb is printing rust source code*
[06:53:19] <brson> magical
[06:53:30] <ChrisMorgan> brson: yeah, I liked finally observing that :-)
[06:55:17] *** Joins: KindOne (KindOne@moz-83581C9F.dynamic.ip.windstream.net)
[06:56:32] <ChrisMorgan> The crash is very fragile: remove almost anything from construct() and it stops crashing. Problem is, I need all that there...
[06:57:57] *** Joins: dherman (dherman@moz-FEEC7E9.hsd1.ut.comcast.net)
[06:57:57] *** ChanServ sets mode: +o dherman
[06:59:44] *** Quits: dherman (dherman@moz-FEEC7E9.hsd1.ut.comcast.net) (Ping timeout)
[07:00:01] *** Joins: victorporof (victorporo@B4B1C8EE.73B1E539.9B1E38F4.IP)
[07:02:30] <ChrisMorgan> No, I'm forced to conclude that there really isn't a lot that I can remove without it stopping crashing. It seems I can remove A or B, but not both A *and* B.
[07:04:20] <ChrisMorgan> brson: any ideas on how to identify what's going on with this crash?
[07:04:59] <brson> ChrisMorgan: it might be a by-val self bug. it seems that just calling mut_self.stream.take() is bogus
[07:05:35] <ChrisMorgan> brson: I think it's likely to be tied to that, but the problem is that if you modify construct() much then it stops crashing and starts working.
[07:07:05] <brson> ChrisMorgan: even if you don't call `construct`?
[07:07:30] <ChrisMorgan> Calling construct is still necessary, and it's at the point where construct() is called that it crashes.
[07:08:07] *** Quits: jeff (jeff@moz-FC89C5BA.nycmny.east.verizon.net) (Ping timeout)
[07:08:15] <ChrisMorgan> It never actually gets to executing construct, as a println at the top of that function will show. (When I first saw the line number in GDB I presumed it to be an error there!)
[07:08:40] <brson> ChrisMorgan: I see a crash without calling construct, using this function https://gist.github.com/brson/6199418
[07:08:43] *** Joins: gopalindians (gopal@A6494589.12A8BE40.9BC7F97B.IP)
[07:11:09] <ChrisMorgan> brson: that's just causing a regular failure for me
[07:11:27] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Connection reset by peer)
[07:11:36] <brson> hm
[07:12:08] <ChrisMorgan> I had expected it to be to do with the mut_self stuff from the start, but was surprised when just that wasn't enough to trigger it.
[07:12:17] *** Quits: gopalindians (gopal@A6494589.12A8BE40.9BC7F97B.IP) (Quit: Leaving)
[07:12:32] <ChrisMorgan> Nor is a minimal test case along those lines able to cause it, for me.
[07:14:03] <ChrisMorgan> I just want to be able to use fn read_response(mut self).
[07:14:24] <brson> ChrisMorgan: if I change read_response to take ~self it doesn't crash, just deadlocks, which is maybe progress?
[07:15:51] <ChrisMorgan> What does taking (~self) accomplish, compared to (&mut self) or (self)?
[07:16:14] *** Quits: tedh_ (tedh@moz-76BF83CB.z180-91-67.customer.algx.net) (Client exited)
[07:17:10] <brson> ChrisMorgan: it's a linear passing style like (self), but potentially works around bugs with (self)
[07:17:21] <brson> at the expense of an allocation
[07:18:07] * ChrisMorgan is seeing what happens if one shifts read_response to a function taking mut request and making the method return `read_response(self)`
[07:18:23] <ChrisMorgan> Still segfault.
[07:19:31] *** Joins: Jesin (Jessin_@moz-3AD6F09F.res.lehigh.edu)
[07:20:23] *** Quits: maik (maik___@moz-B6A195EA.dip0.t-ipconnect.de) (Ping timeout)
[07:21:14] <ChrisMorgan> brson: changing read_response to take ~self, the last two mut_self occurrences to *mut_self, and changing the example to have (~request).read_response() still segfaults for me
[07:22:20] <ChrisMorgan> Returning *mut_self back to the original mut_self and altering the assignment to `let mut mut_self = *self;` also segfaults.
[07:23:13] *** Joins: maik (maik___@moz-B6A195EA.dip0.t-ipconnect.de)
[07:23:14] <brson> let me push my branch
[07:23:19] *** Quits: hopplaboppla (Mibbit@moz-535184AB.customers.ownit.se) (Quit: http://www.mibbit.com ajax IRC Client)
[07:24:50] * ChrisMorgan was still building with -O
[07:24:54] <brson> ChrisMorgan: here's what I have https://github.com/brson/rust-http/commit/c7bf0f8cafd06475e79e342ab0beef4c78f68ba2
[07:24:58] <brson> oh I'm not using -O
[07:25:00] <brson> I'll try that
[07:25:30] <ChrisMorgan> Still dies without -O
[07:26:28] <brson> can you try mine?
[07:26:38] <brson> can i get the server to print what it's recving?
[07:27:14] *** Quits: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net) (Input/output error)
[07:28:00] <ChrisMorgan> Easiest place to do that is src/libhttp/buffer.rs
[07:28:50] <ChrisMorgan> Neither client nor server is resilient yet and can easily be hung by a malicious other
[07:29:00] <ChrisMorgan> (Or incompetent other :P)
[07:29:34] <ChrisMorgan> I know why it isn't getting there: not flushing.
[07:29:41] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[07:29:41] *** Joins: gits1225 (gits@7667A9A4.3AAF7B.A2DC32D.IP)
[07:29:42] <ChrisMorgan> Your example does work for me.
[07:30:02] <brson> oh, yeah, if I add a flush() it even gets the response
[07:30:03] <brson> woo!
[07:30:14] <brson> to write_headers
[07:31:00] <ChrisMorgan> As it should. I just forgot when I was starting to buffer it to flush it. Did that when I implemented buffering for the server, too...
[07:33:07] <ChrisMorgan> What do you reckon: switch to an owned pointer for now?
[07:33:32] <brson> yes, with FIXME. by-val self is sketchy
[07:33:47] <brson> ~ is trusty
[07:34:31] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[07:35:23] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[07:37:49] *** Quits: leaper (Mibbit@393F3D58.CB450964.520CDC98.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:39:41] <ChrisMorgan> Good. That makes it a vaguely working HTTP client. :-)
[07:43:17] <ChrisMorgan> You know, I discovered that whatever GitHub Pages is using as its server is HTTP/1.1 non-compliant. It doesn't interpret the absoluteURI form of a Request-Line (e.g. `GET http://rust-lang.org/ HTTP/1.1`) correctly.
[07:43:43] <ChrisMorgan> And RFC 2616 says "all HTTP/1.1 servers MUST accept the absoluteURI form in requests".
[07:45:02] <dbaupp> file a bug?
[07:46:09] <ChrisMorgan> Actually, I must check that rust-lang.org is actually handled by GitHub Pages... but such a request as indicated there leads to a 302 Found with "Location: http://www.rust-lang.orghttp://rust-lang.org/"
[07:46:19] *** Joins: eschweic (Adium@moz-CF8BEBEF.dia.static.qwest.net)
[07:47:02] *** Quits: eschweic (Adium@moz-CF8BEBEF.dia.static.qwest.net) (Quit: Leaving.)
[07:50:21] <jack> i just found brson's poetry
[07:50:32] <jack> i apparently did something bad to newrt
[07:51:31] <ChrisMorgan> Fun :D
[07:53:25] <brson> jack: do you have a backtrace?
[07:53:26] <doener> ChrisMorgan: how does one reproduce the segfault?
[07:54:24] <ChrisMorgan> doener: one checks out HEAD^^, makes, runs any of the servers (e.g. build/examples/info) and then runs the client example (build/examples/client/client)
[07:54:57] <ChrisMorgan> Checking out HEAD^^ is necessary as it's now been fixed by using ~self instead of self.
[07:55:04] <jack> brson: now but i can try to snag one
[07:55:09] <doener> ChrisMorgan: HEAD^^ == master^^? (HEAD is what you have checked out, so... ;-)
[07:55:25] <ChrisMorgan> Oh, OK. master^^.
[07:55:54] <doener> hm, doesn't segfault
[07:56:16] <doener> on 425613b
[07:56:20] *** Joins: dim-an (ermolovd@moz-FE167E47.nationalcablenetworks.ru)
[07:56:31] <jack> brson: https://gist.github.com/metajack/6199522
[07:56:35] <doener> using rustc 0.8-pre (e81e81f 2013-08-09 18:41:13 -0700)
[07:58:01] <jack> brson: i apparently clobbrered my SingleThreaded spawn_sched call with just spawn. so i bet this is the timer thread safety thing
[07:58:16] *** Joins: dherman (dherman@moz-FEEC7E9.hsd1.ut.comcast.net)
[07:58:16] *** ChanServ sets mode: +o dherman
[07:59:15] <jack> brson: well, putting in spawn_sched didn't help much.
[07:59:56] <brson> jack: can I see the code?
[08:00:14] *** Quits: dherman (dherman@moz-FEEC7E9.hsd1.ut.comcast.net) (Ping timeout)
[08:00:22] <jack> one sec
[08:02:10] <jack> brson: brson: https://github.com/metajack/squiggle/
[08:02:17] <jack> whoops. branch "new-gen" of that.
[08:02:33] <jack> gen.rs is the fresh code.
[08:04:05] *** Quits: hjr3 (hradtke@moz-842BF853.hsd1.ca.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[08:04:51] *** Quits: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com) (Quit: eatkinson)
[08:05:13] <brson> jack: what do i do for private.key?
[08:06:13] *** Joins: Ferio (Mibbit@moz-23CDE542.fullrate.dk)
[08:06:51] *** Quits: maik (maik___@moz-B6A195EA.dip0.t-ipconnect.de) (Ping timeout)
[08:08:10] <brson> jack: what do i do to make it crash?
[08:09:14] <jack> brson: ./squiggle train 7
[08:10:17] <brson> is it non-deterministic?
[08:11:14] <brson> woah you used a labeled loop
[08:11:30] <jack> yes to both.
[08:14:16] <brson> jack: did you catch what the error was when it failed? it should have said 'fatal runtime error: something'
[08:14:17] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[08:14:18] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/Oerf5g
[08:14:18] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[08:15:49] <jack> task <unnamed> failed at 'called `Option::unwrap()` on a `None` value', /Users/jack/src/rust/src/libstd/option.rs:323
[08:15:50] <jack>  
[08:16:25] <jack> nm, here you go:
[08:16:26] <jack> i don't see any fatal runtime error. i just got a bit wall of text
[08:16:28] <jack> whoops
[08:16:34] <jack> fatal runtime error: assertion failed: task.unwinder.unwinding
[08:16:35] <jack>  
[08:17:16] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[08:17:16] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/qFBj_Q
[08:17:16] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[08:18:45] <brson> jack: ah were you expecting the prior task failure? this looks like it might be the linked failure race. one of the tasks failed 'called `Option::unwrap` ...', then the runtime crashed
[08:20:15] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[08:20:15] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/qFBj_Q
[08:20:15] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[08:20:16] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[08:20:16] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/sURWvg
[08:20:16] <ghrust> 13rust/06auto 14980bcdd 15Dmitry Ermolov: Increase system stack size.
[08:20:16] <ghrust> 13rust/06auto 14f0fc9c9 15bors: auto merge of #8425 : dim-an/rust/increase-stack-size, r=brson
[08:20:17] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[08:20:53] <jack> i was not expecting a failure, but maybe i introduced a bug somewhere.
[08:21:05] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[08:21:42] <jack> i don't get failures without runtime fata errors of the same kind, but that unwrap error happens every time the runtime fatal error does
[08:22:01] <jack> i can't seem to get a backtrace on the unwrap failure
[08:22:27] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[08:22:27] *** ChanServ sets mode: +o brson
[08:23:32] <brson> jack if it *is* a linked failure race then spawning with 'unlinked' might solve it. Something like `let builder = task(); builder.unlinked(); do builder.spawn { ... }`, then some other steps to use SingleThreaded
[08:25:53] <brson> jack: it is the linked failure race. i just got this https://gist.github.com/brson/6199589
[08:26:00] <brson> which is what happens when linked failure doesn't segfault
[08:26:28] <brson> so some Option is None and is being unwrapped, that failure is propagating to other tasks, and that's buggy
[08:27:18] *** Joins: Palmik (palmik@moz-CC484FDD.tmcz.cz)
[08:28:05] <jack> if i could get a backtrace it would help immensely. did upcall_fail go away?
[08:29:31] *** Joins: txdv (quassel@966F3542.3BA477DA.14C26596.IP)
[08:29:56] <brson> jack: it's called rust_begin_unwind now
[08:30:07] <brson> probably should have left the name alone
[08:31:58] *** Joins: alisdair (textual@moz-FBF4138A.vc.shawcable.net)
[08:36:41] *** Joins: maik (maik___@moz-B6A195EA.dip0.t-ipconnect.de)
[08:37:25] <jack> if i have multiple SingleThreadeds hitting different Timers, is that ok?
[08:38:21] <maik> is there a way to make a borrow read only?
[08:38:59] <jack> &*foo when foo is &mut foo i think works
[08:40:10] <maik> ahm nvm I think I just don't understand the error message
[08:42:18] <ChrisMorgan> brson: what are your present thoughts with regards to the newrt HTTP client for Servo?
[08:44:45] *** Quits: gits1225 (gits@7667A9A4.3AAF7B.A2DC32D.IP) (Ping timeout)
[08:47:23] *** Joins: gits1225 (gits@FFB8DEC0.B0D5B53C.73686190.IP)
[08:48:16] *** Quits: gits1225 (gits@FFB8DEC0.B0D5B53C.73686190.IP) (Quit: )
[08:53:45] <jack> brson: under gdb it never fails. lovely :)
[08:55:21] <jack> brson: anything else i can break on? rust_begin_unwind didn't work either. i finally got it to crash under gdb, but no stack :(
[08:55:50] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[08:57:14] <brson> ChrisMorgan jack: I'm sorry I have to go to sleep
[08:57:17] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[08:58:46] *** Joins: dherman (dherman@moz-FEEC7E9.hsd1.ut.comcast.net)
[08:58:46] *** ChanServ sets mode: +o dherman
[09:00:44] *** Quits: dherman (dherman@moz-FEEC7E9.hsd1.ut.comcast.net) (Ping timeout)
[09:01:16] <SimonSapin> Does Rust have anything similar to ~[T]<T: Trait>, where elements of the same list can have different types? (As long as they implement the same trait)
[09:01:38] <SimonSapin> oh, maybe trait objects? ~[@Trait]
[09:04:43] <dbaupp> SimonSapin: yeah, that's what trait objects are for
[09:05:14] <SimonSapin> Iâ€™ve heard that &Trait is broken. What about ~Trait?
[09:05:30] <doener> dbaupp: https://github.com/mozilla/rust/pull/8270 -- added a codegen test, could you r?
[09:05:50] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[09:07:00] <doener> dbaupp: (was r+ by pcwalton before)
[09:07:15] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[09:08:09] *** Quits: alisdair (textual@moz-FBF4138A.vc.shawcable.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[09:08:27] <dbaupp> SimonSapin: I think ~Trait works ok
[09:08:39] <doener> thanks
[09:09:05] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[09:11:03] <SimonSapin> dbaupp: shouldnâ€™t the tutorial not suggest &Trait, if itâ€™s broken? http://static.rust-lang.org/doc/tutorial.html#trait-objects-and-dynamic-method-dispatch
[09:20:44] <dbaupp> SimonSapin: there's lots of things the tutorials shouldn't do :P (I think nmatsakis actually has a branch that fixes/improves them though)
[09:21:42] *** Quits: maik (maik___@moz-B6A195EA.dip0.t-ipconnect.de) (Ping timeout)
[09:22:27] *** Joins: maik (maik___@moz-B6A195EA.dip0.t-ipconnect.de)
[09:22:53] *** Joins: jensnockert (jensnocker@moz-61E1062F.tbcn.telia.com)
[09:24:50] *** Joins: tikue (tkuehn@moz-CF8BEBEF.dia.static.qwest.net)
[09:24:58] *** Quits: tikue (tkuehn@moz-CF8BEBEF.dia.static.qwest.net) (Quit: tikue)
[09:25:02] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[09:26:46] *** Quits: maik (maik___@moz-B6A195EA.dip0.t-ipconnect.de) (Ping timeout)
[09:34:11] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[09:37:26] *** Quits: dwhyte (dwhyte@1922756A.EDC594B0.7BF4A4B0.IP) (Quit: Leaving.)
[09:41:20] *** Joins: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com)
[09:46:01] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[09:47:33] *** Joins: true_droid (true_droid@moz-123FD9B8.beck.volia.net)
[09:49:09] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Connection reset by peer)
[09:49:53] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[09:52:57] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[09:53:22] *** Joins: maik (maik___@moz-B6A195EA.dip0.t-ipconnect.de)
[09:58:18] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[09:58:54] *** Joins: kendle (Mibbit@moz-A9F11352.ovh.net)
[09:59:25] *** Joins: dherman (dherman@moz-FEEC7E9.hsd1.ut.comcast.net)
[09:59:25] *** ChanServ sets mode: +o dherman
[09:59:48] *** Joins: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP)
[10:00:11] *** Joins: mibitzi (mibitzi@659DAD1F.60DF3A09.8395810B.IP)
[10:00:23] *** Joins: mib_2rlxzu (Mibbit@moz-5F2A1BAE.clienti.tiscali.it)
[10:00:24] *** Quits: mib_2rlxzu (Mibbit@moz-5F2A1BAE.clienti.tiscali.it) (Quit: mib_2rlxzu)
[10:00:32] *** Quits: kendle (Mibbit@moz-A9F11352.ovh.net) (Quit: http://www.mibbit.com ajax IRC Client)
[10:01:13] *** Quits: dherman (dherman@moz-FEEC7E9.hsd1.ut.comcast.net) (Ping timeout)
[10:03:04] *** Joins: peterdn (chatzilla@moz-97742234.new.ox.ac.uk)
[10:03:21] *** Quits: thesnowdog (doug@9842E8BA.8E46834.6F17036B.IP) (Ping timeout)
[10:04:13] *** Joins: thesnowdog (doug@9842E8BA.8E46834.6F17036B.IP)
[10:04:57] <cmr> Awww, you can't label a while loop?
[10:05:04] <cmr> That's inconvenient.
[10:09:15] *** Quits: kemurphy (kemurphy@3863AC20.C4E71399.9510F13D.IP) (Ping timeout)
[10:09:23] *** Joins: kemurphy (kemurphy@3863AC20.C4E71399.9510F13D.IP)
[10:09:34] *** Quits: mcpherrin (mimcpher@moz-345B5EBA.csclub.uwaterloo.ca) (Ping timeout)
[10:09:38] *** Quits: Luqman (laden@moz-DCEF6040.csclub.uwaterloo.ca) (Ping timeout)
[10:09:45] *** Quits: xymostech (xymostech@22A34502.AFC2BCFF.2CFD4520.IP) (Ping timeout)
[10:09:46] *** Joins: xymostech (xymostech@22A34502.AFC2BCFF.2CFD4520.IP)
[10:09:47] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (Ping timeout)
[10:09:49] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[10:09:57] *** Quits: rhodesd (none@3646D136.4C5731DA.F395EA5B.IP) (Ping timeout)
[10:09:58] *** Quits: thesnowdog (doug@9842E8BA.8E46834.6F17036B.IP) (Ping timeout)
[10:11:09] *** Joins: thesnowdog (doug@9842E8BA.8E46834.6F17036B.IP)
[10:13:48] *** Quits: thesnowdog (doug@9842E8BA.8E46834.6F17036B.IP) (Ping timeout)
[10:15:13] <engla_> for a language that tries to remove keywords all the time, I wonder why there is all of loop, while and for
[10:15:18] *** Joins: rhodesd (none@3646D136.4C5731DA.F395EA5B.IP)
[10:15:38] *** Joins: mcpherrin (mimcpher@moz-345B5EBA.csclub.uwaterloo.ca)
[10:15:45] *** Joins: Luqman (laden@moz-DCEF6040.csclub.uwaterloo.ca)
[10:15:52] <cmr> eh loop basically comes for free, you need a `continue` anyway
[10:16:44] <engla_> yes and no, the language is simpler because loop is such a simple construct, but at the same time, two different ways to do a basic loop
[10:16:45] <doomlord> loop is shorter than continue i guess. i suppose its 'why loop instead of while (true) + continue'
[10:16:50] <engla_> it could just have been  while true {  }
[10:17:04] *** Joins: thesnowdog (doug@9842E8BA.8E46834.6F17036B.IP)
[10:17:08] <cmr> that's a good question for the ML I think
[10:17:23] <engla_> I'm not going to ask it though
[10:17:41] <doomlord> familiarity with c vs objective redesign from the ground up..
[10:18:10] <engla_> always pros and cons
[10:18:21] <engla_> each of for, while and loop work in only one way at least
[10:18:23] <engla_> that's good
[10:18:28] <engla_> no overloading
[10:18:39] <doomlord> well loop is continue or while 1 :)
[10:18:56] <engla_> not while 1   :) while true {}
[10:19:02] <engla_> 1 is not a condition
[10:19:26] <cmr> doomlord: only booleans allowed, no implicit coercion
[10:19:45] <engla_> rusti: if std::rand::random() { 1 } { 0 }
[10:19:48] -rusti- <anon>:5:32: 5:37 error: mismatched types: expected `()` but found `<VI0>` (expected () but found integral variable)
[10:19:48] -rusti- <anon>:5          if std::rand::random() { 1 } { 0 }
[10:19:49] -rusti-                                          ^~~~~
[10:19:49] -rusti- error: aborting due to previous error
[10:19:49] -rusti- application terminated with error code 101
[10:19:57] <doomlord> heh of course.    loop doesn't bug me, but if i was choosing it would be while true and continue , just one less thing for a convert to learn
[10:20:26] <engla_> ok I don't know why that didn't work
[10:21:07] <cmr> rusti: if std::rand::random() { println("yes") } else { println("no") }
[10:21:09] -rusti- no
[10:21:10] -rusti- ()
[10:21:12] <cmr> rusti: if std::rand::random() { println("yes") } else { println("no") }
[10:21:13] -rusti- yes
[10:21:13] -rusti- ()
[10:21:22] <doomlord> do forever { .... } :)
[10:22:00] <doomlord> oh you can't return or break from that ok
[10:22:02] <engla_> #define ever (;;)
[10:23:05] <mcpherrin> I prefer #define ever ;;
[10:23:10] <mcpherrin> for(ever) {}
[10:32:11] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Quit: WeeChat 0.4.2-dev)
[10:32:42] *** Quits: Klaufir_ (admin@94E7A28F.E28D9BD4.349F3CD5.IP) (Ping timeout)
[10:35:21] *** Joins: Klaufir_ (admin@94E7A28F.E28D9BD4.349F3CD5.IP)
[10:40:19] *** Joins: is_computer_on (Mibbit@moz-8C2076C2.upc-d.chello.nl)
[10:43:41] <dbaupp> rusti: 'cmr: while true { break 'cmr; } 
[10:43:41] *** Quits: is_computer_on (Mibbit@moz-8C2076C2.upc-d.chello.nl) (Quit: http://www.mibbit.com ajax IRC Client)
[10:43:41] -rusti- <anon>:5:15: 5:20 error: expected `loop`, found `while`
[10:43:42] -rusti- <anon>:5          'cmr: while true { break 'cmr; } 
[10:43:42] -rusti-                         ^~~~~
[10:43:42] -rusti- application terminated with error code 101
[10:43:59] * dbaupp thought that worked
[10:47:09] *** Joins: thedust (TheDust@moz-8C2076C2.upc-d.chello.nl)
[10:51:12] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Quit: eatkinson)
[10:56:14] *** Joins: Ms2ger (Ms2ger@moz-E9883900.access.telenet.be)
[10:57:13] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[10:57:42] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[10:59:45] *** Joins: dherman (dherman@moz-FEEC7E9.hsd1.ut.comcast.net)
[10:59:45] *** ChanServ sets mode: +o dherman
[11:00:40] <cmr> rusti: let x = "/// "; x.slice_from(4)
[11:00:41] -rusti- ""
[11:01:42] *** Quits: dherman (dherman@moz-FEEC7E9.hsd1.ut.comcast.net) (Ping timeout)
[11:05:23] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[11:19:16] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[11:19:48] *** Joins: maxli1 (maxli@B5559308.9C54E60.2FA4EA88.IP)
[11:20:04] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Connection reset by peer)
[11:22:43] *** Quits: engla_ (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[11:23:20] <mitsuhiko> I wonder if it should be valid to name a variable "self" in static methods
[11:23:34] <mitsuhiko> it's a bit odd that the constructor looks special if it wants to call methods
[11:23:34] <cmr> mitsuhiko: self is a keyword I'm pretty sure
[11:24:02] <dbaupp> rusti: let self = 1;
[11:24:03] -rusti- <anon>:5:9: 5:12 error: found `self` in ident position
[11:24:03] -rusti- <anon>:5          let self = 1;
[11:24:03] -rusti-                   ^~~
[11:24:03] -rusti- error: aborting due to previous error
[11:24:03] -rusti- application terminated with error code 101
[11:24:07] <mitsuhiko> cmr: yeah
[11:24:54] <mitsuhiko> it probably does not make much sense
[11:25:07] <mitsuhiko> was just looking at obj-c code before and thought that it looks nicer there how the constructors work
[11:26:53] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[11:27:10] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[11:30:58] *** Joins: samx (sami@moz-48EC0983.dyn.optonline.net)
[11:32:31] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[11:34:14] *** Quits: samx (sami@moz-48EC0983.dyn.optonline.net) (Quit: This computer has gone to sleep)
[11:34:50] *** Joins: DoomBoom (DoomBoom@6B14631A.ACEC7723.5D1D3FEF.IP)
[11:36:22] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[11:38:18] *** Joins: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP)
[11:38:18] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/sURWvg
[11:38:18] *** Parts: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP) ()
[11:40:49] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[11:41:16] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[11:41:16] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/wCqtCg
[11:41:16] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[11:41:28] <dbaupp> cmr: ping
[11:41:32] <cmr> dbaupp: pong
[11:42:32] <dbaupp> cmr: "weird stuff"? https://github.com/mozilla/rust/pull/8437#issuecomment-22438261
[11:42:56] <dbaupp> (also, that's really nice.)
[11:44:14] *** Joins: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP)
[11:44:14] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/wCqtCg
[11:44:14] *** Parts: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP) ()
[11:44:16] *** Joins: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP)
[11:44:16] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/LYc5-w
[11:44:16] <ghrust> 13rust/06auto 144b74b8d 15BjÃ¶rn Steinbrink: Elide unnecessary ret slot allocas...
[11:44:16] <ghrust> 13rust/06auto 14e70aac5 15bors: auto merge of #8270 : dotdash/rust/ret_alloca_elim, r=pcwalton...
[11:44:17] *** Parts: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP) ()
[11:44:44] <cmr> dbaupp: weird stuff is the best I can describe it
[11:44:53] <cmr> I have no idea what it's doing, why, or how it's broken :p
[11:45:50] <cmr> I use the patch with rustdoc_ng just fine though
[11:45:56] <cmr> so I'm not convinced it's entirely my fault
[11:47:31] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[11:48:11] <dbaupp> cmr: also, s/type/variant/.
[11:48:38] <dbaupp> cmr: but, yeah, I believe there's been problems with json before :(
[11:57:46] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Ping timeout)
[12:00:16] *** Joins: dherman (dherman@moz-FEEC7E9.hsd1.ut.comcast.net)
[12:00:16] *** ChanServ sets mode: +o dherman
[12:02:15] *** Quits: Klaufir_ (admin@94E7A28F.E28D9BD4.349F3CD5.IP) (Ping timeout)
[12:02:23] *** Quits: thedust (TheDust@moz-8C2076C2.upc-d.chello.nl) (Quit: )
[12:02:44] *** Joins: busylizzy (lisa@85228838.12D0DC84.211374C4.IP)
[12:03:28] *** Quits: dherman (dherman@moz-FEEC7E9.hsd1.ut.comcast.net) (Ping timeout)
[12:08:58] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[12:12:43] *** Joins: Klaufir_ (admin@94E7A28F.E28D9BD4.349F3CD5.IP)
[12:13:43] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[12:19:58] *** Joins: Yurume_ (yurume@AC58A8CE.8A059B47.E313B915.IP)
[12:20:48] *** Joins: BitPuffin (quassel@moz-7BB00EC9.bredband.comhem.se)
[12:20:55] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[12:24:38] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: jorendorff)
[12:27:25] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[12:28:15] <ruediger> hmm rust-mode is pretty bare :/
[12:29:24] <doomlord_> heh. (accidental) attempt to use foo::* in foo.rs causes ICE , but I guess thats an error anyway
[12:29:50] <ruediger> I wrote some code to integrate rusti into emacs https://github.com/ruediger/rusti.el
[12:29:50] <dbaupp> rusti: mod foo { use foo::*; }
[12:29:56] -rusti- pastebinned 8 lines of output: http://ix.io/7bj
[12:34:33] *** Joins: Florob (Florob@moz-39532932.de)
[12:37:00] *** Quits: z0w0 (zack@moz-E12708D5.lns6.woo.bigpond.net.au) (Client exited)
[12:39:13] *** Quits: true_droid (true_droid@moz-123FD9B8.beck.volia.net) (Ping timeout)
[12:39:16] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[12:41:18] <dbaupp> ruediger: that looks cool! you should post to the mailing list (or otherwise publicize it)
[12:41:28] *** Quits: BitPuffin (quassel@moz-7BB00EC9.bredband.comhem.se) (Ping timeout)
[12:41:29] <ruediger> dbaupp: will do
[12:42:40] <doomlord_> find_ast_node.rs:28:6: 28:13 error: found value name used as a type: def_mod({crate: 0, node: 860})
[12:42:40] <doomlord_>   <<< is it possible this is a buggy error (the error is something else) - I get this after trying to  move an enum from one source-file to another. i did another similar  move sucessfully so i thought i had all the 'use/mod' for that working ok
[12:43:49] <dbaupp> doomlord_: I think so; you probably have an `impl ThatEnum { ... }` in the original file?
[12:44:00] <doomlord_> yes i certainly do
[12:44:38] <dbaupp> yup, that is where I've seen that error too; moving it to be with the defn should fix it
[12:45:11] <dbaupp> https://github.com/mozilla/rust/issues/7607
[12:45:11] <heftig> is there any interest in SCTP? I suppose it won't be supported, not only because libuv doesn't seem to support it
[12:45:14] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[12:45:17] *** Quits: jensnockert (jensnocker@moz-61E1062F.tbcn.telia.com) (Input/output error)
[12:45:43] <doomlord_> is that a bug or feature - are you supposed to be able to impl <enum> {} in a different mod (not crate)
[12:45:45] *** Joins: jensnockert (jensnocker@moz-61E1062F.tbcn.telia.com)
[12:45:46] <cmr> heftig: sctp would be cool
[12:45:57] <cmr> doomlord_: bug
[12:46:34] <doomlord_> ok thats reassuring, i dont mind working around it for the moment :)
[12:47:15] <dbaupp> it looks like `impl mod::ThatEnum {}` should work
[12:47:20] <doomlord_> i was trying to reduce some dependancies by splitting code & data declarations. (some common structs used by front end and back and, but decoupling the front-end & back end..)
[12:47:26] *** Quits: jensnockert (jensnocker@moz-61E1062F.tbcn.telia.com) (Ping timeout)
[12:47:33] <doomlord_> ah let me try..
[12:49:01] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[12:49:05] <doomlord_> i have a lot of glob imports still within my own code-base - i do that instinctively because early on i want to be able to move things around as my code evolves
[12:49:59] <maik> is this still how it is supposed to be done? pub struct foo{priv x: int}
[12:50:00] <doomlord_> i get the impression that means i run into more of the bugs , which might be why i'm finding this module system a lot more confusing than i thought it would be..
[12:50:17] <cmr> maik: still how what's supposed to be done?
[12:50:24] <cmr> doomlord_: yeah, glob imports hit a lot of bugs in resolve
[12:50:27] <maik> cmr, I mean if that will change soon :)
[12:50:36] <cmr> maik: no, it won't
[12:50:41] <maik> cmr, k thanks
[12:53:52] <doomlord_> heh its kind of catch 22 at the minute. Dont use glob imports, qualify things -> hard to move things around because you have to change the qualifiers. or use glob imports, then its hard to move things around because of the bugs :)
[12:55:01] <doomlord_> use more modules from the outset -> code is filled with many badly named modules when it isn't clear how its going to work .. (early on ratio of modules:actual stuff is too high)
[12:57:16] *** Quits: maxli1 (maxli@B5559308.9C54E60.2FA4EA88.IP) (Connection reset by peer)
[12:57:21] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[12:57:54] *** Joins: maik_ (maik___@moz-C834AD21.dip0.t-ipconnect.de)
[12:58:50] *** Quits: maik (maik___@moz-B6A195EA.dip0.t-ipconnect.de) (Ping timeout)
[13:01:09] <ruediger> rustdoc is just to generate the documentation right?  There is no tool to quickly lookup the documentation for a certain symbol?
[13:01:15] <cmr> ruediger: correct
[13:01:22] <cmr> doomlord_ is working on that
[13:01:31] <cmr> and I'm working ona  new rustdoc
[13:02:12] <ruediger> cmr: doomlord_ is working on a tool to quickly lookup the documentation for a symbol?
[13:02:14] <doomlord_> https://github.com/dobkeratops/rustfind <<< WIP
[13:02:18] <cmr> ruediger: yes
[13:02:23] <ruediger> ah cool
[13:02:24] <cmr> Also jump-to-definition and such
[13:02:41] <doomlord_> ruediger, i'm generating html from this tool, its the most useful form at the minute
[13:02:44] *** Joins: dherman (dherman@moz-FEEC7E9.hsd1.ut.comcast.net)
[13:02:44] *** ChanServ sets mode: +o dherman
[13:03:05] <doomlord_> i figure it'll be handy if i run it on the standard libraries and just throw that on the internet 
[13:03:34] *** Joins: milinda (milinda@moz-C79ADF95.dhcp-bl.indiana.edu)
[13:03:55] *** Joins: jdm (jdm@9FB21CB6.76DE1AD5.AE2B2F80.IP)
[13:04:01] <doomlord_> this tool should be useable within your own sourcecode if you want to try it, but i haven't implemented linking between crates at the moment 
[13:04:24] <ruediger> doomlord_: it is not rust 0.7 compatible, right?
[13:04:33] <doomlord_> i'm not sure
[13:04:38] <cmr> probably not
[13:04:38] <ruediger> (time to install the nightly)
[13:04:44] *** Quits: dherman (dherman@moz-FEEC7E9.hsd1.ut.comcast.net) (Ping timeout)
[13:04:54] <doomlord_> i'm using 0.8, i can tell you that, and i had to update it
[13:06:05] <ruediger> doomlord_: I get the following error with the rust-nightly package from the ppa: rust2html.rs:433:5: 439:33 error: type `std::option::Option<(int,uint)>` does not implement any method in scope named `get_or_default`
[13:06:12] <doomlord_> on that note, maybe there's a handy tutorial function that uses a lot of the stdlib ... i could throw that on the web with working links
[13:06:37] <doomlord_> ok i've not updated myself in a few days, i should..
[13:07:20] <doomlord_> yikes is get_or_default removed , or just renamed :)
[13:07:24] <cmr> renamed
[13:07:27] <cmr> unwrap_or_default
[13:07:40] <cmr> get always cloned, and was removed because it was confusing to have mostly-duplicate functionality
[13:08:09] <doomlord_> ok i had no idea it was cloning :)
[13:08:11] <dbaupp> cmr: I don't think it actually cloned
[13:08:22] <dbaupp> cmr: it used to clone
[13:08:45] <dbaupp> but then it got changed to move, and the bounds weren't updated, so it required Clone but didn't use it.
[13:08:49] <cmr> ahhh
[13:08:51] <cmr> that's confusing
[13:09:10] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[13:09:27] *** Quits: DoomBoom (DoomBoom@6B14631A.ACEC7723.5D1D3FEF.IP) (Quit: Leaving)
[13:10:27] <doomlord_> ruediger http://dobkeratops.github.io/rftest/index.html <<< in the meantime if you're interested i've compiled some of the sourcebase and thrown it on a github page here, you should be able to navigate to individual paths as well as using a few handy links there
[13:11:01] <dbaupp> doomlord_: http://dobkeratops.github.io/rftest/libsyntax/ :(
[13:11:04] <cmr> http://dobkeratops.github.io/rftest/libstd/ ?
[13:11:06] <cmr> yeah
[13:11:17] <ruediger> doomlord_: thanks
[13:12:04] <cmr> it seems they work fine except for index pages though
[13:12:05] <kimundi> it didn't even have the bounds
[13:12:20] <doomlord_> heh my dumb index page http://dobkeratops.github.io/rftest/libsyntax/syntax.rs.html
[13:12:27] <kimundi> get and unwrap were identical
[13:15:12] <bstrie> rusti: Some(1).unwrap_or_default(2)
[13:15:13] -rusti- 1
[13:15:17] <dbaupp> doomlord_: you should fix it :P
[13:15:23] <bstrie> RFC: rename that to `unwrap_default`
[13:15:29] *** Joins: ipc (ipc@moz-76ED5036.lightspeed.cicril.sbcglobal.net)
[13:15:35] <bstrie> too many underscores for my taste
[13:16:18] <cmr> bstrie: +1
[13:16:45] <cmr> make sure to unify all the other _or_default to _default too :p
[13:17:37] <kimundi> we can just remove the unwrap part
[13:18:08] <kimundi> x.or_default().unwrap()
[13:18:45] <dbaupp> kimundi++
[13:19:01] <dbaupp> x.default(1).unwrap() looks nice
[13:19:23] <cmr> makes it easier to pipeline in an iterator too
[13:19:40] <cmr> I've had some nested match { Some(x) => x, None => some_default } which is ugly
[13:20:23] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[13:20:45] <kimundi> I already added or_zero()
[13:20:55] <cmr> Ugh zero
[13:21:00] * cmr implements trait Default
[13:21:19] <kimundi> rusti: Some(6).or_zero()
[13:21:20] -rusti- Some(6)
[13:21:56] <kimundi> rusti: None::<int>.or_zero()
[13:21:56] -rusti- Some(0)
[13:22:13] <kimundi> rusti: None::<int>.or_zero().unwrap()
[13:22:14] -rusti- 0
[13:25:55] <doomlord_> ok i updated the placeholder links page, lets see if github updates
[13:26:21] *** Quits: ipc (ipc@moz-76ED5036.lightspeed.cicril.sbcglobal.net) (Quit: ipc)
[13:28:42] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[13:28:51] *** Quits: maik_ (maik___@moz-C834AD21.dip0.t-ipconnect.de) (Ping timeout)
[13:30:19] <heftig> wouldn't it make sense to have or_zero unwrap automatically?
[13:31:36] <bstrie> did Zero::zero get renamed?
[13:31:39] <cmr> no
[13:32:32] <bstrie> rusti: Some(1).unwrap_or_default(Zero::zero())
[13:32:35] -rusti- pastebinned 11 lines of output: http://ix.io/7bo
[13:32:47] <bstrie> unresolved name
[13:32:52] <bstrie> I thought it was in the prelude
[13:32:57] <cmr> rusti: Some(1).unwrap_or_default(std::num::Zero::zero())
[13:32:58] -rusti- 1
[13:33:00] <cmr> no
[13:33:02] <bstrie> aha
[13:33:07] <bstrie> well I'm glad that works :)
[13:33:15] *** Quits: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca) (Ping timeout)
[13:33:31] <bstrie> rusti: let x: Option<int> = None; x.unwrap_or_default(Zero::zero())
[13:33:33] -rusti- pastebinned 11 lines of output: http://ix.io/7bs
[13:33:40] <cmr> you'd think you'd learn
[13:33:42] <bstrie> rusti: let x: Option<int> = None; x.unwrap_or_default(std::num::Zero::zero())
[13:33:42] -rusti- 0
[13:33:43] *** Joins: ipc (ipc@moz-76ED5036.lightspeed.cicril.sbcglobal.net)
[13:33:45] <bstrie> you'd thinkg!
[13:33:46] <cmr> :p
[13:33:47] <bstrie> bleh
[13:33:51] <bstrie> too early for typing
[13:34:07] <bstrie> why am I awake at 9 on a saturday
[13:34:14] * cmr was up at 5
[13:34:30] <heftig> rusti: None::<int>.unwrap_or_zero()
[13:34:31] -rusti- 0
[13:34:36] <bstrie> nifty
[13:35:03] <bstrie> I do really like the idea of having a .default() method
[13:35:03] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[13:35:08] <bstrie> on options
[13:35:09] <cmr> it's not a method
[13:35:12] <cmr> oh on option
[13:35:15] <cmr> not the trait
[13:35:20] <bstrie> yeah
[13:35:35] <kimundi> rusti: None.or(Some(42u))
[13:35:36] -rusti- Some(42)
[13:35:42] <bstrie> whoa
[13:35:55] <cmr> rusti: Some(42u).or(Some(7))
[13:35:56] -rusti- Some(42)
[13:36:02] <cmr> Some explosion, but it works
[13:36:05] <heftig> rusti: None::<int>.unwrap_or_default(std::num::One::one())
[13:36:06] -rusti- 1
[13:36:26] <bstrie> rusti: Some(42).or(42)
[13:36:29] -rusti- line longer than 150 columns, pastebinned 5 lines of output: http://ix.io/7bt
[13:37:15] *** Quits: jdm (jdm@9FB21CB6.76DE1AD5.AE2B2F80.IP) (Quit: Lost terminal)
[13:37:29] <kimundi> heftig: The correct name would probably be or_some_zero
[13:38:00] <kimundi> but all or_ fns return a some 
[13:38:55] <cmr> r? https://github.com/mozilla/rust/pull/8438
[13:39:35] *** kimundi is now known as zz_kimundi
[13:42:16] *** zz_kimundi is now known as kimundi
[13:42:35] *** Joins: jensnockert (jensnocker@moz-B156D81C.mobileonline.telia.com)
[13:42:51] *** Joins: maik_ (maik___@moz-C834AD21.dip0.t-ipconnect.de)
[13:42:51] *** Quits: jensnockert (jensnocker@moz-B156D81C.mobileonline.telia.com) (Connection reset by peer)
[13:44:31] <maik_> we have some ppl with D experience here right? What did you dislike in D?
[13:46:03] <cmr> SiegeLord: ^
[13:50:43] *** kimundi is now known as zz_kimundi
[13:53:52] *** Quits: Ferio (Mibbit@moz-23CDE542.fullrate.dk) (Quit: http://www.mibbit.com ajax IRC Client)
[13:54:57] *** Quits: ipc (ipc@moz-76ED5036.lightspeed.cicril.sbcglobal.net) (Quit: ipc)
[13:55:57] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[13:55:59] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[13:57:32] <erickt> YAY! my PR finally landed!
[13:57:50] <erickt> and then promptly broke my other PR!
[13:58:19] <dbaupp> erickt: \o/
[13:58:28] <erickt> ding dong the nulls are dead
[13:58:51] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[13:59:51] <SiegeLord> maik_: Some general things like a horrible bikesheddy/luddite-leaning Community, inability to stop adding features and stop introducing backwards incompatible changes 12 years after the language was created. Also some specific issues like incomprehensible concurrency model, omnipresent garbage collection, horrible windows support... I'm sure more will come to mind if I think of some
[14:00:10] <cmr> yeah
[14:00:36] <cmr> when I used it what, 2 years ago? I liked it, but it had wayyyy too many features (ie, impossible to understand), and the GC was a no-go for what I wanted to use it for
[14:01:38] *** Quits: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com) (Ping timeout)
[14:03:17] *** Joins: dherman (dherman@moz-FEEC7E9.hsd1.ut.comcast.net)
[14:03:18] *** ChanServ sets mode: +o dherman
[14:03:47] *** zz_kimundi is now known as kimundi
[14:04:43] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Ping timeout)
[14:05:13] *** Quits: dherman (dherman@moz-FEEC7E9.hsd1.ut.comcast.net) (Ping timeout)
[14:05:30] <maik_> I was looking at D, I know that I can turn the GC completely off and that I could use an alternative stdlib which manages it's own memory. But I probably have no memory safety guaranty anymore.....so I am not sure where the advantage would be :)
[14:05:48] <SiegeLord> maik_: What alternative stdlib?
[14:05:56] <maik_> SiegeLord, sec
[14:06:13] <SiegeLord> It wouldn't be "std" anyway
[14:06:45] <maik_> SiegeLord, I forgot the name but I think it was something like ministdlib
[14:08:41] *** Quits: milinda (milinda@moz-C79ADF95.dhcp-bl.indiana.edu) (Input/output error)
[14:09:27] *** Joins: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com)
[14:11:29] *** kimundi is now known as zz_kimundi
[14:13:26] <SiegeLord> Well, I suppose it solves that bit... however you end up doing the thing I'm leaving C++ for... using a subset of the language
[14:13:39] <SiegeLord> It's great when you work alone/don't use 3rd party libraries :P
[14:13:39] <maik_> yeah I was thinking the same thing
[14:13:55] *** Quits: sebcrozet (sebcrozet@moz-6DA639AF.w80-13.abo.wanadoo.fr) (Ping timeout)
[14:14:04] *** Joins: sebcrozet (sebcrozet@moz-C27D92D8.w193-252.abo.wanadoo.fr)
[14:14:15] <maik_> I am just always curious about new languages.
[14:15:14] <SiegeLord> The one that really drove me away was the backwards incompatible changes... I'm maintaining an alternative standard library for it, and every new release breaks it some way
[14:15:44] <cmr> Strong project direction and leadership is one of the things I like about Rust
[14:16:03] <cmr> ANd the understanding of the concept of a "complexity budget"
[14:16:06] <SiegeLord> Yes, absolutely... I love Rust's leadership and community
[14:16:23] *** Joins: milinda (milinda@moz-C79ADF95.dhcp-bl.indiana.edu)
[14:16:42] <SiegeLord> Not a fan of 100% of the language, but I trust the rigor of the people at the top to choose wisely
[14:16:43] *** Quits: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com) (Quit: ZNC - http://znc.in)
[14:17:18] *** Joins: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com)
[14:17:28] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[14:18:41] *** Quits: Yurume_ (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[14:18:43] <erickt> would anyone be opposed to me adding #[deny(unused_imports)] and #[deny(unnecessary_allocations)] everywhere?
[14:18:49] <cmr> yes
[14:18:57] <maik_> some things also bug be, probably because I am doing something wrong but overall the memory safety guarantee is just too good
[14:19:12] <dbaupp> erickt: not me
[14:19:15] <erickt> cmr: why is that? I'm getting a little tired cleaning up these unused imports all the time
[14:19:28] <cmr> erickt: I don't want to have to clean up my own unused imports ;P
[14:19:58] *** Quits: milinda (milinda@moz-C79ADF95.dhcp-bl.indiana.edu) (Input/output error)
[14:20:43] <cmr> erickt: but in all seriousness, go for it
[14:20:48] <cmr> I'd even see #[deny(warnings)]
[14:20:50] <cmr> *say
[14:21:06] <cmr> on stage2, at least
[14:21:22] <dbaupp> there is deny(warnings) for stage != 0
[14:21:26] *** Joins: dherman (dherman@moz-FEEC7E9.hsd1.ut.comcast.net)
[14:21:26] *** ChanServ sets mode: +o dherman
[14:21:34] <maik_> are there other languages with a task local gc?
[14:22:07] <erickt> dbaupp: is there? then why am I seeing warningsâ€¦? maybe it's not set on libsyntax and librustc...
[14:22:23] *** Quits: cade (cade@moz-DB3BF95F.members.linode.com) (Quit: Bye!)
[14:22:27] *** Quits: thesnowdog (doug@9842E8BA.8E46834.6F17036B.IP) (Ping timeout)
[14:22:36] <dbaupp> erickt: oh, maybe it's only std and extra?
[14:22:38] <cmr> maik_: nimrod I think
[14:23:37] <erickt> dbaupp: I'm not finding a #[deny(warnings)] anywhere. Do you know if it's done through the makefile?
[14:24:25] <dbaupp> erickt: yeah, it's in the makefile somewhere
[14:24:35] * cmr working on a libstd with --cfg no_rt
[14:25:01] <dbaupp> erickt: acrichto would know more
[14:25:15] <erickt> dbaupp: I found it in mk/target.mk
[14:25:20] <maik_> cmr, right, I completely forgot about nimrod
[14:25:33] <dbaupp> cmr: awesome!
[14:25:46] *** Quits: sebcrozet (sebcrozet@moz-C27D92D8.w193-252.abo.wanadoo.fr) (Ping timeout)
[14:26:06] *** Joins: thesnowdog (doug@9842E8BA.8E46834.6F17036B.IP)
[14:26:28] *** Joins: sebcrozet (sebcrozet@moz-C27D92D8.w193-252.abo.wanadoo.fr)
[14:26:56] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[14:27:16] <erickt> dbaupp: yep, warnings are only denied for std and extra. I'll add it to the rest
[14:30:50] *** Quits: maik_ (maik___@moz-C834AD21.dip0.t-ipconnect.de) (Ping timeout)
[14:31:33] *** Quits: brianm (brianm@moz-9B7D279E.dsl.static.sonic.net) (Quit: Leaving...)
[14:31:53] *** zz_kimundi is now known as kimundi
[14:32:07] <cmr> I must say, cfg for conditional compilation is a hell of a lot nicer than ifdefs
[14:34:26] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[14:42:21] *** Joins: Ferio (Mibbit@moz-23CDE542.fullrate.dk)
[14:43:54] *** Joins: samx (sami@moz-48EC0983.dyn.optonline.net)
[14:44:16] *** Joins: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP)
[14:44:16] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/LYc5-w
[14:44:16] *** Parts: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP) ()
[14:44:39] *** Joins: BitPuffin (quassel@moz-7BB00EC9.bredband.comhem.se)
[14:45:05] *** Quits: bct (bct@moz-D3BEA05.ed.shawcable.net) (Ping timeout)
[14:45:56] <cmr> dbaupp: cfg stripping happens very early on right? I'm getting errors from *inside* functions that are marked #[cfg(not(no_rt))] when giving --cfg no_rt..
[14:46:27] <dbaupp> cmr: yes
[14:46:32] <dbaupp> cmr: what errors?
[14:46:38] <cmr> os.rs:1154:10: 1154:25 error: unresolved name `rt::args::clone`.
[14:46:40] <cmr> os.rs:1154     match rt::args::clone() {
[14:46:47] <cmr> stuff like that
[14:46:57] <dbaupp> cmr: gist a diff?
[14:47:00] <cmr> sec
[14:47:15] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[14:47:15] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/HyIFiw
[14:47:15] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[14:47:16] *** Joins: bct (bct@moz-D3BEA05.ed.shawcable.net)
[14:47:17] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[14:47:17] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/Y-fBuw
[14:47:17] <ghrust> 13rust/06auto 141e576a3 15Steven Stewart-Gallus: Isolate common wait_end logic
[14:47:17] <ghrust> 13rust/06auto 142ba36ec 15bors: auto merge of #8327 : sstewartgallus/rust/factor_out_waitqueue, r=bblum...
[14:47:18] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[14:47:19] <cmr> https://gist.github.com/cmr/581d9d0e72dcd178755c
[14:47:27] <cmr> Compiling with `rustc --cfg no_rt --cfg stage2 std.rs`
[14:47:38] *** Joins: boredomist (user@moz-63CF9F31.res-cmts.sesp.ptd.net)
[14:47:44] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[14:48:47] <ChrisMorgan> I'm wanting an fn comma_split_iter(s: &str) { value.split_iter(',').transform(|w| w.trim_left()) }, but can't figure out if this is actually possible as a function (macro would do it, I guess, but is not nice).
[14:49:02] <dbaupp> cmr: https://gist.github.com/cmr/581d9d0e72dcd178755c#file-nort-patch-L189-L193 is xkcd's rng :P
[14:49:03] <ChrisMorgan> The type of that expression is std::iterator::Map<'a, &str, &str, std::str::CharSplitIterator<'a, char>>
[14:49:15] <cmr> dbaupp: basically yeah :P
[14:49:41] <ChrisMorgan> You should really seed it with the number 4.
[14:49:41] <cmr> dbaupp: I'm not aiming for struct correctness, just compilingness
[14:50:01] <cmr> *strict
[14:50:05] <dbaupp> cmr: in that diff, I don't see any changes anywhere near line 1154 of os?
[14:50:17] <dbaupp> wait, I was reading the wrong ones
[14:50:39] <cmr> the change is on 1147, or should be
[14:50:54] <ChrisMorgan> Am I correct, then, in thinking that I can't actually return such an iterator from this function, because the value w.trim_left() comes from inside it and thus its lifetime can't be big enough?
[14:50:56] <cmr> https://gist.github.com/cmr/581d9d0e72dcd178755c#file-nort-patch-L91
[14:51:29] <cmr> ChrisMorgan: I think you should be able to do that
[14:51:33] <dbaupp> cmr: you need to put it in each of the cfgs: they are or'd when listed seperately
[14:51:35] <ChrisMorgan> Rust *really* needs to be able to extend the lifetime of objects like that. As it is, various things become simply impossible, though they're quite reasonable.
[14:52:24] <dbaupp> ChrisMorgan: fn comsi<'a>(s: &'a str) -> Map<'a, &'a str, &'a str, std::str::CharSplitIterator<'a, char>>> should be the type
[14:52:27] <dbaupp> (or somethign like that)
[14:52:28] <cmr> dbaupp:  grr, that's annoying
[14:52:52] <ChrisMorgan> dbaupp: Yep, you win. Thanks!
[14:53:08] <dbaupp> cmr: I'm leaning towards #[cfg()] #[cfg()] being and, and #[cfg(or())] being or
[14:53:30] <dbaupp> in fact, I'll open an RFC about it.
[14:53:44] <cmr> cfg(in(target_os, "linux", "android", "freebsd")) would be nice
[14:54:30] * ChrisMorgan wonders if it's really so necessary for it to be in prefix notation
[14:54:40] <Ms2ger> cfg(unixish)?
[14:54:42] <dherman> toddaaro: do you have a twitter handle?
[14:54:51] <cmr> ChrisMorgan: the meta item syntax isn't very flexible
[14:55:24] <ChrisMorgan> Is there any reason it can't be?
[14:55:56] <cmr> as long as ] is disallowed I don't see why not
[14:55:57] <dbaupp> ChrisMorgan: because making it less flexible would make it more complicated?
[14:56:03] <cmr> but it'd require things using them to actually do parsing
[14:56:05] <cmr> which sucks
[14:56:15] <ChrisMorgan> ... instead of?
[14:56:30] <cmr> instead of what?
[14:56:41] <cmr> as it is now, when you get an attribute out of the ast, you get a nice tree
[14:56:50] <cmr> with arbitrary text, you'd get a string
[14:57:16] <ChrisMorgan> Oh, you could get an AST. Maybe even have macro_rule! style matching. I dunno.
[14:57:47] * ChrisMorgan knows practically nothing about how it actually works or should work
[14:58:28] *** Joins: milinda (milinda@moz-C79ADF95.dhcp-bl.indiana.edu)
[15:00:10] <dbaupp> https://github.com/mozilla/rust/pull/8439 r?
[15:00:13] *** Quits: txdv (quassel@966F3542.3BA477DA.14C26596.IP) (Ping timeout)
[15:00:48] <dbaupp> in theory we could support arbitrary ast in #[...]
[15:01:12] <dbaupp> (without loosing nice grammar properties.)
[15:01:29] * dbaupp would vote against that, though.
[15:02:11] <cmr> so would I
[15:02:18] <cmr> it'd make rustdoc's job 30x harder
[15:05:56] *** kimundi is now known as zz_kimundi
[15:06:24] *** Quits: dherman (dherman@moz-FEEC7E9.hsd1.ut.comcast.net) (Quit: dherman)
[15:08:08] <ChrisMorgan> dbaupp: can you not derive Clone for HashSet?
[15:08:42] <dbaupp> ChrisMorgan: nope, the HashMap Clone impl requires IterBytes of its keys
[15:08:57] <dbaupp> (and deriving doesn't express that.)
[15:09:01] *** Joins: txdv (quassel@966F3542.3BA477DA.14C26596.IP)
[15:09:32] <ChrisMorgan> What generic type constraints can deriving figure out?
[15:10:02] *** zz_kimundi is now known as kimundi
[15:10:31] <dbaupp> nothing
[15:10:48] <dbaupp> it just uses the trait that's being impl'd
[15:11:07] <dbaupp> (and any other bounds that the specific deriving impl is hardcoded to require.)
[15:11:48] <cmr> dbaupp: can macros be cfg'd?
[15:12:16] <cmr> I think so, with your cfg stripping change
[15:12:20] <ruediger> hmm, rusti seems to have broken :{ :} support in rust-nighty. Try: echo -ne ":{\n1 + 1\n:}\n" | rusti => Segmentation fault (core dumped)
[15:12:21] *** Joins: tedh (tedh@moz-76BF83CB.z180-91-67.customer.algx.net)
[15:12:36] <cmr> ruediger: rusti only kinda-works some of the time
[15:12:42] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[15:12:52] <ruediger> cmr: oh, ok :(
[15:12:55] *** Quits: milinda (milinda@moz-C79ADF95.dhcp-bl.indiana.edu) (Input/output error)
[15:13:09] <dbaupp> cmr: there are 2 ways, either wrap the body in `if cfg!(..) { ... }`, or https://github.com/mozilla/rust/blob/master/src/libsyntax/ext/expand.rs#L761-L786
[15:13:12] <cmr> I get:
[15:13:14] <cmr> *** Error in `rusti': malloc(): smallbin double linked list corrupted: 0x00007fea91d5fa00 ***
[15:13:34] *** Joins: upstream (TheDust@moz-8C2076C2.upc-d.chello.nl)
[15:13:40] <cmr> dbaupp: it's for condition!, so the second way looks best. thanks!
[15:16:41] *** Quits: samx (sami@moz-48EC0983.dyn.optonline.net) (Quit: This computer has gone to sleep)
[15:16:43] *** kimundi is now known as zz_kimundi
[15:18:40] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: jorendorff)
[15:20:00] *** Quits: bct (bct@moz-D3BEA05.ed.shawcable.net) (Connection reset by peer)
[15:24:07] *** Joins: bct (bct@moz-D3BEA05.ed.shawcable.net)
[15:24:44] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[15:24:44] *** Quits: bct (bct@moz-D3BEA05.ed.shawcable.net) (Connection reset by peer)
[15:25:17] *** Joins: bct (bct@moz-D3BEA05.ed.shawcable.net)
[15:27:57] *** zz_kimundi is now known as kimundi
[15:29:07] *** Quits: bct (bct@moz-D3BEA05.ed.shawcable.net) (Connection reset by peer)
[15:29:27] *** Joins: bct (bct@moz-D3BEA05.ed.shawcable.net)
[15:30:19] *** Quits: bct (bct@moz-D3BEA05.ed.shawcable.net) (Connection reset by peer)
[15:30:38] *** Joins: bct (bct@moz-D3BEA05.ed.shawcable.net)
[15:31:29] *** Quits: bct (bct@moz-D3BEA05.ed.shawcable.net) (Connection reset by peer)
[15:31:48] *** Joins: bct (bct@moz-D3BEA05.ed.shawcable.net)
[15:32:32] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Connection reset by peer)
[15:32:33] *** Quits: bct (bct@moz-D3BEA05.ed.shawcable.net) (Connection reset by peer)
[15:32:58] *** Joins: bct (bct@moz-D3BEA05.ed.shawcable.net)
[15:33:21] *** Quits: dim-an (ermolovd@moz-FE167E47.nationalcablenetworks.ru) (Ping timeout)
[15:33:37] *** Joins: hjr3 (hradtke@moz-842BF853.hsd1.ca.comcast.net)
[15:34:04] <ChrisMorgan> *sob* can't call static methods on a generic type T :-(
[15:34:52] <cmr> Yes you can
[15:34:57] <cmr> Trait::method::<T>()
[15:35:10] *** kimundi is now known as zz_kimundi
[15:35:20] <cmr> (iff it implements Trait)
[15:36:26] <ChrisMorgan> Yeah, just remembered that was the way to do it. Thanks.
[15:37:06] <ChrisMorgan> "error: failed to find an implementation of trait headers::HeaderThingummy for [type error]"
[15:38:11] *** Joins: samx (sami@moz-48EC0983.dyn.optonline.net)
[15:39:38] *** Quits: bct (bct@moz-D3BEA05.ed.shawcable.net) (Connection reset by peer)
[15:39:57] <ChrisMorgan> That's for calling a fn x<T: HeaderThingummy>(&self) -> Result<T, ...>, and the callee then matches it against Ok([one of T's variants](...)), which is enough to figure out what type it is. But alas, that is apparently not enough for it. It wants me to call x::<AnyRequestHeader> and make it clear.
[15:40:16] *** Joins: dim-an (ermolovd@moz-FE167E47.nationalcablenetworks.ru)
[15:40:28] *** Joins: bct (bct@moz-D3BEA05.ed.shawcable.net)
[15:44:44] *** Joins: askalski (akuda@2BA4E5A7.CC7751E8.6712E96B.IP)
[15:44:48] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[15:45:03] <askalski> hi, anyone here?
[15:45:15] *** Quits: hjr3 (hradtke@moz-842BF853.hsd1.ca.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[15:45:43] <ChrisMorgan> askalski: I'm just about to not be, but if you have a question, just ask it rather than asking to ask.
[15:45:56] *** Joins: jensnockert (jensnocker@moz-61E1062F.tbcn.telia.com)
[15:46:02] *** Joins: saneyuki_s (Mibbit@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[15:46:07] <askalski> well, it's a longer one
[15:46:10] *** zz_kimundi is now known as kimundi
[15:46:28] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[15:46:28] <askalski> I am a PhD student, I am looking for some interesting topics in programming languages
[15:46:48] <askalski> I worked at mozilla some time ago and remember that rust seemed promising
[15:46:51] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Quit: WeeChat 0.4.1)
[15:46:59] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[15:47:05] *** Quits: saneyuki_s (Mibbit@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Quit: http://www.mibbit.com ajax IRC Client)
[15:47:30] <askalski> but I guess I should talk with someone who designed the language
[15:47:45] *** Joins: saneyuki_s (saneyuki_s@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[15:48:12] *** Quits: saneyuki_s (saneyuki_s@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[15:48:16] *** Joins: saneyuki_s (saneyuki_s@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[15:48:51] <askalski> I am looking for some longer chat
[15:49:07] <askalski> on rust, it's goals and design choices
[15:49:18] <askalski> and are there any open topics on it
[15:49:33] <askalski> I mean: theoretical, not implementation
[15:49:46] <askalski> ChrisMorgan, what do you think?
[15:49:53] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[15:50:15] *** Quits: askalski (akuda@2BA4E5A7.CC7751E8.6712E96B.IP) (Quit: Wychodzi)
[15:50:27] <cmr> askalski: Send an email to the ML, maybe ask questions during the tuesday meeting
[15:51:57] * kimundi is listening
[15:53:08] *** kimundi is now known as zz_kimundi
[15:54:22] *** zz_kimundi is now known as kimundi
[15:55:58] *** Quits: jensnockert (jensnocker@moz-61E1062F.tbcn.telia.com) (Input/output error)
[15:56:25] *** Joins: jensnockert (jensnocker@moz-61E1062F.tbcn.telia.com)
[15:58:06] *** Quits: jensnockert (jensnocker@moz-61E1062F.tbcn.telia.com) (Ping timeout)
[15:59:58] *** Quits: saneyuki_s (saneyuki_s@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[16:03:26] <SimonSapin> &mut ~[T] has two levels of indirection, right? Is there a better way to borrow a unique vector to append to it?
[16:03:33] <cmr> Yes, no.
[16:03:44] <cmr> It's the same as it would be in C
[16:03:54] *** Joins: saneyuki_s (Mibbit@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[16:05:42] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[16:06:47] *** Joins: jensnockert (jensnocker@moz-61E1062F.tbcn.telia.com)
[16:07:08] *** Joins: maik_ (maik___@moz-C834AD21.dip0.t-ipconnect.de)
[16:07:28] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[16:09:22] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[16:10:45] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[16:11:10] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[16:11:17] <dim-an> hi, is it hard to compile generated llvm assembly/bytecode (rustc --emit-llvm -S) into machine code?
[16:11:35] <cmr> dim-an: no, just use llc
[16:11:42] *** Joins: jdm (jdm@9FB21CB6.76DE1AD5.AE2B2F80.IP)
[16:11:49] <cmr> and it's called IR, not assembly
[16:12:05] <dim-an> i tried, it complains about external function println / etc
[16:12:15] <cmr> you need to link to libstd
[16:12:38] <dim-an> ok will go read manual :)
[16:12:40] <dim-an> thanks
[16:12:53] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[16:13:17] <cmr> dim-an: why, though? it's the same thing rustc does
[16:13:30] <dim-an> investigate segfault in generated code
[16:13:34] <cmr> ok
[16:13:44] <dim-an> i'm new to llvm
[16:14:01] <dim-an> so don't feel comfortable with its tools
[16:15:17] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[16:16:26] <maik_> i know we are generating bloated IR, how much bloated do you think it really is? like +30%?
[16:17:10] *** Joins: vodik (simon@moz-1DDE8FF6.dsl.bell.ca)
[16:19:24] <cmr> maik_: we're doing pretty good on the codegen tests
[16:21:35] <cmr> maik_: it's a ton better now, doener has been doing a lot of good work with it
[16:22:29] <maik_> cmr, oh nice didn't know that
[16:22:46] <cmr> match still generates rather unideal code
[16:22:50] <cmr> as does anything involving @
[16:23:15] <cmr> @ will be better with the GC, match just needs some love
[16:24:21] <cmr> iterators are in pretty good shape, the only thing missing is basically automatic vectorization
[16:24:23] <maik_> I just realized I never used @ before
[16:24:35] *** Quits: jensnockert (jensnocker@moz-61E1062F.tbcn.telia.com) (Input/output error)
[16:25:03] *** Joins: jensnockert (jensnocker@moz-61E1062F.tbcn.telia.com)
[16:25:07] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[16:26:44] *** Quits: jensnockert (jensnocker@moz-61E1062F.tbcn.telia.com) (Ping timeout)
[16:35:00] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Connection reset by peer)
[16:36:49] <SimonSapin> Some time ago we discussed perfect hashing in a syntax extension to map a static set of strings to other values. Could match just do that?
[16:37:07] <cmr> SimonSapin: not at compile time?
[16:38:55] <SimonSapin> cmr: I mean, when I do something like match some_str { "foo" => 1, "bar" => 2, ..., _ => -1 }, the compiler decides exactly how to implement it, right? It doesnâ€™t have to be same as a series of ifâ€™s
[16:39:31] <cmr> SimonSapin: right, but you'd want the syntax extension generating the correct structure directly
[16:40:04] <SimonSapin> cmr: couldnâ€™t that be an implementation of match, without a syntax extension?
[16:40:27] <cmr> SimonSapin: I suppose
[16:41:40] <SimonSapin> does match already use a jump table for enums with many variants?
[16:42:07] <cmr> no idea
[16:42:41] <doomlord_> i was using as_c_str() to get from a rust string to a c string for raw c file io, seems removed now, whats the most convinient replacement
[16:44:49] <cmr> https://github.com/mozilla/rust/pull/8296 was the PR that did it
[16:44:54] <cmr> see https://github.com/erickt/rust/commit/d5110854f76eac307e7a1729f3003e09d0277b60 and https://github.com/erickt/rust/commit/986ba9c3c17ee1c7bb05ba9651fd0a6547cc2db6 specifically
[16:45:03] <cmr> I'll include a specific migration guide in TWiR I guess
[16:45:08] *** Quits: Ferio (Mibbit@moz-23CDE542.fullrate.dk) (Quit: http://www.mibbit.com ajax IRC Client)
[16:45:42] *** Quits: tedh (tedh@moz-76BF83CB.z180-91-67.customer.algx.net) (Connection reset by peer)
[16:45:44] *** Joins: tedh (tedh@moz-76BF83CB.z180-91-67.customer.algx.net)
[16:50:18] *** Quits: BitPuffin (quassel@moz-7BB00EC9.bredband.comhem.se) (Ping timeout)
[16:52:50] *** Joins: gits1225 (gits@FFB8DEC0.B0D5B53C.73686190.IP)
[16:55:35] <doomlord_> found it, to_c_str().unwrap() seems to do what i wanted
[16:57:50] *** Joins: panzi (chatzilla@moz-EA1CC3DF.adsl.highway.telekom.at)
[16:58:07] *** Quits: maik_ (maik___@moz-C834AD21.dip0.t-ipconnect.de) (Ping timeout)
[16:58:40] *** Joins: cade (cade@66A6305B.C2D6DAC0.9510F13D.IP)
[16:59:10] *** Quits: sebcrozet (sebcrozet@moz-C27D92D8.w193-252.abo.wanadoo.fr) (Client exited)
[16:59:53] <panzi> I'm not sure if I use swap right. I have mut left: @Expr and mut right: @Expr and swap them using swap(&mut left, &mut right); is this correct?
[17:00:06] *** Joins: brianm (brianm@moz-9B7D279E.dsl.static.sonic.net)
[17:00:08] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[17:00:10] *** Quits: vodik (simon@moz-1DDE8FF6.dsl.bell.ca) (Quit: WeeChat 0.4.2-dev)
[17:00:16] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[17:00:20] <cmr> panzi: that is a correct invocation of swap, dunno if it's what you want though
[17:01:06] *** Quits: victorporof (victorporo@B4B1C8EE.73B1E539.9B1E38F4.IP) (Ping timeout)
[17:01:28] *** Quits: StarLight (StarLight@moz-E1607E2E.dynamic.avangarddsl.ru) (Ping timeout)
[17:01:47] <panzi> I want thet left points to what was right before and vice versa. it seemed an awkwardly complex syntax for want is "left, right = right, left" in python
[17:02:27] <cmr> rusti: let (a, b) = (5, 7); let (a, b) = (b, a); (a, b)
[17:02:27] -rusti- (7, 5)
[17:02:34] <panzi> (well, I make a lot of typos today)
[17:03:29] <cmr> swap is for no-copy and no-deinitialize
[17:04:43] <panzi> rusti: let (a, b) = (5, 7); (a, b) = (b, a); (a, b)
[17:04:45] -rusti- line longer than 150 columns, pastebinned 4 lines of output: http://ix.io/7bL
[17:05:01] <cmr> panzi: you need let
[17:05:06] <cmr> that is a horrible ICE though
[17:05:53] *** Joins: StarLight (StarLight@moz-4E59CE9.dynamic.avangarddsl.ru)
[17:06:04] <panzi> yeah, but when I only swap on a certain condition the let would be in a nested scope and thus it won't change a and b outside of the { }. so I have to use swap
[17:06:31] <cmr> correct.
[17:06:44] <samx> Trying to make a small test program using traits and iterators, but can't get it to compile due to: error: in method `iter`, type parameter 0 has 0 trait bounds, but the corresponding type parameter in the trait declaration has 1 trait bound  :-(.. Can anyone take a quick look at the code: error: http://pastebin.com/Vd0nq261
[17:06:46] <cmr> that "swap" is just rebinding the variable names
[17:08:41] <erickt> does anyone remember if tjc finished the unify-let-and-match-pattern-matching issue? I can't find the issue number for it
[17:09:14] <cmr> erickt: he did I'm pretty sure
[17:09:44] <erickt> ah cool
[17:10:16] *** Quits: brianm (brianm@moz-9B7D279E.dsl.static.sonic.net) (Quit: Leaving...)
[17:10:45] * erickt glares at bors.
[17:11:09] <erickt> we got to wait an estimated 22 minutes before #8327 lands
[17:11:36] <erickt> it's been running for over 2 hours now
[17:11:44] <cmr> yup
[17:12:00] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[17:12:39] *** Joins: spacetime (quassel@moz-CAB487E6.rishab.in)
[17:12:47] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:12:55] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:12:57] *** Quits: Voomer (Voomer@moz-CC05FF5E.hsd1.wa.comcast.net) (Ping timeout)
[17:14:32] <erickt> I think we should factor the slow bots out of auto if we can. Or at least not have bors block on waiting for them to build
[17:14:57] <erickt> and just send out nastigrams if someone broke the build on them
[17:15:07] <cmr> erickt: I don't think that is workable
[17:15:19] <cmr> it used to be like that and the tree broke badly every other week
[17:15:53] <erickt> hrm. Somehow llvm managed to do it
[17:15:58] <strcat> 60 pull requests - what we're doing now obviously isn't working ;P
[17:16:07] <erickt> what if we had a tree of merge bots?
[17:16:08] <strcat> we have to do manual rollups, messing up the history
[17:16:18] <strcat> and yet we're way behind
[17:16:22] <cmr> erickt: that'd wrok, but we don't have infinite buildbots
[17:16:27] *** kimundi is now known as zz_kimundi
[17:16:34] <cmr> plus they have a hugemassive buildcache
[17:16:46] <strcat> erickt: there are basically no free bots, beyond a bit of leeway for either auto or a snapshot being done
[17:17:54] *** zz_kimundi is now known as kimundi
[17:18:57] <erickt> strcat: we got the try bots, they're pretty under utilized 
[17:19:18] <strcat> erickt: but that's not the full set of bots
[17:19:31] *** Quits: saneyuki_s (Mibbit@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Quit: http://www.mibbit.com ajax IRC Client)
[17:19:33] <strcat> also if you run try builds, it slows down the auto builds by ~20%
[17:19:39] <strcat> they run on the same machines
[17:19:40] *** Joins: saneyuki_s (Mibbit@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[17:19:44] <cmr> erickt: the try bots are running on the same hardware
[17:19:47] <cmr> just separate configurations.
[17:19:49] <erickt> does it? that's sad
[17:20:11] <erickt> i guess we need to petition mozilla for some more resources then :)
[17:22:04] *** Joins: leonvv (leonvv@moz-7D83A5F1.ip.telfort.nl)
[17:22:35] <cmr> more resources won't really help
[17:22:40] <cmr> we're limited by the slowness of rustc
[17:25:01] <erickt> cmr: I think it would. Here's what I'm thinking. We have one set of builders that are the auto builder. When they finish, their results get merged into master. Then we have a second set of builders. These try to optimistically merge together a bunch of PRs and see if they all compile and pass the tests together. If they do, then this gets added to the auto queue
[17:25:19] <erickt> cmr: it's basically automating your rollup process
[17:26:17] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[17:26:48] <Peng> do a binary search through the backlog?
[17:26:58] <erickt> basically
[17:28:01] <cmr> http://ci.openstack.org/zuul/gating.html
[17:31:09] *** Joins: victorporof (victorporo@D209AA7D.2203F6DA.D111398B.IP)
[17:31:33] * erickt starts a rollup PR
[17:32:55] *** kimundi is now known as zz_kimundi
[17:33:05] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Connection reset by peer)
[17:33:05] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Connection reset by peer)
[17:33:06] *** Joins: strcat1 (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:33:09] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:33:48] *** Joins: ipc (ipc@moz-76ED5036.lightspeed.cicril.sbcglobal.net)
[17:34:18] *** Quits: ipc (ipc@moz-76ED5036.lightspeed.cicril.sbcglobal.net) (Quit: ipc)
[17:35:45] <strcat1> https://github.com/thestinger/rust/commit/bcec86ccb109df045500259eac7665c5e0a86840 yay low-hanging fruit.
[17:35:51] <strcat1> lots of other things to fix in those modules too
[17:36:05] <erickt> strcat1: nice!
[17:36:11] *** strcat1 is now known as strcat
[17:36:26] <strcat> the Add impl can be faster too
[17:36:45] *** Joins: alisdair (textual@moz-FBF4138A.vc.shawcable.net)
[17:38:22] <strcat> erickt: did your \0 removal land already?
[17:38:29] <strcat> ah yeah it did
[17:38:31] <erickt> strcat: it did!
[17:38:41] <strcat> anyway with_capacity is used everywhere
[17:39:07] <strcat> to_owned, FromIterator, etc. are all 2x faster now ;p
[17:39:18] <strcat> from_buf_len
[17:40:19] <strcat> could actually make those lang items and remove the code from the compiler
[17:40:57] *** Joins: hjr3 (hradtke@moz-842BF853.hsd1.ca.comcast.net)
[17:44:17] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[17:44:17] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/Y-fBuw
[17:44:17] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[17:47:15] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[17:47:15] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/BbCwFw
[17:47:15] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[17:47:48] *** Quits: alisdair (textual@moz-FBF4138A.vc.shawcable.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[17:48:38] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[17:48:51] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[17:48:57] *** Joins: alisdair (textual@moz-FBF4138A.vc.shawcable.net)
[17:50:42] *** Joins: bytewise (bytewise@moz-4A801D04.unitymediagroup.de)
[17:54:48] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[17:55:39] *** Joins: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[17:56:58] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[17:57:05] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Input/output error)
[17:59:12] *** Quits: achin (Mibbit@moz-193F7FAD.ri.ri.cox.net) (Quit: http://www.mibbit.com ajax IRC Client)
[17:59:16] <panzi> in perf output I see "xor    %ecx,%ecx" that means this sets %ecx to 0? is this the best way to do that?
[17:59:30] <cmr> panzi: yes, it's the best way to zero a register
[18:00:20] <panzi> interesting
[18:00:43] <cmr> it has a small encoding and the microcode knows about the data dependencies
[18:01:12] <panzi> the only asm I ever wrote is on an alpha for an exercise in compiler construction
[18:01:27] <panzi> I think there was a special operation to set a register to 0
[18:01:56] <klutzy> intel optimization doc says you should use it for zeroing
[18:02:29] <panzi> also interesting that this is a red line in the perf output
[18:02:59] <panzi> if "mov    (%rdx),%r8" takes a long time this means there is probably a cache miss?
[18:03:36] <erickt> is blake2-ppc in this channel?
[18:03:45] <cmr> erickt: that would be engla
[18:04:06] <erickt> engla: ping
[18:04:21] <cmr> panzi: to my knowledge, yes.
[18:05:25] <panzi> ok, then I know what my next optimization will be.
[18:05:43] <cmr> what are you optimizing?
[18:06:22] <panzi> something I write just for fun: a solver of the countdown numbers game: https://github.com/panzi/numbers-rust
[18:07:26] <panzi> I deliberately didn't look at any publications about solvers for this. my guess is there are much better solutions. I'm on holiday which means I learn rust and write things just for fun :)
[18:07:37] <cmr> that's the funnest stuff!
[18:07:47] <engla> erickt: hi
[18:07:49] <panzi> and occasionally play some old SNES games
[18:08:04] *** Quits: saneyuki_s (Mibbit@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Quit: http://www.mibbit.com ajax IRC Client)
[18:08:10] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[18:09:01] <panzi> I also wrote the same solver in python quasi as a rapid prototype: https://github.com/panzi/numbers-python
[18:09:03] *** Quits: samx (sami@moz-48EC0983.dyn.optonline.net) (Quit: This computer has gone to sleep)
[18:10:42] <erickt> engla: Hey there. I'm putting together a rollup PR to close a bunch of things at once. I'm having some trouble with your peekable iterator adaptor, https://github.com/mozilla/rust/pull/8428. There already seems to be a Peek iterator: https://github.com/mozilla/rust/blob/master/src/libstd/iterator.rs#L1427
[18:11:02] <engla> yes, Peek is different
[18:11:58] <jdm> shoot, what can I break on in gdb to catch task failure now?
[18:12:04] <jdm> rust_task_fail and upcall_fail are gone
[18:12:07] <erickt> engla: the problem is once https://github.com/mozilla/rust/pull/8430 lands, your Peekable iterator will have two methods named "peek"
[18:12:14] <engla> oh
[18:12:17] <engla> right
[18:12:39] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[18:12:50] <engla> we didn't actually try to find a better name, more than the present .peek_/.peek is almost useless
[18:13:43] <erickt> engla: so I'm going to leave your PR out of my rollup for now
[18:14:42] <engla> ok yeah we need to find a solution for that, renaming them or removing .peek
[18:14:47] <engla> it's ok
[18:14:57] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[18:16:39] <klutzy> panzi: I'm looking into your github repos.. your browser ponies are awesome!
[18:16:44] <panzi> how does rust handle && and ||? C has conditional branches there, so that if not necessary the second term is not executed. but branches slow down because of the pipeline, so one often uses & and | instead. can you safely use & and | on bool in rust?
[18:16:52] <cmr> panzi: || and &&
[18:16:54] <panzi> klutzy: thanks! :)
[18:17:00] <cmr> They are short circuiting.
[18:17:01] *** Quits: hjr3 (hradtke@moz-842BF853.hsd1.ca.comcast.net) (Ping timeout)
[18:17:05] <cmr> & and | work fine in rust
[18:17:08] <cmr> rusti: true | false
[18:17:11] -rusti- true
[18:17:34] *** Quits: vk_ (chatzilla@moz-389FEE13.hsd1.ca.comcast.net) (Ping timeout)
[18:18:11] <jdm> where is fail! defined?
[18:18:30] <cmr> jdm: it's a macro in src/libsyntax/ext/expand.rs
[18:18:54] <strcat> cmr: https://github.com/mozilla/rust/pull/8412 r?
[18:19:24] *** Joins: hjr3 (hradtke@moz-842BF853.hsd1.ca.comcast.net)
[18:20:21] <panzi> klutzy: (I also have a bitbucket account https://bitbucket.org/panzi)
[18:20:59] *** Quits: alisdair (textual@moz-FBF4138A.vc.shawcable.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[18:21:04] *** Quits: hjr3 (hradtke@moz-842BF853.hsd1.ca.comcast.net) (Ping timeout)
[18:21:25] *** Joins: jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[18:21:53] *** Joins: mat1 (mat@9580E10C.DC7A989C.7F8AB798.IP)
[18:23:09] <jdm> thanks cmr
[18:26:58] <doomlord_> trying to use libsyntax to parse rustci just got this, : 432:63 error: Environment variable CFG_VERSION not defined .. i just updated the rust sourcetree and built rustc fine, anyone know what this relates to? .. 
[18:27:15] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[18:28:57] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Ping timeout)
[18:28:58] <jdm> eff
[18:29:10] <jdm> so disappointed that debug! is disabled by default
[18:29:15] *** Joins: vk_ (chatzilla@moz-389FEE13.hsd1.ca.comcast.net)
[18:30:46] <doomlord_> i'll just try setting it to 0.8 manually and see what happens..
[18:31:11] *** Joins: hjr3 (hradtke@moz-842BF853.hsd1.ca.comcast.net)
[18:31:38] <acrichto> strcat: r? https://github.com/mozilla/rust/pull/8421
[18:32:06] <acrichto> doomlord_: env! now is a compile-time failure if the environment option isn't defined at compile-time, so you'll need to define that if you're compiling rustc
[18:33:11] <doomlord_> ok so presumably these are things that the makefile sets up when its building rustc ... so if i just want to parse rustc for documenting i'll have to give it the same environmnet 
[18:33:13] *** zz_kimundi is now known as kimundi
[18:33:25] *** Quits: hjr3 (hradtke@moz-842BF853.hsd1.ca.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[18:33:30] <acrichto> doomlord_: yeah, it doesn't really need to be a sensible argument. Also if it gets annoying we can change that
[18:33:38] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[18:34:50] <doomlord_> ok i can just shove it in a script, its not something i'll do regularly
[18:35:09] <doomlord_> or rather its not something i'll manually do regularly 
[18:36:36] <erickt> r? https://github.com/mozilla/rust/pull/8441
[18:37:17] <erickt> thanks strcat!
[18:45:15] <sp3d> what
[18:45:21] <sp3d> damn apostrophe key
[18:45:31] <acrichto> erickt: I wonder if it'd be a good idea to only define -D warnings for buildbot builds
[18:45:34] <sp3d> what's the story for parsing XML with rust these days?
[18:47:02] <erickt> acrichto: why do you think that?
[18:47:25] <acrichto> erickt: it still prevents any warnings in `master`, but during development you don't have to rebuild rustc all the time
[18:48:03] <Ms2ger> sp3d, want to write a parser? ;)
[18:48:18] <erickt> acrichto: what about a envvar that disables warnings?
[18:48:33] <erickt> err, that disables the "deny warnings"
[18:48:40] <acrichto> erickt: yeah I was thinking something along the lines of 'if USER == rustbuild'
[18:48:53] <acrichto> erickt: oh I see
[18:49:01] <sp3d> Ms2ger: not at all, I was asking from a pragmatic standpoint: is it easiest to use libxml2 via FFI or is there a good wrapper for some library or a usable native lib w/ a nice API
[18:49:11] <acrichto> erickt: I'd be ok with that, default still warn but there's a way to opt out (and the buildbots don't opt out)
[18:50:02] <erickt> acrichto: I'd rather it be the other way around. The default is fail-on-warning for stage1+, but give people an out if they are doing rapid development
[18:50:34] <acrichto> erickt: yeah I agree
[18:52:29] <Seldaek> sp3d: the only thing around that I can see is https://github.com/grahame/rust-libxml2 and that's so old it probably doesn't work at all (if it ever did)
[18:52:53] <Seldaek> sp3d: so for now FFI, unless you feel like writing a decent wrapper or a new parser..
[18:53:02] <Seldaek> which I'm sure would be welcome :)
[18:53:19] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[18:53:19] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14a054faa to 142ba36ec: 02http://git.io/N3iJvQ
[18:53:19] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[18:53:20] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[18:53:20] <ghrust> 01[13rust01] 15bors pushed 14 new commits to 06auto: 02http://git.io/ZcDX9Q
[18:53:20] <ghrust> 13rust/06auto 14fad7857 15Erick Tryzelaar: Mass rename of .consume{,_iter}() to .move_iter()...
[18:53:20] <ghrust> 13rust/06auto 14229eeda 15Erick Tryzelaar: Clean up some unused imports in tests
[18:53:21] <ghrust> 13rust/06auto 14a661462 15Erick Tryzelaar: std: merge iterator::DoubleEndedIterator and DoubleEndedIteratorUtil
[18:53:23] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[18:53:26] *** Quits: leonvv (leonvv@moz-7D83A5F1.ip.telfort.nl) (Client exited)
[18:53:51] <erickt> cmr: your build failed: http://buildbot.rust-lang.org/builders/auto-linux-64-nopt/builds/879/steps/compile/logs/stdio
[18:54:14] <erickt> cmr: although it might have been a buildbot issue
[18:57:12] <erickt> arg! My build failed too
[18:57:36] *** Joins: BitPuffin (quassel@moz-7BB00EC9.bredband.comhem.se)
[18:58:03] *** Quits: jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Ping timeout)
[18:58:35] <Ms2ger> "Rename Iterator.transform -> .map"
[18:58:36] <Ms2ger> Mmmmm
[18:59:06] *** Joins: samx (sami@moz-48EC0983.dyn.optonline.net)
[18:59:18] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[19:01:05] <sp3d> Seldaek: thanks for the info
[19:01:06] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[19:01:11] <nmatsakis> bors!
[19:01:16] <nmatsakis> you are so slow.
[19:01:36] <erickt> nmatsakis: I'm putting together a rollup PR to help cut down the queue
[19:01:50] <nmatsakis> erickt: combining a number of small things?
[19:02:09] <nmatsakis> that look clearly safe?
[19:02:39] *** Joins: vosen (vosen@moz-266BA656.icpnet.pl)
[19:02:40] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Ping timeout)
[19:02:42] <erickt> wellâ€¦ it was combining about of the approved commits in the order of priority
[19:03:13] <erickt> about *half*
[19:03:33] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[19:06:25] *** Joins: sebcrozet (sebcrozet@moz-A855F6C0.w82-127.abo.wanadoo.fr)
[19:09:41] <acrichto> nmatsakis: do you know if there's an open issue about https://gist.github.com/alexcrichton/6201732 ?
[19:10:16] *** Quits: BitPuffin (quassel@moz-7BB00EC9.bredband.comhem.se) (Ping timeout)
[19:10:30] <nmatsakis> acrichto: yes, #2202
[19:10:54] <acrichto> nmatsakis: cool, thanks!
[19:11:04] <nmatsakis> acrichto: next thing I plan to fix after I push my PR for #5762 (~object, &object) and #3871 (extern "C" fn), both of which are nearly done
[19:11:21] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[19:11:21] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14cb81ae6 to 142ba36ec: 02http://git.io/N3iJvQ
[19:11:21] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[19:11:23] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[19:11:23] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/B32GpQ
[19:11:23] <ghrust> 13rust/06auto 144be086b 15Corey Richardson: Remove rtdebug_! and make rtdebug! work properly....
[19:11:23] <ghrust> 13rust/06auto 14c92d43a 15bors: auto merge of #8419 : cmr/rust/fix-rtdebug, r=brson...
[19:11:23] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[19:11:29] <acrichto> nmatsakis: awesome! I know that 3871 is a highly anticipated one :)
[19:11:57] <acrichto> nmatsakis: also would 5762 allow coercion from ~Trait to &Trait ?
[19:13:19] <acrichto> nmatsakis: oh nvmd, kept on reading the comments
[19:14:33] <engla> the queue is full of great stuff
[19:14:33] <nmatsakis> acrichto: yes, it does do that
[19:14:44] <acrichto> excellent
[19:17:07] <nmatsakis> seems to be passing all tests now, so I hope to clean it up a bit and submit the PR this weekend..
[19:17:10] <nmatsakis> ok, later all
[19:17:15] *** Quits: mat1 (mat@9580E10C.DC7A989C.7F8AB798.IP) (Ping timeout)
[19:21:19] <engla> anyone have naming ideas for resolving peek? There is Iterator::peek() to just inspect an iterator pipeline, and  Peekable::peek() to peek the next item in an iterator.. what do we name them?
[19:21:27] *** Quits: samx (sami@moz-48EC0983.dyn.optonline.net) (Quit: This computer has gone to sleep)
[19:21:45] <strcat> rename peek to inspect?
[19:21:52] <Seldaek> Peekable::peekaboo
[19:21:54] <engla> that's a good one
[19:22:01] <engla> inspect is good
[19:22:40] <Seldaek> engla: peek the next item means you get the next one without advancing?
[19:22:56] <engla> you get a & to the next one yes
[19:23:00] <Seldaek> I'm not clear on what inspect would do
[19:23:42] <engla> Seldaek: you get the iterator element by reference (for debugging I guess)
[19:23:54] <Seldaek> oh ok
[19:23:59] <engla> inspect is just the same as a filter that's always true. A filter can inspect too
[19:24:02] <engla> it's a closure so
[19:24:16] <engla> ok 3, 2, 1.. inspect is good
[19:24:23] <Seldaek> sold
[19:25:02] <pnkfelix> `instrument` and `trace` strike me as other potentlal names, based on my reading of the doc above `fn peek_` in iterator.rs
[19:25:20] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[19:25:50] <pnkfelix> or `watch`
[19:26:45] <strcat> cmr: make sure to teach rustdog_ng to list which methods are default methods :]
[19:26:53] <pnkfelix> or `announce`.  Like the element is making its grand entrance at the ball
[19:27:00] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[19:27:04] <Seldaek> strcat: that's done already
[19:27:07] <strcat> ah
[19:27:14] <engla> hehe pnkfelix 
[19:27:26] <engla> announce is too domain specific
[19:27:50] <sp3d> announce would have to print on its own
[19:28:04] <Seldaek> strcat: e.g. http://seld.be/rustdoc/master/std/iterator/trait.Iterator.html - "provided" = default methods, and they hint at having a function body in the definition
[19:28:11] <Seldaek> strcat: feedback welcome :)
[19:28:18] <strcat> nice
[19:28:24] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[19:28:28] <pnkfelix> for some reason `inspect` isn't giving me the right intuition about what this does.  But then again, neither did `peek`.
[19:28:45] <erickt> engla: inspect gets my vote
[19:29:22] <engla> ok nice
[19:29:39] <pnkfelix> engla: one last alternative from me: `notify`
[19:29:47] <erickt> engla: or observe
[19:29:52] <engla> erickt: now regardless what I do with this PR, it will still need to be fixed after your iterator PR integrates
[19:30:30] <engla> erickt: unless you want to do the renaming of Peek/peek_?
[19:30:32] <erickt> engla: yep. Once you push upstream though I'll merge it into my omnibus PR
[19:30:38] <engla> ok
[19:30:59] *** Joins: brendan (brendaneic@E908EF74.6BAC3F3B.56A6FAA.IP)
[19:33:04] *** Joins: igl (igl@moz-73EEA5A9.adsl.alicedsl.de)
[19:36:44] *** Joins: milinda (milinda@moz-C79ADF95.dhcp-bl.indiana.edu)
[19:37:09] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[19:37:11] <engla> erickt: it's pushed
[19:37:15] <erickt> thanks!
[19:39:02] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[19:39:09] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[19:39:14] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[19:40:17] *** Quits: jdm (jdm@9FB21CB6.76DE1AD5.AE2B2F80.IP) (Quit: Lost terminal)
[19:42:00] *** Joins: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP)
[19:42:14] *** Parts: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP) (ERC Version 5.3 (IRC client for Emacs))
[19:44:08] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Connection reset by peer)
[19:44:39] *** Joins: jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[19:45:02] *** Joins: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP)
[19:46:21] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[19:50:18] *** Joins: doomlord__ (servitor@moz-13E69BC8.range86-180.btcentralplus.com)
[19:50:25] *** Quits: doomlord__ (servitor@moz-13E69BC8.range86-180.btcentralplus.com) (Connection reset by peer)
[19:52:14] *** Quits: doomlord_ (servitor@moz-13E69BC8.range86-180.btcentralplus.com) (Ping timeout)
[19:54:49] <acrichto> in the 3 days there were 32 new pull requests and only one has been merged :(
[19:54:54] <acrichto> the past 3 days*
[19:55:03] *** Joins: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP)
[19:55:08] <SimonSapin> inspect sounds good
[19:55:23] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[19:55:28] <SimonSapin> or just remove it, and document the always true filter trick
[19:55:37] *** Joins: saneyuki_s (Mibbit@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[19:58:20] *** Parts: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP) (ERC Version 5.3 (IRC client for Emacs))
[19:59:18] *** Joins: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP)
[19:59:56] *** Joins: maik_ (maik___@moz-C834AD21.dip0.t-ipconnect.de)
[20:04:13] *** Joins: alisdair (textual@moz-FBF4138A.vc.shawcable.net)
[20:06:59] <engla> acrichto: more than that has been merged
[20:07:04] <engla> http://huonw.github.io/isrustfastyet/buildbot/
[20:07:11] <acrichto> engla: yeah I think github is lying
[20:07:24] <engla> yup it misses most of the merged PRs
[20:07:55] <erickt> nmatsakis: ping
[20:09:26] *** Joins: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com)
[20:09:40] *** Joins: strcat (strcat@moz-61B073BC.cpe.net.cable.rogers.com)
[20:10:33] <heftig> engla: given the amount of noise in those charts, I think larger timescales would be more interesting
[20:11:40] <engla> yes and no. There are systemic shifts often 
[20:12:27] *** Quits: Ms2ger (Ms2ger@moz-E9883900.access.telenet.be) (Quit: nn)
[20:13:32] <maik_> haha that spike
[20:15:45] *** Quits: strcat (strcat@moz-61B073BC.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[20:15:48] *** Quits: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com) (Client exited)
[20:17:08] <erickt> cmr: you hit another exception with your build
[20:17:22] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[20:17:22] <ghrust> 01[13rust01] 15bors pushed 15 new commits to 06auto: 02http://git.io/2ZTYew
[20:17:22] <ghrust> 13rust/06auto 14fad7857 15Erick Tryzelaar: Mass rename of .consume{,_iter}() to .move_iter()...
[20:17:22] <ghrust> 13rust/06auto 14229eeda 15Erick Tryzelaar: Clean up some unused imports in tests
[20:17:23] <ghrust> 13rust/06auto 14a661462 15Erick Tryzelaar: std: merge iterator::DoubleEndedIterator and DoubleEndedIteratorUtil
[20:17:25] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[20:21:26] *** Quits: cdidd (cdidd@moz-907AC78C.broadband.corbina.ru) (Input/output error)
[20:28:34] *** Quits: upstream (TheDust@moz-8C2076C2.upc-d.chello.nl) (Ping timeout)
[20:29:01] <jeaye> error: cannot borrow `(*self).input` as immutable because it is also borrowed as mutable
[20:29:04] <jeaye> self.run_function(self.input.clone());
[20:29:22] <jeaye> I can't access self.input as immutable? 
[20:29:42] <jeaye> (because run_function is mutable)
[20:31:11] <engla> it's a bug
[20:31:50] <jeaye> Ahh, that makes a bit more sense now.
[20:32:00] <engla> I hope it has an issue
[20:32:23] <engla> I think it's this https://github.com/mozilla/rust/issues/6268
[20:32:53] <steven_is_false> I'm considering moving over to glfw-rs over rust-sdl because it's better maintained. I'm not sure though. The callback structure seems wrong to me. For example, what happens when Rust code fails inside of a GLFW callback?
[20:34:05] <jeaye> bjz: ^
[20:38:01] <bjz> steven_is_false: I've got an idea how to remodel it actually
[20:38:09] <steven_is_false> bjz: Using message passing?
[20:38:25] <steven_is_false> bjz: I just commented on that issue a bit ago.
[20:38:31] <bjz> steven_is_false: from the work I'm doing using messages with libxml
[20:39:24] <bjz> steven_is_false: you store the channel in the window's user pointer
[20:40:09] <steven_is_false> Right, like in my project linked to from this comment https://github.com/bjz/glfw-rs/issues/23#issuecomment-22446652
[20:40:39] <tiffany> I thought it would be easy to implement FRP in rust but I have run into a bit of a problem
[20:41:01] <bjz> steven_is_false: and you're perfectly right, the curent structure is aweful
[20:41:31] <steven_is_false> tiffany: Some code I wrote that is stream based and sort of FRP,ey is here: http://gitorious.org/p-x/p-x/blobs/master/src/core/engine/simulator.rs
[20:43:01] *** Joins: cdidd (cdidd@moz-D182CDB6.broadband.corbina.ru)
[20:43:01] *** Quits: tedh (tedh@moz-76BF83CB.z180-91-67.customer.algx.net) (Connection reset by peer)
[20:43:13] *** Joins: tedh (tedh@moz-76BF83CB.z180-91-67.customer.algx.net)
[20:43:13] <tiffany> the problem I'm having is that I need some way to store references to dependant signals so I can propogate updates, but I'm not sure how to do that, and I don't know if it's even possible using generics
[20:43:57] <tiffany> hm.. I may be able to use closures
[20:44:14] <steven_is_false> bjz: Would you accept a pull request if I made glfw-rs use a message passing style?
[20:44:50] *** Quits: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net) (Ping timeout)
[20:45:02] *** Joins: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net)
[20:46:01] *** Parts: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP) (ERC Version 5.3 (IRC client for Emacs))
[20:51:00] *** Joins: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[20:51:06] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[20:54:55] <erickt> r? https://github.com/mozilla/rust/pull/8444. It's my first omnibus rollup PR
[20:56:55] *** Quits: maik_ (maik___@moz-C834AD21.dip0.t-ipconnect.de) (Ping timeout)
[20:57:32] <vk_> When should one use 'do' instead of 'for'? Trying to figure out how to update this bit of code:
[20:57:33] <vk_>      do vs.borrow |vs| {
[20:57:35] <vk_>          vec::concat(do vs.map |v| {
[20:57:36] <vk_>              render_helper(&RenderContext {
[20:57:38] <vk_>                  stack: @(ctx.stack + ~[*v]),
[20:57:39] <vk_>                  .. *ctx
[20:57:41] <vk_>              })  
[20:57:43] <vk_>          })  
[20:57:44] <vk_>      }
[20:57:53] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[20:58:09] <engla> vk_: for is a loop, do just passes a closure (the function/method you call decides what that closure does)
[20:58:34] <engla> *decides how that closure is called and how many times
[20:58:47] *** Joins: upstream (TheDust@moz-8C2076C2.upc-d.chello.nl)
[20:59:15] <vk_> engla: hmm, so do looks correct there then?
[20:59:57] <engla> I think so
[21:00:29] <vk_> engla: alright cool. wouldn't happen to know what happened to the .borrow() method?
[21:00:30] <engla> map takes a closure as only argument (assuming ~[].map)
[21:00:42] <engla> nope, because I don't know what the borrow method is
[21:00:52] <engla> or what type you have
[21:00:54] *** Joins: doomlord_ (servitor@moz-13E69BC8.range86-180.btcentralplus.com)
[21:02:12] <vk_> .borrow is from rust release 0.5, from libcore/dvec.rs, signature " fn borrow<R>(op: fn(x: &[A]) -> R) -> R {"
[21:02:27] <engla> I don't think dvec exists
[21:03:02] <vk_> it doesn't, think it became ~[] if I remember correctly from previously asked questions
[21:03:53] <vk_> vs is of type @mut ~[Data]
[21:04:06] <engla> ah
[21:04:13] <engla> yeah looks like dvec became obsolete
[21:04:23] <engla> you don't need a method like borrow
[21:04:49] *** Joins: Voomer (Voomer@moz-CC05FF5E.hsd1.wa.comcast.net)
[21:05:38] <engla> my 3-second evaluation says, you can remove the do vs.borrow |vs|   and just use vs
[21:06:27] <Luqman> r? https://github.com/mozilla/rust/pull/8410 rebased
[21:06:45] <vk_> engla: sounds good. giving a type for the |vs| part of the do is possible?
[21:08:21] <engla> the type of the old |vs| param?
[21:08:27] <engla> it's a slice
[21:08:45] <engla> go look ,  git log -- libcore/dvec.rs  :-)
[21:09:00] <engla> digging in the layers of rust history
[21:12:33] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[21:13:42] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[21:14:18] *** Joins: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP)
[21:14:57] <steven_is_false> Hi I'm trying build glfw-rs, and I need to add the location $HOME/.local/lib where I installed the glfw shared library to the library search path.
[21:16:33] <cmr> steven_is_false: rustc -L
[21:16:41] <cmr> Or --link-args if you need more control
[21:16:51] <steven_is_false> cmr: That's a local solution to a global problem.
[21:17:14] <cmr> steven_is_false: LD_LIBRARY_PATH ?
[21:17:28] <steven_is_false> cmr: I'm trying that but it doesn't appear to work
[21:17:35] <cmr> rustc might now respect it
[21:17:40] <cmr> I don't know how it works with ld tbh
[21:19:07] <kimundi> lol
[21:19:24] <kimundi> I just googled 'add a syntax higlining file to kate'
[21:19:47] <Luqman> steven_is_false: rustc uses gcc/clang to link
[21:19:51] <kimundi> first result was the PR that added rusts syntax highlining file
[21:20:29] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: night)
[21:20:32] <cmr> hah
[21:21:00] <steven_is_false> I'm not sure what a good solution would be then.
[21:21:16] *** Joins: maik_ (maik___@moz-C834AD21.dip0.t-ipconnect.de)
[21:22:07] *** Joins: Earnestly (earnest@moz-55672F6A.range86-164.btcentralplus.com)
[21:22:12] <bjz_> steven_is_false: I'm open to PRs :)
[21:22:17] <steven_is_false> Oh, and -L ~/.local/lib doesn't work anyways because it causes a conflict with libstd
[21:22:20] <steven_is_false> bjz_: Thanks.
[21:24:17] <bjz_> steven_is_false: it would be good to have some dicscussion on the actual API first, but yeah - I'm abit ill atm, not really in the right headspace
[21:24:26] <steven_is_false> bjz_: Fair enough.
[21:25:06] <bjz_> but yeah, anything we can do to improve things awould be awesome - I very much hate glfw::private
[21:28:03] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[21:29:27] *** Quits: Palmik (palmik@moz-CC484FDD.tmcz.cz) (Quit: Lost terminal)
[21:31:09] *** Parts: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP) (ERC Version 5.3 (IRC client for Emacs))
[21:31:36] <tiffany> if I have a file called frp.rs, and a file called frp-test.rs in the same directory, how do I use frp.rs from frp-test.rs?
[21:31:39] <tiffany> use frp; gives an error
[21:31:49] <cmr> tiffany: Is it a separate crate?
[21:31:56] <tiffany> no?
[21:32:01] <cmr> Do you know what a crate is?
[21:32:25] <erickt> bjz_ / cmr: can either of you review https://github.com/mozilla/rust/pull/8444?
[21:32:29] <tiffany> an artifact of building, either an executable or library?
[21:32:54] <cmr> right
[21:33:09] <cmr> you need to compile them together into the same crate to be able to use `use`
[21:33:16] <cmr> `use` just brings a namespace into the current scope.
[21:33:30] <tiffany> how do you do that? rustc doesn't accept multiple inputs
[21:33:53] <cmr> `#[path="frp-test.rs"] mod frp_test` in frp.rs
[21:33:55] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Ping timeout)
[21:34:08] *** kimundi is now known as zz_kimundi
[21:35:04] <cmr> Rust programs are self-describing wrt compilation as much as possible.
[21:35:19] *** zz_kimundi is now known as kimundi
[21:35:21] <cmr> To prevent the situation ike in C where you need a thousand different arguments to cc to get it to work just right
[21:35:42] <upstream> how does one iterate over the characters in a string? I can't seem to find any working examples
[21:35:57] <tiffany> oh dear that was odd
[21:36:03] <cmr> upstream: let s = "abc123"; for c in s.iter() { printfln!(c) }
[21:36:16] <tiffany> I think I just got rust to infinitely compile a file
[21:36:31] <cmr> tiffany: if you have an infinitely-sized recursive type, it can do that
[21:36:33] <kimundi> cmr: no need for that path attribute...
[21:36:42] <cmr> kimundi: frp-test isn't an identifier
[21:36:44] <upstream> "expected { but found in"
[21:36:50] <tiffany> it just kept eating memory and I had to kill -9 it
[21:36:52] <cmr> upstream: 0.7?
[21:36:54] <upstream> I'm using 0.7
[21:36:56] <kimundi> cmr: ah, yeah...
[21:36:56] <upstream> yeah
[21:37:20] <cmr> for s.iter().advance |c| { println(fmt!("%?", c)); }
[21:37:45] <kimundi> upstream: standart answer: if possible, upgrade to trunk. else, do what cmr wrote
[21:38:05] <kimundi> tiffany: anyway, for compilinmg two files together
[21:38:37] <tiffany> how do I call a function that's inside of a struct? it prints an error saying my closure is not a method
[21:38:40] <kimundi> tiffany: first you have to decide wich of your files is going to be the 'root module' of your crate
[21:38:56] <tiffany> frp-test.rs is
[21:39:12] <upstream> great, it works :)
[21:39:23] <cmr> tiffany: (struct.foo)()
[21:39:27] <kimundi> then, starting from there, you include all other files by adding 'mod FILE;' declarations somewhere in the module tree starting with your root module
[21:39:32] <cmr> tiffany: .foo() is always method call
[21:40:41] <kimundi> 'use' never declares new code, it just renames it to something shorter for accessing it in the current module
[21:42:58] *** Quits: alisdair (textual@moz-FBF4138A.vc.shawcable.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[21:43:21] *** Quits: gits1225 (gits@FFB8DEC0.B0D5B53C.73686190.IP) (Quit: )
[21:43:27] <cmr> erickt: which is the head?
[21:43:39] <cmr> erickt: can you rebase and remove the merge commits?
[21:44:19] <panzi> iterators don't have a map method. is there a way to do something like this: println(range(0,upper).map(|i| fmt!("%3d", i+1)).connect(" "));
[21:44:51] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[21:45:04] <cmr> panzi: s/map/transform
[21:45:13] <cmr> it's called transform because of a bug in method resolve
[21:45:33] <engla> there's a change merging to rename transform to map, might be reality in an hor
[21:45:35] <engla> hour
[21:45:39] <cmr> engla: really!
[21:45:41] <erickt> cmr: It's a rollup PR
[21:46:03] <panzi> hmm, and connect?
[21:46:03] <erickt> cmr: you're almost out of date. My PR is currently building that renames .transform to .map
[21:46:33] <cmr> erickt: right, but what the practice for rollups seem to be is, in the PR description list the revisions you are rolling up and who r+'d them, and rebase, rather than merge
[21:47:15] <erickt> cmr: the HEAD commit is https://github.com/erickt/rust/commit/20953bb1fbfafc3839e739f38ddf7d495eb1fe8b
[21:47:33] <cmr> erickt: r+. r=me if you rebase
[21:47:57] <erickt> cmr: will do, thanks. I'll update the commit with who reviewed what
[21:49:42] <panzi> why is this method called connect and not join anyway? in all other languages I know where there is such a method it's called join
[21:50:04] <erickt> cmr: btw, I did the whole merge thing instead of rebase is so that github will automatically the close PRs
[21:50:41] <erickt> cmr: plus I had to fix some merge conflicts
[21:51:03] *** Quits: heftig (heftig@moz-4E9B137.dip0.t-ipconnect.de) (Ping timeout)
[21:51:32] <cmr> erickt: yeah. someone needs to write a script that does 98% of the boring stuff (mark who reviewed what, add "closes #xxxx" to the PR text, automatically merge)
[21:51:44] <cmr> we shouldn't have to do rollups though..
[21:52:29] *** Joins: heftig (heftig@moz-2701BAFF.dip0.t-ipconnect.de)
[21:54:24] <jeaye> I'm getting a hard fail `failed at 'borrowed'` calling a method on a @mut within a closure. There's no reason why the object should be alive (it's even kept in TLS). Could this be a bug, or am I doing something wrong?
[21:54:52] <jeaye> No reason why it shouldn't be a live ^
[21:55:17] <cmr> jeaye: that error is when you already have a loan
[21:56:04] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[21:56:18] <jeaye> Fails on line 10 https://gist.github.com/Jeaye/ff19f6e50340a7d34b46
[21:56:29] <jeaye> So it's because of the loan on line 1?
[21:56:36] <cmr> https://gist.github.com/Jeaye/ff19f6e50340a7d34b46#file-foo-rs-L7
[21:56:42] <cmr> Already have a borrow, right there, pretty sure
[21:56:56] <engla> jeaye: @mut has dynamic (runtime) borrow checking, so it's probably that
[21:56:57] <cmr> maybe not
[21:57:04] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[21:57:21] <tiffany> so many errors
[21:57:31] <cmr> jeaye: it's either line 7, line 1, or both ;p
[21:59:58] *** Quits: maik_ (maik___@moz-C834AD21.dip0.t-ipconnect.de) (Ping timeout)
[22:00:57] <panzi> is there something like C#'s extension methods in rust? or was that in Go. I think I read something like that somewhere. maybe I'm confusing something.
[22:01:06] *** Joins: hjr3 (hradtke@moz-842BF853.hsd1.ca.comcast.net)
[22:01:27] <cmr> panzi: According to the MSDN, "Extension methods enable you to "add" methods to existing types without creating a new derived type, recompiling, or otherwise modifying the original type."
[22:01:30] <cmr> In which case, yes.
[22:01:35] <cmr> Just implement a trait you define for that type.
[22:02:01] <panzi> cmr: I want to "add" the method to a trait
[22:02:11] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[22:02:18] <cmr> panzi: can't do that
[22:02:30] <panzi> I see
[22:02:33] <cmr> you could do impl<T: SomeTrait> MyTrait for T { ... } I think
[22:02:41] <cmr> ie, add a method to every type that implements that trait
[22:02:54] <panzi> ah, lets try this
[22:03:23] *** Quits: brendan (brendaneic@E908EF74.6BAC3F3B.56A6FAA.IP) (Quit: brendan)
[22:03:30] <cmr> traits are ABI, you can't really modify them practically, not sure what the theory behind it is, if anything
[22:05:38] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[22:06:47] *** Quits: Earnestly (earnest@moz-55672F6A.range86-164.btcentralplus.com) (Ping timeout)
[22:07:30] <panzi> I don't really want to modify them. I want to write a function "fn foo(&mut Foo, Bar, Baz) -> Bla" that you can call like "x.foo(bar,baz)". it would only by a syntactical difference to "foo(x,bar,baz)" and actually statically dispatched
[22:07:50] *** Joins: tikue (tkuehn@moz-CF8BEBEF.dia.static.qwest.net)
[22:07:59] <cmr> panzi: that is what traits *are*
[22:08:11] <cmr> method call on regular types is always static dispatch
[22:08:12] <doomlord_> in some situations  so called methods are just a nice calling syntax a.foo(b) instead of foo(a,b) ... easily chainable... and |> in F# can do a similar job :)
[22:08:12] <panzi> traits do dynamic dispatch
[22:08:15] <cmr> no they don't
[22:08:19] <cmr> trait objects do dynamic dispatch
[22:08:54] <panzi> thats what I mean. an object refered to by a trait, not a type, does dyn. dispatch
[22:09:05] <doomlord_> although i get the fact that in rust they are more strongly tied to polymorphism than in c++
[22:09:07] <cmr> So [~@&]Trait, yes.
[22:09:08] <kimundi> trait bounds: static dispatch. trait objects: dynamic dispatch
[22:09:19] <panzi> what I described would do static dispatch
[22:09:50] <cmr> fn foo<T: Bar, U: Baz)(&mut self, bar: T, baz: U) is static dispatch
[22:09:55] <cmr> just to be 100% clear
[22:10:02] <panzi> yeah, maybe I have to get the nomenclature straight
[22:11:15] <kimundi> panzi: What you described is identical to what happens in rust
[22:11:52] *** Joins: Earnestly (earnest@moz-55672F6A.range86-164.btcentralplus.com)
[22:12:17] <kimundi> you can implement a trait for a trait object, in wich case the method would be static dispatch, but use a dynamic dispatch for the object it uses.
[22:12:37] <panzi> mhm
[22:13:18] <kimundi> you could also write a extension/supertrait for the trait you want to extend, and make a trait object from that. then it would be full dynamic dispatch
[22:14:19] *** Quits: milinda (milinda@moz-C79ADF95.dhcp-bl.indiana.edu) (Input/output error)
[22:14:51] <panzi> ok, great :)
[22:15:00] <tiffany> okay I'm at a loss at how to implement this
[22:15:25] <kimundi> rusti: trait Foo { fn foo(&self); } impl Foo for ~ToStr { fn foo(&self) { print(self.to_str()); } } let x = ~5u8; let y = x as ~ToStr; y.foo();
[22:15:30] <tiffany> I think I can implement it using @
[22:15:39] <kimundi> tiffany: what?
[22:15:48] <tiffany> I'm trying to implement FRP in rust, kimundi
[22:16:02] <kimundi> FRP?
[22:16:10] <tiffany> functional reactive programming
[22:16:19] <kimundi> ah. carry on then ;)
[22:16:29] <kimundi> rusti: "fff"
[22:16:44] <tiffany> the problem is that I have to propagate signals, which requires a closure over the signal, but I also need to return the signal..
[22:16:47] <kimundi> ... it's not on. stupid me
[22:17:01] <tiffany> maybe if I used borrowed pointers and lifetimes?
[22:17:12] <kimundi> tiffany: sounds like a ownership cicle, wich sounds like @
[22:17:34] *** Quits: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP) (Ping timeout)
[22:18:12] <panzi> is there something like a weakref for rust or is there something like that planned (e.g. for Rc)?
[22:18:34] <cmr> panzi: how would a weakref work?
[22:18:55] <engla> it could be implemented alongside Rc
[22:19:04] *** Quits: sebcrozet (sebcrozet@moz-A855F6C0.w82-127.abo.wanadoo.fr) (Quit: Gone)
[22:19:25] <cmr> I don't see how a weakref could be implemented at all :\
[22:19:27] <panzi> cmr: it would have a get() -> Option<T> method
[22:19:36] <cmr> doesn't it depend on the contents of a pointer?
[22:19:46] *** Joins: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP)
[22:19:47] <cmr> ie, struct WeakRef<T> { ptr: *T }
[22:19:51] <cmr> or maybe **T
[22:19:55] <tiffany> http://paste.strictfp.com/38836 gives me "cannot move out of captured outer variable", how do I fix that?
[22:19:56] <cmr> hm, I could see it with **T
[22:19:56] <engla> I don't think so. Just like Rc, with some extra logic
[22:20:22] <cmr> engla: but trying to accessing it after it's freed?
[22:20:39] <tiffany> I implemented weak references in C
[22:20:54] <tiffany> I maintained a list of weak references in my tracked structure and zeroed them when the object was destroyed
[22:21:32] <panzi> I tried to implement a weakref here: https://gist.github.com/panzi/6151307 note that this crashes the compiler, and even if it wouldnt it would probably crash a program using it
[22:21:51] <kimundi> panzi: afaik, having weak pointes would mean the strong pointers get more overhead because of two reference counts
[22:21:58] <engla> cmr: I imagine the weak-able box, keeps track of all outstanding weak pointers and nulls them when dealloced
[22:22:11] <panzi> the main problem: Icouldnt get the destructor to work (compiler crash) and the lifetime of the borrow is bogus
[22:22:18] <cmr> engla: ok, I was trying to picture something that doesn't have that much overhead
[22:22:26] <kimundi> but, if it works there could just be Rc, StrongRc and WeakRc
[22:22:29] <panzi> kimundi: yes
[22:23:28] <engla> kimundi: hmm that sounds good
[22:23:38] <panzi> one could implement something with less overhead if one would use a more sophisticated gc
[22:23:59] <panzi> but thats something else entirely
[22:24:35] *** Joins: dherman (dherman@moz-FEEC7E9.hsd1.ut.comcast.net)
[22:24:36] *** ChanServ sets mode: +o dherman
[22:25:53] <panzi> also why would one want weakrefs? e.g. for the parent ptr in a tree structure. one can do that using unsafe pointers, which is a bit ugly
[22:26:32] <kimundi> well, weakrefs are a way to get circles
[22:27:08] <kimundi> (assuming you mean weakpointer with that)
[22:27:16] <panzi> yes
[22:28:09] <panzi> reference, pointer, what's the difference anyway? (I know what the difference is in C++, but is there any other language that makes one?)
[22:29:44] <panzi> is it possible to avoid the marked line here? https://gist.github.com/panzi/6202416
[22:29:57] *** Quits: dew (Instantbir@moz-8A63B53.dhcp.stls.mo.charter.com) (Connection reset by peer)
[22:29:59] *** Joins: dew (Instantbir@moz-8A63B53.dhcp.stls.mo.charter.com)
[22:30:21] <cmr> panzi: in Rust, references are more than pointers
[22:30:45] <cmr> references always point to a valid object and have specific aliasing and mutability guarantees
[22:31:10] <kimundi> well, that's the semantic
[22:31:11] <cmr> Also lifetimes
[22:31:21] *** Quits: Earnestly (earnest@moz-55672F6A.range86-164.btcentralplus.com) (Ping timeout)
[22:31:22] <cmr> the only difference is in semantics :p
[22:31:32] <kimundi> implementation wise on the other hand they have no difference at runtime
[22:31:34] <engla> panzi: I think you can write   for value in *self { }
[22:32:08] <panzi> engla: indeed. thanks
[22:34:09] *** Quits: tikue (tkuehn@moz-CF8BEBEF.dia.static.qwest.net) (Quit: tikue)
[22:36:43] *** Joins: jensnockert (jensnocker@moz-61E1062F.tbcn.telia.com)
[22:37:57] *** Joins: Earnestly (earnest@moz-55672F6A.range86-164.btcentralplus.com)
[22:38:11] *** Joins: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com)
[22:38:29] <doomlord_> what does ast fold do ?
[22:38:55] <cmr> doomlord_: in libsyntax? I think it's for transforming an ast subtree
[22:39:08] <cmr> I have a fold in rustdoc... the name was suggested by dbaupp though
[22:39:28] <cmr> it was originally a kind of visitor that passed &mut to a callback
[22:41:46] <doomlord_> ok i sort of see.. ast_fold trait object
[22:42:03] *** Quits: saneyuki_s (Mibbit@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Quit: http://www.mibbit.com ajax IRC Client)
[22:48:17] *** Quits: dim-an (ermolovd@moz-FE167E47.nationalcablenetworks.ru) (Ping timeout)
[22:50:36] <doomlord_> trying to modify the compiler for the first time.. let me see if i have the patience...
[22:51:10] *** Joins: eatkinson (eatkinson@5AA7EAAB.1CF4A467.6C91C3A5.IP)
[22:58:12] *** Quits: hjr3 (hradtke@moz-842BF853.hsd1.ca.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[22:59:38] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[23:00:52] *** Quits: upstream (TheDust@moz-8C2076C2.upc-d.chello.nl) (Ping timeout)
[23:01:59] *** Quits: dew (Instantbir@moz-8A63B53.dhcp.stls.mo.charter.com) (Ping timeout)
[23:02:46] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[23:02:56] <panzi> yeah, cache locality does help. cut down the runtime of an program from ~3m 50s to ~2m 30s
[23:03:05] <cmr> nice!
[23:03:18] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[23:03:26] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[23:06:06] <doomlord_> changed librustc source did make in the sourcetree root, i notice its going throughh the stages.. the self hosting stuff? ... when you iterate compiler changes do you bypass all that?
[23:08:10] *** Joins: Heo__ (Heo@13864F63.2DD6919B.56C9C5CA.IP)
[23:09:20] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[23:09:22] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Quit: WeeChat 0.4.1)
[23:12:48] *** Quits: jensnockert (jensnocker@moz-61E1062F.tbcn.telia.com) (Input/output error)
[23:13:15] *** Joins: jensnockert (jensnocker@moz-61E1062F.tbcn.telia.com)
[23:13:19] *** Quits: dherman (dherman@moz-FEEC7E9.hsd1.ut.comcast.net) (Quit: dherman)
[23:14:57] *** Quits: jensnockert (jensnocker@moz-61E1062F.tbcn.telia.com) (Ping timeout)
[23:17:25] *** Joins: Turk30male (TurkBoy_ga@24991655.67D38642.6894ADF4.IP)
[23:22:37] *** Quits: Turk30male (TurkBoy_ga@24991655.67D38642.6894ADF4.IP) (Quit: )
[23:22:46] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[23:27:35] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[23:29:23] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[23:29:23] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/2ZTYew
[23:29:23] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[23:29:47] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[23:30:07] *** Joins: samx (sami@moz-48EC0983.dyn.optonline.net)
[23:30:16] <engla> \o/
[23:32:20] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[23:32:20] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/Utc2mA
[23:32:20] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[23:32:21] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[23:32:21] <ghrust> 01[13rust01] 15bors pushed 18 new commits to 06auto: 02http://git.io/o4BhmQ
[23:32:21] <ghrust> 13rust/06auto 142c9922a 15Michael Woerister: Enable privacy check for enum methods.
[23:32:21] <ghrust> 13rust/06auto 14828bfb2 15Stepan Koltsov: Fix incorrect non-exhaustive matching for fixed length vecs...
[23:32:21] <ghrust> 13rust/06auto 143596f66 15Paul Collins: rust-mode: make indentation customizable...
[23:32:23] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[23:33:17] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[23:34:17] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Quit: Konversation terminated!)
[23:34:21] *** Quits: peterdn (chatzilla@moz-97742234.new.ox.ac.uk) (Ping timeout)
[23:34:29] <kimundi> doomlord_: what did you mean to ask about the self hosting stuff?
[23:35:02] *** Joins: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP)
[23:35:12] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Quit: Konversation terminated!)
[23:35:39] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Ping timeout)
[23:38:39] <doomlord_> just trying to experiment with the compiler source, i think i did justrebuild it with a change, 
[23:39:02] <doomlord_> ... but my question is , when you work on the compiler how do you go about testing it..
[23:39:38] <doomlord_> does running 'make' in the source tree root go through several stages to rebuild itself 
[23:39:47] <kimundi> doomlord_: yes
[23:39:51] *** Joins: graydon (graydon@moz-F14EE0DB.cable.teksavvy.com)
[23:39:51] *** ChanServ sets mode: +qo graydon graydon
[23:40:01] *** Quits: graydon (graydon@moz-F14EE0DB.cable.teksavvy.com) (Quit: Leaving.)
[23:40:49] <doomlord_> ok so the question is - do you usually do that every time, or just rebuild one stage and test what you did with that 
[23:41:18] <kimundi> doomlord_: usually just making and testing stage1 is enough
[23:41:55] <kimundi> wich means one rebuild of the librabries with stage 0, and one build of the libraries and a new rustc with stage1
[23:42:04] <kimundi> 'make check-stage1'
[23:42:25] <kimundi> will build up to stage1 and run the testsuite
[23:42:37] <doomlord_> ok thanks
[23:44:15] <kimundi> should still do a final 'make check' befor making a PR of course
[23:44:35] <doomlord_> sure 
[23:48:03] <doomlord_> i thought i'd see how much would be involved in implementing default arguments.. , struct Arg { ... default: DefaultArg }    type DefaultArg='Option<@expr>' ..
[23:53:09] *** Joins: strcat (strcat@moz-61B073BC.cpe.net.cable.rogers.com)
[23:57:41] *** Quits: eatkinson (eatkinson@5AA7EAAB.1CF4A467.6C91C3A5.IP) (Quit: eatkinson)
[23:57:56] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[23:58:15] *** Joins: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP)
[23:58:53] <kimundi> does someone mind if I uniformly rename the consume() and consume_iter() methods to move_iter() ?
[23:59:05] <cmr> I don't
[23:59:08] <kimundi> (same with the rev eqiv)
[23:59:25] <engla> kimundi: isn't that already done?
[23:59:26] *** Joins: lmandel-pto (lmandel@moz-57D3C086.dsl.bell.ca)
[23:59:42] <engla> fad7857  Mass rename of .consume{,_iter}() to .move_iter()
