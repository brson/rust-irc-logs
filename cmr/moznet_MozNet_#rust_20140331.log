[00:00:02] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[00:01:09] <dpc> Does rust have any macros like __FUNCTION__, __LINE__ etc. in C?
[00:02:43] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[00:02:43] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[00:03:03] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[00:03:48] <kimundi> dpc: It has line!(), col!() and file!()
[00:04:02] <kimundi> maybe more
[00:04:24] <dpc> I'm really hoping for __FUNCTION__
[00:04:35] <dpc> I'd like to use log!( ) without typing too much.
[00:04:53] <dpc> I mean "debug!( ... )" I just want to print that something is called.
[00:05:05] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[00:05:05] *** ChanServ sets mode: +o jdm
[00:06:19] <tiffany> rusti: file!()
[00:06:35] <dpc> rusti: function!()
[00:06:54] <dpc> No rusti
[00:07:48] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[00:07:58] <dpc> https://github.com/mozilla/rust/issues/9586
[00:08:08] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[00:10:28] <cmr> there's no function!()
[00:10:47] <cmr> there was a PR for it but it was implemented very poorly.
[00:11:13] *** Joins: fyolnish (fyolnish@moz-86F7D5A2.uqwimax.jp)
[00:12:55] *** Quits: fyolnish (fyolnish@moz-86F7D5A2.uqwimax.jp) (Ping timeout)
[00:13:09] *** Quits: derek_c (derek@moz-A9790B2A.hsd1.fl.comcast.net) (Ping timeout)
[00:13:54] *** Joins: ap4y (ap4y@92E20F51.A4EE7592.FD81FCD2.IP)
[00:13:54] *** kimundi is now known as zz_kimundi
[00:16:49] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Quit: Computer has gone to sleep.)
[00:17:12] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[00:17:38] *** Quits: cgaebel (clark@moz-F9D89110.nyc.res.rr.com) (Ping timeout)
[00:18:52] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[00:19:01] *** Quits: astroch (astroch@moz-46285397.dhcp.embarqhsd.net) (Ping timeout)
[00:19:14] *** Joins: astroch (astroch@moz-46285397.dhcp.embarqhsd.net)
[00:20:47] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[00:21:54] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[00:22:29] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[00:22:47] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[00:23:04] *** Quits: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca) (Ping timeout)
[00:23:41] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[00:26:22] *** Quits: Saj (Saj@moz-840D0658.netvisao.pt) (Quit: Leaving)
[00:26:52] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[00:28:18] *** Joins: jvoorhis (jvoorhis@moz-384E18AD.ptld.qwest.net)
[00:30:00] *** Quits: jvoorhis (jvoorhis@moz-384E18AD.ptld.qwest.net) (Ping timeout)
[00:30:02] *** Quits: twi (Adium@moz-429185BE.cust.vodafonedsl.it) (Quit: Leaving.)
[00:31:17] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[00:32:34] <sfackler> it does not seem like function! would be hard at all
[00:32:45] <sfackler> the infrastructure would be almost identical to module!()
[00:34:05] *** Joins: manishearth (manisheart@moz-F9058B8A.net)
[00:34:25] *** Quits: philix (felipe@moz-AAB39811.user.veloxzone.com.br) (Ping timeout)
[00:36:51] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[00:36:59] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[00:37:55] *** manishearth is now known as Manishearth
[00:38:14] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[00:38:40] *** Quits: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net) (Ping timeout)
[00:39:04] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[00:39:56] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[00:40:00] *** Joins: dougxxx (dougxxx@moz-2801788.perm.iinet.net.au)
[00:42:41] *** Quits: q66 (q66@moz-46D931B3.range86-152.btcentralplus.com) (Quit: Leaving)
[00:43:33] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[00:47:46] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[00:48:05] *** Quits: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca) (Quit: Leaving.)
[00:48:49] <rchar> is it possible to iterate over a temporarily constructed vector of elements, without having to explicitly bind the vector beforehand? Like
[00:48:49] <rchar> `for word in ["abc", "123", "do re mi"].iter() {println(*word);}`
[00:49:01] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[00:50:17] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[00:50:26] <aatch> rchar, in theory it should/could be possible, but we have bugs around rvalue lifetimes that make the reality a bit more confusing.
[00:51:56] <rchar> stupid reality
[00:53:52] <aatch> rchar, well the issue is complex, there's a fine balance to strike when it comes to borrowing. One side forces you to add extra scopes to mark lifetimes the other requires lots of temp variables.
[00:54:27] <aatch> And a "Do what I want"-style implementation is very hard to get right.
[00:56:30] *** Quits: detrino (chris@moz-EAECB432.lv.lv.cox.net) (Client exited)
[00:57:23] *** Quits: lkuper (lkuper@moz-7BF67E71.tmodns.net) (Quit: lkuper)
[00:59:50] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[01:00:13] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[01:01:39] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[01:03:19] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[01:04:09] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Quit: WeeChat 0.4.3)
[01:04:21] *** Quits: drbawb (drbawb@moz-444F91EA.wi.res.rr.com) (Quit: WeeChat 0.4.3)
[01:04:42] <dougxxx> what's wrong with for x in ["a", "b", "c"].iter() ?
[01:04:52] <dougxxx> That would work wouldn't it?
[01:06:17] <SiegeLord> I thought that was fixed awhile ago...
[01:06:26] <dougxxx> (it does; &"!",&"2", &"3")
[01:06:30] <dougxxx> *1
[01:06:31] <SiegeLord> rchar's example compiles for me
[01:08:53] *** Joins: philix (felipe@moz-AAB39811.user.veloxzone.com.br)
[01:10:50] *** Joins: yong (yong@BEEBD356.97476029.757A6F4C.IP)
[01:11:28] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[01:12:54] *** Joins: mno2 (mno2@E1E0A0A3.621D86F0.CFF65E33.IP)
[01:13:13] <kmc> did anybody start writing Rust bindings for Z3?
[01:13:14] * kmc has
[01:13:29] <aatch> kmc, z3?
[01:13:45] <Tari> theorem proving toolkit
[01:14:02] *** Quits: nkoep (nik@moz-4D8B1323.pool.mediaways.net) (Client exited)
[01:16:16] <kmc> it solves equations involving boolean logic, integers and real numbers, bitvectors, etc.
[01:16:27] <kmc> extremely powerful
[01:16:51] <herrwolfe45> i'm using Rust with GDB for the first time and I'm having trouble getting the debug symbols loaded - rustc has been compiled with debug info. Should I be trying to load all of the debug symbols using set solib-search-path? Here is a screenshot of how i'm trying to handle it: https://gist.github.com/derwolfe/9883237
[01:16:54] <kmc> i haven't used it before, but I wrote Haskell bindings for Yices (a similar solver) a while back http://mainisusuallyafunction.blogspot.com/2010/09/yices-easy-simple-sat-smt-solving-for.html
[01:18:09] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[01:19:36] *** Joins: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net)
[01:20:06] *** Joins: m_kato (m_kato@moz-C286AD9A.bitcat.net)
[01:21:37] <JustAPerson> How long are the online docs supposed to lag behind? Shouldn't set of docs labeled "master" actually reflect the master branch on the repo?
[01:21:49] <jdm> herrwolfe45: good question. you might be able to hack around it by unarchiving the rlib files
[01:22:01] <jdm> I think those contain the .o files that gdb expects to find
[01:22:32] <cmr> JustAPerson: http://buildbot.rust-lang.org/console?refresh=15
[01:22:37] <cmr> the doc builder is gone
[01:22:43] *** Quits: tyna (liadon@moz-BB1BAD9A.dynamic.chello.pl) (Quit: Leaving.)
[01:22:50] <cmr> brson: the doc builder is gone. where did it go :((((
[01:22:56] <herrwolfe45> ok, i'll give that a try, thanks jdm
[01:23:01] <aatch> jdm, .rlib files contain LLVM bitcode if I recal correctly.
[01:23:06] <aatch> recall*
[01:23:15] <JustAPerson> cmr: so is that not intentional? I found a case that is at least 10 days old
[01:23:22] <cmr> JustAPerson: yeah.
[01:23:29] <cmr> JustAPerson: in theory it's always up to date.
[01:23:30] <aatch> cmr, I'm not certain, but I think brson rolled it into the nightly builders that may-or-may not be working.
[01:23:34] <jdm> aatch: hmm, maybe I'm thinking of an so file instead of o?
[01:23:46] <jdm> I know that I pulled files out of an rlib and ran nm on it
[01:23:59] <jdm> there definitely was a bc file, though
[01:24:10] <aatch> jdm, that's possible too.
[01:24:11] <o11c> I think rlib has multiple things
[01:24:40] <o11c> but I can't use rlibs, so I don't have any around
[01:24:43] <jdm> yes, but we're debating the specific things that comprise those :)
[01:24:59] *** Joins: nical (nico@moz-99690620.hinet-ip.hinet.net)
[01:25:08] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[01:25:22] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[01:25:52] <aatch> cmr, http://buildbot.rust-lang.org/builders/nightly-linux/builds/5
[01:25:56] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[01:26:10] <aatch> looks like that does the update.
[01:26:24] <aatch> JustAPerson, that case you found, is it still like that?
[01:27:29] *** Quits: nical (nico@moz-99690620.hinet-ip.hinet.net) (Client exited)
[01:29:06] *** Joins: jvoorhis (jvoorhis@moz-384E18AD.ptld.qwest.net)
[01:29:13] <JustAPerson> aatch: yes. http://static.rust-lang.org/doc/master/serialize/trait.Encodable.html was changed by https://github.com/mozilla/rust/blame/master/src/libserialize/serialize.rs#L167
[01:29:58] <cmr> aatch: it's uploading to rust-lang.org/doc/nightly not doc/master
[01:30:08] <aatch> cmr, bah.
[01:30:20] <aatch> brson, you broke stuff
[01:30:32] <cmr> which doesn't appear to have the proper permissions?
[01:30:33] *** Quits: rootnode (rootnode@moz-E8150453.pools.arcor-ip.net) (Ping timeout)
[01:30:47] *** Quits: jvoorhis (jvoorhis@moz-384E18AD.ptld.qwest.net) (Ping timeout)
[01:30:58] <JustAPerson> indeed, can't access that page on the nightly directory
[01:31:09] <aatch> JustAPerson, nice catch, thanks
[01:31:23] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[01:31:33] *** Quits: LU324 (asdf@moz-864C7465.dyn.embarqhsd.net) (Ping timeout)
[01:31:41] *** Quits: abustany (abustany@moz-C0C970CD.org) (Ping timeout)
[01:32:03] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[01:32:17] *** Quits: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net) (Ping timeout)
[01:34:12] <JustAPerson> aatch: no problem, happy to help :)
[01:35:46] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[01:38:14] *** Joins: abustany (abustany@moz-C0C970CD.org)
[01:38:44] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[01:39:14] *** Joins: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp)
[01:39:18] *** Quits: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp) (Client exited)
[01:39:19] *** Joins: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp)
[01:40:24] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[01:40:29] *** Joins: lpy (lpy@186A8F3A.F09091A8.1348A864.IP)
[01:40:35] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[01:41:12] *** Quits: leowoe (Leo@moz-9AE774CE.dip0.t-ipconnect.de) (Quit: Leaving.)
[01:41:14] *** Quits: willingc (willingc@moz-F095E013.san.res.rr.com) (Client exited)
[01:42:06] <brson> aatch: i see the problem, thanks
[01:42:47] <brson> should i stick with 'master' for the docs or just let them upload as 'nightly'?
[01:42:52] <brson> the website is going to say 'nightly'
[01:43:01] <frozendevil> when casting int types is the logic jus truncate LSBs?
[01:43:13] <frozendevil> s/jus/just/
[01:43:40] <sfackler> frozendevil: MSBs, but yes
[01:43:40] *** Quits: andrezs (andrezs@moz-D75B94E4.carolina.res.rr.com) (Ping timeout)
[01:43:46] <brson> actually i'm not sure i see the problem
[01:44:09] <aatch> brson, "master" docs are out of date because no master doc build has been done.
[01:44:30] <aatch> brson, the nightly docs aren't linked to, and even if they were aren't accessible.
[01:45:58] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[01:46:15] <brson> aatch: i understand that, don't understand why yet
[01:46:35] <aatch> brson, oh, well I can't answer that one :P
[01:46:44] <brson> maybe i should just use the nightly directory and get rid of master
[01:46:49] <brson> would break links
[01:46:57] <cmr> redirect?
[01:47:02] <Rusky> how can I specify that a crust function is unsafe?
[01:47:21] <cmr> Rusky: "crust function" isn't a term we use anymore.
[01:47:24] <cmr> but they are all unsafe.
[01:47:31] *** Joins: rusty_banger (dev@moz-DCEC0170.hsd1.co.comcast.net)
[01:47:34] <aatch> Rusky, crust? That's ooooollllllddddd.
[01:47:37] <Rusky> I'm calling an unsafe function within an extern "C" function
[01:47:45] <Rusky> sorry used an old term for the new concept
[01:47:51] <Rusky> and the compiler is erroring
[01:47:59] <Rusky> so I wanted to make it both extern "C" and unsafe
[01:48:07] *** Quits: luisbg (luisbg@moz-C54443AD.baconseed.org) (Ping timeout)
[01:48:47] <aatch> To the compilermobile!
[01:49:16] <aatch> Rusky, try `extern "C" unsafe fn`
[01:49:39] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[01:49:49] <Rusky> expected { or fn but found unsafe
[01:49:52] <cmr> oh, that.
[01:50:06] <Rusky> neither order of extern "C" and unsafe works
[01:50:13] <brson> cmr: i don't think i can make an s3 redirect
[01:50:29] <cmr> brson: http://docs.aws.amazon.com/AmazonS3/latest/dev/how-to-page-redirect.html ?
[01:51:26] <brson> cmr: i think that is for individual objects, and I don't see any reasonable way i can redirect every nightly doc object
[01:51:40] <brson> would like to make essentially a directory symlink
[01:52:18] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[01:52:40] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[01:52:58] <cmr> ah
[01:53:00] <cmr> yeah
[01:53:51] <aatch> brson, you could use a custom 404 handler with a meta-redirect header: http://docs.aws.amazon.com/AmazonS3/latest/dev/CustomErrorDocSupport.html
[01:55:18] *** Quits: j3rky (gmpreussne@moz-97180B8B.nc.res.rr.com) (Input/output error)
[01:55:55] *** Joins: j3rky (gmpreussne@moz-97180B8B.nc.res.rr.com)
[01:56:05] <aatch> Not the most elegant solution, but won't break links (probably).
[01:56:35] <aatch> Or at least, won't break links as badly.
[01:56:48] *** Joins: luisbg (luisbg@moz-C54443AD.baconseed.org)
[01:58:24] <brson> i'm going to stick with 'master' for now and defer this problem for later
[01:58:28] *** Joins: alisdair (textual@moz-7E6FA9C4.bchsia.telus.net)
[01:58:35] *** Quits: luisbg (luisbg@moz-C54443AD.baconseed.org) (Max SendQ exceeded)
[01:59:00] *** nrc|afk is now known as nrc
[01:59:07] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Quit: buildmaster reconfigured: bot disconnecting)
[01:59:08] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[01:59:38] *** Quits: jadbaires (jadrian@789756EE.68CD5565.6119BA41.IP) (Quit: Konversation terminated!)
[01:59:44] *** Joins: jadbaires (jadrian@moz-EA7AD167.dsl.telepac.pt)
[02:00:05] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:00:07] *** Quits: kaeso (kaeso@moz-F21FF626.unstable.it) (Ping timeout)
[02:00:36] *** Quits: jadbaires (jadrian@moz-EA7AD167.dsl.telepac.pt) (Quit: Konversation terminated!)
[02:01:08] *** Joins: luisbg (luisbg@moz-C54443AD.baconseed.org)
[02:01:50] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[02:02:24] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[02:03:29] *** Joins: lawrence (lawrence@moz-88A653EC.wireless.utoronto.ca)
[02:03:49] *** Quits: luisbg (luisbg@moz-C54443AD.baconseed.org) (Ping timeout)
[02:04:01] *** Quits: lpy (lpy@186A8F3A.F09091A8.1348A864.IP) (Client exited)
[02:04:03] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[02:04:42] *** Joins: kaeso (kaeso@moz-F21FF626.unstable.it)
[02:07:01] <dsrx> does rust have something akin to clojure's atom type
[02:07:03] <dsrx> ?
[02:07:30] *** Joins: p1start (rewi@moz-E7F3D014.org)
[02:08:21] <sfackler> dsrx: Arc<T> would probably be the closest
[02:08:28] <sfackler> Arc<Mutex<T>> for mutable state
[02:08:58] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[02:09:08] *** Joins: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca)
[02:09:38] *** Joins: drbawb (drbawb@moz-444F91EA.wi.res.rr.com)
[02:10:37] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[02:10:39] *** Joins: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca)
[02:10:59] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[02:12:00] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[02:12:40] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[02:13:10] *** Quits: kaeso (kaeso@moz-F21FF626.unstable.it) (Ping timeout)
[02:13:47] <JustAPerson> Hi, could someone close #11881? See my comment here: https://github.com/mozilla/rust/issues/11881#issuecomment-39048678
[02:14:11] *** Joins: kaeso (kaeso@moz-F21FF626.unstable.it)
[02:14:25] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[02:14:26] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[02:14:42] *** Quits: Manishearth (manisheart@moz-F9058B8A.net) (Ping timeout)
[02:15:32] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[02:16:31] *** Quits: andor (andor@moz-708868D.neferty.me) (Ping timeout)
[02:16:45] *** Joins: andor (andor@moz-708868D.neferty.me)
[02:16:46] *** Quits: cschneid (cschneid@moz-59349A8E.hlrn.qwest.net) (Client exited)
[02:17:56] *** Joins: luisbg (luisbg@moz-C54443AD.baconseed.org)
[02:18:25] *** Joins: Manishearth (manisheart@moz-F9058B8A.net)
[02:18:49] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[02:19:47] *** Quits: luisbg (luisbg@moz-C54443AD.baconseed.org) (Ping timeout)
[02:20:05] *** Quits: Manishearth (manisheart@moz-F9058B8A.net) (Ping timeout)
[02:20:35] *** Joins: jvoorhis (jvoorhis@moz-384E18AD.ptld.qwest.net)
[02:22:16] *** Quits: jvoorhis (jvoorhis@moz-384E18AD.ptld.qwest.net) (Ping timeout)
[02:22:41] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[02:22:59] *** Joins: lpy (lpy@186A8F3A.F09091A8.1348A864.IP)
[02:23:30] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[02:23:33] *** Joins: Manishearth (manisheart@moz-F9058B8A.net)
[02:23:59] *** Joins: nical (nico@moz-99690620.hinet-ip.hinet.net)
[02:24:00] *** Joins: chc4 (chc4@moz-29F9F3F1.hsd1.ma.comcast.net)
[02:24:06] <JustAPerson> sfackler: does e-needstest mean like writing a unit test?
[02:24:29] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[02:24:47] <cmr> yes.
[02:24:48] <sfackler> JustAPerson: yep, basically just copying the example code into "src/test/run-pass/issue-11881"
[02:24:52] <sfackler> er
[02:24:58] <sfackler> src/test/run-pass/issue-11881.rs
[02:25:12] <sfackler> to make sure that we don't regress and break it again
[02:25:36] <JustAPerson> okay, I'll doing that
[02:25:41] <JustAPerson> I'll try*
[02:26:16] *** Quits: Manishearth (manisheart@moz-F9058B8A.net) (Ping timeout)
[02:26:45] *** Quits: lawrence (lawrence@moz-88A653EC.wireless.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:27:18] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[02:27:42] *** Quits: EastByte_ (EastByte@moz-445B3961.ewe-ip-backbone.de) (Ping timeout)
[02:27:59] *** Joins: EastByte_ (EastByte@moz-C64DBA7F.ewe-ip-backbone.de)
[02:28:13] *** Quits: alisdair (textual@moz-7E6FA9C4.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:29:03] *** Joins: luisbg (luisbg@moz-C54443AD.baconseed.org)
[02:29:18] *** Quits: kaeso (kaeso@moz-F21FF626.unstable.it) (Ping timeout)
[02:29:37] *** Quits: lerc (quassel@moz-289EFA2.telstraclear.net) (Ping timeout)
[02:29:48] *** Joins: Manishearth (manisheart@moz-F9058B8A.net)
[02:30:18] *** Joins: willingc (willingc@moz-F095E013.san.res.rr.com)
[02:31:02] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:31:08] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:31:56] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[02:31:56] *** ChanServ sets mode: +ao dherman dherman
[02:33:12] *** Joins: cschneid (cschneid@moz-2EF64966.hlrn.qwest.net)
[02:33:51] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[02:34:01] *** Joins: kaeso (kaeso@moz-F21FF626.unstable.it)
[02:36:27] <JustAPerson> sfackler: actually, is it just copying the example code or should it be generalized? I had to adapt for recent changes in the libserialize API, so in the future what would happen if one of the used APIs changes and breaks the test?
[02:36:36] *** Quits: zz_kimundi (kimundi@moz-8B5A2112.dip0.t-ipconnect.de) (Ping timeout)
[02:36:53] *** Quits: kaeso (kaeso@moz-F21FF626.unstable.it) (Ping timeout)
[02:37:30] *** Quits: M2Ys4U (ehm@moz-46ED3256.in-addr.arpa) (Quit: Vote Pirate!)
[02:38:21] *** Quits: stephenmac7 (quassel@moz-C42B1C24.hsd1.fl.comcast.net) (Ping timeout)
[02:38:28] *** Quits: luisbg (luisbg@moz-C54443AD.baconseed.org) (Ping timeout)
[02:38:42] *** Joins: stephenmac7 (quassel@moz-C42B1C24.hsd1.fl.comcast.net)
[02:38:56] <sfackler> the test will have to be adjusted
[02:38:56] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[02:39:14] <sfackler> basically, we'd just want some test that used to generate that ICE and now no longer does
[02:39:16] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[02:39:29] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[02:39:58] *** Joins: zz_kimundi (kimundi@moz-EA3A956E.dip0.t-ipconnect.de)
[02:40:26] *** zz_kimundi is now known as kimundi
[02:41:11] *** Joins: kaeso (kaeso@moz-F21FF626.unstable.it)
[02:41:11] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[02:42:42] *** Joins: alisdair (textual@moz-7E6FA9C4.bchsia.telus.net)
[02:44:11] *** Joins: luisbg (luisbg@moz-C54443AD.baconseed.org)
[02:47:24] *** Quits: alisdair (textual@moz-7E6FA9C4.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:49:12] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[02:49:24] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[02:49:33] *** Joins: phay_ (phay@16E8BAAB.D2C4A785.91986DB5.IP)
[02:50:09] *** Quits: Doppp (Doppp@moz-CE720357.hfc.comcastbusiness.net) (Ping timeout)
[02:50:43] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[02:50:52] <herrwolfe45> jdm - not sure if you're around, but I've been able to untar the rlib and load rustc.o into gdb, however, i am unable to actually use (set breakpoints on) any of rustc.o debug symbols. I am getting the error `Cannot access memory at <location>`. Here is an example of how i'm trying to load things into GDB https://gist.github.com/derwolfe/8752809/edit
[02:51:45] <herrwolfe45> jdm ah that is the wrong gist, this is the correct one -> https://gist.github.com/derwolfe/9883237
[02:52:36] *** Quits: ganitsu1 (ganitsu@moz-3B57CC01.dialup.adsl.anteldata.net.uy) (Quit: WeeChat 0.4.3)
[02:52:50] *** Quits: darkf (darkf@moz-F9058B8A.net) (Ping timeout)
[02:54:54] *** Quits: luisbg (luisbg@moz-C54443AD.baconseed.org) (Ping timeout)
[02:55:09] *** Quits: soumyaC (uid15286@moz-E77DEB21.irccloud.com) (Quit: Connection closed for inactivity)
[02:56:25] *** Joins: vikstrous (v@moz-B87E3476.cpe.net.cable.rogers.com)
[02:56:33] *** Parts: vikstrous (v@moz-B87E3476.cpe.net.cable.rogers.com) ()
[02:59:04] *** Joins: alisdair (textual@moz-7E6FA9C4.bchsia.telus.net)
[03:00:20] *** Joins: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net)
[03:00:42] *** Quits: oxum (anonymous@67DB2C38.BBE46712.520CDC98.IP) (Quit: ...)
[03:01:15] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[03:01:31] *** Joins: luisbg (luisbg@moz-C54443AD.baconseed.org)
[03:03:30] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[03:05:03] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[03:05:55] *** Quits: Earnestly (earnest@moz-6CD1AB70.dyn.plus.net) (Ping timeout)
[03:06:57] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[03:08:29] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[03:09:05] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[03:09:11] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[03:10:54] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[03:14:01] *** Quits: chc4 (chc4@moz-29F9F3F1.hsd1.ma.comcast.net) (Quit: Goodbye!)
[03:14:34] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[03:15:00] *** Quits: lpy (lpy@186A8F3A.F09091A8.1348A864.IP) (Client exited)
[03:16:26] *** Joins: Doppp (Doppp@moz-6B405134.hsd1.ca.comcast.net)
[03:20:17] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[03:20:23] *** Quits: patpat (patpat@moz-21619C28.as13285.net) (Ping timeout)
[03:20:44] *** Quits: eatkinson-away (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Ping timeout)
[03:20:50] *** Joins: mib_xewcj3 (Mibbit@6D71664E.48960495.CC1A2609.IP)
[03:20:58] *** Joins: eatkinson-away (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[03:21:23] *** Joins: jvoorhis (jvoorhis@moz-384E18AD.ptld.qwest.net)
[03:22:21] *** nightpool is now known as nightpool|away
[03:22:21] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[03:23:04] *** Quits: jvoorhis (jvoorhis@moz-384E18AD.ptld.qwest.net) (Ping timeout)
[03:23:13] *** Quits: Blub\0 (wry@620605B3.71150E1A.237AE2BA.IP) (Ping timeout)
[03:23:22] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[03:23:26] *** Joins: Blub\0 (wry@620605B3.71150E1A.237AE2BA.IP)
[03:25:35] *** Joins: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net)
[03:26:12] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[03:31:08] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Ping timeout)
[03:31:40] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:31:53] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[03:32:41] *** Joins: lpy (lpy@E44EE2C4.F09091A8.1348A864.IP)
[03:33:25] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: It is tiem!)
[03:35:26] *** Joins: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net)
[03:35:29] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[03:35:38] *** Quits: mno2 (mno2@E1E0A0A3.621D86F0.CFF65E33.IP) (Quit: mno2)
[03:35:50] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[03:36:12] *** Quits: mindcat (mindcat@E528EFBC.7B4F697F.F21FCE99.IP) (Ping timeout)
[03:37:33] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[03:38:19] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[03:40:08] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[03:40:20] *** Quits: Valloric (Valloric@moz-288722BA.hsd1.ca.comcast.net) (Quit: Valloric)
[03:40:30] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[03:40:37] *** Joins: mindcat (mindcat@C5801A5E.F11C85BB.431667FD.IP)
[03:41:01] *** Quits: IanCormac84 (User@E34F9E67.2A8D8854.67DFF8B4.IP) (Ping timeout)
[03:41:15] *** Joins: IanCormac84 (User@F91D39B7.64D641E5.67DFF8B4.IP)
[03:41:22] *** Quits: mib_xewcj3 (Mibbit@6D71664E.48960495.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:41:34] *** Quits: alonlevy (alon@moz-B6210BD6.red.bezeqint.net) (Ping timeout)
[03:42:11] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[03:43:52] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:44:06] *** Quits: willingc (willingc@moz-F095E013.san.res.rr.com) (Client exited)
[03:45:02] *** Joins: nieksand (Mibbit@moz-90AF4E6E.tukw.qwest.net)
[03:45:07] *** Joins: oxum (anonymous@341236F3.F00CA6EC.520CDC98.IP)
[03:45:47] <nieksand> Perhaps a silly question... but why isn't the second argument also std::Vec<T> for : http://static.rust-lang.org/doc/master/std/vec/fn.append.html  ?
[03:46:14] <strcat> nieksand: because it copies from it
[03:46:39] <strcat> no reason for it to be another Vec<T>, &[T] is asking for strictly less from the caller (&[T] is a view of *any* memory, including from Vec<T>)
[03:46:43] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[03:46:57] <nieksand> ah.  That sounds plausible.  Thanks
[03:48:46] *** Quits: oxum (anonymous@341236F3.F00CA6EC.520CDC98.IP) (Quit: Bye..)
[03:49:03] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[03:49:13] *** Joins: oxum (anonymous@341236F3.F00CA6EC.520CDC98.IP)
[03:49:13] <strcat> rusti: struct Foo; impl Foo { fn bar(mut self) {} }
[03:49:24] -rusti- pastebinned 10 lines of output: http://ix.io/bmz
[03:49:24] <strcat> rusti: struct Foo; impl Foo { fn bar(mut self) {} } Foo
[03:49:26] -rusti- pastebinned 8 lines of output: http://ix.io/bmA
[03:49:29] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[03:49:40] <strcat> rusti: #[deriving(Show)] struct Foo; impl Foo { fn bar(mut self) {} } Foo
[03:49:49] -rusti- pastebinned 7 lines of output: http://ix.io/bmB
[03:50:14] <ChrisMorgan> strcat: I decided that I very definitely dislike rusti using Show—I preferred it on Poly.
[03:50:25] <strcat> I don't
[03:50:30] <strcat> that doesn't work for Vec<T>, etc.
[03:51:07] <strcat> ChrisMorgan: apparently we're even going to need deriving(Pod, Send) so it's hardly the most common case of boilerplate
[03:51:11] <ChrisMorgan> S'pose I haven't used it for Vec<T>. Well, how about Show, falling back to Poly if it detects an appropriate error?
[03:51:20] <strcat> can't do that
[03:51:30] <ChrisMorgan> Whyn't?
[03:51:40] <strcat> I don't see a way to do it
[03:51:57] <strcat> I want to remove std::repr/std::reflect anyway so we can have ABI compatibility without extern "C"
[03:52:08] <ChrisMorgan> You can read the rustc error message, can't you?
[03:52:27] <strcat> I can't tell if it's a rustc error message or something they printed to stderr ;p
[03:52:38] <strcat> well
[03:52:40] <strcat> I could do it in the script
[03:53:01] * strcat doesn't want to use repr at all though
[03:53:38] *** Quits: nszceta (nszceta@moz-E6CA8D6.hsd1.pa.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[03:54:05] *** Quits: drawoc (drawoc@moz-BAC1D3AB.res-cmts.sesh.ptd.net) (Quit: WeeChat 0.4.3)
[03:54:31] <strcat> ChrisMorgan: it's hard to know where a Show error is coming from too
[03:54:32] *** Quits: j3rky (gmpreussne@moz-97180B8B.nc.res.rr.com) (Quit: Leaving)
[03:54:34] *** Joins: hk (hk@B02395FB.62DE3100.CE715904.IP)
[03:54:57] <strcat> since the println comes after the injected content
[03:55:17] <strcat> so the line number isn't consistent - could be moved above in a generic function, but I'm not sure if the error message gives a useful line
[03:55:55] <strcat> rusti: vec!(1).len()
[03:55:56] -rusti- <anon>:11:16: 11:17 error: unexpected token: `.`
[03:55:56] -rusti- <anon>:11         vec!(1).len()
[03:55:56] -rusti-                          ^
[03:55:56] -rusti- playpen: application terminated with error code 101
[03:56:00] <strcat> rusti: (vec!(1)).len()
[03:56:01] -rusti- 1
[03:56:25] <ChrisMorgan> rusti: struct A; A
[03:56:28] -rusti- pastebinned 8 lines of output: http://ix.io/bmC
[03:56:35] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[03:56:46] <strcat> I have no way of knowing if that's my println or theirs
[03:56:59] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[03:57:00] <ChrisMorgan> strcat: if the error message contains "failed to find an implementation of trait std::fmt::Show for", then try Poly. If it works, show it, if it doesn't, show the first error message.
[03:57:04] <strcat> rusti: struct Foo; println!("{}", Foo); 2
[03:57:07] -rusti- pastebinned 8 lines of output: http://ix.io/bmD
[03:57:40] <strcat> ChrisMorgan: well, you're not going to convince me that I should use something I think we should remove anyway ;)
[03:57:49] <ChrisMorgan> Remove Poly!?
[03:58:03] <strcat> yes, remove std::repr/std::reflect
[03:58:04] <ChrisMorgan> A REPL *needs* something like it.
[03:58:06] <strcat> so rust can offer ABI compatibility
[03:58:27] <strcat> so someone implementing a REPL can implement it
[03:58:39] <strcat> rust needs to offer minimal support for ABI compatibility
[03:58:54] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[03:58:54] *** ChanServ sets mode: +ao brson brson
[03:59:04] *** Quits: ap4y (ap4y@92E20F51.A4EE7592.FD81FCD2.IP) (Quit: Leaving...)
[03:59:24] <ChrisMorgan> (Or perhaps it's not quite true that it's that essential; Python's __repr__ works pretty well, but with Python you can also access __dict__ when you need to.)
[03:59:39] <strcat> there is debug info
[03:59:42] <strcat> a REPL could fall back to that
[04:00:03] <strcat> repr is basically a crappier form of debug info part of any library's API for each type
[04:00:16] <strcat> so it's basically impossible to have a defined ABI
[04:00:21] *** Quits: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[04:01:21] *** Quits: heftig (heftig@moz-81A104E1.dip0.t-ipconnect.de) (Quit: Quitting)
[04:01:24] *** Quits: p1start (rewi@moz-E7F3D014.org) (Ping timeout)
[04:01:52] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[04:04:11] * ChrisMorgan doesn't know what this ABI compatibility stuff is
[04:04:12] *** Joins: IanCormac841 (User@E5477876.2A8D8854.67DFF8B4.IP)
[04:04:16] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[04:04:22] <ChrisMorgan> Or how.
[04:04:40] <strcat> the ability to update a library without recompiling everything linked against it
[04:04:50] <strcat> because the ABI is well-defined, and you can make internal fixes without changing it
[04:05:04] *** Quits: IanCormac84 (User@F91D39B7.64D641E5.67DFF8B4.IP) (Ping timeout)
[04:05:16] <strcat> std::repr/std::reflect violates privacy, so you can't hide any internal details of types
[04:05:25] <strcat> even if you leave the size of all public types the same, it still breaks their code
[04:05:41] <strcat> if rust wants to be taken seriously as a C and C++ replacement, it can't neglect an issue like that
[04:05:57] *** aatch is now known as aatch|work
[04:06:28] <strcat> anyway imo it's important 
[04:06:59] <strcat> the interface will never be a stable one
[04:07:09] <strcat> any code using {:?} should already be throwing a lint
[04:07:13] * ChrisMorgan understands now
[04:07:17] <strcat> from an API perspective in addition to an ABI one
[04:07:25] <strcat> since changing a private field or adding a private field changes the API
[04:07:56] <ChrisMorgan> {:?} is only useful for debugging and experimentation. But in these it is definitely useful.
[04:07:57] <strcat> making it show Foo { private } if there are any private fields would work
[04:08:07] <strcat> would fix both the ABI/API issue
[04:08:13] <strcat> but imo there's not much use case left if you do that
[04:08:27] <strcat> ChrisMorgan: yeah but there's debug info
[04:08:40] *** Joins: willingc (willingc@moz-F095E013.san.res.rr.com)
[04:08:44] <strcat> and debug info is known to not have any API/ABI backwards compatibility
[04:08:47] <ChrisMorgan> So long as that can actually be conveniently accessed, great!
[04:09:04] * strcat shrugs
[04:09:10] *** Quits: kanru (kanru@moz-DB4A9C19.scl3.mozilla.com) (Input/output error)
[04:09:14] <ChrisMorgan> And I mean as conveniently as {:?}.
[04:09:16] <strcat> imo recompiling a program to insert debugging statements isn't a workflow worth explicitly supporting
[04:09:24] <strcat> ChrisMorgan: that's not very convenient though
[04:09:27] <Havvy> Could add :D for debug.
[04:09:29] <strcat> only on trivially sized projects
[04:10:10] *** Joins: kanru (kanru@moz-DB4A9C19.scl3.mozilla.com)
[04:10:13] *** Quits: sw17ch (sw17ch@moz-4AF0345C.hfc.comcastbusiness.net) (Quit: sw17ch)
[04:10:16] <ChrisMorgan> … which is a very important space.
[04:10:21] *** Quits: Rusky (russell@moz-37E87AF7.slkc.qwest.net) (Ping timeout)
[04:10:26] <ChrisMorgan> Mostly because you're capturing new users at that point.
[04:10:28] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 31.0a1/20140329030204])
[04:10:35] <strcat> a debugger or Show still works well there imo
[04:10:57] *** Joins: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net)
[04:11:35] <strcat> rusti: println!("{:?}", vec!(1, 2, 3))
[04:11:36] -rusti- std::vec::Vec<int>{len: 3u, cap: 4u, ptr: (0x125b360 as *mut ())}
[04:11:36] -rusti- ()
[04:11:36] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[04:11:47] <strcat> do we really want new users to see stuff like that?
[04:12:02] <strcat> rusti: println!("{:?}", collections::hashmap::HashMap::new())
[04:12:10] -rusti- pastebinned 8 lines of output: http://ix.io/bmE
[04:12:16] <Havvy> How long has rusti been back?
[04:12:27] <strcat> the bot was never gone
[04:12:36] <strcat> or do you mean how long ago did I turn on my laptop
[04:12:39] <strcat> after the battery ran out
[04:12:51] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[04:13:00] <strcat> rusti: let mut xs = collections::HashMap::new(); xs.insert(5, 5); println!("{:?}", xs)
[04:13:03] -rusti- pastebinned 2 lines of output: http://ix.io/bmF
[04:13:25] <strcat> ChrisMorgan: imo {:?} is far from useful in most cases ;p
[04:13:35] <ChrisMorgan> And steadily getting "worse"!
[04:13:51] <Havvy> Umm, like 10 hours ago I think.
[04:13:54] <strcat> sure, it only knows about primitives, structs, enums
[04:14:02] <strcat> Havvy: ah well that's probably when my laptop battery ran out
[04:14:05] <strcat> I forgot to plug it in
[04:14:46] *** Joins: Rusky (russell@moz-37E87AF7.slkc.qwest.net)
[04:14:50] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Input/output error)
[04:15:16] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[04:16:28] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[04:17:04] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Ping timeout)
[04:17:18] *** Quits: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net) (Quit: syatchmenoff)
[04:17:38] <strcat> ChrisMorgan: and that's what it gets for showing private details of types ;p
[04:17:40] *** Joins: mno2 (mno2@E1E0A0A3.621D86F0.CFF65E33.IP)
[04:17:46] *** Quits: IanCormac841 (User@E5477876.2A8D8854.67DFF8B4.IP) (Ping timeout)
[04:17:59] *** Joins: IanCormac84 (User@62F20755.2A8D8854.67DFF8B4.IP)
[04:20:01] *** Joins: enos (jkingyens@moz-B0C1B161.hsd1.ca.comcast.net)
[04:23:29] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[04:25:14] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[04:27:08] *** Quits: nical (nico@moz-99690620.hinet-ip.hinet.net) (Ping timeout)
[04:30:40] *** Quits: andrewd18 (andrew@moz-DAC9D29F.wi.res.rr.com) (Quit: Leaving.)
[04:33:14] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[04:37:56] *** Joins: arcterus (arcterus@moz-182EE6BD.dsl.pltn13.sbcglobal.net)
[04:40:33] *** Quits: eatkinson-away (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Ping timeout)
[04:40:57] *** Quits: willingc (willingc@moz-F095E013.san.res.rr.com) (Client exited)
[04:41:15] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[04:42:38] *** Joins: eatkinson-away (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[04:42:57] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[04:42:59] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Client exited)
[04:43:07] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[04:43:07] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[04:43:13] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[04:43:17] <Havvy> rusti:  enum X {A, B C} let x = A;  (A == A, A == B)
[04:43:18] -rusti- <anon>:11:23: 11:24 error: expected `}` but found `C`
[04:43:18] -rusti- <anon>:11          enum X {A, B C} let x = A;  (A == A, A == B)
[04:43:18] -rusti-                                 ^
[04:43:18] -rusti- playpen: application terminated with error code 101
[04:43:27] <Havvy> rusti:  enum X {A, B, C} let x = A;  (A == A, A == B)
[04:43:31] -rusti- pastebinned 14 lines of output: http://ix.io/bmH
[04:43:50] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[04:43:59] <Havvy> rusti:  #[deriving(Eq)] enum X {A, B, C} let x = A;  (A == A, A == B)
[04:44:00] -rusti- <anon>:11:47: 11:48 warning: unused variable: `x`, #[warn(unused_variable)] on by default
[04:44:00] -rusti- <anon>:11          #[deriving(Eq)] enum X {A, B, C} let x = A;  (A == A, A == B)
[04:44:00] -rusti-                                                         ^
[04:44:00] -rusti- (true, false)
[04:44:32] *** Joins: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net)
[04:50:42] *** Joins: qwerty_nor (Thunderbir@A5447B90.EDC74FC5.E19950A4.IP)
[04:51:38] *** Joins: darkf (darkf@moz-F9058B8A.net)
[04:53:09] *** Quits: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[04:55:37] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[04:56:35] <hk> what is the correct way to return an owned str from a function, fn whois(&self) -> &str { self.name } 
[04:57:06] <Havvy> If my struct contains RefCell for anything that should be changed out over time, do I need to put it in a Mutex<> if I put it in an Arc?
[04:57:19] <strcat> hk: fn whois<'a>(&'a self) -> &'a str { self.name }
[04:57:25] <strcat> hk: at least if you want to avoid a copy
[04:57:38] <strcat> (I'm assuming self.name is a ~str)
[04:57:44] <strcat> actually return value inference is broken
[04:57:44] <hk> it is
[04:57:47] <strcat> you need self.name.as_slice()
[04:58:04] <sfackler> Havvy: yes, though it's actually broken right now
[04:58:27] <sfackler> Havvy: https://github.com/mozilla/rust/issues/13125
[04:58:29] <Havvy> Does right now mean as of three days ago?
[04:58:39] <sfackler> probably
[04:58:42] *** Quits: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net) (Ping timeout)
[04:59:35] <sfackler> the issue is that RefCell isn't Share, which means that Mutex<ThingWithARefCell> isn't Share, so you can't put it in an Arc
[04:59:47] *** Joins: bourbaki (luesebrink@moz-BED1057D.dip0.t-ipconnect.de)
[05:00:00] *** Joins: benjamin_ (benjamin@moz-C4E134D9.dip0.t-ipconnect.de)
[05:00:07] <hk> strcat: mismatched types: expected `&'a str` but found `~str` (str storage differs: expected &'a  but found ~)
[05:00:08] *** Joins: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net)
[05:00:14] <Havvy> Then what do I do?
[05:00:14] <strcat> hk: yeah, need as_slice
[05:00:17] <sfackler> you can work around it by doing something like keeping a Mutex<*ThingWithARefCell> and casting to and from a ~ThingWithARefCell
[05:00:31] <strcat> hk: usually it coerces but there's a bug with return values
[05:00:44] *** Quits: nieksand (Mibbit@moz-90AF4E6E.tukw.qwest.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:00:45] <strcat> rusti: let x = ~"foo"; let y: &str = x; y.len()
[05:00:46] *** Quits: qwerty_nor (Thunderbir@A5447B90.EDC74FC5.E19950A4.IP) (Ping timeout)
[05:00:48] -rusti- 3
[05:01:26] <strcat> rusti: let x = ~"foo"; let y = x.as_slice(); y.len()
[05:01:27] -rusti- 3
[05:02:56] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:05:24] <Havvy> http://static.rust-lang.org/doc/master/sync/struct.Arc.html Why is nothing documented?
[05:05:36] <Havvy> (Well, methods at least.)
[05:06:36] <sfackler> Havvy: a bug with rustdoc
[05:06:44] *** Quits: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net) (Ping timeout)
[05:06:48] <sfackler> it was fixed, but new doc builds haven't been running for some reason
[05:07:09] <Havvy> Well, umm...hmm... *checks the 0.9 docs*
[05:07:41] <strcat> sfackler: maybe the doc builder bot isn't running? 
[05:07:46] <sfackler> Havvy: right now it implements clone and deref
[05:07:54] <sfackler> so you can just pretend it is the type it wraps
[05:08:06] <Havvy> Ah, okay.
[05:08:09] <sfackler> strcat: brson was looking into it earlier
[05:08:21] <sfackler> I think it was uploading them as /nightly instead of /master or something
[05:10:22] <Havvy> What about Mutex?
[05:10:39] <Havvy> I just .lock() and I'll get the type it contains?
[05:10:46] *** Quits: hk (hk@B02395FB.62DE3100.CE715904.IP) (Quit: Leaving...)
[05:10:58] <sfackler> almost
[05:11:03] <mcpherrin> rusti: range('a', 'z').collect()
[05:11:03] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[05:11:03] -rusti- <anon>:11:9: 11:14 error: failed to find an implementation of trait std::ops::Add<char,char> for char
[05:11:03] -rusti- <anon>:11         range('a', 'z').collect()
[05:11:03] -rusti-                   ^~~~~
[05:11:03] -rusti- playpen: application terminated with error code 101
[05:11:07] <mcpherrin> ^ can I make this work?
[05:11:19] <sfackler> lock gives you a MutexGuard that's almost the same as the type it contians
[05:11:24] <strcat> mcpherrin: yes, add a trait for enumerated types
[05:11:25] <sfackler> but has a public cond field
[05:11:28] <sfackler> and a couple other things
[05:11:31] <strcat> mcpherrin: and have range use pred/succ
[05:11:33] <strcat> mcpherrin: instead of Add
[05:11:36] <strcat> ;p
[05:12:10] <strcat> although the char pred/succ will be a bit tricky since there's the surrogates gap
[05:12:26] <strcat> (as in 4 lines instead of 2)
[05:12:31] <strcat> s/2/1/
[05:12:46] *** Joins: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net)
[05:12:56] <Havvy> So if I have an Arc<Mutex<*World>>, how do I get to the ~World ?
[05:13:22] *** Joins: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net)
[05:13:31] <rusty_banger> call read() on the Arc and then * it
[05:14:12] *** Quits: aatch|home (aatch@moz-2BB0AC01.cable.telstraclear.net) (Client exited)
[05:14:50] <rusty_banger> err, that's how it is if you are using Arc<RWLock<T>>. Don't know anything about Mutex<T>
[05:15:28] <sfackler> *foo.lock() will get you to the *World, and you can transmute from there
[05:15:31] <strcat> Havvy: I'm not sure why you'd have an ~ inside though
[05:15:37] <strcat> why not just Mutex<World> ?
[05:16:02] <Havvy> Err, okay. ~ or no ~.   World has RefCells in it.
[05:16:20] <sfackler> strcat: https://github.com/mozilla/rust/issues/13125
[05:16:42] <sfackler> making a ~World and storing it as a *World is a hacky workaround
[05:17:37] <strcat> oh
[05:17:41] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[05:17:41] <strcat> bugs.
[05:17:59] *** Quits: masonl (masonl@AE7AAB74.497EC1B8.5EFB9497.IP) (Input/output error)
[05:18:27] <Havvy> Seeing that I have no clue how to fix that bug, I have to go with a workaround instead.
[05:19:20] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[05:20:13] *** Joins: paulolieuthier (quassel@5EF83619.D133490F.C9F645CD.IP)
[05:21:12] *** Quits: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net) (Quit: syatchmenoff)
[05:22:24] <alan_andrade> Should I be using str::from_utf8() to convert ~[u8] to a string ?
[05:23:45] *** Quits: IanCormac84 (User@62F20755.2A8D8854.67DFF8B4.IP) (Ping timeout)
[05:24:03] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Quit: QUIT)
[05:24:41] *** Quits: limeburst (me@247D1419.D73964AC.27A8748.IP) (Ping timeout)
[05:24:49] *** Quits: trustin (trustin@946D547D.87A02F9E.6FF1C976.IP) (Ping timeout)
[05:24:49] *** Quits: Yurume (Yurume@A826BD81.8A0DEF81.38747683.IP) (Ping timeout)
[05:24:58] *** Quits: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP) (Ping timeout)
[05:25:25] <rusty_banger> Does anyone know the status of codegen for ARMhf on rustc master right now?
[05:25:37] *** Quits: arcterus (arcterus@moz-182EE6BD.dsl.pltn13.sbcglobal.net) (Ping timeout)
[05:26:48] <mcpherrin> rusty_banger: It should work; I know it worked a few weeks ago
[05:27:12] *** Joins: IanCormac84 (User@D1ECE5F7.64D641E5.67DFF8B4.IP)
[05:27:21] <rusty_banger> hmm... My program compiled (finally) but crashed with "Illegal instruction" right after launch. I'm trying a trivial example right now.
[05:28:18] *** Quits: Denommus (user@moz-D91EF312.user.veloxzone.com.br) (Connection reset by peer)
[05:28:25] <rusty_banger> yeah, even the most trivial "hello world" won't run when I compile it on my x86_64 with armhf as the target
[05:28:39] <strcat> rusty_banger: #[no_std]
[05:28:42] <rusty_banger> and it won't execute on the x86_64 either, so I think I compiled for the right target XD
[05:28:59] <rusty_banger> orly? How does that affect my ability to use the std library? Is it, as I assume, totally gone?
[05:29:02] <strcat> or #[start]
[05:29:06] *** Quits: Blub\0 (wry@620605B3.71150E1A.237AE2BA.IP) (Ping timeout)
[05:29:14] <strcat> rusty_banger: I'm just pointing out that it's not a very minimal example
[05:29:20] *** Joins: Blub\0 (wry@620605B3.71150E1A.237AE2BA.IP)
[05:29:21] <strcat> as your main function isn't the entry point
[05:29:23] <rusty_banger> strcat: I'm not trying to program for bare metal here.
[05:29:25] <rusty_banger> ohhhhhhh
[05:29:26] <strcat> I know
[05:29:27] <rusty_banger> gotcha
[05:29:48] <rusty_banger> ok so what is the absolute minimum example program?
[05:29:59] *** Joins: nical (nico@moz-99690620.hinet-ip.hinet.net)
[05:30:11] <strcat> well, something like 'let x = 5; let y = x + 2;' 
[05:30:16] <strcat> and then see if using floats instead breaks it
[05:30:22] <strcat> could be unrelated to floats
[05:30:25] <rusty_banger> ok
[05:30:41] <rusty_banger> should I use the no_std flag?
[05:30:43] <klutzy> rusty_banger: https://github.com/mozilla/rust/blob/master/src/test/run-pass/smallest-hello-world.rs
[05:30:47] <strcat> #[start] fn main(_: int, _: **u8) -> int { 0 }
[05:30:50] <strcat> rusty_banger: that will also work
[05:30:53] *** Joins: p1start (rewi@moz-E7F3D014.org)
[05:30:58] <strcat> (with/without no_std)
[05:31:10] <strcat> rustilite: #[start] fn main(_: int, _: **u8) -> int { 1 }
[05:31:11] -rustilite- playpen: application terminated with error code 1
[05:31:13] <strcat> rustilite: #[start] fn main(_: int, _: **u8) -> int { 5 }
[05:31:13] -rustilite- playpen: application terminated with error code 5
[05:31:30] <rusty_banger> Could the fact that I don't have the .so files installed on my Pi be affecting this?
[05:31:37] *** Quits: bollu|away (bollu@31CCE710.7065DDB9.6D6A344F.IP) (Ping timeout)
[05:31:39] <rusty_banger> (just throwing it out there)
[05:32:35] <strcat> well it statically links to the rust libs by default
[05:32:46] <Havvy> So if I have an Arc<Mutex<*World>>, how do I get to the ~World ?  (let's try this again.)
[05:32:53] *** Quits: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp) (Quit: Bye)
[05:32:57] <rusty_banger> ok so the most basic program (return 5) worked
[05:32:59] *** Joins: NiccosSystem (NiccosSyst@moz-ED196BB4.customer.lyse.net)
[05:33:01] <rusty_banger> now trying floats
[05:33:07] <Havvy> arc.lock() as ~World  ?
[05:33:14] *** Quits: Khady (Khady@moz-31F9D77E.khady.info) (Ping timeout)
[05:33:17] *** Quits: tristram (tristram@moz-C498CC41.eu) (Ping timeout)
[05:33:28] *** Quits: dju (dju@moz-F02979DC.rev.poneytelecom.eu) (Ping timeout)
[05:34:13] <rusty_banger> floats didn't break anything
[05:34:46] *** Joins: Khady (Khady@moz-31F9D77E.khady.info)
[05:34:49] *** Joins: dju (dju@moz-83BD5EC.dmz.me)
[05:35:26] <sfackler> Havvy: you have to use std::cast::transmute to get from a *World to a ~World
[05:35:55] <rusty_banger> when I dropped the #[start] tag and just declared an empty main function, it stopped working and started doing the "Illegal instruction" thing again. Should I be searching for a bug related to this?
[05:36:10] *** Joins: ab (alex@BC9D99CC.37C1012D.FE617B51.IP)
[05:36:51] *** Joins: trustin (trustin@946D547D.87A02F9E.6FF1C976.IP)
[05:37:14] *** Joins: limeburst (me@247D1419.D73964AC.27A8748.IP)
[05:37:19] <rusty_banger> oh, it's probably worth noting that after I finished building and installing my rustc from source, it couldn't find the std crate when I tried to compile for armhf. (Had no problem finding the x86_64 crate.) So I put a symlink to the armhf .so's in /usr/local/lib/rustlib. Is it possible it linked against the wrong .so's? Did I fuck something up there?
[05:38:49] <rusty_banger> also, just a general question: what is stage 3 of the rust compiler toolchain? It seems to make a bunch of empty directories, and I thought the finished product was always in stage 2.
[05:39:16] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[05:39:22] *** Joins: tristram (tristram@moz-C498CC41.eu)
[05:41:16] *** Joins: Yurume (Yurume@A826BD81.8A0DEF81.38747683.IP)
[05:41:19] *** Joins: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP)
[05:42:01] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[05:43:43] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[05:43:45] <Havvy> sfackler:  So unsafe stuff. Okay.
[05:44:02] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[05:45:55] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[05:46:24] <alan_andrade> How can I merge two arrays into one? ~[~"oh"] merge with ~[~"join me"] to obtain ~[~"oh", ~"join me"]
[05:48:07] <strcat> you should use Vec
[05:48:10] <strcat> not ~[T]
[05:48:10] <Havvy> alan_andrade:  Convert to iterators, connect the two iterators together, and then collect into a ~[], or more probably a Vec.
[05:48:44] <strcat> rusti: let mut xs = vec!(1, 2, 3); let ys = [4, 5, 6]; xs.push_all(ys); xs
[05:48:45] -rusti- [1, 2, 3, 4, 5, 6]
[05:48:55] <rusty_banger> No, the location of the libraries wasn't it. I tried running rustc from right within its source directory (instead of the installed one) and it produced a binary with the same problem. I'm going to sleep now and will continue trying to cross-compile tomorrow. later all
[05:48:57] <alan_andrade> O_o whoa
[05:49:02] *** Joins: alonlevy (alon@moz-B6210BD6.red.bezeqint.net)
[05:49:11] *** Parts: rusty_banger (dev@moz-DCEC0170.hsd1.co.comcast.net) ()
[05:49:40] *** Quits: paulolieuthier (quassel@5EF83619.D133490F.C9F645CD.IP) (Client exited)
[05:49:44] <strcat> ofc you could also do it manually ;p
[05:50:02] <Havvy> rusti:  let xs = vec!(1, 2, 3);  let ys = vec!(4, 5, 6); let xys: Vec<int> = xs.iter().chain(ys.iter()).collect()
[05:50:02] -rusti- <anon>:12:5: 12:6 error: expected `;` but found `}`
[05:50:02] -rusti- <anon>:12     };
[05:50:03] -rusti-               ^
[05:50:03] -rusti- playpen: application terminated with error code 101
[05:50:05] <alan_andrade> I'm using ~[T] because a function that I'm using needs one argument to be that
[05:50:14] <strcat> which function?
[05:50:19] <alan_andrade> Process::new
[05:50:43] <alan_andrade> oh
[05:50:44] <Havvy> What did I just do to rusti?
[05:50:51] <strcat> alan_andrade: it requires &[T], not ~[T]
[05:50:54] <alan_andrade> &[~T]
[05:51:03] <strcat> so you can use a Vec
[05:51:04] <alan_andrade> yes, my bad
[05:51:06] *** Quits: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net) (Client exited)
[05:51:16] <alan_andrade> Ok ok. I'll do that : )
[05:51:23] <strcat> Havvy: you left an unterminated let statement
[05:51:29] <Havvy> rusti:  let xs = vec!(1, 2, 3);  let ys = vec!(4, 5, 6); let xys: Vec<int> = xs.iter().chain(ys.iter()).collect();
[05:51:33] -rusti- pastebinned 8 lines of output: http://ix.io/bmU
[05:52:06] *** Joins: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net)
[05:52:30] <strcat> patterns like that are really inefficient though
[05:52:34] <strcat> you should grow one of the vectors
[05:53:04] <strcat> rusti: let mut xs = vec!(1, 2, 3); let ys = vec!(1, 2, 3); xs.push_all_move(ys); xs
[05:53:05] -rusti- [1, 2, 3, 1, 2, 3]
[05:53:15] *** Joins: Ferreus_ (ferreus@moz-3F92D111.lsn.wtnet.de)
[05:53:24] <Havvy> .push_all_move seems to return an [] instead of a Vec though.
[05:53:33] <strcat> push_all_move doesn't return anything
[05:53:38] <Havvy> Oh.
[05:53:41] <strcat> it pushes stuff to the vector you call it on
[05:53:41] <Havvy> Wait, yeah. I see.
[05:53:58] <strcat> push_all is similar but takes a slice and has to clone each thing it pushes
[05:55:59] <Havvy> src/librusttower/world.rs:76:33: 76:53 error: unresolved name `std::cast::transmute`.
[05:56:18] *** Joins: edwardw (Mibbit@EE646FE3.EE06708D.4BFBD933.IP)
[05:56:58] *** Quits: lpy (lpy@E44EE2C4.F09091A8.1348A864.IP) (Client exited)
[05:58:50] *** Joins: fabiand (fabiand@moz-A3448D9E.adsl.alicedsl.de)
[06:00:00] *** Quits: alisdair (textual@moz-7E6FA9C4.bchsia.telus.net) (Connection reset by peer)
[06:01:51] *** Joins: jackneill (jackneill@moz-67205168.pool.digikabel.hu)
[06:02:14] <Havvy> https://github.com/Havvy/rustlike/blob/stairs/src/librusttower/world.rs#L75  It can't find std::cast::transmute ?
[06:02:44] *** Joins: alisdair (textual@moz-7E6FA9C4.bchsia.telus.net)
[06:02:50] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[06:02:58] <frozendevil> does memory layout change inside closures or something?
[06:03:45] <strcat> hm?
[06:04:16] *** Quits: blehtm (chatzilla@moz-4D8177E2.rochester.res.rr.com) (Ping timeout)
[06:05:32] *** Joins: paraze (paraze@moz-F2628701.w90-27.abo.wanadoo.fr)
[06:05:36] <frozendevil> I'm trying to do the rustboot-to-toy-OS thing, and I'm trying to factor out common code from the clear screen and putchar functions… it works fine outside of the "range" closure, but brhaves very strangely inside of it
[06:06:25] *** Joins: lpy (lpy@186A8F3A.F09091A8.1348A864.IP)
[06:06:50] *** Quits: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net) (Client exited)
[06:09:58] *** Quits: bourbaki (luesebrink@moz-BED1057D.dip0.t-ipconnect.de) (Quit: Reconnecting)
[06:10:00] *** Joins: bourbaki (luesebrink@moz-BED1057D.dip0.t-ipconnect.de)
[06:10:06] <bourbaki> Greetings
[06:10:19] *** Joins: nkoep (nik@moz-841A7239.pool.mediaways.net)
[06:10:34] <frozendevil> or I'm an idiot and it's an off-by-one error
[06:10:38] <alan_andrade> :( this question might be really stupid but... how do I allocate a mutable owned vector that contains owned strings ?
[06:10:58] <alan_andrade> I'm doing `let ~mut options = vec!(~"o")`
[06:11:11] <strcat> alan_andrade: ~ doesn't mean anything there
[06:11:23] <strcat> rusti: let mut xs = vec!(1, 2, 3); xs
[06:11:24] -rusti- <anon>:11:13: 11:19 warning: variable does not need to be mutable, #[warn(unused_mut)] on by default
[06:11:24] -rusti- <anon>:11         let mut xs = vec!(1, 2, 3); xs
[06:11:24] -rusti-                       ^~~~~~
[06:11:24] -rusti- [1, 2, 3]
[06:11:39] <strcat> the `mut` isn't part of a type, it's making a mutable variable
[06:11:52] <strcat> the type is Vec<int>, whether or not it is in a mutable variable
[06:11:58] *** Quits: alonlevy (alon@moz-B6210BD6.red.bezeqint.net) (Ping timeout)
[06:12:26] *** Quits: Ferreus_ (ferreus@moz-3F92D111.lsn.wtnet.de) (Quit: WeeChat 0.4.4-dev)
[06:12:44] <strcat> alan_andrade: ~ also doesn't mean 'owned'
[06:12:53] <strcat> T and ~T are both owned
[06:13:14] <strcat> ~T is a certain kind of uniquely owned memory allocation
[06:13:37] <strcat> it's a pointer to dynamically allocated memory, 'owned' refers to it being a unique owner of that memory
[06:13:46] <edwardw> rusti: let xs = ~vec!(~"rust"); xs
[06:13:47] -rusti- [rust]
[06:13:59] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[06:14:25] <edwardw> alan_andrade: ^^ do you mean that?
[06:14:29] <strcat> I doubt it
[06:14:31] <strcat> that's not really useful
[06:14:39] <strcat> ~ does *not* mean owned.
[06:14:46] <alan_andrade> I'm digesting what strcat is saying
[06:15:15] <strcat> imo this is just a great argument for removing the ~T syntactic sugar and calling it Uniq<T> instead
[06:15:31] *** Joins: blehtm (chatzilla@moz-4D8177E2.rochester.res.rr.com)
[06:16:22] <mcpherrin> rusti: let x: Vec<char> = range(64, 70).map(|x| std::char::from_u32(x).unwrap()).collect(); x
[06:16:22] -rusti- <anon>:11:70: 11:71 error: mismatched types: expected `u32` but found `int` (expected u32 but found int)
[06:16:22] -rusti- <anon>:11         let x: Vec<char> = range(64, 70).map(|x| std::char::from_u32(x).unwrap()).collect(); x
[06:16:23] -rusti-                                                                                ^
[06:16:23] -rusti- error: aborting due to previous error
[06:16:24] -rusti- playpen: application terminated with error code 101
[06:16:33] <mcpherrin> Why does this not infer correctly?
[06:16:41] <mcpherrin> if I do 64u32 it does
[06:16:46] <Havvy> Seeing how rarely I use ~ personally, I'd be for Uniq<T>.
[06:16:55] <strcat> mcpherrin: because rust's type inference is really broken
[06:17:01] <strcat> ;p
[06:17:11] <mcpherrin> strcat: lovely :-)
[06:17:12] <strcat> mcpherrin: and then there's the hard-wired fallback to `int`
[06:17:20] <strcat> mcpherrin: which I am convinced will cause many bugs
[06:17:39] <strcat> inference fails to work -> oh, I'll just use a signed pointer-size integer
[06:17:41] <strcat> ;p
[06:18:02] <strcat> imo these are the kinds of things that make rust hard to learn. too much magic.
[06:18:18] *** Quits: japaric (japaric@DC168457.F3E5B3F6.F4D5766F.IP) (Ping timeout)
[06:18:36] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[06:18:57] <strcat> rusti: let x = 5; x
[06:18:58] -rusti- 5
[06:19:10] *** Joins: japaric (japaric@3DD6B4D0.E67A32BD.5C7588CA.IP)
[06:19:14] *** Quits: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca) (Quit: Leaving.)
[06:19:14] <strcat> rusti: let x = 5; x + 10u8; x /* now x is a different type! */
[06:19:14] -rusti- 5
[06:19:17] * strcat shrugs
[06:19:29] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[06:19:37] <strcat> it breaks some of the basic rules you'd get from type inference otherwise
[06:19:51] <strcat> without the fallback, there is *always* an explicit type somewhere
[06:20:01] <strcat> the type of the variable can never change by adding more code
[06:20:12] <strcat> but atm, you get strange stuff
[06:20:29] <strcat> mcpherrin: it will just try to fall back too early, not sure
[06:20:36] <strcat> mcpherrin: but overall rust's type inference has a lot of issues ;\
[06:20:44] *** Quits: ChrisMorgan (chris@moz-8DCBEA52.vic.adsl.internode.on.net) (Ping timeout)
[06:21:01] <alan_andrade> rusti: let a = ~vec!(1); let b = vec!(1);
[06:21:04] -rusti- pastebinned 7 lines of output: http://ix.io/bn0
[06:21:13] <strcat> alan_andrade: I'm not really sure why you would want that
[06:21:24] <strcat> what do you think ~ is doing there?
[06:21:32] <alan_andrade> I'm trying to understand with that example
[06:21:55] <strcat> lets remove the ~ sugar and replace it with what it would look like as a library feature
[06:21:56] <alan_andrade> So, you're saying ~ is a unique memory allocation.
[06:22:03] <strcat> let xs = Uniq::new(vec!(1)); xs
[06:22:15] <Havvy> It's a pointer to a vec on the heap.
[06:22:16] <strcat> where the type is Uniq<Vec<int>>
[06:22:24] <strcat> (and the vec itself has a pointer to more memory on the heap)
[06:22:39] <Havvy> strcat:  Couldn't you call it a Heap<> instead of a Uniq<>?
[06:22:40] *** Joins: alkino_ (alkino@moz-B4A66306.w92-151.abo.wanadoo.fr)
[06:22:49] <strcat> Havvy: heap is a somewhat bad term
[06:22:51] <alan_andrade> Ok. That part of the concepts I previously had match.
[06:22:58] <strcat> stacks and unique pointer allocations come from the same place
[06:23:05] <strcat> there's a good reason for C and C++ not ever using the term 'heap'
[06:23:20] <strcat> I would just call it a dynamic memory allocation
[06:23:22] <Havvy> Oh?
[06:23:41] <mcpherrin> The stack is just a heap allocation
[06:23:43] *** Joins: Blub\1 (wry@620605B3.71150E1A.237AE2BA.IP)
[06:23:51] <eddyb> hehe
[06:23:58] *** Quits: Blub\0 (wry@620605B3.71150E1A.237AE2BA.IP) (Ping timeout)
[06:24:00] <strcat> mcpherrin: what about the original stack for the main process?
[06:24:03] <eddyb> mcpherrin: not really, AFAIK
[06:24:06] <strcat> it's a memory allocation
[06:24:14] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[06:24:17] <strcat> if by 'heap' you mean 'all memory', sure
[06:24:22] <eddyb> yeah, mmap at a high memory address
[06:24:22] <mcpherrin> true, it probably doesn't come from the same memory pool as your malloc()
[06:24:27] <strcat> let x = 5; // an integer allocated on the heap
[06:24:33] <strcat> mcpherrin: stacks can
[06:24:34] <eddyb> while the heap usually starts after .data
[06:24:49] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[06:24:50] <eddyb> (but doesn't have to)
[06:24:53] <strcat> mcpherrin: and what pool do you think malloc uses? jemalloc uses mmap/munmap, and that's also where glibc/rust stacks come from
[06:24:54] <Havvy> I thought `let x = 5;` would allocate on the stack.
[06:25:05] <strcat> Havvy: yes
[06:25:07] <eddyb> Havvy: it doesn't "allocate"
[06:25:09] <strcat> and where does the stack come from?
[06:25:21] <strcat> it comes from the same place as unique pointers
[06:25:29] <Havvy> I consider the heap to be everything after the stack.
[06:25:35] <strcat> Havvy: 'after' the stack?
[06:25:39] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Taking a nap.)
[06:25:39] <eddyb> Havvy: in memory? not even close :P
[06:25:40] <strcat> Havvy: there's more than one stack
[06:25:42] <Havvy> Though that breaks down when you have dynamic stacks.
[06:25:50] <strcat> Havvy: and it's not necessarily after.
[06:25:55] <eddyb> Havvy: the heap is waaaay before the stack, usually :P
[06:25:56] <strcat> it might be before
[06:25:59] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[06:26:03] <strcat> the stack might be in the middle of the address space
[06:26:11] <strcat> good ASLR in fact likely guarantees it will be
[06:26:13] <eddyb> strcat: I've only seen heap after .data and the stack close to the end of the address space
[06:26:20] <strcat> eddyb: use grsecurity ;)
[06:26:27] <eddyb> meh
[06:26:33] <eddyb> strcat: if I were on windows, sure
[06:26:33] <strcat> I just mean that it breaks that assumption
[06:26:36] <Havvy> So that's what ASLR does.
[06:26:40] <strcat> Havvy: no
[06:26:43] <strcat> one of the many things it does
[06:26:49] <strcat> (and it doesn't necessarily do that)
[06:26:56] <strcat> it's just one more thing you can randomize
[06:26:58] <eddyb> Havvy: your example, btw, gets optimized to a SSA "register" which is either a machine register or the stack (if it spills)
[06:27:04] *** Joins: nieksand (Mibbit@moz-90AF4E6E.tukw.qwest.net)
[06:27:10] <strcat> linux has ASLR with or without grsecurity, but it's improved with it
[06:27:22] <Havvy> SSA = Single Static Assignment?
[06:27:41] <strcat> anyway the term stack/heap isn't used by the C or C++ standards at all
[06:27:51] <strcat> it's really not accurate to use them when referring to stuff like this
[06:27:52] <eddyb> Havvy: yeah
[06:28:00] <strcat> the docs should try to avoid it
[06:28:17] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[06:28:18] <eddyb> Havvy: `let x = 5;` is pretty much `%x = i64 5`
[06:29:07] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[06:29:07] <Havvy> But `%x = i32 5` on a 32bit system.
[06:29:41] *** Joins: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP)
[06:29:46] *** Joins: arcterus (arcterus@moz-182EE6BD.dsl.pltn13.sbcglobal.net)
[06:29:48] <eddyb> Havvy: sure
[06:29:53] <Havvy> So how do the C/C++ standards talk about function calls are implemented? Or does it not?
[06:29:59] <eddyb> Havvy: if x is inferred to i8, might as well be that :P
[06:30:16] <strcat> Havvy: how should rust talk about it? varies per platform
[06:30:19] <dsrx> Havvy: calling conventions are platform dependent afaik
[06:30:23] <strcat> they don't talk about that stuff because it's an implementation detail
[06:30:39] <Havvy> Alright. Makes sense.
[06:30:42] <strcat> int x = 5; // am I in a register, or on the stack? does this implementation even have a stack? depends
[06:30:46] *** Joins: twi (Adium@moz-429185BE.cust.vodafonedsl.it)
[06:30:59] <eddyb> strcat: hardware call stack!
[06:31:07] <strcat> eddyb: sure, but you don't need a stack at all
[06:31:10] <eddyb> those are cute :D
[06:31:11] <strcat> just frames
[06:31:25] <strcat> it doesn't need to be contiguous (rust's stacks didn't used to be)
[06:31:28] <eddyb> can't remember which architecture I've seen that in
[06:31:36] *** Quits: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP) (Ping timeout)
[06:31:46] <eddyb> 8051? mmaybe
[06:32:00] * alan_andrade enjoys observing this conversation. Mind blown
[06:32:16] <strcat> anyway ~5 is just like Uniq::new(5)
[06:32:21] <strcat> ~int is like Uniq<int>
[06:32:23] <strcat> it's sugar
[06:32:34] <edwardw> eddyb: what do you mean hardware call stack? isn't sp + bp doing that already?
[06:32:50] <strcat> edwardw: some hardware explicitly handles call frames for you
[06:32:51] <eddyb> edwardw: uhm, no
[06:32:53] <strcat> edwardw: you don't have a stack
[06:32:57] <eddyb> yeah, that :)
[06:33:04] <edwardw> k
[06:33:15] <nieksand> since Vec implements FromIterator<T>, I should be able to do something like: let mut vec = Vec::from_iterator( range(0u8, 64u8) ); right?
[06:33:37] <Havvy> So anyways, back in the world of Rust, https://github.com/Havvy/rustlike/blob/stairs/src/librusttower/world.rs#L76, why am I getting the error 'error: use of undeclared module `std::cast``
[06:33:49] <strcat> nieksand: eventually, maybe, but for now trait static methods aren't accessible in the type's namespace
[06:33:59] <strcat> nieksand: so you need FromIterator::from_iterator and a type hint saying it is a Vec
[06:34:00] <Havvy> rusti:  Vec::from_iterator(range(0u1, 0u2))
[06:34:01] -rusti- <anon>:11:37: 11:38 error: expected `,` but found `1`
[06:34:01] -rusti- <anon>:11          Vec::from_iterator(range(0u1, 0u2))
[06:34:01] -rusti-                                               ^
[06:34:01] -rusti- playpen: application terminated with error code 101
[06:34:10] <strcat> nieksand: iterators implement the collect method to make this cleaner
[06:34:20] <nieksand> strcat: thanks much!  was playing wackomole with syntax errors
[06:34:34] <strcat> rusti: range(0, 10).collect::<collections::HashSet<int>>()
[06:34:35] -rusti- {2, 5, 6, 9, 0, 4, 7, 8, 3, 1}
[06:34:47] <nieksand> that makes sense
[06:34:56] <strcat> if you wanted to do it manually
[06:35:29] <strcat> well, actually I don't think there's a clean way to call static methods atm
[06:35:35] *** Quits: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[06:35:40] <strcat> anyway imo resolve should be changed to include them in the type's namespace
[06:35:43] <strcat> as it already does for method access
[06:35:56] <strcat> foo.bar() can call a method bar defined on a trait, if the trait is in scope
[06:35:57] <Havvy> rusti:  unsafe { let x: *int = std::cast::transmute(~0); }
[06:35:57] -rusti- <anon>:11:23: 11:24 warning: unused variable: `x`, #[warn(unused_variable)] on by default
[06:35:58] -rusti- <anon>:11          unsafe { let x: *int = std::cast::transmute(~0); }
[06:35:58] -rusti-                                 ^
[06:35:58] -rusti- ()
[06:36:00] <strcat> static methods could work the same way
[06:36:07] <Havvy> rusti:  unsafe { let x: *int = std::cast::transmute(~0) }
[06:36:07] -rusti- <anon>:11:58: 11:59 error: expected `;` but found `}`
[06:36:08] -rusti- <anon>:11          unsafe { let x: *int = std::cast::transmute(~0) }
[06:36:08] -rusti-                                                                    ^
[06:36:08] -rusti- playpen: application terminated with error code 101
[06:36:31] *** Joins: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net)
[06:36:48] *** Quits: blehtm (chatzilla@moz-4D8177E2.rochester.res.rr.com) (Ping timeout)
[06:37:10] <Havvy> rusti:  unsafe { let x: *int = std::cast::transmute(~0); x }
[06:37:10] -rusti- 0x215b060
[06:37:22] <edwardw> strcat: https://github.com/mozilla/rust/issues/11938?
[06:37:35] <strcat> no not that
[06:37:41] *** Joins: eibwen (kvirc@moz-E7BC7E0A.dip0.t-ipconnect.de)
[06:37:48] <edwardw> ok
[06:37:49] <strcat> that's about letting you call non-static methods as functions
[06:38:08] <strcat> I'm talking about resolving Type::foo to a static method foo defined on an in-scope trait (doesn't work atm)
[06:38:25] <strcat> it already resolves type.foo() to a non-static method foo defined on an in-scope trait
[06:38:35] <strcat> pcwalton was against doing it for static methods before
[06:38:39] <strcat> but I think his mind is changing
[06:38:41] <strcat> and I hope it does ;)
[06:38:46] <edwardw> k
[06:39:13] <Havvy> Derp. It's because `use` is mod local and not crate local, so it would looking for self::std::... instead of ::std::...
[06:39:26] <alan_andrade> My experiment compiled, but I don't know whats happening.
[06:39:33] <strcat> Havvy: use is always absolute
[06:39:43] <strcat> use std::foo; is equivalent to use ::std::foo;
[06:39:45] <Havvy> Err, not `use`.
[06:39:51] <strcat> expressions in code are relative by default
[06:39:52] <alan_andrade> I have a vec, and to use it as argument for Process::new() I used `.as_slice`
[06:39:53] <strcat> Havvy: ah
[06:39:55] <strcat> yes
[06:40:07] <alan_andrade> I don't know what's happening with `as_slice`
[06:40:12] <Havvy> Expressions being relative and `use` being absoulte is *really* annoying.
[06:40:18] <strcat> alan_andrade: &[T] is a ptr + len, it's a view of memory
[06:40:25] <strcat> as_slice is giving you a slice pointing into the Vec<T>
[06:40:42] <strcat> Havvy: yeah, I kind of agree
[06:40:43] <eddyb> Havvy: once you get used to it, it's really useful
[06:40:50] <strcat> Havvy: it would be too painful otherwise...
[06:41:02] <strcat> in code, you almost always want relative
[06:41:03] <eddyb> you rarely need to touch uses
[06:41:08] <eddyb> and, yeah
[06:41:12] <strcat> fn foo() {} foo(); // wouldn't work if it was absolute
[06:41:18] <alan_andrade> oh oh oh ! It clicked ! Ok, I got it! 
[06:41:27] <frozendevil> What does the `'` sigil mean? I thought it meant static but I've been seeing `'static` so I assume it's something else? The only reference I can find in the tutorial is `'static`
[06:41:35] <strcat> frozendevil: means lifetime
[06:41:35] *** Joins: apollow (yellowy432@moz-52F6097D.dhcp.trlk.ca.charter.com)
[06:41:40] <strcat> 'foo, 'bar, 'baz
[06:41:43] <Havvy> 'a
[06:41:44] <eddyb> 'static is the lifetime of the universe
[06:41:45] <strcat> 'static is the only special one atm
[06:41:50] <frozendevil> ah
[06:42:02] *** Joins: ofeldt- (ofeldt@moz-F444FB50.dip0.t-ipconnect.de)
[06:42:06] <strcat> frozendevil: for example, fn foo<'a>(x: &'a [int]) -> &'a int
[06:42:10] *** Joins: blehtm (chatzilla@moz-4D8177E2.rochester.res.rr.com)
[06:42:11] <eddyb> (the "top" of lifetimes, I guess)
[06:42:17] <strcat> frozendevil: it returns a reference to an integer with the same lifetime as the passed in slice
[06:42:25] <edwardw> frozendevil: think 'a is another kind of variable name
[06:42:30] <edwardw> as*
[06:42:32] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[06:42:40] <frozendevil> interesting
[06:42:43] *** Quits: blehtm (chatzilla@moz-4D8177E2.rochester.res.rr.com) (Input/output error)
[06:42:50] *** Quits: ofeldt (ofeldt@moz-45205924.dip0.t-ipconnect.de) (Ping timeout)
[06:42:55] <strcat> rust type checks reference lifetimes statically, since it prevents dangling references
[06:43:05] <strcat> so it needs to be part of the type signature of functions, etc.
[06:43:36] <frozendevil> that's pretty cool
[06:44:13] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[06:44:49] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[06:44:53] *** Quits: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca) (Quit: canhtak)
[06:48:24] <apollow> how do you make something hashable? I'm putting "#[deriving(Hash)]" before a struct but rustc is yelling at me
[06:48:57] <strcat> apollow: deriving(Hash) will work if all the contained fields are hashable too
[06:48:59] <edwardw> saying some part of the struct not hashable
[06:49:01] <edwardw> ?
[06:49:12] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[06:49:21] <apollow> Im doing the person example
[06:49:42] <strcat> rusti: #[deriving(Hash, Eq, TotalEq)] struct Foo(u32, u32); let mut xs = collections::HashSet::new(); xs.insert(Foo(2, 2)); xs.len()
[06:49:43] -rusti- 1
[06:50:02] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[06:50:06] <strcat> (the Eq/TotalEq stuff needs to be cleaned up, it's just really hard to make it bootstrap)
[06:50:25] *** Joins: soumyaC (uid15286@moz-E77DEB21.irccloud.com)
[06:50:29] *** Quits: nieksand (Mibbit@moz-90AF4E6E.tukw.qwest.net) (Quit: http://www.mibbit.com ajax IRC Client)
[06:51:17] <apollow> hmm, when i put that in code
[06:51:29] <apollow> rustc yells at me, let me get the pastebin out
[06:52:13] <apollow> http://pastebin.com/rR24JR0Y
[06:52:41] <sfackler> apollow: if you're using an older compiler, you'll want to use IterBytes instead of Hash
[06:52:49] <edwardw> apollow: rustc -v?
[06:53:41] <jdavis__> what triggers the "unused result which must be used" warning? How does rustc know which results must be used and which can be discarded?
[06:54:07] <sfackler> jdavis__: the Result type is annotated with #[must_use]
[06:54:21] <jdavis__> Oh, thanks.
[06:54:55] <edwardw> rusti: version
[06:54:56] -rusti- rustc 0.10-pre (612e22e 2014-03-30 17:21:40 -0700)
[06:55:17] <jdavis__> Is that apparent from the docs, or only from looking at the source of the standard library?
[06:55:19] <apollow> hmm
[06:55:47] <sfackler> jdavis__: it probably isn't well documented :(
[06:56:12] <edwardw> unfortunately, it is not http://static.rust-lang.org/doc/master/std/result/enum.Result.html
[06:56:19] <apollow> edwardw: c:\Program Files (x86)\Rust\bin\rustc.exe 0.9 (7613b15 2014-01-08 18:04:43 -0800
[06:56:19] <apollow> )
[06:56:19] <apollow> host: i686-pc-mingw32
[06:56:21] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[06:56:40] <sfackler> apollow: yeah, use IterBytes instead of Hash then
[06:56:42] <edwardw> apollow: hash::Hash is not in 0.9
[06:56:53] <apollow> got it
[06:57:17] <jdavis__> Fair enough -- I'm not suggesting that the docs should be made overly verbose with every detail.
[06:59:32] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[06:59:44] <alan_andrade> hey strcat, thank you very much <3
[06:59:55] <strcat> alan_andrade: np
[07:00:24] <alan_andrade> my experiment is working now  \o/
[07:01:31] <sfackler> jdavis__: the docs need to be made more verbose in *many* details :)
[07:02:55] *** flaper87|afk is now known as flaper87
[07:04:57] <frozendevil> Did I see someone say that rust-core was not being actively worked on since ideally std would be freestanding?
[07:05:56] *** Joins: mib_6ga5b4 (Mibbit@6D71664E.48960495.CC1A2609.IP)
[07:07:27] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[07:07:59] <strcat> frozendevil: I'm accepting pull requests fixing rust-core, but am not currently working on it
[07:08:29] *** Quits: mib_6ga5b4 (Mibbit@6D71664E.48960495.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:08:30] <strcat> I would rather fork rust's stdlib than rebuild it
[07:08:35] *** Quits: eibwen (kvirc@moz-E7BC7E0A.dip0.t-ipconnect.de) (Ping timeout)
[07:08:49] <strcat> although maybe I'll decide to use copy-paste + editing instead
[07:09:16] <edwardw> lol
[07:09:26] <frozendevil> so does that mean there's work being put into freestanding stdlib, or did I hallucinate that?
[07:10:07] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[07:10:16] <frozendevil> (sorry for being thick)
[07:11:07] <edwardw> frozendevil: there's a PR about it, but ut doesn't seem very active right now
[07:11:10] <edwardw> https://github.com/mozilla/rust/pull/11968
[07:11:12] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Quit: leaving)
[07:11:23] <strcat> edwardw: that's not a freestanding libstd, though, it's a small crate of freestanding stuff
[07:11:27] <strcat> which is not a rust-core replacement
[07:11:35] <edwardw> ok
[07:11:44] <strcat> a freestanding library should certainly provide iterators, option, result, etc.
[07:11:56] <strcat> and it should provide containers like Vec<T> and HashMap<T> once we have allocators
[07:12:06] <edwardw> strcat: I think you also submitted a similar one, but couldn't find it
[07:12:13] <strcat> no, I haven't
[07:12:19] <edwardw> ah ok
[07:12:22] <strcat> I don't have a workable solution that doesn't involve using cfg()
[07:12:29] <strcat> and I don't think there is one with how the language is designed atm
[07:12:46] <strcat> lets say we decide unwinding is optional
[07:12:58] *** Quits: oxum (anonymous@341236F3.F00CA6EC.520CDC98.IP) (Quit: ...)
[07:13:01] <eddyb> strcat: bug Tobba to write that weak items RFC :P
[07:13:11] <strcat> eddyb: I don't think that's going to solve it either...
[07:13:13] <eddyb> it solves a few issues
[07:13:25] <eddyb> strcat: even with library specialization?
[07:13:42] <strcat> I'm not in support of adding more complexity like that to rust
[07:13:57] <eddyb> no love to std-green-jemalloc?
[07:14:12] <strcat> no
[07:14:13] <eddyb> s/to/for
[07:14:19] <strcat> too complicated
[07:14:24] <strcat> just use jemalloc from the start
[07:14:26] <strcat> simple is better
[07:14:56] <strcat> I'm adding adding optional/keyword parameters, object inheritance, variadic generics and plenty of other things
[07:15:02] <eddyb> it's just an example
[07:15:11] <eddyb> s/adding/against
[07:15:21] <strcat> yes ;)
[07:15:24] <strcat> rust is already complex, it's not going to succeed if it gets more complex imo
[07:15:43] <strcat> stuff like DST and unboxed closures can basically be a simplification of user-facing semantics if done well
[07:15:58] <strcat> since it removes special cases
[07:16:07] <eddyb> strcat: do you have a better solution for portable libraries?
[07:16:17] *** Joins: Saj (Saj@moz-840D0658.netvisao.pt)
[07:16:19] <eddyb> right now we go through vtables for any kind of IO
[07:16:32] <eddyb> and other nasty stuff
[07:17:26] <eddyb> strcat: can you solve the injectable default allocator issue?
[07:17:36] *** Joins: masonl (masonl@AE7AAB74.497EC1B8.5EFB9497.IP)
[07:17:47] *** Quits: Blub\1 (wry@620605B3.71150E1A.237AE2BA.IP) (Ping timeout)
[07:18:00] *** Joins: Blub\1 (wry@620605B3.71150E1A.237AE2BA.IP)
[07:18:14] <dsrx> kinda wish Option<T>.take() were named something something else 
[07:18:20] *** Quits: santiago (santiago@moz-69361A64.socal.res.rr.com) (Ping timeout)
[07:18:31] <eddyb> dsrx: why?
[07:18:33] <strcat> eddyb: we can fix the vtables stuff without language complexityt
[07:18:39] <strcat> eddyb: sure
[07:18:44] <strcat> eddyb: libstd depends on a crate defining an allocator
[07:18:48] <strcat> you can use another crate if you want
[07:18:51] *** Joins: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net)
[07:18:51] *** ChanServ sets mode: +o huon
[07:18:52] <frozendevil> strcat: do you have a link for keyword parameters?
[07:19:05] <strcat> frozendevil: no
[07:19:21] <dsrx> eddyb: confusing given that Option implements many methods with the same name and similar semantisc as Iterator, but take() means completely different things for each
[07:19:24] <strcat> if someone actually feels like proposing them, I'll write a long tirade about how evil and non-composable it is though
[07:19:41] *** Quits: masonl (masonl@AE7AAB74.497EC1B8.5EFB9497.IP) (Quit: leaving)
[07:19:45] *** Joins: masonl (masonl@AE7AAB74.497EC1B8.5EFB9497.IP)
[07:19:48] <eddyb> dsrx: I never thought of Option's take in relation to Iterator's take
[07:20:08] <frozendevil> ah, I think I misunderstood what you said
[07:20:30] <eddyb> strcat: you end up with a mess of crates with nasty interdepedencies though
[07:20:32] *** Quits: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net) (Ping timeout)
[07:20:35] <flaper87> dsrx: pls, provide feedback here https://github.com/mozilla/rust/issues/13159 :D
[07:20:50] <flaper87> dsrx: read niko's comment
[07:20:58] <strcat> eddyb: I'm saying this works for allocators and failure
[07:21:03] <strcat> it doesn't work for making libstd freestanding
[07:21:07] <dsrx> flaper87: interesting, thanks
[07:21:12] <dsrx> eddyb: might confuse me a bit coming from Scala
[07:21:13] <strcat> eddyb: I don't think this is black-and-white
[07:21:18] <strcat> I think some things can be done with crates
[07:21:27] <strcat> but I don't think freestanding libstd can/should be if it's done well
[07:21:45] <eddyb> so what do you want for freestanding libstd?
[07:21:53] *** Joins: santiago (santiago@moz-69361A64.socal.res.rr.com)
[07:22:10] <strcat> eddyb: make features optional via cfg() until you can specify a freestanding build
[07:22:12] <strcat> cfg(float)
[07:22:18] <strcat> or w/e
[07:22:19] <dsrx> where Option can be implicitly converted to Iterable, so Some(5).take(10) gives you List(5)
[07:22:34] <strcat> eddyb: but *only* making features optional, no changing how stuff works
[07:22:38] <strcat> so we don't need to test the subsets
[07:22:44] <dsrx> it was confusing to see it used in code without understanding that it was doing a swap
[07:22:48] *** Joins: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net)
[07:22:48] *** ChanServ sets mode: +o huon
[07:22:54] <strcat> so using cfg(not(freestanding)) will be forbidden
[07:23:00] <strcat> er
[07:23:02] <strcat> sorry
[07:23:04] <strcat> backwards name
[07:23:14] <strcat> so using cfg(not(some_feature)) will be forbidden *
[07:23:31] <dsrx> bah, the real problem is that english words are overloaded
[07:23:33] <strcat> freestanding build of the stdlib would simply mean building it with fewer features
[07:23:44] *** Joins: rylev (rylev@A692CF2B.BAB8132C.59369754.IP)
[07:23:48] <strcat> but failure and the default allocator can be done via crates
[07:23:57] <strcat> cfg() is too complicated for that, it makes subsets of the library you need to test
[07:24:15] <strcat> I'm only proposing using it for turning features *off*, no switching between stuff
[07:24:49] <eddyb> it won't fly without injection
[07:24:49] *** Quits: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net) (Ping timeout)
[07:24:59] <strcat> I don't see why
[07:25:04] <eddyb> std provides Vec<T, A=DefaultHeap>, what's DefaultHeap?
[07:25:08] <eddyb> how do you change it?
[07:25:18] <strcat> eddyb: you rebuild the stdlib linked against a different libheap
[07:25:22] *** Quits: lpy (lpy@186A8F3A.F09091A8.1348A864.IP) (Client exited)
[07:25:33] <strcat> eddyb: you need to rebuild regardless for it to optimize properly...
[07:26:01] <eddyb> okay, so it's not that different from weak items w/ specialization
[07:26:12] *** Joins: mgottschlag (quassel@moz-AEA0F6B0.hsi6.kabel-badenwuerttemberg.de)
[07:26:14] *** Joins: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no)
[07:26:20] <strcat> but without adding complexity
[07:26:21] <eddyb> (I wouldn't be pushing anything with "weak" in its name if it weren't optimized properly)
[07:26:39] <strcat> if it's optimized properly
[07:26:41] <strcat> you are already rebuilding it
[07:27:05] <eddyb> but, uhm, libheap can't depend on the crate you're using libstd from
[07:27:13] <eddyb> it can't use libstd at all
[07:27:13] *** Joins: Ms2ger (Ms2ger@moz-4A14BC33.ugent.be)
[07:27:21] <strcat> eddyb: right
[07:27:25] <eddyb> this is pretty bad in kernel space
[07:27:41] * strcat shrugs
[07:27:47] <eddyb> while, with Tobba's weak items + my specialization, it would just work
[07:27:49] <strcat> eddyb: I plan on proposing improvements to the unsafe subset of rust
[07:27:57] <eddyb> actually
[07:28:00] <strcat> eddyb: it would 'just work' with complexity added to the language
[07:28:05] <eddyb> strcat: I found a problem, talking to you
[07:28:19] <eddyb> nevermind, it's fine :D
[07:28:29] *** Quits: rylev (rylev@A692CF2B.BAB8132C.59369754.IP) (Client exited)
[07:28:42] <strcat> I want to add back pointer arithmetic operators for pointers
[07:28:44] <eddyb> for a single-crate kernel, the libraries wouldn't be specialized, but rather LTO'd
[07:28:48] <strcat> it just can't implement Add
[07:28:56] <eddyb> strcat: ugh
[07:29:02] <strcat> eddyb: yes but LTO == rebuilding everything
[07:29:18] <strcat> that's where 90% of the time is spent ;p
[07:29:31] <eddyb> strcat: in the case of userspace, you'd only build the specialized libraries once
[07:29:41] <strcat> they'll be tiny compared to libstd
[07:30:01] <eddyb> specialized, e.g. std-green-jemalloc
[07:30:13] <eddyb> you have that, you don't need LTO again
[07:30:22] <strcat> I'm strongly against adding this kind of complexity via language features though
[07:30:30] <strcat> I think we already have the tools needed to solve this problem well
[07:30:49] <eddyb> you need LTO if you have a single-crate kernel since you could be changing things libstd uses, every time
[07:31:00] <eddyb> but there it's not as painful, IMO
[07:31:06] <cmr> against adding what? weak lang items?
[07:31:18] <eddyb> cmr: not only lang items
[07:31:31] <eddyb> but also something like DefaultHeap that other crates can satisfy
[07:31:47] <strcat> cmr: I'm against adding complexity to the language to solve the freestanding/allocator issues
[07:31:48] <strcat> any complexity
[07:31:55] <cmr> ok.
[07:31:58] <strcat> imo rust already has the tools to do this well, it just needs to be carefully thought out
[07:32:13] <strcat> I don't think libprim will work, but it's the right *idea*
[07:32:15] <cmr> I'm willing to trust you on whatever opinions you hold in this area
[07:32:16] *** Joins: doener (doener@moz-C68F600D.unity-media.net)
[07:32:44] <strcat> I'll write a tiny RFC about it
[07:32:45] <cmr> ("willing to trust your judgement" is a better way of phrasing)
[07:32:51] <eddyb> strcat: what tools?
[07:32:59] <cmr> I'm writing up TBAA stuff atm
[07:33:05] <cmr> it's a pain that Freeze is gone
[07:33:13] <eddyb> cmr: no it's not ;)
[07:33:17] <cmr> I think I'm going to introduce it back into typecontents for this optimization
[07:33:22] <cmr> eddyb: what do you mean?
[07:33:28] <eddyb> cmr: you have Unsafe in TC :P
[07:33:36] *** Joins: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net)
[07:33:37] *** ChanServ sets mode: +o huon
[07:33:37] <eddyb> which is the shallow anti-freeze
[07:33:59] <cmr> hm
[07:34:07] <eddyb> (better suited for trans anyways)
[07:34:23] <strcat> imo the two requirements are a) no added language complexity and b) no extra complexity in user-facing libraries
[07:34:28] <strcat> eddyb: crates and cfg()
[07:34:35] *** Joins: lpy (lpy@186A8F3A.F09091A8.1348A864.IP)
[07:34:49] <strcat> crates for switching between allocators, failure vs abort
[07:35:03] <eddyb> (it's what I would need to decide what to make let x = 0; a SSA value while let x = Cell::new(0); would be an alloca)
[07:35:12] <eddyb> strcat: can you have libstd depend on libheap and libheap using libstd?
[07:35:16] <strcat> cfg() for disabling features, allowing different build profiles
[07:35:24] <strcat> eddyb: no, libheap can't use libstd, I don't think that's a problem
[07:35:28] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[07:35:31] <strcat> libheap and libstd also can't use libcollections
[07:35:32] <strcat> where HashMap is
[07:35:42] <eddyb> what you propose is a closed set. which is okay in user space
[07:35:48] <eddyb> but not freestanding
[07:35:58] <strcat> why not?
[07:36:06] *** Quits: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net) (Input/output error)
[07:36:12] *** Joins: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net)
[07:36:13] *** ChanServ sets mode: +o huon
[07:36:20] <cmr> it's not "closed"
[07:36:24] <cmr> you can add whatever crates you want to it
[07:36:46] <strcat> yes you can do w/e you want in your libheap
[07:37:05] <eddyb> except using pretty much any library :P
[07:37:16] <strcat> eddyb: you would be able to build the subset of libstd without memory allocation and use it
[07:37:18] <eddyb> want debug messages? too freaking bad
[07:37:26] <eddyb> strcat: and what, have two libstds?
[07:37:34] <strcat> eddyb: yes, otherwise it is error prone
[07:37:35] <eddyb> how is that better than one specialized libstd?
[07:37:41] <strcat> you may accidentally call a function doing allocation from your allocator
[07:37:51] <strcat> eddyb: it will all be merged by LLVM anyway
[07:37:55] *** Joins: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP)
[07:38:12] <strcat> eddyb: libstd does memory allocation all over
[07:38:28] <strcat> it is not and will not ever be documented whether a function does memory allocation
[07:38:46] <strcat> it wouldn't be very sane to write an allocator while using any piece of libstd internally
[07:39:14] <eddyb> eventually, you're going to split libstd into a million crates
[07:39:17] <strcat> no
[07:39:22] <eddyb> it's just sad
[07:39:29] <strcat> I am not proposing splitting up libstd
[07:39:34] <eddyb> strcat: how else would you use slice methods in libheap?
[07:39:34] <strcat> I'm against having stuff like libprim
[07:39:47] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[07:39:55] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[07:39:55] <strcat> eddyb: by building a libstd (still libstd) without most of the features
[07:40:04] <strcat> --cfg nofloat --cfg noallocation --cfg ...
[07:40:14] <strcat> no splitting
[07:40:27] *** Quits: frozendevil (Adium@moz-A9D8109F.hsd1.wa.comcast.net) (Quit: Leaving.)
[07:40:51] <strcat> that way in early boot you can use libstd
[07:40:59] <strcat> but later on your can use more of libstd
[07:41:02] <strcat> you can use*
[07:41:16] <eddyb> so a million cfgs is not complexity
[07:41:29] <strcat> eddyb: they will be one-way cfgs
[07:41:29] <eddyb> but one weak item is?
[07:41:31] <strcat> yes
[07:41:33] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[07:41:42] <strcat> there will be a lint to forbid using these flags for switching between implementations
[07:41:44] <eddyb> strcat: why do I even bother?
[07:41:54] <strcat> I think this is a good way of doing it
[07:42:22] <strcat> there will always be environments where some parts of libstd don't work
[07:42:25] <Ms2ger> strcat, I think it's clear that you like it :)
[07:42:29] <strcat> floats, memory allocation, etc.
[07:42:44] <strcat> regular users should not be exposed to any of this
[07:42:49] <eddyb> now I'm not only hungry, but also sad. I should go back to littering librustc with &**p because "lel autoref"
[07:42:55] <strcat> this should *only* be something someone using it for freestanding usage has to worry about
[07:43:10] *** Joins: skade (skade@moz-DA43A266.hsi.kabel-badenwuerttemberg.de)
[07:43:13] <strcat> (by disabling features that they can't support)
[07:43:22] <cmr> eddyb: it's about adding complexity to the *language*
[07:43:23] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[07:43:33] <strcat> and yes, I think it will be normal for an OS to use multiple libstd
[07:43:39] <cmr> sure, it's an increase in total complexity.
[07:43:43] <strcat> because in early boot you have different capabilities than later on
[07:43:46] *** Quits: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net) (Ping timeout)
[07:43:50] <strcat> the linux kernel uses a different allocator in early boot
[07:44:05] <strcat> this proposal satisfies that requirement well
[07:44:17] <strcat> you can have an early boot libstd with no allocator or a dumb allocator
[07:44:20] *** Quits: apollow (yellowy432@moz-52F6097D.dhcp.trlk.ca.charter.com) (Quit: )
[07:44:30] <strcat> and then using that, you implement the allocator for the libstd used in the normal code
[07:44:58] <strcat> yes, it will involve a fair bit of generated duplicate code - mergefunc will kill all of it
[07:45:04] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[07:45:28] <strcat> a real OS would be vastly larger than a tiny subset of libstd used in early boot anyway
[07:45:30] <eddyb> strcat: you could still do that with weak items
[07:45:49] <strcat> eddyb: so, what do you do when there are no floats?
[07:45:52] <strcat> and no memory allocation
[07:45:57] <strcat> eddyb: people can still call these functions
[07:46:02] <strcat> do they abort()? that's really ugly
[07:46:15] *** Joins: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net)
[07:46:15] *** ChanServ sets mode: +o huon
[07:46:29] <strcat> rust is all about static checks, and we can prevent usage of functions trying to allocate when there is no dynamic allocation this way
[07:46:30] *** Quits: alkino_ (alkino@moz-B4A66306.w92-151.abo.wanadoo.fr) (Ping timeout)
[07:46:35] <strcat> some environments only have a stack
[07:46:48] *** Joins: apollow (yellowy432@moz-52F6097D.dhcp.trlk.ca.charter.com)
[07:46:58] * strcat shrugs
[07:47:01] <strcat> I'll write this up in an RFC
[07:47:10] <eddyb> strcat: what if std-noheap would disable everything touching the allocation lang items or w/e?
[07:47:18] <eddyb> like cfg, except automatic
[07:47:37] <strcat> so even more language complexity
[07:47:47] *** Joins: pepper_chico (pepper_chi@EB1D9484.8A9E5939.F546FA5F.IP)
[07:47:55] <eddyb> (I gave up on convincing you, just trying to come up with a silver bullet)
[07:48:01] <strcat> where you can accidentally use allocation somewhere and kill a whole tree of calls
[07:48:26] <strcat> someone adds ~ to some function -> 80% of the libstd API is gone for freestanding use
[07:48:34] <strcat> and now how do you find it?
[07:48:42] * strcat shrugs
[07:48:45] *** Quits: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net) (Input/output error)
[07:48:48] *** Joins: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net)
[07:48:48] *** ChanServ sets mode: +o huon
[07:49:16] *** Quits: philix (felipe@moz-AAB39811.user.veloxzone.com.br) (Ping timeout)
[07:49:54] *** Quits: dpc (Mibbit@3CA2DD5F.FAD414BA.D74CC41D.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:50:34] *** Quits: Ms2ger (Ms2ger@moz-4A14BC33.ugent.be) (Ping timeout)
[07:51:18] *** Quits: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net) (Input/output error)
[07:51:21] *** Joins: oxum (anonymous@67DB2C38.BBE46712.520CDC98.IP)
[07:51:30] *** Quits: devbug (quassel@moz-8C40558B.bchsia.telus.net) (Client exited)
[07:51:36] <eddyb> strcat: we'll see how much you love code complexity once I'm done with P ;)
[07:56:15] *** Quits: aurynj (Eon@583ABBE5.60FA2E28.B9E25744.IP) (Ping timeout)
[07:57:30] *** Joins: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net)
[07:57:30] *** ChanServ sets mode: +o huon
[07:57:50] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[07:57:51] *** Quits: mgottschlag (quassel@moz-AEA0F6B0.hsi6.kabel-badenwuerttemberg.de) (Ping timeout)
[07:58:39] *** Joins: m4rw3r (Mibbit@moz-CE42A260.cust.tele2.se)
[07:58:44] <eddyb> strcat: note that I'm not against turning off features using cfg. it's just not flexible enough IMO
[07:58:52] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[07:58:53] *** Quits: TeXitoi (sihem@moz-D37F3D03.eu) (Quit: leaving)
[07:59:10] *** Joins: Ms2ger (Ms2ger@moz-4A14BC33.ugent.be)
[07:59:36] *** Joins: q66 (q66@moz-46D931B3.range86-152.btcentralplus.com)
[08:00:00] *** Quits: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net) (Input/output error)
[08:00:25] *** Quits: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net) (Quit: syatchmenoff)
[08:00:27] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[08:00:29] *** Quits: Amanieu (amanieu@10FEE2FD.ECEF57A4.2CFD4520.IP) (Quit: leaving)
[08:01:31] *** Quits: lpy (lpy@186A8F3A.F09091A8.1348A864.IP) (Connection reset by peer)
[08:02:04] <edwardw> If / once freestanding libstd is done, we can add a tiny os as a test. how sweet is that!
[08:02:43] <eddyb> edwardw: hehe. reminds me how v8 has an OS benchmark
[08:02:43] *** Quits: Doppp (Doppp@moz-6B405134.hsd1.ca.comcast.net) (Quit: leaving)
[08:03:08] <edwardw> is has? cool
[08:03:10] <edwardw> it*
[08:03:52] *** Joins: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net)
[08:03:52] *** ChanServ sets mode: +o huon
[08:06:08] *** Quits: nical (nico@moz-99690620.hinet-ip.hinet.net) (Client exited)
[08:06:39] *** Joins: lpy (lpy@186A8F3A.F09091A8.1348A864.IP)
[08:07:48] *** Quits: yusukesuzuki (yusukesuzu@moz-43160292.net218219047.t-com.ne.jp) (Quit: Tiarra 0.1+svn-39209: SIGINT received; exit)
[08:07:55] *** Quits: edwardw (Mibbit@EE646FE3.EE06708D.4BFBD933.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:08:02] *** Joins: mgottschlag (quassel@moz-AEA0F6B0.hsi6.kabel-badenwuerttemberg.de)
[08:09:20] *** Quits: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net) (Ping timeout)
[08:09:23] *** Joins: yusukesuzuki (yusukesuzu@moz-43160292.net218219047.t-com.ne.jp)
[08:11:49] *** Joins: Amanieu (amanieu@10FEE2FD.ECEF57A4.2CFD4520.IP)
[08:13:38] *** Joins: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net)
[08:13:38] *** ChanServ sets mode: +o huon
[08:14:47] *** Quits: Peng (mnordhoff@moz-D5175E95.mattnordhoff.net) (Ping timeout)
[08:14:52] *** Quits: Ms2ger (Ms2ger@moz-4A14BC33.ugent.be) (Quit: Leaving)
[08:16:09] *** Joins: Peng (mnordhoff@moz-D5175E95.mattnordhoff.net)
[08:16:24] *** Joins: Doppp (Doppp@moz-6B405134.hsd1.ca.comcast.net)
[08:17:03] *** Quits: indirect (indirect_m@moz-A838903C.hsd1.ca.comcast.net) (Ping timeout)
[08:17:35] *** Quits: Doppp (Doppp@moz-6B405134.hsd1.ca.comcast.net) (Quit: leaving)
[08:17:51] *** Joins: Doppp (Doppp@moz-6B405134.hsd1.ca.comcast.net)
[08:18:21] <huon> Yurume: you're far too helpful about rust-the-game posts on /r/rust :P
[08:20:18] *** Quits: alisdair (textual@moz-7E6FA9C4.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:20:38] *** Joins: Ms2ger (Ms2ger@moz-4A14BC33.ugent.be)
[08:21:41] *** Joins: matematikaadit (adit@ABFDF08B.A2994443.10475F6A.IP)
[08:22:07] *** Quits: enos (jkingyens@moz-B0C1B161.hsd1.ca.comcast.net) (Ping timeout)
[08:23:27] *** Quits: matematikaadit (adit@ABFDF08B.A2994443.10475F6A.IP) (Quit: Leaving)
[08:24:17] <Yurume> huon: like, posting a reply 15 seconds after the initial posting? :p
[08:24:29] <Yurume> (no, I wasn't watching for that event)
[08:25:01] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[08:25:27] <huon> Yurume: and sending them to the actual subreddit they should be posting
[08:25:43] * cmr just gets moderately annoyed, reports them, and promptly forgets
[08:25:53] <huon> rather than ignoring it totally/reporting it
[08:25:57] <huon> :P
[08:26:13] <Yurume> ah, is the reporting button for the mods?
[08:26:23] <Yurume> for sending a report to the mods?*
[08:26:37] *** Joins: rylev (rylev@2B2A255D.2EF83B5B.BB1701D8.IP)
[08:26:45] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[08:26:53] *** Quits: rylev (rylev@2B2A255D.2EF83B5B.BB1701D8.IP) (Client exited)
[08:27:02] <huon> yep
[08:27:13] *** Joins: rylev (rylev@2B2A255D.2EF83B5B.BB1701D8.IP)
[08:27:30] *** Joins: W0rmDr1nk (wormdrink@moz-CEAF0263.access.mtnbusiness.co.za)
[08:27:32] <Yurume> well, I should use it instead (and PM them if I feel good)
[08:29:20] <eddyb> haha, this is perfect in case anyone complains about the lack of integer promotion in Rust
[08:29:53] * alan_andrade alan.drop();
[08:32:35] *** Quits: kanru (kanru@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[08:36:18] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Input/output error)
[08:36:50] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[08:37:15] *** Joins: kanru (kanru@moz-DB4A9C19.scl3.mozilla.com)
[08:37:15] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Connection reset by peer)
[08:37:48] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[08:38:23] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:39:29] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Ping timeout)
[08:40:59] *** Quits: trustin (trustin@946D547D.87A02F9E.6FF1C976.IP) (Ping timeout)
[08:42:16] *** Quits: W0rmDr1nk (wormdrink@moz-CEAF0263.access.mtnbusiness.co.za) (Input/output error)
[08:42:17] *** Parts: dougxxx (dougxxx@moz-2801788.perm.iinet.net.au) (Leaving...)
[08:43:14] *** Joins: philix (felipe@moz-AAB39811.user.veloxzone.com.br)
[08:43:31] *** Joins: W0rmDr1nk (wormdrink@moz-CEAF0263.access.mtnbusiness.co.za)
[08:44:02] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[08:45:25] *** Joins: [squiddy] (squiddy@moz-7B493F09.dip0.t-ipconnect.de)
[08:45:33] *** Quits: [squiddy] (squiddy@moz-7B493F09.dip0.t-ipconnect.de) (Quit: Leaving)
[08:45:42] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[08:45:46] *** Joins: Ferreus (ferreus@moz-3B7EA058.dip0.t-ipconnect.de)
[08:45:50] *** Quits: Ferreus (ferreus@moz-3B7EA058.dip0.t-ipconnect.de) (Quit: Ferreus)
[08:46:57] *** Joins: Ferreus (ferreus@moz-3B7EA058.dip0.t-ipconnect.de)
[08:47:42] *** Joins: trustin (trustin@946D547D.87A02F9E.6FF1C976.IP)
[08:50:39] *** Joins: mib_rqxic1 (Mibbit@D03E8BEC.DF82332E.276CF2D2.IP)
[08:51:51] *** Quits: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP) (Ping timeout)
[08:52:27] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[08:54:41] *** Quits: mib_rqxic1 (Mibbit@D03E8BEC.DF82332E.276CF2D2.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:57:02] *** Joins: alonlevy (alon@moz-569A1E59.bb.netvision.net.il)
[08:57:32] *** Joins: pupoque (Adium@297D6F99.EF706C30.C0C64AB3.IP)
[08:58:50] *** dsirenko is now known as EarlGray
[09:00:15] *** Quits: mgottschlag (quassel@moz-AEA0F6B0.hsi6.kabel-badenwuerttemberg.de) (Ping timeout)
[09:00:46] *** Joins: qwerty_nor (Thunderbir@A5447B90.EDC74FC5.E19950A4.IP)
[09:00:58] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Quit: arturo)
[09:02:13] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[09:02:34] *** Quits: kanru (kanru@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[09:02:40] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Quit: arturo)
[09:03:55] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[09:06:28] *** Quits: rylev (rylev@2B2A255D.2EF83B5B.BB1701D8.IP) (Client exited)
[09:07:22] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[09:08:45] *** Joins: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl)
[09:09:37] *** Quits: pepper_chico (pepper_chi@EB1D9484.8A9E5939.F546FA5F.IP) (Quit: WeeChat 0.4.1)
[09:10:19] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Ping timeout)
[09:11:17] *** Quits: vvde (user@A43B0C.55F69189.FD99A9CE.IP) (Ping timeout)
[09:11:24] *** Joins: alonlevy_ (alon@moz-1249FA15.bb.netvision.net.il)
[09:12:17] *** Quits: alonlevy (alon@moz-569A1E59.bb.netvision.net.il) (Ping timeout)
[09:13:09] *** Quits: lpy (lpy@186A8F3A.F09091A8.1348A864.IP) (Client exited)
[09:13:41] *** Quits: W0rmDr1nk (wormdrink@moz-CEAF0263.access.mtnbusiness.co.za) (Ping timeout)
[09:14:19] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 31.0a1/20140330030202])
[09:14:31] *** Quits: Peng (mnordhoff@moz-D5175E95.mattnordhoff.net) (Ping timeout)
[09:15:27] *** Joins: nical (nico@moz-99690620.hinet-ip.hinet.net)
[09:15:46] *** Joins: vvde (user@A43B0C.55F69189.FD99A9CE.IP)
[09:15:55] *** Joins: huon- (huon@moz-EC676DFE.members.linode.com)
[09:16:16] *** Quits: qwerty_nor (Thunderbir@A5447B90.EDC74FC5.E19950A4.IP) (Ping timeout)
[09:17:41] *** Joins: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP)
[09:19:48] *** Joins: Peng (mnordhoff@moz-D5175E95.mattnordhoff.net)
[09:21:13] *** Joins: lucian (lucian@303F9692.4304AE1E.CE5E78F6.IP)
[09:21:20] *** Quits: lucian (lucian@303F9692.4304AE1E.CE5E78F6.IP) (Input/output error)
[09:21:36] *** Quits: m4rw3r (Mibbit@moz-CE42A260.cust.tele2.se) (Quit: http://www.mibbit.com ajax IRC Client)
[09:21:42] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[09:25:18] *** Joins: rylev (rylev@2B2A255D.2EF83B5B.BB1701D8.IP)
[09:25:26] *** Quits: rylev (rylev@2B2A255D.2EF83B5B.BB1701D8.IP) (Client exited)
[09:25:47] *** Joins: rylev (rylev@2B2A255D.2EF83B5B.BB1701D8.IP)
[09:26:29] *** Joins: W0rmDr1nk (wormdrink@moz-CEAF0263.access.mtnbusiness.co.za)
[09:30:54] *** Quits: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net) (Ping timeout)
[09:32:25] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Client exited)
[09:34:45] *** Quits: alonlevy_ (alon@moz-1249FA15.bb.netvision.net.il) (Ping timeout)
[09:35:59] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[09:36:28] *** Joins: aurynj (Eon@583ABBE5.60FA2E28.B9E25744.IP)
[09:38:12] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[09:38:18] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[09:47:08] *** Joins: qwerty_nor (Thunderbir@A5447B90.EDC74FC5.E19950A4.IP)
[09:47:22] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[09:47:22] *** ChanServ sets mode: +o pnkfelix
[09:48:53] <Ms2ger> So... FooTrait::<for T>::bar(); how do you write that today?
[09:49:12] <cmr> you can't, you need to let type inference figure out the Self type somehow.
[09:49:28] <Ms2ger> Hrm
[09:49:41] <pnkfelix> Ms2ger: (e.g. by binding the intermediate expression to a temporary with a type annotation)
[09:49:57] <Ms2ger> bar() returns uint
[09:50:00] <cmr> the canonical workaround, for cases where the trait isn't returning a value of the Self type
[09:50:04] <cmr> is to take a field of Option<Self>
[09:50:07] <cmr> and use None::<T>
[09:50:10] <Ms2ger> Mm
[09:50:51] <Ms2ger> Do you have an issue I can point at?
[09:51:36] <pnkfelix> Ms2ger: (oh sorry, I didn't realize you were calling a static method, duh)
[09:52:17] * cmr doesn't know of one
[09:52:54] *** Joins: m4rw3r (Mibbit@moz-CE42A260.cust.tele2.se)
[09:52:57] *** Quits: pupoque (Adium@297D6F99.EF706C30.C0C64AB3.IP) (Ping timeout)
[09:53:18] *** Quits: philix (felipe@moz-AAB39811.user.veloxzone.com.br) (Ping timeout)
[09:53:51] *** Joins: philix (felipe@moz-AAB39811.user.veloxzone.com.br)
[09:58:26] *** Joins: rustpirate (Mibbit@5A74B1AD.C8DC7926.971E19F6.IP)
[09:59:24] <Ms2ger> Want to file one? :)
[09:59:42] <pnkfelix> Ms2ger: you mean an issue for UFCS ?
[09:59:58] <cmr> oh, I suppose this is handled by UFCS
[10:00:19] <cmr> https://github.com/rust-lang/rfcs/pull/4
[10:00:43] <Ms2ger> I see
[10:00:49] * Ms2ger uses that
[10:01:10] *** Quits: p1start (rewi@moz-E7F3D014.org) (Ping timeout)
[10:04:35] *** Quits: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net) (Quit: huon)
[10:05:09] *** huon- is now known as huon
[10:07:11] *** Joins: mgottschlag (quassel@moz-AEA0F6B0.hsi6.kabel-badenwuerttemberg.de)
[10:08:08] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[10:08:29] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[10:09:51] *** Joins: eibwen (kvirc@moz-6C3E0A2E.dip0.t-ipconnect.de)
[10:11:04] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[10:11:14] *** Quits: rylev (rylev@2B2A255D.2EF83B5B.BB1701D8.IP) (Client exited)
[10:13:26] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[10:13:31] *** Joins: rylev (rylev@2B2A255D.2EF83B5B.BB1701D8.IP)
[10:13:36] *** Quits: rylev (rylev@2B2A255D.2EF83B5B.BB1701D8.IP) (Client exited)
[10:13:57] *** Joins: rylev (rylev@2B2A255D.2EF83B5B.BB1701D8.IP)
[10:14:03] *** Joins: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP)
[10:14:07] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[10:15:38] *** Quits: rylev (rylev@2B2A255D.2EF83B5B.BB1701D8.IP) (Ping timeout)
[10:16:07] *** Parts: voltagex (voltagex@moz-11D4D0E3.voltagex.org) (WeeChat 0.4.3)
[10:16:45] *** pmoore|pto is now known as pmoore
[10:17:05] *** Joins: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de)
[10:20:16] *** Joins: zmack (zmack@EFEB97D9.20AB2BFB.E400A05F.IP)
[10:21:12] <zmack> gentlemen, does there happen to be any documentation around compiling rust with arm support ?
[10:21:17] <zmack> non-android, that is
[10:21:39] *** pmoore is now known as pmoore|TRIBE
[10:22:42] *** Joins: kanru (kanru@moz-DB4A9C19.scl3.mozilla.com)
[10:22:44] *** Quits: skade (skade@moz-DA43A266.hsi.kabel-badenwuerttemberg.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[10:22:49] *** Joins: kvanb (kvanb@moz-797C6BA.lnse5.lon.bigpond.net.au)
[10:23:22] *** Quits: mno2 (mno2@E1E0A0A3.621D86F0.CFF65E33.IP) (Quit: mno2)
[10:25:27] *** Quits: phay_ (phay@16E8BAAB.D2C4A785.91986DB5.IP) (Quit: phay_)
[10:25:33] <lessless> do rust have a garbage collector? 
[10:25:48] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[10:26:15] <strcat> lessless: no
[10:26:30] <strcat> lessless: an optional garbage collector for Gc<T> pointers is planned
[10:26:33] <strcat> but unimplemented
[10:26:46] <lessless> so I need manually delete allocated stuff? 
[10:26:49] <strcat> no
[10:26:56] <lessless> :)
[10:27:03] <strcat> rust has memory safety and automatic resource management without GC
[10:27:09] *** Quits: b (b@moz-55CA322E.org) (Ping timeout)
[10:27:25] *** Joins: b (b@moz-55CA322E.org)
[10:27:32] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[10:27:50] <lessless> for my shame I can't google any article regarding this mechanism, can you help me please? 
[10:28:06] <strcat> it's covered in rust's tutorial
[10:28:13] <lessless> cool!
[10:28:15] <lessless> thank you
[10:28:15] <strcat> destructors, ownership and references
[10:28:38] <strcat> most of the time, everything is owned by a single owner (a variable)
[10:28:52] <strcat> destructors are called when the owner is destroyed (variable going out of scope)
[10:29:08] <rustpirate> zmack : I don't know about non-android, do you mean bare metal arm or arm-linux?
[10:29:12] <strcat> and rust has lightweight references for non-owning views (immutable/mutable)
[10:29:18] <strcat> it prevents dangling pointers via type-checking their lifetimes
[10:29:20] <zmack> rustpirate: arm-linux
[10:29:39] <strcat> lessless: in uncommon cases, where you need shared ownership, you can use Rc<T> - it can represent any non-cyclic ownership graph
[10:30:02] <strcat> lessless: Gc<T> would be necessary only if you had a cyclic graph of objects, without clear ownership
[10:30:36] <strcat> (Rc<T> can still represent a cyclic graph, with Weak<T>, the ownership just can't be a cycle or it would leak)
[10:32:14] *** Quits: benjamin_ (benjamin@moz-C4E134D9.dip0.t-ipconnect.de) (Ping timeout)
[10:33:07] *** Quits: nical (nico@moz-99690620.hinet-ip.hinet.net) (Ping timeout)
[10:33:52] *** Joins: skade (skade@moz-DA43A266.hsi.kabel-badenwuerttemberg.de)
[10:34:03] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[10:34:43] <rustpirate> zmack : You need to compile a rustc that can cross compile to arm, check this link out : https://mail.mozilla.org/pipermail/rust-dev/2014-February/008556.html
[10:35:37] <rustpirate> I tried it a while ago, and don't know if it works still but you just pass an argument to ./configure when you're building rust.
[10:36:09] *** Quits: skade (skade@moz-DA43A266.hsi.kabel-badenwuerttemberg.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[10:36:16] <zmack> rustpirate: gotcha. that looks like just what i was looking for. Thank you so much
[10:36:31] <rustpirate> zmack : no problem, glad to help.
[10:37:17] <NiccosSystem> Is Gc<T> equivalent to the old @?
[10:37:30] <Ms2ger> Morally, yes
[10:37:40] <Ms2ger> (Not sure about details)
[10:37:50] *** Quits: rustpirate (Mibbit@5A74B1AD.C8DC7926.971E19F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:38:30] <strcat> NiccosSystem: no, not really
[10:38:36] <strcat> and Gc<T> is not really implemented yet, it's a stub
[10:38:49] <NiccosSystem> So, what pointers are available now?
[10:39:10] <strcat> NiccosSystem: &, &mut, ~ are the language's pointer types (and raw pointers for low-level code)
[10:39:26] <strcat> the others are just library features
[10:39:47] <NiccosSystem> Ok
[10:39:49] <strcat> Rc<T> + Weak<T> for task-local shared ownership
[10:39:58] <strcat> Arc<T> for cross-task shared ownership
[10:40:19] <strcat> (and eventually, Gc<T> for task-local tracing garbage collection - but it's not implemented)
[10:40:29] <NiccosSystem> Rc = Reference counted?
[10:40:37] <strcat> yes
[10:40:58] <strcat> all the reference counts are explicit though, it has regular move semantics
[10:41:04] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[10:41:16] <strcat> unlike how @ worked
[10:42:08] *** Joins: rylev (rylev@2B2A255D.2EF83B5B.BB1701D8.IP)
[10:42:09] *** Quits: aurynj (Eon@583ABBE5.60FA2E28.B9E25744.IP) (Ping timeout)
[10:43:20] *** Joins: angdev (uid7041@moz-E77DEB21.irccloud.com)
[10:43:21] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[10:43:49] *** Quits: rylev (rylev@2B2A255D.2EF83B5B.BB1701D8.IP) (Ping timeout)
[10:47:00] *** Joins: Rusky1 (russell@moz-37E87AF7.slkc.qwest.net)
[10:47:06] *** Quits: Rusky (russell@moz-37E87AF7.slkc.qwest.net) (Ping timeout)
[10:48:58] <bourbaki> Rc = reference counted?
[10:49:29] <cmr> read 4 lines up.
[10:49:36] <bourbaki> Oh :)
[10:49:44] <cmr> or look at the docs..
[10:49:45] <bourbaki> Sorry i should read everything to the end.
[10:51:31] *** Quits: Ms2ger (Ms2ger@moz-4A14BC33.ugent.be) (Ping timeout)
[10:52:43] *** Quits: philix (felipe@moz-AAB39811.user.veloxzone.com.br) (Ping timeout)
[10:52:45] *** Joins: philix (felipe@moz-C7582C74.user.veloxzone.com.br)
[10:56:21] *** Quits: mgottschlag (quassel@moz-AEA0F6B0.hsi6.kabel-badenwuerttemberg.de) (Ping timeout)
[11:01:21] <benh> http://chrisdone.com/posts/one-step-forward-two-steps-back heh
[11:01:27] <benh> rust 2.0 checklist??
[11:02:22] <eddyb> does it include dependent types?
[11:02:26] *** Joins: rylev (rylev@2B2A255D.2EF83B5B.BB1701D8.IP)
[11:02:27] <benh> yes
[11:02:28] *** Quits: rylev (rylev@2B2A255D.2EF83B5B.BB1701D8.IP) (Client exited)
[11:02:49] *** Joins: rylev (rylev@2B2A255D.2EF83B5B.BB1701D8.IP)
[11:02:52] <strcat> benh: please no
[11:02:54] <eddyb> I wish we could check off those things that we have
[11:02:58] *** Joins: sankha93 (sankha93@7061CD01.D6BD0D91.22D41759.IP)
[11:03:00] <strcat> good language design != adding every possible feature
[11:03:02] <strcat> see: C++, Scala
[11:03:36] <strcat> simply adding everything instead of trying to come up with orthogonal features is awful
[11:04:37] *** Joins: mgottschlag (quassel@moz-AEA0F6B0.hsi6.kabel-badenwuerttemberg.de)
[11:04:39] <eddyb> "Infinite-sized integers and rationals"
[11:04:50] <eddyb> to be used with Infinite (TM) RAM
[11:04:57] <strcat> imo rust will be a failure if it has GADTs, trait objects, inheritance and enums (+ refinement types)
[11:05:02] <strcat> that's too much to expect people to learn
[11:05:06] <strcat> they'll use subsets of the language
[11:05:09] <strcat> C++/Scala all over again
[11:05:11] <benh> I kind of see where the author is coming from and I think it's an interesting notion to compare language features to car features
[11:05:39] <eddyb> strcat: well, if you remove inheritance, and note that GADTs are an extension of enums...
[11:05:47] *** Joins: willingc (willingc@moz-F095E013.san.res.rr.com)
[11:05:58] <strcat> eddyb: sure, now you're talking about making features that are orthogonal
[11:05:59] <eddyb> refinement types would be crazier than GADTs
[11:06:03] <strcat> it doesn't mean you need to add everything though
[11:06:08] <benh> yeah
[11:06:58] <benh> re: expecting people to learn, if all new languages had all/most those features, people would already have learned them ;)
[11:07:10] <strcat> this is just someone's list of pet features that *they* care about anyone
[11:07:24] <strcat> note that there's no mention of destructors or other systems language features
[11:07:33] <strcat> s/anyone/anyway/
[11:07:40] <eddyb> strcat: I thought GADTs would be easy, but then I realized it adds type pattern matching to the language
[11:07:42] <strcat> benh: doubtful.
[11:07:54] <strcat> benh: very few scala/c++ programmers know more than a small subset of the language
[11:08:21] <cmr> schools are still teaching java and c++98, talk about stone-age language design.
[11:08:26] <lucian> they have absurd amounts of features, that way madness clearly lies
[11:08:27] <strcat> I only know a subset of c++, and I know quite a bit about it
[11:08:28] <cmr> ;p
[11:08:32] <strcat> cmr: they teach a small subset of C++98
[11:08:35] <cmr> yeah
[11:08:37] <eddyb> e.g. I thought I knew a lot of things about C++ but I had to find out from #rust that C++ has HKT
[11:08:41] <cmr> and java too
[11:08:44] <eddyb> strcat: cin/cout to be precise :P
[11:08:46] <strcat> java isn't that big
[11:08:53] <eddyb> everything else is almost K&R
[11:08:55] <strcat> not a small language, but it's not huge
[11:08:59] <strcat> C++98 is enormous, C++11 is more so
[11:09:18] <strcat> really, good luck finding a C++ programmer who understands forwarding and rvalue references well
[11:09:20] <strcat> I don't
[11:09:40] <eddyb> forwarding? I barely knew what to do in move ctors/operators
[11:09:41] <benh> just add more &&
[11:09:43] <strcat> (and that's just one subset of the features)
[11:09:59] <eddyb> strcat: I despise teaching algorithms on a subset of C++
[11:10:11] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[11:10:12] <strcat> eddyb: std::move/std::move_if_noexcept/std::forward/std::forward_as_tuple are ways of playing with them
[11:10:19] <strcat> eddyb: can use them directly
[11:10:31] <strcat> they're concepts built on C++'s weird references
[11:10:33] <eddyb> almost every non-trivial program my classmates were writing was vulnerable
[11:10:57] <strcat> scala is more complex than c++
[11:10:58] <eddyb> they were using global arrays because they came pre-filled with 0
[11:11:02] <strcat> it's way safer
[11:11:04] <strcat> but it's more complex
[11:11:05] <eddyb> it was... demoralizing
[11:11:23] <strcat> I am worried about rust taking the scala path
[11:11:31] <benh> anyway, I'm mostly reading that blog post as "please don't make your new language just Java/C/javascript plus your one new pet feature"
[11:12:19] <eddyb> "As a follow-up post I might make a matrix of the top, say, 30, general purpose programming languages and all the features that they tick off."
[11:12:24] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Ping timeout)
[11:12:25] <eddyb> benh: ping me when they do :P
[11:12:47] <benh> I'll try :)
[11:14:43] <eddyb> strcat: if you want to use a subset of a language to teach algorithms... I'd strongly recommend Rust above C++
[11:15:16] <eddyb> while(*s++) to iterate on a char* in 2013 *shudders*
[11:15:35] <strcat> eddyb: that's not really a good example
[11:15:38] <strcat> you could do the same in rust
[11:15:51] <strcat> and it's not how modern C++ is written (which doesn't use C strings)
[11:16:41] <eddyb> strcat: well, the only parts of C++ they were using were cin/cout (and I guess the file streams)
[11:16:59] <strcat> the worst parts of the C++ stdlib
[11:17:08] <strcat> written before templates existed
[11:17:40] <eddyb> that would explain a few things :P
[11:18:07] <strcat> fstream doesn't allow proper error handling at all
[11:18:16] <strcat> it just tells you 'good', 'bad', 'fail', 'eof'
[11:18:18] <strcat> useless
[11:18:20] *** Joins: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP)
[11:18:30] <strcat> and it's such a terrible overload of << and >> ;\
[11:18:41] <eddyb> good, bad, evil and ugly?
[11:18:48] <strcat> eddyb: you could make a type-safe format string lib in C++11/C++14
[11:19:15] <strcat> good example of why including crappy stuff in the stdlib is bad
[11:19:18] <strcat> you can never take it back
[11:19:29] <strcat> (at least not without a lot of pain: see python3)
[11:19:32] <eddyb> strcat: yeah, I know, the C++0x article on wikipedia used something like that as the usecase example for variadic templates
[11:20:16] <strcat> I want to start on why.md
[11:20:18] <strcat> for rust
[11:20:23] <strcat> why features are/aren't included, etc.
[11:20:31] <strcat> so I can link to that instead of explaining every time ;p
[11:20:36] <eddyb> strcat: y u do dis?
[11:20:43] <huon> I'm sure pcwalton would like that too
[11:24:15] *** Joins: dmsky (dmsky@moz-FF2573B1.pppoe.spdop.ru)
[11:24:42] <strcat> the tip4commit thing really annoys me
[11:24:48] <strcat> seems like such a money grab by tip4commit
[11:24:55] <eddyb> haha? I never check my mail
[11:24:59] *** Quits: luz (lu.cy@moz-CD18B14B.customer.cdi.no) (Quit: 04←)
[11:25:03] <eddyb> do I have two cents now, I wonder?
[11:25:03] <strcat> someone gives 50 dollars to it and it chops it up into tiny little pieces
[11:25:07] <strcat> and doesn't let anyone withdraw it
[11:25:09] <strcat> eddyb: doubt it
[11:25:14] <strcat> eddyb: fraction of a cent they don't let you withdraw
[11:25:16] <strcat> woo
[11:25:21] <eddyb> strcat: I had one cent last time I checked
[11:25:27] <strcat> lol
[11:26:04] <eddyb> might have changed given how volatile bitcoins are *sigh*
[11:26:13] *** Joins: luz (lu.cy@moz-CD18B14B.customer.cdi.no)
[11:26:57] <benh> So they outright keep 5% of donated bitcoins and pay out 1% of the balance for each commit?
[11:29:04] *** Joins: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com)
[11:29:53] <strcat> benh: something like that, and there's a minimum withdrawal balance
[11:29:59] <strcat> scam imo
[11:30:04] <strcat> they know most people won't ever withdraw
[11:30:08] <strcat> they really keep 99% of the money
[11:30:19] *** Quits: mgottschlag (quassel@moz-AEA0F6B0.hsi6.kabel-badenwuerttemberg.de) (Ping timeout)
[11:30:20] <strcat> scam or poorly thought out idea ;p
[11:30:52] <benh> Then it's a clever scam because it banks on the naivety of bitcoin holders regarding whether non-bitcoin-holders are ever going to bother withdrawing :V
[11:31:18] <strcat> I own bitcoins and yet I'm never going to withdraw my 20 cents worth from that site
[11:31:28] <dmsky> rusti: trait A<T>{}; trait B{}; trait C{}; impl<S: A<T>, T: B> C for S {};
[11:31:31] -rusti- <anon>:11:45: 11:75 error: cannot determine a type for this bounded type parameter: unconstrained type
[11:31:31] -rusti- <anon>:11         trait A<T>{}; trait B{}; trait C{}; impl<S: A<T>, T: B> C for S {};
[11:31:32] -rusti-                                                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[11:31:32] -rusti- playpen: application terminated with error code 101
[11:31:49] <dmsky> trait A<T>{}; trait B{}; trait C{}; impl<T: B, S: A<T>> C for S {};
[11:32:10] <dmsky> rusti: trait A<T>{}; trait B{}; trait C{}; impl<T: B, S: A<T>> C for S {};
[11:32:11] -rusti- ()
[11:32:53] <eddyb> dmsky: resolve lets you use T from "ahead" but its bounds aren't taken into consideration or something :S
[11:33:13] *** Joins: rootnode (rootnode@moz-5F68F7DF.pools.arcor-ip.net)
[11:33:43] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[11:34:41] <benh> Can you still implement a trait A<T> only once with one T for a given type?
[11:35:10] <SiegeLord> Alright, time to make my C library intialization thread-safe... somebody showed me a good example of that a few months ago :/
[11:35:16] <dmsky> eddyb: should my first example work in principle?
[11:35:19] <SiegeLord> I didn't save it >_<
[11:35:23] *** Quits: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de) (Connection reset by peer)
[11:35:30] <dmsky> eddyb: i.e., is this just a bug?
[11:35:51] <eddyb> dmsky: mmaybe. in any case, if it's not allowed, the error should be stronger
[11:36:15] <eddyb> benh: I think so
[11:36:23] <cmr> SiegeLord: glfw-rs is thread-safe now, and is a relatively good example of what needs o be done.
[11:36:36] *** Quits: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP) (Quit: 전 이만 갑니다.)
[11:36:55] *** Joins: jiojiajiu (jiojiajiu@moz-7455BF89.revip7.asianet.co.th)
[11:36:55] <bjz_> cmr: well, not the monitor API
[11:37:11] <bjz_> cmr: but the rest of it is ok... I think :/
[11:37:20] <SiegeLord> It looks like there's some sort of 'Once' type
[11:37:50] <SiegeLord> That's better than I remember, you used to have to use atomics directly
[11:38:11] <dmsky> eddyb: thanks.
[11:38:27] *** Joins: Earnestly (earnest@moz-6CD1AB70.dyn.plus.net)
[11:38:41] <benh> Do you still need to override start?
[11:38:50] <SiegeLord> What does glfw do when you call init twice?
[11:39:05] <SiegeLord> glfw-rs
[11:39:07] <bjz_> SiegeLord: returns Err
[11:39:46] <SiegeLord> How do you detect that?
[11:39:54] <SiegeLord> Ah, I see it
[11:40:02] <SiegeLord> That works, I guess
[11:40:08] <SiegeLord> Yoink
[11:40:08] <bjz_> https://github.com/bjz/glfw-rs/blob/master/src/lib/lib.rs#L374-L375
[11:40:11] <bjz_> :D
[11:40:27] <bjz_> feel free
[11:40:30] *** Joins: bollu (bollu@31CCE710.7065DDB9.6D6A344F.IP)
[11:40:45] <bjz_> :)
[11:41:04] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[11:42:36] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[11:43:22] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[11:43:37] <bollu> does std::vec.map() return a Vec or a ~[] ? it seems to be returning a ~[]
[11:43:48] <bollu> std::vec::Vec*
[11:43:55] <cmr> bollu: Vec::map has been removed, don't remove it
[11:43:56] <cmr> *use it
[11:43:57] *** Joins: skade (skade@moz-DA43A266.hsi.kabel-badenwuerttemberg.de)
[11:43:59] <eddyb> lol
[11:44:05] <cmr> bollu: use the stuff on Iterator
[11:44:09] <eddyb> cmr: don't kill the undead
[11:44:12] <bollu> cmr: ah. will do. 
[11:44:47] <Havvy> .iter().map().collect()
[11:45:10] <bollu> Havvy: thank you. I was going to ask about the weird return type of map()
[11:45:52] <Havvy> If Vec::map() has been removed, can we get it back as doing those three above calls?
[11:46:49] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[11:46:51] <strcat> Havvy: no
[11:46:58] <Havvy> Actually, that'd probably get people to write  some_vec.map(...).filter(...) instead of some_vec.iter().map(...).filter(...).collect() and turn a O(n) into O(2n). :/
[11:47:08] <SiegeLord> Why is it doit and not do_it >_<
[11:47:31] <bollu> fn map<'r, B>(self, f: 'r |A| -> B) -> Map<'r, A, B, Self> what's the A? (I presume the iterator type?) 
[11:47:54] <cmr> Havvy: that is what it did before.
[11:47:57] <strcat> bollu: yes, it's listed on the impl
[11:48:03] <strcat> impl<A> Iterator<A> { ... }
[11:48:11] <bollu> strcat: my bad. wasn't looking at it :)
[11:48:15] <cmr> Havvy: it's removed because it's stupid and conflicts with future Iterable changes
[11:48:41] <strcat> methods like that should be a) in-place or b) return lazy iterators
[11:48:49] <strcat> rust shouldn't encourage inefficient patterns like that
[11:48:54] <strcat> collect is not meant to feel good
[11:49:04] <strcat> you should consider doing something else instead of collect
[11:49:18] <Havvy> You have to .collect() or .reduce() at some point though.
[11:49:23] <strcat> no, you don't
[11:49:30] <bollu> strcat: hmmkay
[11:49:48] <strcat> Havvy: for loops operate on iterators, not vectors
[11:49:53] <strcat> and iterators are more than sequential traversal
[11:50:23] <SiegeLord> Oh drat, 'once' is a keyword looks like?
[11:50:24] <bollu> strcat: do you think iterators do /too/ much?
[11:50:29] <strcat> bollu: no
[11:50:36] <strcat> iterators don't do enough yet
[11:50:49] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[11:50:53] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[11:51:01] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[11:51:04] <strcat> rust doesn't give you the tools to abstract over different random-access data structures
[11:51:11] <strcat> slices are not at all generic
[11:51:18] <eddyb> strcat: what would you think about extending the Iterator API to allow feeding values to next, like generators?
[11:51:23] *** Joins: alonlevy_ (alon@moz-EB7C9CF3.telavivmakers.org)
[11:51:29] <strcat> eddyb: s/generators/coroutines/
[11:51:31] <strcat> and no
[11:51:38] <eddyb> why coroutines?
[11:51:41] <cmr> SiegeLord: yeah, from `once fn`
[11:51:49] <eddyb> cmr: whence fn
[11:51:50] <bollu> strcat: so... visitor basically? 
[11:51:54] <strcat> eddyb: generators don't take values to next
[11:51:57] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[11:52:02] <strcat> generator would mean sugar for writing for loops
[11:52:04] <strcat> er
[11:52:07] <strcat> s/for loops/iterators/
[11:52:07] <SiegeLord> I though 'once fn's were gone :/
[11:52:10] <strcat> bollu: not sure what you mean
[11:52:23] <eddyb> strcat: don't python generators give a value back from yield?
[11:52:25] <cmr> SiegeLord: the keyword is still reserved
[11:52:30] *** Joins: asmyers (quassel@783EA696.9A737B8F.FAA4474F.IP)
[11:52:36] <bollu> strcat: so iterator is kinda like the visitor pattern? abstracts over access?
[11:52:42] <strcat> eddyb: that's what makes them coroutines now
[11:52:51] <eddyb> strcat: odd
[11:53:05] <eddyb> ES6 "generators" are coroutines after your definition
[11:53:15] <strcat> eddyb: https://docs.python.org/3.4/library/asyncio-task.html
[11:53:33] <eddyb> but they are not coroutines in the sense that their state freezing doesn't propagate through function calls
[11:53:51] <strcat> eddyb: http://legacy.python.org/dev/peps/pep-0342/
[11:53:53] <eddyb> I've seen coroutines somewhere, and it was pretty much green tasks
[11:54:16] <bollu> why does Vec not have constructor that takes &[] ?
[11:54:29] <cmr> bollu: it does, from_slice
[11:54:45] <cmr> should really just use .iter().collect() imo
[11:54:45] <strcat> often inefficient though
[11:54:55] <strcat> it uses that internally
[11:54:59] <strcat> calls clone on each element
[11:55:06] <strcat>     pub fn from_slice(values: &[T]) -> Vec<T> {
[11:55:08] <bollu> cmr: ty. 
[11:55:08] <strcat>         values.iter().map(|x| x.clone()).collect()
[11:55:30] <eddyb> strcat: `y = yield from x` seems to be different than `y = yield x`
[11:55:57] <Havvy> error: instantiating a type parameter with an incompatible type `sync::lock::Mutex<*world::World>`, which does not fulfill `Send+Share`  I was told this type was the workaround to https://github.com/mozilla/rust/issues/13125
[11:55:58] <strcat> eddyb: yield from foo() is just 'for x in foo(): yield x' with proper exception handling
[11:56:26] <strcat> eddyb: and it gives you the final result
[11:56:27] <eddyb> strcat: oh, so like `yield* x` in ES6?
[11:56:33] <strcat> eddyb: I guess
[11:56:40] *** Quits: Ferreus (ferreus@moz-3B7EA058.dip0.t-ipconnect.de) (Ping timeout)
[11:56:57] <strcat> eddyb: python iterators throw StopIteration when they're done and can hand you a value through that
[11:57:00] <eddyb> so you can either have `yield x` with no result or `y = yield* x`?
[11:57:26] <strcat> no
[11:57:31] *** Joins: io2 (io2@moz-EE406A5.home.otenet.gr)
[11:57:37] <strcat> eddyb: read the link I posted
[11:57:42] <eddyb> I read it
[11:57:53] <strcat> that was before yield from existed
[11:58:01] <eddyb> it doesn't mention yield (not `yield from`) in the context of coroutines
[11:58:09] <strcat> not that link
[11:58:11] <strcat> the other
[11:58:13] <strcat> http://legacy.python.org/dev/peps/pep-0342/
[11:58:21] <eddyb> (sorry)
[11:58:41] *** Quits: thesnowdog (doug@E8B162D2.CDB23781.6F17036B.IP) (Connection reset by peer)
[11:58:43] *** Joins: ganitsu (ganitsu@moz-C151274C.dialup.adsl.anteldata.net.uy)
[11:58:53] <eddyb> strcat: send(value) instead of next()?
[11:58:55] <strcat> it's out-of-date now though
[11:58:58] <strcat> eddyb: yes
[11:59:01] *** Joins: lunaryorn (lunaryorn@moz-7E851DA2.dynamic.mnet-online.de)
[11:59:26] <eddyb> too bad that model doesn't really work in Rust
[11:59:34] <eddyb> without having two distinct APIs
[11:59:54] <SiegeLord> Oh drat, can't have a global mutex
[12:00:09] <det> eddyb, HKT ?
[12:00:19] <cmr> SiegeLord: did you see kimundi's macro for lazy initialization?
[12:00:34] <eddyb> strcat: trans needs to be generic over a certain kind of transform
[12:00:35] <SiegeLord> No, but what does it do?
[12:00:36] <strcat> eddyb: http://sprunge.us/dFQT see? coroutine
[12:00:40] <pnkfelix> det: HKT == Higher Kinded Types
[12:00:48] <det> oh, template templates
[12:00:54] <eddyb> lol
[12:00:55] <strcat> eddyb: bad example but meh
[12:00:56] *** Joins: rylev_ (rylev@2B2A255D.2EF83B5B.BB1701D8.IP)
[12:01:15] <det> dunno if id call those HKT, C++ templates arent really typed
[12:01:29] <strcat> templates are typed
[12:01:37] <eddyb> strcat: something like an iterator that takes &'a Block<'a> in and returns &'a Block<'a>, for every value
[12:01:46] *** Quits: rylev (rylev@2B2A255D.2EF83B5B.BB1701D8.IP) (Ping timeout)
[12:01:49] <eddyb> strcat: right now I have an iterator and a closure :/
[12:01:50] <det> strcat, rvalue refs and forwarding isnt really complicated
[12:02:02] <SiegeLord> cmr: It appears to leak?
[12:02:09] <det> strcat, not really, you cannot type check a template
[12:02:22] <strcat> det: sure, but they are still typed
[12:02:28] <strcat> they aren't type checked from the definition
[12:02:34] <strcat> they are type checked on expansion
[12:02:43] <strcat> and instantiated templates are certainly typed
[12:02:44] <zmack> So it looks like rustc head is trying to use cc as a linker. Is there any flag that would allow me to override that? --linker doesn't work, and that's what i'm finding in old documentation
[12:02:49] <det> sure
[12:02:53] <cmr> zmack: -C linker
[12:03:11] <det> c++ templates are duck typed
[12:03:24] <det> much like Python functions are duck typed
[12:03:35] <strcat> except for the SFINAE / pattern matching part ;p
[12:04:00] <zmack> cmr: lovely, thank you
[12:05:59] <SiegeLord> I see... looks like I can Arc up the Mutex and do it that way...
[12:07:26] *** Joins: heftig (heftig@moz-81A104E1.dip0.t-ipconnect.de)
[12:07:49] <strcat> SiegeLord: there was in a bug in Arc recently fixed
[12:07:54] <strcat> at some point it started leaking
[12:07:54] <cmr> SiegeLord: did you find it? I looked and couldn't find it :(
[12:08:15] <SiegeLord> https://gist.github.com/Kimundi/8782487
[12:08:26] <SiegeLord> But I'm not doing it that way anymore, as I don't like it
[12:08:41] <strcat> heh
[12:08:48] <SiegeLord> I already have a struct I force the user to create, so I'll stick the ArcMutex there
[12:09:01] <strcat> static int x = non_constexpr_function(); // C++ :P
[12:09:13] <SiegeLord> ::shudder::
[12:09:19] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[12:09:28] <eddyb> __cxa_guard_acquire
[12:09:47] <SiegeLord> I see a bug because of that every few weeks
[12:09:51] *** Joins: mgottschlag (quassel@moz-AEA0F6B0.hsi6.kabel-badenwuerttemberg.de)
[12:10:25] <strcat> at least it provides a way of doing thread-safe lazy init of statics
[12:10:36] <SiegeLord> Usually static SomeClass foo;
[12:12:09] <SiegeLord> Is something wrong with the documentation at rust-lang.org? I'm not seeing methods
[12:12:36] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[12:12:43] <cmr> SiegeLord: yeah.
[12:12:56] <cmr> the doc builders were broken ... a while ago.
[12:13:10] <cmr> rustdoc has been fixed since, but no new docs have been uploaded :\
[12:13:37] *** Joins: Ferreus (ferreus@moz-EDB087F2.dip0.t-ipconnect.de)
[12:14:06] <SiegeLord> Must be why I still see Pod in a few places
[12:14:33] <SiegeLord> Maybe the builders need to be rewritten in Rust
[12:15:17] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Ping timeout)
[12:16:08] *** Joins: benjamin_ (benjamin@moz-C4E134D9.dip0.t-ipconnect.de)
[12:16:49] *** Joins: aurynj (Eon@583ABBE5.60FA2E28.B9E25744.IP)
[12:20:16] *** Quits: rylev_ (rylev@2B2A255D.2EF83B5B.BB1701D8.IP) (Client exited)
[12:21:51] <lessless> my colleague asked if it's only to him rust looks like a javascript in a different interpretation? :) 
[12:22:37] *** Joins: rylev (rylev@2B2A255D.2EF83B5B.BB1701D8.IP)
[12:23:01] <SiegeLord> What was the attribute for tls statics?
[12:23:04] <cmr> lessless: I hope so :p
[12:23:08] <cmr> SiegeLord: #[thread_local]
[12:23:11] <lessless> he he
[12:23:23] <SiegeLord> Sweet
[12:23:25] <dsrx> lessless: i was writing some rust in a coffee shop last night and a stranger asked me if I was writing JS
[12:23:31] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Connection reset by peer)
[12:23:32] <eddyb> JS is ugly
[12:23:36] <eddyb> fn >>> function
[12:23:43] <dsrx> which was an odd guess, I thought, but maybe not
[12:23:47] *** huon is now known as huon|afk
[12:24:27] *** Joins: Ms2ger (Ms2ger@moz-4CB19774.adsl-dyn.isp.belgacom.be)
[12:24:50] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[12:26:00] <lessless> btw, es6 introduce let keyword :D 
[12:26:01] *** Parts: IanCormac84 (User@D1ECE5F7.64D641E5.67DFF8B4.IP) ()
[12:26:19] <lessless> and dashrockets :) 
[12:26:21] <lessless> too
[12:26:36] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[12:27:10] *** Joins: ahunt (ahunt@moz-6D6D79D6.cable.virginm.net)
[12:27:16] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Connection reset by peer)
[12:27:38] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[12:28:35] <cmr> the syntax isn't new :p
[12:29:09] *** Joins: LU324 (asdf@moz-864C7465.dyn.embarqhsd.net)
[12:29:25] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[12:30:40] <det> strcat, what c++ features are not orthogonal ?
[12:30:53] <strcat> det: nearly all of them? ;p
[12:30:55] <strcat> C arrays
[12:31:03] <det> what about them
[12:31:11] <det> they overlap with what
[12:31:21] <strcat> std::array<T, n> 
[12:31:48] <det> C arrays are used to implement std::array
[12:32:07] *** Quits: Mowah (Mowah@moz-8548F376.cust.bredbandsbolaget.se) (Ping timeout)
[12:32:08] <eddyb> C arrays are bad because half the time they are pointers and something like [[[T]]] isn't supported :/
[12:32:15] <det> thats like calling std::unique_ptr and t * non orthogonal
[12:32:21] <det> C arrays suck, no dispute
[12:32:25] <det> you should never use them
[12:32:49] <det> I find that most of the featureset of c++ is high orthogonal
[12:32:54] <strcat> det: so why did they add features like std::begin/std::end solely to support C arrays?
[12:33:02] <strcat> + they recently added variable length C arrays
[12:33:05] <Ms2ger> Did I join #c++?
[12:33:12] <zmack> hm, anyone run into this sort of issue when cross-compiling to arm ?
[12:33:20] <eddyb> Ms2ger: #strcat-shows-you-how-shit-c++-is
[12:33:23] <zmack> note: arm-linux-gnueabi-ld: unrecognised emulation mode: arm
[12:33:24] <zmack> Supported emulations: armelf_linux_eabi armelfb_linux_eabi
[12:34:01] <det> brb
[12:34:29] *** Quits: jiojiajiu (jiojiajiu@moz-7455BF89.revip7.asianet.co.th) (Ping timeout)
[12:35:27] <bourbaki> Will Rust get some kind of dependent typing for arrays and the lot? So you can have fixed size types?
[12:35:27] <SiegeLord> Every time somebody makes some claim about implementation of a C++ type I am compelled to look at the source... only to realize that it's impossible to tell
[12:35:41] <strcat> bourbaki: doesn't require dependent typing
[12:35:47] <eddyb> bourbaki: Rust will likely never have dependent typing
[12:35:48] <bourbaki> Uh?
[12:35:53] <strcat> associated types and integers as type parameters != dependent typing
[12:36:00] <strcat> associated constants*
[12:36:07] <bourbaki> How is that different?
[12:36:23] <eddyb> dependent typing requires some kind of erasure IIRC
[12:36:28] <strcat> bourbaki: dependent typing means you can have associated values at *runtime*
[12:36:29] <bourbaki> Well ok its just a subset i guess.
[12:36:39] <kimundi> bourbaki: dependent typing is if you turn a value into a type. integers as type paramters is if the value is a type to begin with.
[12:36:43] <bourbaki> Ah ok, that makes sense.
[12:36:49] <eddyb> named lifetimes are more like dependent types than [T, ..N] :P
[12:36:57] <bourbaki> I was missing the runtime issue.
[12:37:35] *** Joins: thesnowdog (doug@E8B162D2.CDB23781.6F17036B.IP)
[12:37:36] <bourbaki> So the proper name for this is associated type/constants?
[12:38:00] <eddyb> bourbaki: associated items
[12:38:05] <bourbaki> Ok
[12:38:12] <strcat> well associated constants is a lot more specific
[12:38:43] <bourbaki> Items is the hyperonym for value and type here?
[12:39:00] <kimundi> associtaned items include associated constants, types, functions
[12:39:09] <bourbaki> Ah i see.
[12:39:20] <strcat> where associated functions == methods ;p
[12:39:25] <bourbaki> :)
[12:39:28] <kimundi> struct Foo; impl Foo { fn bar() } // This is a associated function
[12:39:31] <strcat> first class methods though, where methods are functions
[12:39:39] <strcat> kimundi: methods will be too
[12:39:46] <strcat> non-static methods
[12:39:48] <kimundi> Sure
[12:39:51] *** Quits: rylev (rylev@2B2A255D.2EF83B5B.BB1701D8.IP) (Client exited)
[12:39:53] <strcat> they aren't yet though
[12:40:22] <strcat> Vec::push will be a function taking &mut Vec<T> (since it takes &mut self)
[12:40:37] <kimundi> yup, ufcs
[12:40:47] <bourbaki> ufcs :)?
[12:40:49] <strcat> it's not just about syntax though
[12:40:53] <strcat> in D it is
[12:40:59] <strcat> I think it's a bit of a misnomer to use the term in rust
[12:41:02] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[12:41:04] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[12:41:06] <strcat> in rust it's about making methods into real functions
[12:41:19] <bourbaki> Whats the difference?
[12:41:20] <strcat> in D UFCS is syntax - it means being able to call free functions as methods
[12:41:36] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[12:41:37] <bourbaki> Between a function and a mehtod i mean
[12:41:45] *** Joins: IanCormac84 (User@D1ECE5F7.64D641E5.67DFF8B4.IP)
[12:41:54] <strcat> bourbaki: methods are associated with a specific type
[12:41:56] <Yoric> What's the idea? Passing |this| as an argument?
[12:41:59] <strcat> and non-static methods aren't values
[12:42:00] <strcat> atm
[12:42:06] <bourbaki> Ah ok
[12:42:09] <Yoric> Ah, static methods.
[12:42:13] <strcat> there's no way to get the value of a non-static method
[12:42:24] <bourbaki> Like std::bind in c++?
[12:42:26] <strcat> but there will be - that's what's going to change
[12:42:38] <strcat> bourbaki: I'm not really sure what bind has to do with it :)
[12:42:49] <bourbaki> Is that along the same lines of the unboxed lambda problem?
[12:42:50] <strcat> C++ allowed getting the function ptr for a method in C++98
[12:42:54] <strcat> bourbaki: no
[12:43:15] <strcat> atm rust doesn't provide a way to access a method as a value (function) - that's all
[12:43:18] <det> strcat, I dont know if solely is fair, but C++ has to support things like C arrays even if you should not use them
[12:43:21] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[12:43:48] <det> strcat, std::begin is a tool for generic code that has to support any type
[12:44:00] <strcat> det: specifically added because C arrays don't work with the method
[12:44:02] <det> VLAs didnt make it in C++14
[12:44:12] <strcat> det: some parts did, didn't they?
[12:44:13] <bourbaki> VLAs?
[12:44:14] *** jorendorff_away is now known as jorendorff
[12:44:14] <strcat> just not dynarray, etc.
[12:44:51] <det> strcat, dont think so
[12:44:51] <strcat> bourbaki: the c99 standardization of alloca, variable length arrays
[12:44:59] <det> maybe im wrong
[12:46:10] * strcat just hopes none of the object inheritance proposals ever makes it into stable rust ;\
[12:46:11] *** Quits: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca) (Connection reset by peer)
[12:46:24] <bourbaki> Why?
[12:46:41] <strcat> speaking of non-orthogonal features...
[12:46:43] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[12:47:09] <strcat> we already have traits, usable both for static dispatch via bounds on generics and dynamic dispatch via trait objects
[12:47:12] <strcat> and there's trait inheritance
[12:47:15] <strcat> and default methods
[12:47:48] <strcat> so I think it's fairly obvious that object inheritance is *very* non-orthogonal, even if some people want it to make certain patterns you could do with trait objects more efficient
[12:48:29] <eddyb> strcat: I'd rather expose those optimizations as part of traits
[12:48:47] <eddyb> want a different layout because it matters for you? sure, just add this annotation
[12:48:52] <strcat> and optional/keyword parameters would be pretty non-orthogonal with partial application and composable option objects
[12:49:14] <strcat> enums and trait objects *already* been quite non-orthogonal
[12:49:17] *** Joins: Sorella (quildreen@AA4589ED.97245BEB.1ED99692.IP)
[12:49:18] <strcat> there's a lot of usage overlap
[12:50:24] <bourbaki> Would it be so bad if its based on features of the core language?
[12:50:29] <strcat> some libraries will use trait objects where others would have used enums - that's bad, people are using subsets of the same language based on their background
[12:50:30] <strcat> bourbaki: yes
[12:50:42] <strcat> I don't plan on using rust if it adopts this laundry list of features
[12:50:57] <bourbaki> Hm yeah
[12:51:14] <strcat> throw in inheritance to the mix and you have people using a completely different subset of the language
[12:51:27] <bourbaki> True but wont that happen anyway?
[12:51:30] *** Joins: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca)
[12:51:47] <strcat> bourbaki: not really a sensible argument
[12:51:53] <bourbaki> I mean that ppl will use the language in a different way and add things in places noone ever thought of.
[12:52:11] <strcat> sure?
[12:52:24] <bourbaki> No idea i never wrote a language, i guess it could happen.
[12:52:28] <SiegeLord> Some people use arrays, and some people use iterators... doesn't mean we should remove arrays/iterators :P
[12:52:36] <strcat> languages like scala and c++ aren't used as a whole
[12:52:38] <strcat> people use a subset
[12:52:51] <bourbaki> The subset they see fit to solve their problem.
[12:52:57] <strcat> languages like Go and C are mostly used as a whole
[12:53:00] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[12:53:24] <strcat> bourbaki: no, the subset they prefer
[12:53:27] <bourbaki> I mean sure you can express everything with a small set but that doesnt make it applicable easily to every problem.
[12:53:33] <strcat> or the subset their corporate style guide says they can use
[12:53:37] <bourbaki> Thats why design patterns emerged.
[12:53:51] <strcat> google forbids exceptions in c++
[12:53:53] <strcat> as does llvm
[12:53:57] <strcat> they can't use libraries using exceptions
[12:54:04] <Ms2ger> Gecko too, fwiw
[12:54:09] <strcat> and people using exceptions aren't going to like libraries using other ways of reporting errors
[12:54:10] *** Joins: redShadow (redShadow@9BDAF02B.D15F9219.1CCF65D9.IP)
[12:54:14] <strcat> so you have 2 subsets of the community right there
[12:54:14] <Ms2ger> "return x" or "return x;"?
[12:54:25] <strcat> people who want the library to throw an exception and people who want it to do something else
[12:54:28] <strcat> look at boost's solution
[12:54:33] <bourbaki> Yeah still i mean if you can express it with the core features and its used it eventually if it gets used enough will emerge to be a design pattern.
[12:54:34] <strcat> they write 2 versions of each function/method
[12:54:44] <strcat> one returning an error code via a reference parameter, one throwing
[12:54:45] <bourbaki> Is all im saying.
[12:54:47] <strcat> that's pretty awful
[12:54:53] <eddyb> boost is crazy anyways
[12:54:58] <bourbaki> True :)
[12:55:01] <strcat> and that's just one example of a feature dividing the community into 2
[12:55:04] <eddyb> actually reminds me of Hack
[12:55:11] <strcat> there are dozens of these features in C++, and Scala is even worse
[12:55:12] <bourbaki> But you cant use C++ without a lot of it.
[12:55:37] <SiegeLord> Heh, that's just not true
[12:55:58] <pnkfelix> Ms2ger: include the semicolon
[12:56:04] <pnkfelix> Ms2ger: normally i wouldn't care
[12:56:06] <bourbaki> Well you can, but then you are writing a lot of shit yourself.
[12:56:24] <Ms2ger> pnkfelix, can you tell pcwalton when he comes in? :)
[12:56:36] <pnkfelix> Ms2ger: but I think there's some corner case that nmatsakis pointed out to me at the work week
[12:56:43] <eddyb> strcat: about enums/trait objects, I'd go with enums first, trait objects if enums don't suffice
[12:56:47] <Ms2ger> Lovely
[12:56:54] <bourbaki> Are there any real world projects yet written in Rust?
[12:56:56] <strcat> eddyb: but many people will reach for trait objects first
[12:57:02] <pnkfelix> Ms2ger: my memory is that its not, strictly speaking, a parser ambiguity
[12:57:05] <SiegeLord> I don't think you can write an orthogonal language that's easy to use
[12:57:06] <strcat> eddyb: so welcome to your subset of rust
[12:57:10] <bourbaki> As in in production.
[12:57:12] <pnkfelix> Ms2ger: at least not from the computer's standpoint
[12:57:17] <strcat> SiegeLord: Go does it well
[12:57:23] <strcat> incredibly small language spec, trivial to learn
[12:57:27] <strcat> far simpler than even Java
[12:57:28] <pnkfelix> Ms2ger: but rather a gotcha from the human eye's standpoint
[12:57:46] <Ms2ger> I know I don't like how it looks, but that may be habit :)
[12:57:54] <SiegeLord> strcat: I think that falls under the 'not easy to use'
[12:58:00] <pnkfelix> strcat: Aren't enum's and trait objects dual to one another?
[12:58:07] <eddyb> yin and yang
[12:58:09] <strcat> pnkfelix: they overlap a lot
[12:58:13] <SiegeLord> If you're cutting off capability to increase orthogonality, you have your priorities misplaced
[12:58:40] <eddyb> you know what strcat is doing to me?
[12:58:41] <pnkfelix> strcat: i see one as providing a data-directed protocol, the other providing a behavior directed protocol.  So to speak...
[12:58:44] <strcat> pnkfelix: unless you apply a hard rule like using an enum unless you aren't aware of all the possible types (due to user code)
[12:58:47] <eddyb> I'm no afraid VG might have no place in Rust
[12:58:54] <bourbaki> VG?
[12:58:55] <eddyb> even though it allows for such nice hacks
[12:58:56] <strcat> pnkfelix: not really
[12:58:57] <pnkfelix> strcat: ah, yes, that's the sort of hard rule I am thinking of
[12:59:11] <strcat> pnkfelix: same use cases excluding that rule, especially once we get better deriving
[12:59:12] <bourbaki> Vector Graphics?
[12:59:20] <eddyb> bourbaki: that's a new one :P
[12:59:25] <bourbaki> :)
[12:59:28] <strcat> pnkfelix: my point is that while *I* will apply that rule (and eddyb will), some people will use trait objects rather than enums
[12:59:30] <SiegeLord> You can already have an option of doing ~T everywhere where you have T
[12:59:37] <SiegeLord> Some people will just use ~T everywhere
[12:59:42] <SiegeLord> Doesn't mean we have to remove ~
[12:59:46] <eddyb> SiegeLord: we need more lints
[12:59:53] <strcat> because they come from OOP languages and they are more familiar - there's not really a specific reason to prefer either one when there are a lot of types involved beyond personal preference
[12:59:55] * eddyb keeps bourbaki guessing and takes notes
[13:00:05] <bourbaki> Variable Groups?
[13:00:07] <strcat> pnkfelix: anyway this isn't a very bad example of it
[13:00:26] <SiegeLord> I've fixed up rust-bindgen a bit yesterday and it was using tons of vectors where iterators would have sufficed
[13:00:29] <strcat> pnkfelix: because rust atm is pretty orthogonal
[13:00:39] *** Joins: patpat (patpat@moz-21619C28.as13285.net)
[13:00:40] <SiegeLord> Should be remove iterators? Semantically they are the same as vectors
[13:00:44] <strcat> pnkfelix: it's close to a minimum set of features needed to do the job it does well and make code easy to write
[13:00:52] <Yoric> SiegeLord: Are they?
[13:01:00] <eddyb> SiegeLord: random access though
[13:01:04] <SiegeLord> Except the infinite ones, but who uses those
[13:01:09] <kimundi> Great, now I'm getting ideas for a RFC solving the DOM layout problem too.
[13:01:12] <strcat> pnkfelix: I'm just very worried about all the endless feature proposals (HKT, GADTs, optional/keyword parameters, refinement types, inheritance, [...])
[13:01:19] <SiegeLord> And you can emulate it using Index anyway
[13:01:24] <eddyb> kimundi: didn't I solve that like weeks ago :P?
[13:01:24] <strcat> pnkfelix: I will really hate the language if we get all those things ;p
[13:01:26] <strcat> despite loving it now...
[13:01:38] *** Joins: judder (maradukewa@BD9E6B94.126EFFE1.78E362FE.IP)
[13:01:45] <strcat> I obviously see value in some of those features
[13:01:46] <strcat> but it's too much.
[13:02:04] <strcat> gets to the point where I'll start wanting a new rust just as I wanted a new C++
[13:02:10] <eddyb> hah
[13:02:22] <pnkfelix> strcat: well, the good news is, I'm pretty sure none of your list will be in 1.0
[13:02:25] *** Quits: ganitsu (ganitsu@moz-C151274C.dialup.adsl.anteldata.net.uy) (Ping timeout)
[13:02:32] <bourbaki> If a "feature" is projectable to the core of the language it is not really a feature is it?
[13:02:42] <bourbaki> It is more of a design pattern.
[13:02:57] <pnkfelix> strcat: but somehow I suspect you won't want to freeze at 1.0 language either
[13:02:59] <eddyb> pnkfelix: not even HKT/GADT? those are the ones I'd like to see, out of that list
[13:03:03] *** Joins: lucian_ (lucian@303F9692.4304AE1E.CE5E78F6.IP)
[13:03:15] <strcat> pnkfelix: yes we need to remove more things and consolidate features ;p
[13:03:16] <Yoric> What's HKT?
[13:03:19] <kimundi> eddyb: What was you solution again?
[13:03:24] <pnkfelix> Yoric: Higher Kinded Types
[13:03:25] *** Joins: leowoe (Leo@moz-C753E675.dip0.t-ipconnect.de)
[13:03:27] <Yoric> Ok.
[13:03:30] *** Joins: ganitsu (ganitsu@moz-C151274C.dialup.adsl.anteldata.net.uy)
[13:03:34] <eddyb> kimundi: not sure if suggested yet. explicit Vtable fields in the structuer
[13:03:37] <eddyb> *structure
[13:03:38] <strcat> pnkfelix: imo something like DST is basically a simplification - it's removing special cases from the languages via encoding a set of general rules
[13:03:40] <Yoric> I haven't seen anyone use these outside of Coq & co.
[13:03:50] <strcat> pnkfelix: that's the kind of feature that's best
[13:03:51] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[13:03:54] <bourbaki> Yoric: Haskell?
[13:04:01] <Yoric> Oh, right, Haskell has these now.
[13:04:02] <Yoric> My bad.
[13:04:03] <pnkfelix> strcat: right.  DST is clearly a win (assuming we don't hit any unexpected roadblocks)
[13:04:10] <eddyb> pnkfelix: also VG, but I lack all hope now
[13:04:12] <strcat> it takes a pattern that already exists in the language/library and encodes it in a general way
[13:04:19] <bourbaki> eddyb: VG?:)
[13:04:20] <pnkfelix> strcat: and *is* almost certain to land in 1.0
[13:04:29] <pnkfelix> bourbaki: Variadic Generic (Types)
[13:04:35] <bourbaki> Ah, thanks.
[13:04:41] <strcat> pnkfelix: but something like optional parameters, I really hate the whole concept ;p
[13:04:48] <kimundi> eddyb: Yeah, thats what I'm thinking. Have a langitem InteriorVtable trait that requires a opaque Vtable field, and all trait objects to traits that inherit from that trait become thin pointers.
[13:04:48] <strcat> partial application sugar? I like that
[13:05:02] <strcat> sugar for builder objects? well we basically already have the consumer end of that
[13:05:09] <SiegeLord> Anyway, I thought https://github.com/rust-lang/rfcs/pull/9 was nice as it seemed to build upon DST and not add any new keywords, as far as I could tell
[13:05:35] *** Joins: veddan (viktor@moz-C79BC80B.csbnet.se)
[13:05:39] <kimundi> strcat: Do you think that VG would extend Rust in non orthogonal ways?
[13:05:49] <strcat> pnkfelix: imo being able to say 'static: fn bar(int) = foo(_, 2);' would be faaaaaar saner than optional parameters
[13:05:51] <strcat> naming things is good
[13:05:56] <strcat> even though programmers don't like naming things
[13:05:58] * eddyb keeps on trudging though these mess of explicit dereferences
[13:06:04] <strcat> you can't force them to write docs but you can force them to name things
[13:06:10] <strcat> hopefully they use a good name by accident
[13:06:42] <strcat> traits trick you into documenting requirements, so that's nice
[13:07:01] *** Quits: lunaryorn (lunaryorn@moz-7E851DA2.dynamic.mnet-online.de) (Ping timeout)
[13:07:20] <pnkfelix> strcat: I've tried to push back the tide of public opinion regarding optional/keyword arguments
[13:07:40] <strcat> if we had unboxed closures, foo(_, 2) could trivially be sugar for |x| foo(x, 2)
[13:07:47] <eddyb> those are a can of worms I won't go into
[13:07:49] <strcat> and it could work in statics too
[13:07:56] <eddyb> pnkfelix: but guess what VG allows for
[13:07:58] * eddyb ducks
[13:08:06] <pnkfelix> strcat: I think I'm basically in your camp w.r.t. not wanting them.  So far we're just holding off about deciding what to do regarding their "use cases."
[13:08:14] <det> optional parameters save you from combinatorial explosion
[13:08:28] <strcat> det: they don't without keyword parameters
[13:08:39] <strcat> what if the one parameter you want to set is at the end?
[13:08:42] <SiegeLord> I want keyword arguments for my plotting library... I find optional arguments useless otherwise
[13:08:43] <strcat> after 5 you want defaults for
[13:08:51] <eddyb> (VG gives you bounded overloading)
[13:08:55] <strcat> imo builder objects are nicer for a user of the library
[13:09:00] <strcat> because you can compose them
[13:09:11] <det> strcat, no argument
[13:09:17] *** Quits: StarLight (StarLight@moz-55D2F094.dynamic.avangarddsl.ru) (Ping timeout)
[13:09:40] <eddyb> strcat: hmm, would you still have a problem with VG even if it didn't allow overloading?
[13:09:49] <det> also, I thought rust has no overloading, how do you express default parameters at all without them ?
[13:10:01] <strcat> let api = url("foo.com/api/v2").port(8080).proxy(address, port);
[13:10:18] <strcat> api.headers(blah).post(data)
[13:10:26] <strcat> api.headers(other_headers).post(other_data)
[13:10:38] * strcat shrugs
[13:10:40] *** Joins: Mowah (Mowah@moz-8548F376.cust.bredbandsbolaget.se)
[13:10:40] <SiegeLord> Except now you have to have some structure to store state
[13:10:45] <SiegeLord> It's a pain to code
[13:10:55] <strcat> SiegeLord: yes, so we need sugar (likely via macros, not language features) for that
[13:11:03] <strcat> we need macros to be able to expand to methods
[13:11:03] <SiegeLord> I use array of enums
[13:11:11] <SiegeLord> It looks nice and is reasonably efficient
[13:11:29] <SiegeLord> But another unorthogonality, eh?
[13:11:36] <strcat> SiegeLord: not via macros ;)
[13:11:53] <SiegeLord> Macros for what, calling it?
[13:12:00] <strcat> defining the methods etc.
[13:12:00] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[13:12:02] * eddyb pokes strcat
[13:12:10] <SiegeLord> Maybe
[13:12:12] <strcat> calling it is already fine imo
[13:12:18] <strcat> it's just a pain to design apis like that
[13:12:33] <SiegeLord> In my case, I already chain methods with optional arguments
[13:12:35] <strcat> because you're doing the same taking foo by-value, modifying it and returning it over and over
[13:12:39] <SiegeLord> So I'd now have to have delimeters :P
[13:12:39] <strcat> likely with a bunch of Option inside
[13:12:55] <strcat> sounds like a perfect use case for a smart procedural macro
[13:12:57] <SiegeLord> func1().arg1().arg2().stop().new_func().arg2().arg3();
[13:12:59] *** Joins: lunaryorn (lunaryorn@moz-7E851DA2.dynamic.mnet-online.de)
[13:13:25] *** Quits: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl) (Quit: Computer gone to sleep - Zzzz...)
[13:13:38] *** Joins: StarLight (StarLight@moz-BF40DE7B.dynamic.avangarddsl.ru)
[13:13:46] <strcat> imo rust's main weak point is lack of good closures
[13:13:59] <strcat> and because we lack good closures, we come up with design patterns and abuses of traits
[13:14:07] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[13:14:21] <strcat> we use a *lot* of traits
[13:14:50] <strcat> it's the first tool that people (including myself) pull out because closures are such a pain since they're stuck to a stack frame
[13:14:55] <strcat> + other issues
[13:15:33] <strcat> you can't write a function taking an iterator, applying map and returning an iterator - that sucks
[13:15:35] <eddyb> strcat: I almost want to implement a closure capturing a single &'a T value and having the lifetime 'a
[13:15:47] <strcat> eddyb: meh :P
[13:15:47] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Ping timeout)
[13:15:56] *** Joins: sw17ch (sw17ch@moz-4AF0345C.hfc.comcastbusiness.net)
[13:15:58] <strcat> unboxed closures don't seem like the hardest thing in the world to implement
[13:15:58] <Ms2ger> let mut opt_box_accumulator = None;
[13:15:58] <Ms2ger> opt_box_accumulator.push(Box::new(self, node, MainBoxKind));
[13:16:00] <eddyb> s/a closure/the optimization for a/
[13:16:02] <Ms2ger> Wat?
[13:16:05] <strcat> the hard part will be dealing with capture semantics
[13:16:10] <eddyb> Ms2ger: haha
[13:16:17] <eddyb> Ms2ger: did we have push on Option?
[13:16:25] <strcat> is that really a thing
[13:16:59] <Ms2ger> Not as far as I can tell
[13:17:22] <Ms2ger> At lest, not now
[13:17:24] <Ms2ger> lzast
[13:17:25] <Ms2ger> least
[13:17:26] <SiegeLord> Why does this not work: https://gist.github.com/SiegeLord/9892052
[13:17:30] <eddyb> strcat: let me guess, you wouldn't want a Fn<..Args, Ret> trait
[13:17:33] <Ms2ger> I swaer I'm not drunk
[13:17:34] <strcat> anyway the trick is being clever enough to avoid getting to the point where you need a) category theory or b) nonsense java things in place of category theory
[13:17:51] <strcat> eddyb: how about just making |T, U| -> V a trait-like thing :)
[13:18:31] <eddyb> SiegeLord: you need :Send after proc (the argument)
[13:18:32] *** Quits: sw17ch (sw17ch@moz-4AF0345C.hfc.comcastbusiness.net) (Quit: sw17ch)
[13:18:51] <SiegeLord> Hah, phew
[13:18:59] <Ms2ger> 0.9 implemented Reader on it
[13:19:00] <SiegeLord> I though I was going to have to do something else
[13:19:05] <SiegeLord> Thankyee
[13:19:23] <Ms2ger> But that doesn't have `push` either...
[13:19:28] <SiegeLord> This proc just rubs me the wrong way
[13:19:45] <eddyb> SiegeLord: OnceFn?
[13:19:52] <SiegeLord> I'd prefer that
[13:19:54] <eddyb> ~OnceFn:Send even
[13:20:17] <SiegeLord> Is that the syntax? Not ~OnceFn + Send?
[13:20:25] <eddyb> (and with some types in there)
[13:20:34] <eddyb> SiegeLord: currently, that's the syntax
[13:20:56] <pnkfelix> darnuria: ping
[13:20:59] <eddyb> strcat: but, but... :(
[13:21:55] <SiegeLord> Sweet... I can pass a non-Send type as an argument to Proc
[13:22:01] <SiegeLord> Does that make sense?
[13:22:14] <pnkfelix> strcat: what does that mean?  That one would be able to write `impl<T,U,V> |T, U| -> V for MyType { ... }` ?
[13:22:29] <strcat> pnkfelix: yes
[13:22:44] <strcat> pnkfelix: and use it as a trait bound
[13:22:51] <eddyb> eeeh
[13:22:52] * strcat shrugs
[13:22:59] *** Joins: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de)
[13:23:01] <strcat> prettier than Fn<...>
[13:23:15] *** Quits: japaric (japaric@3DD6B4D0.E67A32BD.5C7588CA.IP) (Connection reset by peer)
[13:23:23] * eddyb should stop being emotional
[13:23:46] <strcat> pnkfelix: the closure syntax would declare an unboxed closure (unique type implementing the closure trait-like thing) and capture by-value instead of by-ref (you can use &/&mut if you want by-ref - we don't have modes for parameters anymore either)
[13:24:01] <strcat> not sure about what boxed closures would look like
[13:24:05] <strcat> didn't think that far ;p
[13:24:29] <strcat> pnkfelix: anyway that means it's static dispatch until you box it
[13:24:34] <strcat> pnkfelix: and you could box it into a proc, too
[13:24:52] <eddyb> so no special syntax for procs?
[13:24:53] <strcat> it would just move ownership into the proc if it had non-Copy captures
[13:24:57] <strcat> eddyb: no special syntax
[13:25:06] <eddyb> I didn't like the keyword anyways
[13:25:11] <strcat> proc(|x| x + y)
[13:25:16] <strcat> just a function
[13:25:34] <strcat> well
[13:25:39] *** Joins: japaric (japaric@4553B077.F3E5B3F6.F4D5766F.IP)
[13:25:39] <strcat> you do need some kind of special syntax I guess
[13:25:40] <det> Can you manually implement an unboxed closure in rust like you can do a functor in C++ ?
[13:25:46] <strcat> eddyb: unless we have variadic generics ;p
[13:25:52] <strcat> det: can't overload call syntax
[13:25:59] <strcat> but otherwise yes
[13:26:02] <eddyb> det: you can write your own traits for it
[13:26:05] <det> I see
[13:26:50] <eddyb> strcat: did I tell you I figured out how to write a fold operation on a type list with VG, HKT and associated items?
[13:26:56] <det> Wouldnt it make sense to make call syntax overloadable and the just make lambda simple sugar for this transformation, aka copy C++11
[13:27:13] *** Quits: philix (felipe@moz-C7582C74.user.veloxzone.com.br) (Ping timeout)
[13:27:14] <Ms2ger> Someone suggested copying C++?
[13:27:18] * Ms2ger abandons ship
[13:27:22] <eddyb> strcat: i.e. Fold<<Current, T> Next<Current, T>><A, B, C, D, ...>
[13:27:44] <eddyb> det: that's the plan, but it's not easy
[13:28:00] <det> Ms2ger, zzz
[13:28:19] <eddyb> det: see http://glaebhoerl.tumblr.com/rust_closure_types
[13:28:23] <Ms2ger> Have we met? I'm the resident troll :)
[13:28:36] <det> quite the identity you have there
[13:28:54] <strcat> det: yes I've suggested adding unboxed closures to rust (our term for an equivalent to C++11 lambdas)
[13:29:01] <strcat> instead of the current closures
[13:29:02] *** Joins: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net)
[13:29:17] <strcat> det: rust used to have &fn, ~fn, @fn
[13:29:21] *** Quits: willingc (willingc@moz-F095E013.san.res.rr.com) (Client exited)
[13:29:25] <strcat> where ~fn was equivalent to C++'s std::function
[13:29:43] <det> I see
[13:30:12] <strcat> then it gained a 'once' annotation
[13:30:19] <strcat> for allowing you to move out of the captured data
[13:30:24] <strcat> since it can only be called once
[13:30:29] <det> &fn = closure without type erasure or boxing, ~fn boxing and type erasure, @fn = ?
[13:30:42] <strcat> det: &fn was erased, just no allocation
[13:30:53] <strcat> they were all a function ptr + data ptr
[13:30:54] <eddyb> &fn is what we have now
[13:31:03] <eddyb> in the form of ||
[13:31:06] <strcat> det: &fn(int, int) -> int became |int, int| -> int
[13:31:11] <strcat> det: ~once fn became proc
[13:31:19] <strcat> all the others (&once fn, @fn, @once fn) were removed
[13:31:27] <eddyb> and ~fn
[13:32:06] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[13:32:06] *** ChanServ sets mode: +o jdm
[13:32:10] *** Quits: bourbaki (luesebrink@moz-BED1057D.dip0.t-ipconnect.de) (Ping timeout)
[13:32:41] <det> I see
[13:32:43] *** Quits: angdev (uid7041@moz-E77DEB21.irccloud.com) (Quit: Connection closed for inactivity)
[13:34:39] *** Quits: cschneid (cschneid@moz-2EF64966.hlrn.qwest.net) (Client exited)
[13:35:00] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Ping timeout)
[13:35:05] *** Joins: andrezs (andrezs@moz-D75B94E4.carolina.res.rr.com)
[13:35:36] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[13:36:19] *** Joins: willingc (willingc@moz-F095E013.san.res.rr.com)
[13:37:05] *** Joins: willingc_ (willingc@moz-F095E013.san.res.rr.com)
[13:37:05] *** Quits: willingc (willingc@moz-F095E013.san.res.rr.com) (Connection reset by peer)
[13:37:47] *** Joins: jiojiajiu (jiojiajiu@moz-7455BF89.revip7.asianet.co.th)
[13:38:23] <det> strcat, Oh, you are Daniel Micay, I enjoyed reading your posts on the mailing list in regards to 1:1 threading and async/await :)
[13:40:09] <det> strcat, do you think Linux + switchto_swtich can and thread per connection will be able to compete with epoll for network servers ?
[13:40:10] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[13:40:28] <strcat> det: if you already have a stack per connection, sure ;P
[13:40:49] <strcat> det: apache2.4 provides that threading can compete with epoll in terms of performance
[13:40:54] <strcat> det: and it can scale as well
[13:41:00] <strcat> but it uses more resources to do the same work
[13:41:10] <det> so its just a constant factor ?
[13:41:10] <strcat> er
[13:41:13] <strcat> s/provides/proves/
[13:41:54] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[13:42:00] *** Quits: maxiepoo (mnew@moz-6F50ADE.hsd1.il.comcast.net) (Quit: Leaving)
[13:42:27] <det> the stack space seems insignificant, 4 GB for 1 million threads
[13:42:50] <strcat> det: but it causes TLB misses, etc.
[13:42:54] <strcat> more CPU usage
[13:43:26] <strcat> det: but M:N isn't any lighter than 1:1 in terms of resources
[13:43:33] <strcat> since everything but the stack is pretty insignificant
[13:43:56] <strcat> det: I haven't tested, but I wouldn't be surprised if M:N threads in rust used more memory than 1:1 due to very large libuv buffers
[13:44:06] <strcat> because libuv implements an abstraction layer above epoll that's not lightweight
[13:44:15] <eddyb> http://www.embedded.com/design/programming-languages-and-tools/4428704/Alternatives-to-C-C--for-system-programming-in-a-distributed-multicore-world
[13:44:29] <eddyb> is this saying Go is systems programming? can they stop with that misconception :P?
[13:44:33] <strcat> it abstracts enough for completion (IOCP) vs. ready-based (epoll) to be an implementation detail
[13:44:47] <strcat> eddyb: well what is systems programming?
[13:44:57] <bollu> eddyb: are servers system programs? :)
[13:45:03] <eddyb> not GC, as far as I'm concerned
[13:45:07] *** Joins: vikstrous (v@13F2CEC5.7672369.D8E68FF6.IP)
[13:45:26] <det> eddyb, I think Go markets itself that way :<
[13:45:30] <bollu> eddyb: refcounting is GC too...
[13:45:42] *** Joins: rylev (rylev@2B2A255D.2EF83B5B.BB1701D8.IP)
[13:45:53] <strcat> bollu: with cycle collection, sure
[13:45:58] <strcat> otherwise it's not a full GC
[13:46:15] <strcat> is scope-based destruction 'GC'?
[13:46:20] <strcat> it's entirely static
[13:46:28] <strcat> if so, GNU C has gc
[13:46:52] *** Quits: zmack (zmack@EFEB97D9.20AB2BFB.E400A05F.IP) (Ping timeout)
[13:46:53] <strcat> you can essentially have smart pointers in GNU C
[13:47:26] <eddyb> mfw Title_Snake_Case in Rust
[13:47:28] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[13:47:38] <eddyb> also, screenshots of notepad?
[13:49:07] <eddyb> future::span { ||
[13:49:11] <eddyb> how freaking old is that code?
[13:49:31] *** Joins: philix (felipe@moz-C7582C74.user.veloxzone.com.br)
[13:49:33] <Tari> let's put it this way: he presents managed boxes as something to be used frequently
[13:50:20] *** jorendorff is now known as jorendorff_away
[13:50:42] <strcat> managed pointers were no longer part of the language when this article was written
[13:50:47] *** Quits: skade (skade@moz-DA43A266.hsi.kabel-badenwuerttemberg.de) (Quit: Textual IRC Client: www.textualapp.com)
[13:50:48] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[13:51:04] <eddyb> S. Tucker Taft is VP and Director of Language Research at AdaCore (www.adacore.com).
[13:51:11] <Tari> yep
[13:51:16] <eddyb> pffft it's marketing clickbait
[13:51:19] <Tari> great neutral viewpoint thtere
[13:51:40] *** Joins: OODavo (OODavo@moz-890A9107.lns20.syd7.internode.on.net)
[13:51:41] *** jorendorff_away is now known as jorendorff
[13:53:01] <pnkfelix> eddyb: he actually spoke at mozilla... last year I think?
[13:53:03] *** Quits: aurynj (Eon@583ABBE5.60FA2E28.B9E25744.IP) (Ping timeout)
[13:53:28] <OODavo> Is there a way to define an impl that works on all kinds of strings? Toy example here: http://sprunge.us/LUIA?rust Using "impl Rot13 for &str" gives me an error about lifetime specifiers? (I'm pretty new to Rust, as may be apparent.)
[13:53:29] <pnkfelix> eddyb: https://air.mozilla.org/region-based-storage-management-parasailing-without-a-garbage-chute/
[13:53:44] * eddyb slowly steps aside
[13:53:51] *** Quits: rylev (rylev@2B2A255D.2EF83B5B.BB1701D8.IP) (Client exited)
[13:53:54] *** Joins: rylev (rylev@2B2A255D.2EF83B5B.BB1701D8.IP)
[13:54:08] <eddyb> OODavo: impl<'a> ... for &'a str
[13:54:08] *** Quits: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de) (Connection reset by peer)
[13:54:20] <pnkfelix> eddyb: (not to argue the point about whether the article was/wasn't biased)
[13:55:07] <eddyb> pnkfelix: I care more for the misrepresentation of Rust
[13:55:20] <eddyb> how old is that code? 0.5?
[13:55:34] <eddyb> I know it's not 0.7
[13:55:37] <strcat> eddyb: http://ix.io/bnk unique pointers in GNU C
[13:55:39] <OODavo> eddyb: Aha, yes, that's accepted and works for all my examples. Where can I find docs on that syntax?
[13:55:39] <strcat> ;p
[13:55:51] <eddyb> OODavo: look for "named lifetimes"
[13:56:09] <eddyb> strcat: now name it "drop"
[13:56:19] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[13:56:22] <eddyb> (that's exactly drop glue)
[13:56:37] <eddyb> strcat: makes me wonder if we can safely pass around Rust values in GNU C
[13:56:44] <strcat> eddyb: 'safely', no
[13:56:46] <strcat> ;p
[13:56:50] <eddyb> right
[13:57:03] *** Quits: rylev (rylev@2B2A255D.2EF83B5B.BB1701D8.IP) (Client exited)
[13:57:03] <eddyb> C ain't no Kansas
[13:57:04] *** Quits: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP) (Client exited)
[13:57:07] *** Joins: rylev (rylev@2B2A255D.2EF83B5B.BB1701D8.IP)
[13:57:08] *** Quits: rylev (rylev@2B2A255D.2EF83B5B.BB1701D8.IP) (Client exited)
[13:57:12] <strcat> lots of core linux projects (systemd, udev, etc.) use this dialect of C where RAII is the norm
[13:57:29] <eddyb> let's rewrite systemd in Rust
[13:57:34] <strcat> they're C mostly because they're libraries and desperately need a stable ABI
[13:57:45] <eddyb> then again...
[13:57:49] *** Joins: rylev (rylev@2B2A255D.2EF83B5B.BB1701D8.IP)
[13:57:57] <strcat> eddyb: have fun with that, it doesn't use blocking functions or threads, just async
[13:58:10] <strcat> the systemd binary itself is just an event loop
[13:58:13] <geal> what are the good practices for defining closure lifetime?
[13:58:35] <strcat> eddyb: + you need a bunch of POSIX stuff, and linux-specific stuff
[13:58:39] <strcat> not fun to manually bind ;p
[13:59:04] <Ms2ger> Poor BSD
[13:59:06] <geal> I'll explain my use case: some code is executed in a taslk, and due to the interface used, fail!() is the only way to send errors. task::try does not currently send back the error
[13:59:19] *** Joins: skade (skade@moz-DA43A266.hsi.kabel-badenwuerttemberg.de)
[13:59:22] <geal> so I'd like to give the task some kind of callback
[13:59:28] <geal> or maybe a channel to send errors to
[13:59:34] <strcat> Ms2ger: freebsd/openbsd/netbsd have init in the same cvs repo as their kernel and it doesn't run on linux ;p
[13:59:37] <eddyb> geal: huh? task::try gives you an error back
[13:59:46] <strcat> (some might be on svn now)
[13:59:47] <geal> eddyb: it gives me an Any
[13:59:51] <eddyb> geal: yeah
[13:59:53] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[13:59:59] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[14:00:01] <eddyb> geal: you can take any type out that Any
[14:00:02] <geal> (or maybe I should update my rustc first)
[14:00:07] <strcat> Ms2ger: in fact openssh doesn't run outside openbsd ;)
[14:00:07] <eddyb> geal: as long as you know its type
[14:00:12] <geal> oh
[14:00:13] <geal> ok
[14:00:14] <strcat> Ms2ger: that's a separate openssh portable fork
[14:00:15] <eddyb> geal: that's what Any is
[14:00:19] <eddyb> strcat: you know what's not fun?
[14:00:24] <eddyb> fixing a thousand errors
[14:00:35] <geal> eddyb: thanks for your help, I'll try that right away
[14:00:35] <strcat> openssh is more secure on linux than freebsd thanks to seccomp anyway
[14:00:44] <eddyb> strcat: I will go maaaaad
[14:00:48] <strcat> er
[14:00:48] <eddyb> &**strcat
[14:00:49] <strcat> than openbsd*
[14:00:53] <strcat> freebsd comparison is irrelevant
[14:00:55] <strcat> ;)
[14:01:03] *** Quits: io2 (io2@moz-EE406A5.home.otenet.gr) (Quit: ...take irc away, what are you? genius, billionaire, playboy, philanthropist)
[14:01:05] *** Joins: edwardw (edwardw@C3D32C6E.E4C8743.30C05AB6.IP)
[14:01:08] <strcat> (openssh itself doesn't run on freebsd any more than linux afaik)
[14:01:43] <geal> (and that's why coming to #rust is always better than hacking alone: someone points me to the right way, the design will be better, and I learn something on the way)
[14:02:44] *** Joins: io2 (io2@moz-EE406A5.home.otenet.gr)
[14:04:26] *** Quits: drbawb (drbawb@moz-444F91EA.wi.res.rr.com) (Quit: WeeChat 0.4.3)
[14:05:04] *** Quits: judder (maradukewa@BD9E6B94.126EFFE1.78E362FE.IP) (Ping timeout)
[14:05:27] *** Joins: zmack (zmack@DD657A1.5B5BE14C.E400A05F.IP)
[14:05:52] <OODavo> eddyb: Am I right in understanding that "impl<'a> Trait for &'a str" gives the &self parameter inside the impl the same lifetime as the original &str?
[14:06:10] <eddyb> OODavo: no
[14:06:14] <OODavo> Darn.
[14:06:15] <eddyb> OODavo: you should probably take self
[14:06:24] <eddyb> OODavo: &self would mean &&'a str
[14:06:40] <eddyb> under DST, this wouldn't be an issue
[14:06:58] <doomlord_> would there be any downsides to making indexing functions take a generic I:Int
[14:07:14] <strcat> doomlord_: complexity
[14:07:24] <doomlord_> relaxing some cases of int conversions to ease that doesn't seem to be popular
[14:07:42] <doomlord_> my problem is that i need i32/u32 a lot - for similar reasons to the existance of x32
[14:07:43] <strcat> more complicated function signatures, slower compile times
[14:07:48] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[14:07:57] <strcat> and you have to deal with overflow
[14:08:09] <eddyb> doomlord_: you need something that's not implemented by 64-bit integers on 32-bit
[14:08:13] <strcat> uint maps perfectly to the requirements of container sizes/indexing
[14:08:17] <eddyb> doomlord_: and probably always unsigned
[14:08:26] <doomlord_> i've got a number of suggestions for this
[14:08:43] <strcat> imo it's far too much to have every uint parameter replaced by a type parameter
[14:08:46] <OODavo> If I make the method just take (self) it complains that "method `rot13` has an incompatible type: expected &-ptr but found &'a str". &self typechecks and works.
[14:08:52] <doomlord_> suggestion [1] is relaxing conversions [2] is generic index operations [3] is a new type designed for this purpose
[14:08:54] <OODavo> So I'm not really sure what's going on there.
[14:08:59] <strcat> doomlord_: why not just suggest allowing lossless upcasts
[14:09:03] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[14:09:10] <strcat> without explicit conversions
[14:09:17] <strcat> allow u8 -> u16
[14:09:22] <strcat> continue not allowing u16 -> u8
[14:09:37] <doomlord_> strcat i've put that suggestion in the range of suggestions , all my suggestions find objection :)
[14:09:54] <strcat> well I'm willing to write an rfc about it
[14:09:57] <doomlord_> (elsewhere / reddit threads)
[14:09:59] <strcat> but there are other things I want to do first
[14:10:06] <strcat> pointer arithmetic operators, etc.
[14:10:11] <eddyb> OODavo: what are you calling the method on?
[14:10:21] <doomlord_> "lossless upcasts" would certainly help me out
[14:11:09] <OODavo> I have "str".method() and (~"str").method() as test cases, both of which work.
[14:11:18] <doomlord_> indexing with things other than int is very common IMO. lookup tables, and using ints to avoid pointer bloat, and dropping to array-based techniques where in C you'd have used pointer arithmetic
[14:11:25] <ChrisMorgan> Hang on—don't we allow u8 -> u16?
[14:11:31] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[14:11:31] <ChrisMorgan> rusti: 8u8 as u16
[14:11:31] <eddyb> ChrisMorgan: nope
[14:11:32] -rusti- 8
[14:11:35] <strcat> ChrisMorgan: not implicitly
[14:11:37] <eddyb> ChrisMorgan: not *that*
[14:11:43] <ChrisMorgan> Oh, implicit. Got it.
[14:11:58] <doomlord_> i'm guessing with lossless upcasts you'll suggest that sign/unsign change is still explicit - i was met with objection to that
[14:12:08] <doomlord_> eg u32-> i64    .. some peple object to allowing that
[14:12:11] <strcat> a sign change should still be explicit
[14:12:20] <eddyb> OODavo: you should have rot13 as a method for all types implementing Iterator<char> or Iterator<Ascii> IMO
[14:12:21] <strcat> this is just encoding clang warnings
[14:12:46] <OODavo> Yeah, that's valid, but this *is* a toy example. :P
[14:12:47] *** Joins: dschatzberg (dschatzber@moz-4CB3F0EE.bu.edu)
[14:13:51] <doomlord_> well being able to use u32 as an index freely would certianly be a step forward.
[14:14:38] <doomlord_> i was wondering if that's a case for a new type , min(u32,unsigned int) - so you have a compact index that is safe & portable
[14:15:11] <strcat> doomlord_: http://sprunge.us/LAje C example
[14:15:13] <doomlord_> 'word' perhaps.  of course it will be 32bit  on most common platforms, but there might be microcontrollers/dsps with small adress space
[14:15:25] <strcat> doomlord_: http://sprunge.us/RTUP
[14:15:39] <strcat> disallowing casts between signed/unsigned and downcasts is just encoding what C compilers already warn about.
[14:15:52] <doomlord_> i've got no problem casting where there is information loss, that is good
[14:16:13] <det> Does rust standardize on twos-complement signed ?
[14:16:24] <strcat> det: yes, as does LLVM
[14:16:26] <eddyb> I think LLVM does
[14:16:29] <doomlord_> some signed -> unsigned cases are ok IMO , where the target type has more bits; 
[14:16:45] <strcat> det: rust can't allow undefined behaviour so it can't do something that's UB in LLVM
[14:16:53] <strcat> and if C says it's UB, generally LLVM does too
[14:16:56] <doomlord_> the objection i was given was the reliance on wrapround arithmetic whilst simultanesously promoting... i think thats such a corner case its worth ignoring :)
[14:17:24] <strcat> det: you have to opt-in to undefined behaviour on overflow though
[14:17:42] <strcat> LLVM has a single integer type - just two's complement, neither signed/unsigned specifically
[14:17:55] <strcat> but you can mark the operations with nsw (no-signed-wrap) or nuw (no-unsigned-wrap)
[14:18:00] <strcat> making overflow UB
[14:18:00] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[14:18:08] <strcat> clang uses nsw on C signed ints, unless you pass -fwrapv
[14:18:10] <det> I like this.
[14:18:17] <strcat> rust never marks them undef
[14:18:34] *** Parts: OODavo (OODavo@moz-890A9107.lns20.syd7.internode.on.net) (WeeChat 0.4.4-dev)
[14:18:38] <alan_andrade> moooooorning
[14:18:49] <det> I really dislike you have to use signed in C/C++ to get certain optimizations because of unsigned overflow
[14:19:00] *** Joins: gimpf (gimpf@moz-66A5AAF0.adsl.highway.telekom.at)
[14:19:06] <strcat> det: well in rust you can't get those optimizations ;p
[14:19:13] <det> hehe
[14:19:22] *** Joins: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP)
[14:19:22] <strcat> det: although we could expose intrinsics for them
[14:19:39] <det> I bet thats not entirely true
[14:19:54] <cmr> which?
[14:20:11] <strcat> well our raw pointer offsets are marked as 'inbounds', which makes overflow or going beyond the bounds of an object (other than one byte past the end) UB
[14:20:24] <strcat> but we have no way to generate nsw/nuw for integer ops
[14:20:59] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[14:21:03] *** Quits: arcterus (arcterus@moz-182EE6BD.dsl.pltn13.sbcglobal.net) (Ping timeout)
[14:21:04] <det> what about array[i+n]
[14:21:06] <benh> clearly we just need inline_llvm! { ... }
[14:21:25] <det> on x86 this uses a special addressing mode if you know that i+n cannot overflow
[14:21:26] <strcat> det: the normal indexing is bounds checked, there are unchecked methods
[14:21:28] * whitequark wonders if it is possible to mark signed overflow as "nsfw"
[14:21:34] *** Quits: rylev (rylev@2B2A255D.2EF83B5B.BB1701D8.IP) (Client exited)
[14:21:55] *** Joins: rylev (rylev@2B2A255D.2EF83B5B.BB1701D8.IP)
[14:22:10] <strcat> det: we output inbounds pointer arithmetic instructions exclusively
[14:22:22] <strcat> LLVM knows we never do pointer arithmetic outside of the bounds of an object
[14:22:34] <strcat> the offset method on raw pointers generates an inbounds offset
[14:22:40] <strcat> as pointer arithmetic does in C
[14:22:42] <eddyb> benh: someone implemented that at one point
[14:23:04] <cmr> jensnockert did
[14:23:56] <det> I see
[14:24:52] *** Joins: pupoque (Adium@297D6F99.EF706C30.C0C64AB3.IP)
[14:25:06] <doomlord_> is u32->uint going to be a lossless upcast
[14:25:10] <jiojiajiu> Tell me somebody please, if i use x: Cell<uint>, could i reassigne directly by x = 1; or i should use Cell::set ?
[14:25:39] <doomlord_> ... (is int defined as max of u32, pointer size perhaps)
[14:26:01] <doomlord_> uint^
[14:26:24] <doomlord_> .. or might uint be 16bits on some DSP/microcontroller
[14:28:24] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[14:28:28] <eddyb> jiojiajiu: you need to use set
[14:28:55] <strcat> doomlord_: not necessary ;P
[14:28:58] <strcat> necessarily*
[14:29:02] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[14:30:08] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[14:31:24] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[14:31:31] *** Quits: Ferreus (ferreus@moz-EDB087F2.dip0.t-ipconnect.de) (Ping timeout)
[14:32:35] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[14:34:04] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[14:34:48] *** Joins: lfox (lfox@moz-89EEE1BF.nyc.res.rr.com)
[14:34:54] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Ping timeout)
[14:37:13] *** Joins: aurynj (Eon@583ABBE5.60FA2E28.B9E25744.IP)
[14:38:03] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[14:38:33] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[14:40:03] *** Quits: Nekit1234007 (Nekit12340@4D86C49F.ABE6C08B.4707F662.IP) (Ping timeout)
[14:40:58] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[14:41:04] *** Joins: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net)
[14:41:30] <eddyb> rusti: "\u00FA"
[14:41:31] -rusti- ú
[14:41:48] <strcat> no u
[14:42:07] <strcat> rusti: fn foo() { loop {} } foo()
[14:42:12] -rusti- playpen: timeout triggered!
[14:42:15] <strcat> rusti: fn foo() { loop {} } foo()
[14:42:20] -rusti- playpen: timeout triggered!
[14:42:24] <strcat> that linux kernel bug makes me sad
[14:42:27] <eddyb> rusti: "£".as_bytes()
[14:42:28] -rusti- [194, 163]
[14:42:30] <strcat> rusti: fn foo() { loop {} } foo()
[14:42:35] -rusti- playpen: timeout triggered!
[14:42:46] <eddyb> rusti: 0xFA
[14:42:47] -rusti- 250
[14:42:48] <benh> Which bug?
[14:42:56] <strcat> a race condition in the cgroup design
[14:43:01] <strcat> causing it to leave behind dirs
[14:43:06] <benh> :(
[14:43:08] <strcat> drwxr-xr-x 2 root root 0 Mar 31 01:40 playpen-11067.scope
[14:43:10] <strcat> drwxr-xr-x 2 root root 0 Mar 31 01:43 playpen-11356.scope
[14:43:10] <benh> Now I'm sad too
[14:43:12] <strcat> drwxr-xr-x 2 root root 0 Mar 31 10:42 playpen-1185.scope
[14:43:14] <strcat> drwxr-xr-x 2 root root 0 Mar 31 10:42 playpen-1296.scope
[14:43:16] <strcat> drwxr-xr-x 2 root root 0 Mar 31 10:42 playpen-1478.scope
[14:43:17] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[14:43:19] <strcat> benh: it's a race condition in the cgroup supervisor thing
[14:43:26] <strcat> where the kernel is *supposed* to inform you that the process is gone
[14:43:31] <strcat> it's a design flaw
[14:43:35] <strcat> benh: they're fixing it though
[14:43:46] <strcat> the kernel devs think the cgroup fs is insane and are totally removing it
[14:43:53] <benh> heh
[14:43:58] <strcat> reveals too many private details, is racy (due to many processes managing it), etc.
[14:44:08] <strcat> they don't consider it part of the stable ABI, it's an implementation detail
[14:44:22] <strcat> you're already supposed to be using it through a cgroup manager
[14:44:25] <strcat> so I switched playpen to that
[14:44:29] <strcat> now it's entirely not my problem
[14:44:31] <strcat> ;)
[14:44:43] <m4rw3r> Question regarding slices: Is there any way to deconstruct slices since the old way was removed?
[14:45:40] <m4rw3r> more or less just playing around, but I am trying to make the basics for a HTTP-server in Rust as an exercise to learn the language
[14:45:45] <strcat> benh: anyway the race happens when you are trying to kill the processes in the group
[14:45:52] <strcat> benh: it sometimes doesn't inform you that it is now empty
[14:46:07] <benh> weird!
[14:46:09] <strcat> so when playpen kills the scope unit on the timeout, the scope unit is always removed
[14:46:12] <strcat> but the cgroups sometimes stay
[14:46:18] <strcat> makes me really, really sad
[14:46:18] *** Joins: judder (maradukewa@BD9E6B94.126EFFE1.78E362FE.IP)
[14:46:20] <strcat> ;\
[14:46:29] <strcat> the new cgroup API is coming in 3.15 or 3.16 or something
[14:46:33] <strcat> will fix it
[14:46:44] <eddyb> 3.33.3 pls
[14:46:56] <strcat> (before, playpen just didn't use the supervisor stuff - it manually removed them after the process ended, which was worse in other ways)
[14:50:57] *** Quits: andrezs (andrezs@moz-D75B94E4.carolina.res.rr.com) (Ping timeout)
[14:51:37] *** Joins: lawrence (lawrence@moz-88A653EC.wireless.utoronto.ca)
[14:52:55] *** Quits: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net) (Ping timeout)
[14:54:30] *** Quits: mindcat (mindcat@C5801A5E.F11C85BB.431667FD.IP) (Ping timeout)
[14:55:10] *** Quits: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP) (Quit: leaving)
[14:58:57] *** Joins: mindcat (mindcat@CE85DF24.BED0357D.E47F7BFE.IP)
[14:59:03] *** Joins: Nekit1234007 (Nekit12340@4D86C49F.ABE6C08B.4707F662.IP)
[14:59:13] *** Joins: josh (josh@moz-C350AC70.hsd1.mn.comcast.net)
[15:05:02] *** Quits: lawrence (lawrence@moz-88A653EC.wireless.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[15:05:08] *** Joins: cschneid (cschneid@moz-CA025D57.ip.mcleodusa.net)
[15:05:25] *** Quits: lunaryorn (lunaryorn@moz-7E851DA2.dynamic.mnet-online.de) (Quit: )
[15:06:15] *** Joins: drbawb (drbawb@moz-444F91EA.wi.res.rr.com)
[15:06:16] *** Joins: benjamin_____ (benjamin@moz-B90E6D97.dip0.t-ipconnect.de)
[15:06:49] *** Joins: lawrence (lawrence@moz-88A653EC.wireless.utoronto.ca)
[15:06:55] *** Quits: benjamin_ (benjamin@moz-C4E134D9.dip0.t-ipconnect.de) (Ping timeout)
[15:09:41] *** Joins: maxiepoo (mnew@moz-6F50ADE.hsd1.il.comcast.net)
[15:12:00] *** Quits: mgottschlag (quassel@moz-AEA0F6B0.hsi6.kabel-badenwuerttemberg.de) (Ping timeout)
[15:12:20] <darnuria>  /q pnkfelix 
[15:12:23] <darnuria> oups :D
[15:12:57] *** Joins: exobit_ (textual@moz-E06F46F0.corp.bitshelter.com)
[15:14:23] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:16:44] *** Joins: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[15:19:55] *** Quits: astroch (astroch@moz-46285397.dhcp.embarqhsd.net) (Ping timeout)
[15:20:30] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Ping timeout)
[15:21:43] <mgax> what's the difference between `use self::test::BenchHarness` and `use test::BenchHarness`?
[15:22:01] <bollu> can I take this up ? https://github.com/mozilla/rust/issues/12925
[15:22:23] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[15:22:35] *** Joins: ChrisOei (ChrisOei@moz-53A9266A.blurb.com)
[15:23:15] <kimundi> mgax: If you are in the crate root, they refer to the same thing. If not, then the first one referes to a test module in the current module, while the second one refers to a test module in the crate root
[15:23:35] *** Quits: m4rw3r (Mibbit@moz-CE42A260.cust.tele2.se) (Quit: http://www.mibbit.com ajax IRC Client)
[15:23:54] <mgax> kimundi, but BenchHarness is not in my crate at all!
[15:24:21] <eddyb> test is probably the test crate
[15:24:31] *** Joins: osa1 (omer@AC0351CD.7B7767E.3688B332.IP)
[15:28:17] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[15:28:22] *** Quits: eibwen (kvirc@moz-6C3E0A2E.dip0.t-ipconnect.de) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[15:28:23] <pnkfelix> kimundi: is that true, even if test is an extern crate?
[15:28:50] <pnkfelix> kimundi: i.e. can you do `use self::test::...` without a precededing `use test;` ?
[15:29:05] <pnkfelix> kimundi: (in that scenario of `extern crate test;`, I mean)
[15:29:06] <kimundi> Err, right rather than "test module" I should say "item with name "test""
[15:29:22] <eddyb> a crate is a module, though
[15:29:29] <eddyb> (namespace-wise)
[15:29:44] <kimundi> eddyb: namespace wise a function is also a module :P
[15:29:47] *** Quits: lucian_ (lucian@303F9692.4304AE1E.CE5E78F6.IP) (Input/output error)
[15:29:53] <eddyb> kimundi: no, it's a value
[15:30:01] <eddyb> get your namespaces straight!
[15:30:18] *** Joins: lucian (lucian@303F9692.4304AE1E.CE5E78F6.IP)
[15:31:51] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[15:31:52] <kimundi> pnkfelix: Anyway, yes that should work.
[15:32:00] *** Quits: lucian (lucian@303F9692.4304AE1E.CE5E78F6.IP) (Ping timeout)
[15:32:16] <kimundi> pnkfelix: But only if you have a "extern crate test" in the same module
[15:32:23] *** Joins: nical (nico@347FA24B.24D9B0A0.495EC8CD.IP)
[15:32:39] <kimundi> mod foo { extern crate test; use self::test::... } // This should work
[15:33:26] <Tari> I've got a struct that wants to hand out Rc<T> which all share ownership of it
[15:33:48] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:33:57] <Tari> in order to do so, right now I have the struct hold a Weak<T> to itself which it clones and upgrades to get Rc<T>s
[15:34:42] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[15:34:44] <kimundi> Tari: I assume you mean that the struct already is allocated in a Rc<T> ?
[15:35:18] <Tari> fn MyStruct::init() -> Rc<MysTruct>
[15:35:26] <pnkfelix> kimundi: right you are, I'm not sure what led me to think otherwise
[15:35:29] <kimundi> Right, okay.
[15:35:30] <Tari> with correct capitalization
[15:36:10] <Tari> the initialization for that is a bit flaky
[15:36:23] <Tari> (it works, but feels fragile)
[15:38:24] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[15:38:30] <Tari> since in order to set up the Weak<T> it holds, I need to create a Rc<T> holding an unitialized struct, then borrow from that Rc, transmute to &mut and set the self-reference
[15:38:34] *** Joins: astroch (astroch@4971754E.6D4462A.DDE5D3F6.IP)
[15:38:55] *** Joins: tobytailor (tobytailor@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[15:39:35] *** Quits: reijoslav (antek@58F5EA4F.2E23C380.AFE2C49D.IP) (Ping timeout)
[15:39:57] *** Quits: lawrence (lawrence@moz-88A653EC.wireless.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[15:40:01] *** Joins: lucian (lucian@303F9692.4304AE1E.CE5E78F6.IP)
[15:40:14] *** Quits: lucian (lucian@303F9692.4304AE1E.CE5E78F6.IP) (Input/output error)
[15:40:32] <Tari> so.. I don't think there's a safer way to do that, but maybe I'm missing something?
[15:40:35] *** Joins: lucian (lucian@303F9692.4304AE1E.CE5E78F6.IP)
[15:41:07] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[15:41:07] *** Quits: lucian (lucian@303F9692.4304AE1E.CE5E78F6.IP) (Connection reset by peer)
[15:41:09] <Tari> If I could construct Rc<T> and Weak<T> from RcBox<T> it would be better
[15:41:12] <edwardw> Tari: does Rc::downgrade work for you?
[15:41:16] *** Joins: lucian (lucian@303F9692.4304AE1E.CE5E78F6.IP)
[15:41:33] <Tari> that's what I do to get the Weak<T>
[15:41:38] <Tari> let me paste the code
[15:41:57] <strcat> you're supposed to upgrade Weak<T> to Rc<T> with upgrade
[15:42:12] <strcat> you can't use it directly because the box can be freed
[15:42:45] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Input/output error)
[15:43:08] <strcat> rusti: use std::rc::Rc; let x = Rc::new(5); let y = x.downgrade(); y.upgrade()
[15:43:11] -rusti- pastebinned 8 lines of output: http://ix.io/bnp
[15:43:22] <strcat> rusti: use std::rc::Rc; let x = Rc::new(5); let y = x.downgrade(); *y.upgrade()
[15:43:25] -rusti- pastebinned 11 lines of output: http://ix.io/bnq
[15:43:25] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[15:43:41] <strcat> rusti: use std::rc::Rc; let x = Rc::new(5); let y = x.downgrade(); y.upgrade().unwrap()
[15:43:45] -rusti- pastebinned 8 lines of output: http://ix.io/bnp
[15:43:45] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[15:43:50] <strcat> rusti: use std::rc::Rc; let x = Rc::new(5); let y = x.downgrade(); *y.upgrade().unwrap()
[15:43:51] -rusti- 5
[15:43:52] *** Joins: reijoslav (antek@58F5EA4F.2E23C380.AFE2C49D.IP)
[15:44:00] <strcat> rusti: use std::rc::Rc; let x = Rc::new(5); let y = x.downgrade(); drop(x); y.upgrade().is_none()
[15:44:00] -rusti- true
[15:44:30] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[15:44:31] <Tari> https://gist.github.com/tari/9895267
[15:44:52] *** Quits: tobytailor (tobytailor@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: tobytailor)
[15:44:58] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[15:46:11] *** Quits: philix (felipe@moz-C7582C74.user.veloxzone.com.br) (Ping timeout)
[15:46:33] *** Quits: josh (josh@moz-C350AC70.hsd1.mn.comcast.net) (Quit: josh)
[15:47:41] *** Parts: nical (nico@347FA24B.24D9B0A0.495EC8CD.IP) ()
[15:47:43] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[15:48:04] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[15:48:21] *** Joins: paulolieuthier (quassel@moz-A22ABC3D.dynamic.adsl.gvt.net.br)
[15:48:23] <edwardw> hmm interesting. I probably let another structure to hold the weak pointer
[15:48:39] *** Quits: astroch (astroch@4971754E.6D4462A.DDE5D3F6.IP) (Ping timeout)
[15:49:19] *** Quits: murph (murph@moz-F07B75BF.oracle.com) (Quit: WeeChat 0.4.1)
[15:49:46] *** Quits: untitaker (untitaker@moz-F313C13.adsl.highway.telekom.at) (Ping timeout)
[15:49:46] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[15:50:26] <edwardw> or rather, let caller wrap AO instance in a Rc
[15:50:57] <Tari> and pass that Rc<AO> into create_device?
[15:51:13] *** Joins: astroch (astroch@4971754E.6D4462A.DDE5D3F6.IP)
[15:51:26] <Tari> there's FFI involved here, such that no Device may outlive the AO that created it
[15:51:34] <edwardw> no, invoke create_device upon that Rc<AO> and let auto-deref handle the rest
[15:51:44] *** Joins: eholk (eholk@moz-BA312F07.crest.iu.edu)
[15:52:45] <Tari> then if the user drops the Rc<AO>, the Device becomes invalid
[15:53:06] <Tari> the AO must remain live as long as there are associated Devices
[15:53:21] *** Quits: osa1 (omer@AC0351CD.7B7767E.3688B332.IP) (Ping timeout)
[15:53:45] *** Joins: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP)
[15:53:57] <edwardw> then I probably let another structure, say DevideManager, to init and hand out Rc<AO>
[15:54:09] <edwardw> DeviceManager*
[15:54:20] <Tari> AO is basically a DeviceManager
[15:54:31] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[15:54:33] *** Quits: oxum (anonymous@67DB2C38.BBE46712.520CDC98.IP) (Ping timeout)
[15:54:46] <Tari> the only real useful thing it does is hand out Devices
[15:55:01] <mindcat> rusti: use std::rc::Rc; let x = Rc::new(5); let y = x.downgrade(); *y
[15:55:09] -rusti- pastebinned 11 lines of output: http://ix.io/bnr
[15:55:29] <mindcat> how can I make a read-only struct?
[15:55:42] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[15:55:44] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[15:55:47] <mindcat> oh
[15:56:05] <mindcat> it seem I asked a stupid problem
[15:56:16] *** Joins: jvoorhis (jvoorhis@moz-384E18AD.ptld.qwest.net)
[15:56:55] <mindcat> rusti: struct A { a: u8 } let a : A = A { a : 5 }; a.a = 10;
[15:56:55] <Tari> I suppose I could put create_device on Device instead
[15:56:56] -rusti- <anon>:11:53: 11:56 error: cannot assign to immutable field `a.a`
[15:56:56] -rusti- <anon>:11         struct A { a: u8 } let a : A = A { a : 5 }; a.a = 10;
[15:56:56] -rusti-                                                               ^~~
[15:56:56] -rusti- error: aborting due to previous error
[15:56:56] -rusti- playpen: application terminated with error code 101
[15:56:58] *** Quits: lucian (lucian@303F9692.4304AE1E.CE5E78F6.IP) (Input/output error)
[15:57:05] <mindcat> rusti: struct A { a: u8 } let mut a : A = A { a : 5 }; a.a = 10;
[15:57:05] -rusti- ()
[15:57:29] *** Joins: lucian (lucian@303F9692.4304AE1E.CE5E78F6.IP)
[15:57:31] <Tari> Device::init(backend: Rc<AO>) -> Device
[15:57:32] <Tari> or so
[15:57:35] *** Joins: untitaker (untitaker@moz-F31F7B7E.adsl.highway.telekom.at)
[15:57:43] <edwardw> Tari: then it should be Rc<Device<S>>, not Rc<AO>, don't you think?
[15:57:46] *** Joins: lucian_ (lucian@303F9692.4304AE1E.CE5E78F6.IP)
[15:57:47] *** Quits: lucian (lucian@303F9692.4304AE1E.CE5E78F6.IP) (Connection reset by peer)
[15:57:47] <mindcat> rusti: struct A { a: u8 } let a : A = ~A { a : 5 }; *a.a = 10;
[15:57:49] -rusti- pastebinned 14 lines of output: http://ix.io/bns
[15:58:07] <edwardw> yes, exactly
[15:58:16] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[15:59:05] <mindcat> rusti: struct A { a: u8 } let a = &mut A { a : 5 }; a.a = 10;
[15:59:06] -rusti- ()
[15:59:16] <mindcat> it is :D
[15:59:21] *** Joins: oxum (anonymous@A8E74FA7.A3DB4D3F.520CDC98.IP)
[15:59:28] *** Quits: lucian_ (lucian@303F9692.4304AE1E.CE5E78F6.IP) (Ping timeout)
[15:59:30] <edwardw> no not really, I'm think AO holds to Rc<Device>
[15:59:38] *** Joins: Tohie (scott@D279FAF5.F0218A4F.9BC11B05.IP)
[16:00:03] *** Joins: arcterus (arcterus@E2F9ECEA.1B86DD7D.782E401B.IP)
[16:00:05] <edwardw> the resource here needs to be refcounted is Device not AO
[16:00:23] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[16:02:12] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:02:31] *** Joins: philix (felipe@moz-C7582C74.user.veloxzone.com.br)
[16:04:23] *** Joins: hoverbea_ (hoverbear@726D908C.44E18222.E74D50F2.IP)
[16:04:48] *** Quits: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP) (Ping timeout)
[16:05:17] *** Joins: lawrence (lawrence@moz-88A653EC.wireless.utoronto.ca)
[16:07:44] *** Quits: arcterus (arcterus@E2F9ECEA.1B86DD7D.782E401B.IP) (Ping timeout)
[16:08:02] *** Quits: benjamin_____ (benjamin@moz-B90E6D97.dip0.t-ipconnect.de) (Ping timeout)
[16:08:14] *** Joins: onelson_ (owen@moz-DD666EC5.laika.com)
[16:09:39] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[16:12:29] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[16:13:01] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Quit: Textual IRC Client: www.textualapp.com)
[16:13:15] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[16:13:24] *** Quits: skade (skade@moz-DA43A266.hsi.kabel-badenwuerttemberg.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[16:13:25] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[16:14:08] *** Quits: jiojiajiu (jiojiajiu@moz-7455BF89.revip7.asianet.co.th) (Ping timeout)
[16:14:53] <mgax> i'm trying to define a structure that keeps a reference to a lambda
[16:15:02] *** Quits: onelson_ (owen@moz-DD666EC5.laika.com) (Input/output error)
[16:15:10] <mgax> a
[16:15:26] <mgax> and i'm failing at the syntax :)
[16:15:47] <mgax> my latest approximation is:
[16:15:49] <mgax>     priv fun: &'a |arg: ARG| -> RV,
[16:16:04] *** Joins: arcterus (arcterus@E2F9ECEA.1B86DD7D.782E401B.IP)
[16:16:08] *** Quits: arcterus (arcterus@E2F9ECEA.1B86DD7D.782E401B.IP) (Input/output error)
[16:16:12] <mgax> and rustc says "error: missing lifetime specifier"
[16:16:17] *** Quits: paulolieuthier (quassel@moz-A22ABC3D.dynamic.adsl.gvt.net.br) (Client exited)
[16:16:22] <eddyb> mgax: without the &
[16:17:14] <alan_andrade> \o/ my last experiment http://alan-andrade.github.io/rust/javascript/2014/03/31/parallel_js_compression.html
[16:17:22] *** Joins: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl)
[16:17:23] <mgax> eddyb, thanks, seems to work
[16:17:37] *** Joins: paulolieuthier (quassel@moz-A22ABC3D.dynamic.adsl.gvt.net.br)
[16:18:26] *** Joins: onelson_ (owen@moz-DD666EC5.laika.com)
[16:18:37] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[16:19:15] *** Joins: mib_4mrfww (Mibbit@6D71664E.48960495.CC1A2609.IP)
[16:19:54] *** Joins: osa1 (omer@324465FE.2545CD3.3688B332.IP)
[16:20:32] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Quit: )
[16:20:47] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[16:21:49] *** Quits: astroch (astroch@4971754E.6D4462A.DDE5D3F6.IP) (Ping timeout)
[16:22:01] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[16:22:35] *** Joins: astroch (astroch@4971754E.6D4462A.DDE5D3F6.IP)
[16:23:11] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[16:23:42] *** Joins: richo (richo@moz-F58EBDEF.static.ctinets.com)
[16:23:45] *** Joins: azakai (alon@moz-62518563.mtv2.mozilla.com)
[16:23:51] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[16:24:16] *** Quits: paulolieuthier (quassel@moz-A22ABC3D.dynamic.adsl.gvt.net.br) (Client exited)
[16:24:39] *** Joins: paulolieuthier (quassel@moz-A22ABC3D.dynamic.adsl.gvt.net.br)
[16:24:50] *** Joins: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP)
[16:24:55] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[16:25:33] *** Joins: tholbrook (Mibbit@B7D72BC.960BDC77.3A9B6B78.IP)
[16:25:44] *** Joins: generalelectrix (Mibbit@moz-EE8AF5F2.physics.berkeley.edu)
[16:27:51] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[16:28:36] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[16:29:10] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[16:30:11] *** Quits: edwardw (edwardw@C3D32C6E.E4C8743.30C05AB6.IP) (Ping timeout)
[16:30:29] <mgax> now it says: "cannot capture variable of type `Worker<,int,int>`, which does not fulfill `Send`, in a bounded closure"
[16:30:45] <mgax> and i'm not sure how to make my struct sendable
[16:30:56] *** Joins: edwardw (edwardw@4112974A.B4358688.30F15291.IP)
[16:30:58] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[16:31:55] <kimundi> mgax: Does it need to be sendable?
[16:32:10] *** Quits: richo (richo@moz-F58EBDEF.static.ctinets.com) (Ping timeout)
[16:32:33] <mgax> kimundi, what i really want to do is pass it into a task, which is going to call worker.run()
[16:33:07] <kimundi> okay, if you want to send it to another task then it needs to be sendable.
[16:33:14] <kimundi> What does your struct contain?
[16:33:15] <mgax> worker has minimal state: a reference to a Sender and to a lambda
[16:33:29] <kimundi> Neither references nor stack closures are sendable
[16:33:31] <mgax> https://gist.github.com/mgax/c0fb621a5b2c994a2c84
[16:33:39] <kimundi> which makes a struct containing them not sendable too
[16:33:44] *** Joins: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[16:34:45] <eddyb> mgax: Senders are supposed to be cloned
[16:34:50] <eddyb> mgax: or moved
[16:35:04] <mgax> ok, so the lambda is the problem?
[16:35:13] <eddyb> mgax: I think you can get a sendable "stack" closure with 'static |...|:Send
[16:35:15] <mgax> i can probably move it into the task too
[16:35:30] <eddyb> mgax: but that doesn't allow any captures
[16:35:39] <eddyb> mgax: how many times do you call the "lambda"?
[16:36:23] *** Quits: edwardw (edwardw@4112974A.B4358688.30F15291.IP) (Quit: Leaving...)
[16:36:24] <mgax> eddyb, the lambda is the worker's logic, so it gets called for each task
[16:36:41] <eddyb> ah, then you can't use procs
[16:36:42] <mgax> i moved its definition into the proc and everything is fine now
[16:36:53] <mgax> s/proc/task/
[16:37:15] <mgax> thank you! :)
[16:37:25] *** Joins: edwardw (edwardw@17C4C11E.3A7E5B9F.CBB0B5C2.IP)
[16:37:35] *** Quits: W0rmDr1nk (wormdrink@moz-CEAF0263.access.mtnbusiness.co.za) (Ping timeout)
[16:38:19] *** Quits: stephenmac7 (quassel@moz-C42B1C24.hsd1.fl.comcast.net) (Ping timeout)
[16:38:20] <generalelectrix> question on linking: in the FFI guide, everything is explicit and clear except this bit "The following is a minimal example of calling a foreign function which will compile if snappy is installed:"
[16:38:20] <generalelectrix>  I want to link to a C .lib file sitting in my source directory, but every example I've seen seems to involve some concept of the library being "installed".
[16:38:33] *** Joins: alisdair (textual@moz-7E6FA9C4.bchsia.telus.net)
[16:38:38] *** Quits: paulolieuthier (quassel@moz-A22ABC3D.dynamic.adsl.gvt.net.br) (Client exited)
[16:38:42] <cmr> generalelectrix: just add -L path/to/dir
[16:38:54] <cmr> generalelectrix: "installed" isn't necessary, just needs to be in the link path
[16:39:03] *** Quits: jvoorhis (jvoorhis@moz-384E18AD.ptld.qwest.net) (Client exited)
[16:39:24] *** Joins: jvoorhis (jvoorhis@moz-384E18AD.ptld.qwest.net)
[16:39:48] *** Joins: stephenmac7 (quassel@moz-C42B1C24.hsd1.fl.comcast.net)
[16:40:03] *** Quits: edwardw (edwardw@17C4C11E.3A7E5B9F.CBB0B5C2.IP) (Ping timeout)
[16:40:14] *** Joins: khodzha (khodzha@8DDE12C8.2AEE264E.CA6E2165.IP)
[16:40:44] *** Joins: edwardw (edwardw@9366486F.7FC992B3.B3B412E5.IP)
[16:41:00] *** Quits: khodzha1 (khodzha@9BE26321.3E410295.CA6E2165.IP) (Ping timeout)
[16:41:06] *** Quits: jvoorhis (jvoorhis@moz-384E18AD.ptld.qwest.net) (Ping timeout)
[16:41:58] *** Quits: dmsky (dmsky@moz-FF2573B1.pppoe.spdop.ru) (Quit: Leaving...)
[16:43:39] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[16:44:03] *** Quits: mib_4mrfww (Mibbit@6D71664E.48960495.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:44:45] <generalelectrix> ok thanks; so #[link(name = "ftdi2xx")] and when I compile add -L /path_to_the_dir_where_my_.lib_file_lives ?
[16:45:02] <cmr> yes.
[16:45:06] <generalelectrix> thanks!
[16:45:48] *** Joins: lpy (lpy@1834E2CB.F09091A8.1348A864.IP)
[16:46:02] <generalelectrix> attempting to create a rust implementation of the API for the enttec usb DMX dongle for writing lighting control software in Rust.
[16:46:33] *** Quits: rylev (rylev@2B2A255D.2EF83B5B.BB1701D8.IP) (Ping timeout)
[16:46:58] *** Quits: [o__o] (~o__o@604A2740.DB688352.F4ADE383.IP) (Input/output error)
[16:47:10] *** Joins: [o__o] (~o__o@604A2740.DB688352.F4ADE383.IP)
[16:47:38] * o11c read "lightning control" at first
[16:48:05] <generalelectrix> mwahahahaha
[16:48:42] *** Joins: Savago (Savago@7F2048F.E820043D.D4C04133.IP)
[16:48:47] <generalelectrix> "library for programming of intelligent lights with possible extensions to teslacoil  control"
[16:49:22] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Ping timeout)
[16:49:54] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[16:50:12] *** Quits: eatkinson-away (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Ping timeout)
[16:50:26] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[16:50:48] *** Quits: astroch (astroch@4971754E.6D4462A.DDE5D3F6.IP) (Ping timeout)
[16:51:34] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Ping timeout)
[16:53:52] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[16:54:00] *** Joins: eatkinson-away (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[16:54:38] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[16:55:06] *** Joins: astroch (astroch@6C5CBC66.BCCBF0DD.DDE5D3F6.IP)
[16:55:35] *** Quits: lpy (lpy@1834E2CB.F09091A8.1348A864.IP) (Client exited)
[16:56:02] *** Quits: edwardw (edwardw@9366486F.7FC992B3.B3B412E5.IP) (Ping timeout)
[16:56:53] *** Joins: azita (Azita@moz-62518563.mtv2.mozilla.com)
[16:56:57] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[16:57:00] *** Quits: lawrence (lawrence@moz-88A653EC.wireless.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[16:57:22] *** Quits: philix (felipe@moz-C7582C74.user.veloxzone.com.br) (Ping timeout)
[16:57:32] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[16:58:23] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Ping timeout)
[16:58:42] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[16:58:52] *** Quits: generalelectrix (Mibbit@moz-EE8AF5F2.physics.berkeley.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[16:58:54] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[16:59:13] *** Joins: vic (vic@moz-A4DD04C2.blinkenshell.org)
[16:59:24] *** Quits: heftig (heftig@moz-81A104E1.dip0.t-ipconnect.de) (Ping timeout)
[17:00:12] *** Quits: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: brendan)
[17:02:45] *** Joins: enos (jkingyens@moz-7A8F6201.hsd1.ca.comcast.net)
[17:03:14] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[17:03:51] *** Joins: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[17:04:37] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Quit: )
[17:04:50] *** Quits: astroch (astroch@6C5CBC66.BCCBF0DD.DDE5D3F6.IP) (Quit: Leaving)
[17:05:38] *** Quits: vikstrous (v@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[17:05:45] *** Quits: eatkinson-away (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Ping timeout)
[17:05:47] *** Quits: dapz (textual@moz-4F089C79.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[17:07:19] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[17:07:41] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[17:07:48] *** Joins: Kruppe (user@moz-D2D047AB.dynamic.uwaterloo.ca)
[17:07:52] *** Quits: Kxepal (Miranda@moz-BAA550EE.pppoe.mtu-net.ru) (Ping timeout)
[17:08:07] *** Quits: dranov (dranov@27F5E0CF.48454B76.E16F0CF5.IP) (Ping timeout)
[17:08:16] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[17:08:26] *** Joins: Kxepal (Miranda@moz-3D529086.pppoe.mtu-net.ru)
[17:13:12] *** Joins: josh (josh@moz-24AAF425.hfc.comcastbusiness.net)
[17:13:52] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:14:16] *** Joins: philix (felipe@moz-C7582C74.user.veloxzone.com.br)
[17:14:45] *** Joins: andrew-d_w (andrew-d_w@moz-17320F4E.hsd1.ca.comcast.net)
[17:14:50] *** Quits: andrew-d_w (andrew-d_w@moz-17320F4E.hsd1.ca.comcast.net) (Input/output error)
[17:15:23] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[17:17:48] *** Joins: voxpopuli (fanservice@AE8088FD.7254D4BA.689607DE.IP)
[17:18:06] *** Quits: comex (comex@moz-2484CD28.compute-1.amazonaws.com) (Quit: WeeChat 0.4.0)
[17:18:33] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[17:19:53] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[17:20:31] *** Joins: comex (comex@moz-2484CD28.compute-1.amazonaws.com)
[17:21:02] *** Quits: stephenmac7 (quassel@moz-C42B1C24.hsd1.fl.comcast.net) (Ping timeout)
[17:21:33] *** Joins: jvoorhis (jvoorhis@moz-384E18AD.ptld.qwest.net)
[17:21:38] <mgax> cmr, thanks for the encouragement with my worker queue code, i made a pull request: #13227
[17:22:21] *** Joins: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca)
[17:23:44] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[17:24:17] *** Quits: comex (comex@moz-2484CD28.compute-1.amazonaws.com) (Quit: WeeChat 0.4.0)
[17:24:19] *** Joins: comex (comex@moz-2484CD28.compute-1.amazonaws.com)
[17:24:40] *** Quits: leowoe (Leo@moz-C753E675.dip0.t-ipconnect.de) (Quit: Leaving.)
[17:24:54] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[17:25:41] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[17:26:19] *** Joins: stephenmac7 (quassel@moz-C42B1C24.hsd1.fl.comcast.net)
[17:26:28] *** Joins: vikstrous (v@13F2CEC5.7672369.D8E68FF6.IP)
[17:27:18] *** Joins: frozendevil (Adium@moz-62FB197F.com)
[17:27:56] *** Joins: edwardw (edwardw@586492D3.E4C8743.30C05AB6.IP)
[17:28:28] *** Quits: stephenmac7 (quassel@moz-C42B1C24.hsd1.fl.comcast.net) (Ping timeout)
[17:28:37] *** Joins: rylev (rylev@moz-7AFF9439.cust.telecolumbus.net)
[17:30:43] *** Quits: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl) (Quit: Computer gone to sleep - Zzzz...)
[17:30:49] *** Joins: stephenmac7 (quassel@moz-C42B1C24.hsd1.fl.comcast.net)
[17:30:58] *** Joins: tobytailor (tobytailor@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[17:37:05] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[17:37:09] <Tari> are there any guarantees about the in-memory layout of tuples?
[17:37:25] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[17:37:45] <o11c> Tari: I'm pretty sure, yes
[17:38:42] <sfackler> I believe it's the same as a struct containing those types in that order
[17:39:06] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[17:39:10] <Tari> Basically I want something like [(T, U)] that is [T, U, T, U] in memory
[17:39:37] *** Quits: philix (felipe@moz-C7582C74.user.veloxzone.com.br) (Ping timeout)
[17:39:57] <jdm> Tari: that's probably only the case if the alignment lines up right
[17:40:31] <Tari> I can enforce that alignment works on an individual basis
[17:40:45] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[17:40:45] *** ChanServ sets mode: +o tjc
[17:40:46] <jdm> like (u32, u8) would be [T, U, .., .., .., T, U, .., .., ..]
[17:41:00] <Tari> It's more like (T, T) where T: MyTrait
[17:41:00] <jdm> where T is actually T, T, T, T
[17:41:01] <benh> but it'd be that either way, wouldn't it
[17:41:43] <Tari> and I provide impl for MyTrait on a set of specific primitives
[17:41:44] *** Quits: rylev (rylev@moz-7AFF9439.cust.telecolumbus.net) (Broken pipe)
[17:42:38] *** Joins: Jesse (jruderman@moz-62518563.mtv2.mozilla.com)
[17:42:44] *** Quits: josh (josh@moz-24AAF425.hfc.comcastbusiness.net) (Quit: josh)
[17:43:27] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:43:53] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Quit: 전 이만 갑니다.)
[17:44:43] *** Quits: redShadow (redShadow@9BDAF02B.D15F9219.1CCF65D9.IP) (Quit: Leaving)
[17:45:18] *** Joins: philix (felipe@moz-C7582C74.user.veloxzone.com.br)
[17:45:43] *** Quits: rcxdude (rcxdude@moz-600BFD57.range86-179.btcentralplus.com) (Quit: Konversation terminated!)
[17:46:28] *** Quits: lfox (lfox@moz-89EEE1BF.nyc.res.rr.com) (Quit: ZZZzzz…)
[17:48:06] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Input/output error)
[17:49:57] *** Quits: kanru (kanru@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[17:50:29] <vic> curl: (6) Couldn't resolve host 'static.rust-lang.org'
[17:50:35] <vic> damn, this is a weird one 
[17:50:52] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:51:33] *** Quits: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: brendan)
[17:51:55] *** Joins: nszceta (nszceta@moz-E458A7C0.pharm.pitt.edu)
[17:52:04] *** Joins: jaredly (Mibbit@moz-405814B3.byu.edu)
[17:52:36] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[17:52:39] * vic  should enable chroot builds
[17:52:54] <jaredly> Can I have a function that takes a variable number of arguments? like *args in python?
[17:53:05] <o11c> jaredly: no
[17:53:08] <jaredly> :(
[17:53:19] <jaredly> is it planned?
[17:53:22] <o11c> you can do a *few* hacky things with tuples though
[17:53:58] <strcat> jaredly: use a slice if they're the same type
[17:54:00] * edwardw wishes some curry :)
[17:54:27] <jaredly> strcat: yeah I know I can...:( but I don't like the look of it as much
[17:55:00] <strcat> foo([1, 2, 3])? *shrug*
[17:55:24] *** Quits: Tohie (scott@D279FAF5.F0218A4F.9BC11B05.IP) (Ping timeout)
[17:55:33] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[17:55:48] * strcat would rather not have varargs as they're quite a complicated feature when they're type-safe
[17:55:54] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[17:56:00] *** Joins: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[17:56:11] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:56:17] <strcat> unless they just take elements of the same type and then it's pretty pointless...
[17:56:25] <Tari> at the machine level, passing a stack-allocated slice is nearly the same thing
[17:56:47] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[17:57:02] *** Quits: fazal (fazal@481796DA.DD69F2BB.E8916D75.IP) (Ping timeout)
[17:57:27] *** Quits: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: brendan)
[17:57:33] *** Quits: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP) (Connection reset by peer)
[17:57:43] <strcat> Tari: well, not to C varargs, which are really weird ;p
[17:58:16] *** Joins: samx (sami@3EB32A7C.10A53EE3.77834EAA.IP)
[17:58:28] <strcat> variadic generics with more than one type is handled via recursive pattern matching in C++...
[17:58:34] *** Quits: samx (sami@3EB32A7C.10A53EE3.77834EAA.IP) (Quit: This computer has gone to sleep)
[17:59:19] <strcat> they just use initializer lists (like our slices) for when it's the same type, despite having variadic generic functions
[17:59:26] *** Joins: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP)
[17:59:37] *** Joins: lfox (lfox@moz-89EEE1BF.nyc.res.rr.com)
[18:00:18] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[18:00:26] *** Joins: samx (sami@3EB32A7C.10A53EE3.77834EAA.IP)
[18:00:43] <jaredly> Yeah I'd be happy with them all being the same type -- like `fn foo(a: float, c: ..int) { // c is not a slice of integers }`
[18:00:46] <o11c> recursive isn't the only case, perfect forwarding is another
[18:00:49] <jaredly> s/not/now
[18:01:03] <o11c> passing an explicit || is annoying just do do that
[18:01:27] *** Joins: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[18:01:29] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[18:02:01] *** Joins: rylev (rylev@moz-7AFF9439.cust.telecolumbus.net)
[18:03:15] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[18:03:15] *** ChanServ sets mode: +ao brson brson
[18:03:26] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[18:03:44] *** Quits: fabiand (fabiand@moz-A3448D9E.adsl.alicedsl.de) (Quit: Verlassend)
[18:04:02] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[18:04:34] *** Joins: mib_8046ib (Mibbit@6D71664E.48960495.CC1A2609.IP)
[18:05:04] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[18:05:18] *** Quits: Kruppe (user@moz-D2D047AB.dynamic.uwaterloo.ca) (Ping timeout)
[18:06:59] *** Quits: willingc_ (willingc@moz-F095E013.san.res.rr.com) (Quit: Leaving...)
[18:07:43] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[18:07:46] *** Joins: p1start (rewi@moz-E7F3D014.org)
[18:07:49] *** Joins: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de)
[18:09:05] *** Quits: jaredly (Mibbit@moz-405814B3.byu.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[18:11:15] <det> strcat, init lists have very different semantics
[18:12:20] <det> strcat, varargs would be very unsuitable for initializing collections
[18:13:43] <strcat> det: talking about min/max
[18:13:58] <strcat> (and others like them)
[18:14:10] <det> <strcat> they just use initializer lists (like our slices) for when it's the same type, despite having variadic generic functions
[18:14:34] <det> the places C++ uses initializer_list would not be suitable to variadic templates at all
[18:14:46] <strcat> why wouldn't a variadic template work for min and max?
[18:15:00] *** Quits: cajbir (farv@moz-EC11DA4D.members.linode.com) (Ping timeout)
[18:15:00] *** Quits: Peng (mnordhoff@moz-D5175E95.mattnordhoff.net) (Ping timeout)
[18:15:18] <det> It would unroll the entire thing if it had 1 million elements instead of a loop
[18:15:23] *** Joins: sigma (sigma@moz-15A267A9.range109-152.btcentralplus.com)
[18:15:42] <strcat> llvm, gcc and icc will all put it back in a loop anyway
[18:15:49] <strcat> it's not like C++ generates good -O0 code either
[18:16:01] <det> I can test that theory
[18:16:02] *** Quits: Axord (xord@moz-BC8E2FBC.static.rvsd.ca.charter.com) (Quit: I'm sure it's perfectly safe)
[18:16:43] <strcat> LLVM is even gaining the ability to do loop-rerolling when there's a partially unrolled loop
[18:16:46] *** Joins: andrew-__ (andrew-d_w@C6A0796C.9DFA657C.CC0301A2.IP)
[18:16:48] <strcat> and loop unvectorization
[18:16:49] *** Joins: Axord (xord@moz-BC8E2FBC.static.rvsd.ca.charter.com)
[18:17:02] <mcpherrin> note: regex.o:(.debug_info+0x13700): undefined reference to `hashmap::INITIAL_LOG2_CAP::h10f342658dbaf397Pwd::v0.10.pre'
[18:17:04] *** Quits: alisdair (textual@moz-7E6FA9C4.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:17:05] <mcpherrin> wut?
[18:17:23] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[18:17:26] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[18:17:45] *** Joins: willingc (willingc@moz-F095E013.san.res.rr.com)
[18:18:03] <mcpherrin> loop re-rolling is sweet with -Os and autogenerating gobs and gobs of c++ code :P
[18:18:24] <strcat> mcpherrin: it's more intended for letting LLVM unroll it again though ;p
[18:18:37] <strcat> the loop-vectorize pass is unroll-aware
[18:18:47] <strcat> normal unrolling is a fallback afaik
[18:19:03] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[18:19:59] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[18:21:23] <cmr> mcpherrin: bug with debuginfo in statics, already filed
[18:21:42] <mcpherrin> cmr: how to workaround?
[18:21:47] <cmr> disable debuginfo.
[18:21:51] <cmr> :(
[18:22:02] <mcpherrin> :(
[18:22:29] * mcpherrin hopes somebody fixes by the time I get home from work ;)
[18:24:10] *** Joins: alisdair (textual@moz-7E6FA9C4.bchsia.telus.net)
[18:24:56] *** Quits: mib_8046ib (Mibbit@6D71664E.48960495.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:25:54] *** Quits: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: brendan)
[18:26:19] *** Joins: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[18:27:34] *** Joins: tophattom (Mibbit@moz-D83E4CDD.tp-fne.tampereenpuhelin.net)
[18:27:44] *** Quits: zmack (zmack@DD657A1.5B5BE14C.E400A05F.IP) (Ping timeout)
[18:29:28] *** Quits: tophattom (Mibbit@moz-D83E4CDD.tp-fne.tampereenpuhelin.net) (Quit: http://www.mibbit.com ajax IRC Client)
[18:29:57] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[18:31:12] <kmc> my custom test program which calls test::test_main doesn't seem to run tests in parallel, even though that's supposed to be the default
[18:31:21] *** Quits: alisdair (textual@moz-7E6FA9C4.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:31:27] <kmc> i don't see an option for it, either
[18:31:48] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[18:31:57] *** Quits: p1start (rewi@moz-E7F3D014.org) (Ping timeout)
[18:34:12] *** Joins: skade (skade@moz-21DF672C.dip0.t-ipconnect.de)
[18:35:28] *** Joins: Tohie (scott@D279FAF5.F0218A4F.9BC11B05.IP)
[18:37:18] *** Quits: samx (sami@3EB32A7C.10A53EE3.77834EAA.IP) (Quit: Leaving)
[18:37:34] *** Quits: ganitsu (ganitsu@moz-C151274C.dialup.adsl.anteldata.net.uy) (Quit: WeeChat 0.4.1)
[18:38:21] *** Joins: mye (mye@moz-38772F70.vpn.ipredator.se)
[18:40:02] <det> http://goo.gl/PwsHi7 // unrolled vs loop
[18:41:43] *** Joins: claudiu (claudiu@moz-6F0C4397.thefacebook.com)
[18:42:39] *** Joins: frogzilla (Mibbit@6D71664E.48960495.CC1A2609.IP)
[18:43:20] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:43:55] *** Joins: chc4 (chc4@moz-29F9F3F1.hsd1.ma.comcast.net)
[18:44:42] *** Joins: dapz (textual@moz-4F089C79.hsd1.ca.comcast.net)
[18:45:11] *** Quits: frogzilla (Mibbit@6D71664E.48960495.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:45:21] <det> http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2772.pdf // and numbers to back it up
[18:45:35] *** Quits: qwerty_nor (Thunderbir@A5447B90.EDC74FC5.E19950A4.IP) (Quit: qwerty_nor)
[18:46:23] *** Joins: tyna (liadon@moz-BB1BAD9A.dynamic.chello.pl)
[18:46:48] <kmc> switching to run_tests_console doesn't make it parallel either
[18:48:05] <acrichto> kmc: make sure that RUST_THREADS and RUST_TEST_TASKS are both not 1
[18:48:09] <acrichto> and that you have more than one core
[18:48:29] *** Joins: adonohue (adonohue@55513BD.95D3F462.59D8BB03.IP)
[18:48:50] *** Quits: rylev (rylev@moz-7AFF9439.cust.telecolumbus.net) (Client exited)
[18:49:30] *** Joins: bugweiser (Mibbit@6D71664E.48960495.CC1A2609.IP)
[18:50:17] <kmc> no luck
[18:50:40] <kmc> I have 4 cores (× 2-way HT) and some other custom testsuites run in parallel, like Servo's reftest / contenttest
[18:50:52] <kmc> I'm worried there's something non-obvious in the code I'm testing that serializes it
[18:50:59] <kmc> but I really don't know what that would be
[18:51:08] <strcat> det: clang rerolls it if it's longer
[18:51:10] <acrichto> kmc: do you see colors?
[18:51:20] <strcat> det: it's under the heuristic that way
[18:51:42] <det> strcat, you mean 24 elements is not enough ?
[18:51:46] <strcat> yes
[18:51:51] *** Quits: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: brendan)
[18:51:55] <strcat> unless you change the reroll parameter
[18:52:11] *** Joins: pczarn (pczarn@moz-69A55FA.izacom.pl)
[18:52:19] <strcat> rust used to be really dumb and output [0, ..10000] as 10k instructions
[18:52:23] <strcat> and llvm would make a loop for us
[18:52:25] <strcat> ;p
[18:52:38] <det> thats impressive
[18:53:06] <strcat> that was also before there was the dedicated loop reroller
[18:53:40] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[18:54:01] *** Quits: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net) (Ping timeout)
[18:54:10] *** Quits: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP) (Ping timeout)
[18:54:29] <strcat> det: anyway I guess the problem is that it trusts the programmer too much
[18:54:30] <det> There are numbers in that paper for 0-30 arity showing the init_list form to be faster
[18:54:45] <det> and clang and g++ generate similar code at this arity
[18:54:49] <strcat> one day they'll treat it like `register` ;p
[18:55:23] <det> perhaps :)
[18:55:31] <Ms2ger> Can we have 'register' in rust, please? :)
[18:55:46] <det> Ms2ger, I thought you hated borrowing from C++ ?
[18:55:50] <strcat> Ms2ger: when llvm adds named register support, sure
[18:56:04] <strcat> then you can write it in the inline asm
[18:56:06] <Ms2ger> det, nah, I hate C++ itself :)
[18:56:11] <strcat> and it won't change it
[18:56:36] <strcat> hm
[18:57:47] *** Joins: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP)
[18:57:53] <eddyb> strcat: huh?
[18:58:00] <eddyb> strcat: you can already do {ax}
[18:58:09] *** Joins: heftig (heftig@moz-6F5F67C4.dip0.t-ipconnect.de)
[18:58:10] <eddyb> (unless you meant something else)
[18:58:40] <strcat> eddyb: http://gcc.gnu.org/onlinedocs/gcc/Global-Reg-Vars.html
[18:58:46] *** Joins: pupoque1 (Adium@297D6F99.EF706C30.C0C64AB3.IP)
[18:59:04] <Ms2ger> eddyb, {ax}? What is this, MS-DOS?
[18:59:16] <eddyb> Ms2ger: that include rax
[18:59:17] <eddyb> or al
[18:59:21] <eddyb> *includes
[18:59:28] <kmc> acrichto: in the test runner output? no, not in the servo runners that do go in parallel, either
[18:59:30] <eddyb> strcat: aah, fake pointers
[18:59:38] *** Quits: pupoque (Adium@297D6F99.EF706C30.C0C64AB3.IP) (Ping timeout)
[18:59:52] <acrichto> kmc: color means sequential, no color means it's running in parallel
[19:00:04] <strcat> eddyb: well you name them and it has to reserve them
[19:00:09] <strcat> eddyb: you can crash the register allocator
[19:00:23] <strcat> I guess you can probably do it with inline asm too
[19:00:32] *** Quits: nszceta (nszceta@moz-E458A7C0.pharm.pitt.edu) (Quit: Textual IRC Client: www.textualapp.com)
[19:00:51] <strcat> -fcheck-stack -fno-omit-frame-pointer zaps 2 more registers at various points
[19:00:54] <det> I dont think llvm will be able to reroll that loop in general, since its from arbitrary variables and not an array
[19:01:17] <strcat> det: ah, right
[19:01:21] *** Quits: hoverbea_ (hoverbear@726D908C.44E18222.E74D50F2.IP) (Quit: Taking a nap.)
[19:02:04] <strcat> there's SROA but no AROS ;)
[19:02:15] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: brb)
[19:02:23] *** Joins: nszceta (nszceta@moz-41C8060B.wireless.pitt.edu)
[19:02:25] *** Quits: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca) (Quit: canhtak)
[19:02:36] *** Joins: markos (markos@moz-2EDACE01.adsl.cyta.gr)
[19:02:41] <alan_andrade> Does any one know where can I find the video where wycats presents how he's using rust to monitor ruby apps ?
[19:03:33] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[19:03:33] *** ChanServ sets mode: +ao pcwalton pcwalton
[19:03:40] *** Joins: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[19:04:32] *** Joins: Armavica_ (virgile@moz-AD428ED7.ens.fr)
[19:04:36] <eddyb> aww where'd strcat go?
[19:04:55] <eddyb> I wanted to send him to the land of crazy https://github.com/rust-lang/rfcs/pull/24
[19:05:07] *** Joins: Florob (Florob@moz-39532932.de)
[19:05:23] *** Joins: alexandp (weBeThread@BCD2EF9E.335C641C.D3B5A672.IP)
[19:05:24] <kmc> acrichto: i'm basing the claim that it's sequential on getting only 103% CPU utilization, also it's no slower with taskset -c 1
[19:06:14] <acrichto> kmc: you're sure the tests aren't just running serially due to some other reason?
[19:06:43] <kmc> I'm not sure, but I'm trying to determine if that's the case
[19:06:47] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:06:56] <acrichto> can you follow the test logs interactively?
[19:07:00] <kmc> I don't know why they would be -- this should be pure computation
[19:07:03] <kmc> how do you mean?
[19:07:09] <acrichto> if you see "test <name> ..." and *then* see "ok/fail" it's serial
[19:07:10] *** Joins: claudiu_ (claudiu@moz-6F0C4397.thefacebook.com)
[19:07:14] *** Quits: claudiu (claudiu@moz-6F0C4397.thefacebook.com) (Connection reset by peer)
[19:07:23] <acrichto> if you only ever see "test <name> ... ok/fail" then it's running in parallel
[19:07:25] <acrichto> or at least trying to
[19:07:27] <kmc> gdb shows one thread in the greenthread scheduler, one in the code under test, and the rest in libuv (13 threads total)
[19:08:02] <acrichto> that's pretty normal, gdb isn't good at showing what green tasks are live
[19:08:25] *** Joins: claudiu (claudiu@8ECC4BFC.EC83738C.D8D85ABD.IP)
[19:08:26] <kmc> yeah I don't see the "ok" appear separately
[19:08:43] *** Joins: janra (Janus@1CDC5701.A48867D7.52E4E107.IP)
[19:08:44] <acrichto> it sounds like something else may be in play
[19:08:49] *** Quits: koomi (koomi@moz-41AD638A.uberspace.de) (Ping timeout)
[19:08:59] *** Quits: claudiu_ (claudiu@moz-6F0C4397.thefacebook.com) (Ping timeout)
[19:10:07] *** Quits: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: brendan)
[19:10:22] <kmc> do I need any special flags to compile a custom test runner? i'm just doing rustc test/mod.rs  (with some -L flags)
[19:10:30] <alexandp> Hi all, I'm learning rust and was wondering if there's a way to reference the elements in: http://static.rust-lang.org/doc/master/tutorial.html#move-semantics without using match
[19:11:05] *** Joins: claudiu_ (claudiu@moz-33191099.thefacebook.com)
[19:11:10] *** Quits: dapz (textual@moz-4F089C79.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:11:53] *** Quits: claudiu (claudiu@8ECC4BFC.EC83738C.D8D85ABD.IP) (Ping timeout)
[19:11:58] <geal> alexandp: "let Cons(x, y) = list;" -> x will be the head, y the rest
[19:12:28] <kmc> I don't think that's allowed, because it might be Nil instead
[19:12:34] <kmc> you can only use irrefutable patterns in "let"
[19:12:57] <kmc> alexandp: you can write enum List { Cons { car: u32, cdr: ~List }, Nil }  at least with some #[feature(...)] flag
[19:13:10] <kmc> but I think you still wouldn't be allowed to do list.car because, again, what if it's Nil?
[19:13:19] <Ms2ger> So match list { Cons(x, y) => ..., Nil => ..., }
[19:13:23] <geal> oh, that's right
[19:13:57] <alexandp> geal, kmc: thanks, that makes sense. I appreciate the help!
[19:14:15] <kmc> Haskell allows field projection on sum types but it's a run-time failure if the tag is wrong :(
[19:14:46] <eddyb> "fields" in Haskell are silly though
[19:15:07] *** Quits: adonohue (adonohue@55513BD.95D3F462.59D8BB03.IP) (Quit: adonohue)
[19:15:18] <kmc> remember this the next time somebody tells yout that Haskell is uncompromisingly pure and perfect
[19:15:37] <kmc> it's actually a (good) programming language with its own set of tradeoffs and compromises :)
[19:15:44] *** Joins: keret (Mibbit@B4B3E778.78F322B4.93816666.IP)
[19:15:46] <geal> haskellers are already moving to idris anyway :p
[19:16:13] <kmc> haha
[19:16:14] <eddyb> without fancy graphs, I can't tell between Idris and Haskell
[19:16:27] <eddyb> since the syntax is identical at a glance
[19:17:21] *** Quits: Armavica_ (virgile@moz-AD428ED7.ens.fr) (Quit: leaving)
[19:17:25] <geal> dependent types is a big difference
[19:17:38] <eddyb> but I can't *see* them (hence the graphs
[19:17:40] <eddyb> )
[19:17:45] *** Quits: pupoque1 (Adium@297D6F99.EF706C30.C0C64AB3.IP) (Ping timeout)
[19:19:06] *** Joins: Peng (mnordhoff@moz-D5175E95.mattnordhoff.net)
[19:19:12] *** Joins: pupoque (Adium@297D6F99.EF706C30.C0C64AB3.IP)
[19:19:15] *** Joins: cajbir (farv@moz-EC11DA4D.members.linode.com)
[19:19:17] *** Joins: mgottschlag (quassel@moz-AEA0F6B0.hsi6.kabel-badenwuerttemberg.de)
[19:19:18] *** Joins: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl)
[19:19:42] *** Quits: keret (Mibbit@B4B3E778.78F322B4.93816666.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:19:45] <kmc> "i don't even see the types anymore"
[19:20:04] <geal> dependent types were discussed for rust, right? What was the conclusion? Too complex for the programmer?
[19:20:09] *** Joins: mib_zrldjb (Mibbit@B4B3E778.78F322B4.93816666.IP)
[19:20:28] <eddyb> perfect time for strcat to be here and he ain't
[19:20:39] *** Joins: fazal (fazal@95976038.10ACF6AA.FEC4A986.IP)
[19:20:45] <kmc> they were?
[19:20:48] <eddyb> geal: discussed? not that I remember
[19:20:58] <Tobba> is there any compiler flag to disable all safety checks?
[19:20:59] <kmc> I mean C++ has a limited form in that you can template on integers and stuff
[19:21:04] <kmc> that would make sense in Rust too
[19:21:08] <eddyb> Tobba: no and there will never be
[19:21:11] <Tobba> I can get away with that really nicely when running through emscripten
[19:21:11] <kmc> you can't do most of the fancy dependent type stuff, though
[19:21:20] <kmc> Tobba: you can?
[19:21:20] <eddyb> kmc: those aren't dependent types
[19:21:25] *** Quits: philix (felipe@moz-C7582C74.user.veloxzone.com.br) (Ping timeout)
[19:21:27] <Tobba> well
[19:21:39] <Tobba> I mean runtime checks, at least
[19:21:45] <Tobba> not the static ones of course
[19:22:04] <Tobba> since it would be running in JS it would cause an exception there, albeit a bit harder to trace
[19:22:13] <kmc> if your emscripten program loads untrusted content and has a buffer overflow, then it can potentially be exploited to gain XSS-like privileges in the hosting page
[19:22:35] <eddyb> shared heap is fun
[19:22:52] <geal> buffer overflows in emscripten generated code might not result in eip rewriting
[19:22:54] <Tobba> doesnt it just pretend the heap is there any everything you malloc is secretly just an array of bytes?
[19:22:54] <kmc> I've been meaning to make a proof-of-concept of this
[19:23:03] <eddyb> Tobba: no
[19:23:04] <chc4> Hm. I don't see how that would happen, since it would only control the flow of asm.js
[19:23:08] <chc4> Not the underlaying browser
[19:23:11] <eddyb> it's not "asm.js"
[19:23:19] <eddyb> it's a subset of JS
[19:23:26] <eddyb> Tobba: there is only one shared heap
[19:23:31] <Tobba> well shit
[19:23:31] <eddyb> chc4: that's enough to cause damage
[19:23:40] <Tobba> yeah thats enough to cause damage
[19:23:41] <Ms2ger> kmc, you're loading untrusted JS code into your page, and you're surprised it can touch your page?
[19:24:17] <chc4> eddyb: It would mess up the targetted program, but shouldn't be able to arbitrarily affect the DOM, unless asm.js had some helper functions for that
[19:24:18] <kmc> Ms2ger: no, I'm loading a PNG from the network and parsing it with libpng and I'm surprised that it can pop alert('hello world')
[19:24:27] <kmc> (because there's a buffer overflow in libpng, say)
[19:24:38] <kmc> except I'm not surprised, but I'm explaining it for people who might be
[19:24:46] <Ms2ger> Ah
[19:24:46] <kmc> geal: no, indeed, "function pointers" can only point to the beginning of a function, because they're just indices in a table
[19:25:00] *** Joins: philix (felipe@moz-C7582C74.user.veloxzone.com.br)
[19:25:47] <kmc> a memory safety violation in emscripten-compiled code doesn't compromise the browser sandbox, any more than a memory safety violation in a native Linux program compromises the kernel
[19:25:55] <kmc> but people still care about the latter :)
[19:26:09] <kmc> (also, getting code exec at all is the first step to attacking the sandbox or kernel)
[19:26:25] <geal> thankfully, emscripten is not about simulating a whole x86 cpu in js :)
[19:26:28] <chc4> kmc: Wouldn't the exploit in emscripten only allow control over the program being ran, not the entire webpage though
[19:26:47] <o11c> it could potentially allow control over the whole page
[19:26:47] <kmc> chc4: emscripten code can execute arbitrary JS strings
[19:26:57] *** Joins: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca)
[19:26:57] <Tobba> oh boy gotta build zlib on windows and then link that in with FFI
[19:26:59] <kmc> https://github.com/kripken/emscripten/wiki/Interacting-with-code#calling-javascript-from-cc
[19:27:00] <chc4> kmc: Wow, I didn't know that.
[19:27:04] <Tobba> interestingly enough the building part is actually the most complicated
[19:27:10] *** Quits: asmyers (quassel@783EA696.9A737B8F.FAA4474F.IP) (Ping timeout)
[19:27:28] <kmc> so you get XSS on the whole domain hosting the emscripten app
[19:27:34] <Tobba> compiling zlib on windows past like... 1.2.5 is godawful
[19:27:54] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[19:28:24] *** Quits: jackneill (jackneill@moz-67205168.pool.digikabel.hu) (Input/output error)
[19:28:25] *** Joins: rylev (rylev@moz-7AFF9439.cust.telecolumbus.net)
[19:29:02] <Tobba> oh hey, nevermind actually
[19:29:09] <eddyb> kmc: ahh libpng. one of the many reasons for writing a pure rust PNG decoder
[19:29:16] <Tobba> looks like 1.2.8 added the ability to build on windows without the whole build being an entire huge hack
[19:29:24] *** Joins: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[19:29:27] <eddyb> kmc: that and libxml. fun stuffs
[19:29:49] <Tobba> eddyb: does your PNG lib support text chunks?
[19:30:07] <eddyb> sure, but it throws them out
[19:30:07] <Tobba> otherwise I guess I'll have to make a PR
[19:30:14] <eddyb> it's not up ^-^
[19:30:19] <Tobba> crap
[19:30:29] <Tobba> I wonder how that thing would hold up in the browser
[19:30:39] <Tobba> my JS version of this project was even weirder
[19:30:51] <eddyb> it does better than libpng for small images, IIRC
[19:30:57] <Tobba> it would let the browser chew through the PNG file then badly parse it itself
[19:31:04] <kmc> so yeah while exploiting code inside Emscripten is certainly harder than native (even with NX + ASLR), it's not impossible and probably easier than exploiting code inside valgrind / asan
[19:31:09] <Tobba> and then run some horrible JS implementation of zlib
[19:31:14] <geal> if one day people choose rust libs over C/C++ libs to include in their projects, that will be a great step :)
[19:31:25] <eddyb> it should eventually let you render a partial image via OpenGL parameters, for interlacing and whatnot
[19:31:25] <Tobba> it would then run that same shitty zlib implementation on 30MB of data but thats another story
[19:32:02] <Tobba> Cannot open include file: 'windows.h': No such file or directory
[19:32:03] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[19:32:06] <Tobba> how does this even happen
[19:32:10] *** Joins: wilmoore (wilmoore@moz-1248C037.mystrotv.com)
[19:32:11] <eddyb> magic
[19:32:18] <eddyb> (and something with friendship)
[19:32:23] <Tobba> (no)
[19:32:25] <Tobba> (definitely NO)
[19:32:36] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[19:32:39] <Tobba> interestingly enough the include paths look normal so that statement should work
[19:32:57] <Tobba> looks like the build is still hell but hey at least the projects are still there
[19:33:15] <Tobba> previously you had to rip them out of an older version because they decided to deprecate them and remove any proper windows support out the ass
[19:33:57] *** Joins: Kruppe (user@moz-655267C2.dynamic.uwaterloo.ca)
[19:34:46] *** Joins: jaredly (jaredly@moz-C4E51CD4.hsd1.ut.comcast.net)
[19:35:32] <Tobba> (because lets face it, if you dont have the possibility for a VS build you're not properly supporting windows)
[19:35:54] <eddyb> windows should just stay still
[19:35:57] <eddyb> and not need support
[19:36:14] <eddyb> someone should teach Microsoft how to make windows
[19:36:23] *** Joins: adonohue (adonohue@55513BD.95D3F462.59D8BB03.IP)
[19:36:27] <eddyb> because they seem to be really bad at it
[19:36:30] *** Quits: fazal (fazal@95976038.10ACF6AA.FEC4A986.IP) (Ping timeout)
[19:37:08] *** Quits: Seich (seich@moz-3D9F5ED0.webfaction.com) (Ping timeout)
[19:37:22] <Tobba> heh yeah
[19:37:27] *** Joins: Seicht (seich@moz-3D9F5ED0.webfaction.com)
[19:37:45] <Tobba> VC++ is kinda de-facto for windows tho
[19:38:22] <Tobba> apparently, they do offer dodgy builds of zlib in binary form
[19:38:24] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[19:38:28] <Tobba> I dont even care anymore this is better than having to build that crpa
[19:38:29] <alexandp> Hi, sorry for the stupid question but can someone help me understand why line 22 fails but 11 doesn't? My (likely incorrect) understanding is that the print function should "move" the list to the function so they should be the same. http://pastebin.com/gmm7BUH1
[19:39:18] *** Quits: doener (doener@moz-C68F600D.unity-media.net) (Quit: leaving)
[19:39:20] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[19:39:57] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[19:40:28] <kmc> what's the failure?
[19:40:35] *** Quits: bugweiser (Mibbit@6D71664E.48960495.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:41:04] <alexandp> kmc: "failed to find an implementation of trait std::fmt::Default for T" Maybe I should finish the tutorial before expanding on the early examples?
[19:41:14] *** Joins: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu)
[19:41:28] <silven> alexandp: because you say T, not a printable T
[19:41:32] <kmc> fn print<T: fmt::Default>(l: List<T>) { ... }
[19:41:50] <kmc> inside 'main' the type is known to be List<&'static str> or something
[19:42:18] *** Quits: edwardw (edwardw@586492D3.E4C8743.30C05AB6.IP) (Quit: Leaving...)
[19:42:40] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:43:16] *** Joins: kngl (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP)
[19:43:20] <alexandp> silvan, kmc: gotcha. So is there a way to make a generic printer?
[19:43:22] <geal> Tobba: when I worked on Windows dev, libs like zlib and openssl were in "the folder where we build binaries once a year and copy them everywhere, stored on a machine that is never touched"
[19:43:22] *** Joins: edwardw (edwardw@B5386878.16F55560.50B134B9.IP)
[19:43:39] <Tobba> oh god openssl
[19:43:39] <Tobba> the pain
[19:43:49] <Tobba> zlib wasent THAT bad before they killed off the projects directory tho
[19:44:03] <Tobba> it was mostly just "hit compile when you need it then copy that everywhere"
[19:44:29] <Tobba> now its "perform wizardry" to counter the wizardry they used to manage to break this
[19:45:01] <geal> openssl is wizardry even when you use it...
[19:45:18] <Tobba> there is a broken nmake file
[19:45:22] <Tobba> in theory that could work
[19:45:47] <Tobba> I thought it was more broken than it actually was at first because it would somehow accept my broken as heck command
[19:45:49] <Tobba> damn name
[19:45:50] <kmc> alexandp: I said how above :)
[19:46:12] *** Quits: dschatzberg (dschatzber@moz-4CB3F0EE.bu.edu) (Input/output error)
[19:46:38] <alexandp> kmc: Oh, sorry. I misunderstood that line. thanks for the help!
[19:46:47] <kmc> np :)
[19:47:34] <mcpherrin> 55d~.
[19:48:46] <kmc> E16: Invalid range
[19:49:19] *** Quits: mcpherrin (mcpherrin@moz-464166A4.hsd1.ca.comcast.net) (Ping timeout)
[19:50:20] *** Quits: adonohue (adonohue@55513BD.95D3F462.59D8BB03.IP) (Quit: adonohue)
[19:52:20] *** Quits: sigma (sigma@moz-15A267A9.range109-152.btcentralplus.com) (Ping timeout)
[19:54:11] *** Joins: papanikge (papanikge@moz-5DE35D0F.access.hol.gr)
[19:54:27] *** Joins: alkino_ (alkino@moz-B4A66306.w92-151.abo.wanadoo.fr)
[19:54:35] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[19:55:59] *** Quits: janra (Janus@1CDC5701.A48867D7.52E4E107.IP) (Ping timeout)
[19:56:46] <brson> i still could use a really concise representative example of rust code for the home page
[19:57:40] <kimundi> brson: As comparison, whats wrong with whats there now?
[19:58:10] *** Quits: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca) (Quit: canhtak)
[19:59:03] *** Quits: papanikge (papanikge@moz-5DE35D0F.access.hol.gr) (Quit: WeeChat 0.4.3)
[19:59:37] <kimundi> Or in other words: How concise does it need to be?
[20:00:04] *** Quits: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl) (Ping timeout)
[20:00:05] <mgax> i think the homepage example is a bit hard to follow because of the variable names
[20:00:11] <mgax> they are too similar
[20:00:17] *** Quits: nszceta (nszceta@moz-41C8060B.wireless.pitt.edu) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:00:38] <Tobba> wait
[20:00:39] *** Quits: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: brendan)
[20:00:42] <Tobba> why did I just spend time binding zlib
[20:00:52] <Tobba> I completely forgot theres a decompressor in libcompress or something like that
[20:00:54] *** Quits: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net) (Ping timeout)
[20:01:06] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:01:09] *** Joins: nszceta (nszceta@moz-41C8060B.wireless.pitt.edu)
[20:01:12] <Tobba> libflate
[20:01:17] <Tobba> I am feeling very intelligent right now
[20:01:21] *** Quits: nszceta (nszceta@moz-41C8060B.wireless.pitt.edu) (Quit: Textual IRC Client: www.textualapp.com)
[20:01:43] <brson> kimundi: the names are an inside distraction; the example is meaningless, lessening the impact;
[20:02:11] <brson> it doesn't really show anything that is unique to rust
[20:02:19] *** Joins: claudiu (claudiu@moz-6F0C4397.thefacebook.com)
[20:02:31] <brson> does that example entice anybody?
[20:02:35] <brson> it's just dull
[20:02:40] *** Quits: claudiu_ (claudiu@moz-33191099.thefacebook.com) (Ping timeout)
[20:02:44] <kimundi> I see
[20:03:15] <brson> maybe we'll keep it if we can't come up with something better, but i hope we can
[20:03:43] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[20:04:25] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:04:49] <Tobba> rust\src\libflate\lib.rs:82
[20:04:53] <Tobba> or maybe binding zlib was a good idea
[20:05:11] *** Joins: daschl (Adium@CB401D19.ED8EB9E6.127DF16D.IP)
[20:05:27] <Tobba> that cut off weirdly, anyways
[20:05:34] <Tobba> turns out it fails if you provide it invalid data
[20:05:46] *** Joins: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[20:06:06] <Tari> libflate just wraps zlib anyway, IIRC
[20:06:50] <kimundi> brson: Hm, where Rust excels is safe references and linear types, I'm not sure how to get a good example for that... A linked list? 
[20:06:59] *** Joins: nszceta (nszceta@moz-E458A7C0.pharm.pitt.edu)
[20:08:09] *** Joins: sigma (sigma@C91C7F36.70518F41.9D18269F.IP)
[20:10:44] *** Quits: jaredly (jaredly@moz-C4E51CD4.hsd1.ut.comcast.net) (Client exited)
[20:11:27] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[20:11:27] *** ChanServ sets mode: +o tjc
[20:11:29] *** Quits: mceier (mceier@moz-C1591437.dynamic.chello.pl) (Quit: leaving)
[20:12:02] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[20:12:02] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:12:32] *** Joins: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca)
[20:12:45] *** Joins: fenster (Mibbit@moz-7AD9232F.rev.numericable.fr)
[20:13:33] *** Quits: pczarn (pczarn@moz-69A55FA.izacom.pl) (Input/output error)
[20:13:43] <apollow> Been having troubles compiling rustc in windows lately
[20:13:59] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:14:36] <apollow> does anyone know if these commands should be good enough for it? Igit clone https://github.com/mozilla/rust.git && cd rust && ./configure && make && make check
[20:14:45] <apollow> i'm probably missing something here...
[20:15:31] <diverse> "make install"?
[20:15:40] *** Joins: lkuper (lkuper@moz-AD4C50F5.dhcp-bl.indiana.edu)
[20:15:41] *** Quits: sigma (sigma@C91C7F36.70518F41.9D18269F.IP) (Connection reset by peer)
[20:16:02] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[20:16:27] <apollow> make check gets me errors
[20:16:33] <apollow> so I cannot do a make install yet
[20:16:52] <apollow> I've been encountering this problem during the make check
[20:16:58] <apollow> ←[0mmake: *** [i686-pc-mingw32/stage1/bin/rustlib/i686-pc-mingw32/bin/compiletest.exe] Error 101
[20:17:07] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[20:17:17] <apollow> because of this...
[20:17:19] <apollow> ←[0mC:\MinGW\msys\1.0\home\git\rust\src\compiletest\runtest.rs:533:26: 533:27 ←[
[20:17:19] <apollow> 31merror: ←[0m←[1mmismatched types: expected `&[char]` but found `std::vec::Vec<
[20:17:19] <apollow> char>` (expected vector but found struct std::vec::Vec)
[20:17:19] <apollow> ←[0mC:\MinGW\msys\1.0\home\git\rust\src\compiletest\runtest.rs:533         str::
[20:17:19] <apollow> from_chars( c )
[20:17:41] *** Joins: claudiu_ (claudiu@moz-33191099.thefacebook.com)
[20:17:52] *** Quits: claudiu (claudiu@moz-6F0C4397.thefacebook.com) (Ping timeout)
[20:18:22] *** Joins: adonohue (adonohue@55513BD.95D3F462.59D8BB03.IP)
[20:21:27] *** Joins: apollow2 (apollow2@moz-52F6097D.dhcp.trlk.ca.charter.com)
[20:21:33] *** Quits: apollow (yellowy432@moz-52F6097D.dhcp.trlk.ca.charter.com) (Quit: )
[20:22:14] *** Joins: ap4y (ap4y@92E20F51.A4EE7592.FD81FCD2.IP)
[20:23:35] *** Quits: edwardw (edwardw@B5386878.16F55560.50B134B9.IP) (Quit: Leaving...)
[20:24:16] *** Quits: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu) (Client exited)
[20:24:30] *** Joins: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu)
[20:24:50] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[20:26:17] *** Quits: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu) (Client exited)
[20:26:41] *** Joins: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu)
[20:27:15] *** Quits: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu) (Client exited)
[20:28:50] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[20:29:07] *** Quits: lkuper (lkuper@moz-AD4C50F5.dhcp-bl.indiana.edu) (Quit: lkuper)
[20:29:33] *** Quits: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP) (Quit: leaving)
[20:29:37] *** Joins: mcpherrin (mcpherrin@moz-464166A4.hsd1.ca.comcast.net)
[20:29:38] *** Quits: ahunt (ahunt@moz-6D6D79D6.cable.virginm.net) (Ping timeout)
[20:29:39] *** Joins: hacker_sam (hacker_sam@moz-23CA551A.kennesaw.edu)
[20:30:31] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[20:30:45] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[20:31:22] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[20:31:48] *** Quits: Zor (alexrp@moz-B01F40E3.rev.stofanet.dk) (Ping timeout)
[20:32:29] *** Quits: mib_zrldjb (Mibbit@B4B3E778.78F322B4.93816666.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:32:36] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[20:33:40] *** Joins: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu)
[20:34:05] *** Quits: rchar (chatzilla@moz-9AC54D4D.lv.lv.cox.net) (Ping timeout)
[20:34:06] *** Quits: sankha93 (sankha93@7061CD01.D6BD0D91.22D41759.IP) (Client exited)
[20:34:39] <det> Is it true that the naive definition of a list in the tutorial will stack overflow on destruction for large lists? Code: enum List { Cons(u32, ~List), Nil }
[20:35:05] <brson> det: yes
[20:35:15] <det> Ok, thanks.
[20:35:16] <brson> dtors can be a space hazard
[20:35:20] *** Quits: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu) (Ping timeout)
[20:35:27] <myname> lol
[20:35:39] *** Quits: kngl (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP) (Quit: Leaving.)
[20:36:37] *** Quits: Seicht (seich@moz-3D9F5ED0.webfaction.com) (Ping timeout)
[20:36:58] *** Joins: Seicht (seich@moz-3D9F5ED0.webfaction.com)
[20:39:57] *** Joins: kngl (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP)
[20:45:21] *** Joins: rcxdude (rcxdude@moz-600BFD57.range86-179.btcentralplus.com)
[20:46:11] <Tobba> gotta love having to build a new compiler before you can get back to work
[20:48:31] *** Quits: pepijndevos (pepijndevo@9EACEF43.E50A3180.BCE47D84.IP) (Max SendQ exceeded)
[20:48:40] *** Joins: pepijndevos (pepijndevo@9EACEF43.E50A3180.BCE47D84.IP)
[20:48:54] *** Quits: Nekit1234007 (Nekit12340@4D86C49F.ABE6C08B.4707F662.IP) (Ping timeout)
[20:51:02] *** nrc is now known as nrc|afk
[20:51:59] *** Quits: hacker_sam (hacker_sam@moz-23CA551A.kennesaw.edu) (Ping timeout)
[20:52:01] *** Joins: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl)
[20:52:05] *** Quits: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: brendan)
[20:52:27] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: Textual IRC Client: www.textualapp.com)
[20:53:42] *** Quits: andrew-__ (andrew-d_w@C6A0796C.9DFA657C.CC0301A2.IP) (Input/output error)
[20:54:04] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[20:54:19] <kmc> det: aiui you can write your own dtor to avoid that problem: https://github.com/mozilla/rust/blob/master/src/libcollections/dlist.rs#L423-L443
[20:54:26] *** Joins: hacker_sam (hacker_sam@moz-23CA551A.kennesaw.edu)
[20:55:16] *** Quits: Sorella (quildreen@AA4589ED.97245BEB.1ED99692.IP) (Quit: Ex-Chat)
[20:56:58] *** Quits: azita (Azita@moz-62518563.mtv2.mozilla.com) (Quit: azita)
[20:57:17] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[20:58:48] *** Joins: zmack (zmack@moz-B210ACA5.residential.rdsnet.ro)
[20:59:50] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[20:59:50] *** Joins: azita (Azita@moz-62518563.mtv2.mozilla.com)
[21:00:08] *** Quits: adonohue (adonohue@55513BD.95D3F462.59D8BB03.IP) (Quit: adonohue)
[21:00:30] *** Quits: hacker_sam (hacker_sam@moz-23CA551A.kennesaw.edu) (Ping timeout)
[21:01:21] *** Quits: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP) (Ping timeout)
[21:01:21] *** Quits: marshall_law (marshall@BCC5EC56.B2070AF7.505F6A0C.IP) (Ping timeout)
[21:02:11] *** Quits: alexandp (weBeThread@BCD2EF9E.335C641C.D3B5A672.IP) (Ping timeout)
[21:02:19] *** Joins: hacker_sam (hacker_sam@moz-23CA551A.kennesaw.edu)
[21:02:38] *** Joins: maxli1 (Adium@moz-F47DD19B.student.cs.uwaterloo.ca)
[21:02:41] *** Quits: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca) (Ping timeout)
[21:02:54] *** Quits: Kruppe (user@moz-655267C2.dynamic.uwaterloo.ca) (Ping timeout)
[21:03:52] *** Joins: Nekit1234007 (Nekit12340@987F2484.B242805A.4707F662.IP)
[21:04:10] *** Quits: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de) (Connection reset by peer)
[21:04:16] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Connection reset by peer)
[21:04:24] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[21:04:59] *** Joins: marshall_law (marshall@BCC5EC56.B2070AF7.505F6A0C.IP)
[21:05:04] *** Quits: Tohie (scott@D279FAF5.F0218A4F.9BC11B05.IP) (Ping timeout)
[21:07:19] <det> kmc, Ya, I figured, you can do the same with unique_ptr in C++ :)
[21:07:22] *** Joins: txdv (quassel@966F3542.3BA477DA.14C26596.IP)
[21:07:25] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[21:07:26] *** Joins: koomi (koomi@moz-41AD638A.uberspace.de)
[21:08:22] <kmc> interesting, I never thought about that but I guess one might need to :)
[21:08:24] *** Quits: hacker_sam (hacker_sam@moz-23CA551A.kennesaw.edu) (Ping timeout)
[21:08:31] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:08:48] <det> kmc, why is that destructor unsafe ?
[21:08:54] <det> I would think you can do this safely
[21:09:18] <kmc> I forgot exactly what unsafe_destructor means
[21:09:27] <kmc> it's something non-obvious
[21:09:42] *** aatch|work is now known as aatch
[21:09:42] <o11c> I think it's "that attribute you stick on when the compiler complains"
[21:09:44] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Quit: Linkinus - http://linkinus.com)
[21:09:47] <kmc> :-)
[21:09:48] <det> unique_ptr list safely destructed http://ideone.com/tH6KJH
[21:10:09] *** Joins: papanikge (papanikge@moz-EA855683.access.hol.gr)
[21:10:11] *** Quits: chc4 (chc4@moz-29F9F3F1.hsd1.ma.comcast.net) (Ping timeout)
[21:10:19] <aatch> kmc, you can get type punning in generic destructors
[21:10:21] <kmc> "cannot implement a destructor on a structure that does not satisfy Send" and "cannot implement a destructor on a structure with type parameters" are two restrictions that go away with #[unsafe_destructor]
[21:10:24] *** Joins: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP)
[21:10:43] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:10:54] <det> I see
[21:10:56] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Connection reset by peer)
[21:11:04] *** Joins: hacker_sam (hacker_sam@moz-23CA551A.kennesaw.edu)
[21:11:15] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[21:11:44] *** Joins: fazal (fazal@C1AFA36B.DD69F2BB.E8916D75.IP)
[21:13:11] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[21:13:26] *** Quits: mgottschlag (quassel@moz-AEA0F6B0.hsi6.kabel-badenwuerttemberg.de) (Ping timeout)
[21:13:43] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[21:14:00] *** Joins: chc4 (chc4@moz-29F9F3F1.hsd1.ma.comcast.net)
[21:14:52] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Ping timeout)
[21:14:54] <fazal> is there a index for Rust libraries?
[21:15:05] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[21:15:27] <bvssvni> fazal: http://www.rust-ci.org/
[21:15:29] <steveklabnik> fazal: http://www.rust-ci.org/projects/ is lcose
[21:15:30] <steveklabnik> close
[21:15:38] *** Joins: Zor (alexrp@moz-B01F40E3.rev.stofanet.dk)
[21:15:47] <mcpherrin> ... welp I guess I was too slow at typing the same URL :)
[21:16:19] *** Quits: hacker_sam (hacker_sam@moz-23CA551A.kennesaw.edu) (Ping timeout)
[21:16:40] * bvssvni things IRC time should show milliseconds
[21:16:44] <bvssvni> *thinks
[21:16:45] <fazal> bvssvni: steveklabnik thanks 
[21:17:51] *** Joins: robhobbes (robert@moz-9B3FF613.slc.googlefiber.net)
[21:18:10] *** Joins: jroweboy (Mibbit@moz-B0B6A670.provo.static.broadweavenetworks.net)
[21:18:25] *** Quits: Savago (Savago@7F2048F.E820043D.D4C04133.IP) (Quit: Savago)
[21:18:42] *** Quits: fenster (Mibbit@moz-7AD9232F.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[21:19:01] <robhobbes> Hey, guys. I am trying to do some file reading and I want to do something different depending on the kind of error I get (if an error occurs), why is it that my match block on the error says that FileNotFound is the only possible error? It seems like PermissionDenied would be a possible error.
[21:19:51] <bvssvni> robhobbes: can you post some code at gist.github.com?
[21:19:52] <aatch> robhobbes, you're probably not importing the enums, so it's binding to `FileNotFound` as a variable.
[21:20:16] <robhobbes> aatch: that makes sense. what do I need to import?
[21:20:38] <aatch> robhobbes, all the variants you're using.
[21:20:41] <robhobbes> I'm importing this: use std::io::{File, IoError, IoErrorKind};
[21:21:01] <robhobbes> so I need to specifically import "FileNotFound" and ""PermissionDenied" ?
[21:21:30] *** Quits: gimpf (gimpf@moz-66A5AAF0.adsl.highway.telekom.at) (Quit: Leaving.)
[21:21:30] *** Quits: Seicht (seich@moz-3D9F5ED0.webfaction.com) (Ping timeout)
[21:21:35] *** Joins: hacker_sam (hacker_sam@moz-23CA551A.kennesaw.edu)
[21:21:45] <aatch> robhobbes, well you don't *need* to, if you import `std::io` then you can just use `io::FileNotFound`
[21:21:45] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Connection reset by peer)
[21:21:57] *** Joins: Seicht (seich@moz-3D9F5ED0.webfaction.com)
[21:22:00] <robhobbes> aatch: got it. I'll try that
[21:22:03] *** Quits: willingc (willingc@moz-F095E013.san.res.rr.com) (Client exited)
[21:22:04] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[21:22:12] *** Joins: Armavica_ (virgile@moz-AD428ED7.ens.fr)
[21:22:23] *** Joins: willingc (willingc@moz-F095E013.san.res.rr.com)
[21:22:28] *** Quits: Armavica_ (virgile@moz-AD428ED7.ens.fr) (Quit: leaving)
[21:23:19] *** Quits: rcxdude (rcxdude@moz-600BFD57.range86-179.btcentralplus.com) (Ping timeout)
[21:23:48] *** Quits: Seicht (seich@moz-3D9F5ED0.webfaction.com) (Ping timeout)
[21:24:09] *** Quits: willingc (willingc@moz-F095E013.san.res.rr.com) (Ping timeout)
[21:24:33] *** Joins: Seicht (seich@moz-3D9F5ED0.webfaction.com)
[21:25:51] *** Joins: drawoc (drawoc@moz-BAC1D3AB.res-cmts.sesh.ptd.net)
[21:25:58] *** Joins: rcxdude (rcxdude@moz-600BFD57.range86-179.btcentralplus.com)
[21:26:42] <robhobbes> aatch: That is working. Thank you.
[21:26:52] <aatch> robhobbes, np
[21:27:18] *** Joins: companion_cube (simon@moz-F48A362B.cedeela.fr)
[21:27:38] *** Joins: dpc (Mibbit@moz-88B014CD.nvidia.com)
[21:27:43] <dpc> Where did max and min went?
[21:27:56] <companion_cube> hi, I have a question about what rust could theoretically do: would it be possible to define, in a library, a smart pointer that stores its data on disk?
[21:28:05] <companion_cube> (or in a compressed memory area)
[21:28:10] <bvssvni> dpc: http://static.rust-lang.org/doc/master/std/cmp/fn.max.html
[21:28:48] <aatch> companion_cube, I guess it would be possible.
[21:28:56] <jdm> companion_cube: sure. make it generic, have a |new| method that takes data, writes it to disk and stores the filename in the struct
[21:28:57] <dpc> bvssvni: Thank you.
[21:28:59] *** huon|afk is now known as huon
[21:29:00] <jdm> or even just the filehandle
[21:29:20] <companion_cube> jdm: I was more thinking about a memory-mapped  file
[21:29:31] <companion_cube> so a pointer would be 'filehandle + offset'
[21:29:32] *** Joins: mgottschlag (quassel@moz-D1E45B95.hsi4.kabel-badenwuerttemberg.de)
[21:29:33] <mcpherrin> You'd have to come up with some scheme of flushing data back to disk
[21:29:49] <companion_cube> and you could have other disk-pointers to the same file, inside
[21:29:56] <det> Does the Rust stdlib have any map containers that can contain duplicate values ?
[21:30:02] <companion_cube> so you could write and handle data structures directly on disk
[21:30:18] <mcpherrin> I suppose if you returned an mmaped file the OS does that for you.
[21:30:34] <aatch> To my knowledge there's no requirement that a smart pointer actually be pointer-sized.
[21:30:37] <mcpherrin> but you could do it yourself with read(), write(), and buffers
[21:30:49] <mcpherrin> Well, you just implement the Deref and DerefMut traits, right?
[21:30:54] <aatch> mcpherrin, correct
[21:30:56] <mcpherrin> Easy-peasy
[21:31:00] <companion_cube> sounds really neat
[21:31:08] <companion_cube> thanks
[21:31:47] <aatch> companion_cube, the main issue is figuring out how to create a good API for it, but that's hardly Rust (or smart-pointer) specific.
[21:32:01] <o11c> C++ std::shared_ptr is 2 pointers in size
[21:32:18] <o11c> (because it has a separate opaque owner vs actual pointer)
[21:32:19] <companion_cube> are you sure of that?
[21:32:31] <o11c> (which is awesome)
[21:32:49] <o11c> (you can make a shared_ptr that points to just one field from what's owned by another shared pointer)
[21:33:05] *** Joins: weirdo (Mibbit@moz-33A64217.skierniewice.vectranet.pl)
[21:33:10] <bvssvni> det: not sure what you mean, perhaps this http://static.rust-lang.org/doc/master/collections/hashmap/struct.HashMap.html ?
[21:33:50] *** Quits: weirdo (Mibbit@moz-33A64217.skierniewice.vectranet.pl) (Quit: http://www.mibbit.com ajax IRC Client)
[21:33:51] *** Joins: adonohue (adonohue@55513BD.95D3F462.59D8BB03.IP)
[21:35:30] <det> bvssvni, doesnt allow duplicates
[21:36:10] <Tobba> I just recompiled rust, whats with this
[21:36:11] <Tobba> error: found possibly newer version of crate `std` which `native` depends on
[21:36:17] <Tobba> extern crate serialize;
[21:36:22] <bvssvni> det: can you use Rc<V> with it?
[21:36:27] <Tobba> pretty sure I dont have any older versions of anything lingering around
[21:37:45] <Tobba> oh heck, it didnt build std for some reason
[21:40:02] *** Quits: eholk (eholk@moz-BA312F07.crest.iu.edu) (Quit: eholk)
[21:40:07] <det> bvssvni, I dont think you understand
[21:40:44] <det> bvssvni, duplicates means I can insert the same key into it multiple times
[21:41:17] <bvssvni> det: oh, I think you said values
[21:41:35] <det> ok, my mistake
[21:41:47] <huon> det: `HashMap<K, Vec<V>>` ?
[21:41:56] <det> huon, less than ideal
[21:42:00] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:42:34] <huon> det: what's an example of the data structure you want from another language?
[21:42:50] <det> huon, std::unordered_multimap
[21:43:33] *** Quits: papanikge (papanikge@moz-EA855683.access.hol.gr) (Quit: WeeChat 0.4.3)
[21:43:54] <aatch> goddamn I hate C++ containers
[21:44:07] <det> why ?
[21:44:14] *** Joins: dranov (dranov@2C236D73.807AF119.A5830293.IP)
[21:44:39] <aatch> At least the maps. The API's are just so confusing.
[21:44:58] <aatch> I guess it's pretty much just the maps actually.
[21:45:20] <huon> det: we don't have a direct equivalent to that in the stdlib (or in any library I know of), so you'll either have to implement one, or make do with a less than ideal alternative for now :)
[21:45:25] *** Quits: fazal (fazal@C1AFA36B.DD69F2BB.E8916D75.IP) (Ping timeout)
[21:45:28] <det> huon, ok, thanks
[21:45:37] *** Joins: fazal (fazal@C1AFA36B.DD69F2BB.E8916D75.IP)
[21:46:34] <aatch> That said, an implementation of a multimap in Rust would be rather similar to `HashMap<K, Vec<V>>`
[21:48:45] <det> not necessarily
[21:48:50] *** Parts: robhobbes (robert@moz-9B3FF613.slc.googlefiber.net) ()
[21:48:52] *** Quits: Ms2ger (Ms2ger@moz-4CB19774.adsl-dyn.isp.belgacom.be) (Ping timeout)
[21:49:16] *** Quits: rylev (rylev@moz-7AFF9439.cust.telecolumbus.net) (Client exited)
[21:49:37] *** Joins: rylev (rylev@moz-7AFF9439.cust.telecolumbus.net)
[21:49:52] <zmack> gets, did feature enabling change in edge ?
[21:50:02] <zmack> i.e. these things ? #![feature(macro_rules)]
[21:50:40] *** Joins: willingc (willingc@moz-F095E013.san.res.rr.com)
[21:51:04] *** Quits: vvde (user@A43B0C.55F69189.FD99A9CE.IP) (Ping timeout)
[21:51:25] *** Quits: rylev (rylev@moz-7AFF9439.cust.telecolumbus.net) (Ping timeout)
[21:51:31] <zmack> ah, they lost the bang in edge
[21:52:26] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[21:52:26] *** ChanServ sets mode: +o tjc
[21:53:42] <mcpherrin> rusti: () = "abc def".words().peekable()
[21:53:47] -rusti- pastebinned 8 lines of output: http://ix.io/bnU
[21:54:11] *** Quits: paraze (paraze@moz-F2628701.w90-27.abo.wanadoo.fr) (Client exited)
[21:54:21] <mcpherrin> Is there any sane way to make a function take one of those iterators without writing out that type ^
[21:54:22] *** Joins: paraze (paraze@moz-F2628701.w90-27.abo.wanadoo.fr)
[21:54:41] *** Quits: twi (Adium@moz-429185BE.cust.vodafonedsl.it) (Ping timeout)
[21:54:41] *** Quits: hacker_sam (hacker_sam@moz-23CA551A.kennesaw.edu) (Ping timeout)
[21:54:56] <mcpherrin> std::iter::Peekable<&str,std::iter::Filter<,&str,std::str::CharSplits<,fn(char) -> bool>>> is kinda crazy (especially if I want to make an example...
[21:54:58] *** Joins: twi (Adium@moz-429185BE.cust.vodafonedsl.it)
[21:55:29] *** Joins: vvde (user@A43B0C.55F69189.FD99A9CE.IP)
[21:55:46] <bvssvni> mcpherrin: you declare a type
[21:55:47] *** Joins: hacker_sam (hacker_sam@moz-23CA551A.kennesaw.edu)
[21:55:56] <bvssvni> *can
[21:56:00] <myname> iterator of strings, i'd say, but i would have to look it up
[21:56:18] <aatch> mcpherrin, You can also take generic type bounded by the correct iterator type.
[21:56:35] <mcpherrin> aatch: good point, much saner
[21:57:00] *** flaper87 is now known as flaper87|afk
[21:57:29] <aatch> fn foo<'s, I:Iterator<&'s str>>(iter: I)
[21:59:03] *** Quits: alexbobp (alex@moz-C908EC50.pwnz.org) (Ping timeout)
[21:59:04] *** Joins: leowoe (Leo@moz-C753E675.dip0.t-ipconnect.de)
[21:59:51] *** Quits: willingc (willingc@moz-F095E013.san.res.rr.com) (Client exited)
[22:00:20] *** Joins: willingc (willingc@moz-F095E013.san.res.rr.com)
[22:00:34] *** Quits: NiccosSystem (NiccosSyst@moz-ED196BB4.customer.lyse.net) (Ping timeout)
[22:01:35] *** Quits: vikstrous (v@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[22:02:01] *** Quits: willingc (willingc@moz-F095E013.san.res.rr.com) (Ping timeout)
[22:02:01] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[22:02:32] *** Quits: daschl (Adium@CB401D19.ED8EB9E6.127DF16D.IP) (Ping timeout)
[22:02:32] *** Quits: alonlevy_ (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[22:02:37] *** Quits: hacker_sam (hacker_sam@moz-23CA551A.kennesaw.edu) (Ping timeout)
[22:03:36] *** Joins: Ms2ger (Ms2ger@moz-98421F60.adsl-dyn.isp.belgacom.be)
[22:04:07] *** Joins: hacker_sam (hacker_sam@moz-23CA551A.kennesaw.edu)
[22:04:32] *** Joins: daschl (Adium@CB401D19.ED8EB9E6.127DF16D.IP)
[22:05:49] *** jorendorff is now known as jorendorff_away
[22:06:14] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[22:06:39] *** Joins: alonlevy_ (alon@moz-EB7C9CF3.telavivmakers.org)
[22:06:41] *** Joins: frau (frau@moz-377BE2CD.hsd1.ca.comcast.net)
[22:06:44] *** Quits: det (chris@moz-EAECB432.lv.lv.cox.net) (Connection reset by peer)
[22:06:45] <hoverbear> Hey folks, are there any JSON parsers?
[22:07:07] <mcpherrin> Yes!
[22:07:08] *** Quits: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[22:07:10] <darnuria>  In libserialize?
[22:07:17] <darnuria> (I presume_
[22:07:21] <mcpherrin> on rust-ci I think
[22:07:27] <hoverbear> darnuria: I see it there
[22:07:38] <hoverbear> serialize::json, thanks!
[22:07:51] *** Quits: dranov (dranov@2C236D73.807AF119.A5830293.IP) (Ping timeout)
[22:07:55] <darnuria> http://static.rust-lang.org/doc/master/serialize/json/index.html
[22:08:07] *** Joins: alexbobp (alex@moz-C908EC50.pwnz.org)
[22:08:08] <darnuria> hoverbear: ^ Link to the docs :_
[22:08:17] <hoverbear> darnuria: Already there, thanks!
[22:08:34] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:08:56] *** Joins: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[22:09:07] *** Quits: alonlevy_ (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[22:09:54] <hoverbear> Might be off topic: Anyone know any good presentation libs for html? Was using Impress but having compatability issues.
[22:10:06] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[22:10:40] *** Quits: Ms2ger (Ms2ger@moz-98421F60.adsl-dyn.isp.belgacom.be) (Quit: nn)
[22:10:47] <darnuria> hoverbear: Presentation lib?
[22:10:49] *** Joins: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net)
[22:10:56] *** Quits: hacker_sam (hacker_sam@moz-23CA551A.kennesaw.edu) (Ping timeout)
[22:10:57] <hoverbear> darnuria: Like, I want to make something like this http://www.hoverbear.org/gov-2014-impress/#/overview
[22:11:25] <hoverbear> darnuria: Doesn't need to be 3d, of course.
[22:11:26] <SiegeLord> Reveal js seems popular... I think it looks like garbage though
[22:11:42] *** Joins: meyer (meyermagic@moz-BE585629.cruznet.ucsc.edu)
[22:11:42] <hoverbear> SiegeLord: Yeah.
[22:11:48] <SiegeLord> I'm a LaTeX+Beamer guy... but that's not helpful here :)
[22:11:53] <darnuria> Ah ok something like full HTML5 `prezi` like?
[22:12:00] *** Joins: dsyang (dsyang@A71B4A90.543193DA.689607DE.IP)
[22:12:05] <hoverbear> darnuria: It'll 'do', but that's about it.
[22:12:08] <darnuria> I don't know.
[22:12:21] *** Joins: hacker_sam (hacker_sam@moz-23CA551A.kennesaw.edu)
[22:12:23] <hoverbear> darnuria: Yeah, was just asking.  :) Thanks for thinking on it.
[22:12:57] <hoverbear> Shame though, I really really liked Impress.
[22:13:32] *** Quits: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca) (Quit: canhtak)
[22:17:32] *** Quits: exobit_ (textual@moz-E06F46F0.corp.bitshelter.com) (Quit: )
[22:17:36] <huon> aatch: a multimap could use an open-addressing style scheme putting everything into the flat hashmap allocation
[22:18:32] *** Quits: hacker_sam (hacker_sam@moz-23CA551A.kennesaw.edu) (Ping timeout)
[22:18:32] *** Quits: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com) (Ping timeout)
[22:18:51] *** Joins: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca)
[22:18:53] *** Quits: q66 (q66@moz-46D931B3.range86-152.btcentralplus.com) (Ping timeout)
[22:18:53] *** Quits: rcxdude (rcxdude@moz-600BFD57.range86-179.btcentralplus.com) (Ping timeout)
[22:19:15] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:19:56] <Tobba> ughhh
[22:19:57] <Tobba> what
[22:19:58] <Tobba> ←[31merror: ←[0m←[1mcould not write output: Error opening output file 'i686-pc-m
[22:19:58] <Tobba> ingw32\stage0\bin\rustlib\i686-pc-mingw32\bin\rustc.o': The system cannot find t
[22:19:58] <Tobba> he path specified
[22:20:09] <Tobba> ←[31merror: ←[0m←[1mcould not write output: Error opening output file 'i686-pc-mingw32\stage0\bin\rustlib\i686-pc-mingw32\bin\rustc.o': The system cannot find the path specified
[22:20:24] <Tobba> I like how the control codes are screwed up too
[22:20:28] *** Quits: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net) (Ping timeout)
[22:20:53] <Tobba> I've done ./configure, make clean then make
[22:21:22] *** Quits: ap4y (ap4y@92E20F51.A4EE7592.FD81FCD2.IP) (Client exited)
[22:21:24] *** Quits: paraze (paraze@moz-F2628701.w90-27.abo.wanadoo.fr) (Client exited)
[22:21:24] *** Joins: q66 (q66@moz-46D931B3.range86-152.btcentralplus.com)
[22:21:24] *** Quits: jroweboy (Mibbit@moz-B0B6A670.provo.static.broadweavenetworks.net) (Quit: http://www.mibbit.com ajax IRC Client)
[22:21:27] *** Joins: rcxdude (rcxdude@moz-600BFD57.range86-179.btcentralplus.com)
[22:21:32] *** Joins: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com)
[22:22:44] *** Joins: det (chris@moz-EAECB432.lv.lv.cox.net)
[22:22:45] *** Joins: mib_by847b (Mibbit@6D71664E.48960495.CC1A2609.IP)
[22:23:23] *** Quits: fazal (fazal@C1AFA36B.DD69F2BB.E8916D75.IP) (Ping timeout)
[22:23:42] <hoverbear> SiegeLord: Reveal doesn't even work in IE :(
[22:23:56] <SiegeLord> Heh
[22:24:50] *** Joins: alisdair (textual@moz-7E6FA9C4.bchsia.telus.net)
[22:25:08] <Tobba> not sure if latest is broken in mingw or if it just dislikes me today
[22:25:09] *** Joins: robhobbes (robert@moz-9B3FF613.slc.googlefiber.net)
[22:25:15] *** Joins: fazal (fazal@4035BE2E.DD69F2BB.E8916D75.IP)
[22:25:18] *** Quits: IanCormac84 (User@D1ECE5F7.64D641E5.67DFF8B4.IP) (Ping timeout)
[22:26:08] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:26:15] <robhobbes> Hey guys! Is there an easy easy way to get the mime type of a file in rust?
[22:26:19] *** Joins: IanCormac84 (User@DE714B65.64D641E5.67DFF8B4.IP)
[22:26:41] <hoverbear> robhobbes: Would that information be availble to stat?
[22:26:58] <robhobbes> hoverbear: I don't know. Let me check
[22:27:02] <tiffany> I do not think POSIX specifies a struct stat field for it
[22:27:04] <hoverbear> robhobbes: Looking as well.
[22:27:10] <tiffany> in fact, the only OS I know of that stores MIME types is HaikuOS
[22:27:58] <robhobbes> tiffany: I know that if you do "file --mime-type -b myfile" in ubuntu it will return the mime type
[22:28:01] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[22:28:04] <mcpherrin> freedesktop has a http://freedesktop.org/wiki/Software/shared-mime-info/
[22:28:16] <tiffany> yeah, there is the `file` utility
[22:28:24] <mcpherrin> my `file` doesn't have --mime-type...
[22:28:33] <robhobbes> tiffany: I know that PHP and Java both have ways to get the mime type of a file
[22:28:36] <mcpherrin> nvm I'm dumb
[22:28:36] <tiffany> that relies on a database of fuzzy matches for various types of files
[22:28:45] *** Parts: jesse98 (jjones@6251EDC2.15651213.B46B86FA.IP) ()
[22:28:51] <tiffany> they probably map extension -> mime type
[22:28:56] <robhobbes> tiffany: it is better than trying to do it by hand
[22:29:09] <hoverbear> robhobbes: At the very least you can do a shell call.
[22:29:41] <robhobbes> hoverbear: I supposed... I was hoping for a better solution (and one that is more platform independent)
[22:29:41] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[22:29:55] <hoverbear> robhobbes: Definitely. How would you get it in C?
[22:30:14] *** Quits: dsyang (dsyang@A71B4A90.543193DA.689607DE.IP) (Client exited)
[22:30:14] <robhobbes> hoverbear: I dunno.
[22:30:16] *** Quits: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl) (Quit: Computer gone to sleep - Zzzz...)
[22:30:27] <hoverbear> robhobbes: Okay. :)
[22:31:02] *** Quits: lfox (lfox@moz-89EEE1BF.nyc.res.rr.com) (Quit: ZZZzzz…)
[22:31:28] <hoverbear> robhobbes: Here's the docs for File http://static.rust-lang.org/doc/master/std/io/fs/struct.File.html
[22:31:31] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[22:32:02] <robhobbes> hoverbear: yeah I was looking there and hoping someone else had an answer
[22:32:06] *** Quits: cschneid (cschneid@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[22:32:30] <huon> strcat has bindings to libmagic
[22:32:45] <huon> https://github.com/thestinger/rust-magic
[22:33:19] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[22:33:31] *** Quits: IanCormac84 (User@DE714B65.64D641E5.67DFF8B4.IP) (Ping timeout)
[22:33:54] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Ping timeout)
[22:33:56] *** Quits: mib_by847b (Mibbit@6D71664E.48960495.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:34:03] *** Joins: IanCormac84 (User@9D0C98C4.64D641E5.67DFF8B4.IP)
[22:34:46] <robhobbes> huon: I guess that is an option
[22:35:39] *** Quits: meyer (meyermagic@moz-BE585629.cruznet.ucsc.edu) (Quit: Bye)
[22:35:56] *** Joins: ChrisMorgan (chris@moz-8DCBEA52.vic.adsl.internode.on.net)
[22:36:40] <aatch> libmagic *is* the way you'd do it in C
[22:36:43] *** Joins: hacker_sam (hacker_sam@moz-23CA551A.kennesaw.edu)
[22:36:59] <hoverbear> robhobbes: Stat doesn't contain Content-type or Mime-type (http://static.rust-lang.org/doc/master/std/io/struct.FileStat.html) ... The std::fs doesn't seem to have anything at first glance (http://static.rust-lang.org/doc/master/std/io/fs/index.html) ...
[22:37:14] <mcpherrin> how do I write a literal { in format!
[22:37:20] <mcpherrin> \{ doesn't work.
[22:37:35] <aatch> mcpherrin, you have to escape the '\', so "\\{"
[22:37:39] <aatch> or use raw strings
[22:37:53] <mcpherrin> aatch: oh, I get it. thanks.
[22:37:57] <aatch> rusti: r#"ab\{"#
[22:37:58] -rusti- ab\{
[22:38:27] <robhobbes> aatch: but libmagic is a linux thing right?
[22:38:41] *** Joins: devbug (quassel@moz-8C40558B.bchsia.telus.net)
[22:39:49] <aatch> robhobbes, I dunno. But there isn't a platform-independent way of reliably getting mime-type information.
[22:40:11] *** Quits: hacker_sam (hacker_sam@moz-23CA551A.kennesaw.edu) (Connection reset by peer)
[22:40:17] <robhobbes> aatch: alright, thanks
[22:40:18] <hoverbear> robhobbes: Can you detect the file type some other way?
[22:40:51] *** Quits: IanCormac84 (User@9D0C98C4.64D641E5.67DFF8B4.IP) (Ping timeout)
[22:40:59] <robhobbes> hoverbear: I'm not sure how libmagic does it. I'll have to do some research. It is possible to just use the extension, but I dunno how unreliable that is...
[22:41:02] <mcpherrin> hooray, I can dot-ify my DFAs http://i.imgur.com/L1dcAH3.png
[22:41:18] <hoverbear> robhobbes: I mean can you do it without looking at mime-types?
[22:41:19] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:41:42] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[22:42:17] <robhobbes> hoverbear: well I actually need the mime-type. We're building a web framework
[22:42:36] <hoverbear> robhobbes: Oh you want it for in http?
[22:42:46] <robhobbes> hoverbear: yup
[22:42:56] <hoverbear> robhobbes: Look at the extension of the file name.
[22:43:02] <hoverbear> robhobbes: It's the most reliable way.
[22:43:24] *** Quits: frau (frau@moz-377BE2CD.hsd1.ca.comcast.net) (Quit: out)
[22:43:30] <robhobbes> hoverbear: yeah, I was thinking I would just do that... I would just need a big mapping of extension to mime-type
[22:43:34] <hoverbear> robhobbes: Most people won't include mime-types anyways (for reasons we saw above), so you need to figure it out yourself.
[22:44:12] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Quit: Leaving.)
[22:44:23] <hoverbear> robhobbes: Mime types only really matter for the http side of things. Things you're serving to the client for web pages and display. You could probably get away with less then 30.
[22:44:25] <huon> hoverbear: "most reliable way"?? surely looking at the actual content via libmagic is more reliable
[22:44:28] *** Quits: matp (matp@moz-16FE1E05.matp.at) (Ping timeout)
[22:44:35] <hoverbear> huon: WIthout getting into a library.
[22:44:36] <huon> (although it's probably overkill for this situation)
[22:44:41] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:44:43] <mcpherrin> huon: eh, libmagic can get confused fairly easily
[22:45:08] <mcpherrin> File extensions at least say what the user intended :P
[22:45:09] *** Quits: kngl (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP) (Quit: Leaving.)
[22:45:38] <hoverbear> If I recall correctly even apache makes you declare your mime-types in the servers config.
[22:45:56] <robhobbes> Okay. Thanks, guys. I think I'll just do it based on extension.
[22:46:22] *** Joins: ecr (chatzilla@moz-EE515B72.dhcp4.washington.edu)
[22:46:43] *** Quits: zmack (zmack@moz-B210ACA5.residential.rdsnet.ro) (Ping timeout)
[22:46:56] <hoverbear> robhobbes: Here's what apache does http://askubuntu.com/questions/258780/how-to-add-mime-type-for-the-apache-webserver
[22:47:03] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Ping timeout)
[22:47:08] *** Quits: adonohue (adonohue@55513BD.95D3F462.59D8BB03.IP) (Quit: adonohue)
[22:47:18] *** Quits: mgottschlag (quassel@moz-D1E45B95.hsi4.kabel-badenwuerttemberg.de) (Ping timeout)
[22:48:42] *** Quits: io2 (io2@moz-EE406A5.home.otenet.gr) (Quit: ...take irc away, what are you? genius, billionaire, playboy, philanthropist)
[22:48:55] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[22:49:10] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[22:50:03] *** Joins: rylev (rylev@moz-7AFF9439.cust.telecolumbus.net)
[22:50:37] <seanmonstar> is there a way to use enum's to enforce a range of integers allowed as function arguments? `enum Foo { A = 1, B = 2, C = 3, }; fn foo(f: Foo) {}; foo(3);`
[22:51:43] *** Quits: rylev (rylev@moz-7AFF9439.cust.telecolumbus.net) (Ping timeout)
[22:51:59] *** Joins: ap4y (ap4y@92E20F51.A4EE7592.FD81FCD2.IP)
[22:52:36] <kimundi> seanmonstar: Not like that, no
[22:52:36] <ChrisMorgan> Apache is crazy, typically horribly insecure by default. e.g. if you have PHP installed and allow file upload and have not taken *very* great care to ensure that PHP files won't be executed in the place things can be uploaded, you've got remote code execution.
[22:53:12] <Tobba> its networking code is also pretty damn shoddy
[22:53:25] <seanmonstar> kimundi: so if i want to limit the possible range, my callers must use my enums?
[22:53:26] <kimundi> seanmonstar: you could just take the enum directly: enum ValidNums { N1, N2, N3, N4 } fn foo(n: ValidNums) foo(N3)
[22:53:31] <Tobba> does it still make one thread per connection, scale horribly, and can literally kill your entire server with dialup level traffics?
[22:53:37] *** Joins: IanCormac84 (User@9D0C98C4.64D641E5.67DFF8B4.IP)
[22:53:39] <Tobba> I'll be honest I havent tried the dialup part in a while
[22:53:41] *** Quits: ap4y (ap4y@92E20F51.A4EE7592.FD81FCD2.IP) (Ping timeout)
[22:53:45] <mcpherrin> Tobba: You can configure its worker model
[22:53:47] *** Joins: ap4y (ap4y@92E20F51.A4EE7592.FD81FCD2.IP)
[22:53:57] <kimundi> seanmonstar: yeah, or you define a custom bounded integer type, or just add input validating checks to the function
[22:54:12] <ChrisMorgan> Tobba: not as bad as nginx. It uses the joyent HTTP parser, which is atrocious.
[22:54:20] <seanmonstar> kimundi: i'd hope for compile time checking, so input validation is too late
[22:54:29] <ecr> seanmonstar: or provide a conversion function int -> Option<Foo>
[22:54:31] <mcpherrin> Tobba: If apache has one thing going, it's that you can have completely different servers based on a few hundred kilobytes of /etc/apache :-P
[22:54:34] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[22:54:35] <Tobba> ChrisMorgan: tbf you could still kill the whole box due to PHPs shitty hash tables
[22:54:40] *** Joins: janra (Janus@1CDC5701.A48867D7.52E4E107.IP)
[22:54:42] <Tobba> but apache gets absolutely wrecked by slow reads/writes
[22:54:42] *** Joins: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net)
[22:55:04] <mcpherrin> Tobba: no, Apache isn't vulnerable to slowlorising anymore
[22:55:14] <Tobba> I cant remember the secret suace to breaking phps hash tables but it involved some unicode
[22:55:30] <seanmonstar> ecr: oh hm, or could I create a Fooable trait, and impl Fooable for int?
[22:55:31] *** Quits: ap4y (ap4y@92E20F51.A4EE7592.FD81FCD2.IP) (Ping timeout)
[22:55:55] <seanmonstar> i probably could, but that couldn't enforce the range as compile time...
[22:56:01] <Tobba> pretty sure slow write still works though
[22:56:07] <Tobba> I cant remember, actually
[22:56:10] <ChrisMorgan> seanmonstar: BTW, Rust naming conventions avoid "-able" suffixes on traits (in contrast to Go)
[22:56:17] <kimundi> seanmonstar: I don'T think we have a nice way to compiletime enforce integer ranges
[22:56:24] *** Quits: janra (Janus@1CDC5701.A48867D7.52E4E107.IP) (Ping timeout)
[22:56:24] <seanmonstar> ChrisMorgan: i've noticed
[22:56:32] <ecr> seanmonstar: yep. I don't think you'll get compile-time enforced integer ranges without dependent types.
[22:57:01] *** Joins: dsyang (dsyang@A71B4A90.543193DA.689607DE.IP)
[22:57:24] <Tobba> I have a friend who is mostly the DoS guy anyways
[22:57:27] <Tobba> I cant remember all his antics
[22:57:28] <seanmonstar> ok. would that be of any interest to Rust? or is The Way to just hug enums?
[22:57:35] <kimundi> I guess llvm can optimize out a rnage chcekc for constants?
[22:57:46] <kimundi> range check*
[22:57:58] *** Joins: IanCormac841 (User@8A00AD03.2A8D8854.67DFF8B4.IP)
[22:58:06] <ecr> seanmonstar: if you want static checking, then enums are probably the way to go
[22:58:09] *** Quits: IanCormac84 (User@9D0C98C4.64D641E5.67DFF8B4.IP) (Ping timeout)
[22:58:21] *** Quits: wilmoore (wilmoore@moz-1248C037.mystrotv.com) (Ping timeout)
[22:58:44] *** Quits: dsyang (dsyang@A71B4A90.543193DA.689607DE.IP) (Ping timeout)
[22:58:57] <Tobba> actually, I'm pretty sure apache still gets messed up pretty badly by slowloris
[22:58:59] <kimundi> rusti: enum Num { _1, _2 } _1
[22:59:00] <ecr> it's slightly more inconvenient for users to write, but it also forces them to make their intentions clear (this isn't just any int, but a special, bounded int)
[22:59:02] <seanmonstar> ecr: now, sure. i'm curious if that's an issue or could be, and if so, i'd subscribe
[22:59:02] -rusti- pastebinned 8 lines of output: http://ix.io/bo1
[22:59:03] <Tobba> at least in conjuction with php slow hash tables
[22:59:32] <kimundi> (heh, that actually works)
[22:59:46] *** Quits: IanCormac841 (User@8A00AD03.2A8D8854.67DFF8B4.IP) (Ping timeout)
[22:59:47] *** Joins: Savago (Savago@D8B9C081.E820043D.D4C04133.IP)
[23:00:14] *** Joins: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu)
[23:00:30] <ecr> seanmonstar: oh, I wouldn't expect it anytime soon (or even ever). I don't think people want to take the type system in a direction that complicated.
[23:00:39] <ecr> maybe sometime in the far future
[23:01:27] <seanmonstar> fair enough. 
[23:01:52] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[23:01:57] *** Joins: IanCormac84 (User@8A00AD03.2A8D8854.67DFF8B4.IP)
[23:02:28] <ecr> seanmonstar: it's the kind of thing that ends up being much more complicated than anyone initially thinks
[23:03:58] *** Quits: tyna (liadon@moz-BB1BAD9A.dynamic.chello.pl) (Quit: Leaving.)
[23:04:30] *** Joins: cgaebel (clark@moz-F9D89110.nyc.res.rr.com)
[23:05:41] *** nrc|afk is now known as nrc
[23:06:20] <ecr> seanmonstar: I think the simplest way would be something like Dependent ML, which added just enough dependent types to statically bounds check array accesses, but not much else.
[23:07:03] *** Quits: cremes (cremes@moz-79335496.hsd1.il.comcast.net) (Ping timeout)
[23:07:37] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Ping timeout)
[23:07:43] *** Quits: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu) (Client exited)
[23:07:51] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[23:07:51] *** ChanServ sets mode: +o jdm
[23:08:53] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[23:10:02] <seanmonstar> ecr: i get why now, but when i first tried out rust a couple months ago, i was surprised that it wasn't a compile error: `[a, b, c
[23:10:12] <seanmonstar> `[a, b, c][5]`
[23:10:27] *** Quits: khodzha (khodzha@8DDE12C8.2AEE264E.CA6E2165.IP) (Ping timeout)
[23:10:57] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:13:21] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:13:33] *** Joins: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu)
[23:13:58] *** Joins: hacker_sam (hacker_sam@moz-23CA551A.kennesaw.edu)
[23:15:17] *** Quits: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu) (Ping timeout)
[23:15:18] *** Joins: adonohue (adonohue@55513BD.95D3F462.59D8BB03.IP)
[23:16:23] *** Joins: khodzha (khodzha@8DDE12C8.2AEE264E.CA6E2165.IP)
[23:17:52] *** Joins: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu)
[23:17:53] *** Quits: hacker_sam (hacker_sam@moz-23CA551A.kennesaw.edu) (Connection reset by peer)
[23:18:01] *** Quits: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu) (Client exited)
[23:18:08] *** Joins: lerc (quassel@moz-82B68322.telstraclear.net)
[23:18:17] *** Quits: Saj (Saj@moz-840D0658.netvisao.pt) (Quit: Leaving)
[23:18:28] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Ping timeout)
[23:18:40] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[23:19:06] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[23:19:33] *** Quits: adonohue (adonohue@55513BD.95D3F462.59D8BB03.IP) (Quit: adonohue)
[23:19:40] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[23:19:54] *** Joins: hacker_sam (hacker_sam@moz-23CA551A.kennesaw.edu)
[23:20:48] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[23:21:44] *** Joins: willingc (willingc@moz-F095E013.san.res.rr.com)
[23:22:28] *** Quits: hacker_sam (hacker_sam@moz-23CA551A.kennesaw.edu) (Connection reset by peer)
[23:22:44] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Quit: Textual IRC Client: www.textualapp.com)
[23:23:25] *** Quits: willingc (willingc@moz-F095E013.san.res.rr.com) (Ping timeout)
[23:23:41] *** Quits: nkoep (nik@moz-841A7239.pool.mediaways.net) (Client exited)
[23:26:21] *** Joins: andrew-__ (andrew-d_w@C6A0796C.9DFA657C.CC0301A2.IP)
[23:26:29] *** Joins: adonohue (adonohue@55513BD.95D3F462.59D8BB03.IP)
[23:26:46] *** Quits: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: brendan)
[23:27:10] *** Joins: rylev (rylev@moz-7AFF9439.cust.telecolumbus.net)
[23:27:17] <darnuria> I found this in libterm/parms.rs:601
[23:27:23] <darnuria> : let caps = ["%d", "%c", "%s", "%Pa", "%l", "%!", "%~"];
[23:27:37] <darnuria> I must convert it into let caps = vec!("%d", "%c", "%s", "%Pa", "%l", "%!", "%~");
[23:27:37] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[23:27:41] <darnuria> to get the same behaviour?
[23:27:55] <darnuria> (and replace vec.append() by vec.push?
[23:28:22] <darnuria> Actually the test don't compile for libterm.
[23:28:50] *** Quits: rylev (rylev@moz-7AFF9439.cust.telecolumbus.net) (Ping timeout)
[23:29:25] *** Quits: skade (skade@moz-21DF672C.dip0.t-ipconnect.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:30:01] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:31:03] *** Quits: mye (mye@moz-38772F70.vpn.ipredator.se) (Ping timeout)
[23:32:24] *** Joins: matp (matp@moz-16FE1E05.matp.at)
[23:33:24] *** Joins: skade (skade@moz-21DF672C.dip0.t-ipconnect.de)
[23:33:38] *** Quits: skade (skade@moz-21DF672C.dip0.t-ipconnect.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:33:53] *** kimundi is now known as zz_kimundi
[23:34:54] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[23:35:22] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:35:45] *** Joins: espindola (espindola@moz-BB113AD2.cr.net.cable.rogers.com)
[23:36:12] *** Quits: pupoque (Adium@297D6F99.EF706C30.C0C64AB3.IP) (Quit: Leaving.)
[23:36:18] *** Quits: robhobbes (robert@moz-9B3FF613.slc.googlefiber.net) (Ping timeout)
[23:37:15] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:39:56] *** Joins: robhobbes (robert@moz-9B3FF613.slc.googlefiber.net)
[23:40:13] *** Parts: robhobbes (robert@moz-9B3FF613.slc.googlefiber.net) ()
[23:40:37] <seanmonstar> darnuria: hm? let caps = [] makes a static slice. its valid, it just cant grow
[23:40:59] *** Quits: adonohue (adonohue@55513BD.95D3F462.59D8BB03.IP) (Quit: adonohue)
[23:41:44] <darnuria> the problem is
[23:42:04] *** Joins: lfox (lfox@moz-44B75614.nycmny.fios.verizon.net)
[23:42:27] *** Joins: willingc (willingc@moz-F095E013.san.res.rr.com)
[23:42:29] <darnuria> (I re read the code 5secs)
[23:43:37] <darnuria> Ok I get it terminfo/parm.rs:601:30: 605:53 error: type `std::vec::Vec<<generic #734>>` does not implement any method in scope named `append`
[23:43:58] <darnuria> I will paste bin the problem with the test.
[23:46:24] <seanmonstar> darnuria: what if the Vec<_> were changed to Vec<T:Clone>
[23:46:32] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[23:47:05] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[23:47:33] <darnuria> http://kib2.free.fr/pastebin/view_paste.php?id=232
[23:48:11] *** Joins: Puddles (Mibbit@moz-1E495036.dhcp.nwtn.ct.charter.com)
[23:48:34] *** Quits: zw01 (zev@3C32E5CD.21A2D65F.BCF77D2A.IP) (Ping timeout)
[23:49:06] *** Quits: Puddles (Mibbit@moz-1E495036.dhcp.nwtn.ct.charter.com) (Quit: http://www.mibbit.com ajax IRC Client)
[23:50:13] *** Quits: nszceta (nszceta@moz-E458A7C0.pharm.pitt.edu) (Quit: Textual IRC Client: www.textualapp.com)
[23:50:37] <darnuria> seanmonstar: terminfo/parm.rs:604:45: 604:52 error: use of undeclared type name `T`
[23:51:05] *** Quits: twi (Adium@moz-429185BE.cust.vodafonedsl.it) (Quit: Leaving.)
[23:51:21] *** Quits: alkino_ (alkino@moz-B4A66306.w92-151.abo.wanadoo.fr) (Ping timeout)
[23:52:24] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[23:52:24] *** ChanServ sets mode: +o tjc
[23:52:48] *** Quits: espindola (espindola@moz-BB113AD2.cr.net.cable.rogers.com) (Input/output error)
[23:53:45] *** Joins: zw01 (zev@3C32E5CD.21A2D65F.BCF77D2A.IP)
[23:54:32] *** Joins: ap4y (ap4y@92E20F51.A4EE7592.FD81FCD2.IP)
[23:55:19] *** Joins: adonohue (adonohue@55513BD.95D3F462.59D8BB03.IP)
[23:56:21] *** Quits: ap4y (ap4y@92E20F51.A4EE7592.FD81FCD2.IP) (Ping timeout)
[23:58:16] <seanmonstar> darnuria: have an up-to-date compiler? they pass with master
[23:58:39] *** Joins: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu)
[23:59:20] *** Quits: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu) (Quit: )
[23:59:37] <darnuria> seanmon
[23:59:40] <darnuria> seanmonstar: Sure?
[23:59:47] <darnuria> I have the ubuntu nightly
