[00:03:59] *** Quits: dherman_ (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net) (Quit: dherman_)
[00:04:00] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[00:06:08] <pcwalton> boy, this sure is a lot of locking
[00:06:17] <pcwalton> the font stuff may need a total rethink in a concurrent setting
[00:06:24] <pcwalton> it'll work but may not be afst
[00:06:25] <pcwalton> fast
[00:06:47] <strcat> pcwalton: even with a rwlock? I'm not sure how the one in extra performs though
[00:06:56] <pcwalton> strcat: there are tons of locks
[00:07:10] <strcat> oh I thought it was just some massive data structure in a locked arc
[00:07:19] <pcwalton> it's a huge inter tangled mess of @ boxes :P
[00:07:24] <pcwalton> all of which point to each other
[00:07:27] <pcwalton> I'm Arc-ing them all
[00:07:39] <pcwalton> so far there has only been one deadlock
[00:07:41] <pcwalton> but I'm not done
[00:07:46] <strcat> ah that makes sense
[00:07:55] <pcwalton> I'm not sure it CAN be made saner
[00:08:03] <pcwalton> because font stuff is just hairy and full of caches
[00:08:28] <pcwalton> text is so annoying
[00:08:41] <pcwalton> because it's a whole stack of incredibly slow stuff layered on top of incredibly slow stuff
[00:08:49] <pcwalton> and the only reason it works at all is that there's caching built in at all layers
[00:08:57] <pcwalton> so you rarely hit the intolerably slow stuff in practice
[00:09:22] * strcat has a multi-thousand line font configuration which is xml and must map to something horrific on every glyph rendering
[00:10:39] <pcwalton> yay, worked
[00:10:43] <pcwalton> except for a shutdown hang :|
[00:20:21] *** Joins: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca)
[00:21:50] <pcwalton> yay, layout context is now sendable
[00:21:52] <pcwalton> now to fix shutdown hang
[00:22:41] *** Joins: dherman_ (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[00:30:27] <pcwalton> kmc: http://en.wikipedia.org/wiki/Yellow_River crashes for me
[00:30:29] <pcwalton> with optimization on
[00:30:32] <pcwalton> in selector matching
[00:30:36] <pcwalton> maybe same bug? seems suspicious
[00:32:52] <pcwalton> oh hmm
[00:32:57] <pcwalton> that's selector *matching* not *parsing*
[00:32:59] <pcwalton> such a mess :(
[00:36:52] *** Quits: dbaron (dbaron@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: 8403864 bytes have been tenured, next gc will be global.)
[00:37:32] *** Joins: dbaron (dbaron@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[00:42:33] <jack> pcwalton: i am not surprised about the font stuff. ti's a bit off a mess.
[00:42:56] <pcwalton> wikipedia doesn't work anymore :(
[00:42:57] <jack> we should discuss what we need and go from there perhaps, instead of trying to retrofit what we have.
[00:42:59] <pcwalton> white screen.
[00:43:18] <jack> we need wikipedia pages in crash tests.
[00:43:19] <pcwalton> also selector matching is TOTALLY racy
[00:45:00] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[00:45:00] <ghservo> [13servo] 15pcwalton opened pull request #1315: main: Disable parallel selector matching due to races. (06master...06disable-parallel) 02http://git.io/ov1gtg
[00:45:00] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[00:45:57] <jack> doh
[00:46:06] <pcwalton> jack: r? https://github.com/mozilla/servo/pull/1315
[00:46:08] <jack> i am a bit concerned we keep disabling parallelism.
[00:46:11] <jack> we are going backwards.
[00:46:20] <pcwalton> there isn't much we can do
[00:46:22] <pcwalton> you can't use servo right now
[00:46:26] <pcwalton> the problem is unsafe { â€¦ }
[00:46:36] <pcwalton> people keep adding it without understanding why they have to
[00:46:42] <pcwalton> and they introduce races
[00:47:11] <pcwalton> I am working on parallel reflow right now if that helps
[00:47:12] <jack> i know :(
[00:47:20] <pcwalton> so we can go forward
[00:47:27] <jack> it's our own fault for not having the right abstractions yet.
[00:47:32] <pcwalton> I'm adding them
[00:47:57] <strcat> jack: we don't have concurrent data structures beyond FIFO queues which hurts
[00:48:11] <pcwalton> we have a chase-lev deque
[00:48:18] <pcwalton> and we have mutex locks
[00:48:29] <strcat> yeah but not high level stuff built on mutexes
[00:48:39] <jack> to some degree this is expected with language churn
[00:48:41] <pcwalton> you can wrap stuff in muteness, that gets you far
[00:48:43] <jack> we didn't know what to design for :)
[00:48:44] <pcwalton> mutexes
[00:48:54] <strcat> pcwalton: it serializes though
[00:48:58] <pcwalton> yes
[00:48:59] <pcwalton> so what
[00:49:03] <pcwalton> if you aren't contending on it
[00:49:07] <jack> strcat: serialization is better than incorrect.
[00:49:17] <pcwalton> the problem is that people are at the moment NOT using mutexes
[00:49:19] <pcwalton> and are just using "unsafe"
[00:49:20] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[00:49:20] <ghservo> 01[13servo01] 15bors-servo pushed 0 new commits to 06auto: 02http://git.io/r3EIHA
[00:49:20] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[00:49:21] *** Joins: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP)
[00:49:21] <ghservo> 01[13servo01] 15bors-servo pushed 2 new commits to 06auto: 02http://git.io/X5X4-g
[00:49:21] <ghservo> 13servo/06auto 14362c271 15Patrick Walton: main: Disable parallel selector matching due to races....
[00:49:21] <ghservo> 13servo/06auto 14238741f 15bors-servo: auto merge of #1315 : pcwalton/servo/disable-parallel, r=metajack...
[00:49:21] *** Parts: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP) ()
[00:49:27] <pcwalton> because the DOM/layout interface set such a bad example
[00:49:29] <pcwalton> and then they race
[00:49:31] <strcat> ah
[00:49:51] <jack> basically we created a pattern of using unsafe to share @boxes, and now we're paying fo rit :)
[00:50:00] <strcat> I was thinking it was because MutexArc was too painful compared to just being able to pass around arc-like data structures
[00:50:10] <pcwalton> no, MutexArc is not really painful
[00:50:16] <pcwalton> the biggest problem is the lack of RAII to access it
[00:50:17] <jack> strcat: this predates mutexarc probably
[00:50:33] <jack> this pattern is >1yr old
[00:50:56] <strcat> ah
[00:51:24] <jack> i think there is just so much to work on that we didn't get around to fixing that stuff
[00:51:32] <pcwalton> there's so much @mut in servo :(
[00:51:34] <jack> but now it's starting to break
[00:51:38] <pcwalton> yeah
[00:51:47] <pcwalton> we should make AbstractNodes not copyable soon
[00:51:58] <pcwalton> it is not generally safe to copy them since the JS GC does not trace copies
[00:52:04] <jack> I think AbstractNode is going away
[00:53:43] <kmc> pcwalton: I think it is a Rust bug, because this seems to fix it: https://gist.github.com/kmcallister/0f0b4438d1986eb57788
[00:54:03] <jack> ah, temp drops
[00:54:17] <jack> "borrowed value does not live long enough" sort of pisses me off
[00:54:28] <jack> is that fixable?
[00:54:32] <jack> probably a question for niko
[00:54:46] <strcat> jack: there's an old rvalue issue
[00:55:09] <strcat> afaik it's not known to cause soundness bugs though
[00:55:16] <kmc> yeah I'd be much happer if this was a "borrowed value does not live long enough" error instead of nondeterministic memory corruption :)
[00:55:25] <strcat> jack: C++ extends the life of an rvalue to the whole expression
[00:55:39] <strcat> jack: and it further extends it as long as it can see there's a const (must be const) reference to it
[00:55:50] <pcwalton> kmc: aha
[00:55:54] <strcat> I think it'd make sense for rust to do the former only
[00:55:56] <pcwalton> best file that so niko can see it
[00:56:10] <pcwalton> and get the fix asap
[00:56:11] <pcwalton> yay!
[00:56:16] <pcwalton> thanks for finding that
[00:56:25] <kmc> sure thing, I'll open a Rust bug
[00:56:29] * pcwalton breathes easier
[00:58:17] *** Joins: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP)
[00:58:17] <ghservo> [13servo] 15pcwalton opened pull request #1316: Make the layout context thread-safe (06master...06parallel-layout) 02http://git.io/hfBrUg
[00:58:17] *** Parts: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP) ()
[00:58:18] <pcwalton> jack: r? https://github.com/mozilla/servo/pull/1316
[00:58:23] <pcwalton> you may not like this one
[00:58:25] <pcwalton> it adds a ton of mutexes
[00:58:31] *** kimundi is now known as zz_kimundi
[00:59:11] <pcwalton> but I think it's best to start thread-safe and inefficient
[00:59:21] <pcwalton> than to keep down our current path of not thread-safe and full of @s
[01:04:13] *** Joins: aydinkim (aydin.kim@5AB4884B.FCC4549.14D5B978.IP)
[01:04:57] <aydinkim> @jack ping
[01:04:59] <larsberg> Agreed. You've already shown we can be fast sequentially. Even with just dumb parallelism, by the time we're trying to scale to a point where we have to care a lot about contention (e.g., > 8 cores or two processor packages for most systems I've seen... at least non-AMD), most operations we care about will be approaching 0 ms anyway.
[01:06:21] <larsberg> also, pcwalton, I think that hyunjunkim has been looking for you with some NativeSurface questions. I don't know what they are, but he pops on and asks for you sometimes at EOD korea / early Central time 
[01:06:27] <pcwalton> ok
[01:06:32] <pcwalton> larsberg: r? https://github.com/mozilla/servo/pull/1316 (last commit)
[01:06:36] <pcwalton> you may be interested in this one ;)
[01:06:36] <aydinkim> jack: Hi, jack!
[01:08:59] <larsberg> pcwalton: nice :-) This is what they're using in Rust today? Did you want me to just quickly scan and land it if we have confidence in it or spend some time looking at it in some detail? (I'll do the latter anyway, just didn't know if you want me to block the r+ on it)
[01:09:11] <pcwalton> larsberg: it hasn't landed in upstream rust yet.
[01:09:16] <pcwalton> might want to do a more thorough review
[01:09:34] <pcwalton> cf. https://github.com/mozilla/rust/pull/10678
[01:10:13] <larsberg> OK, will do
[01:10:43] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[01:11:34] <jack> aydinkim: pong
[01:13:00] <kmc> pcwalton: https://github.com/mozilla/rust/issues/10683
[01:13:09] <pcwalton> kmc: thanks
[01:13:39] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[01:13:39] <ghservo> 01[13servo01] 15bors-servo merged 06auto into 06master: 02http://git.io/X5X4-g
[01:13:39] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[01:13:40] *** Joins: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP)
[01:13:40] <ghservo> [13servo] 15bors-servo closed pull request #1315: main: Disable parallel selector matching due to races. (06master...06disable-parallel) 02http://git.io/ov1gtg
[01:13:40] *** Parts: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP) ()
[01:14:38] <aydinkim> jack: Long time no see! I'm sorry that I could not see you because of my business trip.
[01:15:50] <jack> Me too, but at least now we can chat on video sometimes
[01:15:57] <jack> How was your trip?
[01:16:24] <aydinkim> jack: Sure. It was hard time :)
[01:16:55] <aydinkim> jack: How was your trip to Korea?
[01:17:22] <jack> Excellent. I learned a lot and enjoyed it very much.
[01:17:26] <jack> Missing the spicy food :)
[01:21:34] <aydinkim> jack: That sounds good :)
[01:22:15] <aydinkim> jack: Currently I have the responsibility for the android port of Servo in our side.
[01:22:38] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[01:23:29] <jack> aydinkim: I apologize that we have made the situation a little worse.
[01:23:53] <jack> I've been trying to get automated android builds going, but no progress to report yet.
[01:24:10] <aydinkim> jack: Yes, that's ok. I'm now doing the upgrading works for the android to adapt latest version.
[01:24:14] <jack> I am working on build system stuff now and I'm keeping android in mind there, so hopefully I can make it better soon.
[01:25:02] <aydinkim> jack: Ok. Let you know if our works would be completed.
[01:25:33] <aydinkim> jack: And now, I encounterd some rust-pkg manager problem in the build time :)
[01:26:28] <aydinkim> jack: Some modules like rust-opengles, rust-layers.. etc, I can not compile that submodules.
[01:26:51] <aydinkim> jack: As I checked, some stuffs like makefile, configure..
[01:26:59] <aydinkim> jack: As I checked, some stuffs like makefile, configure had eliminated.
[01:28:39] <aydinkim> So I'm happy if you can give some kind of tips for avoid this problem.
[01:28:53] <jack> yes. rustpkg should support the config options you need for cross compilation
[01:29:16] <jack> i suspect we will back out the rustpkg building soon
[01:29:37] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[01:30:04] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[01:30:52] <aydinkim> jack: You mean that rust-pkg will be eliminated from the servo until rust-pkg manager will be completed?
[01:31:52] *** Quits: Jayflux (Jason@moz-21C62026.as13285.net) (Quit: Leaving)
[01:32:07] <aydinkim> jack: I'm wondering if you have the time for the video call.
[01:32:39] <aydinkim> jack: if you can endure my poor english conversation :)
[01:32:45] <jack> aydinkim: yes, we will remove rustpkg from servo until it matures more
[01:33:10] <jack> aydinkim: if you'll be around in a bit i could do a video call. have to put the kids to bed first :)
[01:33:22] *** Quits: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca) (Quit: canhtak)
[01:33:33] <kmc> it will be less likely to mature if we're not using it, though
[01:34:03] <kmc> but that's not a compelling reason to keep it, imo
[01:34:19] <aydinkim> jack: ok. you mean that makefile and configure of some submodules like opengles, layers... will be revive?
[01:34:31] <aydinkim> jack: Ok. I can wait for you.
[01:34:33] <pcwalton> this is what I feel like writing this parallel traversal code http://onebigphoto.com/playing-with-fire/
[01:35:14] <aydinkim> jack: Let me know if your children would be in a dream.
[01:35:41] <larsberg> hrm, that's an awfully large amount of dry wood around that guy...
[01:39:41] *** Joins: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca)
[01:42:46] <jack> pcwalton: have you seen the movie Saw?
[01:43:00] <jack> pcwalton: perhaps this is more like how you feel? http://static4.wikia.nocookie.net/__cb20120113183028/sawfilms/images/thumb/d/d6/MarkJelly.png/1000px-MarkJelly.png
[01:43:01] <pcwalton> jack: only a little
[01:43:05] <pcwalton> it grosses me out
[01:43:16] <jack> wandering around covered in flammable jelly holding a match trying to find the secret code
[01:43:18] <pcwalton> depends how successful I am
[01:48:10] *** Quits: CaseyBecking (CaseyBecki@moz-29F30CC3.lsanca.fios.verizon.net) (Quit: Leaving...)
[01:51:05] *** Joins: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP)
[01:52:56] *** Joins: CaseyBecking (CaseyBecki@moz-29F30CC3.lsanca.fios.verizon.net)
[01:53:35] *** Joins: jet (jet@3E68C539.A2C0EFE1.DC5B6E2A.IP)
[01:57:46] <larsberg> pcwalton: the chase-lev deque looks fine at the surface level (props to acrichto!). I probably want to write a bit more test code to hammer a couple of other scenarios, quickly glance at some of the generated code tomorrow (too late to do that sensibly tonight), and step through stuff like the shrinking code to make sure I believe it. Otherwise, just
[01:57:46] <larsberg> formatting nits.
[01:58:02] <larsberg> If you need it for some work you're doing, we can land it, but I'll spend some time tomorrow morning looking at it more.
[01:58:07] <pcwalton> larsberg: ok, cool
[01:58:09] <pcwalton> I'll r+ it
[01:58:52] <larsberg> I can as well - it'll just get an r++ tomorrow :-)
[01:59:43] *** Quits: boredomist (ruqs@8186917.CC8FA3EE.E3401B6E.IP) (Ping timeout)
[02:00:55] <larsberg> thanks for the r? - much more fun than learning about glx and random nvidia stuff
[02:01:28] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[02:01:28] <ghservo> 01[13servo01] 15bors-servo pushed 0 new commits to 06auto: 02http://git.io/AXdOsg
[02:01:28] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[02:01:32] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[02:01:32] <ghservo> 01[13servo01] 15bors-servo pushed 4 new commits to 06auto: 02http://git.io/BiBmvw
[02:01:32] <ghservo> 13servo/06auto 14c7986e7 15Patrick Walton: gfx: Make the font context thread-safe....
[02:01:32] <ghservo> 13servo/06auto 1482c8439 15Patrick Walton: main: Make the layout context sendable.
[02:01:32] <ghservo> 13servo/06auto 14f55deb0 15Patrick Walton: util: Backport a Chase-Lev deque from upstream Rust
[02:01:34] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[02:06:04] *** Parts: jet (jet@3E68C539.A2C0EFE1.DC5B6E2A.IP) ()
[02:13:26] *** Quits: harth (heather@moz-C07D5168.p2p.sfo1.mozilla.com) (Client exited)
[02:21:23] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:29:50] *** Quits: dherman_ (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman_)
[02:33:43] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[02:34:10] *** Quits: bholley (bholley@moz-24EDB000.hsd1.ca.comcast.net) (Quit: bholley)
[02:39:56] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[02:41:02] <aydinkim> jack: we about to go for lunch. I'll be back 1.5 hours after.
[02:41:19] <kmc> pcwalton: should I go ahead and write an intrusive list specialized to FlowData? https://github.com/mozilla/servo/issues/1284
[02:41:34] <pcwalton> kmc: that'd be awesome, although it doesn't have to be specialized, I don't *think*
[02:43:36] *** Quits: dbaron (dbaron@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: 8403864 bytes have been tenured, next gc will be global.)
[02:43:37] *** Quits: jaeman (Mibbit@1A45E17B.8CE257A9.268E2EF2.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:44:01] <kmc> I'm not sure how to do a generic one; I wrote a comment on that bug so let me know what you think whenever you get a chance
[02:44:27] <pcwalton> oh right, it's because it's a trait, yeah
[02:44:42] <pcwalton> I think there's a more generic solution involving get_next()/set_next()/get_prev()/set_prev()
[02:44:45] <pcwalton> and trait inheritance
[02:44:48] <pcwalton> or something like that
[02:45:02] <pcwalton> might not be worth it though
[02:45:04] * pcwalton shrugs
[02:45:13] <pcwalton> this is one thing where DST might well be nice!
[02:45:26] <pcwalton> do what you feel like :)
[02:45:56] <kmc> yeah I was worried about virtual method overhead on those
[02:46:16] <pcwalton> oh, you could implement them on ~FlowContext directly maybe
[02:46:28] <pcwalton> impl Sibling for ~FlowContext
[02:46:29] <pcwalton> or whatever
[02:46:58] <kmc> oh, interesting idea
[02:47:30] <kmc> I hadn't thought about the fact that an owned trait object could implement other traits
[02:47:36] <kmc> anyway I'll think about this more, thanks for the ideas :)
[02:47:46] <pcwalton> no problem, it's a bit black magic
[02:49:41] *** Joins: jet (jet@3E68C539.A2C0EFE1.DC5B6E2A.IP)
[02:56:01] *** Joins: harth (heather@moz-C07D5168.p2p.sfo1.mozilla.com)
[02:56:48] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[02:56:53] *** Quits: doomlord_ (servitor@moz-9738D381.range86-160.btcentralplus.com) (Ping timeout)
[02:57:24] *** Joins: doomlord_ (servitor@moz-9738D381.range86-160.btcentralplus.com)
[03:00:44] *** Quits: jet (jet@3E68C539.A2C0EFE1.DC5B6E2A.IP) (Quit: jet)
[03:09:31] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[03:13:09] *** Joins: dherman_ (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[03:21:54] *** Joins: boredomist (ruqs@B16F530C.DC641F2C.BCAEBB33.IP)
[03:23:43] *** Quits: zz_kimundi (kimundi@moz-28813223.dip0.t-ipconnect.de) (Ping timeout)
[03:23:53] *** Joins: deokjinkim (Mibbit@1A45E17B.8CE257A9.268E2EF2.IP)
[03:24:23] *** Quits: dherman_ (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman_)
[03:27:30] *** Joins: zz_kimundi (kimundi@moz-BF21A096.dip0.t-ipconnect.de)
[03:27:31] *** zz_kimundi is now known as kimundi
[03:46:42] <jack> wow
[03:46:49] <jack> OpenGL on linux is not supported by firefox
[03:46:59] <jack> http://featherweightmusings.blogspot.com/2013/11/no-more-main-thread-opengl-in-firefox.html
[03:49:03] <strcat> jack: I feel like ffx on linux has been second tier for a long time, you know the official windows builds in wine are still faster than the linux ones? *shrug*
[03:49:16] <strcat> might not be true of distro builds
[03:49:53] <strcat> the gstreamer support is pretty broken for me lately too
[03:50:29] <strcat> and it's deprecated gstreamer 0.10 :(
[03:50:54] *** Quits: deokjinkim (Mibbit@1A45E17B.8CE257A9.268E2EF2.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:59:54] *** Joins: Jesse (jruderman@moz-5973C6FA.oc.oc.cox.net)
[04:00:43] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[04:00:43] *** ChanServ sets mode: +o jdm
[04:04:40] <strcat> jack: it's glx/xlib anyway which is sad :)
[04:04:44] * strcat wants egl
[04:11:00] *** Quits: Jesse (jruderman@moz-5973C6FA.oc.oc.cox.net) (Quit: Jesse)
[04:11:59] *** Joins: Jesse (jruderman@moz-5973C6FA.oc.oc.cox.net)
[04:17:54] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[04:17:54] *** ChanServ sets mode: +o pcwalton
[04:19:29] *** Quits: Jesse (jruderman@moz-5973C6FA.oc.oc.cox.net) (Ping timeout)
[04:20:06] *** Quits: harth (heather@moz-C07D5168.p2p.sfo1.mozilla.com) (Client exited)
[04:36:46] *** Joins: brson (brson@moz-C7C20043.sd.sd.cox.net)
[04:36:46] *** ChanServ sets mode: +o brson
[04:38:09] <pcwalton> heh, "warmup" takes about as long as all of reflow combined
[04:38:11] <pcwalton> time to optimize that
[04:43:29] *** Joins: dherman_ (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[04:46:34] *** Joins: harth (heather@moz-C07D5168.p2p.sfo1.mozilla.com)
[04:57:04] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: )
[04:57:32] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[05:10:57] <jack> strcat: EGL isn't the same path? afaict from the api it looks just like the normal xlib calls
[05:11:13] <jack> it seems the same with s/glx/EGL/
[05:11:15] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[05:11:35] <strcat> jack: well, egl + cairo-gl or whatever
[05:11:50] <strcat> wayland only has egl atm
[05:12:12] <strcat> nd you have to render directly into the buffer, so cairo-gl is the usul way
[05:12:14] <pcwalton> first stab at the parallel layout has the same speed as sequential for bubble-widths
[05:12:26] <jack> pcwalton: it's good that it's not worse :)
[05:12:26] <pcwalton> but this is just one page and I haven't optimized it fully yet
[05:12:29] <pcwalton> it's not worse
[05:12:55] <strcat> jack: xlib rendering is really slow ;[
[05:13:00] <pcwalton> bubble-widths is the hard case anyway because it's so quick
[05:13:17] <pcwalton> most of it is the sequential warmup pass
[05:13:24] <strcat> and in fact hardware accel for xlib/xrender is slower on anything but the intel driver than software
[05:13:29] <pcwalton> amdahl's law right there
[05:13:41] <strcat> it does offload work but it's not like 2d is hard
[05:13:42] <pcwalton> but I can parallelize that part
[05:14:20] <strcat> xlib == synchronous round trips and copies everywhere
[05:14:39] <strcat> it's why wine ffx starts so much faster than native
[05:15:20] <strcat> and if you watch xrestop you can see everything leaking ;p
[05:16:44] <pcwalton> 31.7342 ms vs. 31.8301 ms
[05:16:46] <pcwalton> extremely close
[05:16:57] <pcwalton> but 15.39 ms of that is the "warmup" phase which is sequential atm
[05:17:04] <pcwalton> but can be parallelized
[05:17:07] <strcat> there's xcb but ideally you just render into a buffer and talk to it as little as possible
[05:17:34] <bjz> brson: https://github.com/mozilla/rust/pull/10688 r?
[05:17:52] <strcat> and xcb is async so... good luck getting it race-free ;]
[05:17:53] <jack> bjz: brson is on vacation i think :)
[05:18:05] <bjz> ahh, sorry!
[05:18:35] * bjz is also on holidays, but he's crazy
[05:19:06] <bjz> anybody else like to do an r?
[05:19:17] <bjz> oh wait
[05:19:21] <bjz> this is #servo
[05:19:25] <bjz> -_-#
[05:19:37] <bjz> sorry!
[05:20:41] <jdm> hrh
[05:23:06] <brson> bjz: lol
[05:23:19] <bjz> ^_^
[05:24:55] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[05:25:51] *** Joins: kmapped2 (kmapped2@A35331CF.60E9685E.20F09BA6.IP)
[05:26:25] *** Quits: kmapped (kmapped@moz-2489C24B.compute-1.amazonaws.com) (Quit: leaving)
[05:27:34] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[05:29:12] *** Quits: kmapped2 (kmapped2@A35331CF.60E9685E.20F09BA6.IP) (Quit: leaving)
[05:29:50] *** Joins: kmapped2 (kmapped2@A35331CF.60E9685E.20F09BA6.IP)
[05:32:10] *** Quits: dherman_ (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman_)
[05:45:34] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[05:47:03] *** Joins: dherman_ (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[05:50:35] *** Quits: dbaupp (Thunderbir@A56F6AEF.D5A1DCF.37681C44.IP) (Ping timeout)
[05:52:17] <pcwalton> heh, I was overscheduling
[05:52:22] <pcwalton> hyper threading does NOT help you very much
[05:52:38] <pcwalton> 6% faster than sequential on a 4 core machine now
[05:52:47] <pcwalton> I haven't implemented the big optimizations yet
[05:53:21] <pcwalton> also this is only the bubble widths traversal which is the hard one (it's postorder which is harder and is also quick so overhead is larger by comparison)
[05:57:45] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[06:00:48] <pcwalton> it's a lot slower on very small pages
[06:00:51] <pcwalton> which is to be expected
[06:09:57] *** Joins: Jesse (jruderman@moz-5973C6FA.oc.oc.cox.net)
[06:13:40] *** Joins: jaeman (Mibbit@1A45E17B.8CE257A9.268E2EF2.IP)
[06:15:59] <jaeman> When I debug source code in libstd, can't I print local variable there? I build rust with '-Z debug-info'.
[06:16:24] <jaeman> I built rust with '-Z debug-info'.
[06:17:55] <jdm> jaeman: right, only extra-debug-info provides that
[06:18:09] <jdm> jaeman: if you build rustc with optimizations turned off you should not see the assertion you saw before
[06:21:44] <jaeman> jdm: However, currently I met an error when building rustc with extra-debug-info.
[06:22:30] <jdm> jaeman: yes. you need to disable optimizations to avoid it.
[06:22:55] <jaeman> Aha
[06:23:05] <pcwalton> ok, I'm feeling very guardedly optimistic about what I can do to speed this up
[06:23:31] <pcwalton> right now fonts are deadlock :(
[06:23:34] <pcwalton> deadlocky :(
[06:23:40] <pcwalton> but that can probably be fixed too
[06:24:09] *** Quits: jaeman (Mibbit@1A45E17B.8CE257A9.268E2EF2.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:24:14] <jdm> jaeman: you need to run configure --disable-optimize
[06:24:25] <jdm> then you can use the same RUSTFLAGS thing you used before
[06:24:38] *** Joins: jaeman (Mibbit@1A45E17B.8CE257A9.268E2EF2.IP)
[06:25:14] <jaeman> jdm: How can I turn off optimization on building rustc?
[06:25:40] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[06:26:16] <jdm> jaeman: by running |configure --disable-optimize| in the rust build directory
[06:27:02] *** Quits: harth (heather@moz-C07D5168.p2p.sfo1.mozilla.com) (Client exited)
[06:30:07] *** Quits: jaeman (Mibbit@1A45E17B.8CE257A9.268E2EF2.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:59:36] *** Joins: valenting (Thunderbir@95C905BA.4985FA88.FCAAE698.IP)
[06:59:57] *** Joins: jaeman (Mibbit@1A45E17B.8CE257A9.268E2EF2.IP)
[07:02:11] *** Joins: dbaupp (Thunderbir@moz-3BE4086E.lns20.syd6.internode.on.net)
[07:04:05] <jaeman> brson: In current design of work stealing queue, when we spawn a task on a thread, the running task is pushed to work queue of the current thread, isn't it?
[07:04:41] *** Quits: dbaupp (Thunderbir@moz-3BE4086E.lns20.syd6.internode.on.net) (Input/output error)
[07:05:03] *** Joins: dbaupp (Thunderbir@moz-3BE4086E.lns20.syd6.internode.on.net)
[07:05:42] <evilpie> morning
[07:05:54] <brson> jaeman: yes
[07:08:19] <strcat> jaeman: http://software.intel.com/en-us/node/467806 it's similar to this, but TBB doesn't have stacks to support context switches
[07:08:27] <strcat> anyway still a good explanation.
[07:09:09] <jaeman> brson: If so, all tasks is first pushed to a work queue of main thread and then some tasks are stolen by empty work queue of other thread, right?
[07:10:53] <brson> jaeman: yes
[07:12:52] *** Quits: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca) (Quit: canhtak)
[07:13:06] <jaeman> brson: If so, length of work queues except for main work queue are 0 or 1. Do I understand correctly?
[07:14:05] *** Joins: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca)
[07:14:43] *** Quits: valenting (Thunderbir@95C905BA.4985FA88.FCAAE698.IP) (Ping timeout)
[07:16:26] *** Quits: jaeman (Mibbit@1A45E17B.8CE257A9.268E2EF2.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:18:05] *** Quits: dherman_ (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman_)
[07:18:28] *** Joins: jaeman (Mibbit@1A45E17B.8CE257A9.268E2EF2.IP)
[07:19:15] <brson> jaeman: i'm not completely sure what your scenario is. if tasks running on the main thread spawn a bunch of tasks, then yes, all the other threads will have empty work queues, while stealing from the original thread's.
[07:19:51] <brson> under the current scheme where new tasks immediately run that's probably unlikely to happen though
[07:20:34] <brson> e.g. if the main tasks loops spawning subtasks, then each of those subtasks runs immediately, causing the main task to be stolen to other threads - the main task will end op jumping from thread to thread spawning new tasks on each
[07:20:47] <brson> this may or may not be desirable
[07:21:22] *** Joins: deokjinkim (Mibbit@1A45E17B.8CE257A9.268E2EF2.IP)
[07:21:56] *** Joins: bholley (bholley@moz-24EDB000.hsd1.ca.comcast.net)
[07:23:44] *** Joins: Ms2ger (Ms2ger@moz-B7007F1C.ugent.be)
[07:28:48] *** Quits: bholley (bholley@moz-24EDB000.hsd1.ca.comcast.net) (Quit: bholley)
[07:29:58] *** Quits: jaeman (Mibbit@1A45E17B.8CE257A9.268E2EF2.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:31:16] *** Joins: jaeman (Mibbit@1A45E17B.8CE257A9.268E2EF2.IP)
[07:31:27] <jaeman> brson: I don't have specific scenario. I just asked about general operation of work queue in rust. I understood that clearly from your explanation. All work queue's sizes change dynamically since main task jump among threads as you mentioned. Thanks~ :)
[07:32:39] <brson> np~
[07:32:58] *** Quits: brson (brson@moz-C7C20043.sd.sd.cox.net) (Quit: leaving)
[07:34:52] *** Quits: deokjinkim (Mibbit@1A45E17B.8CE257A9.268E2EF2.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:40:12] *** Joins: bholley (bholley@moz-24EDB000.hsd1.ca.comcast.net)
[07:41:24] *** Quits: maxiepoo (mnew@moz-6F50ADE.hsd1.il.comcast.net) (Quit: Leaving)
[07:45:45] *** Joins: glazou (glazou@D8B9C081.E820043D.D4C04133.IP)
[07:46:00] *** Quits: bholley (bholley@moz-24EDB000.hsd1.ca.comcast.net) (Quit: bholley)
[07:47:25] *** Quits: jaeman (Mibbit@1A45E17B.8CE257A9.268E2EF2.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:52:07] *** Joins: jaeman (Mibbit@1A45E17B.8CE257A9.268E2EF2.IP)
[08:00:13] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[08:01:03] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[08:05:35] *** Joins: hyunjunekim (Mibbit@E1F492E1.4CFEBC46.4BEB41DB.IP)
[08:06:34] <hyunjunekim> hi
[08:08:03] *** Joins: dzbarsky (Adium@DB6E1F3D.1EBC2536.DA1C73DD.IP)
[08:13:05] <hyunjunekim> in android, I dont know what kind of data instead of Pixmap in NativeSurface.
[08:14:35] <hyunjunekim> jack:  if you know that Could you tell me this one?
[08:19:55] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: sleep)
[08:21:16] *** Quits: miketaylrrrr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net) (Quit: Leaving...)
[08:22:23] *** Quits: CaseyBecking (CaseyBecki@moz-29F30CC3.lsanca.fios.verizon.net) (Client exited)
[08:22:26] *** Quits: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com) (Ping timeout)
[08:22:43] *** Quits: dzbarsky (Adium@DB6E1F3D.1EBC2536.DA1C73DD.IP) (Quit: Leaving.)
[08:23:00] *** Joins: CaseyBecking (CaseyBecki@moz-29F30CC3.lsanca.fios.verizon.net)
[08:27:34] *** Quits: hyunjunekim (Mibbit@E1F492E1.4CFEBC46.4BEB41DB.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:30:03] *** Quits: boredomist (ruqs@B16F530C.DC641F2C.BCAEBB33.IP) (Ping timeout)
[08:40:43] *** Quits: Ms2ger (Ms2ger@moz-B7007F1C.ugent.be) (Ping timeout)
[08:41:16] *** Quits: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca) (Quit: canhtak)
[08:41:23] *** Quits: glazou (glazou@D8B9C081.E820043D.D4C04133.IP) (Ping timeout)
[08:42:09] *** Joins: glazou (glazou@moz-86E8F7D5.w80-12.abo.wanadoo.fr)
[08:52:49] *** Joins: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com)
[09:00:37] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[09:03:01] *** Joins: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca)
[09:10:47] *** Joins: Ms2ger (Ms2ger@moz-664B2345.ugent.be)
[09:14:02] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[09:14:09] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[09:16:03] *** Joins: hyunjunekim (Mibbit@E1F492E1.4CFEBC46.4BEB41DB.IP)
[09:16:30] *** Quits: bjz (bjz@moz-6AF19015.lnse4.cha.bigpond.net.au) (Ping timeout)
[09:21:53] *** Quits: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com) (Ping timeout)
[09:22:26] *** Joins: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com)
[09:25:06] *** Quits: hyunjunekim (Mibbit@E1F492E1.4CFEBC46.4BEB41DB.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:44:31] *** Quits: jaeman (Mibbit@1A45E17B.8CE257A9.268E2EF2.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:44:45] *** Joins: jaeman (Mibbit@1A45E17B.8CE257A9.268E2EF2.IP)
[09:44:50] *** Joins: bjz (bjz@moz-6AF19015.lnse4.cha.bigpond.net.au)
[09:46:19] *** Quits: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca) (Quit: canhtak)
[09:48:14] *** Quits: bjz (bjz@moz-6AF19015.lnse4.cha.bigpond.net.au) (Ping timeout)
[09:52:27] *** Quits: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com) (Ping timeout)
[10:18:40] *** Quits: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP) (Quit: leaving)
[10:35:39] *** kimundi is now known as zz_kimundi
[10:37:22] *** Quits: alfredo (alfredo@moz-99690620.hinet-ip.hinet.net) (Input/output error)
[10:40:57] *** Joins: Savago (Savago@D8B9C081.E820043D.D4C04133.IP)
[10:41:36] *** Joins: Debloper (debloper@moz-88FF8AE8.redhat.com)
[10:47:11] *** Joins: bjz (bjz@moz-6AF19015.lnse4.cha.bigpond.net.au)
[10:49:09] *** Quits: bjz (bjz@moz-6AF19015.lnse4.cha.bigpond.net.au) (Ping timeout)
[10:57:13] *** Joins: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com)
[10:59:43] *** Joins: alfredo|desktop (alfredo@moz-99690620.hinet-ip.hinet.net)
[11:13:18] *** Quits: marcosc (marcosc@moz-2AFFEC2E.dsl.telepac.pt) (Input/output error)
[11:15:01] *** Quits: Ms2ger (Ms2ger@moz-664B2345.ugent.be) (Ping timeout)
[11:16:54] *** zz_kimundi is now known as kimundi
[11:19:14] *** Joins: bjz (bjz@moz-6AF19015.lnse4.cha.bigpond.net.au)
[11:22:52] *** Quits: CaseyBecking (CaseyBecki@moz-29F30CC3.lsanca.fios.verizon.net) (Client exited)
[11:23:03] *** Quits: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com) (Ping timeout)
[11:23:28] *** Joins: CaseyBecking (CaseyBecki@moz-29F30CC3.lsanca.fios.verizon.net)
[11:30:43] *** kimundi is now known as zz_kimundi
[11:31:43] *** zz_kimundi is now known as kimundi
[11:42:38] *** Joins: marcosc (marcosc@moz-2AFFEC2E.dsl.telepac.pt)
[11:48:51] *** Quits: marcosc (marcosc@moz-2AFFEC2E.dsl.telepac.pt) (Connection reset by peer)
[11:50:00] *** Joins: marcosc (marcosc@moz-2AFFEC2E.dsl.telepac.pt)
[11:51:54] *** Quits: marcosc (marcosc@moz-2AFFEC2E.dsl.telepac.pt) (Ping timeout)
[11:53:31] *** Joins: marcosc (marcosc@moz-2AFFEC2E.dsl.telepac.pt)
[12:12:01] *** Joins: Ms2ger (Ms2ger@moz-893FDDF0.ugent.be)
[12:15:59] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[12:20:10] *** Joins: Jackneill (Jackneill@moz-EDEDAFD9.pool.digikabel.hu)
[12:25:46] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Input/output error)
[12:26:27] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[12:28:11] *** Joins: Kostic (marko@C4D4CB5C.58A2DD99.2168A69F.IP)
[12:30:00] *** Joins: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com)
[12:41:16] *** Quits: Kostic (marko@C4D4CB5C.58A2DD99.2168A69F.IP) (Ping timeout)
[12:41:41] *** Joins: Kostic (marko@C4D4CB5C.58A2DD99.2168A69F.IP)
[12:45:39] *** Quits: Kostic (marko@C4D4CB5C.58A2DD99.2168A69F.IP) (Ping timeout)
[12:50:38] *** Joins: abinader (abinader@D8B9C081.E820043D.D4C04133.IP)
[12:52:24] *** Quits: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) (Quit: Savago)
[12:52:25] *** Quits: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com) (Ping timeout)
[12:57:24] *** Joins: Kostic (marko@C4D4CB5C.58A2DD99.2168A69F.IP)
[12:58:55] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Input/output error)
[12:59:28] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[13:03:19] *** Quits: Kostic (marko@C4D4CB5C.58A2DD99.2168A69F.IP) (Ping timeout)
[13:09:04] *** Joins: Kostic (marko@C4D4CB5C.58A2DD99.2168A69F.IP)
[13:13:28] *** Quits: vivekg (uid10501@moz-E77DEB21.irccloud.com) (Input/output error)
[13:13:28] *** Quits: cstipkovic (uid6805@moz-E77DEB21.irccloud.com) (Client exited)
[13:13:28] *** Quits: evilpie (sid7877@moz-E77DEB21.irccloud.com) (Input/output error)
[13:13:45] *** Quits: ttaubert (uid2620@moz-A42E5B7B.irccloud.com) (Input/output error)
[13:13:45] *** Quits: larsberg (uid16141@moz-A42E5B7B.irccloud.com) (Input/output error)
[13:14:03] *** Quits: sawrubh (uid6719@moz-5F4AA75A.irccloud.com) (Client exited)
[13:14:03] *** Quits: burg (sid14893@moz-5F4AA75A.irccloud.com) (Input/output error)
[13:14:03] *** Quits: wilfred (sid159@moz-5F4AA75A.irccloud.com) (Broken pipe)
[13:14:03] *** Quits: hongminhee (sid295@moz-5F4AA75A.irccloud.com) (Input/output error)
[13:14:10] *** Quits: abinader (abinader@D8B9C081.E820043D.D4C04133.IP) (Ping timeout)
[13:15:17] *** Joins: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca)
[13:17:28] *** Joins: wilfred (sid159@moz-5F4AA75A.irccloud.com)
[13:17:46] *** Joins: ttaubert (sid2620@moz-A42E5B7B.irccloud.com)
[13:18:00] *** Joins: abinader (abinader@496D17B0.2513D022.AD91B79.IP)
[13:18:09] *** Joins: hongminhee (sid295@moz-5F4AA75A.irccloud.com)
[13:25:19] *** Joins: larsberg (sid16141@moz-A42E5B7B.irccloud.com)
[13:33:37] *** Joins: cstipkovic (uid6805@moz-E77DEB21.irccloud.com)
[13:33:39] *** bhearsum|afk is now known as bhearsum
[13:35:02] *** Joins: evilpie (sid7877@moz-E77DEB21.irccloud.com)
[13:36:10] *** Joins: vivekg (uid10501@moz-E77DEB21.irccloud.com)
[13:36:12] *** Joins: sawrubh (uid6719@moz-5F4AA75A.irccloud.com)
[13:41:31] *** Quits: Ms2ger (Ms2ger@moz-893FDDF0.ugent.be) (Quit: bbl)
[13:42:55] *** Quits: marcosc (marcosc@moz-2AFFEC2E.dsl.telepac.pt) (Connection reset by peer)
[13:43:05] *** Joins: burg (sid14893@moz-5F4AA75A.irccloud.com)
[13:43:14] *** Joins: marcosc (marcosc@moz-2AFFEC2E.dsl.telepac.pt)
[13:45:04] *** Quits: marcosc (marcosc@moz-2AFFEC2E.dsl.telepac.pt) (Ping timeout)
[13:45:32] *** Joins: marcosc (marcosc@moz-2AFFEC2E.dsl.telepac.pt)
[13:47:42] *** Quits: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca) (Quit: canhtak)
[13:48:31] *** Joins: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com)
[14:00:40] *** Joins: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca)
[14:03:22] *** Joins: Savago (Savago@D8B9C081.E820043D.D4C04133.IP)
[14:07:05] *** Quits: marcosc (marcosc@moz-2AFFEC2E.dsl.telepac.pt) (Connection reset by peer)
[14:08:15] *** Joins: marcosc (marcosc@moz-2AFFEC2E.dsl.telepac.pt)
[14:08:41] *** Quits: bjz (bjz@moz-6AF19015.lnse4.cha.bigpond.net.au) (Ping timeout)
[14:09:18] *** Quits: marcosc (marcosc@moz-2AFFEC2E.dsl.telepac.pt) (Connection reset by peer)
[14:09:21] *** Joins: marcosc (marcosc@moz-2AFFEC2E.dsl.telepac.pt)
[14:12:53] *** Joins: bjz (bjz@moz-DD4A2A91.lnse2.cha.bigpond.net.au)
[14:13:56] *** Joins: ahal (ahal@moz-7DE89BF0.cable.teksavvy.com)
[14:18:28] *** Quits: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca) (Quit: canhtak)
[14:20:38] *** Joins: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca)
[14:23:25] *** Quits: CaseyBecking (CaseyBecki@moz-29F30CC3.lsanca.fios.verizon.net) (Client exited)
[14:24:02] *** Joins: CaseyBecking (CaseyBecki@moz-29F30CC3.lsanca.fios.verizon.net)
[15:15:14] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[15:15:14] <ghservo> [13rust-png] 15Ogeon opened pull request #14: std::rt::io has moved to std::io (06master...06master) 02http://git.io/6IGTaQ
[15:15:14] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[15:18:12] *** Quits: ahal (ahal@moz-7DE89BF0.cable.teksavvy.com) (Ping timeout)
[15:19:33] *** Joins: ahal (ahal@moz-7DE89BF0.cable.teksavvy.com)
[15:24:42] *** Quits: doomlord_ (servitor@moz-9738D381.range86-160.btcentralplus.com) (Connection reset by peer)
[15:31:52] *** Quits: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca) (Quit: canhtak)
[15:31:57] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[15:36:18] *** Quits: CaseyBecking (CaseyBecki@moz-29F30CC3.lsanca.fios.verizon.net) (Ping timeout)
[15:41:34] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[15:42:02] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[15:45:39] *** Quits: vivekg (uid10501@moz-E77DEB21.irccloud.com) (Quit: Connection closed for inactivity)
[15:47:22] *** Quits: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net) (Ping timeout)
[15:51:37] *** Joins: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca)
[15:53:44] *** Quits: tikue (quassel@moz-FEADCD38.hsd1.pa.comcast.net) (Connection reset by peer)
[15:59:40] *** Joins: dherman_ (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[16:02:30] *** Quits: glazou (glazou@moz-86E8F7D5.w80-12.abo.wanadoo.fr) (Quit: bbl)
[16:02:57] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[16:03:08] *** Joins: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net)
[16:03:45] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[16:09:44] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[16:13:21] *** Joins: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net)
[16:17:31] *** Joins: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP)
[16:23:31] *** Quits: dherman_ (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman_)
[16:28:43] *** kimundi is now known as zz_kimundi
[16:30:31] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Ping timeout)
[16:35:21] *** Quits: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net) (Quit: Leaving...)
[16:40:08] *** zz_kimundi is now known as kimundi
[16:46:25] *** Quits: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) (Ping timeout)
[16:46:25] *** Joins: dherman_ (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net)
[16:50:22] *** Joins: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net)
[16:56:02] *** Joins: Ms2ger (Ms2ger@B7B2FF50.C60A97A6.F9FB0584.IP)
[16:59:58] *** Joins: Savago (Savago@1111ED0B.40BDE760.18DDB669.IP)
[17:00:33] *** Quits: Savago (Savago@1111ED0B.40BDE760.18DDB669.IP) (Quit: Savago)
[17:02:02] *** Joins: Savago (Savago@D8B9C081.E820043D.D4C04133.IP)
[17:05:37] *** Joins: dbaron (dbaron@moz-A035068C.dsl.dynamic.sonic.net)
[17:08:31] *** Joins: bholley (bholley@moz-24EDB000.hsd1.ca.comcast.net)
[17:12:42] *** Quits: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com) (Ping timeout)
[17:18:07] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[17:18:07] <ghservo> [13rust-png] 15metajack closed pull request #14: std::rt::io has moved to std::io (06master...06master) 02http://git.io/6IGTaQ
[17:18:07] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[17:18:10] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[17:18:10] <ghservo> 01[13rust-png01] 15metajack pushed 3 new commits to 06master: 02http://git.io/QWK49g
[17:18:10] <ghservo> 13rust-png/06master 145136074 15Erik Hedvall: std::rt::io is now std::io
[17:18:10] <ghservo> 13rust-png/06master 14e87976e 15Erik Hedvall: Updated the tests
[17:18:10] <ghservo> 13rust-png/06master 148ed954e 15Jack Moffitt: Merge pull request #14 from Ogeon/master...
[17:18:11] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[17:29:52] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[17:30:22] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[17:31:39] *** Quits: Debloper (debloper@moz-88FF8AE8.redhat.com) (Quit: Leaving.)
[17:34:25] *** Joins: vodik (simon@63AED96A.F44F49AA.D02BABA9.IP)
[17:39:04] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[17:42:13] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[17:43:33] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[17:44:05] *** Joins: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com)
[17:46:31] *** Joins: doomlord_ (servitor@moz-9738D381.range86-160.btcentralplus.com)
[17:48:42] *** Quits: doomlord_ (servitor@moz-9738D381.range86-160.btcentralplus.com) (Quit: Leaving)
[17:48:45] *** Joins: doomlord_ (servitor@moz-9738D381.range86-160.btcentralplus.com)
[17:48:51] *** Quits: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net) (Quit: Leaving...)
[17:50:11] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[17:54:56] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[18:00:56] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[18:01:45] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[18:03:00] *** Quits: Kostic (marko@C4D4CB5C.58A2DD99.2168A69F.IP) (Ping timeout)
[18:03:13] *** Joins: boredomist (ruqs@B16F530C.DC641F2C.BCAEBB33.IP)
[18:03:16] *** Joins: Kostic (marko@C4D4CB5C.58A2DD99.2168A69F.IP)
[18:06:15] *** Joins: Jayflux (Jason@moz-3D294B97.as13285.net)
[18:16:58] *** Joins: dzbarsky (Adium@DB6E1F3D.1EBC2536.DA1C73DD.IP)
[18:22:37] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[18:23:05] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[18:25:41] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[18:38:30] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[18:39:28] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[18:46:23] *** Joins: eholk (eholk@moz-EA69C7A5.wavecable.com)
[18:49:33] *** Joins: jdm (jdm@FCCEA34F.7672369.D8E68FF6.IP)
[18:49:33] *** ChanServ sets mode: +o jdm
[18:50:31] *** Quits: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca) (Quit: canhtak)
[18:57:42] *** Joins: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP)
[18:57:43] <ghservo> [13servo] 15jdm closed issue #649: Move implementations of binding-related traits into dom/bindings 02http://git.io/VUKv1A
[18:57:43] *** Parts: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP) ()
[18:59:14] <abinader> hi everyone :-)
[18:59:33] <abinader> I've seen for the acid1 milestone a strategy for forms is required
[18:59:40] <abinader> is there anyone working on this atm?
[19:00:56] <Ms2ger> Not afaik
[19:00:59] <larsberg> abinader: I do not believe that anyone has begun working on forms. 
[19:01:06] *** Quits: eholk (eholk@moz-EA69C7A5.wavecable.com) (Ping timeout)
[19:01:14] <Ms2ger> jdm, yw ;)
[19:01:43] <jdm> uh oh
[19:02:06] <abinader> I see, it seems a complex task in terms of supporting a platform-independent backend as well as dependent ones
[19:02:37] <jdm> abinader: there has been talk of implementing them via webcomponents
[19:02:45] <Ms2ger> Mm
[19:02:49] <Ms2ger> Gecko did it first
[19:02:53] <jdm> of course, we would need webcomponents support first
[19:02:56] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[19:02:56] *** ChanServ sets mode: +o pcwalton
[19:02:58] <Ms2ger> And abandoned it a decade ago
[19:03:01] *** Joins: eholk (eholk@moz-EA69C7A5.wavecable.com)
[19:03:03] <jdm> Ms2ger: really?
[19:03:07] <Ms2ger> Yeah
[19:03:25] <abinader> jdm: I guess this also includes shadow dom?
[19:03:36] <pcwalton> so, I have a first stab at making bubble-widths parallel at https://github.com/pcwalton/servo/tree/parallel-layout
[19:03:38] <jdm> correct
[19:03:53] <pcwalton> currently the parallel part is significantly (90%) faster than sequential on my test case
[19:03:55] <pcwalton> HOWEVER
[19:04:07] <pcwalton> there is a sequential warmup phase which gets us right back to the same speed as sequential
[19:04:15] <pcwalton> amdahl's law bites me :(
[19:04:19] <pcwalton> but I have ideas on how to fix that
[19:04:22] <pcwalton> so I'm going to try that now
[19:04:42] <Ms2ger> https://mxr.mozilla.org/mozilla/source/layout/forms/resources/content/button.xml and nearby code, I think
[19:05:18] <abinader> jdm: excuse my lack of information as a newcomer, but is shadow dom in the plan?
[19:05:44] <jdm> abinader: it's definitely in the plan overall; I don't think we have any concrete plan for forms right now.
[19:05:58] <abinader> I see
[19:06:01] <pcwalton> the plan was basically to implement enough of Web Components to get forms workinfg
[19:06:02] <pcwalton> working
[19:07:00] <jdm> abinader: does that sound like something you want to work on? :)
[19:07:32] <abinader> jdm: yeah :-)
[19:07:41] <abinader> I'm actually looking for good niches to work with
[19:08:09] <abinader> but I'd say before thinking about forms, was to think on how getting shadow dom implemented
[19:08:13] <abinader> do you agree?
[19:08:30] <jdm> abinader: right, that's what I was asking about :)
[19:08:42] <abinader> great :D
[19:09:05] <abinader> yeah, I guess there's no concrete plan for that as well
[19:09:46] <jack> Ms2ger: why was it abandoned?
[19:10:42] <jgraham> Performance
[19:10:44] <jgraham> iirc
[19:10:53] <Ms2ger> jack, maybe bz remembers... This is years before I got involved :)
[19:13:48] <jgraham> https://bugzilla.mozilla.org/show_bug.cgi?id=133791 fwiw
[19:14:25] *** Quits: dbaron (dbaron@moz-A035068C.dsl.dynamic.sonic.net) (Ping timeout)
[19:18:58] *** Quits: ahal (ahal@moz-7DE89BF0.cable.teksavvy.com) (Quit: Leaving)
[19:19:08] *** Joins: ahal (ahal@moz-7DE89BF0.cable.teksavvy.com)
[19:22:02] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[19:22:54] <jack> wontfix per roc :)
[19:22:58] <jack> at least we know who to ask now
[19:26:51] *** Quits: bholley (bholley@moz-24EDB000.hsd1.ca.comcast.net) (Quit: bholley)
[19:32:25] *** Quits: Jackneill (Jackneill@moz-EDEDAFD9.pool.digikabel.hu) (Ping timeout)
[19:33:59] *** Quits: sawrubh (uid6719@moz-5F4AA75A.irccloud.com) (Quit: Connection closed for inactivity)
[19:43:24] *** Quits: boredomist (ruqs@B16F530C.DC641F2C.BCAEBB33.IP) (Ping timeout)
[19:45:31] *** Joins: Jackneill (Jackneill@moz-FEEF628B.pool.digikabel.hu)
[19:45:54] * kmc isn't feeling well and is staying home today
[19:45:55] *** Quits: Ms2ger (Ms2ger@B7B2FF50.C60A97A6.F9FB0584.IP) (Quit: nn)
[19:48:40] <pcwalton> kmc: hope you feel better soon
[19:51:50] *** Joins: dbaron (dbaron@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[19:53:00] *** Quits: vodik (simon@63AED96A.F44F49AA.D02BABA9.IP) (Quit: reboot)
[19:54:12] *** Joins: valenting (Thunderbir@95C905BA.4985FA88.FCAAE698.IP)
[19:56:42] *** Quits: eholk (eholk@moz-EA69C7A5.wavecable.com) (Ping timeout)
[19:57:06] *** Joins: eholk (eholk@moz-EA69C7A5.wavecable.com)
[20:05:38] *** Joins: vodik (simon@6936F89F.9963B395.D02BABA9.IP)
[20:06:56] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[20:07:20] *** Quits: Kostic (marko@C4D4CB5C.58A2DD99.2168A69F.IP) (Ping timeout)
[20:12:21] *** Quits: vodik (simon@6936F89F.9963B395.D02BABA9.IP) (Ping timeout)
[20:15:00] <strcat> pcwalton: did you know there's actually a stack-based VM for turing complete truetype bytecode? ha
[20:15:07] <pcwalton> yeah :(
[20:15:31] * strcat realizes fontconfig's complexity isn't actually that bad
[20:16:53] *** Parts: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) ()
[20:17:09] <erickt> hey servo folks, would anyone be interested in presenting at the next bay area rust meetup?
[20:17:17] *** Joins: Savago (Savago@D8B9C081.E820043D.D4C04133.IP)
[20:18:19] <strcat> http://git.savannah.gnu.org/cgit/freetype/freetype2.git/tree/src/cff/cffgload.c#n2055 such a high quality RNG
[20:18:44] <strcat> why would fonts need to be able to run sqrt, and get random numbers? wat?
[20:19:10] <strcat> at least they don't have trig opcodes
[20:19:39] <strcat> all we need now is a font JIT compiler
[20:20:07] <strcat> compile rust to truetype?
[20:20:42] *** Joins: vodik (simon@moz-FAC3965A.net.uwaterloo.ca)
[20:34:11] *** Joins: Kostic (marko@moz-4D8DE592.mbb.telenor.rs)
[20:35:49] *** Joins: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca)
[20:41:46] *** Quits: vodik (simon@moz-FAC3965A.net.uwaterloo.ca) (Connection reset by peer)
[20:42:47] *** Quits: victorporof (victorporo@47B918E3.BCF05198.9B1E38F4.IP) (Quit: victorporof)
[20:44:07] *** Joins: vodik (simon@moz-CFB26EB5.net.uwaterloo.ca)
[20:52:55] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[21:03:14] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[21:07:23] *** Joins: bholley (bholley@moz-24EDB000.hsd1.ca.comcast.net)
[21:17:00] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[21:24:33] *** Quits: eholk (eholk@moz-EA69C7A5.wavecable.com) (Quit: eholk)
[21:26:30] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Connection reset by peer)
[21:27:02] *** Quits: bholley (bholley@moz-24EDB000.hsd1.ca.comcast.net) (Ping timeout)
[21:29:50] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[21:30:39] *** Quits: Jackneill (Jackneill@moz-FEEF628B.pool.digikabel.hu) (Input/output error)
[21:31:08] *** Joins: tabraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[21:31:13] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Input/output error)
[21:31:17] *** Quits: tabraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Input/output error)
[21:31:23] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[21:31:23] *** Joins: boredomist (ruqs@817E9B7E.C3D4F2AA.56F40276.IP)
[21:38:57] *** Quits: boredomist (ruqs@817E9B7E.C3D4F2AA.56F40276.IP) (Quit: Leaving)
[21:42:13] *** Joins: bholley (bholley@moz-24EDB000.hsd1.ca.comcast.net)
[21:43:35] *** Quits: dbaupp (Thunderbir@moz-3BE4086E.lns20.syd6.internode.on.net) (Ping timeout)
[21:45:10] *** Joins: tabraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[21:45:46] *** Quits: tabraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Input/output error)
[21:45:53] *** Quits: dherman_ (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net) (Quit: dherman_)
[21:54:22] *** Joins: harth (heather@moz-C07D5168.p2p.sfo1.mozilla.com)
[21:56:30] *** Quits: bholley (bholley@moz-24EDB000.hsd1.ca.comcast.net) (Quit: bholley)
[22:02:27] *** Quits: vodik (simon@moz-CFB26EB5.net.uwaterloo.ca) (Ping timeout)
[22:02:34] *** bhearsum is now known as bhearsum|afk
[22:06:26] *** Quits: jdm (jdm@FCCEA34F.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[22:11:39] *** Joins: dherman_ (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[22:14:40] <jack> strcat: i assume fonts must do everything becuase the bytecode is turing complete
[22:14:45] <jack> i haven't actually looked though
[22:16:12] <strcat> jack: http://git.savannah.gnu.org/cgit/freetype/freetype2.git/tree/src/cff/cffgload.c#n46 well that looks like a list of the opcodes
[22:16:47] <strcat> basic math, boolean stuff, procedures, rand ;p
[22:17:54] *** Joins: eholk (eholk@moz-EA69C7A5.wavecable.com)
[22:18:36] <strcat> jack: or do you mean 'do fonts actually use this stuff?'?
[22:19:09] <jack> some do i'm sure or the opcodes wouldn't be there :)
[22:20:25] *** Quits: Jesse (jruderman@moz-5973C6FA.oc.oc.cox.net) (Quit: Jesse)
[22:27:14] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[22:28:31] *** Quits: dzbarsky (Adium@DB6E1F3D.1EBC2536.DA1C73DD.IP) (Quit: Leaving.)
[22:29:41] *** Joins: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP)
[22:29:41] *** ChanServ sets mode: +o jdm
[22:33:34] *** Joins: bholley (bholley@moz-24EDB000.hsd1.ca.comcast.net)
[22:39:33] *** Joins: Jesse (jruderman@moz-5973C6FA.oc.oc.cox.net)
[22:40:23] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[22:40:23] *** ChanServ sets mode: +o pcwalton
[22:44:37] *** Joins: ibnc (ibnc@moz-7458E598.client.mchsi.com)
[22:50:15] *** Quits: ahal (ahal@moz-7DE89BF0.cable.teksavvy.com) (Input/output error)
[22:51:11] <jack> strcat: is filter_map backwards?
[22:51:24] <jack> i though filter returned the things for which the expression is true
[22:51:37] <strcat> jack: yeah that's how filter_map works
[22:51:47] <strcat> jack: except it uses Some/None instead of true/false
[22:52:04] <jack> oh wait
[22:52:16] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[22:52:19] <jack> i'm stupid. i wrote the is_real_file() -> bool backwards!
[22:52:26] <strcat> heh
[23:04:02] *** Joins: dbaupp (Thunderbir@898216D2.D5A1DCF.37681C44.IP)
[23:07:51] *** Quits: eholk (eholk@moz-EA69C7A5.wavecable.com) (Ping timeout)
[23:10:36] *** Joins: eholk (eholk@moz-EA69C7A5.wavecable.com)
[23:12:13] *** Quits: dbaupp (Thunderbir@898216D2.D5A1DCF.37681C44.IP) (Ping timeout)
[23:15:07] *** Quits: bholley (bholley@moz-24EDB000.hsd1.ca.comcast.net) (Quit: bholley)
[23:24:22] *** Quits: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP) (Ping timeout)
[23:24:31] *** Joins: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP)
[23:24:31] *** ChanServ sets mode: +o jdm
[23:25:04] *** Quits: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) (Quit: Savago)
[23:31:26] *** Quits: ttaubert (sid2620@moz-A42E5B7B.irccloud.com) (Ping timeout)
[23:31:39] *** Joins: ttaubert (sid2620@moz-A42E5B7B.irccloud.com)
[23:33:59] *** dherman_ is now known as dherman
[23:42:54] *** Quits: Kostic (marko@moz-4D8DE592.mbb.telenor.rs) (Ping timeout)
[23:43:07] <pcwalton> okay
[23:43:30] <pcwalton> just optimized the sequential bottleneck
[23:43:36] <pcwalton> bubble_widths is 60% faster than sequential
[23:43:40] <pcwalton> \o/
[23:43:47] <jdm> nice
[23:44:13] <pcwalton> note that it's way slower on small pages
[23:44:17] <pcwalton> where reflow takes < 1 ms
[23:44:18] *** Quits: Jayflux (Jason@moz-3D294B97.as13285.net) (Connection reset by peer)
[23:44:19] <pcwalton> but who cares
[23:44:23] <pcwalton> we'll fall back to sequential for those
[23:44:31] *** Joins: Jayflux (Jason@moz-3D294B97.as13285.net)
[23:44:37] <pcwalton> by way slower I mean 0.1 ms instead of 0.001
[23:44:39] <pcwalton> er, 0.01
[23:46:23] *** Joins: dbaupp (Thunderbir@898216D2.D5A1DCF.37681C44.IP)
[23:50:34] <jack> does it scale with cores?
[23:50:37] <jack> and how far?
[23:56:17] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[23:58:35] *** Joins: bholley (bholley@moz-24EDB000.hsd1.ca.comcast.net)
