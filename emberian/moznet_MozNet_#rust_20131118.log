[00:00:09] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[00:01:52] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[00:02:14] *** Quits: sam113101 (sam@moz-ADDDDFB1.mc.videotron.ca) (Quit: WeeChat 0.4.3-dev)
[00:03:16] *** Joins: reyre (reyre@moz-22F2351B.core.archive.org)
[00:03:20] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[00:05:05] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Ping timeout)
[00:05:59] *** Joins: sam113101 (sam@moz-ADDDDFB1.mc.videotron.ca)
[00:06:11] *** Joins: kelvin (Mibbit@88DAB48C.599F34EC.DDE5D3F6.IP)
[00:06:33] *** Joins: tikue (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[00:06:39] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[00:06:52] *** Quits: engla (engla@moz-F64E1B0F.cust.bredbandsbolaget.se) (Ping timeout)
[00:07:20] <kelvin> stupid question: what is the rust equivalent of double? is it f64?
[00:07:46] *** Quits: reyre (reyre@moz-22F2351B.core.archive.org) (Client exited)
[00:08:23] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Ping timeout)
[00:08:56] <dbaupp> kelvin: yes (and C's float is f32)
[00:09:34] *** Joins: reyre (reyre@moz-22F2351B.core.archive.org)
[00:10:13] *** Joins: engla (engla@moz-F64E1B0F.cust.bredbandsbolaget.se)
[00:10:55] *** Quits: reyre (reyre@moz-22F2351B.core.archive.org) (Client exited)
[00:11:33] <kelvin> dbaupp: Thanks
[00:11:43] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[00:12:44] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[00:16:14] *** Joins: kermie (Mibbit@C83F40FA.C3C4EFEF.4BC5EF08.IP)
[00:16:17] *** Joins: reyre (reyre@moz-22F2351B.core.archive.org)
[00:16:36] *** Quits: reyre (reyre@moz-22F2351B.core.archive.org) (Client exited)
[00:17:21] <kermie> hi! is there a default/preferred/recommended way of outputting something to stdout or stderr? is it just println! or is there some nuance to it?
[00:18:14] *** Joins: tautologico (iorek@4FCDF73C.2F29D054.7B974E06.IP)
[00:18:40] *** Quits: tautologico (iorek@4FCDF73C.2F29D054.7B974E06.IP) (Quit: tautologico)
[00:20:59] <dbaupp> kermie: println goes to stdout
[00:21:59] <dbaupp> there's writeln which lets you write to stderr: `writeln!(&mut std::io::stderr() as &mut Writer, "error: {}", 1)` (probably only works with a relatively recent master)
[00:22:18] <kelvin> is it possible to define an operator behavior for a struct like in C++? (for ex from c++: double& operator[] (const int& index); )
[00:22:23] *** Joins: fyolnish (fyolnish@moz-55B32192.uqwimax.jp)
[00:22:44] <sfackler> kelvin: there's the Index trait
[00:22:49] <kermie> i see, thanks. then stderr should be accessed by smth like let stderr = std::io::stderr(); stderr.write_str("something"); ?
[00:22:57] <kermie> aha, thank you. :)
[00:24:09] *** Quits: fyolnish (fyolnish@moz-55B32192.uqwimax.jp) (Ping timeout)
[00:24:47] <kelvin> okay, but there's no way to define the behavior of an operator directly?
[00:24:48] <dbaupp> kermie: that would work too, if you have a fixed string, but write/writeln are better if you want formatted output
[00:24:50] <tikue> you can also define math operators
[00:25:10] <kelvin> tikue: how would one do that?
[00:25:25] <dbaupp> kelvin: http://static.rust-lang.org/doc/master/std/ops/index.html
[00:25:45] <tikue> the example on that page is nice
[00:26:09] <dbaupp> (oh, println(format!()) -> println!(), if someone feels like a quick pull request.)
[00:26:54] <tikue> should impl Default for Point as well
[00:27:36] *** Quits: micahw (mwylde@moz-C0E38A24.dsl.static.sonic.net) (Ping timeout)
[00:27:36] <dbaupp> tikue: fmt::Default, you mean?
[00:27:41] <tikue> dbaupp: yeah
[00:28:00] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[00:28:01] <dbaupp> that may dilute the example
[00:28:03] * dbaupp shrugs
[00:28:34] <kelvin> tikue dbaupp: I'll take a look at that
[00:29:10] *** Quits: abnrngr (user@C31B7093.A9FCDC29.B3C843D.IP) (Connection reset by peer)
[00:29:28] *** Quits: jvshahid (jvshahid@moz-C1BC0CE4.nyc.res.rr.com) (Ping timeout)
[00:29:56] <kelvin> Ohhhhh, I read the ops trait descriptions more closely. Thanks for the help!
[00:30:13] *** Joins: ross (ross@moz-5EA04060.br.br.cox.net)
[00:31:36] *** Quits: kermie (Mibbit@C83F40FA.C3C4EFEF.4BC5EF08.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:32:10] *** Quits: tulloch (tulloch@moz-6809CC86.nat.csx.cam.ac.uk) (Ping timeout)
[00:33:52] *** Joins: jvshahid (jvshahid@moz-C1BC0CE4.nyc.res.rr.com)
[00:34:26] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[00:35:47] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Quit: ChatZilla 0.9.90.1 [Firefox 25.0/20131025151332])
[00:38:28] *** Quits: vmx (vmx@moz-141F1C3B.pools.arcor-ip.net) (Quit: Leaving)
[00:38:34] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[00:38:54] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[00:40:38] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[00:41:08] *** jorendorff_away is now known as jorendorff
[00:44:03] *** Quits: jdm (jdm@moz-ED0C7AC7.hinet-ip.hinet.net) (Quit: Lost terminal)
[00:47:29] *** Quits: kelvin (Mibbit@88DAB48C.599F34EC.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:48:10] *** Quits: tikue (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue)
[00:53:58] *** Joins: tikue (tikue@moz-FEADCD38.hsd1.pa.comcast.net)
[00:55:42] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[01:01:02] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[01:02:21] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[01:02:27] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[01:02:42] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[01:06:11] *** jorendorff is now known as jorendorff_away
[01:07:13] *** Joins: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca)
[01:07:38] *** Joins: reyre (reyre@moz-22F2351B.core.archive.org)
[01:07:58] *** Joins: maxiepoo (mnew@moz-6F50ADE.hsd1.il.comcast.net)
[01:11:15] *** Quits: carter (carter@moz-F3C2A2D8.nycmny.fios.verizon.net) (Quit: Textual IRC Client: www.textualapp.com)
[01:12:21] *** Quits: reyre (reyre@moz-22F2351B.core.archive.org) (Client exited)
[01:14:11] *** Joins: reyre (reyre@moz-22F2351B.core.archive.org)
[01:16:07] <bstrie> so does there exist an HTTP parser written in rust?
[01:17:10] <kimundi> bstrie: Afaik servo uses one
[01:17:36] <cmr> servo uses hubbub
[01:17:40] <cmr> wait
[01:17:44] <cmr> bstrie: /HTTP/?
[01:18:36] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[01:19:15] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[01:21:03] <dbaupp> bstrie: presumably rust-http has one?
[01:22:27] *** Joins: fyolnish (fyolnish@moz-4989B8D1.uqwimax.jp)
[01:24:10] *** Quits: fyolnish (fyolnish@moz-4989B8D1.uqwimax.jp) (Ping timeout)
[01:29:36] *** kimundi is now known as zz_kimundi
[01:33:24] *** Joins: Soft (soft@moz-EC8D39F.yok.fi)
[01:33:26] <bstrie> dbaupp: right, but I thought that CM said he was moving from joyent's parser to a bespoke one
[01:36:52] *** Quits: reyre (reyre@moz-22F2351B.core.archive.org) (Client exited)
[01:39:24] *** Joins: reyre (reyre@moz-22F2351B.core.archive.org)
[01:39:28] <sam113101> how long does it take to update your rust, pull the commits and recompile?
[01:39:36] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[01:40:30] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:41:18] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[01:41:35] <Luqman> bstrie: what's an http parser exactly?
[01:42:35] <sam113101> I think I'm recompiling llvm
[01:42:44] <sam113101> not sure if it was needed
[01:42:46] <sam113101> shiiiiiiiiiiit
[01:43:13] <klutzy> it only recompiles llvm if it has been updated
[01:43:32] <sam113101> really?
[01:43:40] <cmr> really!
[01:43:44] <klutzy> reconfigure may occur, but not a real one
[01:43:46] <sam113101> when I do "make" it takes care of that?
[01:44:44] <sam113101> well I ran ./configure after repulling
[01:44:59] <sam113101> w-was it the right thing to do?
[01:45:19] <klutzy> I always do that but was ok
[01:46:09] <bstrie> Luqman: er, sorry, html
[01:46:12] <bstrie> :P
[01:46:17] <bstrie> too many
[01:46:21] <bstrie> hypertexts
[01:46:29] <bstrie> too keep track of
[01:46:40] <bstrie> all too of them
[01:48:58] *** Quits: tikue (tikue@moz-FEADCD38.hsd1.pa.comcast.net) (Ping timeout)
[01:49:22] <cmr> there's no pure-rust html parser I know of
[01:49:38] *** Joins: kelvin (Mibbit@88DAB48C.599F34EC.DDE5D3F6.IP)
[01:49:49] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[01:50:26] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:50:51] <bstrie> cmr: well then can you suggest any non-rust html parser? :)
[01:52:08] <kelvin> how do I declare a lifetime in an implementation declaration? I need to indicate that one of the types used by the implementation will be a reference, but I keep getting an "illegal anonymous lifetime" error for the following: impl Index<uint, &f64> for Point3D 
[01:52:19] *** Quits: jvshahid (jvshahid@moz-C1BC0CE4.nyc.res.rr.com) (Quit: Lost terminal)
[01:53:04] *** Quits: reyre (reyre@moz-22F2351B.core.archive.org) (Client exited)
[01:53:05] <cmr> bstrie: I have used libxml2 in the past, though not from rust
[01:53:23] <cmr> kelvin: impl Index<'a, uint, &'a f64> for Point32
[01:53:25] <dbaupp> bstrie: I don't think he was ever using the joyent's parse, it's all pure-Rust.
[01:53:27] <cmr> erm, 3D
[01:53:35] <cmr> Joyent's parser is disgusting
[01:53:38] * cmr has worked on it
[01:53:38] <dbaupp> bstrie: (even the code generator is in Rust)
[01:53:44] *** Joins: pnathan1 (Adium@moz-5EBBDD83.tukw.qwest.net)
[01:54:00] <dbaupp> bstrie: oh, you want HTML...
[01:54:35] *** Joins: recrack (ymin@5AB4884B.FCC4549.14D5B978.IP)
[01:55:43] <kelvin> cmr: now it's saying no region bound is allowed on std::ops::Index
[01:56:33] <dbaupp> kelvin: impl Index <uint, f64> for Point3D {} or impl<'self> Index<uint, &'self f64> for &'self Point3D {}
[01:56:49] *** Quits: nkoep (nik@moz-2FC9138A.pool.mediaways.net) (Client exited)
[01:56:52] <dbaupp> kelvin: (the latter is the only way to get a reference that the compiler will accept)
[01:57:02] *** Joins: josh (josh@moz-6FB23C25.hvc.res.rr.com)
[01:57:05] <cmr> oh, right
[01:57:05] <dbaupp> kelvin: the index trait is not well designed at the moment, and will change.
[01:57:17] <cmr> dbaupp: aren't non-self allowed now?
[01:57:19] <dbaupp> https://github.com/mozilla/rust/issues/6515
[01:57:31] <kelvin> okay, I had tried using the self lifetime, but I wasn't sure the syntax to declare 'self
[01:57:35] <dbaupp> cmr: yes, but I don't know which version kelvin is using
[01:57:40] <kelvin> 0.8
[01:57:42] <kelvin> :P
[01:57:56] <cmr> ah
[01:57:58] <cmr> ok
[01:58:07] <kelvin> If we are implementing a simple ray tracer, would it be worth it to work with master?
[01:58:36] <dbaupp> in general using master is nicer, it has more fixes & IRC can be more help
[01:58:50] <dbaupp> if you're on linux, there's packages for some distros: https://github.com/mozilla/rust/wiki/Doc-packages,-editors,-and-other-tools
[02:01:58] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[02:02:38] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[02:03:11] *** jorendorff_away is now known as jorendorff
[02:03:40] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[02:03:44] *** Joins: tautologico (iorek@33CCBB09.CFE755C8.C27E1635.IP)
[02:06:08] *** Quits: jordyd (jordyd@moz-A900587A.seg38.ucf.edu) (Ping timeout)
[02:08:46] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[02:10:42] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[02:10:49] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: yichoi)
[02:11:05] <kelvin> okay, so lifetimes and I are not getting along very well
[02:11:09] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[02:11:17] <kelvin> what exactly am I doing wrong here? http://pastebin.com/baa2ZL6L
[02:11:36] <kelvin> I can't seem to see what is the conflicting requirement
[02:11:54] *** Quits: pnathan1 (Adium@moz-5EBBDD83.tukw.qwest.net) (Quit: Leaving.)
[02:15:24] *** Quits: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:15:34] *** Joins: jdm (jdm@moz-99690620.hinet-ip.hinet.net)
[02:15:34] *** ChanServ sets mode: +o jdm
[02:16:07] <dbaupp> kelvin: personally I'd just forgo the [] sugar for now and wait for #6515 to make it sane
[02:17:07] <dbaupp> kelvin: a plain method like `impl Point3D { fn idx_mut<'a>(&'a self, i: uint) -> &'a mut f64 { &mut self.position[i] } }` should "just work"
[02:17:22] <dbaupp> `*point.idx_mut(2) = 1.0` etc.
[02:18:14] <kelvin> dbaupp: alright, I'll just do that then. thanks for the help
[02:19:01] *** Joins: tikue (tikue@moz-FEADCD38.hsd1.pa.comcast.net)
[02:19:14] *** Quits: tikue (tikue@moz-FEADCD38.hsd1.pa.comcast.net) (Client exited)
[02:19:18] *** Joins: tikue (tikue@moz-FEADCD38.hsd1.pa.comcast.net)
[02:19:37] <tautologico> apparently bors died when testing my PR
[02:19:50] <dbaupp> kelvin: fwiw, the problem there is because the compiler isn't/can't connect the lifetime to the self object (the similarity of names is a historical remnant that's been removed in matser)
[02:20:14] <dbaupp> kelvin: that is, you're returning `&'self mut f64`, but at no point is 'self associated with the Point3D
[02:20:41] <dbaupp> tautologico: no it didn't
[02:20:49] <dbaupp> you've got some trailing whitespace
[02:20:51] <dbaupp> http://buildbot.rust-lang.org/builders/auto-linux-64-nopt-t/builds/1614/steps/test/logs/stdio
[02:20:58] <dbaupp> "/home/rustbuild/src/rust-buildbot/slave/auto-linux-64-nopt-t/build/src/libstd/iter.rs:427: trailing whitespace"
[02:21:07] <tautologico> ah shoot
[02:21:19] <dbaupp> (you can run `make tidy` to check this without having to run the full testsuite, btw.)
[02:21:47] <tautologico> dbaupp: thanks
[02:22:29] <dbaupp> tautologico: ping me for an r+ when you fix it
[02:22:41] *** Joins: fyolnish (fyolnish@moz-77AD9551.uqwimax.jp)
[02:23:46] *** Joins: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net)
[02:26:28] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[02:26:28] *** ChanServ sets mode: +ao pcwalton pcwalton
[02:27:47] <sam113101> shouldn't we remove the @ptrs from the tutorial?
[02:28:07] <mcpherrin> aren't they?
[02:28:18] <sam113101> I don't think they are, no
[02:28:41] <mcpherrin> Oh there's still a managed boxes section.
[02:29:58] *** Quits: fyolnish (fyolnish@moz-77AD9551.uqwimax.jp) (Ping timeout)
[02:34:29] <sam113101> yep
[02:34:52] *** Joins: m_kato (m_kato@moz-C286AD9A.bitcat.net)
[02:34:54] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[02:34:56] <sam113101> and the tutorial makes a significant use of them
[02:35:01] <tautologico> dbaupp: I appended a commit, make tidy gives me no errors here (it was a single space character)
[02:35:13] <sam113101> so most parts would need to be rewritten
[02:36:14] <tautologico> I think the current discussion is to try to find a good technical writer to create another tutorial
[02:36:16] <dbaupp> tautologico: can you squash them? (no point having a whole commit for a single whitespace)
[02:36:27] <tautologico> dbaupp: how do I do that?
[02:36:45] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[02:36:49] <dbaupp> tautologico: http://gitready.com/advanced/2009/02/10/squashing-commits-with-rebase.html
[02:37:43] <dbaupp> tautologico: git rebase -i HEAD~2 and then change pick to fixup on the whitespace line
[02:38:13] *** Quits: GeneralMaximus (ankur@81CF6C90.FF693F8.274D17D6.IP) (Quit: Computer has gone to sleep.)
[02:38:18] <dbaupp> tautologico: (and then you'll need to force push the branch, `git push -f origin branch-name`)
[02:38:38] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[02:38:51] *** Quits: jdm (jdm@moz-99690620.hinet-ip.hinet.net) (Ping timeout)
[02:38:55] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[02:40:09] *** Quits: josh (josh@moz-6FB23C25.hvc.res.rr.com) (Quit: josh)
[02:40:48] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:41:02] *** Joins: jdm (jdm@moz-99690620.hinet-ip.hinet.net)
[02:41:02] *** ChanServ sets mode: +o jdm
[02:41:20] <tautologico> I think I made a mess of the whole thing
[02:41:29] <dbaupp> tautologico: oh?
[02:42:18] <dbaupp> tautologico: oh, you have a merge commit
[02:42:32] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[02:42:34] <tautologico> yes
[02:42:47] <tautologico> git asked me to merge, more than once
[02:42:59] *** jorendorff is now known as jorendorff_away
[02:43:01] <dbaupp> ah, wait, now you don't
[02:43:07] <tautologico> said there was a conflict at the line with the extra whitespace
[02:43:22] *** Joins: carter (carter@moz-F3C2A2D8.nycmny.fios.verizon.net)
[02:43:22] <dbaupp> weird, what command(s) did you run?
[02:43:25] <tautologico> I think I got the rebase done but the branch may be mangled, I don't know
[02:43:48] <tautologico> well, the extra commits are gone in the PR at least
[02:44:13] <dbaupp> If you're on fixdocs, then I think `git rebase -i HEAD~3` should show the three commits in the PR?
[02:44:35] <tautologico> yrah
[02:44:36] <tautologico> yeah
[02:45:03] <dbaupp> if so, then change the last line to fixup, instead of pick.
[02:45:11] <dbaupp> that should merge the last two commits.
[02:45:20] <dbaupp> s/merge/combine/
[02:45:46] <tautologico> right, done
[02:46:14] <dbaupp> awesome, perfect.
[02:46:46] <tautologico> dbaupp: thanks, I shouldn't send a PR without running a check first... I only changed comments but I forgot about the whitespace check
[02:47:38] <dbaupp> yeah, the whitespace one trips me up too when I do a doc-only PR.
[02:49:56] *** Quits: tautologico (iorek@33CCBB09.CFE755C8.C27E1635.IP) (Quit: tautologico)
[02:49:57] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[02:49:58] <pcwalton> is there a rustpkg tutorial?
[02:50:03] <pcwalton> I want to actually use it for sprocketnes
[02:50:07] <dbaupp> http://static.rust-lang.org/doc/master/tutorial-rustpkg.html
[02:50:10] <pcwalton> thanks
[02:50:15] <dbaupp> and http://static.rust-lang.org/doc/master/rustpkg.html
[02:50:51] * pcwalton checks if sdl is rustpkgified
[02:51:14] <pcwalton> yay, it is.
[02:53:28] *** Quits: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:54:30] <pcwalton> yay, hit a rustpkg bug within 5 minutes
[02:55:14] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[02:55:32] *** Joins: tautologico (iorek@33CCBB09.CFE755C8.C27E1635.IP)
[03:00:18] <mletterle> yeah...
[03:02:21] *** Quits: tautologico (iorek@33CCBB09.CFE755C8.C27E1635.IP) (Quit: tautologico)
[03:02:53] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[03:02:59] *** Joins: wippler (Mibbit@moz-1417250B.bootp.virginia.edu)
[03:03:45] <wippler> is there a package for rust 0.9-pre?
[03:03:57] <cmr> wippler: there are nightlies for arch and ubuntu
[03:04:34] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[03:04:34] <wippler> cmr: can you link me to them?
[03:05:10] <Yurume> wippler, https://launchpad.net/~hansjorg/+archive/rust
[03:05:26] <wippler> thanks
[03:05:33] <Yurume> install rust-nightly package in this PPA.
[03:05:40] *** jorendorff_away is now known as jorendorff
[03:06:02] <Yurume> cmr, btw, is there any plan for nightly snapshot for Windows? :S
[03:06:34] <dbaupp> apparently one can use the snapshots as "nightly"s
[03:06:48] <dbaupp> although that's an ugly hack :P
[03:07:01] <mcpherrin> Snapshots aren't also quite that frequent
[03:07:41] <Yurume> well, at least it's only weeks (rather than months) away from master
[03:08:29] *** Joins: fyolnish (fyolnish@moz-4D711477.uqwimax.jp)
[03:09:29] *** Joins: jordyd (jordyd@moz-A900587A.seg38.ucf.edu)
[03:09:58] <pcwalton> is there a list of format specifiers anywhere?
[03:09:59] <mletterle> I'm missing function overloading... :/
[03:10:06] *** Joins: tautologico (iorek@33CCBB09.CFE755C8.C27E1635.IP)
[03:10:12] *** Quits: fyolnish (fyolnish@moz-4D711477.uqwimax.jp) (Ping timeout)
[03:10:22] <pcwalton> I don't want function overloading
[03:10:29] <pcwalton> optional and named parameters I'd be ok with though
[03:10:29] *** Quits: wippler (Mibbit@moz-1417250B.bootp.virginia.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[03:10:40] <pcwalton> none will happen before rust 2.0
[03:11:14] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[03:11:59] <SiegeLord> pcwalton: static.rust-lang.org/doc/master/std/fmt/index.html , Formatting Traits heading
[03:12:08] <pcwalton> SiegeLord: thanks
[03:12:45] <pcwalton> sadly working on rustc and servo, which are both "frozen in time" a little bit, makes me less knowledgeable of bleeding edge features
[03:13:14] <mletterle> optional parameters would work fine for 99% of things yeah.. with default values too please.
[03:15:01] <Yurume> pcwalton, isn't format! already available in 0.8?
[03:15:11] <pcwalton> yeah, but I never used anything other than {} :P
[03:15:14] <pcwalton> and {:?}
[03:15:18] <Yurume> :?
[03:15:24] <Yurume> looks like an emoticon
[03:17:06] <dbaupp> mletterle: fwiw, https://github.com/mozilla/rust/issues/6973 is the issue to follow, (note https://github.com/mozilla/rust/issues/6973#issuecomment-25856620 and the following comments though)
[03:17:10] *** Quits: tautologico (iorek@33CCBB09.CFE755C8.C27E1635.IP) (Quit: tautologico)
[03:17:19] *** Joins: tautologico (iorek@33CCBB09.CFE755C8.C27E1635.IP)
[03:17:21] *** Quits: paulproteus (quassel@199.199.210.158) (Ping timeout)
[03:18:01] *** Joins: schnozzle (Mibbit@moz-1417250B.bootp.virginia.edu)
[03:18:38] *** Joins: paulproteus (quassel@458FE134.3EC36C88.CBDCF1DC.IP)
[03:23:00] <cmr> Yurume: I will do it eventually!
[03:23:49] <pcwalton> rustpkg bug #2
[03:23:52] <pcwalton> it's not usable :(
[03:25:36] <dbaupp> isn't servo mostly using it?
[03:25:53] <pcwalton> yeah
[03:25:57] <pcwalton> but it's not hitting the bugs
[03:26:06] <pcwalton> currently I'm blocked by a random assertion failed: pkg_src.start_dir.join(p).exists()', /Users/pcwalton/Source/rust/src/librustpkg/lib.rs:520
[03:26:15] <cmr> I thought that was fixed!
[03:26:26] <pcwalton> I just pulled from master
[03:26:35] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[03:26:39] <kelvin> so i get 'error: internal compiler error: sequence_element_type called on non-sequence value' with the following line of code: fn mul<'a>(&'a mut self, scale: f64) -> &'a mut Point3D {, but if I remove either of the lifetime declarations, then I don't get the compiler error
[03:27:02] <kelvin> this is despite the fact that I have a line of code above that that is basically the same thing
[03:27:08] <kelvin> fn index_mutref<'a>(&'a mut self, index: uint) -> &'a mut f64 {
[03:27:44] <kelvin> what is causing this?
[03:27:49] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[03:28:30] <pcwalton> what if you rename the function to something that isn't "mul"?
[03:28:38] <pcwalton> I wonder if there is lingering code relating to old operator overloading
[03:29:15] <kelvin> renaming the function does not cause the error to go away
[03:29:34] <SiegeLord> So is it known why the package id is the full directory path and not just the last directory?
[03:29:36] <pcwalton> I wonder if you're using index
[03:29:44] <pcwalton> I have no idea about anything in rustpkg
[03:29:46] <dbaupp> https://github.com/mozilla/rust/issues/7990
[03:29:56] <dbaupp> kelvin: ^
[03:31:12] <kelvin> well shoot
[03:31:18] *** Quits: jordyd (jordyd@moz-A900587A.seg38.ucf.edu) (Ping timeout)
[03:32:02] <dbaupp> are you still using the index trait?
[03:32:03] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[03:32:04] <kelvin> so it's index that's causing the issue?
[03:32:05] <kelvin> yeah
[03:32:10] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[03:32:10] <mletterle> You can't assign a lambda to a function type?
[03:32:51] <dbaupp> kelvin: yes; don't use Index, it sucks.
[03:33:07] <aatch> mletterle, I don't think so. Though you can assign a function to a lambda type
[03:34:17] <kelvin> gah, alright. Are the rest of the std:: ops traits as buggy?
[03:34:35] <pcwalton> no
[03:34:40] <aatch> kelvin, not *quite*, index is by far the worst
[03:35:07] *** Quits: zz_kimundi (kimundi@moz-A47A651A.dip0.t-ipconnect.de) (Ping timeout)
[03:35:17] <aatch> It's only really the lack of assign-op overloads that catch people out for the rest of them.
[03:36:52] <aatch> (since `a += b` != `a = a + b` in non-trivial cases)
[03:36:56] <mletterle> a lambda type? Hmm. 
[03:38:07] *** Joins: zz_kimundi (kimundi@moz-6EA0FED4.dip0.t-ipconnect.de)
[03:38:24] *** zz_kimundi is now known as kimundi
[03:38:40] <aatch> mletterle, we might be getting into overloaded terminology here.
[03:39:03] <aatch> mletterle, so to me, lambda == closure == anonymous function
[03:39:54] *** Quits: tikue (tikue@moz-FEADCD38.hsd1.pa.comcast.net) (Ping timeout)
[03:40:28] *** jorendorff is now known as jorendorff_away
[03:40:55] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[03:41:44] <pcwalton> oh, that assert was me saying "rustpkg build sprocketnes" instead of "rustpkg build src/sprocketnes-0.1"
[03:42:00] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:42:00] <pcwalton> maybe I'll just fix that bug
[03:43:13] <pcwalton> rustpkg bug #3
[03:43:51] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[03:47:21] *** Joins: strcat (strcat@moz-61B073BC.cpe.net.cable.rogers.com)
[03:49:19] *** Joins: closures999 (closures99@E9EE784E.DFE6AC8.8F599DB6.IP)
[03:50:51] <pcwalton> ok, I cannot get rustpkg to work at all
[03:51:15] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[03:53:04] <cmr> you are not the first to reach that conclusion ;p
[03:53:16] <pcwalton> maybe this should be rewritten from scratch
[03:53:28] <dbaupp> this == rustpkg?
[03:53:30] <pcwalton> yes
[03:54:40] *** Joins: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au)
[03:55:09] <strcat> pcwalton: I haven't been able to get it to work for a while, but it does for other people ;\
[03:55:32] <mcpherrin> When you two can't get it to work, I don't have much faith in the tool
[03:55:39] <aatch> I've never gotten it to work.
[03:55:44] <pcwalton> I'm trying to get it to build a .exe and it just never works
[03:55:48] <pcwalton> different errors
[03:55:53] <pcwalton> even reading the source is little help
[03:57:17] <dbaupp> aatch: do you get "supplied path for package dir does not exist, and couldn't interpret it as a URL fragment"?
[03:57:27] <strcat> hm, I guess for a bounded queue I just need another cond var...
[03:57:42] <strcat> probably a good time to name them something other than cond1/cond2 ;p
[03:58:13] <aatch> dbaupp, I don't think so. I remember getting something about missing paths.
[03:58:14] <ChrisMorgan> My biggest beef with rustpkg is that -O and --optlevel don't work, which halves rust-http's performance when compiled via rustpkg.
[03:58:24] <pcwalton> I can get it to compile libraries just fine
[03:58:31] <pcwalton> but I can't get it to compile executables
[03:58:41] <aatch> Compiling libraries seems to work, but exes... not so much.
[03:59:07] <ChrisMorgan> I haven't had trouble with getting it to compile things.
[03:59:09] <thewonderidiot> I've gotten executables to work with it
[03:59:15] <aatch> pcwalton, my cases was executable too. It basically refused to pull in the dependency properly
[03:59:25] <pcwalton> for me, it keeps trying to find lib.rs
[03:59:29] <dbaupp> ChrisMorgan: I think there was a PR fixing the -O thing?
[03:59:32] <pcwalton> and then exploding with an assert when it can'
[03:59:34] <pcwalton> t
[03:59:36] <thewonderidiot> weird
[03:59:41] <ChrisMorgan> dbaupp: don't know; there was a bug report for it, at least.
[03:59:47] *** Joins: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP)
[03:59:59] <pcwalton> when I hack around to make it work then it makes a copy of my .rs files for some reason
[04:00:01] <pcwalton> in the wrong directory
[04:00:03] <pcwalton> and then the build fails
[04:00:10] <pcwalton> it makes a copy of SOME of my .rs files
[04:00:12] <dbaupp> ChrisMorgan: https://github.com/mozilla/rust/pull/10526 (not landed yet)
[04:00:12] <pcwalton> not all
[04:00:14] <pcwalton> then the build fails
[04:00:20] <ChrisMorgan> dbaupp: yes, just found it
[04:01:12] *** Joins: GeneralMaximus (ankur@42D925AF.FA41E024.2FB84AC6.IP)
[04:03:33] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[04:03:48] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[04:05:29] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[04:12:11] <strcat> heh I expected condition variables to have overhead but... if it doesn't have to notify anything there really isn't
[04:12:14] <strcat> it just writes to the memory
[04:12:23] <strcat> and waiting just spins a bit unless there's contention
[04:12:36] <strcat> (well, unless it really has to wait)
[04:13:07] * strcat thinks it was probably silly to separate the bounded invariant into a type now
[04:13:21] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Quit: Leaving.)
[04:13:22] *** Parts: mcpherrin (mcpherrin@moz-DFB1CE19.hsd1.ca.comcast.net) ()
[04:13:34] *** Quits: GeneralMaximus (ankur@42D925AF.FA41E024.2FB84AC6.IP) (Connection reset by peer)
[04:14:37] <strcat> pcwalton: what was the concurrent hash map you said you were looking into using for servo? something with cuckoo hashing maybe?
[04:15:17] *** Quits: prooftechnique (prooftechn@moz-65B7D4EE.hsd1.vt.comcast.net) (Quit: )
[04:16:06] <strcat> I tried putting locks on buckets and it was slower than just having a lock on the container even with 4 threads fighting over it...
[04:16:27] *** Quits: schnozzle (Mibbit@moz-1417250B.bootp.virginia.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[04:17:36] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[04:17:41] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Input/output error)
[04:18:04] *** Quits: tautologico (iorek@33CCBB09.CFE755C8.C27E1635.IP) (Quit: zzz)
[04:18:34] <dbaupp> strcat: http://da-data.blogspot.com/2013/03/optimistic-cuckoo-hashing-for.html according to https://github.com/mozilla/servo/issues/1142
[04:19:24] * strcat should really make RAII locks so there aren't as many deadlocks while writing these...
[04:19:40] <strcat> I wish we had #[warn_unused_result]
[04:20:26] <strcat> mutex.lock() /* warn, unlocks right away */;
[04:20:40] <strcat> let _guard = mutex.lock();
[04:21:37] <Yurume> is there any reason you can't use do mutex.with_lock { ... }? does it span the function boundary, for example?
[04:21:43] <bblum> strcat: are you using libextra::sync or pthread locks
[04:22:03] *** Quits: kelvin (Mibbit@88DAB48C.599F34EC.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:22:05] <strcat> bblum: pthread
[04:22:21] <strcat> Yurume: sometimes I want to release it early
[04:22:26] <strcat> so you'd end up needing both APIs that way
[04:22:36] *** Quits: closures999 (closures99@E9EE784E.DFE6AC8.8F599DB6.IP) (Quit: Leaving...)
[04:22:49] <Yurume> actually, I seriously want an early return from the closure for this and other reasons
[04:22:52] <strcat> let lock = mutex.lock(); foo.insert(5); lock.unlock(); cond.notify_one()
[04:23:19] <strcat> and lets say foo.insert fails, it will still unlock the lock
[04:23:44] <dbaupp> Yurume: we could use `return` in closures (now that the old `for` magic is gone)
[04:23:57] <strcat> I'm sort of vaguely trying to consider what would happen if I tried to support unwinding on OOM
[04:24:02] <Yurume> dbaupp, 0.9?
[04:24:10] <strcat> it's a better situation than C++ due to moves never failing
[04:24:30] <Yurume> strcat, sounds like a typestate ;)
[04:24:46] <strcat> Yurume: I guess so! C++11 uses it as the pattern for locks
[04:25:16] <dbaupp> Yurume: it's not implemented yet (my point was it's possible)
[04:25:17] <strcat> std::mutex mutex; { std::unique_lock guard(mutex); /* guard releases lock in the dtor */ }
[04:25:23] <strcat> but I always accidentally do...
[04:25:30] <strcat> std::unique_lock(mutex) ;p
[04:25:57] <strcat> (well, not really with locks, but with other RAII patterns - locks cause too much paranoia to screw that up :P)
[04:26:07] <strcat> thus warn_unused_result being useful
[04:26:55] <Yurume> some alternatives: let mut lock = mutex.lock(); foo.insert(5); lock.unlock(); /* which clears the lock */ cond.notify_one();
[04:27:07] *** Joins: GeneralMaximus (ankur@15721711.F6432075.E28C2422.IP)
[04:27:29] <Yurume> or: let lock = mutex.lock(); foo.insert(5); lock.unlock(); /* which consumes `lock`, so `lock` is dropped and unusable from this point */ cond.notify_one();
[04:27:45] <strcat> Yurume: the lock will usually be stored somewhere, though
[04:27:55] <Yurume> the former requires fn unlock(&mut self), the latter requires fn unlock(self);.
[04:28:01] <strcat> perhaps lock would consume it and unlock would give it back
[04:28:22] <strcat> rust is too paranoid about moves to allow doing stuff like that though
[04:28:23] <Yurume> &mut self would still work in that case, isn't it?
[04:28:38] <strcat> hm
[04:32:14] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[04:32:30] <dbaupp> strcat: is your Mutex.trylock meant to just call pthread_mutex_lock?
[04:33:13] <strcat> dbaupp: nope, that's what rebasing public branches is for! ;p
[04:33:38] <strcat> and it needs to check for EBUSY, not assert
[04:33:46] <dbaupp> yes
[04:34:12] <dbaupp> (although asserting still satisfies "doesn't block the current thread", just not in a useful way.)
[04:34:12] <cmr> strcat: I saw your complaint about timedwait
[04:34:20] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[04:34:20] <strcat> they have setclock/getclock
[04:34:25] <cmr> I used to think timedwait was the worst mistake POSIX made
[04:34:28] <strcat> I don't know how portable they are though
[04:35:15] <cmr> butit *kinda* makes sense. if you're rescheduled, you'll still resume after time X, rather than possibly sleeping for much longer.
[04:35:46] <cmr> (the reschedule delay in addition to the timedwait)
[04:35:53] <cmr> so you're still waiting the same amount of time no matter what
[04:35:53] *** Quits: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP) (Ping timeout)
[04:35:57] <strcat> how portable are errno values? 
[04:36:01] <strcat> I guess not at all
[04:36:58] <strcat> oh they are super portable in general
[04:37:00] <strcat> nvm
[04:37:08] <strcat> at least EBUSY is ;p
[04:37:55] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[04:38:52] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[04:39:21] *** Quits: mcarberry (mcarberry@moz-BE1C9F3F.lightspeed.frokca.sbcglobal.net) (Ping timeout)
[04:43:10] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:44:52] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[04:47:53] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[04:48:06] *** Joins: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP)
[04:48:14] <pcwalton> strcat: yup, I want warn-unused-result really bad
[04:49:52] <dbaupp> https://github.com/mozilla/rust/issues/2974
[04:53:25] *** Joins: pnathan1 (Adium@moz-5EBBDD83.tukw.qwest.net)
[04:54:59] *** Quits: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP) (Ping timeout)
[04:57:45] *** Joins: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP)
[04:58:32] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[05:03:34] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[05:04:42] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[05:06:22] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[05:11:32] <pcwalton> hmmm
[05:11:44] <pcwalton> undefined symbol main when I try to define a main symbol manually
[05:11:51] <pcwalton> with extern "C" and no_mangle
[05:11:56] <pcwalton> this used to work...
[05:12:55] <pcwalton> is it getting marked internal? :(
[05:12:55] <dbaupp> if you're building a binary, everything gets marked internal
[05:12:59] <pcwalton> agh
[05:13:01] <pcwalton> can I turn that off?
[05:13:12] <dbaupp> not sure
[05:13:54] <dbaupp> pcmattman: did you meet/fix the everything-being-marked-internal in rustic?
[05:15:11] *** Joins: yuriks_ (yuriks@74A1181A.6C9AD9C4.8E0C6B01.IP)
[05:15:25] <dbaupp> pcwalton: making it `pub` might do something?
[05:15:29] <pcwalton> tried it
[05:15:46] *** Quits: carter (carter@moz-F3C2A2D8.nycmny.fios.verizon.net) (Quit: Textual IRC Client: www.textualapp.com)
[05:15:49] *** Quits: yuriks (yuriks@DD48A7C8.D06AB739.748B6D8D.IP) (Ping timeout)
[05:16:16] <klutzy> I found it problematic when I built .o and tried to link statically with other .os
[05:16:45] <pcwalton> yeah, I have no way of fixing this :(
[05:16:53] <pcwalton> need to emergency patch rustc to get sprocketnes to work
[05:17:23] <dbaupp> https://github.com/mozilla/rust/pull/9945 but that didn't land (the merged is lying :( )
[05:17:28] *** Joins: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP)
[05:17:34] <klutzy> -c --lib would work (not sure), but it is quite funky
[05:19:39] *** Quits: GeneralMaximus (ankur@15721711.F6432075.E28C2422.IP) (Ping timeout)
[05:20:57] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[05:25:03] *** Quits: eddyb9 (eddy@336E3A7F.D51DAF03.FB866788.IP) (Quit: Leaving)
[05:26:32] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[05:26:32] *** ChanServ sets mode: +ao dherman dherman
[05:27:51] <pcwalton> dbaupp: I don't understand the discussion on this bug
[05:27:57] <pcwalton> did a patch get landed?
[05:28:00] <pcwalton> or rather
[05:28:04] <pcwalton> did an acceptable patch get exposed?
[05:28:18] <pcwalton> I don't really care about doing things the "right way", I care about not making the language broken right now
[05:28:19] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[05:28:30] <dbaupp> pcwalton: I think the answer is `no` to both
[05:28:55] <dbaupp> Unfortunately the code's disappeared too, although I think bors' merge commits probably show it still.
[05:29:28] <dbaupp> e.g. https://github.com/mozilla/rust/commit/06000d2dff933f184914ec91f95170ba4cd6384e
[05:29:31] *** Joins: GeneralMaximus (ankur@4805203D.DED864B5.D8537A8F.IP)
[05:32:12] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[05:34:29] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Ping timeout)
[05:37:23] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[05:39:22] *** Quits: pnathan1 (Adium@moz-5EBBDD83.tukw.qwest.net) (Quit: Leaving.)
[05:42:30] *** Quits: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca) (Quit: canhtak)
[05:45:23] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:45:24] *** Quits: Jesin (Jesin@moz-63C897DA.res.lehigh.edu) (Quit: Leaving)
[05:47:06] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[05:51:12] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[05:51:12] *** ChanServ sets mode: +ao dherman dherman
[05:51:45] *** Quits: GeneralMaximus (ankur@4805203D.DED864B5.D8537A8F.IP) (Ping timeout)
[05:57:09] *** Joins: Liothen (liothen@moz-2D076547.spkn.qwest.net)
[05:58:01] *** Quits: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[05:58:17] *** Quits: recrack (ymin@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[06:01:24] *** Quits: anri (solancile@moz-E49E7C4B.hsd1.wa.comcast.net) (Quit: anri)
[06:03:29] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[06:04:21] *** Joins: avsej (avsej@F469F340.A5BD8B21.5C5F5A39.IP)
[06:04:23] *** Joins: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net)
[06:04:49] *** Joins: GeneralMaximus (ankur@88F8D262.FB4FFCE4.90B98F9.IP)
[06:05:36] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[06:06:52] *** Joins: tikue (tikue@moz-FEADCD38.hsd1.pa.comcast.net)
[06:07:21] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[06:09:13] *** Joins: alan (alan@moz-C7F53227.hfc.comcastbusiness.net)
[06:11:29] <strcat> pcwalton: if you use sdl2 you don't need that workaround anymore, but I dunno how much work porting is
[06:11:46] <pcwalton> I'm just going to add #[used]
[06:12:07] <strcat> fully public paths in binaries should be public
[06:12:20] <pcwalton> I don't care about doing it the right way
[06:12:43] <strcat> well pcmattman wrote it based on privacy and afaik it worked
[06:12:57] <pcwalton> acrichto objected
[06:14:11] <strcat> it's one of 2 issues preventing defining stuff like memcpy in rust :(
[06:14:19] <pcwalton> #[used] will fix it
[06:14:34] <strcat> pcwalton: it might
[06:14:40] <strcat> pcwalton: but LLVM might decide to turn it into a fastcc function
[06:14:44] <strcat> because it's interna
[06:14:46] <strcat> l
[06:14:49] <acrichto> pcwalton: I objected to the implementation, it's making hairy code hairier and I would really like to avoid adding patches on patches to what already exists
[06:15:01] <pcwalton> acrichto: can we add #[used]?
[06:15:01] <strcat> pcwalton: and deadargelim, etc.
[06:15:07] <strcat> it just won't won't remove the symbol
[06:15:08] <acrichto> pcwalton: I would really rather avoid that
[06:15:12] <strcat> it will break the ABI
[06:15:14] <pcwalton> we need something fixed now
[06:15:16] <strcat> afaik, at least
[06:15:19] <pcwalton> I have a talk in 2 days
[06:15:27] <acrichto> pcwalton: can't you have a local rust branch?
[06:15:32] <pcwalton> that is really sad
[06:15:36] <pcwalton> if we cannot write ANY graphical game
[06:15:40] <pcwalton> because we are arguing about small details
[06:15:50] <pcwalton> people are going to try to compile sprocketnes
[06:15:51] *** Quits: alan (alan@moz-C7F53227.hfc.comcastbusiness.net) (Quit: alan)
[06:16:07] <acrichto> let me just fix it tomorrow
[06:16:12] <pcwalton> ok
[06:16:16] <acrichto> it's really not that hard of a fix
[06:17:12] <strcat> pcwalton: maybe you can use https://github.com/AngryLawyer/rust-sdl2 ? I really have no idea how much the API changed ;p
[06:17:15] <strcat> I do know SDL_main is gone
[06:17:27] <pcwalton> I'd rather just fix the language
[06:17:40] <klutzy> strcat: it would indicate a lot is also gone :p
[06:17:52] *** Joins: alan (alan@moz-C7F53227.hfc.comcastbusiness.net)
[06:18:07] <dbaupp> acrichto: what will the new rules be? publicity?
[06:18:13] <strcat> klutzy: well they moved it into SDL_Init
[06:18:18] <acrichto> dbaupp: yes, same as before, just sanely implemente
[06:18:35] <strcat> and they fixed fullscreen on linux
[06:18:40] <strcat> it was so awful before
[06:19:12] <dbaupp> acrichto: ok; will this mean that one might accidentally have `pub fn foo() { ... }` at the top level, and so lose a (small) optimisation there?
[06:19:26] * strcat has a fullscreen SDL-based steam game open in a workspace atm, happily lets you resize it or instantly switch again regardless of the in-game res
[06:19:46] <acrichto> dbaupp: no, I plan on making only reachable extern fns not internal
[06:20:03] <strcat> dbaupp: well, there's only a loss without LTO
[06:20:14] *** Joins: Jesin (Jesin@moz-63C897DA.res.lehigh.edu)
[06:20:16] *** Joins: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net)
[06:20:24] *** Quits: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net) (Quit: maxiepoo_)
[06:20:48] <strcat> pcwalton: the memcpy/memmove/memset issue is actually bigger than just this, sadly
[06:20:59] <strcat> because we still output foreign ABI wrapper functions
[06:21:12] <strcat> and LLVM will optimize any memcpy-like look to a memcpy in a function not called memcpy...
[06:21:14] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[06:21:23] <strcat> inline is iterative so it doesn't inline into the wrapper soon enough
[06:21:30] <strcat> yay infinite recursion
[06:21:47] <pcwalton> why do we output wrapper functions?
[06:21:58] <strcat> pcwalton: I guess just because it was the easiest way to do it
[06:22:05] <strcat> it compiles an inner rust function as internal
[06:22:10] <pcwalton> seems fixable
[06:22:16] <strcat> and then does a Store + Load through a temporary to change to the C types
[06:22:49] <strcat> (it even used the wrong type for the temporary until my relatively recent immediate fixes... it wasn't actually accomplishing anything)
[06:25:07] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[06:28:26] *** Quits: alan (alan@moz-C7F53227.hfc.comcastbusiness.net) (Quit: alan)
[06:32:09] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[06:39:43] *** Joins: alonlevy (alon@529FCC96.5A6A959A.AB64B967.IP)
[06:44:39] *** Joins: nlminhtl (ignotus@moz-BA3DE7EF.volia.net)
[06:44:43] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[06:45:22] *** Quits: cubic (cubic@moz-80241A3A.mc.videotron.ca) (Quit: Leaving)
[06:46:07] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:47:10] *** Quits: alonlevy (alon@529FCC96.5A6A959A.AB64B967.IP) (Ping timeout)
[06:47:49] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[06:49:20] *** Quits: blank_name (blank_name@FAB53C88.7071B2C8.31EC03F3.IP) (Ping timeout)
[06:53:41] *** Joins: alonlevy (alon@529FCC96.5A6A959A.AB64B967.IP)
[06:57:52] *** Joins: pseudoku (quassel@A2C972CC.6F53187D.520CDC98.IP)
[06:58:09] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[06:59:21] *** Quits: tikue (tikue@moz-FEADCD38.hsd1.pa.comcast.net) (Connection reset by peer)
[06:59:41] <pseudoku> is rustpkg in a usable (install a pkg) state?
[07:00:03] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[07:00:50] *** Joins: tikue (tikue@moz-FEADCD38.hsd1.pa.comcast.net)
[07:01:35] <cmr> pseudoku: not yet
[07:01:39] <dbaupp> pseudoku: if you're lucky, but it's very easy to be unlucky
[07:01:40] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:01:56] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[07:02:26] <pseudoku> cmr & dbaupp: thanks, will install manually then
[07:03:27] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[07:03:28] *** Joins: fabiand (fabiand@moz-8144469F.adsl.alicedsl.de)
[07:05:11] *** Quits: h0rrorvacui (h0rrorvacu@moz-5B34B08.sip.bhm.bellsouth.net) (Quit: ZQ)
[07:06:30] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[07:06:48] *** Joins: eddyb9 (eddy@2650FD01.8E4D8E22.4A6B528C.IP)
[07:08:17] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[07:08:19] *** Joins: jviereck (Adium@moz-CF8216D6.dip0.t-ipconnect.de)
[07:12:02] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[07:12:23] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[07:14:11] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[07:14:33] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[07:14:42] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Ping timeout)
[07:16:16] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[07:18:05] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Quit: Leaving...)
[07:18:09] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[07:18:14] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Quit: lenstr)
[07:18:56] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[07:19:22] *** Quits: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:19:38] *** Joins: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP)
[07:20:01] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[07:20:06] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Quit: lenstr)
[07:20:37] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[07:24:16] *** Quits: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP) (Quit: )
[07:25:07] *** Quits: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[07:28:55] *** Quits: jviereck (Adium@moz-CF8216D6.dip0.t-ipconnect.de) (Quit: Leaving.)
[07:32:09] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[07:34:09] *** Quits: tikue (tikue@moz-FEADCD38.hsd1.pa.comcast.net) (Connection reset by peer)
[07:34:50] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[07:38:34] <geomyidae> is anyone doing anything crazy/cool/productive with rust-http these days?
[07:38:53] <klutzy> geomyidae: http://rust.rust-kr.org/
[07:38:55] <geomyidae> I'm bored of my current projects and still want to do something cool with rust but I just don't know what
[07:38:59] <klutzy> :)
[07:39:33] <geomyidae> not sure what I'm looking at, tbh :O
[07:39:34] *** Joins: h0rrorvacui (h0rrorvacu@moz-5B34B08.sip.bhm.bellsouth.net)
[07:39:47] <klutzy> website made with rust-http and rust-mustache
[07:39:48] <geomyidae> or are you saying that's served with rust-http? sorry, haha
[07:39:51] <geomyidae> cool!
[07:39:55] <dbaupp> klutzy: is the bottom thing a "chat" entirely in rust?
[07:40:11] <dbaupp> oooh, it updated
[07:40:13] <klutzy> dbaupp: not yet
[07:40:54] <klutzy> website + webirc was originally written in python, so I re-wrote the first one
[07:41:00] <dbaupp> ah
[07:41:02] <geomyidae> https://twitter.com/josderoo/status/336576747401252864 :(
[07:41:20] <Yurume> geomyidae: rust-http through apache reverse proxy
[07:41:22] <geomyidae> not quite what I was looking for :)
[07:41:36] <geomyidae> Yurume: oh really? why not bare server?
[07:41:46] <geomyidae> or just for convenience?
[07:41:56] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[07:42:21] <dbaupp> geomyidae: rust-http isn't designed for public facing stuff yet (no particular effort on security, etc.)
[07:42:22] <Yurume> first, it should run on 80 in order to be available in front of rust-kr.org but my server already has apache ;)
[07:42:24] <klutzy> partially for convenience, partially for extra safety
[07:42:32] <Yurume> and yes, it is not yet quite stable.
[07:42:37] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[07:44:23] <geomyidae> I saw someone had ported some sort of url routing a few weeks ago... can't find it now though
[07:45:21] <dbaupp> geomyidae: https://github.com/skade/widmann ?
[07:46:22] <geomyidae> probably. interesting either way, thanks. how are you aware of these? I've found rust projects pretty hard to find thus far unless it gets posted to /r/rust
[07:46:55] <dbaupp>  /r/rust + mailing list + memory + http://rust-ci.org/rust-ci/
[07:47:32] <dbaupp> (i.e. I'll remember something vaguely from the first two, and then look it up on rust-ci)
[07:47:45] <Yurume> okay, http://rust-kr.org/ is now aliased to rust.rust-kr.org and served by rust-http.
[07:47:49] *** Quits: nlminhtl (ignotus@moz-BA3DE7EF.volia.net) (Client exited)
[07:48:52] <geomyidae> fantastic. thanks.
[07:48:54] *** flaper87|afk is now known as flaper87
[07:53:07] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[07:53:24] *** Quits: amidvidy` (user@moz-65F81938.hsd1.ca.comcast.net) (Ping timeout)
[07:54:07] *** Joins: bjz_ (bjz@B398BE78.F804C29E.D35A31DF.IP)
[07:54:19] *** Joins: sigma (sigma@moz-23724D77.range86-160.btcentralplus.com)
[07:54:47] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[07:55:18] *** Joins: reyre (reyre@moz-78892580.hsd1.ca.comcast.net)
[07:57:23] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Quit: Leaving...)
[07:57:25] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[07:59:52] *** Quits: h0rrorvacui (h0rrorvacu@moz-5B34B08.sip.bhm.bellsouth.net) (Quit: ZQ)
[08:03:32] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[08:04:57] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:06:09] *** Quits: GeneralMaximus (ankur@88F8D262.FB4FFCE4.90B98F9.IP) (Ping timeout)
[08:06:56] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[08:07:30] *** Joins: nlminhtl (ignotus@moz-BA3DE7EF.volia.net)
[08:07:41] *** Joins: mcarberry (mcarberry@moz-BE1C9F3F.lightspeed.frokca.sbcglobal.net)
[08:08:10] <nlminhtl> How to solve this error ( https://gist.github.com/Ignotus/7de22837be71e1c58797 )? Looks like an iterator type doesn't support cloning.
[08:10:00] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[08:10:12] <sfackler> if you want to clone, you have to call clone()
[08:10:20] *** Joins: mikezaby (mikezaby@moz-AA896205.home.otenet.gr)
[08:10:25] *** Quits: boredomist (ruqs@B16F530C.DC641F2C.BCAEBB33.IP) (Ping timeout)
[08:10:53] <sfackler> I don't know if those iterator types can clone though
[08:10:55] *** Parts: mikezaby (mikezaby@moz-AA896205.home.otenet.gr) ()
[08:11:46] <nlminhtl> sfackler: I have tried :)
[08:11:50] <nlminhtl> it doesn't support.
[08:11:56] <dbaupp> .map can't be cloned
[08:12:22] <dbaupp> (if https://github.com/mozilla/rust/issues/8025 was fixed then in this case it could be cloned.)
[08:12:23] *** Joins: tikue (tikue@moz-FEADCD38.hsd1.pa.comcast.net)
[08:13:25] <Yurume> nlminhtl: uh, what do you want to do: given points P0..Pn, returning true if and only if P0-P1 intersects P1-P2 or ... P(n-2)-P(n-1) intersects P(n-1)-Pn?
[08:13:54] *** Quits: sam113101 (sam@moz-ADDDDFB1.mc.videotron.ca) (Ping timeout)
[08:14:06] *** Joins: h0rrorvacui (h0rrorvacu@moz-5B34B08.sip.bhm.bellsouth.net)
[08:14:08] <nlminhtl> Yurume: yes
[08:14:35] <Yurume> nlminhtl: how about using polygon.window_iter(3)?
[08:14:45] <Yurume> http://static.rust-lang.org/doc/master/std/vec/trait.ImmutableVector.html#tymethod.window_iter
[08:16:11] <nlminhtl> Yurume: lol, I tried to implement a bicycle
[08:16:23] *** Quits: alonlevy (alon@529FCC96.5A6A959A.AB64B967.IP) (Ping timeout)
[08:16:32] *** Joins: jviereck (Adium@moz-CF8216D6.dip0.t-ipconnect.de)
[08:17:08] *** Joins: Ms2ger (Ms2ger@92EF86A7.A020F168.187A1082.IP)
[08:17:54] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[08:17:57] <nlminhtl> Yurume: stop stop
[08:17:59] <nlminhtl> not the same
[08:18:11] <Yurume> uh, what?
[08:18:26] <Yurume> ah
[08:18:28] <nlminhtl> Yurume: it transfers [1,2,3,4] to [1,2], [2,3], [3,4]
[08:18:31] <Yurume> I got it
[08:18:39] <Yurume> yeah, do you need rotating one?
[08:18:41] <nlminhtl> Yurume: but I want [4, 1] too
[08:18:45] <nlminhtl> Yurume: yes
[08:19:34] <Yurume> techincally speaking, polygon.iter().chain(polygon.slice_to(2).iter()).window_iter(3) may work
[08:19:44] <Yurume> (you will need to check if polygon.len() > 2)
[08:19:58] *** Joins: GeneralMaximus (ankur@F469620D.6D13653F.EBA8E3F.IP)
[08:21:14] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[08:22:15] <nlminhtl> Yurume: it won't fix an error withm map :)
[08:22:29] <nlminhtl> %s/withm/with/g
[08:22:41] *** Joins: alonlevy (alon@529FCC96.5A6A959A.AB64B967.IP)
[08:23:36] *** Quits: jviereck (Adium@moz-CF8216D6.dip0.t-ipconnect.de) (Quit: Leaving.)
[08:23:46] <dbaupp> Yurume: (window_iter is on &[], not iterators.)
[08:24:20] *** Joins: victorporof (victorporo@FD3598E9.ED3BC0A9.9B1E38F4.IP)
[08:25:25] <Yurume> dbaupp: uh, you are right.
[08:25:39] *** Quits: eddyb9 (eddy@2650FD01.8E4D8E22.4A6B528C.IP) (Quit: Leaving)
[08:25:42] *** Quits: doomlord_ (servitor@moz-4625DF14.range86-184.btcentralplus.com) (Ping timeout)
[08:25:57] <Yurume> hmm, it would be good to have some sort of generic windowing/chunking iterators available.
[08:26:23] *** Quits: alonlevy (alon@529FCC96.5A6A959A.AB64B967.IP) (Ping timeout)
[08:28:46] <strcat> Yurume: where should it store the chunks?
[08:31:26] * Ms2ger has a dj vu experience
[08:31:37] <nlminhtl> dbaupp: do you know some work-around fix for .map in this case?
[08:32:03] <dbaupp> nlminhtl: nope
[08:32:09] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[08:33:14] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[08:34:13] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[08:34:13] *** ChanServ sets mode: +ao pcwalton pcwalton
[08:34:20] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[08:34:45] <pcwalton> strcat: acrichto: https://github.com/pcwalton/rust/tree/used
[08:35:08] <strcat> pcwalton: acrichto opened a PR making them get exposed as external
[08:35:16] <pcwalton> oh, ok
[08:35:35] <strcat> although I think it should be a bit more broad, it could just be merged as is
[08:35:48] <pcwalton> that was fast! thanks, acrichto
[08:35:49] *** Joins: sam113101 (sam@moz-ADDDDFB1.mc.videotron.ca)
[08:35:57] *** Quits: h0rrorvacui (h0rrorvacu@moz-5B34B08.sip.bhm.bellsouth.net) (Quit: ZQ)
[08:37:36] *** Quits: victorporof (victorporo@FD3598E9.ED3BC0A9.9B1E38F4.IP) (Quit: victorporof)
[08:37:56] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Client exited)
[08:39:14] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Ping timeout)
[08:39:23] *** Joins: Yitro (Yitro@3C366E25.55F0F791.5A112924.IP)
[08:41:05] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Quit: Leaving...)
[08:44:52] <pcwalton> wow, SDL blitting is incredibly slow on retina displays
[08:45:12] <pcwalton> it's literally impossible to hit 60 FPS in software in an empty loop with a screen sized window
[08:45:14] <pcwalton> on mac
[08:45:41] <nlminhtl> dbaupp: where must I make a test for my changes in the rust source code?
[08:45:48] <Yurume> it's not hardware-accelerated (in SDL 1.2), so it's fairly slow
[08:46:17] <Yurume> using SDL 2.0 with a streaming texture would be much faster
[08:46:33] *** Joins: Ferreus (ferreus@moz-45C546AD.dip0.t-ipconnect.de)
[08:46:48] <pcwalton> yeah
[08:47:01] *** Joins: z0w0 (zack@moz-5E840EF3.lns3.woo.bigpond.net.au)
[08:47:10] <Yurume> SDL_RLEACCEL is, well, just a CPU-side optimization for single-shaded surfaces :S
[08:48:14] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Quit: )
[08:48:30] *** Quits: moostik (Icedove@moz-4AD91EE4.w82-121.abo.wanadoo.fr) (Ping timeout)
[08:52:10] *** Joins: moostik (Icedove@moz-4AD91EE4.w82-121.abo.wanadoo.fr)
[08:53:07] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Client exited)
[08:54:38] *** Quits: GeneralMaximus (ankur@F469620D.6D13653F.EBA8E3F.IP) (Ping timeout)
[08:56:41] *** Quits: reyre (reyre@moz-78892580.hsd1.ca.comcast.net) (Client exited)
[08:58:12] *** Joins: reyre (reyre@moz-78892580.hsd1.ca.comcast.net)
[08:59:59] <Ralith> SDL isn't appropriate for doing real rendering work
[09:00:10] *** Quits: reyre (reyre@moz-78892580.hsd1.ca.comcast.net) (Ping timeout)
[09:00:12] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[09:01:59] *** Joins: nkoep (nik@moz-C546266B.pool.mediaways.net)
[09:03:26] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[09:04:49] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[09:07:46] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[09:08:40] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[09:09:34] *** Joins: GeneralMaximus (ankur@5C6E9D67.1B989F61.8DE24349.IP)
[09:14:36] <cmr> pcdummy: are you updating sprocketnes/
[09:14:57] <cmr> hm, pcwalton left! unfortunate
[09:15:25] <benh> sprocketnes is clearly blocking on https://github.com/mozilla/rust/issues/9737 ;)
[09:19:08] *** Joins: Jackneill (Jackneill@moz-3D9A0A2C.pool.digikabel.hu)
[09:19:20] *** Joins: alonlevy (alon@moz-F53E4C49.redhat.com)
[09:20:18] *** Quits: Ms2ger (Ms2ger@92EF86A7.A020F168.187A1082.IP) (Quit: bbl)
[09:23:36] *** Joins: h0rrorvacui (h0rrorvacu@moz-5B34B08.sip.bhm.bellsouth.net)
[09:24:23] *** Quits: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:24:43] *** Quits: GeneralMaximus (ankur@5C6E9D67.1B989F61.8DE24349.IP) (Ping timeout)
[09:24:51] *** Joins: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP)
[09:25:07] <bjz_> Ralith: what do you mean by 'real rendering work'?
[09:25:54] <bjz_> Ralith: do you mean the 2d stuff?
[09:26:26] *** Quits: alonlevy (alon@moz-F53E4C49.redhat.com) (Quit: Leaving)
[09:26:37] *** Quits: m_kato (m_kato@moz-C286AD9A.bitcat.net) (Quit: Leaving...)
[09:27:27] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[09:27:34] *** Joins: reyre (reyre@moz-78892580.hsd1.ca.comcast.net)
[09:28:43] *** Quits: Kxepal (Miranda@moz-A25B204D.pppoe.mtu-net.ru) (Ping timeout)
[09:29:24] *** Quits: reyre (reyre@moz-78892580.hsd1.ca.comcast.net) (Ping timeout)
[09:29:44] *** Joins: reyre (reyre@moz-78892580.hsd1.ca.comcast.net)
[09:31:19] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[09:31:38] *** Quits: reyre (reyre@moz-78892580.hsd1.ca.comcast.net) (Ping timeout)
[09:31:40] *** Quits: h0rrorvacui (h0rrorvacu@moz-5B34B08.sip.bhm.bellsouth.net) (Quit: ZQ)
[09:31:50] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[09:32:08] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[09:32:11] *** Joins: Kxepal (Miranda@moz-ADF2988C.pppoe.mtu-net.ru)
[09:32:46] *** Joins: GeneralMaximus (ankur@207642AA.9BA06023.CA2C69FA.IP)
[09:33:41] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[09:33:46] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[09:34:02] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[09:35:41] <dbaupp> nlminhtl: you mean the main codebase? it depends what sort of changes: if they're restricted to libstd or libextra there's generally a module with tests at the end where you can add some.
[09:35:56] *** Joins: sebcrozet (sebcrozet@11FB4CB4.940A4703.BA2F4534.IP)
[09:35:59] <dbaupp> cmr: he is, for a talk (presumably the rust meet-up)
[09:40:36] <benh> :D
[09:41:50] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[09:42:17] *** Quits: tikue (tikue@moz-FEADCD38.hsd1.pa.comcast.net) (Ping timeout)
[09:47:06] *** Joins: andre (andre@CA528A4A.45A4338E.8EE27E6.IP)
[09:48:21] *** Joins: victorporof (victorporo@FD3598E9.ED3BC0A9.9B1E38F4.IP)
[09:53:15] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Ping timeout)
[09:53:19] *** jorendorff_away is now known as jorendorff
[09:53:49] *** jorendorff is now known as jorendorff_away
[09:56:51] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[10:00:08] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[10:02:46] *** Joins: ricepuddin (graham@moz-CB4E355B.wlan.ic.ac.uk)
[10:03:58] *** Quits: nlminhtl (ignotus@moz-BA3DE7EF.volia.net) (Ping timeout)
[10:06:26] *** Joins: nlminhtl (ignotus@moz-BA3DE7EF.volia.net)
[10:09:16] *** Quits: Yitro (Yitro@3C366E25.55F0F791.5A112924.IP) (Quit: Leaving)
[10:10:52] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[10:12:01] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[10:12:08] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[10:12:43] *** Quits: strcat (strcat@moz-61B073BC.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[10:15:05] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[10:16:41] <nlminhtl> what does V3 in the error message "mismatched types: expected `|&<V3>| -> bool` but found `&'self |&A| -> bool` (expected fn but found &-ptr)" mean?
[10:16:43] *** Joins: Ms2ger (Ms2ger@moz-FED0935A.ugent.be)
[10:17:18] <klutzy> it expected function, but got pointer of function
[10:17:29] <cmr> nlminhtl: it's an inferred type
[10:17:45] <cmr> It expected a closure, actually
[10:17:51] <cmr> Those errors should be tightened up
[10:22:07] *** Quits: jdm (jdm@moz-99690620.hinet-ip.hinet.net) (Quit: Lost terminal)
[10:24:22] *** Quits: heftig (heftig@moz-97EC5A2C.dip0.t-ipconnect.de) (Quit: Quitting)
[10:25:52] *** Joins: lenstr (lenstr@E132F37F.C22580F0.475B81EA.IP)
[10:29:04] *** Joins: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP)
[10:32:15] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[10:34:46] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[10:38:41] *** Joins: Savago (Savago@2F1448E.68394D8.18DDB669.IP)
[10:42:37] *** Quits: Jesin (Jesin@moz-63C897DA.res.lehigh.edu) (Ping timeout)
[10:50:19] *** Quits: lenstr (lenstr@E132F37F.C22580F0.475B81EA.IP) (Quit: Leaving...)
[10:55:48] *** Joins: reyre (reyre@moz-78892580.hsd1.ca.comcast.net)
[10:56:32] *** Joins: rootnode (rootnode@moz-7FAB5E8.ip1.george24.com)
[10:57:38] *** Quits: reyre (reyre@moz-78892580.hsd1.ca.comcast.net) (Ping timeout)
[10:59:16] *** Quits: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au) (Ping timeout)
[10:59:41] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[10:59:46] *** Joins: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au)
[10:59:50] *** Joins: lenstr (lenstr@E132F37F.C22580F0.475B81EA.IP)
[10:59:56] *** Quits: lenstr (lenstr@E132F37F.C22580F0.475B81EA.IP) (Quit: lenstr)
[11:00:56] *** Quits: sebcrozet (sebcrozet@11FB4CB4.940A4703.BA2F4534.IP) (Ping timeout)
[11:02:08] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[11:02:58] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[11:03:34] *** Joins: lenstr (lenstr@E132F37F.C22580F0.475B81EA.IP)
[11:06:31] *** Joins: fyolnish (fyolnish@moz-E655E4F1.uqwimax.jp)
[11:11:40] *** Parts: nlminhtl (ignotus@moz-BA3DE7EF.volia.net) (Konversation terminated!)
[11:11:59] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[11:13:20] *** Joins: nlminhtl (ignotus@moz-BA3DE7EF.volia.net)
[11:13:58] *** Quits: lenstr (lenstr@E132F37F.C22580F0.475B81EA.IP) (Quit: Leaving...)
[11:14:35] *** Quits: StarLight (StarLight@moz-A4C08CC0.dynamic.avangarddsl.ru) (Ping timeout)
[11:15:47] *** Joins: Sorella (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[11:16:43] *** Joins: kode-crypt (chatzilla@ED7FA044.57266F2B.1C37C358.IP)
[11:16:53] <kode-crypt> use std::float;
[11:16:58] <kode-crypt> what this line says ?
[11:17:13] <nlminhtl> >[Monday, November 18, 2013] [12:17:18 PM] <klutzy> it expected function, but got pointer of function
[11:17:46] <nlminhtl> klutzy: but it has this one fn clone(&self) -> extern "Rust" fn($($A),*) -> ReturnType { *self }, doesn't it?
[11:18:23] *** Joins: StarLight (StarLight@moz-6F3C7C83.dynamic.avangarddsl.ru)
[11:18:27] <bjz_> kode-crypt: it says 'import the std::float module'
[11:18:42] <dbaupp> kode-crypt: http://static.rust-lang.org/doc/master/tutorial.html#importing-names-into-the-local-scope
[11:19:01] <kode-crypt> so normally when we use float then we do not use this every time why ?
[11:19:35] *** Quits: z0w0 (zack@moz-5E840EF3.lns3.woo.bigpond.net.au) (Ping timeout)
[11:19:43] <kode-crypt> like let mut hi : float  =4.0 ;
[11:19:44] <dbaupp> `float` the module is different to `float` the type
[11:20:02] <dbaupp> the type is always in scope, the module is just like any other module, it just happens to be called 'float'
[11:20:14] <Ms2ger> float isn't a type
[11:20:26] <dbaupp> (it isn't any more, but it was in 0.8)
[11:20:27] *** Joins: lenstr (lenstr@E132F37F.C22580F0.475B81EA.IP)
[11:21:17] <kode-crypt> sorry but i do not get the meaning of module ?
[11:21:28] <Ms2ger> mod blah {}
[11:21:31] <kode-crypt> is it like import in java ?
[11:21:40] <dbaupp> use is like import in java, yes.
[11:21:49] <kode-crypt> or using name space std , in c++
[11:22:09] *** Quits: lenstr (lenstr@E132F37F.C22580F0.475B81EA.IP) (Quit: Leaving...)
[11:22:13] *** Quits: fyolnish (fyolnish@moz-E655E4F1.uqwimax.jp) (Client exited)
[11:22:40] <kode-crypt> what is use of using module ?? does it provides some fucntions with its self ?
[11:25:09] *** Quits: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[11:25:28] *** Joins: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP)
[11:28:00] <SiegeLord> Are you asking why you'd say 'use std::float' or why you'd make the std::float to begin with?
[11:28:39] <kimundi> kode-crypt: modules are for structuring your code in a logical hierachy, managing visibility, and being able to manage definitions in seperate namespaces
[11:29:00] <kode-crypt> so float module for what ??
[11:29:22] <kode-crypt> what kind of facility does it gives us ?
[11:29:29] <kode-crypt> float module ?
[11:29:52] *** Joins: vmx (vmx@moz-AD755B54.pools.arcor-ip.net)
[11:30:26] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[11:30:49] <dbaupp> kode-crypt: http://static.rust-lang.org/doc/0.8/std/float/index.html
[11:31:09] <dbaupp> some functions and constants.
[11:31:20] <kimundi> (That's 0.8 btw, not master)
[11:31:49] <dbaupp> kimundi: (float doesn't exist in master)
[11:32:17] <kimundi> dbaupp: Whoops, you're right xD
[11:32:34] <kimundi> kode-crypt: Anyway, this might help you: http://static.rust-lang.org/doc/master/tutorial.html#crates-and-the-module-system
[11:33:44] <kode-crypt> okey okey i got it 
[11:33:44] <kode-crypt> it provides some functions which we can use 
[11:33:56] <kimundi> Basically, 'use std::float' imports the float module (which is seperate from the float type) into the local scope, which allows you to access elements from it like this: 'let x = float::foo'
[11:34:00] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[11:34:29] <kimundi> Without the use std::float, that line would be 'let x = ::std::float::foo'
[11:34:43] *** Quits: sigma (sigma@moz-23724D77.range86-160.btcentralplus.com) (Ping timeout)
[11:34:50] *** Quits: Savago (Savago@2F1448E.68394D8.18DDB669.IP) (Ping timeout)
[11:35:27] <kode-crypt> okk 
[11:35:50] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[11:35:59] *** Joins: Savago (Savago@D8B9C081.E820043D.D4C04133.IP)
[11:39:09] *** Joins: sigma (sigma@moz-23724D77.range86-160.btcentralplus.com)
[11:39:54] <kode-crypt> can i ask a couple more questions :( i m so sorry i am not getting it still
[11:40:34] <kode-crypt> mod farm {    fn chicken() { println("cluck cluck"); }    fn cow() { println("mooo"); }    mod barn {        fn hay() { println("..."); }    }}fn main() {    println("Hello farm!");}
[11:40:57] <kode-crypt> is it like json ???
[11:41:20] <kode-crypt> farm.chicken(); farm.cow(); ??
[11:41:37] <Ms2ger> farm::chicken(), I guess
[11:41:52] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[11:42:02] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[11:42:29] <kode-crypt> okey 
[11:42:30] *** Joins: jdeng (Mibbit@moz-6548813B.blktn6.nsw.optusnet.com.au)
[11:42:55] <kode-crypt> so if i do like use::farm; then  i can call farm::chicken();
[11:43:54] <jdeng> Is the fn f(&mut [T]) a subtype of fn g(&[T])?
[11:45:00] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[11:46:25] <jdeng> Say, if a function's signature is (int, fn(&[T])) -> int, can I pass a fn with the signature of fn(&mut [T]) to the second argument?
[11:46:34] <Ms2ger> Try it? :)
[11:47:07] <Ms2ger> Well, actually, no
[11:47:53] <Ms2ger> Because you're getting a mutable slice in the callee where the caller is only giving out an immutable one
[11:48:12] <jdeng> What does obstruct it from reality?
[11:48:35] <cmr> jdeng: we have strict aliasing rules about & and &mut
[11:49:08] <cmr> There can only ever be one borrowed reference to something you have a &mut to: the &mut itself.
[11:50:05] <cmr> This leads to some very nice optimization opportunities and (ostensibly) makes it easier to reason about mutability.
[11:50:06] *** Quits: Ms2ger (Ms2ger@moz-FED0935A.ugent.be) (Quit: bbl)
[11:50:29] <jdeng> I want to create an abstraction over sorting algorithms, thus sort_array(a: ~[T], sort: fn(&mut [T])).
[11:50:47] <jdeng> but some algorithms sort the array in place, others not.
[11:50:49] <dbaupp> jdeng: if you could pass a function fn(&mut [T]) then that function could mutate that vector
[11:51:02] <dbaupp> (which is definitely illegal)
[11:51:16] <dbaupp> the subtyping would be the other direction, if anything.
[11:51:25] <jdeng> Oh, I c
[11:51:51] *** Joins: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP)
[11:52:08] <kimundi> kode-crypt: yes
[11:52:33] <jdeng> So in this case, how can I abstract those sorting algorithms?
[11:52:45] *** Quits: moostik (Icedove@moz-4AD91EE4.w82-121.abo.wanadoo.fr) (Ping timeout)
[11:52:55] <jdeng> While some need to mutate the input, others not.
[11:53:16] <cmr> jdeng: I don't see a way to do it
[11:53:20] <dbaupp> a trait
[11:53:21] <dbaupp> but
[11:53:29] <kimundi> jdeng: You could pass in a &mut ~[T]
[11:53:40] <dbaupp> how would `sort: fn(&[T])` actually sort anything?
[11:53:50] <dbaupp> (unless it returns the sorted vector?)
[11:53:58] <kimundi> jdeng: That is, design the interface that way
[11:54:07] <jdeng> That's a typo, I mean fn(&mut [T])
[11:54:07] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[11:54:15] <nlminhtl> Why does it ignore my second impl? https://gist.github.com/Ignotus/e413c73d363cbdf2804c
[11:54:45] <cmr> nlminhtl: macros can only expand to a single item. An impl is an item, you have two impls, thus two items.
[11:54:50] <cmr> nlminhtl: are you using 0.8?
[11:54:53] <jdeng> I just wondering how to declare that sort abstract function
[11:54:58] <nlminhtl> cmr: no
[11:55:08] <dbaupp> jdeng: so what are the two types of algorithms you want? `sort: fn(&mut [T])` and `sort: ...` ?
[11:55:09] <kimundi> jdeng: Seems to me the most reasonable thing to do would be to accept a &mut[T], and the let the sorting algorithmn handle  how it sorts that. That is, if is not in-place, it needs to internally allocate a ~[T]
[11:55:10] *** Joins: anri (solancile@moz-E49E7C4B.hsd1.wa.comcast.net)
[11:55:25] <kimundi> nlminhtl: Oh, you're back!
[11:55:27] <cmr> Hm, I thought a warning was added for when something from macro expansion was ignored.
[11:55:36] *** Quits: kode-crypt (chatzilla@ED7FA044.57266F2B.1C37C358.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 25.0/20131028113246])
[11:55:40] <dbaupp> (it was added after 0.8)
[11:55:44] <kimundi> nlminhtl: 20min after you left yesterday I found a solution for that iterator thingy :P
[11:55:45] <dbaupp> oh
[11:55:49] <cmr> dbaupp: :P
[11:55:52] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[11:56:05] <dbaupp> cmr: and it is warning in that gist
[11:56:13] <cmr> Oh, so it is
[11:56:23] *** Joins: moostik (Icedove@moz-63ED7231.w82-121.abo.wanadoo.fr)
[11:56:31] * cmr hates netbooks, they require scrolling
[11:56:41] <dbaupp> nlminhtl: one way to fix it is to put it into a module
[11:56:49] <dbaupp> cmr: zoom out all the way \p/
[11:56:54] <dbaupp> *\o/
[11:56:58] <jdeng> @kimundi I guess so
[11:57:26] <cmr> kimundi: At that point, though, you're losing all the benefit of having immutability
[11:57:28] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[11:57:44] <cmr> So while fn(&mut [T]) -> Option<~[T]> would be the most generic way, it's not very nice
[11:58:09] <cmr> jdeng: also, you probably want |&mut [T]|, so you can give it closures as well as just function pointers.
[11:58:19] <cmr> (ie, sort(a, |s| { ... });
[11:58:48] <jdeng> cmr: Yes, I want that effect.
[11:59:06] <jdeng> But that mut anoys me
[11:59:11] <kimundi> Well, the immutable way would be to take a ~[T], and return a ~[T]
[11:59:27] <jdeng> kimundi: right.
[11:59:33] <kimundi> fn sort(vec: ~[T]) -> ~[T]
[11:59:42] <cmr> (Well, you'd probably want it to take a &[])
[12:00:00] <kimundi> taking &[T] and returning a ~[T] would imply that the T's need to get cloned
[12:00:56] <kimundi> taking &[T] and returning a new ~[T] only really works if you only want to sort things like integers, where cloning them is cheap and you don't care about it. :P
[12:00:58] <cmr> Isn't that typically how those sorting algorithms work?
[12:01:58] <kimundi> cmr: Seems like a needlessy restricted design to me
[12:02:06] <nlminhtl> kimundi: and.. what's your solution? :)
[12:02:09] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[12:02:36] <kimundi> sort(~[~"loooong string", ~"looonger string"]) ... I wouldn't want to clone all those just to reorder them :P
[12:02:40] <kimundi> nlminhtl: https://gist.github.com/Kimundi/7526647
[12:03:06] *** Quits: q66__ (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[12:03:19] <kimundi> nlminhtl: Ît amounted to "You need to write a own Iterator because the are complications with storing a closure in one"
[12:04:45] <kimundi> nlminhtl: Actually, that gist is a halfway-there compromise. The most general solution would be to write a complete self contained "AllPairs" Iterator, but that resulted in to much code to late in the evening, which is why I stopped with the current solution :P
[12:05:37] *** Joins: cubic (cubic@moz-80241A3A.mc.videotron.ca)
[12:06:06] *** Quits: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) (Ping timeout)
[12:07:21] *** Joins: freezerburnv (freezerbur@moz-E25EEE31.washdc.fios.verizon.net)
[12:07:24] *** Joins: Savago (Savago@2F1448E.68394D8.18DDB669.IP)
[12:09:15] *** Quits: moostik (Icedove@moz-63ED7231.w82-121.abo.wanadoo.fr) (Ping timeout)
[12:13:37] *** Joins: q66__ (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[12:14:14] *** Quits: Savago (Savago@2F1448E.68394D8.18DDB669.IP) (Quit: Savago)
[12:18:16] <kimundi> nlminhtl: (If there is anything unclear, which I expect because that gist is not very self-explanatory, you need to ask me in a hour or so :) )
[12:20:39] *** Quits: ricepuddin (graham@moz-CB4E355B.wlan.ic.ac.uk) (Ping timeout)
[12:22:55] *** Joins: fyolnish (fyolnish@moz-D4587517.uqwimax.jp)
[12:24:38] *** Quits: fyolnish (fyolnish@moz-D4587517.uqwimax.jp) (Ping timeout)
[12:24:57] *** Joins: ofeldt (ofeldt@moz-8B58830E.dip0.t-ipconnect.de)
[12:25:41] *** Quits: ofeldt- (ofeldt@moz-CFA3EF2D.dip0.t-ipconnect.de) (Ping timeout)
[12:25:50] *** Quits: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP) (Ping timeout)
[12:27:32] *** Quits: jdeng (Mibbit@moz-6548813B.blktn6.nsw.optusnet.com.au) (Quit: http://www.mibbit.com ajax IRC Client)
[12:27:45] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[12:28:22] *** Joins: alonlevy (alon@moz-F53E4C49.redhat.com)
[12:29:47] *** kimundi is now known as zz_kimundi
[12:33:54] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[12:35:18] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[12:37:01] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[12:37:49] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[12:38:40] *** zz_kimundi is now known as kimundi
[12:38:43] *** Quits: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP) (Ping timeout)
[12:39:20] *** Quits: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au) (Quit: ChatZilla 0.9.90.1 [Firefox 26.0/20131114085019])
[12:42:07] *** Quits: Sgeo (quassel@moz-D0F30617.dyn.optonline.net) (Connection reset by peer)
[12:42:23] *** kimundi is now known as zz_kimundi
[12:42:48] * eddyb wonders if this can be generated from Rust types http://kentonv.github.io/capnproto/language.html
[12:43:12] <eddyb> (using Rust type notation would also make some things nicer)
[12:43:36] *** Joins: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP)
[12:43:40] *** Joins: fyolnish (fyolnish@moz-D4587517.uqwimax.jp)
[12:47:01] <eddyb> rusti: [1, 2, 3][2u]
[12:47:03] -rusti- 3
[12:47:05] <eddyb> rusti: [1, 2, 3][2u8]
[12:47:06] -rusti- 3
[12:50:44] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[12:52:27] <cmr> wait what
[12:52:36] <cmr> you can index with non-uint?
[12:52:38] <cmr> that seems wrong
[12:52:51] <cmr> I don't see a reason to disallow it, but still..
[12:53:46] *** Quits: GeneralMaximus (ankur@207642AA.9BA06023.CA2C69FA.IP) (Quit: Computer has gone to sleep.)
[12:53:50] *** Quits: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP) (Quit: Leaving.)
[12:54:05] <dbaupp> cmr: https://github.com/mozilla/rust/issues/10453
[12:55:55] <cmr> hah
[13:00:34] *** Quits: freezerburnv (freezerbur@moz-E25EEE31.washdc.fios.verizon.net) (Quit: freezerburnv)
[13:01:02] *** Quits: pseudoku (quassel@A2C972CC.6F53187D.520CDC98.IP) (Ping timeout)
[13:02:07] *** pmoore|away is now known as pmoore
[13:03:07] *** Joins: pseudoku (quassel@F60CFB46.F00CA6EC.520CDC98.IP)
[13:03:21] *** Quits: victorporof (victorporo@FD3598E9.ED3BC0A9.9B1E38F4.IP) (Quit: victorporof)
[13:04:13] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[13:06:21] *** Joins: sebcrozet (sebcrozet@moz-3CE49532.lrde.epita.fr)
[13:07:02] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[13:08:05] *** zz_kimundi is now known as kimundi
[13:08:29] <kimundi> rusti: [1, 2, 3][-1u8]
[13:08:31] -rusti- task <unnamed> failed at 'index out of bounds: the len is 3 but the index is 255', <anon>:9
[13:08:31] -rusti- application terminated with error code 101
[13:08:32] <kimundi> rusti: [1, 2, 3][-1i8]
[13:08:33] -rusti- task <unnamed> failed at 'index out of bounds: the len is 3 but the index is -1', <anon>:9
[13:08:33] -rusti- application terminated with error code 101
[13:08:37] <kimundi> hum...
[13:09:46] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[13:10:07] <benh> how'd people feel about syntax like "x as &" to turn x from ~T to &T explicitly?
[13:10:23] <benh> a more general &* without repeating the underlying type...
[13:10:26] <dbaupp> isn't &*x shorter and nicer?
[13:10:51] <dbaupp> ("nicer" is subject to taste, of course.)
[13:11:03] <benh> doesn't work for ~[], does it?
[13:11:14] <benh> (or does that change with dst?)
[13:11:50] <benh> unless you'd turn &* into a single magical operator I suppose :)
[13:12:14] <dbaupp> I think it'd change with dst
[13:12:14] *** Joins: ricepuddin (graham@moz-DD52B39B.wlan.ic.ac.uk)
[13:12:34] <dbaupp> in any case, ~ -> & happens automagically in the common case, doesn't it? (even for [])
[13:13:09] <benh> i seem to keep running into cases where it happens less automatically than i expect
[13:13:20] *** Joins: Ms2ger (Ms2ger@92EF86A7.A020F168.187A1082.IP)
[13:13:27] <benh> aka cases that are less common than i thought, i suppose ;)
[13:13:42] <dbaupp> yeah, there are quite a few places that it falls down
[13:15:55] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[13:16:35] <cmr> Wouldn't ascription help there?
[13:16:37] <cmr> x: &_
[13:17:20] <benh> oh, that's basically what i wanted to express. I didn't think neither ascription nor the _ thing in that position was decided upon yet, though. :)
[13:17:49] <cmr> No, but we're also trying to rid ourselves of `as` for casts I thought
[13:21:01] <pnkfelix> acrichto: ping
[13:24:13] <pnkfelix> acrichto: (nothing big, just wanted to know what github A-tag to use for privacy bugs)
[13:24:14] *** Joins: jdm (jdm@moz-ED0C7AC7.hinet-ip.hinet.net)
[13:24:14] *** ChanServ sets mode: +o jdm
[13:26:20] *** Quits: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:26:20] <cmr> pnkfelix: I would think it'd be A-linkage
[13:26:55] <pnkfelix> cmr: Really?  I was thinking A-linkage would be for dealing with object file linkage, not source code privacy checks
[13:27:17] <pnkfelix> cmr: (maybe the two notions should naturally fit together, but in my implementation-oriented head they currently do not...)
[13:28:06] <pnkfelix> cmr: I guess the description on https://github.com/mozilla/rust/wiki/Note-tag-label-names-and-definitions is broad enough to cover both cases
[13:28:34] <eddyb> The ocean ate the last of the land and poured into the smoking gulf, thereby
[13:28:40] <eddyb> WHAT THE ACTUAL FUCK IS GOING ONE
[13:28:42] <eddyb> *ON
[13:28:52] <eddyb> fatal runtime error: thread-local pointer is null. bogus!
[13:29:01] <eddyb> (there's like 8 rows of that story)
[13:29:26] <eddyb> cmr: a smaller file this time. so many errors, rustc crashes while printing them
[13:29:50] *** Joins: reyre (reyre@moz-78892580.hsd1.ca.comcast.net)
[13:29:54] <dbaupp> eddyb: ah, you haven't met those poems yet?
[13:30:23] <eddyb> all I have is a slightly large compile-fail "testcase"
[13:31:23] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Ping timeout)
[13:31:35] *** Quits: ab (alex@BC9D99CC.37C1012D.FE617B51.IP) (Ping timeout)
[13:31:48] *** Quits: reyre (reyre@moz-78892580.hsd1.ca.comcast.net) (Ping timeout)
[13:33:03] <eddyb> 1.6k lines, 80kB
[13:33:34] *** Quits: Sorella (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Ping timeout)
[13:33:40] *** pmoore is now known as pmoore|away
[13:34:26] *** Joins: GeneralMaximus (ankur@99264FE.5268F106.D2D1FAF0.IP)
[13:34:48] <eddyb> cmr: https://gist.github.com/eddyb/7ee6cad98bb5875e5e2b
[13:34:54] <eddyb> if you want to play with it
[13:36:11] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Quit: 랜덤은 쇠퇴했습니다.)
[13:36:21] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[13:36:58] *** Joins: w3lcome (Mibbit@moz-177EEEFC.home.otenet.gr)
[13:38:09] *** jorendorff_away is now known as jorendorff
[13:38:58] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[13:41:07] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[13:41:13] <cmr> pnkfelix: Hm, it's using linkage in a different way than I would expect.
[13:41:40] <cmr> pnkfelix: Linkage in my mind is visibility, although I suppose traditionally that applies across compilation units, rather than within crates.
[13:42:11] *** Joins: kode-crypt (chatzilla@9BE163B0.70578880.F102451D.IP)
[13:42:13] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[13:42:45] <pnkfelix> cmr: To me linkage == resolution, but obviously we've got two separate A-tags for the notions so I must be wrong.  :)
[13:42:55] <cmr> eddyb: I don't get a crash during printing.
[13:43:16] <cmr> pnkfelix: Well, privacy/visibility are completely separate from name resolution now (they weren't before)
[13:43:28] <eddyb> cmr: printing? you mean you tried compilation, you got errors but no crash?
[13:43:35] <cmr> eddyb: yep
[13:43:45] <eddyb> means it was fixed since my last rebuild
[13:43:53] <pnkfelix> cmr: I know, that's  why I was pinging acrichto, since he's the one who separated the two (if I recall correctly)
[13:43:56] <cmr> Or there's environmental platforms
[13:43:58] <cmr> pnkfelix: yup
[13:44:14] <cmr> erm, environmental or platform differences.
[13:44:16] <cmr> eddyb: SHA?
[13:44:26] <cmr> e094350 here
[13:44:43] <eddyb> nah it's a couple weeks behind
[13:44:53] <eddyb> oh dear, all the <'self> will make a mess out of this
[13:47:06] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[13:49:02] *** Joins: Sorella (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[13:49:03] <eddyb> error: method `add` has an incompatible type: expected concrete lifetime, but found bound lifetime parameter &
[13:49:06] <eddyb> please work :/
[13:49:27] <eddyb> do I need &'self self?
[13:49:40] <cmr> On Add?
[13:50:59] <eddyb> not sure what I'm doing wrong
[13:51:21] *** Quits: Sorella (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Ping timeout)
[13:51:36] *** Joins: themgt (themgt@moz-83F07CDA.cm.vtr.net)
[13:51:36] <eddyb> cmr: I have impl<'self> Add<Expr<'self>, Expr<'self>> for Expr<'self>
[13:51:38] <cmr> eddyb: https://github.com/mozilla/rust/pull/10506 is the only thing that would affect that
[13:51:40] *** Quits: themgt (themgt@moz-83F07CDA.cm.vtr.net) (Quit: themgt)
[13:52:00] <eddyb> not static fn
[13:52:16] <cmr> afaik there were no other changes to borrowck..
[13:52:34] *** Quits: ski (md9slj@moz-E5796727.student.chalmers.se) (Client exited)
[13:52:48] <cmr> I don't think it likes that the impl is lifetime-parametric
[13:52:57] <eddyb> LOL nvm
[13:53:08] <eddyb> cmr: I was missing a <'self> after the second parameter's type
[13:53:24] <cmr> Ok
[13:53:37] <cmr> May I suggest renaming it from 'self to something consciousable, like 'a? :)
[13:53:49] <eddyb> still failing for: fn add(&self, other: &'self Expr<'self>) -> Expr<'self>
[13:53:52] *** Joins: Sorella (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[13:54:21] <eddyb> cmr: sure, after I get it to compile
[13:55:52] <eddyb> cmr: current code: https://gist.github.com/eddyb/7ee6cad98bb5875e5e2b
[13:56:17] <eddyb> I should be getting ready to leave, don't want to be late >_>
[13:59:08] *** pmoore|away is now known as pmoore
[13:59:10] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[13:59:40] *** Quits: kode-crypt (chatzilla@9BE163B0.70578880.F102451D.IP) (Connection reset by peer)
[13:59:58] <eddyb> cmr: any ideas what might be going on there?
[14:00:06] <eddyb> I'm not sure what to add to make it happy
[14:07:01] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[14:08:37] *** Joins: mikezaby (mikezaby@moz-AA896205.home.otenet.gr)
[14:09:23] *** Quits: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca) (Client exited)
[14:11:09] *** pmoore is now known as pmoore|away
[14:13:17] *** Parts: mikezaby (mikezaby@moz-AA896205.home.otenet.gr) ()
[14:14:06] *** Quits: cdidd (cdidd@moz-BD0F9CA8.broadband.corbina.ru) (Ping timeout)
[14:14:07] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[14:14:21] *** Joins: cdidd (cdidd@moz-BD0F9CA8.broadband.corbina.ru)
[14:17:38] *** Joins: freezerburnv (freezerbur@moz-F0DFB280.hfc.comcastbusiness.net)
[14:18:05] <cmr> eddyb: nope, no idea
[14:28:05] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[14:29:47] *** Joins: jordyd (jordyd@moz-4CC3B2DE.seg38.ucf.edu)
[14:30:13] *** Quits: alonlevy (alon@moz-F53E4C49.redhat.com) (Ping timeout)
[14:33:10] *** Joins: Janko (chatzilla@D9AEFC3E.9E37BD61.9C3D12F2.IP)
[14:36:12] *** Quits: arodier74 (Thunderbir@moz-527C2D95.in-addr.btopenworld.com) (Quit: arodier74)
[14:36:45] *** Joins: kmapped (kmapped@moz-2489C24B.compute-1.amazonaws.com)
[14:37:06] *** pmoore|away is now known as pmoore
[14:37:38] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[14:37:49] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[14:37:54] *** Joins: arodier74 (Thunderbir@moz-527C2D95.in-addr.btopenworld.com)
[14:38:09] *** Quits: jordyd (jordyd@moz-4CC3B2DE.seg38.ucf.edu) (Ping timeout)
[14:40:03] *** Joins: jordyd (jordyd@moz-4CC3B2DE.seg38.ucf.edu)
[14:40:10] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[14:40:48] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Ping timeout)
[14:42:50] *** Joins: amro (quassel@CC16DC52.8AAAF769.FAAB0799.IP)
[14:45:01] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[14:46:22] *** Joins: victorporof (victorporo@1AE6B189.39508509.6A4F8DA2.IP)
[14:47:13] *** Quits: Janko (chatzilla@D9AEFC3E.9E37BD61.9C3D12F2.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 28.0a1/20131117144231])
[14:47:43] *** Quits: amro (quassel@CC16DC52.8AAAF769.FAAB0799.IP) (Client exited)
[14:47:56] *** Joins: amro (quassel@CC16DC52.8AAAF769.FAAB0799.IP)
[14:48:58] *** Joins: alonlevy (alon@moz-87959726.redhat.com)
[14:50:57] *** Quits: pseudoku (quassel@F60CFB46.F00CA6EC.520CDC98.IP) (Connection reset by peer)
[14:52:58] *** Joins: alan (alan@moz-C7F53227.hfc.comcastbusiness.net)
[14:53:52] *** Joins: pseudoku (quassel@F206D52.81D533B5.520CDC98.IP)
[14:56:27] *** Joins: josh (josh@moz-6FB23C25.hvc.res.rr.com)
[14:56:31] *** Joins: heftig (heftig@moz-97EC5A2C.dip0.t-ipconnect.de)
[14:59:26] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[15:00:49] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Input/output error)
[15:01:09] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[15:01:32] *** kimundi is now known as zz_kimundi
[15:03:31] *** Joins: lfox (lfox@moz-861E573F.nyc.biz.rr.com)
[15:04:55] *** Quits: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca) (Client exited)
[15:05:07] *** Quits: amro (quassel@CC16DC52.8AAAF769.FAAB0799.IP) (Ping timeout)
[15:05:15] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[15:05:23] *** Joins: amro (quassel@CC16DC52.8AAAF769.FAAB0799.IP)
[15:06:20] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[15:07:18] *** Joins: pyrac (pyrac@DFC5DF94.73C89388.AD05C589.IP)
[15:08:06] *** Joins: cs648 (charlie@moz-7C52DAC0.range86-176.btcentralplus.com)
[15:09:15] <cs648> Can someone help me with a compilation issue?
[15:09:17] *** Quits: houzi (houzi@moz-4F6A1E26.getinternet.no) (Ping timeout)
[15:09:28] <cs648> My code is at http://codepad.org/MfeUyp6z 
[15:09:34] *** Joins: houzi (houzi@moz-4F6A1E26.getinternet.no)
[15:09:43] <cs648> I'm sure I'm doing something wrong with importing modules but I'm not sure exactly what
[15:10:04] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[15:10:59] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[15:11:00] *** Quits: alan (alan@moz-C7F53227.hfc.comcastbusiness.net) (Quit: alan)
[15:12:02] *** Joins: eddyb9 (eddy@55BBDE08.8E4D8E22.4A6B528C.IP)
[15:14:34] <eddyb9> I've just had a crazy idea that might just work: for a stringbuilder, recurse left to right, adding the total length of the string as you go. at the end, allocate the storage size and return it. then right to left, put each piece in and return (offset, ~str)
[15:15:08] <eddyb9> *allocate a string knowing the storage size
[15:16:20] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[15:16:38] *** Quits: ricepuddin (graham@moz-DD52B39B.wlan.ic.ac.uk) (Ping timeout)
[15:17:32] <sp3d> I thought we already did that
[15:18:07] *** Joins: ricepuddin (graham@moz-DD52B39B.wlan.ic.ac.uk)
[15:18:22] <eddyb9> sp3d: for what?
[15:18:30] <sp3d> 'Writer's
[15:19:07] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[15:19:13] <eddyb9> it's actually the with_ closure-based pattern in rust that made me think of it
[15:19:19] *** zz_kimundi is now known as kimundi
[15:19:56] <eddyb9> sp3d: well, glad to know it's used, seems like a serious optimization for some cases
[15:19:57] <sp3d> hmmm, maybe not; I'm not very familiar with the implementation
[15:20:25] <sp3d> maybe it's fmt
[15:20:33] <eddyb9> ah ok. I was thinking of porting my Expr::inspect() to rust
[15:20:53] <kimundi> cs648: What exactly fails there?
[15:21:41] <cs648> kimundi: http://codepad.org/xwmiQLeI
[15:21:53] <eddyb9> so it's kinda like ropes but without allocating the individual pieces
[15:22:12] <eddyb9> you use the stack as a staging ground
[15:23:06] <eddyb9> kimundi: care to check my idea for wheel reinvention?
[15:24:02] <kimundi> eddyb9: Sorry, not right now :P
[15:24:15] <eddyb9> np, just very curious
[15:25:08] <eddyb9> another way to put it: sum length downwards and concatenate upwards
[15:25:20] <kimundi> cs648: I have to look it up for more details, but afaik from_iterator is not implemented on HashSet directly, but a trait method. Also, v is not a Iterator  there, but a owned vector
[15:26:05] <eddyb9> you get to keep any stack locals, like a buffer to store the result of itoa
[15:26:45] <kimundi> eddyb9: Well, I know that something like str::concat takes a &[&str], iterates over it once to get the added size, allocates a ~str with that size, then pushes them all to it, no idea if that is related
[15:26:52] <eddyb9> sp3d: std::fmt does something clever, but I'm not sure it recurses like this
[15:26:54] *** Quits: alonlevy (alon@moz-87959726.redhat.com) (Ping timeout)
[15:27:09] *** Quits: JanC (janc@moz-1A34A6E4.dsl.scarlet.be) (Connection reset by peer)
[15:27:10] <eddyb9> kimundi: my idea works when you don't know the size beforehand
[15:27:24] *** Quits: jordyd (jordyd@moz-4CC3B2DE.seg38.ucf.edu) (Ping timeout)
[15:27:24] <kimundi> eddyb9: which size?
[15:27:30] <cs648> kimundi: yeah to be honest I'm sure the code is wrong but I'm surprised at the error I get, I thought I would get a typing error not a name error. Is the name error due to it being incorrectly typed?
[15:27:40] *** Joins: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com)
[15:28:02] <kimundi> cs648: The name error means the compiler never gets to a point where it sees a type error
[15:28:29] <kimundi> cs648: If it doesn't know the name, it can't know if its correct :P
[15:28:31] *** Joins: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP)
[15:29:04] <eddyb9> kimundi: the size of each piece - so you can convert a number to a string on the stack, pass the string piece length downwards and write the piece when it retirms
[15:29:36] <eddyb9> no heap allocation, no converting number to string twice
[15:29:48] <cs648> kimundi: right so can you see where the problem is importing HashSet?
[15:30:10] <kimundi> eddyb9: I'm not sure what you mean... We neither have vectors nor strings on the stack :P
[15:30:55] <kimundi> cs648: Well, if it doesn't error with unresolved name for HashSet and HAshMap, then those part is correct
[15:30:56] <eddyb9> kimundi: and it fits very nicely in Rust, because of the with_ closure pattern
[15:31:16] <eddyb9> kimundi: fixed size, there's hard limits on the itoa result
[15:31:52] <kimundi> eddyb9: Wait, are you talking just about turning a fixed sized intger into a string?
[15:32:08] *** Joins: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP)
[15:32:21] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[15:32:24] *** Joins: ianj (ianjneu@moz-7140CF01.ccs.neu.edu)
[15:32:35] <cs648> kimundi: did you see my paste? the error is 'prob35.rs:8:12: 8:34 error: unresolved name `HashSet::from_iterator`.'
[15:32:54] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[15:32:58] <eddyb9> for hex, you don't need to store 0x, just add 2 on your way down and prepend on your way up
[15:33:30] <eddyb9> kimundi: stringifying some nested structure
[15:33:40] <eddyb9> with 0 reallocs
[15:33:44] <kimundi> cs648: Right, thats because it should be FromIterator::from_iterator.
[15:33:46] *** Quits: nfroidure (nfroidure@moz-C862FE50.w90-34.abo.wanadoo.fr) (Quit: Ex-Chat)
[15:34:11] <cs648> kimundi: ah right thanks! I'll try that and get back to you
[15:34:32] * eddyb9 will be back later. you can keep talking, another instance @home
[15:34:34] *** Quits: eddyb9 (eddy@55BBDE08.8E4D8E22.4A6B528C.IP) (Quit: Leaving)
[15:34:43] <kimundi> cs648: I meant that it doesn'T error about the HashSet and HashMap itself, just about you trying to access the from_iterator function on it
[15:35:40] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[15:35:58] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[15:36:35] <kimundi> eddyb: Hm, the current fmt works so that no temporary strings need to be allocated
[15:36:44] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[15:37:03] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[15:38:03] *** Quits: josh (josh@moz-6FB23C25.hvc.res.rr.com) (Quit: josh)
[15:39:32] *** Joins: themgt (themgt@moz-83F07CDA.cm.vtr.net)
[15:39:37] <cs648> kimundi: ok now here's the errors I get
[15:39:42] <cs648> http://codepad.org/BY6PftOU
[15:39:51] <cs648> http://codepad.org/tUI4nD7y
[15:39:58] <cs648> http://codepad.org/FZQ9CxMH
[15:40:48] <nmatsakis> what is David Halperin's IRC nick?
[15:41:11] <kimundi> cs648: It's either take_while or a completly different method name :P
[15:41:54] *** Joins: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca)
[15:42:08] *** Joins: alonlevy (alon@moz-F53E4C49.redhat.com)
[15:42:40] <cs648> kimundi: ok great thanks :)
[15:43:07] <cs648> kimundi: so how do I get an iterator from a vector? Or is there a better way to get a HashSet from a vector?
[15:43:29] *** Joins: JanC (janc@moz-2DDC8A15.dsl.scarlet.be)
[15:43:43] <kimundi> cs648: The nice thing about the FromIterator trait is that you don'T need to allocate a vector inbetween :)
[15:43:47] <kimundi> cs648: let s : HashSet<uint> = p.take_while(|x:uint| { x < 1000000 }).collect();
[15:44:29] <kimundi> This iterates over the vector and directly puts all elements into the HashSet, without going through an Vector inbetween
[15:44:50] <kimundi> err, not vectro
[15:45:16] <cs648> kimundi: yup that's better
[15:45:22] <kimundi> It iterates over your primesieve Iterator, and puts them all into the HashSet
[15:45:35] <cs648> kimundi: I'm just trying to pick up rust by doing some project euler stuff in it
[15:45:47] <kimundi> Yeah, that's a good way to do it :)
[15:46:20] *** Quits: avsej (avsej@F469F340.A5BD8B21.5C5F5A39.IP) (Ping timeout)
[15:47:07] *** Quits: amro (quassel@CC16DC52.8AAAF769.FAAB0799.IP) (Ping timeout)
[15:47:40] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[15:49:04] *** Joins: pnathan1 (Adium@moz-5EBBDD83.tukw.qwest.net)
[15:49:45] *** Quits: heftig (heftig@moz-97EC5A2C.dip0.t-ipconnect.de) (Ping timeout)
[15:50:01] *** Joins: heftig (heftig@moz-97EC5A2C.dip0.t-ipconnect.de)
[15:50:28] *** Joins: comex (comex@moz-80880E12.compute-1.amazonaws.com)
[15:50:52] <comex> hello
[15:51:11] <bstrie> hello comex
[15:51:13] <kimundi> hi
[15:51:17] <comex> why doesn't this work? http://pastie.org/8489987
[15:51:22] <nmatsakis> gah, I just cannot /win 15
[15:51:25] <nmatsakis> oops
[15:51:47] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[15:51:48] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[15:52:09] <kimundi> comex: You can't call assoziated functions on traits like this
[15:52:22] <KokaKiwi> comex: Test::hello<T>(); :)
[15:52:31] <KokaKiwi> (I think)
[15:52:50] <comex> KokaKiwi: doesn't work (even with Test::hello::<T>)
[15:53:02] <kimundi> Needs to be Test::test()
[15:53:18] <kimundi> However, currently rust lacks the ability for you to specify that it should use T's impl, so without changing the function signature of test() You can't actually call it at all
[15:53:51] <kimundi> It's probably going to be Test::<for T>::test()
[15:53:58] *** Joins: rofrol (rofrol@moz-8C55345C.static.ptr.magnet.ie)
[15:54:19] <comex> ah
[15:54:49] *** Joins: feduser (feduser@26B214A7.76F0BAA0.650F25DA.IP)
[15:55:35] *** Joins: moostik (Icedove@moz-63ED7231.w82-121.abo.wanadoo.fr)
[15:56:16] *** Quits: ricepuddin (graham@moz-DD52B39B.wlan.ic.ac.uk) (Ping timeout)
[15:57:04] *** Joins: refold (gman@moz-42D68426.a258.priv.bahnhof.se)
[15:59:25] <comex> mind if i file a bug for the odd "module wasn't actually a module" error?
[15:59:40] <kimundi> rusti: trait Test { fn hello(Option<Self>) {} } struct T; impl Test for T {} Test::hello(None::<T>); // This would be a workaround
[15:59:41] -rusti- ()
[15:59:46] <kimundi> comex: Yeah
[16:00:11] <comex> you do?
[16:00:12] <kimundi> comex: That is, do it :P
[16:00:52] <kimundi> File it, it looks confusing, that's reason enough
[16:01:06] <comex> k ;p
[16:01:26] *** Joins: ricepuddin (graham@moz-DD52B39B.wlan.ic.ac.uk)
[16:03:36] *** Quits: pseudoku (quassel@F206D52.81D533B5.520CDC98.IP) (Ping timeout)
[16:05:39] *** Joins: pseudoku (quassel@C535CCE5.9C102D3A.520CDC98.IP)
[16:06:27] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Client exited)
[16:06:48] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[16:09:33] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Client exited)
[16:09:49] <rofrol> hi
[16:09:53] <rofrol> since rust tool was removed, how can I run these tests? https://github.com/exercism/exercism.io/tree/master/assignments/rust
[16:10:13] <rofrol> Also there is page https://github.com/mozilla/rust/wiki/Rustpkg which lists rust-http
[16:10:42] <rofrol> when I try to install it: rustpkg install github.com/chris-morgan/rust-http
[16:10:42] *** Joins: josh (josh@moz-6FB23C25.hvc.res.rr.com)
[16:10:57] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Quit: )
[16:11:09] <rofrol> I got: task '<unnamed>' failed at 'Unhandled condition: nonexistent_package: (package_id::PkgId{path: std::path::posix::Path{repr: ~[103u8, 105u8, 116u8, 104u8, 117u8, 98u8, 46u8, 99u8, 111u8, 109u8, 47u8, 99u8, 104u8, 114u8, 105u8, 115u8, 45u8, 109u8, 111u8, 114u8, 103u8, 97u8, 110u8, 47u8, 114u8, 117u8, 115u8, 116u8, 45u8, 104u8, 116u8, 116u8, 112u8], sepidx: Some(23u)}, short_name:
[16:11:10] <rofrol> ~"rust-http", version: NoVersion}, ~"supplied path for package dir does not exist, and couldn't interpret it as a URL fragment")', /root/rust/src/libstd/condition.rs:131
[16:14:59] *** Quits: jdm (jdm@moz-ED0C7AC7.hinet-ip.hinet.net) (Ping timeout)
[16:15:32] *** Joins: reyre (reyre@moz-78892580.hsd1.ca.comcast.net)
[16:15:35] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[16:15:59] *** Joins: jvshahid (jvshahid@moz-53774307.nycm.ny.megapath.net)
[16:17:01] *** kimundi is now known as zz_kimundi
[16:17:37] *** Joins: alan (alan@moz-C7F53227.hfc.comcastbusiness.net)
[16:18:24] *** Quits: alonlevy (alon@moz-F53E4C49.redhat.com) (Ping timeout)
[16:18:27] *** Quits: alan (alan@moz-C7F53227.hfc.comcastbusiness.net) (Quit: alan)
[16:21:49] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[16:21:54] <Ralith> bjz_: yep
[16:22:00] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[16:23:43] *** Quits: pyrac (pyrac@DFC5DF94.73C89388.AD05C589.IP) (Quit: pyrac)
[16:23:57] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:24:13] *** Joins: nfroidure (nfroidure@moz-C862FE50.w90-34.abo.wanadoo.fr)
[16:25:04] *** Quits: ricepuddin (graham@moz-DD52B39B.wlan.ic.ac.uk) (Ping timeout)
[16:26:19] *** Joins: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net)
[16:27:27] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[16:30:13] *** Joins: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net)
[16:35:35] *** Quits: GeneralMaximus (ankur@99264FE.5268F106.D2D1FAF0.IP) (Quit: Computer has gone to sleep.)
[16:36:19] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[16:39:07] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:40:07] *** Joins: amro (quassel@moz-17EA8511.customers.ownit.se)
[16:40:31] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[16:40:38] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[16:41:28] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[16:44:07] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[16:44:35] *** Quits: pnathan1 (Adium@moz-5EBBDD83.tukw.qwest.net) (Quit: Leaving.)
[16:45:27] *** Quits: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk) (Ping timeout)
[16:46:24] *** Joins: alonlevy (alon@529FCC96.5A6A959A.AB64B967.IP)
[16:46:31] *** Quits: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com) (Ping timeout)
[16:46:50] *** Joins: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com)
[16:48:28] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Client exited)
[16:48:49] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[16:48:52] *** Quits: reyre (reyre@moz-78892580.hsd1.ca.comcast.net) (Client exited)
[16:49:18] *** Joins: reyre (reyre@moz-78892580.hsd1.ca.comcast.net)
[16:49:26] *** Quits: Ferreus (ferreus@moz-45C546AD.dip0.t-ipconnect.de) (Ping timeout)
[16:50:29] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[16:51:08] *** Quits: reyre (reyre@moz-78892580.hsd1.ca.comcast.net) (Ping timeout)
[16:53:05] *** Joins: h0rrorvacui (h0rrorvacu@moz-5B34B08.sip.bhm.bellsouth.net)
[16:53:42] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[16:55:12] *** zz_kimundi is now known as kimundi
[17:02:34] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[17:03:40] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[17:04:54] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[17:06:36] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:06:56] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Connection reset by peer)
[17:08:54] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[17:09:01] *** Joins: Janko (chatzilla@D9AEFC3E.9E37BD61.9C3D12F2.IP)
[17:09:21] *** Joins: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk)
[17:09:33] <acrichto> pnkfelix: we don't have one that I know of, I at least haven't been tracking any
[17:09:50] <pnkfelix> acrichto: a tag for privacy bugs?  Okay
[17:10:04] <pnkfelix> acrichto: (you may have seen cmr and myself debating on the meaning of A-linkage )
[17:10:32] <acrichto> pnkfelix: was that with the  native library not being propagated?
[17:10:50] <pnkfelix> acrichto: I don't know what that question means
[17:10:56] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[17:11:12] <pnkfelix> acrichto: (I don't do much multi-crate dev with Rust, this is me dipping my toes)
[17:11:14] <acrichto> pnkfelix: oh didn't you have a bug with ncursese in one crate but then a crate depending on that crate didn't compile due to a missing ncurses function?
[17:11:17] *** Quits: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk) (Ping timeout)
[17:11:20] <pnkfelix> acrichto: I did
[17:11:32] <acrichto> pnkfelix: currently that was a concious decision, although we may want to revisit it
[17:11:35] <pnkfelix> acrichto:  I just didn't understand your question at first.  In terms of the use of the word "propogated" in this context
[17:12:00] <pnkfelix> acrichto: the odd thing is that whether or not propogation occurs seems to depend on whether one uses type parameterization or not
[17:12:03] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[17:12:26] <acrichto> pnkfelix: we used to propagate link_args attributes across crates, but we stopped that due to various complications
[17:12:40] <acrichto> pnkfelix: in my static-linking pull request though, it becomes much cleaner to do that (if we want to)
[17:12:41] *** Joins: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP)
[17:12:58] <pnkfelix> acrichto: … lets try this version of my question
[17:13:08] <pnkfelix> acrichto: In the bug I filed, I saw two very different behaviors
[17:13:21] <pnkfelix> acrichto: its fine with me if the linkage should be failing
[17:13:37] <pnkfelix> acrichto: but I dislike that the linkage *works* with one formulation, and fails with the other
[17:13:58] <acrichto> pnkfelix: oh I understand why, and it's just a consequence of the decision to not propagate link arguments
[17:14:11] <pnkfelix> acrichto: but if we don't propogate link arguments
[17:14:21] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[17:14:21] <pnkfelix> acrichto: then why does it work without the type parameterization ?
[17:14:41] <acrichto> pnkfelix: when you make it type-parametric it's not compiled in the library crate, it's instantiated in the downstream crate
[17:14:57] <pnkfelix> acrichto: ah okay
[17:14:58] <acrichto> pnkfelix: and ncurses isn't linked to the downstream crate, only the upstream library crate
[17:15:06] <acrichto> the same problem exists for #[inline]
[17:16:47] <pnkfelix> acrichto: So just to clarifY: when the library crate is compiled, is the `-lncurses` flag still being passed, but no functions are referenced from the library and so they are not pulled in?
[17:17:03] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[17:17:03] *** ChanServ sets mode: +ao dherman dherman
[17:17:05] <pnkfelix> acrichto: Or is the `-lncurses` flag not even being pased when the library crate is compoiled ?
[17:17:23] <acrichto> lncurses is passed to the library crate
[17:17:29] <acrichto> it doesn't redefine all the symbols of ncurses though
[17:17:48] <acrichto> so when the downstream crate is compiled, it references an ncurses symbol, but the linker can't find it
[17:17:53] <pnkfelix> acrichto: okay
[17:18:46] <pnkfelix> acrichto: is there some way I can make the library crate redefine ("re-export?") all the symbols that were defined via the relevant `extern { … }` blocK?
[17:19:02] *** Quits: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca) (Quit: canhtak)
[17:19:04] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[17:19:28] <acrichto> hm, not that I know of
[17:19:28] <pnkfelix> acrichto: or is that the wrong answer here, and the right thing really is to somehow get it to propagate the `-lncurses` option for the client crate?
[17:19:45] <acrichto> if you want propagation then have an extern {} block in the client crate
[17:19:54] <acrichto> (although this may be serious enough to change)
[17:20:24] *** Joins: vodik (simon@22418803.9963B395.D02BABA9.IP)
[17:20:44] <pnkfelix> wait, do you literally mean an empty `extern {}` block?
[17:20:49] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[17:20:59] <pnkfelix> or do you mean to re-list the desired symbols in an `extern {}` block in the client crate ?
[17:21:05] <acrichto> #[link_args = "-lncurses"] extern {}
[17:21:08] <pnkfelix> ah
[17:21:13] <pnkfelix> bleah
[17:21:21] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[17:21:22] <pnkfelix> I guess I can understand the need for that
[17:21:46] <pnkfelix> though I continue to wonder about somehow redefining the symbols in the library crate
[17:21:48] <acrichto> there was one primary reason we stopped propagating linkage to native dependencies
[17:22:02] <acrichto> and that was because if you have a static build artifact of a build process, you can't propagate the dependency
[17:22:03] <pnkfelix> (largely so that the clients are ignorant of the true dependence)
[17:22:15] *** Joins: ricepuddin (graham@moz-45962922.wlan.ic.ac.uk)
[17:22:15] <acrichto> you won't redefine symbols
[17:22:35] <acrichto> well, at least I think, the linker doesn't define the symbols of linked libraries
[17:22:50] *** Quits: alonlevy (alon@529FCC96.5A6A959A.AB64B967.IP) (Ping timeout)
[17:24:00] *** Joins: Kruppe (user@moz-253119B0.esg.uwaterloo.ca)
[17:24:19] *** Quits: h0rrorvacui (h0rrorvacu@moz-5B34B08.sip.bhm.bellsouth.net) (Quit: ZQ)
[17:24:30] *** Quits: fyolnish (fyolnish@moz-D4587517.uqwimax.jp) (Quit: Bye)
[17:24:31] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[17:24:35] *** Joins: fyolnish (fyolnish@moz-D4587517.uqwimax.jp)
[17:25:54] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[17:26:08] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[17:28:10] *** Quits: aatch (James@moz-B437F499.pocketrent.com) (Ping timeout)
[17:28:12] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Connection reset by peer)
[17:28:27] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[17:28:27] *** Quits: lfox (lfox@moz-861E573F.nyc.biz.rr.com) (Quit: ZZZzzz…)
[17:28:38] *** Joins: aatch (James@moz-B437F499.pocketrent.com)
[17:28:42] <pnkfelix> acrichto: nonetheless, I should be able to make thin wrappers around the target functions in the library crate
[17:28:46] *** Quits: moostik (Icedove@moz-63ED7231.w82-121.abo.wanadoo.fr) (Ping timeout)
[17:28:53] <acrichto> pnkfelix: correct
[17:29:00] *** Quits: sebcrozet (sebcrozet@moz-3CE49532.lrde.epita.fr) (Ping timeout)
[17:29:04] *** Quits: josh (josh@moz-6FB23C25.hvc.res.rr.com) (Quit: josh)
[17:29:09] <pnkfelix> acrichto: and then make all the type-parameterized functions (or in practice, all the functions) call the thin wrappers
[17:29:23] <pnkfelix> acrichto: it will be a little slower, but that's okay for this use case.
[17:30:06] *** Quits: ricepuddin (graham@moz-45962922.wlan.ic.ac.uk) (Ping timeout)
[17:30:14] <acrichto> again though, we may want to revisit this after my static linking branch lands (because that gates link_args as well
[17:30:15] <pnkfelix> acrichto: I think I see your point about the same problem arising with e.g. #[inline].  The point is that we are injected generated code into the client crate (be it via inlining or via instantiating a type-parametric fn)
[17:30:37] <acrichto> yeah, it may just be too unfortunate
[17:30:48] <pnkfelix> acrichto: ah, what will be the approach you'd take for this problem on your branch?
[17:31:02] <acrichto> native libraries are much more format
[17:31:05] <acrichto> formal*
[17:31:07] *** Joins: doomlord_ (servitor@moz-4625DF14.range86-184.btcentralplus.com)
[17:31:11] <acrichto> #[link(name = "foo", kind = "static")]
[17:31:23] <acrichto> and with static rlibs we must propagate link arguments already
[17:31:31] <acrichto> so we may as well just do it for non-static native libraries
[17:31:35] *** Joins: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com)
[17:31:42] <acrichto> (that was the use case for not propagating in the first place)
[17:31:57] <pnkfelix> which was the use case?
[17:32:25] <pnkfelix> ((it looked like you listed two cases where you were promoting propogation))
[17:32:42] *** Joins: Savago (Savago@2F1448E.68394D8.18DDB669.IP)
[17:33:43] *** Quits: Savago (Savago@2F1448E.68394D8.18DDB669.IP) (Quit: Savago)
[17:33:45] <acrichto> if you have a static native library build dependency, it's not available to downstream crates
[17:33:52] <acrichto> that's the reason we stopped propagating
[17:33:55] *** Joins: Savago (Savago@D8B9C081.E820043D.D4C04133.IP)
[17:34:16] *** Joins: nif (Mibbit@moz-B6DFA19D.wireless.oberlin.edu)
[17:35:44] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[17:36:21] *** Quits: JanC (janc@moz-2DDC8A15.dsl.scarlet.be) (Ping timeout)
[17:36:29] *** Joins: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca)
[17:36:38] *** Quits: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com) (Ping timeout)
[17:36:42] *** Joins: axitkhurana (Adium@3B21D736.4955189D.6AA50C35.IP)
[17:37:14] *** flaper87 is now known as flaper87|afk
[17:37:32] <pnkfelix> acrichto: I'm guessing I'm going to need to go read your emails to rust-dev before I can participate sensibly in this conversation.
[17:37:37] *** Parts: axitkhurana (Adium@3B21D736.4955189D.6AA50C35.IP) ()
[17:38:11] <pnkfelix> (oh, I see.  "rlib" => "rust lib", versus native lib.)
[17:38:23] <icebattle> Does anyone know what kind of timeline we're on for the 0.9 release?
[17:38:31] <acrichto> ah yes, sorry, I've beenc aught up in all that recently
[17:39:05] *** Joins: axitkhurana (Adium@3B21D736.4955189D.6AA50C35.IP)
[17:39:08] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[17:40:02] *** Quits: Janko (chatzilla@D9AEFC3E.9E37BD61.9C3D12F2.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 28.0a1/20131117144231])
[17:41:08] *** Joins: Janko (chatzilla@D9AEFC3E.9E37BD61.9C3D12F2.IP)
[17:41:34] <kimundi> icebattle: Look at the 0.8 release, add three months :P
[17:41:36] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Connection reset by peer)
[17:41:45] *** Joins: pyrac (pyrac@moz-6FD462B1.w90-5.abo.wanadoo.fr)
[17:41:52] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[17:41:58] <icebattle> aha!
[17:41:59] <kimundi> icebattle: They are strictly time based, with no other meaning or guarantee
[17:42:12] *** Joins: reyre (reyre@moz-22F2351B.core.archive.org)
[17:42:13] <kimundi> (which is why everyone recommends just running git master)
[17:42:21] <icebattle> Interesting. OK. Thanks. 
[17:42:40] <icebattle> The problem I'm finding with Master is that some library code seems to fail.
[17:42:40] *** Quits: pyrac (pyrac@moz-6FD462B1.w90-5.abo.wanadoo.fr) (Quit: pyrac)
[17:42:50] *** Joins: ricepuddin (graham@moz-45962922.wlan.ic.ac.uk)
[17:43:12] <icebattle> So I reverted to 0.8. But I would really prefer to stay on the bleeding edge while the language is so fluid.
[17:43:40] *** Joins: josh (josh@moz-6FB23C25.hvc.res.rr.com)
[17:43:48] <kimundi> icebattle: If library have a problem with master fix the library ;)
[17:44:04] <kimundi> You won't find any stable ground otherwise
[17:44:08] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[17:44:29] <icebattle> You're probably right. But I'm still too green to be fixing anything :-)
[17:45:04] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[17:45:08] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[17:45:09] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[17:45:09] *** ChanServ sets mode: +ao dherman dherman
[17:45:55] *** Joins: Ferreus (ferreus@moz-7128F36D.pools.arcor-ip.net)
[17:46:33] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[17:47:14] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Ping timeout)
[17:48:09] *** Quits: victorporof (victorporo@1AE6B189.39508509.6A4F8DA2.IP) (Quit: victorporof)
[17:50:39] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[17:53:19] *** Joins: JanC (janc@moz-16E021F6.dsl.scarlet.be)
[17:54:13] *** Joins: boredomist (ruqs@8186917.CC8FA3EE.E3401B6E.IP)
[17:55:30] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[17:55:51] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[17:57:11] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[17:57:35] *** Quits: fyolnish (fyolnish@moz-D4587517.uqwimax.jp) (Client exited)
[17:58:24] *** jorendorff is now known as jorendorff_away
[17:59:06] <wycats_> buenos dias señors
[17:59:12] <wycats_> the week of putting Rust into production begin
[17:59:14] <wycats_> begins
[17:59:19] <wycats_> perhaps too optimistically :P
[18:01:33] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Connection reset by peer)
[18:03:56] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[18:04:19] *** Quits: shadower (tsedovic@moz-107AD163.redhat.com) (Ping timeout)
[18:04:19] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[18:04:31] *** Quits: ricepuddin (graham@moz-45962922.wlan.ic.ac.uk) (Ping timeout)
[18:05:05] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:05:05] *** ChanServ sets mode: +ao brson brson
[18:05:51] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[18:06:06] <bstrie> wycats_: hasn't your boss told you to get back to doing real work by now ;)
[18:06:10] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[18:06:14] <wycats_> good news
[18:06:17] <wycats_> I am my own boss
[18:06:19] <eddyb> kimundi: fmt has a fixed format, so it can afford that
[18:06:26] <wycats_> http://tilde.io/
[18:07:16] <bstrie> wycats_: perfect! as you may have noticed, rust is all about tildes
[18:07:27] <eddyb> bstrie: ~<3
[18:07:40] <wycats_> confirm :)
[18:07:44] *** Joins: shadower (tsedovic@moz-107AD163.redhat.com)
[18:08:09] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[18:08:09] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:08:28] <wycats_> I "own" my company?
[18:08:43] *** Joins: notmatt (notmatt@CC62CF7E.1E7FDFDB.A82DBDDB.IP)
[18:08:48] <wycats_> as opposed to "manage" my company
[18:08:53] <wycats_> man this joke is not going anywhere
[18:08:53] <wycats_> :P
[18:09:07] <wycats_> I own my company as opposed to being managed?
[18:09:36] <bstrie> wycats_: stick to software development, leave the razor wit to the professionals
[18:09:41] *** Quits: vmx (vmx@moz-AD755B54.pools.arcor-ip.net) (Quit: Leaving)
[18:09:52] *** Joins: victorporof (victorporo@79FE7CA6.284D02A8.D111398B.IP)
[18:09:53] <wycats_> lolol
[18:10:47] *** Quits: axitkhurana (Adium@3B21D736.4955189D.6AA50C35.IP) (Ping timeout)
[18:12:15] *** Quits: Janko (chatzilla@D9AEFC3E.9E37BD61.9C3D12F2.IP) (Ping timeout)
[18:13:04] <eddyb> kimundi: technically, my idea could allow for a non-constant string fmt impl with similar no-temporary-heap-allocations constraints (whenever we get variadic generics)
[18:13:34] *** Joins: moostik (Icedove@moz-63ED7231.w82-121.abo.wanadoo.fr)
[18:13:39] <bstrie> eddyb: "whenever"? has there been any discussion on that front?
[18:14:27] <eddyb> bstrie: wanted post 1.0, maybe before if it's really needed (and if someone puts serious work into it), AFAIK
[18:15:26] *** Joins: Janko (chatzilla@D9AEFC3E.9E37BD61.9C3D12F2.IP)
[18:16:01] *** Quits: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca) (Quit: canhtak)
[18:18:21] *** Quits: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net) (Ping timeout)
[18:18:35] *** jorendorff_away is now known as jorendorff
[18:18:46] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[18:19:44] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[18:20:27] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:20:47] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[18:21:44] *** Joins: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net)
[18:22:15] *** Quits: vodik (simon@22418803.9963B395.D02BABA9.IP) (Quit: moving)
[18:26:09] <eddyb> nobody said anything about my other problem
[18:27:22] *** Joins: tikue (tikue@moz-FEADCD38.hsd1.pa.comcast.net)
[18:28:02] *** Joins: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca)
[18:28:18] *** Quits: victorporof (victorporo@79FE7CA6.284D02A8.D111398B.IP) (Quit: victorporof)
[18:28:23] *** Joins: alonlevy (alon@moz-61A0AD83.red.bezeqint.net)
[18:29:59] *** jorendorff is now known as jorendorff_away
[18:30:24] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[18:30:34] *** Quits: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net) (Client exited)
[18:30:55] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[18:31:13] <eddyb> rusti: struct Foo<'self>(&'self int); impl<'self> Add<Foo<'self>, Foo<'self>> for Foo<'self> {fn add(&self, other: &'self Foo<'self>) -> Foo<'self> {*self}}
[18:31:14] -rusti- pastebinned 8 lines of output: http://sprunge.us/RWfF
[18:31:18] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[18:31:25] *** Joins: kode-crypt (chatzilla@9BE163B0.70578880.F102451D.IP)
[18:31:36] <eddyb> rusti: struct Foo<'self>(&'self int); impl<'a> Add<Foo<'a>, Foo<'a>> for Foo<'a> {fn add(&self, other: &'self Foo<'self>) -> Foo<'self> {*self}}
[18:31:37] -rusti- pastebinned 26 lines of output: http://sprunge.us/iKHN
[18:32:05] <eddyb> rusti: struct Foo<'self>(&'self int); impl<'self> Add<Foo<'self>, Foo<'self>> for Foo<'self> {fn add<'self>(&self, other: &'self Foo<'self>) -> Foo<'self> {*self}}
[18:32:06] -rusti- pastebinned 11 lines of output: http://sprunge.us/aPNa
[18:32:16] <wycats_> is that Rust or XML?
[18:32:18] <wycats_> :trollface:
[18:32:22] *** Joins: blank_name (blank_name@FAB53C88.7071B2C8.31EC03F3.IP)
[18:32:30] <eddyb> I don't understand what is going on :(
[18:33:20] <pcwalton> eddyb: try fn add<'a> instead of <'self>
[18:33:25] <pcwalton> all of this is temporary
[18:33:34] <pcwalton> in fact I think nmatsakis may have a PR to fix it
[18:34:00] <eddyb> rusti: struct Foo<'self>(&'self int); impl<'self> Add<Foo<'self>, Foo<'self>> for Foo<'self> {fn add<'a>(&'a self, other: &'a Foo<'a>) -> Foo<'a> {*self}}
[18:34:02] -rusti- pastebinned 6 lines of output: http://sprunge.us/cfSY
[18:34:17] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[18:34:20] <eddyb> struct Foo<'self>(&'self int); impl<'self> Add<Foo<'self>, Foo<'self>> for Foo<'self> {fn add(&self, other: &'self Foo<'self>) -> Foo<'self> {*self}}
[18:34:22] <eddyb> errr
[18:34:27] <eddyb> note: expected concrete lifetime is lifetime re_infer(ReSkolemized(0u, br_anon(0u)))
[18:34:31] <eddyb> ^ that's just precious
[18:34:50] <nmatsakis> need to figure out a way to not print that message
[18:34:50] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[18:34:58] <wycats_> it's better than the PHP error that refers to a token by its hebrew name
[18:35:00] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[18:35:03] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[18:35:09] <nmatsakis> eddyb: I'm on a call now, but I can explain what's wrong with your code in a sce :)
[18:35:15] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[18:35:17] <eddyb> sure, thanks :D
[18:35:28] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[18:35:30] <eddyb> rusti: struct Foo<'self>(&'self int); impl<'self> Add<Foo<'self>, Foo<'self>> for Foo<'self> {fn add<'a>(&'a self, other: &'a Foo<'self>) -> Foo<'self> {*self}}
[18:35:31] -rusti- pastebinned 6 lines of output: http://sprunge.us/fQNK
[18:35:45] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[18:35:51] <eddyb> rusti: struct Foo<'self>(&'self int); impl<'self> Add<Foo<'self>, Foo<'self>> for Foo<'self> {fn add<'a>(&'a self, other: &'a Foo<'self>) -> Foo<'a> {*self}}
[18:35:52] -rusti- pastebinned 6 lines of output: http://sprunge.us/jIBG
[18:35:57] <eddyb> well, I give up :P
[18:36:09] <wycats_> http://stackoverflow.com/questions/592322/php-expects-t-paamayim-nekudotayim
[18:36:11] <eddyb> but I'm guessing it's a mix of 'a and 'self
[18:36:13] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[18:36:20] <eddyb> wycats_: read a fractal of bad design?
[18:37:35] <wycats_> http://me.veekun.com/blog/2012/04/09/php-a-fractal-of-bad-design/ ?
[18:38:13] <wycats_> "Do not tell me “that’s how the C API works”. What on Earth is the point of using a high-level language if all it provides are some string helpers and a ton of verbatim C wrappers?" I will use that one on Rust ;)
[18:38:17] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[18:38:59] <o11c> but there are some things you should follow the C API for, just to not mess with people's heads
[18:39:06] <wycats_> o11c: confirm
[18:39:07] <o11c> e.g. C++ messed up std::copy
[18:39:19] <o11c> the order of the arguments is backwards from memcpy
[18:39:24] <eddyb> ouch
[18:39:31] <wycats_> o11c: ideally what you're doing is either direct or high-level
[18:39:37] <wycats_> not some weird intermingling of both
[18:39:52] <o11c> I'm not arguing that PHP is not terrible
[18:39:59] <o11c> but please don't compare PHP to Rust
[18:40:15] <wycats_> o11c: what is going on here
[18:40:30] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:40:52] <eddyb> wycats_: a lot of time has been spent on rtio and other parts of std/librustrt, which are all about wrapping the C stuff into neater APIs
[18:41:03] *** Joins: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk)
[18:41:10] <wycats_> eddyb: sorry, I wasn't saying anything to the contrary
[18:41:24] <eddyb> wycats_: I was just clarifying :P
[18:41:38] <wycats_> all I was saying was that I'm sure that at some point in the future, someone will get lazy and make a bad middle-ground wrapper of a C API and I'll pull out that quote :P
[18:41:42] <eddyb> as in, don't worry, it's not something we tread lightly
[18:41:47] <wycats_> :+1:
[18:41:51] <wycats_> I can tell that already :)
[18:41:54] <wycats_> ~<3
[18:42:19] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[18:42:24] <eddyb> wycats_: although... strcat might need that advice, depending on what direction he takes with rust-core
[18:42:30] <wycats_> hehe ;)
[18:42:39] <eddyb> needs moar abstractions
[18:42:55] <wycats_> I'm not paying that much attention to rust-core
[18:43:06] <wycats_> we don't need two similar but not identical copies of a niche language
[18:43:08] * wycats_ ducks
[18:43:16] <eddyb> he's adding all sorts of threading-related things right now
[18:43:31] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[18:43:44] *** Quits: kode-crypt (chatzilla@9BE163B0.70578880.F102451D.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 25.0/20131028113246])
[18:43:49] <eddyb> wycats_: it would be nice if libstd could just be detached from any kind of runtime, but a side effort doesn't hurt
[18:44:02] <wycats_> eddyb: it may hurt
[18:44:07] <wycats_> depends what you mean by "hurt"
[18:44:19] <o11c> what exactly do you need a runtime? I can think of:
[18:44:21] <wycats_> it almost certainly hurts adoption and hurts new users who are trying to understand what is going on
[18:44:23] <o11c> 1. unwinding
[18:44:27] <o11c> 2. allocation
[18:44:27] *** Joins: graydon (graydon@54F68D38.4573EECB.D758B1AA.IP)
[18:44:27] *** ChanServ sets mode: +qo graydon graydon
[18:44:35] *** Parts: graydon (graydon@54F68D38.4573EECB.D758B1AA.IP) ()
[18:44:39] <o11c> and allocation is easy
[18:45:10] <eddyb> o11c: you should include all dependencies on C APIs. IO, threading, etc.
[18:46:10] *** Quits: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu) (Ping timeout)
[18:46:12] <eddyb> wycats_: in the process, he's fixing any problems that show up (like Drop on generic types), and there's a lot of things that can be copy-pasted from libstd - maybe with some extra refactoring
[18:46:55] <wycats_> eddyb: as a new user in with the embedded case, I was unsure if I should use rust or rust-core
[18:47:02] <o11c> well, 3. garbage collection, but that doesn't deserve to be in the language (though latest docs still mention it ...)
[18:47:03] <wycats_> that lack of clarity almost made me not use Rust at all
[18:47:07] <wycats_> this is unambiguously bad
[18:47:41] <brendanc> graydon sighting!
[18:48:00] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[18:49:07] <pcwalton> wycats_: I agree
[18:49:30] <eddyb> wycats_: rust-core has few, if any, users. it's not supposed to provide an alternative. hopefully, the effort put into compartmenting by dependency will be merged into libstd, so you'll be able to link against a statically compiled version of libstd, that's specialized for your usecase
[18:49:36] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[18:49:40] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[18:49:50] <rofrol> can you install this? rustpkg install github.com/steveklabnik/hello
[18:50:05] <rofrol> I got: 
[18:50:14] <eddyb> wycats_: wait, you considered using rust-core? how far from x86/arm linux would be your embedded case?
[18:50:16] <rofrol> task '<unnamed>' failed at 'Unhandled condition: io_error: io::IoError{kind: OtherIoError, desc: "no such file or directory", detail: None}', /root/rust/src/libstd/condition.rs:131
[18:50:33] <sfackler> rofrol: what version are you running?
[18:50:46] <wycats_> eddyb: x86_64
[18:50:59] <wycats_> embedded as in embedded in another process
[18:51:07] <wycats_> not embedded in a low-resource device
[18:51:15] <eddyb> wycats_: aaaahh
[18:51:20] <rofrol> sfackler: master, $ rustc -v
[18:51:22] <rofrol> rustc 0.9-pre (4dded43 2013-11-17 23:41:25 -0800)
[18:51:24] <rofrol> host: x86_64-unknown-linux-gnu
[18:52:05] <sfackler> it may be the tmp dir issue
[18:52:28] <rofrol> nope, $ echo $TMPDIR
[18:52:30] <rofrol> /home/rfrolow/tmp
[18:53:17] <sfackler> dunno then, run with "RUST_LOG=rustpkg" and see if tjc's around?
[18:53:32] <eddyb> wycats_: I'm not sure, but it might still work with libstd
[18:53:46] <pcwalton> it will definitely work with libstd
[18:54:02] <eddyb> wycats_: I mean, only if there's a big problem with normal rust would you consider something as experimental as rust-core
[18:54:16] <pcwalton> the magic of linkers is that parts of lib std you don't use will be removed :)
[18:54:30] <eddyb> rustic uses that because... well, rustic is a kernel :P
[18:54:40] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Quit: anshin)
[18:55:15] <pcwalton> probably even rustic could use libstd
[18:55:18] <wycats_> pcwalton: indeed
[18:55:24] <eddyb> pcwalton: *blink*
[18:55:24] <rofrol> sfackler: http://bpaste.net/show/150875/
[18:55:45] <acrichto> eddyb: the goal is to be able to use libstd everywhere, if there is a limitation that is a bug which is intended to be fixed
[18:55:54] <pcwalton> libstd should have different "profiles"
[18:55:54] <eddyb> pcwalton: but... all the C imports - and the custom entry point
[18:56:07] <eddyb> and libstd is a shared library
[18:56:19] <pcwalton> all of those are bugs
[18:56:23] <acrichto> eddyb: those are bugs in the current implementation, we're not done polishing it off yet
[18:56:52] *** Joins: mark_edward_ (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[18:57:03] <eddyb> pcwalton: oh, yeah, that's my wish as well, but I thought it's not coming that soon
[18:57:10] *** Quits: feduser (feduser@26B214A7.76F0BAA0.650F25DA.IP) (Ping timeout)
[18:57:14] <wycats_> eddyb: acrichto's doing some work on it now
[18:57:17] <acrichto> eddyb: I have a pull request to add static linking right now
[18:57:18] <wycats_> iiuc
[18:57:21] <wycats_> wheee
[18:57:22] <eddyb> acrichto: yupp, I know
[18:57:23] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[18:57:26] <eddyb> hmmm - so is strcat wasting his time?
[18:57:31] <bstrie> acrichto == hero
[18:57:35] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[18:57:44] <pcwalton> rust-core is there because strcat doesn't like M:N threading and wants a library that doesn't offer that option
[18:57:45] <bstrie> eddyb: no, strcat is exploring a design space :)
[18:57:47] <pcwalton> basically
[18:57:53] <eddyb> I mean, he did find problems that need to be fixed, so that's good
[18:57:59] *** Joins: fyolnish (fyolnish@moz-97013BA8.uqwimax.jp)
[18:58:08] <pcwalton> also rust-core exists so that strcat can experiment with faster data structure implementations which is very important
[18:58:27] <bstrie> and if you conflate "exploring a design space" and "wasting time", then rust has managed to waste quite a few years by now :P
[18:58:30] <bstrie> remember classes?!
[18:58:40] *** Quits: tikue (tikue@moz-FEADCD38.hsd1.pa.comcast.net) (Ping timeout)
[18:58:47] *** Joins: valenting (Thunderbir@9A1975C1.39CE2EE.E400A05F.IP)
[18:58:54] <bstrie> and split stacks, and managed pointers, and...
[18:58:56] <eddyb> bstrie: spare me the history lesson :P
[18:59:23] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[18:59:26] <bstrie> and typestate and enforcing that all vectors must be dynamically sized, and...
[18:59:40] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[18:59:45] *** Quits: fyolnish (fyolnish@moz-97013BA8.uqwimax.jp) (Ping timeout)
[19:00:13] <pcwalton> painful memories
[19:00:28] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[19:00:34] <bstrie> pcwalton: but instructive :)
[19:00:34] <pcwalton> the one good thing we got out of it was the ability to say "we tried it" every time someone suggests any of those on the mailing list :)
[19:00:37] *** Joins: feduser (feduser@26B214A7.76F0BAA0.650F25DA.IP)
[19:00:39] <bstrie> exactly
[19:00:46] <pcwalton> maybe we'll write a book
[19:00:49] <pcwalton> or get a movie deal
[19:00:54] <bstrie> I would buy that book
[19:00:59] <bstrie> I would not watch the movie, though
[19:00:59] *** Quits: heftig (heftig@moz-97EC5A2C.dip0.t-ipconnect.de) (Ping timeout)
[19:01:12] *** Quits: feduser (feduser@26B214A7.76F0BAA0.650F25DA.IP) (Quit: Leaving)
[19:01:18] <eddyb> Rusty chains
[19:01:43] <rofrol> Why println(format!("{:?}", os::tmpdir())); gives me this:
[19:01:53] <rofrol> std::path::posix::Path{repr: ~[47u8, 104u8, 111u8, 109u8, 101u8, 47u8, 114u8, 102u8, 114u8, 111u8, 108u8, 111u8, 119u8, 47u8, 116u8, 109u8, 112u8], sepidx: Some(13u)}
[19:01:58] <rofrol> is it correct?
[19:02:04] <erickt> rofrol: yep
[19:02:20] <pcwalton> whoa, path is u8?
[19:02:27] <erickt> rofrol: try println!("{}", os::tmpdir().display())
[19:02:33] <bstrie> rofrol: the :? specifier uses reflection, which gives you all the crud of the underlying representation
[19:02:40] <pcwalton> maybe the default printout for ~[u8] should include an attempt to stringify
[19:02:55] <erickt> pcwalton: well, the inner data of Path is [u8]
[19:03:06] <eddyb> nmatsakis: are you free yet (if you don't mind me asking)?
[19:03:23] <erickt> brson: ping
[19:03:32] *** Quits: refold (gman@moz-42D68426.a258.priv.bahnhof.se) (Quit: leaving)
[19:03:42] <nmatsakis> eddyb: not yet, soon
[19:04:18] <pcwalton> I always envisioned :? as "just print something out for debugging"
[19:04:40] <nmatsakis> eddyb: ok now I am -- can you give me a bit of background, sorry, just saw some random rusti requetss
[19:04:52] <rofrol> erickt: Doesn't work: error: borrowed value does not live long enough
[19:05:00] <FreeFull> :? is like the old fmt's printing
[19:05:16] <erickt> rofrol: try `let x = os::tmpdir(); println!("{}", x.display())` :)
[19:05:25] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[19:05:42] <eddyb> rusti: struct Foo<'self>(&'self int); impl<'self> Add<Foo<'self>, Foo<'self>> for Foo<'self> {fn add(&self, other: &'self Foo<'self>) -> Foo<'self> {*self}}
[19:05:43] -rusti- pastebinned 8 lines of output: http://sprunge.us/hBST
[19:06:07] <rofrol> erickt: thanks
[19:06:09] <eddyb> nmatsakis: I have a structure generic over a lifetime, and I want to implement Add for it
[19:06:41] *** Joins: heftig (heftig@moz-4353C6FC.dip0.t-ipconnect.de)
[19:08:11] <nmatsakis> eddyb: ok... I think you need:
[19:08:17] <nmatsakis> eddyb: struct Foo<'self>(&'self int); impl<'self> Add<Foo<'self>, Foo<'self>> for Foo<'self> {fn add(&self, other: &'self  Foo<'self>) -> Foo<'self> {*self}}
[19:08:21] <nmatsakis> oops
[19:08:22] *** Joins: fyolnish (fyolnish@moz-97013BA8.uqwimax.jp)
[19:08:30] <nmatsakis> rusti: struct Foo<'self>(&'self int); impl<'self> Add<Foo<'self>, Foo<'self>> for Foo<'self> {fn add(&self, other: &Foo<'self>) -> Foo<'self> {*self}}
[19:08:31] -rusti- pastebinned 4 lines of output: http://sprunge.us/eYcT
[19:08:38] <nmatsakis> eddyb: that compiles ^^
[19:08:46] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[19:08:52] <nmatsakis> eddyb: change was from `other: &'self Foo<'self>` to `other: &Foo<'self>`
[19:09:01] *** Quits: reyre (reyre@moz-22F2351B.core.archive.org) (Client exited)
[19:09:03] <eddyb> nmatsakis: oh, heh, I was adding too much :P
[19:09:04] <nmatsakis> eddyb: in particular, the `Add` trait does not guarantee you that the reference `other` will have any particular lifetime
[19:09:06] <eddyb> nmatsakis: thanks a lot
[19:09:26] *** Joins: reyre (reyre@moz-22F2351B.core.archive.org)
[19:10:03] *** Quits: fyolnish (fyolnish@moz-97013BA8.uqwimax.jp) (Ping timeout)
[19:10:11] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Quit: Computer has gone to sleep.)
[19:10:35] *** Joins: jordyd (jordyd@moz-8DC1639B.seg53.ucf.edu)
[19:11:03] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[19:11:19] *** Quits: reyre (reyre@moz-22F2351B.core.archive.org) (Ping timeout)
[19:12:33] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[19:14:05] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[19:14:34] *** Quits: andre (andre@CA528A4A.45A4338E.8EE27E6.IP) (Quit: leaving)
[19:16:50] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[19:18:08] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[19:19:30] <eddyb> nmatsakis: the code inside fails :(
[19:19:49] <eddyb> nmatsakis: it kinda needs &'self Foo<'self> for the RHS
[19:20:08] *** Quits: Sorella (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Ping timeout)
[19:20:47] *** Quits: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) (Ping timeout)
[19:20:49] *** Joins: ktt3ja (Mibbit@4697C697.B9AD9095.DDE5D3F6.IP)
[19:21:05] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[19:21:40] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[19:21:43] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[19:22:10] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[19:22:27] *** Quits: josh (josh@moz-6FB23C25.hvc.res.rr.com) (Quit: josh)
[19:22:47] *** Quits: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca) (Ping timeout)
[19:23:11] *** Joins: Savago (Savago@2F1448E.68394D8.18DDB669.IP)
[19:23:53] <eddyb> hey, another SIGSEGV for too many errors
[19:24:24] *** Joins: Sorella (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[19:24:45] *** Joins: geoffhill (geoffhill@moz-738DC0DB.org)
[19:25:35] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[19:25:50] *** jorendorff_away is now known as jorendorff
[19:26:23] <eddyb> oh, I needed &'self self. oh dear
[19:26:52] <nmatsakis> eddyb: what is the code? 
[19:26:53] *** Quits: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca) (Quit: canhtak)
[19:27:22] <nmatsakis> eddyb: it... just can't have &'self self. so it shouldn't need it :).
[19:27:24] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[19:27:46] <brson> erickt: pong
[19:27:54] *** Joins: reyre (reyre@moz-22F2351B.core.archive.org)
[19:28:25] *** Joins: lfox (lfox@moz-861E573F.nyc.biz.rr.com)
[19:28:47] <eddyb> nmatsakis: I'm removing errors with &'self self already
[19:28:47] *** Joins: huseby (huseby@moz-3ECBAB41.dfri.se)
[19:29:04] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[19:29:17] <erickt> brson: good morning! I just wanted to check in regarding the meetup on wed. We have 18 people on the waiting list, do you think we should raise our limit again? Or shall we just keep it at 50
[19:30:08] *** Joins: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca)
[19:30:16] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[19:30:54] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[19:31:32] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Quit: Leaving)
[19:31:48] <eddyb> nmatsakis: https://gist.github.com/eddyb/7ee6cad98bb5875e5e2b#file-arch-8051-rs-L317-L335 I guess....
[19:32:34] <brson> erickt: I don't feel comfortable raising the limit again after telling the event coordinator I would stick with 50. Maybe we can renegotiate for the next one.
[19:32:36] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[19:32:51] <erickt> brson: no problem! there's a good chance we'll have some dropouts
[19:32:54] *** Joins: josh (josh@moz-6FB23C25.hvc.res.rr.com)
[19:33:22] <brson> erickt: we're going to be having indian buffet for dinner fyi
[19:33:27] <erickt> brson: and if I recall correctly, the visitors won't need picture id.
[19:33:29] <erickt> tasty!
[19:33:55] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[19:34:10] <brson> afaik they don't need picture id
[19:34:18] *** Joins: mark_edward__ (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[19:34:18] *** Quits: josh (josh@moz-6FB23C25.hvc.res.rr.com) (Quit: josh)
[19:34:27] *** Joins: g3orge (g3orge@moz-369F78A7.access.hol.gr)
[19:34:54] <eddyb> nmatsakis: I think every method returning Expr<'self> needs to have &'self self. I guess I can have each method parametrized on some 'a lifetime. I'm not sure :/
[19:35:00] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[19:35:09] *** Quits: mark_edward_ (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Client exited)
[19:35:10] *** Quits: mark_edward__ (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Connection reset by peer)
[19:35:16] <erickt> brson: and finally, will the external lightning speakers be able to plug in a laptop into the projector? Or do they need to get a presentation/code to one of the mozilla folks in order to present?
[19:35:42] *** Quits: Sorella (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Ping timeout)
[19:35:57] *** Joins: mark_edward_ (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[19:35:59] <nmatsakis> eddyb: any method that plans to capture the self and store it somewhere will need &'self self, yes
[19:36:06] <nmatsakis> eddyb: well, not necessarily,
[19:36:08] *** Joins: mark_edward__ (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[19:36:14] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[19:36:14] <nmatsakis> eddyb: they could be: fn to_u1<'a>(&'a self) -> Expr,'a>
[19:36:23] <eddyb> nmatsakis: that's what I mean
[19:36:25] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[19:36:45] *** Quits: mark_edward__ (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Client exited)
[19:36:47] <nmatsakis> eddyb: that should work ok, and I think it would also type check as part of the +
[19:36:52] <eddyb> but this is impl<'self> Expr<'self> - so I'm not sure how it would make sense with another lifetime per function
[19:37:24] *** Joins: Sorella (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[19:37:35] <eddyb> rusti: struct Foo<'self>(&'self int); impl<'self> Add<Foo<'self>, Foo<'self>> for Foo<'self> {fn add<'a>(&'a self, other: &'a Foo<'self>) -> Foo<'self> {*self}}
[19:37:37] -rusti- pastebinned 6 lines of output: http://sprunge.us/iALQ
[19:37:48] *** Quits: huseby (huseby@moz-3ECBAB41.dfri.se) (Ping timeout)
[19:37:49] <eddyb> rusti: struct Foo<'self>(&'self int); impl<'self> Add<Foo<'self>, Foo<'self>> for Foo<'self> {fn add<'a>(&'a self, other: &'a Foo<'self>) -> Foo<'a> {*self}}
[19:37:50] -rusti- pastebinned 6 lines of output: http://sprunge.us/LVPB
[19:37:55] <nmatsakis> eddyb: why are oyu putting 'a on Add? you can't do that
[19:37:59] *** Joins: mark_edward__ (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[19:38:05] <eddyb> nmatsakis: where do I put it?
[19:38:06] <nmatsakis> eddyb: that signature is derived from the Add trait
[19:38:12] <nmatsakis> eddyb: you can't alter it
[19:38:14] <eddyb> I'm not sure what to do :/
[19:38:29] <nmatsakis> eddyb: I am confused, are you actually have a problem?
[19:38:33] <nmatsakis> *having
[19:38:34] *** Quits: mark_edward__ (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Client exited)
[19:38:34] *** Quits: mark_edward_ (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Client exited)
[19:38:36] <nmatsakis> and if so, what exactly is it?
[19:38:46] *** Joins: mark_edward_ (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[19:38:56] <nmatsakis> eddyb: hold on, I can sketch out what I think should work :)
[19:39:03] <eddyb> nmatsakis: I need &'self self because I return Foo<'self>, basically
[19:39:32] <eddyb> and I think &'self Foo<'self> for the RHS
[19:39:59] <eddyb> nmatsakis: but I'm not even sure what exactly I'm parametrizing at this point
[19:40:32] <TeXitoi> I have a shootout-pidigits.hs updated tu use safe code and extra::bigint::BigInt, but do we want to keep a gmp version? 
[19:41:14] *** Quits: reyre (reyre@moz-22F2351B.core.archive.org) (Client exited)
[19:41:42] *** Joins: reyre (reyre@moz-22F2351B.core.archive.org)
[19:43:28] *** Quits: reyre (reyre@moz-22F2351B.core.archive.org) (Ping timeout)
[19:43:41] *** Parts: nif (Mibbit@moz-B6DFA19D.wireless.oberlin.edu) ()
[19:46:25] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Quit: Computer has gone to sleep.)
[19:47:44] *** Joins: mikezaby (mikezaby@moz-AA896205.home.otenet.gr)
[19:48:06] *** Joins: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu)
[19:48:34] <nmatsakis> eddyb: ok, I read your code example a bit more -- first question to answer is what each lifetime represents
[19:48:48] <nmatsakis> eddyb: the 'self lifetime (which, if I were you, I would rename, unless you're stuck on an old rust for some reason)
[19:49:01] <nmatsakis> eddyb: basically represents the lifetime of the subexpressions
[19:49:24] <eddyb> the borrowed pointers in Expr, sure
[19:49:26] <nmatsakis> eddyb: is there a particular reason you're using borrowed expressions here as opposed to, say, @T?
[19:49:35] <eddyb> nmatsakis: efficiency
[19:49:44] <nmatsakis> eddyb: ok, so then you have to ask yourself: how will I allocate memory?
[19:49:52] <nmatsakis> eddyb: in general, borrowed pointers work best,
[19:50:02] <nmatsakis> when they are being passed downward,
[19:50:15] <nmatsakis> eddyb: or of course if you are returning back some subportion of data that was already borrowed by an outer stack frame
[19:50:24] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[19:50:31] <nmatsakis> eddyb: in this case you are doing neither -- you are allocating fresh values that you need to embed -- so I tihnk you need an arena
[19:50:40] <eddyb> and expression is created on the stack, and then a method is called with a reference to that expression
[19:50:51] <eddyb> nmatsakis: look in Disasm::dis
[19:50:54] <nmatsakis> eddyb: but that is not what happens in your code
[19:50:57] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[19:51:07] <nmatsakis> eddyb: e.g., your implementation of add seems to create new nodes
[19:51:42] <nmatsakis> I could be wrong though
[19:51:51] <eddyb> nmatsakis: nah, it reuses references in one case, and in the others it returns a constant value
[19:52:05] *** Quits: g3orge (g3orge@moz-369F78A7.access.hol.gr) (Quit: leaving)
[19:52:51] <nmatsakis> eddyb: ah, I see how I was confused, ok, so I tihnk you need:
[19:53:02] *** Joins: brson_ (brson@6A848D32.C1B840DD.76F66111.IP)
[19:53:08] <nmatsakis> eddyb: impl<'self> Add<&'self Expr<'self>, Expr<'self>> for Expr<'self>
[19:53:25] <nmatsakis> eddyb: note that the RHS is not an Expr<'self> but an &'self Expr<'self>,
[19:53:39] <nmatsakis> oh, wait, more accurately:
[19:53:42] <eddyb> wouldn't auto-borrow screw that?
[19:53:55] <nmatsakis> impl<'self> Add<&'self Expr<'self>, Expr<'self>> for &'self Expr<'self>
[19:53:59] <nmatsakis> eddyb: "screw"?
[19:54:02] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[19:54:19] <nmatsakis> eddyb: you'll end up with a double indirection, if that's whta you mean
[19:54:27] <eddyb> nmatsakis: can I still do I32Const(1) + I32Const(2)?
[19:54:36] <eddyb> and get I32Const(3)
[19:54:40] <nmatsakis> no
[19:54:58] <nmatsakis> &I32Const(1) + &I32Const(2) might work
[19:55:08] <eddyb> this is all auto-generated, but I don't want to make it very nasty :/
[19:55:10] <nmatsakis> should work but the oper overloading code is a bit crufty
[19:55:31] <eddyb> nmatsakis: maybe I should just call my own functions
[19:55:43] <eddyb> I need to do that for eq and lt anyway because the defaults return bool :(
[19:55:46] <nmatsakis> eddyb: yes, I'd suggest that
[19:56:04] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[19:56:06] <nmatsakis> then you can write the signatures any way you like
[19:56:12] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[19:56:34] <eddyb> so it will look like the JS version. *sigh*
[19:56:43] *** Quits: brson_ (brson@6A848D32.C1B840DD.76F66111.IP) (Quit: leaving)
[19:56:47] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[19:56:47] *** Joins: brson (brson@6A848D32.C1B840DD.76F66111.IP)
[19:56:47] *** ChanServ sets mode: +ao brson brson
[19:56:48] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[19:57:20] <eddyb> nmatsakis: thanks, I'll have to keep an eye on things and replace this at some point with operators, if they get fixed
[19:57:28] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[19:57:29] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Max SendQ exceeded)
[19:57:46] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[19:57:53] <eddyb> oh, one more thing. could == and < ever return anything other than bool?
[19:57:54] *** Joins: lenstr (lenstr@2A2A2196.9DA5669E.3F2079FA.IP)
[19:58:01] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[19:58:16] <nmatsakis> eddyb: Not that way we've written the traits.
[19:58:45] *** Joins: fyolnish (fyolnish@moz-850A2335.uqwimax.jp)
[19:58:46] <eddyb> I mean, not atm, but some time in the future
[19:58:50] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:59:08] <eddyb> with generic defaults, Ret=bool would even allow backwards compat
[19:59:11] *** Quits: Kruppe (user@moz-253119B0.esg.uwaterloo.ca) (Ping timeout)
[19:59:20] <nmatsakis> eddyb: in principle sure, but we've rather intentionally kept the traits limited so that the only really work for things that resemble the original purpose of the operators...
[19:59:25] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Ping timeout)
[19:59:58] <eddyb> #[feature(i_want_to_have_a_dsl_kthxbai)]
[20:00:05] <nmatsakis> macro_rules!
[20:00:06] <nmatsakis> :)
[20:00:23] *** Quits: Diamond (dick@moz-80556682.ks.ks.cox.net) (Ping timeout)
[20:00:26] * nmatsakis shrugs
[20:00:28] *** Quits: fyolnish (fyolnish@moz-850A2335.uqwimax.jp) (Ping timeout)
[20:00:52] *** Quits: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca) (Quit: canhtak)
[20:01:36] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[20:01:47] *** Joins: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca)
[20:02:59] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[20:03:21] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[20:03:47] *** Quits: pseudoku (quassel@C535CCE5.9C102D3A.520CDC98.IP) (Client exited)
[20:04:23] *** Quits: Janko (chatzilla@D9AEFC3E.9E37BD61.9C3D12F2.IP) (Ping timeout)
[20:05:05] *** Joins: eholk (eholk@DA11905E.FC9BEE08.51B6877.IP)
[20:06:02] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[20:06:23] *** Joins: reyre (reyre@moz-22F2351B.core.archive.org)
[20:07:44] *** Quits: ktt3ja (Mibbit@4697C697.B9AD9095.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:07:44] *** Joins: mr_evil (Mibbit@moz-B04DB3BB.hsd1.or.comcast.net)
[20:08:09] *** Parts: mr_evil (Mibbit@moz-B04DB3BB.hsd1.or.comcast.net) ()
[20:08:18] *** Quits: reyre (reyre@moz-22F2351B.core.archive.org) (Client exited)
[20:08:29] <nmatsakis> sometimes I wish we just created arenas behind the scenes as needed, like parasail. might be nifty.
[20:08:45] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[20:08:59] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[20:09:07] <nmatsakis> so you could write code like: fn foo() -> &int { &3 } and have that allocate memory in some parent "stack frame"
[20:09:15] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[20:09:32] <kimundi> And the arena would live on the stack?
[20:11:02] *** Quits: eholk (eholk@DA11905E.FC9BEE08.51B6877.IP) (Ping timeout)
[20:11:09] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[20:12:20] <nmatsakis> yes, we'd implicitly create and destroy arenas needed
[20:12:39] <nmatsakis> it wouldn't really *live* on the stack, I mean the memory would be alloc'd from the heap -- or at least it would after exceeding a certain number of allocated btes
[20:12:45] <nmatsakis> but it'd be scoped by the stack
[20:12:55] <nmatsakis> it's certainly plausible, would be backwards compat
[20:12:57] <nmatsakis> or could be anyway
[20:13:11] <kimundi> Seems pretty magical :P
[20:13:22] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[20:13:54] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[20:15:16] <nmatsakis> yeah
[20:15:35] <nmatsakis> somewhat :)
[20:17:55] *** Joins: Janko (chatzilla@D9AEFC3E.9E37BD61.9C3D12F2.IP)
[20:23:12] *** Joins: sebcrozet (sebcrozet@moz-C27D92D8.w193-252.abo.wanadoo.fr)
[20:25:54] <Savago> I have one question about array of strings and copying. Is this the 'best' way of making a copy of an element from an array? https://gist.github.com/Adenilson/7534694
[20:26:09] *** Quits: cyndis (cyndis@moz-C4357EA7.kapsi.fi) (Quit: leaving)
[20:26:09] <Savago> I honestly hope that there is a better away… :-)
[20:26:46] <eddyb> nmatsakis: someone suggested enum SendExpr {OwnedExpr(~Expr), BorrowedExpr(&Expr)}, I might do that if I need it
[20:28:02] <kimundi> Savago: Well, instead of to_str you can also use clone(), or not use a slice so that you can move the value out of it
[20:28:53] <kimundi> rusti: let v = [1,2,3]; v[1].clone()
[20:28:56] -rusti- pastebinned 35 lines of output: http://sprunge.us/UHif
[20:29:18] *** Joins: cyndis (cyndis@moz-C4357EA7.kapsi.fi)
[20:29:21] <kimundi> rusti: let v = [~1u,~2,~3]; v[1].clone()
[20:29:23] <eddyb> nmatsakis: right now I don't need to store anything more than constants :D
[20:29:25] <Savago> kimundi: let copy = bleh[0].clone(); is not much of an improvement.
[20:29:36] -rusti- ~2u
[20:29:58] <Savago> And I can't move the value out of it.
[20:30:08] <Savago> (because it is used later in the code).
[20:30:13] <kimundi> Savago: Well, you need to give it a index, and you need to copy the value, so it doesn't really get shorter than that for this use case
[20:30:32] <Savago> Man… really? I mean, even C++ std::string can do better.
[20:30:43] <kimundi> Define 'better' :P
[20:30:47] *** pmoore is now known as pmoore|away
[20:30:52] <Savago> obj a = b;
[20:31:04] <Savago> 'better' in the way that is less verbose.
[20:31:11] <Savago> e.g. obj a = b.method();
[20:31:24] <eddyb> nmatsakis: oh, damn, I have to do the borrowing myself - i.e. a.add(&b)
[20:31:42] <kimundi> Also 'better' in the way that I personally, never having used C++, have no idea it that does copy, slice, or just give you a potentially unsafe pointer :P
[20:32:14] <eevee> i am pretty opposed to implicit maybe-copying that depends entirely on the type
[20:32:22] <Savago> kimundi: otherwise it is almost like in C (e.g. char *ptr = strdup(data);)
[20:32:32] *** Quits: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[20:32:35] *** Joins: aknewhope (aknewhope@42BB385E.AC5E5275.FC657F4C.IP)
[20:32:55] <Savago> In the sense that the 'clone()' or 'to_str()' call is way too much verbose for simply copying a string from one place
[20:32:56] <Savago> to another.
[20:33:23] <kimundi> Well, rusts phylosophy is to make any potentially expensive copy explicit
[20:33:43] <kimundi> philosophy*
[20:34:03] <Savago> Errr… ok.
[20:35:49] *** Quits: aknewhope (aknewhope@42BB385E.AC5E5275.FC657F4C.IP) (Quit: See you later :))
[20:36:08] *** Joins: aknewhope (aknewhope@42BB385E.AC5E5275.FC657F4C.IP)
[20:36:36] <nmatsakis> eddyb: tbh I'd suggest you use an arena. see e.g. https://github.com/mozilla/rust/blob/master/src/librustc/middle/typeck/variance.rs 
[20:36:52] *** Quits: moostik (Icedove@moz-63ED7231.w82-121.abo.wanadoo.fr) (Ping timeout)
[20:36:57] <nmatsakis> eddyb: then you can basically just have "type Expr<'a> = &'a ExprDef<'a>" and anybody can allocate at any point
[20:37:18] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[20:37:30] <nmatsakis> eddyb: https://github.com/mozilla/rust/blob/master/src/librustc/middle/typeck/variance.rs#L229
[20:37:41] *** Joins: moostik (Icedove@moz-63ED7231.w82-121.abo.wanadoo.fr)
[20:37:56] <nmatsakis> (VarianceTerm is a simple SAT)
[20:37:58] <nmatsakis> *AST
[20:38:39] *** Quits: mark_edward_ (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Client exited)
[20:38:52] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[20:38:55] *** Joins: happy4crazy (happy4craz@87D98E32.4046EB22.428F94DD.IP)
[20:39:31] *** Quits: happy4crazy (happy4craz@87D98E32.4046EB22.428F94DD.IP) (Client exited)
[20:39:33] *** Joins: happy4crazy (happy4craz@87D98E32.4046EB22.428F94DD.IP)
[20:40:00] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[20:41:34] <eddyb> nmatsakis: hmm, that might work, but the general case, I don't need anything more than stack locals - constants, to be precise
[20:42:36] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:42:39] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[20:42:43] <eddyb> I guess I could just return Unknown(self.get_type(), None) in all the tree-creating conditions
[20:44:07] <nmatsakis> eddyb: well I don't know any reason you can't make it work without an arena, are you having a problem now? or is it just that you have to insert manual borrows?
[20:44:35] <eddyb> nmatsakis: I just have to rewrite all of this
[20:44:43] <eddyb> and there's one case I'm not sure I'm doing right
[20:45:24] *** Quits: aknewhope (aknewhope@42BB385E.AC5E5275.FC657F4C.IP) (Quit: See you later :))
[20:46:15] *** Joins: huseby (huseby@moz-A22BFFCA.tuxli.ch)
[20:47:21] *** Joins: mark_edward_ (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[20:50:45] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[20:50:47] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[20:51:15] *** Quits: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca) (Quit: canhtak)
[20:52:44] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[20:55:11] <eddyb> nmatsakis: is there auto-borrow for the argument? I don't get any errors >_> - oh nvm, that code isn't analyzed :">
[20:56:16] <nmatsakis> eddyb: we do "autoborrow" from one pointer type to another, but we don't autoref -- that is, no T to &T
[20:56:39] *** pmoore|away is now known as pmoore
[20:56:56] <nmatsakis> eddyb: this is prob going to change, either by removing autoborrow or by adding autoref, per wycats_ bug that I can't remember the issue# of
[20:57:50] <nmatsakis> eddyb: https://github.com/mozilla/rust/issues/10504
[21:00:47] <wycats_> <3
[21:01:16] <wycats_> I will be so happy if auto-demotion happens across the board
[21:03:08] <eddyb> nmatsakis: woo, it actually analyzes the code in Disasm::dis now :D https://gist.github.com/eddyb/7ee6cad98bb5875e5e2b
[21:03:16] *** Quits: decoder (quassel@moz-D7023D7D.own-hero.net) (Quit: No Ping reply in 180 seconds.)
[21:03:21] <eddyb> there's a lot of errors, will leave for tomorrow. good night!
[21:03:33] *** Joins: decoder (quassel@moz-D7023D7D.own-hero.net)
[21:03:47] *** Joins: mard_edward_ (mark@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[21:03:53] *** Quits: mark_edward_ (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Client exited)
[21:04:17] *** Quits: mard_edward_ (mark@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Quit: Leaving)
[21:04:36] *** Joins: mard_edward_ (mark@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[21:05:16] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[21:05:57] *** Joins: eddyb9 (eddy@336E3A7F.D51DAF03.FB866788.IP)
[21:06:44] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Quit: Textual IRC Client: www.textualapp.com)
[21:06:54] *** Joins: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca)
[21:06:58] *** Quits: mard_edward_ (mark@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Quit: Leaving)
[21:07:03] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[21:07:22] <nmatsakis> eddyb9: cool
[21:08:31] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[21:09:33] *** Joins: fyolnish (fyolnish@moz-DAC5FCD.uqwimax.jp)
[21:10:06] <bblum> hmm
[21:10:23] <bblum> i understand that closures in C++ have user-customizable capture modes
[21:10:24] <bblum> http://www.cprogramming.com/c++11/c++11-lambda-closures.html
[21:10:36] <bblum> [&] means capture by reference; [=] means capture by value
[21:11:08] <bblum> "[=, &foo] Capture any referenced variable by making a copy, but capture variable foo by reference"
[21:11:16] *** Quits: fyolnish (fyolnish@moz-DAC5FCD.uqwimax.jp) (Ping timeout)
[21:11:17] <bblum> etc
[21:11:25] <eddyb9> nmatsakis: if my assumption that I can use the stack as a "staging ground" doesn't hold, I'll have to use an arena or whatever
[21:13:12] <Amaranth> bblum: As a simplification I could see doing just [], [&], and [=] although being able to mix and match is certainly nice
[21:13:36] <bblum> Amaranth: those are also valid :P
[21:14:07] *** Joins: nejucomo (Adium@9F0867A2.BB950596.DFB232DA.IP)
[21:14:20] <Amaranth> bblum: In C++, yes. I assumed you brought it up as a reference for how Rust should handle this
[21:14:46] <bblum> i doubt it's not too late to affect how rust is going to do it
[21:15:14] <bblum> but the C++ method is very similar to the closure reform idea i put forward
[21:15:55] <wycats_> bblum: too many negatives
[21:17:04] *** Quits: mark_edward (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Input/output error)
[21:18:07] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[21:23:29] *** Quits: KindOne (KindOne@moz-C30E2214.dynamic.ip.windstream.net) (Ping timeout)
[21:24:12] *** Joins: nejucomo1 (Adium@moz-B62B9944.public.monkeybrains.net)
[21:24:19] *** Quits: nejucomo (Adium@9F0867A2.BB950596.DFB232DA.IP) (Ping timeout)
[21:24:46] *** Joins: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com)
[21:24:52] *** Joins: nejucomo (Adium@9F0867A2.BB950596.DFB232DA.IP)
[21:25:52] *** Quits: nejucomo1 (Adium@moz-B62B9944.public.monkeybrains.net) (Ping timeout)
[21:26:05] *** Quits: Jackneill (Jackneill@moz-3D9A0A2C.pool.digikabel.hu) (Input/output error)
[21:26:38] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[21:26:38] *** ChanServ sets mode: +ao pcwalton pcwalton
[21:27:05] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[21:27:23] *** Joins: mark_edward (mark@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[21:27:27] *** Joins: KindOne (KindOne@moz-1585F79.dynamic.ip.windstream.net)
[21:27:38] <kimundi> nmatsakis: The fact that "impl<'a> StringPrefixMatch for <'b> 'a |&'b str| -> Option<&'b str>" compiles scares and confuses me :) I guess right now is a bad time to write fancy code with function types :P
[21:27:49] <eddyb9> I get 4 lines just from someone like pcwalton joining and leaving :(
[21:28:35] <TeXitoi> pidigits resurected: https://github.com/mozilla/rust/pull/10555
[21:29:44] <nmatsakis> kimundi: that is indeed ... interesting, though I guess the |&'b str|:'a -> Option<&'b str> isn't much better. I suggest using a type alias for the time being :)
[21:29:52] *** Joins: reyre (reyre@moz-22F2351B.core.archive.org)
[21:30:40] <kimundi> nmatsakis: Eh, I don't even care about how it looks, I just have no idea right now what is supposed to go where because we'Re halfway through with closure reform :P
[21:31:09] *** Quits: reyre (reyre@moz-22F2351B.core.archive.org) (Client exited)
[21:31:34] *** Joins: reyre (reyre@moz-22F2351B.core.archive.org)
[21:31:36] <kimundi> Like, extern fn() and fn() are synonym, but &extern fn() and &fn() are not for example :P
[21:31:58] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[21:32:13] *** Quits: mark_edward (mark@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Quit: Leaving)
[21:32:23] *** Joins: mark_edward (mark@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[21:33:11] *** Quits: sebcrozet (sebcrozet@moz-C27D92D8.w193-252.abo.wanadoo.fr) (Ping timeout)
[21:33:25] *** Quits: reyre (reyre@moz-22F2351B.core.archive.org) (Ping timeout)
[21:33:42] *** Quits: freezerburnv (freezerbur@moz-F0DFB280.hfc.comcastbusiness.net) (Quit: freezerburnv)
[21:35:19] *** Quits: rossm (rossm@moz-EE3BB1DC.br.br.cox.net) (Quit: )
[21:36:22] *** Quits: mark_edward (mark@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Quit: Leaving)
[21:36:33] *** Joins: mark_edward (mark@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[21:38:36] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[21:39:00] *** Joins: sebcrozet (sebcrozet@moz-2517AE39.w80-13.abo.wanadoo.fr)
[21:39:15] *** Joins: busylizzy (lisa@270089DC.4EF5D73F.4E00FFE9.IP)
[21:39:59] *** Quits: isaacd (me@moz-6902374D.dhcp.oxfr.ma.charter.com) (Ping timeout)
[21:40:36] *** Joins: isaacd (me@moz-6902374D.dhcp.oxfr.ma.charter.com)
[21:41:00] <eddyb9> whoever is responsible for using 'tau' in the tutorial for the area of a circle:
[21:41:07] <eddyb9> we have an update - http://xkcd.com/1292/
[21:42:07] *** Joins: rossm (rossm@moz-EE3BB1DC.br.br.cox.net)
[21:42:38] <o11c> I never really thought about it until I read the tutorial, but I have to agree about tau being better from what I've seen
[21:42:57] *** Quits: meTaAU (admin@moz-994484A3.lns20.per1.internode.on.net) (Ping timeout)
[21:43:13] <o11c> it should be 0.5τ, 0.75τ, and τ though
[21:43:17] *** Quits: busylizzy (lisa@270089DC.4EF5D73F.4E00FFE9.IP) (Input/output error)
[21:43:21] *** Joins: busylizzy (lisa@270089DC.4EF5D73F.4E00FFE9.IP)
[21:43:24] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[21:43:26] *** Joins: meTaAU (admin@moz-F4CD4750.lns20.per1.internode.on.net)
[21:43:40] *** Joins: tikue (tkuehn@CDCD6B77.F3E8A984.689607DE.IP)
[21:44:12] <Jesse> where does our tutorial use tau?
[21:45:17] *** Quits: japaric (japaric@71DF7B1A.51A03578.CBF5D49D.IP) (Ping timeout)
[21:45:55] *** Quits: alonlevy (alon@moz-61A0AD83.red.bezeqint.net) (Ping timeout)
[21:46:06] <o11c> http://static.rust-lang.org/doc/0.8/tutorial-borrowed-ptr.html
[21:47:09] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[21:47:28] *** Joins: nejucomo1 (Adium@moz-B62B9944.public.monkeybrains.net)
[21:47:50] *** Quits: nejucomo (Adium@9F0867A2.BB950596.DFB232DA.IP) (Ping timeout)
[21:47:51] <Jesse> hahaha
[21:47:53] <Jesse> that's great
[21:47:56] *** Joins: nejucomo (Adium@9F0867A2.BB950596.DFB232DA.IP)
[21:49:08] *** Quits: nejucomo1 (Adium@moz-B62B9944.public.monkeybrains.net) (Ping timeout)
[21:52:36] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Ping timeout)
[21:53:46] *** Joins: toto (yaaic@moz-B234C23B.rev.numericable.fr)
[21:55:42] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[21:56:02] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[21:56:40] *** Quits: Ms2ger (Ms2ger@92EF86A7.A020F168.187A1082.IP) (Quit: nn)
[21:57:11] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[21:58:34] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[21:58:40] <kimundi> Given a char like ';' and a string like "foo;bar;baz", how would you call a operation that gives you "foo", "bar", "baz", and how one that gives you "foo", ";bar", ";baz" ? The first one the std lib calls split, but I'm trying to think of a term for one that does not throw away the splittet-on char
[21:58:47] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Connection reset by peer)
[22:00:02] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[22:00:02] *** ChanServ sets mode: +ao dherman dherman
[22:00:06] *** Joins: fyolnish (fyolnish@moz-FECA711C.uqwimax.jp)
[22:00:59] <tikue> kimundi: split returns an iterator right?
[22:01:18] <kimundi> yeah
[22:01:43] <rossm> I'm not aware of a common name for such a function
[22:01:50] <tikue> kimundi: I'm not sure there needs to be a function for the latter since it's just split().map()
[22:01:52] *** Quits: fyolnish (fyolnish@moz-FECA711C.uqwimax.jp) (Ping timeout)
[22:02:10] <kimundi> tikue: Not really
[22:02:16] <tikue> rusti: "1" + "2"
[22:02:16] -rusti- ~"12"
[22:02:27] <tikue> kimundi: well yeah it'd allocate
[22:02:34] <kimundi> tikue: I want to keep a slice into the original string
[22:02:49] <tikue> ah
[22:03:07] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[22:03:09] <tikue> kimundi: window?
[22:03:31] <kimundi> tikue: That's something different
[22:03:43] <tikue> kimundi: for str?
[22:03:49] <kimundi> Yes
[22:03:59] <tikue> what's it do
[22:04:05] *** Joins: skeet70 (skeet70@23022202.C24BC101.B6E96A0D.IP)
[22:04:07] <kimundi> That is, string does not currently have a WindowIterator, but if it had it would work differently :P
[22:04:23] <tikue> i disagree
[22:04:23] *** Quits: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:04:32] *** Joins: nejucomo1 (Adium@moz-B62B9944.public.monkeybrains.net)
[22:04:40] <kimundi> "abcdef".window_iter(2) -> "ab" "bc" "cd" "de" "ef"
[22:04:55] *** Quits: nejucomo (Adium@9F0867A2.BB950596.DFB232DA.IP) (Ping timeout)
[22:05:01] *** Joins: nejucomo (Adium@9F0867A2.BB950596.DFB232DA.IP)
[22:05:05] <tikue> that's going to be useful never
[22:05:05] <tikue> :)
[22:05:20] <kimundi> Tell that to the guy who needed it yesterday here...
[22:05:21] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[22:05:31] <tikue> kimundi: you can just do string.iter().window
[22:05:33] <tikue> can't you?
[22:05:54] <rossm> kimundi I have an extension method I use in C# that does that exact thing. I called it sliding pairs
[22:05:55] <kimundi> If we had a generic WIndow iterator
[22:06:00] <kimundi> Which we don't
[22:06:02] <tikue> maybe we should
[22:06:07] <rossm> I use it for getting the intervals between datetimes in a list, for example
[22:06:11] <kimundi> We can't
[22:06:13] *** Quits: nejucomo1 (Adium@moz-B62B9944.public.monkeybrains.net) (Ping timeout)
[22:06:15] <tikue> why?
[22:06:17] <kimundi> need integer in the typesystem
[22:06:34] <kimundi> Needs to be a Iterator<[T, ..N]>
[22:07:09] <kimundi> &[T] would not work because no palce to stick a lifetime, and ~[T] would be to imperformant
[22:07:35] <kimundi> Also, a fiexed size vector of chars would still not be the same as a string slice :P
[22:07:35] <dbaupp> kimundi: integers in the type system would only work if the window size is known at compile time (which I guess is the common case anyway)
[22:07:42] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[22:07:45] <kimundi> dbaupp: Well, yeah
[22:07:47] <ofeldt> kimundi, how about: split_before("foo;bar;batz", ";") -> "foo", ";bar", ";batz" and split_after("foo;bar;batz", ";") -> "foo;", "bar;", "batz"
[22:07:50] <tikue> i don't understand
[22:08:01] <tikue> window_iter() returns WindowIter<'self, T>
[22:08:12] <kimundi> Which window_iter?
[22:08:18] <tikue> vec.window_iter()
[22:08:27] <kimundi> Well, that's a vector window iter
[22:08:33] <kimundi> DOesn't help you for strings
[22:08:43] *** Quits: Ferreus (ferreus@moz-7128F36D.pools.arcor-ip.net) (Quit: WeeChat 0.4.2)
[22:09:27] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[22:09:45] *** Quits: valenting (Thunderbir@9A1975C1.39CE2EE.E400A05F.IP) (Ping timeout)
[22:10:04] <kimundi> ofeldt: Hm, maybe I could just have a advanced version, that takes a flag indicating whether to include the splitter at the fron and/or the back...
[22:10:07] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[22:10:22] <tikue> seems reasonable
[22:10:51] *** Quits: amro (quassel@moz-17EA8511.customers.ownit.se) (Ping timeout)
[22:11:08] <tikue> mm ok i see the problem now
[22:11:15] <kimundi> split_include("ab;cd", ";", FRONT) or so...
[22:11:22] <brson> acrichto: is it possible to simplify the formatting syntax to `{?}` from `{:?}` for simple cases? i've never put anything in front of the colon (and don't know what goes there)
[22:11:53] <acrichto> brson: perhaps, the thing before the colon says which argument you're going to format
[22:12:05] <kimundi> rusti: println!("{s:s}", s = "hello")
[22:12:06] -rusti- hello
[22:12:06] -rusti- ()
[22:12:08] <tikue> brson: but you don't want to be using {:?} in most cases; is it a good idea to simplify nonidiomatic code?
[22:12:12] <kimundi> rusti: println!("{s:?}", s = "hello")
[22:12:13] -rusti- "hello"
[22:12:13] -rusti- ()
[22:12:16] <acrichto> brson: that would start raising questions of if {?} why not {d} ?
[22:13:01] <brson> acrichto: i would also expect {d}
[22:13:12] <brson> i just always use ? because i don't know how to use the new syntax :-D
[22:13:12] <ofeldt> kimundi, coming from a language which allows me to use regex as a separator, i like having options ;)
[22:13:27] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[22:13:43] <acrichto> brson: this could plausibly be done, but we'd want to figure out another place to put the name/position specifier
[22:13:53] <tikue> rusti: println!("{0} {1}{0}", "abra", "cad");
[22:13:54] -rusti- abra cadabra
[22:13:54] -rusti- ()
[22:14:17] <brson> interesting
[22:14:23] *** Joins: reyre|away (reyre@moz-22F2351B.core.archive.org)
[22:14:35] *** Quits: mikezaby (mikezaby@moz-AA896205.home.otenet.gr) (Input/output error)
[22:14:36] *** Joins: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net)
[22:14:36] <kimundi> ofeldt: Yeah, one goal of what I'm working on is to allow a regex to be used a a splitter
[22:14:45] <brson> rusti: println!("{} {}", "abra", "cad");
[22:14:46] -rusti- abra cad
[22:14:46] -rusti- ()
[22:14:49] <tikue> kimundi: oh awesome!
[22:14:51] *** reyre|away is now known as reyre_
[22:15:04] <kimundi> ofeldt: Or, I at least try to design the API in a way that someone can write an impl that uses a regex as a splitter :P
[22:15:05] <brson> i guess that's what i should be using by default
[22:15:30] <tikue> can you mix indices with lack of indices?
[22:15:37] <tikue> rusti: println!("{} {}{0}", "abra", "cad");
[22:15:39] -rusti- abra cadabra
[22:15:39] -rusti- ()
[22:15:41] <kimundi> brson: We need a deriving mode for {}, and then start massivly port ToStr users to it :P
[22:15:48] *** Quits: reyre_ (reyre@moz-22F2351B.core.archive.org) (Quit: )
[22:16:06] <tikue> kimundi++
[22:16:19] *** Joins: reyre (reyre@moz-89E9865B.com)
[22:17:14] <kimundi> Anyway, good night everyone :P
[22:17:20] <tikue> kimundi: what bout split_chunks
[22:17:38] <tikue> eh too redundant...
[22:18:02] <kimundi> tikue: Yeah, that
[22:18:42] <tikue> kimundi: split_retain
[22:18:43] <tikue> ?
[22:18:54] *** Joins: chadz (chadz@90CCDB53.76F9E272.DA40C4B3.IP)
[22:18:59] <kimundi> hm, maybe seperate for "a;b" -> "a" "b" and split for "a;b" -> "a;" "b" ?
[22:19:44] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[22:20:04] <tikue> kimundi: split has historical precedence for the former use case though...and separate and split are synonyms, so it'd be confusing. imo it should be split_something
[22:21:49] <kimundi> Yeah, it'S probably going to end up as split_something. But seperate makes sense: the ; is the seperator, and is not part of the data that gets seperated by it. While for split, ; is a "split here" indicator, and does not neccessary need to be excluded by the splitting.
[22:22:29] <kimundi> Well, whatever. Me, bed, now. Bye! \o
[22:22:56] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[22:23:22] *** Quits: jordyd (jordyd@moz-8DC1639B.seg53.ucf.edu) (Ping timeout)
[22:23:35] <brson> 2014 research internship applications are open https://careers.mozilla.org/en-US/position/oZO7XfwB
[22:24:04] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[22:25:26] *** Joins: jviereck (Adium@moz-CF8216D6.dip0.t-ipconnect.de)
[22:25:52] *** Joins: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au)
[22:27:55] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:28:07] *** Joins: freezerburnv (freezerbur@moz-E25EEE31.washdc.fios.verizon.net)
[22:28:28] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[22:29:02] *** Joins: strcat (strcat@moz-61B073BC.cpe.net.cable.rogers.com)
[22:31:08] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[22:31:18] *** Quits: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net) (Ping timeout)
[22:31:52] *** Joins: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net)
[22:31:59] *** kimundi is now known as zz_kimundi
[22:32:08] *** Quits: moostik (Icedove@moz-63ED7231.w82-121.abo.wanadoo.fr) (Ping timeout)
[22:32:19] *** Joins: moostik (Icedove@moz-63ED7231.w82-121.abo.wanadoo.fr)
[22:32:31] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[22:32:40] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[22:33:21] *** Quits: Janko (chatzilla@D9AEFC3E.9E37BD61.9C3D12F2.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 28.0a1/20131118075715])
[22:34:30] *** Quits: tikue (tkuehn@CDCD6B77.F3E8A984.689607DE.IP) (Quit: tikue)
[22:34:42] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:37:24] *** Quits: jviereck (Adium@moz-CF8216D6.dip0.t-ipconnect.de) (Quit: Leaving.)
[22:37:37] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[22:37:37] *** ChanServ sets mode: +ao pcwalton pcwalton
[22:38:40] *** Quits: freezerburnv (freezerbur@moz-E25EEE31.washdc.fios.verizon.net) (Quit: freezerburnv)
[22:39:06] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:39:23] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[22:39:25] *** Joins: dew1 (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[22:39:26] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[22:39:43] *** Quits: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu) (Ping timeout)
[22:39:50] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[22:39:50] *** Quits: happy4crazy (happy4craz@87D98E32.4046EB22.428F94DD.IP) (Client exited)
[22:40:39] *** Joins: happy4crazy (happy4craz@87D98E32.4046EB22.428F94DD.IP)
[22:41:37] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[22:43:36] <eddyb9> brson: interesing...
[22:43:55] <eddyb9> not sure right now, still recalculating future after my new gf left me
[22:45:52] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[22:47:10] *** Joins: Janko (chatzilla@D9AEFC3E.9E37BD61.9C3D12F2.IP)
[22:47:11] *** Quits: chadz (chadz@90CCDB53.76F9E272.DA40C4B3.IP) (Quit: chadz)
[22:47:13] *** Quits: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP) (Quit: lmandel)
[22:50:00] *** Joins: valenting (Thunderbir@6F630D40.173A6960.FB866788.IP)
[22:50:21] <jorendorff> tell your friends https://twitter.com/MozResearch/status/402560099996028928
[22:50:35] <pcwalton> acrichto: I don't think it leaks the proc actually
[22:50:38] <jorendorff> bah, sorry for spam
[22:50:41] <pcwalton> the original code just called it behind a &
[22:50:46] <pcwalton> which doesn't free it
[22:51:05] <acrichto> pcwalton: wait that means that every task spawned introduces a leak
[22:51:13] <acrichto> how have we not caught that?
[22:51:18] <pcwalton> maybe that was true?
[22:51:22] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[22:51:28] <strcat> acrichto: thousands of valgrind suppressions? ;p
[22:51:29] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[22:51:42] <pcwalton> brson: ping
[22:51:49] *** Quits: Janko (chatzilla@D9AEFC3E.9E37BD61.9C3D12F2.IP) (Client exited)
[22:52:00] *** Quits: lenstr (lenstr@2A2A2196.9DA5669E.3F2079FA.IP) (Client exited)
[22:52:41] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[22:52:46] <acrichto> pcwalton: ok this is weird, it can't be leaking memory, I'm running it in a loop and it's not increasing memory usage at all
[22:53:09] <pcwalton> something else must be destroying the proc
[22:53:38] <acrichto> pcwalton: hm, I'll let brson take a look at that
[22:53:41] <brson> pcwalton: pong
[22:53:43] <acrichto> I didn't actually write any of that code
[22:53:52] <pcwalton> brson: how do the various allocations in task_start_wrapper get destroyed?
[22:53:57] <pcwalton> that's very clever code
[22:54:44] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:55:36] <strcat> my life would be easier if 'extern "C" fn<T>() {}' worked ;p
[22:56:02] <brson> pcwalton: the main closure is owned by Context and is destroyed when Task is. are there other allocations you are thinking of specifically?
[22:56:16] <pcwalton> ok, I think that was what I was asking
[22:56:21] <dbaupp> strcat: I assume the fix isn't trivial?
[22:56:27] *** Quits: sebcrozet (sebcrozet@moz-2517AE39.w80-13.abo.wanadoo.fr) (Quit: Gone)
[22:56:29] <acrichto> pcwalton: you should not be able to call proc through & though
[22:56:35] <acrichto> pcwalton: that's moving out of the &
[22:56:37] <pcwalton> I transmuted it :)
[22:56:44] <acrichto> that's terrifying
[22:56:57] <pcwalton> that's why I wrote /// XXX(pcwalton): This may be sketchy.
[22:56:59] <acrichto> although I suppose if it runs and there's no leaks, it's not too bad
[22:57:07] <strcat> dbaupp: doesn't seem trivial
[22:57:22] <strcat> I started on it and then gave up ;p
[22:57:27] <pcwalton> acrichto: I think the reason for the sketchiness is that our register swap code doesn't know how to invoke a function with two arguments
[22:57:31] <strcat> https://github.com/thestinger/rust-core/blob/master/core/thread.rs#L45 makes this a pain
[22:57:54] <pcwalton> if it did, then we could just blow apart the proc
[22:58:00] <pcwalton> and save an allocation on task spawn
[22:58:09] *** Quits: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP) (Input/output error)
[22:58:16] <strcat> have to take the 'proc() -> A' and put it into a useless 'proc -> ~A' because I can't have the C ABI shim be generic on it and put it into an ~ box itself :(
[22:58:22] <acrichto> I'm not too worried right now about saving allocations on task spawning
[22:58:31] <pcwalton> it'd also eliminate the transmutation
[22:58:52] <acrichto> brson: do the windows builders run commands in a mingw shell?
[23:00:00] *** Quits: jvshahid (jvshahid@moz-53774307.nycm.ny.megapath.net) (Quit: Lost terminal)
[23:00:51] *** Joins: fyolnish (fyolnish@moz-A396664B.uqwimax.jp)
[23:02:01] * acrichto wishes he could boot 2 vms at once
[23:02:10] <strcat> why not?
[23:02:21] <acrichto> last time I did that my laptop just froze and died
[23:02:26] <acrichto> I suspect not enough ram
[23:02:32] *** Quits: fyolnish (fyolnish@moz-A396664B.uqwimax.jp) (Ping timeout)
[23:03:16] *** Joins: freezerburnv (freezerbur@moz-E25EEE31.washdc.fios.verizon.net)
[23:03:26] *** Quits: geoffhill (geoffhill@moz-738DC0DB.org) (Ping timeout)
[23:03:48] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[23:04:07] <brson> acrichto: i can't tell, but i don't see evidence that they do
[23:04:40] <acrichto> brson: argh, I moved rust_builtins.cpp to rust_bulitins.c and the old .d files aren't being cleaned out properly and make is complaining
[23:04:58] *** Quits: ianj (ianjneu@moz-7140CF01.ccs.neu.edu) (Quit: leaving)
[23:05:40] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[23:06:28] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[23:06:54] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[23:07:31] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[23:08:59] *** Joins: Janko (chatzilla@D9AEFC3E.9E37BD61.9C3D12F2.IP)
[23:09:06] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[23:09:21] *** Joins: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu)
[23:09:28] *** Quits: valenting (Thunderbir@6F630D40.173A6960.FB866788.IP) (Quit: valenting)
[23:09:41] *** Joins: valenting (Thunderbir@6F630D40.173A6960.FB866788.IP)
[23:10:29] *** pmoore is now known as pmoore|away
[23:10:57] *** Joins: fyolnish (fyolnish@moz-A396664B.uqwimax.jp)
[23:12:38] *** Quits: fyolnish (fyolnish@moz-A396664B.uqwimax.jp) (Ping timeout)
[23:15:25] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[23:16:05] *** Quits: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:16:55] <acrichto> dbaupp: ping
[23:18:13] *** Quits: skeet70 (skeet70@23022202.C24BC101.B6E96A0D.IP) (Ping timeout)
[23:18:22] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[23:18:28] <dbaupp> acrichto: pong
[23:18:53] <acrichto> dbaupp: so you're talking about mantissa bits without a transmute, but I'm not sure how they come into play at all in that case
[23:19:12] <acrichto> although I certainly don't fully understand floating point math myself
[23:19:37] <dbaupp> acrichto: we're dividing by 2**53, which is effectively shifting 0xffff_fff...fff -> 0x0.ffff_fff...fff
[23:19:47] <strcat> dbaupp: what's this for?
[23:20:05] <dbaupp> strcat: https://github.com/mozilla/rust/pull/10542
[23:20:17] *** Quits: Janko (chatzilla@D9AEFC3E.9E37BD61.9C3D12F2.IP) (Ping timeout)
[23:20:35] <dbaupp> acrichto: that is, it's acting a little like what the transmute would do, by filling mantissa bits, but letting the CPU manage making it correct
[23:20:42] <acrichto> hm, quick floating point reminder, | sign bit | exponent bits | mantissa bits | right?
[23:20:52] <dbaupp> yes
[23:21:16] <acrichto> and the mantissa starts at 2^0, 2^-1, 2^-2, .. ?
[23:21:20] *** Joins: mib_u7u98l (Mibbit@4F3FE2BD.3C990DFD.DDE5D3F6.IP)
[23:21:31] <dbaupp> (fwiw, a transmute solution would probably go `int -(transmute)-> [1, 2) -(subtract 1)-> [0, 1)`.)
[23:22:14] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[23:23:03] <acrichto> I think I'm just not understanding how a floating-point cast from int->float has anything to do with preserving mantissa bits
[23:23:38] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[23:23:50] <strcat> our float casts have undef behaviour on overflow btw...
[23:23:59] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[23:24:09] <dbaupp> strcat: no overflow here?
[23:24:42] *** Quits: lfox (lfox@moz-861E573F.nyc.biz.rr.com) (Quit: ZZZzzz…)
[23:25:56] <acrichto> dbaupp: so with an exponent value of 0, a floating point value ranges from [1, 2), right?
[23:26:13] <dbaupp> acrichto: um, not sure of the details.
[23:27:02] *** Quits: cs648 (charlie@moz-7C52DAC0.range86-176.btcentralplus.com) (Ping timeout)
[23:27:02] <dbaupp> acrichto: in any case, int -> float basically takes everything after the highest 1 as the mantissa, and sets the exponent to be the floor of log-base-2 of that number
[23:27:30] <dbaupp> i.e. 9 == 0b01001 -> matissa = 001 exponent = 3
[23:27:41] <dbaupp> so it's representing 0b1.001 * 2**3
[23:27:45] *** Joins: prooftechnique (prooftechn@moz-65B7D4EE.hsd1.vt.comcast.net)
[23:27:49] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[23:28:12] <acrichto> but the mantissa is 23/52 bits long, not 24/53?
[23:29:03] <dbaupp> yes, the first digit is always 1, so there's an implicit extra bit
[23:29:38] <brson> erickt: i may bump the meetup numbers yet. my manager asked me to, so i'm trying to see if it's still possible
[23:29:45] <erickt> :) ok
[23:30:10] <brson> pcwalton is going to have a big audience...
[23:30:24] <pcwalton> good thing I got it to build yesterday
[23:30:30] <erickt> ha
[23:30:39] <erickt> I'm so looking forward to the meetup
[23:30:50] <dbaupp> acrichto: i.e. floats are stored with in invariant that it's 0b1.xxxxx * 2**<something>, so there's no point storing that first 1
[23:31:05] *** Quits: canhtak (canhtak@moz-43EC0376.wl.t.ulaval.ca) (Quit: canhtak)
[23:31:07] *** Joins: jdm (jdm@moz-ED0C7AC7.hinet-ip.hinet.net)
[23:31:07] *** ChanServ sets mode: +o jdm
[23:31:22] <acrichto> dbaupp: ok I am convinced of [0, 1) and [0, 1], still working throug (0, 1) in my head
[23:32:25] <dbaupp> acrichto: that's basically just "abusing" floating point precision by adding something too small to affect 0.999999...999, but large enough to shift an exact 0 away from 0
[23:32:39] * acrichto slowly remembers how floating point works
[23:32:45] <rntz> badly
[23:32:46] <pcwalton> ~fn() is not long for this earth
[23:32:46] <rntz> it works badly
[23:32:49] *** Quits: freezerburnv (freezerbur@moz-E25EEE31.washdc.fios.verizon.net) (Quit: freezerburnv)
[23:33:02] <acrichto> pcwalton: yay!
[23:33:10] *** Quits: huseby (huseby@moz-A22BFFCA.tuxli.ch) (Quit: Leaving)
[23:33:18] <pcwalton> the biggest fallout is going to be Servo :P
[23:33:27] <pcwalton> rust-hubbub is going to have a bad time
[23:33:29] <pcwalton> but it will be faster
[23:35:59] <aatch> pcwalton, is that the change to proc()?
[23:35:59] <dbaupp> acrichto: in decimal with a precision of 2 (i.e. generating an integer from 0 - 99 and dividing by 100); the conversion is basically 0.00 -> 0.10, but 99 + 0.1 == 99.1 is 3 sig.figs, so the 0.1 cannot be represented, leaving it at 99
[23:36:04] <pcwalton> aatch: yup
[23:36:09] <pcwalton> which also eliminates most usages of Cell
[23:36:11] *** Quits: valenting (Thunderbir@6F630D40.173A6960.FB866788.IP) (Ping timeout)
[23:36:18] <dbaupp> acrichto: (but in decimal)
[23:36:21] <dbaupp> *binary
[23:36:37] <aatch> Is there something detailing the semantic differences between proc() and ~fn()?
[23:37:10] <dbaupp> is it just once-ness?
[23:37:13] <pcwalton> there's no difference except that proc() can only be called once and can move out of upvars
[23:37:14] <pcwalton> yeah
[23:37:44] <aatch> so proc() == once ~fn() (or however you'd write it)?
[23:37:54] <pcwalton> and is easier to type on non-US keyboard layouts
[23:37:54] <pcwalton> yeah
[23:38:15] <pcwalton> it also goes with the change from &fn() -> |A| -> B
[23:38:24] <pcwalton> &fn(A)->B => |A|->B
[23:38:38] <pcwalton> which is better because &fn was kind of a lie because of The Case of the Recurring Closure
[23:38:41] <pcwalton> it's really &mut fn(A)->B
[23:38:45] <pcwalton> but that's so ugly
[23:38:58] <dbaupp> the syntax 'fn(A) -> B' == 'extern "Rust" fn(A) -> B' doesn't it?
[23:39:03] <pcwalton> yup
[23:39:13] <pcwalton> in fact feel free to remove useless 'extern "Rust"'s
[23:39:22] <acrichto> dbaupp: on a scale of 1-10 how confident are you of your math
[23:39:34] <dbaupp> acrichto: 7
[23:39:52] <dbaupp> acrichto: http://stackoverflow.com/questions/17955007/generating-random-numbers-on-open-open-interval-0-1-efficiently
[23:40:04] *** Joins: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net)
[23:41:39] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[23:42:06] <acrichto> dbaupp: so you add 1/4 b/c you're generating intervals on the granularity of 1 ?
[23:42:24] <dbaupp> acrichto: I'm not sure I understand that
[23:42:38] *** Quits: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net) (Ping timeout)
[23:42:39] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[23:42:53] <acrichto> hm, so the floating point values generated and then casted with `as` are all spaced apart by 1, right? b/c they're basically the integer that was generated
[23:42:58] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[23:43:09] <dbaupp> yes
[23:43:34] *** Quits: happy4crazy (happy4craz@87D98E32.4046EB22.428F94DD.IP) (Client exited)
[23:43:35] <dbaupp> adding 0.25 because adding 0.5 would round the largest one up to 1, i.e. defeating the point of doing this.
[23:43:36] *** Joins: derek_c (chatzilla@moz-66F31E3.cit.cornell.edu)
[23:43:36] <acrichto> so the 1/4 addition is because 1/2 is too big and 1/4 is halfway between 0 and 1/2 ?
[23:43:37] *** Quits: Savago (Savago@2F1448E.68394D8.18DDB669.IP) (Quit: Savago)
[23:43:51] *** Joins: japaric (japaric@B17EFFD8.A23A5F6C.E5B504CC.IP)
[23:44:07] <acrichto> so it's not a concern that an f64 only has 54 bits of randomness?
[23:44:10] <acrichto> 53* (I think)
[23:44:44] <dbaupp> (yes to 1/4)
[23:44:57] <derek_c> Does anyone know approximately when Rust will hit 1.0?
[23:45:10] <dbaupp> acrichto: the limited randomness has been pressing on me, but everything else does that, so I'm not super concerned for now
[23:45:27] <acrichto> dbaupp: ok, you have convinced me
[23:45:36] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[23:45:38] <dbaupp> acrichto: (and, people shouldn't be using floats for cryptographic things anyway... raw bits via u64 etc seem more useful)
[23:45:50] <acrichto> I suppose that's a good point
[23:46:02] *** Joins: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net)
[23:46:10] *** Quits: toto (yaaic@moz-B234C23B.rev.numericable.fr) (Quit: Yaaic - Yet another Android IRC client - http://www.yaaic.org)
[23:47:34] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[23:48:05] *** Joins: happy4crazy (happy4craz@87D98E32.4046EB22.428F94DD.IP)
[23:48:30] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[23:50:38] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[23:52:09] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[23:52:25] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[23:52:29] *** Quits: meTaAU (admin@moz-F4CD4750.lns20.per1.internode.on.net) (Ping timeout)
[23:52:37] *** jorendorff is now known as jorendorff_away
[23:52:52] *** Joins: meTaAU (admin@moz-C8A20DFA.lns20.per1.internode.on.net)
[23:53:32] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[23:53:56] <pcwalton> maybe we should have the old GMP-based pidigits still in the tree
[23:54:02] <pcwalton> just so that people don't run it and think that rust is slow
[23:54:18] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[23:54:31] *** Joins: freezerburnv (freezerbur@moz-E25EEE31.washdc.fios.verizon.net)
[23:55:34] *** Quits: mib_u7u98l (Mibbit@4F3FE2BD.3C990DFD.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[23:56:37] <strcat> pcwalton: they'll think that if they run a lot of the benchmarks just because they use I/O
[23:57:08] <pcwalton> isn't stdout pretty close to C++ these days?
[23:57:09] <pcwalton> acrichto: ^
[23:57:20] <acrichto> it should be
[23:57:25] <acrichto> if it's not I'm unaware of why
[23:57:29] <strcat> it doesn't use libuv I/O?
[23:57:34] <acrichto> it does
[23:57:36] <pcwalton> libuv can be close to C++
[23:57:42] <acrichto> but it also doesn't if you say #[no_uv]
[23:57:49] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[23:57:54] <acrichto> #[no_uv] == write()
[23:57:55] <pcwalton> there's no allocation anymore
[23:58:09] <acrichto> it only took a 10k line patch to get it there :P
[23:58:10] *** Joins: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net)
[23:58:11] <pcwalton> we could stick #[no_uv] in the benchmarks if we have to but I'd like to see if we can get it down
[23:58:36] *** Quits: w3lcome (Mibbit@moz-177EEEFC.home.otenet.gr) (Quit: http://www.mibbit.com ajax IRC Client)
[23:58:50] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[23:59:08] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[23:59:08] <dbaupp> acrichto: is stdout buffered at all?
[23:59:18] <acrichto> dbaupp: yes, line-buffered
[23:59:44] <dbaupp> acrichto: even for non-ttys?
[23:59:46] <strcat> stdio stdout if fully buffered when piping
[23:59:55] *** Quits: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[23:59:56] <acrichto> dbaupp: yes, even for ttys
