[00:00:22] *** Quits: yoshi (Mibbit@moz-A93A96FB.pppoe.mtu-net.ru) (Quit: http://www.mibbit.com ajax IRC Client)
[00:04:10] *** Quits: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com) (Ping timeout)
[00:04:34] <dbaupp> MaikKlein2: or `make check-stage2-std NO_REBUILD=1`
[00:04:52] <dbaupp> MaikKlein2: https://github.com/mozilla/rust/wiki/Note-testsuite
[00:06:31] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[00:06:34] *** Quits: ross (ross@moz-8A84103E.br.br.cox.net) (Quit: )
[00:10:49] *** Quits: Vert (quassel@8A83479C.391ACC8C.CAF63861.IP) (Ping timeout)
[00:14:42] *** Joins: Voomer (Voomer@moz-5D6F86AC.dyn.centurytel.net)
[00:15:09] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[00:16:54] *** Joins: jaen (jaen@moz-36261275.internetdsl.tpnet.pl)
[00:18:55] <steven_is_false> Does anyone have any ideas on how I could make condition variables own a handle to a lock in the following code https://github.com/sstewartgallus/rust/blob/refactor_arc/src/libextra/sync/condition.rs ?
[00:21:39] *** Parts: steven_is_false (user@moz-144077DE.bchsia.telus.net) (ERC Version 5.3 (IRC client for Emacs))
[00:22:16] *** Quits: yong (chatzilla@89F941DF.4E87ADC2.263D9828.IP) (Ping timeout)
[00:24:07] *** Joins: yong (chatzilla@89F941DF.4E87ADC2.263D9828.IP)
[00:24:33] *** Quits: jaen (jaen@moz-36261275.internetdsl.tpnet.pl) (Ping timeout)
[00:25:51] <mark_edward> dbaupp: how do you set RUST_LOG?
[00:28:55] <MaikKlein2> dbaupp, thanks
[00:30:09] *** Quits: strcat (strcat@moz-61B073BC.cpe.net.cable.rogers.com) (Ping timeout)
[00:30:34] *** Quits: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com) (Ping timeout)
[00:31:39] *** Quits: tjc (tjc@moz-1805C65F.dsl.dynamic.sonic.net) (Quit: zzzzzzzzzz)
[00:31:53] <mark_edward> MaikKlein2: do you know how to set RUST_LOG?
[00:32:18] *** Quits: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net) (Quit: computer sleeping)
[00:33:08] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[00:33:14] *** Joins: strcat (strcat@moz-61B073BC.cpe.net.cable.rogers.com)
[00:34:19] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[00:37:00] *** Quits: Nefzaoui (chatzilla@167A3061.E254362C.80E43DAF.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 22.0/20130618035212])
[00:37:33] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[00:39:24] <aatch> mark_edward, it's an environment variable
[00:39:40] <mark_edward> i just figured that out
[00:39:47] *** Joins: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com)
[00:39:58] <aatch> so `RUST_LOG=mymod=4 ./mymod` works
[00:40:01] <mark_edward> unfortunately i've been getting an ICE in one of my prohects
[00:40:17] <aatch> mark_edward, what's it say?
[00:40:24] <MaikKlein2> can someone review https://github.com/mozilla/rust/pull/7937 ?
[00:40:34] <mark_edward> error: internal compiler error: unexpected failure
[00:40:34] <mark_edward> note: the compiler hit an unexpected failure path. this is a bug
[00:40:39] *** Joins: barosl (barosl@E287D94F.C81E10FB.7544CABF.IP)
[00:41:24] <aatch> MaikKlein2, isn't there a `repeat` method on strings?
[00:41:29] <mark_edward> and running with RUST_LOG isn't giving me anything
[00:41:30] <MaikKlein2> ?
[00:42:05] <MaikKlein2> oh
[00:42:07] <MaikKlein2> :X
[00:42:07] <aatch> mark_edward, oh, try `RUST_LOG=rustc=1 rustc foo.rs`
[00:42:17] <MaikKlein2> aatch, you are right :x
[00:42:31] <aatch> MaikKlein2, the operator impl seems ok to me.
[00:42:45] <aatch> MaikKlein2, but no point in duplicating the underlying functionality.
[00:42:49] <MaikKlein2> aatch, ok I use repeat then
[00:43:08] <mark_edward> aatch: rust: task failed at 'option::get none', /build/rust-git/src/rust/src/libstd/option.rs:335
[00:43:42] <aatch> MaikKlein2, that said, I'm not going to approve it myself since I'm not sure what other people might think of it.
[00:44:01] <MaikKlein2> aatch, I asked pcwalton a few hours ago
[00:44:05] <MaikKlein2> aatch, but we can wait
[00:44:14] <aatch> mark_edward, ugh, not helpful.
[00:44:37] <aatch> mark_edward, if you can get a minimal test case, open a bug about it.
[00:45:09] <mark_edward> aatch: I'll try... but it's brand new in something that's been compiling until recently.
[00:45:11] <MaikKlein2> rusti: (~"a").repeat(10)
[00:45:14] -rusti- ~"aaaaaaaaaa"
[00:45:23] <engla> repeat seems fine
[00:46:25] <aatch> mark_edward, yeah. That error means somebody did 'option_val.get()' expecting it to be 'Some'
[00:46:29] <aatch> so there'
[00:46:38] <aatch> there's a logic error, somewhere.
[00:46:52] <mark_edward> aatch: okay, i'll try and find somethign
[00:46:57] <aatch> (Which is why people really should use `expect`)
[00:47:35] <aatch> `expect` makes you give an error message, btw.
[00:55:07] *** Quits: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net) (Client exited)
[00:55:32] *** Joins: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net)
[00:57:00] *** Quits: strcat (strcat@moz-61B073BC.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[00:57:07] *** Quits: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com) (Client exited)
[00:58:16] *** Joins: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com)
[01:00:49] *** Quits: mye (mye@moz-DAFF64A.dip0.t-ipconnect.de) (Quit: mye)
[01:00:50] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[01:01:04] *** Joins: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net)
[01:11:55] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[01:13:23] *** Quits: MaikKlein2 (maik@moz-7F56FAD5.dip0.t-ipconnect.de) (Ping timeout)
[01:17:59] *** Joins: luisillo (eufracio14@EFFBECFA.F961CCB5.19207060.IP)
[01:18:50] *** Quits: luisillo (eufracio14@EFFBECFA.F961CCB5.19207060.IP) (Quit: )
[01:20:46] *** Quits: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net) (Client exited)
[01:21:07] *** Joins: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net)
[01:21:41] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[01:24:06] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[01:24:16] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[01:24:28] *** Quits: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net) (Ping timeout)
[01:25:45] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[01:28:54] *** Quits: vk (chatzilla@moz-389FEE13.hsd1.ca.comcast.net) (Ping timeout)
[01:29:10] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[01:30:27] *** Quits: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com) (Ping timeout)
[01:31:21] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[01:33:19] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[01:37:36] *** Joins: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP)
[01:37:36] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/WPbCsg
[01:37:36] *** Parts: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP) ()
[01:40:42] *** Joins: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP)
[01:40:42] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/F8weWA
[01:40:42] *** Parts: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP) ()
[01:40:49] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[01:41:30] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[01:45:09] *** Quits: bytewise (bytewise@moz-649C630D.unitymediagroup.de) (Quit: Leaving)
[01:46:36] *** Joins: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com)
[01:48:20] *** Quits: Nisstyre (wes@moz-FD86289.netflash.net) (Quit: Leaving)
[01:48:32] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[01:57:26] *** Joins: lmandel (lmandel@A155E007.77875401.ADB88A9.IP)
[01:59:28] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[02:03:24] *** Quits: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com) (Connection reset by peer)
[02:04:05] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[02:04:51] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[02:05:00] *** Joins: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net)
[02:05:19] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[02:12:34] *** Joins: ross (ross@moz-3DDBA997.br.br.cox.net)
[02:16:03] *** Quits: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net) (Quit: bye!)
[02:17:19] *** Quits: lmandel (lmandel@A155E007.77875401.ADB88A9.IP) (Quit: lmandel)
[02:22:41] *** Quits: zz_kimundi (kimundi@moz-6AEDE90.dip0.t-ipconnect.de) (Ping timeout)
[02:24:01] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[02:25:46] *** Joins: zz_kimundi (kimundi@moz-B7640CA.dip0.t-ipconnect.de)
[02:26:12] *** zz_kimundi is now known as kimundi
[02:30:16] *** Quits: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com) (Ping timeout)
[02:31:49] *** Joins: jclements (jclements@moz-98A7BA64.ngn.east.myfairpoint.net)
[02:33:00] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[02:39:03] <jensnockert> The C programmer in me finds the added indirection of ARC deeply disturbing :S
[02:39:47] *** Joins: bnicholson (bnicholson@moz-1278B71.public.wayport.net)
[02:40:03] * jensnockert hugs pointers, but tries to explain for her that we have to break up.
[02:40:27] <engla> which is the indirection?
[02:40:53] <aatch> jensnockert, you haven't done much lock-free programming, have you.
[02:41:09] <jensnockert> aatch: I like my locks, than you very much.
[02:41:21] <aatch> jensnockert, so much indirection in lock-free code.
[02:41:38] <aatch> because you can only really do atomic operations on word-sized things.
[02:42:12] *** Quits: bnicholson (bnicholson@moz-1278B71.public.wayport.net) (Ping timeout)
[02:42:13] *** Joins: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net)
[02:42:21] <jensnockert> Lock-free is nice, but‚Ä¶ it is a pain.
[02:42:44] <jensnockert> I tried it a few times, then people started running my code on PPC and complain that it broke.
[02:43:48] <aatch> jensnockert, yeah, x86 isn't the best platform for testing lock-free code on.
[02:44:09] <aatch> since so many operations are already atomic anyway.
[02:44:30] <jensnockert> aatch: I just didn't expect anyone to download the code and recompile it for OS X/PPC.
[02:44:42] <aatch> jensnockert, fair enough.
[02:45:00] <engla> ppc is sadly dead
[02:45:02] <aatch> if you aren't supporting the platform, people can't complain too much when it breaks.
[02:45:23] <jensnockert> engla: No it is not.
[02:45:34] <jensnockert> engla: Xbox 360, Playstation 3?
[02:45:42] <jensnockert> engla: Wii U.
[02:46:01] <aatch> jensnockert, I didn't think PS3 was PPC architecture.
[02:46:05] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[02:46:08] <jensnockert> aatch: The main processor is.
[02:46:12] <dbaupp> MaikKlein: ping
[02:46:15] <engla> all of them? didn't know that
[02:46:28] <dbaupp> (nope... not here.)
[02:46:31] <jensnockert> engla: Yeah.
[02:46:43] <jensnockert> Also a lot of big IBM systems run PPC-derivatives.
[02:46:58] <jensnockert> The POWER/PPC difference is really small.
[02:47:11] *** Joins: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com)
[02:47:18] <engla> do you think they'll contine with that?
[02:47:41] <jensnockert> engla: Playstation 4, Xbox One are x86.
[02:47:44] <aatch> engla, well the Xbone and PS4 are both x86 architectures I believe
[02:48:06] <engla> I was thinking about IBM and Power
[02:48:16] <jensnockert> engla: Yeah, no point not to.
[02:48:33] <aatch> They're basically PCs in terms of hardware, but wired up to be significantly more efficient
[02:48:46] *** Quits: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net) (Quit: Computer has gone to sleep.)
[02:48:51] *** Joins: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net)
[02:49:01] *** Quits: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net) (Quit: Computer has gone to sleep.)
[02:50:31] <jensnockert> I also think that most cars use PPC processors for some reason, I kind of remember Volvo talking at some point about how amazing they are.
[02:50:55] <jensnockert> (Also, there are a lot of PPC systems in space)
[02:51:06] <jensnockert> http://en.wikipedia.org/wiki/RAD750
[02:51:19] <aatch> jensnockert, don't they have good power usage characteristics?
[02:51:30] <jensnockert> aatch: No idea tbh.
[02:52:22] <engla> ok nice
[02:53:26] <jensnockert> I have a certain love for MIPS these days for some unidentified reason.
[02:53:40] <jensnockert> Probably since they try to smack ARM around a bit, which is good.
[02:53:54] * jensnockert should try and get Rust running on Android/MIPS.
[02:54:11] <dbaupp> there's mips support, apparently.
[02:54:52] <aatch> dbaupp, well theres code for handling mips triples.
[02:54:58] *** Joins: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net)
[02:55:16] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[02:55:16] <dbaupp> yeah... does it not output working code?
[02:55:33] <aatch> dbaupp, never tried, don't have a MIPS machine to test it on...
[02:55:41] <jensnockert> No, it is limited to big endian chips.
[02:56:30] <jensnockert> But I guess with a minimal amount of poking I could get it to work as good as the ARM/Android one.
[03:00:28] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[03:02:16] *** Quits: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net) (Ping timeout)
[03:06:36] *** Joins: MaikKlein2 (maik@moz-7F56FAD5.dip0.t-ipconnect.de)
[03:07:10] *** Joins: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au)
[03:17:44] <dbaupp> is bors stuck?
[03:19:31] *** Joins: ecr (Thunderbir@moz-F4573E02.uoregon.edu)
[03:19:35] <engla> didn't it just finish a build?
[03:19:46] *** Quits: ecr (Thunderbir@moz-F4573E02.uoregon.edu) (Quit: ecr)
[03:19:59] *** Quits: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz‚Ä¶)
[03:21:06] <dbaupp> maybe... but it doesn't normally take this long to register that it finished, does it?
[03:21:39] <engla> not sure https://github.com/mozilla/rust/pull/7896
[03:21:42] <engla> 2 minutes ago
[03:22:13] <dbaupp> oh! cool.
[03:22:21] * dbaupp was unnecessarily worried
[03:22:35] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[03:22:35] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/R7OODw
[03:22:35] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[03:23:40] *** Quits: MaikKlein2 (maik@moz-7F56FAD5.dip0.t-ipconnect.de) (Ping timeout)
[03:23:45] <aatch> heh
[03:24:38] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[03:25:33] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[03:25:33] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/f8SaIA
[03:25:33] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[03:25:34] *** Joins: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP)
[03:25:34] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/4ZZNkA
[03:25:34] <ghrust> 13rust/06auto 14cc760a6 15Huon Wilson: syntax: modernise attribute handling in syntax::attr....
[03:25:34] <ghrust> 13rust/06auto 14d029ebf 15bors: auto merge of #7902 : huonw/rust/attr++, r=cmr,pcwalton...
[03:25:35] *** Parts: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP) ()
[03:26:43] * dbaupp hopes this doesn't fail in win-configure again
[03:29:37] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[03:30:05] *** Quits: LU324 (stuff@moz-A17E9A7B.dyn.embarqhsd.net) (Ping timeout)
[03:30:54] *** Quits: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com) (Ping timeout)
[03:34:12] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Connection reset by peer)
[03:34:41] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[03:48:35] *** Joins: dwhyte (dwhyte@1922756A.EDC594B0.7BF4A4B0.IP)
[04:00:24] *** Quits: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net) (Ping timeout)
[04:01:24] *** Joins: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net)
[04:03:08] *** Quits: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net) (Ping timeout)
[04:03:32] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[04:04:04] *** Joins: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net)
[04:09:18] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[04:09:18] *** ChanServ sets mode: +o dherman
[04:13:43] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[04:13:51] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[04:14:16] *** Joins: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com)
[04:14:17] *** Quits: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net) (Ping timeout)
[04:15:20] *** Joins: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net)
[04:20:51] <gavinb> Waiting for client...
[04:20:51] <gavinb> You've met with a terrible fate, haven't you?
[04:20:52] <gavinb> fatal runtime error: runtime tls key not initialized
[04:21:11] <gavinb> ^^ This was an interesting error message I just hit.
[04:22:01] *** Quits: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net) (Ping timeout)
[04:22:38] *** Joins: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net)
[04:23:23] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[04:28:20] *** Joins: Jesin (Jessin_@moz-3AD6F09F.res.lehigh.edu)
[04:28:28] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[04:28:29] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[04:28:36] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[04:43:43] <sp3d> are unescaped newline character literals *supposed* to be allowed?
[04:44:50] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[04:45:44] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[04:48:09] <sp3d> and carriage-return, hmph
[04:58:05] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Client exited)
[04:59:07] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[05:00:57] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[05:07:34] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[05:07:34] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/4ZZNkA
[05:07:34] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[05:08:56] *** Quits: Earnestly (earnest@2AB30F53.FB5005.2BCC804A.IP) (Ping timeout)
[05:09:03] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[05:09:04] *** ChanServ sets mode: +o dherman
[05:10:01] <dbaupp> sp3d: that's pretty strange... file a bug/ask on the mailing list to get it cleared up.
[05:10:24] *** Joins: novabyte (Instantbir@moz-3E0F9699.cable.virginmedia.com)
[05:10:25] *** Quits: novabyte (Instantbir@moz-3E0F9699.cable.virginmedia.com) (Input/output error)
[05:10:31] *** Joins: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP)
[05:10:31] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/E7DQug
[05:10:31] <ghrust> 13rust/06auto 140ba6a51 15Graydon Hoare: extra: add some microbenchmarks
[05:10:31] <ghrust> 13rust/06auto 14c325cb0 15bors: auto merge of #7912 : graydon/rust/extra-new-benchmarks-1, r=catamorphism...
[05:10:31] *** Parts: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP) ()
[05:12:36] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[05:14:16] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[05:15:10] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[05:20:30] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[05:25:52] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Client exited)
[05:26:19] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[05:26:41] <aatch> Well that was an impressibve quake
[05:28:14] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[05:28:45] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[05:34:13] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[05:35:34] <aatch> http://geonet.co.nz/quakes/region/wellington/2013p543824
[05:35:53] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[05:36:15] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[05:36:19] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[05:40:51] <dbaupp> aatch: things falling over?
[05:41:10] <aatch> dbaupp, yep.
[05:41:17] <dbaupp> you ok?
[05:41:21] <aatch> dbaupp, nothing broken yet though.
[05:41:31] <aatch> dbaupp, yeah, just a little shaken. No pun intended.
[05:43:25] <dbaupp> :)
[05:44:23] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:44:59] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:48:17] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[05:57:42] *** Joins: rsaarelm (rsaarelm@moz-D1CB7158.dhcp.inet.fi)
[06:02:09] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[06:08:38] <bjz> yoiks
[06:08:51] <bjz> aatch: glad you're ok
[06:11:13] <aatch> bjz, thanks. We're still getting aftershocks.
[06:11:26] <bjz> magnitude?
[06:11:39] <aatch> bjz, the biggest has been 6.5
[06:11:49] <bjz> wow, that's reasonable
[06:12:38] <aatch> bjz, we're about 20-30Km from the epicenter of most of them.
[06:12:42] <bjz> (log scale, for those who don't know)
[06:12:52] <toddaaro> just saw a cbc.ca news story, 6.9 on the last one according to that
[06:13:01] <toddaaro> though 57km off the coast
[06:13:13] <toddaaro> http://www.cbc.ca/news/world/story/2013/07/21/new-zeland-earthquake.html
[06:13:54] <dbaupp> haha, they appear to have dropped an 'a'
[06:14:04] <aatch> toddaaro, I probably have my estimates off on distance.
[06:14:30] <aatch> This is the best resource: http://geonet.co.nz/quakes/region/wellington/felt
[06:15:11] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[06:15:31] <dbaupp> looks like they're weakening
[06:15:56] <aatch> dbaupp, aftershocks mostly.
[06:16:00] <toddaaro> that is a fancy site
[06:17:50] <aatch> toddaaro, yep, and it holds up under impressive load.
[06:23:29] *** Quits: KindOne (KindOne@moz-A2F67D81.dynamic.ip.windstream.net) (Ping timeout)
[06:27:25] *** Joins: KindOne (KindOne@moz-CF502721.dynamic.ip.windstream.net)
[06:27:48] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[06:28:03] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[06:33:06] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[06:35:37] <gavinb> So the #[link_args =‚Ä¶] attribute only applies to other code that links with the current module? What about saying you want the current module to link with a particular library?
[06:35:58] <gavinb> I tried putting this attar on main() but that didn't change it either.
[06:38:22] <dbaupp> gavinb: I think you put it on `extern` blocks
[06:39:15] <dbaupp> gavinb: e.g. https://github.com/mozilla/rust/blob/master/src/test/run-pass/smallest-hello-world.rs#L21
[06:40:00] <gavinb> eek! ok, well I already have it on an extern block, but will try that hack. Thanks...
[06:40:41] <dbaupp> If you're linking with a specific library (say 'foo'), I think `#[link_name="foo"] extern { ... }` should also work.
[06:41:24] <gavinb> It was to use a framework on Mac actually. The hack worked...
[06:42:41] <dbaupp> haha cool :)
[06:43:32] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[06:45:19] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[06:46:25] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[06:46:32] *** Joins: kertap (kertap@moz-5AE34C97.b-ras3.mvw.galway.eircom.net)
[06:47:27] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Ping timeout)
[06:48:13] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[06:49:03] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[06:52:31] *** Joins: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP)
[06:52:31] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/E7DQug
[06:52:31] *** Parts: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP) ()
[06:53:20] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[06:55:28] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[06:55:28] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/bh5uKw
[06:55:28] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[06:55:30] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[06:55:30] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/ozWKAQ
[06:55:30] <ghrust> 13rust/06auto 1479677f0 15Brian Anderson: mk: Remove CFG_INSTALL_SNAP logic. #2664
[06:55:30] <ghrust> 13rust/06auto 14c4b6216 15bors: auto merge of #7913 : brson/rust/rm-install-snap, r=graydon
[06:55:30] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[06:57:29] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[06:57:46] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[06:57:55] *** Quits: itdaniher (it@moz-C885C25B.mit.edu) (Client exited)
[07:03:50] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[07:06:05] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[07:09:14] *** Quits: lerc (quassel@moz-598ED764.telstraclear.net) (Quit: No Ping reply in 180 seconds.)
[07:09:38] *** Joins: lerc (quassel@moz-598ED764.telstraclear.net)
[07:10:20] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[07:10:20] *** ChanServ sets mode: +o tjc
[07:10:25] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: tjc)
[07:13:18] *** Quits: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net) (Quit: ["Textual IRC Client: www.textualapp.com"])
[07:14:05] *** Joins: ross2 (ross@moz-3DDBA997.br.br.cox.net)
[07:14:06] *** Quits: ross (ross@moz-3DDBA997.br.br.cox.net) (Ping timeout)
[07:16:59] *** ross2 is now known as ross
[07:27:49] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[07:27:49] *** Joins: z0w0 (zack@moz-E12708D5.lns6.woo.bigpond.net.au)
[07:35:59] *** Joins: mihneadb (mihneadb@moz-329F29A3.lightspeed.sntcca.sbcglobal.net)
[07:42:43] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[07:48:16] *** Joins: Ms2ger (Ms2ger@moz-12781595.adsl-dyn.isp.belgacom.be)
[07:50:20] *** Quits: KindOne (KindOne@moz-CF502721.dynamic.ip.windstream.net) (Ping timeout)
[07:52:43] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[07:54:06] *** Joins: KindOne (KindOne@C1F6E399.FEF4604.EC6A1518.IP)
[08:07:44] *** Joins: drumond19 (drumond19@1125C663.26437150.C55BF118.IP)
[08:24:56] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: zzz)
[08:25:48] *** Quits: santiago (santiago@moz-8ADE82B4.socal.res.rr.com) (Ping timeout)
[08:26:24] *** Quits: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com) (Input/output error)
[08:27:52] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[08:28:10] <mihneadb> is [1,2,3].each not a vaid thing anymore?
[08:29:17] <doener> rust switched to external iterators. Use [1,2,3].iter().advance
[08:29:48] <doener> "for" should/will learn to handle the new protocol at some point
[08:29:57] <dbaupp> mihneadb: (if you're using a literal array, or the return value of a function, you'll need to save it in a temporary; for now.)
[08:30:34] <mihneadb> dbaupp: literal, yes. I was trying to follow the "rust for rubyists" ebook
[08:31:00] <dbaupp> doener: (just btw, I've taken inspiration from you, and am being more diligent about commit messages. :) )
[08:31:24] *** Joins: santiago (santiago@moz-8ADE82B4.socal.res.rr.com)
[08:31:24] <aatch> Yay, more people with decent commit messages.
[08:31:42] <aatch> now, if only we could get pcwalton to make decent PR descriptions.
[08:31:50] <dbaupp> mihneadb: yeah, you'll need `let v = [1,2,3]; for v.iter().advance ...` rather than `for [1,2,3].iter().advance ...`
[08:31:59] <aatch> instead of just "r? @nikomatsakis"
[08:32:17] <mihneadb> dbaupp: thanks. Also, I m not sure, when can I just ditch the for?
[08:32:18] <doener> dbaupp: :-)
[08:32:24] <mihneadb> dbaupp: it seems to work for 10.times {....}
[08:32:32] <mihneadb> I mean that works without "for"
[08:32:46] <dbaupp> 10.times(|| { ... }), right?
[08:33:27] <mihneadb> dbaupp: I did 10.times {println("yo")}
[08:33:27] <mihneadb> worked :S
[08:33:33] <mihneadb> 0.7.1
[08:33:43] <mihneadb> sorry, 0.7-1
[08:33:52] <dbaupp> that seems... unlikely.
[08:33:54] * dbaupp is confused
[08:34:08] <doener> probably a debian package version
[08:34:16] <mihneadb> yes, -1 is just the pkg ver
[08:34:19] <doener> they append -1 for internal purposes
[08:34:20] <mihneadb> 0.7 is the relevant part
[08:34:30] <mihneadb> I was too specific :)
[08:34:52] <dbaupp> `fn main() {10.times {println("yo")}}` => `error: expected `;` or `}` after expression but found `{``
[08:35:04] * dbaupp wasn't confused about the package version
[08:35:25] <mihneadb> give me one second to undo to the previous state
[08:35:39] <doener> dbaupp: missing for
[08:35:54] <dbaupp> doener: I know... but that's what mihneadb said work
[08:36:03] <dbaupp> -ed
[08:36:07] <doener> oh, missed that
[08:36:14] <mihneadb> dbaupp: yes, I was wrong. Didn't 'undo' far enough
[08:36:17] <mihneadb> only works with for
[08:36:19] <dbaupp> haha :)
[08:36:22] * doener was too busy talking about version numbers
[08:36:24] <mihneadb> it's late here
[08:36:32] <mihneadb> still
[08:36:37] <mihneadb> should I use  for or not?
[08:36:46] <dbaupp> yes! for makes your life much easier
[08:37:07] <dbaupp> without for, it'd be `10.times(|| { println("yo"); true })`
[08:37:12] <mihneadb> ok
[08:37:13] <mihneadb> thanks
[08:37:21] <mihneadb> and.. I saw in this tutorial int::range
[08:37:27] <mihneadb> did that get removed as well?
[08:37:29] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[08:37:29] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/ozWKAQ
[08:37:29] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[08:37:37] <mihneadb> or do I have to import int?
[08:37:41] <dbaupp> (and for actually does some magic to make break and return work "properly")
[08:37:43] <dbaupp> the latter
[08:37:57] <mihneadb> ok
[08:37:59] <mihneadb> ty
[08:38:07] <dbaupp> the tutorial doesn't list enough imports
[08:38:15] * dbaupp has opened an issue about that
[08:38:24] <mihneadb> ++ :)
[08:40:24] *** Quits: ross (ross@moz-3DDBA997.br.br.cox.net) (Quit: )
[08:40:29] *** Quits: dwhyte (dwhyte@1922756A.EDC594B0.7BF4A4B0.IP) (Ping timeout)
[08:40:30] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[08:40:30] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/7HwrAw
[08:40:30] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[08:40:31] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[08:40:31] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/7mUKBA
[08:40:31] <ghrust> 13rust/06auto 149f3fbc0 15Jeff Olson: std: add RtioTimer and UvTimer impl atop rt::uv
[08:40:31] <ghrust> 13rust/06auto 14cc29be8 15Jeff Olson: std: add rt::io::Timer
[08:40:31] <ghrust> 13rust/06auto 1439ddb21 15Jeff Olson: std: minor timer cleanup based on feedback
[08:40:32] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[08:40:41] <mihneadb> so.. module int definitely exists
[08:40:42] <mihneadb> http://static.rust-lang.org/doc/0.7/std/int.html
[08:40:48] <mihneadb> how do I include it?
[08:40:53] <dbaupp> `use std::int;`
[08:40:55] <mihneadb> tried various combinations of extern mod and use
[08:41:03] <mihneadb> aha
[08:41:15] <mihneadb> extern mod is only for crates then?
[08:41:15] <dbaupp> shouldn't need an extern mod: std is imported by default in every program.
[08:41:24] <mihneadb> oh
[08:41:30] <mihneadb> I guess I need to switch from the tutorial to the docs
[08:41:31] <dbaupp> yes (std is a crate, but ^.)
[08:41:41] <dbaupp> which tutorial?
[08:41:51] <mihneadb> I did rust the rust-lang one
[08:41:54] <dbaupp> http://static.rust-lang.org/doc/tutorial.html ?
[08:42:07] <mihneadb> now I was trying to follow http://www.rustforrubyists.com/book/book.html, seemed nice
[08:42:21] <mihneadb> I did follow that one yes. but all in one go
[08:42:22] <dbaupp> yeah, it is, but not updated to 0.7 yet.
[08:42:25] * dbaupp pokes cmr
[08:42:26] <mihneadb> I noticed
[08:43:00] <dbaupp> in any case, the docs aren't great... the best tutorial is #rust.
[08:43:16] <dbaupp> and you've already found us :)
[08:43:55] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[08:44:03] <doener> hm, looking for "meatdata" in the llvm docs wasn't very successful :)
[08:44:32] <mihneadb> dbaupp: rather not bug people with trivial stuff.. but I guess I'll have to
[08:44:40] <mihneadb> so.. range is not mentioned in here - http://static.rust-lang.org/doc/0.7/std/int.html
[08:44:47] <mihneadb> I guess next step is to check the code?
[08:44:52] <dbaupp> don't worry... most of us are waiting for rust to build/test ;P
[08:44:58] <mihneadb> haha
[08:45:34] <dbaupp> mihneadb: yeah, most of the methods for int/i8/i16/ ... /uint/u8/ ... are generated by a macro, and the current documentation generator doesn't handle them
[08:45:40] <mihneadb> ok
[08:45:48] <mihneadb> one more thing, about the compiler/verifier
[08:45:48] <mihneadb> http://pastebin.mozilla.org/2672325
[08:45:49] <mihneadb> so
[08:45:54] <mihneadb> if it doesn't know who range is
[08:46:07] <mihneadb> how can it say that it doesn't implement iter?
[08:46:13] <mihneadb> and why does it think it's a bool
[08:46:16] *** Quits: km (quassel@FDBAF0A0.DBF71E41.29C67456.IP) (Ping timeout)
[08:46:29] *** Joins: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP)
[08:46:29] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 146ae889b to 14c4b6216: 02http://git.io/N3iJvQ
[08:46:29] *** Parts: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP) ()
[08:46:30] *** Joins: ghrust (ghrust@C621748.6A2AE50.F3114085.IP)
[08:46:30] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/eZYabg
[08:46:30] <ghrust> 13rust/06auto 149034533 15Tim Chevalier: testsuite: xfailed test cases
[08:46:30] <ghrust> 13rust/06auto 145463484 15Tim Chevalier: rustc: Remove redundant code from resolve, as per XXX comments
[08:46:30] <ghrust> 13rust/06auto 14599d107 15bors: auto merge of #7917 : catamorphism/rust/resolve-and-testcases, r=catamorphism
[08:46:32] *** Parts: ghrust (ghrust@C621748.6A2AE50.F3114085.IP) ()
[08:46:38] <dbaupp> mihneadb: https://github.com/mozilla/rust/blob/master/src/libstd/num/int_macros.rs#L130
[08:46:51] *** Joins: mmmik (mmmik@moz-46A32F00.retail.telecomitalia.it)
[08:46:56] *** Parts: mmmik (mmmik@moz-46A32F00.retail.telecomitalia.it) ()
[08:46:58] *** Joins: km (quassel@FDBAF0A0.DBF71E41.29C67456.IP)
[08:47:10] <dbaupp> range is an "internal iterator", i.e it is passed a closure directly, so you just do `for int::range(0, 10) |i| { ... }`
[08:47:18] <dbaupp> doener: haha
[08:47:29] <mihneadb> dbaupp: and I assume that's new since 0.7
[08:47:34] <doener> mihneadb: and range returns "bool", thus the second error
[08:47:56] * dbaupp almost sed'd meta_item to MeatItem a few days ago
[08:47:59] <mihneadb> oh wait
[08:48:00] <doener> mihneadb: no, iter() is new, range is still old school
[08:48:01] <mihneadb> it knew who range was
[08:48:08] <mihneadb> just didn't agree on the number of args
[08:48:27] <mihneadb> this syntax sugar is confusing me, because in the source, it takes 3 params
[08:48:34] <mihneadb> and rustc says the same thing
[08:49:09] <mihneadb> but `for int::range(0, 10) |i| { ... }` looks like .. two params + one closure that I don't know how makes it inside range
[08:49:21] <mihneadb> I mean, how it ends up as a param to range
[08:49:25] <mihneadb> I guess it's for magic
[08:49:32] *** Joins: mib_fznbm1 (Mibbit@moz-849739D9.cpe.teksavvy.com)
[08:49:33] <dbaupp> right, `for` is essentially `for f(a,b) |x| { ... }` => `f(a,b, |x| { ... })` + making the closure return bool
[08:49:50] <mihneadb> ok, great
[08:49:51] <mihneadb> thanks :)
[08:50:03] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[08:50:06] <dbaupp> (`do f(a,b) |x| {...}` is literally just `f(a,b,|x| {...})` with no magic other than that, fwiw.)
[08:50:39] <mihneadb> ok
[08:50:51] <mihneadb> easy enough
[08:51:15] <mihneadb> I'll go get some sleep, I'm sure it's the main reason for my confusion. thanks for your help, I'll pop back in some other time
[08:51:41] <mihneadb> bye
[08:51:44] *** Quits: mihneadb (mihneadb@moz-329F29A3.lightspeed.sntcca.sbcglobal.net) (Quit: Leaving)
[08:52:33] *** Joins: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP)
[08:52:33] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/WW7_ZQ
[08:52:33] <ghrust> 13rust/06auto 1451649b7 15Andreas Martens: smallint{map,set}: replace iterators with DoubleEndedIterator...
[08:52:33] <ghrust> 13rust/06auto 14f88dd55 15bors: auto merge of #7921 : bytewiseand/rust/smallint-iter, r=huonw...
[08:52:33] *** Parts: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP) ()
[08:57:34] <dbaupp> http://buildbot.rust-lang.org/builders/auto-mac-all-opt/builds/495/steps/configure/logs/stdio ?
[08:58:02] *** Joins: heftig (heftig@1103CD12.9A77AED9.3663C14F.IP)
[08:58:16] <doener> :-/
[08:58:29] *** Joins: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP)
[08:58:29] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14f88dd55 to 14c4b6216: 02http://git.io/N3iJvQ
[08:58:29] *** Parts: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP) ()
[08:58:31] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[08:58:31] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/E2IMfg
[08:58:31] <ghrust> 13rust/06auto 140bba8f4 15Alex Crichton: Add tests for issues which can be closed...
[08:58:31] <ghrust> 13rust/06auto 147f44189 15bors: auto merge of #7923 : alexcrichton/rust/add-tests, r=graydon...
[08:58:32] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[08:58:39] <doener> dbaupp: http://buildbot.rust-lang.org/builders/auto-mac-all-opt/builds/493/steps/configure/logs/stdio -- guess that did it
[08:58:57] <dbaupp> ah, good detective work
[08:59:04] * dbaupp opens an issue
[08:59:59] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[09:01:31] *** Quits: heftig (heftig@1103CD12.9A77AED9.3663C14F.IP) (Quit: Quitting)
[09:01:47] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[09:04:30] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[09:04:30] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 147f44189 to 14c4b6216: 02http://git.io/N3iJvQ
[09:04:30] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[09:04:31] *** Joins: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP)
[09:04:31] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/YfqBdw
[09:04:31] <ghrust> 13rust/06auto 14c062510 15Alex Crichton: Allow linking against crates with #[no_std]...
[09:04:31] <ghrust> 13rust/06auto 14657ccba 15bors: auto merge of #7924 : alexcrichton/rust/opt-lang-xcrate2, r=thestinger...
[09:04:31] *** Parts: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP) ()
[09:04:50] * dbaupp sighs
[09:05:12] <dbaupp> now bors is just going to run through the entire queue and everything will fail in a minute or two. :(
[09:08:32] *** Joins: Blub\w (wry@moz-14AA1AE.vps.tuwien.ac.at)
[09:09:52] <aatch> Urgh
[09:09:55] <aatch> that's bad.
[09:10:30] *** Joins: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP)
[09:10:30] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14657ccba to 14c4b6216: 02http://git.io/N3iJvQ
[09:10:30] *** Parts: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP) ()
[09:10:32] *** Joins: ghrust (ghrust@C621748.6A2AE50.F3114085.IP)
[09:10:32] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/6adBaw
[09:10:32] <ghrust> 13rust/06auto 143509f9d 15blake2-ppc: str: Implement Container for ~str, @str and Mutable for ~str...
[09:10:32] <ghrust> 13rust/06auto 142cac720 15bors: auto merge of #7932 : blake2-ppc/rust/str-clear, r=huonw...
[09:10:32] *** Parts: ghrust (ghrust@C621748.6A2AE50.F3114085.IP) ()
[09:16:03] *** Joins: true_droid (Adium@moz-123FD9B8.beck.volia.net)
[09:16:30] *** Joins: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP)
[09:16:30] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 142cac720 to 14c4b6216: 02http://git.io/N3iJvQ
[09:16:30] *** Parts: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP) ()
[09:19:15] *** Quits: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au) (Quit: gavinb)
[09:21:48] *** Joins: nano (nano@moz-972880B.superkabel.de)
[09:22:30] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[09:22:30] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 147fcb1d8 to 14c4b6216: 02http://git.io/N3iJvQ
[09:22:31] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[09:22:31] *** Joins: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP)
[09:22:31] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/H2DVng
[09:22:31] <ghrust> 13rust/06auto 1485387e1 15Jyun-Yan You: syntax: print visibilities of foreign items
[09:22:31] <ghrust> 13rust/06auto 14970018e 15bors: auto merge of #7938 : crabtw/rust/foreign-vis, r=huonw
[09:22:32] *** Parts: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP) ()
[09:23:17] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Connection reset by peer)
[09:25:24] *** Quits: sawrubh (uid6719@moz-5F4AA75A.irccloud.com) (Quit: Connection closed for inactivity)
[09:27:29] <aatch> Woo, I'm getting close to having a decent setup for using cgroups to run benchmarks.
[09:27:35] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[09:27:43] <aatch> In pure Rust
[09:28:01] <aatch> Well, not counting libcgroup
[09:30:36] *** Joins: igl (igl@moz-1DC83BEA.adsl.alicedsl.de)
[09:31:52] *** Quits: mib_fznbm1 (Mibbit@moz-849739D9.cpe.teksavvy.com) (Quit: http://www.mibbit.com ajax IRC Client)
[09:35:54] *** Joins: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com)
[09:44:56] *** Joins: Earnestly (earnest@2AB30F53.FB5005.2BCC804A.IP)
[09:46:08] *** Quits: km (quassel@FDBAF0A0.DBF71E41.29C67456.IP) (Ping timeout)
[09:52:27] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Connection reset by peer)
[09:56:02] *** Joins: km (quassel@FDBAF0A0.DBF71E41.29C67456.IP)
[10:03:22] <dbaupp> aatch: \o/
[10:03:42] <aatch> Though libcgroup seems to be resisting
[10:04:07] <dbaupp> Do you need libcgroup? I think it's just folders and text files, right?
[10:05:04] *** Quits: nano (nano@moz-972880B.superkabel.de) (Connection reset by peer)
[10:06:06] <aatch> dbaupp, yeah, but libcgroup abstracts that all out.
[10:06:35] *** Quits: km (quassel@FDBAF0A0.DBF71E41.29C67456.IP) (Ping timeout)
[10:07:17] *** Quits: barosl (barosl@E287D94F.C81E10FB.7544CABF.IP) (Quit: ÎûúÎç§ÏùÄ Ïá†Ìá¥ÌñàÏäµÎãàÎã§.)
[10:07:58] *** Joins: km (quassel@FDBAF0A0.DBF71E41.29C67456.IP)
[10:17:42] <aatch> Bah! Looks like libcgroups won't work, as far as I can tell it caches most of the information.
[10:18:34] *** Quits: true_droid (Adium@moz-123FD9B8.beck.volia.net) (Ping timeout)
[10:18:51] *** Quits: doy (doy@moz-5FE28A32.akrasiac.org) (Ping timeout)
[10:19:54] *** Joins: doy (doy@moz-5FE28A32.akrasiac.org)
[10:22:08] *** Quits: lerc (quassel@moz-598ED764.telstraclear.net) (Quit: No Ping reply in 180 seconds.)
[10:22:48] *** Joins: lerc (quassel@moz-598ED764.telstraclear.net)
[10:31:49] *** Quits: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net) (Ping timeout)
[10:33:20] <dbaupp> aatch: ah, I see
[10:33:50] <aatch> dbaupp, oh well. I'
[10:34:01] <dbaupp> bors' queue is empty :'(
[10:34:24] <aatch> I'm also doing this runtime-less, so I'm implementing a lot of syscalls myself.
[10:35:48] <dbaupp> yeah
[10:35:59] <dbaupp> annoying
[10:36:09] <dbaupp> (it's neat that `zero.rs` is now an empty file.)
[10:36:17] <dbaupp> *can be
[10:36:40] <aatch> dbaupp, I'm doing it for the hell of it to some extent.
[10:36:55] <aatch> Since using cgroups locks me to linux to start with.
[10:37:39] <doener> meh, reworking build.rs to allow for using the LLVM IR builder at a lower level (inserting at other places than just at the end of the block) is quite a bit of work
[10:38:24] <dbaupp> aatch: yeah, that's why I stole your syscall snippet and wrote a malloc :D
[10:38:28] <dbaupp> *a shitty malloc
[10:39:24] <aatch> dbaupp, yeah, unfortunately I needed syscall4 too, so had to look up where the 4th argument had to go.
[10:39:41] <aatch> What's annoying is that it's _almost_ the C abi, but not quite.
[10:40:21] <dbaupp> aatch: haha, I had to have 6 for mmap... and I got all the arguments in the wrong order
[10:40:26] * dbaupp spent an hour debugging that
[10:40:30] *** Joins: true_droid (Adium@moz-123FD9B8.beck.volia.net)
[10:40:59] <aatch> dbaupp, yeah. I just kept getting "Invalid Argument", because the 4th arg was in rcx instead of r10
[10:41:03] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[10:41:21] <aatch> (because that's where it would go for x86 C ABI)
[10:42:15] <doomlord> rust puts some arguements in different registers compaed to C? the 'stack shim's' deal with that?
[10:43:05] <aatch> doomlord, not rust, the linux syscall ABI
[10:43:55] <dbaupp> aatch: I ended up putting half of the args in the registers for the x86 syscalls, and half in those for x64 syscalls... unsurprisingly, it didn't work.
[10:44:14] <dbaupp> (but it also didn't give me a useful error message.)
[10:44:15] <aatch> lol.
[10:45:31] <dbaupp> doener: the end result is going to be worth it, right?
[10:45:38] <doomlord> ahh. ok. the perils of dropping into a conversation halfway
[10:45:58] <doener> dbaupp: I hope so.
[10:46:30] <doener> dbaupp: or rather, I already have the result I actually want, it's just ugly
[10:47:25] <doener> dbaupp: I copied clang's trick to handle allocas. Instead of having a dedicated block, it keeps a "marker" intruction and inserts all allocas before that.
[10:48:06] <dbaupp> doener: ah, neat, so we don't get a proliferation of blocks with allocas for each local?
[10:48:20] <doener> dbaupp: but with the building blocks, we can only insert at the end of a block, so to insert before that marker, I had to duplicate a bit of code
[10:48:29] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[10:48:42] <doener> dbaupp: we only had a single block for all allocas in a function.
[10:48:53] <doener> dbaupp: but that still means a jump for every function that needs stack space
[10:49:35] <dbaupp> oh, and this make the IR look bad
[10:49:44] *** Quits: true_droid (Adium@moz-123FD9B8.beck.volia.net) (Quit: Leaving.)
[10:49:50] <doener> dbaupp: removing that makes unoptimized code a bit faster. About 8-9% on my box when building librustc.
[10:50:01] <dbaupp> awesome!
[10:50:07] <doener> dbaupp: well, together with the two small other improvements I have on that branch
[10:50:11] *** Joins: jaen (jaen@moz-36261275.internetdsl.tpnet.pl)
[10:50:20] <dbaupp> that's pretty cool.
[10:51:25] <doener> actually, our unoptimized IR is now now/then good enough that with a new snapshot, unoptimized bootstrapping should be faster that optimized
[10:51:55] <dbaupp> nice!
[10:52:06] <doener> unoptimized stage1 librustc takes a bit more than 3 minutes here, stage2 is down to less than 2 minutes
[10:52:33] <kertap> Hi, In fn each_split<'a>(s: &'a str, sepfn: &fn(char) -> bool, it: &fn(&'a str) -> bool), what does 'a mean?
[10:52:51] <aatch> kertap, it's a named lifetime
[10:52:51] *** Quits: jaen (jaen@moz-36261275.internetdsl.tpnet.pl) (Ping timeout)
[10:52:53] <dbaupp> kertap: it's a named lifetime
[10:52:59] <dbaupp> (haha)
[10:53:11] <dbaupp> kertap: http://static.rust-lang.org/doc/tutorial-borrowed-ptr.html
[10:53:20] <aatch> dbaupp, looks like we're starting to converge on names for these things.
[10:53:39] <kertap> cool, thanks! it was hard to search for :)
[10:53:41] <dbaupp> kertap: it basically says that the string passed to `it` lasts for the same length of time as `s`
[10:54:09] <dbaupp> (i.e. in this case, it's a slice into the same memory as `s`)
[10:54:18] <dbaupp> aatch: yup
[11:04:29] *** Quits: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com) (Ping timeout)
[11:05:36] *** Quits: igl (igl@moz-1DC83BEA.adsl.alicedsl.de) (Ping timeout)
[11:06:16] *** Joins: igl (igl@moz-B3821D62.adsl.alicedsl.de)
[11:07:34] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[11:09:53] *** Joins: mye (mye@moz-2CE1EA42.dip0.t-ipconnect.de)
[11:17:39] *** Quits: mye (mye@moz-2CE1EA42.dip0.t-ipconnect.de) (Quit: mye)
[11:22:42] <cmr> dbaupp: pong!
[11:23:00] <dbaupp> cmr: the poke?
[11:23:05] <cmr> aatch: pong
[11:23:14] <aatch> cmr, yello
[11:23:16] <dbaupp> cmr: people keep asking about .each from rust-for-rubyists ;)
[11:23:40] <cmr> dbaupp: I already sent the update to steve :p
[11:23:47] <cmr> aatch: sorry for the python 2/3 craziness :(
[11:23:51] <dbaupp> cmr: awesome :D
[11:23:53] <cmr> I think it can all be python3 now
[11:24:12] <cmr> THe only thing python2 was needed for was matplotlib, and that doesn't need to be run to just do benchmarks
[11:24:45] <cmr> And python3 is needed for high resolution timer
[11:24:56] <aatch> cmr, heh. I'm having fun building a rust benchmarker atm. If only because it gives me an excuse to write some ridiculous code.
[11:25:36] * dbaupp loves ridiculous code
[11:26:09] <aatch> I don't really need to use direct syscalls for most of this stuff.
[11:26:22] * dbaupp thinks you do
[11:26:41] <cmr> Did I miss anything too important the past two days?
[11:26:41] <aatch> But I am, because, fuck it, this doesn't need to work particularly widely.
[11:26:57] <cmr> aatch: ooh you're rewriting it in rust!
[11:26:59] <dbaupp> (anything else would have an unacceptible overhead.)
[11:27:00] <cmr> that is exciting
[11:27:08] *** Joins: nano (nano@moz-972880B.superkabel.de)
[11:27:16] <dbaupp> cmr: depends what you mean by important...
[11:27:19] *** Joins: Sindwiller (quassel@moz-743130B2.dynamic.hispeed.ch)
[11:27:24] <dbaupp> cmr: bors' queue is empty
[11:27:37] * dbaupp doesn't bother telling cmr the reason
[11:27:49] * cmr stares at the huge list of reds
[11:28:16] * dbaupp should've thought of this hole in his cunning plan
[11:28:19] <aatch> cmr, yeah. With some changes to see if I can increase the accuracy of, everything.
[11:29:23] <dbaupp> aatch: shelling out to rustc, or calling it by the library?
[11:29:34] *** Quits: nano (nano@moz-972880B.superkabel.de) (Connection reset by peer)
[11:30:01] <cmr> You need to shell out.
[11:30:04] *** Quits: Blub\w (wry@moz-14AA1AE.vps.tuwien.ac.at) (Quit: bbs)
[11:30:08] <cmr> Or at least, run it in a new process.
[11:30:14] *** Joins: nano (nano@moz-972880B.superkabel.de)
[11:30:17] <aatch> cmr, technically you just need to fork
[11:30:18] <cmr> Otherwise the memory accounting information will be stored in-process
[11:30:24] <cmr> And it gets *huge*
[11:30:25] <cmr> Really huge
[11:30:41] <cmr> Probably a  lot smaller than my crappy python script :p
[11:31:01] <dbaupp> true, and tasks != threads would probably interfere with time measurements
[11:31:57] <aatch> dbaupp, would you be able to deal with csv data instead of JSON data?
[11:32:10] <dbaupp> aatch: it's less nice... but I guess?
[11:32:41] <aatch> Since I can then just output stat lines and don't need to hold the stats in memory
[11:32:42] <dbaupp> aatch: (you can use a struct with the format you want, derive {En,De}codable, use extra::json.)
[11:32:49] <dbaupp> oh
[11:32:57] <dbaupp> is it that much of a problem?
[11:33:06] <dbaupp> how big do they get?
[11:33:13] <cmr> aatch: it might not be best to stream output to a file
[11:33:30] <cmr> I dunno though
[11:33:35] <dbaupp> aatch: (it should be ~20MB at most, right?)
[11:33:35] <cmr> might affect the benchmark, might not
[11:33:54] <cmr> dbaupp: the in-memory state of my python script grew to about a gig for the librustc benchmarks..
[11:33:55] <aatch> cmr, why not? it's a separate process.
[11:34:08] <cmr> although that was a slow, ~7 minute build
[11:34:17] <cmr> I didn't merge adjacent measurements until after
[11:34:17] <dbaupp> cmr: woah... do you perform any stripping before output?
[11:34:23] <cmr> dbaupp: yes
[11:34:27] <dbaupp> cmr: (also, python has refcount etc overheads.)
[11:34:36] <cmr> I store *everything* that I get from the cgroup
[11:34:37] <dbaupp> cmr: ones that are identical?
[11:34:54] <cmr> dbaupp: yeah, I merge adjacent duplicates
[11:35:28] <aatch> And you can use the cpuacct stuff to get CPU time.
[11:35:38] <cmr> aatch: right, that's what it used now
[11:35:44] <cmr> so it's probably nbd
[11:35:46] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[11:35:50] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[11:36:58] <dbaupp> cmr: presumably the merging could be done on the fly?
[11:37:05] <cmr> dbaupp: yes, easily
[11:37:12] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[11:37:20] <cmr> iff you parse the stat file on the fly
[11:37:25] <cmr> (I don't, it's way too slow in python)
[11:37:31] <cmr> In Rust it'd be fine though
[11:38:28] *** Quits: nano (nano@moz-972880B.superkabel.de) (Connection reset by peer)
[11:38:51] <cmr> http://www.grobmeier.de/log4j-2-performance-close-to-insane-20072013.html#.Ueu7N01MPgh
[11:39:20] <cmr> That's an interesting read for a number of reasons, but to me the most interesting thing is seeing the culture of this java programmer
[11:39:39] <cmr> "I had assumed that the well-known libraries would be fast, because, well‚Ä¶ To be honest, I had just assumed"
[11:41:20] <jensnockert> Well, in most cases you don't really care about performance.
[11:41:24] <vladimir-lu> cmr: yeah, that struck me as odd
[11:41:49] <vladimir-lu> jensnockert: but that's no excuse not to know how your library works
[11:41:54] <vladimir-lu> *that you use
[11:42:07] <cmr> jensnockert: even so, I wouldn't expect the prevailing notion to be "It's popular and widely used, it *must* be fast"
[11:42:11] <doener> jensnockert: it's one thing not to care. It's another thing to just assume that everything's "perfect"
[11:42:23] <dbaupp> vladimir-lu: knowing the inner workings of every library that you use is a big burden
[11:42:58] <vladimir-lu> cmr: yeah, try assuming that in python :P
[11:43:21] <vladimir-lu> dbaupp: i agree - but at least you can can read that in the javadocs or something what the main approach/algorithms are
[11:43:58] <doener> I'm fine with "I don't know, I'll look it up when I have to", less so with "everybody's using it, must be good"
[11:44:06] <cmr> agree
[11:44:12] <vladimir-lu> mm
[11:44:21] <jensnockert> vladimir-lu: Yeah, when I code Python I just assume all libraries are shit, and I only get disappointed rarely.
[11:44:29] <vladimir-lu> jensnockert: teeehee
[11:44:30] <aatch> I assume everything is slow and terrible until proven wrong.
[11:44:31] <cmr> heheh
[11:44:33] *** Quits: z0w0 (zack@moz-E12708D5.lns6.woo.bigpond.net.au) (Client exited)
[11:44:34] * jensnockert kicks this damn WAV parser that Python thinks is useful.
[11:44:45] <cmr> jensnockert: the one in the stdlib?
[11:44:50] <jensnockert> cmr: Yeah.
[11:44:57] <cmr> Yeah the audio stuff is pretty awful
[11:45:06] <cmr> ...along with a large portion of the rest of the stdlib
[11:45:08] <cmr> but especially that :p
[11:45:18] <jensnockert> Not caring about endian is somehow forgivable, but wtf doesn't actually check the sample size?!!?
[11:45:18] <dbaupp> doesn't scipy/numpy have a wav parser too?
[11:45:26] <Crnobog> Anyone here hacking rust on windows?
[11:45:30] <jensnockert> dbaupp: Yeah, but it is also broken beyond repair.
[11:45:41] *** Joins: Nefzaoui (chatzilla@BB4F14E.ED9AB01B.80E43DAF.IP)
[11:45:53] <dbaupp> jensnockert: oh, haha, I guess I just had "normal" wav files when I used it.
[11:46:05] <Crnobog> I'm getting some odd failures with make check because the test framework is providing a PATH without the aux directory to tests that use aux crates
[11:46:15] <Crnobog> So Windows can't find the dll it needs
[11:46:34] <dbaupp> Crnobog: I think the "windows" test runner is `make check-fast`
[11:46:42] <dbaupp> Crnobog: so anything else is probably broken
[11:46:47] <jensnockert> dbaupp: I thought I had 'normal' WAV files, but apparently not‚Ä¶
[11:47:02] <jensnockert> dbaupp: It only parses 8-bit samples correctly.
[11:47:06] * dbaupp wins at normal WAV files
[11:47:07] <dbaupp> ;P
[11:47:16] <dbaupp> jensnockert: yeah, I guess mine were that
[11:47:23] <jensnockert> dbaupp: I doubt it‚Ä¶
[11:47:29] <dbaupp> Crnobog: https://github.com/mozilla/rust/wiki/Note-testsuite#fast-check
[11:47:34] <jensnockert> dbaupp: No one ever produced 8-bit WAV files.
[11:47:56] * dbaupp doesn't understand, because the thing works
[11:48:03] <jensnockert> Are you sure?
[11:48:13] <dbaupp> well, pretty sure
[11:48:14] <jensnockert> Isn't it just that you parse the samples yourself?
[11:48:25] <dbaupp> what do you mean?
[11:48:33] <Crnobog> dbaupp: Yes, but that shouldn't give different results to make check right, it should just be faster
[11:48:42] <jensnockert> dbaupp: It returns an array of 1-byte values.
[11:48:54] <Crnobog> I ran the fast version and it didn't even run the test that's failing
[11:49:00] <jensnockert> Haha, lol, it does not, sorry, it returns a string.
[11:49:10] <Crnobog> But I can run the executable that's failing if I construct the path properly manually
[11:49:13] <dbaupp> Crnobog: no, it only tests a subset of the tests, so a pile of them are likely (and actually, it seems) broken
[11:49:27] <dbaupp> jensnockert: I was using the scipy parser
[11:49:34] <dbaupp> (are you talking about that one?)
[11:49:48] <jensnockert> dbaupp: No, the one in Python, the one in SciPy is a lot less broken.
[11:50:05] <dbaupp> yeah, well, there we go :P
[11:50:15] * dbaupp wins at using a less-broken WAV reader
[11:50:29] <Crnobog> dbaupp: Ok, so there aren't build machines/many developers running the tests on windows often I guess
[11:50:33] <jensnockert> Still, Python's standard library should get a price for highest count of totally useless modules.
[11:50:45] <dbaupp> Crnobog: not the full test suite... it's way too slow
[11:50:49] <dbaupp> (apparently)
[11:51:10] <dbaupp> Crnobog: and yeah, most of the devs are on linux/mac (all of the core ones, I think)
[11:51:32] <dbaupp> Crnobog: windows is required part of Rust, but there's a pile of other things that are getting fixed first
[11:52:24] <dbaupp> (possibly because fixing windows properly requires deep windows knowledge and (probably) deep Rust knowledge, and I don't think many people have both.)
[11:52:28] *** Quits: sigma (sigma@CB3F6051.C886FCFF.DF0EE696.IP) (Quit: Leaving.)
[11:53:10] <Crnobog> Fair enough
[11:53:36] <Crnobog> I wanted to look into the current state of Rust on Windows and see if I could contribute at all, but that might be wishful thinking
[11:53:48] <cmr> Crnobog: no, there's definitely places to contribute!
[11:53:58] <dbaupp> Crnobog: yes please! :)
[11:54:02] <cmr> `make check` should definitely be fixed.
[11:54:16] <cmr> Even if it's slow, it shouldn't be broken
[11:54:43] <dbaupp> Crnobog: for windows support, I'm sure there are a *lot* of long hanging fruit. (It's the full "properly" bit that will be hard.)
[11:55:04] <Crnobog> Ok, maybe I'll keep plugging away at compiletest for a bit then
[11:55:10] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[11:55:16] <dbaupp> and there's lots of non-windows-specific/non-testsuite things to do too. :)
[11:55:25] <Crnobog> there are some #[cfg(target_os = "win32")] directives that look a bit odd
[11:55:45] <dbaupp> in compiletest?
[11:56:07] <Crnobog> I'm also trying to run everything on a linux vm to compare against, but for some reason running make check twice seems to do almost nothing the second time
[11:56:16] <cmr> Windows is a bit off the beaten path atm
[11:56:22] <Crnobog> I don't know if it's trying to be clever and only run tests that have changed
[11:56:28] <cmr> Exactly
[11:56:57] <Crnobog> I had a look at the makefile and couldn't find a way to force tests to re-run, is there one?
[11:57:10] <Crnobog> dbaupp: Yes, in the code for running the commands
[11:57:15] <cmr> I don't think so, unfortunately
[11:57:22] <cmr> there's make -B but that would rebuild everything
[11:57:31] <Crnobog> hm
[11:57:36] <cmr> You could do a make VERBOSE=1 and copy the lines it is using for tests
[11:57:47] <Crnobog> I guess since I know the test I'm trying to run I could touch the .rs file for that test
[11:57:55] <cmr> that'd do it too
[11:58:40] <dbaupp> Crnobog: (also, the people you should probably be talking to about this area, are graydon about compiletest and "Thad Guidry" about windows support in general (not sure his irc handle))
[11:59:35] <dbaupp> (as far as I can tell/remember, Thad is single-handledly pushing Rust's windows support at the moment.)
[12:00:30] <smvv> cmr: there's also -W <filename> to ignore the fact that the target file is newer than its prerequisites
[12:00:31] <Crnobog> Ok, thanks
[12:00:53] <Crnobog> Are they both at mozilla?
[12:01:10] <aatch> Crnobog, Graydon is project lead
[12:01:17] <aatch> I don't know about Thad
[12:01:20] <dbaupp> Crnobog: graydon is (he's the creator/genius), don't know about thad
[12:01:25] <aatch> But Rust is Graydon's baby
[12:01:49] <aatch> Oh, and Thad's IRC handle is Thad
[12:01:51] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[12:02:10] <Crnobog> Yeah I'd picked up that Graydon was from github/mailing lists
[12:03:37] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[12:07:23] *** Joins: mye (mye@moz-2CE1EA42.dip0.t-ipconnect.de)
[12:08:15] *** Quits: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com) (Input/output error)
[12:08:29] *** Joins: LU324 (stuff@moz-A17E9A7B.dyn.embarqhsd.net)
[12:23:02] *** Joins: Archer (Archer@moz-D28C17E1.bb.online.no)
[12:25:28] <bjz> aatch: the correct title is 'Benevolent Dictator for Life'
[12:25:31] <bjz> x)
[12:29:00] *** Joins: jaen (jaen@moz-36261275.internetdsl.tpnet.pl)
[12:30:07] <aatch> Ok, I can now fork and exec a new process. Now I just need to get cgroup support up.
[12:32:23] <cmr> And privilege deescalation :p
[12:32:49] *** Quits: jaen (jaen@moz-36261275.internetdsl.tpnet.pl) (Ping timeout)
[12:33:07] <vladimir-lu> is rustdoc currently slow?
[12:33:17] <vladimir-lu> (not your poc cmr but the official one)
[12:33:18] <cmr> vladimir-lu: slow, broken, obsolete
[12:33:24] <cmr> take your pick of adjectives
[12:33:40] <vladimir-lu> ok, so i should update my rust copy so i can build rustdoc_ng
[12:33:42] <aatch> http://guardianlv.com/2013/07/severe-earthquake-strikes-australia/ goddammit
[12:33:49] <cmr> rustdoc_ng doesn't generate docs atm
[12:34:05] <vladimir-lu> oh
[12:34:32] <aatch> Seddon is, in this case, a tiny town at the top of the south island.
[12:34:34] <dbaupp> aatch: seddon, vic exists... so they're not that wrong
[12:34:48] <dbaupp> and NZ and Aus are pretty much the same, right?
[12:34:48] <aatch> dbaupp, I figured that much
[12:35:08] <aatch> dbaupp, do *you* want to be the same as New Zealanders?
[12:35:26] <dbaupp> well, no... but from an outsiders perspective?
[12:35:48] <dbaupp> also, "Napier, in Western Australia, 3,302 kilometers"
[12:36:08] <dbaupp> yay for journalists and the telephone game
[12:36:41] <dbaupp> bjz: you've been rocked by the severe earthquakes in melbourne, right? :P
[12:36:57] <bjz> eh, no
[12:37:11] <dbaupp> aatch: (are the aftershocks still around?)
[12:37:24] <aatch> dbaupp, yep, had one about 5 minutes ago
[12:37:25] <bjz> earthquake? australia
[12:37:32] <dbaupp> bjz: (for context, the article aatch links to ^)
[12:37:35] <engla> 6.5 is pretty big
[12:37:39] <bjz> australia has no earthquakes
[12:37:54] <bjz> oh
[12:37:55] <bjz> hehe
[12:37:59] <aatch> engla, yep, 6.5 flattened christchurch a couple years ago.
[12:38:04] <dbaupp> bjz: http://en.wikipedia.org/wiki/1989_Newcastle_earthquake ;P
[12:38:15] <engla> I remember that
[12:38:24] <bjz> wow
[12:38:26] *** Joins: MaikKlein2 (maik@moz-7F56FAD5.dip0.t-ipconnect.de)
[12:38:33] <bjz> dbaupp: I am wrong then
[12:38:54] <dbaupp> haha :)
[12:39:06] * dbaupp hasn't ever felt an earthquake here either
[12:39:13] *** Joins: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com)
[12:39:15] <bjz> dbaupp: but still, 5.6 aint nothing compared to 6.5
[12:39:22] <bjz> (richter is log)
[12:39:23] <dbaupp> yup
[12:39:34] <vladimir-lu> error: mismatched types: expected `extern "C" fn(*u8, u64, u64, *()) -> u64` but found `*u8` (expected extern fn but found *-ptr)
[12:39:48] <vladimir-lu> so i have a pub extern "C" fn ... 
[12:39:50] <vladimir-lu> in a module
[12:39:51] <bjz> I'm guessing our structures just weren't prepared for the newcastle quake
[12:39:55] <aatch> engla, though it's possible that the recent earthquakes here are actually stronger than the ones that hit christchurch.
[12:40:00] <dbaupp> bjz: yeah, definitely
[12:40:02] <aatch> bjz, seems likely
[12:40:15] <vladimir-lu> and i want to pass it to another function that takes the function type as an argument
[12:40:16] <dbaupp> vladimir-lu: extern "C" fn is a hack... it gets cast to *u8.
[12:40:34] <aatch> Christchurch was hurt so badly mostly because nobody thought that they could get earthquakes that big.
[12:40:37] <vladimir-lu> dbaupp: does it do anything other than that?
[12:40:39] <bjz> vladimir-lu: it is going to be fixed next week
[12:40:42] <dbaupp> vladimir-lu: so you have to cast it back if you want an actual extern "C" fn
[12:40:46] <bjz> vladimir-lu: ie. next month
[12:40:51] <dbaupp> bjz: next week?
[12:40:52] <dbaupp> oh
[12:40:53] <dbaupp> haha
[12:40:56] <bjz> vladimir-lu: ie. post 0.8
[12:41:02] <vladimir-lu> bjz: is there an issue?
[12:41:07] <vladimir-lu> (i can follow)
[12:41:34] <bjz> there is a dead pull: https://github.com/mozilla/rust/pull/6661
[12:41:42] <dbaupp> aatch: the Christchurch ones were very close to the city, weren't they?
[12:41:56] <dbaupp> (i.e. much closer than the ones today?)
[12:41:59] <aatch> dbaupp, the epicenter of the quakes was the town center
[12:42:02] <bjz> dbaupp: Is there an issue?
[12:42:34] <bjz> aatch: I'd been to the top of the curch tower that fell down :(
[12:42:37] <bjz> *church
[12:42:42] <dbaupp> bjz, vladimir-lu: https://github.com/mozilla/rust/search?q=extern+C+fn&state=open&type=Issues
[12:42:58] *** Quits: jclements (jclements@moz-98A7BA64.ngn.east.myfairpoint.net) (Quit: jclements)
[12:42:59] <dbaupp> (don't sure which/if any of those are the "correct" one)
[12:43:03] <aatch> But there have been people from christchurch saying that the big one here was as strong as the one in Chch
[12:43:49] <bjz> dbaupp, vladimir-lu: the first one looks good
[12:43:58] <dbaupp> aatch: Ah... the news tonight seemed to show that there wasn't that much damage? is wellington better prepared?
[12:44:07] <dbaupp> aatch: (at least, it didn't show much damage.)
[12:44:19] *** Quits: MaikKlein2 (maik@moz-7F56FAD5.dip0.t-ipconnect.de) (Ping timeout)
[12:44:29] <aatch> dbaupp, not too much damage from what I've heard
[12:44:41] *** Quits: Earnestly (earnest@2AB30F53.FB5005.2BCC804A.IP) (Ping timeout)
[12:44:54] <aatch> some damage round the port, power outages here and there.
[12:45:56] <aatch> Wellington is better prepared, but also just more resilient geologically. Most of Chch was reclaimed swampland, so liquefaction was one of the biggest causes of damage.
[12:46:36] <dbaupp> yeah, wellington's built into the mountains essentially (iirc?)
[12:46:38] <aatch> (Liquefaction is where the vibration from the quake turns the ground into, well, a liquid)
[12:46:47] <aatch> dbaupp, it's all hills here, yeah.
[12:47:00] <aatch> out by the airport is reclaimed though.
[12:47:06] <aatch> I haven't heard anything though.
[12:47:19] <dbaupp> aeroplanes turning into boats, maybe
[12:47:29] <dbaupp> land-boats ;P
[12:48:42] <aatch> Also, to put it in perspective, my parents, who live ~3 hours drive away, felt one of the earthquakes.
[12:49:06] *** Joins: vosen (vosen@moz-266BA656.icpnet.pl)
[12:49:42] <vladimir-lu> bjz: it's broken in a somewhat interesting way
[12:49:54] <vladimir-lu> it allows the type extern "C" fn ...
[12:50:04] <vladimir-lu> and complains if you pass it an extern "Rust" fn
[12:50:40] *** Joins: jclements (jclements@moz-98A7BA64.ngn.east.myfairpoint.net)
[12:53:01] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[13:00:40] <cmr> Give bors something to do: https://github.com/mozilla/rust/pull/7940
[13:00:56] <dbaupp> cmr: won't work
[13:01:04] <cmr> Oh he's entirely borked?
[13:01:08] <dbaupp> cmr: https://github.com/mozilla/rust/issues/7939
[13:01:26] <cmr> ouch
[13:01:26] <vladimir-lu> there should be a clean workspace option 
[13:01:59] <dbaupp> cmr: you could add a comment for `global`, since global paths actually don't come up that much
[13:02:06] <dbaupp> vladimir-lu: there probably is
[13:02:15] <cmr> dbaupp: I don't even know what a global path is
[13:02:17] <cmr> ::foo ?
[13:02:19] <dbaupp> cmr: yes
[13:02:44] <dbaupp> cmr: makes the in-code resolution act like `use` (i.e. from the top of the crate)
[13:03:15] <dbaupp> cmr: (just like `self::` makes use work like in-code resolution.)
[13:03:42] <cmr> What would rp be?
[13:03:43] <dbaupp> vladimir-lu: unfortunately I don't know what it is, and I'm pretty sure that everyone who does is currently asleep (unless aatch does?)
[13:03:54] <dbaupp> cmr: lifetime
[13:04:03] <dbaupp> cmr: "region pointer" I guess
[13:04:05] <cmr> Well I know what it *is* but what would it look like in a path?
[13:04:08] <cmr> (region parameter)
[13:04:12] <dbaupp> oh, Foo<'a>
[13:04:25] <cmr> Only one is allowed in a path?
[13:04:28] <aatch> There is no general "clean workspace" options.
[13:04:59] <aatch> As in this instance, it involves deleting a file that you almost never need to.
[13:05:13] <dbaupp> cmr: e.g. `mod bar { pub struct Foo<'self>(&'self str); } fn wrap<'a>(s: &'a str) -> bar::Foo::<'a>`
[13:05:29] <dbaupp> (well, bar::Foo<'a>, I guess.)
[13:05:36] <dbaupp> cmr: and yes, only one at the moment
[13:05:48] <dbaupp> cmr: having multiple is a required addition
[13:06:18] *** Joins: bheylin (brianheyli@C31C7C72.EEA9745F.C8EED064.IP)
[13:06:24] <vladimir-lu> woooo first segfault
[13:06:50] <vladimir-lu> dbaupp: well i just assume it's all done under one parent dir
[13:07:01] <vladimir-lu> build systems i've worked with generally have something to clean that out
[13:08:36] <doener> dbaupp: heh, your "if true" optimization was the only codepath in rustc that managed to trigger a bug in my changed
[13:08:41] <doener> s/changed/changes/
[13:08:45] <dbaupp> \o/
[13:08:58] <doener> good thing we have that :-)
[13:09:04] <dbaupp> doener: there was a single codepath in debuginfo.rs that triggered a bug in mine
[13:09:09] <dbaupp> just passing the karma on
[13:09:32] <dbaupp> (well, it wasn't really a bug in mine... I ended up solving my first legitimate trans bug.)
[13:09:41] *** Joins: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net)
[13:09:43] * dbaupp was irrationally happy
[13:09:51] <doener> :)
[13:09:55] <vladimir-lu> transmute called on types with different sizes: &[u8] (128 bits) to uint (64 bits)
[13:10:15] <vladimir-lu> i guess the size is different because it has a length?
[13:10:17] <doener> a slice is pointer + size
[13:10:23] <cmr> vladimir-lu: yes
[13:10:37] <doener> or maybe the other way around
[13:10:45] <dbaupp> doener: that's right
[13:10:54] <vladimir-lu> so i need to point it to the slice itself
[13:11:00] *** Joins: Earnestly (earnest@2AB30F53.FB5005.2BCC804A.IP)
[13:11:10] <dbaupp> vladimir-lu: what are you trying to do?
[13:11:32] * aatch is going to bed now that the world has stopped shaking (for the time being)
[13:11:42] <dbaupp> vladimir-lu: it's "safe" to transmute &[u8] -> &[uint]
[13:11:52] <dbaupp> aatch: g'night... don't fall out of bed ;P
[13:12:05] <aatch> length is stored in bytes, btw
[13:12:07] <dbaupp> vladimir-lu: (i.e. the lengths work properly)
[13:12:14] <vladimir-lu> hmnn
[13:12:31] <vladimir-lu> let me cook up a gist and i'll show you
[13:13:05] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[13:13:47] *** Quits: aatch (aatch@moz-2BB0AC01.cable.telstraclear.net) (Ping timeout)
[13:14:25] <doomlord> i've cut paste some code from rustdoc_ng, which seems to run the compiler... to find my way around I was going to try an dump the AST as s-expr ... does the "ast::crate" actually contain ast nodes, or has it already been processed further
[13:14:44] <cmr> doomlord: it does contain ast nodes
[13:14:50] <cmr> it contains the top-level module.
[13:14:58] <cmr> which then further contains everything else
[13:15:18] <cmr> doomlord: dumping the ast as an s-exp would be really really cool
[13:15:19] <dbaupp> doomlord: you want either syntax::visit or syntax::fold
[13:15:25] <cmr> it'd enable easy AST visualization tools
[13:15:34] <dbaupp> (the former would be better, I guess.)
[13:16:00] <doomlord> if i get this done i can throw it back to you as a util function i guess
[13:16:25] <doomlord> ast as s-expr helped me greatly when using clang
[13:16:46] *** Joins: stereotype441 (pberry@moz-EA110E30.ptld.qwest.net)
[13:18:34] <doomlord> "visit_crate".. just digging through.. "view_items" .. perhaps those hold the nodes..
[13:18:53] <dbaupp> visit is for processing each ast node
[13:19:26] *** Quits: stereotype441 (pberry@moz-EA110E30.ptld.qwest.net) (Ping timeout)
[13:19:26] <cmr> view items are imports
[13:19:36] <cmr> the module is the top of the AST heirarchy
[13:19:45] <dbaupp> so you create a visitor, with the appropriate functions at each node, and parse your source file into an ast::crate, and then call visit_crate on the crate and the visitor
[13:19:45] <cmr> modules contain items
[13:19:48] <cmr> (modules are items)
[13:19:49] <doomlord> module-> (view_items,    'items' ..)
[13:19:54] <dbaupp> right
[13:20:09] <doomlord> items = more modules | ast nodes ?
[13:20:11] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[13:20:16] <cmr> items are ast nodes
[13:20:17] <dbaupp> items = struct, enum, type, mod, impl, trait, static
[13:20:19] <cmr> modules are ast nodes too
[13:20:24] <doomlord> ok
[13:20:27] <dbaupp> oh, and fn
[13:20:50] *** Joins: stereotype441 (pberry@moz-E9349FC.ptld.qwest.net)
[13:20:55] <doomlord> presumably there are 'ast nodes' for all the expressions within functions too, arguments, etc
[13:21:00] <cmr> yes
[13:21:20] *** Joins: MaikKlein2 (maik@moz-7F56FAD5.dip0.t-ipconnect.de)
[13:22:32] <dbaupp> doomlord: yes, anything that gets used by the compiler is an ast node of some sort
[13:22:49] <vladimir-lu> i see
[13:23:03] <vladimir-lu> i solved it by writing the buffer type as &~[u8]
[13:23:08] <vladimir-lu> rather than as &[u8]
[13:23:08] *** Quits: bheylin (brianheyli@C31C7C72.EEA9745F.C8EED064.IP) (Ping timeout)
[13:23:47] <vladimir-lu> because &[u] is a slice whereas &~[u8] points to the owned box directly
[13:24:02] *** Joins: bheylin (brianheyli@C31C7C72.EEA9745F.C8EED064.IP)
[13:24:09] <vladimir-lu> btw the inference on cast::transmute is quite nice
[13:26:29] *** Quits: stereotype441 (pberry@moz-E9349FC.ptld.qwest.net) (Ping timeout)
[13:26:58] <dbaupp> cmr: I would r+ that doc pr (if it was going to pass)
[13:27:17] *** Joins: stereotype441 (pberry@moz-F3112273.ptld.qwest.net)
[13:27:24] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[13:27:39] <cmr> dbaupp: it's the thought that counts :)
[13:27:58] <dbaupp> heh :)
[13:28:32] *** Quits: drumond19 (drumond19@1125C663.26437150.C55BF118.IP) (Client exited)
[13:31:58] <stereotype441> Can someone help me understand a "cannot move out of captured outer variable" error?  http://sprunge.us/cFOQ
[13:32:37] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[13:32:54] <MaikKlein2> dbaupp, can I ask you sth about https://github.com/mozilla/rust/pull/7937 ?
[13:33:11] <dbaupp> MaikKlein2: most certainly :)
[13:33:26] <MaikKlein2> dbaupp, what do you mean wth &str? so that we can do &~"aaaa" * 5?
[13:33:29] <engla> stereotype441: yes, the closure won't autoborrow so it will pass by move, which you can't since you want to use the f var many times (it's a loop)
[13:33:43] <cmr> MaikKlein2: "aaaa" is a &str, &~"aaaa" is a &~str
[13:33:56] <engla> stereotype441: a workaround is to borrow it with a new closure, passing  |x| f(x)  instead of f
[13:34:09] <dbaupp> stereotype441: https://github.com/mozilla/rust/wiki/Doc-under-construction-FAQ#noncopyable-stack-closures
[13:34:10] <MaikKlein2> ok
[13:34:22] <engla> another workaround is to use a loop without closure
[13:35:04] <MaikKlein2> cmr, hm is "aaa" not &'static str ?
[13:35:12] <cmr> MaikKlein2: it is
[13:35:22] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[13:35:32] <stereotype441> Cool, thanks.
[13:35:41] <dbaupp> MaikKlein2: &'static str is just a type of &str
[13:36:03] <dbaupp> i.e. it's the same type, just one has a named lifetime
[13:36:23] * dbaupp shouldn't've used "type" twice, meaning different things
[13:36:24] <MaikKlein2> ok thanks
[13:37:38] <MaikKlein2> make only recompiles what has to be recompiled right?
[13:38:57] <dbaupp> yes
[13:39:01] *** Quits: kertap (kertap@moz-5AE34C97.b-ras3.mvw.galway.eircom.net) (Quit: kertap)
[13:39:13] <dbaupp> which, if you're modifying libstd, is the whole bootstrap
[13:39:25] <MaikKlein2> :(
[13:39:29] <dbaupp> (well, everything except for the C++ runtime.)
[13:39:42] <dbaupp> if you're just running tests: `make check-stage2-std NO_REBUILD=1`
[13:42:46] <MaikKlein2> can I convert a ~ to @? maybe with to_shared or sth? 
[13:42:57] <cmr> to_managed() is the convention
[13:43:02] <MaikKlein2> ah thanks
[13:43:23] <dbaupp> why do you need to convert ~str to @str?
[13:43:29] *** Quits: a__ (a__@moz-250D9B4.nycmny.fios.verizon.net) (Quit: I haz left.)
[13:43:39] <vladimir-lu> he wants to be kind and share it with the world :P
[13:43:48] <MaikKlein2> hm @"a" *2 should be @"aa" or am I wrong?
[13:44:04] <dbaupp> oh, yes... (none of the rest of str does that at the moment.)
[13:44:48] <MaikKlein2> yeah I realized that .repeat returns always a ~str
[13:45:04] <cmr> I wouldn't expect it to be a @"aa"
[13:45:21] <dbaupp> cmr: why not?
[13:45:38] <cmr> it wouldn't be shared with anything else, and you're going to need a copy anyway to make it @str
[13:45:54] <dbaupp> cmr: it's strange to be jumping-heaps like that
[13:45:54] <MaikKlein2> i think it would be confusing if @"a"* 2 would be ~"aa" dunno
[13:46:11] <dbaupp> cmr: and, in theory, it should be directly constructing a @, so no extra copy
[13:46:21] <cmr> dbaupp: (is that possible?)
[13:46:30] <dbaupp> cmr: yeah, with unsafe
[13:46:53] <dbaupp> cmr: since the function knows that it's actually the owner, it's perfectly safe unsfae
[13:46:55] <dbaupp> *unsafe
[13:47:04] <cmr> "safe unsafe", heh
[13:47:12] <engla> I don't think it's good to have arithmetic operators act on strings. But I'm not a reveiwer. And I don't like + either.
[13:47:33] <dbaupp> engla: why not?
[13:47:51] <cmr> I don't think it's bad, but I don't see the utility of *
[13:48:14] <dbaupp> cmr: it's shorter than .repeat
[13:48:23] <SiegeLord> I don't think strings are numbers :P
[13:48:37] *** Quits: bheylin (brianheyli@C31C7C72.EEA9745F.C8EED064.IP) (Ping timeout)
[13:49:05] <dbaupp> SiegeLord: craziness! clearly you should use more bash/php!
[13:49:05] <kimundi> SiegeLord: I don't think rusts operators are strictly for numbers :P
[13:49:06] <engla> dbaupp: it's "convenience" that ends up inconsistent ("a" * 5  vs 5 * "a"). these operators have their domain (mathematics). and for concat I would prefer a separate operator like haskell or lua
[13:49:09] <cmr> dbaupp: used exactly 3 times in any of the rust code afaikt
[13:49:13] <cmr> *afaict
[13:49:28] *** Joins: bheylin (brianheyli@FFC70A53.D7094A8E.6E5B4086.IP)
[13:49:28] <dbaupp> cmr: (yup. I'm not arguing for *.)
[13:49:33] <SiegeLord> kimundi: As soon as you use numerical operators for non-numbers, it becomes operator overloading abuse :P
[13:49:42] <SiegeLord> Imo, of course
[13:49:53] <MaikKlein2> lol rusti ....
[13:49:54] <MaikKlein2> rusti> let s = ~"a";
[13:49:54] <MaikKlein2> Segmentation fault (core dumped)
[13:49:55] <kimundi> Best case we shuold have a big set of general purpose operators
[13:49:56] <SiegeLord> Unless there are mathematical analogues
[13:50:07] <engla> I think operators are fine, but add new operators instead of muddying the waters with overloading
[13:50:08] <dbaupp> cmr: (it should probably be used more, I've seen a few instances of let mut str = ~""; loop { str.push("constant"); })
[13:50:16] <SiegeLord> But I don't know what is the mathematical treatment of strings
[13:50:17] *** Joins: quacker (Mibbit@moz-E5058588.austin.res.rr.com)
[13:50:20] <dbaupp> engla: yeah, I agree
[13:50:21] <kimundi> But that's going to end up confusing, so...
[13:50:27] <dbaupp> SiegeLord: "monoid"
[13:50:29] <cmr> User defined operators!
[13:50:30] <SiegeLord> If you consider them vectors, * and + already do something different
[13:50:33] <MaikKlein2> if I do  *(~"aaa") will it be "aaa"?
[13:50:43] <kimundi> MaikKlein2: No
[13:50:43] <dbaupp> MaikKlein2: no
[13:50:45] <cmr> MaikKlein2: you can't derference ~str
[13:51:01] <dbaupp> MaikKlein2: .as_slice() will give you that explicitly, but it normally auto-borrows to &str
[13:51:16] <kimundi> MaikKlein2: &*(~"a") might give you a &str in the future
[13:51:43] <kimundi> but just *(~"a") will be illigal
[13:51:58] <MaikKlein2> okay thanks
[13:52:00] <kimundi> , well at least not usefull anywhere you want it
[13:52:11] <dbaupp> cmr: (graydon didnt exactly disagree with allowing the full unicode mathematical operators section.)
[13:52:39] <dbaupp> cmr: (https://github.com/mozilla/rust/issues/4819#issuecomment-20646236)
[13:52:51] <kimundi> let x = 0xFF ‚äï 0x77;
[13:53:09] <dbaupp> kimundi: *(~"a") would be legal in an context that can take an unsized type
[13:53:13] <SiegeLord> dbaupp: Sure, but I mean... if you had to do a mathematical proof using strings... what symbol would you use for concatenation?
[13:53:21] <dbaupp> (as far as I understand it.)
[13:53:24] <cmr> SiegeLord: a big dot
[13:53:48] <dbaupp> SiegeLord: ‚Ä¢
[13:54:16] <dbaupp> SiegeLord: or just placing the two elements you are "concatenating" next to each other
[13:54:27] <dbaupp> SiegeLord: i.e. `ab`
[13:54:39] * vladimir-lu wishes for a monad comprehension syntax
[13:54:47] <kimundi> dbaupp: Sure, but afaik those cases are only going to be in a type grammar context. won't be able to store a bare str on the stack or in a struct
[13:54:49] <SiegeLord> Yes, I've seen the latter used with vectors
[13:54:56] <vladimir-lu> (although i guess you can do that with macros)
[13:55:04] <dbaupp> kimundi: it might, in smart-pointer constructors
[13:55:23] <dbaupp> kimundi: e.g. Rc(*"foo"), so that there is only one later of indirection
[13:55:26] <kimundi> dbaupp: Hm, true
[13:55:47] <dbaupp> vladimir-lu: yes
[13:56:23] <dbaupp> vladimir-lu: https://mail.mozilla.org/pipermail/rust-dev/2013-May/004182.html
[13:56:52] <dbaupp> vladimir-lu: (it's actually a syntax-extension built into libsyntax atm, I couldn't get a plain macro to work properly.)
[13:57:13] <dbaupp> (although, it's not actually in libsyntax right now.)
[13:57:34] <MaikKlein2> hm but "a" *2 should result in ~"aa"?
[13:57:49] <MaikKlein2> because afaik "aa" is really usable
[13:57:52] <kimundi> SiegeLord: Anyway my point is that those operators are already inconsistent and not pure-mathy on number values
[13:57:52] <dbaupp> MaikKlein2: yes, there's not much else it can do
[13:58:02] <MaikKlein2> isn't *
[13:58:02] <cmr> Hm
[13:58:14] <cmr> With https://github.com/mozilla/rust/pull/7896, are all externs public?
[13:58:22] <cmr> Oh wait.
[13:58:24] <cmr> "Place `pub` or `priv` on individual items instead."
[13:58:27] <dbaupp> MaikKlein2: (don't worry too much about @str for @str, it will need to be changed through out std::str anyway.)
[13:58:46] <dbaupp> cmr: yeah, it's just making it match `impl`, etc.
[13:58:56] <cmr> Right
[13:59:26] <SiegeLord> kimundi: Yeah, but what should [1, 2] + [3, 4] do?
[13:59:31] *** Joins: drumond19 (drumond19@1125C663.26437150.C55BF118.IP)
[13:59:38] <vladimir-lu> dbaupp: i see
[13:59:52] <vladimir-lu> why chain and not flat_map?
[14:00:00] <dbaupp> because that's how it is
[14:00:13] <dbaupp> (also, flat_map is a horrible name for >>= :'( )
[14:00:18] * dbaupp doesn't like it
[14:00:24] <vladimir-lu> ok
[14:00:35] <dbaupp> vladimir-lu: there's a bug about being consistent with the naming somewhere
[14:00:38] <engla> I think it makes sense. just call join  flatten
[14:00:52] <dbaupp> engla: flat_map make sense, you mean?
[14:00:54] <engla> M(M(x)) -> M(x)  is flattening :)
[14:00:55] <engla> yeah
[14:01:14] <dbaupp> (I do too, but it's "specialising" it to containers, rather than a generic monad.)
[14:01:23] <dbaupp> (sort of.)
[14:01:27] <doomlord> oh no the m word :)
[14:01:35] <engla> my argument is that it doesn't
[14:01:39] <engla> specialize
[14:02:06] *** Quits: drumond19 (drumond19@1125C663.26437150.C55BF118.IP) (Ping timeout)
[14:02:34] <kimundi> SiegeLord: Dunno. If we keep the same restricted set of operators than I'd argue that the primary operation on vectors in this case would be an append. If those where SIMD vectors on the other hand I'd say element-wise addition.
[14:02:37] <dbaupp> engla: maybe... i.e. it's join . fmap == .map().flatten()
[14:03:01] <SiegeLord> kimundi: I think it's too surprising. I'd prefer a dedicated concat operator
[14:03:12] <stereotype441> engla: Follow-up question: if I work around my noncopyable stack closure problem by making a new closure (passing |x|f(x) to the recursive call instead of f), does that incur a performance penalty?
[14:03:23] <stereotype441> (Obviously it wouldn't be a serious problem in my example, just curious)
[14:03:31] <kimundi> SiegeLord: again, I'm talking about the case where we _don't_ get additional operators.
[14:03:53] <kimundi> SiegeLord: If we get more, then I'd be all for changing it to an dedicated one
[14:04:02] <engla> stereotype441: I don't know
[14:04:05] <Ms2ger> How about PHP's "a" . "b"?
[14:04:09] <dbaupp> stereotype441: It should be something that LLVM optimises out, but it probably doesn't right now (we're probably not passing enough info to LLVM.)
[14:04:17] <dbaupp> stereotype441: (but I don't know.)
[14:04:21] <SiegeLord> kimundi: For one, if I make my linear algebra library... I'd use + for addition and will have to use a .concat() function for concatenation
[14:04:50] <kimundi> SiegeLord: Yes?
[14:04:51] <SiegeLord> Which would mean that [] + [] will do something different than my_vec([]) + my_vec([])
[14:05:03] <Ms2ger> Yes
[14:05:18] <dbaupp> Ms2ger: seems like resolution hell: `let s = ~"a"; let repeat = ~"bar"; s . repeat`
[14:05:49] <kimundi> I don't see a problem with that. The fact that rust has no implicit coercin of types means it's not confusing wich impl is going to be called
[14:06:33] <Ms2ger> dbaupp, how about... let s = ~"a"; let repeat = ~"bar"; "$s$repeat"?
[14:06:35] * Ms2ger hides
[14:06:43] <dbaupp> even worse: `struct Foo { vec: ~[int], b: bool } let a = Foo{vec:~[],b:true}; let b = Foo{vec:~[],b:false}; a.b`
[14:07:41] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Connection reset by peer)
[14:07:49] <SiegeLord> kimundi: The issue is readability... one case "abuses" + and the other one uses it properly
[14:07:56] <engla> Ms2ger: it's great.. also add eval()
[14:08:27] <Ms2ger> engla, now *that* is a step too far
[14:09:02] <kimundi> SiegeLord: My argument is that in the case of a general programming language like rust, + already doesn't do anything proper on any type.
[14:09:15] <dbaupp> engla: (it would actually be possible... with some horrible combination of syntax extensions and loading librustc.)
[14:09:15] <cmr> It's not even commutative!
[14:09:28] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[14:09:28] <dbaupp> cmr: who needs commutativity
[14:09:48] <SiegeLord> It's a stylistic issue... it's on the same level as casing of types and functions
[14:10:11] * MaikKlein2 realizes that std is super readable not like rustc .... He wonders now why he started in rustc :(
[14:10:16] <SiegeLord> Some languages disallow operator overloading altogether to fix this :P
[14:10:17] <Ms2ger> cmr, like it's associative...
[14:10:28] <engla> just add a monoid concat operator :)
[14:10:29] * dbaupp thinks MaikKlein2 has a strange definition of readable
[14:10:37] <MaikKlein2> :D
[14:10:46] <dbaupp> SiegeLord: and those languages are annoying!
[14:11:00] <kimundi> SiegeLord: Again, I'd be all for additional operators, but if we'd end up only with those that we have right now, than I'd say use them for more stuff than just numbers. 
[14:11:05] * MaikKlein2 thinks of understandable
[14:11:14] <Ms2ger> As long as I can use >> for streams...
[14:11:32] <dbaupp> engla: ^
[14:11:57] <SiegeLord> Yeah, but power comes with responsibility... and using them simply for convenience seems... bad to me :P
[14:12:05] <SiegeLord> It's like bitshifting cout in C++
[14:12:06] <kimundi> We shouldn't overdo it of course, but I don't see the harm in a few convenience implemnetations
[14:13:13] <doener> MaikKlein2: it just takes a bit of brain re-wiring
[14:13:21] * Ms2ger wants a ^T operator for inner product...
[14:13:59] <SiegeLord> Incidentally... I wonder if you can do that D trick to create new user operators via the division operator
[14:14:08] <SiegeLord> It looks like this A /op/ B
[14:14:09] <dbaupp> SiegeLord: ?
[14:14:19] <MaikKlein2> haha
[14:14:23] <doomlord> the streams thing, perhaps a better way is to have a helper to repeatedly apply one thing to many arguments
[14:14:30] <kimundi> SiegeLord: He, sounds interesting xD
[14:14:35] *** Joins: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP)
[14:14:38] <dbaupp> SiegeLord: like `A /my_addition/ B`?
[14:14:52] <engla> sounds good. much better with infix functions than overloading
[14:14:58] <doomlord> apply(fileOut, a,b,c,d,e,...)  instead of having to make stream output small
[14:15:15] * dbaupp would prefer Haskell's 'A `my_addition` B'
[14:15:16] <SiegeLord> dbaupp: Yeah, sure
[14:15:31] <dbaupp> (especially as ` is currently unused.)
[14:15:45] <SiegeLord> You need two division operator overloads, and 'my_addition' has to be... something
[14:15:54] <SiegeLord> Maybe a type, or a static variable
[14:15:58] <SiegeLord> I don't recall exactl
[14:16:00] <SiegeLord> y
[14:16:00] <dbaupp> SiegeLord: oh, it's not built into the syntax
[14:16:03] <SiegeLord> No
[14:16:14] <dbaupp> ah, i guess it would work with &fn()
[14:16:19] <SiegeLord> I don't think you can have arbitrary operators and have context-free grammar
[14:16:36] <SiegeLord> (might be wrong)
[14:16:53] <dbaupp> SiegeLord: yes, but you can have `<ident>` as an "operator" as part of the syntax
[14:17:07] *** Quits: quacker (Mibbit@moz-E5058588.austin.res.rr.com) (Quit: http://www.mibbit.com ajax IRC Client)
[14:17:18] <dbaupp> (I guess <ident> could be relaxed to <path>,.)
[14:17:21] <kimundi> I think it could work if all have the same priority and are all, eg. infix
[14:18:04] <kimundi> maybe just have 'a `foo` b' as suger for 'a.foo(b)' ?
[14:18:42] <cmr> kimundi: yes, sounds good to me
[14:18:46] <cmr> someone write a macro for it
[14:19:14] <dbaupp> cmr: '`' doesn't even tokenise
[14:19:15] <jclements> cmr: that's a lot bigger than a Rust macro.
[14:19:25] *** Joins: nano (nano@moz-972880B.superkabel.de)
[14:19:54] <kimundi> Imo rust should tokenize all unknown input symbols
[14:20:05] <dbaupp> jclements: is this your pr? https://github.com/mozilla/rust/pull/7745
[14:20:10] <kimundi> so that macros/se can consume them
[14:20:38] <jclements> dbaupp: yes... I've been away for a week, and I need to enter ... the rebase room.
[14:21:18] <cmr> that's like the time out corner, but worse!
[14:21:18] <dbaupp> jclements: oh ok, just wondering if I should hold of on landing some (reasonably large) changes to syntax::ext to make it easier to land?
[14:21:26] <dbaupp> *off
[14:21:32] <jclements> dbaupp: sigh... what are the changes?
[14:21:42] <dbaupp> jclements: mainly in deriving
[14:21:54] <dbaupp> jclements: (it's not at all a problem... I haven't even finished them :) )
[14:21:54] <SiegeLord> prefix` `infix` posfix` :D
[14:22:08] <SiegeLord> *`postfix
[14:22:13] <jclements> dbaupp: hmm... I don't *think* those would affect my patch much. Famous last words. Thanks for asking!
[14:22:21] <cmr> SiegeLord: that's actually... not that bad, to me
[14:22:39] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[14:23:04] <dbaupp> SiegeLord: I would guess, that that exact syntax would have parse ambiguities, but I agree with cmr
[14:23:14] <dbaupp> (although, I'm not sure it's that useful/worth adding.)
[14:23:25] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[14:23:39] <dbaupp> SiegeLord: e.g. foo` bar `baz == `foo.bar(bar)` or `bar.foo().baz()`?
[14:24:14] <SiegeLord> We could be the first language with a factorial operator!
[14:24:19] <cmr> I'd imagine the later
[14:24:23] <dbaupp> (haskell has it :P )
[14:24:28] <SiegeLord> (that I know of :P, and I guess it doesn't count)
[14:24:29] <kimundi> let s = Œ£` [1, 2, 3, 4, 5, 6];
[14:24:54] <SiegeLord> We could add all the APL operators that way XD
[14:25:01] <doomlord> thinking ahead, can libsyntax return a partial ast if it fails to compile everything (eg divide up into outer scope blocks, see how far it gets parsing each)
[14:25:19] <kimundi> doomlord: Afaik it just fails 
[14:25:29] <dbaupp> SiegeLord: http://www.haskell.org/ghc/docs/latest/html/users_guide/syntax-extns.html#postfix-operators
[14:25:40] <dbaupp> doomlord: kimundi is correct
[14:25:49] <cmr> But *could* it?
[14:25:50] * dbaupp thinks we should have a `parse_failed` condition
[14:25:52] <cmr> I would think it could
[14:25:58] <dbaupp> cmr: in theory yeah, ^
[14:26:01] <cmr> It'd require a lot of work I think
[14:26:07] <dbaupp> replace all the "fails!()" with that
[14:26:36] <doomlord> thinking ahead = for IDE support it would be nice to have nodes for 'as much as works', i'm not sure how existing IDEs work..
[14:26:51] <dbaupp> doomlord: yeah, like clang
[14:27:00] <doomlord> eg where you start typing and it gives you hints like member dropdown -it must have partial information
[14:27:05] <dbaupp> (although, I think clang puts a lot more effort into resuming parsing.)
[14:27:26] <cmr> partial parsing would be good for large cfg'd out stuff too
[14:27:47] <dbaupp> cmr: that would be... tricky
[14:28:03] <dbaupp> cmr: (also, parsing is a miniscule amount of the total time, for most programs.)
[14:28:03] <MaikKlein2> hm eq() only works with ~str :( ?
[14:28:13] <dbaupp> MaikKlein2:  you want `==`
[14:28:23] <MaikKlein2> dbaupp, k
[14:28:29] <kimundi> MaikKlein2: Try swaping the arguments
[14:28:34] <dbaupp> MaikKlein2: the standalone `eq` and `eq_slice` are deprecated
[14:28:37] <doomlord> anyway i'm a LONG way off being able to use that :)
[14:29:09] <doomlord> presumably there's a half way house of parsing *sourcefiles* (modules?) without parsing the whole *crate*
[14:29:18] <dbaupp> cmr: in any case, something like `cfg!(win32, program...)` would give you that currently (if there was a cfg! macro)
[14:29:38] <dbaupp> cmr: since the args to macros are just tokenised, not parsed.
[14:29:46] <dbaupp> doomlord: yeah
[14:29:59] *** Quits: stereotype441 (pberry@moz-F3112273.ptld.qwest.net) (Ping timeout)
[14:30:05] <MaikKlein2> dbaupp, should I use == for all my tests then?
[14:30:08] <dbaupp> doomlord: although, `mod` statements get automaticaly pulled in
[14:30:11] <dbaupp> MaikKlein2: definitely
[14:30:36] <dbaupp> doomlord: (i.e. read from the files, and I'm pretty sure there's (currently) no way to disable this.)
[14:30:48] <dbaupp> MaikKlein2: actually, no
[14:30:51] *** Joins: drumond19 (drumond19@1125C663.26437150.C55BF118.IP)
[14:30:59] <dbaupp> MaikKlein2: you should be using `assert_eq!`
[14:31:07] <doomlord> i can't see myself tinkering with the compiler source any time soon
[14:31:15] <dbaupp> MaikKlein2: (essentially just copy the `repeat` tests.)
[14:31:47] <dbaupp> MaikKlein2: (assuming they use `assert_eq!`.)
[14:33:29] <MaikKlein2> dbaupp, k
[14:33:44] *** Joins: mib_sgsuym (Mibbit@moz-C207C5B5.range86-145.btcentralplus.com)
[14:35:04] <dbaupp> cmr: just btw, any update on the bencher?
[14:35:10] <doener> gah, I hate it when I think I'm all set and then tidy tells me I'll have to do yet another rebuild because of long lines
[14:35:24] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[14:35:27] <mib_sgsuym> say i have: struct Foo { children: ~[Option<~Foo>] } i need to get a mutable reference to a child, and keep a mutable reference to the node whose child I'm getting, this this possible?
[14:35:58] <dbaupp> doener: I hate that!
[14:36:05] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[14:36:38] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[14:36:38] *** ChanServ sets mode: +o dherman
[14:36:54] <dbaupp> mib_sgsuym: do you want to be able to mutate them both at the same time?
[14:37:27] *** Quits: StarLight (StarLight@moz-97A4A8DF.dynamic.avangarddsl.ru) (Ping timeout)
[14:38:25] <dbaupp> mib_sgsuym: (where at the same time means, e.g. `let child = foo.some_child_mut_ref(); child.mutate_it(); foo.mutate_it();`)
[14:38:41] <doomlord> perhapps instead of ast dump as s-expr,it would be better to just implemnt to_str() as typical rust literal syntax for the rust ast types
[14:38:58] <cmr> doomlord: That is the job of the pretty printer.
[14:39:02] <cmr> it's pretty broken atm
[14:39:19] <mib_sgsuym> @dbaupp nope, just need to be able to send them both to a function
[14:40:00] <dbaupp> mib_sgsuym: ah, I think that "counts" as mutating them both, so no... you'll probably have to restructure your code somewhat
[14:40:27] <mib_sgsuym> @dbaupp ah okay, thanks
[14:40:59] <dbaupp> mib_sgsuym: the reason it's unsafe to mutate them both is, imagine if you got a reference to the last element of children, and then called `foo.children.pop();`. the reference is now invalid.
[14:41:19] *** Joins: StarLight (StarLight@moz-C4C8A7D2.dynamic.avangarddsl.ru)
[14:41:20] <dbaupp> mib_sgsuym: if you posted some code, i'm sure someone will help. (I would, but it's bed time.)
[14:42:30] <mib_sgsuym> @dbaupp i see, i was trying to build a btree with owned pointers, i need to keep references to any full parents as i walk down the tree to do an insert so it's not looking easy
[14:43:22] *** Quits: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP) (Quit: Leaving.)
[14:43:59] *** Quits: dbaupp (Thunderbir@moz-712A1135.lns20.syd6.internode.on.net) (Ping timeout)
[14:45:21] *** Joins: stereotype441 (pberry@moz-97063B51.ptld.qwest.net)
[14:46:59] <doomlord> mutability: any difference between m_imm and m_const ? (immutable vs const?)
[14:47:07] <doomlord> way it inherits perhaps.
[14:47:29] <cmr> doomlord: const means read-only through this reference, but &mut can alias it
[14:49:28] <cmr> it's slated for removal afaik
[14:49:36] <cmr> but it's not obvious to me what would replace it
[14:53:53] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[14:54:29] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[14:56:35] *** Quits: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP) (Ping timeout)
[14:57:48] *** Joins: robertknight (robertknig@moz-AB0E96D7.range86-162.btcentralplus.com)
[14:59:06] *** Quits: drumond19 (drumond19@1125C663.26437150.C55BF118.IP) (Ping timeout)
[14:59:46] *** Joins: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP)
[15:00:37] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[15:03:27] *** Joins: milinda (milinda@moz-C79ADF95.dhcp-bl.indiana.edu)
[15:04:15] *** Quits: jclements (jclements@moz-98A7BA64.ngn.east.myfairpoint.net) (Quit: jclements)
[15:04:19] <MaikKlein2> hm if I do "make check-stage2-std NO_REBUILD=1" then tests for os::tests::memory_map_file fail sometimes :x
[15:04:24] <MaikKlein2> but not always
[15:04:31] <cmr> indutny: ^
[15:04:36] <indutny> hoya
[15:04:42] <indutny> which os?
[15:05:02] <MaikKlein2> ubuntu 13.10 x64
[15:05:18] <indutny> hm...
[15:05:22] <indutny> I'll try to figure it out soon
[15:05:44] <MaikKlein2> could I messed it up with my commit? I implemented * on str
[15:07:47] <indutny> who knows
[15:08:57] *** Quits: Sindwiller (quassel@moz-743130B2.dynamic.hispeed.ch) (Client exited)
[15:11:37] <Crnobog> Woop, figured out the problem with aux crate tests on Windows
[15:11:58] <cmr> Crnobog: awesome!
[15:12:06] *** Joins: jaen (jaen@moz-7C7C9E74.play-internet.pl)
[15:12:42] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[15:12:43] <Crnobog> All pull requests get manually reviewed, right?
[15:13:05] <Crnobog> Because there's two ways I could fix this so I want to make sure someone with experience with the compiletest driver looks over it
[15:13:13] <cmr> yes
[15:13:24] <cmr> write 'r? @graydon' in the PR text
[15:13:42] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[15:14:21] <Crnobog> I need to read the github docs on pull requests anyway
[15:15:22] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[15:15:32] *** Quits: robertknight (robertknig@moz-AB0E96D7.range86-162.btcentralplus.com) (Ping timeout)
[15:16:06] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[15:16:11] *** Quits: bheylin (brianheyli@FFC70A53.D7094A8E.6E5B4086.IP) (Ping timeout)
[15:16:55] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[15:17:28] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[15:19:23] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[15:19:50] *** Quits: nano (nano@moz-972880B.superkabel.de) (Ping timeout)
[15:22:45] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[15:24:58] *** Joins: nano (nano@moz-972880B.superkabel.de)
[15:25:03] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[15:25:05] <doomlord> impl<A:MyToStr,B:MyToStr> MyToStr for (A,B) {
[15:25:05] <doomlord> 	fn myToStr(&self)->~str{ let &(a, b)=self; ~"("+a.myToStr()+~","+b.myToStr()+~")"}
[15:25:05] <doomlord>  
[15:25:47] <doomlord> ^^^^"cannot move dereference out of & pointer" ... how do i get 2 pointers to the components of the tuple,i've tried various permutaions of &'s, *s
[15:26:01] <cmr> doomlord: let (ref a, ref b), perhaps?
[15:26:16] <doomlord> yeah i tried that too , i'll try again
[15:26:38] <doomlord> &(ref a, ref b) << works
[15:26:43] <cmr> huh
[15:26:45] <doomlord> i didn't try that lol
[15:27:07] <cmr> seems weird to me
[15:27:52] <doomlord> yes i'm not sure i understand why at all, but i recall ref's in similar situations in matches
[15:27:52] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[15:28:14] <cmr> the ref isn't weird to me, but the & is
[15:29:30] <doomlord> &self  ->  &(a,b),  ... is 'ref a' more like C++ & , wheras &'s in patterns aren't like C++ reference, more like C++ "take adress" 
[15:29:50] <cmr> I have no idea
[15:29:50] <doomlord> ^ ref more like c++ & meaning Reference
[15:30:08] <cmr> I think ref is the same thing as &, but I'm not sure
[15:30:26] *** Quits: jaen (jaen@moz-7C7C9E74.play-internet.pl) (Ping timeout)
[15:30:46] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[15:32:45] <kimundi> doomlord: &(ref a, ref b) => Thae & destructures the &self with self = (A, B), the ref creates refernces to the content instead of moving it out.
[15:33:00] <kimundi> & => removes one layer of &
[15:33:07] <kimundi> ref => adds one layer of &
[15:33:32] <kimundi> (In a patter anyway)
[15:34:19] <cmr> Whoaaaa
[15:34:21] <cmr> https://github.com/mozilla/rust/pull/7828
[15:34:23] <cmr> acrichto_: <3
[15:34:29] <cmr> I love writing TWiR
[15:34:41] <cmr> All sorts of cool stuff people do that slips under my nose when I'm not watching
[15:34:52] <doomlord> & in a *pattern match* removes one layer of & ?
[15:35:06] <kimundi> cmr: He, yeah, same reason I like reading TWiR xD
[15:35:11] <doomlord> as you're saying 'the adress of X =  Y
[15:35:12] <kimundi> doomlord: Yes
[15:35:31] <doomlord> thats the bit that takes getting used to coming from C++ without all the matching going on :)
[15:35:39] <doomlord> but its neat
[15:36:17] <kimundi> doomlord: The idea is that the syntax for unwraping a type in a patter is the same as creating it in an expression
[15:36:48] <kimundi> 'let ~x = ~5;' == 'let x = 5'
[15:37:50] <doomlord> ok
[15:38:20] <doomlord> boom, runtime error .. & and @s mixed around ..
[15:38:31] <kimundi> haha
[15:38:48] <kimundi> yeah...
[15:39:17] <doomlord> (i think i ran  into the old @mut problem i guess)
[15:42:21] <MaikKlein2> bstrie, ping
[15:43:24] <doomlord> (logical reason found, phew)
[15:45:53] *** Quits: milinda (milinda@moz-C79ADF95.dhcp-bl.indiana.edu) (Input/output error)
[15:47:11] <MaikKlein2> completely offtopic: to any webdeveloper what do you think of http://www.meteor.com/ ? 
[15:48:24] <cmr> MaikKlein2: I haven't used it but it looks quite impressive to me.
[15:49:44] <vladimir-lu> mark_edward: hehe merge conflict
[15:49:49] <vladimir-lu> PR coming your way soon
[15:50:02] <mark_edward> vladimir-lu: cool!
[15:52:26] *** Quits: qmx (qmx@moz-D6C3C2E6.qmx.me) (Ping timeout)
[15:52:54] *** Joins: qmx (qmx@moz-D6C3C2E6.qmx.me)
[15:55:35] <cmr> engla: ping
[15:55:48] <engla> hi
[15:55:52] <cmr> https://github.com/blake2-ppc/rust/commit/435fcda5e99ad5944c780f864a550b3211a6ab47
[15:55:58] <cmr> Is .cycle() an "iterator adaptor"?
[15:56:12] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[15:56:38] <engla> yes
[15:57:01] <engla> I forgot to put the new trait in the prelude
[15:57:53] <engla> .cycle is an adaptor like take or chain, only it requires Clone
[15:58:07] *** Joins: drumond19 (drumond19@1125C663.26437150.C55BF118.IP)
[15:59:25] <mark_edward> engla: does cycle just repeat one element, or the whole of the iterator range
[15:59:30] <cmr> mark_edward: whole range
[15:59:30] <engla> the whole iterator
[15:59:36] <engla> that PR landed
[15:59:38] <mark_edward> cmr: cool
[15:59:55] *** Quits: drumond19 (drumond19@1125C663.26437150.C55BF118.IP) (Ping timeout)
[15:59:55] <engla> only certain iterators implement .clone() though
[16:00:45] <cmr> I imagine a ResetableIterator would be necessary for many things?
[16:00:49] <engla> clone is nice because you can split iterators easily like Python .tee()  you just do  let jt = it.clone()
[16:01:14] *** Joins: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[16:01:36] <engla> maybe. clone() will preserve the internal cursor of the iterator though
[16:01:56] <cmr> Right, but not everything that it makes sense to cycle on could be clonable
[16:02:16] <engla> true
[16:02:30] <engla> some things you will need to save the elements
[16:02:46] <cmr> Which is why I think some things would be nice to have a `.reset()` method
[16:02:48] <engla> say for example a file iterator, it's not the same to reset it
[16:02:56] <cmr> right
[16:03:46] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[16:04:17] <engla> Maybe closure reform can bring more clonable iterators
[16:04:38] <engla> a pure function to map will be clonable. one with side effects will not
[16:07:51] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[16:08:12] *** Joins: jaen (jaen@moz-8EA56C92.play-internet.pl)
[16:08:19] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[16:08:30] <engla> cmr: an adaptor would maybe make more sense. Something like   .to_buffer()  that turns the iterator into a resetable, clonable iterator that saves its elements
[16:08:58] <engla> it should turn the iterator into a random access iterator
[16:09:15] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[16:11:43] *** Quits: nano (nano@moz-972880B.superkabel.de) (Ping timeout)
[16:12:04] *** Joins: nano (nano@moz-972880B.superkabel.de)
[16:15:52] *** Quits: jaen (jaen@moz-8EA56C92.play-internet.pl) (Ping timeout)
[16:16:11] *** Joins: jaen (jaen@moz-8EA56C92.play-internet.pl)
[16:16:31] <kimundi> engla: Just do .collect::<~[T]>().iter() :P
[16:16:53] <kimundi> that is, collect to a vector, have those iterators implemented there
[16:20:53] <mark_edward> vladimir-lu: ping
[16:21:05] *** Quits: Nefzaoui (chatzilla@BB4F14E.ED9AB01B.80E43DAF.IP) (Ping timeout)
[16:21:38] <vladimir-lu> mark_edward: pong
[16:21:53] *** Quits: jaen (jaen@moz-8EA56C92.play-internet.pl) (Ping timeout)
[16:22:09] *** Joins: jaen (jaen@moz-8EA56C92.play-internet.pl)
[16:24:11] <mark_edward> vladimir-lu: can you talk in a private IRC conversation? I don't think our discussion belongs in #rust for now
[16:24:36] <vladimir-lu> mark_edward: sure, in 10 mins or so?
[16:24:49] <mark_edward> vladimir-lu: no prob
[16:31:01] *** Joins: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net)
[16:34:10] *** Joins: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net)
[16:34:10] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[16:35:59] *** Quits: jaen (jaen@moz-8EA56C92.play-internet.pl) (Ping timeout)
[16:35:59] *** Joins: huanghongqiao (Mibbit@5C4713C.4FDC82C8.22DEFD68.IP)
[16:36:01] *** Quits: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net) (Client exited)
[16:36:32] <huanghongqiao> how can i debug the rust source?
[16:37:39] <cmr> huanghongqiao: usually you add `info!()` calls in places, since the debug info generation isn't complete
[16:38:09] <klutzy> is this up-to-date?: https://github.com/mozilla/rust/blob/master/src/test/compile-fail/kindck-owned-trait-scoped.rs
[16:38:27] <cmr> klutzy: it's xfail'd, so probably not.
[16:38:48] <klutzy> cmr: ah, xfail means it. thanks!
[16:39:27] <klutzy> I was wandering on 'static and found it but got confused since it seemed bitrotted
[16:42:17] *** Joins: a__ (a__@moz-250D9B4.nycmny.fios.verizon.net)
[16:42:33] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Connection reset by peer)
[16:44:04] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[16:45:49] <huanghongqiao> thank you, cmr
[16:46:24] <cmr> huanghongqiao: also use the --enable-debug switch to the configure script
[16:47:30] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[16:49:14] *** Quits: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com) (Ping timeout)
[16:49:48] <engla> kimundi: sounds good to me :)
[16:50:07] <engla> kimundi: well except that it should be lazy..
[16:51:42] <mark_edward> is there anyway to have a lifetime that exists between method calls? not necessarily for the lifetime of the whole struct?
[16:51:58] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[16:54:09] *** Joins: robertknight (robertknig@moz-AB0E96D7.range86-162.btcentralplus.com)
[16:54:39] *** Quits: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net) (Quit: computer sleeping)
[16:56:54] <cmr> dwrensha: ping
[16:57:04] <dwrensha> hi
[16:57:10] <cmr> heh, that's good timing :)
[16:57:25] <cmr> (I have join messages turned off)
[16:57:29] <cmr> So, re: Cap'n Proto
[16:57:43] *** Quits: MaikKlein2 (maik@moz-7F56FAD5.dip0.t-ipconnect.de) (Ping timeout)
[16:58:18] <cmr> Please keep it up, I would like to use it for encoding compiler metadata in shared libraries, rather than the current ebml abomination
[16:58:35] *** Joins: drumond19 (drumond19@1125C663.26437150.C55BF118.IP)
[16:58:46] <dwrensha> what's ebml?
[16:58:49] <doomlord> map, "deprecated" ?  what's the prefered way of returning a vector of results of function application to a vector's contents
[16:58:53] <huanghongqiao>  --enable-debug??how to use it?
[16:58:56] <huanghongqiao> cmr
[16:59:06] <cmr> dwrensha: an awful format, basically a binary encoding of XML
[16:59:10] <kimundi> mark_edward: Could you elaborate?
[16:59:19] <kimundi> doomlord: Use iterators
[17:00:07] <kimundi> [1,2,3].iter().map(|&x| x + 3).collect() ...
[17:00:21] *** Quits: drumond19 (drumond19@1125C663.26437150.C55BF118.IP) (Ping timeout)
[17:00:23] *** sam113101 is now known as sam113101_afk
[17:00:52] <doomlord> just tried src.iter().transform(...).collect(),
[17:01:41] <kimundi> err, transform, yeah
[17:02:18] <kimundi> (the buf blocking the renaming reilly needs to get fixed)
[17:02:24] <kimundi> (bug*)
[17:02:34] <kimundi> (really**)
[17:02:38] <cmr> huanghongqiao: it is an argument to the configure script when building rustc
[17:06:01] *** Quits: kimundi (kimundi@moz-B7640CA.dip0.t-ipconnect.de) (Ping timeout)
[17:06:08] <huanghongqiao> cmr:so is "rustc  --enable-debug  hello.rs "
[17:06:27] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[17:06:33] <cmr> huanghongqiao: Oh, no, for that it is `rustc --cfg debug hello.rs`
[17:06:33] *** Joins: kimundi (kimundi@moz-693E7409.dip0.t-ipconnect.de)
[17:06:47] <cmr> huanghongqiao: I misunderstood your question
[17:07:35] <mark_edward> kimundi: sorry got distracted
[17:08:03] <mark_edward> kimundi: the context is a curl wrapper
[17:08:16] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[17:08:42] <mark_edward> we need to ensure that when you pass something into easy_setopt, that something lass until easy_perform is called
[17:08:52] <huanghongqiao> cmr  sorry, my english is very weak
[17:09:21] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[17:09:21] *** ChanServ sets mode: +o dherman
[17:09:22] <mark_edward> kimundi: but as far is i know, the closest we can get is requiring that it lasts at least as long as the whole struct
[17:10:30] <huanghongqiao> i want to debug the rust source like visual stdio c++
[17:10:49] <cmr> huanghongqiao: that is not possible right now
[17:11:34] <huanghongqiao> haha
[17:13:52] *** Joins: MaikKlein2 (maik@moz-7F56FAD5.dip0.t-ipconnect.de)
[17:14:33] <mark_edward> cmr: do you have an idea?
[17:14:58] <cmr> mark_edward: nope, don't even really understand the problem, but it sounds complex :)
[17:16:01] <mark_edward> cmr: what i mean is curls api is such that you set a whole bunch of options  that are pointers to objectss
[17:16:02] *** Joins: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net)
[17:16:16] <mark_edward> cmr: and those options are used when you actually perform the request
[17:16:49] <mark_edward> so those objects need to last between when the options are set and when the request is performed
[17:19:35] <vladimir-lu> i would just set it to the lifetime of the Request object for example
[17:20:05] <cmr> mark_edward: Why not pass in an options struct/list when you make a request?
[17:20:07] <doomlord> (ok i have some debug dump of the ast in progress... not really acheiving much but i can see more of whats going on now..)
[17:20:21] <cmr> I assume this is a high level wrapper?
[17:20:26] <cmr> Or, higher, at least
[17:20:42] *** Joins: webber46 (webber46@moz-98D2F3C5.cust.bredband2.com)
[17:20:42] <cmr> doomlord: I found that fmt!("%?", some_ast_node) was very useful while working on rustdoc_ng
[17:21:06] <mark_edward> cmr: it's trying to be. the problem is that these things can have basically any type. how can we store all of that?4
[17:21:08] *** Quits: a__ (a__@moz-250D9B4.nycmny.fios.verizon.net) (Ping timeout)
[17:21:38] <cmr> mark_edward: Dunno. If you're writing a high-level Rusty binding, it's probably going to look nothing at all like how you'd interact with curl using C
[17:22:34] <doomlord> lol. thanks; thats really useful. i should have asked if that existed before i did something similar manually :)
[17:23:13] <doomlord> i feel really dumb now
[17:23:17] <cmr> mark_edward: the lifetime system still isn't entirely complete; you might need to pass in a closure and execute the closure in the context you set up to have it be safe
[17:23:43] *** Joins: a__ (a__@moz-250D9B4.nycmny.fios.verizon.net)
[17:23:53] <mark_edward> cmr: rigght, i think you're last idea is the best actually! we can use an enum type i think...
[17:25:03] <doomlord> ok my manual implementation reports more types , its slightly different :)
[17:25:29] <vladimir-lu> aand there's no way to use 'extern "C"' in a trait I imagine?
[17:25:37] <cmr> yeah, the fmt!() reflection isn't the greatest, and the output is ugly, but it works for debugging
[17:26:45] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[17:31:11] <kimundi> mark_edward: Sorry, got distracted myself
[17:32:10] <mark_edward> no worries, but yeahm can you see the above discussion
[17:33:29] *** Quits: nano (nano@moz-972880B.superkabel.de) (Ping timeout)
[17:36:49] *** Quits: mib_sgsuym (Mibbit@moz-C207C5B5.range86-145.btcentralplus.com) (Quit: http://www.mibbit.com ajax IRC Client)
[17:37:34] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[17:37:34] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14970018e to 14c4b6216: 02http://git.io/N3iJvQ
[17:37:34] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[17:37:36] *** Joins: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP)
[17:37:36] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/dLmFOQ
[17:37:36] <ghrust> 13rust/06auto 1413b474d 15Daniel Micay: rm obsolete no-op lints
[17:37:36] <ghrust> 13rust/06auto 14e1a62a4 15bors: auto merge of #7936 : thestinger/rust/cleanup, r=alexcrichton
[17:37:36] *** Parts: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP) ()
[17:38:08] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[17:38:29] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:39:50] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[17:40:16] <kimundi> mark_edward: Reading about what easy-setops does, I think you want to make a type for the CURL handle, and have easy_setops be a method on it. The options you pass are then wrapped as an enum to be typesafe. For lifetimes of the objects... dunno let me think about it a bit more
[17:41:16] *** Quits: MaikKlein2 (maik@moz-7F56FAD5.dip0.t-ipconnect.de) (Client exited)
[17:41:17] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[17:44:48] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[17:45:19] <kimundi> mark_edward: You could pass in a option data into the handle as owned pointers... So all data get's owned by the handle for the duration of it's existance
[17:47:02] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[17:49:21] *** Joins: MaikKlein (maik@moz-7F56FAD5.dip0.t-ipconnect.de)
[17:49:22] *** Joins: graydon (graydon@moz-1C52C8D0.cable.teksavvy.com)
[17:49:22] *** ChanServ sets mode: +qo graydon graydon
[17:49:39] <graydon> has someone removed the lock that's causing all the failures on mac3?
[17:49:47] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[17:50:06] <cmr> not afaik
[17:50:15] <huanghongqiao> i use windows
[17:50:38] <graydon> looks like maybe
[17:51:30] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[17:51:34] <strcat> graydon: I think it's still broken, I just told it to turn off because we have enough without it
[17:51:38] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Ping timeout)
[17:51:38] <strcat> graydon: I think linux3 is messed up too
[17:51:42] <graydon> grrr
[17:51:49] <graydon> you told it to turn off .. how?
[17:51:55] <strcat> graydon: the buildslave UI
[17:51:59] <strcat> has 'graceful shutdown'
[17:52:02] <graydon> hah
[17:52:17] <cmr> As opposed to "merciless slaughter", of course
[17:53:22] <kimundi> cmr: Isn't that just normal operation? ;)
[17:53:34] <cmr> heh
[17:55:22] *** Quits: huanghongqiao (Mibbit@5C4713C.4FDC82C8.22DEFD68.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:56:08] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[17:56:27] <graydon> wow, linux3, 4, and 5 are online
[17:56:30] <graydon> that's ... surprising
[17:56:36] *** Quits: dew (Instantbir@moz-2C6F2E2.dhcp.stls.mo.charter.com) (Ping timeout)
[17:56:38] *** Joins: nano (nano@moz-972880B.superkabel.de)
[17:56:52] <graydon> mac3 is back online
[17:57:20] <mark_edward> kimundi: thanks for the advice
[17:57:28] <graydon> linux3, 4, and 5 are EC2. it should only be instantiating them occasionally. and only when under high load, and in order (3, then 3, then 5)
[17:57:40] <vladimir-lu> argh
[17:57:43] <vladimir-lu> https://gist.github.com/vladimir-lu/edf9c760d210b2b645d7
[17:58:30] <cmr> vladimir-lu: curl_get_userdata doesn't return a lifetime with an explicit name
[17:58:46] <cmr> erm, return a borrowed pointer
[17:58:51] <cmr> with an explicit lifetime
[17:59:08] *** Joins: drumond19 (drumond19@1125C663.26437150.C55BF118.IP)
[17:59:20] <vladimir-lu> what's the syntax for that?
[17:59:35] <cmr> You wrote it right in the trait :)
[17:59:38] <cmr>  fn curl_get_userdata(&self) -> &U;
[17:59:44] <Ms2ger> 'a
[17:59:52] <cmr> oh, right
[17:59:58] <MaikKlein> vladimir-lu, i added a comment
[18:00:32] <MaikKlein> oh wait
[18:00:49] <kimundi> Btw, I think it would be possible to use closures for the userdata callbacks. Just needs some wrappers that stuff and retrieve the environment into the usedata pointer
[18:00:50] <MaikKlein> u would need to add it in the trait to I guess
[18:00:53] *** Quits: drumond19 (drumond19@1125C663.26437150.C55BF118.IP) (Ping timeout)
[18:01:34] <graydon> terminated linux3
[18:03:32] *** Quits: santiago (santiago@moz-8ADE82B4.socal.res.rr.com) (Quit: Textual IRC Client: http://www.textualapp.com/)
[18:03:33] <vladimir-lu> updated https://gist.github.com/vladimir-lu/edf9c760d210b2b645d7 but i suspect the 'a does not quite do the same thing 
[18:03:42] <vladimir-lu> at least it compiles now
[18:04:00] * vladimir-lu does not understand 'self in that case
[18:04:20] <kimundi> vladimir-lu: 'self is nothing special
[18:04:36] <vladimir-lu> oh, not like Self?
[18:04:46] <MaikKlein> vladimir-lu, self is only for structs
[18:04:58] *** Quits: vosen (vosen@moz-266BA656.icpnet.pl) (Ping timeout)
[18:05:11] <kimundi> vladimir-lu: only the name "self" as lifetime name is treaded special due to legacy reasons (some lifetimes need to be named self, some must'n)
[18:05:36] <cmr> but it has no special semantics
[18:05:38] <kimundi> but semantically any lifetime works the same way (except static)
[18:05:46] <vladimir-lu> ok, good to know
[18:05:52] *** Joins: santiago (santiago@moz-8ADE82B4.socal.res.rr.com)
[18:06:48] <graydon> I am so pleased by the missing_doc attribute
[18:07:02] <graydon> now I wonder: can we have a missing_test and missing_bench attribute?
[18:07:23] <graydon> it'd require extending the #[test] attribute to point to the thing-it-is-testing
[18:07:34] <cmr> I don't think it would
[18:07:37] <graydon> #[test(foo)]
[18:07:38] <vladimir-lu> is there any monitoring of coverage?
[18:07:38] <graydon> no?
[18:07:44] <cmr> could walk the body of the function to see what it calls
[18:08:00] <graydon> cmr: but then it'd interpret a call to vec.len() somewhere in passing as a test-of-vec::len
[18:08:02] <graydon> which it isn't
[18:08:03] <cmr> plus side: you can generate a graph of the *exact* dependencies of the test, so you know what you'd need to mock
[18:08:05] <vladimir-lu> cmr: could write a program to check it terminates...
[18:08:31] <cmr> graydon: good point
[18:09:12] <graydon> we could check name similarity though, say. like you could have #[test] fn foo() be interpreted as a test-for-foo, assuming it's in a different module (or .. something?)
[18:09:22] <graydon> currently we're putting most tests in #[cfg(test)] mod test { ... }
[18:09:29] <graydon> so that could almost work via conventions
[18:09:53] <kimundi> graydon: Have it build a graph that ensures that for any test that uses len(), there is also a test that uses only len()? Could be a bit tricky though..
[18:10:10] <graydon> kimundi: yeah. I suspect name-based conventions would be easier to enforce
[18:10:15] <kimundi> yeah
[18:10:29] <graydon> (arguably even having to put #[test] on it is a bit much; go gets by fine with just naming tests test_foo()
[18:10:30] <graydon> )
[18:10:31] *** Joins: xlq (ekselkiu@moz-DF73151C.net)
[18:10:58] <kimundi> trait Foo {fn bar} => fn test_Foo_bar
[18:11:34] <graydon> oh, hm
[18:11:45] <graydon> I wonder if traits are a reasonable way to provide test and bench coverage
[18:11:47] <cmr> Could #[test] like `#[test] mod test { ... }` imply #[test] on every function in the module, as well as #[cfg(test)] on the module?
[18:11:50] <kimundi> graydon, could have an module-wide attribute?
[18:11:59] <kimundi> what cmr said
[18:12:08] <graydon> like impl Test for T
[18:12:09] <vladimir-lu> graydon: it gets annoying though to have functions called test_* called implicitly by the test runner
[18:12:12] <graydon> cmr: probably
[18:12:17] <strcat> graydon: could nest the test inside the function it tests ;p
[18:12:19] <graydon> vladimir-lu: perhaps, yeah
[18:12:19] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[18:12:40] <graydon> strcat: I think .. increasingly I'm leaning towards adopting out-of-line tests rather than in-same-module
[18:12:55] <graydon> though I know we do them inline in libstd and libextra
[18:13:01] <strcat> graydon: yeah our files are getting too big, like vec.rs
[18:13:05] <graydon> yeah
[18:13:28] <cmr> I think supporting both is important
[18:13:35] <cmr> I dunno which I prefer
[18:13:42] <graydon> I want to keep supporting both, sure. for a small program it's nice to just put them in the same file.
[18:13:45] <graydon> while you're working
[18:14:03] <strcat> there's a ton of stage0 stuff now ;p
[18:14:22] <graydon> shall we snap? I am not aware of anything blocking
[18:14:30] <strcat> we really should
[18:14:38] <cmr> aatch doesn't want to snap the memory regression but we need one
[18:14:45] <strcat> default methods are really solid now
[18:14:46] <cmr> lots of junk backed up
[18:14:52] <strcat> would be nice to start using them all over
[18:15:07] <graydon> ah right. I am still boggled at the notion that the memory regression's fix is platform-specific
[18:15:19] <strcat> graydon: it failed on windows over 10 times
[18:15:21] <strcat> no idea how
[18:15:27] <graydon> did anyone try debugging it? :)
[18:15:29] <strcat> and other PRs were landing in between
[18:15:31] <strcat> graydon: doubt it
[18:15:34] <graydon> I have a windows machine here y'know. am I the only one? :)
[18:15:50] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[18:16:15] <kimundi> graydon: You might be the only one with enough experience that hasn't switched to a linux vm yet ;)
[18:16:57] <strcat> graydon: I have a windows install on my laptop but I haven't booted it for 6 months ;p
[18:17:02] <graydon> right, ok
[18:17:04] *** Joins: vosen (vosen@moz-266BA656.icpnet.pl)
[18:17:09] <graydon> I have some other stuff to do today but I will try to get to it.
[18:17:16] <graydon> I wouldn't necessarily avoid snapshotting on account of this
[18:17:25] *** Quits: a__ (a__@moz-250D9B4.nycmny.fios.verizon.net) (Client exited)
[18:17:27] <cmr> I agree
[18:17:29] <graydon> we're not landing the gc before the next snap in any case
[18:17:34] <cmr> it has been put off to long
[18:17:36] <cmr> too*
[18:17:49] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[18:18:19] *** Joins: a__ (a__@moz-250D9B4.nycmny.fios.verizon.net)
[18:18:25] <graydon> I'm so excited about the newsched stuff landing, new IO libraries
[18:18:46] <graydon> that's like sore spot #1 for the newcomer experience now
[18:18:55] <graydon> everyone wants a web framework and we're all like "yeah well, uh, about that..."
[18:19:20] *** Joins: MaikKlein1 (maik@moz-EFA928EF.dip0.t-ipconnect.de)
[18:19:57] <graydon> that and default methods seem like two of the biggest sources of compromises and disappointments in doing library work
[18:20:03] <graydon> I guess maybe also conditions and &Traits
[18:20:07] <graydon> those half-work
[18:20:10] <graydon> (maybe?)
[18:20:14] *** Joins: dylukes (dylukes@moz-2DE1DF03.public.wayport.net)
[18:20:20] *** Quits: MaikKlein (maik@moz-7F56FAD5.dip0.t-ipconnect.de) (Ping timeout)
[18:20:30] <strcat> graydon: well sully has almost completely fixed default methods
[18:20:37] <strcat> they just aren't fixed in the snapshot :)
[18:20:39] <graydon> yeah
[18:20:41] <graydon> I know :)
[18:20:45] * strcat found a dozen bugs trying to use them
[18:20:51] <cmr> Are there any remaining default method bugs?
[18:20:59] <strcat> cmr: not ones I've run into
[18:21:07] <cmr> I haven't run into any recently either
[18:21:13] <strcat> and std::iterator is pretty generic so... it's a good test
[18:21:14] <sully> so, I just fixed the really bad cross crate bugs
[18:21:16] <cmr> It's very pleasing
[18:21:29] <strcat> sully: did that land?
[18:21:33] * strcat thought it did
[18:21:34] <sully> yeah, I think so
[18:21:38] <cmr> it did
[18:21:42] <sully> there are some known bugs
[18:21:58] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[18:22:01] <strcat> rusti: 2 + 2
[18:22:04] -rusti- 4
[18:22:04] <sully> default methods that make use of bounded params on the /trait/ don't work cross crate
[18:22:17] <strcat> sully: bounded params on traits don't work though
[18:22:20] <strcat> in general
[18:22:23] <sully> no, they do
[18:22:25] <sully> I think
[18:22:29] <strcat> I don't think they do :(
[18:22:37] <strcat> that's why I put off writing Iterable
[18:22:40] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[18:22:40] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14e1a62a4 to 14c4b6216: 02http://git.io/N3iJvQ
[18:22:40] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[18:22:44] *** Joins: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP)
[18:22:44] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/ghG5oA
[18:22:44] <ghrust> 13rust/06auto 1451649b7 15Andreas Martens: smallint{map,set}: replace iterators with DoubleEndedIterator...
[18:22:44] <ghrust> 13rust/06auto 1473e9a12 15bors: auto merge of #7921 : bytewiseand/rust/smallint-iter, r=huonw...
[18:22:44] *** Parts: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP) ()
[18:22:47] *** Quits: dylukes (dylukes@moz-2DE1DF03.public.wayport.net) (Ping timeout)
[18:23:10] <sully> I recently fixed it so that we actually check the bounds
[18:23:16] <sully> I just don't think that they are /that/ useful
[18:23:16] <strcat> graydon: heh and now it hit that ephemeral rustpkg git issue >.<
[18:23:25] <graydon> grrr
[18:23:34] <graydon> we need to turn those tests off
[18:23:36] *** Quits: RMF (RMF@moz-348663EF.dsl.telepac.pt) (Quit: Textual IRC Client: www.textualapp.com)
[18:23:45] <mark_edward> graydon: for me a big thing is trait objects
[18:23:53] <graydon> yeah
[18:23:56] <mark_edward> they don't work properly yet :(
[18:24:03] <mark_edward> i really want inheritaance workign
[18:24:09] <cmr> mark_edward: I still have a note on my whiteboard to ping you when a fix lands :p
[18:24:14] <graydon> I wonder if sully will be around long enough to switch gears to that, or if someone else has the energy
[18:24:27] <mark_edward> cmr: aw, i really appreciate that :p
[18:24:29] * graydon doesn't remember exactly who's summer plans include what
[18:24:30] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[18:24:37] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[18:24:41] *** Joins: RMF (RMF@moz-348663EF.dsl.telepac.pt)
[18:24:46] <graydon> whose, even
[18:24:55] <cmr> The interns are doing some really awesome work
[18:24:57] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[18:25:01] <sully> I am planning to go fix bugs in the intersection of default methods and inheritance
[18:25:06] *** Quits: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net) (Client exited)
[18:25:12] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[18:25:30] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[18:25:37] <strcat> ugh, rogers
[18:26:41] <graydon> sully: any idea if you or someone else has &Trait / ~Trait / @Trait work on the schedule
[18:26:42] <graydon> ?
[18:27:10] <SiegeLord> I forget, was there any fundamental issue with allowing multiple identically-named enum constructors?
[18:27:18] <sully> not sure
[18:27:24] <cmr> SiegeLord: they all share a namespace
[18:27:24] <sully> I wasn't planning on it, but probably could?
[18:27:24] <SiegeLord> I'm thinking of submitting a feature enhancement proposal...
[18:27:34] <strcat> these git failures are a good argument for fossil ;p
[18:27:36] <cmr> SiegeLord: enums would need to be their own namespace for that to happen
[18:27:42] <strcat> I've only ever run into breakage with svn though
[18:28:00] <cmr> strcat: why is it an argument for fossil?
[18:28:08] <SiegeLord> cmr: Is that a problem?
[18:28:16] <strcat> cmr: you can't break it by interrupting stuff, it's transactional
[18:28:20] <cmr> SiegeLord: It's the fundamental issue that needs to be resolved
[18:28:28] <cmr> strcat: oh, I thought you were talking about the rustpkg ones
[18:28:37] <cmr> Yes, fossil is quite good
[18:28:42] <strcat> cmr: oh no, I mean the interrupts destroying the git repos
[18:28:47] <cmr> yeah, makes sense now :p
[18:28:51] <strcat> or whatever it is that happens
[18:28:56] <graydon> sully: np. you're doing amazing work btw. stuff we're been stuck on all year.
[18:29:08] <strcat> svn breaks every time I touch it though
[18:29:16] *** Joins: dylukes (dylukes@moz-2DE1DF03.public.wayport.net)
[18:29:18] *** Joins: dew (Instantbir@moz-2C6F2E2.dhcp.stls.mo.charter.com)
[18:29:25] * strcat wishes arch used git for the package sources
[18:29:37] <sully> :)
[18:29:41] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[18:29:48] <graydon> mtn was similarly transactional but drh did a much better job with the "dvcs on sqlite" thing than we did. ah well.
[18:30:17] <sully> oh, also, I will be landing a typeclass resolution improvement soon
[18:30:23] <graydon> !
[18:30:31] <graydon> one that patrick and niko know about? :)
[18:30:33] <sully> that I think should let us get rid of the bogus type params in iterators
[18:30:36] <sully> niko knows, at least
[18:31:07] *** Quits: dylukes (dylukes@moz-2DE1DF03.public.wayport.net) (Ping timeout)
[18:31:29] <strcat> sully: https://github.com/mozilla/rust/issues/5886 and there's this weird one
[18:32:08] <strcat> but... iirc
[18:32:13] <strcat> on something like `pub trait FromIterator<A, T: Iterator<A>> {
[18:32:18] <strcat> it just ignores the bound on T
[18:32:34] <sully> I mean, what do you mean ignores?
[18:32:44] <strcat> sully: you can pass a T that's not an Iterator impl
[18:33:02] <sully> oh, no, I fixed that
[18:33:05] <strcat> ah
[18:35:13] *** Joins: dylukes (dylukes@moz-2DE1DF03.public.wayport.net)
[18:36:09] <sully> ok, I'm having trouble understanding what is going on in that bug
[18:37:07] *** Quits: dylukes (dylukes@moz-2DE1DF03.public.wayport.net) (Ping timeout)
[18:37:22] *** Quits: bytbox (s@moz-DC83764A.washdc.fios.verizon.net) (Ping timeout)
[18:40:33] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[18:40:46] *** Quits: Voomer (Voomer@moz-5D6F86AC.dyn.centurytel.net) (Connection reset by peer)
[18:41:15] *** Joins: dylukes (dylukes@moz-2DE1DF03.public.wayport.net)
[18:41:38] <doomlord> is there an existing function to indent brace-enclosed text, before i get sidetracked writing one :)  (to make output of fmt!("%?") more legible)
[18:42:19] <doomlord> str::indent(src, tabsize,maxlinesize) .. something like that
[18:42:28] <cmr> not afaik
[18:43:38] <graydon> anyway, gotta head out now; if someone feels like snapshotting I think it's probably a fine day to do it
[18:43:40] <strcat> rusti: println(fmt!("%?", @mut [1, 2]))
[18:43:41] -rusti- @mut [1, 2]
[18:43:41] -rusti- ()
[18:43:46] <graydon> (as in a quiet, bors-grinding day)
[18:43:48] <cmr> hey, nice
[18:43:50] <strcat> rusti: println(fmt!("%?", @mut [@mut 1, @mut 2]))
[18:43:51] -rusti- @mut [@mut 1, @mut 2]
[18:43:51] -rusti- ()
[18:43:58] <strcat> rusti: println(fmt!("%?", @mut 5))
[18:43:59] -rusti- @5
[18:43:59] -rusti- ()
[18:44:00] <strcat> ugh
[18:44:04] <cmr> heh
[18:44:12] *** Quits: dylukes (dylukes@moz-2DE1DF03.public.wayport.net) (Ping timeout)
[18:44:12] <strcat> rusti: println(fmt!("%?", [@mut 5]))
[18:44:13] -rusti- [@mut 5]
[18:44:13] -rusti- ()
[18:44:19] * strcat doesn't understand visit glue
[18:44:24] <strcat> why is the top-level one an opaque box?
[18:44:52] <strcat> rusti: println(fmt!("%?", @5 as @ToStr))
[18:44:53] -rusti- ()
[18:45:34] <cmr> rusti: println("")
[18:45:35] -rusti- ()
[18:45:42] <cmr> Does it strip empty lines?
[18:45:51] <strcat> irc does
[18:45:53] <cmr> Or, actually, can't send an empty line with the IRC protocol
[18:45:55] <cmr> right
[18:46:25] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[18:46:55] *** Joins: dsd (dsd@moz-B58A1E87.dclient.hispeed.ch)
[18:47:01] <dsd> hi
[18:47:56] <strcat> \o
[18:49:01] *** Joins: dylukes (dylukes@moz-2DE1DF03.public.wayport.net)
[18:49:09] <Ms2ger> o/
[18:49:28] *** Joins: dwhyte (dwhyte@1922756A.EDC594B0.7BF4A4B0.IP)
[18:49:35] <cmr> {^}
[18:50:13] <dsd>  |
[18:50:18] <dsd> \
[18:50:30] <dsd> almost
[18:51:19] <doener>   
[18:53:30] *** Quits: dylukes (dylukes@moz-2DE1DF03.public.wayport.net) (Ping timeout)
[18:53:46] *** Joins: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net)
[18:57:51] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[18:59:07] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[18:59:32] *** Joins: drumond19 (drumond19@1125C663.26437150.C55BF118.IP)
[18:59:54] *** Quits: stereotype441 (pberry@moz-97063B51.ptld.qwest.net) (Quit: Leaving)
[19:01:19] *** Quits: drumond19 (drumond19@1125C663.26437150.C55BF118.IP) (Ping timeout)
[19:01:33] *** Quits: anri (solancile@moz-E49E7C4B.hsd1.wa.comcast.net) (Quit: anri)
[19:02:06] *** Joins: bytbox (s@moz-DC83764A.washdc.fios.verizon.net)
[19:02:33] *** Joins: dylukes (dylukes@moz-2DE1DF03.public.wayport.net)
[19:02:58] <doomlord> #[deriving(Basics)] proposal ... maybe you could make it do that by default *unless* you actually put something there (#not_deriving(...)
[19:04:15] <strcat> would really be a mistake to do it by default
[19:04:27] <vladimir-lu> yeah -1 for default
[19:04:32] <strcat> there are a lot of things you *don't* want by default
[19:04:36] <cmr> I agree
[19:04:40] <strcat> Ord/TotalOrd especially
[19:04:49] <vladimir-lu> but my guess is with generalised traits you could vtable an impl?
[19:04:52] <strcat> and it'd slow down compiles a lot since every private type would get a bunch of useless impls
[19:04:56] <vladimir-lu> in another crate
[19:05:04] <strcat> vladimir-lu: hm?
[19:05:04] *** Quits: dylukes (dylukes@moz-2DE1DF03.public.wayport.net) (Quit: Computer has gone to sleep.)
[19:05:08] <doomlord> clone though...
[19:05:28] *** Quits: MaikKlein1 (maik@moz-EFA928EF.dip0.t-ipconnect.de) (Ping timeout)
[19:05:45] <vladimir-lu> strcat: i mean you could implement the traits for a struct that's not in your crate, no?
[19:05:51] <strcat> vladimir-lu: no
[19:05:53] <vladimir-lu> or it doesn't go as far as that
[19:05:56] <vladimir-lu> shame :(
[19:06:02] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[19:06:05] <strcat> you can implement a trait if a) the type is in your crate or b) the trait is in your crate
[19:06:16] <strcat> vladimir-lu: it won't, it wouldn't be sound
[19:06:58] <strcat> the rule prevents incoherent conflicting implementations
[19:09:57] <vladimir-lu> hmnn i realise the point about soundness, but in general sometimes you do *want* to be able to override other people's impls (though i can't think of a way to change the linking so it actually works)
[19:10:16] <cmr> vladimir-lu: you can wrap their type in a newtype struct for that
[19:10:26] <cmr> `struct MyFoo(foo::TheirFoo);`
[19:10:45] *** Joins: anri (solancile@moz-E49E7C4B.hsd1.wa.comcast.net)
[19:11:08] <sully> soundness isn't really the problem, iirc
[19:11:19] <vladimir-lu> cmr: another cool trick, thanks
[19:11:21] <sully> like, it wouldn't lead to memory unsafety or anything
[19:11:30] <cmr> sully: it'd lead to random link failures
[19:11:34] <sully> but it would lead to weird things
[19:12:19] <vladimir-lu> impls for structs (without a trait) - can you use them outside the module?
[19:12:23] <cmr> vladimir-lu: yes
[19:12:36] <cmr> wouldn't be very useful otherwise :p
[19:12:41] <strcat> sully: it could lead to soundness errors depending on what the linker did
[19:12:49] <strcat> not sure exactly how we mangle names
[19:12:56] <strcat> but I assume you could have conflicting symbols
[19:13:24] *** Quits: robertknight (robertknig@moz-AB0E96D7.range86-162.btcentralplus.com) (Ping timeout)
[19:13:32] <strcat> and then it will arbitrarily choose one (the first it finds)
[19:13:40] <vladimir-lu> ooooh
[19:14:05] <vladimir-lu> but if you controlled the linker you could in theory make sure the crate you were creating was chosen first
[19:14:14] *** Joins: jclements (jclements@moz-98A7BA64.ngn.east.myfairpoint.net)
[19:14:17] <cmr> because that's not fragile...
[19:14:20] <vladimir-lu> i mean that's assuming trait impls didn't get inlined
[19:14:26] <strcat> but there would be other code depending on the other implementations of the trait
[19:14:33] <strcat> trait impls can be inlined
[19:14:33] <vladimir-lu> yeah
[19:15:03] <vladimir-lu> cmr: so do i need to do anything special to import it?
[19:15:07] <cmr> vladimir-lu: no
[19:15:16] <vladimir-lu> cmr: because it's just complaining that it can't find it
[19:15:42] <cmr> vladimir-lu: gist your code?
[19:17:15] *** Quits: DasIch (dasich@moz-5EDA591.de) (Quit: leaving)
[19:17:57] *** Quits: Archer (Archer@moz-D28C17E1.bb.online.no) (Ping timeout)
[19:17:58] *** Joins: DasIch (dasich@moz-5EDA591.de)
[19:18:04] *** Quits: dew (Instantbir@moz-2C6F2E2.dhcp.stls.mo.charter.com) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[19:18:12] <cmr> http://cmr.github.io/blog/2013/07/21/this-week-in-rust/ feedback?
[19:21:04] <bstrie> cmr: I feel like issue churn is negative every week, but surely that can't be right :P
[19:21:06] <vladimir-lu> hmnn it works in the minimal example
[19:21:06] <doomlord> do any code doc tools have anything like search tags , maybe those are planned
[19:21:13] <cmr> bstrie: only the past two weeks
[19:21:22] <cmr> doomlord: what do you mean?
[19:21:23] <bstrie> negative churn means fewer issues, right?
[19:21:30] <cmr> For search http://erldocs.com/ is my inspiration
[19:21:31] <cmr> bstrie: yup
[19:21:34] *** Joins: dew (Instantbir@moz-2C6F2E2.dhcp.stls.mo.charter.com)
[19:22:00] <doomlord> keywords for searches - similar to the tags that are added on many web services
[19:22:46] <vladimir-lu> cmr: "the Tuesday meeting discussed nothing *it* all of importance"
[19:22:50] <vladimir-lu> small spelling error
[19:22:54] <cmr> vladimir-lu: thanks
[19:22:54] <doomlord> obviously the concepts included in the language are a good starting point (argument/return types) .. but you could annotate more information manually
[19:23:19] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[19:23:51] <bstrie> cmr: looks awesome, thanks
[19:23:57] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[19:23:59] <doomlord> http://en.wikipedia.org/wiki/Tag_%28metadata%29 << this sort of thing. add search tags to function names, etc
[19:24:08] <bstrie> these are really helpful for keeping up
[19:24:36] *** Quits: webber46 (webber46@moz-98D2F3C5.cust.bredband2.com) (Quit: webber46)
[19:24:38] <cmr> bstrie: (un)amusingly the people who originally inspired me to do it never actually got going with rust, it seems
[19:24:39] <doomlord> key thing being its non-heirachical organization
[19:24:54] <bstrie> cmr: who>
[19:24:59] <cmr> bstrie: mongodb interns
[19:25:16] <bstrie> possibly for the best :)
[19:26:06] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:26:07] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Connection reset by peer)
[19:26:49] <cmr> I dunno. I think it still might be a bit premature for db drivers
[19:28:10] *** Joins: MaikKlein1 (maik@moz-EFA928EF.dip0.t-ipconnect.de)
[19:28:32] <cmr> plus it would make rust *web scale*
[19:29:38] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[19:30:11] <vladimir-lu> cmr: my problem was that once you move the struct impl out of module, you can't call MyStruct::method on it - instead you need MyStruct.method
[19:30:27] <doomlord> (flickr seems to be a typical example of a tag-based search))
[19:30:39] <cmr> vladimir-lu: You can't *ever* call MyStruct::method unless it's an associated function
[19:31:55] <vladimir-lu> cmr: hmnn i did it just fine, let me gist it
[19:33:03] <vladimir-lu> https://gist.github.com/vladimir-lu/d68b65481cdeac741dfe
[19:33:23] *** Joins: Archer (Archer@moz-D28C17E1.bb.online.no)
[19:33:23] <cmr> right, that's an associated function
[19:33:29] <cmr> (aka, "static method")
[19:33:44] <vladimir-lu> ok, so why can't i call it cross-module?
[19:33:57] *** Quits: zxcdw (r-a@858B320D.B543C4DE.3933CC16.IP) (Ping timeout)
[19:34:07] <cmr> You should be able to
[19:34:20] <vladimir-lu> had to restort to .
[19:34:24] <Crnobog> What error do you get when you try?
[19:34:46] <sp3d> cmr: "blatent"->"blatant" in TWiR
[19:35:08] *** Joins: zxcdw (r-a@858B320D.B543C4DE.3933CC16.IP)
[19:35:10] <vladimir-lu> oh
[19:35:12] <cmr> sp3d: one of these days I'll set spellcheck to always be on in vim
[19:35:16] <cmr> vladimir-lu: https://gist.github.com/cmr/08a1ed3173144dac3b51
[19:35:18] <cmr> WFM
[19:35:30] <vladimir-lu> it's because i'm in a test module
[19:35:42] <sp3d> yeah, spellchecking identifiers in code is also nice once in a while, maybe as a pre-commit so you can filter out typos from abbreviations
[19:35:49] <vladimir-lu> use super::* doesn't import super's imports
[19:35:54] <sp3d> but maybe I'm a little excessive on that front ;)
[19:35:54] <vladimir-lu> . doesn't work either
[19:36:13] <cmr> vladimir-lu: nor should it; that's what `pub use` is for
[19:37:52] * vladimir-lu learns another thing, pub use this time
[19:38:03] <cmr> :)
[19:38:15] <cmr> you probably don't want pub use though
[19:38:21] <cmr> just re-import, or use super::foo::bar
[19:40:00] <dsd> Is there a chance that there is gonna be a rust-sdk for firefox os?
[19:40:18] *** Quits: nano (nano@moz-972880B.superkabel.de) (Connection reset by peer)
[19:40:29] *** Quits: bytbox (s@moz-DC83764A.washdc.fios.verizon.net) (Ping timeout)
[19:40:43] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[19:43:02] *** Quits: dforsyth (dforsyth@A677A619.1C765EF.EE6E63A5.IP) (Ping timeout)
[19:43:36] *** Quits: joelteon (joel@moz-317E8D0C.io) (Ping timeout)
[19:47:55] *** Joins: true_droid (Adium@moz-123FD9B8.beck.volia.net)
[19:48:46] *** Joins: dylukes (dylukes@moz-393CE4CD.hsd1.pa.comcast.net)
[19:49:00] <mark_edward> dsd: i'd love that so, but i think firefox OS you write stuff in HTML5 and stuff
[19:49:54] *** Quits: Ms2ger (Ms2ger@moz-12781595.adsl-dyn.isp.belgacom.be) (Quit: nn)
[19:50:26] <dsd> mark_edward: yeah, the gui is html5-based. but one could simply provide a dom-api and then replace js with rust.
[19:50:54] <dsd> cause, frankly, js sucks as an application development language.
[19:50:58] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:51:16] <mark_edward> i dont think mozilla has that in mind though
[19:51:27] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[19:51:28] <mark_edward> graydon: do you know the answer to dsd's question for sure?
[19:51:31] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[19:51:46] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:51:57] <sp3d> does anyone know what rust's opinion on newlines is, in general? is a lonely \r considered the end of a line of rust code?
[19:52:30] <strcat> rusti: 2
[19:52:32] -rusti- 2
[19:54:42] <sp3d> strcat: IRC turns \r into \r\n
[19:54:45] <sp3d> IIRC
[19:54:55] * strcat shrugs
[19:55:01] <kimundi> rusti: "a\nb"
[19:55:02] -rusti- "a\nb"
[19:55:11] <sp3d> I'm more curious about the intent than what the implementation does
[19:55:12] *** Quits: jclements (jclements@moz-98A7BA64.ngn.east.myfairpoint.net) (Quit: jclements)
[19:55:13] <kimundi> rusti: "a/nb"
[19:55:14] -rusti- "a/nb"
[19:57:09] *** Joins: bytbox (s@moz-DC83764A.washdc.fios.verizon.net)
[19:57:41] *** Joins: jviereck (Adium@moz-A034D4DA.dclient.hispeed.ch)
[19:57:49] *** Quits: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net) (Client exited)
[19:58:15] *** Joins: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net)
[19:58:32] *** Quits: jviereck (Adium@moz-A034D4DA.dclient.hispeed.ch) (Quit: Leaving.)
[19:58:54] <sp3d> yeah, the implementation, like the manual, thinks "//\rfn main() {}" is missing a main function
[19:59:44] <dsd> who's rusti?
[19:59:57] <sp3d> rusti: "a rust-executing bot"
[19:59:58] -rusti- "a rust-executing bot"
[20:00:04] *** Joins: drumond19 (drumond19@1125C663.26437150.C55BF118.IP)
[20:00:14] <dsd> rusti: println ('asfd')
[20:00:14] -rusti- <anon>:7:18: 7:23 error: unterminated character constant
[20:00:14] -rusti- <anon>:7          println ('asfd')
[20:00:14] -rusti-                            ^~~~~
[20:00:14] -rusti- application terminated with error code 101
[20:00:21] *** Quits: santiago (santiago@moz-8ADE82B4.socal.res.rr.com) (Ping timeout)
[20:00:32] <dsd> rusti: fn main() { println ("asfd"); }
[20:00:34] -rusti- ()
[20:00:40] <engla> rusti is also the name of the REPL shipping with rust, and nowadays it works (I learned yesterday)
[20:00:48] <dsd> rusti: fn main() { println ('asfd'); }
[20:00:49] -rusti- <anon>:7:30: 7:35 error: unterminated character constant
[20:00:49] -rusti- <anon>:7          fn main() { println ('asfd'); }
[20:00:49] -rusti-                                        ^~~~~
[20:00:49] -rusti- application terminated with error code 101
[20:00:54] *** Quits: tcr (tcr@moz-EE576D3C.hsd1.ma.comcast.net) (Ping timeout)
[20:01:02] <strcat> dsd: it's already inside a main fn
[20:01:21] <strcat> rusti: let xs = [1, 2, 3, 7, 19]; xs.iter().fold(0, |a, &b| a + b)
[20:01:22] -rusti- 32
[20:01:32] <dsd> rusti: println ("asfd")
[20:01:32] -rusti- asfd
[20:01:33] -rusti- ()
[20:01:37] <dsd> slowly, slowly ;)
[20:01:55] *** Quits: drumond19 (drumond19@1125C663.26437150.C55BF118.IP) (Ping timeout)
[20:02:10] <dsd> rusti: asdf loop { println ("asfd") }
[20:02:10] -rusti- <anon>:7:14: 7:18 error: expected `;` or `}` after expression but found `loop`
[20:02:10] -rusti- <anon>:7          asdf loop { println ("asfd") }
[20:02:10] -rusti-                        ^~~~
[20:02:10] -rusti- application terminated with error code 101
[20:02:30] <sp3d> github search thinks "r?" is the same thing as "\r" :(
[20:02:49] <strcat> sp3d: it can't really search special characters
[20:02:51] <strcat> it's pretty bad
[20:03:26] *** Joins: santiago (santiago@moz-8ADE82B4.socal.res.rr.com)
[20:03:33] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[20:04:17] *** Joins: Brons (Say@B727401F.7B4553A3.D30D16A2.IP)
[20:04:48] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[20:04:48] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/ghG5oA
[20:04:48] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[20:07:08] *** Joins: joelteon (joel@moz-317E8D0C.io)
[20:07:46] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[20:07:46] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/eGWT-A
[20:07:46] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[20:07:47] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[20:07:47] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/2kNvHA
[20:07:47] <ghrust> 13rust/06auto 140bba8f4 15Alex Crichton: Add tests for issues which can be closed...
[20:07:47] <ghrust> 13rust/06auto 14e336cbf 15bors: auto merge of #7923 : alexcrichton/rust/add-tests, r=graydon...
[20:07:47] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[20:07:57] *** Parts: Brons (Say@B727401F.7B4553A3.D30D16A2.IP) ()
[20:08:06] *** Quits: dylukes (dylukes@moz-393CE4CD.hsd1.pa.comcast.net) (Ping timeout)
[20:08:35] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[20:08:58] *** Quits: joelteon (joel@moz-317E8D0C.io) (Ping timeout)
[20:10:23] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[20:10:39] *** Joins: joelteon (joel@moz-317E8D0C.io)
[20:11:26] *** Joins: dforsyth (dforsyth@A677A619.1C765EF.EE6E63A5.IP)
[20:13:20] *** Quits: dforsyth (dforsyth@A677A619.1C765EF.EE6E63A5.IP) (Ping timeout)
[20:13:30] *** Quits: joelteon (joel@moz-317E8D0C.io) (Ping timeout)
[20:16:09] *** Joins: joelteon (joel@moz-317E8D0C.io)
[20:16:13] <kimundi> sp3d: As far as legacy implementation details go, I remember thet string functions care about \n and \r\n, but not abuot \r
[20:16:27] *** Joins: dforsyth (dforsyth@A677A619.1C765EF.EE6E63A5.IP)
[20:16:28] <sp3d> ah, good to know
[20:16:44] *** Quits: ssbr (ssbr@moz-141F89C6.block0.gvtc.com) (Ping timeout)
[20:16:48] *** Quits: dsd (dsd@moz-B58A1E87.dclient.hispeed.ch) (Quit: ...)
[20:17:06] <sp3d> I feel like this kind of thing is rather important to get right, because a lot of times this kind of detail gets ignored and then things begin to depend on different behaviors from different pieces of software
[20:17:08] *** Joins: ssbr (ssbr@moz-141F89C6.block0.gvtc.com)
[20:18:07] <sp3d> plus it'd be nice to see rust's grammar verified and I think some of the details in that haven't been looked at too closely
[20:18:14] <mark_edward> kimundi: is there a way to get a FILE* from a rust FileReear/writer?
[20:18:21] <cmr> sp3d: verified as in what?
[20:18:25] <cmr> there is an antlr grammar
[20:19:12] *** Joins: dylukes (dylukes@moz-393CE4CD.hsd1.pa.comcast.net)
[20:19:19] <kimundi> mark_edward: Dunno, not familiar with that part of the libraries
[20:19:24] <sp3d> mostly, verified to match what the implementation accepts
[20:20:10] *** Quits: dylukes (dylukes@moz-393CE4CD.hsd1.pa.comcast.net) (Quit: Computer has gone to sleep.)
[20:20:11] <kimundi> sp3d: It seems the norm is to have \n, with \r\n only relevant for windows compatibilty
[20:20:45] <sp3d> kimundi: what do you mean, "have"?
[20:20:57] <sp3d> I agree that programs really shouldn't be producing \r newlines in this day and age
[20:21:20] <vladimir-lu> rusti: print("a\nb");
[20:21:21] -rusti- a
[20:21:21] -rusti- b()
[20:21:37] <sp3d> rusti: print("a\rb");
[20:21:38] -rusti- a
[20:21:38] -rusti- b()
[20:21:41] <strcat> kimundi: you can still just use \n on windows
[20:21:46] <strcat> as long as they're not using notepad it works fine
[20:21:51] <kimundi> well, everywhere where I saw a escaped newline in a string literal it was \n
[20:21:53] <vladimir-lu> i was told by strcat or someone that \n will be turned to \r\n on windows
[20:21:56] <kimundi> strcat: Sure
[20:22:11] <strcat> vladimir-lu: in text mode
[20:22:27] <kimundi> Maybe it would be best to just fix it at "we accpt \n and nothing more"
[20:23:02] <sp3d> many windows programs and other environments (e.g. IRC) generate \r\n sequences though
[20:23:16] <SiegeLord> What uses \r alone as a newline?
[20:23:25] <sp3d> Mac OS 9 and some other legacy environments
[20:23:26] <cmr> Mac 9
[20:23:31] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[20:23:56] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[20:23:58] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:24:19] <sp3d> but a lot of programs will treat lonely \r as a newline even if they won't generate it
[20:24:30] <kimundi> sp3d: Sure, but that doesn't mean rustc has to accept it
[20:24:53] <sp3d> sure, maybe not
[20:25:17] *** Quits: Archer (Archer@moz-D28C17E1.bb.online.no) (Ping timeout)
[20:25:36] <kimundi> I think it's not unresonable to say that rs files have to be utf8 with single \n newline terminators
[20:25:36] <cmr> rustc shouldn't accept anything except \n, I think
[20:25:39] <cmr> avoid the issue entirely.
[20:26:05] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:26:16] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[20:26:27] <kimundi> The string type itself on the other hand...
[20:26:53] <kimundi> seeing how valid ascii is valid utf8, I don't think we can make any guarantees there
[20:27:21] <doy> windows editors will be generating files with \r\n
[20:27:40] <sp3d> cmr: that means you can't write rust code in notepad, have to tweak settings in some other editors on Windows, and have to be careful getting rust code from places that might convert newlines (e.g. wget from a pastebin's raw view)
[20:27:48] <kimundi> doy: Only bad ones where you can't change it
[20:27:53] <cmr> sp3d: fine with me
[20:27:56] *** Quits: MaikKlein1 (maik@moz-EFA928EF.dip0.t-ipconnect.de) (Ping timeout)
[20:27:56] <doy> kimundi: irrelevant
[20:28:12] <doy> it's going to make a lot of people quite irritated if you don't accept \r\n
[20:28:31] <doy> especially since basically every other major language does
[20:28:34] <sp3d> I'll be upset when I can't save code from pastebin's raw or other websites and compile it with rustc
[20:29:04] <cmr> *shrug* just my opinion
[20:29:25] <doy> opinions from people who don't use windows aren't very useful here, i think(:
[20:29:37] <cmr> I do use windows!
[20:29:51] <cmr> and I have all of my editors (np++, vs, eclipse) set to \n
[20:29:55] <kimundi> Me too! Just not... for rust work ;)
[20:30:15] <doy> (:
[20:30:23] <cmr> because tools suck at newlines, so just using one is the only sane thing to do
[20:30:33] <sp3d> interesting, we do have a test using \r in comments
[20:30:41] <doy> depends on which tools you're using
[20:30:43] <sp3d> test/pretty/block-comment-wchar.rs
[20:31:09] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[20:33:59] *** Joins: Azdle (patrick@moz-8C723B60.hsd1.mn.comcast.net)
[20:34:30] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[20:34:34] <sp3d> hmmm, maybe we can punt this to unicode
[20:34:55] <sp3d> https://en.wikipedia.org/wiki/Newline#Unicode
[20:35:21] <cmr> Yes! Make their committees do all the hard work
[20:35:28] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[20:35:54] <doy> +1
[20:36:32] *** Joins: MaikKlein1 (maik@moz-EFA928EF.dip0.t-ipconnect.de)
[20:37:50] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[20:43:49] <true_droid> how do I capture a copy of an int variable in a closure?
[20:44:57] <strcat> true_droid: just refer to the variable
[20:45:23] *** Joins: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net)
[20:46:25] <true_droid> strcat: if I have let mut a = 5;, referring to a inside a lambda expr captures a reference to a
[20:46:30] <tcsc> rusti: f64::from_str("3.14")
[20:46:33] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/jcNG
[20:47:06] <tcsc> rusti: std::f64::from_str("3.14")
[20:47:08] -rusti- Some(3.14)
[20:47:17] <tcsc> i think that's broken on 0.7
[20:47:29] <tcsc> returns None for me...
[20:47:37] <strcat> well, use master
[20:47:42] <tcsc> yeah
[20:48:03] <cmr> tcsc: there is a test failure related to that
[20:48:08] <cmr> but it doesn't reproduce on the buildbots
[20:48:46] <tcsc> weird, std::float works but gives the wrong results
[20:49:00] <tcsc> rusti: std::float::from_str("3.14")
[20:49:01] -rusti- Some(3.14)
[20:49:18] <tcsc> well, that's good to know.
[20:50:19] *** Joins: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net)
[20:51:15] *** Quits: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net) (Quit: ["Textual IRC Client: www.textualapp.com"])
[20:51:37] <tcsc> does std::{f64,float}::from_str handle rounding correctly?
[20:52:21] <cmr> probably not
[21:00:43] *** Joins: drumond19 (drumond19@1125C663.26437150.C55BF118.IP)
[21:01:56] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[21:01:59] <true_droid> is possible at all for a closure to outlive its captured variables?
[21:02:24] *** Quits: drumond19 (drumond19@1125C663.26437150.C55BF118.IP) (Ping timeout)
[21:02:54] <cmr> true_droid: not &fn no
[21:03:18] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[21:03:32] *** Quits: Earnestly (earnest@2AB30F53.FB5005.2BCC804A.IP) (Ping timeout)
[21:04:37] <true_droid> cmr: I've just read about @fn, but now I'm getting new errors https://gist.github.com/alco/6049964
[21:05:40] <cmr> true_droid: you tried to return a &fn where a @fn is expected
[21:05:48] <cmr> @|x: int| { x + a }
[21:06:22] <true_droid> I get it, the problem was with the cl variable. 
[21:07:57] <true_droid> thanks
[21:08:38] <Crnobog> Is there such a thing is ~fn with closures?
[21:09:00] <engla> yes
[21:09:20] <engla> ~fn is implicity ~fn:Send() which is a sendable closure
[21:12:17] <Crnobog> Okay
[21:12:36] <Crnobog> Can you return a &fn closure from a function?
[21:13:09] <cmr> I'm not positive, but I'd imagine you could if you don't capture any borrowed pointers?
[21:13:15] * cmr doesn't really understand closures
[21:13:43] <engla> Crnobog: yes you can
[21:13:51] <engla> for example a &'static fn is fine
[21:14:22] <engla> I think.
[21:14:52] <Crnobog> I can imagine it getting messy
[21:15:05] <engla> niko cleared up something for me with "Unfortunately, because the environments for closures are stack-allocated, closures cannot be returned."  https://github.com/mozilla/rust/issues/7814
[21:15:11] <Crnobog> I need to start actually writing some rust code
[21:15:18] *** Joins: Vert (quassel@8A83479C.391ACC8C.CAF63861.IP)
[21:15:34] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[21:15:36] <engla> but you can use lambda syntax for &'static fn too
[21:16:14] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[21:16:48] <engla> rusti: fn f<'a>() -> &'a fn(int) -> int {  |x| { x + 1} }; f()(2)
[21:16:49] -rusti- 3
[21:18:17] <true_droid> engla: is "static" just a placeholder name there?
[21:18:36] <cmr> true_droid: no, the static lifetime is special
[21:18:51] <cmr> Something with the static lifetime is always alive
[21:18:57] <cmr> ie, the lifetime is the entire program
[21:19:06] *** Quits: doener (doener@moz-121949B3.unitymediagroup.de) (Quit: leaving)
[21:19:16] <engla> closures are composed of a function pointer and an environment pointer. The function pointer is 'static, it's always alive
[21:19:28] <engla> stack closures allocate the environment on the stack, so they cannot be returned
[21:19:47] <engla> so you need a closure without environment or a ~fn or @fn to return it
[21:20:10] <true_droid> so the &'a fn syntax intersects the static lifetime with a ?
[21:20:11] <engla> on the other hand you see the pattern of passing down stack closures a lot
[21:20:33] <cmr> true_droid: that's one way to think about it I suppose
[21:22:06] <engla> cmr: for the hashset intersect etc iterators I had to implement an alternative filter iterator adaptor with explicit environment
[21:22:33] <engla> strcat and I both believed it should be possible to make the regular .filter() work but it turns out it's not
[21:23:45] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[21:23:50] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[21:27:38] <sp3d> engla: is the funciton pointer 'static by happenstance (all functions are present for the lifetime of the program) or does the definition of a closure mark it as needing a 'static lifetime?
[21:27:44] <sp3d> function*
[21:27:51] *** Joins: Earnestly (earnest@2AB30F53.FB5005.2BCC804A.IP)
[21:28:45] <engla> the function is compiled in, so it would be 'static by default
[21:29:40] <sp3d> yeah, but in an environment with dlopen/dlclose or JIT you could have other lifetimes on functions, presumably
[21:30:09] <engla> yes no idea how that would be handled
[21:30:24] <sp3d> seems like it should be representable, but maybe it'd take some tricks
[21:30:26] <cmr> unsafe magic I suppose
[21:30:44] <engla> lifetimes are tied to scopes so it doesn't really fit
[21:33:04] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Quit: ChatZilla 0.9.90 [Firefox 22.0/20130618035212])
[21:33:37] <true_droid> I'd love to see a side-by-side comparison with C++11 lambdas, that could clear up some things I'm hoping
[21:36:47] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[21:40:19] <slaren> when I make an alias of an struct (using 'type alias = my_struct') I can't then use the alias as a struct constructor, ie. 'let x: alias { a: 1, b: 2 }' fails with "alias does not name a structure"
[21:40:26] <slaren> this seems weird to me, is this the intended behavior ?
[21:40:37] <cmr> slaren: yes
[21:40:44] <cmr> I don't like it eithr
[21:40:46] <cmr> *either
[21:40:52] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[21:41:29] *** Quits: MaikKlein1 (maik@moz-EFA928EF.dip0.t-ipconnect.de) (Ping timeout)
[21:42:51] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[21:44:01] <vladimir-lu> true_droid: someone should add something about lambdas to https://github.com/mozilla/rust/wiki/Rust-for-CXX-programmers
[21:44:53] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Connection reset by peer)
[21:44:56] *** Joins: maxli1 (maxli@B5559308.9C54E60.2FA4EA88.IP)
[21:45:16] <engla> good idea vladimir-lu. I don't know enough myself
[21:45:32] <engla> there might still be changes to Rust closures though
[21:45:43] <cmr> there is active closure reform isn't there?
[21:45:59] <engla> it doesn't seem active
[21:46:12] <engla> just the occational mention
[21:48:13] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[21:50:23] *** Joins: robertknight_ (robertknig@moz-AB0E96D7.range86-162.btcentralplus.com)
[21:53:47] *** Joins: ross (ross@moz-8A84103E.br.br.cox.net)
[21:55:52] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[21:55:52] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/2kNvHA
[21:55:52] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[21:58:48] *** Joins: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP)
[21:58:49] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/3pUg0g
[21:58:49] *** Parts: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP) ()
[21:58:49] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[21:58:49] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/-SW-Pg
[21:58:49] <ghrust> 13rust/06auto 14c062510 15Alex Crichton: Allow linking against crates with #[no_std]...
[21:58:49] <ghrust> 13rust/06auto 1482e2603 15bors: auto merge of #7924 : alexcrichton/rust/opt-lang-xcrate2, r=thestinger...
[21:58:50] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[22:02:37] <jensnockert> I meet my nemesis, @, again, while exploring the jungle of std::io :(
[22:05:34] <tcsc> jensnockert: the worst i've seen is it being in extra::arena
[22:05:48] <tcsc> not that i'm an expert or anything.
[22:06:00] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[22:06:01] <jensnockert> The weirdest thing is that I have no idea why sharing a Reader/Writer would be a good idea.
[22:06:11] <engla> std::rt::io is the WIP
[22:07:03] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[22:07:32] <cmr> jensnockert: @Trait are the only ones that work
[22:07:35] <cmr> historically and currently
[22:07:51] <cmr> ~ and & both have bugs (and soundness issues iirc)
[22:09:08] <cmr> tcsc: extra::arena is basically dead code
[22:09:48] <tcsc> cmr: yeah, it didn't look like something worth using
[22:12:31] <jensnockert> cmr: Oh, that makes sense then :(
[22:12:51] *** Joins: bytewise (bytewise@moz-649C630D.unitymediagroup.de)
[22:12:52] *** Quits: robertknight_ (robertknig@moz-AB0E96D7.range86-162.btcentralplus.com) (Ping timeout)
[22:12:59] <jensnockert> Any timeframe on when ~Trait and &Trait will be fixed :(
[22:13:05] <cmr> soon as you fix it :P
[22:13:26] <jensnockert> That's usually the answer isn't it? ;)
[22:13:48] <engla> what's the soundness issue with ~Trait?
[22:13:58] <cmr> I think it was in &Trait
[22:14:00] <cmr> not positive
[22:14:03] <engla> ok
[22:14:20] <tcsc> wow, that sucks. somehow {f64,float}::from_str is still broken on master for me
[22:14:38] <cmr> tcsc: not really surprising... nobody has touched it for a while
[22:14:44] <cmr> the code is quite nasty too
[22:15:02] <cmr> it's meant as a stop-gap iirc
[22:15:05] <cmr> bjz: ping ^
[22:15:41] <tcsc> cmr: what's my best bet, assuming i need to parse a float
[22:16:31] <jensnockert> tcsc: Try libc::scanf?
[22:16:36] <bjz> cmr: what's that?
[22:16:38] <cmr> heh
[22:16:45] <cmr> bjz: from_str breakages
[22:17:35] <bjz> cmr: I'm really not involved in numeric parsing, but I do know that we certainly need a rewrite.
[22:17:44] <cmr> ah
[22:18:13] <bjz> the current implementation of from_str and to_str allocates too much
[22:18:25] <tcsc> basically std::f64::from_str returns None on anything with . in it, and std::float::from_str just returns the number up to the dot
[22:18:51] <bjz> it also is conceptually opposed to the current numeric traits
[22:18:58] <tcsc> std::f32::from_str seems to work, but with egregious rounding errors
[22:19:07] <bjz> :(
[22:19:17] <engla> tcsc: did you test using , as decimal separator?
[22:19:20] <engla> is that the thing?
[22:19:29] <cmr> quite odd, std::float and std::f64 should be the same...
[22:19:33] <bjz> tcsc: we really need somebody to take up this challenge
[22:20:22] <tcsc> bjz: how is it conceptually opposed to the current numeric traits?
[22:20:34] <bjz> tcsc: most of the ugliness has been swept under the carpet in strconv
[22:20:43] <bjz> in the implementation
[22:21:08] <tcsc> engla: nothing works with "," as the separator
[22:21:23] <cmr> float parsing should also use conditions
[22:21:38] <cmr> or have more robust error results
[22:21:43] <engla> ok
[22:21:49] <bjz> tcsc: I can see there would be lots of bugs hidden in there, due to the way it has been implemented
[22:22:56] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[22:23:22] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[22:23:46] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[22:23:52] <SiegeLord> How do you get the macro!{} syntax?
[22:24:02] <cmr> SiegeLord: macro_rules! foo { ... }
[22:24:05] <engla> I can see there being bugs since the test suite for strconv is just 20 lines for a 1000 line module
[22:24:15] <cmr> engla: the test suite doesn't even run on my box
[22:24:16] <engla> ok 705 lines
[22:24:24] <cmr> I have no idea how the buildbots continue to pass
[22:24:25] *** Quits: true_droid (Adium@moz-123FD9B8.beck.volia.net) (Quit: Leaving.)
[22:24:30] <SiegeLord> Are there more delimeters it works with?
[22:24:35] <cmr> SiegeLord: not afaik
[22:24:39] <engla> everything passes on my box
[22:24:50] <cmr> engla: that's part of the problem :\
[22:24:57] <cmr> varying degrees of broken, with no obvious reason
[22:25:08] <tcsc> well most float<->string conversion libraries are broken in one way or another
[22:26:11] <tcsc> but that way is usually just rounding
[22:26:41] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[22:28:40] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[22:28:40] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1482e2603 to 14e336cbf: 02http://git.io/N3iJvQ
[22:28:40] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[22:28:41] *** Joins: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP)
[22:28:41] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/eErs2g
[22:28:41] <ghrust> 13rust/06auto 143509f9d 15blake2-ppc: str: Implement Container for ~str, @str and Mutable for ~str...
[22:28:41] <ghrust> 13rust/06auto 14fe3f75f 15bors: auto merge of #7932 : blake2-ppc/rust/str-clear, r=huonw...
[22:28:41] *** Parts: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP) ()
[22:29:00] <cmr> So.. why hasn't anyone wrote a robust cross-platform C library to handle this yet?
[22:29:08] <cmr> (correct, robust, efficient)
[22:31:21] <tcsc> cmr: float<->string conversion?
[22:32:16] <cmr> tcsc: yeah
[22:32:24] *** Joins: jmsaunde (jmsaunde@moz-6FB6A254.cmclub.uwaterloo.ca)
[22:32:42] <sfackler> do scanf and printf do it wrong?
[22:32:52] <tcsc> cmr: there are a few. dtoa.c and double_conversion spring to mind
[22:32:59] <tcsc> sfackler: depends on the implementation, usually
[22:33:30] <tcsc> they work, but round incorrectly
[22:33:40] <sfackler> ah
[22:33:45] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[22:34:27] <doomlord> does rusts grammar mean automated parser generators work
[22:34:35] <cmr> doomlord: yes
[22:34:41] <cmr> there is an antlr grammar
[22:34:48] <cmr> and another one too somewhere, that's incomplete
[22:35:02] * vladimir-lu wants a parse combinator that parses rust (written in rust)
[22:35:05] <vladimir-lu> *parser
[22:35:57] <doomlord> i would like a syntax hiighlighter that colour codes types, i bet thats theoretically possible
[22:36:48] *** Joins: Nefzaoui (chatzilla@BB4F14E.ED9AB01B.80E43DAF.IP)
[22:39:31] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[22:40:02] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[22:40:56] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[22:45:07] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[22:46:50] <jensnockert> I want to be able to create a constant from a FourCC :(
[22:48:39] *** Joins: drumond19 (drumond19@1125C663.26437150.C55BF118.IP)
[22:52:46] *** Quits: drumond19 (drumond19@1125C663.26437150.C55BF118.IP) (Client exited)
[22:53:33] *** kimundi is now known as zz_kimundi
[22:54:15] *** Quits: qmx (qmx@moz-D6C3C2E6.qmx.me) (Ping timeout)
[22:58:29] *** Joins: MaikKlein1 (maik@moz-EFA928EF.dip0.t-ipconnect.de)
[22:58:39] *** Joins: qmx (qmx@moz-D6C3C2E6.qmx.me)
[23:00:50] <cmr> doomlord: here's a project: libclang based C->Rust convertor :)
[23:01:00] <cmr> just a basic unsafe->unsafe conversion
[23:01:11] <doomlord> great to see!
[23:01:11] <cmr> although there are probably enough corner cases to drive you insane
[23:01:16] <doomlord> i bet :)
[23:01:42] <doomlord> (it would be great to see something like that.)
[23:01:53] <jensnockert> Oh dear, silly bug in Reader :S
[23:02:05] <jensnockert> This code won't have any chance of working on a 32-bit platform.
[23:02:07] <doomlord> i tend to suffer from incapacitating ideas rush as it is,
[23:02:27] * jensnockert really really should fix file offsets from int to at least i64.
[23:02:49] *** Quits: Nefzaoui (chatzilla@BB4F14E.ED9AB01B.80E43DAF.IP) (Connection reset by peer)
[23:02:51] <doomlord> but i was wondering about that sort of thing with template code
[23:03:11] <cmr> I don't think it's possible with templates
[23:03:14] <cmr> maybe simple, trivial templates
[23:03:44] <doomlord> definitely not everything
[23:04:26] <doomlord> i was half thinking ... how about an AST library that has nodes representative of the concepts in both languages
[23:04:43] <doomlord> some sort of imaginary superset
[23:06:33] <doomlord> the ability to roll vtables for trait objects , c++ objects between languages might be nice
[23:07:26] <doomlord> (make a C++ view of trait objects... and make a rust view of c++ vtables-objects... only create the objects in the relevant language, but might ease writing rust plugins for C++ programs, and vica versa...))
[23:08:22] <jensnockert> Writing a Rust<->ObjC bridge would be a lot easier.
[23:09:17] <doomlord> C++ bindings is a high priority for me because i have C++ source already ,   i suppose objC has concepts that map better onto trait objects?
[23:09:31] <jensnockert> Yeah.
[23:09:52] <engla> obj-c has runtime method lookup
[23:10:02] * engla hasn't touched objc since .. long time
[23:10:05] <jensnockert> Which is essentially the same thing as ~Trait.
[23:10:25] <doomlord> would it be fair to describe trait objects as halfway,i thought traits were less dynamic that objC but more dynamic than C++
[23:10:26] <engla> except you can dispatch on strings
[23:10:55] <engla> you can do something like  object_has_method(obj, "mymethod") in objc
[23:10:58] <strcat> doomlord: they aren't any more dynamic than virtual methods in C++ when used as objects
[23:11:00] <jensnockert> doomlord: Traits are a lot less dynamic than ObjC, yes.
[23:11:02] <doomlord> trait objects are a vtable carried around with the pointer, rather than embedded in the object?
[23:11:09] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[23:11:10] *** ChanServ sets mode: +o dherman
[23:11:16] <strcat> doomlord: a trait object is 2 pointers
[23:11:27] <strcat> the pointer the object (determined by the sigil) and the vtable/tydesc stuff
[23:11:28] <jensnockert> engla: Yes, but almost no one does, and you could just add a trait for that as well ;)
[23:11:58] <doomlord> i'm looking forward to using that stuff
[23:12:01] <engla> yeah I have no idea about real objc, no idea what the new version added
[23:12:31] *** Quits: LU324 (stuff@moz-A17E9A7B.dyn.embarqhsd.net) (Ping timeout)
[23:12:49] <doomlord> how do COM objects compare to trait objects
[23:12:59] <doomlord> all that microsoft queryinterface stuff
[23:13:01] <jensnockert> doomlord: Essentially the same thing.
[23:13:11] <jensnockert> doomlord: Not counting the queryinterfaces stuff.
[23:13:45] *** Joins: LU324 (stuff@moz-A17E9A7B.dyn.embarqhsd.net)
[23:13:50] <jensnockert> I guess you could implement IUnknown as a trait though.
[23:14:11] <doomlord> i wont ask how traits compare to CLOS
[23:14:50] *** Quits: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net) (Quit: computer sleeping)
[23:15:02] <graydon> CLOS is much more complex and involves much more runtime machinery
[23:15:26] <graydon> CLOS has nothing to do with COM though :)
[23:15:33] <Crnobog> oh hang on I bet I can debug rust executables with visual studio if all I want is symbols and disassembly
[23:15:43] <graydon> yes. it's a bit awkward but it'll work.
[23:15:57] <cmr> Crnobog: if you can get it to run in VS, that is
[23:16:12] <strcat> graydon: can you teach me how to make a snapshot?
[23:16:14] <Crnobog> The most awkward thing will probably be getting VS to launch it with the right PATH to find rustrt.dll etc
[23:16:21] <cmr> right
[23:16:24] <graydon> doomlord: rust trait objects do not have QI. they do (more or less) have the requisite opaque reference counting / storage management mechanisms, and all calls go through vtables
[23:16:31] <Crnobog> cmr: I guess that's what you meant
[23:16:32] <graydon> strcat: sure. push something to stage3-snap
[23:16:33] *** Joins: Nefzaoui (chatzilla@BB4F14E.ED9AB01B.80E43DAF.IP)
[23:16:48] <cmr> strcat: aatch pointed me to https://github.com/mozilla/rust/wiki/Note-compiler-snapshots one time
[23:16:53] <graydon> er
[23:16:55] <graydon> snap-stage3
[23:16:58] <cmr> Crnobog: and the libgcc stuff yeah,  shouldn't be too hard
[23:17:03] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[23:17:09] <graydon> strcat: just pick a rev off master that looks good and push it. the machines do most of the rest.
[23:17:22] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[23:17:31] <graydon> once it's made the machines will upload the snaps to s3 and include new SHA1s for you to copy into the snapshots.txt file
[23:17:49] <graydon> then you add a new stanza including those SHA1s and land it on master, like any other change
[23:17:50] *** Joins: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP)
[23:17:50] <ghrust> 01[13rust01] 15thestinger merged 06master into 06snap-stage3: 02http://git.io/r7Kx3w
[23:17:50] *** Parts: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP) ()
[23:18:04] <strcat> graydon: ah and then that can just land as a PR
[23:18:07] <graydon> yup
[23:18:08] *** goffrie_ is now known as goffrie
[23:18:09] <strcat> with the removal of stage0 stuff, etc.
[23:18:12] <graydon> yes
[23:18:43] <vodik> strcat: :o
[23:18:47] <graydon> strcat: if you look at a previous snap-stage3 build, say http://buildbot.rust-lang.org/builders/snap3-linux/builds/481
[23:18:58] <graydon> you'll see there are extra steps at the end
[23:19:14] <strcat> ah
[23:19:15] <graydon> "uploading rust-stage0-2013-07-06-a9f178c-linux-i386-584640cd42786031e336f5712d771468dfb281c6.tar.bz2¬†" and such
[23:19:20] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[23:19:48] <graydon> so that name is <date>-<rev>-<host>-<snapshotsha1>
[23:20:01] <graydon> where snapshotsha1 is the sha1 of that .tar.bz2 file
[23:20:05] <graydon> you just copy those fields into snapshots.txt
[23:20:15] <strcat> yup, makes sense
[23:20:15] <graydon> in a stanza associated with <date>-<rev>
[23:20:24] <graydon> have to do it for all the hosts
[23:20:31] <graydon> but otherwise it's about as straightforward as we could make it
[23:22:09] *** Quits: mye (mye@moz-2CE1EA42.dip0.t-ipconnect.de) (Quit: mye)
[23:23:11] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[23:23:24] *** Joins: strcat1 (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:23:33] <engla> is it a new thing that #[bench] functions run on the builders?
[23:23:51] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[23:23:54] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:24:02] *** strcat1 is now known as strcat
[23:26:55] <strcat> ugh, the buildbot web interface is so terribly slow
[23:27:38] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[23:28:19] <doomlord> fmt(!"%?" ) is awesome, i wish i'd seen that earlier
[23:28:54] <strcat> we really need a proper trait-based one
[23:30:06] <MaikKlein1> there are now printing functions with an integrated fmt! right?
[23:30:15] <cmr> MaikKlein1: what?
[23:30:19] <ChrisMorgan> printf!() and printfln!()
[23:30:30] <MaikKlein1> ChrisMorgan, ah thanks
[23:30:35] <ChrisMorgan> i.e. printf!(...) == printf(fmt!(...))
[23:30:36] *** Quits: Earnestly (earnest@2AB30F53.FB5005.2BCC804A.IP) (Ping timeout)
[23:30:42] <engla> I had forgot that
[23:31:01] <MaikKlein1> rusti: printfln!(10);
[23:31:02] -rusti- 10
[23:31:02] -rusti- ()
[23:31:12] <MaikKlein1> rusti: printfln!(10,10);
[23:31:12] -rusti- <anon>:7:19: 7:21 error: first argument to fmt! must be a string literal.
[23:31:12] -rusti- <anon>:7          printfln!(10,10);
[23:31:12] -rusti-                             ^~
[23:31:12] -rusti- application terminated with error code 101
[23:31:22] <MaikKlein1> rusti: printfln!((10,10));
[23:31:23] -rusti- (10, 10)
[23:31:23] -rusti- ()
[23:32:57] <SiegeLord> rusti: printfln!(~"meh");
[23:32:58] -rusti- ~"meh"
[23:32:58] -rusti- ()
[23:34:00] <MaikKlein1> rusti: let f = |x| x; printfln(f);
[23:34:00] -rusti- <anon>:7:24: 7:32 error: unresolved name `printfln`.
[23:34:00] -rusti- <anon>:7          let f = |x| x; printfln(f);
[23:34:01] -rusti-                                  ^~~~~~~~
[23:34:01] -rusti- error: aborting due to previous error
[23:34:01] -rusti- application terminated with error code 101
[23:34:05] <MaikKlein1> rusti: let f = |x| x; printfln!(f);
[23:34:06] -rusti- <anon>:7:13: 7:22 error: cannot determine a type for this local variable: unconstrained type
[23:34:06] -rusti- <anon>:7          let f = |x| x; printfln!(f);
[23:34:06] -rusti-                       ^~~~~~~~~
[23:34:07] -rusti- error: aborting due to previous error
[23:34:07] *** concrete.mozilla.org sets mode: +M 
[23:34:09] -rusti- application terminated with error code 101
[23:35:00] *** Quits: MaikKlein1 (maik@moz-EFA928EF.dip0.t-ipconnect.de) (Quit: Leaving)
[23:35:10] *** Joins: MaikKlein (maik@moz-EFA928EF.dip0.t-ipconnect.de)
[23:35:37] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[23:36:17] <strcat> graydon: huh, for some reason there are a bunch of old commits being built 
[23:37:34] *** Joins: tjc (tjc@moz-5D7271A0.dsl.snfc21.pacbell.net)
[23:37:34] *** ChanServ sets mode: +o tjc
[23:39:10] *** concrete.mozilla.org sets mode: -M 
[23:39:33] <strcat> graydon: well, it's fine now... interrupted the old ones
[23:42:30] *** Joins: jclements (jclements@moz-98A7BA64.ngn.east.myfairpoint.net)
[23:43:14] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[23:44:20] *** sam113101_afk is now known as sam113101
[23:45:22] *** Quits: vosen (vosen@moz-266BA656.icpnet.pl) (Quit: Leaving)
[23:50:47] *** Quits: Vert (quassel@8A83479C.391ACC8C.CAF63861.IP) (Ping timeout)
[23:53:09] *** Joins: dbaupp (Thunderbir@moz-712A1135.lns20.syd6.internode.on.net)
[23:57:37] <jensnockert> Hurray, WAV file parsing, check!
[23:59:24] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[23:59:24] *** ChanServ sets mode: +o dherman
[23:59:32] <dbaupp> jensnockert: does it handle non-8-bit samples properly? ;)
[23:59:34] <dbaupp> cmr: ping
[23:59:55] <jensnockert> dbaupp: As long as you're on a little-endian machine.
