[00:00:10] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[00:00:16] <derek_c> strcat: ah, so even if I don't return ~, the caller would avoid copying by using ~?
[00:00:26] <derek_c> like this? let x = ~foo();
[00:00:29] <strcat> derek_c: there's no copy if they *don't* use ~
[00:00:37] <derek_c> strcat: ?
[00:00:39] <strcat> either way it doesn't copy
[00:00:47] <strcat> ~ doesn't ever make returning more efficient.
[00:00:59] <derek_c> ah ok, I see what you are saying
[00:01:01] <strcat> derek_c: a large value is returned via a pointer, it writes to it
[00:01:05] <strcat> the caller passes in a ptr
[00:01:27] <strcat> the caller can pass a ptr to a stack allocation, or to a ~ allocation
[00:01:29] <strcat> it's their choice
[00:01:49] <strcat> if you return ~T, you're now doing the thing that's more inefficient in most cases and they can no longer choose
[00:02:10] <derek_c> strcat: interesting.  I need to think about this
[00:02:12] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[00:02:13] <derek_c> thanks :)
[00:02:50] <strcat> most code should just be by-value and by-reference/by-mutable-reference, with very few ~/Rc/Gc
[00:03:52] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[00:03:52] *** ChanServ sets mode: +ao brson brson
[00:05:38] <dbaupp> derek_c: as an example, if you have `foo(A,B,C) -> SomethingLarge`, it effectively becomes `foo(A,B,C,&mut SomethingLarge)` "under the hood"
[00:07:07] *** Joins: lfox (lfox@moz-B8648F0F.nycmny.fios.verizon.net)
[00:08:16] *** Joins: jdm (jdm@moz-ED0C7AC7.hinet-ip.hinet.net)
[00:08:16] *** ChanServ sets mode: +o jdm
[00:08:47] *** Quits: lfox (lfox@moz-B8648F0F.nycmny.fios.verizon.net) (Ping timeout)
[00:10:11] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:10:35] *** Joins: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net)
[00:11:34] *** Quits: bjz (bjz@1009100.A27A8065.D3BA2C17.IP) (Ping timeout)
[00:14:18] *** Quits: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net) (Quit: maxiepoo_)
[00:17:05] *** Joins: azita (Azita@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[00:18:33] *** Quits: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[00:18:48] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[00:18:48] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[00:19:14] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[00:23:05] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[00:24:13] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[00:24:54] *** Quits: mark_edward (AndChat806@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Ping timeout)
[00:24:54] *** Joins: lfox (lfox@moz-B8648F0F.nycmny.fios.verizon.net)
[00:25:38] *** Joins: mark_edward (AndChat806@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[00:26:16] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[00:26:23] *** Quits: sebcrozet (sebcrozet@moz-C27D92D8.w193-252.abo.wanadoo.fr) (Ping timeout)
[00:26:59] <pcwalton> acrichto: #10613 looks like a dupe of #6736
[00:27:07] <acrichto> pcwalton: ok cool
[00:27:13] <pcwalton> sorry for closing too early
[00:27:17] <acrichto> oh no worries
[00:27:26] <acrichto> just wanted to make sure there was a path forward to improving it
[00:27:46] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Quit: ChatZilla 0.9.90.1 [Firefox 25.0/20131025151332])
[00:28:03] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[00:29:36] <pcwalton> time to go shoot all uses of Cell I can find
[00:31:06] <ChrisMorgan> pcwalton: are you going to try fixing dedo #10581 again?
[00:31:16] <ChrisMorgan> (first, I mean.)
[00:31:34] <pcwalton> ChrisMorgan: been working on it
[00:31:44] <Luqman> who was it that was once working on making self just a regular argument? erickt?
[00:31:54] <pcwalton> aw, failed again?
[00:32:10] <pcwalton> I wasn't aware anyone was
[00:32:18] <pcwalton> if someone wanted to take a stab at it, that'd be awesome
[00:32:39] <ChrisMorgan> pcwalton: yes, it failed again. And removing unlinked failures, #10603, looks likely in places to make it fail again, so you probably want to rebase on that assuming it passes.
[00:32:40] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[00:32:46] <pcwalton> yeah
[00:33:17] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[00:33:27] <ChrisMorgan> What would making self a regular argument actually entail, syntactically and semantically?
[00:33:54] <pcwalton> ah, this is the fun slog of "people will use deprecated language features to the bitter end"
[00:33:59] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[00:34:29] <Luqman> ChrisMorgan: well it would fix https://github.com/mozilla/rust/issues/10615
[00:35:00] *** Quits: moostik (Icedove@5A22E6A1.10715965.BCDF592F.IP) (Ping timeout)
[00:35:01] <Luqman> since right now we always pass it byref even for `self`
[00:35:23] <ChrisMorgan> rust-http uses ~self in one place because if you take it as self it crashes badly at runtime
[00:36:03] <Luqman> also, it'd be a step towards unified function call syntax
[00:36:25] <dbaupp> ChrisMorgan: is there a bug for that?
[00:36:33] <ChrisMorgan> I haven't ever filed it myself, actually.
[00:36:45] <dbaupp> well it's not gonna get fixed if you do that :P
[00:39:02] *** Quits: icebattle (icebattle@8A14A542.EBE2EE2B.C7CEC4ED.IP) (Quit: Leaving)
[00:39:55] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Client exited)
[00:42:35] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[00:44:32] <bstrie> lkuper: I posted http://colinm.org/language_checklist.html to HN and it appears that half the commenters think it serious
[00:44:38] <bstrie> #shitHNdoes
[00:45:03] *** Joins: tikue_ (tkuehn@moz-DB51A23.pitbpa.fios.verizon.net)
[00:45:09] *** Quits: azita (Azita@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: azita)
[00:45:33] <pcwalton> looks like most of the remaining uses of Cell are Local::borrow
[00:45:36] <pcwalton> which should be RAIIable
[00:45:39] <dbaupp> bstrie: did you fill it out for rust?
[00:46:18] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[00:46:19] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[00:46:50] *** Joins: dcrewi (david@moz-AB8667CE.gyrae.net)
[00:46:53] <bstrie> dbaupp: not yet! feel free :)
[00:46:56] <tikue_> why does hashmap.insert_or_update_with's callback take (K, V) rather than just V? presumably you'd already have K?
[00:47:32] <dbaupp> tikue_: K may move
[00:47:40] <tikue_> dbaupp: how?
[00:48:14] <dbaupp> tikue_: as in, the value K you're putting in the hashmap may have to be moved, so you don't necessarily have K without a clone in the closure (if there was no K argument)
[00:48:25] <tikue_> ohhh
[00:48:32] <tikue_> rue
[00:48:34] <tikue_> true*
[00:50:02] *** Quits: mark_edward (AndChat806@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Ping timeout)
[00:50:02] *** Joins: azita (Azita@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[00:50:25] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[00:50:38] <bstrie> tikue_: https://github.com/mozilla/rust/issues/9995
[00:51:01] <tikue_> bstrie: always a step ahead of me :)
[00:51:16] *** Joins: KindOne (KindOne@moz-522D9841.dynamic.ip.windstream.net)
[00:51:31] *** Joins: tautologico (iorek@E0D804D3.CFE755C8.C27E1635.IP)
[00:51:45] <bstrie> lkuper: the other half of them are eagerly filling out the form for their own bespoke pet languages and pasting the entirety in the comments
[00:52:01] <dbaupp> bstrie: I only see one instance of that?
[00:52:30] <dbaupp> oh, no 3 now
[00:53:42] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[00:57:54] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[01:00:23] <dwrensha> is it possible to `rustpkg install` more than one package in the same workspace?
[01:00:51] <kimundi> afaik yes, that'S what workspaces are for
[01:00:57] <dwrensha> when I do "rustpkg install github.com/steveklabnik/hello" then "rustpkg install github.com/alexcrichton/rs-splay"
[01:00:59] <dwrensha> i get an error
[01:01:07] <dwrensha> nhandled condition: nonexistent_package
[01:01:15] <dwrensha> *unhandled*
[01:01:38] <dwrensha> my RUST_PATH is empty
[01:01:59] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[01:02:04] <pcwalton>  12 files changed, 100 insertions(+), 217 deletions(-)
[01:02:07] <pcwalton> first round of de-Celling
[01:02:31] *** Quits: tikue_ (tkuehn@moz-DB51A23.pitbpa.fios.verizon.net) (Quit: tikue_)
[01:02:32] <pcwalton> there's a decent amount of task::unkillable
[01:02:39] <pcwalton> which will further reduce Cells when removed
[01:02:55] <dwrensha> am I misunderstanding the usage of rustpkg?
[01:03:30] <pcwalton> dwrensha: rustpkg is pretty buggy
[01:04:29] *** Quits: azita (Azita@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: azita)
[01:05:23] <dbaupp> dwrensha: that specific one possibly can be fixed by setting TMPDIR to something on the same partition/device, https://github.com/mozilla/rust/issues/9887
[01:05:28] *** Joins: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[01:05:35] *** Joins: SingingBoyo (brandon@BA479205.57F4D5B1.D758B1AA.IP)
[01:06:35] <brson> yichoi: i'm not going to finish getting android automation up tonight. working on configuring the aws image now. will continue tomorrow
[01:07:30] *** Quits: jordyd (jordyd@7DAC4ACE.77F880E0.D9401097.IP) (Ping timeout)
[01:08:22] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Quit: Sharp)
[01:08:59] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[01:09:05] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:09:39] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Input/output error)
[01:11:10] *** Joins: gandalf (zbraniecki@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[01:11:21] *** Joins: tikue_ (tkuehn@moz-DB51A23.pitbpa.fios.verizon.net)
[01:11:33] *** Quits: tautologico (iorek@E0D804D3.CFE755C8.C27E1635.IP) (Quit: zzz)
[01:13:10] *** Joins: mark_edward (AndChat806@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[01:16:33] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[01:17:11] <dg> does anyone have build experience with rust-sfml on linux? i'm getting a bunch of undefined references https://travis-ci.org/dguenther/rustchip/builds/14399546
[01:17:50] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[01:17:55] *** Quits: lenstr (lenstr@2A2A2196.9DA5669E.3F2079FA.IP) (Broken pipe)
[01:18:02] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[01:19:06] *** Quits: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: brendan)
[01:19:09] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[01:19:50] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[01:20:44] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Connection reset by peer)
[01:21:06] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[01:21:19] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[01:21:31] *** Joins: qwertie (kvirc@DB7229E0.47A9EA86.47483631.IP)
[01:21:45] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[01:22:18] *** Quits: tikue_ (tkuehn@moz-DB51A23.pitbpa.fios.verizon.net) (Quit: tikue_)
[01:22:58] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[01:23:13] <qwertie> I'm curious. What web sites do y'all visit to learn about libraries, algorithms and programming stuff in general?
[01:23:45] <qwertie> e.g. as a .NET developer I often read articles on CodeProject.com
[01:24:29] <tiffany> popular libraries usually have their own websites, algorithms often have wikipedia articles, and a lot of these resources can be discovered through google, especially when you google questions that are answered on stack overflow
[01:24:52] <tiffany> there's a number of blogs I read, like programming in the 21st century
[01:24:54] <qwertie> right, but let's say I don't know specifically what I want to learn
[01:25:28] <qwertie> I'm looking for sites that will just throw stuff at me.
[01:25:34] <wycats_> https://twitter.com/wycats/status/404057877238648832
[01:25:35] <ChrisMorgan> pcwalton: again!
[01:25:35] <wycats_> O_O
[01:25:40] <wycats_> how can this be possible?
[01:25:41] <pcwalton> sigh
[01:25:49] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[01:26:06] <erickt> Luqman: yeah, I was working on making self a regular argument, but I failed at it :(
[01:26:39] *** Joins: mikezaby (mikezaby@moz-AA896205.home.otenet.gr)
[01:26:49] <brson> wycats_: :-)
[01:26:57] *** Parts: mikezaby (mikezaby@moz-AA896205.home.otenet.gr) ()
[01:26:57] <wycats_> HOW CAN THIS BE POSSIBLE
[01:27:10] <ChrisMorgan> wycats_: I found the same thing implementing DES in Java last semester—complicated bit twiddling, a specification which is not actually code, working around the lack of unsigned types, &c. and encryption worked correctly first time!
[01:27:12] <tiffany> that site caters to a lot of languages I don't like very much
[01:27:12] <wycats_> acrichto will attest that the compiler caught a myriad of bugs
[01:27:32] <ChrisMorgan> (In order to keep my sanity, decryption didn't work, but it didn't take me long to find the problem there.)
[01:27:52] <wycats_> many places where I got too close to passing around pointers to things that could change
[01:28:11] *** Quits: peterdn (chatzilla@moz-D11BA78C.as13285.net) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[01:28:12] <wycats_> I am rigorous about never handing mutable references to C
[01:28:31] *** jorendorff is now known as jorendorff_away
[01:28:33] <wycats_> so the compiler is very good about catching mutability bugs reliably
[01:29:09] <ChrisMorgan> Ah, that was fun. My team's implementation of the entire project (distributed DES cracking on Android), where I'd done the DES implementation, ended up fastest of everyone's by a factor of about 1.5—and we had left out the obvious 4x perf win of threading on a quad-core tablet, where the next closest performer had it!
[01:29:23] *** Joins: tikue_ (tkuehn@moz-DB51A23.pitbpa.fios.verizon.net)
[01:30:00] <ChrisMorgan> qwertie: https://en.wikipedia.org/wiki/Special:Random might show you stuff about libs/algos/&c. :P
[01:30:37] *** Quits: apoelstra (username@moz-C92A9641.sw.biz.rr.com) (Ping timeout)
[01:30:43] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[01:31:10] *** Quits: ssbr (~ssbr@46FE74EC.C60FE7DC.4065847B.IP) (Ping timeout)
[01:31:26] <ChrisMorgan> dg: you might need something like specifying link args -lsfml to link it with sfml. Not certain, I haven't worked with external libraries like that before.
[01:31:31] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[01:31:36] *** Joins: lenstr (lenstr@2A2A2196.9DA5669E.3F2079FA.IP)
[01:31:47] <qwertie> ChrisMorgan: but more likely it won't
[01:32:02] <pcwalton> acrichto: r? https://github.com/mozilla/rust/pull/10616
[01:32:04] <pcwalton> some decelling
[01:32:25] <ChrisMorgan> qwertie: hmm... "List of human nerves". Not quite programming-related.
[01:32:51] <ChrisMorgan> pcwalton: enjoying keeping fixing dedo?
[01:32:53] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[01:32:54] <qwertie> yah
[01:32:54] * acrichto is going to be grumpy about removing new
[01:33:08] *** Joins: Jesin (Jesin@moz-AADC888D.eecs.lehigh.edu)
[01:33:22] *** Quits: lenstr (lenstr@2A2A2196.9DA5669E.3F2079FA.IP) (Client exited)
[01:33:49] <acrichto> pcwalton: I'm wary of having some constructors be ::empty and some being ::init
[01:34:25] <pcwalton> I can go change HashMap::empty to HashMap::init if you want
[01:34:39] *** Joins: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com)
[01:34:57] <kimundi> empty sounds like something that should be a std::default::Default impl :P
[01:35:04] <pcwalton> it could be
[01:35:12] <acrichto> I would err on the side of consistency
[01:35:32] <acrichto> pcwalton: if you do empty => init, r=me
[01:36:28] <rossm> in C# Enumerable.Empty<T>() and string.empty and Guid.Empty, etc are all things :P /bikeshed
[01:37:10] *** Quits: gandalf (zbraniecki@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: My lid went down)
[01:37:43] <pcwalton> ok, done
[01:39:05] *** Joins: tautologico (iorek@E0D804D3.CFE755C8.C27E1635.IP)
[01:39:07] <acrichto> pcwalton: cool, r=me with a rebase
[01:41:31] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[01:45:45] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[01:47:07] *** Joins: sankha93 (uid12218@moz-31ABA2C0.irccloud.com)
[01:48:18] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Quit: Ex-Chat)
[01:49:28] *** Joins: bjz (bjz@1009100.A27A8065.D3BA2C17.IP)
[01:49:50] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[01:51:43] *** Quits: KindOne (KindOne@moz-522D9841.dynamic.ip.windstream.net) (Ping timeout)
[01:52:33] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[01:52:39] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[01:52:52] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:53:26] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[01:53:56] *** Joins: tulloch (tulloch@moz-99B7EB8.nat.csx.cam.ac.uk)
[01:56:07] *** Quits: bjz (bjz@1009100.A27A8065.D3BA2C17.IP) (Ping timeout)
[01:56:11] *** Joins: KindOne (KindOne@279B7EED.E184454F.34F73994.IP)
[01:56:18] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[01:58:04] *** Quits: jdm (jdm@moz-ED0C7AC7.hinet-ip.hinet.net) (Quit: Lost terminal)
[01:58:33] *** Quits: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[02:01:13] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[02:01:35] <derek_c> how do you list all the names of all files under a path?
[02:03:22] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[02:03:41] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[02:05:38] *** Quits: tautologico (iorek@E0D804D3.CFE755C8.C27E1635.IP) (Quit: zzz)
[02:05:48] *** Joins: tautologico (iorek@E0D804D3.CFE755C8.C27E1635.IP)
[02:06:06] *** Quits: Ferreus (ferreus@moz-984CDD9B.pools.arcor-ip.net) (Quit: WeeChat 0.4.2)
[02:06:19] <acrichto> derek_c: fs::readdir(path)
[02:06:25] <acrichto> std::io::fs
[02:06:37] *** Joins: ktt3ja (Mibbit@moz-D69B60E4.hsd1.va.comcast.net)
[02:07:12] <derek_c> acrichto: that's perfect! thank you :)
[02:07:54] *** Joins: fabiand__ (fabiand@moz-76A90A4A.adsl.alicedsl.de)
[02:08:25] <ChrisMorgan> Why shifting away from new?
[02:08:43] <acrichto> new is going to become the allocation operator I believe
[02:08:44] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Ping timeout)
[02:08:52] *** Quits: fabiand_ (fabiand@moz-ADAFEF3A.adsl.alicedsl.de) (Ping timeout)
[02:09:24] <ChrisMorgan> That's what I guessed.
[02:09:56] *** Quits: SiegeLord (sl@moz-1DF56822.twcny.res.rr.com) (Connection timed out)
[02:10:20] *** Joins: SiegeLord (sl@moz-1DF56822.twcny.res.rr.com)
[02:11:44] *** Quits: fabrice (fabrice@moz-BBE3ABD.mv.mozilla.com) (Quit: Leaving.)
[02:11:57] *** Joins: fabrice (fabrice@moz-7B0110AD.mv.mozilla.com)
[02:13:11] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[02:18:17] *** Quits: dagnir (chatzilla@A1D3E7F1.DBF4469E.7E8D5209.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 25.0/20131025151332])
[02:18:27] *** Quits: fabrice (fabrice@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[02:18:47] *** Quits: alonlevy (alon@moz-C8A0236.bb.netvision.net.il) (Ping timeout)
[02:19:26] *** Quits: sankha93 (uid12218@moz-31ABA2C0.irccloud.com) (Quit: )
[02:21:23] *** Quits: SiegeLord (sl@moz-1DF56822.twcny.res.rr.com) (Quit: Leaving)
[02:21:30] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[02:22:15] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[02:23:18] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[02:24:48] *** Joins: adu (ajr@moz-47946E69.washdc.fios.verizon.net)
[02:25:48] *** Quits: japaric (japaric@B17EFFD8.A23A5F6C.E5B504CC.IP) (Quit: WeeChat 0.4.2)
[02:26:31] *** Joins: japaric (japaric@B17EFFD8.A23A5F6C.E5B504CC.IP)
[02:27:36] *** Quits: boredomist (ruqs@8186917.CC8FA3EE.E3401B6E.IP) (Ping timeout)
[02:28:03] *** Quits: japaric (japaric@B17EFFD8.A23A5F6C.E5B504CC.IP) (Quit: WeeChat 0.4.2)
[02:28:48] *** Quits: tautologico (iorek@E0D804D3.CFE755C8.C27E1635.IP) (Quit: zzz)
[02:28:50] *** Quits: SingingBoyo (brandon@BA479205.57F4D5B1.D758B1AA.IP) (Ping timeout)
[02:30:42] *** Parts: idog98 (idog98@moz-8F605F11.chrismail.de) ()
[02:31:21] *** Quits: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com) (Ping timeout)
[02:31:21] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[02:31:39] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[02:32:14] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[02:32:54] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[02:33:06] *** Quits: echristo (echristo@24D1937F.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[02:33:38] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[02:34:11] *** Joins: tautologico (iorek@E0D804D3.CFE755C8.C27E1635.IP)
[02:36:13] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[02:36:49] *** Joins: apoelstra (username@moz-C92A9641.sw.biz.rr.com)
[02:38:37] *** Quits: apoelstra (username@moz-C92A9641.sw.biz.rr.com) (Ping timeout)
[02:38:54] *** Quits: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP) (Ping timeout)
[02:39:04] *** Joins: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP)
[02:40:20] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[02:44:22] *** Joins: lenstr (lenstr@F41BC4F7.4946E43A.B22A75D.IP)
[02:44:45] *** Quits: lenstr (lenstr@F41BC4F7.4946E43A.B22A75D.IP) (Quit: Leaving...)
[02:47:10] *** Quits: qwertie (kvirc@DB7229E0.47A9EA86.47483631.IP) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[02:47:25] *** Joins: fabrice (fabrice@moz-94F028C6.hsd1.ca.comcast.net)
[02:51:17] <tikue_> if i have an array [Foo, Bar] is there a way to borrow Foo and Borrow mutably at the same time
[02:52:39] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[02:57:15] <tiffany> is there a way to generate runtime wrappers to a function? like, use introspection of its type signature to figure out which values to pass?
[02:57:30] <tiffany> for wrapping external functions, for example
[02:57:48] <tiffany> or would I have to use assembly?
[02:59:10] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[02:59:55] <bstrie> tiffany: I'm not quite sure what you need, but I wonder if the ~Any type would do what you need?
[03:00:49] <tiffany> like if I have an ~extern fn(), would I be able to generate a wrapper to go from ~[my_language_value_type] to args to this function?
[03:00:54] <tiffany> I think I can do it with macros
[03:01:01] <bstrie> tikue_: I believe nmatsakis has discussed something like this before, i.e. the idea of "dividing" arrays and handing them out to different owners. but that was for concurrency, not for mutability
[03:01:38] <tikue_> bstrie: ah ok. yeah i don't know if something general like what i'd like is really possible
[03:01:46] <tikue_> (without some type of dynamic checks)
[03:03:39] *** Quits: tautologico (iorek@E0D804D3.CFE755C8.C27E1635.IP) (Quit: Entscheidungsproblem)
[03:04:58] *** Quits: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:05:08] *** Joins: aegeaner (aegeaner@5C37E870.A83CF44A.4446104D.IP)
[03:05:22] *** Parts: aegeaner (aegeaner@5C37E870.A83CF44A.4446104D.IP) ()
[03:06:16] *** Joins: aegeaner (aegeaner@5C37E870.A83CF44A.4446104D.IP)
[03:06:40] *** Joins: z0w0 (zack@moz-5E840EF3.lns3.woo.bigpond.net.au)
[03:06:47] <bstrie> wycats_: question though... have you actually managed to observe a performance or memory win from switching those services from ruby to rust?
[03:07:32] <lkuper> bstrie: I think that it's "ha ha only serious"
[03:08:07] <lkuper> bstrie: (re: the checklist)
[03:09:01] *** Quits: tulloch (tulloch@moz-99B7EB8.nat.csx.cam.ac.uk) (Ping timeout)
[03:09:14] <bstrie> lkuper: I'm also sad that the moderators, as expected, altered my original title of "Your language will not work. Here is why it will not work."
[03:09:43] *** Joins: ross (ross@moz-5EA04060.br.br.cox.net)
[03:09:53] <bstrie> lkuper: in any case, thanks for the free internet points!
[03:11:25] *** Quits: fhahn (fhahn@moz-7924DB5C.vie.surfer.at) (Ping timeout)
[03:11:56] <lkuper> bstrie: https://www.hnsearch.com/search#request/all&q=%22colinm.org%22 -- evidently, when it was first posted, "Why your new programming language won't work" was an acceptable title
[03:12:11] <bstrie> haha
[03:12:17] <bstrie> I didn't realize it was a repost :P
[03:12:36] <lkuper> yeah, the thing has been around for some time
[03:13:17] <lkuper> (sometime rust contributor) elly is one of the authors
[03:16:05] *** Joins: apoelstra (username@moz-C92A9641.sw.biz.rr.com)
[03:16:17] *** Joins: sankha93 (uid12218@moz-31ABA2C0.irccloud.com)
[03:17:41] *** Quits: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP) (Client exited)
[03:17:43] *** Joins: Yitro (Yitro@3C366E25.55F0F791.5A112924.IP)
[03:19:18] *** Joins: fhahn (fhahn@moz-7924DB5C.vie.surfer.at)
[03:20:07] <wycats_> bstrie: I can't test it end to end yet but I would be very surprised if there was no memory win
[03:20:43] <bstrie> lkuper: I'm actually vaguely familar with elly from before I found rust :P
[03:20:52] <wycats_> bstrie: rust would have to be doing something very wrong for that to happen
[03:21:02] <bstrie> wycats_: that's why I asked!
[03:21:07] <bstrie> for all I know we're doing things wrong
[03:21:11] <bstrie> we need tests like these!
[03:21:33] <bstrie> if we're not faster and slimmer and more reliable, than why even bother with us :)
[03:21:42] *** Quits: Jesin (Jesin@moz-AADC888D.eecs.lehigh.edu) (Quit: Leaving)
[03:22:11] <wycats_> bstrie: I will let you know
[03:22:15] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[03:22:36] <wycats_> Ruby's memory strategy ends up causing INSANE fragmentation
[03:24:00] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[03:26:49] <derek_c> how do you convert [u8] to string?
[03:27:22] *** Quits: adu (ajr@moz-47946E69.washdc.fios.verizon.net) (Quit: adu)
[03:27:26] *** Joins: kimundi_ (kimundi@moz-A6DB8B95.dip0.t-ipconnect.de)
[03:28:21] <bstrie> derek_c: I think there's a "from_buf" somewhere. don't remember exactly what its' called
[03:28:35] <bstrie> maybe "std::str::from_buf"? just guessing here
[03:28:48] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:28:57] <dwrensha> std::str::from_utf8()
[03:28:59] *** Quits: kimundi (kimundi@moz-647B2DEA.dip0.t-ipconnect.de) (Ping timeout)
[03:29:00] *** kimundi_ is now known as kimundi
[03:29:13] <bstrie> that's it
[03:29:17] <derek_c> dwrensha: ah! thank you :)
[03:29:27] <bstrie> 10 ducats to dwrensha
[03:29:50] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[03:30:35] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[03:30:51] *** Joins: jordyd (jordyd@7DAC4ACE.77F880E0.D9401097.IP)
[03:36:38] *** Joins: vadimcn_ (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[03:36:50] *** kimundi is now known as zz_kimundi
[03:37:11] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Client exited)
[03:37:11] *** Quits: vadimcn_ (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Client exited)
[03:37:35] *** Quits: aegeaner (aegeaner@5C37E870.A83CF44A.4446104D.IP) (Ping timeout)
[03:37:46] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[03:38:06] *** Quits: Yitro (Yitro@3C366E25.55F0F791.5A112924.IP) (Quit: Leaving)
[03:38:47] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Connection reset by peer)
[03:39:00] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[03:39:03] *** Joins: aegeaner (aegeaner@5C37E870.A83CF44A.4446104D.IP)
[03:40:20] <derek_c> I'm trying to read a directory and return a vector of (filename, file content) tuples.  This is the code I got but it doesn't compile.  Can someone take a look?
[03:40:21] <derek_c> http://upl.io/v7fmk2
[03:43:52] *** zz_kimundi is now known as kimundi
[03:44:04] *** Parts: aegeaner (aegeaner@5C37E870.A83CF44A.4446104D.IP) ()
[03:45:05] *** Joins: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net)
[03:45:45] <tikue_> let's say i have some struct that contains an array of maps. let's say this struct has a method in which it is given a list of things to insert into the map at a specified index if some condition is met, which is checked using another method on the struct. it looks like struct `Foo { maps: ~[HashMap<int, int>] } impl { fn condition(&self, i: int) -> bool { ... } fn insert_into(&mut self, v: ~[int], idx: uint) { ... }` is there any way to av
[03:45:46] <tikue_> saying `self.maps[idx].insert(i)`? The problem is you can't alias &mut self.maps[i] while also calling self.condition()
[03:46:00] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Quit: Leaving...)
[03:50:55] *** Joins: aegeaner (aegeaner@5C37E870.A83CF44A.4446104D.IP)
[03:51:06] *** Quits: aegeaner (aegeaner@5C37E870.A83CF44A.4446104D.IP) (Input/output error)
[03:51:58] *** Joins: disjukr (disjukr@1B452A7A.D5FE504D.FC69BED9.IP)
[03:52:26] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[03:53:37] *** Quits: disjukr (disjukr@1B452A7A.D5FE504D.FC69BED9.IP) (Quit: leaving)
[03:53:39] <derek_c> I caught my bug :)
[03:56:52] *** Joins: disjukr (disjukr@1B452A7A.D5FE504D.FC69BED9.IP)
[03:56:53] <derek_c> does anyone know what's wrong with this code?  The error message is very hard to understand: http://upl.io/6uxxub
[03:57:02] <derek_c> error here: http://upl.io/e2rw9s
[03:57:51] <Eridius> derek_c: unrelated, but don't use from_utf8(path.dirname()). The dirname may not be utf-8, which is precisely why it's a &[u8]
[03:58:04] *** Joins: disjukr_ (disjukr@1B452A7A.D5FE504D.FC69BED9.IP)
[03:58:16] *** Quits: disjukr_ (disjukr@1B452A7A.D5FE504D.FC69BED9.IP) (Quit: leaving)
[03:58:21] <Eridius> just use path.display(), which returns a value intended for displaying the path with a {} format
[03:58:27] *** Quits: disjukr (disjukr@1B452A7A.D5FE504D.FC69BED9.IP) (Quit: leaving)
[03:59:11] *** Joins: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com)
[03:59:40] <derek_c> Eridius: Thanks!  That's very helpful
[03:59:45] <Eridius> similarly don't use from_utf8(filename) in the second error. just use path.display() again, or if you really want to just print the filename, path.filepath().display()
[04:00:13] <Eridius> actually in the latter there's path.filename_display(). Forgot about that one
[04:01:13] *** Joins: disjukr (disjukr@1B452A7A.D5FE504D.FC69BED9.IP)
[04:01:46] *** Quits: disjukr (disjukr@1B452A7A.D5FE504D.FC69BED9.IP) (Quit: leaving)
[04:02:06] <Eridius> also, why are you bothering to trap the condition?, when all you're doing is fail!()ing? The normal behavior for an untrapped condition is to fail.
[04:02:29] <Eridius> (granted, code can choose to use other behavior, but if the code can handle the error internally why would you want to fail?)
[04:02:51] *** Joins: disjukr (disjukr@1B452A7A.D5FE504D.FC69BED9.IP)
[04:03:46] *** Quits: disjukr (disjukr@1B452A7A.D5FE504D.FC69BED9.IP) (Quit: leaving)
[04:04:23] *** Quits: nkoep (nik@moz-DAEA9198.vpn.rwth-aachen.de) (Client exited)
[04:04:24] *** Joins: disjukr (disjukr@1B452A7A.D5FE504D.FC69BED9.IP)
[04:05:43] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[04:06:03] <tikue_> what's the most idiomatic and DRY way to do_something() in all match arms except one?
[04:06:32] * tikue_ is thinking nested matches but isn't sure
[04:06:35] *** Joins: adu (ajr@moz-47946E69.washdc.fios.verizon.net)
[04:08:18] <dwrensha> derek_c: typechecks for me if I contents.iter().map instead of contents.map
[04:08:41] *** Quits: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com) (Ping timeout)
[04:08:46] *** Joins: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP)
[04:09:18] <derek_c> dwrensha: OMG why?
[04:09:25] <derek_c> why is it so
[04:10:03] <dwrensha> apparently vec::map is deprecated
[04:10:17] *** Joins: anri (solancile@moz-E49E7C4B.hsd1.wa.comcast.net)
[04:11:03] <dwrensha> and implemented as "self.iter().map(f).collect()"
[04:12:15] <derek_c> dwrensha: what does collect() do?
[04:12:29] *** Quits: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP) (Ping timeout)
[04:12:33] *** Joins: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca)
[04:12:41] <joelteon> turns an iterator into a list
[04:12:48] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Quit: )
[04:13:44] <derek_c> I see
[04:13:49] <derek_c> dwrensha: thanks a lot :)
[04:16:50] *** Quits: KindOne (KindOne@279B7EED.E184454F.34F73994.IP) (Ping timeout)
[04:19:37] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[04:19:37] *** Quits: ktt3ja (Mibbit@moz-D69B60E4.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:19:52] *** Quits: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au) (Ping timeout)
[04:20:23] *** Joins: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au)
[04:20:48] *** Joins: KindOne (KindOne@moz-406B4695.dynamic.ip.windstream.net)
[04:23:00] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[04:24:42] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[04:25:25] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[04:27:36] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Ping timeout)
[04:28:49] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[04:30:04] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:30:28] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Quit: ChatZilla 0.9.90.1 [Firefox 25.0/20131025151332])
[04:31:54] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[04:38:41] *** Quits: adu (ajr@moz-47946E69.washdc.fios.verizon.net) (Quit: adu)
[04:41:24] *** Quits: derek_c (derek@moz-3FCC4F91.cit.cornell.edu) (Ping timeout)
[04:45:22] *** Joins: boredomist (ruqs@B16F530C.DC641F2C.BCAEBB33.IP)
[04:47:34] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[04:47:55] *** Joins: sam113101 (sam@moz-ADDDDFB1.mc.videotron.ca)
[04:49:08] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[04:57:04] *** Quits: joone (joone@2678A73.2160464A.A34EC3BB.IP) (Ping timeout)
[04:57:11] *** Quits: jordyd (jordyd@7DAC4ACE.77F880E0.D9401097.IP) (Ping timeout)
[04:57:42] *** Joins: joone (joone@2678A73.2160464A.A34EC3BB.IP)
[04:58:45] *** Joins: jordyd (jordyd@7DAC4ACE.77F880E0.D9401097.IP)
[05:04:07] *** Quits: joone (joone@2678A73.2160464A.A34EC3BB.IP) (Ping timeout)
[05:04:42] *** Joins: joone (joone@2678A73.2160464A.A34EC3BB.IP)
[05:08:50] *** Joins: adu (ajr@moz-47946E69.washdc.fios.verizon.net)
[05:09:13] *** Quits: adu (ajr@moz-47946E69.washdc.fios.verizon.net) (Quit: adu)
[05:13:09] *** Quits: anri (solancile@moz-E49E7C4B.hsd1.wa.comcast.net) (Quit: anri)
[05:16:05] *** Joins: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net)
[05:19:00] *** Quits: tikue_ (tkuehn@moz-DB51A23.pitbpa.fios.verizon.net) (Quit: tikue_)
[05:21:26] *** Quits: jordyd (jordyd@7DAC4ACE.77F880E0.D9401097.IP) (Ping timeout)
[05:23:45] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[05:25:29] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[05:27:27] *** Joins: adu (ajr@moz-47946E69.washdc.fios.verizon.net)
[05:28:35] *** Joins: tikue_ (tkuehn@moz-DB51A23.pitbpa.fios.verizon.net)
[05:29:09] *** Quits: adu (ajr@moz-47946E69.washdc.fios.verizon.net) (Quit: adu)
[05:30:38] *** Quits: z0w0 (zack@moz-5E840EF3.lns3.woo.bigpond.net.au) (Quit: z0w0)
[05:31:30] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:33:16] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[05:33:58] *** Quits: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP) (Ping timeout)
[05:34:08] *** Joins: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP)
[05:34:53] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[05:35:20] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[05:36:02] *** Quits: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP) (Ping timeout)
[05:36:19] *** Joins: anri (solancile@moz-E49E7C4B.hsd1.wa.comcast.net)
[05:36:56] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[05:37:58] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Quit: Sharp)
[05:46:22] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[05:47:01] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[05:47:23] *** Quits: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:49:58] *** Joins: mib_5v5129 (Mibbit@A5F8C3A7.C008EF69.4C15670D.IP)
[05:50:35] *** Quits: mib_5v5129 (Mibbit@A5F8C3A7.C008EF69.4C15670D.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[05:51:11] *** Quits: sam113101 (sam@moz-ADDDDFB1.mc.videotron.ca) (Quit: WeeChat 0.4.2)
[05:52:02] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[05:54:13] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[05:55:53] *** Quits: JanC (janc@moz-F97D63D7.dsl.scarlet.be) (Ping timeout)
[05:56:00] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[05:56:01] *** Joins: adu (ajr@moz-47946E69.washdc.fios.verizon.net)
[05:59:49] *** Quits: tikue_ (tkuehn@moz-DB51A23.pitbpa.fios.verizon.net) (Quit: tikue_)
[06:01:48] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[06:05:21] *** Joins: joelteon_ (bzzt@moz-948A3799.lightspeed.snvaca.sbcglobal.net)
[06:06:13] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[06:07:44] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[06:09:43] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[06:10:13] *** Joins: JanC (janc@moz-5100E87F.dsl.scarlet.be)
[06:13:31] *** Quits: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu) (Ping timeout)
[06:14:33] *** Quits: joelteon_ (bzzt@moz-948A3799.lightspeed.snvaca.sbcglobal.net) (Client exited)
[06:24:09] *** Joins: GeneralMaximus (ankur@A6F89B8C.1D173DC.274D17D6.IP)
[06:24:29] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[06:25:30] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[06:26:08] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[06:26:17] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[06:27:10] *** Quits: lfox (lfox@moz-B8648F0F.nycmny.fios.verizon.net) (Quit: ZZZzzz…)
[06:27:38] *** Joins: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com)
[06:30:40] *** Joins: joelteon_ (bzzt@moz-948A3799.lightspeed.snvaca.sbcglobal.net)
[06:32:28] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[06:32:51] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:33:36] *** Quits: joelteon_ (bzzt@moz-948A3799.lightspeed.snvaca.sbcglobal.net) (Client exited)
[06:34:09] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[06:34:19] *** Quits: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca) (Quit: canhtak)
[06:34:45] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[06:35:37] *** Joins: derek_c (derek@moz-FB4F1795.cit.cornell.edu)
[06:36:16] *** Joins: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net)
[06:37:16] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[06:37:37] <eddyb> why does every fn have an env ptr?
[06:37:53] <eddyb> is that just for coercion to a closure ptr?
[06:38:12] <eddyb> s/ptr/reference
[06:38:51] <eddyb> with a Fn trait, we can finally make those distinct
[06:40:26] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Ping timeout)
[06:42:12] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[06:43:02] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[06:43:37] *** Quits: cubic (cubic@moz-80241A3A.mc.videotron.ca) (Quit: Leaving)
[06:43:48] *** Joins: jordyd (jordyd@7DAC4ACE.77F880E0.D9401097.IP)
[06:48:20] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[06:49:39] *** Quits: huseby (huseby@moz-652A28E0.amd.co.at) (Ping timeout)
[06:51:25] *** Joins: joelteon_ (bzzt@moz-948A3799.lightspeed.snvaca.sbcglobal.net)
[06:53:13] *** Joins: beifeng (Mibbit@32B41A.FA7FF645.C7DB8B78.IP)
[06:57:01] *** Quits: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP) (Ping timeout)
[06:57:24] *** Quits: decoder (quassel@moz-D7023D7D.own-hero.net) (Ping timeout)
[06:58:12] *** Quits: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:59:54] *** Joins: knadyy (breah@moz-7683AEB7.tampfl.fios.verizon.net)
[07:00:47] *** Quits: knadyy (breah@moz-7683AEB7.tampfl.fios.verizon.net) (Client exited)
[07:02:01] <cmr> :q
[07:02:03] <cmr> oops
[07:05:51] *** Joins: decoder (quassel@moz-D7023D7D.own-hero.net)
[07:08:59] *** Quits: joelteon_ (bzzt@moz-948A3799.lightspeed.snvaca.sbcglobal.net) (Ping timeout)
[07:10:43] *** Quits: doomlord_ (servitor@moz-4625DF14.range86-184.btcentralplus.com) (Ping timeout)
[07:17:48] *** Joins: AdelinaA (a..@moz-4A5DFA2E.residential.rdsnet.ro)
[07:18:48] *** Parts: AdelinaA (a..@moz-4A5DFA2E.residential.rdsnet.ro) ()
[07:25:15] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[07:26:12] *** Quits: jordyd (jordyd@7DAC4ACE.77F880E0.D9401097.IP) (Ping timeout)
[07:26:57] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[07:32:08] *** Quits: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com) (Ping timeout)
[07:34:12] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:35:46] *** Quits: utkarsh (utkarsh@moz-CA9C0A97.members.linode.com) (Ping timeout)
[07:35:55] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[07:35:57] *** Quits: eco (eco@moz-87840B9D.net) (Ping timeout)
[07:38:53] *** Quits: fabrice (fabrice@moz-94F028C6.hsd1.ca.comcast.net) (Quit: Leaving.)
[07:39:05] *** Joins: fabrice (fabrice@moz-94F028C6.hsd1.ca.comcast.net)
[07:39:19] *** Joins: eco (eco@moz-87840B9D.net)
[07:39:36] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[07:39:48] *** Joins: utkarsh (utkarsh@moz-CA9C0A97.members.linode.com)
[07:40:31] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[07:42:19] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[07:44:06] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[07:45:29] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[07:45:39] *** Joins: sam113101 (sam@moz-ADDDDFB1.mc.videotron.ca)
[07:47:18] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[07:47:58] *** Joins: z0w0 (zack@moz-5E840EF3.lns3.woo.bigpond.net.au)
[07:49:22] *** Quits: KindOne (KindOne@moz-406B4695.dynamic.ip.windstream.net) (Ping timeout)
[07:53:36] *** Joins: KindOne (KindOne@moz-EF75AE9D.dynamic.ip.windstream.net)
[07:58:37] *** Quits: refold (gman@moz-42D68426.a258.priv.bahnhof.se) (Quit: leaving)
[08:03:29] <FreeFull> Hmm, seems the nickserv here doesn't take a nick argument for identify
[08:06:15] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[08:12:52] *** Joins: lastdev (lastdev@moz-5A47DD8E.dyn.user.ono.com)
[08:13:43] *** Joins: schubidu25 (schubidu25@moz-92FA7201.superkabel.de)
[08:13:46] *** Quits: schubidu25 (schubidu25@moz-92FA7201.superkabel.de) (Quit: schubidu25)
[08:16:01] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[08:16:19] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[08:17:40] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Connection reset by peer)
[08:17:47] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[08:17:58] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[08:18:49] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[08:19:41] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[08:20:01] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[08:22:33] *** Joins: DevFull (DevFull@moz-E7EA111C.clients.kiwiirc.com)
[08:25:59] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[08:26:34] <TimAbraldes> FreeFull: I think if you want to identify as a different nick you would use the |group| command to make the nicks part of the same group
[08:27:45] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[08:28:56] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[08:32:03] *** Joins: joelteon_ (bzzt@moz-948A3799.lightspeed.snvaca.sbcglobal.net)
[08:33:20] *** Quits: Dessimat0r (Dessimat0r@E879B262.8D4FD984.4320F744.IP) (Ping timeout)
[08:34:35] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[08:35:34] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[08:35:35] *** Joins: greentealover (greentealo@E5F0B6E9.D636C253.FE90BC23.IP)
[08:36:51] *** Joins: Dessimat0r (Dessimat0r@E879B262.8D4FD984.4320F744.IP)
[08:37:22] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[08:37:56] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[08:37:56] *** ChanServ sets mode: +o pnkfelix
[08:39:02] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[08:42:55] *** Quits: joelteon_ (bzzt@moz-948A3799.lightspeed.snvaca.sbcglobal.net) (Ping timeout)
[08:43:07] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[08:48:09] *** Joins: joelteon_ (bzzt@moz-948A3799.lightspeed.snvaca.sbcglobal.net)
[08:51:35] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[08:52:54] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[08:55:06] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[08:56:53] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[08:57:54] *** Quits: joelteon_ (bzzt@moz-948A3799.lightspeed.snvaca.sbcglobal.net) (Ping timeout)
[08:59:09] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[08:59:48] *** Quits: adu (ajr@moz-47946E69.washdc.fios.verizon.net) (Quit: adu)
[09:06:49] *** Quits: derek_c (derek@moz-FB4F1795.cit.cornell.edu) (Quit: Leaving)
[09:10:03] *** Joins: amphibulus (Mibbit@moz-3213C615.wavecable.com)
[09:10:32] <amphibulus> Why does the println! function in main cause a compiler error here? https://gist.github.com/DarkLinkXXXX/ac7944a83f1f8511b0ee
[09:11:07] <cmr> amphibulus: it's the format!, not the println
[09:11:15] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[09:11:15] *** ChanServ sets mode: +ao pcwalton pcwalton
[09:11:18] <cmr> You should write `println!("{}", num)`
[09:11:31] <cmr> It's failing because you're giving format! an argument but the format string you're giving it doesn't expect any.
[09:11:43] <cmr> The format string syntax has changed. See http://static.rust-lang.org/doc/master/std/fmt/index.html
[09:11:48] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Client exited)
[09:12:14] <amphibulus> Thanks.
[09:12:38] *** Joins: valenting (Thunderbir@808EE6B5.84D5EFD5.FB866788.IP)
[09:12:53] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[09:14:13] <amphibulus> Hooray for outdated begginers guides!
[09:15:09] <cmr> basically everything except the official docs are outdated, and even those aren't 100% yet/.
[09:15:16] *** Joins: Jackneill (Jackneill@moz-5FBD4CA5.pool.digikabel.hu)
[09:16:36] <amphibulus> Bah, consistancy is for _mature_ software.
[09:17:01] <amphibulus> Rust: It's not even 1.0 yet, but we can write an operating system with it. ^_^
[09:18:30] *** Joins: shmoo (Mibbit@A99059C5.CEE525EE.47FB7864.IP)
[09:18:43] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[09:19:02] <amphibulus> Say, is there some kind of crate directory.
[09:19:28] <cmr> Not really, but http://hiho.io/rust-ci/is a good approximation.
[09:20:10] <cmr> erm, http://hiho.io/rust-ci/
[09:20:25] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[09:21:12] <amphibulus> Neat, thanks?
[09:22:45] *** Quits: valenting (Thunderbir@808EE6B5.84D5EFD5.FB866788.IP) (Ping timeout)
[09:26:00] *** Quits: shmoo (Mibbit@A99059C5.CEE525EE.47FB7864.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:28:56] *** Joins: g3xzh (g3xzh@moz-5C189D89.red.bezeqint.net)
[09:30:31] *** Quits: Kxepal (Miranda@moz-68A931EE.pppoe.mtu-net.ru) (Ping timeout)
[09:31:23] <g3xzh> trying to add benchmark tests to path/posix.rs but it can't resolve Path::new(...)
[09:31:47] <g3xzh> i tried use std::PosixPath or use PosixPath none of these worked
[09:32:34] <cmr> g3xzh: use super::Path
[09:32:51] *** Joins: peterdn (chatzilla@moz-D11BA78C.as13285.net)
[09:33:55] *** Joins: Kxepal (Miranda@moz-77167FE1.pppoe.mtu-net.ru)
[09:35:18] <g3xzh> cmr: yep, that fixed it. 10x
[09:36:53] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[09:37:10] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[09:38:20] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[09:38:35] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[09:38:41] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[09:39:21] *** Quits: amphibulus (Mibbit@moz-3213C615.wavecable.com) (Quit: http://www.mibbit.com ajax IRC Client)
[09:46:58] *** Parts: DevFull (DevFull@moz-E7EA111C.clients.kiwiirc.com) ()
[09:50:10] *** Joins: joelteon_ (bzzt@moz-948A3799.lightspeed.snvaca.sbcglobal.net)
[09:54:42] <kimundi> tikue: There exists a method to split a &mut [T] into mutable slices
[09:58:10] *** Quits: lastdev (lastdev@moz-5A47DD8E.dyn.user.ono.com) (Client exited)
[09:58:25] *** Joins: jvshahid (jvshahid@moz-81A4CFEA.lightspeed.irvnca.sbcglobal.net)
[09:58:26] *** Joins: moostik (Icedove@5A22E6A1.10715965.BCDF592F.IP)
[10:00:24] *** Quits: g3xzh (g3xzh@moz-5C189D89.red.bezeqint.net) (Quit: Leaving)
[10:00:34] *** Joins: bjz (bjz@1009100.A27A8065.D3BA2C17.IP)
[10:01:44] *** Quits: joelteon_ (bzzt@moz-948A3799.lightspeed.snvaca.sbcglobal.net) (Ping timeout)
[10:02:38] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[10:03:26] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[10:04:19] *** Quits: jvshahid (jvshahid@moz-81A4CFEA.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[10:04:46] *** Joins: Ferreus (ferreus@moz-D75F5224.pools.arcor-ip.net)
[10:05:23] *** Joins: jvshahid (jvshahid@moz-81A4CFEA.lightspeed.irvnca.sbcglobal.net)
[10:05:35] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Ping timeout)
[10:05:56] *** Joins: ross (ross@moz-5EA04060.br.br.cox.net)
[10:06:56] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[10:08:53] *** Quits: jvshahid (jvshahid@moz-81A4CFEA.lightspeed.irvnca.sbcglobal.net) (Quit: leaving)
[10:11:28] *** Joins: mikezaby (mikezaby@moz-AA896205.home.otenet.gr)
[10:12:57] *** Joins: Ms2ger (Ms2ger@moz-1B43DE50.adsl-dyn.isp.belgacom.be)
[10:13:02] *** Quits: bjz (bjz@1009100.A27A8065.D3BA2C17.IP) (Ping timeout)
[10:15:44] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[10:18:03] *** Quits: greentealover (greentealo@E5F0B6E9.D636C253.FE90BC23.IP) (Connection reset by peer)
[10:18:07] *** Joins: greentealover (greentealo@E5F0B6E9.D636C253.FE90BC23.IP)
[10:19:05] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[10:19:28] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[10:19:35] *** Quits: greentealover (greentealo@E5F0B6E9.D636C253.FE90BC23.IP) (Client exited)
[10:19:57] *** Joins: greentealover (greentealo@E5F0B6E9.D636C253.FE90BC23.IP)
[10:21:10] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[10:21:15] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[10:21:38] *** Quits: greentealover (greentealo@E5F0B6E9.D636C253.FE90BC23.IP) (Ping timeout)
[10:28:49] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Quit: 랜덤은 쇠퇴했습니다.)
[10:29:42] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[10:38:09] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[10:38:12] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[10:39:30] *** jorendorff_away is now known as jorendorff
[10:39:52] *** Joins: AndChat372521 (AndChat372@moz-9B8221B3.rivrw1.nsw.optusnet.com.au)
[10:39:54] *** jorendorff is now known as jorendorff_away
[10:39:55] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[10:41:12] *** Quits: KindOne (KindOne@moz-EF75AE9D.dynamic.ip.windstream.net) (Ping timeout)
[10:41:20] <rootnode> yeah, my first successful program in rust
[10:41:42] <rootnode> gotta say, I'm falling in love with rust
[10:42:04] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[10:43:16] <Ms2ger> error: internal compiler error: node_id_to_type: no type for node `unknown node (id=22)`
[10:43:29] <cmr> Ms2ger: that's exciting! haven't seen one of those in a while
[10:43:44] <cmr> Ms2ger: is this on anything small, or is it servo?
[10:43:47] <Ms2ger> Oh dear
[10:43:58] <Ms2ger> Why is my rustc this ancient?
[10:44:18] * Ms2ger tries to update first
[10:44:49] *** Joins: KindOne (KindOne@E785BF25.9C5C45A3.EC6A1518.IP)
[10:45:55] * eddyb hates sum illusions
[10:46:33] <cmr> eddyb: about env ptrs in functions, yes, it's for cheap coercion to closure. they are easy to remove, though, just emit stub fns that are called when a bare fn is coerced to a closure.
[10:47:17] <eddyb> 2.9GB in RAM+swap, but only the top two processes are (slightly) over 100MB :(
[10:47:53] *** Quits: sprang (sprang@moz-920A95C4.hsd1.ca.comcast.net) (Quit: sprang)
[10:47:56] <eddyb> cmr: but... generic over a Fn trait sounds better to me :/
[10:48:58] <cmr> eddyb: that doesn't solve the problem of all functions having an extra parameter?
[10:49:34] <eddyb> it allows you to make a bare fn and a closure different (and non-interchangeable)
[10:49:59] <cmr> there's no reason we shouldn't allow coercions from bare fn to closures
[10:50:14] <Ms2ger> Okay, on nightly, it's
[10:50:15] <Ms2ger> error: internal compiler error: node_id_to_type: no type for node `expr val as uint (id=16)`
[10:50:59] <Ms2ger> https://pastebin.mozilla.org/3658667
[10:51:21] <eddyb> cmr: but... right now it's limited to two function types
[10:51:35] <cmr> eddyb: solving the codegen problem is unrelated to the type problem.
[10:52:18] <eddyb> the coercion is a hack to allow the use of one of the types for both of them
[10:52:42] <eddyb> I would just go for trait pointers, but that's bad without proper devirtualization
[10:54:51] *** Quits: AndChat372521 (AndChat372@moz-9B8221B3.rivrw1.nsw.optusnet.com.au) (Client exited)
[10:55:15] <eddyb> and having a special representation for the Fn trait (*call_fn, *self) (instead of (*vtable, *self) for traits or (*call_fn, *env) for closures) seems like a hack as well
[10:56:16] <Ms2ger> cmr, so do you want an issue for that? :)
[10:56:25] <cmr> Ms2ger: of course
[10:56:46] <eddyb> closures shouldn't have a cover type, each one has an individual type
[10:56:57] <cmr> Ms2ger: it's invalid code, but it shouldn't ice
[10:57:31] <eddyb> the closure types right now are like a special trait embedded into the compiler, implemented only by closures and bare functions
[10:57:32] <Ms2ger> How is it invalid, btw? :)
[10:57:57] <cmr> rusti: *()
[10:57:57] -rusti- <anon>:9:9: 9:12 error: type () cannot be dereferenced
[10:57:58] -rusti- <anon>:9          *()
[10:57:58] -rusti-                   ^~~
[10:57:58] -rusti- error: aborting due to previous error
[10:57:58] -rusti- application terminated with error code 101
[10:58:16] <eddyb> rusti: [*(), ..val as uint]
[10:58:16] -rusti- <anon>:9:17: 9:20 error: unresolved name `val`.
[10:58:16] -rusti- <anon>:9          [*(), ..val as uint]
[10:58:17] -rusti-                           ^~~
[10:58:17] -rusti- error: aborting due to previous error
[10:58:17] -rusti- application terminated with error code 101
[10:58:49] <eddyb> rusti: static val: int = 1; let _x: [*(), ..val as uint];
[10:58:50] -rusti- error: internal compiler error: node_id_to_type: no type for node `expr val as uint (id=25)`
[10:58:50] -rusti- application terminated with error code 101
[10:58:56] <eddyb> rusti: static val: int = 1; let _x: [*(), ..(val as uint)];
[10:58:57] -rusti- error: internal compiler error: node_id_to_type: no type for node `expr val as uint (id=25)`
[10:58:57] -rusti- application terminated with error code 101
[10:59:21] <eddyb> cmr: I thought he was missing parens, but the code is correct
[10:59:44] <cmr> the problem isn't the case, it's the attempted construction of a pointer-to-()
[10:59:49] <cmr> *cast
[11:00:11] <eddyb> cmr: it's a struct definition
[11:00:18] <eddyb> the problem is the cast to uint
[11:00:22] <cmr> hurp, so it is
[11:00:23] <Ms2ger> let x: [*(), ..1];
[11:00:26] <Ms2ger> This works
[11:00:33] <Ms2ger> let x: [*(), ..1 as uint];
[11:00:35] <Ms2ger> This doesn't
[11:00:45] <eddyb> Ms2ger: try to use a static for now
[11:01:04] <cmr> #[static_assert] should work for that case, at least.
[11:01:15] <Ms2ger> I was going to rewrite this without an array anyway :)
[11:01:17] <eddyb> rusti: enum Foo {Val=1} static val: uint = Val as uint; val
[11:01:18] -rusti- 1u
[11:01:36] <eddyb> why are vector types so special?
[11:01:51] *** Joins: AndChat372521 (AndChat372@moz-9B8221B3.rivrw1.nsw.optusnet.com.au)
[11:01:53] <eddyb> not even scalar casts >_>
[11:02:36] <cmr> eddyb: I feel like you continually overestimate rust's maturity as a language :P
[11:02:40] *** Quits: AndChat372521 (AndChat372@moz-9B8221B3.rivrw1.nsw.optusnet.com.au) (Client exited)
[11:02:44] *** Joins: AndChat372521 (AndChat372@moz-9B8221B3.rivrw1.nsw.optusnet.com.au)
[11:03:03] <eddyb> cmr: the implementation is lacking, not the language, mostly
[11:03:10] <cmr> eddyb: I disagree
[11:03:12] <nathan7> Hey cmr 
[11:03:28] <eddyb> cmr: I thought we were talking about constexprs :P
[11:03:39] <cmr> We don't have constexprs, that's the problem.
[11:03:41] <cmr> nathan7: hello
[11:03:54] <Ms2ger> https://github.com/mozilla/rust/issues/10618
[11:04:09] <eddyb> cmr: the static worked, the fixed vector length didn't
[11:04:19] <nathan7> cmr: What was the thing you mentioned when I was talking about making bits of std work in freestanding envs?
[11:04:32] <cmr> nathan7: runtime profiles?
[11:04:33] <eddyb> rust-core?
[11:04:51] <nathan7> rust-core, that's it
[11:04:52] <nathan7> ♥
[11:04:58] <klutzy> Ms2ger: related to this? https://github.com/mozilla/rust/issues/9942
[11:05:35] <Ms2ger> Quite possibly
[11:06:31] <eddyb> the closure types... either remove them from the language and introduce the Fn trait, require everyone to use generics with closures (maybe, after devirtualization starts working, use trait pointers and alias the current closure syntax to that)
[11:07:03] *** Quits: AndChat372521 (AndChat372@moz-9B8221B3.rivrw1.nsw.optusnet.com.au) (Client exited)
[11:07:31] <cmr> eddyb: Fn isn't going to happen until variadic type parameters, closures aren't going away as sugar, and devirtualization is unlikely to ever work (and certainly not sufficiently well to depend upon)
[11:07:45] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[11:08:04] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[11:08:12] <eddyb> or, add the Fn trait and make a cast to a closure type use the pointer for the "call" function, from the Fn trait, and the pointer itself for env
[11:08:35] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[11:08:46] <eddyb> so it can be implemented by more than just builtins
[11:10:13] <eddyb> then they're sugar for a trait with one method, which feels like a better description IMO
[11:10:43] *** Joins: tetsuhar_ (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[11:10:49] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[11:12:03] <eddyb> (instead of being their own DST, when discussions about DSTs ignore them)
[11:12:34] *** Quits: tetsuhar_ (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[11:12:56] <cmr> they're not ignored, it's just that unboxed closures aren't a thing yet, and aren't any different than unboxed traits.
[11:13:03] <eddyb> and by being generic over the Fn trait instead of using the closure types, you get unboxed closures for free :P
[11:13:51] <eddyb> since current closures are trait-like pointers to an unboxed closure
[11:14:25] <cmr> closures are just now moving towards sanity, and the current reform is probably going to be it for 1.0
[11:14:40] <eddyb> :'(
[11:15:13] *** Quits: luck (luck@77546E9A.1059820C.F58D6954.IP) (Connection reset by peer)
[11:16:02] <Ms2ger> Anyone want to fill this out for rust? https://pbs.twimg.com/media/BZtLVf3CQAA0SsY.jpg:large
[11:17:09] <FreeFull> Nobody really needs a REPL
[11:17:10] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[11:17:59] <eddyb> rusti: "FreeFull: you're wrong"
[11:18:00] -rusti- "FreeFull: you're wrong"
[11:18:23] <FreeFull> Well, rusti is cheating
[11:18:36] <FreeFull> There is no standalone REPL right now
[11:19:01] <Ms2ger> "The most significant program written in your language is its own compiler"
[11:19:04] <Ms2ger> I think we can tick that
[11:19:05] <eddyb> haha, https://pastebin.mozilla.org doesn't have Rust syntax highlighting
[11:19:35] <eddyb> Ms2ger: well, I have a file which takes more RAM to compiler than librustc
[11:20:03] <eddyb> it even tries to allocate 700+GB for a lint-only analysis phase
[11:20:13] <Ms2ger> eddyb, is it all of rustc concatenated into one file? :)
[11:20:15] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[11:20:19] <eddyb> *more RAM to compile
[11:20:25] <eddyb> Ms2ger: nope, something completely different
[11:20:44] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[11:21:33] *** Quits: Kxepal (Miranda@moz-77167FE1.pppoe.mtu-net.ru) (Quit: Kxepal)
[11:21:34] <eddyb> that's only x86_16. if I add x86 and ARM (and maybe x86_64), it will be larger than all the files in librustc itself
[11:21:46] *** Joins: Kxepal (Miranda@moz-77167FE1.pppoe.mtu-net.ru)
[11:22:00] <cmr> Ms2ger: how do you define significant? :)
[11:22:01] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[11:22:34] <klutzy> is it significant to define significant?
[11:23:48] <Yurume> eddyb, what on the earth is that?
[11:24:01] <klutzy> improved checklist: http://mashedtaters.net/var/language_checklist.php
[11:24:08] <Yurume> lol
[11:24:30] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[11:25:28] <eddyb> "You have reinvented PHP better, but that's still no justification"
[11:25:57] <cmr> I already mentioned this in #rust-internals, but Rust fares very well on this checklist
[11:27:16] <Ms2ger> cmr, defining significant is undecidable :)
[11:28:04] *** Joins: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP)
[11:28:38] *** Joins: eternaleye_ (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[11:28:42] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[11:29:08] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[11:30:00] *** Quits: arodier74 (Thunderbir@moz-D6235B0B.in-addr.btopenworld.com) (Ping timeout)
[11:31:11] *** Joins: askalski (akuda@309E5B07.C38989A9.A61CD463.IP)
[11:31:14] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Quit: ZNC - http://znc.in)
[11:31:14] *** eternaleye_ is now known as eternaleye
[11:31:25] *** Joins: arodier74 (Thunderbir@moz-D6235B0B.in-addr.btopenworld.com)
[11:33:07] *** Quits: arodier74 (Thunderbir@moz-D6235B0B.in-addr.btopenworld.com) (Ping timeout)
[11:35:20] *** Joins: emk_ (emk@moz-9B1940E9.tech.co.ke)
[11:36:54] *** Joins: arodier74 (Thunderbir@63E68BBB.B6144566.D3B9122.IP)
[11:37:52] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[11:38:11] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[11:38:27] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[11:39:02] *** Joins: greentealover (greentealo@E5F0B6E9.D636C253.FE90BC23.IP)
[11:39:35] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[11:40:07] *** Quits: greentealover (greentealo@E5F0B6E9.D636C253.FE90BC23.IP) (Client exited)
[11:40:34] *** Joins: greentealover (greentealo@E5F0B6E9.D636C253.FE90BC23.IP)
[11:41:25] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[11:41:50] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[11:42:15] *** Quits: greentealover (greentealo@E5F0B6E9.D636C253.FE90BC23.IP) (Ping timeout)
[11:42:50] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Quit: Leaving...)
[11:45:40] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Quit: ZNC - http://znc.in)
[11:46:10] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[11:46:11] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[11:46:13] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Quit: ZNC - http://znc.in)
[11:46:40] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[11:48:25] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[11:49:04] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[11:49:17] *** Quits: engla (engla@moz-F64E1B0F.cust.bredbandsbolaget.se) (Ping timeout)
[11:52:59] <eddyb> time: 1.675 s   ast indexing
[11:53:18] <eddyb> cmr: that requires 285MB, seems fishy
[11:54:09] <cmr> eddyb: that's the creation of the ast map
[11:55:16] <cmr> which is a hashmap of every node id to something like its node type
[11:55:27] <eddyb> why would there be so many mmap calls, after type errors are printed, but before type checking finishes?
[11:55:33] *** Quits: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP) (Ping timeout)
[11:55:43] *** Joins: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP)
[11:56:04] <eddyb> cmr: is the node type unboxed?
[11:56:31] <cmr> eddyb: yeah, see libsyntax/ast_map.rs
[11:56:31] <dbaupp> eddyb: https://github.com/mozilla/rust/blob/master/src/libsyntax/ast_map.rs#L108
[11:56:36] <dbaupp> so, yes.
[11:56:48] <dbaupp> (I believe all the @'s are pre-existing.)
[11:57:00] <cmr> they should be
[11:57:05] <eddyb> 32 million nodes seems like a lot
[11:57:06] <dbaupp> (well, https://github.com/mozilla/rust/blob/master/src/libsyntax/ast_map.rs#L144 is of the most interest)
[11:58:17] *** Quits: arodier74 (Thunderbir@63E68BBB.B6144566.D3B9122.IP) (Quit: arodier74)
[11:58:23] <eddyb> hmm...
[11:58:52] <dbaupp> cmr: "We're probably going to want to keep using mmap ourself, though, if for no other reason that we want to support many many tasks, not just the number of maps we can have." I don't understand why that implies we should use mmap ourselves, rather than malloc/jemalloc... don't they allow more large allocs than the number of maps?
[11:59:37] <cmr> dbaupp: I removed that comment, since it's mootif we use jemalloc, and obviously we need to keep using mmap if we don't.
[11:59:43] <cmr> (refresh the page :p)
[12:00:05] <eddyb> dbaupp: what's size_of::<ast_node>()?
[12:00:08] <cmr> (and we can't mprotect pages we get from malloc in general)
[12:00:14] <kimundi> eddyb: What exactly is it hat worries you about functions and closures?
[12:00:22] <dbaupp> cmr: can't refresh my email :P
[12:00:40] <dbaupp> rusti: extern mod syntax; std::sys::size_of::<syntax::ast_map::ast_node>()
[12:00:41] -rusti- <anon>:9:9: 9:27 error: "extern mod" declarations are not allowed here
[12:00:41] -rusti- <anon>:9          extern mod syntax; std::sys::size_of::<syntax::ast_map::ast_node>()
[12:00:41] -rusti-                   ^~~~~~~~~~~~~~~~~~
[12:00:41] -rusti- error: aborting due to previous error
[12:00:41] -rusti- application terminated with error code 101
[12:00:46] <dbaupp> :(
[12:00:54] <cmr> eddyb: 104
[12:00:58] <eddyb> kimundi: they are too baked in the compiler, for one
[12:00:59] *** Joins: arodier74 (Thunderbir@63E68BBB.B6144566.D3B9122.IP)
[12:01:06] <eddyb> cmr: that's waaaaay too much
[12:01:24] <kimundi> eddyb: That's going to change though
[12:01:47] <eddyb> kimundi: I should write down my ideas, for discussion
[12:01:52] <cmr> eddyb: (fwiw pcwalton already raised all of your suggestions as things he wanted to do in #rust-internals last week)
[12:02:11] *** Quits: mikezaby (mikezaby@moz-AA896205.home.otenet.gr) (Input/output error)
[12:02:16] <cmr> but post-1.0, since it's  backwards compat
[12:02:24] *** Quits: askalski (akuda@309E5B07.C38989A9.A61CD463.IP) (Ping timeout)
[12:02:26] <kimundi> eddyb: I'm asking because a lot of the things you meantioned earlies are known issues and already planned to change
[12:02:42] <eddyb> I think the best one is extract a pointer to the call method of the Fn trait vtable, and use that as the fn pointer in the closure ptr
[12:02:50] <eddyb> cmr: including that one ^?
[12:03:16] <cmr> eddyb: closures would just desugar to a Fn trait object
[12:03:29] <eddyb> that requires devirtualization, though
[12:03:34] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[12:04:03] <cmr> ... how is that different htan whatyou just said?
[12:04:05] <dbaupp> cmr: I thought closures were unique types impl-ing Fn, which would coerce to a Fn trait object easily
[12:04:09] <kimundi> eddyb: That actually sounds like a generally applicable optimizations: If a trait only includes one function then a trait object could skip the vtable indirection
[12:04:10] <dredozubov> hello guys
[12:04:11] <dbaupp> *were aiming to be
[12:04:19] *** Quits: KindOne (KindOne@E785BF25.9C5C45A3.EC6A1518.IP) (Ping timeout)
[12:04:23] <eddyb> kimundi: except there's the typedesc thing
[12:04:26] <cmr> dbaupp: Hm, maybe so.
[12:04:46] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[12:04:47] <eddyb> dbaupp: that's what I want :D
[12:04:53] <dredozubov> Toying with TotalEq right now. Is it a bug or am i lacking some basic understanding? https://gist.github.com/dredozubov/7613853
[12:04:56] <kimundi> eddyb: Well, about that I heard different things. strcat says it would ideally not exist
[12:05:06] <eddyb> kimundi: oooh
[12:05:08] <dbaupp> cmr: at least, that's the easiest way to leverage monomorphisation to get fully inlined/fast closures.
[12:05:25] <eddyb> kimundi: and you would use a vtable method to get the typedesc struct, instead?
[12:05:28] <dbaupp> dredozubov: the Eq trait gives the == and != overloading
[12:05:32] <cmr> dredozubov: Eq is the ==, not TotalEq
[12:05:50] <kimundi> eddyb: Maybe? No idea, really
[12:06:23] <dbaupp> dredozubov: TotalEq is just an "extension" that (notionally) enforces that (a == b || a != b), which isn't true of the Eq trait (e.g. floats)
[12:06:24] <eddyb> kimundi: like, Any::get_type_info, with the default implementation calling an intrinsic
[12:06:31] <kimundi> yeah
[12:06:59] <eddyb> oh that is even better
[12:07:22] <eddyb> I will try to support this move the best I can :D
[12:07:40] <dredozubov> dbaupp: it is additional trait to Eq, am i getting this right? 
[12:07:56] <kimundi> Anyway, ideally after variadic generics we can just have unboxed closures for speed
[12:08:21] *** Joins: KindOne (KindOne@moz-B58371D0.dynamic.ip.windstream.net)
[12:08:23] <kimundi> Also, regular rust functions should probably not contain a env pointer always
[12:08:25] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[12:09:44] <eddyb> let ctx = Rc::new((a, b, c)); return (|(a, b, c)|{...}.bind(ctx.clone()), |(a, b, c), x|{...}.bind(ctx.clone()));
[12:10:09] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[12:10:20] <eddyb> well, add more unpacking somewhere in there
[12:10:36] <dbaupp> dredozubov: TotalEq is, yes.
[12:10:37] <eddyb> I want shared mutable state at some point
[12:11:09] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Quit: WeeChat 0.4.3-dev)
[12:11:34] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[12:12:22] <eddyb> (the returned value there has the type (~||, ~|T|), i.e. two closures on the heap. well, my example is lacking some coherence, it's more like a sketch)
[12:16:52] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[12:16:55] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[12:18:06] *** Quits: beifeng (Mibbit@32B41A.FA7FF645.C7DB8B78.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:19:33] *** Joins: mib_5sq1p7 (Mibbit@C83F40FA.C3C4EFEF.4BC5EF08.IP)
[12:19:37] *** Joins: beifeng (Mibbit@32B41A.FA7FF645.C7DB8B78.IP)
[12:20:58] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[12:22:27] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[12:22:31] <mib_5sq1p7> is there a way to denote properties of variables or struct members such as `x _must_ be in interval [a .. b]` or `foo can be true only if bar is false`? i guess asserts is the obvious answer but is there something that can be done about the type of the variable itself?
[12:22:42] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[12:24:03] <Ms2ger> Afraid not
[12:24:25] <cmr> (that's what typestate used to be, right?)
[12:24:32] <dbaupp> cmr: I believe so
[12:24:38] <dbaupp> (well, parts of it)
[12:25:07] <Ms2ger> That's from before my time :)
[12:25:09] * dbaupp never actually used a Rust with typestate
[12:25:26] * cmr didn't either
[12:25:34] *** Joins: nkoep (nik@moz-6962AB6.pool.mediaways.net)
[12:26:12] * Ms2ger wonders how hard it is to add custom static analyses into rust
[12:26:18] *** Joins: ofeldt (ofeldt@moz-AC8454BD.dip0.t-ipconnect.de)
[12:26:36] <dbaupp> mib_5sq1p7: the "standard" technique is to make the struct members private and provide constructors (I guess you know that already with your mention of asserts)
[12:26:37] <cmr> Ms2ger: like, lints? or re-adding typestate?
[12:26:40] <dbaupp> Ms2ger: it depends
[12:26:59] *** Quits: ofeldt- (ofeldt@moz-AD581F9.dip0.t-ipconnect.de) (Ping timeout)
[12:27:16] <Ms2ger> Well, like the things mib_5sq1p7 mentioned
[12:27:17] <dbaupp> Ms2ger: if it is reasonable for them to be AST based, relatively easily (via lints), otherwise, it varies wildly.
[12:28:18] <cmr> There was a post somewhere about emulating typestate
[12:28:42] <dbaupp> you can emulate parts of it using phantom variables and lifetimes and so on, I believe.
[12:29:14] <dbaupp> (again, as much as I understand of what typestate allowed.)
[12:29:38] *** jorendorff_away is now known as jorendorff
[12:30:06] <mib_5sq1p7> dbaupp: yes, constructors was my initial idea. i guess what I imagined/wanted here was a take on dependent types.
[12:30:23] <mib_5sq1p7> not much hope seeing those in rust, right (either built-in or as a library)?
[12:30:26] <cmr> mib_5sq1p7: Rust doesn't have dependant types.
[12:30:29] <cmr> No, not really :)
[12:30:50] <dbaupp> mib_5sq1p7: one could imagine language extensions later that get close to dependent types
[12:30:57] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[12:30:59] <cmr> pcwalton's take on it was that Rust can only try to push the industry ahead so far, and dependant types are still unproven, even in the literature.
[12:31:12] <mib_5sq1p7> I see.
[12:31:31] <dbaupp> (e.g. copying haskells "GADTs" extends the typesystem toward dependent types.)
[12:31:42] <dbaupp> no idea if they work in a monomorphising compiler
[12:31:44] * dbaupp shrugs
[12:31:44] <mib_5sq1p7> rust has GADTs?
[12:31:48] <dbaupp> no
[12:32:04] <mib_5sq1p7> right, wondered there for a sec.
[12:32:10] <dbaupp> but, the existence of ADTs implies that GADTs might be possible
[12:32:15] <mib_5sq1p7> mhm.
[12:33:09] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[12:33:42] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[12:35:26] *** Quits: arodier74 (Thunderbir@63E68BBB.B6144566.D3B9122.IP) (Quit: arodier74)
[12:36:26] *** Joins: arodier74 (Thunderbir@63E68BBB.B6144566.D3B9122.IP)
[12:36:51] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[12:36:57] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[12:40:56] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[12:41:18] *** Joins: victorporof (victorporo@8D527E2D.7DA5C600.9B1E38F4.IP)
[12:42:07] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[12:42:37] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[12:43:27] *** Quits: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP) (Ping timeout)
[12:43:37] <eddyb> ahh, found it: http://en.cppreference.com/w/cpp/language/noexcept_spec
[12:43:43] *** Joins: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP)
[12:45:03] <eddyb> it takes a constant expression. my effect system idea would take an expression which can contain arguments to the function
[12:45:37] *** Joins: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net)
[12:46:03] <eddyb> it would be evaluated somewhat like CTFE, but in a fuzzy/probabilistic(possibilistic?) mode
[12:46:52] <cmr> eddyb: you saw https://github.com/mozilla/rust/wiki/Proposal-for-effects right?
[12:48:07] *** Joins: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca)
[12:49:41] <eddyb> cmr: I remembered it vaguely, thought it was closer to my idea. which I should write somewhere
[12:49:58] <KokaKiwi> Meh, why I can't write "use ::mod::Struct;" in Rust? :(
[12:50:21] <cmr> KokaKiwi: because all `use` are absolute.
[12:50:30] <cmr> KokaKiwi: ie, that's the same as `use mod::Struct;`
[12:50:32] *** Quits: arodier74 (Thunderbir@63E68BBB.B6144566.D3B9122.IP) (Ping timeout)
[12:50:58] <eddyb> not all `use` :P
[12:51:31] <eddyb> those that don't start with `super` or `self`
[12:52:29] <KokaKiwi> cmr: Meh, I juste want to use Struct at root of my module in a submodule (In mylib::foo::bar I want to use mylib::lol::Struct without doing "use mylib::lol::Struct;" because when I write this, it don't work :< )
[12:52:46] *** Quits: mib_5sq1p7 (Mibbit@C83F40FA.C3C4EFEF.4BC5EF08.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:52:46] <cmr> KokaKiwi: use super::lol::Struct
[12:53:15] <cmr> KokaKiwi: if mylib is the crate name, it's just `use lol::Struct`
[12:53:17] *** Joins: CarpNet (Alasdair@moz-25C796BC.cable.virginm.net)
[12:53:43] <KokaKiwi> cmr: Oh, I can write "use lol::Struct;" :o
[12:53:50] <KokaKiwi> Ah
[12:53:53] *** Quits: beifeng (Mibbit@32B41A.FA7FF645.C7DB8B78.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:53:59] <KokaKiwi> You already say that xD
[12:54:35] <KokaKiwi> Okay, It works now, but it seems to me to be a little "weird" at first view :')
[12:55:14] *** Joins: arodier74 (Thunderbir@5901C3C8.B6144566.D3B9122.IP)
[12:56:55] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[12:57:13] *** Joins: jdm (jdm@883B1788.FA8F8F63.51315CC9.IP)
[12:57:13] *** ChanServ sets mode: +o jdm
[12:59:24] *** Quits: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au) (Quit: ChatZilla 0.9.90.1 [Firefox 26.0/20131118212339])
[12:59:53] *** Quits: arodier74 (Thunderbir@5901C3C8.B6144566.D3B9122.IP) (Ping timeout)
[13:00:28] *** Joins: nik_ (nik@moz-5AE14ED1.pool.mediaways.net)
[13:00:37] *** Quits: nkoep (nik@moz-6962AB6.pool.mediaways.net) (Ping timeout)
[13:00:40] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[13:01:09] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[13:02:04] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Connection reset by peer)
[13:02:13] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[13:02:18] *** Joins: greentealover (greentealo@E5F0B6E9.D636C253.FE90BC23.IP)
[13:02:48] *** jorendorff is now known as jorendorff_away
[13:09:04] *** Quits: flowsnake (flowsnake@moz-E4E567EE.aztw.cable.virginm.net) (Connection reset by peer)
[13:12:16] <eddyb> hmm, for something like this, you'd use a trait object in Rust, am I right? http://www.haskell.org/haskellwiki/Existential_type
[13:13:03] <cmr> eddyb: trait objects are existential types, yes.
[13:13:32] *** Joins: flowsnake (flowsnake@moz-E4E567EE.aztw.cable.virginm.net)
[13:16:10] *** Quits: greentealover (greentealo@E5F0B6E9.D636C253.FE90BC23.IP) (Quit: Leaving...)
[13:17:08] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[13:17:40] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[13:19:26] <eddyb> cmr: this is responsible for the size bloat of ast_node: https://github.com/mozilla/rust/blob/master/src/libsyntax/ast.rs#L308-L316
[13:19:26] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[13:19:43] <eddyb> shouldn't it be referenced, instead of embedded in ast_node?
[13:19:45] <dbaupp> `forall a. Class a => a` == ~Class (for your choice of sigil.)
[13:20:10] <eddyb> @Class considering GC
[13:20:10] <dbaupp> eddyb: yes, referenced.
[13:20:13] *** Quits: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP) (Ping timeout)
[13:20:18] *** Joins: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP)
[13:20:51] <eddyb> dbaupp: how large would ast_node be with indirection for Block?
[13:21:08] <dbaupp> block is like 80 bytes IIRC
[13:21:21] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[13:21:21] <dbaupp> so subtract off that, assuming there's nothing else huge
[13:21:25] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:21:43] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[13:21:57] <eddyb> yeah, 24 (3 words) sounds about right
[13:22:31] <eddyb> 4x size reduction in ast indexing. worth it?
[13:22:37] <dbaupp> yes
[13:22:38] <cmr> uh, yeah? :p
[13:23:02] <dbaupp> except... you'll probably need to add a @Block to the places it's used in the AST so it can actually be shared
[13:23:05] <cmr> Make everything else use a @Block, too.
[13:23:07] <cmr> yeah
[13:23:25] <dbaupp> bleh, more @ :(
[13:23:28] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[13:23:47] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[13:23:54] <eddyb> https://github.com/mozilla/rust/blob/master/src/libsyntax/ast_map.rs#L233-L237
[13:24:05] <strcat> if you want to reduce mem usage, don't add @ ;p
[13:24:16] <strcat> it will end up consuming much more memory when a gc is implemented
[13:24:26] <dbaupp> strcat: probably not in this case?
[13:24:26] <eddyb> would a ~Block work?
[13:24:29] <strcat> dbaupp: it will
[13:24:33] <dbaupp> since it's cloning every single Block in the whole AST
[13:24:37] <dbaupp> rather than sharing them
[13:24:43] <strcat> dbaupp: yeah, but gc increases mem usage by 3x +
[13:24:48] <strcat> if it has sane throughput
[13:24:52] <eddyb> Rc<Block>?
[13:25:00] <strcat> if you care about mem usage, yes
[13:25:21] <dbaupp> meh, @ == Rc<...> + syntax niceness - performance, just use @ for now :P
[13:25:35] <strcat> Gc can allow cycles and for lots of small objects (especially short-lived) it can have more throughput
[13:25:40] <strcat> dbaupp: it's not
[13:25:43] <strcat> @ uses more memory than Rc
[13:25:51] <strcat> the boxes are bigger, *and* they are freed much later
[13:26:13] <dbaupp> that's all covered by `- performance` :P
[13:26:22] <strcat> memory usage isn't really performance
[13:26:38] <cmr> surely performance is spacetime, and not just time.
[13:26:38] <dbaupp> - performance + mem usage, then
[13:26:39] <strcat> right now people *can't build rust* because it uses so much memory
[13:26:42] <eddyb> https://github.com/mozilla/rust/blob/master/src/libsyntax/visit.rs#L78 Block is a lone wolf
[13:26:56] *** Quits: boredomist (ruqs@B16F530C.DC641F2C.BCAEBB33.IP) (Ping timeout)
[13:27:01] <eddyb> moar arenas?
[13:27:27] <dbaupp> I think the proof will be in the pudding of this one :P just add @Block, see if it makes things nicer *now*, and let the de-@-ing of the AST deal with the @ ugliness.
[13:27:29] *** Joins: alex_abreu (alex@moz-7421D6C9.mc.videotron.ca)
[13:27:35] *** Joins: bjz (bjz@1009100.A27A8065.D3BA2C17.IP)
[13:27:55] *** Quits: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca) (Ping timeout)
[13:28:35] <eddyb> https://github.com/mozilla/rust/blob/master/src/libsyntax/ast.rs#L528 oh dear, this looks bloated as well
[13:28:38] <cmr> I recently undertook a small-scale @ purging, lack of pointer sugar makes Rc a pain
[13:29:12] <kimundi> Any new code that wants to use @ should at least use the new Gc<T> wrapper :P
[13:29:19] <strcat> ^^
[13:29:40] <cmr> Gc<T> is no better than Rc<T>, for the same reasons.
[13:29:43] <dbaupp> same sugar problem
[13:29:45] <dbaupp> yeah
[13:29:51] <eddyb> https://github.com/mozilla/rust/blob/master/src/libsyntax/ast.rs#L576 is that the old [mut T] syntax o_O?
[13:30:14] <strcat> eddyb: rust attaches a mutability to almost everything
[13:30:22] <strcat> vectors, unique boxes
[13:30:35] <strcat> it's always the same value
[13:30:38] <strcat> doesn't mean anything anymore
[13:30:39] <strcat> legacy!
[13:30:42] <eddyb> #rust-burning-fats
[13:33:01] *** Quits: bjz (bjz@1009100.A27A8065.D3BA2C17.IP) (Ping timeout)
[13:33:17] *** Joins: arodier74 (Thunderbir@5901C3C8.B6144566.D3B9122.IP)
[13:33:56] <eddyb> too bad I don't have enough RAM to do the tests myself, I would love to see how much of a difference I can make (on are-we-slim-yet graphs)
[13:34:27] <eddyb> well, I have nearly enough RAM and not that much computing power
[13:35:13] <eddyb> I am a neat monster and I love testing-driven microoptimizations :D
[13:36:08] <eddyb> we need a smart IDE already, it could have a mode where it colors types by size :P
[13:36:16] <Ke> no free lunch, overlearning etc.
[13:36:53] <dbaupp> the problem with sizes is we need to hook in after trans. :/
[13:37:17] * dbaupp wants https://github.com/mozilla/rust/issues/10362
[13:37:50] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[13:38:26] <Ke> couldn't someone just work on the non adhd version of Rust
[13:38:36] <cmr> Ke: eh?
[13:39:53] <eddyb> Ke: is that smarter than I can parse, or do you smell my ADHD?
[13:40:14] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[13:42:17] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[13:43:07] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[13:43:17] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[13:44:03] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[13:44:18] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[13:48:14] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[13:51:25] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[13:51:54] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[13:51:55] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Quit: Leaving.)
[13:55:58] *** Quits: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP) (Ping timeout)
[13:56:04] *** Joins: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP)
[14:01:16] *** Joins: doomlord_ (servitor@moz-4625DF14.range86-184.btcentralplus.com)
[14:08:40] *** Quits: nik_ (nik@moz-5AE14ED1.pool.mediaways.net) (Ping timeout)
[14:12:50] *** Joins: askalski (akuda@309E5B07.C38989A9.A61CD463.IP)
[14:14:09] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[14:16:09] *** Joins: glennsl (textual@moz-6822C772.customer.cdi.no)
[14:18:38] *** Joins: octurion (octurion@moz-E7EA111C.clients.kiwiirc.com)
[14:22:01] *** kimundi is now known as zz_kimundi
[14:22:03] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[14:22:28] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[14:24:15] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[14:25:02] *** Joins: nik_ (nik@moz-AC1C37C9.vpn.rwth-aachen.de)
[14:26:42] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[14:27:02] <eddyb> what the actual fuck?
[14:28:06] <eddyb> when I finally managed to kill rustc (the process manager was still working, under the heavy load), it has been using the CPU for 5:34 (although 30m have passed) and 1.9GB of RAM
[14:29:01] <eddyb> after I killed it, RAM usage dropped by 1.8-1.9GB, so most of the memory it used wasn't swapped
[14:29:25] <eddyb> however, swap went down by 5.1GB (it was at 7.4GB before the kill)
[14:29:52] <eddyb> how is my linux laptop leaking swap space?
[14:31:14] <cmr> eddyb: reserved overcommit space?
[14:31:15] *** Quits: z0w0 (zack@moz-5E840EF3.lns3.woo.bigpond.net.au) (Client exited)
[14:31:27] *** Joins: mib_fl2tjo (Mibbit@D8B2B11D.C973E70A.EE2CA32B.IP)
[14:31:38] <eddyb> cmr: is that the thing which can be fixed with one command?
[14:31:50] <eddyb> because I was going to look for it a few days ago, then I forgot
[14:33:25] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Ping timeout)
[14:33:59] <mib_fl2tjo> hiiiiiiiiiiiiio
[14:34:20] <mib_fl2tjo> :)
[14:34:41] <mib_fl2tjo> 4;) i new here
[14:35:40] *** Quits: mib_fl2tjo (Mibbit@D8B2B11D.C973E70A.EE2CA32B.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:37:42] <strcat> cmr: it only reserves if overcommit is off
[14:37:56] <strcat> as in vm.overcommit_memory set to 2
[14:43:38] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[14:43:50] <eddyb> https://gist.github.com/eddyb/a67b5f20036c4854b47d
[14:44:08] <eddyb> I should stop it before borrowck, where it currently fails
[14:44:18] <eddyb> (and spends most of that half hour)
[14:45:02] <eddyb> does typeck need all that space?
[14:45:20] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[14:46:15] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Client exited)
[14:47:47] <eddyb> I have a gdb script *somewhere* that displays traces for mmap calls
[14:48:20] <eddyb> strcat: so what should I use for minimal memory usage? is there anything that I can do to "flush" extra memory which seems to be leaking across the system?
[14:48:36] <strcat> eddyb: use Rc instead of @
[14:48:50] <eddyb> not inside the compiler, but on my linux laptop :P
[14:48:55] <strcat> hm?
[14:49:06] <eddyb> the overcommit stuff, for one
[14:49:14] <strcat> eddyb: that stuff shouldn't be changed
[14:49:19] <strcat> works fine with the default of 0
[14:49:29] <cmr> (and it wouldn't affect memory usage)
[14:50:17] <eddyb> so why did I hear advice to change it in order to get a smaller memory footprint when compiling librustc?
[14:51:42] <eddyb> strcat: wouldn't 1 use less physical memory in some cases?
[14:53:03] <eddyb> (it would be nice if that 700+GB allocation thing would actually work)
[14:53:55] <eddyb> but invalid_users() in that case wasn't relying on zeroes (-1, I think), so it was going to memset all those pages into existence
[14:54:07] <strcat> eddyb: 0 (heuristic) vs. 1 (full overcommit) is just about when it will fail
[14:54:38] <strcat> if you set it to 2, it will reserve memory based on overcommit_ratio
[14:54:56] <strcat> neither will increase RES afaik
[14:55:10] <eddyb> I don't like how malloc does mmap without MAP_NORESERVE :(
[14:56:18] <strcat> eddyb: so turn on full overcommit
[14:56:23] <strcat> eddyb: look in 'man 5 proc'
[14:56:29] <strcat> for overcommit_memory
[14:56:46] <strcat> MAP_NORESERVE only does something when it's set to 0
[14:56:50] <eddyb> this would be a neat trick, using the huge address space in x86_64 without backing physical pages
[14:56:53] <strcat> at full overcommit and no overcommit, it does nothing
[14:57:12] <eddyb> strcat: it's implicit with full overcommit?
[14:57:32] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[14:57:47] <strcat> eddyb: it's not implicit
[14:57:50] <strcat> it just doesn't do anything
[14:57:54] <strcat> at either 1 or 2
[14:58:23] <strcat> eddyb: and anyway, it's a *heuristic* check at 0
[14:58:43] <strcat> it doesn't actually reserve
[14:59:16] *** Joins: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net)
[14:59:19] <eddyb> so MAP_NORESERVE is a hint for 0, while 1 is like always on and 2 always off?
[14:59:32] <eddyb> (I'm not sure I understand the specifics, that's why I'm asking :P)
[14:59:34] <strcat> on linux, yes
[14:59:56] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[15:00:04] <eddyb> woo, the new tab page for linux has arrived in google-chrome-unstable :D
[15:00:17] <strcat> 0 is supposed to Just Work, while 1 and 2 are actually overcommit and no-overcommit
[15:00:33] *** Quits: glennsl (textual@moz-6822C772.customer.cdi.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[15:00:52] <strcat> and 2 uses overcommit_ratio (default 50%) too
[15:00:54] *** Quits: octurion (octurion@moz-E7EA111C.clients.kiwiirc.com) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[15:01:39] <strcat> so with overcommit disabled, 8GiB of swap and 4GiB of memory, it will only let you allocate 10GiB
[15:02:33] <strcat> (I guess to prevent exhausting memory the kernel might need)
[15:02:52] *** Joins: glennsl (textual@moz-6822C772.customer.cdi.no)
[15:03:18] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[15:09:21] <eddyb> wait, I may be an idiot, the memory column in my process manager doesn't include the swapped out memory
[15:11:01] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[15:14:35] *** Quits: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP) (Ping timeout)
[15:14:41] *** Joins: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP)
[15:18:13] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[15:18:18] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[15:18:34] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[15:20:16] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[15:20:16] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[15:23:12] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[15:24:55] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[15:25:09] *** Quits: victorporof (victorporo@8D527E2D.7DA5C600.9B1E38F4.IP) (Quit: victorporof)
[15:25:32] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[15:26:32] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[15:28:03] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[15:28:20] *** Joins: mye (mye@moz-DC19BE8B.dip0.t-ipconnect.de)
[15:30:04] *** Quits: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP) (Ping timeout)
[15:30:11] *** Joins: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP)
[15:36:48] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Client exited)
[15:37:05] <eddyb> kdevelop is sure using a lot of RAM when swap is disabled
[15:38:55] <cmr> it exists for a reason
[15:39:34] <eddyb> aaaand it's leaking :(
[15:39:38] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[15:40:21] *** Joins: cubic (cubic@moz-80241A3A.mc.videotron.ca)
[15:40:57] *** Joins: lfox (lfox@moz-B8648F0F.nycmny.fios.verizon.net)
[15:41:45] *** Quits: glennsl (textual@moz-6822C772.customer.cdi.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[15:41:47] <eddyb> cmr: it freed only half of what it allocated when opening a large file
[15:42:17] *** Quits: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP) (Ping timeout)
[15:42:24] *** Joins: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP)
[15:44:32] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[15:44:44] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[15:44:59] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[15:45:09] <strcat> eddyb: stop looking at whatever you're looking at
[15:45:11] <strcat> look at 'free'
[15:45:18] <strcat> the -/+ buffers/cache line
[15:46:08] <eddyb> strcat: same values as my "system monitor" thing
[15:46:31] <eddyb> but that's probably because I disabled swap so I don't get bitten again
[15:46:39] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[15:46:41] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[15:46:47] <strcat> eddyb: ignore the Mem line though
[15:47:20] <eddyb> almost 1GB of "cached". is that only vfs caches?
[15:47:32] <eddyb> s/vfs/disk/
[15:48:35] *** Quits: askalski (akuda@309E5B07.C38989A9.A61CD463.IP) (Ping timeout)
[15:48:49] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[15:51:01] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[15:51:14] <strcat> eddyb: yes
[15:54:24] *** Quits: jdm (jdm@883B1788.FA8F8F63.51315CC9.IP) (Ping timeout)
[15:54:55] *** Joins: jdm (jdm@883B1788.FA8F8F63.51315CC9.IP)
[15:54:55] *** ChanServ sets mode: +o jdm
[15:56:09] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[15:56:15] *** Quits: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net) (Input/output error)
[15:56:40] *** Joins: askalski (akuda@309E5B07.C38989A9.A61CD463.IP)
[15:58:22] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[15:59:55] *** Joins: valenting (Thunderbir@9A1975C1.39CE2EE.E400A05F.IP)
[16:01:18] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[16:03:59] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[16:04:42] *** Joins: lenstr_ (lenstr@AF8EB999.6049B16A.85938D85.IP)
[16:04:46] *** Quits: lfox (lfox@moz-B8648F0F.nycmny.fios.verizon.net) (Quit: ZZZzzz…)
[16:05:48] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[16:06:29] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[16:07:50] *** Joins: beifeng (Mibbit@32B41A.FA7FF645.C7DB8B78.IP)
[16:10:34] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[16:11:36] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[16:12:08] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[16:12:13] *** Quits: valenting (Thunderbir@9A1975C1.39CE2EE.E400A05F.IP) (Ping timeout)
[16:13:56] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[16:14:30] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[16:15:11] *** Quits: moostik (Icedove@5A22E6A1.10715965.BCDF592F.IP) (Ping timeout)
[16:16:19] <jdm> who wants to help me replicate inheritence with generics
[16:16:35] <jdm> trait DerivedFrom<Base> {}
[16:16:38] <jdm> impl DerivedFrom<EventTarget> for Node {}
[16:16:40] <jdm> impl DerivedFrom<Node> for Document {}
[16:16:42] <jdm> impl DerivedFrom<EventTarget> for Document {}
[16:16:52] <jdm> this gives me conflicting implementations :(
[16:17:07] <cmr> jdm: yes, it's not possible currently.
[16:17:22] <jdm> that answer does not please me
[16:17:23] <cmr> it's a bug
[16:17:24] <jdm> try again
[16:17:26] <eddyb> it's a bug in the implementation
[16:17:36] <cmr> eddyb: it's a bug in the language, too.
[16:17:45] <eddyb> the type system should work for this
[16:17:48] <strcat> jdm: can you use 1 trait per type + trait inheritance and default methods as getters/setters?
[16:17:53] * strcat shrugs
[16:18:07] <jdm> I wonder about the inheritence
[16:18:16] <cmr> it's a coherence limitation, it's too strict.
[16:18:34] <tiffany> you'd think there'd be more interest in fixing it
[16:18:49] <strcat> cmr: I don't think that's a case where it's too strict
[16:18:49] <tiffany> I'd like to be able to create generic impls of a trait for all types, overridable by more specific impls
[16:18:55] <tiffany> I think there are other languages which do it that way
[16:19:00] <strcat> cmr: hm
[16:19:07] <eddyb> tiffany: C++ templates, I think
[16:19:08] <strcat> I'm not sure how you would allow that.
[16:19:26] <tiffany> templates aren't traits
[16:19:30] <cmr> tiffany: that's not really allowable, not while keeping the principles of the type system
[16:19:52] <tiffany> cmr: could you have an impl Foo for Bar overrides Baz?
[16:19:54] <cmr> There are certain cases where it canwork, but it's still fairly limited.
[16:20:00] <eddyb> tiffany: I mean, the generic part of traits
[16:20:35] <eddyb> in C++, you can specialize templates. in Rust, you can't do the same thing with generics
[16:21:04] <tiffany> you mean matching over the arguments?
[16:21:14] <tiffany> hm
[16:21:34] <eddyb> overlapping impls, choosing the most specialized version
[16:22:28] <eddyb> rusti: trait Foo {} impl<T> Foo for T {} struct Bar; impl Bar for Foo {}
[16:22:29] -rusti- pastebinned 7 lines of output: http://sprunge.us/HgUO
[16:22:33] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[16:22:36] <jdm> darn, I don't think I can do my fancy autoupcasting when I use one trait per type
[16:22:42] <jdm> impl<To, From:DerivedFrom<To>> JSManaged<From> {
[16:23:10] <eddyb> rusti: trait Foo {} impl<T> Foo for T {} struct Bar; impl Foo for Bar {}
[16:23:11] -rusti- pastebinned 17 lines of output: http://sprunge.us/QLja
[16:23:21] <eddyb> rusti: trait Foo {} impl<T: Clone> Foo for T {} struct Bar; impl Foo for Bar {}
[16:23:22] -rusti- pastebinned 16 lines of output: http://sprunge.us/gORF
[16:23:44] <eddyb> rusti: trait Foo {} impl<T: Clone> Foo for T {} struct Bar(int, *Bar); impl Foo for Bar {}
[16:23:45] -rusti- pastebinned 16 lines of output: http://sprunge.us/OGKH
[16:23:58] <eddyb> wow, it's *that* dumb?
[16:23:58] <cmr> If it's at all possible that two implementations could ever conflict, coherence will deny it.
[16:24:05] <cmr> it's not dumb, it's foolproof.
[16:24:34] <eddyb> too conservative would be the politically correct term, I guess
[16:24:40] <cmr> That's exactly how it's supposed to work.
[16:24:45] <cmr> That's what hte language is defined to do.
[16:24:54] <eddyb> but how could those conflict when Bar doesn't impl Clone?
[16:25:01] <cmr> Bar *could* impl Clone
[16:25:13] <cmr> If ever two implementations can conflict, coherence denies it.
[16:25:21] <eddyb> but doesn't coherence know Bar doesn't impl Clone?
[16:25:31] <cmr> It knows, and doesn't care, because it could.
[16:25:31] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[16:25:42] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[16:26:06] <eddyb> you can't impl Clone for Bar in another trait, so there's no possible conflict without changing the code
[16:26:07] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[16:26:31] <eddyb> and I don't see how preventing a problem that would occur when adding something to the code makes sense
[16:26:36] <cmr> It could be expanded to allow overlapping implementations in the same instances it allows trait implementations, and still allow for coherence.
[16:26:42] <cmr> But that's not how itis defined right now.
[16:27:18] <eddyb> my example is not overlapping, Bar couldn't impl Clone after coherence
[16:28:19] *** Quits: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP) (Input/output error)
[16:28:25] *** Joins: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP)
[16:28:30] <cmr> They are overlapping (the bounds don't matter), but it's allowable since Bar *doesn't* impl Clone
[16:28:52] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[16:29:15] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[16:29:19] <eddyb> so it's conservative (doesn't check bounds)?
[16:29:37] <cmr> Yes
[16:29:49] <cmr> It's the widest net that can be cast
[16:30:00] *** Joins: mihneadb (mihneadb@AF2D4005.FCA1F8A.FB866788.IP)
[16:30:15] <eddyb>     printf "mmap(%p, %p, %i, %i, %i, %i) {\n", $rdi, $rsi, $rdx, $rcx, $r8, $r9
[16:30:25] <eddyb> oh hello there, gdb script
[16:30:34] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[16:32:47] *** Quits: beifeng (Mibbit@32B41A.FA7FF645.C7DB8B78.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:33:07] <eddyb> can I make gdb track children? what's with the 8 processes spawned by rustc?
[16:34:03] <cmr> it should only spawn one process, gcc, at the end.
[16:34:18] <cmr> do you mean the threads it spawns?
[16:34:24] <eddyb> cmr: with strace -f, I'm seeing around 8 pids
[16:34:30] <cmr> those are threads
[16:34:39] <eddyb> each thread has its own PID?
[16:34:41] <cmr> yes
[16:34:51] <cmr> threads and processes are schedules the same on linux
[16:34:53] *** Joins: dherman_ (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[16:34:55] <cmr> same syscall makes them, even.
[16:35:10] <eddyb> o_O I... I always thought they were different
[16:35:12] <cmr> nope
[16:35:26] <cmr> only difference is what they share wrt kernel resources
[16:37:51] *** Quits: mihneadb (mihneadb@AF2D4005.FCA1F8A.FB866788.IP) (Quit: Bye)
[16:38:02] *** zz_kimundi is now known as kimundi
[16:39:23] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[16:40:02] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[16:42:17] *** Quits: arodier74 (Thunderbir@5901C3C8.B6144566.D3B9122.IP) (Quit: arodier74)
[16:42:28] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[16:42:28] *** ChanServ sets mode: +o pnkfelix
[16:43:11] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[16:44:35] *** Joins: beifeng (Mibbit@6CA2D1B4.7BEF16F3.64FAF8EC.IP)
[16:45:13] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[16:46:20] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[16:46:57] *** Joins: vodik (simon@moz-32542EAF.dsl.bell.ca)
[16:47:35] <strcat> cmr: well, it's not black and white
[16:48:02] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[16:48:09] <strcat> CLONE_VM determines if it shares the same address space
[16:48:32] <strcat> but that doesn't really determine the higher-level concept of process vs. thread
[16:48:45] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[16:49:07] <eddyb> gdb blocked the OOM killer, so I had to reboot. again :(
[16:49:32] <strcat> eddyb: the linux kernel has the concept of a 'task', and it's a gray scale of isolation
[16:49:48] *** Quits: jdm (jdm@883B1788.FA8F8F63.51315CC9.IP) (Ping timeout)
[16:49:54] *** Joins: jdm (jdm@883B1788.FA8F8F63.51315CC9.IP)
[16:49:54] *** ChanServ sets mode: +o jdm
[16:49:58] <strcat> eddyb: look at 'man clone'
[16:50:18] <strcat> a process via fork/exec isn't the *most* isolated it can be
[16:50:30] <strcat> shared vs. non-shared address space is one of many choices
[16:50:45] <strcat> there's also shared vs. non-shared hostname, networking, process tree, mount tree
[16:51:15] <strcat> (vfork, fork and pthread_create can all be implemented via clone)
[16:51:35] *** Quits: lenstr_ (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[16:52:25] <eddyb> okay, that's interesting. are they implemented that way in glibc?
[16:52:30] <strcat> CLONE_THREAD is a feature to make the spawned tasks share a pid and get a unique tid, but you could do it with non-shared address space :)
[16:52:39] <strcat> eddyb: yes, at least fork/pthread_create are
[16:53:01] * eddyb takes notes for linux bincompat
[16:53:26] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[16:53:32] <eddyb> hey, sound icon for chrome tabs. what was I doing?
[16:54:16] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Ping timeout)
[16:54:20] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[16:54:21] <eddyb> I understood what anon::expr_fn:: followed by some characters was, it weirded me out a little when I saw that in backtraces
[16:54:38] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Quit: Leaving.)
[16:54:52] <strcat> (anyway I think that stuff is pretty neat - you can spawn a process that has PID 1, and UID/GID 0 but has no admin privs on the upper layers)
[16:54:55] <eddyb> strcat, cmr: quick way to make gdb not interfere with the OOM killer?
[16:55:07] <cmr> I was unaware it did.
[16:55:17] <eddyb> let me check one thing
[16:55:24] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[16:55:36] <strcat> I need to build a kernel with USER NS support for rusti
[16:56:35] <eddyb> gdb doesn't exit if the debugged process gets killed, but I'm not sure how that would keep memory from being reclaimed
[16:57:26] <eddyb> how can I make it exit when the inferior gets killed? I guess that's my question
[16:58:04] *** Quits: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[16:58:20] <eddyb> I hate gdb syntax :(. can't wait for widespread lld support and use
[16:58:26] <eddyb> *lldb
[17:01:43] *** Quits: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP) (Ping timeout)
[17:01:48] *** Joins: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP)
[17:05:40] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[17:05:53] *** Quits: dherman_ (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman_)
[17:06:56] <KokaKiwi> Any idea of how I can have something like this? https://gist.github.com/cf345903e4ba5197837e :o
[17:08:47] <cmr> KokaKiwi: that's not how associated functions work, and that actually isn't possible rightnow.
[17:09:10] <cmr> But, it'd be Test::<for Impl>::print()
[17:09:53] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[17:14:31] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[17:15:28] <KokaKiwi> cmr: Too bad :( I think I'll try something else instead :/
[17:15:40] *** Joins: dherman_ (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[17:21:32] *** kimundi is now known as zz_kimundi
[17:23:38] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[17:24:42] *** Quits: vodik (simon@moz-32542EAF.dsl.bell.ca) (Quit: work)
[17:24:48] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[17:25:35] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[17:26:28] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[17:26:28] *** ChanServ sets mode: +o pnkfelix
[17:26:32] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Client exited)
[17:26:33] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[17:27:06] *** Quits: maxiepoo (mnew@moz-6F50ADE.hsd1.il.comcast.net) (Ping timeout)
[17:28:21] *** Quits: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP) (Ping timeout)
[17:28:29] *** Joins: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP)
[17:30:38] *** Joins: mikezaby (mikezaby@moz-AA896205.home.otenet.gr)
[17:30:57] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[17:31:37] *** Quits: dherman_ (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman_)
[17:32:15] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[17:32:28] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[17:32:31] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[17:32:45] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Connection reset by peer)
[17:32:57] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[17:33:18] *** Quits: sankha93 (uid12218@moz-31ABA2C0.irccloud.com) (Quit: )
[17:33:26] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[17:34:22] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[17:34:46] *** Quits: askalski (akuda@309E5B07.C38989A9.A61CD463.IP) (Ping timeout)
[17:35:08] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[17:36:50] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Ping timeout)
[17:37:19] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[17:37:57] *** Joins: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net)
[17:38:00] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[17:38:41] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[17:39:39] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[17:39:56] <adridu59> hi guys, what's the best syntax highlighting for Rust?
[17:40:18] <cmr> adridu59: probably the vimfile :p
[17:40:18] <adridu59> engine*
[17:40:28] <cmr> Oh, pygments, without a doubt.
[17:40:44] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[17:41:06] <adridu59> I've been looking at CodeMirror, highlight.js, highlighting-kate (Haskell library used by pandoc)
[17:41:33] <klutzy> adridu59: I use hightlight.js but it understands syntax a year ago
[17:41:43] <klutzy> e.g. no "continue": http://rust-kr.org/pages/test
[17:42:38] <cmr> if highlighting-kate understands kate's xml format, then that would probably work betterthan pygments.
[17:42:39] <adridu59> cmr: what's so good about pygments?
[17:42:47] <cmr> adridu59: it's maintained? :p
[17:43:01] <cmr> (more or less..)
[17:43:52] <adridu59> is Rust support more or less up to date?
[17:43:58] <adridu59> I'll check that out
[17:43:59] <cmr> afaik yes
[17:44:20] *** Joins: askalski (akuda@309E5B07.C38989A9.A61CD463.IP)
[17:45:33] <cmr> But, the kate rust.xml is even more up to date, if you can use that.
[17:45:49] <adridu59> let's see
[17:46:42] <adridu59> yup, pandoc supports it
[17:46:52] <adridu59> I think I'll use that, since I use pandoc already
[17:47:08] <adridu59> wonder why the mainline docs are still using that old codemirror stuff
[17:47:39] <adridu59> klutzy: you can always edit the source ;)
[17:47:41] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[17:48:23] <cmr> adridu59: the official docs aren't really maintained/don't have an owner.
[17:48:35] <cmr> They kind of just rot until someone gives them some love
[17:48:47] <cmr> (eg, SiegeLord made the nice new css)
[17:49:04] <klutzy> adridu59: right. buit I'm super lazy and I'll edit it after some rust-kr.org user complains :p
[17:49:20] <adridu59> ahah
[17:49:26] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[17:49:44] <adridu59> cmr: that was 6 months ago, I modified it with Bootstrap elements recently
[17:50:01] <adridu59> but the tutorial is too wide atm
[17:50:21] <eddyb> well, KateSyntax.js could use the kate file, I should try to get more usage on that project, but I can barely do one thing at a time
[17:50:21] <adridu59> looking back, I shouldn't have used the built-in width
[17:51:45] *** Joins: tulloch (tulloch@615A5A70.AFAC3A1C.A973A616.IP)
[17:51:48] *** Joins: adu (ajr@moz-47946E69.washdc.fios.verizon.net)
[17:56:09] <eddyb> haha, the OOM killer killed flash
[17:56:40] *** Quits: cubic (cubic@moz-80241A3A.mc.videotron.ca) (Connection reset by peer)
[17:57:56] *** Quits: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP) (Ping timeout)
[17:58:09] *** Joins: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP)
[17:58:22] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[17:59:40] *** Quits: tulloch (tulloch@615A5A70.AFAC3A1C.A973A616.IP) (Ping timeout)
[18:01:11] *** Joins: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net)
[18:01:22] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[18:01:33] <eddyb> cmr: aaah, it's not the OOM killer, but abort(). gdb keeps all that memory in RAM instead of letting the process die (I could hook SIGABRT to quit, I guess)
[18:01:44] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[18:02:01] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[18:04:10] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[18:04:15] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[18:05:16] *** Joins: tulloch (tulloch@615A5A70.AFAC3A1C.A973A616.IP)
[18:06:08] *** Quits: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:08:07] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[18:08:48] *** Joins: Florob (Florob@moz-39532932.de)
[18:09:13] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[18:09:16] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[18:09:36] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Connection reset by peer)
[18:09:55] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[18:10:22] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Quit: )
[18:13:53] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[18:14:46] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[18:16:02] <eddyb> time: 11.416 s  configuration 2
[18:16:20] <eddyb> but it doesn't actually allocate any memory, that feels like it's taking too long
[18:16:52] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[18:16:57] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[18:17:35] <cmr> it sure does allocate memory
[18:17:48] *** zz_kimundi is now known as kimundi
[18:17:50] <cmr> or, well, it does for librustc
[18:18:40] *** Joins: noam_ (noam@F6B530A7.720527A7.416762B.IP)
[18:18:53] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[18:19:37] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[18:19:42] *** Joins: japaric (japaric@B17EFFD8.A23A5F6C.E5B504CC.IP)
[18:20:50] <eddyb> cmr: it takes a lot of memory without any real work, I'm assuming it just walks around
[18:20:54] *** Quits: tulloch (tulloch@615A5A70.AFAC3A1C.A973A616.IP) (Ping timeout)
[18:20:58] <eddyb> err, a lot of time. (I am tired)
[18:21:01] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[18:21:25] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[18:22:04] <cmr> eddyb: yup
[18:22:08] <eddyb> https://github.com/mozilla/rust/blob/master/src/libsyntax/ast_util.rs#L834 is this a TODO?
[18:23:26] *** Quits: askalski (akuda@309E5B07.C38989A9.A61CD463.IP) (Input/output error)
[18:23:29] <eddyb> well, is a has a table, which ends up using over 500MB
[18:23:38] <eddyb> s/is a/it/
[18:24:02] *** Joins: bellows (Mibbit@AB9EFAE.4E4A5350.3BD9FE04.IP)
[18:24:42] <eddyb> https://github.com/mozilla/rust/blob/master/src/libsyntax/ast_util.rs#L819 *so professional*. also, @@mut HashMap::new() is a bit too much, don't you think?
[18:25:47] <bellows> why no new activities of rust-http on github for 9 days?
[18:26:09] <bellows> abandoned?
[18:26:13] <cmr> bellows: because you haven't sent a pull request yet!
[18:26:25] <strcat> 9 days isn't a long time for a specific lib maintained by mostly 1 person...
[18:26:35] <eddyb> 9 days? I have projects with no activity for years and I haven't abandoned them yet :P
[18:26:47] <eddyb> also, it sounds like a yak shaving week
[18:27:36] <bellows> its benchmark shows a problem about concurrency
[18:27:52] <cmr> yup
[18:27:54] *** Quits: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net) (Quit: maxiepoo)
[18:28:04] <cmr> mostly the runtime's fault, not rust-http
[18:28:05] <bellows> maybe he gives up
[18:28:30] <bellows> i am afraid of that
[18:28:34] <cmr> ... no
[18:28:40] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[18:28:48] <cmr> he's busy
[18:28:51] <Ms2ger> cmr-as-grumpy-cat?
[18:29:02] <cmr> Ms2ger: maybe!
[18:29:10] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[18:29:49] <eddyb> bellows: I saw something rust-http's maintainer (is he around? I can't tab complete and I can't remember his name) was saying, about various things he tried to change in the runtime, to increase rust-http's efficiency
[18:30:35] <eddyb> so he might be fixing that instead, don't panic :P
[18:31:00] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[18:31:12] <bellows> ok
[18:31:27] <eddyb> http://i.imgur.com/bzQmsuX.png
[18:31:40] <cmr> acrichto is playing with some new queues for port/chan
[18:31:40] *** Joins: octurion (octurion@moz-E7EA111C.clients.kiwiirc.com)
[18:31:58] <bellows> Does Chrise work for Mozilla?
[18:32:03] <cmr> no
[18:32:11] <myname> wtf
[18:32:42] <Ms2ger> (Am I the only one who's not impressed by doge?)
[18:32:55] <myname> i am just confused
[18:33:17] <cmr> (no)
[18:33:30] <eddyb> myname: share that confusion with us, please :P
[18:33:53] <strcat> Ms2ger: http://terse.tk/ponysay/
[18:34:51] <strcat> ponysay only has ~1200 ponies though :(
[18:34:53] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:34:59] *** Quits: octurion (octurion@moz-E7EA111C.clients.kiwiirc.com) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[18:35:03] <myname> make more
[18:35:09] <eddyb> strcat: oh dear
[18:36:44] * eddyb gets his flamethrower
[18:37:32] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[18:38:25] <bellows> If Rust is ready, which language will be killed except c++? c, java?
[18:38:36] <Ms2ger> None
[18:39:26] <eddyb> C++ still has features Rust doesn't
[18:39:26] <indirect> https://github.com/thiderman/doge
[18:39:34] <eddyb> C would go first, I would think
[18:39:41] <indirect> for the record, ponysay is the best ever once you add horsefortun.es to it
[18:40:07] *** Joins: tulloch (tulloch@B84410B.A931D553.A973A616.IP)
[18:40:54] <cmr> Rust isn't going to kill anything.
[18:41:16] <eddyb> I was going to mention that. it would just slowly replace some niches, at first
[18:41:52] <bellows> Can't Rust add that feature in lib or core?
[18:41:54] *** Quits: tulloch (tulloch@B84410B.A931D553.A973A616.IP) (Ping timeout)
[18:42:00] *** Quits: adu (ajr@moz-47946E69.washdc.fios.verizon.net) (Quit: adu)
[18:42:29] <bellows> eddyb what niches first?
[18:42:54] <cmr> bellows: Rust is very unlikely to ever be as expressive as C++
[18:43:06] <strcat> cmr: it's more and less expressive
[18:43:12] *** Quits: paulproteus (quassel@199.199.210.158) (Ping timeout)
[18:43:39] <strcat> anyway I don't see why it matters
[18:43:48] <eddyb> bellows: it's not just one feature, there's a few: variadic templates (which would become variadic generics), numeric values in template params, operator() (the Fn trait, requires variadic generics), and a few other things I can't think of right now
[18:44:04] <strcat> variadic templates don't make or break the ability to use a language in a niche
[18:44:09] <eddyb> template specialization, which is a matter of choice in coherence
[18:44:10] <cmr> eddyb: turing complete parsing1
[18:44:10] *** Joins: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net)
[18:44:14] <strcat> C++ didn't have variadic templates for 20 years
[18:44:29] <strcat> it didn't suddenly become a more useful language, it's basically sugar
[18:44:31] <eddyb> strcat: oh, I was just replying to his question about C++ features not present in Rust
[18:45:17] <eddyb> bellows: about niches - I can't hazard too many guesses - do I look like a fortune teller?
[18:45:26] <cmr> bellows: it's best not totake such a sensationalist view of Rust
[18:45:52] <strcat> rust-core performs better than libstdc++/libc++ today and will soon provide a larger feature set with a nicer API ;P
[18:45:53] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[18:45:53] <cmr> Software is hard, Rust doesn't try tosolve everything
[18:46:04] <eddyb> some C developers who reject C++ might enjoy Rust, for example
[18:46:07] <Amaranth> Specialization would be nice to have but it can also get you odd things like std::vector<bool>
[18:46:26] <strcat> Amaranth: template specialization isn't really used in modern C++ anyway
[18:46:29] <strcat> you use enable_if + type traits
[18:46:31] *** Joins: paulproteus (quassel@458FE134.3EC36C88.CBDCF1DC.IP)
[18:47:04] <strcat> so it would be odd to add something that was essentially replaced as a feature to rust. special-casing *specific types* is a step backwards from writing code based on properties of types
[18:47:21] <strcat> it's what C11 has via _Generic, you manually write code for each type
[18:47:41] <eddyb> strcat: hmm? template specialization is how you do something you'd use traits for, in Rust
[18:47:44] <strcat> why bother using generics at all if it's not saving work?
[18:47:48] <strcat> eddyb: no it isn't
[18:48:07] <strcat> template specialization allows you to abuse templates for writing code that's not actually generic, and is really just pretending to be generic.
[18:48:34] <Amaranth> Yeah that sounds about right
[18:48:39] <strcat> enable_if + type traits lets you write different implementations for types fulfilling a property and not fulfilling it
[18:48:49] <strcat> so you can have looser requirements, but still take advantage of a property
[18:48:58] <strcat> it's less generic, but not non-generic like specialization
[18:49:01] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[18:49:06] <bellows> strcat  can you explain "it's more and less expressive"
[18:49:19] <eddyb> more in some ways and less in other ways
[18:49:22] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[18:49:24] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[18:49:28] <strcat> bellows: different languages are better at expressing different things
[18:49:32] <Amaranth> Was thinking it'd be nice to be able to write specialization for various precision levels but that's just different code paths pretending to be generic
[18:49:35] <eddyb> C++ doesn't have lifetimes, for example
[18:49:40] <strcat> in general, a language is not just a strict improvement over another in every area
[18:49:42] <strcat> it doesn't work that way
[18:49:49] <strcat> languages make different compromises
[18:50:13] <strcat> for performance, ease-of-use, compiled binary size, correctness/security
[18:50:17] <strcat> and whatever else
[18:50:34] <strcat> expressive power vs. sane error messages and fast compiles
[18:50:44] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[18:50:47] <strcat> templates can express more than traits
[18:51:16] <strcat> traits express requirements much more clearly (type checked documentation), produce sane errors and don't need to be type checked for each instantiation
[18:51:31] <bellows> I heard that Rust has the best lib management, right?
[18:51:31] <strcat> neither is a strict improvement over the other. both have merits
[18:51:37] <strcat> bellows: 'best'?
[18:51:38] <cmr> bellows: eh? who said that
[18:51:48] <bellows> a friend
[18:51:59] <eddyb> https://github.com/mozilla/rust/blob/master/src/libsyntax/ast_util.rs#L817 that looks cheap :/
[18:52:07] <strcat> standard C/C++ don't have modules so it's obviously better than that
[18:52:18] <strcat> but rust's crate system isn't very mature
[18:52:21] <eddyb> but insertions to it end up allocating half a GB
[18:52:54] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[18:53:33] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[18:53:34] <cmr> eddyb: no one said the codebase was pretty.
[18:53:38] <Earnestly> Iirc clang added modules to C
[18:53:53] <Earnestly> http://clang.llvm.org/docs/Modules.html
[18:54:01] <eddyb> cmr: cheap as in memory efficient
[18:54:31] *** Joins: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net)
[18:55:49] <eddyb> http://llvm.org/releases/ is 3.4 released or not?
[18:55:56] <cmr> no
[18:56:11] <eddyb> was it skipped? I see 3.5 for trunk :/
[18:56:21] <cmr> it has been branched, but not released
[18:56:47] <eddyb> there's a dead link for the release notes
[18:56:55] *** Quits: cdidd (cdidd@moz-24EB5156.broadband.corbina.ru) (Input/output error)
[18:57:22] <bellows> will c++ learn Rust about type system and safe pointers in c15 or some? if happens, it will be a threast
[18:57:50] <eddyb> C++14 is the next standard, so add more years
[18:57:58] <cmr> bellows: if it happens, it will be good for everyone.
[18:58:04] <cmr> It's not a competition.
[18:58:11] <strcat> eddyb: no they branched 3.4
[18:58:16] <eddyb> do I really have 64 million entries in that hash table? it doesn't sound right
[18:58:45] <Amaranth> C++ gives you some similar protections you just have to opt-in to them and if you forget anywhere it doesn't break
[18:58:57] <strcat> Amaranth: it doesn't give you anything like lifetimes
[18:59:02] <strcat> or liveness analysis
[18:59:19] <Amaranth> I've never actually used lifetimes except to make the compiler shut up
[18:59:22] <strcat> (and I doubt it ever will)
[18:59:23] <eddyb> clang-borrowck
[18:59:25] <strcat> Amaranth: you have used lifetimes
[18:59:25] <Amaranth> I probably don't understand them enough to comment
[18:59:28] <strcat> Amaranth: you use the stdlib
[18:59:30] <tiffany> bellows: the only way C++ could really beat rust in safety would be if it removed the C subset
[18:59:32] <tiffany> which is impossible
[18:59:35] <strcat> Amaranth: you've probably used iterators
[18:59:40] <strcat> iterators in C++ aren't memory safe, at all
[19:00:06] <strcat> pretty easy to do accidentally do invalid stuff with them
[19:00:07] <tiffany> writing safe C++ code relies on you avoiding parts of the language
[19:00:14] <tiffany> writing safe rust code relies on you avoiding unsafe {}
[19:00:25] <strcat> writing memory safe C++ means not using references, iterators or 90% of the stdlib
[19:00:39] <Ms2ger> tiffany, which is strictly speaking also parts of the language ;)
[19:00:51] <tiffany> it's a much smaller part of the language compared to C++, though
[19:01:03] *** Quits: heftig (heftig@moz-EFABD065.dip0.t-ipconnect.de) (Ping timeout)
[19:01:04] *** Quits: Ms2ger (Ms2ger@moz-1B43DE50.adsl-dyn.isp.belgacom.be) (Quit: nn)
[19:01:13] <cmr> All you get with unsafe code is a cheap effect system and dereferencing pointers :)
[19:01:17] <Amaranth> strcat: _I_ haven't used lifetimes though
[19:01:23] <strcat> Amaranth: you have used them
[19:01:31] <Amaranth> For all I care iterators are a giant unsafe {} block
[19:01:40] <strcat> Amaranth: it's part of the API *you use*
[19:01:47] <strcat> every time you pass an & reference you're using lifetimes
[19:01:55] <strcat> named lifetimes != all of the lifetime system, they are part of it
[19:01:56] <eddyb> Amaranth: every & pointer has a lifetime, whether implicit or explicit
[19:02:07] <bellows> To be fast, do I have to use unsafe code like in c++
[19:02:08] <bellows> ?
[19:02:11] <cmr> bellows: no
[19:02:19] <Amaranth> bellows: Sometimes
[19:02:25] <eddyb> Amaranth: shush
[19:02:34] <strcat> bellows: the goal of the language/library is to allow you to express as most as possible without unsafe code, or performance compromises
[19:02:44] <strcat> it can't do everything that way
[19:02:50] <tiffany> bellows: 90% of unsafe code is implementing new primitives
[19:03:08] <cmr> the other 10% is avoiding bounds checks!
[19:03:09] <tiffany> llvm is much better at optimization than people give it credit for
[19:03:14] <strcat> there are times when you need to choose between building something safe with potentially unsafe building blocks, or a performance hit
[19:03:24] <tiffany> it's not so good at bound checks though, I gather
[19:03:29] <strcat> tiffany: we don't ask it to optimize much
[19:03:59] <strcat> I think people just don't have a very good understanding about what stuff compiles down to, and which optimizations are easy for the compiler to perform
[19:04:06] <eddyb> if I don't use macros, why should I be hit be the cost of hygiene?
[19:04:18] <strcat> for examples iterators might seem like a high level API, but they're a *very* low-level tool
[19:04:36] <strcat> the vector iterator is literally two pointers and next() does a pointer comparison and a pointer offset
[19:04:40] <eddyb> all those renames and hash tables have exponential cost in a few places :(
[19:05:03] <tiffany> I haven't really worried about performance in my rust code so far honestly
[19:05:21] <tiffany> I did worry a bit when my skybox generator was taking like an hour to generate 6 2048x2048 images
[19:05:40] <cmr> eddyb: afaik we're using state of the art algorithms for this stuff.
[19:05:56] <strcat> cmr: we aren't
[19:06:02] <eddyb> cmr: state of my ass
[19:06:15] <strcat> cmr: hygiene is O(n^2) on the number of variables or something
[19:06:19] <strcat> as rust implements it
[19:06:25] <eddyb> aren't they very costy noops when macros aren't used?
[19:06:30] <strcat> if that's state of the art, we should drop macros ASAP
[19:06:42] <strcat> (I doubt it is)
[19:06:47] *** Quits: themgt (themgt@moz-83F07CDA.cm.vtr.net) (Quit: themgt)
[19:07:06] <eddyb> it's renaming things that don't touch macros, from my limited understanding of hygiene that's... pointless
[19:07:41] <bellows> macro adds expresiveness
[19:08:03] <eddyb> macros are fine, it's just a stupid cost when you don't use macros
[19:08:31] *** Joins: heftig (heftig@moz-2F7B552A.dip0.t-ipconnect.de)
[19:08:34] <eddyb> where are the experts when you need them?
[19:09:20] <Sharp> Enjoying their weekend?
[19:10:07] <bellows> even that rust is less expresive than c++ in some way, cut macro will be a loss
[19:10:23] <cmr> I can't find what jclements said about it..
[19:10:44] <Sharp> bellows: I can't imagine a scenario where Rust cuts out macros :P
[19:10:59] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[19:11:17] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[19:11:46] <eddyb> cmr: if expansion doesn't run, the renames aren't created, and resolve should also be fast (and cheap, memory-wise). what if we just don't run expansion when there's no macros?
[19:12:15] <cmr> eddyb: there are almost never macros.
[19:12:35] <eddyb> s/macros/no macros/?
[19:12:42] <cmr> yes
[19:13:09] <strcat> I don't think macros are common if you're talking about the percent of functions using them
[19:13:20] <strcat> or do you mean at a crate level?
[19:13:29] <cmr> You can't omit expansion if there are any in the crate
[19:13:42] <cmr> But yeah, it could definitely be smarter about the only doing to work it needs to.
[19:13:50] <Sharp> I suspect (but cannot prove) that most crates don't use macros either.
[19:13:59] <eddyb> well, you could omit renames per-function
[19:14:13] <eddyb> even per-block, since that's how they work
[19:14:20] <strcat> Sharp: I think most stdlib ones do
[19:14:24] <strcat> assert!, fail!, println!
[19:14:24] <Sharp> Yeah, stdlib ones do.
[19:14:29] <Sharp> But not most user crates.
[19:14:30] *** Quits: blank_name (blank_name@FAB53C88.7071B2C8.31EC03F3.IP) (Ping timeout)
[19:14:33] <strcat> Sharp: yes they do
[19:14:38] <Sharp> Really?
[19:14:39] <cmr> I've yet to write a crate that doesn't use a macro.
[19:14:44] <Sharp> Huh.
[19:14:45] <strcat> are there really many crates with no usage of println!/fail!?
[19:14:48] <cmr> usually assert, sometimes fail
[19:14:53] *** Joins: blank_name (blank_name@FAB53C88.7071B2C8.31EC03F3.IP)
[19:14:54] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Input/output error)
[19:14:59] <Sharp> Oh yes, usage is what matters for hygiene.
[19:15:08] <Sharp> Not definition.
[19:15:11] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[19:15:11] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[19:15:12] <eddyb> not defined macros. yeah :))
[19:15:30] *** Joins: jstevans (Instantbir@moz-8D4AF6B1.washdc.fios.verizon.net)
[19:15:31] <eddyb> cmr: oh, I do have fail!() somewhere. but not in the big bad function
[19:16:04] <Sharp> OTOH, yeah, I don't see why you have to rename anything except in the variable scope where the macro runs
[19:16:10] <Sharp> Assuming checking for that wasn't prohibitively expensive.
[19:16:25] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[19:16:35] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (Ping timeout)
[19:16:39] <bellows> who designed macro in Rust at first? Did he want Rust be lispy free(expresive)? 
[19:16:56] <Sharp> The answer to your second question is yes
[19:17:09] <cmr> jclements or pauls would have the final say in this matter, they're the only ones who actually know anything about all this :p
[19:17:10] <Sharp> Rust's macro system is based on Racket's, IIRC
[19:17:14] <isaacd> I keep thinking that unsafe pointers could be spelled  &'unsafe Type  , but then remembering I'm wrong.
[19:17:50] <isaacd> (At least when not doing pointer-arithmetic on them)
[19:18:17] <bellows> I guess the designers at first are ambitionous, fast+safe+expresive
[19:18:21] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[19:18:55] <Sharp> I think Rust itself largely achieves those goals.
[19:19:26] <bellows> that's what I am waiting for
[19:19:30] <eddyb> why does nobody mention sweet.js?
[19:19:52] <eddyb> it has pretty much identical syntax, but I'm not sure which was the first one
[19:19:55] <Sharp> Oh yeah, right, we took it from sweet.js too :)  But I think sweet.js took it from Racket.
[19:20:34] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[19:20:35] <bellows> If someone tune typed Racket fast, I would be happy too.
[19:20:40] <Sharp> At least, the paper upon which we based the AST context stuff is based on Racket.
[19:20:41] *** Joins: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com)
[19:20:54] <Sharp> Heh, yep.
[19:21:02] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[19:21:56] *** Quits: jstevans (Instantbir@moz-8D4AF6B1.washdc.fios.verizon.net) (Ping timeout)
[19:21:56] <eddyb> time to reap some processes
[19:22:09] <bellows> I heard that chez-scheme is as fast as c
[19:22:31] <bellows> might be a hype
[19:23:11] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: WeeChat 0.4.2)
[19:24:13] <Sharp> Unlikely, some of the compromises Rust had to make to keep itself around as fast as C would probably rule out any Scheme.  For example, Rust can't guarantee tail call optimization.
[19:24:30] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[19:25:23] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[19:25:48] <tiffany> bellows: don't compare rust to languages like that
[19:26:02] <tiffany> rust has a lot of the same control over memory that you have in C
[19:26:14] <tiffany> it has no overhead of a garbage collector or anything like that
[19:26:58] <eddyb> 10s in std-injection? o_O
[19:27:01] <tiffany> the reasons rust is a system's language and the reason it is performant are because of the language's design, and not Sufficiently Smart Compiler
[19:27:18] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (Ping timeout)
[19:29:29] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[19:29:41] <tiffany> I'd argue that for people like me, rust code is significantly faster than equivalent C
[19:30:00] <eddyb> rusti: (3u8 & 7u8 as i8)
[19:30:00] -rusti- <anon>:9:16: 9:25 error: mismatched types: expected `u8` but found `i8` (expected u8 but found i8)
[19:30:00] -rusti- <anon>:9          (3u8 & 7u8 as i8)
[19:30:00] -rusti-                          ^~~~~~~~~
[19:30:01] -rusti- error: aborting due to previous error
[19:30:01] -rusti- application terminated with error code 101
[19:30:04] <tiffany> I end up implementing a lot of abstractions that create runtime overhead when working in C, because it doesn't really have metaprogramming facilities
[19:30:18] <tiffany> I have implemented typeclasses, but there's no static dispatch, only dynamic
[19:30:18] *** Joins: themgt (themgt@moz-83F07CDA.cm.vtr.net)
[19:30:18] <eddyb> I still don't know what precedence "as" has
[19:30:22] <eddyb> rusti: (3u8 + 7u8 as i8)
[19:30:23] -rusti- <anon>:9:16: 9:25 error: mismatched types: expected `u8` but found `i8` (expected u8 but found i8)
[19:30:23] -rusti- <anon>:9          (3u8 + 7u8 as i8)
[19:30:23] -rusti-                          ^~~~~~~~~
[19:30:23] -rusti- error: aborting due to previous error
[19:30:23] -rusti- application terminated with error code 101
[19:30:26] <tiffany> whereas in rust I almost always use static dispatch
[19:30:31] *** Joins: jeffdb_ (jeff@moz-ED35AD97.hsd1.ca.comcast.net)
[19:30:33] <eddyb> rusti: ((3u8 + 7u8) as i8)
[19:30:34] -rusti- 10i8
[19:30:42] <bellows> ok
[19:31:10] <bellows> rust has been a better c
[19:31:11] <cmr> eddyb: nobody does :P
[19:31:16] <eddyb> tiffany: that's one of the reasons C++ can beat C in some usecases
[19:31:26] <tiffany> "some" being gobject?
[19:31:44] <bellows> wait to see it as a better c++
[19:31:47] *** Quits: themgt (themgt@moz-83F07CDA.cm.vtr.net) (Quit: Pogoapp - http://www.pogoapp.com)
[19:31:57] <eddyb> tiffany: generic hash maps
[19:32:12] *** Quits: jeffdb_ (jeff@moz-ED35AD97.hsd1.ca.comcast.net) (Quit: jeffdb_)
[19:32:17] *** Joins: jeffdb_ (jeff@moz-ED35AD97.hsd1.ca.comcast.net)
[19:32:24] <tiffany> what does C++ have that rust doesn't, aside from adoption?
[19:32:40] <eddyb> I listed a few things earlier :P
[19:32:48] <Sharp> tiffany: Initializer lists?
[19:32:50] <cmr> turing complete parsing!
[19:32:56] <Ralith> eddyb: that's a matter of typesafety, not genericity
[19:33:09] <benh> numeric template arguments :i
[19:33:55] <Earnestly> tiffany: strcat could list quite a few things C++ has that Rust lacks ;p
[19:33:58] <Sharp> I wouldn't see it as a strictly "better" or "worse" thing.
[19:34:11] <cmr> eddyb: it really is yak shaving week :\
[19:34:17] <eddyb> cmr: I thought I've had it right, now I might have to just give up and add thousands of parens everywhere
[19:34:49] <eddyb> I will break and buy more RAM soon
[19:35:11] <cmr> noo, please remove all memory inefficiencies from the compiler first!
[19:35:16] <Sharp> Personally, I'd rather write Rust than C++, because I like safety and its ADT support.  But languages don't exist on a strictly linear "better / worse" scale.
[19:35:34] <cmr> Sharp: sure they do! the blub scale.
[19:35:36] <tiffany> I prefer rust over C and C++
[19:35:36] <eddyb> yeah, I finally can use a language that doesn't get so much misguided hate
[19:35:47] <Florob> Barely related question: Is the behaviour when converting from unsigned to signed documented somewhere?
[19:35:53] <Sharp> cmr: Isn't that the one where Lisp is on top?
[19:35:54] <eddyb> (well, "can" is a strong word)
[19:35:59] <eddyb> Florob: C spec, maybe
[19:36:04] <tiffany> rust gets misguided hate from go programmers
[19:36:12] <cmr> eddyb: eh? llvm documents it
[19:36:26] <bellows> productivity
[19:36:28] <Florob> eddyb, ... behaviour in Rust? C11 will tell you it's implementation defined
[19:36:33] <tiffany> rusti: -1 as uint
[19:36:34] -rusti- 18446744073709551615u
[19:36:44] <eddyb> Florob: haha. cmr is right then, look at llvm
[19:36:51] <Sharp> Not all languages have productivity as their only goal.
[19:36:56] <bellows> rust needs productivity check
[19:37:02] <Sharp> And productivity is a fairly nebulous term in its own right.
[19:37:03] <eddyb> inb4 prodck
[19:37:03] <cmr> Florob: signed is two's complement. unsigned->signed is just a bitcast
[19:37:10] <Sharp> Does productivity include the amount of time spend tracking down bugs?
[19:37:14] <Florob> rusti: 129u8 as i8
[19:37:16] -rusti- -127i8
[19:37:26] <benh> :stare:
[19:37:32] <Sharp> The amount of time dealing with customer support, applying security patches, etc.?
[19:37:37] <eddyb> rusti: -128i8
[19:37:37] <bellows> togather
[19:37:37] <tiffany> I've never seen a platform which does not have the  same behaviour cmr has described
[19:37:38] -rusti- -128i8
[19:37:41] <Sharp> The amount of time waiting for the program to execute?
[19:37:51] <eddyb> rusti: 128i8
[19:37:52] -rusti- -128i8
[19:37:53] <Sharp> I think when you take all that into account it would be very difficult to say Rust has a productivity problem.
[19:38:00] <Florob> cmr, Is it defined as signed in two's complement or is it "what always happens between all architectures work that way"
[19:38:09] *** Joins: refold (gman@moz-42D68426.a258.priv.bahnhof.se)
[19:38:11] <Florob> s/between/because/
[19:38:11] <eddyb> that's the one. make sure you never need to negate MIN_SIGNED_INT
[19:38:22] <bellows> from idea to good product
[19:38:32] <eddyb> Florob: llvm doesn't support architectures without two's complement
[19:38:33] *** Joins: tikue_ (tkuehn@moz-DB51A23.pitbpa.fios.verizon.net)
[19:38:35] <benh> rusti: - -128i8
[19:38:36] -rusti- -128i8
[19:38:42] <eddyb> what's the alternative, BCD?
[19:38:58] <kimundi> (bool, uint)
[19:39:01] <tiffany> one's complement
[19:39:02] <kimundi> *trollface*
[19:39:08] <cmr> balanced ternary
[19:39:10] <Sharp> What, specifically, are you missing?  C++ has features that Rust lacks, but I don't think there are any languages that are a *superset* of C++ features.
[19:39:16] <tiffany> one's complement has a negative zero
[19:39:24] <eddyb> kimundi: that's what floats do, though
[19:39:34] <kimundi> enum Ternary { One, Zero, KindaBetween }
[19:39:38] <tiffany> rusti: -(-128i8)
[19:39:39] -rusti- -128i8
[19:39:44] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[19:39:53] <bellows> the real productivity is all that time
[19:39:58] <tiffany> no floating point exception huh?
[19:40:01] <Sharp> What time?
[19:40:04] <kimundi> eddyb: SUre, but there it doesn't gobble up a whole word for alignement :P
[19:40:08] <eddyb> tiffany: for i8?
[19:40:17] <Sharp> Oh, I see what you're saying.
[19:40:19] *** Joins: blaphmat (Mibbit@moz-A653BFD7.hsd1.tn.comcast.net)
[19:40:23] <bellows> between idea and ...
[19:40:26] <tiffany> eddyb: the last time I tried doing an impossible inversion I got a floating point exception that crashed the application
[19:40:27] <eddyb> enum Bool {True, False, FileNotFound}
[19:40:33] <Sharp> You don't think Rust measures up to C++ in that category?
[19:40:44] <Sharp> It's not hit 1.0 but I think it already does a pretty good job of that.
[19:40:45] <eddyb> tiffany: different arch, maybe
[19:40:48] <bellows> i hope
[19:40:55] <eddyb> if you want, I can probably find the source for that Bool enum :P
[19:40:58] <kimundi> eddyb: A classic xD
[19:41:00] <bellows> that happens
[19:41:08] <Florob> rusti: 4i8/0
[19:41:08] -rusti- task <unnamed> failed at 'attempted to divide by zero', <anon>:9
[19:41:09] -rusti- application terminated with error code 101
[19:41:10] <Sharp> What do you think is currently preventing it from happening?
[19:41:15] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[19:41:26] <cmr> (that's not a floating point exception, that's our codegen for division)
[19:41:50] <cmr> also not floating point
[19:41:54] *** Quits: blaphmat (Mibbit@moz-A653BFD7.hsd1.tn.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[19:42:05] <bellows> i don't know, maybe the lib
[19:42:06] <eddyb> http://thedailywtf.com/Articles/What_Is_Truth_0x3f_.aspx although I saw it somewhere else
[19:42:26] <bellows> open libs lackness
[19:42:29] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[19:42:34] <Sharp> Well, stdlib is slow, but it's pretty expressive already.
[19:42:36] <cmr> Florob: but yes, LLVM is defined to be two's complement.
[19:42:41] <eddyb> engrish <3
[19:42:51] <eddyb> or rather, €>
[19:43:00] <bellows> i mean open source
[19:43:02] <tiffany> I just tested it again
[19:43:07] <Sharp> Yeah, I'd agree that Rust doesn't have the kind of rich library support that C++ does yet, with two caveats: (1) Rust can link extremely easily with existing C libraries, (2) Rust is very immature.
[19:43:10] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[19:43:12] <tiffany> doing it in C results in -128
[19:43:16] <Sharp> The libraries will / are coming.
[19:43:28] * bascule installs rust on yet another computer
[19:43:29] <tiffany> what ever happened to that thing where -INT_MIN would crash?
[19:43:29] <bascule> yay rust
[19:43:30] <Sharp> A lot of people in this room are working on them, in fact.
[19:43:45] <eddyb> tiffany: on what, ARMv3?
[19:43:46] <cmr> rusti: -128i8/-1
[19:43:48] -rusti- 0i8
[19:44:01] <eddyb> cmr: oh, that's cool
[19:44:09] <eddyb> rusti: 128i8/1
[19:44:09] -rusti- -128i8
[19:44:12] <Florob> cmr, Being the pedantic person I am I'd argue that is an implementation detail and needs to be specified for Rust itself, but that is still good to know. Thanks.
[19:44:15] <eddyb> rusti: 128i8/-1
[19:44:16] -rusti- 0i8
[19:44:21] <eddyb> rusti: 128i8/-1i8
[19:44:22] -rusti- 0i8
[19:44:33] <eddyb> cmr: does it do an unsigned division?
[19:44:41] <tiffany> eddyb: on x86_64
[19:44:41] <eddyb> rusti: 128i8/-4i8
[19:44:42] -rusti- 32i8
[19:44:52] <eddyb> hahaha wat?
[19:45:00] <cmr> Florob: Well, sure. We punt a lot of things to LLVM atm, though.
[19:45:12] <bellows> hope for rust-http moving
[19:45:15] <tiffany> I swear I'm not crazy
[19:45:19] <cmr> rusti: 127i8/-4i8
[19:45:20] -rusti- -31i8
[19:45:31] <bellows> i need a rust webframework
[19:45:33] <Sharp> Yeah, rust-http is very exciting.
[19:45:37] <eddyb> cmr: that's acceptable
[19:45:38] <cmr> bellows: rust-http isn't and won't be a framework.
[19:45:57] <eddyb> rusti: 128i8/4i8
[19:45:58] -rusti- -32i8
[19:45:59] <Sharp> cmr: Sure, but it's quite likely that any Rust web framework would be based on rust-http.
[19:46:10] <eddyb> rusti: -128i8/-1i8
[19:46:10] -rusti- 0i8
[19:46:20] <bellows> we want to make one based on that
[19:46:27] <tiffany> rusti: 1/0
[19:46:28] -rusti- task <unnamed> failed at 'attempted to divide by zero', <anon>:9
[19:46:28] -rusti- application terminated with error code 101
[19:46:37] <tiffany> rusti: int foo = 0; 1/foo
[19:46:37] -rusti- <anon>:9:13: 9:16 error: expected one of `; }` but found `foo`
[19:46:37] -rusti- <anon>:9          int foo = 0; 1/foo
[19:46:37] -rusti-                       ^~~
[19:46:37] -rusti- application terminated with error code 101
[19:46:48] <tiffany> er oops, I was in C mode still
[19:46:49] <eddyb> I feel like we're 5 year olds learning division
[19:46:54] <cmr> I do that all the time
[19:46:55] <tiffany> rusti: let foo = 0; 1/foo
[19:46:56] -rusti- task <unnamed> failed at 'attempted to divide by zero', <anon>:9
[19:46:57] -rusti- application terminated with error code 101
[19:47:00] <tiffany> huh
[19:47:08] <tiffany> let me crash you damnit
[19:47:15] <tiffany> rusti: let foo = from_str("0"); 1/foo
[19:47:16] -rusti- pastebinned 7 lines of output: http://sprunge.us/TJHc
[19:47:21] <eddyb> tiffany: you won't. every division is like that
[19:47:30] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[19:47:36] <tiffany> wait what?
[19:47:43] <bellows> anyone working on a webframework?
[19:47:56] <eddyb> rusti: 1f64/0f64
[19:47:56] -rusti- inff64
[19:47:57] <Sharp> eddyb: …No, it's literally impossible that you can't get Rust to divide by zero at runtime.
[19:48:01] <Sharp> Or at least try.
[19:48:03] <tiffany> rusti: let foo = from_str::<int>("0"); 1/foo
[19:48:04] -rusti- pastebinned 5 lines of output: http://sprunge.us/cPDK
[19:48:12] <bellows> we want to try one when http ready
[19:48:14] <eddyb> tiffany: the errors you saw before were runtime errors
[19:48:18] <tiffany> oh
[19:48:25] <tiffany> I should go to bed
[19:48:45] <Florob> rusti: let foo = from_str("0").unwrap(); 1i8/foo
[19:48:46] -rusti- task <unnamed> failed at 'attempted to divide by zero', <anon>:9
[19:48:47] -rusti- application terminated with error code 101
[19:48:54] *** Quits: tikue_ (tkuehn@moz-DB51A23.pitbpa.fios.verizon.net) (Quit: tikue_)
[19:49:00] *** Joins: tulloch (tulloch@moz-99B7EB8.nat.csx.cam.ac.uk)
[19:49:01] <cmr> tiffany: https://github.com/mozilla/rust/blob/master/src/librustc/middle/trans/expr.rs#L1478
[19:49:04] <cmr> You can't win
[19:49:07] <Florob> (Sometimes type inference is almost scary)
[19:49:30] <eddyb> cmr: that comment is wrong, though
[19:49:32] <bascule> ugh, rust isn't building here :(
[19:49:36] <bascule> Mavericks
[19:49:39] <bascule> I'm sure that doesn't help
[19:49:42] <cmr> eddyb: eh?
[19:49:44] <eddyb> cmr: non-zero-fp / 0 is inf
[19:49:55] *** Quits: bellows (Mibbit@AB9EFAE.4E4A5350.3BD9FE04.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:50:04] <eddyb> I prefer Infinity (like in JS), but inf works, I guess
[19:50:13] <eddyb> rusti: let inf = inff64; inf
[19:50:13] -rusti- <anon>:9:19: 9:25 error: unresolved name `inff64`.
[19:50:13] -rusti- <anon>:9          let inf = inff64; inf
[19:50:13] -rusti-                             ^~~~~~
[19:50:13] -rusti- error: aborting due to previous error
[19:50:14] -rusti- application terminated with error code 101
[19:50:17] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[19:50:21] <FreeFull> rusti: unsafe { let foo : *i8 = 0 as *i8; *foo }
[19:50:21] <eddyb> oh, ok
[19:50:22] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[19:50:29] <Sharp> Whee.
[19:50:38] <bascule> https://gist.github.com/tarcieri/7619113
[19:50:44] <bascule> ^^^ derp?
[19:51:03] <bascule> I'm not seeing any error message o_O
[19:51:16] <eddyb> Sharp: crashing (not failing) a rust program without using the word "unsafe" will be an esoteric art in the future
[19:51:25] <cmr> eddyb: it's an esoteric art now
[19:51:31] <cmr> One that bblum is very skilled in
[19:51:43] <Sharp> Haha.
[19:51:45] <FreeFull> Unsafe makes it easy, of course
[19:51:50] <FreeFull> You can segfault Haskell without using unsafe though
[19:51:55] <Sharp> Rust has definitely improved a lot in the "I can't crash it accidentally" category :)
[19:51:56] <tiffany> eddyb: there's a stack overflow post about doing the same in C#
[19:51:58] <eddyb> now we still have bugs here and there in librustc
[19:51:59] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[19:52:00] *** Joins: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP)
[19:52:22] <eddyb> FreeFull: put that on http://rust-lang.org NAO
[19:52:29] <eddyb> maybe we need fortunes
[19:52:34] <tiffany> I think the only runtime crashes I've had in rust were stack overflows
[19:52:45] <tiffany> the compiler crashes a lot though
[19:52:47] <eddyb> those are still task failures
[19:53:00] <eddyb> (if using the morestack stuff)
[19:53:12] <FreeFull> import Foreign; import Foreign.Ptr; main = peek nullPtr
[19:53:20] <tiffany> in fact, I have a project right here that causes rustc to Aborted (core dumped)
[19:53:38] <tiffany> no ICE or anything
[19:53:39] *** Quits: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[19:54:02] <Sharp> I've caught a few bugs like that tiffany… most of which probably still work, depending on whether one of nmatsakis's patches landed.
[19:54:09] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[19:54:13] <FreeFull> I think rustc contains some code in unsafe blocks that theoretically could be just as well outside
[19:54:15] <Sharp> (Bugs in the binary, not rustc).
[19:54:20] <eddyb> tiffany: oh, I can do that. by having it attempt to allocate 700+GB for a lint (warnings only) analysis phase
[19:54:28] <cmr> rustc has very little unsafe.
[19:54:30] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[19:54:38] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[19:54:43] <tiffany> I don't think it's trying to allocate 700gb of memory
[19:54:52] <FreeFull> Well, technically you could write a compiler that has no unsafe whatsoever
[19:54:52] <tiffany> if it is it's failing pretty quickly
[19:55:07] <eddyb> cmr: 404
[19:55:09] <Sharp> Lots of @muts though!
[19:55:19] <eddyb> tiffany: all at once
[19:55:22] <FreeFull> From an outside perspective, all you're doing is reading in source code and outputting a binary file
[19:55:39] <eddyb> cmr: as in, 404 instances of unsafe in librustc
[19:55:43] <Sharp> Yes, and technically you can write a program that never writes memory twice.
[19:55:46] <cmr> eddyb: 370!
[19:55:59] <Sharp> And is just as expressive!
[19:56:07] <eddyb> cmr: how are you doing it? mine caught some strings, but... no way to check for those with just egrep
[19:56:11] <bascule> so umm
[19:56:14] <tiffany> going from rustpkg to just plain rustc went from abort to segfault
[19:56:14] <cmr> unsafe {
[19:56:14] <FreeFull> Well, you can use a language that doesn't have a concept of memory
[19:56:21] <bascule> should I install XCode itself first on Mavericks? o_O
[19:56:23] <bascule> I have clang
[19:56:30] <bascule> I guess I'll get XCode for Instruments but...
[19:56:31] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[19:56:36] <tiffany> 0x00007ffff60edaf3 in middle::typeck::infer::region_inference::RegionVarBindings::add_constraint::h145b1e8ad8d2acn2ap::v0.9$x2dpre ()
[19:56:36] <tiffany>    from /usr/local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.9-pre.so
[19:56:38] <cmr> bascule: try notusing homebrew
[19:56:49] <eddyb> cmr: oh, right. I also got unsafe fn in mine
[19:56:58] <tiffany> ah, it's a stack overflow
[19:57:02] <eddyb> lol
[19:57:10] <bascule> cmr: :|
[19:57:19] <tiffany> it got caught in an infinite loop I think?
[19:57:57] <tiffany> http://pastebin.ca/2478526
[19:58:02] <tiffany> that repeats over and over
[19:58:24] <eddyb> tiffany: you can't know for sure without arguments
[19:58:36] <tiffany> how do I get those with gdb?
[19:58:46] *** Joins: mib_61fh8m (Mibbit@C83F40FA.C3C4EFEF.4BC5EF08.IP)
[19:58:46] <eddyb> you need debug symbols
[19:58:58] <cmr> RUSTCFLAGS="-Z extra-debug-info" when building rust
[19:59:13] *** Joins: octurion (octurion@moz-E7EA111C.clients.kiwiirc.com)
[19:59:17] <cmr> (to configure, iirc)
[19:59:20] <eddyb> "Important to get types for both lhs and rhs, because one might be _|_ and the other not." - does that mean what I think it means? naaah, it couldn't
[19:59:29] <cmr> eddyb: bottom
[19:59:44] <eddyb> what's bot(tom)?
[20:00:06] <cmr> The type of divergent functions. The supertype of every type.
[20:00:22] <eddyb> *blink*
[20:00:24] <tiffany> isn't that the one expressed as ! in a function return type?
[20:00:37] <cmr> Yes
[20:00:43] <eddyb> oooh, thanks
[20:00:59] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[20:01:15] <cmr> http://en.wikipedia.org/wiki/Bottom_type
[20:01:33] <cmr> subtype, sorry.
[20:01:35] <mib_61fh8m> i know rust supports generics, but can you have generic-generic parameters (awkward wording but i don't know how to put it better)? i.e. something that corresponds to `template <template <typename> class M> struct Foo { template <typename A> M<A> foo_bar(const A); }` in C++?
[20:02:14] <eddyb> you can't do that in C++
[20:03:12] <eddyb> I think I've seen them referred to as HKTs, and no, we don't have them
[20:03:16] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[20:03:21] <cmr> (yet)
[20:04:04] <eddyb> cmr: hmm, I didn't really understand GADTs, maybe seeing some possible Rust notation for them might help me
[20:04:32] <tiffany> higher kinded types are a nice thing to have but we do not have one
[20:04:33] <cmr> I don't know what GADTs are besides  the name.
[20:04:41] <tiffany> there's an RFC on the mailing list for them but I don't get how they work
[20:04:44] <mib_61fh8m> uh, i'm pretty sure you can do that in C++. anyway, thanks, the "yet" part reassures me. ;)
[20:04:50] <tiffany> I get how HKTs work, not how the RFC does though
[20:04:57] <cmr> HKTs would be impl<T, U<T>> ...
[20:04:59] <cmr> mib_61fh8m: you can
[20:05:04] <cmr> eddyb: why do you think you can't?
[20:05:09] *** Joins: engla (engla@moz-F64E1B0F.cust.bredbandsbolaget.se)
[20:05:09] <eddyb> huh?
[20:05:17] <cmr> template templates are a thing in c++
[20:05:23] <eddyb> since when?
[20:05:31] *** Joins: glennsl (textual@moz-6822C772.customer.cdi.no)
[20:05:37] <cmr> C++98?
[20:05:39] <eddyb> maybe I shouldn't trust Haskell devs with such important things
[20:05:42] <tiffany> GADTs are separate from HKTs
[20:05:51] <eddyb> yeah, they just popped into my mind
[20:06:17] <mib_61fh8m> i think since C++98.
[20:06:19] <mib_61fh8m> Mhm.
[20:06:34] <tiffany> those are ADTs which can have values be inaccessible based on parameters to it
[20:06:43] <tiffany> so you can use it to express varying bits of a language's AST
[20:06:46] <tiffany> like top level scope, etc.
[20:07:00] <tiffany> making it so there are no invalid ASTs
[20:07:12] <cmr> tiffany: hm, so you can say something like "enum Foo<T>, and if T is X, you can't access variant Y"?
[20:07:19] <tiffany> I think so
[20:07:22] <tiffany> I haven't actually used them
[20:07:32] <eddyb> what I've seen looks different, though
[20:07:45] *** Quits: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com) (Ping timeout)
[20:08:37] *** Quits: Ferreus (ferreus@moz-D75F5224.pools.arcor-ip.net) (Ping timeout)
[20:09:19] <eddyb> they use existential types, I think, so they would be more like a weird construction of pointers to generic traits and structures
[20:12:00] *** Quits: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net) (Quit: maxiepoo)
[20:12:16] <eddyb> making Expr smaller should reduce the memory bloat created during parsing
[20:12:43] <eddyb> time: 11.970 s  std injection
[20:12:46] <eddyb> what is that stage doing?
[20:12:55] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[20:13:11] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:13:30] <cmr> adding `use std::prelude::*` everywhere, and `extern mod std;` to the crate root.
[20:13:39] <cmr> Also the standard macros
[20:14:36] *** Quits: Addle (quassel@moz-89E971E4.cable.teksavvy.com) (Ping timeout)
[20:14:40] *** Joins: Addle (quassel@moz-89E971E4.cable.teksavvy.com)
[20:14:48] <eddyb> cmr: surely that doesn't need to take that long
[20:15:42] <cmr> eddyb: it basically clones the whole ast
[20:16:45] <eddyb> *Jackie Chan face*
[20:16:58] <eddyb> oh, and we know that's slower than parsing
[20:17:10] <eddyb> cmr: one day...
[20:17:36] <cmr> eddyb: the performance of rustc is a neverending fractal of confusion
[20:17:40] <cmr> ␕
[20:18:15] *** Quits: smarter (smarter@moz-9C03B7C7.cust.bluewin.ch) (Quit: )
[20:19:15] <eddyb> take one thousand fifty six, go!
[20:19:37] <eddyb> cmr: I can already recognize the patterns in the memory graph
[20:19:39] <cmr> ... it actually clones it many, many times.
[20:19:50] <eddyb> wait, but std injection doesn't allocate new memory
[20:19:53] <cmr> it clones the toplevel mod
[20:20:02] <cmr> and then for each mod, it clones it again
[20:20:19] <cmr> and soforth, for every child
[20:20:39] <cmr> eddyb: how are you measuring memory usage?
[20:20:40] <eddyb> we need an algorithmic complexity lint
[20:20:48] <cmr> that has been proposed actually :P
[20:20:57] <eddyb> cmr: mmap calls. not the best way, but it does its job
[20:21:04] <eddyb> I know it can very well reuse the space it has
[20:21:15] <cmr> eddyb: you should use cgroups1
[20:21:17] <cmr> !
[20:22:00] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Quit: Leaving)
[20:22:35] <cmr> https://github.com/cmr/rust-bench/tree/3d0c7ac78d95da0bdb3921f4ee8e8aee72b6bbb2
[20:23:06] <cmr> that'd probably murder whatever potato you are using as a computing device, though
[20:23:11] <eddyb> can't open it, browser is dead for a reason
[20:23:21] <eddyb> cmr: it's an ASUS laptop :(
[20:23:33] <eddyb> I really need to at least go from 3GB to 6GB
[20:23:51] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[20:24:07] * eddyb hopes this time the type check errors are fixed
[20:24:17] <eddyb> time: 0.002 s   std macros injection
[20:24:35] <eddyb> wait, so it's just adding the use std::prelude::*; thing, in every module?
[20:24:47] <eddyb> there's just one module :/
[20:24:54] <cmr> as well as the extern mods, yes.
[20:25:03] <cmr> And also cloning every module
[20:25:06] <eddyb> it can reuse everything else. no clone
[20:25:22] <bascule> it looks like I just needed XCode o_O
[20:25:28] <cmr> I don't know what type it is, whatever that clone is doing
[20:25:30] <bascule> not just the command line tools / clang
[20:25:32] <bascule> but the real deal
[20:25:34] <bascule> not sure why
[20:25:37] *** Joins: Ferreus (ferreus@moz-D75F5224.pools.arcor-ip.net)
[20:26:07] *** Joins: ktt3ja (Mibbit@moz-D69B60E4.hsd1.va.comcast.net)
[20:26:12] <cmr> eddyb: it's just cloning two vectors, one of which is just @item
[20:26:18] <cmr> struct _mod, ast.rs
[20:26:19] <eddyb> middle::typeck::infer::region_inference::RegionVarBindings::add_constraint
[20:26:31] <cmr>                                                                                                                                                 
[20:26:49] <eddyb> ^ trying to allocate 200MB from there, it fails
[20:26:55] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[20:28:50] <eddyb> it's up to around 700MB usage from that function alone
[20:29:02] <eddyb> and it would probably eat more if it didn't OOM
[20:30:02] <eddyb> but I don't think I can understand the algorithms there
[20:30:13] *** Joins: moostik (Icedove@moz-63ED7231.w82-121.abo.wanadoo.fr)
[20:30:37] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[20:30:41] *** Joins: maxiepoo (mnew@moz-6F50ADE.hsd1.il.comcast.net)
[20:31:17] <eddyb> there's not much I can kill, really
[20:33:17] <cmr> Any announcements for TWiR?
[20:33:53] <eddyb> cmr: compilation requirements record broken by me
[20:34:27] <cmr> eddyb: the fact that you didn't add terabytes of swap to see how longit would take excludes you fromthat record.
[20:34:54] <eddyb> I actually found out why it works with swap
[20:35:07] * cmr compiled Rust on his 2G netbook, back when rustc mem usage was barely in the 32bit address range
[20:35:35] <eddyb> region_inference allocates a ton of RAM, but I don't think it needs constant access to all of it
[20:36:29] <eddyb> it wants over 1.2GBs
[20:36:56] * eddyb swapon
[20:38:06] <eddyb> if you don't hear from me, I'm in a swap hell
[20:38:19] *** Joins: derek_c (derek@moz-FB4F1795.cit.cornell.edu)
[20:38:42] <klutzy> cmr: http://rust-kr.org which is built on rust-http and rust-mustache :)
[20:39:51] <eddyb> o_O 0.8GB just shot into swap, all at once
[20:40:10] <eddyb> (sorry for the monologue btw, at least there's nobody to complain today :P)
[20:40:18] *** Joins: jstevans (Instantbir@moz-8D4AF6B1.washdc.fios.verizon.net)
[20:40:32] <eddyb> woo, type checking finished, memory released
[20:40:41] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:40:55] *** Joins: engla_ (engla@moz-F64E1B0F.cust.bredbandsbolaget.se)
[20:40:56] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[20:41:34] *** Quits: engla (engla@moz-F64E1B0F.cust.bredbandsbolaget.se) (Ping timeout)
[20:41:47] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[20:42:30] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[20:43:37] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[20:45:38] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:46:22] *** Joins: eddyb (eddyb@336E3A7F.D51DAF03.FB866788.IP)
[20:47:43] <eddyb> you can guess that didn't go so well :/
[20:47:46] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[20:48:29] *** Joins: _eddyb_ (eddy@336E3A7F.D51DAF03.FB866788.IP)
[20:48:57] <eddyb> cmr: and I thought I didn't need more than 3 days to do this >_<. it's been almost two weeks and I still can't properly compile the darn thing
[20:49:22] *** Joins: jordyd (jordyd@7DAC4ACE.77F880E0.D9401097.IP)
[20:50:46] <_eddyb_> 4GB of swap. yummy
[20:51:03] *** Quits: mikezaby (mikezaby@moz-AA896205.home.otenet.gr) (Input/output error)
[20:51:44] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[20:52:36] <_eddyb_> at this rate, it will run out of swap in a few minutes
[20:53:30] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[20:53:57] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[20:53:59] <eddyb> working on variadic generics seems easy compared to this madness
[20:54:47] *** Quits: moostik (Icedove@moz-63ED7231.w82-121.abo.wanadoo.fr) (Ping timeout)
[20:55:52] <kimundi> eddyb: And as a plus point, people would care much more about that than being able to compile a x16 emulator ;)
[20:56:58] *** Quits: eddyb (eddyb@336E3A7F.D51DAF03.FB866788.IP) (Quit: Konversation terminated!)
[20:57:32] <_eddyb_> 2.8GB of RAM + 6GB of swap. I wonder how I can still use the IRC client
[20:57:34] *** _eddyb_ is now known as eddyb
[20:58:00] *** Joins: bjz (bjz@1009100.A27A8065.D3BA2C17.IP)
[20:59:04] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[20:59:58] <eddyb> you know, it's not like it could compile, I saw lifetime errors
[21:00:10] <eddyb> but *aftor* those, it kept growing the swap from 0 to 7GB
[21:01:26] <eddyb> this is, what, 9GB from rustc alone?
[21:01:38] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[21:03:08] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[21:03:32] *** Quits: Jackneill (Jackneill@moz-5FBD4CA5.pool.digikabel.hu) (Input/output error)
[21:04:56] *** Quits: jordyd (jordyd@7DAC4ACE.77F880E0.D9401097.IP) (Ping timeout)
[21:05:07] *** Quits: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP) (Ping timeout)
[21:05:07] <derek_c> can someone take a look at this code?  I'm getting a strange type mismatch error: http://upl.io/fscmc2
[21:05:26] *** Quits: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP) (Ping timeout)
[21:05:32] *** Joins: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP)
[21:06:42] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[21:07:02] *** Quits: sam113101 (sam@moz-ADDDDFB1.mc.videotron.ca) (Quit: WeeChat 0.4.2)
[21:07:42] *** Quits: beifeng (Mibbit@6CA2D1B4.7BEF16F3.64FAF8EC.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:07:52] <FreeFull> Why have I been pinging out from this network, but not any other network?
[21:08:02] *** Joins: jordyd (jordyd@7DAC4ACE.77F880E0.D9401097.IP)
[21:08:06] <cmr> derek_c: insert_or_update_with returns a reference to the value. Add a semicolon to line 29
[21:08:23] *** Joins: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP)
[21:11:02] <eddyb> let today be remembered as the day eddby saw his swap full http://i.imgur.com/tmI4Jij.png
[21:11:11] <derek_c> cmr: thanks!  but even though it returns a value, shouldn't the return value of the function still be the last line of the function?
[21:11:32] <eddyb> the drop is the OOM killer. with swap on.
[21:11:52] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[21:12:28] *** Quits: jdm (jdm@883B1788.FA8F8F63.51315CC9.IP) (Quit: Lost terminal)
[21:13:31] *** Quits: mib_61fh8m (Mibbit@C83F40FA.C3C4EFEF.4BC5EF08.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:20:56] <Earnestly> eddyb: Heh, I read your screenshot labels as "Esoteric Memory"
[21:21:52] *** jorendorff_away is now known as jorendorff
[21:21:55] <eddyb> "istoric memorie" => "memory history"
[21:22:13] <Earnestly> *nod*
[21:22:55] *** Joins: mib_y5ca8e (Mibbit@C83F40FA.C3C4EFEF.4BC5EF08.IP)
[21:25:22] *** Joins: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com)
[21:26:01] *** jorendorff is now known as jorendorff_away
[21:26:27] <cmr> derek_c: the problem isn't with the function, it's with what the match is returning
[21:27:31] <cmr> derek_c: `for pat in it { ... }` expands into loop { match it.next() { None => break, Some(pat) => { ... } } }, more or less.
[21:27:32] *** Quits: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP) (Ping timeout)
[21:28:11] <derek_c> cmr: yeah, but why was the compiler expecting () anyway?
[21:28:43] <cmr> derek_c: every arm of a match needs to evaluate to the same type. the None arm is (), and it came first.
[21:29:34] *** Joins: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net)
[21:30:04] <eddyb> uhm... there's no reason for the swap-filling allocations
[21:30:33] <derek_c> cmr: ah! thanks a lot :)
[21:30:53] *** Joins: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP)
[21:31:16] <eddyb> like, the mmaps after typeck sum up to 49MB
[21:32:03] <eddyb> all mmaps - 2.3GB. some of it gets freed, like most of typeck
[21:32:31] <eddyb> cmr: did you have an explanation for the swap growth?
[21:33:02] *** Quits: mib_y5ca8e (Mibbit@C83F40FA.C3C4EFEF.4BC5EF08.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:33:13] <cmr> eddyb: no
[21:33:15] *** Quits: petantik (oz@moz-20EC2160.net) (Input/output error)
[21:33:22] *** Joins: oz (oz@moz-20EC2160.net)
[21:35:01] <eddyb> it's in borrowck, soo... let's see
[21:35:07] <cmr> !
[21:35:09] <cmr> borrowck
[21:35:14] <cmr> an eldritch place
[21:35:16] <cmr> tread lightly
[21:35:21] *** Quits: jordyd (jordyd@7DAC4ACE.77F880E0.D9401097.IP) (Ping timeout)
[21:41:02] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[21:45:23] *** Quits: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca) (Ping timeout)
[21:45:40] *** Quits: octurion (octurion@moz-E7EA111C.clients.kiwiirc.com) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[21:45:55] *** Joins: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca)
[21:47:56] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[21:49:44] <eddyb> cmr: I'm confused
[21:49:46] *** Quits: derek_c (derek@moz-FB4F1795.cit.cornell.edu) (Quit: Leaving)
[21:50:45] <eddyb> strcat: what else other than mmap can allocate memory?
[21:50:57] <strcat> sbrk
[21:51:18] <strcat> brk/sbrk/mmap/mremap
[21:51:26] <eddyb> would borrowck use sbrk? I... don't understand what's going on
[21:51:31] <eddyb> strcat: oh, mremap, that might be it
[21:51:59] <strcat> eddyb: no, it uses malloc and that uses mmap/mremap/munmap and maybe brk/sbrk
[21:52:12] <strcat> jemalloc doesn't use brk/sbrk afaik
[21:52:15] <strcat> glibc does
[21:52:16] *** Joins: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net)
[21:52:18] <eddyb> yeah, I need to track mremap as well
[21:52:31] <eddyb> strcat: glibc uses mmap
[21:52:37] <eddyb> at least here
[21:52:42] <strcat> eddyb: it uses brk/sbrk too
[21:52:44] <cmr> ituses both
[21:52:45] <eddyb> (or only for large allocations?)
[21:52:51] <strcat> eddyb: only for large ones, I think
[21:52:54] <strcat> jemalloc always uses mmap
[21:53:04] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[21:53:04] <strcat> it makes thread-local pools
[21:54:48] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[21:55:15] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[21:57:04] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[21:57:44] *** Quits: jstevans (Instantbir@moz-8D4AF6B1.washdc.fios.verizon.net) (Ping timeout)
[21:58:24] *** Quits: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP) (Ping timeout)
[21:58:30] *** Joins: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP)
[22:00:59] *** Quits: tulloch (tulloch@moz-99B7EB8.nat.csx.cam.ac.uk) (Ping timeout)
[22:01:02] *** Quits: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca) (Ping timeout)
[22:01:32] *** Joins: mib_v77x0h (Mibbit@C83F40FA.C3C4EFEF.4BC5EF08.IP)
[22:03:02] *** Quits: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net) (Quit: maxiepoo_)
[22:04:32] *** Quits: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP) (Ping timeout)
[22:04:38] *** Joins: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP)
[22:05:27] *** Joins: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca)
[22:08:46] *** Quits: maxiepoo (mnew@moz-6F50ADE.hsd1.il.comcast.net) (Quit: Leaving)
[22:09:34] *** Joins: jstevans (Instantbir@moz-8D4AF6B1.washdc.fios.verizon.net)
[22:09:55] *** Joins: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net)
[22:10:23] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:11:16] *** Quits: silotis (quassel@moz-4B8C4631.oc.oc.cox.net) (Ping timeout)
[22:11:19] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[22:14:03] *** Quits: japaric (japaric@B17EFFD8.A23A5F6C.E5B504CC.IP) (Quit: WeeChat 0.4.2)
[22:14:33] *** Joins: kkris (kkris@moz-CB70009.yourvserver.net)
[22:15:21] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:15:22] <eddyb> reduced the file to 420kB, let's see...
[22:15:54] *** Quits: bjz (bjz@1009100.A27A8065.D3BA2C17.IP) (Ping timeout)
[22:16:02] *** Quits: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com) (Ping timeout)
[22:16:25] *** Quits: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:17:44] *** Quits: sawrubh (uid6719@moz-5F4AA75A.irccloud.com) (Ping timeout)
[22:17:44] *** Quits: ggherdov_ (sid11402@moz-E77DEB21.irccloud.com) (Ping timeout)
[22:17:44] *** Quits: strmpnk (sid2261@moz-E77DEB21.irccloud.com) (Ping timeout)
[22:17:58] *** Joins: sawrubh (uid6719@moz-5F4AA75A.irccloud.com)
[22:18:31] *** Quits: jstevans (Instantbir@moz-8D4AF6B1.washdc.fios.verizon.net) (Ping timeout)
[22:19:35] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[22:20:20] *** Joins: strmpnk (sid2261@moz-E77DEB21.irccloud.com)
[22:21:11] *** Joins: bjz (bjz@1009100.A27A8065.D3BA2C17.IP)
[22:21:34] <eddyb> rusti: fn foo(mut i: int) {i += 1;}
[22:21:36] -rusti- pastebinned 7 lines of output: http://sprunge.us/IRai
[22:21:47] <eddyb> oh, that works :D
[22:23:32] <eddyb> mremap(67112960 -> 134221824)
[22:24:25] *** Joins: jstevans (Instantbir@moz-8D4AF6B1.washdc.fios.verizon.net)
[22:25:06] <eddyb> cmr: it's compute_id_range
[22:25:20] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[22:25:35] <eddyb> in dataflow::DataFlowContext
[22:26:16] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[22:29:23] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[22:29:31] <eddyb> 0x4001000 -> 0x8001000. three times, and then again other three times
[22:30:42] *** Quits: jstevans (Instantbir@moz-8D4AF6B1.washdc.fios.verizon.net) (Ping timeout)
[22:30:54] *** Joins: jstevans (Instantbir@moz-8D4AF6B1.washdc.fios.verizon.net)
[22:31:12] *** Joins: voxpopuli (fanservice@47316CCD.506D0C43.689607DE.IP)
[22:31:53] *** Joins: ggherdov_ (sid11402@moz-E77DEB21.irccloud.com)
[22:33:07] *** jorendorff_away is now known as jorendorff
[22:38:04] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[22:38:41] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[22:38:46] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: nejucomo)
[22:39:01] *** Joins: adu (ajr@moz-47946E69.washdc.fios.verizon.net)
[22:41:32] <eddyb> oooh, those are vectors
[22:42:46] <eddyb> cmr: 16 million nodes with a reduced testcase :(
[22:44:09] *** Quits: glennsl (textual@moz-6822C772.customer.cdi.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:44:49] *** Quits: StarLight (StarLight@moz-13419FB2.dynamic.avangarddsl.ru) (Ping timeout)
[22:44:55] *** Quits: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:47:20] *** Quits: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP) (Ping timeout)
[22:47:25] *** Joins: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP)
[22:48:45] *** Joins: StarLight (StarLight@moz-9F3F6025.dynamic.avangarddsl.ru)
[22:53:09] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[22:54:21] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[22:54:35] *** jorendorff is now known as jorendorff_away
[22:55:11] *** jorendorff_away is now known as jorendorff
[22:56:03] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[22:56:16] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[22:57:02] *** Quits: bjz (bjz@1009100.A27A8065.D3BA2C17.IP) (Ping timeout)
[22:57:10] *** Parts: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca) ()
[23:00:09] *** Joins: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com)
[23:00:32] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:01:36] *** Joins: thewonderidiot1 (mstewart@moz-E41129BA.ipnetworksinc.net)
[23:02:43] <eddyb> 10k lets.... how many nodes?
[23:06:11] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[23:06:12] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[23:06:36] *** Joins: boredomist (ruqs@B16F530C.DC641F2C.BCAEBB33.IP)
[23:08:08] *** Quits: boredomist (ruqs@B16F530C.DC641F2C.BCAEBB33.IP) (Client exited)
[23:08:45] *** Joins: boredomist (ruqs@B16F530C.DC641F2C.BCAEBB33.IP)
[23:09:13] *** Joins: sam113101 (sam@moz-ADDDDFB1.mc.videotron.ca)
[23:09:55] *** jorendorff is now known as jorendorff_away
[23:10:11] *** Quits: adu (ajr@moz-47946E69.washdc.fios.verizon.net) (Quit: adu)
[23:10:18] <wycats_> how does one read a line from stdin in Rust?
[23:11:52] <eddyb> 1 am joke? or are you asking the most frequently asked question?
[23:12:03] <cmr> eddyb: not actually asked a lot
[23:12:38] *** Joins: adu (ajr@moz-47946E69.washdc.fios.verizon.net)
[23:12:48] <eddyb> cmr: did it tune down?
[23:13:13] <wycats_> eddyb: it's a dumb question I know :(
[23:13:22] <wycats_> I don't need it for anything real... just an example
[23:13:27] *** Joins: jordyd (jordyd@7DAC4ACE.77F880E0.D9401097.IP)
[23:13:31] <eddyb> nah, it was just asked a lot at times
[23:13:35] <kimundi> wycats_: Don't worry, it's not dump
[23:13:43] <wycats_> eddyb: yeah... and there isn't a good answer on Google
[23:13:49] <wycats_> the googles are failing me
[23:13:55] <cmr> wycats_: let in = std::io::buffered::BufferedReader::new(std::io::stdin()); let line = in.read_line();
[23:14:05] <eddyb> and the rtio was in the process of moving to its proper place, things were still missing, etc.
[23:14:08] <kimundi> wycats_: IO changed often enough that I still don't have any clue how to do that despite using rust since 6+ months :P
[23:14:15] <wycats_> kimundi: heh
[23:14:36] <wycats_> cmr: ah so make a buffer and use *its* read_line
[23:14:45] <eddyb> cmr: neat, that might explain why the cries for help aren't to be heard anymore
[23:14:49] <cmr> wycats_: yes
[23:15:17] <kimundi> There should be a convenience function for that. std::io::buffered_stdin() or so
[23:15:33] <cmr> Ideally StdReader (the thing stdin() returns) would implement Buffer, but problems with the type system prevent that.
[23:15:41] <kimundi> But maybe there already is, as I said, no idea :P
[23:15:49] <kimundi> ah, okay
[23:15:56] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[23:16:12] *** Quits: nik_ (nik@moz-AC1C37C9.vpn.rwth-aachen.de) (Client exited)
[23:16:13] *** Joins: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net)
[23:17:00] <wycats_> cmr: and of course you need let mut in =, right?
[23:17:20] <cmr> wycats_: ah, yes, of course.
[23:17:31] <eddyb> rusti: let mut in = 4; in
[23:17:32] -rusti- pastebinned 8 lines of output: http://sprunge.us/GENZ
[23:18:08] <eddyb> so you need to name it something else :P
[23:18:26] <wycats_> eddyb: buffer ;)
[23:18:29] <wycats_> worksforme
[23:18:44] <wycats_> is there a better example of a string whose size you don't know ahead of time?
[23:19:04] <wycats_> (I'm trying to explain why you need ~str, essentially)
[23:19:26] <wycats_> obviously if you  just make a function that you call, you need to explain how the original string came to exist in the first place :P
[23:19:29] <eddyb> wycats_: format!, concatenate some other strings
[23:19:41] <wycats_> eddyb: but you know the size of THOSE strings
[23:19:44] *** Joins: silotis (quassel@moz-4B8C4631.oc.oc.cox.net)
[23:19:58] <wycats_> imagine you're writing a small hello world program to illustrate it
[23:20:03] <eddyb> rusti: let mut s = ~"foo"; s += "bar"; s
[23:20:04] -rusti- <anon>:9:29: 9:39 error: binary operation + cannot be applied to type `~str`
[23:20:04] -rusti- <anon>:9          let mut s = ~"foo"; s += "bar"; s
[23:20:04] -rusti-                                       ^~~~~~~~~~
[23:20:05] -rusti- error: aborting due to previous error
[23:20:05] -rusti- application terminated with error code 101
[23:20:15] <eddyb> huh?
[23:20:22] <wycats_> eddyb: ?
[23:20:23] <dbaupp> eddyb: can't use +=
[23:20:37] <eddyb> operator+=
[23:20:43] * eddyb cries a little
[23:20:52] <wycats_> :shipit:
[23:20:57] <eddyb> rusti: let mut s = ~"foo"; s.push("bar"); s
[23:20:58] -rusti- <anon>:9:29: 9:43 error: type `~str` does not implement any method in scope named `push`
[23:20:58] -rusti- <anon>:9          let mut s = ~"foo"; s.push("bar"); s
[23:20:58] -rusti-                                       ^~~~~~~~~~~~~~
[23:20:58] -rusti- error: aborting due to previous error
[23:20:58] -rusti- application terminated with error code 101
[23:21:04] <eddyb> rusti: let mut s = ~"foo"; s.append("bar"); s
[23:21:06] -rusti- pastebinned 8 lines of output: http://sprunge.us/KZER
[23:21:06] <wycats_> I could probably use a vector more easily
[23:21:16] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[23:21:17] <wycats_> as an explanation
[23:21:36] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[23:21:42] *** jorendorff_away is now known as jorendorff
[23:21:43] <eddyb> are strings even mutable?
[23:21:57] <cmr> eddyb: yes
[23:22:11] *** Quits: jordyd (jordyd@7DAC4ACE.77F880E0.D9401097.IP) (Ping timeout)
[23:22:17] <eddyb> well, bruteforce ain't going to work for me
[23:22:26] <dbaupp> .push_str
[23:22:29] <dbaupp> read the docs :P
[23:22:45] <SingingBoyo> I feel silly asking this, but how does one get the length of a vector?
[23:22:51] <eddyb> SingingBoyo: v.len()
[23:22:53] <eddyb> rusti: let mut s = ~"foo"; s.push_str("bar"); s
[23:22:54] <dbaupp> eddyb: http://static.rust-lang.org/doc/master/std/str/trait.OwnedStr.html#tymethod.push_str
[23:22:55] -rusti- ~"foobar"
[23:23:02] <eddyb> wycats_: ^
[23:23:14] <SingingBoyo> eddyb: ah.  should've known it'd be an abbreviation I didn't look for.
[23:23:15] <wycats_> makes sense
[23:23:21] <wycats_> in principle you know the size, but not really
[23:23:28] <eddyb> you can probably make an example for a combination of push format (for numbers)
[23:23:35] <myname> i am always getting confused about .len(), .length(), .len and .length in different languages :(
[23:23:42] <eddyb> *push and format
[23:23:47] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Client exited)
[23:24:01] <cmr> wycats_: How about reading in a number from stdin, and making a string consiting of "foo" that many times? :)
[23:24:28] <eddyb> myname: hmm, that makes me think
[23:24:55] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[23:24:57] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[23:25:08] <eddyb> what if the repr of &[T] would be struct {priv data: *[T], length: uint}?
[23:25:38] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Ping timeout)
[23:25:39] <eddyb> so then you can actually do v.length :D
[23:26:01] <wycats_> :)
[23:26:21] <cmr> eddyb: but then you could do v.length = 1234, and now you've broken memory safety.
[23:27:06] <eddyb> cmr: need immut/const marker, I guess
[23:27:39] <cmr> No, just don't do silly things :)
[23:27:44] *** Joins: sprang (sprang@moz-A6E49E94.danastreet.live555.com)
[23:29:02] <eddyb> this is the kind of thing you can easily do with a little unsafe code anyway
[23:31:18] *** Joins: onix (Mibbit@moz-E9218C9D.ga.at.cox.net)
[23:31:37] <wycats_> structs without destructors are implicitly copied?
[23:31:51] <dbaupp> wycats_: they don't move when passed by value, yes
[23:32:19] <wycats_> but you can't observe that directly since passing by value doesn't pass mutable references, right?
[23:32:30] <wycats_> so you have no way to see that it's a copy
[23:32:38] *** Joins: valenting (Thunderbir@808EE6B5.84D5EFD5.FB866788.IP)
[23:32:40] <onix> Is there any way to measure the cache locality of a rust program?
[23:32:51] <strcat> callgrind
[23:32:57] <cmr> onix: is there any way to measure the cache locality of a C program?
[23:32:57] <onix> Or to see the physical memory locations of data?
[23:33:02] <strcat> (use kcachegrind)
[23:33:06] <onix> onix: idk
[23:33:08] <cmr> Same answer, to both questions.
[23:33:32] <onix> Okay callgrind and kcachegrind... Thanks
[23:33:39] <strcat> well kcachegrind uses callgrind
[23:33:45] <strcat> it's just a visualizer
[23:33:53] <onix> strcat: Ah. Thanks.
[23:34:06] <onix> Are there any Windows-specific utilities? (Just in case)
[23:34:37] *** Quits: mib_v77x0h (Mibbit@C83F40FA.C3C4EFEF.4BC5EF08.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[23:34:41] <strcat> afaik kcachegrind runs on windows
[23:35:39] <strcat> well
[23:35:43] <strcat> I guess you can't use callgrind
[23:35:45] * strcat shrugs
[23:37:25] <SingingBoyo> Is it possible to do something like 'type Foo = TraitName<X,Y>;'?
[23:37:40] *** Joins: q66_ (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[23:38:07] <dbaupp> SingingBoyo: `type Foo = ~TraitName<X,Y>;` (or &) yes, but not a bare trait
[23:38:26] <eddyb> could we do that, with DSTs?
[23:38:36] <strcat> yes
[23:38:40] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[23:39:16] *** Joins: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net)
[23:39:16] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[23:39:20] *** Joins: alonlevy (alon@moz-BCF1494.bb.netvision.net.il)
[23:39:35] <eddyb> I then wish you could use Foo (the unboxed one) as a function parameter and it would become a generic type param with the trait as a bound
[23:39:59] <strcat> but why? what do people even use type aliases for? ;p
[23:40:02] <SingingBoyo> dbaupp: ah damn.  is there a way to simulate it with trait 'inheritance'?  Or would I have to have 'impl Trait for X' for all implementing types?
[23:40:04] *** Quits: onix (Mibbit@moz-E9218C9D.ga.at.cox.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:40:21] <strcat> SingingBoyo: what do you want to do?
[23:40:37] <SingingBoyo> strcat: for multi-parameter traits where some parameters aren't even really relevant :p
[23:41:02] <SingingBoyo> strcat: Basically, I have a cache trait, and I'd prefer not to write Cache<ImageFileName, CachedImage, ()> everywhere
[23:41:14] *** Quits: sprang (sprang@moz-A6E49E94.danastreet.live555.com) (Quit: sprang)
[23:41:16] <eddyb> strcat: imagine doing this with the Fn trait, without being explicitly generic
[23:41:33] <wycats_> what's the attribute that makes a struct implement std::fmt::Default?
[23:41:41] <dbaupp> wycats_: nothing
[23:41:45] *** noam_ is now known as noam
[23:41:50] <dbaupp> wycats_: you need to implement it by hand for now
[23:41:53] <wycats_> I tried #[deriving(ToStr)]
[23:41:54] <wycats_> ok
[23:41:57] <wycats_> seems legit
[23:42:02] <eddyb> that would derive ToStr :P
[23:42:06] <dbaupp> yeah, that implements the old version of Default
[23:42:16] <eddyb> old Default forwarded to ToStr?
[23:42:17] * dbaupp wants ToStr to be replaced by Default
[23:42:31] <dbaupp> eddyb: no, Default didn't exist until recently
[23:42:36] <eddyb> right, sorry
[23:42:55] <dbaupp> ToStr was just the old way of Type -> Str, while std::fmt is the new (more) efficient way
[23:43:48] *** Joins: bjz (bjz@1009100.A27A8065.D3BA2C17.IP)
[23:44:02] <wycats_> I'll just use {:?} :P
[23:44:10] <wycats_> and ToStr
[23:44:28] <dbaupp> wycats_: you can cheat and derive ToStr and just use `impl Default for Struct { fn fmt(x: &Struct, f: &mut Formatter) { f.buf.write(x.to_str().as_bytes()) } }`
[23:44:40] <strcat> as long as you realize {:?} is a slow/bloated feature for debugging with an unstable representation
[23:45:04] <wycats_> hm... :? works without deriving
[23:45:12] <wycats_> strcat: yes, this is for debugging/examples
[23:45:18] *** Joins: moostik (Icedove@moz-63ED7231.w82-121.abo.wanadoo.fr)
[23:45:22] <dbaupp> yes :? uses compiler generated magic to walk any/every type
[23:45:38] <dbaupp> (except for through * pointers and trait objects)
[23:45:43] <eddyb> strcat: someone else told me you wanted to remove the typedesc ptr from the vtable (unless that someone was you)
[23:45:55] <strcat> including walking into private fields
[23:46:28] <eddyb> strcat: I see how it can be moved into Any::get_type_desc, being default-implemented with an intrinsic
[23:47:10] <eddyb> and then, things like Fn, Index, etc, have one vtable entry, which can be unboxed :D
[23:47:11] *** Joins: mr_boo (Mibbit@moz-86F113EA.lns20.adl2.internode.on.net)
[23:47:17] *** Quits: KindOne (KindOne@moz-B58371D0.dynamic.ip.windstream.net) (Ping timeout)
[23:47:26] <strcat> eddyb: no
[23:47:29] <eddyb> (although I'm not sure why you would use an Index trait pointer)
[23:47:30] <strcat> still have a dtor
[23:47:33] <eddyb> :(
[23:47:52] <strcat> and whatever bloat GC will need
[23:48:12] <strcat> but it would be nice if the compiler had a separate code path for people not using the stdlib
[23:48:35] <strcat> where it wouldn't need stuff like that
[23:48:49] <eddyb> kimundi was hoping the Fn trait and the current closure repr would merge
[23:49:09] <strcat> the closure representation sucks
[23:49:22] <strcat> it's designed for GC support
[23:49:56] *** Quits: jstevans (Instantbir@moz-8D4AF6B1.washdc.fios.verizon.net) (Ping timeout)
[23:49:58] <strcat> ptr -> { { ref_count, tydesc, prev, next }, env[] }
[23:50:08] <eddyb> I originally thought that casting a type implementing the Fn trait to a closure would take the Fn::call ptr from the vtable, and would use the object itself for env
[23:50:17] <strcat> (and the fn ptr, since it's a fat ptr)
[23:50:22] <eddyb> strcat: that's heap closures, no?
[23:50:42] <strcat> eddyb: it does that for stack closures borrowed as &fn too.
[23:51:11] <strcat> GC would need to be able to see what they have inside them
[23:51:28] *** Joins: KindOne (KindOne@moz-23FA8CB1.dynamic.ip.windstream.net)
[23:51:29] <eddyb> but.... the fn trait... :(
[23:51:31] <strcat> same with heap closures, but they also use the tydesc to call the dtor
[23:51:48] <strcat> eddyb: well, everything is crippled for gc support, that's just how it is ;p
[23:52:17] <eddyb> what would happen for &Fn and ~Fn, wrt GC?
[23:52:19] <strcat> just wait until everything doing custom allocation needs annotations and rooting API calls
[23:52:38] <strcat> eddyb: they would need to always have a tydesc
[23:52:42] <eddyb> Traceable. yuck
[23:53:15] <strcat> yeah, the stdlib will never appeal to embedded devs like this
[23:53:36] <strcat> should be able to have virtual methods without bloat
[23:54:02] <eddyb> one would expect devirtualization to be easier
[23:54:18] <eddyb> constant pointers to constant memory etc.
[23:55:31] <strcat> anyway I'll eventually get around to removing the tydesc in more places, and if gc needs it the stdlib can use a slow path
[23:55:46] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[23:56:16] <eddyb> strcat: what about the intrinsic used by Any idea for it?
[23:56:22] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[23:56:34] <strcat> what do you mean?
[23:57:12] <eddyb> moving it into Any::get_type_desc, which is default-implemented with an intrinsic
[23:57:41] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[23:58:06] <strcat> I'm not interested in fixing the stdlib anymore
[23:58:14] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[23:58:57] <eddyb> I can't look at file sizes without seeing megabytes as monsters
