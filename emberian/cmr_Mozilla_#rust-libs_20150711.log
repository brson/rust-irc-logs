[00:06:56] *** Joins: Rym (uid91135@moz-n2i7qm.charlton.irccloud.com)
[00:14:28] *** Quits: brson_ (brson@moz-bro.mg6.56.172.IP) (Ping timeout: 121 seconds)
[00:32:42] *** Quits: nagisa (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[01:12:55] *** Joins: blank_na1e (blank_name@moz-ms6nj1.mi.frontiernet.net)
[01:15:04] *** Quits: blank_name (blank_name@moz-ttfeua.mi.frontiernet.net) (Ping timeout: 121 seconds)
[01:52:32] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Connection closed)
[01:59:29] *** Quits: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[02:12:51] *** Quits: kimundi (kimundi@moz-l9v88u.dtlu.8ps3.57bc.2002.IP) (Ping timeout: 121 seconds)
[02:19:34] *** Joins: kimundi (kimundi@moz-v038uj.nbov.7sqf.4fe2.2002.IP)
[02:42:49] *** Quits: Rym (uid91135@moz-n2i7qm.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[02:52:51] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[02:57:07] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Ping timeout: 121 seconds)
[03:03:35] *** Joins: brson (brson@moz-3ki2he.tmodns.net)
[03:03:35] *** ChanServ sets mode: +qo brson brson
[03:53:10] *** Quits: brson (brson@moz-3ki2he.tmodns.net) (Ping timeout: 121 seconds)
[03:54:32] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[03:59:20] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Ping timeout: 121 seconds)
[05:07:31] <sfackler> Gankro: are there plans to add a parameterized comparator to BTreeMap and BTreeSet?
[05:07:40] <sfackler> er, comparator parameter
[05:07:56] <Gankro> sfackler: like https://github.com/contain-rs/compare/ ?
[05:09:15] <sfackler> yeah, something like BTreeMap<K, V, C: Compare<K> = Natural>
[05:24:34] <Gankro> sfackler: That's my hope
[05:24:49] <Gankro> In fact it was literally one of the first things I ever tried to do in the stdlib :)
[05:24:50] <sfackler> probably needs defaults to be finished
[05:24:53] <Gankro> Yeah
[05:26:26] <Gankro> It's not super high priority, though
[05:28:14] <Gankro> sfackler: Interested in championing...?
[05:28:26] <sfackler> eh, maybe
[05:28:44] <sfackler> it would answer some awkward questions in the rust thrift impl
[05:29:05] <Gankro> Interesting; like?
[05:29:34] <sfackler> thrift has support for maps, lists and sets
[05:29:40] <sfackler> of arbitrary objects
[05:29:57] <sfackler> this is awkward because when generating rust code, you'd either go with HashMap/Set or BTreeMap/Set
[05:30:18] <sfackler> but floats don't implement Eq or Ord, and HashMap/Sets don't implement Hash, so you can't just slap a #[derive] on everything
[05:30:46] <Gankro> sfackler: I think we're thinking of just killing the Ord/PartialOrd thing
[05:30:54] <Gankro> It... doesn't clearly carry its weight
[05:30:58] <sfackler> what seems like the best route is to make a ThriftOrd or whatever trait, implement it for everything including floats, and then use BTreeMap<K, V, TreeOrdCmp>
[05:31:06] <sfackler> I would be on bard with that
[05:31:21] <Gankro> sfackler: I think there's a path with specialization
[05:31:23] <sfackler> the idea would be to deprecate Ord and move everything to PartialOrd?
[05:31:45] <sfackler> s/TreeOrdCmp/ThriftOrdCmp/
[05:31:56] <Gankro> I think move everything to Ord; kill PartialOrd
[05:32:09] <Gankro> impl PartialOrd for Ord
[05:32:09] <sfackler> oh right
[05:32:19] <sfackler> aww yeah specialization
[05:32:27] <sfackler> I assume the same thing for PartialEq/Eq?
[05:32:30] <Gankro> Yeah
[05:32:36] <sfackler> cool
[05:32:51] <Gankro> But this is pretty hypothetical
[05:32:58] <sfackler> there is some stuff that's legitimately only PartialOrd like ranges
[05:33:11] <sfackler> but you can't really do much with just partialord
[05:33:16] <sfackler> so..
[05:33:17] <Gankro> Yeah that's the thing
[05:33:27] <sfackler> and floats are awful, but oh well
[05:33:29] <Gankro> And like, no one can do anything special with Ord
[05:33:34] <sfackler> they aren't even partialord so screw it
[05:33:35] <Gankro> Like they have to assume it's partialord anyway
[05:33:49] <sfackler> why's that?
[05:33:59] <Gankro> At least for unsafe code
[05:34:05] <sfackler> oh sure
[05:34:19] <sfackler> well, no, unsafe code has to assume that the impls arbitrarily badly behaved
[05:34:22] <sfackler> not just partial
[05:34:46] <Gankro> sfackler: Yeah. I don't really acknowledge that PartialOrd has requirements
[05:34:52] <Gankro> It super makes no sense
[05:35:04] <sfackler> I mean, partial orders are A Thing in math
[05:35:20] <sfackler> but IIRC most of the motivation for PartialOrd was floats
[05:35:21] <Gankro> But like... I just want to overload this operator
[05:35:24] <sfackler> which are not partially ordered
[05:35:38] <Gankro> sfackler: What's the counter example?
[05:35:45] <sfackler> I mean, at that point we may want cmp::{Less, Leq, Greater, etc} traits
[05:35:54] <sfackler> !(NaN <= NaN)
[05:36:12] <Gankro> Oh right, partial orderings are refelxive
[05:36:20] * Gankro should really know this stuff
[05:36:36] <Gankro> I've taught at uni enough times :P
[05:37:56] <Gankro> I don't think sharding the traits is worth it
[05:40:22] <Gankro> The ops defer to the individual methods iirc
[05:40:52] <Gankro> You can spew whatever trash you want for "nonsense" operations
[05:41:02] <Gankro> or even unimplemented!()
[06:11:24] *** Joins: barosl (barosl@moz-tmp.qma.67.220.IP)
[06:32:56] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[07:16:19] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Connection closed)
[08:07:17] *** Joins: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se)
[08:57:12] *** Joins: manishea1th (manishearth@moz-uc30rq.anapnea.net)
[08:58:10] *** Quits: Manishearth (manishearth@moz-uc30rq.anapnea.net) (NickServ (RECOVER command used by manishea1th))
[08:58:10] *** manishea1th is now known as Manishearth
[08:58:11] *** ChanServ sets mode: +ao Manishearth Manishearth
[09:04:13] *** Quits: ChrisMorgan (ChrisMorgan@moz-g2hg6v.tpgi.com.au) (Ping timeout: 121 seconds)
[09:57:02] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[10:05:47] *** Joins: nagisa (nagisa@moz-8t068g.static.zebra.lt)
[11:15:12] *** Quits: stl (stl@moz-stg.7dk.15.176.IP) (Ping timeout: 121 seconds)
[11:52:40] *** Joins: stl (stl@moz-al5.8pf.15.176.IP)
[12:34:34] *** Joins: ChrisMorgan (ChrisMorgan@moz-g2hg6v.tpgi.com.au)
[14:24:34] *** Quits: huon (huon@moz-hj272o.8rnv.rggd.6180.2400.IP) (Ping timeout: 121 seconds)
[14:27:06] *** Joins: huon (huon@moz-hj272o.8rnv.rggd.6180.2400.IP)
[14:27:06] *** ChanServ sets mode: +qo huon huon
[14:54:51] *** Joins: manishea1th (manishearth@moz-uc30rq.anapnea.net)
[17:50:04] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[19:34:54] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Connection closed)
[20:16:12] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[20:29:13] *** Quits: quantheory (quantheory@moz-pjo3s1.36gq.r6rv.0280.2601.IP) (Quit: Leaving)
[20:55:50] <Gankro> API design flash round; should a type have get_mut if it doesn't have get? That is, should get_mut just be called get?
[20:56:05] <Elaine> ehh
[20:56:15] <Elaine> that seems like a nice way to get confusing-to-read-code.
[20:58:08] <Gankro> Elaine: It's for lru-cache. `get` has to be mutable because it mutates the internals
[20:58:50] <Elaine> So to me get :: Some Self Thing -> &T, get_mut :: Some Self Thing -> &mut T
[20:59:02] <Elaine> get_mut is allowed to borrow refcells mutably etc
[20:59:11] <Elaine> the receiver type is an irrelephant.
[20:59:20] <Elaine> that's what I expect when I read code
[20:59:29] <Gankro> Elaine: I will cite you as an authority, then
[20:59:47] <Elaine> (get could also just be -> T)
[20:59:56] <Elaine> (but get_mut should always be a handle of some sort)
[21:00:45] <bluss> Gankro: you have to be sure you'll never add &self .get()
[21:00:58] <Gankro> bluss: in this case it's certain
[21:01:31] <Gankro> unless nmatsakis fundamentally changes the way borrows work and makes foo(&mut self) -> &T not useless
[21:01:58] <bluss> what about get(&self) -> &T
[21:02:05] <bluss> you could have a mode where you don't mutate
[21:02:11] <Gankro> bluss: that would semantically deviate from how LRUcache works
[21:02:16] <Gankro> I would want that to have a different name
[21:02:21] <Gankro> like peek or something
[21:02:26] <bluss> it's a good reason
[21:17:10] <Gankro> I'd like to nominate tshepang for Libs Team FotT for their unending perserverance in pouring over ever single bit of documentation to make it clearer
[21:19:50] <WindowsBunny> Gankro: *poring over
[21:20:07] <Gankro> WindowsBunny: See that's why we need tshepang
[21:20:11] <Gankro> I can't write
[21:20:41] <Gankro> and steve insists on using American english, which as we all know is empirically inferior
[21:21:00] <WindowsBunny> I insist on Rust using American English as well
[21:21:42] <WindowsBunny> Gankro: Don't worry, I'm sure we can provide a translation of the docs to en-gb for you
[21:22:10] <Gankro> WindowsBunny: it's cool, all of TURPL is en-CA :P
[21:30:51] <bluss> I promise to insert en-$RANDOM where I go
[21:44:10] *** Manishearth is now known as Guest1111
[21:44:10] *** manishea1th is now known as Manishearth
[23:35:46] *** Quits: barosl (barosl@moz-tmp.qma.67.220.IP) (Connection closed)
[23:36:04] *** Joins: barosl (barosl@moz-tmp.qma.67.220.IP)
[23:58:29] *** Quits: nagisa (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
