[00:00:04] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[00:00:29] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[00:00:44] <dbaupp> ChrisMorgan: fwiw, it'd be neat to use .expect("couldn't start listening"), and .expect("failed to accept"), to discourage completely plain unwraps that could easily fail.
[00:01:15] <ChrisMorgan> True.
[00:01:37] <benh> Shouldn't these return Results with something like an errno in the Err bit?
[00:01:57] <ChrisMorgan> dbaupp: of course, it will never actually get there because the conditions are not caught.
[00:02:03] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[00:02:15] <ChrisMorgan> I believe that's why I didn't use expect or similar.
[00:02:16] <dbaupp> ChrisMorgan: oh, I forgot they use conditions internally.
[00:02:31] * ChrisMorgan is not fond of expect because the file and line number are meaningless
[00:02:44] <ChrisMorgan> Ditto unwrap.
[00:02:57] *** Joins: jviereck (Adium@moz-E9ABC34A.dip0.t-ipconnect.de)
[00:03:08] <dbaupp> it's better than .unwrap, because at least the error message is meaningful.
[00:03:24] <ChrisMorgan> Indeedy.
[00:03:28] <strcat> ChrisMorgan: relying on line/file from fail!() is really bad
[00:03:35] <strcat> should be relying on tracebacks, not these macro hacks
[00:03:37] <strcat> I don't get it
[00:03:41] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[00:04:01] <dbaupp> do we have a sane way of printing a traceback atm?
[00:04:15] <strcat> not built-in
[00:04:17] <Luqman> ChrisMorgan: you can also replace the loop with `for sock in acceptor.incoming() { ... }`
[00:04:17] *** Joins: Sgeo (quassel@moz-D0F30617.dyn.optonline.net)
[00:04:28] <strcat> gdb can, ofc
[00:04:40] *** Quits: jviereck (Adium@moz-E9ABC34A.dip0.t-ipconnect.de) (Ping timeout)
[00:04:42] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[00:04:53] <ChrisMorgan> strcat: in a deployment environment you may not have the tooling to get a backtrace, but you will normally have the failure message.
[00:05:03] *** Quits: zaphod_b (ford_p@moz-CCE57F2F.eblcom.ch) (Quit: Leaving)
[00:05:11] <strcat> ChrisMorgan: C++ can print backtraces without gdb
[00:05:13] <strcat> works fine
[00:05:15] <strcat> why can't rust?
[00:05:24] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[00:05:24] <dbaupp> because it's not been implemented
[00:05:29] <dbaupp> (presumably)
[00:05:36] <strcat> because people are using file/line number hacks from macros instead
[00:05:44] <ChrisMorgan> strcat: theoretically, perhaps. In practice, we don't have it, so the fail! file/line are useful.
[00:06:00] <kmc> i use this small script around gdb: https://gist.github.com/kmcallister/7047619
[00:06:14] <ChrisMorgan> Luqman: I didn't see that when it landed. Looks good.
[00:06:28] <strcat> ChrisMorgan: except when they're not useful, and there's a proliferation of this mess with stuff like unreachable!
[00:07:01] *** Joins: lkuper (lkuper@87D98E32.4046EB22.428F94DD.IP)
[00:08:47] <heftig> how would a ~[char] differ from a ~[u32] ?
[00:08:58] <mark_edward> cmr, are modules even items? if i print every items name and span, none of them seem to correspond to modules
[00:09:22] *** Quits: alan (alan@moz-FE02DD30.sat6.rackspace.com) (Ping timeout)
[00:09:39] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[00:09:41] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[00:10:00] <kmc> heftig: some u32 values are not valid Unicode codepoints; I believe char forbids those
[00:10:03] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: )
[00:10:09] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[00:10:27] <kmc> rusti: 0xD800_u32 as char
[00:10:31] -rusti- <anon>:9:9: 9:27 error: only `u8` can be cast as `char`, not `u32`
[00:10:31] -rusti- <anon>:9          0xD800_u32 as char
[00:10:31] -rusti-                   ^~~~~~~~~~~~~~~~~~
[00:10:31] -rusti- error: aborting due to previous error
[00:10:31] -rusti- application terminated with error code 101
[00:10:38] <kmc> hrm
[00:10:47] <strcat> char::from_u32
[00:10:57] <kmc> rusti: std::char::from_u32(0xD800)
[00:10:57] <strcat> it rejects surrogates and out-of-range ones
[00:10:59] -rusti- None
[00:11:08] <Luqman> mark_edward: mods aren't items. mods contain items
[00:11:14] <heftig> I see; so an array of char would be transformable to a string without fail?
[00:11:29] <strcat> kmc: char used to act like an integer but I changed it to not have +, -, casts from arbitrary ints, etc.
[00:11:39] <strcat> heftig: yes
[00:11:40] <kmc> heftig: yeah
[00:11:44] <mark_edward> Luqman, so what do i need to visit to get a module itself, in terms of the AST? i want to get each modules name and span
[00:11:52] <strcat> push_char always works
[00:11:55] *** Joins: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net)
[00:11:56] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[00:13:02] <Luqman> mark_edward: visit_mod ?
[00:13:29] *** Quits: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP) (Quit: Lost terminal)
[00:13:58] *** Quits: avsej (avsej@D9A610B8.4841F515.FB33447D.IP) (Ping timeout)
[00:14:24] <mark_edward> Luqman, that just gives me the span of each `mod ...` declaration in the crate
[00:14:36] <mark_edward> so it's all span in the root crate file
[00:14:51] *** Joins: avsej (avsej@D9A610B8.4841F515.FB33447D.IP)
[00:15:17] *** Joins: jvns (bork@87D98E32.4046EB22.428F94DD.IP)
[00:15:24] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Ping timeout)
[00:16:10] <Luqman> mark_edward: what span do you want then?
[00:16:46] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[00:18:10] <mark_edward> Luqman, like span describing the actual module. like if the module is a whole source file, the span would be "mod.rs:1:0 <last_line>:<last_col>"
[00:21:15] *** kimundi is now known as zz_kimundi
[00:21:33] *** Quits: avsej (avsej@D9A610B8.4841F515.FB33447D.IP) (Ping timeout)
[00:21:48] *** Joins: santiago (santiago@moz-8ADE82B4.socal.res.rr.com)
[00:24:09] *** Quits: japaric (japaric@FFB1354E.A75B951F.A936879B.IP) (Quit: WeeChat 0.4.2)
[00:24:17] *** Joins: japaric (japaric@FFB1354E.A75B951F.A936879B.IP)
[00:26:17] *** Quits: mye (mye@moz-690373B4.dip0.t-ipconnect.de) (Quit: mye)
[00:28:33] *** Joins: hoopsnake (zac@moz-12CDD1F8.hsd1.wa.comcast.net)
[00:29:05] <mark_edward> Luqman, you get what i mean?
[00:30:08] <pcwalton> acrichto: r? https://github.com/mozilla/rust/pull/10791
[00:30:13] <pcwalton> 10 uses of Cell left...
[00:30:14] <pcwalton> back in a bit
[00:30:21] *** Quits: pcwalton (pcwalton@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[00:32:52] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:33:27] *** Joins: vky (chatzilla@moz-4F2E17BF.dsl.dynamic.sonic.net)
[00:33:47] *** Joins: weirdo (Mibbit@moz-6BAFD52D.f0.protectedgroup.com)
[00:34:10] *** Quits: weirdo (Mibbit@moz-6BAFD52D.f0.protectedgroup.com) (User has been banned from Mozilla (no spamming here))
[00:34:40] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[00:38:07] *** Joins: headcrash (Mibbit@moz-280D23AB.sub-174-252-112.myvzw.com)
[00:41:40] <tiffany> why is cell so common?
[00:42:09] <ChrisMorgan> tiffany: historical reasons. It's being scrapped.
[00:42:22] <tiffany> what did cell even do?
[00:42:25] <sfackler> before proc, it was the only way to move things into closures
[00:42:31] <tiffany> ah
[00:42:32] <sfackler> tiffany: dynamic mutability
[00:42:46] <ChrisMorgan> It was needed in order to move things into a closure, most notably for spawning a task, because the closure did not guarantee it would only be run once.
[00:42:48] <dbaupp> sfackler: no, the only way to move a captured variable out of a closure
[00:43:22] <dbaupp> (moving in is always fine, but invalidating that captured variable by moving out needs a guarantee that the closure is only run once.)
[00:43:32] <ChrisMorgan> Procedures guarantee they will only be run once, and so the value can be moved with no problems.
[00:44:06] *** Quits: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net) (Quit: maxiepoo_)
[00:44:59] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[00:45:20] *** Joins: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net)
[00:47:23] <ChrisMorgan> Luqman: http://stackoverflow.com/a/17689618/497043 is now using Acceptor.incoming().
[00:47:35] <ChrisMorgan> Thanks for the tip. I should now do the same in rust-http.
[00:47:42] <kmc> is Cell actually going away?
[00:49:15] <ChrisMorgan> I believe so.
[00:49:40] <bstrie> kmc: only to rise again from the ashes!
[00:49:59] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[00:50:05] <vmx> is something wrong with the buildbot? i wouldn't think that so many commits in a row would break the build (i currently keep looking at bors as i'm waiting for me pull request to be tested)
[00:50:22] <bstrie> where does the name "cell" come from
[00:50:48] <bstrie> is it jargon from somewhere
[00:50:50] <tjc> bstrie: like "memory cell", I'm assuming
[00:51:00] <tjc> which is sort of an old-fashioned name for a word of storage
[00:51:19] <strcat> I think it comes from ML
[00:51:34] *** Joins: prooftechnique (prooftechn@moz-1C9C6B71.hsd1.vt.comcast.net)
[00:51:46] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[00:52:22] <strcat> http://www.mlton.org/guide/20100608/Mutable the most thorough tutorial ever
[00:52:30] <dbaupp> vmx: there is something peculiar going on (#rust-internals has just be discussing how to set up the bots to get more diagnostic info out of them)
[00:52:32] <ChrisMorgan> Hmm, incoming() won't work out in rust-http, because I *am* actually catching the condition, but need to restrict it to just the accept call.
[00:52:49] <kmc> Cell combines a ML-style ref cell with the nullability also present in Option, which is weird
[00:52:53] *** Quits: headcrash (Mibbit@moz-280D23AB.sub-174-252-112.myvzw.com) (Quit: http://www.mibbit.com ajax IRC Client)
[00:53:04] <vmx> dbaupp: ok cool. good to know that someones looking at it (i was expecting it, but you never know :)
[00:53:09] <strcat> kmc: it uses the nullability to make it safely mutable though
[00:53:14] <kmc> Haskell's MVar does that too, but for the sake of concurrent semantics
[00:53:20] <kmc> *nod*
[00:53:21] <sfackler> kmc: there's now RefCell which avoids the nullability part
[00:54:39] *** Joins: synackse (synackse__@7DAC4ACE.77F880E0.D9401097.IP)
[00:56:57] <clark> I'm having trouble running 'make check' on ubuntu 12.10. Has anyone else seen this? http://pastebin.com/AzgRjgPa
[00:57:53] <o11c> wtf
[00:57:55] <ChrisMorgan> That operating systems course where the professor was using Rust 0.7—is it finished now? (Mainly I mean: is there value in providing the 0.7 extra::net TCP server answer or should I get my Disciplined badge at long last?)
[00:58:12] <dwrensha> clark: I'm seeing something similar on OSX : https://gist.github.com/dwrensha/57f2d8bbd6b472a95f89
[00:58:21] <ChrisMorgan> clark: I had that problem too; upgrading clang to 3.4 fixed it up for me.
[00:58:32] <dbaupp> ChrisMorgan: they migrated to 0.8/master
[00:58:42] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[00:58:49] *** Quits: nkoep (nik@moz-45C7E23F.pool.mediaways.net) (Client exited)
[00:58:51] <clark> ChrisMorgan: is there an easy way to do that on ubuntu, or do I just have to compile from source?
[00:59:02] <ChrisMorgan> clark: not sure about 12.10; I'm on 13.10.
[00:59:12] <clark> oops, I meant 13.10
[00:59:24] <ChrisMorgan> That makes more sense—for it was the 13.10 upgrade that broke it for me.
[00:59:35] <ChrisMorgan> Hang on a seck, I'll chec.
[00:59:47] <clark> thanks
[01:00:45] <ChrisMorgan> Start off by trying the clang-3.4 package.
[01:00:56] * ChrisMorgan should have documented explicitly what was needed
[01:01:11] <clark> ah. wonderful. so that's a thing.
[01:01:23] <clark> I'll try again. thanks a ton!
[01:01:55] <ChrisMorgan> You're welcome. Note that I never found it caused any problem, except that `make check` wouldn't work.
[01:03:14] *** Quits: markwash (mwashenber@moz-60E5DD0C.staticcust.wsteleport.net) (Quit: markwash)
[01:03:30] *** Quits: synackse (synackse__@7DAC4ACE.77F880E0.D9401097.IP) (Quit: Leaving)
[01:03:37] *** Joins: headcrash (Mibbit@moz-B9E1A2E9.sub-174-227-195.myvzw.com)
[01:05:24] *** Joins: z0w0 (zack@moz-6264033D.qcl9.cha.bigpond.net.au)
[01:06:28] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[01:08:52] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[01:09:13] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[01:09:41] *** Quits: jvns (bork@87D98E32.4046EB22.428F94DD.IP) (Ping timeout)
[01:10:33] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[01:11:27] *** Quits: jstevans (Instantbir@293731FB.A9DA0237.DDE5D3F6.IP) (Ping timeout)
[01:13:10] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[01:15:05] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[01:15:55] *** Quits: lfox (lfox@moz-89EEE1BF.nyc.res.rr.com) (Quit: ZZZzzz…)
[01:16:38] *** Joins: riddochc (chris@moz-964FD60B.org)
[01:16:46] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[01:17:09] <Eridius> damn, I can't name a method either type or typeof >_<
[01:17:25] <sfackler> I use type_
[01:17:28] <Eridius> heh
[01:17:31] <sfackler> or ty
[01:17:39] <Eridius> guess I'll use type_. Rather unfortunate
[01:17:46] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Quit: Leaving.)
[01:17:47] <dbaupp> tipe
[01:17:57] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[01:18:05] <sfackler> will tipe be the clazz/klass of Rust? :P
[01:18:08] <SiegeLord> typeh
[01:18:08] <froydnj> |kind| is also a reasonable substitute, depending
[01:18:17] <Eridius> I'd use `typ` for a variable that holds a type
[01:18:25] *** Joins: jstevans (Instantbir@moz-9A2374FB.bootp.virginia.edu)
[01:18:26] <Eridius> but in this case the function really wants to be called type()
[01:18:32] <Eridius> because it wraps lua_type()
[01:18:40] <Eridius> so type_() will have to suffice
[01:18:40] *** Quits: justinstoller (justinstol@EE389F81.B7963FC6.3E8C195A.IP) (Client exited)
[01:19:13] <docbrown> What about value_type()?
[01:19:28] <Eridius> docbrown: I'm trying to name my wrapper methods after the lua functions
[01:19:55] <ssbr_> I use ty. I swear I've seen this in the rust codebase somewhere.
[01:20:12] <sbalmos> ssbr_: TyDesc and such
[01:20:42] <sbalmos> Honestly never heard of "ty" as a type usage. klass, klazz, type, etc. Never just "ty"
[01:21:04] <isaacd> I've seen ty and typ in Haskell (where type is also a keyword)
[01:21:35] <isaacd> typ or type_ seem fine to me
[01:21:44] <ssbr_> I'm surprised more python folk don't use Class. (It fits with the camelcase paradigm for class names...)
[01:22:03] <isaacd> 'kind' is only reasonable for non-type-theory uses of the word "type" :)
[01:22:26] <sbalmos> And it's going to take me a long while to get used to word_separation coding again. Too many years in the camelCaseVariant world
[01:22:28] <ssbr_> "category", perhaps. "group"? ;)
[01:22:34] *** flaper87 is now known as flaper87|afk
[01:23:53] <kmc> ssbr_: but "ordinary variables" are generally lowercase even when the values they're bound to are classes
[01:23:57] <kmc> i have seen it both ways though
[01:24:34] <kmc> in Rust and C++, type variables are generally lexically the same as concrete types (except shorter)
[01:25:01] <o11c> yay, snake_case!
[01:25:28] <kmc> snake eats camel
[01:25:41] <sbalmos> Camel stomps on snake. :P
[01:25:48] <sbalmos> (when snake freaks out camel)
[01:26:01] <ChrisMorgan> PEP 8: "single_trailing_underscore_: used by convention to avoid conflicts with Python keyword, e.g. Tkinter.Toplevel(master, class_='ClassName')"
[01:26:24] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Quit: 랜덤은 쇠퇴했습니다.)
[01:26:49] <docbrown> As someone coming from more "traditional" OO languages, I seem to be having a tough time with Rust's type system. For example, I'd like to have a MemoryRegion with Host, Alias, and Mmio variants, but the variants need to share the fields of MemoryRegion. Is there any way to do that in Rust without duplicating the fields and using match expressions everywhere?
[01:27:19] <kmc> no :/
[01:27:28] <kmc> that is, all of the other ways have similar drawbacks
[01:27:34] <o11c> docbrown: put it in a structure and have a get implementation
[01:27:46] <Eridius> docbrown: make a separate struct containing the shared fields, and put that separate struct as one field in each variant
[01:28:07] <kmc> or you can make MemoryRegion a trait and have separate types for Host, Alias, and Mmio
[01:28:20] <sfackler> or have a struct with the shared stuff and a field that's the variant with the other stuff
[01:28:20] <kmc> and the accessors of shared fields become trait functions
[01:28:32] *** Quits: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP) (Input/output error)
[01:29:56] *** Quits: dxza (reisen@moz-BAE4CA9C.cable.virginm.net) (Ping timeout)
[01:30:28] <bstrie> sfackler: nah, we have unicode identifiers, we can say "tÿpe"
[01:30:32] <docbrown> Thanks for the suggestions!
[01:30:40] <sbalmos> bstrie: Oh now there we go
[01:30:49] <riddochc> Eridius: Since it wraps a lua type, maybe call it ltype?
[01:30:52] <Eridius> bstrie: ..for now
[01:31:02] <sbalmos> the "t" should be the top character (opposite of bottom)
[01:31:05] <Eridius> riddochc: it doesn't wrap a lua type. It's a method that wraps the lua_type() function
[01:31:16] <riddochc> Ah. 
[01:31:34] <bstrie> Eridius: we ain't gettin rid of unicode identifiers
[01:31:41] <Eridius> bstrie: I thought the plan was to feature gate them for now
[01:31:48] <Eridius> until someone can put in the work to normalize identifiers
[01:32:11] <kmc> all identifiers in every programming language are unicode!
[01:32:12] <kmc> even APL!
[01:32:15] <bstrie> Eridius: feature gating doesn't mean removing, it just means making it explicit that if you use that feature post-1.0 then you're risking potential backwards-incompatibility
[01:32:26] <kmc> they're just differently-restricted subsets of Unicode
[01:32:27] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Connection reset by peer)
[01:32:47] <bstrie> kmc: you're naive! go program RPG!!
[01:32:48] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[01:32:53] <bstrie> EBCDIC!!!
[01:33:02] <sbalmos> column-based coding FTW
[01:33:08] <bstrie> YES WE STILL USE EBCDIC
[01:33:11] *** Joins: dxza (reisen@moz-BAE4CA9C.cable.virginm.net)
[01:33:25] <kmc> EBCDIC is just an unusual byte encoding for Unicode
[01:33:32] <sbalmos> bstrie: WRKRCNELIB
[01:33:33] <kmc> in fact http://en.wikipedia.org/wiki/UTF-EBCDIC is a thing
[01:33:54] <mark_edward> so i have a confusing problem.
[01:33:54] <kmc> and yeah, a friend of mine works in credit card processing and he implemented an EBCDIC-based protocol like last year
[01:33:56] <isaacd> There must be an obscure programming language that deliberately uses characters that aren't in Unicode
[01:34:16] <kmc> isaacd: well, there are languages with non-textual syntax, like Piet
[01:34:45] *** Quits: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[01:34:45] <sfackler> there was that language that actually used the forall, exists, etc symbols iirc
[01:34:48] <sfackler> and had its own keyboard
[01:34:55] <o11c> those are still in unicode though
[01:34:57] <kmc> there are plenty of those but those symbols are in Unicode
[01:35:11] <Eridius> sfackler: IIRC Haskell allows for use of the proper mathematical symbols in lieu of the ASCII syntax
[01:35:12] <kmc> even GHC Haskell lets you use ∀, and it's standard in Agda
[01:35:12] <bstrie> kmc: are you *sure* that all the crazy control characters from ebcdic are in unicode
[01:35:23] <kmc> bstrie: I'm not positive but I would be surprised if they aren't
[01:35:26] <Eridius> e.g. λ for lambdas
[01:35:29] <isaacd> kmc: well, Piet doesn't have identifiers, so technically all its identifiers are Unicode :-P
[01:35:45] <kmc> isaacd: touché
[01:35:48] <mark_edward> i have a list of paths, and i want to eliminate their common roots, so turn ["/lol/bot.txt", "/lol/bit.txt", "lol/lel/but.txt"] into ["bot.txt", "bit.txt", "lel/but.txt"]
[01:35:54] <kmc> Eridius: no you can't use λ for lambdas because it's a valid identifier!
[01:36:04] <kmc> (there's a separate "math lambda" which you can use, I think)
[01:36:12] <kmc> uh unless the symbol you sent was math lambda, in which case never mind me :)
[01:36:22] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[01:36:24] <Eridius> kmc: hrm, I used GREEK SMALL LETTER LAMBDA
[01:36:41] <mark_edward> can anyone help me?
[01:36:42] <bstrie> do greek small letter lambda and mathematical lambda normalize to the same thing
[01:36:43] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Input/output error)
[01:36:43] <Eridius> kmc: I don't see a separate lambda in unicode
[01:36:50] <kmc> there are also editors which will display the token \ as λ, but still save it as U+005C 'REVERSE SOLIDUS'
[01:37:02] <bstrie> mark_edward: we have a Path type, not sure if that has any methods defined that might help
[01:37:05] * kmc -> afk
[01:37:06] <Eridius> oh I typed lambda
[01:37:11] <nathan7> > var λ = 1; λ
[01:37:11] <nathan7> 1
[01:37:13] <Eridius> which apparently matches the greek, but not the mathematical
[01:37:13] <nathan7> :D
[01:37:30] <Eridius> the mathematical oens are bold/italic though
[01:37:35] <benh> iirc all lambdas in unicode are identifiers :(
[01:37:37] <Eridius> which makes me think the greek one is the only "basic" lambda in unicode
[01:38:52] *** nrc is now known as nrc|afk
[01:39:23] <ChrisMorgan> kmc: use → instead of ->!
[01:45:06] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Quit: Sharp)
[01:45:31] *** Joins: jvns (bork@87D98E32.4046EB22.428F94DD.IP)
[01:45:58] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Client exited)
[01:46:19] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[01:47:36] <dbaupp> mark_edward: http://stackoverflow.com/questions/8578349/longest-common-prefix-for-n-string
[01:47:42] <cmr> kmc: wat
[01:47:47] <cmr> kmc: who thought that was a good idea
[01:48:00] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[01:48:03] <Eridius> cmr: what?
[01:48:09] <isaacd> mathematicians?
[01:48:10] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[01:48:13] *** Quits: Caspy7 (chatzilla@A077DB81.8D4B4332.33F321FD.IP) (Client exited)
[01:48:19] <Eridius> cmr: the lambda thing? Vim will do that. I like it
[01:48:27] <cmr> No, UTF-EBCDIC
[01:48:30] <Eridius> just like how the rust syntax will replace -> and => with arrow glyphs (if you turn on conceal, which I did)
[01:48:30] <cmr> That's awful
[01:48:32] <Eridius> ooh
[01:48:36] <isaacd> oh
[01:48:48] *** Joins: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com)
[01:48:52] <cmr> conceal is a personal preference, UTF-EBCDIC is an affront to human dignity :P
[01:49:35] <mark_edward> dbaupp, i thougth libextra had  atrie implementation...
[01:50:13] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[01:50:22] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[01:50:23] <isaacd> trie seems to be in libstd
[01:50:45] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[01:50:50] <ssbr_> if I have 8 big endian bytes, how do I get a u64 from them?
[01:51:00] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Ping timeout)
[01:51:00] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[01:51:00] <ssbr_> ehhhhhhh, that's phrase shockingly poorly.
[01:51:15] <cmr> the d makes or breaks that sentence.
[01:51:16] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[01:51:16] <ssbr_> I have a 64 bit int encoded in 8 bytes big endian. Is that the right way to say it?
[01:51:46] <wycats_> Good news folks. I have completed the initial work on the rust ruby library
[01:51:52] <wycats_> It is ready to go to production 
[01:51:57] <cmr> ssbr_: I thought it was FromBytes but that appears to have gone the way of the dodo
[01:51:58] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[01:52:05] <cmr> > initial work
[01:52:08] <cmr> > rust
[01:52:09] <cmr> > production
[01:52:12] <cmr> all of you people
[01:52:14] <cmr> crazy
[01:52:16] <mark_edward> wait can closures no longer refer to outer vairables?
[01:52:20] <ssbr_> wycats_: excellent, I'll deploy it friday evening
[01:52:24] <cmr> mark_edward: sure they can
[01:52:25] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[01:52:32] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[01:52:48] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[01:52:54] <wycats_> cmr: hehe
[01:52:59] <wycats_> It'll be ok
[01:53:20] <dbaupp> mark_edward: I don't think you'll be able to use `std::trie` unfortunately :(
[01:54:06] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[01:54:13] <dwrensha> ssbr_: you can use std::io::Reader::read_be_u64()
[01:54:14] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: Textual IRC Client: www.textualapp.com)
[01:54:38] <mark_edward> cmr, than can you explain this?
[01:54:52] <mark_edward> cmr, https://gist.github.com/MarkJr94/7798938
[01:55:21] <dbaupp> mark_edward: you need a comma after false
[01:55:22] <cmr> mark_edward: you forgot a comma after false
[01:55:30] <mark_edward> dammit
[01:55:37] <cmr> PEBKAC :P
[01:55:43] <dwrensha> ssbr_: or std::io::Reader::read_be_i64() if it's signed
[01:55:46] <dbaupp> it's being parsed as `false <or> comp <or> <block expr>`
[01:55:58] <ssbr_> dwrensha: Ah, excellent!
[01:56:06] *** Quits: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP) (Connection reset by peer)
[01:56:08] <ssbr_> Good thing I'm reading in a file, I suppose! :)
[01:56:09] *** Joins: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP)
[01:56:18] <mark_edward> dbaupp, My algorithm works! what is it O(n^2) lol
[01:56:50] <mark_edward> dbaupp, maybe O(n!)??
[01:56:50] <dwrensha> ssbr_: there are also bswap functions in std::unstable::intrinsics
[01:56:56] <mark_edward> i was never good at that
[01:56:58] *** Quits: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net) (Quit: maxiepoo_)
[01:57:42] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[01:57:50] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[01:57:54] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[01:58:03] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Quit: Leaving...)
[01:58:38] <dbaupp> mark_edward: um, approximately O(length of paths * average length of each path^2), I guess
[01:58:40] <sfackler> n^2 and n! are very different :P
[01:59:05] <mark_edward> dbaupp, sounds terrible
[01:59:22] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[01:59:31] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[01:59:39] <mark_edward> dbaupp, my program will not be webscale: it will choke on programs with lots of .rs files!
[02:01:16] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[02:01:19] <cmr> could pull an eddyb and just cat it all into a huge file.
[02:01:31] *** Quits: lkuper (lkuper@87D98E32.4046EB22.428F94DD.IP) (Quit: lkuper)
[02:02:00] *** Quits: Diamond (dick@moz-80556682.ks.ks.cox.net) (Ping timeout)
[02:02:33] *** Quits: moostik (Icedove@moz-698B575F.w86-212.abo.wanadoo.fr) (Ping timeout)
[02:02:57] *** Joins: Diamond (dick@moz-80556682.ks.ks.cox.net)
[02:03:11] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[02:03:53] <mark_edward> hm... a std::vec::concat function would be quite useful... or is there some iterator magic that can do the same?
[02:04:05] <dbaupp> mark_edward: it's a method
[02:04:08] <dbaupp> .concat_vec()
[02:04:10] <dbaupp> iirc
[02:04:51] <dbaupp> mark_edward: also, it's only linear in the number of files, so lots of .rs files is ok
[02:05:04] <dbaupp> having very deeply nested files with a long common prefix is not.
[02:05:19] <mark_edward> ah cool
[02:07:05] *** Joins: Liothen (liothen@moz-92B99500.org)
[02:08:07] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Ping timeout)
[02:08:18] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[02:08:49] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[02:09:10] <ssbr_> What happened to std::io::mem?
[02:09:17] <dbaupp> nothing?
[02:09:27] <ssbr_> use std::io::mem; mem::BufReader::new("[][]")
[02:09:29] <ssbr_> ergh
[02:09:30] <ssbr_> rusti: use std::io::mem; mem::BufReader::new("[][]")
[02:09:32] -rusti- pastebinned 8 lines of output: http://sprunge.us/GbIP
[02:09:51] *** Joins: markwash (mwashenber@moz-E830FEBB.hsd1.ca.comcast.net)
[02:10:08] <dbaupp> rusti: is using 0.8
[02:10:09] -rusti- <anon>:9:12: 9:17 error: expected one of `; }` but found `using`
[02:10:09] -rusti- <anon>:9          is using 0.8
[02:10:09] -rusti-                      ^~~~~
[02:10:10] -rusti- application terminated with error code 101
[02:10:11] <dbaupp> oh, oops
[02:10:20] <ssbr_> oh.
[02:10:27] <cmr> heh
[02:10:58] <ssbr_> What happened to the rusti program?
[02:11:17] <cmr> unmaintained, too much breakage, no one to give it love and tuck it in at night.
[02:11:26] <dbaupp> it wasn't good enough to warrant the maintainence burden
[02:11:32] <ssbr_> does that mean the rusti bot is going away too?
[02:11:36] <o11c> ssbr_: it spent too much time segfaulting
[02:11:42] <o11c> no, rusti uses rustc
[02:12:01] <ssbr_> Oh.
[02:12:01] <cmr> rusti-the-bot always used rustc.
[02:12:08] <cmr> source: https://github.com/thestinger/rust-playpen
[02:12:11] <ssbr_> That is misleading.
[02:12:26] <dbaupp> the actual script: https://github.com/thestinger/rust-playpen/blob/master/bin/irc.sh
[02:14:12] <strcat> there's no such thing as rusti that's not an irc bot! ;p
[02:15:59] <headcrash> are they going to have an REPL with the 1.0 release?
[02:20:18] *** Quits: gandalf (zbraniecki@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: My lid went down)
[02:21:09] <dbaupp> headcrash: if someone implements a good one (i.e. like cling), maybe, but there are other priorities.
[02:21:12] <cmr> headcrash: if someone makes one.
[02:21:16] <cmr> it's not a release blocker.
[02:21:34] <ssbr_> argh, I feel bad for asking lots of dumb questions. How do I go from a str to a [u8] ?
[02:21:43] <Eridius> .as_bytes()
[02:22:07] <ssbr_> Doof.
[02:22:08] <ssbr_> Thanks.
[02:23:47] *** Joins: vmx_ (vmx@moz-BC9DF2CD.pools.arcor-ip.net)
[02:24:47] *** Quits: vmx (vmx@moz-C9BC1A9E.pools.arcor-ip.net) (Ping timeout)
[02:25:52] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Quit: Sharp)
[02:28:26] *** Joins: lkuper (lkuper@moz-72054E1A.nyc.res.rr.com)
[02:30:20] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[02:30:21] <bstrie> ssbr_: all this means is that you have to answer someone else's questions to return to neutral karma!
[02:30:31] <cmr> yep
[02:30:55] <ssbr_> bstrie: that's always my goal!
[02:31:29] <ssbr_> (and neutral? pfft. I want to drive everyone else in the world into karmic debt to me. ha-HA hahaha!)
[02:32:21] *** nrc|afk is now known as nrc
[02:33:56] *** Quits: mark_edward (mark@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Ping timeout)
[02:34:08] *** Joins: ktt3ja (Mibbit@moz-D69B60E4.hsd1.va.comcast.net)
[02:35:32] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[02:35:53] *** Quits: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP) (Client exited)
[02:37:27] *** Joins: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP)
[02:39:28] *** Quits: dbaupp (Thunderbir@A192CB9D.D5A1DCF.37681C44.IP) (Ping timeout)
[02:39:45] *** Joins: telotortium (rmi1@moz-C8F8CE6.hsd1.ca.comcast.net)
[02:42:04] *** Quits: Diamond (dick@moz-80556682.ks.ks.cox.net) (Ping timeout)
[02:42:24] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[02:42:24] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Connection reset by peer)
[02:42:33] *** Joins: Diamond (dick@moz-80556682.ks.ks.cox.net)
[02:42:37] *** Quits: thesnowdog (doug@4D17280F.9D0B7490.6F17036B.IP) (Quit: WeeChat 0.4.1)
[02:42:42] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[02:42:50] *** Joins: dbaupp (Thunderbir@A192CB9D.D5A1DCF.37681C44.IP)
[02:44:47] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[02:45:01] *** Joins: lfox (lfox@moz-B8648F0F.nycmny.fios.verizon.net)
[02:46:31] *** Quits: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com) (Ping timeout)
[02:46:40] *** Joins: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net)
[02:47:05] *** Quits: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net) (Quit: maxiepoo_)
[02:49:31] <kmc> LLVM asserts are on by default yeah?
[02:49:39] *** Joins: thesnowdog (doug@4D17280F.9D0B7490.6F17036B.IP)
[02:49:46] *** jorendorff is now known as jorendorff_away
[02:50:05] <brson> kmc: yes
[02:50:27] <kmc> cool
[02:50:29] <cmr> I don't think we can ever really turn them off..
[02:50:40] <cmr> Not until we start using a typesafe interface.
[02:50:55] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[02:51:28] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[02:51:29] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[02:53:02] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:53:10] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[02:54:50] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[02:57:02] *** Joins: mark_edward (mark@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[02:58:33] *** Quits: prooftechnique (prooftechn@moz-1C9C6B71.hsd1.vt.comcast.net) (Quit: )
[03:01:07] *** Joins: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com)
[03:02:33] *** Quits: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP) (Quit: Leaving.)
[03:03:15] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:03:40] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[03:03:40] *** ChanServ sets mode: +ao pcwalton pcwalton
[03:04:29] <bjz> ack - any idea bout this error? https://gist.github.com/bjz/2e74af5d367b6a0bfa34#file-server_proc_error
[03:04:38] <bjz> Assertion failed: ((i >= FTy->getNumParams() || FTy->getParamType(i) == Args[i]->getType()) && "Invoking a function with a bad signature!"), function init, file /Users/brendan/dev/rust/rust/src/llvm/lib/IR/Instructions.cpp, line 549.
[03:04:55] <bjz> seems to happen here: https://gist.github.com/bjz/2e74af5d367b6a0bfa34#file-server_proc-rs-L412
[03:04:55] <riddochc> pcwalton: Thanks for a nice language. :)
[03:04:59] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[03:05:07] <pcwalton> I do not deserve any of the praise
[03:05:35] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[03:05:35] *** ChanServ sets mode: +ao dherman dherman
[03:05:40] <riddochc> Well, more than none, at least.
[03:05:42] <pcwalton> but you're welcome :)
[03:05:54] <bjz> riddochc: thank graydon, brson, pcwalton, nmatsakis, and all of the folks
[03:06:12] <bjz> riddochc: big collaborative effort
[03:06:37] <pcwalton> rust has no BDFL and I think that's one of its biggest strengths
[03:06:44] <pcwalton> it has no BDFL and also no committee
[03:07:02] *** Quits: Jesse_ (jruderman@moz-5973C6FA.oc.oc.cox.net) (Quit: Jesse_)
[03:07:04] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[03:07:07] <bjz> pcwalton: any idea about the Assert failure?
[03:07:08] <kmc> bjz: that looks like https://github.com/mozilla/rust/issues/9382
[03:07:09] <pcwalton> well, the committee is 3 or 4 people who are all friends :)
[03:07:34] <riddochc> Naturally, thanks all around as appropriate.  I've been doing a lot of reading on rust, and the code, and am interested in finding some low-hanging fruit to start contributing.
[03:07:35] <SiegeLord> That scala talk was interesting... hopefully some problems highlighted by it will be avoided in Rust
[03:07:44] <pcwalton> SiegeLord: link?
[03:07:48] <pcwalton> oh my, everyone is hitting #9382 lately
[03:07:52] <kmc> bjz: which seems to be at least partially fixed as of master
[03:08:02] <pcwalton> SiegeLord: oh, I just saw the link on the ML
[03:08:03] <SiegeLord> It's kind of long... https://www.youtube.com/watch?v=TS1lpKBMkgg
[03:08:06] <SiegeLord> Yeah, that one
[03:08:15] <bjz> kmc: ooh, I need to update
[03:08:31] <pcwalton> can you watch youtube videos sped up?
[03:08:42] <kmc> maybe you can grab it with youtube-dl
[03:09:22] *** Joins: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net)
[03:09:37] <bjz> pcwalton: heh. check out my ginormous type signature: https://gist.github.com/bjz/2e74af5d367b6a0bfa34#file-server_proc-rs-L193
[03:09:52] <SiegeLord> I appreciated a call for a good language specification... I truly hope Rust will get one
[03:09:52] <pcwalton> probably wants associated types
[03:09:56] <bjz> :D
[03:10:09] <bjz> indeed. oh well, I can live for now
[03:10:20] <bjz> but its a good example
[03:10:33] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[03:10:36] *** Quits: jvns (bork@87D98E32.4046EB22.428F94DD.IP) (Ping timeout)
[03:10:39] <pcwalton> SiegeLord: I've had that in the back of my mind, we need to keep the language design spec-able
[03:10:48] <pcwalton> I think that things like traits as opposed to templates make that easier
[03:10:59] <bstrie> pcwalton: rust has a bdfl, he's just in self-imposed exile :P
[03:11:28] <pcwalton> also when we get CTFE it'll be very explicit about staging
[03:11:37] <SiegeLord> It's just one day, it'll be best to rewrite rustc... that just can't happen without a spec
[03:11:45] <pcwalton> as opposed to carving out an ad-hoc subset of the language
[03:11:45] <bjz> pcwalton: what would you think of mods with type parameters? that could be super powerful. also statics with type parameters
[03:12:04] <pcwalton> modules with type parameters leads down to the ML module system which is very hard to use
[03:12:08] <pcwalton> but there may be something simpler we can do
[03:12:17] <bjz> mmk
[03:12:54] <dwrensha> I disagree about the ML module system being difficult to use
[03:13:06] <bjz> pcwalton: https://github.com/mozilla/rust/issues/10798
[03:13:30] *** Quits: zz_kimundi (kimundi@moz-D617C5E3.dip0.t-ipconnect.de) (Ping timeout)
[03:14:16] <bjz> dwrensha: why do you disagree?
[03:14:52] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:15:20] *** Quits: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP) (Client exited)
[03:15:24] * pcwalton shrugs. obviously it's impossible to quantify "hard" versus "easy"
[03:15:50] *** Parts: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) ()
[03:15:52] <bjz> pcwalton: another thing - have you considered having a `template<> item` syntax, with the current syntax as sugar?
[03:16:12] <bjz> pcwalton: it would help with laying out more complex stuff
[03:16:50] <headcrash> is cloning a repository the same thing as a pull request?
[03:16:55] *** Joins: zz_kimundi (kimundi@moz-DE2CDAC7.dip0.t-ipconnect.de)
[03:17:05] <pcwalton> I dunno. I always felt the template<> syntax was a workaround because C++ had to do it, but if folks are really clamoring for it...
[03:17:14] <pcwalton> I can show how I lay stuff out
[03:17:15] <bjz> pcwalton: doesn't have to be `template`, but at the moment embedding the parameter lists in the declarations can lead to issues in more complex examples
[03:17:21] *** zz_kimundi is now known as kimundi
[03:18:06] *** Quits: markwash (mwashenber@moz-E830FEBB.hsd1.ca.comcast.net) (Quit: markwash)
[03:18:22] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Client exited)
[03:18:42] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[03:18:51] <SiegeLord> Isn't that why that 'where' keyword was made?
[03:18:56] <SiegeLord> *reserved
[03:18:56] <pcwalton> bjz: https://gist.github.com/pcwalton/7799613
[03:19:07] <bjz> pcwalton: it also leads to inconsistencies with the way you lay out the type parameters for `trait Foo<...>`, `impl<...> Foo`, `fn foo<...>() -> ()`
[03:19:08] <SiegeLord> Oh, it's not reserved... nvm
[03:20:12] <bjz> pcwalton: the current syntax is fine for general use, but as a de-sugaring, `template<...> trait Foo`, `template<...> impl Foo`, `template<...> fn foo() -> ()` might be nice
[03:20:24] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[03:20:26] <pcwalton> I would really rather not have the keyword "template" though
[03:20:32] <pcwalton> they aren't templates
[03:20:34] <bjz> pcwalton: yeah, me too
[03:20:38] <pcwalton> if it were some other keyword then perhaps
[03:20:38] <Yurume> in<...> trait Foo
[03:20:57] <bjz> pcwalton: or sig<...> trait Foo
[03:21:15] <pcwalton> type A = …, B = …, C = … in ...
[03:21:31] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[03:21:31] <bjz> pcwalton: I mean, no pressure, just something that comes up for me sometimes
[03:21:32] * pcwalton shrugs
[03:21:38] <pcwalton> yeah, you're not the only one
[03:21:42] <Sharp> I like that one except that it seems unnecessarily verbose… does it need two keywords?
[03:21:54] <pcwalton> because we already have "type Foo = ...;"
[03:21:59] <Sharp> Ah yeah, right
[03:23:08] <Sharp> Maybe something like tycon?  Might be an abuse of notation though.
[03:24:47] <riddochc>  \bye *poof*
[03:24:51] <riddochc> Eep, sorry.
[03:24:54] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[03:24:56] *** Quits: riddochc (chris@moz-964FD60B.org) (Quit: *poof*)
[03:25:08] <strcat> bjz: I don't think having template<...> helps at all
[03:25:10] <SiegeLord> I kind of feel like with that many type parameters it's going to get ugly no matter what...
[03:25:12] <strcat> you end up with the same issues
[03:25:39] <pcwalton> template<…> is in C++ because they have the lexer hack
[03:25:41] <strcat> impl<...> and template<...> are going to get wrapped the same way
[03:25:57] <bjz> pcwalton: yeah
[03:26:27] <brson> what fast android hardware should I get for automated testing?
[03:26:40] <bjz> pcwalton: I guess it was more it would be nice if there was a standardised location for declaring type params across all items
[03:27:26] <cmr> brson: according to the guy sitting next to me, something with a qualcomm snapdragon 805
[03:27:41] <cmr> Although I phrased it as "fastest" :)
[03:27:42] <ChrisMorgan> brson: wait a few months and you'll be able to get faster! (Rinse and repeat.)
[03:27:59] <cmr>  ... which isn't released
[03:28:02] <ChrisMorgan> I suppose you want 4GB of RAM.
[03:28:08] <bjz> pcwalton: the current way seems a tad arbitrary. it would be nice to think about how these things desugar.
[03:28:15] <cmr> Although a dev board would probably be nice.
[03:28:16] <ChrisMorgan> Or at least 3GB.
[03:28:32] <cmr> Uhhhh
[03:28:35] *** Joins: fournm (Aria@moz-ABB60BA0.austin.res.rr.com)
[03:28:35] <cmr> Hm
[03:28:41] <cmr> RAM might be a problem.
[03:28:49] <cmr> Or, address space.
[03:29:25] <ChrisMorgan> Where and how?
[03:29:51] <bjz> strcat: see my comments to pcwalton 
[03:29:53] <cmr> well, no, we already support 32bit
[03:30:17] <strcat> bjz: I really don't want more than one syntax
[03:30:24] <strcat> if there's something wrong with it, change it as a whole
[03:31:17] <ChrisMorgan> pcwalton: what do you think, should do be removed? And if not, do you agree with me that using closure syntax when it's a proc is a bad idea?
[03:31:24] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Client exited)
[03:31:25] <pcwalton> I'm fine with killing "do"
[03:31:28] <cmr> so am I
[03:31:37] <pcwalton> I used proc() in my Stanford talk it was easy to explain
[03:31:42] <pcwalton> and nobody cared about the proc() there
[03:31:44] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[03:31:45] <pcwalton> looked fine to everyone
[03:31:49] * ChrisMorgan too
[03:32:55] <ChrisMorgan> I'll create an RFC issue for it.
[03:33:04] <Yurume> so do spawn { ... } becomes spawn(proc() { ... }) then?
[03:33:07] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Input/output error)
[03:33:10] <bjz> strcat: I dunno, I think sugar has its place. the syntactic sugar in SML is very nice, and it leads to a core language that is quite compact
[03:33:27] <bjz> strcat: whilst also allowing it to be very expressive
[03:33:30] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[03:33:36] <strcat> bjz: if both do exactly the same thing, it's not sugar
[03:33:37] <pcwalton> Yurume: yes
[03:33:38] <sp3d> sugar is nice but I never felt do was lifting very much of a syntactic load off
[03:33:59] *** Joins: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP)
[03:34:36] <sp3d> whereas e.g. haskell's "$" is really nice in allowing to avoid keeping so many delimiters in your head or text buffer
[03:34:39] <ChrisMorgan> bjz: given its heritage, I'm concerned at present that it may be causing more trouble than its worth, with the change from closures to procedures. (And no &once fn, which I still want...)
[03:34:45] <strcat> bjz: or do you mean `do`?
[03:35:06] <cmr> brson: maybe https://developer.qualcomm.com/mobile-development/development-devices-boards/development-boards/dragonboard ?
[03:35:10] <cmr> yikles, $500
[03:35:16] <cmr> amusing typo
[03:35:25] <bjz> strcat: no, more talking about how we can desugar stuff across the language as a whole
[03:35:31] <Yurume> does not look bad, but `spawn(proc { ... })` might be better (given that the main reason to keep do was to make spawn look great, shorter spawn will be still beneficial)
[03:35:39] <bjz> strcat: not `do` at all
[03:35:42] <Yurume> s/great/good/
[03:35:55] <strcat> bjz: why not just use macros then?
[03:35:59] <bjz> strcat: so that we can have a smaller kernal language
[03:37:21] <bjz> strcat: isn't `for _ in _ {}` sugar for `let it = _; loop { match it.next() { Some(x) => { ... } None => break } }`
[03:37:28] <strcat> it won't be
[03:37:30] <strcat> that's a bug
[03:37:37] <strcat> it needs to be built into librustc to work properly
[03:37:40] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Quit: Leaving.)
[03:37:47] <strcat> it has to distinguish between an lvalue and a temporary
[03:37:58] <strcat> so it doesn't have to freeze the lvalue
[03:38:03] <strcat> makes it needlessly inflexible
[03:38:19] <bjz> strcat: `while x { ... }` is `loop { if !x { break } ... }`
[03:38:22] <bjz> ahh
[03:38:24] <bjz> dang
[03:38:29] <strcat> and I don't think we should have `loop` ;p
[03:38:36] <strcat> it could just be
[03:38:38] <strcat> loop! { }
[03:38:40] <strcat> if you really want it
[03:38:49] <bjz> but labels?
[03:38:52] <cmr> I actually find myself liking loop
[03:39:03] <cmr> bjz: while supports labels now iirc
[03:39:08] <cmr> I though dbaupp fixed those.
[03:39:09] <bjz> loop is a fantastic building block
[03:39:14] <bjz> cmr: I know
[03:39:25] <strcat> bjz: it's the same as `while true`
[03:39:31] * ChrisMorgan likes `loop` too
[03:39:32] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[03:39:33] <strcat> and reserves a common keyword
[03:39:37] <strcat> rust takes a lot of those
[03:39:42] <cmr> yeah that's true.
[03:39:50] <bjz> that is true
[03:39:53] <strcat> if it was loop! {} it wouldn't reserve a keyword
[03:40:32] <cmr> +1
[03:40:38] <Yurume> or just while {}?
[03:40:48] <bjz> Yurume: ambiguities
[03:40:53] <Yurume> aargh, right.
[03:40:54] <ChrisMorgan> OK, submitted https://github.com/mozilla/rust/issues/10815, RFC: remove `do`.
[03:40:56] *** Joins: Jesin (Jesin@moz-63C897DA.res.lehigh.edu)
[03:41:32] <bjz> Yurume: while _ {} takes an expression. {...} is an expression. what is while {...} {...} ?
[03:41:45] <Yurume> yeah I realized that shortly after typing
[03:42:05] <bjz> strcat: loop! would be a poor-man's construct without lables. if it was going I'd rather not have the macro
[03:42:20] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[03:42:27] <strcat> bjz: why wouldn't labels work?
[03:42:33] <Yurume> is there any difference between loop and while true right now?
[03:42:34] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[03:42:39] <bjz> your right!
[03:42:41] <bjz> :O
[03:42:41] <strcat> labels work on `while` and `for`
[03:42:59] <Yurume> I think there were some issues only present in while true, but not sure
[03:43:04] <strcat> https://github.com/mozilla/rust/issues/10816 another
[03:43:37] <bjz> strcat: so you're saying `'a loop! {}` => `'a while true {}`?
[03:43:56] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Ping timeout)
[03:44:20] <strcat> bjz: yeah
[03:44:39] <bjz> strcat: ok, I'm on board with removing loop then :D
[03:44:48] <SiegeLord> Contextual keywords make syntax highlighting hard :/
[03:45:09] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[03:45:39] <strcat> SiegeLord: there's no point of highlighting `in`
[03:45:39] <bjz> strcat: you have me convinced
[03:45:42] <strcat> it's always in one place
[03:45:49] <SiegeLord> So's for
[03:45:50] <strcat> for pattern <- iterator { ... }
[03:45:52] <strcat> could easily be the syntax
[03:46:10] <SiegeLord> So's let
[03:46:12] <SiegeLord> And use
[03:46:22] <bjz> strcat: something like that would be good.
[03:46:40] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[03:46:42] <bjz> strcat: `<-` is like 'return'
[03:46:50] <strcat> there's not really any difference between saying `in` is a contextual keyword and using `<-` other than `in` being a bit easier to type
[03:47:18] <strcat> if we used <- we wouldn't say 2<-5 is invalid - there's no parser ambiguity
[03:47:27] <strcat> but we do say you can't call a variable `in` and I don't get it.
[03:47:39] <SiegeLord> Why would you want to?
[03:47:51] <strcat> because `in` is a common word
[03:47:54] <strcat> in, out
[03:48:02] *** Joins: tav (tav@moz-4D8B7B3E.range86-185.btcentralplus.com)
[03:48:12] <bjz> yeah, I've really wanted in before
[03:48:21] <strcat> conditions used to use `in`
[03:48:26] <SiegeLord> Keywords have to be common words, since they describe common things
[03:48:27] <ChrisMorgan> Compare with Python; `in` is a keyword, used for `for x in y:` and also as an operator, `x in y`, mapping to `x.__contains__(y)`.
[03:48:51] <bjz> SiegeLord: yeah, it's painful
[03:49:02] <SiegeLord> It's keywords... I'd rather have them than not
[03:49:02] <headcrash> I like the python "for x in y:"
[03:49:09] * bjz always finds himself wanting `type`
[03:49:13] <Sharp> That's why fn is so nice :)
[03:49:34] <strcat> SiegeLord: so why is `in` different than `=>` for a match pattern?
[03:49:40] <strcat> we don't reserve `=>` for that
[03:49:42] <ChrisMorgan> Syntax highlighters will hate contextual keywords.
[03:49:55] <bjz> "Rust: taking the 'u' out of 'fun'"
[03:49:58] <SiegeLord> It's not a word
[03:50:00] <strcat> ok so lets change the `for` syntax
[03:50:07] <SiegeLord> You can highlight => as = and >
[03:50:13] <strcat> if we have an arbitrary decision to not use contextual keywords, `for x in iter` is not good
[03:50:29] <ChrisMorgan> strcat: we do make it that `=>` is one token, though.
[03:50:42] <bjz> strcat: would it make more sense to have for x <= it {}?
[03:50:43] <ChrisMorgan> And a special token at that.
[03:51:05] <strcat> bjz: sure, as long as I can call variables `in`
[03:51:09] <bjz> hahaha
[03:51:13] <strcat> rust reserves a huge list of common words ;\
[03:51:33] <SiegeLord> Relative to other languages?
[03:51:34] <cmr> I've wanted to call a variable `in` before.
[03:51:36] <strcat> SiegeLord: yes
[03:51:39] <cmr> Guess when? Reading files :P
[03:52:04] <cmr> but, I don't really bump up against it often, not enough to bother me.
[03:52:05] <SiegeLord> Yeah, not buying that
[03:52:14] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[03:52:19] <bstrie> strcat: brson likes `loop`, I think we're beyond the point of getting rid of it :P
[03:52:37] <Sharp> strcat: While I agree with you on this in principle, I think in practice people are mostly used to in being a reserved keyword, or at least a lot of other languages get away with it being reserved.
[03:53:02] <strcat> which language reserves `in` where it's purely used as a contextual hint for humans?
[03:53:09] <strcat> for pattern iterator {} wouldn't be ambiguous
[03:53:14] <strcat> it's not there for the compiler
[03:53:17] <Eridius> we should just go ahead and make `in` a contextual keyword
[03:53:46] <SiegeLord> D uses in as a keyword
[03:53:57] <SiegeLord> Not contextually
[03:53:57] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[03:54:05] * ChrisMorgan wonders if C# completely reserves `out` as a keyword or not
[03:54:12] <Sharp> I'm not saying that it's necessary in the case of Rust--I don't think it is--only that it's probably not a crippling problem to have it reserved.
[03:54:28] <SiegeLord> I personally think it deserves a fork
[03:54:36] <ssbr> Obviously the answer is to use `for x of container` as the iteration syntax.
[03:54:47] * bjz likes Sporks, personally
[03:54:47] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:55:28] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[03:55:29] * ChrisMorgan contemplates high-fiving ssbr but can't quite bring himself to do it
[03:55:39] *** Quits: vmx_ (vmx@moz-BC9DF2CD.pools.arcor-ip.net) (Quit: Leaving)
[03:55:45] <ChrisMorgan> s/do it/doing so/
[03:55:59] <bjz> ssbr: `of` isn't a really useful var name
[03:56:02] *** Quits: docbrown (docbrown@5CE9D448.F0B9EFB2.7F8758CE.IP) (Connection reset by peer)
[03:56:08] <cmr> of: out file
[03:56:13] * cmr uses it all the time in java
[03:56:15] <ssbr> I've seen of used as above.
[03:56:19] <bjz> haha
[03:56:21] <doomlord_> df dest file
[03:56:29] * bjz stands corrected
[03:56:31] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[03:56:32] *** Joins: loren (loren@1F18520C.8C2A521C.405878F2.IP)
[03:56:34] *** Joins: docbrown (docbrown@5CE9D448.F0B9EFB2.7F8758CE.IP)
[03:56:40] <doomlord_> fo file output
[03:56:40] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[03:56:57] *** Joins: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP)
[03:57:01] <ChrisMorgan> And just think of the pain that people writing sports simulations will have because they can't name a variable `ref`.
[03:57:04] <doomlord_> ofl output file
[03:57:07] <cmr> heh
[03:57:16] <doomlord_> ofi
[03:57:30] <doomlord_> go ahead and reserve 'of' as a keyword :)
[03:57:35] <bjz> oof!
[03:57:39] <Sharp> ofs output file stream :P
[03:57:41] <ssbr> gadbin: gibberish acronyms don't belong in names
[03:57:52] <strcat> ChrisMorgan: not being able to use `ref` is actually a pain
[03:57:58] <loren> is there a way to get the "count" of a multiple macro argument?
[03:58:03] <doomlord_> rf reference
[03:58:06] <strcat> instead we have as_mut_ref and as_ref for methods used as composable DSLs
[03:58:20] <SiegeLord> For all these keyword conflicts, I'd just add a suffix/prefix
[03:58:22] * bjz thinks that we need to reserve `foo` as a keyword
[03:58:29] <SiegeLord> in_file,out_file etc
[03:58:31] <strcat> o.ref().map(|x| x * 2)
[03:58:34] <doomlord_> oh no that would be disasterous
[03:58:36] <strcat> o.as_ref().map(|x| x * 2)
[03:58:37] *** Quits: hoopsnake (zac@moz-12CDD1F8.hsd1.wa.comcast.net) (Ping timeout)
[03:58:41] <strcat> maybe it doesn't bother you
[03:58:54] <bjz> strcat: ++
[03:59:11] <ssbr> strcat: "as_ref" is very clear as to what it does, "ref" less so.
[03:59:28] <strcat> ssbr: it's not really clear, it doesn't return a reference
[03:59:38] <ssbr> strcat: well then the whole set of names was wrong.
[03:59:42] <strcat> it turns Option<T> into Option<&T>
[03:59:52] <ssbr> it should be as_opt_ref then
[03:59:59] <strcat> redundant
[04:00:03] <strcat> it's a method on options
[04:00:17] <bjz> kmc pcwalton : is there a workaround for https://github.com/mozilla/rust/issues/9382 ?
[04:00:21] <ssbr> strcat: that doesn't guarantee the return value is an option
[04:00:23] <strcat> and it's commonly used with chained methods
[04:00:25] <SiegeLord> 'opt' refers to the return type, not the lhs
[04:00:28] <ssbr> anyway. verb method names are great.
[04:00:37] <bjz> kmc: still doesn't work for me
[04:01:12] <strcat> ssbr: short names for extremely common methods used in method chaining are greater
[04:01:16] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[04:01:18] *** Quits: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP) (Ping timeout)
[04:01:27] <Sharp> s/verb/prepositional phrase/ in this case...
[04:02:15] <ssbr> strcat: not if it also breaks consistency
[04:02:24] <ssbr> isn't as_<foo> the normal schema?
[04:02:35] <strcat> ssbr: it doesn't return a reference
[04:02:36] <strcat> so no
[04:02:48] <strcat> iterators dropped the iter suffix
[04:02:56] *** Quits: GeneralMaximus (ankur@B4DF73F6.7D84F5AD.260B031E.IP) (Ping timeout)
[04:03:02] <strcat> refs, names, keys, values are what you would call iterator methods now
[04:03:05] <loren> Anyone know if I can get "count" for a repeated macro argument in the macro expansion?
[04:03:12] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[04:03:12] <strcat> so ref for a single one makes a lot of sense to me
[04:03:18] *** Quits: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP) (Ping timeout)
[04:03:22] <ssbr> strcat: okay, sure, that's a consistency.
[04:03:28] <ssbr> definitely as_ref is not super.
[04:03:41] <ssbr> how about .opt_ref? ;)
[04:03:59] <ChrisMorgan> loren: not at present.
[04:04:05] <loren> ChrisMorgan: thanks
[04:04:20] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[04:04:20] *** ChanServ sets mode: +ao pcwalton pcwalton
[04:04:31] <strcat> ssbr: because if you use a name that long it makes people want methods like map_ref
[04:04:36] <strcat> map_default_ref
[04:04:38] *** Joins: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP)
[04:04:44] <strcat> map_default_mut_ref
[04:04:52] <ChrisMorgan> loren: yes, that does lead to some not-quite-as-nice-to-look-at things, like https://github.com/chris-morgan/rust-http/blob/master/src/http/headers/mod.rs#L1020-L1111
[04:05:16] <strcat> ssbr: in fact we have some of those left
[04:05:27] <strcat> as_ref().get() was viewed as too noisy compared to get_ref()
[04:05:33] <ssbr> strcat: it was a suggestion in place of the status quo
[04:05:35] <strcat> so we still have get_ref() and get_mut_ref()
[04:05:49] <ssbr> strcat: I'm of the mind that people who insist on silly things can be denied out of hand
[04:05:53] <strcat> ssbr: the status quo is that 'as_ref' is still viewed as too noisy to replace get_ref
[04:06:05] <strcat> that was the consensus
[04:06:06] <ssbr> strcat: I thought as_ref was the status quo
[04:06:16] <ssbr> strcat: why not .ref_()?
[04:06:17] <strcat> ssbr: it replaced all but get_ref and get_mut_ref
[04:06:38] <strcat> ssbr: why not ref() ? ref is only used as a contextual keyword in patterns
[04:06:49] *** Joins: GeneralMaximus (ankur@B4DF73F6.7D84F5AD.260B031E.IP)
[04:06:55] <Sharp> What woud you replace it with?
[04:07:04] <ssbr> strcat: Because keywords that are only sort of keywords have a history of being a massive PITA
[04:07:13] <ssbr> ref_() is just an extra underscore.
[04:07:20] <strcat> ssbr: and looks like a bug workaround
[04:07:35] <strcat> ssbr: so can you point out this history to me?
[04:07:46] <ssbr> strcat: python used to have a contextual as keyword, for example
[04:07:50] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[04:07:56] <ssbr> it caused lots of problems and minor bugs and they eventually made it a full on keyword.
[04:08:00] <Sharp> Oh, I see what you're saying now, never mind :)
[04:08:18] <bstrie> it's a bit late in the game to be bikeshedding about contextual keywords
[04:08:33] <bstrie> the conservative and backwards-compatible choice is to reserve them now and make them contextual later if necessary
[04:08:56] <strcat> the conservative and backwards compatible choice is to use C++11
[04:09:20] <ssbr> that's a bit extreme to save three characters
[04:10:53] <Sharp> If you're looking for a language with a minimal set of keywords I hardly think C++11 is going to be your first choice :)
[04:11:43] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[04:11:54] <strcat> it was a response to that argument
[04:14:35] <bstrie> my point is, rust is "good enough" here, and if this is a mistake then it's reversible after 1.0. let's focus our energy on areas where we're not as well off
[04:15:22] <bstrie> I for one think that `loop` is superfluous, but it's not going to sink the language
[04:15:31] <strcat> changing those Option method names isn't backwards compatible
[04:15:43] <strcat> there are already plenty of "good enough" languages
[04:17:18] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[04:22:04] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[04:22:12] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[04:22:12] *** ChanServ sets mode: +ao pcwalton pcwalton
[04:24:02] <bstrie> and one day rust will be one of those "good enough" languages, and that day will come sooner once we stop chasing our own tail
[04:25:18] <bjz> arggh #9382
[04:27:42] <SiegeLord> I can't wait for the day when people will bemoan a lack of alternative to Rust ;)
[04:28:55] <bjz> SiegeLord: that's not an unlikely scenario. ;)
[04:29:04] *** Quits: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP) (Quit: Leaving.)
[04:29:09] *** Quits: KindOne (KindOne@moz-1F6A65EB.dynamic.ip.windstream.net) (Ping timeout)
[04:29:17] <ssbr> I am pretty disappointed that there's no ML-like languages with typeclasses except Rust.
[04:29:30] <ssbr> You'd think someone would make SML, except with typeclasses, but nope. Just Rust. What a bummer.
[04:29:33] <bjz> ssbr: idris?
[04:29:56] <SiegeLord> "We just can't keep programming in 40 year old languages anymore... it's not 2010's anymore!" XD
[04:29:57] <bjz> that's more haskelly though
[04:29:57] <ssbr> bjz: oh, is idris like that? I thought it was yet another haskell thingy
[04:30:05] <bjz> yeah
[04:30:13] <bjz> ssbr: <3 idris
[04:30:25] <ssbr> I really enjoyed programming in OCaml, it's just that typeclasses are infinitely better than its object system
[04:30:45] <ssbr> rust fills that hole in my heart, but where's the not-systems-programmery hole-fillers, eh?
[04:30:47] <bjz> ssbr: idris is still very immature though - the community is not half as active as Rust
[04:32:22] <bjz> ssbr: if idris could have unboxed aggregate types and some sort of region implementation with awesome inlining / monomorphisation, then it could challenge Rust.
[04:32:52] *** Quits: loren (loren@1F18520C.8C2A521C.405878F2.IP) (Quit: leaving)
[04:32:53] <cmr> but... can it?
[04:32:54] <Luqman> bjz: 9382 is so weird :\ i'm not even sure why omitting one field would make it work
[04:33:09] <bjz> cmr: no idea.
[04:33:21] *** Joins: KindOne (KindOne@moz-3C569A14.dynamic.ip.windstream.net)
[04:33:21] <bjz> cmr: Ralith thinks its possible
[04:33:38] <cmr> /should/ it? rust makes a lot of sacrifices for its memory model.
[04:33:53] <bjz> cmr: yeah, that is an issue
[04:33:56] <bjz> cmr
[04:34:02] <cmr> me!
[04:34:27] <bjz> cmr: I wonder if a language systems lang like idris might come along in the future
[04:34:40] *** Joins: hoopsnake (zac@moz-12CDD1F8.hsd1.wa.comcast.net)
[04:35:02] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[04:35:06] <ssbr> bjz: ehhh, the thing I want is a language more on the Java end, where everything is garbage collected and such.
[04:35:12] <bjz> that is willing to make the concessions (to expressivity) required for an efficient memory model
[04:35:39] <ssbr> You can program rust that way, which is great. But you're discouraged from it and all sorts of things break for you.
[04:36:02] <ssbr> (e.g. multiple mutable borrowed pointers don't work, even though they would in any garbage collected language)
[04:36:15] <ssbr> Rust adds some complexity to that kind of programming, and I don't think it's reversible
[04:36:23] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Connection reset by peer)
[04:36:30] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[04:36:59] <cmr> It's not complexity, it's memory safety :)
[04:37:14] <ssbr> cmr: memory safety can be done with runtime checks.
[04:37:24] <ssbr> This is not a thing that is possible in rust with &mut, AFAIK.
[04:37:31] <cmr> No, that's what RefCell is for.
[04:37:46] <ssbr> sure, but that doesn't help you with all the things that take &mut pointers. Er, does it?
[04:37:48] <cmr> But why have dynamic checks when you can have static ones, and just do it right from the start? :)
[04:38:00] <cmr> your_cell.mut_borrow()
[04:38:20] <ssbr> cmr: because those are complicated and 100% of the time I've run up into this and been frustrated, Rust was telling me I was wrong statically because Rust isn't as smart as me.
[04:38:33] <cmr> your_sell.borrow_mut().get(), actually.
[04:38:37] <ssbr> of course I don't remember all the times I've run into it and rust saved me.
[04:39:09] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[04:39:13] <ssbr> cmr: OK
[04:39:13] <cmr> ssbr: every time except I think once, which was a bug that has since been fixed, the borrowchecker only rejects thigns which are actually potentially invalid.
[04:39:24] <ssbr> I don't think refcell existed back when I decided this was a problem. It might be possible to pretend rust is an ml with extra sigils with Rc and RefCell
[04:39:25] <cmr> Maybe it's still a bit coarse, but it's really good at what it does.
[04:39:27] <cmr> No, it didn't.
[04:39:35] <cmr> It does now though! :)
[04:39:38] <ssbr> cmr: "potentially invalid" != "actually invalid"
[04:39:39] <cmr> http://static.rust-lang.org/doc/master/std/cell/struct.RefCell.html
[04:39:52] <cmr> ssbr: "potentially invalid" means "someone using this could make it invalid"
[04:40:02] <ssbr> cmr: fine, but not with my types
[04:40:06] <cmr> Ok, sure.
[04:40:13] <cmr> That's what unsafe blocks are for.
[04:40:19] <ssbr> cmr: if I have an array of things and I want to mutably borrow different elements of the array, that should not be an error
[04:40:22] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[04:40:35] <ssbr> cmr: sure, but then unsafe blocks give me insane amounts of trouble if I'm not as smart as I think I am, which is often.
[04:40:46] <cmr> So you're admitting it, rustc knows better than you! :P
[04:40:50] <ssbr> cmr: har
[04:41:00] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[04:41:04] <ssbr> sometimes I know better than rustc, and sometimes I don't, and it's hard to say when is when until you're proven wrong
[04:41:10] <cmr> yep.
[04:41:25] <ssbr> and if I'm proven wrong, I want to be proven wrong with some nice memory-safe guards to tell me exactly in what way I am wrong
[04:41:25] <cmr> I agree that certain things can be hard, but it wouldn't be any easier in another language, you'd just have runtime bugs.
[04:41:35] <cmr> It's just more verbose in Rust
[04:41:43] <cmr> (to get the runtime bugs)
[04:41:56] <cmr> which is of course a deliberate decision
[04:42:29] <ssbr> cmr: I am not sure when the two mutable borrows thing would come into play in a language like Python. care to give an example?
[04:42:37] <ssbr> the example I saw was rust/c/c++ specific
[04:42:59] <cmr> Hm
[04:43:33] <cmr> Well, non-overlapping borrows into an array is a very poor example because that's legitimatly a broad approximation in the borrow checker.
[04:43:42] <cmr> I will agree with you on that one.
[04:43:44] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[04:44:07] <ssbr> cmr: sure, but actual overlapping mutable usages, when do they affect you in Python?
[04:44:22] *** Quits: headcrash (Mibbit@moz-B9E1A2E9.sub-174-227-195.myvzw.com) (Quit: http://www.mibbit.com ajax IRC Client)
[04:44:53] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[04:45:01] <cmr> I'm still trying to come up with an example. Not entirely positive there is one.
[04:45:05] <ssbr> oh, I can think of a few things in python that forbid overlapping mutable borrows without undesirable effects
[04:45:15] *** Joins: markwash (mwashenber@moz-E830FEBB.hsd1.ca.comcast.net)
[04:45:15] <cmr> Such as?
[04:45:18] * cmr is curious
[04:45:26] <ssbr> cmr: changing the size of a container while iterating over it
[04:45:37] <ssbr> with dicts, this goes as far as to introduce completely undefined behavior
[04:45:45] <cmr> Ah yes, because it doesn't freeze the container in python
[04:46:07] <cmr> I haven't used python since chilling with you and lvh in freenode/#python, which is like 2 years ago :)
[04:46:08] <ssbr> still, I think the danger zone is so much smaller that it's not a concern in pointer-less languages
[04:46:17] *** Joins: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net)
[04:46:29] *** Joins: AvianFlu (AvianFlu@moz-C1C884AB.nyc.res.rr.com)
[04:46:38] <cmr> Yes, in GC'd languages it isn't as much of a concern. They can still have runtime failure, you don't get memory unsafety because there's till checks.
[04:47:02] *** Quits: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net) (Quit: leaving)
[04:47:22] <ssbr> I enjoy this bug: http://bpaste.net/show/yBlq6ayvlHlSwFzjofE2/
[04:48:59] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[04:49:04] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[04:49:32] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[04:49:36] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: brb)
[04:50:16] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Client exited)
[04:50:27] *** Joins: jvns (bork@moz-DE62990.nyc.res.rr.com)
[04:50:37] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[04:51:16] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[04:52:17] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[04:52:58] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[04:53:50] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[04:54:43] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[04:55:02] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[04:55:28] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[04:55:31] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Client exited)
[04:55:50] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[04:56:03] *** Joins: gdifo (chatzilla@moz-8C75C95E.hsd1.md.comcast.net)
[04:56:18] *** Joins: Torwegia (ubuntu@moz-193FD65D.us-west-2.compute.amazonaws.com)
[04:56:50] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:57:27] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[04:57:47] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[04:58:36] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[04:59:07] *** Joins: Chimmy (ctimothy@moz-1DB1FE6E.hsd1.wa.comcast.net)
[04:59:56] *** Joins: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP)
[04:59:59] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[05:03:02] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[05:03:05] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: jeaye)
[05:07:29] *** Parts: gdifo (chatzilla@moz-8C75C95E.hsd1.md.comcast.net) ()
[05:08:36] <pcwalton> ssbr: reading backscroll, I agree with you but keep in mind that Rust's borrow rules also rule out data races
[05:09:22] *** Joins: jdm (jdm@moz-78156D60.dsl.teksavvy.com)
[05:09:23] *** ChanServ sets mode: +o jdm
[05:09:38] <pcwalton> the borrowed pointers are a hard sell without considering both data races + systems programming/GC avoidance
[05:09:39] <pcwalton> that said
[05:09:54] <pcwalton> Rust is not designed to be a language for all use cases and I certainly think Java's design is reasonable for its domain re memory management
[05:10:16] <pcwalton> and someone should totally create such a language :)
[05:10:20] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[05:12:58] *** Quits: AvianFlu (AvianFlu@moz-C1C884AB.nyc.res.rr.com) (Connection reset by peer)
[05:14:12] *** Joins: AvianFlu (AvianFlu@moz-C1C884AB.nyc.res.rr.com)
[05:14:12] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[05:14:15] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: jeaye)
[05:14:32] <bstrie> pcwalton: are you aiming for a release in december?
[05:15:06] <pcwalton> I think so but brson knows better than I.
[05:15:10] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[05:16:11] *** Quits: jvns (bork@moz-DE62990.nyc.res.rr.com) (Ping timeout)
[05:17:05] *** Joins: jvns (bork@moz-DE62990.nyc.res.rr.com)
[05:18:32] *** Quits: Liothen (liothen@moz-92B99500.org) (Input/output error)
[05:18:57] *** Quits: hoopsnake (zac@moz-12CDD1F8.hsd1.wa.comcast.net) (Quit: leaving)
[05:19:55] *** Joins: ezyang (ezyang@moz-2957C5C9.mit.edu)
[05:20:12] <ezyang> Hey folks, does Rust have something like Haskell's 'newtype'? 
[05:21:20] <jvns> ezyang: lkuper told me that `enum` in Rust is kind of like `data` in Haskell, but I don't know either one
[05:22:05] <o11c> ezyang: IIRC there is something about opaque typedefs in one of the tutorials
[05:22:16] <ezyang> Hm, 'opaque typedef' sounds about right 
[05:22:17] <sfackler> ezyang: I think the most similar thing would be "struct MyNewType(MyOldType);"
[05:22:37] <ezyang> This kind of sounds like it might be a bit annoying to program with ;) 
[05:22:46] <lkuper> ezyang: yes, it does
[05:22:50] <bstrie> ezyang: http://static.rust-lang.org/doc/master/tutorial.html#tuple-structs
[05:23:01] * ezyang waves 
[05:23:07] <lkuper> yeah, what bstrie said
[05:23:19] <ssbr> pcwalton: Oh yeah, I'm totally fine with that. I'm quite surprised that there are so few (AFAIK one, maybe two -- both systems programming languages) imperative languages that use typeclasses (or similar)
[05:23:54] <ssbr> Java isn't even worth considering from my POV. Rust really is quite nice. Just, well, aimed at C++ programmers.
[05:23:55] *** Joins: carter (carter@moz-F3C2A2D8.nycmny.fios.verizon.net)
[05:24:17] <ssbr> I can live with that pretty easily. I've been meaning to learn more about that kind of programming anyway :)
[05:24:42] <ssbr> pcwalton: BTW, is there a doc out there evangelizing the mutable borrow rules?
[05:24:56] <ssbr> that kind of thing is something I wish I'd seen when I first ran into them
[05:25:06] *** Quits: lfox (lfox@moz-B8648F0F.nycmny.fios.verizon.net) (Quit: ZZZzzz…)
[05:25:08] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[05:25:25] <ezyang> So, stepping back a moment, I am currently attempting to write a function in Rust which will give me large chunks of memory which are aligned on 1MB-ish boundaries 
[05:25:41] <ezyang> obviously I am going to have to do some unsafe things, but I'm trying to figure out how unsafe 
[05:25:47] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[05:26:30] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[05:27:08] <bjz> ezyang: try to keep your unsafe sections as contained as possible
[05:27:44] <bjz> ezyang: that is, get to a trusted interface as fast as you can so that you can take advantage of Rust's static checks
[05:27:56] *** Quits: AvianFlu (AvianFlu@moz-C1C884AB.nyc.res.rr.com) (Connection reset by peer)
[05:28:00] <bjz> well, that's my rule of thumb anyway
[05:28:02] <lkuper> generally good advice for any kind of programming :)
[05:28:08] <ezyang> OK :) 
[05:28:09] <bjz> :)
[05:28:43] *** Joins: AvianFlu (AvianFlu@moz-C1C884AB.nyc.res.rr.com)
[05:28:55] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[05:29:37] <bstrie> (:
[05:29:49] <lkuper> ezyang: I dunno how to get aligned memory
[05:30:01] <bstrie> folks, please endeavor to keep these smileys balanced
[05:30:07] <ezyang> Usually, you have to mmap it yourself 
[05:30:17] <bjz> ezyang: but in saying that, you can potentially create unsafe apis with a safe wrapper if you're not careful. Say if you forget to do a null check when accessing C functions. So be careful/
[05:30:26] <ezyang> fortunately, y'all recently added std::os::MemoryMap 
[05:30:39] <cmr> Recently?
[05:30:40] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[05:30:44] <cmr> That was, like, 0.7 :P
[05:30:49] <bjz> ezyang: luckily it's easy to grep for you unsafe blocks if you get any fun segfaults though :)
[05:31:02] <ezyang> ok "recently" 
[05:31:48] <strcat> ezyang: you don't have to use mmap, you can make a thin aligned alloc wrapper around malloc/free
[05:31:49] <ezyang> Hm, but this doesn't let me say what address I want. Maybe I should just do this bit in C, and then write something on top of it in Rust 
[05:32:13] <lkuper> cmr: not everyone pays attention to every release!
[05:32:19] <strcat> ezyang: you can call malloc/mmap from rust as easily as you can from C
[05:32:33] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[05:32:34] <ezyang> oh, just ffi it? 
[05:32:39] <bjz> ezyang: not sure, but does std::intrinsics::set_memory do it?
[05:32:51] *** Joins: Jesse (jruderman@moz-5973C6FA.oc.oc.cox.net)
[05:32:55] *** Quits: jvns (bork@moz-DE62990.nyc.res.rr.com) (Ping timeout)
[05:33:04] <strcat> ezyang: yes, just call posix_memalign/aligned_alloc or write the wrapper yourself
[05:33:13] <bstrie> I'm sure rust-core has an example you can look at :)
[05:33:34] <strcat> it doesn't have an aligned allocator wrapper atm
[05:33:39] <mark_edward> you know what'd be useful? a FromBytes trait
[05:33:47] <o11c> ezyang: all the C arguments such as address to map are in http://static.rust-lang.org/doc/master/std/os/enum.MapOption.html
[05:34:04] <sfackler> mark_edward: which format do things use?
[05:34:13] *** Quits: telotortium (rmi1@moz-C8F8CE6.hsd1.ca.comcast.net) (Ping timeout)
[05:34:15] <mark_edward> dunno. we have an iterbytes trait
[05:34:19] <ezyang> oh hey, OK, I bet I can use it 
[05:34:20] <sfackler> that's for hashing
[05:34:24] <o11c> ezyang: but of course it's hard to know what addresses you can use
[05:34:34] <sfackler> not serialization
[05:34:45] <o11c> ezyang: you're better off just allocating an extra meg and aligning yourself
[05:34:50] <mark_edward> well if something can be flattened to bytes, we can get it back, cant we?
[05:35:00] <o11c> (or use one of the standard memaligns of course)
[05:35:11] <sfackler> unless the mapping isn't injective
[05:35:20] <mark_edward> well why wouldn't it be
[05:35:34] <sfackler> or is in some way ambiguous
[05:36:01] <ezyang> I have a reference implementation which uses mmap which I know works. I'd have to experiment to see if posix_memalign will do what I need 
[05:36:21] *** Quits: ktt3ja (Mibbit@moz-D69B60E4.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:36:46] <mark_edward> serialize ultimately handles this somehow, doesn't it?
[05:36:49] <strcat> posix_memalign is just malloc with an align parameter
[05:37:28] <o11c> ezyang: everything you can pass to mmap you can pass to Rust's wrapper
[05:37:39] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[05:37:39] <sfackler> there's Encodable and Decodable if you want to serialize a type
[05:37:45] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[05:38:35] <mark_edward> sfackler, well why can't it be serialized to bytes? we have json 
[05:38:40] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[05:38:59] <mark_edward> in fact the first thing i think of when i think serialization is bytes
[05:39:05] <mark_edward> but we don't seem to have that
[05:39:07] <sfackler> what do you mean serialized to bytes
[05:39:11] <sfackler> json serializes to a stream of byte
[05:39:13] <sfackler> s
[05:39:20] <sfackler> that can be interpreted as utf text
[05:39:37] <sfackler> there are other ways of serializing to bytes
[05:39:44] <sfackler> protobuf, capnproto, etc
[05:39:56] <ezyang> aha! A relevant comment in the reference implementation: http://lpaste.net/96587 
[05:40:08] <mark_edward> well everything has an in memory representation. just that.
[05:40:34] <sfackler> what happens if you try to send it to a computer with a different endianness
[05:40:35] <sfackler> or pointer size
[05:40:40] <sfackler> or alingnment requirements
[05:40:41] <pcwalton> ssbr: there's just niko's blog mostly
[05:40:43] <ezyang> I guess for now I should just do the easy thing though 
[05:40:51] <pcwalton> that's because the rules are still being slightly tweaked to become sound
[05:40:53] <mark_edward> i dunno, don't do that
[05:41:35] *** Quits: Jesse (jruderman@moz-5973C6FA.oc.oc.cox.net) (Quit: Jesse)
[05:41:53] <sfackler> what happens if your type contains pointers
[05:41:56] <ezyang> https://github.com/mozilla-servo/rust-azure/blob/master/src/memory/mozalloc/mozalloc.cpp#L153 <-- haha, that's great! 
[05:42:08] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[05:42:44] <ezyang> Why is this file C++ though :( 
[05:42:45] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[05:44:19] *** Joins: Jesse (jruderman@moz-5973C6FA.oc.oc.cox.net)
[05:44:56] <mark_edward> yeah i guess it's more problematic than i though
[05:45:11] <mark_edward> how does Java do it? ive sent java objects over the wire before
[05:45:35] <sfackler> it serializes to a well-defined wire format
[05:45:56] <ezyang> OK, re wrapper and rust-core, is this a good example of a wrapper? https://github.com/thestinger/rust-core/blob/master/core/heap.rs 
[05:46:12] <sfackler> the format is enourmously verbose, unfortunately
[05:46:21] <mark_edward> :(
[05:46:26] <strcat> ezyang: no, that's just low-level stuff
[05:46:50] <strcat> you can write a unique pointer for aligned memory
[05:47:01] <strcat> need to know what you're using it for though
[05:47:07] <strcat> arrays? or just chunks of memory
[05:47:16] <strcat> (as in are they always the same size?)
[05:47:19] <ezyang> chunks of memory; I'm building other abstractions on top of it 
[05:47:22] <ezyang> They're not always the same sie 
[05:47:27] <ezyang> *sie 
[05:47:29] <ezyang> *size 
[05:47:57] <sfackler> but the general idea is that you have an architecture independent output format
[05:48:04] <mark_edward> rustc knows from which files modules originate, right? how can i get that information from the AST and Codemap? i can't seem to figure it out
[05:48:11] *** Quits: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP) (Ping timeout)
[05:48:19] <mark_edward> sfackler, yeah that's why we have all these cool things like protobuf
[05:48:21] <ezyang> The next thing I'm building is a block allocator, this interface lets you allocate blocks of varying sizes, with metadata associated with them using a pointer trick 
[05:48:23] <sfackler> e.g. a big-endian 32 bit value representing the length of a number in bytes, followed by that number in big endian
[05:48:58] <strcat> ezyang: make a struct with a private ptr field, add a destructor, add methods to convert to &[u8]/&mut [u8]
[05:49:46] * strcat isn't sure exactly what you need though
[05:49:52] <ezyang> OK; any example to look at? :) 
[05:49:58] * ezyang is running before crawling, clearly 
[05:50:03] <strcat> https://github.com/thestinger/rust-core/blob/master/core/vec.rs
[05:50:14] <ezyang> cool 
[05:50:14] <strcat> but that's more than you need since it's a dynamically sized vector
[05:50:22] <ezyang> I'm good at not implementing things :) 
[05:51:16] *** Quits: Jesse (jruderman@moz-5973C6FA.oc.oc.cox.net) (Quit: Jesse)
[05:51:36] <ezyang> What does the square brackets around u8 mean? 
[05:51:56] <o11c> array of
[05:52:08] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[05:52:21] <o11c> but note that [u8] on its own is meaningless
[05:52:25] <ezyang> ok, so no pointer arithmetic, I guess 
[05:52:53] <o11c> only ~[u8], &[u8], etc. and [u8, ..N]
[05:53:43] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[05:54:09] <ezyang> Another dumb question: why is there an asterisk here: priv ptr: *mut T, 
[05:54:18] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Ping timeout)
[05:54:18] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[05:54:27] <sfackler> like C, it's a raw pointer
[05:54:51] <ezyang> oh, so should my private pointer have type priv ptr: *mut u8? 
[05:54:56] *** Joins: findow (Mibbit@moz-A86A7504.infotecs.ru)
[05:55:00] <ezyang> (and not mut &[u8]?) 
[05:55:07] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[05:55:12] <strcat> &[u8] is a view of memory - it doesn't own it
[05:55:21] <ezyang> gotcha 
[05:55:31] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[05:55:49] <strcat> raw pointers don't come with ownership semantics, up to you to implement those for the type they're used in
[05:56:14] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[05:56:19] <strcat> adding a destructor makes the type move ownership
[05:56:32] <strcat> pub fn as_slice<'a>(&'a self) -> &'a [T]
[05:56:47] <strcat> returns a slice (&[T]) which is a ptr and a length acting as a view into a block of memory
[05:57:10] <strcat> and it tells the compiler that the lifetime is tied to &self
[05:57:25] <strcat> usually the compiler would verify that, but in this case it's done with unsafe code
[05:57:42] <strcat> and that's a fully safe abstraction - can't ever be dangling, etc.
[05:58:08] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:58:16] <ezyang> hang on, let me see if I can parse that signature 
[05:58:20] <ezyang> so 'a is denoting a region 
[05:58:37] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Connection reset by peer)
[05:58:43] <strcat> ezyang: <'a> is a lifetime parameter
[05:58:49] <strcat> &'a self associates it with &self
[05:58:55] <ezyang> hmm, I feel like the manual is missing things 
[05:58:57] <strcat> &'a [T] associates it with the return value
[05:59:00] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:59:03] <strcat> ezyang: the manual is not very good
[05:59:13] <strcat> it's very incomplete and has plenty of inaccurate information
[05:59:16] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[05:59:16] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:59:23] <ezyang> :o 
[05:59:33] <phil_> guys, i cant find <A> or <R: ...> in the docs
[05:59:47] <phil_> anyone got a hint as to where i might find them?
[06:00:02] <sfackler> phil_: they're generic type parameters.
[06:00:14] <phil_> similar to <T> right?
[06:00:25] <strcat> phil_: T and A are arbitrary names
[06:00:34] <strcat> just like 'let foo = ...' vs. 'let bar = ...'
[06:00:34] <phil_> hm
[06:00:54] <phil_> ok
[06:00:54] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[06:00:54] <ezyang> Where's a good explanation of what 'associating' the lifetime peramater with something? 
[06:00:59] <strcat> struct Foo<A, B, C> { ... }
[06:01:02] <geomyidae> Rust getting lots of publicity lately :D
[06:01:06] <strcat> struct Foo<foo, BaR, BAZ> { ... }
[06:01:09] <strcat> just arbitrary names
[06:01:13] <phil_> ok
[06:01:24] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[06:01:30] <strcat> ezyang: &'a self means a ptr with the lifetime 'a
[06:02:00] <strcat> you can't return a reference without a lifetime
[06:02:08] <ezyang> So, can I parse this definition as 
[06:02:20] <strcat> well how about a simpler safe example
[06:02:27] <ezyang> "Take the lifetime of the implicitly passed self object, and assign that liftime to the returned slice"? 
[06:02:36] <ezyang> So, when self dies, the slice dies 
[06:02:39] <strcat> yes
[06:02:43] <phil_> so strcat, when i see impl<R: Reader> BufferedReader<R>  is that the same as when the tutorial shows impl<T: Reader> BufferedReader<T> 
[06:02:49] *** Parts: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) ()
[06:02:56] <strcat> phil_: yes, arbitrary name
[06:02:59] <phil_> okay
[06:03:07] <strcat> it could say `<A>, or `<foo>`
[06:03:07] <phil_> i thought T was special
[06:03:11] <phil_> okay
[06:03:12] <strcat> there are two common naming conventions
[06:03:13] <phil_> thanks
[06:03:14] <strcat> A, B, C
[06:03:16] <strcat> T, U, V
[06:03:23] <strcat> sometimes it's an initial related to what it is
[06:03:44] <strcat> and there are two common lifetime naming conventions ('a, 'b, 'c or just 'r) but they don't mean anything special
[06:03:44] <phil_> ok
[06:03:54] <phil_> thanks strcat
[06:04:28] <strcat> ezyang: so..
[06:04:29] <ezyang> OK, another dumb question: how do I associate an allocator with a struct 
[06:04:38] <strcat> ezyang: hm?
[06:04:58] <strcat> what you'll want is to make a static method (likely called `new`) returning one and a Drop implementation destroying it
[06:05:10] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[06:05:11] <ezyang> is that what the 'priv alloc: A' in the vec is doing? Seems like an allocator for the elements to me 
[06:05:13] <ezyang> ok 
[06:05:28] <strcat> ezyang: that's just an incomplete sketch of container allocators
[06:05:30] <strcat> it's not special
[06:05:50] <strcat> rust-core vectors have an element type parameter and an allocator type parameter
[06:05:57] <strcat> when you create one you have the option of passing an allocator
[06:06:00] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[06:06:09] <strcat> but generic destructors don't really work yet so it can't actually be used
[06:06:16] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[06:06:42] <sfackler> generic destructors are 1.0-blocking, right?
[06:06:59] <ezyang> huh 
[06:07:14] <strcat> sfackler: I can't see why fixing them would be backwards incompatible
[06:07:53] <sfackler> is 1.0 just back-compat, or is it actully "here is a thing that is pretty much good to go"?
[06:07:53] <docbrown> Sorry to interrupt, but what's a generic destructor?
[06:08:03] <sfackler> a destructor on a type with generic parameters
[06:08:15] *** Quits: carter (carter@moz-F3C2A2D8.nycmny.fios.verizon.net) (Quit: Textual IRC Client: www.textualapp.com)
[06:08:25] <sfackler> like "impl<T> Drop for Foo<T> {...}"
[06:08:32] <strcat> a generic dtor works
[06:08:39] <strcat> type bounds don't work on dtors though
[06:08:44] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[06:08:51] <strcat> T: Foo and calling a method provided by Foo won't work
[06:09:05] <strcat> which is needed for allocator support, to call the allocator-provided free function
[06:09:49] <sfackler> and other things like flush-at-drop for BufferedWriter/Stream
[06:10:56] <ezyang> OK, even more stupid question: do I need to install the 'rust-core' library, if I am using the rust-nightly ppa at https://launchpad.net/~hansjorg/+archive/rust 
[06:11:56] <strcat> well what are you doing?
[06:12:32] <ezyang> Well, I thought, "Hey, rust-core already defines a raw aligned export, so clearly I should use rust-core" 
[06:13:32] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Ping timeout)
[06:13:35] <strcat> it's an alternative to the stdlib for freestanding (no libc) use or for depending only on libc
[06:13:53] <ezyang> oh, oops 
[06:13:57] <ezyang> ok, so I shouldn't do that 
[06:14:07] <ezyang> "found rust type `uint` in foreign module, while libc::c_uint or libc::c_ulong should be used, #[warn(ctypes)] on by default" Hm 
[06:14:08] *** Joins: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP)
[06:14:26] <mark_edward> is Gc<Mut<T>> a thing yet>
[06:14:28] <mark_edward> >
[06:14:36] <strcat> Gc<RefCell<T>>
[06:15:03] <strcat> but as there's no garbage collector there's not much reason to use Gc over Rc
[06:15:24] <strcat> it's just a slower, more memory hungry refcounting implementation with less prompt destruction
[06:15:27] <mark_edward> except for compatibilty with libsyntax, librustc, etc
[06:15:36] <strcat> they don't use Gc
[06:15:43] <mark_edward> they use @
[06:15:50] <mark_edward> same thing isn't it?
[06:16:15] <strcat> they're different types, same implementation
[06:16:25] *** Joins: diverse (diverse@moz-ED94B8D.oc.oc.cox.net)
[06:16:26] *** Joins: gamakichi (Mibbit@B9CDBA6E.D12D449F.2C0780D7.IP)
[06:16:29] <mark_edward> yeah, so i need a lot @T and @mut T for now
[06:17:50] <gamakichi> Will anyone write a Rust-version mini-kanren?
[06:17:57] *** Parts: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com) ()
[06:18:23] <diverse> pcwalton: how is the box implementation going?
[06:18:39] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[06:19:01] <pcwalton> de-celling in preparation for it
[06:19:07] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[06:19:13] <pnkfelix> strcat: what is the name of that programming language that degrades each cell of its memory every time its read (incl. instruction stream) ?
[06:19:22] <strcat> pnkfelix: entropy
[06:19:29] <pnkfelix> strcat: merci
[06:20:57] <diverse> why would it want to degrade the cells?
[06:21:15] <strcat> diverse: http://esolangs.org/wiki/Entropy
[06:21:43] <mark_edward> can a module contain no items?
[06:21:46] <bstrie> diverse: because programming is too easy
[06:22:04] <mark_edward> ie no view_items, and no items?
[06:22:19] <strcat> rusti: mod foo {}
[06:22:21] -rusti- ()
[06:22:24] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[06:22:28] <mark_edward> true
[06:22:46] <pnkfelix> diverse: its more of a piece of art
[06:23:04] *** Joins: alonlevy (alon@moz-DCBA91C6.bb.netvision.net.il)
[06:23:06] <pnkfelix> diverse: i.e. change the way you think about programming and programs
[06:23:54] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[06:24:11] * strcat loves the idea that strings are arrays of floats degrading randomly over time ;p
[06:24:18] <lkuper> isn't that in fact what happens eventually with an SSD?
[06:24:20] *** Quits: AvianFlu (AvianFlu@moz-C1C884AB.nyc.res.rr.com) (Input/output error)
[06:24:52] <ezyang> you can use this fact to steganographically encode data on flash media :) 
[06:25:01] <pnkfelix> lkuper: why limit the notion to SSDs ?
[06:25:24] <lkuper> yeah, with flash memory in general, I guess
[06:25:27] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[06:25:29] <lkuper> pnkfelix: quite
[06:25:36] <pnkfelix> lkuper: I was more thinking memory in general
[06:25:44] <pnkfelix> lkuper: state
[06:25:47] <cmr> I cracked a joke about using ratio of segfaults to succesful runs as a sidechannel for data, and pondering thatmaybe that's what IE was originally for ;)
[06:25:52] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:26:05] <pnkfelix> lkuper: outside of turing's mental model, of course.  :)
[06:26:14] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[06:27:17] <ezyang> So, if I understand correctly, freeing a struct (Drop) is a privileged interface, but allocation you can do whatever you want? 
[06:27:29] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Ping timeout)
[06:27:40] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[06:27:43] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[06:27:44] <cmr> I must be missing some context. WHat do you mean by privileged?
[06:27:50] <cmr> Like, compiler-specified?
[06:27:57] <ezyang> yeah 
[06:28:09] <strcat> rust doesn't have constructors
[06:28:11] <cmr> So, the ~T allocator is completely user-defined via lang items.
[06:28:20] <strcat> and no move/copy constructors either
[06:28:36] <diverse> Entropy looks like a good language to train on after reading about it.
[06:28:38] <cmr> Calling the destructor is currently 'privileged', can't do it by hand atm or for the foreseeable future.
[06:28:54] <cmr> (can do workarounds, though)
[06:28:54] <strcat> pnkfelix: it'd be fun to do similar stuff to C++
[06:28:54] *** Quits: vky (chatzilla@moz-4F2E17BF.dsl.dynamic.sonic.net) (Ping timeout)
[06:28:59] <strcat> pnkfelix: #define a few things evil-y
[06:29:08] <cmr> (see std::util::drop, std::util::ignore in <=0.8)
[06:29:11] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Client exited)
[06:29:32] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[06:30:12] <dbaupp> cmr: s/std::util::drop/std::prelude::drop/
[06:30:20] <cmr> oh!
[06:30:23] <cmr> cool
[06:30:26] <cmr> so yeah, that
[06:30:31] <cmr> Must have missed thatpart of the PR
[06:30:51] <diverse> std::prelude::drop ftw
[06:31:14] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[06:32:38] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[06:33:00] *** Joins: avsej (avsej@D9A610B8.4841F515.FB33447D.IP)
[06:33:26] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Ping timeout)
[06:33:26] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[06:34:15] *** Joins: lpy (lpy@D4DF2483.F09091A8.1348A864.IP)
[06:34:22] <bstrie> did we get rid of the util module yet???
[06:34:30] <Eridius> no, just that one func
[06:34:34] <bstrie> bah
[06:34:40] <Eridius> it was being renamed in a PR, so it was moved at the same time
[06:35:08] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[06:36:35] *** Joins: loren (loren@1F18520C.8C2A521C.405878F2.IP)
[06:37:04] <loren> Is there currently anyway to implement a trait for all sizes of constant sized array?
[06:37:22] <bjz> loren: no :(
[06:37:28] <bjz> loren: major pain point
[06:37:50] <bjz> loren: hopefully in the future we will be able to parameterise over constants
[06:37:53] * dbaupp hates it
[06:38:02] <bjz> loren: then that will be possible
[06:38:09] <bjz> dbaupp: :(
[06:38:11] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[06:38:19] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[06:38:23] <loren> bjz: fair enough, do you know of a good way to implement default for types containing [u8, ..X]?
[06:38:34] <cmr> loren: can't.
[06:38:41] <loren> :(
[06:38:48] <cmr> X can't vary
[06:38:54] <bjz> loren: you can do it for &'a [T]
[06:38:58] <cmr> If it's a single X, then you can implement it manually.
[06:39:11] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[06:39:18] <bjz> loren: but then everything has to return ~[T]s
[06:39:24] <bjz> :(
[06:39:56] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Connection reset by peer)
[06:40:02] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[06:40:08] <loren> cmr: If I try implement it manually I get: "cannot provide an extension implementation where both trait and type are not defined in this crate"
[06:40:16] <bjz> loren: you could use macros to generate impls for a selection of types, but that is super ugly
[06:40:37] <boredomist> why does TcpStream::connect return an Option<TcpStream> but raise an IoError condition on failure?
[06:40:40] <loren> Its only 8 different sizes, so I would seriously consider just manually implementing
[06:40:47] <bjz> loren: you can't implement traits defined outside of your crate on base types
[06:40:54] <cmr> boredomist: that's just how the API works right now. It's super weird and is going to be changed.
[06:41:13] <bjz> loren: you'd have to make your own trait, unfortunately
[06:41:13] <boredomist> okay cool, thought it seemed a bit backwards
[06:41:21] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[06:41:24] <sfackler> boredomist: if it raises a condition that is handled, it returns None
[06:41:42] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[06:42:10] <boredomist> handled by the implementation?
[06:42:13] <diverse> btw are we going to switch from Option to Result completely?
[06:42:14] <mark_edward> what are the methods that let you use a vector like a stuck?
[06:42:21] <cmr> diverse: completely? no
[06:42:24] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[06:42:26] <cmr> mark_edward: push/pop?
[06:42:30] <boredomist> sfackler: what kinds of things would be handled there?
[06:43:04] <mark_edward> oh right
[06:43:13] <diverse> cmr: alright. Was wondering what that discussion in that last meeting was all about then.
[06:43:57] <cmr> diverse: it's about changes to the option api, https://github.com/mozilla/rust/pull/10364
[06:44:00] *** Quits: dbaupp (Thunderbir@A192CB9D.D5A1DCF.37681C44.IP) (Ping timeout)
[06:44:01] <cmr> erm, result
[06:44:28] <loren> bjz: Actually, I can just make my own type that wraps [u8, ..X] for some finite value of X, then I can still use Default
[06:45:36] <diverse> cmr: then, what would be the difference between the Result and Option APIs?
[06:45:40] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[06:45:49] <sfackler> boredomist: the usual errors you would get trying to open a TCP connection, rejected connections, etc
[06:45:52] <bjz> yay! my `gen_server` thing for Rust: https://gist.github.com/bjz/2e74af5d367b6a0bfa34
[06:46:03] <bjz> based off Erlang's one
[06:46:07] <cmr> diverse: read the PR. you can still match on them etc, but it makes Result API lean more heavily on Option
[06:46:21] <boredomist> sfackler: getting a connection refused actually raised a condition
[06:46:28] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[06:46:35] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Quit: ChatZilla 0.9.90.1 [Firefox 28.0a1/20131204030203])
[06:46:50] <boredomist> (using rust master from sometime this afternoon)
[06:46:52] <sfackler> right
[06:47:09] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[06:47:38] <sfackler> so if you handle the condition, the task won't fail but you'll get None instead of Some(socket)
[06:47:41] <sfackler> i.e.
[06:47:49] *** Joins: ChickeNES (Mibbit@922D60BE.14AD393B.5B85F5ED.IP)
[06:47:57] <cmr> bjz: that's some crazy typarams
[06:48:12] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[06:48:25] <sfackler> io_error::cond.trap(|err| { do whatever with the error }).inside (|| { TcpStream::connect(...) })
[06:48:38] * cmr goes to bed
[06:49:04] <boredomist> sfackler: aha, thanks
[06:49:43] *** Quits: bjz (bjz@moz-DD4A2A91.lnse2.cha.bigpond.net.au) (Ping timeout)
[06:50:26] *** Quits: lkuper (lkuper@moz-72054E1A.nyc.res.rr.com) (Quit: lkuper)
[06:52:54] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[06:54:29] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[06:54:44] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[06:54:55] *** Quits: docbrown (docbrown@5CE9D448.F0B9EFB2.7F8758CE.IP) (Client exited)
[06:56:18] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[06:56:43] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[06:59:29] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[07:00:27] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Quit: Leaving)
[07:00:47] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:01:55] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[07:02:46] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[07:06:53] *** Quits: thesnowdog (doug@4D17280F.9D0B7490.6F17036B.IP) (Connection reset by peer)
[07:07:28] *** Joins: thesnowdog (doug@4D17280F.9D0B7490.6F17036B.IP)
[07:09:27] *** Quits: gamakichi (Mibbit@B9CDBA6E.D12D449F.2C0780D7.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:10:17] *** Joins: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au)
[07:11:04] *** Quits: cubic (cubic@moz-80241A3A.mc.videotron.ca) (Quit: Leaving)
[07:11:21] *** Quits: KindOne (KindOne@moz-3C569A14.dynamic.ip.windstream.net) (Ping timeout)
[07:11:56] *** Joins: antifuchs (sid10828@moz-31ABA2C0.irccloud.com)
[07:12:06] <antifuchs> hi there, rust friends (:
[07:12:35] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[07:12:37] *** Quits: joone (joone@moz-8E88FB0F.jf.intel.com) (Ping timeout)
[07:13:08] <antifuchs> I am trying to do some word-wise string manipulation, and find myself needing an iterator that is similar to word_iter (or words in master), but also gives me the whitespace between words.
[07:13:27] <antifuchs> I suppose I'd have to make a customized splitting routine for this, but am kind of at a loss
[07:13:43] *** Quits: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au) (Quit: Textual IRC Client: www.textualapp.com)
[07:14:13] *** Joins: joone (joone@moz-8E88FB0F.jf.intel.com)
[07:14:51] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[07:15:09] *** Joins: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au)
[07:16:44] <antifuchs> I guess I'd be creating a Filter with the correct predicate. Hm!
[07:17:34] <ChrisMorgan> antifuchs: for "foo bar", do you want ["foo ", "bar"] or ["foo", " ", "bar"] or something else?
[07:18:00] <bjz> cmr: ack, internets dced for awhile
[07:18:03] *** Quits: Earnestly (earnest@88884C6.A3735F9C.39C00A7A.IP) (Ping timeout)
[07:18:10] <bjz> cmr: yeah, loads of type params :(
[07:18:12] <antifuchs> ChrisMorgan: great question! it should be ["foo", " ", "bar"] (:
[07:18:17] *** Joins: KindOne (KindOne@moz-4EFE0332.dynamic.ip.windstream.net)
[07:18:17] <bjz> cmr: see the FIXME
[07:18:30] <bjz> I mean, FIXMEs
[07:18:31] <antifuchs> also, it should ideally get the exact whitespace between words 
[07:18:35] <ChrisMorgan> antifuchs: StrSlice.words (what was word_iter) is implemented as `self.split(char::is_whitespace).filter(|s| !s.is_empty())`.
[07:18:52] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[07:18:54] <ChrisMorgan> (Got to go just now, just giving you that in case it helps.)
[07:18:57] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[07:19:05] <antifuchs> I think it does! thanks ChrisMorgan (:
[07:19:55] <Yurume> antifuchs, you may also use normal str::split and get the offsets to separators using str::subslice_offset.
[07:20:21] <antifuchs> Yurume: oh, wait, split yields actual slices?
[07:20:38] <antifuchs> holy cats, every time I am surprised how reasonable rust is (:
[07:20:42] <Yurume> yeah!
[07:20:45] <antifuchs> I should get used to this (:
[07:21:49] *** Joins: notmatt_ (notmatt@moz-9FB2565E.vc.shawcable.net)
[07:21:51] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Connection reset by peer)
[07:21:58] <Yurume> rusti: let s = "one two three"; for i in s.word_iter() { let off = s.subslice_offset(i); print(format!("{}-{} ", off, off + i.len())); }
[07:22:00] -rusti- 0-3 4-7 8-13 ()
[07:22:03] *** Joins: victorporof (victorporo@FB8E2A00.483E5FE1.9B1E38F4.IP)
[07:22:13] <Yurume> (that's 0.8, btw)
[07:22:32] <antifuchs> I'm on 0.8 right now, so that's perfect. Thanks so much!
[07:24:40] <sp3d> wow, I didn't know subslice_offset existed
[07:25:57] *** Joins: moostik (Icedove@moz-698B575F.w86-212.abo.wanadoo.fr)
[07:26:24] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[07:27:04] <antifuchs> this is really super cool
[07:27:41] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[07:27:46] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[07:28:27] <bjz> antifuchs: I'd reccomend using 0.9-pre
[07:28:55] <bjz> 0.8 is ancient in the world of Rust
[07:29:08] <antifuchs> yeah, I should get that - I'd just "upgraded" to 0.8 from 0.8-pre though, you all move too fast (:
[07:29:13] *** Joins: efnysien (efnysien@moz-50AD4325.res.cmu.edu)
[07:29:50] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[07:29:55] <bjz> haha
[07:30:02] <mark_edward> how come the pretty printer doesn't print to multiple files? that'd turn it into a formatter pretty quick
[07:30:11] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[07:30:12] <Yurume> only if rust-nightly existed in Windows! ;_;
[07:31:58] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[07:32:23] *** Quits: FreeFull (freefull@moz-672577F6.as13285.net) (Quit: )
[07:33:33] *** Quits: paulproteus (quassel@199.199.210.158) (Ping timeout)
[07:34:43] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[07:36:15] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:36:59] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[07:37:04] *** Joins: paulproteus (quassel@458FE134.3EC36C88.CBDCF1DC.IP)
[07:37:22] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[07:38:05] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[07:38:46] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[07:39:29] *** Quits: z0w0 (zack@moz-6264033D.qcl9.cha.bigpond.net.au) (Ping timeout)
[07:39:41] <eddyb> I remember that my attempt at describing something like this was completely demolished by strcat and other people more knowledgeable about it than me https://mail.mozilla.org/pipermail/rust-dev/2013-December/007216.html
[07:41:25] <bjz> acrichto: is there an issue for adding something like recv_timeout?
[07:42:23] <acrichto> bjz: to channels?
[07:42:27] <bjz> aye
[07:42:47] <bjz> or at least something to do with that
[07:43:23] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[07:43:36] <bjz> acrichto: I'm adding some fixme comments to my server: // FIXME (#XXX): add call_with_timeout.
[07:43:48] *** Joins: KindTwo (KindOne@moz-EF1DB55F.dynamic.ip.windstream.net)
[07:44:01] <acrichto> bjz: I don't really plan on doing that, I plan on making select optimized, however
[07:44:12] <bjz> mmk
[07:44:19] *** Quits: KindOne (KindOne@moz-4EFE0332.dynamic.ip.windstream.net) (Ping timeout)
[07:45:02] *** KindTwo is now known as KindOne
[07:45:10] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[07:45:30] <acrichto> but I haven't optimized select yet
[07:45:34] <acrichto> so I"m not sure how feasible that is
[07:46:10] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:46:19] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[07:46:28] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[07:46:28] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:49:49] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[07:51:37] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[07:51:51] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Connection reset by peer)
[07:52:14] <antifuchs> well, there it is. rust wins, massively (:
[07:52:34] <bjz> antifuchs: why?
[07:52:37] <bjz> in what?
[07:52:42] <antifuchs> thanks /so/ much, ChrisMorgan and Yurume - this was amazingly easier than I thought (:
[07:53:08] <antifuchs> bjz: in allowing me to write this tiny competition entry without losing any hair (:
[07:54:01] <antifuchs> my friend is solving the same thing in C++ and while he has wayyy more experience in it than I have in either rust of c++, I'm sure I have cursed way less (:
[07:55:13] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[07:56:29] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[07:56:56] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[07:57:09] <Yurume> antifuchs: just out of curiosity, what was the competition?
[07:57:43] <antifuchs> my workplace is making a CTF-type game, and I'm test-solving (:
[07:58:04] *** Joins: dbaupp (Thunderbir@moz-EB2EFE6F.lns20.syd6.internode.on.net)
[07:58:10] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[07:59:59] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[08:01:04] *** Quits: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au) (Ping timeout)
[08:01:29] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Connection reset by peer)
[08:01:44] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[08:03:32] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[08:05:33] *** Joins: beefcode (Mibbit@moz-7C629AFB.dip0.t-ipconnect.de)
[08:05:35] *** Quits: lpy (lpy@D4DF2483.F09091A8.1348A864.IP) (Client exited)
[08:07:16] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[08:07:56] <beefcode> Excuse my question, please, but I can not find a solution to that: If Rust is written in Rust AND I have only a "normal" GNU/Linux system with build tools but without Rust installed how do the Rust sources compile and link etc.? 
[08:08:22] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[08:08:43] *** Quits: notmatt_ (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[08:08:47] <jdm> beefcode: we download a binary snapshot as part of the build process
[08:08:57] <beefcode> aha
[08:09:15] <Yurume> beefcode: a long long time ago Rust compiler was written in OCaml. then Rust compiler written in Rust appeared and its binary was retained. nowadays there are only snapshot binaries of Rust compiler written in Rust for major platforms.
[08:10:03] *** Quits: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP) (Ping timeout)
[08:10:27] <beefcode> I got it. Thanks to you both.
[08:10:49] *** Joins: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP)
[08:11:08] *** Joins: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP)
[08:11:27] <beefcode> The reason I asked is that I want to get Rust compiled "natively" - or how you say it in English - on Windows by using the Visual Studio "build tool chain".
[08:12:51] <dbaupp> beefcode: fwiw, https://github.com/mozilla/rust/issues/1768#issuecomment-24841816
[08:12:58] *** Quits: avsej (avsej@D9A610B8.4841F515.FB33447D.IP) (Ping timeout)
[08:13:00] <dbaupp> (you're free to experiment though.)
[08:13:01] <beefcode> The only way I see to get to that is to begin at the stage where Rust was not written in Rust. So that I can build up native Rust 
[08:13:54] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[08:14:29] <beefcode> dbaupp: Which comment do you mean? klutzy or thestinger ?
[08:14:55] <dbaupp> beefcode: yes, thestinger, referring to https://github.com/mozilla/rust/issues/9367
[08:14:57] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[08:15:27] <antifuchs> are there any binary packages for rust? I find myself in need of compiling a linux binary, and would like to avoid compiling rust in a VM for that (:
[08:16:05] <eddyb> antifuchs: for some linux distributions - I know of at least Arch and Ubuntu packages
[08:16:19] <antifuchs> ah, that would be useful (:
[08:16:21] <antifuchs> will look, thanks!
[08:18:16] <beefcode> At least source based Linux distros should have Rust packages.
[08:19:28] <geomyidae> How does one use spawn in a way where you call an external function? can you just pass in a chan to send back on?
[08:19:32] <beefcode> dbaupp: Thanks for this link to the Issue.
[08:21:03] <dbaupp> antifuchs: https://github.com/mozilla/rust/wiki/Doc-packages,-editors,-and-other-tools
[08:21:07] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[08:21:28] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[08:21:29] <antifuchs> excellent, thanks both (:
[08:21:57] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[08:24:47] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[08:25:03] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[08:25:34] *** pmoore|away is now known as pmoore
[08:26:37] *** flaper87|afk is now known as flaper87
[08:26:46] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[08:29:20] *** Joins: Ferreus (ferreus@moz-459C6CFC.dip0.t-ipconnect.de)
[08:29:25] *** Parts: beefcode (Mibbit@moz-7C629AFB.dip0.t-ipconnect.de) ()
[08:30:06] *** Joins: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au)
[08:30:30] *** Quits: jstevans (Instantbir@moz-9A2374FB.bootp.virginia.edu) (Ping timeout)
[08:32:13] <geomyidae> uh, not getting much when looking for "rust sleep' any tips?
[08:32:23] *** Quits: disjukr (disjukr@1B452A7A.D5FE504D.FC69BED9.IP) (Ping timeout)
[08:32:24] <geomyidae> I want to sleep in just a task, not the whole thread/proc
[08:33:14] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[08:33:26] *** Quits: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au) (Ping timeout)
[08:34:00] <Yurume> geomyidae: are you in master or in 0.8?
[08:34:35] *** Joins: steveklabnik (uid17044@moz-A42E5B7B.irccloud.com)
[08:34:47] <geomyidae> rustc 0.9-pre (ad58e2c 2013-12-04 13:31:45 -0800)
[08:34:55] <geomyidae> well, I guess that makes it master.
[08:35:35] <Yurume> http://static.rust-lang.org/doc/master/std/io/timer/struct.Timer.html
[08:35:53] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[08:35:59] <Yurume> let timer = std::io::timer::Timer::new(); timer.sleep(3000/*msec*/); will work.
[08:36:05] <geomyidae> I swear I used the search. :(
[08:36:16] <geomyidae> maybe I was on the 0.8 link? anyway, thanks!
[08:36:37] *** Quits: canhtak (canhtak@moz-A53E1151.wl.t.ulaval.ca) (Quit: canhtak)
[08:36:46] <Yurume> 0.8 does have a libuv-compatible timer as well: http://static.rust-lang.org/doc/0.8/std/rt/io/timer/struct.Timer.html
[08:37:14] <Yurume> 0.7 didn't have it, I had to wait for 0.8 for that reason :S
[08:37:33] *** Quits: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP) (Ping timeout)
[08:38:10] *** Joins: disjukr (disjukr@1B452A7A.D5FE504D.FC69BED9.IP)
[08:38:26] *** Quits: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net) (Ping timeout)
[08:38:55] <geomyidae> Yurume: is there a benefit to using a new timer rather than: http://static.rust-lang.org/doc/master/std/io/timer/fn.sleep.html
[08:38:57] *** Quits: maxiepoo (mnew@moz-6F50ADE.hsd1.il.comcast.net) (Ping timeout)
[08:39:17] <geomyidae> er, never mind, I just clicked on the implementation of that function :P
[08:39:23] <Yurume> ;)
[08:39:28] *** Joins: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP)
[08:39:29] *** Quits: jesse99 (jesse99@moz-8B1E0C5D.hsd1.wa.comcast.net) (Ping timeout)
[08:39:30] *** Joins: jesse99 (jesse99@moz-8B1E0C5D.hsd1.wa.comcast.net)
[08:41:54] <geomyidae> oh, I see, the search is constrained by [std/extra]. looking at the url that makes sense I guess.
[08:43:45] *** Quits: jesse99 (jesse99@moz-8B1E0C5D.hsd1.wa.comcast.net) (Ping timeout)
[08:44:23] *** Quits: victorporof (victorporo@FB8E2A00.483E5FE1.9B1E38F4.IP) (Quit: victorporof)
[08:44:30] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[08:44:48] *** Joins: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com)
[08:48:48] *** Joins: oberstet (quassel@moz-185796D6.dynamic.mnet-online.de)
[08:49:01] <geomyidae> should omitting a semincolon be allowed in a void function? I just encountered a case where I wrote chan.send() without a semincolon at the end and it didn't complain?
[08:49:47] <Yurume> it is correct that rustc does not complain in that case, since Rust does not have nothing like void but just ().
[08:50:04] <Eridius> geomyidae: functions with no return value actually return ()
[08:50:08] <ezyang> Hm, what is move_val_init 
[08:50:15] <Yurume> in C/C++ void is not a type but a placeholder for the lack of types. in Rust () is a type which has only one value, also denoted ().
[08:50:18] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[08:50:44] <Eridius> ezyang: looks like an intrinsic. Why?
[08:50:59] <ezyang> It shows up in the FFI tutorial 
[08:51:03] <Eridius>     /// Move a value to an uninitialized memory location.
[08:51:03] <Eridius>     ///
[08:51:03] <Eridius>     /// Drop glue is not run on the destination.
[08:51:08] <Yurume> they look almost identical but have an important difference: () is a type and seamlessly integrated with the type system.
[08:51:30] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[08:51:37] <Eridius> ezyang: let me guess, the tutorial malloc()s some memory?
[08:51:37] <geomyidae> Eridius: so would it have caused the function to return or did the compiler realize it was the last statement in this nested match?
[08:51:43] <ezyang> yeppers 
[08:52:07] <Eridius> geomyidae: the ; statement terminator, besides allowing a second statement to occur afterwards, also has the effect of causing the preceding statement's value to be ()
[08:52:17] <Eridius> geomyidae: therefore, if the statement already had a value of (), and it's the last statement in the function, then the semicolon is optional
[08:52:21] <geomyidae> Oh
[08:52:34] <geomyidae> Perfect, thank you.
[08:54:27] <Eridius> woot, Path::new() is back!
[08:55:37] <Yurume> so will we go with box then?
[08:56:23] <geomyidae> also, a new question with regard to why I have to call sharedChan.clone() on a separate line. https://github.com/colemickens/pcapfe/blob/master/main.rs#L65
[08:56:41] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[08:56:59] <Eridius> Yurume: that seems very likely at this point
[08:57:36] <Yurume> geomyidae: when you spawn a new task, every variable that it uses "moves" into the task, meaning that you cannot access it from other tasks (including the task that spawned it).
[08:58:05] <Yurume> so you need to clone it *before* the spawn.
[08:58:22] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[08:58:42] * geomyidae nods
[08:58:49] <Yurume> you might also use spawn_with which receives one argument that moves into the task.
[08:59:15] <Yurume> (but still you need to clone the channel outside the task, just that it looks a bit simpler ;)
[08:59:21] <ezyang> Hoy folks, if I want to contribute some extra text to http://static.rust-lang.org/doc/master/tutorial-ffi.html, how should I go about doing it? 
[08:59:32] <Yurume> do you have a Github account?
[08:59:34] <geomyidae> right, and it makes it even more explicit, I'm imagining what that would look like
[08:59:36] <ezyang> yup 
[08:59:37] <ezyang> PR? 
[08:59:41] <Yurume> yeah
[08:59:45] <ezyang> k 
[09:02:36] * geomyidae wonders if he should get over his dislike of the do shortcut
[09:03:12] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[09:03:56] <Yurume> ezyang: oh, (just out of curiosity,) do you run ezyang.com?
[09:04:39] <friggle> geomyidae: maybe not https://github.com/mozilla/rust/issues/10815
[09:04:54] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[09:05:42] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[09:06:54] <geomyidae> Did spawn_with also go away?  I don't see it in master :P Or am I failing at documentation again?
[09:07:46] <Yurume> uh, you are right, it seemed to be disappeared with the introduction of proc().
[09:07:56] <Luqman> you don't need it anymore
[09:09:20] *** Joins: smodo (ford_p@moz-CCE57F2F.eblcom.ch)
[09:09:31] <geomyidae> because proc guarantees a single time capture?
[09:09:39] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[09:10:07] <Yurume> no, rather, there were some cases that a normal closure cannot capture the outer variable, I think.
[09:11:16] <Luqman> spawn takes a proc now so you don't need to use a cell to move it into the new task, which is basically what spawn_with wrapped
[09:11:20] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[09:12:51] *** Joins: sigma (sigma@moz-A17EB325.range86-184.btcentralplus.com)
[09:12:56] *** Quits: jdm (jdm@moz-78156D60.dsl.teksavvy.com) (Quit: Lost terminal)
[09:15:44] *** Quits: fournm (Aria@moz-ABB60BA0.austin.res.rr.com) (Quit: Leaving)
[09:16:05] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[09:16:43] *** Joins: maxiepoo (mnew@moz-6F50ADE.hsd1.il.comcast.net)
[09:17:27] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[09:17:50] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[09:20:48] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[09:22:15] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Connection reset by peer)
[09:22:23] *** Quits: LimeBurst (me@247D1419.D73964AC.27A8748.IP) (Connection reset by peer)
[09:22:33] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[09:22:34] <ezyang> Yurume: that's me! 
[09:22:52] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[09:23:13] <Yurume> ezyang: oh great, I always appreciated your hand-written drawings ;)
[09:23:28] *** Joins: nkoep (nik@moz-15EEC9C5.pool.mediaways.net)
[09:24:14] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[09:25:32] <ezyang> :) 
[09:26:34] *** Quits: ChickeNES (Mibbit@922D60BE.14AD393B.5B85F5ED.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:28:59] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[09:29:10] *** Joins: jstevans (Instantbir@moz-FBE46FBB.bootp.virginia.edu)
[09:30:26] *** Joins: peterdn (chatzilla@moz-5EB9CC81.as13285.net)
[09:30:56] *** Quits: jstevans (Instantbir@moz-FBE46FBB.bootp.virginia.edu) (Ping timeout)
[09:30:57] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[09:31:47] *** Joins: Ms2ger (Ms2ger@B7B2FF50.C60A97A6.F9FB0584.IP)
[09:32:09] *** Joins: victorporof (victorporo@30F0F945.70F4578F.79933D60.IP)
[09:32:29] *** Joins: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au)
[09:33:47] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Client exited)
[09:33:47] *** Quits: Kxepal (Miranda@moz-F2C9521E.pppoe.mtu-net.ru) (Ping timeout)
[09:33:49] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[09:34:11] *** Quits: oberstet (quassel@moz-185796D6.dynamic.mnet-online.de) (Connection reset by peer)
[09:34:15] *** Joins: oberstet (quassel@moz-185796D6.dynamic.mnet-online.de)
[09:34:15] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[09:34:30] *** Quits: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au) (Ping timeout)
[09:34:40] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Connection reset by peer)
[09:34:46] *** Quits: cade (cade@66A6305B.C2D6DAC0.9510F13D.IP) (Ping timeout)
[09:34:46] *** Quits: erick (erick@E1304535.2A7189BF.BE19388.IP) (Ping timeout)
[09:34:46] *** Quits: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP) (Ping timeout)
[09:35:04] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[09:35:05] *** Joins: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP)
[09:35:15] *** Joins: erick (erick@E1304535.2A7189BF.BE19388.IP)
[09:35:36] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[09:35:41] *** Joins: cade (cade@66A6305B.C2D6DAC0.9510F13D.IP)
[09:36:42] *** Joins: Kxepal (Miranda@moz-A1D61FF4.pppoe.mtu-net.ru)
[09:39:30] *** Quits: meTaAU_ (admin@moz-5A66BDE7.lns20.per2.internode.on.net) (Ping timeout)
[09:39:32] *** Quits: quasisphere (btw@DC685DC2.94302614.1D0D91FF.IP) (Ping timeout)
[09:39:32] *** Quits: Kauhsa (kauhsa@moz-A78B2D1A.fi) (Ping timeout)
[09:39:32] *** Quits: bstrie (ben@moz-D5A1D0F5.members.linode.com) (Ping timeout)
[09:39:43] *** Quits: kemurphy (kemurphy@3863AC20.C4E71399.9510F13D.IP) (Ping timeout)
[09:39:43] *** Quits: toddaaro (toddaaro@moz-98F46974.us) (Ping timeout)
[09:39:43] *** Quits: pepijndevos (pepijndevo@9EACEF43.E50A3180.BCE47D84.IP) (Ping timeout)
[09:39:43] *** Quits: eco (eco@moz-87840B9D.net) (Ping timeout)
[09:39:43] *** Quits: kmapped2 (kmapped2@A35331CF.60E9685E.20F09BA6.IP) (Ping timeout)
[09:39:43] *** Quits: robertknight_ (robertknig@moz-DF72422D.members.linode.com) (Ping timeout)
[09:39:43] *** Quits: isaacd (me@moz-6902374D.dhcp.oxfr.ma.charter.com) (Ping timeout)
[09:39:43] *** Quits: Boreeas (Boreeas@moz-F35C832D.boreeas.net) (Ping timeout)
[09:39:43] *** Quits: yosemite (sam@moz-8CEAB1B0.dasbistro.com) (Ping timeout)
[09:39:43] *** Quits: ion (ion@heh.fi) (Ping timeout)
[09:39:45] *** Quits: nonehaxor (nonehaxor@BA9CBAE.4C3B0355.EE6E63A5.IP) (Ping timeout)
[09:39:45] *** Quits: mrmonday (mrmonday@moz-C7DC1A73.lin.openzula.org) (Ping timeout)
[09:39:46] *** Quits: jack (jack@moz-DF5A9AA3.members.linode.com) (Ping timeout)
[09:39:48] *** Quits: snerd (motk@moz-D21A06DF.members.linode.com) (Ping timeout)
[09:39:48] *** Quits: celeron55 (perttu@moz-D552F2C7.netplaza.fi) (Ping timeout)
[09:39:53] *** Quits: alonlevy (alon@moz-DCBA91C6.bb.netvision.net.il) (Ping timeout)
[09:39:53] *** Quits: doy (doy@moz-8F23663C.net) (Ping timeout)
[09:39:53] *** Quits: dbaupp (Thunderbir@moz-EB2EFE6F.lns20.syd6.internode.on.net) (Ping timeout)
[09:39:53] *** Quits: xales (xales@moz-7DEA692E.forevernothing.com) (Ping timeout)
[09:39:53] *** Quits: SirSkidmore (taylor@moz-F145A866.com) (Ping timeout)
[09:39:53] *** Quits: ekiara (emk@moz-9B1940E9.tech.co.ke) (Ping timeout)
[09:39:53] *** Quits: Cork (Cork@moz-352B7E7B.a370.priv.bahnhof.se) (Ping timeout)
[09:39:53] *** Quits: q66__ (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[09:39:53] *** Joins: eco (eco@CE7A7260.A65B73B2.113BD1CE.IP)
[09:39:54] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Ping timeout)
[09:39:54] *** Joins: yosemite (sam@FFDEC35.A6A64645.7249DD0D.IP)
[09:39:56] *** Quits: wting (wting@4F978BD6.5564A9BA.9510F13D.IP) (Ping timeout)
[09:39:56] *** Quits: zheng_li (zheng_li@726F0B40.A7FE7906.4B330583.IP) (Ping timeout)
[09:39:56] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (Ping timeout)
[09:39:56] *** Quits: ofeldt (ofeldt@moz-D6AAF9FA.dip0.t-ipconnect.de) (Ping timeout)
[09:39:56] *** Quits: oberstet (quassel@moz-185796D6.dynamic.mnet-online.de) (Ping timeout)
[09:39:56] *** Joins: dbaupp (Thunderbir@moz-EB2EFE6F.lns20.syd6.internode.on.net)
[09:39:59] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[09:39:59] *** Quits: km (quassel@moz-777F24DE.kevinmehall.com) (Ping timeout)
[09:39:59] *** Quits: benh (ben@moz-4A0366D2.org) (Ping timeout)
[09:39:59] *** Quits: Caseus (bacon@moz-9F046088.members.linode.com) (Ping timeout)
[09:39:59] *** Quits: katis (katis@40C8AF65.EFDC2270.EE6E63A5.IP) (Ping timeout)
[09:39:59] *** Quits: zxcdw (r-a@ACF33729.B543C4DE.3933CC16.IP) (Ping timeout)
[09:39:59] *** Quits: findow (Mibbit@moz-A86A7504.infotecs.ru) (Ping timeout)
[09:39:59] *** Quits: houzi (houzi@moz-4F6A1E26.getinternet.no) (Ping timeout)
[09:39:59] *** Joins: quasisphere (btw@DC685DC2.94302614.1D0D91FF.IP)
[09:40:01] *** Joins: zxcdw (r-a@ACF33729.B543C4DE.3933CC16.IP)
[09:40:03] *** Joins: nonehaxor (nonehaxor@BA9CBAE.4C3B0355.EE6E63A5.IP)
[09:40:03] *** Joins: ekiara (emk@moz-9B1940E9.tech.co.ke)
[09:40:05] *** Quits: kimundi (kimundi@moz-DE2CDAC7.dip0.t-ipconnect.de) (Ping timeout)
[09:40:05] *** Quits: Edwards (MeltdownMo@moz-B62E1D6B.members.linode.com) (Ping timeout)
[09:40:05] *** Quits: secretrobotron (secretrobo@moz-E9501591.members.linode.com) (Ping timeout)
[09:40:05] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[09:40:05] *** Quits: cade (cade@66A6305B.C2D6DAC0.9510F13D.IP) (Ping timeout)
[09:40:05] *** Quits: stvc (quassel@DDF9BE86.571456BD.9510F13D.IP) (Ping timeout)
[09:40:05] *** Quits: utkarsh (utkarsh@moz-CA9C0A97.members.linode.com) (Ping timeout)
[09:40:05] *** Quits: reyre (reyre@moz-89E9865B.com) (Ping timeout)
[09:40:05] *** Quits: taotetek (taotetek@E90CF190.930C8FCA.20F09BA6.IP) (Ping timeout)
[09:40:05] *** Quits: pcmattman (pcmattman@moz-D9B7D938.net) (Ping timeout)
[09:40:05] *** Quits: ivan (ivan@moz-531C3EC9.members.linode.com) (Ping timeout)
[09:40:05] *** Quits: agrif (agrif@moz-94847975.net) (Ping timeout)
[09:40:05] *** Quits: brianloveswords (brianloves@moz-CB223D1E.members.linode.com) (Ping timeout)
[09:40:05] *** Quits: friggle (friggle@moz-A607EAFA.members.linode.com) (Ping timeout)
[09:40:05] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[09:40:05] *** Quits: dg (dg@moz-AF6F3E94.com) (Ping timeout)
[09:40:05] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[09:40:05] *** Quits: rhodesd (none@3646D136.4C5731DA.F395EA5B.IP) (Ping timeout)
[09:40:05] *** Quits: jason_ (jason@moz-EC85D533.members.linode.com) (Ping timeout)
[09:40:05] *** Joins: bstrie (ben@moz-D5A1D0F5.members.linode.com)
[09:40:06] *** Joins: rhodesd (none@3646D136.4C5731DA.F395EA5B.IP)
[09:40:06] *** Joins: doy (doy@moz-8F23663C.net)
[09:40:06] *** Joins: friggle (friggle@moz-A607EAFA.members.linode.com)
[09:40:07] *** Joins: xales (xales@moz-7DEA692E.forevernothing.com)
[09:40:08] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Ping timeout)
[09:40:08] *** Quits: japaric (japaric@FFB1354E.A75B951F.A936879B.IP) (Ping timeout)
[09:40:08] *** Quits: Soft (soft@moz-EC8D39F.yok.fi) (Ping timeout)
[09:40:08] *** Quits: Ke (jkarlson@moz-785A3407.org.aalto.fi) (Ping timeout)
[09:40:10] *** Quits: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr) (Ping timeout)
[09:40:10] *** Quits: vq (vq@moz-65A5483F.tbcn.telia.com) (Ping timeout)
[09:40:10] *** Quits: phil_ (phil@684D2576.37BA1B1C.20F09BA6.IP) (Ping timeout)
[09:40:10] *** Joins: Caseus (bacon@moz-9F046088.members.linode.com)
[09:40:11] *** Joins: meTaAU (admin@moz-5A66BDE7.lns20.per2.internode.on.net)
[09:40:14] *** Joins: SirSkidmore (taylor@529E7008.E302D3D8.F395EA5B.IP)
[09:40:16] *** Quits: Zuchto (chat@moz-1FF744E2.members.linode.com) (Ping timeout)
[09:40:16] *** Quits: petantik (oz@moz-20EC2160.net) (Ping timeout)
[09:40:16] *** Quits: mythmon (mythmon@moz-AD308AD7.members.linode.com) (Ping timeout)
[09:40:16] *** Quits: zol (Zolomon@moz-CE018D85.members.linode.com) (Ping timeout)
[09:40:16] *** Quits: joelteon (bzzt@moz-317E8D0C.io) (Ping timeout)
[09:40:16] *** Quits: Mowah (Mowah@moz-436C35C5.cust.bredbandsbolaget.se) (Ping timeout)
[09:40:16] *** Quits: dforsyth (dforsyth@A677A619.1C765EF.EE6E63A5.IP) (Ping timeout)
[09:40:16] *** Quits: kuuranne (kuuranne@moz-C4357EA7.kapsi.fi) (Ping timeout)
[09:40:16] *** Quits: hansjorg (hansjorg@moz-41C5CE61.redpill-linpro.com) (Ping timeout)
[09:40:16] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[09:40:16] *** Quits: Ferreus (ferreus@moz-459C6CFC.dip0.t-ipconnect.de) (Ping timeout)
[09:40:16] *** Joins: taotetek (taotetek@E90CF190.930C8FCA.20F09BA6.IP)
[09:40:16] *** Joins: kmapped2 (kmapped2@A35331CF.60E9685E.20F09BA6.IP)
[09:40:16] *** Joins: km (quassel@moz-777F24DE.kevinmehall.com)
[09:40:17] *** Quits: Deewiant (deewiant@moz-C015B7F8.iki.fi) (Ping timeout)
[09:40:17] *** Quits: sindork (sindork@ABFA98AB.DD47BB48.F7A44A1B.IP) (Ping timeout)
[09:40:17] *** Quits: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca) (Ping timeout)
[09:40:17] *** Joins: sindork (sindork@ABFA98AB.DD47BB48.F7A44A1B.IP)
[09:40:18] *** Quits: heftig (heftig@moz-C8EBC776.dip0.t-ipconnect.de) (Ping timeout)
[09:40:18] *** Quits: h3r3tic (heretic@moz-8BC3B3DB.se) (Ping timeout)
[09:40:18] *** Quits: cyndis (cyndis@moz-C4357EA7.kapsi.fi) (Ping timeout)
[09:40:18] *** Joins: brianloveswords (brianloves@moz-CB223D1E.members.linode.com)
[09:40:18] *** Joins: kemurphy (kemurphy@3863AC20.C4E71399.9510F13D.IP)
[09:40:19] *** Joins: hansjorg (hansjorg@moz-41C5CE61.redpill-linpro.com)
[09:40:20] *** Quits: mark_edward (mark@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Ping timeout)
[09:40:20] *** Quits: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk) (Ping timeout)
[09:40:20] *** Quits: zokier` (zokier@moz-C4357EA7.kapsi.fi) (Ping timeout)
[09:40:20] *** Quits: jaeman (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) (Ping timeout)
[09:40:20] *** Joins: stvc (quassel@DDF9BE86.571456BD.9510F13D.IP)
[09:40:20] *** Joins: joelteon (bzzt@moz-317E8D0C.io)
[09:40:21] *** Joins: dg (dg@moz-AF6F3E94.com)
[09:40:24] *** Joins: Edwards (MeltdownMo@moz-B62E1D6B.members.linode.com)
[09:40:26] *** Joins: agrif (agrif@moz-94847975.net)
[09:40:28] *** Joins: petantik (oz@moz-20EC2160.net)
[09:40:28] *** Joins: wting (wting@4F978BD6.5564A9BA.9510F13D.IP)
[09:40:31] *** Joins: isaacd (me@moz-6902374D.dhcp.oxfr.ma.charter.com)
[09:40:35] *** Joins: japaric (japaric@FFB1354E.A75B951F.A936879B.IP)
[09:40:35] *** Joins: Deewiant (deewiant@moz-C015B7F8.iki.fi)
[09:40:37] *** Joins: reyre (reyre@moz-89E9865B.com)
[09:40:37] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[09:40:41] *** Joins: cade (cade@66A6305B.C2D6DAC0.9510F13D.IP)
[09:40:48] *** Joins: secretrobotron (secretrobo@moz-E9501591.members.linode.com)
[09:40:48] *** Joins: oberstet (quassel@moz-185796D6.dynamic.mnet-online.de)
[09:40:51] *** Joins: pepijndevos (pepijndevo@9EACEF43.E50A3180.BCE47D84.IP)
[09:41:02] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[09:41:03] *** Joins: zheng_li (zheng_li@moz-D6711E9E.xenplanet.org)
[09:41:09] *** Joins: jason_ (jason@moz-EC85D533.members.linode.com)
[09:41:16] *** Joins: vq (vq@moz-65A5483F.tbcn.telia.com)
[09:41:29] *** Joins: zz_kimundi (kimundi@moz-DE2CDAC7.dip0.t-ipconnect.de)
[09:41:30] *** Joins: ivan (ivan@moz-531C3EC9.members.linode.com)
[09:41:32] *** Joins: zol (Zolomon@moz-CE018D85.members.linode.com)
[09:41:32] *** Joins: houzi (houzi@moz-4F6A1E26.getinternet.no)
[09:41:33] *** Joins: katis (katis@40C8AF65.EFDC2270.EE6E63A5.IP)
[09:41:35] *** Joins: Kauhsa (kauhsa@moz-A78B2D1A.fi)
[09:41:36] *** Joins: utkarsh (utkarsh@moz-CA9C0A97.members.linode.com)
[09:41:37] *** Joins: heftig (heftig@moz-C8EBC776.dip0.t-ipconnect.de)
[09:41:37] *** Joins: octurion (octurion@moz-E7EA111C.clients.kiwiirc.com)
[09:41:38] *** Joins: mark_edward (mark@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[09:41:41] *** Joins: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr)
[09:41:46] *** Joins: Zuchto (chat@moz-1FF744E2.members.linode.com)
[09:41:47] *** Joins: robertknight (robertknig@moz-DF72422D.members.linode.com)
[09:41:47] *** Joins: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk)
[09:41:47] *** Joins: Ferreus (ferreus@moz-459C6CFC.dip0.t-ipconnect.de)
[09:41:49] *** Joins: pcmattman (pcmattman@moz-D9B7D938.net)
[09:41:54] *** Joins: ofeldt (ofeldt@moz-D6AAF9FA.dip0.t-ipconnect.de)
[09:41:54] *** zz_kimundi is now known as kimundi
[09:41:57] *** Joins: ion (ion@heh.fi)
[09:42:13] *** Joins: mythmon (mythmon@moz-AD308AD7.members.linode.com)
[09:42:19] *** Joins: h3r3tic (heretic@moz-8BC3B3DB.se)
[09:42:25] *** Joins: Cork (Cork@moz-352B7E7B.a370.priv.bahnhof.se)
[09:42:37] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[09:42:44] *** Joins: phil_ (phil@684D2576.37BA1B1C.20F09BA6.IP)
[09:42:44] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[09:42:55] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[09:43:10] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[09:43:14] *** Joins: Boreeas (Boreeas@moz-F35C832D.boreeas.net)
[09:43:20] *** Joins: Soft (soft@moz-EC8D39F.yok.fi)
[09:43:26] *** Joins: alonlevy (alon@moz-DCBA91C6.bb.netvision.net.il)
[09:43:28] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[09:43:28] *** Joins: kuuranne (kuuranne@moz-C4357EA7.kapsi.fi)
[09:43:41] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Client exited)
[09:43:44] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[09:43:50] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[09:44:01] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[09:44:26] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[09:44:42] *** Parts: efnysien (efnysien@moz-50AD4325.res.cmu.edu) ()
[09:45:20] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[09:45:23] *** Joins: benh (ben@moz-4A0366D2.org)
[09:45:42] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[09:45:54] *** Joins: celeron55 (perttu@moz-D552F2C7.netplaza.fi)
[09:46:02] <octurion> What am I doing wrong with my benchmark? I'm always getting an execution time of 0 ns
[09:46:04] <octurion> http://kib2.free.fr/pastebin/view_paste.php?id=146
[09:46:13] *** Joins: Ke (jkarlson@moz-785A3407.org.aalto.fi)
[09:46:24] *** Joins: cyndis (cyndis@moz-C4357EA7.kapsi.fi)
[09:46:25] *** Joins: zokier` (zokier@moz-C4357EA7.kapsi.fi)
[09:46:41] <Eridius> wow the coloring on that pastebin is hard to read
[09:46:53] *** Joins: mrmonday (mrmonday@moz-C7DC1A73.lin.openzula.org)
[09:46:55] *** Joins: jack (jack@moz-DF5A9AA3.members.linode.com)
[09:46:55] *** Joins: toddaaro (toddaaro@moz-98F46974.us)
[09:46:56] *** Joins: snerd (motk@moz-D21A06DF.members.linode.com)
[09:47:02] <octurion> Eridius: Well, it was the only one with rust syntax
[09:47:11] <octurion> that I found
[09:47:26] *** Joins: Mowah (Mowah@moz-436C35C5.cust.bredbandsbolaget.se)
[09:47:26] *** Joins: dforsyth (dforsyth@A677A619.1C765EF.EE6E63A5.IP)
[09:47:27] <Eridius> octurion: gist
[09:47:51] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[09:48:47] <octurion> Eridius: https://gist.github.com/anonymous/7802775
[09:49:19] <dbaupp> octurion: https://github.com/mozilla/rust/issues/9532
[09:49:25] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[09:49:35] *** Quits: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP) (Quit: leaving)
[09:51:07] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[09:55:52] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[09:57:05] <octurion> And now I'm getting 79917 ns/iter for this one: https://gist.github.com/anonymous/7802850
[09:57:36] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[09:58:34] *** Quits: nkoep (nik@moz-15EEC9C5.pool.mediaways.net) (Ping timeout)
[10:02:11] *** Joins: andre (andre@CA528A4A.45A4338E.8EE27E6.IP)
[10:02:26] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[10:02:54] *** Joins: thomas001 (thomas@moz-968FA222.informatik.uni-leipzig.de)
[10:03:25] *** Joins: avsej (avsej@DF1824D5.EFF97412.48F984E6.IP)
[10:04:09] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[10:04:41] *** Joins: fabiand (fabiand@moz-7C0869F0.adsl.alicedsl.de)
[10:07:30] *** Joins: LimeBurst (me@247D1419.D73964AC.27A8748.IP)
[10:07:42] *** Joins: Blei (philipp@moz-B2F9E4BD.cust.bluewin.ch)
[10:08:54] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[10:12:30] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[10:14:19] *** Joins: nkoep (nik@moz-3623A9FD.vpn.rwth-aachen.de)
[10:14:52] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[10:16:33] *** Quits: johanh (uid17185@moz-A42E5B7B.irccloud.com) (Quit: Connection closed for inactivity)
[10:16:41] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[10:17:12] *** Joins: fyolnish_ (fyolnish@moz-BE2BAE5B.miinet.jp)
[10:17:21] *** Quits: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP) (Quit: Leaving.)
[10:18:02] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[10:18:55] *** Quits: fyolnish_ (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[10:20:25] *** Joins: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP)
[10:21:00] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[10:22:42] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[10:27:42] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[10:29:30] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[10:33:37] *** Joins: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au)
[10:34:09] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[10:35:43] *** Quits: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au) (Ping timeout)
[10:35:52] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[10:37:06] *** Joins: Heather (Heather@19663F6.F53BAACC.9C17E900.IP)
[10:37:11] <Heather> hey
[10:37:14] <Heather> it's me again
[10:37:30] <Heather> how to get absolute path?
[10:37:52] <Heather> rpath.root_path()  .map(|p| p.as_str().map(|s| s.to_owned())) .unwrap().unwrap() <- this?
[10:38:49] *** Quits: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP) (Ping timeout)
[10:39:16] <dbaupp> woah, woah, woah, so many .unwrap()'s :O
[10:39:27] <dbaupp> why do you need a string?
[10:39:31] *** Joins: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP)
[10:39:36] <Heather> found ! make_absolute
[10:39:44] <Heather> I need store in config
[10:39:57] <dbaupp> ah, a text file
[10:39:58] <dbaupp> ?
[10:40:09] <Heather> yes, json
[10:40:23] <dbaupp> I see
[10:40:40] <dbaupp> fwiw, if you use .and_then, rather than .map you'll only need one .unwrap()
[10:40:42] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[10:40:58] <dbaupp> rpath.root_path().and_then(|p| p.as_str()).unwrap().to_owned()
[10:41:42] <Heather> dbussink was it working early?
[10:42:26] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[10:42:40] <Heather> but 01make_absolute01 returns path and not Option, that's already plus
[10:44:43] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[10:46:07] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[10:46:52] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[10:48:06] <Heather> ah....
[10:48:30] <Heather> quest how to make it live long enough is always hard for me :(
[10:48:36] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[10:49:24] <ezyang> Hm, something puzzling me about the move_val_init 
[10:49:52] <ezyang> So, say I have a raw pointer ptr; and I write *ptr = value. Why is the "destructor" called on ptr? 
[10:50:00] <ezyang> Should raw pointers not be managed? 
[10:51:10] *** Quits: nkoep (nik@moz-3623A9FD.vpn.rwth-aachen.de) (Ping timeout)
[10:52:57] <Heather> dbaupp may you optimize it to one iteration? https://gist.github.com/Heather/7803456
[10:53:03] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[10:53:10] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[10:54:48] <dbaupp> apath.as_str().unwrap().to_owned() ?
[10:55:16] <Heather> dbaupp o_O ?
[10:56:27] <Heather> dbaupp and without apath?
[10:56:39] <dbaupp> not possible
[10:56:42] <dbaupp> I guess
[10:56:51] <Heather> weird :(
[10:57:35] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[10:59:32] *** Quits: thomas001 (thomas@moz-968FA222.informatik.uni-leipzig.de) (Ping timeout)
[10:59:59] <Heather> dbaupp now I can implement pwd coreutil \o/
[11:00:01] <Heather> right?
[11:00:33] *** Quits: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP) (Quit: Leaving.)
[11:01:12] <hansjorg> Anybody seen this before? install.mk:144: *** Aborting install because more than one library matching librustpkg-*.so is present in build tree
[11:01:23] *** Joins: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP)
[11:01:31] <aph> hansjorg: there seem to be some ongoing glitches with the Makefile lately
[11:01:52] <aph> hansjorg: do you have a fresh clone?
[11:02:04] <Heather> I used to build rust today as usual
[11:03:02] <hansjorg> aph: yes, just tried building the nightly ppa (b5bab8)
[11:03:40] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[11:03:43] *** Joins: jaeman (Mibbit@B4104EBB.3CC170B1.1E14B209.IP)
[11:04:45] <hansjorg> so this is on Linux
[11:08:25] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Connection reset by peer)
[11:08:33] <aph> hansjorg: #10753 fixed a similar issue for me, perhaps you can adapt it
[11:08:42] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[11:09:33] *** Joins: nkoep (nik@moz-15EEC9C5.pool.mediaways.net)
[11:10:10] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Connection reset by peer)
[11:10:30] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[11:10:39] <hansjorg> aph: thanks, that looks related
[11:10:44] *** Quits: zmthy (tim@moz-C2881CC3.ecs.vuw.ac.nz) (Quit: leaving)
[11:12:04] *** Joins: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au)
[11:12:41] *** Quits: nkoep (nik@moz-15EEC9C5.pool.mediaways.net) (Ping timeout)
[11:16:48] *** Joins: refold (gman@moz-42D68426.a258.priv.bahnhof.se)
[11:20:43] *** Quits: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP) (Quit: Leaving.)
[11:24:38] <Heather> dbaupp how to prin path
[11:25:52] <Blei> Heather: http://static.rust-lang.org/doc/master/std/path/trait.GenericPath.html#method.display
[11:25:54] <Heather> dbaupp println(ap.as_str().unwrap().to_owned()); ?
[11:26:02] <eddyb> nope
[11:26:30] <eddyb> Heather: does format!("{}", apath) work?
[11:26:52] <eddyb> it's either that or the .display() Blei linked
[11:27:07] *** Joins: nkoep (nik@moz-CDB0BBF2.vpn.rwth-aachen.de)
[11:27:40] <Heather> display displayd nothing :S
[11:28:32] <Heather> eddyb  failed to find an implementation of trait std::fmt::Default for std::path::windows::Path
[11:28:52] *** Quits: Ms2ger (Ms2ger@B7B2FF50.C60A97A6.F9FB0584.IP) (Quit: bbl)
[11:30:04] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[11:30:08] <kimundi> format!("{}", apath.display())
[11:30:18] <Heather> kimundi ...
[11:30:25] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[11:30:54] <Heather> thanks
[11:31:10] <Heather> kimundi it works but still.... a bit mess...
[11:31:22] <kimundi> The name is kinda strange, that is true
[11:32:06] <eddyb> .display().to_str() if you aren't passing it directly to a format!-like macro
[11:36:05] <Heather> dbaupp eddyb kimundi can I check current path other ways than "." ?
[11:36:22] <kimundi> os::getcwd(9 I think
[11:36:50] <kimundi> Might be named slightly differently, best look into the docs
[11:36:54] *** Joins: thomas001 (thomas@moz-968FA222.informatik.uni-leipzig.de)
[11:37:24] <Heather> kimundi is it absolute?
[11:38:34] <kimundi> Uhm, it'S the current working directory, which is a specfific absolute path
[11:38:41] <Heather> ah yes...
[11:38:42] <eddyb> there is no way it could be relative :P
[11:39:11] <Heather> eddyb :D
[11:39:14] <Heather> why
[11:39:15] <Heather> there is
[11:39:30] <Heather> let getcwd() = " Path::init(".") "
[11:39:38] <Heather> e.g. {  }
[11:43:06] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[11:44:09] *** Quits: octurion (octurion@moz-E7EA111C.clients.kiwiirc.com) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[11:58:39] *** Quits: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au) (Ping timeout)
[11:59:46] *** Joins: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au)
[12:06:51] *** Joins: squiddy (squiddy@moz-6D0F7A7.adsl.alicedsl.de)
[12:08:42] *** Quits: lerc (quassel@1025964E.9BA67FF7.788638A4.IP) (Ping timeout)
[12:10:56] *** Joins: jensnockert (jensnocker@moz-635BD7F5.wireless.lu.se)
[12:12:22] *** Quits: jensnockert (jensnocker@moz-635BD7F5.wireless.lu.se) (Input/output error)
[12:13:17] *** Joins: lerc (quassel@moz-289EFA2.telstraclear.net)
[12:13:18] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[12:15:00] *** Joins: jensnockert (jensnocker@moz-635BD7F5.wireless.lu.se)
[12:15:50] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[12:17:40] *** Quits: victorporof (victorporo@30F0F945.70F4578F.79933D60.IP) (Quit: victorporof)
[12:17:58] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[12:18:41] *** Quits: KindOne (KindOne@moz-EF1DB55F.dynamic.ip.windstream.net) (Ping timeout)
[12:20:16] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[12:21:09] *** Joins: Earnestly (earnest@88884C6.A3735F9C.39C00A7A.IP)
[12:22:49] *** Joins: KindOne (KindOne@moz-200B69DA.dynamic.ip.windstream.net)
[12:23:10] *** Joins: clement (clement@moz-D3DDF83F.delafargue.name)
[12:24:15] <clement> hi, I'm trying to follow http://static.rust-lang.org/doc/master/tutorial-rustpkg.html but the rustpkg install github.com/steveklabnik/hello fails
[12:24:17] <clement> http://paste.pound-python.org/show/NmoBtRkO4pKySbjLpE98/
[12:24:19] <clement> the error message seems to tell me github.com/steveklabnik/hello couldn't be interpreted as an url fragment
[12:24:21] <clement> has the syntax changed?
[12:24:33] <eddyb> clement: try making it an URL :P
[12:24:50] <eddyb> by prepending https:// or git://
[12:25:13] <clement> I've tried with https
[12:25:31] <clement> and git
[12:25:35] <clement> still the same error
[12:25:40] *** Joins: tcr (tcr@1021DD2F.1E1F6C0.AF6F698.IP)
[12:25:49] <eddyb> oh, my bad. I wasn't expecting it to work without a protocol anyway
[12:26:13] <clement> (I took the line verbatim from  http://static.rust-lang.org/doc/master/tutorial-rustpkg.html
[12:26:16] <eddyb> I don't know too much about rustpkg other than "it's broken in a few ways"
[12:26:33] <clement> yeah that's what I've been told 
[12:26:46] <eddyb> there's most likely an issue on github for it (if it's not something new)
[12:27:01] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[12:27:20] <clement> I've looked at the rustpkg-related issues
[12:27:33] * Heather cya
[12:27:40] *** Quits: Heather (Heather@19663F6.F53BAACC.9C17E900.IP) (Quit: ~ Trillian - www.trillian.im ~)
[12:27:41] <clement> I'll look again, there's plenty of it
[12:27:57] *** Quits: a__ (a__@moz-56DB9895.nycmny.fios.verizon.net) (Ping timeout)
[12:28:02] *** Quits: havarnov (havarnov@7FCD87A9.7B7BA24D.CB207656.IP) (Ping timeout)
[12:28:04] *** Joins: havarnov (havarnov@7FCD87A9.7B7BA24D.CB207656.IP)
[12:28:21] *** Joins: victorporof (victorporo@30F0F945.70F4578F.79933D60.IP)
[12:30:19] <dbaupp> clement: I've fixed that problem locally by setting TMPDIR to something on the same filesystem
[12:30:33] *** Joins: a__ (a__@moz-56DB9895.nycmny.fios.verizon.net)
[12:30:44] <dbaupp> e.g. `mkdir ~/tmp; TMPDIR=~/tmp rustpkg install ...`
[12:30:54] <dbaupp> (assuming you're working in ~.)
[12:31:54] <dbaupp> clement: it's https://github.com/mozilla/rust/issues/9887 , btw.
[12:32:26] *** Quits: japaric (japaric@FFB1354E.A75B951F.A936879B.IP) (Ping timeout)
[12:33:22] *** Joins: japaric (japaric@FFB1354E.A75B951F.A936879B.IP)
[12:33:47] <clement> oh right my tmpdir is on a different fs
[12:33:51] <clement> thanks :)
[12:34:12] * dbaupp banged his head against that for a while too
[12:34:20] *** Joins: Liothen (liothen@moz-92B99500.org)
[12:35:21] <eddyb> rusti: 'V' as u8
[12:35:22] -rusti- 86u8
[12:35:48] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[12:40:47] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[12:42:30] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[12:44:46] <ChrisMorgan> That one *really* needs to be fixed as a matter of priority. It's tripping a very significant number of people up and making them think rustpkg is fundamentally and completely broken, when it might not be.
[12:45:05] <ChrisMorgan> (I don't know whether or not it is. I haven't tried using it enough.)
[12:45:56] *** Quits: zxcdw (r-a@ACF33729.B543C4DE.3933CC16.IP) (Ping timeout)
[12:45:57] *** Joins: zxcdw (r-a@ACF33729.B543C4DE.3933CC16.IP)
[12:48:31] *** Quits: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au) (Quit: Textual IRC Client: www.textualapp.com)
[12:49:14] *** Joins: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au)
[12:49:58] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[12:50:21] <friggle> acrichto: so when do we get to see your 'do' macro? Just saw this on /r/rust https://github.com/brandonson/evict/blob/master/src/evict/issue.rs#L273
[12:51:20] *** Quits: Sgeo (quassel@moz-D0F30617.dyn.optonline.net) (Connection reset by peer)
[12:54:25] *** Quits: tcr (tcr@1021DD2F.1E1F6C0.AF6F698.IP) (Client exited)
[12:54:47] *** Joins: tcr (tcr@1021DD2F.1E1F6C0.AF6F698.IP)
[12:55:26] *** Quits: clark (Mibbit@moz-C3945F64.dsl.bell.ca) (Quit: http://www.mibbit.com ajax IRC Client)
[12:56:35] *** Quits: tcr (tcr@1021DD2F.1E1F6C0.AF6F698.IP) (Ping timeout)
[12:57:13] *** Quits: taotetek (taotetek@E90CF190.930C8FCA.20F09BA6.IP) (Quit: WeeChat 0.4.2)
[12:59:06] *** Joins: Sorella (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[12:59:41] *** Quits: jensnockert (jensnocker@moz-635BD7F5.wireless.lu.se) (Connection reset by peer)
[13:00:02] *** Joins: jensnockert (jensnocker@moz-635BD7F5.wireless.lu.se)
[13:00:07] *** pmoore is now known as pmoore|lunch
[13:02:02] *** Joins: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP)
[13:08:43] *** Joins: taotetek (taotetek@E90CF190.930C8FCA.20F09BA6.IP)
[13:08:45] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[13:12:35] *** Quits: sigma (sigma@moz-A17EB325.range86-184.btcentralplus.com) (Client exited)
[13:15:09] *** Joins: sigma (sigma@moz-A17EB325.range86-184.btcentralplus.com)
[13:17:27] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[13:19:15] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[13:23:53] *** Joins: Jackneill (Jackneill@moz-53D983DF.pool.digikabel.hu)
[13:25:10] *** Joins: Ms2ger (Ms2ger@moz-950D3C8E.ugent.be)
[13:28:26] *** Quits: Blub\0 (wry@620605B3.71150E1A.237AE2BA.IP) (Ping timeout)
[13:29:10] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[13:29:23] *** Joins: Blub\0 (wry@620605B3.71150E1A.237AE2BA.IP)
[13:36:23] *** Quits: jensnockert (jensnocker@moz-635BD7F5.wireless.lu.se) (Input/output error)
[13:37:25] *** Joins: jvns (bork@moz-DE62990.nyc.res.rr.com)
[13:39:34] *** Joins: canhtak (canhtak@moz-A53E1151.wl.t.ulaval.ca)
[13:40:23] *** Joins: Savago (Savago@D8B9C081.E820043D.D4C04133.IP)
[13:44:25] <mletterle> Morning rust-land!
[13:46:49] <bstrie> the land of the rusting sun
[13:47:21] <Earnestly> Sounds like a good title for a mad-max-esque dystopian novel
[13:48:57] <tiffany> how would that work?
[13:49:21] <Earnestly> Final days of a star, colour of rust
[13:49:25] <tiffany> do you think the iron within aging stars oxidizes? or perhaps a dyson sphere around it, but that wouldn't rust on the exterior, only the exterior where there's atmosphere and water
[13:49:28] <tiffany> oh
[13:49:35] <Blei> the sun has cooled and has been replaced by a metal construction that heats a very limited part of the earth. this construction is now rusting
[13:49:46] <mletterle> I like it
[13:50:04] <bstrie> haha
[13:51:10] <bstrie> SUNRUST, the thrilling new young adult science-fiction novel from the authors of #rust
[13:51:41] *** Joins: AvianFlu (AvianFlu@moz-C1C884AB.nyc.res.rr.com)
[13:52:39] *** Joins: AvianFlu_ (AvianFlu@moz-31F97978.nyc.res.rr.com)
[13:52:50] <Ms2ger> Starring bstrie as a sage
[13:52:52] <Blei> but, but, rust doesn't work on Sparc machines
[13:53:08] <eddyb> bstrie: the K&R of the 21st century :P
[13:53:17] <eddyb> /Asimov
[13:53:22] <Earnestly> heh
[13:53:25] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (Ping timeout)
[13:53:55] *** Quits: AvianFlu (AvianFlu@moz-C1C884AB.nyc.res.rr.com) (Ping timeout)
[13:54:27] <bstrie> "it was a dark and stormy night... but the night was also day"
[13:54:46] <bstrie> "the rust-run sun, sat, looming on the horizing, rusting on the horizon."
[13:54:55] <mletterle> "And something.... somewhere... was oxidizing"
[13:55:10] <Earnestly> We would make terrible authors
[13:55:34] <bstrie> "Marcus Spatulon spat into the spitoon at his feet, a rust-red piece of tobacco"
[13:55:38] <Earnestly> (s/authors/writters/)
[13:55:44] <eddyb> *writers
[13:55:47] <Ms2ger> Clearly bad writters :)
[13:55:57] <Earnestly> Damnit
[13:56:07] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[13:56:13] <eddyb> I have imagination - but don't ask for words or pictures, export is broken
[13:56:15] <mletterle> It would be an interesting experiment to write a tutorial in the style of a story... you could have "The dark stranger, known only as Owned Pointer..."
[13:56:42] <bstrie> now *there's* a dystopia... a world where everyone is uniquely owned
[13:56:50] <Blei> nice
[13:56:53] <bstrie> except for managed people, who are uniquely owned by the government
[13:57:00] <bstrie> I mean
[13:57:03] <taotetek> unless... they're uniquely owned by themselves...? ;)
[13:57:08] <bstrie> The Corporation.
[13:57:08] <sigma> not necessarily by the government
[13:57:16] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[13:57:18] <Blei> and you can borrow people...
[13:57:20] <bstrie> taotetek: no cycles!!! that's madness!!!!
[13:57:43] * bstrie ships taotetek off to the borrowck mines
[13:58:01] <bstrie> where nmatsakis rules with a rusting iron fist
[13:58:03] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[13:58:04] <tiffany> don't forget about stack-allocated people
[13:58:13] <tiffany> everyone below them must die before they can die
[13:58:19] <sigma> depends, they could have an organisation that takes ownership of them but doesn't allow anyone but themselves to use them
[13:59:35] *** Quits: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au) (Ping timeout)
[13:59:42] <Blei> and then there's the raw people. they don't follow the rules, do what they want and die spectacularly with interesting results for everyone involved
[14:00:47] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[14:01:19] <Earnestly> The government couldn't define their behaviour
[14:01:44] <mletterle> http://jvns.ca/blog/2013/12/04/day-37-how-a-keyboard-works/ I love this series, so much.
[14:01:51] <eddyb> where are people garbage collected?
[14:01:55] *** Quits: avsej (avsej@DF1824D5.EFF97412.48F984E6.IP) (Ping timeout)
[14:02:00] <Blei> eddyb: ever heard of soylent?
[14:02:07] <jvns> mletterle: thanks :)
[14:02:26] <Blei> jvns: yeah, great work!
[14:02:26] <mletterle> jvns: keep it up!
[14:02:34] <jvns> it is *so much fun*
[14:02:34] <jvns> as a result of this series, Joel Spolsky just followed me on Twitter. Dying.
[14:02:40] <bstrie> jvns: extrapolating from the past 24 hours, I foresee a bright future for your HN karma score :)
[14:02:46] *** Joins: IRCMonkey29583 (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[14:03:13] <jvns> I think it's contingent on me continuing to write about operating systems :)
[14:03:14] <eddyb> jvns: oh, I've forgotten about you and SLAM/BLAM - I'm still around if you have questions :P
[14:03:26] <btipling> jvns: yeah that's pretty cool
[14:03:44] <jvns> eddyb, sweet! I still need to get up and work on getting my keyboard to work, but I'll ping you
[14:03:57] <bstrie> SLAM/BLAM, thank you ma'am, get on the floor and JAM
[14:04:11] <eddyb> pcmattman: ^ oh dear
[14:04:22] *** Joins: abinader (abinader@D8B9C081.E820043D.D4C04133.IP)
[14:04:38] <btipling> what is HN karma worth anyway
[14:04:50] <eddyb> jvns: haha, I see you mentioned rustic for coding style. it's actually not idiomatic Rust, I've tried to fix that here: https://github.com/eddyb/rustic/commits/refactoring
[14:04:55] <mletterle> what's the exchange rate between HN karma and reddit karma?
[14:05:00] <bstrie> btipling: HN karma is worth the sound of a tree falling in the forest
[14:05:12] <btipling> is someone there or not when it falls
[14:05:35] <bstrie> btipling: yes, but sadly they were crushed :(
[14:05:35] <sigma> I don't think there can be a sensible conversion
[14:05:47] *** Joins: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au)
[14:05:55] <btipling> I've been very contrary on HN when it comes to rust posts
[14:05:57] <btipling> :/
[14:06:16] <jvns> eddyb: neat! my coding style in Rust is currently "a total mess", so anything is an improvement. but I'd be interested to hear why rustic isn't idiomatic rust
[14:07:12] <sigma> I can't remember whether HN is wildly entusiastic of dismissive of rust, all I remember is that their hive mind is worse than reddit's, and that's an impressive achievement
[14:07:42] <eddyb> jvns: well, maybe this commit message and diff explain themselves (it's mostly about naming): https://github.com/eddyb/rustic/commit/a23eeac37c9296d74fa8e768b7f6c970387c6f8c
[14:07:59] <mletterle> I really feel like I should take the plunge and try writing an os one of these days.. I adore this low level shit, so it's kind of surprising to myself that I haven't.. mostly due to lack of time... wish I was just out of high school again.
[14:08:37] <eddyb> jvns: I also want to fix the malloc'd structures in gdt and idt to use ~T instead of that unsafe madness
[14:08:42] <bstrie> sigma: right now it's "cautious enthusiasm". we've done a good job of making sure that people realize that this isn't intended to compete with ruby and javascript, so most of the commentators just don't care :)
[14:08:44] *** Quits: abinader (abinader@D8B9C081.E820043D.D4C04133.IP) (Quit: Fui!)
[14:09:10] <jvns> eddyb, that's helpful, thanks!
[14:09:45] <sigma> bstrie: Ahh yeh, that's why I stopped reading it, they threw a hissy fit when internal iterators were dropped
[14:10:34] <eddyb> jvns: TypesAreUpperCamelCase, STATICS_ARE_ALLCAPS and everything_else_is_snake_case // "idiomatic rust" is probably too fancy of a term for those rules :P
[14:10:55] <jvns> oh, it's like Python! :)
[14:11:04] <Ms2ger> It's like lua, no?
[14:11:22] <jvns> urrr need to get up and go to Hacker School
[14:11:42] * Ms2ger trolls
[14:12:33] <bstrie> I like to imagine everything at Hacker School is prefixed with the word "Hacker", in vague imitation of the Adam West-era batcave
[14:12:54] <eddyb> lua is like LISP - easy to write a working-but-slow-implementation. and barely usable otherwise
[14:12:56] <mletterle> "Holy Hacker Water Fountain!"
[14:12:58] <Ms2ger> Go and get your Hacker Lunch
[14:13:14] <Ms2ger> eddyb, heh, I thought you were talking about rust for a moment :)
[14:13:32] <bstrie> eddyb: I hear luajit is really fast!
[14:13:34] <eddyb> s/slow-impl/slow impl/
[14:13:41] <eddyb> bstrie: that's not easy to write
[14:13:42] <bstrie> and it's super easy to embed
[14:13:45] <bstrie> hell, I've done it
[14:13:57] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[14:14:04] <eddyb> I'm talking about write-full-interpreter-in-one-day
[14:14:14] <bstrie> ah ok
[14:14:25] <bstrie> someone should write a slow implementation of lua in rust!
[14:14:32] <Earnestly> Sounds like early days javascript
[14:14:34] <eddyb> don't we have one or two already?
[14:14:48] <hoelzro> the official Lua is quite fast for an interpreted language
[14:15:07] <bstrie> eddyb: well, yes, if you count "statically linking luajit into a rust program" as a rust implementation of lua :P
[14:15:28] <eddyb> bstrie: maybe it was just some LISPy thing I saw
[14:15:50] <bstrie> someone implemented the lambda calculus in macros
[14:15:57] <Earnestly> eddyb: Greenspun strikes again
[14:16:01] *** Joins: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP)
[14:16:01] *** ChanServ sets mode: +o jdm
[14:16:06] <bstrie> btw, that technically makes them turing complete, keep that under the table :P
[14:16:17] <Earnestly> https://en.wikipedia.org/wiki/Greenspun%27s_tenth_rule
[14:16:26] *** Joins: avsej (avsej@DF1824D5.EFF97412.48F984E6.IP)
[14:16:47] *** Joins: zatnosk (zatnosk@31AE4F7A.F285E7E8.9E52235C.IP)
[14:16:55] *** Quits: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP) (Quit: Leaving.)
[14:18:16] <eddyb> before node.js became popular, I had a C++0x (pre-2010) wrapper around the v8 API that made the interactions so much better (think this["callback"](1, n, 'f', "bar", new Array{a, b, c});)
[14:19:09] <eddyb> and a DSL for writing interfaces with C++ code inside the functions
[14:19:15] *** Quits: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au) (Ping timeout)
[14:19:15] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[14:19:46] <eddyb> the lack of dev time made it rot and it's still shelved
[14:20:30] <eddyb> it was surely easier to embed than all this silly lua stuff, too bad :(
[14:21:05] <eddyb> I might fool around with rustc, libclang, servo and v8 in the future
[14:21:26] <tiffany> it takes a lot more time to write a lua impl than a lisp impl
[14:21:38] <tiffany> unless you mean common lisp
[14:22:12] <eddyb> well, maybe I've stretched that comparison a bit
[14:22:27] <tiffany> I think there is someone somewhere making a lua impl in rust
[14:22:46] <eddyb> the worst part of my LISP attempt was understanding the old document someone showed me
[14:23:05] <diverse> tiffany: how about a Scheme impl? :)
[14:23:22] <tiffany> I don't know how big of a library scheme has
[14:23:32] <eddyb> and convincing him that I was right about the way QUOTE interacts with other things
[14:23:32] <tiffany> if it's lua-sized or smaller, then sure
[14:23:51] *** Quits: havarnov (havarnov@7FCD87A9.7B7BA24D.CB207656.IP) (Ping timeout)
[14:23:52] *** Joins: havarnov (havarnov@7FCD87A9.7B7BA24D.CB207656.IP)
[14:24:06] <tiffany> I wrote a very simple S-expr language before
[14:24:35] <eddyb> Uncaught TypeError: Property '__$911880688$5$__' of object [object Array] is not a function
[14:24:47] <clement> anybody using rustcheck?
[14:24:49] <eddyb> great, now I can't show off my impl
[14:25:34] <eddyb> oh, I had working lambdas, with proper scoping and everything
[14:26:19] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[14:26:57] <eddyb> http://jsfiddle.net/eddyb/yTLym/ fwiw (doesn't run, traceur must be broken or something)
[14:29:05] *** pmoore|lunch is now known as pmoore
[14:29:07] *** Joins: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP)
[14:32:22] <jvns> man now I wish I'd applied to the Rust OPW internship instead of getting scared off by the types and "but I'm not really a systems programmer" :)
[14:32:51] *** Joins: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP)
[14:33:56] <friggle> jvns: there's always next time
[14:36:19] <jvns> true! :)
[14:36:35] <diverse> jvns: can you still go somehow?
[14:37:42] *** Quits: heftig (heftig@moz-C8EBC776.dip0.t-ipconnect.de) (Ping timeout)
[14:38:06] <nmatsakis> ChrisMorgan: ping
[14:38:12] <ChrisMorgan> nmatsakis: pong
[14:38:52] <nmatsakis> ChrisMorgan: so I read over your branch more. The type checking part seems reasonable, but the trans part not so much (this was always broken). 
[14:38:55] *** Quits: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP) (Quit: Leaving.)
[14:39:16] *** Quits: zatnosk (zatnosk@31AE4F7A.F285E7E8.9E52235C.IP) (Connection reset by peer)
[14:39:17] <nmatsakis> ChrisMorgan: I'll create a test that I think does the wrong thing in a bit and send it to you, shoudl be relatively straight-forwrad to correct though
[14:39:42] <ChrisMorgan> nmatsakis: yes, I know it's not correct. (Having it fail to compile does tend to suggest that :P.)
[14:40:01] <nmatsakis> ChrisMorgan: oh, when I built it, I thought it did compile? perhps I am confused.
[14:40:16] <nmatsakis> ChrisMorgan: I didn't try building it recently, I just had a memory of building 
[14:40:17] <ChrisMorgan> *It* compiles, but if you try to actually *use* the stuff, it fails.
[14:40:19] <diverse> nmatsakis: nice read on your kernel writing article
[14:40:26] *** Quits: jvns (bork@moz-DE62990.nyc.res.rr.com) (Ping timeout)
[14:40:26] <ChrisMorgan> i.e. rustc will fail to compile something else.
[14:40:34] <nmatsakis> diverse: I wrote an article on writing kernels?
[14:40:44] <diverse> or nvm
[14:40:55] <nmatsakis> ChrisMorgan: yes I understand. ok, that's not surprising. I was wondering to myself "how does this work?" 
[14:41:08] <diverse> sorry, jvns did
[14:41:12] <nmatsakis> :) no worries
[14:41:17] <nmatsakis> I'm happy to take credit.
[14:41:31] *** Joins: Shaladdle (shaladdle@moz-FDE833F3.wv.cc.cmu.edu)
[14:41:33] <ChrisMorgan> nmatsakis: I gave an example of how it was failing in https://github.com/mozilla/rust/issues/5992#issuecomment-22258296
[14:41:36] <diverse> the blog theme looks so damn similar -_-
[14:41:37] <bstrie> they're both using octopress, it's easy to get confused :P
[14:41:40] <nmatsakis> ChrisMorgan: so, do you want to take a crack at fixing it, do you need some guidance?
[14:41:48] <nmatsakis> diverse: bstrie: I've been meaning to customize that for oh so long
[14:42:00] <eddyb> tiffany: bah, I give up on trying to fix traceur-compiler, I swear it was working before :P
[14:42:12] * ChrisMorgan made his own theme for http://chrismorgan.info/, now he just needs to start posting Rust
[14:42:17] <nmatsakis> ChrisMorgan: it's probably not so hard, I might be able to do it, if you wanted -- might be helpful to rebase
[14:42:41] *** Joins: cubic (cubic@moz-80241A3A.mc.videotron.ca)
[14:42:47] <nmatsakis> ChrisMorgan: but I'm also happy (perhaps happier?) to advise
[14:43:33] <ChrisMorgan> nmatsakis: I'd love to be *able* to fix it, but I suspect I don't have enough basic knowledge to start with just at present and I don't have enough spare time to dedicate to figuring it out myself. Guidance would be good (probably optimal), having it done would also be fine—I could learn from that too.
[14:43:47] <nmatsakis> ChrisMorgan: do you have time to rebase/merge?
[14:43:57] *** Joins: jvns (bork@moz-DE62990.nyc.res.rr.com)
[14:44:05] <ChrisMorgan> Not just at present, but tomorrow I probably will.
[14:44:20] * ChrisMorgan should finish off what he's doing and go to bed
[14:44:22] *** Joins: zatnosk (zatnosk@31AE4F7A.F285E7E8.9E52235C.IP)
[14:45:01] <diverse> jvns: nice read on your kernel writing expedition
[14:45:07] <nmatsakis> ChrisMorgan: I didn't mean NOW NOW NOW, tomorrow is fine :)
[14:45:16] <nmatsakis> diverse: link?
[14:45:20] <nmatsakis> sounds interesting.
[14:45:24] <diverse> http://jvns.ca/blog/2013/12/03/day-36-programming-without-malloc/
[14:45:38] <jvns> diverse: thanks! it's super fun =)
[14:45:47] * nmatsakis really should remember to check reddit.
[14:45:53] * jvns couldn't have done it without #rust
[14:46:16] *** Joins: heftig (heftig@moz-9C88EA9D.dip0.t-ipconnect.de)
[14:46:22] <sbalmos> We're going to start needing a Rust Kernel Leaderboard or counter somewhere. :P
[14:46:32] <bstrie> jvns: you know, this is how linux started... all I'm saying is, please start thinking of names that aren't as terrible as "linux"
[14:46:39] <bstrie> you know, just in case
[14:46:45] <mletterle> runux
[14:46:55] <nmatsakis> bstrie: ok, dumb question, but I can't immediately find the answer -- is it possible to get an RSS feed for /r/rust?
[14:47:12] <sbalmos> Rustic wouldn't be bad, save for the "old and decrepit" connotation. :D
[14:47:25] <bstrie> nmatsakis: http://www.reddit.com/r/rust/.rss
[14:47:48] <nmatsakis> bstrie: thanks.
[14:47:48] *** Quits: Soft (soft@moz-EC8D39F.yok.fi) (Ping timeout)
[14:48:01] <eddyb> bstrie: pcmattman already took "rustic" :P
[14:48:21] <bstrie> eddyb: no *I* took rustic, back in early 2012, for my not-a-repl :)
[14:48:21] *** Quits: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP) (Ping timeout)
[14:48:28] <sbalmos> LOL
[14:48:31] <eddyb> bstrie: oh, I didn't know :/
[14:48:42] <bstrie> eddyb: behold! https://github.com/bstrie/rust-rustic
[14:48:43] <sbalmos> Oh, and nothing with "OS" at the end. Too boring.
[14:48:45] * ChrisMorgan took rustic as a noun for people who write rust
[14:48:48] <jvns> my OS will probably be called rainbow-fun-times or something
[14:48:59] <bstrie> sbalmos: we've already established that "RustOS" sounds too much like a snack food
[14:49:05] <ChrisMorgan> Like mentos.
[14:49:08] <sbalmos> ChrisMorgan: Ooo. What about a Rusty?
[14:49:13] <eddyb> and we can always expand on Project Pedigree ("New Horizons" as a code name. not sure if I'll ever use that though)
[14:49:20] <jvns> WhatAmIEvenDoingOS
[14:49:27] <eddyb> DogeOS
[14:49:36] <ChrisMorgan> sbalmos: rustic and rustacean are my current favourites.
[14:49:38] <mletterle> SoMuchOSManyRust
[14:49:47] <sbalmos> bstrie: Mmmm... If I stick rustos in Diet Pepsi, does it spark? :)
[14:49:48] <mletterle> +1 for rustacean
[14:49:55] *** Joins: vky (chatzilla@moz-4F2E17BF.dsl.dynamic.sonic.net)
[14:50:00] <jvns> ooo rustacean is extremely good
[14:50:08] <bstrie> ChrisMorgan: I really love "rustacean" as the noun to refer to rust users
[14:50:28] <bstrie> it's probably the best one
[14:50:29] <sbalmos> I once had Ensemble for my C# kernel (going with the microkernel many-parts idea). But then I remembered about GeoWorks and a few others.
[14:50:40] <ChrisMorgan> Can't remember who it was that was suggesting it, but it certainly seems to be getting a positive response when it's mentioned.
[14:50:46] *** Quits: Shaladdle (shaladdle@moz-FDE833F3.wv.cc.cmu.edu) (Quit: Leaving)
[14:50:59] <sbalmos> We're certainly molting our language shells frequently. :)
[14:51:18] <friggle> rust programmers are rustlers
[14:51:21] <friggle> writing rustic code
[14:51:29] <bstrie> rustler is okay
[14:51:33] <bstrie> not as hilarious as rustacean
[14:51:35] <eddyb> like hustler?
[14:51:39] <sbalmos> heh
[14:51:51] <sbalmos> Shut up and leave me alone! I'm rusting!
[14:51:57] <bstrie> rustic is clearly the correct adjective for idiomatic rust code
[14:52:03] <bstrie> nobody contends this
[14:52:21] <ChrisMorgan> We now need to develop our own group humour. The tutorial should talk about crustaceans and such. Python talks about silly walks and dead parrots and such, we should talk about things with "rust" in them.
[14:52:26] <sbalmos> bstrie: Can I be a token contender, to maintain balance?
[14:52:29] <eddyb> relevant xkcd http://xkcd.com/303/
[14:52:32] <friggle> bstrie: start a thread on the mailing list and I'm sure we could find someone to contest it :)
[14:52:34] *** Joins: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP)
[14:52:40] * ChrisMorgan wishes it was closer to April 1, which would be the best day to make such a thread on the mailing list.
[14:52:41] <sbalmos> friggle: I protest!
[14:52:57] *** Quits: vky (chatzilla@moz-4F2E17BF.dsl.dynamic.sonic.net) (Ping timeout)
[14:53:16] <mletterle> rustacean makes me think of http://cdn.staticneo.com/w/spongebob/3/3c/Mr._Krabs.gif
[14:54:05] <ChrisMorgan> It also suggests to me a possible direction for a mascot. This certainly needs further consideration and deliberation.
[14:54:11] <eddyb> rusty sword fights while rustc is compiling
[14:54:26] <bstrie> mletterle: it makes me think of http://www.kirbysrainbowresort.net/games/superstar/metaknight/c14.gif
[14:54:33] <eddyb> ChrisMorgan: steampunk-ish rustacean?
[14:54:47] <eddyb> just glue some gears on it
[14:54:57] <mletterle> http://www.puzzlexpress.com/cgi-bin/query.cgi?query=*rust*&B1=GO
[14:55:13] <ChrisMorgan> It needs quite a lot of simplicity of the very-tricky-to-get-right variety. Go's gopher is a really good example of a well-done mascot.
[14:55:27] <diverse> bstrie: actually when the Linux kernel got started, Linus originally called it "freax" but it was until he friend that he uploads he kernel to decided to rename it "Linux" and then that name caught on.
[14:55:37] <kimundi> just slap two googly eyes on the bors log, problem solved :P
[14:55:41] <kimundi> logo*
[14:55:50] <diverse> *his kernel
[14:56:06] <ChrisMorgan> kimundi: we need plush toys. Plush toys of *that*?
[14:56:07] <bstrie> ChrisMorgan: I don't think we need a mascot :)
[14:56:14] <mletterle> eh.. the bindgen program could be called CRusty....
[14:56:16] <ChrisMorgan> Not necessarily, but it can be nice.
[14:56:30] <bstrie> even a mediocre mascot is worse than no mascot
[14:56:38] <diverse> bstrie: "freax" being pronounced as "freaks" so it could have been worst
[14:56:41] <friggle> bstrie: see Duke, the Java mascot...
[14:56:47] <ChrisMorgan> bstrie: certainly. It's got to be done right or not at all.
[14:56:51] <bstrie> friggle: yes, that's what springs most prominently to mind
[14:57:27] <kimundi> ChrisMorgan: Sure, why not? If I've learned anything from being in a few fandoms, then that people can turn any character into a cute plush toy :P
[14:57:31] *** Quits: jvns (bork@moz-DE62990.nyc.res.rr.com) (Ping timeout)
[14:59:32] <ChrisMorgan> kimundi: it helps if it's adorable and people want it. Why, plush toys could end up funding the entire Rust development team if we do it correctly!
[15:00:25] <bstrie> kimundi: surely that's not the only thing you've learned from being in a few fandoms
[15:00:43] <sbalmos> Nah, the mascot can be Dr. Zoidberg
[15:00:51] <sbalmos> He's a (c)rustacean
[15:01:02] <kimundi> We could also just plagiarize this: http://www.battlegrip.com/wp-content/uploads/2012/10/rusty-430x243.jpg :P
[15:01:11] <ChrisMorgan> sbalmos: that'd be setting us up for trouble.
[15:01:27] <diverse> is rustacean the standard name for rust programmer?
[15:01:44] <ChrisMorgan> kimundi: don't want to be using an existing thing, or people won't buy *our* mascot!
[15:01:45] <sbalmos> ChrisMorgan: fine, then find a generic plush toy lobster
[15:01:45] <bstrie> diverse: assume so, yes
[15:01:48] <sbalmos> ;)
[15:01:55] <Blei> fun, adding logging stops the deadlock
[15:01:59] <ChrisMorgan> diverse: it seems to be the most popular one at present
[15:02:14] <ChrisMorgan> Blei: ah, the beloved heisenbug.
[15:02:33] <Blei> how about rustafari
[15:02:38] <eddyb> hehe
[15:02:40] *** Quits: sigma (sigma@moz-A17EB325.range86-184.btcentralplus.com) (Client exited)
[15:03:39] *** Quits: canhtak (canhtak@moz-A53E1151.wl.t.ulaval.ca) (Quit: canhtak)
[15:04:20] *** Joins: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP)
[15:04:33] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[15:05:02] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[15:05:15] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[15:05:25] *** Joins: sigma (sigma@moz-A17EB325.range86-184.btcentralplus.com)
[15:05:34] *** Parts: sigma (sigma@moz-A17EB325.range86-184.btcentralplus.com) ()
[15:06:18] *** Quits: Ms2ger (Ms2ger@moz-950D3C8E.ugent.be) (Ping timeout)
[15:08:05] *** Joins: mihneadb (mihneadb@7ABA079D.AAE9ECAD.6A4F8DA2.IP)
[15:08:56] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[15:09:12] *** Quits: avsej (avsej@DF1824D5.EFF97412.48F984E6.IP) (Client exited)
[15:09:46] *** Joins: Ms2ger (Ms2ger@moz-47F94DD0.ugent.be)
[15:09:50] *** Quits: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP) (Ping timeout)
[15:10:25] <mletterle> Why not Rust? (\/) (o,,,o) (\/)
[15:11:16] <myname> :D
[15:11:45] *** Joins: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP)
[15:11:45] *** ChanServ sets mode: +o jdm
[15:12:03] <diverse> In Rust we Trust
[15:12:21] *** Joins: lfox (lfox@moz-89EEE1BF.nyc.res.rr.com)
[15:12:48] *** Joins: canhtak (canhtak@moz-A53E1151.wl.t.ulaval.ca)
[15:13:23] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[15:13:35] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[15:14:51] <Blei> hmm, ok. at the start of the application i start a series of 12 tasks to fetch some pics from the internet concurrently. and then after a random time (long after the tasks should have finished), they finish for real
[15:14:52] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[15:15:13] <Blei> (assuming that's what those 12 messages "running join task" at the same time mean)
[15:15:33] <Blei> without logging, this sometimes freezes the application, with logging, it doesn't
[15:16:54] *** Joins: abinader (abinader@D8B9C081.E820043D.D4C04133.IP)
[15:18:23] *** Joins: jstevans (Instantbir@A72FB004.8239D6FF.DDE5D3F6.IP)
[15:20:04] *** jorendorff_away is now known as jorendorff
[15:20:04] <ChrisMorgan> mletterle: we don't want to give the impression of being crabby.
[15:20:10] *** Joins: vky (chatzilla@moz-4F2E17BF.dsl.dynamic.sonic.net)
[15:20:26] <mletterle> *bah dum tiss*
[15:20:54] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Ping timeout)
[15:21:14] *** Joins: mib_slfspm (Mibbit@moz-E2BF7D1B.nycmny.fios.verizon.net)
[15:23:16] *** Quits: AvianFlu_ (AvianFlu@moz-31F97978.nyc.res.rr.com) (Input/output error)
[15:24:54] *** Joins: mib_6i9ygi (Mibbit@804A9EE5.D169D4CE.2B03386C.IP)
[15:25:18] *** Joins: docbrown (docbrown@5CE9D448.F0B9EFB2.7F8758CE.IP)
[15:25:23] *** Joins: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au)
[15:25:26] *** Joins: AvianFlu (AvianFlu@moz-31F97978.nyc.res.rr.com)
[15:27:26] *** Quits: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au) (Ping timeout)
[15:28:10] *** Joins: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com)
[15:30:54] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[15:31:00] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[15:31:00] *** ChanServ sets mode: +ao dherman dherman
[15:32:02] *** Quits: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp) (Ping timeout)
[15:32:19] *** Joins: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp)
[15:32:49] *** Quits: peterdn (chatzilla@moz-5EB9CC81.as13285.net) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[15:33:52] *** Quits: mib_6i9ygi (Mibbit@804A9EE5.D169D4CE.2B03386C.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:36:13] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[15:37:19] *** Joins: jvns (bork@87D98E32.4046EB22.428F94DD.IP)
[15:38:02] <diverse> I thought `rusties` was the term
[15:38:48] *** Joins: peterdn (chatzilla@moz-5EB9CC81.as13285.net)
[15:38:53] *** Quits: thomas001 (thomas@moz-968FA222.informatik.uni-leipzig.de) (Ping timeout)
[15:39:23] *** Quits: jstevans (Instantbir@A72FB004.8239D6FF.DDE5D3F6.IP) (Ping timeout)
[15:39:36] <diverse> lets see how long this rustc compilation will go
[15:39:42] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[15:40:36] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[15:41:22] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[15:42:42] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[15:42:45] *** Joins: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au)
[15:43:48] <Ms2ger> Apparently calling an extern C variadic function without telling rust it's variadic is no good
[15:44:43] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[15:46:44] *** Quits: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au) (Ping timeout)
[15:48:14] *** Quits: tav (tav@moz-4D8B7B3E.range86-185.btcentralplus.com) (Quit: tav)
[15:48:27] *** Joins: thomas001 (thomas@moz-968FA222.informatik.uni-leipzig.de)
[15:49:25] *** Joins: jstevans (Instantbir@71036808.C8A19C38.DDE5D3F6.IP)
[15:54:08] *** Quits: KindOne (KindOne@moz-200B69DA.dynamic.ip.windstream.net) (Ping timeout)
[15:54:59] *** Quits: mihneadb (mihneadb@7ABA079D.AAE9ECAD.6A4F8DA2.IP) (Quit: Bye)
[15:54:59] *** Joins: jvshahid (jvshahid@BE83DFD.50866E69.CA2DF2C0.IP)
[15:57:05] *** Quits: mib_slfspm (Mibbit@moz-E2BF7D1B.nycmny.fios.verizon.net) (Quit: http://www.mibbit.com ajax IRC Client)
[15:57:14] *** Quits: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP) (Quit: Lost terminal)
[15:57:46] *** Quits: vky (chatzilla@moz-4F2E17BF.dsl.dynamic.sonic.net) (Quit: ChatZilla 0.9.90.1 [Firefox 26.0/20131125215016])
[15:57:58] *** Joins: KindOne (KindOne@moz-B764F4D3.dynamic.ip.windstream.net)
[15:58:01] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[15:59:19] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[16:00:04] *** Joins: lpy (lpy@12172131.F09091A8.1348A864.IP)
[16:00:37] *** pmoore is now known as pmoore|dinner
[16:02:19] *** Joins: feng (Mibbit@523C255C.7A85645C.C7DB8B78.IP)
[16:02:46] *** Quits: yota (sdouche@moz-7D878FB8.securactive.net) (Quit: Ex-Chat)
[16:02:54] *** Joins: yota (sdouche@moz-7D878FB8.securactive.net)
[16:03:06] *** Quits: Blei (philipp@moz-B2F9E4BD.cust.bluewin.ch) (Quit: WeeChat 0.4.2)
[16:04:01] *** Quits: Jackneill (Jackneill@moz-53D983DF.pool.digikabel.hu) (Quit: Leaving)
[16:04:07] *** Joins: jackneill (jackneill@moz-53D983DF.pool.digikabel.hu)
[16:04:14] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[16:05:32] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[16:07:17] *** Joins: telotortium (rmi1@moz-C8F8CE6.hsd1.ca.comcast.net)
[16:07:53] *** Joins: ianj (ianjneu@moz-7140CF01.ccs.neu.edu)
[16:08:03] *** Joins: Blei (philipp@moz-B2F9E4BD.cust.bluewin.ch)
[16:08:15] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[16:08:38] *** Joins: skade (skade@30BBD5E6.505237C9.CAE22B62.IP)
[16:10:48] *** Joins: mmalecki_ (maciej@DE8E8A22.9EBA3CD1.D6573861.IP)
[16:10:49] *** Quits: mmalecki_ (maciej@DE8E8A22.9EBA3CD1.D6573861.IP) (Quit: mmalecki_)
[16:10:55] *** Quits: mmalecki (maciej@70E57F0F.145A5529.3F457047.IP) (Quit: leaving)
[16:10:58] *** Joins: mmalecki (maciej@DE8E8A22.9EBA3CD1.D6573861.IP)
[16:11:36] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[16:13:41] <jvns> how do I find out the size of a vector in Rust?
[16:14:29] <ChrisMorgan> jvns: vec.len()
[16:14:44] <jvns> thanks!
[16:15:12] <jvns> (is there any way to find all the methods available on vec without hunting through all the traits?)
[16:15:24] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Connection reset by peer)
[16:15:39] <jvns> hmm it says " error: type `&'static [u8]` does not implement any method in scope named `len`"
[16:15:48] <jvns> oh right I don't actually have std
[16:15:50] <eddyb> jvns: are you free-standing? (no stdlib)
[16:15:57] <jvns> eddyb: yup :)
[16:16:09] <bstrie> jvns: assuming that we don't have any method names longer than ten characters, you could write a program to generate all possible method names and see which ones compile
[16:16:33] <jvns> bstrie: =)
[16:16:34] <eddyb> hehe, yeah. strcat didn't like using traits to add methods to built-in types (you can't just impl them without a trait) - so in rust-core there's vec::len(v)
[16:16:54] <eddyb> jvns: or are you not using rust-core either?
[16:16:57] <bstrie> gross
[16:17:02] <jvns> I'm using rust-core
[16:17:26] <eddyb> how did you get it to work without butchering it?
[16:17:30] *** Quits: Ms2ger (Ms2ger@moz-47F94DD0.ugent.be) (Quit: bbl)
[16:18:00] <eddyb> my local version has #[cfg(pthread)] for two modules, so I can link without having pthread_* functions
[16:18:12] *** Quits: brylie (quassel@moz-E27796EB.hsd1.or.comcast.net) (Input/output error)
[16:18:25] <eddyb> 0x8453 [12339]16 = I16TypeUnknownValue // eeeeeeeh I hate this
[16:19:04] *** Joins: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net)
[16:19:04] *** ChanServ sets mode: +ao dherman dherman
[16:19:08] *** Quits: abinader (abinader@D8B9C081.E820043D.D4C04133.IP) (Quit: Fui!)
[16:19:21] <jvns> hmm rust-core just worked for me 
[16:19:40] <eddyb> my fault for writing an emulator that understands undefined values
[16:19:52] <jvns> I didn't have to do anything with pthreads
[16:19:55] <eddyb> jvns: latest master?
[16:20:04] <eddyb> (for rust-core, that is)
[16:20:05] <jvns> from yesterday at least
[16:20:21] <jvns> man I don't understand Rust imports
[16:20:28] <jvns> "unresolved name `super::core::vec::len`"
[16:20:31] <eddyb> are you compiling to .bc and then running clang or something?
[16:20:47] <eddyb> jvns: super is like ".." in paths, you rarely want it
[16:21:00] <jvns> I needed to use super:: elsewhere
[16:21:08] <eddyb> why not absolute?
[16:21:18] <Blei> it's great for test mods
[16:21:30] <jvns> it doesn't work without super:: either, though
[16:21:35] <Blei> jvns: try `::core::vec::len`
[16:21:37] <diverse> eddyb: you mean ".." leads to the parent directory, like in unix?
[16:21:38] *** Joins: tcr (tcr@moz-C949D37.mycingular.net)
[16:21:42] <jvns> eddyb: I'm basically doing whatever rustboot does
[16:21:49] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[16:21:51] <eddyb> jvns: does rustboot use rust-core?
[16:21:55] <Blei> `::foo` starts at the root module
[16:21:58] <jvns> eddyb: nope. 
[16:22:08] <eddyb> did you replace zero.rs with rust-core?
[16:22:09] <Blei> `foo` is relative to the current module
[16:22:15] <jvns> yeah I removed zero.rs
[16:22:21] <kimundi> jvns: Try to visualize how your module tree looks like, then it's to see hwo the path should look like
[16:22:37] *** Joins: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP)
[16:22:37] *** ChanServ sets mode: +o jdm
[16:22:51] <Blei> i think it's confusing that use statements use different rules than when using module paths in code
[16:22:52] *** Quits: mmalecki (maciej@DE8E8A22.9EBA3CD1.D6573861.IP) (Quit: leaving)
[16:22:53] <jvns> so "use ::core::vec;" doesn't work
[16:23:01] <Blei> yeah
[16:23:02] <eddyb> jvns: what Blei said. for `use`, ::foo becomes foo and foo becomes self::foo
[16:23:10] <Blei> use is always starting from the root module
[16:23:15] <eddyb> that would be `use core::vec`
[16:23:15] <Blei> code: always relative
[16:23:44] <Blei> `use core::vec::len;` vs `::core::vec::len`
[16:23:47] *** Joins: mmalecki (maciej@DE8E8A22.9EBA3CD1.D6573861.IP)
[16:23:47] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[16:23:52] <eddyb> diverse: not only unix, but yes
[16:24:02] <jvns> ah ha! "unresolved import: there is no `len` in `core::vec`"
[16:24:07] <Blei> and most of the time you're writing small one-file scripts where the two concepts are the same
[16:24:09] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[16:24:12] <jvns> better.
[16:24:15] <diverse> eddyb: well, originally in unix, but yeah windows adopted it.
[16:24:18] <eddyb> jvns: my bad then :/. you have to read the source
[16:24:21] *** Quits: victorporof (victorporo@30F0F945.70F4578F.79933D60.IP) (Quit: victorporof)
[16:24:25] <Blei> so you get confused a lot when copy pasting your code doesn't work
[16:24:41] <jvns> so there's a len() in core::vec inside "impl<T, A: Allocator> Container for Vec<T, A> {"
[16:24:44] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[16:25:02] <jvns> that sounds like I should be able to use vec.len() to me
[16:25:06] <eddyb> jvns: Vec<T, A> is the dynamic vector
[16:25:13] <jvns> what's a dynamic vector?
[16:25:29] <diverse> ~[T]
[16:25:33] <eddyb> diverse: no
[16:25:55] <eddyb> jvns: Vec is growable
[16:26:00] <Blei> well, ~[T] is a dynamic vector :3, just not Vec<T>
[16:26:00] <eddyb> it should have .push() and .pop()
[16:26:11] <jvns> so I'm trying to find out the length of a static vector
[16:26:21] <eddyb> ~[T] is not growable in rust-core, and I doubt it has any methods at all
[16:26:26] <eddyb> jvns: yeah, that's a slice
[16:26:35] <eddyb> oh, right, look in core::slice
[16:26:35] *** Joins: maxiepoo_ (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[16:26:50] * eddyb gets confused by strcat's layout
[16:26:55] <diverse> ~[T] is going away anyway, I thought I point out an old example, but it was wrong
[16:27:21] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[16:27:23] * jvns can't make anything of this
[16:27:34] <diverse> jvns: forget what I said
[16:27:52] <jvns> it's okay I guess
[16:28:01] <jvns> I think the length is 128.  I can just write 128 :)
[16:28:01] <docbrown> diverse: what's it being replaced by?
[16:28:04] <eddyb> jvns: core::slice either adds a len method for &[T] or it has a len(&[T]) static function
[16:28:32] <jvns> eddyb: I can't get either one to work
[16:28:36] <eddyb> diverse: one proposal (that I like) is to make ~[T] and even *[T] use the same representation as &[T], and have Vec<T> be growable
[16:29:07] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[16:29:40] *** Quits: tcr (tcr@moz-C949D37.mycingular.net) (Client exited)
[16:29:45] <eddyb> then you can go from ~[T] to Vec<T>, "thawing" the length (so you can push/pop, etc.), and back again to ~[T], "freezing" the length
[16:30:07] *** pmoore|dinner is now known as pmoore
[16:30:10] *** Joins: tcr (tcr@moz-C949D37.mycingular.net)
[16:30:22] <eddyb> jvns: https://github.com/thestinger/rust-core/blob/master/core/slice.rs#L119-L126
[16:30:42] *** Joins: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au)
[16:30:48] <eddyb> so if you use core::slice; then you should have a .len() method on all slices
[16:30:57] <jvns> oh I see
[16:30:59] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[16:31:01] <jvns> I will try that!
[16:31:20] <sbalmos> Funny to hear it called a slice, even if it's a full-length slice
[16:31:32] *** Quits: Blei (philipp@moz-B2F9E4BD.cust.bluewin.ch) (Quit: WeeChat 0.4.2)
[16:31:53] *** Quits: tcr (tcr@moz-C949D37.mycingular.net) (Ping timeout)
[16:32:22] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[16:32:52] <diverse> docbrown: talk with nmatsakis about DST/SST to find out more about it
[16:32:55] <eddyb> https://github.com/thestinger/rust-core/blob/master/core/str.rs#L14-L20 hmm, this should use as_bytes(self).len() - and rustic should *then* use .len() instead of manual transmutes :P
[16:36:02] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[16:36:25] <jvns> hmm when I "use core::slice" I still don't have a .len() method on my slice
[16:36:34] <jvns> "type `&'static [u8]` does not implement any method in scope named `len`"
[16:37:17] <diverse> wait wouldn't that be a free standing function?
[16:37:29] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[16:38:39] <diverse> nvm
[16:39:25] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:39:42] *** Joins: AutomatedTester (David@moz-DB4A9C19.scl3.mozilla.com)
[16:40:49] <diverse> jvns: is it typed `Slice`?
[16:41:08] <jvns> diverse: it's a &'static [u8]
[16:41:15] <SiegeLord> Did Path::init change again?
[16:41:33] <diverse> SiegeLord: yes, we went back to *::new()
[16:41:44] *** Quits: smodo (ford_p@moz-CCE57F2F.eblcom.ch) (Ping timeout)
[16:41:45] <SiegeLord> Ok
[16:42:02] *** Joins: smodo (ford_p@moz-CCE57F2F.eblcom.ch)
[16:42:06] <diverse> in preparation for the box operator
[16:42:07] <benh> jvns: you might need to `use` the specific trait that puts len on the slice, I dunno
[16:42:40] *** Quits: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au) (Ping timeout)
[16:42:53] <benh> which is apparently core::container::Container?
[16:43:06] <jvns> benh: thanks! that worked
[16:43:12] *** Joins: Blei (philipp@moz-B2F9E4BD.cust.bluewin.ch)
[16:43:23] <jvns> man that was way more obscure than I expected
[16:43:25] <benh> I'm glad, I haven't used rust-core before :)
[16:44:04] <benh> The problem is basically that you (and rust-core, and the std lib) can't do trait-less impls on built-in types, so whatever they do, it involves a trait that has to be explicitly in scope for its methods to be found
[16:44:16] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[16:44:37] <benh> the stdlib gets around that by injecting the prelude into every bit of user code, which `use`'s all the traits for defaultish operations
[16:44:45] *** Quits: smodo (ford_p@moz-CCE57F2F.eblcom.ch) (Ping timeout)
[16:44:45] *** Quits: dario (dario@moz-8E3254C2.informatik.uni-erlangen.de) (Ping timeout)
[16:45:16] *** Joins: dario (dario@moz-8E3254C2.informatik.uni-erlangen.de)
[16:45:24] <strcat> benh: rust-core uses free functions instead of pointless traits
[16:46:04] <strcat> although I'll turn them into methods when we have methods on built-ins via lang items as we should
[16:47:08] <Blei> so, who can I bug about a SharedChan/scheduler issue?
[16:47:13] *** Joins: smodo (ford_p@moz-CCE57F2F.eblcom.ch)
[16:47:26] <diverse> strcat: methods as built-ins?
[16:47:40] <strcat> no
[16:47:41] <benh> on built-ins, like slices
[16:47:52] *** Quits: Ferreus (ferreus@moz-459C6CFC.dip0.t-ipconnect.de) (Ping timeout)
[16:48:12] *** Quits: fabiand (fabiand@moz-7C0869F0.adsl.alicedsl.de) (Quit: Verlassend)
[16:48:35] <diverse> oh I see
[16:48:37] <bstrie> Blei: brson, perhaps
[16:49:16] <Blei> bstrie: thanks, will do
[16:49:17] <diverse> strcat: wouldn't you use traits for that?
[16:49:24] <strcat> no, that's the point
[16:49:30] <strcat> making useless traits is bad
[16:49:57] <strcat> makes the documentation unreadable for starters
[16:50:30] <bstrie> diverse: right now it's not possible to do something like `impl ~str {` because, as far as the compiler is concerned, the ~str type isn't defined there. so you have to have a useless StrUtil trait and then do `impl StrUtil for ~str {`
[16:50:44] *** Joins: jmbto (jmbto@moz-FE174E29.fbx.proxad.net)
[16:51:11] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[16:51:12] <benh> strcat: How do you envision lang items hooking into that?
[16:51:16] <diverse> bstrie: gotcha
[16:51:27] <benh> [#lang="pretend this mod defines &str"] mod str_utils;?
[16:51:31] <bstrie> I imagine it would just say "hey compiler, screw coherence, presume that this type is defined in this module"
[16:51:32] <benh> #[
[16:51:34] <strcat> benh: not modules
[16:51:37] <strcat> types
[16:51:51] <benh> that seems more complicated!
[16:52:08] <strcat> #[lang = "slice"] struct Slice<T> { data: *T, length: uint } impl<T> Slice<T> { ... } impl<T: Foo> Slice<T> { ... }
[16:52:09] <benh> so your slice<t> would directly alias &[t]?
[16:52:20] <strcat> &[T] would desugar into it
[16:52:29] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[16:52:41] <strcat> so yes, I guess you could say alias
[16:52:46] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[16:52:48] <diverse> bstrie: doing it that way would get rid of a lot of stuff from the stdlib
[16:52:55] *** Joins: victorporof (victorporo@FB8E2A00.483E5FE1.9B1E38F4.IP)
[16:53:05] <bstrie> would get rid of a lot of one-off empty traits, yeah :)
[16:53:23] <diverse> \o/
[16:53:25] <bstrie> at least from the str, vec, and numeric modules
[16:53:49] *** Joins: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net)
[16:53:49] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[16:54:33] *** Joins: vmx (vmx@moz-BC9DF2CD.pools.arcor-ip.net)
[16:55:25] *** Quits: maxiepoo_ (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo_)
[16:55:28] <diverse> anyone want to see the time it took for me to compile from git master?
[16:55:46] <strcat> if you compiled all of LLVM it's not very meaningful
[16:56:09] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[16:56:09] *** ChanServ sets mode: +ao brson brson
[16:56:09] <bstrie> diverse: did you compile llvm in parallel? if not, you wasted a lot of time :P
[16:56:11] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: brson)
[16:56:27] <diverse> I don't know if I did, probably not.
[16:56:28] *** Joins: brson (brson@6A848D32.C1B840DD.76F66111.IP)
[16:56:28] *** ChanServ sets mode: +ao brson brson
[16:56:45] <diverse> is there a special flag I could use?
[16:57:28] <strcat> you're not going to have to build all of LLVM again so it doesn't really matter
[16:57:28] <jvns> if I'm trying to index into a vector (x[var]), should it matter what the type of 'var' is?
[16:57:34] <strcat> you can pass make -j# to set the # of jobs
[16:57:47] <jvns> I'm encountering a mysterious bug and I don't know what to make of it
[16:57:57] <strcat> jvns: it should be a uint, although other types are currently allowed
[16:58:00] <strcat> but they shouldn't be
[16:58:05] *** Quits: thomas001 (thomas@moz-968FA222.informatik.uni-leipzig.de) (Ping timeout)
[16:58:07] *** Joins: alan (alan@moz-FE02DD30.sat6.rackspace.com)
[16:58:18] <jvns> (I'm pretty sure var = 2, and x[2] = what I want, but x[var] is acting wrong)
[16:58:34] <jvns> but maybe I'm just going insane.
[16:58:44] <bstrie> strcat: I don't see the harm in allowing indexing via types that are <= uintptr
[16:58:51] <diverse> strcat: in MAKEFLAGS? Because I already set mine with -j9
[16:59:01] <strcat> bstrie: it allows signed integers and doesn't do what people expect
[16:59:18] <strcat> and it lets vectors do something library types are never going to be able to do
[16:59:24] <bstrie> strcat: I mean u8 and u16
[16:59:38] *** Joins: Soft (soft@moz-EC8D39F.yok.fi)
[16:59:43] <strcat> diverse: well if MAKEFLAGS is actually exported as an env variable in the environment you ran make
[16:59:55] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[16:59:58] <diverse> in my build system it does
[17:00:36] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[17:00:43] <strcat> next time you pull and build it's likely not going to need to build LLVM again
[17:00:45] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[17:01:06] <diverse> real 24m44.141s, user 47m57.942s, sys 1m19.475s
[17:01:10] <strcat> building a stage of rust takes ~3-4 minutes, LLVM takes a lot longer
[17:01:41] <eddyb> assuming you have the free RAM so it doesn't start swapping
[17:01:42] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[17:01:58] <eddyb> I'm sorry I only shaved 200MB last week :P
[17:02:50] <diverse> I think that's with building LLVM
[17:03:27] <eddyb> unless cmr's measurements were wrong, I have a 2 character change that reduces a 3.8GB testcase to 1.6GB (RAM usage during compiling)
[17:04:10] <eddyb> I don't see improvements when building rustc-stage1, so I won't make a PR until I have some confirmation
[17:04:15] <strcat> diverse: it is if you started from scratch (you can tell it built in parallel from the sys time)
[17:04:19] <acrichto> friggle: I have an initial copy here: https://github.com/alexcrichton/rust/blob/6963135f66ad18aee2db930ceb1a2912ee7eb388/src/libstd/lib.rs#L103, but I don't think that branch is going to land soon
[17:04:26] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[17:05:12] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[17:06:06] <diverse> strcat: ah I see. I only got over 1 minute of parallelization. :(
[17:06:07] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[17:06:32] <jdm> jvns: what's the symptom you see?
[17:06:35] <strcat> diverse: look at the difference between real and user time
[17:06:49] <strcat> user+sys
[17:07:59] <diverse> so: real - (user + sys) == parallelization time?
[17:09:42] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:09:57] <strcat> diverse: well not entirely
[17:10:21] <strcat> I don't think that accounts for the time it was in iowait
[17:10:28] <strcat> but it wasn't in iowait for 20 minutes
[17:10:53] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Connection reset by peer)
[17:10:57] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[17:12:17] *** Quits: jstevans (Instantbir@71036808.C8A19C38.DDE5D3F6.IP) (Ping timeout)
[17:12:39] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[17:16:32] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[17:16:41] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[17:16:53] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[17:17:28] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[17:19:11] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[17:19:52] *** Joins: jstevans (Instantbir@6165CDD5.6106F5AE.B7830B68.IP)
[17:20:52] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[17:21:22] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[17:22:24] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:23:36] *** Quits: jstevans (Instantbir@6165CDD5.6106F5AE.B7830B68.IP) (Ping timeout)
[17:23:40] *** Joins: jstevans1 (Instantbir@6165CDD5.6106F5AE.B7830B68.IP)
[17:23:48] *** Joins: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net)
[17:24:09] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[17:24:31] *** jdm is now known as jdm|f00ding
[17:25:59] <jvns> my array indexing problem that is making me confused: http://sprunge.us/giiA
[17:26:29] <jvns> I'm pressing '1' on my keyboard, and encountering some kind of quantum notion of equality
[17:26:31] *** Joins: ktt3ja (Mibbit@moz-D69B60E4.hsd1.va.comcast.net)
[17:26:49] <jvns> when I replace if(keycode == 2 || keycode ==3) with if(keycode == 2), the code magically starts working
[17:26:49] <eddyb> jvns: what type is keycode?
[17:26:57] <jvns> eddyb: it's a u8
[17:27:15] <eddyb> also, drop the parens around your conditions, maybe it's some operator weirdness
[17:27:37] <jvns> Dropping the parens doesn't help
[17:27:47] <eddyb> it does look quantum
[17:27:51] <jvns> yup
[17:28:05] <eddyb> jvns: are interrupts disabled?
[17:28:06] <jvns> maybe it's some assembly weirdness with my interrupt handler?
[17:28:09] <jvns> interrupts are enabled
[17:28:13] <eddyb> lol
[17:28:21] <jvns> it works fine if I just have 'keycode == 2' without the or
[17:28:39] <jvns> and also fails with any other condition more complicated with 'keycode == 2', like 'keycode < 100'
[17:28:50] <eddyb> jvns: only enable interrupts when you exit the IDT handler, otherwise you can get recursion
[17:29:27] <jvns> eddyb, good tip! it doesn't fix the problem though :)
[17:29:36] *** Joins: w3lcome (Mibbit@moz-49575A06.home.otenet.gr)
[17:30:09] *** Quits: skade (skade@30BBD5E6.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[17:30:15] <eddyb> keycode == 2 means LLVM can probably assume keycode is 2, so that explains why it works like that
[17:30:26] <jvns> mm that makes sense
[17:30:52] <eddyb> jvns: what does that putc(NUMS[keycode]) line print?
[17:31:02] <jvns> eddyb, it just prints an empty space
[17:31:16] <jvns> so maybe \x00 or \x20, not clear
[17:31:34] <eddyb> what about '0' as u8 + keycode?
[17:31:58] <jvns> 65 + keycode prints 'C'
[17:32:01] <jvns> (65 is 'A')
[17:32:10] <jvns> so it *looks* like keycode is 2
[17:33:04] *** Joins: abinader (abinader@D8B9C081.E820043D.D4C04133.IP)
[17:33:34] <eddyb> you're use keycode 2 maps to '2'?
[17:33:38] <eddyb> see https://github.com/eddyb/rustic/blob/refactoring/src/mach/kb.rs#L30
[17:33:44] <eddyb> s/use/sure/
[17:34:05] <jvns> well in the array NUMS it maps to '2'
[17:34:14] <jvns> in real life it maps to '1' actually
[17:34:22] <eddyb> what key are you hitting?
[17:34:27] <eddyb> try ESC
[17:34:28] <jvns> the 1 key
[17:34:33] <eddyb> nvm
[17:34:36] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[17:34:47] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[17:34:55] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[17:36:42] <eddyb> jvns: well, there's one detail you're missing, but it still doesn't explain the weird behavior
[17:36:51] <eddyb> https://github.com/eddyb/rustic/blob/refactoring/src/mach/kb.rs#L47-L48
[17:37:51] *** Quits: feng (Mibbit@523C255C.7A85645C.C7DB8B78.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:38:00] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:38:04] *** Quits: canhtak (canhtak@moz-A53E1151.wl.t.ulaval.ca) (Quit: canhtak)
[17:38:08] <jvns> maybe I need to save more registers when I'm entering my interrupt handler?
[17:38:16] <jvns> that doesn't really make sense exactly
[17:38:34] <eddyb> it still shouldn't break
[17:38:45] *** Quits: markwash (mwashenber@moz-E830FEBB.hsd1.ca.comcast.net) (Quit: markwash)
[17:39:17] <eddyb> jvns: you could probably disassemble _interrupt_handler_kbd yourself and see what's going on
[17:39:28] *** Joins: Ferreus (ferreus@moz-53CC9E9A.pools.arcor-ip.net)
[17:39:42] <eddyb> oh, I have an idea: maybe that inb has UB
[17:39:45] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[17:39:50] <jvns> hmm I'm not sure how to get _interrupt_handler_kbd out of the binary
[17:39:52] <jvns> what's UB?
[17:39:58] <eddyb> undefined behavior
[17:40:13] <eddyb> never heard of nasal demons? :P
[17:40:28] *** Quits: squiddy (squiddy@moz-6D0F7A7.adsl.alicedsl.de) (Ping timeout)
[17:40:51] <eddyb> jvns: I usually use radare2 to inspect binaries... do you have objdump? that can disassemble
[17:40:56] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[17:41:33] <doomlord_> is single inheritance for structs likely to be added to rust
[17:41:38] <eddyb> jvns: or you can give -S -o kernel.S to rustc and look at that
[17:41:42] *** Joins: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au)
[17:41:53] <benh> doomlord_: http://smallcultfollowing.com/babysteps/blog/2013/10/24/single-inheritance/ sounds like it
[17:41:54] <eddyb> doomlord_: servo guys were saying they want it, and I think nmatsakis has a blog post on that
[17:42:05] <eddyb> benh: ninja!
[17:42:18] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[17:42:30] <benh> firefox address bar autocompletion brought it up when i typed as much as inheritance :D
[17:42:45] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[17:43:05] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[17:43:07] <doomlord_> great... IMO it makes sense because it just follows naturally from a low level concept,  regardless of how much inheritance in OOP is generally a benefit or hazard
[17:43:08] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[17:43:55] <eddyb> I would love (a limited form of) field-based duck typing, or something similar
[17:44:04] *** Quits: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au) (Ping timeout)
[17:44:53] <jvns> that says " calll   __morestack" in it. erg.
[17:45:22] <eddyb> jvns: gist your function if you can find it. or the whole file
[17:45:42] *** Quits: telotortium (rmi1@moz-C8F8CE6.hsd1.ca.comcast.net) (Ping timeout)
[17:45:50] <eddyb> no need for virtual shenanigans, unless explicitly requested, and it would certainly help with approximating multiple inheritance
[17:46:20] <eddyb> *and* it doesn't have the diamond problem :P
[17:46:46] <eddyb> but now I'm just ranting
[17:47:13] <doomlord_> single v multiple inheritance etc is completely different
[17:47:31] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[17:48:03] <doomlord_> you could easily do something like single inheritance coding in asm , reusing enums for field offsets
[17:48:09] *** Joins: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au)
[17:48:17] <doomlord_> re-using equates^
[17:48:37] *** Joins: canhtak (canhtak@moz-A53E1151.wl.t.ulaval.ca)
[17:48:44] *** Quits: lpy (lpy@12172131.F09091A8.1348A864.IP) (Client exited)
[17:48:52] <eddyb> not sure what you mean
[17:49:22] <doomlord_> inheritance for structs is just saying the same named element exists at the same offset from the struct pointer
[17:49:53] *** Quits: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au) (Ping timeout)
[17:50:01] <jvns> eddyb: you can clone https://github.com/jvns/rustboot/, git checkout compiler-nonsense, and make run
[17:50:04] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[17:50:07] <doomlord_> .... saves having to declare those again, and does allow some limited types  polymorphism to be done very efficiently
[17:50:30] <jvns> eddyb: pressing '1' repeatedly will print '2C ' instead of '2C2'
[17:50:51] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[17:50:52] <doomlord_> (saves having to declare or embed another struct making a deeper path to access the same thing.. (bar.name    vs foo.base.name ... just write foo.name)
[17:52:01] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[17:52:01] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[17:52:32] <eddyb> doomlord_: and what I'm talking of is also very efficient, but it's not limited to single inheritance. the biggest problem in rust is with trait implementations, default, or otherwise - they can't reuse code right now for types with structural similarities
[17:52:44] <eddyb> eh, this is bikeshedding already
[17:52:50] *** Joins: Ms2ger (Ms2ger@moz-A073B78.adsl-dyn.isp.belgacom.be)
[17:53:31] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[17:53:52] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[17:54:54] <eddyb> jvns: doesn't this throw a warning? https://github.com/jvns/rustboot/blob/compiler-nonsense/src/utils.rs#L13
[17:55:08] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[17:55:14] <eddyb> well, I meant let mut ret. it doesn't have to be mutable at all
[17:55:46] <eddyb> and I can predict your future commit names based on this :P http://xkcd.com/1296/
[17:55:56] <jvns> eddyb: why doesn't it need to be mut?
[17:55:57] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[17:55:57] *** Joins: FreeFull (freefull@moz-672577F6.as13285.net)
[17:56:10] <eddyb> jvns: because it's initialized by the inline asm
[17:56:33] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[17:56:55] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[17:56:56] <eddyb> when I fixed all that to behave properly, I've inadvertently made an inline asm output behave like an assignment
[17:57:04] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Connection reset by peer)
[17:57:05] <doomlord_> eddyb , i got the impression the proposal to allow traits to extend structs would cover that for the single-inheritance case, there the default implementation would be concrete compiled code that can be reused , but i think i see what you're getting at
[17:57:07] <eddyb> rusti: let mut x; x = 0; x
[17:57:08] -rusti- 0
[17:57:20] <eddyb> that's... supposed to warn
[17:57:22] <FreeFull> Does Rust have anything for tail recursion?
[17:57:27] <doomlord_> eddyb i think what you're talking about is orthogonal to the reason to have single inheritance
[17:57:29] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[17:57:32] <jvns> eddyb: good point! taking away the 'mut' does the same thing, though
[17:57:35] <doomlord_> mutually compatable
[17:57:38] <FreeFull> eddyb: What is the warning supposed to be?
[17:57:46] <FreeFull> That you don't need mut?
[17:57:50] <eddyb> yupp
[17:58:00] <FreeFull> Maybe rusti is outdated
[17:58:14] <FreeFull> Is there any way to get the version of Rust from within a program?
[17:58:20] <eddyb> it is. but I don't think the asm thing warns at all :(
[17:58:23] <eddyb> rusti: version
[17:58:24] <doomlord_> i found myself wanting to make a trait of accessors for a struct... struct Foo { a b c}   trait IFoo { get_a() get_b() ...}
[17:58:24] -rusti- "rustc 0.8"
[17:58:33] <FreeFull> Yeah right, 0.8
[17:58:39] <doomlord_> i think what you're proposing would eliminate that
[17:58:55] <eddyb> doomlord_: yeah, and it works for single inheritance as well
[17:59:00] <FreeFull> doomlord_: It'd be interesting to have first-class accessors like Haskell's lenses
[17:59:07] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[17:59:19] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[17:59:29] <doomlord_> i know people freak out here about accessors and making a trait ISomething :)
[17:59:30] <eddyb> accessors? haskell? I didn't expect anyone to pair those
[17:59:49] <doomlord_> but its a need i've definitely felt
[18:00:22] <doomlord_>  could you say lenses are something smarter that overlaps with what accessors do
[18:01:01] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[18:01:03] <doomlord_> if i understood correctly lenses , let functional code reason about struct mutations (eg allowing those to be composed and so on)
[18:01:30] <FreeFull> Lenses make something like changing a value nested deep in several data structures easy
[18:01:38] <eddyb> jvns: hmpf, this isn't safe (it doesn't change the potentially borked stack given by the bootloader), but I doubt it causes problems if everything else works https://github.com/jvns/rustboot/blob/compiler-nonsense/src/runtime.asm#L14
[18:01:52] <FreeFull> There are also related things like traversals and prisms
[18:03:57] <eddyb> jvns: wouldn't it be easier to post that asm you've generated?
[18:04:34] <jvns> eddyb: I still haven't found the asm, because I don't understand what LLVM's __morestack means
[18:05:25] <eddyb> jvns: __morestack is called when there's not enough stack left for the function's local variables and whatnot
[18:05:43] <eddyb> the limit of the stack is written in [gs:0x30] or so
[18:05:55] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:09:15] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[18:09:50] <jvns> eddyb: do you know where to find the code that gets run with __morestack?
[18:10:05] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[18:10:07] <FreeFull> Isn't the amount of stack a function needs somewhat predictable? As long as it doesn't accept some recursive structure as an argument
[18:10:31] <eddyb> jvns: it's the __morestack defined in runtime.asm in rustboot
[18:10:42] <eddyb> jvns: if you have the assembly file, just gist it
[18:10:50] <cmr> FreeFull: it's 100% exact, it has to be.
[18:12:01] *** Joins: markwash (mwashenber@moz-60E5DD0C.staticcust.wsteleport.net)
[18:12:58] <jvns> eddyb: this? https://gist.github.com/jvns/7810376
[18:13:42] <cmr> but that's only its current frame
[18:13:51] <eddyb> jvns: https://gist.github.com/jvns/7810376#file-help_what_eep_ack-asm-L224-L226
[18:14:18] <cmr> if there's no call indirection or recursion anywhere in the call graph, one can statically analyze stack usage.
[18:14:28] <eddyb> @GOTOFF? what on earth is this?
[18:14:36] <cmr> linker things.
[18:14:51] <cmr> global offset table offset
[18:14:59] <eddyb> I know that, but what's it doing here?
[18:15:26] <cmr> it's just PIC?
[18:15:55] <eddyb> jvns: there is a way to get smaller and cleaner native code, if you output .bc from rustc then use clang with some custom options to compile it into .o, I guess rustboot is just using the default
[18:15:58] *** Joins: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com)
[18:16:13] <eddyb> cmr: we need to be able to specify -mrelocation-model=static to rustc
[18:16:21] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[18:17:40] *** Quits: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[18:17:56] <eddyb> jvns: no --opt-level? that assembly is so bloated >_>
[18:17:59] *** Quits: abinader (abinader@D8B9C081.E820043D.D4C04133.IP) (Quit: abinader)
[18:18:14] <jvns> which --opt-level should I use?
[18:18:21] <eddyb> 3 is max, I think
[18:18:44] <bstrie> < pulse> it has a nice syntax though, i'll give it that
[18:18:49] <bstrie> ^praise for rust syntax in the wild
[18:18:56] <cmr> just use -O
[18:19:08] *** Quits: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP) (Quit: Leaving)
[18:19:18] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:20:23] *** Joins: steven_is_false (user@1E3F14AE.29819A33.115CE8E4.IP)
[18:20:47] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[18:21:26] <steven_is_false> Hello. The #servo channel seems to be very quiet right now. Would anyone mind if I ask questions about Mozilla Servo here?
[18:22:22] <cmr> steven_is_false: no one really knows that much about servo besides the servo devs.
[18:22:31] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Ping timeout)
[18:22:34] <cmr> I saw your question but didn't know the answer, for example :)
[18:22:41] <steven_is_false> cmr: Well I'd assume a few of them would be here right?
[18:22:45] <steven_is_false> cmr: Okay.
[18:23:02] <cmr> they're all in #servo
[18:23:14] <cmr> (when they're around)
[18:23:21] <steven_is_false> Then I guess this is probable the wrong time to ask the question.
[18:23:33] <Blei> brson: hi. i have an interesting SharedChan/scheduling deadlock. are you the correct person to bug about that?
[18:23:41] <steven_is_false> I can try again in the afternoon.
[18:23:45] *** Joins: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au)
[18:24:34] <brson> Blei: yep!
[18:25:27] <Blei> great! so, it's somewhat complicated and involves gtk + gstreamer (hopefully not too relevant to the problem)
[18:25:53] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[18:26:04] *** Quits: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au) (Ping timeout)
[18:26:25] <Blei> scenario: at application startup i start a couple of task_spawn(SingleThreaded) tasks that fetch stuff from the internet. (these tasks seem to work ok, but will resurface later on)
[18:26:30] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[18:26:47] <eddyb> jvns: I think this is NUMS[keycode] https://gist.github.com/jvns/7810376#file-help_what_eep_ack-asm-L335
[18:26:58] <Blei> further on: i have a Port/SharedChan pair that i send to and read from, sometimes in the same task/thread, sometimes not
[18:27:05] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[18:27:49] <Blei> now I've observed that at some random time during the running of the application, the tasks that have been spawned in the beginning, are destroyed after the main task writes something to the SharedChan
[18:28:04] <eddyb> jvns: debug idea: mark putc as #[inline(never)] so we can read the assembly :)))
[18:28:17] <Blei> the log shows "running join task" exactly the number of times as tasks have been spawned in the beginning
[18:28:19] <eddyb> since it's getting somewhat inlined
[18:28:23] <doomlord_> is * being removed from rust?
[18:28:48] <eddyb> that would be silly
[18:28:50] <benh> multiplcation: too slow!
[18:28:50] <Blei> interestingly, if I add a debug!() after sending something to the SharedChan, this works ok, if it is not there, the application deadlocks
[18:28:53] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[18:28:58] *** jdm|f00ding is now known as jdm
[18:29:07] <eddyb> doomlord_: a lot of abstractions inside std use *
[18:29:22] <Blei> now i'm mystified and ask for assistance :)
[18:29:48] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Ping timeout)
[18:30:14] <Blei> (code is here: https://github.com/Blei/rusttracks, see the XXX in player.rs)
[18:30:15] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[18:30:27] <eddyb> Blei: NSFW
[18:30:41] <Blei> if only it were :D
[18:30:52] <Blei> well, it deadlocks, so obviously
[18:31:13] <eddyb> dead's no good
[18:31:36] <brson> Blei: are you expecting the single-threaded tasks to not be destroyed?
[18:31:54] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[18:32:00] <Blei> no, i'm actually surprised they live that long
[18:32:08] <Blei> i'd have assumed they would be finished much earlier
[18:32:30] <Blei> they get spawned here: https://github.com/Blei/rustTracks/blob/master/gui.rs#L492
[18:33:40] <brson> Blei: do you ever spawn_sched(SingleThreaded) from inside another SingleThreaded task?
[18:34:42] <Blei> i don't think so
[18:35:18] *** Quits: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net) (Ping timeout)
[18:35:33] *** Quits: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com) (Quit: csherratt)
[18:35:34] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[18:35:42] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[18:36:15] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[18:36:58] <jdm> steven_is_false: I'm around and can answer servo questions
[18:37:18] <steven_is_false> jdm: Cool, Thanks.
[18:37:51] <steven_is_false> jdm: Servo has process isolation implemented right?
[18:38:12] <jdm> no
[18:38:22] <jdm> patrick may have a branch somewhere
[18:38:41] <jdm> https://github.com/pcwalton/servo/tree/multiprocess
[18:38:42] <brson> Blei: I'll clone your repo and poke around a bit
[18:38:49] <steven_is_false> Thanks.
[18:38:55] <doomlord_> IMO rusts multitude of pointer types is a strength, not a weakness
[18:38:56] <Blei> brson: thanks
[18:38:56] <steven_is_false> I'll take a look at it.
[18:39:07] <Blei> brson: if you want to build it, I can push the gtk stuff as well
[18:39:16] <Blei> if you are even on linux
[18:39:23] <steven_is_false> I'm working on process isolation for my own stuff and I'm looking at how others do it.
[18:39:32] <doomlord_> makes it convinient to write code in various styles... * eliminates the need to mix rust and C, ~ lets you write somehting like modernC++ more easily, etc
[18:39:54] <steven_is_false> One particularly neat hack I use is to get the name of the program from arg[0] and then spawn a copy.
[18:39:56] <doomlord_> its a shame because the layman says "ew, 4 pointer types", but thats the languages' strength
[18:39:59] <brson> Blei: yeah, i want to build it
[18:40:05] <Blei> brson: ok, hang on
[18:40:22] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Ping timeout)
[18:40:39] <FreeFull> Ewww, safety! Who wants that
[18:40:50] <FreeFull> Let's all write in Perl
[18:41:00] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[18:41:32] *** Joins: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net)
[18:41:32] *** ChanServ sets mode: +ao dherman dherman
[18:42:12] <Blei> brson: https://github.com/Blei/rust-dumb-gtk
[18:42:25] <Blei> brson: it also requires rust-http
[18:42:44] <Blei> brson: https://github.com/chris-morgan/rust-http
[18:42:50] *** Quits: KindOne (KindOne@moz-B764F4D3.dynamic.ip.windstream.net) (Ping timeout)
[18:43:35] *** Joins: KindOne (KindOne@moz-B764F4D3.dynamic.ip.windstream.net)
[18:43:56] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[18:47:13] *** Joins: tcr (tcr@moz-EAC95265.hfc.comcastbusiness.net)
[18:47:34] <bstrie> doomlord_: there's no consensus there yet, it might not even come to pass. and it wouldn't be possible for a while yet anyway
[18:47:38] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[18:48:24] *** Quits: jstevans1 (Instantbir@6165CDD5.6106F5AE.B7830B68.IP) (Ping timeout)
[18:48:32] *** Joins: jstevans (Instantbir@moz-71C055B8.bootp.virginia.edu)
[18:48:35] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[18:48:56] *** Joins: rca (rcatolino@moz-ADF749F1.adsl.proxad.net)
[18:49:21] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[18:50:54] *** Joins: fabiand (fabiand@moz-7C0869F0.adsl.alicedsl.de)
[18:51:07] *** Quits: jstevans (Instantbir@moz-71C055B8.bootp.virginia.edu) (Ping timeout)
[18:51:08] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[18:51:09] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[18:51:50] *** Joins: squiddy (squiddy@moz-6D0F7A7.adsl.alicedsl.de)
[18:52:10] <doomlord_> the existing names are good :) ~ single squiggle, single ownership 
[18:52:54] <doomlord_> * for a pointer with no safety, an established convention in the mainstream pointer based languages 
[18:53:30] <doomlord_> & doing a very similar job to c++ references
[18:53:30] *** Joins: jstevans (Instantbir@moz-9985D324.bootp.virginia.edu)
[18:53:38] <brson> Blei: building rust now. still looking at the code
[18:53:47] *** Joins: jstevans1 (Instantbir@BB20DC06.8FFBE666.DDE5D3F6.IP)
[18:54:41] <Blei> brson: you don't have a working rust? i'm surprised ;) please take your time
[18:55:18] *** Quits: jstevans (Instantbir@moz-9985D324.bootp.virginia.edu) (Ping timeout)
[18:55:28] *** Quits: jstevans1 (Instantbir@BB20DC06.8FFBE666.DDE5D3F6.IP) (Ping timeout)
[18:55:45] <bstrie> doomlord_: ah, but our & is quite a bit safer and more restrictive than & in C++... is that an argument in favor of turning ~ into * after all? :)
[18:55:47] *** Joins: jstevans (Instantbir@BB20DC06.8FFBE666.DDE5D3F6.IP)
[18:55:59] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[18:55:59] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:56:04] <benh> no :(
[18:56:40] <doomlord_> & is safer and more restrictive than &, but its low level behaviour is still extremely similar
[18:57:16] *** Quits: eholk (eholk@moz-BA312F07.crest.iu.edu) (Quit: eholk)
[18:57:37] <bstrie> doomlord_: afaik the only low-level difference between ~ in rust and * in C++ is that ~ runs a destructor
[18:57:55] <bstrie> well, I guess not
[18:57:59] <benh> It's also linear and all that stuff
[18:58:11] <bstrie> it's always on the heap, and I bet you can have pointers into the stack in C++
[18:58:19] <doomlord_> yes of course
[18:58:24] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[18:58:38] <doomlord_> ~ is more than * because it signifies a resource
[18:59:03] <bstrie> pcwalton: doomlord thinks that C++ users will be confused by ~ looking like *
[18:59:05] <doomlord_> * is like an asterist... wildcard pointer, could be anything :)
[18:59:14] <doomlord_> * is an asterisk^
[18:59:18] <pcwalton> eh, dherman's argument applies
[18:59:29] <pcwalton> it's more important to look familiar than to have exactly the same semantics
[18:59:59] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[19:00:15] <benh> we're really moving to unsafe ptr syntax for owned boxes?
[19:00:21] <pcwalton> I would like to
[19:00:22] *** Quits: rca (rcatolino@moz-ADF749F1.adsl.proxad.net) (Quit: leaving)
[19:00:25] <SiegeLord> * is nullable in C++ though...
[19:00:34] <pcwalton> again, it's more important to look familiar than to have exactly the same semantics
[19:00:37] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[19:00:39] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:00:41] <eddyb> pcwalton: so the current * would be "unsafe *"?
[19:00:48] <bstrie> clearly we need to introduce ? as a new sigil for nullable pointers :)
[19:00:50] <pcwalton> c_ptr<>
[19:00:53] <bstrie> ceylon does it, sort of!!
[19:00:54] <pcwalton> to go with c_int
[19:00:57] <pcwalton> is what I was thinking
[19:00:58] * pcwalton shrugs
[19:01:03] <doomlord_> i would say familiar looking things should have familiar semantics - C++ people think of * as something to avoid, and replace with unqiue_ptr ,shared_ptr, & for safe code, but they also know having * is why C++ exists, to do the same jobs as C
[19:01:10] <eddyb> pcwalton: but... look inside all the abstractions
[19:01:19] <benh> c_const_ptr<>?
[19:01:28] <eddyb> c_ptr<> won't cut it for something like Rc
[19:01:40] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[19:01:43] <pcwalton> why? too verbose for your taste?
[19:01:53] <strcat> Rc is like 50 lines of code
[19:01:55] <strcat> ;p
[19:01:56] <eddyb> "unsafe *" makes sense since it's cast from an owned box
[19:02:21] <eddyb> (if the owned pointer would be *)
[19:02:23] <doomlord_> i like rust the way it is now; you've got more convinient syntax for "modern C++" semantics with ~, and recover the full power/danger of C in unsafe { ... * ... }
[19:02:33] <eddyb> type c_ptr<T> = unsafe *T;
[19:02:41] * strcat doesn't think there's a problem with ~ and would prefer Uniq if anything
[19:02:42] *** Parts: azita (Azita@moz-BBE3ABD.mv.mozilla.com) ()
[19:02:44] <pcwalton> I would be fine with "unsafe *"
[19:02:52] <pcwalton> if we insisted on exactly the same semantics as C++ in order to use their operators then we couldn't use "+" for addition because signed addition is undefined in C++ and defined in Rust
[19:02:54] <doomlord_> you've even got garbage collection with @ ... so you've got convinient syntax for each extreme
[19:03:02] <pcwalton> we will not have garbage collection with @
[19:03:04] *** Joins: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au)
[19:03:15] <pcwalton> in general rust's sigils are not as popular in the outside world as they are in this channel
[19:03:20] <doomlord_> i was going to say i would like to have seen @ turned into Rc<T>
[19:03:25] <benh> imo there's more difference between C++ * and C++ unique_ptr than between C++ + and rust + :p
[19:03:33] <doomlord_> i'm ok with losing @ for Gc
[19:03:36] <pcwalton> sure, but I'm saying it's not a hard and fast rule
[19:03:38] <benh> I'd almost rather have Box<T> than *T
[19:03:39] <eddyb> pcwalton: that's a shame... wait, have you watched the Scala talk? I have a point to make
[19:03:47] <doomlord_> benh +1
[19:03:55] *** Quits: heftig (heftig@moz-9C88EA9D.dip0.t-ipconnect.de) (Ping timeout)
[19:04:01] *** Joins: heftig_ (heftig@moz-10DC1F36.dip0.t-ipconnect.de)
[19:04:07] <strcat> benh: it's not a box though
[19:04:10] <strcat> what it points at is
[19:04:16] <pcwalton> Uniq<T> would be fine too
[19:04:26] <doomlord_> its a shame because it seems like reacting to the criticism "rust has 4 pointer types", which is an unfortunately catchy meme
[19:04:30] <pcwalton> I don't have strong opinions except that we need to cut down on the ~
[19:04:31] <eddyb> pcwalton: the current sigils could be views (say, in an IDE) of future types
[19:04:35] <pcwalton> it *is* reacting to that criticism
[19:04:40] <doomlord_> a catchy meme that has little foundation
[19:04:41] <pcwalton> I'm saying that criticism is valid
[19:05:02] *** Joins: zslayton (Mibbit@81EB2473.5F4BC84E.66C78B76.IP)
[19:05:21] <doomlord_> my view is the criticism only applies to people who dont want rust anyway
[19:05:21] <pcwalton> one of Rust's goals is to look familiar to C++ programmers, always has been
[19:05:22] <eddyb> I kinda agree with doomlord_ that some people complain for the sake of complaining
[19:05:28] <strcat> Vec<T>, Uniq<T>
[19:05:37] <Eridius> ok, I'm coming in late here, but what the heck is `unsafe *`?
[19:05:37] <strcat> + default type parameters so you can hide an allocator parameter in there
[19:05:47] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[19:05:47] <doomlord_> you can't avoid it... you either have complex pointers for high performance, or simple pointers/references, and a garbage collection runtime
[19:05:50] <pcwalton> if people say "ewwww, looks like Perl" then we aren't meeting that goal
[19:06:00] *** Quits: oberstet (quassel@moz-185796D6.dynamic.mnet-online.de) (Client exited)
[19:06:02] <pcwalton> now I happen to like Perl :)
[19:06:03] <heftig_> so ~ will be in the stdlib?
[19:06:11] <eddyb> strcat: I would really love to be able to do ~[T] => Vec<T> => ~[T]
[19:06:17] <tiffany> I wonder how many people there are like me, who are interested in rust more as a functional programming language with fine grained control
[19:06:24] <strcat> eddyb: what is ~[T] in that case?
[19:06:26] <doomlord_> rust is a really nice balance, because its more convinient syntax for a lot of what can be done in C++
[19:06:29] <benh> I meant it in a good way when I said the sigils looked like perl :(
[19:06:30] <pcwalton> tiffany: lots of people
[19:06:40] <doomlord_> lol
[19:06:51] <pcwalton> I think convenient syntax is good but it has to pass the manager test
[19:06:52] *** heftig_ is now known as heftig
[19:06:53] <pcwalton> and ~ doesn't
[19:06:55] <pcwalton> IMHO
[19:06:59] <eddyb> strcat: the common representation we were basing on &[T]
[19:07:04] <Eridius> pcwalton: I think you're overly critical of sigils
[19:07:13] <strcat> eddyb: I still don't really like that
[19:07:14] <tiffany> well, it shouldn't look too much like C++
[19:07:17] <strcat> ~[T] won't support allocators
[19:07:23] <pcwalton> I think this channel is not critical enough of sigils :)
[19:07:27] <strcat> it means malloc/free is built-in to the language
[19:07:37] <Eridius> I understand the argument "we shouldn't have 4 pointer types", but I don't think the logical conclusion of that is getting rid of all sigils
[19:07:44] <strcat> ties your hands with how you implement Vec<T>
[19:07:52] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[19:07:55] <strcat> unless you just want those conversions with Vec<T, Heap>
[19:08:02] <eddyb> myeah
[19:08:06] <strcat> and now non-default-allocator vectors are second-class
[19:08:07] <pcwalton> I think the logical conclusion of that is that we shouldn't have pointer sigils that aren't in the standard lexicon of pointer sigils in the C family
[19:08:09] <strcat> back to square one
[19:08:14] <doomlord_> familiarity for C++ people is good IMO because, people who deal with the domains where Rust can offer something existing languages dont will likely be forced to deal with C++ already
[19:08:22] <tiffany> I think the problem with "we shouldn't have 4 pointer types" is that C++ does have 4 pointer types, they're just shoved into the stdlib and awkward to use compared to rust
[19:08:25] <doomlord_> C++ isn't going anywhere, it has massive momentum
[19:08:26] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[19:08:36] <strcat> tiffany: how are they awkward to use in comparison to rust?
[19:08:41] <pcwalton> tiffany: the fact that they're in the standard library is not a bad thing
[19:08:48] <Eridius> typing unique_ptr everywhere is very verbose
[19:08:53] <tiffany> they're a lot more verbose, for no good of a reason
[19:08:53] <strcat> C++ has overloading for * and ->
[19:08:59] <strcat> Eridius: good, you don't want them often
[19:09:01] <pcwalton> nobody is arguing for "unique_ptr"
[19:09:05] <doomlord_> you'd only use 4pointers as a criticism if you didn't need that powerin the first place
[19:09:09] <tiffany> C++'s type signaturse have a tendency of getting absurdly long
[19:09:21] <doomlord_> such a person is happy with garbage collection and doesn't need rust
[19:09:35] <pcwalton> it's not just about GC, it's also about avoiding data races
[19:09:37] * pcwalton is going to say that every day
[19:09:50] <strcat> tiffany: how often do you really use unique pointers?
[19:09:57] <tiffany> pretty frequently
[19:09:58] <strcat> strings/vectors don't count
[19:10:00] <benh> I feel like the sigils as in the ~ in unique pointers is less of a burden than 'lifetimes and verbose trait bounds :/
[19:10:01] <tiffany> oh
[19:10:02] <strcat> tiffany: for what?
[19:10:08] <tiffany> recursive data structures
[19:10:13] <doomlord_> ~[T]  == vector<T> right
[19:10:18] <pcwalton> I disagree with strcat that you shouldn't use them often
[19:10:23] <pcwalton> pointers are important
[19:10:27] <strcat> I don't think they *are* used often
[19:10:27] <pcwalton> allocation is important
[19:10:29] <pcwalton> don't do it everywhere
[19:10:39] <pcwalton> but sometimes y'know
[19:10:42] <pcwalton> malloc is good
[19:10:46] *** Joins: morphevs (Adium@moz-C1F7EB20.cust.bluewin.ch)
[19:10:52] <Eridius> one downside to renaming ~[T] to Vec<T> is I think that _hides_ allocation
[19:10:58] <strcat> hardcoding allocators into the language isn't good ;p
[19:11:03] <Eridius> ~ screams allocation to me. Vec<T> doesn't. unique_ptr<T> or whatever doesn't
[19:11:07] <strcat> Eridius: HashSet<T>, etc. already exist
[19:11:08] <strcat> too late
[19:11:11] <tiffany> for an AST or a parser combinator grammar, I can't think of any other pointer type that would be useful for representing them
[19:11:16] <pcwalton> Eridius: that is more of a question of DST than anything
[19:11:18] <pcwalton> DST is separate
[19:11:22] <Eridius> strcat: yes, not every collection can be decorated with ~, but ~[T] is extremely common
[19:11:25] <doomlord_> the fact that pointer concepts are more deeply engrained in rust is what lets you do more compile time checks, right?
[19:11:29] <pcwalton> strcat: I don't want to hardcode allocation into the language
[19:11:37] <cmr> doomlord_: no, just &
[19:11:37] <strcat> Eridius: so why should one kind of collection be crippled and hardcoded into the language
[19:11:39] <strcat> but not all the others
[19:11:44] <Eridius> strcat: crippled?
[19:11:46] <strcat> yes
[19:11:52] <benh> I bet with * unique pointers we'll just get people writing indignant blog posts when they can't just transliterate their doubly linked lists from C :D
[19:12:03] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[19:12:03] <strcat> no allocator support, very slow - and it will always be slow, because you can always write a better vector
[19:12:03] <doomlord_> +1 
[19:12:03] <eddyb> heh
[19:12:05] <SiegeLord> I'd rather have unique_ptr than * for ~
[19:12:13] <strcat> if it's in the language it's hard to change
[19:12:23] <SiegeLord> * has absolutely nothing to do with * except that's both are pointers
[19:12:28] <eddyb> strcat: lang items, some people like that idea :P
[19:12:30] <SiegeLord> *with ~
[19:12:30] <pcwalton> guys, ~[T] is a question of DST, that's a thorny problem with subtle consequences in the type system beyond syntax
[19:12:31] <tiffany> I'm a fan of 'box' the most, honestly
[19:12:36] <Eridius> Making * a unique pointer seems like a terrible idea
[19:12:37] <strcat> eddyb: lang items don't work for this
[19:12:40] <bstrie> `box` is the future
[19:12:42] <bstrie> all hail box
[19:12:55] * eddyb looks at his minions
[19:13:03] <eddyb> what bstrie said!
[19:13:04] <pcwalton> lang items don't work for this?
[19:13:08] <cmr> This conversation is getting less constructive as time goes on.
[19:13:26] <pcwalton> ISTM that one could make ~ be sugar for a lang item rather easily, assuming one had all the infrastructure to make Uniq<T> work
[19:13:32] <strcat> pcwalton: ~[T] sets a fixed representation for dynamic arrays
[19:13:36] <strcat> as is right now
[19:13:42] <pcwalton> that's a question of DST.
[19:13:47] <pcwalton> DST is separate from all of this
[19:14:07] <strcat> so we're certain that dynamic arrays won't be a language feature?
[19:14:11] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:14:12] <Eridius> on another note, if anyone is interested in Lua 5.1 and rust (tiffany?), I'm making progress in my safe bindings. I haven't done much with it yet, but I'll continue working on it (maybe not over the next few days; I'm on vacation in Seattle) https://github.com/kballard/rust-lua
[19:14:20] *** Joins: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP)
[19:14:20] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Connection reset by peer)
[19:14:25] <tiffany> interesting
[19:14:29] <doomlord_> its true there are many representations of dynamic arrays, i remember having to argue in C++ land about the need to use things other than just vector<T> everywhere, but i'm happy with the idea of having a convinient default
[19:14:30] *** Parts: steven_is_false (user@1E3F14AE.29819A33.115CE8E4.IP) (ERC Version 5.3 (IRC client for Emacs))
[19:14:39] <pcwalton> I think it's pretty unlikely that .push() on ~[T] will survive
[19:14:40] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:14:42] <pcwalton> at this point
[19:14:49] <pcwalton> which means that we will need a separate type for "pushable vector"
[19:15:11] <cmr> so, uh, what makes it a vector if it isn't growable?
[19:15:20] <cmr> it's just an array or slice at that point.
[19:15:21] <pcwalton> whether ~[T] is a type at all, that depends on DST
[19:15:24] <Eridius> Why can't .push() on ~[T] survive? Seems there should be some way of a DST being allowed to reallocate if contained in a ~-ptr
[19:15:29] <doomlord_> you can have types of vectors that dont need to grow;
[19:15:29] <eddyb> pcwalton: yes. that's why I mentioned ~[T] => Vec<T> => ~[T]
[19:15:37] <pcwalton> Eridius: requires a separate "capacity" -- three words, not two
[19:15:39] <doomlord_> a non growing vector is very common in game engines
[19:15:46] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[19:15:59] <eddyb> doomlord_: but that's a vector in a different sense, not an array
[19:16:00] <cmr> that's not a vector then, vectors are a different datastructure.
[19:16:01] <pcwalton> niko's blog posts explain this better than I would here
[19:16:19] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[19:16:20] <Eridius> pcwalton: and the capacity can't be put at e.g. the start of the allocated memory?
[19:16:22] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Client exited)
[19:16:26] <doomlord_> use growable vectors to perform clustering whatever, then fix the result as a non-growing vector for assets used many times
[19:16:29] <strcat> we need a Uniq<T, A = Heap> type anyway
[19:16:31] <pcwalton> it could, but why build that into the language
[19:16:47] <doomlord_> you can have something that still supports growing, its just not optimzed for it
[19:16:50] <pcwalton> you might want custom allocators and whatnot
[19:17:13] <pcwalton> which means you'd have to then build it into the library
[19:17:29] <pcwalton> duplicating compiler features into the library doesn't strike me as a good design
[19:17:41] <doomlord_> What it seemed to me is you've looked at C++ and fixed a convinient syntax with safer semantics for a set of common, useful features
[19:17:49] <eddyb> ~<A>[T] => Uniq<[T], A>
[19:17:52] * Eridius has to go get ready for his flight. Hopefully the dust will have settled by the time he gets back in a few days
[19:18:05] <SiegeLord> That's a long flight ._.
[19:18:10] <Eridius> SiegeLord: >_<
[19:18:24] <strcat> eddyb: I don't really see a point in the line noise sugar
[19:18:43] <Eridius> strcat: because allocators are likely to be rare or nonexistant in most code, and ~[T] is really nice?
[19:18:46] <Eridius> anyway, /me disappears
[19:19:09] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:19:14] <Ms2ger> Eridius, it won't be :)
[19:19:19] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[19:19:21] <strcat> ~ looks like line noise to most people
[19:19:25] *** Quits: morphevs (Adium@moz-C1F7EB20.cust.bluewin.ch) (Quit: Leaving.)
[19:19:31] <strcat> there's a reason C-like languages use it for an obscure bit op
[19:19:35] <eddyb> but I'm not one of them!
[19:19:41] <doomlord_> didn't take long to get used to ~
[19:19:45] <SiegeLord> D doesn't :P
[19:19:46] <eddyb> I want my cutesy language back!
[19:19:53] <bstrie> new idea: esoteric language that is literally line noise
[19:20:07] <cmr> old idea
[19:20:08] <eddyb> bstrie: done at least twenty times by now
[19:20:12] <rpearl> perl?
[19:20:13] <bstrie> fuck
[19:20:18] <sfackler> R
[19:20:19] <strcat> bstrie: http://www.gnu.org/software/apl/APL_demo.html APL is a real language too, not a joke
[19:20:26] <bstrie> strcat: no I've seen apl :P
[19:20:39] <strcat> bstrie: http://esolangs.org/wiki/Whitespace then
[19:20:59] * strcat likes befunge
[19:21:00] <Ms2ger> We need ~> for "leads to", clearly
[19:21:04] *** pmoore is now known as pmoore|away
[19:21:13] <bstrie> funny story: someone once posted a snippet of rust code on reddit where a function had a long type signature. someone said, "jesus christ, I could write that whole function in perl6 in less space than the rust type signature"
[19:21:17] <bstrie> and then they did
[19:21:26] <bstrie> and then someone came and wrote the function in J in less space than the perl6 type signature
[19:21:31] <benh> Maybe we just need to switch to C++-style *-after-type int* pointer syntax
[19:21:31] <cmr> lol
[19:21:32] <sfackler> haha
[19:21:36] <benh> then the * and ~ aren't sigils anymore
[19:21:37] <bstrie> s/type signature/function signature
[19:21:39] <strcat> there's a good reason to use words instead of line noise
[19:21:41] <strcat> you can google words
[19:21:41] <Ms2ger> Perl has type signatures?
[19:21:52] <pcwalton> bstrie: wonder what the rust type signature was? did it have a bunch of traits?
[19:21:55] <bstrie> I'll see if I can find it
[19:21:55] <pcwalton> trait bounds
[19:22:04] <bstrie> pcwalton: yeah, lots of generics and bounds if I recall
[19:22:08] <pcwalton> ah yeah
[19:22:10] <pcwalton> well
[19:22:12] <bstrie> pcwalton: it's no secret that our function signatures are gnarly
[19:22:14] <tiffany> bstrie: binary lambda calculus
[19:22:19] <pcwalton> you can always have fewer bounds if you have ad hoc templates like C++
[19:22:25] <pcwalton> but there's a reason that C++ is moving to concepts
[19:22:38] <strcat> pcwalton: moving away from concepts at the same time ;p
[19:22:47] <pcwalton> away from concepts?
[19:22:48] <strcat> decltype(auto) foo() { ... }
[19:22:58] <strcat> now you don't even know the return type without reading the code
[19:23:17] <strcat> (clang has it already since they implemented all of draft C++14)
[19:23:19] <pcwalton> well, that's a little different from concepts
[19:23:26] <pcwalton> I'm just talking about templates
[19:23:49] <pcwalton> they couldn't get their error messages under control
[19:24:00] <pcwalton> and in any case I think that it's not just about error messages, it's also about scoping
[19:24:04] <pcwalton> they needed ADL
[19:24:06] <eddyb> #define fn auto #define let auto /**/ fn foo() -> int {let x = 10; return x;}
[19:24:17] <eddyb> strcat: at least you can do that now ^
[19:24:18] <strcat> pcwalton: and there's the issue of very unclear requirements for most things
[19:24:28] <pcwalton> I don't even know honestly how you spec a language without concepts
[19:24:31] <pcwalton> it seems so fuzzy
[19:24:40] <strcat> pcwalton: they spec it with concepts atm
[19:24:44] <strcat> boost libs use concepts too
[19:24:46] <strcat> it's just not enforced
[19:24:55] <pcwalton> yeah
[19:25:01] <pcwalton> you really need concepts for templates to make sense I think
[19:25:01] <strcat> http://en.cppreference.com/w/cpp/concept/InputIterator etc.
[19:25:06] *** Quits: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) (Ping timeout)
[19:25:27] <strcat> eddyb: http://ix.io/9gy speaking of defines
[19:25:47] *** Joins: Savago (Savago@D8B9C081.E820043D.D4C04133.IP)
[19:25:58] <eddyb> strcat: lol so fuzzy
[19:26:13] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Quit: Lost terminal)
[19:26:46] <pcwalton> anyway, I think the contenders in my mind for ~ are * and Uniq<T> and I don't really know which one
[19:27:00] <pcwalton> I can justify having special syntax for Uniq<T> because it's hardwired into the "box" opeartor anyway
[19:27:01] <pcwalton> operator*
[19:27:09] <pcwalton> but on the other hand… special syntax
[19:27:11] * pcwalton shrugs
[19:27:13] <cmr> I really don't like * for it. * doesn't mean allocation in C or C++
[19:27:17] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:27:23] <cmr> and that's a huge difference.
[19:27:24] * strcat wants Uniq<T>, Uniq<[T]>, Rc<T>, Rc<[T]>, Vec<T> with conversions to/from Vec<T> and Uniq<[T]>
[19:27:36] <doomlord_> +1
[19:27:45] <pcwalton> assuming we can get DST to work, yeah, something like that would work
[19:27:50] <strcat> and each of those would have a second type parameter with a default of Heap for the allocator
[19:27:51] <tiffany> *(1+1) would look really weird to a C or C++ programmer
[19:27:58] <pcwalton> oh, it'd still be "box"
[19:28:01] <pcwalton> as the operator
[19:28:04] <pcwalton> I'm just talking about the type notation.
[19:28:29] <tiffany> does the place it's allocated from show up in the type signature?
[19:28:40] <strcat> we would need traits for borrow, mut_borrow and deref-by-move and some solution for pattern matching though
[19:28:52] <strcat> tiffany: hm?
[19:29:00] <tiffany> I like 'box' for both operator and type signature
[19:29:02] <pcwalton> don't *necessarily* need some solution for pattern matching although it might well be annoying without it
[19:29:14] <strcat> tiffany: but the type isn't the box, it's the handle for the box
[19:29:20] <doomlord_> ~[~T]   has an equivalent that crops up in C++ sometimes
[19:29:25] <pcwalton> strcat: niko has draft signatures for the borrow and mut_borrow traits.
[19:29:31] *** Quits: andre (andre@CA528A4A.45A4338E.8EE27E6.IP) (Quit: leaving)
[19:29:32] <doomlord_> i used to call it PtrArray<T>
[19:29:39] *** Joins: rca (rcatolino@moz-ADF749F1.adsl.proxad.net)
[19:29:50] <strcat> I like being able to do this
[19:29:51] <doomlord_> r.,e. 'do you really need ~'
[19:30:04] <strcat> rusti: let x = ~5; let ~ref y = x; (*x, *y)
[19:30:05] -rusti- (5, 5)
[19:30:08] <strcat> really useful in match branches
[19:30:12] *** Quits: canhtak (canhtak@moz-A53E1151.wl.t.ulaval.ca) (Quit: canhtak)
[19:30:16] * strcat shrugs
[19:30:58] <SiegeLord> Maybe Uniq could be Ow to keep it short
[19:31:11] <SiegeLord> I like the connotation somewhat, heh
[19:31:16] <pcwalton> Own :)
[19:31:21] <doomlord_> between ~ and [] you have convinient syntax for C++  unique_ptr<T> ~   vector<T> [T] ptr_array<T>  ~[~T]
[19:31:22] <Ms2ger> Ohm<>
[19:31:26] <pcwalton> Own<T> is not bad actually
[19:31:28] * strcat doesn't like that
[19:31:42] <strcat> people are already confused about ownership in the sense that they think T isn't owned and ~T is
[19:31:47] <doomlord_> pointer with ownership.. pwn
[19:31:51] <doomlord_> pwn<T>
[19:32:01] <SiegeLord> Hah
[19:32:13] <bstrie> pcwalton cmr sfackler: the reddit thread from my amusing anecdote: http://www.reddit.com/r/programming/comments/11pevu/such_a_little_thing_the_semicolon_in_rust/c6ow3g9?context=2
[19:32:19] <Ms2ger> not stack allocated
[19:32:21] <Ms2ger> NSA<>
[19:32:30] <pcwalton> when I explained ownership at Stanford I didn't even use ~, I just used HashMap as my example
[19:32:31] <strcat> unboxed things aren't necessarily stack allocated
[19:32:42] <pcwalton> people got it much more easily, I think
[19:33:04] <strcat> words > punctuation for comprehension/readability - just not very concise
[19:33:12] <cmr> I've always been confused with ~T being "unique" or "owned". It's no more so than File, for example.
[19:33:18] <pcwalton> possibly because HashMap is realistic
[19:33:24] <pcwalton> saying let x: ~int = ~3;
[19:33:26] <pcwalton> isn't realistic
[19:33:45] <cmr> Why not Malloc<T>
[19:33:49] <pcwalton> but let m = HashMap::new()
[19:33:52] <pcwalton> is realistic
[19:33:58] <strcat> cmr: because it's not necessarily malloc
[19:34:03] <cmr> Malloc<T, Allocator>, makes sense to me
[19:34:07] *** Joins: mib_6psl8j (Mibbit@C83F40FA.C3C4EFEF.4BC5EF08.IP)
[19:34:26] <doomlord_> is malloc a verb
[19:34:27] <eddyb> memory allocated. too generic
[19:34:28] *** Quits: jvns (bork@87D98E32.4046EB22.428F94DD.IP) (Ping timeout)
[19:34:29] <eddyb> Boxd
[19:34:33] <eddyb> from Boxed
[19:34:37] <bstrie> doomlord_: can you malloc something?
[19:34:39] <cmr> box is even more generic.
[19:34:41] <eddyb> eeeeeeh
[19:34:41] <Ms2ger> Boxxy<>
[19:34:47] <eddyb> Ms2ger: ~<3
[19:34:50] <cmr> and even less meaningful.
[19:34:58] <Ms2ger> T
[19:34:59] <strcat> bstrie: it's a function so using it as a verb is normal
[19:35:29] <strcat> erf doesn't sound like much of a verb but C makes it so
[19:35:47] <strcat> anyway I like that there's erf and erff
[19:35:58] *** Joins: overfl0w (overfl0w@moz-17EC2DBE.range217-42.btcentralplus.com)
[19:35:59] <bstrie> erf sounds like the sound you make when running at full speed into a waist-high dinner table
[19:36:09] <doomlord_> T :)
[19:36:15] *** Quits: mib_6psl8j (Mibbit@C83F40FA.C3C4EFEF.4BC5EF08.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:37:04] *** Joins: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP)
[19:37:24] *** Joins: alonlevy_ (alon@moz-9E0AF4AC.bb.netvision.net.il)
[19:38:15] <doomlord_> i used to have a need for something i called 'PtrArray<T>' which is now vector<unique_ptr<T> > in C++ and ~[~T] in rust.. nice syntax
[19:38:24] <pcwalton> Boxxxy
[19:38:25] *** Quits: alonlevy (alon@moz-DCBA91C6.bb.netvision.net.il) (Ping timeout)
[19:38:31] <pcwalton> best so far
[19:38:39] <bstrie> pcwalton: the number of xs can be semantically significant
[19:38:57] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[19:38:58] <Ms2ger> xxx is pointer to pointer to pointer, obviosuly
[19:39:01] <Ms2ger> obviously
[19:39:29] *** Joins: canhtak (canhtak@moz-A53E1151.wl.t.ulaval.ca)
[19:39:58] <strcat> doomlord_: and Vec<Uniq<T>> is really worse than ~[~T]? one can be read and the other looks like a bunch of squiggles
[19:40:18] *** Joins: gandalf (zbraniecki@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[19:40:27] <Earnestly> I hear perl is very readable with all those sigils they use
[19:40:32] <strcat> and double-indirection like that shouldn't necessarily look good
[19:40:45] <pcwalton> bstrie: thankfully that's obsolete
[19:41:01] <pcwalton> fn find_even<T:Num>(vec: &[T]) -> Option<T>
[19:41:10] <pcwalton> workaround for not having trait inheritance in those days.
[19:41:18] <SingingBoyo> did Path::init get changed again?
[19:41:30] <bstrie> pcwalton: yes, we've come a long way
[19:41:32] <pcwalton> there was a PR to make it Path::new, dunno if it got merged.
[19:41:44] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[19:42:01] *** Quits: mcpherrin (uid11663@moz-5F4AA75A.irccloud.com) (Quit: )
[19:42:27] <doomlord_> doomlord_, well its not much worse but it takes more space.. just saying how i like what you can express so compactly between ~ and [] in rust
[19:43:36] *** Quits: fabiand (fabiand@moz-7C0869F0.adsl.alicedsl.de) (Quit: Verlassend)
[19:43:49] <doomlord_> heh. Vec for [] ....    some people already use 'Vec' for xyz  (eg looking like glsl) , to differentiate 'vector' (maths) from 'vector' (collection)
[19:43:52] * pcwalton is currently RAII-ifying ARCs
[19:43:56] <SiegeLord> If ~[] becomes Vec, what does ~str become?
[19:44:01] <cmr> SiegeLord: Str
[19:44:12] <pcwalton> String or something. but keep in mind that it is not clear ~[] becomes Vec!
[19:44:14] <bstrie> pcwalton: btw, I think you should start tweeting links to your good HN comments like brendan eich does
[19:44:24] <strcat> Str<V = Vec<T>>
[19:44:26] <pcwalton> only pushable ones.
[19:44:36] <strcat> well
[19:44:39] <strcat> Str<V = Vec<u8>>
[19:44:43] <pcwalton> that depends on DST
[19:44:48] <strcat> need higher-kinded types for this kind of thing
[19:44:54] <doomlord_> heh. there's me deliberating if to start another engine in rust, i'd best hold off until this is resolved :)
[19:45:07] <strcat> it would be a search-and-replace
[19:45:10] <strcat> not a change in semantics
[19:45:18] <SiegeLord> What about &str then?
[19:45:21] <SiegeLord> &Str?
[19:45:30] <pcwalton> StringSlice or Substring
[19:45:33] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[19:45:35] <pcwalton> StrSlice
[19:45:47] <strcat> StrView
[19:45:50] <pcwalton> I think quite possibly not all of this is going to be resolved fully before 1.0 -- some of it may be lang items.
[19:45:55] <pcwalton> but the syntax/semantics will not change
[19:46:02] <pcwalton> it just may become more general.
[19:46:15] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[19:46:37] <strcat> pcwalton: mark the old syntax as deprecated and require an attribute to turn it on + provide a tool to auto-migrate, seems fine
[19:46:54] *** Joins: q66_ (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[19:47:04] <pcwalton> well, what I'm saying that it's possible that something like Uniq<T> may be in the library something like
[19:47:16] <pcwalton> #[lang="uniq"] struct Uniq<T> {}
[19:47:16] <SiegeLord> And &[] becomes VecView?
[19:47:20] <pcwalton> &[] will stay
[19:47:26] <strcat> SiegeLord: it would just be Slice or View
[19:47:43] <pcwalton> &[] stays under both DST/SST proposals AFAIK
[19:47:44] <SiegeLord> This language diabetes is making me sad :P
[19:47:45] <strcat> ah right under DST it would stay
[19:47:53] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[19:48:11] <pcwalton> not all the sugar must go
[19:48:34] <pcwalton> just smart pointer-y sugar. and it's again possible that we will retain sugar for Uniq<T>
[19:48:35] <cmr> It's not even sugar right now. They're fundamental things.
[19:48:52] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[19:48:56] *** Quits: thesnowdog (doug@4D17280F.9D0B7490.6F17036B.IP) (Connection reset by peer)
[19:48:59] <cmr> Once we can actually express them in Rust, *then* they can be called sugar.
[19:49:15] <pcwalton> so if we did something like `#[lang="uniq"] struct Uniq<T> {}` for 1.0, it would be a cheat, but a backwards compatible one
[19:49:34] <pcwalton> there would be a magic type in the library that typeck/astconv just converts unique pointers to
[19:49:37] <pcwalton> much like it does today with kinds
[19:49:51] <pcwalton> err, that it converts *to* today's built-in unique pointers
[19:49:58] <pcwalton> then post 1.0 we make it actually not magic anymore
[19:50:02] <strcat> pcwalton: I already want lang items for every built-in
[19:50:06] <strcat> so you can define methods on them
[19:50:18] <strcat> without traits
[19:50:36] *** Quits: AvianFlu (AvianFlu@moz-31F97978.nyc.res.rr.com) (Ping timeout)
[19:50:48] <pcwalton> mmm, I think that's mostly valuable for vectors, which may just fall out of DST + a Uniq lang item
[19:51:03] <pcwalton> I don't see that much of a value for i32, i64, etc, since you usually want to be able to abstract over all the integer types in the Num trait
[19:51:05] <pcwalton> maybe for "char"
[19:51:07] <doomlord_> DST=?
[19:51:12] <cmr> doomlord_: dynamically sized types
[19:51:25] <cmr> http://smallcultfollowing.com/babysteps/blog/2013/11/26/thoughts-on-dst-1/ and many other posts by Niko
[19:51:46] *** Joins: AvianFlu (AvianFlu@moz-31F97978.nyc.res.rr.com)
[19:52:19] *** Joins: AvianFlu_ (AvianFlu@moz-31F97978.nyc.res.rr.com)
[19:52:20] *** Quits: AvianFlu (AvianFlu@moz-31F97978.nyc.res.rr.com) (Connection reset by peer)
[19:52:45] <SiegeLord> Why can't you have &str with DST?
[19:52:57] <pcwalton> you can
[19:53:02] <pcwalton> &str may stay
[19:53:03] <doomlord_> heh Vec<T> vs ~[T] ... rusts existing notation has already grown on me
[19:53:14] <strcat> str is never mutable if you can't change the size
[19:55:27] <pcwalton> /Users/pcwalton/Source/rust/src/libextra/sync.rs:589:17: 589:21 error: unresolved name `cond`. Did you mean `condvar`?
[19:55:27] *** Joins: thesnowdog (doug@4D17280F.9D0B7490.6F17036B.IP)
[19:55:29] <pcwalton> yay, it's correct!
[19:56:37] *** Quits: AvianFlu_ (AvianFlu@moz-31F97978.nyc.res.rr.com) (Connection reset by peer)
[19:56:39] *** Joins: AvianFlu (AvianFlu@moz-31F97978.nyc.res.rr.com)
[19:57:16] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[19:57:29] <SiegeLord> I wonder if I'll be able to use DST in a matrix library... that sounds exciting
[19:57:40] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[19:57:57] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[19:58:01] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[19:58:52] <brson> ktt3ja: you might consider asking #servo about how to use your lru data structure https://github.com/mozilla/rust/pull/10211
[19:59:00] <FreeFull> pcwalton: Does Rust define what happens on overflow?
[19:59:03] *** Quits: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP) (Ping timeout)
[19:59:06] <brson> ktt3ja: having it used in servo is a good justification for officially maintaining it
[19:59:17] <cmr> FreeFull: yes
[19:59:24] <pcwalton> yes, 2s complement, although it doesn't work yet
[19:59:46] <FreeFull> When working with stuff that might overflow, it's important to use a large enough type
[20:00:02] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[20:00:03] <FreeFull> Maybe you could have something for lower bounds
[20:00:07] <sfackler> there are also some method to do checked operations somewhere
[20:00:16] <sfackler> *methods
[20:00:24] <FreeFull> Sometimes it's also important that overflow does happen
[20:00:26] <bstrie> what net libs does rust-http use?
[20:00:56] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[20:01:20] <strcat> pcwalton: you got the first correct suggestion ever? ;p
[20:01:40] <cmr> bstrie: is uses libstd.
[20:01:42] <cmr> so, libuv.
[20:01:47] <bstrie> kk
[20:07:48] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[20:08:21] *** Joins: jstevans1 (Instantbir@DCCA6B3D.BB968208.DDE5D3F6.IP)
[20:09:33] *** Quits: jstevans (Instantbir@BB20DC06.8FFBE666.DDE5D3F6.IP) (Ping timeout)
[20:09:45] *** Joins: jstevans (Instantbir@moz-B8FACD3B.bootp.virginia.edu)
[20:10:05] *** Quits: jstevans1 (Instantbir@DCCA6B3D.BB968208.DDE5D3F6.IP) (Ping timeout)
[20:11:36] *** Joins: mikezaby (mikezaby@moz-4BF6308B.home.otenet.gr)
[20:11:38] *** Parts: mikezaby (mikezaby@moz-4BF6308B.home.otenet.gr) ()
[20:12:34] *** Joins: abinader (abinader@D8B9C081.E820043D.D4C04133.IP)
[20:13:24] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[20:13:38] *** Quits: jstevans (Instantbir@moz-B8FACD3B.bootp.virginia.edu) (Ping timeout)
[20:15:41] *** Quits: squiddy (squiddy@moz-6D0F7A7.adsl.alicedsl.de) (Input/output error)
[20:16:23] <Ms2ger> One for you guys
[20:16:23] <Ms2ger> What is the most used language in programming?
[20:17:33] <strcat> C, Java, javascript? ;p
[20:17:36] <JamesNZ> Brainf***.
[20:17:38] * JamesNZ hides
[20:17:46] <Ms2ger> Profanity
[20:17:58] <docbrown> According to the TIOBE index: C, followed by Java.
[20:18:01] <doomlord_> english :)
[20:18:21] *** Quits: brson (brson@6A848D32.C1B840DD.76F66111.IP) (Ping timeout)
[20:18:21] <isaacd> x86 or ARM bytecode, if "used by computers" counts?
[20:18:23] <strcat> docbrown: the TIOBE index is languages people have to google answers for the most often
[20:18:24] <strcat> ;p
[20:18:28] <Yoric> docbrown: Still C?
[20:18:34] <bstrie> Ms2ger: historically, probably english
[20:18:41] <docbrown> strcat: That makes sense!
[20:18:57] <Yoric> doomlord_: « Broken English, » then, I guess.
[20:19:19] <strcat> javascript being so low shows it as being bogus imo
[20:19:33] *** Quits: nkoep (nik@moz-CDB0BBF2.vpn.rwth-aachen.de) (Ping timeout)
[20:20:00] *** Joins: pkoerbitz (user@moz-6D0207A3.pool.mediaways.net)
[20:20:05] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Quit: WeeChat 0.4.2)
[20:20:20] <docbrown> To be honest, I just Googled it. So I make no guarantees about its accuracy. ;)
[20:20:51] *** Joins: geoffhill (geoffhill@moz-738DC0DB.org)
[20:20:56] *** Joins: jstevans (Instantbir@FDA1EC16.471081A5.DDE5D3F6.IP)
[20:22:07] <strcat> docbrown: http://adambard.com/blog/top-github-languages-for-2013-so-far/ another pretty meaningless list ;p
[20:22:25] <strcat> (ruby and rails are both on github, as is basically every lib)
[20:22:30] <docbrown> Wow, I was literally just about to post that link...
[20:22:35] <docbrown> Shows how much I know!
[20:22:39] <Sharp> Yeah, there's no way Ruby is that high.
[20:23:00] <bstrie> popularity depends on the crowd you roll with :)
[20:23:03] *** Quits: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net) (Quit: dherman)
[20:23:26] <bstrie> ruby absolutely is that high, in a github context
[20:23:28] *** Joins: alonlevy__ (alon@moz-7A737673.bb.netvision.net.il)
[20:23:30] <Sharp> I roll with a pretty pro-Ruby crowd, and I don't think any of them believe Ruby is the second-most used language either.
[20:23:31] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[20:23:41] <strcat> I think that's a pretty good list for 'languages people are starting projects in since ~2008' beyond ruby being so high ;]
[20:23:57] *** Quits: alonlevy_ (alon@moz-9E0AF4AC.bb.netvision.net.il) (Ping timeout)
[20:24:00] <Sharp> In a Github context, sure, especially if you're only looking at open source projects.
[20:24:49] <bstrie> honestly, I don't think TIOBE is *too* far off from the truth of what programming in industry looks like
[20:25:04] <strcat> the closed-source projects by number are probably mostly Objective-C now.... ;\
[20:25:10] *** Joins: TisButMe (Mibbit@moz-40463609.w80-9.abo.wanadoo.fr)
[20:25:30] <sbalmos> damn iOS
[20:25:33] <docbrown> strcat: Those poor, poor people... :(
[20:26:23] <wycats_> I think it's pretty clear that Github is disproportionately used by Rubyists and JS people
[20:26:37] <wycats_> Node was incubated in Github
[20:26:41] <wycats_> Ruby was the early adopter
[20:26:44] *** Quits: qmx (qmx@moz-B6DBCD05.qmx.me) (Ping timeout)
[20:27:20] <bstrie> wycats_: I always just figured that hosting rails development was github's initial claim to fame, hence the ruby crowd
[20:27:31] *** Joins: qmx (qmx@moz-B6DBCD05.qmx.me)
[20:27:33] <wycats_> the story is more sordid than that
[20:27:37] <bstrie> do tell :)
[20:27:42] <wycats_> https://api.github.com/users/wycats
[20:27:49] <wycats_> "id": 4
[20:27:55] * wycats_ strokes beard
[20:27:57] <bstrie> dun dun duuuuun
[20:28:00] <wycats_> "I was there at the beginning"
[20:28:00] <strcat> wycats_: I don't think node is a significant number of js projects
[20:28:01] <wycats_> :P
[20:28:06] <TisButMe> Hi, I've got a Segfault using stdin() on the second input in a task. See here https://gist.github.com/TisButMe/74c121d98ef3fe00bfa9. Any ideas ? (Using the latest master)
[20:28:07] <wycats_> strcat: you would be wrong
[20:28:10] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[20:28:13] <strcat> if you count any website as js with a js project... js trumps anything
[20:28:17] <strcat> with js*
[20:28:27] <strcat> not by lines of code
[20:28:34] <wycats_> bstrie: are you familiar with Merb?
[20:28:37] <strcat> but by number of 10 line projects ;p
[20:28:54] <wycats_> strcat: that's based on primary language
[20:29:03] <bstrie> wycats_: nope
[20:29:20] <wycats_> bstrie: back in 2007, I was the maintainer of a Rails competitor named Merb
[20:29:21] <strcat> the *only* programming language in 99% of website frontends is js
[20:29:24] <cmr> TisButMe: open an issue
[20:29:26] <wycats_> http://rubyonrails.org/merb
[20:29:32] <wycats_> strcat: HTML ;)
[20:29:37] <strcat> not a programming language
[20:29:54] <wycats_> bstrie: I went to work for Engine Yard on Merb
[20:30:00] <wycats_> I hated svn pretty hard
[20:30:04] <strcat> lots of java projects would be xml projects if you went with that
[20:30:08] <cmr> heh
[20:30:09] <wycats_> :trollface:
[20:30:21] <wycats_> bstrie: but unfortunately, hosting a git project in 2007 sucked hard
[20:30:25] <wycats_> I had played with svk
[20:30:41] <bstrie> strcat: if you're counting js projects on github, most websites published to github won't be js projects. even js-heavy apps will usually have more backend code than frontend, and will be classified as the backend language
[20:30:47] <wycats_> when I moved to SF, I hung out a bit with defunkt
[20:30:50] <wycats_> he told me about github
[20:30:53] <bstrie> strcat: unless they're node
[20:30:54] <cmr> wycats_: what attracts you to Rust?
[20:30:54] <wycats_> and I begged him for an account
[20:31:04] <wycats_> cmr: uno momento
[20:31:07] <cmr> sure
[20:31:09] <wycats_> let me finish my lame story :P
[20:31:19] <cmr> IRC is async!
[20:31:25] <bstrie> wycats_: so was merb the flask to rails' django?
[20:31:27] <wycats_> anyway, I got the first account after the founders
[20:31:30] <wycats_> bstrie: almost
[20:31:39] <wycats_> anyway, Engine Yard became extremely enamored of git
[20:31:46] <wycats_> and we started to beg Rails to switch to Github
[20:31:56] <wycats_> Tom Mornini (CTO of EY) flew down to Chicago to try to persuade them
[20:32:14] <wycats_> keep in mind that at this point Github had no "organizations"
[20:32:17] <wycats_> only user accounts
[20:32:27] <wycats_> https://github.com/rails
[20:32:31] <wycats_> Joined on Apr 01, 2008
[20:32:37] <wycats_> https://github.com/wycats/
[20:32:42] <wycats_> Joined on Jan 11, 2008
[20:32:46] <wycats_> 3 months of lobbying :)
[20:32:57] *** Joins: morphevs (Adium@moz-C1F7EB20.cust.bluewin.ch)
[20:33:17] <wycats_> it felt longer at the time
[20:33:28] <wycats_> anyway, the end of the story is: Rails and Merb merged in December 2008
[20:33:41] <wycats_> and by then github had taken hold of the Ruby ecosystem
[20:33:50] <wycats_> the first version of Bundler had support for gems hosted on github
[20:34:10] <wycats_> http://bundler.io/v0.9/
[20:34:14] <wycats_> search for github
[20:34:36] <wycats_> Node was created in 2009
[20:34:55] <wycats_> so the Node ecosystem was incubated in github after the Ruby ecosystem had colonized it
[20:35:07] <wycats_> I think that's the most sane way of interpreting the events
[20:35:15] <wycats_> which is why Ruby is disproportionately represented
[20:35:44] <wycats_> bstrie: Merb was sort of like Flask, but Rails 3 was about integrating the modular philosophy of Merb into Rails
[20:36:05] <wycats_> which is why most Rails projects these days have so many dependencies, and why Rails itself is much more ecosystem-friendly
[20:36:12] <wycats_> such modularity
[20:36:23] <wycats_> cmr: what I like about Rust is that it gives me low-level control over memory safely
[20:36:33] *** Quits: morphevs (Adium@moz-C1F7EB20.cust.bluewin.ch) (Quit: Leaving.)
[20:36:33] <pkoerbitz> wycats_: very nice story! A part of internet history you could say ;)
[20:36:39] <wycats_> pkoerbitz: hehe
[20:36:46] <wycats_> pkoerbitz: only sort of
[20:36:47] <wycats_> it's so recent
[20:36:59] <Ms2ger> So is the internet :)
[20:37:06] <Ms2ger> And the Web even more so
[20:37:06] <pkoerbitz> I'm sure both rails and github will be around for a bit
[20:37:10] <wycats_> I only started programming in 2005, so I don't feel like anything I was personally a part of qualifies as "history"
[20:37:19] <pkoerbitz> (at least measured in internet-timeframe)
[20:37:24] <wycats_> pkoerbitz: heh
[20:37:25] <wycats_> confirm
[20:38:00] *** Joins: morphevs (Adium@moz-C1F7EB20.cust.bluewin.ch)
[20:38:08] *** Joins: nkoep (nik@moz-15EEC9C5.pool.mediaways.net)
[20:38:13] *** Joins: jvns (bork@87D98E32.4046EB22.428F94DD.IP)
[20:38:34] *** jdm is now known as jack_
[20:38:35] <sbalmos> wycats_: History is written by the victors, and Internet time is so short-lived.
[20:38:45] <wycats_> sbalmos: nice to have won then :P
[20:38:50] <wycats_> I never thought I would win
[20:38:55] <sbalmos> indeed
[20:38:56] <wycats_> bundler was such an underdog
[20:38:57] *** jack_ is now known as jdm
[20:39:02] <wycats_> Merb was such an underdog
[20:39:05] <TisButMe> any idea why calling .flush() on a writer might segfault ?
[20:39:11] *** Joins: pkoerbit` (user@moz-64F4645E.pool.mediaways.net)
[20:39:11] <wycats_> TisButMe: O_O
[20:39:21] <wycats_> I feel like safe code segfaulting in rust is definitionally a bug?
[20:39:24] <cmr> TisButMe: bugs.
[20:39:37] <sbalmos> wycats_: So much of winning is right place, right time, blind luck
[20:39:43] <wycats_> sbalmos: aaaaabsolutely
[20:39:48] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[20:39:49] <Ms2ger> wycats_, yep
[20:39:51] <wycats_> in OSS, also being willing to take a lot of hate on the chin
[20:39:53] <pkoerbit`> Can anyone say in one or two sentences how to nonblockingly read from a socket
[20:40:00] <wycats_> pkoerbitz: in Rust?
[20:40:07] <pkoerbit`> yep
[20:40:10] <wycats_> in Unix you set O_NONBLOCK
[20:40:15] <wycats_> unsure how that works in Rust
[20:40:20] <wycats_> grep the source for O_NONBLOCK?
[20:40:21] <wycats_> :P
[20:40:26] *** Quits: pkoerbitz (user@moz-6D0207A3.pool.mediaways.net) (Ping timeout)
[20:40:29] <pkoerbit`> hm... ;)
[20:40:32] <wycats_> :trollface:
[20:40:45] <Sharp> Trollface or no trollface, that's probably what I would do :P
[20:40:49] <bstrie> wycats_: neat, I love this sort of history :)
[20:40:53] <wycats_> Sharp: indeed
[20:41:00] <wycats_> Sharp: it's mostly not a trollface
[20:41:00] <pkoerbit`> ok thanks
[20:41:01] <wycats_> only a little
[20:41:05] <strcat> it won't be in the rust source though
[20:41:13] <wycats_> strcat: libuv?
[20:41:19] <wycats_> many layers of indirection
[20:41:20] <cmr> pkoerbit`: we don't have nonblocking IO.
[20:41:23] <Sharp> Does libuv do sockets?
[20:41:27] <strcat> yes
[20:41:29] <wycats_> Sharp: yeah
[20:41:30] <cmr> Sharp: it does all of our IO
[20:41:30] <wycats_> of course
[20:41:32] <Sharp> Ah, cool.
[20:41:34] <wycats_> that's the point of libuv
[20:41:37] <wycats_> libuv powers node
[20:41:38] <pkoerbit`> cmr: thanks
[20:41:39] <strcat> but I really wouldn't look there for how to do idiomatic I/O on a specific OS
[20:41:47] <strcat> async I/O requires *very* lossy abstractions
[20:41:48] <Sharp> I wasn't sure if the socket implementation was separate.
[20:41:58] <wycats_> strcat: yeah I was just suggesting if he could find it in the source, he could trace it back to a public API
[20:42:06] <cmr> pkoerbit`: if you want to do async io, spawn a task and use message passing.
[20:42:07] <wycats_> strcat: zomg select
[20:42:08] <wycats_> such lossy
[20:42:15] <strcat> wycats_: select isn't idiomatic anywhere ;p
[20:42:20] <wycats_> zomg epoll
[20:42:22] <wycats_> such lossy
[20:43:15] <strcat> linux only has non-blocking sockets, with ready-based notification (poll, epoll - poll is better with low numbers of idle connections)
[20:43:15] *** Quits: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP) (Client exited)
[20:43:55] <wycats_> strcat: indeed
[20:44:02] <strcat> and you can opt-in to edge triggered hell
[20:44:03] <wycats_> which is why your claim about lossy abstractions is kind of O_O
[20:44:20] <strcat> wycats_: async I/O on linux == very lossy abstraction
[20:44:22] <pkoerbit`> cmr: so I spawn a task and do a 'read' and let the runtime deal with how to map that to the actual system calls?
[20:44:22] <Sharp> wycats_: (e)poll is OS-specific, no?
[20:44:29] <wycats_> Sharp: yeah
[20:44:32] <wycats_> on OSX it's kqueue
[20:44:42] <strcat> kqueue isn't just used like epoll
[20:44:48] <strcat> it can be used that way
[20:44:48] <wycats_> right
[20:44:53] <wycats_> it's a different API
[20:45:05] <strcat> IOCP on windows is totally different - completion based, and you want to use the mode where it wrangles threads itself
[20:45:08] <wycats_> but when people want "more efficient select", it's epoll on Linux and kqueue on OSX
[20:45:15] <strcat> kqueue isn't *just* select
[20:45:16] <strcat> is the point
[20:45:19] <wycats_> indeed
[20:45:20] <strcat> and IOCP isn't like select at all
[20:45:21] <wycats_> strcat: I'll stop pushing your buttons now
[20:45:23] <strcat> ;p
[20:45:32] * strcat cries
[20:45:45] <wycats_> haha
[20:45:47] <wycats_> such tears
[20:46:04] * sbalmos pushes strcat's buttons, to return the universal balance
[20:46:07] <wycats_> I think it depends on what level of abstraction the rest of your program is in
[20:46:18] <strcat> wycats_: well if you just want Good Enough, it's fine
[20:46:25] <strcat> but if you want to beat nginx, it's not ;p
[20:46:27] <wycats_> in Ruby, select is almost always going to be "good enough" because everything else is blowing away cache lines left and right etc.
[20:46:31] <wycats_> strcat: confirm
[20:46:49] <pkoerbit`> for now good enough would be fine
[20:46:52] <strcat> wycats_: where libuv really hurts on linux is file I/O because it hands it all off to a thread pool
[20:46:56] <wycats_> you have to be writing at a level of abstraction that allows you to control that level of detail
[20:47:00] <strcat> 100x slower is not unordinary
[20:47:07] <wycats_> strcat: yeah... it's sad
[20:47:25] <wycats_> strcat: you don't even really need async for files anyway
[20:47:30] <wycats_> my disk doesn't have multiple heads :P
[20:47:37] <strcat> wycats_: well, on an SSD you have a nice upper bound
[20:47:42] <tiffany> I don't really get why linux has no async file IO
[20:47:45] <strcat> traditional HDD can have ridiculous latency
[20:47:49] <strcat> tiffany: because it's not useful
[20:47:52] <tiffany> some people blame it on hard drive controllers but that doesn't make any sense
[20:48:00] <wycats_> strcat: if all you're doing is parallelizing File I/O there is no point
[20:48:08] <tiffany> the controllers are fundamentally asynchronous, you can't block the OS on disk IO
[20:48:09] <strcat> tiffany: async I/O or non-blocking sockets are for *scaling*
[20:48:18] <wycats_> webscale
[20:48:22] <strcat> async I/O is slower
[20:48:34] <wycats_> strcat: you can do very well with threads these days
[20:48:38] <wycats_> on Linux
[20:48:40] <tiffany> how is it slower?
[20:48:42] <strcat> yeah linux will happily let you spawn 50k threads
[20:48:47] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[20:48:47] <wycats_> strcat: more than 50k
[20:48:49] <wycats_> 100k easy
[20:49:00] <strcat> wycats_: sure, but you start paying more and more for the context switches
[20:49:03] <wycats_> yeah
[20:49:11] <strcat> and mmap is log(n)
[20:49:18] <wycats_> I think 100k is mostly fine in practice
[20:49:25] <wycats_> unless you have a GIL :P
[20:49:38] <wycats_> NTPL++
[20:49:54] <strcat> drepper++ (too bad he's at goldman sachs now) ;p
[20:49:59] <strcat> assholes get stuff done
[20:50:11] <wycats_> strcat: is that a lesson you have taken to heart?
[20:50:14] <wycats_> :P
[20:50:17] <wycats_> he's smart and insane
[20:50:25] <wycats_> I was reading his shared object guide yesterday
[20:50:26] <strcat> he's not insane, just anti-social
[20:50:27] <wycats_> good stuff
[20:50:42] <wycats_> http://www.akkadia.org/drepper/dsohowto.pdf
[20:50:50] <wycats_> strcat: probably just very introverted
[20:50:52] <wycats_> I'd guess
[20:50:58] <strcat> anti-social personality disorder is why he's a VP at goldman sachs
[20:51:01] * strcat doubts that ;p
[20:51:02] *** Joins: justinstoller (justinstol@EE389F81.B7963FC6.3E8C195A.IP)
[20:51:14] <strcat> although I'm pretty sure half the people working at goldman are VPs
[20:51:16] <strcat> just cause...
[20:51:17] <wycats_> his "everything you need to know about memory" thing is good too
[20:51:27] <wycats_> strcat: confirm
[20:51:36] <strcat> wycats_: he also created the thread-local storage model used by *nix AFAIK
[20:51:41] <wycats_> seems nice
[20:51:55] <strcat> if only he didn't have static linking so much
[20:51:59] <strcat> s/have/hate/
[20:52:02] <wycats_> strcat: yeah
[20:52:09] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[20:52:15] <wycats_> strcat: I can see why, but for basically every case I have ever had I have no choice
[20:52:25] <wycats_> not interested in fucking around with what else might be running in my process
[20:52:58] <wycats_> if you build an SO to give to people to run, you cannot control the environment
[20:53:01] <wycats_> QED
[20:53:55] <strcat> and it's slow ;p
[20:54:33] <strcat> ELF at least results in sharing the objects between processes but I doubt it pays off until you have a ridiculous variety of stuff open
[20:54:42] <strcat> because the individual applications are not using much of the libs
[20:54:46] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[20:54:55] <strcat> cross-library LTO for release builds would eat all that away ;p
[20:54:59] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[20:55:11] <strcat> musl puts every function in a separate .o to deal with this
[20:55:24] *** Joins: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP)
[20:55:36] <strcat> (except for a few with a couple functions)
[20:55:54] <cmr> ahh is that why they do it?
[20:56:03] <cmr> makes sense
[20:56:28] *** Joins: dredozub_ (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[20:56:32] <strcat> well and it's easier to maintain that way
[20:56:38] <strcat> gmp does it too for that reason
[20:57:21] <strcat> musl will be uniformly faster than glibc soon enough... and incredibly small
[20:57:22] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[20:57:32] *** Quits: abinader (abinader@D8B9C081.E820043D.D4C04133.IP) (Quit: Fui!)
[20:57:48] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[20:57:52] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[20:58:04] <strcat> and a lot saner (consistently uses floating point exceptions, never sets errno for math functions, etc.)
[20:58:16] *** Quits: dredozub_ (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[20:58:25] *** Joins: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP)
[20:59:22] <strcat> https://sourceware.org/glibc/wiki/Development_Todo/Enhancing_malloc this is sad
[20:59:34] <strcat> Use pools for sizes < 64
[20:59:35] <strcat> Use thread cache to avoid atomic operations when possible. 
[20:59:37] <strcat> yeah...
[20:59:55] <strcat> at least they're going to work out a much better interface than mmap/sbrk soon
[21:00:18] *** Quits: moostik (Icedove@moz-698B575F.w86-212.abo.wanadoo.fr) (Ping timeout)
[21:00:46] <strcat> malloc(1) in glibc uses 32 bytes ;[
[21:01:05] <strcat> and the heap totally fragments since small stuff mostly uses sbrk
[21:01:17] <strcat> lots of false sharing
[21:01:19] *** Quits: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP) (Ping timeout)
[21:01:19] <tiffany> does it use pools for sizes >64 bytes?
[21:01:25] <strcat> no
[21:01:45] <tiffany> hm.. I thought it did, though it's been a long time since I last looked at glibc's allocator
[21:01:56] <strcat> it tries to manage a global heap with sbrk and locks, and if it detects contention (with stupid heuristics) it tries to start using arenas
[21:01:58] <tiffany> spent most of the time being horrified by the amount of preprocessor gnu uses
[21:02:30] <strcat> the global sbrk heap gets immensely fragmented, and not just for large objects
[21:02:36] *** Joins: rca_ (rcatolino@moz-996748DF.adsl.proxad.net)
[21:03:07] <o11c> with linux as it is, would it not be better to use MMAP for *everything*?
[21:03:14] *** Quits: rca (rcatolino@moz-ADF749F1.adsl.proxad.net) (Ping timeout)
[21:04:29] <strcat> o11c: not necessarily
[21:04:41] <strcat> sbrk is okay if you don't plan on releasing the memory, ever
[21:04:48] <strcat> if you do plan on that, it's not going to work
[21:05:00] <strcat> jemalloc uses only mmap
[21:05:04] <strcat> tcmalloc uses both
[21:05:26] <tiffany> is it bad if you use mmap with stuff that never gets freed?
[21:05:33] <wycats_> strcat: honestly, I'm not worried too much about size
[21:05:33] <strcat> no
[21:05:40] <strcat> mmap hits RCU so it scales better
[21:05:45] <wycats_> Rails processes are like 100MB :P
[21:05:48] <strcat> I think with sbrk you have no choice but to use locking
[21:06:24] <strcat> and with mmap you can have many pools you can let go of separately, rather than one massive pool you can only shrink from the end (you'll really never be able to)
[21:07:18] *** Ms2ger is now known as bors
[21:07:20] <strcat> wycats_: most malloc'ed stuff is going to be small things or vectors/hashmaps
[21:07:30] <strcat> and glibc is pathological for both
[21:07:39] <strcat> it's only okay for fairly big objects
[21:07:47] <strcat> as in 4K+ that you aren't realloc'ing
[21:07:56] <tiffany> how small is small?
[21:08:08] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[21:08:09] <strcat> small as in less than 4K
[21:08:16] <strcat> and especially less than say, 512 bytes
[21:08:16] <tiffany> oh
[21:08:22] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[21:09:01] <sbalmos> BTW, maybe it's just me, but is there a reason why rustc outputs declarations to practically all LLVM intrinsics, even if they're not used?
[21:09:08] <strcat> anyway glibc has really unpredictable mem usage from caching, lots of issues with fragmentation, false sharing of very small allocs, etc.
[21:09:27] <strcat> sbalmos: imperfect implementation of the compiler
[21:09:36] <strcat> it's a tad simpler that way
[21:09:39] <sbalmos> strcat: That's what I figured.
[21:10:01] <sbalmos> strcat: Ya. Easier to just output rather than try and keep a list of what intrinsics were used during output, then output during write
[21:10:05] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[21:10:52] *** Joins: brson (brson@6A848D32.C1B840DD.76F66111.IP)
[21:10:52] *** ChanServ sets mode: +ao brson brson
[21:10:59] <Sharp> Wait, Ms2ger is bors?  Did I miss something?
[21:11:06] <brson> 405 people in #rust
[21:11:11] <bors> Sharp, some tests are failing.
[21:11:15] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[21:11:46] <bstrie> bors has become sentient
[21:11:51] <bstrie> the machine uprising has begun
[21:12:03] <bstrie> dear god, the doomsday preppers were right!!
[21:12:06] <clement> I'm looking for quickcheck / smallcheck equivalents
[21:12:17] * bors cackles
[21:12:27] <erickt> brson: wow that's a bunch
[21:12:28] <Sharp> Death by bors: not so bad?
[21:12:35] <clement> I've seen rust-quickcheck and qc.rs is one recommended?
[21:12:43] <bstrie> clement: hm. various people have taken a stab at quickcheck over the years, but I don't know of any widely used or maintained implementation
[21:12:56] <bors> Sharp, if you want your PR to be merged, bring me your leaders.
[21:13:05] <strcat> sbalmos: I think it should keep track and do it lazily
[21:13:12] <strcat> it's just very low on any importance scale ;p
[21:13:25] <Sharp> bors: You drive a hard bargin :(
[21:13:26] <bstrie> sbalmos: if I had to guess, I'd say that those won't work with the most recent version of rust
[21:13:37] <strcat> because strip-dead-prototypes eats them in a dozen microseconds
[21:13:38] <bstrie> er
[21:13:42] <bstrie> clement: ^^
[21:13:44] <sbalmos> heh
[21:13:55] <strcat> makes --opt-level=0 output pretty ugly though
[21:13:59] <strcat> for small programs
[21:14:17] <clement> bstrie: I see.
[21:14:31] <clement> bstrie: I was trying to re-implement it myself
[21:14:33] <clement> ^^
[21:14:39] <strcat> tiffany: http://gperftools.googlecode.com/svn/trunk/doc/tcmalloc.html this is really out-of-date but it's good ;p
[21:14:48] <clement> qc.rs has most github activity, whatever it means
[21:14:57] <Leo`> what's the difference between num::max and cmp::max in std ?
[21:16:13] * bors shuts down the bots and goes to bed
[21:16:17] <bors> Merge you in the morning
[21:16:34] *** Quits: jvns (bork@87D98E32.4046EB22.428F94DD.IP) (Ping timeout)
[21:17:37] <Leo`> bors: is the bot ? :o
[21:17:50] *** Quits: bors (Ms2ger@moz-A073B78.adsl-dyn.isp.belgacom.be) (Quit: beep)
[21:18:04] <jdm> bors has achieved sentience
[21:18:06] * strcat reloads the bot-killing shotgun
[21:18:27] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[21:19:10] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Ping timeout)
[21:19:22] <bstrie> Leo`: now that bors has become self-aware, referring to it as "the bot" is highly insensitive
[21:19:49] <bstrie> Leo`: I think one might be for floating point and one for integers, or something
[21:22:01] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[21:23:29] * strcat thinks doing it like https://github.com/thestinger/rust-core/blob/master/core/cmp.rs is saner
[21:23:39] <strcat> floats can have their own min/max/whatever
[21:23:56] <strcat> and they can sit in the corner and ponder why breaking sane equality/ordering semantics is bad
[21:24:39] <strcat> they won't be completely alone because they can be there with SQL NULL and extremely screwed up MySQL NULL
[21:25:00] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:25:29] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:25:29] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Connection reset by peer)
[21:25:50] <strcat> no idea how to do the numeric traits though ;p
[21:30:33] *** Quits: tcr (tcr@moz-EAC95265.hfc.comcastbusiness.net) (Ping timeout)
[21:31:33] *** Quits: dbaupp (Thunderbir@moz-EB2EFE6F.lns20.syd6.internode.on.net) (Ping timeout)
[21:31:33] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[21:31:42] *** Joins: tcr (tcr@moz-EAC95265.hfc.comcastbusiness.net)
[21:32:52] *** Quits: loren (loren@1F18520C.8C2A521C.405878F2.IP) (Quit: leaving)
[21:32:53] *** Joins: loren (loren@1F18520C.8C2A521C.405878F2.IP)
[21:34:41] <bascule> bstrie: lolol
[21:34:48] <bascule> I need to read the story Bors is from
[21:35:18] <Leo`> what replaces link_args ?
[21:35:37] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[21:36:11] <Luqman> Leo`: #[link_args = "-lfoo"] => #[link(name = "foo")]
[21:36:40] <Blei> bascule: there's another one, in wheel of times
[21:36:45] <Blei> only for one chapter though
[21:37:09] *** Quits: tcr (tcr@moz-EAC95265.hfc.comcastbusiness.net) (Client exited)
[21:37:19] *** Quits: Jesin (Jesin@moz-63C897DA.res.lehigh.edu) (Quit: Leaving)
[21:38:49] <Leo`> Luqman: above the function definition, as before ?
[21:39:36] <sfackler> same place as #[link_args] went
[21:39:40] <Leo`> because there is also a link(name) at the top of the crate for the libs
[21:39:41] <Leo`> well ok
[21:39:49] *** Joins: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP)
[21:39:55] <sfackler> oh, yeah, those mean different things
[21:40:24] <sfackler> the link(name) at the top of crates is going away iirc
[21:40:54] *** Quits: w3lcome (Mibbit@moz-49575A06.home.otenet.gr) (Quit: http://www.mibbit.com ajax IRC Client)
[21:40:56] *** Quits: Blei (philipp@moz-B2F9E4BD.cust.bluewin.ch) (Quit: WeeChat 0.4.2)
[21:41:18] <Luqman> Leo`: above an extern block
[21:41:40] <Leo`> sfackler: oh ?
[21:42:17] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[21:42:19] <brson> acrichto: are we at the point yet where we can remove the deprecated crate-level link attributes? maybe we should add a warning to the compiler about these
[21:42:43] <brson> maybe this is something i can do myself
[21:42:48] <sfackler> brson: they're required by rustpkg iirc
[21:42:51] <sfackler> er, rustdoc
[21:43:00] <acrichto> brson: kinda, we're removing a feature that isn't gettig replaced with something
[21:43:08] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[21:43:16] <acrichto> but I don't think there are any major blockers
[21:43:29] <acrichto> the rustdoc thing just needs some smarter inference
[21:43:37] <brson> this pr replaces it with #[package_id] https://github.com/mozilla/rust/pull/10593
[21:43:44] <brson> which contains both a name and version
[21:43:54] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[21:44:05] *** Quits: jstevans (Instantbir@FDA1EC16.471081A5.DDE5D3F6.IP) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[21:44:08] <strcat> lots of C libs need more than a -lname to link against
[21:44:23] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[21:44:32] *** Quits: jackneill (jackneill@moz-53D983DF.pool.digikabel.hu) (Quit: WeeChat 0.4.1)
[21:44:44] <acrichto> brson: wycats_ ran into recently that we're not matching against things like target arch, so it would be nice to have the logic stick around in the compiler at least
[21:44:56] <wycats_> ccc
[21:46:30] *** Joins: lenstr (lenstr@38CC5AE6.9636F313.7A27613B.IP)
[21:47:04] <Luqman> strcat: like what? the only other common one i could think of is maybe -L if it isn't in the usual library search paths
[21:49:15] *** Joins: ofeldt- (ofeldt@moz-39FCA11A.dip0.t-ipconnect.de)
[21:49:59] *** Quits: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP) (Ping timeout)
[21:50:07] <brson> Luqman: -framework is needed on os x
[21:50:11] *** Quits: ofeldt (ofeldt@moz-D6AAF9FA.dip0.t-ipconnect.de) (Ping timeout)
[21:50:14] *** Quits: KindOne (KindOne@moz-B764F4D3.dynamic.ip.windstream.net) (Ping timeout)
[21:50:14] <brson> acrichto: we don't do -framework yet, right?
[21:50:19] <acrichto> brson: I added it :)
[21:50:35] <acrichto> brson: https://github.com/mozilla/rust/issues/10742
[21:50:42] <Luqman> brson: #[link(name = "foo", kind="framework")]
[21:50:55] <acrichto> https://github.com/alexcrichton/rust/blob/d4c40b519b080a08a37d27e015083fd250fdd197/src/test/run-pass/osx-frameworks.rs
[21:50:57] <brson> :-D
[21:51:27] *** Joins: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net)
[21:52:18] *** Quits: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net) (Connection reset by peer)
[21:52:47] *** Joins: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net)
[21:52:49] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[21:53:23] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[21:53:37] *** Quits: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) (Quit: Savago)
[21:55:10] <bjz> acrichto: you are handling the #[link_args = "..."] change, right?
[21:55:26] <acrichto> bjz: what do you mean by "handling", it should all be done already?
[21:55:31] <bjz> acrichto: how do you link to frameworks on osx?
[21:55:38] <acrichto> see Luqman's message above
[21:55:43] <bjz> ohh
[21:55:44] <acrichto> also that file I linked to
[21:55:50] <bjz> *facepalm*
[21:56:06] *** Joins: KindOne (KindOne@moz-C9D2F02B.dynamic.ip.windstream.net)
[21:56:09] <tiffany> freetype2 requries more than a -l
[21:56:09] <bjz> so you can do that in the lib right?
[21:56:18] <tiffany> it does some header file silliness
[21:56:23] <acrichto> bjz: yes, everywhere :)
[21:56:30] <bjz> or do you do that in the main.rs?
[21:56:32] <tiffany> but rust doesn't need C headers
[21:56:34] <bjz> or both?
[21:56:40] <bjz> tiffany: can
[21:56:45] <bjz> 't use headers in Rust
[21:56:48] <acrichto> bjz: right now #[link] for native libraries is only recognized when placed on extern blocks
[21:56:58] *** Quits: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net) (Client exited)
[21:57:03] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[21:57:19] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[21:57:53] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[21:58:57] *** Quits: GeneralMaximus (ankur@B4DF73F6.7D84F5AD.260B031E.IP) (Quit: Computer has gone to sleep.)
[21:59:02] *** Joins: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net)
[21:59:07] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[21:59:22] <Luqman> bjz: oh right, i have a branch of glfw-rs i updated
[21:59:32] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[21:59:36] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[21:59:42] <bjz> Luqman: ohh, I was updating it :P
[21:59:49] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[21:59:56] <bjz> Luqman: want to PR me?
[22:00:25] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Ping timeout)
[22:00:34] <Luqman> bjz: done
[22:00:36] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[22:01:22] *** Quits: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net) (Connection reset by peer)
[22:01:31] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[22:02:07] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[22:02:42] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[22:02:49] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[22:04:07] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[22:04:07] *** ChanServ sets mode: +ao dherman dherman
[22:04:34] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Quit: Leaving.)
[22:04:36] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[22:06:31] <Leo`> strcat: you've got a PR on rust-gmp
[22:07:19] *** Quits: geoffhill (geoffhill@moz-738DC0DB.org) (Ping timeout)
[22:08:14] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[22:08:15] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[22:08:30] *** vfetwnuncszu is now known as dcrewi
[22:08:41] *** Joins: skade (skade@moz-A586637D.pools.arcor-ip.net)
[22:08:52] *** Joins: Jesin (Jesin@moz-63C897DA.res.lehigh.edu)
[22:09:36] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Quit: Leaving.)
[22:09:39] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[22:10:35] <ezyang> Stupid numerics question: I'm trying to multiply two uints together to get a c_uint, but Rust is complaining that the ops to * should be u32 
[22:10:55] <ezyang> What's the proper way to do this? 
[22:11:06] <benh> rust uints are poiner-sized, c_uint is c-unsigned-int sized
[22:11:11] <benh> pointer*
[22:11:17] <ezyang> oh, oopsies 
[22:11:43] *** Quits: TisButMe (Mibbit@moz-40463609.w80-9.abo.wanadoo.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[22:11:48] <benh> I don't remember whether just casting with "as u32" is still politically correct
[22:12:56] <ezyang> I swaer to God I thought size_t was integer size. 
[22:13:03] <ezyang> why are the sample codes s/size_t/c_uint/ 
[22:13:43] <benh> hm?
[22:14:21] <ezyang> So, I had a sample prototype for aligned_alloc in rust-core, which used uint 
[22:14:30] <ezyang> but actually that's wrong, at least for libc aligned_alloc 
[22:14:51] <bjz> acrichto: replied to https://github.com/mozilla/rust/pull/10818#issuecomment-29920413
[22:15:17] <acrichto> bjz: right now SharedPort is just a round-robin style port
[22:15:23] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[22:15:35] <acrichto> bjz: so you'd just manually set up another chan/port in cloning a SharedClient
[22:15:50] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Connection reset by peer)
[22:15:51] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[22:16:08] <ezyang> ugh, but std::libc::size_t seems to be hardcoded to u64 :( 
[22:16:17] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[22:16:22] <strcat> ezyang: uint is uintptr_t in C
[22:16:24] <sfackler> only on platforms where that is true
[22:16:24] <bjz> acrichto: hm, not sure I understand
[22:16:32] <strcat> size_t matches uintptr_t on every arch rust runs on
[22:16:32] *** Quits: lenstr (lenstr@38CC5AE6.9636F313.7A27613B.IP) (Ping timeout)
[22:16:48] <strcat> unless someone plans on porting it to 16-bit x86, that will probably remain true
[22:16:55] <ezyang> Huh 
[22:16:55] *** Quits: pkoerbit` (user@moz-64F4645E.pool.mediaways.net) (Ping timeout)
[22:16:57] *** Joins: pkoerbit` (user@moz-64F4645E.pool.mediaways.net)
[22:16:59] <acrichto> bjz: something like a MutexArc<~[Port]> and send() == ports[next++].send()
[22:17:00] <ezyang> That's really strange 
[22:17:04] <strcat> ezyang: why is that strange?
[22:17:11] <strcat> uintptr_t is pointer-size
[22:17:20] <ezyang> No, that's inconsistent with the compiler error I'm getting; what you're describing sounds reasonable. 
[22:17:23] <strcat> size_t is able to refer to every byte you can possibly allocate
[22:17:35] <strcat> ezyang: uint is treated as a different type than u64
[22:17:44] <strcat> whether or not they match
[22:17:50] <ezyang> uintptr_t is a uint, right? 
[22:18:04] <strcat> uintptr_t and size_t in C match the size of uint in rust
[22:18:41] <strcat> rust's std::libc defines them whatever arbitrary way it feels like, I personally don't bother using it for fixed-size integers or pointer-size integers because rust already has them
[22:18:55] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[22:19:13] <ezyang> ok. So now, given a and b which are uint, when I do a * b as size_t, Rust complains that it was expecting a u64 but found a uint 
[22:19:24] <cmr> (a * b) as size_t
[22:19:24] <bjz> strcat: replied to https://github.com/mozilla/rust/issues/9940#issuecomment-29944442
[22:19:29] <ezyang> ...ohhhh 
[22:19:30] <strcat> ezyang: it's not parsing as you expect
[22:19:36] <ezyang> well, there I go 
[22:19:45] <ezyang> :o) 
[22:19:49] <bjz> strcat: intptr and uintptr are great names
[22:19:53] <strcat> ;p
[22:20:19] <ezyang> Having the correct types makes me feel better and, who knows, maybe one day the cast won't be a no-op ;) 
[22:20:30] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[22:20:32] <ezyang> I kind of wish Rust had sized integer types though :o 
[22:20:43] <benh> type intptr = *int :|
[22:20:47] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[22:21:00] <ezyang> "it's not even shorter" 
[22:21:24] <cmr> ezyang: we do have sized integer types.
[22:21:31] <cmr> {u,i}{8,16,32,64}
[22:21:50] *** Quits: pkoerbit` (user@moz-64F4645E.pool.mediaways.net) (Ping timeout)
[22:21:50] <strcat> if you know 32-bit is enough, use u32
[22:22:00] <strcat> if you want a pointer-sized integer, use uint
[22:22:01] * ChrisMorgan wonders if a patch renaming uint/int to uintptr/intptr would be accepted
[22:22:06] <strcat> if you don't know the bounds, use a big integer
[22:22:13] <cmr> ChrisMorgan: brson agreed to it iirc
[22:22:14] <strcat> I don't see int/uint as a good default at all
[22:22:21] <ChrisMorgan> No, I don't either.
[22:22:24] <strcat> even for a counter they're bad, they might not be big enough
[22:22:56] <bjz> strcat: the names a too succinct and pretty
[22:23:13] <bjz> *are
[22:23:16] <benh> the name for the "index vectors with this" type ought to be pretty :(
[22:23:17] <ezyang> "you could make int and uint arbitrary precision" :o 
[22:23:29] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[22:23:30] <ezyang> ^--bad ideas 
[22:23:47] *** Quits: skade (skade@moz-A586637D.pools.arcor-ip.net) (Quit: Textual IRC Client: www.textualapp.com)
[22:23:51] <TeXitoi> ezyang: that's Haskell solution ;)
[22:23:55] <bjz> benh: but uintptr conveys semantic information on an api level
[22:24:06] <ChrisMorgan> brson: is this so (that you approve of int/uint -> intptr/uintptr)? If so, could you approve of https://github.com/mozilla/rust/issues/9940?
[22:24:07] <isaacd> ~int   <--terrible syntax for arbitrary precision integer :P
[22:24:09] <ezyang> TeXitoi: You found me out! 
[22:24:17] <strcat> isaacd: lets not abuse ~ any more
[22:24:20] <benh> :D
[22:24:21] <TeXitoi> but our bigint is soo slow... :(
[22:24:25] <isaacd> strcat: indeed not!
[22:24:26] <bjz> benh: when taking a vector index, for example
[22:24:35] <strcat> Int would work fine for a big integer
[22:24:46] * ChrisMorgan wishes we had bounded integers so that you could have a type which was genuinely constrained to the range [1, 100], for example.
[22:24:56] <isaacd> I like haskell's "Integer" as arbitrary precision (spelling the word out)
[22:24:59] <bjz> ChrisMorgan: +1
[22:25:00] <strcat> ChrisMorgan: go use Ada instead
[22:25:02] <strcat> ;p
[22:25:07] <bjz> ChrisMorgan: and mod types :D
[22:25:13] <FreeFull> ChrisMorgan: Didn't Pascal have that?
[22:25:15] *** Joins: lenstr (lenstr@2B74E188.9636F313.7A27613B.IP)
[22:25:26] <ezyang> Well, Pascal didn't have a dependent type system :) 
[22:25:28] <bjz> And dimensional analysis!
[22:25:38] <FreeFull> I like idris better than ada
[22:25:42] <ChrisMorgan> Before we could do that, though, I presume we'd need things like generics-over-integers.
[22:25:53] <strcat> ChrisMorgan: it's not going to work out even with that
[22:25:53] <bjz> FreeFull: <3 idris
[22:26:02] *** Quits: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP) (Client exited)
[22:26:06] <ezyang> Oh, hm, Rust doesn't upcast small integer types into larger ones 
[22:26:23] <ezyang> maybe I won't define my nats as u32s then 
[22:26:30] <ChrisMorgan> ezyang: yes, make it all explicit.
[22:27:51] *** Quits: isaacd (me@moz-6902374D.dhcp.oxfr.ma.charter.com) (Quit: Leaving.)
[22:28:15] *** Joins: Hildar (Mibbit@moz-7F4621B6.cable.virginm.net)
[22:28:15] *** Quits: IRCMonkey29583 (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: IRCMonkey29583)
[22:28:45] <ezyang> Well, that kind of sucks when you're multiplying two u32s together, and you know the result fits into a u64, but you have to cast both of these into u64 before doing the mul explicitly 
[22:28:55] *** Joins: jvns (bork@87D98E32.4046EB22.428F94DD.IP)
[22:29:09] <ezyang> well, won't complain too much; most of the time I just don't pay any attention to integer overflow :( 
[22:29:35] *** Quits: lenstr (lenstr@2B74E188.9636F313.7A27613B.IP) (Ping timeout)
[22:30:47] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[22:30:48] <brson> ChrisMorgan: i have not thought about renaming int to intptr yet
[22:30:52] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[22:31:48] *** Quits: morphevs (Adium@moz-C1F7EB20.cust.bluewin.ch) (Quit: Leaving.)
[22:32:15] *** Quits: rca_ (rcatolino@moz-996748DF.adsl.proxad.net) (Ping timeout)
[22:33:42] <zxcdw> ezyang: Why you say that in a past tense? Does Pascal have it now? :o
[22:33:52] <zxcdw> Or is Pascal somehow gone? :P
[22:34:04] *** Joins: morphevs (Adium@moz-C1F7EB20.cust.bluewin.ch)
[22:34:10] <brson> ChrisMorgan: left a comment. the issue isn't clear to me yet
[22:35:05] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[22:35:11] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: willingc)
[22:35:55] <strcat> brson: might want to have a solid bigint in libstd before changing it and make Int an overflow checked int expanding to it
[22:36:26] <ezyang> zxcdw: "Pascal is dead to me! DEAD!" 
[22:36:31] <strcat> I think that's a sane default for application level code
[22:37:31] <brson> strcat: and leave the primitive types unchecked?
[22:37:36] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Connection reset by peer)
[22:37:38] <strcat> brson: yes
[22:37:40] <zxcdw> ezyang: So they say about C64 too, but I beg to differ! ;)
[22:37:47] <ChrisMorgan> strcat: don't you think that would be a pretty radical feature for a language targeted where Rust is? (I reckon it's a great idea, fits in well with Rust's safety.)
[22:37:52] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[22:38:02] <FreeFull> zxcdw: C64's spirit lives on in the demoscene
[22:38:14] <strcat> brson: I really don't think failing is much better than wrapping - either way, it's a bug
[22:38:16] <brson> strcat: so maybe remove int, uint, typedef IntPtr, UIntPtr, and add checked Int/Uint?
[22:38:25] <brson> strcat: failing is safe
[22:38:35] <strcat> a big unsigned int might not make sense
[22:38:37] *** Joins: carter (carter@moz-F3C2A2D8.nycmny.fios.verizon.net)
[22:38:47] <strcat> brson: so is wrapping ;p
[22:38:53] <zxcdw> FreeFull: Oh, you! :) Greetings, you don't know me but I must agree! ;)
[22:39:00] <o11c> a big unsigned int would be useful for some things
[22:39:02] <strcat> failure can be unsafe in low level code just like overflow
[22:39:05] <brson> strcat: why doesn't a big uint make sense?
[22:39:29] <o11c> you just don't implement subtract on it, that's all
[22:39:32] <strcat> brson: because the range it can cover isn't any bigger and it adds a failure case
[22:39:54] <strcat> gmp doesn't have an unsigned int fwiw
[22:40:26] *** Joins: dbaupp (Thunderbir@4F13D67D.D5A1DCF.37681C44.IP)
[22:40:42] <FreeFull> zxcdw: Got a pouet account?
[22:41:02] <brson> it's kind of strange that the default integer type would be a library type. hard to explain in the tutorial
[22:41:26] <o11c> I think default int being bigint makes sense
[22:41:36] *** Joins: pinpupgeek (Mibbit@moz-608F14C1.ftth.glasoperator.nl)
[22:41:39] <o11c> and default int being different by platform is a *really* bad idea
[22:41:52] <FreeFull> I think it makes sense to offer both bigint and int
[22:42:00] <o11c> of course
[22:42:04] <SiegeLord> This bigint going to be slower than int?
[22:42:11] <zxcdw> FreeFull: Sure, r-A, although I am not too active of a scener myself :)
[22:42:11] <sfackler> yes
[22:42:23] <strcat> brson: well it wouldn't be the 'default', just a sane choice for most application code
[22:42:34] <FreeFull> zxcdw: Ok, never saw you before
[22:42:36] *** Quits: pinpupgeek (Mibbit@moz-608F14C1.ftth.glasoperator.nl) (Quit: http://www.mibbit.com ajax IRC Client)
[22:42:36] <brson> strcat: it's what you would tell people to use by default
[22:42:41] <strcat> yeah
[22:42:52] <SiegeLord> Then what exactly is the point... int is bad because it's slower and larger than i32
[22:42:57] <brson> strcat: also they type that ints infer to?
[22:42:59] *** Quits: peterdn (chatzilla@moz-5EB9CC81.as13285.net) (Client exited)
[22:43:03] <brson> does it have to be a lang item?
[22:43:06] *** Joins: pinupgeek (rramdas@moz-608F14C1.ftth.glasoperator.nl)
[22:43:07] <brson> seems so
[22:43:26] <FreeFull> Nowadays int in C seems to be 32-bit most places
[22:43:41] <FreeFull> I don't think having it be 32-bit would be so bad
[22:43:41] <Ralith> plenty of microcontrollers around
[22:43:45] <strcat> brson: I don't think we need a fallback for generic literals but we do need a lanf item trait for inferring as a library type
[22:43:47] <strcat> lang*
[22:44:07] <FreeFull> And for microcontrollers you can specify what size you want
[22:44:20] <FreeFull> You probably want to anyway
[22:45:47] *** Parts: lfox (lfox@moz-89EEE1BF.nyc.res.rr.com) ()
[22:48:34] <strcat> failing on overflow won't be slower than expanding to a big int on overflow
[22:48:45] <ezyang> What's the standard method for adding padding to a Rust struct? 
[22:48:55] <strcat> it will increase the size from from 8 bytes to 16 bytes
[22:49:08] <strcat> won't be faster than*
[22:49:23] <dbaupp> ezyang: struct Foo { x: whatever, pad: [u8, .. 10], y: whatever }
[22:49:47] <ezyang> so, .. 10 means "padding of 10 u7s" ? 
[22:49:51] <ezyang> *u8s 
[22:49:56] *** Quits: brson (brson@6A848D32.C1B840DD.76F66111.IP) (Connection reset by peer)
[22:49:59] <dbaupp> yup
[22:50:11] <dbaupp> a fixed length vector of u8's.
[22:50:14] <ezyang> great, thanks 
[22:50:28] <ezyang> is there anyway to "assert" that a struct has some size? 
[22:50:33] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[22:50:33] *** ChanServ sets mode: +ao brson brson
[22:51:04] <dbaupp> not at compile time
[22:51:14] <dbaupp> although you could write a #[test] that asserts it
[22:51:41] <ezyang> Another question: are owned boxes guaranteed to be pointer size? 
[22:51:42] <dbaupp> `#[test] fn foo_has_right_size() { assert_eq!(size_of::<Foo>(), 30); }`
[22:51:50] *** Quits: Dessimat0r (Dessimat0r@E879B262.8D4FD984.4320F744.IP) (Ping timeout)
[22:51:57] <ezyang> huh, #test is kind of nifty. 
[22:52:06] *** Quits: Cork (Cork@moz-352B7E7B.a370.priv.bahnhof.se) (Ping timeout)
[22:52:18] <benh> It doesn't... do anything, it just flags functions for the test compilation mode
[22:52:29] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[22:52:40] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[22:52:50] <ChrisMorgan> benh: that's "doing something" and fits with the description "nifty".
[22:53:14] <dbaupp> ezyang: https://github.com/mozilla/rust/wiki/Doc-unit-testing fwiw
[22:53:27] <strcat> ezyang: yes, the reason they exist is make large things pointer-size (for recursive data types, dynamic dispatch or as a performance tradeoff)
[22:53:43] <mark_edward> does anyone know what the dlang iRC channel is?
[22:53:59] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Connection reset by peer)
[22:54:08] <ezyang> strcat: Well, one could conceivably imagine some boxes need to store extra metadata; but that's good 
[22:54:32] <SiegeLord> mark_edward: #d on freenode
[22:54:40] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[22:54:40] *** ChanServ sets mode: +ao dherman dherman
[22:54:54] <mark_edward> SiegeLord, thanks
[22:54:55] <benh> ~U where U is a trait or [T] or str isn't pointer-sized, is it
[22:55:04] <strcat> it's not currently an owned box
[22:55:13] <strcat> U can't be a trait or vector there
[22:55:16] <strcat> [T] and Trait aren't types
[22:55:27] <ezyang> Hm. If I do ~Option<bdescr>, is that just like a nullable pointer? 
[22:55:32] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[22:55:32] *** ChanServ sets mode: +ao brson brson
[22:55:34] *** Joins: dherman_ (dherman@moz-BBE3ABD.mv.mozilla.com)
[22:55:46] <benh> yeah, it's also pointer-sized
[22:55:52] <sfackler> ezyang: an Option<~bdescr> would be more like a nullable pointer
[22:55:56] <benh> oh
[22:55:59] <ezyang> Sweet 
[22:56:04] <benh> oh no i got it wron sfackler is right :(
[22:56:32] <sfackler> it also ends up being pointer sized since the compiler knows that a ~foo can't be null!
[22:56:46] <strcat> ezyang: rust knows that an enum like 'enum Foo<T> { NonNullablePtr<T>, Nil }' can be represented as a nullable ptr
[22:56:54] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[22:56:54] *** dherman_ is now known as dherman
[22:57:06] <strcat> the only issue with that optimization is it being unavailable to library types
[22:58:13] *** Joins: dradtke (dradtke@moz-77578067.hfc.comcastbusiness.net)
[22:58:40] *** Joins: Cork (Cork@moz-352B7E7B.a370.priv.bahnhof.se)
[22:58:43] <ezyang> uh oh, https://github.com/mozilla/rust/issues/5492 is gonna be a problem 
[22:58:45] <dradtke> Hey, does anyone know if it's possible to declare a variable using only a trait type?
[22:59:10] <benh> nope, gotta be a pointer around a trait type
[22:59:31] <pcwalton> ezyang: use a [u8, ..size] and cast it
[22:59:34] <dradtke> benh: can you give me a small example?
[22:59:39] <dradtke> benh: I feel like I tried that.
[22:59:41] <ezyang> ok 
[23:00:07] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[23:00:15] *** Quits: zatnosk (zatnosk@31AE4F7A.F285E7E8.9E52235C.IP) (Quit: Have a great life!)
[23:00:22] *** Joins: q66__ (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[23:00:24] <docbrown> Is rustdoc eventually going to be able to document items for all targets? The Win32 APIs in std::libc don't appear in the official docs, for example. I assume that's because they aren't generated on a Windows system?
[23:01:05] <sfackler> there's an open bug for that
[23:01:19] *** Quits: q66_ (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[23:01:30] <dbaupp> docbrown: yes
[23:01:39] <benh> dradtke: something like let i: int = 42; let t: &ToStr = &i as &ToStr; ?
[23:01:51] <dbaupp> docbrown: iirc it's done on linux, so only #[cfg(linux)] parts get generated
[23:02:01] *** Quits: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP) (Ping timeout)
[23:02:42] *** Quits: justinstoller (justinstol@EE389F81.B7963FC6.3E8C195A.IP) (Client exited)
[23:02:55] <docbrown> good to know, thanks
[23:03:15] <dradtke> benh: ah, I think my problem was actually a visibility issue.
[23:03:19] <dradtke> benh: thanks
[23:03:51] *** Joins: justinstoller (justinstol@EE389F81.B7963FC6.3E8C195A.IP)
[23:04:42] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[23:07:41] *** Quits: justinstoller (justinstol@EE389F81.B7963FC6.3E8C195A.IP) (Client exited)
[23:08:11] <ezyang> stupid question: what 'use' decl should I use to put size_of in scope
[23:08:46] <dwrensha> std::mem::size_of::<T>
[23:08:52] <ezyang> aha, /mem/ 
[23:08:57] <ezyang> damn out of date docus 
[23:09:17] <benh> use std::i::swear::i::left::it::right::here::size_of;
[23:09:41] <sfackler> ezyang: are you looking at the 0.8 docs? it was moved from std::sys to std::mem after 0.8 was released
[23:09:47] <sfackler> I think
[23:10:00] <ezyang> I am, but what happened is that Google's top search result is for 0.6 
[23:10:02] <ChrisMorgan> RFC: allow syntax like `use std::..::size_of;` and let the compiler find it :P
[23:10:13] <ezyang> and when I adjust the version number to 0.8 it 404s, because of course the old module doesn't exist anymore 
[23:10:23] <dbaupp> ChrisMorgan: `use *::size_of;`
[23:10:29] *** Quits: ianj (ianjneu@moz-7140CF01.ccs.neu.edu) (Quit: leaving)
[23:10:40] <ChrisMorgan> `use ..::size_of;`?
[23:10:58] <ChrisMorgan> (We changed X(*) patterns to X(..) recently, hence my .. rather than *.)
[23:11:05] *** Quits: jmbto (jmbto@moz-FE174E29.fbx.proxad.net) (Quit: Leaving)
[23:11:05] <benh> use std::*::*; // fuck it
[23:11:37] <dbaupp> ChrisMorgan: *  inpatterns was different to * in imports, though
[23:11:45] <ChrisMorgan> Yeah, probably.
[23:11:49] <aatch> `use std::**` Recursively import all std symbols.
[23:12:05] <dbaupp> `use **; // import everything from every crate`
[23:12:14] <benh> extern mod *;
[23:12:31] <dbaupp> hah
[23:12:34] <aatch> "if it looks like a crate, I need it"
[23:13:29] <ezyang> rusty hullnuts! 
[23:14:47] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Quit: Leaving.)
[23:14:56] <ezyang> Man, it's too bad that taking a mutex does not discharge the 'unsafe' obligation for accessing global mutable statics 
[23:15:04] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[23:15:41] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[23:16:27] <sfackler> you don't know it's the right mutex!
[23:16:46] <ezyang> well, clearly, there should be some fancy type-system features for proving correctness of concurrent code :o) 
[23:17:01] <strcat> it's also probably not a mutex allowing recursive locking and if you already locked it in the same thread it's going to be UB
[23:17:38] <ezyang> "Hey, at least I deadlocked, rather than corrupted memory" 
[23:18:10] <strcat> ezyang: pthread mutexes have undefined behaviour by default
[23:18:12] <ChrisMorgan> use everything;
[23:18:30] <nathan7> use nihilism;
[23:18:32] <rntz> strcat: what do you mean by that?
[23:18:32] *** Quits: refold (gman@moz-42D68426.a258.priv.bahnhof.se) (Quit: leaving)
[23:18:40] <strcat> PTHREAD_MUTEX_DEFAULT
[23:18:44] <ezyang> strcat: don't know what you mean 
[23:18:44] <strcat> Attempting to recursively lock a mutex of this type results in undefined behavior.
[23:18:49] <ezyang> ohhh 
[23:18:53] <ezyang> fascinating 
[23:18:53] <strcat> PTHREAD_MUTEX_NORMAL
[23:18:54] <rntz> ah, for recursive locking. yeah.
[23:18:54] *** Joins: justinstoller (justinstol@EE389F81.B7963FC6.3E8C195A.IP)
[23:18:56] <strcat> A thread attempting to relock this mutex without first unlocking it shall deadlock.
[23:19:19] <sfackler> wow, DEFAULT and NORMAL aren't the same thing? really?
[23:19:24] <strcat> sfackler: really
[23:19:29] <strcat> DEFAULT is all about speed
[23:19:34] <ChrisMorgan> benh: and speaking of `mod`, we should let `mod x;` be written `% x;` :P
[23:19:40] <strcat> NORMAL is at least safer, not that a deadlock is good
[23:19:46] <benh> ChrisMorgan: extern % x;
[23:19:57] <strcat> sfackler: and ofc there's ERRORCHECK and RECURSIVE as 2 more types ;p
[23:19:59] <ChrisMorgan> Naturally. Let people figure that out!
[23:20:12] <strcat> on that note recursive rwlocks seem like a really bad idea
[23:20:20] <rntz> blargle, ERRORCHECK should totally be the default :<
[23:20:42] <strcat> rntz: nah
[23:20:48] <strcat> rntz: all it does is return an error, it's not like anyone checks it ;p
[23:21:01] <ezyang> hm, rust is so not letting me do this http://lpaste.net/96607 
[23:21:03] <strcat> so their logic error will go unnoticed 
[23:21:20] <rntz> strcat: okay, well there should be a type that calls abort() when you recursively lock it, and *that* should be the default!
[23:21:36] <strcat> rntz: well you can make that via ERRORCHECK :P
[23:21:41] * ChrisMorgan wonders how long it will be before Mozilla's Cloud Services team start using Rust
[23:22:02] <strcat> rntz: anyway it's POSIX so you can't expect much
[23:22:02] <rntz> strcat: yes, I know. but that won't fix C libraries having silly defaults.
[23:22:07] <strcat> for example, POSIX rwlocks
[23:22:11] <ezyang> well, I guess I can just write it out explicitly... man, that sucks 
[23:22:13] <strcat> does it favour readers or writers?
[23:22:15] <strcat> implementation defined
[23:22:27] <rntz> ezyang: what are you trying to do that requires extra writing?
[23:22:29] <strcat> is there a way to opt-in to writers or readers being favoured? linux has it, but it's not portable!
[23:22:37] <strcat> anyway rwlocks just seem silly
[23:22:38] <ezyang> error: copying a value of non-copyable type `std::option::Option<~bdescr>`
[23:22:39] <sfackler> there's also the "spurious wakeup" phrase in the cvar manpage
[23:22:41] *** Quits: Ferreus (ferreus@moz-53CC9E9A.pools.arcor-ip.net) (Quit: WeeChat 0.4.2)
[23:22:51] <ezyang> because that's how .. n is implemented, apparently 
[23:23:25] <strcat> I guess if you have 1 writer and make it favour writers.... rwlocks are sane
[23:23:37] <strcat> otherwise you either have reader starvation or writer starvation ;\
[23:23:50] <sfackler> you can have a rwlock that guarantees no starvation
[23:24:07] <rntz> ==sfackler
[23:24:13] <strcat> that sounds like it'll be even slower than they already are
[23:24:39] <rntz> probably? correct code is generally slower than incorrect code, yes :P
[23:24:43] <benh> ezyang: that's https://github.com/mozilla/rust/issues/5244 :(
[23:24:48] <strcat> rntz: a mutex would be correct, too
[23:24:56] <ezyang> ah-ha 
[23:25:11] <rntz> strcat: using a mutex rather than a rwlock? probably only faster if you have very few readers.
[23:25:23] <strcat> rntz: not true
[23:25:30] <strcat> it's faster in any case where you don't hold the lock for very long
[23:25:30] <rntz> or, to put it another way, rwlocks are really only for when you have high reader-writer ratio.
[23:25:35] <strcat> a rwlock is more expensive to lock
[23:25:40] <sfackler> rntz: contention is rare enough in most cases that you'll never have multiple readers in at once
[23:25:51] <ezyang> subbed to the issue 
[23:26:00] <strcat> rntz: a rwlock makes sense if you do something like iterate over a large vector/map that's shared
[23:26:15] <rntz> sfackler: hm. ok. I have no idea what kind of use cases you're thinking about, and not much experience in practice with picking between rwlocks and mutexes.
[23:26:19] <strcat> but for example to do a hash table insert or search, a mutex will *always* be faster
[23:26:34] <strcat> since you don't hold the lock for long
[23:26:49] <strcat> and holding locks for a long time is a fair bit of an anti-pattern in the first place ;p
[23:27:01] <strcat> you could use something like RCU for a long iteration
[23:27:04] <rntz> I feel like it should be possible to streamline a rwlock so that the no-contention case is fast
[23:27:33] <rntz> but, *shrug* if not, then not.
[23:28:10] <rntz> I'm trying to remember when in the OS course I took I actually need to use rwlocks
[23:28:18] <rntz> s/need/wanted/
[23:28:30] <strcat> rntz: a rwlock will always be more expensive to lock than a mutex though
[23:28:34] <rntz> I think in the implementation of the (tid -> task descriptor) mapping
[23:28:55] <strcat> and the difference is likely more than the time you spend inside the mutex lock
[23:29:16] <strcat> unless ofc you're doing something silly like iterating over 10k keys
[23:29:26] *** Joins: mib_cv6sig (Mibbit@moz-226875EE.google.com)
[23:29:31] <rntz> strcat: well, maybe. my feeling was precisely that maybe you *could* make it so that the common case was usually as fast as a mutex lock, so that the difference on average *wasn't* more than the time you spend inside it.
[23:29:33] <sfackler> rntz: fun story. I had a bug in my kernel where any contention in any of the 3 mutexes in our rwlocks would kill the kernel. It took about 20-30 minutes of stress testing to get that to happen
[23:29:54] <strcat> rntz: I expect if you could, the linux/glibc devs would have done it ;p
[23:30:01] <wycats_> GOOD NEWS EVERYBODY
[23:30:01] *** Quits: zslayton (Mibbit@81EB2473.5F4BC84E.66C78B76.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[23:30:04] <strcat> rntz: consider that a mutex on linux rarely makes a syscall at all
[23:30:04] <wycats_> I have rust in production
[23:30:08] <wycats_> unsure if crazy
[23:30:15] * strcat shrugs
[23:30:15] <acrichto> wycats_: confirmed crazy
[23:30:20] *** Joins: alonlevy_ (alon@moz-D8EFCED8.bb.netvision.net.il)
[23:30:27] <strcat> wycats_: not as crazy as C++ in production
[23:30:28] <ezyang> Huh, that's strange, /** */ is treated specially by Rustc? 
[23:30:30] <bstrie> wycats_: you're too radical for us
[23:30:31] <rntz> strcat: I mean, neither mutices nor rwlocks ever need to make a syscall if you expect the wait-time to be low.
[23:30:44] <rntz> ezyang: doc comment iirc?
[23:30:46] *** Quits: alonlevy__ (alon@moz-7A737673.bb.netvision.net.il) (Ping timeout)
[23:30:49] <benh> yeah, /** */, /*! */, /// and //! are doc comments
[23:30:50] <wycats_> http://i.imgur.com/vbH38dH.png
[23:30:54] <wycats_> this data generated by rust
[23:30:57] <ezyang> yeah 
[23:30:59] <bstrie> wycats_: I'll ask again, what customers were masochistic enough to allow you to subject rust upon them :)
[23:31:04] <strcat> rntz: but a rwlock will be bigger and need more atomic ops at least in the glibc implementation
[23:31:10] <wycats_> strcat: I accept what you have said
[23:31:11] <benh> they desugar to #[doc = "blah"] or something like that
[23:31:20] <wycats_> the empty area to the left is all of the time it wasn't working :P
[23:31:23] *** Quits: jvshahid (jvshahid@BE83DFD.50866E69.CA2DF2C0.IP) (Ping timeout)
[23:31:23] <wycats_> all C and Ruby bugs
[23:31:31] <wycats_> I didn't have to recompile the Rust .a once
[23:31:51] *** Joins: tikue (tkuehn@4026E6C5.E6CB677E.689607DE.IP)
[23:31:59] <rntz> strcat: I dunno, should be able to make the common case just a read followed by a cmpxchg?
[23:32:24] *** nrc is now known as nrc|lunch
[23:32:24] <strcat> rntz: there's more than one queue
[23:32:40] * strcat shrugs
[23:32:46] *** Quits: mib_cv6sig (Mibbit@moz-226875EE.google.com) (Quit: http://www.mibbit.com ajax IRC Client)
[23:32:53] <tikue> i think i don't fully understand how proc works. I've got this line: `static f: proc(uint) -> uint = proc(x: uint) x;` and it won't compile, I'm getting the error `expected `proc:Send(uint) -> uint` but found `~fn(uint) -> uint` (expected bounds `Send` but found no bounds)` does someone understand this?
[23:32:54] *** Joins: Jesse (jruderman@moz-5973C6FA.oc.oc.cox.net)
[23:33:21] <rntz> strcat: so if you only queue when there are actually writers blocked, you can have a bit that tells you whether the queue is in use, and that bit can be part of the cmpxchg's thing
[23:33:22] <tikue> can static not be send?
[23:33:31] *** Joins: zmthy (tim@moz-C2881CC3.ecs.vuw.ac.nz)
[23:33:46] <rntz> so when contention is low, nothing on the queue, and a single cmpxchg does the appropriate thing.
[23:34:00] <sfackler> I wouldn't think that a static proc would be callable
[23:34:07] <sfackler> since it can't consume itself
[23:34:13] <strcat> rntz: well afaik cmpxchg isn't really going to work, it probably does an atomic write returning the old value to know if it got the lock
[23:34:17] <tikue> sfackler: why would it need to consume itself?
[23:34:20] <tikue> are procs once?
[23:34:22] <sfackler> yep
[23:34:24] <tikue> oh
[23:34:33] <strcat> rntz: so yeah, that 1 atomic op would work, but then it has to do bookkeeping once it gets the lock
[23:34:36] <tikue> is it possible to make a static closure?
[23:34:37] *** Quits: Hildar (Mibbit@moz-7F4621B6.cable.virginm.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:34:41] <tikue> that closes over stuff
[23:34:47] <strcat> rntz: and the bookkeeping for a rwlock will be more
[23:34:53] *** Quits: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[23:35:45] <bstrie> "In APL all data are represented as arrays, and there shall they see the Son of man, in whose sight I brought them out"
[23:35:51] <strcat> at least an add for a reader count
[23:35:53] <rntz> strcat: so, you have (bit indicating writer-queued-ness, number of readers). that's less than 16 bytes. you read this data, increment readers by one, and cmpxchg your new value in, expecting the same value you read (assuming that there weren't queued readers).
[23:35:53] <bstrie> http://kingjamesprogramming.tumblr.com/
[23:35:53] * strcat shrugs
[23:35:59] <tikue> bstrie: yeah i was looking at that earlier, it's so good
[23:36:40] <rntz> hrm, except you'll need another bit for "mutex locked for a longer-term operation", but that's still way less than 16 bytes
[23:36:58] <cmr> rust-buildbot: dance
[23:37:00] <rust-buildbot> <(^.^<)
[23:37:01] <rust-buildbot> <(^.^)>
[23:37:02] <rust-buildbot> (>^.^)>
[23:37:02] <rust-buildbot> (7^.^)7
[23:37:04] <rust-buildbot> (>^.^<)
[23:37:05] <rntz> in fact, less than 8 bytes, so you can do it in a single word-read. 
[23:37:07] <tikue> cmr: wat
[23:37:16] <cmr> tikue: yup
[23:37:16] <rntz> (assuming < 2^32 readers, which I think is a fine assumption)
[23:37:37] <tikue> lol
[23:37:50] <tikue> so abusable
[23:37:55] <rntz> and for writing, you cmpxchg setting the writer-queuedness bit to 1.
[23:37:57] <tikue> rust-buildbot: dance dance dance!
[23:37:58] <rust-buildbot> <(^.^<)
[23:37:59] <rust-buildbot> <(^.^)>
[23:38:00] <rust-buildbot> (>^.^)>
[23:38:00] <rust-buildbot> (7^.^)7
[23:38:02] <rust-buildbot> (>^.^<)
[23:38:11] <tikue> k i'mm done
[23:38:15] <rntz> so in the no-contention case you take a 1-word read followed by a cmpxchg8b. I think that works?
[23:38:33] <strcat> rntz: *shrug*
[23:38:35] <rntz> would need to write out the whole implementation to see whether it can be made to work.
[23:38:43] <strcat> these types are way bigger than you would expect
[23:38:53] <bstrie> wycats_: how much rust code do you actually have? how extensive is this application?
[23:39:04] <wycats_> lemme count
[23:39:05] <rntz> I mean, I imagine the POSIX ones are bigger because ugh, complicated standards
[23:39:07] <brendanc> rust-buildbot: It's You!!
[23:39:07] <rust-buildbot> What you say!
[23:39:16] <ktt3ja> hahaha, who made rust-buildbot?
[23:39:24] <strcat> rntz: not just that
[23:39:26] <brendanc> rust-buildbot: What you say !!
[23:39:26] <rust-buildbot> You have no chance to survive make your time.
[23:39:29] <rust-buildbot> HA HA HA HA ....
[23:39:39] <ezyang> What are valid constant expressions? Can I make a little function which does some compile time calculation? 
[23:39:43] <rntz> but I'm not saying the entire thing has to fit into < 16 bytes
[23:39:50] <rntz> just the part modified during the no-contention case
[23:39:54] <rntz> everything else you can lock for
[23:40:19] <bstrie> ktt3ja: buildbot is a fairly well-known python application
[23:40:22] <rntz> (and the lock also has to fit into those 16 bytes, of course; but that can be done so long as everything you do under the lock takes a bounded number of instructions)
[23:40:31] <wycats_> in total 7,000 loc of which 300ish are mine and the rest are generated protobuf codes
[23:40:41] <wycats_> lemme go count the C++ code I ported
[23:40:43] <bstrie> haha
[23:40:48] <bstrie> delicious stats
[23:41:07] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[23:41:10] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[23:41:17] <dwrensha> wycats_ protobuf? Any interest in eventually switching to Cap'n Proto?
[23:41:28] <wycats_> dwrensha: the server is protobuf
[23:41:39] *** Joins: jviereck (Adium@moz-89A9D2B8.dip0.t-ipconnect.de)
[23:42:02] <ezyang> Uh oh, I hope I don't have to macro this 
[23:42:16] *** Quits: jviereck (Adium@moz-89A9D2B8.dip0.t-ipconnect.de) (Quit: Leaving.)
[23:42:22] *** Quits: tikue (tkuehn@4026E6C5.E6CB677E.689607DE.IP) (Quit: tikue)
[23:42:29] *** Parts: dradtke (dradtke@moz-77578067.hfc.comcastbusiness.net) ()
[23:42:34] <aatch> ezyang, there is no compile time calculation beyond constant folding.
[23:42:36] <sfackler> ezyang: there's nothing like constexpr functions
[23:42:37] <wycats_> the C++ code I ported (which was incomplete) is 427 lines
[23:42:42] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[23:42:52] <ezyang> ok, macro time, I guess 
[23:43:20] <benh> you can always add another layer of indirection and initialize it properly early in main :/
[23:43:26] <ezyang> :( 
[23:43:47] <ezyang> I mean, I just want to port this C pre-processor macro: #define BLOCK_ROUND_UP(p)   (((W_)(p)+BLOCK_SIZE-1) & ~BLOCK_MASK) 
[23:43:55] <wycats_> the Rust code (which is complete) is 272 lines
[23:44:02] <wycats_> the C++ code includes a lot of .h files :P
[23:44:36] *** Joins: tcr (tcr@moz-EAC95265.hfc.comcastbusiness.net)
[23:44:45] <wycats_> it also includes an implementation of high res monotonic timestamps for Darwin, Linux and Solaris
[23:44:50] <wycats_> I rely on std::time
[23:44:51] <ezyang> haha, " macro definitions are not stable enough for use and are subject to change" 
[23:45:13] <ezyang> I'm gonna regret this, aren't I 
[23:45:15] <aatch> ezyang, you could make an always-inline function that does it.
[23:45:27] <benh> you can?
[23:45:32] <ezyang> Oh, will the constant folder accept that? 
[23:45:42] <aatch> Well LLVM will constant-fold it.
[23:45:47] <aatch> After inlining.
[23:46:05] <benh> doesn't help in constant initialization position
[23:46:07] <ezyang> well, the trouble is that I'm trying to calculate a static constant 
[23:46:12] <ezyang> right 
[23:46:13] <aatch> Oh, right...
[23:46:26] <wycats_> the C++ code is actually 393 lines
[23:46:37] <wycats_> to 272 for rust
[23:46:43] <boredomist> does rust do a lot of optimization itself, or is it delegated mostly to llvm?
[23:46:54] <aatch> boredomist, almost all to LLVM
[23:47:05] <aatch> because that's the most sensible thing to do.
[23:47:07] <ezyang> Hm, even when I paste in #[feature(macro_rules)], the Rust compiler still doesn't let me define macros 
[23:47:16] <sfackler> the only optimization rust does is eliminating if false {} blocks iirc
[23:47:22] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Client exited)
[23:47:37] <aatch> We do some limited constant folding and the elimination sfackler mentioned.
[23:48:01] *** Quits: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[23:48:08] <wycats_> mmm because real world code has a lot of if false blocks
[23:48:13] <wycats_> such optimization
[23:48:18] <aatch> The constant folding is to support expressions in static values/
[23:48:25] <aatch> wycats_, actually, it does.
[23:48:25] <strcat> wycats_: seems like you can just use clock_gettime across those OSes anyway...'
[23:48:31] <strcat> with CLOCK_MONOTONIC
[23:48:44] <aatch> strcat, not on OSX!
[23:48:46] <strcat> wat
[23:48:53] <aatch> strcat, I know.
[23:48:54] <sfackler> wycats_: iirc its for things that are cfg'd away
[23:48:55] <strcat> they don't have clock_gettime?
[23:49:00] <strcat> gettimeofday isn't even in POSIX anymore
[23:49:07] <wycats_> strcat: cool story bro
[23:49:23] <aatch> strcat, there's some weirdness in OSX around that stuff.
[23:49:56] <wycats_> Darwin uses mach_absolute_time
[23:50:14] *** Quits: vmx (vmx@moz-BC9DF2CD.pools.arcor-ip.net) (Quit: Leaving)
[23:51:36] <aatch> strcat, http://stackoverflow.com/questions/5167269/clock-gettime-alternative-in-mac-os-x
[23:51:44] <ezyang> What is bitwise ~ named in Rust? 
[23:52:05] *** Quits: jvns (bork@87D98E32.4046EB22.428F94DD.IP) (Ping timeout)
[23:52:05] <Luqman> ezyang: !
[23:52:08] <dbaupp> rusti: !0x0fu8
[23:52:09] -rusti- 240u8
[23:52:14] *** Quits: tcr (tcr@moz-EAC95265.hfc.comcastbusiness.net) (Client exited)
[23:52:16] <ezyang> oh hoy 
[23:52:36] *** Joins: tcr (tcr@moz-EAC95265.hfc.comcastbusiness.net)
[23:52:52] <o11c> wycats_: I am so mad the clan doesn't support attribute((error)) properly in their if(false) elimination
[23:53:21] <ezyang> Is there a better way to make these sorts of declarations in Rust: http://lpaste.net/96609 ? 
[23:53:24] *** Quits: pinupgeek (rramdas@moz-608F14C1.ftth.glasoperator.nl) (Quit: pinupgeek)
[23:53:36] <strcat> aatch: wow I didn't think you could actually make something more verbose/awful than POSIX/win32
[23:53:43] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[23:53:44] <strcat> but apparently I was wrong ;p
[23:54:05] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[23:54:20] *** Quits: tcr (tcr@moz-EAC95265.hfc.comcastbusiness.net) (Ping timeout)
[23:54:39] <strcat> glibc has weird lock elision stuff
[23:54:41] <strcat> never seen this
[23:54:55] <strcat> what the hell are these things
[23:54:59] *** Quits: morphevs (Adium@moz-C1F7EB20.cust.bluewin.ch) (Quit: Leaving.)
[23:55:27] <FreeFull> rusti: 0xf0u8
[23:55:28] -rusti- 240u8
[23:55:31] <ezyang> go go hardware transactional memory! 
[23:56:07] <cmr> docbrown: I don't really see a way to generate docs for all targets, in the same set of documentation, not without sacrificing hyperlinking.
[23:56:31] <strcat> ezyang: I didn't realize it was going to be used *to implement locks* ;\
[23:56:59] *** Joins: Sgeo (quassel@moz-D0F30617.dyn.optonline.net)
[23:57:01] <ezyang> ll/sc is basically one-word hardware transactional memory :o 
[23:57:46] <dbaupp> cmr: it could fold items with the same name but different cfg into one page, and have, like, example.com/docs/struct.Foo.html#cfg=windows or something like that
[23:57:58] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:58:35] <dbaupp> cmr: (i.e. have all the info on one page, possibly with the ability to filter by cfg.)
[23:58:50] <dbaupp> it seems like driving the compiler in such a way would be very hard
[23:59:44] <strcat> ezyang: https://sourceware.org/git/?p=glibc.git;a=blob;f=nptl/sysdeps/unix/sysv/linux/i386/lowlevellock.h;h=cc3ec5ba265c7ca31578311d902017327aaa323c;hb=1cdbe579482c07e9f4bb3baa4864da2d3e7eb837#l130 they write unwind tables by hand? wat?
