[00:08:07] <cmr> acrichto: when you make your rustdoc PR, make sure to update RELEASES.txt
[00:08:27] <acrichto> good point
[00:10:01] <acrichto> https://github.com/mozilla/rust/pull/9374
[00:10:47] <cmr> acrichto: do extra/std get cross-hyperlinked?
[00:10:52] <acrichto> not yet
[00:10:54] <cmr> I notice the search doesn't look through both
[00:11:00] <acrichto> that's an unimplemented thing
[00:11:04] <cmr> ok
[00:11:58] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[00:12:13] <acrichto> it's tough b/c I don't think you should have to specify the version
[00:12:20] <acrichto> which means we need rustpkg-style inference
[00:12:26] <acrichto> but then also where do you store multiple versions?
[00:12:29] <acrichto> can you build old versions?
[00:12:30] <acrichto> etc.
[00:12:43] <cmr> Ideally it'd be integrated directly with rustpkg
[00:12:48] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[00:12:50] <cmr> And rustdoc json would go in the workspace
[00:13:13] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[00:14:36] <cmr> https://github.com/alexcrichton/rust/commit/493e3b2b797389d8e6996e2ce9263327640ab688#L10L94
[00:14:39] <cmr> damn that's nice
[00:21:04] <acrichto> :D
[00:21:21] <acrichto> cmr: yeah actually another really nice thing would be json => html
[00:21:29] <acrichto> which is totally doable
[00:21:43] <acrichto> b/c that way you could generate local docs by downloading remote json
[00:21:50] <acrichto> so you don't need the entire source
[00:21:55] <cmr> mhm
[00:22:05] <cmr> It's still an open problem to generate docs from metadata
[00:22:32] <acrichto> oh I guess that's the other thing blocking extern-crate paths
[00:22:42] <acrichto> we need more information about an external path
[02:33:20] <cmr> acrichto: uh, huge bug
[02:33:22] <cmr> http://www.contrib.andrew.cmu.edu/~acrichto/doc/std/index.html
[02:33:29] <cmr> search on that page searches extra
[02:34:02] <acrichto> oh hm
[02:42:30] <acrichto> cmr: fixed, rebuilding docs 
[02:52:53] <acrichto> yay now they search correctly
[07:59:55] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[08:52:25] <Seldaek> acrichto: still around?
[08:52:34] <acrichto> for a bit yeah
[08:52:41] <Seldaek> oh ok
[08:52:58] <acrichto> what's up?
[08:53:03] <Seldaek> so regarding the main docblock placement, I see two changes
[08:53:17] <Seldaek> first of all you put it below the definition, and then it's all in one as you said no more split
[08:53:30] <acrichto> yes
[08:53:50] <Seldaek> the reason it was split was so that you could have a one-liner short description on the very top of every page, so you know where to look to get a short overview
[08:54:13] <Seldaek> and then I put the rest below everything because once (hopefully) we have proper docs with lots of examples etc, this can be really big
[08:54:28] <Seldaek> and if you have to scroll through it all to get to the more technical docs I think it's bad
[08:54:48] <acrichto> I was thinking this would be better solved with collapsible sections
[08:54:51] <Seldaek> and please let's not make collapsible sections as a workaround, that's not a workaround people want to use IMO.. 
[08:54:58] <Seldaek> that's a nerdy patch :p
[08:55:04] <acrichto> hm...
[08:55:17] <Seldaek> I don't know how you envisioned it
[08:55:18] <acrichto> b/c when I look at dox I want all the documentation first, and then what I can do with it second
[08:55:23] <acrichto> but I'm not too wed to the idea either
[08:55:33] <acrichto> it was also slightly easier to not split it up lol
[08:55:43] <Seldaek> but IMO if you start scrolling through docs then realize it's too long you'd rather keep scrolling than go back up, find the collapse button and click it
[08:56:06] <Seldaek> so collapse is just visual clutter the way I see it
[08:56:14] <acrichto> I certainly don't qualify as a ux designer :P
[08:56:21] <acrichto> yeah feel free to change it
[08:56:41] <Seldaek> well it's not a huge deal but just wanted to explain 
[08:56:58] <acrichto> sounds reasonable to me
[08:57:33] <Seldaek> other than that, searching through std+extra at once would be great don't know if you fixed that one
[08:57:43] <Seldaek> but really it's a pain in the ass when you don't know what is where
[08:57:48] <Seldaek> so search shouldn't be segregated
[08:58:26] <acrichto> I'm of the opinion that cross-crate linking is the problem in general
[08:58:41] <Seldaek> similarly on http://www.contrib.andrew.cmu.edu/~acrichto/doc/extra/index.html there is no way to go to std
[08:58:46] <acrichto> we can hack in solutions, but we need a long-term solution
[08:58:55] <Seldaek> that is a big UX regression imo
[08:59:08] <acrichto> this isn't just a small thing though
[08:59:22] <acrichto> this is a serious problem that needs to have a good solution
[08:59:40] <acrichto> once there's a solution for linking crates together, everything else will fall into place
[08:59:52] <Seldaek> well I didn't really get why you think the way I did it is bad, but it worked pretty well for users at least
[09:00:16] <acrichto> oh no it's not like it's bad, I just don't think that it's feasible to do it by saying "you can find libextra at this url"
[09:00:21] <acrichto> b/c what about libfoo
[09:00:22] <acrichto> and libbar
[09:00:40] <acrichto> should all crates in existence have to declare "libstd is here?"
[09:00:52] <acrichto> what if half the crates use libbar? should they all specify where to find it?
[09:01:06] <acrichto> basically I was thinking that questions like this weren't really solved with a config.json file
[09:01:16] <Seldaek> I see
[09:01:21] <acrichto> and they really need a solution which may even do something like integrate with rustpkg
[09:01:32] <Seldaek> my thought was that if something becomes really ubiquitous we could bake it in as a default as well
[09:01:32] <acrichto> like I shouldn't even have to tell you where to find libstd
[09:01:38] <acrichto> rustc found it, why can't rustdoc find it?
[09:01:58] <acrichto> right now RUST_PATH has a lib directory per workspace
[09:02:03] <acrichto> so perhaps it could have a doc directory as well
[09:02:10] <acrichto> with the json output of rustdoc in it
[09:02:29] <acrichto> so then rustdoc could properly know which crates to link to, and then the JS would know how to load search-indexes from external crates
[09:02:35] <acrichto> so when you link against std/extra/libfoo
[09:02:36] <Seldaek> well the way I made it and envisioned it, it would be more cross-site links
[09:02:41] <acrichto> you bring in the crates for all of them
[09:02:43] <acrichto> yeah that too
[09:02:53] <acrichto> it could be that std.json says "go here"
[09:02:57] <Seldaek> if you build libfoo and it obviously uses libstd stuff, I don't want to find libstd docs all over the web
[09:03:02] <acrichto> but the "go here" directive is defined in libstd, not by everyone else
[09:03:07] <Seldaek> yeah
[09:03:15] <Seldaek> that's cool for me if you can work it in
[09:03:18] <acrichto> with config.json "go here" is in all repositories
[09:03:22] <acrichto> so again this is a tough problem
[09:03:27] <acrichto> and this is not an easy solution
[09:03:34] <Seldaek> but I think having std/extra hardcoded (skip config.json) for now might be good
[09:03:35] <acrichto> but it's the best current one that I'm thinking of
[09:03:41] <Seldaek> so the language docs don't suffer 
[09:03:51] <acrichto> well it's not like they're linked at all right now anyway
[09:03:54] <acrichto> (old docs)
[09:03:55] <Seldaek> because right now it's pretty much the only docs out there
[09:04:18] <Seldaek> no but as a newcomer I found this to be one of the major pains of browsing the docs
[09:04:18] <acrichto> I don't want to integrate a hack too deeply into it though
[09:04:31] <acrichto> if we could have a small JS shim which takes care of everything, then that'd be awesome
[09:04:40] <acrichto> we may have to make a custom index page, but that's about it
[09:04:50] <Seldaek> it's not really a hack except at the "where this info comes from" level 
[09:04:59] <Seldaek> for linking at least 
[09:05:14] <acrichto> well it's totally a hack to say path.split('::') => make link
[09:05:20] <Seldaek> for searching I don't see how this cross-crate linking impacts it
[09:05:21] <acrichto> but that's a rustdoc_ng bug
[09:05:43] <acrichto> searching is an easy shim, it's just bringing in another search index and then creating links accordingly
[09:05:48] <acrichto> that's definitely just a JS shi
[09:05:50] <acrichto> shim*
[09:05:55] <Seldaek> I guess 
[09:06:02] <acrichto> (which is actually how it'd end up working anyway)
[09:06:04] <Seldaek> still needs config info from rustdoc
[09:06:07] <acrichto> in my opinion
[09:06:13] <acrichto> for now
[09:06:30] <acrichto> I'm ok with hardcoding some config in the short-term
[09:06:36] <acrichto> it's not feasible in the long-term though
[09:06:57] <Seldaek> I just prefer to shim configs and write proper code than hardcoding bad code that'll have to be rearchitectured when you want proper config :)
[09:07:29] <acrichto> yeah exactly
[09:07:31] <Seldaek> if search spanned both crates I guess the cross-linking becomes less of a pressing issue
[09:08:04] <Seldaek> it'll require a bunch of tweaking code though I guess
[09:08:04] <acrichto> it's still pretty bad
[09:08:12] <acrichto> b/c otherwise you see std::option::Option
[09:08:17] <acrichto> which should not be a full path
[09:08:20] <acrichto> and which should have a type parameter
[09:08:36] <Seldaek> yeah
[09:08:37] <acrichto> that's a rustdoc_ng bug though
[09:09:31] <acrichto> the hardest part is done now though
[09:09:36] <acrichto> A. all the json was generated
[09:09:43] <acrichto> B. all the html was generated/designed
[09:09:46] <acrichto> C. it's landed
[09:09:47] <Seldaek> ok, well anyway I'll leave you to it, I have things to do here, but again great job so far, I hope those few things can be fixed before 0.8
[09:10:17] <acrichto> I'm not sure if they'll be fixed by then, but I would like to do so
[09:12:29] <Seldaek> also, the source links should be build with "git log --pretty='%H' -n1" instead of master in the github URLs
[09:12:56] <Seldaek> except for tags I guess those can have the tag name
[09:13:00] <Seldaek> but for the master docs
[09:13:05] <acrichto> yeah but what if it's not a git repo :(
[09:13:18] <Seldaek> then it has to be configured anyway
[09:13:23] <acrichto> versioning is another big problem which I'm not entirely sure how it'll get solved
[09:13:25] <Seldaek> or be in the crate info or whatever
[09:13:31] <acrichto> we're trying to avoid configuration though
[09:13:43] <Seldaek> yeah but I wouldn't worry too much about this for now
[09:14:38] <Seldaek> most cases it'll be a git repo
[09:15:08] <Seldaek> and if not no source link for now, no big deal
[09:15:40] <Seldaek> it'll also only work for github for now.. that's not great but it does cover 99% of relevant repos I guess
[09:19:32] <Seldaek> acrichto: how long does it take to build both btw?
[09:19:39] <Seldaek> with pandoc and all I'm curiou
[09:19:40] <Seldaek> s
[09:19:52] <acrichto> about 25s for libstd and ~15s for extra
[09:19:56] <acrichto> but that includes compile times
[09:20:02] <acrichto> or wiat no
[09:20:06] <acrichto> that's without compile times
[09:20:16] <acrichto> which would *hugely* benefit if we stopped after tyepck
[09:20:26] <acrichto> so it's not lightning fast
[09:20:30] <acrichto> but it's not molasses either
[09:20:33] <Seldaek> eh well that's ok
[09:20:43] <acrichto> not entirely sure what to do about pandoc...
[09:20:45] <Seldaek> for a doc build of a whole language I've seen worse ;)
[09:21:05] <acrichto> lol
[09:21:17] <acrichto> anyway, I need more sleep...
[09:21:24] <acrichto> see you tmw
[09:21:30] <acrichto> depending on your time zone
[09:21:30] <Seldaek> yeah I crashed at 10pm yesterday
[09:21:31] <acrichto> ish
[09:21:39] <Seldaek> that was needed:p
[09:21:41] <Seldaek> cya
[15:44:18] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[16:36:57] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
