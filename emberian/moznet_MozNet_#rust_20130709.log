[00:00:05] <strcat> you can build strings from utf-8 in most cases
[00:02:49] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:03:08] <Jeaye> Eridius: How can I actually get this into an iterator?
[00:03:33] <glinscott> strcat: yes, in many cases, but a lot of the time it's not as feasible, and push_char ends up getting called
[00:03:39] <Jeaye> Oh, missed what you said just now.
[00:04:05] <strcat> glinscott: the point of str is to be utf-8
[00:04:14] <strcat> if you want char arrays, there's ~[char]
[00:04:23] <Eridius> Jeaye: myvec.iter().dedup_()
[00:04:39] <Jeaye> Eridius: error: cannot determine a type for this bounded type parameter: unconstrained type
[00:04:42] <Eridius> note of course that this will dedup pointers
[00:04:57] <Eridius> Jeaye: what parameter?
[00:05:14] <Jeaye> let c = v.iter().dedup_().collect();
[00:05:28] <dbaupp> Jeaye: it's the .collect call
[00:05:29] <Eridius> Jeaye: ah. collect returns anything that conforms to FromIterator
[00:05:33] <Eridius> you didn't constrain it to a specific thing
[00:05:48] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[00:05:48] <Eridius> let c : ~[&u8] = v.iter().dedup_().collect(); will work if v is a &[u8]
[00:06:04] <Eridius> you can also use v.iter().transform(|&x|x).dedup_().collect() to get ~[u8]
[00:07:10] <Jeaye> This iterator magic is over my head. It's frustrating. >.<
[00:07:19] <Eridius> what don't you understand about iterators?
[00:07:38] <Jeaye> I get iterators just fine... but they're quite different in C++.
[00:07:46] <Jeaye> Rust iterators seem very, very foreign.
[00:07:51] *** Quits: posco (oscarboyki@636AC086.5999CED5.71743E61.IP) (Quit: posco)
[00:08:02] <Eridius> C++'s "iterators" are basically objects that act like pointers
[00:08:08] <Jeaye> Yeah.
[00:08:09] <dbaupp> Eridius: (it's probably safer to use |x| *x... matches in  let and function args do bad things.)
[00:08:12] <strcat> they're like http://www.boost.org/doc/libs/1_54_0/libs/range/doc/html/index.html range iterators
[00:08:14] <Eridius> whereas Rust's are streams
[00:08:29] <Eridius> dbaupp: I've never had a problem with |&x|x. what bad things does that cause?
[00:08:49] *** Joins: jfbk (user@moz-EEA9CFB3.nyc.res.rr.com)
[00:08:57] <strcat> Eridius: irrefutable patterns are currently unsound
[00:09:04] <strcat> Eridius: it lets you copy things that aren't copyable
[00:09:07] <Eridius> dbaupp: I'm wondering if we shouldn't have a global clone() function, so you can say `.transform(clone)`
[00:09:09] <dbaupp> rusti: struct A; impl Drop for A { fn drop(&self) { println("pow"); } } let x = A; let &y = &x;
[00:09:10] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/VjMZ
[00:09:24] <pcwalton> Eridius: uniform function call syntax will do that
[00:09:33] <Eridius> pcwalton: ?
[00:09:37] <dbaupp> Eridius: there definitely shouldn't be two pows there :P
[00:09:38] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[00:09:40] <pcwalton> you'll be able to say .map(Clone::clone)
[00:09:44] <dbaupp> Eridius: can call methods as functions
[00:09:56] <Eridius> pcwalton: hmm. Not really any less verbose than what we have now ;)
[00:10:05] <dbaupp> Like python, x.foo() = Type.foo(x)
[00:11:01] <Jeaye> Eridius: So this ends up with a duplicated vector?
[00:11:22] <Eridius> Jeaye: the Dedup iterator will dedup the items that pass through it on the fly, always emitting the last element in a given duplicated sequence
[00:11:35] <dbaupp> Eridius: in any case, I'd previously thought .clone_each() (&x -> x) would be nice
[00:11:35] <Eridius> so calling .collect() will give you a new deduplicated container containing all the elements
[00:11:52] <Eridius> dbaupp: I'm tempted to add .iter_clone() to vec
[00:12:05] <dbaupp> Eridius: no! add a generic adaptor to Iterator
[00:12:08] <engla> Eridius: you already have .clone().consume_iter()
[00:12:19] <Eridius> engla: that clones upfront
[00:12:27] <strcat> .iter(Clone::clone) is more efficient
[00:12:33] <glinscott> strcat: hehe, but then all the nice string operators are not available :)
[00:12:47] <engla> not sure which is more efficient if you are going to traverse it all anyway
[00:12:50] <strcat> glinscott: most of those will be killed off though
[00:13:13] <sully> hm, darn
[00:13:19] <dbaupp> rusti: let âˆš = 1; âˆš // bjz, jensnock_ 
[00:13:19] -rusti- <anon>:7:13: 7:13 error: unknown start of token: 8730
[00:13:19] -rusti- <anon>:7          let âˆš = 1; âˆš // bjz, jensnock_ 
[00:13:20] -rusti-                       ^
[00:13:20] -rusti- application terminated with error code 101
[00:13:24] <Eridius> dbaupp: a generic adaptor sounds nice, but a) more verbose than just adding .iter_clone, and b) vec is the most common way to get an Iterator<&A> in my experience
[00:13:31] <dbaupp> bjz, jensnock_: (it's not a valid identifier)
[00:13:36] <sully> I have a stack closure that I have bound to a variable
[00:13:38] <bjz> dbaupp: aww
[00:13:42] <sully> and if I pass it to one function, it works fine
[00:13:46] <jensnock_> dbaupp: Not until I add it to the grammar!
[00:13:48] <sully> but if I try to use it twice, it doesn't...
[00:14:05] <engla> unicode support doesn't have anything to do with symbols, still only letters allowed
[00:14:07] <dbaupp> jensnock_: heh, please add maths symbols as allowed idents
[00:14:19] <jensnock_> dbaupp: Why indent?
[00:14:28] <sully> due to a region error
[00:14:30] <dbaupp> jensnock_: hm?
[00:14:30] <jensnock_> dbaupp: NEEDS MOAR UNARY OPERATORS!11!!11eleven!
[00:14:34] <sully> is there any way aroudn this, or am I screwed?
[00:14:49] <dbaupp> jensnock_: do it!
[00:14:58] <jensnock_> rusti: âˆš4
[00:14:58] -rusti- <anon>:7:9: 7:9 error: unknown start of token: 8730
[00:14:58] -rusti- <anon>:7          âˆš4
[00:14:59] -rusti-                   ^
[00:14:59] -rusti- application terminated with error code 101
[00:15:11] <glinscott> strcat: right, but still, i'd imagine a ~[char] could not be passed in to many places that expected a str.  the small storage space of utf-8 is a big advantage though, and probably outweighs the bit twiddling for multi-byte chars
[00:15:12] <toddaaro> sully: can you use transmute to modify the region to match in the second case?
[00:15:13] * dbaupp wants his âˆ«f notation
[00:15:13] * jensnock_ should teach rusti that it is supposed to answer 2.
[00:15:18] <engla> sully: is it the problem where you have to manually reborrow the closure?  try  passing  |x| f(x)
[00:15:30] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[00:15:37] <jensnock_> dbaupp: âˆ«fdx is a bit harderâ€¦
[00:15:46] <dbaupp> Eridius: I guess is a point we'll disagree on
[00:15:50] <sp3d> âˆ«!(f dx)
[00:15:56] *** Quits: carllerche (carllerche@moz-BF6CB667.hsd1.ca.comcast.net) (Quit: carllerche)
[00:16:05] <dbaupp> Eridius: keeping api's smaller by putting more things on the generic iterator
[00:16:10] <sully> toddaaro: B|
[00:16:20] <dbaupp> jensnock_: well, f is a function of one variable
[00:16:20] <Eridius> dbaupp: I dunno, I guess I'd be happy if it was something really short like .iter().deref()
[00:16:28] <sully> engla: that works
[00:16:34] <sully> ok, this is a bug, right?
[00:16:38] *** Quits: paupau (textual@moz-D6583788.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[00:16:43] <jensnock_> dbaupp: Yeah, but how would you integrate it?
[00:16:56] <pcwalton> sully: presumably yeah
[00:17:03] <dbaupp> jensnock_: whatever numerical method you want?
[00:17:11] <dbaupp> jensnock_: ugly I'll admit
[00:17:26] <jensnock_> dbaupp: So you add it as a trait to the function?
[00:17:42] <dbaupp> jensnock_: yeah, with #[lang_item="integrate"]
[00:17:49] <dbaupp> :P
[00:17:53] <sully> ok, also, while I appreciate that external iterators are great and handy and super flexible
[00:18:28] <jensnock_> dbaupp: I can see the whole external/internal iterator debate overflowing into the much smaller external/internal integrator debate.
[00:18:28] <Luqman> dbaupp: "the implementation is left as a detail to the reader"
[00:18:30] <pcwalton> we'll get rid of advance()
[00:18:43] <sully> oh, advance isn't my complaint
[00:18:59] <dbaupp> jensnock_: oooh, we could define a symbol number type that implemented all the traits, call f on it, and then we get perfect integration
[00:19:03] <sully> oh, I was going to complain that the vector map method was gone
[00:19:05] <sully> but it isn't
[00:19:08] <bblum> sully: https://github.com/mozilla/rust/wiki/Doc-under-construction-FAQ#noncopyable-stack-closures the reborrow stack closure thing is my fault
[00:19:22] <dbaupp> sully: yeah, removing it was too much... the replacement is horrible.
[00:19:22] <sully> there was just some code that was doing .iter().transform(...).collect() for no good reason
[00:19:33] <jensnock_> dbaupp: I just want to note that automatic differentiation of FORTRAN programs can already be done.
[00:19:37] *** Joins: paupau (textual@moz-D6583788.hsd1.ca.comcast.net)
[00:19:43] <bblum> sully: niko says he wants to automatically borrow them, so it will stop being painful, but i did not know how to make that happen
[00:19:46] <dbaupp> sully: (I converted the calls to vec::map to that, but not the .map calls)
[00:19:47] <jensnock_> dbaupp: Shouldn't be too hard with Rust ..?
[00:19:53] <dbaupp> jensnock_: woah, that's pretty cool
[00:20:08] <dbaupp> jensnock_: let's implement it!
[00:20:12] <sully> dbaupp: yeah, converting them to .map would have been a better plan :P
[00:20:38] <dbaupp> then `differentiate!(some rust code)` would be amazing
[00:20:47] <dbaupp> sully: pssh, external > internal ;P
[00:21:09] <strcat> sully: map will be replaced with one iterating lazily though
[00:21:20] <strcat> copying to a container will end up explicit
[00:21:38] <strcat> vector.map().collect::<HashSet<int>>()
[00:22:06] <sully> ok, I really do think it is important to have a convenient way to do a strict map
[00:22:09] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Ping timeout)
[00:22:26] <strcat> sully: but what's a strict map? &[T] -> ~[T] as it is now is pretty weird
[00:22:27] * dbaupp thinks having a .to_vec wrapper for .collect would satisfy many of these concerns
[00:22:38] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[00:22:41] <strcat> sully: map on @[T] gives you ~[T]
[00:22:52] <strcat> and it uses Copy
[00:23:04] *** Joins: alisdair (textual@moz-7657F365.vc.shawcable.net)
[00:23:05] <dbaupp> (and/or higher-kinded types)
[00:23:28] <jensnock_> dbaupp: I like the idea, but first we kind of need some infrastructure, don't we?
[00:23:52] <brson> ecr2: merged your branch into brson/io. thanks
[00:23:53] <jensnock_> Wellâ€¦ we can parse Rust code.
[00:23:55] <sully> I mean, I don't really care that it be a /generic/ map
[00:24:06] <jensnock_> And then we just need to differentiate the ASTâ€¦
[00:24:23] <jensnock_> Can't be too hard, can it? (Famous last words)
[00:24:31] <dbaupp> jensnock_: well, i'm (slowly) working on loading external syntax extensions, but this is clearly something that should be in there by default
[00:24:41] <sully> but I want to be able to map over vectors without having to write like 30 characters of boilerplate and usually a type annotation
[00:24:55] *** Quits: alisdair (textual@moz-7657F365.vc.shawcable.net) (Ping timeout)
[00:24:59] <jensnock_> dbaupp: Such an awesomely general extension should always be loaded ;)
[00:25:05] *** Quits: dwhyte (dwhyte@ED9190FB.B72E355F.7BF4A4B0.IP) (Ping timeout)
[00:25:07] <strcat> sully: .map(|&x| x * 2).to_vec() then
[00:25:09] <jensnock_> dbaupp: Just like the #[bstrie] property extension.
[00:25:26] <strcat> sully: iter() is temporary, as is it being called 'transform'
[00:25:26] <dbaupp> jensnock_: I'd consider removing the other ones too, they're clearly just distractions
[00:25:28] <pcwalton> could just be vec()
[00:25:40] <sully> that's not too bad
[00:25:40] <strcat> well, 'temporary'
[00:25:50] <strcat> I mean having to use it anywhere explicitly is temporary
[00:26:09] <strcat> should only have to be explicit when you want mutable/reverse iteration or consuming
[00:26:23] * dbaupp wonders how much could be implemented in terms of differentiate! and #[bstrie]
[00:26:42] <dbaupp> strcat: or passing it to a function
[00:27:31] *** Joins: dwhyte (dwhyte@ED9190FB.B72E355F.7BF4A4B0.IP)
[00:28:04] <jensnock_> dbaupp: I think int, differentiate! and #[bstrie] together is a turing complete.
[00:28:18] <jensnock_> dbaupp: We should rewrite the Rust compiler in just those.
[00:28:19] <Luqman> what's #[bstrie] ?
[00:28:43] <jensnock_> Luqman: It is a proposed syntax extension for making properties.
[00:29:14] <dbaupp> Luqman: struct Foo { #[bstrie] x: int } creates impl Foo { fn get_the_value_of_the_field_property_x() -> int, fn set_the_value_of_the_field_property_x(int) }
[00:29:24] *** Quits: mschifer (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[00:29:25] <Luqman> ah, silly me i should've know :P
[00:29:27] <dbaupp> Luqman: because bstrie loves getters/setters so much
[00:29:52] *** Quits: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[00:30:41] <dbaupp> jensnock_: we should start by rewriting trans with those.
[00:31:58] <jensnock_> dbaupp: And expand the name trans.
[00:32:22] <jensnock_> And all other names in Rustâ€¦
[00:32:48] <jensnock_> Ninja-expanding all names.
[00:32:54] <jensnock_> I wonder if anyone would notice.
[00:32:54] <dbaupp> jensnock_: "translate_rust_ast_to_llvm_ir"
[00:33:17] <dbaupp> (err, abstract_syntax_tree and intermediate_representation)
[00:33:29] <paupau> jump right to #[observe_property_changes] please!
[00:33:41] <dbaupp> jensnock_: but, yes, there are hundreds of opaquely named things in the compiler ;(
[00:33:58] *** Quits: true_droid (Adium@moz-123FD9B8.beck.volia.net) (Quit: Leaving.)
[00:33:59] <Eridius> lets start with the libraries please. standard::vector
[00:33:59] <engla> and clean up the source directory. Why isn't it ./org/mozilla/compilers/Rust/Rustc/librustc
[00:34:29] <jensnock_> *rust-compiler/library-rust-compiler
[00:35:31] *** Quits: cr (anonymous@moz-4C21C3DA.dip0.t-ipconnect.de) (Quit: cr)
[00:35:46] *** Quits: cscehr (Mibbit@AE48690.2C9B3718.5B998C92.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:36:34] <jensnock_> bjz, dbaupp, anyone else with interest: What do you think about OpenCL vector notation?
[00:37:03] <bjz> ?
[00:37:12] <jensnock_> For reference, http://www.khronos.org/files/opencl-1-1-quick-reference-card.pdf
[00:37:21] <SiegeLord> I've got no complaints about it
[00:37:44] *** Quits: echristo (echristo@D423593A.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[00:37:58] <SiegeLord> Although the 's' seems a bit out of nowhere
[00:38:00] <bjz> jensnock_: what am I looking at on the ref card?
[00:38:03] *** Quits: roo (jesse@moz-B7585E4C.dynamic.ip.windstream.net) (Ping timeout)
[00:38:16] <sully> hey, is there a known test suite breakage
[00:38:17] <jensnock_> bjz: Vector Component Addressing
[00:38:18] <SiegeLord> Section 6.1.7, I'm guessing
[00:38:20] <sully> ok, wait, that's bizzare
[00:38:25] <bjz> jensnock_: ahh, the fields
[00:38:25] <dbaupp> sully: which tet?
[00:38:27] <dbaupp> *test
[00:38:46] <dbaupp> SiegeLord: I'd guess it means 'scalar' or something, maybe?
[00:38:58] <SiegeLord> Maybe
[00:39:20] <dbaupp> jensnock_: I have no complaints either, but I've never actually used it
[00:39:25] <bjz> 's' == swizzle?
[00:39:49] <SiegeLord> I've only happened to use s0 and s1 >.>
[00:40:15] * bjz guesses it's swizzle
[00:40:22] <jensnock_> The .odd / .even notation is pretty nice too.
[00:40:23] <sully> well, I am getting: rust: task failed at 'Unhandled condition: not_utf8: ~"from_bytes: input is not UTF-8; first bad byte is 160"', /home/sully/src/rust/src/libstd/condition.rs:44
[00:40:31] <sully> but only on my branch, not on master....
[00:40:32] <sully> hm...
[00:40:41] <bjz> seeing as you can do: vec.s1423
[00:40:52] <jensnock_> Also, is there any way to not rebuild the compiler 3 times every change?
[00:41:18] <dbaupp> jensnock_: yeah
[00:41:25] <engla> there are a couple of secret codes
[00:41:35] <dbaupp> jensnock_: if you just want to test std, `make check-stage2-std NO_REBUILD=1`
[00:41:36] <steven_is_false> make check-stage1-extra
[00:41:53] <dbaupp> jensnock_: or, using a (recent) rustc to compile the crate directly
[00:41:54] <steven_is_false> Also the NO_REBUILD=1 like dbaupp mentioned
[00:42:33] *** Quits: doomlord (doomlod@moz-6651F8D4.range86-145.btcentralplus.com) (Ping timeout)
[00:42:43] <steven_is_false> Also, the supporting C++/C libraries can be built slightly faster using clang, and ccache I think.
[00:42:45] <engla> if you compile the crate directly you can filter which tests to run, it's very neat
[00:43:21] <jensnock_> rust build src/librustc/rustc.rs ?
[00:43:23] *** Joins: alisdair (textual@moz-EA60A466.dedicated.allstream.net)
[00:43:36] *** Joins: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP)
[00:43:36] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/9pTqIw
[00:43:36] *** Parts: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP) ()
[00:44:21] <engla> jensnock_: yes
[00:44:47] <engla> with --test to build test exec
[00:44:54] <bjz> jensnock_: I don't mind `s*`
[00:45:08] <bjz> jensnock_: you could use `_*`
[00:45:21] <bjz> jensnock_: but you probably want to keep it the same
[00:45:34] <dbaupp> engla: make check-foo-bar TESTNAME=foo does the same
[00:45:44] <jensnock_> The good parts about keeping it compatible with clang is that it is compatible with clang.
[00:46:43] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[00:46:56] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[00:46:56] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1MuV-Q
[00:46:56] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[00:46:58] <engla> ok
[00:47:03] *** Joins: ghrust (ghrust@C621748.6A2AE50.F3114085.IP)
[00:47:03] <ghrust> 01[13rust01] 15bors pushed 123 new commits to 06auto: 02http://git.io/LyrHlQ
[00:47:03] <ghrust> 13rust/06auto 1429d8300 15Brian Anderson: core::rt: Move uv idle tests to idle mod
[00:47:03] <ghrust> 13rust/06auto 148072690 15Brian Anderson: core::rt: Add bindings for async uv handles
[00:47:03] <ghrust> 13rust/06auto 146d8d73c 15James Miller: Add AtomicUint newtype
[00:47:04] *** Parts: ghrust (ghrust@C621748.6A2AE50.F3114085.IP) ()
[00:47:37] <engla> 123 commits
[00:48:26] *** Joins: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net)
[00:48:38] <steven_is_false> I'm so frustrated that I can't figure out the bugs in my refactoring of extra::arc.
[00:49:24] <steven_is_false> I probable need more test cases.
[00:49:27] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[00:49:45] <steven_is_false> Does anyone have any ideas for how one could test a semaphore?
[00:50:01] <bblum> uh... you could look at the semaphore test cases that are in extra::sync
[00:50:05] <bblum> i think?
[00:50:29] <steven_is_false> Doh!
[00:50:29] *** Joins: carllerche (carllerche@moz-BF6CB667.hsd1.ca.comcast.net)
[00:50:53] <steven_is_false> I ported over the extra::arc test cases but I forgot to port the extra::sync ones.
[00:51:20] <sam113101> is rust ready for embedded programming?
[00:51:56] <steven_is_false> sam113101: Probable not. I've run into several aggravating bugs.
[00:52:11] <steven_is_false> Furthermore, I'm told that there are several problems with memory usage.
[00:52:18] <sam113101> ok
[00:52:26] <jensnock_> sam113101: It isn't really 'ready' for anything yet.
[00:52:45] <sam113101> I think I'm going to wait a bit before learning it
[00:53:02] <steven_is_false> Actually, I'm not sure what the story with the memory usage is.
[00:53:07] <dbaupp> steven_is_false: for embedded there's unlikely to be much memory usage issues (since the programmer is controlling it all entirely)
[00:53:13] <strcat> steven_is_false: the are problems in the compiler with memory usage
[00:53:17] <dbaupp> steven_is_false: the memory usage is more with the rustc compiler itself
[00:53:20] <strcat> not at runtime in compiled rust code
[00:53:28] <steven_is_false> Okay then.
[00:53:30] <strcat> especially since ~ is now the same as malloc/free
[00:53:32] <dbaupp> strcat: (unless you write it like rustc)
[00:53:43] <dbaupp> strcat: you missed the party \o/
[00:53:50] *** Quits: seth (seth@moz-2C443A35.hsd1.co.comcast.net) (Input/output error)
[00:53:53] *** Joins: roo (jesse@moz-B7585E4C.dynamic.ip.windstream.net)
[00:53:58] <strcat> dbaupp: party? ;p
[00:54:04] <dbaupp> (at least 3 people said "yay", it was crazy.)
[00:54:09] <strcat> oh I was asleep when it landed
[00:54:31] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[00:54:44] <Luqman> strcat: what was the fix for the extra::json tests?
[00:54:52] <strcat> Luqman: a mistake in take glue
[00:54:57] <jmgrosen> could someone explain ~fn to me?
[00:55:03] <strcat> Luqman: was using the wrong type for calling the contained glue
[00:55:10] <strcat> Luqman: so it was destroying inner vectors wrong
[00:55:17] <strcat> I'm surprised it didn't fail earlier
[00:55:33] <Luqman> ah, yea that is odd it made it through everything else
[00:55:50] <dbaupp> strcat: as expected, it made precisely 0 difference to the memory usage of rustc
[00:55:50] <strcat> Luqman: I just ended up figuring it out with valgrind and vimdiff on IR again ;p
[00:55:50] <Luqman> did the json stuff had some contrived usecase?
[00:56:04] <strcat> Luqman: not really, but it's recursive and has ~ and ~[]
[00:56:14] *** Joins: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP)
[00:56:15] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14f7e400e to 1430c8aac: 02http://git.io/N3iJvQ
[00:56:15] *** Parts: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP) ()
[00:56:19] <strcat> so ~ inside ~[] inside ~[] inside ~ and so on
[00:56:27] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[00:56:27] <ghrust> 01[13rust01] 15bors pushed 8 new commits to 06auto: 02http://git.io/-uEQVQ
[00:56:27] <ghrust> 13rust/06auto 1420e7c4c 15Daniel Micay: remove the unused exchange_malloc `align` parameter...
[00:56:27] <ghrust> 13rust/06auto 1405eb3cf 15Andrew Paseltiner: std: Implement `Iterator::size_hint` method for `Option` iterators
[00:56:27] <ghrust> 13rust/06auto 144306b80 15Brendan Zabarauskas: Impl Not for bool
[00:56:28] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[00:56:45] <Luqman> strcat: yep, being able to see the ir is really useful
[00:56:58] *** Quits: carllerche (carllerche@moz-BF6CB667.hsd1.ca.comcast.net) (Quit: carllerche)
[00:57:10] <tikue> rusti: enum Foo { Bar { baz: uint } } let foo = Bar { baz: 1 }; match foo { Bar { baz: baz } => baz }
[00:57:11] -rusti- 1
[00:57:38] *** Quits: eholk (eholk@moz-A76CD101.uconnect.utah.edu) (Quit: eholk)
[00:57:42] <tikue> rusti: enum Foo { Bar { baz: uint, } } let foo = Bar { baz: 1, }; match foo { Bar { baz: baz } => baz }
[00:57:44] -rusti- 1
[00:58:02] <tikue> rusti: enum Foo { Bar { baz: uint, } } let foo = Bar { baz: 1, }; match foo { Bar { baz: baz, } => baz } // this won't compile because of the comma
[00:58:03] -rusti- line longer than 150 columns, pastebinned: http://sprunge.us/gPdP
[00:58:15] <roo> jmgrosen: whats confusing about it (there's plenty, but i mean to you)
[00:58:34] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[00:58:54] <jmgrosen> roo: is it just, basically, code with unique pointers to all the data it closes around?
[00:59:22] <roo> yep.
[00:59:28] <aatch> roo, not really
[00:59:36] <paupau> strcat: sweet, headerless ~ landed? congrats!
[00:59:39] <strcat> paupau: yep
[00:59:41] <roo> well, not to all the data, to the structure that references all the data
[00:59:46] <strcat> paupau: :)
[00:59:58] <dbaupp> aatch: I worked out a correct-er way to do the lint visitor:
[01:00:10] <aatch> jmgrosen, it's a heap closure, that copies/moves it's environment
[01:00:13] <paupau> time to do a game engine in rust
[01:00:18] <paupau> @ can go home
[01:00:29] <aatch> the limitation being that it must own the captured data
[01:00:39] <aatch> so it can't capture `@`
[01:00:42] <dbaupp> aatch: the lints actually only visit 4 things (item, expr, local, fn, I think), so just define a new trait with that.
[01:00:43] *** Quits: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP) (Quit: Leaving.)
[01:00:49] <dbaupp> (it was sorta obvious, actually)
[01:00:57] * dbaupp is slow
[01:01:02] <jmgrosen> aatch: ok, so it acts mostly the same as &fn but it's storable in a struct?
[01:01:16] <aatch> dbaupp, awesome. I thought the current system was over-complicated
[01:01:50] <strcat> you can store &fn in a struct
[01:01:58] <aatch> jmgrosen, no, stack closures capture their environment by reference, due to their "stackness" this is completely sound (barring bugs ofc)
[01:02:26] <strcat> you just can't copy &fn, and it has a lifetime
[01:02:31] <jmgrosen> strcat: "error: Illegal anonymous lifetime: anonymous lifetimes are not permitted here" ?
[01:02:34] <strcat> so for a stack closure that lifetime is the scope of the fn
[01:02:41] <aatch> jmgrosen, add a lifetime
[01:02:44] <aatch> &'self fn
[01:02:50] <jmgrosen> aatch: ah, right
[01:02:51] <strcat> rusti: struct Foo<'self> { f: &'self fn() }
[01:02:52] -rusti- ()
[01:03:03] <strcat> the iterator adaptors all use &fn
[01:03:04] * aatch knows it's possible, he did it
[01:03:32] <jmgrosen> so in which use cases should i use ~fn vs &'self fn?
[01:03:54] <aatch> jmgrosen, when you want to send the closure
[01:03:59] <dbaupp> jmgrosen: ~fn when you absolutely need it, &fn otherwise
[01:04:00] <aatch> and... that's about it really.
[01:04:07] <jmgrosen> awesome, thanks for the help
[01:04:10] <aatch> if you can get it work with &fn, do it.
[01:04:16] <strcat> ahhh one test will fail
[01:04:18] <strcat> ;[
[01:04:23] <pcwalton> hmm
[01:04:28] <pcwalton> did aatch's change get reverted yet?
[01:04:37] <strcat> pcwalton: no
[01:04:48] <aatch> pcwalton, no, it keeps failing on windows for some absurd reason.
[01:05:02] <pcwalton> mmm
[01:05:06] <paupau> current mozilla/rust/master gets me "error: multiple matching crates for `std`"
[01:05:17] <dbaupp> paupau: 'make clean'
[01:05:19] *** Quits: igl (igl@moz-2AD994FE.adsl.alicedsl.de) (Ping timeout)
[01:05:23] <paupau> dbaupp: ah, thanks
[01:05:25] <pcwalton> I'm tempted to just push it given that it's a backout
[01:05:32] <pcwalton> backouts always have approval on mozilla-central
[01:05:33] *** Joins: igl (igl@moz-A7FB5E5F.adsl.alicedsl.de)
[01:05:47] <etw> is there a contributing guide for rust somewhere? I have a patch for an outstanding issue, not able to issue a pull request for it using hub -i #
[01:06:42] <jensnock_> Hurray, I get a SIMD indexing error \o/
[01:06:47] <dbaupp> etw: there's a few pages on the wiki, https://github.com/mozilla/rust/blob/master/CONTRIBUTING.md
[01:06:50] <dbaupp> (and that)
[01:07:00] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[01:07:03] <dbaupp> etw: https://github.com/mozilla/rust/wiki/Notes
[01:07:59] <roo> jmgrosen: the way i think about it is that everything captured by a heap closure is put into a data structure, and you get an owned pointer to it. So everything it captures has to make sense as a a part of an owned data structure.
[01:09:38] <etw> ok doesn't look like there's any special procedure for issuing a pull request against an issue, so just reference the issue number using # in the pull request?
[01:10:08] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[01:10:37] <dbaupp> etw: yep, and if you're fixing it (including test cases!) then putting "Fixes #number" or "Closes #number" somewhere in the commit/pull request text will automatically close that issue when bors lands it.
[01:10:41] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[01:10:42] *** Joins: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP)
[01:10:42] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14c079236 to 1430c8aac: 02http://git.io/N3iJvQ
[01:10:42] *** Parts: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP) ()
[01:10:45] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[01:10:46] <ghrust> 01[13rust01] 15bors pushed 7 new commits to 06auto: 02http://git.io/wl0tFA
[01:10:46] <ghrust> 13rust/06auto 1420e7c4c 15Daniel Micay: remove the unused exchange_malloc `align` parameter...
[01:10:46] <ghrust> 13rust/06auto 1405eb3cf 15Andrew Paseltiner: std: Implement `Iterator::size_hint` method for `Option` iterators
[01:10:46] <ghrust> 13rust/06auto 144306b80 15Brendan Zabarauskas: Impl Not for bool
[01:10:47] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[01:11:48] <pcwalton> what, it bounced?
[01:11:54] <strcat> pcwalton: no I cancelled one
[01:11:58] <pcwalton> oh
[01:12:05] <strcat> pcwalton: one of the 8 made run-pass tests fail locally
[01:12:08] <strcat> so I removed it
[01:12:10] <pcwalton> ah
[01:12:26] <strcat> https://github.com/mozilla/rust/pull/7646 this one
[01:12:38] <Eridius> holy cow this is ugly, but it actually compiles. Is there any way to make this cleaner? https://gist.github.com/kballard/20083d55819617fdde7a
[01:12:43] <Eridius> (part of my encoding stuff)
[01:13:13] <dbaupp> Eridius: yeah, type Something = MapIterator< ... >
[01:13:26] <Eridius> dbaupp: hah, good point I forgot about that. But it's still horribly ugly
[01:13:34] <dbaupp> Eridius: correct :(
[01:13:44] <strcat> Eridius: well type inference should work properly ;p
[01:13:47] <strcat> stuff has a lot of dummy params
[01:13:56] <pcwalton> whoa
[01:13:58] *** Quits: paupau (textual@moz-D6583788.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[01:14:13] <dbaupp> Eridius: (also, line breaks ;P )
[01:14:15] <pcwalton> maybe associated types will help
[01:14:41] <strcat> pcwalton: there's a bug open about a type inference issue making it painful
[01:14:58] <strcat> sec
[01:15:04] <bblum> brson: ok, i pushed some task killing commits to my PR
[01:15:12] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[01:15:16] * bblum calls it a day
[01:15:22] <strcat> pcwalton: https://github.com/mozilla/rust/issues/6967 that one
[01:15:23] <steven_is_false> bblum: Why are some test cases in sync, and arc ignored on windows?
[01:15:37] <bblum> steven_is_false: task failure on windows causes the runtime to abort
[01:15:47] <steven_is_false> bblum: Oh wow.
[01:15:56] <strcat> pcwalton: it can't re-infer a type it already knew, if that makes sense
[01:16:09] <steven_is_false> bblum: Well that's something that needs to be fixed eventually.
[01:16:15] <bblum> no kidding :P
[01:16:33] <nmatsakis> tjc: ping
[01:16:43] <tjc> nmatsakis: pong
[01:16:45] <strcat> but anyway they all have 2 or 4 params instead of 1 or 2
[01:16:49] <pcwalton> hmm, I guess there's a bug in @fn
[01:16:50] *** Joins: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au)
[01:16:56] <bblum> steven_is_false: https://github.com/mozilla/rust/issues/908
[01:16:58] <bblum> old bug
[01:17:14] <steven_is_false> Thanks
[01:17:34] <Eridius> bblum: I don't suppose we could xfail those tests on Mac OS X 10.9 for the time being until that's fixed?
[01:17:41] <Eridius> since task failure aborts there too
[01:17:46] <bblum> Eridius: uh... that seems bad
[01:17:52] <bblum> failure used to work on windows
[01:17:58] <Eridius> bblum: yes it is bad. I wish I knew what was going on
[01:18:07] <Eridius> but I don't know enough about how rust's task failure works
[01:18:11] <bblum> xfailing them all seems like a huge regression
[01:18:21] <bblum> but it's not my call
[01:18:23] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[01:18:24] <pcwalton> whoa, I think rustdoc is relying on copying a noncopyable SharedChan
[01:18:26] <pcwalton> or something
[01:18:30] * pcwalton goes for dinner
[01:18:35] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[01:18:40] <nmatsakis> tjc: so I encountered this failure in a rustpkg test...
[01:18:43] <Eridius> libc++abi.dylib was rewritten from scratch for OS X 10.9. Apparently libc++abi.dylib had bugs on 10.8 as well. So either Rust was only working on 10.8 because of bugs, or libc++abi on 10.9 has bugs. but I don't know which it is
[01:18:44] <nmatsakis> tjc: ...I don't see it locally...
[01:18:44] <jensnock_> What is a AutoDerefRef?
[01:18:57] <tjc> nmatsakis: was it one of the ones that fetches stuff from github?
[01:18:59] <nmatsakis> jensnock_: it records whether there are autoderefs or autorefs on a particular expression
[01:19:02] <nmatsakis> tjc: yes.
[01:19:04] <tjc> I'm working on making those only use the local filesystem
[01:19:10] <nmatsakis> tjc: I wanted to ask if those are known to periodically fail
[01:19:11] *** Joins: paupau (textual@moz-D6583788.hsd1.ca.comcast.net)
[01:19:17] <tjc> nmatsakis: Yes, they are
[01:19:17] <jensnock_> nmatsakis: Ok, I don't want that, thanks <3.
[01:19:21] <Eridius> bblum: I know the guy who wrote libc++abi.dylib on 10.9, if that helps, but when I already talked to him he was theorizing it was a symbol visibility issue (since that was one of the bugs in 10.8), but that doesn't seem to be the case
[01:19:24] <tjc> because github is made of sparkly unicorns and failure
[01:19:31] <Eridius> since the exception is both thrown and caught within librustrt
[01:19:35] <nmatsakis> tjc: ok.
[01:19:39] <tjc> so I'm making those tests use local repos instead
[01:19:47] <tjc> in the meantime it's okay to #[ignore] them
[01:19:52] <tjc> (I thought they already were ignored)
[01:21:22] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[01:22:48] *** Quits: graydon (graydon@A5087023.2354C43D.D8E68FF6.IP) (Ping timeout)
[01:23:19] <bjz> assert_eq!(Some(&1), Some(&1))
[01:23:28] <bjz> rusti: assert_eq!(Some(&1), Some(&1))
[01:23:29] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/QLdD
[01:23:37] <bjz> nmatsakis: why?^
[01:23:40] <strcat> bjz: the rvalue issue
[01:23:45] <bjz> oh
[01:23:48] <strcat> it doesn't know how to extend the lifetime without a variable
[01:24:06] <strcat> rusti: let x = &1; assert_eq!(Some(x), Some(x));
[01:24:08] -rusti- ()
[01:24:10] <bjz> will be fixed?
[01:24:15] <strcat> bjz: I think so
[01:24:23] <dbaupp> bjz: #3511 I think
[01:24:25] <strcat> I think I broke buildbot
[01:24:27] <strcat> ;[
[01:24:31] <strcat> 3 bots didn't start
[01:24:37] <strcat> I'll start them myself...
[01:24:42] *** Joins: ross (ross@moz-8A84103E.br.br.cox.net)
[01:24:50] *** Quits: paupau (textual@moz-D6583788.hsd1.ca.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[01:24:53] *** Quits: nmatsakis (nmatsakis@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[01:25:03] <bjz> rusti: let (x, y) = (&1, &1); assert_eq!(Some(x), Some(y))
[01:25:05] -rusti- ()
[01:25:06] <tikue> strcat: how will that work with numbers that aren't interned
[01:25:13] *** Quits: eschweic (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[01:25:23] <strcat> tikue: they aren't "interned"
[01:25:29] *** Joins: MaikKlein (maik@moz-54A7C76.dip0.t-ipconnect.de)
[01:25:31] <tikue> strcat: how does it work?
[01:25:33] <strcat> let x = &1; puts 1 on the stack
[01:25:38] <strcat> and takes a reference to it
[01:25:44] <strcat> the lifetime ends at the end of the block
[01:25:52] <strcat> it just doesn't know how to do that with rvalues
[01:26:18] <tikue> strcat: isn't it an rvalue in that example that works?
[01:26:34] <strcat> tikue: but it's used through an lvalue
[01:26:34] <tikue> let x = &1; // isn't this a pointer to an rval
[01:26:38] <tikue> ok
[01:26:41] <strcat> it's using it that won't work
[01:26:42] *** Joins: posco (oscarboyki@636AC086.5999CED5.71743E61.IP)
[01:26:50] <strcat> foo().iter().map(
[01:26:52] <strcat> won't work
[01:27:05] <strcat> let x = foo(); x.iter().map(
[01:27:07] <strcat> will
[01:27:09] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[01:27:32] *** Joins: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net)
[01:27:52] <tikue> strcat: gotcha. yeah I had some trouble with something like that recently
[01:28:08] <strcat> heh there's an extra build, I won't worry about it
[01:29:32] *** Joins: nmatsakis (nmatsakis@moz-DB4A9C19.scl3.mozilla.com)
[01:29:32] *** ChanServ sets mode: +o nmatsakis
[01:29:44] <tikue> rusti: let mut a = (~[], 0); a.first().push(1);
[01:29:50] -rusti- <anon>:7:17: 7:18 warning: variable does not need to be mutable [-W unused-mut (default)]
[01:29:50] -rusti- <anon>:7          let mut a = (~[], 0); a.first().push(1);
[01:29:51] -rusti-                           ^
[01:29:51] -rusti- timeout triggered!
[01:30:19] *** Quits: ecr2 (ereed@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[01:30:50] <strcat> rusti: let mut a = (~[], 0); a.first().push(1);
[01:30:56] -rusti- <anon>:7:17: 7:18 warning: variable does not need to be mutable [-W unused-mut (default)]
[01:30:56] -rusti- <anon>:7          let mut a = (~[], 0); a.first().push(1);
[01:30:56] -rusti-                           ^
[01:30:56] -rusti- timeout triggered!
[01:30:59] <strcat> ;\
[01:31:22] <tikue> :'(
[01:32:18] <nmatsakis> pcwalton: git@github.com:nikomatsakis/rust.git branch issue-3678-wrappers-be-gone-2
[01:33:03] *** Joins: pnathan (Adium@moz-BDC3EE62.tukw.qwest.net)
[01:33:33] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[01:35:16] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[01:37:03] *** Joins: Ripp__ (quassel@moz-16954008.hsd1.ca.comcast.net)
[01:37:28] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Ping timeout)
[01:37:35] <nmatsakis> brson: ping
[01:38:25] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[01:39:31] *** Joins: vk (vk@moz-645FE505.tmodns.net)
[01:40:04] <brson> nmatsakis: pong
[01:40:50] <nmatsakis> brson: I was about the matter of stack switching and the danger of fast-ffi leading to every thread having a large stack,
[01:40:56] <bjz> rusti: std::sys::sizeof::<Result<&[int,..64], ()>()
[01:40:56] -rusti- <anon>:7:51: 7:52 error: expected `,` but found `(`
[01:40:56] -rusti- <anon>:7          std::sys::sizeof::<Result<&[int,..64], ()>()
[01:40:57] -rusti-                                                             ^
[01:40:57] -rusti- application terminated with error code 101
[01:41:34] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[01:41:36] <nmatsakis> brson: whereas in my PR we automatically mark fns that call C functions are requiring a large stack,
[01:41:47] <bjz> rusti: std::sys::size_of::<Result<&[int,..64], ()>>()
[01:41:47] -rusti- 8
[01:41:51] <nmatsakis> brson: maybe it'd be better to just not do that automatically,
[01:42:08] <nmatsakis> brson: but instead add a lint (default: error? warn?) for calls to C functions that occur from a rust fn that is not annotated
[01:42:12] <bjz> rusti: std::sys::size_of::<Option<&[int,..64]>>()
[01:42:12] -rusti- 8
[01:42:15] <bjz> neat
[01:42:16] <nmatsakis> brson: so it is more transparent
[01:42:18] <bjz> :)
[01:42:31] <nmatsakis> brson: curious as to your thoughts
[01:43:30] <Eridius> ok this is cleaner with the typedef, but it's still rather complicated: https://github.com/kballard/rust/commit/7d12e494a97b72bab35a1c17a3c514a67f292ea1
[01:43:49] *** Quits: Ripp__ (quassel@moz-16954008.hsd1.ca.comcast.net) (Ping timeout)
[01:44:35] <dbaupp> Eridius: looks nicer
[01:44:50] <dbaupp> Eridius: (what about &str?)
[01:44:54] <brson> nmatsakis: so leave the wrappers off but require all callers to make wrappers explicitly. sounds passable :-/
[01:45:11] *** Quits: azakai (alon@2557E599.66715431.D25A875A.IP) (Ping timeout)
[01:45:16] <brson> it's going to change a lot of existing code
[01:45:38] <Eridius> dbaupp: not sure how to handle &str yet. unless you just mean  adding a convenience function .reencode() there
[01:45:59] <brson> nmatsakis: it also exposes ugly implementation details to all ffi users
[01:46:05] <dbaupp> Eridius: well, s.iter() gives you a StrCharIterator
[01:46:34] *** Joins: olleharstedt (Thunderbir@moz-80D8890F.ias.bredband.telia.com)
[01:46:36] *** Quits: vk (vk@moz-645FE505.tmodns.net) (Quit: vk)
[01:46:44] <Eridius> dbaupp: I'm gonna have to pick this up later. time to get off the bus and grab some dinner
[01:46:44] <nmatsakis> brson: yes, it requires that you think about stacks.
[01:46:55] <dbaupp> Eridius: actually, possibly not necessary, since s.iter() -> Iterator<char> (not Iterator<&char>), so it's probably fine with the pure iterator ones
[01:47:21] <nmatsakis> brson: it also scales naturally to the idea of having some functions that require more-or-less stack,
[01:47:32] <nmatsakis> brson: in that you could easily annotate the C function with how much stack it needs,
[01:47:34] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[01:47:36] <nmatsakis> brson: and annotate the callers likewise,
[01:47:46] <nmatsakis> brson: and the compiler can compare.
[01:48:11] <nmatsakis> brson: well, that's not exactly natural,
[01:48:26] <nmatsakis> brson: kind of silly to have the annotation twice I guess (once to say how much you need, once to actually reques tit)
[01:48:58] <dbaupp> acrichto: ping
[01:49:00] <nmatsakis> brson: it occurs to me that we could keep the current scheme (that is, automatically mark callers as large stack) and ALSO have the lint, default "accept"
[01:49:05] <acrichto> dbaupp: pong
[01:49:16] <nmatsakis> brson: then for novices things "just work", but you can ratchet up the strictness if you like. 
[01:49:24] <nmatsakis> brson: bah. I'll bring this up at the meeting tomorrow I think. 
[01:49:25] <acrichto> dbaupp: actually, brb
[01:49:35] <dbaupp> acrichto: ok
[01:49:50] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[01:49:50] <ghrust> 01[13rust01] 15bors pushed 21 new commits to 06auto: 02http://git.io/B26PrA
[01:49:50] <ghrust> 13rust/06auto 1417b3712 15Niko Matsakis: Update existing tests to account for stricter, more correct handling of irrefutable patterns
[01:49:50] <ghrust> 13rust/06auto 141670a8c 15Niko Matsakis: Add new tests for irrefutable patterns used in various tricky ways
[01:49:50] <ghrust> 13rust/06auto 14ba13482 15Niko Matsakis: update ptr intrinsics and rewrite vec routines to be more correct....
[01:49:52] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[01:50:09] *** Joins: brendan (brendaneic@moz-C8E58A34.public.wayport.net)
[01:50:15] <strcat> ugh one failed
[01:50:23] *** Quits: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au) (Ping timeout)
[01:50:48] *** Joins: seth (seth@moz-2C443A35.hsd1.co.comcast.net)
[01:50:56] <strcat> / error-pattern:binary operation + cannot be applied to type `*int`
[01:50:59] <strcat> >.<
[01:51:26] *** Quits: MaikKlein (maik@moz-54A7C76.dip0.t-ipconnect.de) (Ping timeout)
[01:51:49] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[01:51:52] *** Joins: weirdo (Mibbit@moz-F217D31A.hsd1.or.comcast.net)
[01:51:58] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[01:52:02] <aatch> strcat, hahaha
[01:52:34] *** Quits: weirdo (Mibbit@moz-F217D31A.hsd1.or.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[01:52:53] <ChrisMorgan> Yay! I finally *did* find a rustc bug :-)
[01:53:11] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[01:53:32] <ChrisMorgan> rust: task failed at 'assertion failed: rp.is_none()', /home/chris/vc/rust/src/librustc/middle/typeck/collect.rs:1041
[01:53:52] *** Quits: brendan (brendaneic@moz-C8E58A34.public.wayport.net) (Ping timeout)
[01:54:31] *** Quits: alisdair (textual@moz-EA60A466.dedicated.allstream.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[01:55:22] *** Joins: brendan (brendaneic@moz-C8E58A34.public.wayport.net)
[01:55:33] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[01:55:45] <roo> what would be a use case for using more than one lifetime in a single type?
[01:55:49] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[01:56:15] * roo cannot think of a single one
[01:56:30] <aatch> roo, I've got one
[01:56:32] <aatch> sec
[01:56:32] <ChrisMorgan> Aww... my bug is already filed, https://github.com/mozilla/rust/issues/6396 :-(
[01:57:15] *** Joins: doomlord (doomlod@moz-6651F8D4.range86-145.btcentralplus.com)
[01:57:58] <dbaupp> roo: aatch's comment at the end of https://github.com/mozilla/rust/issues/4846
[01:58:03] <strcat> I don't really understand why we have a test to make sure a feature is missing
[01:58:05] <strcat> heh
[01:58:30] *** Joins: vk (vk@moz-645FE505.tmodns.net)
[01:58:38] <ChrisMorgan> strcat: perhaps to ensure that you will make a test when you implement it?
[01:59:10] <strcat> well it succeeded in wasting 30 mins of bors time ;p
[01:59:26] * strcat shrugs
[01:59:38] <strcat> I didn't run compile-fail because these were library additions
[02:00:24] *** Quits: brendan (brendaneic@moz-C8E58A34.public.wayport.net) (Ping timeout)
[02:00:54] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[02:00:55] *** Quits: vk (vk@moz-645FE505.tmodns.net) (Quit: vk)
[02:00:56] *** Quits: Sgeo (Sgeo@moz-D0F30617.dyn.optonline.net) (Ping timeout)
[02:00:58] *** Joins: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP)
[02:01:17] *** Joins: vk (vk@moz-645FE505.tmodns.net)
[02:02:18] <engla> bjz: fn Ã˜() -> HashSet<K> is actually possible ^^
[02:02:25] <bjz> :P
[02:03:45] *** Joins: Sgeo (Sgeo@moz-D0F30617.dyn.optonline.net)
[02:03:49] <dbaupp> rusti: fn Ã˜() -> int { 0 } Ã˜()
[02:03:50] -rusti- 0
[02:04:04] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[02:04:39] <bjz> engla: âˆª(set1, set2) :P
[02:05:00] <aatch> roo, heres an example + explanation https://gist.github.com/Aatch/5954101
[02:05:07] <dbaupp> rusti: fn âˆª(a: uint, b: uint) -> uint { a ^ b }
[02:05:08] -rusti- <anon>:7:12: 7:12 error: unknown start of token: 8746
[02:05:08] -rusti- <anon>:7          fn âˆª(a: uint, b: uint) -> uint { a ^ b }
[02:05:08] -rusti-                      ^
[02:05:08] -rusti- application terminated with error code 101
[02:05:15] * roo looks
[02:05:20] <ChrisMorgan> =-O
[02:05:24] *** Joins: brendan (brendaneic@moz-C8E58A34.public.wayport.net)
[02:05:55] <bjz> dbaupp: what about set.âˆˆ(x)? :P
[02:05:59] *** Quits: Sgeo (Sgeo@moz-D0F30617.dyn.optonline.net) (Ping timeout)
[02:06:15] * bjz is well and truley joking
[02:06:18] <dbaupp> rusti: let âˆˆ = 1;
[02:06:18] -rusti- <anon>:7:13: 7:13 error: unknown start of token: 8712
[02:06:18] -rusti- <anon>:7          let âˆˆ = 1;
[02:06:18] -rusti-                       ^
[02:06:18] -rusti- application terminated with error code 101
[02:06:27] <jensnock_> bjz: x âˆˆ set ?
[02:06:29] <dbaupp> bjz: you better be, that's backwards
[02:06:32] * jensnock_ is not joking.
[02:06:40] <bjz> dbaupp: yes :(
[02:06:42] <engla> let the symbols be operators
[02:06:53] <bjz> âˆˆ(x, set)
[02:06:58] <bjz> is odd
[02:07:00] *** Quits: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[02:07:02] <dbaupp> aatch: I have a feeling the IdVisitor in lint is gonna end up being really strange
[02:07:07] <engla> what about num::Ï€, is it a non-joke
[02:07:10] <bjz> x.âˆˆ(set)
[02:07:11] *** Quits: pnathan (Adium@moz-BDC3EE62.tukw.qwest.net) (Quit: Leaving.)
[02:07:18] <jensnock_> engla: Possibly?
[02:07:30] <bjz> engla: I was considering
[02:07:33] <dbaupp> engla: presumably `pi` would still be available
[02:07:45] *** Quits: brendan (brendaneic@moz-C8E58A34.public.wayport.net) (Ping timeout)
[02:08:00] <bjz> engla: https://github.com/mozilla/rust/issues/4819#issuecomment-20645194 :P
[02:08:02] <dbaupp> aatch: specifically, I may have to copy the IdVisitor from ast_util :(
[02:08:04] <aatch> it's possibly because Ï€ is a start/continue character.
[02:08:07] <aatch> dbaupp, why?
[02:08:19] <engla> Î£ is a letter!
[02:08:26] <dbaupp> aatch: can't make it recur differently
[02:08:41] <dbaupp> i.e. I need to hook in and say "stop!", but I can't
[02:08:45] *** Joins: Sgeo (Sgeo@moz-D0F30617.dyn.optonline.net)
[02:08:59] *** Joins: brendan (brendaneic@moz-C8E58A34.public.wayport.net)
[02:08:59] <jensnock_> dbaupp: You don't like APL?
[02:09:15] <aatch> dbaupp, make the closure return a bool?
[02:09:30] <dbaupp> aatch: hm, might work?
[02:09:48] <dbaupp> aatch: although, there's information I need, but don't have.
[02:09:53] * dbaupp modifies the IdVisitor
[02:09:56] *** Quits: kimundi (kimundi@moz-D11055B1.dip0.t-ipconnect.de) (Ping timeout)
[02:10:00] <aatch> theres only one other place that uses it directly, and it's in ast_util
[02:10:05] <jensnock_> Isn't the â—‹ unary operator wonderful?
[02:10:21] <dbaupp> engla: but âˆ‘ isn't
[02:10:23] <jensnock_> The circle-operator of course multiplies by Ï€.
[02:10:29] <bjz> jensnock_: aye
[02:10:43] <bjz> jensnock_: we need an overload trait!
[02:10:43] <aatch> rusti: let Ï€ = 3.14159; Ï€
[02:10:44] -rusti- 3.14159
[02:10:46] <bjz> x)
[02:10:56] <jensnock_> bjz: Totally.
[02:11:09] <bjz> jensnock_: Fortress here we come
[02:11:18] <jensnock_> bjz: Moar like, APL.
[02:11:33] * bjz is sad Fortress died
[02:11:56] *** Quits: Sgeo (Sgeo@moz-D0F30617.dyn.optonline.net) (Ping timeout)
[02:12:51] * bjz loves the idea of overloading the bid square operator
[02:12:53] <bjz> *big
[02:13:00] *** Joins: Sgeo (Sgeo@moz-D0F30617.dyn.optonline.net)
[02:13:03] <strcat> rusti: 2
[02:13:04] -rusti- 2
[02:13:07] *** Joins: kimundi (kimundi@moz-2F11D3AF.dip0.t-ipconnect.de)
[02:13:08] *** Quits: brendan (brendaneic@moz-C8E58A34.public.wayport.net) (Ping timeout)
[02:13:12] <acrichto> dbaupp: I'm back now
[02:13:43] *** Joins: jdm (jdm@F2D29657.F60B0462.67AC9B1.IP)
[02:14:37] *** kimundi is now known as zz_kimundi
[02:14:37] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[02:15:05] *** Quits: Sgeo (Sgeo@moz-D0F30617.dyn.optonline.net) (Ping timeout)
[02:15:40] <dbaupp> acrichto: another lint question... do you know why the stopping visitor also stops on tys?
[02:16:03] *** Joins: Sgeo (Sgeo@moz-D0F30617.dyn.optonline.net)
[02:16:28] <acrichto> dbaupp: I'm actually not sure... maybe as an optimization b/c nothing currently lints them?
[02:16:39] <dbaupp> acrichto: ah, ok
[02:17:18] <dbaupp> (fwiw, I think sanxiyn may've been running into that last night, adding a lint that touched types.)
[02:17:43] <bjz> jensnock_: of course we also need bool::âˆ§(x, y) and bool::âˆ¨(x, y) and bool::Â¬(x)
[02:17:54] <acrichto> I think that it can be safely removed
[02:17:58] <jensnock_> bjz: Still sounds like operators.
[02:17:59] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[02:18:13] <dbaupp> acrichto: ok
[02:18:14] <jensnock_> bjz: I don't like this fancy-schmansy function notation.
[02:18:29] <dbaupp> acrichto: I'm currently rewriting the lints to use a trait/default-method based visitor
[02:18:38] <dbaupp> (hence all the questions)
[02:18:40] <bjz> jensnock_: yeah *sadface*
[02:18:51] <jensnock_> bjz: You should add more traits.
[02:19:00] <acrichto> dbaupp: is that part of refactoring visit.rs in general?
[02:19:01] <bjz> jensnock_: heh, I wouldn't dare
[02:19:04] <jensnock_> bjz: *Operator overloading traits.
[02:19:07] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[02:19:11] <bjz> jensnock_: nor do I know how
[02:19:24] * jensnock_ neither, but that wouldn't stop me. :S
[02:19:32] <dbaupp> acrichto: yeah, aatch wrote a visitor that uses default methods instead of the Visitor { ...,  .. visit::default_visitor() } pattern
[02:19:38] *** Quits: vk (vk@moz-645FE505.tmodns.net) (Quit: vk)
[02:19:39] <jensnock_> I am currently hacking SIMD, and I have _no_ idea wtf I am doing.
[02:19:47] <jensnock_> But I am getting different error messages now.
[02:20:06] <dbaupp> jensnock_: if you keep pressing different keys, eventually you'll get something that works.
[02:20:06] <acrichto> dbaupp: awesome! From what I've seen linting is the most... "creative" in what it does with the visitor structs.
[02:20:32] <dbaupp> acrichto: yeah, I think I've almost got it planned out
[02:20:33] <acrichto> dbaupp: the most non-standard thing is the item-stopping visitor (all the sub-lints must have that)
[02:21:01] <jensnock_> dbaupp: Yeah, but I have at least passed to the 'I know kind of which parts fits where in the grammar'-stage, so I can do a bit better than that.
[02:21:09] <jensnock_> dbaupp: But then I meet my mortal enemy '@'.
[02:21:11] <dbaupp> acrichto: yeah, that's "solved", it's just lint_session's uses of an IdVisitor that's blocking it.
[02:21:20] <dbaupp> I'm working on that though
[02:21:23] <jensnock_> dbaupp: I liked @ in ObjC, but here it is evil :(
[02:21:36] * jensnock_ thinks @ has been a bad, bad boy.
[02:21:38] <acrichto> oh awesome!
[02:21:42] <bjz> jensnock_: #[op_binary = "â—‹"] trait Circle<RHS,Result> { pub fn circle(&self, other: &RHS) -> Result; }
[02:21:46] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[02:21:53] <dbaupp> (does anyone know if I can go node_id -> what type of ast thing it is?)
[02:22:01] <pcwalton> dbaupp: it's in the ast map
[02:22:05] <pcwalton> "items" in the tcx
[02:22:10] <dbaupp> pcwalton: thanks
[02:22:11] <bjz> jensnock_: :P "bring on the abuse!"
[02:22:12] <aatch> jensnock_, nobody can out-hate `@` with me
[02:22:29] * aatch is familiar with the AST map
[02:22:35] * jensnock_ hugs aatch.
[02:22:53] <pcwalton> ok, rustdoc is de-copied
[02:22:54] * dbaupp is taking bets on aatch v jensnock_: out-hating `@`
[02:22:54] * bjz hates @fn, but does not quite know why
[02:23:23] <dbaupp> jensnock_: but yeah, sounds like you're almost making progress?
[02:23:53] <dbaupp> jensnock_: (I guess you know this, but sanxiyn did the work on SIMD that's currently in the tree.)
[02:24:10] <jensnock_> dbaupp: I think it checks the faux-fields on the vectors and then crashes when it can't find them.
[02:24:28] <jensnock_> dbaupp: Yes, but haven't seen him around for a while. I assume his TZ is different from mine.
[02:25:16] <dbaupp> jensnock_: korea
[02:25:26] <jensnock_> That's different, yes.
[02:25:34] <dbaupp> (he was here last night, so he's not completely off the radar.)
[02:25:53] <jensnock_> No, but I am mostly having troubles with not having a clue about where to do stuff in the compiler.
[02:25:56] <klutzy> in korea here's 11:25 am
[02:25:58] <jensnock_> I know what I want to do.
[02:26:13] <jensnock_> 4:26 AM here.
[02:26:16] <jensnock_> I should be in bed.
[02:26:26] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[02:26:34] <dbaupp> do you have a laptop? you can Rust in bed ;P
[02:26:55] *** Joins: vk (vk@moz-645FE505.tmodns.net)
[02:27:10] <jensnock_> dbaupp: Yes, but that is unhealthy for me.
[02:27:15] <engla> hah, jensnock_ I was wondering
[02:27:17] <jensnock_> dbaupp: Just like staying up.
[02:27:18] *** Quits: vk (vk@moz-645FE505.tmodns.net) (Quit: vk)
[02:27:30] *** Joins: vk (vk@moz-645FE505.tmodns.net)
[02:27:34] <dbaupp> engla: you're up ridiculously late too :P
[02:27:37] <engla> I noticed you're in the same city from your gh profile
[02:27:46] <engla> me no? no
[02:27:53] <engla> same city, differen TZ
[02:27:53] *** Quits: vk (vk@moz-645FE505.tmodns.net) (Quit: vk)
[02:28:48] <jensnock_> What TZ do you follow?
[02:29:10] <engla> nah I'm just usually up this late
[02:29:43] * dbaupp thinks you two should have a Lund(?) Rust hack session
[02:30:49] <jensnock_> Foocafe is closed for summer :(
[02:31:00] <jensnock_> The first Rust User Group?!
[02:31:07] <jensnock_> Lundarost!
[02:31:18] *** Quits: olleharstedt (Thunderbir@moz-80D8890F.ias.bredband.telia.com) (Ping timeout)
[02:31:37] <engla> hehe
[02:31:40] <jensnock_> Ã˜rerost.
[02:31:53] <dbaupp> I think there was a meet up in Seoul
[02:32:04] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[02:32:06] <jensnock_> Nuuuuâ€¦ all the novelty is gone /o\
[02:32:11] <klutzy> i met sanxiyn and Yurume there
[02:32:12] <klutzy> :P
[02:33:08] <dbaupp> jensnock_: don't know if they're calling themselves a rug yet... you could bag that first :P
[02:33:41] <jensnock_> Ruby kind of occupied RUG.
[02:34:40] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[02:34:58] <dbaupp> "carpet"?
[02:35:16] <acrichto> strcat: I've updated #7646, so it could be included in the rollup if it's not too late
[02:36:07] <jensnock_> dbaupp: RDAX, Rust Developer Association of X?
[02:36:37] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[02:37:02] <jensnock_> On the other hand, since we would fit it 'Kuddrummet', I assume a RUG would be fine.
[02:37:58] <jensnock_> And I could make rust medals! \o/
[02:38:41] <dbaupp> jensnock_: vad betyder 'kuddrummet'?
[02:38:51] <engla> yeah I'm wondering what that is
[02:39:10] * dbaupp wants some Rust medals
[02:39:14] <engla> great time for a swedish hangout
[02:39:23] <engla> 4:40 am
[02:39:26] <jensnock_> dbaupp: Essentially a room filled with pillows, and this special 'kuddrum' is located in the Languages and Literature center.
[02:39:36] <jensnock_> And is filled with crazy people.
[02:39:44] <jensnock_> Including at least one RPG society.
[02:39:45] <engla> I've never been there
[02:39:59] <jensnock_> And you spend time at SOL?
[02:40:02] <engla> no
[02:40:08] <jensnock_> You should.
[02:40:23] <Jeaye> Rust's equivalent to C++'s std::set? I see std::trie and std::hashmap.
[02:40:28] *** Quits: Sorella (queen@78575561.924F2739.95C8B7C6.IP) (Quit: (quit))
[02:40:33] <tikue> Jeaye: hashset
[02:40:42] <Jeaye> Ah, must be in extra?
[02:40:48] <tikue> Jeaye: I think it's in hashmap
[02:40:48] <engla> hashset is in hashmap
[02:40:49] <Eridius> no it's in std::hashmap
[02:40:55] <engla> but there is extra::treemap
[02:40:57] *** Quits: sigma1 (sigma@51C589B3.EF2694B5.DFAC6AA7.IP) (Ping timeout)
[02:41:01] <strcat> the equivalent to std::set is TreeSet
[02:41:10] <strcat> HashSet is equivalent to C++'s std::unordered_set
[02:41:20] <dbaupp> jensnock_: hahaha, awesome
[02:41:59] <steven_is_false> How can I figure out which test is causing the testsuite to hang?
[02:42:01] <Jeaye> strcat: How is HashSet stored?
[02:42:09] <strcat> it's not sorted
[02:42:15] <strcat> Jeaye: oh, stored
[02:42:16] <Jeaye> stored
[02:42:24] <Jeaye> Standard hash table?
[02:42:26] <strcat> yes
[02:42:39] <Jeaye> vs TreeSet being an rb tree?
[02:42:45] <strcat> Jeaye: yes
[02:42:51] <strcat> TreeSet and HashSet are just built on top of the maps
[02:42:54] <dbaupp> steven_is_false: RUST_THREADS=1 will make it run single threaded, so you can see which is the last to print
[02:43:05] <Jeaye> mmk. Thanks, strcat 
[02:43:08] <steven_is_false> dbaupp: Thanks.
[02:43:31] <Eridius> steven_is_false: run the testsuite with RUST_THREADS=1 and it will print out the test name before running
[02:43:38] <Eridius> (when parallel it can't print until the test is done or it would mix lines)
[02:45:34] *** Joins: olleharstedt (Thunderbir@moz-80D8890F.ias.bredband.telia.com)
[02:47:09] <ChrisMorgan> Why exactly does libstd/io.rs have an `impl Reader for @Reader` (ditto for Writer)? Is that really not done automatically?
[02:47:26] <dbaupp> ChrisMorgan: yeah, it was bad
[02:47:34] <dbaupp> (as in, wrong.)
[02:47:52] <dbaupp> e.g. you can't compare two @Eq trait objects
[02:48:02] <dbaupp> (not by default, anyway)
[02:48:08] <Eridius> rand also has impl<R: Rng> Rng for @mut R
[02:48:31] <dbaupp> Eridius: that's just convience because of something to do with auto-deref not working
[02:49:08] <dbaupp> (so that rand::task_rng().gen() works, instead of (*task_rng()).gen())
[02:49:13] <Eridius> yeah
[02:51:15] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[02:51:46] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[02:52:15] <ChrisMorgan> Why do I get complaints of "use of undeclared module `std::io`", etc. if trying to use the name `std::io::Writer`? If I do `use std::io;` then `io::Writer` will work; is it that you can't include the crate name in the reference?
[02:52:21] <strcat> yay fixed irrefutable patterns are going to land
[02:52:34] <pcwalton> \o/
[02:52:48] <pcwalton> ChrisMorgan: hmm, "use std::io::Writer" should work
[02:53:06] <ChrisMorgan> pcwalton: it does, but I'm avoiding it for this particular bit of code.
[02:53:09] <dbaupp> ChrisMorgan: you may need `use std;` or just write `::std::io::Writer`
[02:53:32] <ChrisMorgan> 'Cos I'm writing a simple adapter betwixt std::io::Writer and std::rt::io::Writer.
[02:53:53] <dbaupp> (the :: prefix makes the path crate-root relative ("global"), rather than mod relative.)
[02:53:56] <ChrisMorgan> Ah, a leading ::. That does it.
[02:54:58] <ChrisMorgan> (I don't actually want it any more, having put in `use std::io;` and using `io::Writer` instead, but it's good to know.)
[02:55:13] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[02:56:19] *** Joins: MaikKlein (maik@moz-54A7C76.dip0.t-ipconnect.de)
[02:56:51] <ChrisMorgan> My HTTP server is languishing on a closure problem: my ResponseWriter is notâ€”cannot be, as far as I can see, for the socket stuff is &â€”Send. Then rustc is complaining that it doesn't work. What can I do about it?
[02:56:56] <jensnock_> On a scale from 0 to epsilon, what is the chance that this works?
[02:57:20] <dbaupp> jensnock_: Î´
[02:57:38] <jensnock_> But that is more than epsilon?
[02:57:40] <engla> greek or cyrillic
[02:57:52] <jensnock_> Orâ€¦ waitâ€¦ I see what you did thereâ€¦ ewwwww!!11!
[02:58:09] <dbaupp> engla: greek. (this is maths, man. :P )
[02:58:48] <dbaupp> ChrisMorgan: why do you need it to be Send?
[02:59:15] <engla> the other one is Ð±
[02:59:28] <ChrisMorgan> It's saying that "this closure's environment must satisfy `Send`"
[03:00:20] <dbaupp> ChrisMorgan: ah, are you trying to call spawn { .. } on it?
[03:01:09] <engla> I don't think &fn can be properly sendable right now regardless of bounds. (I have tried and failed)
[03:01:35] <ChrisMorgan> Actually, it's in the Server that it's saying that, where the call to self.callback.handle_request() is occurring (callback being a `Handler` in my present model) rather than in the ResponseWriter.
[03:01:53] *** Quits: olleharstedt (Thunderbir@moz-80D8890F.ias.bredband.telia.com) (Ping timeout)
[03:01:58] <ChrisMorgan> So I think somehow it's objecting to the local variables in Server there. (That part *is* in a spawn block.)
[03:02:39] <ChrisMorgan> I don't understand why it would be trying to pack the local variables. Why is it doing that?
[03:05:50] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[03:07:06] <MaikKlein> is tjc's audio talk already available?
[03:07:26] <tjc> MaikKlein: Not yet. It'll be at http://opensourcebridge.org/sessions/970 when it is
[03:07:39] <MaikKlein> tjc, okay thanks :)
[03:07:46] <tjc> np
[03:07:53] <ChrisMorgan> An alternative model that I've been considering would dispense with Handler in favour of a Server trait of the same definition with a ServerUtil implementation providing the methods currently on Server; but I don't believe that that alters this problem at all.
[03:09:29] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[03:10:41] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Ping timeout)
[03:11:52] *** Quits: MaikKlein (maik@moz-54A7C76.dip0.t-ipconnect.de) (Ping timeout)
[03:12:15] *** Quits: Sgeo (Sgeo@moz-D0F30617.dyn.optonline.net) (Quit: Leaving)
[03:13:41] <Jeaye> insertion on a TreeSet with an already-stored value replaces the old value, yeah? 
[03:13:46] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[03:14:15] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[03:15:31] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Quit: tikue)
[03:15:33] *** Quits: seth (seth@moz-2C443A35.hsd1.co.comcast.net) (Input/output error)
[03:15:38] <ChrisMorgan> I'd go with the ServerUtil/Server model instead of the Server/Handler model immediately if it weren't for the fact that then you would need to `use ServerUtil` before it'd work. Having traits that you can automatically use, as used for some things in libstd in the prelude, would fix that problem.
[03:16:30] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[03:18:13] *** Quits: bytewise (bytewise@moz-649C630D.unitymediagroup.de) (Quit: Leaving)
[03:19:05] <strcat> Jeaye: yes
[03:19:58] <Jeaye> rustc Rust code is often very sexy.
[03:20:38] *** Quits: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP) (Ping timeout)
[03:20:43] <jensnock_> I prefer my codebases a little bit older.
[03:21:24] <Jeaye> heh
[03:21:41] *** Joins: olleharstedt (Thunderbir@moz-80D8890F.ias.bredband.telia.com)
[03:21:49] * jensnock_ needs to listen to the Outfield now.
[03:22:17] <dbaupp> ChrisMorgan: you can use default methods, possibly
[03:22:29] <ChrisMorgan> dbaupp: how are they done?
[03:22:56] <dbaupp> ChrisMorgan: https://github.com/mozilla/rust/blob/master/src/libstd/iterator.rs#L40
[03:23:02] <dbaupp> size_hint is a default method
[03:23:17] <jensnock_> Holy christwagons, this builds /o\
[03:23:35] <ChrisMorgan> Ah yes, thanks dbaupp. That is indeed what I want.
[03:23:36] <dbaupp> (they're experimental, so you need the #[allow(default_methods)]; attribute like at the top of that file
[03:23:39] <dbaupp> )
[03:23:55] <dbaupp> jensnock_: shouldn't that be \o/ ?
[03:24:18] <jensnock_> dbaupp: Umâ€¦ possibly? Depends on if the test-case runs or barfs all over core?
[03:24:36] <dbaupp> jensnock_: well, \o\ at least :P
[03:24:41] *** Quits: Jesse (jruderman@2557E599.66715431.D25A875A.IP) (Quit: Jesse)
[03:25:03] <jensnock_> We'll see, I accidentally built it the wrong way, so I have to rebuild.
[03:25:37] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[03:25:37] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/B26PrA
[03:25:37] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[03:26:09] <dbaupp> woooo, patterns are correcter!
[03:26:32] *** jensnock_ is now known as jensnockert
[03:27:03] <dbaupp> nmatsakis: did you mean to close https://github.com/mozilla/rust/issues/3225 with the irrefut patterns pr?
[03:27:59] <tjc> dbaupp: I spotted that -- reopened it
[03:28:03] <tjc> I think he meant 3235
[03:28:33] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[03:28:34] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/EAS97g
[03:28:34] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[03:28:34] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[03:28:34] <ghrust> 01[13rust01] 15bors pushed 9 new commits to 06auto: 02http://git.io/0-xx7A
[03:28:34] <ghrust> 13rust/06auto 1420e7c4c 15Daniel Micay: remove the unused exchange_malloc `align` parameter...
[03:28:34] <ghrust> 13rust/06auto 1405eb3cf 15Andrew Paseltiner: std: Implement `Iterator::size_hint` method for `Option` iterators
[03:28:35] <ghrust> 13rust/06auto 144306b80 15Brendan Zabarauskas: Impl Not for bool
[03:28:35] *** Quits: tjc (tjc@2557E599.66715431.D25A875A.IP) (Quit: Places to go, people to annoy)
[03:28:36] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[03:28:40] <roo> aatch:  Ahhh, ok, I get it now (re irreversible borrows). I think I actually ran into that problem the other day with this monster: struct Foo<'self> { nothing: Option<& 'self Foo<'self>> }
[03:28:59] <aatch> roo, exactly
[03:29:25] <ChrisMorgan> rusti: fn f(){}struct S<'self>{f:&'self fn()}fn main(){S{f:&f};}
[03:29:26] -rusti- <anon>:7:61: 7:63 error: mismatched types: expected `&fn<no-bounds>()` but found `&extern "Rust" fn()` (expected fn but found &-ptr)
[03:29:26] -rusti- <anon>:7          fn f(){}struct S<'self>{f:&'self fn()}fn main(){S{f:&f};}
[03:29:26] -rusti-                                                                       ^~
[03:29:26] -rusti- error: aborting due to previous error
[03:29:26] -rusti- application terminated with error code 101
[03:29:55] <ChrisMorgan> I'm curiousâ€”what's the `@extern "Rust"` bit for?
[03:30:07] <geomyidae> gr, I want to write some rust but I don't know what to write without net libs.
[03:30:10] <ChrisMorgan> (It works if you remove the &, I know that. Now it is purely curiosity.)
[03:30:55] *** Quits: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP) (Ping timeout)
[03:31:21] <engla> extern "Rust" fn is a regular function
[03:31:40] <jensnockert> Oh noes, crashes in LLVM /o\
[03:32:18] <ChrisMorgan> s/@extern/&externn/
[03:32:18] <dbaupp> ChrisMorgan: &extern "Rust" fn = & ( extern "Rust" fn ), i.e. a pointer to a function, not the function itself (unlike &fn, which isn't &(fn) (which isn't even valid).)
[03:32:51] <dbaupp> &fn = (function pointer, environment pointer), extern "Rust" fn = function pointer, essentially
[03:33:27] *** Quits: posco (oscarboyki@636AC086.5999CED5.71743E61.IP) (Quit: posco)
[03:33:45] <dbaupp> geomyidae: depending on what you're doing with the net libs, there's always shelling out to curl, or using https://github.com/MarkJr94/rust_curl
[03:33:46] *** Parts: steven_is_false (user@moz-144077DE.bchsia.telus.net) (ERC Version 5.3 (IRC client for Emacs))
[03:34:28] <Jeaye> What do I need to satisfy #[deriving(TotalEq, TotalOrd)]?
[03:35:00] <Jeaye> My struct only has type Foo, and Foo impls cmp::Ord and cmp::Eq. The struct itself also impls cmp::Ord and cmp::Eq.
[03:35:24] <geomyidae> dbaupp: I'm thinking about doing that or just writing the architectural "shell" of a upnp library. I could implement a fair amount of supporting bits without having the actual udp socket to write() to.
[03:35:28] <jensnockert> If someone has a better idea about what is wrong with https://github.com/jensnockert/rust/commit/359040a333edf2ccbb0dc845e4d8eb09c99675c7 than 'everything'?
[03:35:29] <ChrisMorgan> Is there any way that I can get a function pointer into a new task? I don't think it will be *strictly* necessary, but it would make for nicer code, how I'm thinking of it.
[03:35:42] <dbaupp> Jeaye: you need the types in the struct to implement TotalEq and TotalOrd too
[03:35:42] <geomyidae> plus it would give me a chance to get some "rust design" tips before actual debugging on the lib itself.
[03:36:03] <geomyidae> I ought to just jump into it. (even though I'm abandoning a decentish Go codebase :P)
[03:36:13] <jensnockert> I want to be able to run https://gist.github.com/jensnockert/5954505
[03:36:38] <dbaupp> jensnockert: s/str_of(field).to_owned()/str_of(field).as_slice()/ and match with "s0" etc
[03:36:46] <dbaupp> (saves an allocation)
[03:37:12] <Jeaye> dbaupp: Ok, I get error: conflicting implementations for a trait
[03:37:14] <dbaupp> (I'm guessing that's not what's breaking LLVM though)
[03:37:20] <Jeaye> Should I not impl cmp::Ord and cmp::Eq?
[03:37:20] <dbaupp> Jeaye: code?
[03:37:41] <dbaupp> Jeaye: TotalOrd and TotalEq are completely different traits, so they shouldn't conflict
[03:37:48] <dbaupp> (in theory, at least.)
[03:38:46] <jensnockert> dbaupp: No, it works in part 1 of the code, so should work in the part I think is breaking stuff.
[03:39:03] <dbaupp> jensnockert: hm?
[03:39:22] <dbaupp> (my suggestion was purely a stylistic thing.)
[03:39:50] <jensnockert> dbaupp: What I mean is that it works in mod.rs, so I assume it isn't what is breaking LLVM.
[03:40:00] *** Joins: eholk (eholk@moz-9AB4D52F.hsd1.ut.comcast.net)
[03:40:10] <jensnockert> In expr.rs everything breaks loose.
[03:40:40] <dbaupp> strcat, aatch: you guys have a vague "understanding" of trans, right?
[03:40:51] <dbaupp> jensnockert: whats's the LLVM error message(s)?
[03:40:54] <strcat> dbaupp: sure
[03:41:04] <strcat> I just don't know what anything is called ;p
[03:41:06] <aatch> I have some knowledge
[03:41:11] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[03:41:15] <jensnockert> Assertion failed: (isa<X>(Val) && "cast<Ty>() argument of incompatible type!"), function cast, file /Users/Jens/Code/Git/rust/src/llvm/include/llvm/Support/Casting.h, line 231.
[03:41:15] <jensnockert> [1]    48148 abort      x86_64-apple-darwin/stage0/lib/rustc/x86_64-apple-darwin/bin/rustc test.rs -L
[03:41:42] <dbaupp> aatch, strcat: https://github.com/jensnockert/rust/commit/359040a333edf2ccbb0dc845e4d8eb09c99675c7
[03:43:07] <aatch> jensnockert, so the error happens in expr?
[03:43:14] <jensnockert> aatch: I think so, yes.
[03:43:25] <jmgrosen> so i saw the Promises/A+ spec on HN today and i was wondering what the idiomatic way to do something like promises in Rust isâ€¦ any answers?
[03:43:25] <jensnockert> aatch: It works when just running type-check.
[03:43:41] <jensnockert> aatch: Where 'works' means that it doesn't print any error messages.
[03:43:54] <dbaupp> jmgrosen: there's `extra::future`, I think
[03:44:04] <jensnockert> aatch: Since I don't know how to check if the type-inference is correct.
[03:44:09] <dbaupp> jmgrosen: but like with almost everything in the stdlibs, it's probably not idiomatic.
[03:44:28] <jmgrosen> dbaupp: yes, but it's not great, because you can only synchronously `get` it, rather than having something like a callback
[03:44:39] <dbaupp> jmgrosen: doesn't .chain do something?
[03:44:46] <dbaupp> (or do they not have chain?)
[03:45:17] <jmgrosen> dbaupp: i see no chain :( http://static.rust-lang.org/doc/extra/future.html
[03:45:26] <dbaupp> jmgrosen: hm, yep, it looks relatively useless.
[03:45:56] <jmgrosen> dbaupp: i've been trying to implement a `Promise` trait, but so far my work with generics has not been going well
[03:46:18] <dbaupp> jmgrosen: ("idiomatic" would be adding chain(Future<A>, fn(A) -> Future<B>) -> Future<B> and map(Future<A>, fn(A) -> B) -> Future<B>)
[03:46:25] <dbaupp> jmgrosen: would you like help? :)
[03:46:43] <jmgrosen> dbaupp: sure! specifically, the problem is in returning a new promise that will take a callback that returns an unknown type
[03:46:48] <aatch> jensnockert, can you do a println of bcx.val_to_str(base_datum.val)?
[03:47:00] *** Joins: Jesin (Jessin_@moz-3AD6F09F.res.lehigh.edu)
[03:47:01] <jensnockert> aatch: Will do.
[03:47:29] <dbaupp> jmgrosen: hm, I have a feeling this requires higher-kinded types to do without a hack
[03:47:45] <dbaupp> jmgrosen: code?
[03:48:33] <jensnockert> aatch: I have a feeling though, since SIMD vectors don't really live in memory, maybe I should trans them in some sort of special way.
[03:49:10] <jmgrosen> dbaupp: after thinking about it, i'm not sure what's wrong with your `chain` declaration -- i think i was over thinking things :P
[03:49:22] <aatch> jensnockert, possibly, but I have a feeling that this line: https://github.com/jensnockert/rust/blob/359040a333edf2ccbb0dc845e4d8eb09c99675c7/src/librustc/middle/trans/expr.rs#L878 is the issue
[03:49:25] <jmgrosen> dbaupp: i'll try something out and report the results
[03:49:27] *** Quits: doomlord (doomlod@moz-6651F8D4.range86-145.btcentralplus.com) (Ping timeout)
[03:49:30] <dbaupp> jmgrosen: oh, heh :)
[03:49:47] <jensnockert> aatch: I agree, I think.
[03:50:03] <aatch> jensnockert, just going by the error message.
[03:50:03] <jensnockert> I just need to rebuild, so I can get that print statement in.
[03:50:11] <aatch> jensnockert, unfortunately, yes...
[03:50:41] <aatch> jensnockert, btw, there are a bunch of functions for doing some of the stuff you're doing.
[03:51:15] <jensnockert> aatch: I am just coding-by-grep.
[03:51:33] <aatch> jensnockert, that's fine, just mentioning it.
[03:51:43] * jensnockert hugs aatch
[03:51:57] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Quit: Textual IRC Client: www.textualapp.com)
[03:51:57] <jensnockert> My point is that I have no idea what I am doing.
[03:52:06] <dbaupp> aatch: I'm umming and aahing about adding an environment arg to all the trait visitor
[03:52:19] <jensnockert> But I think the type-check is correct at least.
[03:52:30] <jensnockert> 'correct'
[03:52:40] <aatch> dbaupp, heh, I can see it from both sides...
[03:52:56] <dbaupp> *trait visitor functions
[03:53:15] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[03:53:31] <dbaupp> aatch: since e.g. one might want to create a visitor with certain parameters (goes into the struct) and then call it multiple times with slightly different "state"
[03:53:49] <dbaupp> (goes into the env param.)
[03:54:28] <dbaupp> or, create the visitor without knowing the full state, and then call it later after constructing this state. (what I need for lint)
[03:54:54] *** Joins: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au)
[03:55:39] <dbaupp> aatch: (it's also fairly important if you have several Visitors that all want an &mut to the same thing; which will be required for lint when @mut gets removed.)
[03:55:54] <dbaupp> (which I can hopefully do as part of this.)
[03:56:28] <dbaupp> aatch: so, unless you have any strong objections, I'm going to add it?
[03:56:34] *** Joins: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net)
[03:56:38] <aatch> dbaupp, sure
[03:56:46] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[03:56:58] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[03:57:11] <aatch> dbaupp, it's not ideal, but anything else requires too much overhaul.
[03:57:23] <dbaupp> aatch: yeah, it's fairly ugly.
[03:57:34] <aatch> Currently converting most of the visitors (lint being an exception) is fairly mechanical
[03:57:58] <aatch> And I'd like to keep it that way.
[03:58:10] <jensnockert> aatch: It doesn't print anything, I assume there is some more subtle error around.
[03:58:31] <jensnockert> Or waitâ€¦ silly me put the print after the llvm callsâ€¦
[03:58:33] <aatch> jensnockert, well if it doesn't print anything it's not getting to that line.
[03:59:06] <jensnockert> I blame the 6AM factor this time :(
[03:59:15] <aatch> jensnockert, heh, fair enough
[03:59:20] <dbaupp> aatch: this also creates a TIMTOWTDI problem, but it's probably not that important, since it's buried in libsyntax
[03:59:44] <aatch> dbaupp, I don't know that acronym
[03:59:58] <dbaupp> aatch: "There's more than one way to do it"
[04:00:07] <aatch> dbaupp, ah.
[04:00:14] <dbaupp> i.e. people can put things in the struct or the env param
[04:00:24] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[04:00:40] <dbaupp> hm, lint is going to require trait objects too.
[04:00:42] * dbaupp sighs
[04:01:06] <dbaupp> strcat: does rusti have the ~ changes?
[04:01:08] *** Quits: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au) (Ping timeout)
[04:01:13] <strcat> dbaupp: yes
[04:01:16] <dbaupp> thanks
[04:01:41] <aatch> dbaupp, I'm going to say that, while libsyntax is kinda-intended for public usage, it's not as big a deal if the Visitor is slightly confusing.
[04:01:50] <strcat> rusti: use std::cast::transmute; let x = ~5; unsafe { let y: *int = transmute(x); println((*y).to_str()); let _: ~int = transmute(y); 
[04:01:51] -rusti- <anon>:10:0: 10:1 error: file ended with unbalanced delimiters
[04:01:51] -rusti- <anon>:10 }
[04:01:51] -rusti-           ^
[04:01:51] -rusti- application terminated with error code 101
[04:02:01] <strcat> rusti: use std::cast::transmute; let x = ~5; unsafe { let y: *int = transmute(x); println((*y).to_str()); let _: ~int = transmute(y); }
[04:02:02] -rusti- 5
[04:02:02] -rusti- ()
[04:02:35] <dbaupp> aatch: yeah, and it's not a particularly big deal... it's not like it matters where things go, either will work.
[04:02:48] <dbaupp> strcat: fancy!
[04:04:45] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[04:05:31] *** Joins: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP)
[04:05:35] <ChrisMorgan> dbaupp: looks like using default implementations of a trait doesn't work:
[04:05:37] <ChrisMorgan> rusti: trait X:Send{fn foo(&self){do spawn{self;}}}
[04:05:38] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/UVLK
[04:05:52] <ChrisMorgan> (It reckons Self does not satisfy Send.)
[04:06:02] <dbaupp> rusti: trait X:Send{fn foo(self){do spawn{self;}}}
[04:06:03] <aatch> ChrisMorgan, in that context, self is a borrowed pointer
[04:06:03] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/FGaG
[04:06:32] <dbaupp> ChrisMorgan: I think trait inheritance doesn't quite work properly with default methods
[04:06:40] *** Joins: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au)
[04:06:44] <dbaupp> (so yes, it probably doesn't work yet :( )
[04:06:46] <aatch> Also, kinds don't work with inheritance yet
[04:06:55] <ChrisMorgan> (Sorry, I meant sans-&.)
[04:06:56] <dbaupp> aatch: oh, do normal traits work?
[04:07:08] <jensnockert> aatch: {val: (0x7fe673cd9568 as *()), ty: (0x7fe673cd6b00 as *()), mode: ByRef(ZeroMem)}
[04:07:09] <aatch> dbaupp, a little
[04:07:16] <dbaupp> aatch: neat
[04:07:31] <aatch> jensnockert, that's from bcx.val_to_str?
[04:07:41] <jensnockert> aatch: Oh, no.
[04:07:53] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[04:07:54] *** Joins: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[04:07:55] <aatch> jensnockert, I want to know the type...
[04:08:04] <aatch> of datum.val
[04:08:20] <aatch> (That LLVM sees)
[04:08:22] <ChrisMorgan> So should I file an issue about this, that it doesn't work?
[04:08:38] <aatch> ChrisMorgan, possibly.
[04:08:40] <jensnockert> aatch: We'll retry this.
[04:09:21] <ChrisMorgan> trait Y{fn y(self);}trait X:Y{fn foo(self){self.y();}}
[04:09:24] <ChrisMorgan> rusti: trait Y{fn y(self);}trait X:Y{fn foo(self){self.y();}}
[04:09:25] -rusti- ()
[04:09:31] <ChrisMorgan> So, it works with normal traits, just not kinds.
[04:09:51] <aatch> ChrisMorgan, I'm pretty sure there's an issue for it already
[04:10:05] <aatch> so probably worth mentioning the interaction with default methods there.
[04:10:36] <dbaupp> ChrisMorgan: https://github.com/mozilla/rust/issues/7460
[04:10:53] <dbaupp> that's for traits, and possibly fixed
[04:11:07] <dbaupp> (I couldn't find one specifically about kinds.)
[04:11:43] *** Quits: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[04:12:06] * ChrisMorgan starts rebuilding rust
[04:14:42] <ChrisMorgan> compile_and_link: x86_64-unknown-linux-gnu/stage0/lib/rustc/x86_64-unknown-linux-gnu/lib/libextra.so
[04:14:42] <ChrisMorgan> /home/chris/vc/rust/src/libextra/extra.rs:1:0: 1:0 error: multiple matching crates for `std`
[04:15:04] <ChrisMorgan> One is -0.7 and the other is -0.8pre
[04:15:50] <ChrisMorgan> Should I just `rm x86_64-unknown-linux-gnu/stage0/lib/rustc/x86_64-unknown-linux-gnu/lib/libstd-6c65cf4b443341b1-0.7.so`?
[04:16:04] <klutzy> yep
[04:16:15] <klutzy> but you should rm others too
[04:16:38] <dbaupp> ChrisMorgan: make clean
[04:17:14] <ChrisMorgan> dbaupp: that's an option, but I figured it'd make it take even loooonger still.
[04:17:38] <dbaupp> ChrisMorgan: no, it only cleans the Rust libs (it *doesn't* clean llvm)
[04:17:44] <jensnockert> aatch: ~"*Vector"
[04:17:56] <aatch> jensnockert, ok, so that's a pointer.
[04:18:01] <jack> does anyone recognize this ICE? https://gist.github.com/metajack/5954671
[04:18:14] <jensnockert> aatch: Oh, yesâ€¦ and I need an actual vector.
[04:18:15] <aatch> and it should be a value
[04:18:29] * jensnockert hugs aatch: Thanks!
[04:18:31] <aatch> Hmm... probably do a Load instruction
[04:19:03] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[04:19:20] <jensnockert> aatch: If it is a pointer to a vector, I can probably do a GEP, then return by-ref, I think.
[04:19:27] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[04:19:58] <aatch> jensnockert, ah, so you can
[04:20:15] * aatch wasn't sure if it worked on vectors
[04:20:37] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[04:21:11] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[04:21:46] <jensnockert> aatch: As long as they are in memory, I think.
[04:22:08] <jensnockert> aatch: They are equivalent in memory to a packed struct, so it should work(tm).
[04:22:44] <aatch> jensnockert, I'll trust you on that I have no idea about SIMD at a hardware level
[04:23:02] <jfbk> in the output from rustc -Z trans-stats, i'm seeing a bunch of trailing numbers, like foo_1234.  what are those?  anon closures?
[04:23:31] <aatch> jfbk, part of the name mangling
[04:23:39] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Connection reset by peer)
[04:23:43] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[04:23:57] <dbaupp> jfbk: (I think anon closures normally have `expr_fn` in the name somewhere.)
[04:24:40] <Jeaye> rusti: 4.0f32.fuzzy_eq(4.0f32)
[04:24:41] -rusti- <anon>:7:9: 8:5 error: type `f32` does not implement any method in scope named `fuzzy_eq`
[04:24:42] -rusti- <anon>:7          4.0f32.fuzzy_eq(4.0f32)
[04:24:42] -rusti- <anon>:8     };
[04:24:42] -rusti- error: aborting due to previous error
[04:24:42] -rusti- application terminated with error code 101
[04:25:18] <Jeaye> rusti: f32::fuzzy_eq(4.0, 4.0)
[04:25:19] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/LdVR
[04:25:27] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[04:25:45] <Jeaye> Woah, bad link.
[04:27:02] *** Joins: tikue (tkuehn@moz-A7CDB794.dia.static.qwest.net)
[04:27:11] <Jeaye> rusti: 4.0f32.approx_eq(4.0f32)
[04:27:12] -rusti- <anon>:7:26: 7:32 error: mismatched types: expected `&f32` but found `f32` (expected &-ptr but found f32)
[04:27:12] -rusti- <anon>:7          4.0f32.approx_eq(4.0f32)
[04:27:12] -rusti-                                    ^~~~~~
[04:27:12] -rusti- error: aborting due to previous error
[04:27:12] -rusti- application terminated with error code 101
[04:27:18] <Jeaye> rusti: 4.0f32.approx_eq(&4.0f32)
[04:27:19] -rusti- true
[04:27:26] <Jeaye> rusti: 4.0f32.approx_eq(&4.000001f32)
[04:27:27] -rusti- true
[04:27:32] <Jeaye> rusti: 4.0f32.approx_eq(&4.00001f32)
[04:27:33] -rusti- false
[04:27:53] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[04:29:29] <jfbk> is the mangling for monomorphizing?
[04:29:52] *** Quits: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net) (Client exited)
[04:29:56] *** Quits: bytbox (s@moz-DC83764A.washdc.fios.verizon.net) (Input/output error)
[04:31:11] *** Joins: doomlord (doomlod@moz-6651F8D4.range86-145.btcentralplus.com)
[04:31:17] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[04:33:55] *** Joins: nano (nano@moz-972880B.superkabel.de)
[04:34:23] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[04:34:36] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[04:34:55] *** Joins: erickt1 (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[04:35:27] <ChrisMorgan> rusti: :-(
[04:36:58] <aatch> jfbk, no, it's for conflicts/versioning/various other well-thought-out reasons
[04:37:06] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[04:37:30] <aatch> jfbk, https://github.com/mozilla/rust/wiki/Doc-crate-hashes
[04:39:08] *** Joins: khyperia (Mibbit@moz-FCF7B8AC.hil-seaahhh.sea.wayport.net)
[04:40:41] <dbaupp> aatch: all these lints are ending up as `struct LintFoo;`, it looks a little strange.
[04:40:55] *** Quits: erickt1 (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[04:40:56] <aatch> dbaupp, there's precedence in the compiler
[04:41:03] <dbaupp> aatch: yeah
[04:41:06] <aatch> it comes up a couple times in borrowck
[04:41:14] <dbaupp> (i'm not saying it's bad/I want to change it.)
[04:43:06] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Ping timeout)
[04:43:10] *** Quits: tikue (tkuehn@moz-A7CDB794.dia.static.qwest.net) (Ping timeout)
[04:43:26] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[04:43:31] <jfbk> aatch: ok, thanks. not sure i understand from that why the same fn would end up w/ multiple mangled names
[04:43:32] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[04:43:32] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14100c285 to 14a48ca32: 02http://git.io/N3iJvQ
[04:43:32] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[04:43:37] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[04:43:37] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/BTvJaA
[04:43:37] <ghrust> 13rust/06auto 141aae28a 15Jens Nockert:  Replaces the free-standing functions in f32, &c....
[04:43:37] <ghrust> 13rust/06auto 1459e6a4d 15Jens Nockert: Forgot to grep for a function
[04:43:37] <ghrust> 13rust/06auto 142ed1cfc 15Jens Nockert: And I forgot to run the benchmarks after rebasing
[04:43:39] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[04:43:46] *** Quits: nano (nano@moz-972880B.superkabel.de) (Connection reset by peer)
[04:43:54] <aatch> jfbk, is it a generic fn?
[04:43:57] *** Joins: tikue (tkuehn@moz-A7CDB794.dia.static.qwest.net)
[04:44:11] <jfbk> all the ones i've looked at have been
[04:44:27] <jfbk> which is why i thought might be related to monomorphizing
[04:45:03] <aatch> jfbk, that is why they get multiple names, it is the monomorphizing
[04:45:17] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[04:45:27] <jfbk> ok, cool, thanks
[04:45:27] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[04:45:55] *** Quits: tikue (tkuehn@moz-A7CDB794.dia.static.qwest.net) (Ping timeout)
[04:46:21] <acrichto> r? https://github.com/mozilla/rust/pull/7578
[04:46:47] <khyperia> Hey all, I'm looking to get involved in an opensource project, and rust seems like a good one. However, I don't know much about the language, what do you suggest I do to get up to speed (or just "use it a bunch")? (and yes, I read the docs and such, I'm not an idiot)
[04:47:04] *** Joins: tikue (tkuehn@moz-A7CDB794.dia.static.qwest.net)
[04:47:33] <acrichto> khyperia: if you search the github issue tracker for E-easy tags, you may be able to pick up one of the bugs and fix it
[04:47:35] <jensnockert> Hurray, it runs, just with semi-wrong results.
[04:47:38] <aatch> khyperia, don't worry, the docs aren't great anyway.
[04:47:53] <aatch> jensnockert, as opposed to complete-wrong from before?
[04:47:56] * ChrisMorgan was about to say: "you read the docs? Ooh! Where are they?" ;-)
[04:47:58] <strcat> acrichto: alloc / sys::nonzero_size_of::<T>() != n  <- don't understand why it does that
[04:48:05] <jensnockert> aatch: As opposed to crashing in LLVM.
[04:48:06] <strcat> acrichto: hasn't VecRepr been added at that point?
[04:48:15] <jensnockert> aatch: It works for x.s0, but not x.s1.
[04:48:24] <jensnockert> aatch: It returns zero instead.
[04:48:25] <aatch> jensnockert, hmm, strange
[04:48:28] <acrichto> strcat: it detects overflow
[04:48:36] <aatch> jensnockert, whats your gep call look like?
[04:48:57] <strcat> acrichto: but you've added in the VecRepr size?
[04:49:04] <acrichto> strcat: that's the second clause
[04:49:12] <acrichto> strcat: alloc doesn't have the extra stuff
[04:49:19] <strcat> oh
[04:49:41] *** Joins: vk (vk@moz-389FEE13.hsd1.ca.comcast.net)
[04:49:42] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[04:49:53] *** Quits: vk (vk@moz-389FEE13.hsd1.ca.comcast.net) (Quit: vk)
[04:49:55] <acrichto> thanks!
[04:50:41] <jensnockert> aatch: https://github.com/jensnockert/rust/blob/simd/src/librustc/middle/trans/expr.rs#L881
[04:51:06] <jensnockert> Oh wait, I know why.
[04:51:17] <jensnockert> I passed the vector to the type of the GEP, not the element.
[04:51:19] <aatch> jensnockert, try making it [0, i]
[04:52:00] <aatch> jensnockert, that too
[04:52:08] <khyperia> One more question... what ide do most people use? I'm assuming vim, but I'm not much of a vim person, what are the alternatives?
[04:52:10] <aatch> or, more accurate, that's why it didn't crash
[04:52:23] <aatch> khyperia, emacs?
[04:52:33] <doomlord> khyperia,  rust is uniquely pleasant with simple tools because the syntax is so friendly
[04:52:50] <doomlord> grep "fn\sfunctionname" :)
[04:52:50] *** Joins: vk (vk@moz-389FEE13.hsd1.ca.comcast.net)
[04:53:01] <khyperia> Yeah, emacs is what I was thinking, but choices are always good
[04:53:13] <khyperia> heh, doomlord
[04:53:28] <dbaupp> khyperia: emacs or vim seems to be the most common
[04:53:30] *** Quits: eholk (eholk@moz-9AB4D52F.hsd1.ut.comcast.net) (Quit: eholk)
[04:53:46] <aatch> khyperia, we have syntax files for emacx, vim, gedit and kate
[04:53:52] <aatch> emacs*
[04:53:59] *** Quits: vk (vk@moz-389FEE13.hsd1.ca.comcast.net) (Quit: vk)
[04:54:00] <doomlord> generate a summary of declarations in a file:  grep "\(fn\|trait\|struct\|impl\|type\)"  etc..
[04:54:02] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[04:54:10] <dbaupp> and there's a Rust thingo for sublime text
[04:54:12] <ChrisMorgan> That reminds me... I should submit some of my improvements to the Vim files.
[04:54:36] <jensnockert> aatch: But it works as a lvalue should at least.
[04:54:37] <dbaupp> jensnockert: you're getting closer \o/
[04:55:05] <khyperia> Or, actually, that's something that I might be able to contribute... more editor support and such
[04:55:19] *** Joins: vk (vk@moz-389FEE13.hsd1.ca.comcast.net)
[04:55:54] <ChrisMorgan> khyperia: better ctags support?
[04:56:01] <ChrisMorgan> https://github.com/mozilla/rust/issues/1731
[04:56:16] <aatch> jensnockert, yeah, gepi is a little odd. But you want [0, i] because the first 0 goes "into" the pointer
[04:56:32] <jensnockert> aatch: Yeah, it makes sense.
[04:57:37] <aatch> jensnockert, though I did find this... http://llvm.org/docs/GetElementPtr.html#can-gep-index-into-vector-elements
[04:57:55] <doomlord> just messing with the C ffi myself, 
[04:57:58] <khyperia> I was more thinking along the lines of, say, making a VS language service
[04:58:07] <doomlord> reassuringly painless
[04:58:16] <jensnockert> aatch: I'll be fine with works, *then* I can make it something at least a mother could love.
[04:58:33] <aatch> jensnockert, just mentioning it.
[04:58:39] * jensnockert hugs aatch.
[04:58:51] <aatch> since it would just be a Load then an ExtractElement
[04:58:57] <jensnockert> You're now my official fix-stuff coach \o/
[04:59:04] <aatch> jensnockert, yay?
[05:00:24] *** Joins: benbangert (bbangert@moz-B1FEE9C0.org)
[05:00:53] <jensnockert> aatch: Now it works for both elements!
[05:01:30] <aatch> jensnockert, you could probably drop the pointer cast btw.
[05:01:38] <jmgrosen> are ports sendable?
[05:01:46] <dbaupp> rusti: let mut x = false; x ||= true; x
[05:01:48] -rusti- <anon>:7:32: 7:33 error: unexpected token: `=`
[05:01:48] -rusti- <anon>:7          let mut x = false; x ||= true; x
[05:01:48] -rusti-                                          ^
[05:01:48] -rusti- application terminated with error code 101
[05:01:53] <dbaupp> jmgrosen: no
[05:01:53] *** Quits: vk (vk@moz-389FEE13.hsd1.ca.comcast.net) (Quit: vk)
[05:02:01] <jmgrosen> dbaupp: as expected :3
[05:02:04] <ChrisMorgan> rusti: trait X:Send{fn foo(self){do spawn{self;}}}
[05:02:05] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/PHSe
[05:02:05] <jensnockert> aatch: We'll try!
[05:02:13] <ChrisMorgan> What does the "cannot move out of captured outer variable in a heap closure" mean?
[05:02:15] *** Joins: vilonis (jared@moz-EE5D17ED.ph.ph.cox.net)
[05:02:36] <strcat> ChrisMorgan: the closure can run more than once
[05:02:41] <strcat> so you can't move out of data it captures
[05:02:43] <dbaupp> ChrisMorgan: https://github.com/mozilla/rust/wiki/Doc-under-construction-FAQ#once-functions
[05:03:35] *** Joins: vk (vk@moz-389FEE13.hsd1.ca.comcast.net)
[05:04:12] <ChrisMorgan> dbaupp, strcat: thanks, that makes sense now
[05:05:03] *** Quits: vk (vk@moz-389FEE13.hsd1.ca.comcast.net) (Quit: vk)
[05:05:32] *** Quits: tikue (tkuehn@moz-A7CDB794.dia.static.qwest.net) (Quit: tikue)
[05:05:42] *** Quits: kemurphy (kemurphy@moz-7332FD74.hsd1.pa.comcast.net) (Ping timeout)
[05:05:55] *** Joins: vk (vk@moz-389FEE13.hsd1.ca.comcast.net)
[05:09:10] *** Joins: scanlonman (scanlonman@moz-169BC238.hsd1.wa.comcast.net)
[05:09:35] <jensnockert> aatch: Yeah, it works without the cast.
[05:09:48] <scanlonman> So let's say I want to contribute to Rust.  Where would I begin? Just doing Github issues?
[05:09:55] *** Joins: pyrac (pyrac@moz-B0599561.w92-162.abo.wanadoo.fr)
[05:10:04] *** Joins: tikue (tkuehn@moz-A7CDB794.dia.static.qwest.net)
[05:10:48] <olsonjeffery> scanlonman: do you have a particular area of expertise? what's your software development background?
[05:11:01] <engla> is there a way to "move by mut" like  match opt { Some(var) => let mut mvar = var; mvar.modify() }   without needing the extra "let mut" ?
[05:11:34] <strcat> engla: not in patterns yet, only function parameters
[05:11:41] *** Quits: vk (vk@moz-389FEE13.hsd1.ca.comcast.net) (Quit: vk)
[05:12:11] <engla> yeah
[05:12:21] <engla> in function parameters it's handy
[05:12:46] *** Quits: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net) (Ping timeout)
[05:13:32] *** Joins: pnathan (vlion@moz-BDC3EE62.tukw.qwest.net)
[05:13:41] *** Quits: tikue (tkuehn@moz-A7CDB794.dia.static.qwest.net) (Ping timeout)
[05:13:55] <jmgrosen> dbaupp: after performing some chores, i came back to the promises and actually tried to compile some code this time -- and I realized that i'm still having the problem i was before
[05:14:18] <jmgrosen> dbaupp: well, wait, lemme look at some other code first
[05:14:19] * jensnockert hugs aatch good night: Thanks for all the awesome help.
[05:14:29] <aatch> jensnockert, no problem
[05:14:49] <aatch> I'm currently facing fixing 235 errors.
[05:15:04] <jmgrosen> dbaupp: never mind, figured it out :3
[05:15:07] <aatch> and that's just until the _next_ set
[05:15:18] *** Joins: kemurphy (kemurphy@moz-7332FD74.hsd1.pa.comcast.net)
[05:15:31] *** Joins: tikue (tkuehn@moz-A7CDB794.dia.static.qwest.net)
[05:15:50] <ChrisMorgan> How do I check if something is Send, at compile time? (I don't want to do this in reality, just for filing a bug report.) The simplest I've come up with is `fn require_send<T: Send>(_: T){}` and then call that function with the value.
[05:18:21] <roo> for some function like: fn pick_one<'r,'s,T>(a: &'r T, b:&'s T) -> & '? T , it is not possible to specify '? without giving away which of a or b is picked is it?
[05:19:20] <vilonis> engla: I thought match like: match opt { Some(~ref mut var) => var.modify() }... but I guess that is just for owned pointers, not direct vars?
[05:19:24] *** Quits: jdm (jdm@F2D29657.F60B0462.67AC9B1.IP) (Quit: Lost terminal)
[05:19:48] <aatch> roo, no
[05:20:43] <aatch> that would be like saying with <T, U>, is it possible to specify "some" type that's T or U without saying with one.
[05:21:16] <dbaupp> engla: you should file a bug, it'd be nice for `let (mut a, mut b) = ...;` too
[05:21:22] *** Joins: tehgeekmeister (tehgeekmei@943F6AED.52480309.1A968954.IP)
[05:21:48] <engla> dbaupp: that one is planned
[05:21:59] <engla> so that probably covers it(?)
[05:22:07] *** Quits: jfbk (user@moz-EEA9CFB3.nyc.res.rr.com) (Ping timeout)
[05:22:09] <dbaupp> oh, it's already filed?
[05:22:14] <engla> vilonis: that works fine by reference.
[05:22:29] <engla> That I don't know but pcwalton had a plan
[05:22:29] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[05:22:30] <dbaupp> engla: it should, assuming it's a general "mut <ident>" pattern grammar change
[05:22:35] <glinscott> iirc, there was a pull request out there to remove the null terminator on strings - is that still planned?
[05:23:03] <aatch> roo, basically, the returned value will last for as long as the given pointers, if it has to last as long as both, then you can give both borrows the same lifetime.
[05:23:28] <tehgeekmeister> I don't know if this is the right place (please tell me if it's not!), but I'm running into a situation that seems like it's maybe a bug or maybe just me not getting something. all the relevant info is here: https://gist.github.com/tehgeekmeister/5954715
[05:23:43] *** Joins: vk (vk@moz-389FEE13.hsd1.ca.comcast.net)
[05:24:13] <dbaupp> glinscott: I believe/hope so
[05:24:43] <dbaupp> glinscott: it's https://github.com/erickt/rust/tree/str-remove-null (and https://github.com/erickt/rust/tree/str-remove-null2 ... 8, no idea what the differences are.)
[05:25:08] *** Joins: RMF (RMF@moz-4C4EB011.dsl.telepac.pt)
[05:25:34] *** Joins: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP)
[05:25:34] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 140201640 to 14a48ca32: 02http://git.io/N3iJvQ
[05:25:34] *** Parts: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP) ()
[05:25:35] *** Joins: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP)
[05:25:35] <ghrust> 01[13rust01] 15bors pushed 9 new commits to 06auto: 02http://git.io/Fgobew
[05:25:35] <ghrust> 13rust/06auto 1420e7c4c 15Daniel Micay: remove the unused exchange_malloc `align` parameter...
[05:25:35] <ghrust> 13rust/06auto 1405eb3cf 15Andrew Paseltiner: std: Implement `Iterator::size_hint` method for `Option` iterators
[05:25:36] <ghrust> 13rust/06auto 144306b80 15Brendan Zabarauskas: Impl Not for bool
[05:25:36] <glinscott> dbaupp: ah, great, thanks!
[05:25:37] *** Parts: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP) ()
[05:25:40] <dbaupp> tehgeekmeister: you probably want fn push(self, ...)
[05:26:13] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[05:26:38] <tehgeekmeister> dbaupp: i tried that, but it causes other errors. I'm still trying to a model of the language in my head, so I can't do too much better than thrashing about trying things now.
[05:26:44] <tehgeekmeister> Well, and reading the docs.
[05:27:03] <dbaupp> tehgeekmeister: the self parameter is a little like writing fn push(self: ~Self) (for fn push(~self)), so when you impl on ~Chain<T> that makes self: ~~Chain<T>
[05:27:59] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Ping timeout)
[05:28:07] <scanlonman> @olsonjeffery I'm a pretty young guy still in college, but I've had C/C++ experience at GE-Aviation and Python/Perl/Java experience at Amazon.  I'm not really specialized in one area (if I had to pick something, it'd be concurrency + programs that can scale well) but I really want to contribute to Mozilla.
[05:28:26] <dbaupp> tehgeekmeister: it might work more nicely if you have everything in terms of Chain<T> without the sigil, and `fn push(self, item: T) { Link(item, ~self) }`
[05:28:59] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Quit: Leaving)
[05:29:01] <tehgeekmeister> dbaupp: i tried *that* too, but it complained that i was providing a trait where a type was expected.
[05:29:14] <tehgeekmeister> that does seem more elegant, though, I agree.
[05:29:26] <dbaupp> scanlonman: finding some github issues is a pretty good place to start
[05:30:34] <dbaupp> scanlonman: (there's those with the E-easy tag, if you'd like to ease into/get the hang of the process, https://github.com/mozilla/rust/issues?labels=E-easy)
[05:30:47] <scanlonman> Thanks!
[05:31:29] <dbaupp> scanlonman: if you do find one that you'd like to tackle, commenting along the lines of "I'm working on this" is nice (to avoid conflicts :) )
[05:31:43] <dbaupp> tehgeekmeister: oh, do you have a trait called Chain in scope?
[05:32:06] <tehgeekmeister> I want it to be in scope, but I"m honestly not sure if it is.
[05:32:10] <tehgeekmeister> I've basically done hello world before this.
[05:32:26] <tehgeekmeister> oh, no, not trait, sorry
[05:32:28] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[05:32:29] <tehgeekmeister> that's just the enum
[05:32:46] <aatch> scanlonman, also, feel free to ask about stuff in here. There's normally somebody willing to help.
[05:32:57] <scanlonman> Thanks everyone :)
[05:33:06] <tehgeekmeister> dbaupp: that file is the whole input to rustc. nothing you don't see.
[05:33:06] <dbaupp> tehgeekmeister: what's the code that gives the trait error?
[05:33:35] <dbaupp> tehgeekmeister: also, you're using 0.7?
[05:33:43] <tehgeekmeister> dbaupp: yep, from homebrew
[05:33:54] <tehgeekmeister> dbaupp: i have the repo pulled down, though, so i could hop onto master if need be
[05:34:13] *** Joins: pnathan1 (Adium@moz-BDC3EE62.tukw.qwest.net)
[05:34:23] <dbaupp> tehgeekmeister: not necessary, some version of this should work :)
[05:35:14] <dbaupp> (although you can if you want)
[05:35:27] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[05:36:51] <tehgeekmeister> WHOA, i think it works.
[05:37:05] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[05:37:11] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Input/output error)
[05:38:04] <dbaupp> yay!
[05:38:19] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:39:38] <tehgeekmeister> woohoo, yep, it does.
[05:40:59] *** Quits: khyperia (Mibbit@moz-FCF7B8AC.hil-seaahhh.sea.wayport.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:41:07] *** Joins: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net)
[05:46:01] *** Joins: mye (mye@moz-1D5EA24F.dip0.t-ipconnect.de)
[05:47:08] *** Quits: vk (vk@moz-389FEE13.hsd1.ca.comcast.net) (Quit: vk)
[05:47:48] *** Joins: vk (vk@moz-389FEE13.hsd1.ca.comcast.net)
[05:47:54] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[05:49:16] <tehgeekmeister> is this sort of thing ever sensible in rust? it seems to me like it isn't *self = ~Link(item, *self)
[05:50:55] <aatch> Down below 200!
[05:51:08] *** zz_kimundi is now known as kimundi
[05:53:26] <aatch> tehgeekmeister, it's not common, but it's sensible sometimes.
[05:53:39] <tehgeekmeister> it seems like it's building a self reference
[05:53:44] <tehgeekmeister> is that right?
[05:54:12] <dbaupp> aatch: yay!
[05:54:13] <aatch> tehgeekmeister, oh wait, never mind.
[05:54:14] <aatch> no
[05:54:21] <aatch> I missed the second self
[05:54:39] <aatch> well, if self is implicitly copyable, it's fine
[05:54:39] <tehgeekmeister> so that's impossible?
[05:54:50] <tehgeekmeister> alright
[05:54:53] <dbaupp> tehgeekmeister: written like that, it is
[05:55:06] <tehgeekmeister> dbaupp: how would it need to be written?
[05:55:35] <tehgeekmeister> (for more context, all of this came out of trying to answer this on stackoverflow: http://stackoverflow.com/questions/17535542/how-to-move-an-owned-pointer/17540777#17540777)
[05:55:53] <tehgeekmeister> (I do this thing of trying to find the answers to things I don't know as a way of learning them.)
[05:56:17] <dbaupp> essentially you need to move the current value of *self into the new Link, and then put that link into self
[05:56:34] <tehgeekmeister> that's about what i expected
[05:56:37] <dbaupp> (so there is a time between the move out and the replace where self is invalid.)
[05:56:46] <dbaupp> you can do it with unsafe code
[05:57:08] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[05:58:09] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[05:58:12] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[05:59:21] <roo> there is no way to re-parameterize Self is there? like if I have a trait A<B,C>,  but I want to return A<C,B> from a method within it?
[05:59:27] <dbaupp> rusti: enum Foo {A, B(~Foo)} impl Foo { fn nest(&mut self) { let val = std::util::replace(self, std::unstable::intrinics::init()); *self = B(~val); } } let mut x = A; x.nest(); x
[05:59:28] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/ODdF
[05:59:53] <dbaupp> rusti: enum Foo {A, B(~Foo)} impl Foo { fn nest(&mut self) { let val = std::util::replace(self, std::unstable::intrinsics::init()); *self = B(~val); } } let mut x = A; x.nest(); x
[05:59:55] -rusti- line longer than 150 columns, pastebinned: http://sprunge.us/AjXh
[06:00:06] <dbaupp> rusti: enum Foo {A, B(~Foo)} impl Foo { fn nest(&mut self) { let val = std::util::replace(self, unsafe{std::unstable::intrinsics::init()}); *self = B(~val); } } let mut x = A; x.nest(); x
[06:00:06] -rusti- B(~A)
[06:00:12] <dbaupp> tehgeekmeister: ^
[06:00:16] <aatch> I'm still going through type errors...
[06:00:26] <dbaupp> rusti: enum Foo {A, B(~Foo)} impl Foo { fn nest(&mut self) { let val = std::util::replace(self, unsafe{std::unstable::intrinsics::init()}); *self = B(~val); } } let mut x = A; x.nest(); x.nest(); x.nest(); x
[06:00:27] -rusti- B(~B(~B(~A)))
[06:00:55] <tehgeekmeister> dbaupp: ah, okay, cool!
[06:01:17] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[06:01:25] <tehgeekmeister> dbaupp: what safety guarantees are you getting rid of by doing that? a whole bunch, or just a particular one?
[06:01:42] <dbaupp> tehgeekmeister: in theory, it should be fine
[06:01:51] <aatch> tehgeekmeister, if there's a failure, you can end up with inconsistent state
[06:01:57] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[06:01:57] *** ChanServ sets mode: +o dherman
[06:02:02] <tehgeekmeister> dbaupp: ah, you're just using unsafe tools, in a mostly safe way.
[06:02:05] <dbaupp> tehgeekmeister: but you can't use self between the replace call and the reassignment
[06:02:16] <dbaupp> aatch: not really, since the whole task dies
[06:02:26] <strcat> you definitely don't need unsafe code to make a singly-linked list
[06:02:51] <dbaupp> tehgeekmeister: "can't" = it's dangerous to use self there, the compiler will still allow it
[06:03:06] <dbaupp> strcat: how to you write a method that prepends in-place?
[06:03:15] <dbaupp> *do
[06:03:17] <tehgeekmeister> strcat: yeah, i'm sure you don't. i was curious about the semantics of that particular thing i saw. pulling off a singly linked list isn't so hard.
[06:03:36] <strcat> dbaupp: I don't really see why it'd be hard
[06:03:36] <tehgeekmeister> of course, the one I made was immutable, so i don't know how the performance would be on that. might be copying a lot.
[06:03:43] <strcat> I mean we have a balanced binary search tree without unsafe code....
[06:03:47] <strcat> it doesn't use copies or @
[06:03:55] <strcat> I'm sure a list is easy to do
[06:04:11] <strcat> you take &mut self and you swap the new value
[06:04:13] <strcat> in
[06:04:18] <strcat> and return the old
[06:04:19] <engla> you have to count swap as safe
[06:04:19] <strcat> or whatever
[06:04:29] <dbaupp> except the new value includes self
[06:04:41] <strcat> dbaupp: don't really understand the specific thing
[06:04:45] <dbaupp> (i.e. self is moved out into the new value)
[06:04:52] <strcat> you can write an owned singly-linked list without unsafe
[06:04:54] <strcat> I have one
[06:05:01] * strcat shrugs
[06:05:14] <dbaupp> strcat: essentially, the .nest() method I was throwing at rusti
[06:05:32] <strcat> so what exactly do you want to do?
[06:05:54] <dbaupp> turn x into B(~x) in-place
[06:06:06] <strcat> ok
[06:06:10] <dbaupp> (where x is Foo { A, B(~Foo) })
[06:06:10] <strcat> I don't see why you need unsafe
[06:06:13] *** Joins: fabiand (fabiand@moz-EE35EF02.adsl.alicedsl.de)
[06:06:23] <strcat> look at how treemap does in-place tree rotations
[06:06:36] * dbaupp looks
[06:06:47] <engla> look at std::util;
[06:06:51] <strcat> just scroll down to 'fn insert'
[06:06:58] <engla> but std::util::swap is implemented using unsafe. but you can use it fine.
[06:07:02] *** Quits: naq (naq@D5C2D2DF.E4265FCD.E481B5B.IP) (Quit: reload)
[06:07:08] <strcat> engla: swap is safe, it has no edge cases
[06:07:18] <strcat> it used to be a built-in, it was moved to a lib because it didn't need to be a built-in
[06:07:28] <strcat> ~ is implemented with unsafe code in libstd/rt/global_heap.rs
[06:07:32] <engla> right, I'm not saying it is unsafe
[06:07:33] *** Joins: relistan (relistan@moz-2DE8112B.cable.virginmedia.com)
[06:07:34] <strcat> and elsewhere
[06:07:42] <engla> but it's implemented with unsafe
[06:07:44] <strcat> the compiler is unsafe, it uses asm
[06:07:52] <strcat> x86 assembly isn't safe
[06:07:54] <strcat> but we compile to it
[06:07:58] <strcat> doesn't mean anything
[06:08:12] <engla> there's a difference between the keyword unsafe and the word unsafe.
[06:08:38] <strcat> and there's a difference between using simple building blocks implemented as unsafe code and trying to roll your own more complex patterns that aren't actually safe
[06:08:43] <dbaupp> strcat: I think there is more structure for treemap rotate that makes it possible, specifically the None.
[06:08:53] <strcat> dbaupp: lists have None
[06:09:01] *** Quits: relistan (relistan@moz-2DE8112B.cable.virginmedia.com) (Quit: relistan)
[06:09:04] *** Quits: pyrac (pyrac@moz-B0599561.w92-162.abo.wanadoo.fr) (Quit: pyrac)
[06:09:11] <dbaupp> strcat: so the equivalent for nest would be replacing/swapping A into self
[06:09:48] <strcat> can't rely on init() anymore
[06:09:56] <dbaupp> however, this isn't general, so enum Foo { A(SomeLargeComplicatedType), B(~Foo) } doesn't work with this technique
[06:10:13] <strcat> dbaupp: you can't rely on init() being safely destroyed though
[06:10:19] <dbaupp> strcat: hm?
[06:10:26] <strcat> the drop flag is intended to be removed
[06:10:26] *** Joins: pnathan2 (Adium@B9840254.2CD8A5F8.477B877D.IP)
[06:10:37] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[06:10:37] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 141e9d2d2 to 14a48ca32: 02http://git.io/N3iJvQ
[06:10:37] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[06:10:39] *** Joins: ghrust (ghrust@C621748.6A2AE50.F3114085.IP)
[06:10:39] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/H_bcKw
[06:10:39] <ghrust> 13rust/06auto 14fe4a158 15Alex Crichton: Fail when a vec::reserve is too large
[06:10:39] <ghrust> 13rust/06auto 14ac026e2 15bors: auto merge of #7578 : alexcrichton/rust/overflow, r=thestinger...
[06:10:40] *** Parts: ghrust (ghrust@C621748.6A2AE50.F3114085.IP) ()
[06:10:46] <dbaupp> strcat: right, it's fine for types without dtors though.
[06:10:54] <dbaupp> right?
[06:10:59] <strcat> dbaupp: no
[06:11:03] <strcat> some types.
[06:11:18] <strcat> types can have private internal details and you don't know what's safe and what's not
[06:11:29] <strcat> init() isn't safe in general for anything except primitives and types you have full control over
[06:11:36] <strcat> there's no bound you can use to make it safe
[06:12:00] <dbaupp> yeah, the former was the situation here, I guess. (at least, it was for what I was doing.)
[06:12:28] <strcat> well it's not forwards compatible to use init() for ~
[06:12:46] <strcat> it
[06:12:54] <dbaupp> oh, yeah, ~ has a dtor. :/
[06:12:57] <strcat> would be the same as assuming headers on ~[] are going to same around
[06:13:10] <strcat> it'll only work because of flaws in the implementation right now ;\
[06:13:14] <dbaupp> heh
[06:14:12] <dbaupp> tehgeekmeister: conclusion, the unsafe code looks like it might be safe from the outside, but it isn't.
[06:14:17] <strcat> yay a weird failure
[06:14:43] <tehgeekmeister> this is why i like other people building compilers for me.
[06:14:46] <strcat> you really don't want to be writing unsafe code is my point, you have to know the language top to bottom and where it's going
[06:14:54] <tehgeekmeister> so i don't have to think this all through. =P
[06:15:11] <tehgeekmeister> Well, unless I'm writing a compiler. Then it's fine. I just don't want to think about it as a user of the language.
[06:15:14] <strcat> I don't like writing unsafe code, it's far too hard to get rid
[06:15:22] <strcat> let p = malloc(size);
[06:15:24] <strcat> *p = object;
[06:15:28] <strcat> in a generic smart pointer
[06:15:29] <strcat> it's buggy.
[06:15:43] <strcat> looks right, but *p = object is going to destroy uninitialized memory
[06:15:48] <strcat> easy to make mistakes like that ;p
[06:15:59] <strcat> to get right*
[06:16:00] <aatch> I think carefully about even using cast::transmute
[06:16:26] *** Quits: pnathan2 (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[06:16:27] <aatch> and my most recent usages have been for lifetime fiddling.
[06:16:35] *** Quits: Earnestly (earnest@2AB30F53.FB5005.2BCC804A.IP) (Ping timeout)
[06:16:36] <aatch> And only to work around a bug
[06:17:11] <tehgeekmeister> alright, I think it's time for me to sleep.
[06:17:14] <tehgeekmeister> thanks for all the help, everyone!
[06:17:28] <tehgeekmeister> i learned a ton. and thanks for building rust in the first place, too.
[06:18:27] *** Quits: pnathan1 (Adium@moz-BDC3EE62.tukw.qwest.net) (Quit: Leaving.)
[06:18:48] <aatch> dbaupp, how much of the lint stuff have you managed to do?
[06:18:59] <dbaupp> aatch: getting there, just need to do the IdVisitor stuff
[06:19:10] <dbaupp> (and also adjust all the visitors to use the env param.)
[06:19:32] <dbaupp> and clean-up the bugs
[06:19:39] <strcat> I think most of our existing unsafe code is wrong
[06:19:40] <strcat> in the stdlib
[06:19:46] <aatch> dbaupp, ok, Im just going to completely disable the linter for my code.
[06:19:58] <dbaupp> aatch: heh
[06:20:06] <aatch> just so I can get past the errors from it.
[06:20:09] <dbaupp> strcat: at least it's marked clearly :)
[06:20:18] <strcat> dbaupp: kind of.
[06:20:26] <strcat> dbaupp: we have fundamentally unsafe APIs that aren't marked as such
[06:20:28] <strcat> used all over
[06:20:37] <dbaupp> such as?
[06:20:41] <strcat> local_data, conditions
[06:20:59] <strcat> reflection
[06:21:04] <dbaupp> aatch: what colour do you want the bikeshed? env parameter first or last?
[06:21:10] <dbaupp> strcat: ah, right
[06:21:26] <dbaupp> strcat: presumably the local_data is being redone with brson's new rt
[06:21:27] <aatch> dbaupp, last.
[06:21:34] <strcat> dbaupp: I can only hope
[06:21:36] <strcat> ;p
[06:21:44] <dbaupp> strcat: (and presumably conditions too)
[06:21:53] <dbaupp> aatch: ok
[06:22:10] <aatch> dbaupp, simply because it theres the possiblity of it being ()
[06:22:26] <aatch> so better tucked away at the end.
[06:22:30] <dbaupp> aatch: yep
[06:22:44] <dbaupp> (unfortunately that's the one that's hardest to sed into place :P )
[06:23:10] <strcat> dbaupp: str and vec have holes ;p, but they're still too big and spread out
[06:23:17] <aatch> dbaupp, bah, you and your sed. I'm having to manually add lifetime parameters!
[06:23:29] <dbaupp> strcat: I know
[06:23:37] * strcat finds it pretty easy to find soundness holes :(
[06:23:42] <strcat> like how Cell has a non-priv field
[06:24:01] <dbaupp> strcat: I didn't touch the raw modules at all in my clean-ups.
[06:24:15] <strcat> and the C++ part
[06:24:17] <strcat> it's still used
[06:24:18] <dbaupp> (and there's still random crap outside of them.)
[06:24:20] <strcat> and is wrong
[06:24:30] <strcat> at least it's not used for non-managed ones
[06:24:31] <dbaupp> in the runtime?
[06:24:35] <strcat> yeah
[06:24:51] <dbaupp> hopefully brson's saving us.
[06:24:59] <strcat> don't think so
[06:25:02] *** Quits: vk (vk@moz-389FEE13.hsd1.ca.comcast.net) (Quit: vk)
[06:25:02] <dbaupp> :(
[06:25:23] <aatch> ok, I can't just "turn off" lint because other places use it...
[06:25:54] <aatch> solution: abuse the fact that the visitor goes in order and make the lint module the first in the list.
[06:26:18] <aatch> (I'm working bottom-up because of having lots of output)
[06:26:43] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[06:26:54] <strcat> I want to make bool and char sound
[06:27:01] <strcat> maybe that'll be my next trans project
[06:27:13] <dbaupp> it's a little ridiculous that not even bool is sensible :/
[06:27:32] <strcat> making char sound will be fun because it mostly involves deleting code
[06:27:37] <strcat> and everyone loves deleting code, right?
[06:27:38] <strcat> ;p
[06:27:43] * dbaupp does
[06:27:56] <strcat> rusti: 2 + 2
[06:27:57] -rusti- 4
[06:28:03] <strcat> rusti: 'd' + 'c'
[06:28:04] -rusti- '\xc7'
[06:28:07] <dbaupp> \o/
[06:28:09] <strcat> although maybe it will take more than that
[06:28:55] <aatch> strcat, make it a seperate ty_ variant
[06:28:58] <dbaupp> aatch: can you comment out everything except for the enums/functions at the start?
[06:29:13] <dbaupp> (and make check_crate a noop)
[06:29:32] <aatch> dbaupp, dunno, not bothered right now, I'll probably not get back up to it tonight
[06:29:41] <dbaupp> aatch: ok
[06:30:21] <aatch> What's nice is that some parts of the compiler are already wired up with lifetimes.
[06:36:02] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[06:37:40] <aatch> dbaupp, hey, I just changed the old visitor to take & everywhere (since the map no longer contains @ it needs to)
[06:37:47] <Jesse> strcat: "make bool and char sound" requires trans work? i'd have guessed typecheck and libraries
[06:37:59] <strcat> trans implements char and bool wrong
[06:38:12] <roo> rusti: trait A { } struct A; impl A for A {} A
[06:38:13] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/gUfh
[06:38:22] <strcat> it's not the fault of typechecking or the library that it treats it as a byte instead of a bit ;p
[06:38:47] <roo> oh yeah, trait objects
[06:38:53] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:40:05] *** Joins: relistan (relistan@moz-2DE8112B.cable.virginmedia.com)
[06:48:51] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[06:51:11] *** Quits: tikue (tkuehn@moz-A7CDB794.dia.static.qwest.net) (Quit: tikue)
[06:53:18] *** Quits: Jesin (Jessin_@moz-3AD6F09F.res.lehigh.edu) (Ping timeout)
[06:57:34] *** Joins: SimonSapin (simon@moz-D0C2F181.zone2.bethere.co.uk)
[07:04:32] *** Joins: cdidd (cdidd@moz-E31431FA.broadband.corbina.ru)
[07:05:12] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[07:05:39] *** Joins: pyrac (pyrac@moz-B0599561.w92-162.abo.wanadoo.fr)
[07:07:26] *** Joins: jviereck (Adium@moz-171898AC.ethz.ch)
[07:07:26] *** Joins: doener (doener@moz-121949B3.unitymediagroup.de)
[07:10:58] *** Joins: paupau (NEAT@moz-C616DA0A.hsd1.ca.comcast.net)
[07:11:32] *** Quits: tehgeekmeister (tehgeekmei@943F6AED.52480309.1A968954.IP) (Client exited)
[07:15:05] *** Quits: relistan (relistan@moz-2DE8112B.cable.virginmedia.com) (Quit: relistan)
[07:16:37] <geomyidae> why can't I seem to specify a parameter as a trait type?
[07:18:05] <aatch> geomyidae, you want trait bounds
[07:18:21] <aatch> <T:Trait1+Trait2>
[07:20:15] *** Quits: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[07:20:27] *** Quits: victorporof (victorporo@F32D7940.1C233438.79933D60.IP) (Ping timeout)
[07:22:31] *** Quits: vilonis (jared@moz-EE5D17ED.ph.ph.cox.net) (Quit: WeeChat 0.3.8)
[07:23:49] *** Joins: Voomer_ (Voomer@moz-E97E8EB7.br.br.cox.net)
[07:23:49] *** Quits: Voomer (Voomer@moz-E97E8EB7.br.br.cox.net) (Connection reset by peer)
[07:26:10] *** Quits: jviereck (Adium@moz-171898AC.ethz.ch) (Quit: Leaving.)
[07:27:07] *** Joins: mib_yczc6z (Mibbit@moz-9B8221B3.rivrw1.nsw.optusnet.com.au)
[07:27:16] <mib_yczc6z> hello
[07:27:36] <mib_yczc6z> I have a question about borrowing 
[07:28:10] <mib_yczc6z> the following code compiles fine
[07:28:21] <mib_yczc6z> struct Thing<'self> { foo: &'self str }
[07:28:28] <mib_yczc6z> impl<'self> Thing<'self> { 
[07:28:46] <mib_yczc6z>   fn new(foo: &'self str) -> ~Thing<'self> { ~Thing { foo: foo } }                                  
[07:28:52] <mib_yczc6z>   fn another(&self) { Thing::new(self.foo); }                                                                                                                          
[07:28:58] <mib_yczc6z> }                                                                                                   
[07:29:24] <mib_yczc6z> but if I change the type of foo from str to fn(u8), it's no longer any good
[07:29:50] <aatch> mib_yczc6z, can you post the code to pastebin or gist please?
[07:29:54] *** Joins: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net)
[07:30:09] *** Quits: paupau (NEAT@moz-C616DA0A.hsd1.ca.comcast.net) (Quit: out)
[07:30:32] <mib_yczc6z> okay, one sec
[07:30:35] <geomyidae> aatch: I just needed to parameterize it instead of using it as a type for a parameter
[07:30:47] <geomyidae> (or rather, I needed to do both? whats the right way to say this?)
[07:31:12] <geomyidae> I needed makeSomeNoise<T: animal>(a: T) rather than makeSomeNoise(a: animal)
[07:31:35] <aatch> geomyidae, so one is runtime polymorphism, the other is compile time.
[07:31:40] <aatch> bounds are compile time
[07:31:47] <aatch> you normally want compile-time
[07:32:01] *** Quits: pyrac (pyrac@moz-B0599561.w92-162.abo.wanadoo.fr) (Quit: pyrac)
[07:32:02] <geomyidae> aatch: which is which? I couldn't figure out the syntax for the latter?
[07:32:38] <geomyidae> duh, bounds are compile time, okay.
[07:32:47] <aatch> geomyidae, <T: Animal> should be read as "T bounded by Animal"
[07:32:53] <mib_yczc6z> okay, so both examples are here: http://pastebin.com/gw0y2cW9
[07:33:57] <bblum> mib_yczc6z: problem's not with borrowing; problem's that the &fn type is non-copyable
[07:34:12] <mib_yczc6z> oh, okay, so how do I do that
[07:34:17] <mib_yczc6z> I don't actually want to copy it
[07:34:21] <bblum> so "self.foo" with &self mode would be copying a noncopyable
[07:34:23] <mib_yczc6z> I just want them to share the pointer
[07:34:38] <geomyidae> aatch: the other way isn't possible though, right?
[07:34:43] <aatch> https://github.com/mozilla/rust/wiki/Doc-under-construction-FAQ#noncopyable-stack-closures
[07:34:46] <geomyidae> makeSomeNoise(a: animal) ?
[07:34:50] <bblum> well, you can't share the pointer because the pointer is noncopyable
[07:35:00] <aatch> geomyidae, you can't have just 'animal'
[07:35:05] <aatch> because a trait isn't a type
[07:35:14] <geomyidae> I suppose I see.
[07:35:15] <aatch> you need to have @/~/&Animal
[07:35:17] <mib_yczc6z> so I can't have multiple structures sharing a pointer to a single function?
[07:35:20] <geomyidae> Do other languages just munger the syntax?
[07:35:26] <geomyidae> munge*
[07:35:31] <bblum> mib_yczc6z: basically, pretend "&fn" is not a pointer
[07:35:32] <mib_yczc6z> I mean, all containing a pointer to the same function
[07:36:01] <bblum> "&fn" is pronounced "stack closure", not "pointer to stack closure"
[07:36:02] <bblum> so if you want them to share a pointer to it you can make a &&fn
[07:36:34] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[07:36:37] <bblum> or... you can write &fn:Copy, to let you copy it
[07:36:52] <bblum> but that will prevent you from capturing any outer variables in such a closure
[07:36:56] <bblum> (today)
[07:37:30] <mib_yczc6z> hmm, okay
[07:37:44] <aatch> bblum, will there be proper lifetime bounds for heap closures eventually?
[07:37:51] <bblum> aatch: eventually yeah
[07:37:54] <aatch> so fn:'r()
[07:38:00] <aatch> @fn:'r() rather
[07:38:49] <mib_yczc6z> cool, I think fn:Copy is what I wanted here
[07:39:03] <mib_yczc6z> thanks
[07:39:29] <fabiand> hey
[07:39:31] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:40:04] *** Quits: SimonSapin (simon@moz-D0C2F181.zone2.bethere.co.uk) (Ping timeout)
[07:40:50] <geomyidae> what's the way around this? https://gist.github.com/anonymous/5955430
[07:41:16] <geomyidae> when two traits have methods(?) with the same names
[07:42:13] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[07:43:18] <aatch> geomyidae, there isn't really
[07:43:47] <aatch> I mean, how could it possibly know which one to pick?
[07:44:00] *** Quits: kmc (keegan@moz-D2A53639.compute-1.amazonaws.com) (Input/output error)
[07:44:11] <aatch> there's a method resolve _bug_ that means the only fix wouldn't actually work atm
[07:44:12] <geomyidae> aatch: I wondered if there was a way inline to further bound it?
[07:44:20] <geomyidae> I guess that would be runtime determination
[07:44:27] <aatch> geomyidae, bound it to what?
[07:44:47] <geomyidae> in that example, either one of cbark or jbark
[07:45:19] <geomyidae> line 26: (<cbark>a).bark();
[07:46:05] *** Quits: mib_yczc6z (Mibbit@moz-9B8221B3.rivrw1.nsw.optusnet.com.au) (Quit: http://www.mibbit.com ajax IRC Client)
[07:46:15] <aatch> geomyidae, uh... maybe a.bark::<cbark>() ?
[07:46:21] <aatch> but don't count on it.
[07:46:41] <geomyidae> hm interesting, now I have something else to try..
[07:46:44] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[07:46:44] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/H_bcKw
[07:46:44] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[07:46:55] *** Joins: pnkfelix|rcirc (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[07:47:05] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[07:48:11] <geomyidae> aatch: this worked https://gist.github.com/anonymous/5955447
[07:48:27] <aatch> geomyidae, yeah
[07:49:05] <geomyidae> that's nice that I can pull it back out of that sum type (is that okay terminology to describe T: jbark+cbark? )
[07:49:06] <aatch> it just means it effectively shrinks the bounds of `makeSomeNoise`
[07:49:42] *** Joins: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP)
[07:49:42] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/HF3Dgw
[07:49:42] *** Parts: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP) ()
[07:49:44] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[07:49:44] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/V_OWxw
[07:49:44] <ghrust> 13rust/06auto 14d31d8e3 15Felix S. Klock II: Refactored int/uint range code in preparation for change to range_rev semantics....
[07:49:44] <ghrust> 13rust/06auto 140b639c8 15Felix S. Klock II: Switch over to new range_rev semantics; fix #5270.
[07:49:45] <ghrust> 13rust/06auto 14960e4cd 15bors: auto merge of #7524 : pnkfelix/rust/fsk-invert-range-rev-halfclosedness-issue5270, r=cmr...
[07:49:47] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[07:50:33] *** Joins: bytewise (bytewise@moz-649C630D.unitymediagroup.de)
[07:54:22] <aatch> Urg, I hate @
[07:54:43] <engla> acrichto: thanks for the great comments so far on the linked list
[07:55:54] <geomyidae> aatch: I apologize for my noobiness but this is telling me I moved a on line 26, what if I want it to "come back" ?
[07:56:21] <aatch> geomyidae, that's because you're taking the object by value
[07:56:27] <aatch> which moves by default
[07:56:41] <aatch> if you take a &T then it will borrow instead
[07:56:58] <geomyidae> of course, thanks
[07:57:40] *** Joins: sk (sk@43301EF8.3DDD1ABD.33B96495.IP)
[07:58:07] <ChrisMorgan> Why is it that compile errors seem to all be appearing three times?
[07:58:08] <aatch> Ugh, I hate all the unsafe code I have to add
[07:58:21] <aatch> ChrisMorgan, because they are 3 seperate errors
[07:58:24] <geomyidae> aatch: does it ever copy, say like raw ints, by default?
[07:58:29] <aatch> just that one causes the other
[07:58:32] <ChrisMorgan> aatch: sometimes the text of the three is identical.
[07:58:34] <bjz_> aatch: it's amazing how loathed @ has become :P
[07:58:35] <acrichto> engla: no problem! also great work on that, I'm always very happy to see less @ usage
[07:58:40] <aatch> geomyidae, yes, some types are implicitly copyable
[07:58:53] <aatch> bjz_, it causes nothing but problems
[07:59:30] <bjz_> aatch: aye
[07:59:49] <geomyidae> aatch: oh right, that's one of the kinds
[08:00:16] <aatch> even when I know something lasts for a certain time, the borrow checker just refuses to root it for long enough
[08:04:11] *** Quits: pnkfelix|rcirc (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Input/output error)
[08:04:38] *** Quits: km (quassel@FDBAF0A0.DBF71E41.29C67456.IP) (Ping timeout)
[08:06:10] *** Joins: km (quassel@FDBAF0A0.DBF71E41.29C67456.IP)
[08:08:28] <aatch> And back under 200 errors
[08:08:37] <aatch> time to go home
[08:09:27] *** aatch is now known as aatch|gone
[08:09:52] *** kimundi is now known as zz_kimundi
[08:15:05] *** Joins: SimonSapin (simon@88F51059.F3BBB17D.144F44FA.IP)
[08:15:20] *** Joins: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP)
[08:17:03] *** Quits: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[08:18:42] *** Joins: pnkfelix|rcirc (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[08:19:25] *** Joins: relistan (relistan@A7E4EF66.4C1F25E9.4BA0249.IP)
[08:22:36] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[08:22:36] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14960e4cd to 14ac026e2: 02http://git.io/N3iJvQ
[08:22:36] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[08:22:39] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[08:22:39] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/OixmZQ
[08:22:39] <ghrust> 13rust/06auto 146f479a6 15=Mark Sinclair: Added external iterators for SmallIntMap and SmallIntSet...
[08:22:39] <ghrust> 13rust/06auto 14ee10246 15bors: auto merge of #7614 : MarkJr94/rust/smallintmap_enum, r=huonw...
[08:22:40] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[08:23:08] <doomlord> how far does android support work currently
[08:24:00] <BluePeppers> Hi, I'm trying to write a version of extra::list using Rc instead of @, but I'm quite new to rust, and I'm getting an error that I can't see how to correct: "Cannot move out of dereference of & pointer". The error is on line 18 of the code here: https://gist.github.com/bluepeppers/9a450ca84026f2228400
[08:24:19] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[08:25:41] *** Joins: pyrac (pyrac@moz-88F57AAB.math.u-bordeaux1.fr)
[08:25:57] <engla> BluePeppers: hopefully that error message will be more understandable as you get used to it. I think Rc<T> objects need to be explicitly cloned with .clone()
[08:26:39] *** Joins: jaen (jaen@moz-4D3C9F5C.neoplus.adsl.tpnet.pl)
[08:27:02] <engla> because List() needs a Rc<T> value (not borrowed reference), it tries to move the tail out of the cons
[08:27:50] <BluePeppers> engla, aaah that could be it. It's annoying that the error highlights where the variable is bound, not where it is passed outside its lifetime
[08:28:11] <engla> yeah
[08:28:40] <engla> I think you need to bind it differently though.  &Cons(_, ref tail) => len(List(tail.clone())
[08:28:51] <engla> I might be totally wrong
[08:29:19] <BluePeppers> engla, no, it compiles. You're a god in my eyes now :P
[08:29:19] <engla> with  ref tail  you get a reference from the destructuring
[08:30:04] <engla> ah great.. god of Destructur.. Destruction.. ok.
[08:30:30] <BluePeppers> engla, I havn't seen any documentation on ref, it just prevents copies, I presume? 
[08:30:31] <dbaupp> (you definitely shouldn't need to .clone() to write len(), you should probably have a helper len defined on ListNode only, and then use this  in the List borrow.)
[08:32:09] <engla> BluePeppers: in this case, the value can't be copied (only moved, which all values can, or you have .clone())
[08:37:08] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[08:37:09] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[08:37:22] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[08:39:58] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:40:15] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[08:40:58] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[08:41:31] *** Joins: Earnestly (earnest@2AB30F53.FB5005.2BCC804A.IP)
[08:42:15] *** Quits: km (quassel@FDBAF0A0.DBF71E41.29C67456.IP) (Ping timeout)
[08:45:32] *** Joins: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP)
[08:47:17] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[08:49:12] <doomlord> performance: is greater use of a safely growable stack faster than a usual c stack with more dynamic alloc
[08:50:47] *** Quits: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[09:03:05] <mark_edward> doomlord: what do you mean
[09:03:15] <mark_edward> are you talking about that whole segmented stack thing again
[09:03:16] *** Joins: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk)
[09:03:53] <mark_edward> and are half the people here australian? no matter what time of day it is the room has activity
[09:04:15] <doomlord> yes (was it being discussed earlier..oops)
[09:04:18] <doomlord> i'm in the UK
[09:04:39] <doomlord> (and i'm sometimes up late or early :) )
[09:05:31] <mark_edward> no worries, im just not sure what your talking about.
[09:05:49] <mark_edward> you have more knowledge than me, do you have an opinion on that?
[09:06:01] <mark_edward> and do you have any idea what's going to happen?
[09:06:31] <doomlord> ok benchmarking required. i've never used anything other than an unsafe stack seriously .. on consoles
[09:06:56] <doomlord> so i guess the question is the overhead of the stack growing + tests for that, vs dynamic allocations
[09:07:57] <doomlord> i wonder if rust would have an optimization similar to "leaf functions" on some risc's where functions that dont call others and are known to not use much stack space can be called with less overhead
[09:08:25] <doomlord> seems it should be theoretically possible
[09:08:34] <mark_edward> doesn't inlining also address that?
[09:08:54] <doomlord> this would be halfway between inlining and full function calls
[09:09:05] <mark_edward> it's functions that don't call others that are good inlining candidates as well, right?
[09:09:16] <doomlord> tes
[09:09:20] <doomlord> yes sure.
[09:09:32] <doomlord> so there is theoretically a sliding scale..
[09:09:58] <pnkfelix|rcirc> doomlord: seems like leaf function changes should be cleanly expressible by the user via `extern "foo"` for some foo, perhaps to-be-written, right?
[09:10:10] <doomlord> on some riscs. they divide up the registers .. caller saved/callee saved.  "leaf functions" are ones who have so few locals that they dont manipulate the stack at all
[09:10:17] <pnkfelix|rcirc> doomlord: or were you thinking this would be a transformation introduced automatically by the compiler?
[09:10:33] <doomlord> ^ automatically
[09:10:51] *** zz_kimundi is now known as kimundi
[09:12:46] <mark_edward> hm. sounds interesting
[09:12:48] <doomlord> i suppose the stack growing could always reserve a certain extra buffer, and any function that knows it doesn't grow the stack more than a certain amount needn't invoke certain checks
[09:14:31] <doomlord> http://www.cs.umd.edu/class/sum2003/cmsc311/Notes/Mips/case_simp.html <<< i'd encountered the concept in mips assembly on the ps1 .. basically writing leaf functions was nice and simple :)
[09:17:22] *** Quits: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[09:17:26] *** Joins: true_droid (Adium@moz-123FD9B8.beck.volia.net)
[09:17:42] *** Joins: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP)
[09:18:07] <mark_edward> doomlord: what do you think of this https://github.com/mozilla/rust/issues/5768#issuecomment-20507701
[09:19:08] <doomlord> that looks like a great idea.. hinting it
[09:21:29] <roo> i think i broke it http://sprunge.us/ThNh?rust#n-37
[09:22:50] <roo> it is saying there is no implementation of a trait, for a type that is not reference anywhere
[09:24:49] <roo> (I was actually using the name X somewhere else before, which was really confusing)
[09:25:16] <pnkfelix|rcirc> roo: I think the error messages for type check failures are still notoriously bad
[09:25:25] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[09:26:38] <pnkfelix|rcirc> roo: e.g. you might be hitting something related to: https://github.com/mozilla/rust/issues/3723
[09:26:43] <roo> so I am guessing i cant do something like impl <A,B,C: Foo<A,B> + Bar<A,B> ...
[09:26:43] *** Quits: heftig (heftig@moz-7D054C95.dip0.t-ipconnect.de) (Ping timeout)
[09:26:56] * roo looks
[09:27:37] *** Joins: cypher (ircnet@moz-EA42E471.static.surfer.at)
[09:28:08] <pnkfelix|rcirc> roo: That is a good question; I had thought the earlier formal type parameters would be bound and available for reference later in the parameter list (for precisely the use case you give), but maybe that is not done yet.
[09:28:19] * pnkfelix|rcirc goes to check
[09:28:31] *** Quits: scanlonman (scanlonman@moz-169BC238.hsd1.wa.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[09:28:44] *** Joins: heftig (heftig@moz-9748F6D5.dip0.t-ipconnect.de)
[09:29:13] <cypher> Hi everyone. `rust` crashes with a malloc error when I run it without any arguments: https://gist.github.com/cypher/7dc07c8e0461ab8c7daa
[09:29:19] <cypher> Should I file a bug for this on GitHub?
[09:30:06] <SimonSapin> So I have a nested/recursive data structure, and tests that use assert_eq() on it. When a test fails Iâ€™d like to see what (possibly deeply nested) parts differ. Has anyone worked on something like that?
[09:30:34] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[09:30:39] <SimonSapin> a text diff of a pretty print could work
[09:35:51] *** Joins: km (quassel@FDBAF0A0.DBF71E41.29C67456.IP)
[09:36:09] <doomlord> was there a way to make a rust function linkable/callable from C (i tried extern "C" fn foo() {.....}, but it seems extern "C" is only for declaring C functions callable by rust?)
[09:36:44] <doomlord> i've already used lambdas passed as callbacks to C ok
[09:37:36] *** Quits: km (quassel@FDBAF0A0.DBF71E41.29C67456.IP) (Ping timeout)
[09:37:43] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[09:39:07] *** Joins: z0w0 (zack@moz-37A98529.lnse2.woo.bigpond.net.au)
[09:40:32] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:40:49] *** Joins: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net)
[09:42:35] *** Quits: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net) (Ping timeout)
[09:42:56] <pnkfelix|rcirc> roo: I was not able to duplicate your issue on a small test case: https://gist.github.com/pnkfelix/5956068
[09:43:58] <roo> pnkfelix|rcirc,  I think it may have to do a combination of things including the form of the FromResult::from_result() method.
[09:44:06] <roo> ^with
[09:45:16] <pnkfelix|rcirc> roo: I just realized that my test did not attempt to put multiple trait bounds on any parameter, let me double check that too
[09:45:21] <bjz_> mark_edward: I am Australian!
[09:45:46] * ChrisMorgan too
[09:45:56] <bjz_> ChrisMorgan: ooh hullo
[09:45:57] <ChrisMorgan> How can I get a(n?) &str from a ~str? s.as_slice() will do it, but is it the best way?
[09:45:59] <mark_edward> I see! cmr is from NZ right?
[09:46:03] <bjz_> ChrisMorgan: city?
[09:46:06] <ChrisMorgan> Melbourne
[09:46:11] <mark_edward> or am i mixing him up with someone
[09:46:19] <ChrisMorgan> I think that was aatch 
[09:46:28] <bjz_> ChrisMorgan: ooh, you should join me and xenocons at MFUG
[09:46:31] *** Joins: smvv_ (sander@moz-BAEA8EB2.dynamic.upc.nl)
[09:46:43] <bjz_> ChrisMorgan: (Melbourne Functional User Group)
[09:47:12] <bjz_> aatch|gone is NZ
[09:47:13] <ChrisMorgan> Ooh, I like the address shown at http://www.meetup.com/Melbourne-Functional-User-Group-MFUG: "Level 14, Melbourne"
[09:47:30] <bjz_> ChrisMorgan: thoughtworks, on collins st
[09:47:33] <bjz_> :P
[09:48:06] <bjz_> ChrisMorgan: we have to work up to a RustCon: Melbourne :)
[09:48:12] <SimonSapin> what module do I need to start and wait on a sub process?
[09:48:34] <SimonSapin> ie. fork()+exec()+wait(), or something
[09:48:47] <bjz_> ChrisMorgan: and we will invite dbaupp
[09:48:55] <bjz_> x)
[09:48:59] <mark_edward> will ther ebe a rustcon Chicago... 
[09:49:12] <mark_edward> nothing cool in programming is ever in Chicago :-(
[09:49:22] <bjz_> mark_edward: commits are welcome
[09:49:24] * ChrisMorgan thinks a Rust conference would be likely to be a little premature
[09:49:24] <bjz_> x)
[09:49:36] <bjz_> ChrisMorgan: I kid, I kid :D
[09:49:37] <mark_edward> lol
[09:49:45] <mark_edward> you can never have a rustcon too early
[09:50:03] <davbo> SimonSapin: 'run' in the stdlib
[09:50:20] <SimonSapin> thanks davbo
[09:50:24] <bjz_> ChrisMorgan: are you a C++ refugee?
[09:50:24] <doomlord> ook i'm declaring a function 'extern "C" fn rustyFunction() {....}'  .. and in a c file, i have extern void rustyFunction(..); and a call... but the linker can't find it .. did i need a different calling convention declared perhaps
[09:50:30] <pnkfelix|rcirc> roo: (nope, impl<X:A, Y:B1<X> + B2<X>> works for me too.  I'll try your actual code now instead.)
[09:50:41] <doomlord> or do i need an additional #[...] or some sort to export it
[09:50:46] <ChrisMorgan> bjz_: no; Python's been my preferred language for the past half dozen years.
[09:50:57] <roo> pnkfelix|rcirc, alright
[09:51:00] <bjz_> ChrisMorgan: ah ok
[09:51:08] <doomlord> (just tried pub extern "C" fn... didnt help)
[09:51:14] <bjz_> ChrisMorgan: what makes you interested in Rust?
[09:51:38] <pnkfelix|rcirc> doomlord: how are you telling rustc to link in the object file?
[09:51:43] <doomlord> (apparently python->go is a popular jump)
[09:51:51] <pnkfelix|rcirc> doomlord: there is indeed some #[...] magic for that
[09:51:56] <doomlord> the C object file is linked fine- i've got that working
[09:51:58] <ChrisMorgan> (a) Performance; (b) correctness; (c) as the Athenians of old, I am interested in hearing something new
[09:52:10] <doomlord> the issue is tring to make a rust function that the  C can call.
[09:52:11] <ChrisMorgan> And somewhere down the way, also, Mozilla backing.
[09:52:13] <bjz_> ChrisMorgan: nice
[09:52:14] <doomlord> rust -> C->rust
[09:52:22] <doomlord> rust->C is fine
[09:52:51] <pnkfelix|rcirc> doomlord: oh I see.  I haven't tried to do direct C->rust; I always pass in function pointers from rust for C to call.
[09:52:53] <doomlord> #[link_args -lcstuff] and i have a makefile building a libcstuff from my c code
[09:52:57] * ChrisMorgan tried Go but found it, in particular its type system, too constraining for some things he wants
[09:52:59] <bjz_> ChrisMorgan: I should probably go outside my comfort zone and do more dynamic stuff, but it's scary
[09:53:17] <doomlord> yes i habe that working too, thankfully. (that is more important anyway)
[09:53:38] <bjz_> ChrisMorgan: yeah, rudimentary static type systems can be very limiting
[09:53:52] <bjz_> *cough* Java *cough*
[09:54:28] * ChrisMorgan had to deal with a badly written Java + Spring + Hibernate codebase at Monash Uni last semester. *shudder*
[09:54:35] <doomlord> i vowed never to touch java, but had to poison my brain writing some lines for an android stub
[09:55:08] <mark_edward> AbstractProxyAbstractSingletonProxyFactory
[09:55:31] <doomlord> the magic of OOP :)
[09:56:06] <mark_edward> i can see why some people hate it if that's all they know about it
[09:56:23] <ChrisMorgan> mark_edward: you missed "Bean" there
[09:56:28] <ChrisMorgan> And "Method"
[09:56:52] *** Quits: cypher (ircnet@moz-EA42E471.static.surfer.at) (Quit: 410 Gone)
[09:57:02] <mark_edward> oh god
[09:57:15] <roo> pnkfelix|rcirc, weird, when i replace the FromResult::from_result() with a fail!, it talks about the Me type parameter as V, and doesn't acknowledge the constraint. It may be that impl<X> Foo for X is broken?
[09:57:22] *** Joins: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net)
[09:58:32] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[09:58:32] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/OixmZQ
[09:58:32] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[10:00:49] *** Parts: BluePeppers (user@moz-3799699A.range81-151.btcentralplus.com) (ERC Version 5.3 (IRC client for Emacs))
[10:01:15] *** Joins: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net)
[10:01:30] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[10:01:30] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/j4FNmg
[10:01:30] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[10:01:33] *** Joins: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP)
[10:01:33] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/9ShbEw
[10:01:33] <ghrust> 13rust/06auto 14ba79b3d 15Graydon Hoare: initial sketch of codegen mode for compiletest; doesn't measure / compare / ratchet the disassembly yet
[10:01:33] <ghrust> 13rust/06auto 14450a923 15Graydon Hoare: wire up makefile to run codegen tests and add one to start
[10:01:34] <ghrust> 13rust/06auto 1435530f3 15bors: auto merge of #7623 : graydon/rust/codegen-compiletests, r=cmr...
[10:01:36] *** Parts: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP) ()
[10:01:47] <mark_edward> The commit you have all been waiting for has arrived in master. you're smallintmaps now hav eiterators!
[10:01:54] *** Joins: BluePeppers (user@moz-3799699A.range81-151.btcentralplus.com)
[10:02:00] * mark_edward bows graciously
[10:02:08] *** Quits: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[10:02:10] <mark_edward> :P
[10:03:44] <mark_edward> rust: trait Foo { fn foo(); } impl<X> Foo for X { fn foo() { } } let x = 1; 1.foo()
[10:03:56] <mark_edward> rusti: trait Foo { fn foo(); } impl<X> Foo for X { fn foo() { } } let x = 1; 1.foo()
[10:03:56] -rusti- <anon>:7:79: 8:5 error: type `<VI1>` does not implement any method in scope named `foo`
[10:03:57] -rusti- <anon>:7          trait Foo { fn foo(); } impl<X> Foo for X { fn foo() { } } let x = 1; 1.foo()
[10:03:57] -rusti- <anon>:8     };
[10:03:57] -rusti- error: aborting due to previous error
[10:03:57] -rusti- application terminated with error code 101
[10:04:10] <mark_edward> rusti: trait Foo { fn foo(); } impl<X> Foo for X { fn foo() { } } let x = 1u; 1.foo()
[10:04:10] -rusti- <anon>:7:80: 8:5 error: type `<VI0>` does not implement any method in scope named `foo`
[10:04:11] -rusti- <anon>:7          trait Foo { fn foo(); } impl<X> Foo for X { fn foo() { } } let x = 1u; 1.foo()
[10:04:11] -rusti- <anon>:8     };
[10:04:11] -rusti- error: aborting due to previous error
[10:04:11] -rusti- application terminated with error code 101
[10:04:14] <pyrac> hi all I am trying to compile this https://gist.github.com/osaut/35b54941465e5efdd550 without success but I do not understand the error
[10:04:31] <pyrac> error: found value name used as a type: def_variant
[10:05:06] *** Parts: pyrac (pyrac@moz-88F57AAB.math.u-bordeaux1.fr) ()
[10:05:21] *** Joins: pyrac (pyrac@moz-88F57AAB.math.u-bordeaux1.fr)
[10:05:38] <mark_edward> pyrac: you can't impl traits on enum variants like that
[10:05:46] <nmatsakis> pyrac: the error message is a bug,
[10:06:12] <nmatsakis> pyrac: but mark_edward has diagnosed the cause. Enum variants are not types, only the enum as a whole is a type.
[10:06:33] <nmatsakis> pyrac: usually you would have a `match` inside the methods
[10:06:43] <pyrac> nmatsakis:  ok I see
[10:07:32] <pyrac> so I should impl on my enum and match inside each method
[10:07:54] <SimonSapin> How do I open a file for writing?
[10:08:04] <pyrac> mark_edward, nmatsakis : thanks for the help I was stuck on this :)
[10:08:10] <SimonSapin> do I need std::libc for that?
[10:09:02] <BluePeppers> Is there a PersistentMap trait to go with the Map trait in std::container?
[10:09:17] <SimonSapin> oh, got it. io::file_writer
[10:09:41] <nmatsakis> BluePeppers: there is not, though I do not think we should have one --- I'd rather just augment the standard Map trait,
[10:09:52] <nmatsakis> BluePeppers: which is suitable for both.
[10:10:13] <nmatsakis> BluePeppers: if we added methods that return new maps, that is.
[10:10:29] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[10:11:54] *** Quits: ross (ross@moz-8A84103E.br.br.cox.net) (Quit: )
[10:12:25] <BluePeppers> nmatsakis, so we would have ephemerial maps which also happened to be persistent when required?
[10:12:43] *** Joins: pczarn (bzlandfill@moz-69A55FA.izacom.pl)
[10:15:28] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[10:17:32] <SimonSapin> Should I close files or am I supposed to rely on the GC to do it?
[10:17:50] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[10:18:27] *** Quits: doomlord (doomlod@moz-6651F8D4.range86-145.btcentralplus.com) (Ping timeout)
[10:19:00] *** Quits: sk (sk@43301EF8.3DDD1ABD.33B96495.IP) (Quit: Leaving)
[10:20:13] <Yoric> I can't answer for that specific library, but given that file handles are limited per process, I generally recommend closing files manually.
[10:20:33] <Yoric> Additionally, knowing in which thread a file is closed can be helpful for debugging.
[10:21:00] <Yoric> Finally, deciding when a file is closed helps evaluate/minimize risks of data loss.
[10:21:28] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Connection reset by peer)
[10:22:04] *** Joins: victorporof (victorporo@74A9C5E8.1745F5FA.9B1E38F4.IP)
[10:25:32] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[10:25:32] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1435530f3 to 14ee10246: 02http://git.io/N3iJvQ
[10:25:32] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[10:30:35] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[10:31:16] <pnkfelix|rcirc> SimonSapin: based on skimming io.rs, I think the intention is to let the drop method (i.e. the destructor/finalizer) close the file.  The Writer interface does not expose a close method.  This wouldn't be troubling if mk_file_writer returned a ~Writer, but it returns a @Writer (presumably because ~Trait's are broken, IIRC)
[10:31:30] <mark_edward> they work now...
[10:31:33] <mark_edward> basically
[10:31:41] <mark_edward> still no inheritance though
[10:32:21] <pnkfelix|rcirc> SimonSapin, mark_edward: okay, well, maybe the io.rs library should be changed to return a ~Writer then, to enforce RAII style handling of closing the file.
[10:32:42] <SimonSapin> pnkfelix|rcirc: I see. I find that surprising: itâ€™s considered bad practice to rely on GC to close files in Python, even though CPython uses refcounting
[10:32:51] <mark_edward> well io is getting a complete rewrite, so i dont think anything will be changed here
[10:33:01] <pnkfelix|rcirc> SimonSapin: yes, this is exactly why I'm suggesting a ~Writer would be better.
[10:33:46] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[10:34:00] <SimonSapin> pnkfelix|rcirc: I see, thanks
[10:34:06] <pnkfelix|rcirc> mark_edward: Yeah true.  I guess what I really mean is that I hope the next iteration doesn't make the same mistake.
[10:36:33] *** Quits: pyrac (pyrac@moz-88F57AAB.math.u-bordeaux1.fr) (Quit: pyrac)
[10:38:17] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[10:40:34] * ChrisMorgan wonders how hard it would be to write a Rust program that could provide accurate folding of Rust source file in Vim... and whether that's the right way to go, anyway
[10:41:03] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:41:43] <hoelzro> getting Rust folding right in Vim shouldn't be too hard
[10:42:32] <ChrisMorgan> hoelzro: not particularly, but doing it well is a little more tricky. For example, I'd be folding the doc comments, which come typically _above_, inside the method. That makes it rather messy and inefficient in Vimscript.
[10:43:13] <hoelzro> wait, you'd fold the doc comments along with the method body?
[10:43:38] <ChrisMorgan> I think I would tend to prefer it that way. I'd need to try it out.
[10:44:33] <ChrisMorgan> You'd still be setting the appropriate 'foldtext' though, so you'd be getting the signature showing rather than the first line of comments only (possibly just "/*")
[10:44:53] <hoelzro> that's a neat idea
[10:45:22] <ChrisMorgan> I started off with just the trivial braces folding, adding `syn region rustFold start="{" end="}" transparent fold` and `setl foldmethod=syntax` to the syntax file. That's a good start, but I don't like folding `if`, &c.
[10:46:55] *** Joins: sk (sk@43301EF8.3DDD1ABD.33B96495.IP)
[10:47:03] *** Quits: pczarn (bzlandfill@moz-69A55FA.izacom.pl) (Quit: CGI:IRC (Ping timeout))
[10:47:40] <cmr> mark_edward: I'm US
[10:47:44] <cmr> Eastern time
[10:48:11] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[10:48:14] <monk> I still have never found folding particularly useful :\
[10:49:03] <ChrisMorgan> monk: what editor do you use primarily?
[10:49:14] <monk> vim
[10:49:15] <ChrisMorgan> How do you tend to navigate?
[10:49:50] <monk> to search around, :sp to open new files
[10:50:05] *** Joins: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP)
[10:50:19] <ChrisMorgan> I'm tending to find that a little unwieldy in some Rust code. I'm also spending a lot of time not knowing what I'm looking for and just browsingâ€”folding is great for that case.
[10:50:28] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[10:50:29] <monk> I sort of subconsciously use ^W,F for opening paths
[10:51:17] <ChrisMorgan> Good if the filename is there, but often it's not.
[10:52:15] <ChrisMorgan> Incidentally, that's another improvement I've made to the Vim config for myself, which I should really push back upstream: setl includeexpr=substitute(v:fname,'::','/','g') suffixesadd=.rs
[10:52:26] *** Parts: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) ()
[10:52:32] <monk> fair enough. I can see how collapse all is useful for speeding up browsing top levell things in a new codebase, other than that I haven't managed to get them into any workflow
[10:52:34] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[10:52:48] <cmr> I've never found folding that useful either
[10:52:56] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[10:53:03] <ChrisMorgan> The danger of getting familiar with Ctrl+W in terminals and Vim: it's dangerous everywhere else...
[10:53:14] <cmr> I just split the window if I want to view two pieces at once that have a large chunk of stuff between them
[10:53:48] <ChrisMorgan> Oh, I do that plenty too, but folding is good when I'm not familiar with the code I'm looking at.
[10:53:52] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[10:54:08] <cmr> https://github.com/mozilla/rust/pull/7262 landed \o/
[10:55:22] <ChrisMorgan> Another thing I've done for the Rust Vim config (should push it back upstream): setl includeexpr=substitute(v:fname,'::','/','g') suffixesadd=.rs. That makes gf/<C-W>f work on plenty of things in Rust code (e.g. `use` statements).
[10:57:22] <ChrisMorgan> There's still quite a bit more that can be done to improve it, but that's a start.
[10:57:49] <hoelzro> ChrisMorgan++ # improving Vim runtime files for Rust
[10:58:04] *** Quits: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[10:58:31] <ChrisMorgan> Is there any common sort of path to have the rust source code?
[10:58:37] <mark_edward> cmr: i see. but you're on at odd times. but im on on odd times too. i have sleep issues though
[10:58:43] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[10:58:54] <mark_edward> does anyone here know how to work on Rust geany config?
[10:59:14] <cmr> ChrisMorgan: can you rephrase that?
[10:59:27] <cmr> (Also, proper indent file would be *really* amazing)
[10:59:31] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (Ping timeout)
[11:00:08] <ChrisMorgan> cmr: if a user has src/libstd/*.rs files somewhere, is there any particular location where they are likely to be? Anywhere I should look for 'path'?
[11:00:13] <ChrisMorgan> Indent, or fold?
[11:01:03] <cmr> ChrisMorgan: Oh, no, everyone puts their source in their own place
[11:01:11] <ChrisMorgan> That's what I thought most likely.
[11:01:17] <cmr> Indent, I don't use folding much
[11:01:34] <ChrisMorgan> What do you find to be wrong with what's there?
[11:01:37] <cmr> but I always fight with the C indentation, especially with match
[11:02:34] <cmr> Frequently it adds an extra indent where there should be none
[11:03:48] <ChrisMorgan> Ah yes, on the second match when not using braces.
[11:04:00] *** Joins: pyrac (pyrac@moz-88F57AAB.math.u-bordeaux1.fr)
[11:04:02] <ChrisMorgan> Or when using braces.
[11:04:11] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[11:05:37] <cmr> Alsoe http://i.imgur.com/Wm0x1Zn.png
[11:10:03] <cmr> doener: you cut off 500+ seconds off the testsuite for no-opt
[11:10:31] <doener> :-)
[11:10:31] *** Joins: doomlord (doomlod@moz-6651F8D4.range86-145.btcentralplus.com)
[11:10:42] <cmr> either that or the buildbots decided to take steroids, http://huonw.github.io/isrustfastyet/buildbot/
[11:11:24] <doomlord> http://pastebin.com/ahzPT3bK <<< callback to c .. params not seeming to go through right .. did i miss something (specify calling convention onthe lambda? ) .. i'll try it passing a non anonymous function aswell
[11:11:38] <doomlord> statically linked functions seem to pass values through ok
[11:12:21] <cmr> doomlord: lambdas have an environment pointers as their first argumen
[11:12:53] <doener> cmr: hm, linux-32 opt also dropped though, just not quite as much. Maybe better register usage? 
[11:13:06] <cmr> I think taking an `extern "Rust" fn` in the FFI rather than &fn?
[11:13:17] <doomlord> thanks
[11:13:25] *** Quits: olleharstedt (Thunderbir@moz-80D8890F.ias.bredband.telia.com) (Ping timeout)
[11:13:29] <cmr> Also related: https://github.com/mozilla/rust/pull/6661
[11:14:03] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[11:14:14] <cmr> "closed" because of the incoming/master merge, not because it actually landed
[11:15:43] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[11:16:20] <ChrisMorgan> cmr: I'm not sure anything can be done about square brackets while still using cindent, so that'll probably need to change
[11:17:11] <cmr> ChrisMorgan: right, thus proper indent file (not using cindent)
[11:18:33] *** Quits: CraigE (craige@moz-DF25A0FC.wi.res.rr.com) (Ping timeout)
[11:19:52] <doener> cmr: wait, where do you see no-opt runs on irfy? The five lines I see are all opt
[11:20:34] <cmr> oh... those are all opt
[11:20:38] <cmr> hrm
[11:20:53] <cmr> http://huonw.github.io/isrustfastyet/buildbot/all
[11:21:51] <doener> ah
[11:24:29] <doomlord> should i just avoid passing rust lambdas directly as C function-callbacks, or is a way to annotate them
[11:24:39] <doomlord> ph "exter "Rust" fn ?
[11:24:57] *** Joins: mreedell (mreedell@moz-9950CA28.hsd1.pa.comcast.net)
[11:25:22] <doener> cmr: the drop is after my PR though. Maybe taking linux1b out of the pool had some effect
[11:25:42] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[11:26:09] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[11:26:32] <doomlord>  I could avoid needing to pass callbacks with some C side code... make data polling wrapper
[11:27:23] *** Joins: jensnockert (jensnocker@moz-8F71B71C.mobileonline.telia.com)
[11:27:50] <doener> strange. Running rust --emit-llvm -S --passes "" -Z time-passes -o out.ll has the llvm passes take a lot longer when out.ll is already there
[11:27:54] *** Quits: jensnockert (jensnocker@moz-8F71B71C.mobileonline.telia.com) (Connection reset by peer)
[11:28:05] <doener> "a lot longer" == 2.6s vs 3.8s
[11:28:14] <doener> ... for librustc
[11:29:55] *** Quits: z0w0 (zack@moz-37A98529.lnse2.woo.bigpond.net.au) (Client exited)
[11:38:50] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[11:41:33] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:41:44] <pyrac> If every variant of an enum are struct with a field with the same name, is there a way to access it without a match? https://gist.github.com/osaut/d2e3dcca0592c3216dc1
[11:43:26] <ChrisMorgan> pyrac: the way that immediately occurs to me is having a getter function, which can be marked #[inline]
[11:43:32] *** Joins: bytbox (s@moz-DC83764A.washdc.fios.verizon.net)
[11:44:23] <pyrac> ChrisMorgan: thanks, I was trying to avoid it but having a getter is not so bad
[11:48:43] <doomlord> http://comments.gmane.org/gmane.comp.lang.rust.devel/4032 <<< SOlutioin here :)
[11:49:08] <doomlord> apparently rust callbacks with extern "C" are temporarily hacked into the type system a *u8
[11:49:25] <doomlord> declaring my C functions to rust takig *u8 works
[11:50:10] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[11:50:39] *** Joins: Blei (philipp@moz-1D7F398F.ethz.ch)
[11:50:51] *** Joins: xLII (xLII@2433BC90.F5F53E8A.2D6DB75E.IP)
[11:51:35] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[11:57:37] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[11:58:15] *** Quits: Aetherspawn_BNC (uid6924@moz-31ABA2C0.irccloud.com) (Input/output error)
[11:58:29] <dbaupp> pyrac: the other option is to factor out the common fields into a struct with an enum as one of the fields, i.e. `struct SpaceEntity { pos: float, type: SpaceEntityType } enum SpaceEntityType { SuperNova { brightness: float } }`
[11:59:07] <pyrac> dbaupp: many thanks, I'll try that
[12:00:48] *** Joins: olleharstedt (Thunderbir@moz-80D8890F.ias.bredband.telia.com)
[12:01:28] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[12:01:28] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/kY53Zw
[12:01:28] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[12:03:19] *** Quits: bytewise (bytewise@moz-649C630D.unitymediagroup.de) (Quit: Leaving)
[12:03:44] <Blei> hmm, no error on multiple symbols of the same name when glob-importing
[12:03:51] <Blei> that sounds like a bug
[12:04:26] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[12:04:26] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/vdsUzA
[12:04:26] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[12:04:29] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[12:04:29] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/ICU_8Q
[12:04:29] <ghrust> 13rust/06auto 148f119a3 15John Barker: Always eat up mut when parsing general args, fixes #7483
[12:04:29] <ghrust> 13rust/06auto 14a131cf9 15bors: auto merge of #7658 : excepttheweasel/rust/mut_default_param_list_issue_7483, r=huonw
[12:04:29] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[12:05:47] *** Quits: bytbox (s@moz-DC83764A.washdc.fios.verizon.net) (Ping timeout)
[12:09:01] <ChrisMorgan> Blei: are you using the symbol? I'd consider it quite reasonable not to complain until you actually try using one of them
[12:09:49] <Blei> ChrisMorgan: yes, I'm using it
[12:10:07] <Blei> and I agree to ignore conflicts on unused symbols
[12:10:19] <ChrisMorgan> OK, that sounds like a bug!
[12:10:26] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[12:11:23] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[12:12:48] *** Joins: CraigE (craige@moz-DF25A0FC.wi.res.rr.com)
[12:13:50] *** Joins: fabiand_ (fabiand@moz-EE35EF02.adsl.alicedsl.de)
[12:14:20] *** Quits: fabiand (fabiand@moz-EE35EF02.adsl.alicedsl.de) (Ping timeout)
[12:15:21] *** Joins: Aetherspawn_BNC (uid6924@moz-31ABA2C0.irccloud.com)
[12:18:33] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[12:22:47] *** Joins: fabiand (fabiand@moz-EE35EF02.adsl.alicedsl.de)
[12:23:16] *** Quits: doomlord (doomlod@moz-6651F8D4.range86-145.btcentralplus.com) (Ping timeout)
[12:24:36] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[12:32:34] *** Joins: bytbox (s@moz-DC83764A.washdc.fios.verizon.net)
[12:37:29] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[12:37:29] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14a131cf9 to 1462bb843: 02http://git.io/N3iJvQ
[12:37:29] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[12:37:30] *** Joins: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP)
[12:37:30] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/EgLoFw
[12:37:30] <ghrust> 13rust/06auto 14987a640 15Brian Anderson: rustc: Leak the LLVM module and context. #3552
[12:37:30] <ghrust> 13rust/06auto 141d27b24 15bors: auto merge of #7659 : brson/rust/leak-llvm, r=cmr...
[12:37:31] *** Parts: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP) ()
[12:39:24] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[12:40:19] *** Joins: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP)
[12:42:02] *** Quits: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au) (Ping timeout)
[12:42:14] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:42:38] *** Joins: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au)
[12:43:36] *** Quits: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au) (Quit: ChatZilla 0.9.90 [Firefox 23.0/20130703181823])
[12:47:26] *** Joins: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP)
[12:47:38] *** Joins: cr (anonymous@moz-4C21C3DA.dip0.t-ipconnect.de)
[12:54:58] *** Joins: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP)
[12:55:05] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[12:55:45] *** Quits: bytbox (s@moz-DC83764A.washdc.fios.verizon.net) (Ping timeout)
[12:58:15] *** Joins: claude (Mibbit@72FA058C.F6C9E260.1C941E77.IP)
[12:59:11] <pnkfelix|rcirc> doomlord_: your note reminded me that I need to try to look into my notes from Issue #1843 again
[13:00:59] *** Quits: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[13:01:08] *** Quits: RMF (RMF@moz-4C4EB011.dsl.telepac.pt) (Quit: Textual IRC Client: www.textualapp.com)
[13:06:08] *** Quits: mye (mye@moz-1D5EA24F.dip0.t-ipconnect.de) (Quit: mye)
[13:09:42] *** Quits: roo (jesse@moz-B7585E4C.dynamic.ip.windstream.net) (Ping timeout)
[13:14:46] <cmr> whu
[13:14:49] <cmr> rusti: Nil
[13:14:49] -rusti- <anon>:7:9: 7:12 error: unresolved name `Nil`.
[13:14:49] -rusti- <anon>:7          Nil
[13:14:49] -rusti-                   ^~~
[13:14:49] -rusti- error: aborting due to previous error
[13:14:50] -rusti- application terminated with error code 101
[13:14:57] <cmr> rusti: let Nil = (); Nil
[13:14:58] -rusti- ()
[13:15:21] *** Quits: xLII (xLII@2433BC90.F5F53E8A.2D6DB75E.IP) (Ping timeout)
[13:15:26] <cmr> curious, the vim highlighting marks Nil differently
[13:15:46] <mark_edward> I think Rust traits work way better in their static dispatch form than dynamically
[13:15:58] <mark_edward> like statically, trait inheritance seems to work.
[13:16:08] <mark_edward> it doesn't work with trait objects at all though
[13:16:09] <cmr> mark_edward: yes, this is a well-known fact :p
[13:16:27] <cmr> trait objects are broken in numerous ways
[13:16:36] *** Joins: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP)
[13:16:41] *** Parts: phrawzty (phrawzty@moz-D00E4D5F.rev.dedibox.fr) ()
[13:17:14] <mark_edward> yeah, the static stuff is great, but the main reason for me to want trait objects working right
[13:17:16] *** Quits: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP) (Client exited)
[13:17:26] <mark_edward> is to maintain a collection of ~[~Trait]
[13:18:28] <SiegeLord> I just hit an error instantiating a template in D due a type mismatch... made me miss+appreciate Rust's trait bounds :')
[13:18:39] <cmr> rusti: struct Foo<T> { c: ~[T] }; let x: Foo<ToStr> = Foo { c: ~[1, 2, 3] }; x
[13:18:41] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/LaYP
[13:18:45] <mark_edward> yeah, type bounds are pretty sweet!
[13:19:15] <cmr> ah right..
[13:20:01] <mark_edward> rusti: struct Foo<X, T: X> { c: ~[T] }; let x: Foo<ToStr,int> = Foo { c: ~[1, 2, 3] }; x
[13:20:03] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/FSOg
[13:20:27] <mark_edward> that'd be a pretty cool usage i think
[13:20:40] <mark_edward> i've seen rumblings about allowing trait bounds in struct definitions
[13:20:47] <mark_edward> cmr: what do you think about it?
[13:21:07] <cmr> mark_edward: http://www.haskell.org/haskellwiki/Data_declaration_with_constraint is the only thing I know about it
[13:21:30] <dbaupp> mark_edward: they aren't actually that useful, since you (most likely) still have to put the contraints whereever you use the function.
[13:21:43] <dbaupp> s/function/type in functions/
[13:21:49] *** Joins: bytbox (s@moz-DC83764A.washdc.fios.verizon.net)
[13:22:36] <dbaupp> (Rust might make it so that this isn't required, but this then breaks Rust's goal to only use "local" (within a function) reasoning to determine types/what's legal illegal.)
[13:23:01] <mark_edward> but  say i have container struct ContainerThatCopiesEverything; i'd be cool fi you could say struct Copier<T: Copy> at definiton time
[13:23:09] <mark_edward> as the struct makes no sense without it
[13:23:17] <dbaupp> rusti: struct Foo<T: Copy> { t: T }
[13:23:17] -rusti- <anon>:7:9: 7:37 error: trait bounds are not allowed in structure definitions
[13:23:17] -rusti- <anon>:7          struct Foo<T: Copy> { t: T }
[13:23:18] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
[13:23:18] -rusti- error: aborting due to previous error
[13:23:18] -rusti- application terminated with error code 101
[13:23:53] <Blei> hmm, imports are somewhat broken, it seems
[13:24:01] <cmr> glob imports you mean?
[13:24:03] <dbaupp> aatch|gone: ... you don't happen to be lying about your whereabouts do you?
[13:24:27] <Blei> generally
[13:24:28] *** Joins: Garmine (Garmine@moz-393B8FF0.pool.t-online.hu)
[13:24:35] <Garmine> Ohai!
[13:24:39] <Blei> not even duplicates for direct imports are found
[13:24:40] <Garmine> One quick question: why not D?
[13:24:53] <Blei> and you can export glob imports
[13:24:59] <cmr> Garmine: rust focuses more on safety and doesn't require GC
[13:25:04] <bjz_> Garmine: always on GC
[13:25:07] <SiegeLord> Garmine: GC, template errors, safety
[13:25:21] *** Joins: roo (jesse@moz-B7585E4C.dynamic.ip.windstream.net)
[13:25:25] <bjz_> Garmine: if you don't want GC in D you give up safety
[13:25:28] <Blei> which means that if a conflict occurs, a symbol of the ones that have the same name is exported from the .so
[13:25:43] <Blei> *a random symbol
[13:25:43] <bjz_> Garmine: with Rust you can have memory safety without a GC
[13:25:57] <dbaupp> Blei: actually random?
[13:26:03] <dbaupp> Blei: (i.e. it changes each run?)
[13:26:11] <Garmine> thanks!
[13:26:16] <Blei> dbaupp: i haven't looked at it in detail, but i think the "last" glob import wins
[13:26:28] <Blei> s/glob //
[13:26:37] <dbaupp> Blei: oh, that doesn't sound very random/surprising at all.
[13:26:47] <bjz_> Garmine: Rust has linear types (lifetimes) which allows you to prove the correctness of your program at compile time
[13:26:58] <cmr> (affine types actually, but close eonugh)
[13:27:00] <dbaupp> Blei: (the silently overwriting symbols thing is bad thogh.)
[13:27:05] <bjz_> cmr: oh, woops
[13:27:13] <dbaupp> bjz_: s/correctness/memory safety/
[13:27:15] <bjz_> Garmine: make that 'affine types'
[13:27:18] <Garmine> so D is like C in that case, isn't it? It looks type safe, but it isn't?
[13:27:25] <Blei> true, random might not have been a good description
[13:27:26] <bjz_> dbaupp: thanks!
[13:27:50] <bjz_> Garmine: D is safe if you use GC
[13:27:51] <cmr> Garmine: type safety != memory safety
[13:27:59] <SiegeLord> Garmine: D has a safe subset that you can opt into... but it's more limited than Rust's
[13:28:03] <SiegeLord> And Rust is safe by default
[13:28:18] <cmr> Garmine: D has much much better type safety than D
[13:28:20] <kimundi> In rust, you have to opt-in into unsafety
[13:28:27] <cmr> erm, than C
[13:28:33] <Blei> there are 3 ways to fix this: 1) keep the current system in place (i.e. ignore conflicts and hope the developers notice it themselves)
[13:28:38] <bjz_> Garmine: D also has the dreaded null, Rust does not have null
[13:28:59] * Garmine is not afraid of the null
[13:29:01] <Blei> 2) don't allow duplicate symbols, not even in glob imports (not acceptable imo. everything will break)
[13:29:07] <dbaupp> rusti: use foo::*; use baz::*; mod foo { fn bar() { println("foo"); } } mod baz { fn bar() { println("baz"); } } bar()
[13:29:08] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/WXGL
[13:29:22] <dbaupp> rusti: use self::foo::*; use self::baz::*; mod foo { fn bar() { println("foo"); } } mod baz { fn bar() { println("baz"); } } bar()
[13:29:24] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/cWAa
[13:29:28] <bjz_> Garmine: when you learn what freedom it is without it, you will see the light :D
[13:29:39] <bjz_> Garmine: Option ftw!
[13:29:44] <Garmine> :D
[13:29:49] <Blei> 3) don't allow the top module of a crate to export a glob import (very, very inconvenient)
[13:30:22] *** Joins: novabyte (Instantbir@moz-B4C485A7.mullvad.net)
[13:30:24] <dbaupp> Blei: it seems that 1 is the only think that'd be remotely workable.
[13:30:25] <bjz_> Garmine: think of it like this - we have an explicit null
[13:30:34] <Garmine> well I shall avoid GC a lot since I'm writing (or will write) a game and I'm open to new languages
[13:30:36] <bjz_> Garmine: that forces you to handle it
[13:30:50] <Blei> dbaupp: yeah, and it totally sucks. rust is supposed to be "safe" after all
[13:31:04] <kimundi> But only in situations where it makes sense to have a null
[13:31:17] <cmr> Garmine: then you can't use D's standard library at all
[13:31:20] <dbaupp> Blei: right, I could *easily* imagine a lint that warns about overlapping imports
[13:31:30] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[13:31:30] *** Joins: doomlord (doomlod@moz-6651F8D4.range86-145.btcentralplus.com)
[13:31:32] <dbaupp> Blei: (I can't easily imagine how it'd be implemented though.)
[13:31:32] <cmr> Garmine: Rust is very immature right now though. Lots of bugs and such.
[13:31:38] <bjz_> Garmine: why not Rust? (I'm guessing you'll ask) it's not finished, and D has far better template meta-programming
[13:31:51] <Garmine> haha, thanks bjz_ :)
[13:31:59] <SiegeLord> "better" is a matter of opinioned
[13:32:03] <SiegeLord> *opinion
[13:32:03] <Garmine> actually I just heard about rust today right before you mentoined it, bjz_ 
[13:32:04] <Blei> dbaupp: the problem is, you will have that everywhere. at least everywhere in libstd
[13:32:08] <bjz_> SiegeLord: agreed
[13:32:10] <dbaupp> Blei: hm?
[13:32:11] <SiegeLord> It's certainly more powerful
[13:32:23] <bjz_> SiegeLord: 'more powerful compile time code gen'
[13:32:29] <dbaupp> Blei: what do you mean?
[13:32:29] <Blei> dbaupp: libstd is full of overlapping imports
[13:32:30] *** Joins: tiffnya (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[13:32:36] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Connection reset by peer)
[13:32:40] <bjz_> SiegeLord: I think might be a better way of putting it
[13:32:49] <dbaupp> Blei: oh, well, it could be #[allow(overlapping_imports)]'d
[13:32:50] <doomlord> does d have tuples & arg destructuring like rust
[13:32:57] <ChrisMorgan> cmr: writing a proper indent file for Vim has led to me submitting a patch for Vim's runtime/indent/python.vim
[13:33:07] <cmr> ChrisMorgan: heh
[13:33:09] <Garmine> doomlord: as far as I've seen it has
[13:33:13] <cmr> You're awesome for doing this <3
[13:33:13] <bjz_> Garmine: but yeah, we have quite a few people working away on hobby game projects
[13:33:22] <Blei> dbaupp: true, but... ew
[13:33:35] <Blei> well, it would be no worse than the current situation
[13:33:37] <bjz_> Garmine: nobody reccomends Rust for production use though
[13:33:49] <Garmine> does rust have things such as OpenGL/CL/AL and some cross-platform libs like C's GLFW ?
[13:33:53] <ChrisMorgan> I found that a line `if True:  # TODO` wouldn't indent the next lineâ€”it stripped a trailing Comment, but missed it if the last char was part of a Todo instead.
[13:33:58] <kimundi> hehe
[13:34:05] <dbaupp> Blei: well, some indication of overlapping imports is better than none
[13:34:15] <cmr> Garmine: we have glfw bindings, gl bindings, cl bindings somewhere, dunno about al but we do have sdl
[13:34:31] <Garmine> thanks!
[13:34:37] <cmr> good gl bindings are blocked on PR 6661 one though
[13:34:39] <bjz_> Garmine: we have opengles - and i'll have a gl function loader once nmatsakis' patch makes it through
[13:34:58] <dbaupp> bjz_: I assume you've seen brson's objections to it?
[13:35:00] <bjz_> Garmine: I also have AL bindings, but they need to be updated
[13:35:17] <bjz_> Garmine: if you need them I can update them for you
[13:35:24] <Garmine> so I'll write rust on my list as "maybe"
[13:35:35] *** Quits: tiffnya (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Input/output error)
[13:35:35] <bjz_> Garmine: jensnockert is working on CL I think
[13:35:40] <Garmine> I don't know yet - I'll check out some other possibilities too
[13:35:42] *** Joins: tiffnya (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[13:35:47] <Garmine> but thanks! :)
[13:35:49] <bjz_> Garmine: sure, certainly no rush
[13:35:58] <dbaupp> Blei: and any other approach isn't very flexible. it's easy enough to just write `use foo::*; #[allow(overlapping_imports)] use bar::*;` if you've got one instance of it.
[13:36:06] <bjz_> Garmine: check out ATS, Idris and Nimrod
[13:36:14] *** Joins: dan_johnsin (dan_johnsi@6902762D.11B071D.FB9A45AF.IP)
[13:37:03] *** Joins: xLII (xLII@2433BC90.F5F53E8A.2D6DB75E.IP)
[13:37:31] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[13:37:31] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 141d27b24 to 1462bb843: 02http://git.io/N3iJvQ
[13:37:31] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[13:37:32] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[13:37:32] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/G-yTyA
[13:37:32] <ghrust> 13rust/06auto 14033ac54 15Felix S. Klock II: Fix #3225: Check for old Rust libraries when building and installing....
[13:37:32] <ghrust> 13rust/06auto 1425f51ee 15Felix S. Klock II: Fix #3225: Incorporate feedback from Graydon....
[13:37:33] <ghrust> 13rust/06auto 14ace4944 15Felix S. Klock II: Fix #3225: Incorporate feedback from Graydon....
[13:37:35] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[13:37:59] <bjz_> pnkfelix|rcirc: woah^!
[13:38:05] <bjz_> awesome
[13:38:19] <bjz_> dbaupp: what were the objections?
[13:38:30] <SiegeLord> bjz_: Do you know where the CL repo is?
[13:39:01] <dbaupp> bjz_: something about making functions have huge stacks/hold onto huge stacks for too long
[13:39:07] <bjz_> SiegeLord: I doubt jensnockert has published it yet - i think there are other attempts too
[13:39:08] <dbaupp> bjz_: (I'm not exactly sure.)
[13:39:09] <SiegeLord> Ah, there it is... I found it
[13:39:18] <SiegeLord> https://github.com/jensnockert/cl.rs
[13:39:24] <bjz_> SiegeLord: ahh nice
[13:39:35] <bjz_> SiegeLord: I think it's still a wip
[13:39:39] <dbaupp> bjz_: https://github.com/mozilla/rust/pull/6661#issuecomment-20240333
[13:39:45] <SiegeLord> I'm sure
[13:39:58] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[13:41:45] *** Quits: olleharstedt (Thunderbir@moz-80D8890F.ias.bredband.telia.com) (Ping timeout)
[13:42:12] <mark_edward> ATS is a bit hard for me to figure out
[13:42:19] *** Quits: mreedell (mreedell@moz-9950CA28.hsd1.pa.comcast.net) (Quit: Textual IRC Client: http://www.textualapp.com/)
[13:42:50] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:43:32] <bjz_> mark_edward: yeah, it hurts my brain
[13:43:37] *** Joins: mreedell (mreedell@moz-9950CA28.hsd1.pa.comcast.net)
[13:43:46] <pnkfelix|rcirc> bjz_: yeah lets hope bors lets it through.
[13:43:47] <mark_edward> nimrod is nice, but i don't like the GC
[13:43:52] <bjz_> mark_edward: but folks say that about rust, so I don't want to judge
[13:44:18] <mark_edward> true, but rust is easy to get. i was looking at it and nimrod around the same time
[13:45:21] <bjz_> Garmine: http://c2.com/cgi/wiki?QuestForThePerfectLanguage
[13:45:26] <bjz_> Garmine: :D
[13:46:05] <bjz_> mark_edward: yeah, I think it's more approachable than ATS, but I'm sure ATS has a huge amount of power
[13:46:30] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[13:46:32] <mark_edward> besides
[13:46:36] <mark_edward> i do like C++
[13:46:41] <Blei> dbaupp: heh, about your rusti fails above: https://github.com/mozilla/rust/issues/4865
[13:46:52] *** Quits: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com) (Connection reset by peer)
[13:47:04] <mark_edward> although i acknowledge it's faults. Rust seems like the best language out there to me
[13:47:10] *** Joins: reyre (reyre@86C3727C.33EE9F8A.1139E686.IP)
[13:47:16] <Blei> just ran into this myself when trying to test cross-crate glob pub uses
[13:47:47] *** Joins: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP)
[13:48:09] *** Joins: Sergio965 (sergiobz@moz-BB21156B.dynamic.csail.mit.edu)
[13:48:11] <dbaupp> Blei: are you sure? I thought it was because use is unable to resolve a mod inside a fn (but that is a guess)
[13:49:01] <Blei> ah, that might indeed be the case.
[13:51:11] *** Joins: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com)
[13:52:38] *** Quits: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Bye!)
[13:52:44] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[13:54:34] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[13:59:05] *** Joins: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP)
[14:00:35] <bjz> Jeaye: ping
[14:00:49] *** Quits: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP) (Quit: Leaving.)
[14:00:51] <ChrisMorgan> cmr: I've got the &'static [T] case working properly, so that the second line is indented as it should be :-)
[14:03:11] <Garmine> bjz: lol :D I'll use FORTH then. It has CLIT!
[14:03:26] <bjz> Garmine: FORTH ftw
[14:04:26] <Garmine> indeed :D
[14:05:07] <Garmine> howevever I'm not sure if it'd be easy to write cross platform "even the dumbest can run" applications in it lol
[14:05:10] <ChrisMorgan> And for some reason I can't reproduce the `match` indentation problem, before or after :-/
[14:05:41] <Garmine> (not to mentoin OpenGL/CL/AL with FORTH)
[14:05:53] *** Quits: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP) (Quit: Lost terminal)
[14:06:26] *** Quits: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP) (Client exited)
[14:07:21] * Garmine OFF
[14:07:22] <Garmine> bye!
[14:07:26] <Garmine> and thanks :)
[14:07:27] *** Quits: Garmine (Garmine@moz-393B8FF0.pool.t-online.hu) (Quit: leaving)
[14:08:23] *** Joins: lmandel (lmandel@F2D29657.F60B0462.67AC9B1.IP)
[14:11:08] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[14:12:51] *** Quits: brianm (brianm@moz-D74EBD8D.hsd1.co.comcast.net) (Quit: Linkinus - http://linkinus.com)
[14:15:33] *** Quits: claude (Mibbit@72FA058C.F6C9E260.1C941E77.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:17:07] *** Joins: mib_furyjv (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[14:18:12] *** Quits: mreedell (mreedell@moz-9950CA28.hsd1.pa.comcast.net) (Quit: Computer has gone to sleep.)
[14:18:14] *** Joins: bent (chatzilla@F2D29657.F60B0462.67AC9B1.IP)
[14:19:48] *** Quits: smvv_ (sander@moz-BAEA8EB2.dynamic.upc.nl) (Ping timeout)
[14:21:14] <dbaupp> cmr: has the bencher been busy keeping up with bors?
[14:21:21] <cmr> dbaupp: yeah
[14:21:29] <cmr> bors had a streak where he actually did his job
[14:21:44] <cmr> we're in mid-may last I checked
[14:22:32] <cmr> Switching back and forth from the past and present is more expensive now, since the LLVM versions are separate
[14:22:46] <cmr> ccache helps a lot but it still takes tim
[14:22:48] <cmr> *time
[14:23:50] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[14:24:09] <dbaupp> yeah, I'd assumed that would be a problem
[14:24:32] <cmr> I could/should probably use a separate build dir for the time machine
[14:25:05] <dbaupp> yeah
[14:25:08] <dbaupp> that'd solve it.
[14:25:25] <ChrisMorgan> cmr: there, now I can reproduce it again. That worries me slightly...
[14:25:48] <cmr> ChrisMorgan: also easy to reproduce with struct construction
[14:25:51] <ChrisMorgan> Anyway, I've got static vectors sorted properly.
[14:26:11] <cmr> similar symptom, probably not same problem
[14:26:31] <ChrisMorgan> cmr: it simply wasn't doing it for a while, though I'm fairly sure (walking through the code step by step) that I hadn't accidentally fixed it.
[14:26:45] <mark_edward> hey guys, i made a reddit post, and i hope you all have something to wrt ideas/suggestions/critcism/bilious hatred about my ideas
[14:26:48] <ChrisMorgan> Yes, same problem.
[14:26:50] <mark_edward> reddit.com/r/rust/comments/1hxp2s/little_bzip2_binding_library_as_well_as_a_bigger/
[14:27:13] <dbaupp> gah, mismatched types: expected `@fn:'
[14:27:13] <dbaupp> static(&syntax::codemap::spanned<syntax::ast::local_>, (@mut middle::borrowck::gather_loans::GatherLoanCtxt<>,syntax::
[14:27:13] <dbaupp> visit::vt<@mut middle::borrowck::gather_loans::GatherLoanCtxt<>>))` but found `extern "Rust" fn(@syntax::codemap::span
[14:27:13] <dbaupp> ned<syntax::ast::local_>, (@mut middle::borrowck::gather_loans::GatherLoanCtxt<'r>,syntax::visit::vt<@mut middle::borrowck::gather_loans::GatherLoanCtxt<'r>>))` (expected &-ptr but found @-ptr)
[14:27:40] <mark_edward> oops: broke link http://www.reddit.com/r/rust/comments/1hxp2s/little_bzip2_binding_library_as_well_as_a_bigger/
[14:27:52] <cmr> dbaupp: hm, it seems the time machine is stuck
[14:27:54] <cmr> /home/cmr/rust/src/libstd/rt/mod.rs:62:8: 62:19 error: error opening /home/cmr/rust/src/libstd/rt/global_heap.rs
[14:27:56] <cmr> /home/cmr/rust/src/libstd/rt/mod.rs:62 pub mod global_heap;
[14:27:58] <cmr>                                                ^~~~~~~~~~~
[14:28:02] <cmr> getting that on all the recent builds
[14:28:08] * cmr resets it
[14:28:10] <dbaupp> cmr: :(
[14:30:05] <cmr> time machine rewound to current master, step=1
[14:30:20] <dbaupp> cmr: ok
[14:31:18] * dbaupp will be interested to see what explodes
[14:32:39] *** Joins: jeff (jeff@moz-F81F6C4E.nyc.biz.rr.com)
[14:34:14] *** Joins: vk (vk@moz-389FEE13.hsd1.ca.comcast.net)
[14:35:39] *** Quits: vk (vk@moz-389FEE13.hsd1.ca.comcast.net) (Quit: vk)
[14:38:56] <mark_edward> does Rust have a theme song?
[14:39:11] <cmr> no but we have a mascot: http://www.youtube.com/watch?v=SRH-Ywpz1_I
[14:39:22] <cmr> (kidding, obviously)
[14:40:06] *** Joins: mreid (mreid@moz-5F4A70CA.yipyip.com)
[14:40:33] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[14:40:40] <mark_edward> how about Power, from Kanye West?
[14:42:03] *** Quits: Blei (philipp@moz-1D7F398F.ethz.ch) (Quit: WeeChat 0.4.1)
[14:42:24] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:43:05] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[14:46:58] <dbaupp> It looks a lot like bors' queue is empty.
[14:47:07] * dbaupp can barely believe it
[14:47:16] <cmr> yeah but look at all the red
[14:47:30] *** Quits: fabiand_ (fabiand@moz-EE35EF02.adsl.alicedsl.de) (Quit: Verlassend)
[14:48:23] * dbaupp doesn't look
[14:51:45] <doomlord> rust has a cool logo
[14:52:08] <cmr> and check out the shirts! http://www.flickr.com/photos/lindseykuper/9183991477/
[14:52:12] <mark_edward> i do like it
[14:52:40] <mark_edward> we should have a heavy metal band. Rust is a great name for such a band
[14:52:56] <mark_edward> their songs play once main() is called
[14:53:41] <dbaupp> mark_edward: http://en.wikipedia.org/wiki/RUST_%28band%29
[14:54:05] <mark_edward> they disbanded! The band name is up for grabs!
[14:55:03] <dbaupp> it could have albums with names like "Pre-alpha" and "INHTW...A"
[14:55:37] <mark_edward> it'd be wonderful!
[14:55:53] <mark_edward> The hit single would be called *ICE*
[14:55:56] *** Joins: nano (nano@moz-972880B.superkabel.de)
[14:55:57] <mark_edward> I can see it now!
[14:56:34] *** Joins: sankha93 (Instantbir@F43B6114.922BE1F.EFB84E89.IP)
[14:58:15] <bstrie> < dbaupp> Luqman: because bstrie loves getters/setters so much
[14:58:30] <bstrie> dbaupp: I'm going to make a #[dbaupp] syntax extension that formats the current drive as FAT32
[14:58:57] <cmr> nice!
[14:59:03] <cmr> fdisk would just be #[dbaupp] fn main() {}
[14:59:08] <dbaupp> bstrie: that'd be quite useful
[14:59:40] <bstrie> dbaupp: also, it converts all strings in the file to EBCDIC
[14:59:40] * dbaupp often tries to format his /home partition as FAT32 
[14:59:56] <dbaupp> bstrie: too far
[14:59:58] *** Joins: MaikKlein (maik@moz-292B05D.dip0.t-ipconnect.de)
[15:00:04] *** Joins: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP)
[15:00:21] <dbaupp> (does anything even understand EBCDIC anymore?)
[15:00:33] <bstrie> dbaupp: I use it every day :P
[15:00:38] <bstrie> wait not :P
[15:00:40] <bstrie> I mean ;_;
[15:00:49] <dbaupp> hahaha
[15:00:50] <sigma> IBM machines? ^^
[15:01:12] <bstrie> sigma: indeed
[15:01:21] <bstrie> though usually I don't have to think about the encoding
[15:01:27] <bstrie> but it's very often a huge pita
[15:01:37] <cmr> Is there a way to match multiple variants that have the same structure and destructure them at once? So for example I'm matching on ast::ty_, I want to do the same thing for ty_box, ty_uniq, and ty_ptr
[15:01:41] <cmr> they're all just var(mt)
[15:01:53] <dbaupp> rusti: fn foo<C: Clone>(_: C) {} let mut x = 1; let y = &mut x; foo(&y)
[15:01:54] -rusti- ()
[15:02:03] <dbaupp> (it works! \o/)
[15:02:21] <bstrie> cmr: could use a macro
[15:02:23] <dbaupp> cmr: ty_box(..) | ty_uniq(..) | ty_ptr(..) => 
[15:02:36] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[15:02:40] <dbaupp> cmr: (if you bind things with the same type to the same name, it Just Works.)
[15:03:30] <dbaupp> rusti: enum Foo { A(int), B(int) } match A(1) { A(i) | B(i) => i + 1 }
[15:03:31] -rusti- 2
[15:03:37] <dbaupp> rusti: enum Foo { A(int), B(int) } match B(1) { A(i) | B(i) => i + 1 }
[15:03:38] -rusti- 2
[15:04:21] *** Joins: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP)
[15:05:23] *** Quits: jaen (jaen@moz-4D3C9F5C.neoplus.adsl.tpnet.pl) (Ping timeout)
[15:05:33] *** Quits: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP) (Client exited)
[15:05:58] *** Quits: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[15:07:02] *** Quits: MaikKlein (maik@moz-292B05D.dip0.t-ipconnect.de) (Ping timeout)
[15:09:27] <cmr> Right, I was just hoping to avoid the repreated (..)
[15:09:34] <cmr> figured that was what I was going to have to do
[15:10:02] <ChrisMorgan> setlocal cinwords=trait,fn,impl,struct,enum,match
[15:10:04] <ChrisMorgan> Did I miss any?
[15:10:24] <ChrisMorgan> cmr: I've got the indent all working properly now, to the best of my knowledge
[15:10:24] <cmr> mod?
[15:13:03] *** Joins: brianm (brianm@moz-D74EBD8D.hsd1.co.comcast.net)
[15:13:08] <ChrisMorgan> Actually, is it possible for any of those to be used without { after them?
[15:13:32] <cmr> mod can, struct can, enum can't
[15:14:01] <cmr> struct Foo; struct Bar(uint);
[15:14:26] *** Quits: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net) (Quit: echristo)
[15:14:55] <ChrisMorgan> And in each case, it won't be being done on another line anyway.
[15:15:04] <cmr> likely not
[15:15:22] <ChrisMorgan> Yeah, I don't think cinwords will do anything at all, actually.
[15:15:31] *** Joins: eholk (eholk@moz-511062AD.uconnect.utah.edu)
[15:17:21] <ChrisMorgan> Well, I'll leave setlocal cinwords=do,for,if,else,while,loop,impl,mod,unsafe,trait,struct,enum,fn in for the fun of it.
[15:17:52] <cmr> extern too, right?
[15:17:53] <ChrisMorgan> Oh, I must change the Last Change from 2013 Jul 9 to 2013 Jul 10 now ;-)
[15:18:00] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[15:18:10] <cmr> oh, and fn doesn't need {, in traits and extern
[15:19:01] <ChrisMorgan> Yeah, I thought of that.
[15:19:10] <ChrisMorgan> Extern can be a block, can it?
[15:19:25] <cmr> yes
[15:24:36] *** Joins: Guest (textual@34641662.FB4DE631.66C78B76.IP)
[15:25:44] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Ping timeout)
[15:25:45] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[15:26:58] *** Quits: tiffnya (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Connection reset by peer)
[15:27:13] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[15:27:31] *** Joins: Blub\0 (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[15:27:35] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Ping timeout)
[15:28:21] *** Joins: MaikKlein (maik@moz-292B05D.dip0.t-ipconnect.de)
[15:28:37] *** Quits: dolphinling (andrew@moz-80A1E448.uvm.edu) (Ping timeout)
[15:28:42] *** Joins: rajul (quassel@9DE35E97.64852AAB.25B273F5.IP)
[15:30:14] *** Quits: Blub\0 (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Ping timeout)
[15:30:17] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Connection reset by peer)
[15:30:24] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[15:30:39] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[15:30:51] *** Joins: Blub\0 (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[15:31:48] *** Joins: dolphinling (andrew@moz-80A1E448.uvm.edu)
[15:32:32] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[15:33:39] <MaikKlein> is anyone working on an actor lib?
[15:34:28] <cmr> I thought you were :p
[15:34:38] <bstrie> MaikKlein: we *all* thought you were :|
[15:34:42] <bstrie> how's it coming along?
[15:35:09] <MaikKlein> haha, its 30 lines :(
[15:35:28] <bstrie> MaikKlein: awesome, proof that rust really is a very concise languge
[15:36:01] <MaikKlein> but when I am in my semester holidays, I am gonna do so many awesome things in rust
[15:36:28] <MaikKlein> bstrie, is rust ready to do this? I was also looking a zeromq
[15:36:37] <doomlord> probably an exageration, but once i read certain languages dont get widespread library support because they're so good at expressing custom solutions...
[15:36:40] <MaikKlein> for messaging
[15:37:07] <cmr> doomlord: lisp is the classical exmaple of that
[15:37:12] <cmr> I think pg wrote an essay about it?
[15:37:24] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[15:37:26] <ChrisMorgan> r? https://github.com/mozilla/rust/pull/7665
[15:37:33] <ChrisMorgan> Especially cmr :-)
[15:38:35] <ChrisMorgan> And only Vim users are eligible to review this one. *lofty glance*
[15:39:23] <engla> does it fix indentation of #[..] lines?
[15:39:54] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[15:40:10] <ChrisMorgan> engla: yes
[15:40:16] <engla> great
[15:40:39] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[15:41:03] <MaikKlein> cmr, are you making progress in rustdoc?
[15:41:08] <cmr> MaikKlein: yes
[15:42:31] <ChrisMorgan> That was actually a case where Vim's docs are *wrong*. indent.txt: "Vim puts a line in column 1 if:" "- It starts with '#' (preprocessor directives), if 'cinkeys' contains '#'." Actually, if 'autoindent' is on and 'indentkeys' contains '#' it puts it into column 1 as well.
[15:44:18] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[15:44:43] <MaikKlein> cmr, awesome, looks good so far. 
[15:45:24] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Ping timeout)
[15:46:36] *** Quits: eholk (eholk@moz-511062AD.uconnect.utah.edu) (Quit: eholk)
[15:47:32] *** Quits: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP) (Ping timeout)
[15:47:50] <MaikKlein> cmr, this is exactly what I needed <333.
[15:48:10] <MaikKlein> cmr, now auto completion should be fairly easy with your work :)
[15:48:29] <cmr> MaikKlein: not so sure about that actually
[15:48:51] <cmr> this is the easy part, you still need to walk through function bodies and figure out what is what
[15:49:00] <jensnockert> Doesn't make check run the document tests?
[15:49:07] <cmr> jensnockert: it should
[15:49:24] <jensnockert> cmr: Weird, make check passed on my computer, but not for BORS.
[15:49:36] <jensnockert> Oh well, I'll just run them and fix the issues.
[15:50:09] <cmr> if they don't, it's definitely a bug
[15:50:18] *** Joins: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP)
[15:50:28] *** Joins: rajul_ (quassel@2E34FE1E.80E8C671.13EFE003.IP)
[15:50:30] <jensnockert> Can also be cruft laying around from all my previous versions of Rust.
[15:51:23] *** Joins: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP)
[15:51:28] *** Quits: rajul (quassel@9DE35E97.64852AAB.25B273F5.IP) (Ping timeout)
[15:51:39] *** Quits: rajul_ (quassel@2E34FE1E.80E8C671.13EFE003.IP) (Connection reset by peer)
[15:53:16] <doomlord> does/could rusti have much in the way of source navigation help .. (ask it for a function, it tells you where matches are.. or ability to walk trait graph ..)
[15:53:37] <cmr> doomlord: rusti-the-bot or rusti-the-program?
[15:53:48] <doomlord> rusti the program.
[15:53:57] *** Joins: eholk (eholk@moz-511062AD.uconnect.utah.edu)
[15:54:01] <MaikKlein> cmr,  I though I do it like that, lets say your program looks like that "struct Foo { fn print(); } .... let a = Foo; a. Now I can ask rustc like "rustc gettype in hello.rs from variable a" ..... ah **** ok :X the variable a can be found several times in the file. 
[15:54:06] <cmr> probably would be best as a separate tool
[15:54:10] <doomlord> a repl gives me nostalgic feelings of 8bit childhood
[15:54:20] <MaikKlein> maybe I have to specify he line number or sth like that
[15:54:46] <MaikKlein> I need to do some brainstorming I guess
[15:54:48] <cmr> MaikKlein: plus you have to have a validly compiling program, to do real parse and stuff
[15:54:50] <doomlord> i still haven't looked at libsyntax myself
[15:55:00] <ChrisMorgan> doomlord: like Python with its rlcompleter module, which will complete methods and attributes
[15:55:01] *** Quits: pyrac (pyrac@moz-88F57AAB.math.u-bordeaux1.fr) (Ping timeout)
[15:55:02] *** Joins: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP)
[15:55:17] *** Quits: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP) (Client exited)
[15:55:22] <ChrisMorgan> I think such a thing fits in very well with the idea of rusti.
[15:55:47] <doomlord> right.. the possibility of such tools for a native lanuage is intruiguing
[15:56:00] *** Joins: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP)
[15:56:26] <MaikKlein> cmr, right hm, this won't be easy.
[15:56:41] <cmr> MaikKlein: I know :p
[15:56:41] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[15:56:51] <MaikKlein> maybe I need to parse the file partially
[15:56:58] *** Joins: pnkfelix1 (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[15:57:03] <cmr> It's easy to be able to interrogate an already-valid/compiled crate for its types and such
[15:57:20] *** Joins: pnkfelix2 (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[15:57:31] <MaikKlein> I think I need to extract code that doesn't parse
[15:57:34] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[15:57:45] *** Quits: pnkfelix1 (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Connection reset by peer)
[15:57:47] *** pnkfelix2 is now known as pnkfelix
[15:57:54] <cmr> or just pull out the "shape" of code (not using libsyntax) and compiling that
[15:57:57] <MaikKlein> I think I read though some papers about auto completion
[15:58:25] <ChrisMorgan> Well, that's enough Vimscript for the moment. It delayed my going to bed by a couple of hours... :-)
[15:58:46] <MaikKlein> cmr, so you mean I should do my own parsing?
[15:59:00] <doomlord> maybe i'll just get better and better with grep, sed etc :)
[15:59:58] <doomlord> after years of mental atrophy with microsoft IDE's
[16:00:33] <cmr> MaikKlein: not proper parsing, just extracting out struct/fn definitions etc
[16:00:44] <cmr> and feeding that into libsyntax
[16:00:48] *** Joins: kmc (keegan@moz-D2A53639.compute-1.amazonaws.com)
[16:01:07] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[16:01:39] *** Quits: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP) (Client exited)
[16:01:53] <MaikKlein> right
[16:02:10] <MaikKlein> I think I start fairly simple and see how it goes. 
[16:02:12] <cmr> yup
[16:04:36] <doomlord> thinking out loud.. a program like blender uses c core with python extentions (interpreted)- is rusts syntax sufficiently friendly/versatile that one could use an interpreted subset of rust as its own scripting language
[16:05:05] <cmr> doomlord: maybe
[16:05:07] <kmc> not sure you'd want to; Rust is a low-level systems language
[16:05:35] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[16:05:35] *** ChanServ sets mode: +o dherman
[16:05:40] <doomlord> type inference vs dynamic typing , hmm..
[16:05:42] <kmc> if you're talking about an interpreted language for scripting you'd probably want full garbage collection, a simpler type system, etc
[16:05:46] <cmr> remove all the pointer types, make everything a GC'd reference
[16:06:24] <jensnockert> cmr: There was an even easier solution to the did-not-test-docs problem, I just committed the changes under src. And I had done my magic regexp magic on the doc dir as well, so it passed on my machine, but since Bors never received the modifications, it didn't pass.
[16:06:43] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[16:06:43] *** ChanServ sets mode: +o brson
[16:08:03] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[16:08:06] <cmr> doomlord: dbaupp, bjz, and aatch were working on https://github.com/bjz/rusp
[16:08:17] <cmr> a rusty lisp
[16:08:27] <cmr> lisp-ish, that is
[16:09:10] <etw> that's cool, I'm doing something similar as a sort of personal project
[16:09:20] <cmr> doomlord: rust does have a JIT backend, that's how rusti works
[16:09:50] <bjz> me and aatch started thinking of moving more towards a REBOL-style meta language
[16:09:52] <etw> I will use this
[16:10:03] <cmr> doomlord: are you thinking like AngelScript is for C++?
[16:10:17] <roo> I always though mixing metaphors like that would be bad. Now you have to keep track of two very similar languages within a single project... (maybe something like bootstrapping?)
[16:10:19] <doomlord> i;ve not encountered that, i will google, maybe?
[16:10:34] <kmc> the LLVM JIT is not anything like a nice scripting language JIT, though
[16:10:36] <cmr> http://www.angelcode.com/angelscript/
[16:10:45] <kmc> it's not gonna give you that V8 / LuaJIT performance for sure
[16:11:00] *** Joins: Ms2ger (Ms2ger@moz-E9883900.access.telenet.be)
[16:11:20] <bjz> kmc: aatch|gone seems to think it can be done, if you plan for it
[16:11:35] <cmr> I think lua fills the scripting-language niche perfectly, I'm personally not that interested in alternatives
[16:11:41] <bjz> kmc: well, not that level of performance
[16:11:58] <roo> cmr: I agree
[16:12:20] <kmc> i don't think any existing scripting language is "perfect" but there are so many of them and I really can't get worked up about the differences between them
[16:12:21] <doomlord> right thats what i have in mind
[16:12:32] <kmc> I like Rust because there's hardly any other language like it :)
[16:13:03] <jensnockert> I try to think of Rust as a less cruddy Fortran.
[16:13:09] <bjz> x)
[16:13:21] *** Quits: bytbox (s@moz-DC83764A.washdc.fios.verizon.net) (Ping timeout)
[16:13:26] *** Joins: tjc (tjc@2557E599.66715431.D25A875A.IP)
[16:13:26] *** ChanServ sets mode: +o tjc
[16:13:29] <doomlord> rust is just the answer to all my ranting
[16:13:38] <roo> I think of rust like a pirate with a lazer pistol, but thats not really on topic i guess
[16:13:57] *** Quits: jeff (jeff@moz-F81F6C4E.nyc.biz.rr.com) (Quit: jeff)
[16:14:04] <jensnockert> roo: Depends, does the pirate have a lazer cutlass as well?
[16:14:24] <roo> sure
[16:14:28] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[16:15:46] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[16:16:36] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Input/output error)
[16:17:30] <jensnockert> roo: Awesome.
[16:17:56] *** Quits: dbaupp (Thunderbir@moz-712A1135.lns20.syd6.internode.on.net) (Ping timeout)
[16:18:23] *** Joins: Kruppe (user@moz-4DDA8AB8.uwaterloo.ca)
[16:18:31] <MaikKlein> rust is like a thorium based reactor
[16:18:53] <MaikKlein> safe efficient and waste free :p
[16:18:55] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[16:18:56] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[16:20:05] <doomlord> r.e. rusp, i like the idea of using s-expresions with clojure's extra {maps} and [vectors] as a human readable data format (much like json).. ultra minimal
[16:20:20] <bstrie> MaikKlein: and never ready for actual use ;_;
[16:20:27] <MaikKlein> T_T
[16:20:34] <roo> :(
[16:21:11] <cmr> Can anyone tell my what a ty_path is?
[16:21:36] <bstrie> cmr: possible a fully-qualified thing like foo::bar::baz?
[16:21:48] *** Joins: ecr1 (Thunderbir@2557E599.66715431.D25A875A.IP)
[16:22:20] *** Joins: echristo (echristo@D423593A.D6CCE4AE.77834EAA.IP)
[16:22:48] <cmr> bstrie: That's consistent with my obersvations. it seems to be a path to any other type... but I don't see structs/enums in the type system at all, so I'm a bit confused by that.
[16:23:02] *** Joins: RMF (RMF@moz-4C4EB011.dsl.telepac.pt)
[16:23:50] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Connection reset by peer)
[16:23:57] *** Quits: Kroisse (Kroisse@7CF4064D.E3B51CAE.ECA1BB11.IP) (Ping timeout)
[16:23:57] <bjz> doomlord: that was the idea :)
[16:24:16] <doomlord> cool
[16:24:33] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[16:24:38] *** Quits: klutzy (th@BA61F396.8E859986.ECA1BB11.IP) (Ping timeout)
[16:24:56] <bstrie> bjz: is rusp : rust as clojure : java ?
[16:25:16] <bstrie> or is it like lua : c
[16:25:20] <bjz> not at all
[16:25:29] <bjz> it's like lua
[16:25:40] *** Joins: klutzy (th@BA61F396.8E859986.ECA1BB11.IP)
[16:25:55] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[16:25:57] <doomlord> or guile?
[16:26:38] <bjz> doomlord: ya
[16:27:22] *** Joins: Kroisse (Kroisse@7CF4064D.E3B51CAE.ECA1BB11.IP)
[16:27:22] <MaikKlein> hm can we use rusp in rust itself?
[16:27:28] <bjz> aatch|gone was going to use llvm's jit for it. unfortunately I got distracted getting interested in rebol
[16:27:42] *** Quits: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP) (Ping timeout)
[16:28:17] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[16:28:36] * bjz is thinking he might just un-private it
[16:29:04] *** Quits: ecr1 (Thunderbir@2557E599.66715431.D25A875A.IP) (Quit: ecr1)
[16:29:08] *** Joins: ecr1 (Thunderbir@2557E599.66715431.D25A875A.IP)
[16:32:15] *** Quits: mib_furyjv (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:32:38] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Broken pipe)
[16:33:25] *** Quits: reyre (reyre@86C3727C.33EE9F8A.1139E686.IP) (Ping timeout)
[16:33:26] *** Joins: reyre (reyre@moz-2E2F18CB.senecacollege.ca)
[16:33:53] *** ecr1 is now known as hello
[16:34:02] *** hello is now known as ecr1
[16:34:51] *** Quits: etw (john@moz-B2936CAB.nyc.res.rr.com) (Quit: etw)
[16:35:01] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[16:36:08] <MaikKlein> indeed. rusp seems like a great idea 
[16:37:14] *** Joins: Blei (philipp@moz-650B9C6A.cust.bluewin.ch)
[16:37:51] *** ecr1 is now known as _ecr
[16:38:13] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[16:39:05] *** Quits: reyre (reyre@moz-2E2F18CB.senecacollege.ca) (Client exited)
[16:39:22] *** Quits: MaikKlein (maik@moz-292B05D.dip0.t-ipconnect.de) (Ping timeout)
[16:40:52] *** _ecr is now known as ecr1
[16:41:29] *** Quits: relistan (relistan@A7E4EF66.4C1F25E9.4BA0249.IP) (Quit: relistan)
[16:41:44] *** Joins: MaikKlein (maik@moz-292B05D.dip0.t-ipconnect.de)
[16:42:21] *** Quits: ecr1 (Thunderbir@2557E599.66715431.D25A875A.IP) (Quit: ecr1)
[16:42:24] *** Joins: ecr1 (Thunderbir@2557E599.66715431.D25A875A.IP)
[16:42:26] *** Quits: ecr1 (Thunderbir@2557E599.66715431.D25A875A.IP) (Quit: ecr1)
[16:42:40] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[16:43:01] *** Joins: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP)
[16:43:45] *** Joins: jdm (jdm@F2D29657.F60B0462.67AC9B1.IP)
[16:44:02] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[16:44:35] *** Quits: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com) (Input/output error)
[16:47:41] <mark_edward> &'mut guarantees that it can't be aliased right? so no one else can change the value out from under you?
[16:49:01] *** Quits: MaikKlein (maik@moz-292B05D.dip0.t-ipconnect.de) (Ping timeout)
[16:49:09] <cmr> mark_edward: correct
[16:49:21] <mark_edward> are you cmrx64 on reddit?
[16:49:24] <cmr> yes
[16:49:28] <bstrie> what word would you use to describe a rust macro, to emphasize that it is not a textual macro
[16:49:28] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[16:49:35] <bstrie> like, "syntactic macro"?
[16:49:37] <cmr> bstrie: procedural macro?
[16:49:43] <mark_edward> did you see my response, does it make sense?
[16:49:49] <cmr> I've seen th e term macro-by-example bandied about
[16:49:51] <cmr> mark_edward: not yet
[16:50:23] <jclements> bstrie: I use "non-textual", but I understand that's somewhat insufficient. Usually I just fly into a rage and shout at the person until they go away :).
[16:50:27] <bstrie> haha
[16:50:28] <mark_edward> okay. well i'm trying to explain that if you have a reference returned by the iterator, and have the iterator iterate again (still holding that reference)
[16:50:41] <bstrie> jclements: well I'm updating a comment in an example in a wikipedia article
[16:50:52] <bstrie> would like something short and self-explanatory
[16:50:53] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[16:51:00] <mark_edward> the contents of the first change  from under you, as i'm only using one buffer to store the results of decompression in order to avoid allocations
[16:51:02] <jclements> bstrie: structural macro?
[16:51:07] <mark_edward> *first refernce
[16:51:19] <bstrie> jclements: that's good enough
[16:51:36] * jensnockert hugs cmr.
[16:51:38] <cmr> mark_edward: the borrow checker won't allow that.
[16:51:45] <cmr> jensnockert: :p
[16:51:58] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[16:52:05] <mark_edward> it did. that's exactly what my code did. it's unsafe code, so it's allowed.
[16:52:10] <mark_edward> cmr: see herre https://github.com/MarkJr94/bzip2rs/commit/087e50f7c6446da94b234af913020a95597e0763
[16:53:16] <kimundi> bstrie: token-based macro?
[16:53:17] <cmr> mark_edward: then it's incorrect
[16:53:20] <bjz> jclements: hehy, I thought macros were bad
[16:53:39] <cmr> safe code never goes wrong, that's a guarantee you need to make when you create a safe interface
[16:53:52] <jclements> kimundi: it's not just token-based. Our system respects the structure of the AST
[16:54:09] <kimundi> well, token in - ast out then :P
[16:54:22] * bjz awaits jclements' wrath
[16:54:32] <kimundi> but wasn't there talk about mking macros purely token tree -> token tree?
[16:54:38] <jclements> bjz: I just flew into a silent rage, sorry. :)
[16:54:48] <mark_edward> right. so this can't be exposed through the iterator interface it seems. because the point was to avoid allocations mid compression, and just write results to a pre-allocated buffer
[16:54:55] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[16:54:56] <pnkfelix> nmatsakis: what is the name of that split-stack project you said billm was involved with ?
[16:55:02] <bjz> jclements: oh I am disappoint
[16:55:07] <mark_edward> where you can copy it out if need be, or maybe just write it to a file, whatever you're doing
[16:55:30] <jclements> kimundi: that's a bit blue-sky at this point. It's on my list of future macro changes (it will show up in our weekly meeting minutes if we get time in the next 5 minutes), but I don't see it happening soon.
[16:55:59] <kimundi> ah, I see
[16:55:59] <nmatsakis> pnkfelix: capriccio, http://capriccio.cs.berkeley.edu/
[16:56:11] <nmatsakis> pnkfelix: I was re-examining the code, they don't seem to mention much about this
[16:56:27] <nmatsakis> pnkfelix: or rather the paper, the code I think is not supporting multi-core, not sure how relevant that is
[16:56:44] <pnkfelix> nmatsakis: the SOSP 2003 paper?  yeah I just opened tht
[16:56:46] *** Joins: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP)
[16:56:53] <nmatsakis> right
[16:57:41] <pnkfelix> nmatsakis: (I mainly am curious about this copying/non-copying issue.  I'm sure pcwalton is correct, especially for the general case, but I remain curious about whether a large subset of programs could share frames, do COW, or something.)
[16:57:54] <nmatsakis> pnkfelix: it's not clear to me what you mean by sharing frames
[16:58:00] <cmr> mark_edward: I'm not really sure iterators make sense at all for compression, except this use case: you give it a buffer to compress/decompress, and call next() to get the next block of output
[16:58:05] <nmatsakis> pnkfelix: in this context, certainly.
[16:58:18] <jensnockert> bjz: Btw. I got SIMD slightly less wonky. x.s0 = 4.0 and the like work now.
[16:58:30] <pnkfelix> nmatsakis: sharing the tail of the continuation, the tree structured form.
[16:58:39] <jensnockert> bjz: Now I just need to look at Clang, and see how they do the actual plumbing.
[16:58:40] <nmatsakis> pnkfelix: right, but our tasks don't share memory, that's why I'm confused.
[16:58:53] <pnkfelix> nmatsakis: right, I'm not saying it would work in the current setup
[16:59:05] <pnkfelix> nmatsakis: but i want to see what they did
[16:59:05] <mark_edward> cmr: right. so then you'd be returning an ~[u8] upon each iteration, with it's own memory
[16:59:11] <mark_edward> and that would be safe
[16:59:15] <cmr> right.
[16:59:42] <mark_edward> are you concerned with performance implications of an allocation for each block?
[16:59:58] <mark_edward> this was you're suggestion, the compression stuff, right?
[17:01:23] <bjz> jensnockert: wasn't the samsung fellow doing some SIMD work?
[17:01:27] <cmr> sanxiyn, yes
[17:01:36] <jensnockert> bjz: He did the initial stuff at least.
[17:01:40] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[17:01:57] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[17:02:39] <cmr> mark_edward: I think there's a way to fit it into the type system, but I'm busy doing something else right now
[17:02:42] *** Quits: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP) (Ping timeout)
[17:02:58] *** Joins: pyrac (pyrac@moz-B0599561.w92-162.abo.wanadoo.fr)
[17:03:00] *** Joins: ecr1 (Thunderbir@2557E599.66715431.D25A875A.IP)
[17:03:01] <cmr> mark_edward: I don't think I suggested iterators?
[17:03:29] <mark_edward> cmr: i don't think you did, but you did want a way to avoid excess allocations or something? maybe it was someone else...
[17:03:42] <mark_edward> cmr: please do let me know when you have the time
[17:03:49] <cmr> mark_edward: the iterator interface isn't the proper choice anyhow
[17:04:02] <cmr> just pass a &mut buffer for the function to write into
[17:04:21] *** Joins: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP)
[17:04:21] *** ChanServ sets mode: +o pcwalton
[17:04:27] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[17:04:29] <mark_edward> yeah.
[17:04:29] *** Quits: eschweic (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[17:04:37] <Yurume> is there a version of std::comm::selecti with a timeout (or similar)?
[17:04:39] <cmr> highly compression library dependant I think though, they each have their own requirements
[17:04:48] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[17:05:39] *** Quits: ecr1 (Thunderbir@2557E599.66715431.D25A875A.IP) (Ping timeout)
[17:05:40] *** Quits: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP) (Quit: pcwalton)
[17:06:37] *** Joins: eagen (eagen@15B176CF.7A99C13A.B7961A98.IP)
[17:07:41] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[17:08:16] <BluePeppers> Hi, I've made the compiler angry, and we're having problems communicating. Could anyone take a look at the error message and tell me how I don't understand borrowed pointers: https://gist.github.com/bluepeppers/9a450ca84026f2228400
[17:08:23] *** Joins: graydon (graydon@moz-A8112A5D.cable.teksavvy.com)
[17:08:23] *** ChanServ sets mode: +qo graydon graydon
[17:08:30] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[17:08:49] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[17:08:51] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[17:09:07] *** Joins: azakai (alon@2557E599.66715431.D25A875A.IP)
[17:09:24] <doomlord> keyword simd.. whats the way to get at it at the moment/ what will be the best way? {e0:T,e1:T,e2:T,e3:T}, (T,T,T,T), [T,..4]? ..or all equal?
[17:09:24] *** Joins: roo_ (jesse@moz-D32719F.dynamic.ip.windstream.net)
[17:09:25] *** Joins: mschifer (Adium@2557E599.66715431.D25A875A.IP)
[17:09:34] *** Joins: Jesse (jruderman@2557E599.66715431.D25A875A.IP)
[17:09:58] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[17:10:04] <graydon> naturally my internet connection returns _exactly after_ the meeting :(((
[17:10:08] *** Quits: roo (jesse@moz-B7585E4C.dynamic.ip.windstream.net) (Ping timeout)
[17:10:29] <pnkfelix> nmatsakis: I do see that there is no natural tree structure here (unlike a ForkJoin model like in Cilk). You could only exploit sharing if multiple tasks just happened to start with the exact same call-chain for some crazy reason.  For some reason dherman's discussion of cheap tasks made me link up the two ideas.
[17:10:32] *** Joins: ecr1 (Thunderbir@2557E599.66715431.D25A875A.IP)
[17:10:38] *** roo_ is now known as roo
[17:11:16] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[17:11:37] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[17:11:57] *** Quits: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk) (Client exited)
[17:12:08] *** Joins: eschweic1 (Adium@2557E599.66715431.D25A875A.IP)
[17:12:11] *** Quits: eschweic (Adium@2557E599.66715431.D25A875A.IP) (Connection reset by peer)
[17:16:08] *** Joins: posco (oscarboyki@636AC086.5999CED5.71743E61.IP)
[17:16:48] <cmr> I didn't see anyone paste the meeting notes link :(
[17:16:56] <pnkfelix> cmr: https://etherpad.mozilla.org/Meeting-weekly-2013-07-09
[17:18:07] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[17:19:35] *** Quits: heftig (heftig@moz-9748F6D5.dip0.t-ipconnect.de) (Ping timeout)
[17:19:37] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[17:19:37] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/oP0IuA
[17:19:37] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[17:20:06] *** Joins: heftig (heftig@moz-9748F6D5.dip0.t-ipconnect.de)
[17:21:08] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[17:21:32] *** Quits: ecr1 (Thunderbir@2557E599.66715431.D25A875A.IP) (Ping timeout)
[17:21:38] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[17:21:49] *** Quits: novabyte (Instantbir@moz-B4C485A7.mullvad.net) (Quit: bye bye)
[17:22:39] *** Joins: ghrust (ghrust@C621748.6A2AE50.F3114085.IP)
[17:22:39] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/B7x6Xw
[17:22:39] *** Parts: ghrust (ghrust@C621748.6A2AE50.F3114085.IP) ()
[17:22:41] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[17:22:41] <ghrust> 01[13rust01] 15bors pushed 6 new commits to 06auto: 02http://git.io/-25XCg
[17:22:41] <ghrust> 13rust/06auto 146e67701 15Fedor Indutny: libc: fix MAP_ANON value on linux
[17:22:41] <ghrust> 13rust/06auto 141c56046 15Fedor Indutny: libc: add _SC_* consts for non-mips linux too...
[17:22:42] <ghrust> 13rust/06auto 14822dc5f 15Fedor Indutny: libc: VirtualAlloc and FileMapping bindings
[17:22:44] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[17:22:52] *** Quits: SimonSapin (simon@88F51059.F3BBB17D.144F44FA.IP) (Ping timeout)
[17:25:06] <pnkfelix> graydon: How hard would it be to make bors spit out for each build whether it was Successful/Interrupted/Failed in the comment that it puts on with the links to the buildbot?
[17:25:24] <graydon> I know, it shouldn't be mentioning the interruptions
[17:25:31] <graydon> I'll change that. it's been reported like 19 times already. top bug.
[17:25:39] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[17:25:43] <pnkfelix> oh, is bors' repo public ?
[17:26:12] <pnkfelix> (or is the entire bug database for bors hidden for security?)
[17:26:17] *** Joins: Jesin (Jessin_@moz-48B48C95.eecs.lehigh.edu)
[17:26:40] *** Quits: sk (sk@43301EF8.3DDD1ABD.33B96495.IP) (Quit: Leaving)
[17:26:50] *** Joins: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP)
[17:27:49] *** Joins: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP)
[17:27:59] *** Joins: reyre (reyre@86C3727C.33EE9F8A.1139E686.IP)
[17:30:07] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[17:30:11] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[17:30:11] *** ChanServ sets mode: +o brson
[17:31:00] *** Joins: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP)
[17:31:00] *** ChanServ sets mode: +o pcwalton
[17:31:40] <brson> https://github.com/mozilla/rust/wiki/Meeting-weekly-2013-07-09
[17:32:40] *** Joins: rubber-duck (rubber-duc@moz-A1D8E6D1.dsl.iskon.hr)
[17:32:57] <cmr> Who is D?
[17:33:09] <tjc> cmr: dherman
[17:33:33] *** Joins: bytbox (s@moz-DFB39B01.wireless.umd.edu)
[17:33:57] <rubber-duck> any reason I get this error with latest master build (didn't get it with a 2 week old one) : "error: type `&char` does not implement any method in scope named `to_str`"
[17:34:26] <cmr> rusti: let x = ~'c'; let y: &char = x; y.to_str()
[17:34:28] -rusti- <anon>:7:41: 8:5 error: type `&char` does not implement any method in scope named `to_str`
[17:34:28] -rusti- <anon>:7          let x = ~'c'; let y: &char = x; y.to_str()
[17:34:28] -rusti- <anon>:8     };
[17:34:28] -rusti- error: aborting due to previous error
[17:34:28] -rusti- application terminated with error code 101
[17:35:03] <rubber-duck> I get the error when I use #[deriving(ToStr)] on a type that has a &char member
[17:35:11] <bstrie> rusti: 'c'.to_str()
[17:35:12] -rusti- <anon>:7:9: 8:5 error: type `char` does not implement any method in scope named `to_str`
[17:35:12] -rusti- <anon>:7          'c'.to_str()
[17:35:12] -rusti- <anon>:8     };
[17:35:12] -rusti- error: aborting due to previous error
[17:35:12] -rusti- application terminated with error code 101
[17:35:21] <rubber-duck> *actually it has a char member
[17:35:25] <rubber-duck> not &char
[17:35:26] <bstrie> rubber-duck: I'm not sure
[17:35:31] <pnkfelix> tjc: ping
[17:35:37] <tjc> pnkfelix: pong
[17:35:58] <cmr> wasn't there recently a patch to make ToStr derivation use the ToStr trait rather than reflection?
[17:36:14] <pnkfelix> tjc: How does rustpkgtest (and perhaps also rustpkg) generate the names for the paths in /var/folders/... where it stashes the results from doing e.g. "git clone" 
[17:36:17] <pnkfelix> tjc: ?
[17:36:45] <pnkfelix> tjc: (I'm trying to decipher an apparently intermittent crash from testrustpkg. . . I just saw it crash and now I cannot reproduce)
[17:36:54] <tjc> pnkfelix: it calls mkdtemp()
[17:36:59] <rubber-duck> cmr, if that's so then it broke it for char members, but I guess char should implement ToStr anyway
[17:37:05] <pnkfelix> tjc: (And I am wondering if I need to clean out some intermediate state elsewhere)
[17:37:05] <tjc> but if there's an intermittent crash it's probably because of the tests that contact github
[17:37:11] <cmr> rubber-duck: yep
[17:37:12] <tjc> which I'm currently working on fixing so as to not contact github
[17:37:23] <tjc> you shouldn't need to clean any intermediate state, as it uses a different randomly-generated tmpdir each time
[17:37:28] <tjc> pnkfelix: ^
[17:37:41] <pnkfelix> tjc: Hmm.  So I should not see the same directory name in /var/folders/... be coming up from two distinct calls to rustpkgtest ?
[17:37:42] <rubber-duck> id make the patch my self but building and testing is such a pain on my PC 
[17:37:50] <tjc> pnkfelix: right
[17:38:27] <pnkfelix> tjc: oh, wait, okay.  The whole path should be distinct
[17:38:41] <pnkfelix> tjc: but it may of course share common substructure earlier in the directory hierarchy
[17:38:55] <tjc> pnkfelix: Yeah, it'll share /var/folders on Mac or whatever the equivalent is on Linux or Windows
[17:39:00] <pnkfelix> tjc: (that latter bit was what was confusing me; I was not reading the path carefully enough)
[17:39:07] <pnkfelix> tjc: thx
[17:39:09] <tjc> cool
[17:39:56] <pnkfelix> tjc: Am I right in thinking that a failed attempt to contact github should nonetheless not be causing rustpkgtest to seg fault?
[17:40:19] <pnkfelix> tjc: Or is that blameable on flakiness in our network libraries right now?
[17:40:33] <tjc> pnkfelix: I wouldn't think so, but it could be a network library bug, you never know
[17:41:00] <pnkfelix> tjc: okay, just trying to come up with a hypothesis that I can cope with.
[17:41:31] <tjc> heh
[17:42:04] <pnkfelix> tjc: It is very odd, the problem I am seeing, in both the build logs and in my own (intermittent) failed run, the segfault was preceded by: "rustc: for the -arm-enable-ehabi option: may only occur zero or one times!"
[17:42:19] <tjc> pnkfelix: oh, I've seen that
[17:42:20] <tjc> hmm
[17:42:21] <pnkfelix> tjc: but I do not see that warning on the successful runs ...
[17:42:46] <pnkfelix> tjc: this is on a Mac, mind you.  Do we test cross-compilation as part of make check and/or rustpkgtest ?
[17:42:58] <tjc> pnkfelix: yes, the bots do cross-compiles
[17:43:05] <pnkfelix> tjc: but my local machine too
[17:43:08] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[17:43:13] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:43:24] <tjc> pnkfelix: I think normally "make check" only builds for your own machine, and doesn't cross-compile anything
[17:43:36] <tjc> it's possible there was a bug introduced where the arm options pollute something else
[17:43:46] *** Quits: cr (anonymous@moz-4C21C3DA.dip0.t-ipconnect.de) (Ping timeout)
[17:43:56] <pnkfelix> tjc: okay.  I'll poke at it a few more times.
[17:44:05] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[17:44:08] *** Joins: vk (chatzilla@3E9D68F2.B1163E0C.2A6693DD.IP)
[17:44:16] <tjc> pnkfelix: sure, I suspect the message about arm-enable-ehabi is a bug
[17:44:27] *** Joins: ecr (Thunderbir@2557E599.66715431.D25A875A.IP)
[17:44:32] <tjc> maybe something where the same option gets added multiple times, but only nondeterministically
[17:44:36] *** Quits: roo (jesse@moz-D32719F.dynamic.ip.windstream.net) (Ping timeout)
[17:45:11] <pnkfelix> tjc: and the error message is blaming the wrong option, perhaps?
[17:45:26] <tjc> pnkfelix: could be
[17:45:29] <pnkfelix> tjc: e.g. a index mistake in a lookup table maybe, sure, okay.
[17:45:32] <tjc> yeah
[17:46:41] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:46:53] *** Quits: eagen (eagen@15B176CF.7A99C13A.B7961A98.IP) (Ping timeout)
[17:47:16] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[17:47:44] *** Quits: xLII (xLII@2433BC90.F5F53E8A.2D6DB75E.IP) (Ping timeout)
[17:48:41] <graydon> pcwalton: FixedBigTask, FixedSmallTask and GrowableTask as different spawnable things. plausible?
[17:48:46] <pnkfelix> tjc: or, ugh, maybe the EnableARMEHABI global variable (from LLVM) is getting corrupted somewhere. . . that's currently the only way I can see this coming up in this case
[17:48:57] <pcwalton> graydon: that's basically strcat's proposal, I like it
[17:49:04] <pcwalton> all you really need is GrowableBig or GrowableSmall
[17:49:17] <graydon> unless you want a fixed size one that fails at a small limit
[17:49:26] <graydon> (eg. resource accounting, "please don't DoS me")
[17:49:26] *** Joins: cr (anonymous@moz-819DC186.dip0.t-ipconnect.de)
[17:49:33] <pcwalton> oh yeah, that makes sense
[17:49:34] <tjc> pnkfelix: well, some of the rustpkg tests do run a process with different environment variables, but I don't know offhand that that would be the problem
[17:49:46] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[17:49:55] <pnkfelix> tjc: I was thinking more along the lines of memory getting corrupted within the process
[17:50:03] <cmr> iirc he proposed a spawn_sized(num_bytes_of_stack)
[17:50:06] * graydon shrugs. I read the go morestack path just now and it's not exactly small either
[17:50:09] <strcat> graydon: we need more than resource accounting of stacks for that though
[17:50:39] <strcat> they don't care about perf as much, or ffi
[17:50:44] <pnkfelix> tjc: Maybe I should try looking at these warnings that valgrind is spitting out rather than ignoring them.  :)
[17:51:12] <tjc> pnkfelix: possibly (<font size="-4">this way lies chaos</font>)
[17:52:13] <graydon> pcwalton: have you perf'ed it to figure out which instruction / path in our morestack thing is the worst of the worst?
[17:52:25] <pcwalton> graydon: I did at one point, it was the pointer stitching iirc
[17:52:29] <graydon> (for that matter: do you have a small test case I could muck around with some to convince myself what it's doing?)
[17:52:31] <pcwalton> and the various slow paths
[17:52:47] <graydon> I'm just .. kinda curious. 90% overhead seems pretty intense
[17:52:49] <cmr> graydon: there's some in src/test/bench
[17:52:51] <pcwalton> graydon: just use #[fast_ffi] and call malloc inside function g noinlined inside function f
[17:52:57] <pcwalton> graydon: so that 90% is oldffi
[17:53:06] <graydon> oldffi meaning wrappers and other stuff?
[17:53:08] <pcwalton> new-ffi may be better
[17:53:08] <pcwalton> yeah
[17:53:27] *** Joins: msingle1 (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[17:53:37] <graydon> I never quite figured out what the difference between oldffi and new was. was it that we hoist the ffi-ness up into the rust caller's morestack() request and then just barrel through with a direct call to C?
[17:53:48] *** Quits: bytbox (s@moz-DFB39B01.wireless.umd.edu) (Ping timeout)
[17:54:17] *** Quits: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Ping timeout)
[17:54:37] <pcwalton> graydon: that's basically it, yeah
[17:54:44] *** Joins: MaikKlein (maik@moz-292B05D.dip0.t-ipconnect.de)
[17:55:59] <graydon> k
[17:56:10] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[17:56:25] *** Quits: echristo (echristo@D423593A.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[17:56:31] <graydon> pcwalton: how do I turn off inlining? #[inline(none)] or something?
[17:56:35] *** Joins: etw (john@moz-B2936CAB.nyc.res.rr.com)
[17:56:37] <pcwalton> inline(never) iirc
[17:56:56] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[17:57:08] *** Quits: msingle1 (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Ping timeout)
[17:59:16] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[18:00:18] *** Joins: jviereck (Adium@moz-A034D4DA.dclient.hispeed.ch)
[18:00:19] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[18:01:58] *** Joins: Jesse_ (jruderman@2557E599.66715431.D25A875A.IP)
[18:02:08] *** Quits: Jesse (jruderman@2557E599.66715431.D25A875A.IP) (Ping timeout)
[18:04:28] *** Parts: jesse98 (jjones@6251EDC2.15651213.B46B86FA.IP) ()
[18:04:35] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[18:04:38] *** Joins: mib_rvytpl (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[18:05:05] *** Joins: jesse98 (jjones@6251EDC2.15651213.B46B86FA.IP)
[18:05:26] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[18:05:34] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Ping timeout)
[18:06:39] *** Quits: Jesin (Jessin_@moz-48B48C95.eecs.lehigh.edu) (Quit: Leaving)
[18:06:59] *** Joins: roo (jesse@moz-D32719F.dynamic.ip.windstream.net)
[18:07:01] *** Quits: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP) (Quit: Leaving.)
[18:07:07] *** Joins: devinus (devinus@moz-3C0F65B9.sw.biz.rr.com)
[18:09:07] <strcat> rusti: true ^ true
[18:09:08] -rusti- false
[18:09:10] *** Quits: roo (jesse@moz-D32719F.dynamic.ip.windstream.net) (Ping timeout)
[18:10:12] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[18:11:52] *** Joins: roo (jesse@moz-D32719F.dynamic.ip.windstream.net)
[18:12:30] *** Quits: devinus (devinus@moz-3C0F65B9.sw.biz.rr.com) (Connection reset by peer)
[18:12:53] *** Joins: xLII (xLII@2433BC90.F5F53E8A.2D6DB75E.IP)
[18:13:38] *** Quits: jviereck (Adium@moz-A034D4DA.dclient.hispeed.ch) (Connection reset by peer)
[18:13:42] *** Joins: jviereck (Adium@moz-A034D4DA.dclient.hispeed.ch)
[18:13:47] *** Quits: glinscott (garylinsco@789A6618.53EB7C1.FFFE3AA.IP) (Quit: glinscott)
[18:14:28] *** Joins: jviereck1 (Adium@moz-A034D4DA.dclient.hispeed.ch)
[18:14:33] *** Joins: glinscott (garylinsco@789A6618.53EB7C1.FFFE3AA.IP)
[18:15:22] *** Quits: roo (jesse@moz-D32719F.dynamic.ip.windstream.net) (Ping timeout)
[18:15:31] *** Quits: jviereck (Adium@moz-A034D4DA.dclient.hispeed.ch) (Ping timeout)
[18:15:42] *** Joins: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP)
[18:18:52] *** Quits: MaikKlein (maik@moz-292B05D.dip0.t-ipconnect.de) (Ping timeout)
[18:18:53] <bstrie> wait, why is bitwise xor defined for bools
[18:19:10] <cmr> why wouldn't it be?
[18:19:12] <pcwalton> because you can't stop us
[18:19:12] <bstrie> rusti: true ^ false
[18:19:13] -rusti- true
[18:19:17] <bstrie> pcwalton: we'll see about that!
[18:19:31] <jensnockert> bstrie: Because it makes sense?
[18:19:32] <bstrie> is the idea to think of 0 as false and 1 as true?
[18:19:36] <engla> bools are sleeper (byte) cells
[18:19:53] <engla> xor is a logical operation
[18:19:57] <bstrie> I guess
[18:20:01] *** Joins: MaikKlein (maik@moz-292B05D.dip0.t-ipconnect.de)
[18:20:02] <bstrie> seems a bit silly though
[18:20:06] <cmr> why?
[18:20:17] <etw> r? https://github.com/mozilla/rust/pull/7658
[18:20:17] <bstrie> can't elucidate
[18:20:22] <bstrie> just got the feels
[18:20:32] <engla> "exactly one of these two is true"
[18:20:53] <graydon> haha
[18:20:53] <pnkfelix> bstrie: You can confirm at volume 0B here http://www.cs.utsa.edu/~wagner/knuth/
[18:20:56] <jensnockert> I see xor as addition, does this mean I am broken?
[18:21:07] <pnkfelix> bstrie: (or sorry, "pre-fascicle" 0B)
[18:21:08] <cmr> jensnockert: yes ;p
[18:21:10] <graydon> FAQ entry: "because you can't stop us"
[18:22:01] <bstrie> graydon: if it gets you to write that language design FAQ at last, then go for it :)
[18:22:12] <pnkfelix> bstrie: page 3 provides distinct operator symbols for all 16 possible binary boolean operators.  If you think xor is crazy, wait until you see "L"
[18:22:32] <kimundi> fn HA(a: bool, b: bool) -> (bool, bool) { (a & b, a ^ b) }; HA(true, true)
[18:22:39] <kimundi> rusti: fn HA(a: bool, b: bool) -> (bool, bool) { (a & b, a ^ b) }; HA(true, true)
[18:22:40] -rusti- (true, false)
[18:22:41] <bstrie> oh hey, pdf.js has a new loading thing. how nice
[18:22:42] <kimundi> :P
[18:22:47] <MaikKlein> if I want to build an actor lib, what library should I learn from? What is you favorite actor lib?
[18:22:55] <brendanc> #haskell's bot says "yes, Haskell can do that" in response to @faq
[18:23:01] <strcat> aren't tasks basically actors?
[18:23:05] <MaikKlein> atm I was looking at akka
[18:23:19] <MaikKlein> seems like tasks a building blocks for actors
[18:23:28] <MaikKlein> are*
[18:23:49] *** Joins: roo (jesse@moz-D32719F.dynamic.ip.windstream.net)
[18:24:50] *** Joins: carllerche (carllerche@moz-BF6CB667.hsd1.ca.comcast.net)
[18:24:55] <jensnockert> cmr: But it makes sense :(
[18:24:55] <MaikKlein> I have nearly no experience with actors, that's why I am asking. Atm I just build a lib to use tasks easier.
[18:25:17] <jensnockert> cmr: It is the same thing as addition (mod 2)
[18:25:22] <cmr> jensnockert: I know
[18:25:30] * jensnockert hugs cmr.
[18:25:38] *** Quits: roo (jesse@moz-D32719F.dynamic.ip.windstream.net) (Ping timeout)
[18:26:01] <bstrie> rusti: true + false
[18:26:02] -rusti- <anon>:7:9: 7:21 error: binary operation + cannot be applied to type `bool`
[18:26:02] -rusti- <anon>:7          true + false
[18:26:02] -rusti-                   ^~~~~~~~~~~~
[18:26:02] -rusti- error: aborting due to previous error
[18:26:03] -rusti- application terminated with error code 101
[18:26:05] <MaikKlein> I think I try to mirror akka, can'T be too bad
[18:26:24] <cmr> MaikKlein: http://celluloid.io/
[18:27:48] <bstrie> pnkfelix: I don't see how "contradiction" can be considered a logical operation on two values. I wonder if this "knuth" guy has ever even heard of computer science
[18:28:22] <cmr> bstrie: I think you have your understanding of boolean operations backwards
[18:28:23] <MaikKlein> cmr, thanks, I have a look
[18:28:29] <cmr> boolean logic came *before* bitwise ops :p
[18:28:32] *** Quits: xLII (xLII@2433BC90.F5F53E8A.2D6DB75E.IP) (Ping timeout)
[18:28:33] *** Joins: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com)
[18:28:48] <bstrie> cmr: the table is titled "THE SIXTEEN LOGICAL OPERATIONS ON TWO VARIABLES"!
[18:28:59] <bstrie> oh man
[18:29:01] <bstrie> if I point this out
[18:29:03] <bstrie> maybe I will get a check
[18:29:15] *** Joins: roo (jesse@moz-D32719F.dynamic.ip.windstream.net)
[18:29:31] <pnkfelix> bstrie: What name would you give to that entry in the table?  It does already have "constant 0", which I thought would please you.
[18:30:02] <tjc> bstrie: watch out, he's not giving checks anymore ( http://www.cs.utsa.edu/~wagner/knuth/fiasco.html )
[18:30:10] <bstrie> tjc: I thought he was still giving fake checks?
[18:30:25] <tjc> bstrie: well, depends on your definition of "check" :-)
[18:30:51] *** Joins: bytbox (s@moz-DC83764A.washdc.fios.verizon.net)
[18:30:54] <bstrie> at some point I hope he starts offering fake credit cards
[18:31:06] <pnkfelix> "From now on it will be kudos, not escudos."   ah, got a smile out of me
[18:31:12] *** Quits: roo (jesse@moz-D32719F.dynamic.ip.windstream.net) (Ping timeout)
[18:31:35] <tjc> if he wanted to pay in fake money I'm surprised he didn't start paying in Bitcoin
[18:31:47] <bstrie> rusti: true âŠ¥ false
[18:31:47] -rusti- <anon>:7:14: 7:14 error: unknown start of token: 8869
[18:31:48] -rusti- <anon>:7          true âŠ¥ false
[18:31:48] -rusti-                        ^
[18:31:48] -rusti- application terminated with error code 101
[18:31:55] <bstrie> pnkfelix: note that rust does not produce a zero there
[18:32:35] *** Joins: roo (jesse@moz-D32719F.dynamic.ip.windstream.net)
[18:32:37] <pnkfelix> bstrie: I'll open a ticket
[18:32:49] <bstrie> yes please address this immediately
[18:33:20] <MaikKlein> does ruby have inheritance?
[18:33:26] <bstrie> pnkfelix: honestly why do we even need numeric literals, we can express all natural numbers by adding together affirmations
[18:34:44] <bstrie> brson: I got my shirt, it is very awesome
[18:34:49] <bstrie> thanks again
[18:34:51] *** Quits: roo (jesse@moz-D32719F.dynamic.ip.windstream.net) (Ping timeout)
[18:34:54] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[18:35:29] <bstrie> does anyone know who made the shirt design? I sort of want to use it as the background image for /r/rust
[18:35:38] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[18:35:43] <kimundi> Right, who needs fancy literals anyway if you can base everything on the successor function: S(S(0)) + S(S(S(S(0)))) = S(S(S(S(S(S(0))))))
[18:35:57] <cmr> kimundi: oi what's that 0 doing there?
[18:35:59] <cmr> that's just S()
[18:36:01] <kimundi> There - Much more cleaner and functional ;)
[18:36:03] <bstrie> kimundi: we can call this language "parseltongue"
[18:36:31] <cmr> HAH I get it
[18:36:33] <cmr> that's funny
[18:36:38] *** Quits: pnkfelix|rcirc (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: rcirc on GNU Emacs 24.1.1)
[18:36:45] <lkuper> bstrie: the logo is by Sean Martell, but nobody has come forward as the shirt designer
[18:37:02] <lkuper> afaik
[18:37:10] *** Joins: roo (jesse@moz-D32719F.dynamic.ip.windstream.net)
[18:37:22] *** Quits: Blei (philipp@moz-650B9C6A.cust.bluewin.ch) (Quit: WeeChat 0.4.1)
[18:37:25] <bstrie> I'll just make a foia request to figure out who the designer is
[18:37:44] *** Joins: barosl (barosl@E287D94F.C81E10FB.7544CABF.IP)
[18:38:16] <olsonjeffery> has folks gotten shirts, already?
[18:38:21] <brendanc> graydon: #buildbot proposes this should fix the problem with interrupting git steps: https://gist.github.com/srinupiits/5959434
[18:38:32] <brson> bstrie: we don't want to reuse that design for anything else. makes it less special
[18:38:37] <bstrie> icic
[18:38:41] <lkuper> olsonjeffery: at least a couple of us have
[18:38:49] * olsonjeffery anxiously checks his mailbox, every day.
[18:38:56] <cmr> I wish the logo used a hexagon rather than a pentagon, much more interesting imo
[18:38:57] <brson> some had to be backordered because there was large demand for size M
[18:39:11] <tjc> not to be confused with medium demand for size L
[18:39:12] <bstrie> instead I'll take a suggestive photo of myself wearing nothing but the shirt and make it the background image
[18:39:29] <kimundi> brson: Btw, is there supposed to be an confirmation email?
[18:39:29] <cmr> oh god
[18:39:35] <bstrie> fun fact: reddit.com/r/rustporn exists
[18:39:44] <graydon> oh no
[18:39:47] <olsonjeffery> this is a family channel
[18:39:54] <jclements> tjc: are we headed toward "small medium at large"? Because if so, I'm leaving.
[18:39:55] <tjc> bstrie: that came up for me, somehow, doing a search
[18:39:57] <tjc> for something
[18:40:00] <kimundi> fun fact: that subreddit is safe :P
[18:40:06] <brson> kimundi: i did promise a confirmation email, but nobody gave me a list when they shipped. I'll try again
[18:40:11] *** Quits: roo (jesse@moz-D32719F.dynamic.ip.windstream.net) (Ping timeout)
[18:40:13] <lkuper> cmr: I like to think of the five points of the pentagon as the five original rust interns
[18:40:21] * olsonjeffery went with an L, i believe
[18:40:25] <tjc> jclements: I was not familiar with that joke, but I am now
[18:40:25] *** Quits: rubber-duck (rubber-duc@moz-A1D8E6D1.dsl.iskon.hr) (Ping timeout)
[18:40:28] <bstrie> graydon: it's actually just photos of rusty metal. "porn" is a reddit word for nice images, apparently
[18:40:28] <olsonjeffery> im thinking of doing a rust talk at a local code camp in late sept.
[18:40:29] <jld> Further fun fact: most subreddits ending in "porn" are SFW photography.
[18:40:34] <olsonjeffery> that's my deadline, more or less
[18:40:43] <tjc> jld: Fun fact: most subreddits ending in anything other than "porn" are NSFW
[18:40:49] <jclements> jld: have you been researching this?
[18:41:01] <cmr> lkuper: if there were actually 5 pillars of rust, that'd make sense :p
[18:41:21] *** Quits: vk (chatzilla@3E9D68F2.B1163E0C.2A6693DD.IP) (Ping timeout)
[18:41:24] <MaikKlein> how would I do sth like this? https://gist.github.com/MaikKlein/5959995
[18:41:27] <MaikKlein> with default methods
[18:41:34] *** Joins: roo (jesse@moz-D32719F.dynamic.ip.windstream.net)
[18:41:38] * graydon suggests we let the miracles of reddit go, they seem to have ... numerous ... issues ... with friendly/appropriate tone
[18:41:50] <tjc> MaikKlein: Almost right -- it should be self.getInt(); instead of Self.getInt()
[18:41:51] <cmr> MaikKlein: isn't it just `self.getInt()`?
[18:42:11] <bblum> brson: ETA on my pull request?
[18:42:22] <brendanc> graydon: fixing the git seems a bit nicer than deferring the interrupt
[18:42:35] <MaikKlein> cmr, tjc then I get "error: type `&Self` does not implement any method in scope named `getInt`"
[18:42:54] <olsonjeffery> the five pillars of mistaken design assumptions
[18:42:56] <MaikKlein> probably just a bug in default methods?
[18:43:02] <tjc> MaikKlein: hmm
[18:43:04] <jld> cmr: Do 6-bolt chainrings exist?
[18:43:08] <tjc> sully: MaikKlein  has a default methods question
[18:43:17] <cmr> jld: do they have to?
[18:43:22] *** Quits: roo (jesse@moz-D32719F.dynamic.ip.windstream.net) (Ping timeout)
[18:43:24] *** Joins: vk (chatzilla@3E9D68F2.B1163E0C.2A6693DD.IP)
[18:43:33] <jld> cmr: Fair enough. (-:
[18:43:44] <lkuper> I think the design was also influenced by several of the full-timers and interns being cyclists
[18:43:45] <cmr> MaikKlein: getInt is a static method, oops
[18:43:47] <graydon> brendanc: are we still seeing it wedge?
[18:44:04] <jld> Also I think I figured the 32t in the logo doesn't exist at that BCD.
[18:44:11] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[18:44:17] <brendanc> graydon: no, but the fix looks easy and less machinery is always nice :)
[18:44:17] <lkuper> (and by "I think", I mean "I like to imagine")
[18:44:23] *** Quits: eschweic1 (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[18:44:32] <brendanc> (fix is a one-liner)
[18:44:34] <graydon> brendanc: aha! you found it?
[18:44:40] <brendanc> https://gist.github.com/srinupiits/5959434
[18:44:43] *** Quits: jviereck1 (Adium@moz-A034D4DA.dclient.hispeed.ch) (Ping timeout)
[18:44:44] *** Joins: cp (cp@moz-993078EE.plus.com)
[18:44:54] *** Joins: jviereck (Adium@moz-A034D4DA.dclient.hispeed.ch)
[18:45:02] <graydon> brendanc: sorry, just saw scrollback. too many discussions!
[18:45:07] <MaikKlein> cmr, yeah I was just wondering if this is possible
[18:45:08] <graydon> oh really, that's it?
[18:45:09] <graydon> gosh
[18:45:13] *** Quits: jviereck (Adium@moz-A034D4DA.dclient.hispeed.ch) (Max SendQ exceeded)
[18:45:16] <graydon> haha
[18:45:19] <brendanc> it should be
[18:45:20] <cmr> MaikKlein: it'd be Self::getInt() I think
[18:45:33] *** Quits: sankha93 (Instantbir@F43B6114.922BE1F.EFB84E89.IP) (Ping timeout)
[18:45:33] *** Quits: posco (oscarboyki@636AC086.5999CED5.71743E61.IP) (Ping timeout)
[18:45:52] *** Joins: jviereck (Adium@moz-A034D4DA.dclient.hispeed.ch)
[18:45:55] <cmr> MaikKlein: I think sully *just* got default static methods working though
[18:45:57] <cmr> not sure if it landed
[18:46:07] <sully> MaikKlein: hey, what's up?
[18:46:21] <MaikKlein> hey how would I do sth like this https://gist.github.com/MaikKlein/5959995
[18:46:24] *** Joins: sankha93 (Instantbir@F43B6114.922BE1F.EFB84E89.IP)
[18:46:30] <MaikKlein> sully, ^
[18:46:58] <sully> if you do self.getInt(), it should work
[18:47:10] <brson> bblum: I'll review it today or tomorrow
[18:47:11] <tjc> MaikKlein: Oh, I missed that getInt was a static method
[18:47:12] <MaikKlein> sully, getInt is a function
[18:47:12] <tjc> sorry
[18:47:16] <sully> oh, wait
[18:47:17] <tjc> it should be Actor<T>::getInt()
[18:47:21] <sully> yeah.
[18:47:27] <tjc> sorry to mislead you
[18:47:32] <sully> er, hm
[18:47:33] <MaikKlein> no problem :)
[18:47:37] <olsonjeffery> brson: im interested in #5018.. is anyone working on it? do you think it'll be pretty epic?
[18:47:39] <cmr> everybody who looked at that missed that it was a static methods :p
[18:48:12] <tjc> which is an argument against our syntax for them :-)
[18:48:16] <tjc> too late to change it, though
[18:48:34] <strcat> jld: /me likes our static methods ;p
[18:48:39] <strcat> err
[18:48:42] <MaikKlein> Actor<T>::getInt() doesn't work either :D
[18:48:42] <MaikKlein> /home/maik/hello.rs:12:8: 12:13 error: unresolved name `Actor`.
[18:48:43] <MaikKlein> /home/maik/hello.rs:12         Actor<T>::getInt(); // how does this work?
[18:48:44] <cmr> I like it too
[18:48:51] * strcat isn't sure how jld sneaked into his message
[18:49:10] <strcat> I guess there was something I was going to say but never did...
[18:49:12] <MaikKlein> also tried Self::getInt();
[18:49:18] <MaikKlein> oh
[18:49:26] <MaikKlein> I didn't update for 4 days or so
[18:49:51] <sully> Actor::getInt::<T, Self>()
[18:50:27] <sully> it's a bit noisy because you need to specify all of the type parameters
[18:50:32] <sully> because there is nothing that would constraint it
[18:50:38] *** Quits: sankha93 (Instantbir@F43B6114.922BE1F.EFB84E89.IP) (Ping timeout)
[18:50:53] <MaikKlein> sully, thanks
[18:52:18] <bstrie> MaikKlein: the real reason it didn't work is because rust was angry at you for naming the function getInt rather than get_int
[18:52:26] <MaikKlein> bstrie, :D
[18:52:49] *** Joins: sankha93 (Instantbir@F43B6114.922BE1F.EFB84E89.IP)
[18:52:51] <bstrie> it knew what you meant, it just wanted to spite you
[18:52:53] *** Quits: Blub\0 (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Ping timeout)
[18:53:43] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[18:53:55] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[18:54:09] <MaikKlein> bstrie, yeah I wrote it pretty fast and  I realized that it is lower camel case when it was too late :(
[18:54:12] *** Quits: sankha93 (Instantbir@F43B6114.922BE1F.EFB84E89.IP) (Ping timeout)
[18:54:36] *** Joins: sankha93 (Instantbir@F43B6114.922BE1F.EFB84E89.IP)
[18:55:22] <cmr> If I stash the node_id from a ty_path somewhere, will I be able to get the path it corresponds to from the ast map?
[18:56:01] <cmr> I have a feeling not
[18:56:19] <brson> olsonjeffery: it's already done :( #4770, #7666-8 are all related, but less glamorous. #4770 depends on some refactoring that toddaaro is working on atm
[18:56:31] <bstrie> MaikKlein: see, cmr has the opposite problem. his types are all named ty_path instead of TyPath, thus his efforts are futile
[18:57:00] <cmr> bstrie: it's an enum variant thank you :p
[18:57:00] *** Quits: BluePeppers (user@moz-3799699A.range81-151.btcentralplus.com) (Client exited)
[18:57:25] *** Joins: BluePeppers (user@moz-3799699A.range81-151.btcentralplus.com)
[18:57:34] *** Joins: posco (oscarboyki@636AC086.5999CED5.71743E61.IP)
[18:58:53] *** Quits: cp (cp@moz-993078EE.plus.com) (Ping timeout)
[18:59:25] *** Joins: rubber-duck (rubber-duc@52501B8F.891A3B3D.76F1346C.IP)
[19:01:41] <olsonjeffery> brson: so, re: #4770... basically we'd want pipes to rely on a trait .. and one impl that uses newsched and another that uses plain pthreads?
[19:02:02] <tjc> cmr: what are you trying to do?
[19:02:20] <MaikKlein> bstrie, haha
[19:02:22] <strcat> brson: https://github.com/mozilla/rust/pull/7669 r?
[19:02:26] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[19:03:01] <MaikKlein> if I have "trait Actor<T>" what would "Self" stand for?
[19:03:01] *** Joins: devinus (devinus@moz-3C0F65B9.sw.biz.rr.com)
[19:03:17] *** Joins: askalski (akuda@2BA4E5A7.CC7751E8.6712E96B.IP)
[19:03:20] <MaikKlein> the object where the trait is implemented on?
[19:03:29] <tjc> MaikKlein: it stands for some type that has an implementation of Actor<T>
[19:03:29] <strcat> yes
[19:03:31] <tjc> that's all you know about it
[19:04:40] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[19:04:40] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/-25XCg
[19:04:40] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[19:04:48] *** Quits: eholk (eholk@moz-511062AD.uconnect.utah.edu) (Quit: eholk)
[19:04:52] <cmr> tjc: I'm trying to extract the minimum amount of information possible from the AST to allow for both name resolution and hyperlinking from the usage of a type to its declaration (which I planned by using the node_id as a key)
[19:04:57] *** Joins: jaen (jaen@moz-466701E7.play-internet.pl)
[19:04:59] <cmr> for rustdoc
[19:05:07] <cmr> indutny: it landed!
[19:05:19] <tjc> cmr: ah -- it sounds like the def_map in resolve already does some of what you want?
[19:05:26] * strcat has a feeling that already conflicts
[19:06:04] <cmr> tjc: Does it? I don't know :)
[19:06:38] <tjc> cmr: you might want to look at resolve_type in middle/resolve.rs
[19:06:52] <tjc> I don't know if it makes more sense for you to duplicate some of what it does, or to call resolve from your rustdoc code
[19:07:00] <brson> olsonjeffery: in #6855 we want to make it so that it's possible for Tasks to be backed by pthreads, not green threads. so for #4770 we would want to have rt::comm (newsched pipes) able to change the way it does synchronization based on the type of Task it's interacting with. I don't think though that it would use a trait for this because the behavior is very dynamic - e.g. pipes can be sent from green threads to non-green threads
[19:07:04] <cmr> I already run resolve and typeck
[19:07:18] <MaikKlein> can I overwrite default methods somehow?
[19:07:26] <cmr> MaikKlein: yes, just implement them
[19:07:37] <MaikKlein> cmr, I did nothing changed .. hm I check again
[19:07:49] <tjc> cmr: Then if you're already running resolve, you should be able to access the def_map, which becomes a field in the ty context after resolve
[19:08:44] <MaikKlein> cmr, ah nvm I made a mistake, thanks
[19:09:01] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[19:09:15] <cmr> tjc: So the def_map *does* do what I want?
[19:09:35] <cmr> actually the name seems pretty self-explanatory
[19:09:41] <cmr> map a node_id to its definition
[19:09:54] <tjc> cmr: it maps uses to definitions, but your original question was whether you can use it to map node IDs to uses...
[19:10:00] <tjc> I thought you might have actually meant the first one, though
[19:10:04] <tjc> or else I may have misunderstood
[19:10:14] <cmr> I did mean the first, I might have mispoke
[19:10:25] <tjc> Cool, then the def_map should do exactly what you want
[19:10:29] <cmr> sweet
[19:11:02] *** Quits: teratorn (teratorn@moz-5363C32C.teratorn.org) (Ping timeout)
[19:11:45] *** Quits: jaen (jaen@moz-466701E7.play-internet.pl) (Ping timeout)
[19:11:48] <cmr> tjc: Does anything special need to be done to handle primitive types? I don't think I see them represented in the ast, at least not as part of ast::Ty
[19:12:14] <tjc> cmr: primitive types are just ty_path
[19:12:19] <cmr> oh
[19:12:27] <tjc> then resolve magically recognizes names that refer to primitive types
[19:12:37] <tjc> at least, that's how it worked the last time I looked at the codeâ€¦ no guarantees it hasn't changed :-)
[19:12:43] <cmr> yikes, that sounds hairy
[19:13:06] <tjc> well, it is, but only insofar as handling primitive names is always hairy no matter how you do it :-)
[19:13:12] <tjc> it's just a matter of where you push the special cases
[19:13:14] <cmr> yeah
[19:13:26] *** Quits: rubber-duck (rubber-duc@52501B8F.891A3B3D.76F1346C.IP) (Input/output error)
[19:13:30] <tjc> bbiab, lunch
[19:13:39] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[19:13:52] *** Joins: teratorn (teratorn@moz-5363C32C.teratorn.org)
[19:14:15] *** Quits: teratorn (teratorn@moz-5363C32C.teratorn.org) (Quit: Absum!)
[19:14:43] *** huseby is now known as husebyFEWD
[19:16:21] *** Joins: teratorn (teratorn@moz-5363C32C.teratorn.org)
[19:17:45] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Ping timeout)
[19:17:47] <mark_edward> cmr: it sounds like some of your work could come in hand for the Rust IDE
[19:18:10] <cmr> mark_edward: honestly I don't think so
[19:18:19] <cmr> I'm just using the structures rustc already exposes
[19:18:26] <cmr> there's a lot more trickery needed in a good IDE
[19:18:59] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[19:19:27] <MaikKlein> oO what does this error msg mean? "expected concrete lifetime is lifetime re_infer(ReSkolemized(0, br_anon(0)))"
[19:19:32] <mark_edward> like what? getting declaration location and typr from se is a  big thing
[19:19:42] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[19:19:45] *** Quits: askalski (akuda@2BA4E5A7.CC7751E8.6712E96B.IP) (Quit: Wychodzi)
[19:19:51] <mark_edward> type* use*
[19:20:00] <cmr> mark_edward: it only works for already-compiling crates
[19:20:11] <cmr> and I'm not actually finding type use, I'm just picking apart type signatures
[19:20:26] <mark_edward> i dunno
[19:20:58] <mark_edward> sounds like the compiler exposes a lot of etuff an ide coukld ue
[19:21:04] <cmr> it does
[19:21:20] <cmr> just gotta figure out how to use it :)
[19:21:23] <strcat> huh. read_ptr seems like a really pointless function
[19:21:37] * strcat shrugs
[19:21:44] <mark_edward> we'll call it... Cargo, in honor of some Rust related terminally i heard years back before i knew what Rust was and i think is long deprecated
[19:21:50] <mark_edward> *terminology
[19:22:08] *** Joins: xLII (xLII@2433BC90.F5F53E8A.2D6DB75E.IP)
[19:22:08] <cmr> mark_edward: package manager, deprecated+removed 0.5 I think
[19:22:31] <mark_edward> when rustpkg is finished, make it Cargo again!
[19:24:45] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[19:24:54] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[19:25:00] *** Quits: nano (nano@moz-972880B.superkabel.de) (Connection reset by peer)
[19:26:32] <MaikKlein> anyone knows that this means ? expected concrete lifetime, but found bound lifetime parameter &
[19:26:55] *** Joins: josh (josh@moz-264E1FDC.static.wiline.com)
[19:27:06] *** Quits: josh (josh@moz-264E1FDC.static.wiline.com) (Quit: josh)
[19:27:11] <nmatsakis> MaikKlein: I do.
[19:27:21] <nmatsakis> MaikKlein: but you'll need to give me an example for me to explain it most easily :)
[19:27:37] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[19:27:55] *** Joins: paupau (textual@moz-D6583788.hsd1.ca.comcast.net)
[19:28:17] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:28:20] <MaikKlein> nmatsakis, okay let me write an easy example, one moment :)
[19:28:54] *** Joins: josh (josh@moz-264E1FDC.static.wiline.com)
[19:30:02] *** Quits: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[19:30:37] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:31:07] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[19:31:49] <nmatsakis> MaikKlein: ok, gotta run but I'll be back, short version is that you have one function with a bound lifetime parmaeter, meaning that the lifetime is specified by the caller at the time of call, and otoh a function where the lifetime is free (not bound)
[19:32:05] <nmatsakis> as I said, it's helpful to have a concrete example to explain it in terms of
[19:32:28] <MaikKlein> nmatsakis, ok no problem thanks
[19:32:40] *** Quits: paupau (textual@moz-D6583788.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[19:33:33] <MaikKlein> nmatsakis, ah it works thanks!
[19:35:34] *** Quits: zslayton (Mibbit@moz-14AA87A9.nyc.res.rr.com) (Quit: http://www.mibbit.com ajax IRC Client)
[19:36:29] <MaikKlein> lifetimes are difficult sometimes :(
[19:36:52] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[19:37:37] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[19:38:31] *** Quits: tjc (tjc@2557E599.66715431.D25A875A.IP) (Quit: zzzzzzzzzz)
[19:38:39] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[19:40:37] *** Quits: jviereck (Adium@moz-A034D4DA.dclient.hispeed.ch) (Ping timeout)
[19:42:01] *** Joins: busylizzy (lisa@85228838.12D0DC84.211374C4.IP)
[19:42:03] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[19:43:09] <nmatsakis> MaikKlein: good. I'd like to figure out why you get those weird error messages that mention ReSkolemized, that's not supposed to happen...
[19:43:30] <cmr> I've seen that before too
[19:43:39] *** Quits: true_droid (Adium@moz-123FD9B8.beck.volia.net) (Quit: Leaving.)
[19:43:44] *** Quits: devinus (devinus@moz-3C0F65B9.sw.biz.rr.com) (Quit: Computer has gone to sleep.)
[19:44:12] *** Joins: devinus (devinus@moz-3C0F65B9.sw.biz.rr.com)
[19:44:18] <cmr> I like it because skolem sounds like golum
[19:44:20] <cmr> gollum?
[19:44:22] <MaikKlein> my first version of actors https://gist.github.com/MaikKlein/5960599 what do you think? I let the client implement the getters like get_chan and get_receiver, but it doesn't seem that trivial. :(
[19:45:42] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Ping timeout)
[19:46:38] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[19:47:10] *** Quits: ecr (Thunderbir@2557E599.66715431.D25A875A.IP) (Ping timeout)
[19:47:44] *** Quits: xLII (xLII@2433BC90.F5F53E8A.2D6DB75E.IP) (Ping timeout)
[19:47:48] <cmr> pcwalton: you mentioned that astconv does the typedef dejiggering thingy, but the def_map should map a use of a typedef to the typedef itself, right?
[19:48:37] *** Quits: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com) (Client exited)
[19:48:55] <mark_edward> MaikKlein: what is this? what are these actors? this isnt shakespeare...
[19:49:06] *** Quits: josh (josh@moz-264E1FDC.static.wiline.com) (Quit: josh)
[19:49:27] *** Quits: devinus (devinus@moz-3C0F65B9.sw.biz.rr.com) (Ping timeout)
[19:49:45] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[19:49:45] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 141815a52 to 145aa0ca9: 02http://git.io/N3iJvQ
[19:49:45] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[19:49:47] *** Joins: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP)
[19:49:48] <ghrust> 01[13rust01] 15bors pushed 9 new commits to 06auto: 02http://git.io/6LwM5g
[19:49:48] <ghrust> 13rust/06auto 1420e7c4c 15Daniel Micay: remove the unused exchange_malloc `align` parameter...
[19:49:48] <ghrust> 13rust/06auto 1405eb3cf 15Andrew Paseltiner: std: Implement `Iterator::size_hint` method for `Option` iterators
[19:49:48] <ghrust> 13rust/06auto 144306b80 15Brendan Zabarauskas: Impl Not for bool
[19:49:49] *** Parts: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP) ()
[19:50:24] *** husebyFEWD is now known as huseby
[19:51:52] <mark_edward> MaikKlein: does that compile?
[19:51:58] *** Quits: bent (chatzilla@F2D29657.F60B0462.67AC9B1.IP) (Connection reset by peer)
[19:52:21] <MaikKlein> mark_edward, haha such a bad pun :D, yeah it compiles ^.^
[19:52:30] *** Joins: bent (chatzilla@F2D29657.F60B0462.67AC9B1.IP)
[19:52:47] <strcat> task failed at 'assertion failed: handle.is_not_null()', /Users/rustbuild/src/rust-buildbot/slave/auto-mac-32-opt/build/src/libstd/rt/uv/mod.rs:100error opening /dev/urandom: Too many open files
[19:52:49] <strcat> ;\
[19:53:08] <MaikKlein> if I do let (port, chan) = stream::<T>(); does port and chan have a special connection? like the port can only get messages from this chan?
[19:53:20] <mark_edward> MaikKlein: https://gist.github.com/MaikKlein/5960599#file-gistfile1-rs-L46-L47 there seems to be a name shadowing bug here...
[19:53:22] <mark_edward> and yes
[19:53:36] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[19:53:38] <mark_edward> that shouldn't be allowed i think...
[19:54:03] <MaikKlein> mark_edward, hm this was intended 
[19:54:07] *** Quits: lerc (quassel@moz-598ED764.telstraclear.net) (Client exited)
[19:54:15] <strcat> brson: could we teach the scheduler to pass new tasks a random seed? atm they all open urandom themselves afaict
[19:54:15] <mark_edward> rusti:  let (x,y) = (1,2); let x = 5; x
[19:54:17] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/QZec
[19:54:19] <MaikKlein> mark_edward, you can reuse variable names
[19:54:24] *** Joins: eholk (eholk@moz-511062AD.uconnect.utah.edu)
[19:54:40] <mark_edward> rusti: let (x,y) = (1,2); let x = x + y; x
[19:54:42] -rusti- 3
[19:54:46] <strcat> maybe they read it anyway when they reseed
[19:54:51] <mark_edward> that really doesn't look right....
[19:55:05] <mark_edward> strcat: does that look right to you?
[19:55:13] <MaikKlein> mark_edward, it definitely is intended, it is in the tutorial
[19:55:33] <mark_edward> really! it just seems like that should be an error or something
[19:55:36] <strcat> you're just shadowing the earlier variable
[19:55:50] <strcat> rusti: let x = 5; { let x = 6; } x
[19:55:51] -rusti- <anon>:7:26: 7:27 warning: unused variable: `x` [-W unused-variable (default)]
[19:55:52] -rusti- <anon>:7          let x = 5; { let x = 6; } x
[19:55:52] -rusti-                                    ^
[19:55:52] -rusti- 5
[19:56:06] <MaikKlein> can ports cloned?
[19:56:09] <MaikKlein> be*
[19:56:17] *** Joins: vilonis (jared@moz-EE5D17ED.ph.ph.cox.net)
[19:56:23] <mark_edward> but it's not a new block, it's in the same block... you should at least be warned about it
[19:56:36] <mark_edward> rusti: let x = 5; let x = 6; x
[19:56:37] -rusti- <anon>:7:13: 7:14 warning: unused variable: `x` [-W unused-variable (default)]
[19:56:37] -rusti- <anon>:7          let x = 5; let x = 6; x
[19:56:37] -rusti-                       ^
[19:56:37] -rusti- 6
[19:57:26] <MaikKlein> this is the example of the tutorial
[19:57:26] <MaikKlein> static monster_factor: float = 57.8;
[19:57:26] <MaikKlein> let monster_size = monster_factor * 10.0;
[19:57:26] <MaikKlein> let monster_size: int = 50;
[19:57:38] <Ms2ger> No -Wshadow?
[19:57:54] <mark_edward> i'd think you should be warned about shadowing
[19:58:07] <mark_edward> is there a -Wall swittch for rustc?
[19:58:25] <strcat> no
[19:58:32] <strcat> and Wall in gcc/clang doesn't turn on *all* warnings anyway
[19:58:34] <strcat> only a few
[19:58:39] <MaikKlein> does anyone know if you can clone a Port somehow?
[19:58:55] <mark_edward> why is it called Wall then!!! they lied to me!
[19:59:24] <strcat> mark_edward: it turns on all warnings without real cases of false positives
[19:59:37] <strcat> clang has -Wmost, for all useful warnings (20x more than -Wall)
[19:59:45] <strcat> and -Weverything, for the useless/experimental/broken ones too
[19:59:47] *** Quits: vk (chatzilla@3E9D68F2.B1163E0C.2A6693DD.IP) (Ping timeout)
[19:59:49] <mark_edward> why is most more than all!
[19:59:50] *** Joins: jmgrosen (jmgrosen@moz-BF80C818.sbcc.edu)
[19:59:58] <strcat> -Wall only exists for gcc compatibility
[19:59:59] <mark_edward> that's just perverse
[20:00:15] <MaikKlein> ok I think I have to write my own version of a Port
[20:00:26] <mark_edward> MaikKlein: why are you trying to do that
[20:00:29] <bstrie> this is actually a misconception, -Wall just exists as an alias for all the warnings that Larry Wall cares about
[20:01:16] <strcat> anyway to turn on all the useful warnings in gcc you need to flip on 30+ switches
[20:01:23] <strcat> -Wmost is a huge timesaver
[20:01:25] <strcat> ;p
[20:01:26] <MaikKlein> I need to somehow move the port into the task like this
[20:01:27] <MaikKlein> let port = self.port.clone();
[20:01:28] <MaikKlein>         do spawn {
[20:01:28] <MaikKlein>            let value = port.recv();
[20:01:28] <MaikKlein>            println(fmt!("%?",value));
[20:01:28] <MaikKlein>         }
[20:01:38] <sp3d> I thought you were supposed to use a genetic algorithm to determine which warning flags were useful ;)
[20:01:47] <MaikKlein> *note there is no clone trait on port*
[20:01:56] <bstrie> MaikKlein: why do you need to clone it?
[20:02:27] <mark_edward> why ot put " let port = &self.port" in the spawn block?
[20:03:08] <MaikKlein> don't know I experimented via brute force
[20:03:12] <MaikKlein> sec
[20:04:20] *** Quits: jmgrosen (jmgrosen@moz-BF80C818.sbcc.edu) (Quit: jmgrosen)
[20:04:39] <bstrie> MaikKlein: are you trying to refer to the port from two different tasks?
[20:05:02] <cmr> mark_edward: It's not shadowing though
[20:05:03] <MaikKlein> bstrie, No I am confused atm, I think I was thinking wrong :D
[20:05:05] <cmr> it's rebinding
[20:05:08] <bstrie> sp3d: fortunately clang provides -Wsimulatedannealing to do this for you
[20:05:26] <mark_edward> cmr: what's the difference
[20:05:27] <bstrie> or -Whillclimbing if you're feeling frisky
[20:05:34] <cmr> we don't have shadowing, at all
[20:05:48] *** Joins: busylizzy (lisa@85228838.12D0DC84.211374C4.IP)
[20:07:06] <cmr> actually we might
[20:07:08] <cmr> unsure
[20:07:21] *** Joins: jviereck (Adium@moz-A034D4DA.dclient.hispeed.ch)
[20:07:26] *** Quits: carllerche (carllerche@moz-BF6CB667.hsd1.ca.comcast.net) (Quit: carllerche)
[20:07:28] <MaikKlein> lets say I have an object1 and I want to move that object into a new task, is it possible to get a reference on this object1 while it is in a new task?
[20:07:37] <cmr> MaikKlein: no
[20:07:59] <cmr> rusti: let x = 5; x = 4; x
[20:08:01] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/gHaH
[20:08:03] <cmr> rusti: let x = 5; let x = 4; x
[20:08:04] -rusti- <anon>:7:13: 7:14 warning: unused variable: `x` [-W unused-variable (default)]
[20:08:04] -rusti- <anon>:7          let x = 5; let x = 4; x
[20:08:04] -rusti-                       ^
[20:08:04] -rusti- 4
[20:08:10] <cmr> mark_edward: that is rebinding
[20:08:34] <cmr> rusti: let x = 5; { let x = 3; println(x.to_str()); }; x
[20:08:35] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/ZCLe
[20:08:43] <cmr> rusti: let x = 5u; { let x = 3u; println(x.to_str()); }; x
[20:08:44] -rusti- 3
[20:08:45] -rusti- 5
[20:08:50] <mark_edward> it just looks like shadowing to me...
[20:08:51] <cmr> mark_edward: that is shadowing
[20:08:56] <cmr> it's a matter of scope
[20:09:09] <mark_edward> i guess i see what you mean now.
[20:09:11] *** Quits: reyre (reyre@86C3727C.33EE9F8A.1139E686.IP) (Client exited)
[20:09:19] <cmr> you can also do:
[20:09:29] <cmr> rusti: let x = 5u; let mut x = 4i; x
[20:09:31] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/MSDS
[20:09:35] <bstrie> rusti: let (p, c) = stream(); do spawn { error!(p.recv()); } c.send(1);
[20:09:36] -rusti- ()
[20:09:36] -rusti- rust: ~"1"
[20:09:40] <bstrie> MaikKlein: ^
[20:10:02] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Ping timeout)
[20:10:27] <MaikKlein> bstrie, ah ok
[20:10:32] <MaikKlein> ok
[20:11:13] <MaikKlein> if I have an struct which has a Port and a Chan as members, it should be possible to just move the port into a new task right?
[20:11:41] *** Quits: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP) (Quit: Leaving.)
[20:11:47] <olsonjeffery> brson: ping
[20:12:47] *** Joins: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP)
[20:12:48] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[20:13:49] <cmr> mark_edward: also there's a -W warnings, for rust (not really useful though; all the warnings are on by default)
[20:14:03] <cmr> mostly useful as -D warnings
[20:14:29] <mark_edward> i see. thansk for the info
[20:15:35] <MaikKlein> like this https://gist.github.com/MaikKlein/5960860
[20:15:49] <MaikKlein> I need to somehow move my port into a new task
[20:16:10] <MaikKlein> line 38
[20:17:33] *** Joins: lerc (quassel@moz-598ED764.telstraclear.net)
[20:17:44] *** Joins: bytewise (bytewise@moz-649C630D.unitymediagroup.de)
[20:18:00] <steven_is_false> rusti: struct Foo; impl Drop for Foo { fn drop(&self) { println("Drop!") } } let _ = Foo; println("Before drop");
[20:18:01] -rusti- Before drop
[20:18:01] -rusti- ()
[20:18:17] <steven_is_false> rusti: struct Foo; impl Drop for Foo { fn drop(&self) { println("Drop!") } } let _foo = Foo; println("Before drop");
[20:18:18] -rusti- Before drop
[20:18:18] -rusti- Drop!
[20:18:18] -rusti- ()
[20:18:33] <strcat> that looks like a bug
[20:18:58] <steven_is_false> strcat: Yep. It's a known bug. I was checking to see if it was fixed yet.
[20:19:35] <MaikKlein> rusti: struct Bar; struct Foo { bar: Bar} let foobar = Foo; let move_test = foobar.bar; 
[20:19:36] -rusti- <anon>:7:57: 7:60 error: unresolved name `Foo`.
[20:19:36] -rusti- <anon>:7          struct Bar; struct Foo { bar: Bar} let foobar = Foo; let move_test = foobar.bar; 
[20:19:36] -rusti-                                                                   ^~~
[20:19:36] -rusti- error: aborting due to previous error
[20:19:36] -rusti- application terminated with error code 101
[20:19:42] <cmr> The destructors just plain aren't run?
[20:20:37] <Luqman> cmr: not when dest=Ignore
[20:20:55] <MaikKlein> rusti: struct Bar; struct Foo { bar: Bar} let foobar = Foo{bar: Bar}; let move_test = foobar.bar; 
[20:20:55] -rusti- <anon>:7:76: 7:85 warning: unused variable: `move_test` [-W unused-variable (default)]
[20:20:56] -rusti- <anon>:7          struct Bar; struct Foo { bar: Bar} let foobar = Foo{bar: Bar}; let move_test = foobar.bar; 
[20:20:56] -rusti-                                                                                      ^~~~~~~~~
[20:20:56] -rusti- ()
[20:21:13] <MaikKlein> hm
[20:22:05] *** Joins: tjc (tjc@2557E599.66715431.D25A875A.IP)
[20:22:05] *** ChanServ sets mode: +o tjc
[20:22:30] <strcat> graydon: when will gc cycles actually be run? I'm wondering how we can keep something like checking errno after a C call working
[20:22:42] <strcat> maybe just an attribute
[20:23:32] *** Joins: olleharstedt (Thunderbir@moz-80D8890F.ias.bredband.telia.com)
[20:23:34] <MaikKlein> rusti: struct Bar; struct Foo { bar: Bar} let foobar = Foo{bar: Bar}; let move_test = foobar.bar; print(fmt!(%?",foobar.bar); 
[20:23:35] -rusti- <anon>:7:112: 7:113 error: unknown start of token: 63
[20:23:35] -rusti- <anon>:7          struct Bar; struct Foo { bar: Bar} let foobar = Foo{bar: Bar}; let move_test = foobar.bar; print(fmt!(%?",foobar.bar); 
[20:23:35] -rusti-                                                                                                                          ^
[20:23:35] -rusti- application terminated with error code 101
[20:23:46] <MaikKlein> rusti: struct Bar; struct Foo { bar: Bar} let foobar = Foo{bar: Bar}; let move_test = foobar.bar; println(fmt!(%?",foobar.bar); 
[20:23:46] -rusti- <anon>:7:114: 7:115 error: unknown start of token: 63
[20:23:47] -rusti- <anon>:7          struct Bar; struct Foo { bar: Bar} let foobar = Foo{bar: Bar}; let move_test = foobar.bar; println(fmt!(%?",foobar.bar); 
[20:23:47] -rusti-                                                                                                                            ^
[20:23:47] -rusti- application terminated with error code 101
[20:23:52] *** Joins: roo (jesse@moz-D32719F.dynamic.ip.windstream.net)
[20:23:52] *** Quits: roo (jesse@moz-D32719F.dynamic.ip.windstream.net) (Quit: Leaving)
[20:24:06] <MaikKlein> rusti: struct Bar; struct Foo { bar: Bar} let foobar = Foo{bar: Bar}; let move_test = foobar.bar; println(fmt!("%?",foobar.bar); 
[20:24:06] -rusti- <anon>:8:4: 8:5 error: incorrect close delimiter: `}`
[20:24:06] -rusti- <anon>:8     };
[20:24:07] -rusti-              ^
[20:24:07] -rusti- application terminated with error code 101
[20:24:08] <brson> strcat: we could. not all tasks need random numbers though. is there a problem with opening /dev/urandom?
[20:24:09] <MaikKlein> ..
[20:24:11] <brson> olsonjeffery: pong
[20:24:35] <MaikKlein> rusti: struct Bar; struct Foo { bar: Bar} let foobar = Foo{bar: Bar}; let move_test = foobar.bar; println(fmt!("%?",foobar.bar)); 
[20:24:36] -rusti- <anon>:7:76: 7:85 warning: unused variable: `move_test` [-W unused-variable (default)]
[20:24:36] -rusti- <anon>:7          struct Bar; struct Foo { bar: Bar} let foobar = Foo{bar: Bar}; let move_test = foobar.bar; println(fmt!("%?",foobar.bar)); 
[20:24:37] -rusti-                                                                                      ^~~~~~~~~
[20:24:37] -rusti- {}
[20:24:37] -rusti- ()
[20:24:45] <MaikKlein> what
[20:24:54] <strcat> brson: well your PR died from too many open files while opening urandom, which makes me think it's a pretty big waste
[20:25:07] <cmr> MaikKlein: unit struct is pretty printed to {}
[20:25:13] <strcat> but maybe it was just bad luck
[20:25:22] *** Joins: vk (chatzilla@3E9D68F2.B1163E0C.2A6693DD.IP)
[20:25:25] <olsonjeffery> brson: so, picking up where we left off... 6855 doesn't mention anything about the pthread backend.. just the TLS storage of tasks and how schedulers become a special case of tasks.. do you need to plug in some background, there? and should it be done, first, before #4770 to flesh out infrastructure?
[20:25:26] <MaikKlein> cmr, I was expecting a move error
[20:25:49] *** Quits: sankha93 (Instantbir@F43B6114.922BE1F.EFB84E89.IP) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[20:25:52] <MaikKlein> cmr, that foobar.bar moved to "move_test"
[20:25:57] <cmr> oh hm
[20:25:58] <strcat> not sure when exactly it gets opened, I guess it could be done so that only currently running tasks could have urandom open (if it's not already)
[20:26:06] <brson> strcat: no, it's happened a few times
[20:26:34] <strcat> I guess it's yielding before closing it?
[20:26:41] <brson> strcat: it's only opened briefly during the rng ctor
[20:26:44] <brson> strcat: no
[20:26:47] <brson> i don't think so
[20:26:53] <steven_is_false> This is a list of all the places that match the pattern 'let _ ' http://pastebin.mozilla.org/2605478 . The bug https://github.com/mozilla/rust/issues/6892?source=cc might cause some of these places to have wrong behaviour.
[20:27:02] <strcat> brson: shouldn't it be limited to the # of real threads then?
[20:27:18] <brson> strcat: should, yes
[20:27:34] <brson> maybe there's a leak, or maybe there are other resources counting toword the fd limit
[20:27:42] <brson> i've also seen errors creating kqueues
[20:28:07] <brson> there was a bug where /dev/urandom doesn't close correctly as well
[20:28:11] <brson> in fact that may be the problem
[20:28:23] <brson> we don't check the error code of close on the fd because it doesn't always succeed
[20:28:56] <cmr> why wouldn't you be able to close it :\
[20:29:13] <brson> cmr: good question!
[20:29:25] <strcat> the only way close can fail on linux if you already called fflush is EINTR or an invalid fd
[20:29:46] <strcat> and I don't think we *write* to /dev/urandom
[20:29:49] <strcat> so...
[20:29:53] * strcat shrugs
[20:29:58] <mark_edward> brson: how is the I/O stuff going?
[20:30:01] *** Joins: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP)
[20:31:08] <strcat> http://buildbot.rust-lang.org/builders/auto-mac-64-opt/builds/332/steps/test/logs/stdio great
[20:31:14] <strcat> happened twice, not a fluke :(
[20:31:38] <brson> olsonjeffery: yeah, there's a lot of information missing in 6855. the basic idea is that all tasks will be running in a Task, but some tasks are backed by green threads and some are not
[20:31:50] <strcat> aha
[20:32:00] <brson> olsonjeffery: and that refactoring probably does need to be done before the pthread backend to pipes
[20:32:07] <brson> olsonjeffery: toddaaro is working on that refactoring now
[20:32:29] <brson> so a "thread task" will probably contain a mutex and condvar (lock_and_signal in the current runtime)
[20:32:48] <brson> whereas a green thread task blocks and wakes by interacting with the green thread scheduler
[20:32:48] <strcat> well I don't really see how this failure is related
[20:32:50] <strcat> ;\
[20:33:49] *** Joins: smvv_ (sander@moz-BAEA8EB2.dynamic.upc.nl)
[20:33:58] <brson> mark_edward: it's progressing. i'm currently working on upstreaming all our outstanding work, and ecr is working on implementing I/O, tcp and udp are working to some extent, though the API's are still in flux
[20:34:02] *** Quits: tjc (tjc@2557E599.66715431.D25A875A.IP) (Quit: zzzzzzzzzz)
[20:34:24] <brson> mark_edward: it will still be several months before we can switch from the old io to the new
[20:34:51] <cmr> brson: 0.8 few months, or 0.9 few months?
[20:34:52] <mark_edward> cool! think you'll make it into 1.0?
[20:34:55] *** Joins: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP)
[20:34:55] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/glzoLA
[20:34:55] <ghrust> 13rust/06auto 141aae28a 15Jens Nockert:  Replaces the free-standing functions in f32, &c....
[20:34:55] <ghrust> 13rust/06auto 1459e6a4d 15Jens Nockert: Forgot to grep for a function
[20:34:55] <ghrust> 13rust/06auto 142ed1cfc 15Jens Nockert: And I forgot to run the benchmarks after rebasing
[20:34:57] *** Parts: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP) ()
[20:35:21] <strcat> https://github.com/mozilla/rust/pull/7657/files can't see where this could cause the run.rs test_inherit_env test to fail...
[20:35:21] <brson> mark_edward: absolutely. there is no way rust will reach 1.0 before having a mature i/o library
[20:35:24] <mark_edward> brson: also, in rt::io::mod.rs i noticed some mention of streams? what exactly do you mean by a stream?
[20:35:45] *** Joins: tjc (tjc@2557E599.66715431.D25A875A.IP)
[20:35:45] *** ChanServ sets mode: +o tjc
[20:35:46] <brson> cmr: not 0.8
[20:35:57] <brson> cmr: though the new scheduler will probably be in for 0.8
[20:36:01] <cmr> mm
[20:36:18] <brson> mark_edward: a type that reads and writes bytes
[20:36:37] <mark_edward> so just Reader+Writer combo?
[20:37:09] <cmr> Probably not, Reader/Writer are seekable, which isn't an attribute streams have
[20:37:18] <strcat> I doubt we'll go 0.9 -> 1.0
[20:37:21] <cmr> (at least, the current reader/writer)
[20:37:27] <cmr> strcat: me too
[20:38:15] <smvv_> hi, I'm looking for thestinger or duckmatt. It's related to https://github.com/mozilla/rust/issues/4992 "implement a B-tree". What are the irc names of them? or if those are their nicknames on irc as well, when are they generally online on irc?
[20:38:25] <olsonjeffery> brson: so then toddaaro is doing 6855.. and i should wait on 6855 landing before circling back to 4770?
[20:38:25] * strcat is thestinger
[20:38:35] <olsonjeffery> i guess ill look at something else to work on, then..
[20:39:42] <smvv_> ah, hi. I would like to work on that bug as well and perhaps I can work together with duckmatt?
[20:40:21] <mark_edward> i see.
[20:40:27] <strcat> smvv_: well I don't know if duckmatt uses irc, I haven't seen them around before
[20:40:53] <strcat> you're free to work on it though, maybe you could email him
[20:40:55] <smvv_> i made two different data structures based on the treemap.rs interface (one with enums and one with two different pointers) and i would like to combine/merge the data structure and code with his
[20:40:59] <smvv_> ok
[20:41:16] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[20:42:02] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[20:42:13] <brson> mark_edward: yeah `trait Stream: Reader + Writer;`
[20:42:28] <brson> cmr: Seek is a seperate trait
[20:42:47] <smvv_> strcat: does he publish his work on github? because his github account does not show any activity
[20:42:47] <mark_edward> i think you'd have to remove seek and tell from Reader and Writer then
[20:42:51] <cmr> brson: in the current IO trait?
[20:42:52] <mark_edward> my compressor can't seek
[20:42:54] <brson> olsonjeffery: probably, yes. sorry
[20:42:58] <brson> cmr: no, in the new
[20:43:14] <strcat> smvv_: I don't know, I only know him as much as you do (from the comment on that bug)
[20:43:16] <cmr> Ok, good to know (and also thus my amendment "(at least, the current reader/writer)")
[20:44:18] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[20:44:39] <smvv_> strcat: ok. Isn't it better do develop the btree.rs as a separate crate in the beginning, and once the implementation is stable, copy the resulting btree.rs to the std or extra code repo?
[20:45:04] <smvv_> s/as a seperate crate/in a separate git repo/
[20:45:08] <strcat> smvv_: well ideally it would perform better than treemap in every case and just replace it
[20:45:23] <strcat> once it's done
[20:46:07] <olsonjeffery> brson: no problem.. im glad i asked before trying to dive in.. i guess, then, to keep this productive.. can you point me in a vague direction/category-of-tickets/sub-issues that are immediately actionable?
[20:46:45] <olsonjeffery> alternatively.. i can just ask about issues and you tell me if its open/being-worked-on/relevant
[20:47:23] *** Joins: jeff (jeff@moz-F81F6C4E.nyc.biz.rr.com)
[20:47:43] <jensnockert> How can I turn a @str into a &str?
[20:47:59] <cmr> jensnockert: autoborrow doesn't take care of it?
[20:48:21] <cmr> rusti: let x = @"foo"; println(fmt!("%?", x.as_slice()));
[20:48:23] -rusti- "foo"
[20:48:23] -rusti- ()
[20:48:29] <cmr> also that
[20:48:30] <smvv_> struct Tree { nodes: [Option<Node>, ..1] } struct Node { value: Tree } fn main() { Tree { nodes: [None] }; }
[20:48:35] <smvv_> is this a known bug? ^
[20:48:40] <smvv_> rusti: struct Tree { nodes: [Option<Node>, ..1] } struct Node { value: Tree } fn main() { Tree { nodes: [None] }; }
[20:48:40] -rusti- Killed
[20:48:41] -rusti- application terminated with error code 137
[20:48:42] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[20:48:43] <jensnockert> cmr: I'll try that.
[20:48:47] <brson> olsonjeffery: #6164 #6846 #6168 #4248 #6210 #6167 #5021 #6844 #1226 are all important and not (very) blocked on things. a lot of them involve implementing new I/O types. this thread contains descriptions of the most pressing issues: https://mail.mozilla.org/pipermail/rust-dev/2013-May/004305.html
[20:49:16] <brson> olsonjeffery: there's also porting various concurrency types that i haven't looked at, mostly in extra::sync and extra::arc
[20:49:50] <olsonjeffery> brson: thanks! i'll start looking at those (the list of issues)
[20:50:00] <cmr> steven_is_false is working on arc
[20:50:04] <cmr> afaik
[20:50:13] <cmr> steven_is_false: did you figure out those problems yet, btw?
[20:50:17] <brson> strcat: ok, I'm going to have to look at this urandom thing now. sadtimes
[20:50:55] <steven_is_false> cmr: I've actually made a lot of improvements very recently.
[20:51:01] <strcat> brson: my rollup was a failure because of some really weird bug :(
[20:51:05] <strcat> don't see how it's at all related
[20:51:18] *** Joins: BitPuffin (quassel@moz-49828767.cust.tele2.se)
[20:51:22] <strcat> that bot just hates me ;p
[20:51:40] *** Joins: Blub\0 (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[20:51:56] <steven_is_false> Some of my mistakes were very stupid though.
[20:52:07] *** Quits: Ms2ger (Ms2ger@moz-E9883900.access.telenet.be) (Quit: nn)
[20:52:09] <steven_is_false> Luckily, I was able to make some of them impossible.
[20:52:31] <steven_is_false> For example, now a RWArc is literally, a semaphore, and a mutex.
[20:52:41] <steven_is_false> Whereas before it was much more messy.
[20:52:51] <cmr> tjc: is def_arg still used at all? grepping the source I see it in matches, but never constructed
[20:52:55] <strcat> rust: task failed at 'This Process's stdout was redirected to an existing file descriptor.', /Users/rustbuild/src/rust-buildbot/slave/auto-mac-64-opt/build/src/libstd/run.rs:207
[20:52:56] <steven_is_false> Sorry, RWLock, not RWArc
[20:52:57] <strcat> ok
[20:53:02] <tjc> cmr: hmmâ€¦ let me look
[20:53:04] <strcat> rust: task failed at 'assertion failed: k.is_empty() || output.contains(fmt!("%s=%s" , * k , * v))', /Users/rustbuild/src/rust-buildbot/slave/auto-mac-64-opt/build/src/libstd/run.rs:1305
[20:53:06] * strcat shrugs
[20:53:27] <cmr> tjc: (I ask because I'm trying to figure out what it is, and it seems it isn't!)
[20:53:34] <tjc> cmr: there's one place where it's used, at least
[20:53:50] <tjc> actually, my code may not be up-to-date
[20:53:58] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[20:54:02] <tjc> but I see one in resolve::resolve_pattern
[20:54:38] <mark_edward> brson: can i ask why this stuff is all in rustrt right now?
[20:54:49] <mark_edward> what exactly does the rust runtime provide?
[20:55:16] <mark_edward> i'm sorry if these are bg questions, but most of rust's workings arent really documented anywhere (understandably as they're in flux)
[20:55:46] <strcat> it's possible the pointer one somehow broke this...
[20:56:06] <cmr> mark_edward: aiui the runtime contains everything needed to support rust's task and i/o code
[20:56:31] <brson> mark_edward: most of rustrt is dedicated to the old runtime. most of the new code is in std::rt. in the new rt i'm mostly using rustrt (C++) for global variables (which rust hasn't had support for)
[20:56:40] *** Quits: olleharstedt (Thunderbir@moz-80D8890F.ias.bredband.telia.com) (Ping timeout)
[20:56:49] <brson> mark_edward: once the newrt is turned on by default we'll delete the vast majority of our C++
[20:57:07] <mark_edward> cmr: what sort of stuff is that, besides the scheduler? why is it in the runtime, and not.. i dunno regular library code?
[20:57:11] * strcat drops that one
[20:57:21] <mark_edward> brson: thanks, i appreciate that nfo!
[20:57:36] <strcat> brson: there's 1 function left using the exchange vector code btw
[20:57:42] <strcat> probably easy to zap it and the exchange allocator now
[20:58:06] <brson> strcat: already zapped in my branch i think
[20:58:11] <strcat> ah
[20:58:46] <strcat> removing the headers from ~[] and ~str might actually be harder than ~T was now that I'm looking at this code
[20:58:54] *** Joins: mib_t8u7wn (Mibbit@85B1BA1F.4C48F3F3.C2E02DEF.IP)
[20:58:58] *** Quits: MaikKlein (maik@moz-292B05D.dip0.t-ipconnect.de) (Ping timeout)
[20:59:13] <cmr> tjc: oh, I see it now
[20:59:35] <tjc> cmr: it seems a little weird that it's only used when resolving patterns, but the mysteries of resolve are many-faceted
[20:59:41] <cmr> heh
[20:59:47] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[20:59:57] <kimundi> smvv_: Dunno if it's known, but It's a bug that that code terminates the compiler instead of giving your a correct error message.
[21:00:12] <strcat> rusti: struct Foo; let xs = ~[Foo, Foo, Foo]; let ys: &[Foo] = xs; let t: (uint, uint) = cast::transmute(ys); t
[21:00:12] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/AcGD
[21:00:26] <strcat> rusti: struct Foo; let xs = ~[Foo, Foo, Foo]; let ys: &[Foo] = xs; let t: (uint, uint) = unsafe { cast::transmute(ys) }; t
[21:00:27] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/BbWA
[21:00:34] <strcat> rusti: struct Foo; let xs = ~[Foo, Foo, Foo]; let ys: &[Foo] = xs; let t: (uint, uint) = unsafe { std::cast::transmute(ys) }; t
[21:00:35] -rusti- (140072441612592, 3)
[21:00:51] <strcat> (that's kind of weird)
[21:01:26] <kimundi> So, zero sized types take up space? :P
[21:01:49] <strcat> in vectors
[21:01:51] <strcat> not elsewhere
[21:02:11] <strcat> vec.rs uses nonzero_size_of for some reason
[21:02:14] <kimundi> ah, that was what  meant
[21:02:17] <kimundi> hm
[21:02:18] <cmr> plus:
[21:02:37] <cmr> rusti: struct Foo; let xs = ~[Foo]; fmt!("%?", xs)
[21:02:43] -rusti- timeout triggered!
[21:02:48] <jensnockert> Holy christwagons, I am parsing OpenCL vector accessors \o/
[21:02:48] <steven_is_false> Okay, so here's the latest version of my refactoring https://github.com/sstewartgallus/rust/tree/refactor_arc/src/libextra/sync
[21:02:58] <strcat> cmr: well %? is totally broken/unsafe
[21:03:00] <jensnockert> Now I just need to actually implement them.
[21:03:00] <strcat> so...
[21:03:03] * strcat isn't surprised
[21:03:04] <smvv_> kimundi: rustc is aborted due to a stack overflow. it happens in middle::trans::adt::represent_type -> middle::trans::adt::represent_type_uncached -> middle::trans::adt::mk_struct -> vec::__extensions__::map -> middle::trans::type_of::sizing_type_of -> middle::trans::adt::represent_type (recursion)
[21:03:04] <kimundi> hm, in theory a vector of zero sized types could be represented as (null, size)
[21:03:06] *** Joins: jmgrosen (jmgrosen@moz-BF80C818.sbcc.edu)
[21:03:10] <cmr> strcat: right, but usually it works well enough :p
[21:03:21] <steven_is_false> The problem I'm having is in the test sync::shared_mut::rwarc::tests::test_rw_write_cond_downgrade_read_race test case.
[21:03:42] <cmr> kimundi: I don't think that's a good idea, it'd require special casing all of the vector code for ptr==null, wouldn't it?
[21:03:44] <kimundi> smvv_: Yeah, the problem is that you're constructing an infinite type, and rustc isn't smart enough to no recurse infinite there
[21:03:59] <steven_is_false> I think my scheme for waiting with a wait queue, and a write lock is incorrect.
[21:04:23] <kimundi> cmr: Maybe, I have no idea
[21:04:28] <steven_is_false> Can anybody sanity check my idea for wait_with in the WaitQueue class?
[21:04:42] <steven_is_false> And the implementation of Unlock for the WriteLock class?
[21:04:45] <kimundi> Could also just be a 1byte allocation to get a valid pointer
[21:05:57] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[21:06:06] <strcat> cmr: yeah but I mean it allows you to traverse private fields
[21:06:09] <strcat> infinite loops on cycles
[21:06:11] <strcat> etc.
[21:06:39] <pcwalton> jensnockert: via a macro?
[21:06:51] <jensnockert> pcwalton: No, added it to the compiler.
[21:06:54] <strcat> and remembering when I was wondering where we had the actual visit code, as in traversing data? we don't
[21:06:56] <pcwalton> ah
[21:06:58] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:07:07] <jensnockert> pcwalton: I want them to compile down to good stuff for the SIMD types.
[21:07:11] <strcat> repr.rs implements it by hardcoding the representations
[21:07:17] *** Quits: jviereck (Adium@moz-A034D4DA.dclient.hispeed.ch) (Quit: Leaving.)
[21:07:29] <jensnockert> pcwalton: extractelement + shufflevector, probably.
[21:07:49] <pcwalton> ah
[21:07:54] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[21:08:10] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[21:08:22] *** Joins: MaikKlein (maik@moz-292B05D.dip0.t-ipconnect.de)
[21:08:25] *** Quits: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Ping timeout)
[21:08:41] <acrichto> would someone be able to help me with https://github.com/mozilla/rust/issues/7673 ?
[21:09:47] <strcat> I don't really understand how ~Trait can work at all considering that you can mix managed/unmanaged unique
[21:09:50] *** Quits: lmandel (lmandel@F2D29657.F60B0462.67AC9B1.IP) (Quit: lmandel)
[21:10:04] <pcwalton> acrichto: I think there are some compiler bugs there
[21:10:15] <Luqman> strcat: it checks for that afaik
[21:10:17] <acrichto> pcwalton: should all the cases work? or only some?
[21:10:20] <pcwalton> strcat: explain?
[21:10:31] <Luqman> strcat: that was what we needed to add to fix half the broken tests
[21:10:31] <strcat> pcwalton: well, how does it handle them having a different representation now?
[21:10:42] <strcat> Luqman: it still seems wrong in type_.rs though
[21:11:01] <pcwalton> acrichto: "a as ~T" and "a as @T" should work I think.
[21:11:07] <strcat> Luqman: it uses Unique
[21:11:12] <strcat> or whatever
[21:11:15] <strcat> the one for a box-header
[21:12:02] * strcat would be pretty surprised if ~Trait still worked beyond the few naive tests
[21:12:43] *** Joins: olleharstedt (Thunderbir@moz-80D8890F.ias.bredband.telia.com)
[21:12:47] <strcat> rusti: let x = ~5; let y = x as ~ToStr; y
[21:12:49] *** Joins: relistan (relistan@moz-2DE8112B.cable.virginmedia.com)
[21:13:13] *** Quits: vk (chatzilla@3E9D68F2.B1163E0C.2A6693DD.IP) (Ping timeout)
[21:13:25] <strcat> rusti: let x = ~5; let y = x as ~ToStr; let t: (uint, uint) = unsafe { std::cast::transmute(y); } t
[21:13:25] -rusti- <anon>:7:100: 7:101 error: expected `;` but found `t`
[21:13:25] -rusti- <anon>:7          let x = ~5; let y = x as ~ToStr; let t: (uint, uint) = unsafe { std::cast::transmute(y); } t
[21:13:26] -rusti-                                                                                                              ^
[21:13:26] -rusti- application terminated with error code 101
[21:13:34] <strcat> rusti: let x = ~5; let y = x as ~ToStr; let t: (uint, uint) = unsafe { std::cast::transmute(y) }; t
[21:13:35] -rusti- (6358384, 140510662494464)
[21:13:58] <strcat> rusti: let x = ~5; let y = x as ~ToStr; let (_, i): (uint, *int) = unsafe { std::cast::transmute(y) }; unsafe { *i }
[21:13:59] -rusti- 5
[21:14:17] <strcat> rusti: let x = ~5; let y = x as ~ToStr; y.to_str()
[21:14:18] -rusti- ~"5"
[21:14:20] * strcat shrugs
[21:14:22] <strcat> I guess it handles it
[21:14:26] <Luqman> strcat: hmm, i remember looking and meth::trans_trait_cast didn't make any assupmtion about what you were casting and just stuck it in the first field of the pair
[21:14:50] <strcat> well it still works for non-managed unique at least
[21:14:57] <Luqman> strcat: and meth::trans_trait_callee_from_llval checks for whether it's unique or managed-unique
[21:15:02] <strcat> it's much more clever than I thought if it works for both
[21:15:04] <strcat> Luqman: ah
[21:15:10] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[21:15:18] <strcat> so it reads the tydesc in the vtable and actually decides based on that
[21:15:47] <strcat> somewhat amusing to me that ~Trait was so resilient to that change when everything else wasn't
[21:15:50] *** Quits: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP) (Quit: Leaving.)
[21:15:54] *** Quits: MaikKlein (maik@moz-292B05D.dip0.t-ipconnect.de) (Ping timeout)
[21:16:09] <Luqman> strcat: no it doesn't check the tydesc, it checks based on callee_ty which `seems` to work
[21:16:45] *** Quits: Kruppe (user@moz-4DDA8AB8.uwaterloo.ca) (Ping timeout)
[21:18:30] <strcat> Luqman: what's callee_ty?
[21:18:50] <strcat> I just have a hard time understanding how it can possible still work
[21:18:52] <strcat> like
[21:18:57] <strcat> you have a generic fn taking ~ToStr
[21:19:03] <strcat> it needs to know how to destroy ~ToStr
[21:19:08] <strcat> I guess it just calls the tydesc glue
[21:19:18] * strcat shrugs
[21:19:30] <strcat> possibly*
[21:19:55] <mib_t8u7wn> Hi. I'm just getting started with Rust. I'm following the getting started tutorial. I install Rust 0.7, created the sample hello.rs file and rand "rustc hello.rs" in the relevant directory. I got an error: libgcc_s_dw2-1.dll is missing. I realised I hadn't installed g++. I then tried to install the exe
[21:20:39] <strcat> mib_t8u7wn: you need mingw installed
[21:20:47] <mib_t8u7wn> from here ( http://sourceforge.net/projects/mingw/files/Installer/mingw-get-inst/mingw-get-inst-20120426/ ). It asked me what languages I'd like to install the compiler for, listing C, C++, Ada and others. I choose C and C++ because I don't know which I should install
[21:21:19] <cmr> mib_t8u7wn: https://github.com/mozilla/rust/wiki/Note-getting-started-developing-Rust, see the mingw instructions for windows
[21:21:22] <mib_t8u7wn> I ran the same command line command and got the same error. I assume it was wrong to install C and C++ compilers. Which should I instal?
[21:21:26] <mib_t8u7wn> oh
[21:21:28] <mib_t8u7wn> cool
[21:21:28] <mib_t8u7wn> thanks
[21:21:37] <cmr> (shouldn't need any of the stuff after step 5, I think)
[21:22:29] <strcat> gmail is weird
[21:22:40] <strcat> it auto-detected this message as being polish
[21:22:56] <strcat> and changed someone's name from Patryk to Patrick
[21:23:04] <strcat> there was no actual polish...
[21:23:41] <strcat> mib_t8u7wn: you probably do need both C and C++
[21:23:48] <strcat> because rust needs libstdc++ in addition to libgcc_s
[21:23:55] <strcat> for now
[21:24:35] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[21:24:41] <olsonjeffery> is there any concise documentation summarizing the ~object issue and its consequences?
[21:25:26] <strcat> olsonjeffery: I just expected it to break from my changes and I didn't, so I'm impressed with it
[21:26:41] *** Joins: AngelinaJolie (Mibbit@EC20CBFE.F77EB822.2CAC14BC.IP)
[21:26:44] <AngelinaJolie> FREE BRAZZERS ACCOUNTS EVERYDAY HERE ---> http://gratisbrazzers.blogspot.com
[21:26:45] *** Parts: AngelinaJolie (Mibbit@EC20CBFE.F77EB822.2CAC14BC.IP) ()
[21:27:03] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[21:28:01] *** Joins: ecr (Thunderbir@2557E599.66715431.D25A875A.IP)
[21:28:02] <olsonjeffery> and rt::local is TLS ?
[21:28:14] <olsonjeffery> O_o
[21:30:32] *** Joins: reyre (reyre@moz-9002CDDA.cpe.net.cable.rogers.com)
[21:30:41] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[21:31:16] *** Joins: paupau (textual@moz-D6583788.hsd1.ca.comcast.net)
[21:31:44] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[21:35:17] <brson> olsonjeffery: rt::local is a general interface for runtime types that need to be pulled out of some local storage
[21:35:34] <brson> but it isn't the implementation of tls
[21:35:37] <olsonjeffery> ah..
[21:35:47] <olsonjeffery> so that ties into the c++ global stuff you mentioned earlier
[21:35:55] *** Quits: jeff (jeff@moz-F81F6C4E.nyc.biz.rr.com) (Quit: jeff)
[21:36:09] *** Quits: vilonis (jared@moz-EE5D17ED.ph.ph.cox.net) (Quit: WeeChat 0.3.8)
[21:39:42] <brson> olsonjeffery: the bindings to thread local storage are in rt::thread_local_storage and there's also a small wrapper to that in rt::local_ptr
[21:39:55] <brson> olsonjeffery: you should be looking at brson/io fyi
[21:40:00] <brson> not master
[21:40:07] <olsonjeffery> ack, ok.
[21:40:07] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Ping timeout)
[21:41:03] <andor> is there a reason why debug!/info! whatever has such ugly output? should i just use println for simple debugging statements?
[21:41:05] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Quit: Leaving)
[21:41:24] <brson> andor: logging needs love
[21:41:45] *** Quits: KindOne (KindOne@moz-BD665EC4.dynamic.ip.windstream.net) (Ping timeout)
[21:41:51] <mib_t8u7wn> I'm installing Rust on Window 7 64bit. I've been following the tutorial. Reached a point where it asks me to install Curl to my MSys home folder that they say should be at: C:\MinGW\msys\1.0\home\<your_name> . Mine has no "home" directory. Anyone know what my home folder might be?
[21:42:04] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[21:42:24] <andor> mib_t8u7wn: try echo $HOME from an msys shell
[21:42:26] *** Joins: StarLight (StarLight@moz-754F462F.dynamic.avangarddsl.ru)
[21:42:28] *** Joins: KindOne (KindOne@moz-BD665EC4.dynamic.ip.windstream.net)
[21:42:33] <mib_t8u7wn> brilliant
[21:42:54] *** Quits: Sergio965 (sergiobz@moz-BB21156B.dynamic.csail.mit.edu) (Ping timeout)
[21:43:15] *** Quits: relistan (relistan@moz-2DE8112B.cable.virginmedia.com) (Quit: relistan)
[21:43:19] <mib_t8u7wn> worked. Thanks :)
[21:43:19] <andor> brson: not sure what to make of that, i'll just stick to println then 
[21:43:57] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[21:44:19] *** Quits: eholk (eholk@moz-511062AD.uconnect.utah.edu) (Quit: eholk)
[21:46:22] <tjc> andor: he's just saying it needs work
[21:46:37] <tjc> there's no reason other than nobody having found time to make it better
[21:47:37] <brson> bblum: reviewing your pr now
[21:52:46] *** Quits: jmgrosen (jmgrosen@moz-BF80C818.sbcc.edu) (Ping timeout)
[21:53:11] *** Joins: jmgrosen (jmgrosen@moz-BF80C818.sbcc.edu)
[21:55:18] *** Quits: KindOne (KindOne@moz-BD665EC4.dynamic.ip.windstream.net) (Ping timeout)
[21:55:26] *** Joins: vk (chatzilla@3E9D68F2.B1163E0C.2A6693DD.IP)
[21:55:26] <brson> ecr: i'm seeing segfaults in udp tests on mac
[21:55:35] <jack> graydon: how do you have the build slaves force rebuild llvm? we need something like that for servo to force rebuild rust
[21:55:40] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
[21:56:10] <graydon> I put a file in the repo called rustllvm/llvm-auto-clean-trigger
[21:56:23] <graydon> it's make dependency that causes clean-llvm
[21:56:23] <graydon> nothing fancy
[21:56:27] <brson> ecr: https://gist.github.com/brson/5961634
[21:56:29] <graydon> you touch it, your commit will cause a rebuild
[21:56:39] <brson> ecr: happens periodically running with TESTNAME=udp
[21:57:05] <jack> graydon: what is it called in rust?
[21:57:17] <graydon> jack: hm?
[21:57:24] <brson> ecr: frighteningly, it doesn't seem to happen with RUST_THREADS=1. not sure what to make of that
[21:58:15] <jack> graydon: it's llvm-auto-clean-trigger?
[21:58:36] <graydon> jack: src/rustllvm/llvm-auto-clean-trigger
[21:59:04] <graydon> see Makefile.in line 552
[21:59:15] <jack> graydon: thx
[22:00:35] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[22:01:26] *** Quits: jmgrosen (jmgrosen@moz-BF80C818.sbcc.edu) (Quit: jmgrosen)
[22:04:05] *** Joins: KindOne (KindOne@moz-BD665EC4.dynamic.ip.windstream.net)
[22:04:16] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Textual IRC Client: www.textualapp.com)
[22:05:29] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[22:10:15] <cmr> andor: it's mostly bad now because of the changes to make it use fmt!, it should be an easy cleanup, but... very low priority
[22:10:36] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[22:10:36] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/glzoLA
[22:10:36] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[22:11:07] <cmr> jensnockert: :D
[22:11:18] * jensnockert hugs bors.
[22:12:14] <andor> cmr: yeah, i figured as much
[22:12:23] *** Quits: mib_t8u7wn (Mibbit@85B1BA1F.4C48F3F3.C2E02DEF.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:12:44] <mib_rvytpl> why is returning in a block function an error?
[22:12:58] <ecr> brson: uh oh, i'll take a look
[22:13:12] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[22:13:40] *** Joins: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP)
[22:13:40] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/yGLGJw
[22:13:40] *** Parts: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP) ()
[22:13:41] <brson> ecr: only seems to happen on mac
[22:13:44] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[22:13:44] <ghrust> 01[13rust01] 15bors pushed 8 new commits to 06auto: 02http://git.io/Ol0HRw
[22:13:44] <ghrust> 13rust/06auto 14a4af096 15Daniel Micay: remove the unused exchange_malloc `align` parameter...
[22:13:44] <ghrust> 13rust/06auto 14f2bd441 15Andrew Paseltiner: std: Implement `Iterator::size_hint` method for `Option` iterators
[22:13:44] <ghrust> 13rust/06auto 14763d846 15Brendan Zabarauskas: Impl Not for bool
[22:13:45] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[22:13:57] *** aatch|gone is now known as aatch
[22:14:32] <strcat> aatch: \o
[22:14:45] <aatch> strcat, hey
[22:14:50] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[22:15:20] <cmr> mib_rvytpl: should it return from the closure, or the enclosing function?
[22:15:35] <strcat> it can't return from the enclosing function
[22:15:38] <strcat> there's no choice
[22:15:39] <mib_rvytpl> cmr the closure, I think...
[22:16:04] <mib_rvytpl> basically I have a function (say foo) that takes a closure (say bar)
[22:16:22] <mib_rvytpl> and within foo bar is call to get a result that gets passed through foo to be returned
[22:16:31] <mib_rvytpl> to the caller of foo
[22:16:36] <mib_rvytpl> *bar is called
[22:18:06] *** Joins: MaikKlein (maik@moz-292B05D.dip0.t-ipconnect.de)
[22:18:17] <brson> ecr: looks like maybe there needs to be a check  for nread=0
[22:18:24] <cmr> strcat: sure it could, pass it the return address?
[22:18:30] <ecr> brson: based on that gist, it looks like the udp receive callback was called with a null pointer for the source address
[22:18:43] <ecr> brson: hm, maybe.
[22:18:45] <brson> ecr: it is
[22:18:50] <brson> ecr: and nread = 0
[22:18:51] <cmr> (not saying it *should*)
[22:18:51] <strcat> cmr: you can't return from the original parent function in a closure
[22:18:56] <strcat> you don't where where and how the closure is used
[22:18:59] <strcat> it's impossible
[22:19:11] <strcat> the 'return' syntax in for loops doesn't do what it says
[22:19:29] <ecr> brson: ah, ok. 
[22:19:36] <strcat> it doesn't return from the parent function
[22:19:49] <strcat> it just tells the *actual* caller of the closure it *wants* to
[22:19:52] <brson> ecr: i wonder why it would do that on mac only and if libuv documents this
[22:20:24] <mib_rvytpl> strcat right, what I have is foo taking bar and calling bar; bar returns a result that foo then returns
[22:20:42] <strcat> yeah, that could be allowed
[22:21:04] <ecr> brson: I didn't see anything in libuv, but I'll dive into the source files and check. I'm not entirely sure what we should do if nread = 0, give a dummy IP?
[22:21:41] <MaikKlein> does anyone have some experience with tasks and can tell me how I would do this? https://gist.github.com/MaikKlein/5961831
[22:21:44] <mib_rvytpl> strcat what are the circumstances in which "error: `return` in block function" is outputed?
[22:21:48] <brson> ecr: me either. is it ever useful to receive 0 bytes? maybe we can ignore it ...
[22:21:55] <strcat> mib_rvytpl: any time you use return in a closure
[22:22:13] *** Quits: jdm (jdm@F2D29657.F60B0462.67AC9B1.IP) (Quit: Lost terminal)
[22:22:17] <strcat> except in for loops where there's a total hack to make it "work" (except when it doesn't)
[22:22:28] <kmc> MaikKlein: aiui the current practice is to wrap the port in a Cell so you can get it back
[22:22:46] <strcat> you can also leverage the current for loop to read arbitrary memory
[22:22:51] <MaikKlein> kmc, a cell?
[22:23:06] <mib_rvytpl> strcat why is that correct behavior? (not saying it isn't, just not sure why)
[22:23:10] <strcat> kmc: or just flip on once functions with -Z
[22:23:27] <kmc> MaikKlein: yeah std::cell::Cell<t>
[22:23:29] <strcat> mib_rvytpl: because some people would be confused by it, so it's something that has to be discussed
[22:23:47] <strcat> we allow return in nested fn blocks though so I don't really buy the argument that it'd be confusing in closures
[22:24:07] *** Joins: xLII (xLII@2433BC90.F5F53E8A.2D6DB75E.IP)
[22:24:10] <strcat> I'd rather not have 'do' but be able to 'return' from a closure
[22:24:20] <mib_rvytpl> strcat ah so it's not a "feature", per se?
[22:24:26] <strcat> or just forbid it in 'do'
[22:24:31] <mib_rvytpl> that is, it's not something philosophically desired?
[22:24:31] <ecr> brson: possibly. only reason I can think of would be a "keepalive" type of thing, but that wouldn't work in UDP anyway
[22:24:38] <strcat> mib_rvytpl: I don't know if it is
[22:24:47] <strcat> imo, it should definitely be allowed in a plain old closure
[22:24:50] <ecr> brson: probably safe to just ignore the packet then
[22:24:52] <aatch> Ok, so I've reached the point where I'm creating new errors faster than I can fix the old ones and I can predict where things are going to break in the next phase and it's a lot of work.
[22:24:54] <strcat> inside do, maybe not
[22:24:55] <MaikKlein> kmc, thanks
[22:24:55] <mib_rvytpl> hrmmm OK, thank you strcat!
[22:25:04] <aatch> So, time to roll back...
[22:25:05] <mib_rvytpl> I guess I can just hack around it to avoid using "return"
[22:25:13] <mib_rvytpl> (just avoiding that keyword should suffice?)
[22:25:25] <strcat> mib_rvytpl: you can just structure the code to not need early returns
[22:25:30] <strcat> you only need 'return' for an early return
[22:25:41] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:25:53] <mib_rvytpl> strcat right, that's exactly what I mean
[22:25:56] <mib_rvytpl> thanks so much for your help!
[22:26:06] <cmr> I think it'd be a good feature to have, and I'm also not convinced it'd be that confusing
[22:26:24] <ecr> brson: actually, what we might want to do is if nread = 0 && src == null pointer, then ignore it (since it's nonsensical). you could imagine a protocol built on UDP that using 0-data packets as a ping or something
[22:26:51] <ecr> brson: nread = 0 && src != null would return an empty buffer and the address
[22:27:14] *** Quits: xLII (xLII@2433BC90.F5F53E8A.2D6DB75E.IP) (Ping timeout)
[22:27:21] *** Joins: roo (jesse@moz-D32719F.dynamic.ip.windstream.net)
[22:27:24] *** Quits: paupau (textual@moz-D6583788.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[22:28:08] <strcat> cmr: but really, the current for loop is horrific ;p
[22:28:29] <strcat> rusti: fn bar(f: &fn(int) -> bool) -> bool { for 3.times { f(2); } true } for bar |x| { println(x.to_str()); break; }
[22:28:31] -rusti- 2
[22:28:31] -rusti- 2
[22:28:31] -rusti- 2
[22:28:31] -rusti- ()
[22:28:31] <cmr> strcat: where's your PR to make the switch? :P
[22:29:14] <strcat> cmr: I could easily switch them all to a syntax ext...
[22:29:30] <brson> ecr: sounds reasonable
[22:29:33] <strcat> I don't know how to implement a new actual for loop
[22:29:46] <strcat> I could totally remove the current one though...
[22:30:07] <ecr> brson: I guess a UDP packet with 0 data is roughly equivalent to opening a TCP connection but never sending anything.
[22:30:27] <pcwalton> ok, de-"copy"'d libextra
[22:30:30] <pcwalton>  253 files changed, 2840 insertions(+), 2361 deletions(-)
[22:31:29] *** Joins: eholk (eholk@moz-511062AD.uconnect.utah.edu)
[22:32:47] <steven_is_false> Hoorah! All my tests passed for my refactoring!
[22:32:51] *** Quits: BitPuffin (quassel@moz-49828767.cust.tele2.se) (Input/output error)
[22:33:03] *** Joins: BitPuffin (quassel@moz-49828767.cust.tele2.se)
[22:33:07] *** Joins: paupau (textual@moz-D6583788.hsd1.ca.comcast.net)
[22:33:16] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:33:33] <MaikKlein> no
[22:33:36] <MaikKlein> sth is wrong here
[22:33:47] <MaikKlein> if I do std::cell::Cell::new(self.port); it always moves the whole object into the cell
[22:33:50] <MaikKlein> not only the port
[22:33:58] <ecr> brson: from the source, looks like libuv calls the udp receive callback with nread = 0 and src_addr = NULL if it encounters an error and that error is EAGAIN or EWOULDBLOCK
[22:34:14] <steven_is_false> I have a bool flag for if a lock is downgraded. As I understand it, destructors use a flag anyways, and there's a special attribute that lets one combine it with the destructor flag right?
[22:34:17] <strcat> MaikKlein: it moves just the port into it
[22:34:20] *** Joins: jdm (jdm@F2D29657.F60B0462.67AC9B1.IP)
[22:34:25] <strcat> but you can no longer use an object when you've moved from it
[22:34:26] <ecr> brson: for any other error, it does nread = -1 and src_addr = NULL
[22:34:34] <steven_is_false> Nvm that doesn't work.
[22:34:37] <strcat> you can deconstruct an object into fields in one go
[22:34:47] <strcat> let Foo{x: x, y: y} = foo;
[22:34:53] <strcat> to avoid partial moves
[22:35:02] <brson> ecr: ok, is that EAGAIN error passed up to the read_cb and are we supposed to issue the read again, or does libuv do it for us?
[22:35:50] <brson> ecr: if it's the former then I guess we need to propagate the EAGAIN/EWOULDBLOCK errors all the way up and let the user figure it out. thanks unix
[22:35:52] *** Quits: BitPuffin (quassel@moz-49828767.cust.tele2.se) (Ping timeout)
[22:36:07] <MaikKlein> strcat, what if I only want to move the port and still want the object to be in a usable state?
[22:36:16] <ecr> brson: doesn't look like libuv does anything with it. guess it's up to us
[22:36:20] <strcat> MaikKlein: the object isn't in a usable state if you moved from it
[22:36:23] <MaikKlein> strcat, can I somehow move the port back and everything is fine again?
[22:36:27] <ecr> brson: fun times
[22:36:36] <strcat> MaikKlein: not currently, but in theory that could work in some cases
[22:37:09] *** Joins: leaper (Mibbit@moz-F6898FEC.pools.spcsdns.net)
[22:37:13] *** Joins: schala (Mibbit@moz-21A97783.hsd1.wa.comcast.net)
[22:37:21] <brson> ecr: ugh. maybe we can just issue the read again ourselves ... exposing that would make a horrible interface
[22:37:25] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:37:38] <MaikKlein> :(
[22:37:42] <brson> graydon: do you know if there's any real benefit to forcing users to deal with EAGAIN?
[22:38:17] <brson> ecr: maybe you can look what other high-level I/O libraries do here
[22:39:16] <paupau> I wonder what node.js does with EAGAIN if it's not handled by libuv...
[22:39:50] <graydon> aside from reading the worse is better essay over and over?
[22:40:00] <ecr> brson: will do. apparently the reason this error wasn't caught by the status_to_maybe_uv_error function is that the function assumes all errors have return codes of -1.
[22:40:28] <schala> Hi! I think I ran into a minor memory-corruption bug in std::run::with_argv.
[22:40:42] <schala> I have a "fix", but I don't know if it's really the right thing to do...
[22:41:00] *** Joins: km (quassel@FDBAF0A0.DBF71E41.29C67456.IP)
[22:41:20] <schala> What would be the most helpful way for me to proceed?
[22:41:36] <aatch> schala, well what's the fix for a start?
[22:41:55] *** Quits: mib_rvytpl (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:42:13] <graydon> brson: sorry, cheeky; it's the source of the entire rant AIUI (http://www.jwz.org/doc/worse-is-better.html) but I don't think anyone ever does anything other than try again
[22:42:21] <schala> The problem seems to be that the "prog" argument isn't necessarily being kept alive for long enough.
[22:42:32] <graydon> brson: maybe install a condition handler with a default action? I guess we don't support those yet, but when we do, prime candidate :)
[22:42:51] *** Quits: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP) (Ping timeout)
[22:43:21] <schala> There's already a "tmps" array that's keeping the args alive, so my change was just to move the "tmps" array to the beginning of the function,  create a copy of the prog string, stick it in there, and use that copy
[22:43:26] *** Quits: Blub\0 (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: night)
[22:43:36] <schala> http://mibpaste.com/ODbwUx 
[22:43:56] <ecr> brson: checked the libuv docs. the udp_recv_cb type says that if nread == 0 then "there is no more data to read. you may discard or repurpose the read buffer" and if nread == -1 then "a transmission error was detected". Based on that, I think we can just discard the packet
[22:44:42] <schala> FWIW, the symptom I was seeing was that my program, which calls "process_status", was trying to invoke a program using the first argument, rather than the filename i supplied
[22:44:54] <schala> (every so often, that is... the failure was nondeterministic)
[22:45:59] <brson> ecr: but it sets rnead=0 on EAGAIN?
[22:46:03] <aatch> schala, you make 2 copies there...
[22:46:11] *** Quits: jdm (jdm@F2D29657.F60B0462.67AC9B1.IP) (Quit: Lost terminal)
[22:46:14] <brson> ecr: that doesn't *sound* right
[22:46:26] * ecr shrug
[22:46:37] <pcwalton> hooray, you can unsoundly copy anything by putting it in an io::fsync::Res<T>
[22:46:43] <pcwalton> even noncopyables
[22:46:48] <ecr> brson: that may just be the unix behavior, let me check the win/ files
[22:47:15] <schala> aatch: Like I said, I'm sure that my fix isn't great. This is my first Rust program :)
[22:47:38] <pcwalton> I'm fixing it
[22:47:41] <aatch> schala, that's fine. I'm just looking at the original code now, and I can see why you would've done it.
[22:47:41] <pcwalton> (by removing copy)
[22:48:13] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[22:48:13] <pcwalton> grr, got an aliasable/mutable location borrow error with &const
[22:49:31] <aatch> wow with_argv is crap
[22:49:56] <brson> ecr: the folks in #libuv on freenode are very helpful fyi
[22:50:17] <strcat> rusti: 2
[22:50:18] -rusti- 2
[22:50:33] <aatch> Ok, so execvp blocks, right?
[22:51:09] <steven_is_false> In Rust documentation do we use the Oxford comma?
[22:51:17] <ecr> brson: well, it doesn't *look* like it sets EAGAIN on windows
[22:51:39] <schala> aatch: In C, it replaces the whole process image. So there's nothing to go back to :)
[22:51:53] *** Quits: olleharstedt (Thunderbir@moz-80D8890F.ias.bredband.telia.com) (Ping timeout)
[22:52:19] <schala> It doesn't asynchronously spawn a new process, if that's what you mean.
[22:52:30] *** Joins: Jesin (Jessin_@moz-48B48C95.eecs.lehigh.edu)
[22:52:32] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[22:52:54] <ecr> brson: I'd say drop the packet if nread == 0 for now and check in with the libuv folks to see if the docs are missing something (I'd be very surprised if something like this had been overlooked this long).
[22:52:56] <brson> ecr: so, if we don't call read_stop, libuv will just keep reading i guess. if that's the case then I can understand why it would be ok to just ignore it
[22:53:05] <schala> rusti: if (true) { 3 } else { 4 }
[22:53:06] -rusti- 3
[22:53:18] <ecr> brson: that sounds right
[22:53:21] <aatch> schala, so what's the problem you see?
[22:53:38] <strcat> schala: exec can fail though
[22:53:45] <ecr> brson: makes sense if you're actually using it in a nonblocking fashion
[22:53:45] <brson> ecr: do you have a mac there?
[22:53:50] <strcat> so you do have to handle control flow after exec
[22:53:52] <ecr> brson: nope
[22:54:00] <brson> ecr: ok, I'll test a fix here then
[22:54:33] <schala> Basically, I was observing that (nondeterminstically), if I tried to invoke a command like "ls foo", then it would sometimes try to pass "foo" as the program to be run
[22:54:46] <schala> When I added logging, sometimes it would also pass one of the strings that I had printed to the console
[22:55:30] *** kimundi is now known as zz_kimundi
[22:55:47] <ecr> brson: I think you can just wrap the contents of extern fn recv_cb in UdpWatcher.recv_start in a if nread != 0 { *stuff * }
[22:55:59] <aatch> schala, do you have a test case? I know you said it's non-deterministic, but it would help to see your usage.
[22:56:10] <brson> ecr: will that leak buf?
[22:56:20] <brson> ecr: oh, buf is on the stack i guess
[22:56:45] <schala> aatch: http://mibpaste.com/Qlcw3s , but warning, this is literally my first-ever rust program and so the code is probably hideous :)
[22:56:49] <ecr> yep
[22:56:58] <ecr> brson: shouldn't cause a leak
[22:56:59] <aatch> schala, don't worry, we all have to start somewhere
[22:58:15] <ecr> brson: made that change on my box and everything still passes
[22:59:24] *** Quits: bent (chatzilla@F2D29657.F60B0462.67AC9B1.IP) (Ping timeout)
[22:59:57] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[23:00:00] <ecr> brson: all that should happen is if we get an empty packet, we'll ignore it and wait for the next one that's either non-empty OR had a transmission error
[23:00:35] <ecr> brson: and that packet will enter the callback, which calls recv_stop(), unwraps the error, and resumes the blocked task
[23:00:54] <strcat> whoa we have a proper vim indent file now
[23:01:11] <strcat> it indented a doc comment properly and I was shocked ;p
[23:01:21] *** Quits: paupau (textual@moz-D6583788.hsd1.ca.comcast.net) (Ping timeout)
[23:01:57] <strcat> sully: I found another default method bug
[23:01:58] <strcat> hm
[23:01:59] <ecr> strcat: personally I love the use of unicode symbols for ->, =>, ::, and trailing _
[23:02:08] <strcat> ecr: I hate that :)
[23:02:11] * strcat has that off
[23:02:25] <strcat> /home/strcat/projects/rust/src/libstd/task/spawn.rs:132:4: 133:1 error: internal compiler error: method not found in AST map?!
[23:02:27] <strcat> this issue again
[23:02:34] <strcat> narrowing it down
[23:02:46] <aatch> I don't even have it enabled in my build (I think)
[23:02:56] <schala> ecr, strcar: in Racket, you can write lambdas with Î» :)
[23:03:10] *** Quits: pyrac (pyrac@moz-B0599561.w92-162.abo.wanadoo.fr) (Quit: pyrac)
[23:03:34] <schala> The first time I saw that, I figured it had to be a joke
[23:03:53] <olsonjeffery> strcar of the nominal type Desire
[23:04:02] <jensnockert> I get something like https://gist.github.com/jensnockert/5962111 after making modifications to libsyntax, anyone have any hints? I am trying to make a syntax extension.
[23:04:12] <kmc> you can't do that in Haskell because Î» is a valid identifier =)
[23:04:46] <aatch> jensnockert, oops, looks like you hit a codegen bug
[23:04:49] <schala> It's a valid identifier in Scheme/Racket, too. They just use define-syntax to map it to lambda :)
[23:04:53] <strcat> error: internal compiler error: type_uses_for: unbound item ID {crate: 0, node: 514135}
[23:04:55] * kmc nods
[23:04:55] <strcat> heh
[23:04:55] *** Joins: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP)
[23:05:06] <jensnockert> aatch: :(
[23:05:11] * jensnockert hugs codegen.
[23:05:29] <Luqman> jensnockert: gdb perhaps to get a better idea
[23:05:36] <aatch> trap being what llvm emits in places where it just goes "I got no idea"
[23:05:39] <ChrisMorgan> gVim doesn't cope well with using double-width Unicode symbols for ->/=> :-(
[23:05:58] <strcat> aatch: also what it emits for abort
[23:06:13] <lkuper> I know a couple of people who rig emacs to turn `lambda` into `Î»` as they type
[23:06:15] <strcat> 6 means SIGABRT
[23:06:22] <aatch> schala, I'll do some investigation, unfortunately it appears that I don't have the std libraries installed...
[23:06:25] <strcat> jensnockert: if I had to guess, you're going OOM
[23:06:29] <aatch> strcat, oh, right.
[23:06:34] <jensnockert> strcat: I doubt it.
[23:06:38] *** Quits: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP) (Ping timeout)
[23:06:38] * strcat shrugs
[23:06:47] <jensnockert> strcat: The system has 8GB and infinite swap.
[23:06:48] <ChrisMorgan> Vim in GNOME Terminal copes fine, but gVim messes it up. Android Terminal Emulator messes it up, too.
[23:06:59] <schala> aatch: no worries. thanks for taking a look. I would have assumed it was my own bug, if it didn't look so much like memory corruption :)
[23:07:01] <MaikKlein> are the docs up to date?
[23:07:02] <MaikKlein> like http://static.rust-lang.org/doc/std/vec.html#function-as_imm_buf
[23:07:11] <jensnockert> I think I modified some enums I shouldn't have modified without a corresponding change in rustc.
[23:07:13] <cmr> MaikKlein: prolly not
[23:07:16] <ecr> schala: bblum was trying to figure out a way to do that for rust. I don't think he's succeeded yet
[23:07:16] <schala> In the meantime, my hacky fix has unblocked me
[23:07:36] <jensnockert> ast::ty_ ?
[23:08:01] <cmr> jensnockert: there's even warnings against that in the comments!
[23:08:07] <ChrisMorgan> Vim people can just have a `syn match lambda cchar=Î»`, and then `lambda` in the source code will appear as `Î»`.
[23:08:08] <aatch> jensnockert, you changed ast::ty_?
[23:08:15] <brson> which commit needs to be reverted to fix that 300MB regression?
[23:08:33] <cmr> brson: "De-share ast::Ty"
[23:08:33] <jensnockert> cmr: No, there isn't, but I could guess since there is one in rustc.
[23:08:37] <cmr> or something along that lines
[23:08:38] <jensnockert> aatch: Yeah.
[23:08:44] <aatch> brson, https://github.com/mozilla/rust/pull/7644
[23:08:45] * jensnockert whistles.
[23:08:59] <aatch> but I keep getting strange windows failures
[23:09:05] <cmr> Oh the comment is on `struct mt`
[23:09:29] <aatch> jensnockert, I'd suggest starting in typeck/astconv.rs
[23:09:40] *** Quits: ssbr (ssbr@moz-141F89C6.block0.gvtc.com) (Ping timeout)
[23:10:06] <ChrisMorgan> The single thing I wasn't happy with with my Vim indent work for Rust half a dozen hours ago was that `/*!` was getting ` * ` leaders on subsequent lines, with the closer ` */`, rather than no leader and no indent on the closer; I've now figured out how to fix it up :-)
[23:12:15] <cmr> ChrisMorgan: but I want leaders
[23:12:31] <ChrisMorgan> cmr: the convention that I've observed is that /* and /** have leaders, but /*! doesn't.
[23:12:41] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[23:12:49] <strcat> sooo close to being able to use default methods all over
[23:12:49] <aatch> ChrisMorgan, can you make an option?
[23:12:54] <ChrisMorgan> Sure.
[23:12:58] <strcat> Eq, Ord, Container, Map, etc. ;p
[23:12:58] <cmr> :)
[23:13:08] *** Quits: leaper (Mibbit@moz-F6898FEC.pools.spcsdns.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:13:36] <aatch> graydon, you had a chance to look at linux1b yet?
[23:13:37] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[23:13:54] <ChrisMorgan> Which should be the default, though? I'm leaning towards no leaders, that being what seems to be used in rust.
[23:14:39] <aatch> graydon, specifically the fact that it slows to a halt during compile, therefore preventing a snapshot.
[23:14:42] <cmr> I think it should have leaders, for consistency with the rest of the comments..
[23:14:47] <cmr> but *shrug*
[23:15:45] *** Quits: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP) (Client exited)
[23:16:17] <brson> ecr: seems to work. I'll push a patch
[23:17:56] <graydon> aatch: every time? just once?
[23:18:32] <aatch> graydon, look at this: http://buildbot.rust-lang.org/builders/snap3-linux those 4 failed builds are all the _same_ build
[23:18:47] <aatch> the exceptions are where I cancelled.
[23:18:53] <aatch> the fails are timeouts
[23:19:02] <ecr> brson: alright
[23:19:05] *** Joins: mib_h7fccf (Mibbit@moz-1FEAB537.ucsf.edu)
[23:19:08] <aatch> One of them went for 10 hours
[23:19:13] <aatch> the most recent one, 6
[23:19:26] <aatch> graydon, I did open an issue about it...
[23:20:29] <brson> graydon: I'm going to look into upping the ulimit -n on the mac bots
[23:21:23] <graydon> brson: sounds good
[23:22:17] <jensnockert> brson: Just run `ulimit -n 100000`
[23:22:24] <glinscott> i'm attempting to do some perf. work on vec::reserve, it's quite large when inlined, so ends up bloating quite a few calls.  however, i seem to have broken the compiler - can anyone tell what is wrong here easily?  https://github.com/glinscott/rust/blob/3030afb023547430f2175f5d040d061b3c6f6555/src/libstd/vec.rs#L1133
[23:22:29] <glinscott> the diff is here: https://github.com/glinscott/rust/compare/utf8_char_width_perf#L1R1171
[23:22:37] <jensnockert> brson: Or random high value over 2560 or what the default is.
[23:22:49] <brson> jensnockert: on mac it's more complicated than that
[23:22:59] <brson> jensnockert: apparently you've got to mess with launchctl too
[23:23:02] <jensnockert> brson: I just did it on my OS X machine.
[23:23:04] <brson> or ulimit won't do anything
[23:23:10] <jensnockert> brson: What version?
[23:24:05] <graydon> aatch: I have no idea what's going on there
[23:24:08] <graydon> that's really troubling
[23:24:22] <aatch> graydon, and it's blocking a snapshot, which is more frustrating.
[23:24:23] <cmr> glinscott: you should remove the #[inline(never)] and let LLVM do its job
[23:24:27] <brson> jensnockert: 10.7 and 10.8
[23:24:33] <graydon> aatch: indeed
[23:24:43] <graydon> aatch: I would take it out of service
[23:24:44] <graydon> but
[23:24:56] <graydon> that machine is what keeps us honest about working on old linuxes
[23:25:06] <graydon> maybe I need a new VM for just that purpose
[23:25:12] <strcat> glinscott: we should never have inline(never)
[23:25:21] <strcat> just remove #[inline]
[23:25:21] <graydon> brson: I was going to ask, do you mind if we maybe reserve one of the new macs for perf testing?
[23:25:43] <cmr> It should be #[inline(hint)] I think?
[23:25:45] <cmr> For cross-crate
[23:25:51] <strcat> cmr: that's the same as #[inline]
[23:26:03] <brson> graydon: sure. the last one should be here next week
[23:26:03] <strcat> in fact we should remove that so there's one way to do it
[23:26:08] <strcat> 2 ways to do the same thing is silly
[23:26:14] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[23:26:16] <glinscott> cmr, strcat: ok, regardless of #[inline] though - the change seems to have broken the compiler, although it looks semantically equivalent to my rust-newbie eyes
[23:26:17] <graydon> aatch: can you .. avoid pushing to snap-stage3 for the time being and I'll poke around the workspace of that machine?
[23:26:17] <cmr> strcat: Eh? I thought #[inline] gave the hint to LLVM, and #[inline(hint)] just wrote the AST to metadata so it could be inlined cross-crate
[23:26:26] <strcat> cmr: they're the same thing.
[23:26:32] <strcat> #[inline] is #[inline(hint)]
[23:26:43] <aatch> graydon, that's fine, I was just retrying the builds anyway.
[23:26:56] <cmr> Then what's the one that just allows cross-crate inlining?
[23:26:57] <jensnockert> brson: I guess you could do `launchctl limit maxproc 10000` as well, but ulimit -n works for me(tm) on 10.8
[23:27:11] <aatch> cmr, if the "argument" to inline is anything other than "never" or "always" it's just inline
[23:27:24] <graydon> I wonder if it's because it's valgrind. valgrind on a VM. maybe old valgrind too.
[23:27:37] <strcat> #[inline(always)] is the same thing as #[inline] but it uses alwaysinline instead of inlinehint
[23:27:58] <cmr> Guh, why did I think there was something that did that then :\
[23:27:59] <strcat> cmr: LLVM doesn't need help to inline within a crate
[23:28:05] <strcat> any inline annotation allows cross-crate inlining
[23:28:24] <strcat> if there's either #[inline] or #[inline(always)], rust outputs the AST
[23:28:36] <strcat> it's automatically output to any crate using it
[23:28:39] <strcat> it no longer outputs a symbol
[23:28:43] <graydon> valgrind 3.6.1 um yes slightly old
[23:28:50] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[23:28:55] <aatch> cmr, there was a PR for a version that wrote the AST, but didn't mark it inlinehint
[23:28:59] <cmr> right, but there should be a way to do cross-crate inlining without giving llvm inlinehint, shouldn't there?
[23:29:06] <strcat> cmr: no
[23:29:13] <strcat> not until we fix inlining
[23:29:22] <strcat> atm it never outputs a symbol so...
[23:29:31] <strcat> no matter what you do, if you allow inlining, you've inlined at least into the crate
[23:29:50] <strcat> if you put inline(maybe) you get 1 version per crate you link together
[23:30:05] <strcat> we can fix it
[23:30:25] <strcat> available_externally and linkonce_odr exist and work well
[23:30:27] <strcat> rustc just sucks
[23:30:38] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[23:30:56] <brson> rustc is awesome. it's the compiler that implements rust
[23:31:01] <brson> graydon: can I reboot macs?
[23:31:29] <graydon> yeah, I guess
[23:31:34] <strcat> well, rust is awesome ;p
[23:31:41] <graydon> maybe I should take bors offline while you do it?
[23:31:49] <strcat> there aren't many things I dislike about the language, just the implementation
[23:32:07] <brson> graydon: ok. one down already!
[23:32:10] <strcat> rust deserves better than rustc as it is today ;p
[23:32:17] <cmr> glinscott: looks equivalent to me too
[23:32:18] <graydon> it'll get there
[23:32:24] <graydon> with enough care and feeding!
[23:32:49] <cmr> glinscott: maybe you can print the pointers to make sure self and s in the expand fn is the same?
[23:33:13] <strcat> http://maniagnosis.crsr.net/2013/07/letterpress-cheating-in-rust-07.html the perf issues here are just the stack growth ones :(
[23:33:22] <jensnockert> aatch: No, there seems to be something when actually creating libsyntax.dylib, so I'll poke at it for a bit.
[23:33:26] <glinscott> cmr: ok, thanks.  will give it a shot
[23:33:39] <strcat> functions change slightly in size and inlining gets altered based on the heuristics, and bam! 10x perf hit
[23:34:54] <strcat> less inline(always) means more thrashing even though removing it sped things up overall
[23:37:02] <strcat> graydon: hrm, why did a bunch of bots go down? fixing something?
[23:37:13] <strcat> oh nvm
[23:37:15] <graydon> brson took some macs offline
[23:37:19] <strcat> yeah just saw that
[23:37:22] <ChrisMorgan> OK, I've got /* leader indenting working almost correctly: if there is a "*" leader, one space, if not, no spaces. And /*! will by default have no leader, but `let g:rust_bang_comment_leader = 1` and it will.
[23:37:43] *** Quits: schala (Mibbit@moz-21A97783.hsd1.wa.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:37:59] <brson> graydon: they are not coming back online
[23:38:09] <ChrisMorgan> The only weird thing left is that if g:rust_bang_comment_leader == 1, then in cases where there is no leader present, = will put an extra space before the closing `*/` :-/
[23:38:12] <graydon> brson: I think they might not have appropriate crontab entries
[23:38:27] <brson> graydon: the buildbot slave started but something went wrong 
[23:38:31] <graydon> huh
[23:38:35] <brson> 2013-07-09 16:35:54-0700 [-] Connecting to localhost:9987
[23:38:35] <brson> 2013-07-09 16:35:54-0700 [Uninitialized] Connection to localhost:9987 failed: Connection Refused
[23:38:51] <graydon> brson: are the stunnels up?
[23:39:36] <brson> graydon: no
[23:40:11] <aatch> shachaf, I can't seem to replicate your issue.
[23:40:31] <brson> ok, just need to start the stunnels
[23:40:40] <shachaf> Which issue?
[23:40:49] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[23:40:59] <aatch> shachaf, odd behaviour with process_status
[23:41:47] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[23:42:44] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[23:43:38] <brson> mac bots are back up
[23:43:57] <ion> hachaf
[23:44:12] *** Quits: MaikKlein (maik@moz-292B05D.dip0.t-ipconnect.de) (Ping timeout)
[23:48:01] *** Quits: smvv_ (sander@moz-BAEA8EB2.dynamic.upc.nl) (Ping timeout)
[23:48:49] <pcwalton> nmatsakis: ping
[23:48:49] *** Quits: mschifer (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[23:49:03] <graydon> brson: why'd they need reboots?
[23:49:39] <nmatsakis> pcwalton: pong.
[23:49:57] <pcwalton> nmatsakis: I think we need to think about the plan to get rid of RcMut in light of incremental/generational GC
[23:50:01] <pcwalton> of GcMut rather
[23:50:42] <nmatsakis> pcwalton: in what respect?
[23:50:44] <brson> graydon: because I added `ulimit -n 4096` to /etc/profile
[23:50:48] <pcwalton> it's not clear to me (a) how to implement the barriers needed for incremental unless we have GcMut<T> where T : Freeze; and
[23:50:51] <graydon> aha
[23:51:14] <brson> also updated the rust-admin docs
[23:51:22] * brson being responsible
[23:51:33] <pcwalton> (b) how to implement the barriers needed for generational without (1) page level protection or (2) making @ noncopyable and requiring .clone() to add the barrier
[23:52:14] <pcwalton> in particular I think that the trick of using Gc<Cell<T>> for mutability is not going to work with incremental GC because you have to know both referee and referent at each @ pointer update
[23:52:14] <ChrisMorgan> Okaaay... set comments=s1:/*,mb:*,ex:*/,:///,://!,:// and */ is indented one space even if there have been no leaders, but set comments=s1:/*,mb:*,ex:*/,s0:/*,mb:\ ,ex:*/,:///,://!,:// (duplicate the s1 bit as s0) and it all works correctly. Weird.
[23:52:15] <graydon> brson: \o/
[23:52:21] *** Joins: smvv_ (sander@moz-BAEA8EB2.dynamic.upc.nl)
[23:52:24] <nmatsakis> pcwalton: yes, I see. 
[23:52:30] *** Quits: glinscott (garylinsco@789A6618.53EB7C1.FFFE3AA.IP) (Ping timeout)
[23:52:39] *** Quits: ecr (Thunderbir@2557E599.66715431.D25A875A.IP) (Quit: ecr)
[23:52:44] <nmatsakis> pcwalton: it's true, it makes it harder to do inc/gen.
[23:52:57] <pcwalton> nmatsakis: so incremental would work because all you have to do is shade a black referee
[23:53:02] <pcwalton> if you have GcMut<>
[23:53:03] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: jorendorff)
[23:53:04] <graydon> huh. I forgot this. valgrind really really prefers running rust single threaded, doesn't it?
[23:53:11] <pcwalton> whenever you take an &mut pointer to a GcMut interior, shade it.
[23:53:16] <pcwalton> that suffices for the barrier
[23:53:21] <graydon> like if you have multiple threads it does something horrendous like preempting on every basic block or such
[23:53:23] <pcwalton> shade it if it was blacxk
[23:53:24] <pcwalton> black
[23:53:48] <pcwalton> referrer and referent? I don't know the terms
[23:53:58] <strcat> graydon: memcheck has 1 thread so I guess it has to use hacks to make it not deadlock
[23:54:15] <strcat> I wish we had asan support ;p
[23:54:21] <graydon> yeah
[23:54:33] <strcat> 2x perf hit for asan is much saner
[23:54:35] <nmatsakis> pcwalton: right, so I think GcMut makes it fairly straightforward, you at least know when it starts and ends being mutable, in the interim you can keep it in a kind of special root set or something
[23:54:45] <pcwalton> we might not need it
[23:54:55] <pcwalton> *if* we have .clone() on Gc
[23:55:02] <pcwalton> because then you can just make the barrier:
[23:55:05] <pcwalton> err
[23:55:10] <pcwalton> you can make .clone() perform a barrier as follows:
[23:55:17] <graydon> aatch: good news is it seems to get pretty far with RUST_THREADS=1, lemme try a few other things (including upgrading valgrind on that machine)
[23:55:21] <graydon> and timing measurement
[23:55:28] <graydon> I think possibly V runs a lot _faster_ if we run it single threaded
[23:55:33] <strcat> it would be nice if it wasn't copyable just to make Rc a drop-in replacement
[23:55:43] <strcat> and implicitly-copyable could be associated with POD
[23:55:45] <pcwalton> if the object is in the nursery, tenure it; if the object is tenured and white, shade it
[23:56:14] <pcwalton> this is imprecise
[23:56:15] <nmatsakis> pcwalton: so I think if we are willing to integrate into the compiler, we hvae options,
[23:56:17] <pcwalton> but maybe OK
[23:56:22] <nmatsakis> pcwalton: even if you have Gc<Cell<T>>,
[23:56:25] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[23:56:44] <nmatsakis> pcwalton: Cell certainly needs some sort of flag to indicate to the compiler that it is actually mutable...
[23:57:09] <pcwalton> that could be handled with .borrow_mut() methods
[23:57:15] <strcat> nmatsakis: well it marks itself as non-Freeze now
[23:57:18] <brson> graydon: it serializes multithreaded code. i do believe v is faster with just one thread
[23:57:25] * brson thinks he tested that once
[23:57:29] <nmatsakis> pcwalton: hmm, maybe this doesnt' quite help, never mind. (strcat, yes that's what I meant)
[23:57:43] *** Joins: josh (josh@moz-BE33DA21.fw1.sfo1.mozilla.net)
[23:58:42] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[23:59:41] *** Joins: khyperia (khyperia@moz-AF00B41A.hsd1.in.comcast.net)
[23:59:44] *** Joins: glinscott (garylinsco@789A6618.53EB7C1.FFFE3AA.IP)
