[00:00:21] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[00:00:53] *** Parts: Jarrett (me@moz-8211AC00.dhcp.nrwl.ca.charter.com) ()
[00:02:03] *** Joins: vodik_ (simon@moz-FD4ADBC6.cable.teksavvy.com)
[00:02:39] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[00:03:28] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[00:03:33] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[00:04:15] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[00:05:16] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[00:05:50] *** Quits: smodo (tadnr@moz-6398EFDF.dclient.hispeed.ch) (Input/output error)
[00:06:07] *** Quits: alan (alan@moz-FE02DD30.sat6.rackspace.com) (Ping timeout)
[00:06:28] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[00:07:00] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[00:07:24] *** Quits: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP) (Input/output error)
[00:09:08] *** Joins: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP)
[00:09:24] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[00:09:41] *** Joins: g3xzh_ (g3xzh@moz-F05C9A20.red.bezeqint.net)
[00:10:41] *** Quits: g3xzh__ (g3xzh@moz-F05C9A20.red.bezeqint.net) (Ping timeout)
[00:11:25] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Quit: buildmaster reconfigured: bot disconnecting)
[00:11:26] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[00:11:29] *** Joins: pepper_chico (pepper_chi@6D1D0FAA.4F150827.E4090502.IP)
[00:12:05] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[00:12:08] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: Textual IRC Client: www.textualapp.com)
[00:12:21] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[00:12:26] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[00:12:30] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: yichoi)
[00:12:35] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[00:12:36] *** Quits: refold (gman@moz-42D68426.a258.priv.bahnhof.se) (Quit: leaving)
[00:15:43] *** Quits: rca_ (rcatolino@moz-E0992404.adsl.proxad.net) (Ping timeout)
[00:15:50] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: Textual IRC Client: www.textualapp.com)
[00:15:57] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[00:17:10] *** Quits: [o__o] (~o__o@moz-24EBFAC7.me) (Ping timeout)
[00:17:35] <jensnockert> Hurray, now I can automagically wrap all of OpenCL \o/
[00:17:35] *** Quits: doomlord_ (servitor@moz-D40D68D6.range86-184.btcentralplus.com) (Ping timeout)
[00:17:51] <jensnockert> Except the variadic ones, but that's kind of a known issue…
[00:17:53] *** Quits: sigma (sigma@moz-A17EB325.range86-184.btcentralplus.com) (Ping timeout)
[00:17:54] *** Joins: doomlord_ (servitor@moz-D40D68D6.range86-184.btcentralplus.com)
[00:18:02] <jensnockert> Now I'll attack Carbon!
[00:18:12] <Luqman> jensnockert: you can call variadic foreign functions from rust
[00:18:20] <jensnockert> Oh, you can?
[00:18:27] *** Joins: sigma (sigma@moz-A17EB325.range86-184.btcentralplus.com)
[00:18:28] <strcat> yeah Luqman implemented it
[00:18:38] <strcat> iirc at least ;p
[00:18:51] <Luqman> yep. extern { fn printf(format: *c_char, ...) -> c_int; }
[00:18:51] *** Joins: Jesse_ (jruderman@moz-BBE3ABD.mv.mozilla.com)
[00:18:59] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Connection reset by peer)
[00:19:28] <jensnockert> Super, then I'll add support for those last bits then \o/
[00:19:34] <jensnockert> Luqman: You're the greatest!
[00:19:53] <aatch> Luqman, I saw you got a mention in eholk's paper
[00:20:14] *** Quits: Jesse_ (jruderman@moz-BBE3ABD.mv.mozilla.com) (Connection reset by peer)
[00:20:14] <mark_edward> does vec::raw::from_buf_raw copy?
[00:20:30] <aatch> mark_edward, I don't *think* so
[00:20:47] <mark_edward> it'd be nice if it was in the docs. i'll check the source
[00:20:56] <aatch> no wait, it does
[00:20:58] *** Joins: ofeldt (ofeldt@moz-5E9C043C.dip0.t-ipconnect.de)
[00:21:09] <aatch> (returns a ~[T], so it has to copy)
[00:21:11] <mark_edward> yes it does
[00:21:39] *** Quits: ofeldt- (ofeldt@moz-DB0CBEF.dip0.t-ipconnect.de) (Ping timeout)
[00:22:39] <jensnockert> gcl_log_error(a0:*libc::c_char, ...); \o/
[00:22:44] <arityfn> is there a plugin for vim, for indentation and syntax highlighting?
[00:23:10] <ezyang> arityfn: yep 
[00:23:20] *** Joins: AvianFlu (AvianFlu@moz-C1C884AB.nyc.res.rr.com)
[00:23:24] *** Quits: shmoo2 (Mibbit@moz-83C619A8.dynamic.qsc.de) (Quit: http://www.mibbit.com ajax IRC Client)
[00:23:58] <ezyang> I use git://github.com/wting/rust.vim.git but there might be a more authoratative distribution 
[00:24:30] *** Quits: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: dherman)
[00:24:33] *** Quits: lfox (lfox@moz-89EEE1BF.nyc.res.rr.com) (Quit: ZZZzzz…)
[00:24:41] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[00:24:58] <jdm> does bindgen do variadics yet?
[00:25:33] <jdm> ah, it does
[00:25:37] <jdm> good work
[00:25:56] *** Joins: [o__o] (~o__o@moz-24EBFAC7.me)
[00:26:24] *** Joins: fyolnish (fyolnish@moz-E7DC4E27.uqwimax.jp)
[00:26:32] *** Joins: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[00:26:32] *** ChanServ sets mode: +ao dherman dherman
[00:26:37] <strcat> ezyang: it's part of the official repo
[00:27:37] <o11c> strcat: but to be useful it needs to be in a standalone repo so that all the vim tools can understand it
[00:27:45] <jensnockert> Holy christwagons /o\. It didn't crash on CoreAudio either /o\
[00:28:00] <strcat> o11c: well I use an automatically built nightly rust pkg and it comes with the vim files ;p
[00:28:09] *** Quits: fyolnish (fyolnish@moz-E7DC4E27.uqwimax.jp) (Ping timeout)
[00:29:24] *** Quits: moostik (Icedove@5A22E6A1.10715965.BCDF592F.IP) (Ping timeout)
[00:29:28] <o11c> strcat: the Ubuntu rust-nightly package doesn't have them ... and in any case that's not the preferred way to manage plugins in vim
[00:29:44] <strcat> it's my preferred way
[00:29:57] <strcat> http://ix.io/9kV that's what's in the pkg
[00:30:13] *** Quits: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: dherman)
[00:30:58] <strcat> mime detection, vim/emacs/gedit/kate support, zsh completion - all in src/etc
[00:31:51] <strcat> speaking of which I should make the completion less bad...
[00:32:46] *** Joins: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net)
[00:33:44] <ezyang> Yeah, I wish the Ubuntu rust-nightly just had vim stuff 
[00:36:20] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[00:39:10] *** Quits: pepper_chico (pepper_chi@6D1D0FAA.4F150827.E4090502.IP) (Quit: Ex-Chat)
[00:39:22] <ezyang> maybe I should drop Jørgen a note 
[00:43:11] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Quit: buildmaster reconfigured: bot disconnecting)
[00:43:16] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Quit: wilmoore)
[00:44:34] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[00:44:40] *** Quits: arityfn (arity@4B7A98.5E6FAFF2.7C05EB22.IP) (Quit: Leaving)
[00:45:23] *** Joins: doctor (ARealName@F76994EA.9F7EC348.67659D25.IP)
[00:45:47] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[00:45:49] *** Quits: AbigailBuccaneer (jetbeard@moz-401B3EBC.cable.virginm.net) (Client exited)
[00:48:44] *** Joins: mib_qerig2 (Mibbit@moz-CBAC45CB.protectedgroup.com)
[00:48:53] *** Quits: mib_qerig2 (Mibbit@moz-CBAC45CB.protectedgroup.com) (User has been banned from Mozilla (no spamming here))
[00:49:02] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[00:56:14] *** Quits: brendan (brendaneic@777B9EEC.C030CAFC.1EF54B18.IP) (Quit: brendan)
[00:56:32] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[00:59:05] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[01:00:03] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[01:00:48] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[01:01:02] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:03:07] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[01:04:28] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[01:06:22] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[01:06:39] *** Joins: brendan (brendaneic@777B9EEC.C030CAFC.1EF54B18.IP)
[01:08:46] *** Quits: AvianFlu (AvianFlu@moz-C1C884AB.nyc.res.rr.com) (Connection reset by peer)
[01:09:11] *** Joins: AvianFlu (AvianFlu@moz-C1C884AB.nyc.res.rr.com)
[01:09:25] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[01:09:27] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[01:10:51] *** Quits: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP) (Connection reset by peer)
[01:11:59] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[01:12:02] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[01:12:09] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:13:23] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Ping timeout)
[01:18:03] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[01:18:22] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[01:18:42] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[01:20:29] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[01:20:30] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[01:22:23] *** Joins: MrOrdinaire (Mibbit@F8E17E19.3FBDE906.FD383126.IP)
[01:23:11] <MrOrdinaire> hi, is there anyway to use `find_equiv` with `&'static str` on a `HashMap<~str, ~str>`?
[01:23:31] <dbaupp> .find_equiv(& ("foo"))
[01:23:49] <dbaupp> or .find_equiv(& &"foo") (the parens and the space are important)
[01:24:31] *** Joins: AvianFlu_ (AvianFlu@moz-31F97978.nyc.res.rr.com)
[01:24:38] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[01:24:50] <MrOrdinaire> dbaupp: thanks a bunch!
[01:25:26] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[01:25:34] *** Quits: AvianFlu (AvianFlu@moz-C1C884AB.nyc.res.rr.com) (Ping timeout)
[01:25:38] *** Quits: MrOrdinaire (Mibbit@F8E17E19.3FBDE906.FD383126.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:26:03] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[01:27:04] *** Joins: Bewilderforce (Bewilderfo@moz-EA5D4D40.ed.shawcable.net)
[01:28:35] <ktt3ja> dbaupp: why do you need the parens, and why is the space important?
[01:29:12] <sfackler> &&"foo" parses as logical and followed by "foo", which is a syntax error :(
[01:29:25] <dbaupp> ktt3ja: because &"foo" is just &'static str (i.e. "foo" and &"foo" are the same)
[01:29:36] <dbaupp> ktt3ja: and the && token thing sfackler says.
[01:29:44] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[01:30:02] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[01:30:02] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[01:30:05] *** Quits: nkoep (nik@moz-31E42C4C.pool.mediaways.net) (Client exited)
[01:30:29] <sfackler> is there a good reason for "foo" and &"foo" having the same type?
[01:30:55] <pcwalton> not really. I want to remove ~"foo" from the language
[01:31:10] *** Quits: nejucomo (Adium@moz-B62B9944.public.monkeybrains.net) (Quit: Leaving.)
[01:31:29] <Jesse> making it an error, or making it have type ~ &'static str?
[01:31:35] <pcwalton> the latter
[01:31:51] <sfackler> would you have to do "foo".to_owned() then?
[01:31:55] <pcwalton> yeah
[01:31:56] <sfackler> to get a ~str
[01:32:03] <pcwalton> or just .to_str()
[01:34:41] *** Parts: yegor (primate@moz-4F3BA196.red-dhcp.yndx.net) ()
[01:35:09] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[01:35:44] <sfackler> "foo".to_str() seems a bit silly. it's already a string!
[01:36:00] * pcwalton shrugs
[01:36:13] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[01:36:21] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[01:38:57] *** Quits: mib_4z5202 (Mibbit@moz-CBD76C21.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[01:41:18] *** Joins: lfox (lfox@moz-B8648F0F.nycmny.fios.verizon.net)
[01:43:52] *** Quits: o11c (ben@moz-742FF125.sd.sd.cox.net) (Quit: migrating to another host)
[01:46:44] *** Joins: jvns (bork@87D98E32.4046EB22.428F94DD.IP)
[01:48:07] *** Quits: brendan (brendaneic@777B9EEC.C030CAFC.1EF54B18.IP) (Quit: brendan)
[01:48:17] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[01:48:17] *** ChanServ sets mode: +ao dherman dherman
[01:49:04] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Looking for honey.)
[01:49:12] *** Joins: doomlord__ (servitor@moz-D40D68D6.range86-184.btcentralplus.com)
[01:52:22] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[01:54:35] *** Quits: Addle (quassel@moz-67A92E8A.cable.teksavvy.com) (Ping timeout)
[01:54:52] *** Joins: brendan (brendaneic@777B9EEC.C030CAFC.1EF54B18.IP)
[01:54:57] *** Joins: o11c (ben@moz-C0FD33EF.a357.priv.bahnhof.se)
[01:54:58] *** Quits: hacker_sam (hacker_sam@moz-5218E46E.public.wayport.net) (Ping timeout)
[01:55:08] *** Joins: Addle (quassel@93529591.BA907378.971E19F6.IP)
[01:57:42] *** Joins: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP)
[01:59:13] *** Quits: brendan (brendaneic@777B9EEC.C030CAFC.1EF54B18.IP) (Quit: brendan)
[02:01:47] *** Quits: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP) (Client exited)
[02:02:47] *** Quits: o11c (ben@moz-C0FD33EF.a357.priv.bahnhof.se) (Quit: fixing TERM environment)
[02:03:04] <brson> Luqman: do you have any info about your minecraft chat client? source?
[02:03:10] *** Joins: o11c (ben@moz-C0FD33EF.a357.priv.bahnhof.se)
[02:03:43] <brson> Luqman: mentioning minecraft in our air mozilla talk i think perked the ears of our media relations people and they want to know more about it - not sure what they're thinking
[02:04:09] *** Joins: derek_c (derek@moz-CFC283A2.cit.cornell.edu)
[02:04:22] <Luqman> brson: oh? well here's the source https://github.com/luqmana/mcchat
[02:04:57] <brson> Luqman: what does it do?
[02:05:01] <brson> in 10 words
[02:06:09] <Luqman> let's you see and respond to the in-game chats.
[02:06:27] <brson> thanks :)
[02:07:57] *** Quits: derek_c (derek@moz-CFC283A2.cit.cornell.edu) (Ping timeout)
[02:08:19] *** Joins: derek_c (derek@moz-CFC283A2.cit.cornell.edu)
[02:08:37] *** Joins: gwty_ (gwtypc@322EAEF3.E0A5EE90.D6324C7.IP)
[02:08:53] <derek_c> sometimes I see a Rust comment proceeded by //! or ///, instead of just //.  Why?
[02:08:58] <doublec> That C based minecraft clone that was on hacker news/reddit recently was interesting. Particularly because the client code had a buffer overflow exploit. More fuel for the 'safer system languages' appeal.
[02:09:22] <kmc> derek_c: that's a documentation comment
[02:09:30] <kmc> rustdoc will put those into the pages it generates
[02:09:43] <kmc> it's sugar for an attribute #[doc(foo bar ...)]
[02:09:53] <derek_c> kmc: so either //! or /// will do?
[02:10:09] <boredomist> or /** */
[02:10:20] <derek_c> boredomist: kk. Interesting
[02:10:25] <kmc> I think //! applies to the thing it's inside, rather than the thing which follows
[02:10:36] <kmc> like #[doc(...)]; with the semicolon
[02:10:58] <boredomist> yeah, as i understand it, /// and /** */ describe what's below the comment, //! describes what the comment is inside
[02:11:11] <boredomist> could definitely have that mixed up
[02:11:19] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[02:13:03] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[02:13:31] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:13:40] *** Quits: engla (engla@moz-F64E1B0F.cust.bredbandsbolaget.se) (Ping timeout)
[02:13:53] <aatch> boredomist, you have it the right way.
[02:14:33] *** Joins: brendan (brendaneic@777B9EEC.C030CAFC.1EF54B18.IP)
[02:14:45] *** Joins: IRCMonkey41362 (sellout-@moz-AE26682A.hlrn.qwest.net)
[02:15:11] <aatch> you'll often see the second form for crate-level documentation as there is no "next" item that is the crate.
[02:15:37] *** Quits: o11c (ben@moz-C0FD33EF.a357.priv.bahnhof.se) (Quit: WeeChat 0.4.2)
[02:15:39] *** Joins: o11c (ben@moz-C0FD33EF.a357.priv.bahnhof.se)
[02:15:42] <boredomist> is there a block comment form of that as well?
[02:15:46] *** Quits: brendan (brendaneic@777B9EEC.C030CAFC.1EF54B18.IP) (Quit: brendan)
[02:15:49] <boredomist>  so /**! ?
[02:15:57] <klutzy> it's /*! */
[02:16:13] *** Joins: brendan (brendaneic@777B9EEC.C030CAFC.1EF54B18.IP)
[02:16:32] <derek_c> does Rust have a timetable, regarding when 1.0 will be released?
[02:17:18] *** Joins: dreamer_ (Patryk@90E8C08F.8480A87C.DDAA0084.IP)
[02:17:57] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[02:18:58] *** IRCMonkey41362 is now known as sellout
[02:19:09] <aatch> derek_c, not really
[02:19:35] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:20:21] <aatch> 1.0 is a huge step, it's basically saying "yep, we're happy with pretty much the entire language as it stands"
[02:21:02] <aatch> I mean, there are features planned for post-1.0, but they don't (or at least, shouldn't) break code using Rust 1.0
[02:21:23] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[02:21:28] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[02:23:07] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[02:25:49] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[02:26:10] <Eridius> derek_c: some time before the heat-death of the universe
[02:26:49] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Client exited)
[02:26:56] *** Quits: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au) (Ping timeout)
[02:28:28] *** Joins: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca)
[02:31:03] *** Joins: brson_ (brson@981AA104.E81F12CD.76F66111.IP)
[02:32:03] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:35:15] <derek_c> kk.  I feel like the only two things I need before I can start writing a large system are a http server/client library and a regex library. other things are in pretty good shape already
[02:35:47] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[02:35:51] *** Quits: Bewilderforce (Bewilderfo@moz-EA5D4D40.ed.shawcable.net) (Quit: Leaving)
[02:36:47] *** Joins: gdey (gdey@moz-E4449B64.sd.sd.cox.net)
[02:36:57] <dbaupp> derek_c: have you seen rust-http?
[02:37:18] <derek_c> dbaupp: yeah but it's not quite ready yet?
[02:37:28] <dbaupp> derek_c: servo is using it, fwiw.
[02:37:43] <derek_c> dbaupp: kk
[02:38:01] *** Joins: sw17ch (sw17ch@moz-675AFBCF.hsd1.mi.comcast.net)
[02:38:09] <aatch> derek_c, eh, regex isn't that useful.
[02:38:23] <derek_c> aatch: :O
[02:38:56] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[02:39:21] <aatch> derek_c, I mean, it helps for some things. And certainly is invaluable for pattern matching.
[02:39:41] <aatch> But most string processing is dead-simple
[02:40:55] <derek_c> aatch: yeah but when you are building some sort of protocol, exhaustive pattern matching is pretty important
[02:41:19] <aatch> derek_c, what kind of protocol?
[02:41:29] *** Quits: sw17ch (sw17ch@moz-675AFBCF.hsd1.mi.comcast.net) (Quit: sw17ch)
[02:41:43] <aatch> Because often they either aren't regular languages or are simple to parse.
[02:42:01] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:42:07] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[02:42:25] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[02:42:25] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:42:26] <derek_c> yeah I suppose you can always do without regex, but it just makes things a lot simpler
[02:42:37] <ChrisMorgan> derek_c: as for rust-http (my project), it isn't especially ready for use, but it can be used.
[02:43:28] <aatch> derek_c, like I said, I'm not saying it isn't useful, but I'd hardly consider it a hard dependency for most software.
[02:43:43] <derek_c> ChrisMorgan: kk I have been looking into rust-http. would love to contribute when I get my head around the codebase
[02:43:57] *** Joins: Jarrett (me@moz-8211AC00.dhcp.nrwl.ca.charter.com)
[02:44:12] <Jarrett> hey, if anyone's around, I'm having issues building rust on windows
[02:44:32] <derek_c> aatch: yeah I have personally become so used to regex that I don't want to do any string processing without it
[02:45:04] <Jarrett> I followed the quick steps to a T, configuring succeeded, but make fails with a ton of errors that seem like the windows headers are wrong/missing?
[02:45:10] <Jarrett> in rust_cxx_glue.cpp
[02:45:28] *** Quits: brendan (brendaneic@777B9EEC.C030CAFC.1EF54B18.IP) (Quit: brendan)
[02:45:57] <aatch> derek_c, lol. Once you get some practice in, you can generally replicate simple regexes pretty easily.
[02:46:54] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[02:47:44] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[02:47:44] *** Joins: bjz (bjz@moz-3392F321.lns7.cha.bigpond.net.au)
[02:48:50] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[02:49:10] <klutzy> Jarrett: could you paste error at http://pastebin.mozilla.org/ or somewhere?
[02:50:06] *** Quits: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net) (Quit: leaving)
[02:50:59] *** Joins: bynaryshef (bynaryshef@moz-B4E38B6F.mem.bellsouth.net)
[02:51:15] *** Quits: bynaryshef (bynaryshef@moz-B4E38B6F.mem.bellsouth.net) (Client exited)
[02:52:37] <pcwalton> brson_: r? https://github.com/mozilla/rust/pull/10929
[02:52:40] *** Quits: dbaupp (Thunderbir@4F13D67D.D5A1DCF.37681C44.IP) (Ping timeout)
[02:52:44] <Jarrett> klutzy: http://pastebin.mozilla.org/3758809 and more, all looks pretty much the same :P
[02:54:05] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[02:54:27] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:56:07] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[02:58:02] *** Joins: JanC_ (janc@moz-EF24C2F2.dsl.scarlet.be)
[02:58:44] *** Quits: JanC (janc@moz-E531FDF1.dsl.scarlet.be) (Ping timeout)
[03:00:00] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[03:00:00] *** ChanServ sets mode: +ao brson brson
[03:00:30] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:00:44] *** Quits: brson_ (brson@981AA104.E81F12CD.76F66111.IP) (Ping timeout)
[03:02:10] *** Joins: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net)
[03:02:10] *** Quits: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net) (Quit: ianj)
[03:02:13] *** Joins: hacker_sam (hacker_sam@moz-5218E46E.public.wayport.net)
[03:02:50] <klutzy> Jarrett: seems like gcc failed to include /somewhere/include/_mingw.h
[03:03:17] <klutzy> __AW macro is defined there, and winnt.h uses the macro to typedef structs
[03:03:21] *** Joins: SiegeLordEx (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[03:03:37] <Jarrett> ahah
[03:03:55] <Jarrett> I made sure to use mingw-get upgrade to get a G++ earlier than 4.6
[03:04:02] *** Quits: SiegeLordEx (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: Leaving)
[03:05:04] *** Quits: kimundi (kimundi@moz-3DA1FAC3.dip0.t-ipconnect.de) (Ping timeout)
[03:05:17] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[03:05:25] *** Joins: sw17ch (sw17ch@moz-675AFBCF.hsd1.mi.comcast.net)
[03:05:50] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Quit: buildmaster reconfigured: bot disconnecting)
[03:06:32] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[03:07:14] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[03:08:30] *** Joins: kimundi (kimundi@moz-B3388EAA.dip0.t-ipconnect.de)
[03:08:30] <klutzy> Jarrett: you can build rust on latest version; we say < 4.6 just because buildbot sticks on old one now
[03:12:01] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[03:12:04] *** sam113101_afk is now known as sam113101
[03:12:47] *** kimundi is now known as zz_kimundi
[03:12:50] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[03:13:08] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[03:13:36] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[03:13:47] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[03:14:59] *** Quits: santiago (santiago@moz-8ADE82B4.socal.res.rr.com) (Ping timeout)
[03:16:22] *** Quits: noct (quassel@moz-BAA6B280.com) (Ping timeout)
[03:18:08] *** Joins: noct (quassel@moz-BAA6B280.com)
[03:20:10] *** Quits: pjenvey (pjenvey@moz-B23F7990.org) (Ping timeout)
[03:20:34] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[03:21:48] *** Quits: noct (quassel@moz-BAA6B280.com) (Ping timeout)
[03:23:27] *** Joins: pjenvey (pjenvey@moz-B23F7990.org)
[03:24:03] *** Quits: lfox (lfox@moz-B8648F0F.nycmny.fios.verizon.net) (Quit: ZZZzzz…)
[03:24:14] *** Joins: noct (quassel@moz-BAA6B280.com)
[03:24:36] *** Joins: luniv (textual@6A2271F0.28909DC9.B7FCEB19.IP)
[03:26:39] *** Joins: santiago (santiago@moz-8ADE82B4.socal.res.rr.com)
[03:27:59] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[03:29:33] *** Quits: hacker_sam (hacker_sam@moz-5218E46E.public.wayport.net) (Connection reset by peer)
[03:29:34] *** Quits: sw17ch (sw17ch@moz-675AFBCF.hsd1.mi.comcast.net) (Quit: sw17ch)
[03:29:42] *** Joins: hacker_sam (hacker_sam@moz-5218E46E.public.wayport.net)
[03:29:52] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Quit: Bye)
[03:30:09] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[03:31:45] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Quit: Leaving.)
[03:34:29] *** Joins: dbaupp (Thunderbir@4F13D67D.D5A1DCF.37681C44.IP)
[03:35:54] *** Quits: noct (quassel@moz-BAA6B280.com) (Ping timeout)
[03:36:39] <strcat> acrichto: error: lto can only be run for executables and static library outputs
[03:36:40] <strcat> hm
[03:36:43] <strcat> how do I avoid this?
[03:36:53] <strcat> using --staticlib and it has #[crate_type = "rlib"]
[03:37:22] *** Joins: noct (quassel@moz-BAA6B280.com)
[03:38:17] <acrichto> strcat: well the bad option is to remove crate_type = "rlib", but that's.... less than ideal
[03:38:24] <Jarrett> klutzy: hm, I upgraded to g++ 4.8 and now the make process just hung
[03:38:36] <strcat> acrichto: if I remove that it will work?
[03:38:40] <strcat> I only want LTO
[03:38:41] <acrichto> strcat: it should
[03:38:48] <strcat> is there crate_type = "lto" ?
[03:38:53] <acrichto> no
[03:39:08] <strcat> ah there we go
[03:39:18] <Jarrett> I did "make -j8". last few lines are http://pastebin.mozilla.org/3759043 and the make process is eating one core, its memory usage isn't changing, and it's not performing any IO
[03:39:53] <strcat> acrichto: hm but now I only get a .a
[03:40:11] <strcat> how exactly do you use LTO atm?
[03:40:21] <acrichto> strcat: LTO should have produced a single .a
[03:40:30] <strcat> acrichto: but rust doesn't consider it a crate
[03:40:37] <acrichto> that is correct
[03:40:43] <strcat> so how do you use it?
[03:40:58] <acrichto> what do you mean how do you use it?
[03:41:00] <strcat> ok nvm it works now
[03:41:09] <strcat> was missing lto on the client side
[03:41:23] <strcat> anyway rust-core can be a crate now \o/
[03:41:26] <acrichto> you don't compile intermediate crates with LTO
[03:41:31] <acrichto> rust-core would be compiled as an rlib
[03:41:37] <acrichto> and then consumers of rust-core choose LTO
[03:41:46] *** Quits: dbaupp (Thunderbir@4F13D67D.D5A1DCF.37681C44.IP) (Ping timeout)
[03:41:49] <strcat> acrichto: hm?
[03:41:52] <acrichto> rlibs always contain bytecode
[03:42:07] <strcat> it seems to work without an rlib though
[03:42:15] <strcat> I just made a .a and then using -Z lto in the app works
[03:42:29] <acrichto> rustc will not look for .a files
[03:42:57] <strcat> ah nvm
[03:43:02] * strcat shrugs
[03:43:05] <klutzy> jarrett: I have some memories that make hangs if -jN is given 
[03:43:06] <strcat> rustdoc still wants #[link]
[03:43:16] <klutzy> on building llvm
[03:43:23] <Jarrett> hrm
[03:43:23] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[03:43:36] <strcat> acrichto: ok now it *actually* works
[03:43:45] <Jarrett> my cores, for nothing ;~;
[03:45:42] <klutzy> we may blame mingw or windows :p
[03:46:03] <Jarrett> haha
[03:46:04] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[03:46:08] <strcat> I'll just put the macros in another file for now
[03:48:40] <Jarrett> thanks klutzy, it seems to be building happily now :)
[03:49:17] <o11c> strcat: ooh, nice
[03:50:26] *** Quits: derek_c (derek@moz-CFC283A2.cit.cornell.edu) (Ping timeout)
[03:51:41] *** Quits: Earnestly (earnest@88884C6.A3735F9C.39C00A7A.IP) (Ping timeout)
[03:52:09] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Quit: buildmaster reconfigured: bot disconnecting)
[03:53:02] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[03:56:22] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[03:58:29] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Quit: Sharp)
[04:00:37] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[04:01:21] *** Quits: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca) (Quit: canhtak)
[04:02:21] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[04:03:21] *** Joins: dbaupp (Thunderbir@4F13D67D.D5A1DCF.37681C44.IP)
[04:03:30] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[04:03:37] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[04:05:18] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[04:06:23] *** Joins: pcwalton (pcwalton@moz-14285ACF.ptr.us.xo.net)
[04:06:23] *** ChanServ sets mode: +ao pcwalton pcwalton
[04:07:36] *** Quits: pcwalton (pcwalton@moz-14285ACF.ptr.us.xo.net) (Quit: pcwalton)
[04:11:13] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[04:12:46] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[04:12:59] <strcat> acrichto: no-landing-pads doesn't seem to mark stuff from the original crate as nounwind :(
[04:13:27] <strcat> rust thinks pthread_create can throw if I include it via an LTO crate rather than a module
[04:13:30] <strcat> hm
[04:13:35] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[04:13:56] *** Quits: jvns (bork@87D98E32.4046EB22.428F94DD.IP) (Ping timeout)
[04:14:27] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[04:14:39] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: Leaving)
[04:14:59] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[04:16:11] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: Leaving)
[04:16:19] *** Quits: xitology (xi@85437D54.5AFA3E4.CEDFC552.IP) (Ping timeout)
[04:16:23] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[04:17:34] *** Joins: derek_c (derek@moz-A43430DA.cit.cornell.edu)
[04:17:36] *** Joins: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca)
[04:19:07] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[04:20:38] *** Joins: mib_j9pd1p (Mibbit@moz-E00C84CD.hsd1.wa.comcast.net)
[04:20:55] *** Quits: dbaupp (Thunderbir@4F13D67D.D5A1DCF.37681C44.IP) (Ping timeout)
[04:22:30] *** Quits: mib_j9pd1p (Mibbit@moz-E00C84CD.hsd1.wa.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:26:29] *** Joins: sahabu (sahabu@moz-E00C84CD.hsd1.wa.comcast.net)
[04:26:59] *** Quits: sahabu (sahabu@moz-E00C84CD.hsd1.wa.comcast.net) (Quit: Leaving)
[04:27:04] *** Joins: sahabu (sahabu@moz-E00C84CD.hsd1.wa.comcast.net)
[04:27:14] *** Quits: sahabu (sahabu@moz-E00C84CD.hsd1.wa.comcast.net) (Quit: Leaving)
[04:27:18] *** Joins: sahabu (sahabu@moz-E00C84CD.hsd1.wa.comcast.net)
[04:27:23] *** Quits: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca) (Quit: canhtak)
[04:27:32] *** Quits: sahabu (sahabu@moz-E00C84CD.hsd1.wa.comcast.net) (Quit: Leaving)
[04:28:07] <Jarrett> what the :v
[04:28:13] *** Joins: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca)
[04:28:27] <Jarrett> compiling llvm and in llvm/include/llvm-c/lto.h it gives me an "unknown typ ename 'off_t'" error
[04:28:49] *** Joins: sahabu (sahabu@moz-E00C84CD.hsd1.wa.comcast.net)
[04:29:15] <sahabu> Hello, my name is Preston from the University of Washington, and I'm doing some research on Rust for my senior thesis.
[04:30:08] <sahabu> My project is focused on creating an Actor library for the Rust language, since that seems to be a popular request on the github repo.
[04:30:24] *** Joins: tautologico (iorek@E0D804D3.CFE755C8.C27E1635.IP)
[04:31:09] <sahabu> Anyway, just thought I'd say hello since I'll probably be dropping by this channel a lot over the next few months!
[04:31:27] *** Quits: sp3d (s@6361F3B1.19CD1E54.8354FB35.IP) (Ping timeout)
[04:32:15] <sfackler> cool :)
[04:32:21] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[04:33:50] <o11c> Jarrett: yeah, I saw a bug about that a while back ... you need to edit lto.h to #include <sys/types.h>
[04:34:07] <Jarrett> hmmm
[04:34:29] <Jarrett> well oddly enough I ran make again and now it seems to be building other things?
[04:34:49] <Jarrett> we'll see what happens..
[04:34:49] *** Joins: jwarner (Mibbit@moz-987A743F.hsd1.co.comcast.net)
[04:37:08] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[04:38:53] *** Quits: jwarner (Mibbit@moz-987A743F.hsd1.co.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:39:17] *** Joins: dbaupp (Thunderbir@4F13D67D.D5A1DCF.37681C44.IP)
[04:39:31] *** Quits: hacker_sam (hacker_sam@moz-5218E46E.public.wayport.net) (Client exited)
[04:39:51] *** Joins: hacker_sam (hacker_sam@moz-5218E46E.public.wayport.net)
[04:42:57] *** Joins: sp3d (s@6361F3B1.19CD1E54.8354FB35.IP)
[04:44:55] *** Joins: xitology (xi@85437D54.5AFA3E4.CEDFC552.IP)
[04:45:03] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Quit: ChatZilla 0.9.90.1 [Firefox 25.0.1/20131112160018])
[04:45:04] <bjz> sahabu: o/
[04:45:18] <bjz> sahabu: sounds cool :)
[04:45:49] <sahabu> o/ thanks bjz, I hope it works out.
[04:45:55] <bjz> sahabu: what kind of stuff would actors give us over the raw concurrency primitives we have at the moment?
[04:46:01] <bjz> ie. ports/chans
[04:46:50] *** Quits: xitology (xi@85437D54.5AFA3E4.CEDFC552.IP) (Ping timeout)
[04:47:03] *** Joins: xitology (xi@85437D54.5AFA3E4.CEDFC552.IP)
[04:47:13] <klutzy> Jarrett: this? https://github.com/mozilla/rust/issues/10893
[04:47:33] <sahabu> I'm still familiarizing myself with that, but it on face it seems that actors are more OO whereas tasks are lower level.
[04:47:33] <Jarrett> yep that's the one
[04:47:37] <klutzy> I was not sure if it is real issue but it seems so
[04:47:45] <Jarrett> hm
[04:47:48] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[04:48:06] <Jarrett> well it's weird, cause I ran make again and now rustc is dutifully compiling things
[04:48:35] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[04:48:55] <klutzy> off_t error is from llvm, so I presume llvm build is somewhat broken but ignorable ... in some way :$
[04:49:03] <Jarrett> hopefully!
[04:49:16] <sahabu> Oh sorry bjz, forgot to tag you: I'm still familiarizing myself with the new concurrency model, but on face it seems that actors are more OO whereas tasks are lower level.
[04:49:20] <Jarrett> yeah I googled for that error and came up empty, so
[04:49:29] <bjz> sahabu: neat
[04:49:46] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[04:50:14] <bjz> sahabu: yeah, from my learning about Erlang it seems to be better to abstract away from the raw ports/chans
[04:50:28] <bjz> sahabu: the tricky thing is maintaining performance
[04:50:40] *** Quits: tautologico (iorek@E0D804D3.CFE755C8.C27E1635.IP) (Quit: zzz)
[04:50:41] <sahabu> bjz: it's also a natural extension of the concurrency safety that Rust is about, just on a higher level.
[04:51:00] <bjz> sahabu: luckily Rust does mots of inlining and monomorphisation
[04:51:30] <bjz> sahabu: I was working on a generic server thing like Erlang's gen_server
[04:51:35] <sahabu> bjz: I'll have to get familiar with those, thanks for the tip.
[04:51:45] <bjz> would you like to see?
[04:52:11] <sahabu> bjz: Sure, that'd help me out a lot, thanks.
[04:54:02] *** Joins: tautologico (iorek@E0D804D3.CFE755C8.C27E1635.IP)
[04:54:03] <bjz> sahabu: https://gist.github.com/bjz/244842e47f59f3bda380
[04:54:16] <bjz> sahabu: I'm thinking of turning it into a lib
[04:55:57] *** Joins: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP)
[04:56:12] <bjz> sahabu: not sure if that's of any use
[04:56:41] <sahabu> bjz: it might be, I've yet to actual write Rust for the project haha, still using Akka to get some familiarity
[04:56:52] <bjz> ah ok
[04:57:28] <bjz> my main issue was turning a dynamically typed Erlang API to typed Rust
[04:57:31] <strcat> ughhhhh I forget how to build non-position-independent code with clang
[04:57:33] <strcat> hm
[04:58:01] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Ping timeout)
[04:58:07] <Jarrett> -no_pie? :V
[04:58:35] <strcat> -relocation_model=static is what I wanted, that's problem the same
[04:58:45] <strcat> relocation-model *
[04:59:29] <sahabu> bjz: I've seen that thrown around as an issue, thanks for confirming.
[04:59:35] <tautologico> I can't make heads or tails of the compiler's output... either in LLVM code or assembly
[04:59:45] <bjz> sahabu: which?
[04:59:49] <strcat> Jarrett: I really meant llc *
[04:59:55] <Jarrett> ooh
[05:00:11] <strcat> my brain is jumbled atm
[05:01:02] <sahabu> bjz: I think in the github issue for the actor library someone brought it up.
[05:01:08] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[05:01:39] <bjz> the erlang gen_server thing? or converting erlang stuff because its dynamically typed?
[05:02:35] <bjz> sahabu: could you link to the issue?
[05:02:54] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[05:04:00] <sahabu> bjz: https://github.com/mozilla/rust/issues/3573
[05:04:02] <bjz> sahabu: I'm also going to try to implement gen_fsm and gen_event, but I'm not sure if it will be possible in rust's semantics
[05:04:46] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[05:05:03] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[05:05:17] <sahabu> bjz: Converting Erlang stuff.
[05:07:07] <gdey> hello all; woundering if you guys could help me again. How would I get something like this (https://gist.github.com/gdey/7923435) to work? I realise that I'm not using format correctly; but what other function should I be using to do something like this?
[05:07:43] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[05:08:08] *** Quits: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca) (Quit: canhtak)
[05:09:18] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Ping timeout)
[05:09:30] <bjz> sahabu: ok, posted on the thread
[05:09:48] *** Joins: vodik__ (simon@moz-FD4ADBC6.cable.teksavvy.com)
[05:09:59] *** Quits: dbaupp (Thunderbir@4F13D67D.D5A1DCF.37681C44.IP) (Ping timeout)
[05:10:15] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[05:10:16] <Jarrett> :O I think it worked
[05:10:39] *** Quits: vodik_ (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[05:10:47] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[05:10:54] *** Joins: vodik___ (simon@moz-FD4ADBC6.cable.teksavvy.com)
[05:11:16] <bjz> sahabu: also, `Concurrent Programming in ML` is a really good book if you want a reference for Rust-style concurrency primitives
[05:11:37] <bjz> sahabu: Rust's primitives are much closer to CML than Erlang
[05:11:50] <Jarrett> now when I try to compile things, I get "package <whatever> depends on std, but I don't know how to find it" XD
[05:12:11] <bjz> sahabu: that said, Rust doesn't implement all of CML's primitives (yet?)
[05:13:30] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[05:14:12] *** Joins: dbaupp (Thunderbir@4F13D67D.D5A1DCF.37681C44.IP)
[05:15:02] <strcat> bjz: what else does it have?
[05:15:14] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[05:15:41] <sahabu> bjz: is CML "Concurrent ML"?
[05:15:48] *** Quits: luniv (textual@6A2271F0.28909DC9.B7FCEB19.IP) (Quit: Textual IRC Client: www.textualapp.com)
[05:15:51] <bjz> sahabu: yup
[05:15:52] <sahabu> or a special kind of ML?
[05:15:56] <sahabu> ah okay
[05:16:15] <bjz> if you have sml-nj you also have cml
[05:16:32] <klutzy> Jarrett: what's in build_dir/i686-pc-mingw32/stage2/bin/rustc/i686-pc-mingw32/bin/?
[05:17:29] <sahabu> Ah okay, didn't know about CML.
[05:17:57] <Jarrett> klutzy: a bunch of dlls, rlibs, and libs
[05:18:03] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[05:18:17] <Jarrett> I did run make install
[05:18:20] <bjz> strcat: larsberg knows more about that than me (he worked under reppy)
[05:18:32] *** Joins: jvns (bork@moz-DE62990.nyc.res.rr.com)
[05:18:45] <klutzy> ah make install. it may be broken recently
[05:18:49] <Jarrett> oh :X
[05:19:04] <klutzy> maybe it forgets to copy some dlls?
[05:19:14] *** Joins: Heather (Heather@19663F6.F53BAACC.9C17E900.IP)
[05:19:17] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[05:19:22] <Jarrett> well I checked /usr/local/bin/rustc/i686blabhablh/bin and all the dlls are there
[05:19:23] <Heather> hey rusty people
[05:19:32] <bjz> Heather: o/
[05:19:35] <Jarrett> including std-blahblah-0.9-pre.dll
[05:19:44] <Heather> where is my cell? :)
[05:19:53] <Heather> e.g.  error: unresolved import: there is no `Cell` in `std::cell`
[05:20:00] <klutzy> Heather: Cell is gone (and will be born again?)
[05:20:02] <eddyb> hehe
[05:20:08] <klutzy> Heather: there is RefCell
[05:20:10] <sahabu> bjz: Alright cool, I've done a little bit of in SML-NJ
[05:20:15] <bjz> strcat: let me check
[05:20:17] <eddyb> Heather: what did you use Cell for?
[05:20:30] <eddyb> Heather: dynamic mutability -> RefCell is better
[05:20:39] <Heather> eddyb klutzy I used it for try
[05:20:45] <Heather> .e.g try catch
[05:20:53] <eddyb> huh?
[05:21:00] <Heather> eddyb Ill show
[05:21:11] <klutzy> Jarrett: what about /usr/local/bin/? I'm curious if there is std-@#$@#$.dll
[05:21:30] <Heather> eddyb klutzy https://github.com/Heather/Mirana/blob/master/src/Mirana/Mirana.rs#L469
[05:21:31] *** Joins: amro (quassel@F1E3FD84.8AAAF769.FAAB0799.IP)
[05:21:49] *** Quits: dbaupp (Thunderbir@4F13D67D.D5A1DCF.37681C44.IP) (Ping timeout)
[05:22:21] <Jarrett> there are not, klutzy, but there are the rustc/rustdoc/rustpkg/rustuv/syntax/extra dlls
[05:22:22] <bjz> strcat: I think it has some things with 'events' that I don't fully understand
[05:22:41] <klutzy> Heather: in the case you may use apclone in closure directly
[05:22:48] <eddyb> Heather: you can use plain old enums for that
[05:22:59] <eddyb> Heather: errrr. Options
[05:23:05] <strcat> you don't need that anymore
[05:23:05] <Heather> hm...
[05:23:09] <strcat> there are once fns (procs) now
[05:23:13] <bjz> strcat: I think they are used to create the send and recv fns
[05:23:16] <strcat> you can move in and out of procs
[05:23:16] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[05:23:16] *** ChanServ sets mode: +ao pcwalton pcwalton
[05:23:19] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[05:23:23] <eddyb> Heather: Cell's .take() is an Option .take(). also see what strcat said
[05:24:23] <klutzy> Heather: cells were used at that way because you had no way to move things into ~fn() closure. we now have proc() instead of ~fn() so it's easier
[05:24:46] <klutzy> Jarrett: hmm, interesting. only no std?
[05:24:49] <tautologico> what's the semantics of assignment x = v if v is not bound by Clone?
[05:24:49] <Jarrett> nope
[05:25:04] <strcat> tautologico: Clone is entirely a library thing
[05:25:06] <Jarrett> should I try copying the other dlls there and see if it works?
[05:25:07] <strcat> it never changes what that means
[05:25:08] <sahabu> Thanks for your help bjz!
[05:25:14] <bjz> sahabu: np!
[05:25:24] *** Joins: dbaupp (Thunderbir@4F13D67D.D5A1DCF.37681C44.IP)
[05:25:36] <Heather> json changes there also....
[05:25:37] <strcat> tautologico: http://static.rust-lang.org/doc/master/tutorial.html#implementing-a-linked-list move semantics section here covers how assignment, passing and returning work
[05:25:46] <klutzy> Jarrett: yep!
[05:26:05] <strcat> tautologico: a = b is always a shallow copy, and it works for any type
[05:26:11] <strcat> can't be overridden
[05:26:27] <strcat> Clone is a concept in the library for taking &T and giving back T
[05:26:36] <Heather> what means cannot determine a type for this bounded type parameter: unconstrained type -> https://github.com/Heather/Mirana/blob/master/src/Mirana/Config.rs#L26
[05:27:00] *** Quits: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP) (Quit: Lost terminal)
[05:27:10] <tautologico> strcat: thanks
[05:27:27] <Heather> ah it's because from_reader changed
[05:28:27] <Heather> expect disappeard?
[05:30:38] *** Joins: ross (ross@moz-5EA04060.br.br.cox.net)
[05:30:53] <Jarrett> no go, klutzy
[05:30:55] <Jarrett> still can't find std
[05:31:52] <Heather> why expect is gone?
[05:31:57] <strcat> which expect?
[05:32:11] <Heather> strcat json::from_reader(reader).expect("JSON is broken");
[05:32:26] <Heather> strcat Result expect
[05:32:29] *** Joins: quaddle (Mibbit@3A57D549.152C6BF2.6C68055A.IP)
[05:33:02] <eevee> hmm.  the linked-list section calls & a reference, but then section 11 is outright called "Borrowed Pointers"
[05:33:27] <strcat> eevee: the tutorial is in varying states of disrepair
[05:33:33] <strcat> the linked list section is the newest thing in it
[05:33:46] *** Quits: tautologico (iorek@E0D804D3.CFE755C8.C27E1635.IP) (Quit: zzz)
[05:33:49] <eevee> so it's in least disrepair  :)
[05:33:51] <strcat> it will be consistent if someone rewrites the entire thing to be up-to-date
[05:33:53] <strcat> eevee: yeah
[05:34:51] *** Quits: gdey (gdey@moz-E4449B64.sd.sd.cox.net) (Quit: Leaving...)
[05:35:18] *** Joins: oberstet (quassel@moz-4A0A874D.dynamic.mnet-online.de)
[05:35:26] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[05:35:41] *** Quits: quaddle (Mibbit@3A57D549.152C6BF2.6C68055A.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[05:38:20] <Jarrett> are you THE eevee of PHP-hating legend?
[05:39:03] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[05:39:04] *** ChanServ sets mode: +ao dherman dherman
[05:39:39] <eevee> yep
[05:39:42] <klutzy> Jarrett: sad to hear. does it work to use /builddir/i686-###/bin/rustc.exe instead of /usr/local/bin one?
[05:40:28] *** Joins: gdey (gdey@moz-E4449B64.sd.sd.cox.net)
[05:40:29] <Jarrett> well nice to meet you
[05:40:31] <Jarrett> and let's tryyyyy
[05:41:16] <Jarrett> nope, klutzy
[05:41:37] <Jarrett> wait maybe I'm leaving out something important: I'm using rustpkg to try to build something
[05:46:47] *** Quits: sahabu (sahabu@moz-E00C84CD.hsd1.wa.comcast.net) (Quit: Leaving)
[05:47:10] <klutzy> Heather: on #10893: if you try to reproduce, you have to `make clean-llvm` instead of `make clean` which doesn't clean llvm
[05:47:30] <klutzy> Jarrett: I haven't used rustpkg so I can't say anything :p
[05:47:32] <olsonjeffery> does std has a Set type? like an unordered list of unique values..
[05:47:42] <Heather> klutzy I used git clean
[05:47:47] <olsonjeffery> Set<T: TotalEq> ..
[05:48:02] <olsonjeffery> or would i just have to setting for HashMap w/ bool vals?
[05:48:17] <olsonjeffery> settle*
[05:48:52] <mark_edward> why would i have problems linking a shared library that's in the same directory with rustc?
[05:49:04] <o11c> Heather: git clean -fxd ?
[05:49:14] *** Joins: tautologico (iorek@E0D804D3.CFE755C8.C27E1635.IP)
[05:49:14] <klutzy> Heather: git clean -x? it doesn't remove files in .gitignore
[05:49:22] <olsonjeffery> HashSet
[05:49:54] *** Quits: tautologico (iorek@E0D804D3.CFE755C8.C27E1635.IP) (Quit: Entscheidungsproblem)
[05:50:02] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[05:50:49] <Heather> klutzy not sure but I also removed i686 build dir, so I guess it was there... right?
[05:51:02] *** Quits: dbaupp (Thunderbir@4F13D67D.D5A1DCF.37681C44.IP) (Ping timeout)
[05:51:13] <o11c> klutzy: needs -d also if there are any new directories, and -f with the default settings
[05:51:43] <klutzy> Heather: maybe? the safer solution is what o11c said though
[05:52:03] <Heather> I see
[05:53:47] <strcat> olsonjeffery: there are HashSet (Eq + Hash), TreeSet (TotalOrd)and TrieSet (uint keys)
[05:54:00] *** Quits: gdey (gdey@moz-E4449B64.sd.sd.cox.net) (Quit: Leaving...)
[05:54:41] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:55:40] <olsonjeffery> strcat: yeah im just gonna impl IterBytes and move on
[05:55:51] <olsonjeffery> use HashSet
[05:56:39] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[05:57:30] <olsonjeffery> strcat: are there any examples of impl'ing IterBytes on something like `struct Point { x: uint, y: uint }` ?
[05:57:58] <strcat> olsonjeffery: afaik you can use deriving for IterBytes or TotalOrd
[05:58:05] *** Joins: andreypopp (andreypopp@moz-7261DC60.net)
[05:58:12] <strcat> olsonjeffery: although all you have to do by hand is call iter_bytes(f) on each field
[05:58:17] <strcat> with the closure it passes you
[05:58:36] * olsonjeffery nods
[05:59:47] <strcat> it could be stripped down to this
[05:59:50] <strcat> pub trait HashBytes {
[05:59:52] <strcat>     fn hash_bytes(&self, f: |&[u8]|);
[05:59:54] <strcat> }
[06:00:06] <strcat> it's overly flexible for what it's used for
[06:00:25] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[06:01:16] <Jarrett> bjz: are you still up?
[06:02:28] *** Quits: vodik__ (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[06:02:44] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[06:03:15] *** Quits: dreamer_ (Patryk@90E8C08F.8480A87C.DDAA0084.IP) (Quit: Leaving)
[06:05:20] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[06:05:37] <bjz> Jarrett: yep
[06:05:47] <bjz> Jarrett: I'm on aussie time
[06:05:48] *** Parts: Heather (Heather@19663F6.F53BAACC.9C17E900.IP) ()
[06:06:02] <bjz> Jarrett: 4pm here
[06:09:15] *** Quits: AvianFlu_ (AvianFlu@moz-31F97978.nyc.res.rr.com) (Input/output error)
[06:09:40] <Jarrett> oh, cool
[06:10:22] <Jarrett> bjz: I'm trying to use rustpkg to compile glfw-rs on windows aaaand getting a weird error about it not being able to find std...? maybe you've heard of someone having a similar problem?
[06:10:28] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Input/output error)
[06:10:39] <Jarrett> I made a little test.rs that uses things from std and it compiles with rustc just fine
[06:11:21] <bjz> Jarrett: eh, rustpkg is so weird
[06:11:34] <bjz> yeah I think I had an issue with that
[06:11:44] <klutzy> maybe rustpkg is more broken on windows
[06:11:54] <bjz> can't remember what I did to fix it :(
[06:12:03] <Jarrett> hahah
[06:12:08] * bjz is seriously considering reverting to makefiles
[06:12:09] <klutzy> rustpkg tests are quite broken (so ignored for now)
[06:12:27] <bjz> :(
[06:12:53] <bjz> would help with travis too
[06:13:10] <bjz> atm I can't work out how to build my examples on travis
[06:14:19] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[06:15:59] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[06:16:33] *** Quits: vodik___ (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[06:17:59] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[06:20:39] *** Joins: vodik__ (simon@moz-FD4ADBC6.cable.teksavvy.com)
[06:25:43] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[06:26:33] *** Joins: brendan (brendaneic@777B9EEC.C030CAFC.1EF54B18.IP)
[06:26:33] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[06:29:18] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Quit: )
[06:29:29] *** Quits: brendan (brendaneic@777B9EEC.C030CAFC.1EF54B18.IP) (Ping timeout)
[06:32:55] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[06:33:49] *** Joins: vodik___ (simon@moz-FD4ADBC6.cable.teksavvy.com)
[06:36:30] <eddyb> strcat, cmr: I know it's missing a ton of stuff, but it's a start :D https://etherpad.mozilla.org/k14brBnFZa
[06:36:34] *** Quits: jvns (bork@moz-DE62990.nyc.res.rr.com) (Ping timeout)
[06:36:59] *** Quits: egghead (egghead@7851DE85.C82F6435.20F09BA6.IP) (Ping timeout)
[06:39:32] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[06:40:22] *** Joins: egghead (egghead@7851DE85.C82F6435.20F09BA6.IP)
[06:40:27] *** Quits: GeorgeH (George@moz-FB5F2302.hsd1.nj.comcast.net) (Connection reset by peer)
[06:41:32] <olsonjeffery> is it sad, when looking at a bunch of examples for implementing a heuristic, i settled on the c++ one?
[06:42:10] <olsonjeffery> to port to rust, i should say
[06:42:22] *** Quits: hacker_sam (hacker_sam@moz-5218E46E.public.wayport.net) (Connection reset by peer)
[06:42:38] *** Joins: hacker_sam (hacker_sam@moz-5218E46E.public.wayport.net)
[06:46:08] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Ping timeout)
[06:46:59] *** Quits: bodie (bodie@moz-9A1A7949.cmdnnj.fios.verizon.net) (Ping timeout)
[06:48:43] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[06:49:21] <o11c> olsonjeffery: no, that's to be expected
[06:50:17] <mark_edward> what's with gl-rs and all the function pointer loading? I don't have to do that in C++?
[06:50:39] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[06:51:01] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[06:51:23] <Jarrett> bjz: ^
[06:52:27] <bjz> mark_edward: in C++ you can just include a header file from your OS
[06:52:29] <o11c> mark_edward: yes, you do, you're probably just used to Linux where OpenGL is easy if you use a restricted subset
[06:52:37] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[06:52:39] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[06:52:57] <bjz> but it differs from OS to OS, what symbols/extensions are available
[06:53:04] <o11c> on windows you have to do a lot of nasty stuff
[06:53:04] <bjz> woops
[06:53:07] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:53:07] <bjz> not OS
[06:53:12] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[06:53:18] <bjz> I mean, depending on your driver
[06:53:31] <eddyb> I went a bit ranty, but this is my view http://www.reddit.com/r/rust/comments/1sobfw/loup_vaillant_how_class_based_programming_sucks/cdzu5as
[06:53:37] <mark_edward> bjz, what do you mean? what confuses me is why gl-rs isn't just a safe wrapper over opengl stuff? i mean in C++ i just include gl.h and link. why is this FFI so different?
[06:53:41] <eddyb> bjz: and between driver versions, etc
[06:53:55] <mark_edward> compared to other C bindings i've seen
[06:54:15] <Jarrett> aHA, it seems that rustpkg is looking in a weird place for the standard library packages
[06:54:18] <eddyb> mark_edward: if you use anything with "ext" in name it might fail to load on a random system
[06:54:18] <bjz> mark_edward: gl-rs is comparable to glew or glloadgen
[06:54:23] *** Joins: bodie (bodie@moz-9A1A7949.cmdnnj.fios.verizon.net)
[06:54:38] <o11c> mark_edward: if you use a very limited subset of GL commands and only use linux, you can get away with not loading
[06:54:46] <o11c> but the typical case is that you have to load them
[06:54:54] <Jarrett> I think it's trying to look in /local/lib instead of /usr/local/lib
[06:54:54] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[06:55:05] <eddyb> mark_edward: you can use OpenGL 4.x features by just including "gl.h", I think, but try to run that on something with an intel integrated card
[06:55:23] <eddyb> s/card/chip/. and an older one, ofc
[06:55:45] <eddyb> I'm pretty sure proprietary drivers install libGL.so and gl.h
[06:55:45] <strcat> intel is still only at 3.3 with their open-source drivers
[06:55:53] <bjz> Jarrett: yeah, jack is helping me move away from rustpkg
[06:56:08] <strcat> eddyb: the libGL/glx issues are considered a bug
[06:56:08] <eddyb> instead of fixing rustpkg?
[06:56:15] <bjz> Jarrett: rustpkg has become a real pain to use :(
[06:56:22] <Jarrett> hrm
[06:56:39] <strcat> egl/opengles is implemented sanely, glx/opengl isn't
[06:56:56] <eddyb> I actually love EGL/wayland
[06:57:11] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[06:58:08] <eddyb> (mainly because a hobby OS can actually implement everything that will be needed to run KF5, without rewriting X11, writing drivers for it, or emulating the protocol)
[06:59:05] *** Joins: dbaupp (Thunderbir@moz-EB2EFE6F.lns20.syd6.internode.on.net)
[07:00:10] <mark_edward> wow what a heinous structure for an api
[07:00:11] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[07:00:12] *** Joins: lpy (lpy@6A741DB7.F09091A8.1348A864.IP)
[07:00:20] <mark_edward> is DirectX any better?
[07:00:49] <strcat> the point is that you pick a base version to target
[07:00:55] <strcat> but you can dynamically load extensions if available
[07:01:02] <strcat> you don't *have* to dynamically load everything
[07:01:27] <mark_edward> but you still have to dynamically load base versions?
[07:01:44] <strcat> you can just target gl 3.3 and be done with it if you want (any non-ancient discrete GPU, and recent intel GPUs - probably all that most 3d games with run on)
[07:01:46] <strcat> mark_edward: no
[07:02:26] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[07:02:49] <strcat> maybe on windows... dunno
[07:03:06] <bjz> mark_edward: GL is insane
[07:03:13] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[07:03:20] <mark_edward> :(
[07:03:30] *** Quits: andreypopp (andreypopp@moz-7261DC60.net) (Quit: andreypopp)
[07:03:34] <eddyb> sometimes the drivers are better, sometimes they aren't
[07:03:35] <strcat> mark_edward: it's structured in terms of extensions, and the versions include a baseline set of extensions
[07:03:38] <Jarrett> where's the actual source for rustpkg? there's librustpkg but it doesn't seem to have the frontend
[07:03:42] <eddyb> mark_edward: http://blog.wolfire.com/2010/01/Why-you-should-use-OpenGL-and-not-DirectX
[07:03:45] <bjz> mark_edward: plus it's hard to wrap it in a typesafe way - it relies on lots of implicit conversions
[07:03:59] <strcat> bjz: normal gl isn't memory safe anyway ;]
[07:04:06] <eddyb> it's C, what can you do?
[07:04:08] <bjz> strcat: yup
[07:04:32] <strcat>  GL_ARB_robustness + intel drivers -> memory safety! ;p
[07:04:34] <eddyb> maybe we can get Khronos or whoever's responsible to define OpenGL 5 in Rust
[07:04:39] <strcat> any discrete GPU is far from safe
[07:04:46] <strcat> WebGL is a crazy thing
[07:05:16] <bjz> yep
[07:05:30] <strcat> there are often bugs in the nvidia drivers allowing arbitrary reads of any *main memory*
[07:05:41] <strcat> the GPU memory? you can pretty much always find a way to read that ;p
[07:05:42] <bjz> (crazy in the negative sense)
[07:06:00] <eddyb> if wiREd gets usable for vuln detection at some point, I should start running it on proprietary drivers and/or firmware and exploit those via WebGL
[07:06:01] <acrichto> strcat: no-landing-pads currently only works in the current compilation unit
[07:06:09] <strcat> intel is *just* landing per-process memory protection for GPU memory and none of the other vendors have it
[07:06:13] <strcat> acrichto: yeah I figured it out
[07:06:24] <strcat> acrichto: https://github.com/thestinger/rust-core/blob/master/test/Makefile still a PITA, but it works
[07:06:43] *** Joins: asdfdsafdsaf (wil@moz-C1925B7.bootp.virginia.edu)
[07:06:43] <strcat> my clang it 3.3 so it segfaults on some of our bytecode
[07:06:45] <strcat> wooo
[07:06:47] <strcat> is 3.3*
[07:06:55] <eddyb> haha, gg
[07:07:02] <eddyb> mine is 3.5 but it uses 3.3 LLVM :(
[07:07:12] * strcat does one more evil force push
[07:08:07] <asdfdsafdsaf> Quick question: Is there an easy way to do either varargs or default values for parameters in rust? I found a proposal for kwargs, but it seemed that it was targeting a post-1.0 release.
[07:08:48] <eddyb> there: http://www.reddit.com/r/rust/comments/1sikak/ask_cmr_to_do_things/cdzuedi
[07:08:51] <strcat> asdfdsafdsaf: probably never going to have varargs
[07:09:00] <eddyb> strcat: what are you talking about?
[07:09:01] <strcat> I highly doubt rust ever will
[07:09:05] <myname> you may use a struct with default values, but that's not very comfortable
[07:09:17] <eddyb> not the stupid va_args, but variadic functions
[07:09:25] <asdfdsafdsaf> myname: Yeah, I was trying to avoid that.
[07:09:26] <strcat> eddyb: yeah, I don't think it will be accepted
[07:09:27] <eddyb> strcat: you kinda need them
[07:09:30] <strcat> for what?
[07:09:39] <eddyb> the fn reform isn't complete
[07:09:43] <eddyb> you need that Fn trait
[07:09:49] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[07:10:21] <eddyb> you can't really support anything decent other than stack closures without it
[07:10:36] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[07:10:44] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[07:10:45] <strcat> eddyb: doesn't make me think it will be accepted
[07:11:45] <strcat> rust doesn't have SFINAE, and is designed to type-check from the definition alone
[07:12:01] <strcat> I don't see how variadic functions could be implemented within the constraints that were chosen
[07:13:09] <o11c> er, why are varargs hard?
[07:13:51] <mark_edward> does rust have  bitrotate intrinsics?
[07:14:12] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (Quit: Coyote finally caught me)
[07:14:18] <strcat> mark_edward: no, the equivalent shifts trivially compile down to them
[07:14:18] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[07:14:27] <mark_edward> strcat, thanks!
[07:14:42] <strcat> llvm doesn't include intrinsics when they can't do better than just that pattern in plain code
[07:14:51] *** Joins: vky (chatzilla@moz-4F2E17BF.dsl.dynamic.sonic.net)
[07:14:58] <strcat> (that's why they don't have memcmp, for example - no one wrote alignment-aware expansion of memcmp)
[07:15:44] <strcat> eddyb: afaik rust is intended to have stuff like an occurs check to prevent infinite recursion in typeck
[07:17:01] <strcat> o11c: which language have type-safe varargs not based on hacks like SFINAE?
[07:17:04] <strcat> languages*
[07:17:29] <SiegeLord> D is one... it has no SFINAE
[07:18:03] <o11c> strcat: I don't usually think of C++'s varargs rrelying on SFINAE ...
[07:18:12] <strcat> SiegeLord: it has similar hacks
[07:18:13] <Jarrett> did they finally dump SFINAE in D2
[07:18:25] <SiegeLord> D never had SFINAE, afaik
[07:18:42] <eddyb> strcat: err, it will type check
[07:18:50] <strcat> rust doesn't have templates, and never will - it's not going to have recursive pattern matching of types
[07:19:00] <strcat> whether or not you consider that SFINAE
[07:19:08] <SiegeLord> Func trait could be compiler magic :P
[07:19:11] *** Joins: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP)
[07:19:15] <eddyb> SiegeLord: shush
[07:19:27] <SiegeLord> There's no problem, in principle, from writing trait Func<T..>
[07:19:32] <SiegeLord> You just can't use that T.. in any way
[07:19:36] <eddyb> it's ..T >_>
[07:19:46] <eddyb> SiegeLord: and my first PR allows that
[07:19:47] <o11c> strcat: well, I guess that means we just have to write things like format! as macros
[07:19:59] <eddyb> SiegeLord: well, no, T being a closure
[07:20:18] <eddyb> SiegeLord: you just can't expand it from trans
[07:20:21] <strcat> o11c: we don't have CTFE so it has to be one anyway
[07:20:23] <o11c> strcat: wouldn't it be better to *avoid* macros when possible (even though Rust's macros are better than C's)
[07:20:40] <Jarrett> D1 definitely had SFINAE but virtually all the uses of it were subsumed by is()
[07:20:40] <SiegeLord> eddyb, I thought you didn't get past using that in 'type'?
[07:20:54] <strcat> o11c: so how do you suggest implementing varargs then
[07:21:00] <o11c> strcat: sure, for the *specific* case of format. But my point is, if varargs are not in the language proper, you're just encouraging more macros
[07:21:05] <eddyb> SiegeLord: nevermind what I was saying. look at the tests if you want to see how far I got
[07:21:16] <eddyb> strcat: pattern matching in types is required for something like a tuple .zip method, just to express the return type
[07:21:18] <SiegeLord> Link?
[07:21:20] <strcat> o11c: and how do you implement varargs without templates, SFINAE, type-based pattern matching and other things in D/C++?
[07:21:27] <strcat> eddyb: and we aren't going to get it
[07:21:37] <eddyb> strcat: but it's not required for something like a variadic add function
[07:21:38] <strcat> it's silly to think we will - it's the opposite of rust's trait system
[07:22:10] <strcat> eddyb: a variadic add isn't useful, we have arrays, unless you mean of different types
[07:22:15] <o11c> strcat: well, it's fairly similar to an array of some common trait
[07:22:28] <o11c> except that it needs to preserve the individual types
[07:22:35] <o11c> which you already have implemented ...
[07:23:09] <eddyb> strcat: well, yeah. you can match the impl on a single type with traits, but you can use any type info from there
[07:23:21] <eddyb> strcat: I am not going to change that model
[07:23:39] <dbaupp> strcat: can you add rust-core to rust-ci now?
[07:24:01] <strcat> dbaupp: dunno
[07:24:30] <strcat> probably not
[07:24:35] <eddyb> I want to expand on what's limiting certain variadic tricks, but a lot of stuff (including Fn) work with no notational additions
[07:24:38] <strcat> I need clang from svn matching rust's version
[07:24:43] <strcat> it segfaults for me on 3.3
[07:25:33] <dbaupp> oh, clang is still necessary
[07:25:52] <strcat> yes rust still uses LLVM's segmented stack support
[07:26:25] <dbaupp> right
[07:26:41] <eddyb> like, one way to do tuple clone is impl<Head, (..Tail): Clone> Clone for (Head, ..Tail) {...}
[07:27:32] <eddyb> that's like <Head, ..Tail: Clone>, except (..Tail) needs to have Clone, not every element
[07:27:49] *** Quits: vodik__ (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[07:27:50] <strcat> I don't really expect default type parameters or default parameters to ever land either, but I think it's within the realm of possibility
[07:28:05] <strcat> I've been trying to think of a nice way of doing allocators in a world without default type params
[07:28:18] <eddyb> that world hurts
[07:28:26] <Jarrett> okay, rustpkg IS looking in the right base directory, but it's expecting packages to be in $base/lib, but the installer just puts them in $base/bin
[07:28:27] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[07:28:33] <SiegeLord> Jarrett, http://dpaste.dzfl.pl/c02b6b20
[07:28:35] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[07:28:39] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[07:28:49] <eddyb> strcat: fwiw, default type parameters are really easy to impl
[07:28:59] <SiegeLord> That's a basic C++ SFINAE example ported to D
[07:29:35] <SiegeLord> Are you the Jarrett of the D1 ragequit fame incidentally? ;)
[07:29:47] <strcat> SiegeLord: don't you need to do it from a type parameter?
[07:30:07] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[07:30:18] <SiegeLord> Do what from a type parameter?
[07:30:19] <eddyb> strcat: I mean, I could prolly do it before nmatsakis looks over my first variadics-related PR, because I know the "injection site" from that PR
[07:30:20] <Jarrett> I am indeed |O
[07:30:24] <SiegeLord> Hehe, nice
[07:31:12] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[07:31:23] <SiegeLord> strcat, I just ported the example from here: http://en.wikipedia.org/wiki/SFINAE
[07:31:28] <eddyb> strcat: (T) is a type param, if that's the misunderstanding
[07:31:42] <Jarrett> hmm, SiegeLord
[07:31:50] <eddyb> strcat: or you mean a type param of a different generic, instead of Test/int
[07:32:00] <Jarrett> cause I'm looking at the D1 template thing and it does mention D having SFINAE
[07:32:04] <Jarrett> http://digitalmars.com/d/1.0/templates-revisited.html
[07:32:09] *** Quits: KindOne (KindOne@moz-ADEEC3B9.dynamic.ip.windstream.net) (Quit: ZNC 1.2 - http://znc.in)
[07:32:22] *** Quits: FreeFull (freefull@moz-EFEF3DB5.as13285.net) (Quit: )
[07:32:29] <strcat> Jarrett: well they have stuff like static if
[07:32:32] <strcat> so it's not really necessary
[07:32:35] <Jarrett> yes
[07:32:36] <Jarrett> and is()
[07:32:40] <strcat> anyway
[07:32:40] <eddyb> SiegeLord: in Rust, that would be <T: HasField<"foo">> and <T: !HasField<"foo">>
[07:32:46] <strcat> anything like that is *not acceptable* for rust
[07:32:52] <strcat> it's just not how the type system is designed to work
[07:32:57] <eddyb> SiegeLord: that's hypotethical future syntax, though
[07:32:59] *** Joins: m_kato (m_kato@moz-C286AD9A.bitcat.net)
[07:32:59] <strcat> so you can forget about ever landing anything like that ;p
[07:33:08] <eddyb> strcat: what I just wrote, would that be accepted?
[07:33:25] <strcat> I doubt it
[07:33:27] <eddyb> (assuming all the machinery was in place for it to work)
[07:33:48] <SiegeLord> Does that count as SFINAE?
[07:33:49] <eddyb> I mean, apart from allowing structural duck typing, you're not breaking any current rules
[07:33:55] <strcat> we used to have structural records
[07:33:57] <eddyb> SiegeLord: what I just wrote? no
[07:33:57] <strcat> they were dropped
[07:34:16] <eddyb> those are trait bounds
[07:34:29] <strcat> eddyb: https://github.com/mozilla/rust/issues/4707 a short list of removed things
[07:34:45] <strcat> (ofc there's a lot more)
[07:34:51] *** Quits: g3xzh_ (g3xzh@moz-F05C9A20.red.bezeqint.net) (Quit: Leaving)
[07:34:58] <eddyb> trait HasField<Name: static str> {}
[07:35:00] *** Joins: g3xzh (g3xzh@moz-F05C9A20.red.bezeqint.net)
[07:35:14] <strcat> I don't think anything like that would be accepted
[07:35:30] <eddyb> strcat: gj, you crashed my chrome
[07:35:33] <SiegeLord> Jarrett, The example they give on that page just uses is() to do the same thing. I think it's just another example of D creators being misleading
[07:35:40] <strcat> the type system isn't meant to be very structural, traits are explicit opt-in for that reason rather than duck-typed like Go
[07:35:57] <eddyb> strcat: oh, I know, I was just converting the example
[07:36:01] <strcat> SiegeLord: well I think the way D does it is better than SFINAE but it's the same class of hack
[07:36:18] <SiegeLord> Yes, I don't argue with that. Neither is Rustic
[07:36:21] <Jarrett> SiegeLord: though it does say "Although SFINAE (Substitution Failure Is Not An Error) can be used, the is expressions can test a type directly" which makes me wonder... but yeah, it's not really a big loss NOT to have it ;P
[07:36:42] <Jarrett> D is fairly hacky yes :P
[07:36:51] <strcat> type-based metaprogramming where you can see all the guts of the implementation externally, but it's not in a simple type signature
[07:36:52] <eddyb> strcat: you could very well have trait HasFoo<T> {fn get_foo(&self) -> T {} } so it's not a big deal
[07:37:18] <eddyb> or &T, rather
[07:37:30] <strcat> a lot of work has gone into removing corner case features to simplify the language
[07:37:39] <strcat> I expect anything that's not super obvious/useful will face huge resistance
[07:38:50] *** Joins: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net)
[07:39:06] <bjz> I'm not sure about "the type system isn't meant to be very structural" - it seems like it evolved that way, rather than by masterplan
[07:39:23] <strcat> bjz: traits were designed that way
[07:39:33] <strcat> and structural records were removed even though they're useful - to simplify the language
[07:39:34] <eddyb> just don't add C++-like multiple inheritance
[07:39:37] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Ping timeout)
[07:40:04] * o11c has actually seriously used multiple inheritance in C++
[07:40:15] <eddyb> I don't want people complaining about cost of virtual field access when all I need is code reuse (which doesn't need any virtual calls)
[07:40:18] *** Joins: alex-abreu (alex@moz-4B4D75AD.rev.sfr.net)
[07:40:26] <o11c> I do it a lot more in python though
[07:40:35] <o11c> I don't use *virtual* inheritance in C++
[07:40:51] <eddyb> and with some field-based duck typing, you can solve the diamond problem *both* ways
[07:40:51] *** Quits: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net) (Ping timeout)
[07:40:53] <strcat> wooo object slicing
[07:41:19] *** Quits: rossm (rossm@moz-EE3BB1DC.br.br.cox.net) (Connection reset by peer)
[07:41:24] *** Joins: rossm (rossm@moz-EE3BB1DC.br.br.cox.net)
[07:41:32] <eddyb> it may look nastier, but it's not *bad*
[07:41:32] <strcat> eddyb: well, you want Go then ;p
[07:41:40] <Jarrett> yisssssssss just putting the dlls in /local/lib fixed rustpkg :D
[07:41:48] <strcat> they have a multiple-inheritance-ish thing via field duck typing
[07:41:56] <strcat> ish
[07:42:05] <eddyb> strcat: this is a long term thing, mostly. right now you have to jump through trait hoops and it's not *too* bad
[07:42:19] <eddyb> strcat: though there isn't a way to get a trait object from another trait object
[07:42:20] <Jarrett> and I built a thing!
[07:42:22] <strcat> there will be more and more resistance to any language changes
[07:42:35] <sigma> duck typing is awesome and a little evil at the same time
[07:42:35] <eddyb> like ~Any -> ~MyTrait
[07:42:38] <strcat> whether or not they're backwards compatible
[07:42:43] *** Joins: andreypopp (andreypopp@moz-7261DC60.net)
[07:42:47] *** Quits: asdfdsafdsaf (wil@moz-C1925B7.bootp.virginia.edu) (Quit: leaving)
[07:43:12] <strcat> something being put on a 'far future' backburner is almost always the same as that thing being decided against, imo
[07:43:32] <strcat> other idioms will be used instead and you won't be able to change the whole ecosystem
[07:43:41] <eddyb> you need a base trait MaybeEverything { fn maybe_one(&self) -> Option<&One> {None} fn maybe_two(&self) -> Option<&Two> {None}, ...}
[07:43:55] <eddyb> which sucks if you can have things outside the scope of MaybeEverything
[07:43:55] <sigma> are higher kinded types still on the cards? (if someone decides to implement them)
[07:44:07] <cmr> sigma: yes
[07:44:16] <sigma> cool
[07:44:26] <strcat> sigma: if someone figures out how to implement them, and it doesn't result in full monomorphization not being enough ;p
[07:44:42] <strcat> haskell's type system apparently can't be completely specialized like that
[07:45:01] <eddyb> we surely don't want haskell's runtime polymorphic madness
[07:45:04] <sigma> ahh, I hadn't read that bit of the discussion
[07:45:23] <eddyb> one mm_freak tried to make me understand how it can even work and I just couldn't
[07:46:00] <eddyb> for some of those uses you can go with a trait object in rust
[07:46:25] <eddyb> I guess it's like Java's virtual crap
[07:46:35] <eddyb> <3 monomorphization
[07:47:05] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[07:47:18] *** Joins: KindOne (KindOne@moz-ADEEC3B9.dynamic.ip.windstream.net)
[07:48:19] <Jarrett> I don't think I understand how 'rustpkg install' works :I
[07:48:20] *** Quits: rossm (rossm@moz-EE3BB1DC.br.br.cox.net) (Ping timeout)
[07:48:33] <eddyb> SiegeLord: tests start here https://github.com/mozilla/rust/pull/10769/files#diff-0424dc9ff585d7db10f053ee912e19a9R1
[07:49:10] *** Joins: rossm (rossm@moz-EE3BB1DC.br.br.cox.net)
[07:49:12] <SiegeLord> I managed to find them eventually... they don't really do anything beyond what I thought they would do
[07:49:39] <eddyb> myeah, sorry for the delay, I was caugh up in the conversation and then strcat crashed my chrome :P
[07:49:44] *** Quits: abacus (snoonan_mo@moz-F95B9243.hsd1.wa.comcast.net) (Ping timeout)
[07:49:48] <eddyb> SiegeLord: that is only part one, though
[07:50:11] <SiegeLord> So how are you planning on handling foo<..T> { somehow use T } ?
[07:50:20] <eddyb> yes
[07:50:46] <eddyb> T is a tuple there. the typeck support required for that might be maddening
[07:51:35] <eddyb> but from now on, you can't go wrong
[07:51:51] <SiegeLord> But what exactly will it look like?
[07:52:16] <eddyb> SiegeLord: for a function, fn foo<..Args>(..args: Args)
[07:52:36] <SiegeLord> And how do you use 'args' inside the function?
[07:52:57] <eddyb> well, it's a tuple. you can use anything which can apply to a tuple of any size :P
[07:53:09] *** Quits: jweinberg (jweinberg_@3E5CF971.9533F93D.26E46D7D.IP) (Ping timeout)
[07:53:18] <eddyb> you'd want a trait bound on every element of Args, most of the time
[07:53:19] <SiegeLord> Can you give me an example?
[07:53:26] <SiegeLord> I can't think of anything
[07:53:41] <SiegeLord> Even stuff like .n1() is only implemented for some tuple
[07:53:42] <SiegeLord> s
[07:54:05] <SiegeLord> rusti, (1, 2, 3, 4, 5, 6, 7, 8).n0()
[07:54:08] -rusti- 1
[07:54:11] *** Quits: dignan (dignan@37A38C73.9CE91D06.839F6EC0.IP) (Ping timeout)
[07:54:13] <eddyb> try double that size
[07:54:22] *** Quits: oldmanstan (glesica@moz-CA910636.net) (Ping timeout)
[07:54:29] <SiegeLord> I thought it was up to 6... oh well
[07:54:42] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:54:45] <Yurume> rusti, (1,2,3,4,5,6,7,8,9,0).n0()
[07:54:46] -rusti- 1
[07:54:49] <Yurume> rusti, (1,2,3,4,5,6,7,8,9,10,11).n0()
[07:54:50] -rusti- 1
[07:54:52] <Yurume> hm?
[07:54:53] <eddyb> ...
[07:54:55] <Yurume> rusti, (1,2,3,4,5,6,7,8,9,10,11,12,13).n0()
[07:54:57] -rusti- pastebinned 5 lines of output: http://sprunge.us/JegJ
[07:54:57] <eddyb> you're not trying hard enough
[07:55:01] *** Joins: Ms2ger (Ms2ger@57ACE628.C60A97A6.F9FB0584.IP)
[07:55:06] <ChrisMorgan> They're implemented up to 12.
[07:55:14] <Yurume> AFAIK it was 10 or 12, and it seems 12
[07:55:28] <myname> why 12?
[07:55:48] <myname> because everybody loves the duodecimals?
[07:56:06] <ChrisMorgan> Because its factors are 1, 2, 3, 4, 6 and 12?
[07:56:09] *** Quits: rossm (rossm@moz-EE3BB1DC.br.br.cox.net) (Ping timeout)
[07:56:28] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[07:56:31] <myname> does this matter for the implementation?
[07:56:48] *** Joins: rossm (rossm@moz-EE3BB1DC.br.br.cox.net)
[07:56:58] <ChrisMorgan> You've got to stop somewhere, so why not there?
[07:56:59] *** Joins: dignan (dignan@37A38C73.9CE91D06.839F6EC0.IP)
[07:57:03] *** Joins: jweinberg (jweinberg_@3E5CF971.9533F93D.26E46D7D.IP)
[07:57:04] *** Joins: oldmanstan (glesica@moz-CA910636.net)
[07:57:57] <ChrisMorgan> (I'd quite like tuples to implement Index so that (a, b, c, d, e, f, g)[3] == d, but that probably can't be done efficiently as a library type.)
[07:57:58] <eddyb> fn print<(..Args): Printable>(..args: Args) {args.print();} trait Printable {fn print(&self);} impl<Head: fmt::Default, (..Tail): Printable> Printable for (Head, ..Tail) {fn print(&self) {let (head, ..tail) = self; println!("{}", head); tail.print();}} impl Printable for () {fn print(&self) {}}
[07:58:08] <eddyb> ChrisMorgan: with Any?
[07:58:17] <eddyb> otherwise you can't implement Index at all
[07:58:26] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[07:58:40] <mark_edward> how do you call a trait method in a generic context?
[07:58:48] <mark_edward> when the method has no `self` parameter
[07:58:58] <ChrisMorgan> eddyb: all you've got to do is constrain all the items to the same type. But that's not exactly a useful constraint.
[07:59:01] <Yurume> Trait::foo().
[07:59:21] <eddyb> ChrisMorgan: erm, can you even constraint them?
[07:59:26] <mark_edward> Yurume, i'm trying that with FromPrimitive::from_uint, but i keep getting a type error
[07:59:28] <Yurume> that only works in the generic context with Trait bound to the generic parrameters.
[07:59:44] <Yurume> hm
[08:00:02] <eddyb> isn't there a free adaptor for from_uint?
[08:00:07] <Yurume> I think so?
[08:00:10] <ChrisMorgan> eddyb: you can't with the current syntax and semantics of tuples, but a situation like `impl<T, N: uint> Index<int, T> for (T, ..N)` is conceivable.
[08:00:11] <eddyb> as in, a free function
[08:00:24] *** Quits: victorporof_ (victorporo@C8C495F5.E3195F0D.9B1E38F4.IP) (Ping timeout)
[08:00:28] <Yurume> rusti: let x = from_uint::<u64>(8u8); x
[08:00:29] -rusti- <anon>:9:16: 9:32 error: unresolved name `from_uint`.
[08:00:29] -rusti- <anon>:9         let x = from_uint::<u64>(8u8); x
[08:00:29] -rusti-                          ^~~~~~~~~~~~~~~~
[08:00:29] -rusti- error: aborting due to previous error
[08:00:29] -rusti- application terminated with error code 101
[08:00:32] <Yurume> ..oops
[08:00:35] <eddyb> ChrisMorgan: then you have a fixed-length vector >_>
[08:00:38] *** Joins: victorporof (victorporo@C8C495F5.E3195F0D.9B1E38F4.IP)
[08:00:43] <eddyb> ChrisMorgan: as a tuple
[08:00:46] <Yurume> rusti: let x = FromPrimitive::from_uint(8u8); x
[08:00:47] *** Quits: gwty_ (gwtypc@322EAEF3.E0A5EE90.D6324C7.IP) (Ping timeout)
[08:00:47] -rusti- pastebinned 11 lines of output: http://sprunge.us/AdAZ
[08:00:52] *** Joins: gwty (gwtypc@322EAEF3.E0A5EE90.D6324C7.IP)
[08:01:05] <Yurume> rusti: let x = std::num::FromPrimitive::from_uint(8u8); x
[08:01:05] <mark_edward> rusti: use std::num::{Bitwise, FromPrimitive}; fn ror<T: Bitwise + FromPrimitive>(v: T, n: T) -> T {   (v >> n) | (v << (FromPrimitive::from_uint(size_of::<T>()).unwrap() - n) )} ror(0x111u, 1)
[08:01:07] -rusti- pastebinned 11 lines of output: http://sprunge.us/JgNJ
[08:01:07] -rusti- pastebinned 8 lines of output: http://sprunge.us/cVOD
[08:01:17] <ChrisMorgan> eddyb: yes, I guess I'm just a little slow to think of it that way because of the difference between tuples and lists in Python in efficiency.
[08:01:35] <eddyb> ChrisMorgan: I actually considered making (..[T, ..N]) a thing, as part of my *first* varidics-related PR, but decided against its usefulness
[08:01:40] <Yurume> ...wait what. rusti is running Rust 0.8.
[08:01:40] <SiegeLord> eddyb, That's... terrifying
[08:01:48] *** Quits: lpy (lpy@6A741DB7.F09091A8.1348A864.IP) (Ping timeout)
[08:01:54] <strcat> Yurume: had to be rolled back to 0.8 because at some point master broke
[08:02:02] <strcat> I could put it ~1 month after 0.8...
[08:02:04] <eddyb> ChrisMorgan: and your example could actually work with that. but you need N: static uint
[08:02:09] *** Joins: lpy (lpy@6A741DB7.F09091A8.1348A864.IP)
[08:02:16] <ChrisMorgan> Yurume: because I/O isn't working properly with pipes.
[08:02:22] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[08:02:31] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[08:02:42] <Yurume> ahaa.
[08:02:45] <eddyb> SiegeLord: that's one way to do it. the other is to pattern-match on tuples with match and I'm not sure strcat likes that, either
[08:02:48] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:02:51] <strcat> rusti: 2
[08:02:53] <eddyb> rusti: version
[08:02:54] <Yurume> mark_edward: anyway, let x: Option<u64> = std::num::FromPrimitive::from_uint(8u); println!("{}", x); works pretty well (in 0.9-pre)
[08:03:02] -rusti- timeout triggered!
[08:03:02] -rusti- timeout triggered!
[08:03:05] <eddyb> hah
[08:03:06] <ChrisMorgan> eddyb: you convinced me that Index for Tuple is silly (as well as infeasible).
[08:03:21] <SiegeLord> I wonder exactly how that will typecheck...
[08:03:22] <strcat> huh, it's async?
[08:03:24] <strcat> rusti: 2
[08:03:27] <strcat> rusti: 2
[08:03:29] <strcat> rusti: 2
[08:03:30] *** Quits: vodik___ (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[08:03:31] <strcat> I don't remember making that async
[08:03:32] <Yurume> rusti: 42
[08:03:40] -rusti- timeout triggered!
[08:03:44] *** Quits: oberstet (quassel@moz-4A0A874D.dynamic.mnet-online.de) (Connection reset by peer)
[08:03:45] -rusti- timeout triggered!
[08:03:45] -rusti- timeout triggered!
[08:03:45] -rusti- timeout triggered!
[08:03:45] *** Joins: oberstet (quassel@moz-4A0A874D.dynamic.mnet-online.de)
[08:03:47] *** Quits: zheng_li (zheng_li@moz-D6711E9E.xenplanet.org) (Ping timeout)
[08:03:48] *** Quits: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr) (Ping timeout)
[08:03:48] *** Quits: zz_kimundi (kimundi@moz-B3388EAA.dip0.t-ipconnect.de) (Ping timeout)
[08:03:48] *** Quits: bodie (bodie@moz-9A1A7949.cmdnnj.fios.verizon.net) (Ping timeout)
[08:03:49] * strcat doesn't understand
[08:03:51] *** Quits: Amanieu (amanieu@10FEE2FD.ECEF57A4.2CFD4520.IP) (Client exited)
[08:03:56] <strcat> ah nvm I do understand
[08:03:56] *** Quits: jason_ (jason@moz-EC85D533.members.linode.com) (Ping timeout)
[08:03:56] *** Quits: Soft (soft@moz-EC8D39F.yok.fi) (Ping timeout)
[08:03:58] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[08:04:00] *** Quits: havarnov (havarnov@7FCD87A9.7B7BA24D.CB207656.IP) (Ping timeout)
[08:04:00] *** Quits: Caseus (bacon@moz-9F046088.members.linode.com) (Ping timeout)
[08:04:00] *** Quits: SirSkidmore (taylor@529E7008.E302D3D8.F395EA5B.IP) (Ping timeout)
[08:04:00] *** Quits: kemurphy (kemurphy@3863AC20.C4E71399.9510F13D.IP) (Ping timeout)
[08:04:00] *** Quits: friggle (friggle@moz-A607EAFA.members.linode.com) (Ping timeout)
[08:04:00] *** Quits: Mowah (Mowah@moz-436C35C5.cust.bredbandsbolaget.se) (Ping timeout)
[08:04:00] *** Quits: wting (wting@4F978BD6.5564A9BA.9510F13D.IP) (Ping timeout)
[08:04:00] *** Quits: veddan (viktor@moz-C79BC80B.csbnet.se) (Ping timeout)
[08:04:02] *** Quits: xales (xales@moz-7DEA692E.forevernothing.com) (Ping timeout)
[08:04:04] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[08:04:05] *** Joins: vodik___ (simon@moz-FD4ADBC6.cable.teksavvy.com)
[08:04:06] *** Quits: AlexMax (alexmax@moz-3D3F5603.funcrusher.net) (Ping timeout)
[08:04:06] *** Quits: StarLight (StarLight@moz-394A896.dynamic.avangarddsl.ru) (Ping timeout)
[08:04:09] *** Quits: Kxepal (Miranda@moz-EDD846B4.pppoe.mtu-net.ru) (Ping timeout)
[08:04:09] *** Quits: mark_edward (mark@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Ping timeout)
[08:04:12] *** Quits: rhodesd (none@3646D136.4C5731DA.F395EA5B.IP) (Ping timeout)
[08:04:12] *** Quits: mmalecki (maciej@DE8E8A22.9EBA3CD1.D6573861.IP) (Ping timeout)
[08:04:12] *** Quits: amro (quassel@F1E3FD84.8AAAF769.FAAB0799.IP) (Ping timeout)
[08:04:12] *** Quits: petantik (oz@moz-20EC2160.net) (Ping timeout)
[08:04:14] <eddyb> strcat: I blame you
[08:04:14] *** Joins: amro (quassel@F1E3FD84.8AAAF769.FAAB0799.IP)
[08:04:15] <Yurume> strcat: you killed them! XD
[08:04:15] *** Joins: veddan (viktor@moz-C79BC80B.csbnet.se)
[08:04:18] *** Joins: wting (wting@4F978BD6.5564A9BA.9510F13D.IP)
[08:04:20] *** Quits: Edwards (MeltdownMo@moz-B62E1D6B.members.linode.com) (Ping timeout)
[08:04:20] *** Quits: agrif (agrif@moz-94847975.net) (Ping timeout)
[08:04:20] *** Quits: brianloveswords (brianloves@moz-CB223D1E.members.linode.com) (Ping timeout)
[08:04:20] *** Quits: ivan (ivan@moz-531C3EC9.members.linode.com) (Ping timeout)
[08:04:20] *** Quits: oal (oal@26029749.1D466084.2CFD4520.IP) (Ping timeout)
[08:04:20] *** Quits: dbussink (dbussink@moz-E0A5568C.bussink.me) (Ping timeout)
[08:04:20] *** Quits: jxs (joaoxsouls@1FF12F4F.CDF09DE2.D6573861.IP) (Ping timeout)
[08:04:20] *** Quits: pepijndevos (pepijndevo@9EACEF43.E50A3180.BCE47D84.IP) (Ping timeout)
[08:04:20] *** Quits: Ke (jkarlson@moz-785A3407.org.aalto.fi) (Ping timeout)
[08:04:20] *** Quits: snerd (motk@moz-D21A06DF.members.linode.com) (Ping timeout)
[08:04:20] *** Quits: utkarsh (utkarsh@moz-CA9C0A97.members.linode.com) (Ping timeout)
[08:04:20] *** Quits: reyre (reyre@moz-89E9865B.com) (Ping timeout)
[08:04:20] *** Quits: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk) (Ping timeout)
[08:04:20] *** Quits: pcmattman (pcmattman@moz-D9B7D938.net) (Ping timeout)
[08:04:20] *** Quits: PGGB (PGGB@BD9E64E0.2702580D.85889BB1.IP) (Ping timeout)
[08:04:20] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[08:04:20] *** Quits: secretrobotron (secretrobo@moz-E9501591.members.linode.com) (Ping timeout)
[08:04:20] *** Quits: victorporof (victorporo@C8C495F5.E3195F0D.9B1E38F4.IP) (Ping timeout)
[08:04:20] *** Quits: qmx (qmx@moz-B6DBCD05.qmx.me) (Ping timeout)
[08:04:20] *** Quits: heftig (heftig@moz-F1093399.dip0.t-ipconnect.de) (Ping timeout)
[08:04:22] *** Quits: a__ (a__@moz-56DB9895.nycmny.fios.verizon.net) (Ping timeout)
[08:04:24] *** Quits: km (quassel@moz-777F24DE.kevinmehall.com) (Ping timeout)
[08:04:24] *** Quits: ofeldt (ofeldt@moz-5E9C043C.dip0.t-ipconnect.de) (Ping timeout)
[08:04:25] *** Joins: victorporof (victorporo@C8C495F5.E3195F0D.9B1E38F4.IP)
[08:04:26] <ChrisMorgan> Yay! Netsplit!
[08:04:26] *** Joins: km (quassel@moz-777F24DE.kevinmehall.com)
[08:04:30] *** Quits: yosemite (sam@FFDEC35.A6A64645.7249DD0D.IP) (Ping timeout)
[08:04:30] *** Quits: eco (eco@CE7A7260.A65B73B2.113BD1CE.IP) (Ping timeout)
[08:04:30] *** Quits: stvc (quassel@DDF9BE86.571456BD.9510F13D.IP) (Ping timeout)
[08:04:30] *** Quits: dg (dg@moz-AF6F3E94.com) (Ping timeout)
[08:04:30] *** Quits: nfroidure (nfroidure@moz-318AEEBC.w90-18.abo.wanadoo.fr) (Ping timeout)
[08:04:30] *** Quits: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP) (Ping timeout)
[08:04:30] *** Quits: mythmon (mythmon@moz-AD308AD7.members.linode.com) (Ping timeout)
[08:04:30] *** Quits: q66_ (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[08:04:30] *** Quits: bstrie (ben@moz-D5A1D0F5.members.linode.com) (Ping timeout)
[08:04:30] *** Quits: toddaaro (toddaaro@moz-98F46974.us) (Ping timeout)
[08:04:30] *** Joins: stvc (quassel@DDF9BE86.571456BD.9510F13D.IP)
[08:04:31] *** Joins: dg (dg@moz-AF6F3E94.com)
[08:04:31] *** Joins: mark_edward (mark@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[08:04:32] *** Quits: Cork (Cork@moz-352B7E7B.a370.priv.bahnhof.se) (Ping timeout)
[08:04:32] *** Quits: nonehaxor (nonehaxor@BA9CBAE.4C3B0355.EE6E63A5.IP) (Ping timeout)
[08:04:32] *** Quits: joelteon (bzzt@moz-317E8D0C.io) (Ping timeout)
[08:04:34] *** Quits: japaric (japaric@7C76557C.60901FDF.95AE23EB.IP) (Ping timeout)
[08:04:34] *** Quits: doy (doy@moz-8F23663C.net) (Ping timeout)
[08:04:34] *** Quits: wolfwood (wolfwood@moz-A19F104D.pitbpa.fios.verizon.net) (Ping timeout)
[08:04:34] *** Quits: ekiara (emk@moz-9B1940E9.tech.co.ke) (Ping timeout)
[08:04:35] *** Quits: wilkie (wilkie@moz-A19F104D.pitbpa.fios.verizon.net) (Ping timeout)
[08:04:35] *** Quits: cubic (cubic@moz-80241A3A.mc.videotron.ca) (Ping timeout)
[08:04:36] *** Quits: hoelzro (hoelzro@moz-937642A5.ro) (Ping timeout)
[08:04:36] *** Joins: joelteon (bzzt@moz-317E8D0C.io)
[08:04:37] <eddyb> what kind of netsplit is this?
[08:04:41] <strcat> totally rusti's fault
[08:04:42] <Yurume> is it a real split or just a connection hiccup?
[08:04:44] *** Joins: havarnov (havarnov@7FCD87A9.7B7BA24D.CB207656.IP)
[08:04:44] <eddyb> freenode makes *sense*
[08:04:44] *** Joins: heftig (heftig@moz-F1093399.dip0.t-ipconnect.de)
[08:04:45] *** Quits: mrshankly (mrshankly@3EE34383.CE0EEBAE.806C54C8.IP) (Ping timeout)
[08:04:45] *** Quits: busylizzy (lisa@270089DC.4EF5D73F.4E00FFE9.IP) (Ping timeout)
[08:04:45] *** Quits: Blub\1 (wry@620605B3.71150E1A.237AE2BA.IP) (Ping timeout)
[08:04:45] *** Joins: zz_kimundi (kimundi@moz-B3388EAA.dip0.t-ipconnect.de)
[08:04:46] *** Joins: pepijndevos (pepijndevo@9EACEF43.E50A3180.BCE47D84.IP)
[08:05:05] *** Quits: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP) (Ping timeout)
[08:05:05] *** Joins: ofeldt (ofeldt@moz-5E9C043C.dip0.t-ipconnect.de)
[08:05:10] *** zz_kimundi is now known as kimundi
[08:05:10] *** Quits: ptrr (ptrr@48799E9.1D1EB2D6.85889BB1.IP) (Ping timeout)
[08:05:11] *** Joins: ekiara (emk@moz-9B1940E9.tech.co.ke)
[08:05:14] *** Joins: hoelzro (hoelzro@moz-937642A5.ro)
[08:05:14] *** Joins: Mowah (Mowah@46054FB7.75886E32.8A4F81EE.IP)
[08:05:15] <eddyb> SiegeLord: the bounds on (..T) mean the tuple has to fulfill those bounds
[08:05:20] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Ping timeout)
[08:05:26] *** Quits: gwty (gwtypc@322EAEF3.E0A5EE90.D6324C7.IP) (Ping timeout)
[08:05:30] *** Quits: terje (terje@F5FDF11B.1D1EB2D6.85889BB1.IP) (Ping timeout)
[08:05:32] *** Quits: jpf (jan@moz-A8C26A15.org) (Ping timeout)
[08:05:34] *** Joins: cubic (cubic@moz-80241A3A.mc.videotron.ca)
[08:05:35] <mark_edward> is there a trait for types with which one can use `as` operator?
[08:05:36] *** Quits: katis (katis@40C8AF65.EFDC2270.EE6E63A5.IP) (Ping timeout)
[08:05:37] *** Joins: Cork (Cork@moz-352B7E7B.a370.priv.bahnhof.se)
[08:05:38] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[08:05:42] <eddyb> you can't
[08:05:46] <strcat> mark_edward: no, as is a hack to make const exprs work ;p
[08:05:53] *** Joins: doy (doy@moz-8F23663C.net)
[08:05:54] <strcat> a non-extensible, dirty hack
[08:05:57] *** Joins: nfroidure (nfroidure@moz-318AEEBC.w90-18.abo.wanadoo.fr)
[08:06:02] *** Joins: Caseus (bacon@moz-9F046088.members.linode.com)
[08:06:04] <SiegeLord> eddyb, I'm talking about how will it know that you need to impl Printable for ()
[08:06:05] <mark_edward> so no `as` for generics
[08:06:05] *** Joins: yosemite (sam@moz-8CEAB1B0.dasbistro.com)
[08:06:06] <eddyb> SiegeLord: everything else is checked when you use the trait
[08:06:09] *** Joins: xales (xales@moz-7DEA692E.forevernothing.com)
[08:06:13] *** Joins: japaric (japaric@7C76557C.60901FDF.95AE23EB.IP)
[08:06:14] <mark_edward> this sucks for numeric stuff
[08:06:14] *** Joins: AlexMax (alexmax@moz-3D3F5603.funcrusher.net)
[08:06:16] *** Joins: petantik (oz@moz-20EC2160.net)
[08:06:17] *** Joins: busylizzy (lisa@270089DC.4EF5D73F.4E00FFE9.IP)
[08:06:19] *** Joins: bstrie (ben@moz-D5A1D0F5.members.linode.com)
[08:06:20] *** Joins: mrshankly (mrshankly@3EE34383.CE0EEBAE.806C54C8.IP)
[08:06:30] *** Joins: pcmattman (pcmattman@moz-D9B7D938.net)
[08:06:35] *** Joins: utkarsh (utkarsh@moz-CA9C0A97.members.linode.com)
[08:06:41] <strcat> mark_edward: need sensible numeric cast traits
[08:06:41] *** Joins: Amanieu (amanieu@10FEE2FD.ECEF57A4.2CFD4520.IP)
[08:06:41] *** Joins: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP)
[08:06:41] *** Joins: ptrr (ptrr@48799E9.1D1EB2D6.85889BB1.IP)
[08:06:42] *** Joins: q66_ (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[08:06:47] *** Joins: friggle (friggle@moz-A607EAFA.members.linode.com)
[08:06:49] <strcat> numeric traits are really hard to define sanely
[08:06:51] <strcat> rusti: 2
[08:06:52] -rusti- 2
[08:06:53] *** Joins: Soft (soft@moz-EC8D39F.yok.fi)
[08:06:57] *** Joins: bodie (bodie@moz-9A1A7949.cmdnnj.fios.verizon.net)
[08:06:58] *** Joins: mythmon (mythmon@moz-AD308AD7.members.linode.com)
[08:06:59] *** Joins: a__ (a__@moz-56DB9895.nycmny.fios.verizon.net)
[08:06:59] *** Joins: zheng_li (zheng_li@moz-D6711E9E.xenplanet.org)
[08:07:03] *** Joins: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk)
[08:07:06] <strcat> rusti: version
[08:07:06] -rusti- "rustc 0.9-pre (4db6eba 2013-10-06 09:16:30 -0700)"
[08:07:14] <strcat> that version is so much worse than the git describe one
[08:07:15] *** Quits: victorporof (victorporo@C8C495F5.E3195F0D.9B1E38F4.IP) (Quit: victorporof)
[08:07:19] *** Joins: StarLight (StarLight@E3074617.5F559CE.B04B15DE.IP)
[08:07:23] <strcat> 0.8.293.g4db6eba-1
[08:07:27] <strcat> 293 commits since 0.8
[08:07:33] * strcat likes those a lot better ;p
[08:07:39] <strcat> rusti: version
[08:07:40] -rusti- "rustc 0.9-pre (fabec99 2013-10-15 22:56:36 -0700)"
[08:07:40] *** Joins: gwty (gwtypc@322EAEF3.E0A5EE90.D6324C7.IP)
[08:07:42] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[08:07:46] <strcat> 450
[08:07:47] <eddyb> SiegeLord: if you don't do that, you can't use Printable for (T: Default,) because it requires Head: Default (which you have) and (..Tail): Printable - which you don't have because (..Tail) is () and that doesn't fulfill Printable
[08:07:49] *** Joins: dbussink (dbussink@moz-E0A5568C.bussink.me)
[08:07:56] *** Joins: Edwards (MeltdownMo@moz-B62E1D6B.members.linode.com)
[08:07:57] *** Joins: kemurphy (kemurphy@3863AC20.C4E71399.9510F13D.IP)
[08:07:59] * strcat forget when it broke
[08:08:02] <eddyb> SiegeLord: slash implement. does that make sense?
[08:08:02] *** Joins: rhodesd (none@3646D136.4C5731DA.F395EA5B.IP)
[08:08:02] <strcat> forgets*
[08:08:06] *** Joins: qmx (qmx@moz-B6DBCD05.qmx.me)
[08:08:07] *** Joins: oal (oal@26029749.1D466084.2CFD4520.IP)
[08:08:07] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[08:08:08] *** Joins: SirSkidmore (taylor@moz-F145A866.com)
[08:08:16] *** Joins: agrif (agrif@moz-94847975.net)
[08:08:19] *** Joins: PGGB (PGGB@BD9E64E0.2702580D.85889BB1.IP)
[08:08:20] *** Joins: secretrobotron (secretrobo@moz-E9501591.members.linode.com)
[08:08:21] *** Joins: Ke (jkarlson@moz-785A3407.org.aalto.fi)
[08:08:21] *** Joins: Kxepal (Miranda@moz-EDD846B4.pppoe.mtu-net.ru)
[08:08:22] <eddyb> gaaah I think all these joins and parts are slowing me down
[08:08:25] *** Joins: brianloveswords (brianloves@moz-CB223D1E.members.linode.com)
[08:08:27] <strcat> rusti: version
[08:08:28] -rusti- "rustc 0.9-pre (ae0905a 2013-10-22 11:51:23 -0700)"
[08:08:30] *** Joins: Blub\1 (wry@620605B3.71150E1A.237AE2BA.IP)
[08:08:30] <eddyb> yupp, every single one of them is 1 second of lag
[08:08:30] *** Joins: reyre (reyre@moz-89E9865B.com)
[08:08:35] *** Joins: mmalecki (maciej@DE8E8A22.9EBA3CD1.D6573861.IP)
[08:08:40] *** Joins: nonehaxor (nonehaxor@BA9CBAE.4C3B0355.EE6E63A5.IP)
[08:08:43] <eddyb> I think konversation does something stupid with the nick list
[08:08:53] *** Joins: terje (terje@F5FDF11B.1D1EB2D6.85889BB1.IP)
[08:08:55] *** Joins: jpf (jan@moz-A8C26A15.org)
[08:08:56] <cmr> strcat: bisecting?
[08:08:57] <eddyb> this is very annoying. it's like spell interruption
[08:09:00] <strcat> cmr: barely
[08:09:06] *** Joins: ivan (ivan@moz-531C3EC9.members.linode.com)
[08:09:12] <Jarrett> woo, I built glfw-rs and gl-rs... now to figure out how to actually install them :v
[08:09:14] <strcat> more like an inverted gallop search
[08:09:16] <strcat> rusti: version
[08:09:18] <cmr> lol
[08:09:21] -rusti- timeout triggered!
[08:09:24] <SiegeLord> eddyb, Does that mean for every impl<..T> A for T, it'll require you to also write impl A for () ?
[08:09:37] *** Joins: jxs (joaoxsouls@1FF12F4F.CDF09DE2.D6573861.IP)
[08:09:41] <eddyb> SiegeLord: the former includes the latter
[08:09:45] <Jarrett> also bjz, in cgmath-rs, I'm getting an error in ptr.rs:36 complaining about 'self no longer being a special lifetime
[08:09:49] <strcat> 626 commits since 0.8 works, 840 commits doesn't ;p
[08:10:07] *** Quits: gwty (gwtypc@322EAEF3.E0A5EE90.D6324C7.IP) (Ping timeout)
[08:10:09] <strcat> and current is 1696 (the latest nightly pkg at least)
[08:10:14] <strcat> rusti: version
[08:10:15] -rusti- "rustc 0.9-pre (61f8c05 2013-10-24 13:01:18 -0700)"
[08:10:24] <eddyb> SiegeLord: impl<Head, ..Tail> A for (Head, ..Tail) won't require you to have a () impl, but it won't work without it
[08:10:43] <eddyb> SiegeLord: since it will attempt to match the generic impl and it won't find an impl for ()
[08:10:49] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Quit: Leaving...)
[08:10:56] <eddyb> (I guess that would be the error)
[08:11:09] *** Joins: jason_ (jason@moz-EC85D533.members.linode.com)
[08:11:28] *** Joins: snerd (motk@moz-D21A06DF.members.linode.com)
[08:11:43] *** Joins: wolfwood (wolfwood@moz-A19F104D.pitbpa.fios.verizon.net)
[08:11:44] *** Joins: wilkie (wilkie@moz-A19F104D.pitbpa.fios.verizon.net)
[08:11:47] *** Joins: toddaaro (toddaaro@moz-98F46974.us)
[08:11:50] *** Joins: eco (eco@moz-87840B9D.net)
[08:11:55] <eddyb> STAPH
[08:12:05] <eddyb> my IRC client is unusable when you do that. pls. fix it
[08:12:14] <cmr> what
[08:12:20] <eddyb> cmr: all the joins and parts
[08:12:29] <eddyb> I should fix it but I have no clue where to start looking
[08:12:31] <cmr> turn them off?
[08:12:36] *** Joins: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr)
[08:12:41] <cmr> you can't really tell people to stop joining the chnnael :)
[08:12:43] <mark_edward> is there any way to get a static map in rust?
[08:12:48] <strcat> rusti: version
[08:12:53] -rusti- timeout triggered!
[08:13:07] <eddyb> cmr: not their logging is the problem, but something my client does when that happens. and I meant the network issues that causes people to flood out/in
[08:13:08] <cmr> mark_edward: same answer as the last time you asked: no.
[08:13:13] <strcat> in between 676 and 752
[08:13:15] <strcat> er
[08:13:17] <strcat> 725*
[08:13:21] <mark_edward> constexpr would be sick
[08:13:27] <strcat> there, a slightly less obsolete rusti.
[08:13:37] <strcat> rusti: 2
[08:13:37] -rusti- 2
[08:13:38] <eddyb> CTFE. catehfee
[08:13:45] <strcat> rusti: std::rc::Rc::new(5)
[08:13:46] -rusti- std::rc::Rc<int>{ptr: (0x7f9d90000f50 as *mut ())}
[08:13:47] <eddyb> is there any good way to pronounce that acronym?
[08:13:52] <eddyb> strcat: <3
[08:14:01] <SiegeLord> eddyb, What if you wrote impl<..T> Printable for T {} would that typecheck?
[08:14:03] <o11c> the -> #rust thing is annoying
[08:14:05] <eddyb> rusti: std::rc::Rc::new(@0u)
[08:14:06] -rusti- std::rc::Rc<@uint>{ptr: (0x7f17d4000f80 as *mut ())}
[08:14:06] -rusti- leaked memory in rust main loop (1 objects)
[08:14:06] -rusti- out: /build/rust-git/src/rust/src/rt/memory_region.cpp:184: memory_region::~memory_region(): Assertion `false' failed.
[08:14:06] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[08:14:31] <eddyb> SiegeLord: yes, but you couldn't do much with it, unless you had type matching
[08:14:31] <strcat> eddyb: soon to be fixed... by adding NonManaged as a bound
[08:14:47] <eddyb> SiegeLord: like, you can't extract the first field of T because you can't know T has more than one field
[08:15:25] <SiegeLord> eddyb, I mean instead of impl Printable for ()
[08:15:39] <eddyb> SiegeLord: you can't use head/tail with just ..T
[08:16:07] <SiegeLord> The head/tail will still be there
[08:16:20] <eddyb> can't do that
[08:16:21] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[08:16:35] <eddyb> you can't split T into Head/..Tail because you can't know it has a head
[08:17:40] <SiegeLord> fn print<(..Args): Printable>(..args: Args) {args.print();} trait Printable {fn print(&self);} impl<Head: fmt::Default, (..Tail): Printable> Printable for (Head, ..Tail) {fn print(&self) {let (head, ..tail) = self; println!("{}", head); tail.print();}} impl<..T> Printable for (..T) {fn print(&self) {}}
[08:17:44] <SiegeLord> I mean that
[08:17:50] <SiegeLord> Will that typecheck?
[08:17:55] <bjz> Jarrett: ahh, that was a change from yesterday's rust
[08:18:12] <Jarrett> bjz: ah cool
[08:18:14] <eddyb> SiegeLord: no, because it overlaps with the previous definition
[08:18:18] <Jarrett> so when I do 'rustpkg install' in a src/whatever directory, it installs it to.... src/whatever/.rust? why?
[08:18:18] <bjz> Jarrett: could you change the usages of 'self to 'a?
[08:18:35] <Jarrett> lemme try
[08:18:35] <eddyb> SiegeLord: that doesn't typecheck today, with two impls, <T: Foo> and <T>
[08:18:47] <bjz> Jarrett: and send a PR?
[08:19:05] <bjz> I have to attend to a dinner party in a bit, sorry!
[08:19:09] <SiegeLord> Hmm... ok. Seems very esoteric
[08:20:15] *** Joins: miloshadzic (miloshadzi@7C200F09.4F774094.C57B8094.IP)
[08:20:51] *** Quits: miloshadzic (miloshadzi@7C200F09.4F774094.C57B8094.IP) (Quit: Textual IRC Client: www.textualapp.com)
[08:21:52] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[08:21:55] <eddyb> rusti: trait Foo<T> {fn bar(&self, _: T);} impl<T: std::fmt::Default, U: std::fmt::Default> Foo<U> for T {fn bar(&self, _: U) {}} 0.bar(1);
[08:21:56] -rusti- ()
[08:22:15] *** Quits: jstevans (Instantbir@moz-4901188E.bootp.virginia.edu) (Connection reset by peer)
[08:22:29] <eddyb> rusti: trait Foo<T> {fn bar(&self, _: T);} impl<T: std::fmt::Default, U: std::fmt::Default> Foo<U> for T {fn bar(&self, _: U) {}} 0.bar(Some(1));
[08:22:31] -rusti- pastebinned 6 lines of output: http://sprunge.us/HMEV
[08:22:47] <eddyb> SiegeLord: see that error? ^
[08:23:01] *** Joins: jbh89seut (esucg0aq47@86128AF4.7D0B006A.DB9D6342.IP)
[08:23:05] <eddyb> if you forget to write the impl for (), it will tell you "failed to find an implementation fo trait Printable for ()"
[08:23:06] <jbh89seut> WARNING       WARNING      WARNING,                       WARNING
[08:23:06] <jbh89seut> WARNING             WARNING              WARNING,     WARNING         WARNING
[08:23:06] <jbh89seut>  YOU MAY BE WATCHED    
[08:23:06] <jbh89seut> YOU MAY BE WATCHED
[08:23:06] <jbh89seut>                 YOU MAY BE WATCHED
[08:23:06] *** Quits: jbh89seut (esucg0aq47@86128AF4.7D0B006A.DB9D6342.IP) (User has been banned from Mozilla (no spamming here))
[08:23:24] <Yurume> YOU MAY BE WATCHED (by botbot.me)
[08:24:00] <Jarrett> :v
[08:24:09] *** Quits: ktt3ja (ktt3ja@moz-D69B60E4.hsd1.va.comcast.net) (Quit: Leaving)
[08:24:12] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[08:24:22] <SiegeLord> eddyb, That's not quite the same
[08:24:31] <eddyb> SiegeLord: it would be, though
[08:24:34] *** Quits: lpy (lpy@6A741DB7.F09091A8.1348A864.IP) (Client exited)
[08:24:36] <myname> it's a bit like a crappy doge
[08:24:50] <eddyb> SiegeLord: replace U with (..U): Printable, it's the same kind of bound
[08:24:54] <SiegeLord> In this tuple case, you have to check two things... (..T) and () whenever you expand a tuple
[08:24:56] <myname> "very warning, much watched, so capslock"
[08:25:08] <SiegeLord> While in this case, you only check one thing
[08:25:11] <cmr> *wow*
[08:25:12] <eddyb> SiegeLord: you check *after* you expand
[08:25:17] <myname> cmr: :D
[08:25:52] <SiegeLord> eddyb, You can't expand inside a function body?
[08:25:59] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[08:26:01] <SiegeLord> All you have is (..T):Printable
[08:26:19] <eddyb> SiegeLord: ooooh
[08:26:27] <eddyb> SiegeLord: you mean indirection? let me check
[08:27:20] <SiegeLord> I just mean this: impl<Head: fmt::Default, (..Tail): Printable> Printable for (Head, ..Tail) {fn print(&self) {let (head, ..tail) = self; println!("{}", head); tail.print();}}
[08:27:25] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:27:27] *** Joins: Jarrett1 (me@moz-8211AC00.dhcp.nrwl.ca.charter.com)
[08:27:32] <SiegeLord> Why does that not typecheck?
[08:27:41] <SiegeLord> Surely tail fits into head, tail, no?
[08:27:42] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[08:27:45] <Jarrett1> bjz: PR sent
[08:27:49] <SiegeLord> Am I confused here?
[08:28:00] <eddyb> SiegeLord: is that a direct copy?
[08:28:08] <SiegeLord> Yes
[08:28:09] <eddyb> SiegeLord: because that type-checks, by itself
[08:28:17] *** Quits: Jarrett (me@moz-8211AC00.dhcp.nrwl.ca.charter.com) (Ping timeout)
[08:28:33] <eddyb> rusti: trait Foo<T> {fn bar(&self, _: T);} impl<T: std::fmt::Default, U: std::fmt::Default> Foo<U> for T {fn bar(&self, _: U) {}} fn foo<T, U: Trait<T>>(a: &U, b: T) {a.bar(b);} foo(&0, Some(1));
[08:28:38] *** Jarrett1 is now known as Jarrett
[08:28:41] <eddyb> ehh
[08:29:06] <eddyb> SiegeLord: it's just that (..Tail): Printable can't be satisfied by ()
[08:29:19] <eddyb> SiegeLord: you need a sepparate impl for ()
[08:29:26] <SiegeLord> Where does () come from?
[08:29:47] <eddyb> when you split (T,) into Head an ..Tail, Head is T and Tail is ()
[08:29:57] <eddyb> since (T, ..()) is (T,)
[08:29:57] <SiegeLord> Where does (T,) come from?
[08:30:13] <eddyb> from (x,).print()
[08:30:25] <SiegeLord> Where does that come from?
[08:30:37] <SiegeLord> Are you really suggesting recursive expansion here?
[08:30:50] <eddyb> we already have it, just not controllable
[08:31:28] <eddyb> SiegeLord: print(x); calls (x,).print() which prints x and calls ().print()
[08:31:50] <eddyb> SiegeLord: it's not recursive when inlined, which is the only thing you can do, since it's a generic
[08:32:14] <SiegeLord> I'm not talking about the actual execution, I'm talking about the typechecking
[08:32:17] <eddyb> (well, I mean, LLVM will surely inline it. maybe not at -O 0)
[08:32:22] *** Joins: engla (engla@moz-F64E1B0F.cust.bredbandsbolaget.se)
[08:32:24] <eddyb> SiegeLord: type checking is recursive, yes
[08:32:53] <eddyb> SiegeLord: but it's not costlier than checking that every element of (a, b, c, d, f) has Clone when applying .clone()
[08:33:00] <eddyb> it's a tail recursion
[08:33:25] <SiegeLord> What if you never call print, will the program compile?
[08:33:32] <eddyb> uhm, yes
[08:33:36] <SiegeLord> (and you omit impl Printable for ())
[08:33:39] <eddyb> yes
[08:33:56] <eddyb> since it's valid, according to current rules
[08:34:02] <SiegeLord> But it'll fail if you actually call print?
[08:34:08] <eddyb> yes
[08:34:16] <SiegeLord> This'll never get into Rust :P
[08:34:32] <eddyb> you can have this problem today
[08:34:46] *** Joins: samnardoni (samnardoni@F889EF52.38924046.A86B7D63.IP)
[08:35:27] <eddyb> it's just slightly less obvious when you write a recursive variadic generic impl for a trait without using it, which is... how are you even going to do that?
[08:35:34] *** Joins: victorporof (victorporo@C8C495F5.E3195F0D.9B1E38F4.IP)
[08:35:45] <eddyb> SiegeLord: it's as bad as forgetting to mark a function as public
[08:35:56] <SiegeLord> No, here's turning it around
[08:36:02] <SiegeLord> What if you didn't call tail.print()
[08:36:08] <SiegeLord> Then it'd compile
[08:36:21] *** Joins: z0w0 (zack@3DBF69E1.E4B1DB2C.2CE63F58.IP)
[08:36:23] <eddyb> and print only the head
[08:36:36] <eddyb> SiegeLord: but you'd get a warning about an unused local
[08:36:37] <SiegeLord> There is an implicit type bound that is inside the body of the function
[08:36:52] <eddyb> well, wait
[08:36:59] <eddyb> if you keep the generic type bound, it won't compile
[08:37:30] *** Quits: Soft (soft@moz-EC8D39F.yok.fi) (Ping timeout)
[08:37:42] *** Joins: Soft (soft@moz-EC8D39F.yok.fi)
[08:38:07] <SiegeLord> fn print<(..Args): Printable>(..args: Args) {args.print();} trait Printable {fn print(&self);} impl<Head: fmt::Default, (..Tail): Printable> Printable for (Head, ..Tail) {fn print(&self) {}} print(1);
[08:38:13] <SiegeLord> Would that not compile?
[08:38:56] <eddyb> impl<Head, ..Tail> GetHead<Head> for (Head, ..Tail) {fn head<'a>(&'a self) -> &'a Head {let (ref head, ..) = self; head}}
[08:39:10] <eddyb> SiegeLord: nope
[08:39:45] *** Quits: cubic (cubic@moz-80241A3A.mc.videotron.ca) (Quit: Leaving)
[08:40:05] <eddyb> SiegeLord: but it could warn about unused generic type bounds
[08:40:35] <eddyb> I don't know of a way to write something that causes divergent recursion with a stop condition
[08:40:52] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Ping timeout)
[08:40:52] <eddyb> as I say that, I remember fibonacci
[08:41:14] *** Quits: derek_c (derek@moz-A43430DA.cit.cornell.edu) (Ping timeout)
[08:41:31] <SiegeLord> Ok, well at least that won't compile...
[08:41:43] <SiegeLord> It's still quite different than how it works today
[08:41:57] <eddyb> no, it isn't...
[08:42:10] <SiegeLord> Well, ok, what's the error look like for that?
[08:42:24] *** Quits: TobiasFar (tm@moz-A929D162.flosoft-servers.net) (Quit: ZNC - http://znc.in)
[08:42:55] *** Joins: TobiasFar (tm@moz-A929D162.flosoft-servers.net)
[08:42:57] <eddyb> I need rusti to come back to tell you for sure. I hope it's the "could not find impl of trait Printable for ()" that would be for a direct use of Printable
[08:43:23] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:43:30] <SiegeLord> In exactly that code right there though
[08:44:19] <SiegeLord> It seems it'd be "No implementation of Printable for (..Tail)"
[08:44:35] <eddyb> rusti: trait Foo<T> {fn bar(&self, _: T);} impl<T: std::fmt::Default, U: std::fmt::Default> Foo<U> for T {fn bar(&self, _: U) {}} fn foo<T, U: Trait<T>>(a: &U, b: T) {a.bar(b);} foo(&0, Some(1));
[08:44:37] -rusti- pastebinned 7 lines of output: http://sprunge.us/hCLg
[08:44:53] <eddyb> rusti: trait Foo<T> {fn bar(&self, _: T);} impl<T: std::fmt::Default, U: std::fmt::Default> Foo<U> for T {fn bar(&self, _: U) {}} fn foo<T, U: Foo<T>>(a: &U, b: T) {a.bar(b);} foo(&0, Some(1));
[08:44:54] -rusti- pastebinned 6 lines of output: http://sprunge.us/QiOK
[08:45:35] <eddyb> SiegeLord: it goes through print, resulting in "error: failed to find an implementation of trait Printable for ()"
[08:45:42] <SiegeLord> Why () though
[08:45:53] <eddyb> because it recurses and only fails at the end
[08:46:08] <eddyb> that's what trait+generic matching today does
[08:46:21] <eddyb> but you can't recurse without writing N traits
[08:47:23] <eddyb> if I were to write an impl of Default for Option<T: FooBar> and pass Some(a_value_without_that_FooBar_type), it would complain about T and FooBar, not Option and Default
[08:48:25] <eddyb> SiegeLord: since you can't write overlapping generic implementations of a trait, there's no multiple choices
[08:48:40] <eddyb> it's a simple tail recursion
[08:49:07] <eddyb> so the error message is about the deepest bounds match failure
[08:49:20] <SiegeLord> And it does this recursion today?
[08:49:24] <eddyb> yes
[08:49:41] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[08:49:50] <eddyb> define N chained trait impls, it will go through N tail recursive steps
[08:49:54] <SiegeLord> I dunno, it seems different
[08:49:59] <eddyb> it just *seems*
[08:50:04] <SiegeLord> What if Trait is in a different crate
[08:50:11] <SiegeLord> That crate forgot to impl Trait for ()
[08:50:15] <SiegeLord> And you call print(1)
[08:50:17] <eddyb> it's a bug
[08:50:25] <SiegeLord> That's not a bug you can have today
[08:50:35] <eddyb> you can do that today with a missing #[deriving(Clone)] for example
[08:50:49] <SiegeLord> The code in that crate won't type check
[08:50:56] <eddyb> yes it will
[08:51:32] <eddyb> as long as it's generic and the specific use-case doesn't show up (in other places in the crate or in tests)
[08:51:37] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[08:52:04] <SiegeLord> Ok, but you could use it outside that crate
[08:52:17] <SiegeLord> If you forget to impl Printable for () you can't use it anywhere
[08:52:18] <SiegeLord> Ever
[08:52:24] <eddyb> SiegeLord: no you couldn't
[08:52:31] <eddyb> you can't impl Clone for a type in another crate
[08:52:35] *** Quits: andreypopp (andreypopp@moz-7261DC60.net) (Quit: andreypopp)
[08:53:00] <SiegeLord> The type is in a 3rd party crate
[08:53:06] <SiegeLord> 3rd crate, rather
[08:53:14] <SiegeLord> Since () is not part of any crate
[08:53:34] <eddyb> Printable and the type without Clone are the equivalents in my comparison
[08:53:53] <eddyb> remove all uses of format! {} with u16 from std (and tests) and you can remove fmt::Default for u16 from libstd and you won't be able to build librustc, for example
[08:54:10] <eddyb> (if it uses u16. no idea if it does)
[08:54:14] <SiegeLord> Forget Clone, and just do Printable
[08:54:38] <SiegeLord> Right now if you write fn foo<T: Printable)() in a crate, it'll type check
[08:54:54] <eddyb> yes
[08:54:58] <SiegeLord> If you use it outside the crate, you can impl Printable for your own type, and you can call foo
[08:55:06] <eddyb> because a non-tuple type can implement Printable
[08:55:21] <eddyb> and then it works, without the need for ()
[08:55:57] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[08:56:07] <eddyb> if you use a crate which defines a type but doesn't impl Clone for that type, you're screwed
[08:56:09] <eddyb> same thing here
[08:56:21] <eddyb> again, it's just less obvious. there's no magic going on
[08:56:37] <eddyb> most of my PR was updating code because I added a field somewhere
[08:56:48] <eddyb> parts of variadic generics are *trivial*
[08:57:40] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[08:57:55] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:58:19] <SiegeLord> Now if you do fn foo<..T: Printable> () and impl<Head, ..Tail: Printable> Printable for (Head, ..Tail); .. in a crate, then you can't use it from a different crate
[08:58:37] <SiegeLord> I don't see a new type defined there
[08:58:50] <eddyb> no, it's just a similar thing
[08:58:58] <eddyb> I guess I should use a trait to exemplify
[08:59:08] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:59:14] *** Quits: Kxepal (Miranda@moz-EDD846B4.pppoe.mtu-net.ru) (Quit: Kxepal)
[08:59:45] *** Joins: Kxepal (Miranda@moz-EDD846B4.pppoe.mtu-net.ru)
[08:59:53] <eddyb> SiegeLord: you can create an unusable function today
[09:00:25] <SiegeLord> Can you give me a quick example?
[09:00:32] <eddyb> just make a new trait and forget to implement it for a built-in type
[09:00:57] <SiegeLord> I can implement it for my own type?
[09:00:59] <eddyb> and have a function with two trait bounds
[09:01:18] <eddyb> wait, it's more contrieved than that
[09:01:28] <Jarrett> how do I get rustpkg install to actually install things somewhere where they'll be accessible from other things?
[09:01:29] *** Joins: Ferreus (ferreus@moz-1E02279B.dip0.t-ipconnect.de)
[09:01:56] <eddyb> SiegeLord: well, you can have a private trait
[09:02:11] <eddyb> SiegeLord: like, you forgot to add pub. that will compile and you can't impl the trait anywhere else
[09:04:13] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[09:04:45] <eddyb> SiegeLord: that is way more likely than forgetting to finish a recursion
[09:05:37] <SiegeLord> This, of all things, you can actually detect
[09:06:23] <eddyb> SiegeLord: yes, but it's a lint more than anything
[09:06:47] <eddyb> SiegeLord: with variadic tuple pattern matching, you can actually enforce it
[09:07:10] <SiegeLord> How?
[09:07:22] <eddyb> match self {(head, ..tail) => { println!("{}", head); tail.print();}, () => {}}
[09:07:33] <SiegeLord> Oh, the alternative
[09:07:35] <eddyb> but that's trickier to implement
[09:08:00] <eddyb> though you can have overlapping cases and guards
[09:08:21] <eddyb> like an if tail.len() to add a separator
[09:08:24] *** Joins: peterdn (chatzilla@moz-3DA3F15F.as13285.net)
[09:08:32] *** Joins: lenstr (lenstr@39B5AC2A.9636F313.7A27613B.IP)
[09:08:47] <eddyb> it's not that hard when the type is the same
[09:09:16] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[09:09:21] *** Joins: smodo (tadnr@moz-6398EFDF.dclient.hispeed.ch)
[09:09:25] <eddyb> it's worse for Clone, where the resulting type is a function (!!! HKT is nothing compared to the generic case for this) of the type you're matching against
[09:10:00] <eddyb> and supporting special cases where it's the same type... kinda meh
[09:10:13] <SiegeLord> I still think the private trait is fundamentally different... as you say it's just a lint... while forgetting to implement Printable for () is definitely wrong.
[09:11:22] <eddyb> SiegeLord: it isn't because you have the trait bound on a tuple
[09:12:16] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[09:13:21] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[09:13:45] <eddyb> SiegeLord: if you were to have ..Tail: std::fmt::Default then the compiler would have to merge the Head/..Tail impl and the () one, and not having the () one would be a mistake
[09:13:56] <vky> Jarrett: Have you taken a look at the rustpkg tutorial (http://static.rust-lang.org/doc/master/tutorial-rustpkg.html)?
[09:14:03] <eddyb> SiegeLord: but that's almost like type pattern matching
[09:14:06] <eddyb> I don't know. choices
[09:14:45] *** Joins: derek_c (derek@moz-A43430DA.cit.cornell.edu)
[09:15:15] <SiegeLord> I don't really see how forgetting to implement Printable for () is not wrong... it's as if you made a non-exhaustive match
[09:15:22] <SiegeLord> It just so happens that the compiler can't catch it
[09:15:28] <SiegeLord> Until you try using it
[09:15:52] <eddyb> SiegeLord: I told you, because it's on the tuple (..Tail)
[09:15:54] <eddyb> HAH
[09:16:09] <eddyb> SiegeLord: I know how you can use print without implementing () in the same crate
[09:16:30] <eddyb> print(a, b) where b is of type Foo with impl Printable for (Foo,)
[09:16:57] <eddyb> though I'm not sure if that would conflict with the generic impl. well, if there's no () impl, prolly wouldn't
[09:17:28] <SiegeLord> Well, you still had to add another impl
[09:17:29] <eddyb> SiegeLord: i.e. you can end the recursion earlier, so it's not obvious whether implementing () is required
[09:17:43] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Client exited)
[09:17:45] <eddyb> SiegeLord: yes, but that impl can be in a different crate
[09:17:46] *** Quits: amro (quassel@F1E3FD84.8AAAF769.FAAB0799.IP) (Connection reset by peer)
[09:17:46] <SiegeLord> You still have to stop the recursion
[09:17:56] <SiegeLord> Oh, interesting
[09:18:27] <eddyb> I haven't thought of this contraption until now
[09:19:56] <Jarrett> hey, sorry if no one knows anything about rustpkg but... is it seriously incapable of installing packages from local directories? the docs only mention it installing things from github
[09:20:19] <cmr> Jarrett: of course it can
[09:20:22] <SiegeLord> I think I got it to install once
[09:20:22] <Jarrett> how?
[09:20:25] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[09:20:26] <cmr> don't know.
[09:20:29] <Jarrett> lol
[09:20:35] <cmr> rustpkg is in a perpetual state of not-really-working.
[09:20:40] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[09:20:43] <cmr> is your RUST_PATH set?
[09:20:45] <SiegeLord> rustpkg install sticks the binary into bin
[09:20:50] <SiegeLord> *binaries
[09:20:51] <cmr> `rustpkg install` will install into .rust if it isn't.
[09:20:52] <SiegeLord> And lib
[09:20:56] <Jarrett> ahaaaaaaa
[09:21:00] <Jarrett> no it is not set
[09:21:04] <Jarrett> and I was wondering why the heck it did that
[09:21:43] <Jarrett> is there a "proper" location for RUST_PATH to point to
[09:21:49] <cmr> anywhere you want.
[09:21:52] <Jarrett> okay
[09:22:22] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[09:24:38] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: Leaving)
[09:24:59] <o11c> that really needs to change
[09:25:03] <cmr> what does?
[09:25:13] <o11c> there should be exactly 3 entries in RUST_PATH, hard-coded
[09:25:20] <eddyb> (by default)
[09:25:36] <o11c> something in /usr, something in /usr/local,, and something in ~/
[09:25:39] <cmr> no, that's an explicit non-goal.
[09:25:49] <eddyb> o11c: look at npm for decent prior work
[09:25:49] <cmr> rustpkg dirs are per-project.
[09:25:50] <Jarrett> I set RUST_PATH to something, and rustpkg install still installs to the local directory :V
[09:25:50] <o11c> eddyb: no, I mean it should not be cusotmizable
[09:25:55] <eddyb> o11c: eeeeh
[09:25:59] <eddyb> no, that's silly
[09:26:05] <eddyb> it should have sane defaults
[09:26:12] <cmr> the defaults _are_ sane.
[09:26:15] <o11c> I absolutel *hate* trying to make java work
[09:26:25] <o11c> python, on the other hand, did this well
[09:26:33] <cmr> it's what npm does, it's what gopkg does.
[09:26:46] <cmr> it's needed for sane development, esp for servo.
[09:26:52] <eddyb> changing RUST_PATH should be like changing PATH - never need to change it unless you are fooling around with test configs and whatnot
[09:27:04] <eddyb> or yeah, the crazy submodules in servo
[09:27:16] <cmr> it has nothing to do with the submodules really.
[09:27:19] <o11c> why can't you just stick all the deps in a user-global place?
[09:27:21] <eddyb> I'd rather fix the general unusability of rustpkg
[09:27:24] <o11c> they have version numbers!
[09:27:35] <cmr> you don't want installing a different version of a package, or a development version somewhere while you're working on it, to conflict with the other things you're working on.
[09:27:37] <eddyb> o11c: because you can change the code
[09:27:57] <eddyb> I have a git clone in some of my node_modules
[09:28:04] <cmr> rustpkg has legitimate problems but this is not one of them
[09:28:07] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[09:28:31] <o11c> well, I'm not sure how you can solve rustpkg's problems *without* going to a user global packate directory
[09:28:31] <Jarrett> uh guys, it's not actually working :P
[09:28:50] <Jarrett> is it particularly picky about the value of RUST_PATH or anything?
[09:28:52] <cmr> Jarrett: I suggest not using rustpkg.
[09:28:59] <eddyb> o11c: have you used npm :P? because it works and doesn't need user-global stuff
[09:29:05] <Jarrett> sigh
[09:29:47] <Jarrett> I really would rather not have to set up a heap of goddamn makefiles to make a little toy program
[09:29:59] <cmr> you don't need makefiles.
[09:30:05] <cmr> just use rustc?
[09:30:05] <Jarrett> then what do I use
[09:30:10] <Jarrett> it's smart enough?
[09:30:18] <eddyb> you can't do per-file compilation
[09:30:22] <eddyb> so it's dumb enough :P
[09:30:25] <Jarrett> hah
[09:30:26] <cmr> smart enough for what?
[09:30:36] <Jarrett> I don't actually know what rustc is and isn't capable of
[09:30:40] <eddyb> Jarrett: dependency tracking is the biggest problem
[09:30:50] <cmr> it compiles crates.
[09:31:02] <eddyb> has anyone added an -MD (or whatever that flag was) equivalent yet?
[09:31:06] <cmr> open PR
[09:31:22] *** Quits: lenstr (lenstr@39B5AC2A.9636F313.7A27613B.IP) (Client exited)
[09:31:41] <eddyb> woo, I'm only 3.5 PRs behind on the bors queue :D
[09:31:53] <eddyb> someone better not make conflicting changes
[09:32:17] <o11c> eddyb: no, JS is not one of my langauges.
[09:32:37] <o11c> In any case, I know it's *possible* for everybody to bundle their own dependencies, but
[09:32:49] <o11c> PLEASE stop trying to fight the distro
[09:33:11] <cmr> o11c: it's "fighting the distro" to install things into directories the system package manager manages.
[09:33:27] <eddyb> I actually hate the node-* packages, they're *useless*
[09:33:30] <cmr> and the only thing you need to do to change it is set an env var.
[09:33:31] <o11c> thus why I said /usr, /usr/local, and ~/
[09:33:45] <eddyb> since npm does the same thing, and better
[09:33:54] <cmr> nobody minds gopkg or npm, and it's what is needed for larger projects. I think it's a non-issue.
[09:35:05] <o11c> I fail to see how installing the same dependency in multiple places is needed when there is no way for it to collide ...
[09:35:37] <eddyb> o11c: try working on two packages, one of which depends on the other
[09:35:41] *** Joins: banananana (ba@E7E2A35D.6F99A8B0.2AADDDA7.IP)
[09:35:57] <eddyb> both of those have to be local
[09:36:07] <o11c> of course
[09:36:29] <o11c> python has ./setup.py install --develop 
[09:36:31] *** Quits: Kxepal (Miranda@moz-EDD846B4.pppoe.mtu-net.ru) (Ping timeout)
[09:36:45] <o11c> where it installs a symlink to the tree instead of copying
[09:36:55] <eddyb> >_>
[09:36:56] *** Joins: skade (skade@30BBD5E6.505237C9.CAE22B62.IP)
[09:36:58] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[09:37:03] <eddyb> radare2 calls that symstall
[09:37:14] <eddyb> it's not really a solution
[09:37:17] <o11c> eddyb: try working on *three* packages, two of which depend on the other one
[09:37:39] <eddyb> o11c: make them all on the same level
[09:37:41] *** Joins: fabiand (fabiand@moz-6780914F.adsl.alicedsl.de)
[09:38:01] <eddyb> like, npm hoists out common (and compatible) dependencies
[09:38:31] <eddyb> it's actually required for interoperability because of monkey-patching and everything that has to deal with identity
[09:38:32] <o11c> in other words ... exactly what I'm suggesting
[09:38:41] <eddyb> it's still local
[09:38:54] <eddyb> but it prefers nested to linear
[09:39:57] <o11c> well, I guess if you *really* need to you could put . on the path, but that should be hidden behind some barrier so it can't be used in production
[09:40:06] *** flaper87|afk is now known as flaper87
[09:41:12] <eddyb> o11c: and make development, which would be the main use of rustpkg, painful?
[09:41:35] <eddyb> npm has a -g to install in /usr/lib
[09:41:40] <eddyb> * a -g flag
[09:41:50] <eddyb> or remove/update/etc
[09:41:55] *** Quits: g3xzh (g3xzh@moz-F05C9A20.red.bezeqint.net) (Ping timeout)
[09:43:15] <eddyb> cmr: what happened here? http://huonw.github.io/isrustfastyet/mem/#5466462,aa4455e
[09:43:22] <o11c> eddyb: the number of cases where you begin to work on multiple intertwined projects and aren't willing to run 'make install'
[09:43:30] <o11c> is going to be relatively rare
[09:43:31] <cmr> eddyb: static linking.
[09:43:52] <cmr> o11c: so set RUST_PATH in your shell config and be done with it
[09:44:10] <o11c> personally, I'd be willing to run 'make install' *every* time a change a submodule
[09:44:22] <eddyb> cmr: and this is removing dead code? http://huonw.github.io/isrustfastyet/mem/#5466462,a6310f6
[09:44:27] <Jarrett> well using rustc was way easier than expected :v three crates built and linked against
[09:44:59] <o11c> cmr: it's the responsibility of the tool to have a sane default, and only require settings for *extraordinary* cases.
[09:45:16] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[09:45:48] <eddyb> o11c: production is rare. npm -g is easy to use
[09:46:00] <cmr> o11c: then the default should be requiring a RUST_PATH, like go does.
[09:47:33] <cmr> eddyb: quite odd. my bencher is also busted atm
[09:47:43] <eddyb> cmr: the dead code has a drop
[09:47:55] <eddyb> cmr: but it's temporary. maybe rerun?
[09:48:43] <cmr> eddyb: there are PRs missing in the graph.
[09:48:58] <eddyb> ohh
[09:49:00] <cmr> I think
[09:49:12] <cmr> yeah, there are.
[09:52:27] *** Joins: Earnestly (earnest@88884C6.A3735F9C.39C00A7A.IP)
[09:52:33] *** Joins: samnardo_ (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[09:53:31] <eddyb> http://www.reddit.com/r/rust/comments/1sobfw/loup_vaillant_how_class_based_programming_sucks/cdzwc1w?context=10 can someone confirm I'm correct? my terminology could be wrong
[09:53:33] *** Joins: rca (rcatolino@moz-E0992404.adsl.proxad.net)
[09:54:09] *** Quits: dario (dario@moz-8E3254C2.informatik.uni-erlangen.de) (Ping timeout)
[09:54:10] *** Quits: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP) (Quit: leaving)
[09:54:22] *** Joins: lenstr (lenstr@138F7D4F.9636F313.7A27613B.IP)
[09:54:59] *** Joins: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP)
[09:57:25] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[09:59:09] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[09:59:58] <Jarrett> if I put open braces on their own lines, will rustians (rustites?) crucify me?
[10:00:15] <cmr> Jarrett: no, but when rustfmt is implemented it's going to fix that for you ;)
[10:00:47] <eddyb> it also is confusing with if
[10:00:57] <eddyb> because the only delimiter is the end of the line
[10:01:01] *** Joins: jstevans (Instantbir@BFE4C8C6.362CC69C.B7830B68.IP)
[10:01:11] <eddyb> *it's. but that's a personal preference, I guess
[10:02:21] <Jarrett> hahah
[10:02:35] <o11c> I can' tstand not having braces on their own lines
[10:02:56] <Jarrett> I'm used to putting open braces on their own lines but I can see that being an issue with single-statement blocks.. lots of wasted space
[10:02:57] <o11c> having the opening brace stand alone makes diffs *so* much easier, among other things
[10:03:18] <Jarrett> I can't stand having braces on code lines cause everything gets so smushed together and hard to read :x
[10:03:28] <eddyb> get a wider LCD :P
[10:03:34] *** Quits: vky (chatzilla@moz-4F2E17BF.dsl.dynamic.sonic.net) (Quit: ChatZilla 0.9.90.1 [Firefox 26.0/20131202182626])
[10:03:35] <Jarrett> vertically ;P
[10:03:45] <o11c> screen size matters not
[10:04:03] <eddyb> in my own projects I pass the 100 columns limit more than I'd like to
[10:04:23] <eddyb> but unless there's a way it looks good when split, I will keep it that way
[10:05:44] <eddyb> cmr: oh, this is silly. I have a loop which only ends if data.len() == 0 or i % 4 == 0 (the latter is caused by a break in an if i % 4 == 3) and LLVM isn't smart enough to assume that in further code
[10:05:48] <eddyb> I prolly have to nest it
[10:05:50] *** Joins: katis (katis@40C8AF65.EFDC2270.EE6E63A5.IP)
[10:06:02] <cmr> I don't think llvm does that optimization
[10:06:23] <eddyb> it's constant folding combined with condition assumption
[10:06:52] <Jarrett> oh I'm glad to see #[deriving] made it in
[10:06:54] <eddyb> the latter is a very powerful (though entirely irrelevant in some codebases) specializing optimization
[10:07:10] <eddyb> Jarrett: o_O. are you coming to rust after a break or something?
[10:07:22] <Jarrett> yeah |D
[10:07:29] <Jarrett> last time I checked it out was like... 0.4?
[10:07:48] <eddyb> cmr: haha I think I have a clue why
[10:08:12] *** Quits: lenstr (lenstr@138F7D4F.9636F313.7A27613B.IP) (Client exited)
[10:08:20] <eddyb> cmr: it might do the optimization, but data.len() is a pointer load
[10:08:26] <eddyb> more reasons to switch to strcat's repr
[10:08:38] *** Joins: lenstr (lenstr@138F7D4F.9636F313.7A27613B.IP)
[10:08:41] <eddyb> s/pointer load/load from an opaque pointer/
[10:09:06] <eddyb> I don't have any way to check. maybe with another local
[10:09:20] *** Quits: fmtq (fmt@moz-5769BD38.static.tpgi.com.au) (Ping timeout)
[10:09:36] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[10:10:11] *** Quits: derek_c (derek@moz-A43430DA.cit.cornell.edu) (Ping timeout)
[10:10:22] *** Quits: lenstr (lenstr@138F7D4F.9636F313.7A27613B.IP) (Ping timeout)
[10:10:51] *** Joins: fmtq (fmt@moz-5769BD38.static.tpgi.com.au)
[10:10:55] <eddyb> random thing I love about Rust (compared to C): declaring locals ("variables") is most of the time done with immutable values
[10:11:10] <eddyb> while in C, you have a list of variables at the top of the function
[10:11:48] *** Joins: moostik (Icedove@moz-6D4FE356.w86-212.abo.wanadoo.fr)
[10:11:57] <eddyb> now I'm not sure about it, but once I've claimed that a for(i=0; i<n; i++) loop is harder on the optimizer than for(int i=0; i<n; i++)
[10:12:34] <cmr> Why would it be? it can assume the contents in either way
[10:12:48] <eddyb> because it has to convert the former into the latter (with some dataflow analysis) to do loop-specific optimizations
[10:12:55] <Jarrett> is there some magic incantation I can put in my code to have the compiler link against an external (non-rust) library without having to specify it on the command line
[10:13:09] <eddyb> #[link(name="...")] on an extern block
[10:13:14] <cmr> Jarrett: #[link(name="foo")] extern { }
[10:13:28] *** Quits: moostik (Icedove@moz-6D4FE356.w86-212.abo.wanadoo.fr) (Ping timeout)
[10:13:28] <Jarrett> okay
[10:13:40] <Jarrett> is the name undecorated? like "foo" for libfoo.a
[10:13:40] <eddyb> I'd highly suggest putting it on an extern block which contains all your imports
[10:13:48] <eddyb> yes
[10:13:52] <Jarrett> okay
[10:14:10] <eddyb> (all your imports from that library, ofc)
[10:14:17] *** Joins: Kxepal (Miranda@moz-6A3B3028.pppoe.mtu-net.ru)
[10:14:31] <Jarrett> well that seems to do zilch
[10:14:47] *** Joins: moostik (Icedove@moz-6D4FE356.w86-212.abo.wanadoo.fr)
[10:14:50] <Jarrett> I'm trying to link against opengl32 and gdi32
[10:15:01] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[10:15:12] *** Joins: andreypopp (andreypopp@CF703815.F7F3F489.912D28B2.IP)
[10:15:20] <cmr> if you want static linking you need #[link(name="foo", kind="static")]
[10:15:24] <eddyb> Jarrett: on windows?
[10:15:43] *** Joins: lenstr (lenstr@138F7D4F.9636F313.7A27613B.IP)
[10:15:46] <Jarrett> still no go
[10:15:47] <eddyb> no idea how DLLs work there
[10:15:48] <Jarrett> yeah eddyb
[10:16:02] <eddyb> maybe try without the 32?
[10:16:07] <Jarrett> well passing --link-args "-lopengl32 -lgdi32" on the commandline works fine
[10:16:12] <eddyb> hmm
[10:16:29] <Jarrett> I'm not seeing either of the libs show up in the g++ argument commandline rustc prints
[10:16:34] <eddyb> that link name should be translated into -l flags
[10:16:39] <eddyb> they are on linux
[10:16:43] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[10:16:49] <Jarrett> huh.
[10:16:55] *** Quits: lenstr (lenstr@138F7D4F.9636F313.7A27613B.IP) (Quit: Leaving...)
[10:17:22] <eddyb> cmr: omg LLVM doesn't do assumption
[10:17:36] <cmr> eddyb: it doesn't do range analysis yet either.
[10:17:45] *** Joins: lenstr (lenstr@138F7D4F.9636F313.7A27613B.IP)
[10:18:33] *** Joins: dredozubov (dredozubov@2F14E2C1.F70E5FA9.F63E14E8.IP)
[10:19:05] <eddyb> #[inline(never)] fn foo(i: uint) -> uint {if i % 4 == 0 {i % 4}else{i}} that should be optimized to xor rax, rax; ret
[10:19:19] <eddyb> cmr: this is nasty when working with iterators and whatnot
[10:19:39] <eddyb> since you'd think it's simple enough to do, at least in trivial forms like this
[10:19:57] <Yurume> common subexpression extraction?
[10:21:43] <eddyb> cmovneq %rsi, %rax
[10:22:03] <eddyb> wait, I'm silly
[10:22:13] <eddyb> need a better testcase
[10:22:45] <eddyb> this is optimized: fn foo(i: uint) -> uint {if i % 4 == 0 {i % 4}else{0}}
[10:24:10] <eddyb> this isn't: fn foo(i: uint) -> uint {if i % 5 == 1 && i % 4 == 0 {i % 4}else{0}}
[10:24:22] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[10:24:25] *** Joins: Blei (philipp@moz-B2F9E4BD.cust.bluewin.ch)
[10:24:40] <eddyb> this is: fn foo(i: uint) -> uint {if i % 5 == 1 {if i % 4 == 0 {i % 4}else{0}}else{0}}
[10:24:45] <eddyb> this is ridiculous
[10:25:15] <eddyb> so it works, but only when it's obvious
[10:25:29] <eddyb> maybe rustc produced bogus code for &&
[10:26:00] <Ms2ger> I hope not
[10:26:11] <cmr> eddyb: what does clang do?
[10:26:20] <eddyb> will check in a second
[10:26:44] <eddyb> didn't think I'd be staring at ll just to get decent perf from a PNG decoder
[10:28:27] *** Joins: nkoep (nik@moz-CD47E784.pool.mediaways.net)
[10:30:28] *** Joins: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP)
[10:30:31] <eddyb> clang does the same thing
[10:31:09] *** Quits: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP) (Quit: 전 이만 갑니다.)
[10:31:17] *** Quits: lenstr (lenstr@138F7D4F.9636F313.7A27613B.IP) (Client exited)
[10:31:30] <eddyb> cmr, Ms2ger: https://gist.github.com/eddyb/80e4b9d61056cefe7881
[10:31:41] *** Joins: lenstr (lenstr@138F7D4F.9636F313.7A27613B.IP)
[10:31:57] <andreypopp> does anybody know where I can find docs on external blocks in rust? How I can define structs from a C library I want to use in Rust?
[10:32:32] <cmr> andreypopp: structs are guaranteed to have same layout.
[10:32:41] <cmr> so define the struct normally.
[10:33:16] <andreypopp> cmr: can I define just a symbol? if struct's fields are impl details of a lib?
[10:33:18] <cmr> http://static.rust-lang.org/doc/master/tutorial-ffi.html#interoperability-with-foreign-code
[10:33:30] *** Quits: lenstr (lenstr@138F7D4F.9636F313.7A27613B.IP) (Ping timeout)
[10:33:30] <cmr> andreypopp: no, that's not how structs work in C
[10:33:33] <eddyb> wtf is going on here? %9 = zext i1 %8 to i8
[10:33:44] <cmr> use bindgen if you don't want to write it yourself.
[10:34:12] <cmr> andreypopp: if it's only used as a pointer you can just use struct SomeType; and use *SomeType in the bindings.
[10:34:16] <andreypopp> cmr: understand, compiler should know the size
[10:34:17] <eddyb> oh, that's a bool. the problem is in join
[10:34:40] <andreypopp> cmr: yeah, as a pointer, that's what I've asked
[10:34:43] <andreypopp> cmr: thanks
[10:35:06] *** Joins: lenstr (lenstr@138F7D4F.9636F313.7A27613B.IP)
[10:35:30] <eddyb> empty enum is better, because you can't create a value of it by mistake
[10:35:59] <cmr> eddyb: so what if you create a value?
[10:36:19] <eddyb> rusti: struct Foo; let () = Foo;
[10:36:20] -rusti- pastebinned 7 lines of output: http://sprunge.us/EiDe
[10:36:55] <cmr> sure but why does it matter? you can't use it in the binding anyway.
[10:37:11] <eddyb> cmr: hmm. well, I think it's too easy to do get &'static Foo by mistake
[10:37:27] <eddyb> and it's a void ptr, maybe, I don't know
[10:37:34] <andreypopp> cmr: hm... compiler fails on https://gist.github.com/andreypopp/32d6554b33bc6daf2731
[10:37:40] <eddyb> I remember playing with this a few weeks ago, and you can't assume anything
[10:37:42] <andreypopp> on line 3
[10:38:08] <cmr> andreypopp: don't put it in the `extern` block, extern blocks are only for foreign function declarations.
[10:38:20] <andreypopp> cmr: ok, got it
[10:39:16] <andreypopp> probably tutorial on FFI could be modified to include the example like this
[10:39:42] <eddyb> cmr: haha, clang fails because it does something dumb: https://gist.github.com/eddyb/80e4b9d61056cefe7881#file-clang-ll-L24
[10:40:09] <eddyb> cmr: and that made me realize I forgot -O3:   ret i64 0
[10:40:26] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[10:41:01] <Jarrett> bjz: more fun! the super simple glfw example works fine, but the more complex ones just spit a bunch of "the GLFW library is not initialized" errors to the console... even though the window is created fine and responds to the close event
[10:41:11] <Jarrett> am I missing something?
[10:41:19] <eddyb> cmr: I know the cause, too :P. bools are bytes. I wonder how many optimizations fail or are harder to do because of that https://gist.github.com/eddyb/80e4b9d61056cefe7881#file-rustc-ll-L36
[10:41:35] <cmr> eddyb: bools aren't bytes?
[10:42:05] <eddyb> here's the first cast to byte: https://gist.github.com/eddyb/80e4b9d61056cefe7881#file-rustc-ll-L22
[10:42:14] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[10:42:16] *** Quits: smodo (tadnr@moz-6398EFDF.dclient.hispeed.ch) (Input/output error)
[10:42:38] <eddyb> LLVM isn't smart enough to merge a phi of two identical zext casts into a cast of a phi
[10:42:42] *** Quits: andreypopp (andreypopp@CF703815.F7F3F489.912D28B2.IP) (Ping timeout)
[10:43:04] <eddyb> but that doesn't mean rustc codegen is ideal
[10:44:22] <eddyb> hang on a second... I can check if clang/llvm can optimize the rustc bytecode if I remove the casts
[10:45:07] *** Quits: lenstr (lenstr@138F7D4F.9636F313.7A27613B.IP) (Client exited)
[10:45:32] *** Joins: lenstr (lenstr@138F7D4F.9636F313.7A27613B.IP)
[10:47:18] *** Quits: lenstr (lenstr@138F7D4F.9636F313.7A27613B.IP) (Ping timeout)
[10:47:24] <eddyb> %.demorgan = and i1 %3, %5
[10:47:25] <eddyb> WTF
[10:48:51] <eddyb> cmr: this is really weird https://gist.github.com/eddyb/80e4b9d61056cefe7881
[10:48:58] *** Joins: andreypopp (andreypopp@CF703815.F7F3F489.912D28B2.IP)
[10:49:05] <andreypopp> can I link C lib with rust runtime?
[10:49:07] <cmr> it'd be nice if you included the source.
[10:49:20] <eddyb> cmr: me? it's in comments in the relevant files
[10:49:24] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[10:49:25] <eddyb> clang.ll and rustc.ll
[10:49:29] <cmr> oh there it is
[10:49:38] *** Quits: fmtq (fmt@moz-5769BD38.static.tpgi.com.au) (Ping timeout)
[10:50:16] <cmr> andreypopp: what do you mean?
[10:50:38] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[10:50:50] <eddyb> select i1 %.demorgan, i64 %4, i64 0; but %.demorgan = and i1 %3, %5 implies
[10:50:56] <eddyb> ERR I hate when I press enter
[10:50:56] <andreypopp> cmr: I want to write a shared lib which will be used by C program
[10:51:21] <andreypopp> cmr: currently when I link C program against my lib it can't find __morestack and other stuff
[10:51:23] <eddyb> %.demorgan = and i1 %3, %5; implies %5 = icmp eq i64 %4, 0; which implies %4 is 0
[10:51:35] <eddyb> can it not do this?
[10:51:36] <cmr> andreypopp: -lmorestack
[10:51:48] <eddyb> I think clang generates code similar to rustc for the nested version (which works)
[10:51:54] <cmr> andreypopp: the sanest thing to do atm is #[no_std]; on your crate, I think.
[10:52:29] <andreypopp> cmr: it is now with #[no_std] but I wonder if I could use rust stdlib in my lib and task scheduler and...
[10:52:29] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[10:52:34] <eddyb> cmr: is there a meta "rustc makes bloat LL" bug?
[10:52:38] <andreypopp> does rust runtime reentrant?
[10:52:42] <andreypopp> s/does/is/
[10:52:50] *** Joins: fmtq (fmt@moz-5769BD38.static.tpgi.com.au)
[10:53:00] *** Quits: nkoep (nik@moz-CD47E784.pool.mediaways.net) (Ping timeout)
[10:53:04] <cmr> eddyb: there used to be, I think it was closed because it was too wide in scope and not used as a metabug.
[10:53:36] <eddyb> cmr: https://github.com/mozilla/rust/issues/8106
[10:55:29] *** Quits: fmtq (fmt@moz-5769BD38.static.tpgi.com.au) (Ping timeout)
[10:59:04] *** Joins: fmtq (fmt@moz-5769BD38.static.tpgi.com.au)
[10:59:50] *** Quits: andreypopp (andreypopp@CF703815.F7F3F489.912D28B2.IP) (Quit: andreypopp)
[11:00:36] <eddyb> cmr: nice, almost seamless change between highlighting schemes https://github.com/mozilla/rust/issues/8106#issuecomment-30406678
[11:02:14] <eddyb> I don't think I have the expertise to fix this
[11:06:29] *** Joins: smodo (tadnr@moz-6398EFDF.dclient.hispeed.ch)
[11:08:13] *** Joins: nkoep (nik@moz-B7F530F4.vpn.rwth-aachen.de)
[11:08:42] *** Quits: Ms2ger (Ms2ger@57ACE628.C60A97A6.F9FB0584.IP) (Quit: bbl)
[11:09:04] *** Quits: samnardo_ (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[11:14:03] <eddyb> cmr: ok, LLVM doesn't have logical implication, but clang doesn't need it
[11:15:25] <cmr> hm, rust the game looks quite fun.
[11:19:50] <eddyb> I might try starbound. this also looks awesome: https://www.youtube.com/watch?v=RRpDn5qPp3s
[11:20:29] <cmr> yeah I've played about ~30 hours of starbound since it was released....
[11:21:02] <cmr> in the CS labs we bought some four packs, so it's how we have been destressing/procrastinating finals :D
[11:21:33] *** Joins: samnardo_ (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[11:21:58] <eddyb> that video makes me think that game is the next in a journey for which I've theoretized the intangible end years ago
[11:22:39] <eddyb> that doesn't sound as epic as it does in my head. we're talking simulation theory here (is that a thing? I don't know)
[11:23:07] <Jarrett> I thought starbound was the space-terraria... I've never seen THIS game before 8V
[11:23:12] <Jarrett> why didn't I buy iiiiiit
[11:23:27] <eddyb> starbound is space-terraria. this is different
[11:23:31] <Jarrett> OH duh
[11:23:42] <Jarrett> I thought that was just a clever video title
[11:24:10] <cmr> I never played terraria, but from what I hear from those who have, starbound is much more fun.
[11:24:16] <cmr> it doesn't run on linux so I never played it
[11:24:29] <eddyb> yes it is. it's also C/C++ compared to the XNA used by terraria
[11:25:03] <eddyb> it does run on linux under wine, but it doesn't like my GPU, which is above the profile it wants, but wine doesn't tell it enough info
[11:25:11] <eddyb> cmr: starbound has an official linux build o_O?
[11:25:15] <cmr> eddyb: yes
[11:25:23] <cmr> steam, too.
[11:25:33] <cmr> runs very well.
[11:25:33] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[11:25:34] <Jarrett> I think we'll be seeing more steam games ported to linux... steamOS
[11:25:41] <eddyb> that I know. valve is doing so much good
[11:25:53] <eddyb> now we need a better kernel
[11:25:55] *** Quits: samnardo_ (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[11:25:57] *** Joins: kmapped2 (kmapped2@A35331CF.60E9685E.20F09BA6.IP)
[11:26:01] <Jarrett> and I ran terraria through a .net decompiler. would not recommend.
[11:26:04] <Blei> nonono, we need better graphics drivers
[11:26:06] <eddyb> written in Rust. and linux will become the bad guy
[11:26:35] <eddyb> Blei: help me finish wiREd and then you can automate decompiling windows drivers and translating them to working linux drivers
[11:26:59] <Blei> eddyb: tell me more
[11:27:23] <eddyb> Blei: oh, it could also be used to recompile programs to optimize them further
[11:27:31] <eddyb> imagine LTO against wine's DLLs
[11:27:42] <eddyb> to inline all that bloat
[11:28:20] <eddyb> if you LTO against glibc, you can end up from a windows binary to a binary which does linux syscalls directly
[11:28:43] <eddyb> cmr: anyways, imagine simulating thousands of years of guided "evolution", producing organisms (or machines) which can work IRL
[11:29:44] <Blei> eddyb: that project name is not very google friendly
[11:29:44] <eddyb> or fiddle with the DNA of the apple tree (CBA to provide a download link) to produce some kind of new fruit
[11:29:51] <pnkfelix> eddyb: like http://www.youtube.com/watch?v=JBgG_VSP7f8
[11:29:59] <pnkfelix> eddyb: ?
[11:30:03] <eddyb> Blei: erm, sorry. https://github.com/eddyb/wiREd
[11:30:16] *** Joins: lenstr (lenstr@138F7D4F.9636F313.7A27613B.IP)
[11:30:33] <Blei> eddyb: thanks!
[11:30:47] <eddyb> pnkfelix: yes. now go down to a ribosome
[11:31:22] <eddyb> I had a lot of ideas for that, but most of them fuzzy
[11:31:53] <eddyb> I recently thought about recursively similar octrees and deflate
[11:31:58] *** Quits: lenstr (lenstr@138F7D4F.9636F313.7A27613B.IP) (Ping timeout)
[11:32:39] *** Joins: sarclops (sarclops@454B35C7.6848B658.5CE2311A.IP)
[11:32:54] * ldunn wonders what you would fiddle with in a ribosome
[11:33:02] *** Joins: g3xzh (g3xzh@moz-F05C9A20.red.bezeqint.net)
[11:33:06] <eddyb> ldunn: try simulating it
[11:33:17] <eddyb> pnkfelix: oh wow, some of the examples are interesting
[11:33:31] *** Joins: larsberg (sid16141@moz-A42E5B7B.irccloud.com)
[11:33:33] <eddyb> dammit, I wanted to play with genetic algorithms and other things during the summer
[11:33:41] <ldunn> and then simulate the protein it ends up translating? An ambitious task ;o
[11:33:47] *** Quits: Blei (philipp@moz-B2F9E4BD.cust.bluewin.ch) (Quit: WeeChat 0.4.2)
[11:34:11] <eddyb> ldunn: thus "intangible" in my original message
[11:34:43] * ldunn /lastlog
[11:34:44] <ldunn> oh
[11:34:57] <TeXitoi> rewrite of shootout-fasta.rs: https://github.com/mozilla/rust/pull/10933
[11:35:08] <eddyb> GET TO DA CHOPPAH
[11:35:08] <cmr> TeXitoi: sweet
[11:35:11] <eddyb> FASTAH
[11:35:12] <cmr> you are awesome :)
[11:35:20] <eddyb> sorry, couldn't resist :3
[11:35:50] <cmr> TeXitoi: how does it compare to the C or C++ versions?
[11:36:08] <TeXitoi> cmr: thanks
[11:36:30] <eddyb> why did Blei quit?
[11:36:35] <eddyb> I wanted to talk about wiREd
[11:36:49] <TeXitoi> cmr: about 2-3 times slower on my atom, but I didn't understand why
[11:37:54] <TeXitoi> cmr: I tried to use perf to profile, and the rng seems to be the corty thing, but I do not know well perf
[11:38:08] <TeXitoi> s/corty/costy/
[11:38:26] <cmr> TeXitoi: I'll take a quick look
[11:39:07] <TeXitoi> cmr: the best c++ version is similar to this version
[11:39:20] <cmr> TeXitoi: link?
[11:39:26] <TeXitoi> http://benchmarksgame.alioth.debian.org/u64q/program.php?test=fasta&lang=gpp&id=3
[11:40:23] <eddyb> I have to start working on wiREd again, but I feel like moving from ES6 to Rust :/
[11:40:42] <eddyb> I mean, perf can't be worse, but... I still use JS-isms in places
[11:41:29] <eddyb> I guess I can replace all those crazy things with trait objects, and it shouldn't be much worse (thought v8 will devirtualize better than LLVM AFAIK)
[11:41:36] <eddyb> cmr: this is fucking bad: echo 'unsigned long foo(unsigned long i) {return i % 4 == 3 ? (i+1) % 4 : 0;}' | clang -x c -S -o /dev/stdout -O3 -emit-llvm - | less
[11:41:48] <eddyb> guess what? it doesn't optimize
[11:42:10] <eddyb> it is a hard one, but... really?
[11:43:07] <eddyb> shorter, but still unoptimized: echo 'unsigned long foo(unsigned long i) {return i % 4 == 0 ? (i+1) % 4 : 1;}' | clang -x c -S -o /dev/stdout -O3 -emit-llvm - | less
[11:43:26] *** Quits: g3xzh (g3xzh@moz-F05C9A20.red.bezeqint.net) (Quit: Leaving)
[11:43:40] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Client exited)
[11:43:46] <eddyb> it's stewpid
[11:43:47] <cmr> eddyb: open a bug or pester people in their irc channel
[11:44:06] <eddyb> like pestering is going to work. and I think they're in a network I'm not in
[11:44:14] <cmr> oftc yeah
[11:44:18] <eddyb> and I'm on Mozilla, Freenode and Rizon, so that's something
[11:44:51] * eddyb wonders how to bypass shortcircuiting. oh, ofc. & instead of &&
[11:46:12] <eddyb> this has the same problem as manually optimized rust: echo 'unsigned long foo(unsigned long i) {return (i % 5 == 1 & i % 4 == 0) ? i % 4 : 0;}' | clang -x c -S -o /dev/stdout -O3 -emit-llvm - | less
[11:46:20] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[11:46:26] <eddyb> just the variable names differ, it's identical code
[11:46:57] *** Joins: Blei (philipp@moz-B2F9E4BD.cust.bluewin.ch)
[11:48:05] <eddyb> Blei: wb
[11:50:06] <cmr> TeXitoi: well, it's 1s faster with LTO, that's something..
[11:50:23] <Blei> ty
[11:51:08] <cmr> TeXitoi: quite a bit of time is spent in the bufferedwriter.
[11:51:34] *** Quits: hacker_sam (hacker_sam@moz-5218E46E.public.wayport.net) (Ping timeout)
[11:52:08] <cmr> TeXitoi: I wonder if you should, since you know the line length, allocate a vec of that length and then write *that* after every loop, rather than letting the bufferedwriter deal with it.
[11:52:12] * cmr tries it
[11:53:15] *** Joins: dario (dario@moz-8E3254C2.informatik.uni-erlangen.de)
[11:53:19] <bjz> Jarrett: ak, noes
[11:53:35] <Jarrett> hmm?
[11:54:28] <Blei> eddyb: i just read the logs, i quit for a quick reboot because i installed a new kde + kernel
[11:54:41] <eddyb> kde :D
[11:54:48] <Blei> so, what does wired do exactly?
[11:54:50] <eddyb> Blei: are you waiting for kf5?
[11:55:17] <Blei> implicitly, i suppose :)
[11:55:32] <Blei> i.e. i don't really think about it
[11:55:35] <dbaupp> cmr, TeXitoi: don't even need to allcoae, just put a [u8, .. LINE_LENGTH] on the stack
[11:55:40] <Jarrett> sorry bjs, bedtime for me, but I'll be back tomorrow to see if I can get it sorted out
[11:55:42] <dbaupp> allocate
[11:55:42] <Blei> but kf5 -> qt5 -> wayland support!
[11:55:56] <eddyb> they want no X11 support in kf5 if possible
[11:56:00] <cmr> dbaupp: it's stack allocation :p
[11:56:21] <eddyb> o_O
[11:56:33] <eddyb> we need FixedCapacityVec
[11:56:35] *** Joins: jaebaek_ (jaebaek@4D10E9F2.E551553C.7544CABF.IP)
[11:56:50] <eddyb> but variable length, in that space
[11:56:59] <jaebaek_> is rc file also rust source file?
[11:57:15] <eddyb> Blei: wiREd - right now it does "disassembly" (lifting to IR) and some control flow analysis
[11:57:18] <cmr> jaebaek_: the old convention was to make the crate file a .rc, but that's fallen out of favor and is now deprecated.
[11:57:21] <Jarrett> sorry bjz*, my bad
[11:57:56] *** Quits: Jarrett (me@moz-8211AC00.dhcp.nrwl.ca.charter.com) (Quit: Leaving.)
[11:58:12] <eddyb> Blei: almost an year ago I was making IDA look bad by having proof-of-return for nested alloca's
[11:58:17] <Blei> eddyb: what kind of IR? probably not llvm, seeing it's written in js
[11:58:44] <eddyb> runtime format only, it's mostly a typed operation DAG
[11:58:45] <jaebaek_> @cmr, thx .. but i checked out the file type in servo source code
[11:59:08] *** Joins: Iceland_jack (user@moz-E4C53E7B.sudo.is)
[11:59:17] <Blei> cool, i'll have to look at this some more...
[11:59:27] <eddyb> Blei: I might combine efforts with BAP (which is academic, closed source, with source releases)
[11:59:33] <cmr> TeXitoi: bingo, only 500ms slower than C++ with that and LTO
[11:59:39] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[12:00:06] <eddyb> Blei: there's a lot of auto-generated code, and right now compiling the x86_16 disassembler (for a real mode emulator) with Rust takes 2GB without optimizations
[12:00:17] <eddyb> somewhere over 2.2GB with --opt-level=3
[12:00:37] <eddyb> s/closed source/closed development/
[12:00:37] <Blei> that's a lot
[12:00:59] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[12:01:02] <eddyb> yes. it can do a lot of things a BIOS doesn't need :/
[12:01:25] <eddyb> it also doesn't help that rustc can't extend the life of stack temporaries long enough, so every Expr needs its own local
[12:01:34] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[12:01:53] <eddyb> the DAG is constructed on the stack for efficiency reasons
[12:02:37] <eddyb> I remember I had memory usage issues with the JS version
[12:02:52] <eddyb> rust could probably do much better
[12:03:06] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[12:03:52] <TeXitoi> cmr: cool :)
[12:04:22] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[12:04:46] <Blei> very cool stuff. what's the plan forward? transforming that dag into something compileable?
[12:05:04] <TeXitoi> cmr: diff?
[12:05:14] *** Quits: _Vi (vi@527C345F.497AA854.B16B3BE6.IP) (Ping timeout)
[12:05:16] <cmr> TeXitoi: one sec, seeing if there is any more simple wins...
[12:05:21] <eddyb> Blei: what I output already looks like C code (recently added goto's)
[12:05:28] <eddyb> and by recently I mean last summer
[12:05:38] <eddyb> well, this summer. the one that ended 3 months ago
[12:05:40] *** Joins: andreypopp (andreypopp@moz-7261DC60.net)
[12:06:52] <eddyb> Blei: oh, minus memory addressing. but [addr]N => *(iN*)(addr) isn't particularly hard
[12:07:16] <eddyb> it's missing basic block re-entry, basic block splitting and merging
[12:07:32] <TeXitoi> cmr: what's the rustc arg to activate LTO?
[12:07:32] <eddyb> (so for loops are broken if you inline if's with constant condition)
[12:07:49] <cmr> TeXitoi: -Z lto
[12:08:07] <eddyb> Blei: oh, and, set/range analysis. it's not hard, just painful in JS without something like WeakMap, I guess
[12:08:07] *** Joins: lenstr (lenstr@138F7D4F.9636F313.7A27613B.IP)
[12:08:14] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[12:08:30] <Blei> what's set/range analysis?
[12:08:32] *** Quits: blank_name (blank_name@A1428C52.6FF80FE1.6D228269.IP) (Ping timeout)
[12:08:58] <Blei> Makefile:17: recipe for target 'disasm/arch-8051.js' failed
[12:09:00] <eddyb> well, if i < N { /* i is in [0, N) here */ }
[12:09:12] *** Joins: blank_name (blank_name@F62A39BD.9E887BEB.53C6B850.IP)
[12:09:29] <cmr> TeXitoi: http://ix.io/9l8
[12:09:35] <eddyb> it's prolly broken atm. and I idle in #radare (which is related enough for discussion to not be offtopic) on freenode, if you want to discuss more
[12:09:49] *** Quits: lenstr (lenstr@138F7D4F.9636F313.7A27613B.IP) (Ping timeout)
[12:10:27] <Blei> hmm, ok
[12:10:33] <eddyb> Blei: traceur-compiler has been updating to the latest ES6 draft, modules are slightly different, etc
[12:11:21] <cmr> wow, that was a firefox crash :|
[12:11:24] *** Quits: ezyang (ezyang@moz-2957C5C9.mit.edu) (Client exited)
[12:11:47] <TeXitoi> cmr: it will not work when the line is not full
[12:11:49] <eddyb> Blei: and if i < N { let x = [constant + i]32; EIP = x; } - with range analysis, I can know that all possible values of i are in constant memory. then I take them all and create a set of possible values
[12:11:49] <cmr> eddyb: new bench data is up, so irsy should update soon (or already has)
[12:11:52] <ChrisMorgan> cmr: !
[12:11:55] <cmr> TeXitoi: oh, yes :(
[12:12:13] <TeXitoi> I've done it with a ~[], it works
[12:12:15] <cmr> TeXitoi: just needs an .as_slice(n) then, I think.
[12:12:24] <cmr> or, slice_to(n)
[12:12:35] <TeXitoi> yeah, I'll add that
[12:12:39] <ChrisMorgan> cmr: my "!" got me thinking—"fn firefox() -> ! " :P
[12:12:42] <eddyb> Blei: from then, I can have something similar to LLVM's multi-target select/branch which can be displayed as switch statements
[12:12:48] <cmr> ChrisMorgan: heh
[12:13:05] <eddyb> rusti: fn foo() -> ! {0}
[12:13:06] -rusti- pastebinned 7 lines of output: http://sprunge.us/dQAH
[12:13:16] <eddyb> rusti: fn foo() -> ! {}
[12:13:16] -rusti- pastebinned 7 lines of output: http://sprunge.us/WPMj
[12:14:21] *** Joins: _eddyb_ (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[12:14:21] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Connection reset by peer)
[12:14:30] <_eddyb_> rusti: fn foo() -> ! {0u}
[12:14:31] -rusti- pastebinned 7 lines of output: http://sprunge.us/WJcI
[12:15:43] <cmr> ChrisMorgan: aw, and it doesn't even repro
[12:15:45] <_eddyb_> interesting...
[12:15:47] <cmr> that's sad
[12:15:59] * cmr hates bugs that he can't file a useful report for
[12:16:04] <_eddyb_> rusti: fn foo() -> ! {()}
[12:16:04] -rusti- pastebinned 7 lines of output: http://sprunge.us/YSRE
[12:16:20] <_eddyb_> are {} and {()} not equivalent?
[12:16:21] <ChrisMorgan> _eddyb_: ! means "it won't return", e.g. fail!()
[12:16:21] <cmr> _eddyb_: are you trying to get around the type checker or something?
[12:16:28] <_eddyb_> cmr: heh, yeah
[12:16:30] *** _eddyb_ is now known as eddyb
[12:16:40] <eddyb> ChrisMorgan: I know
[12:16:49] <cmr> rusti: fn foo() -> ! { (); }
[12:16:51] -rusti- pastebinned 7 lines of output: http://sprunge.us/PCEO
[12:16:58] <ChrisMorgan> Good, so I thought.
[12:17:00] <eddyb> but I thought {} had the value ()
[12:17:12] <cmr> and type (), yes.
[12:17:21] <cmr> rusti: fn foo() -> ! { return { } }
[12:17:22] <eddyb> so is ! a special case?
[12:17:23] -rusti- pastebinned 7 lines of output: http://sprunge.us/bBfY
[12:17:34] <ChrisMorgan> cmr: yeah, Firefox is pretty bad that way. It crashes so very rarely that when it does it's often not reproducible :-(
[12:17:42] <eddyb> rusti: fn foo() -> ! { return; }
[12:17:43] -rusti- pastebinned 7 lines of output: http://sprunge.us/UCgX
[12:17:57] <eddyb> hah, wat?
[12:18:00] <cmr> eddyb: well, it is a special case in that it's the one major place we have subtyping.
[12:18:12] <dbaupp> cmr: did you see by comment on the PR to remove the `for _ in range(0, nb)`?
[12:18:28] <cmr> dbaupp: I saw it, but did not read it.
[12:18:41] <eddyb> cmr: I guess {} is None and {()} is Some(ExprNil) or something like that
[12:18:59] <eddyb> dbaupp: hmm? which one?
[12:19:23] <eddyb> Blei: there's so many things to do... and I know how to do them, but I'm not superman
[12:19:24] <cmr> dbaupp: ah, yeah, that does make sense.
[12:20:00] <eddyb> and from the end of the summer until a couple of weeks ago, I was incapable of doing almost anything
[12:20:16] <eddyb> time and focus-wise
[12:21:16] <pnkfelix> eddyb: yeah I fell in love with that demo back when i saw it in …1997?
[12:21:21] <Blei> eddyb: haha, yeah, life's like that sometimes
[12:21:27] <pnkfelix> eddyb:  (the karl sims one)
[12:21:56] <pnkfelix> eddyb: Especially the creatures competing to grab the ball in the center
[12:22:04] <eddyb> myeah
[12:24:22] <andreypopp> I already asked a question but then suddenly got disconnected from IRC — can I link rust runtime to C program so I can use all std lib and tasks scheduler to write shared libs in rust?
[12:25:09] <eddyb> andreypopp: well, you can create a rust shared library
[12:25:43] <andreypopp> eddyb: and link it to C program but now I have #[no_std] in my sources
[12:26:04] <eddyb> andreypopp: you might be able to compile an object file from some rust code and then link that against C code, and then add the libstd .so as a shared lib dependency
[12:26:05] <andreypopp> first, I can't find what does it mean but it seems I can't use stdlib and tasks scheduler
[12:26:24] <eddyb> tasks are in std, kinda
[12:26:32] <andreypopp> ok
[12:26:41] <eddyb> andreypopp: why do you need C?
[12:26:59] <eddyb> I mean, can you write that C code in Rust instead?
[12:27:16] <andreypopp> eddyb: well, I don't need C, I want to create dynamic libs which will be loaded by C program
[12:27:27] <andreypopp> eddyb: like extensions to Python interpreter or PostgreSQL database
[12:27:47] <eddyb> andreypopp: you can write a Rust-only shared library which can be loaded by C
[12:28:17] <eddyb> there's nothing magic in there, just marking the relevant functions as extern "C" and maybe adding #[no_mangle] to them
[12:28:19] <andreypopp> and no #[no_std] required for that?
[12:28:27] <eddyb> I don't think so
[12:28:41] <andreypopp> eddyb: ok, cool, thank you
[12:29:07] <eddyb> I'm not sure the tasks scheduler works then, but I think there's a way to initialize the rust runtime in std
[12:29:29] <eddyb> the rust main function calls a runtime-initialization function and then runs your fn main()
[12:30:19] <andreypopp> eddyb: ok, thanks
[12:31:21] <eddyb> you can even static link against libstd and LTO now, so there's no shared lib dependencies
[12:31:28] *** Quits: m_kato (m_kato@moz-C286AD9A.bitcat.net) (Quit: Leaving...)
[12:31:46] <eddyb> (if you don't use too much from std, or most of it would be inlined anyway, that's very good)
[12:32:52] <eddyb> Blei: https://etherpad.mozilla.org/k14brBnFZa if you really want to make me remember about things I should do
[12:34:44] <TeXitoi> cmr: I have no noticable improvement at using unsafe_get, do you have?
[12:36:12] <eddyb> TeXitoi: are you doing vec::from_elem anywhere?
[12:36:17] *** Joins: samnardo_ (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[12:36:17] *** Quits: rca (rcatolino@moz-E0992404.adsl.proxad.net) (Ping timeout)
[12:36:55] <eddyb> then there's always bound checks because the length field can be aliased
[12:37:01] <eddyb> cmr: hmm, still looks bogus http://huonw.github.io/isrustfastyet/mem/#a6310f6,5466462,898d2c3
[12:37:10] <TeXitoi> eddyb: no, that's a [u8, ..61]
[12:37:31] <eddyb> link? I now know things to not do with vectors
[12:37:46] <eddyb> frankly, idiomatic rust is fastest. [] is bad
[12:37:56] <eddyb> also += can end up being a bloat
[12:38:00] <TeXitoi> http://ix.io/9l8
[12:38:02] *** Quits: samnardo_ (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[12:38:40] <TeXitoi> eddyb: I tried with a ~[] with reserve and push, and it's much slower
[12:38:59] <eddyb> ok, that while loop is bad
[12:39:38] <Blei> eddyb: never ending indeed :D
[12:39:56] <eddyb> TeXitoi: unwrap is also bad, but you can't do much about it
[12:40:24] <TeXitoi> let line = ~[]; line.reserve(61); for b in it.by_ref().take(nb) {line.push(b)}
[12:40:30] <TeXitoi> you've got the idea
[12:40:34] <TeXitoi> is much slower
[12:40:52] <eddyb> erm, isn't that a collect?
[12:41:20] <TeXitoi> eddyb: except that the line memory is reused
[12:41:24] <eddyb> TeXitoi: pushes aren't idiomatic rust either
[12:41:51] <TeXitoi> it laks the while loop aroud the for one
[12:41:52] <eddyb> you want a primitive which expands an iterator into a vector
[12:41:54] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[12:42:21] <eddyb> because then you hoist out the bound checks
[12:43:15] <eddyb> TeXitoi: what's it? it looks like you're pulling from it, without failing
[12:43:58] <TeXitoi> eddyb: a minute
[12:43:58] <eddyb> oh, derp, it's a diff, that makes a little more sense
[12:47:04] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[12:47:09] <TeXitoi> eddyb: https://github.com/mozilla/rust/pull/10933
[12:47:47] <TeXitoi> eddyb and cmr updated the PR, but here, I have no perf diff with unsafe_get
[12:48:10] <eddyb> are you testing with --opt-level=3? add -Z extra-debug-info, just in case
[12:48:36] <eddyb> and then can you run "perf record ./test-fasta-whatever; perf annotate"?
[12:49:07] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[12:49:12] <cmr> TeXitoi: unsafe_set? I added it because it was an easy win in the main loop, but if it doesn't make much of a difference you can remove it.
[12:50:46] * eddyb doesn't like how io is involved there
[12:51:32] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[12:52:09] <TeXitoi> eddyb: rustc --opt-level 3 -Z extra-debug-info -Z lto shootout-fasta.rs -o /tmp/fasta
[12:52:44] <TeXitoi> cmr: yes, ok
[12:53:18] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[12:54:18] *** Joins: gdey (gdey@moz-E4449B64.sd.sd.cox.net)
[12:54:31] <eddyb> TeXitoi: run perf on that like I said
[12:56:22] *** Joins: rookii (rookii@moz-8DF729A5.rdl801.qld.optusnet.com.au)
[12:57:04] *** Joins: _Vi (vi@527C345F.497AA854.B16B3BE6.IP)
[13:01:30] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[13:03:15] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[13:04:08] *** Joins: Ms2ger (Ms2ger@moz-5E951152.ugent.be)
[13:07:59] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Connection reset by peer)
[13:09:04] <TeXitoi> eddyb: as 1h later, the bottleneck seems to be in gen(), but I'm not a perf expert
[13:11:08] <eddyb> TeXitoi: what line?
[13:11:17] *** Quits: SingingBoyo (SingingBoy@DA28FB90.A5D0D593.4F048BDC.IP) (Ping timeout)
[13:12:00] <TeXitoi> eddyb: that's fussy because of the optimisations, but the 2 lines of gen:         self.last = (self.last * 3877 + 29573) % 139968;
[13:12:02] <TeXitoi>         self.last as f32 / 139968.0
[13:12:32] *** Joins: SingingBoyo (SingingBoy@DA28FB90.A5D0D593.4F048BDC.IP)
[13:13:17] <eddyb> heh
[13:13:29] <eddyb> so you were optimizing in the wrong place
[13:13:38] <TeXitoi> eddyb: I think the 2nd because I can see a fdivs (2.42) followed by a je (22.81)
[13:14:01] <eddyb> je... is it in a loop?
[13:14:27] <TeXitoi> the make_fasta proposed by cmr improve the run time by almost 2
[13:14:57] <eddyb> but what are those numbers?
[13:15:05] <TeXitoi> eddyb: the gen is used in a loop, yes
[13:15:23] <TeXitoi> eddyb: which numbers ?
[13:15:28] <eddyb> ah, the RNG
[13:15:38] <TeXitoi> yes
[13:15:51] <eddyb> why does it use floats :/?
[13:16:16] <TeXitoi> eddyb: because the probs are thin
[13:16:17] *** Joins: q66__ (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[13:16:22] <eddyb> aaah, it only returns a float
[13:16:47] <TeXitoi> the haskell version use only integers, but need a big lookup table to find the value to print
[13:17:09] <eddyb> uhm...
[13:17:14] *** Quits: q66_ (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[13:17:25] <eddyb> TeXitoi: does it always work in multiples of 139968?
[13:17:45] <eddyb> it looks like it could use fixed-point which would be faster for some operations
[13:18:25] <eddyb> |(pc, _)| pc < r makes more sense
[13:18:37] <TeXitoi> the rng is in [0; 139968[ because of %
[13:19:06] <eddyb> yes, I know, it's just a LCG
[13:19:15] <TeXitoi> yep
[13:20:22] <eddyb> TeXitoi: are the values supplied to the AAGen::new multiples of 1 / 139968?
[13:21:12] <TeXitoi> eddyb: no value is suppied to AAGen::new
[13:21:26] <TeXitoi> or I don't understand the question
[13:21:30] <eddyb> https://github.com/TeXitoi/rust/blob/e13160834375276b4c0602d52fa01346f2bd79c4/src/test/bench/shootout-fasta.rs#L97-L106
[13:21:45] <eddyb> are the floats there multiples of 1 / 139968?
[13:22:34] <eddyb> or I guess this can normalize them, so the comparison below in skip_while is still valid for all possible RNG output values https://github.com/TeXitoi/rust/blob/e13160834375276b4c0602d52fa01346f2bd79c4/src/test/bench/shootout-fasta.rs#L44
[13:23:00] <TeXitoi> I don't know, but the haskell version translate that to a lookup table of 139968 elts, so I think it can be assumed
[13:24:09] <eddyb> those values don't escape this code https://github.com/TeXitoi/rust/blob/e13160834375276b4c0602d52fa01346f2bd79c4/src/test/bench/shootout-fasta.rs#L40-L57
[13:24:17] <TeXitoi> eddyb: OK, I'll try to translate that to u32 instead of floats
[13:24:25] <bstrie> steveklabnik: https://news.ycombinator.com/item?id=6892749 oh hai steve kablink
[13:24:53] *** Joins: w3lcome (Mibbit@moz-E9ABA59E.home.otenet.gr)
[13:24:58] <eddyb> TeXitoi: try first to normalize them in AAGen::new. you need to do that in way that the comparison below is still valid
[13:25:33] <TeXitoi> eddyb: ok, thanks
[13:27:46] <eddyb> with r an integer, you have pc.n0() * 139968 < r, the left hand side is a float. if it's an integer, the relation holds. if it's r - epsilon, the result should be true, so you have to round down
[13:28:08] <eddyb> TeXitoi: (cum * 139968) as u32 is enough, for positive values
[13:28:20] *** Joins: cubic (cubic@moz-80241A3A.mc.videotron.ca)
[13:28:33] <eddyb> here: https://github.com/TeXitoi/rust/blob/e13160834375276b4c0602d52fa01346f2bd79c4/src/test/bench/shootout-fasta.rs#L44 - for precision's sake, leave cum a float
[13:30:12] <eddyb> you shouldn't duplicate its value, rather have it a static, LCG_N or something like that
[13:30:33] <eddyb> and then (cum * LCG_N as f32) as u32
[13:31:10] <TeXitoi> eddyb: ok, the haskell version do (p * 139968. + 1.).floor()
[13:31:25] <eddyb> that's ceil, I think
[13:31:33] <eddyb> which breaks the comparison
[13:31:46] <eddyb> so they're doing it wrong?
[13:32:45] <TeXitoi> the +1?
[13:32:51] <eddyb> yes
[13:33:00] <eddyb> looks wrong to me
[13:33:15] *** Quits: jaebaek_ (jaebaek@4D10E9F2.E551553C.7544CABF.IP) (Ping timeout)
[13:34:02] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[13:35:30] *** Joins: jaebaek_ (jaebaek@4D10E9F2.E551553C.7544CABF.IP)
[13:35:48] <eddyb> r - e < r <=> (r - e) * 139968 < r * 139968 <=> (r - e) * 139968 < floor(r * 139968)
[13:35:54] *** Joins: AvianFlu (AvianFlu@moz-31F97978.nyc.res.rr.com)
[13:35:56] <eddyb> hmm, I've confused myself
[13:37:23] <TeXitoi> eddyb: task '<main>' failed at 'called `Option::unwrap()` on a `None` value', /home/sihem/hack/rust/src/libstd/option.rs:135
[13:37:24] *** Joins: kmag (kmag@28313FB8.D3BD3D1C.EACCA5E3.IP)
[13:37:26] <TeXitoi> :/
[13:37:27] <eddyb> well, ceil((r - e) * 139968) < floor(r * 139968) shouldn't be right
[13:37:55] <eddyb> it isn't right with e == 0
[13:38:03] <eddyb> wait
[13:38:14] <eddyb> gaaah so complicated
[13:38:20] <eddyb> TeXitoi: try to do what haskell does?
[13:39:19] <TeXitoi> eddyb: yeah, it''s compliling
[13:39:31] <TeXitoi> (so slow atom...)
[13:39:44] <eddyb> well, ceil((R / 139968 - e) * 139968) < floor(R / 139968 * 139968)
[13:40:18] <eddyb> R + ceil(-e * 139968) < R
[13:40:21] <kmag> I'm trying to do a first time install of Rust on OS X 10.8, and my stage0 rustc is failing to find __tlv_bootstrap while compiling.
[13:40:25] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[13:40:58] <eddyb> ceil(-e * 139968) < 0 would mean haskell is right
[13:41:13] <kmag> i686-apple-darwin10-gcc-4.2.1
[13:41:26] <eddyb> but that's not right, so haskell should be wrong
[13:41:32] <TeXitoi> well, using fn normalize(p: f32) -> u32 {(p * IM as f32 + 1.).floor() as u32} do not pass the test
[13:41:41] <TeXitoi> but it's much faster :)
[13:41:47] <eddyb> TeXitoi: does it past without + 1.?
[13:41:49] <eddyb> *pass
[13:42:02] <eddyb> or is that the error from before?
[13:42:14] <TeXitoi> no, it runs
[13:42:26] <TeXitoi> compiling without +1
[13:44:20] *** Joins: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca)
[13:44:32] <TeXitoi> arg, less diff without +1, but still diff
[13:44:49] <eddyb> yeah, haskell is wrong
[13:45:01] <eddyb> TeXitoi: what type is IM?
[13:45:09] <TeXitoi> maybe it should be <= and not < ?
[13:45:10] <TeXitoi> u32
[13:45:13] <eddyb> I guess you're casting right before
[13:45:21] <eddyb> TeXitoi: try using f64 everywhere
[13:45:39] <eddyb> I believe 139968 is cutting it close
[13:45:57] <eddyb> and don't build with lto, that's what's slowing you down
[13:45:58] <TeXitoi> eddyb: with floor?
[13:46:13] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[13:46:18] <eddyb> TeXitoi: everywhere you have a f32, replace with f64
[13:46:35] <eddyb> that should give you more wiggle room
[13:46:47] <eddyb> if that change makes a difference, then it's a precision quirk
[13:46:54] <pnkfelix> kmc: wait, that does not match the version string I get from gcc on my copy of OS X ...
[13:46:59] <pnkfelix> ugh
[13:47:00] <pnkfelix> kmag: ^
[13:47:06] <eddyb> I hope you're storing the data as u32
[13:47:16] <TeXitoi> ha, ok
[13:47:50] <kmag> pnkfelix: what's your gcc version string?
[13:47:52] <pnkfelix> kmag:  here is the version output I get … https://gist.github.com/pnkfelix/7928177  (note that its clang)
[13:48:50] <pnkfelix> kmag: this is on OS X 10.8.5
[13:49:14] *** Joins: rca (rcatolino@moz-E0992404.adsl.proxad.net)
[13:50:22] <TeXitoi> eddyb: nop, exactly the same error
[13:50:30] <eddyb> TeXitoi: hmmm
[13:50:50] <eddyb> TeXitoi: I don't understand why it would be different from the original
[13:50:51] <eddyb> :/
[13:51:10] <eddyb> rusti: 1f32 / 139968 * 139968
[13:51:11] -rusti- pastebinned 10 lines of output: http://sprunge.us/eRCf
[13:51:25] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[13:52:01] <eddyb> rusti: 1f32 / 139968f32 * 139968f32
[13:52:02] -rusti- 1f32
[13:52:21] <eddyb> rusti: 1f32 / 139968f32 * 2.5f32 * 139968f32 / 2.5f32
[13:52:22] -rusti- 0.9999999f32
[13:52:25] <eddyb> erm
[13:52:41] <eddyb> rusti: 2.5f32 / 139968f32 * 139968f32 / 2.5f32
[13:52:42] -rusti- 1.00000012f32
[13:52:51] <eddyb> rusti: 2.5f32 / 139968f32 * 139968f32
[13:52:52] -rusti- 2.50000024f32
[13:53:01] <eddyb> rusti: 2.5f64 / 139968f64 * 139968f64
[13:53:02] -rusti- 2.5f64
[13:53:07] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[13:53:12] <eddyb> TeXitoi: I was talking about things like this ^
[13:53:17] <eddyb> rusti: 3f64 / 139968f64 * 139968f64
[13:53:18] -rusti- 3f64
[13:53:21] <eddyb> rusti: 2f64 / 139968f64 * 139968f64
[13:53:22] -rusti- 2f64
[13:53:40] <eddyb> oh don't tell me 139968 is the number of integers a f32 can store
[13:53:52] <eddyb> like, the mantissa bits
[13:53:53] *** Quits: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr) (Ping timeout)
[13:54:21] <eddyb> rusti: 3f32 / 139968f32 * 139968f32
[13:54:22] -rusti- 3f32
[13:54:22] <dbaupp> it's not a power of 2, so no
[13:54:29] *** Joins: sankha93 (Instantbir@812848B2.35354309.EFB84E89.IP)
[13:54:31] <eddyb> erm, that's very bad
[13:54:43] <eddyb> rusti: 19f32 / 139968f32 * 139968f32
[13:54:44] -rusti- 19f32
[13:54:50] <eddyb> though integers seem to work fine
[13:55:02] <eddyb> rusti: 133751f32 / 139968f32 * 139968f32
[13:55:03] -rusti- 133751f32
[13:55:05] <TeXitoi> Mmm, I cumulate on u32, not on float, I'll try with float
[13:55:12] <eddyb> TeXitoi: LOL
[13:55:14] <dbaupp> rusti: 139968f32 + 1.0 - 139968f32
[13:55:14] -rusti- 1f32
[13:55:29] <eddyb> TeXitoi: I told you precisely to keep that a float :P
[13:55:47] <eddyb> I guess f32 works, just use it where it's required
[13:55:47] <dbaupp> rusti: (1 << 18) as f32 + 1.0 - (1 << 18) as f32
[13:55:48] -rusti- 1f32
[13:55:57] <dbaupp> rusti: (1 << 19) as f32 + 1.0 - (1 << 19) as f32
[13:55:58] -rusti- 1f32
[13:56:02] <TeXitoi> eddyb: sorry
[13:56:10] <dbaupp> rusti: (1 << 21) as f32 + 1.0 - (1 << 21) as f32
[13:56:10] -rusti- 1f32
[13:56:19] <dbaupp> rusti: (1 << 23) as f32 + 1.0 - (1 << 23) as f32
[13:56:20] -rusti- 1f32
[13:56:23] <eddyb> come on
[13:56:24] *** Quits: w3lcome (Mibbit@moz-E9ABA59E.home.otenet.gr) (Quit: http://www.mibbit.com ajax IRC Client)
[13:56:31] <eddyb> it's 24, IIRC
[13:56:31] <dbaupp> rusti: (1 << 24) as f32 + 1.0 - (1 << 24) as f32
[13:56:32] -rusti- 0f32
[13:56:35] <dbaupp> yes
[13:56:46] <eddyb> you had to use rusti a million times instead of checking wikipedia :P?
[13:56:48] <dbaupp> which is much larger than 140k
[13:56:55] <eddyb> yeah, nvm me
[13:56:58] <dbaupp> eddyb: yes :P
[13:57:20] *** Quits: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:57:37] <TeXitoi> eddyb: that was that, it works now
[13:57:48] <eddyb> TeXitoi: is it faster?
[13:57:56] <eddyb> also, was haskell wrong?
[13:59:03] <TeXitoi> eddyb: I think haskell may add 1 because of indices or something like that, but I didn't checked
[13:59:12] <TeXitoi> its much faster
[13:59:15] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[13:59:31] <eddyb> gg
[14:00:32] <TeXitoi> faster than the c++ version :) should be as the fortran version
[14:00:52] <dbaupp> is it correct still?
[14:01:20] <eddyb> eeeeeh, I've made my thing slower :/ 3.48user 0.09system 0:03.61elapsed 99PU (0avgtext+0avgdata 10712maxresident)k
[14:01:26] <TeXitoi> dbaupp: it pass the official shootout test, and haskell is using only integer, so I think yes
[14:02:37] *** Joins: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr)
[14:02:46] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[14:02:49] <eddyb> I think haskell is stupid, with that table
[14:02:55] <TeXitoi> eddyb: thanks
[14:03:04] *** Quits: z0w0 (zack@3DBF69E1.E4B1DB2C.2CE63F58.IP) (Client exited)
[14:04:06] <TeXitoi> eddyb: fortran do a count(p > r), I suspect to limit false branch prediction. The haskell version also limit false branch prediction
[14:04:26] <TeXitoi> but I tried to use count without success
[14:04:34] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[14:06:31] *** Quits: andreypopp (andreypopp@moz-7261DC60.net) (Quit: andreypopp)
[14:07:05] *** Joins: jhasse (jhasse@moz-F6FC55BD.ewe-ip-backbone.de)
[14:07:45] <jhasse> hi! How can I compile rust with debug messages enabled?
[14:07:56] <cmr> jhasse: configure --enable-debug
[14:08:25] <jhasse> cmr: thx
[14:08:47] *** Quits: jhasse (jhasse@moz-F6FC55BD.ewe-ip-backbone.de) (Quit: Verlassend)
[14:08:54] <TeXitoi> https://github.com/mozilla/rust/pull/10933 updated :)
[14:09:39] *** Joins: diverse (diverse@moz-ED94B8D.oc.oc.cox.net)
[14:11:23] *** Quits: kmag (kmag@28313FB8.D3BD3D1C.EACCA5E3.IP) (Client exited)
[14:13:36] *** Joins: samnardo_ (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[14:13:47] <diverse> could this be a valid syntax that Rust can use? `let mut (x, y) = (1, 2);`
[14:14:21] <dbaupp> diverse: maybe, but it's not always clear how the `mut` distributes
[14:14:33] <pnkfelix> diverse: I believe it was been considered and explicitly discarded in favor of `let (mut x, mut y) = (1, 2);`
[14:15:48] * diverse lowers head in disappointment
[14:15:56] *** Joins: bynaryshef (bynaryshef@moz-B4E38B6F.mem.bellsouth.net)
[14:16:31] *** Quits: moostik (Icedove@moz-6D4FE356.w86-212.abo.wanadoo.fr) (Ping timeout)
[14:17:20] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[14:18:11] *** Joins: w3lcome (Mibbit@moz-E9ABA59E.home.otenet.gr)
[14:21:26] *** Quits: Ms2ger (Ms2ger@moz-5E951152.ugent.be) (Ping timeout)
[14:22:02] *** Joins: Ms2ger (Ms2ger@moz-5E951152.ugent.be)
[14:22:45] *** Quits: penguin_dan (dan_johnsi@6902762D.11B071D.FB9A45AF.IP) (Client exited)
[14:22:53] <diverse> http://pastebin.com/jTdjkCZC  Is `range()` being removed or something?
[14:23:33] *** jorendorff_away is now known as jorendorff
[14:24:02] <diverse> got a `dead_code` warning
[14:24:13] *** Joins: penguin_dan (dan_johnsi@6902762D.11B071D.FB9A45AF.IP)
[14:24:13] <benh> That just means you're never calling find_prime
[14:24:18] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[14:24:26] *** Quits: Ms2ger (Ms2ger@moz-5E951152.ugent.be) (Ping timeout)
[14:24:42] *** Joins: Ms2ger (Ms2ger@moz-5E951152.ugent.be)
[14:25:21] <diverse> benh: is there an attribute or something to disable that warning?
[14:25:29] <bstrie> diverse: we're not interested in making it easy to accidentally make things mutable, hence (mut x, mut y)
[14:25:56] <benh> diverse: there probably is a few ways to disable it, yeah, hm
[14:26:10] <dbaupp> diverse: #[allow(dead_code)]
[14:26:15] <benh> ah :)
[14:26:31] <dbaupp> diverse: either on the individual functions, or on a module or crate to cover all of them.
[14:28:50] *** Quits: samnardo_ (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[14:28:53] <diverse> benh & dbaupp: thank you :)
[14:29:11] <benh> np!
[14:33:40] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[14:35:10] *** Joins: gwty (gwtypc@322EAEF3.E0A5EE90.D6324C7.IP)
[14:39:36] *** Quits: dredozubov (dredozubov@2F14E2C1.F70E5FA9.F63E14E8.IP) (Connection reset by peer)
[14:39:51] *** Joins: dredozubov (dredozubov@2F14E2C1.F70E5FA9.F63E14E8.IP)
[14:40:16] *** Quits: victorporof (victorporo@C8C495F5.E3195F0D.9B1E38F4.IP) (Quit: victorporof)
[14:41:01] *** Joins: victorporof (victorporo@C8C495F5.E3195F0D.9B1E38F4.IP)
[14:45:36] *** Joins: moostik (Icedove@moz-6D4FE356.w86-212.abo.wanadoo.fr)
[14:47:38] *** Joins: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net)
[14:50:05] *** Joins: io2 (io2@moz-34E8FDD4.home.otenet.gr)
[14:52:27] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[14:53:07] *** Quits: rookii (rookii@moz-8DF729A5.rdl801.qld.optusnet.com.au) (Client exited)
[14:53:42] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[14:54:14] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[14:54:51] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[14:54:59] <eddyb> 3.47user 0.09system 0:03.56elapsed 100PU (0avgtext+0avgdata 10716maxresident)k
[14:55:01] <eddyb> gaaaaaaah
[14:55:10] *** Quits: AvianFlu (AvianFlu@moz-31F97978.nyc.res.rr.com) (Input/output error)
[14:55:25] <eddyb> it's breaking optimizations again
[14:55:42] <eddyb> because it's virtualizing closures
[14:59:56] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[15:00:24] *** jorendorff is now known as jorendorff_away
[15:01:39] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[15:02:44] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[15:03:56] *** Quits: Ms2ger (Ms2ger@moz-5E951152.ugent.be) (Ping timeout)
[15:04:07] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[15:05:51] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[15:06:05] *** Quits: sellout (sellout-@moz-AE26682A.hlrn.qwest.net) (Quit: Leaving.)
[15:06:32] *** Quits: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca) (Quit: canhtak)
[15:07:22] *** Joins: colinsurprenant (colin@F692E1FE.8D7057CF.30F15291.IP)
[15:07:41] <eddyb> |_, _, _| 0xff // do we have a shorthand for that?
[15:08:05] <cmr> does |..| work?
[15:09:39] *** Quits: moostik (Icedove@moz-6D4FE356.w86-212.abo.wanadoo.fr) (Ping timeout)
[15:10:32] *** Joins: moostik (Icedove@moz-6D4FE356.w86-212.abo.wanadoo.fr)
[15:10:37] <eddyb> cmr, nmatsakis: nope. I guess, with my variadics (well, mostly tuple capture), you could write |.._|, with |..| as a shorthand
[15:10:58] <cmr> |..| looks like a sullen robot
[15:11:03] <cmr> so I definitely think we should have it.
[15:11:43] <kimundi> Surprised robot: |oo|
[15:11:45] <eddyb> let (..) = x; would work for all tuples types x, doing... nothing
[15:12:07] <eddyb> |_o , _o|
[15:12:28] <kimundi> rusti: 0_0
[15:12:29] -rusti- 0
[15:15:34] *** Joins: freddyb (freddyb@moz-DB4A9C19.scl3.mozilla.com)
[15:16:14] <freddyb> I am going to start learning rust. My background is mostly security and I usually prefer scripting languages
[15:16:42] <freddyb> are there some small projects where it makes sense contribute small patches to get a feeling or should I just start with project euler for my baby steps?
[15:17:00] <cmr> freddyb: euler isn't too bad, but I don't think it's very good for learning the language...
[15:17:36] <freddyb> I've never done project euler but I figured some math problems might be cool to run with concurrency
[15:17:40] <cmr> there aren't many small projects.
[15:17:43] <cmr> maybe!
[15:18:11] <cmr> but, Rust's data paralellism support isn't all that great, tasks aren't too suitable for it.
[15:18:25] <freddyb> well if you insist, I will go and mess ups ervo :P
[15:18:32] <cmr> heh :D
[15:18:32] <freddyb> mess up servo*
[15:18:37] *** jorendorff_away is now known as jorendorff
[15:18:42] <cmr> I'm not saying you can't
[15:18:51] <cmr> Or even shouldn't
[15:19:50] * freddyb looks at https://github.com/search?q=rust&ref=cmdform&type=Repositories
[15:20:20] *** Joins: lpy (lpy@12172131.F09091A8.1348A864.IP)
[15:20:52] <eddyb> rust-ci is slighty more relevant, I'd think
[15:20:58] *** Quits: colinsurprenant (colin@F692E1FE.8D7057CF.30F15291.IP) (Quit: colinsurprenant)
[15:21:36] *** Parts: larsberg (sid16141@moz-A42E5B7B.irccloud.com) ()
[15:21:47] <freddyb> ah. rust-ci doesnt give project descriptions in the default listing
[15:22:53] <cmr> freddyb: if you want a new project that shouldn't be too hard, adding something like Lua patterns to libextra would be super useful.
[15:23:03] <freddyb> I have no clue what Lua patterns are
[15:23:10] <freddyb> or libextra is
[15:24:03] *** Joins: Ms2ger (Ms2ger@moz-5E951152.ugent.be)
[15:24:42] *** Joins: lfox (lfox@moz-B8648F0F.nycmny.fios.verizon.net)
[15:24:51] <eddyb> freddyb: wait, I just realized your name is fr eddyb o_O
[15:24:59] *** jorendorff is now known as jorendorff_away
[15:25:08] *** Quits: gwty (gwtypc@322EAEF3.E0A5EE90.D6324C7.IP) (Ping timeout)
[15:25:23] <eddyb> libextra is a place when unmaintained contraptions of varying usefulness live :P
[15:25:54] <freddyb> eddyb: you have a great nickname, but I feel it's somehow missing something
[15:26:25] <eddyb> freddyb: seriously now, is it related at all?
[15:26:28] <TeXitoi> cmr: lua pattern is basically regex, no?
[15:27:05] <freddyb> eddyb: my name is Frederik and most people call me freddy. the "b" stands for my surname, since the handle "freddy" is mostly used by someone else
[15:27:33] <eddyb> Eduard here, "edi" IRL, "eddy" in English
[15:27:37] <eddyb> :3
[15:28:21] <cmr> TeXitoi: depends on your view of regex :) if one expects PCRE then no, they aren't. But if one expects regex as they're formally defined, basically, yeah.
[15:28:47] <cmr> freddyb: what eddyb said, although extra isn't really all that unmaintained. it's part of the standard library.
[15:29:16] <cmr> http://www.lua.org/pil/20.2.html
[15:29:18] <cmr> has a spec
[15:29:27] <cmr> well
[15:29:29] <cmr> kinda
[15:30:10] <cmr> http://www.lua.org/manual/5.2/manual.html#6.4.1 there
[15:30:12] <kimundi> Is this part of a discussion about rust regex support?
[15:30:17] <eddyb> not really
[15:30:20] <cmr> kimundi: only sorta
[15:30:25] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[15:30:27] <eddyb> cmr: looks like scanf
[15:30:42] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[15:30:48] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[15:31:00] *** Joins: colinsurprenant (colin@F692E1FE.8D7057CF.30F15291.IP)
[15:31:03] *** Joins: mye (mye@moz-FCD0926C.dip0.t-ipconnect.de)
[15:31:08] <cmr> kimundi: over break (if noone else wants to do it) I'm going to write a patterns-alike for Rust, in lieu of a real regexp lib.
[15:31:21] <cmr> just something that works that people can use
[15:31:35] <cmr> and not something ambitious like compile-time regexps etc
[15:31:46] <cmr> or any fancy algs like ssbr and others have looked into.
[15:32:05] *** Joins: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca)
[15:32:28] <eddyb> compile-time regexps would just abuse LLVM
[15:32:42] <eddyb> though we've seen that doesn't always work :(
[15:33:17] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[15:33:20] *** Joins: jhasse (jhass_000@moz-F6FC55BD.ewe-ip-backbone.de)
[15:33:23] <kimundi> cmr: Ah, I see. I'm curious because I'm planning to generalize the string API to support arbitrary kinds of "string pattern"s using traits, and I want to make sure there are no design conflicts :)
[15:34:13] *** Joins: IRCMonkey56714 (sellout-@moz-968E9A09.hsd1.co.comcast.net)
[15:34:20] *** Joins: escalant3 (uid14896@moz-31ABA2C0.irccloud.com)
[15:34:30] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[15:34:35] *** Quits: moostik (Icedove@moz-6D4FE356.w86-212.abo.wanadoo.fr) (Ping timeout)
[15:35:46] <cmr> kimundi: what do you mean by that? *are* there design conflicts? I plan on doing it next week, probably tuesday, so I'll have more concrete plans around then
[15:35:59] <cmr> (but I basically plan on implementing patterns exactly)
[15:36:16] <jhasse> cmr, Just tried ./configure --enable-debug && make && make install, still no output from debug!(...) when running e. g. rustpkg. Anything else I need to keep in mind?
[15:36:28] <cmr> jhasse: oh, `debug!`
[15:36:36] <cmr> jhasse: that's on by default, I thought you mean debuginfo
[15:36:42] <cmr> jhasse: RUST_LOG=rustpkg=4
[15:36:49] *** IRCMonkey56714 is now known as sellout
[15:36:52] <cmr> or, RUST_LOG=rustpkg=debug
[15:37:00] <cmr> (as an env var)
[15:37:17] *** Joins: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com)
[15:37:25] <jhasse> cmr, ahhh. Thanks, works :)
[15:37:57] *** Quits: jaebaek_ (jaebaek@4D10E9F2.E551553C.7544CABF.IP) (Ping timeout)
[15:38:00] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[15:38:20] *** Joins: moostik (Icedove@moz-55271760.w82-123.abo.wanadoo.fr)
[15:39:08] *** Joins: hjr3 (hradtke@moz-4CC6BC5F.public.wayport.net)
[15:39:09] *** Joins: samnardo_ (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[15:40:39] <kimundi> cmr: What I mean is, for a generic API I need to define an trait for iterating over all matches of a generic pattern type in a string, and I need a few reality checks with real implementations to make sure any kind of pattern can actually efficiently implement that interface
[15:40:49] *** Quits: samnardo_ (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[15:41:03] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[15:41:53] <kimundi> cmr: But mostly I just wanted to know if what your planning on doing does also involve integrating it into the string API directly or not :)
[15:41:55] *** Joins: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP)
[15:42:00] <cmr> kimundi: no, not directly.
[15:42:12] <cmr> it'd be like extra::patern or such
[15:43:01] <kimundi> okay - that would make an excellent real-world test for the pattern API I have in mind then :)
[15:43:09] <cmr> ok, cool
[15:43:37] *** Joins: jvns (bork@87D98E32.4046EB22.428F94DD.IP)
[15:43:45] <eddyb> kimundi: ah, so it would word "by default" with matching char ranges, substrings or a function applied at every position?
[15:44:06] <kimundi> eddyb: Yeah
[15:44:07] *** Joins: abinader (abinader@D8B9C081.E820043D.D4C04133.IP)
[15:44:29] <kimundi> "foo".split('o'), "foo".split("fo"), "foo".split(regex("o+"))
[15:45:39] <kimundi> That part of the string API needs all genericy it can get to not result in a combinatorial explosion of methods :P
[15:46:09] <kimundi> (Of course, the question is if we want that in the stdlib - but we'Re already halfway there with the CharEq atm)
[15:46:14] <eddyb> .split(|c| c == ',' || c == ' ')
[15:46:24] <eddyb> yeah, CharEq is what I was thinking of
[15:47:08] <kimundi> .split([|c| c == ',', char::whitespace]) // etc...
[15:47:11] *** Joins: gwty (gwtypc@322EAEF3.E0A5EE90.D6324C7.IP)
[15:48:00] <eddyb> kimundi: so much goodness!
[15:48:25] <eddyb> so I guess impl<T: StrMatch> StrMatch for [T]
[15:48:29] <cmr> would need casts to trait objects in there :(
[15:48:40] <eddyb> char::whitespace would be a fn, I guess
[15:48:51] <kimundi> cmr: Not for this example, and also not if they corece in the future :)
[15:48:53] <eddyb> oh, btw, impl<..T: StrMatch> StrMatch for T
[15:49:10] <cmr> ah, I suppose.
[15:49:13] <eddyb> i.e. a tuple
[15:49:16] <kimundi> .split([&',' as &StrPattern, &char::whitespace as &StrPattern])
[15:49:18] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[15:49:23] <kimundi> eddyb: Maybe!
[15:49:49] <eddyb> kimundi: you're making me excited!
[15:49:56] <kimundi> .split([&',', &char::whitespace]) // with corecion, if thje inference is smart enough
[15:49:58] <eddyb> which burns more sugars which makes me hungrier
[15:50:17] <eddyb> & is kinda nasty there, if it can be helped :/
[15:50:38] <eddyb> I guess you'd use .split((',', char::whitespace))
[15:51:41] <kimundi> I'm sure if we actually have variadic generics, there are a few opportunities to rework it to be even nicer
[15:52:19] *** Joins: refold (gman@moz-42D68426.a258.priv.bahnhof.se)
[15:53:04] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[15:53:25] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[15:54:16] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[15:54:26] *** Joins: markov_twain (markov_twa@7C26314E.4A024E9D.F35DA1C6.IP)
[15:54:28] *** Joins: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net)
[15:54:48] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[15:57:13] *** Joins: beifeng (Mibbit@CD9E4E22.A765EABF.C7DB8B78.IP)
[15:58:25] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[15:58:27] *** Joins: GeziParki_Devrimcisi (Seviyorum@80788887.ED938E78.888F138E.IP)
[15:58:40] <Leo`> http://static.rust-lang.org/doc/master/tutorial.html#more-on-boxes
[15:58:51] <Leo`> "A large value is returned via a hidden output parameter"
[15:59:00] <Leo`> is there any guarantee of this ?
[15:59:05] <cmr> Yes
[15:59:07] *** Parts: GeziParki_Devrimcisi (Seviyorum@80788887.ED938E78.888F138E.IP) ()
[15:59:18] <cmr> Always, for non-immediates (anything larger than an int)
[15:59:21] <Leo`> I've got a bug in my code where a struct is returned by copy, messing internal unsafe pointers
[15:59:25] <kimundi> Leo`: Yes, because else the code would not be able to be compiled
[15:59:28] *** jorendorff_away is now known as jorendorff
[15:59:29] <Leo`> weird then.
[15:59:35] <cmr> look at the IR?
[15:59:52] <Leo`> it's a struct containing another struct (not a pointer, the struct directly)
[15:59:57] <Leo`> and an unsafe pointer to that struct
[16:00:02] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[16:00:02] *** ChanServ sets mode: +ao dherman dherman
[16:00:12] <Leo`> A { B; ptr }, where B is another struct, and ptr an unsafe pointer to B
[16:00:28] <Leo`> when it is returned, it's copied. And then the pointer points to the B of the old struct
[16:00:47] <cmr> well, the pointer is *never* going to point to the same B
[16:00:54] <kimundi> that is completly correct behavior
[16:00:55] <cmr> it gets written to theoutput param
[16:01:08] <Leo`> mh ok I see
[16:01:13] <cmr> but that out param isn't used as temporary space.
[16:01:17] <Leo`> but i've got a copy done anyway
[16:01:18] <kimundi> Your're just doing something that is unsafe to do :P
[16:01:22] <cmr> (not guaranteed; LLVM will do that operation sometimes)
[16:01:24] <Leo`> yes I know
[16:01:27] <Leo`> :P
[16:01:36] <Leo`> Merf.
[16:01:38] <cmr> so there will be a copy into the out param sometimes.
[16:01:51] <Leo`> yep I see
[16:01:57] *** Joins: kzzch (Mibbit@moz-991A24E8.hsd1.va.comcast.net)
[16:02:02] *** Quits: paulproteus (quassel@199.199.210.158) (Ping timeout)
[16:02:19] <Leo`> dunno how I'm gonna fix this in my code :P
[16:02:37] *** Joins: paulproteus (quassel@458FE134.3EC36C88.CBDCF1DC.IP)
[16:02:55] <eddyb> Leo`: how do you use the unsafe pointer?
[16:02:55] *** Quits: jweinberg (jweinberg_@3E5CF971.9533F93D.26E46D7D.IP) (Ping timeout)
[16:03:52] <Leo`> eddyb: what do you mean ?
[16:04:07] *** Quits: StarLight (StarLight@E3074617.5F559CE.B04B15DE.IP) (Ping timeout)
[16:04:10] <Leo`> you mean why I need this unsafe pointer ? :p
[16:04:33] <eddyb> Leo`: that and what do you do with it?
[16:05:10] <Leo`> eddyb: it may be simpler if I show you the code
[16:05:28] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[16:05:48] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[16:06:13] <Leo`> https://github.com/LeoTestard/Scheme-VM/blob/master/gc/value.rs#L22
[16:06:19] <Leo`> it may be hard to understand :P
[16:06:28] <Leo`> gc::Pair is a wrapped unsafe pointer
[16:06:51] <eddyb> "VM" is enough
[16:06:58] *** Joins: jweinberg (jweinberg_@3E5CF971.9533F93D.26E46D7D.IP)
[16:07:10] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[16:07:17] <Leo`> eddyb: ? :P
[16:07:24] <eddyb> Leo`: wait, what's unsafe?
[16:07:33] <eddyb> gc::Pair?
[16:08:03] *** Joins: StarLight (StarLight@moz-4BF6116D.dynamic.avangarddsl.ru)
[16:08:06] <Leo`> gc::Pair is an unsafe pointer yep
[16:08:33] <eddyb> so this is the problem? https://github.com/LeoTestard/Scheme-VM/blob/master/gc/value.rs#L41
[16:08:51] <Leo`> exactly :P
[16:09:00] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[16:09:09] <eddyb> I don't understand how you can have *mut GCPair and &mut GCPair as arguments to gc::Pair
[16:09:38] <Leo`> gc::Pair is a newtype around *mut GCPair IIRC
[16:09:46] *** Quits: jstevans (Instantbir@BFE4C8C6.362CC69C.B7830B68.IP) (Ping timeout)
[16:09:55] <eddyb> Leo`: oh. hehe
[16:10:25] <eddyb> this confused me https://github.com/LeoTestard/Scheme-VM/blob/master/gc/value.rs#L15-L16
[16:10:42] <Leo`> eddyb: there is also value::Pair
[16:10:46] <Leo`> (well, this is why I don't like to show my code on IRC >_<)
[16:11:04] *** Joins: jvshahid (jvshahid@BE83DFD.50866E69.CA2DF2C0.IP)
[16:11:04] <Leo`> but, this is Scheme heh. Pairs, pairs everywhere :D
[16:11:22] <eddyb> that's not a pair, silly, that's a Cons :P
[16:11:37] *** Quits: hjr3 (hradtke@moz-4CC6BC5F.public.wayport.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[16:11:51] <eddyb> (thought I shouldn't be talking about LISPs)
[16:12:13] <eddyb> also, I thought null was unit (much like in Rust)
[16:12:23] <Leo`> (the predicate is called pair?, cons is only the constructor)
[16:12:40] *** Joins: dhedlund (dhedlund@moz-A6C9F88D.ptld.qwest.net)
[16:13:01] <eddyb> interesting. I've heard it called cons before (outside of its use as a constructor)
[16:13:46] <Leo`> going back to my code, I think I could return the new ListBuilder as a ~box
[16:13:48] <Leo`> but :/
[16:14:00] <eddyb> erm
[16:14:07] <eddyb> Leo`: where do you use that unsafe pointer?
[16:14:13] <eddyb> that's the important part
[16:14:13] <Leo`> append, just below
[16:14:27] <Leo`> ListBuilder builds linked list iteratively
[16:14:28] <eddyb> oh, I searched for the wrong thing
[16:14:46] <Leo`> it keeps I ptr to the current node, append() adds a node to it and update the pointer
[16:14:53] <Leo`> s/I/a/
[16:15:05] <Leo`> it also keeps a ptr to the first node, and when you wall gen_list(), it returns that node
[16:15:27] <eddyb> ah, so it's a first/last thing
[16:15:32] <Leo`> (with a dummy node at the start so that append doesn't need to check everytime if there is also something or not)
[16:15:41] *** Quits: Ms2ger (Ms2ger@moz-5E951152.ugent.be) (Quit: bbl)
[16:15:50] <eddyb> like a doubly-linked list but without the back pointers
[16:15:51] <Leo`> s/also/already
[16:15:55] <Leo`> *tired*
[16:16:12] <Leo`> it's a Scheme list, singly-linked :P
[16:16:23] <eddyb> hence the lack of back pointers
[16:16:28] <Leo`> yup
[16:16:33] <Leo`> otherwise append would be trivial
[16:16:50] <Leo`> I wouldn't have to do this if Rust had proper tail recursion, but heh... :D
[16:17:19] <eddyb> if C can optimize it, so can Rust (modulo trans bloat which is a bug)
[16:17:35] <eddyb> so tail recursion can be optimized as a loop or a tail jump
[16:17:37] <cmr> eddyb: drop gllue often ruins the party.
[16:17:47] <cmr> which isn't a bug
[16:17:49] <eddyb> cmr: curses
[16:17:52] *** Joins: qlkzy (user@moz-6347038F.range86-177.btcentralplus.com)
[16:18:17] <Leo`> does C optimizes last-call as well ?
[16:18:21] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[16:18:25] <Leo`> I mean, A() -> B() and B() -> A()
[16:18:31] <eddyb> co-recursion?
[16:18:37] *** Quits: moostik (Icedove@moz-55271760.w82-123.abo.wanadoo.fr) (Ping timeout)
[16:18:38] <Leo`> yeah
[16:18:47] <eddyb> it might, I'm not sure
[16:18:59] *** Joins: moostik (Icedove@moz-55271760.w82-123.abo.wanadoo.fr)
[16:19:06] <eddyb> (well, s/C/clang/)
[16:19:23] <Leo`> I thought GCC was able to do it too
[16:19:32] <Leo`> at least for tail call
[16:19:39] <Leo`> -s
[16:19:41] <eddyb> yeah, but you compare Rust with clang, because they both use LLVM
[16:19:49] <Leo`> yeah, makes sense.
[16:19:51] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[16:19:54] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[16:19:56] *** Joins: GeziParki_Devrimcisi (Seviyorum@80788887.ED938E78.888F138E.IP)
[16:19:59] <GeziParki_Devrimcisi> Hiii
[16:20:02] <GeziParki_Devrimcisi> hello
[16:20:04] <eddyb> sooo. you can't really return by value
[16:20:14] <Leo`> is the TCO part in Clang or in LLVM ?
[16:20:21] <eddyb> LLVM
[16:20:23] *** Quits: smarter (smarter@moz-9C03B7C7.cust.bluewin.ch) (Input/output error)
[16:20:24] <Leo`> ok
[16:20:31] <Leo`> well so Rust should profit of it too :)
[16:20:36] <Leo`> hello GeziParki_Devrimcisi 
[16:20:37] <GeziParki_Devrimcisi> Where are you from ? :)
[16:20:45] <GeziParki_Devrimcisi> Leo`
[16:21:08] <Leo`> eddyb: well no, it looks like I must return by-box if I want to keep the code this way
[16:21:33] <eddyb> Leo`: the only reason you get away with taking a mutable reference to a field and then returning the list by value is that you're casting it away to an unsafe pointer
[16:21:54] <eddyb> borrock wouldn't allow you to do this, without unsafe pointers :P
[16:22:21] <Leo`> well of course
[16:22:35] *** Parts: GeziParki_Devrimcisi (Seviyorum@80788887.ED938E78.888F138E.IP) ()
[16:22:53] <Leo`> this shows that a new() static method is not *really* a constructor, sadly :P
[16:23:10] <Leo`> a true constructor would allow what I try to do
[16:23:37] <eddyb> Leo`: btw, suggestion, you can have pub type Prim = 'static |argc: u8, &mut VM| -> Value;
[16:24:15] <Leo`> oh, yes.
[16:24:25] <eddyb> Leo`: and then turn the functions into closures
[16:24:40] <Leo`> but I think the way primitives are implemented will change
[16:25:09] <eddyb> like ("newline", |_, _| { print("\n"); Unit})
[16:25:32] <eddyb> Leo`: also, that getarg thing almost annoys me
[16:25:55] <Leo`> mh ? :P
[16:26:04] <eddyb> Leo`: I'd move argc/getarg into a single &mut Arguments param with the Index trait implemented and .len()
[16:26:21] <Leo`> well I must admit it's not really useful
[16:26:25] <Leo`> oh good idea
[16:26:28] <Leo`> :)
[16:26:45] <eddyb> it can be just the same thing as it is now, just wrapped in a type which does the right thing
[16:26:47] *** Quits: jweinberg (jweinberg_@3E5CF971.9533F93D.26E46D7D.IP) (Ping timeout)
[16:26:47] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Ping timeout)
[16:27:27] <eddyb> a long time ago, I wrote some beautiful wrappers for the ugly v8 C++ API, maybe I'll rewrite them in rust some day
[16:27:36] <eddyb> ugly code is bad code
[16:27:47] <Leo`> my code is ugly ? :P
[16:27:58] <eddyb> Leo`: well, your API forces ugly code
[16:28:12] <Leo`> :]
[16:28:23] <eddyb> only map uses ListBuilder?
[16:28:26] *** kimundi is now known as zz_kimundi
[16:28:36] <Leo`> apart of this arguments thing, if you see other ugly things let me know
[16:29:03] <eddyb> Leo`: your map function is unsafe
[16:29:03] <Leo`> eddyb: for the moment, yes. But other list primitives (build-list, filter and consorts) will too
[16:29:08] *** Joins: smarter (smarter@moz-9C03B7C7.cust.bluewin.ch)
[16:29:22] <eddyb> since that fst node is on the stack, won't it break when you return?
[16:29:33] *** Quits: banananana (ba@E7E2A35D.6F99A8B0.2AADDDA7.IP) (Quit: Verlassend)
[16:29:47] <Leo`> what do you mean ?
[16:29:53] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[16:30:02] <eddyb> that contains the fst node https://github.com/LeoTestard/Scheme-VM/blob/master/vm/primitive.rs#L227
[16:30:04] <Leo`> the fst node will get removed yes. This is what I want
[16:30:09] <eddyb> oh, hmm
[16:30:11] *** Quits: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca) (Ping timeout)
[16:30:28] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[16:30:40] <Leo`> it's just a dummy node so that ListBuilder.append() doesn't need to preoccupate of whether the ptr already points to some list node or not
[16:30:49] <Leo`> it is removed in ListBuilder.gen_list()
[16:31:00] *** Joins: jweinberg (jweinberg_@3E5CF971.9533F93D.26E46D7D.IP)
[16:31:06] <eddyb> you can move that to a dtor
[16:31:08] <Leo`> that's why it is stack-allocated when other nodes are garbage collected
[16:31:12] <eddyb> I guess...
[16:31:47] <eddyb> Leo`: so, uhm, you're avoiding a branch with this trick?
[16:31:54] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Ping timeout)
[16:31:58] <Leo`> yep
[16:32:26] <eddyb> the borrow checker hates you at this point
[16:32:42] <eddyb> Leo`: I am silly. there's an easy fix for this
[16:33:27] <Leo`> fix for what ?
[16:33:37] <eddyb> Leo`: let mut builder = EmptyListBuilder; (cheap copy from a static) builder.init();
[16:33:48] <eddyb> you really don't want to allocate if you care for that branch
[16:34:06] *** Quits: beifeng (Mibbit@CD9E4E22.A765EABF.C7DB8B78.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:34:07] <Leo`> nope I don't really want to allocate it indeed
[16:34:17] <eddyb> you just have to call .init() before you use it
[16:34:47] <eddyb> btw, for primitives you can use a match case
[16:34:53] <Leo`> I guess it's the better thing to do
[16:35:51] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[16:35:51] <Leo`> best*
[16:36:17] <eddyb> (newline /*that's just a token*/, Nil) => { print("\n"); Unit}
[16:36:49] <eddyb> though it gets nasty later, with Cons(a, Cons(b, Cons(c, Nil))). or wait, no, you use a stack for arguments
[16:36:58] <eddyb> so a vector pattern would work :D
[16:37:05] <Leo`> you mean instead of having one function per primitive ?
[16:37:08] <eddyb> yes
[16:37:09] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Connection reset by peer)
[16:37:28] <eddyb> Leo`: creating a slice from a base pointer and an element count is cheap
[16:37:34] <Leo`> :/ I think the primitives will move in some external FFI "base library" eventually
[16:37:48] <eddyb> erm, what?
[16:38:05] <Leo`> there will be lots of primitives
[16:38:14] <Leo`> I don't know if I want to keep them in the VM
[16:38:20] <eddyb> why FFI?
[16:38:28] <Leo`> FFI from the Scheme point of view :P
[16:38:39] <eddyb> ah
[16:38:53] *** Quits: skade (skade@30BBD5E6.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[16:39:32] <eddyb> Leo`: what you're doing looks like a lot of fun, btw :P
[16:40:11] *** Quits: samnardoni (samnardoni@F889EF52.38924046.A86B7D63.IP) (Ping timeout)
[16:40:26] <eddyb> vm.fun_call_ret(&fun, 1); you don't have a function which takes a &[Value] and pushes all elements onto the stack?
[16:41:08] <eddyb> Leo`: are you planning on writing a JIT?
[16:41:51] *** Quits: qlkzy (user@moz-6347038F.range86-177.btcentralplus.com) (Client exited)
[16:42:04] <Leo`> for the fun_call, no, but this can be easily done. Although in any case a function call needs to know how many arguments to take on the stack.
[16:42:17] <Leo`> and I'd like writting a JIT yeah, but i'm far from it :P
[16:42:36] <eddyb> https://github.com/LeoTestard/Scheme-VM/blob/master/vm/primitive.rs#L259-L263 you should use a Cons helper there. though it might not work in other places
[16:43:05] <Leo`> yeah right
[16:43:39] <eddyb> also, .car()/.cdr() gets tedious. if *I* were writing that, I would go for something like first/rest or head/tail
[16:43:46] *** Quits: sellout (sellout-@moz-968E9A09.hsd1.co.comcast.net) (Ping timeout)
[16:43:49] <o11c> everyone says that at first
[16:44:08] <o11c> and then they realize that car and cdr are short and aligned
[16:44:13] <Leo`> eddyb: oh, you can't understand this
[16:44:21] <eddyb> o11c: but... what if someone uses a instead of d or the other way around?
[16:44:29] <Leo`> car and cdr have a special meaning in the heart of all Schemers :D
[16:44:35] <eddyb> o11c: by mistake, ofc, after moving code around
[16:44:38] <cmr> caddddddr
[16:44:45] <eddyb> cadre
[16:45:16] *** Joins: ray (ray@21E8007B.14FD68F4.B395E7D8.IP)
[16:45:25] <eddyb> Leo`: I've implemented a LIPS interpreter in JS based on some old paper thing which predates Common LISP and Scheme
[16:45:42] *** flaper87 is now known as flaper87|afk
[16:45:59] <eddyb> I know what car/cdr are, but I can count the pixel differences on less than two hands
[16:46:10] *** Quits: themgt (themgt@moz-83F07CDA.cm.vtr.net) (Quit: themgt)
[16:46:37] <gdey> Could someone help me? I think I need to use format_args! macro, I've got the format string in a variable; and I'm trying to print it out. Very simple, however, I keep getting a compiler error stating that "format argument must be a string-literial"; I've read the docs a few times over, and I'm not sure how to get this to work. Here is the gist of what I'm trying to do: https://gist.github.com/gdey/7931113
[16:46:45] *** Joins: qlkzy (qlkzy@moz-A97B5CE9.members.linode.com)
[16:46:52] <eddyb> they're too easy to get mixed up, and they have the same type
[16:47:02] <eddyb> Leo`: Rust usually doesn't approve of ^^
[16:47:26] <eddyb> I'd do pattern matching on Cons, but your Pair doesn't allow for that
[16:47:48] <eddyb> gdey: you can't do what you want
[16:47:57] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[16:48:14] <Leo`> eddyb: yep there are many things to improve in my code
[16:48:27] <Leo`> well, i've got to go now
[16:48:29] * Leo` comes back later
[16:48:31] <eddyb> gdey: you can't have the format string in a variable, format_args! generates code from that string and then the compiler typechecks it
[16:49:46] *** Joins: alan (alan@moz-FE02DD30.sat6.rackspace.com)
[16:49:50] <gdey> eddyb: Ah, okay, so how would you do things like this? Is there an equ to sprintf function from c in rust? Maybe I'm not finding it.
[16:50:02] <eddyb> gdey: anything like that isn't safe
[16:50:10] <eddyb> thus, not in Rust
[16:50:14] <cmr> gdey: you don't want to be using any of the syntax extensions, if you don't have a string at compile-time.
[16:50:17] <eddyb> gdey: what do you actually *need*?
[16:50:30] <cmr> gdey: you can use std::fmt::writeln etc
[16:50:36] <cmr> And construct the Arguments yourself
[16:50:54] <gdey> I'm going through the learnpythonthehard way, and converthing all the example to rust.
[16:51:05] <eddyb> gdey: what's the example?
[16:51:06] <gdey> so the things are very simple silly things.
[16:51:25] <gdey> http://learnpythonthehardway.org/book/ex6.html
[16:51:29] <eddyb> Rust isn't a scripting language, there's no runtime evaluation
[16:51:43] <cmr> but yeah it's not simple.
[16:51:50] *** Quits: kzzch (Mibbit@moz-991A24E8.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[16:51:59] *** Joins: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca)
[16:52:01] <eddyb> gdey: that variable is used so the code fits
[16:52:15] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[16:52:35] <eddyb> gdey: there's nothing dynamic about the format string there, so you don't need dynamic string formatting
[16:52:41] <gdey> cmr: fair enough. :) silly though,
[16:53:06] <cmr> gdey: agree. should be something that parses the format string and returns the proper structure.
[16:53:07] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[16:53:15] *** Quits: jhasse (jhass_000@moz-F6FC55BD.ewe-ip-backbone.de) (Quit: Verlassend)
[16:53:22] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[16:54:27] <eddyb> syntax extensions work on the AST before resolution, so you couldn't even implement static joke_evaluation: &'static str = "Isn't that joke so funny?! {}"; println!(joke_evaluation, false);
[16:54:46] <gdey> eddyb: I know, but the point is that one can pass in the format string and have it parse the structure. I can see for things like internalization, or various places where one would use sprintf.
[16:55:02] <eddyb> gdey: sprintf is unsafe with a dynamic string
[16:55:17] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[16:55:38] <eddyb> in python it doesn't matter since `string % arguments` is dynamic
[16:56:01] <cmr> eddyb: it doesn't matter that sprintf is unsafe, it doesn't have to be.
[16:57:10] <eddyb> internationalization also doesn't need dynamic format strings, if you do it right, *I think*. thought the way format! tries to do that might not be right
[16:57:14] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[16:57:54] *** Joins: AvianFlu_ (AvianFlu@moz-723527FF.nycmny.fios.verizon.net)
[16:57:58] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[16:58:20] <ray> is rust an OOP lang?
[16:58:31] <ray> the enum and impl stuff seems kinda weird
[16:58:45] <eddyb> heh, I take it you haven't worked with ADTs before?
[16:58:47] *** Quits: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net) (Ping timeout)
[16:58:49] *** Joins: noy (user@moz-44A5916A.a146.priv.bahnhof.se)
[16:59:02] <gdey> eddyb: ATD?
[16:59:11] <gdey> eddyb: ADT?
[16:59:13] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[16:59:26] <eddyb> well, I haven't either (before rust), but I understood their benefits. and they look better to me in Rust than they do in Haskell
[16:59:35] *** Joins: biondo970 (biondo970@moz-21DC1B4E.cust.dsl.vodafone.it)
[16:59:41] <biondo970> !Ciao
[16:59:42] <gdey> abstract data tree?
[16:59:43] <biondo970> !List
[16:59:50] <eddyb> gdey: Algebraic Data Types
[16:59:56] *** Quits: lpy (lpy@12172131.F09091A8.1348A864.IP) (Client exited)
[17:00:02] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[17:00:18] <Iceland_jack> eddyb: What in particular looks better?
[17:00:19] <eddyb> I really have to fix this, when people join/part, my client hangs for a second
[17:00:27] *** Parts: biondo970 (biondo970@moz-21DC1B4E.cust.dsl.vodafone.it) ()
[17:01:23] <cmr> ray: it has support for OOP, yes, but it's not classical or prototypal OOP
[17:01:32] <eddyb> Iceland_jack: in Rust, you can use them alongside structs, so it's an addition, not a redefinition of the way all types work
[17:01:45] <eddyb> cmr: it's ROOP
[17:02:18] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[17:02:27] *** Joins: jstevans (Instantbir@5ED2F8CE.63B79338.DDE5D3F6.IP)
[17:02:43] <Iceland_jack> Okay so it doesn't pertain to the ADT's themselves, thanks for your response
[17:03:19] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[17:03:46] <gdey> Guys thanks for you help, unfornately I have to take off to work
[17:04:00] *** Quits: gdey (gdey@moz-E4449B64.sd.sd.cox.net) (Quit: Leaving...)
[17:04:19] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[17:04:22] <ray> eddyb: like GO?
[17:04:25] <ray> Go*
[17:04:56] <eddyb> no idea what Go does (it... goes, I presume. I'll show myself out >_>), maybe cmr knows better
[17:05:50] <cmr> nothing like go
[17:10:57] *** Joins: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP)
[17:11:44] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[17:12:13] *** Quits: moostik (Icedove@moz-55271760.w82-123.abo.wanadoo.fr) (Ping timeout)
[17:13:56] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[17:14:10] *** Quits: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca) (Quit: canhtak)
[17:14:14] *** Quits: Ferreus (ferreus@moz-1E02279B.dip0.t-ipconnect.de) (Ping timeout)
[17:14:16] *** Quits: colinsurprenant (colin@F692E1FE.8D7057CF.30F15291.IP) (Quit: colinsurprenant)
[17:16:03] *** Joins: moostik (Icedove@moz-55271760.w82-123.abo.wanadoo.fr)
[17:17:57] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[17:18:29] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Input/output error)
[17:21:59] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[17:22:57] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[17:25:09] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[17:25:27] *** zz_kimundi is now known as kimundi
[17:26:09] *** Joins: Kruppe (user@moz-5B035CE8.net.uwaterloo.ca)
[17:28:32] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[17:28:42] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[17:29:29] *** Joins: kzzch (Mibbit@moz-991A24E8.hsd1.va.comcast.net)
[17:29:40] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[17:31:12] *** Joins: Jarrett (me@moz-8211AC00.dhcp.nrwl.ca.charter.com)
[17:31:18] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[17:32:14] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[17:33:09] *** Parts: ray (ray@21E8007B.14FD68F4.B395E7D8.IP) ()
[17:33:11] *** Joins: Ms2ger (Ms2ger@moz-97D6582B.adsl-dyn.isp.belgacom.be)
[17:34:54] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Connection reset by peer)
[17:35:01] *** Quits: jstevans (Instantbir@5ED2F8CE.63B79338.DDE5D3F6.IP) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[17:35:03] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[17:37:39] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[17:38:57] *** jorendorff is now known as jorendorff_away
[17:41:32] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[17:42:14] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[17:42:14] *** ChanServ sets mode: +ao pcwalton pcwalton
[17:42:44] *** Joins: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca)
[17:43:08] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[17:44:02] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[17:45:09] *** Quits: Iceland_jack (user@moz-E4C53E7B.sudo.is) (Client exited)
[17:45:10] *** Joins: Iceland_jack (user@moz-E4C53E7B.sudo.is)
[17:46:14] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[17:46:37] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[17:46:37] *** ChanServ sets mode: +ao dherman dherman
[17:47:32] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[17:50:24] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[17:51:30] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Quit: WeeChat 0.4.2)
[17:53:20] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:54:04] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[17:55:14] *** Joins: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP)
[17:55:19] *** Joins: beifeng (Mibbit@CD9E4E22.A765EABF.C7DB8B78.IP)
[17:55:41] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Input/output error)
[17:56:51] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[17:58:17] *** Quits: abinader (abinader@D8B9C081.E820043D.D4C04133.IP) (Ping timeout)
[17:58:36] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[18:00:51] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[18:01:30] *** Quits: sarclops (sarclops@454B35C7.6848B658.5CE2311A.IP) (Quit: sarclops)
[18:01:31] *** Joins: abinader (abinader@16F1E95C.5F2797A0.B3575E10.IP)
[18:01:37] *** Joins: gdey (gdey@moz-CD850554.static-ip.telepacific.net)
[18:01:42] *** Quits: gdey (gdey@moz-CD850554.static-ip.telepacific.net) (Client exited)
[18:01:45] *** Joins: gdey (gdey@moz-CD850554.static-ip.telepacific.net)
[18:01:55] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[18:01:55] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:01:56] *** Joins: Florob (Florob@moz-39532932.de)
[18:03:50] *** Joins: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com)
[18:04:13] <killerswan> Is there a doc someplace describing the up-to-date crate syntax?
[18:04:45] <cmr> killerswan: "crate syntax"?
[18:04:52] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:04:53] *** ChanServ sets mode: +ao brson brson
[18:04:57] <killerswan> I had a crate for example containing #[link(name = "x")];, inside a file named main.rs
[18:04:59] *** Quits: Jarrett (me@moz-8211AC00.dhcp.nrwl.ca.charter.com) (Connection reset by peer)
[18:05:11] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[18:05:21] <killerswan> running `rustic main.rs` would create `x` as a binary
[18:05:22] *** Joins: Jarrett (me@moz-8211AC00.dhcp.nrwl.ca.charter.com)
[18:05:32] *** Quits: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[18:05:32] <Yurume> SimonSapin, on rust-encoding issue #26: is &'static Encoding: 'static non-sendable? I hadn't expect that...
[18:05:41] <killerswan> now it has changed so it creates `main` as a binary!
[18:05:43] *** Quits: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net) (Ping timeout)
[18:05:43] *** Joins: andreypopp (andreypopp@moz-7261DC60.net)
[18:05:47] <SimonSapin> Yurume: me neither
[18:05:47] <killerswan> so the syntax has changed
[18:05:56] <cmr> killerswan: http://static.rust-lang.org/doc/master/rust.html#linkage
[18:06:03] <cmr> killerswan: search also for package_id
[18:06:11] <cmr> nooo it's not in the manual
[18:06:13] <cmr> jack: :(
[18:06:19] <SimonSapin> but using `&'static Encoding: Send` as cmr suggested worked
[18:06:26] <Yurume> doh.
[18:06:30] *** Joins: skade (skade@moz-E337FB02.pools.arcor-ip.net)
[18:06:55] <SimonSapin> Yurume: by the way, rust-encoding will soon be used in Servo :) https://github.com/mozilla/servo/pull/1377
[18:07:14] <Yurume> anyway, I agree on the issue, but EncodingObj seems to be a misleading name. how about EncodingRef?
[18:07:26] <killerswan> cmr: thanks, although I'm not sure that's verbose enough for me
[18:07:31] <Yurume> great! sorry about recent hiatus, haha.
[18:07:40] *** Joins: colinsurprenant (colin@F692E1FE.8D7057CF.30F15291.IP)
[18:07:51] <killerswan> link had / has a bunch mor properties, too, that were supposed to eventually mean something
[18:07:59] <killerswan> like UUIDs and version numbers...
[18:08:36] *** Joins: madalynn (Mibbit@15E64609.6A8A1F30.A34EC3BB.IP)
[18:08:39] *** Parts: madalynn (Mibbit@15E64609.6A8A1F30.A34EC3BB.IP) ()
[18:09:04] <cmr> killerswan: those never really meant anything
[18:09:10] <cmr> they were just part of the hash
[18:09:39] *** Joins: themgt (themgt@moz-83F07CDA.cm.vtr.net)
[18:10:03] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[18:10:15] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[18:10:15] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[18:10:33] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[18:11:05] <SimonSapin> Yurume: EncodingObj is a trait object
[18:11:05] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Connection reset by peer)
[18:11:12] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[18:11:15] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[18:11:24] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[18:11:24] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[18:11:28] <boredomist> it looks like the compilation was interrupted on bors' run of https://github.com/mozilla/rust/pull/10923
[18:11:33] <boredomist> this is unrelated to the changes, right?
[18:11:39] <Yurume> "object" has multiple meanings, of course ;)
[18:11:44] <boredomist> is there anything i need to do to fix/rerun/whatever?
[18:11:57] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Quit: WeeChat 0.4.3-dev)
[18:12:01] <sfackler> boredomist: bors broke last night
[18:12:07] <SimonSapin> http://static.rust-lang.org/doc/master/tutorial.html#trait-objects-and-dynamic-method-dispatch
[18:12:17] <SimonSapin> in rust "trait object" is the dynamic dispatch thing
[18:12:39] <SimonSapin> I don’t think anything else is called "object" in Rust
[18:12:55] <boredomist> sfackler: aha. so to rerun someone just needs to r+ again?
[18:12:57] <SimonSapin> but still, I’m fine with renaming it if you want
[18:13:09] *** Quits: markov_twain (markov_twa@7C26314E.4A024E9D.F35DA1C6.IP) (Ping timeout)
[18:13:22] <sfackler> boredomist: yep, someone should retrigger all of the builds after bors gets fixed
[18:13:41] <Yurume> SimonSapin, it is also used as a broader meaning, i.e. "A destructor is a function responsible for cleaning up the resources used by an object when it is no longer accessible."
[18:14:21] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[18:14:49] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[18:15:22] <SimonSapin> &T where T is not a trait (no dynamic dispatch) is also called a "reference"
[18:15:51] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Input/output error)
[18:15:53] <SimonSapin> I wanted to keep it short but again, I’m ok with renaming to whatever
[18:16:21] <killerswan> cmr: yeah....
[18:16:25] <killerswan> thanks, though
[18:16:48] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[18:17:00] *** Quits: sankha93 (Instantbir@812848B2.35354309.EFB84E89.IP) (Quit: Gone to save the world!)
[18:17:32] *** Quits: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP) (Ping timeout)
[18:17:44] *** Quits: beifeng (Mibbit@CD9E4E22.A765EABF.C7DB8B78.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:18:02] *** Quits: moostik (Icedove@moz-55271760.w82-123.abo.wanadoo.fr) (Ping timeout)
[18:18:52] *** Joins: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP)
[18:18:56] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[18:19:54] *** Quits: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca) (Quit: canhtak)
[18:20:12] *** Joins: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com)
[18:22:29] *** Joins: markov_twain (markov_twa@7C26314E.4A024E9D.F35DA1C6.IP)
[18:22:44] *** kimundi is now known as zz_kimundi
[18:23:45] *** Joins: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca)
[18:24:07] *** Joins: FreeFull (freefull@moz-EFEF3DB5.as13285.net)
[18:24:46] *** Quits: dredozubov (dredozubov@2F14E2C1.F70E5FA9.F63E14E8.IP) (Input/output error)
[18:26:15] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[18:27:14] *** Joins: Ferreus (ferreus@moz-F041A174.pools.arcor-ip.net)
[18:32:23] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[18:32:42] *** Quits: bynaryshef (bynaryshef@moz-B4E38B6F.mem.bellsouth.net) (Quit: Leaving)
[18:33:48] *** Quits: abinader (abinader@16F1E95C.5F2797A0.B3575E10.IP) (Quit: abinader)
[18:34:32] *** Quits: refold (gman@moz-42D68426.a258.priv.bahnhof.se) (Quit: leaving)
[18:34:50] *** Joins: abinader (abinader@D8B9C081.E820043D.D4C04133.IP)
[18:36:25] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[18:36:39] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[18:37:32] *** Quits: _Vi (vi@527C345F.497AA854.B16B3BE6.IP) (Ping timeout)
[18:39:18] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:39:18] *** ChanServ sets mode: +ao brson brson
[18:40:43] *** Quits: mye (mye@moz-FCD0926C.dip0.t-ipconnect.de) (Quit: mye)
[18:42:03] *** Joins: jhasse (jhass_000@moz-F6FC55BD.ewe-ip-backbone.de)
[18:42:05] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[18:42:30] *** Quits: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP) (Ping timeout)
[18:44:29] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[18:44:29] *** ChanServ sets mode: +o jdm
[18:44:41] <jhasse> hi! I've created a patch, but the build bot says "some tests failed". When looking at the result of the bot I can't seem to figure out where the error is. Can someone help me out? https://github.com/mozilla/rust/commit/85d33a093aadfc47a859724f192563195d454e7b#commitcomment-4847316
[18:44:59] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[18:45:20] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:45:34] *** Joins: sarclops (sarclops@moz-14C9EE3A.zone8.bethere.co.uk)
[18:46:25] <sfackler> jhasse: bors broke last night and failed everything. someone will retry it once it's fixed
[18:46:25] <pcwalton> brson: r? https://github.com/mozilla/rust/pull/10929
[18:46:43] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:46:53] <jhasse> sfackler, ah okay. Thank you :)
[18:47:57] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[18:48:55] *** Quits: skade (skade@moz-E337FB02.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:49:10] *** Joins: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net)
[18:49:22] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[18:50:04] *** Joins: skade (skade@moz-E337FB02.pools.arcor-ip.net)
[18:50:39] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[18:51:18] <Yurume> SimonSapin, done! I have also updated the Big5 decoder for the updated standard (someone let me know).
[18:52:16] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[18:54:18] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[18:56:18] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[19:01:14] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[19:01:55] *** Joins: lbonn (lbonn@moz-FBFAA8BC.rev.sfr.net)
[19:03:35] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:04:12] *** Quits: oberstet (quassel@moz-4A0A874D.dynamic.mnet-online.de) (Client exited)
[19:05:27] *** Quits: heftig (heftig@moz-F1093399.dip0.t-ipconnect.de) (Ping timeout)
[19:06:02] *** Joins: lenstr (lenstr@801F0789.9636F313.7A27613B.IP)
[19:08:00] *** Joins: prooftechnique (prooftechn@moz-1C9C6B71.hsd1.vt.comcast.net)
[19:08:06] *** Quits: lbonn (lbonn@moz-FBFAA8BC.rev.sfr.net) (Quit: leaving)
[19:11:06] *** Joins: lbonn (lbonn@moz-FBFAA8BC.rev.sfr.net)
[19:13:56] *** Quits: sigma (sigma@moz-A17EB325.range86-184.btcentralplus.com) (Ping timeout)
[19:14:14] *** Joins: _Vi (vi@527C345F.497AA854.B16B3BE6.IP)
[19:14:46] *** Joins: sigma (sigma@moz-A17EB325.range86-184.btcentralplus.com)
[19:15:06] *** Joins: heftig (heftig@moz-DA33767F.dip0.t-ipconnect.de)
[19:15:09] *** Joins: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net)
[19:15:09] *** ChanServ sets mode: +ao dherman dherman
[19:17:23] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Ping timeout)
[19:17:52] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[19:18:42] *** Quits: balpert (balpert@moz-7E5ED302.members.linode.com) (Quit: leaving)
[19:22:23] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[19:27:07] *** Joins: jackneill (jackneill@moz-3C74D5A9.pool.digikabel.hu)
[19:27:22] <andreypopp> How do I specify type of field in struct to be C function?
[19:27:47] <cmr> andreypopp: a function pointer? extern "C" fn (...) -> ...;
[19:28:40] *** Quits: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca) (Quit: canhtak)
[19:28:42] <andreypopp> cmr: thanks, compiler prints "but found `extern "C" extern fn(...) -> ..." in error message
[19:29:28] <cmr> andreypopp: well the ... need to be real types, and you're doing something else wrong.
[19:29:47] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[19:30:04] <andreypopp> cmr: yeah, I just shortened the example, but note the "extern "C" extern" with double extern
[19:30:12] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Connection reset by peer)
[19:30:19] <cmr> yeah that's a bug, actually.
[19:30:24] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[19:30:35] <andreypopp> do I need to file an issue?
[19:30:43] <andreypopp> or this is well known?
[19:30:58] <cmr> please do file an issue
[19:31:00] <cmr> cc @cmr
[19:31:01] <andreypopp> ok
[19:32:11] <jvns> How can I read a series of bytes into a Rust struct? Like if I have a struct type with a 3 uints and a u32, to create a struct from 6 bytes
[19:32:47] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[19:32:48] <cmr> jvns: transmute to [u8, ..sizeof(struct)] and index?
[19:33:19] *** Quits: doomlord__ (servitor@moz-D40D68D6.range86-184.btcentralplus.com) (Quit: Leaving)
[19:33:35] *** Joins: azita (Azita@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[19:33:38] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[19:33:56] <jvns> cmr: hmm I don't understand why transmute is unsafe exactly
[19:34:14] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Quit: buildmaster reconfigured: bot disconnecting)
[19:34:39] <cmr> jvns: well, for one the alignment could be off. two, it lets you cast any type to any other type (of the same size)
[19:34:45] <cmr> which is not type safe
[19:35:35] <jvns> oh I guess you could create invalid `str`s pretty easily
[19:36:01] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[19:36:10] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[19:36:10] *** ChanServ sets mode: +o tjc
[19:36:18] <cmr> ... or cast from, say, RWArc to ~Foo
[19:36:42] *** Joins: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca)
[19:36:49] <cmr> and then call ~Foo methods on it
[19:37:03] *** Quits: Earnestly (earnest@88884C6.A3735F9C.39C00A7A.IP) (Ping timeout)
[19:39:38] <andreypopp> ok, one more silly question, how do I initialise static var with *c_char ?
[19:40:02] <andreypopp> how do I create *c_char to store it in static var to rephrase
[19:40:19] <andreypopp> "string".to_c_str().unwrap() doesn't work
[19:41:31] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[19:42:30] <sfackler> you can do something like "bytes!("string", 0);"
[19:42:44] <cmr> no, that won't be a *c_str
[19:42:59] <cmr> or maybe bytes!(...) as *c_str?
[19:43:20] *** Quits: nkoep (nik@moz-B7F530F4.vpn.rwth-aachen.de) (Ping timeout)
[19:43:44] <jvns> oh man I think I just understood safety
[19:44:06] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[19:44:15] <jvns> there's tons of code you can write with transmute that is safe, so you can wrap it in an unsafe{} block
[19:44:29] <bblum> cmr: casting a rwarc to a ~foo would just make it crash
[19:44:33] <bblum> it wouldn't do anything clever :P
[19:44:40] <cmr> bblum: yes, I know, that's my point.
[19:44:50] <bblum> oh sure
[19:44:58] <cmr> that's why transmute is unsafe
[19:45:11] <bblum> if you cast it to a struct { ...some padding..., ~Foo }
[19:45:23] <bblum> ;)
[19:45:41] <cmr> isn't RWArc just a *RWArcInner<T> ?
[19:45:49] <andreypopp> bytes! returns vector...
[19:45:57] <bblum> yeah it's something
[19:46:03] * cmr shrugs
[19:46:04] <bblum> there are probably two pointer indirections
[19:46:15] <cmr> point is, not sane
[19:46:38] <bblum> jvns: yes, the way i think about it is, the runtime + libraries + any code you write inside "unsafe { }" is the "trusted code base" and the goal is to make that as small as possible
[19:46:52] <bblum> (that being the part you have to manually audit for safety)
[19:47:48] <jvns> so do you find it clear in general when you need to mark code unsafe?
[19:47:56] <jvns> is it easy to make mistakes when manually auditing?
[19:48:29] <cmr> the compiler will tell you when code needs to be unsafe :p
[19:48:37] <jvns> well, sure
[19:48:39] <cmr> anything dereferencing *-ptrs or calling a function marked unsafe
[19:48:39] <bblum> nah, the compiler can only hint at that
[19:49:05] <bblum> (by which i mean, there may be a safe way to do it that you haven't discovered)
[19:49:06] <bblum> after working with rust for a while i sort of developed an intuition for what the language is capable of doing vs when you should use unsafe
[19:49:18] <jvns> so like for example right now I want to write some code that parses an ELF file and runs it 
[19:49:50] <bblum> yeah the fundamentally unsafe operation there is taking strings and interpreting them as code
[19:50:05] <jvns> yeah like I need to jump to an address in memory
[19:50:15] <bblum> pretty high up on the unsafety spectrum :P
[19:50:21] *** Quits: blank_name (blank_name@F62A39BD.9E887BEB.53C6B850.IP) (Quit: leaving)
[19:50:30] <jvns> so I need to figure out how to not make *all* my code unsafe
[19:50:35] <bblum> (the idea of writing a javascript engine in rust has the same problem, with jitting)
[19:50:37] <jvns> and keep some boundaries
[19:51:04] <jvns> anyway I guess I'll just start doing it and see what happens :)
[19:51:50] <bblum> as for the second question, on auditing, it depends what you are using unsafe for 
[19:52:18] <bblum> like when writing concurrency libraries it's challenging to work out all the race conditions and so forth
[19:52:39] <bblum> to audit an ELF loader... would be impossible :P
[19:52:57] <bblum> unless you had some sort of proof-carrying system by which the elves could certify their own safety before you would execute them
[19:53:17] <jvns> yeah, definitely not 
[19:53:18] <bblum> (there's a project at cmu that has to do with this, concertOS)
[19:53:20] * pcwalton submits that to the quote database
[19:53:21] *** Quits: andreypopp (andreypopp@moz-7261DC60.net) (Ping timeout)
[19:53:27] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[19:53:55] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[19:54:19] <jvns> so I'll pretty much have "unsafe run_elf{addr: *mut u8, length: uint}"
[19:54:38] <jvns> (it's not actually an ELF file, it's just some bytes somewhere in memory that I want to jump to)
[19:54:47] *** Joins: andreypopp (andreypopp@moz-7261DC60.net)
[19:54:52] <bblum> that seems like an appropriate use of unsafe to me :P
[19:54:55] <jvns> :)
[19:55:03] *** Quits: alan (alan@moz-FE02DD30.sat6.rackspace.com) (Ping timeout)
[19:55:15] <brson> psa. remember to sign up for tuesday's meetup. it's approaching fast. http://www.meetup.com/Rust-Bay-Area/events/153010612/
[19:55:39] <Jarrett> ew steve
[19:56:02] *** Joins: alan (alan@32702EE8.939109B2.FB082A98.IP)
[19:56:07] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Ping timeout)
[19:57:08] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[19:57:42] *** Joins: hacker_sam (hacker_sam@moz-2B24E694.public.wayport.net)
[19:57:43] *** jorendorff_away is now known as jorendorff
[19:58:19] <bblum> jvns: btw, a friend of mine who also TAed CMU's operating systems class and i were discussing your blog posts and thought you might find the class's starter code to be a useful resource
[19:58:31] <jvns> bblum: do you have a link?
[19:58:31] <bblum> i dunno if he already linked you to it but in case he did not
[19:58:35] *** Joins: blank_name (blank_name@F62A39BD.9E887BEB.53C6B850.IP)
[19:58:38] <bblum> yeah
[19:58:41] <cmr> I sat in on the OS class during the sleeping bag weekend
[19:58:54] <cmr> probably the most informative and interesting 45 minets of my life
[19:58:55] <bblum> http://www.cs.cmu.edu/~410/p4/proj4.tar.gz , and then run "./update.sh web"
[19:59:27] <bblum> the kernel-level headers will appear in 410kern/
[20:00:15] <bblum> of course this is all C, but it has stuff like #defines of x86-hardware-related constants and so forth
[20:00:29] <jvns> cool, thanks!
[20:00:32] <bblum> no prob
[20:00:53] *** Joins: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP)
[20:00:55] <bblum> cmr: yeah i know several students for whom watching 410 lecture was a huge factor in their decision to come here
[20:01:05] <bblum> i did not know about it before i got here myself
[20:01:09] <jvns> oh this is super neat
[20:01:11] *** Joins: ianj (ianjneu@moz-7140CF01.ccs.neu.edu)
[20:01:35] *** Joins: samx (sami@3EB32A7C.10A53EE3.77834EAA.IP)
[20:01:37] <jvns> I don't think I'm going to have time to implement virtual memory right now, but maybe I will!
[20:02:02] *** Joins: nkoep (nik@moz-CD47E784.pool.mediaways.net)
[20:02:15] <jvns> I decided to go the route of "just start running programs" instead of memory safety / paging / virtual memory or anything
[20:02:48] *** Quits: kzzch (Mibbit@moz-991A24E8.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[20:03:03] *** Quits: blank_name (blank_name@F62A39BD.9E887BEB.53C6B850.IP) (Quit: leaving)
[20:03:12] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[20:03:55] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:04:42] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[20:04:54] *** Joins: rca_ (rcatolino@moz-77494259.adsl.proxad.net)
[20:05:19] *** Joins: kzzch (kzzch@moz-991A24E8.hsd1.va.comcast.net)
[20:05:42] *** Quits: samx (sami@3EB32A7C.10A53EE3.77834EAA.IP) (Quit: This computer has gone to sleep)
[20:05:45] *** Quits: markov_twain (markov_twa@7C26314E.4A024E9D.F35DA1C6.IP) (Ping timeout)
[20:05:52] *** Joins: samx (sami@3EB32A7C.10A53EE3.77834EAA.IP)
[20:06:06] *** Joins: blank_name (blank_name@F62A39BD.9E887BEB.53C6B850.IP)
[20:06:11] *** Quits: samx (sami@3EB32A7C.10A53EE3.77834EAA.IP) (Quit: This computer has gone to sleep)
[20:06:18] *** Quits: rca (rcatolino@moz-E0992404.adsl.proxad.net) (Ping timeout)
[20:06:33] *** Joins: Earnestly (earnest@88884C6.A3735F9C.39C00A7A.IP)
[20:07:21] <carter> hey all, is head currently broken?
[20:07:26] <carter> i'm trying to build it on my mac
[20:07:30] <carter> it worked earlier this week
[20:07:39] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[20:07:48] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:10:14] *** Joins: mikezaby (mikezaby@moz-4BF6308B.home.otenet.gr)
[20:10:18] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[20:10:20] *** Parts: mikezaby (mikezaby@moz-4BF6308B.home.otenet.gr) ()
[20:10:48] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[20:10:51] <Jarrett> I built head yesterday, two commits ago, and it worked for me
[20:11:02] *** Quits: skade (skade@moz-E337FB02.pools.arcor-ip.net) (Quit: Textual IRC Client: www.textualapp.com)
[20:11:03] <achin> ive built on osx in the past 24 hours and jt was fine
[20:12:04] <carter> ok
[20:12:18] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Connection reset by peer)
[20:12:20] <carter> well, i just posed a ticket https://github.com/mozilla/rust/issues/10941
[20:12:24] <carter> *posted
[20:12:33] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[20:12:55] <carter> could it be the config of the in tree llvm is wrong?
[20:13:50] <achin> did you start with a clean tree?
[20:13:53] <carter> i just did ./configureyes
[20:13:53] *** Joins: markov_twain (markov_twa@7C26314E.4A024E9D.F35DA1C6.IP)
[20:13:55] <carter> yes
[20:14:03] <achin> (make clean)
[20:14:15] <carter> just did that
[20:14:27] <carter> then rerun ./configure ; make -j2 ?
[20:14:30] <carter> or no -j?
[20:14:37] <carter> i was doing it as a parallel build
[20:14:49] <carter> though, I did kill the build at once point and restarted it
[20:15:00] <carter> so maybe there was some dirty state and it didn't build something correclty
[20:15:09] <carter> i do it sans -j
[20:15:14] <carter> *I'll
[20:15:37] <carter> it could totally be that
[20:15:43] <carter> i'll test and find out
[20:16:06] <cmr> bblum: well, I would have went if they accepted me ;p
[20:16:20] <bblum> cmr: ahhh, bummer
[20:16:30] <cmr> Maybe for grad school!
[20:16:59] <bblum> yep!
[20:17:32] <carter> cmr: eh?
[20:17:51] *** Quits: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com) (Ping timeout)
[20:18:12] *** Joins: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com)
[20:18:12] <achin> im rebuilding now to test again
[20:18:30] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[20:19:22] *** Quits: lenstr (lenstr@801F0789.9636F313.7A27613B.IP) (Ping timeout)
[20:19:50] <carter> could it have been that i killed the make part way through, then resumed it again?
[20:20:06] <carter> nb: i'm really good at accidentally having weird bugs like this
[20:21:08] <achin> maybe, but a make clean would have fixed any issues
[20:23:07] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[20:23:22] *** Quits: jhasse (jhass_000@moz-F6FC55BD.ewe-ip-backbone.de) (Quit: Verlassend)
[20:23:45] <carter> i'll let you know if its resolved
[20:23:47] <carter> or not
[20:26:02] *** Joins: Jesin (Jesin@moz-63C897DA.res.lehigh.edu)
[20:26:24] *** Joins: overfl0w (overfl0w@moz-66117C58.range109-155.btcentralplus.com)
[20:28:57] *** Quits: Iceland_jack (user@moz-E4C53E7B.sudo.is) (Ping timeout)
[20:32:38] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[20:33:38] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[20:33:41] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:34:31] *** Joins: samx (sami@3EB32A7C.10A53EE3.77834EAA.IP)
[20:35:57] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[20:36:07] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[20:36:34] *** Joins: alan_ (alan@moz-FE02DD30.sat6.rackspace.com)
[20:37:28] *** Quits: alan (alan@32702EE8.939109B2.FB082A98.IP) (Ping timeout)
[20:37:29] *** alan_ is now known as alan
[20:38:28] *** Quits: hacker_sam (hacker_sam@moz-2B24E694.public.wayport.net) (Client exited)
[20:39:25] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[20:41:30] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[20:41:53] *** Quits: paulproteus (quassel@199.199.210.158) (Ping timeout)
[20:45:26] *** Joins: paulproteus (quassel@458FE134.3EC36C88.CBDCF1DC.IP)
[20:45:33] *** Quits: azita (Azita@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: azita)
[20:45:52] *** Joins: lenstr (lenstr@23C3D5E9.9636F313.7A27613B.IP)
[20:47:39] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[20:47:54] *** Quits: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com) (Ping timeout)
[20:48:12] *** Joins: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com)
[20:48:22] *** Joins: hacker_sam (hacker_sam@moz-2B24E694.public.wayport.net)
[20:50:46] *** Joins: sprang (sprang@moz-824FD61F.hsd1.ca.comcast.net)
[20:51:55] *** Quits: Kruppe (user@moz-5B035CE8.net.uwaterloo.ca) (Client exited)
[20:52:50] *** Parts: w3lcome (Mibbit@moz-E9ABA59E.home.otenet.gr) ()
[20:53:37] <jvns> How do I read files in Rust?
[20:54:01] <jvns> it seems like the docs suggest "go to #rust and ask" :)
[20:54:04] <cmr> jvns: https://github.com/cmr/rust-examples/blob/master/file.rs
[20:54:10] <cmr> jvns: a bit out of date
[20:54:14] <cmr> but that's basicaly it
[20:54:44] <jvns> oh, I like this repo!
[20:55:00] <cmr> I should probably maintain it!
[20:55:10] <jvns> it would be cool if you could get the Rust buildbot to check the examples when Rust is updated
[20:55:19] <jvns> probably too much work
[20:55:19] <cmr> that's what rust-ci does.
[20:55:20] <jvns> but cool
[20:55:26] <cmr> (with travis)
[20:55:52] <jvns> for your rust-examples repo?
[20:55:55] <cmr> yeah
[20:55:57] <cmr> well
[20:55:59] <cmr> I should add it
[20:56:01] <cmr> but that's what it does in general
[20:56:46] <jvns> cool
[20:57:06] *** Quits: anri (koz@moz-E49E7C4B.hsd1.wa.comcast.net) (Quit: anri)
[20:57:07] <jvns> meanwhile I can figure out how to change the file example so that it compiles =)
[20:58:36] <cmr> wow
[20:58:42] <cmr> four line change
[20:59:48] *** Quits: overfl0w (overfl0w@moz-66117C58.range109-155.btcentralplus.com) (Quit: WeeChat 0.4.2)
[21:00:15] *** Joins: killerswan (kevin.cant@moz-AC4CA16D.hfc.comcastbusiness.net)
[21:01:49] *** Quits: killerswan (kevin.cant@moz-AC4CA16D.hfc.comcastbusiness.net) (Quit: Leaving)
[21:01:57] *** Joins: killerswan (kevin.cant@moz-AC4CA16D.hfc.comcastbusiness.net)
[21:02:55] *** Quits: Ms2ger (Ms2ger@moz-97D6582B.adsl-dyn.isp.belgacom.be) (Quit: nn)
[21:04:27] *** zz_kimundi is now known as kimundi
[21:05:23] <eddyb> there's ~8 PRs above me...
[21:05:57] <eddyb> cmr: by the time I leave IRC tomorrow, my small `finally` change will maybe make it through
[21:07:05] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[21:07:05] *** ChanServ sets mode: +o tjc
[21:07:41] *** Quits: hacker_sam (hacker_sam@moz-2B24E694.public.wayport.net) (Client exited)
[21:08:23] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Client exited)
[21:09:52] *** Quits: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP) (Client exited)
[21:09:54] <cmr> eddyb: I'd give you a p=1 but honestly I don't think it's that important, except compared to the typo fix, but that's not worth giving everything in the queue a priority...
[21:09:57] <achin> carter: i can confirm the latest master branch builds cleanly on my OSX machine
[21:10:37] <eddyb> cmr: nah, don't worry
[21:11:14] *** Joins: derek_c (derek@moz-CFC283A2.cit.cornell.edu)
[21:11:34] *** Quits: fabiand (fabiand@moz-6780914F.adsl.alicedsl.de) (Quit: Verlassend)
[21:11:39] <eddyb> cmr: I'm just a little bummed that it takes 3 days. no better time for bors to break than when I made a 1-line addition (+benchmarks)
[21:11:41] *** Joins: fabiand (fabiand@moz-6780914F.adsl.alicedsl.de)
[21:12:18] *** Quits: fabiand (fabiand@moz-6780914F.adsl.alicedsl.de) (Quit: Verlassend)
[21:12:23] * cmr remembers when a bors cycle was 15 minutes
[21:12:31] * cmr also remembers the frequent tree explosions
[21:13:07] <eddyb> 15 o_O
[21:13:13] *** Quits: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net) (Quit: Leaving.)
[21:13:26] <eddyb> cmr: well, good night, I'll be sleeping on that thought
[21:13:42] <jvns> why does format_args! have `format` as its first argument? `format_args!(format, "{}", 23)`
[21:14:01] <eddyb> jvns: it's a function, AFAIK
[21:14:03] <cmr> jvns: it's the formatter it uses.
[21:14:11] <cmr> jvns: why aren't you using format!() ?
[21:14:16] <jvns> what other formatter could it use?
[21:14:26] <jvns> cmr: because that's the example at http://static.rust-lang.org/doc/0.8/std/fmt/fn.format.html
[21:14:35] <eddyb> write! and print! have different formatters
[21:14:37] <eddyb> jvns: old docs
[21:14:47] <jvns> new docs are the same
[21:14:54] <eddyb> well, link the right ones :P
[21:14:58] <jvns> :)
[21:14:58] <jvns> http://static.rust-lang.org/doc/master/std/fmt/fn.format.html
[21:15:09] <jvns> cool
[21:15:14] <jvns> I'll use format!, then
[21:15:20] <jvns> oh but there's also print!
[21:15:23] <jvns> maybe that's what I want
[21:15:43] * jvns discovers println!
[21:16:10] <cmr> jvns: I just updated rust-examples
[21:16:36] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[21:16:57] <jvns> cmr: amazing, thanks!
[21:17:16] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[21:18:44] <cmr> jvns: if you have any examples, feel free to askme to add them or to send a PR
[21:20:09] <jvns> cmr: will do
[21:21:50] *** Quits: sam113101 (sam113101@moz-83612DFD.us-west-2.compute.amazonaws.com) (Quit: ZNC - http://znc.in)
[21:22:19] *** Joins: sam113101 (sam113101@moz-83612DFD.us-west-2.compute.amazonaws.com)
[21:22:53] <ChrisMorgan> Rust used to produce a binary named `codegen` for rust-http's src/codegen/main.rs, which has #[link(name = "codegen")]. Now it's producing `main`. How do I specify it now? Is it a #[pkgid] thing?
[21:23:03] <cmr> ChrisMorgan: yes
[21:23:53] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Quit: buildmaster reconfigured: bot disconnecting)
[21:24:15] <ChrisMorgan> Is #[link(package_id)] used any more?
[21:24:24] <cmr> not afaik
[21:24:39] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[21:25:28] <jvns> is there any way around having to write ('c' as u8) when I want the byte for 'c'?
[21:25:44] <cmr> jvns: bytes!("c")
[21:25:49] <cmr> but no not really
[21:26:16] <ChrisMorgan> At some time, 'c'u8 will probably be added as syntax for it.
[21:26:23] <jvns> oh that would be nice
[21:28:12] *** Joins: Kruppe (user@moz-FAC3965A.net.uwaterloo.ca)
[21:28:27] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:28:33] <jvns> is there a way to print a string representation of something?
[21:28:37] <jvns> like if I have an array
[21:29:22] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[21:29:29] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[21:29:37] <ChrisMorgan> cmr: or #[link(vers)]?
[21:29:38] <sp3d> jvns: there's the {:?} format?
[21:29:49] <cmr> ChrisMorgan: everything is taken from the package id
[21:29:57] <jvns> sp3d: excellent! thanks =)
[21:30:36] <ChrisMorgan> What's the current package ID syntax? (Is it documented anywhere?)
[21:31:04] <cmr> it's a url
[21:31:08] <cmr> sans protocol
[21:31:24] <cmr> foo/bar/shortname#version
[21:31:45] <bstrie> reading php documentation is akin to reading the necronomicon
[21:32:14] <bstrie> I'm convinced that rust will fail, beacuse it just makes too much sense
[21:32:39] <cmr> ghuuuuuuhhhhhhhhhh
[21:32:42] <bstrie> seriously, since when has sanity ever been correlated with popularity
[21:32:51] <cmr> I couldn't log into travis because my browser wasn't wide enough
[21:32:59] <bstrie> hahaha
[21:33:02] <cmr> and the button was offscreen :|}
[21:33:06] <cmr> -}
[21:33:10] <ChrisMorgan> Travis is a memory hog, too.
[21:33:15] <cmr> yeah
[21:33:26] <cmr> it's bringing my netbook to its knees
[21:34:06] <ChrisMorgan> I don't open it more often than is necessary. And that tends to be "when the build fails and I don't happen to have an up-to-date copy of Rust myself".
[21:34:16] <achin> needs more clloouuuuddd power
[21:35:09] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[21:35:24] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[21:35:32] <ChrisMorgan> There, rust-http fixed for new pkgid stuff.
[21:36:00] <ChrisMorgan> But on a serious note: I don't find pkgid documented anywhere. This is concerning.
[21:36:05] <cmr> yeah
[21:39:14] <cmr> jack didn't write any docs :(
[21:39:38] <jack>  where should i put them?
[21:39:42] <jack> i can do that right now
[21:39:47] <ChrisMorgan> Somewhere. Anywhere! :-)
[21:39:50] <cmr> doc/rust.md
[21:39:57] <cmr> that'd be great :D
[21:40:12] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[21:40:21] <bstrie> jack: unless you'd rather share nmatsakis' fate, and be ready to answer questions personally for the rest of your life
[21:41:29] *** Joins: hacker_sam (hacker_sam@moz-2B24E694.public.wayport.net)
[21:42:06] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[21:43:41] *** Joins: bytewise (bytewise@moz-54D5CB49.adsl.alicedsl.de)
[21:44:02] <brson> A mailing list post may be appropriate too
[21:44:17] *** Quits: jvshahid (jvshahid@BE83DFD.50866E69.CA2DF2C0.IP) (Ping timeout)
[21:44:27] <brson> jack: have you had the opportunity to make those additional modifications to pkgid?
[21:44:38] <brson> i was thinking that pkgid may make more sense as crateid though
[21:44:51] <brson> not sure what the difference is. it seems to be id'ing a crate
[21:45:06] *** Quits: lfox (lfox@moz-B8648F0F.nycmny.fios.verizon.net) (Quit: ZZZzzz…)
[21:46:33] *** Quits: dbaupp (Thunderbir@moz-EB2EFE6F.lns20.syd6.internode.on.net) (Ping timeout)
[21:47:01] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[21:47:52] *** Quits: colinsurprenant (colin@F692E1FE.8D7057CF.30F15291.IP) (Quit: colinsurprenant)
[21:49:08] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[21:49:31] *** Joins: colinsurprenant (colin@F692E1FE.8D7057CF.30F15291.IP)
[21:49:37] <SiegeLord> Is the story for multi crate packages still non-existent?
[21:50:35] *** Joins: nejucomo (Adium@3BE40EE1.BB950596.DFB232DA.IP)
[21:53:37] *** Joins: eholk (eholk@moz-C7FD6CFF.public.wayport.net)
[21:54:20] *** Quits: samx (sami@3EB32A7C.10A53EE3.77834EAA.IP) (Quit: This computer has gone to sleep)
[21:54:33] <jack> brson: working on those, but haven't finished yet.
[21:54:41] <jack> brson: updating docs right now.
[21:54:54] <brson> jack: ok. thanks
[21:55:36] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[21:55:45] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:55:58] *** Quits: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net) (Quit: dherman)
[21:56:22] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[21:57:15] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[21:57:16] *** ChanServ sets mode: +o tjc
[21:59:15] *** Joins: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net)
[21:59:42] *** Quits: hacker_sam (hacker_sam@moz-2B24E694.public.wayport.net) (Ping timeout)
[22:00:07] <brson> SiegeLord: yes, I think so
[22:00:39] *** Joins: hacker_sam (hacker_sam@moz-2B24E694.public.wayport.net)
[22:01:10] <carter> achin: i'm doing a wiped build without make -j2
[22:01:17] <carter> i'll let you know if it fails
[22:01:24] <carter> i suspect its the -j2 thats the issue
[22:01:26] <aatch> bstrie, if you think reading the PHP docs is bad, try reading the source...
[22:01:57] <achin> carter: ok
[22:02:21] *** Quits: hacker_sam (hacker_sam@moz-2B24E694.public.wayport.net) (Client exited)
[22:02:41] *** Quits: sully (sully@moz-45967CBE.emarhavil.com) (Quit: leaving)
[22:02:53] *** Joins: sully (sully@moz-45967CBE.emarhavil.com)
[22:04:11] *** Quits: Kruppe (user@moz-FAC3965A.net.uwaterloo.ca) (Ping timeout)
[22:06:50] <achin> carter: also, i am on 10.9.  you are on 10.8.  i'm not sure if that is relevant
[22:07:00] <carter> achin: unlikely
[22:07:30] <carter> achin: i spent a LOT of time understanding the 10.8 -> 10.9 changes for haskell land and making sure that people knew how to work aroudn stuff there
[22:07:43] <carter> the linking error here seems more like a race condition somehow
[22:07:48] <jack> SiegeLord: I suspect the change to pkgid that i'm working on may allow multi-crate packages.
[22:07:49] <carter> that someting just wan't built
[22:08:08] <carter> achin: realtedly: is there any way to make the llvm build step parallel?
[22:08:19] <cmr> -j8
[22:08:21] <cmr> or whatever
[22:08:21] <carter> im pretty sure llvm doesn't take this long to build on its own
[22:08:28] <achin> that is far outside of my realm of expertise
[22:08:44] <carter> cmr: yes, but the top level make didn't seem to do that when I tried… 
[22:08:46] <carter> i could be wrong
[22:08:58] <carter> i'm doing a sequential build right now to see if that works
[22:09:39] <achin> you might be right, carter.  i once saw a problem with -j2, and i tend to build with -j1 
[22:09:56] <carter> races in rust! :P
[22:10:10] <carter> ghc had a weird race condition in the build
[22:10:20] <carter> at one point
[22:10:29] <carter> where you'd have to run it again to get it to finish
[22:10:33] <achin> if there is a parallel build issue, it must be OSX specific?  i find it hard to believe that no one else has noticed this?
[22:10:34] <carter> that didn't seem to work here
[22:10:44] <carter> how many people are compiling on a macbook air?
[22:11:14] <achin> i dunno, but there's enough people using rust that i *know* at least 1 person does parallel builds on linux
[22:11:40] <carter> yes, but thats not the os in question
[22:12:03] <achin> that was my point
[22:12:08] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[22:12:18] *** Joins: mib_0kxij3 (Mibbit@moz-CBD76C21.bb.online.no)
[22:12:38] *** Joins: mib_l39p9n (Mibbit@moz-68235C3E.customer.broadstripe.net)
[22:12:49] *** Quits: markov_twain (markov_twa@7C26314E.4A024E9D.F35DA1C6.IP) (Ping timeout)
[22:12:54] <carter> i've a odd history of finding os x related linking / compilating woes related to the tools i'm using
[22:12:55] <carter> :)
[22:14:16] *** Quits: nejucomo (Adium@3BE40EE1.BB950596.DFB232DA.IP) (Quit: Leaving.)
[22:14:39] *** Quits: Blei (philipp@moz-B2F9E4BD.cust.bluewin.ch) (Quit: WeeChat 0.4.2)
[22:15:24] <mib_l39p9n> is there an offline/cli version of the rust docs? http://static.rust-lang.org/doc/master/std/index.html
[22:15:34] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:15:41] <cmr> mib_l39p9n: make docs builds them locally.
[22:15:43] <achin> "make docs" i think will build them?
[22:15:56] <cmr> I'm working on man page output right now.
[22:16:20] <jack> cmr: Do you want to have a look at https://github.com/mozilla/rust/pull/10944 ?
[22:16:37] <jack> I'm not sure I got everything, but I searched around pretty good :)
[22:17:47] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[22:17:47] *** ChanServ sets mode: +ao dherman dherman
[22:17:55] <carter> hello dherman !
[22:18:02] <cmr> jack: is the extern mod bit correct?
[22:18:15] <cmr> `extern mod a = "b/c/d"` being "a/b/c/d" looksvery wrong to me
[22:18:26] <dherman> carter: hi!
[22:18:27] <dherman> carter: @cartazio I presume?
[22:18:27] *** Quits: Ferreus (ferreus@moz-F041A174.pools.arcor-ip.net) (Quit: WeeChat 0.4.2)
[22:18:29] <carter> yes
[22:18:36] <carter> couldn't get @carter on twitter
[22:18:40] <carter> or github
[22:18:41] <dherman> nice, haven't seen you since you were in high school I think!
[22:18:46] <carter> early undergrad
[22:18:53] <dherman> ah
[22:18:54] <carter> but yeah
[22:19:01] <jack> cmr: i didn't change much about that other than to make it more clear. I don't think rustc cares about RUST_PATH currently
[22:19:14] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[22:19:27] *** Joins: markov_twain (markov_twa@7C26314E.4A024E9D.F35DA1C6.IP)
[22:19:27] <carter> dherman: so I have something i'd like to try to hack out for rust that requires touching both the type system and the code gen that you may find interesting
[22:19:28] <jack> but if it did, then it wouldu look in a/lib/${ARCH}/b/c/d
[22:19:39] <jack> maybe that whole para should be deleted.
[22:19:46] <dherman> carter: do tell
[22:20:04] <cmr> jack: I didn't think the in-crate name had any meaning at all, just like `use x = y;` ...
[22:20:13] <cmr> jack: it probably should be, yeah
[22:20:39] <carter> dherman: soo, the big picture is this: SIMD is only super useful if you can use all the awesome vector shuffle/permuation/interleave  operations
[22:21:13] <carter> for pretty much every arch i've seen, the shuffle "schedule" of the underlying instructure needs to be an immediate value in asm instruction
[22:21:51] <carter> so any higher level lang needs to have a way of enforcing that the shuffle schedule part of a shuffle operation is a compile time known literal value
[22:21:55] <carter> so that the code gen can work
[22:22:38] <jack> cmr: just repushed
[22:22:51] <carter> dherman: llvm has an intrinsic for choosing the right sequence of simd ops for your arch http://llvm.org/docs/LangRef.html#shufflevector-instruction
[22:23:30] <cmr> jack: thanks :)
[22:23:41] <dherman> not 100% sure I follow... is the idea basically that you want a parametric shuffle operation, but it needs to be instantiated with concrete constants in order to compile to actual SIMD instructions ?
[22:23:46] <carter> yes
[22:23:48] <dherman> ok
[22:24:02] <carter> so you need to have a wee type extension to say "this argument needs to be a constantl literal"
[22:24:15] <carter> and maybe a wee syntatic way of checking that and validating it as part of type checking
[22:24:22] <dherman> you could imagine that enforced in a couple ways
[22:24:25] <carter> yeah
[22:24:27] <cmr> We already have the means to enforce constexprs, it's used in fixed-length vectors.
[22:24:33] <carter> oh?
[22:24:34] <dherman> could be a syntactic restriction rather than a type concept
[22:24:40] <cmr> (though it's quite conservative in what it accepts)
[22:24:42] <dherman> oh yeah
[22:24:43] *** Joins: azita (Azita@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[22:24:53] <carter> dherman: yes, but then then you can't have a way for adding other such operations
[22:24:58] *** Quits: markov_twain (markov_twa@7C26314E.4A024E9D.F35DA1C6.IP) (Quit: WeeChat 0.4.2)
[22:25:04] *** Quits: Kxepal (Miranda@moz-6A3B3028.pppoe.mtu-net.ru) (Ping timeout)
[22:25:05] <carter> like prefetch!
[22:25:15] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: sw17ch)
[22:25:45] <carter> prefetch takes several args that need to be fixed at compile time too
[22:25:57] <cmr> it should just be a syntax extension I think.
[22:26:08] <carter> yeah
[22:26:16] <carter> but you still need to give the operation a type
[22:26:23] <carter> even if you syntatically validate the argument
[22:26:55] <dherman> oh
[22:26:57] <dherman> IOW
[22:27:04] <dherman> if you have a new syntax form, you need a new type rule
[22:27:06] <dherman> film at 11
[22:27:07] <dherman> :)
[22:27:11] <carter> oh yeah
[22:27:22] <carter> fact
[22:27:31] *** Quits: abinader (abinader@D8B9C081.E820043D.D4C04133.IP) (Quit: Fui!)
[22:27:35] <carter> its just a slightly nonstandard typing rule
[22:27:38] <dherman> I suppose that's not *necessarily* true, see also, macros
[22:27:44] <carter> yeah
[22:27:49] <cmr> the syntax ext can't generate the proper type from the args?
[22:27:50] <dherman> carter: you should try writing up an RFC and posting to the list
[22:27:55] <carter> ok
[22:27:57] *** Joins: brendan (brendaneic@777B9EEC.C030CAFC.1EF54B18.IP)
[22:27:58] <cmr> by syntax ext I mean procedural macro
[22:28:38] <dherman> if your syntax extension can simply expand into different forms with different result types it may not require new type rules
[22:29:02] <carter> dherman: you mean me or cm?
[22:29:17] <cmr> if it's at all possible without touching the type system, I'd rather we do that.
[22:29:19] <dherman> either?
[22:29:25] <dherman> cmr: right
[22:29:29] <dherman> carter: what I mean is,
[22:29:39] <dherman> you should try to see if it can be done with as few changes to the language as possible
[22:29:43] <carter> yes
[22:29:46] <dherman> if it can be done as a macro, that seems ideal
[22:29:51] <dherman> even if ultimately it wants builtin syntax
[22:29:59] <dherman> that proves it's a minimal extension to the language
[22:30:05] <dherman> "macro-expressible" in the felleisen sense :)
[22:30:22] *** Quits: AvianFlu_ (AvianFlu@moz-723527FF.nycmny.fios.verizon.net) (Input/output error)
[22:30:27] <carter> dherman: i'd probably want to have a wee special macro that checks if its arg is syntactially a literal 
[22:30:57] <carter> Literal! :: a -> ConstLiteral a
[22:30:57] <dherman> cmr: can a syntax extension do that kind of checking?
[22:31:00] <cmr> (it'd probably end up being builtin anyway, since it'd want lang items instead of depending on libstd)
[22:31:09] <cmr> dherman: depends on what one wants to allow.
[22:31:25] <cmr> for simple definitions of literal, yes.
[22:31:34] *** Joins: gwty_ (gwtypc@F0223657.EF114143.217E1206.IP)
[22:31:38] <cmr> it's not possible if one wants CTFE
[22:31:43] <carter> ctfe?
[22:31:46] <cmr> (once we eventually have it)
[22:31:48] <dherman> compile-time function evaluation
[22:31:49] *** Quits: lenstr (lenstr@23C3D5E9.9636F313.7A27613B.IP) (Client exited)
[22:31:55] *** Quits: gwty (gwtypc@322EAEF3.E0A5EE90.D6324C7.IP) (Ping timeout)
[22:31:55] <carter> i don't care about that
[22:31:58] <carter> :)
[22:32:12] <dherman> cmr: post 1.0 we want more general compile-time evaluation, and in a way that's compatible with the macro system
[22:32:23] <cmr> you sure do if you only want to allow constexprs. anything less is a crude approximation of them!
[22:32:36] <cmr> but yeah if you just accept numeric literals like llvm it's smiple.
[22:32:49] <dherman> carter: anyway, I fully support this experiment! I'd consider writing an RFC, and it seems like people like cmr will be better than me at helping you build something
[22:33:01] <dherman> I just pretend to know anything about rust
[22:33:02] <dherman> ;-P
[22:33:21] <cmr> carter: you should also talk to strcat when he's around.
[22:33:27] <carter> ok
[22:33:40] *** Joins: nejucomo (Adium@moz-B62B9944.public.monkeybrains.net)
[22:33:40] <cmr> but I agree it'd be great to have
[22:34:00] <carter> great
[22:34:02] <dherman> you might chat with nmatsakis too
[22:34:07] <dherman> he thinks about simd a lot
[22:34:19] <dherman> more in the js part of his job, but he thinks about simd and he thinks about rust
[22:34:40] *** Quits: eholk (eholk@moz-C7FD6CFF.public.wayport.net) (Quit: eholk)
[22:34:42] <bjz> carter: and pcwalton thinks about CTFE
[22:34:45] <bjz> :P
[22:34:48] *** Quits: kzzch (kzzch@moz-991A24E8.hsd1.va.comcast.net) (Quit: leaving)
[22:34:51] *** Joins: lenstr (lenstr@23C3D5E9.9636F313.7A27613B.IP)
[22:34:59] <cmr> really just send an RFC...
[22:35:12] <carter> ok
[22:35:14] <dherman> haha
[22:35:15] <dherman> yeah
[22:35:31] *** Joins: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net)
[22:35:31] <carter> i've been focusing on simd from the "i want better data analysis tools, full stack"
[22:35:36] <carter> and i'm focusing on haskell overall
[22:35:41] <dherman> also talk to my daughter. she'll only say "kitty" since it's the only word she knows, but anyway it'll be cute
[22:35:42] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[22:35:53] *** Quits: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com) (Ping timeout)
[22:35:55] <carter> but rust seems just expressive enough that I can probably port some of the key ideas over and have them be mortal friendly
[22:36:03] <aatch> dherman, that is an awfully cute first word.
[22:36:06] <carter> no way it'd be sane to do what I want in c++ or scala
[22:36:07] <dherman> :)
[22:36:08] <carter> that is cute
[22:36:14] *** Joins: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com)
[22:36:19] <dherman> carter: are these ideas already written up in the context of another language? do you have a paper?
[22:36:44] <carter> nope, though i sketched out a proposal to both simons at icfp
[22:36:49] <dherman> neat
[22:36:53] <dherman> simons-approved
[22:36:55] *** Quits: jackneill (jackneill@moz-3C74D5A9.pool.digikabel.hu) (Ping timeout)
[22:37:06] <carter> yes, they just want a more concrete spec before anythigns done
[22:37:12] <cmr> carter: that's quite the complement!
[22:37:24] <cmr> (re: expressive)
[22:37:42] <carter> cmr: you need HKT and the fancier stuff for it to be sane
[22:37:51] *** Joins: gdey_ (gdey@moz-CD850554.static-ip.telepacific.net)
[22:37:55] <carter> first i'm justt sorting out getting rust building on my mac
[22:38:01] <cmr> heh
[22:38:02] *** Quits: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com) (Ping timeout)
[22:38:03] <carter> *truly sane
[22:38:08] *** Quits: gdey_ (gdey@moz-CD850554.static-ip.telepacific.net) (Client exited)
[22:38:10] <carter> but I can lie and use phantoms for the near term I think
[22:38:10] *** Joins: gdey_ (gdey@moz-CD850554.static-ip.telepacific.net)
[22:38:13] <cmr> build system seems a bit flaky recently
[22:38:15] *** Joins: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com)
[22:38:19] <carter> can i write types with no constructors
[22:38:21] <carter> ?
[22:38:24] <carter> so i can do peano?
[22:38:27] <cmr> enum Void { }
[22:38:49] <carter> enum Succ<a> {} ?
[22:39:01] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[22:39:02] <carter> enum Zero {}
[22:39:08] <carter> or the like?
[22:39:19] <carter> i wanna have proper support for higher ranked arrays
[22:39:24] <carter> not just vectors and matrices
[22:39:26] <cmr> I think how exactly that unused typaram is handled might be in flux (ask pnkfelix or nmatsakis), but yes.
[22:39:27] *** Quits: gdey (gdey@moz-CD850554.static-ip.telepacific.net) (Ping timeout)
[22:39:32] <carter> well
[22:39:39] <carter> part of why i'm getting involved is to push things for me :)
[22:39:41] <cmr> (re its variance)
[22:39:50] *** Quits: jvns (bork@87D98E32.4046EB22.428F94DD.IP) (Ping timeout)
[22:39:54] *** Joins: richo (richo@10726D5F.1B04FC3.5CC412D0.IP)
[22:39:57] <carter> as long as I can do S<Z> and friends
[22:39:59] *** Quits: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com) (Ping timeout)
[22:40:10] <carter> and have those a phantom param of an array data type
[22:40:12] <carter> i don't care 
[22:40:16] *** Joins: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com)
[22:40:19] <carter> as long as traits play nice with it
[22:41:06] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[22:41:55] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[22:42:10] *** Joins: jdm (jdm@F2E651E2.2E53F4B8.47C41102.IP)
[22:42:10] *** ChanServ sets mode: +o jdm
[22:42:58] *** Quits: nejucomo (Adium@moz-B62B9944.public.monkeybrains.net) (Quit: Leaving.)
[22:45:02] *** Joins: steffenomak (steffenoma@moz-FB0A4BEB.student.uu.se)
[22:46:35] *** Quits: brendan (brendaneic@777B9EEC.C030CAFC.1EF54B18.IP) (Quit: brendan)
[22:46:53] *** Quits: steffenomak (steffenoma@moz-FB0A4BEB.student.uu.se) (Quit: WeeChat 0.4.2)
[22:47:31] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[22:48:56] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[22:49:26] *** Quits: peterdn (chatzilla@moz-3DA3F15F.as13285.net) (Ping timeout)
[22:53:30] <Leo`> re
[22:53:56] <bjz> carter: yay for phantom types :D
[22:54:04] <carter> bjz: i've not teste it eyt
[22:54:30] <bjz> You use empty enums, then transmute between them
[22:54:50] <carter> woot
[22:54:53] <carter> tranmutate?
[22:55:00] <carter> *transmute?
[22:55:19] <bjz> oh wait, that is not neccsary sometimes I don't think
[22:55:28] <Luqman> carter: a compiler intrinsic that lets you go between types as long as they're the same size
[22:55:45] <Luqman> http://static.rust-lang.org/doc/master/std/cast/fn.transmute.html
[22:56:19] <achin> that's neat
[22:57:56] <bjz> rusti: enum Open {} enum Closed {} struct Door<State> { name: ~str } fn close(Door { name }: Door<Open>) -> Door<Closed> { Door { name: name } } fn open(Door { name }: Door<Closed>) -> Door<Open> { Door { name: name } }
[22:57:56] -rusti- ()
[22:58:15] <carter> https://github.com/mozilla/rust/issues/10941#issuecomment-30466767
[22:58:34] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[22:58:45] <bjz> rusti: enum Open {} enum Closed {} struct Door<State> { name: ~str } fn close(Door { name }: Door<Open>) -> Door<Closed> { Door { name: name } } fn open(Door { name }: Door<Closed>) -> Door<Open> { Door { name: name } } close(Door::<Closed> { name: ~"front" })
[22:58:46] -rusti- main::Door<main::Closed>{name: ~"front"}
[22:58:53] <Jarrett> just curious, I don't really mind them but... what's with all the super-abbreviated keywords in rust anyway
[22:59:04] <bjz> hum
[22:59:21] <achin> like fn?
[22:59:21] <bjz> ohh
[22:59:47] <Jarrett> fn, impl, mod, pub, and so on
[22:59:56] <ChrisMorgan> Jarrett: they're all long enough to be clearly identifiable; there's not much point in making them longer in general.
[23:00:03] *** Quits: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP) (Ping timeout)
[23:00:16] <bjz> carter: weird - that should be a type error
[23:00:24] <Jarrett> I suppose :v
[23:00:26] <carter> bjz: what should be?
[23:00:31] <bjz> ^
[23:00:42] <bjz> close(Door::<Closed> { name: ~"front" })
[23:01:44] *** Joins: steffenomak (steffenoma@moz-FB0A4BEB.student.uu.se)
[23:01:53] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[23:02:31] <Luqman> carter: that path is from the machine the snapshot was built on (snap3-mac in this case)
[23:03:07] <bjz> rusti: enum Open {} enum Closed {} struct Door<State>(~str); fn close(Door(name): Door<Open>) -> Door<Closed> { Door(name) } fn open(Door(name): Door<Closed>) -> Door<Open> { Door(name) } close(Door::<Closed>(~"front"))
[23:03:08] -rusti- pastebinned 7 lines of output: http://sprunge.us/XHEb
[23:03:58] * bjz wonders if it's the record-struct destructuring
[23:04:03] *** Joins: anri (koz@moz-E49E7C4B.hsd1.wa.comcast.net)
[23:05:02] <bjz> carter: buit see? phantom types!
[23:05:05] <bjz> :D
[23:05:06] <carter> yay
[23:05:23] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[23:06:41] <bjz> yay for encoding FSMs in the type system
[23:07:59] <Jarrett> now make the typechecker go into an infinite loop :D
[23:08:27] <Jarrett> or is rust's type system not that powerful
[23:08:37] <bjz> don't think so
[23:08:39] <aatch> Jarrett, I don't think it's powerful enough.
[23:08:53] <bjz> it's not turing complete at least
[23:09:04] *** Joins: brendan (brendaneic@777B9EEC.C030CAFC.1EF54B18.IP)
[23:09:28] <aatch> (What would cause it to infinite loop)
[23:09:34] * bjz hopes for compile time constant parametrisation
[23:09:39] <Jarrett> daw
[23:11:14] <ChrisMorgan> bjz: I think we all do
[23:11:25] <Luqman> bjz: https://gist.github.com/5f2db47d3e4b0dbe6ffc  weird, so the first open fails as it should but the second one doesn't
[23:11:30] <Luqman> seems like a bug
[23:11:43] <bjz> Luqman: yup
[23:12:13] *** Joins: jvns (bork@87D98E32.4046EB22.428F94DD.IP)
[23:12:55] <aatch> I don't think so.
[23:13:27] <aatch> For one, it would be Door<Open> anyway.
[23:13:59] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[23:14:50] <steffenomak> jk
[23:15:49] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[23:16:15] *** Quits: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net) (Ping timeout)
[23:17:12] *** Quits: rca_ (rcatolino@moz-77494259.adsl.proxad.net) (Ping timeout)
[23:17:25] *** Quits: azita (Azita@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: azita)
[23:17:32] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[23:17:41] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[23:18:11] <bjz> aatch: its trying to open an Open door
[23:18:33] <bjz> aatch: `open` takes a Door<Closed>
[23:18:46] <aatch> bjz, oh. Right.
[23:19:01] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[23:19:05] <bjz> aatch: the idea is that it should be a type error
[23:19:12] <bjz> rusti: enum Open {} enum Closed {} struct Door<State>(~str); fn close(Door(name): Door<Open>) -> Door<Closed> { Door(name) } fn open(Door(name): Door<Closed>) -> Door<Open> { Door(name) } close(Door::<Closed>(~"front"))
[23:19:13] -rusti- pastebinned 7 lines of output: http://sprunge.us/cIAe
[23:19:21] <Luqman> it seems to be ignoring the ::<Open> bit and then infering it to Closed
[23:19:30] <Luqman> leave off the function call and it says:
[23:19:31] <Luqman> door.rs:21:8: 21:43 error: cannot determine a type for this local variable: unconstrained type
[23:19:31] <Luqman> door.rs:21     let d = Door::<Open> { name: ~"front" };
[23:19:33] <bjz> aatch: it works for tuple structs
[23:19:35] <aatch> Hmm.. Looking at the parser, it accepts a path with lifetimes and types, but ignores the parameters
[23:19:39] *** Quits: colinsurprenant (colin@F692E1FE.8D7057CF.30F15291.IP) (Quit: colinsurprenant)
[23:21:03] <bjz> do you reckon phantom types deserve a tutorial?
[23:21:16] <bjz> albiet a small one
[23:21:19] <cmr> Why?
[23:21:28] <bjz> or in a 'rust cookbook'
[23:21:31] <cmr> I mean I'm all for more docs.
[23:21:45] <cmr> Well
[23:21:58] <cmr> Yeah, or a blog post or something :P
[23:22:07] <Luqman> there is this http://bluishcoder.co.nz/2013/08/15/phantom_types_in_rust.html
[23:22:21] <bjz> seeing as I can forsee more folks asking 'how do you do phantom types in rust'
[23:23:07] <cmr> put it on the cheatsheet faq
[23:23:20] <bjz> where?
[23:23:50] <cmr> https://github.com/mozilla/rust/wiki/Doc-FAQ-Cheatsheet
[23:23:55] *** Quits: derek_c (derek@moz-CFC283A2.cit.cornell.edu) (Ping timeout)
[23:24:14] <bjz> got it
[23:24:19] <bjz> will do
[23:24:26] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[23:24:33] <bjz> I'll add a heading "Type system"?
[23:24:37] <cmr> Sure
[23:25:00] <mib_0kxij3> how do I compare two strs?
[23:25:18] *** Joins: dbaupp_ (Mibbit@moz-9702BA47.maths.usyd.edu.au)
[23:25:19] <aatch> Hmm, the question is, what makes more sense for struct expression? forbidding the params or allowing them?
[23:25:24] <aatch> mib_0kxij3, `==`
[23:25:29] <ChrisMorgan> mib_0kxij3: `str1 == str2`, assuming they're both string slices (&str)
[23:25:35] <aatch> rusti: "abc" == "abc"
[23:25:35] <Jarrett> how do I disable a specific warning in code?
[23:25:36] -rusti- true
[23:25:53] <aatch> Jarrett, #[allow(<warning>)]
[23:25:57] <Jarrett> ahh thanks
[23:26:13] <aatch> depending on where you put it it will change what sections allow it.
[23:26:22] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[23:26:28] *** Quits: lenstr (lenstr@23C3D5E9.9636F313.7A27613B.IP) (Client exited)
[23:26:32] <aatch> rusti: ~"abc" == ~"abc"
[23:26:32] <dbaupp_> https://github.com/mozilla/rust/issues/9620 for the struct type parameters being ignored
[23:26:33] -rusti- true
[23:26:41] *** Quits: steffenomak (steffenoma@moz-FB0A4BEB.student.uu.se) (Quit: WeeChat 0.4.2)
[23:26:48] <Luqman> aatch: well, we do allow them on functions right now. also, allowing it to be part of the expression lets you avoid making an extra let statment or whatever to just specify a type parameter
[23:26:59] <Leo`> can I use something like "0 as *T" in a static context ?
[23:26:59] <Jarrett> aatch: right right
[23:27:10] <aatch> Leo`, yes
[23:27:11] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[23:27:15] <Leo`> mh.
[23:27:31] <Leo`> i've got Rustc doing an ICE because of a static
[23:27:38] <Leo`> I don't know what's wrong with it
[23:27:51] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[23:27:54] <aatch> Leo`, post code
[23:27:58] <aatch> And error message
[23:29:24] <aatch> Leo`, for future reference, it's better to start with your actual problem, otherwise you end up with the X-Y problem (http://www.perlmonks.org/?node_id=542341)
[23:29:52] <Leo`> the code declares a static instance of a struct containing another struct (by-value) and an unsafe ptr
[23:30:10] <Leo`> I'd like the unsafe ptr to be left uninitialized for the moment
[23:30:27] <Leo`> and the error is
[23:30:34] <Leo`> task 'rustc' failed at 'assertion failed: `(left == right) && (right == left)` (left: `3u`, right: `4u`)', /Users/leo/Workspace/rust/src/librustc/middle/trans/adt.rs:724
[23:30:43] <Leo`> but my version of Rustc is quit old
[23:30:47] <cmr> hah, that's a miserable ICE indeed
[23:30:51] <Leo`> this line doesn't correspond to anything
[23:30:53] <aatch> Leo`, how old?
[23:31:01] <Leo`> ~1 month I'd say
[23:31:13] <Leo`> 2013-11-17
[23:31:19] <aatch> Leo`, yeah, you need to update.
[23:31:33] <Leo`> this has been fixed ?
[23:31:58] <aatch> Leo`, maybe, maybe not.
[23:32:04] <aatch> Can you actually post the code though.
[23:32:28] <aatch> Theres an assert_eq! a couple lines down from there that would cause that error.
[23:33:13] <Leo`> just a minute :p
[23:33:25] <Leo`> I launch a Rustc build
[23:33:29] <Leo`> I hope it will pass this time
[23:33:43] <Leo`> last time I tried to upgrade I had strange linking failures concerning librustuv
[23:33:43] *** Quits: lbonn (lbonn@moz-FBFAA8BC.rev.sfr.net) (Quit: leaving)
[23:34:11] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Quit: Textual IRC Client: www.textualapp.com)
[23:34:13] <Leo`> ok
[23:34:20] <ChrisMorgan> Leo`: run `make clean` and probably `make clean-llvm` first
[23:34:41] <bjz> cmr, carter: https://github.com/mozilla/rust/wiki/Doc-FAQ-Cheatsheet#how-do-i-express-phantom-types-in-rust
[23:36:12] <ChrisMorgan> bjz: in "fn close(Door(name): Door<Open>) -> Door<Closed> {", I do not think that the use of Door(name) is wise; the type of person who needs this guidance is much less likely to be familiar with such constructs.
[23:36:12] <Leo`> http://paste.placeholder.fr/show/506/ line ~28
[23:36:33] <Leo`> the code is a bit hard to navigate ><
[23:36:55] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[23:37:00] *** Quits: JanC_ (janc@moz-EF24C2F2.dsl.scarlet.be) (Client exited)
[23:37:51] <ChrisMorgan> Leo`: in the last block, I'd do `match (*self, *other) {` and drop all the ampersands. (The two are semantically identical.)
[23:38:30] *** Joins: z0w0 (zack@3DBF69E1.E4B1DB2C.2CE63F58.IP)
[23:38:35] <bjz> ChrisMorgan: oh :(
[23:38:36] <z0w0> gm
[23:38:42] <Leo`> ChrisMorgan: oh ? I know they are sematically identical, but I don't know which is considered good style and why ?
[23:39:03] <ChrisMorgan> Leo`: shorter, less messy?
[23:39:25] <ChrisMorgan> Leo`: is there a reason you defined fn compare rather than implementing Eq?
[23:39:27] <Leo`> ok
[23:39:36] *** Joins: JanC (janc@moz-EF24C2F2.dsl.scarlet.be)
[23:39:39] <bjz> cmr: what do you think?
[23:39:45] <Leo`> ChrisMorgan: yeah
[23:40:11] <Leo`> ChrisMorgan: I want to dinstinguish physical equality and structural equality
[23:40:31] <Leo`> eq vs. equal, Scheme-speaking.
[23:41:01] <bjz> Luqman: would you be able to post an issue about the type issue we had before?
[23:41:16] *** Quits: ianj (ianjneu@moz-7140CF01.ccs.neu.edu) (Quit: leaving)
[23:42:08] <ChrisMorgan> We have Eq.eq and TotalEq.equals. Not sure what the scheme eq/equal semantics are.
[23:42:41] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[23:42:50] *** jorendorff is now known as jorendorff_away
[23:42:57] <Leo`> eq says (1 . 2) != (1 . 2), while equal says they are equals. :P
[23:43:11] <Leo`> I think this is what TotalEq means
[23:43:20] <Leo`> I'll have a look at it
[23:43:34] <o11c> Leo`: In Rust, you usually don't care about pointer equality
[23:43:52] *** Joins: lerc_ (quassel@moz-289EFA2.telstraclear.net)
[23:44:01] <o11c> so (1, 2) == (1, 2)
[23:44:32] <Leo`> o11c: in my case, I do want to care about pointer equality :P
[23:45:43] *** Quits: io2 (io2@moz-34E8FDD4.home.otenet.gr) (Quit: )
[23:46:30] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Ping timeout)
[23:47:53] *** Quits: lerc (quassel@moz-289EFA2.telstraclear.net) (Connection reset by peer)
[23:47:58] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[23:48:33] *** Quits: nkoep (nik@moz-CD47E784.pool.mediaways.net) (Ping timeout)
[23:48:44] *** Joins: nkoep (nik@moz-CD47E784.pool.mediaways.net)
[23:50:21] <aatch> Eq vs TotalEq is just whether or not `(a == b) && (b == c) => (a == c)` holds. For `TotalEq` it does, for `Eq` it does not.
[23:51:08] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[23:51:11] <carter> aatch: whats an example of that?
[23:52:10] <aatch> carter, not sure. I know an example for *Ordering*, but not equality.
[23:52:11] <carter> damn it, i did a fresh full clone
[23:52:16] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[23:52:17] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[23:52:20] <carter> aatch: partial vs total ords I understand
[23:52:38] <carter> cmr: achin  blah, i did a fresh clone and its still failing
[23:53:09] <Jarrett> is there something wrong with the stdlib docs? this module seems to be missing an awful lot of functions http://static.rust-lang.org/doc/master/std/vec/index.html
[23:53:11] <Luqman> bjz: https://github.com/mozilla/rust/issues/9620
[23:53:13] <aatch> Oh, wait, I'm wrong. It's whether or not (a == b) && (a != b) is a contradiction.
[23:53:33] *** Joins: gdey (gdey@moz-CD850554.static-ip.telepacific.net)
[23:53:41] <aatch> Jarrett, nope, most are methods on those traits.
[23:53:49] *** Quits: gdey (gdey@moz-CD850554.static-ip.telepacific.net) (Quit: Leaving...)
[23:53:58] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[23:54:01] <Jarrett> oh
[23:54:20] <Jarrett> theeeere they are
[23:54:57] <aatch> carter, so for TotalEq it is, for Eq it is not.
[23:55:11] *** Quits: gdey_ (gdey@moz-CD850554.static-ip.telepacific.net) (Ping timeout)
[23:55:12] <carter> oh
[23:55:17] <carter> so its Eq vs Partial Eq
[23:55:24] <dbaupp_> aatch: I guess you could phrase that as (a == b) ^ (a != b) is always true?
[23:55:42] *** Quits: nkoep (nik@moz-CD47E784.pool.mediaways.net) (Ping timeout)
[23:55:45] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[23:55:55] <carter> still don't undesrtand how there'd be any examples of that
[23:55:56] <aatch> dbaupp_, yeah, that's the alternative (either a tautology or contradiction)
[23:56:02] <aatch> carter, floating point numbers.
[23:56:18] <carter> Nans
[23:56:25] <carter> sooo, by default total eq?
[23:56:27] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[23:56:32] <carter> which trait does == come frome?
[23:56:38] *** Joins: nkoep (nik@moz-CD47E784.pool.mediaways.net)
[23:56:39] <aatch> carter, Eq
[23:56:53] <carter> so total Eq doesn't have more ops
[23:56:58] <carter> just stronger assumpt?
[23:57:05] <achin> carter: have you done any customization of your build environment ?
[23:57:10] <aatch> carter, yep.
[23:57:22] <carter> aatch: i have a real GCC
[23:57:25] <carter> you don
[23:57:26] <carter> t
[23:57:42] <aatch> carter, what?
[23:57:57] <carter> xcode 5 / OS X 10.9 don't give you gcc
[23:58:04] *** Quits: jdm (jdm@F2E651E2.2E53F4B8.47C41102.IP) (Ping timeout)
[23:58:06] <carter> achin: "gcc --version"
[23:58:12] <carter> on your machine should say clang
[23:58:14] <Leo`> oh yeah
[23:58:20] <Leo`> I saw this too
[23:58:26] <Leo`> I was really *wtf*
[23:58:30] *** Quits: nkoep (nik@moz-CD47E784.pool.mediaways.net) (Ping timeout)
[23:58:31] *** Joins: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net)
[23:58:37] <achin> carter: yes
[23:58:43] <achin> i have Apple LLVM version 5.0 (clang-500.2.79) (based on LLVM 3.3svn)
[23:58:44] *** Quits: _Vi (vi@527C345F.497AA854.B16B3BE6.IP) (Ping timeout)
[23:58:54] <carter> sooo, my theory is that it may be gcc vs clang issue
[23:58:59] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[23:59:04] <carter> lemme do ./configure --enable-clang 
[23:59:12] * Leo` thinks he will stay on 10.8 a little while longer ...
[23:59:12] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[23:59:23] <carter> and see if things succeed this evening
[23:59:29] <aatch> I have clang as my default CC and don't have any issues building.
[23:59:35] <carter> achin: I have gcc
[23:59:39] <Jarrett> is there a mechanism or accepted idiom for creating structs with their fields initialized to something ("constructors")?
[23:59:45] <Jarrett> I mean other than struct literals
[23:59:50] <carter> i need gcc because the clang cpp breaks haskell CPP
[23:59:52] <aatch> Jarrett, static methods.
[23:59:56] <Leo`> Jarrett: static new() mthod
[23:59:58] <sfackler> Jarrett: usually a static "new" method
[23:59:58] <Jarrett> ahah
[23:59:59] <Leo`> method*
[23:59:59] <sfackler> efb
