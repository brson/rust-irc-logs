[00:45:03] <bascule> Ilari: ugh this unbearable conversation is so unbearable
[00:45:06] <bascule> HOW DO WE SHARE KEYS?
[00:45:10] <bascule> I dunno, how about... Macaroons
[00:49:23] <eternaleye> HOW IS TRUST FORMED. HOW BROWSER GET CREDENTIAL.
[00:49:36] <eternaleye> (Yahoo Answers Does Crypto)
[00:49:46] <bascule> heh
[00:50:23] <eternaleye> "They need to do way instain key; some browser revoke their certificate."
[00:56:28] <Ilari> bascule: How does macaroons do proof of possession for asymmetric key private part?
[00:59:27] <bascule> Ilari: you can add a contextual caveat that binds to e.g. TLS channel ID
[01:00:53] <Ilari> Except you have to have TLS channel ID to bind to it...
[01:01:01] <bascule> that contextual caveat could be part of a discharge macaroon
[01:01:07] <bascule> obtained as a third party caveat
[01:02:13] <bascule> the original service could encode the channel ID as a third party caveat, and a third party service can re-encode it into the discharge macaroon
[01:03:07] <bascule> err, I guess that might be a confusing way of describing it
[01:03:16] <bascule> but let's say that third party service was some sort of identity provider
[01:03:36] <Ilari> And that "identity provoder" has to be colocated with the client.
[01:03:56] <bascule> what do you mean "colocated"?
[01:04:19] <bascule> if you want it to vouch for people's identities, the client needs to already be authenticated with it in some way
[01:11:43] <Ilari> Okay, reading the paper, the usecase I'm describing can't be done without channel IDs.
[01:14:41] <Ilari> (If the usecase is worth solving is different matter)
[01:17:09] *** Joins: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net)
[01:24:00] <Ilari> bascule: So no, it looks like Macaroons can't solve the tokbind (unbearable) usecase (taking no position if the usecase is worthwhile to solve, I think not without doing further changes at the same time).
[01:24:20] <Ilari> And these further changes can't be solved by macaroons either.
[01:25:43] <bascule> what specifically can't be done?
[01:26:37] * bascule gets a little farther on a Macaroon parser
[01:30:04] *** Quits: acharles (acharles@moz-ulbdcn.ca.comcast.net) (Ping timeout: 121 seconds)
[01:30:05] <Ilari> bascule: Binding bearer token to client-held key without defining end-to-end channel IDs. Nor knowing when the authority conferred should be exterted.
[01:30:40] <eternaleye> Ilari: The thing is, that in order for the token to be non-transferrable it must bind to state that can't be replicated.
[01:30:58] <eternaleye> Ilari: TLS channel ids are _one_ such kind of state; but not the only kind
[01:31:26] <eternaleye> Ilari: Since macaroon caveats could be used to bind to arbitrary state, they solve as much as they need to (or can)
[01:33:10] <bascule> Ilari: ok, sure, Macaroons rely on TLS channel ID...
[01:33:15] <bascule> why is that a problem?
[01:33:31] <Ilari> bascule: Because it is their usecase.
[01:33:39] <bascule> not using TLS channel ID?
[01:33:53] <bascule> using other wacky crap instead for opaque tokens? ;)
[01:34:25] <eternaleye> bascule: Ilari: I think the issue here is poor terminology, actually.
[01:34:47] *** Joins: acharles (acharles@moz-ulbdcn.ca.comcast.net)
[01:35:16] <eternaleye> They want non-transferrable bearer tokens; those only happen when the token validity is conditionalized on non-transferrable state; Macaroon caveats can conditionalize validity on arbitrary state.
[01:35:41] <eternaleye> The issue is that they're being pants-on-head silly about how they define non-transferrable state.
[01:36:27] <bascule> heh, yeah
[01:37:33] <Ilari> Are you assuming that TLS server authentication actually works?
[01:37:39] <eternaleye> Really, once you define non-transferrable state properly, the whole list can answer one session and then die quietly: "Okay, what encoding and namespace should we have the IANA manage for state-binding caveats on macaroons?"
[01:37:40] <bascule> lololol
[01:37:56] <eternaleye> Ilari: Orthogonal issue.
[01:37:58] <bascule> Macaroons need a standard predicate format in general :(
[01:38:14] <eternaleye> bascule: Subject verb object.
[01:38:29] <bascule> err, that doesn't fit anything that anyone has suggested ;)
[01:38:34] <bascule> I've seen a few formats like
[01:38:46] <bascule> time < [expiration date]
[01:38:47] <bascule> and
[01:38:51] <bascule> time-before [expiration date]
[01:39:05] <eternaleye> "time < [expiration date]" is subject verb object
[01:39:17] <bascule> right now interpreting predicates is totally ad hoc, with the idea that if you don't understand how to interpret it, the Macaroon is rejected
[01:39:25] <bascule> I don't see any verb in there ;)
[01:39:27] <eternaleye> Subject = current time, Verb = is smaller than, object = [expiration date]
[01:39:33] <bascule> haha, ok
[01:39:43] <eternaleye> You could also do "foo authenticates bar" and so forth
[01:40:00] <eternaleye> But the thing is that comparison operators are overly specific
[01:40:12] <eternaleye> Verbs are much more sensible as an abstraction
[01:40:27] <bascule> then there's collections
[01:40:30] <eternaleye> From there, it's just a matter of declaring verbs and subject/object namespaces
[01:40:36] <bascule> method in get,post,put
[01:40:40] <bascule> or something
[01:40:55] <eternaleye> bascule: Then subject or object is a list
[01:41:18] *** Quits: aturon (sid36348@moz-2ij.vkt.184.192.IP) (Quit: )
[01:41:24] *** Joins: aturon (sid36348@moz-n3h4qj.brockwell.irccloud.com)
[01:42:10] <eternaleye> If you can specify "any" for lists, and you treat caveat-lists as AND, then you have CNF, which can express arbitrary boolean functions.
[01:42:53] <eternaleye> So when subject or object is a list, treat it as the OR of the verb on the cartesian product.
[01:43:26] <eternaleye> So method is [get, put, post]
[01:43:47] <bascule> anyway, the problem isn't so much making the sausage, but the fact that nobody's doing it
[01:43:55] <eternaleye> Mm
[01:44:05] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[01:44:08] <bascule> or rather, none of the libraries expose standard predicate matchers. the predicate is just an octet-string
[01:44:17] <eternaleye> Anyway, CNF of SVO is fully general, concise in the simple case, and extensible
[01:44:32] <eternaleye> Could even steal the SVO from RDF
[01:45:47] <eternaleye> A subset of Turtle wouldn't be half-bad in terms of parsing caveats
[01:48:03] <eternaleye> tls:session rdf:eq "234234524352445"
[01:48:42] <eternaleye> Namespacing even makes the extensibility not suck horrendously
[01:49:48] <eternaleye> (for reference, Turtle: http://www.w3.org/TR/turtle/)
[01:53:33] <Ilari> Hmm... Thinking about "JS protected from other origins", the thing could maybe solved using <IFRAME> (you don't need CSP here, since CSP does not close any undefendable exploit).
[01:54:36] <eternaleye> (And yes, Turtle supports lists)
[01:54:37] <Ilari> Stronger form of the problem (also protect against origin) is not possible.
[01:55:11] <eternaleye> http://www.w3.org/TR/turtle/#object-lists
[01:56:11] <Ilari> Specifically, don't load any tp JS, and use messages for communication with other pieces of JS (since top-level contexts do get protection).
[01:56:31] <Ilari> ... And also privileges of their origin.
[01:57:30] <Ilari> One thing CSP could be useful for is those darn sniffing exploits.
[01:57:51] <Ilari> Which I classify as serious browser vulernabilities.
[02:12:52] *** Joins: adu (ajr@moz-7ui5bv.ms5a.74ae.000a.2601.IP)
[02:16:38] <eternaleye> Oooh, Turtle is LL(1). Now I'm tempted to make a Rust parser that uses Nom
[02:35:22] <Ilari> I looked at XDR, which is even IS. Can't seemingly do extensible structure representation.
[02:36:08] <Ilari> Also, it is ad-hoc parse stuff, not something like XML (I think XML might be bit less annoying to type than JSON).
[02:36:27] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Ping timeout: 121 seconds)
[02:37:16] <eternaleye> Ilari: https://en.wikipedia.org/wiki/SDXF ?
[02:39:44] <eternaleye> Ilari: There also exists SDEF, to provide an editable form of SDXF
[02:39:47] <eternaleye> http://www.pinpi.com/en/sdef.htm
[02:40:04] <Ilari> "self-documenting"
[02:41:43] <eternaleye> Read that as "schema is inline"
[02:42:19] <Ilari> Which is something I really don't want.
[02:42:48] <eternaleye> Mm
[02:43:05] <eternaleye> Well, it's not like there's a _shortage_ of serialization formats
[02:43:16] <eternaleye> https://en.wikipedia.org/wiki/Comparison_of_data_serialization_formats
[02:44:21] <eternaleye> If you really want to suffer, you could use XML and just go with EXI as the wire format
[02:52:31] <Ilari> The wire format and schema representation format are two different things. It is obviously convinent for schema format to be relatively easy to edit in text editor (and also relatively easy for computer to parse).
[02:52:58] <eternaleye> Sure.
[02:53:13] <eternaleye> What I meant by "wanting to suffer" is "having to deal with actual, full XML"
[02:53:51] <Ilari> There are libraries to parse XML, right?
[02:55:15] <bascule> I should look at Nom
[02:55:35] <Ilari> In one program, I have a JSON parser available, but no XML parser. The JSON is quite annoying to write, and also quite annoying to work with, unless you want some random crash message when it is bad.
[02:55:41] <bascule> Ilari: oh yes
[02:55:49] <bascule> Ilari: have you looked at <iframe sandbox>
[02:56:05] <bascule> https://github.com/tildeio/oasis.js
[02:56:21] <bascule> that's more for embedding untrusted code in a parent page
[02:56:53] <eternaleye> bascule: Nom is quite nice, although I think its API is suboptimal
[02:57:05] <bascule> I'm handrolling a pkt-line parser
[02:57:05] <Ilari> bascule: Sandbox definitely doesn't do what I was seeking.
[02:57:13] <bascule> heh, ok
[02:57:19] <eternaleye> bascule: For instance, the is_a! and is_none! primitives are defined as [cclass]+
[02:57:20] <bascule> what doesn't CSP do that you want?
[02:57:50] <eternaleye> bascule: Where I feel that they should be [cclass], since it already has a many1! foo+ primitive
[02:58:42] <Ilari> bascule: Looks like CSP is only useful for trying to do exploit mitigation for my purposes.
[02:59:28] <bascule> Ilari: what specifically do you want to do?
[02:59:40] *** Quits: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net) (Ping timeout: 121 seconds)
[03:00:02] <Ilari> JS that executes with privileges of given origin and can't be messed with (but can be communicated with) from outside that origin.
[03:00:33] <bascule> and how does script-src 'self' not do what you want?
[03:01:58] <Ilari> What does "script-src 'self'" even do if the origin itself doesn't refer to any scripts from outside itself?
[03:02:15] <bascule> your scripts execute and work? ;)
[03:02:32] <bascule> unless they're inline
[03:02:37] <bascule> then they break
[03:03:07] <Ilari> Sure as I said, exploit mitigation.
[03:03:28] <bascule> I guess I'm still confused about what you want then
[03:04:37] <bascule> if it's not CSP and it's not scripts from different origins communicating over iframes
[03:05:45] <Ilari> Well, looks like scripts from different origins communicating over iframes is one way of doing what was I was after.
[03:06:12] <bascule> Oasis is setup to do that
[03:06:34] <bascule> see also: http://easyxdm.net/
[03:07:43] <bascule> see also: https://github.com/tildeio/conductor.js/blob/master/README.md
[03:11:33] <Ilari> Those internally seem to be using iframes. And sandbox is seemingly only needed if the origins are the same, which is not the case here.
[03:11:46] <bascule> yeah
[03:15:09] <Ilari> Also reminds me that there are all sorts of crazy attacks against OAuth2. Sometimes even pulled off by "legimate" sites in order to workaround various problems.
[03:15:18] <bascule> loloauth
[03:15:52] <bascule> things I hate: OAuth, CORS, JSONP
[03:16:32] <bascule> where ^^^ systems bleed authority, capability systems keep things nicely confined
[03:16:52] <Ilari> JSONP, or how to circumvent same origin restrictions in the least secure way possible. :->
[03:18:58] <Ilari> Also, cookies have serious authority bleeding problems.
[03:19:54] <bascule> yeah JSONP is like self-XSS
[03:20:00] <bascule> and cookies suck ;)
[03:20:56] <Ilari> Hmm... reminds me to go digging one post about what someone thinks HTTP/2 should have become (but HTTP/2 is just a new wire format for HTTP).
[03:21:21] <bascule> https://queue.acm.org/detail.cfm?id=2716278 ?
[03:21:49] <bascule> (or previous similar posts)
[03:23:43] <Ilari> Wasn't PHK.
[03:28:30] <Ilari> Basically whatever end-to-end semantics HTTP/1.1 has, HTTP/2 can carry those (but can't carry all hop-by-hop semantics).
[04:36:47] <adu> I like HTTP/2
[04:37:22] <adu> there is actually 1 huge difference between HTTP/1 and HTTP/2
[04:37:41] <adu> HTTP/2 does not have a way to encode the "Reason Phrase"
[04:38:24] <adu> like, you actually have to know what 200 means
[04:40:35] <adu> because it sends the whole ":Status: 403" ":Reason: Forbidden" combo as a highly compressed nybble
[04:43:37] <adu> but since the status => reason mapping is pretty universal, I don't think anyone cares
[04:45:52] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[04:47:15] *** Quits: adu (ajr@moz-7ui5bv.ms5a.74ae.000a.2601.IP) (Client exited)
[04:53:27] *** Joins: adu (ajr@moz-melbkr.ms5a.74ae.000a.2601.IP)
[05:09:26] *** Quits: adu (ajr@moz-melbkr.ms5a.74ae.000a.2601.IP) (Ping timeout: 121 seconds)
[06:29:21] *** Quits: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net) (Ping timeout: 121 seconds)
[07:00:26] *** Joins: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net)
[07:28:28] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[12:05:14] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[14:09:29] *** Quits: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net) (Ping timeout: 121 seconds)
[15:29:15] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[16:03:02] *** Joins: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net)
[16:08:37] <bascule> "OAuth token is a kind of capability-based security token." o_O
[16:08:52] <bascule> Mark Miller just vomited with rage
[16:09:05] <bascule> yeah, an OAuth token is kinda like a SturdyRef...
[16:09:12] <bascule> wait, no, it's nothing like a SturdyRef
[16:15:24] <Ilari> Yeah, Too much OAuth makes one crazy.
[16:16:57] <Ilari> :-)
[16:18:40] <bascule> heh
[16:19:05] <bascule> there's also the part where "capability" means something very specific to, say, fans of CapTP/E or KeyKOS versus... everyone else on the planet
[16:19:37] <bascule> I would say OAuth is a credential system, not a capability system. Same with Macaroons...
[16:35:34] <Ilari> With capabilies, designation of object and privilege to act on object are the same and can not be separated.
[17:02:21] <bascule> yup
[17:10:24] <Ilari> Also, Ouath2: Waiting for interoperability only adds uncertainity, the time for OAuth2 is now. :->
[17:24:27] <tiffany> is oauth really that bad?
[17:26:02] <Ilari> See the choice quote in OAuth2 RFC.
[18:23:50] *** Joins: adu (ajr@moz-7l2nup.ms5a.74ae.000a.2601.IP)
[18:33:38] *** Joins: gsingh93_ (uid22642@moz-aq0iah.charlton.irccloud.com)
[18:37:01] *** Parts: adu (ajr@moz-7l2nup.ms5a.74ae.000a.2601.IP) ("")
[18:37:29] *** Joins: adu (ajr@moz-0foa9t.md.comcast.net)
[18:53:42] <Ilari> That text was from twisting one quote about X.509 and interoperability (by PKI vendor with especially bad track record at implementing X.509 correctly).
[18:56:49] <Ilari> Also, X.509 in digital signature purposes. Good luck with interoperability.
[18:59:02] <Ilari> Similarly with OAuth2: Good luck with interoprability.
[19:03:20] <Ilari> tiffany: "This framework was designed with the clear expectation that future work will define prescriptive profiles and extensions necessary to achieve full web-scale interoperability." -- RFC6749
[19:08:23] <bascule> lolol Ilari 
[19:08:32] <bascule> I think I'm going to respond re: capabilities
[19:08:36] <bascule> because it's really bugging me
[19:09:27] <bascule> lol this guy's email address is @computer.org
[19:12:25] <Ilari> Also, "ve7jtb" in one of the chair's address. A ham?
[19:16:03] <bascule> haha
[19:16:07] * bascule formerly kc0eau
[19:24:08] *** Quits: adu (ajr@moz-0foa9t.md.comcast.net) (Client exited)
[19:50:39] *** Joins: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net)
[20:05:27] <Ilari> Also, it occurs to me: If you get to the point with well-engineered SW-only system where you can dump the keys, you are likely at the point where you can do enormous amount of damage even if HW-module prevents successfully dumping the keys.
[20:08:06] <Ilari> (If your TCB is just toast, good luck.)
[20:45:25] <bascule> depends what you're doing ;)
[21:20:59] *** Quits: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net) (Connection closed)
[21:21:43] *** Joins: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net)
[21:36:49] *** Quits: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net) (Connection closed)
[21:49:25] <Ilari> Haha: "more like certificate translucency.."  (about the MS "CT" stuff).
[21:52:43] <Ilari> No efforts to try to shut down SSL 3.0 / TLS 1.0 on all supposedly PCI DSS compliant sites? :->
[21:55:30] *** Joins: brson (brson@moz-m5n.2a0.21.46.IP)
[22:00:39] *** Quits: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net) (Ping timeout: 121 seconds)
[22:00:39] *** gsingh93_ is now known as gsingh93
[22:12:37] <bascule> Ilari: what? yes, that's exactly what they want to do
[22:12:44] <bascule> where they == the PCI council
[22:15:55] <Ilari> Allegedly there is some site that claims it is PCI DSS compliant... With SSLv2 (and SSLv3/TLSv1.0) and RC4 + 1DES enabled... Then there is some Macafee secure logo that should be clickable but isn't.
[22:16:08] <bascule> lololololololol
[22:16:15] <bascule> then there's paypal.com ;)
[22:16:31] <bascule> using TLS 1.2 at least... but RC4-only o_O
[22:17:35] <Ilari> CBC-ciphers are not PCI-compliant in TLS 1.0, but those are PCI-compliant in TLS 1.2.
[22:23:19] <Ilari> Also, where's the next CFRG ECC poll? :->
[22:38:48] *** Joins: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net)
[22:45:34] <eternaleye> bascule: I think you mentioned that you were working on something related to nom?
[22:45:48] <eternaleye> bascule: Just a headsup that nom's API may be changing a bit soon
[22:46:24] <eternaleye> bascule: Specifically, I figured out a way to make the macros usable directly as arguments to each other, so temporaries don't need named
[22:47:11] <eternaleye> bascule: http://is.gd/7osWH0
[23:04:25] <Ilari> bascule: Also, this really bugs me for some reason: https://github.com/tlswg/tls13-spec/issues/5
[23:33:48] <Ilari> "The more I learn about how non-ECC public key crypto is implemented on the Internet, the less I like it."
[23:49:30] *** Quits: brson (brson@moz-m5n.2a0.21.46.IP) (Quit: leaving)
