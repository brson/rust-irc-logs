[00:01:32] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[00:01:39] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[00:02:09] *** flaper87 is now known as flaper87|afk
[00:02:43] <aatch> Ok, so LLVM wont emit the movmskb instruction without using the x86 intrinsic.
[00:03:00] <eddyb> :/
[00:03:16] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[00:03:20] <aatch> So we can't even rely on LLVM optimizing dynamic shuffles to good code.
[00:03:50] <aatch> I managed to eliminate all the branches related to bounds checking and it still refused...
[00:06:23] *** Quits: erickt_ (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[00:09:46] *** Quits: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP) (Quit: victorporof)
[00:24:38] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[00:24:38] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Client exited)
[00:25:56] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[00:25:57] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Client exited)
[00:26:29] *** Joins: seanmonstar (seanmonsta@8C4EE5CE.65CB159.9D887C86.IP)
[00:26:34] <seanmonstar> huon: hi
[00:26:48] <huon> o/
[00:27:12] *** Joins: ninechars (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[00:27:31] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[00:28:05] <huon> seanmonstar: bleh, this is going to be annoying :(
[00:28:17] <huon> give me a second
[00:28:24] <seanmonstar> huon: am i better of inserting matches?
[00:28:33] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[00:28:43] <huon> seanmonstar: maybe?
[00:28:53] <seanmonstar> i still havent wrapped my head around libsyntax and librustc yet
[00:28:55] <huon> yeah, I'd guess taht's easiest
[00:29:15] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[00:29:18] <huon> so, what'd I'd recommend is adding an `expr_try()` method to syntax::ext::build
[00:29:27] <huon> that expands to what `try` expands to
[00:30:34] <seanmonstar> on AstBuilder?
[00:31:17] <huon> yeah, give me a second
[00:33:11] <seanmonstar> i see, and i can call expr_match inside it
[00:33:43] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[00:36:50] <huon> seanmonstar: https://gist.github.com/huonw/7f8264a3ed6a6153620d
[00:36:51] <huon> I think
[00:36:59] <huon> (I haven't compiled it)
[00:37:10] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[00:37:18] <seanmonstar> thanks, i'll plug it in
[00:38:04] <huon> wait, I screw up
[00:38:11] <huon> it needs a `return` on the Err
[00:38:19] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[00:38:49] <eddyb> huon: quasi quote pls
[00:39:33] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:39:44] <huon> eddyb: not in libsyntax
[00:39:58] <huon> makes bootstrapping ast changes nearly impossible
[00:40:11] <huon> i.e. one ends up rewriting them into that form
[00:40:18] <huon> to get past stage0
[00:40:20] <huon> seanmonstar: updated
[00:40:30] <eddyb> have you heard my rbin theoretical thing?
[00:40:37] <seanmonstar> i know i really wish i could just write the syntax in strings :D
[00:40:47] <seanmonstar> but im sure it's a terrible idea for some reason
[00:40:47] <eddyb> I guess we could do it "the easy way" by going back to distributing shared libs
[00:41:10] <huon> seanmonstar: updated yet another idea
[00:41:15] <eddyb> seanmonstar: quasi quoting != strings
[00:41:25] <huon> eddyb: yes, I was the one you were talking to when you came up with it
[00:41:33] <seanmonstar> eddyb: quasi quoting =?
[00:41:47] <seanmonstar> template-like?
[00:42:00] *** Quits: k4nar (quassel@moz-EE8DAF45.ip-91-121-75.eu) (Client exited)
[00:42:01] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:42:19] <eddyb> seanmonstar: template strings, if you've used them in any language
[00:42:30] <eddyb> seanmonstar: but with tokens, instead
[00:42:32] <huon> quote_expr!(match $head { Ok(__try_var) => __try_var, Err(__try_var) => return Err(__try_var) })
[00:42:38] <huon> would be the equivalent of that code
[00:42:45] * huon really wishes quasiquoting was feasible in libsyntax
[00:42:50] <seanmonstar> huon omg i want that
[00:43:10] <eddyb> huon: but I have to build stage3 myself to even test:(
[00:43:23] <huon> eddyb: stage3?
[00:43:28] <eddyb> I guess I only have to do it once and keep the result around
[00:43:42] <eddyb> huon: I need a shared lib snapshot to make this work
[00:43:53] <eddyb> currently it's monolithic
[00:44:02] <huon> I thought our current snaps were dynamically linked?
[00:44:13] <huon> we reverted the static linking patch
[00:44:21] <eddyb> ohh
[00:44:21] <seanmonstar> huon: ok, so now i need to plug that into the MethodDef...
[00:44:58] <huon> seanmonstar: `cx.expr_try(<nested decodable call>)` right?
[00:45:00] *** Joins: gimpf (gimpf@moz-DB9DDBEF.adsl.highway.telekom.at)
[00:45:43] <seanmonstar> i'm basically trying to find where self.$field = _d.read_$T()
[00:45:43] <huon> seanmonstar: the things like expr_method_call(..., read_struct_field, ...) just need to be wrapped in taht
[00:45:55] <huon> eurgh...
[00:46:07] <huon> wait, my concern doesn't matter
[00:46:09] <eddyb> huon: I just checked, snapshots are monolithic
[00:46:20] <huon> eddyb: oh, looks like we went back to static again
[00:46:38] <eddyb> which is cool, as long as I can compile against it :D
[00:47:38] <eddyb> stage3 should be able to do everything with stage2 libs, right?
[00:47:52] <huon> seanmonstar: and the calldecode variable needs it too
[00:47:57] <seanmonstar> huon: so like https://github.com/mozilla/rust/blob/master/src/libsyntax/ext/deriving/decodable.rs#L81 ?
[00:48:13] <eddyb> like, stage3 rustc should be able to compile a crate linking against stage2 libsyntax (which is linked into that stage3 rustc)
[00:48:42] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[00:49:27] <huon> seanmonstar: yeah
[00:49:33] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[00:49:38] <huon> and https://github.com/mozilla/rust/blob/master/src/libsyntax/ext/deriving/decodable.rs#L65
[00:49:38] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[00:49:38] *** ChanServ sets mode: +ao pcwalton pcwalton
[00:49:40] <seanmonstar> i can use same `span` val?
[00:49:54] <huon> yes
[00:50:45] <seanmonstar> would essentially become:                 cx.expr_try(span,
[00:50:45] <seanmonstar>                     cx.expr_method_call(span, blkdecoder, read_struct_field,
[00:50:45] <seanmonstar>                                         vec!(cx.expr_str(span, name),
[00:50:45] <seanmonstar>                                           cx.expr_uint(span, field),
[00:50:46] <seanmonstar>                                           lambdadecode)))
[00:52:13] <eddyb> https://github.com/mozilla/rust/commit/e91ffb07105421b39dd6cade712522d0c5262c6c
[00:52:48] <eddyb> so RUSTFLAGS_STAGE3="-Z prefer-dynamic" should do the trick
[00:56:04] *** Quits: eibwen (kvirc@moz-D733931B.dip0.t-ipconnect.de) (Ping timeout)
[00:58:18] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[00:58:20] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Client exited)
[01:01:52] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:03:40] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:06:00] <seanmonstar> :( stage0 rustc takes a little while on my poor laptop
[01:06:35] <huon> yep, libsyntax/librustc changes aren't fun :(
[01:06:52] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[01:06:52] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/9vGq3A
[01:06:52] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[01:08:10] <seanmonstar> huon: is there anyway to see what the syntax looks like that derived made?
[01:09:01] <cmr> seanmonstar: rustc --pretty expanded
[01:09:53] <seanmonstar> cmr: in rust proper? stage1?
[01:10:02] *** Quits: gimpf (gimpf@moz-DB9DDBEF.adsl.highway.telekom.at) (Ping timeout)
[01:11:47] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[01:11:47] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/gU8S5A
[01:11:47] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[01:13:55] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[01:16:32] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[01:18:07] <huon> acrichto: is https://github.com/mozilla/rust/pull/12900 just blocked on a review?
[01:18:28] <acrichto> huon: yes
[01:23:20] <eddyb> the difference between `arc` and `Arc` is that only the latter is safe :P
[01:23:25] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:23:39] <eddyb> (the former can leave a nasty burn if mishandled)
[01:25:23] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:26:54] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[01:29:08] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[01:29:28] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[01:30:26] *** Joins: brson (brson@6A848D32.C1B840DD.76F66111.IP)
[01:30:26] *** ChanServ sets mode: +qo brson brson
[01:31:12] <brson> working on snapshots
[01:32:32] *** kimundi is now known as zz_kimundi
[01:38:49] <acrichto> brson: you're doing the snaps with the attribute change?
[01:39:35] <brson> acrichto: yes
[01:39:46] <acrichto> brson: oh whoops, I started it a bit as well, but you can take over
[01:39:48] <acrichto> my diff so far is https://gist.github.com/9699870
[01:39:56] <acrichto> I had to change the parser's warning about the new attributes a bit
[01:40:01] <acrichto> new syntax*
[01:40:07] <brson> yeah, it was wrong
[01:40:12] <brson> i'll finish
[01:40:58] <acrichto> sure
[01:45:05] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[01:45:07] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:47:00] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:49:20] *** Quits: gwty (gwtypc@980E6763.65D8992A.137C914F.IP) (Ping timeout)
[01:51:06] *** Joins: gwty (gwtypc@980E6763.65D8992A.137C914F.IP)
[01:51:54] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[01:51:54] <ghrust> [13rust] 15bors pushed 4 new commits to 06auto: 02http://git.io/gqj9fQ
[01:51:54] <ghrust> 13rust/06auto 14ab1dd09 15Alex Crichton: rustc: Switch defaults from libgreen to libnative...
[01:51:54] <ghrust> 13rust/06auto 14d2e99a0 15Alex Crichton: rand: Rewrite OsRng in Rust for windows...
[01:51:55] <ghrust> 13rust/06auto 14e7c4fb6 15Alex Crichton: rand: Fix a bug acquiring a context on windows...
[01:51:57] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[01:56:12] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[01:56:12] <ghrust> [13rust] 15brson 04force-pushed 06dist-snap from 14f78bd2b to 14c12cc8d: 02http://git.io/0Tp-4A
[01:56:12] <ghrust> 13rust/06dist-snap 1403d5b0c 15Brian Anderson: mk: Stop building OS X .pkg as part of 'make dist'...
[01:56:12] <ghrust> 13rust/06dist-snap 147ee7830 15Brian Anderson: mk: Reorder definitions in dist.mk...
[01:56:13] <ghrust> 13rust/06dist-snap 1455bef54 15Brian Anderson: mk: Cleanup
[01:56:15] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[01:57:02] <huon> When's 0.10 planned? 2 weeks?
[01:57:22] *** Joins: jdm (jdm@2B5CD89E.ED0C8.AE2B2F80.IP)
[01:57:56] <brson> huon: first week april
[02:06:35] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:07:51] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[02:08:40] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:12:54] <acrichto> brson: something I discovered for freestanding rust, it's impossible to divide two number without the fail_ lang item
[02:13:02] <acrichto> which I found intersting
[02:13:28] <brson> acrichto: aha
[02:13:36] <brson> likewise indexing arrays
[02:13:42] <acrichto> that I would expect though
[02:13:49] <acrichto> you can get around arrays with unsafe pointers
[02:13:53] <acrichto> you can't get around division
[02:13:53] <mcpherrin> integer division or float division?
[02:13:59] <mcpherrin> float division seems like it should be safe
[02:14:06] <acrichto> I'm just working with integers
[02:14:09] <acrichto> dunno about floats
[02:14:23] <mcpherrin> divide by zero with floats should give you NaN I think
[02:14:30] <mcpherrin> rusti: 3 / 0
[02:14:31] -rusti- task '<unnamed>' failed at 'attempted to divide by zero', <anon>:16
[02:14:31] -rusti- application terminated with error code 101
[02:14:39] <brson> we need a way to implement malloc/free/fail lazily in order to pull out a core subset of std
[02:14:44] <mcpherrin> rusti: 3.f32 / 0f32
[02:14:45] -rusti- pastebinned 11 lines of output: http://sprunge.us/WJTR
[02:15:04] <mcpherrin> rusti: 3f32 / 0f32
[02:15:04] -rusti- inf
[02:15:13] <mcpherrin> oh I guess inf, that's nicer than NaN
[02:15:15] <acrichto> brson: pulling std::fmt out of libstd required very few places to accomodate failure
[02:15:19] <acrichto> the main one is division
[02:16:27] <huon> looking at trans, it seems that `match` sometimes inserts a fail!() too
[02:16:56] <acrichto> what cases?
[02:17:07] <huon> wait
[02:17:09] <huon> it can't
[02:17:34] <huon>     assert!((m.len() > 0u || chk.is_fallible()));
[02:17:34] <huon>     /* ... */ if m.len() == 0 { /* emit fail code */ }
[02:17:46] <acrichto> lol
[02:17:49] <brson> acrichto: nice. what deps does the fmt crate have?
[02:17:51] <huon> looks like it's a hold over from non-complete matches/alts
[02:18:10] <huon> hm, oh; it can. That's an ||.
[02:18:56] <acrichto> brson: mainly integer formatting. my current "libstd" is std::{option, result, fmt, num, iter, kinds, ops, bool, char, clone, cmp, intrinsics, raw}
[02:19:02] <acrichto> and very stripped down slice/str modules
[02:19:06] *** Quits: gwty (gwtypc@980E6763.65D8992A.137C914F.IP) (Ping timeout)
[02:19:07] <acrichto> oh and the Writer trait
[02:19:08] <huon> acrichto: looks like it's matching on enum Void {} types
[02:19:19] <acrichto> huon: ah, that makes sense
[02:20:10] <huon> we have a reasonably large amount of special code just for that (impossible) case
[02:20:15] <huon> weird
[02:20:48] *** Joins: gwty (gwtypc@980E6763.65D8992A.137C914F.IP)
[02:23:09] <huon> yep, that's it: https://gist.github.com/huonw/816e5b261fc719c095ca
[02:26:45] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[02:27:56] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:30:18] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:31:41] *** Quits: ninechars (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Ping timeout)
[02:36:49] *** Quits: japaric (japaric@29430DD7.551A521E.212E9B57.IP) (Client exited)
[02:43:30] *** Joins: lpy (lpy@1834E2CB.F09091A8.1348A864.IP)
[02:44:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:44:54] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[02:45:01] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[02:46:34] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:49:37] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:50:04] *** Quits: lpy (lpy@1834E2CB.F09091A8.1348A864.IP) (Client exited)
[02:51:58] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:59:20] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[02:59:20] *** ChanServ sets mode: +ao dherman dherman
[03:00:20] *** Joins: darkf (darkf@moz-F9058B8A.net)
[03:01:48] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[03:01:48] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/gqj9fQ
[03:01:48] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[03:06:46] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[03:06:46] <ghrust> [13rust] 15bors pushed 4 new commits to 06auto: 02http://git.io/ncy3sg
[03:06:46] <ghrust> 13rust/06auto 147785fe1 15Huon Wilson: syntax: make OptVec immutable....
[03:06:46] <ghrust> 13rust/06auto 140384952 15Huon Wilson: syntax: add the OwnedSlice vector wrapper....
[03:06:46] <ghrust> 13rust/06auto 14e33676b 15Huon Wilson: Migrate all users of opt_vec to owned_slice, delete opt_vec....
[03:06:48] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[03:06:49] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[03:06:49] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/IxBHFw
[03:06:49] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[03:10:03] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[03:11:43] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:13:46] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:14:51] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[03:16:41] *** Quits: brson (brson@6A848D32.C1B840DD.76F66111.IP) (Ping timeout)
[03:24:46] <acrichto> r? https://github.com/mozilla/rust/pull/13053
[03:27:29] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[03:27:52] *** Joins: brson (brson@6A848D32.C1B840DD.76F66111.IP)
[03:27:52] *** ChanServ sets mode: +qo brson brson
[03:28:41] <huon> I thought I'd r+'d that last night?
[03:28:45] <huon> I must've forgotten
[03:29:46] <acrichto> thanks
[03:30:07] *** Joins: zimbabao (rajaram@4D42D14A.690944A8.BE4CF869.IP)
[03:33:11] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:35:29] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:36:28] *** Quits: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw) (Ping timeout)
[03:37:35] <cmr> huon: the case of the phantom r+
[03:38:30] *** Joins: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw)
[03:39:05] *** Quits: gwty (gwtypc@980E6763.65D8992A.137C914F.IP) (Ping timeout)
[03:40:07] <cmr> acrichto: http://buildbot.rust-lang.org/builders/auto-win-32-nopt-c/builds/3984/steps/compile/logs/stdio do you know why that'd be missing a dylib?
[03:41:50] *** Joins: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP)
[03:44:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:46:10] <acrichto> cmr: hm, I'm not sure, have you built locally?
[03:46:33] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:47:38] <cmr> admittedly not recently.
[03:47:42] <cmr> I'll kick off another one
[03:47:51] <cmr> (not recently being not after the latest round of rebases)
[03:53:13] *** Quits: zz_kimundi (kimundi@moz-D07AE760.dip0.t-ipconnect.de) (Ping timeout)
[03:54:36] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:56:57] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:57:03] *** Joins: zz_kimundi (kimundi@moz-5822FC56.dip0.t-ipconnect.de)
[03:57:04] *** zz_kimundi is now known as kimundi
[03:59:54] *** Joins: gwty (gwtypc@35E4C51E.7EC07F9E.27560D6E.IP)
[04:01:55] *** Quits: gwty (gwtypc@35E4C51E.7EC07F9E.27560D6E.IP) (Ping timeout)
[04:03:35] *** Joins: gwty (gwtypc@980E6763.65D8992A.137C914F.IP)
[04:08:10] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[04:08:31] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[04:10:07] <aatch> Sweet, casting between simd vector types is working now.
[04:12:20] <brson> acrichto: the new macro syntax has a problem with macros
[04:12:24] <brson> er attr syntax
[04:12:46] <brson> there's a type of macro *thing* called "attr"
[04:12:52] <brson> and it looks like #[...]
[04:13:53] <brson> hm, maybe there's more to this
[04:15:48] <sfackler> brson: are you talking about ItemDecorator/ItemModifier?
[04:15:54] <brson> it appears you can just put `#[qux]` on the main function to make cfg items...
[04:15:58] <brson> what is that?
[04:16:07] <brson> sfackler: no
[04:16:09] <brson> in macro_rules
[04:16:16] <brson> you can say `$a:attr`
[04:16:30] <sfackler> oh
[04:16:43] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[04:17:06] <sfackler> I would *hope* that the macro rules infrastructure is just calling parse_outer_attr or whatever for those
[04:18:12] <brson> what is going on right here: https://github.com/mozilla/rust/blob/master/src/test/compile-fail/macro-inner-attributes.rs#L25
[04:18:38] <brson> #[qux] on main is then used later in #[cfg(qux)]
[04:18:47] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[04:19:06] <huon> that doesn't seem correct?
[04:19:15] <brson> i've never seen this before
[04:19:19] <brson> what is it?
[04:19:19] <huon> It seems like the #[qux] is just ignored
[04:19:33] <huon> at least, I would be very surprised if it wasn't being ignored
[04:20:09] <brson> oh, it is
[04:20:18] <brson> it's meaningless ...
[04:20:18] <huon> I'd guess the problem is $a is being used as an inner attribute in test, but the new attribute syntax means #[cfg(qux)] isn't a valid inner attribute
[04:20:40] <huon> (assuming there is a problem?)
[04:20:52] <brson> that's the reason the test doesn't work
[04:20:56] <brson> but there's no way to make it work
[04:21:08] <huon> :(
[04:21:09] <acrichto> brson: interesting
[04:21:21] <acrichto> that's a good point
[04:21:30] *** Joins: gwty_ (gwtypc@980E6763.65D8992A.137C914F.IP)
[04:21:35] <huon> does `$a mod $nm { ... }` work?
[04:22:04] <Luqman> huon: but the test is explicitly for inner attributes
[04:22:19] <huon> Luqman: oh, true (well, my question still stands)
[04:22:31] <huon> Ah, there might be a sane work around
[04:22:34] <huon> ... well, fix
[04:22:55] <huon> https://github.com/mozilla/rust/blob/master/src/libsyntax/parse/attr.rs#L152
[04:23:12] <huon> could account for whether it was interpolated or not https://github.com/mozilla/rust/blob/master/src/libsyntax/parse/attr.rs#L136
[04:23:28] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[04:23:28] *** ChanServ sets mode: +ao pcwalton pcwalton
[04:24:26] <brson> huon: what you wrote parses
[04:24:26] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[04:26:15] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[04:26:45] <Luqman> brson: but that changes what the tests was for.
[04:26:52] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[04:26:52] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/ncy3sg
[04:26:52] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[04:27:35] <brson> brson: what does?
[04:27:36] <huon> memory_use-- \o/
[04:27:46] <brson> sorry, i'm brson
[04:27:50] <brson> Luqman: what does?
[04:28:25] <brson> this is an incompatibility with macro_rules and the attribute syntax
[04:29:10] <brson> we could make [fooo] be a macro attr type
[04:29:20] <Luqman> brson: sure, but i mean there's already a test for outer attributes. if this tests is no longer valid perhaps just remove it
[04:29:30] <huon> brson: without a leading # or #! ?
[04:29:47] <brson> Luqman: it's not that the test is no longer valid, it's that the new attribute syntax is breaking macros
[04:29:50] <brson> the test is valid
[04:30:03] <brson> a whole type of macro is now not possible
[04:30:27] <brson> huon: to use it you would have to splice in the hash
[04:30:28] <huon> (oh, and then the macro gets to attach the #/#! itself, e.g. => { mod foo { #! $a }, or => { #$a mod foo { } }.)
[04:30:34] <huon> yeah
[04:30:48] <brson> that would preserve the capability that we have now of reading "generic" attributes and putting them anywhere
[04:31:09] * huon likes it
[04:31:21] <acrichto> brson: we could also make an inner_attr and outer_attr matcher
[04:31:42] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[04:31:42] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/WADYsQ
[04:31:42] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[04:31:44] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[04:31:44] <ghrust> [13rust] 15bors pushed 6 new commits to 06auto: 02http://git.io/uTIXTg
[04:31:44] <ghrust> 13rust/06auto 14f3fef9a 15Brian Anderson: std: Make atomics immutable. #11583...
[04:31:44] <ghrust> 13rust/06auto 14eb25c42 15Brian Anderson: std: Make the generic atomics take unsafe pointers...
[04:31:44] <ghrust> 13rust/06auto 148748322 15Brian Anderson: std: Make the generic atomics in `sync::atomics` private...
[04:31:46] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[04:32:08] <brson> acrichto: yes, if we were ok not being able to reuse the same type in both positions
[04:32:16] <brson> which seems potentially reasonable
[04:32:27] <acrichto> that seems reasonable to me
[04:32:42] <acrichto> I think $attr in macros is pretty rare right now
[04:32:43] <brson> though 'inner_attr' and 'outer_attr' is a lot messier than just 'attr'
[04:32:48] <acrichto> true :(
[04:33:51] <sfackler> I use $attr to inject docs in a place or two
[04:34:30] *** Quits: brson (brson@6A848D32.C1B840DD.76F66111.IP) (Ping timeout)
[04:35:05] *** Joins: brson (brson@6A848D32.C1B840DD.76F66111.IP)
[04:35:05] *** ChanServ sets mode: +qo brson brson
[04:39:54] *** Joins: brson_ (brson@moz-62518563.mtv2.mozilla.com)
[04:39:56] *** Quits: brson (brson@6A848D32.C1B840DD.76F66111.IP) (Ping timeout)
[04:40:14] *** brson_ is now known as brson
[04:40:47] <acrichto> brson: $foo:meta
[04:40:58] <acrichto> #[$foo] #![$foo]
[04:41:51] <brson> acrichto: maybe the best, yea
[04:42:02] <brson> would be even better if we still used meta items anywhere else
[04:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[04:46:36] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[04:46:43] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[04:47:35] <sfackler> where else were they used?
[04:48:27] <huon> extern mod foo(...); iirc
[04:49:50] *** Joins: canhtak (canhtak@moz-805AE185.wl.t.ulaval.ca)
[04:51:28] <sfackler> oh yeah
[04:53:06] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[04:53:11] *** Joins: enix_ (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[04:56:54] *** Quits: enix_ (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[04:58:23] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[04:59:00] *** Joins: enix_ (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[04:59:35] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:01:59] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:19:18] *** Quits: mcpherrin (mcpherrin@moz-464166A4.hsd1.ca.comcast.net) (Client exited)
[05:21:41] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:23:46] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:31:24] <huon> we'll need to update editor modes and so on for the new attribute syntax (unless that's been done already?)
[05:32:21] <brson> has not
[05:32:56] <huon> also (unsurprisingly) github's highlighting doesn't like #![...] either
[05:35:18] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[05:38:57] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[05:38:57] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/uTIXTg
[05:38:57] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[05:39:37] <brson> gj bors!
[05:39:57] <brson> rustbot: botsnack
[05:40:30] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[05:40:31] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[05:41:45] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[05:41:45] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/7t_x9Q
[05:41:45] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[05:41:47] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[05:41:48] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/QIY5BQ
[05:41:48] <ghrust> 13rust/06auto 14e1ca02e 15Alex Crichton: std: Implement Clone/TotalEq for ProcessExit...
[05:41:48] <ghrust> 13rust/06auto 14993dee4 15bors: auto merge of #13051 : alexcrichton/rust/issue-13047, r=thestinger...
[05:41:48] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[05:43:09] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:43:31] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[05:43:36] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:43:42] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:45:35] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[05:45:35] <ghrust> [13rust] 15alexcrichton merged 06master into 06snap-stage3: 02http://git.io/npTXSA
[05:45:35] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[05:45:50] <huon> more snaps?
[05:46:27] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:46:49] <huon> (oh, atomics_stage0.rs)
[05:47:56] <acrichto> yeah :\
[05:47:56] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[05:49:53] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[05:50:58] *** Joins: edwardw (Mibbit@B5386878.16F55560.50B134B9.IP)
[05:53:01] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[05:53:01] *** ChanServ sets mode: +qo brson brson
[05:57:38] *** Quits: enix_ (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[06:00:13] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[06:01:27] <brson> hi strcat
[06:01:39] <strcat> \o
[06:03:28] *** Quits: edwardw (Mibbit@B5386878.16F55560.50B134B9.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:06:17] *** Joins: edwardw (Mibbit@B5386878.16F55560.50B134B9.IP)
[06:06:55] <acrichto> brson: r? https://github.com/mozilla/rust/pull/12907
[06:10:39] *** Parts: edwardw (Mibbit@B5386878.16F55560.50B134B9.IP) ()
[06:12:36] <sfackler> is there a target to build the stage1 compiler?
[06:12:46] <acrichto> make rustc-stage1
[06:13:05] <sfackler> thanks
[06:13:15] * sfackler was trying stage1-rustc :D
[06:17:59] *** Quits: canhtak (canhtak@moz-805AE185.wl.t.ulaval.ca) (Quit: canhtak)
[06:19:53] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[06:19:55] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[06:19:55] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[06:22:43] <nrc> is there a way to pretty print a ty::t?
[06:22:59] <nrc> Or convert a ty::t to an ast::Ty?
[06:24:21] <aatch> ty::ty_to_str
[06:24:24] <aatch> nrc: ^^
[06:25:35] <aatch> wait, util::ppaux::ty_to_str
[06:26:15] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[06:28:40] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:32:02] <nrc> thanks aatch!
[06:33:03] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[06:36:03] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[06:36:04] *** ChanServ sets mode: +ao pcwalton pcwalton
[06:38:25] <huon> Is the doc-comment for Share subtly wrong? http://static.rust-lang.org/doc/master/std/kinds/trait.Share.html
[06:38:44] <huon> i.e. isn't Share for things that can be shared in an aliasable way
[06:39:16] <huon> Then Isolate is for things that can be shared in a non-aliased way?
[06:44:43] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[06:45:14] <acrichto> huon: yeah, the definition should be that T is share if &T is threadsafe
[06:45:26] <acrichto> as in, &mut U is Share, even though &mut U isn't threadsafe
[06:45:33] <acrichto> it's b/c &&mut U is actually threadsafe
[06:46:15] <huon> yeah, &&mut being threadsafe is pretty cute
[06:46:20] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[06:46:35] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:49:51] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[06:50:53] *** Quits: zimbabao (rajaram@4D42D14A.690944A8.BE4CF869.IP) (Ping timeout)
[06:51:43] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[06:51:43] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/QIY5BQ
[06:51:43] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[06:54:58] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[06:56:42] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[06:56:42] <ghrust> [13rust] 15bors pushed 7 new commits to 06auto: 02http://git.io/10aD0A
[06:56:42] <ghrust> 13rust/06auto 14769c4ea 15Brian Anderson: Remove check-fast. Closes #4193, #8844, #6330, #7416
[06:56:42] <ghrust> 13rust/06auto 14cdfd4f0 15Brian Anderson: test: Ignore compile-fail/issue-5806.rs...
[06:56:42] <ghrust> 13rust/06auto 14113ed26 15Brian Anderson: mk: Pass the name of the make command to maketest.py...
[06:56:44] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[07:08:32] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[07:09:33] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:11:53] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:13:54] <eddyb> woo bors passes things again :D
[07:13:58] *** Quits: jdm (jdm@2B5CD89E.ED0C8.AE2B2F80.IP) (Ping timeout)
[07:15:08] <eddyb> https://github.com/mozilla/rust/issues/13042 cmr: yes, it's my fault, I didn't implement it initially and then forgot about it
[07:16:05] <eddyb> I hope to get to it in a few hours
[07:16:16] <eddyb> (no idea why I didn't do it yesterday :/)
[07:17:35] *** Parts: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Konversation terminated!)
[07:17:59] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[07:18:33] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[07:18:54] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[07:20:21] <huon> r? https://github.com/mozilla/rust/pull/13070
[07:20:29] <huon> acrichto: ^
[07:20:38] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[07:30:19] *** Joins: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru)
[07:30:45] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[07:30:45] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[07:30:53] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[07:30:59] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[07:31:53] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:32:27] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[07:33:45] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:39:54] *** Quits: gwty (gwtypc@980E6763.65D8992A.137C914F.IP) (Ping timeout)
[07:39:54] *** Quits: gwty_ (gwtypc@980E6763.65D8992A.137C914F.IP) (Ping timeout)
[07:42:24] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[07:42:27] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[07:42:27] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[07:42:48] <eddyb> huon: huh segment.types.map_to_vec(|&t| t).as_slice()
[07:43:01] <huon> eddyb: ?
[07:43:11] <huon> that can be .as_slice(), right?
[07:43:17] <eddyb> yeah
[07:43:20] <huon> wihtout the vecifying
[07:43:54] <aatch> ok, all the relatively-easy SIMD stuff is done.
[07:44:04] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:44:37] <huon> aatch: \o/
[07:44:42] <huon> aatch: now you've only got the last 130% to go
[07:44:48] <eddyb> huon: you can't blame a Java IDE automatic refactoring :/
[07:45:01] <eddyb> now I'm curious what happened
[07:45:10] <aatch> huon, heh, yeah.
[07:45:28] <aatch> But at least the cross product is a one-liner now.
[07:45:31] <eddyb> huon: actually, no, head is fine, I'm confused
[07:45:41] <aatch> There's also some silly things that are kinda hard to fix.
[07:45:48] <huon> aatch: you can't say that without demonstrating it
[07:45:49] <eddyb> huon: aaaah, map_to_vec is from OptVec. carry on
[07:45:53] <huon> (the cross product)
[07:46:08] <huon> eddyb: you're solving rebase conflicts?
[07:46:23] <eddyb> yupp. didn't realize the ugly one was on my side :P
[07:46:32] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:46:34] <huon> yep, all your fault :P
[07:46:34] <aatch> u.yzx * v.zxy - u.zxy * v.yzx
[07:46:43] <huon> the new owned_slice is super slick
[07:46:59] <huon> aatch: cool
[07:47:05] <eddyb> Applying: P
[07:47:11] <eddyb> huon: now I see :P everywhere
[07:47:18] <huon> ast::P
[07:47:19] <eddyb> well, I deserve it, TBQH
[07:48:16] <aatch> 4 shuffles, two multiplications and 1 subtraction, I'm pretty sure that because it's all done in registers, each instruction is a single cycle
[07:48:42] <huon> and the shuffles have no data dependencies
[07:48:59] <huon> (and the mults don't depend on each other either)
[07:49:07] <huon> so theoretically it pipelines well too
[07:49:18] <eddyb> all 4 shuffles can be done in parallel, no?
[07:49:27] <aatch> eddyb, in theory yes.
[07:49:35] <eddyb> then the multiplications can be done in parallel and then you subtract
[07:49:42] <huon> eddyb: that's what I meant by no dependencies :)
[07:49:45] <eddyb> so it could take 3 cycles
[07:49:48] <aatch> a cpu *could* do the entire thing in 3 cycles
[07:49:58] <eddyb> right. but does it really?
[07:50:05] <aatch> eddyb, no idea.
[07:50:09] <eddyb> aatch: can you benchmark this? with the black box
[07:50:45] <eddyb> you need to black box the inputs *before* entering the bench loop
[07:50:54] <eddyb> hopefully that won't reduce the loop to one iteration
[07:52:09] <eddyb> while not requiring a memory load before each iteration
[07:52:15] <eddyb> though that sounds super hard
[07:52:52] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:55:15] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:56:47] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[07:56:47] <ghrust> [13rust] 15bors 04force-pushed 06auto from 142fc3c0e to 14993dee4: 02http://git.io/N3iJvQ
[07:56:47] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[07:56:49] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[07:56:49] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/P525Jw
[07:56:49] <ghrust> 13rust/06auto 14811257e 15Alex Crichton: std: Rename {push,read}_bytes to {push,read}_exact...
[07:56:49] <ghrust> 13rust/06auto 14092afdb 15bors: auto merge of #12907 : alexcrichton/rust/issue-12892, r=brson...
[07:56:49] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[07:59:08] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[08:01:54] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:02:06] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:02:11] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:02:51] *** Quits: pauls (pauls@moz-BFEF1F22.ccs.neu.edu) (Ping timeout)
[08:04:16] *** Joins: pauls (pauls@moz-BFEF1F22.ccs.neu.edu)
[08:04:24] *** Joins: andrew-d_w (andrew-d_w@moz-17320F4E.hsd1.ca.comcast.net)
[08:04:36] *** Quits: andrew-d_w (andrew-d_w@moz-17320F4E.hsd1.ca.comcast.net) (Input/output error)
[08:05:06] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[08:07:37] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:08:01] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:15:02] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:17:04] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:18:38] *** Joins: gwty (gwtypc@980E6763.65D8992A.137C914F.IP)
[08:18:44] *** Joins: gwty_ (gwtypc@980E6763.65D8992A.137C914F.IP)
[08:20:32] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[08:23:43] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:23:50] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:23:56] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:24:33] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:27:36] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[08:36:28] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:38:35] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:40:45] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:40:45] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:46:33] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:47:30] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Quit: leaving)
[08:51:12] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[08:51:13] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[08:51:14] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[08:54:15] <eddyb> huon: hopefully this will get us less painful stage1 builds http://buildbot.rust-lang.org/console?branch=snap-stage3&refresh=15
[08:57:51] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:59:09] <nrc> if I have a struct with  a lifetime parameter, what should the constructor look like?
[08:59:41] <nrc> I can't seem to come up with anything which doesn't result in awful lifetime inference errors
[08:59:44] <eddyb> nrc: impl<'a> Foo<'a> {fn new(x: &'a T) -> Foo<'a>;}
[08:59:59] <eddyb> nrc: i.e. if you have an impl, don't make static functions generic
[09:00:12] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:00:20] <nrc> what does x do?
[09:01:12] <nrc> oh, it is just something used in the construction of Foo?
[09:01:17] <eddyb> yupp
[09:01:36] <eddyb> or do you have magic keys with markers?
[09:02:10] <nrc> no, that seems to work
[09:02:15] <nrc> thanks eddyb!
[09:02:25] <eddyb> np
[09:02:50] <eddyb> nrc: I hope DST is coming along nicely ;)
[09:03:18] <eddyb> meanwhile, I have issues to fix (when will I ever learn to always implement features cross-crate as well?)
[09:03:41] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[09:03:52] <aatch> eddyb, hah!
[09:04:04] * aatch remembers that he hasn't tested SIMD cross-crate
[09:05:01] <nrc> eddyb: I've started, nicely is maybe too strong a word
[09:05:17] <eddyb> nrc: well, I've started VG months ago :P
[09:05:28] <eddyb> but I am confident you will finish first
[09:05:51] <nrc> VG?
[09:05:59] <eddyb> variadic generics
[09:06:23] <eddyb> maybe I should stop listening to these beautiful bird sounds and write some RFCs
[09:06:50] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[09:06:50] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/P525Jw
[09:06:50] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[09:07:33] *** Joins: gimpf (gimpf@moz-DB865D66.adsl.highway.telekom.at)
[09:10:28] <aatch> I should update my SIMD RFC
[09:10:48] <aatch> add some details.
[09:11:49] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[09:11:49] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/kOovYA
[09:11:49] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[09:11:49] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[09:11:49] <ghrust> [13rust] 15bors pushed 3 new commits to 06auto: 02http://git.io/iz_aDw
[09:11:49] <ghrust> 13rust/06auto 14181875c 15Steven Fackler: Remove RefCell::{with, with_mut}...
[09:11:49] <ghrust> 13rust/06auto 141d98fe1 15Steven Fackler: Clean up marker types and Unsafe initialization
[09:11:50] <ghrust> 13rust/06auto 1420d428a 15bors: auto merge of #13052 : sfackler/rust/clean-refcell, r=alexcrichton...
[09:11:52] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[09:16:53] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[09:18:40] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[09:20:01] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[09:21:56] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:24:11] <nrc> eddyb: I am having trouble with the de-@'ed CodeMap - I have a &CodeMap now, but I want to call mk_span_handler, I can't do that because I can't deref my &CodeMap - what should I do now?
[09:24:50] <nrc> (lexer::new_string_reader is giving me even more trouble :-( but one thing at a time)
[09:29:03] <eddyb> nrc: it's all based on ownership now
[09:29:44] <eddyb> nrc: you shouldn't have a &CodeMap but rather a SpanHandler owning a CodeMap
[09:30:18] <nrc> But I want to reuse an existing code map - I guess I can't do that?
[09:30:43] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[09:30:50] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[09:31:35] <eddyb> nrc: where does that CodeMap come from?
[09:32:00] <eddyb> is it borrowed from within a SpanHandler? if it is, don't create a new SpanHandler, reuse the one you have
[09:32:39] <nrc> the code map comes from the session, I guess there is a SpanHandler somewhere, but I don't ahve access to it
[09:32:44] <eddyb> nrc: you do ;)
[09:32:55] <eddyb> the session holds a SpanHandler
[09:33:07] <eddyb> nrc: I think .diagnostic() on Session
[09:33:51] <nrc> ok, I'll try that, that would fix my new_string_reader problem too
[09:34:31] <eddyb> nrc: we had duplicate @ handles all over the place
[09:35:00] <eddyb> struct A {b: @B, c: @C} where C contains @B. this, nested two or three times
[09:37:24] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[09:39:23] <nrc> GAH! `CodeMap`, but `codemap`, not `code_map`
[09:39:48] * nrc ctrl+Hs
[09:41:27] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[09:43:41] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:44:15] <nrc> error: cannot infer an appropriate lifetime for autoref due to conflicting requirements
[09:44:18] * nrc cries
[09:46:32] <eddyb> nrc: can I help?
[09:47:31] <nrc> eddyb: I hope so - http://pastebin.mozilla.org/4652485
[09:47:54] <nrc> where self is
[09:47:57] <nrc> pub struct SpanUtils<'a> {
[09:47:58] <nrc>     sess: &'a Session,
[09:48:00] <nrc>     err_count: int,
[09:48:01] <nrc> }
[09:50:09] <eddyb> nrc: aww that's easy mode :)
[09:50:18] <eddyb> so the story is, we have a nasty bug
[09:50:34] <eddyb> rusti: fn foo() -> &str {"bar"} foo()
[09:50:35] -rusti- bar
[09:50:47] <eddyb> rusti: fn foo() -> &str {"bar"} let x: &'static str = foo(); x
[09:50:47] -rusti- bar
[09:50:56] <eddyb> I guess we don't check that. heh
[09:51:12] <eddyb> nrc: in any case, the issue is that you shouldn't be able to omit lifetimes in the return type
[09:51:25] <eddyb> nrc: but you can, and in your case, you forgot <'a> on the return type
[09:53:43] <eddyb> hmm, what's middle/save? DXR?
[09:56:18] <nrc> eddyb: yep
[09:56:25] <nrc> eddyb: that works, thanks!
[09:58:09] *** Quits: ktt3ja (ktt3ja@moz-54586A12.washdc.fios.verizon.net) (Quit: Leaving)
[09:59:12] <eddyb> https://github.com/mozilla/rust/pull/13061 heh
[10:00:15] *** Quits: rcxdude (rcxdude@moz-394D851.nat.csx.cam.ac.uk) (Quit: Konversation terminated!)
[10:02:49] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[10:03:03] <nrc> Yay, DXR is building again
[10:03:08] <nrc> another rebase done
[10:03:23] <eddyb> nrc: aatch hit the same changes you did
[10:04:00] <eddyb> though, to be fair, 6k lines of de-@ wasn't going to get unnoticed in rebases
[10:04:08] <nrc> this one was not so painful, really
[10:04:46] <eddyb> the ' in 'a can be sharp sometimes :P
[10:04:49] <nrc> just a bit of borrow-checker wrestling - at least the ast hasn't changed, that is what usually screws me
[10:05:00] <nrc> heh :-)
[10:05:04] <eddyb> nrc: oh you just wait ;)
[10:05:10] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:05:18] <eddyb> I have a mass P-ing in the works
[10:05:40] <aatch> eddyb, I was more annoyed that I had to go through and change a bunch of places because I didn't notice the extra single '&'
[10:06:08] <eddyb> aatch: I wish git rebase would not care so much for context
[10:06:11] <nrc> removing the P<> things all over the place?
[10:06:20] <eddyb> nrc: adding them all over the place
[10:06:31] <nrc> :-(
[10:06:34] <nrc> why?
[10:06:37] <eddyb> P is supposed to replace @, just didn't get to it until now - and now it can happen without much pain
[10:06:38] *** Joins: eibwen (kvirc@moz-6D827A33.dip0.t-ipconnect.de)
[10:06:57] <nrc> Why P and not Rc?
[10:07:05] <eddyb> Rc is longer
[10:07:14] <eddyb> and you don't want to be able to share AST nodes
[10:07:39] <nrc> Ps can't be shared?
[10:07:42] <eddyb> nope
[10:07:44] <nrc> Why not ~ then?
[10:07:52] <eddyb> because I need to do certain experiments
[10:08:03] <eddyb> some people believe arenas are the answer
[10:08:21] <eddyb> nrc: it might end up as just ~, who knows
[10:08:58] <eddyb> aatch: at least it guards against certain surprises, but I wish I could shrink the conflict ranges to a few characters
[10:09:29] <nrc> I guess as an intermediary step to experiment it is not so bad, but it would kind of make me sad if we had to use a custom pointer to write our own compiler
[10:09:46] <aatch> nrc, why?
[10:10:10] <aatch> compilers are not ordinary pieces of software.
[10:10:45] <aatch> I mean, servo has a bunch of custom pointer types.
[10:11:04] <nrc> true, but they are not usually so perf/memory sensitive as some things, such as a browser
[10:11:05] <eddyb> nrc: there's a ~300MB gain (post-trans) from just making the tcx use an arena instead of ~ pointers
[10:11:17] <eddyb> haha, compilers? you don't know my pain then
[10:11:48] <eddyb> glibc doesn't reclaim memory at all, so you can't play fast an loose with it
[10:12:23] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Connection reset by peer)
[10:14:01] <nrc> I guess what I mean is, compilers are predictable (ish) compared to an interpreter or any kind of host environment, which is where, I think, memory management gets really complicated
[10:14:02] *** flaper87|afk is now known as flaper87
[10:14:52] <eddyb> nrc: well, true
[10:15:02] <eddyb> but it doesn't make compilers any easier to design
[10:15:16] <nrc> of course, just different
[10:16:18] <eddyb> nrc: a tiny stat function and we get a lot of insight https://gist.github.com/eddyb/20fb641bc5e3794049da
[10:16:36] <nrc> and I would murder for faster compile cycles, so carry on :-)
[10:16:56] <eddyb> turns out, most of the types in the interner aren't used outside of type-checking in the function that created them
[10:17:14] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[10:17:29] <eddyb> you can have a type interner local to that function, and then you lose a few hundred MBs
[10:17:35] <nrc> nice
[10:17:50] <nrc> OK, bed time
[10:17:54] <nrc> night all!
[10:18:34] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 31.0a1/20140320030203])
[10:19:23] <eddyb> acrichto: I am curious, can we get const eval'd hashing for what is basically Some(Vec::new())?
[10:20:01] <aatch> eddyb, did you have some thought about improving/changing how we do codegen for expressions?
[10:20:50] <eddyb> yes
[10:21:19] <aatch> care to elaborate...?
[10:21:41] <eddyb> add a generic mechanism to trans::adt, that can be SaveIn(destination) / Ignore (these two are trans::expr::Dest atm) / Return
[10:22:15] <eddyb> so depending on the type, you get different behaviors
[10:22:32] <eddyb> SaveIn would give you sub-pointers to an alloca
[10:22:51] <eddyb> (or a different storage, like the return pointer in functions which return like that)
[10:23:05] <eddyb> while Return would combine the individual values into an aggregate
[10:44:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[10:47:48] * huon hopes aatch will land a patch that's a single commit adding fancy simd, const-expr branch front end optimisations and a new way to codegen exprs
[10:48:23] <aatch> huon, I opened a PR for the middle one
[10:48:35] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:48:50] * huon disappointed
[10:49:00] <huon> :P
[10:49:42] <eddyb> huon: hey, the last one is mine
[10:50:03] <eddyb> unless, you know, someone else can implement the design I'd like to see
[10:50:15] <huon> eddyb: well, aatch did just ask about it
[10:50:22] <huon> which implies he's considering implementing it
[10:50:33] <huon> or generally fiddling with codegening exprs
[10:50:44] <huon> even if it's not taking exactly what you're thinking of
[10:50:49] <eddyb> it's not easy to fix...
[10:50:55] <huon> doesn't matter
[10:51:02] <eddyb> there's some duplicated code that has to be minimized
[10:51:24] <eddyb> and the generic stuff needs to be generic enough to work in all the cases
[10:53:32] <aatch> there's a ton of stuff that needs to change to make SIMD work properly. Especially around the way we codegen assignment expressions
[10:53:32] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[10:53:49] *** Joins: k4nar (quassel@moz-EE8DAF45.ip-91-121-75.eu)
[10:55:04] <huon> aatch: there's very similar logic in controlflow::trans_if btw
[10:55:16] <huon> (for const-expr branches)
[10:55:21] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[10:56:22] <aatch> huh, so there is
[10:57:45] <eddyb> oh, right, we don't trans contents of if false {...}
[10:58:03] <eddyb> aatch: which kind of assignment?
[10:58:27] <eddyb> aatch: can you show bad IR?
[10:59:01] <aatch> eddyb, if by "bad IR" you mean "doesn't/shouldn't work", then it's for assignment to the result of shuffles.
[10:59:37] *** Joins: ninechars (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[10:59:54] <aatch> it actually compiles fine, there technically isn't any "bad" IR, as it all gets DCE'd into the void...
[11:00:10] <eddyb> use the black box to keep it alive
[11:00:18] <eddyb> or, I guess it's bad before any optmizations
[11:00:44] <aatch> eddyb, not the issue here. there's no way of sanely translating it under the current set up
[11:01:10] <eddyb> because you get a value that you then have to save at a memory address?
[11:02:21] <aatch> eddyb, so if you do something like `v.zx = u.xy` it *should* set the z and x components of 'v' to the x and y components of 'u', respectively
[11:03:11] <kimundi> Hm... With DST I want a kind literally called "Trait" that is implemented by all traits. :P
[11:03:33] <aatch> with the way it works at the moment, it creates a temporary for the result of v.zx and writes into that, but then does nothing because it's got no idea what it all means
[11:03:36] <eddyb> kimundi: you may want generics over traits
[11:03:41] <huon> aatch: haha
[11:03:49] <huon> eddyb: that's exactly what he wants?
[11:04:00] <huon> aatch: who needs the output of computations anyway
[11:04:03] <eddyb> well... Trait would be a trait :/
[11:04:12] <eddyb> aatch: that's because it's not an lvalue
[11:04:27] <huon> aatch: does z.xz = ... even make sense?
[11:04:34] <aatch> huon, it does.
[11:04:44] <eddyb> aatch: *however* with my changes, you could have a SaveInSimdShuffle mode
[11:04:47] <huon> aatch: oh, slicing into another type?
[11:04:51] <eddyb> well, future envisioned changes
[11:04:54] <huon> that's fancy stuff
[11:05:00] <aatch> huon, its in Open CL
[11:05:07] <huon> what does z.xx = y; do?
[11:05:35] <aatch> huon, no idea, except fail to typecheck
[11:05:45] <aatch> unless y was simd![T,..2]
[11:05:46] <eddyb> aatch: i.e. a special kind of lvalue
[11:06:02] <kimundi> fn get_vtable<Tr: Trait, T: Tr>() -> Vtable<Tr> // silly example
[11:06:03] <huon> will `simdex![a, 1, 2, 3] = ...` be valid (assuming you're using that?)
[11:06:23] <huon> aatch: wait, seriously?
[11:06:28] <aatch> huon, I am not using that at the moment, I guess it could be though.
[11:06:36] <huon> aatch: is it defined behaviour the order in which the writes happen?
[11:06:48] <huon> i.e. is that equivalent to `z.x = y.x` or `z.x = y.y`?
[11:07:17] <aatch> huon, well I'd implement it as a shuffle, so it's possible it's not valid.
[11:07:56] <aatch> since shufflevector can take 2 vectors
[11:09:38] <aatch> hmm... I'm going to see if OpenCL mentions that case...
[11:10:26] <huon> aatch: also, if you're not using simdex... how do you do shuffle larger than 8
[11:10:28] <huon> ?
[11:10:49] <aatch> huon, hexadecimal?
[11:11:06] <huon> aatch: larger than 16?
[11:11:07] <aatch> v.s0123456789abcdef
[11:11:14] <aatch> huon, write it out by hand.
[11:11:22] <huon> using?
[11:11:58] <aatch> huon, generally manually writing out the permutation optimizes to the same shuffle
[11:12:16] <aatch> so simd![v[1], v[0], v[2]] will optimise to a shuffle.
[11:12:47] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[11:12:51] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[11:13:01] <eddyb> aatch: oh, I know how you can do it for now
[11:13:05] <aatch> but I want to know who's using vectors bigger than 16 elements. Just seems unnecessary.
[11:13:21] <huon> aatch: oh, I see
[11:13:26] <eddyb> aatch: you'll have to special case ExprAssign for a shuffle LHS
[11:13:27] <huon> aatch: future proof
[11:13:46] <huon> and yeah, what about large shuffles on the LHS?
[11:13:58] <huon> as eddyb says
[11:14:13] <eddyb> aatch: then translate the RHS as a vector, apply the reverse of the LHS shuffle, and assign it
[11:14:22] <eddyb> as a temporary solution, that is
[11:14:28] <huon> eddyb: doesn't quite work in general
[11:14:44] <eddyb> huon: I can abstract this away as pattern matching
[11:15:02] <eddyb> or rather, pattern assignment, which we don't have yet
[11:15:24] <eddyb> if we implement it, it should use the same code path as SIMD shuffle assignment
[11:15:25] <huon> e.g. a: simd![f64, .. 3] b: simd![f64, .. 2] then a.xz = b is hard to imitate with RHSs
[11:15:37] <huon> not impossible
[11:15:56] <eddyb> huon: a.x = b.x, a.z = b.y
[11:16:10] <eddyb> huon: where b is the temporary that results from translating the RHS expression
[11:16:48] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[11:16:49] <ghrust> [13rust] 15bors pushed 8 new commits to 06auto: 02http://git.io/5TlmHA
[11:16:49] <ghrust> 13rust/06auto 14048847b 15Alex Crichton: std: Remove the get() method from RefCell wrappers...
[11:16:49] <ghrust> 13rust/06auto 14fb680a7 15Alex Crichton: syntax: Fix fallout of removing get()
[11:16:49] <ghrust> 13rust/06auto 1477e925d 15Alex Crichton: arena: Fix fallout of removing get()
[11:16:51] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[11:17:28] <huon> oh, you're allowed multiple RHSes now? that wasn't in the rule book I had
[11:17:29] <huon> :P
[11:17:33] <huon> (but yeah, that works)
[11:17:56] <eddyb> acrichto: https://github.com/mozilla/rust/issues/13066 is a dupe of https://github.com/mozilla/rust/issues/12825
[11:18:59] <eddyb> huon: there's one RHS from which you extract values and assign into each of the LHS shuffle subvalues
[11:19:26] <huon> eddyb: multiple assignments == multiple RHSes
[11:19:48] <eddyb> huon: there's one assignment, one RHS, translated as multiple assignments
[11:19:48] <huon> erm, LHSes
[11:19:54] <eddyb> aah, I see
[11:19:59] <huon> gah, L and R are right next to each other :P
[11:20:04] <eddyb> a.xz = b; is [a.x, a.z] = b; which we don't have general support for
[11:20:17] <huon> (sorry for the confusion)
[11:20:46] <eddyb> aatch: is there a shuffle-assign?
[11:20:56] <eddyb> aatch: or just consecutive stores/insertvalues?
[11:21:11] <aatch> eddyb, what do you mean? At the IR level?
[11:21:17] <eddyb> yeah
[11:22:39] <aatch> shufflevector takes two vectors and a mask, so you'd do `%result = shufflevector v_lhs v_rhs mask` with a mask that selects the right components from each vector
[11:23:39] <eddyb> ahh
[11:23:46] <eddyb> aatch: well, you can produce that
[11:24:04] <aatch> so v.xy = u.yx, where they're 3-element vectors would have a mask something like <5, 4, 3>
[11:24:12] <eddyb> it's a special case of pattern-assign, that's all I'm saying
[11:24:33] <eddyb> the good news is that we might be able to implement it efficiently in the general case
[11:24:51] <eddyb> aatch: but if you want *that* IR, you need to special case ExprAssign for them anyways
[11:25:39] <aatch> huon, I checked the OpenCL spec and it doesn't allow for repeated components on the LHS
[11:26:25] <eddyb> yeah, special case all the way
[11:26:39] <eddyb> aatch: I'll have to do something similar for ExprAssign with an ExprIndex LHS :(
[11:27:18] <huon> aatch: worth noting on the RFC?
[11:28:10] <aatch> huon, probably
[11:28:26] <aatch> I'll work on it a bit tomorrow *looks at time* later
[11:29:27] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:31:51] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:44:04] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:46:27] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:51:07] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:53:21] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[11:53:33] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:56:49] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[11:56:49] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1480786ef to 14092afdb: 02http://git.io/N3iJvQ
[11:56:49] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[11:56:51] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[11:56:51] <ghrust> [13rust] 15bors pushed 3 new commits to 06auto: 02http://git.io/p7r68A
[11:56:51] <ghrust> 13rust/06auto 14181875c 15Steven Fackler: Remove RefCell::{with, with_mut}...
[11:56:51] <ghrust> 13rust/06auto 141d98fe1 15Steven Fackler: Clean up marker types and Unsafe initialization
[11:56:51] <ghrust> 13rust/06auto 1430165e0 15bors: auto merge of #13052 : sfackler/rust/clean-refcell, r=alexcrichton...
[11:56:53] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[12:05:01] <huon> klutzy: thanks for the windows work
[12:13:06] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[12:13:13] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:14:45] <klutzy> windows is fun since everything is broken ;)
[12:15:00] <klutzy> it's like riddlebook written in unknown language
[12:15:10] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:15:25] <huon> well, the bootstrap almost finished, only rustdoc is glaringly wrong :P
[12:34:31] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[12:34:44] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:34:50] *** Joins: zimbabao (rajaram@4D42D14A.690944A8.BE4CF869.IP)
[12:34:52] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[12:36:52] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:44:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:46:02] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Client exited)
[12:46:24] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:50:00] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[12:50:25] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[12:56:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:56:58] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[12:58:29] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:03:03] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[13:05:10] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[13:06:46] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[13:06:46] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/p7r68A
[13:06:46] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[13:08:14] *** Quits: ninechars (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Connection reset by peer)
[13:08:22] *** Joins: ninechars (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[13:11:46] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[13:11:46] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/0x8v2A
[13:11:46] <ghrust> 13rust/06auto 148da5ed2 15Matt Brubeck: Copy-edit a sentence about borrowing references
[13:11:46] <ghrust> 13rust/06auto 14d48f033 15bors: auto merge of #13062 : mbrubeck/rust/doc-edit, r=alexcrichton...
[13:11:47] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[13:11:51] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[13:11:51] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/UwS-Mg
[13:11:51] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[13:15:20] *** Quits: gwty (gwtypc@980E6763.65D8992A.137C914F.IP) (Ping timeout)
[13:15:36] *** Quits: gwty_ (gwtypc@980E6763.65D8992A.137C914F.IP) (Ping timeout)
[13:18:13] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:20:14] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:38:38] *** Joins: canhtak (canhtak@moz-805AE185.wl.t.ulaval.ca)
[13:39:44] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:40:04] <klutzy> bad windows
[13:40:34] <klutzy> it returned errno which is not precisely documented in msdn
[13:41:19] <klutzy> not sure if I'm calling winapi incorrectly or win8.1 is broken
[13:41:32] <huon> why not both \o/
[13:41:56] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:43:44] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[13:44:45] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:45:46] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[13:46:33] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:51:29] *** Joins: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com)
[14:01:03] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:02:25] *** Quits: ninechars (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Quit: )
[14:02:27] *** Joins: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[14:03:27] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:08:50] *** Joins: edwardw (edwardw@4299445D.BF90DB87.492F1EB9.IP)
[14:10:29] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[14:17:45] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Ping timeout)
[14:20:40] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[14:21:46] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[14:21:46] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/QjAS1Q
[14:21:46] <ghrust> 13rust/06auto 148da5ed2 15Matt Brubeck: Copy-edit a sentence about borrowing references
[14:21:46] <ghrust> 13rust/06auto 14e233a43 15bors: auto merge of #13062 : mbrubeck/rust/doc-edit, r=alexcrichton...
[14:21:47] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[14:21:50] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[14:21:50] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14d48f033 to 1430165e0: 02http://git.io/N3iJvQ
[14:21:50] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[14:23:15] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:25:07] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:26:01] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Connection reset by peer)
[14:26:13] *** Joins: jensnock_ (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[14:26:24] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[14:30:31] *** Quits: jensnock_ (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[14:34:31] *** Quits: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru) (Input/output error)
[14:35:01] *** Joins: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru)
[14:36:49] *** Quits: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru) (Ping timeout)
[14:42:03] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[14:42:25] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[14:45:53] *** Joins: jdm (jdm@2B5CD89E.ED0C8.AE2B2F80.IP)
[14:46:17] *** Quits: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Ping timeout)
[14:49:15] <cmr> acrichto: separate-libc builds fine here..
[14:50:27] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[14:50:28] <edwardw> r? https://github.com/mozilla/rust/pull/13034
[14:50:41] <acrichto> eddyb: oh indeed, thanks!
[14:51:12] <acrichto> cmr: interesting, I'll try locally on osx
[14:52:13] <acrichto> oh wait it failed on windows
[14:52:25] *** Joins: japaric (japaric@F981A487.D1A0B378.5C7588CA.IP)
[14:52:44] <cmr> I'll try try
[14:53:06] <eddyb> and fail fail?
[14:53:18] <cmr> hopefully not :(
[14:53:36] <cmr> bah git gc picked an inopportune time to run
[14:53:37] <eddyb> acrichto: y u thank me when it's my fault :P? oh, that's the mut thing, nevermind, nmatsakis said he'll fix it
[14:53:55] <eddyb> cmr: you don't want to fail fail? so you want to fail?
[14:54:14] <acrichto> eddyb: yeah I remember niko saying that there were some weird possible bugs around it and how it might intertwine thing
[14:54:20] <acrichto> not super pressing b/c you can just call deref() manually
[14:54:23] <acrichto> and it's pretty rare
[14:54:38] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[14:54:46] <eddyb> it actually shouldn't happen for the current set of types that implement DerefMut
[14:54:54] <eddyb> acrichto: but the underlying issue is blocking index traits
[14:56:04] <acrichto> :(
[14:58:46] <eddyb> acrichto: because v[i].foo() will always call v.index_mut(i).foo()
[14:58:56] <eddyb> (under the current rules)
[14:59:57] <eddyb> I tried to have "minimal requirements" but method calls can always need mutable
[15:00:07] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[15:00:18] <eddyb> acrichto: there's one case where I do the right thing, even for method calls, and that's encountering a &T during autoderef
[15:00:58] <eddyb> because you can't go immutable -> mutable without an intermediary expression (like a method call to borrow_mut), it's safe to always take the immutable path in that case
[15:02:08] <eddyb> acrichto: to expand it to all immutable lvalues would require mem_categorization (which is the thing that distinguishes between rvalue, lvalue, dereference of various pointers, index, field, etc.) to be used during type checking
[15:02:29] <eddyb> acrichto: which you can't just "do" without leaving hacks and scars everywhere :(
[15:02:41] <eddyb> (and potentially have erroneous cases)
[15:03:28] <eddyb> in any case, nmatsakis seems to know what to do, so I won't bang my head too much trying to fix the issue
[15:03:39] *** Joins: lpy_ (lpy@E44EE2C4.F09091A8.1348A864.IP)
[15:04:50] *** Quits: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP) (Ping timeout)
[15:05:21] <eddyb> acrichto: wasn't a snapshot built? https://github.com/mozilla/rust/pull/12900
[15:05:31] *** Quits: lpy_ (lpy@E44EE2C4.F09091A8.1348A864.IP) (Ping timeout)
[15:05:44] <eddyb> I guess brson needs to update #13068
[15:06:05] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:06:22] *** Joins: jensnockert (jensnocker@moz-A383D2B9.mobileonline.telia.com)
[15:06:31] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[15:06:58] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Quit: Leaving...)
[15:07:19] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[15:08:31] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:10:40] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[15:11:01] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[15:11:34] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[15:11:34] <ghrust> [13rust] 15cmr 04force-pushed 06try from 148d39c58 to 140ea40f0: 02http://git.io/k471pw
[15:11:34] <ghrust> 13rust/06try 14466883f 15Corey Richardson: Remove libc from std...
[15:11:34] <ghrust> 13rust/06try 144b0b735 15Corey Richardson: fix fallout from std::libc separation
[15:11:35] <ghrust> 13rust/06try 14d7915f4 15Corey Richardson: Add unrecognized_lint
[15:11:37] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[15:11:37] *** Joins: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru)
[15:13:26] *** Quits: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru) (Ping timeout)
[15:21:21] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[15:22:11] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[15:22:32] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[15:23:47] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[15:24:18] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[15:28:13] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:30:00] <klutzy> don't understand why FormatMessageW() doesn't work well
[15:30:13] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:30:22] <klutzy> I made small .c file which calls FormatMessageW
[15:30:29] *** Quits: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com) (Ping timeout)
[15:30:36] <klutzy> and made .rs file which calls ffi of .c file
[15:30:55] <klutzy> then it failed to run properly
[15:31:17] <klutzy> then I compiled .c with `int main() { call_c_func(); }` then it worked
[15:31:20] <acrichto> eddyb: yeah I'm including the snapshot in my sync rewrite now
[15:31:30] <acrichto> klutzy: oh yes, that bug, so that's an interesting bug
[15:31:35] <eddyb> klutzy: are you sure you're using the "system" cconv?
[15:31:39] <acrichto> klutzy: do you know what syscall is failing before the formatmessage call is failing?
[15:31:57] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[15:31:57] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/QjAS1Q
[15:31:57] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[15:32:05] <eddyb> klutzy: I guess you'd know, nevermind me
[15:32:42] <klutzy> acrichto: I actually used hardcoded errno (number 2)
[15:33:19] *** Quits: edwardw (edwardw@4299445D.BF90DB87.492F1EB9.IP) (Ping timeout)
[15:33:43] *** Joins: edwardw (edwardw@861842BE.B4F65FC7.A0A36CCE.IP)
[15:33:44] <acrichto> hm
[15:33:46] <klutzy> and FormatMessage is even called by c glue code. it's really embarrassing
[15:33:56] <acrichto> not any more though
[15:34:00] <acrichto> I moved that to librand
[15:34:15] <klutzy> acrichto: ah, I way saying about my test code
[15:34:23] <acrichto> ah
[15:36:04] <klutzy> like this https://pastebin.mozilla.org/4654049
[15:36:52] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[15:36:52] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/ksouMw
[15:36:52] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[15:41:31] <eddyb> huon: oh wow the owned folding code is compiling
[15:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:46:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:47:11] *** Joins: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP)
[15:48:00] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[15:48:33] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[15:48:33] <ghrust> [13rust] 15cmr pushed 1 new commit to 06try: 02http://git.io/tqQ5Vw
[15:48:33] <ghrust> 13rust/06try 14156b4ea 15Corey Richardson: switch to native for start lang item
[15:48:33] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[15:49:04] *** Quits: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[15:49:22] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:49:50] *** Joins: gwty (gwtypc@3CAC4C72.A9D442CE.49FF672.IP)
[15:49:57] *** Joins: gwty_ (gwtypc@3CAC4C72.A9D442CE.49FF672.IP)
[15:51:45] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:57:00] *** Quits: zimbabao (rajaram@4D42D14A.690944A8.BE4CF869.IP) (Ping timeout)
[15:57:36] *** Joins: lpy (lpy@1834E2CB.F09091A8.1348A864.IP)
[16:11:36] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:11:55] <eddyb> acrichto: aww, your test case is reversed
[16:12:05] <acrichto> ?
[16:12:25] <eddyb> acrichto: it means I have to always assume mutable within values matched against
[16:12:56] <olsonjeffery> the tidy.py script is awesome
[16:13:03] <eddyb> acrichto: just like method calls
[16:13:06] <olsonjeffery> id like to factor it out and make it reusable for other rust projects
[16:13:23] <olsonjeffery> REWRITE IT IN RUST
[16:13:25] <eddyb> and probably in the RHS of let statements as well
[16:13:36] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:13:37] <eddyb> olsonjeffery: make it fast ;)
[16:13:40] <cmr> olsonjeffery: I'm sure there's some nicer generic lint framework than our mediocre tidy.py :P
[16:14:21] <olsonjeffery> i suppose this falls into some overlapping region also germane to the notional rust-format
[16:14:24] <eddyb> olsonjeffery: for the reference, uutils/coreutils has a concurrent du implemented, maybe you could use something similar?
[16:16:12] *** Quits: jdm (jdm@2B5CD89E.ED0C8.AE2B2F80.IP) (Quit: Lost terminal)
[16:16:23] <cmr> acrichto: it reproduces when rebased, http://buildbot.rust-lang.org/builders/try-win/builds/935/steps/compile/logs/stdio, but liblibc has https://github.com/mozilla/rust/pull/12526/files#diff-4c1827e2ef5156ad90c1cef13755f4c8R16 :(
[16:17:00] <cmr> acrichto: perhaps it's a -j2 bug.
[16:17:11] <cmr> goes to compile libstd before the liblibc is copied?
[16:17:48] <acrichto> the crate.mk deps are set up right?
[16:18:14] <cmr> I believe so.
[16:18:20] <cmr> DEPS_std := libc ...
[16:18:48] <acrichto> libc builds so much faster than libstd
[16:18:54] <acrichto> I'd doubt a j2 bug
[16:20:29] <cmr> What makes me think that is that the oxidize line comes before the cp. but I never actually knew what cp was doing for that anyway.
[16:20:51] <eibwen> is cp more than copy?
[16:21:25] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[16:22:43] *** Quits: jensnockert (jensnocker@moz-A383D2B9.mobileonline.telia.com) (Ping timeout)
[16:23:18] *** Joins: jensnockert (jensnocker@moz-A383D2B9.mobileonline.telia.com)
[16:23:25] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[16:30:36] <cmr> well
[16:30:41] <cmr> I honestly couldn't tell you
[16:30:48] <cmr> it does not appear to be
[16:30:57] <cmr> but I really can't tell left from right in these makefiles
[16:31:03] <cmr> mk/target.mk line 141
[16:33:14] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:35:07] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:46:04] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[16:46:20] *** Quits: jensnockert (jensnocker@moz-A383D2B9.mobileonline.telia.com) (Connection reset by peer)
[16:46:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:46:53] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[16:46:53] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/ZiAyww
[16:46:53] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[16:46:56] *** Joins: jensnockert (jensnocker@moz-A383D2B9.mobileonline.telia.com)
[16:47:26] *** Quits: lpy (lpy@1834E2CB.F09091A8.1348A864.IP) (Client exited)
[16:51:50] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[16:51:50] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/R16W1Q
[16:51:50] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[16:51:51] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[16:51:51] <ghrust> [13rust] 15bors pushed 9 new commits to 06auto: 02http://git.io/elKFRw
[16:51:51] <ghrust> 13rust/06auto 14cd510b3 15Alex Crichton: std: Remove the get() method from RefCell wrappers...
[16:51:51] <ghrust> 13rust/06auto 14f3682b5 15Alex Crichton: syntax: Fix fallout of removing get()
[16:51:52] <ghrust> 13rust/06auto 149a37416 15Alex Crichton: arena: Fix fallout of removing get()
[16:51:54] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[16:52:03] <eddyb> :D
[16:54:19] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:55:11] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[16:55:48] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[16:56:36] *** Quits: Kxepal (Miranda@moz-DC6FDBB9.pppoe.mtu-net.ru) (Ping timeout)
[16:56:46] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:00:57] *** Joins: Kxepal (Miranda@moz-D0E0B353.pppoe.mtu-net.ru)
[17:08:33] *** Quits: gwty (gwtypc@3CAC4C72.A9D442CE.49FF672.IP) (Ping timeout)
[17:08:45] *** Quits: gwty_ (gwtypc@3CAC4C72.A9D442CE.49FF672.IP) (Ping timeout)
[17:10:49] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[17:13:31] *** Quits: gimpf (gimpf@moz-DB865D66.adsl.highway.telekom.at) (Connection reset by peer)
[17:16:24] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:17:42] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[17:18:27] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:20:16] *** Quits: japaric (japaric@F981A487.D1A0B378.5C7588CA.IP) (Ping timeout)
[17:21:12] *** Quits: jensnockert (jensnocker@moz-A383D2B9.mobileonline.telia.com) (Input/output error)
[17:21:25] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[17:21:45] *** Joins: jensnockert (jensnocker@moz-A383D2B9.mobileonline.telia.com)
[17:21:52] *** Joins: japaric (japaric@208B24D4.A23A5F6C.E5B504CC.IP)
[17:23:16] *** Joins: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru)
[17:23:21] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[17:23:31] *** Quits: jensnockert (jensnocker@moz-A383D2B9.mobileonline.telia.com) (Ping timeout)
[17:25:28] *** Joins: gwty (gwtypc@3CAC4C72.A9D442CE.49FF672.IP)
[17:27:53] *** Quits: gwty (gwtypc@3CAC4C72.A9D442CE.49FF672.IP) (Ping timeout)
[17:32:24] *** Joins: gwty (gwtypc@3CAC4C72.A9D442CE.49FF672.IP)
[17:34:10] *** Quits: gwty (gwtypc@3CAC4C72.A9D442CE.49FF672.IP) (Ping timeout)
[17:37:52] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:40:07] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:40:55] *** Joins: gwty (gwtypc@3CAC4C72.A9D442CE.49FF672.IP)
[17:41:10] *** Joins: gwty_ (gwtypc@3CAC4C72.A9D442CE.49FF672.IP)
[17:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:44:49] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[17:46:36] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:46:54] *** Quits: gwty_ (gwtypc@3CAC4C72.A9D442CE.49FF672.IP) (Client exited)
[17:59:17] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:59:26] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Ping timeout)
[18:00:38] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[18:01:37] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:01:55] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[18:01:55] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/elKFRw
[18:01:55] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[18:03:46] <edwardw> hmm, there's a @Cell liveing behind ~
[18:03:51] <edwardw> so ugly
[18:04:00] <eddyb> edwardw: where?
[18:04:04] <edwardw> s/liveing/living
[18:04:08] <edwardw> _match.rs
[18:04:12] <eddyb> edwardw: which one?
[18:04:18] <eddyb> (yeah, there's at least two)
[18:04:23] <edwardw> trans/_match.rs
[18:04:30] <eddyb> you have license to kill
[18:04:35] <edwardw> lol
[18:04:46] <eddyb> as long as you can do it by *removing* shared ownership
[18:04:49] <eddyb> i.e. not Rc
[18:05:08] <edwardw> and another @Cell in libsyntax parser.rs
[18:05:11] <edwardw> I'll try
[18:05:34] <eddyb> I usually strip the @ if it's not shared, then proceed to make the code use true mutability instead of inner
[18:05:48] <edwardw> k
[18:05:52] <eddyb> I removed a bunch of RefCell's alongside with their @, in the de-@ PR
[18:06:10] <edwardw> my turn, sir
[18:06:47] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[18:06:47] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/AdoqIw
[18:06:47] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[18:13:04] <eddyb> acrichto, huon, cmr: error-guided-programming is so much easier when you can click to get the error :D
[18:21:23] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:21:25] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[18:23:20] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[18:23:20] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:26:12] *** Joins: glaebhoerl (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP)
[18:42:35] *** Joins: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com)
[18:44:26] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:46:46] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:55:02] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[18:56:45] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[19:02:41] <edwardw> r? https://github.com/mozilla/rust/pull/13085
[19:04:42] <flaper87> cmr: too fast :D
[19:04:54] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:05:01] <cmr> flaper87: I usually lose to acrichto :(
[19:05:29] <eddyb> let name_idx = @Cell::new(0u); // hah this is just silly
[19:05:39] <eddyb> edwardw: thanks :)
[19:06:18] <edwardw> :D
[19:06:21] <flaper87> cmr: lol :D 
[19:06:41] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:08:07] <flaper87> edwardw: lol @ saddest-cell :D
[19:08:32] <edwardw> haha
[19:09:00] <edwardw> the first @Cell actually lives behind a ~
[19:09:11] <edwardw> now I see everything :P
[19:09:30] *** Joins: tca (sid17279@moz-A42E5B7B.irccloud.com)
[19:10:23] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[19:10:46] <eddyb> edwardw: see what?
[19:11:00] <edwardw> ~@Cell stuff
[19:11:06] <eddyb> where?
[19:11:16] <edwardw> I just got rid of it lol
[19:11:35] <edwardw> indirectly ~@Cell
[19:11:37] * eddyb pretends to understand where the ~ is
[19:12:21] <edwardw> the only place that @Cell appears is an enum variant, ~ is there
[19:12:46] <eddyb> DynamicFailureHandler?
[19:12:56] <edwardw> iirc yes
[19:13:09] <eddyb> I see part of it in the diff
[19:16:56] *** Joins: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP)
[19:16:56] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/28DKxA
[19:16:56] *** Parts: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP) ()
[19:21:25] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[19:21:54] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[19:21:54] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/KrbzjQ
[19:21:54] <ghrust> 13rust/06auto 140755e8c 15Piotr Czarnecki: rustc: Change the filename of compressed bitcode...
[19:21:54] <ghrust> 13rust/06auto 14a59b5d4 15bors: auto merge of #13074 : pczarn/rust/build-rlib, r=alexcrichton...
[19:21:54] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[19:23:27] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[19:28:54] *** Joins: doener (doener@moz-C68F600D.unity-media.net)
[19:44:24] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:46:31] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:50:43] <eddyb> acrichto: I'm so sorry I only have time for one issue today https://github.com/mozilla/rust/pull/13087
[19:50:57] <eddyb> maybe I can sneak in some night time overtime :P
[19:51:17] <eddyb> (I hope it passes)
[19:51:38] *** Quits: Luqman (laden@moz-AB7945E9.csclub.uwaterloo.ca) (Ping timeout)
[19:51:43] <eddyb> cmr: ^^ r? while I'm gone
[19:51:50] <cmr> looking at it
[19:54:28] *** Quits: glaebhoerl (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP) (Ping timeout)
[19:57:42] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Quit:   .)
[20:01:51] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[20:01:52] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14a59b5d4 to 140e6f90e: 02http://git.io/N3iJvQ
[20:01:52] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[20:01:53] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[20:01:53] <ghrust> [13rust] 15bors pushed 9 new commits to 06auto: 02http://git.io/2Royww
[20:01:53] <ghrust> 13rust/06auto 14aa75194 15Flavio Percoco: rustc: Remove special treatment for Freeze and NoFreeze...
[20:01:53] <ghrust> 13rust/06auto 14392348f 15Flavio Percoco: arena: Remove Freeze / NoFreeze
[20:01:53] <ghrust> 13rust/06auto 140169abd 15Flavio Percoco: sync: Remove Freeze / NoFreeze
[20:01:55] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[20:06:53] *** Quits: edwardw (edwardw@861842BE.B4F65FC7.A0A36CCE.IP) (Quit: Leaving...)
[20:07:31] <eddyb> cmr: okay, I'm still around, I'll try to implement the other thing as well
[20:09:15] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:11:36] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:12:33] <eddyb> acrichto: gaaah cross-crate vtables are the hardest :(
[20:12:57] * eddyb bangs head against EBML
[20:14:49] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:19:28] <cmr> nmatsakis: r? https://github.com/mozilla/rust/pull/13001#issuecomment-38219630
[20:21:26] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[20:22:13] * seanmonstar joins eddyb
[20:22:34] <eddyb> aaaalmost there
[20:22:37] * eddyb marathon
[20:23:30] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[20:26:07] <eddyb> cmr: I think I've fixed cross-crate but I don't have time to add tests now :(
[20:27:32] <eddyb> gaaah will continue later, now I have to hurry
[20:31:33] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:31:48] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[20:33:23] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:35:57] <cmr> huon: ping
[20:37:25] <strcat> cmr: https://github.com/mozilla/rust/pull/13088 r?
[20:38:30] <cmr> strcat: r=me
[20:38:45] *** Joins: Luqman (laden@moz-AB7945E9.csclub.uwaterloo.ca)
[20:38:46] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[20:40:50] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[20:41:38] <doener> cmr: if you extend 13001 you could also add nocapture for non-immediate args. I forgot that when I added the attribute for the args in the declaration :-/
[20:42:59] <cmr> doener: at the callsite?
[20:43:27] <doener> yeah
[20:43:42] <doener> nocapture is really only meaningful at the callsite AFAICT
[20:44:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:45:51] <strcat> cmr: meh still finding a lot of types missing TotalEq anyway
[20:45:57] <strcat> really need to get on fixing deriving
[20:46:01] <strcat> I figured out how to do it
[20:46:10] <strcat> maybe
[20:46:12] <strcat> ;(
[20:46:22] <doener> cmr: that wip code failed in the llvm verifier?
[20:46:30] <strcat> add PartialEq/PartialOrd deriving
[20:46:33] <strcat> snapshot
[20:46:35] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:46:37] <strcat> rename Eq/Ord
[20:46:54] <cmr> doener: iirc yeah
[20:47:03] <cmr> doener: I'm rebuilding to replicate
[20:47:05] <strcat> then add Eq/Ord deriving, snapshot, rename TotalEq/TotalOrd
[20:47:23] <strcat> and Eq deriving should derive both Eq/PartialEq, Ord deriving should do both Ord/PartialOrd
[20:51:08] <doener> cmr: doesn't ty_fn_args include the return pointer for non-immediate args?
[20:51:49] <doener> cmr: hm, no, just the inputs
[20:52:08] <cmr> doener: https://gist.github.com/cmr/26fa61f8a01f1855b184
[20:52:34] <cmr> looks like it added nocapture to a value.
[20:52:35] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:53:24] <cmr> doener: is my first_arg_offset thing sane at all?
[20:53:29] <doener> hm, off-by-one error? Should it have been added to the type_err?
[20:54:13] <doener> cmr: looks sane to me
[20:54:27] <cmr> I would think it needs to be in the type_err
[20:54:57] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:55:17] <cmr> we could mark the outptr nocapture too though.
[20:55:52] <doener> looks like it's the call in subtype_with_fn
[20:56:25] <doener> cmr: env pointer?
[20:56:42] <doener> cmr: that should need another +1 for the start index
[20:57:02] <cmr> ah yes
[20:57:06] <cmr> that would do it
[20:58:52] <cmr> hm
[20:59:30] <cmr> the first argument is the environment/self, the second is maybe the outptr, and the rest are the actual args, right?
[21:00:00] <doener> outptr is first
[21:00:13] <doener> otherwise the hardcoded 1 would already cause problems
[21:00:23] <doener> and llvm only accepts sret on the first argument
[21:00:48] <cmr> isn't sret being put on the second argument (index 1)?
[21:01:12] <doener> 0 is the "regular" return value
[21:01:17] <cmr> ohhhh
[21:01:59] <cmr> ~T return gets lowered to return of T* then
[21:02:32] <doener> yes
[21:04:16] *** Quits: Armavica (virgile@moz-AD428ED7.ens.fr) (Quit: Lost terminal)
[21:04:51] *** Joins: Armavica (virgile@moz-AD428ED7.ens.fr)
[21:05:13] <cmr> NoCapture and NoAlias make sense for the out pointer right?
[21:06:04] <eddyb> sret should include those, no?
[21:06:12] <cmr> dunno
[21:07:24] <doener> eddyb: I wouldn't rely on that. Docs only say that the pointer must be valid and properly aligned
[21:07:38] <sunfish> sret does not automatically imply nocapture or noalias
[21:08:15] <cmr> hey it's a sunfish!
[21:08:32] <cmr> sunfish: is adding attributes where we can better than letting llvm try to infer them?
[21:08:42] <strcat> cmr: ofc
[21:08:46] <strcat> it can't always infer them
[21:09:05] <cmr> that is what I thought
[21:09:10] *** Quits: fhahn (fhahn@moz-7924DB5C.vie.surfer.at) (Ping timeout)
[21:09:16] <cmr> at some point someone said "this shouldn't matter"
[21:09:21] <strcat> cmr: the return is already marked noalias in direct calls
[21:09:32] <strcat> cmr: it should matter
[21:09:34] <strcat> LLVM isn't magical
[21:09:38] <strcat> we have strictly more information
[21:11:42] <seanmonstar> with a file that should only be used in stage1, is there a way to skip re-building stage0 each time i tweak it?
[21:11:50] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[21:11:50] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/2Royww
[21:11:50] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[21:12:00] <eddyb> for tests, there's NO_REBUILD=1
[21:12:26] <seanmonstar> env var or cli arg
[21:12:27] <eddyb> seanmonstar: you can... touch the file back into the past
[21:13:27] <seanmonstar> ! NO_REBUILD worked. huzzah
[21:14:42] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:15:15] <kimundi> eddyb: Heh, I successfully wrapped stds dynamic_lib into a lifetime-delimited Crate wrapper.
[21:15:26] <kimundi> eddyb: Still needs unsafe though because of mising type checking
[21:15:36] *** Joins: cgaebel (clark@moz-F9D89110.nyc.res.rr.com)
[21:16:39] *** Joins: fhahn (fhahn@moz-7924DB5C.vie.surfer.at)
[21:16:47] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:16:52] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[21:16:52] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/xj_eNQ
[21:16:52] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[21:16:55] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[21:16:55] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/AINkxQ
[21:16:55] <ghrust> 13rust/06auto 14a73d2c7 15Ryan Scheel (Havvy): Unindent stringifier() in tasks guide
[21:16:55] <ghrust> 13rust/06auto 146f430c4 15bors: auto merge of #13084 : Havvy/rust/master, r=alexcrichton...
[21:16:55] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[21:25:58] <eddyb> \o/ TEST PASSES first try
[21:26:25] <eddyb> cmr: speeeed
[21:27:17] <strcat> cmr: it's sad when you consider that we can only apply these to the outermost ptr 
[21:27:22] <strcat> without making tbaa info
[21:27:26] <strcat> and that doesn't cover as much
[21:27:35] <strcat> just read-only/aliasing
[21:28:46] *** Quits: canhtak (canhtak@moz-805AE185.wl.t.ulaval.ca) (Quit: canhtak)
[21:28:56] <eddyb> acrichto, cmr: r? https://github.com/mozilla/rust/pull/13087 p=1 pls
[21:29:36] <eddyb> actually, edwardw's PR shouldn't conflict so it doesn't need priority unless acrichto wants to make another snapshot
[21:30:45] <cmr> eddyb: put the closes on the commits, not the PR.
[21:31:28] <eddyb> time to use new rebase -i modes
[21:32:18] <eddyb> cmr: there
[21:32:25] <eddyb> I hope there's nothing else, I'll have to go soon
[21:32:26] <strcat> huon: figure out that TotalEq thing yet? :P
[21:33:04] <strcat> rusti: for _ in range(0, 5) { println!("nag huon") }
[21:33:08] -rusti- pastebinned 6 lines of output: http://sprunge.us/PDTc
[21:33:19] <strcat> rusti: for _ in range(0, 4) { println!("nag huon") }
[21:33:20] -rusti- nag huon
[21:33:20] -rusti- nag huon
[21:33:20] -rusti- nag huon
[21:33:20] -rusti- nag huon
[21:33:20] -rusti- ()
[21:34:46] * cmr cries at ebml
[21:35:12] <eddyb> cmr: inorite?
[21:35:32] <eddyb> cmr: at least I didn't put the info into vtable_res (which is recursive)
[21:37:39] <eddyb> cmr: thanks :D
[21:38:03] <doener> btw, what does "dps" mean?
[21:38:10] <eddyb> destination passing style
[21:38:39] <eddyb> (personal backronym, though nmatsakis might have confirmed it at one point)
[21:39:08] <eddyb> doener: I have some thoughts of ripping out that system
[21:39:29] <eddyb> doener: to allow first-class aggregates, among other things
[21:41:37] <eddyb> ohh, I see now, edwardw removed *the last* Cell occurrences behind @ pointers
[21:44:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:45:07] <eddyb> huon, cmr: someone should replace Vec with OwnedSlice in the AST. should I start a sepparate PR for that?
[21:46:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:47:45] <cmr> it doesn't have to be, really.
[21:48:26] <cmr> put please do *only that* in the commit that does that :)
[21:50:56] <eddyb> I'll focus on P for now (turns out I didn't have to leave for now)
[21:52:35] <eddyb> I wonder if things like this pub type MetaItem = Spanned<MetaItem_>;
[21:53:00] <eddyb> wouldn't be better off wrapped in P<> - oh, nevermind, you need borrowed versions of them
[21:53:03] *** Quits: luz (lu.cy@moz-CD18B14B.customer.cdi.no) (Input/output error)
[21:53:12] *** Joins: luz (lu.cy@moz-CD18B14B.customer.cdi.no)
[21:57:35] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:00:01] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:00:48] <eddyb> 0 occurrences of @ left in syntax::ast
[22:00:51] <cmr> huon: unping
[22:00:58] <cmr> eddyb: I think the builder should be healthier now.
[22:01:01] <eddyb> and it's 00:00 here
[22:01:28] <eddyb> cmr: what changed?
[22:01:46] <cmr> nothing
[22:01:50] <cmr> (of importance)
[22:01:54] <cmr> just a hunch
[22:02:05] <eddyb> okay
[22:02:37] <eddyb> any idea why TokenTree had @Vec in it?
[22:03:22] <strcat> rusti: 2
[22:03:23] -rusti- 2
[22:03:28] <strcat> rusti: 2
[22:03:29] -rusti- 2
[22:04:12] <strcat> rusti: 2
[22:04:13] -rusti- 2
[22:04:19] *** Quits: cgaebel (clark@moz-F9D89110.nyc.res.rr.com) (Ping timeout)
[22:07:48] <sfackler> eddyb: probably automated transforms from @[T] -> @~[T] -> @Vec
[22:07:56] *** Joins: cgaebel (clark@moz-F9D89110.nyc.res.rr.com)
[22:08:15] <eddyb> yeah, I've removed it, hope I break nothing
[22:08:29] <strcat> Vec<T> -> ~[T] likely won't be a no-op
[22:08:33] <strcat> so keep that in mind
[22:08:46] <strcat> it's going to need to call shrink_to_fit
[22:08:56] <eddyb> the entire AST will be shrunk
[22:09:10] <strcat> yeah for the AST it's fine
[22:09:15] <strcat> just something to keep in mind in general
[22:09:43] <strcat> Vec<u8> with len 400, cap 800 would shrink to a 400 byte allocation when converting to ~[T]
[22:10:33] <strcat> which is going to at least cost whatever a lookup in the allocator costs
[22:10:47] <eddyb> should we allow type hints at arbitrary levels in a pattern?
[22:11:00] <eddyb> because we can make let slightly simpler then
[22:11:59] <eddyb> meh, why is ast::Def in libsyntax at all?
[22:12:10] <eddyb> it's the result of resolve, which happens waay later
[22:13:32] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[22:19:41] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:21:39] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:26:55] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[22:26:55] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/AINkxQ
[22:26:55] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[22:27:10] <eddyb> my hand is hurting from all the &**
[22:27:23] <eddyb> wait till brson sees this :P
[22:31:53] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[22:31:53] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/aCNPvg
[22:31:53] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[22:34:13] *** Quits: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru) (Quit: Leaving...)
[22:34:16] *** Quits: doener (doener@moz-C68F600D.unity-media.net) (Quit: leaving)
[22:38:04] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[22:41:24] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:42:06] <aatch> Ok, ExprAssign with a shuffle on LHS is a compiling!
[22:46:44] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:48:13] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[22:48:13] *** ChanServ sets mode: +qo brson brson
[22:48:31] <strcat> aatch: https://github.com/mozilla/rust/pull/13089 r?
[22:49:20] <eddyb> parallel de-@ effort. melikes
[22:50:18] <cmr> aatch: are you back to having time for rust then? :D
[22:50:29] <strcat> eddyb: not much effort there
[22:50:31] <aatch> cmr, more or less, for the moment.
[22:50:34] <strcat> just don't want it public ;p
[22:51:18] <strcat> rusti: version
[22:51:19] -rusti- rustc 0.10-pre (0e6f90e 2014-03-22 11:06:46 -0700)
[23:06:53] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[23:06:53] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1471bdef5 to 146f430c4: 02http://git.io/N3iJvQ
[23:06:53] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[23:07:29] <eddyb> wat http://buildbot.rust-lang.org/builders/auto-bsd-64-opt/builds/4688/steps/test/logs/stdio
[23:07:46] <eddyb> are xcrate tests supposed to be fail-fast?
[23:09:45] <strcat> probably
[23:09:58] <eddyb> bleah
[23:13:45] <eddyb> strcat, cmr: r=cmr? https://github.com/mozilla/rust/pull/13087
[23:13:53] <eddyb> just added // ignore-fast
[23:14:38] <strcat> aatch: https://github.com/mozilla/rust/pull/13090 r?
[23:15:04] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[23:15:05] <eddyb> "partial type hints" if only those worked :P
[23:15:10] <strcat> it seems to work
[23:15:18] <strcat> meh
[23:15:19] <eddyb> odd
[23:15:21] <strcat> it didn't work in one place
[23:15:22] * strcat sighs
[23:15:30] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[23:15:30] *** ChanServ sets mode: +qo brson brson
[23:15:33] <sfackler> strcat: I've found partial type hints with collect totally broken
[23:15:34] <eddyb> yeah, everywhere else you might not need a hint at all
[23:15:43] <strcat> ;[
[23:15:49] <eddyb> strcat: why'd you close it?
[23:15:53] <sfackler> https://github.com/mozilla/rust/issues/12909
[23:15:59] <strcat> eddyb: broken
[23:15:59] <eddyb> you need to remove the method anyways
[23:16:45] <strcat> sure
[23:16:48] <strcat> I'll reopen it when it works
[23:17:08] <eddyb> ah, okay. and thanks :)
[23:17:20] <eddyb> now let's hope bors likes this version
[23:21:51] <strcat> sfackler: does it work anywhere? :(
[23:22:16] <strcat> rusti: let mut xs: ~[_] = range(0, 10).collect(); xs.push(5); xs
[23:22:17] -rusti- [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 5]
[23:22:34] <strcat> rusti: let mut xs = range(0, 10).collect::<~[_]>(); xs.push(5); xs
[23:22:34] -rusti- [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 5]
[23:22:38] <strcat> eddyb: see
[23:22:41] <strcat> it does work
[23:22:43] <strcat> just not always
[23:22:59] <eddyb> I still don't know how exactly it works
[23:23:11] <sfackler> rusti: let mut xs: Vec<_> = range(0, 10).collect(); xs.push(5); xs
[23:23:11] -rusti- [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 5]
[23:23:17] <sfackler> wat
[23:23:21] <sfackler> maybe it was fixed?
[23:23:22] <eddyb> was it... fixed?
[23:23:25] <strcat> sfackler: no I don't think so
[23:23:27] <eddyb> but by what?
[23:23:30] <strcat> it still doesn't work in one place...
[23:23:36] <eddyb> strcat: which one?
[23:23:47] <strcat> I'll tell you the compiler error when it gets there again
[23:23:53] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[23:23:54] <eddyb> rusti: let mut xs: Vec<_> = range(0, 10).collect(); xs
[23:23:55] -rusti- <anon>:10:30: 10:52 error: cannot determine a type for this bounded type parameter: unconstrained type
[23:23:55] -rusti- <anon>:10         let mut xs: Vec<_> = range(0, 10).collect(); xs
[23:23:55] -rusti-                                        ^~~~~~~~~~~~~~~~~~~~~~
[23:23:55] -rusti- application terminated with error code 101
[23:24:01] <sfackler> rusti: let slice = [1i, 2i]; let vec: Vec<_> = slice.iter().collect(); vec
[23:24:02] -rusti- <anon>:10:49: 10:71 error: cannot determine a type for this bounded type parameter: unconstrained type
[23:24:02] -rusti- <anon>:10         let slice = [1i, 2i]; let vec: Vec<_> = slice.iter().collect(); vec
[23:24:02] -rusti-                                                           ^~~~~~~~~~~~~~~~~~~~~~
[23:24:02] -rusti- application terminated with error code 101
[23:24:05] <strcat> wut?
[23:24:15] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:24:16] <strcat> eddyb: oh
[23:24:19] <eddyb> strcat: push is actually giving it the type :P
[23:24:20] <strcat> so it works if there's a push call
[23:24:23] <strcat> eddyb: HOW
[23:24:25] <strcat> ;\
[23:24:32] <eddyb> strcat: simple
[23:24:33] <strcat> rusti: let mut xs: ~[_] = range(0, 10).collect(); xs.push(5); xs
[23:24:34] -rusti- [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 5]
[23:24:38] <strcat> rusti: let mut xs = range(0, 10).collect(); xs.push(5); xs
[23:24:39] -rusti- pastebinned 7 lines of output: http://sprunge.us/gdIG
[23:24:56] <eddyb> strcat: it finds the push method for ~[ty_infer]
[23:25:08] <eddyb> strcat: then it links that ty_infer with the type of 5
[23:25:28] <eddyb> strcat: and only *then* it feeds the result of that into collect
[23:25:51] <strcat> fix it then
[23:25:53] <strcat> plx
[23:26:01] <eddyb>  rusti: let mut xs: ~[_] = range(0, 10).collect(); let y = x[0]; xs.push(y); xs
[23:26:08] <eddyb> rusti: let mut xs: ~[_] = range(0, 10).collect(); let y = x[0]; xs.push(y); xs
[23:26:09] -rusti- <anon>:10:60: 10:61 error: unresolved name `x`. Did you mean `xs`?
[23:26:09] -rusti- <anon>:10         let mut xs: ~[_] = range(0, 10).collect(); let y = x[0]; xs.push(y); xs
[23:26:09] -rusti-                                                                      ^
[23:26:09] -rusti- error: aborting due to previous error
[23:26:10] -rusti- application terminated with error code 101
[23:26:16] <eddyb> rusti: let mut xs: ~[_] = range(0, 10).collect(); let y = xs[0]; xs.push(y); xs
[23:26:16] -rusti- <anon>:10:28: 10:50 error: cannot determine a type for this bounded type parameter: unconstrained type
[23:26:16] -rusti- <anon>:10         let mut xs: ~[_] = range(0, 10).collect(); let y = xs[0]; xs.push(y); xs
[23:26:17] -rusti-                                      ^~~~~~~~~~~~~~~~~~~~~~
[23:26:19] -rusti- application terminated with error code 101
[23:26:36] <eddyb> strcat: now it only has ~[T] with no hint for T
[23:26:37] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:26:45] <eddyb> other than T itself which doesn't help :P
[23:27:11] <eddyb> strcat: nmatsakis has some thoughts on how to *maybe* fix it. do you want me to explain why it's broken?
[23:27:25] <strcat> sure
[23:27:39] <eddyb> impl<T> Foo<T> for Vec<T> only works because of coherence
[23:28:11] <eddyb> I guess that's one of the reasons you can't just make coherence less conservative
[23:28:53] <eddyb> strcat: you can't have more than one generic impl of Foo<*> for Vec<*>. and that's the impl that gets picked by method resolution
[23:29:00] *** Joins: canhtak (canhtak@moz-805AE185.wl.t.ulaval.ca)
[23:30:56] <eddyb> this situation is something like trait Iterator<T>{ fn collect<C: FromIterator<T>>(self) -> C {...}}
[23:31:21] <eddyb> strcat: wait, I may be misleading you =))
[23:31:33] <eddyb> I didn't actually have collect in my mind like that
[23:31:37] <strcat> it's okay I was eating food rather than listening anyway
[23:32:26] <eddyb> okay, to make it simple: fn collect<T, I: Iterator<T>, C: FromIterator<T>>(iter: I) -> C {...}
[23:32:34] <eddyb> that's the full definition
[23:33:02] <eddyb> what inference sees: fn collect<T, I, C>(iter: I) -> C {...}
[23:33:09] <eddyb> strcat: does that make sense?
[23:33:29] <eddyb> there is no relation between the iterator type and the collection type
[23:33:45] <eddyb> (that's actually simpler than what I was thinking of)
[23:34:00] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[23:34:09] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[23:34:53] <eddyb> rusti: let mut xs: ~[_] = ::std::iter::FromIterator::from_iterator(&mut range(0, 10)); let y = xs[0]; xs.push(y); xs
[23:34:54] -rusti- <anon>:10:28: 10:68 error: cannot determine a type for this bounded type parameter: unconstrained type
[23:34:54] -rusti- <anon>:10         let mut xs: ~[_] = ::std::iter::FromIterator::from_iterator(&mut range(0, 10)); let y = xs[0]; xs.push(y); xs
[23:34:54] -rusti-                                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[23:34:54] -rusti- application terminated with error code 101
[23:35:02] <eddyb> rusti: let mut xs: ~[_] = ::std::iter::FromIterator::from_iterator(&mut range(0, 10)); xs
[23:35:03] -rusti- <anon>:10:28: 10:68 error: cannot determine a type for this bounded type parameter: unconstrained type
[23:35:03] -rusti- <anon>:10         let mut xs: ~[_] = ::std::iter::FromIterator::from_iterator(&mut range(0, 10)); xs
[23:35:03] -rusti-                                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[23:35:04] -rusti- application terminated with error code 101
[23:35:38] <eddyb> strcat: okay, that demonstrates the same issue. look at the definition: trait FromIterator<A> {fn from_iterator<T: Iterator<A>>(iterator: &mut T) -> Self;}
[23:36:16] <eddyb> the only link between the element type and anything else is the Iterator. but the bound isn't taken into consideration for inference
[23:37:55] <eddyb> also, impl<T> FromIterator<T> for Vec<T> {fn from_iterator<I: Iterator<T>>(iter: I) -> Vec<T> {...}} // if you remove the bounds, you're left with a free T, pretty much
[23:38:22] <eddyb> strcat: the good news is that if this gets fixed, it's likely coherence will become less strict
[23:43:17] <strcat> aatch: https://github.com/mozilla/rust/pull/13090 r? fixed
[23:43:21] <strcat> aatch: some work, some don't
[23:43:24] <strcat> w/e
[23:43:25] <strcat> method needs to die
[23:43:51] <strcat> I also optimized something ;p
[23:44:11] <strcat> https://github.com/mozilla/rust/pull/13090/files#diff-5e9bda7f0339fac3cc1e94892f1c7999L541
[23:44:24] <strcat> easier than figuring out what type it is!
[23:44:44] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:45:11] <eddyb> haha
[23:45:46] <eddyb> strcat: what does "unzip" do?
[23:45:54] <strcat> eddyb: dunno
[23:45:56] <strcat> does it matter?
[23:45:57] <eddyb> lol
[23:46:06] <eddyb> strcat: trans tends to be order sensitive
[23:46:08] <strcat> eddyb: I think it takes an iterator over (A, B) and makes ~[A], ~[B]
[23:46:17] <eddyb> strcat: *but* you're lucky because it's consts
[23:46:30] <eddyb> and order sensitive consts would be silly
[23:47:58] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:52:26] <bjz> huon: rebased https://github.com/mozilla/rust/pull/13072/
[23:56:04] <huon> strcat: how dare you nag me ;P
[23:56:37] <strcat> it was rusti 
[23:56:38] <strcat> I swear
[23:57:27] <strcat> rusti: right?
[23:57:28] -rusti- absolutely
[23:58:07] <sfackler> >_>
[23:58:26] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[23:59:40] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[23:59:40] *** ChanServ sets mode: +qo brson brson
[23:59:51] <aatch> assigning to shuffles! https://gist.github.com/Aatch/fff56956de7a0ec78df6
