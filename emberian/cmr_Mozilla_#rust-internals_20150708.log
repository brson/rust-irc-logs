[00:03:52] *** Quits: yjv (yjv@moz-j0cdis.fios.verizon.net) (Connection closed)
[00:05:02] *** Quits: steveklabnik (root@moz-fft.uo8.55.45.IP) (Ping timeout: 121 seconds)
[00:05:22] *** Quits: phynx (chatzilla@moz-10k6fe.dsl.scarlet.be) (Quit: Terminated with extreme prejudice - dircproxy 1.1.0)
[00:06:28] *** Joins: steveklabnik (root@moz-fft.uo8.55.45.IP)
[00:06:28] *** ChanServ sets mode: +o steveklabnik
[00:08:53] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[00:09:24] *** Quits: X67r (user@moz-sdb63f.mullvad.net) (Quit: leaving)
[00:11:25] <acrichto> nrc: good call on trying to bootstrap, some random linking errors popped up and now I get to investigate why!
[00:11:47] <nrc> urgh, have fun!
[00:15:31] *** chmanchester|afk is now known as chmanchester
[00:17:30] * nrc grumbles
[00:18:01] <nrc> macros in return position for a function don't seem to have their expansion ids set
[00:18:07] *** Joins: aatch (james@moz-i1k1ks.tlms.2o1v.e006.2406.IP)
[00:19:07] <nrc> hmm, no, that's not it
[00:19:30] *** Joins: erickt_ (erickt@moz-4hh.6p3.217.74.IP)
[00:19:55] <nrc> maybe when they are expressions, not statements?
[00:19:57] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Connection closed)
[00:22:20] *** Quits: eibwen (eibwen@moz-5fi02a.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[00:23:50] *** Quits: erickt_ (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[00:30:27] *** Joins: Feyn (aram@moz-5vj.68e.115.42.IP)
[00:31:33] *** Joins: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP)
[00:35:49] *** Quits: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP) (Ping timeout: 121 seconds)
[00:36:24] *** Quits: yjv_ (yjv@moz-ll38tk.pa.comcast.net) (Connection closed)
[00:38:57] *** Joins: SilverKey (SilverKey@moz-liif3j.res.rr.com)
[00:43:16] *** Quits: amyers (amyers@moz-osiar4.md.comcast.net) (Ping timeout: 121 seconds)
[00:43:32] *** Quits: nagisa (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[00:46:50] *** Quits: swgillespie (swgillespie@moz-767.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:52:14] *** Joins: TheHydroImpulse (TheHydroImp@moz-r25mqk.ed.shawcable.net)
[01:02:19] *** Joins: yjv (yjv@moz-ll38tk.pa.comcast.net)
[01:05:51] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[01:11:19] *** Joins: skeuomorf (skeuomorf@moz-a3f.lok.32.197.IP)
[01:11:40] <acrichto> huon: https://crates.io/crates/cfg-if
[01:14:51] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[01:16:15] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[01:16:15] *** ChanServ sets mode: +o pcwalton
[01:16:18] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[01:18:35] *** Joins: tikue (tim@moz-n71.k1b.0.198.IP)
[01:19:25] <tikue> hey all, question about pattern guards. Is it intended behavior that if there's a pattern guard, none of the match bindings can be by-move?
[01:19:54] <Elaine> I think only the patterns in that arm can't mvoe.
[01:20:48] <tikue> is it possible that restriction could be loosened in the future?
[01:20:56] <tikue> it seems like only the bindings used in the pattern guard should have to be by-ref
[01:26:26] *** Joins: Pierre_M (Pierre_M@moz-2vs15r.slkc.qwest.net)
[01:28:15] <sfackler> tikue: yep
[01:29:56] *** Quits: SilverKey (SilverKey@moz-liif3j.res.rr.com) (Quit: ZZZzzz…)
[01:30:02] <tikue> sfackler: ok, got it. thanks :)
[01:38:26] *** Quits: tikue (tim@moz-n71.k1b.0.198.IP) (Connection closed)
[01:40:04] *** Joins: blaenk (blaenkdenum@moz-ggnkpd.res.rr.com)
[01:41:12] *** Quits: TheHydroImpulse (TheHydroImp@moz-r25mqk.ed.shawcable.net) (Client exited)
[01:44:43] *** Quits: yjv (yjv@moz-ll38tk.pa.comcast.net) (Connection closed)
[01:53:44] *** Quits: Pierre_M (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[01:54:31] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[01:54:31] *** ChanServ sets mode: +ao erickt erickt
[01:55:13] *** Quits: Murarth (Murarth@moz-365.b85.166.46.IP) (Quit: brb, washing the cat)
[01:55:52] *** Joins: Murarth (Murarth@moz-jpotpi.phnx.qwest.net)
[01:56:49] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[01:56:59] <nrc> what are IdentTTs used for?
[01:57:33] <nrc> Oh, was that the thing that no one really uses but we can't remove because some crate uses it?
[01:58:18] *** chmanchester is now known as chmanchester|afk
[02:02:40] <sfackler> nrc: it was used by macro_rules before it became its own thing
[02:03:01] <nrc> but not any more?
[02:03:41] <nrc> sfackler: while you're here, any idea why macros in expression (cf statement) position don't have their expansion IDs set properly?
[02:03:44] <sfackler> it now has its own variant - https://doc.rust-lang.org/stable/syntax/ext/base/enum.SyntaxExtension.html#variant.MacroRulesTT
[02:03:57] <sfackler> no idea
[02:04:07] <nrc> I see there are slightly different code paths, but we seem to set up the expansion stack the same way
[02:11:59] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[02:12:34] *** Quits: dcb (dcb@moz-4hh.6p3.217.74.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[02:13:29] *** Quits: Sho (sho@moz-rv6.np6.168.95.IP) (Quit: Konversation terminated!)
[02:15:34] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[02:15:58] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[02:16:08] <huon> acrichto: nice!
[02:16:50] <jroesch> so I'm still getting a warning about diagnostic codes every time I build a fresh branch? does anyone know how to fix it? its been driving me nuts
[02:17:10] *** Quits: kimundi (kimundi@moz-q19o2l.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[02:17:15] <nrc> remove the duplicate error message or whatever is causing the warning?
[02:17:22] <nrc> It's probably straightforward
[02:17:31] <nrc> just no one can be bothered :-s
[02:18:14] *** Joins: kimundi (kimundi@moz-19ni9q.0bdc.4hmp.57bc.2002.IP)
[02:18:57] <jroesch> well I found the PR that did it they removed a duplicate error code with the same message and reused E0045
[02:19:07] <jroesch> is it fair to just restore the old error code?
[02:19:30] <jroesch> I just don't want to undo work if it was done for a reasosn 
[02:19:32] <jroesch> reason*
[02:20:18] <nrc> ping the PR author? Might just be a rebasing error
[02:26:02] <jroesch> not sure what his IRC handle is just pinged him on the PR directl
[02:26:16] <jroesch> doing some housekeeping and thought it would be nice to fix
[02:32:26] *** Joins: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP)
[02:36:39] *** Quits: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP) (Ping timeout: 121 seconds)
[02:49:43] *** Joins: TheHydroImpulse (TheHydroImp@moz-r25mqk.ed.shawcable.net)
[02:51:30] *** Joins: yjv (yjv@moz-ll38tk.pa.comcast.net)
[02:55:35] *** Joins: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net)
[02:55:35] *** ChanServ sets mode: +o pcwalton
[02:55:42] *** Quits: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net) (Client exited)
[02:57:39] *** Joins: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net)
[02:57:39] *** ChanServ sets mode: +o pcwalton
[02:57:47] *** Quits: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net) (Client exited)
[03:01:23] *** Quits: TheHydroImpulse (TheHydroImp@moz-r25mqk.ed.shawcable.net) (Client exited)
[03:07:39] *** Joins: TheHydroImpulse (TheHydroImp@moz-r25mqk.ed.shawcable.net)
[03:13:29] *** Quits: ytain (ytain@moz-upqesl.dsl.teksavvy.com) (Quit: Textual IRC Client: www.textualapp.com)
[03:13:32] *** Joins: SilverKey (SilverKey@moz-liif3j.res.rr.com)
[03:16:46] *** Joins: semarie (semarie@moz-4tpt8u.bpv6.bg1u.41d0.2001.IP)
[03:17:16] *** Quits: TheHydroImpulse (TheHydroImp@moz-r25mqk.ed.shawcable.net) (Client exited)
[03:18:38] *** Quits: RC9 (RCIX@moz-7kb.dfa.8.198.IP) (Quit: Leaving)
[03:23:41] *** Joins: TheHydroImpulse (TheHydroImp@moz-r25mqk.ed.shawcable.net)
[03:30:18] *** Quits: blaenk (blaenkdenum@moz-ggnkpd.res.rr.com) (Quit: Leaving)
[03:52:47] *** Quits: Rym (uid91135@moz-n2i7qm.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[04:07:08] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[04:21:22] *** Quits: TheHydroImpulse (TheHydroImp@moz-r25mqk.ed.shawcable.net) (Client exited)
[04:24:15] *** Quits: SilverKey (SilverKey@moz-liif3j.res.rr.com) (Quit: ZZZzzz…)
[04:24:57] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[04:31:56] *** Joins: rustbot (havvy@moz-tb54ql.airspeedinternet.net)
[04:32:24] *** Quits: bdero (bran@moz-0e2lk5.sns9.e6pb.0197.2601.IP) (Ping timeout: 121 seconds)
[04:33:14] *** Joins: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP)
[04:37:36] *** Quits: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP) (Ping timeout: 121 seconds)
[04:38:29] *** Joins: Quxxy (chatzilla@moz-efh10q.internode.on.net)
[04:44:42] *** Joins: mlrutherford (mlrutherfor@moz-7afka3.3fkl.4isk.6000.2605.IP)
[04:45:23] <WindowsBunny> How do I run just std tests as quick as possible again?
[04:45:31] <WindowsBunny> like, the earliest stage that works
[04:47:10] <nrc> make check-stage1-std
[04:47:17] <nrc> iirc
[04:50:30] <WindowsBunny> nrc: thanks
[04:53:20] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[04:56:16] <eddyb> WindowsBunny: well, check-stage0-std :P
[04:56:27] <eddyb> but that doesn't do concurrency stuff well (I have no idea why)
[04:56:44] <eddyb> and there's something very weird with check-stage0 test running and I don't know what the proper fix is
[04:57:14] <WindowsBunny> eddyb: I really wish having an external rust in my PATH wouldn't fuck up rust tests
[04:58:04] <eddyb> it should never
[04:59:00] <WindowsBunny> eddyb: except it does
[05:00:16] <aatch> WindowsBunny, I'm pretty sure most people have rustc in their path.
[05:00:32] <WindowsBunny> aatch: windows!
[05:00:40] <WindowsBunny> aatch: that excludes most rust devs
[05:02:14] *** Joins: bdero (bran@moz-0e2lk5.sns9.e6pb.0197.2601.IP)
[05:03:33] <WindowsBunny> aatch: https://github.com/rust-lang/rust/issues/18733
[05:03:34] *** Havvy[Hex] is now known as Havvy
[05:03:45] *** Joins: zmack (zmack@moz-376.4m7.123.86.IP)
[05:08:50] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[05:11:16] <WindowsBunny> eddyb: If I try to do stage0...
[05:11:23] <WindowsBunny> /home/Peter/rust/x86_64-pc-windows-gnu/stage0/test/stdtest-x86_64-pc-windows-gnu.exe: error while loading shared libraries: test-7e44814b.dll: cannot open shared object file: No such file or directory
[05:11:35] <eddyb> WindowsBunny: try running that binary manually
[05:11:46] <eddyb> (that's the issue I mentioned. I know how to fix it, but the fix breaks other things)
[05:12:07] *** Joins: Pierre_M (Pierre_M@moz-2vs15r.slkc.qwest.net)
[05:12:48] *** Quits: zmack (zmack@moz-376.4m7.123.86.IP) (Connection closed)
[05:15:36] *** Joins: zmack (zmack@moz-376.4m7.123.86.IP)
[05:16:15] <WindowsBunny> eddyb: it runs most of the tests, and then hangs
[05:16:26] <eddyb> WindowsBunny: yeah
[05:17:48] *** Quits: zmack (zmack@moz-376.4m7.123.86.IP) (Connection closed)
[05:18:31] <WindowsBunny> eddyb: Okay, so is there a way to do stage1 std test without rebuilding other things each time?
[05:18:55] <eddyb> WindowsBunny: I do touch -d 'last year' path/to/file.rs
[05:19:15] <eddyb> to trick the build system into not rebuilding the library that file is in
[05:19:28] <WindowsBunny> eddyb: shouldn't NO_REBUILD=1 work?
[05:19:39] <eddyb> ehm, maybe?
[05:19:42] *** Quits: genbattle (genbattle@moz-4v0.gkd.16.182.IP) (Connection closed)
[05:19:53] <eddyb> I have no idea atm
[05:19:55] *** Joins: genbattle (genbattle@moz-4v0.gkd.16.182.IP)
[05:20:20] <WindowsBunny> eddyb: Anyway, my fancy new fs::copy properly preserves all the ntfs streams according to a quick out of tree test I did :D
[05:21:27] *** Joins: zmack (zmack@moz-376.4m7.123.86.IP)
[05:21:57] *** Quits: Peach (Peach@moz-500.6lb.246.96.IP) (Client exited)
[05:22:35] <WindowsBunny> eddyb: What affects the hash of a rust library/dll?
[05:22:44] <eddyb> what hash?
[05:22:46] <eddyb> SVH?
[05:22:51] <WindowsBunny> like, in the filename
[05:23:05] <eddyb> I have no idea what that is for
[05:23:08] <eddyb> it's also constant
[05:23:19] <WindowsBunny> yeah, I wish it wasn't constant
[05:23:25] <eddyb> there's a SVH inside
[05:23:44] <WindowsBunny> eddyb: If each stage had its own unique hex value in the name
[05:24:04] <eddyb> WindowsBunny: lol
[05:24:16] <eddyb> WindowsBunny: you mean how make can't run the test executable?
[05:24:57] <WindowsBunny> eddyb: I mean how the dlls in Rust's bin folder have the exact same name as the DLLs in rustlib, and the DLLs being made while I'm building rust
[05:25:01] <eddyb> WindowsBunny: that's because we force it to run as stage1
[05:25:10] *** Quits: genbattle (genbattle@moz-4v0.gkd.16.182.IP) (Connection closed)
[05:25:11] *** Quits: mlrutherford (mlrutherfor@moz-7afka3.3fkl.4isk.6000.2605.IP) (Connection closed)
[05:25:25] <eddyb> I don't understand how stage2 tests could possibly run
[05:25:38] <eddyb> maybe they happen to work because they're fully statically linked or something
[05:25:40] <WindowsBunny> so its loading the .dll from my rust installation
[05:25:46] <WindowsBunny> but thats the wrong dll
[05:25:58] <eddyb> WindowsBunny: ehm that doesn't happen on linux
[05:26:02] <WindowsBunny> so the process fails to start and returns an error code 127
[05:26:12] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[05:26:17] <Quxxy> WindowsBunny: This sounds like a problem I had; I ended up writing a shell script for MSYS that just blew PATH away and wrote a new one from scratch
[05:26:24] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[05:26:26] *** Joins: genbattle (genbattle@moz-4v0.gkd.16.182.IP)
[05:26:27] <eddyb> while having LD_LIBRARY_PATH set to a Rust installation
[05:26:37] <WindowsBunny> eddyb: Whether it works on linux is irrelevant
[05:27:09] <eddyb> it works on linux because the library directory added by make goes first
[05:27:43] <eddyb> if it doesn't work on windows, it's either because you can't prioritize a directory or the order is set wrong in the makefiles
[05:27:55] <WindowsBunny> windows does respect the PATH order
[05:28:02] <eddyb> so it should just work
[05:28:18] <eddyb> can you run make VERBOSE=1?
[05:28:19] <WindowsBunny> If a DLL with the same module name is already loaded in memory, the  system checks only for redirection and a manifest before resolving to  the loaded DLL, no matter which directory it is in. The system does not  search for the DLL.
[05:28:25] <WindowsBunny> eddyb: Unless the DLL is already loaded
[05:28:34] <WindowsBunny> :|
[05:28:35] <eddyb> wat
[05:28:42] <eddyb> then windows is being overly stupid
[05:29:16] <eddyb> ressurecting solved problems since 1993
[05:29:42] <eddyb> WindowsBunny: is "module name" independent of file name?
[05:31:41] <WindowsBunny> I think module name is the file name
[05:32:21] <eddyb> hhhng
[05:32:36] <eddyb> WindowsBunny: good news is that we have a per-crate hash that we could use here
[05:32:46] <eddyb> but it really shouldn't be necessary
[05:32:56] <eddyb> WindowsBunny: how on earth do plugins work on windows?
[05:33:18] <WindowsBunny> DLL hell is awful
[05:33:33] <eddyb> if I have some generically named plugin.dll in two different apps, that does two entirely different things
[05:33:42] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Quit: Leaving)
[05:33:46] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[05:33:51] <eddyb> can loading one of them produce the other?
[05:34:35] <WindowsBunny> eddyb: that is... a possibility
[05:34:41] <eddyb> because that's just plain wrong :|
[05:34:52] <WindowsBunny> I'd have to test though
[05:34:55] <WindowsBunny> but that seems possible
[05:35:09] <aatch> -_-
[05:35:42] <WindowsBunny> "Desktop applications can control the location from which a DLL is loaded by specifying a full path, using DLL redirection, or by using a manifest. If none of these methods are used, the system searches for the DLL at load time as described in this section. "
[05:36:18] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[05:36:41] <eddyb> if NTFS had been designed to hash all files (like btrfs does, AFAIK), it could dedupe them. or at least windows could cheaply cache DLLs without being WRONG
[05:37:04] *** Quits: aatch (james@moz-i1k1ks.tlms.2o1v.e006.2406.IP) (Connection closed)
[05:37:15] *** Quits: Quxxy (chatzilla@moz-efh10q.internode.on.net) (Ping timeout: 121 seconds)
[05:37:35] <eddyb> since this smells of papering over the fact that you can have hundreds of copies of the CRT on your HDD
[05:38:23] <Havvy> eddyb:  Or if it used Nix... ;)
[05:38:50] <eddyb> Havvy: Nix wasn't invented in the 90's
[05:38:55] <eddyb> hash functions were
[05:39:02] * WindowsBunny sighs
[05:42:37] <eddyb> WindowsBunny: https://www.reddit.com/r/rust/comments/3chigv/can_someone_help_me_with_a_windows_memory_leak/
[05:42:56] * WindowsBunny hides
[05:42:56] <eddyb> did you mention windows memory leaks, or was I just seeing iopq in IRC asking the same thing?
[05:43:50] *** Joins: Quxxy (chatzilla@moz-0nv.jkp.167.59.IP)
[05:45:18] *** Quits: yjv (yjv@moz-ll38tk.pa.comcast.net) (Connection closed)
[05:45:50] *** Joins: yjv (yjv@moz-ll38tk.pa.comcast.net)
[05:46:04] *** Quits: O01eg (o01eg@moz-vhnce8.m90p.4n8f.2698.2a02.IP) (Client exited)
[05:49:52] *** Quits: yjv (yjv@moz-ll38tk.pa.comcast.net) (Ping timeout: 121 seconds)
[05:55:32] *** Joins: Kingsquee (kingsley@moz-k72lip.bchsia.telus.net)
[05:56:12] *** Quits: Feyn (aram@moz-5vj.68e.115.42.IP) (Quit: Leaving)
[05:59:39] *** Quits: genbattle (genbattle@moz-4v0.gkd.16.182.IP) (Connection closed)
[06:00:37] *** Joins: genbattle (genbattle@moz-4v0.gkd.16.182.IP)
[06:01:17] *** Quits: miselin (miselin@moz-c77.igu.11.203.IP) (Ping timeout: 121 seconds)
[06:02:49] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[06:03:11] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Quit: Leaving)
[06:03:21] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[06:04:32] *** Joins: miselin (miselin@moz-c77.igu.11.203.IP)
[06:04:49] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[06:07:54] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Quit: Leaving)
[06:08:01] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[06:14:38] *** Quits: Kroisse (Kroisse@moz-k5j.pif.170.107.IP) (Quit: Good bye :))
[06:18:11] *** Joins: aatch (james@moz-is4j4r.cable.telstraclear.net)
[06:22:15] *** Quits: Mr_Alert (mr_alert@moz-23ovql.res.rr.com) (Connection closed)
[06:27:05] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[06:27:51] *** Quits: genbattle (genbattle@moz-4v0.gkd.16.182.IP) (Ping timeout: 121 seconds)
[06:29:15] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[06:34:00] *** Joins: squiddy (squiddy@moz-md4.pm3.19.178.IP)
[06:34:15] *** Joins: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP)
[06:38:36] *** Quits: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP) (Ping timeout: 121 seconds)
[06:45:23] *** Joins: yjv (yjv@moz-ll38tk.pa.comcast.net)
[06:49:38] *** Quits: yjv (yjv@moz-ll38tk.pa.comcast.net) (Ping timeout: 121 seconds)
[06:54:59] *** Quits: ChrisMorgan (ChrisMorgan@moz-g6osuq.tpgi.com.au) (Ping timeout: 121 seconds)
[07:03:22] *** Joins: mgottschlag (quassel@moz-27iuo2.hsi6.kabel-badenwuerttemberg.de)
[07:03:36] *** Quits: Pierre_M (Pierre_M@moz-2vs15r.slkc.qwest.net) (Ping timeout: 121 seconds)
[07:05:46] *** Joins: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP)
[07:06:51] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[07:10:12] *** Quits: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP) (Ping timeout: 121 seconds)
[07:13:47] *** Joins: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP)
[07:17:50] *** Quits: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP) (Ping timeout: 121 seconds)
[07:18:22] *** Quits: mgottschlag (quassel@moz-27iuo2.hsi6.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[07:24:19] *** Quits: zmack (zmack@moz-376.4m7.123.86.IP) (Connection closed)
[07:24:21] *** Joins: bjz (bjz@moz-0j4.2c9.87.203.IP)
[07:26:24] *** Joins: zmack (zmack@moz-376.4m7.123.86.IP)
[07:33:52] *** Joins: madmalik (uid13697@moz-lfin5p.brockwell.irccloud.com)
[07:38:21] *** Quits: bjz (bjz@moz-0j4.2c9.87.203.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[07:40:23] *** Joins: laumann (thomas@moz-3m6.3kq.109.2.IP)
[07:42:39] *** Joins: Tobba (Tobba@moz-oecqnu.plus.com)
[07:44:04] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[07:44:21] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[07:51:07] *** Quits: njn (chatzilla@moz-270n86.iinet.net.au) (Quit: ChatZilla 0.9.91.1 [Firefox 42.0a1/20150706135613])
[07:52:35] *** Joins: stormpat (stormpat@moz-tc4abl.elisa-laajakaista.fi)
[07:53:35] *** Quits: stormpat (stormpat@moz-tc4abl.elisa-laajakaista.fi) (A TLS packet with unexpected length was received.)
[07:53:43] *** Joins: stormpat (stormpat@moz-tc4abl.elisa-laajakaista.fi)
[07:54:14] *** Joins: Feyn (aram@moz-5vj.68e.115.42.IP)
[07:54:31] *** Joins: Kroisse (Kroisse@moz-t75tk5.krois.se)
[07:57:13] *** Joins: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP)
[07:57:51] *** Joins: blaenk (blaenkdenum@moz-ggnkpd.res.rr.com)
[08:01:06] *** Joins: imperio (Mibbit@moz-a6a.fue.34.31.IP)
[08:02:28] <imperio> jroesch: ping
[08:02:38] <jroesch> hello
[08:02:58] <imperio> about gh26503, what's the warning ?
[08:02:58] <[o__o]> Unify variadic errors: https://github.com/rust-lang/rust/pull/26503
[08:04:44] *** Quits: Tobba (Tobba@moz-oecqnu.plus.com) (A TLS packet with unexpected length was received.)
[08:06:45] *** Joins: ChrisMorgan (ChrisMorgan@moz-tnttvc.comindico.com.au)
[08:06:53] <jroesch> imperio: this is it https://gist.github.com/jroesch/c3b6045bbe053d3f4460
[08:06:55] <jroesch> not a big deal
[08:07:17] <jroesch> just been bugging me since all I do is build rustc all day :P 
[08:07:54] *** Joins: bjz (bjz@moz-puppgq.tpgi.com.au)
[08:09:10] <imperio> I'm gonna take a look at how I handled other similar cases ;)
[08:09:43] <imperio> wo, supra extra weird warning O.o
[08:14:46] <jroesch> yeah I tried to fix it myself
[08:14:49] <jroesch> but I was really confused
[08:15:23] <imperio> that's because I replaced the E0220 call or something by E0045
[08:15:37] <jroesch> yeah I saw that
[08:15:43] <imperio> I didn't think it would create such a warning
[08:15:48] <jroesch> but if you use E0044 or another random error code
[08:15:48] <imperio> hum...
[08:15:51] <jroesch> it doesn't cause a warning 
[08:15:56] <imperio> really ?
[08:16:07] <imperio> it gets weirder and weirder
[08:16:11] <jroesch> yeah when I did E0044 earlier it went away
[08:16:25] <imperio> is the E0045 called nearly ?
[08:16:29] <imperio> or nearby ?
[08:16:34] <imperio> never sure of the good word
[08:20:57] *** Joins: eibwen (eibwen@moz-ocjg10.dip0.t-ipconnect.de)
[08:21:52] <jroesch> nearby to E0044?
[08:21:58] <jroesch> imperio: ^
[08:22:43] *** Quits: eibwen (eibwen@moz-ocjg10.dip0.t-ipconnect.de) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[08:24:34] <imperio> near of
[08:24:42] <imperio> ^^
[08:33:56] *** Joins: yjv (yjv@moz-ll38tk.pa.comcast.net)
[08:38:10] *** Quits: yjv (yjv@moz-ll38tk.pa.comcast.net) (Ping timeout: 121 seconds)
[08:39:19] *** Joins: zmack_ (zmack@moz-376.4m7.123.86.IP)
[08:40:44] *** Quits: zmack (zmack@moz-376.4m7.123.86.IP) (Connection closed)
[08:54:42] *** Quits: ChrisMorgan (ChrisMorgan@moz-tnttvc.comindico.com.au) (Ping timeout: 121 seconds)
[09:00:06] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[09:00:16] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[09:14:23] *** Joins: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP)
[09:18:47] *** Quits: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP) (Ping timeout: 121 seconds)
[09:22:42] *** Joins: ChrisMorgan (ChrisMorgan@moz-tnttvc.comindico.com.au)
[09:25:08] *** Quits: stormpat (stormpat@moz-tc4abl.elisa-laajakaista.fi) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[09:27:36] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[09:37:49] *** Quits: ChrisMorgan (ChrisMorgan@moz-tnttvc.comindico.com.au) (Ping timeout: 121 seconds)
[09:40:02] *** Quits: aatch (james@moz-is4j4r.cable.telstraclear.net) (Connection closed)
[09:42:15] *** Quits: Quxxy (chatzilla@moz-0nv.jkp.167.59.IP) (Ping timeout: 121 seconds)
[09:44:13] *** Joins: eddyb_ (eddyb@moz-lf4ud8.residential.rdsnet.ro)
[09:46:40] *** Quits: eddyb (eddyb@moz-tic.sgj.26.188.IP) (Ping timeout: 121 seconds)
[09:50:34] *** Quits: Kingsquee (kingsley@moz-k72lip.bchsia.telus.net) (Quit: Konversation terminated!)
[09:51:36] *** Joins: aatch (james@moz-is4j4r.cable.telstraclear.net)
[09:53:48] *** Joins: nagisa (nagisa@moz-8t068g.static.zebra.lt)
[10:03:03] *** Joins: vmx (vmx@moz-m5fneh.pools.vodafone-ip.de)
[10:03:50] *** Joins: ville (ville@moz-e3vb7v.elisa-laajakaista.fi)
[10:04:39] <ville> howdy. what kind of work is there being conducted about reflection? something a person with too much free time can take part of?
[10:08:48] *** Joins: stormpat (stormpat@moz-tc4abl.elisa-laajakaista.fi)
[10:10:34] *** Quits: imperio (Mibbit@moz-a6a.fue.34.31.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:11:19] *** eddyb_ is now known as eddyb
[10:11:25] <eddyb> ville: nobody is working on reflection
[10:11:37] <eddyb> ville: mostly because it's not a goal of Rust
[10:12:02] <ville> sorry i mean static reflection/introspection
[10:12:16] <eddyb> then it depends what your constraints are
[10:12:27] <eddyb> serde is doing great
[10:12:48] <ville> is serde an opt-in?
[10:13:22] <eddyb> serde is a library on crates.io
[10:13:43] <eddyb> oh, I see what you mean, sorry
[10:13:55] <eddyb> yes, it's opt-in for each type that you want to serialize/deserialize
[10:14:13] <ville> then it's not quite what i would hope there is available.
[10:14:50] <eddyb> without knowing how you want to use it, there's no telling what could be done
[10:15:15] <ville> c++'s now talking about static reflection which i think is 17 years late
[10:15:44] <eddyb> it's doubtful that anything that would work in C++ would be relevant to Rust
[10:15:54] <eddyb> unless it's based on concepts
[10:16:11] <ville> basically the ability to inspect class, function, namespace "members"
[10:16:27] *** Parts: aatch (james@moz-is4j4r.cable.telstraclear.net) ("Leaving")
[10:16:30] <eddyb> Rust doesn't have "classes"
[10:16:30] <ville> throw in enum and union there
[10:16:35] *** Joins: aatch (james@moz-is4j4r.cable.telstraclear.net)
[10:16:36] <eddyb> oh, you mean C++
[10:16:44] * eddyb should be paying attention
[10:16:58] <ville> yeah i was talking about what the c++ comittee is trying to achieve.
[10:17:10] <ville> which will in the end make serialization far more easier
[10:17:32] <eddyb> do you have any usecase other than serialization?
[10:17:43] <eddyb> because Rust has solved serialization. opt-in works
[10:18:02] <ville> opt-in doesn't work. c++ proves otherwise
[10:18:17] <eddyb> C++ doesn't have compiler plugins
[10:18:27] *** Joins: Quxxy (chatzilla@moz-0nv.jkp.167.59.IP)
[10:18:29] <eddyb> opt-in in Rust means #[derive(Serialize, Deserialize)]
[10:18:51] <ville> can i add those to existing types after their definition?
[10:18:56] <eddyb> automatic deriving not being customizable is an issue, but one that should be worked on, rather than coming up with reflection schemes
[10:19:10] <eddyb> ville: you mean, in a different crate?
[10:19:19] <ville> as far as i see compiler plugins are just a mutation of pre-compiler steps for a c++ project
[10:19:30] <benh> eddyb: why do you hate metaprogramming :P
[10:19:40] <eddyb> benh: because everyone's doing it wrong :P
[10:20:07] <ville> benh: are you russian and contribute to boost?
[10:20:16] <WindowsBunny> ville: You can only implement a trait for a type when either the trait or the type is defined in your crate
[10:20:22] <benh> ville: i'm afraid not
[10:20:51] <benh> tho i live with a russian and at one point i commented on a boost bug pointing out the fix, so it might still count
[10:21:22] <WindowsBunny> I'm russian but I stay very far away from boost
[10:21:31] <ville> benh: yeah just a joke. right now the only people contributing/promoting c++ metaprogramming seem to be russian well there is one french guy i think
[10:21:43] <benh> ah :p
[10:22:07] <eddyb> I don't think benh was serious. or at least I hope he wasn't
[10:22:08] *** Joins: yjv (yjv@moz-ll38tk.pa.comcast.net)
[10:22:10] <benh> sorry you got me on the wrong foot, apparently there's the odd mozillian or so also going by benh somewhere
[10:22:23] <benh> so I'm used to being taken for other people
[10:22:32] <ville> benh: nah didn't think that
[10:22:44] <benh> eddyb: I did comment on a boost bug!
[10:22:55] <eddyb> benh: about hating metaprogramming
[10:22:57] <ville> anyway the original hope was that one could inspect any type with out any opt-in
[10:23:16] <eddyb> ville: that's actually always going to be impossible
[10:23:18] <eddyb> by design
[10:23:22] <benh> ville: I think we used to have that and then got rid of it because it violated parametricity and also privacy
[10:23:31] <eddyb> ville: things like TypeId require a Reflect bound
[10:23:49] <WindowsBunny> If you can inspect the private fields of types, then that breaks any sort of stability guarantees
[10:23:54] <WindowsBunny> especially for std types
[10:24:07] <eddyb> ville: do you have an actual usecase?
[10:24:09] <ville> not too interested in private fields
[10:24:23] <eddyb> ville: or are you going by the dozens of broken patterns found in C++?
[10:24:47] <WindowsBunny> And many types will often make little being serialized with a default impl
[10:24:56] <WindowsBunny> and will want something custom, like Vec
[10:25:21] <eddyb> (duck typing can be so much fun)
[10:25:24] <WindowsBunny> *little sense
[10:25:51] <benh> serialization is more interesting as a field visitor than actually dumping bits here, i think
[10:26:03] <ville> the usual usecase that i encounter is say straight enums. just values that have an integer meaning in the program and the another representation as a user facing value
[10:26:20] *** Quits: yjv (yjv@moz-ll38tk.pa.comcast.net) (Ping timeout: 121 seconds)
[10:26:28] <eddyb> ville: that's... not Rust
[10:26:49] <ville> the user-facing value can often be the same as the constant name... SOMETHING_OR_OTHER
[10:27:05] <eddyb> user-facing output is not what serializaton is about
[10:27:19] <eddyb> and #[derive(Debug)] will produce what you seem to be after
[10:27:24] <benh> ville started asking about reflection/introspection, not serialization :P
[10:27:38] <WindowsBunny> And #[derive(Debug)] is implemented on most things
[10:27:44] <eddyb> benh: they were talking about serialization earlier
[10:27:51] <ville> again it's opt-in, right
[10:27:53] <benh> mhm
[10:27:58] <eddyb> benh: and the field visitor pattern is what serde does
[10:28:05] <eddyb> well, visitors in general
[10:28:19] <eddyb> it's more powerful than the crappy rustc-serialize
[10:28:46] <ville> with regards to this jonathan blow has a pretty good setup in his language
[10:29:13] <ville> you don't have to opt-in. if you use it you get the info. otherwise it's optimized out i believe.
[10:29:29] <eddyb> again, have you had a problem with opt-in in Rust?
[10:29:36] <eddyb> or is this fear coming from C++?
[10:29:53] <eddyb> it's understandable that dependencies are immutable in C++
[10:29:56] <benh> Did we actually decide to make Debug built in because of any code size concerns?
[10:30:05] <eddyb> benh: it's not built-in
[10:30:07] <benh> err
[10:30:09] <eddyb> not sure what you mean
[10:30:12] <benh> not opt-in
[10:30:14] <benh> errrrrr
[10:30:17] <benh> not built-in, opt-in
[10:30:17] <ville> eddyb: it's from c++. i've not done anything serious in rust. thus far rust seems similar with c++ in this respect
[10:30:21] <benh> i'm bad with words :(
[10:30:34] <eddyb> ville: it works fine
[10:30:49] <ville> eddyb: opt-in is the big thing though
[10:30:55] <eddyb> opt-in works
[10:31:17] <ville> eddyb: can i opt-in for someone else's type?
[10:31:31] <eddyb> unless you have some odd case to analize, where it doesn't, there's nothing to discuss
[10:31:42] <WindowsBunny> ville: You can submit a PR to that crate to make it opt-in :D
[10:31:52] <WindowsBunny> to make it implemented rather
[10:32:20] <eddyb> ville: you can implement it manually (if you have access to the fields) if you really don't want to fix the original
[10:32:47] <benh> eddyb: you can implement it for an out-of-crate type?
[10:32:55] <benh> do you wrap it in a struct of your own?
[10:32:55] <WindowsBunny> benh: You can impl it on a newtype
[10:33:13] <WindowsBunny> eddyb: okay, seems both stage0 and stage1 std test cannot find the test .dll
[10:33:20] <eddyb> WindowsBunny: great :/
[10:33:31] <WindowsBunny> eddyb: but stage2 is fine
[10:33:41] <eddyb> benh: it's opt-in because Debug is just another trait that can have custom impls
[10:33:46] <WindowsBunny> eddyb: It's not that its loading the wrong one, it just doesn't find it at all
[10:34:05] <benh> eddyb: It seems like all types being able to print themselves (say, in a debugger) by default would be desirable tho
[10:34:06] <ville> well this is the situation i want to avoid when things become mature and you can't anymore "just fix it"
[10:34:20] <WindowsBunny> benh: If it wasn't opt-in, it would be more annoying to provide a custom implementation
[10:34:27] <benh> true
[10:34:49] <eddyb> ville: that's another C++-specific issue
[10:35:24] <eddyb> it's 2015, we can do things better
[10:35:33] <WindowsBunny> cargo overrides!
[10:35:42] <WindowsBunny> Or just fork everything and use your own versions
[10:36:05] <ville> eddyb: i am not sure how. things will become stagnated once you combine things you get source/object files and closed systems where you don't
[10:36:49] <eddyb> ville: there's no such thing as closed-source dependencies
[10:36:54] <eddyb> (sorry)
[10:37:12] <benh> that's... pretty optimistic or pessimistic, depending on the viewpoint
[10:37:20] <aatch> ville, I'm not sure how any language can do anything to to fix that though.
[10:37:27] <WindowsBunny> cargo pretty much requires building all rust code from source
[10:37:53] <eddyb> benh: it's what the facts are
[10:37:56] <aatch> ville, I mean, a closed-source system isn't going to be amenable to static, well, anything.
[10:38:14] <eddyb> to build usable closed-source libraries you have to manually crate black boxes
[10:38:15] <benh> ville: how is C++'s plan for reflection going to deal with the private impl thing?
[10:38:27] <eddyb> with open-source wrappers
[10:38:34] <eddyb> *manually create
[10:40:52] <WindowsBunny> ville: Solution: don't depend on closed source crates :D
[10:41:03] <ville> compiler will create the meta. i am not sure what the implication will be for actual .so
[10:41:16] <eddyb> WindowsBunny: creating them will be too much of a hassle
[10:41:24] <ville> WindowsBunny: yeah. i would like to. unfortunately not applicable to real life.
[10:41:44] <WindowsBunny> hey eddyb, in the real life world of rust, are there any closed source rust libraries?
[10:42:04] <ville> WindowsBunny: probably not yet but there will be if rust  makes it big
[10:42:07] <eddyb> there is unpublished code
[10:42:20] <eddyb> that's what the industry use of Rust will revolve around
[10:42:33] <eddyb> that and maybe some tooling to hide away details
[10:42:42] <ville> there is no point being myopic and idealistic about it that everything is out in the open
[10:42:49] <eddyb> but you'll have to throw performance away
[10:42:53] <eddyb> to achieve encapsulation
[10:42:56] *** Quits: zmack_ (zmack@moz-376.4m7.123.86.IP) (Connection closed)
[10:43:02] <eddyb> ville: I am not
[10:43:12] <benh> enough people are fine with the level of performance they get from non-inlined C functions in .so files
[10:43:14] <eddyb> most of the closed-source code out there is merely unpublished
[10:43:21] *** Joins: zmack (zmack@moz-376.4m7.123.86.IP)
[10:43:33] <eddyb> benh: that's quite the blanket statement
[10:44:00] <benh> eddyb: well i mean we've had C APIs in .so files for a while and the world has not ground to a halt yet
[10:44:00] <eddyb> those functions cannot be used in hot loops. they work fine for non-trivial tasks, modulo monomorphization
[10:44:03] <benh> so for some usecases it works
[10:44:08] <ville> have you read the papers published about c++ reflection or watched blow's videos?
[10:44:25] <benh> so people are gonna happily use closed-source rust stuff for those use cases
[10:44:26] <eddyb> ville: those things solve problems that reflection created
[10:44:44] <eddyb> serialization is not a reflection problem
[10:45:18] <benh> ville: out of curiosity, are you only interested in reflection for the sake of serialization and similar stuff, or did you have something else in mind?
[10:45:20] <eddyb> benh: it will need tooling
[10:45:23] <ville> it is in a way. you need the ability to iterate over fields of things
[10:45:51] <eddyb> benh: once you add a type parameter, your precious source code is out in the open
[10:46:08] <benh> eddyb: again, there's plenty of use cases where type param less C APIs are doing just fine :P
[10:46:13] <ville> benh: mostly serialization. nothing pertaining to run-time reflection like java has
[10:46:17] <WindowsBunny> well, the llvm IR equivalent of your precious source code
[10:46:34] <benh> ville: does n3996 dot pdf sound right?
[10:46:40] <benh> "static reflection" from 2014-05-26?
[10:46:42] <eddyb> WindowsBunny: right now you can extract the exact source code
[10:46:58] <WindowsBunny> eddyb: like, we just shove the source code in the rlib?
[10:47:02] <ville> benh: yeah that's one of the papers
[10:47:05] <eddyb> WindowsBunny: serialized, yes
[10:47:17] <eddyb> you can't write LLVM IR with generic type parameters in it :P
[10:47:19] <eddyb> that's not IR works
[10:47:22] <WindowsBunny> eddyb: So it's parsed into a serialized AST?
[10:47:35] <eddyb> "parsed" "into"?
[10:47:39] <eddyb> *not how IR works
[10:47:42] <benh> is a serialized AST more or less compact than regular source?
[10:48:00] <eddyb> less
[10:48:05] <ville> benh: http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/#mailing2015-05 search for reflection is the latest
[10:48:22] <eddyb> benh: our metadata is far from being in a sane state
[10:48:25] <eddyb> it will get better
[10:49:11] <benh> I used to have that page at a prime spot in my address bar autocompletion list... :(
[10:49:29] <WindowsBunny> I used to skim every C++ paper
[10:49:46] <WindowsBunny> Now I completely ignore the C++ part of my RSS feeds
[10:50:24] <benh> oh there's a lot of these pdfs
[10:50:32] <benh> i probably can't get away with reading them all at work
[10:53:17] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[10:54:26] <eddyb> https://gist.github.com/eddyb/822c658190ccf18058db this is taking much longer than I hoped
[10:58:11] <WindowsBunny> eddyb: oh boy
[10:58:23] <eddyb> I still need to desugar the actual function
[10:58:32] <eddyb> but I expect it to compile in the end
[10:58:51] <eddyb> WindowsBunny: playing with this because the MIR is coming
[10:59:14] <eddyb> and it will allow a relatively painless implementation of generators and async/await (I would have them very similar, but not identical)
[11:00:01] <eddyb> the issue with generators is that you're not guaranteed to get Some(Do::Return(x))
[11:00:05] <eddyb> before it starts returning None
[11:00:12] <eddyb> unless...
[11:03:47] <ville> perhaps use of reflection is too general of a term for what i'd like to be automated. i am not talking about java's reflection abilities. the c++ papers and blow's videos cover it more closely.
[11:04:06] <ville> static and compile-time are the adjectives i'd associate with it
[11:04:15] *** Quits: oli_obk__ (Mibbit@moz-7bq.0sb.52.141.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[11:04:49] <WindowsBunny> ville: Our answers remain unchanged
[11:06:32] <eddyb> there are uses for compile-time reflection, but they're more convoluted than "serialization" and "debugging"
[11:06:46] <eddyb> maybe debugger hooks
[11:07:19] <eddyb> actually, what I'm thinking of is somewhat dynamic, so not even that
[11:07:52] <eddyb> (in Rust, there are some very powerful things you can do by listing all the impls in a crate)
[11:09:14] <eddyb> (namely dynamic multidispatch. it's also possible to make things like generic methods on trait objects work, but that's more of a codegen issue than reflection. it's also horribly inefficient without a JIT)
[11:12:25] *** Joins: wcosta (wander@moz-8st.m6e.98.179.IP)
[11:15:21] *** Joins: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP)
[11:16:19] *** Joins: zxq9 (ceverett@moz-qsm369.mesh.ad.jp)
[11:16:39] <aatch> Woo, I finally managed to get my branch hinting branch back to bootstrapping, lets see if it gets past stage1!
[11:19:35] *** Quits: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP) (Ping timeout: 121 seconds)
[11:24:39] <ville> WindowsBunny: rust may be going to repeat a mistake from programming languages before it
[11:24:48] <eddyb> ville: reflection is a mistake
[11:25:08] <ville> eddyb: umm full reflection like java or static what i was after?
[11:25:09] <eddyb> Rust doesn't have many of C++'s problems in this area
[11:25:17] <eddyb> ville: both
[11:25:43] <eddyb> really, we're comparing 100-line-long operator<< overloads with #[derive(Debug)]
[11:26:03] <eddyb> it's not a fair game for C++
[11:26:22] <ville> i was hoping there was a non-opt-in
[11:26:34] <eddyb> so I think I can define generators and async/await the same way https://gist.github.com/eddyb/822c658190ccf18058db
[11:26:41] <WindowsBunny> ville: If in the course of your rusting, you actually encounter issues with it being opt-in, not just theoretically, then feel free to bring it up
[11:26:58] <eddyb> WindowsBunny: yeah, that's what I had been trying to say the whole time
[11:27:23] <eddyb> it's going to be rare and easy to fix
[11:27:39] <eddyb> if not, we sure want to know about it (so we can solve it)
[11:27:53] <WindowsBunny> ville: From a theoretical standpoint many of the people active in this conversation think that Rust's differences to C++ means it doesn't need full blown static reflection and that opt-in traits for that stuff works fine
[11:28:00] <ville> WindowsBunny: that is accurate. i've no idea what it is to program with rust for real
[11:28:14] <benh> how does a 100 line << overload session compare to setting up a local override for some other crate with an added #[derive()] line, possibly recursively
[11:28:15] <WindowsBunny> ville: And from a practical standpoint, so far it has held true that opt-in has worked
[11:29:03] <ville> WindowsBunny: i come from a c++ point-of-view and there static reflection would have solved serious amount of boilerplate LOC
[11:29:12] <eddyb> but it hasn't been a problem so far and closed source dependables won't be trivial to create anyways, they will need tooling and the tooling can deal with exposing all the right things
[11:29:25] <WindowsBunny> ville: Rust doesn't have the boilerplate issues because #[derive] handles that
[11:29:34] <eddyb> benh: we have builders for struct fields
[11:29:35] <WindowsBunny> or whatever macros/plugins
[11:29:56] <eddyb> benh: such that custom impls behave uniformly
[11:30:22] <WindowsBunny> ville: So the only argument that can be made in Rust is a library not using #[derive] _and_ the library is closed source _and_ the maintainers refuse to add #[derive] to that type
[11:30:57] <ville> WindowsBunny: that will happen
[11:31:10] <eddyb> worst case is enums with many variants (potentially C-like), which I think ville mentioned (fwiw)
[11:31:11] <ville> anyway it's a dealt issue. i don't have the experience in rust to worry about it. was one of my dreads.
[11:31:39] <eddyb> ville: we used to have a plan for linting against missing commonly useful traits which can also be auto-derived
[11:32:14] <eddyb> and #[derive(Data)] to encompass most traits
[11:32:28] <eddyb> (most auto-derivable traits, that is)
[11:32:40] <benh> WindowsBunny: lib not using derive _and_ the source isn't available or can't be changed for other weird reasons
[11:32:41] <eddyb> ville: pushing forward on that will close the gap even further
[11:32:57] <benh> or maybe the maintainers happily added #[derive] but you're stuck 5 releases in the past anyway
[11:32:59] <WindowsBunny> ville: It's impractical to reflect on closed source black box libraries anyway, because that implies the library would be built in such a manner as to allow reflection
[11:33:41] <eddyb> #[derive(Reflect)] :P
[11:33:48] <ville> WindowsBunny: it is interesting to see what the c++ people will decide
[11:33:56] <benh> #[derive(Reflect)] extern crate foo;
[11:34:03] <eddyb> Reflect is opt-in in a different way, though
[11:34:11] <eddyb> parametricity is enforced
[11:34:20] <ville> WindowsBunny: people will complain if it is opt-out for sure when it explodes the .so binary size
[11:34:46] <eddyb> all types implement Reflect by default but you can opt out of it
[11:35:01] <benh> could a syntax ext read the crate name, load up the crate, deserialize the metadata independently and replace the crate import with an inline copy of itself with added trait impls...?
[11:36:43] <WindowsBunny> ville: I prefer the msvc model of separate .lib and .dll
[11:36:45] *** Joins: jdm (jdm@moz-ilbt2e.cable.teksavvy.com)
[11:36:59] <WindowsBunny> It separates the link time information  from the runtime binary you bundle with the program
[11:37:55] *** Joins: Sho (sho@moz-q2q.p8p.28.5.IP)
[11:37:57] <WindowsBunny> ville: And wait, if the reflection information is stored in the compiled library, that means the compiler would need to access libraries, rather than just the linker!
[11:38:03] <WindowsBunny> That sounds like a recipe for disaster
[11:38:07] <ville> so after shooting that thing down, i've still have free time to waste for next month. any ideas?
[11:38:24] <WindowsBunny> ville: Go do something awesome in rust :P
[11:38:50] <ville> WindowsBunny: that's the ideas i am after if i can help the infra
[11:39:11] <WindowsBunny> ville: Are you more into library work or compiler work?
[11:39:49] <ville> open for anything really point me to an easy bug report or some such
[11:40:28] *** Joins: amyers (amyers@moz-qn874b.zip.zayo.com)
[11:40:38] <Havvy> There's an I-Easy tag for bugs in the Github buglist.
[11:46:37] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[11:46:57] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[11:49:19] *** Joins: ytain (ytain@moz-upqesl.dsl.teksavvy.com)
[11:53:13] *** Joins: yjv (yjv@moz-ll38tk.pa.comcast.net)
[11:55:20] *** Quits: yjv (yjv@moz-ll38tk.pa.comcast.net) (Connection closed)
[11:57:14] <aatch> ville, gh26867 should be good to get your feet wet.
[11:57:14] <[o__o]> libstd: Div is not implemented for Wrapping: https://github.com/rust-lang/rust/issues/26867
[11:58:00] <ville> aatch: it's raining as heck here so my feet are wet... haha sorry i will be here all week
[11:58:18] <aatch> ville, It's raining pretty damn hard here too.
[11:58:24] <benh> ville: you'll need to be here all week if you want to run the compiler build cycle and testsuite >:U
[11:59:11] <Havvy> !gh 26867
[11:59:11] <rustbot> [Issue 26867] <open> libstd: Div is not implemented for Wrapping <https://github.com/rust-lang/rust/issues/26867>
[11:59:22] <ville> benh: that was the one thing i didn't like when i contributed a patch previously... the build was so monolithic from my perspective. based on ignorance of course
[11:59:31] <Havvy> Oh, right, [o__o] is a bot.
[11:59:42] <benh> ville: clearly you should hack on the build process itself :P
[11:59:42] <Havvy> Who says that.
[12:00:35] <benh> tbh I used to contribute a bit and it was super easy to get into because for large areas rust being safe and having tests prevents me from messing anything up too bad, but the cycle time eventually drove me off :(
[12:01:10] <benh> I guess it's really saying a good thing if the most intimidating part of your systems language compiler project is the build times!
[12:01:10] <aatch> I tend to contribute in spurts because I tend to work on things that are hard. Like codegen.
[12:01:26] <WindowsBunny> benh: the cycle time is fine if you know the tricks to avoid too much rebuilding
[12:01:34] <ville> benh: i'd do that if i was very very annoyed. some of the command line options for make made it almost tolerable
[12:01:58] <aatch> Hey, you screwed up and now the compiler segfaults in a random function. Good luck tracking that down!
[12:02:44] <WindowsBunny> aatch: better yet when it actually isn't your fault, you just happened to trigger existing broken code
[12:02:47] <ville> aatch: reading that and i can't get an idea even what it's about? if it's about code there could be an example that fails and another that succedes
[12:03:10] <aatch> WindowsBunny, oh, you mean like half the changes I've currently got on my branch?
[12:03:39] <WindowsBunny> ville: Are you referring to #26867 with that comment?
[12:03:57] <ville> WindowsBunny: yeah
[12:04:07] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[12:04:08] <benh> Wrapping is a thing for wrapping arithmetic
[12:04:10] <benh> a type
[12:04:16] <benh> but someone forgot to add division to it
[12:04:18] <WindowsBunny> ville: Maybe you should consider learning Rust a bit first :P
[12:04:27] <WindowsBunny> Like, maybe the very basics, maybe
[12:04:34] <benh> so afaict someone just needs to type in the trait impl of Div for Wrapping
[12:04:49] <benh> it's all library code i think
[12:05:18] <aatch> benh, yep, the original implementation for that stuff was a joint effort between me and Elaine.
[12:06:00] <WindowsBunny> ville: src/libcore/num/wrapping.rs
[12:06:17] <WindowsBunny> There's a bunch of impl SomeOperatorTrait for Wrapping<$t> {
[12:06:21] <WindowsBunny> in some macro
[12:06:31] <WindowsBunny> Just add one for Div
[12:06:51] <ville> WindowsBunny: yeah. just a less-than-beginner. i guess the capitalization should have been a guide. still think my critizism about the representation is valid
[12:07:03] <WindowsBunny> ville: When people say Foo is implemented for Bar, that means Foo is a trait, and Bar is a type, and that Bar the type implements Foo the trait
[12:07:36] <benh> I guess it helps to know all the numeric bits and how they live in the stdlib and how lang items work
[12:08:19] <WindowsBunny> benh: I just did `grep -r 'for Wrapping' .` to figure it out :P
[12:08:28] <benh> WindowsBunny: I mean to divine what the bug is asking
[12:08:49] <WindowsBunny> ah, well you'd have to know that traits are used for the arithmetic operators
[12:08:57] <WindowsBunny> and that Wrapping is a type for wrapping arithmetic
[12:09:05] <benh> hm, overflowing_div as a thing already, might literally just be copy+pasting the mul bits and making it say div
[12:09:19] <benh> I assume the overflowing_div impl is already gonna panic on zero since that's not an overflow, just undefined
[12:10:05] *** Joins: mgottschlag (quassel@moz-adsrtp.h71g.nb65.1398.2a00.IP)
[12:11:18] <eddyb> benh: there is overflow for division
[12:11:29] <eddyb> it's one of the two values that can cause a panic
[12:11:54] <eddyb> *cases
[12:12:29] <eddyb> x / 0 cannot be turned off. ideally the CPU would take care of it (and it might anyway)
[12:12:42] <eddyb> and then there's MIN_VALUE / -1
[12:12:44] <ville> alright i'll look into that tomorrow. have new machine that i've to setup everything.
[12:12:49] <WindowsBunny> eddyb: We can have an SEH exception handler for it :D
[12:13:00] <eddyb> which is -MIN_VALUE which is MIN_VALUE
[12:13:01] <benh> eddyb: Yeah, I meant the panic is the right thing to do for overflowing division, so you don't need to handle zero specially
[12:13:04] <eddyb> hence, overflow
[12:13:17] <eddyb> actually
[12:13:23] <benh> whereas the -MIN_VALUE / -1 case seems to be handled by overflowing_div already
[12:13:31] <eddyb> benh: now that I think about it, x / 0 *is* overflow
[12:13:35] <benh> heh
[12:13:57] <benh> what about 0 / 0
[12:13:59] <eddyb> it's just that you can't define wrapping for it, just saturating
[12:14:03] <WindowsBunny> eddyb: It's just that x / 0 causes a cpu interrupt which breaks your code (unless you have an SEH exception handler for it)
[12:14:06] <eddyb> benh: oh that's just messed up
[12:14:12] <eddyb> some languages have 0 / 0 == 0
[12:14:24] <WindowsBunny> 0 / 0 should obviously be 1
[12:14:31] <benh> eddyb: would you really want x/0 to return _MIN or _MAX?
[12:14:36] <eddyb> WindowsBunny: same on unixes (via signals)
[12:14:43] <eddyb> benh: not really, no
[12:15:00] <WindowsBunny> eddyb: But do we really want to install a signal/exception handler every time someone does division?
[12:15:08] <eddyb> WindowsBunny: every time?
[12:15:15] <benh> we can't panic in signal handlers, can we?
[12:15:27] <benh> or set things up in a signal handler to panic right afterwards
[12:15:38] <benh> saturating arithmetic is not free to implement like overflowing arithmetic, right?
[12:15:41] <eddyb> benh: you can do anything you want on an UNIX system
[12:15:46] <eddyb> more so on linux where you have ptrace
[12:15:56] <benh> heh
[12:16:13] <eddyb> benh: it's free for SIMD, but not properly exposed
[12:16:22] <eddyb> it's also free for some bit sizes on ARM
[12:16:24] <benh> can you really inject a well-defined panic with unwinding into arbitrary code positions?
[12:16:29] <eddyb> and, well, Mill
[12:16:41] <benh> i guess you fail if it was actually C code you called that did the division
[12:16:48] <eddyb> ouch
[12:17:05] <benh> uninstall signal handler on ffi boundaries >:U
[12:17:07] <eddyb> benh: treating every division as "could unwind" is a good first step
[12:17:39] <benh> maybe instead of adding division to Wrapping, we should just remove it from all other types
[12:17:44] <benh> it's clearly problematic
[12:17:44] <eddyb> not having landing pads at that location is why triggering panicks at arbitrary points in execution isn't memory-safe
[12:18:26] <eddyb> benh: strcat sugested removing % for floats in constants
[12:18:49] <eddyb> playbot: const FIVE: f32 = 15.0 % 10.0; FIVE
[12:18:50] -playbot- 5
[12:19:02] <benh> does it compile to an fmod call at runtime before main?
[12:19:25] <eddyb> dear lord no
[12:19:29] <eddyb> we have const evaluation
[12:19:42] <benh> playbot: const NOT_FIVE: f32 = 15.0 % 0.0; NOT_FIVE
[12:19:43] -playbot- NaN
[12:19:46] <benh> playbot: const NOT_FIVE: f32 = 0.0 % 0.0; NOT_FIVE
[12:19:47] -playbot- NaN
[12:19:55] * benh is not very familiar with float edge cases
[12:20:17] <benh> eddyb: so what's strcat's opposition?
[12:20:26] <eddyb> there was an issue open
[12:20:49] <eddyb> the point was to move it to a Rem impl
[12:21:02] <eddyb> and have no built-in versions
[12:21:19] <eddyb> benh: we use LLVMConstFRem
[12:23:07] <eddyb> frem is also an actual LLVM instruction so I don't know what that discussion was about
[12:27:35] *** Joins: yjv (yjv@moz-ll38tk.pa.comcast.net)
[12:29:50] *** Joins: imperio (Mibbit@moz-aibeqg.fbx.proxad.net)
[12:30:09] <imperio> Shouldn't this code : http://is.gd/sMMeXo gives this error code : https://github.com/rust-lang/rust/blob/943b0146099af31e1982f4cbfc7422b6fa25cd12/src/librustc_typeck/astconv.rs#L665 ?
[12:32:46] <aatch> imperio, I think it's failing somewhere else because `i32` is a primitive type.
[12:33:03] <aatch> imperio, if you do `impl Bar for Bar` you get the expected error code.
[12:33:06] *** Quits: mgottschlag (quassel@moz-adsrtp.h71g.nb65.1398.2a00.IP) (Ping timeout: 121 seconds)
[12:33:22] <aatch> Though it does seem to think that `Bar` is a type alias.
[12:35:15] *** Quits: yjv (yjv@moz-ll38tk.pa.comcast.net) (Connection closed)
[12:36:32] *** Joins: mgottschlag (quassel@moz-adsrtp.h71g.nb65.1398.2a00.IP)
[12:36:56] <imperio> aatch: I do get the error but not the error code
[12:38:48] *** Quits: Amaranth (travis@moz-1raqsl.cpe.cableone.net) (Connection closed)
[12:41:39] *** Joins: Amaranth (travis@moz-1raqsl.cpe.cableone.net)
[12:48:49] <eddyb> imperio: it's astconv_utils
[12:48:56] <eddyb> somewhere in the source code
[12:49:22] <eddyb> wait, no, I thought it was a different primitive error
[12:49:31] <imperio> eddyb: https://github.com/rust-lang/rust/blob/943b0146099af31e1982f4cbfc7422b6fa25cd12/src/librustc_typeck/astconv.rs#L665
[12:49:33] <eddyb> imperio: try looking in resolve
[12:49:49] <imperio> resolve ?
[12:50:06] <eddyb> librustc_resolve
[12:50:25] <imperio> sorry, my question was incomplete
[12:50:34] <imperio> why should I look in resolve ?
[12:51:15] <eddyb> it can't hurt, can it?
[12:51:33] <eddyb> I would just grep src/librustc* every time if I were you, less chances you can miss something
[12:52:31] <eddyb> src/librustc_resolve/lib.rs:                    &format!("`{}` is not a trait",
[12:52:38] <eddyb> that's what grep gives me
[12:53:10] <imperio> I don't have a linux under my hand unfortunately
[12:53:17] <nagisa> git grep
[12:53:27] <imperio> nor the sources of rust on my computer
[12:53:31] <imperio> =D
[12:53:32] <eddyb> nagisa: that's what I used, actually
[12:53:41] <imperio> I use github search
[12:53:44] <imperio> kinda weird
[12:53:45] <eddyb> uhm
[12:53:51] <eddyb> imperio: how do you get anything done?
[12:54:02] <imperio> github interface =ds
[12:54:05] <benh> github text editor :D
[12:54:21] <imperio> but is it normal that it doesn't return the E0 i don't remember how ?
[12:54:21] <eddyb> not that, the github code search
[12:54:33] <eddyb> how does that work remotely reasonable?
[12:55:05] <eddyb> it's barely more reliable than google IME
[12:55:09] <benh> maybe it just calls git grep
[12:55:34] <eddyb> no, it does indexing
[12:55:45] <eddyb> oh but you can put quotes around something
[12:55:53] <eddyb> not to match verbatim, no, that would be too much to ask
[12:56:00] <eddyb> but it does require the ordering
[12:56:10] <eddyb> (wait, it does match, but it doesn't highlight it right)
[12:56:16] <eddyb> imperio: anyways, https://github.com/rust-lang/rust/search?utf8=%E2%9C%93&q=%22is+not+a+trait%22&type=Code
[12:56:58] <eddyb> playbot: let _: Box<i32 + Send>;
[12:56:59] -playbot- <anon>:9:20: 9:23 error: expected a reference to a trait [E0172]
[12:56:59] -playbot- <anon>:9         let _: Box<i32 + Send>;
[12:56:59] -playbot- output truncated; full output at: http://bit.ly/1Cpb4NG
[12:57:19] <eddyb> can E0245 ever be triggered?
[12:57:33] <imperio> that's what I'm trying to do ^^'
[12:57:37] <benh> do we have a bot that looks up error codes?
[12:57:55] <eddyb> !E0245
[12:57:55] <rustbot> https://doc.rust-lang.org/error-index.html#E0245
[12:58:16] <benh> ah
[12:58:26] <eddyb> imperio: it would have to be TyPolyTraitRef
[12:58:34] <eddyb> playbot: let _: Box<for<'a> i32>;
[12:58:35] -playbot- <anon>:9:28: 9:31 error: `i32` is not a trait
[12:58:35] -playbot- <anon>:9         let _: Box<for<'a> i32>;
[12:58:35] -playbot- output truncated; full output at: http://bit.ly/1JTUiWK
[12:58:38] <imperio> a polynome ?
[12:58:43] <nagisa> eddyb: there appears to be a few errors that can only be triggered by some very obscure ways, and some, nobody could reproduce to date
[12:58:44] <eddyb> polymorphic
[12:58:50] <nagisa> (at least publicly)
[12:59:02] <eddyb> nagisa: it looks like an ICE to me
[12:59:06] <eddyb> should be a span_bug
[12:59:24] <imperio> I'll let you handle it then
[12:59:33] <nagisa> it probably wasn’t ICE'y when the code was written
[12:59:41] <eddyb> nagisa: doubtful
[12:59:45] <eddyb> the code is new
[12:59:49] <nagisa> oh
[12:59:57] <eddyb> (because it looks different from a couple weeks ago :P)
[13:00:07] <eddyb> or whenever I last looked at it
[13:00:20] <eddyb> it wasn't like that when I worked on -> impl Trait
[13:02:12] <eddyb> playbot: trait Foo: i32 {}
[13:02:13] -playbot- <anon>:9:20: 9:23 error: `i32` is not a trait
[13:02:13] -playbot- <anon>:9         trait Foo: i32 {}
[13:02:13] -playbot- output truncated; full output at: http://bit.ly/1CpbuDI
[13:02:39] <eddyb> playbot: fn foo<T: i32>() {}
[13:02:39] -playbot- <anon>:9:19: 9:22 error: `i32` is not a trait
[13:02:40] -playbot- <anon>:9         fn foo<T: i32>() {}
[13:02:40] -playbot- output truncated; full output at: http://bit.ly/1JTUAwU
[13:02:46] <eddyb> playbot: fn foo<T>() where T: i32 {}
[13:02:46] -playbot- <anon>:9:30: 9:33 error: `i32` is not a trait
[13:02:47] -playbot- <anon>:9         fn foo<T>() where T: i32 {}
[13:02:47] -playbot- output truncated; full output at: http://bit.ly/1Cpbvrm
[13:02:54] <eddyb> that's all the poly cases
[13:03:53] <eddyb> playbot: impl i32 for .. {}
[13:03:54] -playbot- <anon>:9:9: 9:27 error: default trait implementations are experimental and possibly buggy
[13:03:54] -playbot- <anon>:9         impl i32 for .. {}
[13:03:54] -playbot- output truncated; full output at: http://bit.ly/1JTUEN1
[13:04:21] <eddyb> playbot-mini: #![feature(optin_builtin_traits)] impl i32 for .. {} fn main() {}
[13:04:22] -playbot-mini- <anon>:1:40: 1:43 error: `i32` is not a trait
[13:04:22] -playbot-mini- <anon>:1 #![feature(optin_builtin_traits)] impl i32 for .. {} fn main() {}
[13:04:22] -playbot-mini- output truncated; full output at: http://bit.ly/1CpbCTK
[13:05:09] <eddyb> imperio: there's no way to trigger that error
[13:05:15] <eddyb> that function should be:
[13:05:36] <eddyb> lookup_full_def(this.tcx(), trait_ref.path.span, trait_ref.ref_id).def_id()
[13:06:27] <eddyb> imperio: rustc_resolve should have error codes, but right now it uses strings for too many things
[13:06:52] <imperio> ok
[13:07:01] <imperio> well, it's not the first time
[13:07:55] <imperio> want me to add the missing error code ?
[13:08:41] <eddyb> https://github.com/rust-lang/rust/blob/master/src/librustc_resolve/lib.rs#L2022
[13:08:43] *** Joins: ChrisMorgan (ChrisMorgan@moz-g6osuq.tpgi.com.au)
[13:08:57] <eddyb> imperio: it's via resolve_error, that's what makes it hard
[13:09:15] <eddyb> imperio: this mess https://github.com/rust-lang/rust/blob/master/src/librustc_resolve/lib.rs#L3076-L3089
[13:09:18] <imperio> erf
[13:09:23] <eddyb> imperio: hmm, you should make a macro
[13:09:27] <imperio> I totally let you handle it =D
[13:09:41] <eddyb> why?
[13:10:03] <imperio> I'll have a lot of questions but I can't do it until this evening (after work)
[13:10:11] <imperio> if you're not in a hurry, then fine
[13:10:26] <eddyb> I personally do not care about fixing these things
[13:10:49] <imperio> perfect, then I'll come back this evening on it
[13:11:03] <eddyb> last week I wanted to remove some annoying uses of indices instead of IDs in MethodOrigin, I thought it would take a couple hours
[13:11:08] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[13:11:31] <imperio> haha
[13:11:54] <imperio> I did something similar a few months ago, I wanted to remove method from InternString
[13:11:57] <eddyb> a few days later, MethodOrigin was gone, a nasty memory safety issue was fixed and the unconditional_recursion lint could handle many more method calls
[13:12:39] *** Quits: ytain (ytain@moz-upqesl.dsl.teksavvy.com) (Quit: Textual IRC Client: www.textualapp.com)
[13:12:58] *** Joins: RC9 (RCIX@moz-7kb.dfa.8.198.IP)
[13:15:34] <eddyb> there's no such thing as a "small fix" in the compiler :(
[13:15:41] <imperio> nope ^^
[13:15:56] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[13:16:04] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[13:16:11] *** Quits: madmalik (uid13697@moz-lfin5p.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[13:16:19] *** Joins: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP)
[13:18:13] <eddyb> imperio: https://gist.github.com/eddyb/d75cc0bd66220bd05b38 btw
[13:18:31] <eddyb> you should be able to replace all resolve_error calls with uses of that macro and add error code
[13:18:34] <eddyb> *error codes
[13:18:48] <imperio> oh ok
[13:18:49] <imperio> thanks
[13:18:53] <imperio> I keep it
[13:19:18] <eddyb> there's like 38 of them so you have your work cut out for you :P
[13:19:35] <imperio> thanks a lot ! ^^
[13:19:54] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[13:20:14] <eddyb> imperio: oh, and, with a recent cleanup, these are no longer necessary https://github.com/rust-lang/rust/blob/master/src/librustc_resolve/lib.rs#L1934
[13:20:26] <eddyb> imperio: ast::Name and ast::Ident can be printed with {} directly
[13:20:37] *** Quits: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP) (Ping timeout: 121 seconds)
[13:20:39] <eddyb> (it might have even worked before the removal of UserString and Repr)
[13:21:22] <imperio> a long night is coming !
[13:23:04] *** Joins: ytain (ytain@moz-upqesl.dsl.teksavvy.com)
[13:24:03] *** Quits: mgottschlag (quassel@moz-adsrtp.h71g.nb65.1398.2a00.IP) (Ping timeout: 121 seconds)
[13:24:45] *** Joins: mgottschlag (quassel@moz-adsrtp.h71g.nb65.1398.2a00.IP)
[13:33:30] <nagisa> sfackler: https://github.com/rust-lang/rust/issues/26840 is A-diagnostics, not A-lint, because negate_unsigned is not a lint.
[13:38:43] *** Quits: mgottschlag (quassel@moz-adsrtp.h71g.nb65.1398.2a00.IP) (Ping timeout: 121 seconds)
[13:47:36] *** Joins: Tobba (Tobba@moz-oecqnu.plus.com)
[13:50:09] *** Quits: squiddy (squiddy@moz-md4.pm3.19.178.IP) (A TLS packet with unexpected length was received.)
[13:50:44] *** Quits: stormpat (stormpat@moz-tc4abl.elisa-laajakaista.fi) (Quit: Textual IRC Client: www.textualapp.com)
[13:53:20] <nagisa> doener: re PartialEq, does it optimise out bound checks?
[13:53:39] <doener> nagisa: yes
[13:53:50] <nagisa> nice
[13:55:17] *** Joins: arielb1 (Mibbit@moz-miv0p8.tau.ac.il)
[14:01:18] <imperio> arielb1: r=you I guess
[14:01:34] <imperio> ^^
[14:01:40] <imperio> gh26879
[14:01:40] <[o__o]> Add E0191, E0220 and E0232 error explanation: https://github.com/rust-lang/rust/pull/26879
[14:02:47] <arielb1> imperio: Please verify you used the right trait and didn't misspell the associated type name
[14:03:11] <imperio> oups, I forgot the 's'
[14:03:25] *** Joins: waffles (wafflespean@moz-mld.673.193.113.IP)
[14:03:26] <arielb1> also, *right*, not *good*
[14:03:34] <imperio> I did change it
[14:03:44] <imperio> or maybe it's another one
[14:03:45] <imperio> I check
[14:04:22] <imperio> "used the right trait" ?
[14:05:03] <imperio> ah I found it !
[14:05:51] <imperio> arielb1: ok, that *should* be good
[14:07:17] <arielb1> didn't misspelled -> didn't misspell
[14:07:28] <imperio> erf
[14:07:57] <imperio> and that's good
[14:08:00] <arielb1> error messages should have correct grammar
[14:08:09] <imperio> for rebase, I'll do it once I'm home
[14:08:40] <arielb1> I will r+ after a squash
[14:08:43] <imperio> you're totally right, it's just little english rules I don't master yet
[14:09:01] <imperio> yep, I'll squash once I'm home like I said ^^
[14:17:09] *** Joins: yjv (yjv@moz-ll38tk.pa.comcast.net)
[14:21:11] *** Quits: yjv (yjv@moz-ll38tk.pa.comcast.net) (Ping timeout: 121 seconds)
[14:21:23] *** Quits: aatch (james@moz-is4j4r.cable.telstraclear.net) (Ping timeout: 121 seconds)
[14:21:57] *** Quits: Feyn (aram@moz-5vj.68e.115.42.IP) (Quit: Leaving)
[14:24:59] *** Quits: ChrisMorgan (ChrisMorgan@moz-g6osuq.tpgi.com.au) (Ping timeout: 121 seconds)
[14:25:27] *** Quits: laumann (thomas@moz-3m6.3kq.109.2.IP) (Ping timeout: 121 seconds)
[14:25:55] *** Quits: arielb1 (Mibbit@moz-miv0p8.tau.ac.il) (Quit: http://www.mibbit.com ajax IRC Client)
[14:49:28] *** Joins: SilverKey (SilverKey@moz-liif3j.res.rr.com)
[14:57:10] *** Joins: Peach (Peach@moz-500.6lb.246.96.IP)
[15:01:17] *** Joins: CodingCat (Coding@moz-i3a5up.dynamic.ziggo.nl)
[15:02:23] *** Quits: wcosta (wander@moz-8st.m6e.98.179.IP) (Ping timeout: 121 seconds)
[15:02:31] *** Quits: imperio (Mibbit@moz-aibeqg.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[15:07:26] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[15:08:53] *** Joins: ChrisMorgan (ChrisMorgan@moz-g6osuq.tpgi.com.au)
[15:13:47] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[15:17:17] *** Joins: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP)
[15:20:28] *** Joins: wcosta (wander@moz-imk.ogj.95.177.IP)
[15:21:29] *** Quits: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP) (Ping timeout: 121 seconds)
[15:22:44] *** wcosta is now known as wcosta|lunch
[15:23:09] *** Joins: yjv (yjv@moz-j0cdis.fios.verizon.net)
[15:26:33] *** Joins: mgottschlag (quassel@moz-adsrtp.h71g.nb65.1398.2a00.IP)
[15:29:35] *** Quits: mgottschlag (quassel@moz-adsrtp.h71g.nb65.1398.2a00.IP) (Connection closed)
[15:36:08] *** Joins: mgottschlag (quassel@moz-j2hash.qiv1.bbcb.1398.2a00.IP)
[15:38:16] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[15:39:12] *** wcosta|lunch is now known as wcosta
[15:44:39] *** Quits: mgottschlag (quassel@moz-j2hash.qiv1.bbcb.1398.2a00.IP) (Ping timeout: 121 seconds)
[15:51:44] <eddyb> nmatsakis: folding does not copy AST nodes
[15:51:58] <nmatsakis> eddyb: it reuses the memory in place, iirc
[15:52:04] <nmatsakis> it still iterates over the whole tree
[15:52:12] <eddyb> yeah, that's where the cost comes from
[15:52:19] <nmatsakis> I don't recall the memory alloc etc being very expensive
[15:52:24] <nmatsakis> (perhaps I am incorrect)
[15:52:25] <eddyb> folding to assign nodes is not much slower than visiting the whole tree
[15:52:35] <eddyb> *to assign node IDs
[15:52:43] <eddyb> nmatsakis: but visiting still takes too long
[15:52:52] <nmatsakis> I guess what I meant is that I do not think that it will cost a lot more to do one final copy than it does to iterate 
[15:53:01] <eddyb> all the pointer-chasing adds up to 40ms - or used to, anyways - for librustc
[15:53:11] <nmatsakis> that's so far off my radar of "too long" :)
[15:53:14] <nmatsakis> however --
[15:53:21] <nmatsakis> we should also (ideally) eb able to do this on a pipelined basis
[15:53:27] <eddyb> nmatsakis: if it's done with an arena, yes, the cost should be negligible
[15:53:31] <nmatsakis> I'd like to be pipelining one function all the way from parse to LLVM
[15:53:41] <nmatsakis> (once we build up a bit of meta structure)
[15:53:54] <nmatsakis> (long term)
[15:54:04] <eddyb> as the ADTs get simpler, that will be possible
[15:54:21] <nmatsakis> yes, I think it's eminently possible
[15:54:29] <eddyb> I also hope we can improve our arena usage
[15:55:05] *** Joins: munksgaard (munksgaard@moz-gqpfnm.science.ku.dk)
[15:55:28] <eddyb> multi-type but restricted to no destructors, recycling them when transforming between various stages
[15:56:05] <eddyb> eventually all the cost will be in reading and writing sequential memory
[15:56:18] <eddyb> (just like in the old days!)
[15:56:41] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[15:56:45] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[15:57:16] *** Quits: Tobba (Tobba@moz-oecqnu.plus.com) (Ping timeout: 121 seconds)
[16:00:05] *** chmanchester|afk is now known as chmanchester
[16:03:06] *** Joins: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP)
[16:05:16] *** Joins: yjv_ (yjv@moz-ll38tk.pa.comcast.net)
[16:06:34] *** Joins: imperio (Mibbit@moz-8otf3a.fbx.proxad.net)
[16:09:27] *** Quits: yjv_ (yjv@moz-ll38tk.pa.comcast.net) (Ping timeout: 121 seconds)
[16:10:03] *** Quits: KokaKiwi (kokakiwi@moz-cagds5.kokakiwi.net) (Connection closed)
[16:11:36] *** Joins: KokaKiwi (kokakiwi@moz-cagds5.kokakiwi.net)
[16:13:05] *** Joins: mgottschlag (quassel@moz-rnr9o0.hsi7.kabel-badenwuerttemberg.de)
[16:22:49] <imperio> eddyb: what's the best place to put the macro in ?
[16:22:54] <imperio> (the one you wrote)
[16:24:54] *** Joins: dcb (dcb@moz-j72nfe.ca.comcast.net)
[16:25:29] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[16:25:29] *** ChanServ sets mode: +ao erickt erickt
[16:26:50] *** Joins: Jesin (Jesin@moz-sak2gd.cc.lehigh.edu)
[16:29:26] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[16:30:00] <bluss> nmatsakis: in your IndexAssign comment, I think you mean &K and not &mut K
[16:32:41] <eddyb> imperio: at the start of librustc_resolve/lib.rs
[16:33:14] *** Quits: Murarth (Murarth@moz-jpotpi.phnx.qwest.net) (Quit: brb, washing the cat)
[16:33:32] *** Quits: rovar (rovar@moz-6iq.47m.88.38.IP) (Connection closed)
[16:33:39] *** Joins: Murarth (Murarth@moz-8seq0r.dyn.nltelcom.net)
[16:33:52] <nmatsakis> bluss: true
[16:35:49] *** Parts: ville (ville@moz-e3vb7v.elisa-laajakaista.fi) ()
[16:37:50] <imperio> eddyb: thanks
[16:37:53] <imperio> compiling...
[16:45:43] *** Quits: mgottschlag (quassel@moz-rnr9o0.hsi7.kabel-badenwuerttemberg.de) (Connection closed)
[16:52:35] *** Joins: mgottschlag (quassel@moz-rnr9o0.hsi7.kabel-badenwuerttemberg.de)
[16:53:30] *** Joins: martin (martin@moz-bmp33l.u0v6.gff7.1608.2001.IP)
[16:55:33] *** Joins: mitaa (mitaa@moz-ntg6h1.dyn.drei.com)
[16:58:49] *** Quits: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP) (Connection closed)
[16:59:40] <sfackler> nagisa: fixed, thanks
[17:03:02] *** Joins: O01eg (o01eg@moz-irrs04.da6l.3egh.2698.2a02.IP)
[17:05:30] *** Joins: Tobba (Tobba@moz-4l45on.skybroadband.com)
[17:11:52] *** Joins: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP)
[17:12:21] *** Quits: Jesin (Jesin@moz-sak2gd.cc.lehigh.edu) (Quit: Leaving)
[17:17:00] *** Joins: Jesin (Jesin@moz-sak2gd.cc.lehigh.edu)
[17:17:21] *** Joins: eljay (eljay@moz-fmte10.skybroadband.com)
[17:20:11] *** Quits: waffles (wafflespean@moz-mld.673.193.113.IP) (Ping timeout: 121 seconds)
[17:29:01] *** Joins: Puddles (Mibbit@moz-hu6.nja.252.72.IP)
[17:29:40] *** Quits: Puddles (Mibbit@moz-hu6.nja.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:35:45] *** Quits: vmx (vmx@moz-m5fneh.pools.vodafone-ip.de) (Quit: Leaving)
[17:36:14] *** Joins: Quxxy_ (chatzilla@moz-0nv.jkp.167.59.IP)
[17:37:15] *** Quits: Quxxy (chatzilla@moz-0nv.jkp.167.59.IP) (Ping timeout: 121 seconds)
[17:37:18] *** Quxxy_ is now known as Quxxy
[17:37:49] *** Joins: aepsil0n (eduard@moz-s0kqa7.hsi8.kabel-badenwuerttemberg.de)
[17:41:01] *** Quits: mgottschlag (quassel@moz-rnr9o0.hsi7.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[17:42:37] *** Joins: waffles (wafflespean@moz-rio.948.23.1.IP)
[17:44:43] *** Joins: untitaker_ (untitaker@moz-c28u7b.highway.telekom.at)
[17:44:50] *** Quits: untitaker (untitaker@moz-1vcv90.highway.telekom.at) (Ping timeout: 121 seconds)
[17:45:58] *** Joins: listochkin (listochkin@moz-u28j0j.interview.volia.net)
[17:46:19] *** Joins: mgottschlag (quassel@moz-rnr9o0.hsi7.kabel-badenwuerttemberg.de)
[17:46:46] *** Quits: waffles (wafflespean@moz-rio.948.23.1.IP) (Quit: C'yall soon...)
[17:47:15] *** Quits: Quxxy (chatzilla@moz-0nv.jkp.167.59.IP) (Ping timeout: 121 seconds)
[17:47:38] *** Quits: SilverKey (SilverKey@moz-liif3j.res.rr.com) (Quit: ZZZzzz…)
[17:50:06] *** Joins: Quxxy (chatzilla@moz-efh10q.internode.on.net)
[17:51:14] *** Joins: filsmick (filsmick@moz-gf7g4q.abo.wanadoo.fr)
[17:53:02] *** Quits: ytain (ytain@moz-upqesl.dsl.teksavvy.com) (Quit: Textual IRC Client: www.textualapp.com)
[17:53:46] *** Joins: yjv_ (yjv@moz-ll38tk.pa.comcast.net)
[17:55:19] *** Quits: mgottschlag (quassel@moz-rnr9o0.hsi7.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[17:55:48] *** Joins: pcwalton (pcwalton@moz-ott154.sntcca.sbcglobal.net)
[17:55:48] *** ChanServ sets mode: +o pcwalton
[17:56:14] *** Quits: Quxxy (chatzilla@moz-efh10q.internode.on.net) (Ping timeout: 121 seconds)
[17:56:58] *** Quits: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP) (Connection closed)
[17:57:55] *** Quits: yjv_ (yjv@moz-ll38tk.pa.comcast.net) (Ping timeout: 121 seconds)
[18:00:44] *** Quits: Tobba (Tobba@moz-4l45on.skybroadband.com) (A TLS packet with unexpected length was received.)
[18:04:55] *** Joins: mgottschlag (quassel@moz-rnr9o0.hsi7.kabel-badenwuerttemberg.de)
[18:08:12] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[18:11:33] *** Joins: avikpal (avikpal@moz-2v3.meh.194.117.IP)
[18:11:56] *** Quits: mgottschlag (quassel@moz-rnr9o0.hsi7.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[18:13:20] *** Quits: pcwalton (pcwalton@moz-ott154.sntcca.sbcglobal.net) (Ping timeout: 121 seconds)
[18:13:34] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[18:18:38] *** Joins: pcwalton (pcwalton@moz-nh2.o1i.216.216.IP)
[18:18:38] *** ChanServ sets mode: +o pcwalton
[18:19:11] <imperio> eddyb: I'm wondering : I replace all occurrences of token::get_name() ? Even outside use of fmt::Display/Debug ?
[18:20:51] <acrichto> nrc: ping
[18:21:10] *** Quits: imperio (Mibbit@moz-8otf3a.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[18:21:29] *** Joins: imperio (Mibbit@moz-8otf3a.fbx.proxad.net)
[18:25:15] *** Joins: arielb1 (Ariel@moz-9htsn1.red.bezeqint.net)
[18:25:54] *** Quits: jdm (jdm@moz-ilbt2e.cable.teksavvy.com) (Connection closed)
[18:25:59] *** Joins: jdm_ (jdm@moz-ilbt2e.cable.teksavvy.com)
[18:30:53] <imperio> arielb1: I squahed my PR
[18:31:12] <imperio> I think it's ready for r+ (unless you see something less to fix/update of course)
[18:31:30] *** Joins: mgottschlag (quassel@moz-rnr9o0.hsi7.kabel-badenwuerttemberg.de)
[18:31:30] <imperio> gh26879
[18:31:30] <[o__o]> Add E0191, E0220 and E0232 error explanation: https://github.com/rust-lang/rust/pull/26879
[18:34:12] *** Joins: swgillespie (swgillespie@moz-767.3un.220.167.IP)
[18:34:45] *** Quits: jdm_ (jdm@moz-ilbt2e.cable.teksavvy.com) (Connection closed)
[18:35:11] *** Joins: jdm (jdm@moz-ilbt2e.cable.teksavvy.com)
[18:41:33] *** Quits: pcwalton (pcwalton@moz-nh2.o1i.216.216.IP) (Client exited)
[18:43:48] *** Quits: filsmick (filsmick@moz-gf7g4q.abo.wanadoo.fr) (Quit: )
[18:44:47] *** Joins: nham (nham@moz-lglsfe.il.comcast.net)
[18:47:46] *** Quits: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP) (Connection closed)
[18:48:46] <eddyb> imperio: not sure, what cases do you have in mind?
[18:52:04] <bluss> jroesch: the default type parameter fallback is great!
[18:52:45] <jroesch> bluss: :) I just need to get the type alias thing fixed I thought I had it last night 
[18:54:40] <bluss> jroesch: is that the IntMap<K=usize> in the tests?
[18:54:51] <jroesch> yeah currently it doesn't work
[18:54:55] <bluss> ana
[18:54:56] <bluss> aha
[18:55:04] *** Joins: rovar (rovar@moz-6iq.47m.88.38.IP)
[18:55:26] <jroesch> everything else is handled during inference but the type aliases have been expanded by the time they hit my code
[18:55:48] <eddyb> jroesch: I beg to differ :P
[18:55:54] <bluss> this here: “Imagine fn graphemes<Kind: GraphemeKind = Extended>(&self) and then you can call it as .graphemes::<Legacy>() or just .graphemes() to get the default.”
[18:55:59] <eddyb> typeck::check triggers both
[18:56:01] <bluss> I'm going to abuse this ^
[18:56:19] <eddyb> jroesch: but it calls through to astconv for types, and handles other paths itself
[18:56:30] <eddyb> just need to get astconv to do the right thing and you're set
[18:56:40] <eddyb> unless astconv loses information
[18:56:56] <jroesch> eddyb: I'm trying to figure out where that happens
[18:57:05] <jroesch> I saw a place in astconv where tyvars are being created
[18:57:05] <eddyb> jroesch: oh, that should be easy
[18:57:14] <jroesch> and put a patch in
[18:57:19] <jroesch> didn't trip
[18:57:39] <eddyb> https://github.com/rust-lang/rust/blob/master/src/librustc_typeck/astconv.rs#L112-L113
[18:57:44] <eddyb> so that's where it should go through
[18:58:00] <jroesch> right I patched that
[18:58:01] <eddyb> https://github.com/rust-lang/rust/blob/master/src/librustc_typeck/astconv.rs#L405
[18:58:11] <eddyb> jroesch: what do you mean by "that"?
[18:58:26] <eddyb> FnCtxt's implementation of AstConv?
[18:58:40] <jroesch> I added to ty_infer yesterday
[18:58:55] <jroesch> The second piece you just linked seems strange because of https://github.com/rust-lang/rust/blob/master/src/librustc_typeck/astconv.rs#L459
[18:59:08] <jroesch> that is the chunk of code I patched yesterday
[18:59:33] <eddyb> "actual_supplied_ty_param_count"
[19:00:07] <eddyb> that loop is when the default is explicitely used
[19:00:13] <eddyb> e.g. HashMap<K, V>
[19:00:33] <eddyb> could be in an expr path, HashMap::<K, V>::new()
[19:01:03] <eddyb> that gets the default and only the default for its third type parameter (the hasher), can't infer that hasher to something else
[19:01:11] <eddyb> jroesch: you shouldn't patch that loop
[19:01:49] <eddyb> ty_infer should take an optional reference to a definition
[19:01:50] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[19:02:10] <eddyb> with line 405 being the only place passing something
[19:02:22] <jroesch> ah
[19:02:23] <eddyb> jroesch: you even have ty_param_defs right there to use
[19:02:28] <jroesch> I think
[19:02:29] *** Quits: avikpal (avikpal@moz-2v3.meh.194.117.IP) (Ping timeout: 121 seconds)
[19:02:35] *** Quits: swgillespie (swgillespie@moz-767.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:02:35] <jroesch> I confused required_type_params
[19:02:48] <eddyb> yeah, the wording is odd. it used to be worse!
[19:02:49] <jroesch> and formal_ty_param_count
[19:03:05] <jroesch> I read the code as only filling in non-defaults
[19:03:14] <jroesch> but we unconditionally fill in type variables 
[19:03:16] <imperio> eddyb: actually I modified the wrong code sources
[19:03:28] <imperio> and I didn't understand why it worked
[19:03:34] <imperio> so nevermind =D
[19:05:50] *** Quits: mgottschlag (quassel@moz-rnr9o0.hsi7.kabel-badenwuerttemberg.de) (Connection closed)
[19:06:48] <jroesch> eddyb: is it worth providing a different variant of type_infer that deals with defaults? since the behavior is only needed here
[19:10:04] *** Joins: imperio_ (Mibbit@moz-8otf3a.fbx.proxad.net)
[19:10:24] *** Quits: imperio (Mibbit@moz-8otf3a.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[19:10:40] *** chmanchester is now known as chmanchester|afk
[19:11:22] *** Joins: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP)
[19:12:51] *** Joins: swgillespie (swgillespie@moz-767.3un.220.167.IP)
[19:14:48] *** Joins: eibwen (eibwen@moz-ocjg10.dip0.t-ipconnect.de)
[19:14:51] <nrc> acrichto: pong
[19:17:10] *** Joins: ytain (ytain@moz-upqesl.dsl.teksavvy.com)
[19:22:04] *** Joins: avikpal (avikpal@moz-2v3.meh.194.117.IP)
[19:23:05] *** imperio_ is now known as imperio
[19:28:26] *** Joins: yjv_ (yjv@moz-ll38tk.pa.comcast.net)
[19:28:51] *** Joins: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com)
[19:29:25] *** Quits: aepsil0n (eduard@moz-s0kqa7.hsi8.kabel-badenwuerttemberg.de) (Quit: Leaving.)
[19:31:11] <eddyb> jroesch: don't think so, no
[19:31:21] *** Quits: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP) (Connection closed)
[19:32:51] <nrc> unpong - popping out
[19:33:35] *** Quits: arielb1 (Ariel@moz-9htsn1.red.bezeqint.net) (Quit: Ex-Chat)
[19:35:25] *** Quits: swgillespie (swgillespie@moz-767.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:36:48] *** Joins: filsmick (filsmick@moz-gf7g4q.abo.wanadoo.fr)
[19:36:54] *** Quits: filsmick (filsmick@moz-gf7g4q.abo.wanadoo.fr) (Connection closed)
[19:37:39] *** Joins: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP)
[19:38:38] *** Quits: avikpal (avikpal@moz-2v3.meh.194.117.IP) (Connection closed)
[19:39:22] *** Joins: dlight (dlight@moz-lpamsj.gvt.net.br)
[19:49:59] *** Quits: munksgaard (munksgaard@moz-gqpfnm.science.ku.dk) (Ping timeout: 121 seconds)
[19:49:59] *** chmanchester|afk is now known as chmanchester
[19:53:16] *** Quits: zmack (zmack@moz-376.4m7.123.86.IP) (Connection closed)
[19:56:16] *** Joins: genbattle (genbattle@moz-4v0.gkd.16.182.IP)
[19:56:42] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[19:56:43] *** ChanServ sets mode: +o pcwalton
[19:57:13] *** Joins: filsmick (filsmick@moz-gf7g4q.abo.wanadoo.fr)
[19:57:14] *** Quits: filsmick (filsmick@moz-gf7g4q.abo.wanadoo.fr) (Connection closed)
[19:58:24] *** Joins: filsmick (filsmick@moz-gf7g4q.abo.wanadoo.fr)
[20:00:51] <Gankro> wycats: re poisoning, I'd be interested on your feedback on http://cglab.ca/~abeinges/blah/turpl/_book/unwinding.html
[20:01:09] <wycats> Gankro: cool
[20:01:16] <wycats> Gankro: will review
[20:01:26] <wycats> "If something goes wrong and cannot reasonably be handled, the thread panics"
[20:01:34] <wycats> I think this isn't quite enough
[20:03:35] *** Quits: semarie (semarie@moz-4tpt8u.bpv6.bg1u.41d0.2001.IP) (Ping timeout: 121 seconds)
[20:08:53] *** Quits: CodingCat (Coding@moz-i3a5up.dynamic.ziggo.nl) (Ping timeout: 121 seconds)
[20:09:05] *** Quits: amyers (amyers@moz-qn874b.zip.zayo.com) (Ping timeout: 121 seconds)
[20:10:23] *** Joins: mgottschlag (quassel@moz-c3ivja.hsi14.kabel-badenwuerttemberg.de)
[20:14:20] <nrc> acrichto: re-pong back
[20:17:30] *** Joins: swgillespie (swgillespie@moz-767.3un.220.167.IP)
[20:18:20] *** Quits: swgillespie (swgillespie@moz-767.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:23:07] *** Joins: arielb1 (Ariel@moz-9htsn1.red.bezeqint.net)
[20:25:05] <dlight> Gankro, you say "Most unsafe code is leaf-like, and therefore fairly easy to make exception-safe. It controls all the code that runs, and most of that code can't panic."
[20:25:23] <Gankro> dlight: yes
[20:25:32] <dlight> Gankro, but earlier you said "However, anything and everything can panic, and you need to be ready for this"
[20:25:46] <Gankro> dlight: Yes I need to clarify that one
[20:25:50] <dlight> and indeed there's a lot of pervasive causes of panics like OOM 
[20:25:57] <Gankro> OOM doesn't panic
[20:26:10] <Gankro> it aborts
[20:26:18] <dlight> nice
[20:26:41] <Gankro> (because it's basically impossible on modern platforms)
[20:26:52] <dlight> so can a piece of extremely simple unsafe code actually guarantee that it doesn't panic?
[20:26:59] <Gankro> Yes
[20:27:11] <Gankro> Very little unsafe code panics
[20:27:32] <Gankro> nothing in ptr, nothing in liballoc
[20:27:38] *** Joins: CodingCat (Coding@moz-i3a5up.dynamic.ziggo.nl)
[20:27:45] <Gankro> nothing in mem, I think...?
[20:28:10] <Gankro> panic is a more... high-level behaviour
[20:28:16] <Gankro> casts are unchecked
[20:28:29] <Gankro> derefs can't fail
[20:28:36] <dlight> casts are unchecked even in safe code?
[20:28:40] <Gankro> Yes
[20:29:07] <Gankro> http://cglab.ca/~abeinges/blah/turpl/_book/casts.html
[20:30:41] <arielb1> dlight: integer overflow panics
[20:30:47] <arielb1> but that is a refinement of C's UB
[20:30:52] <Gankro> (in debug)
[20:31:13] <Gankro> (and only for arithmetic ops)
[20:31:24] <Gankro> 10000u16 as u8 doesn't panic
[20:31:28] <arielb1> Gankro: is there integer overflow for non-arithmetic ops?
[20:31:35] <arielb1> 10000u16 as u8 is a projection
[20:31:53] *** Joins: amyers (amyers@moz-osiar4.md.comcast.net)
[20:31:56] <Gankro> arielb1: there were people in the RFC that argued it's a kind of overflow
[20:32:04] <dlight> ... hey, is there a possibility for a future version of Rust extend casts to be able to cast between MyType<A> and MyType<B> for enum variants that don't actually contain any A or B?
[20:32:16] <dlight> I mean, because of this https://www.reddit.com/r/rust/comments/3bkmuh/mapping_generic_enums_without_doing_an_exhaustive/
[20:33:04] <arielb1> dlight: for enum variants?
[20:33:12] <arielb1> enum variants aren't types
[20:33:28] *** Joins: Rym (uid91135@moz-n2i7qm.charlton.irccloud.com)
[20:33:28] <nrc> steveklabnik: ping
[20:33:35] <steveklabnik> pong
[20:34:02] <nrc> steveklabnik: we have a lot of ICEs, do you have a sense of which are high priority? I'm finding it hard to choose which to fix
[20:34:41] <steveklabnik> we do have a lot of ICEs, for sure. i don't have a great sense, but I would think about it two ways:
[20:34:58] <arielb1> nrc: pnkfelix should fix his
[20:35:06] <arielb1> I mean, dropck
[20:35:56] <arielb1> I have a relatively-done WF branch, will finish it after next week's exams
[20:36:08] <bluss> doener: nice PartialEq patch. Where did does it sit compared to the other ways to zip loops? I guess it can't quite match the unchecked counted loop?
[20:36:15] <arielb1> that covers 30% of them
[20:36:21] <arielb1> another 20% are already fixed
[20:36:25] <steveklabnik> https://github.com/rust-lang/rust/issues?q=is%3Aopen+is%3Aissue+label%3AI-ICE+sort%3Acreated-asc : oldest ones first 
[20:36:34] <steveklabnik> https://github.com/rust-lang/rust/issues?q=is%3Aopen+is%3Aissue+label%3AI-ICE+sort%3Acomments-desc most ocmmented first
[20:36:35] <arielb1> another 10% are unreproducible
[20:36:54] <steveklabnik> arielb1: are there open ICEs that aren't? we should close them
[20:37:06] <arielb1> steveklabnik: metadata etc.
[20:37:20] <arielb1> or with no reproducer source
[20:37:40] *** Quits: amyers (amyers@moz-osiar4.md.comcast.net) (Ping timeout: 121 seconds)
[20:37:51] <arielb1> another 15% are with orphan features (slice_patterns, asm, macros)
[20:38:06] <steveklabnik> well, asm and macros aren't orphan features really
[20:38:07] <arielb1> another 10% are associated_consts
[20:38:29] <steveklabnik> though i get what you're saying
[20:38:46] *** Quits: rustbot (havvy@moz-tb54ql.airspeedinternet.net) (Ping timeout: 121 seconds)
[20:39:03] <arielb1> of course if someone would go and take care of macros that would be nice
[20:39:07] <steveklabnik> people do look at https://github.com/rust-lang/rust/labels/I-ICE 203 open and complain though, so we should figure out what to do. 
[20:39:53] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[20:40:20] *** Quits: Havvy (Havvy@moz-tb54ql.airspeedinternet.net) (Ping timeout: 121 seconds)
[20:40:20] <arielb1> there are also a bunch of "OS API" ICE-s
[20:41:12] * nrc picks one for today
[20:41:31] <arielb1> I guess we need A-slice-patterns and A-associated-consts to mark these cleanly
[20:42:33] <arielb1> raw pointer comparison is awaiting RFC
[20:42:33] *** Joins: Havvy (Havvy@moz-tb54ql.airspeedinternet.net)
[20:42:42] <arielb1> that's 2 issues actually
[20:43:44] *** Quits: blank_name (blank_name@moz-onojo8.mi.frontiernet.net) (Ping timeout: 121 seconds)
[20:44:33] <dlight> arielb1, I mean, if a : MyType<A>, I would like to be able to write this cast: a as MyType<B>
[20:44:43] <dlight> A problem is that if MyType is an enum, the cast might make sense only for some variants
[20:44:46] <arielb1> dlight: that would require GADT-s or something
[20:44:54] <arielb1> or datatype refinements
[20:44:56] *** Joins: swgillespie (swgillespie@moz-767.3un.220.167.IP)
[20:44:59] <arielb1> or some other fat typesystem feature
[20:45:08] <arielb1> + bivariance
[20:45:18] <arielb1> we don't support bivariance
[20:45:56] <steveklabnik> nrc: i bet https://github.com/rust-lang/rust/issues/14505 would be pretty easy, and it's kind of sill
[20:45:59] <steveklabnik> y
[20:46:44] <arielb1> I think gh20318 would be nice
[20:46:44] <[o__o]> "can't monomorphize ..." ICE with use of generic intrinsic as a value: https://github.com/rust-lang/rust/issues/20318
[20:47:12] <arielb1> it has a few dupes
[20:47:16] <arielb1> even
[20:49:01] *** Joins: erickt (erickt@moz-l8ebtf.sfo1.mozilla.com)
[20:49:01] *** ChanServ sets mode: +ao erickt erickt
[20:49:18] <arielb1> nrc: anyway, what should be done to "lang-item abuse" ICEs?
[20:50:14] <nrc> got an example to hand?
[20:50:54] <arielb1> gh20549
[20:50:54] <[o__o]> no_std: Using boxed type without specifying owned_box crashes rustc: https://github.com/rust-lang/rust/issues/20549
[20:51:03] <arielb1> that's a simple one
[20:51:13] <arielb1> there are more IIRC
[20:52:36] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[20:52:58] *** Quits: jdm (jdm@moz-ilbt2e.cable.teksavvy.com) (Quit: )
[20:53:39] <arielb1> nrc: if you want to reduce our ICE count by a lot, just fix spans in macros
[20:53:40] *** Joins: zmack (zmack@moz-376.4m7.123.86.IP)
[20:54:42] *** Quits: Sho (sho@moz-q2q.p8p.28.5.IP) (Quit: Konversation terminated!)
[20:54:58] <arielb1> lang-item-abuse: https://github.com/rust-lang/rust/issues/20875
[20:55:01] <nrc> We should just change those to more politely exit
[20:55:21] <nrc> arielb1: "just"?!
[20:55:45] <arielb1> nrc: the latter one
[20:55:51] <arielb1> seems sinful to me
[20:56:08] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[20:56:15] <nagisa> matching on slices is pretty commonly reported source of ICEs
[20:56:19] <nagisa> at least lately
[20:56:23] <arielb1> maybe forbid all lang-items without the feature-gate quicker
[20:56:25] *** Joins: SilverKey (SilverKey@moz-liif3j.res.rr.com)
[20:56:28] <arielb1> nagisa: slice_patterns
[20:56:31] <arielb1> *terribly* buggy
[20:56:36] <arielb1> behind a feature gate
[20:56:42] <nagisa> oh right
[20:56:56] *** Joins: p1start (p1start@moz-nftjhe.org)
[20:57:10] <bluss> arielb1: yeah it's at the point that we need to think about maybe disabling it. Depends on how much memory unsafety holes we tolerate behind feature gates
[20:57:14] <nagisa> (this is what happens when compiler simply says, “add #![feature(x)] to the top of file Y to make this and that work”")
[20:57:28] <arielb1> nagisa: its worse
[20:57:34] <arielb1> you hit the typeck ones even behind the feature gate
[20:57:39] <arielb1> even on stable
[20:57:42] *** Quits: zmack (zmack@moz-376.4m7.123.86.IP) (Ping timeout: 121 seconds)
[20:58:11] <arielb1> bluss: we can't really protect lang_items
[20:58:22] <arielb1> maybe just have a better warning on slice_patterns?
[20:58:35] <arielb1> have a Broken status?
[20:58:58] <arielb1> but maybe we should just put a stronger warning on dangerous features
[20:59:02] <arielb1> rather than merely unstable ones
[21:00:02] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[21:00:22] *** Quits: erickt (erickt@moz-l8ebtf.sfo1.mozilla.com) (Ping timeout: 121 seconds)
[21:01:03] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[21:03:28] *** Joins: erickt (erickt@moz-l8ebtf.sfo1.mozilla.com)
[21:03:28] *** ChanServ sets mode: +ao erickt erickt
[21:03:40] *** Quits: filsmick (filsmick@moz-gf7g4q.abo.wanadoo.fr) (Quit: )
[21:04:30] <Gankro> nmatsakis: How do you feel about renaming Unique to Owned, and have type like Rc use something called MaybeOwned?
[21:05:08] <nmatsakis> Gankro: +1 to rename Unique to Owned, less certain about MaybeOwned ... PartiallyOwned? SharedOwned?
[21:05:52] <nagisa> is type information (i.e. inferred types) available in lints?
[21:06:22] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[21:06:45] <jroesch> Gankro: Owned? (I've heard people love typing question marks) ;)
[21:06:57] <Gankro> jroesch: booooo
[21:07:03] <Gankro> nmatsakis: positive on the general idea?
[21:07:16] <nmatsakis> Gankro: yes
[21:07:32] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[21:07:44] <jroesch> joking aside, it sounds good 
[21:07:50] <acrichto> nrc: now I'm back!
[21:08:00] <acrichto> nrc: so one of the tests failed on that PR for tweaking codegen units
[21:08:03] <acrichto> only on OSX
[21:08:16] <acrichto> and it looks like if you dlopen a rust dylib with another rust program, it then segfaults when you call free later on
[21:08:25] *** Joins: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk)
[21:08:40] <acrichto> nrc: and I believe that this is related to having two jemallocs in the world, but I unfortunately haven't confirmed this to the degree that I'm 100% confident that's the problem just yet
[21:08:46] <acrichto> I'm curious what your thoughts are on disabling that test on OSX?
[21:08:50] <imperio> eddyb: ping
[21:09:18] <acrichto> nrc: the problem is that rust dylibs now include more than they did before (due to --whole-archive), I'm just not sure *what*'s being included that's causing the failure
[21:10:04] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[21:14:49] *** Quits: erickt (erickt@moz-l8ebtf.sfo1.mozilla.com) (Ping timeout: 121 seconds)
[21:16:04] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[21:16:04] *** ChanServ sets mode: +o pcwalton
[21:16:51] <nagisa> arielb1: I disagree https://github.com/rust-lang/rust/issues/22566 is a dupe
[21:16:57] <arielb1> why?
[21:17:30] <nagisa> panic message is different
[21:17:36] *** Joins: brson2 (Mibbit@moz-u3dg2t.sfo1.mozilla.com)
[21:17:42] <nagisa> one complains about tuple, and this complains about unimplemented
[21:17:46] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[21:18:35] *** Joins: ebfull (ebfull@moz-8vb.66e.34.73.IP)
[21:19:59] <arielb1> nagisa: looking at the code, does seem like separate-but-related
[21:22:18] *** Quits: brson2 (Mibbit@moz-u3dg2t.sfo1.mozilla.com) (Quit: http://www.mibbit.com ajax IRC Client)
[21:22:39] *** Joins: brson2 (Mibbit@moz-u3dg2t.sfo1.mozilla.com)
[21:24:42] *** Joins: erickt (erickt@moz-l8ebtf.sfo1.mozilla.com)
[21:24:42] *** ChanServ sets mode: +ao erickt erickt
[21:30:27] *** Quits: arielb1 (Ariel@moz-9htsn1.red.bezeqint.net) (Connection closed)
[21:33:54] *** Quits: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk) (Connection closed)
[21:33:59] *** Joins: jdm (jdm@moz-mu9.06r.98.75.IP)
[21:42:18] *** Quits: swgillespie (swgillespie@moz-767.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:58:10] *** Quits: brson2 (Mibbit@moz-u3dg2t.sfo1.mozilla.com) (Quit: http://www.mibbit.com ajax IRC Client)
[21:58:45] <huon> carter: hey, I'm interning working on SIMD, and I've just posted by first design document for feedback. This one is very low-level/Rust-specific, but you might have some feedback anyway. https://internals.rust-lang.org/t/pre-rfc-simd-groundwork/2343
[21:59:22] *** chmanchester is now known as chmanchester|afk
[22:03:14] *** Quits: ytain (ytain@moz-upqesl.dsl.teksavvy.com) (Quit: Textual IRC Client: www.textualapp.com)
[22:06:53] *** Quits: imperio (Mibbit@moz-8otf3a.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[22:08:50] <jroesch>  Gankro: do you want to feed me some default type parameter use cases that I can turn into tests? or at least tell me what kind of patterns you want
[22:10:11] <jroesch> would be good to improve my test coverage 
[22:10:39] *** Joins: X67r (user@moz-1rnldf.mullvad.net)
[22:12:19] <Skyler> jroesch: I don't know if this is entirely useful to what you're doing but I was working with this person yesterday https://github.com/rust-lang/rust/issues/24857#issuecomment-119178558
[22:12:49] <jroesch> more test cases, more better
[22:13:02] <nrc> acrichto: what causes the crash - the test inspecting the dylib or the compiler's usual processing of the dylib?
[22:16:10] <Gankro> jroesch: It sounds like one of the things I'm really interested in doesn't work in your patch? Namely `struct HashMap<K, V, H=DeterministicHasher>`; mod std{ pub type HashMap<K, V, H=RandomHasher> = core::HashMap<K, V, H>; }
[22:16:23] <jroesch> Gankro: I just patched type aliases
[22:16:31] <jroesch> eddyb: helped me sort it out
[22:18:07] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[22:19:17] <Gankro> jroesch: I don't think there's anything particularly exotic otherwise...?
[22:19:22] <jroesch> cool
[22:19:24] <jroesch> just wondering
[22:19:29] <jroesch> turning the above into another test case
[22:19:32] <Gankro> I just want to be able to add type params later back-compat
[22:20:10] <bluss> I've got some impl blocks for datastructures where I want to use default type params
[22:20:30] <acrichto> nrc: the test itself, when it dlopens the dylib and then closes it, the segfault happens on the dlclose
[22:20:36] <acrichto> nrc: the fault isn't anywhere in the compiler itself
[22:20:40] <Gankro> jroesch: Maybe check out https://github.com/contain-rs/compare or talk to apasel
[22:20:57] <nrc> acrichto: Ok, then I don't feel bad about disabling the test
[22:21:05] <acrichto> ok, I shall do so!
[22:22:36] <bluss> jroesch: like impl<N=(), E=()> for Graph<N, E> { fn new() -> Self { }  more methods.. }, but I guess this is the simple stuff?
[22:24:33] *** Quits: listochkin (listochkin@moz-u28j0j.interview.volia.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:25:23] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[22:26:08] <jroesch> Gankro: this works https://gist.github.com/jroesch/9d1f9c1e10d25546c2c9
[22:26:58] <jroesch> ugg
[22:27:01] <Gankro> jroesch: 👍
[22:27:04] *** Quits: eljay (eljay@moz-fmte10.skybroadband.com) (Quit: Leaving)
[22:27:13] <jroesch> that doesn't fail on nightly 
[22:27:18] <jroesch> I'm doing something that causes inference to work
[22:27:19] <jroesch> ...
[22:27:58] <Eridius> acrichto: For the slice::tail/init RFC, when renaming to split, is that keeping the existing (&T, &[T]) order for split_last() or should it be flipped to (&[T], &T)?
[22:28:29] <acrichto> Eridius: we were all fine with the current orderings, it was just the naming we were concerned about
[22:28:32] <Eridius> ok
[22:28:48] <Gankro> jroesch: is this a thing: Foo<X: Trait = Bar, Y = <X as Trait>::Associated>
[22:30:16] <jroesch> ah this one fails on nightly and works on my branch
[22:30:28] <jroesch> https://gist.github.com/jroesch/9d1f9c1e10d25546c2c9
[22:30:36] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[22:31:07] <jroesch> Gankro that type scares me 
[22:31:14] <Gankro> jroesch: agreed
[22:31:34] <jroesch> I think it works though
[22:31:39] <Gankro> wow really
[22:31:45] <jroesch> give me a second
[22:31:59] <Gankro> Like I can overload X and it will change the default that Y has?
[22:32:17] <Gankro> Or just it will hardcode Y to the one yielded by X's default?
[22:33:19] <jroesch> http://is.gd/uo9Qwp
[22:33:36] <jroesch> the simplest possible version of that
[22:33:39] <jroesch> but it parses
[22:33:53] <jroesch> and I would imagine the inference will work if we can come up with an actual use case
[22:35:42] <Gankro> seems like the kind of madness reem would want
[22:36:36] <reem> hmm?
[22:36:51] <jroesch> see above program ;)
[22:37:35] <Gankro> reem: Trying to come up with crazy testcases for default fallback
[22:37:48] <Gankro> I was thinking about fallbacks referring to previous fallbacks
[22:38:15] <reem> like defaulting to an associated type on a previous parameter which also has a default
[22:38:18] <reem> interesting
[22:39:09] <jroesch> if you come up with any interesting programs send them my way, currently doing some testing and QA on my branch 
[22:40:40] <reem> will do
[22:42:17] *** Joins: zmack (zmack@moz-376.4m7.123.86.IP)
[22:44:23] *** Quits: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP) (Connection closed)
[22:46:19] *** Quits: zmack (zmack@moz-376.4m7.123.86.IP) (Ping timeout: 121 seconds)
[22:49:19] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[22:52:32] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[22:56:10] *** Joins: swgillespie (swgillespie@moz-767.3un.220.167.IP)
[23:06:36] *** Joins: njn_ (chatzilla@moz-270n86.iinet.net.au)
[23:07:37] *** njn_ is now known as njn
[23:10:07] *** Joins: blank_name (blank_name@moz-i7g.dq5.36.50.IP)
[23:15:50] *** Quits: yjv (yjv@moz-j0cdis.fios.verizon.net) (Connection closed)
[23:15:55] *** Quits: jdm (jdm@moz-mu9.06r.98.75.IP) (Ping timeout: 121 seconds)
[23:23:44] *** chmanchester|afk is now known as chmanchester
[23:32:25] *** Quits: mgottschlag (quassel@moz-c3ivja.hsi14.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[23:33:11] *** Quits: zxq9 (ceverett@moz-qsm369.mesh.ad.jp) (Quit: Konversation terminated!)
[23:35:23] *** Quits: eibwen (eibwen@moz-ocjg10.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[23:37:10] <carllerche> Is a beta release equal to a nightly release w/ the same commit date?
[23:37:38] <Elaine> not quite, I think beta doesn't allow using #[feature] stuff.
[23:38:07] <carllerche> Ah... correct
[23:38:21] <carllerche> it doesn't seem that the downloads have a deterministic way to pull a specific beta :(
[23:38:39] <carllerche> i'm trying to convert a beta release (like 1.2.0-beta.1) -> a download URL
[23:40:27] <Gankro> carllerche: beta has tons of back-ported patches
[23:42:48] *** Quits: Rym (uid91135@moz-n2i7qm.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[23:43:37] *** Quits: det (chris@moz-q2ed1r.lv.cox.net) (Connection closed)
[23:50:03] *** Joins: goyox86 (textual@moz-rvv.00r.255.109.IP)
[23:53:48] *** Joins: jdm (jdm@moz-vd9mv0.dsl.teksavvy.com)
[23:54:36] <Gankro> eddyb: I need this in my soul https://play.rust-lang.org/?gist=79c52573e861a4c04be8&version=stable
[23:55:28] <carllerche> Ok, I managed to get a Rust project running 32 bit CI on travis :P https://travis-ci.org/carllerche/travis-rust-matrix/builds/70150819
[23:55:58] <carllerche> repo: https://github.com/carllerche/travis-rust-matrix
[23:57:24] *** Quits: goyox86 (textual@moz-rvv.00r.255.109.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:59:04] *** Joins: p1start (p1start@moz-nftjhe.org)
[23:59:53] *** Joins: det (chris@moz-q2ed1r.lv.cox.net)
