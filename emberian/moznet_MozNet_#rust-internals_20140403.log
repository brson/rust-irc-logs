[00:01:59] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[00:01:59] <ghrust> [13rust] 15alexcrichton pushed 3 new commits to 06dist-snap: 02http://git.io/PtLA4w
[00:01:59] <ghrust> 13rust/06dist-snap 14671649a 15Huon Wilson: Minor adjustments to the 0.10 release notes....
[00:01:59] <ghrust> 13rust/06dist-snap 14606a316 15Brian Anderson: Update AUTHORS.txt for 0.10
[00:02:00] <ghrust> 13rust/06dist-snap 1446867cc 15Alex Crichton: Tweak the installation instructions in the README...
[00:02:02] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[00:04:06] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[00:05:46] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[00:06:09] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[00:06:36] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[00:08:20] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[00:09:01] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[00:09:01] *** ChanServ sets mode: +ao pcwalton pcwalton
[00:09:28] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[00:12:31] *** Quits: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[00:15:04] *** Quits: andrew-__ (andrew-d_w@2DE5EA9.7A62F771.CC0301A2.IP) (Input/output error)
[00:15:17] *** Quits: dherman (dherman@moz-C07D5168.p2p.sfo1.mozilla.com) (Ping timeout)
[00:15:25] *** Joins: andrew-d_w (andrew-d_w@2DE5EA9.7A62F771.CC0301A2.IP)
[00:20:36] *** Quits: andrew-d_w (andrew-d_w@2DE5EA9.7A62F771.CC0301A2.IP) (Ping timeout)
[00:20:55] <cmr> acrichto: ok, rebasing liblibc
[00:21:08] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[00:21:11] <acrichto> cmr: oh sorry, I got around to it earlier
[00:21:16] <acrichto> it just built fine on windows for me...
[00:21:24] *** vfetwnuncszu is now known as dcrewi
[00:21:28] <acrichto> https://github.com/alexcrichton/rust/tree/libc
[00:22:03] *** Joins: dherman (dherman@moz-C07D5168.p2p.sfo1.mozilla.com)
[00:22:03] *** ChanServ sets mode: +ao dherman dherman
[00:22:11] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[00:25:13] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[00:25:19] <cmr> acrichto: \o/ work I don't have to do
[00:26:03] <acrichto> cmr: hm, I think I'll try that and see if it gets past bors, is that ok?
[00:26:10] <cmr> yes.
[00:26:18] <cmr> it was dying on try too fwiw
[00:26:20] *** Joins: mankyKitty (Instantbir@19559281.CA335678.BC02889B.IP)
[00:26:37] <acrichto> hm, maybe I'll try that
[00:26:49] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[00:26:49] <ghrust> [13rust] 15alexcrichton 04force-pushed 06try from 14ef20203 to 14c336cc1: 02http://git.io/k471pw
[00:26:49] <ghrust> 13rust/06try 140559055 15Corey Richardson: Remove libc from std...
[00:26:49] <ghrust> 13rust/06try 148236231 15Corey Richardson: Change how the readdir/opendir hack works
[00:26:49] <ghrust> 13rust/06try 14c336cc1 15Corey Richardson: Fix fallout from std::libc separation
[00:26:51] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[00:29:46] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[00:30:01] *** vfetwnuncszu is now known as dcrewi
[00:31:54] <nrc> is there a reason we don't keep spans around for formal type parameters?
[00:31:56] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[00:32:23] <nrc> I am producing a really bad error message right now :-(
[00:33:18] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Quit: Leaving.)
[00:34:58] <nrc> Or to put it another way, anyone mind if I add a span to TyParam? 
[00:35:16] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[00:35:25] <cmr> go for it
[00:35:29] *** vfetwnuncszu is now known as dcrewi
[00:38:08] * nrc goes for it
[00:43:23] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[00:45:42] <cmr> also
[00:45:44] <cmr> acrichto: r? https://github.com/mozilla/rust/pull/13244
[00:46:48] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[00:46:48] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/-K2TTw
[00:46:48] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[00:49:19] *** Quits: dherman (dherman@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: dherman)
[00:51:49] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[00:51:49] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/il9bxg
[00:51:49] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[00:51:51] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[00:51:51] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/CPOSZA
[00:51:51] <ghrust> 13rust/06auto 1478af0f7 15Benjamin Herr: doc: Remove dated "libgreen is default" statement.
[00:51:51] <ghrust> 13rust/06auto 147bda3df 15bors: auto merge of #13262 : ben0x539/rust/guide-runtime-fixup, r=alexcrichton
[00:51:51] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[00:52:55] *** Parts: mbrubeck (sid17036@moz-A42E5B7B.irccloud.com) ()
[00:53:49] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[00:54:30] *** Joins: lpy (lpy@1834E2CB.F09091A8.1348A864.IP)
[00:55:30] *** Quits: vfetwnuncszu (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[00:56:28] <acrichto> cmr: can you back out 5b9fc8bb3a9781ba3dd08fcee71f8c439466a144?
[00:56:35] <acrichto> I'm not a big fan of big renumberings all over the place
[00:56:42] <acrichto> we should use a macro there instead
[00:56:51] <cmr> we can't, really.
[00:57:00] <acrichto> we've done it elsewhere?
[00:57:01] <cmr> since we set variant tags.
[00:57:05] <cmr> no, just in this case.
[00:57:14] <acrichto> we set variant tags?
[00:57:42] <cmr> https://github.com/cmr/rust/commit/5b9fc8bb3a9781ba3dd08fcee71f8c439466a144#diff-61348a68cd6b789b3a09a4687a16c43aL118
[00:57:50] <acrichto> we could just put a hole in the middle
[00:57:54] <cmr> I mean.. I guess I could hack it together.
[00:58:05] <acrichto> oh no, as in we don't need to do it right now
[00:58:17] <acrichto> the renumbering isn't strictly necessary, and I'd rather that diff be removing manual numbering
[00:58:26] <cmr> ok.
[00:58:40] *** Joins: dmsky (dmsky@moz-FF2573B1.pppoe.spdop.ru)
[00:58:52] <acrichto> r=me otherwise though
[00:59:04] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[00:59:16] *** vfetwnuncszu is now known as dcrewi
[00:59:53] *** Joins: bjz_ (bjz@B398BE78.F804C29E.D35A31DF.IP)
[00:59:54] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[01:00:23] *** Quits: dmsky (dmsky@moz-FF2573B1.pppoe.spdop.ru) (Ping timeout)
[01:01:26] *** Quits: lpy (lpy@1834E2CB.F09091A8.1348A864.IP) (Client exited)
[01:07:07] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[01:13:26] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[01:13:26] *** ChanServ sets mode: +o tjc
[01:20:23] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[01:27:57] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[01:27:57] <ghrust> [13rust] 15alexcrichton pushed 1 new commit to 06try: 02http://git.io/WBI92g
[01:27:57] <ghrust> 13rust/06try 14ffc88ef 15Alex Crichton: an attempt
[01:27:57] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[01:28:55] <cmr> "an attempt" beautiful detail.
[01:29:17] <cmr> I take it you're hitting the same thing I did?
[01:29:26] <cmr> and you think it's stripping the entire binary to nothing?
[01:30:10] <acrichto> maybe
[01:30:20] <acrichto> it seems semi-related to the dummy test
[01:30:38] <acrichto> I'm baffled why it compiles locally
[01:32:45] *** Quits: Sharp (Sharp@moz-3301C7AB.static-ip.telepacific.net) (Quit: Sharp)
[01:33:09] <cmr> try using -j2 :)
[01:34:46] <acrichto> I tried
[01:34:50] <cmr> ok
[01:34:50] <acrichto> it just locks up
[01:34:53] <cmr> extra weird
[01:34:54] <acrichto> dunno why :\
[01:34:55] <cmr> heh
[01:34:57] <acrichto> my install is super broken I think
[01:35:00] <cmr> mingw make is racy as hell
[01:35:02] <acrichto> it's some super ancient mingw
[01:35:04] *** Quits: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca) (Quit: canhtak)
[01:35:13] <acrichto> or that lol
[01:35:20] <acrichto> I don't *think* that that's the problem
[01:36:04] <cmr> you can install mingw-w64 and it has a real make.
[01:37:34] <acrichto> man if mingw-w64 is that much better, then I want to move to it just to make my vm better
[01:37:38] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Ping timeout)
[01:38:37] <acrichto> nope
[01:38:38] <acrichto> didn't help
[01:38:42] <mcpherrin> Could Pymake work?
[01:40:30] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[01:41:08] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[01:41:55] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[01:41:56] <ghrust> [13rust] 15alexcrichton 04force-pushed 06try from 14ffc88ef to 14eb497cc: 02http://git.io/k471pw
[01:41:56] <ghrust> 13rust/06try 14eb497cc 15Alex Crichton: an attempt
[01:41:56] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[01:42:15] <strcat> acrichto: I don't think mingw-w64 has make
[01:42:17] <strcat> ;s
[01:42:28] <strcat> it's just a toolchain
[01:42:33] <cmr> well
[01:42:39] <strcat> no ssh/make/bash/whatever afaik
[01:42:47] <acrichto> where's cargo when you need it
[01:42:55] <cmr> no that's not true I don't think so.
[01:42:56] <strcat> there's some build of mingw-w64 with a bunch of tools
[01:43:04] <cmr> erm
[01:43:07] <cmr> wow distracted
[01:43:13] <cmr> wrote the same thing thrice :p
[01:43:35] <cmr> but iirc the stock mingw-w64 build I got had a make.
[01:43:42] <cmr> not the rest of the tools, but at least make.
[01:43:56] *** Joins: deontologician (user@moz-1291AA0.tampfl.fios.verizon.net)
[01:45:13] <strcat> cmr: they don't do official builds though
[01:45:17] <acrichto> configure: WARNING: LLVM will be built thread-unsafe because atomic builtins are missing
[01:45:23] <acrichto> seems... interesting
[01:45:30] <strcat> cmr: the project itself is just the toolchain part
[01:45:40] <strcat> there are other projects using mingw-w64 to build a bigger set of tools
[01:45:46] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[01:45:50] * strcat shrugs
[01:46:41] <cmr> it was mingw-builds, which also includes gdb, python, zlib, and iconv from the docs.
[01:46:45] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[01:46:45] <ghrust> [13rust] 15alexcrichton 04force-pushed 06try from 14eb497cc to 144f5c804: 02http://git.io/k471pw
[01:46:45] <ghrust> 13rust/06try 144f5c804 15Alex Crichton: an attempt
[01:46:45] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[01:48:30] <klutzy> on mingw make: blame msys1
[01:49:00] <klutzy> msys2 seems to fix it
[01:50:03] <nrc> who was working on built-in bounds/kinds? Was it eddyb?
[01:50:28] <cmr> flaper87|afk was.
[01:50:30] <klutzy> well, msys1 is again managed by mingw community, it's safe to blame mingw :p
[01:50:32] <cmr> slash is.
[01:51:16] <nrc> flaper87|afk: ping, when you are not afk
[01:51:28] <nrc> cheers cmr
[01:51:30] <strcat> klutzy: isn't msys2 too?
[01:52:40] <klutzy> strcat: it's now managed by mingw64 people, though i dont know if it is active fork or successor
[01:52:56] <strcat> why does mingw even still exist >.<
[01:53:08] <strcat> it's broken in many and *still* has no 64-bit support
[01:53:14] <strcat> I mean why not just contribute to mingw-w64 and kill it?
[01:55:07] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[01:55:07] <ghrust> [13rust] 15alexcrichton 04force-pushed 06try from 144f5c804 to 14bd0edcb: 02http://git.io/k471pw
[01:55:07] <ghrust> 13rust/06try 14bd0edcb 15Alex Crichton: an attempt
[01:55:07] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[01:55:55] <acrichto> cmr: I think this may show that it's not a race -- http://buildbot.rust-lang.org/builders/try-win/builds/947/steps/compile/logs/stdio
[01:55:59] <acrichto> still have no idea what's going on
[01:57:36] *** Parts: deontologician (user@moz-1291AA0.tampfl.fios.verizon.net) (ERC Version 5.3 (IRC client for Emacs))
[02:02:44] *** Joins: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca)
[02:06:49] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[02:06:49] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/CPOSZA
[02:06:49] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[02:07:45] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[02:11:32] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:11:52] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[02:11:52] <ghrust> [13rust] 15bors pushed 46 new commits to 06auto: 02http://git.io/QKsNZg
[02:11:52] <ghrust> 13rust/06auto 143b4a517 15Corey Richardson: rustc: make comments on CrateContext doc comments
[02:11:52] <ghrust> 13rust/06auto 145a4c8a9 15Corey Richardson: back: abi: remove dead code
[02:11:52] <ghrust> 13rust/06auto 1474ddaa2 15Corey Richardson: back: archive: remove dead code
[02:11:54] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[02:16:16] * nrc shakes fist at metadata
[02:16:18] <nrc> again
[02:27:21] *** Joins: rajaram_ (rajaram@5741EEC2.276A452.BE4CF869.IP)
[02:29:46] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:34:02] *** Quits: zz_kimundi (kimundi@moz-CEAAC5E6.dip0.t-ipconnect.de) (Ping timeout)
[02:36:12] *** Quits: Jesse_ (jruderman@moz-62518563.mtv2.mozilla.com) (Quit: Jesse_)
[02:36:45] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[02:37:30] *** Joins: zz_kimundi (kimundi@moz-B0C67194.dip0.t-ipconnect.de)
[02:37:31] *** zz_kimundi is now known as kimundi
[02:38:26] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Ping timeout)
[02:39:45] *** Quits: rajaram_ (rajaram@5741EEC2.276A452.BE4CF869.IP) (Connection reset by peer)
[02:40:21] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[02:40:40] *** Joins: lpy (lpy@ECF79DC7.F09091A8.1348A864.IP)
[02:41:49] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[02:41:49] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14b5df97f to 147bda3df: 02http://git.io/N3iJvQ
[02:41:49] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[02:45:01] <nrc> BLEURG!
[02:45:48] <nrc> The downside of implementing a keyword in terms of a builtin bound is if we don't use the std lib, the source for the bound isn't there and nothing works
[02:45:56] <nrc> yuck
[02:45:56] <cmr> somehow I broke android.
[02:46:17] <nrc> did you look at it? That is often enough
[02:46:22] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:46:37] *** Joins: deontologician (user@moz-1291AA0.tampfl.fios.verizon.net)
[02:46:52] <cmr> I think I broke unwinding somehow.
[02:47:04] <cmr> error: failure produced the wrong error: exit code: 0
[02:48:05] <cmr> error: more than one device and emulator
[02:48:08] <cmr> uhhhhh
[02:51:04] <nrc> Do we have any library code which is considered absolutely essential and is used even if no_std is specified?
[02:51:15] <cmr> no.
[02:51:28] <cmr> absolutely nothing is used with no_std
[02:51:41] <cmr> you need to specify the lang items yourself.
[02:52:01] <nrc> yikes
[02:53:04] <nrc> are there any language items that must be specified, or is the compiler expected to work without them all?
[02:53:16] <cmr> look at middle/lang_items.rs
[02:53:20] <cmr> possibly without the plural
[02:53:40] <cmr> it calls .require(NameOfLangItemVariant) when it needs it.
[02:53:53] <cmr> so it's basically "pay for what you use"
[02:54:00] <cmr> (and std defines all of them)
[02:54:00] <nrc> it is a terrible place -  that file could really do with some more comments
[02:56:28] *** Joins: rajaram_ (rajaram@5741EEC2.276A452.BE4CF869.IP)
[02:58:44] *** Joins: jdm (jdm@2B5CD89E.ED0C8.AE2B2F80.IP)
[03:00:48] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[03:04:41] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[03:04:46] *** Quits: luz (lu.cy@moz-CD18B14B.customer.cdi.no) (Input/output error)
[03:04:51] *** Joins: luz (lu.cy@moz-CD18B14B.customer.cdi.no)
[03:05:57] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[03:08:17] *** Quits: rajaram_ (rajaram@5741EEC2.276A452.BE4CF869.IP) (Connection reset by peer)
[03:10:01] *** Quits: cgaebel (clark@moz-F9D89110.nyc.res.rr.com) (Ping timeout)
[03:11:51] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[03:11:51] <ghrust> [13rust] 15bors 04force-pushed 06auto from 142fa78cc to 147bda3df: 02http://git.io/N3iJvQ
[03:11:51] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[03:11:52] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[03:11:52] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/7d0maw
[03:11:52] <ghrust> 13rust/06auto 14d562e5b 15Felix S. Klock II: Update emacs mode to support new `#![inner(attribute)]` syntax.
[03:11:52] <ghrust> 13rust/06auto 14441983c 15bors: auto merge of #13265 : pnkfelix/rust/fsk-update-emacs-mode-for-new-inner-attr-syntax, r=alexcrichton...
[03:11:53] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[03:15:09] <ChrisMorgan> nrc: lang_items was much, much worse a few months ago. Then I got fed up with it and turned it into a macro which still had a number for each lang item. Then a little later someone else came up with a way of refactoring it so that number wasn't necessary, and *finally* we have lang items with clean diffs.
[03:15:30] <ChrisMorgan> But really, if you think it's bad, look at it from a few months ago.
[03:15:38] <cmr> also there's inconsistency between using .require(XXX) and the .xxx() methods.
[03:15:53] <cmr> I think the .xxx() methods are a much more recent development
[03:16:01] <cmr> since before there wasn't a macro to do it.
[03:17:29] <ChrisMorgan> No, the .xxx() methods were there before.
[03:18:02] <nrc> ChrisMorgan: I don't think it's bad, I just think it needs a few more comments - would be good to know how it works and what you should call, etc. 
[03:18:29] *** Joins: japaric (japaric@A9BA1A3C.ABE6A7FD.E5B504CC.IP)
[03:18:37] <ChrisMorgan> nrc: still, take a look at it from a few months ago!
[03:18:46] <ChrisMorgan> It'll be fun! You won't be warped for life, really!
[03:18:47] <nrc> I.e., not clear at all that you should call require(), or indeed that if you do have no_std, the lang items aren't going to be around
[03:18:59] <nrc> ChrisMorgan: heh, sounds fun :-)
[03:19:01] *** Quits: japaric_ (japaric@350B7307.551A521E.212E9B57.IP) (Ping timeout)
[03:19:04] *** Quits: lpy (lpy@ECF79DC7.F09091A8.1348A864.IP) (Client exited)
[03:19:11] <cmr> nrc: well... isn't that true of *all* the compiler?
[03:19:17] * nrc not sure if he needs to see more terrifying code
[03:19:21] <cmr> I actually found datum surprisingly well documented.
[03:19:23] <cmr> like
[03:19:30] <cmr> I wanted to kiss niko or patrick or whoever wrote it
[03:19:36] <ChrisMorgan> nrc: it'll reassure you that yes, things are improving.
[03:19:53] <nrc> cmr: not *all* especially if you know a bit about standard compiler implementations
[03:20:11] <nrc> but there are a lot of bits which could do with some more documentation
[03:20:22] * cmr thinks most of it could
[03:24:33] *** Joins: rajaram_ (rajaram@5741EEC2.276A452.BE4CF869.IP)
[03:25:02] <nrc> Whoops! task 'rustc' has overflowed its stack
[03:25:12] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[03:29:01] *** Quits: rajaram_ (rajaram@5741EEC2.276A452.BE4CF869.IP) (Connection reset by peer)
[03:32:11] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[03:41:57] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[03:41:57] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/il6LPg
[03:41:57] <ghrust> 13rust/06auto 1405d0045 15Daniel Micay: fix Option<~ZeroSizeType>...
[03:41:57] <ghrust> 13rust/06auto 1413dc788 15bors: auto merge of #13267 : thestinger/rust/zero_size_non_null, r=pnkfelix...
[03:41:57] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[03:45:15] *** Joins: rajaram_ (rajaram@5741EEC2.276A452.BE4CF869.IP)
[03:49:06] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Quit: Leaving.)
[03:53:57] *** Quits: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca) (Quit: canhtak)
[04:07:32] *** Joins: mib_ay3mos (Mibbit@3E3094EC.34458CF2.CC1A2609.IP)
[04:10:58] *** Joins: japaric_ (japaric@6595D537.7EF11808.5C7588CA.IP)
[04:11:22] *** Quits: japaric (japaric@A9BA1A3C.ABE6A7FD.E5B504CC.IP) (Ping timeout)
[04:13:36] *** Quits: mib_ay3mos (Mibbit@3E3094EC.34458CF2.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:16:54] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[04:16:54] <ghrust> [13rust] 15bors pushed 4 new commits to 06auto: 02http://git.io/HSlMwg
[04:16:54] <ghrust> 13rust/06auto 14042ebac 15Matt Brubeck: `extern crate` and `mod` are not easily confused...
[04:16:54] <ghrust> 13rust/06auto 14d92eba7 15Matt Brubeck: Fix reference to "these two traits."...
[04:16:55] <ghrust> 13rust/06auto 14357e78d 15Matt Brubeck: Minor spelling/grammar/usage fixes....
[04:16:57] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[04:17:29] <cmr> acrichto: you around?
[04:17:37] <cmr> nrc: also what timezone are you?
[04:18:28] <nrc> cmr: New Zealand
[04:18:41] <nrc> which I think is west coast +20 atm
[04:18:54] <cmr> UTC+13:00?
[04:19:09] <nrc> sounds about right
[04:19:11] <cmr> the math for that adds up
[04:19:14] *** Joins: dmsky (dmsky@moz-FF2573B1.pppoe.spdop.ru)
[04:20:36] <strcat> all the android tests are failing ;s
[04:20:44] <cmr> Oh so it's all of them, not just me?
[04:20:48] * cmr feels very, very good about that
[04:20:53] * cmr sighs
[04:21:02] <cmr> flaky build automation is literally the worst.
[04:21:11] *** Quits: mankyKitty (Instantbir@19559281.CA335678.BC02889B.IP) (Ping timeout)
[04:23:11] *** Quits: rajaram_ (rajaram@5741EEC2.276A452.BE4CF869.IP) (Ping timeout)
[04:23:39] *** Joins: mankyKitty (Instantbir@19559281.CA335678.BC02889B.IP)
[04:24:56] <seanmonstar> in my repos, travis fails on its own so often, that its the first thing i assume whenever it fails
[04:25:32] <cmr> we've had really good luck with travis so far, except when we do something that breaks LLVM.
[04:26:02] *** Quits: ecr (chatzilla@7C463196.5BB0586B.11F8506F.IP) (Connection reset by peer)
[04:26:50] <seanmonstar> a couple tests, specifically reading a file seems to timeout ~10% of the time, and binding to udp fails ~50%, for me on travis with nodejs
[04:27:39] <seanmonstar> i could be exaggerating a little
[04:28:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[04:30:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[04:31:46] *** Quits: deontologician (user@moz-1291AA0.tampfl.fios.verizon.net) (Ping timeout)
[04:37:54] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[04:46:56] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[04:46:56] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/c8nGaQ
[04:46:56] <ghrust> 13rust/06auto 145b2c326 15Liigo Zhuang: libtest: rename `BenchHarness` to `Bencher`...
[04:46:56] <ghrust> 13rust/06auto 1460a463c 15bors: auto merge of #13236 : liigo/rust/rename-benchharness, r=huonw...
[04:46:56] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[04:46:59] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[04:46:59] <ghrust> [13rust] 15bors 04force-pushed 06auto from 146536838 to 147bda3df: 02http://git.io/N3iJvQ
[04:46:59] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[04:55:02] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[05:01:39] *** Quits: mankyKitty (Instantbir@19559281.CA335678.BC02889B.IP) (Ping timeout)
[05:02:43] *** Joins: mankyKitty (Instantbir@19559281.CA335678.BC02889B.IP)
[05:17:56] *** Quits: tikue (tkuehn@CB7FC854.FAD414BA.D74CC41D.IP) (Quit: tikue)
[05:21:58] *** Joins: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP)
[05:21:58] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1460a463c to 147bda3df: 02http://git.io/N3iJvQ
[05:21:58] *** Parts: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP) ()
[05:21:59] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[05:21:59] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/Jo4Qkg
[05:21:59] <ghrust> 13rust/06auto 1405d0045 15Daniel Micay: fix Option<~ZeroSizeType>...
[05:21:59] <ghrust> 13rust/06auto 14f49c876 15bors: auto merge of #13267 : thestinger/rust/zero_size_non_null, r=pnkfelix...
[05:21:59] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[05:23:03] *** Quits: mankyKitty (Instantbir@19559281.CA335678.BC02889B.IP) (Ping timeout)
[05:25:41] *** Joins: mankyKitty (Instantbir@19559281.CA335678.BC02889B.IP)
[05:27:49] *** Quits: mankyKitty (Instantbir@19559281.CA335678.BC02889B.IP) (Quit: mankyKitty)
[05:35:28] *** Quits: jdm (jdm@2B5CD89E.ED0C8.AE2B2F80.IP) (Quit: Lost terminal)
[05:43:02] *** Joins: mankyKitty (Instantbir@19559281.CA335678.BC02889B.IP)
[05:43:46] *** Quits: victorporof (victorporo@moz-1C281963.dsl.bell.ca) (Quit: victorporof)
[05:45:17] <cmr> rusti: use std::int;
[05:45:18] -rusti- <anon>:11:13: 11:21 warning: unused import, #[warn(unused_imports)] on by default
[05:45:18] -rusti- <anon>:11         use std::int;
[05:45:18] -rusti-                       ^~~~~~~~
[05:45:18] -rusti- ()
[05:45:31] *** Joins: lpy_ (lpy@186A8F3A.F09091A8.1348A864.IP)
[05:45:32] <cmr> rusti:  mod foo { }
[05:45:33] -rusti- ()
[05:46:48] *** Joins: rajaram_ (rajaram@47769425.AE842F9B.81C3DAA1.IP)
[05:52:51] *** lpy_ is now known as lpy
[05:56:59] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[05:56:59] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/hNNPew
[05:56:59] <ghrust> 13rust/06auto 14e14222e 15Benjamin Adamson: Removed managed boxes from libarena.
[05:56:59] <ghrust> 13rust/06auto 1454bc749 15bors: auto merge of #13273 : bjadamson/rust/master, r=thestinger...
[05:57:00] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[05:57:04] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[05:57:04] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14f49c876 to 147bda3df: 02http://git.io/N3iJvQ
[05:57:04] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[06:10:56] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[06:10:57] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[06:11:33] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[06:13:15] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[06:17:56] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Ping timeout)
[06:18:19] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[06:19:51] *** Quits: bjz_ (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[06:20:07] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[06:20:38] *** Quits: ChrisMorgan (chris@moz-8DCBEA52.vic.adsl.internode.on.net) (Ping timeout)
[06:31:59] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[06:32:00] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1454bc749 to 147bda3df: 02http://git.io/N3iJvQ
[06:32:00] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[06:32:00] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[06:32:00] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/ybxySw
[06:32:00] <ghrust> 13rust/06auto 1405d0045 15Daniel Micay: fix Option<~ZeroSizeType>...
[06:32:00] <ghrust> 13rust/06auto 1472bcdf0 15bors: auto merge of #13267 : thestinger/rust/zero_size_non_null, r=pnkfelix...
[06:32:01] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[06:48:50] *** Joins: edwardw (Mibbit@4660DACB.EE06708D.4BFBD933.IP)
[06:52:02] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Connection reset by peer)
[06:52:15] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[06:56:11] *** kimundi is now known as zz_kimundi
[06:57:05] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[06:58:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[06:59:25] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[07:00:32] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:01:11] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[07:01:21] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Broken pipe)
[07:01:23] *** Quits: rajaram_ (rajaram@47769425.AE842F9B.81C3DAA1.IP) (Ping timeout)
[07:01:38] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[07:01:41] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[07:02:13] *** Joins: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca)
[07:02:29] *** Joins: rajaram_ (rajaram@47769425.AE842F9B.81C3DAA1.IP)
[07:02:55] *** Quits: edwardw (Mibbit@4660DACB.EE06708D.4BFBD933.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:04:10] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Input/output error)
[07:04:49] *** Joins: edwardw (Mibbit@EE646FE3.EE06708D.4BFBD933.IP)
[07:06:57] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[07:06:57] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1472bcdf0 to 147bda3df: 02http://git.io/N3iJvQ
[07:06:57] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[07:06:59] *** Joins: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP)
[07:06:59] <ghrust> [13rust] 15bors pushed 4 new commits to 06auto: 02http://git.io/nYxLVw
[07:06:59] <ghrust> 13rust/06auto 14baf2861 15klutzy: compiletest: Fix bitrotted win32 routines
[07:06:59] <ghrust> 13rust/06auto 14758807c 15klutzy: test/debug-info: Add/remove ignore-win32 flags...
[07:06:59] <ghrust> 13rust/06auto 1402ad7e1 15klutzy: test/run-pass: Add/remove some ignore-win32 flags
[07:07:01] *** Parts: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP) ()
[07:08:22] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Ping timeout)
[07:22:55] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[07:23:30] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[07:23:40] <huon> cmr: any ideas for rustdoc tests? checking the literal html output would be a bad idea, right?
[07:23:49] <cmr> huon: it might not be.
[07:23:52] <cmr> well
[07:23:57] <cmr> some tree comparisons might be in order.
[07:23:59] <cmr> (a la xpath)
[07:24:05] <eddyb> normalize first
[07:24:14] <huon> normalize to what??
[07:24:16] <eddyb> (replace \s+ with ' ' etc.)
[07:24:35] <cmr> it'd be silly to do literal character-wise comparisons.
[07:24:45] <huon> yeah, that was a given
[07:24:50] <cmr> the only thing I would r+ is something using the output of a parser :P
[07:25:04] <huon> well... we could do reftests like browsers do
[07:25:11] <eddyb> cmr: wait for kmc's HTML parser :D
[07:25:13] <cmr> huon: another thing would be comparing the AST's generated by clean.
[07:25:22] <cmr> huon: no we couldn't, we have nothing simpler to compose the reftests out of.
[07:25:42] <cmr> reftests consist of a small base used to build things that render equivalently to more complex features.
[07:25:56] <huon> we could add a dependency on servo for the testsuite
[07:26:01] <cmr> lol
[07:26:05] <huon> to render the output of rustdoc to png
[07:26:07] <cmr> this must happen.
[07:26:11] * huon files a bug
[07:26:21] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[07:26:47] <huon> speaking of which, how does servo handle our docs?
[07:26:53] <cmr> haven't tried.
[07:26:55] * cmr tries
[07:26:57] <eddyb> huon: because Rust isn't dogfooding enough :P
[07:27:21] <cmr> one thing that's awesome is that since they're using rlib's I can just scp over the servo binary from my desktop :)
[07:27:29] <huon> presumably the JS won't work
[07:27:33] <huon> cmr: oh, it's all static?
[07:27:36] <cmr> mhm
[07:28:17] <eddyb> hmmm
[07:28:26] <eddyb> imagine Rust changes having to pass servo bors
[07:28:28] <cmr> Explodes violently.
[07:28:47] <cmr> A task fails and then everything else dies.
[07:29:04] <eddyb> tasksplosion?
[07:35:13] <huon> it would make servo's rust upgrades trivial
[07:35:20] <huon> (i.e. we would be doing all the work)
[07:36:28] <cmr> that's not true.
[07:36:41] <cmr> we just wouldn't ever be able to change the language or libs in such a way that servo no longer works.
[07:36:45] <cmr> (fsvo "works")
[07:37:16] <huon> cmr: well... I was implicitly including modifying servo too
[07:37:24] <huon> some sort of cross-repo PR
[07:39:29] <cmr> I'm considering proposing freezing all changes to the type system/grammar until we have formally verified models of both.
[07:40:46] *** Quits: mankyKitty (Instantbir@19559281.CA335678.BC02889B.IP) (Ping timeout)
[07:41:12] <huon> cmr: that seems... annoying
[07:41:19] <cmr> it is.
[07:41:25] *** Joins: Nekit1234007_ (Nekit12340@20A0F3C5.4E33471C.3E736995.IP)
[07:41:27] <cmr> but I'm starting to become paranoid.
[07:41:32] <eddyb> hopefully we can still remove ty_unboxed_vec :P
[07:41:43] <eddyb> cmr: strcat got to you?
[07:41:55] *** Quits: Nekit1234007 (Nekit12340@A4D1747.7796E3F4.4707F662.IP) (Ping timeout)
[07:42:03] <eddyb> thinking of orthogonality all the time
[07:42:29] <cmr> no, I just don't want to do something which breaks our LL(1) or soundness.
[07:42:35] <cmr> if we even are at all.
[07:42:41] <cmr> I'm especially suspicious of VG
[07:43:03] <eddyb> like that wasn't getting looked down upon enough as it is :/
[07:43:15] <eddyb> cmr: why?
[07:43:39] <cmr> I suspect but have no evidence that it's going to interact with inference in unpleasant ways.
[07:43:55] <eddyb> oh, that
[07:44:13] <eddyb> cmr: method lookup could be completely broken with the current model
[07:44:29] <eddyb> cmr: I would wait for nmatsakis' changes before even considering VG
[07:44:45] <cmr> ah yes, resolve is another algorithm we need to specify, hopefuly with a theorem assistent :p
[07:45:09] <eddyb> well, it's not resolve but a special method resolution thing, but yeah
[07:45:20] <eddyb> glob imports break resolve atm
[07:45:36] <huon> from what I've heard, it's got a lot of historical baggage... it certainly doesn't seem like it should take 5000 lines to resolve under our current scheme
[07:45:47] * huon doesn't know for sure, though
[07:46:00] *** Joins: mankyKitty (Instantbir@19559281.CA335678.BC02889B.IP)
[07:46:30] <cmr> eddyb: also orthogonality isn't just some theoretical concern, it's very important for having a nice language imo. if adding a feature is cross-cutting, then there is usually some deeper abstraction fighting to get out.
[07:46:51] <cmr> (plus it makes understandability harder)
[07:46:51] <huon> probably monads
[07:46:54] <huon> it's always monads
[07:46:59] <cmr> :p
[07:47:11] * huon <3 category theory
[07:49:04] <eddyb> cmr: resolve has no concept of privacy AFAIK
[07:49:17] <eddyb> so you can trivially make a loop with globs :(
[07:49:25] <cmr> it doesn't, nor should it
[07:49:29] <cmr> it used to, it was a mess.
[07:49:35] <cmr> privacy really does belong in its own pass.
[07:49:51] <eddyb> yeah, but keep in mind that use foo::bar; exports bar as private
[07:50:03] <cmr> (also it was always possible to break programs with globs, at least for some time now)
[07:50:11] <eddyb> you can actually import it from another module and you'll get a privacy error
[07:50:16] <eddyb> instead of a resolution error
[07:50:22] <eddyb> which seems weird to me
[07:50:48] <huon> just make the error messages the same, and no-one will know
[07:50:51] <eddyb> can't we special-case priv imports?
[07:50:53] <huon> "Syntax error. Stop."
[07:51:00] <eddyb> it would fix some of the glob issues
[07:51:26] <eddyb> (use foo::*; in bar and use bar::*; in foo would actually work)
[07:52:04] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[07:52:04] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/ixmtfA
[07:52:04] <ghrust> 13rust/06auto 14e529cb3 15Arcterus: serialize: add a few missing pubs to base64
[07:52:04] <ghrust> 13rust/06auto 14cdcf0f1 15bors: auto merge of #13277 : Arcterus/rust/serialize-fix, r=alexcrichton...
[07:52:04] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[07:52:56] *** Quits: zv (zv@moz-955F83E9.hsd1.ca.comcast.net) (Ping timeout)
[07:54:43] *** Joins: zv (zv@moz-955F83E9.hsd1.ca.comcast.net)
[07:58:44] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:00:26] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[08:00:31] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:03:38] <eddyb> cmr: omg omg :D https://github.com/jdm/rsed
[08:03:43] <cmr> old
[08:03:50] <eddyb> wait...
[08:03:57] <eddyb> why did it pop up on reddit then?
[08:04:05] <cmr> because jdm just made the repo :p
[08:04:09] <eddyb> hah
[08:04:30] <eddyb> cmr: I was going to say... this is how I'm going to make the entirety of librustc use UpperCamelCase for types
[08:04:37] <cmr> yeah no.
[08:04:42] <cmr> it's unusable until we have a pretty printer.
[08:04:50] <cmr> sorry :)
[08:08:16] *** Quits: edwardw (Mibbit@EE646FE3.EE06708D.4BFBD933.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:23:18] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:23:24] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:27:08] <huon> why is android broken again? :(
[08:27:41] <cmr> because brson went to sleep.
[08:30:59] <eddyb> oooh, I see what freevars is doing now
[08:31:36] <acrichto> I rebooted the android bot
[08:31:37] <eddyb> for each function (including closures), it finds every mention, even in nested closures, of variables outside of the function (hence, free)
[08:31:45] <acrichto> one of the emulators became a zombie, and I think it confused adb
[08:31:59] <huon> acrichto to the rescue! :)
[08:32:00] <eddyb> so it does actually consider x captured by both closures in ||||x 
[08:32:05] <acrichto> (maybe)
[08:33:59] *** Quits: dmsky (dmsky@moz-FF2573B1.pppoe.spdop.ru) (Input/output error)
[08:37:05] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[08:37:05] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14cdcf0f1 to 147bda3df: 02http://git.io/N3iJvQ
[08:37:05] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[08:40:09] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:40:10] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:58:29] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[09:00:36] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:05:03] *** Joins: dmsky (dmsky@moz-FF2573B1.pppoe.spdop.ru)
[09:06:44] *** Quits: dmsky (dmsky@moz-FF2573B1.pppoe.spdop.ru) (Ping timeout)
[09:15:33] <eddyb> cmr: I've reverted the Upvar change :/
[09:17:18] <eddyb> someone will have to fix it, P has been delayed for too long :(
[09:19:24] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[09:19:24] *** ChanServ sets mode: +o pnkfelix
[09:20:07] <eddyb> and I think it will be delayed for the weekend too
[09:27:01] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[09:27:01] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14c622d32 to 147bda3df: 02http://git.io/N3iJvQ
[09:27:01] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[09:27:03] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[09:27:03] <ghrust> [13rust] 15bors pushed 46 new commits to 06auto: 02http://git.io/7IHVeQ
[09:27:03] <ghrust> 13rust/06auto 143b4a517 15Corey Richardson: rustc: make comments on CrateContext doc comments
[09:27:03] <ghrust> 13rust/06auto 145a4c8a9 15Corey Richardson: back: abi: remove dead code
[09:27:03] <ghrust> 13rust/06auto 1474ddaa2 15Corey Richardson: back: archive: remove dead code
[09:27:05] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[09:29:03] *** Joins: Zr40 (zr40@moz-CCFEAB92.adsl.xs4all.nl)
[09:29:33] <eddyb> cmr: how long does it take to get a stage2 graph, from a specific branch on some fork of rust?
[09:29:52] *** Quits: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca) (Quit: canhtak)
[09:29:57] <eddyb> cmr: also, can it build the same code in parallel, with different --cfg values?
[09:31:02] <eddyb> oh I missed a lot of things https://github.com/mozilla/rust/pull/13269
[09:33:37] <eddyb> acrichto: hmm, maybe we should investigate the x32 option
[09:34:53] * eddyb wasn't joking about the 512MB RAM usage milestone
[09:35:03] <eddyb> make: *** [x86_64-unknown-linux-gnu/stage1/lib/rustlib/x86_64-unknown-linux-gnu/lib/stamp.rand] Segmentation fault
[09:35:04] <eddyb> ugh
[09:35:59] <eddyb> (I think I know what this is caused by, but it doesn't make much sense)
[09:36:20] *** Quits: lpy (lpy@186A8F3A.F09091A8.1348A864.IP) (Client exited)
[09:40:10] <eddyb> acrichto: hah, jemalloc causes a segfault
[09:40:22] *** Joins: dmsky (dmsky@moz-FF2573B1.pppoe.spdop.ru)
[09:41:21] <eddyb> rusti: format!("{:x}", 1162167621)
[09:41:23] -rusti- 45454545
[09:41:27] <eddyb> hah
[09:41:35] * eddyb is slightly confused
[09:42:41] <eddyb> okay, so it's unsafe ast_map being unsafe, with weird results on different allocators
[09:46:19] <huon> eddyb: as in, unsafe ast_map is wrong?
[09:46:26] <eddyb> huon: wrt inlining
[09:46:32] <huon> (well, has a bug)
[09:46:35] <huon> inlining?
[09:46:44] <eddyb> users of metadata&astencode throw away the AST they get
[09:46:46] <huon> oh, you mean the AST representation of inlineable functions?
[09:47:18] <eddyb> so I have to store it in the ast_map itself and give away references to it instead
[09:48:16] <eddyb> at least this aligns better with previous thoughts on push-only containers
[09:48:38] <eddyb> persistent and additive both mean something different than what I'm thinking of, though, hard to name the concept :(
[09:48:56] <huon> could you have two ASTs, one from the crate, one from the inlinable things?
[09:49:13] <eddyb> I already store "roots" of inlined items
[09:49:32] <huon> but inline in the ast_map, right?
[09:49:46] <eddyb> the path, and a DefId, to be precise
[09:49:50] <eddyb> huon: hmm?
[09:50:04] <eddyb> the post-P ast_map uses unsafe pointers
[09:50:07] <huon> you say "so I have to store it in the ast_map itself and give away references to it instead"
[09:50:32] <eddyb> yeah, keep the InlinedItem and return InlinedItemRef
[09:50:34] <huon> i was suggesting having a new actual AST tree, with a new(or the same) ast_map pointing into it
[09:50:46] <eddyb> uhm, how would that work?
[09:50:54] <eddyb> ast_map is currently a forest
[09:50:56] <huon> well, maybe not a tree
[09:51:14] <huon> Vec<InlinedItem> stored somewhere with indexes or something in the ast_map
[09:51:25] <huon> I don't understand your design so I'll let you think about it
[09:51:27] <eddyb> and to repeat myself, see ast_map::InlinedParent
[09:52:28] <huon> yes? what exactly am I looking at?
[09:52:58] <huon> it stores a Path and a DefId, it's not storing the inlined item inline.
[09:53:02] <eddyb> yeah
[09:53:05] <eddyb> I want to extend it
[09:53:44] <huon> why? isn't that conflating two things? (an index of the ast, and the actual code of inlined items)
[09:54:34] <eddyb> something has to own the inlined AST
[09:54:45] <eddyb> trans::inline just reads IDs from it
[09:54:55] <huon> yeah, and I'm saying that that thing shouldn't be the ast_map
[09:55:05] <eddyb> with @, ast_map ended up being the sole owner of that AST
[09:55:11] <eddyb> huon: oh, okay
[09:55:28] <eddyb> yeah, I want a vector with the crate and all the inlined items
[09:55:43] <eddyb> huon: but we need that abstraction I was toying with, otherwise it won't really work
[09:55:57] <eddyb> push(&'a self, x: T) -> &'a T
[09:56:24] <huon> I don't now what that abstraction is
[09:56:33] <huon> looks a lot like `v.push(x); v.last()`
[09:56:39] <eddyb> huon: but not mutable
[09:56:48] <eddyb> a vector you can only add items to
[09:56:51] <huon> oh, huh?
[09:56:57] <eddyb> actually, sorry, I forgot the indirection
[09:56:57] <huon> oh, right, a stable vector?
[09:57:08] <eddyb> stable? hah let me look it up
[09:57:14] * huon has actually been thinking about implementing such a thing
[09:57:22] <eddyb> very useful after P
[09:57:45] <eddyb> arenas are a crude substitute
[09:58:00] <huon> (stable, as in, elements don't move in memory if you keep pushing to them, i.e. resizing doesn't break it.)
[09:58:17] <eddyb> riiight
[09:58:24] <eddyb> huon: my idea involved indirection
[09:58:44] <eddyb> actually, the push definition above should still work
[09:58:46] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[09:58:47] <huon> yeah, Vec<~T> basically gives you that
[09:58:57] <eddyb> just package the value internally
[09:59:02] <huon> with the appropriate unsafe code to convince the compiler it works
[09:59:11] <huon> (and wrapped into a StableVec<T> type.)
[09:59:33] <eddyb> may also need a HashMap
[09:59:36] <huon> you can be more efficient by chunking, e.g. Vec<~[T, .. 8]>, but that requires yet more unsafe
[09:59:39] <huon> HashMap?
[09:59:43] <huon> for stability?
[09:59:52] <eddyb> no, a HashMap that does the same thing
[09:59:56] <huon> ah, right.
[09:59:57] <eddyb> HashMap<K, ~V>
[10:00:09] *** Joins: eibwen (kvirc@moz-2CFC2C74.dip0.t-ipconnect.de)
[10:00:09] <eddyb> const_eval needs it, AFAICT
[10:00:24] <eddyb> tcx actually has a stable HashSet
[10:00:32] <eddyb> (implemented as an unsafe mess with a HashMap)
[10:00:33] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:01:09] <eddyb> huon: if we make tcx use an arena, we can have a stable vector (the AST forest) with the same 'tcx lifetime and ast_map can just borrow that
[10:01:25] <huon> why does it need an arena?
[10:01:40] <eddyb> tcx is just more efficient with an arena
[10:02:09] <huon> yeah, but I don't see why an arena is required for the ast_map thing?
[10:02:21] <eddyb> because I'm not adding the lifetime in this PR :P
[10:02:37] <huon> (you said "if X then Y", which would be true but very deceptive if Y didn't require/follow from X. :P )
[10:02:56] <eddyb> there's a lot of code to change in order to support ty::ctxt<'tcx>
[10:03:42] <huon> that still doesn't explain why it *needs* an arena... changing to an arena might make the ast_map change easier (because the lifetime changes would need to happen anyway), but it wouldn't be required, right?
[10:03:56] <huon> anyway, most of the places that need to change would be the various passes that store a ty::ctxt, right?
[10:04:37] <eddyb> it's a few thousand lines changed
[10:04:42] <eddyb> not fun
[10:04:51] <huon> only a few thousand?
[10:04:55] <eddyb> huon: I already did it once and figured I did it wrong once it was too late
[10:05:02] <huon> should take 30 minutes or so, right?
[10:05:04] <huon> ;P
[10:05:05] <eddyb> >_>
[10:05:07] <huon> eddyb: oh :(
[10:05:21] <eddyb> took more than a day IIRC
[10:05:34] <eddyb> then again, it was before I added click-on-error support to my setup :P
[10:05:40] <eddyb> (with 1 line per error :D)
[10:05:53] <eddyb> P sure went faster with that
[10:09:52] <huon> :)
[10:10:30] <huon> eh, std::vec has so few tests? :(
[10:11:45] <eddyb> huon: at least I didn't ruin everything with the "to P or not P" experiment
[10:12:56] <eddyb> huon: I wonder how bad it would be to just remove IDs. I toyed with this before
[10:13:07] <eddyb> breaks things like DefId which works cross-crate now
[10:14:42] <eddyb> huon: if I weren't trying to do a million things at once, this would be easier
[10:15:00] <eddyb> I lost like 4-6 hours just because of DefUpvar
[10:19:55] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 31.0a1/20140401030203])
[10:24:19] *** Quits: Nekit1234007_ (Nekit12340@20A0F3C5.4E33471C.3E736995.IP) (Ping timeout)
[10:24:32] *** Joins: Nekit1234007_ (Nekit12340@20A0F3C5.4E33471C.3E736995.IP)
[10:42:02] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[10:42:02] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14895645a to 147bda3df: 02http://git.io/N3iJvQ
[10:42:02] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[10:42:05] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[10:42:05] <ghrust> [13rust] 15bors pushed 46 new commits to 06auto: 02http://git.io/gxjgsw
[10:42:05] <ghrust> 13rust/06auto 143b4a517 15Corey Richardson: rustc: make comments on CrateContext doc comments
[10:42:05] <ghrust> 13rust/06auto 145a4c8a9 15Corey Richardson: back: abi: remove dead code
[10:42:06] <ghrust> 13rust/06auto 1474ddaa2 15Corey Richardson: back: archive: remove dead code
[10:42:08] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[10:42:28] <huon> woah, 46?
[10:42:57] <huon> ah, removing code from each module individually.
[10:44:02] *** Joins: lpy (lpy@207F51B2.F09091A8.1348A864.IP)
[10:47:45] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[10:47:47] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[10:48:07] <eddyb> /home/eddy/Projects/rust/src/librustc/middle/astencode.rs:1379:9: 1379:12 error: in type `&middle::astencode::DecodeContext<,>`, pointer has a longer lifetime than the data it references
[10:48:12] <eddyb> nmatsakis: more of these fun ones
[10:49:21] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[10:49:29] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[10:53:34] <eddyb> nmatsakis: nvm made it work :D
[10:59:54] <huon> rusti: fn foo() -> int { 1; }
[10:59:57] -rusti- pastebinned 8 lines of output: http://ix.io/brP
[11:00:01] <huon> eddyb: ^ your favourite :P
[11:00:18] <huon> ( https://github.com/mozilla/rust/issues/13279 )
[11:02:05] <eddyb> huh?
[11:02:13] <eddyb> aaah, silly notes
[11:03:07] <eddyb> task 'rustc' failed at 'called `Option::unwrap()` on a `None` value', /home/eddy/Projects/rust/src/libstd/option.rs:264
[11:03:15] <eddyb> some formatting thing fails *in libsyntax*
[11:03:42] <eddyb> let me rephrase that: rustc built with my changes fails while building libsyntax
[11:06:07] *** Joins: cgaebel (clark@moz-F9D89110.nyc.res.rr.com)
[11:09:37] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[11:10:11] *** Quits: rcxdude (rcxdude@moz-95175B53.range109-147.btcentralplus.com) (Connection reset by peer)
[11:12:17] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[11:13:27] *** Joins: rcxdude (rcxdude@moz-95175B53.range109-147.btcentralplus.com)
[11:17:05] *** Joins: whitglint (uid15486@moz-31ABA2C0.irccloud.com)
[11:26:03] *** Quits: dmsky (dmsky@moz-FF2573B1.pppoe.spdop.ru) (Input/output error)
[11:27:51] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[11:27:51] *** ChanServ sets mode: +o pnkfelix
[11:34:25] <huon> r? https://github.com/mozilla/rust/pull/13280
[11:35:20] *** Quits: mankyKitty (Instantbir@19559281.CA335678.BC02889B.IP) (Ping timeout)
[11:35:26] <eddyb> oh, heh, I inverted a condition by accident
[11:40:51] *** Quits: rajaram_ (rajaram@47769425.AE842F9B.81C3DAA1.IP) (Ping timeout)
[11:41:02] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[11:41:52] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[11:47:03] *** Quits: huon (huon@moz-EC676DFE.members.linode.com) (Ping timeout)
[11:47:18] *** Joins: huon (huon@moz-EC676DFE.members.linode.com)
[11:48:57] *** flaper87|afk is now known as flaper87
[11:50:09] <flaper87> o/
[11:50:38] <flaper87> eddyb: lol @ "ast_map is currently a forest"
[11:52:18] <eddyb> flaper87: forest == set of trees
[11:52:49] <flaper87> eddyb: i know :D
[11:58:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:00:14] *** Quits: huon (huon@moz-EC676DFE.members.linode.com) (Quit: ZNC - http://znc.in)
[12:00:22] *** Joins: huon (huon@moz-EC676DFE.members.linode.com)
[12:00:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:04:14] *** Quits: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com) (Quit: Leaving)
[12:05:21] *** Parts: huon (huon@moz-EC676DFE.members.linode.com) (Leaving)
[12:05:25] *** Joins: huon (huon@moz-EC676DFE.members.linode.com)
[12:05:25] *** ChanServ sets mode: +o huon
[12:06:26] <eddyb> huon: here goes nothing
[12:06:46] <eddyb> 3s for parsing, wasn't it 5s before?
[12:07:49] <eddyb> aaand I broke check_match so it thinks certain patterns are non-exhaustive :(
[12:08:18] <eddyb> wait, no, 1s previously for parsing? maybe this is too I/O sensitive to measure
[12:08:49] <huon> I don't think it will take a significant portion of 1s to read the (relatively) small number of files our crates have
[12:09:00] <huon> unless you have a super slow HDD
[12:10:07] <huon> nmatsakis: I think I'm missing something, but (other than the vector stuff) it seems your solution in https://github.com/mozilla/rust/issues/11998#issuecomment-39441216 is very similar to that given in https://github.com/mozilla/rust/issues/11998#issuecomment-34136209
[12:10:08] <eddyb> it's not just the HDD, but whatever else is running at the same time
[12:10:20] <eddyb> I remember 5s but I see 1s here
[12:10:22] <huon> nmatsakis: (and implemented in https://github.com/mozilla/rust/pull/13267 , fwiw.)
[12:10:47] <eddyb> yeah, parsing seems to vary between 1 and 5 seconds
[12:10:52] <huon> eddyb: what crate?
[12:10:57] <eddyb> librustc
[12:11:03] <eddyb> (even without my changes)
[12:11:34] <huon> weird
[12:12:19] <huon> I'm pretty stable at 0.6s (but I do have an SSD, which is faster/has lower variance.)
[12:12:52] *** Joins: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com)
[12:13:11] <huon> hum, #[deprecated]'ing all the resizing methods on ~[] doesn't work so well just yet :(
[12:14:34] <huon> (although most crates don't use any of them, which is nice... but libstd definitely has a large collection of well preserved .push's :( .)
[12:20:17] *** Joins: canhtak (canhtak@moz-FE167950.wl.t.ulaval.ca)
[12:28:41] <eddyb> huon: it's probably a waste of time to check memory usage before implementing in-place ;)
[12:28:57] <eddyb> (which I kinda can - at least reusing the heap allocation space when folding)
[12:36:51] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[12:46:44] *** Joins: mawuli (mawuli@2760A9B5.4882C7ED.DE15C958.IP)
[12:48:47] *** Quits: aurynj (Eon@583ABBE5.60FA2E28.B9E25744.IP) (Quit: Leaving)
[12:57:26] <bstrie> are managed pointers completely gone from everywhere?
[12:57:52] <eddyb> bstrie: not yet
[12:57:54] <eddyb> working on it
[12:58:22] <bstrie> what's left to remove? RELEASES.txt lists @str and @[T] and @Trait as gone
[12:58:37] <bstrie> and @self
[12:58:44] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:00:35] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:02:43] <eddyb> bstrie: @T itself
[13:03:17] <eddyb> bstrie: mainly the AST, which I've done
[13:03:23] <eddyb> still have to iron out some issues
[13:03:27] <eddyb> and I really should get going now
[13:04:00] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[13:04:23] *** Joins: rajaram_ (rajaram@F6DCF16F.85A00DA3.BE4CF869.IP)
[13:06:32] <bstrie> eddyb: yes, hurry and finish removing @T so that it can make it into the 0.10 release today! :)
[13:08:00] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[13:13:48] *** Quits: canhtak (canhtak@moz-FE167950.wl.t.ulaval.ca) (Quit: canhtak)
[13:19:54] *** Joins: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no)
[13:23:42] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[13:23:57] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[13:24:09] <SiegeLord> I'm under the impression that 0.10 has already been frozen
[13:24:18] *** Joins: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP)
[13:26:41] *** Joins: canhtak (canhtak@moz-FE167950.wl.t.ulaval.ca)
[13:31:58] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[13:32:37] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[13:33:48] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[13:53:47] *** Quits: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com) (Ping timeout)
[13:57:23] *** Quits: mawuli (mawuli@2760A9B5.4882C7ED.DE15C958.IP) (Ping timeout)
[13:58:39] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:00:34] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:02:51] *** Joins: mw (mw@moz-A8185453.adsl.highway.telekom.at)
[14:10:39] *** Joins: mawuli (mawuli@2760A9B5.4882C7ED.DE15C958.IP)
[14:13:52] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[14:13:52] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[14:14:09] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[14:14:10] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[14:15:51] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[14:15:54] *** Quits: rajaram_ (rajaram@F6DCF16F.85A00DA3.BE4CF869.IP) (Ping timeout)
[14:16:10] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[14:17:40] <pnkfelix> so, I'm trying to improve my own workflow
[14:17:50] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[14:17:51] <pnkfelix> by trying to use the stage1 rustc more often
[14:18:01] <pnkfelix> rather than waiting for a full rebuild that often failos
[14:18:10] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[14:18:16] <pnkfelix> but I am surprised by the the results I am getting
[14:19:52] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[14:19:57] <pnkfelix> e.g. doing `make rustc-stage1`, I end up in a state where the binary at `x86_64-apple-darwin/stage1/bin/rustc` is not able to build programs that want use `extern crate rustc;`
[14:20:11] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[14:20:14] <pnkfelix> AFAICT, libstd has been rebuilt, but librustc has not
[14:20:40] <klutzy> ugh, broken dependency?
[14:20:52] <pnkfelix> So I guess my question is: Is this the expected behavior?  I.e. do I need to build all the way to `make rustc-stage2`
[14:21:06] <pnkfelix> in order to employ the librustc library with the `x86_64-apple-darwin/stage1/bin/rustc` binary ?
[14:21:42] <pnkfelix> That certainly sounds counter intuitive.   but I'm having a hell of a time decoding what the intended relationships are here, and what I need to do to make the makefile behave the way *I* was expecting...
[14:22:54] <klutzy> pnkfelix: is it unrelated to check-stageN-blah issue?
[14:23:03] <pnkfelix> klutzy: I believe this is unrelated
[14:23:29] <pnkfelix> klutzy: I'm looking over the output of `make --print-data-base` now, maybe I will actually dissect it this time.
[14:29:25] <pnkfelix> hmm, do the stamp.rustc files (which i believe are stand-in's for the librustc build product itself, due to its auto-generated name), do those stamp.rustc files not have dependencies on .rs source files?  The makefile makes it seem like they should...
[14:31:24] <eddyb> pnkfelix: are you changing deep directories?
[14:31:47] <eddyb> e.g. changing librustc/middle/typeck/check/mod.rs doesn't cause a rebuild
[14:31:54] <pnkfelix> eddyb: this believe this is happening on a clean build
[14:31:59] <eddyb> hmm
[14:32:06] <pnkfelix> eddyb: e.g. `make rustc-stage1` simply doesn't build all the things I expect it to
[14:32:27] <eddyb> like?
[14:32:29] <pnkfelix> eddyb: (which is why I started out by openly wondering out loud whether I was misusing the system)
[14:32:58] <pnkfelix> <pnkfelix> e.g. doing `make rustc-stage1`, I end up in a state where the binary at `x86_64-apple-darwin/stage1/bin/rustc` is not able to build programs that want use `extern crate rustc;`
[14:33:09] <eddyb> that's normal
[14:33:37] <eddyb> stage1 rustc is built using stage0 libraries
[14:33:42] <pnkfelix> eddyb: so I should be using the stage0/bin/rustc to build such programs?  and/or do `make rustc-stage2` first ?
[14:33:56] <eddyb> use the stage0 compiler
[14:34:00] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[14:34:15] *** Quits: lpy (lpy@207F51B2.F09091A8.1348A864.IP) (Connection reset by peer)
[14:34:27] <eddyb> if you want to compile with a current compiler, run make on the appropriate stamp file for the stage2 librustc built by stage1 rustc
[14:34:44] <klutzy> pnkfelix: `make <target>/stage1/lib/rustlib/<target>/lib/stamp.rustc`?
[14:34:46] <klutzy> (yikes!)
[14:34:56] <pnkfelix> eddyb: klutzy: okay, that's probably what I want
[14:35:10] *** Joins: lpy (lpy@207F51B2.F09091A8.1348A864.IP)
[14:35:17] <eddyb> the stage0 compiler is pretty good most of the time
[14:35:54] <pnkfelix> eddyb: yeah for what I'm doing, stage0 would probably suffice.
[14:36:02] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[14:37:15] <eddyb> well, I'm heading off, bye - hope I'll have some time left today to fix up P and maybe make a P (it's been two weeks >_>)
[14:38:03] <eddyb> *PR (heh)
[14:38:24] *** Quits: lpy (lpy@207F51B2.F09091A8.1348A864.IP) (Client exited)
[14:49:18] *** Joins: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP)
[14:54:08] *** Joins: rajaram_ (rajaram@F6DCF16F.85A00DA3.BE4CF869.IP)
[14:55:12] *** Quits: Zr40 (zr40@moz-CCFEAB92.adsl.xs4all.nl) (Quit: leaving)
[14:58:27] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:00:06] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[15:00:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:02:13] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[15:03:16] *** Quits: blank_name (blank_name@5799AF77.3C877FC9.53C6B850.IP) (Ping timeout)
[15:05:47] *** Quits: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP) (Quit: Lost terminal)
[15:09:54] *** Joins: lpy (lpy@1834E2CB.F09091A8.1348A864.IP)
[15:16:13] *** Joins: mudpit (Mibbit@3E3094EC.34458CF2.CC1A2609.IP)
[15:20:02] *** Quits: mudpit (Mibbit@3E3094EC.34458CF2.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:20:36] *** Quits: rajaram_ (rajaram@F6DCF16F.85A00DA3.BE4CF869.IP) (Ping timeout)
[15:21:01] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[15:22:35] *** Parts: mw (mw@moz-A8185453.adsl.highway.telekom.at) ()
[15:28:35] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:31:45] *** Joins: jdm (jdm@FCCEA34F.7672369.D8E68FF6.IP)
[15:36:46] <bvssvni> https://github.com/mozilla/rust/issues/13282
[15:38:29] *** zz_kimundi is now known as kimundi
[15:39:36] *** Joins: edwardw (edwardw@586492D3.E4C8743.30C05AB6.IP)
[15:41:02] *** Joins: rajaram_ (rajaram@F6DCF16F.85A00DA3.BE4CF869.IP)
[15:49:12] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Connection reset by peer)
[15:49:30] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:50:14] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[15:50:57] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[15:52:47] <eddyb> huon: this is cool http://www.cheat-sheets.org/saved-copy/Haskell.Haskell_Cheat_Sheet.pdf
[15:54:20] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[15:54:44] *** flaper87 is now known as flaper87|afk
[16:02:47] <eddyb> acrichto: mmm http://coveralls.io/
[16:04:20] *** Joins: gimpf (gimpf@moz-4BE0FFC0.adsl.highway.telekom.at)
[16:05:23] *** Quits: lpy (lpy@1834E2CB.F09091A8.1348A864.IP) (Client exited)
[16:05:41] <pnkfelix> eddyb: first step would probably be adding gcov support or similar locally, right?
[16:06:06] <eddyb> pnkfelix: cmr & huon played with coverage tools
[16:06:23] <eddyb> and I'm sure at least one or two worked
[16:08:20] *** Joins: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com)
[16:08:55] *** Joins: lpy (lpy@1834E2CB.F09091A8.1348A864.IP)
[16:09:52] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (No route to host)
[16:09:57] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: rcirc on GNU Emacs 24.3.1)
[16:10:46] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[16:11:36] *** Quits: rajaram_ (rajaram@F6DCF16F.85A00DA3.BE4CF869.IP) (Ping timeout)
[16:13:26] *** Quits: canhtak (canhtak@moz-FE167950.wl.t.ulaval.ca) (Quit: canhtak)
[16:15:27] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:16:04] *** Joins: dherman (dherman@moz-C07D5168.p2p.sfo1.mozilla.com)
[16:16:04] *** ChanServ sets mode: +ao dherman dherman
[16:21:57] *** Joins: victorporof_ (victorporo@13F2CEC5.7672369.D8E68FF6.IP)
[16:22:40] *** Quits: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[16:23:08] <eddyb> acrichto: after looking around a bit, it seems we can just reuse travis for this (:D), we just need to run something that outputs lcov coverage data - see https://github.com/cainus/node-coveralls
[16:24:05] <eddyb> huon: ah, I remember this look http://ltp.sourceforge.net/coverage/lcov.php
[16:25:36] *** Quits: lpy (lpy@1834E2CB.F09091A8.1348A864.IP) (Client exited)
[16:26:45] <eddyb> huon: aww :( http://www.ug.it.usyd.edu.au/~hwil7821/rust/kcov/
[16:28:53] <strcat> http://lists.cs.uiuc.edu/pipermail/llvmdev/2014-March/071712.html this would be useful to us for mod/rem/div
[16:29:36] *** Quits: gimpf (gimpf@moz-4BE0FFC0.adsl.highway.telekom.at) (Quit: Leaving.)
[16:30:55] <doomlord_> for a completion tool .. the sticking point is the compiler can't give you a failed ast ? - it thats so could you comment how hard would it be for the community to modify this
[16:31:46] <doomlord_> ^(type aware 'dot completion' .. get the type  of the expression at a certain point, list possible members/methods)
[16:33:09] <eddyb> acrichto: so we'd need to add (optional) kcov support to the build/test system and then add one of coveralls.io tools to upload the data
[16:33:33] <eddyb> doomlord_: I don't think partial parsing has place in the compiler itself
[16:33:58] <eddyb> doomlord_: as it is right now, you can do a lot with dot completion, even if libsyntax can't actually parse your code
[16:34:58] <doomlord_> intruiging - when you say 'can do a lot with dot completion', i was after something that at least could filter member-functions and fields after a dot, that would be better than nothing
[16:35:18] <doomlord_> i realise we have that from plain old tags, but are you saying more than that exists already ?
[16:35:34] <eddyb> you'd have to drive the different parts of the compiler yourself
[16:35:36] <doomlord_> i was wondering about hacks like prioritizing symbols based on the current scopes
[16:35:54] *** Quits: dherman (dherman@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: dherman)
[16:35:58] <eddyb> sure, resolution already works like that
[16:36:15] <eddyb> doomlord_: there are bigger issues, if you enable "passes" here you can see that it takes quite a lot of time before type checking http://huonw.github.io/isrustfastyet/mem/
[16:36:19] <doomlord_> 'drive the different parts' - create a partial AST yourself and pass that to the next stage?
[16:36:44] <eddyb> also invoke type checking on small parts of the AST
[16:37:40] <eddyb> you'd most likely work with functions and only redo entire modules/crates if function's types themselves changed or functions are added/removed etc.
[16:38:26] <doomlord_> dot completion is main thing keeping me in C++ in my own pet project world (besides c++ libraries and what the rest of the world demands)
[16:39:11] <eddyb> as long as you have something on the left side of the dot that you can get a type for, you're set
[16:39:35] <eddyb> doomlord_: in librustc/middle/typeck/check/mod.rs, search for ExprField and ExprMethodCall
[16:40:54] <doomlord_> i wonder how HN type inference impacts dot completion ..does dot completion have more synergy with forward inference (of course we can just write more types explicitely to drive it..)
[16:41:15] <strcat> methods have less synergy with type inference than functions
[16:41:24] <strcat> with functions, you're using functions giving type hints all over the place
[16:41:25] *** Joins: ecr (chatzilla@7C463196.5BB0586B.11F8506F.IP)
[16:41:31] <eddyb> doomlord_: HM you mean?
[16:41:37] <doomlord_> yes sorry :)
[16:41:39] <strcat> foo(x) // the compiler learns the type of `x` as long as this isn't generic
[16:41:48] <strcat> x.foo() // the compiler must know the type of `x` to figure out what to call
[16:41:58] <strcat> methods are still usually less painful
[16:42:04] <strcat> since you don't have to specify a path
[16:42:17] <doomlord_> i supose the inference is mostly doing the work of generic params
[16:42:40] <eddyb> the way our method lookup works...
[16:42:52] <doomlord_> are you aware of anyone actually having done dotcompletion for rust yet
[16:43:26] <eddyb> I was surprised to see, in the debug output, that calling a method `foo` on a known type gathers pretty much all the methods ever named `foo`
[16:43:56] <doomlord_> before it filters to the right one ?
[16:43:59] <eddyb> yeah
[16:44:10] <eddyb> you need more than just partial AST
[16:44:30] <doomlord_> partial AST and 'resolve',  'typecheck' ?
[16:44:32] <eddyb> our type system should allow for incomplete types, as long as you prevent errors
[16:44:51] <doomlord_> unknown type-params ?
[16:44:57] <eddyb> doomlord_: let x;
[16:45:03] <eddyb> rusti: let _x;
[16:45:04] -rusti- <anon>:11:13: 11:15 error: cannot determine a type for this local variable: unconstrained type
[16:45:04] -rusti- <anon>:11         let _x;
[16:45:04] -rusti-                       ^~
[16:45:04] -rusti- error: aborting due to previous error
[16:45:04] -rusti- playpen: application terminated with error code 101
[16:45:25] <eddyb> unconstrained, that's the word I was looking for
[16:45:51] <eddyb> doomlord_: you should display a warning (at the declaration site, I'd guess), but not error outright
[16:45:57] <doomlord_> is it true rusts compiler has enough to do full whole program HM (and types are required for maintaibility, 'type inference does not scale well..')
[16:46:11] <eddyb> doomlord_: is that a question?
[16:46:17] <doomlord_> yes
[16:46:31] <doomlord_> ( but its tangential )
[16:46:32] <eddyb> it wouldn't fly IMO
[16:46:49] <eddyb> closures do have cross-function inference
[16:46:55] <strcat> doomlord_: graydon was against top-level type inference from the start
[16:47:02] <strcat> it's not there because it's viewed as a bad thing
[16:47:05] <eddyb> but it's not full inference
[16:47:25] <strcat> in haskell it's bad code style to define top-level functions without signatures anyway
[16:47:31] <strcat> so why not leave it out...
[16:47:49] *** Joins: dherman (dherman@moz-C07D5168.p2p.sfo1.mozilla.com)
[16:47:49] *** ChanServ sets mode: +ao dherman dherman
[16:47:58] <eddyb> doomlord_: what I'm trying to say is that, even if we weren't against it, it wouldn't just work from the start
[16:48:09] <doomlord_> i've definitely heard the argument against it (supposedly makes error messages puzzing in haskell). i think the way rust does it is good, it only hits you when you try to break up large functions (well, dont write large functions inthe first place)
[16:48:29] <eddyb> unless, hmm, you make the entire crate an inference context
[16:48:40] <eddyb> good luck getting that to fly
[16:48:48] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[16:48:48] <ghrust> [13rust] 15alexcrichton 04force-pushed 06try from 14bd0edcb to 14bb0d15b: 02http://git.io/k471pw
[16:48:48] <ghrust> 13rust/06try 14bb0d15b 15Alex Crichton: an attempt
[16:48:48] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[16:48:58] <eddyb> doomlord_: use closures
[16:49:09] <eddyb> or macros
[16:49:32] <eddyb> rusti: let x = Default::default(); x
[16:49:32] <doomlord_> anyway back to completion. i'm sounding adhd
[16:49:36] -rusti- pastebinned 11 lines of output: http://ix.io/bse
[16:49:47] <eddyb> hmpf
[16:50:43] <eddyb> rusti: trait Foo {fn foo() -> Self;} impl Foo for char {fn foo() -> char {'Z'}} let x = foo(); x
[16:50:44] -rusti- <anon>:11:90: 11:93 error: unresolved name `foo`.
[16:50:44] -rusti- <anon>:11         trait Foo {fn foo() -> Self;} impl Foo for char {fn foo() -> char {'Z'}} let x = foo(); x
[16:50:44] -rusti-                                                                                                    ^~~
[16:50:45] -rusti- error: aborting due to previous error
[16:50:45] -rusti- playpen: application terminated with error code 101
[16:50:49] <eddyb> rusti: trait Foo {fn foo() -> Self;} impl Foo for char {fn foo() -> char {'Z'}} let x = Foo::foo(); x
[16:50:49] -rusti- <anon>:11:90: 11:98 error: cannot determine a type for this bounded type parameter: unconstrained type
[16:50:50] -rusti- <anon>:11         trait Foo {fn foo() -> Self;} impl Foo for char {fn foo() -> char {'Z'}} let x = Foo::foo(); x
[16:50:52] -rusti-                                                                                                    ^~~~~~~~
[16:50:55] -rusti- playpen: application terminated with error code 101
[16:50:59] <SimonSapin> rusti: " a  b".split(' ').to_owned_vec()
[16:51:03] -rusti- pastebinned 11 lines of output: http://ix.io/bsf
[16:51:05] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (No route to host)
[16:51:09] <eddyb> wait, hmmm. these examples aren't exactly easy :/
[16:51:32] <SimonSapin> rusti: " a  b".split(' ')
[16:51:40] -rusti- pastebinned 8 lines of output: http://ix.io/bsg
[16:51:46] <eddyb> rusti: trait Foo {fn foo() -> Self;} impl<T> Foo for Vec<T> {fn foo() -> Vec<T> {Vec::new()}} let x: Vec<_> = Foo::foo(); x
[16:51:46] -rusti- <anon>:11:112: 11:120 error: cannot determine a type for this bounded type parameter: unconstrained type
[16:51:47] -rusti- <anon>:11         trait Foo {fn foo() -> Self;} impl<T> Foo for Vec<T> {fn foo() -> Vec<T> {Vec::new()}} let x: Vec<_> = Foo::foo(); x
[16:51:47] -rusti-                                                                                                                          ^~~~~~~~
[16:51:47] -rusti- playpen: application terminated with error code 101
[16:52:02] <eddyb> rusti: trait Foo {fn foo() -> Self;} impl<T> Foo for Vec<T> {fn foo() -> Vec<T> {Vec::new()}} let mut x: Vec<_> = Foo::foo(); x.push('Z'); x
[16:52:04] -rusti- [Z]
[16:52:18] <eddyb> doomlord_: so, here the method completes the type of x
[16:52:20] <SimonSapin> rusti: " a  b".split(' ').collect::<~[_]>()
[16:52:21] -rusti- <anon>:11:9: 11:45 error: cannot determine a type for this bounded type parameter: unconstrained type
[16:52:21] -rusti- <anon>:11         " a  b".split(' ').collect::<~[_]>()
[16:52:21] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[16:52:21] -rusti- playpen: application terminated with error code 101
[16:52:33] <eddyb> doomlord_: you should be able to dot-complete push without that information
[16:52:39] <SimonSapin> rusti: " a  b".split(' ').collect::<~[&str]>()
[16:52:40] -rusti- [, a, , b]
[16:52:54] <SimonSapin> rusti: " a    b".split(' ').collect::<~[&str]>()
[16:52:55] -rusti- [, a, , , , b]
[16:53:18] <eddyb> SimonSapin: do you want split(/\s+/)?
[16:53:33] <SimonSapin> eddyb: something like it, yes
[16:53:41] <eddyb> SimonSapin: there might be something taking a predicate
[16:53:51] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[16:53:51] <ghrust> [13rust] 15alexcrichton 04force-pushed 06try from 14bb0d15b to 14330e696: 02http://git.io/k471pw
[16:53:51] <ghrust> 13rust/06try 14330e696 15Alex Crichton: an attempt
[16:53:51] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[16:53:51] <strcat> split takes a predicate
[16:53:58] <strcat> but it splits on chars
[16:54:22] <SimonSapin> strcat: predicate on a single char?
[16:54:24] <eddyb> I know kimundi wanted a fancy API for string matching but that didn't work for some reason
[16:54:26] <strcat> rusti: " a    b".split(' ').filter(|x| !x.is_empty()).collect::<~[&str]>()
[16:54:27] -rusti- [a, b]
[16:54:39] <strcat> SimonSapin: yes
[16:54:48] <strcat> rusti: " a    b".split(|x| x == ' ').filter(|x| !x.is_empty()).collect::<~[&str]>()
[16:54:50] -rusti- pastebinned 7 lines of output: http://ix.io/bsh
[16:55:02] <strcat> rusti: " a    b".split(|x: char| x == ' ').filter(|x| !x.is_empty()).collect::<~[&str]>()
[16:55:03] -rusti- [a, b]
[16:55:14] <SimonSapin> .split(' ').filter(|x| !x.is_empty()) is probably the best we can do
[16:55:14] <doomlord_> have i interpretted what you said right:   Basically precisely because you have HM inferernce, its actually valid to 'dot complete' without knowing types, since its the actual funcitons you write that propogate the types back.
[16:55:18] <strcat> would be nice if type inference wasn't broken in all these subtle ways
[16:55:21] <SimonSapin> thanks strcat 
[16:56:21] <doomlord_> "what type is it" , "its a type you can push to, and will eventually return what the next thing takes.."
[16:56:30] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:56:51] <eddyb> doomlord_: you can even give inference variables nice names :D
[16:57:01] <eddyb> like push(T) -> T
[16:57:20] <eddyb> (on Vec<T> where T is an inference variable)
[16:57:50] <eddyb> doomlord_: and no, I'm not aware of anyone doing this "the proper way", it's not the easiest thing in the world, but I do think I know enough to implement something (if I had the time)
[16:58:30] <doomlord_> i was going to ask if the core team might have time to just document possible ways of doing it so the community can do it easier
[16:59:08] <eddyb> I'm not aware of anyone else having toyed with a design
[16:59:17] <eddyb> doomlord_: but you should keep asking around
[16:59:51] <eddyb> doomlord_: btw, you can actually express arbitrary partial ASTs, at least in certain contexts ;)
[17:00:03] <eddyb> doomlord_: using macros to stash away raw tokens :P
[17:00:59] <doomlord_> the other 'assist' i might try is 'see definition of' for struct members, and searching for nested elements for fields it couldn't find
[17:01:44] <eddyb> doomlord_: I'm focusing on improving the compiler itself because you can't really claim you're a Rust IDE without providing a decent experience for working on librustc itself
[17:01:58] <eddyb> (itself one too many times)
[17:02:22] <doomlord_> right, the core compiler is much more important
[17:02:25] <eddyb> 500MB usage of RAM is not acceptable
[17:02:36] <eddyb> especially when that is persistent
[17:03:00] <doomlord_> heh - would sized enum variants help :)
[17:03:08] <eddyb> sized?
[17:03:15] <eddyb> you mean, allocate-what-you-need?
[17:03:32] <doomlord_> i mean a DST enum i guess, yes alloc what you need... immutable enum variant without padding
[17:04:16] <doomlord_> efficienciecy.. i guess thats why there was a big drive to de-@
[17:05:00] <eddyb> doomlord_: we need more things like https://gist.github.com/eddyb/20fb641bc5e3794049da
[17:05:18] <eddyb> we need to really start optimizing based on real data and not on whims
[17:05:48] *** Quits: intuxicated (intuxicate@DA764973.CCE86723.BD3E1BB3.IP) (Ping timeout)
[17:06:13] <eddyb> doomlord_: those stats say that you can increase the cost of ty_closure & ty_trait as they are not really significant
[17:06:24] <eddyb> doomlord_: while ty_struct should be kept as efficient as possible
[17:07:09] <eddyb> doomlord_: but not only that. it also says that 90% of the types contains inference variables and as such is only useful within a certain function - i.e. garbage we shouldn't be dragging along
[17:08:08] <eddyb> doomlord_: I want something similar for the AST, with indirect costs (vectors' allocations) and whatnot. the Weight trait idea which showed up in an unrelated issue would make this so easy
[17:08:25] <doomlord_> ok so you're saying its keeping a lot around that could be discarded temporaries
[17:09:14] <eddyb> yupp. was surprised when I saw that data
[17:09:37] <doomlord_> might it have been relying on @ gc originally to discard
[17:10:02] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:10:11] *** Quits: Kxepal (Miranda@moz-B69B305D.pppoe.mtu-net.ru) (Ping timeout)
[17:10:11] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[17:10:11] <ghrust> [13rust] 15alexcrichton 04force-pushed 06try from 14330e696 to 146325af7: 02http://git.io/k471pw
[17:10:11] <ghrust> 13rust/06try 146325af7 15Alex Crichton: an attempt
[17:10:11] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[17:10:28] *** Quits: dherman (dherman@moz-C07D5168.p2p.sfo1.mozilla.com) (Ping timeout)
[17:11:45] *** Joins: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[17:11:45] *** ChanServ sets mode: +ao dherman dherman
[17:12:08] <eddyb> doomlord_: that stuff is in an interner, so no, it can't be discarded easily
[17:12:12] *** Joins: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP)
[17:12:13] <doomlord_> so i guess multiple 'hacks'  to fill the gap i have with dot completion would be the way to go, for me..   some more 'ask the compiler' style error messages,  and actually getting emacs to filter completion after a "dot" to just methods and members
[17:12:30] <doomlord_> ^ and try to sort completions based on the current scope..
[17:13:06] <doomlord_> it might be that scopes and having wrote type bounds do some of the work..
[17:13:30] <doomlord_> 'racer' looked interesting, i wonder if thats progressing
[17:14:05] *** Joins: mib_k4yyln (Mibbit@3E3094EC.34458CF2.CC1A2609.IP)
[17:14:28] *** Joins: Kxepal (Miranda@moz-73B536A.pppoe.mtu-net.ru)
[17:14:57] *** Quits: mib_k4yyln (Mibbit@3E3094EC.34458CF2.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:15:54] <doomlord_> i suspect 'dot completion' is the main (or even only) benefit of so called 'OOP'
[17:16:16] <doomlord_> it *is* very useful (imo)
[17:17:51] *** Quits: japaric_ (japaric@6595D537.7EF11808.5C7588CA.IP) (Ping timeout)
[17:19:14] *** Joins: japaric_ (japaric@96A6B723.A8462175.F29ED47E.IP)
[17:22:02] *** Joins: intuxicated (intuxicate@437F2EC4.5F0D1BE1.BD3E1BB3.IP)
[17:29:29] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[17:29:29] *** ChanServ sets mode: +o pnkfelix
[17:30:05] *** Quits: Kxepal (Miranda@moz-73B536A.pppoe.mtu-net.ru) (Quit: Kxepal)
[17:30:22] *** Joins: Kxepal (Miranda@moz-73B536A.pppoe.mtu-net.ru)
[17:30:56] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:32:12] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[17:32:12] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/gxjgsw
[17:32:12] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[17:35:01] *** Joins: canhtak (canhtak@moz-9F7DB66C.wl.t.ulaval.ca)
[17:37:00] *** Joins: blank_name (blank_name@B722FFEC.940B1E75.6D228269.IP)
[17:37:07] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[17:37:07] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/GA8Qbw
[17:37:07] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[17:37:40] <erickt> wow, MS just released their C# compiler under an apache 2.0 license: http://roslyn.codeplex.com/SourceControl/latest#License.txt
[17:38:20] <erickt> I wonder if that means we can use their flattening-generators-into-a-state-machine patent?
[17:42:06] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[17:42:06] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/GA8Qbw
[17:42:06] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[17:42:07] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[17:42:07] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/L9Mrsw
[17:42:07] <ghrust> 13rust/06auto 145b2c326 15Liigo Zhuang: libtest: rename `BenchHarness` to `Bencher`...
[17:42:07] <ghrust> 13rust/06auto 14e55b117 15bors: auto merge of #13236 : liigo/rust/rename-benchharness, r=huonw...
[17:42:08] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[17:42:11] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[17:51:55] <acrichto> cmr: https://github.com/mozilla/rust/pull/13285
[17:52:03] <acrichto> that may be why it never found the windows libc dll
[17:52:16] <acrichto> I kept getting very disturbing logs about the strings being not utf8
[17:52:22] <acrichto> and I'm praying it's b/c they're not null terminated
[17:52:26] <acrichto> http://buildbot.rust-lang.org/builders/try-win/builds/948/steps/compile/logs/stdio
[17:55:31] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[17:55:31] *** ChanServ sets mode: +qo brson brson
[17:56:05] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[17:58:37] <brson> acrichto: i'm wondering if we have to worry about the website recommending nightly while 0.10 is released. nightly is going to be '0.10-pre-nightly' for at least another day
[17:58:57] <acrichto> brson: we should continue to recommend nightly
[18:00:06] <brson> verifying sigs
[18:00:27] <brson> acrichto: do we need to disclaim that in the announce?
[18:00:45] <acrichto> that we're recommending nightlies?
[18:00:57] <brson> yeah
[18:01:06] <acrichto> I would guess no
[18:01:11] <acrichto> but perhaps I should add a sentence
[18:01:25] <acrichto> but that also defeats the purpose of point releases kinda
[18:01:54] <brson> maybe it's fine. i'm just worried about what happens when somebody goes to dl rust and finds that they have an *older* version than the new release
[18:02:10] <brson> yeah, let's just do it and see what happens
[18:09:06] *** Quits: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[18:16:45] <mcpherrin> It seems important to me that the nightly >= release
[18:17:09] <kimundi> well, they will be, right?
[18:18:00] <kimundi> just ad a little blurb saying that because of infrastructure foo, the nightlies are currently older than the release, but will catch up soon.
[18:20:55] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[18:20:55] <ghrust> [13rust] 15alexcrichton tagged 060.10 at 14ac33f2b: 02http://git.io/PIAa5A
[18:20:55] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[18:21:04] <brson> \o/
[18:21:33] <kimundi> woho ?o/
[18:21:45] <edwardw> \o/
[18:23:40] <brson> pushed the website. will try to update the example to fibo sometime today
[18:24:26] <brson> gj acrichto
[18:24:33] <acrichto> wooo
[18:24:42] <acrichto> gj everyone :)
[18:25:07] <eddyb> http://www.rust-lang.org/install.html hmm, no android nightlies?
[18:25:15] <brson> eddyb: nope
[18:25:45] <eddyb> brson: should I expect more archtectures/platforms showing up in the future?
[18:26:06] <eddyb> s/I/we
[18:26:11] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:26:22] <brson> eddyb: in the infinite expanse of the future, yes
[18:26:50] <pnkfelix> brson: acrichto: \o/
[18:27:33] <brson> eddyb: not soon, I think. Linux/Mac/Win are still the only platforms with first-tier status
[18:27:40] <brson> i know there's some demand
[18:29:00] <pnkfelix> acrichto: brson: BTW, it seemed like there were a lot of buildbot failures on android over last 12-24 hours or so; was anything up, or am I just imagining things?
[18:29:12] <acrichto> pnkfelix: the android bot was having problems
[18:29:20] <acrichto> a restart and a few kicks seems to have brought it back in line
[18:29:30] <acrichto> one PR landed, so I think it's all good to go again
[18:29:34] <pnkfelix> acrichto: okay, good to hear
[18:29:43] <acrichto> one of the emulators turned into a zombie, and adb doesn't like having two emulators active
[18:30:52] *** Joins: andrew-d_w (andrew-d_w@E04ADC0E.9DFA657C.CC0301A2.IP)
[18:31:15] *** Quits: andrew-d_w (andrew-d_w@E04ADC0E.9DFA657C.CC0301A2.IP) (Input/output error)
[18:31:37] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[18:32:08] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[18:32:08] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14e55b117 to 146f1c06d: 02http://git.io/N3iJvQ
[18:32:08] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[18:32:09] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[18:32:09] <ghrust> [13rust] 15bors pushed 4 new commits to 06auto: 02http://git.io/vy_5jg
[18:32:09] <ghrust> 13rust/06auto 142cddd68 15Felix S. Klock II: Avoid injecting unfulfilled dependence in compiletest on libnative.
[18:32:09] <ghrust> 13rust/06auto 143cbd98e 15Felix S. Klock II: Two fixes to get `make check-stage1` working....
[18:32:09] <ghrust> 13rust/06auto 14a2bae86 15Felix S. Klock II: Fix android problems with newly fixed rpass-full variable definition....
[18:32:11] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[18:38:00] *** Joins: dmsky (dmsky@moz-FF2573B1.pppoe.spdop.ru)
[18:39:25] <mcpherrin> I'm not sure how I feel about the sample program on the rust-lang homepage
[18:39:53] <mcpherrin> mostly, I feel like it's a wierd program.
[18:39:54] <brson> mcpherrin: it's not great
[18:40:04] <brson> yeah, it makes you think, but not about rust - about what it even is
[18:40:09] <brson> trying to replace with fixo
[18:40:11] <brson> *fibo
[18:40:21] <mcpherrin> Fibo?
[18:40:43] <brson> fibonacci
[18:40:48] <mcpherrin> oh, sure
[18:44:01] <strcat> brson: imo you should say 'message passing' and 'shared memory without data races' instead of just concurrency
[18:44:24] <strcat> brson: because there's a widespread misunderstanding that we don't have shared memory (at least in safe code) and it's one of the neat features
[18:47:14] <acrichto> brson: mind if I take over the removal of check-fast?
[18:50:48] <pnkfelix> brson: please not fib
[18:50:58] <pnkfelix> brson: (i'll think about other options)
[18:51:31] *** Quits: acrichto (acrichto@moz-B63D64BD.res.cmu.edu) (Quit: leaving)
[18:51:38] *** Joins: acrichto (acrichto@moz-B63D64BD.res.cmu.edu)
[18:51:38] *** ChanServ sets mode: +o acrichto
[18:52:00] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[18:52:00] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:52:12] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[18:52:55] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[18:52:55] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:53:23] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[18:53:43] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[18:53:43] *** ChanServ sets mode: +ao pcwalton pcwalton
[19:00:21] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[19:00:25] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[19:00:25] *** ChanServ sets mode: +o pnkfelix
[19:01:59] *** Joins: tikue (tkuehn@CB7FC854.FAD414BA.D74CC41D.IP)
[19:06:35] <brson> acrichto: sure
[19:06:41] <brson> pnkfelix: ok, you're on it
[19:08:59] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:11:55] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[19:12:37] <brson> bbl
[19:12:52] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[19:14:20] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[19:14:25] *** Joins: lkuper (lkuper@moz-AD4C50F5.dhcp-bl.indiana.edu)
[19:14:27] *** Quits: lkuper (lkuper@moz-AD4C50F5.dhcp-bl.indiana.edu) (Quit: lkuper)
[19:16:59] *** Joins: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP)
[19:16:59] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1419de6b8 to 146f1c06d: 02http://git.io/N3iJvQ
[19:16:59] *** Parts: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP) ()
[19:17:00] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[19:17:00] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/eq8gkg
[19:17:00] <ghrust> 13rust/06auto 14cd7b39d 15Alex Crichton: syntax: Remove AbiSet, use one Abi...
[19:17:00] <ghrust> 13rust/06auto 144982344 15bors: auto merge of #13263 : alexcrichton/rust/no-abi-set, r=cmr...
[19:17:01] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[19:21:21] *** Joins: tjc (tjc@moz-6EC1EC93.hsd1.ca.comcast.net)
[19:21:21] *** ChanServ sets mode: +o tjc
[19:26:39] *** Quits: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: dherman)
[19:27:01] *** Joins: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP)
[19:27:41] *** Quits: victorporof_ (victorporo@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[19:33:44] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[19:37:11] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[19:37:32] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[19:38:38] *** Joins: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[19:38:38] *** ChanServ sets mode: +ao dherman dherman
[19:39:12] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[19:39:50] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:42:24] *** Joins: ktt3ja (ktt3ja@moz-8D2A07E1.hsd1.va.comcast.net)
[19:54:25] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[19:54:25] *** ChanServ sets mode: +ao pcwalton pcwalton
[19:57:16] <bstrie> agh, the tutorial still mentions managed pointers
[19:57:19] <bstrie> terrible
[19:58:27] *** Quits: mawuli (mawuli@2760A9B5.4882C7ED.DE15C958.IP) (Ping timeout)
[19:58:45] *** Joins: mawuli (mawuli@2760A9B5.4882C7ED.DE15C958.IP)
[20:01:34] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[20:01:58] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[20:02:31] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[20:02:31] *** ChanServ sets mode: +o pnkfelix
[20:03:51] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[20:03:51] *** ChanServ sets mode: +qo brson brson
[20:03:53] *** Joins: victorporof_ (victorporo@13F2CEC5.7672369.D8E68FF6.IP)
[20:04:40] *** Quits: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[20:06:55] *** Quits: dmsky (dmsky@moz-FF2573B1.pppoe.spdop.ru) (Quit: Leaving...)
[20:06:59] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[20:06:59] <ghrust> [13rust] 15bors 04force-pushed 06auto from 144982344 to 146f1c06d: 02http://git.io/N3iJvQ
[20:06:59] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[20:07:02] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[20:07:03] <ghrust> [13rust] 15bors pushed 1 new commit to 06auto: 02http://git.io/yk_gyA
[20:07:03] <ghrust> 13rust/06auto 14b722f3e 15bors: auto merge of #13286 : alexcrichton/rust/release, r=brson...
[20:07:03] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[20:10:22] <bstrie> acrichto: there's a question as to the rationale of switching from libnative to libgreen by default. any insight into why the change was made?
[20:12:25] <strcat> you mean from libgreen to libnative?
[20:12:49] <strcat> there's a whole mailing list thread about it https://mail.mozilla.org/pipermail/rust-dev/2013-November/006550.html
[20:13:32] <cmr> pnkfelix: I also got that a few times (is_utf8(v) failing)
[20:13:57] <cmr> erm
[20:14:02] <cmr> acrichto: ^
[20:14:25] <acrichto> cmr: https://github.com/mozilla/rust/pull/13285
[20:14:40] <cmr> reviewing, nice catch
[20:14:44] <cmr> (also thanks <3)
[20:14:54] *** Quits: rcxdude (rcxdude@moz-95175B53.range109-147.btcentralplus.com) (Ping timeout)
[20:15:03] <acrichto> well
[20:15:05] <acrichto> I hope it catches it
[20:15:08] <acrichto> I'm not 100% certain
[20:15:32] <acrichto> bstrie: to what degree would you like the rationale? sentence/paragraph/page/etc
[20:15:32] <cmr> it's plausible regardless
[20:17:30] *** Joins: rcxdude (rcxdude@moz-9D9E84CB.range86-130.btcentralplus.com)
[20:17:33] <strcat> ick
[20:17:39] <strcat> we still \0-terminate our string constants
[20:18:04] <eddyb> strcat: you mean \00 :P
[20:19:39] <bstrie> strcat: that was so long ago that I wasn't sure if the arguments still stood. was expecting something more recent or data-driven
[20:20:07] <strcat> bstrie: it won't change
[20:21:00] <strcat> they use the same stack size, one has explicit yields and the other also has fair scheduling / preemption with a chosen kernel scheduler
[20:22:06] <strcat> although on windows 1:1 just means the kernel is aware of it, since it supports user-mode scheduling
[20:22:32] <strcat> I don't think there's really anything but disadvantages to M:N vs. user-mode scheduling
[20:22:46] <strcat> M:N blocks on page faults and blocking syscalls, user-mode scheduling doesn't
[20:23:09] <strcat> and user-mode scheduling still has support for the normal fast TLS, etc.
[20:25:45] <strcat> eddyb: wrong parameter passed to this LLVM function
[20:26:16] <cmr> oh wow 0.10 is out
[20:26:31] <strcat> it's also in the arch repos already ;p
[20:30:40] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.3.1)
[20:31:33] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[20:32:35] <brson> curse github search
[20:37:27] *** Joins: Nekit1234007 (Nekit12340@2ACCBB7E.40F9C55F.4707F662.IP)
[20:37:40] <larsberg> brson: what, just because it won't search the wiki pages, match exact strings even when quoted, sort by relevance for more than one search term... I mean, what do you expect? :-)
[20:38:03] *** Quits: Nekit1234007_ (Nekit12340@20A0F3C5.4E33471C.3E736995.IP) (Ping timeout)
[20:40:30] <nrc> curse the rest of GitHub too
[20:41:22] <nrc> nmatsakis: ping - I need some info about flaper87|afk 's work on the built-in bounds stuff - are you up to date with that?
[20:41:44] <nmatsakis> nrc: I've not read much actual code, but we did draft a plan together
[20:43:12] <nrc> nmatsakis: maybe that is enough :-) I believe he was extending checking of built-in bounds, did that include to the checking of bounds on traits in impls and super-traits?
[20:43:47] * eddyb flails arms around the room
[20:43:59] <eddyb> nmatsakis: I broke something in check_match and I can't tell what :|
[20:44:17] <eddyb> librustc/middle/typeck/infer/region_inference/mod.rs:539:9: 602:10 error: non-exhaustive patterns: ReFree not covered
[20:44:28] <eddyb> librustc/middle/typeck/infer/region_inference/mod.rs:640:9: 700:10 error: non-exhaustive patterns: ReFree not covered
[20:44:42] <eddyb> nmatsakis: ^^ that's the only two errors it produces
[20:45:09] <huon> eddyb: I'd guess it's unlikely that anyone can assist you without seeing the code :)
[20:45:13] <eddyb> now, even if it was incorrect previously (which I doubt), I wouldn't expect there to be any difference at all
[20:45:25] <eddyb> huon: I can't even tell what does what
[20:46:07] <eddyb> I've only changed @ with P and &, and used more iterators instead of appending vectors
[20:46:22] <nmatsakis> nrc: hmm, I don't know for sure, I'm not sure just what checks you mean, are you referring to a specific issue 3?
[20:46:25] <nmatsakis> nrc: er, issue #
[20:46:56] <eddyb> huon: I am hoping nmatsakis knows what generates that error :S
[20:47:05] <nmatsakis> eddyb: sorry, check_match -- now that is some code I still don't really grok at all. Been meaning to read the referenced paper one of these days.
[20:47:15] <huon> eddyb: I'd guess it's a slight mistranslation of the iterator stuff
[20:47:24] <eddyb> huon: I re-checked all that stuff
[20:47:45] <nmatsakis> eddyb: I can certainly check quickly to tell you if I think the errors are legit
[20:47:49] <nmatsakis> but I doubt it
[20:47:53] <strcat> larsberg: I'd settle for it just sorting pull request commits in the right order
[20:47:57] <eddyb> nmatsakis: thanks
[20:48:29] <nrc> nmatsakis: no, no issue # - so if you `impl<X> T<X> ...` where `trait T<Z: Send>...` that currently passes. I would like it not to for the unsized checks, I wonder if flaper87|afk is doing that for his stuff, or if I need to special case it
[20:48:51] <huon> eddyb: you've got all the conditions the correct way around, etc.?
[20:48:57] <larsberg> strcat: I wish it would also search the diff. I frequently want to know "what did OldStructName become", but searching for OldStructName will only fire if it's mentioned in the issue text. (that's a large part of why I have to ask in #rust-internals all the time)
[20:49:06] <eddyb> huon: that's what broke format, heh
[20:49:18] <eddyb> huon: let me get side-by-side
[20:49:25] <nmatsakis> nrc: I see. I would say that it doesn't obviously follow, though I feel like I saw a PR for this 
[20:49:32] <eddyb> since this chunked stuff is terrible
[20:49:36] <nmatsakis> nrc: I was reviewing it but probably never finished, one sec
[20:50:00] <eddyb> git difftool... doesn't error, it just does nothing
[20:50:14] <nmatsakis> grr how I hate github's PR management
[20:50:22] <eddyb> huon: can I check out a file at a different location? actually, no, I've got this :D
[20:50:47] <huon> `git diff foo.rs HEAD^:foo.rs` iirc
[20:50:59] <huon> well, I guess you don't want to use git's diff.
[20:51:07] <nmatsakis> nrc: so there was this https://github.com/mozilla/rust/pull/13228
[20:51:22] <nmatsakis> nrc: it basically looks ok, but ugly, in that it mixes code across phases
[20:51:28] <nmatsakis> nrc: but as part of the plan flaper87|afk and I drew up,
[20:51:40] <nmatsakis> nrc: that checking would prob move into vtable anyway, so it wouldn't be so ugly then
[20:51:41] <acrichto> brson: there's a "bastion" host on AWS, but I can't seem to ssh into it, how do you access the bots?
[20:51:54] <bstrie> brson: oooooooh, well done on the new rust-lang.org. it's very nice. who's responsible for it?
[20:52:02] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[20:52:02] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14b722f3e to 146f1c06d: 02http://git.io/N3iJvQ
[20:52:02] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[20:52:04] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[20:52:04] <ghrust> [13rust] 15bors pushed 1 new commit to 06auto: 02http://git.io/3aG85g
[20:52:04] <ghrust> 13rust/06auto 14bb31cb8 15bors: auto merge of #13286 : alexcrichton/rust/release, r=brson...
[20:52:04] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[20:52:13] <acrichto> bstrie: brson did about 90% of it :)
[20:52:17] <eddyb> huon: checked out the two versions and ran kdiff3 :D
[20:52:31] <nmatsakis> nrc: it still doesn't feel...100% right, but I do hope to rewrite that vtable code more-or-less from scratch soon. I'm hoping to implement my new method matching / vtable algorithm as my "coming back to Rust" project
[20:52:45] <nmatsakis> nrc: anyway so I was debating whether to r+ for those above reasons but then forgot to decide ;)
[20:52:59] <eddyb> oh this is lovely :D
[20:53:21] <nmatsakis> brson: oh, I didn't see that the new rust-lang went live, looking good
[20:53:35] *** Quits: tjc (tjc@moz-6EC1EC93.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[20:54:07] <nmatsakis> brson: what do you think of "s/Rust is still experimental/Rust is a work-in-progress/" or something?
[20:54:15] <nmatsakis> eh.
[20:54:50] <brson> acrichto: the bastion host's routing isn't configured correctly
[20:55:10] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Connection reset by peer)
[20:55:16] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[20:55:25] <brson> nmatsakis: it implies that in the footnote, but I can put it somewhere else
[20:55:40] <brson> i guess the footnote isn't that obvious
[20:55:56] <nmatsakis> brson: no I meant as a change to footnote text
[20:56:10] <bstrie> brson: I like the footnote
[20:56:14] <cmr> I tweeted michael and now we have http://www.phoronix.com/scan.php?page=news_item&px=MTY1NDI
[20:56:14] <nmatsakis> brson: just thinking that in principle we're going to hvae to stop saying we're experimental at some point 
[20:56:20] <nmatsakis> :)
[20:56:23] <brson> nmatsakis: oh, i see
[20:56:27] <brson> yeah i can do that
[20:56:37] <nmatsakis> brson: and I thought maybe going straight from "experimental" to "1.0" is a sharp shift in messaging. but prob nobody cares.
[20:56:38] <brson> pnkfelix is going to improve the example too
[20:56:40] <bstrie> brson: my only complaint is that mousing over the "Other Downloads" button makes it look just like the "Install" button :P
[20:57:22] <brson> bstrie: I'm open to suggestions and PR's but am about ready to put this behind me
[20:57:30] <bstrie> haha
[20:57:51] <bstrie> I'll make some PRs once things calm down, then :)
[20:58:22] *** Quits: edwardw (edwardw@586492D3.E4C8743.30C05AB6.IP) (Quit: Leaving...)
[20:58:30] <nrc> nmatsakis: hmm, I'm not sure if that does what I want - I think it only checks that bounds on the impl are satisfied, not bounds on teh trait
[20:58:36] <bstrie> brson: any idea what pnkfelix wants to do with the example? I'm very interested in this sort of thing
[20:58:40] <nrc> I don't really understand that code though
[20:58:51] <brson> bstrie: nope! hey said 'please not fibo'
[20:58:54] <bstrie> brson: the current example does a good job of avoiding things that aren't pretty
[20:58:54] <brson> *he
[20:59:03] <cmr> it does a very good job of that.
[20:59:12] <brson> bstrie: but the current example implements bizarre logic that detracts from what's interesting about Rust
[20:59:20] <bstrie> yeah
[20:59:31] <bstrie> it doesn't really show off a lot of features either
[20:59:46] <bstrie> the point of the old example, even if it was frivolous, was that it showed off a lot of features :P
[20:59:59] <brson> ideally, i want it to look  familiar, but mysterious
[21:00:16] <bstrie> hahaha
[21:00:22] <brson> make you want to read about it to figure out more
[21:00:54] <nmatsakis> nrc: /win 18
[21:00:59] <brson> nmatsakis: update website
[21:01:10] <brson> *updated
[21:01:41] <nmatsakis> nrc: maybe so
[21:01:51] <nmatsakis> nrc: sorry about sending you irssi commands ;)
[21:03:02] <nmatsakis> nrc: I guess short version is that I don't think flaper87|afk is fixing this, though it could happen as a side-effect.
[21:03:24] <bstrie> brson: in any case, you did a great job maintaining what was great about the old site, while making it look prettier and less cluttered
[21:03:36] <bstrie> much enjoy the new list of features
[21:04:00] <brson> bstrie: thank you :)
[21:04:13] <bstrie> I look forward to the day when we can link the words "runs blazingly fast" to a benchmark page, like speed.pypy.org :)
[21:04:16] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[21:04:31] <nrc> nmatsakis: OK. related, do you ahve thoughts on https://github.com/rust-lang/rfcs/pull/20 ?
[21:04:34] <bstrie> or just come out and say "runs as fast as C++, no fooling"
[21:05:05] <nmatsakis> nrc: so this example seems...related https://github.com/mozilla/rust/issues/10751#issuecomment-38629984
[21:07:39] <nrc> nmatsakis: yes, that is a similar issue. Last time I talked to flaper87|afk, we discussed a similar example and he wanted to fix it - I'm not sure if that was as part of built-in bounds, or separately
[21:08:28] <nmatsakis> nrc: so re: #20, I think it basically sounds right. I'm worried about compilation time, but I think as part of my plan to revamp the vtable lookup stuff, I had hoped to introduce more aggressive caching, which should help address that concern, (though caching is harder due to the existing of inference variables.)
[21:09:31] <strcat> acrichto: https://github.com/mozilla/rust/pull/13291 r?
[21:09:54] <strcat> hm, what happened to the travis stuff?
[21:10:18] <nrc> nmatsakis: are bounds checks so slow? There would only be one extra bounds check per struct use, which doesn't feel like it should make a massive difference
[21:10:32] <nmatsakis> nrc: re: the comments on #20 -- you know, changing how we do default methods is not totally crazy
[21:10:56] <huon> strcat: it takes travis a few minutes to start up?
[21:11:08] <nmatsakis> nrc: oh, I don't know how slow they are, but as I said, I think we can address this with caching, if it's an issue at all
[21:11:21] <nmatsakis> nrc: one thing about default methods I don't especially like is that they force us to add constraints to the trait,
[21:11:27] <nmatsakis> nrc: but then if you impl the trait and don't use the default impl,
[21:11:32] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Quit: Leaving.)
[21:11:33] <nmatsakis> nrc: you don't really need those bounds I guess.
[21:12:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:12:42] <nmatsakis> nrc: I don't know how much this matters in practice really. Anyway, I still think we should let you put bounds more or less anywhere, just as a means of saying what you mean.
[21:13:34] <nrc> that last point has been my motivation really - they signify programmer intent. If you are only using them for a method impl, that seems wrong to start with
[21:13:56] <nrc> I think they should be allowed anywhere and checked everywhere, basically
[21:14:52] <nrc> but I fear I am missing part of the story - I realise I am not thinking 100% the way I should about traits impls - `impl<T> A for T` still blows my mind every time I see it :_p
[21:15:20] <nmatsakis> (No, I don't think you're missing anything in this instance)
[21:15:27] <nmatsakis> (maybe in others ;)
[21:15:31] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:18:12] <acrichto> r? https://github.com/mozilla/rust/pull/13237
[21:19:24] <huon> nrc: Rust is good a bitrotting patches ;P
[21:19:27] <huon> *at
[21:20:24] <nmatsakis> acrichto: interesting about taking value 
[21:20:39] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:20:40] * nmatsakis still dislikes tuple structs
[21:20:41] <nrc> huon: oh yes
[21:20:50] <nmatsakis> everything about them is painful
[21:20:59] <acrichto> it was a surprising side effect
[21:21:25] <eddyb> wait, so pub enum Option<T> {pub None, pub Some(T)}?
[21:21:28] <strcat> nmatsakis: imo we should have indexing sugar for tuples
[21:21:30] <strcat> [constant]
[21:21:45] <eddyb> strcat: you can with VG :P
[21:21:46] <huon> strcat: tuples? or tuple structs?
[21:21:49] <strcat> both
[21:22:00] <eddyb> you just need to make it return Option<T>
[21:22:02] <nrc> strcat: agreed, I would like to use the same syntax as simd - x.1
[21:22:04] <eddyb> (via Any)
[21:22:09] <strcat> eddyb: that's really ugly
[21:22:18] <eddyb> I'd be fine with x.1
[21:22:23] <strcat> and there's no T
[21:22:26] <eddyb> or x._1
[21:22:33] <strcat> or you mean via reflection...
[21:22:40] <eddyb> strcat: not reflection, Any
[21:22:46] <strcat> Any is reflection
[21:22:51] <strcat> type_id
[21:22:56] <eddyb> kiiinda
[21:23:01] <cmr> it's not kinda..
[21:23:02] <strcat> it is, that's what reflection is ;p
[21:23:09] <eddyb> if we had type matching, it wouldn't be reflection
[21:23:19] <strcat> type matching sounds like reflection too
[21:23:40] <eddyb> strcat: like C++ templates
[21:23:50] <eddyb> and specialization
[21:23:56] <strcat> Boost.Any uses reflection though
[21:24:06] <eddyb> not *that*
[21:24:12] * strcat doesn't know what you mean then
[21:24:34] <eddyb> strcat: in C++, specialize a <T, U> template for only <T, T>
[21:24:43] <eddyb> in haskell, f a a
[21:24:56] <strcat> what does it have to do with tuple indexing? ;\
[21:24:57] *** Quits: japaric_ (japaric@96A6B723.A8462175.F29ED47E.IP) (Ping timeout)
[21:24:58] <eddyb> or a -> a or whatever
[21:25:13] *** Joins: japaric_ (japaric@911E88BD.F9FFD430.3E85381A.IP)
[21:25:14] <huon> is there a concrete process for getting RFCs decided upon? Or do we not really have that part of it fleshed out yet?
[21:25:26] <acrichto> brson: if the bastion host's network is a little off, how do you access the AWS bots?
[21:25:43] <nrc> huon: add it to the agenda for the next meeting, or suggest here
[21:25:45] <acrichto> huon: right now it's "discuss in a weekly meeting"
[21:25:50] <nrc> (which I am about to do)
[21:26:08] <huon> oh, mine's already there
[21:26:14] <huon> thanks acrichto
[21:26:16] <acrichto> :D
[21:26:17] <eddyb> strcat: non-constant index on tuples can be implemented via a convert<T, U>(T) -> Option<U> which returns Some iff T = U
[21:26:27] <eddyb> strcat: C++ can implement that function with specialization
[21:26:52] <acrichto> huon: r? https://github.com/mozilla/rust/pull/13255
[21:26:54] <strcat> I'm not suggesting a non-constant fallible index of a dynamic type though
[21:27:02] <strcat> I don't think that belongs anywhere near the core language
[21:27:15] <eddyb> "dynamic type"?
[21:27:16] <huon> acrichto: looking
[21:27:39] <strcat> eddyb: you don't know which type you're going to get if the index isn't constant
[21:27:54] <strcat> it implies reflection
[21:28:01] <eddyb> it doesn't require reflection
[21:28:25] <strcat> keeping type info like that until runtime to do stuff based on it is reflection
[21:28:40] <strcat> std::get<n> in C++ is compile-time only
[21:28:55] <strcat> because there's no way to use a dynamic index on a tuple without RTTI
[21:29:07] *** Joins: radford (Adium@5951C9C3.C0DFAA86.ECA1A3BD.IP)
[21:29:14] <eddyb> strcat: you don't need RTTI for this
[21:29:38] <eddyb> it's basically a match index {0 if T == A => Some(first), 1 if T == B => Some(second), ..., _ => None}
[21:29:50] <eddyb> you definitely don't need *dynamic* runtime type info
[21:30:22] <nrc> does anyone object to bounds on type variables in structs and enums? https://github.com/rust-lang/rfcs/pull/20
[21:30:37] *** Quits: victorporof_ (victorporo@13F2CEC5.7672369.D8E68FF6.IP) (Quit: victorporof_)
[21:30:42] <nrc> I would like to start implementing as it is kind of blocking DST
[21:31:01] <strcat> I think rust would benefit from making it easier to extract data from tuples, I don't think it should add some kind of tuple matching thing and generate tags
[21:31:15] <nrc> brson, nmatsakis, cmr, huon, acrichto, everyone else too ^^
[21:31:17] <strcat> I was just suggesting we have an alternative to pattern matching
[21:31:17] <eddyb> "generate tags"?
[21:31:52] <acrichto> nrc: "Possibly remove bounds from traits" <- ?
[21:32:10] <huon> nrc: I don't have any opinion, although I'd be interested to know why the arguments against it from Haskell don't apply (or at least a reasonably detailed analysis of them)
[21:32:19] <nrc> acrichto: I don't want to do that - I mention it only to specifically exlcude it from the work I want to do now
[21:32:20] <acrichto> nrc: otherwise, seems ok, but should probably go through a meeting
[21:32:25] <acrichto> ok
[21:32:42] <strcat> don't we have bounds on traits already?
[21:32:48] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[21:32:58] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[21:32:58] *** ChanServ sets mode: +qo brson brson
[21:33:00] <nrc> strcat: we do, but not structs and enums
[21:33:10] <nrc> bounds on type variables in ...
[21:33:13] <nrc> to be precise
[21:33:38] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[21:33:42] <strcat> hm, what was that thing acrichto quoted then?
[21:33:45] <nrc> huon: I don't understand why the reasons from Haskell might apply, tbh
[21:34:06] <nrc> strcat: as an extensions bill-myers suggested removing them from type variable in traits
[21:34:30] <nrc> (which I don't want to do, but in any case, is just a follow-up, and doesn't need to be decided now)
[21:34:39] <huon> nrc: in what sense?
[21:35:18] <huon> Haskell discourages writing `data A a => X a = ...` (or whatever the syntax is), which is essentially isomorphic to `struct X<T: A> { ... }`
[21:35:42] <nrc> huon: I don't know why they do that
[21:36:51] <nrc> or why it would apply to Rust
[21:37:23] <cmr> personally I dislike this because a struct conceptually has no limitations on what types can be used with it
[21:37:31] <cmr> it's just some types layed out in a specific way
[21:37:41] <cmr> only *uses* of it need to be bounded
[21:37:51] <cmr> but I'm not against the change
[21:38:02] <cmr> makes things simpler.
[21:38:22] *** Joins: jdm_ (jdm@13F2CEC5.7672369.D8E68FF6.IP)
[21:38:53] *** Quits: jdm (jdm@FCCEA34F.7672369.D8E68FF6.IP) (Ping timeout)
[21:41:59] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[21:42:00] *** ChanServ sets mode: +ao pcwalton pcwalton
[21:42:12] <huon> nrc: http://stackoverflow.com/a/12770425/1256624
[21:42:29] <huon> I guess it's a bit of an implementation-detail reason
[21:43:12] *** Quits: jdm_ (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[21:46:08] * nrc reads
[21:48:17] <nrc> huon: so I don't think that applies to rust - taking the example, if we had a Tree<X> struct and had an Ord bound on X, that would make sure all items in Tree were orderable
[21:50:06] <huon> nrc: your proposal means we wouldn't have to repeat the Ord bound everywhere, right? (which differs from Haskell)
[21:50:59] <nrc> huon: what do you mean by 'everywhere'?
[21:51:09] <strcat> acrichto: now I just have to figure out how to teach LLVM to merge them ;\
[21:51:13] <strcat> maybe I should do it in the frontend...
[21:52:14] <strcat> static a: &'static str = "foo"; static b: &'static str = "bar"; static c: &'static str = "foobarbaz";
[21:52:17] *** Quits: whitglint (uid15486@moz-31ABA2C0.irccloud.com) (Quit: Connection closed for inactivity)
[21:52:20] <huon> nrc: haskell requires `f :: Ord x => Tree x -> ...` if you want to actually use the Tree, evne with the bound on the declaration; if we had `struct Tree<X: Ord> { ... }` then you're saying `fn f<X>(tree: Tree<X>) { ... }` would be fine, with the bound inferred?
[21:52:23] <strcat> would be possible to merge the underlying strings
[21:53:23] <nrc> huon: I don't think we infer bounds, not sure how difficult/possible it is to do. So I guess my proposal would mean repeating the bounds
[21:54:10] <huon> nrc: then I don't understand why Haskell's discouragement doesn't apply to Rust; AFAICT the situation is identical
[21:55:16] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[21:55:16] *** ChanServ sets mode: +o tjc
[21:55:37] <huon> anyway, I don't have a particular problem with it; I'm not 100% sure if the Haskell thing is just "it's pointless" or if there is some deeper problem with it.
[21:56:33] <huon> acrichto: (sorry, I got distracted midway through my review :( )
[21:56:36] *** Quits: radford (Adium@5951C9C3.C0DFAA86.ECA1A3BD.IP) (Quit: Leaving.)
[21:58:10] <brson> nrc: no objection here
[21:58:37] <acrichto> huon: oh no worries, that happens to me all the time lol
[21:58:52] <brson> acrichto: add the AWS key to your keyring with ssh-add, then `ssh -A rustbuild@rust1.vm.labs.scl3.mozilla.com`, then ssh into ec2
[21:59:10] <brson> `ssh -A` means 'transport all the keys in my ssh-agent to the other host'
[21:59:10] <acrichto> brson: whoa, the master is on aws?
[21:59:27] <brson> acrichto: no, the master isn't but it's the only machine that can route to our VPC
[21:59:29] <cmr> nrc: please no bound inference, that would break "no global inference"
[21:59:36] <acrichto> weird
[21:59:56] <nrc> huon: maybe I didn't understand the objection - I thought that the objection was that in Haskell having the equivalent of Tree<X: Ord> would not actually check that the items in Tree satisfied Ord
[22:01:21] <nrc> cmr: fine by me, not proposing it :-)
[22:01:26] <huon> nrc: no, I believe it does, but you still have to repeat the bound everywhere
[22:01:32] <nrc> brson:  ta
[22:01:50] <acrichto> brson: "ssh into ec2" <- how so? All of the 10.x.x.x ips seem like private ips, and the master can't seem to reach the bastion host either
[22:02:04] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[22:02:04] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/miMs5Q
[22:02:04] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[22:02:49] <nrc> huon: that is not how I understood your link
[22:03:24] <nrc> is the objection that the compiler does not check the bounds that you have to add all over the place?
[22:03:29] <nrc> Or just the verbosity
[22:04:15] <brson> acrichto: the private IP's work from the scl host
[22:04:31] <brson> use 'ubuntu' or 'root' for the username
[22:04:34] <brson> depending
[22:04:46] * huon reads again
[22:05:32] <acrichto> brson: hm, something seems off, I do "ssh ubuntu@10.136.189.3" from scl and it just times out
[22:06:07] <huon> nrc: I think it's subtle, you need the bound when constructing it ("which meant that you needed to satisfy the instance when constructing a value") i.e. the internal type is required to have that bound, but the bound isn't inferred at the points of use (i.e. the global inference thing that we're not adding)
[22:07:05] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[22:07:05] <ghrust> [13rust] 15bors pushed 17 new commits to 06auto: 02http://git.io/ZMEzbQ
[22:07:05] <ghrust> 13rust/06auto 1415e6e8c 15Alex Crichton: rustc: Stop using LLVMGetSectionName...
[22:07:05] <ghrust> 13rust/06auto 140bd6f2c 15Alex Crichton: rustllvm: Remove a no longer needed file...
[22:07:06] <ghrust> 13rust/06auto 14f5a4837 15Huon Wilson: std: override clone_from for Vec....
[22:07:08] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[22:07:37] <huon> nrc: yeah, writing `data Eq a => X a => X a; data NotEq = NotEq; X NotEq` fails because the NotEq doesn't satisfy Eq
[22:08:24] <brson> acrichto: oh, that's a windows machine. requires different incantations
[22:08:39] <acrichto> oh wow
[22:08:43] <acrichto> I should look at what I'm doing
[22:08:50] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[22:08:54] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[22:09:12] <acrichto> oh ya
[22:09:14] <acrichto> yay*
[22:09:15] <acrichto> htanks
[22:09:34] * cmr imagines brson and acrichto sitting alone in a dark room, chanting at a beige box
[22:09:56] <brson> acrichto: for win: `ssh -A rustbuild@rust1.vm.labs.scl3.mozilla.com -L 3389:10.136.189.3:3389` to make an rdp tunnel, then locally `rdesktop localhost`
[22:10:04] <acrichto> sounds good to me
[22:10:09] * acrichto makes .ssh/config aliases
[22:10:30] *** Joins: andrew-__ (andrew-d_w@E04ADC0E.9DFA657C.CC0301A2.IP)
[22:11:03] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[22:12:06] * acrichto is in business
[22:13:25] <huon> acrichto: finished
[22:13:55] *** Joins: deontologician (user@326BA6C5.85C14C02.284344F5.IP)
[22:15:38] <nrc> huon: so it doesn't apply to Rust _because_ we don't do bound inference?
[22:15:38] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[22:15:54] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[22:16:33] *** Joins: ChrisMorgan (chris@moz-8DCBEA52.vic.adsl.internode.on.net)
[22:16:42] *** Quits: acrichto (acrichto@moz-B63D64BD.res.cmu.edu) (Ping timeout)
[22:17:36] <huon> nrc: no, Haskell doesn't do bound inference either
[22:18:40] <huon> nrc: I'm fairly sure it is the same. Haskell: writing bounds on data types forces types in the constructor expressions to have the bounds, doesn't affect anything else. Rust: writing bounds on data types forces types in constructor expressions to have the bounds, doesn't affect anything else.
[22:18:49] <huon> or am I interpreting your proposal incorrectly?
[22:19:54] <cmr> bstrie: huon: whichever of you changed the subreddit to "The Rust Programming Language Does Not Have Monads", know that that is factually incorrect.
[22:20:12] *** Joins: acrichto (acrichto@moz-B63D64BD.res.cmu.edu)
[22:20:12] *** ChanServ sets mode: +o acrichto
[22:20:22] <acrichto> huon: thanks!
[22:20:29] <nrc> huon I think my propsoal limits the data can be stored in the struct too
[22:20:33] <huon> cmr: bstrie is rabidly against the name monads
[22:20:58] <nrc> I got the impression that in Haskell that is not the case, though I might be wrong
[22:21:31] <huon> nrc: isn't that "forces types in constructor expressions to have the bounds"? i.e. to construct the struct via `Foo { x: ..., y: ... }` you can only used data that implements the appropriate trait
[22:21:46] <huon> s/used/use/
[22:22:01] <nrc> sorry, I assume type constructor not data constructor
[22:22:58] <nrc> so, writing `fn<X> (x: Tree<X>)...` would also be a type error
[22:23:10] <huon> Ah, so you mean writing `-> Foo<X>` requires X to be bounded appropriately (i.e. `struct Foo<X: Eq>; fn id<T>(x: Foo<T>) -> Foo<T> { x }` is invalid, even though it doesn't need the bound in the implementation)?
[22:23:10] <nrc> I assumed that was what you were referring to
[22:23:11] *** Joins: victorporof (victorporo@moz-1C281963.dsl.bell.ca)
[22:23:32] <nrc> yes
[22:23:34] <huon> it wasn't. No wonder neither of us were making sense to the other. :)
[22:23:42] <nrc> heh
[22:26:30] <acrichto> brson: is there a rustbuild user for the windows bots?
[22:26:31] *** Quits: ChrisMorgan (chris@moz-8DCBEA52.vic.adsl.internode.on.net) (Ping timeout)
[22:27:09] <brson> acrichto: user 'administrator', pw: https://github.com/brson/rust-admin/blob/master/machine-list-and-access.txt#L95
[22:27:23] <acrichto> ok, just making sure I was using the right one
[22:29:19] *** Joins: mankyKitty (Instantbir@19559281.CA335678.BC02889B.IP)
[22:30:43] *** Quits: mankyKitty (Instantbir@19559281.CA335678.BC02889B.IP) (Quit: mankyKitty)
[22:33:57] <acrichto> brson: can you ssh to rust-linux1 and rust-linux2?
[22:34:01] <acrichto> they're both inaccessible for me
[22:34:16] <acrichto> hm no
[22:34:32] <acrichto> just slow
[22:34:56] <brson> acrichto: is something broken?
[22:35:10] <acrichto> nah
[22:35:23] <acrichto> I couldn't ssh from bors to rust-linux1
[22:35:40] <acrichto> hm, maybe I'm just having trouble getting to rust-linux{1,2} in general
[22:36:15] <acrichto> weird, I can't hop through another host to get to rust-linux{1,2}
[22:36:19] <acrichto> but I can reach both from my laptop
[22:36:22] <acrichto> (on wifi)
[22:36:57] <brson> acrichto: can tuple-structs still be destructured from within their defining module?
[22:37:03] <acrichto> es
[22:37:04] <acrichto> yes*
[22:37:12] <acrichto> you can do anything with a tuple struct in its defining module
[22:38:33] <acrichto> brson: ok, I have successfully accessed all of our bots
[22:39:37] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[22:42:04] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (No route to host)
[22:47:35] *** Joins: ChrisMorgan (chris@moz-8DCBEA52.vic.adsl.internode.on.net)
[22:59:19] <huon> strcat: hah, the lack of a null terminator breaks debuggers
[23:00:06] <strcat> huon: because they're classified as C strings? 
[23:00:08] <strcat> easy enough to fix
[23:00:09] <acrichto> http://buildbot.rust-lang.org/builders/auto-linux-64-nopt-t/builds/4223/steps/test/logs/stdio
[23:00:11] <strcat> it's not right anyway
[23:00:15] <huon> strcat: yeah
[23:01:18] <strcat> I can't make it that far in make check anymore
[23:01:25] <strcat> stupid unavailable resource errors
[23:02:01] <huon> `make check-stage2-debuginfo` iirc
[23:02:03] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[23:02:04] <ghrust> [13rust] 15bors pushed 16 new commits to 06auto: 02http://git.io/g7Bh4w
[23:02:04] <ghrust> 13rust/06auto 1415e6e8c 15Alex Crichton: rustc: Stop using LLVMGetSectionName...
[23:02:04] <ghrust> 13rust/06auto 140bd6f2c 15Alex Crichton: rustllvm: Remove a no longer needed file...
[23:02:04] <ghrust> 13rust/06auto 14f5a4837 15Huon Wilson: std: override clone_from for Vec....
[23:02:06] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[23:02:15] <strcat> huon: none of make check works for me
[23:02:23] <strcat> not sure why
[23:02:29] <strcat> maybe the debuginfo part would
[23:02:31] <huon> strcat: oh, really? not even specific targets?
[23:02:39] <strcat> well most don't
[23:02:45] <huon> weird
[23:02:48] <strcat> unavailable resource errors all over
[23:03:06] <strcat> I'm not sure if it's a problem with my build dir or what
[23:03:07] <acrichto> urgh, I've been getting that occasionally as well
[23:03:40] <strcat> or what else it could be*
[23:03:50] <acrichto> it's EAGAIN from write() on stdout
[23:03:52] <acrichto> (I think)
[23:04:06] <strcat> aren't we using libnative by default? ;s
[23:04:07] *** Joins: Nekit1234007_ (Nekit12340@BA29A3B9.E3D471A2.4707F662.IP)
[23:04:13] <acrichto> that's what I don't understand...
[23:04:23] <strcat> that sounds like the same thing broken in rusti
[23:04:26] <acrichto> I've never seen this on the bots
[23:04:27] <strcat> with libuv
[23:04:28] <acrichto> only locally sometimes
[23:04:36] <strcat> well
[23:04:43] *** Quits: Nekit1234007 (Nekit12340@2ACCBB7E.40F9C55F.4707F662.IP) (Ping timeout)
[23:04:45] <strcat> there was more than one thing broken with rusti
[23:04:46] <huon> compiletest still uses green, doesn't it?
[23:04:47] <strcat> it was weird
[23:05:10] <acrichto> compiletest does
[23:05:14] <acrichto> (use green)
[23:05:17] <acrichto> and stdtest does
[23:05:55] <strcat> hm, I don't remember if I get them there
[23:06:06] <strcat> just know that make check doesn't make it to debuginfo ;p
[23:06:25] * strcat has given up on it for now
[23:08:47] <strcat> hm
[23:09:27] *** Quits: ktt3ja (ktt3ja@moz-8D2A07E1.hsd1.va.comcast.net) (Quit: Leaving)
[23:11:25] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[23:11:36] *** Quits: cgaebel (clark@moz-F9D89110.nyc.res.rr.com) (Quit: ChatZilla 0.9.90.1 [Firefox 28.0/20140317233501])
[23:11:47] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[23:19:53] *** Quits: deontologician (user@326BA6C5.85C14C02.284344F5.IP) (Ping timeout)
[23:20:04] *** Joins: dLog (anonymous@moz-8FAE8709.eastlink.ca)
[23:23:10] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[23:23:21] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:24:10] <cmr> nrc: who originally r+'d 12562?
[23:25:52] <acrichto> ugh, travis keeps timing out building rustc
[23:25:55] <acrichto> llvm, build faster
[23:26:01] <acrichto> *optimize faster
[23:26:25] <huon> can we build with -O1 (or even -O0) on travis?
[23:26:46] <huon> acrichto: https://github.com/mozilla/rust/pull/13295 r?
[23:26:52] <acrichto> O0 may be too slow b/c the stage1 compiler is used to build the stage1 target libs
[23:26:55] <acrichto> O1 possibly though
[23:26:57] <acrichto> I'll test
[23:27:14] <acrichto> huon: there's at least one test with concat_idents!
[23:27:25] <huon> acrichto: ok, I'll update later
[23:27:29] <acrichto> r=me
[23:27:39] <huon> thanks
[23:28:17] <huon> woah, it's actually used in libstd too
[23:28:46] <acrichto> lol
[23:28:47] <acrichto> by you
[23:29:45] <huon> hah
[23:30:47] <brson> acrichto: if it would help we can consider paying travis money
[23:31:18] <acrichto> dont' we pay enough already for aws instances?
[23:32:35] <brson> not sure
[23:32:59] *** Quits: larsberg (sid16141@moz-A42E5B7B.irccloud.com) (Ping timeout)
[23:33:17] *** Quits: jack (sid19593@moz-A42E5B7B.irccloud.com) (Ping timeout)
[23:33:17] *** Quits: balpert_ (sid15886@moz-A42E5B7B.irccloud.com) (Ping timeout)
[23:33:17] *** Quits: huhlig (sid17687@moz-A42E5B7B.irccloud.com) (Ping timeout)
[23:33:17] *** Quits: tca (sid17279@moz-A42E5B7B.irccloud.com) (Ping timeout)
[23:34:07] <acrichto> HAS_JOSH_K_SEAL_OF_APPROVAL=true
[23:34:07] <acrichto> wut
[23:34:22] <acrichto> if $HAS_JOSH_K_SEAL_OF_APPROVAL { ... }
[23:34:35] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[23:34:54] <acrichto> r? https://github.com/mozilla/rust/pull/13268
[23:35:55] *** Joins: jack (sid19593@moz-A42E5B7B.irccloud.com)
[23:35:55] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[23:36:19] <cmr> acrichto: mind updating the grammar in the manual?
[23:36:32] <acrichto> cmr: I couldn't find an existing one, is there one?
[23:36:35] <acrichto> maybe I should write it in
[23:36:48] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[23:36:48] *** ChanServ sets mode: +o tjc
[23:36:54] <cmr> if there isn't one, add it :p
[23:36:55] *** Joins: tca (sid17279@moz-A42E5B7B.irccloud.com)
[23:36:56] *** Joins: balpert_ (sid15886@moz-A42E5B7B.irccloud.com)
[23:37:01] <cmr> doesn't need to be polished
[23:37:11] <cmr> btw I'm working on updating rust-antlr
[23:37:16] <cmr> that is, a formal grammar.
[23:38:02] <acrichto> proc isn't mentioned in the manual at all
[23:38:14] <cmr> don't kill yourself adding it in
[23:38:42] *** Joins: larsberg (larsberg@moz-3F68A7C1.lightspeed.cicril.sbcglobal.net)
[23:39:27] *** Joins: huhlig (sid17687@moz-A42E5B7B.irccloud.com)
[23:39:31] <brson> cmr: i am very interested in having a testable and documented grammar
[23:39:46] <cmr> brson: funny, I am too! ;p
[23:40:40] *** Joins: larsberg_ (sid16141@moz-A42E5B7B.irccloud.com)
[23:40:43] *** Quits: larsberg (larsberg@moz-3F68A7C1.lightspeed.cicril.sbcglobal.net) (Quit: Leaving.)
[23:40:43] *** larsberg_ is now known as larsberg
[23:44:25] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[23:45:00] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:46:39] <acrichto> cmr: manual updated
[23:46:40] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[23:48:00] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[23:48:51] <cmr> brson: who, in the past, did most of the work on the manual? I intend to spend a significant portion of my spare time for the rest of the semester updating/rewriting it.
[23:48:57] <acrichto> whoa, we may be busted at --opt-level=1
[23:49:08] <brson> cmr: graydon
[23:49:24] <brson> 4 years ago
[23:49:35] <cmr> ok.
[23:49:44] <cmr> I had some style questions on https://github.com/mozilla/rust/pull/13207
[23:51:25] <brson> cmr: what you have looks reasonable to me. what are your specific concerns?
[23:54:17] <cmr> brson: I suppose I'm most concerned about the boundary between the language we call Rust and the behavior of rustc
[23:54:28] <cmr> as well as what we want to specify.
[23:54:39] <cmr> for example, linkage is somewhat hairy
[23:55:04] <cmr> I also have an open question about extensions
[23:55:06] <cmr> but bbs
[23:55:31] <brson> cmr: i'd consider everything language related up to the compiler's interface to std to be specworthy; i'd hope not command line flags
[23:55:36] <brson> linkage i think is important to spec
[23:56:25] <strcat> meh, I don't understand why gdb prints these wrong
[23:56:26] <brson> syntax extensions are probably case-by-case. certainly some are pretty fundamental
[23:56:37] <strcat> why does it try printing arrays with a specified size as null-terminated strings?
[23:56:45] * strcat shrugs
[23:57:09] <strcat> I could tell it these are slices instead of fixed size arrays
[23:57:20] <strcat> but I don't think it will fix anything
[23:58:37] <nrc> cmr: nmatsakis
[23:59:31] <strcat> meh
[23:59:33] <strcat> actually
[23:59:36] <strcat> they are treated as slices
