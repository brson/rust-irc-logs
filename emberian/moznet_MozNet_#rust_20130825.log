[00:02:49] <HollyRain> how to use now the method vec::reserve ? 0.7 => let mut vec_own: ~[uint] = ~[1, 2, 3, 4]; vec::reserve(&mut vec_own, 10)
[00:03:03] <HollyRain> in Trunk => &mut vec_own.reserve(10); ???
[00:03:57] <strcat> just xs.reserve(n)
[00:04:13] <Eridius> HollyRain: you can use xs.reserve(n) in both 0.7 and trunk
[00:05:04] <Eridius> rusti: "." == &"."
[00:05:05] -rusti- true
[00:05:07] <Eridius> rusti: "." == ~"."
[00:05:08] -rusti- <anon>:5:16: 5:20 warning: unnecessary allocation, the sigil can be removed [-W unnecessary-allocation (default)]
[00:05:09] -rusti- <anon>:5          "." == ~"."
[00:05:09] -rusti-                          ^~~~
[00:05:09] -rusti- true
[00:05:12] <Eridius> rusti: ~"." == "."
[00:05:13] -rusti- <anon>:5:17: 5:20 error: mismatched types: expected `~str` but found `&'static str` (str storage differs: expected ~ but found &'static )
[00:05:13] -rusti- <anon>:5          ~"." == "."
[00:05:13] -rusti-                           ^~~
[00:05:14] -rusti- error: aborting due to previous error
[00:05:16] -rusti- application terminated with error code 101
[00:05:36] <StarLight> rusti: let x = ~"."; x == "."
[00:05:36] -rusti- <anon>:5:28: 5:31 error: mismatched types: expected `~str` but found `&'static str` (str storage differs: expected ~ but found &'static )
[00:05:36] -rusti- <anon>:5          let x = ~"."; x == "."
[00:05:37] -rusti-                                      ^~~
[00:05:37] -rusti- error: aborting due to previous error
[00:05:37] -rusti- application terminated with error code 101
[00:08:47] *** Joins: maik (maik___@moz-6AB83A6F.dip0.t-ipconnect.de)
[00:09:31] <strcat> == wants the same type on both sides
[00:09:46] <strcat> rusti: let x = ~"."; x.as_slice() == "."
[00:09:47] -rusti- true
[00:09:49] <strcat> or
[00:10:00] <strcat> rusti: let x = ~"."; "." == x
[00:10:01] -rusti- true
[00:10:02] <dbaupp> Eridius: btw, https://github.com/mozilla/rust/search?q=assertion+failed%3A+rp.is_none%28%29&type=Issues
[00:10:07] <strcat> because then it coerces x to &str
[00:10:13] <StarLight> got it, thanks
[00:10:18] <strcat> but it can't coerce &str to ~str
[00:10:38] <strcat> maybe it could be more clever and try from the RHS too
[00:10:45] *** Quits: SingingBoyo (brandon@4DF3381A.51F4D838.4F048BDC.IP) (Ping timeout)
[00:10:49] <Eridius> dbaupp: bah. I looked for "ICE"
[00:12:01] <dbaupp> Eridius: always search for the 'quoted stuff' ;)
[00:12:31] <Eridius> dbaupp: yeah I should
[00:12:59] <Eridius> rusti: ~[""] == [""]
[00:13:00] -rusti- <anon>:5:18: 5:22 error: mismatched types: expected `~[&'static str]` but found `[&'static str, .. 1]` ([] storage differs: expected ~ but found 1)
[00:13:00] -rusti- <anon>:5          ~[""] == [""]
[00:13:00] -rusti-                            ^~~~
[00:13:00] -rusti- error: aborting due to previous error
[00:13:00] -rusti- application terminated with error code 101
[00:13:08] <Eridius> rusti: ~[""].as_slice() == [""]
[00:13:08] -rusti- <anon>:5:29: 5:33 error: mismatched types: expected `~&[&'static str]` but found `[&'static str, .. 1]` (expected ~-ptr but found vector)
[00:13:08] -rusti- <anon>:5          ~[""].as_slice() == [""]
[00:13:09] -rusti-                                       ^~~~
[00:13:09] -rusti- error: aborting due to previous error
[00:13:10] -rusti- application terminated with error code 101
[00:13:18] <Eridius> rusti: (~[""]).as_slice() == [""]
[00:13:22] -rusti- pastebinned 11 lines of output: http://ix.io/7y3
[00:13:34] <Eridius> rusti: let xs = ~[""]; xs.as_slice() == [""]
[00:13:35] -rusti- true
[00:13:52] <StarLight> rusti: [""] == ~[""]
[00:13:53] -rusti- <anon>:5:17: 5:22 warning: unnecessary allocation, the sigil can be removed [-W unnecessary-allocation (default)]
[00:13:53] -rusti- <anon>:5          [""] == ~[""]
[00:13:53] -rusti-                           ^~~~~
[00:13:53] -rusti- true
[00:14:11] <StarLight> rusti: let x = ~[""]; [""] == x
[00:14:11] -rusti- true
[00:14:45] *** Quits: HollyRain (HollyRain@moz-50A83091.dyn.user.ono.com) (Quit: bye, bye)
[00:14:53] *** Joins: webber46 (webber46@moz-717E9C5B.cust.bredband2.com)
[00:15:01] <Eridius> rusti: 3u8 == 3 as u8
[00:15:02] -rusti- true
[00:23:11] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[00:26:04] <maik> rusti: true | false
[00:26:04] -rusti- true
[00:27:50] *** Quits: tikue (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue)
[00:28:17] <maik> rusti: !!!!!!!!!!!!!!!!!true
[00:28:18] -rusti- false
[00:30:22] <engla> true ^ false
[00:30:22] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[00:30:24] <engla> rusti: true ^ false
[00:30:25] -rusti- true
[00:31:11] *** Quits: webber46 (webber46@moz-717E9C5B.cust.bredband2.com) (Quit: webber46)
[00:31:22] *** Quits: maik (maik___@moz-6AB83A6F.dip0.t-ipconnect.de) (Ping timeout)
[00:31:28] *** kimundi is now known as zz_kimundi
[00:32:21] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Ping timeout)
[00:40:24] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[00:41:01] *** Joins: victorporof (victorporo@C2FADE94.E7C615F.41763F20.IP)
[00:43:05] *** Quits: victorporof (victorporo@C2FADE94.E7C615F.41763F20.IP) (Ping timeout)
[00:43:45] <Sergio965> Is there a way to implement a trait on all things that implement a trait?
[00:44:09] <cmr> impl<T: Trait1> Trait2 for T
[00:44:18] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[00:44:19] <cmr> iirc there's bugs with method resolve that make that iffy atm
[00:44:19] <Sergio965> Hmm, I tried that, but I got a weird error.
[00:44:23] <cmr> conflicting method names
[00:47:01] <dbaupp> Sergio965: that also means you can't implement Trait2 for anything else
[00:47:19] <dbaupp> (even things that don't implement Trait1)
[00:47:24] *** Quits: erickt3 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[00:47:34] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[00:48:28] <cmr> I think a specificity rule of impl precedence would be extremely useful.
[00:48:40] <cmr> It's rare that I want it, but when I do want it, not having it is painful.
[00:49:50] <dbaupp> and it's sorta required to make some things fast (rather than just relying on LLVM to hopefully recognise things.)
[00:49:56] *** Quits: heftig (heftig@moz-C0DBD4B2.dip0.t-ipconnect.de) (Ping timeout)
[00:49:56] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[00:50:07] <Sergio965> dbaupp: Why's that? Is there a good reason for that?
[00:50:41] <dbaupp> Sergio965: yes, coherency (i.e. not having conflicting implementations of a trait)
[00:51:12] <dbaupp> it can be worked around (the specificity thing cmr is talking about), but Rust doesn't implement anything like that (yet).
[00:51:40] <cmr> the specificity thing boils down to a simpler form of CSS specificity, if you're familiar with that.
[00:53:47] <bjz> how does one set the optimisation level?
[00:53:57] <bjz> using -O?
[00:54:05] <bjz> I wasnt to set it at 3
[00:54:09] <bjz> *want
[00:54:17] <strcat> bjz: --opt-level=3
[00:55:24] <dbaupp> cmr: it's not necessarily simpler :P
[00:56:09] *** Quits: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com) (Ping timeout)
[00:56:16] *** Joins: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com)
[00:59:03] <Sergio965> cmr: So, cascading precedence?
[00:59:33] <Eridius> macro_rules! t(() => (1)); t()
[00:59:36] <Sergio965> I'm getting this error: lerror: wrong number of type arguments: expected 2 but found 0:   fn reduce<R: Add>(&self, f: &fn(&T) -> R) -> R; (T is a type parameter of the trait). Any idea?
[00:59:36] <Eridius> rusti: macro_rules! t(() => (1)); t()
[00:59:37] -rusti- <anon>:5:36: 5:37 error: unresolved name `t`.
[00:59:37] -rusti- <anon>:5          macro_rules! t(() => (1)); t()
[00:59:37] -rusti-                                              ^
[00:59:37] -rusti- error: aborting due to previous error
[00:59:37] -rusti- application terminated with error code 101
[00:59:41] <Eridius> rusti: macro_rules! t(() => (1)); t!()
[00:59:42] -rusti- 1
[01:00:02] <Eridius> rusti: macro_rules! t(() => (1)); { macro_rules! t(() => (2)); printfln!(t!()); }; t!()
[01:00:03] -rusti- 2
[01:00:03] -rusti- 1
[01:00:09] <Sergio965> Why would it expect 2 type arguments?
[01:00:23] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[01:00:33] *** Joins: heftig (heftig@moz-305746DD.dip0.t-ipconnect.de)
[01:00:39] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[01:02:15] *** Quits: ross (ross@moz-8A84103E.br.br.cox.net) (Quit: )
[01:04:38] <Sergio965> Oh, Add is a generic trait.
[01:04:41] *** Quits: zxcdw (r-a@858B320D.B543C4DE.3933CC16.IP) (Ping timeout)
[01:06:23] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[01:06:23] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/1PkKeg
[01:06:23] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[01:08:38] *** Joins: webber46 (webber46@moz-717E9C5B.cust.bredband2.com)
[01:09:08] *** Joins: zxcdw (r-a@858B320D.B543C4DE.3933CC16.IP)
[01:11:21] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[01:11:21] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/qxe9nA
[01:11:21] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[01:11:22] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[01:11:22] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/kavafg
[01:11:22] <ghrust> 13rust/06auto 14d6eee6a 15Steven Fackler: Rename {Reader,Writer}ByteConversions methods...
[01:11:22] <ghrust> 13rust/06auto 14f7f1d89 15bors: auto merge of #8607 : sfackler/rust/extensions, r=brson...
[01:11:22] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[01:11:40] *** Quits: fiirhok (fiirhok@moz-4BE3125.vc.shawcable.net) (Quit: This computer has gone to sleep)
[01:12:26] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[01:12:58] <Sergio965> If a type implements "Add", does that automatically overload `+`?
[01:13:39] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[01:14:49] <Eridius> Sergio965: Add is the trait that implements the + operator
[01:15:11] <Sergio965> What do you mean?
[01:15:21] <Eridius> yes, if you implement Add, you can use + with your type
[01:15:24] <Sergio965> I see.
[01:15:37] <Sergio965> But now if I constraint a type parameter to Add?
[01:16:12] <Eridius> if you constrain a type parameter T: Add<T,T> then that means that a value of type T can be added to another value of type T and yields a value of type T
[01:16:22] <Sergio965> rusti: fn test<T: Add<T, T>> test(first: T, second: T) -> T { first + second }; test(1, 2);
[01:16:23] -rusti- <anon>:5:31: 5:35 error: expected `(` but found `test`
[01:16:23] -rusti- <anon>:5          fn test<T: Add<T, T>> test(first: T, second: T) -> T { first + second }; test(1, 2);
[01:16:23] -rusti-                                         ^~~~
[01:16:23] -rusti- application terminated with error code 101
[01:16:46] <Eridius> rusti: fn test<T: Add<T, T>>(first: T, second: T) -> T { first + second }; test(1, 2)
[01:16:47] -rusti- 3
[01:16:48] <Sergio965> rusti: fn test<T: Add<T, T>>(first: T, second: T) -> T { first + second }; test(1, 2);
[01:16:49] -rusti- ()
[01:17:11] <Sergio965> rusti: fn test<T: Add<T, T>>(first: T, second: T) -> T { first + second }; test(1, 2)
[01:17:13] -rusti- 3
[01:17:13] <Sergio965> Indeed.
[01:17:14] <Sergio965> Hmm.
[01:17:56] <Sergio965> Oh. Wow.
[01:18:03] <Sergio965> How do I overload `+=`?
[01:18:09] <engla> you can't, right now
[01:18:09] <Eridius> you can't, for the moment
[01:18:13] <Sergio965> I thought Add would automatically give me `+=`.
[01:18:50] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[01:19:42] <engla> it's going to have its own trait
[01:19:47] <engla> += that is
[01:20:12] <Sergio965> Why's that?
[01:20:25] <Eridius> to avoid unnecessary temporaries created via +
[01:20:31] <Sergio965> Is x += y !== x = x + y?
[01:20:39] *** Quits: webber46 (webber46@moz-717E9C5B.cust.bredband2.com) (Quit: webber46)
[01:20:46] <Eridius> Sergio965: `x = x + y` constructs a temporary, the result of `x + y`, when it could just mutate x
[01:20:57] <Seldaek> can haz pub uses now :) http://seld.be/rustdoc/master/std/prelude/index.html
[01:21:07] <Eridius> Seldaek: sweet
[01:21:08] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[01:21:17] <dbaupp> Sergio965: yes; it use to be that x += y would rewrite to x = x + y, but it was done wrong
[01:21:23] <Eridius> Seldaek: can have 'unsafe'? http://seld.be/rustdoc/master/std/vec/raw/fn.set_len.html
[01:21:34] <Seldaek> Eridius: yeah it's noted, I'll check later :)
[01:21:44] <engla> Seldaek: nice, but I think you're showing *all* uses
[01:21:56] <Seldaek> engla: oh, maybe :p
[01:22:08] <Seldaek> haha
[01:22:17] <Seldaek> I was focused on the prelude so I didn't notice
[01:27:51] <Eridius> rusti: let s = "12345"; let idx = s.find('3'); printfln!((idx, s.slice_to(idx)))
[01:27:55] -rusti- pastebinned 9 lines of output: http://ix.io/7y5
[01:28:04] <Eridius> rusti: let s = "12345"; let idx = s.find('3'); printfln!((idx, s.slice_to(idx.unwrap())))
[01:28:05] -rusti- (Some(2), "12")
[01:28:05] -rusti- ()
[01:28:24] <jld> Hi, scrollback.
[01:29:07] <jld> I had explicit sizing *working*.  (Give or take -- the hint could be silently overridden by the nullable pointer thing, and there were no tests.)
[01:29:15] <jld> And then everything changed and it all broke.
[01:29:55] <dbaupp> jld: if you're talking about C-like enums, kemurphy has been working on it
[01:30:11] <dbaupp> (working on it too, I guess.)
[01:30:12] <bjz> jld: orly?
[01:30:22] <bjz> *dbaupp
[01:31:54] *** Joins: eatkinson (eatkinson@moz-F1968613.dsl.bell.ca)
[01:32:45] <Seldaek> engla: ok fixed only real pub uses now ;)
[01:33:11] <engla> great 
[01:33:18] <jld> dbaupp: bjz: All enum discriminants.  There were a bunch of places in rustc or the libs transmuting C-like enums (or passing them to foreign fns), which broke when I tried to auto-size the discriminants.
[01:33:34] <engla> Seldaek: can I pile it on?
[01:33:44] <engla> std::path  says   pub use self::PosixPath;
[01:34:01] *** Joins: tautologico (shung@85E8CF27.DCFCC432.89E5CEC6.IP)
[01:34:08] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[01:34:16] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[01:34:37] <engla> this is  pub use Path = self::PosixPath
[01:35:02] <engla> and then the problem of exposing different code for different platforms
[01:35:05] <engla> :-(
[01:36:04] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[01:36:19] <engla> that particular case is prob. not important
[01:36:23] <Seldaek> engla: let me check, there's a bunch of stuff I didn't quite understand in the json and cmr is AWOL
[01:36:48] <Seldaek> given it's 3am, I'm glad if someone else helps check for issues :)
[01:37:06] <strcat> jld: can you start by auto-sizing just non-c-like ones?
[01:37:57] <Eridius> is there a way right now in a macro to manufacture an ident from two args? e.g. so I can pass "foo" and construct a call to .set_foo()?
[01:38:18] <dbaupp> jld: ah, I think kemurphy was doing that too
[01:38:25] <strcat> Eridius: concat_idents!
[01:38:27] *** Joins: frau (frau@moz-C616DA0A.hsd1.ca.comcast.net)
[01:38:27] <strcat> but it won't work
[01:38:31] *** Quits: KindOne (KindOne@moz-FB02FD5.dynamic.ip.windstream.net) (Ping timeout)
[01:38:31] <Eridius> strcat: :(
[01:38:47] <strcat> you could try...
[01:38:54] <strcat> rusti: let ab = 5; concat_idents!(a, b)
[01:38:55] -rusti- 5
[01:38:57] <strcat> but really it's not going to work
[01:39:00] <strcat> ;p
[01:39:03] <strcat> in all likelihood
[01:39:18] <strcat> rusti: let mut ab = 5; concat_idents!(a, b) = 2; ab
[01:39:18] -rusti- <anon>:5:46: 5:47 error: unexpected token: `=`
[01:39:18] -rusti- <anon>:5          let mut ab = 5; concat_idents!(a, b) = 2; ab
[01:39:18] -rusti-                                                        ^
[01:39:18] -rusti- application terminated with error code 101
[01:39:19] <frau> I'm getting a "missing #[fixed_stack_segment]" error in rust-opengles... do I really need to annotate every binding in there with #[fixed_stack_segment]? "-D cstack" seems to have no effect
[01:39:25] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[01:39:45] <dbaupp> frau: -A cstack probably works
[01:39:46] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[01:40:02] <dbaupp> (but not necessarily what you want.)
[01:40:08] <strcat> well "work"
[01:40:10] <frau> dbaupp: cool, that builds
[01:40:11] <strcat> as in the stack will overflow
[01:40:21] <frau> does that disable segmented stacks?
[01:40:27] <strcat> no
[01:40:30] <strcat> it allocates a large segment
[01:41:10] <strcat> you need #[fixed_stack_segment] on the function calling the C functions
[01:41:20] <Eridius> rusti: struct Foo(); impl Foo { fn set_bar(&self) { printfln!("worked") } } macro_rules! foo(($arg:expr, $op:ident) => ($arg.concat_idents!(set_, $op)())) let f = Foo(); foo!(f)
[01:41:27] -rusti- pastebinned 4 lines of output: http://ix.io/7y6
[01:41:34] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[01:41:44] <Eridius> curious error
[01:41:52] <frau> strcat: so I should really just mechanically add those annotations to everything for best results
[01:42:29] *** Joins: KindOne (KindOne@moz-487A693.dynamic.ip.windstream.net)
[01:42:37] *** Quits: eatkinson (eatkinson@moz-F1968613.dsl.bell.ca) (Quit: eatkinson)
[01:43:16] <engla> there should be a macro to help you frau 
[01:43:22] <Eridius> rusti: fn a_b() { printfln!("worked") } macro_rules! foo(($op:ident) => (a_$op())) foo!(b)
[01:43:23] -rusti- <anon>:5:85: 6:5 error: unresolved name `a_`.
[01:43:23] -rusti- <anon>:5          fn a_b() { printfln!("worked") } macro_rules! foo(($op:ident) => (a_$op())) foo!(b)
[01:43:23] -rusti- <anon>:6     };
[01:43:24] -rusti- error: aborting due to previous error
[01:43:24] -rusti- application terminated with error code 101
[01:43:32] <Eridius> damn
[01:43:38] <Eridius> rusti: fn a_b() { printfln!("worked") } macro_rules! foo(($op:ident) => ($op())) foo!(a_b)
[01:43:39] -rusti- "worked"
[01:43:39] -rusti- ()
[01:44:06] <frau> engla: cool... like wrapping the whole crate in one or something?
[01:44:12] <engla> frau: find the externfn! macro in the tree
[01:44:30] <Eridius> rusti: struct Foo(); impl Foo { fn a_b() { printfln!("worked") } } macro_rules! foo(($arg:ident, $op:ident) => ($arg.$op())) let f = Foo(); foo!(f, a_b)
[01:44:34] -rusti- pastebinned 5 lines of output: http://ix.io/7y7
[01:44:46] <Eridius> rusti: struct Foo(); impl Foo { fn a_b() { printfln!("worked") } } macro_rules! foo(($arg:ident, $op:ident) => ($arg.$op())) let f = Foo; foo!(f, a_b)
[01:44:49] -rusti- pastebinned 5 lines of output: http://ix.io/7y8
[01:45:04] <Eridius> rusti: struct Foo(); impl Foo { fn a_b(&self) { printfln!("worked") } } macro_rules! foo(($arg:ident, $op:ident) => ($arg.$op())) let f = Foo; foo!(f, a_b)
[01:45:06] -rusti- "worked"
[01:45:06] -rusti- ()
[01:45:08] <Eridius> oh good
[01:47:07] <frau> engla: oh, that seems convenient
[01:47:13] <Seldaek> engla: ok fixed the = thing too
[01:47:21] <frau> engla: it would involve basically rewriting this entire opengles wrapper though
[01:47:42] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[01:47:43] <frau> frau: I guess someone's gotta do it?
[01:47:47] <frau> oops
[01:47:51] <frau> engla*
[01:47:57] <engla> hehe you need to motivate yourself
[01:48:01] <bjz> frau: I hate it when that happens :P
[01:48:08] <frau> heheh
[01:48:18] <bjz> talking to oneself
[01:48:36] <engla> rewrite the entire wrapper? not just fixing the syntax of the extern fn declarations?
[01:49:19] *** Joins: eatkinson (eatkinson@moz-F1968613.dsl.bell.ca)
[01:49:54] <Seldaek> Eridius: seems like the unsafe thing isn't exposed to me :/
[01:50:10] *** Joins: webber46 (webber46@moz-717E9C5B.cust.bredband2.com)
[01:50:18] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[01:50:26] *** Joins: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net)
[01:50:34] <engla> Seldaek: you're working quickly
[01:50:43] *** Joins: fiirhok (fiirhok@moz-4BE3125.vc.shawcable.net)
[01:50:48] <Eridius> Seldaek: :/
[01:51:20] <Seldaek> engla: it's not so hard :) https://github.com/Seldaek/rustdoc_web/commit/b9d1458d1e10777624580a7c39c42ce82e4a61e5
[01:51:50] *** Quits: webber46 (webber46@moz-717E9C5B.cust.bredband2.com) (Ping timeout)
[01:51:59] *** Joins: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net)
[01:52:00] <Seldaek> Eridius: I can probably do it for methods, but not functions yet
[01:52:44] <engla> strange moon language with ===
[01:54:51] <Seldaek> most of my dev is spent on php and js, both languages have different truthy/falsey resolution rules so one quickly learns to use === everywhere :p
[01:57:26] <Sergio965> What does, "only refutable patterns allowed here" means? I'm doing: "let end = ...".
[01:57:42] <Sergio965> Oh, is 'end' a special variable?
[01:58:05] <Seldaek> Eridius: ok it's there now http://seld.be/rustdoc/master/std/vec/trait.ImmutableCopyableVector.html - should come on bare fns later
[01:58:49] <strcat> Sergio965: no, it's not
[01:58:54] <strcat> do you have a static called end?
[01:59:00] <Sergio965> I do indeed.
[01:59:31] <Sergio965> Shouldn't I still be able to create a local with the same name?
[02:00:11] <Eridius> Seldaek: yay
[02:00:34] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[02:01:01] <engla> Sergio965: it's a feature that statics can be used in patterns, but this is a side effect.. :-|
[02:01:27] * dbaupp wishes we still had the warning for statics on by default
[02:01:39] <engla> oh right
[02:01:39] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[02:01:59] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[02:02:23] *** Joins: victorporof (victorporo@C2FADE94.E7C615F.41763F20.IP)
[02:02:37] <dbaupp> we should probably have a `note: `end` is a static variable` or something
[02:02:43] <engla> Seldaek: did you look into docs for methods on enums?
[02:03:02] <Seldaek> engla: waaa? is there such a thing
[02:03:11] <engla> std::option::Option
[02:03:24] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Connection reset by peer)
[02:03:28] <engla> and others
[02:03:34] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[02:03:43] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[02:03:52] <Seldaek> yes yes.. interesting
[02:04:04] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[02:04:06] <Seldaek> I don't know why I never thought of that
[02:04:17] <Seldaek> but I can do it like the structs
[02:04:26] *** Quits: victorporof (victorporo@C2FADE94.E7C615F.41763F20.IP) (Ping timeout)
[02:05:51] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[02:06:52] *** Quits: eatkinson (eatkinson@moz-F1968613.dsl.bell.ca) (Quit: eatkinson)
[02:08:46] *** Joins: victorporof (victorporo@C2FADE94.E7C615F.41763F20.IP)
[02:10:59] *** Quits: Earnestly (earnest@B0BDF733.8FDE20A.5411983D.IP) (Ping timeout)
[02:16:05] *** Joins: ross (ross@moz-8A84103E.br.br.cox.net)
[02:16:20] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[02:16:21] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/kavafg
[02:16:21] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[02:18:35] <geomyidae> are arduino/arm stuff is so cool. :)
[02:19:04] *** Quits: victorporof (victorporo@C2FADE94.E7C615F.41763F20.IP) (Quit: victorporof)
[02:19:09] *** Quits: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net) (Client exited)
[02:19:19] *** Joins: victorporof (victorporo@C2FADE94.E7C615F.41763F20.IP)
[02:19:27] *** Quits: victorporof (victorporo@C2FADE94.E7C615F.41763F20.IP) (Client exited)
[02:19:35] <geomyidae> no idea why I wrote "are".
[02:20:08] *** Joins: dwhyte (dwhyte@1922756A.EDC594B0.7BF4A4B0.IP)
[02:20:52] *** Joins: webber46 (webber46@moz-717E9C5B.cust.bredband2.com)
[02:21:11] *** Quits: Sergio965 (sergiobz@moz-BB21156B.dynamic.csail.mit.edu) (Ping timeout)
[02:21:20] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[02:21:20] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/KOHKjw
[02:21:20] <ghrust> 13rust/06auto 1439207a3 15Alex Crichton: Remove ifmt hax and implement fprintf
[02:21:20] <ghrust> 13rust/06auto 1467512f7 15Alex Crichton: Implement a wrapper macro around fprintf -- ifmtf
[02:21:21] <ghrust> 13rust/06auto 14eb836dd 15Alex Crichton: Settle on the format/write/print family of names
[02:21:23] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[02:22:21] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[02:22:33] *** Quits: webber46 (webber46@moz-717E9C5B.cust.bredband2.com) (Ping timeout)
[02:28:03] *** Joins: maik (maik___@moz-6AB83A6F.dip0.t-ipconnect.de)
[02:33:10] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[02:35:19] <frau> format! and write! ? splendid
[02:35:27] *** Quits: maik (maik___@moz-6AB83A6F.dip0.t-ipconnect.de) (Ping timeout)
[02:35:34] <Eridius> grr, borrowck isn't returning my borrow fast enough
[02:38:06] <Eridius> what the hell? I just refactored to move my mutation to a completely separate trailing expression after the one that uses the borrowed value, and it claims it's still borrowed!
[02:39:48] *** Joins: rory (rory@moz-BBD47402.hsd1.ca.comcast.net)
[02:39:52] <Eridius> wow. even util::ignore(borrowed_value) doesn't help
[02:41:01] <Eridius> sheesh. finally, using a nested scope works.
[02:42:28] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[02:44:06] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[02:44:10] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[02:46:16] <rory> what version was str::to_c_str added? i can't get it to compile on 0.7
[02:46:35] <Eridius> pretty recent in master
[02:46:42] <Eridius> 0.7 has str::as_c_str() instead
[02:46:58] <engla> much has changed already since 0.7
[02:47:19] <rory> should i just develop against master
[02:47:26] <darkf> yes
[02:47:59] <rory> brew search rust
[02:50:18] <bjz> rory: it's much easier to incrementally update your code in line with master
[02:50:28] <bjz> rory: than to wait until 0.8
[02:51:16] <bjz> rory: master is pretty damn stable - the PRs are all reviewed by trusted folk and we have a buildbot
[02:51:55] *** Joins: webber46 (webber46@moz-717E9C5B.cust.bredband2.com)
[02:52:28] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[02:53:39] <h3r3tic> bjz: I'm getting a crash in examples/triangle.rs when trying to call the first extension function ( glCreateShader ) with the new glfw-rs. Does the new extern "C" ffi stuff work on msys/windows? :o
[02:53:54] <bjz> hum
[02:54:05] <bjz> you might have to ask nmatsakis
[02:54:10] <h3r3tic> *poke*
[02:54:17] <bjz> what is the error?
[02:54:21] <bjz> any error?
[02:54:23] <rory> bjz: ok cool i can do that
[02:54:41] <rory> even though compilation takes a good minute on my mac mini :P
[02:54:42] *** Joins: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP)
[02:54:43] <h3r3tic> http://pastie.org/8267139
[02:55:11] <frau> rust strings aren't null-terminated internally right?
[02:55:19] <bjz> frau: no
[02:55:23] <bjz> frau: ptr and len
[02:55:41] <frau> any particular reason not to have both the length delimitation and an extra null?
[02:55:52] <frau> seems convenient for C ffi
[02:56:20] <SiegeLord> Doesn't work well with string slices
[02:56:20] <h3r3tic> and the modified triangle.rs which is causing the crash is: http://pastie.org/8267141
[02:56:36] <frau> ah, slices, I see
[02:56:45] <bjz> SiegeLord: why?
[02:56:58] *** Quits: zz_kimundi (kimundi@moz-22DD76BD.dip0.t-ipconnect.de) (Ping timeout)
[02:57:01] <SiegeLord> It's what it was up until a few weeks ago, and then the nulls were dropped
[02:57:21] <h3r3tic> are static strings still padded with \0 though?
[02:57:47] <h3r3tic> or do ALL strings passed to C need an allocation and padding now? :S
[02:58:00] <pepper_chico> how the voting of such drop happens?
[02:58:20] <bjz> pepper_chico: you might have to rephrase that
[02:58:35] *** Quits: webber46 (webber46@moz-717E9C5B.cust.bredband2.com) (Ping timeout)
[02:59:00] <bjz> h3r3tic: do you have a linux box/vm that you can quickly test on?
[02:59:10] <Seldaek> bjz: I think the question is "who decides which null bytes live or die"
[02:59:19] <pepper_chico> how the decision of dropping null terminated string, for example, happened
[02:59:33] <h3r3tic> bjz: I do have a linux box, but it would't be quick. building the compiler and the latest glfw3 is at least an hour on my box
[02:59:45] <bjz> h3r3tic: dang
[03:00:11] *** Joins: zz_kimundi (kimundi@moz-74ED7B9D.dip0.t-ipconnect.de)
[03:00:28] <bjz> h3r3tic: could you try a symple example just using glfw?
[03:00:29] *** zz_kimundi is now known as kimundi
[03:00:51] <SiegeLord> bjz, Well, you can't make the trailing null guarantee with a slice
[03:01:14] <bjz> h3r3tic: eg, loading a pointer to say, glGetError, then transmuting to a extern "C" fn() -> GLenum
[03:01:22] <bjz> SiegeLord: makes sense
[03:01:31] <SiegeLord> Additionally, Rust strings are UTF8, and UTF8 allows embedded NULLs, so it's not like it used to work exactly correctly
[03:01:58] <h3r3tic> bjz: btw I was looking through the code, and spotted "pub fn glfwGetProcAddress(procname: *c_char) -> Option<GLFWglproc>;" as an extern C function. I wonder how this is legal
[03:02:11] <bjz> h3r3tic: it is
[03:02:34] <bjz> h3r3tic: it returns None if the fn ptr is null
[03:03:18] <bjz> rusti: std::sys::size_of::<Option<extern "C" fn()>>()
[03:03:22] -rusti- 8
[03:03:29] <bjz> h3r3tic:^
[03:03:42] <h3r3tic> rusti: std::sys::size_of::<extern "C" fn()>()
[03:03:44] -rusti- 8
[03:03:47] <h3r3tic> hm
[03:03:53] <Seldaek> pepper_chico: usually decisions are made by consensus of the core devs, except maybe a few cases where graydon makes a BDFL call 
[03:04:02] <Seldaek> as far as I know anyway
[03:04:15] <pepper_chico> hmm, ok
[03:04:24] <h3r3tic> is that some sort of a special case in the compiler?
[03:05:12] <bjz> rusti: enum A<T> { A1(T), A2 } std::sys::size_of::<A<&int>>()
[03:05:14] -rusti- 8
[03:05:17] <bjz> rusti: enum A<T> { A1(T), A2 } std::sys::size_of::<A<int>>()
[03:05:18] -rusti- 16
[03:05:34] <h3r3tic> :o
[03:05:42] <bjz> rusti: enum A<T> { A1(T), A2 } std::sys::size_of::<A<~int>>()
[03:05:43] -rusti- 8
[03:05:53] <bjz> rusti: enum A<T> { A1(T), A2 } std::sys::size_of::<A<@int>>()
[03:05:54] -rusti- 8
[03:06:12] <bjz> h3r3tic: basically optimises to a null pointer
[03:06:18] <h3r3tic> neat :)
[03:06:19] <h3r3tic> tnx
[03:06:32] <h3r3tic> btw, for the record, basic.rs works just fine
[03:06:43] <bjz> rusti: enum A { A1, A2 } std::sys::size_of::<A>()
[03:06:45] -rusti- 8
[03:07:17] <bjz> h3r3tic: the size/layout of enums are intentionally undefined, so rust can do optimisations
[03:07:39] <h3r3tic> aye
[03:08:02] *** Joins: Sergio965 (sergiobz@moz-8D9DFEEF.hsd1.ma.comcast.net)
[03:08:06] <bjz> h3r3tic: interesting
[03:08:38] <bjz> h3r3tic: do you get any info about the error?
[03:09:09] <h3r3tic> besides the gdb stack trace?
[03:09:14] <bjz> mm
[03:09:17] <h3r3tic> not really. trying to play with it atm
[03:09:21] <bjz> mmk
[03:09:32] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Ping timeout)
[03:09:39] <bjz> was it a segfault?
[03:09:48] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[03:09:50] <bjz> or did it hang, then crash?
[03:10:06] <h3r3tic> segfault
[03:10:17] <h3r3tic> the app immediately quit
[03:10:26] <h3r3tic> so I ran it with gdb, and it said SIGSEGV
[03:10:31] <bjz> ok
[03:10:55] <bjz> troubling
[03:12:05] <bjz> could you get the is_loaded value of a really obscure function that your driver wouldn't support?
[03:12:21] <bjz> ie. gl::___::is_loaded()
[03:16:09] <h3r3tic> LoadTransposeMatrixxOES::is_loaded(): false
[03:16:13] <h3r3tic> bjz ^
[03:16:26] <bjz> hm
[03:16:31] <h3r3tic> a few other ones, which I thought would be obscure, were fine
[03:17:18] <bjz> could you try calling one of the obscure, unloaded ones?
[03:17:18] <bjz> like LoadTransposeMatrixxOES
[03:17:40] <bjz> if should fail with a message "LoadTransposeMatrixxOES not loaded"
[03:18:36] <h3r3tic> task <unnamed> failed at 'LoadPaletteFromModelViewMatrixOES was not loaded'
[03:18:50] <h3r3tic> ( used a different one, which didn't ask for any params :P )
[03:18:55] <bjz> ok, that's good
[03:19:36] <bjz> hmm
[03:20:29] <bjz> so it's ok with gl::ClearColor(0.3, 0.3, 0.3, 1.0)
[03:20:37] <bjz> and gl::Clear(gl::COLOR_BUFFER_BIT)
[03:20:47] <bjz> but not gl::CreateShader(ty)
[03:20:51] <bjz> :/
[03:21:19] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[03:21:49] <h3r3tic> ha
[03:21:57] <h3r3tic> I just called 'UnlockArraysEXT' successfully
[03:22:04] <bjz> ?
[03:22:07] <h3r3tic> an extension function which takes no params...
[03:22:08] <bjz> is that bad?
[03:22:15] <h3r3tic> makes me wonder. calling conventions?
[03:22:28] <h3r3tic> extension functions on windows could be stdcall rather than cdecl
[03:22:44] <bjz> ah, interesting
[03:23:14] <bjz> :(
[03:23:32] <bjz> (whyyy you windows so weird)
[03:23:35] <h3r3tic> xD
[03:23:41] *** Quits: frau (frau@moz-C616DA0A.hsd1.ca.comcast.net) (Quit: out)
[03:24:02] <bjz> they just don't like C do they?
[03:24:05] <bjz> weirdos
[03:24:08] <h3r3tic> nope!
[03:26:20] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[03:26:20] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/KOHKjw
[03:26:20] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[03:26:52] <h3r3tic> so how do you specify stdcall with the ffi stuff
[03:27:15] <bjz> nmatsakis: ??
[03:27:37] <bjz> nmatsakis: is that implemented yet?
[03:28:03] <bjz> rusti: extern "stdcall" fn foo() {}
[03:28:04] -rusti- ()
[03:28:12] <bjz> rusti: extern "blllaga" fn foo() {}
[03:28:13] -rusti- <anon>:5:26: 5:28 error: illegal ABI: expected one of [cdecl, stdcall, fastcall, aapcs, Rust, C, rust-intrinsic], found `blllaga`
[03:28:13] -rusti- <anon>:5          extern "blllaga" fn foo() {}
[03:28:13] -rusti-                                    ^~
[03:28:13] -rusti- error: aborting due to previous error
[03:28:13] -rusti- application terminated with error code 101
[03:28:16] <h3r3tic> ha
[03:28:23] <h3r3tic> I'll juse blllaga then.
[03:28:28] <bjz> ye
[03:28:50] <bjz> juse it - should workk
[03:29:25] <h3r3tic> I'll also throw in --do-what-i-mean
[03:29:30] <bjz> hmm, wonder if I could do it using a macro
[03:30:06] <bjz> or compile time attribs
[03:30:28] <h3r3tic> or a preprocessor
[03:30:30] * h3r3tic ducks
[03:31:02] <bjz> the difficulty is you can't put arrtibs on macros
[03:31:16] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[03:31:16] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/52AcWA
[03:31:16] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[03:31:19] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[03:31:19] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/dVv7gw
[03:31:19] <ghrust> 13rust/06auto 144c5f625 15Brian Anderson: Fix some vector function failure tests. Closes #8698
[03:31:19] <ghrust> 13rust/06auto 14da08b02 15bors: auto merge of #8701 : brson/rust/issue-8698, r=thestinger
[03:31:19] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[03:31:44] <h3r3tic> mm I sees
[03:31:52] <bjz> rusti: #[cfg("foo")] macro_rules! foo(() => ())
[03:31:52] -rusti- <anon>:5:15: 5:20 error: expected ident, found `"foo"`
[03:31:53] -rusti- <anon>:5          #[cfg("foo")] macro_rules! foo(() => ())
[03:31:53] -rusti-                         ^~~~~
[03:31:53] -rusti- application terminated with error code 101
[03:32:04] <bjz> rusti: #[cfg(foo)] macro_rules! foo(() => ())
[03:32:05] -rusti- <anon>:5:19: 5:20 error: expected item after attributes
[03:32:05] -rusti- <anon>:5          #[cfg(foo)] macro_rules! foo(() => ())
[03:32:05] -rusti-                             ^
[03:32:05] -rusti- error: aborting due to previous error
[03:32:05] -rusti- application terminated with error code 101
[03:34:58] <bjz> so you can't do something like: #[cfg(target_os = "win")] extfn_ty((fn ...) => (extern "stdcall" fn ...)) #[cfg(not(target_os = "win"))] extfn_ty((fn ...) => (extern "C" fn ...))
[03:35:16] <h3r3tic> yeah, got it
[03:36:36] <pepper_chico> sad that, current syntastic support for rust is broken, at last for me, after any error detected, even if the source is changed, the errors signs don't go away =/
[03:37:04] *** Quits: cdidd (cdidd@moz-50AC551E.broadband.corbina.ru) (Input/output error)
[03:38:35] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Ping timeout)
[03:39:32] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[03:43:42] <h3r3tic> stdcall doesn't seem to cut it :S
[03:43:57] <h3r3tic> CreateShader itself works, but subsequent stuff gives me crashes
[03:44:08] <h3r3tic> and the stack trace is invalid then
[03:46:31] <h3r3tic> maybe it's not supposed to work on windows yet :P
[03:47:05] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[03:47:05] *** ChanServ sets mode: +o brson
[03:53:31] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[03:54:55] <brson> std isn't valgrind clean again
[03:55:26] *** Joins: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net)
[03:58:05] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[03:58:28] <bjz> h3r3tic: :(
[03:58:32] *** Joins: webber46 (webber46@moz-717E9C5B.cust.bredband2.com)
[03:59:22] <olsonjeffery> brson: institute mandatory beverage purchases for whoever causes it?
[04:00:12] *** Quits: webber46 (webber46@moz-717E9C5B.cust.bredband2.com) (Ping timeout)
[04:05:27] <kemurphy> dbaupp: jld: i was waiting to worry about auto-sizing until i unified the representation of structs and enums behind the scenes -- there's been enough churn since i started working on it that i think i need to start fresh anyway
[04:07:28] <olsonjeffery> brson: ping
[04:14:19] <Eridius> wow the bors queue has dropped quite a lot lately
[04:15:50] *** Joins: mark_edward (quassel@BA94DDD1.F6120EAE.426A8071.IP)
[04:18:19] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[04:18:26] <engla> yeah lots of improvements to cycle time
[04:18:43] <bjz> rusti: std::sys::size_of::<Result<&int, &int>>()
[04:18:46] -rusti- 16
[04:18:55] <bjz> engla: where did it come from?
[04:19:26] <engla> graydon magic
[04:19:30] <bjz> heh
[04:19:47] <bjz> graydon the wizard
[04:19:54] <brson> not valgrinding doubled cycle time, but made rust not valgrind clean
[04:20:06] <brson> almost immediately
[04:20:14] <brson> olsonjeffery: pong
[04:20:38] <brson> i keep forgetting what i'm working on :(
[04:20:47] <brson> so many things i'm supposed to be doing
[04:20:54] <olsonjeffery> brson: hey.. so im sort of doing some design work in rt::file::io .. i know we talked, a while back, about wanting to take inspiration from .net's io API.. you can sorta see it in FileStream (sorta)
[04:21:36] <olsonjeffery> anyways.. so i was thinking of how to approach a FileInfo type thing in rust.. but our language semantics are so different that it feels like it'd be really out of place (lots of in-place mutability to make a rust FileInfo that behaves like the c# one)
[04:21:48] <bjz> rusti: assert!(false, "hi")
[04:21:50] -rusti- task <unnamed> failed at 'hi', <anon>:5
[04:21:50] -rusti- application terminated with error code 101
[04:21:56] <olsonjeffery> also all of the stat-like checks would have to be methods because a FileInfo's state would change over time
[04:22:16] <olsonjeffery> eg you do FileInfo::new("...") with a path to a non-existent file
[04:22:33] <olsonjeffery> then do .create() or .open(file_mode), etc .. and that changes info
[04:22:49] <olsonjeffery> i guess we'd want to re-stat the fd every time we do some kind of transaction on a "live" file, as well?
[04:23:39] <olsonjeffery> anyways. as i said above.. the runtime/language semantics of c# (most things are references on the heap, mutability ran amok, etc) kind of makes this natural
[04:23:59] <olsonjeffery> and while its doable in rust, it feels sorta out of place, at least to my sensibilities. so i dunno. do you have an opinion on this?
[04:26:50] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[04:27:22] <olsonjeffery> what feels "natural" to me is a rt::io::file::info<P: PathLike>(p: &PathLike) -> Option<FileInfo> api that returns a POD FileInfo of the state of the file at the path when called..
[04:27:54] <olsonjeffery> file::open, etc remains as is (it's implied, with a "living FileInfo" approach ala c# that file::open, unlink, etc would be folded into it..)
[04:28:47] <brson> olsonjeffery: i would expect FileInfo ala .NET to restat the file on every operation since it's always racing with the rest of the OS. If you were to have a FileInfo that is an immutable data structure then that requires loading the you have to find all the possible info someone might want at once. Is that harder then accessing specific bits of info on demand?
[04:28:57] *** Joins: webber46 (webber46@moz-717E9C5B.cust.bredband2.com)
[04:29:08] <brson> sorry for the ungrammaticalness
[04:29:23] <olsonjeffery> that's what i was imagining (re-stat after every command)
[04:30:08] <brson> the .NET-style FileInfo basically just stores the Path, then asks the OS for whatever info is requested by whatever method is called
[04:30:08] <olsonjeffery> and, yeah.. and as an application dev, i have, over time drifted away from "objects" thats carry data *and* business logic.. i usually seperate the two
[04:30:23] <olsonjeffery> brson: yeah..
[04:31:07] <brson> "If you are performing multiple operations on the same file, it can be more efficient to use FileInfo instance methods instead of the corresponding static methods of the File class, because a security check will not always be necessary."
[04:31:27] <brson> Not sure the implications of that
[04:31:32] <olsonjeffery> that's a .net impl detail that doesn't apply to us
[04:31:34] <brson> .NET is apparently caching something
[04:31:40] <olsonjeffery> uv_fs_* is totally unbuffered
[04:31:48] <olsonjeffery> no they're probably using some win32 private api
[04:33:01] <olsonjeffery> well, i can't say for sure. but yeah, once again: .net semantics vs rust semantics
[04:33:44] <olsonjeffery> mainly: with a .net-style FileInfo, we'd end up managing that state. all the methods would be &mut self
[04:34:50] <Eridius> rusti: macro_rules! a(() => (macro_rules! b(() => ("yay")) b!()) a()
[04:34:51] -rusti- <anon>:6:4: 6:5 error: incorrect close delimiter: `}`
[04:34:51] -rusti- <anon>:6     };
[04:34:51] -rusti-              ^
[04:34:51] -rusti- application terminated with error code 101
[04:35:03] <brson> olsonjeffery: why would all methods be mutable? seems like every method would just query the OS and return that info
[04:35:13] <Eridius> rusti: macro_rules! a(() => (macro_rules! b(() => ("yay")) b!())) a()
[04:35:14] -rusti- <anon>:5:68: 5:69 error: unresolved name `a`.
[04:35:14] -rusti- <anon>:5          macro_rules! a(() => (macro_rules! b(() => ("yay")) b!())) a()
[04:35:14] -rusti-                                                                              ^
[04:35:15] -rusti- error: aborting due to previous error
[04:35:15] -rusti- application terminated with error code 101
[04:35:18] <Eridius> rusti: macro_rules! a(() => (macro_rules! b(() => ("yay")) b!())) a!()
[04:35:19] -rusti- <anon>:5:44: 5:45 error: expected open delimiter
[04:35:19] -rusti- <anon>:5          macro_rules! a(() => (macro_rules! b(() => ("yay")) b!())) a!()
[04:35:21] -rusti-                                                      ^
[04:35:23] -rusti- application terminated with error code 101
[04:35:27] <Eridius> huh, odd error
[04:35:42] <brson> olsonjeffery: did you fs pr land?
[04:35:44] <olsonjeffery> brson: i would imagine any operation that could change the state of the file requires us to update a cache'd stat object
[04:35:47] <olsonjeffery> brson: yes!
[04:35:50] <olsonjeffery> \o/
[04:35:53] <brson> nice
[04:36:19] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[04:36:20] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/dVv7gw
[04:36:20] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[04:36:27] <brson> olsonjeffery: i would not imagine we would want to cache it. if they asked for the state again, it may have changed and we'd just want to query again. doesn't seem cachable to me
[04:36:45] * olsonjeffery nods.
[04:37:33] <olsonjeffery> so what about if/when we instantiate a FileInfo for a non-existent path then do some knd of open/create operation? we would hang onto that fd, wouldn't we?
[04:37:54] <olsonjeffery> (once again playing-along with the idea of a .net-style FileInfo)
[04:38:03] <olsonjeffery> that's one thing about .net FileInfo
[04:38:23] <olsonjeffery> var fi = new FileInfo("c:\some\bogus\path.txt"); fi.Exists; // false
[04:38:40] <olsonjeffery> fi.Create(); fi.Exists; // true if perms etc panned out
[04:39:42] *** Quits: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net) (Client exited)
[04:40:38] *** Quits: webber46 (webber46@moz-717E9C5B.cust.bredband2.com) (Ping timeout)
[04:41:20] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[04:43:55] <olsonjeffery> i dunno, maybe FileInfo keeps an Option<c_int> depending on how it was created (FileInfo::new(p) vs FileInfo::Open(p, mode, access) )...
[04:44:33] <brson> olsonjeffery: do some FileInfo operations require an fd and some not?
[04:45:05] <olsonjeffery> brson: well some would be possible w/o an fd (any stat(2)-like information)
[04:45:15] <brson> olsonjeffery: which do require an fd?
[04:45:20] <olsonjeffery> but FileInfo is also a launching off point to open read/write/readwrite FileStreams
[04:45:36] *** Joins: futurehorizons (Mibbit@moz-61717F7A.bitstream.orcon.net.nz)
[04:45:40] <olsonjeffery> so, in the vision of a non-&mut self FileInfo
[04:46:23] <olsonjeffery> we'd carry that Option<c_int> and check if its a Some and we could just use the IoFactory call to get a UvFileStream from a raw fd
[04:47:01] <olsonjeffery> otherwise we go through the dance, inferring FileMode etc stuff based on the call (.create(), .get_read_stream(), .get_write_stream() .. etc)
[04:47:30] <olsonjeffery> in which case, at least w/ the latter two, we could just return &Writer or &Reader trait objects instead of full on FileStream's
[04:47:44] <olsonjeffery> .net does this in certain cases, too.. and most times its an inconvenience, tbh.
[04:47:52] <olsonjeffery> but that encapsulation.
[04:48:48] <toddaaro> brson: awesome! your PR finally made it
[04:48:59] *** Quits: mark_edward (quassel@BA94DDD1.F6120EAE.426A8071.IP) (Ping timeout)
[04:49:00] <toddaaro> brson: I'll have to check that out and see how it runs
[04:49:25] <futurehorizons> Rust 0.7 on Windows 8 x64 using MinGW. I'mfiles from 0.5 to 0.7. I don't seem to be able to access functions in std::os such as path_exists() and path_is_directory. These are the are the only calls I make in std so it may be that all libraries don't work. In 0.5 I had to have the std*.dll in the path I was compiling to. Is there a similar issue in 0.7?
[04:49:27] <olsonjeffery> .net FileInfo has Open(FileMode, FileAccess, etc..) to open a FileStream according to the provided perms
[04:50:15] <olsonjeffery> OpenRead(), OpenWrite() etc.. but i was mistaken, those actually return full-on FileStreams that will throw if you try to do an operation that you don't have permissions (eg calling .Write() on a FileStream opened w/ OpenRead() )
[04:50:22] *** Joins: zeux (zeux@moz-80D1F912.hsd1.ca.comcast.net)
[04:51:29] *** IRCMonkey52873 is now known as rhelmer
[04:51:35] *** Joins: tikue (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[04:52:04] <olsonjeffery> brson: and to answer your question directly: strictly speaking, only uv_fs_read/write *require* an fd
[04:53:14] <olsonjeffery> ok, wrong again: there are a few others, like uv_fs_ftruncate
[04:54:18] <olsonjeffery> but there are tons of ones like uv_fs_stat/fstat uv_fs_utime/futime that have dual paths that take char* paths or uv_file fd's
[04:57:30] <brson> toddaaro: i had to make a few compromises, so it's not going to be the 36% claimed. in particular I decided it wouldn't be prudent to turn off rtassert! yet
[04:59:34] <brson> olsonjeffery: why have both FileInfo::open and FileStream::open?
[05:00:45] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[05:01:17] *** Quits: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[05:01:35] <bjz> rusti: enum Foo;
[05:01:35] -rusti- <anon>:5:17: 5:18 error: expected `{` but found `;`
[05:01:35] -rusti- <anon>:5          enum Foo;
[05:01:35] -rusti-                           ^
[05:01:35] -rusti- application terminated with error code 101
[05:01:39] *** Joins: inf-groupoid (user@580120F5.8ED93E28.1C8C8CE9.IP)
[05:01:52] <olsonjeffery> brson: wouldn't have both if we went ahead with a more .net-like FileInfo (behaviorally, putting aside the mutability stuff)
[05:02:02] <olsonjeffery> FileInfo would probably contain most of the API of rt::io::file
[05:02:16] <olsonjeffery> that's why im asking.. now that the initial push to wire up newrt to some kind of file is done
[05:02:21] <olsonjeffery> we can actually exert some design muscle
[05:02:36] <olsonjeffery> some kind of file io*
[05:02:38] <toddaaro> brson: awe, makes sense though
[05:02:46] <toddaaro> brson: we should set up a cfg flag for rtassert!
[05:02:53] <toddaaro> brson: -O3 disables, etc.
[05:03:14] <toddaaro> I've also been pondering metrics, I want to add something back in for debug mode
[05:03:30] *** Joins: mark_edward (quassel@BA94DDD1.F6120EAE.426A8071.IP)
[05:04:03] *** Quits: fiirhok (fiirhok@moz-4BE3125.vc.shawcable.net) (Quit: This computer has gone to sleep)
[05:07:27] *** Joins: fiirhok (fiirhok@moz-4BE3125.vc.shawcable.net)
[05:08:40] <bjz> so it's not possible to do something like: fn consume(mut self)?
[05:08:58] *** Quits: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[05:09:23] *** Joins: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net)
[05:10:00] *** Joins: webber46 (webber46@moz-717E9C5B.cust.bredband2.com)
[05:10:26] <engla> fn consume(self) { let mut mut_self = self; }  is ok
[05:10:44] <bjz> would that copy though?
[05:10:54] <inf-groupoid> bjz: Do you want to mutate the original object?
[05:10:54] <Eridius> it would move
[05:11:02] <Eridius> engla: can you not say `let mut self = self`? is `self` too special?
[05:11:41] *** Quits: webber46 (webber46@moz-717E9C5B.cust.bredband2.com) (Ping timeout)
[05:12:01] <engla> we should try
[05:12:22] <bjz> rusti struct A; impl Drop for A { fn drop(&self) {} } impl A { fn consume(self) { let mut a = self; } }
[05:12:32] <bjz> rusti: struct A; impl Drop for A { fn drop(&self) {} } impl A { fn consume(self) { let mut a = self; } }
[05:12:39] -rusti- pastebinned 7 lines of output: http://ix.io/7yg
[05:12:49] <engla> it's not ok to reassign self
[05:12:56] <engla> rusti: struct X; impl X { fn consume(self) { let mut self = self; } }
[05:12:57] <bjz> ok, that seemed to work
[05:12:57] -rusti- <anon>:5:51: 5:54 error: found `self` in ident position
[05:12:57] -rusti- <anon>:5          struct X; impl X { fn consume(self) { let mut self = self; } }
[05:12:57] -rusti-                                                             ^~~
[05:12:57] -rusti- error: aborting due to previous error
[05:12:57] -rusti- application terminated with error code 101
[05:14:18] <bjz> rusti: struct A { priv x: std::util::NonCopyable } impl Drop for A { fn drop(&self) {} } impl A { fn consume(self) { let mut a = self; } }
[05:14:21] -rusti- pastebinned 7 lines of output: http://ix.io/7yi
[05:14:32] <bjz> cool
[05:14:40] *** Quits: mark_edward (quassel@BA94DDD1.F6120EAE.426A8071.IP) (Ping timeout)
[05:17:18] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[05:17:20] *** Joins: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au)
[05:18:21] <brson> Trying to collect research that influenced Rust https://github.com/mozilla/rust/wiki/Note-research
[05:18:28] <brson> put all the concurrency papers I know of there
[05:18:40] <brson> I'm sure there are some type system papers that I can't recall
[05:18:56] <brson> anybody have a link to eholk's gpu paper?
[05:19:21] <inf-groupoid> Can I open a file for both reading and writing, without dropping down to C calls?
[05:20:14] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[05:20:47] <futurehorizons> People implementing Rust protocols could take a look at "Micro Protocols" research http://www.cse.chalmers.se/~olafl/OlafLandsiedel_PhDThesis.pdf
[05:22:20] <futurehorizons> Build protocols from smaller ones.
[05:22:25] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Connection reset by peer)
[05:24:02] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[05:24:30] <lkuper> brson: this one? http://www.cs.indiana.edu/~eholk/papers/hips2013.pdf
[05:24:45] <brson> lkuper: thanks
[05:24:58] <lkuper> some of this research counts as influenced *by* Rust :)
[05:25:10] <brson> looking for both :)
[05:25:25] <brson> definitely need more typesystem stuff. added the cyclone region paper
[05:25:34] <lkuper> nmatsakis had a HotPar paper about Rust, right?
[05:27:10] <brson> i don't recall one! he had a paper rejected from one of the major conference. don't think there are any public preprints
[05:28:12] <brson> i know there's a prominent paper on traits that pcwalton at least read
[05:28:20] <Eridius> hrm, when I run `make check-stage2-std RUST_LOG=some::invalid::spec`, besides complaining that the spec matched nothing, it also emits the error!() line from rustc::middle::kind::check_impl_of_trait()
[05:28:29] <Eridius> (incidentally, why is that an error!()? It should be maybe an info!())
[05:29:03] *** Quits: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net) (Quit: leaving)
[05:29:06] <lkuper> brson: ah, I was thinking of this: https://www.usenix.org/conference/hotpar12/parallel-closures-new-twist-old-idea .  it's not really about rust -- there are a couple of sentences in the future work section about "hey, maybe we could do this in rust".
[05:30:11] <lkuper> brson: oh, we definitely want the traits paper.  http://scg.unibe.ch/archive/papers/Scha03aTraits.pdf
[05:31:45] <brson> huh. i hadn't seen that hotpar presentation. weird
[05:33:15] <lkuper> I didn't know that the Reagents paper was an influence on Rust
[05:33:21] <brson> lkuper: it's not yet :)
[05:33:25] <lkuper> haha
[05:34:15] <brson> there's a notable paper about failing fast that influenced graydon's thoughts about task failure that I can't locate. not sure if i ever read it
[05:34:48] <Eridius> what the.. debug!() output backslash-escapes single-quotes in the string. Single-quotes aren't special!
[05:35:28] <olsonjeffery> inf-groupoid: are you using rust HEAD? if so, there's std::rt::io::file
[05:35:39] <Eridius> rusti: printfln!("%?", "foo 'bar'")
[05:35:39] -rusti- "foo \'bar\'"
[05:35:39] -rusti- ()
[05:35:47] <brson> futurehorizons: thanks for the link
[05:38:30] <inf-groupoid> olsonjeffery: Please excuse my ignorance. What's HEAD?
[05:38:37] *** Quits: fiirhok (fiirhok@moz-4BE3125.vc.shawcable.net) (Quit: This computer has gone to sleep)
[05:40:05] <lkuper> brson: I haven't read the "failing fast" one.  Unless it was the legendary "Crash-Only Software" paper: https://www.usenix.org/legacy/events/hotos03/tech/full_papers/candea/candea.pdf
[05:40:12] <Eridius> inf-groupoid: HEAD is the tip of master
[05:40:25] *** Joins: webber46 (webber46@moz-717E9C5B.cust.bredband2.com)
[05:41:35] <inf-groupoid> Eridius: olsonjeffery: Ah, so, like, the most bleeding edge version? I am using 0.7 right now.
[05:41:53] *** Quits: Sergio965 (sergiobz@moz-8D9DFEEF.hsd1.ma.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[05:42:05] *** Quits: webber46 (webber46@moz-717E9C5B.cust.bredband2.com) (Ping timeout)
[05:42:21] <lkuper> brson: there are surely some papers we could reference that have to do with typeclasses, linear types, and such.  but there's not a single canonical paper that I can think of for those things.
[05:42:38] <olsonjeffery> inf-groupoid: ah. yeah, in that case you're stuck witht he existing api..
[05:42:43] <inf-groupoid> Eridius: olsonjeffery: But I can certainly install HEAD if necessary. :-)
[05:42:48] <olsonjeffery> a new file io api just landed on master
[05:43:09] <olsonjeffery> although i should mention that it's probably going to change in the next few weeks..
[05:44:56] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[05:44:59] <lkuper> brson: maybe something by Wadler.  the rejected PLDI submission had a lot of good stuff in its references, too.
[05:45:03] <brson> lkuper: yes, crash-only was what i was thinking of
[05:45:15] <inf-groupoid> olsonjeffery: If anything changes, is there any easy way to download the patches/diffs and only recompile that which has changed? If so, then I could use HEAD.
[05:45:23] <lkuper> brson: oh, awesome
[05:45:55] * lkuper -> bed
[05:46:02] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[05:46:14] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[05:46:14] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/o_Kuug
[05:46:14] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[05:46:16] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[05:46:16] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/rRPD-A
[05:46:16] <ghrust> 13rust/06auto 14cfd0bfb 15Luqman Aden: rustllvm: Specify hard floats for gnueabihf.
[05:46:16] <ghrust> 13rust/06auto 146a05aa6 15Luqman Aden: librustc: Always use session target triple.
[05:46:17] <ghrust> 13rust/06auto 14bed8489 15bors: auto merge of #8736 : luqmana/rust/hf, r=yichoi...
[05:46:19] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[05:47:22] *** Quits: mitja (Mibbit@moz-A852F1B6.dial-up.dsl.siol.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:47:37] *** Quits: jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: zzz)
[05:52:47] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[05:52:48] <Eridius> rusti: "".split_iter('/').to_owned_vec()
[05:52:49] -rusti- ~[""]
[05:56:43] * engla is hacking on split iter
[05:57:05] <Eridius> engla: I trust you're not changing the behavior?
[05:57:31] <engla> it's this https://github.com/mozilla/rust/pull/8737
[05:57:44] <engla> except I'm still trying to find a nicer way to write it
[05:58:00] <Eridius> ah
[05:58:04] <engla> what is it you don't want to change?
[05:58:05] *** Quits: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au) (Quit: gavinb)
[05:58:13] <engla> so that I can change it :P
[05:58:25] <Eridius> engla: I'm writing code that relies on "".split_iter(foo) yielding a single Some("") value
[05:58:31] <Eridius> even though I disagreed with that behavior when I first ran across it
[05:59:00] <engla> that shouldn't change
[05:59:23] <Eridius> I'm pretty sure there's a test for that behavior too
[05:59:47] <Eridius> for reference, what I'm doing now is rewriting the path module from scratch, because I think it sucks
[06:00:12] <engla> I don't think so, I haven't seen any testcase where there are 0 maches for the split char
[06:00:40] <engla> hmm paths shouldn't use str at all, at least not in posix
[06:00:41] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[06:00:57] <Eridius> engla: hmm, you're right. That behavior isn't tested after all, at least not obviously. I must have been thinking about a different iterator
[06:01:22] <Eridius> engla: no? why shouldn't it use str? Manipulating paths wants to use string operations
[06:01:39] <engla> paths are arbitrary bytes on linux, exluding 0
[06:01:52] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[06:01:52] <engla> excluding
[06:01:55] <Eridius> grr, linux sucks
[06:02:17] <engla> no, it makes sense
[06:02:54] <engla> but it means rust str can't represent all paths
[06:03:09] <Eridius> which is rather sucky, because path mainpulation really wants to use strings :/
[06:04:24] <Eridius> hrm, I wonder how much of this work can be easily salvaged, and how much needs serious modifications, to switch to a ~[u8] representation..
[06:04:30] <Eridius> :/
[06:05:14] <Eridius> what happens if a type implements a method, and also implements a trait that has the same method?
[06:05:38] <engla> I don't know it
[06:05:51] <Eridius> whoa, github has no CSS at the moment
[06:06:46] <engla> I see the same
[06:07:15] <engla> byte paths: https://github.com/mozilla/rust/issues/7225
[06:07:29] <Eridius> FWIW this is what I have so far: https://github.com/kballard/rust/tree/path-rewrite
[06:07:48] <Eridius> a basically complete implementation of posix paths on top of ~str (only missing tests for is_ancestor_of and make_relative_to atm)
[06:08:10] <Eridius> no support for windows or the stat-related operations yet
[06:09:42] <Eridius> anyway, thanks for the pointer to #7225. Stupid linux. I'll probably start trying to convert my work over to ~[u8] tomorrow
[06:09:50] <Eridius> sadly, this means no more nice .as_str() method :/
[06:11:00] <engla> right, if you look into GLib you'll find that the best you can do for a string representation is a display string, not a path that can be converted back
[06:11:10] <engla> it's tricky business
[06:11:42] <Eridius> I suppose I could have .as_str() -> Option<&'a str> which checks if the byte buffer is_utf8() and, if so, transmutes it
[06:16:56] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[06:17:21] <acrichto> Luqman: ping
[06:17:29] <sfackler> alternatively, you could escape it however gnutils do
[06:18:45] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[06:19:00] <Eridius> sfackler: as_str() would be a non-allocating operation
[06:19:22] <Eridius> sfackler: I could also have a .to_display_str() that converts to a str suitable for display (but one that is not guaranteed to be convertable back to a path)
[06:19:56] <Eridius> and I could also have .as_display_str() which takes a closure and provides a &str display str there (to avoid the allocation when the byte buffer is already utf-8)
[06:22:12] *** Joins: Palmik (palmik@moz-CC484FDD.tmcz.cz)
[06:24:59] *** Quits: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP) (Ping timeout)
[06:27:08] *** Quits: heftig (heftig@moz-305746DD.dip0.t-ipconnect.de) (Quit: Quitting)
[06:30:04] <rory> is there a way to monkey patch methods onto a struct?
[06:30:19] <rory> i basically want to split up the methods between a couple modules, or the module is going to be huge
[06:31:40] *** Quits: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net) (Quit: echristo)
[06:39:40] *** Quits: tautologico (shung@85E8CF27.DCFCC432.89E5CEC6.IP) (Connection reset by peer)
[06:40:43] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[06:41:09] <bjz> rusti: mod x { pub struct A { priv a: int } } x::A { a: 1 }
[06:41:10] -rusti- <anon>:5:48: 5:52 error: field `a` is private
[06:41:10] -rusti- <anon>:5          mod x { pub struct A { priv a: int } } x::A { a: 1 }
[06:41:10] -rusti-                                                          ^~~~
[06:41:10] -rusti- error: aborting due to previous error
[06:41:10] -rusti- application terminated with error code 101
[06:42:07] *** Joins: webber46 (webber46@moz-717E9C5B.cust.bredband2.com)
[06:43:27] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[06:43:47] *** Quits: webber46 (webber46@moz-717E9C5B.cust.bredband2.com) (Ping timeout)
[06:50:08] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[06:51:19] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[06:51:19] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/rRPD-A
[06:51:19] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[06:52:09] *** Joins: SingingBoyo (brandon@4DF3381A.51F4D838.4F048BDC.IP)
[07:09:31] *** Joins: montezuma (Mibbit@moz-F8EBDB19.dynamic.isp.telekom.rs)
[07:09:52] *** Joins: eatkinson (eatkinson@moz-F1968613.dsl.bell.ca)
[07:10:08] *** montezuma is now known as _Y_
[07:10:09] *** Joins: heftig (heftig@9402E290.2F84ED1F.1CE4FB2A.IP)
[07:10:14] <zeux> should I be able to pass extern "C" functions defined in Rust to a C library so that it can call into my code?
[07:10:17] *** Quits: heftig (heftig@9402E290.2F84ED1F.1CE4FB2A.IP) (Quit: Quitting)
[07:10:26] <Eridius> zeux: yes
[07:10:46] *** Joins: heftig (heftig@9402E290.2F84ED1F.1CE4FB2A.IP)
[07:10:57] <_Y_> hi people, I've got a question
[07:11:07] <Eridius> hi _Y_
[07:11:26] <zeux> Eridius, I guess I should try on a simple example first
[07:11:41] <_Y_> if I have a folder structure for tests like {basedir}/test where all my sources are in {basedir}
[07:11:50] <zeux> trying to setup OpenGL debug callback and it does not fire even though it should (and does, in an equivalent C++ code)
[07:12:05] <_Y_> how do I name my mods and call source from {basedir}
[07:12:10] *** Joins: wabbiteh (mein_asdf@1ADC2370.4B9E65B8.B79EA657.IP)
[07:12:45] <Eridius> _Y_: the standard libraries typically put tests in the same file as the module it's testing, in a `#[cfg(test)] mod tests { ... }` module
[07:13:18] <_Y_> really?
[07:13:38] <_Y_> that seems weird, mixing tests and code
[07:13:48] <Eridius> yep. keeps the tests localized, and I _believe_ child modules can see private items in their immediate parent, so this lets the test access non-public methods too
[07:13:54] <Eridius> well the tests sub-module is typically the last thing in the file
[07:14:26] <rory> i basically want to split up the methods between a couple modules, or the module is going to be huge
[07:14:37] <Eridius> I mean if you want you could have each module say `#[cfg(test)]#[path="test/mymod.rs"]mod test;` but I haven't tried that myself
[07:14:42] <rory> is there a way to monkey patch methods onto a struct?
[07:15:06] <Eridius> rory: you can define a trait, and implement it on the type you're trying to modify, but anyone who wants to call methods from that trait has to make sure to bring it into scope (with a `use` directive)
[07:15:53] <_Y_> yeah, Eridius, that's good enough for me
[07:15:58] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[07:16:11] <_Y_> tests in the main are ok
[07:16:16] <_Y_> but how do you run them?
[07:16:44] <Eridius> pas the --test flag to rustc, and the binary it spits out will run all the tests
[07:17:18] <_Y_> Eridius :D thanks mate
[07:19:06] <wabbiteh> I'm trying to create a vector of vectors of strings, and am quite lost.  What's the rust equivalent to the C++ "vector<vector<string>*> foo;"?
[07:19:08] *** Quits: heftig (heftig@9402E290.2F84ED1F.1CE4FB2A.IP) (Ping timeout)
[07:19:10] <SingingBoyo> hmm.  how do I run the rt::io tests?  they don't seem to run with make check...
[07:20:07] <SingingBoyo> wabbiteh: you probably want ~[~[~str]]
[07:20:29] *** Quits: futurehorizons (Mibbit@moz-61717F7A.bitstream.orcon.net.nz) (Quit: http://www.mibbit.com ajax IRC Client)
[07:22:25] <wabbiteh> That's what I thought, but I'm having trouble appending a string to the inner vector.  If I've got 'let array = ~[~[]]' and I try 'array[0].append(~"meow");', I get '~[~str] does not implement any method in scope named append'
[07:22:39] <wabbiteh> There's some obvious stupid thing I'm doing, but I don't know what.
[07:22:57] *** Joins: heftig (heftig@9402E290.2F84ED1F.1CE4FB2A.IP)
[07:23:07] <darkf> wabbiteh: array[0] is an array itself. if you want to push to that, use push()
[07:23:34] <engla> there is no method append, so that's correct
[07:24:27] <Eridius> rusti: let mut xs = ~[~[]]; xs[0].push(3i); xs
[07:24:28] -rusti- ~[~[3]]
[07:25:10] <wabbiteh> Whoops, you're right engla.  Read the docs wrong, thought that append was a method and not a function
[07:25:22] <wabbiteh> Well that would explain it.
[07:26:12] *** Quits: heftig (heftig@9402E290.2F84ED1F.1CE4FB2A.IP) (Ping timeout)
[07:26:53] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[07:29:41] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[07:32:01] <darkf> ouch, i get hit with ~2,500 jemalloc-related errors while compiling on windows :)
[07:32:47] <klutzy> darkf: https://github.com/mozilla/rust/issues/8731
[07:34:43] <SingingBoyo> okay rt::io, why do you refuse to test...
[07:35:18] <brson> darkf: that should be fixed on master, but it requires a fresh checkout of jemalloc. I fixed it by rming rt/src/jemalloc
[07:35:31] <brson> darkf: then running git checkout again
[07:35:45] <brson> something to do with line endings being mangled
[07:35:51] <darkf> ah, OK, thanks!
[07:35:56] <klutzy> \s is always a disaster for me
[07:35:58] <klutzy> \r*
[07:36:13] <darkf> yeah, it's quite... klutzy sometimes :)
[07:36:27] <klutzy> yeah!
[07:37:58] *** Joins: heftig (heftig@9402E290.2F84ED1F.1CE4FB2A.IP)
[07:39:01] <darkf> great, it's working now (albeit with plenty of warnings ;)
[07:39:11] <klutzy> I started to think we should beep if git checked out crlf
[07:40:38] <klutzy> license checker fails, then jemalloc failed. I don't imagine what's the next \r bomb :(
[07:41:05] <darkf> heh indeed
[07:42:05] *** Quits: inf-groupoid (user@580120F5.8ED93E28.1C8C8CE9.IP) (Quit: ERC Version 5.3 (IRC client for Emacs))
[07:48:56] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[07:50:04] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[07:50:36] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[07:52:20] *** Quits: eatkinson (eatkinson@moz-F1968613.dsl.bell.ca) (Quit: eatkinson)
[07:53:49] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[07:54:03] *** Quits: SingingBoyo (brandon@4DF3381A.51F4D838.4F048BDC.IP) (Input/output error)
[07:55:05] <nsf> what's the best way to cast an int (unknown size) to a numeric enum? match on sizeof(enum) + transmute? (enums can be 32 or 64 bit I think at the moment)
[07:55:11] *** Quits: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com) (Ping timeout)
[07:55:32] <nsf> I've read an issue where people suggest reinterpret_cast (transmute_copy)
[07:55:39] <nsf> it compiles but it's a bad advice
[07:55:52] <nsf> casting u32 to enum on 64 bit may cause problems
[07:55:59] <dbaupp> enums are always word-sized at the moment
[07:56:08] <dbaupp> (i.e. int/uint)
[07:56:10] <nsf> as transmute_copy copies sizeof(U) bytes from T
[07:56:16] <nsf> oh, ok
[07:56:21] <nsf> then cast to uint and transmute to enum?
[07:56:35] <nsf> if that's possible
[07:57:03] <nsf> compiles..
[07:57:07] <dbaupp> rusti: enum Foo { A, B } printfln!(std::cast::transmute::<uint, Foo>(1)); printfln!(std::cast::transmute::<uint, Foo>(3));
[07:57:08] <nsf> will see if it actually works :)
[07:57:17] -rusti- pastebinned 16 lines of output: http://ix.io/7yo
[07:57:32] <dbaupp> rusti: enum Foo { A, B } unsafe { printfln!(std::cast::transmute::<uint, Foo>(1)); printfln!(std::cast::transmute::<uint, Foo>(3)); }
[07:57:33] -rusti- B
[07:57:33] -rusti- task <unnamed> failed at 'enum value matched no variant', /build/rust-git/src/rust/src/libstd/repr.rs:521
[07:57:33] -rusti- application terminated with error code 101
[07:58:01] <dbaupp> using an actual match with an explicit int_to_my_enum function is better.
[07:58:52] <nsf> ok, that'll work for me (the uint transmute variant)
[07:59:34] <nsf> let common_ev: &ll::SDL_CommonEvent = cast::transmute(&raw);
[07:59:35] <nsf> let et: ll::SDL_EventType = cast::transmute(common_ev._type as uint);
[07:59:38] <nsf> that's what I do :)
[07:59:54] *** Joins: sebcrozet (sebcrozet@moz-7FB6C00B.w193-252.abo.wanadoo.fr)
[08:00:35] *** Joins: mrordinaire (Mibbit@1A659656.A607747.FD383126.IP)
[08:02:28] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[08:06:59] *** Quits: wabbiteh (mein_asdf@1ADC2370.4B9E65B8.B79EA657.IP) (Quit:  HydraIRC -> http://www.hydrairc.com <- Nine out of ten l33t h4x0rz prefer it)
[08:08:48] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[08:13:07] *** Quits: sebcrozet (sebcrozet@moz-7FB6C00B.w193-252.abo.wanadoo.fr) (Ping timeout)
[08:13:27] *** Joins: sebcrozet (sebcrozet@moz-7FB6C00B.w193-252.abo.wanadoo.fr)
[08:14:10] *** Joins: webber46 (webber46@moz-717E9C5B.cust.bredband2.com)
[08:15:50] *** Quits: webber46 (webber46@moz-717E9C5B.cust.bredband2.com) (Ping timeout)
[08:18:53] *** Quits: mrordinaire (Mibbit@1A659656.A607747.FD383126.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:20:36] *** Quits: sebcrozet (sebcrozet@moz-7FB6C00B.w193-252.abo.wanadoo.fr) (Ping timeout)
[08:20:52] *** Joins: sebcrozet (sebcrozet@moz-7FB6C00B.w193-252.abo.wanadoo.fr)
[08:21:42] *** Joins: Ms2ger (Ms2ger@moz-549ABB0C.adsl-dyn.isp.belgacom.be)
[08:22:09] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Connection reset by peer)
[08:23:55] *** Joins: bytewise (bytewise@moz-4A801D04.unitymediagroup.de)
[08:25:16] *** Quits: ChemicalHarm (Mibbit@moz-A9F37238.hsd1.md.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[08:27:32] *** Joins: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com)
[08:30:39] *** Joins: io2 (io2@moz-A6202C16.home.otenet.gr)
[08:31:55] *** Joins: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP)
[08:39:51] *** Joins: mindcat (mindcat@E0B1159F.D3D1C5C1.291A146C.IP)
[08:40:53] * mindcat 0w0
[08:41:48] <mindcat> rusti: println("Peoples are gone.")
[08:41:49] -rusti- Peoples are gone.
[08:41:49] -rusti- ()
[08:41:58] <Eridius> mindcat: :O
[08:42:01] <mindcat> rusti: println("Peoples are gone.");None
[08:42:08] -rusti- pastebinned 6 lines of output: http://ix.io/7yp
[08:42:27] <Eridius> rusti: "Good night"
[08:42:28] -rusti- "Good night"
[08:42:48] <mindcat> rusti: "Good aftermoon!"
[08:42:48] -rusti- "Good aftermoon!"
[08:42:57] *** Quits: ross (ross@moz-8A84103E.br.br.cox.net) (Quit: )
[08:43:18] <mindcat> rusti: print("Peoples are gone.");
[08:43:19] -rusti- Peoples are gone.()
[08:43:38] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[08:44:21] <mindcat> rusti: let a = || 1 + 1;a()
[08:44:21] -rusti- 2
[08:44:39] <mindcat> rusti: let a = || "Where is people?";a()
[08:44:40] -rusti- "Where is people?"
[08:45:04] <_Y_> silly question, but how do you log stuff in rust?
[08:45:10] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[08:45:15] <rory> can someone help me debug my macro code? im trying to wrap SDL2, and this doesn't seem to let me call SDL_Surface::wrap, for instance
[08:45:18] <rory> http://pastebin.mozilla.org/2912835
[08:45:25] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[08:45:47] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[08:47:26] *** Joins: Earnestly (earnest@B0BDF733.8FDE20A.5411983D.IP)
[08:47:49] <klutzy> rory: macro cannot expand multiple blobs (strcut {} impl {} impl{})
[08:47:58] <klutzy> rory: the first one, struct{} only will be generated
[08:48:05] <klutzy> it's a reported issue
[08:49:02] <klutzy> as a workaround you can wrap them inside mod wrapped { ... }
[08:49:15] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[08:49:20] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[08:49:23] <rory> k thx
[08:50:03] *** Joins: inf-groupoid (user@580120F5.8ED93E28.1C8C8CE9.IP)
[08:50:55] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[08:54:26] <rory> klutzy: but now i get multiple definition of module errors
[08:54:26] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Connection reset by peer)
[08:55:01] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[08:55:50] *** Quits: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com) (Ping timeout)
[08:57:00] <_Y_> where does the RUST_LOG variable reside on Windows
[08:58:01] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[08:59:25] <klutzy> rory: ah, right. you may have to diffentiate module names
[08:59:37] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[09:00:05] <rory> x_ x
[09:00:25] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[09:04:38] <klutzy> _Y_: My copmuter > context menu (right-click) > properties, then somewhere.. i don't remember exactly. maybe googling "windows environment variable" helps
[09:04:53] *** Joins: cdidd (cdidd@moz-D22079AF.broadband.corbina.ru)
[09:05:06] *** Joins: Siyo (Siyo@A89938F4.87DAA49F.F113998C.IP)
[09:06:00] <_Y_> ouch
[09:06:20] <_Y_> I was hoping it was some variable that is passed to a programm
[09:06:57] <_Y_> wait, what about this example https://github.com/mozilla/rust/wiki/Doc-usage-FAQ
[09:06:58] <klutzy> or you can type `RUST_LOG=rustc=1 rustc.exe ...` on msys
[09:07:12] <klutzy> yes, export is good too
[09:07:29] <_Y_> I hear they plan on changing it, right?
[09:07:36] <_Y_> to be set at runtime?
[09:07:54] <klutzy> export is shell command which also works on msys's bash
[09:08:22] *** Joins: doener (doener@moz-4D6ABE63.unitymediagroup.de)
[09:08:28] <nsf> is it possible to match a struct without destructuring it?
[09:08:47] <nsf> I mean I want to grab it as a variable
[09:08:56] <klutzy> `RUST_LOG=abc rustc.exe` is also supported by shell. those commands don't work with cmd.exe for example
[09:09:09] <nsf> "Struct =>" works, but no named variable is introduced
[09:09:14] <nsf> is there any way to do so? :)
[09:09:31] <doener> s @ Struct => { ... } IIRC
[09:09:31] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Connection reset by peer)
[09:09:34] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[09:09:52] <nsf> doener: thanks
[09:10:33] <klutzy> _Y_: "at runtime" means you can change logging level while program is running?
[09:11:56] <nsf> doener: at the moment it binds a struct data into a tuple it seems
[09:11:58] <nsf> weird
[09:12:13] <nsf> perhaps a bug or something
[09:12:35] <klutzy> I think it is intended
[09:12:43] <nsf> can't access fields by name, but printing Vec{x: int, y: int} as %? prints Vec(1, 2)
[09:13:20] <nsf> so, perhaps a better way to do what I want is to have a tuple which contains one struct element?
[09:13:52] <klutzy> match x { 1 => 1, 2 => 2, x => x } seems ok
[09:14:10] <klutzy> then it can become: match x { 1 => 1, 2 => 2, Struct => Struct }
[09:14:37] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[09:14:37] *** Joins: fabiand (fabiand@9402E290.2F84ED1F.1CE4FB2A.IP)
[09:16:06] <klutzy> or _ => x since x is already named
[09:16:32] <nsf> klutzy: not sure how that solves my issue
[09:16:47] <doener> nsf: uhm, wait, this isn't an enum but a struct? Just "s => ..." will do. It's a catch all pattern that calls the binding "s"
[09:16:49] *** Quits: fabiand (fabiand@9402E290.2F84ED1F.1CE4FB2A.IP) (Ping timeout)
[09:16:56] *** Joins: webber46 (webber46@moz-717E9C5B.cust.bredband2.com)
[09:16:58] <nsf> I have an enum with structs in it, and I want to match against them, structs are complicated, hence I don't want to use tuples instead
[09:16:59] <dbaupp> nsf: there's no "refinement types" which is what's required for that (i.e. so the compiler knows that the only possible variant is the one with the relevant fields), so the "correct" way to do that is `enum { Struct(StructInner) } ... struct StructInner { ... }`
[09:17:05] <doener> nsf: i.e. your initial "Struct =>" introduced a var called "Struct"
[09:17:21] <nsf> doener: oh, ok
[09:17:26] <dbaupp> and then match `Struct(ref s)`
[09:17:26] <nsf> let me try it out
[09:17:58] <klutzy> yes, "Struct =>" is just like "x =>" or "_ =>"
[09:18:00] <inf-groupoid> I have an extra::treemap, and I would like to do the following: 1. Test whether the extra::treemap contains a key "k". 2. Only if the result of the test was negative, insert an entry with key "k" and with some value "v". 3. Return the value for the key "k". (Basically, C++'s std::map::insert.) What would be the best way to do this?
[09:18:13] <doener> hm, now there's an enum? *needs coffee*
[09:18:23] <nsf> doener: doesn't work
[09:18:28] <doener> nsf: maybe you could pastebin an example?
[09:18:40] <nsf> doener: k, one moment
[09:18:56] <dbaupp> doener: I think it's `enum Foo { Struct1 { x: int  }, Struct 2 { y: int } }` (right, nsf?)
[09:19:00] <dbaupp> *Struct2
[09:19:24] <dbaupp> inf-groupoid: there's probably an find_or_insert method or something
[09:19:25] * dbaupp checks
[09:19:49] <nsf> http://pastie.org/8267817
[09:20:05] <nsf> what's commented is what I want, but it doesn't work of course
[09:20:07] <dbaupp> inf-groupoid: ah, it seems not
[09:20:16] <inf-groupoid> dbaupp: The trait Map contains no such method. :-|
[09:20:40] <inf-groupoid> dbaupp: I was trying to avoid traversing the map several times.
[09:20:47] <nsf> dbaupp: kind of, yes
[09:20:56] <doener> nsf: v @ Vec { _ } =>
[09:21:05] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Quit: Konversation terminated!)
[09:21:07] <dbaupp> nsf: Vec(VecInner), struct VecInner { x: int, y: int }, match ... { Vec(ref v) }
[09:21:11] <nsf> oh, interesting :)
[09:21:18] <doener> nsf: that makes "Vec { _ }" a pattern that only matches the Vec variant
[09:21:34] <dbaupp> doener: still can't access the fields via v.x & v.y
[09:21:37] <nsf> doener: nope, doesn't work
[09:21:41] <nsf> what dbaupp said
[09:21:59] <dbaupp> inf-groupoid: yeah, it seems there's no way to avoid that (yet) :(
[09:22:01] <doener> oh, d'oh, didn't uncomment the line -.-
[09:22:07] <klutzy> rusti: enum Foo{None,Vec{x:int,y:int}} match Vec{x:1,y:2}{None=>0,v@Vec{_}=>v}
[09:22:13] -rusti- pastebinned 5 lines of output: http://ix.io/7yq
[09:22:21] <klutzy> rusti: enum Foo{None,Vec{x:int,y:int}} match Vec{x:1,y:2}{None=>None,v@Vec{_}=>v}
[09:22:22] -rusti- Vec(1, 2)
[09:22:29] <klutzy> rusti: enum Foo{None,Vec{x:int,y:int}} match Vec{x:1,y:2}{None=>1,v@Vec{_}=>v.x}
[09:22:30] -rusti- <anon>:5:78: 5:81 error: attempted access of field `x` on type `main::Foo`, but no field with that name was found
[09:22:30] -rusti- <anon>:5          enum Foo{None,Vec{x:int,y:int}} match Vec{x:1,y:2}{None=>1,v@Vec{_}=>v.x}
[09:22:30] -rusti-                                                                                        ^~~
[09:22:30] -rusti- error: aborting due to previous error
[09:22:32] -rusti- application terminated with error code 101
[09:22:44] *** Joins: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP)
[09:22:52] <nsf> see it transforms it into a tuple
[09:23:02] <nsf> I guess I can't use that struct after all
[09:23:08] <klutzy> hmm, v@Vec{_} seems recognized as Foo, not Vec
[09:23:14] <nsf> but it seems the only way why enum should support structs in the first place
[09:23:18] <nsf> the only reason*
[09:23:34] <dbaupp> rusti: enum Foo{None,Vec(VecInner)} struct VecInner { x: int, y: int} match Vec(VecInner{x:1,y:2}) {None=>1,Vec(ref v)=>v.x}
[09:23:34] <nsf> is to be able to do what I do
[09:23:34] -rusti- 1
[09:23:36] <nsf> :)
[09:23:48] <dbaupp> klutzy: see my comment about refinement types above
[09:23:56] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[09:24:02] <dbaupp> nsf: it's not transformed into a tuple; it's just the `%?` printer prints it as a tuple
[09:24:21] *** Joins: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP)
[09:24:24] <nsf> but why fields access isn't there then?
[09:24:33] <nsf> what's the point of having fields in that case
[09:24:34] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[09:24:37] <dbaupp> because we don't have refinement types
[09:24:40] <nsf> :(
[09:24:49] <dbaupp> it can't tell that it's not the None variant
[09:25:06] <dbaupp> I guess the reason for it is to allow it to be documented better
[09:25:11] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[09:25:15] *** Joins: victorporof (victorporo@moz-BAE8D951.pck.nerim.net)
[09:25:30] <dbaupp> e.g. you can put doc-comemnts on the fields & give them sensible names
[09:25:40] *** Joins: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP)
[09:26:00] <nsf> sure, the problem is that destructuring with large structs seems pointless
[09:26:05] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[09:26:27] <dbaupp> it depends, if you're only wanting to match on a few fields each time then it is useful
[09:26:37] <_Y_> klutzy: Yeah, there was some mentioning of it on  https://github.com/mozilla/rust/wiki/Proposal-for-logging
[09:27:00] <nsf> dbaupp: I could as well get a struct type and use the fields I need
[09:27:01] <dbaupp> match .. { Foo { x, y, _ } } ... match ... { Foo { z, _ } }  ... match .. { Foo { w, y, _ } } etc etc
[09:27:22] <nsf> ok, will do inner structs then
[09:27:30] <nsf> I just don't want to have an api like that one:
[09:27:33] <nsf> https://github.com/brson/rust-sdl/blob/master/src/event.rs#L577-L593
[09:28:05] *** Quits: inf-groupoid (user@580120F5.8ED93E28.1C8C8CE9.IP) (Ping timeout)
[09:28:15] <nsf> anyways, thanks for clarifications
[09:28:38] <dbaupp> you can use smart constructors to get around the uglyness of Vec(VecInner { .. }), e.g. new_vec(x, y) or whatever
[09:29:03] <nsf> in that case I only construct them once, so it's not a big deal
[09:34:47] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[09:35:32] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Connection reset by peer)
[09:35:54] *** Joins: inf-groupoid (user@580120F5.8ED93E28.1C8C8CE9.IP)
[09:36:51] <ChrisMorgan> One can't have cross-crate macros at present, I presume?
[09:37:29] <nsf> dbaupp: I played a bit with matching options, actually using structs as they are seems reasonable
[09:37:39] *** Joins: jviereck (Adium@moz-9579EDFB.dip0.t-ipconnect.de)
[09:38:05] <dbaupp> ChrisMorgan: not unless you hack 'em into libsyntax, no
[09:38:10] <nsf> as you point out in your example, I didn't know the proper way to ignore the values and the fact that you can declare vars associated with fields without writing them twice (x: x) is nice as well
[09:38:27] <nsf> s/values/fields/
[09:38:56] <nsf> so, yeah, doing something like MouseEvent{relx, rely, _} =>
[09:38:58] <nsf> seems reasonable
[09:39:27] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Quit: Leaving.)
[09:40:12] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[09:40:29] <dbaupp> Yeah, an hopefully one day `{ref relx, ref rely, _}` will work as a shortcut for `{relx: ref relx, ...}` for when you can't move out of the value.
[09:40:52] <nsf> oh, indeed, that would be useful
[09:41:23] *** Quits: _Y_ (Mibbit@moz-F8EBDB19.dynamic.isp.telekom.rs) (Quit: http://www.mibbit.com ajax IRC Client)
[09:43:25] <mindcat> http://paste.ubuntu.com/6024429/ it's have way to optimize "strs[0],strs[1]..." this repeat in "match"?
[09:45:12] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[09:45:15] <mindcat> rusti: "Are we still live?"
[09:45:16] -rusti- "Are we still live?"
[09:45:48] <nsf> mindcat: since match can actually return a value
[09:45:51] <nsf> you can do something like:
[09:46:12] <nsf> let i = match { -1 => 0, _ if ... => 1, etc. }
[09:46:17] <nsf> and then strs[i]
[09:46:51] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[09:46:58] <mindcat> nsf: Oh, I didn't think about this
[09:47:01] <nsf> and you need that i anyway, because you do a silly check at the end: if out == strs[3]{
[09:47:08] <nsf> you could change that to if i == 3 as well
[09:47:26] <mindcat> nsf: yes,yes,yes.
[09:47:26] <doener> mindcat: and the if-else on line 15 is just "let answer = answer.unwrap_or_default(-1);"
[09:47:57] <mindcat> doener: Oh, ok
[09:48:55] <mindcat> thanks :D
[09:49:35] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[09:51:15] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[09:51:57] <mindcat> rusti: use std::int; int::from_str("What!?").unwrap_or_default(-1);
[09:51:58] -rusti- ()
[09:52:32] <mindcat> rusti: use std::int; int::from_str("2415").unwrap_or_default(-1);
[09:52:33] -rusti- ()
[09:53:00] <nsf> mindcat: remove ; at the end
[09:53:08] <nsf> rusti: use std::int; int::from_str("What!?").unwrap_or_default(-1)
[09:53:09] -rusti- -1
[09:53:15] <nsf> rusti: use std::int; int::from_str("2415").unwrap_or_default(-1)
[09:53:16] -rusti- 2415
[09:53:24] <mindcat> nsf: Oh
[10:01:11] *** Quits: webber46 (webber46@moz-717E9C5B.cust.bredband2.com) (Quit: webber46)
[10:02:25] *** Joins: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP)
[10:02:44] <mindcat> rusti: use std::int; let answer = int::from_str("asdg").unwrap_or_default(-1);answer
[10:02:45] -rusti- -1
[10:03:02] <mindcat> are this is working in rust 0.7?
[10:03:17] <mindcat> http://paste.ubuntu.com/6024464/
[10:03:22] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Quit: Konversation terminated!)
[10:03:25] <doener> might still be get_or_default() in 0.7
[10:03:28] *** Joins: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP)
[10:03:43] <doener> that was renamed recently
[10:03:59] <mindcat> doener: alright..
[10:05:21] <nsf> yeah, a lot of renames lately in rust
[10:06:59] *** Joins: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com)
[10:07:03] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Quit: Konversation terminated!)
[10:07:34] <mindcat> then I must download master version now..
[10:08:06] *** Joins: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP)
[10:09:47] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[10:13:20] *** Quits: victorporof (victorporo@moz-BAE8D951.pck.nerim.net) (Quit: victorporof)
[10:18:52] *** Joins: momiga (Meta@moz-FE9D5AEE.bflony.fios.verizon.net)
[10:25:15] <Luqman> acrichto: pong
[10:29:07] *** Joins: manadarinica (mimi@moz-40924CE1.teol.net)
[10:31:47] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[10:32:24] <nsf> hm.. weird
[10:32:29] <nsf> about this struct matching thing
[10:32:36] <nsf> I defined the struct as part of the enum in one module
[10:32:46] *** Quits: manadarinica (mimi@moz-40924CE1.teol.net) (Quit: )
[10:32:48] <nsf> and rust sees it as a tuple in another module
[10:33:18] <nsf> typing `sdl2::WindowEvent{_}`, says: error: `sdl2::WindowEvent` does not name a structure
[10:33:26] <nsf> sdl2::WindowEvent(_, _, _) works fine
[10:33:31] <nsf> (struct has 3 fields)
[10:33:47] <nsf> a bug?
[10:34:35] <Luqman> yea, that does seem like a bug
[10:34:54] <Luqman> make an issue and possibly see if you can make a small testcase
[10:36:26] <doener> hm, why does &Trait need re-borrowing as &Trait?
[10:37:41] *** Joins: maik (maik___@moz-6AB83A6F.dip0.t-ipconnect.de)
[10:38:01] <Luqman> we don't impicitly cast &T to &Trait (for some Trait T implements)
[10:38:25] <Luqman> or for any other trait object ~/@/@mut
[10:38:30] <doener> Luqman: it's &Trait on both sides though
[10:38:39] <nsf> seems like a cross-crate issue
[10:38:48] <nsf> because making a module within the same file works
[10:38:57] <Luqman> nsf: yea, those are the annoying kind
[10:39:08] <Luqman> doener: in what context?
[10:39:15] <nsf> k, will do a quick rustpkg based mockup
[10:39:39] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[10:39:40] <doener> Luqman: see src/test/codegen/virtual-method-call-extract.rs -- test() gets a &Trait object, and calls a method on it. Before the call happens, the &Trait is copied twice
[10:40:00] <doener> Luqman: the first copy is from auto-borrowing and seems rather pointless to me
[10:40:55] *** Quits: Ms2ger (Ms2ger@moz-549ABB0C.adsl-dyn.isp.belgacom.be) (Quit: bbl)
[10:41:13] <Luqman> doener: i don't see that file
[10:43:28] *** Quits: rfw (rfw@moz-C65A114.rfw.name) (Ping timeout)
[10:45:23] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[10:46:20] <doener> Luqman: sorry, just src/test/codegen/virtual-method-call.rs
[10:46:32] <doener> Luqman: the -extract suffix is only in the resulting .ll file
[10:47:12] *** Joins: rfw (rfw@moz-C65A114.rfw.name)
[10:47:44] <Luqman> doener: i don't see any explicit reborrowing of an &Trait
[10:48:32] <doener> Luqman: the compiler does that, I'm looking into why the generated code is almost three times as long as the one generated by clang
[10:48:47] <Luqman> ah
[10:48:48] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[10:49:55] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[10:50:01] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[10:50:52] <nsf> https://github.com/mozilla/rust/issues/8746
[10:51:35] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[10:54:09] <Luqman> nsf: oh, not a regular struct but a struct variant
[10:54:23] <nsf> yes
[10:54:37] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[10:56:07] *** Quits: jviereck (Adium@moz-9579EDFB.dip0.t-ipconnect.de) (Quit: Leaving.)
[10:56:25] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Quit: Konversation terminated!)
[10:58:09] <nsf> it seems that they are rarely used
[10:58:19] <nsf> so, a bug is an expected bug :)
[11:00:34] <nsf> my guess would be it's somewhere in the librustc/metadata
[11:01:41] <nsf> oh, well
[11:02:08] <nsf> https://github.com/mozilla/rust/blob/master/src/librustc/metadata/decoder.rs#L791
[11:02:12] <nsf> :D
[11:04:45] <nsf> https://github.com/mozilla/rust/blob/master/src/librustc/metadata/encoder.rs#L337
[11:04:47] <nsf> and this
[11:04:55] <nsf> yeah, seems like structs aren't exported at all
[11:05:11] <nsf> but then they somehow got transformed into tuples
[11:05:21] <nsf> anyways, I'll leave that to someone who knows the code
[11:05:27] *** Quits: doener (doener@moz-4D6ABE63.unitymediagroup.de) (Quit: leaving)
[11:09:52] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[11:13:33] *** Quits: a__ (a__@moz-25043B93.nycmny.fios.verizon.net) (Client exited)
[11:14:15] *** Joins: threecreepio (jdp@moz-71E164C9.cust.bredbandsbolaget.se)
[11:14:43] *** Joins: a__ (a__@moz-25043B93.nycmny.fios.verizon.net)
[11:20:27] *** Quits: wilsonk-laptop (kvirc@moz-8E86F35A.cg.shawcable.net) (Quit: KVIrc 4.0.4 Insomnia http://www.kvirc.net/)
[11:20:59] *** Quits: a__ (a__@moz-25043B93.nycmny.fios.verizon.net) (Client exited)
[11:21:03] *** Quits: maik (maik___@moz-6AB83A6F.dip0.t-ipconnect.de) (Ping timeout)
[11:21:18] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[11:21:18] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/aWOeBg
[11:21:18] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[11:21:58] *** Joins: a__ (a__@moz-25043B93.nycmny.fios.verizon.net)
[11:26:48] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[11:27:57] *** Quits: z0w0 (zack@moz-7E6DC3A.lnse2.woo.bigpond.net.au) (Client exited)
[11:28:45] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[11:29:34] *** Joins: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP)
[11:32:17] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[11:34:13] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[11:35:31] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Connection reset by peer)
[11:36:06] *** Joins: maik (maik___@moz-9B1CE5EB.dip0.t-ipconnect.de)
[11:39:25] *** Quits: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP) (Ping timeout)
[11:44:41] *** Joins: bjz (brendanzab@AE0B7388.B8C2BBC3.F4A11E52.IP)
[11:50:01] *** Joins: bjz_ (brendanzab@AE0B7388.B8C2BBC3.F4A11E52.IP)
[11:50:01] *** Quits: bjz (brendanzab@AE0B7388.B8C2BBC3.F4A11E52.IP) (Connection reset by peer)
[11:50:15] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[11:50:29] *** Quits: bjz_ (brendanzab@AE0B7388.B8C2BBC3.F4A11E52.IP) (Quit: Bye!)
[11:51:55] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[11:52:23] *** Quits: momiga (Meta@moz-FE9D5AEE.bflony.fios.verizon.net) (Ping timeout)
[11:52:42] *** Joins: bjz (brendanzab@AE0B7388.B8C2BBC3.F4A11E52.IP)
[11:53:10] *** Joins: momiga (Meta@moz-FE9D5AEE.bflony.fios.verizon.net)
[11:54:58] *** Joins: sigma (sigma@moz-EDBC6A2D.range86-168.btcentralplus.com)
[11:56:37] *** Joins: wilsonk-laptop (kvirc@moz-8E86F35A.cg.shawcable.net)
[11:57:18] *** Quits: bjz (brendanzab@AE0B7388.B8C2BBC3.F4A11E52.IP) (Quit: Leaving...)
[11:57:28] *** Quits: sigma (sigma@moz-EDBC6A2D.range86-168.btcentralplus.com) (Ping timeout)
[11:59:36] *** Joins: sigma (sigma@moz-9CC3AAED.range86-160.btcentralplus.com)
[12:03:33] *** Joins: anders (anders@moz-329650BE.cust.bredbandsbolaget.se)
[12:03:49] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[12:04:36] *** Quits: sigma (sigma@moz-9CC3AAED.range86-160.btcentralplus.com) (Ping timeout)
[12:05:41] *** Joins: sigma (sigma@moz-E35A9B7F.range109-145.btcentralplus.com)
[12:06:39] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[12:07:22] *** Quits: sigma (sigma@moz-E35A9B7F.range109-145.btcentralplus.com) (Ping timeout)
[12:08:22] *** Joins: sigma (sigma@moz-C0B0F03A.range86-150.btcentralplus.com)
[12:12:49] *** Joins: vvs (vijayvenka@7ACD1FE3.C83DA652.73686190.IP)
[12:13:28] *** Quits: sigma (sigma@moz-C0B0F03A.range86-150.btcentralplus.com) (Ping timeout)
[12:14:50] *** Joins: sigma (sigma@moz-3529A116.range31-52.btcentralplus.com)
[12:16:31] *** Quits: sigma (sigma@moz-3529A116.range31-52.btcentralplus.com) (Ping timeout)
[12:16:35] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[12:16:55] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[12:18:43] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[12:19:56] *** Joins: sigma (sigma@moz-183BB66A.range109-148.btcentralplus.com)
[12:21:36] *** Quits: sigma (sigma@moz-183BB66A.range109-148.btcentralplus.com) (Ping timeout)
[12:23:38] *** Joins: sigma (sigma@moz-ADB0E614.range109-151.btcentralplus.com)
[12:23:42] *** Joins: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP)
[12:24:09] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[12:27:13] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[12:29:29] *** Quits: sigma (sigma@moz-ADB0E614.range109-151.btcentralplus.com) (Ping timeout)
[12:30:56] *** Joins: sigma (sigma@moz-E7A36D93.range86-140.btcentralplus.com)
[12:31:18] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[12:31:18] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/9q9Nxg
[12:31:18] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[12:31:45] <dbaupp> quick! submit patches: bors is slacking off.
[12:32:30] *** Joins: victorporof (victorporo@87C1F78E.1DE10CA8.D8E68FF6.IP)
[12:33:34] *** Joins: victorporof_ (victorporo@87C1F78E.1DE10CA8.D8E68FF6.IP)
[12:33:59] *** Joins: RogueVector (victorporo@DA4ABEAF.1DE10CA8.D8E68FF6.IP)
[12:34:08] *** Quits: victorporof (victorporo@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[12:34:09] *** Quits: maik (maik___@moz-9B1CE5EB.dip0.t-ipconnect.de) (Ping timeout)
[12:35:21] *** Quits: victorporof_ (victorporo@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[12:42:50] *** Joins: kertap (kertap@moz-8FBDEFD1.b-ras3.mvw.galway.eircom.net)
[12:46:07] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[12:46:46] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[12:50:35] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[12:52:15] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[12:52:21] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[12:56:44] *** Quits: RMF (RMF@moz-4C3A3FAA.dsl.telepac.pt) (Ping timeout)
[12:56:56] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[12:58:03] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[12:59:24] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[13:00:25] *** Joins: RMF (RMF@moz-3ADFD14C.dsl.telepac.pt)
[13:04:35] *** Quits: huddler (Mibbit@FB71A484.6BBDF347.94810E9.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:05:09] *** Quits: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[13:09:00] *** Joins: Ms2ger (Ms2ger@moz-549ABB0C.adsl-dyn.isp.belgacom.be)
[13:13:08] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[13:13:22] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[13:13:22] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: jorendorff)
[13:15:34] *** Quits: RogueVector (victorporo@DA4ABEAF.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[13:15:43] *** Joins: victorporof (victorporo@DA4ABEAF.1DE10CA8.D8E68FF6.IP)
[13:26:34] *** Quits: kertap (kertap@moz-8FBDEFD1.b-ras3.mvw.galway.eircom.net) (Quit: kertap)
[13:31:54] *** Joins: jtymes (androirc@moz-D8D9ABE4.dhcp.aldl.mi.charter.com)
[13:34:52] *** Quits: quasisphere (btw@DC685DC2.94302614.1D0D91FF.IP) (Quit: leaving)
[13:36:47] *** Joins: kertap (kertap@moz-8FBDEFD1.b-ras3.mvw.galway.eircom.net)
[13:37:55] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[13:40:05] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[13:42:02] *** Quits: jtymes (androirc@moz-D8D9ABE4.dhcp.aldl.mi.charter.com) (Quit: AndroIRC - Android IRC Client ( http://www.androirc.com ))
[13:46:56] *** Quits: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net) (Quit: dbaupp)
[13:47:00] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[13:47:51] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[13:47:57] *** Joins: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net)
[13:48:06] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[13:50:38] *** Joins: quasisphere (quassel@DC685DC2.94302614.1D0D91FF.IP)
[13:50:54] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[13:52:14] *** Joins: maik (maik___@moz-9B1CE5EB.dip0.t-ipconnect.de)
[13:52:34] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[13:53:10] *** Quits: momiga (Meta@moz-FE9D5AEE.bflony.fios.verizon.net) (Ping timeout)
[13:53:54] *** Joins: momiga (Meta@moz-FE9D5AEE.bflony.fios.verizon.net)
[13:54:41] *** Quits: victorporof (victorporo@DA4ABEAF.1DE10CA8.D8E68FF6.IP) (Quit: victorporof)
[13:58:49] *** Joins: robertknight (robertknig@moz-5D8FBA98.range81-151.btcentralplus.com)
[13:59:17] *** Quits: sigma (sigma@moz-E7A36D93.range86-140.btcentralplus.com) (Ping timeout)
[14:00:07] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[14:01:26] *** Joins: sigma (sigma@moz-49D693AD.range86-136.btcentralplus.com)
[14:02:08] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[14:02:37] *** Quits: Nisstyre (wes@moz-FD86289.netflash.net) (Client exited)
[14:02:59] *** Joins: bjz (brendanzab@AE0B7388.B8C2BBC3.F4A11E52.IP)
[14:03:02] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[14:03:58] *** Joins: victorporof (victorporo@87C1F78E.1DE10CA8.D8E68FF6.IP)
[14:05:01] <kertap> I'm trying to create an impl for Eq but when I try to use == I get a multiple applicable methods in scope error. What would be the correct way to solve that?
[14:07:18] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Ping timeout)
[14:07:47] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[14:10:26] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[14:11:09] <bjz> kertap: we need more info, sorry :(
[14:11:19] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Ping timeout)
[14:11:36] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[14:11:43] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[14:11:53] <kertap> bjz: that's grand. Let me make a gist.
[14:13:18] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[14:13:22] <klutzy> rusti: 1.to_str()
[14:13:26] <klutzy> maybe like this?
[14:13:27] -rusti- pastebinned 35 lines of output: http://ix.io/7yB
[14:13:56] <adridu59> rusti: 1i.to_str()
[14:13:57] -rusti- ~"1"
[14:14:42] <klutzy> something near == is ambiguous I guess
[14:15:40] <maik> bjz, will you need a nav mesh lib at some point?
[14:19:01] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[14:20:27] <bjz> maik: not sure
[14:21:33] <maik> bjz, I will make a rust port of https://github.com/masagroup/recastdetour
[14:22:17] <bjz> maik: heh, been playing around with phantom types for shaders/buffers objects
[14:22:53] <maik> bjz, can you upload an example?
[14:23:12] <maik> bjz, I read about phantom types a while ago but I wasn't sure why I would want to use it
[14:24:24] <bjz> https://gist.github.com/bjz/2eddf79971df6df87f8d
[14:24:51] <bjz> not sure if it's any good, might be overcomplicating things
[14:25:15] <maik> bjz, ah I have done it like this
[14:25:35] <bjz> this?
[14:26:00] <maik> https://gist.github.com/MaikKlein/6334110#file-gl-rs-L38
[14:26:03] <maik> like this :p
[14:26:35] *** Joins: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com)
[14:28:43] <kertap> This is the rust code and the error message I've been getting https://gist.github.com/kertap/6334118
[14:28:45] <maik> I also experimented a lot with shaders 
[14:31:50] <bjz> kertap: weird
[14:32:32] <bjz> kertap: could you try getting rid of the Eq impl and instead putting #[deriving(Eq)] above the struct decl
[14:33:01] <bjz> still doesn't answer the question though :(
[14:33:29] <maik> kertap, I think you would have to do a == &b
[14:33:48] <bjz> OH
[14:33:59] <bjz> I think there is an impl for ~T
[14:34:06] <sebcrozet> kertap: You should implement Eq for Equalizer, not ~Equalizer.
[14:34:12] <bjz> yep
[14:34:15] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[14:34:34] <sebcrozet> kertap: http://static.rust-lang.org/doc/std/owned.html will impl Eq for ~Equalizer automatically as long as it is for Equalizer itself.
[14:34:53] <bjz> impl<T:Eq> Eq for ~T {
[14:34:59] <kertap> Ahh, I get it now
[14:35:08] *** Quits: quasisphere (quassel@DC685DC2.94302614.1D0D91FF.IP) (Quit: Reached a singularity.)
[14:37:31] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[14:37:55] *** Quits: cdidd (cdidd@moz-D22079AF.broadband.corbina.ru) (Ping timeout)
[14:39:33] *** Joins: cdidd (cdidd@moz-569E8B65.broadband.corbina.ru)
[14:40:37] *** Quits: sigma (sigma@moz-49D693AD.range86-136.btcentralplus.com) (Ping timeout)
[14:40:40] <maik> the recast demo app is hilarious.... it's probably 50k -100k lines of code
[14:42:32] *** Joins: sigma (sigma@moz-33AC5891.range86-157.btcentralplus.com)
[14:43:29] *** Joins: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net)
[14:44:13] *** Quits: sigma (sigma@moz-33AC5891.range86-157.btcentralplus.com) (Ping timeout)
[14:44:17] <maik> bjz, what is the purpose of "ShaderType"? I think you use it like Shader::new(src,VERTEX_SHADER); 
[14:44:42] <maik> bjz, but then you can just use Shader::new(src,gl::VERTEX_SHADER);
[14:44:52] <bjz> I wanted to be typesafe :(
[14:45:05] <maik> ah
[14:45:05] <maik> hm
[14:45:13] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[14:45:20] <bjz> unfortunately we don't have nice C-style enums
[14:45:23] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[14:46:04] <bjz> ShaderType cannot be constructed outside the module, because it has a priv field
[14:46:29] <bjz> I agree that it's kinda ugly though :(
[14:47:01] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[14:47:37] <bjz> maik: btw, just to be clear, I was inspired by https://github.com/FluffySauce/fae
[14:47:54] *** Joins: quasisphere (btw@DC685DC2.94302614.1D0D91FF.IP)
[14:47:55] <maik> yeah I had a quick look at it
[14:48:36] <maik> but creating a constructor like Shader::new_fs() has the same type safety guarantee as using those phantom types
[14:48:36] *** Joins: sigma (sigma@moz-D3D1D488.range81-157.btcentralplus.com)
[14:48:55] <maik> or do I miss sth?
[14:51:14] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[14:51:51] <maik> and you also encountered the same problem as me, I have also made my Shader return a result. But does it really make sense? Should your program recover from a broken shader?
[14:51:57] *** Quits: sigma (sigma@moz-D3D1D488.range81-157.btcentralplus.com) (Ping timeout)
[14:52:32] *** Joins: webber46 (webber46@moz-717E9C5B.cust.bredband2.com)
[14:52:53] *** Joins: sigma (sigma@moz-C0032D55.range31-53.btcentralplus.com)
[14:52:54] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[14:56:16] <maik> bjz, I really like your unlinked / linked
[14:57:03] *** Quits: sigma (sigma@moz-C0032D55.range31-53.btcentralplus.com) (Ping timeout)
[14:57:11] <bjz> yeah? not too overcomplicated?
[14:57:32] <bjz> and yeah, not sure about the Result
[14:57:51] <maik> no it's really nice but I am not sure if the unsafe cast is good
[14:58:01] <bjz> yeah
[14:58:12] <bjz> wish I could get rid of it
[14:58:20] <maik> maybe like
[14:58:48] <maik> let sp= Program::new(); ....... let sp = sp.link();
[14:59:18] *** Quits: robertknight (robertknig@moz-5D8FBA98.range81-151.btcentralplus.com) (Ping timeout)
[14:59:41] <maik> where sp.link moves itself into a Program<Linked> and returns it
[14:59:43] *** Joins: sigma (sigma@moz-4CB566F8.range109-151.btcentralplus.com)
[15:00:08] <maik> but looks funky too :(
[15:01:40] *** Joins: jviereck (Adium@moz-61973F2F.dip0.t-ipconnect.de)
[15:03:04] *** Quits: sigma (sigma@moz-4CB566F8.range109-151.btcentralplus.com) (Ping timeout)
[15:03:33] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[15:04:25] <maik> bjz, ah what I wanted to ask you. You are using sublime too right? is it possible to instant align sth like this
[15:04:26] <maik> gl::BindFragDataLocation(self.handle.get(), 
[15:04:26] <maik>                                          location, 
[15:04:26] <maik>                                          ptr)
[15:04:31] <maik> hm
[15:04:46] <maik> where location is directly under self
[15:05:04] <maik> I always have to adjust it with spaces
[15:05:11] <bjz> me too :(
[15:05:19] <maik> :(
[15:06:59] *** Joins: sigma (sigma@moz-FC7D2870.range86-180.btcentralplus.com)
[15:07:38] *** Quits: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net) (Ping timeout)
[15:07:40] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[15:11:51] *** Quits: myname (myname@F6BC1CBC.2C5F047.A0197E77.IP) (Ping timeout)
[15:12:39] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[15:12:49] *** Quits: sigma (sigma@moz-FC7D2870.range86-180.btcentralplus.com) (Ping timeout)
[15:13:10] *** Joins: maxli1 (maxli@B5559308.9C54E60.2FA4EA88.IP)
[15:13:21] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Connection reset by peer)
[15:13:30] *** Joins: sigma (sigma@moz-22782830.range86-140.btcentralplus.com)
[15:14:55] *** Quits: Earnestly (earnest@B0BDF733.8FDE20A.5411983D.IP) (Ping timeout)
[15:15:10] *** Quits: sigma (sigma@moz-22782830.range86-140.btcentralplus.com) (Ping timeout)
[15:15:15] *** Joins: myname (myname@F6BC1CBC.2C5F047.A0197E77.IP)
[15:16:02] *** Joins: sigma (sigma@moz-D0462208.range109-149.btcentralplus.com)
[15:18:22] *** Joins: Ghost (Ice@E8A7525.6332494E.D0DDB18B.IP)
[15:18:35] *** Joins: ktos (ktos@moz-D3D6BE18.swidnica.mm.pl)
[15:18:37] <ktos> Hi
[15:19:18] <bjz> o/
[15:19:23] *** Quits: sigma (sigma@moz-D0462208.range109-149.btcentralplus.com) (Ping timeout)
[15:20:41] *** Joins: mrordinaire (Mibbit@1A659656.A607747.FD383126.IP)
[15:21:12] <mrordinaire> hi, rusti is now broken. Is there any plan to revive it?
[15:21:23] *** Joins: sigma (sigma@moz-1AC341E0.range86-168.btcentralplus.com)
[15:22:53] <jensnockert> mrordinaire: The bot?
[15:23:12] <maik> do we have a way to make infinite function parameters? like fn foo(int *) which can be called like foo(1,2,3,4) or foo(1,2,3,4,5,6)
[15:23:25] <jensnockert> maik: Nope :(
[15:23:49] <mrordinaire> jensnockert: no, the program. rusti on my machine now just eats all the ram instead of doing anything.
[15:23:50] <maik> jensnockert, okay :( so I have to use a vec then
[15:24:04] <mrordinaire> jensnockert: even when I try to evaluate something simple like 2
[15:24:08] <jensnockert> mrordinaire: In that case I think there is a plan to fix it.
[15:24:18] <jensnockert> mrordinaire: I think there is just a lack of testing.
[15:24:29] <jensnockert> mrordinaire: You should bug report it if it isn't on github already.
[15:24:39] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Connection reset by peer)
[15:24:43] *** Quits: sigma (sigma@moz-1AC341E0.range86-168.btcentralplus.com) (Ping timeout)
[15:24:45] <jensnockert> maik: Yes, unfortunately. That's why fmt! isn't a function.
[15:24:53] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[15:25:14] *** Joins: fiirhok (fiirhok@moz-4BE3125.vc.shawcable.net)
[15:25:21] *** Quits: ozten (ozten@moz-8B3F407D.hfc.comcastbusiness.net) (Quit: ozten)
[15:26:24] *** Joins: sigma (sigma@moz-30DEFFA5.range86-168.btcentralplus.com)
[15:29:08] *** Quits: Ghost (Ice@E8A7525.6332494E.D0DDB18B.IP) (Quit: Bring Me To Life...)
[15:29:14] <mrordinaire> jensnockert: I have already, see for example https://github.com/mozilla/rust/issues/8392
[15:29:17] <ion> luqman: Awesome, thanks for the gnueabihf fix!
[15:29:25] <mrordinaire> jensnockert: do you know who is in charge of rusti?
[15:29:42] <jensnockert> mrordinaire: Sorry, no.
[15:29:43] <ktos>  http://pastebin.com/JUygvXYY
[15:29:44] <ktos>  http://pastebin.com/JUygvXYY
[15:29:55] <ktos> any idea please why this error during compiling?
[15:30:06] <ktos> sorry for doubled link
[15:32:08] *** Joins: cubic_ (cubic@moz-FE5AD6C7.mc.videotron.ca)
[15:32:12] <mrordinaire> jensnockert: could you point me to anyone I can contact regarding this?
[15:32:22] <mrordinaire> jensnockert: I'd love to work on this for my final year project
[15:32:30] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Ping timeout)
[15:35:18] *** Quits: jviereck (Adium@moz-61973F2F.dip0.t-ipconnect.de) (Quit: Leaving.)
[15:35:27] <ktos> ok, seems too low memoery amount problem, have to check again
[15:36:04] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[15:36:31] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[15:38:10] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[15:39:45] *** Joins: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP)
[15:41:21] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[15:44:43] *** Quits: vvs (vijayvenka@7ACD1FE3.C83DA652.73686190.IP) (Client exited)
[15:45:09] *** Quits: cubic_ (cubic@moz-FE5AD6C7.mc.videotron.ca) (Connection reset by peer)
[15:45:23] *** Joins: cubic_ (cubic@moz-FE5AD6C7.mc.videotron.ca)
[15:48:02] <maik> rusti: ~"test".to_str()
[15:48:03] -rusti- ~~"test"
[15:48:07] <maik> hm
[15:48:53] <maik> rusti: let e = Err(~"test"); e.unwrap()
[15:48:57] -rusti- pastebinned 6 lines of output: http://ix.io/7yR
[15:49:12] *** Quits: heftig (heftig@9402E290.2F84ED1F.1CE4FB2A.IP) (Quit: Quitting)
[15:49:24] <maik> rusti: let e : Result<int,~str>= Err(~"test"); e.unwrap()
[15:49:24] -rusti- <anon>:5:32: 5:34 error: expected `,` but found `>=`
[15:49:24] -rusti- <anon>:5          let e : Result<int,~str>= Err(~"test"); e.unwrap()
[15:49:25] -rusti-                                          ^~
[15:49:25] -rusti- application terminated with error code 101
[15:49:44] <maik> rusti: let e : Result<int,~str> = Err(~"test"); e.unwrap();
[15:49:45] -rusti- task <unnamed> failed at 'called `Result::unwrap()` on `Err` value: test', /build/rust-git/src/rust/src/libstd/result.rs:120
[15:49:45] -rusti- application terminated with error code 101
[15:49:47] <etw> how can I copy an Enum out of a dereferenced & pointer, do I need to implement the Clone trait?
[15:50:37] <engla> yes use deriving     #[deriving(Clone)] enum Foo { .. }
[15:50:58] <engla> and call .clone()
[15:51:57] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[15:51:58] <etw> that did it, thanks engla 
[15:52:42] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[15:52:42] <maik> any idea what this error means? task <unnamed> failed at 'Unhandled condition: null_byte:~[99, 97, 108, 108, 101, 100, 32, 96, 82, 101, 115, 117, 108, 116 ..... "
[15:52:53] *** Quits: maxli1 (maxli@B5559308.9C54E60.2FA4EA88.IP) (Connection reset by peer)
[15:52:55] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[15:53:04] *** Quits: momiga (Meta@moz-FE9D5AEE.bflony.fios.verizon.net) (Ping timeout)
[15:53:04] <maik> I called unwrap on an err result
[15:53:36] <maik> maybe the str is not null terminated?
[15:53:42] <doomlord> seems i had a simple mistake stopping me using emacs.. 'keyboard-escape-quit not 'keyboard-quit, ..now i can actually use 'esc' to cancel things.
[15:54:11] *** Joins: momiga (Meta@moz-FE9D5AEE.bflony.fios.verizon.net)
[15:54:28] <maik> rusti: bytes!("hello)
[15:54:28] -rusti- <anon>:7:19: 7:20 error: unknown start of token: ?
[15:54:28] -rusti- <anon>:7     println(fmt!("%?", r))
[15:54:28] -rusti-                             ^
[15:54:28] -rusti- application terminated with error code 101
[15:54:35] <maik> rusti: bytes!("hello")
[15:54:36] -rusti- &[104, 101, 108, 108, 111]
[15:54:46] <doomlord> no more faffing around looking for a decent editor with rust support :)
[15:54:57] *** Quits: mrordinaire (Mibbit@1A659656.A607747.FD383126.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:55:21] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Connection reset by peer)
[15:55:24] *** Joins: maxli1 (maxli@B5559308.9C54E60.2FA4EA88.IP)
[15:55:36] <maik> rusti: std::str::raw::from_bytes([104, 101, 108, 108, 111])
[15:55:36] -rusti- <anon>:5:9: 6:5 error: call to unsafe function requires unsafe function or block
[15:55:36] -rusti- <anon>:5          std::str::raw::from_bytes([104, 101, 108, 108, 111])
[15:55:37] -rusti- <anon>:6     };
[15:55:37] -rusti- error: aborting due to previous error
[15:55:37] -rusti- application terminated with error code 101
[15:55:46] <engla> maik: it means the string has an internal null
[15:56:03] <maik> rusti: unsafe{std::str::raw::from_bytes([104, 101, 108, 108, 111])}
[15:56:04] -rusti- ~"hello"
[15:56:19] <maik> engla, can I fix this somehow?
[15:56:20] <engla> maik: find null_byte in std::c_str
[15:56:46] <engla> either make sure it doesn't appear before you use c_str or handle the condition
[15:57:07] <maik> rusti: let r: Result<int,~str> = Err(unsafe{std::str::raw::from_bytes([104, 101, 108, 108, 111])}); r.unwrap();
[15:57:08] -rusti- task <unnamed> failed at 'called `Result::unwrap()` on `Err` value: hello', /build/rust-git/src/rust/src/libstd/result.rs:120
[15:57:08] -rusti- application terminated with error code 101
[15:57:23] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[15:59:04] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[16:00:06] <maik> engla, can a ~str has a internal null?
[16:00:13] <maik> have*
[16:01:33] *** Quits: sebcrozet (sebcrozet@moz-7FB6C00B.w193-252.abo.wanadoo.fr) (Ping timeout)
[16:01:49] <engla> yes
[16:02:12] <engla> rusti: "hi\x00\x00hi"
[16:02:13] -rusti- "hi\x00\x00hi"
[16:05:10] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[16:08:17] *** Quits: fiirhok (fiirhok@moz-4BE3125.vc.shawcable.net) (Quit: Leaving)
[16:09:01] <maik> hm
[16:10:10] <maik> I am confused I am want to transform bytes to a ~str, so I did "let s = buf.to_c_str(); let s :~str= std::str::raw::from_bytes(s.as_bytes());" but I still get the null error
[16:11:09] <maik> because to_c_str has "null_byte::cond.raise" 
[16:11:54] *** Quits: victorporof (victorporo@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: victorporof)
[16:12:33] <maik> rusti: unsafe{std::str::raw::from_bytes([48, 40, 53, 41, 32, 58, 32, 101, 114, 114, 111, 114, 32, 67, 48, 48, 48, 48, 58, 32, 115, 121, 110, 116, 97, 120, 32, 101, 114, 114, 111, 114, 44, 32, 117, 110, 101, 120, 112, 101, 99, 116, 101, 100, 32, 39, 125, 39, 44, 32, 101, 120, 112, 101, 99, 116, 105, 110, 103, 32, 39, 44, 39, 32, 111, 114, 32, 39, 59, 39, 32, 97, 116, 32, 116, 111, 107, 101, 110, 32, 34, 125, 34, 10, 0])}
[16:12:34] -rusti- ~"0(5) : error C0000: syntax error, unexpected \'}\', expecting \',\' or \';\' at token \"}\"\n\x00"
[16:12:36] <sfackler> there's no reason to go through a c-str
[16:13:23] <sfackler> rusti: std::str::from_bytes(['a' as u8, 0 as u8])
[16:13:24] -rusti- ~"a\x00"
[16:14:40] <maik> is my byte array above legal?
[16:16:00] <engla> maik: legal for what?
[16:16:16] <maik> it seems to output the correct str but rust still tells me that it has a null_byte, aborts and prints me that "useless" byte array
[16:16:19] *** Joins: sebcrozet (sebcrozet@moz-2517AE39.w80-13.abo.wanadoo.fr)
[16:16:21] <engla> just use std::str::from_bytes and it will succeed if it's legal for str
[16:16:35] <engla> c_str and ~str have different requirements on the bytes
[16:17:19] <engla> " I am want to transform bytes to a ~str" -> use std::str::from_bytes
[16:17:43] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[16:18:42] <maik> here is the problem https://gist.github.com/MaikKlein/6334749
[16:18:54] <maik> that I find somewhat weird
[16:18:58] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[16:19:28] <engla> ok, no idea why
[16:19:37] <engla> I don't see where c_str comes in
[16:20:09] <engla> std::str::raw::from_bytes  doesn't do any checks for utf-8
[16:20:25] *** Joins: eskatrem (user@moz-D2023B8B.dyn.user.ono.com)
[16:20:27] <engla> hm maybe it does
[16:20:32] <engla> sorry, yeah I think it does
[16:21:31] <sfackler> str::raw::from_bytes doesn't but str::from_bytes does, iirc
[16:22:14] <engla> it looks like both do
[16:22:30] <maik> both give me the same result
[16:22:42] <eskatrem> Hi, sorry for the noob question, but how do I write a function that returns an array of int? 
[16:22:51] <eskatrem> fn myFunction(n:int) -> [int] {
[16:22:52] <eskatrem>     return [1,2];
[16:22:52] <eskatrem> } gives me an error
[16:22:54] <doomlord> is there a convention for a rust library  environment variable like GOPATH
[16:23:14] <maik> ah
[16:23:19] <sfackler> eskatrem: fn myFunction(n:int) -> ~[int] {...}
[16:23:23] <maik> if I call fmt! on the str it works again
[16:23:57] <sfackler> and then "return ~[1,2];" or even just "~[1,2]" as the body
[16:24:23] <eskatrem> sfackler: yes, thanks
[16:24:25] *** Quits: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[16:25:01] <sebcrozet> maik: Did you try to pop the last character from the bytes array?
[16:25:56] <maik> sebcrozet, no I didn't but it works if I use fmt! on the output of from_bytes
[16:27:08] <sebcrozet> maik: Ok. I wrote some code to check shader compilation error too. I had to pop the last character which is the C null terminator.
[16:27:29] <sebcrozet> *pop the last byte
[16:28:11] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[16:28:56] <maik> ah okay thanks
[16:29:59] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[16:31:35] <Luqman> ion: no problem
[16:32:37] *** Joins: zootm (calum@moz-DCC1F9C3.sgyl.cable.virginmedia.com)
[16:33:53] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[16:35:04] *** Joins: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP)
[16:36:10] *** Quits: maik (maik___@moz-9B1CE5EB.dip0.t-ipconnect.de) (Ping timeout)
[16:37:08] <zootm> I have a probably-dumb question
[16:37:35] <dwrensha> Hey, can someone take a quick look at https://gist.github.com/dwrensha/b87dacfae1d86d7c38c2#file-test-rs ?
[16:37:45] <eskatrem> again with arrays, how can I push an element to an array?
[16:38:10] <kimundi> doomlord: yes, see the rustpkg tutorial
[16:38:12] <cmr> dwrensha: you need Reader::new::<'a, ~str, u64>(v)
[16:38:29] <dwrensha> where is that extra type argument coming from?
[16:38:42] <cmr> It's the implicit Self
[16:38:45] *** Quits: threecreepio (jdp@moz-71E164C9.cust.bredbandsbolaget.se) (Quit: threecreepio)
[16:38:47] <cmr> that will be changing with pcwalton's patch
[16:39:11] <cmr> it'd be Reader::<for ~str>::new::<'a, u64>()
[16:39:16] <zootm> so apologies if this is obvious, but in rust 0.7: TcpSocket.read_start() gives you a Port you can listen on, but because the port has an @ pointer in it I've had trouble using any of the select methods on it; has anyone gotten that to work?
[16:39:28] <zootm> ...or should I be using trunk anyway?
[16:39:45] <cmr> zootm: use master.
[16:39:50] <cmr> extra::net has been removed.
[16:40:02] <zootm> cmr: I did see that; is there something one can use instead?
[16:40:10] <cmr> zootm: std::rt::io::net
[16:40:25] <cmr> https://github.com/chris-morgan/rust-http as an example
[16:40:27] <dwrensha> cmr: for now, what should I plug in there instead?
[16:40:31] <zootm> cmr: brilliant, thanks x2
[16:40:32] <dwrensha> ()?
[16:40:42] <cmr> dwrensha: no idea, unfortunately.
[16:40:54] <dwrensha> when's the patch due?
[16:41:05] <cmr> rusti: let v = ~[1, 2, 3]; v.push(4u); v
[16:41:06] -rusti- <anon>:5:29: 5:30 error: cannot borrow immutable local variable as mutable
[16:41:06] -rusti- <anon>:5          let v = ~[1, 2, 3]; v.push(4u); v
[16:41:07] -rusti-                                       ^
[16:41:07] -rusti- error: aborting due to previous error
[16:41:07] -rusti- application terminated with error code 101
[16:41:11] <cmr> rusti: let mut v = ~[1, 2, 3]; v.push(4u); v
[16:41:12] -rusti- ~[1, 2, 3, 4]
[16:41:17] <cmr> eskatrem: ^
[16:41:24] <cmr> dwrensha: well, it's bounced a few times
[16:41:36] <cmr> it's https://github.com/mozilla/rust/pull/8528
[16:41:38] <SiegeLord> Is it possible to avoid the marked allocation in this code: https://gist.github.com/SiegeLord/6334876
[16:42:05] *** Joins: victorporof (victorporo@87C1F78E.1DE10CA8.D8E68FF6.IP)
[16:42:10] <SiegeLord> What's Resource(0) is essentially a sentinel, but I don't want to have to allocate it each time
[16:42:53] <SiegeLord> But it is a sentinel that is conceptually owned by the Owner
[16:43:05] <SiegeLord> So I can't just allocate it alongside it
[16:45:48] <kimundi> SiegeLord: without looking at the source, could you use an enum?
[16:46:08] <SiegeLord> Mmm... that's a possibility, let me try it
[16:48:11] <kimundi> enum { Sentinel, Res(~Resource)}
[16:48:21] *** Quits: victorporof (victorporo@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[16:48:55] *** Quits: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[16:49:06] <kimundi> Or even just an Option<~Ressource>
[16:49:33] *** Quits: KindOne (KindOne@moz-487A693.dynamic.ip.windstream.net) (Ping timeout)
[16:49:54] <SiegeLord> Yeah, I used option
[16:50:13] <SiegeLord> And used target.take() to move out of it... thanks!
[16:51:23] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[16:52:00] *** Quits: maxli1 (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[16:53:06] *** Joins: heftig (heftig@moz-305746DD.dip0.t-ipconnect.de)
[16:53:43] *** Joins: Earnestly (earnest@B0BDF733.8FDE20A.5411983D.IP)
[16:54:04] *** Joins: KindOne (KindOne@moz-75B0A5D7.dynamic.ip.windstream.net)
[16:54:59] *** Joins: tautologico (shung@85E8CF27.DCFCC432.89E5CEC6.IP)
[16:55:24] *** Joins: threecreepio (jdp@moz-71E164C9.cust.bredbandsbolaget.se)
[16:56:14] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[16:57:07] *** Joins: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP)
[16:57:23] <zeux> rusti: 3+3
[16:57:24] -rusti- 6
[16:57:27] <zeux> hrm
[16:57:38] <zeux> my local rust build segfaults in rusti
[16:57:46] *** Quits: KindOne (KindOne@moz-75B0A5D7.dynamic.ip.windstream.net) (Ping timeout)
[16:57:51] <zeux> is rusti here using rusti executable?
[16:57:59] <SiegeLord> No, it uses rustc
[16:58:07] <zeux> ah.
[16:58:59] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Client exited)
[16:59:19] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[17:00:59] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Ping timeout)
[17:01:12] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[17:01:14] *** Quits: webber46 (webber46@moz-717E9C5B.cust.bredband2.com) (Quit: webber46)
[17:01:29] *** Joins: KindOne (KindOne@moz-55A6DBE3.dynamic.ip.windstream.net)
[17:04:11] *** Quits: tautologico (shung@85E8CF27.DCFCC432.89E5CEC6.IP) (Ping timeout)
[17:04:43] *** Joins: tautologico (shung@9541DC25.B36135C4.89E5CEC6.IP)
[17:05:50] *** Quits: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[17:06:29] *** Joins: mib_oz82ks (Mibbit@moz-43046875.as13285.net)
[17:06:30] *** Quits: mib_oz82ks (Mibbit@moz-43046875.as13285.net) (Quit: mib_oz82ks)
[17:06:57] *** kimundi is now known as zz_kimundi
[17:09:40] *** Quits: StarLight (StarLight@moz-E1BE90B5.dynamic.avangarddsl.ru) (Ping timeout)
[17:10:24] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[17:10:46] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[17:12:21] *** Quits: io2 (io2@moz-A6202C16.home.otenet.gr) (Ping timeout)
[17:14:05] *** Joins: StarLight (StarLight@moz-BC9373.dynamic.avangarddsl.ru)
[17:14:23] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:14:39] *** Joins: robertknight (robertknig@moz-5D8FBA98.range81-151.btcentralplus.com)
[17:15:25] *** Quits: kertap (kertap@moz-8FBDEFD1.b-ras3.mvw.galway.eircom.net) (Quit: kertap)
[17:15:33] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[17:19:13] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Client exited)
[17:20:36] *** Quits: sigma (sigma@moz-30DEFFA5.range86-168.btcentralplus.com) (Ping timeout)
[17:21:41] <adridu59> nmatsakis: hello, is it possible to make suggestions for the Rust website?
[17:21:57] <cmr> adridu59: open an issues, @mention graydon
[17:22:08] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[17:23:02] <adridu59> cmr: thank you
[17:23:06] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[17:23:51] *** Joins: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se)
[17:24:01] *** Joins: eatkinson (eatkinson@moz-F1968613.dsl.bell.ca)
[17:25:14] *** Joins: frogmella (Mibbit@moz-6C393FDD.rev.numericable.fr)
[17:25:27] *** Quits: frogmella (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[17:26:54] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[17:28:01] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Ping timeout)
[17:28:23] *** Joins: webber46 (webber46@moz-717E9C5B.cust.bredband2.com)
[17:28:25] *** Quits: eatkinson (eatkinson@moz-F1968613.dsl.bell.ca) (Quit: eatkinson)
[17:32:31] *** Joins: lkuper (lkuper@moz-4227E445.hfc.comcastbusiness.net)
[17:33:11] *** Quits: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP) (Ping timeout)
[17:33:24] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[17:35:59] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[17:38:19] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[17:39:09] *** Joins: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP)
[17:40:13] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (Client exited)
[17:40:37] *** Quits: mindcat (mindcat@E0B1159F.D3D1C5C1.291A146C.IP) (Ping timeout)
[17:41:22] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[17:45:54] *** Quits: webber46 (webber46@moz-717E9C5B.cust.bredband2.com) (Quit: webber46)
[17:47:09] *** Joins: victorporof (victorporo@87C1F78E.1DE10CA8.D8E68FF6.IP)
[17:49:09] *** Quits: victorporof (victorporo@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[17:52:20] *** Joins: jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[17:53:22] *** Quits: momiga (Meta@moz-FE9D5AEE.bflony.fios.verizon.net) (Ping timeout)
[17:54:07] *** Joins: momiga (Meta@moz-FE9D5AEE.bflony.fios.verizon.net)
[18:01:17] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[18:01:17] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/27tP1w
[18:01:17] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[18:01:18] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[18:01:18] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/5aJmVA
[18:01:18] <ghrust> 13rust/06auto 14a1e1f18 15Alex Crichton: Rewrite pass management with LLVM...
[18:01:18] <ghrust> 13rust/06auto 1428deaf7 15bors: auto merge of #8700 : alexcrichton/rust/better-llvm, r=thestinger...
[18:01:18] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[18:06:07] *** Joins: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP)
[18:07:34] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[18:09:22] *** Quits: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP) (Quit: Textual IRC Client: www.textualapp.com)
[18:16:18] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[18:16:18] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1428deaf7 to 146a649e6: 02http://git.io/N3iJvQ
[18:16:18] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[18:16:20] *** Joins: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net)
[18:16:21] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[18:16:21] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/dUPjWA
[18:16:21] <ghrust> 13rust/06auto 14485c19e 15Alex Crichton: Rewrite pass management with LLVM...
[18:16:21] <ghrust> 13rust/06auto 141867613 15bors: auto merge of #8700 : alexcrichton/rust/better-llvm, r=thestinger...
[18:16:22] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[18:18:29] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[18:21:29] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[18:25:20] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[18:26:44] *** Joins: ross (ross@moz-8A84103E.br.br.cox.net)
[18:26:47] *** Quits: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net) (Ping timeout)
[18:27:10] *** Joins: vosen (vosen@moz-266BA656.icpnet.pl)
[18:27:53] *** Joins: kertap (kertap@moz-8FBDEFD1.b-ras3.mvw.galway.eircom.net)
[18:33:32] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[18:34:03] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[18:37:35] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[18:38:33] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Ping timeout)
[18:39:49] *** Quits: ktos (ktos@moz-D3D6BE18.swidnica.mm.pl) (Ping timeout)
[18:40:05] *** Joins: MauricioC (mauricioc@moz-2CFCD404.impa.br)
[18:41:51] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[18:42:11] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[18:42:18] *** Quits: robertknight (robertknig@moz-5D8FBA98.range81-151.btcentralplus.com) (Ping timeout)
[18:43:59] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[18:44:53] *** Joins: webber46 (webber46@moz-717E9C5B.cust.bredband2.com)
[18:49:14] *** Joins: ktos (ktos@moz-D3D6BE18.swidnica.mm.pl)
[18:52:15] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:53:55] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[19:00:20] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[19:00:57] *** Joins: leonvv (leonvv@moz-7D83A5F1.ip.telfort.nl)
[19:02:17] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[19:02:52] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[19:03:12] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[19:03:50] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Connection reset by peer)
[19:04:10] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[19:05:57] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[19:06:14] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[19:07:42] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[19:08:25] *** Quits: webber46 (webber46@moz-717E9C5B.cust.bredband2.com) (Quit: webber46)
[19:11:33] *** Quits: leonvv (leonvv@moz-7D83A5F1.ip.telfort.nl) (Client exited)
[19:14:22] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[19:14:46] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[19:15:33] *** Joins: Joerg (chatzilla@moz-FB5EAE5B.dip0.t-ipconnect.de)
[19:15:35] *** Joins: webber46 (webber46@moz-717E9C5B.cust.bredband2.com)
[19:17:37] *** Quits: Joerg (chatzilla@moz-FB5EAE5B.dip0.t-ipconnect.de) (Quit: ChatZilla 0.9.90.1 [Firefox 23.0.1/20130814063812])
[19:20:32] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[19:24:15] *** Quits: wilsonk-laptop (kvirc@moz-8E86F35A.cg.shawcable.net) (Ping timeout)
[19:26:20] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[19:26:20] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 141867613 to 146a649e6: 02http://git.io/N3iJvQ
[19:26:20] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[19:26:21] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[19:26:21] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/R-hrOw
[19:26:21] <ghrust> 13rust/06auto 1466365b6 15Eric Reed: Added home_for_io_with_sched variant. Temporarily making IO unkillable.
[19:26:21] <ghrust> 13rust/06auto 1405f1bbb 15bors: auto merge of #8723 : anasazi/rust/temporary-unkillable-io, r=brson...
[19:26:22] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[19:26:39] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[19:28:05] *** Joins: jviereck (Adium@moz-61973F2F.dip0.t-ipconnect.de)
[19:28:56] *** Quits: goffrie (goffrie@moz-9669DF8E.dsl.ncf.ca) (Ping timeout)
[19:30:25] *** Joins: goffrie (goffrie@moz-AC16A972.dsl.ncf.ca)
[19:30:39] <zeux> Is there any way to look at the fail! callstack? By default I only see the source line where the failure came from
[19:30:52] <zeux> and in my case it's libstd/condition.rs:43 - which is not helpful
[19:31:27] <Luqman> zeux: you can try gdb
[19:32:05] *** Joins: robertknight (robertknig@moz-5D8FBA98.range81-151.btcentralplus.com)
[19:32:16] <Luqman> zeux: and breaking on rust_begin_unwind
[19:35:11] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[19:35:17] *** Joins: Kruppe (user@moz-EE1E894A.home3.cgocable.net)
[19:38:50] <zeux> Luqman: thanks, that helps
[19:39:18] *** Quits: ktos (ktos@moz-D3D6BE18.swidnica.mm.pl) (Ping timeout)
[19:39:46] <zeux> apparently with_c_str that's used in fail! can't handle null bytes, so if you accidentally construct an Err with a string with a null byte, and then unwrap() the result, you get a fail! from condition.rs instead of the original message.
[19:40:03] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[19:40:44] *** Joins: maik (maik___@moz-9B1CE5EB.dip0.t-ipconnect.de)
[19:40:56] <zeux> is dumping the stack on fail! without attaching gdb (maybe optionally) something that will be implemented later? should I create a bug for it?
[19:41:30] *** Joins: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP)
[19:42:07] *** Quits: jviereck (Adium@moz-61973F2F.dip0.t-ipconnect.de) (Quit: Leaving.)
[19:42:42] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[19:42:43] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[19:43:07] *** Joins: ktos (ktos@moz-D3D6BE18.swidnica.mm.pl)
[19:43:27] <Luqman> zeux: yea, i'm pretty sure with_c_str checks for interior nulls
[19:43:51] <Luqman> and there did use to be a way to get a backtrace without gdb, it just hasn't been ported to the new runtime
[19:45:53] *** Quits: tikue (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue)
[19:46:04] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Ping timeout)
[19:46:12] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[19:51:01] *** Joins: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP)
[19:51:07] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[19:52:55] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[19:53:17] *** Quits: momiga (Meta@moz-FE9D5AEE.bflony.fios.verizon.net) (Ping timeout)
[19:54:07] *** Joins: momiga (Meta@moz-FE9D5AEE.bflony.fios.verizon.net)
[19:54:56] *** Quits: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se) (Ping timeout)
[19:57:05] *** Quits: lkuper (lkuper@moz-4227E445.hfc.comcastbusiness.net) (Ping timeout)
[19:57:38] *** Quits: ktos (ktos@moz-D3D6BE18.swidnica.mm.pl) (Ping timeout)
[19:58:28] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[19:58:32] *** Joins: ktos (ktos@moz-D3D6BE18.swidnica.mm.pl)
[19:59:25] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[19:59:37] <cmr> bblum: gr!
[19:59:42] <cmr> error!("checking impl with self type %?", ty::get(self_ty).sty);
[19:59:46] <cmr> Why would you leave that in :(
[20:00:02] <zeux> Luqman: great, thanks for the help
[20:00:52] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[20:04:03] *** Joins: wilsonk-laptop (kvirc@moz-8E86F35A.cg.shawcable.net)
[20:06:10] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Quit: ChatZilla 0.9.90.1 [Firefox 23.0.1/20130814063812])
[20:06:53] *** Joins: lkuper (lkuper@moz-4227E445.hfc.comcastbusiness.net)
[20:10:41] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[20:13:46] *** Joins: Diamond (dick@moz-C01E1CD1.ks.ks.cox.net)
[20:14:48] *** Joins: tikue (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[20:16:40] <kertap> Is there some reason a to_str that I defined wouldn't be used when I have fmt!("%?", x)?
[20:17:08] <sp3d> afaik %? uses introspection, not a trait
[20:17:44] <cmr> correct.
[20:17:57] <cmr> kertap: it's not designed nor used for that.
[20:18:05] <kertap> ah right, cool
[20:18:24] <kertap> where is the code for that?
[20:19:17] <cmr> std::unstable::extfmt is the runtime code.
[20:19:25] <kertap> cool. thanks
[20:20:42] <strcat> %? calls through to std::repr
[20:20:52] <Eridius> rusti: use std::to_str::ToStr; struct Foo(); impl ToStr for Foo { fn to_str(&self) -> ~str { ~"Foo str" } } fmt!("%s", Foo)
[20:21:00] -rusti- pastebinned 7 lines of output: http://ix.io/7za
[20:21:15] <Eridius> hrm, mildly surprised that doesn't call .to_str(). I guess I can call it manually though
[20:21:21] <strcat> fmt! is going away soon
[20:21:51] <inf-groupoid> strcat: What is it going to be replaced with? :-O
[20:21:55] <cmr> ifmt
[20:22:12] <inf-groupoid> Ah.
[20:22:17] <strcat> you could consider the old fmt! deprecated already
[20:24:32] <inf-groupoid> Can assert! take a string like fail! ?
[20:24:36] <Eridius> strcat: are there docs yet on the replacement?
[20:24:39] <cmr> inf-groupoid: yes
[20:24:41] <inf-groupoid> (in addition to the condition being asserted, of course)
[20:24:42] <Eridius> rusti: assert!(false, "ha ha")
[20:24:43] -rusti- task <unnamed> failed at 'ha ha', <anon>:5
[20:24:43] -rusti- application terminated with error code 101
[20:24:45] <cmr> rusti: assert!(1 == 0, "foo")
[20:24:47] -rusti- task <unnamed> failed at 'foo', <anon>:5
[20:24:47] -rusti- application terminated with error code 101
[20:24:48] *** Quits: igl1 (igl@moz-F3B0D1C8.adsl.alicedsl.de) (Ping timeout)
[20:24:53] <inf-groupoid> cmr: Ah, nice! :-)
[20:24:56] <Eridius> rusti: 1u / 0u
[20:24:58] -rusti- task <unnamed> failed at 'attempted to divide by zero', <anon>:5
[20:24:58] -rusti- application terminated with error code 101
[20:25:14] <cmr> assert_eq doesn't, so that's a minor annoyance.
[20:25:35] <Eridius> assert_eq also moves its arguments, which can be annoying :/
[20:25:49] *** Joins: igl (igl@moz-87909CD0.adsl.alicedsl.de)
[20:30:13] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[20:30:38] *** Quits: kertap (kertap@moz-8FBDEFD1.b-ras3.mvw.galway.eircom.net) (Quit: kertap)
[20:30:41] <inf-groupoid> It is possible to get a vector's underlying buffer and std::libc::funcs::posix88::mman::mmap a file descriptor there, right?
[20:31:01] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[20:31:17] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[20:31:17] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/R-hrOw
[20:31:17] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[20:31:41] <cmr> inf-groupoid: http://seld.be/rustdoc/master/std/vec/raw/fn.to_ptr.html, yes.
[20:31:53] *** Joins: fhahn (fhahn@moz-7924DB5C.vie.surfer.at)
[20:32:00] <cmr> inf-groupoid: we have highlevel mmap bindings though.
[20:32:19] <inf-groupoid> cmr: Available in 0.7? :-O
[20:32:28] <cmr> I... don't remember.
[20:32:49] <cmr> but http://seld.be/rustdoc/master/std/os/struct.MemoryMap.html
[20:32:51] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[20:33:08] <inf-groupoid> cmr: Ah, let me see! :-)
[20:34:33] <cmr> inf-groupoid: you can create a slice out of the MemoryMap. Not a vector, though, incompatible semantics
[20:34:53] <cmr> (dynamically expanding, which means reallocation via realloc)
[20:35:04] <cmr> strcat: is jemalloc actually enabled by default now?
[20:35:07] <strcat> yes
[20:35:10] <inf-groupoid> cmr: Makes sense!
[20:35:14] <cmr> cool
[20:35:26] <strcat> cmr: small allocations are much, much faster
[20:35:33] <strcat> like 100ns -> 26ns
[20:35:40] <cmr> still have ffi overhead?
[20:35:54] <strcat> well ffi overhead is gone if you don't make wrappers
[20:35:59] <strcat> the exchange allocator is wrapped
[20:36:12] <strcat> ("gone" - it still has the fixed stack check overhead)
[20:36:16] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[20:36:16] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/5NtKUg
[20:36:16] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[20:36:18] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[20:36:18] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/-72lEQ
[20:36:18] <ghrust> 13rust/06auto 14041d8e8 15Brian Anderson: Allow metadata to be not compressed
[20:36:18] <ghrust> 13rust/06auto 1439e8cb6 15Brian Anderson: Don't copy metadata after loading
[20:36:19] <ghrust> 13rust/06auto 14022f188 15Brian Anderson: Don't ever compress metadata
[20:36:21] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[20:36:38] <cmr> any idea how much more we stand to win in that area? few ns or not even?
[20:36:54] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Ping timeout)
[20:37:02] <strcat> dunno
[20:37:05] <cmr> alright.
[20:37:05] <strcat> it's not the lowest hanging fruit
[20:37:16] <strcat> I would say the big problems right now are...
[20:37:34] *** Quits: Ms2ger (Ms2ger@moz-549ABB0C.adsl-dyn.isp.belgacom.be) (Quit: nn)
[20:37:37] <strcat> 1) there's an LLVM bug where it isn't able to inline const expr bitcasts of functions
[20:38:17] <strcat> (not reported btw, I need to narrow down some cases and report it - but it has been talked about on their mailing list)
[20:39:51] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[20:40:22] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[20:42:35] *** Quits: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP) (Ping timeout)
[20:43:44] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[20:44:06] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[20:44:06] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[20:44:10] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[20:44:45] *** Joins: squiddy (squiddy@moz-1E33BBE6.adsl.alicedsl.de)
[20:45:54] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[20:47:54] *** Joins: victorporof (victorporo@87C1F78E.1DE10CA8.D8E68FF6.IP)
[20:49:58] *** Quits: victorporof (victorporo@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[20:51:14] <Eridius> rusti: "/".split_iter('/').to_owned_vec()
[20:51:17] -rusti- ~["", ""]
[20:52:00] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[20:52:41] *** Joins: Liothen (liothen@moz-80EF0CD7.spkn.qwest.net)
[20:53:30] *** Quits: rory (rory@moz-BBD47402.hsd1.ca.comcast.net) (Connection reset by peer)
[20:53:44] *** Joins: rory (rory@moz-BBD47402.hsd1.ca.comcast.net)
[20:57:40] *** Quits: olsonjeffery (pf@B8927AE1.CFEFA148.239A1A9E.IP) (Ping timeout)
[20:57:41] *** Joins: olsonjeffery (pf@B8927AE1.CFEFA148.239A1A9E.IP)
[20:58:43] *** Joins: eatkinson (eatkinson@moz-F1968613.dsl.bell.ca)
[20:59:17] <eskatrem> hey, does rues have .some and .all for arrays like in javascript?
[20:59:29] <Eridius> eskatrem: iterators provide .all and .any
[20:59:43] <eskatrem> Eridius: ok, thank you
[20:59:45] <Eridius> rusti: let xs = [2,4,6]; xs.iter.all(|&x| x % 2 == 0)
[20:59:53] -rusti- pastebinned 8 lines of output: http://ix.io/7zc
[21:00:01] <Eridius> rusti: let xs = [2,4,6]; xs.iter().all(|&x| x % 2 == 0)
[21:00:02] -rusti- true
[21:00:11] <Eridius> note, the &x there is because .iter() on an array returns &T
[21:02:58] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[21:04:44] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[21:05:22] *** Quits: lkuper (lkuper@moz-4227E445.hfc.comcastbusiness.net) (Ping timeout)
[21:10:33] *** Quits: pcdummy (pcdummy@moz-CF4CA865.page4me.ch) (Ping timeout)
[21:11:04] <eskatrem> Eridius: thanks for the example, it's just too bad rust doesn't have an interpreter :p
[21:12:08] <cmr> eskatrem: you can query rusti
[21:12:46] <eskatrem> rusti: 1+1
[21:12:48] -rusti- 2
[21:12:52] <eskatrem> oh nice
[21:13:26] <strcat> eskatrem: there's a `rusti` command but it doesn't work very well
[21:13:29] <strcat> the rusti in here wraps rustf
[21:13:31] <strcat> rustc *
[21:13:48] *** Joins: lkuper (lkuper@moz-4227E445.hfc.comcastbusiness.net)
[21:13:54] *** Joins: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se)
[21:14:13] <eskatrem> strcat: yeah, I just tried on my shell, but as you say, it's not working very well, I couldn't execute 1+1
[21:14:27] *** Joins: pcdummy (pcdummy@moz-CF4CA865.page4me.ch)
[21:15:04] <strcat> eskatrem: and there's a web version at http://strcat.zapto.org:8000/
[21:15:53] <eskatrem> by the way, with rusti (from command line), am I supposed to enter in my shell: "rusti" without the quote to get a rust repl?
[21:16:03] <cmr> yes
[21:16:23] <eskatrem> well, that doesn't work to well
[21:16:43] <cmr> nope
[21:17:00] *** Joins: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP)
[21:17:41] <eskatrem> http://pastebin.com/fMrQWFjV
[21:17:47] <eskatrem> that's my try with rusti
[21:18:05] <inf-groupoid> How do I take a subslice of a vector/slice, without copying it? :-O
[21:18:24] <cmr> eskatrem: why would you enter `rusti;` in the repl?
[21:18:38] <cmr> rusti: let x = &[1, 2, 3, 4]; x.slice(1, 3)
[21:18:38] <strcat> inf-groupoid: slice method
[21:18:39] -rusti- &[2, 3]
[21:19:30] <eskatrem> cmr: I don't know why I did that, but it seems to permanently break rusti for me (I gonna try on another shell now)
[21:19:34] <inf-groupoid> cmr: Ah, nice, thanks! :-)
[21:19:47] <cmr> eskatrem: well, when there's an error, it bails completely.
[21:20:59] <eskatrem> even after chaning a shell...
[21:21:31] <eskatrem> *changing
[21:22:17] <zeux> In this code: match p.filetype() { Some(~".txt") => ... }, does ~ mean that the string ".txt" is allocated on heap before matching?
[21:22:25] <zeux> Or is this just needed for the expression to type, and ~ actually means "compare the string inside option.Some with ".txt" without allocating anything"?
[21:22:34] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[21:22:34] *** ChanServ sets mode: +o brson
[21:22:45] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[21:22:50] <zeux> p is Path; filetype() returns Option<~str>
[21:22:50] <lkuper> strcat: ooh, I didn't know about http://strcat.zapto.org:8000/ .  nice.
[21:23:06] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[21:23:12] <lkuper> I like that it lets you choose between master and release, too
[21:23:13] <strcat> lkuper: https://github.com/thestinger/rust-playpen the source, if you're curious :P
[21:23:27] <strcat> it's a quick and dirty wrapper like the irc bot, around a sandboxing thing I made
[21:24:39] <lkuper> I think it'd be nice to have that on rust-lang.org, actually
[21:24:54] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[21:25:14] <strcat> lkuper: yeah that's the plan, but it'll need a server with a fair bit of memory
[21:25:17] <lkuper> the example code should be runnable live
[21:25:20] <lkuper> heh, good point
[21:25:30] * lkuper tries the current example
[21:25:52] <strcat> it limits them to 128MiB at the moment, but lets say there's a reddit post at the top of r/programming and you get 20 concurrent users
[21:26:02] <lkuper> yeahhhh
[21:26:12] <SiegeLord> Have a queue?
[21:26:21] <Eridius> strcat: fwiw play.golang.org caches the results of programs and just spits out the cached result if the same program is run multiple times
[21:26:22] *** Joins: victorporof (victorporo@moz-BAE8D951.pck.nerim.net)
[21:26:46] <Eridius> (it also pegs the clock at an unmoving time, and works around other sources of nondeterministic output)
[21:27:08] <strcat> it has a /dev/urandom ;p
[21:27:22] *** Quits: maik (maik___@moz-9B1CE5EB.dip0.t-ipconnect.de) (Ping timeout)
[21:27:22] <strcat> I could just replace the dev with one returning zeroes
[21:27:39] <Eridius> or looping through a fixed 1MB block of random data
[21:27:47] <strcat> but RNG seems like a valid thing to play with
[21:27:52] <Eridius> which will prevent pathological behavior coming from all 0's
[21:28:08] <strcat> Eridius: that's harder though
[21:28:10] <Eridius> of course play.golang.org also prevents file access
[21:28:13] <strcat> it has to be a dev node
[21:28:16] <strcat> Eridius: well, I don
[21:28:19] <strcat> don't ;]
[21:28:25] <strcat> I don't want to have to mess with rustc
[21:28:30] <strcat> the sandboxing doesn't trust the compiler either.
[21:28:45] <Eridius> strcat: I think play.golang.org does it by simply preventing you from using the "os" package
[21:28:59] <strcat> it's a read-only FS and there's a whitelist of syscalls https://github.com/thestinger/rust-playpen/blob/master/whitelist
[21:29:05] <strcat> but you can still do a lot
[21:29:16] <strcat> considering it gets a few package updates a day (including a nightly rust pkg)
[21:29:53] <strcat> anyway the syscall whitelist is just to cut down the attack surface on the kernel
[21:29:59] <strcat> in theory, chroot + namespaces is secure
[21:30:38] <strcat> VMs aren't very secure since they have kernel modules + tons of bugs
[21:30:40] *** Quits: bjz (brendanzab@AE0B7388.B8C2BBC3.F4A11E52.IP) (No route to host)
[21:30:46] <strcat> + special CPU privs, yay
[21:31:03] <strcat> if you really want secure you'd have custom binaries with only read/write/exit ;p
[21:32:39] *** Quits: victorporof (victorporo@moz-BAE8D951.pck.nerim.net) (Quit: victorporof)
[21:34:14] <inf-groupoid> How do I test whether an unsafe C pointer is NULL?
[21:34:25] <Eridius> inf-groupoid: compare to ptr::null()?
[21:34:49] <Eridius> inf-groupoid: actually there's a convenience .is_null() method
[21:34:50] <inf-groupoid> Eridius: Ah, nice! ty
[21:35:00] <Eridius> and .is_not_null()
[21:35:02] <jeaye> rusti: unsafe { let p: *c_void = 0; p == ptr::null() }
[21:35:06] <Eridius> both defined in std::ptr::RawPtr
[21:35:07] -rusti- pastebinned 14 lines of output: http://ix.io/7ze
[21:35:23] <Eridius> rusti: unsafe { let p: *u8 = 0; p.is_null() }
[21:35:24] -rusti- <anon>:5:31: 5:32 error: mismatched types: expected `*u8` but found `<VI0>` (expected *-ptr but found integral variable)
[21:35:24] -rusti- <anon>:5          unsafe { let p: *u8 = 0; p.is_null() }
[21:35:24] -rusti-                                         ^
[21:35:24] -rusti- error: aborting due to previous error
[21:35:24] -rusti- application terminated with error code 101
[21:35:27] * jeaye is no help at all. :P
[21:35:33] <Eridius> rusti: use std::ptr; unsafe { let p: *u8 = ptr::null; p.is_null() }
[21:35:34] -rusti- <anon>:5:45: 5:54 error: mismatched types: expected `*u8` but found `extern "Rust" fn() -> *<V5>` (expected *-ptr but found extern fn)
[21:35:34] -rusti- <anon>:5          use std::ptr; unsafe { let p: *u8 = ptr::null; p.is_null() }
[21:35:34] -rusti-                                                       ^~~~~~~~~
[21:35:34] -rusti- error: aborting due to previous error
[21:35:35] -rusti- application terminated with error code 101
[21:35:38] <Eridius> rusti: use std::ptr; unsafe { let p: *u8 = ptr::null(); p.is_null() }
[21:35:40] -rusti- <anon>:5:23: 5:71 warning: unnecessary `unsafe` block [-W unused-unsafe (default)]
[21:35:40] -rusti- <anon>:5          use std::ptr; unsafe { let p: *u8 = ptr::null(); p.is_null() }
[21:35:42] -rusti-                                 ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[21:35:45] -rusti- true
[21:35:52] <Eridius> ah right, don't need unsafe just to do that
[21:35:56] *** Joins: maik (maik___@moz-9B1CE5EB.dip0.t-ipconnect.de)
[21:36:11] <inf-groupoid> Ah.
[21:36:14] <inf-groupoid> ty all!
[21:38:33] <ktos> compile_and_link: x86_64-unknown-linux-gnu/stage0/lib/rustc/x86_64-unknown-linux-gnu/lib/libstd.so
[21:38:37] <Eridius> straw poll: what would somePath.make_relative_to(someOtherPath) do?
[21:38:38] <ktos> task <unnamed> failed at 'failure in fork: Cannot allocate memory', /home/rustbuild/src/rust-buildbot/slave/snap3-linux/build/src/libstd/run.rs:651
[21:38:44] <ktos> any idea please? 
[21:38:48] <ktos> I have 1.5GB or RAM while see during compilation that max 60% is used
[21:40:18] <strcat> ktos: 32-bit?
[21:41:15] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[21:41:15] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/-72lEQ
[21:41:15] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[21:41:46] <ktos> strcat: nope, 64
[21:42:21] <ion> When cross-compiling (for Arm), can i link libstd-â€¦.so statically so i could just transfer a single binary to the machine?
[21:42:33] *** Quits: Palmik (palmik@moz-CC484FDD.tmcz.cz) (Quit: Lost terminal)
[21:42:36] <strcat> ktos: do you have swap?
[21:42:53] <ktos> strcat: not sure, it's live linux so I think I may not
[21:43:11] <strcat> the default overcommit ratio is probably too low
[21:43:47] <ktos> do you think adding swap will help?
[21:44:06] <strcat> ktos: yes but also just setting vm.overcommit_ratio to 90% should work
[21:44:46] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: night)
[21:44:55] <strcat> or overcommit_memory to 2
[21:45:08] <strcat> for full overcommit
[21:45:18] <strcat> the default settings *assume* you have swap equal to your amount of ram or greater
[21:45:40] <ktos> I will try, thank you :)
[21:45:56] <strcat> ktos: so, sysctl vm.overcommit_memory=2
[21:46:01] <strcat> might work
[21:46:15] <strcat> but 1.5GiB might just not be enough with no swap.
[21:46:21] <strcat> librustc will need more than libstd
[21:47:20] <cmr> ion: no.
[21:47:52] *** Quits: eatkinson (eatkinson@moz-F1968613.dsl.bell.ca) (Quit: eatkinson)
[21:48:53] <cmr> ion: https://github.com/mozilla/rust/issues/552
[21:48:54] <ion> Ok. Is there a nice way to put an executable with its rust runtime dependencies into the same place automatically?
[21:49:04] <ion> thanks
[21:49:44] <cmr> also no
[21:50:02] <ion> ok
[21:51:31] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[21:52:09] <SiegeLord> Kind of weird how dynamic linking was supported first
[21:52:32] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[21:52:36] <SiegeLord> D added dynamic libraries a few months ago after nearly of decade of static linking only... and they are broken atm :P
[21:52:36] <ion> So close but so far. Now i have a gnueabihf binary that starts executing, but then thereâ€™s an illegal instruction in record_sp_limit from librustrt.so. :-)
[21:53:02] <strcat> SiegeLord: rust supports static linking, the build system doesn't
[21:53:20] <strcat> so there's no libstd.a to actually build a program with
[21:53:36] <SiegeLord> Wait, what about that issue?
[21:54:08] *** Quits: momiga (Meta@moz-FE9D5AEE.bflony.fios.verizon.net) (Ping timeout)
[21:54:15] <SiegeLord> Oh, I guess one of the comments says it's partly implemented
[21:54:51] <strcat> it worked before when I tried it ages ago
[21:54:52] *** Joins: momiga (Meta@moz-FE9D5AEE.bflony.fios.verizon.net)
[21:55:02] <strcat> you have to use #[no_std] though
[21:55:16] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[21:55:17] <strcat> and you might have to emit IR and do it yourself
[21:55:47] <Luqman> there's also no librustrt.a either
[21:55:55] <strcat> yeah no_std takes care of that
[21:56:00] <strcat> it's kind of a misnomer
[21:56:51] *** Quits: inf-groupoid (user@580120F5.8ED93E28.1C8C8CE9.IP) (Quit: ERC Version 5.3 (IRC client for Emacs))
[21:57:05] *** Quits: tautologico (shung@9541DC25.B36135C4.89E5CEC6.IP) (Quit: tautologico)
[21:58:27] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[21:59:18] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[21:59:37] <Luqman> strcat: no, even with no_std librustrt is still linked in
[21:59:51] <strcat> but it doesn't need it
[22:00:01] <Luqman> true
[22:00:27] <strcat> you can use --emit-llvm and compile it with clang, that's what I've been doing
[22:00:30] *** Joins: eatkinson (eatkinson@moz-F1968613.dsl.bell.ca)
[22:00:30] <Luqman> also, i think there were plans to just statically link it with libstd or something
[22:01:01] <strcat> I guess you could use -c and link it yourself, dunno
[22:01:15] <strcat> but clang's LLVM passes are actually right ;p
[22:02:02] <Eridius> wow, I think I screwed something up. Running libstd tests was at 17GB of RAM and increasing...
[22:02:12] <Eridius> first time I've ever seen this computer start using swap ;)
[22:02:29] <Luqman> strcat: trying that, it seems librustrt is actually needed even with no_std
[22:02:55] <Luqman> otherwise you get: undefined reference to `upcall_new_stack' and `upcall_del_stack'
[22:03:27] <Luqman> though that's because of libmorestack.a
[22:04:00] <Eridius> strcat: I wonder if it would make sense to run the std/extra tests with an RSS limit
[22:04:20] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[22:05:13] <strcat> Luqman: but you can stub them ;p, you always have to do that with no_std anyway
[22:05:23] * strcat shrugs
[22:05:29] *** Joins: Sorella (chris@9D963F5D.DF5D8AE7.54BCAB54.IP)
[22:05:43] <brson> cmr: my metadata pr had no particular effect on cycle time
[22:05:59] <cmr> brson: shame :(
[22:06:06] <Luqman> strcat: yea, in any case using -c and linking it manually seems to work for a small test case
[22:06:14] *** Joins: mark_edward (quassel@56B89B23.3369D986.15E50DC1.IP)
[22:08:33] <tedh> is there a way to get the thread id, just want to print it in a debug message?
[22:10:24] <Eridius> tedh: you can get the name of the current task with std::tas::with_task_name, although I don't know what that gives you if you never named your task
[22:10:31] <Eridius> rusti: std::task::with_task_name(|x| printfln!(x))
[22:10:36] -rusti- You've met with a terrible fate, haven't you?
[22:10:36] -rusti- fatal runtime error: local malloc outside of task
[22:10:37] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[22:10:40] <Eridius> whoa
[22:10:48] <Eridius> strcat: ^
[22:10:57] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[22:11:01] <strcat> probably an unwhitelisted syscall
[22:11:04] <strcat> do it locally, does it work?
[22:11:22] <Eridius> nope, same error
[22:11:27] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[22:11:30] * strcat shrugs
[22:11:35] <strcat> maybe brson knows
[22:11:43] <strcat> could just not be impl'ed
[22:11:51] <tedh> i was looking for the os pthread id, not the task id
[22:12:01] <cmr> tedh: not portably no
[22:12:18] <Eridius> tedh: well if there's a pthread_* C function that does what you want, you can call out to it with FFI
[22:12:21] <cmr> Wrap the FFI itself.
[22:12:32] <Eridius> although tasks aren't necessarily going to live on one thread for their lifetime
[22:12:47] *** Quits: Sorella (chris@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: G'night everynyan~!)
[22:13:08] <tedh> y, thats actually what i want to see, the relationship between tasks and threads
[22:13:14] <Luqman> tedh: you could always add an extern for pthread_self :P
[22:13:51] <tedh> sure, was hoping there was already something
[22:15:12] *** Quits: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP) (Ping timeout)
[22:15:48] *** Quits: vosen (vosen@moz-266BA656.icpnet.pl) (Quit: Leaving)
[22:17:41] <cmr> http://cmr.github.io/blog/2013/08/25/this-week-in-rust/
[22:20:09] <brson> cmr: thanks!
[22:20:22] <brson> is negative issue churn good?
[22:20:39] <strcat> brson: means we closed more than we opened
[22:20:57] <tikue> \o/ glad to see yield is reserved now
[22:21:26] <Eridius> cmr: looks good
[22:22:07] <sp3d> cmr: sysconf "named"->"names"
[22:22:13] <tikue> rusti: fprintf!("{0}{1}{0}", "abra", "cad");
[22:22:14] -rusti- <anon>:5:9: 5:16 error: macro undefined: 'fprintf'
[22:22:14] -rusti- <anon>:5          fprintf!("{0}{1}{0}", "abra", "cad");
[22:22:14] -rusti-                   ^~~~~~~
[22:22:14] -rusti- application terminated with error code 101
[22:22:21] <tikue> rusti: fprintf("{0}{1}{0}", "abra", "cad");
[22:22:21] -rusti- <anon>:5:9: 5:16 error: unresolved name `fprintf`.
[22:22:22] -rusti- <anon>:5          fprintf("{0}{1}{0}", "abra", "cad");
[22:22:22] -rusti-                   ^~~~~~~
[22:22:22] -rusti- error: aborting due to previous error
[22:22:22] -rusti- application terminated with error code 101
[22:22:40] <tikue> what is fprintf
[22:25:21] <tikue> rusti: format!("{0}{1}{0}", "abra", "cad");
[22:25:21] -rusti- <anon>:5:9: 5:15 error: macro undefined: 'format'
[22:25:21] -rusti- <anon>:5          format!("{0}{1}{0}", "abra", "cad");
[22:25:22] -rusti-                   ^~~~~~
[22:25:22] -rusti- application terminated with error code 101
[22:25:36] <tikue> rusti: fmt!("{0}{1}{0}", "abra", "cad")
[22:25:36] -rusti- <anon>:5:9: 6:5 error: too many arguments to fmt!. found 3, expected 1
[22:25:36] -rusti- <anon>:5          fmt!("{0}{1}{0}", "abra", "cad")
[22:25:36] -rusti- <anon>:6     };
[22:25:37] -rusti- application terminated with error code 101
[22:25:55] <myname> isn't that ifmt?
[22:26:15] <tikue> is ifmt ever being renamed to fmt! or are they both staying
[22:26:52] <tikue> rusti: println!("{0}{1}{0}", "abra", "cad");
[22:26:52] -rusti- <anon>:5:9: 5:16 error: macro undefined: 'println'
[22:26:52] -rusti- <anon>:5          println!("{0}{1}{0}", "abra", "cad");
[22:26:53] -rusti-                   ^~~~~~~
[22:26:53] -rusti- application terminated with error code 101
[22:27:08] <tikue> i'm utterly confused by what this PR does
[22:27:09] <tikue> https://github.com/mozilla/rust/pull/8637
[22:29:00] *** Joins: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net)
[22:29:50] <Eridius> strcat: how fast does rusti update?
[22:29:58] <strcat> daily
[22:30:22] <strcat> it hasn't seen the build from today yet
[22:30:25] <strcat> thestinger/rust-git  0.7.1984.g59ca7a8-1  0.7.2018.g05f1bbb-1  0.07 MiB        17.12 MiB
[22:30:28] <tikue> ah ok
[22:30:35] <strcat> giving it a poke
[22:30:56] <myname> .1984 .2018 Oo
[22:31:31] <Eridius> note to self: when processing a pair of iterators manually with a loop and a match, be sure to handle the (None, None) case
[22:32:01] <tikue> rusti: let s = "abc123"; for c in s.iter() { printlnÂ©; }
[22:32:01] -rusti- <anon>:5:54: 5:54 error: unknown start of token: \xa9
[22:32:02] -rusti- <anon>:5          let s = "abc123"; for c in s.iter() { printlnÂ©; }
[22:32:02] -rusti-                                                                ^
[22:32:02] -rusti- application terminated with error code 101
[22:32:23] <tikue> rusti: let s = "abc123"; for c in s.iter() { println(c); }
[22:32:24] -rusti- <anon>:5:55: 5:56 error: mismatched types: expected `&str` but found `char` (expected &str but found char)
[22:32:24] -rusti- <anon>:5          let s = "abc123"; for c in s.iter() { println(c); }
[22:32:24] -rusti-                                                                 ^
[22:32:24] -rusti- error: aborting due to previous error
[22:32:24] -rusti- application terminated with error code 101
[22:32:30] <Eridius> try printfln!()
[22:32:37] <tikue> so println can take ints and floats but not chars?
[22:32:57] <tikue> rusti: let s = "abc123"; for c in s.iter() { printfln!(c); }
[22:33:02] -rusti- pastebinned 7 lines of output: http://ix.io/7zf
[22:33:03] <Eridius> no, println() takes a string. printfln!() will format any single arg using %?, or can take a format string and multiple args
[22:33:06] <tikue> ah ok
[22:34:00] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[22:35:02] *** Quits: maik (maik___@moz-9B1CE5EB.dip0.t-ipconnect.de) (Ping timeout)
[22:35:22] <tikue> i'm very happy that printf! ==> print! and printfln! ==> println!
[22:36:23] <tikue> but why is ifmt! ==> format! ?
[22:36:29] <tikue> will it ever replace fmt! ?
[22:38:15] <SiegeLord> I'd imagine fmt to be removed
[22:39:45] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:41:25] *** Joins: bjz (brendanzab@AE0B7388.B8C2BBC3.F4A11E52.IP)
[22:41:44] <ion> I seem to be getting an illegal instruction error from â€œmrc p15, #0, r3, c13, c0, #3â€ in src/rt/arch/arm/record_sp.S:18. I wonder what to do about that?
[22:42:29] <h3r3tic> bjz: I'm looking at a white triangle :)
[22:42:29] *** Quits: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net) (Client exited)
[22:42:35] <Luqman> ion: o.o that's odd
[22:42:35] <tikue> does the newrt file io use iterators?
[22:42:42] <tikue> for line in file.iter() 
[22:42:42] <bjz> h3r3tic: on windows?
[22:42:45] <h3r3tic> yup!
[22:42:48] <Luqman> ion: you're building for arm i suppose. what target?
[22:42:48] <bjz> ooooo
[22:42:55] <bjz> h3r3tic: howw?
[22:42:58] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[22:43:02] <strcat> tikue: probably not yet
[22:43:05] <strcat> it will
[22:43:12] <tikue> oh good :) 
[22:43:24] *** Quits: mark_edward (quassel@56B89B23.3369D986.15E50DC1.IP) (Ping timeout)
[22:43:29] <strcat> I forget who said they were looking into that
[22:43:42] <ion> luqman: arm-unknown-linux-gnueabihf, Beagle Bone with armv7l.
[22:43:46] <tikue> strcat: do you know it works now? i'd love a file io tutorial hah
[22:43:51] <zeux> bjz: fyi, your Shader struct from yesterday does not report errors correctly :)
[22:43:51] * ion looks at https://encrypted.google.com/search?hl=en&q=arm%20illegal%20instruction%20%22mrc%22
[22:44:06] <bjz> zeux: ook
[22:44:15] <tikue> strcat: i meant do you know how* it works now
[22:44:19] <zeux> bjz: str::raw::from_buffer stuffs a null terminator into the string
[22:44:19] <bjz> zeux: really?
[22:44:26] <h3r3tic> @zeux_cg?
[22:44:34] <bjz> zeux: oh yeah, I had trouble with that
[22:44:44] *** Joins: mark_edward (quassel@56B89B23.3369D986.15E50DC1.IP)
[22:44:48] <bjz> zeux: solution?
[22:44:49] <zeux> bjz: which can result in fails if you ever try to do c_str
[22:44:54] <zeux> bjz: I'm using from_c_str
[22:44:54] <strcat> tikue: no I haven't looked at the new I/O stuff yet
[22:44:55] *** Joins: Florob (Florob@moz-39532932.de)
[22:45:00] <zeux> h3r3tic: yup
[22:45:05] <h3r3tic> ha, small world :)
[22:45:05] <Luqman> ion: this is while building the compiler right?
[22:45:15] <h3r3tic> nice to see you here :D
[22:45:18] <tikue> strcat: can people leave you msgs on your computer via rusti and file io lol
[22:45:25] <strcat> tikue: no
[22:45:29] <zeux> bjz: also, imo your Linked thing is overdesigned, I'd just do Program::new(~[~Shader]]
[22:45:35] <ion> luqman: Sorry, i was ambiguous. This is when trying to run the executable on the Arm system.
[22:45:42] <strcat> tikue: it doesn't have any non-read-only filesystems
[22:45:49] <tikue> ah ok
[22:45:51] <bjz> zeux: yeah, I thought it might be
[22:46:14] <strcat> tikue: https://github.com/thestinger/playpen/blob/master/README.md that explains how it's isolated
[22:46:16] <zeux> bjz: and thank you for glfw-rs and gl-rs :)
[22:46:21] <bjz> zeux: bit of an experiment
[22:46:28] <tikue> strcat: awesome
[22:46:30] <bjz> zeux: np
[22:46:40] <h3r3tic> bjz: long story. I first implemented a custom generation mode, which made no use of function pointers on the Rust side. but then even that refused to work. after a lot of trial and error, I realized what was the difference between it and working libraries ( like GLFW ). the GL wrapper used fn(...) -> c_void for functions without return types. that totally borked the calling convention. when I changed the lib interface to use stdcall, the @number suffix had 4
[22:46:40] <h3r3tic>  bytes too many. the Rust side was actually trying to pass the c_void around. turning all -> c_void to -> () solved the issue. then I backported it to your "ptr" backend, and combined with changing the ABI to stdcall, that did it.
[22:46:42] <strcat> tikue: each time you give it a command, you have a fresh /home/rust and /tmp tmpfs
[22:46:53] <strcat> and the actual / is read-only
[22:46:53] <bjz> zeux: must head out now, but let me know if you need anything
[22:47:20] *** Joins: pudgetta (Mibbit@moz-DE9E9D8.protectedgroup.com)
[22:47:21] <strcat> tikue: the only whitelisted device is urandom, and a small set of syscalls are whitelisted ;p
[22:47:27] <strcat> so not much you can do
[22:47:28] *** Quits: pudgetta (Mibbit@moz-DE9E9D8.protectedgroup.com) (User has been banned from Mozilla (no spamming here))
[22:47:30] <bjz> h3r3tic: O_O
[22:47:36] <Luqman> ion: that's annoying :(
[22:47:43] <strcat> not even looking at dmesg, that needs a syscall or kmsg
[22:47:56] <strcat> I probably whitelisted uname though
[22:48:03] <h3r3tic> bjz: on the upside, I implemented yet another another backend, which takes a considerably shorter time to compile, and the resulting lib is much smaller too :D
[22:48:06] <tikue> lol so we can't have any fun at all :P
[22:48:08] <Eridius> hrm, how odd a name would .to_relative_to() be?
[22:48:19] *** zeux is now known as zeuxcg
[22:48:44] <Eridius> hmm, maybe .new_relative_to()
[22:48:48] <sp3d> for what?
[22:49:00] <ion> luqman: https://gist.github.com/ion1/6336759
[22:49:05] <tikue> I'm getting an ice when there are multiple function declarations with the same name but different prototypes
[22:49:08] <tikue> is that known
[22:49:16] <Eridius> sp3d: I'm re-writing path(), and I'm trying to come up with the right name for what's currently called .get_relative_to() (which, btw, behaves in a completely asinine way; I'm using different behavior)
[22:49:23] <tikue> oh wait ignore that
[22:49:30] <Eridius> err std::path, not path(). silly fingers
[22:49:35] *** Quits: zeuxcg (zeux@moz-80D1F912.hsd1.ca.comcast.net) (Quit: Leaving)
[22:49:44] <Eridius> I don't like .get_relative_to() because .get to me implies non-allocating, when this constructs a new Path
[22:49:45] <bjz> h3r3tic: awesome!
[22:49:58] <bjz> h3r3tic: PR?
[22:49:59] <sp3d> so if the path is /home/user it would give /home/user/something?
[22:50:00] <Eridius> I have .make_relative_to() right now, but I kind of want to reserve that name for a potential self-mutating variant
[22:50:02] <h3r3tic> I shall fork it and do the PR :)
[22:50:11] *** Joins: zeuxcg (zeuxcg@moz-80D1F912.hsd1.ca.comcast.net)
[22:50:16] <Eridius> sp3d: "/home/user".make_relative_to("/home/bob") would yield "../user"
[22:50:17] <bjz> h3r3tic: great, I'm super excited
[22:50:18] <strcat> cmr: two minor iterator things are range_inclusive and a 'reverse_' adaptor to reverse double-ended iterators of &mut
[22:50:23] <sp3d> ahh
[22:50:25] <Eridius> it yields the path that, if joined to the arg, yields self
[22:50:34] <Eridius> i.e. it transforms self into something that's "relative to" the arg
[22:50:39] <bjz> h3r3tic: must head off now, but thank you, I really appreaciate it!
[22:50:40] <Eridius> (except it returns a new Path instead of mutating self)
[22:50:41] <sp3d> right
[22:50:46] <h3r3tic> bjz: tomorrow though, if that's okay. haven't had any sleep in ~35h now :P
[22:50:50] <zeuxcg> bjz: I also tried to use your math library but it does not compile any more :( and also there's this github issue that I did not really get but it looked like it prevents people from using the library
[22:51:08] <sp3d> ".relative_path_to()"?
[22:51:10] <bjz> zeuxcg: yikes
[22:51:11] <Florob> Eridius, the Obj-C programmer in me says .path_realitve_to(), but I guess that is not exactly rusty.
[22:51:12] <Eridius> the current .get_relative_to is really weird. It goes in the opposite direction, but it also behaves as though you've popped both self and the arg, which is really weird
[22:51:22] <Eridius> sp3d: hmm, that has potential
[22:51:23] <zeuxcg> bjz: does not compile on master, that is, 0.7 may be fine
[22:51:36] *** Joins: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net)
[22:51:41] <bjz> zeuxcg: I have been meaning to get be to lmath, but have been focusing on gl-rs
[22:51:48] <zeuxcg> I did not look into fixing it yet, don't need math yet
[22:51:51] <bjz> zeuxcg: things bit-rot
[22:51:55] <zeuxcg> yeah
[22:52:10] <bjz> zeuxcg: I have a redesign in the works
[22:52:24] <bjz> zeuxcg: I'll be back later
[22:52:35] <bjz> zeuxcg: bye!
[22:53:03] <Eridius> sp3d: my other concern is that with pretty much any name, you can read it both ways, as in "make me relative to $arg" or "path relative to me that produces $arg"
[22:53:18] <Eridius> i.e. it's either "give me a path 'relative to' $arg", or "give me a relative path that goes 'to' $arg"
[22:53:59] <sebcrozet> zeuxcg: Iâ€™ve got a math library too which compile on master if you need it.
[22:54:12] <Eridius> maybe I should call it .path_relative_from(). Sounds a bit odder, but is slightly less ambiguous
[22:54:17] <sp3d> you could do "foo.relative_from(bar)" with reverse semantics? that seems less ambiguous
[22:54:18] <sp3d> heh
[22:54:32] <tikue> this causes an ICE: https://gist.github.com/tikue/1007886afcb108f06524
[22:55:50] <Luqman> ion: that is weird. I don't know why it doesn't seem to like the mrc instruction
[22:56:18] <ion> luqman: I better ask on #beagle and see if anyone has ideas.
[22:56:24] <Luqman> ion: i've tried it with 4 different arm devices and none of them seem to exhibit that behaviour
[22:57:04] <tikue> rusti: let mut it = ~(~[2u]).move_iter().chain(::std::iterator::count(3u, 2)) as ~Iterator<uint>; it.next()
[22:57:05] -rusti- error: internal compiler error: unexpected failure
[22:57:05] -rusti- note: the compiler hit an unexpected failure path. this is a bug
[22:57:05] -rusti- note: try running with RUST_LOG=rustc=1 to get further details and report the results to github.com/mozilla/rust/issues
[22:57:06] -rusti- application terminated with error code 101
[22:57:09] <tikue> ^
[22:58:02] <strcat> tikue: trait objects really don't work well
[22:58:25] <strcat> although I doubt you want an iterator trait object
[22:58:31] <strcat> you won't have adaptors
[22:58:43] <tikue> i don't want anything in particular
[22:58:45] <strcat> and it'll be really slow
[22:58:45] <tikue> i was just playing around
[22:58:56] <tikue> but that worked a few weeks ago
[22:59:06] <strcat> might be a default method or inheritance bug
[23:02:24] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[23:02:28] *** Joins: mib_sohmg5 (Mibbit@moz-DE9E9D8.protectedgroup.com)
[23:02:59] *** Quits: mib_sohmg5 (Mibbit@moz-DE9E9D8.protectedgroup.com) (User has been banned from Mozilla (no spamming here))
[23:04:04] *** Quits: pcdummy (pcdummy@moz-CF4CA865.page4me.ch) (Ping timeout)
[23:07:39] *** Joins: pcdummy (pcdummy@moz-CF4CA865.page4me.ch)
[23:08:31] <h3r3tic> does Rust have anything like D's "system" ABI? on *nix that translates to cdecl, and on windows it's stdcall. makes it much easier to write bindings for various libs ( e.g. OpenGL ). you'd say extern "system" rather than having to roll two versions manually  *pokes nmatsakis*
[23:11:17] <brson> h3r3tic: no. i think there is an issue on it somewhere where i was negative on the idea, but it was proposed as the default. might make more sense as a non-default abi called "system"
[23:11:33] <h3r3tic> I wouldn't like it as default either
[23:11:42] <h3r3tic> but the 'system' alias worked out really well for D :)
[23:12:06] <tikue> brson: is there a tutorial or explanation of how the newrt file i/o works?
[23:12:12] <tikue> i feel like giving it a spin
[23:12:40] <bblum> cmr: oops! sorry!
[23:12:57] <brson> tikue: no, not at all
[23:13:13] <brson> tikue: as usual, I suggest reading the test cases
[23:13:19] <tikue> brson: ah ok thanks, good idea
[23:13:22] <brson> i still consider it very experimental
[23:13:27] <tikue> in what sense?
[23:14:04] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[23:14:05] <brson> well, I frankly don't even know what state it's in. i've sort of been letting olsonjeffery and acrichto drive while i goof off on other things
[23:14:13] <tikue> haha
[23:14:15] <brson> i expect the design to change quite a bit still
[23:14:21] <brson> particularly re error handling
[23:14:28] *** Quits: squiddy (squiddy@moz-1E33BBE6.adsl.alicedsl.de) (Quit: Leaving)
[23:14:39] *** Quits: eatkinson (eatkinson@moz-F1968613.dsl.bell.ca) (Ping timeout)
[23:14:43] <tikue> i just mean i saw some stuff in cmr's ```this week in rust``` about it, so i thought that meant it'd seen a lot of progress
[23:14:49] <brson> it has!
[23:14:54] <tikue> :P
[23:15:02] <brson> and it probably even works
[23:15:06] <tikue> haha
[23:15:10] <brson> but i still expect a lot of churn
[23:15:14] <tikue> rt::io::file right?
[23:15:16] <brson> yes
[23:15:26] <tikue> is any of it going to be in the prelude
[23:15:29] <tikue> i.e. open
[23:15:31] <brson> eventually yes
[23:15:34] <tikue> woot
[23:15:37] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[23:15:38] <geomyidae> rust-http & new io <3
[23:15:41] <doomlord> could anyone comment on the feasibility of a patch to compile a subset aimed at completions ... only perform various stages for a specified source file, or function
[23:15:42] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[23:16:01] <doomlord> (^aimed at smart-completions ide plugin)
[23:16:16] <strcat> doomlord: rust doesn't know how to do compilation of partially valid stuff as required
[23:16:35] <strcat> it won't get you types and the ability to resolve if it's not already valid
[23:17:02] *** Joins: eatkinson (eatkinson@moz-6C08E02F.dsl.bell.ca)
[23:17:04] <brson> h3r3tic: i can't find that issue. maybe you should open another
[23:18:01] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[23:18:30] <h3r3tic> brson: kay, thanks for looking :) will do it tomorrow, though. it's bed time now!
[23:18:40] <zeuxcg> uh-oh, code built with new master crashes in ld :-/
[23:19:47] <zeuxcg> as well as rustc itself
[23:21:05] <doomlord> hack idea: replace the last dot you typed with a ";" , maybe insert some extra closing braces/parens if unbalanced, and compile to get the type.. would probably be very slow though
[23:22:41] *** Quits: anders (anders@moz-329650BE.cust.bredbandsbolaget.se) (Quit: anders)
[23:23:02] <tikue> brson: so it looks like Reader is a pretty low-level trait. Is there anything else atm that returns strings and/or doesn't require a buffer argument?
[23:24:53] *** Quits: mark_edward (quassel@56B89B23.3369D986.15E50DC1.IP) (Ping timeout)
[23:26:04] <eskatrem> is there a syntactic sugar to get the last element of an array?
[23:26:50] *** Joins: mark_edward (quassel@56B89B23.3369D986.15E50DC1.IP)
[23:26:51] <brson> tikue: not really, there are a bunch of extension methods on some traits in rt::io::extensions, but figuring out how to handle strings correctly with I/O is still in the future
[23:27:03] <tikue> brson: gotcha, thx
[23:27:42] <tikue> rusti: &Path(".")
[23:27:48] -rusti- pastebinned 16 lines of output: http://ix.io/7zi
[23:27:59] <tikue> rusti: Path(".")
[23:28:01] -rusti- {is_absolute: false, components: ~[~"."]}
[23:28:19] <tikue> why is Path in the prelude
[23:28:31] *** Quits: mark_edward (quassel@56B89B23.3369D986.15E50DC1.IP) (Ping timeout)
[23:30:02] *** Joins: mein_asdf (mein_asdf@1ADC2370.4B9E65B8.B79EA657.IP)
[23:32:18] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[23:36:10] <Eridius> I want to upgrade vec's split_iter() to have the same flexibility of str's split_iter(), i.e. so it can tak an element T instead of just a closure. Unfortunately, this requires modifying any calls that take a closure to give a type to the closure parameter
[23:36:20] <Eridius> otherwise it can't decide which implementation of the trait to use (not really sure why though)
[23:36:22] <tikue> println! no longer seems to take a single non-string argument optionally
[23:36:26] <Eridius> any thoughts on whether this is worthwhile?
[23:36:42] <Eridius> it means xs.split_iter(|x| *x % 2 == 0) needs to become xs.split_iter(|x: &int| *x % 2 == 0)
[23:37:01] <Eridius> but it would also allow xs.split_iter(5)
[23:39:19] <Eridius> well sorry, it would allow xs.split_iter(&5)
[23:40:15] <Eridius> oh damn, that hits borrowed value lifetime issues. I'd have to say `let x = 5; xs.split_iter(&x)`, which sucks. Guess this isn't worth doing :/
[23:40:44] <Eridius> I wouldn't mind allowing xs.split_iter(5), but that causes conflict trait impls
[23:41:30] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Quit: Konversation terminated!)
[23:43:27] <tikue> how do you print so that '\n' is printed as a newline
[23:43:34] *** Quits: sebcrozet (sebcrozet@moz-2517AE39.w80-13.abo.wanadoo.fr) (Ping timeout)
[23:43:39] <tikue> rusti: print("a\nb\nc");
[23:43:40] -rusti- a
[23:43:40] -rusti- b
[23:43:40] -rusti- c()
[23:43:52] <tikue> rusti: println("a\nb\nc");
[23:43:53] -rusti- a
[23:43:53] -rusti- b
[23:43:53] <dbaupp> Eridius: I quite like that
[23:43:53] -rusti- c
[23:43:53] -rusti- ()
[23:44:11] <dbaupp> Eridius: (but I implemented the functionality for str.split_iter so I'm a little biased :P )
[23:44:13] <tikue> rusti: printfln!("a\nb\nc");
[23:44:14] -rusti- "a\nb\nc"
[23:44:14] -rusti- ()
[23:44:17] <Eridius> dbaupp: I think the awkwardness of having to keep a separate let-binding for the element, coupled with having to update your closures to explicitly declare the types, makes it a non-starter
[23:44:32] <dbaupp> Eridius: how many are splitting on a single element?
[23:44:37] <Eridius> I am!
[23:44:45] <tikue> print(fmt!("a\nb\nc"));
[23:44:45] <Eridius> oh you mean how many closures? Not sure, only looked at the vec tests
[23:44:49] <tikue> rusti: print(fmt!("a\nb\nc"));
[23:44:50] -rusti- a
[23:44:50] -rusti- b
[23:44:50] -rusti- c()
[23:45:00] <sfackler> is anyone working on hooking into libuv's DNS lookup?
[23:45:07] <dbaupp> Eridius: yeah, as in, how many closures can be converted to &T
[23:45:22] <Eridius> dbaupp: it may be simpler just to add a separate method .split_elt_iter() that takes an element (or a reference to an element) instead of a closure
[23:46:02] <Eridius> .split_iter(elt) works well in str because you can take the element directly, since it's a char, and this doesn't cause conflicting trait impls
[23:46:09] <tikue> rusti: print(ifmt!("{0}\n{1}{0}", "abra", "kad"));
[23:46:09] -rusti- <anon>:5:15: 5:19 error: macro undefined: 'ifmt'
[23:46:09] -rusti- <anon>:5          print(ifmt!("{0}\n{1}{0}", "abra", "kad"));
[23:46:09] -rusti-                         ^~~~
[23:46:09] -rusti- application terminated with error code 101
[23:46:20] <tikue> rusti: print(format!("{0}\n{1}{0}", "abra", "kad"));
[23:46:22] -rusti- abra
[23:46:22] -rusti- kadabra()
[23:46:43] <tikue> rusti: println!("{0}\n{1}{0}", "abra", "kad");
[23:46:44] -rusti- abra
[23:46:45] -rusti- kadabra
[23:46:45] -rusti- ()
[23:46:57] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[23:47:01] <tikue> rusti: println!("a\nb");
[23:47:02] -rusti- a
[23:47:02] -rusti- b
[23:47:02] -rusti- ()
[23:47:46] <tikue> rusti: println!(1);
[23:47:46] -rusti- <anon>:5:18: 5:19 error: format argument must be a string literal.
[23:47:46] -rusti- <anon>:5          println!(1);
[23:47:47] -rusti-                            ^
[23:47:47] -rusti- application terminated with error code 101
[23:48:02] <tikue> rusti: printfln!(1);
[23:48:03] -rusti- 1
[23:48:03] -rusti- ()
[23:49:11] <dbaupp> Eridius: right, yeah; str is much easier because it's not generic
[23:49:56] <SiegeLord> rusti: println!("{}", Some("test"));
[23:50:02] -rusti- pastebinned 10 lines of output: http://ix.io/7zj
[23:50:21] <tikue> wat
[23:50:23] <SiegeLord> rusti: println!("{} {}", "test", 1);
[23:50:24] -rusti- test 1
[23:50:24] -rusti- ()
[23:50:38] <tikue> what is std::fmt::Default and why does Option not implement it
[23:51:17] <dbaupp> tikue: it's the to_str that ifmt uses
[23:51:34] *** Quits: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net) (Client exited)
[23:51:40] <Eridius> surprised that Option doesn't implement it
[23:51:41] <dbaupp> it's require to handle the flags like {:10} etc
[23:51:49] *** Quits: eatkinson (eatkinson@moz-6C08E02F.dsl.bell.ca) (Quit: eatkinson)
[23:52:03] <dbaupp> I assume that the only reason anything in the stdlib doesn't implement it is because no-one's done it yet
[23:52:32] <tikue> but that means like
[23:52:45] <SiegeLord> Is it even possible? You need to implement it iff T implements it where T is Option<T>
[23:52:49] <tikue> rusti: struct Foo; println(fmt!(Foo));
[23:52:50] -rusti- <anon>:5:34: 5:37 error: first argument to fmt! must be a string literal.
[23:52:50] -rusti- <anon>:5          struct Foo; println(fmt!(Foo));
[23:52:50] -rusti-                                            ^~~
[23:52:50] -rusti- application terminated with error code 101
[23:52:53] <SiegeLord> *T is T in Option<T>
[23:53:04] <tikue> rusti: struct Foo; println!(Foo);
[23:53:05] -rusti- <anon>:5:30: 5:33 error: format argument must be a string literal.
[23:53:05] -rusti- <anon>:5          struct Foo; println!(Foo);
[23:53:05] -rusti-                                        ^~~
[23:53:05] -rusti- application terminated with error code 101
[23:53:08] <Eridius> SiegeLord: impl <T: Default> Default for Option<T>
[23:53:12] <tikue> rusti: struct Foo; printfln!(Foo);
[23:53:13] -rusti- {}
[23:53:13] -rusti- ()
[23:53:25] <SiegeLord> Oh, right right
[23:53:30] <tikue> rusti: struct Foo; printtn!("{}", Foo);
[23:53:31] -rusti- <anon>:5:21: 5:28 error: macro undefined: 'printtn'
[23:53:31] -rusti- <anon>:5          struct Foo; printtn!("{}", Foo);
[23:53:31] -rusti-                               ^~~~~~~
[23:53:31] -rusti- application terminated with error code 101
[23:53:40] <tikue> rusti: struct Foo; println!("{}", Foo);
[23:53:43] -rusti- pastebinned 10 lines of output: http://ix.io/7zk
[23:53:52] <SiegeLord> rusti: struct Foo; println!("{?}", Foo);
[23:53:53] -rusti- <anon>:5:30: 5:35 error: unterminated format string
[23:53:53] -rusti- <anon>:5          struct Foo; println!("{?}", Foo);
[23:53:53] -rusti-                                        ^~~~~
[23:53:53] -rusti- error: aborting due to previous error
[23:53:53] -rusti- application terminated with error code 101
[23:54:03] *** Quits: momiga (Meta@moz-FE9D5AEE.bflony.fios.verizon.net) (Ping timeout)
[23:54:04] <SiegeLord> Maybe that's also not implemented yet
[23:54:05] *** Joins: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[23:54:09] <SiegeLord> Or maybe it's not even planned
[23:54:16] <tikue> rusti: struct Foo; println!("{:?}", Foo);
[23:54:17] -rusti- {}
[23:54:17] -rusti- ()
[23:54:28] <SiegeLord> Oh right... forgot the syntax XD
[23:54:33] *** Quits: robertknight (robertknig@moz-5D8FBA98.range81-151.btcentralplus.com) (Ping timeout)
[23:54:57] *** Joins: momiga (Meta@moz-FE9D5AEE.bflony.fios.verizon.net)
[23:56:25] *** Joins: ofeldt (ofeldt@moz-42E43ACE.dip0.t-ipconnect.de)
[23:56:56] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[23:57:05] *** Quits: ofeldt- (ofeldt@moz-FE664078.dip0.t-ipconnect.de) (Ping timeout)
[23:59:58] <mein_asdf> Is there any sort of raw string syntax in rust yet?  Or plans for one?  (Similar to C++11's  R" , C#'s  @" , or Python's  """).
