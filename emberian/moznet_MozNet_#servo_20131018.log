[00:02:04] *** Quits: marcosc_ (marcosc@moz-AC9DB812.dsl.telepac.pt) (Input/output error)
[00:02:37] *** Joins: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[00:02:54] <kmc> should I put the meetings schedule on https://github.com/mozilla/servo/wiki/Meetings ? some potential contributors are interested
[00:06:35] <kmc> (for people who want to follow notes as we write them in etherpad)
[00:07:16] <cmr> kmc: yes please
[00:08:24] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[00:10:14] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[00:10:21] <kmc> ok
[00:11:48] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[00:12:07] *** Joins: jdm (jdm@A931292E.20A5B7E6.930FA32.IP)
[00:12:08] *** ChanServ sets mode: +o jdm
[00:14:22] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[00:15:13] <lbergstrom> though from now on I'm going to be better about not transcribing stuff that's suppose to be private chat :-) Sometimes I just get into verbatim-typing-mode and turn off my brain...
[00:26:44] <kmc> added it :)
[00:33:55] *** Quits: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net) (Ping timeout)
[00:36:49] *** Joins: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net)
[00:41:21] <jack> i thoguht it was there, but i'm probably remembering the rust one :)
[00:43:05] *** Quits: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net) (Quit: Leaving...)
[00:52:27] *** Quits: mccr8 (mccr8@moz-5FEA0C74.dsl.dynamic.sonic.net) (Quit: mccr8)
[00:55:35] *** Joins: marcosc (marcosc@moz-AC9DB812.dsl.telepac.pt)
[00:57:17] *** Quits: marcosc (marcosc@moz-AC9DB812.dsl.telepac.pt) (Ping timeout)
[00:58:06] <jdm> late night email triage
[00:58:13] <jdm> the perfect activity by which to fall asleep
[01:09:00] <jack> jdm: are you in paris next week?
[01:09:08] <jdm> jack: yep.
[01:09:16] <jack> jdm: \o/ servo hacking party :)
[01:09:42] <jack> i arrive sunday morning i think
[01:09:44] <jdm> better believe it.
[01:09:57] <jdm> I arrive by train at the ungodly hour of 9am on monday
[01:11:05] *** Quits: eatkinson (eatkinson@moz-392601D4.lightspeed.sntcca.sbcglobal.net) (Quit: eatkinson)
[01:11:11] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:14:16] <jack> i thought you were already in apris.
[01:14:39] *** Joins: brson (brson@6A848D32.C1B840DD.76F66111.IP)
[01:14:39] *** ChanServ sets mode: +o brson
[01:14:40] <jdm> nope, I've been in london for the past two weeks
[01:15:02] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:15:12] *** Quits: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: My lid went down)
[01:15:36] <jdm> I suspect SimonSapin has found it handy to have someone local to bounce ideas off of
[01:18:37] <jack> Simon is in paris too i think. This will be great fun :)
[01:19:12] <jdm> nobody goes home until the new style system is hooked up
[01:19:26] <cmr> heh
[01:19:42] <jack> TWO STYLE SYSTEMS ENTER, ONE STYLE SYSTEM LEAVES
[01:23:14] *** Joins: brendan (brendaneic@5FF29450.615B56E6.43362C16.IP)
[01:23:40] <jdm> I really need to restrain my brain
[01:23:52] <jdm> I keep seeing gecko bugmail and thinking "oh, I should do that in servo"
[01:24:28] <jdm> <brain> web workers!
[01:24:31] <jdm> <jdm> stay on target
[01:24:49] *** Quits: brson (brson@6A848D32.C1B840DD.76F66111.IP) (Ping timeout)
[01:26:59] *** Joins: brson (brson@6A848D32.C1B840DD.76F66111.IP)
[01:26:59] *** ChanServ sets mode: +o brson
[01:37:18] *** jxs is now known as jxs_
[01:46:25] *** Quits: ahal (ahal@moz-94F07FF4.cable.teksavvy.com) (Connection reset by peer)
[01:58:47] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[01:58:47] <ghservo> [13servo] 15kmcallister closed issue #1071: HTMLDocument::new can't handle window = None from DOMParser  02http://git.io/D-ePrg
[01:58:47] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[02:00:46] *** Joins: jxs (joaoxsouls@moz-A7EE0DAF.compute-1.amazonaws.com)
[02:01:41] *** Quits: jxs_ (textual@moz-7D72AF75.rev.vodafone.pt) (Quit: bye)
[02:12:29] *** Joins: marcosc (marcosc@moz-AC9DB812.dsl.telepac.pt)
[02:18:50] <jack> did we change how str.char_at works?
[02:18:56] <jack> running into problems with cssparser tests.
[02:20:07] *** Joins: eatkinson (eatkinson@moz-E57448EF.airbears2.berkeley.edu)
[02:22:39] *** Joins: kimundi_ (kimundi@moz-729E00E8.dip0.t-ipconnect.de)
[02:23:22] *** Quits: kimundi (kimundi@moz-55AF642C.dip0.t-ipconnect.de) (Ping timeout)
[02:23:22] *** kimundi_ is now known as kimundi
[02:31:34] *** kimundi is now known as zz_kimundi
[02:31:34] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[02:38:19] *** zz_kimundi is now known as kimundi
[02:39:04] *** Quits: marcosc (marcosc@moz-AC9DB812.dsl.telepac.pt) (Input/output error)
[02:47:03] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[02:47:32] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[02:49:13] *** Quits: brendan (brendaneic@5FF29450.615B56E6.43362C16.IP) (Quit: brendan)
[02:51:06] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[02:51:07] *** Quits: eatkinson (eatkinson@moz-E57448EF.airbears2.berkeley.edu) (Quit: eatkinson)
[02:54:52] *** Quits: vodik (simon@moz-2D668626.cpe.net.cable.rogers.com) (Ping timeout)
[02:55:09] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[02:55:09] <ghservo> [13servo] 15kmcallister opened pull request #1082: Misc small changes (06master...06misc)  02http://git.io/-ZzBHw
[02:55:09] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[02:56:19] *** Joins: eatkinson (eatkinson@moz-E57448EF.airbears2.berkeley.edu)
[03:06:42] <jack> should this be failing? https://gist.github.com/metajack/7035591
[03:09:26] *** Joins: marcosc (marcosc@moz-AC9DB812.dsl.telepac.pt)
[03:11:20] *** Quits: marcosc (marcosc@moz-AC9DB812.dsl.telepac.pt) (Ping timeout)
[03:12:48] <jdm> I can't imagine why it should
[03:13:05] <jdm> presumably in starts_with?
[03:13:07] *** Joins: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP)
[03:13:07] <ghservo> 01[13servo01] 15bors-servo pushed 0 new commits to 06auto: 02http://git.io/WtfRTg
[03:13:07] *** Parts: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP) ()
[03:13:09] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[03:13:09] <ghservo> 01[13servo01] 15bors-servo pushed 7 new commits to 06auto: 02http://git.io/WF51pA
[03:13:09] <ghservo> 13servo/06auto 142babc8d 15Keegan McAllister: Provide a useful error message when we fail to create the GLFW window
[03:13:09] <ghservo> 13servo/06auto 141e4d3e2 15Keegan McAllister: Print GLFW errors
[03:13:09] <ghservo> 13servo/06auto 14377a76a 15Keegan McAllister: Enable DOMParser test case...
[03:13:10] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[03:15:27] <jdm> http://mxr.mozilla.org/rust/source/src/libstd/str.rs#837
[03:15:39] <jdm> byte_iter doesn't sound particularly wise to me
[03:15:53] <jdm> and uh
[03:16:13] <jdm> it compares string indexes against bytes?
[03:16:15] <jdm> o.o
[03:17:49] <jdm> oh, I wonder why the code on mxr is so different than git head
[03:17:56] <dbaupp> string indices are bytes
[03:18:40] <jdm> colour me surprised
[03:21:19] *** Joins: marcosc (marcosc@moz-AC9DB812.dsl.telepac.pt)
[03:22:21] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[03:29:21] <jack> this seems fundamentally broken.
[03:29:57] <jack> i mena, slice_to gets a byte offset, but why would this correspond at all to anything sane in the haystack?
[03:33:05] *** Quits: brson (brson@6A848D32.C1B840DD.76F66111.IP) (Quit: leaving)
[03:33:15] *** Quits: eatkinson (eatkinson@moz-E57448EF.airbears2.berkeley.edu) (Quit: eatkinson)
[03:33:43] <jack> recompiling rust to test a change.
[03:34:08] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[03:34:08] <ghservo> 01[13servo01] 15bors-servo merged 06auto into 06master: 02http://git.io/WF51pA
[03:34:08] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[03:34:08] *** Joins: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP)
[03:34:08] <ghservo> [13servo] 15bors-servo closed pull request #1082: Misc small changes (06master...06misc)  02http://git.io/-ZzBHw
[03:34:08] *** Parts: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP) ()
[03:45:10] *** Joins: jet (jet@moz-1FE7D861.hsd1.ca.comcast.net)
[03:47:47] *** Quits: marcosc (marcosc@moz-AC9DB812.dsl.telepac.pt) (Input/output error)
[04:01:04] *** Quits: fairfieldt (fairfieldt@moz-D8998E1C.xen.prgmr.com) (Ping timeout)
[04:01:08] *** Joins: marcosc (marcosc@moz-AC9DB812.dsl.telepac.pt)
[04:04:46] *** Joins: fairfieldt (fairfieldt@moz-D8998E1C.xen.prgmr.com)
[04:06:03] *** Joins: eatkinson (eatkinson@moz-E57448EF.airbears2.berkeley.edu)
[04:07:32] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[04:14:38] *** Quits: canhtak (jeremy@moz-44A7DE0.wl.t.ulaval.ca) (Quit: canhtak)
[04:27:49] *** Quits: marcosc (marcosc@moz-AC9DB812.dsl.telepac.pt) (Input/output error)
[04:32:56] *** Quits: eatkinson (eatkinson@moz-E57448EF.airbears2.berkeley.edu) (Quit: eatkinson)
[04:41:34] *** Quits: jdm (jdm@A931292E.20A5B7E6.930FA32.IP) (Ping timeout)
[04:45:09] *** Quits: dbaupp (Thunderbir@moz-54ADD9F4.lns20.syd6.internode.on.net) (Ping timeout)
[04:47:10] *** Joins: dbaupp (Thunderbir@moz-54ADD9F4.lns20.syd6.internode.on.net)
[04:52:35] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[04:56:02] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[04:56:25] *** Joins: marcosc (marcosc@moz-AC9DB812.dsl.telepac.pt)
[05:10:53] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[05:18:55] *** Quits: dbaupp (Thunderbir@moz-54ADD9F4.lns20.syd6.internode.on.net) (Ping timeout)
[05:19:35] *** Joins: dbaupp (Thunderbir@moz-54ADD9F4.lns20.syd6.internode.on.net)
[05:22:28] *** Quits: dbaupp (Thunderbir@moz-54ADD9F4.lns20.syd6.internode.on.net) (Ping timeout)
[05:26:49] *** Quits: marcosc (marcosc@moz-AC9DB812.dsl.telepac.pt) (Input/output error)
[05:27:01] *** Joins: heather_ (heather@moz-A0276582.hsd1.ca.comcast.net)
[05:27:12] *** Joins: marcosc (marcosc@moz-AC9DB812.dsl.telepac.pt)
[05:27:17] *** Joins: dbaupp (Thunderbir@moz-54ADD9F4.lns20.syd6.internode.on.net)
[05:32:09] *** Quits: jet (jet@moz-1FE7D861.hsd1.ca.comcast.net) (Quit: jet)
[05:34:26] *** kimundi is now known as zz_kimundi
[05:40:25] *** Quits: joone_ (joone@moz-C50DC051.jf.intel.com) (Ping timeout)
[05:41:42] *** Joins: joone_ (joone@moz-C50DC051.jf.intel.com)
[05:53:17] *** Quits: marcosc (marcosc@moz-AC9DB812.dsl.telepac.pt) (Input/output error)
[05:53:52] *** Joins: marcosc (marcosc@moz-AC9DB812.dsl.telepac.pt)
[05:55:56] *** zz_kimundi is now known as kimundi
[06:04:08] *** Quits: kanru (kanru@moz-99690620.hinet-ip.hinet.net) (Input/output error)
[06:06:47] *** Joins: kanru (kanru@moz-99690620.hinet-ip.hinet.net)
[06:19:56] *** Quits: marcosc (marcosc@moz-AC9DB812.dsl.telepac.pt) (Input/output error)
[06:20:36] *** Joins: marcosc (marcosc@moz-AC9DB812.dsl.telepac.pt)
[06:40:18] *** Joins: Ms2ger (Ms2ger@moz-92A79B55.adsl-dyn.isp.belgacom.be)
[06:41:49] <Ms2ger> !summon jdm
[06:46:58] *** Quits: marcosc (marcosc@moz-AC9DB812.dsl.telepac.pt) (Input/output error)
[07:12:04] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[07:17:03] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[07:17:31] *** Joins: marcosc (marcosc@moz-AC9DB812.dsl.telepac.pt)
[07:19:18] *** Quits: marcosc (marcosc@moz-AC9DB812.dsl.telepac.pt) (Ping timeout)
[07:29:57] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[07:30:44] *** Joins: annevk (annevk@7F0CC393.4F390C2A.420B7681.IP)
[07:38:57] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[07:53:52] *** Joins: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr)
[07:54:33] *** kimundi is now known as zz_kimundi
[07:56:26] *** Quits: emi (sunshine@C77F1C96.DF4D9119.23C55E28.IP) (Ping timeout)
[08:02:18] <Ms2ger> Ah, bholley 
[08:02:25] <bholley> Ms2ger: hi
[08:02:41] <Ms2ger> So what's the longish term plan for jscontexts?
[08:02:49] <Ms2ger> Pull them from TLS or something?
[08:03:36] <bholley> Ms2ger: they go away
[08:03:43] <bholley> Ms2ger: everything in them gets merged into JSRuntime
[08:03:53] <bholley> Ms2ger: the JSRuntime may or may not be pulled out of TLS
[08:03:56] <Ms2ger> So
[08:04:26] *** Joins: emi (sunshine@C77F1C96.DF4D9119.23C55E28.IP)
[08:04:27] <Ms2ger> If I call JS_NewObject, I need a JSContext right now
[08:04:57] <bholley> Ms2ger: right
[08:05:03] <Ms2ger> How do I get something to pass in?
[08:05:26] <bholley> Ms2ger: I'm not sure I follow. Are you talking about servo?
[08:05:30] <Ms2ger> Yes
[08:05:35] <Ms2ger> This is #servo, after all ;)
[08:05:40] <bholley> Ms2ger: heh
[08:05:42] *** Joins: Kostic (marko@moz-87B3A06E.mbb.telenor.rs)
[08:05:48] *** Quits: annevk (annevk@7F0CC393.4F390C2A.420B7681.IP) (Input/output error)
[08:05:52] <bholley> Ms2ger: my point is that we should make no distinction between the runtime and the cx in servo
[08:05:57] <bholley> Ms2ger: we should hold them in the same data structure
[08:06:01] <Ms2ger> Mm
[08:06:06] <bholley> Ms2ger: so that we can easily just let the JSContext die when it does
[08:06:24] <bholley> Ms2ger: if servo were on a newer version of SM, you could actually pull the JSContext off the JSRuntime if there's exactly one of them
[08:06:30] <bholley> Ms2ger: this is what we do for dom/workers now
[08:06:45] <bholley> Ms2ger: but we shouldn't be designing code that passes around JSContexts
[08:06:54] <Ms2ger> Mhmm
[08:06:59] <bholley> Ms2ger: we should encapsulate that so that stuff just continues to work when there's no more JSContext
[08:07:18] <Ms2ger> So where does Servo put its JSRuntime...
[08:07:22] <Ms2ger> MXR says nowhere
[08:08:04] <Ms2ger> Surely something somewhere must create one...
[08:08:26] * Ms2ger falls back to grep
[08:08:57] *** Quits: emi (sunshine@C77F1C96.DF4D9119.23C55E28.IP) (Ping timeout)
[08:09:57] <Ms2ger> ... Why does ./src/support/spidermonkey/mozjs/ have a copy of xpconnect?
[08:12:04] *** zz_kimundi is now known as kimundi
[08:16:11] *** Joins: DeTeam (DeTeam@3F8887A3.6883A39.F5F3AF2.IP)
[08:16:22] <Ms2ger> Ah, ScriptTask::new
[08:18:09] * Ms2ger will poke at all that later
[08:18:12] <Ms2ger> bholley, thanks
[08:18:19] <bholley> Ms2ger: thank _you_ :-)
[08:24:25] *** Quits: DeTeam (DeTeam@3F8887A3.6883A39.F5F3AF2.IP) (Quit: DeTeam)
[08:28:57] * Ms2ger heads off to class
[08:29:09] <Ms2ger> jdm: I'll poke you some more this afternoon :)
[08:29:21] *** Quits: cstipkovic (uid6805@moz-E77DEB21.irccloud.com) (Ping timeout)
[08:29:21] *** Quits: sawrubh (uid6719@moz-5F4AA75A.irccloud.com) (Ping timeout)
[08:29:44] *** Quits: vivekg (uid10501@moz-E77DEB21.irccloud.com) (Ping timeout)
[08:29:44] *** Quits: kseo_ (uid14607@moz-E77DEB21.irccloud.com) (Ping timeout)
[08:29:44] *** Quits: evilpie (uid7877@moz-E77DEB21.irccloud.com) (Ping timeout)
[08:29:44] *** Quits: silverroots (uid10556@moz-31ABA2C0.irccloud.com) (Ping timeout)
[08:29:44] *** Quits: ttaubert|sf (uid2620@moz-31ABA2C0.irccloud.com) (Ping timeout)
[08:29:44] *** Quits: wilfred (uid159@moz-5F4AA75A.irccloud.com) (Ping timeout)
[08:29:44] *** Quits: jyeo_away (uid12229@moz-E77DEB21.irccloud.com) (Ping timeout)
[08:31:05] *** Quits: Ms2ger (Ms2ger@moz-92A79B55.adsl-dyn.isp.belgacom.be) (Ping timeout)
[08:34:02] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[08:37:24] *** Joins: annevk (annevk@moz-5BFD8996.t-mobile.co.uk)
[08:38:46] *** Joins: emi (sunshine@C77F1C96.DF4D9119.23C55E28.IP)
[08:40:00] *** Joins: dissimile (dissimile@moz-141B07E7.static.as13285.net)
[08:42:18] *** Quits: dbaupp (Thunderbir@moz-54ADD9F4.lns20.syd6.internode.on.net) (Ping timeout)
[08:43:01] *** Quits: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr) (Quit: bholley)
[08:43:51] *** Quits: emi (sunshine@C77F1C96.DF4D9119.23C55E28.IP) (Ping timeout)
[08:45:18] *** Joins: jyeo_away (uid12229@moz-E77DEB21.irccloud.com)
[08:48:18] *** Joins: DeTeam (DeTeam@92C799C.31715274.F5F3AF2.IP)
[08:54:39] *** Joins: marcosc (marcosc@moz-AC9DB812.dsl.telepac.pt)
[08:56:17] *** Joins: dbaupp (Thunderbir@moz-54ADD9F4.lns20.syd6.internode.on.net)
[08:58:32] *** Joins: cstipkovic (uid6805@moz-E77DEB21.irccloud.com)
[08:59:34] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[09:00:10] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[09:01:34] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[09:03:40] *** Joins: sawrubh (uid6719@moz-5F4AA75A.irccloud.com)
[09:04:23] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[09:08:19] *** Quits: heather_ (heather@moz-A0276582.hsd1.ca.comcast.net) (Client exited)
[09:08:39] *** Joins: heather_ (heather@moz-A0276582.hsd1.ca.comcast.net)
[09:10:40] *** Quits: heather_ (heather@moz-A0276582.hsd1.ca.comcast.net) (Ping timeout)
[09:13:59] *** Joins: vivekg (uid10501@moz-E77DEB21.irccloud.com)
[09:18:56] *** Joins: silverroots (uid10556@moz-31ABA2C0.irccloud.com)
[09:20:12] *** Joins: jdm (jdm@A931292E.20A5B7E6.930FA32.IP)
[09:20:12] *** ChanServ sets mode: +o jdm
[09:20:22] *** Quits: jdm (jdm@A931292E.20A5B7E6.930FA32.IP) (Quit: Lost terminal)
[09:22:04] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[09:24:58] *** Joins: Ms2ger (Ms2ger@moz-88764C01.ugent.be)
[09:25:16] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[09:25:51] *** Joins: bholley (anonymous@moz-EB4E0A58.net-89-2-124.rev.numericable.fr)
[09:25:58] *** Quits: bholley (anonymous@moz-EB4E0A58.net-89-2-124.rev.numericable.fr) (Quit: bholley)
[09:29:13] *** Joins: evilpie (uid7877@moz-E77DEB21.irccloud.com)
[09:32:41] *** Quits: dolphinling (andrew@moz-80A1E448.uvm.edu) (Ping timeout)
[09:34:19] *** Quits: annevk (annevk@moz-5BFD8996.t-mobile.co.uk) (Ping timeout)
[09:34:44] *** kimundi is now known as zz_kimundi
[09:37:57] *** Joins: dolphinling (andrew@moz-80A1E448.uvm.edu)
[09:43:17] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[09:45:03] *** Quits: dbaupp (Thunderbir@moz-54ADD9F4.lns20.syd6.internode.on.net) (Quit: dbaupp)
[09:50:33] *** Joins: dbaupp (Thunderbir@moz-54ADD9F4.lns20.syd6.internode.on.net)
[09:51:50] <Ms2ger> Ah, jdm is awake
[09:52:07] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[10:00:33] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[10:00:49] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[10:01:24] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[10:02:44] *** Quits: Kostic (marko@moz-87B3A06E.mbb.telenor.rs) (Ping timeout)
[10:03:54] *** Joins: Kostic (marko@moz-87B3A06E.mbb.telenor.rs)
[10:05:23] *** zz_kimundi is now known as kimundi
[10:12:06] *** Joins: annevk (annevk@88F51059.F3BBB17D.144F44FA.IP)
[10:16:46] *** Quits: Ms2ger (Ms2ger@moz-88764C01.ugent.be) (Ping timeout)
[10:17:15] *** Joins: Ms2ger (Ms2ger@moz-5B56DF9C.ugent.be)
[10:18:25] *** Quits: Kostic (marko@moz-87B3A06E.mbb.telenor.rs) (Ping timeout)
[10:19:08] *** Joins: heather (heather@moz-A0276582.hsd1.ca.comcast.net)
[10:21:02] *** Quits: heather (heather@moz-A0276582.hsd1.ca.comcast.net) (Ping timeout)
[10:24:53] *** kimundi is now known as zz_kimundi
[10:29:02] *** Joins: ttaubert (uid2620@moz-31ABA2C0.irccloud.com)
[10:29:28] *** Quits: Ms2ger (Ms2ger@moz-5B56DF9C.ugent.be) (Ping timeout)
[10:30:18] *** Joins: wilfred (uid159@moz-5F4AA75A.irccloud.com)
[10:30:18] *** Joins: kseo_ (uid14607@moz-E77DEB21.irccloud.com)
[10:32:12] *** Joins: canhtak (jeremy@moz-44A7DE0.wl.t.ulaval.ca)
[10:42:20] *** Quits: canhtak (jeremy@moz-44A7DE0.wl.t.ulaval.ca) (Quit: canhtak)
[10:44:43] *** Quits: DeTeam (DeTeam@92C799C.31715274.F5F3AF2.IP) (Quit: DeTeam)
[10:48:21] *** Quits: dissimile (dissimile@moz-141B07E7.static.as13285.net) (Ping timeout)
[10:53:37] *** Joins: jdm (jdm@88F51059.F3BBB17D.144F44FA.IP)
[10:53:38] *** ChanServ sets mode: +o jdm
[10:56:39] *** Joins: DeTeam (DeTeam@92C799C.31715274.F5F3AF2.IP)
[10:59:15] *** Joins: dissimile (dissimile@moz-F3007ED4.static.as13285.net)
[11:06:50] *** Joins: mihneadb (mihneadb@moz-C5B7A4E3.residential.rdsnet.ro)
[11:08:43] *** Quits: dissimile (dissimile@moz-F3007ED4.static.as13285.net) (Quit: Either I put my laptop to sleep or my battery died)
[11:14:53] *** Joins: dissimile (dissimile@moz-F3007ED4.static.as13285.net)
[11:21:40] *** Joins: bholley (anonymous@moz-104CC309.mv.mozilla.com)
[11:24:44] *** Quits: marcosc (marcosc@moz-AC9DB812.dsl.telepac.pt) (Input/output error)
[11:25:19] *** Quits: dissimile (dissimile@moz-F3007ED4.static.as13285.net) (Quit: Either I put my laptop to sleep or my battery died)
[11:27:42] *** zz_kimundi is now known as kimundi
[11:29:01] *** Quits: bholley (anonymous@moz-104CC309.mv.mozilla.com) (Ping timeout)
[11:29:45] *** Joins: dissimile (dissimile@moz-F3007ED4.static.as13285.net)
[11:39:51] *** Quits: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP) (Ping timeout)
[11:45:30] *** Joins: emi (sunshine@C77F1C96.DF4D9119.23C55E28.IP)
[11:45:54] *** Joins: Ms2ger (Ms2ger@moz-92A79B55.adsl-dyn.isp.belgacom.be)
[11:47:30] *** Quits: emi (sunshine@C77F1C96.DF4D9119.23C55E28.IP) (Ping timeout)
[11:51:20] *** kimundi is now known as zz_kimundi
[11:53:44] *** Joins: canhtak (jeremy@moz-C1CE4BB.wl.t.ulaval.ca)
[11:56:22] * Ms2ger looks more at jdm's code
[12:00:26] *** zz_kimundi is now known as kimundi
[12:04:07] *** Joins: Jayflux (Jason@moz-A39CDFB6.as13285.net)
[12:12:06] *** Quits: deokjinkim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:18:50] *** Joins: marcosc (marcosc@moz-AC9DB812.dsl.telepac.pt)
[12:20:37] *** Quits: marcosc (marcosc@moz-AC9DB812.dsl.telepac.pt) (Ping timeout)
[12:31:56] *** bhearsum|afk is now known as bhearsum
[12:35:35] *** Joins: marcosc (marcosc@moz-AC9DB812.dsl.telepac.pt)
[12:35:57] <Ms2ger> jdm, okay, I think that should be most of them :)
[12:40:02] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[12:42:03] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Client exited)
[12:46:06] *** Joins: tgummerer (tgummerer@moz-3BE96E52.kthopen.kth.se)
[12:47:21] <jdm> Ms2ger: thanks a lot
[12:48:01] <SimonSapin> jdm: (re 2:15am) yes, itâ€™s great to have you here :)
[12:53:41] *** Quits: dissimile (dissimile@moz-F3007ED4.static.as13285.net) (Ping timeout)
[12:53:52] <jdm> Ms2ger: I thought that listeners added for the current phase were not meant to be called
[12:54:00] <jdm> re: your outer/middle/inner example
[12:54:18] *** Joins: Kostic (marko@C4D4CB5C.58A2DD99.2168A69F.IP)
[12:54:29] <jdm> https://developer.mozilla.org/en-US/docs/Web/API/EventTarget.addEventListener#Adding_a_listener_during_event_dispatch
[12:54:36] *** Quits: mihneadb (mihneadb@moz-C5B7A4E3.residential.rdsnet.ro) (Input/output error)
[12:55:05] *** Joins: mihneadb (mihneadb@moz-C5B7A4E3.residential.rdsnet.ro)
[12:55:31] *** Quits: Kostic (marko@C4D4CB5C.58A2DD99.2168A69F.IP) (Quit: Kostic)
[12:55:40] *** Joins: Kostic (marko@C4D4CB5C.58A2DD99.2168A69F.IP)
[12:56:54] *** Quits: mihneadb (mihneadb@moz-C5B7A4E3.residential.rdsnet.ro) (Ping timeout)
[12:58:22] <jdm> oh, maybe it's only referring to the current event target, rather than any event target on the chain
[13:00:31] <jgraham> Don't use developer.mozilla.org as a spec :)
[13:01:56] <Ms2ger> jdm, and/or test ;)
[13:02:20] <jdm> pfft testing
[13:02:25] <jdm> ain't nobody got time for that
[13:03:23] <Ms2ger> But yes, following the spec is good ;)
[13:04:20] *** Joins: dissimile (dissimile@moz-141B07E7.static.as13285.net)
[13:05:43] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[13:16:08] *** Joins: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr)
[13:17:53] <Ms2ger> jdm, are you around?
[13:17:58] <jdm> Ms2ger: yep
[13:19:06] <Ms2ger> Feel like explaining what DerivedWrapper/Reflectable/BindingObject are for? :)
[13:19:23] <jdm> yes
[13:19:50] <jdm> Reflectable is one of two traits that all DOM objects with reflectors need to implement
[13:20:27] <jdm> it allows us to write generic bindings utility code that operates on that trait without requiring virtual dispatch
[13:20:53] <jdm> and in the case of WrapNewBindingObject, we do actually use virtual dispatch for it
[13:21:09] <jdm> I wonder if that's actually necessary
[13:22:00] <Ms2ger> WrapNewBindingObject is such a nice name if you don't have old bindings :)
[13:22:37] *** Joins: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP)
[13:22:37] <ghservo> [13servo] 15jdm opened issue #1083: Try making WrapNewBindingObject abort if no reflector is available  02http://git.io/dfEJbA
[13:22:37] *** Parts: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP) ()
[13:23:19] <jdm> similarly WrapNativeParent allows us to work on any binding object via Reflectable
[13:23:35] <jdm> since we don't have stuff like nsISupports
[13:23:42] <Ms2ger> Right
[13:24:03] <jdm> BindingObject could likely be merged with Reflectable, since they seem to be 1:1 in practice
[13:24:20] <jdm> but that gives us the same GetParentObject for JS scopes that Gecko has
[13:24:27] <Ms2ger> Mhmm
[13:24:30] <bholley> jdm ": it allows us to write generic bindings utility code that operates on that trait without requiring virtual dispatch"
[13:24:33] <bholley> explain that?
[13:25:08] <jdm> bholley: this is a function operating on any generic type: fn foo<T>(something: &T) { ... } 
[13:25:22] <Ms2ger> <T: Reflectable>, that is
[13:25:32] <jdm> Ms2ger: no, I mean what I said
[13:25:43] <Ms2ger> Oh?
[13:26:08] <jdm> bholley: this is a function operating on a particular trait object, incurring virtual dispatch for method calls: fn foo(something: &Reflectable) { .. }
[13:26:43] <jdm> bholley: this is a statically-bounded generic function that guarantees certain traits are present, therefore we can perform static method dispatch: fn foo<T: Reflectable>(something: &T) { ... }
[13:27:56] <jdm> Ms2ger: DerivedWrapper is a terrible name for certain types (basically the Abstract ones) that require a common wrap method that operates on by-value self, rather than @mut self
[13:28:08] <bholley> jdm: I see. So if the type you're operating on is a trait, then you get one function that operates on some certain offset in a vtable, but you need to pointer chase to get the address of the function before calling it 
[13:28:22] <bholley> jdm: whereas if you write a generic function that requires a trait, you can operate directly
[13:28:26] <jdm> exactly
[13:28:46] <Ms2ger> jdm, now you lost me (about DerivedWrapper)
[13:30:09] <SimonSapin> libscript ported \o/
[13:30:17] <jdm> Ms2ger: we have codegen bits that have access to concrete rust objects and need to invoke our wrapping code
[13:30:26] <jdm> Ms2ger: for many types, that's @mut Whatever
[13:30:37] <jdm> Ms2ger: for some, we have bare AbstractWhatever
[13:30:45] <bholley> jdm: so, in Rust as it stands - operating on a Trait type gives you virtual dispatch, and operating on a struct type gives you concrete dispatch?
[13:31:12] <jdm> Ms2ger: those are two different self values, and we don't have overloading, so we call bare_whatever.wrap for the latter, and WrapNewBindingObject for the former
[13:31:33] <jdm> bholley: yes
[13:33:12] <Ms2ger> So there's wrap_shared
[13:33:35] <Ms2ger> Which doesn't seem to be called?
[13:33:44] <jdm> it's called by WrapNewBindingObject, I think
[13:33:47] <SimonSapin> now porting layout code, thatâ€™s where the fun beginsâ€¦
[13:33:53] <jdm> Ms2ger: oh, in DerivedWrapper you mean?
[13:33:55] <Ms2ger> Yes
[13:34:20] <jdm> yeah, I'm pretty sure I remove that in my inlinejs branch
[13:34:35] <jdm> there's a lot of dead weight in that stuff; it's some of the first bindings code I ever wrote
[13:34:49] <jdm> oh, yuck
[13:34:59] <jdm> wrap_shared is actually implemented for the event types right now
[13:35:07] <jdm> I don't even remember why
[13:35:20] <Ms2ger> Also ClientRect and DOMParser
[13:35:58] <SimonSapin> who is familiar with the code in the main crate?
[13:36:03] <jdm> it would be interesting to comment out those implementations and see what breaks
[13:36:21] <Ms2ger> I hope nothing, if it isn't called :)
[13:37:07] <jdm> yeah, it's quite possible that more recent codegen changes have removed the necessity for those implementations
[13:37:12] <jdm> since they just delegate to wrap_object_shared
[13:37:57] <jdm> wow, you're right
[13:37:59] <jdm> there are no callers
[13:38:02] <jdm> kill it with fire, quick!
[13:38:07] <Ms2ger> At times I'm right ;)
[13:38:54] <jdm> oh, hey
[13:39:03] <jdm> we don't even reference the DerivedWrapper trait anywhere
[13:39:23] <SimonSapin> jack: does your rust upgrade include the new visibility rules?
[13:39:26] <jdm> so theoretically we could just move it to the actual struct impl
[13:39:41] <jdm> on the other hand, it would be nice to keep bindings-related code in dom/bindings, and that would need a trait
[13:41:02] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[13:41:02] <ghservo> [13servo] 15jdm opened issue #1084: Remove wrap_shared from DerivedWrapper and delete all implementations for types that are not named Abstract  02http://git.io/rSaLGw
[13:41:02] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[13:42:35] <Ms2ger> rust-cssparser/ast.rs:5:4: 5:19 warning: unused import [-W unused-imports (default)]: use std::str::ToStr;
[13:42:38] <Ms2ger> SimonSapin, is that you? :)
[13:43:20] <SimonSapin> Ms2ger: probably, though I think it used to be needed there
[13:45:11] * Ms2ger builds the wrap_shared removal
[13:45:39] <Ms2ger> jdm, now, about eager wrapping... Did you have a design for that yet? :)
[13:45:56] <jdm> Ms2ger: a design to make it happen consistently, you mean?
[13:46:45] <Ms2ger> Is anything doing it already? *looks*
[13:47:16] <jdm> Ms2ger: yes, many things are
[13:47:16] <Ms2ger> HTMLCollection, apparently
[13:47:19] <jdm> but many also don't
[13:47:25] <Ms2ger> Right :)
[13:48:11] *** Joins: emi (sunshine@C77F1C96.DF4D9119.23C55E28.IP)
[13:48:24] <Ms2ger> The annoying part seems to be inheritance
[13:48:27] <jdm> Ms2ger: #1083 will get us dynamic checking for types used by JS (abort on lazy reflecting)
[13:48:32] <jdm> and yeah, the inheritance is the problem
[13:49:28] <jdm> we could have two methods for creating new types: new_inherited and new, the latter would always return an instance with a reflector
[13:49:37] <jdm> but that doesn't actually enforce anything
[13:50:00] *** Quits: emi (sunshine@C77F1C96.DF4D9119.23C55E28.IP) (Ping timeout)
[13:51:08] <Ms2ger> Yeah, enforcing is hard
[13:51:11] <jdm> so, here's an idea
[13:51:49] <jdm> all creator methods return bare types (like HTMLDocument)
[13:52:14] <Ms2ger> That's new_inherited, then?
[13:52:31] <jdm> and we have a init_new_dom_object function that takes type T and returns @mut T, with T implementing a trait containing an init_reflector method
[13:53:05] <jdm> still doesn't stop people from calling @mut Whatever::new(), but easier to spot in a review if there's a missing init_new_dom_object
[13:53:20] <jdm> it also doesn't work for types like AbstractDocument
[13:54:36] <Ms2ger> Hmm
[13:54:52] <Ms2ger> Would be nicer if Foo::new() could just work, though
[13:55:00] <jdm> it might be that new and new_inherited are the best choice
[13:55:12] <jdm> new will always return a concrete type with an initialized reflector
[13:56:15] <jdm> the new_inherited method will return a bare type as well, which should help prevent misuse
[13:56:17] *** Quits: annevk (annevk@88F51059.F3BBB17D.144F44FA.IP) (Input/output error)
[13:56:26] <jdm> maybe even new_unreflected
[13:56:53] *** Joins: annevk (annevk@88F51059.F3BBB17D.144F44FA.IP)
[13:56:57] *** Joins: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP)
[13:56:57] <ghservo> [13servo] 15Ms2ger opened pull request #1085: Remove DerivedWrapper::wrap_shared, as it's unused. (06master...06wrap_shared)  02http://git.io/BLYEIw
[13:56:57] *** Parts: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP) ()
[13:58:27] <Ms2ger> jdm, so once we do that, I think we can drop GetParentObject and wrap_object_shared
[13:58:49] <jdm> Ms2ger: how?
[13:59:01] *** kimundi is now known as zz_kimundi
[13:59:19] <Ms2ger> Because you only need those when creating the wrapper
[13:59:33] <jdm> that's true
[13:59:48] <jdm> on the other hand, it's a good sign that you're missing something when you create a new dom object
[14:00:02] <Ms2ger> Mm
[14:00:48] <jdm> so if we rename wrap_object_shared to init_reflector, and move GetParentObject into Reflectable, that would be an improvement I expect
[14:01:40] * jdm tries to remember what wrap_object_shared usually does
[14:01:58] <jdm> ah yes, NameBinding::Wrap
[14:02:14] <jdm> it would be lovely to generate that automatically
[14:02:25] <jdm> since I think that's the same pattern everywhere
[14:02:36] <Ms2ger> That would be interesting
[14:02:45] * Ms2ger thinks
[14:06:02] <Ms2ger> Yes, that would probably work
[14:07:14] *** zz_kimundi is now known as kimundi
[14:08:32] <jdm> so every time we generate something, we still need to call the generated code from somewhere
[14:08:53] <jdm> and without something like init_new_dom_object, that doesn't really buy us much
[14:09:44] <jdm> except that we could have an EagerReflector trait that the generated code implements, so the dom client code could just import EagerReflector and call .init
[14:10:09] <jdm> that would actually be rather nice
[14:12:30] <jdm> so
[14:12:41] <jdm> there are phantom types
[14:13:05] <jdm> DOMParser<Reflected>
[14:13:11] <jdm> DOMParser<Unreflected>
[14:13:56] <jdm> it could be painful to use though :/
[14:14:20] <Ms2ger> How does that look for Node? :)
[14:14:23] <jdm> maybe we could typedef the expected names to Type<Reflected> in the generated code
[14:14:46] <jdm> probably Node<ScriptView, Reflected> or something awful like that
[14:14:52] <Ms2ger> And updated https://github.com/mozilla/servo/pull/1085
[14:15:11] <jdm> beautiful
[14:16:18] *** Joins: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP)
[14:16:47] <SimonSapin> opinions on the license to use for a new library that IÂ want to use in Servo and may end up in libextra?
[14:17:25] <jdm> SimonSapin: probably whatever the rust license is? I presume we're able to integrate that with our MPL code
[14:17:27] <Ms2ger> IANAL, but if it's not mit/apache then it probably won't end up in libextra
[14:19:00] * Ms2ger kills BindingObject
[14:19:11] *** Joins: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP)
[14:19:11] <ghservo> 01[13servo01] 15bors-servo pushed 0 new commits to 06auto: 02http://git.io/ukCfog
[14:19:11] *** Parts: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP) ()
[14:19:15] *** Joins: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP)
[14:19:16] <ghservo> 01[13servo01] 15bors-servo pushed 3 new commits to 06auto: 02http://git.io/f8EyUQ
[14:19:16] <ghservo> 13servo/06auto 143da1a20 15Ms2ger: Remove DerivedWrapper::wrap_shared, as it's unused.
[14:19:16] <ghservo> 13servo/06auto 14f585d21 15Ms2ger: Remove unused DerivedWrapper implementations.
[14:19:16] <ghservo> 13servo/06auto 1419c1b02 15bors-servo: auto merge of #1085 : Ms2ger/servo/wrap_shared, r=jdm
[14:19:18] *** Parts: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP) ()
[14:19:30] <jdm> so the phantom type would allow us to ensure that init_new_dom_object is always called
[14:19:44] <jdm> since nobody would be able to create instances of Type<Reflected> without calling that
[14:19:54] *** Joins: emi (sunshine@C77F1C96.DF4D9119.23C55E28.IP)
[14:20:00] <Ms2ger> Hmm
[14:20:16] <Ms2ger> Or have Unreflected<T>?
[14:21:15] <jdm> I don't see how that could be enforced
[14:21:50] <jdm> actually, both ideas have the problem
[14:22:13] <Ms2ger> Hey, I come from C++, we can't enforce anything ;)
[14:22:18] *** Quits: emi (sunshine@C77F1C96.DF4D9119.23C55E28.IP) (Ping timeout)
[14:22:20] <jdm> since DOMParser::new would need to be written to return DOMParser<Unreflected> :/
[14:22:41] <Ms2ger> No, DOMParser::new_inherited
[14:23:22] <jdm> yeah, I'm not sure we can enforce phantom types on a non-finite set of unrelated types
[14:23:36] <jdm> the node phantom type works because it's only scoped to Node
[14:23:57] <jdm> the Unreflected<T> might actually make more sense
[14:27:59] *** Joins: ahal (ahal@FCCEA34F.7672369.D8E68FF6.IP)
[14:28:07] <jack> SimonSapin: yes
[14:28:20] <SimonSapin> cool
[14:29:37] <jdm> enum UnreflectedObject<T> { Shared(@mut T); Abstract(T) }; struct Unreflected<T> { unreflected: UnreflectedObject<T> }; impl Unreflected<T: EagerReflector+Reflectable> { fn usable(&mut self) -> T { match self.unreflected { Shared(val) => { val.init_shared_reflector(); val }, Abstract(val) => { val.init_reflector(); val } } } }
[14:29:44] <jdm> I'm not sure if that will work
[14:29:49] <jdm> generic types always byte me
[14:33:32] * Ms2ger indents that first
[14:34:15] <jdm> for one thing the return type of usable is incorrect
[14:34:20] <jdm> since it could be returning @mut T or T
[14:34:27] * jdm hates the split
[14:34:39] <jdm> this is why I had the whole wrap_shared/wrap division originally
[14:34:47] <jdm> and half the things have stubs for one, half for the other
[14:43:03] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[14:43:03] <ghservo> 01[13servo01] 15bors-servo merged 06auto into 06master: 02http://git.io/f8EyUQ
[14:43:03] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[14:43:04] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[14:43:04] <ghservo> [13servo] 15bors-servo closed pull request #1085: Remove DerivedWrapper::wrap_shared, as it's unused. (06master...06wrap_shared)  02http://git.io/BLYEIw
[14:43:04] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[14:43:37] <Ms2ger> Looks like there's a few missing GetParentObjects...
[14:45:03] <jdm> ah, so not quite 1:1
[14:45:11] <jdm> probably not terrible to require it, though
[14:48:35] <Ms2ger> AbstractNode, Element and CharacterData
[14:48:37] *** Joins: Jackneill (Jackneill@moz-C8FD023D.pool.digikabel.hu)
[14:51:43] *** Joins: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP)
[14:51:44] <ghservo> [13servo] 15jdm closed issue #1084: Remove wrap_shared from DerivedWrapper and delete all implementations for types that are not named Abstract  02http://git.io/rSaLGw
[14:51:44] *** Parts: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP) ()
[14:52:33] *** Quits: dissimile (dissimile@moz-141B07E7.static.as13285.net) (Ping timeout)
[14:56:43] <Ms2ger> Chocolate and code removal
[14:56:45] * Ms2ger is happy
[14:56:51] <jdm> heh
[14:59:03] *** Quits: canhtak (jeremy@moz-C1CE4BB.wl.t.ulaval.ca) (Quit: canhtak)
[15:00:41] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[15:01:40] * jdm breaks out the code above into a simple prototype for experimentation
[15:02:27] <Ms2ger>  23 files changed, 62 insertions(+), 200 deletions(-)
[15:02:44] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[15:02:45] <ghservo> [13servo] 15Ms2ger opened pull request #1086: Merge BindingObject and Reflectable. (06master...06GetParentObject)  02http://git.io/1Bh_5Q
[15:02:45] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[15:02:45] <Ms2ger> r? :)
[15:10:22] *** Joins: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net)
[15:11:07] <jdm> excellent
[15:11:14] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Client exited)
[15:12:04] *** Quits: DeTeam (DeTeam@92C799C.31715274.F5F3AF2.IP) (Quit: DeTeam)
[15:13:05] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[15:13:05] <ghservo> 01[13servo01] 15bors-servo pushed 0 new commits to 06auto: 02http://git.io/i8NqHg
[15:13:05] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[15:13:09] *** Joins: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP)
[15:13:09] <ghservo> 01[13servo01] 15bors-servo pushed 2 new commits to 06auto: 02http://git.io/Yi_g2g
[15:13:09] <ghservo> 13servo/06auto 14321e037 15Ms2ger: Merge BindingObject and Reflectable.
[15:13:09] <ghservo> 13servo/06auto 14284ad5e 15bors-servo: auto merge of #1086 : Ms2ger/servo/GetParentObject, r=jdm
[15:13:09] *** Parts: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP) ()
[15:16:07] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[15:26:59] *** Joins: sanxiyn (tinuviel@B4104EBB.3CC170B1.1E14B209.IP)
[15:32:56] *** Quits: tgummerer (tgummerer@moz-3BE96E52.kthopen.kth.se) (Ping timeout)
[15:34:21] *** Joins: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP)
[15:34:21] <ghservo> 01[13servo01] 15bors-servo merged 06auto into 06master: 02http://git.io/Yi_g2g
[15:34:21] *** Parts: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP) ()
[15:34:22] *** Joins: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP)
[15:34:22] <ghservo> [13servo] 15bors-servo closed pull request #1086: Merge BindingObject and Reflectable. (06master...06GetParentObject)  02http://git.io/1Bh_5Q
[15:34:22] *** Parts: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP) ()
[15:35:57] <jdm> SimonSapin: did you have any particular questoins about the code in the main crate?
[15:36:02] * jdm just glanced at the backlog
[15:37:24] <SimonSapin> jdm: nothing specific yet, but unlike libgfx or libscript Iâ€™ll need to understand what this code is doing to start porting
[15:37:39] <SimonSapin> so Iâ€™m procrastinating by writing an URL parser
[15:37:44] <jdm> haha
[15:37:45] <sanxiyn> SimonSapin: Hi
[15:38:02] <SimonSapin> well, Iâ€™m still writing the parser for URL tests
[15:38:04] <SimonSapin> Hi sanxiyn 
[15:38:23] <sanxiyn> I answered at #1081
[15:38:33] <sanxiyn> That currently our branch does not do CSS parsing in task at all
[15:38:49] <sanxiyn> ~str is sent between tasks instead
[15:38:57] <SimonSapin> I see, thanks
[15:39:07] <sanxiyn> I guess ILyoan was a bit unclear...
[15:39:36] <SimonSapin> I ended up removing @ pointers https://github.com/SimonSapin/servo/commit/2ac91a0f93a6fd56df299117fef2e6bcf48d15b8
[15:39:47] <sanxiyn> Are you okay with that?
[15:40:03] <jgraham> SimonSapin: You are welcome to the URL parser bits I wrote if you like. It doesn't actually do anything and the code is a mess and I don't *really* know what I'm doing, so I don't exactly recommend it, but the offer is there :)
[15:40:05] *** Quits: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[15:40:41] <sanxiyn> I am about 50% done rebasing our local branch
[15:40:47] <SimonSapin> sanxiyn: there is a bit more copying than I feel is necessary, but only when adding a stylesheet to a Stylist object, not when matching
[15:40:53] *** Joins: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP)
[15:40:57] <sanxiyn> SimonSapin: ok
[15:41:01] <SimonSapin> sanxiyn: matching still works on @pointers
[15:41:33] <SimonSapin> CSS parsing in a task is probably worth this
[15:41:38] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[15:41:46] <SimonSapin> jgraham: oh, I had forgotten about that. Is it online?
[15:43:27] <sanxiyn> SimonSapin: How should currentColor be implemented?
[15:44:04] <sanxiyn> (Our branch ignores (computes to transparent) it at the moment)
[15:44:11] <SimonSapin> sanxiyn: let me checkâ€¦
[15:44:14] <sanxiyn> I tried to implement it but am stuck
[15:44:33] <jgraham> SimonSapin: It's on my computer. I'm pretty sure we can rig up a way to transfer it 1 metre. Possibly by using a server thousands of km away.
[15:44:34] <SimonSapin> sanxiyn: I put it in because it seemed easy, but itâ€™s fine to skip it for now
[15:45:04] <SimonSapin> jgraham: Iâ€™m sure a server thousands of km away will be easier :)
[15:45:09] <jack> ahaha. it never ends. to get my new path to std::str i pulled in size_of going away.
[15:45:12] <jack> *sigh*
[15:45:20] <sanxiyn> SimonSapin: Namely
[15:45:32] <sanxiyn> // This assumes that the computed and specified values have the same Rust type.
[15:45:36] <sanxiyn> macro_rules! get_specified(
[15:45:37] <sanxiyn> ...
[15:45:44] <Ms2ger> jdm, so any luck with the experiment? :)
[15:45:52] <jdm> not yet :/
[15:45:58] <sanxiyn> So changing computed::CSSColor to RGBA didn't work
[15:46:01] <jdm> I was hoping by-value self would magically work
[15:46:06] <sanxiyn> SimonSapin: Does that make sense
[15:46:45] <jdm> jack: that yack will regret ever asking for a little off the top
[15:46:48] <jdm> *yak
[15:46:54] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Ping timeout)
[15:48:03] <sanxiyn> In other words
[15:48:11] <sanxiyn> get_initial_values() return ComputedValues
[15:48:18] <sanxiyn> currentColor is an initial value
[15:48:35] <sanxiyn> So currentColor appears in ComputedValues, which is not what one wants
[15:49:00] <sanxiyn> What should get_initial_values() return instead?
[15:49:54] <SimonSapin> sanxiyn: ok, I remember
[15:50:36] <SimonSapin> The css3-color spec has an errata that makes currentColor resolved at "used value time" rather than "computed value time": http://www.w3.org/Style/2011/REC-css3-color-20110607-errata.html
[15:50:47] <SimonSapin> in other words, the computed value can indeed be current color
[15:51:28] <SimonSapin> which means that in layout/gfx code, every time you access a color from computed value, you have to check for currentColor and replace as appropriate
[15:51:49] <SimonSapin> I can write a helper method on ComputedValues doing that
[15:52:22] <Ms2ger> jack, size_of is going away?
[15:52:32] <Ms2ger> SimonSapin, yay, dated specs
[15:52:44] <SimonSapin> Ms2ger: yeah :/
[15:52:45] <jdm> it is never necessary to determine the size of types in rust
[15:52:48] <jdm> it is the future
[15:52:56] <Ms2ger> Aha
[15:53:34] <jgraham> The future is here, it's just not evenly distributed?
[15:53:44] <Ms2ger> jack, you just wait until fmt!() dies
[15:53:48] *** Joins: mccr8 (mccr8@moz-BBE3ABD.mv.mozilla.com)
[15:54:53] *** kimundi is now known as zz_kimundi
[15:55:36] <SimonSapin> sanxiyn: â€¦ except for the 'color' property itself, where 'c
[15:55:56] <SimonSapin> sanxiyn: â€¦ except for the 'color' property itself, where 'currentColor' means 'inherit' and never appears in the computed value
[15:56:19] <sanxiyn> ok
[15:57:03] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[15:57:53] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:58:10] *** Joins: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP)
[15:58:11] <ghservo> 01[13rust-opengles01] 15metajack pushed 1 new commit to 06master: 02http://git.io/atMY1g
[15:58:11] <ghservo> 13rust-opengles/06master 1471dcba6 15Jack Moffitt: Use size_of from its new location.
[15:58:11] *** Parts: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP) ()
[15:58:41] *** Joins: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP)
[15:58:42] <ghservo> 01[13rust-netsurfcss01] 15metajack pushed 1 new commit to 06master: 02http://git.io/_JA7Tg
[15:58:42] <ghservo> 13rust-netsurfcss/06master 14d94c0ab 15Jack Moffitt: Use size_of from its new location.
[15:58:42] *** Parts: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP) ()
[15:58:58] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[15:58:58] <ghservo> 01[13rust-layers01] 15metajack pushed 1 new commit to 06master: 02http://git.io/nNZEbw
[15:58:58] <ghservo> 13rust-layers/06master 14716c332 15Jack Moffitt: Warning police.
[15:58:58] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[16:00:17] *** Joins: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP)
[16:00:17] <ghservo> [13rust-cssparser] 15metajack opened pull request #21: Upgrade to latest Rust. (06master...06uprust-tests)  02http://git.io/-ejBIg
[16:00:17] *** Parts: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP) ()
[16:00:27] <jack> SimonSapin: r? ^
[16:02:38] <SimonSapin> No pushing with immutable Path? Thatâ€™s sad.
[16:03:05] <jack> SimonSapin: agreed.
[16:03:17] <jack> I was goign to ask on the list about that. seems a shame to be mut by default.
[16:03:55] <SimonSapin> pushing to ~[T] is probably cheaper than copying, but meh
[16:04:11] *** Joins: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP)
[16:04:11] <ghservo> 01[13rust-cssparser01] 15SimonSapin pushed 2 new commits to 06master: 02http://git.io/spwn0w
[16:04:11] <ghservo> 13rust-cssparser/06master 14153b10d 15Jack Moffitt: Upgrade to latest Rust.
[16:04:11] <ghservo> 13rust-cssparser/06master 14db68666 15Simon Sapin: Merge pull request #21 from metajack/uprust-tests...
[16:04:12] *** Parts: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP) ()
[16:07:18] *** Quits: doomlord_ (servitor@moz-6732E9D4.range86-184.btcentralplus.com) (Connection reset by peer)
[16:07:37] <sanxiyn> SimonSapin: So... how does API look like for currentColor? Let's say (from box.rs)
[16:07:42] <sanxiyn> let style = element.style();
[16:08:01] <sanxiyn> let top_color = style.Border.border_top_color; // To fix this
[16:08:22] *** Quits: ahal (ahal@FCCEA34F.7672369.D8E68FF6.IP) (Ping timeout)
[16:08:35] <SimonSapin> sanxiyn: https://github.com/SimonSapin/servo/commit/9c9131ecb3654d0477187d92398d5ea8f16d52e4 (in my newnewcss branch)
[16:09:05] <SimonSapin> let top_color = style.resolve_color(style.Border.border_top_color);
[16:09:13] <sanxiyn> That looks nice. Thanks.
[16:10:02] <SimonSapin> this could be made less verbose with a macro, but I donâ€™t think we can export those between crates yet.
[16:10:17] *** Joins: doomlord_ (servitor@moz-6732E9D4.range86-184.btcentralplus.com)
[16:10:54] <jack> ms2ger: don't joke abou tthat. when i was bissecting for that compiler bug i had to go back and forth over some path that made debug!(one_arg) not work. i ended up just commenting out all the debugging in servo.
[16:10:59] <SimonSapin> sanxiyn: sorry this code is not documented :)
[16:11:33] <sanxiyn> SimonSapin: It was quite easy to read though
[16:11:39] <sanxiyn> For example, compared to NetSurf libcss...
[16:11:53] <SimonSapin> well :)
[16:12:25] <SimonSapin> It helps that this is the second time Iâ€™m implementing CSS :) http://weasyprint.org/
[16:12:53] <sanxiyn> SimonSapin: Yeah great code
[16:13:05] <sanxiyn> I actually read through it while trying to understand Servo's layout code
[16:13:12] <sanxiyn> Since I am much better at Python...
[16:13:26] <SimonSapin> interesting
[16:14:25] <sanxiyn> SimonSapin: Acutually, I tried to read through
[16:14:27] <sanxiyn> https://github.com/flyingsaucerproject/flyingsaucer
[16:14:34] <sanxiyn> (CSS implementation written in Java)
[16:14:39] <sanxiyn> and gave up
[16:14:53] <SimonSapin> I havenâ€™t tried that
[16:15:04] <Ms2ger> jack, ouch
[16:17:55] <sanxiyn> SimonSapin: This week we got rule hash implemented and working with newnewcss
[16:18:22] <sanxiyn> Speedup as expected
[16:18:34] <SimonSapin> cool
[16:21:11] <sanxiyn> Also, started to work on pseudo element (:before and :after)
[16:21:23] <Ms2ger> ::before and ::after ;)
[16:21:58] <SimonSapin> sanxiyn: is the current style system API enough for that?
[16:22:12] <sanxiyn> SimonSapin: We don't know yet
[16:22:35] <sanxiyn> Ms2ger: What's the difference?
[16:22:56] <Ms2ger> :: is the syntax for pseudo-elements, : for pseudo-classes
[16:23:17] <Ms2ger> But :before/:after existed before that distinction was made
[16:24:43] *** Quits: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr) (Quit: bholley)
[16:29:42] *** Joins: ahal (ahal@FCCEA34F.7672369.D8E68FF6.IP)
[16:29:53] *** Joins: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP)
[16:29:53] <ghservo> [13servo] 15SimonSapin opened pull request #1087: More style system (06master...06newnewcss)  02http://git.io/r5JBmg
[16:29:53] *** Parts: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP) ()
[16:32:59] *** Joins: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP)
[16:32:59] <ghservo> [13servo] 15SimonSapin closed issue #1057: TODOs for the new style system  02http://git.io/sCnbHA
[16:32:59] *** Parts: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP) ()
[16:33:22] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Client exited)
[16:37:34] *** joduinn-afk is now known as joduinn
[16:38:50] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[16:38:50] <ghservo> [13servo] 15SimonSapin closed issue #1006: Using the new style system  02http://git.io/YmflLA
[16:38:50] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[16:40:10] <SimonSapin> kmc: r? https://github.com/mozilla/servo/pull/1087
[16:43:35] <sanxiyn> SimonSapin: Since Stylist still uses @, we'd use Arc for CSS matching in task?
[16:43:42] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[16:43:43] <ghservo> [13servo] 15metajack opened issue #1088: make check-rust-http always rebuilds the test  02http://git.io/qQ0RZw
[16:43:43] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[16:43:55] <sanxiyn> (We use unsafe here at the moment...)
[16:45:27] <SimonSapin> sanxiyn: I donâ€™t know, maybe this will need to change as well
[16:45:37] *** Joins: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP)
[16:46:16] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[16:46:16] <ghservo> 01[13rust-png01] 15metajack pushed 1 new commit to 06master: 02http://git.io/1msooQ
[16:46:16] <ghservo> 13rust-png/06master 14a06ce5a 15Jack Moffitt: Update for new Path API.
[16:46:16] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[16:46:20] <sanxiyn> SimonSapin: In this case I don't think even changing Stylist to ~ would help
[16:46:29] <sanxiyn> Since multiple tasks would want to share it
[16:47:06] <SimonSapin> maybe changing to Arc
[16:47:14] *** Quits: annevk (annevk@88F51059.F3BBB17D.144F44FA.IP) (Input/output error)
[16:47:20] <SimonSapin> Arc supports concurrent readers, right?
[16:47:23] <sanxiyn> yes
[16:47:26] <sanxiyn> Will try Arc here
[16:47:52] *** Joins: emi (sunshine@C77F1C96.DF4D9119.23C55E28.IP)
[16:48:07] <sanxiyn> SimonSapin: Matching needs only read, no write, right?
[16:48:38] <SimonSapin> sanxiyn: in theory yes
[16:48:54] <sanxiyn> in practice?
[16:48:58] <SimonSapin> some gecko optimization write flags on elements
[16:50:08] <sanxiyn> SimonSapin: But not to Stylist?
[16:51:47] <SimonSapin> (flags like "this element has matching ":hover" selectors)
[16:52:01] <sanxiyn> Does that write to selection context?
[16:52:23] <Ms2ger> No, to the node
[16:52:24] <SimonSapin> there is also a bloom filter for optimizing descendant selectors, which may not work in parallel
[16:52:41] <sanxiyn> SimonSapin: Yup that would need to be copied or so
[16:52:45] <SimonSapin> Iâ€™m not sure how that works yet
[16:52:55] <sanxiyn> SimonSapin: ZOOMM paper discusses how to do bloom filter-like thing in paralllel setting
[16:53:07] <jack> our reftests are failing.
[16:53:16] <Ms2ger> We have reftests?
[16:53:19] <SimonSapin> sanxiyn: indeed
[16:53:28] <jack> can we turn those back on soon for the CI builds? are we exit clean now?
[16:53:44] <sanxiyn> jack: Not exit clean for me
[16:53:50] <Ms2ger> We still hang on shutdown
[16:54:01] <Ms2ger> I think pcwalton is fixing that
[16:54:55] *** Quits: Jayflux (Jason@moz-A39CDFB6.as13285.net) (Quit: Leaving)
[16:55:18] *** zz_kimundi is now known as kimundi
[16:59:12] <sanxiyn> SimonSapin: Ah forgot to mention that
[16:59:38] <SimonSapin> sanxiyn: https://github.com/SimonSapin/servo/tree/break-all-the-things now build libgfx and libscript successfully, only 'main' remains. Do you think your port could be adapted on top of that?
[17:00:06] <sanxiyn> SimonSapin: Yes
[17:00:18] <sanxiyn> SimonSapin: One more thing is
[17:00:26] <sanxiyn> In single_component_value, enum T is defined
[17:00:29] <sanxiyn> T should derive Eq
[17:00:33] <sanxiyn> Otherwise you can't match...
[17:00:53] <sanxiyn> Ah no you can match, but == won't work
[17:00:58] <SimonSapin> right
[17:01:03] <SimonSapin> thatâ€™s easy to fix
[17:01:24] <SimonSapin> sanxiyn: do you plan on merging your changes?
[17:01:24] <sanxiyn> yup let's put that together in 1087
[17:01:28] <sanxiyn> and I rebase on top of 1087
[17:01:31] <sanxiyn> SimonSapin: yes
[17:03:41] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[17:04:50] <sanxiyn> I should really sleep now :(
[17:04:54] <SimonSapin> sanxiyn: 1087 does not include my partial port
[17:05:19] <sanxiyn> Well I can pick up from break-all-the-things...
[17:05:26] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Ping timeout)
[17:05:51] <SimonSapin> Iâ€™m especially interested in finishing that, but if youâ€™ve already done it maybe there is a way to use it
[17:06:25] <sanxiyn> I hope to finish by tomorrow
[17:06:45] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[17:08:02] <jdm> Ms2ger: huh, I got something compiling
[17:08:03] <SimonSapin> sanxiyn: I just updated #1087 for Eq and Clone on all computed values
[17:08:16] <sanxiyn> Thanks
[17:08:27] <Ms2ger> jdm, hear, hear
[17:09:19] <sanxiyn> bed
[17:09:20] *** Quits: sanxiyn (tinuviel@B4104EBB.3CC170B1.1E14B209.IP) (Quit: Leaving)
[17:09:31] <jdm> darn, it fails my tests
[17:10:28] <jdm> hey, it passes!
[17:10:50] <jdm> Ms2ger: https://gist.github.com/jdm/7044664
[17:11:23] *** Joins: canhtak (jeremy@moz-44A7DE0.wl.t.ulaval.ca)
[17:11:32] <jdm> need to be filled out with some examples of inheritance to really prove its worth
[17:13:26] <jdm> we can even cut out the middle lines
[17:13:32] <jdm>     let parser = DOMParser::new().usable();
[17:15:18] <Ms2ger> <3
[17:16:17] <Ms2ger> I say we ship it
[17:16:21] *** Joins: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP)
[17:16:21] <ghservo> [13servo] 15jdm opened issue #1089: Force eager wrapping via the type system  02http://git.io/E5c4XA
[17:16:21] *** Parts: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP) ()
[17:22:28] * jdm -> home and food
[17:22:32] <jdm> have a good weekend, y'all
[17:23:23] *** Quits: jdm (jdm@88F51059.F3BBB17D.144F44FA.IP) (Quit: Lost terminal)
[17:28:58] *** Joins: annevk (annevk@7F0CC393.4F390C2A.420B7681.IP)
[17:29:55] *** Joins: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:31:36] <SimonSapin> jgraham: does #[deriving(Eq, Clone)] not work on fixed-size arrays? (For IPv6Address)
[17:32:11] *** Quits: annevk (annevk@7F0CC393.4F390C2A.420B7681.IP) (Input/output error)
[17:32:24] *** Joins: annevk (annevk@7F0CC393.4F390C2A.420B7681.IP)
[17:34:14] <cmr> SimonSapin: unfortunately not
[17:36:51] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[17:36:51] <ghservo> [13rust-stb-image] 15zokier opened issue #19: Make rust-stb-image buildable with rustpkg  02http://git.io/UEYwOg
[17:36:51] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[17:37:26] *** Joins: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP)
[17:37:26] <ghservo> [13servo] 15Ms2ger opened pull request #1090: Create the reflector for Blob eagerly and implement a constructor (06master...06blob-eager-binding)  02http://git.io/kstOXg
[17:37:26] *** Parts: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP) ()
[17:39:00] *** joduinn is now known as joduinn-busy
[17:41:49] *** Joins: pauls (pauls@moz-7140CF01.ccs.neu.edu)
[17:42:23] *** Quits: ahal (ahal@FCCEA34F.7672369.D8E68FF6.IP) (Ping timeout)
[17:44:51] *** ttaubert is now known as ttaubert|sf
[17:45:58] *** Joins: heather (heather@moz-A0276582.hsd1.ca.comcast.net)
[17:47:49] *** Quits: heather (heather@moz-A0276582.hsd1.ca.comcast.net) (Connection reset by peer)
[17:47:51] *** Joins: heather (heather@moz-A0276582.hsd1.ca.comcast.net)
[17:47:52] *** Quits: heather (heather@moz-A0276582.hsd1.ca.comcast.net) (Client exited)
[17:49:57] *** Joins: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP)
[17:52:57] *** Joins: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr)
[17:53:08] *** Joins: DeTeam (DeTeam@moz-76DDA368.dyn.broadband.iskratelecom.ru)
[17:57:12] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:57:12] *** ChanServ sets mode: +o brson
[18:00:15] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[18:00:33] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[18:01:15] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:01:16] *** ChanServ sets mode: +o brson
[18:01:35] <kmc> SimonSapin: cool, on it
[18:02:00] *** Joins: ahal (ahal@13F2CEC5.7672369.D8E68FF6.IP)
[18:02:25] *** Joins: heather (heather@moz-A0276582.hsd1.ca.comcast.net)
[18:05:23] *** Quits: annevk (annevk@7F0CC393.4F390C2A.420B7681.IP) (Input/output error)
[18:08:28] *** Quits: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net) (Quit: Leaving...)
[18:08:55] *** Joins: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net)
[18:09:16] *** Quits: DeTeam (DeTeam@moz-76DDA368.dyn.broadband.iskratelecom.ru) (Quit: DeTeam)
[18:09:22] <Ms2ger> jgraham, improvement: http://i.imgur.com/ewpq4oo.png
[18:09:24] *** Quits: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net) (Connection reset by peer)
[18:09:25] *** Joins: miketaylrrrr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net)
[18:11:12] <SimonSapin> kmc: thanks!
[18:12:28] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[18:12:35] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:12:35] *** ChanServ sets mode: +o brson
[18:12:35] *** Quits: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[18:13:19] *** Joins: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP)
[18:13:19] <ghservo> 01[13servo01] 15bors-servo pushed 0 new commits to 06auto: 02http://git.io/Vb-CJg
[18:13:19] *** Parts: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP) ()
[18:13:26] *** Joins: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP)
[18:13:26] <ghservo> 01[13servo01] 15bors-servo pushed 7 new commits to 06auto: 02http://git.io/nCJyFw
[18:13:26] <ghservo> 13servo/06auto 14a4c2e9d 15Simon Sapin: CSS: rexport types and variants for computed values.
[18:13:26] <ghservo> 13servo/06auto 146ddc2c3 15Simon Sapin: Add parsing a stylesheet form an iterator, a style attr form a string.
[18:13:26] <ghservo> 13servo/06auto 14e30a950 15Simon Sapin: Add supported border styles to the CSS parser.
[18:13:28] *** Parts: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP) ()
[18:14:53] *** miketaylrrrr is now known as miketaylr
[18:16:10] <jgraham> Ms2ger: 7 pass? Really?
[18:16:13] <jgraham> :p
[18:16:22] <jgraham> But seriously, that looks good :)
[18:16:32] <Ms2ger> jgraham, wasn't a big test ;)
[18:16:52] <jgraham> We should really hook it up to something to run more tests and start writing testharness tests rather than servo tests
[18:18:08] *** Quits: Kostic (marko@C4D4CB5C.58A2DD99.2168A69F.IP) (Ping timeout)
[18:23:03] *** Joins: pcwalton (pcwalton@moz-BBE3ABD.mv.mozilla.com)
[18:23:03] *** ChanServ sets mode: +o pcwalton
[18:30:34] *** Quits: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr) (Quit: bholley)
[18:31:58] <kmc> woah, we have testharness.js working already?
[18:34:12] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[18:35:22] *** Joins: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP)
[18:35:37] <Ms2ger> kmc, sort of :)
[18:36:00] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Ping timeout)
[18:44:05] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[18:49:49] *** Joins: tjc (tjc@moz-80F8D2BA.hsd1.ca.comcast.net)
[18:49:49] *** ChanServ sets mode: +o tjc
[18:51:18] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[18:54:06] *** Quits: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net) (Quit: Leaving.)
[18:58:47] *** Joins: MauricioC (mauricioc@moz-3A63F597.impa.br)
[19:06:33] *** Quits: canhtak (jeremy@moz-44A7DE0.wl.t.ulaval.ca) (Quit: canhtak)
[19:11:42] *** Joins: Kostic (marko@moz-87B3A06E.mbb.telenor.rs)
[19:16:57] *** Joins: ghservo (ghservo@79968228.6A2AE50.F3114085.IP)
[19:16:57] <ghservo> [13servo] 15marcoscaceres closed pull request #1069: Implementation of HTMLMainElement (06master...06master)  02http://git.io/L9tu9Q
[19:16:57] *** Parts: ghservo (ghservo@79968228.6A2AE50.F3114085.IP) ()
[19:17:12] <marcosc> f'ing git
[19:19:47] *** Quits: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP) (Ping timeout)
[19:20:29] *** Quits: pcwalton (pcwalton@moz-BBE3ABD.mv.mozilla.com) (Quit: pcwalton)
[19:21:12] *** Quits: tjc (tjc@moz-80F8D2BA.hsd1.ca.comcast.net) (Quit: zzzzzzzzzz)
[19:21:47] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[19:21:47] *** ChanServ sets mode: +o pcwalton
[19:23:15] *** Quits: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP) (Quit: lmandel)
[19:23:51] *** Quits: heather (heather@moz-A0276582.hsd1.ca.comcast.net) (Client exited)
[19:25:09] <Ms2ger> Whoa
[19:26:02] *** Quits: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: My lid went down)
[19:26:46] *** Joins: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr)
[19:31:30] *** Joins: dherman (dherman@moz-A7B57B40.bltmmd.fios.verizon.net)
[19:31:30] *** ChanServ sets mode: +qo dherman dherman
[19:32:31] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[19:33:18] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[19:33:26] *** Joins: tjc (tjc@moz-A979B497.tmodns.net)
[19:33:26] *** ChanServ sets mode: +o tjc
[19:34:18] *** Joins: CaseyBecking (CaseyBecki@moz-7EBF4B5D.lsanca.fios.verizon.net)
[19:41:43] <Ms2ger> "Bus error (core dumped)"
[19:41:50] <Ms2ger> But at least it quits :)
[19:44:13] <pcwalton> working on it
[19:44:42] <Ms2ger> Thanks :)
[19:45:39] *** Quits: tjc (tjc@moz-A979B497.tmodns.net) (Ping timeout)
[19:47:35] *** Joins: canhtak (jeremy@moz-44A7DE0.wl.t.ulaval.ca)
[19:48:43] *** Quits: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr) (Quit: bholley)
[19:52:03] *** Joins: tjc (tjc@moz-A979B497.tmodns.net)
[19:52:03] *** ChanServ sets mode: +o tjc
[20:00:11] *** Quits: Ms2ger (Ms2ger@moz-92A79B55.adsl-dyn.isp.belgacom.be) (Quit: nn)
[20:01:25] *** Quits: exobit_ (textual@moz-E06F46F0.corp.bitshelter.com) (Quit: )
[20:01:51] *** Joins: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr)
[20:02:40] *** Quits: dherman (dherman@moz-A7B57B40.bltmmd.fios.verizon.net) (Quit: dherman)
[20:04:41] *** Joins: eatkinson (eatkinson@moz-E57448EF.airbears2.berkeley.edu)
[20:04:59] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[20:06:40] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Ping timeout)
[20:07:51] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[20:07:51] <ghservo> 01[13rust-xlib01] 15metajack pushed 1 new commit to 06master: 02http://git.io/zpu_lw
[20:07:51] <ghservo> 13rust-xlib/06master 14deefb42 15Jack Moffitt: Add globs feature for latest Rust.
[20:07:51] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[20:09:19] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[20:12:17] *** Joins: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[20:12:19] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[20:14:05] *** Quits: eatkinson (eatkinson@moz-E57448EF.airbears2.berkeley.edu) (Quit: eatkinson)
[20:14:53] *** Quits: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr) (Quit: bholley)
[20:16:25] *** Joins: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP)
[20:16:25] <ghservo> 01[13rust-fontconfig01] 15metajack pushed 1 new commit to 06master: 02http://git.io/z33MdA
[20:16:25] <ghservo> 13rust-fontconfig/06master 14a1e265e 15Jack Moffitt: Opt into globs feature for latest Rust.
[20:16:25] *** Parts: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP) ()
[20:21:07] *** Joins: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr)
[20:21:23] <jack> i think i might be done with this upgrade. light at the end of the tunnel!
[20:21:30] <jack> oh, except i should compile for android quick.
[20:22:26] *** Joins: heather (heather@moz-A0276582.hsd1.ca.comcast.net)
[20:23:52] *** Joins: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP)
[20:23:52] <ghservo> 01[13rust-freetype01] 15metajack pushed 1 new commit to 06master: 02http://git.io/yzC50w
[20:23:52] <ghservo> 13rust-freetype/06master 14710a4f1 15Jack Moffitt: Opt into globs in new Rust.
[20:23:52] *** Parts: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP) ()
[20:24:46] *** Quits: heather (heather@moz-A0276582.hsd1.ca.comcast.net) (Client exited)
[20:24:59] *** Quits: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr) (Quit: bholley)
[20:25:07] *** Joins: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP)
[20:25:08] <ghservo> 01[13glfw01] 15metajack pushed 1 new commit to 06servo: 02http://git.io/O0987Q
[20:25:08] <ghservo> 13glfw/06servo 1463c7c8f 15Jack Moffitt: Update glfw names to match glfw-rs....
[20:25:08] *** Parts: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP) ()
[20:25:20] *** Joins: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP)
[20:25:20] <ghservo> 01[13glfw-rs01] 15metajack pushed 5 new commits to 06servo: 02http://git.io/52kKDA
[20:25:20] <ghservo> 13glfw-rs/06servo 14893c8ed 15Brendan Zabarauskas: Revert previous change to linking on OS X, and add a note and FAQ entry for Homebrew users.
[20:25:20] <ghservo> 13glfw-rs/06servo 14a18a0d1 15Brendan Zabarauskas: Return an Option on window creation
[20:25:21] <ghservo> 13glfw-rs/06servo 14f22c36e 15SÃ©bastien Crozet: Fix travis.yml.
[20:25:22] *** Parts: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP) ()
[20:25:45] <kmc> I wrote a little script to automate the process of running a Rust program under GDB to get a backtrace on task failure:  https://gist.github.com/kmcallister/7047619
[20:25:52] <kmc> will add it to the Debugging page on our wiki
[20:26:26] *** Quits: emi (sunshine@C77F1C96.DF4D9119.23C55E28.IP) (Quit: Leaving)
[20:26:41] *** Joins: emi (sunshine@moz-9FE842F.cpe.net.cable.rogers.com)
[20:29:49] *** Joins: dherman (dherman@moz-A7B57B40.bltmmd.fios.verizon.net)
[20:29:49] *** ChanServ sets mode: +qo dherman dherman
[20:30:25] *** Quits: emi (sunshine@moz-9FE842F.cpe.net.cable.rogers.com) (Quit: Leaving)
[20:31:36] *** Joins: emi (sunshine@moz-9FE842F.cpe.net.cable.rogers.com)
[20:33:46] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[20:35:34] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Ping timeout)
[20:36:35] *** Joins: eatkinson (eatkinson@moz-E57448EF.airbears2.berkeley.edu)
[20:38:20] *** Joins: eagen (eagen@8737942B.7A99C13A.B7961A98.IP)
[20:38:40] *** joduinn-busy is now known as joduinn-mtg
[20:39:39] *** Joins: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[20:40:01] *** Quits: Jackneill (Jackneill@moz-C8FD023D.pool.digikabel.hu) (Input/output error)
[20:41:58] *** Quits: tjc (tjc@moz-A979B497.tmodns.net) (Quit: zzzzzzzzzz)
[20:50:02] <jack> I like that we can build all the non rust bits of servo before the llvm compile finishes.
[20:50:20] <pcwalton> see, Rust doesn't compile that slowly ;)
[20:50:52] <jack> Is it that LLVM is that huge, or doe sit just use features that make it a bear to compile?
[20:50:59] <pcwalton> probably both
[20:51:09] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[20:52:53] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Ping timeout)
[20:56:37] *** Joins: heather (heather@2C7EC296.F188ABDE.B47338A5.IP)
[20:59:21] <marcosc> I'm getting "GLFW error: The GLFW library is not initialized" when I run a test. 
[20:59:31] <marcosc> Anyone know what that's about? 
[20:59:44] <jack> I've never seent hat in servo. What specifically are you running?
[20:59:58] *** Quits: eatkinson (eatkinson@moz-E57448EF.airbears2.berkeley.edu) (Quit: eatkinson)
[21:00:15] <marcosc> ./servo ../src/test/html/about-mozilla.html
[21:00:17] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[21:00:27] <marcosc> or any other page, it seems
[21:00:38] <jack> that should certainly work. what platform/os?
[21:00:53] *** Quits: heather (heather@2C7EC296.F188ABDE.B47338A5.IP) (Connection reset by peer)
[21:01:08] *** Joins: heather (heather@2C7EC296.F188ABDE.B47338A5.IP)
[21:01:22] <marcosc> MacOS 
[21:01:29] <bjz_> that would be an error coming from glfw internally
[21:02:07] <bjz_> a call that cannot be made before of glfw::init() is being called
[21:02:30] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[21:02:32] <marcosc> hmmm...
[21:02:54] <jack> marcosc: we definitely call glfw::init :)
[21:03:16] <marcosc> I don't have any code that would mess with that, I think
[21:03:25] <jack> can you tell me how you built it? git clone && mkdir build && cd build && ../configure && make?
[21:04:51] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[21:04:52] *** Joins: ghservo (ghservo@79968228.6A2AE50.F3114085.IP)
[21:04:52] <ghservo> [13servo] 15marcoscaceres opened pull request #1091: Implementation of HTMLMainElement... third time lucky! (06master...06master)  02http://git.io/wx5PMQ
[21:04:52] *** Parts: ghservo (ghservo@79968228.6A2AE50.F3114085.IP) ()
[21:05:00] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[21:05:01] *** ChanServ sets mode: +o brson
[21:05:14] <marcosc> jack, yes. Should I try to rebuild? 
[21:05:38] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[21:07:21] * marcosc make clean
[21:07:25] <marcosc> tries again
[21:14:22] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[21:15:05] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[21:18:37] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[21:20:03] *** Quits: dherman (dherman@moz-A7B57B40.bltmmd.fios.verizon.net) (Quit: dherman)
[21:20:23] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[21:25:03] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[21:25:34] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[21:25:34] <ghservo> 01[13servo01] 15bors-servo 04force-pushed 06auto from 143403a16 to 14284ad5e: 02http://git.io/c8GovQ
[21:25:34] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[21:25:36] *** Joins: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP)
[21:25:36] <ghservo> 01[13servo01] 15bors-servo pushed 8 new commits to 06auto: 02http://git.io/8pprmA
[21:25:36] <ghservo> 13servo/06auto 14a4c2e9d 15Simon Sapin: CSS: rexport types and variants for computed values.
[21:25:36] <ghservo> 13servo/06auto 146ddc2c3 15Simon Sapin: Add parsing a stylesheet form an iterator, a style attr form a string.
[21:25:36] <ghservo> 13servo/06auto 14e30a950 15Simon Sapin: Add supported border styles to the CSS parser.
[21:25:38] *** Parts: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP) ()
[21:26:17] *** Joins: tjc (tjc@moz-BE33DA21.fw1.sfo1.mozilla.net)
[21:26:17] *** ChanServ sets mode: +o tjc
[21:26:22] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[21:32:37] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:36:06] *** Quits: mccr8 (mccr8@moz-BBE3ABD.mv.mozilla.com) (Quit: mccr8)
[21:38:02] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:39:42] *** Joins: mccr8 (mccr8@moz-5FEA0C74.dsl.dynamic.sonic.net)
[21:44:38] *** Quits: Kostic (marko@moz-87B3A06E.mbb.telenor.rs) (Quit: Kostic)
[21:45:04] *** Quits: heather (heather@2C7EC296.F188ABDE.B47338A5.IP) (Client exited)
[21:49:14] *** Joins: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP)
[21:49:14] <ghservo> [13servo] 15bors-servo closed pull request #1087: More style system (06master...06newnewcss)  02http://git.io/r5JBmg
[21:49:14] *** Parts: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP) ()
[21:50:45] *** Joins: heather (heather@82DFB7B6.C04A2C57.B47338A5.IP)
[21:51:36] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[21:53:30] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[21:57:28] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[21:59:15] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[22:01:58] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[22:03:37] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[22:06:43] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[22:15:03] *** Quits: marcosc (marcosc@moz-AC9DB812.dsl.telepac.pt) (Input/output error)
[22:15:46] *** Joins: marcosc (marcosc@moz-AC9DB812.dsl.telepac.pt)
[22:21:52] *** Joins: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net)
[22:22:39] *** Joins: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com)
[22:24:34] <lbergstrom> I just reproduced the GLFW error message. It's printed during shutdown.
[22:30:30] <bjz_> ick
[22:30:43] *** Quits: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[22:30:48] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[22:30:52] <bjz> the 'glfw is not initialised' thing?
[22:30:59] *** Quits: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com) (Ping timeout)
[22:31:22] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[22:31:24] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[22:31:51] * bjz seems to be having connection issues
[22:32:25] <bjz> lbergstrom: that's probably all the more reason to have a context-based system
[22:41:25] *** Quits: heather (heather@82DFB7B6.C04A2C57.B47338A5.IP) (Connection reset by peer)
[22:41:38] *** Joins: heather (heather@82DFB7B6.C04A2C57.B47338A5.IP)
[22:41:55] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[22:46:18] *** Quits: marcosc (marcosc@moz-AC9DB812.dsl.telepac.pt) (Input/output error)
[22:46:49] <lbergstrom> bjz: it would hopefully help, though if it's a race condition during shutdown, it's possible we'd still have message getting sent to the context after it had called terminate
[22:46:59] <bjz> mmk
[22:47:16] <bjz> but if the context was destroyed?
[22:48:33] <bjz> I was going to have Drop::<for Context>::drop be the one that called ffi::glfwTerminate
[22:49:05] *** Joins: marcosc (marcosc@moz-AC9DB812.dsl.telepac.pt)
[22:50:26] <lbergstrom> hrmph, I should take another look at the proposed design and do a paper refactoring of the calls in servo to see how things fall out. You might be right.
[22:50:37] <bjz> the thing I'm thinking is that the user would call Contex::update to perform all the buffered glfw calls, like moving the window around
[22:50:39] <lbergstrom> First thing, though, I will track down the call that's generating the error message
[22:51:22] <bjz> trouble is it's different from what glfw normally does, which is to do all the things immediately when the functionas are called
[22:53:22] <bjz> lbergstrom: this is what it would look like from a user perspective: https://github.com/bjz/glfw-rs/tree/event-messaging#example-code
[22:53:49] <lbergstrom> we're calling `glfwGetWindowUserPointer` after terminate has been called: https://gist.github.com/larsbergstrom/7049425
[22:54:27] <bjz> lbergstrom: eventually I'll move glfw::Window::create to be called by glfw.create_window. the returned window would have a lifetime tied to the context
[22:54:27] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[22:54:35] <bjz> ooh
[22:54:50] <bjz> that might be a problem with the window being destroyed
[22:55:23] <bjz> you are doing the glfw::terminate manually right?
[22:55:40] <lbergstrom> Yes, I suspect that we're calling glfw::terminate from the Application's drop
[22:55:55] <lbergstrom> And then the Window goes out of scope and is destroyed, but we've already torn down glfw
[22:56:00] <bjz> becuase whent you use glfw::start(|| {}), terminate is called after the closure is called
[22:56:48] <bjz> https://github.com/bjz/glfw-rs/blob/master/src/glfw/lib.rs#L272
[22:56:57] <lbergstrom> makes sense. Do you think we should have glfw's Window drop guard against that case? Seems like others could hit it.
[22:57:15] <bjz> not sure
[22:57:45] <lbergstrom> Or do you think we should be trying to manage the lifetime of the Window instance more carefully so it gets torn down before terminate gets called?
[22:57:59] <bjz> most people have been using glfw::start, but I understand that might not be very flexible for more complex applications
[22:58:46] <bjz> lbergstrom: well that would be easier if we moved to the context model for glfw, because the lifetime would be tied to the context
[22:59:24] <bjz> I can add a fn destroy(self) method to Window
[22:59:42] <bjz> that would move the window into the method where it would be destroyed
[22:59:54] <bjz> so you can do it deterministically
[23:00:41] <bjz> so impl Window { pub fn destroy(self) {} }
[23:00:55] <bjz> because Window impls Drop, it would get destroyed
[23:01:38] <bjz> and because its moved, you wouldn't be able to access it again
[23:01:53] <bjz> (rustc says no)
[23:02:36] <lbergstrom> hrm, that sounds like it might work for us. We definitely know when we're tearing everything down; it's just that the Window object itself has a longer lifetime.
[23:03:59] <lbergstrom> yeah, we have our Window object (which wraps the glfw::Window) squirrled away in TLS right now
[23:04:06] <lbergstrom> so it doesn't get destroyed until the task exits
[23:04:16] <lbergstrom> it's in there for ease of our event handler implementation right now
[23:04:24] <bjz> ok
[23:04:27] <bjz> I'll add it
[23:04:40] <lbergstrom> Of course, during shutdown I could also just clear out that TLS slot, but that seems like a hack on a hack.
[23:06:13] <bjz> oh wait!
[23:06:18] <bjz> I already have it
[23:06:22] <bjz> Window::close
[23:07:42] <bjz> could you try that?
[23:10:49] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[23:15:51] *** Quits: canhtak (jeremy@moz-44A7DE0.wl.t.ulaval.ca) (Quit: canhtak)
[23:24:18] *** Quits: marcosc (marcosc@moz-AC9DB812.dsl.telepac.pt) (Input/output error)
[23:28:55] <lbergstrom> bjz: sounds like a good idea - will do :-)
[23:32:46] *** Quits: MauricioC (mauricioc@moz-3A63F597.impa.br) (Quit: Lost terminal)
[23:33:44] *** Quits: ahal (ahal@13F2CEC5.7672369.D8E68FF6.IP) (Input/output error)
[23:42:06] *** Quits: CaseyBecking (CaseyBecki@moz-7EBF4B5D.lsanca.fios.verizon.net) (Client exited)
[23:46:46] *** Quits: tjc (tjc@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: zzzzzzzzzz)
[23:50:42] *** bhearsum is now known as bhearsum|afk
[23:52:15] *** Quits: heather (heather@82DFB7B6.C04A2C57.B47338A5.IP) (Client exited)
[23:54:43] <bjz> lbergstrom:  is there a way to get all the events from a Port's 'mailbox' without having to do an infinite loop?
[23:56:10] <lbergstrom> you can do ```while port.peek() { /* call recv and handle the events } ```
[23:56:18] <lbergstrom> we do that in a few places in servo
[23:56:46] *** joduinn-mtg is now known as joduinn-afk
[23:57:20] *** Joins: heather (heather@82DFB7B6.C04A2C57.B47338A5.IP)
[23:57:30] *** Quits: heather (heather@82DFB7B6.C04A2C57.B47338A5.IP) (Client exited)
[23:57:30] <lbergstrom> um, by few I mean one: https://github.com/mozilla/servo/blob/master/src/components/main/compositing/mod.rs#L251
[23:58:07] *** Joins: heather (heather@82DFB7B6.C04A2C57.B47338A5.IP)
[23:58:08] <lbergstrom> and by infinite loop, I assume you meant you wanted to avoid making a blocking recv() call
[23:59:09] <bjz> cool
[23:59:10] <bjz> yep
