[00:02:47] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[00:04:52] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[00:05:16] *** kimundi is now known as zz_kimundi
[00:11:13] *** flaper87 is now known as flaper87|afk
[00:19:04] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:20:05] <pnkfelix> well, now my irc client is going to highlight rust keywords in a special color forever more
[00:21:31] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:21:46] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[00:21:46] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/PNKr6w
[00:21:46] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[00:23:37] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[00:24:26] *** Joins: a_m0d (a_m0d@moz-AC872528.acanac.net)
[00:30:57] <cmr> heheh
[00:36:13] *** Joins: ecr (chatzilla@7C463196.5BB0586B.11F8506F.IP)
[00:39:45] *** Quits: doomlord_ (servitor@moz-99BE89EC.range86-184.btcentralplus.com) (Ping timeout)
[00:39:56] *** Joins: doomlord_ (servitor@moz-99BE89EC.range86-184.btcentralplus.com)
[00:52:41] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Client exited)
[00:53:29] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[01:01:49] *** Quits: a_m0d (a_m0d@moz-AC872528.acanac.net) (Ping timeout)
[01:21:06] *** Quits: dherman (dherman@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: dherman)
[01:26:18] *** Quits: doomlord_ (servitor@moz-99BE89EC.range86-184.btcentralplus.com) (Ping timeout)
[01:26:30] *** Joins: doomlord_ (servitor@moz-99BE89EC.range86-184.btcentralplus.com)
[01:38:05] *** Quits: brson (brson@F16146EB.9D3722BB.58DC3EE6.IP) (Ping timeout)
[01:40:21] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[01:53:34] *** Quits: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca) (Quit: canhtak)
[02:02:13] *** Quits: pcwalton (pcwalton@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: pcwalton)
[02:04:52] *** Parts: IanCormac84 (User@16AF40B0.64D641E5.67DFF8B4.IP) ()
[02:15:00] *** Joins: brson (brson@F16146EB.9D3722BB.58DC3EE6.IP)
[02:15:00] *** ChanServ sets mode: +qo brson brson
[02:16:42] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[02:16:42] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/7AzOQg
[02:16:42] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[02:16:43] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[02:16:43] <ghrust> [13rust] 15bors pushed 3 new commits to 06auto: 02http://git.io/PiXdQg
[02:16:43] <ghrust> 13rust/06auto 14bec7b76 15Alex Crichton: rustc: Move to FNV hashing for node/def ids...
[02:16:43] <ghrust> 13rust/06auto 140a84132 15Alex Crichton: syntax: Conditionally deriving(Hash) with Writers...
[02:16:43] <ghrust> 13rust/06auto 145862c0c 15bors: auto merge of #12635 : alexcrichton/rust/speedy-hash, r=brson...
[02:16:45] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[02:16:50] *** Quits: brson (brson@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: leaving)
[02:17:11] *** Joins: brson (brson@4A08E125.708C0A12.C7EEF3A2.IP)
[02:17:11] *** ChanServ sets mode: +qo brson brson
[02:20:21] *** Quits: carter (carter@moz-58F59B3A.members.linode.com) (Quit: ZNC - http://znc.in)
[02:20:51] *** Joins: carter (carter@moz-58F59B3A.members.linode.com)
[02:22:48] *** Quits: carter (carter@moz-58F59B3A.members.linode.com) (Quit: ZNC - http://znc.in)
[02:23:18] *** Joins: carter (carter@moz-58F59B3A.members.linode.com)
[02:23:55] <huon> acrichto: are you missing a * in "I would favour RefCell"? https://github.com/mozilla/rust/pull/12654#issuecomment-36960878
[02:24:21] <acrichto> oops 
[02:24:22] <acrichto> indeed
[02:25:14] <huon> I mean "RcBox"
[02:25:15] *** Joins: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca)
[02:29:45] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[02:30:07] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[02:31:27] <carter> o/
[02:31:48] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[02:41:03] *** Quits: sunfish (chatzilla@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:46:42] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[02:50:56] *** Quits: brson (brson@4A08E125.708C0A12.C7EEF3A2.IP) (Quit: leaving)
[02:54:53] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[02:55:13] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[02:55:13] *** ChanServ sets mode: +qo brson brson
[03:02:20] *** Quits: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[03:04:52] *** Joins: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net)
[03:11:49] *** Quits: nrc (nrc@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 30.0a1/20140304030204])
[03:18:14] *** Quits: pnkfelix (pnkfelix@F16146EB.9D3722BB.58DC3EE6.IP) (Ping timeout)
[03:20:08] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[03:20:18] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Quit: leaving)
[03:21:44] *** Quits: esummers_ (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[03:22:20] *** Joins: esummers_ (esummers@moz-3B015C90.wi.res.rr.com)
[03:26:04] *** Quits: SimonSapin (simon@moz-9A1FE870.exyr.org) (Ping timeout)
[03:26:35] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[03:26:35] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/PiXdQg
[03:26:35] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[03:29:53] *** Quits: japaric (japaric@87E5C324.64CFB2BA.F29ED47E.IP) (Ping timeout)
[03:31:39] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[03:31:39] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/Ptoz1A
[03:31:39] <ghrust> 13rust/06auto 1442389b7 15Alex Crichton: collections: Correct with_capacity_and_hasher...
[03:31:39] <ghrust> 13rust/06auto 1428e7631 15bors: auto merge of #12746 : alexcrichton/rust/issue-12743, r=brson...
[03:31:39] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[03:31:40] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[03:31:40] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/qRbK6Q
[03:31:40] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[03:33:26] *** Joins: SimonSapin (simon@moz-9A1FE870.exyr.org)
[03:36:32] *** Quits: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[03:44:04] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[03:44:31] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[03:54:49] *** Quits: zz_kimundi (kimundi@moz-9F18BF79.dip0.t-ipconnect.de) (Ping timeout)
[03:55:10] <huon> acrichto: comments? https://github.com/mozilla/rust/pull/12747
[03:58:29] *** Joins: zz_kimundi (kimundi@moz-9A465F61.dip0.t-ipconnect.de)
[03:58:31] *** zz_kimundi is now known as kimundi
[04:09:57] *** Quits: eibwen (kvirc@moz-467A0FC4.dip0.t-ipconnect.de) (Ping timeout)
[04:29:53] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[04:30:15] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[04:31:58] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[04:35:56] *** Quits: aatch (James@moz-B437F499.pocketrent.com) (Quit: Leaving)
[04:41:38] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[04:41:38] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/Ptoz1A
[04:41:38] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[05:51:39] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[05:58:09] *** Joins: brson (brson@C0FA739D.99DDF6F0.4329AE1A.IP)
[05:58:09] *** ChanServ sets mode: +qo brson brson
[06:11:43] *** Joins: cmr (moznet@moz-EC676DFE.members.linode.com)
[06:13:01] *** Quits: blank_name (blank_name@463DB555.53526368.6D228269.IP) (Ping timeout)
[06:16:18] *** Joins: blank_name (blank_name@463DB555.53526368.6D228269.IP)
[06:22:08] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[06:22:57] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[06:23:05] *** Quits: andrew-d (andrew-d@6C6C9B53.23518FA3.CE794808.IP) (Ping timeout)
[06:23:52] *** Quits: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca) (Quit: canhtak)
[06:27:55] *** Joins: andrew-d (andrew-d@6C6C9B53.23518FA3.CE794808.IP)
[06:28:14] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Quit: Konversation terminated!)
[06:28:16] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[06:28:40] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[06:31:25] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[06:32:05] *** Quits: andrew-d (andrew-d@6C6C9B53.23518FA3.CE794808.IP) (Ping timeout)
[06:32:43] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[06:32:55] *** Joins: andrew-d (andrew-d@6C6C9B53.23518FA3.CE794808.IP)
[06:34:21] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[06:39:34] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[06:39:44] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[06:42:16] *** Quits: brson (brson@C0FA739D.99DDF6F0.4329AE1A.IP) (Ping timeout)
[06:45:39] <ChrisMorgan> What!? bors has been lazy for over a day?
[06:46:04] * eddyb whips bors
[06:46:19] <eddyb> nmatsakis: anything new, btw?
[06:47:17] <huon> ChrisMorgan: a day?
[06:47:19] <ChrisMorgan> Hang on, what's happening here? Oh, that. Pulling from the wrong source.
[06:47:22] <huon> something landed 2 hours ago
[06:47:31] * ChrisMorgan knew it didn't sound right
[06:47:36] <ChrisMorgan> Still, bors is lazy right now.
[06:47:40] *** Joins: brson (brson@F16146EB.9D3722BB.58DC3EE6.IP)
[06:47:40] *** ChanServ sets mode: +qo brson brson
[06:48:01] <ecr> bors should run the heavy static analysis batch if it ever runs out of things to do
[06:48:08] <ecr> find bugs
[06:48:13] <ecr> abort if more PRs come in
[06:48:43] * ChrisMorgan wonders if bors has any fingers to twiddle
[06:48:47] <huon> we could have a fuzzer, and can just fuzz programs continuously in its downtime
[06:48:52] <huon> *bors can
[06:49:01] <ChrisMorgan> Get writing!
[06:49:25] <ecr> then we'd just have to maintain the fuzzer in parallel with the compiler :(
[06:49:47] <ecr> good idea though
[06:50:40] <huon> `head -c 100 /dev/urandom | rustc -` for now :P
[06:50:57] <ecr> once it hit 1.0, it might be worth taking some time to build some real analysis tools for rust
[06:51:01] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[06:51:13] <ecr> fuzzer, abstract interpreter, model checker, etc.
[06:51:14] <huon> the compiler has a lot built-in, fwiw
[06:51:22] <huon> but yeah, the higher level stuff would be useful
[06:51:32] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[06:51:42] <ecr> especially if it hooks into the metadata system
[06:55:23] *** Joins: pcwalton (pcwalton@F16146EB.9D3722BB.58DC3EE6.IP)
[06:55:23] *** ChanServ sets mode: +ao pcwalton pcwalton
[06:55:33] *** Quits: pcwalton (pcwalton@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: pcwalton)
[07:03:25] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[07:22:40] *** Joins: edwardw (Mibbit@E6E87FA7.354F6412.B9C6B12A.IP)
[07:25:06] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[07:31:33] <huon> \o/ i've got rustdoc rendering markdown files (nearly) pixel-for-pixel identical to pandoc
[07:32:12] <edwardw> awesome
[07:33:28] <brson> huon: i am very excited about this
[07:33:49] <huon> we'll be able to kick our node and pandoc habit
[07:40:52] *** Joins: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net)
[07:43:13] *** Quits: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net) (Ping timeout)
[07:46:43] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[07:46:43] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/Itk_tw
[07:46:44] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[07:46:45] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[07:46:46] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/pKz7mw
[07:46:46] <ghrust> 13rust/06auto 140bdd31c 15Ted Horst: change FVN hash function to the FVN-1a variant
[07:46:46] <ghrust> 13rust/06auto 1485ab68e 15bors: auto merge of #12749 : tedhorst/rust/master, r=huonw...
[07:46:46] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[07:52:15] *** Joins: dherman (dherman@F16146EB.9D3722BB.58DC3EE6.IP)
[07:52:15] *** ChanServ sets mode: +ao dherman dherman
[07:58:51] *** Joins: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net)
[07:59:17] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[07:59:38] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[07:59:45] *** flaper87|afk is now known as flaper87
[08:01:50] <flaper87> o/ 
[08:02:13] *** Quits: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net) (Ping timeout)
[08:02:29] <ecr> \o
[08:02:32] <ecr> can't leave you hanging
[08:06:19] <flaper87> ecr: :)
[08:10:14] *** Parts: edwardw (Mibbit@E6E87FA7.354F6412.B9C6B12A.IP) ()
[08:10:36] *** Joins: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP)
[08:18:43] *** Joins: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net)
[08:21:14] *** Quits: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net) (Ping timeout)
[08:26:40] *** Quits: ecr (chatzilla@7C463196.5BB0586B.11F8506F.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 27.0.1/20140212131424])
[08:27:01] *** Joins: ecr (chatzilla@7C463196.5BB0586B.11F8506F.IP)
[08:32:23] *** Quits: dherman (dherman@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: dherman)
[08:36:24] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:36:55] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:37:18] *** Joins: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net)
[08:43:49] *** Joins: aepsil0n (eduard@moz-B5507714.hsi8.kabel-badenwuerttemberg.de)
[08:56:40] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[08:56:40] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/pKz7mw
[08:56:40] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[09:01:41] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[09:01:41] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/gsXYeA
[09:01:41] <ghrust> 13rust/06auto 142271860 15Liigo Zhuang: rename ast::ViewItemExternMod to ast::ViewItemExternCrate, and clean::ExternMod to clean::ExternCrate
[09:01:41] <ghrust> 13rust/06auto 14b1d104c 15bors: auto merge of #12750 : liigo/rust/De-extern-mod, r=alexcrichton...
[09:01:41] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[09:01:44] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[09:01:44] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/3TJjOg
[09:01:44] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[09:03:17] *** Joins: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru)
[09:05:35] *** Joins: japaric (japaric@841DCDFF.55B992BD.5C7588CA.IP)
[09:06:41] *** Quits: brson (brson@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: leaving)
[09:06:45] *** Joins: intuxicated (intuxicate@A9443CC2.9D1E10BA.3FFBF42F.IP)
[09:10:37] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[09:10:56] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[09:11:12] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[09:11:33] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[09:37:42] *** Quits: hansjorg (hansjorg@moz-41C5CE61.redpill-linpro.com) (Ping timeout)
[09:46:00] *** Quits: mawuli (mawuli@moz-A89BBCE.com.gh) (Ping timeout)
[09:52:59] *** Joins: hansjorg (hansjorg@moz-41C5CE61.redpill-linpro.com)
[09:55:11] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Connection reset by peer)
[10:05:22] *** Quits: ecr (chatzilla@7C463196.5BB0586B.11F8506F.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 27.0.1/20140212131424])
[10:11:43] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[10:11:44] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[10:11:44] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/gsXYeA
[10:11:44] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[10:15:37] *** cmr is now known as unsafe
[10:16:16] *** unsafe is now known as cmr
[10:39:57] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[10:44:03] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[10:44:29] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[10:46:07] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[10:47:29] <huon> r? https://github.com/mozilla/rust/pull/12753
[10:48:38] <huon> cmr: ^
[10:51:40] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[10:51:40] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/gkOAAg
[10:51:40] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[10:54:11] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[10:57:12] *** Joins: mib_cs1dc4 (Mibbit@moz-4302DFD9.fbx.proxad.net)
[10:58:37] *** Quits: mib_cs1dc4 (Mibbit@moz-4302DFD9.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[11:24:50] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[11:26:45] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[11:28:27] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[11:30:19] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[11:41:22] *** Joins: eibwen (kvirc@moz-C9034F51.dip0.t-ipconnect.de)
[11:49:14] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[11:55:48] *** Quits: acrichto (acrichto@moz-B63D64BD.res.cmu.edu) (Ping timeout)
[12:00:11] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[12:01:32] *** Joins: acrichto (acrichto@moz-B63D64BD.res.cmu.edu)
[12:01:32] *** ChanServ sets mode: +o acrichto
[12:01:48] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[12:01:48] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/7In1-Q
[12:01:48] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[12:10:36] *** Joins: gimpf (gimpf@moz-3BA815CB.adsl.highway.telekom.at)
[12:19:00] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[12:22:51] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[12:24:51] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[12:25:01] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[12:27:28] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[12:29:21] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[12:47:21] *** Quits: esummers_ (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[12:47:56] *** Joins: esummers_ (esummers@moz-3B015C90.wi.res.rr.com)
[12:57:27] *** Parts: aepsil0n (eduard@moz-B5507714.hsi8.kabel-badenwuerttemberg.de) ()
[13:27:25] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[13:28:55] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Connection reset by peer)
[13:28:59] *** Quits: esummers_ (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[13:29:13] *** Joins: Jesse_ (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[13:30:03] *** Joins: edwardw (Mibbit@F35FE004.FF38EF20.1D660E71.IP)
[13:31:08] *** Quits: Jesse_ (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[13:33:51] *** Joins: esummers_ (esummers@moz-3B015C90.wi.res.rr.com)
[13:54:47] <eddyb> nmatsakis: good morning :)
[13:54:59] * eddyb is being preemptive
[13:58:50] *** Joins: canhtak (canhtak@moz-7EB111.wl.t.ulaval.ca)
[14:05:01] *** flaper87 is now known as flaper87|afk
[14:10:25] *** Parts: edwardw (Mibbit@F35FE004.FF38EF20.1D660E71.IP) ()
[14:11:37] *** flaper87|afk is now known as flaper87
[14:15:05] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[14:15:18] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[14:15:26] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[14:18:10] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[14:18:47] *** Joins: edwardw (edwardw@ED48E813.BF27AFA4.B9C6B12A.IP)
[14:27:25] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[14:29:21] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[14:33:21] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[14:43:42] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[14:52:47] *** Joins: bvssvni (Mibbit@moz-C4579D6F.bb.online.no)
[14:52:57] *** Quits: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP) (Quit: leaving)
[14:53:21] <eddyb> riight
[14:53:39] <eddyb> nmatsakis: you should ask strcat directly (too bad he's not here right now) or huon
[14:53:50] <eddyb> I remember the two of them discussing the deoptimization problem
[14:55:05] <edwardw> r? https://github.com/mozilla/rust/pull/12752
[14:55:51] <nmatsakis> jld: ping
[14:55:54] <eddyb> nmatsakis: I was hoping to wake up to a bunch of nits to fix in #12610. now I only have like an hour left until I leave
[14:56:10] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:58:33] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:00:43] <nmatsakis> eddyb: sorry, time zones. it's only 7am over here after all :)
[15:00:49] <nmatsakis> eddyb: however I am reading now
[15:01:08] <eddyb> my ploy to switch timezones in my biological clock didn't work
[15:01:19] <eddyb> I have to clock out the laptop =))
[15:01:26] <nmatsakis> eddyb: regarding the optimziation stuff, I will talk to huon / strcat, though I think it all seems eminently solvable (and the size in memory + FFI is most imp't anyhow)
[15:01:53] * huon wonders what the question is?
[15:01:55] <eddyb> (if that's the right way of saying it)
[15:02:05] <nmatsakis> huon: we were discussing smart pointer repr
[15:02:10] <eddyb> huon: strcat's iterating Vec<T> + Option<T> + nullable problem
[15:02:19] <nmatsakis> and in particular whether we can get Smaht<T> to be considered a non-nullable ptr
[15:02:20] <eddyb> where it wasn't optimizing as well as ~[T]
[15:02:35] <eddyb> huon: did he ever fix that?
[15:03:08] <huon> eddyb: I don't think he successfully taught LLVM to know that some pointers are non-nullable, no
[15:03:16] <nmatsakis> my original thought was that we should just have a `#[repr]` annotation where you tell rust: hey, represent this type as a pointer, and I don't care about the confusion between null 
[15:03:50] <nmatsakis> you could only apply this to structs with one field that is a *T or *mut T
[15:04:01] <nmatsakis> which are kind of inherently unsafe anyway so so what
[15:04:42] <kimundi> So, is the problem that llvm treads a *T different than a struct {*T} ?
[15:04:45] <nmatsakis> another option (derived from something eddyb mentioned) would be to make a newtype wrapper `NonNull<T> { data: *T }`
[15:04:49] <nmatsakis> but that's basically a lang item
[15:04:58] <nmatsakis> kimundi: that's one problem but not the one I am most interested in
[15:05:04] <nmatsakis> though I think it would fall out from my #repr fix
[15:05:21] <nmatsakis> the problem I am most interested in is that `Option<Rc<T>>` is two words
[15:05:25] <nmatsakis> when it should be 1
[15:05:36] <kimundi> Ahhh, that kind of optimization
[15:05:43] <nmatsakis> but also:
[15:05:48] <nmatsakis> that Option<Rc<T>> should work with the FFI
[15:05:53] <nmatsakis> which I think is related
[15:06:20] <nmatsakis> or rather you can't get the latter without the former...
[15:06:24] <kimundi> and be equivalent to a nullable *RcBox<T> ?
[15:06:32] <kimundi> (size wise)
[15:06:32] <nmatsakis> (where by "work" I mean act like a pointer)
[15:06:36] <nmatsakis> yeah basically
[15:06:43] <nmatsakis> though there is some (reasonable) controversy
[15:06:55] <nmatsakis> about committing to the repr of Option<non-nullable-ptr> 
[15:07:01] <kimundi> yeah
[15:07:08] <nmatsakis> though I think it's ok and inevitable
[15:07:16] <nmatsakis> but pcwalton wants us to not commit to repr of enums, which I understand too
[15:07:28] <nmatsakis> anyway, regardless,
[15:07:35] <nmatsakis> you need a way for the system to know that Rc<T> is realyl a non-nullable-ptr
[15:07:47] <nmatsakis> the advantage of the newtype wrapper
[15:07:56] <nmatsakis> would be that it could assert that data is not null when it's created
[15:08:16] <nmatsakis> and hence you at least catch the weird mistake where you somehow create an Rc wrapping null and then Option<Rc<T>> becomes None when you thought it should be Some
[15:08:33] <nmatsakis> the disadvantage is that it's a klang item, I guess, but I don't reall
[15:08:36] <nmatsakis> er, a magic struct
[15:08:42] <kimundi> rusti: Some(~())
[15:08:43] -rusti- None
[15:08:44] <nmatsakis> that all smart pointers have to use
[15:09:04] <nmatsakis> hmm yeah there is that ;)
[15:09:19] <nmatsakis> though that's a bug somewhere else I'd say
[15:09:38] <eddyb> that's filled
[15:09:41] <eddyb> and we know how to fix it
[15:09:43] <kimundi> Afaik strcat normalized zero-size mallocs to a nullptr
[15:09:57] <eddyb> 0x1
[15:09:57] <nmatsakis> yes 
[15:10:00] <nmatsakis> I figured 
[15:10:08] <nmatsakis> right
[15:10:18] <nmatsakis> I was going to say, just some value thta's *not* null will do...
[15:10:27] * kimundi apologizes for sidetracking ;)
[15:10:38] <nmatsakis> no I mean i've basically laid out my thoughts :)
[15:10:48] <nmatsakis> seems like servo would really like this to get done
[15:10:55] <nmatsakis> since they use Option<JS<T>> all over the place
[15:11:06] <nmatsakis> and it seems like it's not too hard to me
[15:11:08] <nmatsakis> just a matter of ... deciding
[15:11:21] <kimundi> JS<T> == javascript Gc allocated memory?
[15:11:24] <nmatsakis> yes
[15:11:31] <nmatsakis> (which is the coolest thing ever)
[15:11:32] <kimundi> nice
[15:11:57] <kimundi> I agree, even though I just learned that it actually got done :)
[15:14:45] <kimundi> So the choice is basically between one lang item wrapper type, or individual annotations on each SP
[15:15:57] <nmatsakis> kimundi: yes
[15:16:16] <nmatsakis> I don't really remember how the ADT code works
[15:16:27] <nmatsakis> it may be a touch tricky
[15:16:39] <nmatsakis> but it seems like if we *could* get the LLVM repr of (e.g.) RC<T> to be *T
[15:16:43] <nmatsakis> it would also address the FFI issues
[15:16:50] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Connection reset by peer)
[15:16:51] <nmatsakis> (that is what I wanted from the annotations)
[15:17:00] *** Quits: esummers_ (esummers@moz-3B015C90.wi.res.rr.com) (Connection reset by peer)
[15:17:15] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[15:18:14] <huon> if we have NonNull<T>, would .get() (or whatever the fetcher is called) return a *mut T? if so, it seems like it might be tricky to communicate to LLVM that this is not null (when it understands such thing) since non-null information is no longer in the Rust type.
[15:21:31] <nmatsakis> huon: yes and yes
[15:21:45] * nmatsakis resists mentioning his proposal that * be non-nullable. Oh wait, I failed.
[15:22:47] *** Quits: bvssvni (Mibbit@moz-C4579D6F.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[15:23:21] <huon> heh
[15:24:11] <huon> the #[non_null] could go on the */*mut fields directly too
[15:24:14] <kimundi> nmatsakis: *T non-nullable, with Option<*T> commited to being represented as a nullable pointer?
[15:24:18] <nmatsakis> right
[15:24:20] <nmatsakis> that was the proposal
[15:24:22] <huon> struct Rc { #[non_null] ptr: *T }
[15:24:30] <nmatsakis> few people liked it but me it seems,
[15:24:44] <nmatsakis> but it basically solves all these problems a few more,
[15:24:48] <nmatsakis> admittedly introducing one of its own :)
[15:24:53] <kimundi> seems like the smallest change at least
[15:24:56] <huon> we could add ?T, which is *T but non-nullable... :P
[15:24:56] <nmatsakis> maybe a case of cure being worth the disease
[15:25:06] <nmatsakis> huon: yeah I had thought too, th
[15:25:14] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[15:25:32] <nmatsakis> but it potentially fails to address your optimization concern
[15:25:35] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[15:25:39] <nmatsakis> that is, I imagine that the non-null attr should be part of the type
[15:25:45] <nmatsakis> not so much the field
[15:26:34] *** Joins: bvssvni (Mibbit@moz-C4579D6F.bb.online.no)
[15:27:17] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[15:27:25] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[15:29:08] <huon> hm.. I guess passing the non-null info to LLVM is mostly irrelevant: in almost all cases, it's only relevant to something like Option<&T>, and in creating that &T the implementor asserts to LLVM that the *T is non-null (via &*self.ptr)
[15:29:21] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[15:30:34] <huon> (that is, the raw *mut is normally hidden as an implementation detail of the smart pointers, which exposes an interface of non-null (in a way that LLVM & rustc can understand) pointers & references)
[15:30:44] <nmatsakis> it's not clear to me why LLVM needs to know a pointer is non-nullable, actually
[15:30:53] <nmatsakis> that is, doesn't it already assume any *T that is deref'd is not NULL?
[15:30:54] *** Quits: japaric (japaric@841DCDFF.55B992BD.5C7588CA.IP) (Connection reset by peer)
[15:31:11] <huon> fn foo(x: &T) -> bool { Some(x) == None } doesn't optimise to false
[15:31:22] <huon> causes things like https://github.com/mozilla/rust/issues/11751
[15:31:39] *** Joins: japaric (japaric@841DCDFF.55B992BD.5C7588CA.IP)
[15:33:08] <nmatsakis> hmm ok
[15:33:34] <nmatsakis> now I understand your previous comment
[15:33:42] <nmatsakis> about the Option<&T> part
[15:33:46] <nmatsakis> yes, I agree, it may well be irrelevant
[15:35:16] *** Quits: japaric (japaric@841DCDFF.55B992BD.5C7588CA.IP) (Connection reset by peer)
[15:35:51] *** Joins: japaric (japaric@841DCDFF.55B992BD.5C7588CA.IP)
[15:40:32] *** Joins: lpy (lpy@12172131.F09091A8.1348A864.IP)
[15:46:33] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[15:48:56] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[16:07:48] <eddyb> nmatsakis: I gotta leave now... maybe we'll get this over with tomorrow :)
[16:07:55] <nmatsakis> eddyb: I was just coming to ping you :)
[16:08:01] <nmatsakis> eddyb: so I finished the review, definitely going to need more tests
[16:08:12] <eddyb> ah okay, so tomorrow it is
[16:08:13] <nmatsakis> I have no major edits, some refactoring and simplifications I am testing now
[16:08:20] <nmatsakis> I may just go ahead and make some more tests for fun
[16:08:26] <nmatsakis> or else just push you the nits and describe the tests
[16:08:29] <nmatsakis> but basically same as last time
[16:08:39] <nmatsakis> some compile-fail and run-pass unit tests covering each possible scenario
[16:08:51] <nmatsakis> eddyb: btw in case it's unclear, this is great work
[16:09:12] <nmatsakis> eddyb: btw I didn't read your latest commits yet, i'll do that too, but I assume they're small
[16:09:24] <eddyb> the last one is tiny
[16:09:36] <eddyb> just changes to the relevant parts in the compiler + tests
[16:09:42] <nmatsakis> ok
[16:09:47] <nmatsakis> I'll look at those right now too
[16:09:56] <eddyb> hehe that "in case it's unclear" :)))
[16:10:01] <eddyb> thanks :P
[16:11:40] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[16:11:50] <nmatsakis> eddyb: the addition of explicit <'a> was needed to make type inferencer happy? oh, I see, due to variance, yes ok.
[16:15:42] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[16:16:51] <eddyb> (read that comment in the IRC log)
[16:24:23] *** Quits: lpy (lpy@12172131.F09091A8.1348A864.IP) (Ping timeout)
[16:27:27] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[16:29:21] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[16:29:40] *** Joins: Jesse_ (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[16:32:59] *** Quits: Jesse_ (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[16:33:24] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[16:33:38] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:37:28] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[16:49:24] *** Joins: Kxepal832 (Miranda@moz-413026B1.pppoe.mtu-net.ru)
[16:49:25] *** Joins: dherman (dherman@F16146EB.9D3722BB.58DC3EE6.IP)
[16:49:25] *** ChanServ sets mode: +ao dherman dherman
[16:49:41] *** Quits: Kxepal (Miranda@moz-365192ED.pppoe.mtu-net.ru) (Ping timeout)
[16:56:58] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:59:20] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:37:41] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[17:41:16] *** Joins: nrc (nrc@F16146EB.9D3722BB.58DC3EE6.IP)
[17:44:21] *** Joins: brson (brson@F16146EB.9D3722BB.58DC3EE6.IP)
[17:44:21] *** ChanServ sets mode: +qo brson brson
[17:52:10] <kimundi> nmatsakis: I wonder whether with DST, it would be possible to generalize Vec<T> to Growable<[T]> somehow
[17:52:35] <kimundi> (In the sense of allowing Growable<str> etc)
[17:58:31] *** Joins: doener (doener@moz-C68F600D.unity-media.net)
[18:06:48] *** Quits: gimpf (gimpf@moz-3BA815CB.adsl.highway.telekom.at) (Quit: Leaving.)
[18:08:48] *** Quits: japaric (japaric@841DCDFF.55B992BD.5C7588CA.IP) (Connection reset by peer)
[18:31:18] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[18:38:01] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[18:38:01] *** ChanServ sets mode: +o tjc
[18:44:05] <esummers> I've been porting a side project to Rust and love it so far, but I find myself often wanting to put references to structs inside an enum which is kind of clunky.  With all the talk about the upcoming DST feature, it feels like a DST Union type may make this nicer.  Basically a union DST type that uses existing type constructors.  For example `Result< (), Union<IoError, MyOtherError> >` (maybe different syntax) which would be constructe
[18:44:12] *** Joins: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP)
[18:45:09] <kmc> you got cut off at "be constructe"
[18:45:25] <esummers> sorry, i'll break it up
[18:45:28] <esummers> I've been porting a side project to Rust and love it so far, but I find myself often wanting to put references to structs inside an enum which is kind of clunky.  With all the talk about the upcoming DST feature, it feels like a DST Union type may make this nicer. 
[18:45:35] <esummers>  Basically a union DST type that uses existing type constructors.  For example `Result< (), Union<IoError, MyOtherError> >` (maybe different syntax) which would be constructed `Err( IoError { kind: OtherIoError, .. } )` or `Err( MyOtherError { .. } )`.  I'm no typesystem expert, is this feasible?
[18:46:28] <kmc> isn't that just the existing  enum Either<S,T> { Left(S), Right(T) }
[18:46:41] <kmc> well with one layer of constructors implicit
[18:46:54] <esummers> kind of, but with fewer constructors
[18:47:20] <kmc> I don't think it has much to do with DST either
[18:47:42] <kmc> the size of Union<IoError, MyOtherError> would just be the bigger of IoError or MyOtherError, plus one word for the tag
[18:48:16] <esummers> I think it would be interesting for different length structs instead of embedding a reference
[18:48:42] <esummers> or different length types (since it wouldn't need to be a struct in theory)
[18:49:03] <kmc> Either<S,T> doesn't embed a reference though
[18:49:56] <kmc> I see what you're saying that you could have dynamically sized enums in addition to size-of-biggest-alternative enums
[18:50:02] <esummers> it doesn't need to, but if the sizes of the structs is extremely lopsided there will be alot of padding
[18:50:12] <esummers> right
[18:50:29] <kmc> I think that feature is orthogonal to the feature of making the constructor implicit
[18:50:47] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[18:51:21] <jld> nmatsakis: pong?
[18:52:14] <esummers> Anyway thought I'd throw that out there since it was on my mind.
[18:53:21] <esummers> It is also nice to declare inline instead of creating a new enum anywhere more then two variants are needed
[18:53:47] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[18:54:41] <kmc> esummers: I think this is a form of structural subtyping, which can cause problems with inference for example
[18:55:26] <kmc> (I mean the implicit-constructor feature, not the DST-enum feature)
[18:55:41] <kmc> maybe it would be ok in Rust because type inference is fairly local
[18:55:57] <kmc> but in general subtyping makes type systems a *lot* harder to work with, and Rust currently has almost no subtyping
[18:56:26] <esummers> right, i was wondering that
[18:57:46] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:57:48] <kmc> as for DST enums, you would be bound by the same restrictions as other DSTs; you couldn't allocate them on the stack or pass them as arguments
[19:00:09] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:01:03] <esummers> I find I usually want to do this either storing a collection of items that I don't alwasy want to treat as an enum (and I don't want padding)
[19:01:17] <esummers> or returning errors where it may be my own error struct or someone elses
[19:02:04] <esummers> but enum variants work, so just sticking with that until I see a better way ;-)
[19:03:11] <kmc> can you explain more about what kind of collection, and why padding is an issue?
[19:04:37] <kmc> if T is a DST then you won't be able to construct [T] or even [T, ..n]
[19:04:37] <esummers> for example maybe I have structs for File, Directory, Symlink and I want to use them untagged sometimes
[19:04:46] <esummers> but I'm storing them in a database with a tag
[19:04:55] <esummers> So I want to check the tag when I read them out
[19:05:04] <esummers> Then treat them as structs
[19:05:26] <esummers> Also want to make sure all cases are satisified when they are read out
[19:06:10] <kmc> so in Rust today you would do something like this?  struct File { ... }; struct Dir { ... }; struct Link { ... };  enum Item { IFile(File), IDir(Dir), ILink(Link) }
[19:06:13] <esummers> honestly, I'm not versed enough on DSTs to really know if it would be practical
[19:06:33] <esummers> right
[19:06:51] <kmc> well again, omitting the padding at runtime is a completely separate feature from eliding the constructors in the source
[19:07:17] <esummers> yes, probably two features
[19:07:43] <esummers> and it works as it is, but lots of constructors ;-)
[19:07:47] <kmc> one way you can shrink the padding today is to move the large parts of the large structs into separate structs that you allocate on the heap with ~
[19:08:26] <kmc> which might be desirable anyway, because you don't want to move/copy large structures
[19:08:53] <esummers> Not a bad idea, but main issue is that I want to use the structs untagged sometimes so they would all need to be wrapped
[19:09:41] <kmc> I think rather than adding subtyping (a deep change to the language) we could add sugar to decrease the verbosity of the constructors
[19:09:42] <esummers> probably just need to deal with it.  my thought was allowing a new union type to reuse existing constructors
[19:10:25] <kmc> one easy thing is that you can make a function  Item::newFile(...) -> Item,  which replaces IFile(File { ... })
[19:11:12] <esummers> that is a nice idea.  may make it a little less clunky
[19:11:57] <esummers> Actually looks like I'm already doing some of that now that I look at my code ;-)
[19:12:05] <kmc> cool :)
[19:14:43] <kmc> if we allowed macro expansion in patterns that could help too
[19:15:14] <kmc> macro_rules! filepat ( ($name:ident) => ( IFile(File { name: $name }) ) )
[19:15:27] <kmc> but I don't think you can use macros in patterns that way :/
[19:17:10] <kmc> GHC recently added "pattern synonyms" for this kind of thing
[19:17:21] <kmc> it's a problem in Haskell as well as Rust and I don't know of a great solution there, either
[19:19:02] <kmc> in a dependently typed language you can just pair an Item with a proof that it's a File :)
[19:19:49] <esummers> maybe could be done with a syntax extension if the whole match expression was replaced, but that is a little farther then I want to go right now ;-)
[19:20:05] <esummers> pattern synonyms sounds interesting
[19:21:10] <kmc> yeah
[19:21:16] *** Joins: gwty (gwtypc@8EB8AC29.BB7EB00B.137C914F.IP)
[19:21:28] <esummers> I played with haskell a lot about 10 years ago, but kinda rusty ;-) now.  Rust is my first jump back in to functional programming in a long time.  I missed it
[19:21:47] <kmc> macros in GHC are a bit more of a pain than in Rust, although they're theoretically more powerful (excluding Rust's new procedural macros)
[19:22:02] <kmc> in practice a lot of people use the C preprocessor instead :<
[19:22:35] <kmc> I think there is an unfilled niche for a preprocessor that's smarter than C's but still basically operates on a textual rather than syntactic level
[19:22:38] <esummers> Yes.  Macros are easy.  Built a few of those.  Have not jumped in to syntax extensions yet, but it looks like there are now some good examples out there.
[19:22:51] <kmc> when I say that people always respond "m4!" but I think they're usually joking...
[19:24:10] <kmc> esummers: which examples have you seen?
[19:25:15] <esummers> You know I don't recall.  I think I was looking at either unit tests or maybe part of the stdlib.  It looked fairly easy to follow though.
[19:25:46] <esummers> It would be nice if there were a tutorial, but I meant just some nice clean stuff in the stdlib
[19:26:01] <esummers> fourcc is a good example
[19:26:07] <esummers> but I know I've seen others
[19:29:14] <esummers> C Macros are actually not half bad in clang with its error reporting, but nothing like working off an AST
[19:31:00] <sfackler> esummers: more examples here: https://github.com/sfackler/syntax-ext-talk/blob/gh-pages/simple-ext/lib.rs and here: https://github.com/sfackler/rust-phf/blob/master/src/phf_mac.rs
[19:32:08] <esummers> Yes I watched that live stream.  I knew I saw some good examples somewhere.  Thanks ;-)
[19:34:55] *** Joins: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net)
[19:38:06] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[19:38:31] *** Quits: gwty (gwtypc@8EB8AC29.BB7EB00B.137C914F.IP) (Connection reset by peer)
[19:41:30] *** Joins: gwty (gwtypc@E3B3B46E.89CCF027.137C914F.IP)
[19:43:59] <esummers> kmc: Actually I may look at doing a macro for making an enum with fn wrappers around constructors.  That at least removes some boilerplate.
[19:46:27] <esummers> Also looks like I may not need patern matching in some places, so maybe I can use traits to remove some of these enums.
[19:46:39] <kmc> okay
[19:46:40] <esummers> Thanks for the discussion, back to coding
[19:46:52] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Connection reset by peer)
[19:47:03] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[19:47:37] <kmc> you can always do something like  impl Item { fn asFile<'t>(&'t self) -> Option<&'t File> { ... } }
[19:48:09] <kmc> I guess Some(File { ... }) isn't much better than IFile(File { ... }) but you can also use the Option methods like map
[19:49:42] <esummers> Yeah.  I have some ideas somewhat like that.  I think I can make this work.  May be some vtables, but not a big deal in this particular case
[19:55:01] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[19:55:11] <eddyb> nmatsakis: it's safe to rebase now, right?
[19:56:36] *** Quits: pcmattman (pcmattman@moz-D9B7D938.net) (Ping timeout)
[19:57:03] *** Joins: pcmattman (pcmattman@moz-D9B7D938.net)
[19:58:30] <eddyb> nmatsakis: and yeah, I mentioned the private field problem like a week ago. I wish we had some sort of hygiene and invisibility specially for smart pointers
[19:59:25] <eddyb> or rather, that would be used by smart pointers implementing Deref to hide their implementation details
[20:00:01] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[20:01:46] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Connection reset by peer)
[20:03:43] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[20:04:56] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[20:05:51] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Input/output error)
[20:06:21] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[20:06:34] *** Quits: doener (doener@moz-C68F600D.unity-media.net) (Quit: leaving)
[20:07:08] <eddyb> kimundi: your Growable question is interesting
[20:07:23] <eddyb> because it could extend to [[T]]
[20:07:42] <eddyb> and now you have a resizable 2D matrix
[20:07:53] <eddyb> which sounds useful to get out of a... generic
[20:08:06] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[20:09:10] *** Joins: japaric (japaric@5F2F039.6B340C30.BFC118EE.IP)
[20:10:45] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[20:23:21] <eddyb> nmatsakis: the answer is obviously "CFG" here https://gist.github.com/nikomatsakis/9414596#file-pr-12610-diff-L77
[20:23:53] <eddyb> hmm, I thought ExprOrMethodCall wasn't used just for type params
[20:36:31] <strcat> nmatsakis: if you're around, the reason the non-zero pointer thing didn't land before was because the review wanted checks on the size and I didn't really think it was doable sanely
[20:36:34] <strcat> same problem as transmute
[20:37:01] <strcat> it needs to be implemented in trans (has to ask for the size) but that's too late to give a sane type error
[20:37:13] <strcat> unless it does something like check that there's a single field and it's a raw ptr
[20:37:15] <strcat> I could do that.
[20:37:41] <eddyb> we carry source Expr Spans for transmutes now or something like that
[20:37:55] <brson> eddyb: since you've been doing some 1.0 issues i gave you a column on my spreadsheet: https://docs.google.com/a/mozilla.com/spreadsheet/ccc?key=0AlWBWplsaTZvdGdSdEVzZW1BeDA5dm0zM2FFeW0ySEE#gid=0
[20:38:02] <eddyb> rusti: unsafe {std::cast::transmute::<int, i16>(0)}
[20:38:03] -rusti- <anon>:1:1: 1:1 error: transmute called on types with different sizes: int (64 bits) to i16 (16 bits)
[20:38:03] -rusti- <anon>:1 #[feature(globs, macro_rules, struct_variant)];
[20:38:03] -rusti-          ^
[20:38:03] -rusti- application terminated with error code 101
[20:38:10] <eddyb> but...
[20:38:16] <eddyb> it knows where that call is!
[20:38:30] <strcat> it doesn't know it knows
[20:38:37] <eddyb> and I saw code handling the case where it doesn't (cross-crate inlining)
[20:38:45] <eddyb> strcat: that's meh
[20:39:07] <eddyb> brson: thanks :D
[20:39:27] <eddyb> brson: I did default type params btw
[20:39:42] <eddyb> if you want to fill that column faster :P
[20:40:25] <brson> also deref?
[20:41:32] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[20:43:21] *** Quits: edwardw (edwardw@ED48E813.BF27AFA4.B9C6B12A.IP) (Quit: Leaving...)
[20:43:21] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[20:54:07] <flaper87> brson: and I'm working on the Share kind, you probably want to move that one
[20:58:34] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:00:56] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:06:03] <brson> flaper87: k
[21:06:32] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[21:07:41] <eddyb> brson: btw, do you think there's any problems here, re acrichto's concerns? https://github.com/mozilla/rust/pull/12735
[21:08:04] <acrichto> eddyb: oh no that's fine
[21:08:14] <acrichto> reasonable to expect destruction of a tcx to get the session back
[21:08:28] <eddyb> ohai :)
[21:08:46] <eddyb> okay then, I'll get to it after I clean up #12610 tomorrow
[21:09:04] <eddyb> s/clean up/apply niko's patches and write tests :P
[21:11:43] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Connection reset by peer)
[21:11:57] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[21:13:46] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[21:15:09] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[21:16:48] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[21:16:48] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/ZSG_2w
[21:16:48] <ghrust> 13rust/06auto 145b7af97 15Daniel Micay: remove usage of absolute rpaths...
[21:16:48] <ghrust> 13rust/06auto 14e5f3726 15bors: auto merge of #12754 : thestinger/rust/rpath, r=brson...
[21:16:48] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[21:18:55] <strcat> nooo, typo in the commit msg
[21:19:18] <eddyb> lol?
[21:20:11] <kimundi> acrichto: Btw, I was looking into removing vec::append[_one], and I wonder if it would be useful to provide a macro that supports the kind of syntax transformation it represents in general (mutation -> functional update)
[21:20:15] * strcat fixes
[21:20:50] <acrichto> kimundi: perhaps yeahs, seems plausible
[21:20:53] <strcat> brson: is proxy support something that would belong in libstd? with the tcp/udp implementation
[21:20:57] <kimundi> acrichto: Something I cam up with: https://gist.github.com/Kimundi/9409851
[21:21:13] <strcat> brson: it's ~100 lines of code for each of socks4, socks4a and socks5 alone, and there could probably be some code reuse
[21:21:27] <kimundi> which incidentally also supports builder patterns without returning self ;)
[21:21:34] <eddyb> was just going to say that :P
[21:21:34] <strcat> I had to implement it in C++ and realized how simple it is
[21:21:44] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[21:21:44] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14e5f3726 to 1433768c4: 02http://git.io/N3iJvQ
[21:21:44] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[21:21:44] * strcat misses it in rust-http
[21:21:47] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[21:21:47] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/S8nPdw
[21:21:47] <ghrust> 13rust/06auto 145930629 15Daniel Micay: remove usage of absolute rpaths...
[21:21:47] <ghrust> 13rust/06auto 144092108 15bors: auto merge of #12754 : thestinger/rust/rpath, r=brson...
[21:21:47] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[21:34:20] <eddyb> strcat: if it's just adaptors... it could be in a networking lib
[21:34:31] <eddyb> though I fear splitting IO out of std will make it even messier
[21:34:38] <strcat> they're not really adaptors...
[21:34:55] <eddyb> I would've thought so. the more you learn
[21:34:55] <strcat> you connect to the proxy with your socket, not the real endpoint
[21:37:51] <strcat> eddyb: you just connect to the proxy and tell it to the dstport/dstip and then use it as if you're talking to that endpoint instead (for tcp)
[21:37:55] <strcat> so yeah, it could be in a lib
[21:38:17] <strcat> but libraries like rust-http are going to need to use it *instead* of using the normal tcp lib then
[21:38:29] <strcat> you can't wrap the http connection after the fact
[21:38:31] <eddyb> can't they be generic over a stream type?
[21:38:43] <strcat> socks4 only supports tcp
[21:38:50] <strcat> socks5 supports tcp and udp
[21:38:56] <eddyb> I mean rust-http
[21:39:04] <strcat> I guess so
[21:39:11] <eddyb> with Socks5Tcp implementing AbstractTcpStream
[21:39:23] <strcat> yeah
[21:39:38] <strcat> it's ridiculously simple though
[21:39:53] <strcat> eddyb: http://sprunge.us/hVXI http://sprunge.us/DHHN that's an entire socks4a implementation.
[21:40:02] *** Joins: pnkfelix (pnkfelix@F16146EB.9D3722BB.58DC3EE6.IP)
[21:40:26] * eddyb resists saying "strcat gave dobby clothes!"
[21:40:38] <strcat> (well, I left out the part where it puts the port in network endian, and sets the address to a weird number if you put a domain name)
[21:40:49] <strcat> socks5 supports udp so it doesn't need the domain name hack
[21:40:51] <eddyb> oh you must be kidding me
[21:41:27] <strcat> eddyb: https://en.wikipedia.org/wiki/SOCKS#Protocol
[21:41:36] <strcat> socks5 has authentication so it's a bit less simple
[21:42:00] <eddyb> acrichto: can we agree that this is tiny enough to be supplied with Rust?
[21:42:10] <strcat> oh and tor just implements stream isolation with that userid field
[21:42:17] <strcat> that's how 'new identity' works
[21:42:27] <strcat> dunno what it's usually used for
[21:42:38] <eddyb> oh so old streams keep the old identity?
[21:42:44] <eddyb> well, I should know
[21:42:58] <eddyb> I wrote a Google mass query bot in PHP
[21:43:35] <strcat> eddyb: yeah, the existing streams use the old identity, setting a new userid forces it to get a new one
[21:43:50] <eddyb> for a "abuse search engine niches for profit" half-scam thing
[21:43:54] <strcat> if you don't use a userid then it may just reuse the same tunnel for a while for new streams
[21:44:05] *** Quits: bvssvni (Mibbit@moz-C4579D6F.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[21:44:09] <strcat> but I have no idea what other socks proxies do with it
[21:44:15] <strcat> I use ssh socks tunnels a lot
[21:44:36] <strcat> expose service on localhost -> tunnel through ssh
[21:44:50] <strcat> or just to bounce connects
[21:44:53] <strcat> connections*
[21:45:05] <strcat> eddyb: well yeah, that's the deficiency of rust-http atm ;)
[21:45:11] <strcat> eddyb: no socks support :(
[21:46:32] <acrichto> eddyb: socks support?
[21:48:06] <acrichto> I would love to see libio with socks support, but socks support in libstd makes me a little uncomfortable
[21:48:15] <eddyb> when it's that tiny...
[21:48:27] <eddyb> TCP is dozens of times more complex
[21:48:36] <eddyb> acrichto: but I agree on separating into libs
[21:48:44] <brson> strcat: I don't have a sense for what 'proxy support' means off hand
[21:49:02] <eddyb> acrichto: as long as it doesn't make the runtime abstraction thing much worse
[21:49:11] <strcat> acrichto: it's ~30 lines of code for socks4 and socks4a, and ~100 for socks5
[21:49:18] <strcat> in C++, would be shorter in rust
[21:49:55] <strcat> I don't really care if it's in libstd or another lib in the official repo
[21:50:44] <eddyb> acrichto: I guess you can separate task data from IO constructors
[21:51:02] <eddyb> and then IO can be standalone
[21:51:40] <eddyb> even work in kernel mode, given some IO constructors that use the kernel's VFS/networking abstractions
[21:52:26] <eddyb> (hint hint linux kernel module)
[21:56:57] <strcat> yikes, make check broke with no absolute build dir rpaths again :(
[21:57:07] * strcat will fix that in a bit..
[21:57:23] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: Textual IRC Client: www.textualapp.com)
[22:10:32] *** Quits: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru) (Quit: Leaving...)
[22:10:35] *** Quits: blank_name (blank_name@463DB555.53526368.6D228269.IP) (Quit: leaving)
[22:11:32] *** Joins: blank_name (blank_name@463DB555.53526368.6D228269.IP)
[22:13:12] <eddyb> acrichto: two days and then another three for the tests
[22:13:25] <eddyb> but I like that column :)
[22:15:43] <eddyb> or wait, is that brson? the greens are too much alike
[22:16:24] <larsberg> what did std::to_bytes become?
[22:16:31] <eddyb> poof
[22:16:39] <eddyb> larsberg: what were you using for?
[22:16:43] <eddyb> *using it
[22:17:38] <larsberg> eddyb: looks like we were implementing IterBytes
[22:17:45] <eddyb> for hashing?
[22:17:56] <eddyb> implement Hash directly now
[22:20:16] <larsberg> It looks like it was for implementing a funky version of Equiv on a newtype'd struct wrapped around string to implement a lowercase comparision without doing the to_lower conversions
[22:20:29] <larsberg> I think I probably just need to rewrite it all instead of mindlessly converting types :-)
[22:20:29] <eddyb> larsberg: that's Hash
[22:20:50] <eddyb> Equiv has to use it otherwise HashMap will get confused
[22:21:27] <eddyb> just turn that into an iterator that Hash and Equiv impls can share, if you can
[22:22:38] <larsberg> makes sense; thanks!
[22:37:38] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[22:46:24] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[22:48:39] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[22:54:34] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Input/output error)
[22:59:22] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:01:18] *** Quits: brson (brson@F16146EB.9D3722BB.58DC3EE6.IP) (Ping timeout)
[23:01:45] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:14:20] *** Joins: mawuli (mawuli@moz-A89BBCE.com.gh)
[23:19:53] *** Quits: mawuli (mawuli@moz-A89BBCE.com.gh) (Ping timeout)
[23:22:46] *** Joins: mawuli (mawuli@moz-A89BBCE.com.gh)
[23:24:31] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[23:27:30] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[23:30:45] *** kimundi is now known as zz_kimundi
[23:30:53] *** flaper87 is now known as flaper87|afk
[23:35:43] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[23:40:25] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[23:59:13] *** Quits: pnkfelix (pnkfelix@F16146EB.9D3722BB.58DC3EE6.IP) (Ping timeout)
