[00:00:39] *** Quits: tulloch (tulloch@moz-C58CFF6D.lns7.cht.bigpond.net.au) (Ping timeout)
[00:00:54] *** Joins: tulloch (tulloch@moz-C58CFF6D.lns7.cht.bigpond.net.au)
[00:00:54] <tomdale> anyway, I have an honest-to-goodness rust question
[00:01:06] <diverse> don't ask to ask, just ask
[00:01:13] <tomdale> we are trying to use rust-protobuf, but it is giving us an error when compiled with rust master
[00:01:16] <tomdale> https://gist.github.com/anonymous/6d3fb14d671624045f03
[00:01:37] <tomdale> I'm trying to figure out how to get a stack trace
[00:02:01] <diverse> are you using master?
[00:02:06] <tomdale> diverse: yes
[00:02:39] <tomdale> I think protoc ends up shelling out to the rust binary
[00:02:45] <tomdale> perhaps this is more of an lldb/gdb question
[00:03:03] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[00:03:03] *** ChanServ sets mode: +ao brson brson
[00:04:04] *** jorendorff is now known as jorendorff_away
[00:04:19] <diverse> brson: can anyone get a stack trace in gdb from compiling with rust master?
[00:05:07] <diverse> I thought they were able to
[00:05:24] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[00:06:03] *** Quits: jvns (bork@87D98E32.4046EB22.428F94DD.IP) (Ping timeout)
[00:08:54] <bstrie> pcwalton: nimrod has 68 keywords, and nimrod is hip! let's add some more keywords! :)
[00:08:57] <diverse> tomdale: i dunno, have you tried with the -Z rustc flag?
[00:09:00] <pcwalton> heh
[00:09:15] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[00:09:15] *** ChanServ sets mode: +o tjc
[00:10:17] <strcat> bstrie: well, if significantly fewer users than rust is hip ;p
[00:10:39] *** Quits: andreypopp (andreypopp@moz-7261DC60.net) (Quit: andreypopp)
[00:10:54] *** Quits: tulloch (tulloch@moz-C58CFF6D.lns7.cht.bigpond.net.au) (Ping timeout)
[00:10:54] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[00:11:06] <diverse> once rust hits 1.0, this channel will hit with a lot of hipsters
[00:11:42] *** Quits: dkeenaghan (dkeenaghan@A9F153F4.DDE28F19.986A907C.IP) (Connection reset by peer)
[00:12:04] <bstrie> strcat: almost by definition! the more obscure it is, the more hip it is
[00:12:16] <alan_andrade> marketing
[00:12:43] * aatch was a hipster before it was cool
[00:12:44] <diverse> bstrie: I guess that's why C++ is still hip, because it keeps getting more obscure by each new standard?
[00:13:27] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[00:13:27] *** ChanServ sets mode: +ao brson brson
[00:13:37] <diverse> aatch: you're still a hipster using rust, you ruster (rust + hipster)!
[00:15:56] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[00:16:11] <diverse> :P
[00:16:43] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Ping timeout)
[00:18:57] <diverse> bstrie: actually why does rust have the obsession of lowing the amount of keywords as much as possible?
[00:19:08] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[00:19:09] <diverse> KISS?
[00:19:17] <cmr> diverse: because keyword profusion is obnoxious.
[00:19:20] <strcat> reserving common words is a pain
[00:19:35] <strcat> rust reserves words like `in` and `box` so your code can't use them
[00:20:21] *** Quits: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net) (Ping timeout)
[00:22:53] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[00:23:01] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[00:25:45] *** Quits: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP) (Input/output error)
[00:27:01] *** Quits: pao (pao@moz-AF905E87.fbx.proxad.net) (Quit: pao)
[00:27:26] *** Joins: tcreate (tcreate@F8C11080.200CF5B8.9D2C3D3E.IP)
[00:27:32] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[00:28:34] <diverse> if we want to avoid adding 'crate' to the keyword list, I guess 'extern foo' would be better than 'extern crate foo', like jack suggested?
[00:28:45] <frau> anyone know where std::vec::raw::{set_len, to_ptr} went?
[00:29:01] <cmr> frau: gone. set_len is now a method, to_ptr is now an .as_ptr method.
[00:29:09] <frau> ah, as_ptr. thanks
[00:29:31] <cmr> (https://github.com/mozilla/rust/pull/10984)
[00:29:57] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[00:29:58] *** ChanServ sets mode: +ao brson brson
[00:30:00] <frau> yay cleanups
[00:30:18] <diverse> tons of cleanups recently
[00:31:30] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[00:32:52] <diverse> I'm happy about this one: https://github.com/mozilla/rust/pull/10967
[00:33:01] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[00:33:09] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[00:33:09] *** ChanServ sets mode: +ao brson brson
[00:33:46] *** Joins: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP)
[00:33:52] *** Quits: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP) (Quit: Leaving...)
[00:35:37] *** Quits: synackse (synackse__@moz-DFB8ED3B.lightspeed.wepbfl.sbcglobal.net) (Ping timeout)
[00:36:22] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[00:36:47] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[00:36:47] *** ChanServ sets mode: +ao brson brson
[00:38:03] <brson> turning on moderation has drastically cut down the attendence here :-(
[00:38:41] <diverse> brson: yeah, although do we really want to risk another botnet parade?
[00:38:56] <cmr> brson: it hasn't cut down participation any.
[00:39:02] <cmr> does idler count matter?
[00:39:09] <strcat> yes
[00:39:39] <strcat> brson: how about giving +o to everyone with commit/review access? dbaupp and sanxiyn are often around when mozillians aren't
[00:39:41] <bstrie> lurkers do read things
[00:39:45] <strcat> can flip on moderation if there's another attack
[00:39:56] <bstrie> I too was a lurker once
[00:40:11] <bstrie> (hi lurkers!)
[00:40:21] <diverse> o/
[00:40:27] *** Joins: synackse (synackse__@moz-DFB8ED3B.lightspeed.wepbfl.sbcglobal.net)
[00:40:32] <brson> cmr: the number of #rust idlers is how i measure success of the entire project
[00:40:57] <bstrie> brson: then we *definitely* need to turn off moderation, we were up to 1000+ during the botnet attacks!
[00:40:59] <strcat> or just /halfop a *bunch* of people who are regular members of the community
[00:41:19] *** Parts: cmr (moznet@moz-EC676DFE.members.linode.com) (WeeChat 0.4.2)
[00:41:20] *** Joins: cmr (moznet@moz-EC676DFE.members.linode.com)
[00:41:37] <cmr> At 292 we're still ~30% of ##linux on freenode when I was a member of it.
[00:41:46] <cmr> So clearly we're a third as popular as linux!
[00:42:09] <strcat> #archlinux is 1575 now ;p
[00:42:22] <diverse> strcat: woah really?
[00:42:27] <bstrie> that means that archlinux is 66% more popular than linux!
[00:42:30] <dbaupp> strcat: does /halfop give the +M/-M power?
[00:42:35] <dbaupp> s/the//
[00:42:37] <strcat> dbaupp: afaik it does
[00:42:48] <strcat> it just won't let you kick an op, I guess it depends on the server
[00:43:13] <dbaupp> comments https://github.com/mozilla/rust/issues/9208#issuecomment-30806500 ?
[00:43:23] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[00:43:25] <strcat> dbaupp: too deep
[00:43:33] <strcat> if it makes you have to type more it's java hell
[00:43:40] <diverse> arch became a lot more mainstream -_-
[00:43:47] <bstrie> arch isn't hip anymore
[00:43:53] <strcat> container::HashMap, etc. would be okay but... where do all the utility structs go?
[00:44:10] <bstrie> dbaupp: if we're going to shake up the stdlib, maybe now's the time to spin off libextra for good
[00:44:19] <dbaupp> strcat: are you saying that any layering other than `std::hashmap` is too deep?
[00:44:22] <diverse> bstrie: that's my point
[00:44:32] <strcat> dbaupp: std::hashmap::HashMap is too deep ;p
[00:44:32] <diverse> mainstream =! hip
[00:44:34] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[00:44:34] *** ChanServ sets mode: +ao brson brson
[00:44:42] <dbaupp> bstrie: how? we don't have a sufficiently good package manager to make that sane :(
[00:44:49] <strcat> compare to C++ -> std::map, std::unordered_map, etc.
[00:44:55] <diverse> *!=
[00:45:17] * strcat finds that rust uses way too many namespaces
[00:45:52] <dbaupp> (part of) the problem is we can't break a single modules into multiple files easily
[00:46:00] <dbaupp> so we end up with *huge* files
[00:47:05] <ChrisMorgan> dbaupp: start including files and shift to a Java-style file-per-class structure! :P
[00:47:22] <ChrisMorgan> s/class/item/ perhaps?
[00:47:24] <dbaupp> we do have include!(), fwiw
[00:47:32] <diverse> hahaha
[00:47:33] <dbaupp> rusti: include!("/etc/passwd")
[00:47:38] -rusti- pastebinned 7 lines of output: http://ix.io/9pR
[00:47:51] <strcat> include_str!
[00:47:52] <ChrisMorgan> rusti: include_str!("/etc/passwd")
[00:47:57] -rusti- pastebinned 1 lines of output: http://ix.io/8Ff
[00:48:07] <frau> O_O
[00:48:10] <dbaupp> apparently /etc/passwd parses?
[00:48:12] <dbaupp> heh
[00:49:21] <diverse> rusti: include_str!("/etc/shadow")
[00:49:26] -rusti- pastebinned 6 lines of output: http://ix.io/9pS
[00:49:33] <dbaupp> oh, it's probably only parsing the first `root` and then skipping the rest
[00:50:33] <ChrisMorgan> include_str!("/dev/sda") :P
[00:50:49] <diverse> oh god, you have to be crazy to do that!
[00:51:14] <cmr> only device exposed is urandom iirc
[00:51:16] * ChrisMorgan doesn't know if it'd work or not and isn't going to try it
[00:51:27] <cmr> rusti: include_str!("/dev/sda")
[00:51:28] <frau> output is "DO NOT MESS WITH /DEV"
[00:51:30] -rusti- pastebinned 6 lines of output: http://ix.io/9pT
[00:51:38] <ChrisMorgan> Good sandboxy.
[00:51:57] <ChrisMorgan> Still, include_str!("/dev/urandom") might not be such a good plan.
[00:52:23] <frau> hopefully just fails on bad utf8?
[00:52:38] <cmr> rusti: include_str!("/dev/urandom")
[00:52:39] <strcat> ChrisMorgan: there's nothing you can do, really
[00:52:44] -rusti- timeout triggered!
[00:52:49] <cmr> rusti: 2
[00:52:50] -rusti- 2
[00:52:58] <strcat> it's not just a chroot or something
[00:53:05] <frau> rusti: box 2
[00:53:07] -rusti- pastebinned 6 lines of output: http://ix.io/9pU
[00:53:07] <ChrisMorgan> frau: then you'd use include_bin!
[00:53:13] <cmr> frau: it's behind master.
[00:53:15] <strcat> ChrisMorgan: https://github.com/thestinger/playpen
[00:53:15] <ChrisMorgan> rusti: version
[00:53:15] -rusti- "rustc 0.9-pre (61f8c05 2013-10-24 13:01:18 -0700)"
[00:53:21] <diverse> oh
[00:53:31] <strcat> can't be updated
[00:53:35] <diverse> why not?
[00:53:44] <strcat> rusti's I/O is broken
[00:53:46] <strcat> er
[00:53:47] <diverse> :(
[00:53:48] <strcat> rust's *
[00:53:55] <frau> rusti: let box = ~; /* ;) */ box 2
[00:53:56] -rusti- pastebinned 6 lines of output: http://ix.io/9pV
[00:54:06] <diverse> frau: box isn't in that version
[00:54:43] * ChrisMorgan feels weird writing <script xlink:href="http://cdn.pubnub.com/pubnub.min.js" />, but that's what you do when your presentation is in SVG
[00:55:23] <diverse> frau: oh wait, can you do this? type box = ~; ?
[00:55:41] <frau> no way without some crazy higher kinded type system
[00:55:45] <frau> heh heh
[00:55:56] <cmr> diverse: no, it's not a type like that.
[00:56:04] <cmr> ~5 is its own expression.
[00:56:26] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[00:56:49] <frau> rusti: include_str!("/etc/motd");
[00:56:50] -rusti- ()
[00:57:02] <diverse> this I got to see
[00:57:14] <frau> rusti: include_str!("/etc/motd")
[00:57:15] -rusti- ""
[00:57:25] <diverse> that's boring
[00:57:35] <frau> rusti: include_str!("/404");
[00:57:37] -rusti- pastebinned 6 lines of output: http://ix.io/9pW
[00:58:56] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Ping timeout)
[00:59:13] <diverse> lets see what groups are there
[00:59:21] <diverse> rusti: include_str!("/etc/group")
[00:59:23] -rusti- pastebinned 1 lines of output: http://ix.io/9pX
[00:59:53] <cmr> can you abuse the bot in a query please?
[01:00:22] <strcat> it's pid 1 in a read-only root made just for it
[01:01:09] <diverse> ah it has systemd in it? Yuck!
[01:01:39] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[01:01:52] <strcat> why is that yuck? you'd rather have a bunch of racy shell scripts? anyway it doesn't have an init system
[01:03:00] <diverse> I rather have a bunch of racy scripts, that's a single binary blog that handles everything, especially when you run into bugs with it
[01:03:13] <strcat> diverse: you know bash is a binary blob right?
[01:03:16] <diverse> s/that's/than/
[01:03:17] <strcat> anyway systemd is a set of libraries
[01:03:21] <strcat> and a set of binaries
[01:03:26] <strcat> it's not a 'single binary blob'
[01:10:25] *** Quits: synackse (synackse__@moz-DFB8ED3B.lightspeed.wepbfl.sbcglobal.net) (Ping timeout)
[01:12:09] <frau> how do I mark a bunch of items as #[allow(dead_code)] at once?
[01:12:24] <frau> they're pub constants
[01:12:33] <strcat> frau: and the module they're in is public?
[01:12:48] *** Quits: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: dherman)
[01:12:57] <frau> strcat: no idea, I guess not?
[01:13:19] <cmr> frau: unless it's a bug in dead code (which it probably isn't, at this point), they're not actually publically visible.
[01:13:31] <strcat> frau: the whole path needs to be public for something to be usable outside of the crate
[01:13:57] <frau> hmm okay
[01:15:06] <frau> okay cool I made it pub in the crate and I'm good
[01:16:15] *** Joins: synackse (synackse__@moz-DFB8ED3B.lightspeed.wepbfl.sbcglobal.net)
[01:18:44] *** Joins: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net)
[01:21:25] <frau> any reason why there's a #[cfg(linux)] shortcut but not one for macos?
[01:21:57] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[01:22:12] <cmr> there is.
[01:22:34] <frau> #[cfg(macos)]?
[01:22:39] <frau> breaks for me
[01:22:47] <dbaupp> macosx, possibly
[01:22:50] <cmr> I thought there was...
[01:22:54] <cmr> and I thought it was macos
[01:23:04] <frau> I'm using target_os = "macos" everywhere
[01:23:28] <frau> osx, macos, macosx all don't seem to work as a cfg shortcut
[01:23:42] <Luqman> i don't think linux works either?
[01:23:53] <Luqman> the shortcut is based on target_family afaik
[01:24:00] <Luqman> so both linux and os x would be unix
[01:24:32] <frau> hmm, I have #[cfg(linux)] in my code in various places, although I haven't actually tested on linux for a little while
[01:24:54] <Luqman> yea, that wouldn't work
[01:25:01] <frau> maybe I wrote them blindly
[01:25:09] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[01:25:09] <dbaupp> there's no cfg(linux) in mozilla/rust, fwiw
[01:25:21] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Input/output error)
[01:25:30] <Luqman> https://github.com/mozilla/rust/blob/master/src/librustc/driver/driver.rs#L95
[01:25:41] <Luqman> yep, it's the shortcut is for target_family
[01:26:05] <frau> okay cool
[01:26:06] <diverse> well I don't know how systemd is currently managing it's tools, but in the past you had to separate the parts yourself, like udev, and there was plans that poettering made about merging dbus and udev into systemd as one, basically forcing down other Linux distro's throat to use systemd in order to be conformant (which is why the gentoo developers are developing eudev so it can a more system-init
[01:26:08] <diverse> friendly which ever a distro chooses), that's what I find yucky about systemd from that point of view. Systemd has known to have bugs and the only way to fix them is to get the upstream source fixed which the authors were less insistent on even when patches were provided. Bash had the benefit of fixing holes on the spot with scripts, you can't have that with systemd. So I rather select specific
[01:26:10] <diverse> and more stable parts on my system, for instance maybe I would rather run `runit` which has the parallization benefits that systemd has, but only smaller and much more stable. If you want to run systemd, that's your choice, but I don't like what poettering is doing and I'm not touching his software. That is my opinion.
[01:26:41] <strcat> diverse: eudev isn't an official gentoo project.
[01:26:51] <diverse> well they are still working on it
[01:26:56] <strcat> gentoo still defaults to udev, and will continue to default to it
[01:27:13] <diverse> probably the udev before it got merged
[01:27:16] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:27:17] <strcat> diverse: no
[01:27:35] <strcat> diverse: anyway I suggest learning what you're talking about before spewing BS about it.
[01:27:50] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[01:27:50] *** ChanServ sets mode: +ao brson brson
[01:28:24] <strcat> freebsd develops the entire kernel/userland in one repo - do you hate that too? linux has projects like shadow rotting without proper maintenance
[01:28:25] *** Joins: adu (ajr@moz-94B34CD8.washdc.fios.verizon.net)
[01:28:38] <diverse> strcat: sigh, you don't get it.
[01:29:12] <strcat> diverse: no, you don't get it. you haven't educated yourself about what systemd actually is
[01:29:22] <strcat> runit does *not* work like systemd does
[01:29:38] <strcat> and systemd doesn't force anyone to use it, and that is not a goal
[01:30:02] <strcat> and you're making stuff up about patches being rejected
[01:30:43] <strcat> says a lot that the detractors of systemd only have FUD to spread about it and nothing factual
[01:30:53] <brson> strcat: please calm down
[01:36:04] <strcat> I thought we didn't bash and spread FUD about other projects here
[01:37:17] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[01:37:41] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[01:37:58] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[01:38:31] <diverse> I'm sorry for bashing, the way I did.
[01:38:49] *** Joins: AvianFlu (AvianFlu@moz-31F97978.nyc.res.rr.com)
[01:39:43] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[01:44:24] <o11c> I probably shouldn't say anything, but as someone shipping a daemon, I *want* systemd to "force" everyone to use it.
[01:44:52] <diverse> fine
[01:49:21] <pcwalton> why is Gc<T> a separate struct?
[01:49:25] <pcwalton> instead of just Gc<T> = @T
[01:50:21] <o11c> pcwalton: isn't the plan to remove @T entirely from the langauge? The feature-gating is only a temporary thing?
[01:50:47] <cmr> pcwalton: so it doesn't inherit the weird special-cased moving/autoborrowing, afaik.
[01:52:04] <cmr> Yurume: you're lifthrasiir, right?
[01:53:15] <pcwalton> ok
[01:53:17] <jack> ChrisMorgan: MAX_LINE_LENGTH doesn't seem to be used in rust-http. dead_code is yelling about it.
[01:53:50] <jack> ChrisMorgan: same for BUF_SIZE and a few other static.s
[01:53:56] <Yurume> cmr: yes
[01:54:02] <ChrisMorgan> jack: yep, I haven't commented out or removed those things yet. A couple of them will be being needed again soon, though.
[01:54:12] <cmr> Yurume: is rust-encoding being intentionally kept behind master?
[01:54:50] <jack> ChrisMorgan: +1 to commenting them out then. warning free is good :)
[01:55:12] <Yurume> cmr: yes, my primary project which targets 0.8 (for now) uses it.
[01:55:26] <cmr> ok
[01:55:30] <ChrisMorgan> jack: a lot of rust-http has been experimental thus far; I'm just about ready now to redesign it from the ground up (don't worry, the API exposed that is normally being used will not be much different)—the sort of designing where you stay away from a computer (!) when doing it
[01:56:01] <Yurume> I'll update master to rust-0.9-pre branch once 0.9 is up
[01:57:07] *** Quits: bytewise (bytewise@moz-B3FA4F1E.adsl.alicedsl.de) (Quit: Leaving)
[01:57:33] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:02:17] *** Quits: synackse (synackse__@moz-DFB8ED3B.lightspeed.wepbfl.sbcglobal.net) (Ping timeout)
[02:04:41] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[02:04:50] *** Joins: synackse (synackse__@moz-DFB8ED3B.lightspeed.wepbfl.sbcglobal.net)
[02:06:38] *** Quits: snowp (snowp@4DE2260B.6E91F788.2CFD4520.IP) (Quit: Changing server)
[02:07:53] <frau> oh no. I upgraded my code and I'm getting a mysterious "Non-aligned pointer being freed" crash
[02:08:01] <frau> time to audit every unsafe block
[02:08:56] <frau> (upgraded to rust master, that is)
[02:13:29] <frau> C bridge boo-boo on my part, rust is not to blame :)
[02:15:59] *** Quits: frau (frau@A432E5CC.191304CB.C579BC3E.IP) (Ping timeout)
[02:19:41] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[02:20:44] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[02:22:02] *** Quits: tcreate (tcreate@F8C11080.200CF5B8.9D2C3D3E.IP) (Client exited)
[02:22:38] *** Joins: tcreate (tcreate@F8C11080.200CF5B8.9D2C3D3E.IP)
[02:24:26] *** Quits: tcreate (tcreate@F8C11080.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[02:24:53] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[02:25:16] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Ping timeout)
[02:28:22] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[02:28:22] *** ChanServ sets mode: +o tjc
[02:29:10] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[02:29:10] *** ChanServ sets mode: +ao pcwalton pcwalton
[02:30:57] *** Joins: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP)
[02:31:39] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[02:36:39] *** Quits: Earnestly (earnest@88884C6.A3735F9C.39C00A7A.IP) (Ping timeout)
[02:49:56] *** Quits: echristo (echristo@A2012DB6.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[02:51:50] *** Quits: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net) (Quit: leaving)
[03:01:55] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:03:06] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[03:03:07] *** ChanServ sets mode: +o tjc
[03:03:30] <diverse> strcat, if you can read this, please come back :(
[03:07:02] *** Quits: ziad (ziad@B20586FB.BDB3D91.6E370BFC.IP) (Quit: ziad)
[03:09:30] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[03:17:57] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[03:22:41] *** Quits: o11c (ben@moz-C0FD33EF.a357.priv.bahnhof.se) (Ping timeout)
[03:22:56] *** Joins: o11c (ben@moz-C0FD33EF.a357.priv.bahnhof.se)
[03:24:03] *** Quits: joelteon (bzzt@moz-317E8D0C.io) (Quit: I'm out)
[03:24:04] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[03:24:19] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Input/output error)
[03:24:22] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[03:24:41] *** sam113101 is now known as sam113101_afk
[03:24:43] *** Quits: o11c (ben@moz-C0FD33EF.a357.priv.bahnhof.se) (Ping timeout)
[03:25:09] *** Joins: o11c (ben@moz-C0FD33EF.a357.priv.bahnhof.se)
[03:26:10] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Ping timeout)
[03:26:43] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[03:27:19] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[03:28:49] *** Quits: nomme (nomme@moz-A30B1161.a336.priv.bahnhof.se) (Ping timeout)
[03:28:58] *** Quits: o11c (ben@moz-C0FD33EF.a357.priv.bahnhof.se) (Ping timeout)
[03:29:37] *** Joins: nomme (nomme@moz-A30B1161.a336.priv.bahnhof.se)
[03:30:09] *** Joins: o11c (ben@moz-C0FD33EF.a357.priv.bahnhof.se)
[03:33:02] *** Joins: sankha93 (Instantbir@ED70E24B.199B3CEE.EFB84E89.IP)
[03:33:02] *** Quits: sankha93 (Instantbir@ED70E24B.199B3CEE.EFB84E89.IP) (Client exited)
[03:34:44] *** Quits: Cork (Cork@moz-352B7E7B.a370.priv.bahnhof.se) (Ping timeout)
[03:36:09] *** Quits: o11c (ben@moz-C0FD33EF.a357.priv.bahnhof.se) (Ping timeout)
[03:36:20] *** Joins: o11c (ben@moz-C0FD33EF.a357.priv.bahnhof.se)
[03:37:10] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Quit: ziad)
[03:37:33] *** Joins: Cork (Cork@moz-352B7E7B.a370.priv.bahnhof.se)
[03:38:58] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:40:46] *** Quits: Cork (Cork@moz-352B7E7B.a370.priv.bahnhof.se) (Ping timeout)
[03:40:53] *** Quits: o11c (ben@moz-C0FD33EF.a357.priv.bahnhof.se) (Ping timeout)
[03:40:56] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[03:41:13] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[03:41:13] *** ChanServ sets mode: +ao brson brson
[03:41:53] *** Joins: o11c (ben@moz-C0FD33EF.a357.priv.bahnhof.se)
[03:42:11] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[03:42:11] *** ChanServ sets mode: +o tjc
[03:43:04] *** Joins: Cork (Cork@moz-352B7E7B.a370.priv.bahnhof.se)
[03:43:12] <o11c> is it just me or is this server ping-timeout'ing a lot
[03:43:39] <cmr> I had one, first in a while.
[03:43:57] <o11c> I've just had about 5 ... hm, I just got one on freenode too
[03:46:19] *** Quits: nomme (nomme@moz-A30B1161.a336.priv.bahnhof.se) (Ping timeout)
[03:46:40] *** Quits: o11c (ben@moz-C0FD33EF.a357.priv.bahnhof.se) (Ping timeout)
[03:46:53] *** Quits: Cork (Cork@moz-352B7E7B.a370.priv.bahnhof.se) (Ping timeout)
[03:47:46] *** Joins: Cork (Cork@moz-352B7E7B.a370.priv.bahnhof.se)
[03:48:52] *** Joins: nomme (nomme@moz-A30B1161.a336.priv.bahnhof.se)
[03:49:24] *** Joins: o11c (ben@moz-C0FD33EF.a357.priv.bahnhof.se)
[03:50:09] <diverse> this is killing me...
[03:50:31] *** Joins: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP)
[03:52:04] *** Quits: o11c (ben@moz-C0FD33EF.a357.priv.bahnhof.se) (Ping timeout)
[03:52:42] <ezyang> Borrow checker question. I've been playing around with the libextra treemap implementation, in particular, this fragment: https://gist.github.com/ezyang/8017024 
[03:52:54] *** Quits: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP) (Input/output error)
[03:53:18] <ezyang> This code will borrow check only if the lexical scope assigned to the explicit &mut save.left borrow is confined to the single line, and not if it expands over the scope 
[03:53:33] <ezyang> Critically, the type of 'inserted' has a role to play 
[03:53:42] *** Joins: o11c (ben@moz-C0FD33EF.a357.priv.bahnhof.se)
[03:54:25] <ezyang> http://static.rust-lang.org/doc/master/src/extra/home/rustbuild/src/rust-buildbot/slave/doc/build/src/libextra/treemap.rs.html#737 
[03:54:40] *** Quits: nomme (nomme@moz-A30B1161.a336.priv.bahnhof.se) (Ping timeout)
[03:54:42] <ezyang> In the original code, inserted is an Option<V>, so that borrow checks fine 
[03:54:54] <brson> the meetup seems to be broadcasting now https://air.mozilla.org/rust-meetup-december-2013/
[03:54:59] <brson> still playing muzak
[03:55:14] *** Joins: nomme (nomme@moz-A30B1161.a336.priv.bahnhof.se)
[03:55:34] <ezyang> If I try to modify inserted to pass a &mut V, this does not work. This is good, because V is accessible through save, so the borrow checker legitimately rejects it 
[03:55:48] <ezyang> What I don't understand, however, is why returning a & V is not acceptable. 
[03:56:11] *** Quits: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:56:24] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:57:06] <diverse> brson: is this a live stream?
[03:57:39] <brson> diverse: yep
[03:57:53] *** Quits: nomme (nomme@moz-A30B1161.a336.priv.bahnhof.se) (Ping timeout)
[03:58:05] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[03:58:11] *** Quits: Cork (Cork@moz-352B7E7B.a370.priv.bahnhof.se) (Ping timeout)
[03:58:12] <diverse> darn, I'm still getting the "many voices, one mozilla" sign
[03:58:18] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[03:58:18] *** ChanServ sets mode: +ao pcwalton pcwalton
[03:58:19] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[03:58:19] *** ChanServ sets mode: +o tjc
[03:58:29] <brson> that's all i see too
[03:58:33] <brson> assuming it will do something useful soon
[03:58:40] <ChrisMorgan> diverse: that's correct—ten minutes ago it was not streaming at all.
[03:58:43] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[03:58:48] *** Quits: a_m0d|home (a_m0d@moz-3E21531B.acanac.net) (Quit: Leaving.)
[03:59:11] * ChrisMorgan hopes his remote presentation works well
[03:59:16] <jack> Rust meetup streaming: https://air.mozilla.org/rust-meetup-december-2013/
[04:00:06] *** Joins: Cork (Cork@moz-352B7E7B.a370.priv.bahnhof.se)
[04:00:14] <diverse> ah it starts!
[04:00:26] *** Joins: nomme (nomme@moz-A30B1161.a336.priv.bahnhof.se)
[04:00:44] <SiegeLord> Hah, it's a double feature
[04:01:13] <dbaupp> ChrisMorgan: are you presenting?
[04:01:17] <ChrisMorgan> Yep
[04:01:33] <dbaupp> awesome
[04:01:36] <diverse> ChrisMorgan: have fun doing it
[04:01:48] <sellout> Oh man, I didn’t realize this was happening. i’ll try to watch as much as possible :)
[04:02:16] *** Joins: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net)
[04:02:48] *** Joins: ktt3ja (ktt3ja@moz-54586A12.washdc.fios.verizon.net)
[04:03:40] <sellout> I hope this is going to be available later, too?
[04:04:12] *** Quits: Cork (Cork@moz-352B7E7B.a370.priv.bahnhof.se) (Ping timeout)
[04:04:21] *** Quits: o11c (ben@moz-C0FD33EF.a357.priv.bahnhof.se) (Ping timeout)
[04:04:57] <brson> sellout: it will
[04:05:18] *** Quits: nomme (nomme@moz-A30B1161.a336.priv.bahnhof.se) (Ping timeout)
[04:06:03] *** Joins: o11c (ben@moz-C0FD33EF.a357.priv.bahnhof.se)
[04:07:57] <ChrisMorgan> (Yes, you sure will have a hard time writing an HTTP server in Rust at present. I don't recommend it!)
[04:08:59] <dbaupp> ChrisMorgan: do you have any experience in that area? :P
[04:09:22] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[04:09:31] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[04:10:18] *** Joins: glob (glob@moz-DF237567.glob.com.au)
[04:11:35] <Eridius> did I miss anything important in the last minute?
[04:11:38] <Eridius> also, we have a spec? ;)
[04:11:45] <sanxiyn> Eridius: Not really
[04:11:55] <sanxiyn> We do have Rust Reference Manual
[04:12:02] <glob> sorry, i joined late.  who's currently speaking?
[04:12:10] <Eridius> Steve Klabnik
[04:12:16] <glob> ty
[04:12:27] *** Joins: erickt1 (Adium@moz-C07D5168.p2p.sfo1.mozilla.com)
[04:12:37] *** Joins: Cork (Cork@moz-352B7E7B.a370.priv.bahnhof.se)
[04:12:42] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[04:13:30] <ezyang> Here's a pared down version of my earlier question: https://gist.github.com/ezyang/8017174 
[04:13:48] <ezyang> s/-> &'a int/-> int/ and then it borrow checks 
[04:14:27] <brson> this would be an easy issue related to what steve is talking about https://github.com/mozilla/rust/issues/10838
[04:14:36] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[04:15:21] <erickt1> if anyone has a question for steve, just ping me and i'll ask it
[04:15:24] <ezyang> (The question is: why?) 
[04:15:43] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[04:15:45] <ezyang> but I suppose everyone is paying attention to teh meetup :) 
[04:16:36] *** Joins: mark_edward (quassel@moz-E0F1AB04.hsd1.in.comcast.net)
[04:16:46] <mark_edward> ChrisMorgan: ping
[04:16:55] <dbaupp> ezyang: because one could, in theory, invalidate r by overriding z via x
[04:17:07] <jack> mark_edward: as ChrisMorgan is speaking next, i assume he's not super available at the moment :)
[04:17:09] <ChrisMorgan> mark_edward: I'll get back to you in an hour or two; we're in the middle of the meetup streaming at present and I'll be speaking soon
[04:17:16] <jack> if he's like me, he's furious hacking on his slides :)
[04:17:32] <ChrisMorgan> jack: nah, they're already loaded on the machine there and I didn't build remote reloading into it
[04:17:37] <mark_edward> oh i see, i didn't know people were speaking about things!
[04:17:58] <jack> mark_edward: https://air.mozilla.org/rust-meetup-december-2013/
[04:17:59] <dbaupp> ezyang: i.e. z == S(~Z(1)) => *x = Z(1) => bam, r is pointing to freed memory
[04:18:03] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[04:18:03] *** ChanServ sets mode: +o tjc
[04:18:24] <ezyang> dbaupp: OK, that makes sense. 
[04:18:32] *** Joins: tulloch (tulloch@moz-60EB9D6E.lnse3.ken.bigpond.net.au)
[04:18:36] *** Quits: Cork (Cork@moz-352B7E7B.a370.priv.bahnhof.se) (Ping timeout)
[04:18:51] <diverse> Steve is just awesome so far
[04:18:56] <ezyang> Hm, I don't really see how to work around this 
[04:19:12] <ChrisMorgan> OK, now he's getting closer to my territory :-)
[04:19:23] *** Quits: synackse (synackse__@moz-DFB8ED3B.lightspeed.wepbfl.sbcglobal.net) (Ping timeout)
[04:19:24] <dbaupp> ezyang: do you need x to be &mut ratehr than &?
[04:19:26] <diverse> ChrisMorgan: \o/
[04:19:26] <ChrisMorgan> Because *that's* what I'm focusing on more.
[04:20:32] <ezyang> dbaupp: Yeah, in treemap, the middle line is responsible for rebalancing thet ree 
[04:21:08] *** Joins: Cork (Cork@moz-352B7E7B.a370.priv.bahnhof.se)
[04:21:17] <dbaupp> ezyang: I ah, so you're never causing (the equivalent of) r to point to freed memory because you're just moving things around, not dropping them?
[04:21:25] <dbaupp> s/I//
[04:22:18] <ezyang> yeah, but atm the type is not expressive enough to express that. 
[04:22:29] *** Joins: synackse (synackse__@moz-DFB8ED3B.lightspeed.wepbfl.sbcglobal.net)
[04:24:40] <ChrisMorgan> YAY! Kill the wiki!
[04:24:45] <erickt1> lol
[04:24:53] <diverse> hahaha
[04:25:01] *** Quits: Cork (Cork@moz-352B7E7B.a370.priv.bahnhof.se) (Ping timeout)
[04:25:15] *** Quits: o11c (ben@moz-C0FD33EF.a357.priv.bahnhof.se) (Ping timeout)
[04:27:08] *** Joins: o11c (ben@moz-C0FD33EF.a357.priv.bahnhof.se)
[04:27:09] * ChrisMorgan memorises Unicode codepoints by accident
[04:27:16] <dbaupp> ezyang: you got a mention! 
[04:27:17] <diverse> ezyang: steve is talking about your post :P
[04:27:21] <ezyang> I heard! 
[04:27:51] <ezyang> I think the correct answer here is to improve the compiler warnings 
[04:27:58] <ezyang> I have some ideas 
[04:28:59] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[04:29:39] *** Joins: Cork (Cork@moz-352B7E7B.a370.priv.bahnhof.se)
[04:30:52] <dbaupp> Does Steve think that the community currently has this adversarial problem?
[04:31:25] <ChrisMorgan> There's also more personal credit in writing a blog post, compared to contributing upstream.
[04:31:37] <ezyang> Yeah, blog versus upstream is a tough thing 
[04:32:11] <diverse> go ChrisMorgan!
[04:33:31] <Eridius> speaking of docs, I'd love to see a site like godoc.org but for Rust, where documentation for third-party libraries would be automatically generated
[04:33:47] <dbaupp> Eridius++
[04:33:50] <ezyang> TECHNOLOGY!! 
[04:33:57] <SiegeLord> There's already a website like that :P
[04:33:59] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[04:34:13] <Eridius> SiegeLord: oh?
[04:34:15] <SiegeLord> Not submitting anything there until it gets better CSS though
[04:34:17] <dbaupp> heh, an australian accent on the internet :O
[04:34:21] <Eridius> >_<
[04:34:37] <diverse> it's a good accent
[04:35:05] <SiegeLord> Eridius, It's in the topic... cmr is maintaining it
[04:35:11] *** Joins: DeTeam (DeTeam@moz-2B3D845F.dyn.broadband.iskratelecom.ru)
[04:35:12] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[04:35:18] <Eridius> what, "package docs"?
[04:35:31] <SiegeLord> Yes... unless I misunderstood what you meant
[04:35:33] <Eridius> hah, the first page I clicked on, sqlite, is a 404
[04:35:55] <Eridius> SiegeLord: godoc.org allows you to enter any go package, including third-party libraries. If it hasn't seen it before, it will download the library and generate docs, and then present it
[04:36:01] *** Quits: adu (ajr@moz-94B34CD8.washdc.fios.verizon.net) (Quit: adu)
[04:36:05] <SiegeLord> Heh
[04:36:09] <Eridius> so nobody needs to add packages or anything. It provides docs for all 3rd party libraries
[04:36:22] <Yurume> Eridius: http://doc.octayn.net/ I think
[04:36:33] <SiegeLord> Darn... my beautiful docs might get coopted by some other website :'(
[04:36:37] <Eridius> Yurume: that doesn't appear to be automated. And at least 2 of the linked packages are 404
[04:36:46] <Yurume> ...and yeah, it has some broken links
[04:36:50] <Yurume> I don't know why
[04:37:23] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[04:37:27] <Eridius> hrm, I think I missed something in the talk. Why is he talking about Java 7 docs?
[04:37:30] *** Quits: tulloch (tulloch@moz-60EB9D6E.lnse3.ken.bigpond.net.au) (Ping timeout)
[04:37:47] <dbaupp> Eridius: comparing to other languages
[04:37:52] <Eridius> I see
[04:40:28] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Client exited)
[04:40:39] <diverse> practical docs +1
[04:42:16] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[04:42:16] *** ChanServ sets mode: +o tjc
[04:43:27] *** sam113101_afk is now known as sam113101
[04:44:30] <Yurume> for what it's worth: I don't know why, but sometimes enum variants are not properly linked from the search view.
[04:44:47] <Yurume> (and some others, but I think enum variants are especially severe in this regard)
[04:46:12] *** Quits: sanxiyn (tinuviel@F32F8A59.7DD15B19.A3B1F2EE.IP) (Quit: Bye)
[04:49:08] *** Joins: adu (ajr@moz-94B34CD8.washdc.fios.verizon.net)
[04:53:48] <diverse> hahaha, everybody wants the wiki to die
[04:54:47] <SiegeLord> Sort of... weird to rely on a python tool to generate the docs...
[04:54:57] <SiegeLord> I wonder if it has a good CSS
[04:55:31] <diverse> well his point was that sphinx has good semantics for the best documentaion
[04:56:26] *** Quits: canhtak (canhtak@moz-258236CD.wl.t.ulaval.ca) (Quit: canhtak)
[04:57:11] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[04:57:28] <diverse> Oh man, I would love to buy a programming book on Rust on Amazon
[04:57:31] <jack> early for rust book. you'd have ot update it every month in major ways
[04:57:50] <diverse> well I think he meants after 1.0
[04:58:14] <SiegeLord> They wrote a book for D before it stabilized... it's not a true impediment
[04:58:21] <SiegeLord> Although Rust changes faster than D does
[04:58:32] <diverse> (although D never truly stabilized)
[04:58:34] <SiegeLord> /did
[04:58:45] <SiegeLord> D1.0 did, and then they killed it
[04:58:59] <diverse> The book was about D2 though
[04:59:05] <SiegeLord> There are 2 D books
[04:59:11] <SiegeLord> The first one was about D1.0
[04:59:28] <ezyang> I mean, the correct thing to do is release it online, right? :) 
[04:59:51] <SiegeLord> Some people like a solid copy
[04:59:53] <Yurume> one can do like teh Unicode Standard!
[04:59:54] <ezyang> why does hashmap have find_or_insert_with as well as find_or_insert? 
[05:00:17] <diverse> I'm down with a pdf release
[05:02:01] <Eridius> ezyang: so you can avoid doing the work of constructing the value to insert if it's not cheap
[05:02:43] *** Quits: AvianFlu (AvianFlu@moz-31F97978.nyc.res.rr.com) (Connection reset by peer)
[05:02:53] <erickt1> wooo, i can't believe that worked!
[05:02:53] <Yurume> I think the current HashMap API is too verbose
[05:03:23] *** Quits: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:03:26] <ezyang> Eridius: Got it 
[05:03:30] *** Joins: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net)
[05:03:55] <ChrisMorgan> erickt1: yep, it worked well. Thanks!
[05:04:00] <Eridius> erickt1: \o.
[05:04:05] <Eridius> s,.,/,
[05:04:11] <erickt1> hehe
[05:04:17] <ChrisMorgan> There, now my next talk can be about rust-http.
[05:04:26] <brson> ChrisMorgan: excellent work!
[05:04:31] <ChrisMorgan> Thanks!
[05:04:34] <Yurume> Eridius: s#s,\.,/,#s,\\.,/,#
[05:04:49] <Eridius> Yurume: >_<
[05:05:04] <Eridius> ChrisMorgan: the takeaway I got from your talk is we should write a second implementation of reStructured Text in Rust
[05:05:31] <erickt1> yep, all you international rustaceans can start shuddering in fear knowing that someday I'll be knocking on your door to present something 
[05:05:48] *** Joins: tulloch (tulloch@moz-926A05DA.lnse4.cht.bigpond.net.au)
[05:05:48] <diverse> erickt1: we're not crabs -_-
[05:06:12] <erickt1> rustics then!
[05:06:13] <ChrisMorgan> Eridius: it'd be a fun and useful project, but I don't think it's a good starting point for a Rust documentation project.
[05:06:27] <ChrisMorgan> No, rustic is for code. Rustaceans is good for the people.
[05:06:45] <Yurume> ruster
[05:06:50] <diverse> Yurume: +1
[05:06:51] <erickt1> rustists
[05:06:53] *** Quits: synackse (synackse__@moz-DFB8ED3B.lightspeed.wepbfl.sbcglobal.net) (Ping timeout)
[05:06:56] <aatch> Oxidants
[05:07:05] <Yurume> lol
[05:07:23] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[05:08:10] * ChrisMorgan liked the rather rare "snake charmers" in Python
[05:08:32] <Yurume> Pythonistas?
[05:08:43] <Eridius> Pythoneceans
[05:08:59] <diverse> snake-crabs
[05:10:04] <diverse> rustists sounds good. Steve could do a Ruby for Rustists tutorial :P
[05:10:32] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[05:10:43] <Eridius> whee, bash glob alternatives syntax!
[05:10:59] * glob votes for not bashing glob
[05:11:11] <erickt1> hahaha
[05:12:18] <dbaupp> will we have select on a vector of ports?
[05:12:21] <erickt1> ooh select!(…) is awesome…
[05:12:35] <Eridius> how do you perform this same functionality without the macro?
[05:13:17] <erickt1> Eridius: It'd still be useful for when you got a bunch of ports that return the same type
[05:13:58] <Eridius> erickt1: hmm? I'm asking how to do a select right now since the macro hasn't landed
[05:14:07] <erickt1> oh, sorry, that I don't know
[05:14:59] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[05:14:59] *** ChanServ sets mode: +o jdm
[05:15:27] <Eridius> hrm, are Go's channels still faster largely because they have a bounded size?
[05:15:40] *** Quits: tulloch (tulloch@moz-926A05DA.lnse4.cht.bigpond.net.au) (Ping timeout)
[05:15:42] <dbaupp> Eridius: didn't he say you could copy the macro out?
[05:15:55] <Eridius> dbaupp: yeah, but copy it from where?
[05:15:59] *** Joins: dalaing (dalaing@moz-5057F137.dyn.iinet.net.au)
[05:17:12] <Eridius> ah hah, std::comm
[05:17:20] *** Quits: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:17:22] *** Quits: DeTeam (DeTeam@moz-2B3D845F.dyn.broadband.iskratelecom.ru) (Quit: DeTeam)
[05:17:49] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Quit: ChatZilla 0.9.90.1 [Firefox 25.0.1/20131112160018])
[05:18:17] <Eridius> ah, the macro uses std::comm::Select
[05:18:30] <Eridius> creates a new Select, adds all the referenced ports, and then waits on it
[05:19:10] <diverse> libgreen!
[05:19:20] <diverse> sounds eco-friendly
[05:21:03] <steveklabnik> diverse: thanks <3 :)
[05:21:31] <diverse> steveklabnik: np, and good job btw!
[05:22:04] <erickt1> steveklabnik: yeah, great work!
[05:22:29] <steveklabnik> ezyang: yeah, I don't think your post was bad, I really loved it. I just hope that the borrow checker has no bugs ;)
[05:22:43] <steveklabnik> dbaupp: i don't think that we are, no, but I just really really want to make sure that it doesn't end up that way
[05:22:49] <ChrisMorgan> … except actually it won’t compile because of the curly quotes :P
[05:23:11] <dbaupp> rusti: mod test { extern mod extra, syntax; }
[05:23:14] -rusti- pastebinned 6 lines of output: http://ix.io/9qm
[05:23:20] <ezyang> steveklabnik: Me too. It's one of those posts that I hope becomes obsolete as quickly as possible 
[05:23:59] <Eridius> 1:1 will probably become default? That's surprising
[05:24:16] <steveklabnik> erickt1: thanks :)
[05:24:43] <Eridius> if 1:1 is expected to become default, or at least commonplace, then we really need a better way of catching failure than task::try
[05:24:52] <ChrisMorgan> Eridius: why?
[05:24:52] <Eridius> because spawning a native thread to handle task failure is rather excessive
[05:25:31] <Eridius> offhand I could imagine task::try keeping the same API (where you give it a proc), but using some mechanism of exception catching under the hood instead. That should behave largely the same, except without spawning an OS thread
[05:25:52] <ChrisMorgan> steveklabnik: I liked your presentation very much (and became more and more pleased as you progressed, because it fitted in very well with mine).
[05:25:56] <dbaupp> Eridius: on linux at least it's (apparently) not *super* expensive
[05:26:07] <steveklabnik> ChrisMorgan: yeah, it was fun to see how they worked
[05:26:15] <Eridius> dbaupp: maybe not horribly expensive, but certainly more expensive than it should be to catch failure
[05:26:18] <steveklabnik> i will admit that i find reST to be a bit annoying, but I could get over it :)
[05:26:40] <jack> surprised M:N won't be the default.
[05:27:06] <steveklabnik> i also really liked your talk, chris. I wasn't trying to knock rust-http, just acknowledge that it's not done yet ;) :)
[05:27:06] <Eridius> steveklabnik: are you going to be at the next meetup? My fiancée wanted to meet you, but didn't go today because I'm sick :/
[05:27:20] <steveklabnik> yes, I will be at the next one. at least currently. I hope. 
[05:27:31] <steveklabnik> I have to go to CodeMash to give a Rust talk, so as long as it's not that week
[05:27:38] <Eridius> ok
[05:27:45] <ChrisMorgan> steveklabnik: I also noted in here at this point that I agreed with you entirely—making a web project in Rust *is* painful, and I would not recommend it.
[05:28:09] <Eridius> hrm, stack allocation... I suppose making task::try not spawn a new task even in M:N might be nice
[05:28:10] <steveklabnik> :D
[05:28:33] <ChrisMorgan> Ooh, something's trying to get attention!
[05:28:37] <steveklabnik> heheh
[05:28:42] <dbaupp> Eridius: also, 1:1 makes it far smoother to call C and OS functions.
[05:28:43] <ChrisMorgan> Unfortunately it can't jump very high. Poor little thing.
[05:29:07] <Eridius> dbaupp: I thought dropping segmented stacks made that simpler. Unless the C function cares specifically what thread it's called from
[05:29:22] <jack> dbaupp: you also get preemption
[05:29:33] <dbaupp> Eridius: OS-thread blocking calls don't interact well with a user-space scheduled tasks
[05:29:38] <jack> but that is not a good thing really. it means the semantics of tasks are going to be wildly different.
[05:29:40] <Eridius> dbaupp: ah yeah
[05:31:01] <Eridius> I haven't launched minecraft in ages
[05:31:05] <steveklabnik> me neither
[05:31:11] <erickt1> drat, did anyone catch his server name?
[05:31:11] * glob looks down has his minecraft t-shirt
[05:31:12] <steveklabnik> before they added hell o_O
[05:32:06] <steveklabnik> ... once you go down this road, you end up writing a full client :D
[05:32:13] <steveklabnik> "oh it'll just have chat"
[05:32:18] <steveklabnik> 3 YEARS LATER....
[05:33:25] <erickt1> every chat client needs a 60fps high fidelity 3d game engine
[05:34:27] <erickt1> oh the option dance. we need to put that on a t-shirt
[05:34:53] <brson> erickt1: nice idea
[05:34:59] <Eridius> erickt1: put io conditions on a shirt
[05:35:07] <brson> need somebody to illustrate the option dance
[05:35:39] <glob> ah, 1.7 only then
[05:35:42] <ChrisMorgan> brson: we're still planning on killing conditions, right?
[05:35:49] <brson> ChrisMorgan: yes
[05:36:21] <diverse> killing which conditions?
[05:36:35] <Eridius> io conditions are evil
[05:36:35] <ChrisMorgan> Conditions. The concept.
[05:36:48] <diverse> ah
[05:36:53] <ChrisMorgan> They were an experiment which has been successfully proven undesirable.
[05:36:57] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[05:36:58] <erickt1> brson: i picture the option dance illustration to be in the vein of the aircraft emergency exit guide
[05:36:59] <brson> the plan is to replace them with dynamically scoped variables, which are more general
[05:37:00] <steveklabnik> it's just a library so people could bring them back if they wanted
[05:37:06] <steveklabnik> but yeah, condtions were confusing :(
[05:37:32] <erickt1> I love the idea of conditions, I just never actually wanted to use them
[05:38:03] <brson> the use case of deciding how to handle invalid utf seems appropriate for conditions, but can also be done with a dynamic variable representing enum Utf8Error { Fail, ReplacementChar, Remove } or something
[05:38:32] <brson> i tried removing conditions but thought there were a few appropriate use cases
[05:38:37] <Yurume> brson: that's DecodeStrict, DecodeReplace, DecodeIgnore in rust-encoding FYI.
[05:38:45] <brson> Yurume: thanks, yes
[05:38:52] <Yurume> (I was using Python's terminology on that API)
[05:39:16] <erickt1> brson: can't you implement conditions with dynamically scoped variables? I thought that's how lisp implemented them
[05:39:28] <brson> erickt1: yes :-D
[05:39:47] <erickt1> standard common rust
[05:40:30] <steveklabnik> Common Rust
[05:40:32] <Yurume> Oxide.
[05:40:33] <steveklabnik> like Common Lisp
[05:40:35] <steveklabnik> ;)
[05:40:38] <Yurume> (like Scheme)
[05:42:15] *** Joins: mcpherrin (mcpherrin@BB4DB59D.2876C283.70845BE5.IP)
[05:42:22] <mcpherrin> Luqman: Not gonna demo??
[05:42:31] <ChrisMorgan> mcpherrin: he did demo
[05:42:39] <mcpherrin> oh, I missed it :P
[05:42:46] <brson> Luqman's the man. I wish I was there to fistbump him
[05:43:02] <Eridius> woohoo, Rust CI is now building rust-lua! https://travis-ci.org/kballard/rust-lua
[05:43:05] <erickt1> brson: i'll fistbump him for you
[05:43:09] <brson> erickt1: thanks!
[05:43:13] <erickt1> Eridius: woo!
[05:43:14] * ChrisMorgan has been in Luqman's debt since he got building rustc for ARM working
[05:43:31] <diverse> brson: give him a virtual fistbump
[05:43:50] <ChrisMorgan> EEK! Copy and paste!
[05:44:37] * ChrisMorgan wishes rustpkg was perfect
[05:44:52] <Eridius> regarding crypto: I've been maintaining a fork of randombit's openssl bindings under the name kballard/rustcrypto. It doesn't do the cool AES socket stuff though. https://github.com/kballard/rustcrypto
[05:45:13] * Eridius hasn't really even looked much at the bindings, though, aside from the minimal use he has in one project. He just makes sure it compiles and passes tests
[05:45:21] <Eridius> I guess I should see if I can get it up and running on Rust CI
[05:46:02] <steveklabnik> i was building Ruby as a shared library and then trying to load it via Rust's FFI and send it arbitrary Ruby programs as strings ;)
[05:46:07] <steveklabnik> segfaults :(
[05:46:09] <Eridius> steveklabnik: egads
[05:47:05] <diverse> erickt1: heard you say fistbump
[05:47:06] <mcpherrin> I need to move to SF to make attending these things easier
[05:47:17] <erickt1> brson: fistbumped
[05:47:28] <brson> erickt1: awesome
[05:47:28] *** Parts: glob (glob@moz-DF237567.glob.com.au) (Leaving...)
[05:47:42] <dalaing> steveklabnik: so the next step is writing a Rust interpreter in Ruby, right?
[05:47:53] <ChrisMorgan> And vice versa.
[05:48:05] <ChrisMorgan> It now being 4:47pm, I shall go and get the lunch that I forgot (!) to have earlier.
[05:48:23] <bjz> ChrisMorgan: ++ to that
[05:48:26] <bjz> :P
[05:49:04] <Yurume> erickt1: what binding are you working on?
[05:49:25] <erickt1> Yurume: openssl bindings: https://github.com/erickt/rustcrypto
[05:49:37] <bjz> acrichto: any word on how futures will be implemented in the... err... future? Seeing as they were built on top of oneshots?
[05:50:27] <diverse> steveklabnik: you might find this interesting: https://github.com/mame/quine-relay
[05:50:57] <steveklabnik> Ha!
[05:51:01] <steveklabnik> Yup
[05:52:02] <erickt1> signing off now, thanks everyone for watching!
[05:52:17] <brson> awesome event. <3 rust
[05:52:25] <SiegeLord> That was pretty good indeed
[05:52:26] <diverse> it was awesome!
[05:52:26] *** Quits: erickt1 (Adium@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: Leaving.)
[05:53:20] <Eridius> erick: good job with the event. Sad I couldn't make it, but I'm happy a live stream was available
[05:53:40] <Eridius> now, it's time to go watch Bond :)
[05:54:48] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[05:54:48] *** ChanServ sets mode: +ao dherman dherman
[06:02:57] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Quit: leaving)
[06:05:51] *** Joins: nomme (nomme@moz-A30B1161.a336.priv.bahnhof.se)
[06:12:35] *** Quits: dalaing (dalaing@moz-5057F137.dyn.iinet.net.au) (Quit: Leaving.)
[06:13:11] *** Joins: rfw (rfw@moz-7D453A5B.rfw.name)
[06:16:30] *** Joins: patrikstenmark (sid16326@moz-A42E5B7B.irccloud.com)
[06:26:06] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[06:30:06] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[06:31:31] *** Joins: frau (frau@D747870C.75963994.405878F2.IP)
[06:32:09] *** Joins: Heather (Heather@19663F6.F53BAACC.9C17E900.IP)
[06:32:17] <Heather> morning #rust
[06:32:24] <Heather> what is happened with stream
[06:33:04] <bjz> Heather: it's now Chan::new()
[06:33:16] <Heather> bjz thanks
[06:33:26] <bjz> Heather: acrichto did a massive refactor of comm
[06:33:32] <bjz> landed yesterday I think
[06:34:42] <frau> what's TCP as discussed in relation to rust closures?
[06:35:19] <bjz> Tall Crimson Puffins
[06:35:59] <frau> puffins? in MY type system?
[06:36:07] <Heather> and peek?
[06:36:37] <geomyidae> are there not like crate level constants or something?
[06:37:20] <dbaupp> frau: "Tennent's Correspondence Principle" apparently
[06:37:28] <frau> finally found it by searching some ECMAscript mail archives: Tennent's Correspondence Princ-- ninja'd!
[06:37:35] <Heather> Port peek -> recv
[06:38:09] * bjz is sad there are no puffins in the type system
[06:38:20] <tjc> it's more likely than you think
[06:39:04] <frau> at least it's sound
[06:39:12] <bjz> Heather: that was removed due to weird semantics I think. acrichto mentioned it in his talk today
[06:39:23] <bjz> frau: how do you know?
[06:39:35] <Heather> :S
[06:39:38] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Ping timeout)
[06:39:50] <bjz> Heather: not sure the alternative though
[06:39:53] <Heather> bjz and how to implement the same now?
[06:39:58] <Heather> I see...
[06:40:03] <bjz> sorry :(
[06:40:18] <Heather> bjz well it's not you break stuff :D
[06:40:49] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: Textual IRC Client: www.textualapp.com)
[06:41:08] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[06:41:09] <frau> bjz: I proved it by porting rustc to C, Haskell, and JRuby independently... proven sound by exhaustivity!
[06:41:39] <mcpherrin> frau: I need a prolog and smalltalk implementation for exhaustivity.
[06:41:50] <bjz> frau: still not as good as mathemagically :)
[06:42:06] *** Quits: aatch (James@moz-B437F499.pocketrent.com) (Quit: Leaving)
[06:42:12] <frau> math is *too magic*
[06:42:26] <frau> I only trust what I can type.
[06:43:39] <bjz> frau: yay theorum provers
[06:43:45] <Heather> bjz there is std::iter::Peekable ....
[06:44:17] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Ping timeout)
[06:44:24] <bjz> Heather: do you think PortIter could impl Peekable?
[06:44:38] <frau> mcpherrin: I asked prolog and prolog said "YES". I'm still trying to extract the rust compiler out of my smalltalk image, so I can't be sure if it's freestanding yet...
[06:45:54] <Heather> bjz maybe port.iter().peekable().peek().unwrap() ?
[06:46:06] <bjz> haha
[06:46:22] <bjz> <3 Port::iter
[06:46:35] <Heather> or .... port.iter().map(|&x|x).peekable().peek().unwrap()
[06:46:44] <Heather> :D
[06:47:06] <Heather> bjz damn yes, I can't iter port
[06:47:06] <bjz> :o
[06:47:07] <mcpherrin> frau: No.
[06:49:12] <frau> Prolog is so harsh :(
[06:49:55] <Heather> can I write let (_, chan) = Chan::new(); ?
[06:51:14] <frau> thanks for the clarification on TCP!
[06:51:24] <frau> it seems important for nice macros
[06:53:47] <dbaupp> Heather: yes, but you will not be able to use `chan`
[06:54:02] <dbaupp> as in, you need the `_` variable to be able to recieve the messages.
[06:55:02] <Heather> dbaupp is there example of how to use it :S
[06:55:32] <dbaupp> exactly the same as you used stream()
[06:55:35] <bjz> Heather: it's exactly the same as stream was
[06:55:37] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[06:55:54] <Heather> dbaupp bjz : there is no peek in port anymore
[06:56:15] <Heather> e.g. I used to use while !port.peek() {
[06:56:33] <Heather> and process stuff there and now I don't know how to make it )
[06:56:53] <bjz> Heather: could you show a gist?
[06:57:03] <boredomist> try_recv might work for you, depending on how you're using it
[06:57:12] <Heather> bjz sure
[06:57:12] <boredomist> fn try_recv(&self) -> Option<T>: Attempts to return a pending value on this port without blocking
[06:57:33] <Heather> bjz https://github.com/Heather/Mirana/blob/master/src/Mirana/Wrappers.rs#L17
[06:57:39] * jack is sad about peek being gone too
[06:57:48] <jack> because there's no way to look now without removing what's there.
[06:57:56] <bjz> jack: yeah :(
[06:58:22] <mcpherrin> so you'll have to do the usual trick of wrapping it in a thing that stores the peeked value, which isn't so bad
[06:58:42] <mcpherrin> is there generic code in rust to do that?
[06:59:04] <bjz> jack: do you use peeks in Erlang?
[06:59:47] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[07:01:12] <jack> bjz: not really. you always block.
[07:01:39] <bjz> jack: you could do port.iter().peekable()
[07:01:59] <jack> that blocks, no?
[07:02:09] <bjz> yeah, I think so
[07:02:12] <bjz> :(
[07:02:27] *** Joins: rhodesd (none@3646D136.4C5731DA.F395EA5B.IP)
[07:02:46] <jack> I mean, I probably shouldn't use peek, but servo already has it so it's annoying me because i have to change it now :)
[07:03:51] * bjz wonders if we need a blocking and non-blocking iter
[07:04:19] <bjz> one which uses try_recv or rev_opt
[07:04:35] <jack> what do you need peek for?
[07:05:27] <bjz> jack: Heather wants it for https://github.com/Heather/Mirana/blob/master/src/Mirana/Wrappers.rs#L17
[07:05:33] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[07:06:14] <Heather> maybe I should while port.try_recv().is_some() {
[07:06:27] <jack> try_recv() will slot in easily
[07:06:39] <Heather> slot?
[07:06:48] <jack> Heather: just as you said is a drop in replacement
[07:07:12] <jack> while port.try_recv().is_none() for example
[07:07:28] <Heather> eh?
[07:07:58] <Heather> jack I'm not fully  understood
[07:08:35] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[07:08:57] <bjz> Heather: try_recv() returns Some if there is something in the message queue, or None if there it is empty or the channel has hung up
[07:09:03] <bjz> it doesn't block
[07:09:22] <jack> bjz, Heather: this one took a little refactoring: https://github.com/mozilla/servo/blob/824c7ac613ebb80bb432ff6425c5e25c642b6afb/src/components/script/script_task.rs#L527-L545
[07:09:45] <jack> try_recv() always returns immediately.
[07:10:05] <jack> the only different between it and peek is that it also pops the message off if there is on
[07:10:10] <jack> whereas peek left it there.
[07:10:29] <Heather> I see
[07:10:57] <jack> since you don't care about the message, you can simply replace peek with try_recv().is_some() or is_none() etc
[07:11:46] <bjz> jack: I'm thinking I'll add a .try_iter
[07:12:05] <bjz> jack: which iterates through the current queue
[07:14:05] <acrichto> bjz: futures are just built on channels now
[07:14:21] <Heather> so for now there is no way to implement thing I used in wrappers.rs?
[07:14:51] <jack> acrichto: you mentioned why peek was removed but I didn't catch it in your talk
[07:15:01] <jack> acrichto: mind repeating that bit again?
[07:15:09] <acrichto> jack: it's an inherently nonatomic decision
[07:15:13] <bjz> acrichto: could futures be an alternative to PortOnes?
[07:15:36] <jack> Oh, you mean that once you peek the state may change out from under you
[07:15:39] <acrichto> bjz: certainly! and we'd have a nice interface for optimization in the future
[07:15:49] *** Joins: jaen (jaen@moz-CC96815C.neoplus.adsl.tpnet.pl)
[07:15:53] <acrichto> jack: peek() == true means you have relevant information, peek() == false means you know nothing
[07:16:02] <jack> Although that seems odd since I'm in control of the port so I know if I read on it or not.
[07:16:37] <jack> yes, that's true.
[07:17:06] <jack> I don't think I'll miss it after fixing things up.
[07:17:09] <acrichto> we could add it in if really necessary, but I'd kinda rather not
[07:17:19] <vadimcn> How do I turn bytes!("12345678") into u64 ?
[07:17:20] <jack> Btw, new Chan::new() and SharedChan::new() are huge improvements.
[07:17:46] <mcpherrin> vadimcn: you could do it the naive way with shifting and ORing
[07:17:48] <acrichto> jack: yay!
[07:18:11] <klutzy> vadimcn: from_str_radix?
[07:19:00] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: Leaving)
[07:20:11] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:20:36] <vadimcn> mcpherrin: I suppose I can, but I'd like to know if there's idiomatic way of doing that.   I want the equivalent of C's  uint64_t x = '12345678';
[07:21:21] <vadimcn> actually const uint64_t x = '12345678';
[07:21:22] <bjz> acrichto: would you be ok with having a try_iter?
[07:21:36] <dbaupp> bjz: what does a try_iter do?
[07:21:37] <acrichto> bjz: huh, interesting idea
[07:21:46] <acrichto> I wouldn't be too opposed to that
[07:22:16] <bjz> dbaupp: non-blocking version of Port::iter
[07:23:05] <bjz> dbaupp: unlike PortIterator, TryPortIterator would return `None` once the message queue has been exhausted rather than blocking
[07:25:35] <acrichto> jack: I'm kinda surprised SharedChan isn't Freeze
[07:25:42] *** Quits: sellout (Adium@moz-AE26682A.hlrn.qwest.net) (Connection reset by peer)
[07:26:04] *** Joins: sellout (Adium@moz-AE26682A.hlrn.qwest.net)
[07:26:55] <jack> acrichto: me too :)
[07:27:07] <jack> I'm not sure yet whether it's a big deal.
[07:27:31] <jack> Also, it seems like rustdoc should probably tell you the Kinds of things in the docs.
[07:27:47] <dbaupp> bjz: oh, so it would empty the current backlog of the port?
[07:27:55] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[07:27:59] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Quit: )
[07:29:24] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[07:29:58] *** Joins: z0w0 (zack@moz-7B305DFB.lnse1.woo.bigpond.net.au)
[07:30:19] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Input/output error)
[07:31:54] <bjz> dbaupp: indeed
[07:35:05] *** Parts: Heather (Heather@19663F6.F53BAACC.9C17E900.IP) ()
[07:35:06] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[07:35:58] *** Joins: jessta (jessta@moz-9DDA1270.dyn.iinet.net.au)
[07:36:49] *** Joins: refold (gman@moz-42D68426.a258.priv.bahnhof.se)
[07:43:58] *** flaper87|afk is now known as flaper87
[07:48:29] <bjz> jack: that would be super gcool
[07:48:33] <bjz> *cool
[07:48:52] <bjz> but what of generic types?
[07:49:03] <bjz> tysaqqs
[07:49:06] <bjz> woops
[07:49:30] * bjz hit keyboard weirdly
[07:52:07] <acrichto> jack: looking at all the struct definition, I actually have no idea why it's not Freeze
[07:56:43] <eddyb> cmr: only now got to read http://cmr.github.io/blog/2013/12/16/this-week-in-rust/ - I don't see my vec::from_elem speedup :S
[08:01:15] *** Joins: Ms2ger (Ms2ger@moz-5E951152.ugent.be)
[08:02:52] <frau> eddyb: what's the speedup?
[08:03:44] <eddyb> frau: 20x, though it's not obvious in libsyntax/librustc (which is why nobody fixed it since optimizations for it were broken)
[08:04:13] <frau> superb! what was the bottleneck
[08:04:25] <eddyb> frau: the cause was a missing #[inline] on a dtor used by .finally
[08:04:45] <eddyb> I've checked that too, not a lot of critical code paths using finally
[08:05:18] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Ping timeout)
[08:05:22] <eddyb> frau: though it was affecting rust-png, both the libpng bindings and my new decoder, written in Rust
[08:05:33] <frau> is .finally an LLVM IR thing?
[08:06:26] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[08:06:32] <eddyb> no, (|| {/* do something which might fail */}).finally(|| {/* this will always be executed */})
[08:07:15] <frau> Oh I see
[08:07:20] <eddyb> it does it with a drop impl on a stack object, those always get called, even during unwinding from a task failure
[08:07:30] <frau> ah! yes
[08:07:45] <frau> I always wonder how much I ought to be RAII-ifying my rust code...
[08:07:49] <eddyb> if it's inlined, LLVM can tell what's going on and that it will never fail, so all the exception handling machinery goes away
[08:08:02] <frau> eddyb: oh, that sounds like a great win
[08:08:37] <eddyb> the bug itself was a very silly thing, we ought to not require #[inline] in crates >_>
[08:08:50] <eddyb> I think LTO solves that, but it's much slower (and unstable atm)
[08:08:55] <frau> woo LTO
[08:09:24] *** Parts: z0w0 (zack@moz-7B305DFB.lnse1.woo.bigpond.net.au) ()
[08:09:31] <frau> I liked the comment in the LTO commit: "As I have explained in #10741, this process is excruciatingly slow"
[08:09:47] *** Joins: andreypopp (andreypopp@moz-7261DC60.net)
[08:12:43] <frau> whoa, 'self is gone
[08:12:50] <diverse> yep
[08:12:55] <frau> 'cause it's a keyword, I see
[08:13:00] <frau> that seems sensible
[08:13:35] <o11c> 'static still uses a keyword though
[08:14:05] <frau> hmm indeed
[08:14:31] <frau> don't really see a way around that though. one exception is better than two I guess?
[08:14:33] *** flaper87 is now known as flaper87|afk
[08:15:21] <frau> ha, 'Finallyalizer'
[08:15:48] <diverse> ...
[08:16:42] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[08:20:32] *** Joins: arrrrrrrrr (arrrrrrrrr@moz-1FE60361.dynamic.qsc.de)
[08:26:55] *** Joins: skade (skade@moz-B73EE4D5.pools.arcor-ip.net)
[08:28:15] <frau> rustc doesn't inline code on its own right? just defers to LLVM?
[08:28:45] <eddyb> pretty much
[08:29:49] <frau> seems like inlining within rustc would help with cycle time... but a pretty big feature no doubt
[08:29:53] <eddyb> frau: #[inline] is a hack in crates. the AST is stored in the library, as metadata, and compiled again, so it can be inlined
[08:30:06] <frau> oh I see
[08:30:14] <eddyb> within a crate (like libsyntax or librustc), inlining happens automatically
[08:30:20] <eddyb> without any crazy annotations
[08:30:42] <frau> oh, in crates, okay
[08:30:45] <eddyb> however, libsyntax is a different crate from librustc, and I didn't think of inlining annotations on that until you mentioned it
[08:31:09] *** flaper87|afk is now known as flaper87
[08:31:18] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:31:22] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[08:33:11] <frau> so are there good theories on why llvm takes so long to bootstrap rust?
[08:37:42] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[08:38:16] *** Quits: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP) (Client exited)
[08:38:44] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[08:38:57] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Ping timeout)
[08:39:49] <eddyb> frau: the LLVM passes during compiling rustc?
[08:40:38] <eddyb> frau: as strcat puts it, rustc::middle::trans outputs very bad IR that LLVM has to struggle to optimize
[08:41:37] <frau> ah, OK.
[08:41:44] <ezyang> If I'm working on error messages in the Rust compiler, what command should I use to remake the relevant compilery bits? 
[08:42:39] <eddyb> make stage1-rustc # (or was it rustc-stage1?) - that should recompile the first rustc it can
[08:42:59] <ezyang> stage1 and not stage2? 
[08:43:12] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[08:44:15] <eddyb> stage2 is for having an *optimized* compiler, where stage1 is an *optimizing* compiler (in terms of optimizations. same logic applies to everything else)
[08:44:43] <ezyang> ah, ok 
[08:45:23] <eddyb> if you add a new lint pass, stage2 will be *linted* while stage1 will just be *linting*
[08:46:21] <eddyb> et cetera blah blah blah, it's too early in the morning
[08:46:45] <ktt3ja> eddyb: rustc-stage1
[08:47:45] <ezyang> Is there a way to turn NodeIds into Spans? 
[08:48:22] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:48:54] <eddyb> ezyang: well, you want to the get the ast_node of the NodeId, and most nodes should have spans - look for a helper function taking a NodeId or an ast_node and returning a Span, there might be one
[08:49:20] <eddyb> or ask someone who knows already the file and line number
[08:49:30] <ezyang> That is helpful, thanks. 
[08:50:02] *** Joins: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk)
[08:50:20] *** Parts: diverse (diverse@moz-ED94B8D.oc.oc.cox.net) (WeeChat 0.4.2)
[08:50:29] <ezyang> So, I need to figure out where the 'map' is, as defined in libsyntax/asT_map.rs 
[08:50:47] <ezyang> and that's probably in the Ctx 
[08:52:00] <eddyb> if Ctx has it, it also probably has helper methods
[08:52:17] <ezyang> hm. Does borrowck actually have a Ctx available to it... 
[08:52:21] <eddyb> (e)grep -r (or git grep) help a lot
[08:52:40] <eddyb> ezyang: it should. anything with "cx" in it is some sort of context :P
[08:53:10] *** Quits: adu (ajr@moz-94B34CD8.washdc.fios.verizon.net) (Quit: adu)
[08:53:30] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[08:53:56] <ezyang> Well, there's a borrow context, but I don't see anywhere obvious that Ctx is embedded in it 
[08:55:26] <eddyb> ezyang: there has to be *something*
[08:56:32] <ezyang> There isn't any sort of high level commentary on Rustc, is there? 
[09:04:07] *** Joins: DeTeam (DeTeam@92C799C.31715274.F5F3AF2.IP)
[09:05:34] <ezyang> Hmm. What's the difference between a gen_scope and a kill_scope 
[09:06:10] <Luqman> ezyang: hmm, i guess you want ast_map::item_span if your NodeId maps to a span
[09:06:35] <Luqman> so `ast_map::item_span(tcx.items, node_id)`
[09:08:27] <ezyang> Aha, well done. 
[09:09:17] <ezyang> How do I turn on the debug messages? 
[09:09:27] <Luqman> woops, meant NodeId maps to an item*
[09:09:54] <Luqman> ezyang: RUST_LOG=rustc::middle::ty rustc foo.rs
[09:10:01] <Luqman> ^ something like that
[09:10:05] <ezyang> neat 
[09:11:54] *** Joins: buster (buster@3A0EAB5F.9C69795C.ACFE537F.IP)
[09:14:37] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[09:15:22] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[09:16:03] *** Joins: sigma (sigma@moz-6E1846A2.range86-184.btcentralplus.com)
[09:16:23] <ezyang> man, these recompiles take too long 
[09:23:15] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[09:25:28] *** Joins: rca (rcatolino@moz-FE9D6793.adsl.proxad.net)
[09:27:13] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[09:27:57] *** Quits: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr) (Quit: ZNC - http://znc.sourceforge.net)
[09:28:55] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[09:31:29] <buster> ezyang: I'm doing that on a dualcore netbook, talking about long compile times... what takes my laptop 3 seconds takes 25 here :)
[09:36:16] <ezyang> yeah, it doesn't help that my CPU is five years old at this point 
[09:37:11] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[09:37:34] <ezyang> hmmmm 
[09:37:41] <ezyang> "item_span: expected item with id 47 but found Some(&node_expr(@ast::Expr{id: 47u32, ..." 
[09:37:45] <ezyang> "what does it mean" 
[09:38:35] <ezyang> oh, because it's a node_expr, not a node_item 
[09:40:16] <ezyang> I wonder if there's a generalized version of item_span that works on non-item things too 
[09:40:21] *** Quits: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP) (Quit: leaving)
[09:41:10] <buster> mh
[09:41:39] <ezyang> well, shouldn't be too hard to write 
[09:41:42] <buster> how would i read in a json file/string that i don't know the structure of? All i can find is some code with matches but that'd mean i already know the content
[09:42:47] <eddyb> you'd put the objects in hashmaps
[09:43:41] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[09:43:59] <buster> how? i got a Json object
[09:44:15] <buster> but my understand is that i'll have to decode it with Decoder or Decodable::decode
[09:45:47] <eddyb> shouldn't it be an enum of null/bool/number/string/array/object?
[09:51:22] <buster> oh i see. it's a treemap of Json enums
[09:51:39] <buster> or something like that ;)
[09:52:19] <eddyb> it should be hash map, but yeah
[09:52:40] <eddyb> (the object. the array is just a vector and the rest are terminals)
[09:53:08] <buster> Object(~extra::treemap::TreeMap<~str,extra::json::Json>{root: Some(~extra::treemap::TreeNode<~str,extra::json::Json>{key: ~"listen_sockets", value: List(~[String(~"127.0.0.1:2323")]), left: None, right: None, level: 1u}), length: 1u})
[09:53:13] <buster> says treemap :)
[09:53:35] *** flaper87 is now known as flaper87|afk
[09:54:37] <eddyb> o_O
[09:54:43] <ezyang> What is P<T> in rustc? 
[09:54:49] <ezyang> ctags is failing me 
[09:54:55] <eddyb> ezyang: hehehe. it's ast::P<T>
[09:55:03] <eddyb> ezyang: at the top of syntax/ast.rs
[09:55:09] <Ms2ger> What is NP<T>?
[09:55:14] <eddyb> didn't think it could confuse people
[09:55:27] <dbaupp> Ms2ger: we're not sure
[09:55:33] <Ms2ger> dbaupp++
[09:55:46] <dbaupp> but we *think* it's different to P<T>
[09:55:47] <ezyang> "ah, I see" 
[09:56:04] <eddyb> ezyang: rustc shouldn't need it (apart from AST folding. does rustc do folding?) but the AST visitor needs to be rewritten
[09:56:12] <eddyb> to remove @T/P<T>
[09:56:27] <ezyang> Ms2ger: it might point to something. It's nondeterministic, after all 
[09:57:22] * Ms2ger writes type NP = P
[09:57:31] <Ms2ger> Now, where's my million dollars?
[09:57:45] <eddyb> you need <T> in there
[09:57:55] <eddyb> because we don't have HKTs
[09:58:10] <Ms2ger> Oh hey, I've seen that abbreviation before :)
[09:58:42] <eddyb> Ms2ger: you sound just like my brain. though sometimes I try to hide my limited knowledge of *everything*
[09:58:46] *** Quits: DeTeam (DeTeam@92C799C.31715274.F5F3AF2.IP) (Quit: DeTeam)
[09:58:55] <Ms2ger> :D
[09:59:49] <eddyb> like, I once made a 3D viewer for gerber files - I won the (elance) project before knowing what "gerber" meant. maybe I heard of it a few times
[10:00:01] <bjz> Ms2ger: 'Higher Kinded Types'
[10:00:16] <ezyang> so, to keep people in the loop here, I'm working on a patch to make rustc report the lexical scopes of borrows when they are involved in an error 
[10:00:19] <Ms2ger> Yeah, I know
[10:00:33] <Ms2ger> Some people like to mention that they want them :)
[10:00:37] <ezyang> So instead of saying "here is where the borrow happeend", I want the compiler to also say, "and here is the range the borrow is being considered live" 
[10:00:54] <bjz> Ms2ger: would be awesome :D
[10:01:16] <ezyang> The step beyond that is, "And here is the proximal cause why the borrow is live to this point", but that will require some more cooperation from the dataflow engine 
[10:01:34] <Ms2ger> bjz, I'll just stick with "complex' for now :)
[10:01:52] <buster> eddyb: maybe you have an idea or i am doing something horribly wrong, since i'm just learning.. https://gist.github.com/anonymous/8019911
[10:01:55] <eddyb> Ms2ger: now I've forgotten everything again. and there's like a function somewhere that I've looked at recently, it generates the minimal border of a bunch of shapes in linear time. I had no clue how I did it
[10:02:14] <buster> the file contains a json object with a key "listen_sockets" that contains an array of strings
[10:02:30] <eddyb> buster: you have to iterate the treemap
[10:02:30] <Ms2ger> eddyb, does it have documentation? :)
[10:02:49] <eddyb> Ms2ger: what I wrote? some sprinkled comments
[10:03:40] <buster> eddyb: ok, so how do i get to the treemap inside the Object? 
[10:04:10] <eddyb> Ms2ger: if I put some pieces together, I *think* I was just trying to connect consecutive shapes and create outer paths. the path which covered everything wins
[10:04:12] <buster> i can't do "for x in config" because that's the "Object" and inside is the treemap, so that would be another pattern match?
[10:04:37] <eddyb> buster: you have to match and handle the object case
[10:04:56] <buster> mh, ok, thanks!
[10:05:02] <eddyb> match json_data {Object(map) => {...}, _ => fail!("expected an Object")}
[10:05:08] <buster> i already spent hours on that one 
[10:05:17] <buster> thanks
[10:05:57] <eddyb> buster: how do you get from_str to return the right thing?
[10:06:18] <eddyb> buster: from_str is generic over its return type, are you importing something else as from_str?
[10:06:33] <eddyb> (if you are, please don't do it. it creates massive confusion)
[10:07:05] <eddyb> it's almost like doing type int = i32; - it works but it's not something nice/sane to do
[10:07:20] <buster> i did have use extra::json::from_str;
[10:07:34] <eddyb> use extra::json; and then json::from_str
[10:07:34] <dbaupp> Do we have a built-in raw pointer difference?
[10:07:36] *** Quits: fmtq (fmt@moz-5769BD38.static.tpgi.com.au) (Ping timeout)
[10:07:40] <pyon> How do I set the tab size for println?
[10:07:41] <pyon>  
[10:07:43] <eddyb> dbaupp: difference?
[10:07:43] *** flaper87|afk is now known as flaper87
[10:07:51] <eddyb> dbaupp: as in, subtraction? there is 0 arithmetic
[10:07:59] <buster> ook.. so i'll look into that, it's kind of confusing with the use statements 
[10:08:26] <dbaupp> eddyb: yes, subtraction (fwiw, - doesn't work.)
[10:08:46] <eddyb> dbaupp: cast to uint, subtract and divide by object size
[10:08:58] <eddyb> buster: what's confusing is replacing the "built-in" from_str with something else
[10:09:32] <eddyb> rusti: let x: int = from_str("5").unwrap(); let y: bool = from_str("true").unwrap(); (x, y)
[10:09:34] -rusti- (5, true)
[10:09:44] <buster> uhm... how would i do the conversion then?
[10:09:55] <dbaupp> eddyb: yes, I know that; I was wondering if we had a nice way :P
[10:09:58] <eddyb> buster: just load the json module and call json::from_str
[10:10:04] <eddyb> dbaupp: nice == abusable
[10:10:07] <buster> oh
[10:10:09] <buster> ok
[10:10:26] <eddyb> sorry I didn't make it clear the first time
[10:11:01] <eddyb> buster: you don't need to read_to_end and parse as utf8: http://static.rust-lang.org/doc/master/extra/json/fn.from_reader.html
[10:12:15] <eddyb> json::from_reader(File::open(&path) as &Reader) (you don't need the check if it exists, btw, it errors in that case anyway)
[10:12:19] <buster> ah that sounds much better indeed
[10:12:52] <buster> great, i found that to complex anyway, i didn't know that works 
[10:13:33] <eddyb> for (key, value) in map.iter() {....}
[10:13:56] <eddyb> or map.find("listen_sockets")
[10:14:35] <buster> great thanks.. good when someone tells such things :)
[10:14:48] <nielsle> Is the rust mmeetuup video available in a non-flash format (or is my browser configured badly?)
[10:14:51] <eddyb> buster: I'm just looking at http://static.rust-lang.org/doc/master/extra/treemap/struct.TreeMap.html
[10:15:44] <eddyb> anyone know why extra::json is using TreeMap and not HashMap?
[10:17:39] <eddyb> there's no comment here http://static.rust-lang.org/doc/master/src/extra/home/rustbuild/src/rust-buildbot/slave/doc/build/src/libextra/json.rs.html#46
[10:23:06] *** Joins: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP)
[10:26:03] *** Joins: Blei (philipp@moz-B2F9E4BD.cust.bluewin.ch)
[10:28:40] <buster> ok, it works now, great :)
[10:29:41] *** Quits: frau (frau@D747870C.75963994.405878F2.IP) (Quit: out)
[10:30:46] <bjz> rusti: ;;;;;;;;;;
[10:30:47] -rusti- ()
[10:30:52] <bjz> heh :D
[10:31:11] <bjz> rusti: {}{}{}{}
[10:31:11] -rusti- ()
[10:32:04] <arrrrrrrrr> rusti: println("you're welcome"); please
[10:32:06] -rusti- pastebinned 7 lines of output: http://ix.io/9qB
[10:32:10] <arrrrrrrrr> so rude
[10:35:37] *** Quits: ktt3ja (ktt3ja@moz-54586A12.washdc.fios.verizon.net) (Quit: Leaving)
[10:41:04] <dbaupp> eddyb: I think it's to have fast comparison due to ordered keys
[10:41:41] <eddyb> dbaupp: but... oh, nevermind, the hash function is not constant at compile time
[10:42:02] <eddyb> dbaupp: still, hashing a constant string could result in a function of the hash string
[10:42:38] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[10:43:02] <strcat> Ms2ger: was it you who needed weak references? don't remember
[10:43:26] <Ms2ger> Hmm
[10:43:51] <Ms2ger> It might have come up in a Servo-jsmanaged discussion, but I don't actually think I do need them
[10:44:20] <strcat> guess it wasn't you then, someone needed them for some graph/tree thing
[10:45:42] <eddyb> Ms2ger: did you miss my revelation in #servo? you can do them with just add/remove root and a ref count
[10:45:45] <Ms2ger> That wouldn't be me
[10:45:56] <eddyb> Ms2ger: but they might leak in some conditions - Traceable is superior
[10:45:56] <Ms2ger> eddyb, I probably did
[10:46:19] <Ms2ger> eddyb, but we did end up deciding on refcounting the rust objects for now
[10:46:51] <eddyb> Ms2ger: if you add the root only when refcount > 1 and remove it when it comes back to 1, you get kinda the same thing v8's Persistent has
[10:47:52] <eddyb> Ms2ger: but it leaks if you bifurcate in a cycle
[10:48:21] <eddyb> (which means v8 might leak in combination with C++ code. I'm not sure)
[10:49:10] <Ms2ger> Can we chat when I get home from class? :)
[10:49:22] <eddyb> sure. and in #servo :P
[10:49:51] <Ms2ger> Right :)
[10:53:22] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[11:03:36] *** Quits: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP) (Ping timeout)
[11:09:58] <Boreeas> How do I compare a ~str and a &str? Apparently, == doesn't work and I would prefer to not convert them
[11:10:12] <strcat> Boreeas: you can use ==, ~str will coerce to an &str
[11:10:23] <strcat> rusti: "foo" == ~"foo"
[11:10:24] -rusti- out.rs:9:17: 9:23 warning: unnecessary allocation, the sigil can be removed, #[warn(unnecessary_allocation)] on by default
[11:10:25] -rusti- out.rs:9         "foo" == ~"foo"
[11:10:25] -rusti-                           ^~~~~~
[11:10:25] -rusti- true
[11:10:38] <strcat> Boreeas: the type for == is determined from the LHS
[11:11:12] <strcat> (there are alternatives, like explicitly slicing ~str to &str or using equiv instead of Eq, but that's mostly for generic code like hash tables)
[11:13:59] <Boreeas> strcat: coerce doesn't work for me. I got "if tag.id == id" (tag.id being ~str and id being &str), but I get a mismatched type error
[11:14:17] <strcat> Boreeas: the left-hand side determines the type of the == 
[11:14:27] <strcat> ~str will coerce to &str (&str is a view)
[11:14:37] <strcat> &str can't coerce to ~str - that requires an allocation
[11:14:39] *** Quits: skade (skade@moz-B73EE4D5.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[11:15:35] <Boreeas> Nonsymmetrical ==, nice :P
[11:15:59] <strcat> Boreeas: it's symmetrical
[11:16:04] <strcat> it takes the same type on both sides
[11:16:10] <strcat> but the type is determined from the left-hand side
[11:16:29] <strcat> if the type inference algorithm worked harder, it could do both
[11:16:32] <strcat> but it doesn't atm
[11:16:59] <arrrrrrrrr> is that why there are constructs such as a == b && b == a in some macros?
[11:17:15] <strcat> no
[11:17:30] <strcat> doing that doesn't make sense, for any sane definition of Eq
[11:17:56] *** Quits: Ms2ger (Ms2ger@moz-5E951152.ugent.be) (Quit: bbl)
[11:17:58] * strcat shrugs
[11:18:11] <arrrrrrrrr> that's what I was thinking but I'm sure that I have seen in the source (or docs) even with a comment "ensure that left == right and right == left"
[11:18:20] <strcat> well in a test, sure
[11:18:40] <strcat> it's up to each Eq implementation to be correct
[11:18:51] <strcat> makes sense to test them
[11:19:04] *** Quits: pyon (user@F4DA2F11.BD7DB6F4.1C8C8CE9.IP) (Quit: ERC Version 5.3 (IRC client for Emacs))
[11:20:09] <strcat> anyway type inference and borrow checking are far from ideal
[11:20:13] <strcat> there's a lot of work to be done there
[11:20:57] *** Quits: andreypopp (andreypopp@moz-7261DC60.net) (Quit: andreypopp)
[11:24:19] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[11:27:38] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[11:27:39] *** ChanServ sets mode: +o pnkfelix
[11:31:05] *** Joins: vmx (vmx@moz-DA0EC50B.dip0.t-ipconnect.de)
[11:31:40] *** Quits: sigma (sigma@moz-6E1846A2.range86-184.btcentralplus.com) (Client exited)
[11:35:45] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[11:41:55] *** Joins: Earnestly (earnest@88884C6.A3735F9C.39C00A7A.IP)
[11:50:57] *** Quits: vmx (vmx@moz-DA0EC50B.dip0.t-ipconnect.de) (Ping timeout)
[11:52:17] *** Joins: vmx (vmx@moz-DA0EC50B.dip0.t-ipconnect.de)
[11:57:38] *** Joins: juturna (Mibbit@moz-A06909E4.glbb.ne.jp)
[12:00:53] *** Quits: vmx (vmx@moz-DA0EC50B.dip0.t-ipconnect.de) (Ping timeout)
[12:03:28] *** Joins: pyon (user@F4DA2F11.BD7DB6F4.1C8C8CE9.IP)
[12:05:05] *** Quits: juturna (Mibbit@moz-A06909E4.glbb.ne.jp) (Quit: http://www.mibbit.com ajax IRC Client)
[12:06:05] *** Joins: vmx (vmx@moz-DA0EC50B.dip0.t-ipconnect.de)
[12:08:10] *** Quits: rca (rcatolino@moz-FE9D6793.adsl.proxad.net) (Ping timeout)
[12:09:51] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[12:10:41] *** Joins: TobiasFar (tm@moz-A929D162.flosoft-servers.net)
[12:10:43] *** Quits: heftig (heftig@moz-B8F5CC82.dip0.t-ipconnect.de) (Quit: Quitting)
[12:10:56] *** Joins: sigma (sigma@moz-6E1846A2.range86-184.btcentralplus.com)
[12:11:39] *** Joins: heftig (heftig@moz-B8F5CC82.dip0.t-ipconnect.de)
[12:12:22] *** Joins: pao (pao@moz-AF905E87.fbx.proxad.net)
[12:12:38] <TobiasFar> hi. what could be the reason for the linker not finding a function of a rust static library? nm shows the function is in the rust lib. http://nopaste2.doomsong.co.uk/1387367843.php
[12:13:04] <pyon> I have a "struct Foo<'self> { ... }", and now I am trying to write an implementation for this struct. However, "impl Foo<'self> { ... }" gives the following compilation error: "Illegal lifetime 'self: the `self` lifetime must be declared". What does this mean?
[12:13:51] <arrrrrrrrr> impl<'self>
[12:14:29] <pyon> Ah, thanks!
[12:14:54] <arrrrrrrrr> you don't have to call it self
[12:15:25] <ezyang> You shouldn't call it self, in fact 
[12:15:43] <dbaupp> and you can't, on master
[12:16:56] <arrrrrrrrr> TobiasFar: rust_init == _rust_init?
[12:17:06] *** Quits: zmthy (zmthy@moz-C2881CC3.ecs.vuw.ac.nz) (Quit: leaving)
[12:18:32] <Boreeas> If I have a file "id3v1.rs" which includes "pud mod ID3v1 { ... }", how do I reexport the ID3v1 mod from another file in the same directory?. I tried "pub use id3v1::ID3v1; mod id3v1;", but that gives me an unresolved import error
[12:18:39] *** Quits: sigma (sigma@moz-6E1846A2.range86-184.btcentralplus.com) (Client exited)
[12:19:08] <TobiasFar> arrrrrrrrr: ah..right...in my cpp i had extern void .... probably need extern "C" void ...
[12:19:09] <TobiasFar> thx
[12:19:11] <arrrrrrrrr> pub use self::id3v1::...
[12:19:19] <arrrrrrrrr> Boreeas: ^
[12:20:37] *** Joins: rca (rcatolino@moz-FE9D6793.adsl.proxad.net)
[12:20:40] <pyon> arrrrrrrrr: ezyang: If I call it 'a, I get "Illegal lifetime 'a: only 'self is allowed as a part of a type declaration".
[12:20:59] <pyon> arrrrrrrrr: ezyang: But I am using 0.8, not master.
[12:21:12] <arrrrrrrrr> What OS?
[12:21:34] <pyon> Linux, 64-bit.
[12:21:39] <arrrrrrrrr> What distro?
[12:21:44] <pyon> Arch.
[12:21:50] <arrrrrrrrr> strcat has a repo for master
[12:22:20] <arrrrrrrrr> [thestinger]
[12:22:22] <arrrrrrrrr> SigLevel = Optional
[12:22:23] <dbaupp> https://github.com/mozilla/rust/wiki/Doc-packages,-editors,-and-other-tools#packages
[12:22:23] <arrrrrrrrr> Server = http://pkgbuild.com/~thestinger/repo/$arch
[12:22:49] <pyon> broken link
[12:23:15] <pyon> But I found rust-git on AUR.
[12:23:15] <pyon> :-)
[12:23:25] *** Joins: sigma (sigma@moz-6E1846A2.range86-184.btcentralplus.com)
[12:24:48] <Boreeas> arrrrrrrrr: Thanks. What determines whether I need to prepend self:: in front of the use?
[12:25:23] <TobiasFar> so linking to my rust compiled static lib i now get an undefined ref from the linker for "__rust_crate_map_toplevel". http://nopaste2.doomsong.co.uk/1387369483.php . have i missed something during compilation of the static lib or what could be the cause?
[12:25:48] <arrrrrrrrr> Boreeas: Don't know. I had the same problem yesterday.
[12:28:41] <dbaupp> arrrrrrrrr: Boreeas: http://static.rust-lang.org/doc/master/tutorial.html#importing-names-into-the-local-scope
[12:30:50] <Boreeas> dbaupp: Yeah, but if it's in two separate files, how does rustc know it's a submodule, and not a module on its own?
[12:30:58] *** Quits: sigma (sigma@moz-6E1846A2.range86-184.btcentralplus.com) (Client exited)
[12:31:34] <dbaupp> Boreeas: 
[12:31:42] <dbaupp> oops
[12:32:09] <dbaupp> A submodule is introduced by `mod foo;`, which looks for `foo.rs` or `foo/mod.rs`
[12:32:33] <dbaupp> By "module on its own" do you mean "something that I want to run rustc on separately"?
[12:34:09] <Boreeas> No. The thing is just that it works in other places. My project structure in the file system is roughtly like this: folder mp3 { file mpdec.rs, file id3.rs, file id3v1.rs }. In id3.rs, I have the reexport of id3v1, which needs a "use self::*"
[12:34:37] <Boreeas> but in mpdec.rs, I import id3, and it works with "use id3::*;", with no self::
[12:34:48] *** Joins: sigma (sigma@moz-6E1846A2.range86-184.btcentralplus.com)
[12:35:08] <arrrrrrrrr> do you call rustc on mpdec.rs directly?
[12:35:14] <Boreeas> yep
[12:35:19] <arrrrrrrrr> there's the difference :)
[12:36:07] <arrrrrrrrr> you could also write "mod id3v1;" in mpdec.rs 
[12:36:13] <arrrrrrrrr> then you don't have to use self::
[12:36:18] <dbaupp> Boreeas: I'm confused about the difference between "submodule" and "module"?
[12:36:27] <Boreeas> dbaupp: So am I, apparently
[12:36:45] <dbaupp> Boreeas: fwiw, as far as I can tell from what you said, there is none :)
[12:36:56] <dbaupp> well, almost none
[12:37:23] <arrrrrrrrr> A imports B imports C  vs  A imports (B and C)
[12:38:13] <arrrrrrrrr> first case: B has to write self::      second case: B doesn't have to write self::
[12:38:15] <arrrrrrrrr> it's confusing
[12:38:58] <dbaupp> `use` is always relative to the crate root (that is, the file on which you run rustc), so in `mod id3 { pub use <FOO>; mod id3v1 { ... } }`, `<FOO>` needs to refer to id3v1, i.e. either `self::id3v1::*;` to override the relative-to-crate-root, or just `pub use id3::id3v1;`
[12:39:30] <arrrrrrrrr> that makes sense :)
[12:39:33] <dbaupp> err. `pub use id3::id3v1::*;` for the latter case
[12:41:29] <arrrrrrrrr> dbaupp: so if a file might later be used as a module, should I always write self:: just so that I don't have to change it later?
[12:41:31] <TobiasFar> do i have to like some librust.a to my rust compile static lib to use it from other C/C++ code?
[12:41:52] <dbaupp> arrrrrrrrr: a file is always a module
[12:42:12] <arrrrrrrrr> I mean if I don't call rustc (--lib) on that file directly later
[12:42:14] <dbaupp> do you mean "a crate that might be later used as a module"?
[12:42:16] <dbaupp> right
[12:42:52] <dbaupp> TobiasFar: if you don't get an answer now, you should talk to acrichto, he's been working on that stuff recently :)
[12:43:17] *** Quits: sigma (sigma@moz-6E1846A2.range86-184.btcentralplus.com) (Client exited)
[12:43:59] <dbaupp> arrrrrrrrr: I believe `self` may actually be removed, fwiw
[12:44:16] <dbaupp> (it apparently makes the name resolution algorithm undecidable.)
[12:44:20] <arrrrrrrrr> that's good
[12:45:15] <dbaupp> rusti: mod test { use self::foo::bar; mod foo { pub use super::bar; } }
[12:45:18] -rusti- pastebinned 10 lines of output: http://ix.io/9qJ
[12:45:31] <TobiasFar> dbaupp: thanks..will give that a shot
[12:46:05] <arrrrrrrrr> rusti: version()
[12:46:13] -rusti- failed to pastebin 7 lines of output
[12:46:22] <arrrrrrrrr> rusti: version
[12:46:23] -rusti- "rustc 0.9-pre (61f8c05 2013-10-24 13:01:18 -0700)"
[12:46:34] <arrrrrrrrr> "failed to pastebin" oho
[12:50:07] *** Quits: pao (pao@moz-AF905E87.fbx.proxad.net) (Quit: pao)
[12:50:43] *** pmoore|away is now known as pmoore
[12:52:14] *** Joins: sigma (sigma@moz-6E1846A2.range86-184.btcentralplus.com)
[12:53:19] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[12:53:50] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[12:59:20] *** Quits: arrrrrrrrr (arrrrrrrrr@moz-1FE60361.dynamic.qsc.de) (Ping timeout)
[12:59:55] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[13:00:36] *** Joins: DeTeam (DeTeam@92C799C.31715274.F5F3AF2.IP)
[13:01:52] *** Quits: DeTeam (DeTeam@92C799C.31715274.F5F3AF2.IP) (Quit: DeTeam)
[13:02:02] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[13:06:49] *** Joins: pao (pao@moz-AF905E87.fbx.proxad.net)
[13:09:07] *** Quits: Dessimat0r (Dessimat0r@3258E608.E588CE06.9A579328.IP) (Ping timeout)
[13:19:21] *** Joins: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP)
[13:22:43] *** Joins: jhasse (jhass_000@9E09513E.9CBCFE09.49B3D974.IP)
[13:26:40] <jhasse> Hi! I've got a short question regarding rustpkg internals: In the function target_lib_dir in path_utils.rs:116 it pushes host_triple() onto the base dir, but shouldn't that be target_triple()? Am I right to assume that the host is the platform the compiler runs on and target the platform for which the compiler produces executables?
[13:26:53] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Connection reset by peer)
[13:27:31] *** Joins: skade (skade@moz-AC7A4F7F.sys11.net)
[13:28:45] <bjz> jhasse: you are doing rustpkg work?!
[13:28:48] *** Quits: bleibig (bleibig@moz-B4D9C5AF.hsd1.ca.comcast.net) (Ping timeout)
[13:29:15] <dbaupp> jhasse: I believe that is correct
[13:29:29] <jhasse> bjz, I'm trying to fix rustpkg on Windows
[13:29:56] <bjz> ooh, nice
[13:31:20] <jhasse> ok, I will play around with the implementation to understand it more. Unfortunately ./configure on windows is damn slow and make -j4 also doesn't work ... :/
[13:31:20] <eddyb> is there a non-mutable split_at?
[13:31:45] <eddyb> just for convenience's sake, so I don't have to store the split position in locals
[13:42:38] *** Quits: hongminhee (sid295@moz-5F4AA75A.irccloud.com) (Ping timeout)
[13:42:38] *** Quits: etrepum (sid763@moz-5F4AA75A.irccloud.com) (Ping timeout)
[13:43:13] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[13:43:13] *** ChanServ sets mode: +o tjc
[13:48:01] *** Joins: Ms2ger (Ms2ger@8B85F0F7.C5F25A2D.F15B0BB3.IP)
[13:51:03] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[13:54:09] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[14:02:19] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[14:10:02] *** jorendorff_away is now known as jorendorff
[14:10:37] <tgummerer> anyone got an idea how I can make the create_node function work here?  http://pastebin.com/3Pgb4XSy
[14:11:16] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[14:12:17] *** Quits: pao (pao@moz-AF905E87.fbx.proxad.net) (Quit: pao)
[14:12:38] *** Quits: veddan (viktor@moz-C79BC80B.csbnet.se) (Ping timeout)
[14:13:45] <bstrie> tgummerer: what's the error?
[14:15:15] *** Quits: buster (buster@3A0EAB5F.9C69795C.ACFE537F.IP) (Client exited)
[14:16:35] <tgummerer> bstrie: multiple unfortunately :/ borrowed value does not live long enough on line 35 and used of moved block on line 34 and 35.
[14:20:04] <bstrie> hm, I'm not good enough at borrowing to be able to help without the full code to play with. wonder who else is around this early in the morning...
[14:21:07] <eddyb> tgummerer: what are you doing with BBs?
[14:21:37] <eddyb> tgummerer: you cannot return a stack local bu reference
[14:21:56] <eddyb> *by
[14:22:38] *** Quits: rca (rcatolino@moz-FE9D6793.adsl.proxad.net) (Ping timeout)
[14:23:11] <eddyb> tgummerer: try to put it on the heap or return by value
[14:23:24] *** Joins: canhtak (canhtak@moz-258236CD.wl.t.ulaval.ca)
[14:24:28] <eddyb> tgummerer: or you can return a reference to the block in the hashmap
[14:25:00] <eddyb> but that means that the hashmap cannot be modified as long as you have the reference
[14:25:40] *** Joins: rca (rcatolino@moz-FE9D6793.adsl.proxad.net)
[14:26:10] <tgummerer> eddyb: I'm trying to program this in rust: http://code.google.com/p/multi-language-bench/source/browse/trunk/src/havlak/python/LoopTesterApp.py
[14:26:26] <tgummerer> how can i return what i got from the hashmap by value?
[14:26:46] *** Quits: skade (skade@moz-AC7A4F7F.sys11.net) (Ping timeout)
[14:27:02] <eddyb> sorry. the last answer is the closest one to what you want to do
[14:27:36] <eddyb> ah, it's a benchmark :)
[14:28:11] <tgummerer> ah ok, thanks, how do I return the reference?  Yeah exactly.
[14:28:59] <eddyb> http://static.rust-lang.org/doc/master/std/hashmap/struct.HashMap.html
[14:29:13] *** Quits: dbaupp (Thunderbir@moz-EB2EFE6F.lns20.syd6.internode.on.net) (Quit: dbaupp)
[14:29:18] <eddyb> find_or_insert returns a reference
[14:29:39] <tgummerer> ah ok, thanks for your help!
[14:30:04] <eddyb> tgummerer: the entire create_node function should be find_or_insert_with
[14:30:54] <eddyb> tgummerer: keep in mind that line 30 does nothing
[14:30:54] *** Joins: buster (buster@3A0EAB5F.9C69795C.ACFE537F.IP)
[14:31:28] *** Joins: skade (skade@30BBD5E6.505237C9.CAE22B62.IP)
[14:32:04] <tgummerer> eddyb: right, thanks for spotting that, that's unnecessary.
[14:33:12] <eddyb> tgummerer: and placeholderonly is len() == 0 or is_empty
[14:33:41] *** Quits: refold (gman@moz-42D68426.a258.priv.bahnhof.se) (Quit: leaving)
[14:33:52] <eddyb> startnode can be Option<&'a BasicBlock>
[14:34:17] <eddyb> but its very existance makes the hashmap immutable
[14:35:42] <eddyb> self methods (instead of &self) can only be called once, as they consume their object
[14:37:26] <tgummerer> eddyb: ok, thanks a lot for taking the time for helping me!
[14:37:32] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: rcirc on GNU Emacs 24.3.1)
[14:37:47] *** Joins: dbaupp (Thunderbir@moz-EB2EFE6F.lns20.syd6.internode.on.net)
[14:38:04] *** jorendorff is now known as jorendorff_away
[14:38:10] <eddyb> tgummerer: it will take a while to convert python code to Rust
[14:38:20] <eddyb> at least it should be faster :P
[14:40:08] <tgummerer> eddyb: yeah, I'm noticing that now :) hehe I certainly hope so!
[14:41:02] <eddyb> unless you compare with pypy, which has a chance
[14:42:04] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[14:43:03] *** Quits: rca (rcatolino@moz-FE9D6793.adsl.proxad.net) (Ping timeout)
[14:45:00] *** Joins: rca (rcatolino@moz-FE9D6793.adsl.proxad.net)
[14:47:23] *** Quits: jhasse (jhass_000@9E09513E.9CBCFE09.49B3D974.IP) (Ping timeout)
[14:50:20] *** jorendorff_away is now known as jorendorff
[14:50:30] *** Joins: veddan (viktor@moz-C79BC80B.csbnet.se)
[14:54:32] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[14:54:40] <hoverbear> Good news everyone! Apple Mail still sucks.
[14:58:27] *** Joins: sankha93 (Instantbir@79D63D3D.82E7DDFE.EFB84E89.IP)
[14:58:40] *** Joins: autra (augustin@A14DAE84.7F753DD1.EE2CA32B.IP)
[14:59:11] *** Joins: lpy (lpy@12172131.F09091A8.1348A864.IP)
[15:02:06] <cmr> eddyb: link to the from_elem PR?
[15:02:45] *** jorendorff is now known as jorendorff_away
[15:02:47] <eddyb> cmr: https://github.com/mozilla/rust/pull/10918
[15:03:02] <eddyb> wait
[15:03:11] <eddyb> when did it get merged?
[15:03:34] <cmr> 5 days ago according to bors?
[15:03:36] *** flaper87 is now known as flaper87|afk
[15:04:11] <eddyb> then it's okay. I was afraid it got in the previous TWiR and I messed up
[15:04:31] *** Joins: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net)
[15:04:33] <eddyb> cmr: thanks again (you shouldn't have) :)
[15:06:25] *** Joins: jhasse (jhass_000@moz-3031C125.ewe-ip-backbone.de)
[15:06:51] *** Quits: dbaupp (Thunderbir@moz-EB2EFE6F.lns20.syd6.internode.on.net) (Quit: dbaupp)
[15:06:54] *** Joins: arrrrrrrrr (arrrrrrrrr@moz-1FE60361.dynamic.qsc.de)
[15:07:32] *** Quits: jaen (jaen@moz-CC96815C.neoplus.adsl.tpnet.pl) (Ping timeout)
[15:08:10] *** Quits: jhasse (jhass_000@moz-3031C125.ewe-ip-backbone.de) (Ping timeout)
[15:08:10] *** Quits: vmx (vmx@moz-DA0EC50B.dip0.t-ipconnect.de) (Ping timeout)
[15:08:50] *** Joins: vmx (vmx@moz-DA0EC50B.dip0.t-ipconnect.de)
[15:13:59] *** Quits: Meistarin (uid19523@moz-A42E5B7B.irccloud.com) (Ping timeout)
[15:14:33] *** Quits: posco (sid14832@moz-5F4AA75A.irccloud.com) (Ping timeout)
[15:14:33] *** Quits: wilfred (sid159@moz-5F4AA75A.irccloud.com) (Ping timeout)
[15:14:33] *** Quits: wycats_ (sid79@moz-5F4AA75A.irccloud.com) (Ping timeout)
[15:14:33] *** Quits: osa1 (uid13910@moz-5F4AA75A.irccloud.com) (Ping timeout)
[15:16:16] *** Quits: autra (augustin@A14DAE84.7F753DD1.EE2CA32B.IP) (Quit: by!)
[15:19:15] <bjz> acrichto: beep
[15:20:00] *** flaper87|afk is now known as flaper87
[15:22:00] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[15:22:06] <erickt1> Eridius: ping
[15:22:50] <pyon> Is it possible to create a static nonempty HashMap?
[15:22:54] <cmr> no
[15:23:09] <pyon> Oh.
[15:23:21] <bstrie> pyon: you can stick it in an option, though
[15:24:30] <pyon> bstrie: What for? :-O
[15:24:51] <bstrie> pyon: so that you can have something empty that you initialize later
[15:25:11] <bstrie> presumably it's a mutable static, as an empty immutable hashmap isn't very useful!
[15:25:32] <pyon> bstrie: Believe it or not, an immutable static hashmap is precisely what I need.
[15:25:44] <bstrie> oh I see, I misread "nonempty"
[15:25:54] <arrrrrrrrr> pyon: What do you need it for?
[15:26:08] *** Quits: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net) (Quit: leaving)
[15:26:27] <erickt1> pyon: we do have a PR about this: https://github.com/mozilla/rust/issues/4864
[15:26:29] <bstrie> pyon: people have requested this, for things like compile-time lookup tables.
[15:26:38] <pyon> arrrrrrrrr: I am making a toy RDBMS. I have metadata tables that contain information about user tables. And I want to hardcode the structure of the metadata tables.
[15:27:17] <pyon> :-O
[15:27:37] <arrrrrrrrr> pyon: Write an init function and a getter function that returns an immutable pointer?
[15:28:42] <arrrrrrrrr> or init in the getter function
[15:29:21] <arrrrrrrrr> if option == None { init } return option.unwrap()
[15:31:13] <pyon> arrrrrrrrr: Thanks for the suggestion, I am going to do that. (I am using "contexts" which are basically a struct containing an arena and a hashset of tables. Each context is filled with the metadata of the tables involved in a single transaction. When a context is created, I am going to insert the information about the metadata tables.)
[15:31:33] *** Joins: autra (augustin@A14DAE84.7F753DD1.EE2CA32B.IP)
[15:31:54] <Ms2ger> arrrrrrrrr, (I wish that pattern looked nicer, we have some of it in Servo)
[15:34:24] <arrrrrrrrr> Ms2ger: it can look quite nice https://gist.github.com/anonymous/2085dcfb852856c720c1
[15:34:33] *** jorendorff_away is now known as jorendorff
[15:34:52] <Ms2ger> Ugh, macros :)
[15:35:10] <eddyb> pyon: it requires a lot of CTFE magic to be better than a runtime-initialized hashmap
[15:35:44] <pyon> eddyb: CTFE?
[15:35:52] <eddyb> compile-time function evaluation
[15:35:54] <eddyb> pyon: which operations do you need on the keys/values?
[15:36:17] <eddyb> if you just iterate, [(K, V)] beats a hashmap
[15:37:02] *** Quits: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP) (Client exited)
[15:37:41] <pyon> eddyb: the keys are table names, the values are table descriptions (stuff like, how wide a row is, in bytes)... I guess you are right that I could just use a vector, most queries are not supposed to involve gazillions of tables
[15:37:54] *** Quits: skade (skade@30BBD5E6.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[15:37:58] *** Joins: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com)
[15:37:59] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[15:38:42] <eddyb> pyon: if you want constant lookup, this can end up being more efficient than hashing strings at runtime: https://github.com/mozilla/rust/issues/4864#issuecomment-19778685
[15:38:59] *** Quits: canhtak (canhtak@moz-258236CD.wl.t.ulaval.ca) (Quit: canhtak)
[15:39:22] <arrrrrrrrr> I've two questions regarding llvm/rustc: Is the stack pointer moved only once (twice) per function call or is it moved in every block. How does llvm determine which functions to inline?
[15:39:52] <cmr> arrrrrrrrr: blocks are lexical, and it has a heuristic it applies based on function size and inline hints.
[15:40:13] <eddyb> "function size" might explain the butterfly effect
[15:40:26] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Ping timeout)
[15:40:37] <eddyb> it almost means I shouldn't use that many helper closures, because I can't force inlining on them
[15:40:49] <eddyb> s/almost/also
[15:41:02] <pyon> eddyb: lemme see
[15:41:24] <cmr> eddyb: by the time closures are inlined so many optimization passes have already been run that the code is going to be suboptimal, since all closures are behind indirection.
[15:41:44] <arrrrrrrrr> the concrete question is: I have two functions f() and g(). f is called very often and calls g in a very unlikely branch. Assume that g has stack size comparable to f. Does LLVM know not to inline g?
[15:42:06] <cmr> mark g #[cold]
[15:42:10] *** Quits: sellout (Adium@moz-AE26682A.hlrn.qwest.net) (Quit: Leaving.)
[15:42:23] <eddyb> and/or #[inline(never)] (if you're sure you know what you're doing)
[15:42:36] <Scriptor> what does 'cold' mean in this case?
[15:42:46] <eddyb> it rarely gets called
[15:43:44] <eddyb> hot paths are those which use most CPU cycles
[15:44:21] <bstrie> haha, do we really have a #[cold] attribute?
[15:44:23] <arrrrrrrrr> So if I want g inlined in one place but not in the other, then I would write a #cold wrapper for g and call the wrapper in f?
[15:44:39] <bjz> bstrie: we already have Freeze
[15:45:02] <bjz> bstrie: we also have some ICEs
[15:45:43] * bstrie defenestrates bjz
[15:45:49] <bjz> ^_^
[15:46:13] <cmr> *cough* http://www.youtube.com/watch?v=SRH-Ywpz1_I
[15:46:17] <bstrie> bjz: I can't tolerate puns in here. that's a slippery slope
[15:46:31] *** Joins: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP)
[15:46:41] *** Quits: vmx (vmx@moz-DA0EC50B.dip0.t-ipconnect.de) (Ping timeout)
[15:47:12] *** Joins: vmx (vmx@moz-DA0EC50B.dip0.t-ipconnect.de)
[15:49:33] *** bjz is now known as mr_freeze
[15:49:34] <cmr> https://github.com/mozilla/rust/pull/11024 just landed
[15:50:34] *** mr_freeze is now known as mr_freeze_has_been_frozen_out_
[15:50:43] *** Joins: Dessimat0r (Dessimat0r@3258E608.E588CE06.9A579328.IP)
[15:50:45] *** mr_freeze_has_been_frozen_out_ is now known as bjz
[15:51:07] <eddyb> cmr: is it... cool?
[15:51:25] <eddyb> oh, return :D
[15:51:51] <bjz> heh
[15:52:11] <bjz> silly registered nicks
[15:52:22] <bjz> why do we need them?
[15:52:25] <bjz> xD
[15:52:37] <jack> we put +M on here just to prevent you from making that joke.
[15:52:38] <bstrie> bjz is in league with the spambots! get him!!
[15:52:44] <jack> MISSION ACCOMPLISHED
[15:52:59] * bjz has been found out by bstrie 
[15:53:06] <bstrie> bjz and Ms2ger both
[15:53:12] * bjz is actually THE spambot
[15:53:14] <bstrie> they're like bots made of meat
[15:53:22] <eddyb> cmr: just 6 lines? hah, I was expecting more
[15:53:31] <jack> bjz: the last spambot round tha filled up my irccloud tabs was all bjz-named spam bots.
[15:53:32] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[15:53:32] *** ChanServ sets mode: +ao dherman dherman
[15:53:39] <pyon> How do I create an instance of a struct that has its own lifetime as a generic parameter? I am tryinig to fix lines 27-30 from this paste: https://gist.github.com/eduardoleon/8024679
[15:53:43] <jack> The evidence is mountain.
[15:53:46] * bjz wrote the spambot in rust, so at least that's something
[15:53:48] <jack> mounting even.
[15:54:11] <bjz> hah, really?
[15:54:23] <eddyb> pyon: pro-tip: shift-click the line numbers: https://gist.github.com/eduardoleon/8024679#file-schema-rs-L27-L30
[15:54:30] <bjz> bjz named spambots?
[15:54:51] <pyon> eddyb: Ah, did not know that. Thanks, I will take it into consideration.
[15:54:52] <bstrie> eddyb: ctrl+click doesn't work :(
[15:55:14] <eddyb> pyon: 'self is going away, you should use 'a. and I think Map::new() is what you want
[15:55:30] <bjz> OOH, nice eddyb 
[15:55:44] <eddyb> bjz: hmm?
[15:55:47] <bstrie> pyon: what version of rust are you using?
[15:55:57] <pyon> bstrie: 0.8
[15:56:03] <eddyb> eeeh, upgrade to master
[15:56:09] <bstrie> pyon: gross!
[15:56:11] <eddyb> pyon: inference is pretty powerful, but limited to the contents of a function
[15:56:13] <bjz> eddyb: highlighting multiple line numbers
[15:56:24] <bjz> pyon: goosh, so far behind
[15:56:39] <eddyb> bjz: I didn't expect that to be news to a lot of longer-ish-term github users
[15:58:05] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[15:58:16] <bjz> eddyb: I'm sure it's news to many folks
[15:58:45] <bjz> eddyb: be thankful you had the privilege to tell somebody who didn't know
[15:58:52] <bjz> ^_^
[15:59:05] *** Joins: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP)
[15:59:35] * bjz is sure there are many other cool things hidden away in github
[15:59:39] <arrrrrrrrr> bjz: privilege is never earned so this isn't privilege
[15:59:44] <arrrrrrrrr> just thought you should know
[15:59:59] <bjz> heh
[16:00:13] <eddyb> bjz: like the 3D file (at least those used for 3D printed parts) renderer?
[16:00:42] <eddyb> and there's a map-related thing (a list of waypoints? I don't remember)
[16:00:45] <bjz> csv?
[16:00:46] <bjz> https://help.github.com/articles/rendering-csv-and-tsv-data
[16:00:58] <bstrie> the most useful github trick is that you can press "t" in a repository to begin a fuzzy-match search of filenames
[16:01:13] <eddyb> bjz: hah, I didn't know about that
[16:01:26] <eddyb> bjz: or I just forgot about it
[16:01:44] <bjz> neat!
[16:02:20] <bjz> <3 gh
[16:02:26] <eddyb> bjz: https://github.com/benbalter/dc-wifi-social/blob/master/bars.geojson
[16:02:42] <eddyb> and https://github.com/skalnik/secret-bear-clip/blob/master/stl/clip.stl
[16:03:13] <bjz> lovely that they're using openstreetmap
[16:03:45] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: This bear's gotta fly.)
[16:04:04] <eddyb> hmm, can you gist, like, potential locations for a meeting? that would be really cool
[16:04:27] <eddyb> though slightly less practical than dedicated solutions
[16:04:29] *** pmoore is now known as pmoore|afk
[16:04:38] *** Joins: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net)
[16:05:03] *** Quits: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net) (Quit: Leaving...)
[16:05:14] <bjz> heh
[16:05:16] <bstrie> cmr: so what *does* return in a closure do now?
[16:05:29] <cmr> bstrie: returns from the closure
[16:05:48] <bstrie> so it's useless, then :P
[16:05:55] <eddyb> shush
[16:05:57] <cmr> why?
[16:06:06] <cmr> early return in closures is pretty useful
[16:06:09] <eddyb> it does what it's supposed to do
[16:06:11] <bjz> yep
[16:06:15] <bstrie> if your closure gets so complex that you think that you need early returns, you should just have a function
[16:06:20] <bjz> heh
[16:06:32] <eddyb> bstrie: unless you want to capture things. that's why it's a closure
[16:06:38] <cmr> ok, we'll turn *you* into the capture hoisting machine.
[16:06:42] <bstrie> shrug. pass it in, at that point
[16:07:00] <bjz> but it makes it more symmetrical anyway with regular functions
[16:07:04] <cmr> bstrie: that's not an option for things like iterators
[16:07:06] <cmr> which take a closure
[16:07:13] <eddyb> if you want early return from the enclosing function, you actually want catchable exceptions
[16:07:18] *** Quits: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP) (Input/output error)
[16:07:42] <eddyb> which Rust doesn't have. done
[16:07:52] <bjz> exceptions as a return technique?
[16:07:54] <bjz> :P
[16:08:00] <bstrie> eh, I'm not asking for that. I'm just saying that this patch is boring :P
[16:08:02] *** Joins: canhtak (canhtak@moz-258236CD.wl.t.ulaval.ca)
[16:08:22] <eddyb> return from an enclosing function has pretty much identical semantics with catchable exceptions
[16:09:00] <bstrie> I think forbidding return in closures might actually be a good idea
[16:09:16] <bstrie> it would save us a lot of time answering questions in the long run
[16:09:27] <bstrie> even if the answer is always just "take ten seconds and think about what you're actually doing"
[16:09:31] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[16:10:22] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Quit: leaving)
[16:11:01] *** Joins: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu)
[16:11:20] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[16:12:14] *** Quits: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP) (Ping timeout)
[16:12:56] *** Joins: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net)
[16:13:54] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Taking a nap.)
[16:15:27] *** Joins: sellout (Adium@moz-968E9A09.hsd1.co.comcast.net)
[16:17:48] *** Quits: sellout (Adium@moz-968E9A09.hsd1.co.comcast.net) (Ping timeout)
[16:22:02] *** Joins: jvns (bork@87D98E32.4046EB22.428F94DD.IP)
[16:23:02] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[16:25:10] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[16:28:28] <pyon> For maps whose keys are ints, what is usually more efficient, a std::hashmap::HashMap, or an extra::treemap::TreeMap?
[16:28:47] *** Quits: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP) (Input/output error)
[16:28:53] <pyon> s/ints/uints/
[16:29:00] *** Joins: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP)
[16:30:57] <bstrie> I have no idea what the relative performance of those two is
[16:31:14] <bstrie> HashMap certainly gets more use, as it's in std rather than extra
[16:31:42] <pyon> Ah, then I will stick to that. :-)
[16:31:52] <eddyb> pyon: I think HashMap has an extra cost because of SipHash
[16:31:56] *** Joins: sellout (Adium@moz-968E9A09.hsd1.co.comcast.net)
[16:34:32] <pyon> Mmm...
[16:34:32] <pyon> If I declare "type Foo = bar::baz::Quux;", shouldn't I be able to do "Foo::new(...)" instead of "bar::baz::Quux::new(...);"?
[16:34:55] <bstrie> pyon: ...I believe you should be able to. might be a bug
[16:35:00] <cmr> pyon: "should" is a question of philosophy, but the reality is that you can't.
[16:35:02] <cmr> (not a bug)
[16:35:07] <bstrie> cmr: why not?
[16:35:13] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[16:35:17] <cmr> bstrie: I don't know.
[16:35:17] <bstrie> doesn't that make type aliases basically useless?
[16:35:40] <cmr> a little bit, yes.
[16:35:47] <bstrie> wtf
[16:36:08] <pyon> Well, not "basically useless" (still useful at the type-level), but significantly less useful (not useful at the term-level).
[16:36:09] <bstrie> I presume somebody's filed a bug for this at some point, even if it's been closed
[16:36:24] <bstrie> gotta find that bug
[16:36:39] *** Joins: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr)
[16:36:41] <bstrie> and by gotta find that bug, I mean gotta pester cmr to recall it from memory
[16:36:42] *** Quits: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[16:36:56] <cmr> I don't actually remember seeing one.
[16:36:58] <bstrie> cmr > github search
[16:37:02] <cmr> And my browser history agrees
[16:37:14] *** pmoore|afk is now known as pmoore
[16:37:15] <bstrie> I'll file a bug, then
[16:37:19] <bstrie> unless someone else wants to
[16:37:36] *** Joins: skade (skade@moz-B73EE4D5.pools.arcor-ip.net)
[16:38:16] *** Quits: vmx (vmx@moz-DA0EC50B.dip0.t-ipconnect.de) (Ping timeout)
[16:39:54] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[16:40:13] *** Joins: vmx (vmx@moz-DA0EC50B.dip0.t-ipconnect.de)
[16:40:14] *** Joins: andreypopp (andreypopp@moz-7261DC60.net)
[16:41:10] <adridu59> acrichto: any suggestion for my problem? otherwise I'll just have to keep it xfailed
[16:41:56] *** Quits: vmx (vmx@moz-DA0EC50B.dip0.t-ipconnect.de) (Quit: Leaving)
[16:42:27] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[16:42:27] *** ChanServ sets mode: +ao dherman dherman
[16:42:34] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[16:45:09] <bstrie> cmr pyon https://github.com/mozilla/rust/issues/11047
[16:46:35] *** Quits: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[16:47:19] <pyon> bstrie: lemme see
[16:47:47] <pyon> bstrie: ty
[16:48:32] *** Joins: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP)
[16:49:39] *** Quits: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net) (Input/output error)
[16:51:15] *** Quits: canhtak (canhtak@moz-258236CD.wl.t.ulaval.ca) (Ping timeout)
[16:52:24] <bstrie> with 230 more subscribers, /r/rust will surpass /r/lua
[16:52:25] *** Joins: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net)
[16:52:25] *** ChanServ sets mode: +ao dherman dherman
[16:52:30] <bstrie> we're climbing the ranks!
[16:53:34] *** Joins: josh (josh@moz-241B5D71.mpls.qwest.net)
[16:53:34] *** Joins: jackneill (jackneill@moz-36FDFEEA.pool.digikabel.hu)
[16:53:36] *** Quits: arrrrrrrrr (arrrrrrrrr@moz-1FE60361.dynamic.qsc.de) (Ping timeout)
[16:56:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:56:16] *** Joins: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net)
[16:57:13] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[16:59:14] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[17:04:32] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[17:13:04] *** Joins: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net)
[17:13:30] <jvns> how can I run unit tests in Rust? I see `rust test` being mentioned in places, but `rust` is gone
[17:13:45] <cmr> jvns: rustc --test foo.rs ./foo
[17:13:49] <cmr> erm, foo.rs;
[17:13:59] <jvns> cool
[17:16:27] *** Joins: eholk (eholk@moz-BA312F07.crest.iu.edu)
[17:16:55] *** Quits: sankha93 (Instantbir@79D63D3D.82E7DDFE.EFB84E89.IP) (Ping timeout)
[17:17:43] *** Joins: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP)
[17:19:31] *** Quits: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP) (Ping timeout)
[17:19:33] <jvns> so when I run rustc without --test, does it include the tests?
[17:19:50] <cmr> no
[17:20:06] <cmr> #[test] implies #[cfg(test)], and --test gives --cfg test
[17:20:10] <cmr> so they're conditionally compiled
[17:20:31] <jvns> excellent
[17:20:51] * jvns = happy
[17:21:06] <jvns> hmm is this documented anywhere?
[17:21:31] <jvns> the only thing I found about testing was in Rust for Rubyists
[17:21:34] <cmr> https://github.com/mozilla/rust/wiki/Doc-unit-testing
[17:21:39] <cmr> doesn't look like it's in there though
[17:22:15] <jvns> sounds like it could be in the manual
[17:22:56] *** Quits: KindOne (KindOne@moz-AD778EEF.dynamic.ip.windstream.net) (Input/output error)
[17:25:01] <eddyb> the outdated manual?
[17:25:21] <cmr> it's not fully outdated.
[17:26:56] <eddyb> "fully" meaning the span between two releases?
[17:27:14] <cmr> it's not updated for releases.
[17:27:32] <cmr> but new content has been added by acrichto and pcwalton as they add/change things.
[17:28:58] *** pmoore is now known as pmoore|away
[17:29:49] <jvns> cmr: would this be a useful addition to the manual? https://gist.github.com/jvns/e51607b5da599a295b2d
[17:30:32] *** Quits: lpy (lpy@12172131.F09091A8.1348A864.IP) (Client exited)
[17:30:34] *** Quits: buster (buster@3A0EAB5F.9C69795C.ACFE537F.IP) (Quit: Leaving.)
[17:30:37] <cmr> jvns: I don't think it belongs in the manual. It's a detail of the compiler and libextra, not of the language.
[17:31:02] <cmr> We could probably use a testing tutorial that replaces that wiki page, though.
[17:31:08] <jvns> in the tutorial, maybe?
[17:31:24] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[17:31:30] *** Quits: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP) (Quit: Taking a nap.)
[17:31:40] <jvns> a testing tutorial makes sense
[17:31:47] <jvns> since there are already a bunch of extra tutorials
[17:33:17] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[17:33:21] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Ping timeout)
[17:33:54] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[17:33:57] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[17:35:06] *** Joins: FreeFull (freefull@moz-EFEF3DB5.as13285.net)
[17:36:49] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[17:36:49] *** ChanServ sets mode: +o pnkfelix
[17:40:23] *** Quits: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net) (Input/output error)
[17:41:31] *** Quits: scythe (scythe@moz-9D6E72BE.lugatgt.org) (Ping timeout)
[17:41:47] *** Quits: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net) (Quit: dherman)
[17:44:05] *** Joins: ross (ross@moz-5EA04060.br.br.cox.net)
[17:45:23] <jvns> cmr: proposed a testing tutorial! https://github.com/mozilla/rust/pull/11052
[17:45:54] <cmr> jvns: could you migrate the contents of the wiki page over to it?
[17:46:02] <cmr> If you edit the wiki page you can get the raw markdown.
[17:47:00] <Blei> bstrie: i think i was running into this once with Path
[17:47:28] <Blei> `pub use Path = blah::PosixPath;` works, but not when using type
[17:47:33] <Blei> it's a bit strange
[17:47:55] <Blei> (somewhat related, you can't instantiate structs with type aliased names)
[17:48:14] <jvns> cmr: hmm, I was thinking of the scope of this tutorial as "how to test your Rust programs", not "how the compiler test suite is organized"
[17:48:29] <cmr> jvns: https://github.com/mozilla/rust/wiki/Doc-unit-testing
[17:48:34] <jvns> oh, that one!
[17:48:59] <jvns> fantastic
[17:52:37] *** Joins: Peaker (eyal@AA56D864.38D8CF6B.FC30AC02.IP)
[17:53:10] <bstrie> Peaker: you might need to register to talk.... we've had some botnet floods recently
[17:53:18] <Peaker> I needed to register to /join :)
[17:53:41] *** Quits: yota (sdouche@moz-7D878FB8.securactive.net) (Quit: Ex-Chat)
[17:53:50] <Peaker> any Rust devs available to give feedback on a green-thread-stack-management idea?
[17:53:57] <cmr> Peaker: shoot
[17:54:02] <Peaker> Cool :)
[17:54:12] <eddyb> Blei: `type` aliases only the type name, nothing else
[17:54:22] <Peaker> Say each function got an implicit "stack frame type" that's automatically generated according to the local variables it defines
[17:54:27] <Peaker> and according to the functions it calls
[17:54:47] <eddyb> Blei: while `use` aliases anything with that name (you can have a type, a function and a module named "PosixPath" in blah)
[17:54:50] <Peaker> if functions are called sequentially, they're incorporated into a union inside the stack frame type.  If they are called concurrently, into a struct
[17:55:07] *** Joins: adu (ajr@moz-1A861F1E.washdc.fios.verizon.net)
[17:55:11] <Blei> eddyb: yeah I know, but it's confusing and imo makes `type` less useful than it could be
[17:55:18] *** Quits: adu (ajr@moz-1A861F1E.washdc.fios.verizon.net) (Quit: adu)
[17:55:27] <Peaker> so the "stack frame type" allows us to manually allocate the precise (worst-case) stack space needed to run a function (and it's descendant task tree)
[17:56:09] <Peaker> if we call given function parameters, we could have our own type parameterized by the stack frame type of the given functions, so their stack frame type can be incorporated into ours, even though they're given by the caller
[17:56:14] *** Joins: stvc (quassel@DDF9BE86.571456BD.9510F13D.IP)
[17:56:15] *** flaper87 is now known as flaper87|afk
[17:56:41] <Peaker> cmr: I'm worrying about this because I think for fine-grained concurrency -- even the minimum stack size of a few KB is way too large
[17:56:49] <eddyb> Peaker: are you talking about moving a function's stack on the heap or something?
[17:57:03] <cmr> Peaker: and in the case of recursion or when the tasks don't form a tree?
[17:57:12] <Peaker> eddyb: no no -- the function's stack is given to it as an allocation -- it can be allocated like any object can
[17:57:40] <Peaker> cmr: there is another way to call functions -- which doesn't incorporate their stack frame into yours.  By manually providing a pointer to some stack space allocation
[17:57:56] <eddyb> Peaker: well, yeah, I was putting it wrong. I've mentioned this in the past, there's a non-task related situation which needs this
[17:57:59] <Peaker> cmr: so for allocations, you'd be forced to allocate the extra space (I think this is a feature, not a bug)
[17:58:16] <Peaker> cmr: Not sure what you mean by tasks not forming a tree -- aren't they always forming a tree by definition?
[17:58:34] *** Quits: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu) (Ping timeout)
[17:58:47] <cmr> Peaker: oh, the tree of *spawned* tasks?
[17:59:23] <eddyb> Peaker: this is how some functions work in v8 (generators are forced to this model) - and it also shows up in std::function in C++ and procs in Rust
[17:59:26] <cmr> Peaker: When you say fine-grained concurrency, do you mean data parallelism?
[17:59:31] <Peaker> cmr: yeah, or the tree of function calls -- if we now annotate each function call as "concurrent" or "sequential" -- the two trees relate
[17:59:54] <cmr> function calls certainly don't form a tree.
[18:00:11] <eddyb> closures don't really count, but they still have a hidden environment ptr that points to an opaque structure containing the captures
[18:00:12] <Peaker> cmr: I mean if you examine the concurrent task tree -- the leaves in many real-world programs are taking too much stack space relatively to their tiny tasks and there are too many of them
[18:00:58] <Peaker> cmr: You can look at function invocations as a tree (ignoring the fact other functions also call some of the same functions, forming a DAG -- if we look at a single function and all the functions called from it, it's a tree)
[18:01:20] <Blei> recursion!
[18:01:21] <cmr> Peaker: ignoring recursion, yes.
[18:01:25] <Peaker> eddyb: you mean v8 generators reify the stack as a type?
[18:01:53] <cmr> Peaker: Which *exact* use case are you tailoring this for? This is a *lot* of complexity.
[18:01:57] <Peaker> cmr: well, the recursive invocation can be considered a new child in the tree that happens to be the same function, rather than an up-reference (i.e: not a tree of functions, but a tree of invocations)
[18:02:23] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[18:02:28] <Peaker> cmr: Well, I'm working on high-performance systems in C -- where we have user-level threads.  And I've noticed something worrying in the user-level thread code
[18:02:45] <eddyb> Peaker: it's not a "type" per say, just an allocated space for the shared captures
[18:02:47] <Peaker> cmr: when the concurrency is too fine-grained, the allocation of a whole user-level thread is too expensive
[18:03:12] <Peaker> cmr: so what ends up happening -- is very very ugly, manual event loops implemented ad-hoc inside user-level threads to coordinate callback-based concurrency
[18:03:13] <cmr> Peaker: how fine-grained? fork-join style / data parallel?
[18:03:25] <cmr> (like cilk)
[18:04:32] <Peaker> cmr: Well, we implement a storage controller -- so assume we have tens of thousands of concurrent IO's. Each concurrent IO may require hundreds of operations which can be concurrent.  If we use naive user-level threads for each concurrent task we need we end up eating a *lot* of stack space
[18:04:45] <Eridius> erickt: pong
[18:05:26] <cmr> Peaker: Ah, ok.
[18:06:05] *** Joins: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net)
[18:06:12] <cmr> Well, it's certainly far too much complexity for Rust, but I think the idea has promise.
[18:06:25] <Peaker> cmr: so I actually shun the user-level thread framework we have, and use manual callbacks -- so that I can have uniform style across the fine-grained and coarse-grained concurrency.  But I've noticed the manual context keeping I was doing for this was something a language could abstract for me
[18:06:27] <erickt> Eridius: hey! I saw you updated your openssl fork. I wanted to let you know I merged it into mine and then restructured it to work with rustpkg: https://github.com/erickt/rustcrypto
[18:06:59] <Eridius> erickt: oh nice. Does this mean I can stop maintaining mine? ;)
[18:07:05] <erickt> Eridius: I also got it into rust-ci.
[18:07:09] <Eridius> awesome
[18:07:23] <Peaker> Basically my code has:  struct read_stack_frame { some_params ...; void (*ret_addr)(struct read_stack_frame *, .. results ..); read_private private; /* <-- contains the nested stack frames needed to execute */ };
[18:07:33] <erickt> Eridius: yeah, I'm happy to maintain it
[18:08:24] <erickt> Eridius: I'm thinking about renaming it to rust-openssl though. I'm not sure if many people see rustcrypto and think of openssl
[18:08:36] <Eridius> erickt: possibly a good idea
[18:08:36] *** Quits: sellout (Adium@moz-968E9A09.hsd1.co.comcast.net) (Quit: Leaving.)
[18:09:11] <cmr> Peaker: Do you have a scheduler here?
[18:09:36] <Peaker> cmr: The user-level threads have a scheduler.  I use a standard reactor/event loop
[18:09:51] <Peaker> cmr: with ordinary "callback hell" (which with enough discipline, is not that hellish, but indeed tedious)
[18:10:01] <cmr> ok, makes sense then.
[18:10:29] <Peaker> anyway after realizing this "pattern" (of manually nesting stack frame structures) I realized this should really be in a programming language :)
[18:11:39] <Peaker> I thought about implementing it as a preprocessor for C. Though maybe it could be a preprocessor/extension for Rust.  Or is there some nice mechanism other than preprocessing for extending Rust?
[18:11:57] <eddyb> macros
[18:12:03] <cmr> We have a (almost-hygenic) macro system.
[18:12:09] *** Quits: jvns (bork@87D98E32.4046EB22.428F94DD.IP) (Ping timeout)
[18:12:17] <eddyb> it's a turing tarpit
[18:12:28] <eddyb> (though it doesn't have to be)
[18:12:32] <Peaker> hmm. I wonder if macros can do this -- since it's essentially a type system extension (capture local variable declarations and place them in the structure)
[18:12:43] <cmr> They probably can't.
[18:12:55] <cmr> Not without significant jank, that is.
[18:13:10] <cmr> it'd probably be easiest to prototype as a preprocessor anyway.
[18:13:45] <cmr> (for the record I'm suggestion a procedural macro (syntax extension) not a macro_rules! macro)
[18:14:23] <Peaker> what are those two?
[18:14:42] <cmr> http://static.rust-lang.org/doc/master/tutorial-macros.html
[18:14:54] <cmr> Macros in Rust are a token tree -> AST transformation.'
[18:15:13] <cmr> Procedural macros are written in Rust, using libsyntax. And currently (unfortunately) hardcoded into libsyntax :(
[18:15:42] <sfackler> my winter project is probably going to be to allow them to be loaded externally
[18:15:55] <cmr> \o/
[18:17:08] <bstrie> sfackler: I call shenanigans, we've wanted that for YEARS and nobody's done it! WHAT MAKES YOU SO SURE OF YOURSELF
[18:18:04] <sfackler> haha
[18:18:16] <sfackler> tbh there's an almost infinite list of things that we've wanted for years
[18:19:06] <bstrie> I don't know about that, I'd place the upper bound on list size at about 11,000 :)
[18:19:43] <Peaker> Is higher-kinded support for traits planned? Also, what other things are missing compared with Haskell's typeclasses?
[18:20:10] <cmr> Peaker: planned, yes. not sure if 1.0 or not.
[18:20:24] <bstrie> probably not 1.0 without a patch from heaven
[18:20:31] <cmr> I'm pretty sure traits are identical to haskell 98 typeclasses.
[18:20:57] *** Joins: sellout (Adium@2917A62E.8B65BA63.1D2A2C57.IP)
[18:21:13] <bstrie> cmr: I don't know if it's that clean-cut, can you do trait objects in haskell?
[18:21:31] <Peaker> cmr: Haskell98 has higher-kinded ("Monad" and "Functor" are in Haskell98)
[18:21:47] <cmr> Peaker: then I'm wrong!
[18:22:17] *** Joins: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[18:22:17] *** ChanServ sets mode: +ao dherman dherman
[18:22:42] <Peaker> I wish Rust copied the syntax of type-classes from Haskell: i.e: an explicit type-variable in the trait declaration, rather than the "self" thing -- allowing for example multi-parameter type-classes
[18:22:47] *** Quits: skade (skade@moz-B73EE4D5.pools.arcor-ip.net) (Quit: Textual IRC Client: www.textualapp.com)
[18:23:04] <FreeFull> Something like a Functor trait would be nice
[18:23:49] <eddyb> FreeFull: what would it do?
[18:23:52] *** Quits: apoelstra (username@moz-C92A9641.sw.biz.rr.com) (Quit: WeeChat 0.4.2)
[18:24:04] <Peaker> I think that if a language has the same feature as Haskell, copying the Haskell syntax for it would generally be a good idea :) (Haskell has an excellently designed syntax)
[18:24:45] *** Joins: arrrrrrrrr (arrrrrrrrr@moz-90AD0D2A.dynamic.qsc.de)
[18:24:50] <sellout> Peaker: I sent an email to nmatsakis with some suggestions for that. EG: trait Functor { fn map<A, B>(&self<A>, f: |A| -> B) -> ~Self<B>; }
[18:25:09] *** pnkfelix is now known as pnkfelix|cooking
[18:25:14] <sellout> Maybe `trait Functor: HigherOrder1`, where HigherOrder is built-in.
[18:25:34] <eddyb> why higher order?
[18:25:37] <Peaker> Haskell deduces that it's higher-order by doing kind inference (type inference on the types)
[18:25:45] <Peaker> higher-kinded rather, yeah
[18:25:54] <sellout> Peaker: IE, you don’t need the explicit variable, if you can add type params to self/Self.
[18:26:04] <eddyb> sellout: ":" is trait inheritance
[18:26:13] <sellout> eddyb: Right.
[18:26:22] <sellout> That’s what I intended.
[18:26:27] <eddyb> sellout: I've had to explain this before to someone else, and they didn't understand. it's not just bounds on Self, it's something different
[18:26:31] <Peaker> class Functor f where fmap :: (a -> b) -> f a -> f b       <-- use of "a" in function type means (a :: *).  Use of "f a" in function type means "f a :: *", so f is deduced: "f :: * -> *"
[18:26:57] <sellout> eddyb: Were HigherOrder1 is built-in, like Freeze or Send traits.
[18:27:14] <sellout> Peaker: Yeah, we can deduce that, too.
[18:27:14] <eddyb> sellout: that wouldn't work, I don't think
[18:27:24] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[18:27:32] *** Quits: arrrrrrrrr (arrrrrrrrr@moz-90AD0D2A.dynamic.qsc.de) (Ping timeout)
[18:27:38] <Peaker> sellout: what's the |A| ?  (I'm a Haskeller, wanna pick up Rust)
[18:27:43] <cmr> Peaker: closure
[18:27:57] <sfackler> |A| -> B is a closure that takes an A and returns a B
[18:27:58] <Peaker> Ah
[18:27:59] <cmr> |A| -> B is a closure taking A and returning a B
[18:28:02] <sellout> Peaker: A is just the a in Haskell.
[18:28:10] <Peaker> sellout: figured that part :) 
[18:28:14] <sellout> Peaker: Yeah, sorry.
[18:28:17] <eddyb> sellout: does Functor have to be non-generic?
[18:28:41] <sellout> eddyb: You mean vs `trait Functor<A> { …}`?
[18:28:52] <eddyb> sellout: oh, I see, heh
[18:29:09] <Peaker> would "map" need to be hard-coded to work with a closure, as opposed to a function?  Could it be parameterized on whether it is a function or a closure mapping an A to B?
[18:29:10] <eddyb> sellout: because you want ~Self<B> not ~Functor<B> or something like that, right?
[18:29:20] <sellout> eddyb: My initial attempt was more like trait Functor<F>, then using F instead of self/Self, but I like the self approach better.
[18:29:24] <sellout> eddyb: Exactly.
[18:29:37] <eddyb> with trait pointers and variadic generics it's rust-ier
[18:29:39] <Peaker> sellout: why do you like "Self"?  I hate it :(
[18:29:53] <Peaker> sellout: how can you do something like:   class MonadState m s where ... m .. s ....
[18:30:01] <Peaker> Self(0) Self(1)? :P
[18:30:30] *** Quits: autra (augustin@A14DAE84.7F753DD1.EE2CA32B.IP) (Ping timeout)
[18:30:31] <sellout> Peaker: Well, if you do `fn map<A, B>(obj: F<A>, f: …) -> F<B>`, then you can’t write foo.map(…)
[18:30:38] <Peaker> Also "Self" carries no semantic meaning.  "m" or "f" carry a *bit*
[18:30:39] <sellout> All functions end up being static.
[18:30:48] <eddyb> I think Haskell people misunderstand Self and trait inheritance
[18:30:57] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[18:31:07] <Peaker> eddyb: I thought "Self" in trait is just a reference to the implicit type variable the trait is constraining?
[18:31:10] <eddyb> nope
[18:31:19] <Peaker> ah, what is it then?
[18:32:04] <eddyb> it's something more magical. what's important, trait Foo: Bar {} isn't trait Foo<Self: Bar> {}
[18:32:37] <sellout> Peaker: and re: higher-order vs higher-kinded, I like the parallel between higher-order type operators and higher-order functions, but if someone decides higher-kinded is the terminology rust wants, I’m happy with that.
[18:32:38] <cmr> eddyb: isn't it, though?
[18:32:42] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:32:42] *** ChanServ sets mode: +ao brson brson
[18:32:45] <eddyb> it's not just "implicit", it's the "target" of the trait
[18:33:24] <eddyb> cmr: it's implied, in a way, I think. but trait inheritance encapsulates the inherited traits, like multiple inheritance in C++ does
[18:33:37] <Peaker> eddyb: is that like Haskell's:   class Bar a => Foo a where {} ?
[18:34:03] *** brson sets mode: -RM 
[18:34:13] *** Joins: epdtry (stuart@moz-6BEF78C1.hsd1.wa.comcast.net)
[18:34:16] <eddyb> I don't know enough Haskell to have a definite answer, but the "a" there doesn't seem right
[18:34:16] *** Joins: zz_kimundi (kimundi@moz-D3B44B8E.dip0.t-ipconnect.de)
[18:34:37] <FreeFull> Why not?
[18:34:41] <sellout> I would think that `trait Foo: Bar {}` is == to `class Bar self => Foo self where`
[18:34:55] <sellout> … which is what Peaker said.
[18:35:05] * sellout needs to pay more attention
[18:35:16] <Peaker> except the type-variable name is a nice point to give a bit of documentation/semantic meaning beyond "Self" (and also less noisy!)
[18:35:23] <eddyb> Peaker: we really need someone who knows both languages very well to explain these things properly
[18:35:24] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[18:35:37] <eddyb> Peaker: does that define Foo, or Bar?
[18:35:42] <FreeFull> class Functor f => Applicative f where (<*>) :: f (a -> b) -> f a -> f b
[18:35:45] <Peaker> eddyb: that defines "Foo"
[18:35:48] <sellout> Peaker: I mostly agree, but I think for rust we still need something like `self` (not Self).
[18:35:59] <eddyb> Peaker: does Foo incorporate something from Bar?
[18:36:07] <eddyb> Peaker: or just requires Bar?
[18:36:12] <Peaker> eddyb: Any type "a" which is a Foo must necessarily also be a Bar
[18:36:21] <eddyb> Peaker: just that requirement?
[18:36:28] <Peaker> eddyb: Yeah
[18:36:30] <sellout> eddyb: Just that anything that implements Foo also has to implement Bar, same as with traits.
[18:36:40] <eddyb> that's not precisely what trait inheritance is
[18:36:43] <Peaker> eddyb: you can't write:   instance Foo MyType where ... if you don't also have:   instance Bar MyType where ...
[18:36:46] <cmr> eddyb: then what is it?
[18:36:56] <eddyb> the requirement is a trait bound, like <T: Bar>
[18:37:17] <eddyb> trait inheritance also works like multiple structural inheritance
[18:37:38] <Peaker> well, of course the "Bar a" requirement is "available" in the class methods and their implementation (i.e: it means you're allowed to call Bar's methods from the implementation of Foo's methods)
[18:37:57] <eddyb> Peaker: hmm, but is that generic inference?
[18:37:59] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[18:38:16] <eddyb> Peaker: i.e. it works with more than just the equivalent of Self
[18:38:20] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[18:38:33] <Peaker> eddyb: The "Bar a" constraint on all "Foo" instances is called the "class's context", and it is not inferred
[18:38:46] <Peaker> not sure what you mean by that, but you can also have:
[18:39:00] <Peaker> class (Monad m, Error e) => MonadError m e where ..
[18:39:25] <Peaker> (define a class called "MonadError" whose instances are pairs of types (m, e)   where m must be a Monad instance, and e must be an Error instance
[18:40:03] <eddyb> Peaker: I mean, being able to use Bar's methods from Foo's requirement to have Bar - is that a generic mechanism?
[18:40:14] <Peaker> oh, yeah
[18:40:29] <eddyb> in Rust, it isn't. only trait inheritance does that
[18:40:43] *** Joins: pao (pao@moz-AF905E87.fbx.proxad.net)
[18:40:55] <Peaker> I mean that this subclassing itself is a generic mechanism -- you can use it in every class you define -- probably like you can use trait inheritance in any trait you define
[18:41:02] <Peaker> but maybe I don't understand what you mean by "generic mechanism"
[18:41:18] <sellout> Can steveklabnik write Rust for Haskellers next? ;)
[18:41:25] *** Joins: valenting (Thunderbir@9A1975C1.39CE2EE.E400A05F.IP)
[18:43:00] *** Joins: awidegreen (awidegreen@moz-3FE0A1F.a357.priv.bahnhof.se)
[18:43:01] <sellout> I feel like there’s some isomorphism, where he could write a single document and generate both “Rust for Haskellers” and “Haskell for Rustians” from it.
[18:43:15] <eddyb> Peaker: so if you have fn foo<A, B: Foo<A>>, with trait Foo<A>: Bar, B will be both Foo<A> and Bar, and A nothing. with trait Foo<A: Bar>, B will be Foo<A>, but A will still be nothing, because it doesn't have a bound
[18:43:33] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Quit: ziad)
[18:43:55] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[18:44:13] <Peaker> eddyb: can you write the full type of "foo" ?
[18:44:28] <eddyb> the arguments and return type don't matter
[18:45:03] <Peaker> Just want to write the equivalent Haskell type for comparison purposes.. Haskell doesn't have an equivalent for   Foo<...>  because the <> part is type variable instantiation which is done behind the scenes
[18:45:31] <steveklabnik> sellout my haskell is a bit too poor :(
[18:45:35] <eddyb> it's a bit hard to compare Haskell's generics to C++/Rust
[18:45:37] *** jld is now known as jld|pto
[18:45:45] <steveklabnik> it's been half a decade
[18:45:51] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[18:46:01] <eddyb> Peaker: I think this is a bug - right now it ignores that Foo<T> requires T: Bar (in the second case) - allowing you to define the function without the Bar bound on A, but not instantiate it (because you can't impl Foo<T> with T not Bar), so it doesn't break type checking
[18:46:03] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:46:03] *** ChanServ sets mode: +ao brson brson
[18:46:09] <Peaker> I think Haskell's syntax is so well designed, I wish more languages copied it rather than making up their own
[18:46:22] *** Joins: lenstr (lenstr@1453F6BE.9636F313.7A27613B.IP)
[18:46:30] <bstrie> I am... not a fan of haskell's pea-soup syntax :P
[18:46:42] <bstrie> needs more brackets and parentheses!!
[18:46:43] <eddyb> bstrie: :D
[18:46:54] * sellout is still a lisper at heart (and for pay)
[18:46:54] <bstrie> it's all just identifiers floating around being promiscuous
[18:47:12] <sellout> But I like the semantics of other languages better :)
[18:47:14] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[18:47:20] <Peaker> bstrie: "pea soup?
[18:47:20] <eddyb> bstrie: it's the only way you can go full retard functional, sadly
[18:47:27] <bstrie> sellout: curious where you work where you use lisp?
[18:47:34] <Peaker> bstrie: well, parens are for precedence :)
[18:47:39] <celeron55> let's make a language that has completely configurable syntax
[18:47:44] <Peaker> bstrie: a b c d   is just a really nice application syntax
[18:48:00] <Peaker> bstrie: equivalent to Lisp's (((a b) c) d) 
[18:48:02] <sellout> bstrie: http://clozure.com – a consultancy
[18:48:29] <Peaker> bstrie: indentation is also a nice replacement for {} blocks (though those are available too)
[18:48:45] <bstrie> Peaker: they're available, but it seems like nobody uses them :P
[18:48:59] <Peaker> bstrie: because they're mainly for making code generation easier
[18:49:06] <Peaker> everyone prefers indentation :)
[18:49:19] <sellout> Peaker: Definitely not true.
[18:49:27] <Peaker> (In the Haskell community)
[18:50:11] <steveklabnik> eddyb: let's stick away from saying things like 'full retard,' thanks.
[18:50:12] <bstrie> Peaker: fun fact... did you know that python also has optional brackets?
[18:50:28] *** Joins: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP)
[18:50:30] <eddyb> steveklabnik: did strike-through not work?
[18:50:50] <steveklabnik> i'm not sure what you're talking about
[18:51:05] <eddyb> is this normal text, no formatting?
[18:51:20] <bstrie> eddyb: yes, let's not use retard as a pejorative
[18:51:22] <Peaker> bstrie: #{ and #} yeah :)
[18:51:30] <bstrie> Peaker: bah, you've heard that joke before :P
[18:51:32] *** Quits: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP) (Quit: Taking a nap.)
[18:51:57] <steveklabnik> oh, I understand what you mean. Yes, I only see regular text.
[18:52:03] <bjz> eddyb: "it's a bit hard to compare Haskell's generics to C++/Rust" Rust's parametric polymorphism is far closer to Haskell than C++
[18:52:28] <bjz> eddyb: it's just the syntax is more like C++
[18:52:33] <eddyb> bstrie: as much as I hate dealing with Haskell, I didn't mean what was understood from my message. I was afraid it didn't make sense without that word, so I put it there, in strike-through
[18:52:42] <eddyb> bjz: but, Rust has compile-time instantiation
[18:52:44] <Peaker> eddyb: why do you hate dealing with Haskell?
[18:52:51] <bjz> eddyb: yes, that too
[18:53:02] <bjz> eddyb: but that is an implementation detail
[18:53:13] <eddyb> uhm, it's a very important detail
[18:53:16] <bjz> eddyb: semantically it is more like ML/Haskell
[18:53:24] <eddyb> you can't just replicate what Haskell does in Rust
[18:53:24] <bjz> yes
[18:53:54] <bjz> not saying it's not important
[18:53:57] <eddyb> someone tried to convince me you need runtime generic instantiation for variadic generics and I felt like I was going nuts
[18:54:13] <bjz> but C++ templates are duck typed, which is *not* how rust works
[18:54:52] <bjz> that give C++ templates tons of power, but also horrible template errors
[18:55:16] <Peaker> eddyb: For RankNTypes, ExistentialTypes, etc, you might need some runtime support for generics..
[18:55:39] <Peaker> bjz: also, it means C++ can't really support RankNTypes, ExistentialTypes, etc, iiuc
[18:56:07] <bjz> Peaker: why's that? sorry, wasn't really following far back
[18:56:08] *** Joins: jdm (jdm@FCCEA34F.7672369.D8E68FF6.IP)
[18:56:08] *** ChanServ sets mode: +o jdm
[18:56:29] <eddyb> Peaker: you can cast any type that implements Trait to a Trait pointer, that's as close as it gets to "runtime"
[18:57:08] <eddyb> I was going to say this, but it seems you have to read at your own risk: "Haskell is just too far gone - to get close to it you have to replicate insane type system details that you just don't need for practical programming" - and then I'm not sure what I wanted to say after that
[18:57:19] *** Joins: jvns (bork@87D98E32.4046EB22.428F94DD.IP)
[18:57:35] <eddyb> maybe that you need Haskell's system to use something designed like Haskell, because it's insane otherwise
[18:57:48] *** Joins: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP)
[18:58:00] <eddyb> s/system/syntax/ I need to sleeeeep
[18:58:12] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[18:58:13] <Peaker> imagine an existential type:   data Foo = forall f. Foo f => AnyFoo f        [Foo]   is basically a list of pairs, ptr to Foo's class dictionary, and an "f".   In C++ I don't think you can do that, because of the duck typing it isn't reified in a dictionary at all.  Of course you can resort to OOP/virtual functions
[18:58:46] *** Quits: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP) (Quit: Taking a nap.)
[18:58:50] <Peaker> eddyb: Haskell doesn't have much "type system details" -- it's just the polymorphic typed lambda calculus with some sugar
[18:59:04] <Peaker> eddyb: i.e: the same type system visiting aliens are likely to use, but probably with different sugar :)
[18:59:06] *** Joins: echristo (echristo@A2012DB6.D6CCE4AE.77834EAA.IP)
[18:59:50] <eddyb> GADTs, things like Vec (which uses Succ and Church numbers, maybe), etc.
[18:59:51] *** Joins: moostik (Icedove@5A22E6A1.10715965.BCDF592F.IP)
[18:59:55] <bjz> Peaker: hah, love that last description :D
[19:00:03] <eddyb> if that's what you call sugar... *sigh*
[19:00:27] <Peaker> eddyb: GADTs are not a "Haskell detail" -- they're found in Coq/Agda too
[19:00:37] <Peaker> eddyb: they're not an arbitrary detail
[19:00:40] <bjz> and idris, I think
[19:00:44] <eddyb> Peaker: I didn't mean something Haskell-specific, but one of the things it includes
[19:00:46] <Peaker> eddyb: also, GADTs are indeed sugar over associated types, iiuc
[19:00:53] <Peaker> eddyb: and GADTs are *immensely* useful
[19:01:08] <Peaker> eddyb: if you want to encode more runtime invariants in the type system -- to have more reliable programs
[19:01:20] <Peaker> I hope Rust plans to have GADT support... :)
[19:01:25] <bjz> :)
[19:01:34] <bjz> Peaker: draw up a proposal
[19:01:50] <bjz> Peaker: it would be post 1.0
[19:01:59] <eddyb> some Haskell self-proclaimed-freak is praising idris as having the potential for replacing Haskell
[19:02:02] <bjz> Peaker: but it would be good to have an idea
[19:02:09] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[19:02:11] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[19:02:11] *** ChanServ sets mode: +ao pcwalton pcwalton
[19:02:25] <Peaker> bjz: I'm not involved in Rust enough to do that yet :)
[19:02:38] <eddyb> oh, this is what I wanted to say: at least in the Rust community nobody mocks me for writing "code intended for compilers"
[19:03:03] <eddyb> Peaker: I feel like you don't need to put those invariants in the type system
[19:03:05] <bstrie> eddyb: in the rust community, we all know just how hard it is to write a good compiler :P
[19:03:06] <bjz> eddyb: cool it mate
[19:03:14] *** Quits: andreypopp (andreypopp@moz-7261DC60.net) (Quit: andreypopp)
[19:03:17] *** Joins: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP)
[19:03:19] <Peaker> eddyb: It sounded like you think GADTs are a bad idea ("some insane details of the type system no practical program would ever need")?
[19:03:52] <bjz> Peaker: you are most welcome to. you seem to know your stuff
[19:03:57] <Peaker> eddyb: example:  Red Black tree can have the tree's invariants (except the ordering) encoded in the type system via GADTs
[19:04:06] <bstrie> let's all cool off on the language wars for a bit
[19:04:10] <bjz> Peaker: we need great people :)
[19:04:25] <bjz> bstrie: ++
[19:04:27] <eddyb> Peaker: not a bad idea... but it's past diminishing returns IMO
[19:04:43] *** Joins: heftig_ (heftig@moz-AC123F04.dip0.t-ipconnect.de)
[19:04:53] <bjz> Peaker: most of us here are volunteers
[19:05:05] *** Quits: heftig (heftig@moz-B8F5CC82.dip0.t-ipconnect.de) (Ping timeout)
[19:05:25] <bstrie> rust's goal is explicitly NOT to be maximally expressive. we just want to take what people write in C++, and save them from critical safety vulnerabilities
[19:05:38] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[19:05:43] <bstrie> so let's leave the discussion of super-advanced type systems for once we've achieved that goal
[19:05:51] <sellout> bstrie: That’s an interesting point. I hadn’t thought about it like that.
[19:06:09] <eddyb> there, now I feel better :). are we done with the DST/SST/whatnot discussion yet?
[19:06:13] <bjz> Peaker: yeah, lots of the advanced type system stuff is going to be post 1.0
[19:06:25] <bjz> but it doesn't hurt to plan
[19:06:40] <bjz> so that we're not working ourselves into corners
[19:06:59] <eddyb> fwiw, I have a crazy alternative to abusing the type system for failure safety, but I can't try and play with it until we have CTFE
[19:07:05] <bjz> but yeah, proposals are better sometimes than free-form debate on IRC
[19:07:21] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[19:08:06] <eddyb> that reminds me I have yet to reply to niko's comments on variadic generics, and it's almost been a week. *sigh* again
[19:09:11] *** Joins: ziad (ziad@B20586FB.BDB3D91.6E370BFC.IP)
[19:09:23] <brson> acrichto: how did the meetup go?
[19:09:38] <acrichto> brson: it was great! I think everyone had a good time
[19:09:43] <acrichto> we had some excellent talks
[19:09:58] <acrichto> and even ChrisMorgan's talk went off without a hitch!
[19:10:00] <brson> i watched the talks and they were great
[19:10:32] *** Quits: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP) (Quit: Taking a nap.)
[19:10:58] *** Joins: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu)
[19:11:42] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[19:12:15] *** Joins: arrrrrrrrr (arrrrrrrrr@moz-90AD0D2A.dynamic.qsc.de)
[19:12:45] <eddyb> Peaker: it's easier to add ion engines to a... uhm... let's say train than warp drive and then solve all the problems like annihilating its destination. maybe I'm overdoing it myself with this metaphor. also, for some reason I'm now curious about irdis, though I'm sure I won't like it
[19:13:25] <eddyb> just like I read more than half of a Haskell book - was I sadistic? I don't know. well, it wasn't *bad*, it's just not my taste
[19:14:22] <Peaker> eddyb: well, I think what these languages are all about (Haskell, Agda, Idris) is getting as much of the dynamic behavior of the program described formally and concisely in the type system -- mainly for safety purposes
[19:14:43] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[19:15:02] <Peaker> eddyb: IMO, the main cost is a difficult learning curve and sometimes more difficulty initially coming up with a workable design.   I think these two difficulties are much cheaper than the difficulties we deal with in more traditional approaches which don't encode much in the type system 
[19:15:33] <eddyb> you can't encode *everything* in the type system
[19:16:11] <Peaker> eddyb: well, the languages are about encoding more of it -- and Curry-Howard-Isomorphism lets you encode pretty much everything (or at least, every arbitrary property you'd like)
[19:16:52] <Scriptor> what's Curry-Howard mapping between?
[19:17:11] <Peaker> Scriptor: Types <-> Logic propositions.   Values of those types <-> Proofs of those propositions
[19:17:36] <eddyb> and what you end up is irrecognizable (that's not a word, apparently) - you will end up needing to train new generations in those languages just to use them. maybe I'm just being a grumpy old man
[19:17:50] *** Quits: lenstr (lenstr@1453F6BE.9636F313.7A27613B.IP) (Ping timeout)
[19:17:51] <Peaker> If the language is total (i.e: guaranteed to terminate with a valid result)  then you don't have to run the proof values -- the mere type-checking of the proofs is enough to verify the proof
[19:17:56] <sellout> eddyb: Instead of training them in current languages to use them?
[19:18:11] <Peaker> eddyb: well, COBOL was all about avoiding the need to train new generations in languages :)
[19:18:23] <Peaker> we know how that experiment turned out :)
[19:18:29] <Scriptor> ah, I see
[19:19:01] *** Joins: nil (nil@moz-5D50FF84.hsd1.fl.comcast.net)
[19:19:05] <jvns> when I call transmute("abcd".as_bytes()), why does it say that the resulting &[u8] is always 128 bits, no matter how long my string is?
[19:19:12] <bstrie> Peaker: evolution happens in small steps. rust doesn't have the clout to foist the full complexity of haskell onto the world overnight. we'll teach them about linear types and basic typeclasses, and leave the rest up to future languages
[19:19:31] <bstrie> it is a fallacy to believe that rust will be the Last Language Ever Made
[19:19:45] <Scriptor> I've been expecting a language like Rust to happen since I learned about Haskell
[19:19:46] *** Joins: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP)
[19:20:07] <Scriptor> basically something to take just a small subset of the ideas and introduce them into an otherwise more familiar language
[19:20:11] <Peaker> bstrie: that's fair enough -- It does sound like Rust is attempting to improve on C++.  I'm eager for a language that bridges Haskell and the C/C++ domain space.   Rust might be my best compromise for now
[19:20:15] *** Quits: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP) (Quit: Taking a nap.)
[19:20:23] <sellout> jvns: do you need to dereference your pointer?
[19:20:23] <Scriptor> kind of how various languages slowly adopted things introduced by lisp
[19:20:24] <bstrie> Peaker: being a good compromise is all that we aspire to :)
[19:20:28] <nil> greetings random developers :D
[19:20:32] <bstrie> Scriptor: exactly
[19:20:42] <eddyb> Rust doesn't need to go *that* far to replace unsafety with either safety or safe fail-only (is there a proper name for that one?) - that's why I like it so much
[19:20:44] <bstrie> nil: I would say hi to you, but I'm afraid that I'd segfault
[19:20:53] <jvns> Scriptor, it doesn't seem so -- "type &[u8] cannot be dereferenced"
[19:20:54] <sellout> Peaker: I think that’s what it is.
[19:21:13] <o11c> jvns: [u8] is not a type, remember
[19:21:22] <Scriptor> jvns: I think you meant 'sellout' there ;)
[19:21:32] <jvns> Scriptor: er, reading fail :)
[19:21:39] <jvns> o11c: yup, I know
[19:21:45] <Peaker> eddyb: There are many kinds of safety -- basically any invariant you want to verify is a part of "safety".  A GADT guaranteeing your code does not violate the Red-Black invariants adds a lot of safety -- and removes the need to write a test suite for the tree balancing
[19:21:52] <jvns> o11c: I'm trying to transmute a &[u8] but without any success
[19:22:01] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[19:22:16] *** Joins: g3xzh (g3xzh@moz-E33C8149.red.bezeqint.net)
[19:22:22] *** Quits: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu) (Ping timeout)
[19:22:31] *** Quits: josh (josh@moz-241B5D71.mpls.qwest.net) (Quit: josh)
[19:22:47] <eddyb> Peaker: I think there was something called "typestate" that had to do with enforcing invariants, in early Rust. it got removed for some reason
[19:23:05] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[19:23:06] <bstrie> eddyb: it got removed because it was too cumbersome to use
[19:23:09] <Peaker> eddyb: to be clear: *every* type enforces an invariant
[19:23:19] <epdtry> jvns: what are you trying to transmute it to?
[19:23:23] <Peaker> eddyb: When a function type says its argument is of type "Int", it's enforcing an invariant
[19:23:35] <bstrie> eddyb: also because the guarantees it provided weren't always very useful
[19:23:40] <jvns> epdtry: a struct type that I've defined
[19:23:41] <nil> I'd hate to be -that guy-, but would any of you care to illustrate what I'm doing wrong with a small rust snippet? https://gist.github.com/nildraak/f9e8a41e03a651f250f0 method translate and register reports incompatible type: values differ in mutability.
[19:23:48] <Peaker> eddyb: Types are all about enforcing invariants -- GADTs have a pretty good power/weight ratio at enforcing invariants
[19:23:53] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Ping timeout)
[19:24:03] <nil> I'm exploring Rust for the first time, it does seem like an enjoyable language.
[19:24:03] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[19:24:29] <bstrie> nil: mutability is part of the type there. & and &mut are different types entirely
[19:24:54] <bstrie> nil: you'll have to add &mut up in the Spatial trait if you want mutability in things that implement it
[19:24:57] <eddyb> Peaker: I've yet to get past the Haskell syntax - but if you mentioned red-black trees, is there a simple example somewhere?
[19:25:13] <eddyb> Peaker: I'm mostly curious how it would look in Rust
[19:25:16] <bstrie> nil: oh wait I'm dumb
[19:25:22] <jvns> the really confusing thing is that transmute reports my &[u8] as always being the same size (128 bits) -- I'd really expect it to change
[19:25:31] <Peaker> eddyb: https://github.com/yairchu/red-black-tree/blob/master/RedBlackTree.hs#L27   is a Haskell version. Not sure how it'd look in Rust
[19:25:39] <eddyb> jvns: it's two uints
[19:25:42] <epdtry> jvns: i believe &[T] is represented as (pointer to first element, number of elements), which is 128 bits on x86_64
[19:25:44] <Eridius> jvns: I didn't know translate() reports sizes at all
[19:25:44] <Peaker> eddyb: 27-37 describes the tree and its invariants fully
[19:25:44] <eddyb> jvns: length and pointer to first element
[19:25:47] <nil> ah, I see, I missed the mutable flag on the trait declaration, thanks
[19:25:50] <jvns> ah ha!
[19:25:56] <nil> huzzah small mistakes :D new languages are scary
[19:25:57] <bstrie> nil: nevermind I'm not dumb, I just confused entity and spatial :P
[19:26:04] <Eridius> nil: on an unrelated note, you don't need the allocation in main(). Drop the ~ before Kobold::new() and let it reside on the stack
[19:26:07] <bstrie> nil: but also I am dumb. don't let anyone tell you otherwise
[19:26:11] <jvns> Eridius: if the sizes don't match, transmute() will tell you what they are
[19:26:22] <bstrie> if people start thinking that I'm smart, they'll start referring questions to me. can't have that
[19:26:27] <jvns> hmm, how do I transmute the contents, then?
[19:26:33] <nil> I'm preparing to extend my example by transfering ownership of kobold to a entity manager, so I was preparing for that
[19:26:37] <Eridius> jvns: what are you trying to do?
[19:26:50] <jvns> Eridius: I'm trying to read an ELF file into a struct
[19:27:00] <Eridius> nil: well, the entity manager could also store it directly instead of through a pointer.
[19:27:08] <eddyb> jvns: you can't, really
[19:27:15] <jvns> well, just the header
[19:27:15] <Eridius> jvns: no I mean what is your transmute() trying to accomplish?
[19:27:19] <jvns> which is a fixed size
[19:27:20] *** Quits: tcreate (tcreate@7C181A70.200CF5B8.9D2C3D3E.IP) (Quit: Leaving...)
[19:27:23] <nil> true!
[19:27:24] <Eridius> are you trying to turn a &[u8] into a struct?
[19:27:25] *** Joins: lenstr (lenstr@6737B9B0.9636F313.7A27613B.IP)
[19:27:26] <eddyb> jvns: you have to cast raw pointers or read byte by byte
[19:27:28] <jvns> Eridius: yeah
[19:28:05] <eddyb> Peaker: shift+click - is this trick new to you too? (just an hour or two ago I found out this is new to most people) https://github.com/yairchu/red-black-tree/blob/master/RedBlackTree.hs#L27-L37
[19:28:23] <jvns> I'd really like to understand how to figure out how to do this -- I don't know where to start looking
[19:28:42] <Eridius> jvns: I do not recommend trying to transmuate a &[u8] that way. I would recommend copying the bytes
[19:28:53] <jvns> Eridius: hmm why not?
[19:28:54] <Eridius> jvns: but if you truly want to do that, you can probably transmute it to (&Struct, uint)
[19:29:22] <jvns> Eridius: I don't want to change it once I've transmuted it 
[19:29:23] <Eridius> jvns: unsafe code, horribly abuse of type system, your &[u8] is a slice and there may be other slices to it, etc.
[19:29:25] <eddyb> Peaker: the lack of structure really burns in me - it's hard to tell what anything is for
[19:29:44] <epdtry> jvns: i think you could get a raw pointer to vector contents and then copy it into the struct with std::ptr::copy_memory
[19:30:03] <jvns> where do I find the definition of &[u8] so I know how it's put together?
[19:30:25] <jvns> the std::vec page doesn't talk about it 
[19:30:36] <Peaker> eddyb: Foreign syntax is hard to read, news at eleven :)
[19:30:59] <Peaker> eddyb: It is quite structured, though
[19:31:00] *** Quits: arrrrrrrrr (arrrrrrrrr@moz-90AD0D2A.dynamic.qsc.de) (Ping timeout)
[19:31:09] <eddyb> Peaker: it's not the first time I see Haskell - but it's hard to guess any kind of structure
[19:31:19] <Eridius> jvns: std::unstable::raw
[19:31:21] <Eridius> jvns: it's undocumented
[19:31:33] <Eridius> jvns: and of course anything in std::unstable is subject to change
[19:31:49] <jvns> I guess I could copy it
[19:31:53] <Eridius> copying would be best
[19:32:04] <jvns> every time I try to copy something it's hard
[19:32:07] <Peaker> eddyb: 5 new data declarations/types, quite obvious. 2 of them are GADTs with 1,3 constructors. Each constructor has a very structured function type.  It's all full of structure
[19:32:08] <jvns> =P
[19:32:09] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[19:32:26] <jvns> but there's a core::clone in rust-core, so I guess I can use that somehow
[19:32:26] <eddyb> Peaker: what's with the function type? that's not obvious
[19:32:37] <jvns> so if I copy it, then I'll get a Vec<u8>
[19:32:47] <Peaker> eddyb: Tree :: Node Black n a -> Tree a      A "Tree" constructor is a function from a  "Node Black n a"  to a "Tree a"
[19:32:49] <jvns> and then I can transmute that?
[19:32:55] <eddyb> Peaker: wait... is it just changing the type of the constructor? that's all?
[19:32:56] <Eridius> jvns: you can probably create a &[u8] from a struct by transmuting &Struct to *u8 and then using std::vec::raw::mut_buf_as_slice() coupled with std::mem::size_of() to get a &mut [u8]
[19:33:16] <Eridius> jvns: I think you're a bit to cavalier about transmutes ;)
[19:33:42] <jvns> Eridius: maybe there is a better way than transmutes?
[19:33:54] <jvns> Eridius: I have some bytes in memory and I want to read an ELF header
[19:34:07] <eddyb> jvns: cast to an unsafe pointer and dereference
[19:34:16] <jvns> ah ha 
[19:34:23] <jvns> that sounds easier
[19:34:30] <jvns> is casting different than transmuting?
[19:34:33] <jvns> I thought they were the same
[19:34:35] <eddyb> nope
[19:34:38] <jvns> oh
[19:34:42] <Eridius> jvns: you can cast &T to *T with `as`
[19:34:46] <jvns> oh right
[19:34:48] <eddyb> transmuting is reinterpret_cast from C++
[19:34:50] <Eridius> although for slices, you need to use a method instead
[19:34:54] <eddyb> except it even works on values
[19:34:56] <Eridius> jvns: in current master I believe it's .as_ptr()
[19:35:25] <eddyb> if we had a Pod kind, maybe it would be possible to read it from a &[u8]
[19:35:27] *** Joins: bynaryshef (bynaryshef@moz-5D0DE6A3.mem.bellsouth.net)
[19:35:34] <Eridius> eddyb: didn't a Pod kind just land?
[19:35:36] <eddyb> s/it/an instance of a Pod type/
[19:35:37] <jvns> so I can do &[u8] as *Struct?
[19:35:46] <eddyb> Eridius: did it? I wasn't paying attention
[19:35:50] <Eridius> jvns: with current master it's presumably v.as_ptr() as *Struct
[19:35:50] *** Quits: eholk (eholk@moz-BA312F07.crest.iu.edu) (Quit: eholk)
[19:36:03] *** Joins: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP)
[19:36:04] <Eridius> jvns: you need unasfe{} to dereference the *Struct though
[19:36:11] *** Quits: Diamond (dick@moz-80556682.ks.ks.cox.net) (Quit: Leaving.)
[19:36:12] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[19:36:12] <Peaker> eddyb: It's declaring the type of the "Tree" constructor
[19:36:21] <jvns> yeah for sure
[19:36:23] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[19:36:29] <eddyb> jvns: I *think* you can take a reference to the first element. though &[u8] as *u8 works, IIRC
[19:36:42] <Peaker> eddyb: "Node t n a"   the "t" is Red or Black.  The "n" is the depth (number of black nodes till leafs).  The "a" is the contained data.   
[19:36:58] <eddyb> Peaker: hmm. let's stay at Tree. why does it need a different return type?
[19:37:04] <jvns> so it sounds like I need to do something unsafe whether I copy or not
[19:37:20] <eddyb> Peaker: what's the default return type for a constructor in "data Tree a"?
[19:37:35] <eddyb> isn't it Tree a?
[19:37:38] <Peaker> eddyb: It's a data constructor, it takes a "Node .." and wraps it in a "Tree".  The "Tree" is a thin wrapper around "Node" -- basically meant to forget the Node's depth (which is uninteresting to the external tree's user)
[19:37:46] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[19:37:46] *** ChanServ sets mode: +o tjc
[19:38:10] <jvns> so when I dereference the *Struct and return it... huh
[19:38:12] <jvns> does that make a copy?
[19:38:52] <eddyb> Peaker: or does it say that it takes the "a" from a black node and puts it in a Tree? I want to understand why it needs to be a GADT
[19:38:57] <eddyb> jvns: yes
[19:39:02] <eddyb> jvns: you can also cast to &Struct
[19:39:03] <jvns> cool
[19:39:03] <Peaker> eddyb: Yeah, GADTs explicitly (re-)specify the full type in the result type of constructors.  This is not (completely) redundant, though, because you can add constraints, remove type variables, etc.  The "Tree" type could have instead been written:  data Tree a = forall n. Node Black n a
[19:39:20] <jvns> but if it's a &Struct, I wouldn't be able to return it?
[19:39:28] <eddyb> jvns: but then you have to ensure it has the same lifetime as the buffer
[19:39:44] <jvns> the buffer's lifetime should be forever
[19:39:54] <Peaker> eddyb: "data Tree" could have used an explicit forall/existential rather than a GADT -- it uses a GADT to avoid using two different GHC extensions and just use the more general one for all the 3 types here
[19:40:09] <jvns> or I can make it as long as I want at least
[19:40:22] <jvns> hmm I don't understand how the compiler can know that the &Struct is related to the buffer
[19:40:32] <jvns> because of the cast?
[19:40:38] *** Joins: jviereck (Adium@moz-B1B15ECC.dip0.t-ipconnect.de)
[19:40:50] <jvns> I think of unsafe casts as total disasters that the compiler can't make inferences from
[19:41:10] <eddyb> jvns: fn foo<'a>(&'a [u8]) -> &'a Struct
[19:41:31] <eddyb> Peaker: thanks. that would be equivalent to fn Tree<N, A>(node: Node<Black, N, A>) -> Tree<A>, I guess
[19:41:42] <jvns> whoa what is this 'a
[19:41:47] <eddyb> jvns: lifetimes
[19:41:52] <jvns> oh like 'static
[19:42:13] <eddyb> Peaker: where the constructor has a generic param that doesn't show up in the returned type - I guess that's what "forall" means
[19:42:47] <Peaker> eddyb: the idea is to "forget" the N -- so more like:   (node : forall N. Node<Black, N, A>) -> Tree<A>
[19:43:10] <Peaker> hmm.. forget my last comment, the forall is in the wrong place
[19:43:20] <eddyb> yes, but you have to hoist it into fn Tree's generic args
[19:43:24] *** Joins: fyolnish (fyolnish@moz-13899010.uqwimax.jp)
[19:43:27] <Peaker> eddyb: ah, yeah, exactly, it's called an "existential type" -- if you extract the underlying "Node" from the Tree, it has some unknown depth N
[19:43:57] *** Joins: samnardoni (samnardoni@moz-6E63ABD.dyn.plus.net)
[19:43:59] <Peaker> eddyb: the reason it's a GADT here is to allow having the "N" not appear in the Tree's type parameter list
[19:44:08] <eddyb> this will never work in Rust without runtime instantiation or generics over constants that work with non-constants >_>
[19:44:31] <eddyb> Peaker: yeah, I got that. but I guess Node makes better use of it
[19:44:52] <Peaker> eddyb: well, yeah, that's why I said above that to support existential types and GADTs you have to have some runtime support for generics.  However, the "n" here is "irrelevant" (a phantom type used exclusively for type-checking)
[19:45:07] *** Quits: fyolnish (fyolnish@moz-13899010.uqwimax.jp) (Ping timeout)
[19:45:25] <Peaker> eddyb: so it doesn't actually need any runtime support 
[19:45:36] <jvns> eddyb: oh hey it worked! amazing =)
[19:45:57] <eddyb> generics over constants will have to be implemented at some point (thus making Rust's generics eve closer to the power of C++ templates) - and for those you can actually have limited runtime support
[19:46:26] <Peaker> eddyb: anyhow, the interesting part is the "Node" GADT -- which says, if it's a black node, it contains unknown-colored nodes of depth N, and has depth N+1.   If it's a Red node, it contains only black nodes, and both children and parent are all of same depth N
[19:46:58] <eddyb> how do the constructors' types interact with the contents of the GADT and pattern-matching?
[19:47:16] <eddyb> because just the constructors are doable right now in Rust
[19:47:23] <Peaker> eddyb: that's what GADTs do:  they let you specify how the contained fields within the constructor relate to, and constraint, the type of the container
[19:47:39] <Peaker> (for the case it is that constructor)
[19:47:48] <eddyb> enums with variants create a constructor function for each variant, it's syntax sugar
[19:48:18] <Peaker> eddyb: right -- but they can't associate/constraint the type of the whole enum based on which constructor it is
[19:48:21] <eddyb> Peaker: so in: RedNode :: NodeH Black Black n a -> Node Red n a - do n and a refer to types, values, or both?
[19:48:47] <tiffany> http://www.reddit.com/r/rust/comments/1t6a64/calling_rust_from_c/ I'm confused, doesn't rust already have the ability to be called from C with extern "C"?
[19:48:52] <Peaker> eddyb: "n" refers to a type-level natural number (Zero is the type representing zero, Succ n  represents 1+n as a type)
[19:49:02] <Peaker> eddyb: "a" refers to the type of the user-data contained within each node of the tree
[19:49:10] <eddyb> Peaker: I was talking about identity
[19:49:58] <eddyb> they can't be just types, otherwise... how is construction defined? what gets put in a Node?
[19:50:09] <bstrie> tiffany: I suppose it's entirely possible that the only difference between the default rust ABI and a C ABI is that we mangle
[19:50:19] <bstrie> tiffany: hence why that appears to work
[19:50:41] <bjz> bstrie: universal server ahoy: https://gist.github.com/bjz/e4d536c63900960c9e15
[19:50:45] <bstrie> tiffany: it's a very strange blog post...
[19:50:47] <eddyb> Peaker: fwiw, annotating ADT constructors in Rust wouldn't be that hard - I thought GADTs were more complicated than that
[19:50:48] <tiffany> well the article itself is the person making the gcc rust frontend
[19:50:58] <Peaker> eddyb: ah, I see what you're asking. The parameter types of the function type are the fields that get put inside the constructor.  So in this case,  the result "Node Red n a" is the full "enum" type, and the parameter NodeH is the field that is stored within it
[19:51:15] <tiffany> I thought you could just use extern "C" to define such functions with rustc
[19:51:34] <bstrie> bjz: brilliant
[19:51:34] <eddyb> Peaker: so the LHS and the RHS of -> have to match in a way?
[19:51:42] <tiffany> with #[no_mangle], won't you have to mark the function as using fastcc, under rustc?
[19:51:50] <Peaker> eddyb: the eventual result (RHS of ->) has to match the type of the whole GADT
[19:51:50] <tiffany> in the C header, that is
[19:51:58] <bjz> bstrie: posted on the mailing list too
[19:51:59] *** Quits: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP) (Quit: Taking a nap.)
[19:52:08] <Peaker> eddyb: i.e: each of Nil, BlackNode, RedNode has to have a final result of type Node ? ? ?
[19:52:18] <eddyb> Peaker: that I understood. if n goes into n and a goes into a, that also makes sense
[19:52:41] <Peaker> eddyb: well, the "n" and "a" are type variables, I'll try to write the same GADT in pseudo-Rust syntax
[19:53:17] <eddyb> fn RedNode<N, A>(node: NodeH<Black, Black, N, A>) -> Node<Red, N, A> {???}
[19:53:26] <eddyb> becuase you can totally define that constructor
[19:53:35] <jvns> oh, but rust-core doesn't have as_ptr()
[19:53:37] <jvns> hmm.
[19:53:45] <eddyb> jvns: it has to have something. look around
[19:54:03] <jvns> oh, it has to_ptr()
[19:54:06] <jvns> that's not right
[19:54:25] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:54:25] <eddyb> bjz: pretty sure you can use a proc in Become, making it even better :D
[19:54:25] <jvns> that should definitely be called as_ptr()
[19:54:29] <Peaker> eddyb: that seems right -- can you write that constructor and the other two, in the same enum? And then when you pattern-match one of these constructors, get the same constraints as givens?
[19:54:39] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[19:54:59] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[19:55:14] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[19:55:20] <bjz> eddyb: but it needs to be called multiple times
[19:55:33] <eddyb> Peaker: ok, that's where it gets interesting!
[19:55:35] <Peaker> eddyb: i.e:  When you do:  case node of RedNode (NodeH leftChild userData rightChild) = ... <here the type checker knows leftChild/rightChild are both black, yay)
[19:55:46] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[19:55:50] <ziad> where can I read about the difference between proc(), &fn(), ~fn(), etc?
[19:55:56] *** Joins: canhtak (canhtak@moz-258236CD.wl.t.ulaval.ca)
[19:55:58] <eddyb> there's only proc() and ||
[19:56:10] *** Joins: Kruppe (user@moz-EE1E894A.home3.cgocable.net)
[19:56:13] <ziad> and proc() is supposed to be called only once?
[19:56:23] <eddyb> and extern "Rust" fn / extern "C" fn
[19:56:30] <eddyb> bjz: sorry. 'static || then
[19:56:55] <eddyb> bjz: seeing "extern fn" is bugging me. especially if it's not "Rust"
[19:57:17] <bjz> I thought "Rust" was the default
[19:57:26] <eddyb> only in some contexts
[19:57:29] *** jorendorff is now known as jorendorff_away
[19:57:34] <eddyb> which makes "extern fn" volatile to use
[19:57:35] <bjz> really?!
[19:57:39] <bstrie> what
[19:57:44] <bjz> that's..... wat
[19:57:57] <bjz> megawat
[19:58:25] <eddyb> Peaker: we don't have custom pattern-matching yet - I wasn't sure on the details in Haskell - but now I think it wouldn't be that hard to implement *some* sort of GADT
[19:58:29] <Peaker> eddyb: so, hope you can read that RB declaration now -- it just says each node has a depth n which is increased iff the node is black, identical in both children, and that red can only parent blacks -- and that's it, the rbtree invariants encoded in the type system
[19:58:55] <eddyb> sadly (for that RB Tree), Succ is too much magic
[19:59:11] <bjz> "'static |T| -> U" doesn't fulfill Send
[19:59:18] <eddyb> Peaker: we'll continue this after dinner, I guess. but I might have to go
[19:59:22] <Peaker> eddyb: in C++:  class Zero {}   template <typename T> class Succ<T> {};     That's all the "magic"
[19:59:34] <Peaker> eddyb: 0=Zero,  3=Succ<Succ<Succ<Zero> > >
[19:59:39] <eddyb> bjz: it doesn't o_O? pffft. I was really hoping it would
[19:59:45] <Peaker> eddyb: ok, bon apetit
[19:59:51] *** Joins: synackse (synackse__@moz-DFB8ED3B.lightspeed.wepbfl.sbcglobal.net)
[20:00:04] <eddyb> Peaker: except C++ won't let you instantiate Succ at runtime
[20:00:29] <eddyb> not even constants in templates - because they're constants
[20:01:06] <Peaker> eddyb: Note there is no runtime instantiation of "Succ" here anywhere either. In this example, Succ n/Zero are uninhabited types that have no values anyway
[20:01:27] <Peaker> eddyb: i.e: the "n" is a phantom type parameter to the Node/NodeH types, it is never used as the type of any actual value
[20:01:50] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[20:02:33] *** Joins: fyolnish (fyolnish@moz-13899010.uqwimax.jp)
[20:02:38] <tiffany> it's neat how easy it is to implement math on numbers-in-typesystem with pattern matching on parameters in languages like idris
[20:03:22] <bstrie> tiffany: we see through your ruse! no dependent types until rust 16.0 :P
[20:04:18] *** Quits: fyolnish (fyolnish@moz-13899010.uqwimax.jp) (Ping timeout)
[20:04:36] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[20:06:09] *** pnkfelix|cooking is now known as pnkfelix|satiated
[20:06:40] *** Joins: rca_ (rcatolino@moz-70492676.adsl.proxad.net)
[20:07:19] *** Quits: rca (rcatolino@moz-FE9D6793.adsl.proxad.net) (Ping timeout)
[20:08:53] *** Quits: rfw (rfw@moz-7D453A5B.rfw.name) (Ping timeout)
[20:09:10] <bjz> tiffany: I know eh?
[20:09:24] <bjz> tiffany: it makes me swoon
[20:09:47] *** Joins: rfw (rfw@moz-7D453A5B.rfw.name)
[20:09:51] *** Quits: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net) (Ping timeout)
[20:09:55] *** Joins: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net)
[20:10:29] *** Joins: dkeenaghan (dkeenaghan@A9F153F4.DDE28F19.986A907C.IP)
[20:11:34] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Ping timeout)
[20:11:49] *** Quits: synackse (synackse__@moz-DFB8ED3B.lightspeed.wepbfl.sbcglobal.net) (Ping timeout)
[20:12:56] <eddyb> Peaker: enum Succ<N> {} and enum Zero {}?
[20:13:32] <eddyb> Peaker: it would be crazy if this were to work in Rust, so I'm pretty sure it doesn't
[20:13:58] <tiffany> struct Zero; struct Succ<N>;
[20:14:23] <eddyb> tiffany: nope, you can construct those
[20:14:52] <eddyb> uninhabited enums might be fully equivalent to the Haskell types
[20:15:40] <bjz> eddyb: https://github.com/mozilla/rust/wiki/Doc-FAQ-Cheatsheet#how-do-i-express-phantom-types
[20:15:44] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[20:15:48] <bjz> they are super useful
[20:15:50] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: willingc)
[20:15:59] <tiffany> how do you do math on phantom numbers?
[20:16:26] *** Quits: jviereck (Adium@moz-B1B15ECC.dip0.t-ipconnect.de) (Quit: Leaving.)
[20:16:30] <bstrie> tiffany: with an aboocus
[20:16:31] <bjz> I use them in glfw-rs for non-consrtructable ffi handles: https://github.com/bjz/glfw-rs/blob/master/src/glfw/ffi.rs#L267
[20:16:34] *** Joins: synackse (synackse__@moz-DFB8ED3B.lightspeed.wepbfl.sbcglobal.net)
[20:16:36] <eddyb> [u8, ..N] is a thing, btw - you can parametrize functions on numbers with it
[20:16:59] *** Joins: autra (augustin@moz-BE76895F.fbx.proxad.net)
[20:16:59] <bjz> eddyb: er, what? didn't think you can yet
[20:17:02] <eddyb> and I mean... specialize at compile-time
[20:17:19] <eddyb> bjz: abusing the size of [u8, ..constant]
[20:17:20] <bjz> you have to specialise each number
[20:17:57] <Peaker> eddyb: Succ/Zero don't *have* to be uninhabited. But they can be
[20:17:58] <eddyb> fn foobar<N>(...) -> ... {let n = size_of::<N>(); ...} foobar::<[u8, ..1337]>()
[20:18:03] <Peaker> eddyb: nobody needs to construct them, but it's fine if they do
[20:18:17] <tiffany> they're inhabited in idris
[20:18:21] <bjz> yeah
[20:18:26] <bjz> they are
[20:18:33] <bjz> I think they optimise to uints
[20:18:42] <tiffany> I wrote a function to add two Nats together in idris as practice
[20:18:53] <tiffany> it'd be pretty absurd to not optimise them
[20:19:12] <eddyb> Peaker: I think you need existential types in Rust to get it working
[20:19:21] <eddyb> Peaker: or... I'm not sure :/
[20:19:30] <Peaker> eddyb: for the "Tree" type, yes. 
[20:19:45] <bjz> eddyb: do some research into idris - there is a great tutorial and some nice papers
[20:19:50] <Peaker> eddyb: A "Tree a" is existentially quantified about the depth of the Node within it
[20:19:52] *** Joins: jmbto (jmbto@moz-FE174E29.fbx.proxad.net)
[20:20:00] <eddyb> Peaker: Tree is actually doable
[20:20:01] <bjz> eddyb: I'd highly reccomend it, for the mind expansion factor
[20:20:05] <Peaker> eddyb: how?
[20:20:10] <eddyb> Peaker: I've shown you above
[20:20:18] <eddyb> Peaker: not inside an enum, but as a function
[20:20:28] *** Joins: yoshi (Mibbit@15E64609.6A8A1F30.A34EC3BB.IP)
[20:20:31] *** Parts: yoshi (Mibbit@15E64609.6A8A1F30.A34EC3BB.IP) ()
[20:21:01] <eddyb> Peaker: however, Node has n as a type param, which means you can't refer to a Node without knowing it's N, in Rust
[20:21:05] <Peaker> eddyb: I thought you used hypothetical code?   How can you have a Tree<A> that inside it, has a Node<Black, N, A>  where   N   is "existential" (i.e: can put anything in, cannot know what you extract out)?
[20:21:18] <eddyb> Peaker: erm, that's what it was confusing about it
[20:21:30] <Peaker> eddyb: yeah, that's exactly what "Tree" is meant to solve, and why I meant it's not possible
[20:21:59] *** Joins: umbridge (Mibbit@moz-5E896D71.dhcp.eucl.wi.charter.com)
[20:22:13] <eddyb> Peaker: nmatsakis used some "forall" syntax in his blog posts about DSTs and SSTs
[20:22:45] <jvns> can I write down a type that has size "7 bytes" in Rust?
[20:22:58] <eddyb> [u8, ..7]
[20:23:03] <jvns> oh of course
[20:23:04] <jvns> =D
[20:23:15] *** Parts: umbridge (Mibbit@moz-5E896D71.dhcp.eucl.wi.charter.com) ()
[20:23:31] <Peaker> yeah, "forall" is universal quantification, but can be used to construct existential quantification too.  i.e:   Node (forall n. ...)     is a Node that contains a *polymorphic-about-n* within it.   forall n. Node (...)  is a polymorphic Node constructor that contains an existential "n" within it
[20:23:41] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[20:24:27] *** Quits: autra (augustin@moz-BE76895F.fbx.proxad.net) (Ping timeout)
[20:24:47] <eddyb> Peaker: I still don't think you can construct a Node - because if you could, then its type would be known, and making a Tree out of it could be a transmute
[20:25:15] <eddyb> like, Node's runtime polymorphism over n is problematic
[20:25:22] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Ping timeout)
[20:25:45] <Peaker> eddyb: I hope you agree this kind of thing may very well be worth the extra compile-time verification it brings :)  (Imagine the hundreds of lines of unit tests you can throw away *and* be safer)
[20:26:08] *** Quits: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: dherman)
[20:26:23] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[20:26:44] <eddyb> Peaker: yes, but I don't agree that burdening the type system is the best way to go about it
[20:26:48] *** Joins: bheylin (textual@moz-8255E94E.adsl.online.nl)
[20:27:02] <Peaker> eddyb: GADTs are a type-system feature..?
[20:27:26] <eddyb> Peaker: being able to work with Zero / Succ is
[20:27:34] *** Joins: jviereck (Adium@moz-B1B15ECC.dip0.t-ipconnect.de)
[20:27:34] <Peaker> You could desugar GADTs to use associated types, iirc
[20:27:47] <Peaker> eddyb: Zero/Succ types are trivial, C++ and Rust can have them
[20:27:57] <eddyb> yes, they are, but they are unusable
[20:28:53] <eddyb> you can't instantiate a variable-"length" Succ at runtime to create a Node with a variable n at *runtime*, not in C++ and not in Rust
[20:29:43] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[20:30:01] <Peaker> But the "Succ" and "Zero" types in this example are never instantiated into values
[20:30:06] <eddyb> the contraints on GADT constructors look like simple sugar now - and I don't think matching needs to check antyhing more
[20:30:07] <Peaker> (not at compile time and not at runtime)
[20:30:12] <eddyb> Peaker: but the types are instantiated
[20:30:26] <Peaker> eddyb: The constraints can be considered sugar for lower-level constraints, but they cannot be forgotten
[20:30:26] <eddyb> C++ and Rust have compile-time-only type instantiation
[20:30:32] *** Quits: Thiez (thiez@moz-BF669398.student.utwente.nl) (Client exited)
[20:30:45] <Peaker> eddyb: Rust can have phantom types, right?
[20:30:59] *** Quits: pnkfelix|satiated (pnkfelix@moz-43495417.fbx.proxad.net) (Input/output error)
[20:31:09] <eddyb> Peaker: like Zero?
[20:31:16] <cmr> Peaker: yes
[20:32:06] *** jld|pto is now known as jld|mt_tam
[20:32:07] *** Joins: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[20:32:07] *** ChanServ sets mode: +ao dherman dherman
[20:32:28] <eddyb> Peaker: any generic arguments have to be known at compile-time
[20:32:32] <Peaker> eddyb: a type parameter that is not used as the type of any value inside the type's body
[20:32:53] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[20:32:56] <eddyb> Peaker: it's not treated specially
[20:33:08] <Peaker> eddyb: well, it could be known
[20:33:17] *** Joins: jhasse (jhasse@moz-3031C125.ewe-ip-backbone.de)
[20:33:26] * cmr can barely follow this conversation
[20:33:31] *** Joins: fyolnish (fyolnish@moz-4F69C1AE.uqwimax.jp)
[20:34:01] <eddyb> struct Foo<N>; cannot be instanted without a compile-time-known N
[20:34:04] <Peaker> eddyb: You could instantiate the tree with actual <Succ<Succ<Succ<Zero>>>, ..> (ouch :) )
[20:34:18] <eddyb> it can be inferred, but it always has to be compile-time-known
[20:34:28] <eddyb> that is, you don't need to write Succ anywhere
[20:34:44] <eddyb> but you can't do operations that don't make the shape of the tree obvious
[20:35:01] <pyon> Peaker: Can the expressive power of GADTs be emulated with type families?
[20:35:03] <eddyb> (and thus, the inferred N)
[20:35:15] *** Quits: fyolnish (fyolnish@moz-4F69C1AE.uqwimax.jp) (Ping timeout)
[20:35:26] <Peaker> pyon: I think so, I'll have to check/think about it for a sec :)
[20:35:46] <pyon> Peaker: If so, it could be just a matter of adding type members to traits. :-)
[20:36:10] <eddyb> GADTs aren't the problem here, though
[20:37:02] <eddyb> Peaker: DSTs might be abusable for some runtime-variable nonsense, but I'm not sure how much
[20:37:19] <Peaker> pyon: http://www.reddit.com/r/haskell/comments/cabzt/a_video_that_explains_gadts/c0r7c0q <-- this discussion covers the topic
[20:37:33] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[20:37:33] <pyon> Peaker: lemme see :-)
[20:38:20] *** Joins: mihneadb (mihneadb@8A897D58.93BC3F7D.A5830293.IP)
[20:38:20] <Peaker> eddyb: I think GADTs and existentials are both going to be a problem here.  When you pattern-match a tree, you need to get into scope the constraints associated with each constructor (GADTs).  You want to be able to construct trees with unknown depth at runtime (Existentials)
[20:38:37] <jhasse> acrichto: hi :) I'm asking cause of my CFG_LIBDIR patch: Can I try to explain it on IRC? Or should I wait if someone else reviews it or explicity ask someone?
[20:38:57] <bjz> Peaker: Idris gets around <Succ<Succ<Succ<Zero>>>, ..> by having user defined implicit conversions I think
[20:39:12] <bjz> Peaker: I but I don't see that happening in Rust
[20:39:24] <Peaker> bjz: Haskell has "Data Kinds" now, allowing lifting arbitrary data types to the type level
[20:39:39] <eddyb> Peaker: I saw [T] defined as [T, ..N] forall N in nmatsakis' blog posts about DST
[20:40:04] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[20:40:06] <eddyb> Peaker: or exist, not sure
[20:40:24] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[20:40:34] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[20:41:03] <eddyb> a pointer to that is represented as (*T, N) (like &[T] is today) - but it's more flexible
[20:41:16] <eddyb> so, theoretically, [[T]] could be (*T, N, M)
[20:41:36] *** Quits: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: dherman)
[20:41:54] <eddyb> now, ~[()] is (*(), N), and the pointer can always be null
[20:42:16] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[20:42:21] <eddyb> but you can't have constraints on the values N can take
[20:42:45] <jvns> why does "open" occur twice in `File::open_mode(&path, Open, ReadWrite);`?
[20:42:47] <jvns> (why would you pass something called "Open" to a function that opens a file?)
[20:42:59] <cmr> jvns: it's either Open, Truncate, or Append
[20:43:23] <jvns> oh, that's confusing
[20:43:29] <jvns> that's usually read/write/append, no?
[20:43:32] <cmr> File::open(&path) is exactly what you wrote
[20:43:38] <cmr> No, that's Read/Write/ReadWrite
[20:43:50] <jvns> oh right
[20:43:52] <cmr> this is flags vs mode
[20:44:05] *** Quits: valenting (Thunderbir@9A1975C1.39CE2EE.E400A05F.IP) (Quit: valenting)
[20:44:22] <jvns> oh i see
[20:44:26] <jvns> I just don't know how files work
[20:44:29] <jvns> that's what this is =D
[20:45:04] <bstrie> I hate that file interface
[20:45:13] <eddyb> Peaker: my crazy idea involves using fail! in the constructors if the constraint for "n" isn't fulfilled - then inferring "can fail" or "will fail" through all code paths calling functions that can fail - this requires less annotation everywhere, less type system magic...
[20:45:17] <cmr> bstrie: why?
[20:45:23] <bstrie> cmr: too redundant
[20:45:26] <cmr> Use File::open(&path) if you don't care.
[20:45:28] <bstrie> I don't care if that's How Files Work
[20:45:37] <bstrie> ok, so can I remove the bad one? :)
[20:45:37] <eddyb> Peaker: but it involves *at least* a SMT in the compiler ^_^
[20:45:39] <cmr> So, you're using a systems language and complaining about the system?
[20:45:43] <bstrie> cmr: yes!!!
[20:45:45] <eddyb> *SMT solver
[20:45:49] <mihneadb> cmr: ++
[20:45:56] <eddyb> Peaker: so it's complicated one way or the other
[20:46:08] * mihneadb bets it's easier to open files in nodejs
[20:46:11] <Peaker> eddyb: SMT in the compiler is *more* type system magic :)
[20:46:22] <Peaker> eddyb: SMT is far more magical than simple inference rules
[20:46:24] <eddyb> Peaker: except you're not hanging things on the type system
[20:46:34] * jvns is not a fan of this interface
[20:46:36] <Peaker> eddyb: the SMT is part of the type system in this case
[20:46:38] <eddyb> and it can be inferred through non-annotated code
[20:46:49] <eddyb> which may be against what Rust wants
[20:47:05] <Peaker> eddyb: note that our RBTree annotations cost us maybe 2-3 lines for the RBTree.. do you want to pay with an SMT solver to eliminate that?
[20:47:07] <eddyb> mihneadb: ohai. I remember your nick from a map where you were in Bucharest. I'm too ^_^
[20:47:10] <eddyb> but I gtg, good night
[20:47:12] <cmr> mihneadb: well, it's the same with File::open. With File::open_mode they use the same name but since it's js you can leave off args. They just use magical strings rather than enum variants.
[20:47:17] <mihneadb> eddyb: hi :)
[20:47:20] <Peaker> eddyb: good night
[20:47:30] *** Joins: andreypopp (andreypopp@moz-7261DC60.net)
[20:47:35] <eddyb> Peaker: but you pay everywhere you mention "n"
[20:47:35] *** Quits: pao (pao@moz-AF905E87.fbx.proxad.net) (Quit: pao)
[20:47:54] <mihneadb> cmr: oh no I agree with you, I just thought it was funny, re: your systems language comment :)
[20:48:05] <mihneadb> eddyb: what map?
[20:48:11] <Peaker> eddyb: the "n" has little to do with GADTs in general though
[20:48:16] <Peaker> eddyb: and I don't see where I pay 
[20:48:20] <Peaker> eddyb: (for mentioning "n")
[20:48:44] <bstrie> cmr: as much as I hate magical strings, I'm not convinced that enum variants are any more useful
[20:49:10] <cmr> bstrie: how is preventing invalid parameters not useful?
[20:49:16] <bstrie> too cumbersome
[20:49:26] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[20:49:31] <bstrie> have to import them separately. such a pain
[20:49:32] <acrichto> jhasse: sure! no guarantees though
[20:50:23] <cmr> I prefer having an extra import than fat fingering "r+" into "t+" and not noticing until I crash.
[20:50:46] <cmr> (true story)
[20:50:58] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:51:34] <bstrie> shrug. I just feel like there ought to be a better solution somehow
[20:51:41] <pyon> bstrie: cmr: I think it makes more sense to have separate functions for opening files in ReadOnly, WriteOnly and ReadWrite mode. Of course, deep inside, they just call POSIX' open(), but, this way, the function that opens a file in ReadOnly mode only has to return a type that implements Reader and Seek, but not Writer.
[20:51:59] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[20:52:01] <cmr> pyon: yes, definitely.
[20:52:02] <bstrie> I might agree
[20:52:22] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[20:52:30] <bstrie> rather than having one function that takes an enum of three variants, I'd rather have three functions
[20:52:35] <bstrie> not that this scales
[20:53:09] <pyon> bstrie: There are not going to be any more options anyway.
[20:53:21] *** jorendorff_away is now known as jorendorff
[20:53:23] <pyon> (Unless some OS invents new modes for opening files.)
[20:53:26] <jvns> "number of lines to open and read from a file" is one of the programming language metrics we care about, right? :)
[20:53:47] *** Quits: samnardoni (samnardoni@moz-6E63ABD.dyn.plus.net) (Client exited)
[20:53:54] <cmr> let x = File::open(Path::new("foo.txt")); let content = x.read_to_end();
[20:53:56] <cmr> 2
[20:53:59] *** Quits: jviereck (Adium@moz-B1B15ECC.dip0.t-ipconnect.de) (Quit: Leaving.)
[20:54:27] *** jorendorff is now known as jorendorff_away
[20:54:28] <bstrie> cmr: I'm also not sure that forcing callers to manually turn their strings into paths has any merit
[20:54:41] <bstrie> for transforming paths, Path makes sense
[20:54:45] *** Joins: Diamond (dick@moz-80556682.ks.ks.cox.net)
[20:54:47] <bstrie> here it just seems like overkill
[20:54:50] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[20:54:55] <jvns> huh, why do i have to import File but not Path?
[20:55:04] <cmr> jvns: Path is in the prelude..
[20:55:10] <jvns> right
[20:55:19] <cmr> oh File isn't
[20:55:25] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Quit: ZNC - http://znc.in)
[20:55:25] <cmr> good questions
[20:55:27] <cmr> *question
[20:55:51] <cmr> so make that three lines :)
[20:55:55] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[20:55:59] <jhasse> acrichto: Ok :) At the moment CFG_LIBDIR is set to "lib" (linux) or "bin" (windows). This document though says it should contain an absolut path: http://www.gnu.org/prep/standards/html_node/Directory-Variables.html
[20:56:05] <pyon> The OO-style syntax "object.trait_method(etc...)" can only be used when the first parameter is self or some pointer to self, right?
[20:56:15] <bstrie> pyon: yeah
[20:56:24] <ziad> bstrie: I was wondering that as well
[20:56:28] <cmr> bstrie: well it's what we have unless we want overloading.
[20:56:50] <bstrie> cmr: nah, we just need to implement Pathable on strings, then make it generic :)
[20:56:57] *** Joins: jviereck (Adium@moz-B1B15ECC.dip0.t-ipconnect.de)
[20:56:58] <jhasse> acrichto: That's the reason I changed it to contain the full path. Problem: There are several places in the code base where it was assumes that CFG_LIBDIR contains just one folder name, e.g. to create stage0/$CFG_LIBDIR/...
[20:57:13] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[20:57:26] <cmr> bstrie: but now open can fail because you gave it an invalid path!
[20:57:29] <cmr> Twice the failure surface!
[20:57:44] <bstrie> cmr: your example already fails if you give it an invalid path!
[20:57:47] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[20:57:53] *** Joins: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[20:58:00] <cmr> bstrie: Yeah, but the failure is constrained to Path
[20:58:10] <bstrie> Open can call Path itself
[20:58:25] <bstrie> I'm not sure why it matters where the failure happens
[20:58:28] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:58:36] <jhasse> acrichto: Since rewriting this would be very complicated I introduced the new CFG_LIBDIR_RELATIVE variable. This variable isn't standard in autotools though. So that when e.g. a Fedora maintainer wants Rust to use /usr/lib64 instead of /usr/lib, he will set --libdir=/usr/lib64
[20:59:11] <bstrie> cmr: in any case, just because a string is a Path doesn't mean it can be Opened. you can still fail inside of Open in your example
[20:59:13] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[20:59:17] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[20:59:18] *** ChanServ sets mode: +ao brson brson
[20:59:20] <acrichto> jhasse: I'm a little worried that this doesn't fit into our current model of lib/bin dirs
[20:59:41] <acrichto> jhasse: I don't have a comprehensive understanding of what a rust installation should look like, I only know what it looks like right now
[21:00:09] <acrichto> jhasse: if we start adding weird things like a relative libdir then we're gonna start having bugs where you wanted one but you were looking at the other, and it seems like these concepts should be unfiied
[21:00:23] *** jorendorff_away is now known as jorendorff
[21:00:37] <jhasse> acrichto: The thing is that at the moment you have a relative libdir. It just isn't named as such
[21:01:18] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[21:01:18] *** Quits: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Connection reset by peer)
[21:01:21] <jhasse> acrichto: when I looked at the source code I was very confused because I always assumed that libdir would be the absolute path like in other autotools configs
[21:02:14] <pcwalton> nmatsakis: https://github.com/mozilla/rust/pull/11055
[21:02:15] <pcwalton> r?
[21:02:17] <acrichto> jhasse: yeah but we have a two layer libdir where we have the notion of a library directory inside of the actual library directory
[21:02:26] <acrichto> jhasse: like inside of the libdir we have rustc/$target/$libdir
[21:02:57] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[21:02:57] <jhasse> acrichto: Yes. I changed those to rustc/$target/$CFG_LIBDIR_RELATIVE
[21:03:32] <acrichto> jhasse: yeah but then why even let someone configure that?
[21:03:37] <acrichto> it's needed for correctness on windows
[21:03:40] <jvns> I like the idea of open calling Path
[21:03:43] <acrichto> b/c the dlls have to live next to the binary
[21:03:49] <jvns> that sounds easier
[21:03:54] *** Joins: price (price@moz-3AE7229D.mit.edu)
[21:04:11] <price> Hi.  Is there a paper about Rust? 
[21:04:23] <bstrie> price: not a published one yet, no
[21:04:40] <bstrie> price: well, maybe there are a few that use rust. but none that describe rust's type system or anything
[21:05:18] <jhasse> acrichto: Yes. My patch leaves this intact and also adds the ability to let e.g. fedora users package rust to use /usr/lib64. That rust then uses lib64 for it's own library folder is a side affect
[21:06:12] <price> bstrie: Hmm, that's too bad.  And no preprints either?  (since you qualified with "published") 
[21:06:30] <jhasse> acrichto: To get this 100% right one could create a second variable for this directory which would then only on Windows be set to "bin". But since this is needed for windows and rustc therefore should work with any libdir_relative internly, why bother?
[21:06:30] <bstrie> price: there was one that was rejected. it might be out of date by this point, though
[21:06:38] <cmr> price: nmatsakis has a paper about the borrow checker.
[21:06:40] *** Joins: ofeldt (ofeldt@moz-B87DB310.dip0.t-ipconnect.de)
[21:07:07] <cmr> it *is* out of date.
[21:07:11] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[21:07:33] <price> cmr: ok 
[21:07:51] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[21:08:11] <price> cmr: thanks for the suggestion -- is it out of date to the point where it doesn't usefully describe the current state of things, or is it just that more has been added? 
[21:08:18] *** Joins: DwarfDefender (kvirc@E248DB08.9470356F.5B864609.IP)
[21:08:23] <cmr> price: afaik it's not very useful.
[21:08:30] <brson> price: it describes an obsolete version of the type system
[21:08:50] <acrichto> jhasse: it sounds like --libdir-relative doesn't really serve a purpose and --libdir shouldn't have the restriction on being inside prefix
[21:09:23] *** Joins: bytewise (bytewise@moz-B7439A8C.adsl.alicedsl.de)
[21:09:49] <bstrie> cmr: so did you pass your classes??
[21:09:54] <cmr> bstrie: yes!
[21:10:07] <bstrie> good
[21:10:27] <bstrie> life first, rust second
[21:10:28] <price> cmr, brson: OK, thanks.  Is there anything you can recommend that describes the type system, or other major aspects of Rust, with rationales and comparisons to previous work? 
[21:10:30] <bstrie> everything else, third
[21:10:49] <price> I see the language reference, but it does what a language reference does, without much in the way of rationale or discussion 
[21:11:05] *** Quits: DwarfDefender (kvirc@E248DB08.9470356F.5B864609.IP) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[21:11:11] <bstrie> price: there was a paper by microsoft that I hear sorta has the same gist as our borrow check paper
[21:11:34] <jhasse> acrichto: You're right on the first one. I think it will be very rare to change libdir-relative. It's needed in several places though. The reason I created it as a configurable variable is just that this makes some things easier, e.g. it automatically outputs the variable during "./configure" and the "export" lines etc.
[21:11:35] <brson> price: niko's paper would at least be useful for comparing to previous works
[21:11:40] <bstrie> price: also region analysis in general is not a new idea, I'm sure there's literature out there on it
[21:11:41] <brson> price: you can ask him for it
[21:12:44] <jhasse> acrichto: the feature to change --libdir-relative could be removed though. It seems unlikely that someone wanted to use that.
[21:12:47] <acrichto> jhasse: I still don't understand the restriction on --libdir, to me the only thing this patch should really be doing is accepting --libdir as an absolute path
[21:12:49] <brson> price: this wiki page has lots of interesting papers https://github.com/mozilla/rust/wiki/Note-research
[21:12:57] <bstrie> price: this might be the microsoft paper I was thinking of: https://research.microsoft.com/pubs/170528/msr-tr-2012-79.pdf
[21:13:32] *** Joins: thiez (thiez@moz-BF669398.student.utwente.nl)
[21:13:54] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[21:14:16] <brson> bstrie: that paper is awesome can you add it to the wiki?
[21:14:37] <bstrie> brson: can do
[21:15:38] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[21:16:24] *** Joins: wycats_ (sid79@moz-5F4AA75A.irccloud.com)
[21:16:50] <jhasse> acrichto: Hm ... IIRC there are some places in the code base where it is assumed that PREFIX + CFG_LIBDIR_RELATIVE is the same as CFG_LIBIDR. I will try to find them! The current situation is: ./configure accepts anything as --libdir, outputs it to you and then changes it to "lib" or "bin" ;)
[21:17:34] <acrichto> jhasse: it definitely sounds like the current situation is broken, and it mostly just sounds like CFG_LIBDIR should *always* be an absolute path
[21:17:41] <jhasse> acrichto: Maybe this is the solution: If libdir doesn't start with the prefix, ask the user to also specify libdir-relative?
[21:17:58] <acrichto> jhasse: no just discard the idea of a relative libdir
[21:18:05] <acrichto> only have CFG_LIBDIR, it's an absolute path, and it's it
[21:18:44] <jhasse> acrichto: Ok then you would need a new variable for Windows which tells if libs should be put in bin or lib. My idea was that i would just name this var LIBDIR_RELATIVE
[21:18:47] <cmr> bstrie: you know what my nickname is there right?
[21:18:52] <bstrie> tiffany: I was right http://www.reddit.com/r/rust/comments/1t6a64/calling_rust_from_c/ce4yypf
[21:19:05] <bstrie> cmr: "That Rust Guy
[21:19:08] <bstrie> "?
[21:19:09] <acrichto> jhasse: no let's do away with that entirely, put all that logic in what CFG_LIBDIR is pointing tod
[21:19:13] <tiffany> ah
[21:19:21] <tiffany> I thought so too
[21:19:22] <cmr> bstrie: close! just "Rust", which actually evolved from "The Rust Guy" :P
[21:19:26] <acrichto> jhasse: if --libdir isn't specified, and we're with windows, then CFG_LIBDIR == $PREFIX/bin
[21:19:27] <cmr> bstrie: I think I might have the order wrong
[21:19:31] <jvns> how can I convert a *u8 to a &[u8]? (I know, Bad Idea)
[21:20:03] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[21:20:05] <jvns> (but is it possible?)
[21:20:11] <jhasse> acrichto: Okay what do you do about this then: $$(TROOT$(1)_T_$(2)_H_$(3))/$$(CFG_LIBDIR_RELATIVE)
[21:20:13] <bstrie> jvns: I think it's something like... a from_buffer function
[21:20:25] <acrichto> jhasse: that should just always be "lib"
[21:20:33] <bstrie> jvns: pretty sure people do this all the time
[21:20:39] <acrichto> jhasse: that's inside of our rustc target libraries and we never run binaries out of there anyway
[21:20:43] <cmr> jvns: transmute(std::unstable::raw::Slice { data: your_ptr, len: foo })
[21:20:50] <acrichto> jhasse: in the sense that windows doesn't have a requirement that it be named bin
[21:20:59] <cmr> there's a from_buf for ~[T]
[21:21:02] <jvns> oh, I guess I need to look in rust-core's mem and slice
[21:21:04] <cmr> I don't remember seeing one for slices?
[21:21:12] <jhasse> acrichto: Okay then this: make_dir $h/stage$i/$CFG_LIBDIR_RELATIVE
[21:21:15] *** Quits: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net) (Ping timeout)
[21:21:20] *** Joins: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net)
[21:21:46] <acrichto> jhasse: that should be a windows specific thing, there's no reason anyone should be able to configure that
[21:21:56] <acrichto> jhasse: that should be "lib" or "bin" depending onw hether we're on windows or not
[21:22:10] <acrichto> bsaically --libdir should only affect instasllations (from what it sounds like with gnu things)
[21:22:16] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[21:22:18] <bstrie> cmr: they have bestowed this name upon you because they are jealous of your skills. associate not with these troglodytes, for they are not worthy of your presence
[21:22:30] *** Quits: synackse (synackse__@moz-DFB8ED3B.lightspeed.wepbfl.sbcglobal.net) (Ping timeout)
[21:22:37] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[21:22:53] <jhasse> acrichto: okay. What would you name the variable which holds "lib" or "bin"?
[21:23:11] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[21:23:32] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[21:24:11] *** Joins: synackse (synackse__@moz-DFB8ED3B.lightspeed.wepbfl.sbcglobal.net)
[21:24:48] *** zz_kimundi is now known as kimundi
[21:25:12] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Ping timeout)
[21:25:15] *** Joins: arrrrrrrrr (arrrrrrrrr@moz-90AD0D2A.dynamic.qsc.de)
[21:26:01] <acrichto> jhasse: I think it's fine to call it libdir relative, just drop the CFG_ in front because it shouldn't be configurable
[21:27:12] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[21:27:26] <jhasse> acrichto: Ok, I will create a new patch. Thank you :)
[21:27:35] <acrichto> jhasse: and thanks for your work as well!
[21:30:30] *** Joins: spott_ (spott@moz-5158CBDE.colorado.edu)
[21:30:30] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Connection reset by peer)
[21:30:59] <jhasse> acrichto: np, it's fun ;) btw: Do you know if it's the right way to create a new branch and pull request for my new patch? Or is there some other way on github?
[21:31:20] <acrichto> jhasse: nah it's fine to force-push the existing branch to update the PR on github
[21:32:01] <jhasse> acrichto: ah good to know! I thought that would lose the line comments or something ...
[21:32:06] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[21:32:26] <acrichto> you will lose some comments
[21:32:29] <acrichto> github isn't the best about that
[21:32:31] <acrichto> but it's ok
[21:32:57] *** Quits: spott_ (spott@moz-5158CBDE.colorado.edu) (Client exited)
[21:32:59] <jhasse> ok
[21:33:07] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[21:33:32] *** Joins: fyolnish (fyolnish@moz-93D26172.uqwimax.jp)
[21:33:40] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: brb)
[21:33:43] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[21:33:44] *** Joins: dangets (dangets@moz-E9E4A77B.cpe.cableone.net)
[21:33:53] *** Joins: sigma1 (sigma@moz-6E1846A2.range86-184.btcentralplus.com)
[21:35:18] *** Quits: fyolnish (fyolnish@moz-93D26172.uqwimax.jp) (Ping timeout)
[21:35:49] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[21:36:09] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[21:36:30] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[21:36:41] *** Joins: pao (pao@moz-AF905E87.fbx.proxad.net)
[21:38:14] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Ping timeout)
[21:39:04] *** Joins: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP)
[21:40:41] *** Joins: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu)
[21:40:45] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[21:40:46] *** ChanServ sets mode: +ao pcwalton pcwalton
[21:41:53] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[21:44:56] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[21:49:26] <bvssvni> is it possible to swap two items in array without a temporary variable?
[21:49:57] <sfackler> bvssvni: std::util::swap
[21:49:57] *** Joins: smodo (tadnr@moz-6398EFDF.dclient.hispeed.ch)
[21:50:09] *** Quits: synackse (synackse__@moz-DFB8ED3B.lightspeed.wepbfl.sbcglobal.net) (Ping timeout)
[21:50:12] <sfackler> wait, no, I don't think that'll work ehre
[21:50:13] *** Quits: smodo (tadnr@moz-6398EFDF.dclient.hispeed.ch) (Quit: Leaving)
[21:50:21] <sfackler> there's something defined on vector that should thoush
[21:50:25] <sfackler> *though
[21:50:49] <bvssvni> the quicksort in extra uses .swap
[21:51:03] <sfackler> that sounds like it
[21:51:37] <bvssvni> it worked
[21:52:07] <bvssvni> funny thing: rust forces me to write better code
[21:52:29] <jhasse> Why does src/etc/local_stage0.sh not use CFG_* variables? Could this script be called anywhere else except mk/stage0.mk?
[21:52:31] <arrrrrrrrr> there must be some crazy assembly going on in swap if it doesn't use an extra variable
[21:53:11] <bvssvni> arrrrrrrrr: for my sake it's just to get prettier code
[21:53:42] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[21:53:45] <cmr> arrrrrrrrr: crazy? haven't heard of xorswap? :)
[21:53:53] <mcpherrin> xorswap is dumb ;)
[21:54:05] *** Quits: bynaryshef (bynaryshef@moz-5D0DE6A3.mem.bellsouth.net) (Quit: This computer has gone to sleep)
[21:54:26] <cmr> it does use a temporary, though, and memcpy.
[21:54:35] *** Quits: Peaker (eyal@AA56D864.38D8CF6B.FC30AC02.IP) (Ping timeout)
[21:54:35] *** Quits: Kruppe (user@moz-EE1E894A.home3.cgocable.net) (Ping timeout)
[21:54:39] <sfackler> arrrrrrrrr: it does use an extra variable, but it does an unsafe dance to avoid needing to clone
[21:54:46] *** Joins: synackse (synackse__@moz-DFB8ED3B.lightspeed.wepbfl.sbcglobal.net)
[21:55:23] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[21:55:35] <cmr> .swap could actually be smarter, since they cant overlap..
[21:57:46] *** Quits: Blei (philipp@moz-B2F9E4BD.cust.bluewin.ch) (Quit: WeeChat 0.4.2)
[21:58:20] <TeXitoi> why std::util::swap does that? with move semantic isn't it automatic?
[21:58:40] <cmr> TeXitoi: not all types are moved like that
[21:58:55] <cmr> or, rather, I'm confused.
[21:58:58] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[21:59:28] <cmr> TeXitoi: you can't move, it uses a &mut
[21:59:55] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[22:00:23] *** Quits: lenstr (lenstr@6737B9B0.9636F313.7A27613B.IP) (Client exited)
[22:00:24] <TeXitoi> ok, I see
[22:00:32] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[22:00:49] *** Joins: lenstr (lenstr@6737B9B0.9636F313.7A27613B.IP)
[22:01:47] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[22:02:18] *** Quits: jackneill (jackneill@moz-36FDFEEA.pool.digikabel.hu) (Ping timeout)
[22:02:32] *** Quits: lenstr (lenstr@6737B9B0.9636F313.7A27613B.IP) (Ping timeout)
[22:03:17] *** Quits: t25 (manu@moz-5D020DB4.otago.ac.nz) (Client exited)
[22:04:31] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[22:08:12] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:12:51] *** Quits: sigma1 (sigma@moz-6E1846A2.range86-184.btcentralplus.com) (Ping timeout)
[22:13:09] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[22:14:17] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[22:14:18] *** Quits: jviereck (Adium@moz-B1B15ECC.dip0.t-ipconnect.de) (Quit: Leaving.)
[22:15:55] *** Quits: arrrrrrrrr (arrrrrrrrr@moz-90AD0D2A.dynamic.qsc.de) (Ping timeout)
[22:16:01] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Ping timeout)
[22:16:21] *** Joins: aatch (James@moz-B437F499.pocketrent.com)
[22:16:54] <bvssvni> does rust have an ordered set type?
[22:16:54] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Connection reset by peer)
[22:17:28] <cmr> TreeSet should exist.
[22:18:20] <bvssvni> cmr: is there a set trait?
[22:18:46] <cmr> std::container::Set
[22:18:55] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[22:19:05] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:19:27] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[22:19:35] *** Quits: pao (pao@moz-AF905E87.fbx.proxad.net) (Quit: pao)
[22:19:37] <bvssvni> cmr: thanks
[22:19:54] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[22:19:54] *** ChanServ sets mode: +ao brson brson
[22:19:56] *** Joins: dbaupp (Thunderbir@moz-EB2EFE6F.lns20.syd6.internode.on.net)
[22:20:05] <bvssvni> cmr: it does not have Boolean algebra operations!
[22:20:15] <cmr> bvssvni: there's a fixme in the source for them!
[22:20:50] *** Joins: Peaker (eyal@AA56D864.38D8CF6B.FC30AC02.IP)
[22:21:20] <bvssvni> cmr: I am working on one on top of vec, for indexing
[22:21:39] <Ms2ger> bvssvni, terrible!
[22:21:45] *** Joins: bynaryshef (bynaryshef@moz-5D0DE6A3.mem.bellsouth.net)
[22:21:59] *** Quits: bynaryshef (bynaryshef@moz-5D0DE6A3.mem.bellsouth.net) (Client exited)
[22:22:23] <bvssvni> Ms2get: why is that terrible?
[22:22:24] <bjz> acrichto: beep
[22:22:29] <acrichto> bjz: pong
[22:22:32] <acrichto> or meep
[22:22:34] <acrichto> whichever
[22:22:48] * cmr was thinking boop
[22:22:55] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[22:22:59] <Ms2ger> bvssvni, not supporting boolean algebra? How is that not terrible? :)
[22:22:59] <bvssvni> Ms2ger: why is that terrible?
[22:22:59] <bjz> acrichto: did you see my mini r?
[22:23:03] <Ms2ger> <-- math major
[22:23:14] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[22:23:20] <acrichto> bjz: mini r ?
[22:23:44] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[22:23:50] <bjz> oh
[22:23:53] <bjz> weird
[22:23:56] *** Quits: eagen (eagen@8737942B.7A99C13A.B7961A98.IP) (Quit: Leaving)
[22:23:57] <bvssvni> Ms2ger: I see, I absolutely love abstract Boolean algebra
[22:24:04] <bjz> didn't get any emails from github
[22:26:48] *** Quits: bheylin (textual@moz-8255E94E.adsl.online.nl) (Quit: Textual IRC Client: www.textualapp.com)
[22:27:52] <bjz> acrichto: dbaupp: what do you think of bill's comment? https://github.com/mozilla/rust/pull/11044#issuecomment-30879287
[22:29:31] *** Quits: awidegreen (awidegreen@moz-3FE0A1F.a357.priv.bahnhof.se) (Ping timeout)
[22:29:35] <acrichto> bjz: I'm not too worried about that, I realized though I'd like to get brson's opinion on this
[22:29:44] <dbaupp> bjz: fwiw, I actually think that iterator is pretty strange anyway :)
[22:30:26] <dbaupp> bjz: (also, it would be good to add an example to the doc string of the method now, rather than relying on steveklabnik to come through and add them later ;) )
[22:30:30] <sfackler> bjz: it was decided at some point that the iterator API wouldn't mandate that None means None forever
[22:30:45] <sfackler> there's an adaptor somewhere in std::iter (Fixed maybe?) that will lock it for you
[22:30:59] <steveklabnik> wooo
[22:31:03] <bjz> dbaupp: sure
[22:31:14] <bjz> dbaupp: good idea
[22:32:23] <dbaupp> sfackler: Fuse, iirc
[22:33:11] *** Quits: rca_ (rcatolino@moz-70492676.adsl.proxad.net) (Ping timeout)
[22:33:33] *** Joins: fyolnish (fyolnish@moz-13953A7A.uqwimax.jp)
[22:33:47] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[22:33:59] *** Joins: awidegreen (awidegreen@moz-B179C175.dip0.t-ipconnect.de)
[22:35:15] *** Quits: fyolnish (fyolnish@moz-13953A7A.uqwimax.jp) (Ping timeout)
[22:35:16] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[22:35:16] *** ChanServ sets mode: +ao pcwalton pcwalton
[22:38:09] <bjz> dbaupp: you're right
[22:41:55] *** Joins: t25 (manud@moz-5D020DB4.otago.ac.nz)
[22:42:05] *** Quits: awidegreen (awidegreen@moz-B179C175.dip0.t-ipconnect.de) (Ping timeout)
[22:43:32] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:43:52] <price> bstrie, brson: thanks for the links!  reading now 
[22:45:08] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[22:45:08] *** ChanServ sets mode: +ao dherman dherman
[22:46:19] *** Joins: awidegreen (awidegreen@moz-3FE0A1F.a357.priv.bahnhof.se)
[22:49:38] <pyon> bvssvni: extra::treemap::{TreeSet, TreeMap} provide the usual operations on sets (difference, intersection, symmetric difference, union).
[22:49:58] <bjz> acrichto: dbaupp: commented https://github.com/mozilla/rust/pull/11044#issuecomment-30888712
[22:50:14] *** Quits: synackse (synackse__@moz-DFB8ED3B.lightspeed.wepbfl.sbcglobal.net) (Ping timeout)
[22:50:18] <acrichto> bjz: cool
[22:50:32] <bjz> dbaupp: I'll still add the exmple code in a separate pull for Port::iter
[22:50:49] *** Quits: sellout (Adium@2917A62E.8B65BA63.1D2A2C57.IP) (Quit: Leaving.)
[22:51:16] <bjz> acrichto: I've also realised that DuplexStream and SyncPort are now missing iterators
[22:51:29] <bjz> acrichto: should I add thouse?
[22:51:49] <acrichto> bjz: I don't think we need to worry about rampaging through extra::comm just yet
[22:51:53] <acrichto> there are still changes in flux
[22:51:54] <bjz> ie. just the regular ones that came from GenericPort
[22:52:00] <bjz> oh ok
[22:52:16] *** Quits: mihneadb (mihneadb@8A897D58.93BC3F7D.A5830293.IP) (Quit: Computer gone to sleep - Zzzz...)
[22:52:44] <pcwalton> interesting, took me only 20 minutes to de-@mut Block
[22:52:49] <pcwalton> maybe this won't be so bad? :)
[22:52:54] <bvssvni> pyon: thanks
[22:53:42] *** Joins: synackse (synackse__@moz-DFB8ED3B.lightspeed.wepbfl.sbcglobal.net)
[22:54:04] <bjz> acrichto: ok, so hold off for now?
[22:54:14] <pyon> bvssvni: They could in theory be provided for all sets/maps, but it should be clear that they would be terribly inefficiency for hashsets/hashmaps. :-P
[22:54:20] <acrichto> bjz: I would for extra yeah
[22:54:24] <pyon> inefficient*
[22:54:33] <bjz> acrichto: I noticed the lack today when doing bstrie's universal_server thing: https://gist.github.com/bjz/e4d536c63900960c9e15#file-universal_server-rs-L32-L38
[22:55:16] <bvssvni> pyon: I am implementing a set on top of vec for indexing
[22:55:20] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[22:55:58] *** Joins: samnardoni (samnardoni@moz-6E63ABD.dyn.plus.net)
[22:56:35] <pyon> bvssvni: Ah.
[22:57:18] *** Quits: samnardoni (samnardoni@moz-6E63ABD.dyn.plus.net) (Client exited)
[22:59:40] <bvssvni> pyon: wanted to see if there is traits can implement from the standard library, but std::container::Set lacks boolean algebra (got a fixme though)
[23:01:36] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[23:01:40] *** Joins: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[23:01:59] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[23:02:40] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[23:04:09] *** Quits: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[23:04:30] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[23:05:01] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[23:06:14] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:06:53] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[23:09:43] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[23:11:55] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[23:15:42] <aatch> pcwalton, what are you changing it to?
[23:15:57] <pcwalton> aatch: @Block
[23:15:59] <pcwalton> with cells
[23:16:08] <pcwalton> all dynamic borrow failures ruled out
[23:16:12] <pcwalton> because I used no .borrow() or .mutate()
[23:16:29] <aatch> pcwalton, ah, yeah, that's probably easier than what I tried.
[23:17:38] *** Quits: synackse (synackse__@moz-DFB8ED3B.lightspeed.wepbfl.sbcglobal.net) (Ping timeout)
[23:17:44] *** Quits: Ms2ger (Ms2ger@8B85F0F7.C5F25A2D.F15B0BB3.IP) (Quit: nn)
[23:18:39] *** Joins: bheylin (textual@moz-8255E94E.adsl.online.nl)
[23:21:05] *** Joins: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP)
[23:21:49] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[23:22:17] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[23:22:18] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[23:22:20] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[23:25:44] *** Quits: awidegreen (awidegreen@moz-3FE0A1F.a357.priv.bahnhof.se) (Ping timeout)
[23:27:44] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[23:27:46] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[23:27:59] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Quit: Textual IRC Client: www.textualapp.com)
[23:30:09] *** Quits: moostik (Icedove@5A22E6A1.10715965.BCDF592F.IP) (Ping timeout)
[23:31:18] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[23:31:30] <nil> are there are builtin features with rust for handling partial string matching or regular expressions?
[23:32:19] <ChrisMorgan> nil: there are things like find_str
[23:32:29] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[23:32:44] <nil> I miss having a full featured regex library at my disposal :<
[23:32:54] <ChrisMorgan> You can also find things like PCRE bindings around, but no complete native regular expression tool. But it's actually not that common that you *need* regular expressions.
[23:33:10] *** Parts: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) ()
[23:33:13] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[23:33:18] <nil> welcome back :D
[23:33:28] *** Joins: fyolnish (fyolnish@moz-DF2AF3C9.uqwimax.jp)
[23:33:31] *** Quits: bheylin (textual@moz-8255E94E.adsl.online.nl) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[23:33:42] * ChrisMorgan must really get himself an IRC client which doesn't part from channels on Ctrl+W
[23:33:57] <nil> I still need to setup my irc bouncer one of these days
[23:34:10] <nil> I have a box I've been meaning to setup as a dedicated server.. but ugh.. effort.
[23:34:15] <mcpherrin> irccloud is pretty good if you're into web clients
[23:34:28] *** Joins: bheylin (textual@moz-8255E94E.adsl.online.nl)
[23:34:31] * mcpherrin uses a work server or raspberry pi most of the time for irc
[23:35:15] *** kimundi is now known as zz_kimundi
[23:36:22] *** Quits: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net) (Ping timeout)
[23:37:05] *** Quits: bytewise (bytewise@moz-B7439A8C.adsl.alicedsl.de) (Quit: Leaving)
[23:37:22] *** Joins: awidegreen (awidegreen@moz-3FE0A1F.a357.priv.bahnhof.se)
[23:37:25] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[23:38:24] *** Quits: jmbto (jmbto@moz-FE174E29.fbx.proxad.net) (Quit: Leaving)
[23:39:20] *** Joins: synackse (synackse__@moz-DFB8ED3B.lightspeed.wepbfl.sbcglobal.net)
[23:39:30] *** Quits: fyolnish (fyolnish@moz-DF2AF3C9.uqwimax.jp) (Ping timeout)
[23:41:08] *** Joins: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net)
[23:43:17] *** Joins: a_m0d|home (a_m0d@moz-4A42350.acanac.net)
[23:43:22] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[23:43:47] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[23:45:08] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:45:13] *** Joins: c-a (c-a@moz-57C82A9.a163.priv.bahnhof.se)
[23:45:21] *** Quits: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP) (Input/output error)
[23:45:33] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[23:47:00] *** Joins: moostik (Icedove@6181009C.10715965.BCDF592F.IP)
[23:47:06] *** Quits: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net) (Ping timeout)
[23:48:49] *** Quits: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP) (Connection reset by peer)
[23:50:26] <epdtry> anyone else getting "access denied" for http://doc.rust-lang.org/doc/master/rust.html ?
[23:50:54] <Scriptor> yep
[23:51:11] <Scriptor> the files are hosted on github?
[23:51:29] <sfackler> aws I think
[23:51:36] <Scriptor> I've seen it happen on there before, usually resolves quickly
[23:51:49] <Scriptor> http://www.rust-lang.org/doc/master/rust.html points at github
[23:54:19] *** Joins: joelteon (bzzt@moz-317E8D0C.io)
[23:55:49] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[23:56:38] *** Joins: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP)
[23:56:49] *** Quits: bheylin (textual@moz-8255E94E.adsl.online.nl) (Quit: Textual IRC Client: www.textualapp.com)
[23:57:17] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[23:57:23] *** Joins: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net)
[23:57:43] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[23:59:07] *** Quits: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
