[00:00:08] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[00:00:54] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[00:02:35] *** Quits: dbaupp (Thunderbir@moz-4CA0D523.lns20.syd6.internode.on.net) (Ping timeout)
[00:03:18] *** Joins: dbaupp (Thunderbir@moz-4CA0D523.lns20.syd6.internode.on.net)
[00:03:41] *** Joins: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca)
[00:06:12] *** Quits: bjz (bjz@1009100.A27A8065.D3BA2C17.IP) (Ping timeout)
[00:06:18] *** Quits: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP) (Ping timeout)
[00:06:41] *** Joins: sprang (sprang@moz-920A95C4.hsd1.ca.comcast.net)
[00:06:48] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Input/output error)
[00:08:41] *** Joins: slimer (Mibbit@moz-E9218C9D.ga.at.cox.net)
[00:08:45] *** Joins: Jesin (Jesin@moz-63C897DA.res.lehigh.edu)
[00:09:06] <slimer> Does Rust's trie implementation similar to http://cr.yp.to/critbit.html ?
[00:09:24] <strcat> slimer: no, not really
[00:09:35] <strcat> it uses chunks rather than bits
[00:09:37] <cmr> Wait when did we get a trie?
[00:09:44] <strcat> cmr: std::trie, a long time ago
[00:09:50] *** Quits: mark_edward (AndChat806@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Ping timeout)
[00:09:51] <strcat> it's not really done, it's fairly naive
[00:09:54] <cmr> And it's even in libstd!
[00:09:57] * cmr never looked
[00:10:18] *** Joins: mark_edward (AndChat806@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[00:10:23] *** Joins: z0w0 (zack@moz-5E840EF3.lns3.woo.bigpond.net.au)
[00:10:32] <slimer> strcat: chunks?
[00:11:21] <slimer> Naive? Is it not cache friendly or something?
[00:11:31] <strcat> slimer: it's designed to split on an arbitrary number of bits
[00:12:14] <strcat> for example, with 8-bit chunks, it would be 256-ary
[00:12:18] <strcat> atm it uses 4-bit chunks
[00:12:20] <strcat> so it's 16-ary
[00:12:49] <strcat> by naive I mean it doesn't do a lot of compression
[00:13:03] <strcat> it just does suffix compression - no path compression
[00:13:08] <strcat> and it doesn't use suffix buckets
[00:13:25] <eddyb> almost done dl-ing the new doctor who episode. can I even watch it at this late hour?
[00:13:29] <strcat> if it used suffix buckets it would probably be good enough
[00:13:33] <eddyb> start brain unit testing
[00:14:58] *** Joins: prooftechnique (prooftechn@moz-65B7D4EE.hsd1.vt.comcast.net)
[00:15:06] <slimer> strcat: 16-ary as in each node could branch 16 times?
[00:15:15] <strcat> slimer: yes
[00:15:46] <slimer> slimer: That sounds... bad.
[00:15:49] <strcat> why
[00:15:59] <strcat> for a 32-bit integer, the worst-case depth is 8 that way
[00:16:34] <strcat> at 256-ary, worst-case depth would be 4, but it would eat a lot more memory
[00:16:38] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[00:16:59] *** jorendorff is now known as jorendorff_away
[00:17:02] <strcat> judy arrays are 256-ary tries with lots of compression techniques
[00:18:07] *** Joins: mib_1r10gg (Mibbit@C7BA16B3.CF284474.24A502C1.IP)
[00:18:24] <strcat> anyway a trie is only competitive in performance with a hash table if the hash is slow, or you're doing related lookups
[00:18:29] <slimer> strcat: But then if a node has 16 entries you have to go on traversing each entry?
[00:18:39] <strcat> slimer: no
[00:18:43] <strcat> you know which path you have to take
[00:19:03] <strcat> it stores the children in an array
[00:19:07] <strcat> you index the array like a map
[00:19:12] <strcat> with your bit chunks as the key
[00:19:19] <strcat> so if you chunk into 4 bits
[00:19:23] <strcat> each node has a 16 long array
[00:19:38] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[00:19:42] <slimer> strcat: Ah.
[00:20:16] <strcat> if you chunk into 2 bits, each node has a 4 element array (but worst-case depth is 16 for a 32-bit integer)
[00:20:23] <strcat> critbit tries are just 1-bit chunks, afaik
[00:20:34] *** Quits: mib_1r10gg (Mibbit@C7BA16B3.CF284474.24A502C1.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:20:40] <strcat> bigger chunks eats more memory but is faster
[00:21:07] <strcat> once you apply compression techniques (like judy arrays), you want bigger chunks
[00:21:19] <strcat> but it gets really complicated. and compression will make it slower
[00:22:03] <strcat> http://rusty.ozlabs.org/?p=153
[00:22:33] <strcat> (a naive trie like std::trie is nowhere near that good)
[00:22:48] <slimer> strcat: Will all entries in the trie be at the same depth?
[00:23:08] <strcat> slimer: it compresses suffixes, so it will only go as deep as needed
[00:23:17] <strcat> it only splits when more than 1 integer is along that path
[00:23:43] <strcat> so like if you have 2 integers in the trie
[00:23:55] <strcat> and their first 8 bits are the same
[00:24:08] <strcat> it will split twice
[00:24:14] <strcat> and then the integers will be in leaves
[00:26:20] <slimer> Why does Judy trie have such good cache locality?
[00:26:45] <strcat> slimer: 256-ary, so worst-case depth of 4, with a bunch of compression techniques
[00:26:51] <strcat> (for 32-bit ints)
[00:27:29] <strcat> it does path compression (compress similar paths), suffix buckets (it puts suffixes in other map structures, maybe arrays or something)
[00:27:33] <strcat> and other stuff
[00:28:04] <strcat> so for example if you have 2 integers with the same 16-bit start
[00:28:14] <strcat> well
[00:28:27] <strcat> you first have to break the boundary of the bucket
[00:28:33] *** Joins: hjr3 (hradtke@DC1FAD13.17569DF3.B459E86F.IP)
[00:28:40] <strcat> lets say it puts 32 elements in an array before deciding to split into a tree
[00:28:56] *** Joins: thesnowdog (doug@72CF77FB.CDB23781.6F17036B.IP)
[00:29:07] <strcat> and then if they share a prefix, it will compress that in-place rather than splitting
[00:29:18] <strcat> and the leaves are *always* those 32 element buckets
[00:29:50] <strcat> (it's more complex than that but you'd have to look at the actual docs on it ;p)
[00:30:15] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[00:30:20] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[00:32:47] <strcat> slimer: if you look up 'burst trie' you'll find a simplified version of *one* of the judy array compression techniques
[00:33:24] <strcat> slimer: https://en.wikipedia.org/wiki/Radix_tree that image has path compression
[00:33:41] <strcat> path compression doesn't really help for integers though, just strings
[00:34:17] <slimer> Hm. So for virtual address translation in the working set model a Judy tree could be competitive because of adjacent access patterns?
[00:34:38] <slimer> Assuming software MMU
[00:34:42] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[00:34:56] *** Quits: peterdn (chatzilla@moz-D11BA78C.as13285.net) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[00:35:09] <strcat> slimer: yeah, I think it would be vs. a hash table
[00:35:15] *** Quits: CarpNet (Alasdair@moz-25C796BC.cable.virginm.net) (Quit: Leaving)
[00:35:22] <strcat> slimer: afaik they are really hard to implement though :)
[00:35:46] <slimer> Well someone already implemented Judy :)
[00:36:21] *** Joins: jdm (jdm@883B1788.FA8F8F63.51315CC9.IP)
[00:36:21] *** ChanServ sets mode: +o jdm
[00:37:33] <cmr> luisbg: oi!
[00:38:22] *** Quits: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP) (Ping timeout)
[00:38:34] *** Joins: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP)
[00:38:58] <strcat> slimer: red-black/avl trees are basically useless for non-intrusive containers ;p
[00:39:14] <strcat> unless you need the iterator invalidation guarantees
[00:40:02] <strcat> b-trees make much better in-memory maps in the world of caches
[00:40:16] <strcat> and there are nice ways of doing tries
[00:41:10] <slimer> strcat: I just realized,multilevel page tables are basically tries...
[00:42:28] *** Quits: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[00:42:36] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[00:42:58] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[00:44:06] *** Joins: tautologico (iorek@4FCDF73C.2F29D054.7B974E06.IP)
[00:44:40] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[00:45:16] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[00:45:27] <tautologico> I have a function that is almost the same code, but one uses char and other uses a struct... the latter does not compile with a "error: cannot move out of dereference of & pointer", I don't know why
[00:45:56] <o11c> tautologico: primitive types are implicitly copyable
[00:46:30] <tautologico> o11c: I suspected that so I put a deriving(Clone) in my struct, but didn't solve the problem
[00:46:46] <dbaupp> tautologico: does the struct have a destructor (impl of Drop), or contain types like ~[] or ~str which have destructors?
[00:47:22] <cmr> tautologico: you need to actuially *call* clone, to clone.
[00:47:22] <tautologico> no, only refs 
[00:47:36] <kimundi> tautologico: &mut refs?
[00:47:44] <tautologico> cmr: tried that too
[00:47:50] <tautologico> kimundi: &mut self
[00:48:01] <dbaupp> tautologico: what's the definition of the struct?
[00:48:04] <tautologico> it's a method
[00:48:12] <dbaupp> what?
[00:48:22] <dbaupp> struct Foo { ... }
[00:48:29] <dbaupp> what's the '...'?
[00:48:40] <tautologico> struct TokenStream<'r> {
[00:48:40] <tautologico>     buffer: &'r mut LookaheadBuffer<'r>,
[00:48:41] <tautologico>     term: &'r [char],
[00:48:42] <tautologico>     peek: Option<Token>
[00:48:43] <tautologico> }
[00:48:47] <kimundi> Yeah
[00:48:51] <kimundi> The &mut is the problem
[00:48:54] <kimundi> can'T copy that
[00:49:16] <kimundi> can'T do it with a clone impl either, btw
[00:49:21] <tautologico> here's LookaheadBuffer: 
[00:49:21] <tautologico> struct LookaheadBuffer<'r> {
[00:49:22] <tautologico>     contents: &'r str,
[00:49:23] <tautologico>     iter: CharIterator<'r>,
[00:49:24] <tautologico>     peek: Option<char>
[00:49:25] <tautologico> }
[00:49:37] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[00:49:43] <tautologico> the same method compiles & works in LookaheadBuffer, but not TokenStream
[00:49:46] <tautologico> It's basically this:
[00:49:49] <dbaupp> yes
[00:50:01] *** Quits: Ferreus (ferreus@moz-D75F5224.pools.arcor-ip.net) (Quit: WeeChat 0.4.2)
[00:50:10] <dbaupp> it's the `buffer: &mut ...`; as kimundi says, &mut moves when passed around by value
[00:50:20] *** Joins: jstevans (Instantbir@moz-8D4AF6B1.washdc.fios.verizon.net)
[00:50:23] <dbaupp> all the other types don't move
[00:50:49] <tautologico> hm
[00:50:57] <tautologico> but the issue is when I do a match over peek
[00:51:01] <dbaupp> hence, you need to be using more references (`ref` and `ref mut` in pattern matches, & and &mut in expressions)
[00:51:10] <tautologico> match self.peek { Some(t) <--- this gives the error
[00:51:16] *** Quits: slimer (Mibbit@moz-E9218C9D.ga.at.cox.net) (Quit: http://www.mibbit.com ajax IRC Client)
[00:51:17] <dbaupp> Some(ref t)
[00:51:20] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[00:52:16] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Client exited)
[00:52:41] *** Joins: egghead (egghead@7851DE85.C82F6435.20F09BA6.IP)
[00:52:57] <tautologico> but peek is Option<Token>
[00:53:32] <cmr> But self isn't owned.
[00:53:33] <tautologico> if I try to use Some(ref t) I get a type error (expected enum but found &-ptr)
[00:53:41] *** Quits: jeffdb_ (jeff@moz-ED35AD97.hsd1.ca.comcast.net) (Quit: jeffdb_)
[00:53:53] <tautologico> ah sorry
[00:53:56] <tautologico> I think I got it
[00:54:06] *** Quits: thewonderidiot1 (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[00:54:13] <tautologico> I have to deref t then
[00:56:58] <tautologico> now I have another problem :) I thought it would be simple, given that LookaheadBuffer works well with chars
[00:57:06] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[00:57:59] *** Joins: aegeaner (aegeaner@BE123E04.364C5DC1.A28F48E3.IP)
[00:58:07] <tautologico> "cannot assign to *self.peek because it is borrowed"
[00:58:14] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[00:58:47] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[01:01:29] <luisbg> cmr, hey :)
[01:02:30] *** Quits: z0w0 (zack@moz-5E840EF3.lns3.woo.bigpond.net.au) (Ping timeout)
[01:02:34] <cmr> luisbg: nice post, saw it on HN :)
[01:02:59] <luisbg> cmr, thank you. it kinda exploded today when it got submitted to r/programming
[01:03:17] <luisbg> cmr, I still don't know why both the submitter to reddit and HN didn't link to the original :S
[01:03:42] <luisbg> I wanted to bring attention, it is a fantastic list
[01:03:54] *** Quits: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP) (Ping timeout)
[01:04:53] *** Joins: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au)
[01:08:11] *** Quits: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com) (Ping timeout)
[01:08:43] *** Quits: hjr3 (hradtke@DC1FAD13.17569DF3.B459E86F.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[01:09:26] <tautologico> so what can I do about this "cannot assign because it is borrowed" issue?
[01:11:04] *** kimundi is now known as zz_kimundi
[01:12:22] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Quit: )
[01:14:24] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[01:15:19] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[01:15:53] <tautologico> right, solved it, moved the mutation outside of the block where the borrow occurs
[01:16:49] *** Quits: sprang (sprang@moz-920A95C4.hsd1.ca.comcast.net) (Quit: sprang)
[01:19:45] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[01:19:53] *** Quits: tautologico (iorek@4FCDF73C.2F29D054.7B974E06.IP) (Quit: zzz)
[01:20:33] *** Joins: tautologico (iorek@4FCDF73C.2F29D054.7B974E06.IP)
[01:23:02] *** Quits: tautologico (iorek@4FCDF73C.2F29D054.7B974E06.IP) (Quit: zzz)
[01:23:23] *** Parts: aegeaner (aegeaner@BE123E04.364C5DC1.A28F48E3.IP) ()
[01:25:40] *** jorendorff_away is now known as jorendorff
[01:26:09] *** Quits: KindOne (KindOne@moz-23FA8CB1.dynamic.ip.windstream.net) (Ping timeout)
[01:26:32] *** jorendorff is now known as jorendorff_away
[01:29:34] *** Joins: KindOne (KindOne@B60236CF.C538DA2.EC6A1518.IP)
[01:29:48] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[01:35:53] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[01:36:37] *** Joins: tautologico (iorek@4FCDF73C.2F29D054.7B974E06.IP)
[01:38:02] *** Joins: joelteon_ (bzzt@moz-948A3799.lightspeed.snvaca.sbcglobal.net)
[01:38:38] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[01:39:18] *** Quits: KindOne (KindOne@B60236CF.C538DA2.EC6A1518.IP) (Ping timeout)
[01:40:29] *** Quits: joelteon_ (bzzt@moz-948A3799.lightspeed.snvaca.sbcglobal.net) (Client exited)
[01:42:12] *** Quits: jdm (jdm@883B1788.FA8F8F63.51315CC9.IP) (Quit: Lost terminal)
[01:43:29] *** Joins: KindOne (KindOne@moz-EF9CB998.dynamic.ip.windstream.net)
[01:46:04] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[01:53:56] *** Quits: voxpopuli (fanservice@47316CCD.506D0C43.689607DE.IP) (Ping timeout)
[01:57:06] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[01:57:30] *** Quits: Addle (quassel@moz-89E971E4.cable.teksavvy.com) (Ping timeout)
[01:57:31] *** Quits: tautologico (iorek@4FCDF73C.2F29D054.7B974E06.IP) (Quit: zzz)
[01:57:45] *** Joins: Addle (quassel@moz-89E971E4.cable.teksavvy.com)
[01:58:27] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[01:58:56] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[02:00:07] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[02:03:03] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[02:04:48] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[02:05:51] *** Joins: fabiand_ (fabiand@moz-4D0935A3.adsl.alicedsl.de)
[02:05:54] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[02:05:54] *** ChanServ sets mode: +ao brson brson
[02:06:51] *** Quits: fabiand__ (fabiand@moz-76A90A4A.adsl.alicedsl.de) (Ping timeout)
[02:08:56] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Ping timeout)
[02:11:03] *** Joins: brson_ (brson@981AA104.E81F12CD.76F66111.IP)
[02:11:35] *** Joins: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net)
[02:11:47] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[02:12:16] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:13:49] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[02:15:40] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[02:15:50] *** Joins: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com)
[02:16:17] *** Quits: joelteon (bzzt@moz-317E8D0C.io) (Quit: I'm out)
[02:16:26] *** Quits: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net) (Ping timeout)
[02:17:10] *** Joins: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net)
[02:20:01] *** Quits: brson_ (brson@981AA104.E81F12CD.76F66111.IP) (Quit: leaving)
[02:20:06] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[02:20:06] *** ChanServ sets mode: +ao brson brson
[02:21:12] *** Joins: SiegeLord (sl@moz-89543762.washdc.east.verizon.net)
[02:23:43] *** Joins: tautologico (iorek@4FCDF73C.2F29D054.7B974E06.IP)
[02:23:53] *** Quits: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP) (Ping timeout)
[02:24:47] *** Quits: mr_boo (Mibbit@moz-86F113EA.lns20.adl2.internode.on.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:27:04] *** jorendorff_away is now known as jorendorff
[02:30:00] *** Joins: M0neymaker09 (M0neymaker@moz-64A1BD0E.bb.netvision.net.il)
[02:30:04] <M0neymaker09> hello ppl
[02:31:30] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[02:32:24] *** Joins: bungoman (bungoman@moz-F95B490C.tx.res.rr.com)
[02:32:39] *** Quits: M0neymaker09 (M0neymaker@moz-64A1BD0E.bb.netvision.net.il) (Quit: )
[02:34:13] *** Joins: joelteon (bzzt@moz-317E8D0C.io)
[02:34:19] *** Quits: mye (mye@moz-DC19BE8B.dip0.t-ipconnect.de) (Quit: mye)
[02:34:46] *** Quits: moostik (Icedove@moz-63ED7231.w82-121.abo.wanadoo.fr) (Ping timeout)
[02:35:29] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[02:38:01] *** Quits: prooftechnique (prooftechn@moz-65B7D4EE.hsd1.vt.comcast.net) (Quit: )
[02:38:45] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[02:38:48] *** Joins: prooftechnique (prooftechn@moz-65B7D4EE.hsd1.vt.comcast.net)
[02:39:00] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[02:39:32] *** jorendorff is now known as jorendorff_away
[02:41:00] *** Quits: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com) (Ping timeout)
[02:42:45] *** Quits: tautologico (iorek@4FCDF73C.2F29D054.7B974E06.IP) (Quit: zzz)
[02:43:02] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[02:43:30] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[02:45:17] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[02:52:18] *** Quits: jstevans (Instantbir@moz-8D4AF6B1.washdc.fios.verizon.net) (Ping timeout)
[02:54:02] *** Quits: valenting (Thunderbir@808EE6B5.84D5EFD5.FB866788.IP) (Ping timeout)
[02:54:55] *** Quits: sam113101 (sam@moz-ADDDDFB1.mc.videotron.ca) (Quit: WeeChat 0.4.3-dev)
[02:57:09] *** Joins: sprang (sprang@moz-920A95C4.hsd1.ca.comcast.net)
[02:59:27] *** Joins: jeffdb_ (jeff@moz-ED35AD97.hsd1.ca.comcast.net)
[02:59:48] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:01:40] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[03:01:49] *** Quits: adu (ajr@moz-47946E69.washdc.fios.verizon.net) (Quit: adu)
[03:05:55] <ktt3ja> When I send a message to the mailing list, is there a message width limit I should observe?
[03:08:02] <o11c> 70 columns is polite for mail in general
[03:10:14] <ktt3ja> ok
[03:11:05] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[03:12:12] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[03:13:48] *** Joins: joelteon_ (bzzt@moz-948A3799.lightspeed.snvaca.sbcglobal.net)
[03:13:53] *** Quits: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[03:14:42] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[03:16:27] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[03:16:28] *** Quits: joelteon_ (bzzt@moz-948A3799.lightspeed.snvaca.sbcglobal.net) (Client exited)
[03:17:06] *** Quits: KindOne (KindOne@moz-EF9CB998.dynamic.ip.windstream.net) (Ping timeout)
[03:18:40] *** Quits: joelteon (bzzt@moz-317E8D0C.io) (Quit: I'm out)
[03:18:54] *** Joins: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net)
[03:19:37] *** Joins: carter (carter@moz-F3C2A2D8.nycmny.fios.verizon.net)
[03:24:11] *** Joins: KindOne (KindOne@6F5C022B.E184454F.34F73994.IP)
[03:25:08] *** Joins: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com)
[03:26:57] *** Joins: hoopsnake (zac@moz-12CDD1F8.hsd1.wa.comcast.net)
[03:27:16] *** Joins: jstevans (Instantbir@moz-8D4AF6B1.washdc.fios.verizon.net)
[03:27:30] *** Quits: zz_kimundi (kimundi@moz-A6DB8B95.dip0.t-ipconnect.de) (Ping timeout)
[03:27:49] *** Quits: SiegeLord (sl@moz-89543762.washdc.east.verizon.net) (Quit: Leaving)
[03:30:41] *** Joins: zz_kimundi (kimundi@moz-7ED39474.dip0.t-ipconnect.de)
[03:31:10] *** zz_kimundi is now known as kimundi
[03:35:26] *** Quits: jstevans (Instantbir@moz-8D4AF6B1.washdc.fios.verizon.net) (Ping timeout)
[03:36:02] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[03:36:46] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[03:37:15] *** Joins: jstevans (Instantbir@moz-8D4AF6B1.washdc.fios.verizon.net)
[03:43:52] *** Joins: gaspier36 (Mibbit@4A1F8DF6.75A94A0.948E5B.IP)
[03:44:10] *** Parts: gaspier36 (Mibbit@4A1F8DF6.75A94A0.948E5B.IP) ()
[03:49:02] *** Quits: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com) (Ping timeout)
[03:49:58] *** Quits: dbaupp (Thunderbir@moz-4CA0D523.lns20.syd6.internode.on.net) (Ping timeout)
[03:51:30] *** Joins: joelteon_ (bzzt@moz-948A3799.lightspeed.snvaca.sbcglobal.net)
[03:53:22] *** Joins: dbaupp (Thunderbir@moz-3BE4086E.lns20.syd6.internode.on.net)
[03:58:35] *** Quits: joelteon_ (bzzt@moz-948A3799.lightspeed.snvaca.sbcglobal.net) (Client exited)
[03:58:48] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[04:08:43] *** Quits: jeffdb_ (jeff@moz-ED35AD97.hsd1.ca.comcast.net) (Quit: jeffdb_)
[04:09:28] *** Quits: hoopsnake (zac@moz-12CDD1F8.hsd1.wa.comcast.net) (Quit: leaving)
[04:12:24] *** Joins: jordyd (jordyd@7DAC4ACE.77F880E0.D9401097.IP)
[04:12:35] *** Joins: joelteon_ (bzzt@moz-948A3799.lightspeed.snvaca.sbcglobal.net)
[04:13:39] *** Quits: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca) (Quit: canhtak)
[04:14:46] *** Quits: joelteon_ (bzzt@moz-948A3799.lightspeed.snvaca.sbcglobal.net) (Client exited)
[04:15:28] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[04:16:08] *** Quits: jstevans (Instantbir@moz-8D4AF6B1.washdc.fios.verizon.net) (Ping timeout)
[04:17:15] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[04:18:24] *** Joins: dherman_ (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[04:23:17] *** Quits: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net) (Ping timeout)
[04:23:57] *** Joins: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net)
[04:27:29] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[04:34:49] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[04:38:01] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[04:41:42] *** Quits: jordyd (jordyd@7DAC4ACE.77F880E0.D9401097.IP) (Ping timeout)
[04:44:50] *** Joins: jordyd (jordyd@7DAC4ACE.77F880E0.D9401097.IP)
[04:47:30] *** Joins: peeves (Mibbit@C83F40FA.C3C4EFEF.4BC5EF08.IP)
[04:49:17] *** Quits: peeves (Mibbit@C83F40FA.C3C4EFEF.4BC5EF08.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:54:49] *** Joins: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP)
[04:57:18] *** Quits: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP) (Ping timeout)
[05:00:45] *** Joins: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com)
[05:01:55] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[05:02:01] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:03:45] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[05:04:24] *** Joins: sanxiyn (tinuviel@5DAC0FAD.5592B676.8A051A1C.IP)
[05:05:10] *** Quits: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com) (Ping timeout)
[05:06:45] *** Quits: carter (carter@moz-F3C2A2D8.nycmny.fios.verizon.net) (Quit: Textual IRC Client: www.textualapp.com)
[05:09:21] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[05:12:01] *** Quits: prooftechnique (prooftechn@moz-65B7D4EE.hsd1.vt.comcast.net) (Quit: )
[05:15:25] *** Joins: sam113101_afk (sam113101@moz-83612DFD.us-west-2.compute.amazonaws.com)
[05:15:25] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[05:15:35] *** Quits: sanxiyn (tinuviel@5DAC0FAD.5592B676.8A051A1C.IP) (Quit: Leaving)
[05:16:12] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[05:17:55] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[05:18:46] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[05:19:04] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[05:19:06] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:19:17] *** emk_ is now known as ekiara
[05:20:11] *** Quits: ktt3ja (Mibbit@moz-D69B60E4.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:20:28] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[05:20:30] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[05:24:32] *** Joins: nomadic (nomadic@moz-E01D5C49.hsd1.ga.comcast.net)
[05:27:33] *** sam113101_afk is now known as sam113101
[05:28:48] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Quit: Leaving.)
[05:37:19] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[05:41:07] *** Joins: z0w0 (zack@moz-3C2F9E52.qcl9.cha.bigpond.net.au)
[05:42:28] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[05:43:28] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[05:44:02] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[05:44:19] *** Quits: jordyd (jordyd@7DAC4ACE.77F880E0.D9401097.IP) (Ping timeout)
[05:44:35] *** Quits: sam113101 (sam113101@moz-83612DFD.us-west-2.compute.amazonaws.com) (Quit: ZNC - http://znc.in)
[05:45:02] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[05:49:03] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[05:50:04] *** Quits: Kxepal (Miranda@moz-77167FE1.pppoe.mtu-net.ru) (Connection reset by peer)
[05:50:08] *** Joins: kode-crypt (chatzilla@8CA41291.DAD92AC8.D216A595.IP)
[05:50:34] <kode-crypt> hi 
[05:50:44] *** kode-crypt is now known as dd
[05:51:53] <dd> if i want to change fix some bugs or contribute in compiler of rust then  what is the process ?? means i have to edit in my own source code and build it again ? 
[05:56:25] *** Quits: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[05:58:45] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:58:55] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[05:59:07] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[05:59:08] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:02:48] *** Quits: Sgeo (quassel@moz-D0F30617.dyn.optonline.net) (Ping timeout)
[06:03:16] *** Joins: Sgeo (quassel@moz-D0F30617.dyn.optonline.net)
[06:05:53] *** Quits: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[06:08:41] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[06:09:20] *** Joins: joelteon_ (bzzt@moz-948A3799.lightspeed.snvaca.sbcglobal.net)
[06:16:35] *** Joins: sam113101 (sam113101@moz-83612DFD.us-west-2.compute.amazonaws.com)
[06:16:58] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[06:18:47] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[06:20:25] *** Quits: joelteon_ (bzzt@moz-948A3799.lightspeed.snvaca.sbcglobal.net) (Client exited)
[06:22:06] *** Quits: dd (chatzilla@8CA41291.DAD92AC8.D216A595.IP) (Connection reset by peer)
[06:27:50] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[06:28:00] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[06:30:54] *** Quits: mark_edward (AndChat806@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Ping timeout)
[06:31:07] *** Joins: mark_edward (AndChat806@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[06:32:44] *** Joins: rpearl (rpearl@moz-2B41ACB5.andrew.cmu.edu)
[06:32:46] *** Quits: KindOne (KindOne@6F5C022B.E184454F.34F73994.IP) (Ping timeout)
[06:33:06] *** Joins: beifeng (Mibbit@6CA2D1B4.7BEF16F3.64FAF8EC.IP)
[06:36:29] *** Joins: KindOne (KindOne@BF376139.50CD9421.34F73994.IP)
[06:37:27] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[06:37:42] *** Joins: Kxepal (Miranda@moz-77167FE1.pppoe.mtu-net.ru)
[06:39:47] *** Joins: hjr3 (hradtke@moz-953723B0.public.wayport.net)
[06:41:40] *** Joins: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net)
[06:44:03] *** Joins: dd (chatzilla@8CA41291.DAD92AC8.D216A595.IP)
[06:47:31] *** Quits: dd (chatzilla@8CA41291.DAD92AC8.D216A595.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 25.0.1/20131115110315])
[06:48:16] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Quit: leaving)
[06:49:03] *** Quits: bungoman (bungoman@moz-F95B490C.tx.res.rr.com) (Client exited)
[06:49:27] *** Joins: bungoman (bungoman@moz-F95B490C.tx.res.rr.com)
[06:51:13] *** Quits: bungoman (bungoman@moz-F95B490C.tx.res.rr.com) (Ping timeout)
[06:52:21] *** Quits: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au) (Ping timeout)
[06:52:27] *** Joins: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au)
[06:56:48] *** Joins: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net)
[07:03:02] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[07:04:15] *** Parts: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) ()
[07:04:28] *** Quits: acrichto (acrichto@moz-69F2E428.ugrad.cs.cmu.edu) (Quit: leaving)
[07:05:17] *** Joins: acrichto (acrichto@moz-B63D64BD.res.cmu.edu)
[07:05:17] *** ChanServ sets mode: +o acrichto
[07:07:25] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[07:15:02] *** Joins: jstevans (Instantbir@moz-8D4AF6B1.washdc.fios.verizon.net)
[07:15:58] *** Quits: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net) (Quit: maxiepoo)
[07:16:36] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[07:16:41] *** Quits: jstevans (Instantbir@moz-8D4AF6B1.washdc.fios.verizon.net) (Ping timeout)
[07:17:24] *** Quits: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[07:17:43] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[07:19:27] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[07:20:06] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Client exited)
[07:21:42] *** Quits: KindOne (KindOne@BF376139.50CD9421.34F73994.IP) (Ping timeout)
[07:21:55] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[07:25:31] *** Joins: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net)
[07:26:03] *** Joins: KindOne (KindOne@moz-B2A9793.dynamic.ip.windstream.net)
[07:26:38] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Connection reset by peer)
[07:27:03] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[07:27:13] *** Quits: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net) (Connection reset by peer)
[07:30:08] *** Quits: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net) (Quit: maxiepoo)
[07:34:23] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[07:34:46] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[07:35:14] *** Joins: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net)
[07:39:00] *** Joins: bjz (bjz@1009100.A27A8065.D3BA2C17.IP)
[07:40:33] *** Quits: dherman_ (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman_)
[07:41:25] *** Quits: bjz (bjz@1009100.A27A8065.D3BA2C17.IP) (Ping timeout)
[07:41:41] *** Joins: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net)
[07:43:42] *** Quits: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net) (Quit: maxiepoo)
[07:45:41] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[07:46:02] *** Joins: gordon (Mibbit@moz-4A19983C.ip227.fastwebnet.it)
[07:46:32] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Client exited)
[07:46:55] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[07:47:20] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Client exited)
[07:47:41] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[07:49:08] <gordon> in a "for i in string.iter()" loop, how can I check if i corresponds to the last char?
[08:00:13] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[08:10:20] *** Quits: hjr3 (hradtke@moz-953723B0.public.wayport.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[08:10:56] *** Joins: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net)
[08:11:56] <wycats_> gordon: you can use .enumerate()
[08:12:09] <wycats_> for (i, char) in string.iter().enumerate()
[08:12:19] <wycats_> and then check if i == string.len() -1
[08:12:23] <wycats_> there's probably a better way
[08:18:26] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[08:20:10] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[08:20:55] <myname> you may want to make a do loop yourself and look at .next
[08:21:38] *** Joins: cdidd (cdidd@moz-7E06665B.broadband.corbina.ru)
[08:26:48] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:31:13] *** Quits: refold (gman@moz-42D68426.a258.priv.bahnhof.se) (Quit: leaving)
[08:32:06] *** Joins: Lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net)
[08:36:43] *** Joins: Ms2ger (Ms2ger@moz-1B43DE50.adsl-dyn.isp.belgacom.be)
[08:38:21] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[08:38:47] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[08:39:36] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[08:40:08] *** Joins: moostik (Icedove@moz-63ED7231.w82-121.abo.wanadoo.fr)
[08:40:52] *** Quits: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net) (Quit: maxiepoo)
[08:41:37] *** Quits: alonlevy (alon@moz-BCF1494.bb.netvision.net.il) (Ping timeout)
[08:42:09] <tikue> does string.len() always correspond to the number of glyphs?
[08:42:38] <myname> i know there was seperate char_len and byte_len
[08:42:46] <tikue> ah
[08:42:51] <myname> don't know if char_len has been renamed to len, though
[08:43:11] <myname> if char_len exists, it should be what you want
[08:43:46] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:45:55] <dbaupp> tikue: .char_len gives the number of code points, .len gives (and has always given) the number of bytes
[08:46:02] <dbaupp> (codepoints != glyphs,f wiw.)
[08:46:30] <myname> oh
[08:48:06] <tikue> is the number of codepoints ever different from the number of glyphs?
[08:48:11] <dbaupp> yes
[08:48:20] <tikue> when would that be?
[08:48:42] <dbaupp> Ã¤ can be either the single "precomposed" character Ã¤, or a + the combining character rotated-:
[08:48:51] <tikue> ah that makes sense
[08:48:52] <heftig> i guess if you want something close to "glyph" length, you could transform it into NFKC first
[08:49:02] <dbaupp> yeah, nfkc_iter().len()
[08:49:22] <dbaupp> rusti: "fÃ¤Ã¥Ã¶".nfkc_iter().len()
[08:49:25] -rusti- <anon>:9:9: 9:25 error: type `&'static str` does not implement any method in scope named `nfkc_iter`
[08:49:25] -rusti- <anon>:9          "fÃ¤Ã¥Ã¶".nfkc_iter().len()
[08:49:25] -rusti-                   ^~~~~~~~~~~~~~~~
[08:49:26] -rusti- error: aborting due to previous error
[08:49:26] -rusti- application terminated with error code 101
[08:49:29] *** Quits: Ms2ger (Ms2ger@moz-1B43DE50.adsl-dyn.isp.belgacom.be) (Quit: bbl)
[08:49:44] <o11c> and there are plenty of glyphs that don't have a precomposed form.
[08:49:53] <dbaupp> hm, we only have nfkd and nfd.
[08:50:10] <o11c> I don't even remember if there is a finite limit to the number of code points in a glyph
[08:50:15] <dbaupp> there isn't
[08:50:35] <tikue> rusti: ("fÃ¤Ã¥Ã¶".char_len(), "fÃ¤Ã¥Ã¶".byte_len())
[08:50:36] -rusti- <anon>:9:26: 9:41 error: type `&'static str` does not implement any method in scope named `byte_len`
[08:50:36] -rusti- <anon>:9          ("fÃ¤Ã¥Ã¶".char_len(), "fÃ¤Ã¥Ã¶".byte_len())
[08:50:36] -rusti-                                    ^~~~~~~~~~~~~~~
[08:50:36] -rusti- error: aborting due to previous error
[08:50:36] -rusti- application terminated with error code 101
[08:50:47] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[08:50:50] <dbaupp> tikue: there isn't (and never was) .byte_len :P
[08:50:53] <tikue> ah
[08:50:56] <dbaupp> rusti: ("fÃ¤Ã¥Ã¶".char_len(), "fÃ¤Ã¥Ã¶".len())
[08:50:58] -rusti- (4u, 7u)
[08:51:13] <heftig> to the delight of many idiots, who love to post text decorated with enormous amounts of combining characters
[08:51:36] <heftig> my poor layout engine!
[08:52:03] * dbaupp pastes zalgo text
[08:52:33] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[08:52:42] <dbaupp> ( http://eeemo.net/ )
[08:54:01] <heftig> dbaupp: yeah, that's what I meant.
[08:54:35] *** Joins: ssbr (devin@moz-8EC4F450.lightspeed.sntcca.sbcglobal.net)
[08:55:25] <dbaupp> rusti: ("TÌžÌ£Ì˜oÌ·ÌœÌ¼ÌœÍ–ÌŸÍš".char_len(), "TÌžÌ£Ì˜oÌ·ÌœÌ¼ÌœÍ–ÌŸÍš".len())
[08:55:26] <o11c> those are all precombined
[08:55:26] -rusti- (12u, 22u)
[08:55:44] <dbaupp> .glyph_len() (if it existed) would return 2 there.
[08:56:14] <myname> wtf 12?
[08:56:16] <myname> why?
[08:57:22] <o11c> two characters, each with a base and a combining mark
[08:57:39] <o11c> each of which must be high enough to be 3 bytes
[08:57:46] <o11c> or posssible 2+2+2 or 4+2 or ...
[08:58:01] *** Quits: sprang (sprang@moz-920A95C4.hsd1.ca.comcast.net) (Quit: sprang)
[08:58:48] <myname> so, is there actually a way to get how "wide" a string is?
[08:58:55] <dbaupp> not in Rust yet.
[08:59:01] <dbaupp> it's surprisingly hard
[08:59:09] <o11c> and even if you know the *glyph* count, it's not the same as the column count
[08:59:09] <myname> i am not surprised
[08:59:18] <dbaupp> there are zero and double width characters, along with the combining ones.
[08:59:52] <o11c> @ is not the same as ï»¿ï¼ 
[09:00:02] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[09:00:06] *** Quits: Addle (quassel@moz-89E971E4.cable.teksavvy.com) (Client exited)
[09:00:27] <ssbr> o11c: Argh!@
[09:00:37] <myname> wow @ ï¼ 
[09:00:42] <myname> don't even know it
[09:01:31] *** Quits: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net) (Ping timeout)
[09:03:05] <Lurk_> ðŸ’©
[09:03:56] *** Quits: Lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[09:05:26] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[09:05:33] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[09:05:55] <jj2baile> Sweet, can't used @ as a function name in haskell, but I can use ï¼ ! Thanks.
[09:06:23] <myname> jj2baile: you are not serious
[09:07:48] *** Joins: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net)
[09:08:06] *** Joins: jeffdb_ (jeff@moz-ED35AD97.hsd1.ca.comcast.net)
[09:08:06] *** Joins: Addle (quassel@moz-89E971E4.cable.teksavvy.com)
[09:08:08] *** Joins: saati (s@moz-11469F61.harmless.hu)
[09:08:36] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[09:09:53] *** Quits: Addle (quassel@moz-89E971E4.cable.teksavvy.com) (Ping timeout)
[09:10:07] *** Joins: Addle (quassel@moz-89E971E4.cable.teksavvy.com)
[09:10:23] *** Joins: glennsl (textual@moz-6822C772.customer.cdi.no)
[09:10:40] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[09:12:20] <jj2baile> =) I'll leave it there until I grow annoyed.
[09:13:22] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[09:16:09] *** Joins: peterdn (chatzilla@moz-D11BA78C.as13285.net)
[09:16:21] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[09:17:48] *** Joins: mikezaby (mikezaby@moz-AA896205.home.otenet.gr)
[09:18:44] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Quit: Leaving...)
[09:19:12] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[09:19:17] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[09:19:19] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[09:22:07] *** Joins: bungoman (bungoman@moz-F95B490C.tx.res.rr.com)
[09:24:06] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Quit: Leaving...)
[09:24:36] *** Joins: derek_c (derek@moz-DE5999C8.cit.cornell.edu)
[09:24:43] <derek_c> what is a non-scalar cast?
[09:25:55] <ssbr> IIRC a cast of something that isn't an int, char, etc.
[09:26:09] <ssbr> You can't cast, say, a pointer to int, or a struct. You can cast an int or char or such.
[09:26:24] <ssbr> eh, I lie, you can cast pointers. Blegh.
[09:26:25] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[09:26:55] <ssbr> I think I can't help at this level of discourse. If you want to ask a more specific question, maybe I'll be of more use.
[09:27:44] <derek_c> ssbr: I think that's clear enough. thanks!
[09:27:55] <derek_c> I'm trying to get this code to compile.  Can someone take a look? http://upl.io/aariu7
[09:28:00] <derek_c> weird type errors
[09:29:47] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[09:30:01] <ssbr> My rust implementation is currentely AWOL. What errors do you get?
[09:30:43] <derek_c> ssbr: this: http://upl.io/s3m4qd
[09:31:32] *** Quits: Kxepal (Miranda@moz-77167FE1.pppoe.mtu-net.ru) (Ping timeout)
[09:32:38] <ssbr> BLargh, that is weird.
[09:33:04] <ssbr> Sorry, I don't understand the error messages either.
[09:33:30] <derek_c> ssbr: thanks anyway :)
[09:34:24] *** Joins: Kxepal (Miranda@moz-88CB069F.pppoe.mtu-net.ru)
[09:35:41] <saati> error: expected function but found `~fn(Error, ~str)` what does this mean?
[09:36:11] <saati> expected a function but found a closure?
[09:37:09] <derek_c> saati: can you paste your code?
[09:38:41] <saati> it's in https://github.com/bjz/glfw-rs/blob/master/src/glfw/extfn.rs
[09:38:51] <saati> line 32
[09:40:06] *** Joins: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP)
[09:40:36] <derek_c> saati: alright I guess I'm too newbie to understand this code, sorry :)
[09:41:04] <derek_c> are all Rust masters asleep?
[09:41:26] <saati> it compiled with another level of dereference
[09:41:31] *** Quits: boredomist (ruqs@B16F530C.DC641F2C.BCAEBB33.IP) (Ping timeout)
[09:45:33] *** Quits: Kxepal (Miranda@moz-88CB069F.pppoe.mtu-net.ru) (Connection reset by peer)
[09:46:44] <SingingBoyo> derek_c: might be a bit late, but for line 30 at least, you need to unwrap file from the option first.
[09:46:45] <derek_c> are all Rust masters asleep?
[09:47:13] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[09:47:19] <SingingBoyo> File::create returns an Option<File>, rather than a File... couldn't tell you why though, API docs don't seem to say
[09:47:45] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[09:50:36] <derek_c> SingingBoyo: thanks! I just figured that out.  There is a nice example on this page: http://static.rust-lang.org/doc/master/std/io/fs/struct.File.html
[09:50:45] *** Joins: Kxepal (Miranda@moz-88CB069F.pppoe.mtu-net.ru)
[09:56:16] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[10:03:09] *** Quits: derek_c (derek@moz-DE5999C8.cit.cornell.edu) (Quit: Leaving)
[10:09:03] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[10:09:51] *** Quits: jeffdb_ (jeff@moz-ED35AD97.hsd1.ca.comcast.net) (Quit: jeffdb_)
[10:10:18] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[10:13:01] *** Joins: valenting (Thunderbir@9A1975C1.39CE2EE.E400A05F.IP)
[10:15:33] *** Quits: valenting (Thunderbir@9A1975C1.39CE2EE.E400A05F.IP) (Ping timeout)
[10:18:11] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[10:20:49] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[10:20:54] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[10:22:36] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[10:22:44] *** Joins: nkoep (nik@moz-B0D24E24.pool.mediaways.net)
[10:23:57] <kimundi> I'm not a master, but I'm awake now :P
[10:24:53] <dbaupp> huh, what is bjz doing... `&ref x` is a no-op. :P
[10:25:14] <kimundi> haha
[10:25:45] <eddyb> but is ref&x a no-op?
[10:25:53] <dbaupp> saati: the problem is ~fn(...) used to be a heap closure
[10:25:56] <dbaupp> eddyb: no, it's invalid
[10:26:05] <saati> dbaupp: what's the current syntax?
[10:26:19] <eddyb> there's proc, I think
[10:26:32] <dbaupp> saati: ~fn is now parsed as ~(extern "Rust" fn), i.e. a pointer to a function declared as `fn foo( ) { ... }` rather than a closure
[10:26:35] <eddyb> but that dies on the first call, doesn't it?
[10:26:39] <saati> the documentation still has the old forms
[10:26:40] <dbaupp> but yes, there's proc, which can only be called once
[10:26:56] <eddyb> s/on the first call/after the first call completes
[10:27:00] <dbaupp> (yeah, documentation is especailly slow on the huge pervasive changes like the closure reform is)
[10:27:22] <dbaupp> the "full" replacement for ~fn is a ~Trait object
[10:27:44] <eddyb> ~Fn<Ret, ..Args> :P
[10:27:48] <saati> is there a stack closure now?
[10:27:50] *** Quits: beifeng (Mibbit@6CA2D1B4.7BEF16F3.64FAF8EC.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:28:08] <dbaupp> so in this case, trait ErrorFun { fn call(&self, error: Error, description: ~str); } passed like ~ErrorFun (rather than ErrorFun)
[10:28:22] <dbaupp> (boxed) stack closures still exist
[10:28:31] <dbaupp> they're written like |args...| -> return
[10:28:44] <dbaupp> (or optionally just |args...| if they return ().)
[10:28:49] <eddyb> saati: well, closures are either stack closures (the same syntax) or casted from bare functions
[10:29:13] <dbaupp> (that is, there types are written like the above.)
[10:29:16] *** Joins: wippler (Mibbit@moz-DDC5F5F2.gae.googleusercontent.com)
[10:29:20] <dbaupp> *their
[10:29:20] <eddyb> s/casted/coerced/
[10:29:21] *** Quits: wippler (Mibbit@moz-DDC5F5F2.gae.googleusercontent.com) (Quit: wippler)
[10:29:33] <saati> how do the Traits close over values?
[10:29:51] <eddyb> saati: you put the state in a structure implementing that trait
[10:29:57] <saati> ah
[10:30:41] <eddyb> too bad Rc<Trait> doesn't work :(
[10:31:51] <dbaupp> saati: Rust may grow syntactic sugar for the trait-object-as-closure, but we don't have it yet
[10:32:14] <saati> what was the problem with the old closures?
[10:32:41] <dbaupp> they didn't fit into the language perfectly, and the new design will (hopefully) work better.
[10:33:16] <dbaupp> at least, it's the second (or more) iteration, so the core-devs have presumably learnt something and are getting it more correct on the second go.
[10:33:22] <eddyb> from what I understand, we want the repr of a pointer to Fn<Ret, ..Args> to be identical to the one used by |..Args| -> Ret right now
[10:33:26] *** Joins: valenting (Thunderbir@9A1975C1.39CE2EE.E400A05F.IP)
[10:34:44] <dbaupp> eddyb: do we?
[10:34:55] <dbaupp> Fn<Ret, ..Args> doesn't even exist yet :P
[10:34:57] <eddyb> at that point, you can create all kinds of adaptors, like current Iterators (moar functional madness), box an unboxed closure into an Rc or Gc, etc. - without breaking backwards compat
[10:35:05] <kimundi> Presumably, a &mut Fn<Ret, ..Args> trait object would be the desugared form of |..Args| -> T
[10:35:45] <eddyb> dbaupp: it will have to exist :D
[10:35:50] <kimundi> dbaupp: It's been talked of as backwards compatible change in the future
[10:38:00] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[10:39:21] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[10:39:38] *** Parts: mikezaby (mikezaby@moz-AA896205.home.otenet.gr) ()
[10:41:40] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[10:42:13] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[10:43:59] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[10:48:57] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[10:49:50] *** Quits: valenting (Thunderbir@9A1975C1.39CE2EE.E400A05F.IP) (Ping timeout)
[10:50:07] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[10:50:21] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[10:55:48] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[11:02:16] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[11:07:12] *** Joins: Jackneill (Jackneill@moz-4C713A24.pool.digikabel.hu)
[11:08:28] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[11:08:44] *** Joins: mikezaby (mikezaby@moz-AA896205.home.otenet.gr)
[11:08:51] *** Parts: mikezaby (mikezaby@moz-AA896205.home.otenet.gr) ()
[11:10:56] *** Quits: bungoman (bungoman@moz-F95B490C.tx.res.rr.com) (Client exited)
[11:11:22] *** Joins: bungoman (bungoman@moz-F95B490C.tx.res.rr.com)
[11:13:08] *** Quits: bungoman (bungoman@moz-F95B490C.tx.res.rr.com) (Ping timeout)
[11:13:14] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[11:13:20] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[11:15:16] <eddyb> https://en.wikipedia.org/wiki/The_Last_of_the_Masters#The_last_government lol, I just saw this link on bors' github profile
[11:21:08] <eddyb> https://mail.mozilla.org/pipermail/rust-dev/2013-November/006939.html hmmm... reminds me of what minecraft did with the map format changes. the problem is you need to support all different versions
[11:22:17] <dbaupp> Eridius: ping
[11:25:38] <dbaupp> Eridius: unping
[11:28:16] <eddyb> hehe
[11:28:40] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[11:30:47] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[11:33:50] <eddyb> rusti: #[deriving(Clone)] struct Foo; Foo.clone()
[11:33:51] -rusti- <anon>:9:40: 10:5 error: type `main::Foo` does not implement any method in scope named `clone`
[11:33:51] -rusti- <anon>:9          #[deriving(Clone)] struct Foo; Foo.clone()
[11:33:52] -rusti- <anon>:10     };
[11:33:52] -rusti- error: aborting due to previous error
[11:33:52] -rusti- application terminated with error code 101
[11:34:11] <eddyb> hmm, was that ever fixed? this comment in dataflow doesn't have an issue number
[11:36:01] <dbaupp> search GH for "Deriving doesn't work inside functions"
[11:36:04] <klutzy> https://github.com/mozilla/rust/issues/4913
[11:36:35] <dbaupp> eddyb: (the answer is no, still a bug.)
[11:37:36] <eddyb> dbaupp: nah, not that one. deriving Clone on an empty struct
[11:37:43] <eddyb> s/empty/unit
[11:38:20] <eddyb> /// XXX(pcwalton): Should just be #[deriving(Clone)], but that doesn't work yet on unit structs.
[11:38:42] <dbaupp> oh
[11:38:52] <dbaupp> well, the bug rusti is showing is #4913 :P
[11:39:24] <dbaupp> rusti: mod foo { #[deriving(Clone)] pub struct Foo; } foo::Foo.clone()
[11:39:25] -rusti- main::foo::Foo
[11:39:29] <dbaupp> yes
[11:39:34] <dbaupp> it's fixed
[11:41:12] <eddyb> need to replace a few occurrences of it, then :)
[11:41:21] <dbaupp> feel free to open a PR
[11:41:33] <dbaupp> I'll be around for an hour or two to r+ :p
[11:41:51] <eddyb> hopefully this works: env RUST_LOG=rustc::middle::dataflow
[11:43:10] *** Joins: mhi (mhi@moz-EA34E164.cust.telecolumbus.net)
[11:43:51] *** Joins: nlminhtl (ignotus@moz-BA3DE7EF.volia.net)
[11:43:56] <nlminhtl> hi
[11:44:12] <nlminhtl> where I can find rust binaries for ARM?
[11:44:21] <nlminhtl> where can I*
[11:44:37] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[11:46:43] <kimundi> nlminhtl: I'm not sure there is a place to find them at the moment
[11:47:22] <dbaupp> nlminhtl: http://luqman.ca/rust-builds/
[11:47:24] <kimundi> nlminhtl: Need to build them yourself.
[11:47:39] <kimundi> ...
[11:47:40] <kimundi> hu
[11:47:47] <kimundi> That one is new :P
[11:47:52] <eddyb> nlminhtl: I remember someone was building ARM binaries, but I don't know for sure. nvm, link showed up
[11:48:00] <eddyb> I should stop taking 5 minutes to write one message
[11:48:01] <dbaupp> nlminhtl: (as you may guess from the URL, Luqman is the person to talk to if you have any questions.)
[11:48:19] *** Joins: bungoman (bungoman@moz-F95B490C.tx.res.rr.com)
[11:48:39] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[11:49:35] *** Quits: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au) (Ping timeout)
[11:50:02] *** Quits: bungoman (bungoman@moz-F95B490C.tx.res.rr.com) (Ping timeout)
[11:50:08] *** Joins: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au)
[11:51:19] *** Joins: mihneadb (mihneadb@A64FDE7E.7E118222.89C0DD0D.IP)
[11:52:13] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[11:52:40] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[11:56:06] <gordon> How would I convert this C++ map to Rust? https://gist.github.com/anonymous/c4a8c32bbff3f911f727
[11:56:12] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[11:56:13] *** Quits: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au) (Quit: ChatZilla 0.9.90.1 [Firefox 26.0/20131118212339])
[11:57:54] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[11:58:08] <kimundi> let mut table = HashMap::<~str, ~[~str]>::new(); table.push(~"a", ~[~"foo"]); table.push(~"e", ~[~"bar", ~"baz"]); 
[11:58:17] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[11:58:20] <kimundi> SOmething like that at least
[11:59:31] <eddyb> SmallString<size_of::<uint>()> pls
[12:00:19] <kimundi> eddyb: As soon as we get DST and integers in the type system :P
[12:00:34] <kimundi> Oh, and constexpr
[12:00:42] <eddyb> that actually doesn't need DST, just integers in generics and CTFE
[12:01:05] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[12:01:06] <kimundi> Well, it is based on things that will change with DST...
[12:01:08] <dbaupp> rusti: let table: HashMap<~str, ~[~str]> = (~[(~"a", ~[~"foo]), (~"e", ~[~"bar", ~"baz"])]).move_iter().collect(); table.to_str()
[12:01:08] -rusti- <anon>:11:16: 11:17 error: unknown start of token: ?
[12:01:08] -rusti- <anon>:11     println!("{:?}", r)
[12:01:08] -rusti-                           ^
[12:01:08] -rusti- application terminated with error code 101
[12:01:42] <dbaupp> rusti: let table: std::hashmap::HashMap<~str, ~[~str]> = (~[(~"a", ~[~"foo"]), (~"e", ~[~"bar", ~"baz"])]).move_iter().collect(); table.to_str()
[12:01:44] -rusti- ~"{e: [bar, baz], a: [foo]}"
[12:01:56] <eddyb> <3 JS(ON)
[12:02:08] <eddyb> how does RUST_LOG work, btw?
[12:02:16] <eddyb> is it module-based?
[12:02:28] <dbaupp> yes
[12:02:41] <dbaupp> RUST_LOG=::help ./exe to see the list of usable modules
[12:02:56] <eddyb> dammit. I want just one function, in dataflow
[12:03:02] <dbaupp> and then `RUST_LOG=path::to::module,path::to::another_module=debug ...`
[12:03:06] <kimundi> info!, warn! error! and debug! produce logging output, that gets enabled by setting RUST_LOG to a value that enables the corresponding log level and /or module
[12:05:01] <eddyb> yeah, well, all the debug output in the module uses the same level, and I don't want to see 128MB, one byte at a time, in my output
[12:06:07] <dbaupp> I'm pretty sure you do :P
[12:06:33] <dbaupp> (can't you pipe it through grep to filter the lines you need?)
[12:07:08] <kimundi> Hm, I've thought a bit about yieldable functions that result in a Iterator definition, and how to enable them to produce DoubleEndedIterators: https://gist.github.com/Kimundi/7626289
[12:07:56] <dbaupp> kimundi: weird, but interesting.
[12:08:24] <dbaupp> kimundi: (although, how often does one want to write a double ended iterator? is it worth the extra complexity?)
[12:09:04] <kimundi> Well, almost all Iterators I found in the stdlib yesterday are double ended ones
[12:09:13] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[12:09:22] <kimundi> Allmost all the ones listed here: https://github.com/mozilla/rust/pull/10622
[12:09:40] <dbaupp> yeah, but the stdlib authors can cope with writing double ended ones
[12:09:45] <dbaupp> ... by hand
[12:10:20] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Connection reset by peer)
[12:10:25] <dbaupp> I was thinking in the "common" case of just writing an short iterator transformer in normal user code
[12:10:39] <gordon> thanks for the help with the map code
[12:10:45] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[12:10:55] <kimundi> That leads to a line of reasoning that ends with "We only need yield functions for beginners"
[12:11:02] <dbaupp> kimundi: no it doesn't
[12:12:35] <kimundi> Library authors can cope with writing them manually -> Good library authors write all Iterators manually -> yield function syntax won'T be used much for library code
[12:13:07] <eddyb> yeah, that would be a problem
[12:13:11] <dbaupp> I was thinking the stdlib mainly, since its iterators are the fundamental ones
[12:13:22] <kimundi> Not that I don'T differentate between stdlib code and any other code here :P
[12:13:25] <dbaupp> and they're some of the small subset of iterators that *can* be reversed
[12:13:26] <kimundi> Note*
[12:13:42] <gordon> how would I make .rs file that only contains the code to set up the aforementioned map, and allows the map to be read from outside?
[12:13:43] <eddyb> kimundi: being able to opt-in to the reverse iteration code would be neat
[12:13:47] <dbaupp> kimundi: not many other libraries will be writing range & slice iterators, etc.
[12:14:31] <ssbr> kimundi: what do you do if there's more than one "yield"? not work?
[12:14:56] <eddyb> kimundi: and a for .. in .. loop with an yield inside can be converted to a map, and that can work in reverse *sometimes*
[12:14:58] *** Quits: KindOne (KindOne@moz-B2A9793.dynamic.ip.windstream.net) (Ping timeout)
[12:15:21] *** Joins: onix (Mibbit@542C6914.704A42BE.5BF85357.IP)
[12:15:22] <eddyb> so some iterators can be reversed by the desugaring code, I think :P
[12:15:33] <kimundi> eddyb: Sure, leaving of the back iteration block could be possible
[12:16:00] <kimundi> dbaupp: Honestly, I don't know enough about code in the wild to know which sorts of Iterators are more common to write
[12:16:31] *** Parts: onix (Mibbit@542C6914.704A42BE.5BF85357.IP) ()
[12:16:34] <gordon> or in other words, how do I get the compiler to accept this file? https://gist.github.com/anonymous/1fbb4e464b5280f82047
[12:16:42] <kimundi> ssbr: In general, those code transformations would generate a state machine that keeps track of its stae in the struct
[12:16:55] <kimundi> ssbr: So, as many yield as you want
[12:17:52] <eddyb> await can be sugar on top of yield. although I'm not sure if we want/need async at that level
[12:18:13] <kimundi> gordon: https://gist.github.com/Kimundi/d38ca1493cfc2b7085c5
[12:18:23] <ssbr> kimundi: If you go forward a step in the forward direction, and then want to go backwards, how do you decide where to resume in the backward direction's block?
[12:18:39] <kimundi> ssbr: Thats not how double ended iteratros work
[12:18:52] *** Joins: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP)
[12:18:55] *** Joins: KindOne (KindOne@moz-4C3F5651.dynamic.ip.windstream.net)
[12:18:57] <kimundi> ssbr: Double ended iterators represent a range of values
[12:18:59] <eddyb> you have a forward iterator and a reverse one, no?
[12:19:04] <gordon> kimundi: I'm trying to make a table.rs file which only has the map in it, and can then be read from outside
[12:19:15] <ssbr> kimundi: double ended iterators have a next method and a next_back method
[12:19:19] <kimundi> ssbr: in the code example in that gist, it would be [0, 1, 2, ... 8, 9, 10]
[12:19:21] <ssbr> kimundi: i.e. you can step forwards and you can step backwards.
[12:19:32] <ssbr> kimundi: you can't step back and say there's some higher abstraction -- this is the interface.
[12:19:46] <kimundi> ssbr: No, thats not how DOuble ended Iterators work
[12:19:53] <kimundi> ssbr: Thewre is not back step
[12:19:56] <ssbr> kimundi: am I reading the wrong docs?
[12:19:57] <gordon> and by "read from outside" I mean reading the contents of the table from my main.rs
[12:19:57] <ssbr> http://static.rust-lang.org/doc/master/std/iter/trait.DoubleEndedIterator.html
[12:20:05] <kimundi> ssbr: There is only "decrease range of values from the other end"
[12:20:26] <ssbr> kimundi: oh, okay.
[12:20:34] <ssbr> I see. I was confused.
[12:20:38] <ssbr> Sorry.
[12:20:47] <eddyb> gordon: are you sure you want to store the table in Rust code?
[12:20:47] <kimundi> rusti: let mut r = range(0, 3); (r.next(), r.next_back(), r.next())
[12:20:48] -rusti- (Some(0), Some(2), Some(1))
[12:20:58] <eddyb> gordon: it sounds like you could have table.json
[12:21:15] <ssbr> it's a good thing I never did anything complicated with double ended iterators...
[12:21:32] <kimundi> haha :)
[12:21:48] <SingingBoyo> gordon: globals/statics are a bit odd, but pub static table:std::hashmap... MIGHT work.  might not too.
[12:22:06] <eddyb> kimundi: so it's just a forward and a reverse iterator, merged? isn't that doubling the state?
[12:22:38] <eddyb> SingingBoyo: you won't be able to add to it, without making it mutable, which makes touching it unsafe
[12:22:45] <kimundi> So, the problem with enabling nice syntax for only yieldable functions is that it only allows you to write Iterator impls that generate a sequence of values, not a range of values, as a DoubleEndedIterator would
[12:23:09] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[12:23:45] <kimundi> eddyb: As vague as I wrote that gist, it wouldn't double anything
[12:25:03] <eddyb> kimundi: but range has two states, no?
[12:25:09] <kimundi> eddyb: The code transformation that turns the code into a DoubleEndedIterator impl would need to do a few optimizations to arrive at a small struct definition, though
[12:25:22] <kimundi> eddyb: There is only one state
[12:25:59] <kimundi> eddyb: The state that stores all information for the iterator to decide how to proced on a next() or next_back() call
[12:26:06] <eddyb> rusti: let mut r = range(0, 3); (r.next(), r.next(), r.next(), r.next_back(), r.next_back(), r.next_back())
[12:26:07] -rusti- (Some(0), Some(1), Some(2), None, None, None)
[12:26:12] <eddyb> o_O
[12:26:18] <kimundi> which _might_ contain more information than necessary for only next()
[12:26:26] *** Joins: ofeldt- (ofeldt@moz-CBEAEFD1.dip0.t-ipconnect.de)
[12:26:34] <kimundi> eddyb: It's a range of values
[12:26:36] <eddyb> rusti: let mut r = range(0, 3); (r.next(), r.next_back(), r.next(), r.next_back(), r.next(), r.next_back())
[12:26:37] -rusti- (Some(0), Some(2), Some(1), None, None, None)
[12:26:44] <kimundi> eddyb: Both ends meet in the middle
[12:26:48] * eddyb is very confused
[12:26:54] *** Parts: poiru (poiru@moz-C4357EA7.kapsi.fi) ()
[12:27:05] <eddyb> rusti: let mut r = range(0, 3); (r.next(), r.next(), r.next_back(), r.next(), r.next_back())
[12:27:06] -rusti- (Some(0), Some(1), Some(2), None, None)
[12:27:06] *** Quits: ofeldt (ofeldt@moz-AC8454BD.dip0.t-ipconnect.de) (Ping timeout)
[12:27:26] <kimundi> eddyb: [0, 1, 2] -> [1, 2] -> [2] -> [] -> [] -> ...
[12:27:40] <eddyb> so, what, UB if you mix both methods?
[12:27:47] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[12:27:52] <kimundi> define mix
[12:27:55] <eddyb> rusti: let mut r = range(0, 3); (r.next(), r.next_back(), r.next(), r.next_back())
[12:27:55] -rusti- (Some(0), Some(2), Some(1), None)
[12:28:02] <kimundi> No+
[12:28:03] <eddyb> 3 is too small
[12:28:08] <kimundi> perfectly, intentional, defined behavior
[12:28:18] <eddyb> rusti: let mut r = range(0, 10); (r.next(), r.next(), r.next_back(), r.next(), r.next_back())
[12:28:19] -rusti- (Some(0), Some(1), Some(9), Some(2), Some(8))
[12:28:31] <kimundi> eddyb: range(0, 3) represents the values 0, 1, 2
[12:28:43] <eddyb> aaaaaah
[12:28:51] <eddyb> kimundi: it removes from one end or the other?
[12:28:57] <kimundi> Exactly
[12:29:02] <eddyb> that's confusing at first
[12:29:14] <kimundi> D calls them ranges for that reason
[12:29:40] <kimundi> Arguably a less confusing name if you focus on double ended iterators
[12:30:37] <kimundi> rusti: let mut i = "abc".iter(); (i.next(), i.next_back(), i.clone().next(), i.clone().next_back())
[12:30:38] -rusti- (Some('a'), Some('c'), Some('b'), Some('b'))
[12:31:40] <eddyb> I guess this is easy with range + random access
[12:31:43] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[12:32:56] <kimundi> eddyb: Hm, what do you mean with that?
[12:33:56] <eddyb> kimundi: range(0, x.len()).map(|&i| x[i])
[12:34:30] *** Joins: Ferreus (ferreus@moz-B99D3D4F.pools.arcor-ip.net)
[12:34:40] <kimundi> I still don'T know what you'Re talking about :)
[12:34:59] <eddyb> that's a double-ended iterator, isn't it?
[12:35:08] <jix> is there anything that explains the rules for mutable borrowed pointers?
[12:35:51] <eddyb> the problem of pointer aliasing?
[12:36:02] <kimundi> eddyb: That expression evaluates to a generic type instantiation that happens to have a DoubleEnded Iterator implementation, but I'm not sure that'S what you eman :)
[12:36:39] <jix> I keep writing code that the rust compiler doesn't like and I'm not sure my interpretation of why I'm not allowed to do that is correct
[12:36:49] <kimundi> In any case, thats way to complicated for a slice iterator :P
[12:36:56] <eddyb> kimundi: you can combine the range primitive and a random-access container to get a double-ended (+random access, I guess) iterator
[12:37:07] <eddyb> but that may be way off on a tangent
[12:37:34] <eddyb> jix: you can't have your cake and eat it
[12:37:36] <kimundi> eddyb: Yeah
[12:38:04] <jix> eddyb: I'm not saying I should be allowed to do what I tried, I just want to understand what is allowed and what isn't
[12:38:16] <kimundi> jix: What errors do you get?
[12:38:58] <jix> kimundi: depends on how I try to write it... but I think cannot borrow ... as mutable more than once at a time is the real problem
[12:39:05] <eddyb> jix: if you have one mutable borrowed pointer to something, you can't have any other borrowed pointer to it
[12:39:22] <eddyb> you can have as many immutable ones as you want, as long as there is no mutable one
[12:39:23] <jix> but it kind of seems to work with mutable pointers that point to parts of another thing borrowed mutably 
[12:39:43] <jix> so it isn't as clear to me as I'd like it to be
[12:40:27] <jix> not having multiple mutable borrow pointers makes sense, and I can just work around that, but the cases where I am allowed to have mutable borrowed pointers to related parts are more confusing to me
[12:40:33] <eddyb> jix: you aren't allowed to be able to write to some object in memory from one place and read/write to the same memory from another place
[12:41:07] <jix> but if I have a pointer to a parent and a child, both mutable, does rust make sure that I cannot use the parent as long as the child is alive?
[12:41:16] <eddyb> jix: I think so
[12:41:17] <jix> (the pointer to the child is alive)
[12:42:00] <jix> ok it starts to make sense to me again :) thanks
[12:42:27] *** Joins: bungoman (bungoman@moz-F95B490C.tx.res.rr.com)
[12:42:34] <eddyb> rusti: struct P{x:int,y:int} let mut p = P{x:0,y:1}; let a = &mut p; let x = &mut a.x;
[12:42:35] -rusti- <anon>:9:75: 9:76 warning: unused variable: `x` [-W unused-variable (default)]
[12:42:36] -rusti- <anon>:9          struct P{x:int,y:int} let mut p = P{x:0,y:1}; let a = &mut p; let x = &mut a.x;
[12:42:36] -rusti-                                                                                     ^
[12:42:36] -rusti- ()
[12:42:54] <eddyb> rusti: struct P{x:int,y:int} let mut p = P{x:0,y:1}; let a = &mut p; let x = &mut a.x; x = 5; a.y = 6;
[12:42:54] -rusti- <anon>:9:93: 9:94 error: mismatched types: expected `&mut int` but found `<VI2>` (expected &-ptr but found integral variable)
[12:42:54] -rusti- <anon>:9          struct P{x:int,y:int} let mut p = P{x:0,y:1}; let a = &mut p; let x = &mut a.x; x = 5; a.y = 6;
[12:42:54] -rusti-                                                                                                       ^
[12:42:55] -rusti- error: aborting due to previous error
[12:42:56] -rusti- application terminated with error code 101
[12:43:03] <eddyb> rusti: struct P{x:int,y:int} let mut p = P{x:0,y:1}; let a = &mut p; let x = &mut a.x; *x = 5; a.y = 6;
[12:43:03] -rusti- ()
[12:43:11] <eddyb> rusti: struct P{x:int,y:int} let mut p = P{x:0,y:1}; let a = &mut p; let x = &mut a.x; *x = 5; a.y = 6; a.x = 7;
[12:43:12] -rusti- pastebinned 8 lines of output: http://sprunge.us/Abee
[12:43:35] <eddyb> jix: you can mutate the parent, minus the child
[12:44:11] *** Quits: bungoman (bungoman@moz-F95B490C.tx.res.rr.com) (Ping timeout)
[12:44:14] <eddyb> (as long as the borrowed pointer to the child is alive)
[12:44:32] <jix> is this the "freezing" thing?
[12:44:48] <eddyb> rusti: struct P{x:int,y:int} let mut p = P{x:0,y:1}; let a = &mut p; {let x = &mut a.x; *x = 5;} a.y = 6; a.x = 7; *a
[12:44:49] -rusti- main::P{x: 7, y: 6}
[12:45:13] <eddyb> jix: nah, thawing/freezing is changing mutability, not necessarily related to pointers
[12:45:49] <eddyb> I don't think you can even read from parent.child while you have a mutable borrowed pointer to the child
[12:46:04] <jix> ah, makes sense, so this is stronger than freezing
[12:47:17] <eddyb> I'm surprised I could change a.y like I did, that's impressive (gg, borrowck)
[12:47:55] <jix> yeah most of my confusion was caused by all the things I could do which tricked me into thinking I could do even more
[12:48:09] <eddyb> DataFlowContext::new(id_range=syntax::ast_util::id_range{min: 4779, max: 4885}, bits_per_id=3u, words_per_id=1u)
[12:48:30] <eddyb> dbaupp: ^ it could use a byte instead of a word there - 8x memory usage reduction >_>
[12:51:23] <eddyb> ouch - DataFlowContext::new(id_range=syntax::ast_util::id_range{min: 8490, max: 337486}, bits_per_id=29184u, words_per_id=456u)
[12:51:35] <eddyb> 1.2GB maximum possible usage, I think
[12:52:12] <eddyb> (wait, it doesn't use the ID range. hmpf)
[12:52:58] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[12:53:30] *** Quits: z0w0 (zack@moz-3C2F9E52.qcl9.cha.bigpond.net.au) (Client exited)
[12:54:43] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[12:54:50] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[12:55:24] *** Quits: nlminhtl (ignotus@moz-BA3DE7EF.volia.net) (Quit: Konversation terminated!)
[12:55:28] *** Joins: nlminhtl (ignotus@moz-BA3DE7EF.volia.net)
[12:55:45] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[12:57:51] <eddyb> cmr, dbaupp: how can I even prevent borrowck to allocate over 8GBs in dataflow bitsets :(?
[12:58:17] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[13:02:07] <eddyb> in borrowck::gather_loans, guarantee_valid will push loans into an array. I have to minimize the size of the array
[13:04:30] *** Quits: glennsl (textual@moz-6822C772.customer.cdi.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[13:07:16] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[13:08:01] *** Quits: nlminhtl (ignotus@moz-BA3DE7EF.volia.net) (Quit: Konversation terminated!)
[13:09:22] <kimundi> SO, made a comment on the yield fn issue: https://github.com/mozilla/rust/issues/7746
[13:11:05] *** Joins: glennsl (textual@moz-6822C772.customer.cdi.no)
[13:11:40] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[13:11:58] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[13:14:41] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[13:20:45] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[13:26:25] *** Quits: engla_ (engla@moz-F64E1B0F.cust.bredbandsbolaget.se) (Ping timeout)
[13:29:35] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[13:35:27] <eddyb> of course :(
[13:36:07] <eddyb> dbaupp: I have a very big number of borrows :(
[13:36:22] <eddyb> I am doomed forever and ever
[13:36:37] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[13:36:40] *** Joins: bungoman (bungoman@moz-F95B490C.tx.res.rr.com)
[13:36:59] <eddyb> pcmattman: I am sorry, I have failed. there's just too mcuh in my x86_16 emulator for rustc to handle
[13:37:25] <eddyb> *much
[13:38:11] *** Quits: glandium (glandium@moz-A09032B1.kimsufi.com) (Input/output error)
[13:38:24] *** Quits: bungoman (bungoman@moz-F95B490C.tx.res.rr.com) (Ping timeout)
[13:39:51] <eddyb> http://www.reddit.com/r/programmingcirclejerk/comments/1r4q8z/i_quit_my_day_job_to_code_my_twitterrelated/
[13:40:56] <eddyb> needs more rust
[13:41:33] *** Quits: nkoep (nik@moz-B0D24E24.pool.mediaways.net) (Ping timeout)
[13:48:37] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[13:50:19] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[13:54:08] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:56:00] *** Joins: nkoep (nik@moz-F03E8DDB.vpn.rwth-aachen.de)
[13:56:50] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[13:58:33] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[14:06:32] *** Joins: mye (mye@moz-5D805FFA.dip0.t-ipconnect.de)
[14:07:02] *** Quits: rntz (rntz@moz-C76A8D96.sp.cs.cmu.edu) (Ping timeout)
[14:07:22] *** Joins: beifeng (Mibbit@6CA2D1B4.7BEF16F3.64FAF8EC.IP)
[14:12:37] *** Joins: Blei (philipp@moz-E5A7DC90.cust.bluewin.ch)
[14:15:49] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[14:17:41] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[14:17:55] <adridu59> hey guys, how can I iterate over the chars of a str?
[14:18:00] <strcat> yes
[14:18:03] <strcat> iter()
[14:18:22] <adridu59> myStr.iter() ?
[14:18:31] <adridu59> that's too easy :(
[14:18:33] <adridu59> thanks!
[14:18:36] <strcat> rusti: for c in "foo".iter() { println!("{}", c) }
[14:18:38] -rusti- f
[14:18:38] -rusti- o
[14:18:38] -rusti- o
[14:18:38] -rusti- ()
[14:18:42] <strcat> rusti: for c in "foo".byte_iter() { println!("{}", c) }
[14:18:43] -rusti- 102
[14:18:43] -rusti- 111
[14:18:43] -rusti- 111
[14:18:43] -rusti- ()
[14:19:07] <cmr> Kind of scary that it has been two months and 0.8 isn't completely unusable
[14:19:14] <adridu59> rusti: for c in "foo".iter() { println(c) }
[14:19:15] -rusti- <anon>:9:41: 9:42 error: mismatched types: expected `&str` but found `char` (expected &str but found char)
[14:19:15] -rusti- <anon>:9          for c in "foo".iter() { println(c) }
[14:19:15] -rusti-                                                   ^
[14:19:15] -rusti- error: aborting due to previous error
[14:19:15] -rusti- application terminated with error code 101
[14:19:35] *** Joins: jdm (jdm@883B1788.FA8F8F63.51315CC9.IP)
[14:19:36] *** ChanServ sets mode: +o jdm
[14:20:25] <bstrie> cmr: I disagree, ungated managed pointers make it completely unusable :P
[14:25:19] *** Joins: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net)
[14:25:24] *** Quits: jdm (jdm@883B1788.FA8F8F63.51315CC9.IP) (Input/output error)
[14:25:27] *** Joins: jdm (jdm@883B1788.FA8F8F63.51315CC9.IP)
[14:25:27] *** ChanServ sets mode: +o jdm
[14:27:35] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[14:28:15] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[14:30:51] *** Joins: bungoman (bungoman@moz-F95B490C.tx.res.rr.com)
[14:32:36] *** Quits: bungoman (bungoman@moz-F95B490C.tx.res.rr.com) (Ping timeout)
[14:33:14] *** Joins: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca)
[14:36:05] *** Joins: CarpNet (Alasdair@moz-25C796BC.cable.virginm.net)
[14:37:17] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[14:38:58] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[14:43:30] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[14:46:29] *** Joins: jviereck (Adium@moz-CF8216D6.dip0.t-ipconnect.de)
[14:49:11] <adridu59> rusti: for c in "Hello World!".iter() { do spawn { println!("{}", c); } }
[14:49:13] -rusti- pastebinned 13 lines of output: http://sprunge.us/RbNV
[14:49:26] <adridu59> rusti: for c in "Hello World!".iter() { do spawn { print!("{}", c); } }
[14:49:27] -rusti- Hllo World!()
[14:49:27] -rusti- e
[14:49:42] <adridu59> haha
[14:49:51] <jdm> heh
[14:54:14] <myname> interesting
[14:55:04] <kimundi> Seems like a very fair scheduler ;)
[14:56:53] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[14:57:16] <myname> i guess it is something like "oh fuck, we have to make a thread. go, anybody, prepare everything for H"
[14:57:34] <myname> then e comes along "hey, what's up?" "shut up, we are working"
[14:58:35] <strcat> it only has access to 2 cores
[14:58:43] <strcat> rusti: for c in "Hello World!".iter() { do spawn { print!("{}", c); } }
[14:58:45] -rusti- Hello World!()
[14:58:47] <strcat> rusti: for c in "Hello World!".iter() { do spawn { print!("{}", c); } }
[14:58:49] -rusti- Hello World!()
[15:00:22] *** Quits: flowsnake (flowsnake@moz-E4E567EE.aztw.cable.virginm.net) (Ping timeout)
[15:03:57] *** Joins: flowsnake (flowsnake@moz-E4E567EE.aztw.cable.virginm.net)
[15:04:05] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[15:04:26] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[15:04:36] *** vfetwnuncszu is now known as dcrewi
[15:06:38] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[15:06:38] *** Quits: mihneadb (mihneadb@A64FDE7E.7E118222.89C0DD0D.IP) (Quit: Bye)
[15:07:09] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[15:08:23] <Leo`> hey there. If I want to spend time hacking on Rust, what can I do ? :p
[15:08:49] <jdm> Leo`: you can take on any of the open tasks
[15:08:51] <jdm> or propose your own
[15:09:05] <eddyb> Leo`: if you have the RAM, I have something for you in libsyntax
[15:09:05] <jdm> and you can start with the list of Easy tasks if that sounds less intimidating
[15:09:28] <Leo`> eddyb: what ?
[15:09:29] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[15:09:40] <Leo`> jdm: yes, i'm looking the list of easy tasks
[15:10:00] <Leo`> is there something more... urgent ?
[15:10:06] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[15:10:12] <eddyb> Leo`: I mean, if you want to hack on rustc (I hope I'm not confusing you for someone else)
[15:10:23] <Leo`> eddyb: yeah
[15:10:23] *** Quits: jviereck (Adium@moz-CF8216D6.dip0.t-ipconnect.de) (Quit: Leaving.)
[15:10:27] <Leo`> I want to hack on Rustc :p
[15:10:34] <Leo`> or libstd or whatever
[15:10:55] <eddyb> ast::Block is used in a few places unboxed, and it's big enough to cause a 4x memory increase
[15:11:53] <Leo`> you think it should be replaced by an owned box ?
[15:12:08] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[15:12:11] <eddyb> ast_node and Expr have variants with @SomeStruct, but Block is the only one (or one of the two) without @
[15:12:30] <Leo`> is it a good idea to use @ when it's going to be removed of the language ?
[15:12:58] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[15:13:00] <strcat> no it should be Rc
[15:13:01] <eddyb> well, Rc<T> would be better, but to replace @ from all of the AST would be a lot more work
[15:13:22] <Leo`> maybe a lot more work but not really difficult
[15:13:31] <Leo`> I can do that I think
[15:15:32] <eddyb> Leo`: I think dbaupp had a small snippet to check the sizes of important structures
[15:16:32] <Leo`> well I will stat replaceing all @Foo by Rc<Foo>
[15:16:40] <Leo`> and then I'll see for ast::Block
[15:17:06] <strcat> just keep in mind that going T -> Rc<T> will increase mem usage when it's actually that variant - so the percentage of how many are that variant matters
[15:17:48] <cmr> Leo`: Do not replace @Foo with Rc<Foo>
[15:17:57] <Leo`> cmr: oh. why ?
[15:17:59] <cmr> You will go mad and die before you finish.
[15:18:01] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[15:18:10] <eddyb> hehe
[15:18:14] <Leo`> :|
[15:18:28] <eddyb> (my reasoning was that using @Block instead of @Block should show obvious improvments, and it's not as hard as moving everything to Rc<T>)
[15:18:34] <cmr> @ still has compiler magic
[15:18:34] <strcat> cmr: it would be good to do it though
[15:18:39] <strcat> would reduce mem usage
[15:18:48] <cmr> strcat: sure, once we  have ptr sugar
[15:18:59] <Leo`> ptr sugar
[15:19:01] <strcat> cmr: it would still be good to do it before
[15:19:04] <Leo`> you mean like operator-> overloading ?
[15:19:08] <Leo`> in C++
[15:19:10] <strcat> no
[15:19:16] <Leo`> or operator*
[15:19:19] <strcat> yes
[15:19:27] *** Quits: ssbr (devin@moz-8EC4F450.lightspeed.sntcca.sbcglobal.net) (Ping timeout)
[15:19:40] <Leo`> and... is ptr sugar hard to implement ?
[15:19:56] <strcat> not super hard
[15:20:08] <Leo`> may I try ? :p
[15:20:08] *** Joins: ssbr (devin@moz-8EC4F450.lightspeed.sntcca.sbcglobal.net)
[15:20:08] <eddyb> you have to add a third unary operator and integrate it in rustc::middle
[15:20:11] <cmr> afaik nmatsakis is working on it
[15:20:17] <Leo`> oh
[15:21:05] <Leo`> :/
[15:21:17] <kimundi> Leo`: However, that doesn'T really _block_ a switch to Rc right now. It just means that a low of explicit .borrow() calls and similar need to be added
[15:21:38] <cmr> Sure, it's possible.
[15:21:51] <cmr> @ is so prevalent that it's a huge invasive change, though.
[15:21:58] <kimundi> yeah
[15:22:48] <Leo`> and the @syntax isn't going to come back at any time ?
[15:22:57] <strcat> no
[15:23:06] <Leo`> ok :/
[15:23:15] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[15:23:30] <cmr> Leo`: https://github.com/mozilla/rust/issues?labels=E-easy&page=1&state=open
[15:23:36] <strcat> the compiler should be using Rc whenever it doesn't need cycles anyway
[15:23:37] <strcat> not Gc
[15:23:44] <strcat> it has memory usage problems *already*
[15:24:01] <Leo`> https://github.com/mozilla/rust/issues/10565 this one looks really simple
[15:24:57] *** Quits: mye (mye@moz-5D805FFA.dip0.t-ipconnect.de) (Quit: mye)
[15:25:11] *** Joins: mye (mye@moz-5D805FFA.dip0.t-ipconnect.de)
[15:25:17] *** Joins: bungoman (bungoman@moz-F95B490C.tx.res.rr.com)
[15:25:55] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Quit: Leaving.)
[15:27:03] *** Quits: bungoman (bungoman@moz-F95B490C.tx.res.rr.com) (Ping timeout)
[15:28:23] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[15:28:50] *** Quits: Blei (philipp@moz-E5A7DC90.cust.bluewin.ch) (Quit: WeeChat 0.4.2)
[15:28:57] <eddyb> rusti: trait Foo {fn bar(&self) {fn baz(&self){}baz(self);}}
[15:28:59] -rusti- pastebinned 7 lines of output: http://sprunge.us/GeYL
[15:29:06] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[15:29:15] *** Joins: mikezaby (mikezaby@moz-AA896205.home.otenet.gr)
[15:29:18] <eddyb> rusti: trait Foo {fn bar(&self) {fn baz(self: &Self){}baz(self);}}
[15:29:18] -rusti- <anon>:9:41: 9:42 error: found `self` in ident position
[15:29:18] -rusti- <anon>:9          trait Foo {fn bar(&self) {fn baz(self: &Self){}baz(self);}}
[15:29:19] -rusti-                                                   ^
[15:29:19] -rusti- error: aborting due to previous error
[15:29:19] -rusti- application terminated with error code 101
[15:29:23] <eddyb> rusti: trait Foo {fn bar(&self) {fn baz(this: &Self){}baz(self);}}
[15:29:23] -rusti- <anon>:9:42: 9:46 warning: unused variable: `this` [-W unused-variable (default)]
[15:29:23] -rusti- <anon>:9          trait Foo {fn bar(&self) {fn baz(this: &Self){}baz(self);}}
[15:29:25] -rusti-                                                    ^~~~
[15:29:27] -rusti- error: internal compiler error: unimplemented type_of: ty_self
[15:29:28] *** Joins: lfox (lfox@C5428AB8.4C3BA601.ECED8BE3.IP)
[15:29:30] -rusti- application terminated with error code 101
[15:29:35] *** Parts: mikezaby (mikezaby@moz-AA896205.home.otenet.gr) ()
[15:29:41] <eddyb> o_O what's with that error?
[15:30:26] <strcat> did you try on master?
[15:30:51] <Leo`> how do I compile only libsyntax ?
[15:30:53] <kimundi> eddyb: I'm not sure, but I think using &Self there is illigal
[15:31:03] <kimundi> Leo`: make check-stage1-syntax
[15:31:14] <eddyb> kimundi: why would it be illegal?
[15:31:20] <eddyb> strcat: same error :(
[15:31:28] <cmr> Leo`: I just rustc --cfg stage2 lib.rs
[15:31:49] <eddyb> stage2 is late :P
[15:31:56] <kimundi> eddyb: because Self only has a meaning in method signatures of the trait, not in independendent function declarations that happen to be scopend inside them
[15:32:31] <eddyb> rusti: trait Foo {fn bar(&self) {fn baz<This:Foo>(this: &This){}baz(self);}}
[15:32:32] -rusti- <anon>:9:52: 9:56 warning: unused variable: `this` [-W unused-variable (default)]
[15:32:32] -rusti- <anon>:9          trait Foo {fn bar(&self) {fn baz<This:Foo>(this: &This){}baz(self);}}
[15:32:32] -rusti-                                                              ^~~~
[15:32:32] -rusti- ()
[15:32:38] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[15:32:41] <kimundi> On other words, "trait Foo {fn bar(&self) {fn baz(this: &Self){}baz(self);}}" is the same as "fn baz(this: &Self){} trait Foo {fn bar(&self) {baz(self);}}" in that regard
[15:32:55] <Leo`> i'm going to do eddyb's thing
[15:32:56] <kimundi> Yeah, that would work
[15:32:59] <cmr> kimundi: I'm pretty sure it's valid.
[15:33:05] <cmr> it typechecks
[15:33:05] <Leo`> box ast::Block inside a Rc
[15:33:47] <eddyb> https://github.com/mozilla/rust/blob/master/src/libsyntax/ast_map.rs#L119
[15:34:13] <Leo`> eddyb: is this the only place it should be boxed ?
[15:34:25] <eddyb> @ would match with everything else, that's why I said that
[15:34:37] <eddyb> Leo`: you could look around, there's at least one more place
[15:34:37] *** Joins: sanxiyn (tinuviel@5F1AEB26.A92E374.57C4C441.IP)
[15:34:54] <Leo`> there's in Expr_ too maybe
[15:35:05] <Leo`> and maybe item_
[15:35:13] <eddyb> yupp https://github.com/mozilla/rust/blob/master/src/libsyntax/ast.rs#L550
[15:35:45] <eddyb> oh, yeah, I didn't see this one https://github.com/mozilla/rust/blob/master/src/libsyntax/ast.rs#L1131
[15:36:09] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[15:36:12] <Siyo> just wondering, why are functions in rust explicitly marked inline? Isn't that something the compiler is better at deciding?
[15:36:22] <eddyb> Leo`: what's important is that size_of::<each of those enums>() gets significantly smaller
[15:36:40] <Leo`> expected `&&std::rc::Rc<ast::Block>` but found `&std::rc::Rc<ast::Block>`
[15:36:42] <Leo`> u__u
[15:36:43] <eddyb> Siyo: mostly for cross-crate stuff
[15:36:58] <eddyb> Rc will be hard
[15:37:12] <sanxiyn> Siyo: #[inline] is more like "defined in C++ header" than inline
[15:37:26] <Leo`> eddyb: I just replaced Block by Rc<Block>
[15:37:28] <cmr> Siyo: it's a hack since we don't have LTO
[15:37:32] <sanxiyn> (Although it currently does hint LLVM to inline, but I think it should change)
[15:37:35] <Leo`> i don't see why I get this error :d
[15:37:44] <Siyo> i see
[15:37:48] <Leo`> (in the enum declaration for Expr_)
[15:38:06] <eddyb> Leo`: it's used in a lot of places, and in each of them you have to unwrap
[15:38:11] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[15:38:22] <Leo`> eddyb: yeah
[15:38:45] <Leo`> but why does rustc show me the error on the enum declaration ?
[15:38:49] <Leo`> instead of where it is used
[15:39:21] <Leo`> failed to find an implementation of trait std::cmp::Eq for std::rc::Rc<ast::Block>
[15:39:24] <Leo`> ow.
[15:39:51] <eddyb> oh the other hand, @ would work....
[15:39:55] <eddyb> s/oh/on
[15:39:59] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[15:40:02] <Leo`> @ would do ptr-eq no ?
[15:40:03] <sanxiyn> Eh... is Eq defined for @T?
[15:40:04] <strcat> Leo`: add an implementation of Eq/Ord for Rc
[15:40:10] <strcat> sanxiyn: yes
[15:40:17] <strcat> anyway I don't think we should accept a PR adding more @
[15:40:27] <eddyb> but it's only making it consistent
[15:40:34] <eddyb> so it's easier later to replace all @ with Rc
[15:40:38] <cmr> Leo`: no, it isn't ptr-eq
[15:40:40] <Leo`> consistent until other @ are replaced
[15:40:40] <kimundi> Siyo: Inside a crate llvm indeed figures it out itself. However, rustc can also inline across crate boundaries, which effectivly means the compiler has to embedded the AST of the function into the library so that it can compile the new instance of it. So there are two options: always include the whole AST of the crate into it's compiled library, or require the user to mark which functions should be inlineable cross crate
[15:40:44] <strcat> eddyb: no, not necessarily
[15:40:48] <Leo`> cmr: ok
[15:41:10] <Leo`> cmr: strcat should Eq on Rc<T> calls eq for the containted T ?
[15:41:36] <eddyb> (where would that go? std::rc?)
[15:41:41] <cmr> impl<T: Eq> Eq for Rc<T>, yes
[15:41:42] *** Quits: lfox (lfox@C5428AB8.4C3BA601.ECED8BE3.IP) (Quit: ZZZzzzâ€¦)
[15:41:46] <Leo`>  think so
[15:41:55] <sanxiyn> Leo`: compare https://github.com/mozilla/rust/blob/master/src/libstd/managed.rs#L42
[15:42:28] <Leo`> i will do this
[15:42:30] <Leo`> it's easy :p
[15:42:48] <sanxiyn> Yup
[15:42:50] <strcat> on the other hand it doesn't make sense to define Eq for Gc
[15:42:50] <eddyb> Leo`: check in with us at least once a week, okay?
[15:42:53] <sanxiyn> Leo`: ptr_eq is in the same file
[15:42:53] <strcat> without another bound
[15:42:56] <strcat> because it can be cyclic
[15:43:08] <Leo`> eddyb: wut ?
[15:43:15] <strcat> you can define Eq on Gc for T: Send or T: Freeze
[15:43:26] <strcat> wrong to force an incorrect implementation on everyone
[15:43:29] <strcat> like @ does
[15:45:58] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[15:47:28] <Leo`> strcat: impl<T: Freeze> Eq for Gc<T> ?
[15:47:32] <Leo`> (or SendÃ 
[15:47:35] <Leo`> s/Ã /)/
[15:47:40] <strcat> arbitrary choice
[15:47:42] <sanxiyn> Leo`: I'd leave Gc<T> for now
[15:47:58] <Leo`> ok
[15:48:15] <sanxiyn> Did you know that Python used to implement graph isomorphism for equality?
[15:48:16] <sanxiyn> ...
[15:48:17] *** Quits: a__ (a__@moz-56DB9895.nycmny.fios.verizon.net) (Client exited)
[15:48:32] <sanxiyn> strcat: Not to force incorrect implementation on everyone, that is...
[15:48:35] <Leo`> sanxiyn: wut ?
[15:48:40] *** jorendorff_away is now known as jorendorff
[15:48:40] <sanxiyn> They gave up now
[15:48:48] <sanxiyn> More on http://bugs.python.org/issue625698#msg12845
[15:48:50] <Leo`> xDD
[15:49:13] <strcat> sanxiyn: afaik it still does?
[15:49:22] *** Joins: a__ (a__@moz-56DB9895.nycmny.fios.verizon.net)
[15:49:37] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[15:49:40] * strcat shrugs
[15:49:55] <sanxiyn> strcat: It doesn't. It's stated so in the issue I linked.
[15:49:56] <Leo`> in which module is Eq in libstd ?
[15:50:02] <eddyb> I think ops
[15:50:03] <strcat> sanxiyn: but that's ancient
[15:50:12] <sanxiyn> strcat: Did it change again? Oh god.
[15:50:23] <strcat> sanxiyn: http://docs.python.org/3.3/library/copy.html I know that their deepcopy uses a dict to avoid recursing forever
[15:50:33] <sanxiyn> On the other hand, *Racket* always implemented bisimulation, I think.
[15:50:39] <sanxiyn> That is bisimulation equality.
[15:50:43] *** Joins: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net)
[15:51:09] <Leo`> eddyb: no it's cmp
[15:51:40] <sanxiyn> strcat: Yes, Python still does that for copy, but not equality, as far as I know.
[15:51:48] <strcat> eddyb: it's in ops in rust-core ;p
[15:51:50] <strcat> sanxiyn: ah
[15:52:04] <eddyb> I don't understand why JS gets shit for only having identity and not deep equality. the operator is small and fast. deep equality can get slow enough it's better for you to define the full details, for what you need
[15:52:17] <sanxiyn> strcat: Well, it's easy to test:
[15:52:22] <Leo`> how do I compiel only libstd ... ? u_u
[15:52:26] * Leo` has noob questions, sorry
[15:52:30] <sanxiyn> >>> x = [0]; x[0] = x; y = [0]; y[0] = y; x == y
[15:52:31] <cmr> Leo`: rustc --cfg stage2 lib.rs
[15:52:32] <sanxiyn> RuntimeError
[15:52:32] <kimundi> Leo`: make check-stage1-std
[15:52:33] <cmr> :P
[15:52:37] <sanxiyn> (This used to return True!)
[15:52:44] <Leo`> cmr: I've got a strange error
[15:52:47] <Leo`>  error: unrecognized intrinsic function: `breakpoint`
[15:52:48] <sanxiyn> Just tried it on 2.7.5.
[15:52:51] <cmr> ah
[15:52:57] <cmr> well, update your rustc
[15:53:00] <Leo`> maybe my Rustc is too old ?
[15:53:02] <cmr> but yeah, what kimundi said
[15:53:02] <Leo`> :D
[15:53:06] <Leo`> great...
[15:53:11] <kimundi> Leo`: Something changed beteen versions, need to build up to stage1
[15:53:11] <eddyb> make stage1-rustc
[15:53:20] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[15:53:29] <eddyb> is there an identity check for @ or Rc atm in Rust?
[15:53:30] <sanxiyn> eddyb: I agree. My interpretation is that people don't understand deep equality anyway.
[15:53:33] <kimundi> That'S all included in check-stage1-std
[15:53:38] <sanxiyn> eddyb: Yes, ptr_eq.
[15:53:51] *** jorendorff is now known as jorendorff_away
[15:54:12] * kimundi doesn't understand what there is not to understand about deep equality
[15:54:22] * eddyb is curious if there's parts of the compiler spending time doing pointless deep equality
[15:54:37] <sanxiyn> eddyb: There probably is...
[15:55:22] <cmr> Equality is a property of types, it doesn't make sense to check for identity most of the time.
[15:55:38] <sanxiyn> I also note that R6RS changed from R5RS on this respect
[15:55:47] <sanxiyn> R6RS now mandates terminating bisimulation deep equality for equal?
[15:55:59] <sanxiyn> On R5RS, you could support nonterminating implementation
[15:56:02] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[15:56:20] <sanxiyn> "The equal? procedure must always terminate, even if its arguments contain cycles." -- R6RS
[15:56:26] <Leo`> yep
[15:57:36] <cmr> That's not to say that the Eq for the various smart pointers couldn't check that the pointers are the same first..
[15:57:57] <eddyb> oh, that's not a bad idea at all
[15:58:12] <Leo`> yup
[15:59:19] <Leo`> oh
[15:59:28] <Leo`> there isn't ptr_eq for Rc<T> yet ?
[15:59:30] <cmr> Actually that's not valid.
[15:59:36] <cmr> Well
[15:59:44] <strcat> you can't do that because of floats
[15:59:52] <cmr> Yeah
[15:59:57] <Leo`> wut
[15:59:59] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[16:00:08] <strcat> the short-circuit on identity
[16:00:12] <strcat> for Eq
[16:00:22] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[16:00:30] <Leo`> why ?
[16:00:33] <strcat> rusti: let x = 0.0 / 0.0; x == x
[16:00:34] -rusti- false
[16:00:34] <cmr> And there's nothing to say that Eq needs to be deterministic on the value, either.
[16:00:36] <strcat> because floats suck
[16:00:40] <cmr> Leo`: NaN != NaN
[16:01:11] <Leo`> oh ?
[16:01:23] <sanxiyn> cmr: That can be fixed by dictating "Eq shall be deterministic" :)
[16:01:28] <Leo`> why ?
[16:01:38] <strcat> Leo`: because that's how floats are defined
[16:01:41] <sanxiyn> Leo`: Why for what?
[16:01:52] <strcat> in every language with proper floating point support
[16:01:56] <Leo`> why NaN != NaN
[16:01:59] <strcat> it's how IEEE754 defines them
[16:02:12] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[16:02:15] <strcat> Leo`: because NaN is unordered, it represents lack of a number
[16:02:27] <sanxiyn> kimundi: How do you define deep equality?
[16:02:31] <strcat> it's like SQL null
[16:04:01] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Ping timeout)
[16:04:31] <Leo`> anyway, making Eq return true in case of ptr equality could short circuit other user-defined bizarre definitions for eq
[16:04:51] <Leo`> Eq for Rc<T> or @T should always return the same as Eq for T
[16:05:04] <ssbr> it's worth noting Python already does this short circuiting. Sometimes. _mostly_ people don't notice.
[16:05:15] <sanxiyn> ssbr: It does?
[16:05:26] <ssbr> Yeah. x = float('nan'); x == x; x in [x]
[16:05:29] <sanxiyn> I thought Python explicitly does not assume id(a)=id(b) -> a=b
[16:05:46] <ssbr> in the first case, it checks equality, in the second it stops short after identity.
[16:05:55] <sanxiyn> ssbr: Gah. That is cheating!
[16:06:00] <ssbr> because Speed.
[16:06:09] <Leo`> the fact that most people don't notice doesn't mean this is right :p
[16:06:11] <strcat> ssbr: I don't really think that's the reason though
[16:06:17] <strcat> python didn't have NaN support until ~2.6
[16:06:32] <strcat> 0.0 / 0.0 doesn't return NaN, for example, there's a lot of legacy stuff
[16:06:57] <ssbr> strcat: this behavior was only added relatively recently, too.
[16:06:57] <kimundi> sanxiyn: I'd define it as the structures and values that make up the state of the object being interchangeable without there being an visible difference from the outside. Being able to tell the difference because of difference memory addresses does not count in this context.
[16:07:17] <ssbr> IIRC the reasons were speed and "because x in [y] should match the semantics of `for x in [y]:`!"
[16:07:27] *** jorendorff_away is now known as jorendorff
[16:07:37] <Leo`> strcat: Rc<T> doesn't have a ptr_eq ?
[16:07:48] <strcat> Leo`: no it doesn't define that
[16:08:00] <Leo`> I can add one as well as impl if needed
[16:08:05] <Leo`> as impl Eq*
[16:08:34] <sanxiyn> kimundi: I guess that is a sensible definition, challenge is to implement it
[16:08:35] *** Quits: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[16:09:07] <sanxiyn> (Most implementations of equality in PL doesn't do that)
[16:09:19] <kimundi> sanxiyn: Yeah, actual implementing it, and understanding the implementation is harder
[16:10:02] <sanxiyn> Also, it will be slow. :(
[16:10:23] <eddyb> wait, what does TotalEq do?
[16:10:57] <eddyb> could it be used to bound a short-circuiting definition?
[16:10:57] <kimundi> eddyb: Make sure that beteen two objects there exists _always_ a LESS, EQUAL or GREATER relation
[16:11:12] <kimundi> Oh, eq
[16:11:25] <eddyb> (if it's even a thing)
[16:11:29] <kimundi> But that'S the same: Either two objects are equal, or not
[16:11:50] <kimundi> while regular Eq can return false for both == and !=
[16:12:12] <sanxiyn> kimundi: I think that should be forbidden...
[16:12:21] <strcat> kimundi: no, I don't think it can
[16:12:23] <strcat> per a sane definition
[16:12:26] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[16:12:32] <kimundi> rusti: let nan = 0.0 / 0.0; (nan == nan, nan != nan)
[16:12:33] <strcat> even floats maintain the proper == and != inverse
[16:12:33] -rusti- (false, true)
[16:12:40] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[16:12:47] <strcat> rusti: let x = 0.0 / 0.0; x == x
[16:12:48] -rusti- false
[16:12:51] <kimundi> Oh, okay
[16:12:51] <strcat> that is the problem with floats
[16:12:54] <kimundi> I was confused
[16:12:57] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[16:13:00] <strcat> and Ord is weird with floats
[16:13:02] <kimundi> Why do we have TotalEq then?
[16:13:12] <strcat> kimundi: because it enforces that x == x
[16:13:28] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[16:13:51] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[16:14:38] <sanxiyn> strcat: I think http://static.rust-lang.org/doc/master/std/cmp/trait.Eq.html should be fixed then.
[16:15:15] <eddyb> strcat: so it can be short-circuited by an identity check?
[16:15:18] <kimundi> So TotalEq ensures reflexivity
[16:15:22] <strcat> sanxiyn: yes that docstring is wrong
[16:15:33] <strcat> hm
[16:15:38] <strcat> ah wait
[16:15:50] <strcat> rusti: let x = 0.0 / 0.0; x == 5.0
[16:15:51] -rusti- false
[16:15:52] <strcat> rusti: let x = 0.0 / 0.0; x != 5.0
[16:15:53] -rusti- true
[16:16:00] <strcat> yeah that docstring is wrong
[16:16:27] *** Joins: pseudoku (quassel@D4C93813.A3DB4D3F.520CDC98.IP)
[16:16:39] <sanxiyn> I want to check IEEE 754-2008 section 5.11 though.
[16:17:15] <pseudoku> is it possible to disable the 'possible use of uninitialized variable' error? ...unsafe block doesn't work
[16:17:28] <eddyb> uninit + unsafe
[16:17:39] <eddyb> pseudoku: what are you working with?
[16:17:42] <cmr> pseudoku: initialize it :p
[16:18:12] <sanxiyn> pseudoku: Initialize with std::unstable::intrinsics::uninit if there is a legitimate reason.
[16:18:36] <strcat> one of the few legitimate reasons would be using it for FFI for an output parameter
[16:18:43] <pseudoku> I'm stack allocating a struct and reading into it, i know all the fields will be filled up 
[16:18:58] <pseudoku> sanxiyn: thanks
[16:19:07] <pseudoku> strcat: yes, thats my use case
[16:19:11] *** Joins: bungoman (bungoman@moz-F95B490C.tx.res.rr.com)
[16:19:17] <strcat> pseudoku: it's with FFI?
[16:19:25] <pseudoku> yes
[16:19:46] *** jorendorff is now known as jorendorff_away
[16:19:49] <sanxiyn> strcat: Another rare case is http://research.swtch.com/sparse
[16:19:54] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[16:20:03] <sanxiyn> (Algorithm depending on uninitialized value for time complexity)
[16:20:39] <strcat> sanxiyn: have to be really careful though
[16:20:46] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[16:20:51] <strcat> uninitialized memory does not behave as you might expect in the LLVM programming model
[16:20:55] *** Quits: bungoman (bungoman@moz-F95B490C.tx.res.rr.com) (Ping timeout)
[16:20:59] <strcat> and in C it's just undefined behaviour so you can't do that.
[16:21:20] <strcat> if you write code depending on reads from uninit memory, you are writing code depending on rust using LLVM
[16:21:33] <strcat> http://llvm.org/docs/LangRef.html#undefined-values
[16:21:38] <strcat> rust doesn't say these are the rules it uses
[16:21:44] <sanxiyn> strcat: Eh, is it actually undefined behavior to read malloc()'d memory?
[16:21:54] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[16:21:56] <strcat> sanxiyn: yes
[16:22:17] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[16:22:23] <strcat> sanxiyn: for example, LLVM will use this to optimize
[16:22:32] <strcat> if something is initialized from undef memory
[16:22:37] <strcat> it doesn't have to reserve a register
[16:22:44] <strcat> it can just read an arbitrary register when you read that variable
[16:22:54] <strcat> it actually tracks undef memory at the bit level
[16:23:21] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[16:23:23] <sanxiyn> strcat: Sure for locals, I am curious about malloc.
[16:23:33] * sanxiyn go check his copy of C standard
[16:23:35] <strcat> sanxiyn: it's still undef
[16:23:53] <strcat> compilers will do escape analysis for malloc so it's also undef in the real world
[16:23:57] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[16:24:19] <strcat> let i = uninit(); if i > array.len() { fail!() } else { array[i] }
[16:24:23] <strcat> that can do an out-of-bounds read
[16:24:29] <strcat> in LLVM
[16:24:31] *** jorendorff_away is now known as jorendorff
[16:24:55] <strcat> and an out-of-bounds read is undef behaviour (well, even indexing out of bounds without the deref is)
[16:25:01] <eddyb> when i == array.len() :P?
[16:25:08] <strcat> (in C it's undef just to use it)
[16:25:16] <strcat> eddyb: er, sorry, the check should be >=
[16:25:20] <strcat> eddyb: but no, it wasn't my point
[16:25:25] <strcat> eddyb: i is undef memory
[16:25:32] <strcat> you can check and see if it's a certain value
[16:25:38] <strcat> next time you read it, it can be a different value
[16:25:44] <strcat> that's LLVM's programming model for undefined memory.
[16:25:55] *** jorendorff is now known as jorendorff_away
[16:25:58] <strcat> C doesn't have one
[16:26:06] *** Joins: rntz (rntz@moz-EAC78217.pitbpa.fios.verizon.net)
[16:26:18] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[16:26:37] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[16:27:18] <eddyb> sanxiyn: omg, that sparse thing is genius
[16:27:42] <eddyb> I wish my ideas were that good
[16:27:48] <sanxiyn> strcat: I am reading C99 draft, and I don't think reading malloc()'d memory (within bounds) is undefined
[16:27:51] <sanxiyn> strcat: Citation?
[16:28:15] <strcat> sanxiyn: the LLVM reading of the C standard is that it's undefined, that's how they implemented it.
[16:28:21] <sanxiyn> It isn't among Annex J.2 Undefined behavior
[16:28:31] <sanxiyn> strcat: I guess that's a bug then.
[16:28:34] *** Joins: Ms2ger (Ms2ger@moz-1B43DE50.adsl-dyn.isp.belgacom.be)
[16:28:55] <strcat> sanxiyn: the C committee has stated that escape analysis of malloc is valid, you can lower them to stack allocations
[16:29:05] <strcat> it is the *intent* of the standard to allow that in every case
[16:29:10] <sanxiyn> Oh.
[16:29:15] <strcat> if it doesn't explicitly say it's undef behaviour, it's a C standard defect
[16:29:20] <sanxiyn> I guess specification has a bug then :)
[16:29:31] <strcat> sanxiyn: there are a lot of those
[16:29:35] <eddyb> "Briggs and Torczon point out that liveness sets used during register allocation inside a compiler are usually small and are cleared very frequently, making sparse sets the representation of choice."
[16:29:36] *** Joins: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net)
[16:29:43] <strcat> sanxiyn: for example, 'restrict' isn't clearly defined
[16:29:43] <sanxiyn> strcat: It defines "indeterminate value", and use of indeterminate value in local variable is undefined.
[16:29:46] <strcat> how it relates to threading
[16:29:50] <strcat> in C11
[16:29:51] <cmr> eddyb: heh
[16:30:07] <sanxiyn> strcat: And malloc is defined to return indeterminate value for uninitialized locations
[16:30:16] <eddyb> cmr: now I'll go mad trying to find an use for it. I always do that when I learn about new things
[16:30:26] <strcat> sanxiyn: ah, but they don't clearly say it is uninit to read an indeterminate value?
[16:30:29] <sanxiyn> But it is not use of indeterminate value in local variable, as my lawyering goes
[16:30:30] <strcat> er
[16:30:32] <strcat> undef
[16:30:35] <sanxiyn> strcat: Yes
[16:30:38] <Seldaek> adridu59/adrien tetar isn't on irc right?
[16:30:43] <sanxiyn> But if escape analysis is intent, then it's spec bug
[16:30:45] <strcat> yeah I would interpret that as a C standard defect
[16:30:46] <Leo`> strcat: https://github.com/LeoTestard/rust/commit/fdac9e470cd87429b6aefc6e02772163a8d41fc8 does this look ok to you ?
[16:30:46] <cmr> Seldaek: they are sometimes.
[16:31:05] <cmr> (As adridu59)
[16:31:22] <strcat> Leo`: yes that looks fine
[16:31:40] <Leo`> strcat: RcMut has gone btw ?
[16:32:01] <Seldaek> cmr: adrien is definitely a male name btw ;)
[16:32:06] <strcat> if Mut<T>/RefCell/whatever it is called landed
[16:32:10] <Seldaek> at least in french
[16:32:35] <cmr> Definitely isn't in english
[16:32:37] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[16:32:57] <eddyb> strcat: how is that different from Cell?
[16:33:09] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[16:33:10] <cmr> eddyb: go read the PR :P
[16:33:17] <eddyb> if I can find it
[16:33:30] <Leo`> strcat: is it ok to have a single commit for trait implementing and ptr_eq ?
[16:33:41] <eddyb> Rc<Mut<T>> would be an interesting pattern to see - maybe aliased to RcMut<T>
[16:33:48] <strcat> Leo`: yes
[16:33:48] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[16:33:55] <strcat> eddyb: that's the intent
[16:34:05] <Leo`> ok
[16:34:05] <strcat> it was to hoist out the dynamic borrowck into a type
[16:34:16] <cmr> https://github.com/mozilla/rust/pull/10514
[16:34:21] <sanxiyn> strcat: I think I will mail this find to John Regehr :)
[16:34:36] <sanxiyn> Perhaps this is well known among those who know...
[16:35:05] <eddyb> cmr: thanks
[16:35:16] <strcat> sanxiyn: yeah it's possible it is meant to be defined... and the compiler just has to be more careful
[16:35:16] <Leo`> https://github.com/mozilla/rust/pull/10634 review needed :D
[16:35:28] <sanxiyn> strcat: Will check C++ now :)
[16:36:53] *** Quits: Jesin (Jesin@moz-63C897DA.res.lehigh.edu) (Quit: Leaving)
[16:39:08] *** Quits: GeneralMaximus (ankur@A6F89B8C.1D173DC.274D17D6.IP) (Ping timeout)
[16:39:18] <eddyb> SparseIntegerSet could be in extra, couldn't it?
[16:39:35] <strcat> std::trie will work well for that when it's complete afaik
[16:40:31] <eddyb> hmm, maybe, I don't know enough about tries to hazard a guess
[16:41:03] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[16:41:55] *** Joins: dherman_ (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[16:41:55] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[16:44:16] *** Joins: mindcat (mindcat@21515CFA.D38CD150.57E3C596.IP)
[16:44:56] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[16:48:55] *** Quits: pseudoku (quassel@D4C93813.A3DB4D3F.520CDC98.IP) (Client exited)
[16:49:01] <sanxiyn> eddyb: By the way, rustc uses bit vector for liveness set
[16:49:59] <eddyb> liveness.rs uses a matrix, but I think you're talking about somethink different
[16:50:19] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[16:50:34] <eddyb> dataflow uses three vectors of bit sets, indexed using a hash map
[16:51:06] <jix> oh man... find_mut in TrieMap is broken, and I was searching a bug im my code for hours
[16:51:18] *** Quits: dherman_ (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman_)
[16:51:40] <sanxiyn> eddyb: Argh indeed
[16:51:47] <sanxiyn> eddyb: Unifying those files are #6298
[16:52:09] <sanxiyn> They should use same data structure, but don't
[16:52:30] *** Quits: glennsl (textual@moz-6822C772.customer.cdi.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[16:53:53] <eddyb> they are both ridiculously bloated in my case, for different reasons
[16:54:19] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[16:54:25] <sanxiyn> eddyb: By the way, I think sparse set analysis is suspect in that it is in a world where memory access is O(1) :)
[16:54:46] <eddyb> liveness is lint-only and it could use a sparse matrix or something equivalent (instead of allocating a full matrix)
[16:55:28] <sanxiyn> eddyb: I guess it probably was faster in 1993. Not sure about now.
[16:55:36] <eddyb> (attempted a malloc of 700+GB in my case)
[16:55:48] <sanxiyn> eddyb: Oh?
[16:55:55] <sanxiyn> 700+GB?!
[16:56:34] <eddyb> borrowck+dataflow can result in tens/hundreds of GBs as well, because it can't tell loans don't escape inner blocks, so it always analyzes a function as a whole
[16:57:02] <sanxiyn> What are you compiling?
[16:57:18] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Quit: WeeChat 0.4.3-dev)
[16:57:25] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[16:57:26] <eddyb> sanxiyn: liveness is quadratic. 200k (live nodes) * 100k (variables) * size_of::<Users>
[16:58:16] <eddyb> sanxiyn: I can show you later, if I can get it to compile
[16:58:17] <sanxiyn> eddyb: You mean your function has 100k variables?
[16:58:31] <eddyb> yeah, among other things
[16:58:38] <jix> if I want to fix that bug in triemap (most likely just a 2 line change) is forking the master from git, a single commit with the fix and a test + a pullrequest the right way?
[16:58:47] <cmr> jix: yes
[16:58:59] *** Quits: jdm (jdm@883B1788.FA8F8F63.51315CC9.IP) (Ping timeout)
[16:59:05] <sanxiyn> eddyb: I guess GCC folks were right
[16:59:12] *** Joins: jdm_ (jdm@75CE855F.FA8F8F63.51315CC9.IP)
[16:59:29] <sanxiyn> "GCC performance rule #1: DO NOT ADD ALGORITHMS WITH QUADRATIC OR WORSE BEHAVIOR, EVER"
[16:59:34] <sanxiyn> (It's somewhere in their manual)
[16:59:48] <sanxiyn> Because someone will hit it. 100%.
[17:00:12] <sanxiyn> It continues:
[17:00:37] <sanxiyn> "People submitting algorithms with known worst quadratic behavior often claims "It should never be a problem in real code". Don't believe a word of that."
[17:01:01] *** Joins: jdm (jdm@883B1788.FA8F8F63.51315CC9.IP)
[17:01:01] *** ChanServ sets mode: +o jdm
[17:01:57] *** Quits: nkoep (nik@moz-F03E8DDB.vpn.rwth-aachen.de) (Ping timeout)
[17:01:57] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[17:02:22] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[17:02:28] *** Quits: jdm_ (jdm@75CE855F.FA8F8F63.51315CC9.IP) (Ping timeout)
[17:02:47] *** Quits: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net) (Ping timeout)
[17:02:51] <sanxiyn> (Note that rule is "add". I guess they try not to add new ones, but there are old existing ones. :-)
[17:03:18] <sanxiyn> Old One a la Cthulhu
[17:12:11] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[17:12:25] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[17:13:16] *** Quits: sanxiyn (tinuviel@5F1AEB26.A92E374.57C4C441.IP) (Quit: Bye)
[17:13:22] *** Joins: bungoman (bungoman@moz-F95B490C.tx.res.rr.com)
[17:14:22] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[17:14:30] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[17:15:11] *** Quits: bungoman (bungoman@moz-F95B490C.tx.res.rr.com) (Ping timeout)
[17:15:30] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[17:20:34] *** Joins: nkoep (nik@moz-10210307.vpn.rwth-aachen.de)
[17:20:48] *** Joins: eddyb (eddyb@336E3A7F.D51DAF03.FB866788.IP)
[17:21:40] *** Quits: mark_edward (AndChat806@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Ping timeout)
[17:22:11] *** Joins: _eddyb_ (eddy@336E3A7F.D51DAF03.FB866788.IP)
[17:22:35] <eddyb> did sanxiyn leave?
[17:23:08] <eddyb> I forgot to say that borrowck's usage of dataflow is also quadratic
[17:23:27] <eddyb> but in memory usage, like liveness
[17:23:35] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[17:23:42] <Seldaek> eddyb: gone yes
[17:24:04] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[17:24:51] * eddyb feels like he's fighting a lost battle with compiler algorithmic complexity for space-time
[17:25:24] <eddyb> 18959 eddy      20   0 6975036 2,090g    116 S 16,91 72,97   4:07.39 rustc                                 
[17:25:34] <eddyb> is that 6.9GB of virtual space?
[17:25:55] <cmr> Depends on where that line came from
[17:26:07] <eddyb> top
[17:26:33] <cmr> ye
[17:26:35] <cmr> s
[17:26:38] <eddyb> pls ssh, don't let me down
[17:27:04] *** Joins: dherman_ (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[17:27:06] <eddyb> I thought this was a reduced test-case, it seems quadratic space usage is still kicking my ass
[17:27:07] *** Joins: joelteon (bzzt@moz-317E8D0C.io)
[17:27:10] *** Quits: _eddyb_ (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[17:27:37] <eddyb> I should've just killed it when I had the chance :(
[17:28:06] *** Quits: eddyb (eddyb@336E3A7F.D51DAF03.FB866788.IP) (Quit: Konversation terminated!)
[17:28:40] *** Joins: _eddyb_ (eddy@336E3A7F.D51DAF03.FB866788.IP)
[17:29:01] <Seldaek> can't wait for 1000+ core machines so it becomes ok to just reserve one core to sshd to make sure you can always get in to kill rogue processes :)
[17:30:03] *** Quits: rntz (rntz@moz-EAC78217.pitbpa.fios.verizon.net) (Ping timeout)
[17:30:12] <_eddyb_> since most of the time it does nothing, it should be ok to make it high priority, although I'm not sure if that could reserve a core for it (I'm back, btw)
[17:30:14] *** _eddyb_ is now known as eddyb
[17:31:21] <eddyb> that reminds me, I had an idea, an OS-level sleep state that leaves only network-related hardware and tasks awake
[17:32:11] <eddyb> so the HDD and the GPU are off, the CPU barely runs, and you can still keep your IRC client connected
[17:33:03] <kimundi> Sounds oddly specific ;)
[17:33:14] <cmr> SIGSLEEP, combined with sysfs. Done!
[17:33:23] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[17:33:54] <Seldaek> eddyb: I just run irssi in a screen session so I can sleep or crash my laptop without feeling disconnected from the world :p
[17:34:17] <eddyb> cmr: you mean linux can do this from userspace *already*? why haven't I seen anything based on that?
[17:34:32] <cmr> eddyb: it's called android
[17:34:37] <eddyb> hehe
[17:35:17] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[17:37:29] *** Joins: mark_edward (AndChat806@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[17:37:42] *** Quits: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca) (Quit: canhtak)
[17:39:04] <mindcat> so where is open-sourced android phone :D
[17:39:25] *** Joins: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca)
[17:39:28] <eddyb> chrome is lazy with ctrl+f :(
[17:39:36] <eddyb> oh, right, regexp in devtools
[17:42:18] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (Client exited)
[17:44:07] <eddyb> this system monitor thing is fun. the number of total IRQs grows a lot if I shake my cursor
[17:46:11] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[17:46:19] *** Quits: mindcat (mindcat@21515CFA.D38CD150.57E3C596.IP) (Quit: Lost terminal)
[17:46:42] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[17:49:21] <eddyb> after borrow checking, it's done with the crazy memory usage. I guess I have to box :(
[17:51:53] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[17:53:18] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[17:54:38] *** Quits: dherman_ (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman_)
[17:55:50] *** Joins: boredomist (ruqs@B16F530C.DC641F2C.BCAEBB33.IP)
[17:56:39] *** Quits: JanC (janc@moz-5100E87F.dsl.scarlet.be) (Ping timeout)
[17:59:10] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[17:59:31] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[17:59:40] <jix> if I drop an unsafe pointer, will any destructors be run?
[18:00:51] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[18:01:14] <cmr> I didn't think unsafe pointers had destructors at all
[18:01:26] <eddyb> jix: was it allocated with ~?
[18:01:43] <jix> eddyb: yeah, then I took a &mut and used ptr::to_mut_unsafe_ptr
[18:01:43] <cmr> jix: there's std::cast::forget
[18:01:52] <eddyb> if so, I think you can transmute it and then drop it properly
[18:02:22] <jix> I'm just working around &mut aliasing, so I don't want any destructors getting run
[18:02:31] <eddyb> jix: oooh, then it's good
[18:03:11] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[18:03:23] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[18:03:26] <eddyb> I thought you were doing what Rc does, allocate and drop as ~T, but otherwise store as *T
[18:05:09] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[18:05:35] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[18:07:00] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[18:07:29] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[18:07:37] *** Joins: Jesin (Jesin@moz-63C897DA.res.lehigh.edu)
[18:07:42] *** Joins: bungoman (bungoman@moz-F95B490C.tx.res.rr.com)
[18:09:22] *** Quits: bungoman (bungoman@moz-F95B490C.tx.res.rr.com) (Ping timeout)
[18:11:13] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[18:12:14] *** Joins: JanC (janc@moz-5100E87F.dsl.scarlet.be)
[18:14:38] *** Joins: pdm (pdm@moz-A121F1B.members.linode.com)
[18:15:10] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[18:15:42] <pdm> Hi, I think I found a bug in std::rt::io::net::get_host_addresses in 0.8 - http://pastebin.com/u6p3yd9i
[18:15:56] *** Joins: mauricioc (mauricioc@D5D63C1F.6AE11BE7.7C06F980.IP)
[18:16:12] <pdm> It only happens on some hosts. Others work fine. I don't know what the triggering condition is...
[18:16:12] <eddyb> pdm: 0.8 is obsolete
[18:16:23] <eddyb> if it's still in master, only then it's a bug
[18:16:47] <pdm> eddyb: Thanks. I'll try to reproduce it in master and see if it's still there.
[18:17:12] <eddyb> it might have moved to std::io::net, I'm not sure
[18:18:08] *** Quits: mark_edward (AndChat806@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Ping timeout)
[18:19:32] *** Joins: mark_edward (AndChat806@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[18:21:26] *** Joins: Palmik (palmik@moz-DEC2AB.pks.muni.cz)
[18:22:01] *** Quits: mark_edward (AndChat806@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Ping timeout)
[18:22:23] *** Joins: mark_edward (AndChat806@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[18:23:50] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[18:24:04] <adridu59> hey guys, how can I get automatic line breaks on Ubuntu?
[18:24:10] <adridu59> I know vim does that
[18:24:24] <adridu59> I'm using leafpad right now but it seems pretty bare
[18:25:30] <eddyb> automatic line breaks for what?
[18:25:42] <adridu59> text file
[18:25:58] <eddyb> I mean, what would be automatic about it?
[18:26:02] <adridu59> because right now my lines are too long I can't view diffs in console properly
[18:26:06] <adridu59> line-breaks
[18:26:19] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[18:26:23] *** Quits: mark_edward (AndChat806@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Ping timeout)
[18:27:29] *** Joins: mark_edward (AndChat806@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[18:27:29] <eddyb> adridu59: aaaah, text wrapping
[18:27:46] <cmr> adridu59: Options > Word Wrap?
[18:27:50] <cmr> (In leafpad)
[18:28:00] <cmr> hm nope
[18:28:11] <adridu59> that's just visual, inside the editor
[18:28:14] <cmr> right
[18:28:15] <eddyb> kwrite has both dynamic and static word wrapping, gedit might as well
[18:28:18] * cmr just uses vim
[18:28:26] <adridu59> vim scares me
[18:28:37] <cmr> gedit does, yea.
[18:29:02] <cmr> on by default, even
[18:29:12] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[18:30:38] <cmr> Or... I thought it did.
[18:31:15] * eddyb spreads more confusion dust
[18:32:37] *** Joins: jeffdb_ (jeff@moz-ED35AD97.hsd1.ca.comcast.net)
[18:35:45] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[18:35:57] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[18:36:19] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[18:38:59] <adridu59> how many chars should there be before line break?
[18:39:24] *** jorendorff_away is now known as jorendorff
[18:39:24] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[18:42:23] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[18:42:45] *** Quits: ssbr (devin@moz-8EC4F450.lightspeed.sntcca.sbcglobal.net) (Ping timeout)
[18:43:20] *** Joins: ssbr (devin@moz-8EC4F450.lightspeed.sntcca.sbcglobal.net)
[18:44:43] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[18:46:04] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[18:46:14] *** Joins: valenting (Thunderbir@95C905BA.4985FA88.FCAAE698.IP)
[18:47:10] <Leo`> cmr: do I need to wait for the next snapshot for libstd too ?
[18:47:19] <Leo`> I mean, if I want to use the Eq impl for Rc in Rustc
[18:47:48] <Leo`> or will libstd be built first, and then Rustc compiled against it ?
[18:47:53] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[18:48:33] <cmr> Leo`: correct
[18:49:21] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[18:49:29] <adridu59> cmr: are you there?
[18:49:44] <Leo`> cmr: which is correct ? :P
[18:50:15] <cmr> Leo`: librustc is built against the already-built libstd, iirc
[18:50:37] <cmr> adridu59: 80 chars is the widely-accepted line length.
[18:50:45] <adridu59> cmr: thanks
[18:50:51] <adridu59> I had another question
[18:51:31] <Leo`> cmr: the already-built, you mean, a snapshot ?
[18:51:46] <cmr> Leo`: no, the one it just built
[18:51:50] <Leo`> ok
[18:52:01] <Leo`> so I don't need a snapshot, I can use it in Rustc
[18:52:10] <cmr> I think so yeah
[18:52:17] <Leo`> in libsyntax to be precise
[18:52:25] *** Quits: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca) (Quit: canhtak)
[18:52:45] <adridu59> cmr: what do you think about "Samsung is fully involved in the development and maintains ARM/Android support in Rust and Servo"
[18:52:56] *** Joins: askalski (akuda@325F8E42.CC7751E8.6712E96B.IP)
[18:53:05] <cmr> adridu59: well I mean, they aren't the only ones
[18:53:11] <adridu59> I thought it would be probably good to insist on the fact that Rust has Android support from samsung
[18:53:25] <adridu59> cmr: oh okay
[18:54:20] <adridu59> cmr: well what I meant to say is that they always make sure it's working
[18:54:33] <adridu59> maybe it's not worth mentioning then?
[18:55:05] <cmr> I don't think it's that important
[18:55:33] <bstrie> what is this we're talking about
[18:55:52] <adridu59> alright, I thought it would be a good place to give insight about this, thanks for your advices!
[18:55:55] <adridu59> advice*
[18:56:33] <adridu59> bstrie: do you mean this https://github.com/adridu59/rust-tuts
[18:56:59] <bstrie> ah ok
[18:57:04] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[18:57:05] <adridu59> I have Chapter 02 done, Chapter is is like 35-40% done
[18:57:20] <adridu59> (02 is just installation instructions)
[18:57:25] <rpearl>  
[18:57:50] <rpearl> wrong button
[18:57:50] <adridu59> oops I meant Chapter 03 is like 35-40% done
[18:58:42] *** Joins: Florob (Florob@moz-39532932.de)
[18:59:36] <Leo`> cmr: ow. I get a strange error
[18:59:47] <Leo`> in <quote expansion>:6:50
[19:01:14] *** Quits: heftig (heftig@moz-2F7B552A.dip0.t-ipconnect.de) (Ping timeout)
[19:01:27] *** Quits: mye (mye@moz-5D805FFA.dip0.t-ipconnect.de) (Quit: mye)
[19:01:43] *** Joins: bungoman (bungoman@moz-F95B490C.tx.res.rr.com)
[19:02:11] <Leo`> strcat: https://github.com/mozilla/rust/blob/master/src/libextra/serialize.rs#L402
[19:02:23] <Leo`> do you think we should add an impl for Rc<T> here as well ?
[19:02:38] <strcat> dunno
[19:03:08] <cmr> well, the ast is going to need one
[19:03:14] <Leo`> we're going to need it if we want to use Rc in the AST
[19:03:26] *** Quits: bungoman (bungoman@moz-F95B490C.tx.res.rr.com) (Ping timeout)
[19:05:45] *** Joins: heftig (heftig@moz-E7FBFCE3.dip0.t-ipconnect.de)
[19:05:51] <Leo`> https://github.com/mozilla/rust/blob/master/src/libextra/serialize.rs#L408
[19:06:01] <Leo`> why this 'static in the trait bounds btw ?
[19:08:03] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[19:08:29] <cmr> it's asserting that the type doesn't contain any pointers
[19:08:34] <cmr> non-'static pointers, that is
[19:08:39] *** Joins: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca)
[19:08:40] <cmr> it's a bad name imo
[19:08:46] <Leo`> why so ?
[19:09:19] <cmr> It's weird to me to see something that looks like a lifetime used as a type bound
[19:10:00] *** Quits: jdm (jdm@883B1788.FA8F8F63.51315CC9.IP) (Ping timeout)
[19:10:02] <Leo`> yes I agree but I meant, "why asserting that the type doesn't contain any non-static pointer" ?
[19:10:19] <cmr> oh
[19:10:36] <cmr> not really sure :P
[19:11:20] *** Joins: Jesse (jruderman@moz-2ECEC9F7.oc.oc.cox.net)
[19:11:42] <Leo`> :D
[19:12:16] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[19:13:35] *** Quits: mhi (mhi@moz-EA34E164.cust.telecolumbus.net) (Quit: Lost terminal)
[19:14:37] *** Quits: beifeng (Mibbit@6CA2D1B4.7BEF16F3.64FAF8EC.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:17:26] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[19:22:26] *** Quits: boredomist (ruqs@B16F530C.DC641F2C.BCAEBB33.IP) (Ping timeout)
[19:24:52] *** Quits: bodie (bodie@moz-9A1A7949.cmdnnj.fios.verizon.net) (Ping timeout)
[19:25:51] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[19:26:25] *** Quits: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca) (Quit: canhtak)
[19:27:25] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[19:28:41] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[19:32:36] *** Joins: bodie (bodie@moz-9A1A7949.cmdnnj.fios.verizon.net)
[19:32:58] *** Quits: mark_edward (AndChat806@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Ping timeout)
[19:33:08] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[19:33:17] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[19:33:19] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[19:33:57] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Quit: Leaving...)
[19:39:12] <eddyb> disasm/arch-8051.rs:1563:234: 1563:235 error: internal compiler error: Cannot relate bound region: ReLateBound(9486, BrNamed(syntax::ast::DefId{crate: 0, node: 9512}, a)) <= ReFree(32231, BrNamed(syntax::ast::DefId{crate: 0, node: 32234}, self))
[19:39:25] <eddyb> you have to be fucking kidding me. ok, let's try something different
[19:40:13] *** Joins: rntz (rntz@moz-EAC78217.pitbpa.fios.verizon.net)
[19:42:04] *** Quits: rntz (rntz@moz-EAC78217.pitbpa.fios.verizon.net) (Ping timeout)
[19:43:02] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[19:47:27] *** jorendorff is now known as jorendorff_away
[19:50:19] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[19:52:38] *** Joins: mark_edward (AndChat806@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[19:54:28] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[19:55:44] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[19:55:52] *** Joins: bungoman (bungoman@moz-F95B490C.tx.res.rr.com)
[19:56:20] <jfbk> i have a ~[~fn(&T)] that i'm trying to update to ~[proc(&T)], but i'm starting to get a 'cannot move out of dereference of & pointer' error at the invocation site ('for cb in cbs.iter() { (*cb)(&msg) }'), where previously it worked fine 
[19:56:20] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[19:57:04] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Quit: Leaving)
[19:57:08] *** Joins: rntz (rntz@moz-E2688BE0.compound.emarhavil.com)
[19:57:37] *** Quits: bungoman (bungoman@moz-F95B490C.tx.res.rr.com) (Ping timeout)
[19:57:59] *** Joins: vmx (vmx@moz-25FCFA59.pools.arcor-ip.net)
[19:58:52] <cmr> jfbk: cbs.iter() yields an Iterator<&proc(&T)>, and you can't call it because proc is affine.
[19:59:15] <cmr> (ie, owned. it is consumed when you call it)
[19:59:19] <eddyb> move_iter, maybe?
[19:59:44] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[20:00:21] <jfbk> is proc different from ~fn in that respect?
[20:00:25] <cmr> yes
[20:00:28] <cmr> proc is ~once fn
[20:01:18] <jfbk> ok. so is ~fn just dead now?
[20:01:29] <jfbk> and what do we use in its place?
[20:01:41] <cmr> trait objects
[20:01:46] <strcat> &fn/~fn/@fn are dead
[20:02:00] <strcat> there are just borrowed closures and procs
[20:02:36] <pdm> Hi, I found a crash in std::io::net::get_host_addresses() in master.  Particular host lookups cause a crash.  Code: http://pastebin.com/tnWeW0Qi
[20:02:46] <erickt1> good barely afternoon everyone. does anyone know if it's possible to get this to compile? https://gist.github.com/erickt/7631632
[20:03:26] <eddyb> pdm: it doesn't match on an Option, it just uses unwrap. I guess it wasn't fail-proofed
[20:04:34] <pdm> eddyb: How can I get it to show a backtrace?
[20:04:38] <eddyb> relevant code: https://github.com/mozilla/rust/blob/master/src/libstd/io/net/addrinfo.rs
[20:04:40] <cmr> pdm: gdb
[20:04:58] *** Joins: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net)
[20:06:10] <bascule> this seems rather fun:
[20:06:12] <bascule> task <unnamed> failed at 'receiving on closed channel'
[20:06:36] <eddyb> rusti: None.map(|x| x)
[20:06:37] -rusti- pastebinned 10 lines of output: http://sprunge.us/UWTd
[20:07:03] <eddyb> rusti: let x: Option<int> = None.map(|x| x); x
[20:07:04] -rusti- <anon>:9:30: 9:46 error: mismatched types: expected `std::option::Option<int>` but found `std::option::Option<&<V8>>` (expected int but found &-ptr)
[20:07:04] -rusti- <anon>:9          let x: Option<int> = None.map(|x| x); x
[20:07:04] -rusti-                                        ^~~~~~~~~~~~~~~~
[20:07:04] -rusti- error: aborting due to previous error
[20:07:04] -rusti- application terminated with error code 101
[20:07:22] <eddyb> rusti: let x: Option<int> = None.map(|&x| x); x
[20:07:23] -rusti- None
[20:07:28] <strcat> is there any problem with using `secret ^ key` as the "hash" for integers?
[20:09:01] <bascule> strcat: o_O
[20:09:28] <strcat> bascule: ?
[20:10:02] <strcat> using an expensive keyed hash for 64-bit or smaller fixed-size key types seems pretty pointless
[20:10:18] <jfbk> is this the best current description of fns/closures/procs that's available?  http://smallcultfollowing.com/babysteps/blog/2013/10/10/fn-types-in-rust/
[20:10:23] <erickt1> nmatsakis: ping
[20:10:30] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[20:10:40] <strcat> wondering if there's a timing attack DoS issue though
[20:11:06] <strcat> although I guess it is pretty unlikely that you would be able to DoS via integer keys
[20:11:27] *** Joins: jdm (jdm@883B1788.FA8F8F63.51315CC9.IP)
[20:11:27] *** ChanServ sets mode: +o jdm
[20:12:00] <bascule> strcat: yeah, I was going to say: hashDoS
[20:12:13] <bascule> hope you aren't hashing attacker-controlled data
[20:12:30] <strcat> so how do you do a DoS if the keyed hash is `secret ^ key` instead of `siphash(secret, key)` ?
[20:12:48] <strcat> where secret is the per-hash-table 128-bit secret key
[20:13:03] <cmr> I don't see an obvious way
[20:13:17] <strcat> I can see that it might be more vulnerable but not specifically how you would attack it
[20:13:25] <cmr> And surely the siphash is just going to be a fancy xor with rolls :p
[20:13:33] <cmr> (since the output and input size are the same)
[20:13:34] <strcat> so
[20:13:37] <strcat> I guess you do still need
[20:13:39] <bascule> well you shouldn't be using siphash for this either
[20:13:48] <strcat> bascule: um, so what should it be using?
[20:13:52] <bascule> murmurhash2
[20:13:55] <strcat> no
[20:14:00] <bascule> no?
[20:14:06] <strcat> murmurhash isn't secure against collisions anyway
[20:14:10] <bascule> siphash has known collisions in this context, fyi
[20:14:16] <strcat> bascule: no, it doesn't
[20:14:18] <strcat> you have to backwards
[20:14:19] <bascule> yes, it does
[20:14:20] <bascule> lol
[20:14:22] <bascule> no!
[20:14:23] <strcat> you have it backwards*
[20:14:33] *** Joins: cubic (cubic@moz-80241A3A.mc.videotron.ca)
[20:14:47] <strcat> bascule: https://131002.net/siphash/
[20:15:02] <bascule> actually this particular attack on siphash might be implementation-specific
[20:15:10] <strcat> murmurhash isn't designed as a true PRF with a security guarantee
[20:15:26] <bascule> yeah sorry, I've just seen some recent work on siphash
[20:15:37] <bascule> I guess it's not a general attack
[20:15:40] <strcat> where?
[20:15:49] <bascule> security@ruby-ang
[20:15:52] <bascule> lang
[20:15:57] <bascule> also I used to work at Kudelski
[20:16:10] <bascule> I'm familiar with J-P's work :P
[20:16:28] <strcat> https://www.ruby-lang.org/en/news/2012/11/09/ruby19-hashdos-cve-2012-5371/
[20:16:33] <strcat> 'This fix changes the Hash function of String object from the MurmurHash to SipHash 2-4.'
[20:16:50] <bascule> yeah ok, my bad
[20:17:07] <bascule> FYI they're finding collisions in siphash2
[20:17:10] <bascule> err
[20:17:10] <bascule> bleh
[20:17:13] <teratorn> isn't this moot for integers?
[20:17:18] <bascule> sorry I'm being attacked by a parrot
[20:17:46] <strcat> teratorn: well, for 8/16-bit, sure
[20:17:52] <strcat> for 64-bit, the hash function is definitely important
[20:18:04] <strcat> but SipHash doesn't seem necessary
[20:18:21] <teratorn> strcat: hmm, ok
[20:19:33] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[20:19:34] *** Quits: flowsnake (flowsnake@moz-E4E567EE.aztw.cable.virginm.net) (Ping timeout)
[20:20:27] <strcat> anyway I guess it's not enough
[20:20:31] <strcat> you still need a hash function
[20:20:40] <strcat> but SipHash is overkill ;\
[20:20:42] *** Quits: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net) (Ping timeout)
[20:20:55] <strcat> at least for bools we don't need to use it... ;p
[20:21:04] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[20:21:39] *** Joins: mikezaby (mikezaby@moz-AA896205.home.otenet.gr)
[20:22:21] *** Parts: mikezaby (mikezaby@moz-AA896205.home.otenet.gr) ()
[20:24:12] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[20:25:24] <bascule> I think the cardinality of bools is a little bit lower than integers
[20:26:42] <strcat> well with bools you just take a bit of the secret and XOR it, and you have perfection ;p
[20:26:58] <strcat> but integers will still be related before and after that...
[20:26:59] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[20:27:20] *** Joins: flowsnake (flowsnake@moz-E4E567EE.aztw.cable.virginm.net)
[20:28:33] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Quit: Lost terminal)
[20:28:37] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[20:33:09] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[20:34:32] *** Quits: mark_edward (AndChat806@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Ping timeout)
[20:34:54] *** Joins: mark_edward (AndChat806@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[20:35:43] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[20:36:03] *** Quits: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net) (Ping timeout)
[20:36:10] *** Joins: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net)
[20:36:35] *** Joins: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net)
[20:37:46] *** Joins: hoopsnake (zac@moz-12CDD1F8.hsd1.wa.comcast.net)
[20:38:12] *** Quits: alisdair (textual@moz-2F3322CF.hsd1.tx.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[20:46:33] *** Quits: jdm (jdm@883B1788.FA8F8F63.51315CC9.IP) (Quit: Lost terminal)
[20:47:12] *** Quits: a__ (a__@moz-56DB9895.nycmny.fios.verizon.net) (Client exited)
[20:47:39] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Quit: ëžœë¤ì€ ì‡ í‡´í–ˆìŠµë‹ˆë‹¤.)
[20:48:27] *** Joins: a__ (a__@moz-56DB9895.nycmny.fios.verizon.net)
[20:50:02] *** Joins: bungoman (bungoman@moz-F95B490C.tx.res.rr.com)
[20:51:52] *** Quits: bungoman (bungoman@moz-F95B490C.tx.res.rr.com) (Ping timeout)
[20:52:29] *** Quits: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[20:55:09] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[20:56:32] *** Joins: jviereck (Adium@moz-CF8216D6.dip0.t-ipconnect.de)
[20:57:39] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[20:58:25] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[21:02:25] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[21:10:58] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[21:16:22] *** Quits: pdm (pdm@moz-A121F1B.members.linode.com) (Quit: Lost terminal)
[21:16:46] *** Quits: gordon (Mibbit@moz-4A19983C.ip227.fastwebnet.it) (Quit: http://www.mibbit.com ajax IRC Client)
[21:18:08] *** Joins: vladimir-lu (timeless@moz-2A89000A.in-addr.arpa)
[21:18:52] *** Quits: vladimir-lu (timeless@moz-2A89000A.in-addr.arpa) (Quit: leaving)
[21:19:45] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[21:21:22] *** Joins: vladimir-lu (vladimir-l@moz-2A89000A.in-addr.arpa)
[21:21:31] *** Quits: vladimir-lu (vladimir-l@moz-2A89000A.in-addr.arpa) (Quit: leaving)
[21:22:48] *** Joins: vladimir-lu (vladimir-l@moz-2A89000A.in-addr.arpa)
[21:23:57] *** Quits: vladimir-lu (vladimir-l@moz-2A89000A.in-addr.arpa) (Quit: leaving)
[21:24:06] *** Joins: engla (engla@moz-F64E1B0F.cust.bredbandsbolaget.se)
[21:25:39] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[21:29:25] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[21:30:44] *** Quits: Ms2ger (Ms2ger@moz-1B43DE50.adsl-dyn.isp.belgacom.be) (Quit: nn)
[21:32:20] *** Quits: nkoep (nik@moz-10210307.vpn.rwth-aachen.de) (Ping timeout)
[21:35:29] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[21:35:41] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[21:36:15] *** Quits: Jackneill (Jackneill@moz-4C713A24.pool.digikabel.hu) (Input/output error)
[21:36:58] <jix> is it intended that pattern matching for fixed size vec types is considered refutable?
[21:37:10] <cmr> jix: no
[21:37:13] <jix> or am I doing something wrong?
[21:37:18] <cmr> it's a bug, yeah
[21:37:22] *** Quits: mark_edward (AndChat806@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Ping timeout)
[21:38:44] *** Quits: jviereck (Adium@moz-CF8216D6.dip0.t-ipconnect.de) (Quit: Leaving.)
[21:41:07] <SingingBoyo> is there a way to do something like (myChar - 'a') ?
[21:41:45] <cmr> std::char::from_u32(myChar as u32 - 'a' as u32)
[21:42:02] <SingingBoyo> looks good, thanks!
[21:42:29] <cmr> subtraction doesn't really make sense as an operation on characters, and it's not guaranteed to result in a valid char
[21:43:01] <kimundi> Usually, if you want to subtract a character, you really want char::to_digit :P
[21:43:15] <kimundi> OR from_digit
[21:43:43] <SingingBoyo> kimundi: yes, but does to_digit work on 'z'?  I had to_digit, but then I needed more than 10 possible values :/
[21:43:57] <kimundi> It works for up to base 36
[21:44:12] *** Joins: bungoman (bungoman@moz-F95B490C.tx.res.rr.com)
[21:44:14] <kimundi> It just does treads case interchangable
[21:45:11] <kimundi> rusti: std::char::to_digit(35, 36)
[21:45:12] -rusti- <anon>:9:29: 9:31 error: mismatched types: expected `char` but found `<VI0>` (expected char but found integral variable)
[21:45:12] -rusti- <anon>:9          std::char::to_digit(35, 36)
[21:45:12] -rusti-                                       ^~
[21:45:12] -rusti- error: aborting due to previous error
[21:45:12] -rusti- application terminated with error code 101
[21:45:21] <kimundi> rusti: std::char::to_digit('y', 36)
[21:45:22] -rusti- Some(34u)
[21:45:31] <kimundi> rusti: std::char::from_digit(34, 36)
[21:45:32] -rusti- Some('y')
[21:45:41] <SingingBoyo> kimundi: hmm.  guess the question is whether I need case distinction in case there's more than 36 possible values...
[21:45:59] <kimundi> If the answer is yes for that, then you need a different function, indeed
[21:46:00] *** Quits: bungoman (bungoman@moz-F95B490C.tx.res.rr.com) (Ping timeout)
[21:46:56] <SingingBoyo> kimundi: the question becomes, will I ever think up more than 36 possible terrains on a map.... sadly, that's very possible I think.
[21:47:11] <cmr> SingingBoyo: why use a char and not just a u8 or something?
[21:47:17] *** Joins: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP)
[21:47:44] <SingingBoyo> cmr: I'm reading it from a semi-human-readable file.
[21:48:04] <cmr> 125 isn't human readable? :p
[21:48:27] <SingingBoyo> cmr: can't write a map as a list of single-character tiles then though
[21:48:35] <cmr> true
[21:48:38] <SingingBoyo> (game map, not data structure)
[21:49:22] <SingingBoyo> hopefully I'll be able to ditch the format for a binary one sometime, but for now I'm stuck writing my map files myself :o
[21:49:23] <kimundi> FOr that case, I would just define a custom function that can take any alphabet
[21:49:43] <kimundi> read_tile(char, ['a', '1', '#'])
[21:49:49] *** Joins: bjz (bjz@moz-6AF19015.lnse4.cha.bigpond.net.au)
[21:50:52] <SingingBoyo> kimundi: yeah, hence the conversion to integer that gives me the index into a list of terrain types.  I mean I could do map-based lookup,  but then switching to binary would be harder.
[21:51:37] <kimundi> doesn'T sound to me like it would become harder, both do char -> fn -> index
[21:52:55] <SingingBoyo> kimundi: with binary I probably wouldn't get a char though, it'd be a u8.  And using a map with u8 keys that go from 0 to n seems weird.  in any case, seems to be mostly working, so I won't fix what's not broken!
[21:53:59] <kimundi> well, the fn could just be the identity function then. but it's your code, what do I care ;)
[21:54:20] <kimundi> As long as its works :)
[21:58:10] *** Joins: mark_edward_ (AndChat806@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[22:03:23] *** Joins: japaric (japaric@EEA8F44E.83887C3F.5C7588CA.IP)
[22:04:34] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[22:04:35] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[22:11:22] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[22:13:09] *** Quits: mark_edward_ (AndChat806@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Ping timeout)
[22:13:40] *** Quits: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP) (Ping timeout)
[22:14:58] *** Quits: Ferreus (ferreus@moz-B99D3D4F.pools.arcor-ip.net) (Quit: WeeChat 0.4.2)
[22:15:03] *** Joins: mark_edward (AndChat806@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[22:16:44] *** Joins: aatch (James@moz-B437F499.pocketrent.com)
[22:17:10] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[22:18:01] *** Joins: z0w0 (zack@moz-3C2F9E52.qcl9.cha.bigpond.net.au)
[22:20:31] *** Quits: dbaupp (Thunderbir@moz-3BE4086E.lns20.syd6.internode.on.net) (Ping timeout)
[22:21:31] *** Quits: Palmik (palmik@moz-DEC2AB.pks.muni.cz) (Quit: Lost terminal)
[22:22:42] *** Quits: eevee (eevee@moz-7B6C48E3.evrt.wa.frontiernet.net) (Quit: upgrades)
[22:26:22] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[22:26:53] *** Quits: mark_edward (AndChat806@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Ping timeout)
[22:27:43] *** Joins: mark_edward (AndChat806@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[22:29:22] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Quit: Leaving...)
[22:30:06] *** Quits: mark_edward (AndChat806@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Ping timeout)
[22:31:08] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[22:34:04] <vmx> is it intended that comments starting with //// fail? i know /// is for doc attributes. but shouldn't //// be a special case?
[22:34:11] *** Joins: mark_edward (AndChat806@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[22:34:43] <cmr> I thought > 3 slashes *was* special cased, but maybe that was just /****
[22:36:14] *** Quits: mark_edward (AndChat806@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Ping timeout)
[22:36:30] *** Joins: mark_edward (AndChat806@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[22:37:03] <vmx> cmr: my checkout is master from about a week ago
[22:37:13] <cmr> it wouldn't have been changed recently
[22:37:21] <cmr> rusti: /***** foo */ 5
[22:37:22] -rusti- <anon>:9:9: 9:23 error: expected item after attributes
[22:37:22] -rusti- <anon>:9          /***** foo */ 5
[22:37:22] -rusti-                   ^~~~~~~~~~~~~~
[22:37:22] -rusti- error: aborting due to previous error
[22:37:22] -rusti- application terminated with error code 101
[22:37:44] <cmr> interesting
[22:37:49] <kimundi> rusti: /////
[22:37:50] -rusti- ()
[22:37:54] <kimundi> rusti: ///// text
[22:37:54] -rusti- <anon>:9:9: 10:0 error: expected item after attributes
[22:37:55] -rusti- <anon>:9          ///// text
[22:37:55] -rusti- <anon>:10     };
[22:37:55] -rusti- error: aborting due to previous error
[22:37:55] -rusti- application terminated with error code 101
[22:38:00] <sam113101> rusti: /******************** test */
[22:38:00] -rusti- <anon>:9:9: 10:0 error: expected item after attributes
[22:38:00] -rusti- <anon>:9          /******************** test */
[22:38:00] -rusti- <anon>:10     };
[22:38:00] -rusti- error: aborting due to previous error
[22:38:02] -rusti- application terminated with error code 101
[22:38:04] <cmr> Ahh, that's what it was.
[22:38:11] <kimundi> _only_ /////.... is special cased :P
[22:38:17] <cmr> I remember seeing code that special cased some sort of comment parsing
[22:38:22] *** Joins: bungoman (bungoman@moz-F95B490C.tx.res.rr.com)
[22:38:34] <kimundi> As in, if there is any text, it gets interpreted as doc text
[22:38:44] <kimundi> which seems weird to me btw
[22:39:35] *** Joins: relrod_ (relrod@moz-AABB5D31.redhat.com)
[22:39:41] *** Quits: relrod_ (relrod@moz-AABB5D31.redhat.com) (Quit: relrod_)
[22:39:49] *** Joins: relrod_ (relrod@moz-AABB5D31.redhat.com)
[22:39:54] *** Quits: relrod (relrod@moz-AABB5D31.redhat.com) (Ping timeout)
[22:40:10] *** Quits: bungoman (bungoman@moz-F95B490C.tx.res.rr.com) (Ping timeout)
[22:40:15] *** Joins: brson (brson@moz-7B0110AD.mv.mozilla.com)
[22:40:15] *** ChanServ sets mode: +ao brson brson
[22:40:21] *** Quits: brson (brson@moz-7B0110AD.mv.mozilla.com) (Quit: brson)
[22:40:23] *** Quits: askalski (akuda@325F8E42.CC7751E8.6712E96B.IP) (Quit: Wychodzi)
[22:40:35] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[22:40:40] *** Joins: askalski (akuda@325F8E42.CC7751E8.6712E96B.IP)
[22:40:46] *** Quits: askalski (akuda@325F8E42.CC7751E8.6712E96B.IP) (Input/output error)
[22:41:21] *** Joins: brson (brson@EDE430AA.CB84766B.D1E74241.IP)
[22:41:21] *** ChanServ sets mode: +ao brson brson
[22:41:28] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[22:41:39] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[22:41:50] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[22:44:43] *** Quits: StarLight (StarLight@moz-9F3F6025.dynamic.avangarddsl.ru) (Ping timeout)
[22:45:03] <vmx> should i open a new issue?
[22:46:59] <vmx> cmr: or are you already taking care of it?
[22:47:51] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[22:48:31] *** Joins: jdm (jdm@moz-C9C12F65.dynamic.hinet.net)
[22:48:31] *** ChanServ sets mode: +o jdm
[22:49:02] *** Joins: StarLight (StarLight@moz-B644A6E1.dynamic.avangarddsl.ru)
[22:54:27] *** Joins: eevee (eevee@moz-7B6C48E3.evrt.wa.frontiernet.net)
[22:54:27] *** Joins: mark_edward_ (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[22:54:50] *** Quits: mark_edward (AndChat806@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Quit: Bye)
[22:55:37] *** Quits: mark_edward_ (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Client exited)
[22:56:22] *** Quits: japaric (japaric@EEA8F44E.83887C3F.5C7588CA.IP) (Ping timeout)
[22:56:36] *** Joins: mark_edward (mark@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[22:56:40] <cmr> vmx: open an issue
[22:58:36] *** jorendorff_away is now known as jorendorff
[22:58:38] *** Joins: puritylake (Mibbit@moz-FFDD6BB9.b-ras1.mlw.mallow.eircom.net)
[22:59:26] *** jorendorff is now known as jorendorff_away
[23:01:47] *** Quits: bjz (bjz@moz-6AF19015.lnse4.cha.bigpond.net.au) (Ping timeout)
[23:03:32] *** Quits: puritylake (Mibbit@moz-FFDD6BB9.b-ras1.mlw.mallow.eircom.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:04:48] *** Joins: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au)
[23:04:51] <vmx> done: https://github.com/mozilla/rust/issues/10638
[23:09:20] *** Joins: bjz (bjz@moz-6AF19015.lnse4.cha.bigpond.net.au)
[23:09:44] *** Joins: ktt3ja (Mibbit@moz-D69B60E4.hsd1.va.comcast.net)
[23:11:36] <vmx> looks pretty easy to fix
[23:11:40] *** Quits: bjz (bjz@moz-6AF19015.lnse4.cha.bigpond.net.au) (Ping timeout)
[23:12:09] <mark_edward> is it true that there are plans for `new` as a keyword?
[23:13:52] <kimundi> mark_edward: It's being tossed around as a possible future
[23:13:59] <vmx> if the comment bug isn't fixed by tomorrow night i might give it a try. enough done for today. g'night
[23:14:05] *** Quits: vmx (vmx@moz-25FCFA59.pools.arcor-ip.net) (Quit: Leaving)
[23:14:26] <mark_edward> kimundi, but it's not decided or anything right?
[23:14:32] <kimundi> mark_edward: Where allocation happens with the new keyword, instead of with ~value or @value
[23:14:46] <kimundi> mark_edward: Afaik no
[23:15:55] <jix> Do I need to do anything else after opening a pull request for the std::trie bug I fixed?
[23:16:18] <kimundi> jix: Not really
[23:16:51] <kimundi> jix: Wait till someone notices and puts an r+ under it, and/or fix whatever that person wants you to do differently
[23:17:04] <jix> ah ok, that just happened :)
[23:17:06] *** Joins: japaric (japaric@EEA8F44E.83887C3F.5C7588CA.IP)
[23:17:39] <kimundi> haha :)
[23:18:53] *** Quits: japaric (japaric@EEA8F44E.83887C3F.5C7588CA.IP) (Ping timeout)
[23:19:42] <jix> I must say, contributing a small fix was surprisingly painless :)
[23:23:45] *** Quits: CarpNet (Alasdair@moz-25C796BC.cable.virginm.net) (Quit: Leaving)
[23:24:00] *** Joins: glandium (glandium@moz-A09032B1.kimsufi.com)
[23:24:17] *** Quits: glandium (glandium@moz-A09032B1.kimsufi.com) (Quit: Coyote finally caught me)
[23:24:32] *** Joins: glandium (glandium@moz-A09032B1.kimsufi.com)
[23:26:41] <benh> https://github.com/mozilla/rust/pull/10616 implies that `new` is becoming a keyword :V
[23:27:34] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Input/output error)
[23:27:39] *** Joins: sprang (sprang@moz-920A95C4.hsd1.ca.comcast.net)
[23:31:42] *** Joins: reyre (reyre@moz-89E9865B.com)
[23:32:32] *** Joins: bungoman (bungoman@moz-F95B490C.tx.res.rr.com)
[23:34:21] *** Quits: bungoman (bungoman@moz-F95B490C.tx.res.rr.com) (Ping timeout)
[23:36:39] <aatch> benh, hmm, I do remember some talk to that effect.
[23:36:53] <aatch> It's for "placement new" syntax.
[23:37:21] <aatch> Which is pretty much required for efficient use of custom allocators and smart pointers.
[23:38:33] <aatch> for example, Rc<T> has to copy the data given, rather than allowing the caller to construct the object into pre-allocated space.
[23:39:45] <cmr> benh: yes, this has been known for some time :P
[23:39:54] *** Joins: carter (carter@moz-F3C2A2D8.nycmny.fios.verizon.net)
[23:40:13] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: yichoi)
[23:40:39] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[23:50:52] *** Quits: KindOne (KindOne@moz-4C3F5651.dynamic.ip.windstream.net) (Ping timeout)
[23:51:15] <benh> yeah but someone asked and didn't seem to get a definitive answer!
[23:51:30] <cmr> Oh
[23:51:37] <cmr> mark_edward: sorry about that, didn't notice the question
[23:51:37] <benh> also boo, i was holding out hope we'd go with @ for new, or think up something neater than ::init()
[23:51:53] <cmr> Yes, `new` will be a keyword. `new(expr) expr`
[23:51:57] *** Joins: jordyd (jordyd@7DAC4ACE.77F880E0.D9401097.IP)
[23:52:07] <cmr> Where something like `new expr` just uses a default allocator via lang item
[23:52:28] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[23:53:07] *** Quits: mauricioc (mauricioc@D5D63C1F.6AE11BE7.7C06F980.IP) (Quit: leaving)
[23:54:02] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[23:54:26] <benh> hm
[23:54:28] *** Joins: KindOne (KindOne@moz-4C3F5651.dynamic.ip.windstream.net)
[23:54:45] <benh> so in 'new expr', presumably the expr couldn't be a parenthesized expression/tuple?
[23:55:04] <cmr> Even if it were it still wouldn't be ambiguous
[23:55:10] *** Quits: peterdn (chatzilla@moz-D11BA78C.as13285.net) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[23:55:57] <mark_edward> sounds cool
[23:56:07] *** Joins: bjz (bjz@moz-6AF19015.lnse4.cha.bigpond.net.au)
[23:56:08] <mark_edward> wonder what sort of whacky allocators ppl will come up with
[23:56:21] <mark_edward> cmr, is that what the GC will use as well?
[23:56:26] <cmr> mark_edward: yes
[23:57:01] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[23:57:05] <mark_edward> but don't GC's need to be "notified" in a sense, on every copy/destruction?
[23:58:10] <strcat> if they do there's no point of having a GC
[23:58:10] <mark_edward> don't they need more info than an allocator would have, is what I'm asking
[23:58:22] <mark_edward> strcat, what do you mean?
[23:58:31] <heftig> you would already be doing RC
[23:58:32] <cmr> mark_edward: the point of GC is that you only have to do work sometimes
[23:58:44] <jix> I got a failure msg from bors but I'm pretty sure that is unrelated to anything I did... it is a segfault in an unrelated test and I just fixed a logic bug in std::trie... anything I need to do?
[23:59:05] <strcat> jix: it's unrelated, I told it to retry
[23:59:27] <strcat> maybe a scheduler bug
[23:59:28] <strcat> dunno
[23:59:47] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
