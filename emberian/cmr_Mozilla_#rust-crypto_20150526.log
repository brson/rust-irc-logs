[00:02:39] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[00:10:01] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[00:28:42] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[00:33:06] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[00:37:19] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[00:38:00] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[01:45:59] *** Quits: taryn (taryn@moz-g8toaq.vmsplic.me) (Ping timeout: 121 seconds)
[02:16:33] *** Joins: blank_na1e (blank_name@moz-etm8up.mi.frontiernet.net)
[02:18:02] *** Quits: irobevjodu (ident@moz-mikldi.static-ro.twistednetworks.net) (Client exited)
[02:19:50] *** Quits: blank_name (blank_name@moz-d5sbf3.mi.frontiernet.net) (Ping timeout: 121 seconds)
[02:21:02] *** Joins: irobevjodu (ident@moz-mikldi.static-ro.twistednetworks.net)
[02:52:27] *** Joins: taryn (taryn@moz-g8toaq.vmsplic.me)
[04:03:04] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[06:05:03] *** Joins: WindowsBunny (Peter@moz-vlal7g.east.verizon.net)
[06:11:19] *** Quits: irobevjodu (ident@moz-mikldi.static-ro.twistednetworks.net) (Ping timeout: 121 seconds)
[07:00:22] *** Joins: Tobba (Tobba@moz-6oh.7ki.21.217.IP)
[07:52:36] *** Quits: eddyb (eddyb@moz-ure.pug.25.188.IP) (Ping timeout: 121 seconds)
[08:56:03] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[10:14:23] *** Joins: eddyb (eddyb@moz-ure.pug.25.188.IP)
[10:26:14] <Ilari> BTW, Stephen Farrell (one of two IETF Security ADs) also makes the observation that technical tradeoffs make 1TCS unworkable, essentially forcing negotiation.
[11:37:36] *** Quits: Yurume (Yurume@moz-0t8.piq.68.115.IP) (Ping timeout: 121 seconds)
[11:38:57] *** Joins: Yurume (Yurume@moz-0t8.piq.68.115.IP)
[11:57:53] *** Quits: eddyb (eddyb@moz-ure.pug.25.188.IP) (Ping timeout: 121 seconds)
[12:03:35] *** Joins: eddyb (eddyb@moz-ure.pug.25.188.IP)
[13:06:14] *** Quits: Tobba (Tobba@moz-6oh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[14:13:13] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[16:09:52] *** Quits: eternaleye (eternaleye@moz-7ps.ehi.245.50.IP) (Ping timeout: 121 seconds)
[16:10:34] *** Joins: eternaleye (eternaleye@moz-7ps.ehi.245.50.IP)
[16:17:35] <Ilari> What I think are the main problems with crypto security in practice (in no order): 1) Bad protocols. 2) Bad implmentations of protocols. 3) Implementations of old bad protocols. 4) Bad implementations of good primitives. 5) Wrong implmenetations of good primitives. 6) Bad primitives.
[16:18:11] <Ilari> *6) implementations of bad primitives
[16:19:08] <Ilari> Specifically, the big challenge with algorithm agility is that protocol implementations tend to accumulate garbage algorithms over years, and getting rid of that garbage is hard problem.
[17:06:42] *** Joins: dpc (dpc@moz-t6gr4b.ca.comcast.net)
[17:57:10] <bascule> Ilari: yep
[17:57:21] <bascule> Ilari: providing no upgrade path whatsoever is also bad, though
[17:57:31] <bascule> needs a like
[17:57:40] <bascule> "to add a thing, we must remove an old thing" contract, at least informally
[17:57:53] <bascule> for every new feature added to TLS, a new diediedie document should be written!
[18:03:22] *** Joins: irobevjodu (ident@moz-5bq.k90.254.5.IP)
[18:08:44] <Ilari> Well, they should get TLS 1.3 right first...
[18:13:12] <eternaleye> Actually, though, that's a thought.
[18:13:17] <eternaleye> Generation-based negotiation.
[18:14:04] <eternaleye> Each generation gets to define N symmetric and M asymmetric algs, and when something changes, generation gets bumped. Implementations can only negotiate the latest two generations or something.
[18:14:16] <eternaleye> An alg might be in multiple generations
[18:18:44] <Ilari> Garbage is not just bad ciphers that should already have died. It is also old versions of the protocol.
[18:19:26] <eternaleye> Sure, but that's basically impossible to negotiate your way out of
[18:19:50] <eternaleye> That requires either designing it right from the start, or getting deployment issues solved.
[18:26:25] <Ilari> And even with protocol gotten right, there is still the finite lifetime of crypto primitives.
[18:30:42] <Ilari> With TLS, there have been one or two algo failures, and plenty of protocol failures.
[18:34:10] <Ilari> And those protocol failures have mostly been known for a long time.
[18:39:18] <Ilari> And the reason why those garbage algorithms is still there is to interoperate with various stuff not properly upgraded for a long time.
[18:43:13] <Ilari> Including "embedded" stuff, but also webservers and such.
[18:52:28] <Ilari> Even banks have lots of bad crypto.
[19:15:54] <Ilari> eternaleye: Protocol versions, once properly designed don't go bad nearly as easily. However, those can still end up being bit crappy.
[19:18:16] <eternaleye> Ilari: What I mean is that a flawed protocol usually kicks any negotiation of protocol versions right in the nuts
[19:18:29] <eternaleye> Ilari: Version downgrade attacks are _nasty_
[19:19:36] <Ilari> Especially if bad endpoints are involved. See TLS in browsers.
[19:21:54] <Ilari> Also, negotiation with flawed versions is also pretty much crapshoot. See Logjam.
[19:21:58] <eternaleye> Ilari: And that was exactly my point with "basically impossible to negotiate your way out of" and "requires [...] getting deployment issues solved"
[19:22:42] <eternaleye> Ilari: Negotiation of primitives is necessary; negotiation of protocol versions is only useful for compatibility - not security.
[19:23:02] <Ilari> Well, if you get it right at the first time...
[19:24:40] <Ilari> And yeah, usually negotiating past version is a security problem.
[19:24:44] <eternaleye> Then you never have a second version, and negotiation never becomes useful, thus proving my point :P
[19:25:01] <eternaleye> Or at least, version negotiation
[19:25:14] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[19:33:52] <Ilari> Wonder if there is research on how to have default-disabled algorithms as safely as possible...
[19:38:04] *** Joins: brson (brson@moz-48fqub.res.rr.com)
[19:42:58] *** Quits: dpc (dpc@moz-t6gr4b.ca.comcast.net) (Connection closed)
[19:45:12] *** Joins: dpc (dpc@moz-t6gr4b.ca.comcast.net)
[20:33:03] <bascule> eternaleye: "Each generation gets to define N symmetric and M asymmetric algs" that was already proposed to the TLS WG and no, don't do that
[20:33:29] <bascule> eternaleye: what's nice about "diediedie" documents is they don't impose crazy hard requirements version-to-version
[20:33:52] <bascule> doing that ignores the practical concerns about migration
[20:34:01] <bascule> like each of these things is a fucking battle within my organization
[20:34:04] <bascule> and I've won those batles
[20:34:08] <bascule> battles...
[20:34:12] <bascule> but each of them has been hard fought
[20:34:23] <bascule> because shutting things off can potentially impact legitimate customers
[20:34:49] <bascule> so if upgrading things requires I also fight the battle to shut older stuff off at the same time, that PREVENTS UPGRADES
[20:35:09] <bascule> turning on new features is a LOT easier than shutting off old features, and has immediate benefits for modern clients
[20:35:17] <bascule> I would absolutely hate if they were pegged to each other
[20:35:27] <bascule> it also means changes can be done more incrementally
[20:36:31] <bascule> tl;dr: that approach is great from a "I'm a crypto zealot who doesn't run any real infrastructure" perspective, not from a "we're real world crypto-practicioners who actually have millions of customers and want to provide them the best cryptography possible" perspective
[20:37:40] <eternaleye> bascule: Makes sense/
[20:42:17] <Ilari> Also, wonder if it would be helpful to kill off all kinds of garbage on version bump (even if it would work in the new version). Since version negotiation might be more solid than algorithm negotiation.
[20:42:32] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[20:43:31] <Ilari> The things that come to mind with TLS 1.3 are sighashes MD5 and SHA1 (the rest of the crap mostly won't work anyway).
[20:46:09] <Ilari> E.g. specify that SignatureAndHashAlgorithm entries with hash MD5 or SHA1 MUST be ignored and are fatal errors as singles. And then set assumed signature primitive to be something using SHA-256.
[20:47:06] <Ilari> This would mean you pretty much have to have SHA-2 certificate (if using cert auth) to use TLS 1.3.
[20:47:38] <Ilari> Obviously if new hash functions are added, those can be used if supported by both peers.
[20:49:03] <eternaleye> Ilari: Er, that's exactly what bascule just pointed out as simply causing people to not upgrade
[20:49:58] <Ilari> eternaleye: Is deployment of SHA-2 certs that problematic? The client will even tell if those are supported.
[20:50:06] <eternaleye> Ilari: And honestly, I personally think algorithm negotiation is more likely to be solid than version negotiation.
[20:50:35] <eternaleye> Ilari: The general approach of forcing compat breaks on version changes is what I was referring to.
[20:51:36] <eternaleye> Ilari: Deploying a new version is more invasive than flipping an alg on/off, so it's not like it'd make the round-trip between something being found as bad and getting removed from the ecosystem any shorter.
[20:52:30] <eternaleye> Ilari: And if stuff people need for compat gets removed (there _are_ still plenty of sha-1 certs out there), then they just... won't upgrade.
[20:52:50] <Ilari> And killing off SHA-1 from TLS 1.3 wouldn't prevent server from dual-wielding SHA-1 and SHA-2 certificates...
[20:53:09] <eternaleye> Ilari: People are lazy.
[20:53:13] <eternaleye> Ilari: People are cheap.
[20:53:22] <eternaleye> Ilari: Buying two certs is both a hassle and an expense.
[20:53:37] <eternaleye> Ilari: Much easier to just not upgrade!
[20:53:49] <eternaleye> Ilari: You have to consider the incentives.
[20:53:58] <eternaleye> Ilari: Most of which are not what we'd like them to be.
[20:54:11] <Ilari> Well, SHA-1 certs will stop working in major browsers relatively soon (you can't get those after this year, and the won't work year after that).
[20:55:46] <Ilari> Then it gets different when you have requirements that are downright dangerous for interop (e.g. original wording of HTTP/2 infamous section 9.2.2).
[20:57:14] <Tiffany> what was in section 9.2.2?
[20:58:15] <Ilari> Tiffany: Requirement to use only PFS and AEAD ciphers. In brand new protocol that runs on its own port, that would be reasonable. But not if sharing port with legacy protocol.
[20:58:53] <Tiffany> what's the problem with that?
[20:59:04] *** Quits: brson (brson@moz-48fqub.res.rr.com) (Ping timeout: 121 seconds)
[20:59:33] <Ilari> Tiffany: Basically, TLS libraries do not have the features to do that in manner that doesn't create interop failures.
[20:59:40] <Tiffany> oh
[21:00:01] <Ilari> Tiffany: Especially in face of "version skew".
[21:01:27] <Ilari> Tiffany: Made worse by the fact that enabling version skew is considered best practice.
[21:01:54] <Tiffany> what is version skew?
[21:01:54] <bascule> Ilari: yes, deployment of SHA-2 certs is problematic
[21:02:01] <bascule> see: old Android clients
[21:02:27] <Ilari> Tiffany: TLS library upgraded without application upgrade.
[21:02:39] <bascule> that is why squareup.com has a SHA-2 cert, but api.squareup.com has a SHA-1 cert
[21:02:56] <bascule> Ilari: it's something we could potentially fix by moving to a better TLS stack...
[21:03:06] <bascule> which we're working on
[21:03:14] <bascule> but making changes to external TLS termination is very hard
[21:03:19] <Ilari> bascule: Oh, your TLS stack doesn't pay attention to that cert negotiation extension?
[21:03:25] <bascule> nope :(
[21:03:51] <bascule> Ilari: to put things in perspective, agl, Matt Green, and many others have suggested that the particular stack we're presently on is actively detrimental to Internet security
[21:03:58] <bascule> you might be able to guess what it is now
[21:03:58] <bascule> heh
[21:04:26] <bascule> we're trying to move to netty-tcnative, because our homebrewed HTTP(S) load balancer is written in Java
[21:04:36] <bascule> it doesn't presently handle TLS termination though
[21:05:09] <Ilari> Is it the infamous OpenSSL?
[21:07:46] <bascule> no, actually netty-tcnative uses OpenSSL
[21:08:00] <bascule> like, we're "upgrading" to OpenSSL o_O
[21:48:14] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (A TLS packet with unexpected length was received.)
[21:49:55] <Ilari> bascule: And as is seen, the real root of the problem are all sorts of crappy TLS implementations.
[21:55:36] <Ilari> Also, certificates are way too hard to use for server admins...
[21:58:20] <Ilari> ... Hopefully ACME will be making that easier.
[22:13:45] <bascule> yeah
[22:14:01] <bascule> like the most practical solution to revocation, IMO, is short-lived, constantly rotated certificates
[22:15:31] <Ilari> Who was it that said the current certificate validity period is about the most inconvinient possible?
[22:21:00] <bascule> I don't know
[22:31:07] <Ilari> Basically long enough to make one forget how to do it and not automate it...
[22:36:12] <bascule> yeah, exactly
[22:36:23] <bascule> we have automated certificate rotation for... some of our internal tools
[22:36:29] <bascule> basically the ones that use our standard frameworks
[22:36:42] <bascule> but there are several tools that come from 3rd parties or are developed with questionable development practices
[22:37:18] <bascule> this is also for our internal service-to-service PKI which is rooted in our own CA and intermediates
[22:42:55] <Ilari> And well, there's the PCIapocalype next year too...
[22:49:24] *** Joins: brson (brson@moz-48fqub.res.rr.com)
[22:49:40] <Ilari> And there might pop up sites that aren't allowed to support TLS 1.0 even earlier than that...
[22:50:21] <bascule> it's sad that PCI is ahead of the IETF in that regard
[22:50:30] <bascule> there should be a TLS 1.0 diediedie RFC
[22:51:24] <Ilari> And 1.1 too (that version is just odd one out)
[22:52:43] <bascule> baby steps? ;)
[22:54:19] <Ilari> "Implementations MUST support TLS 1.2 [RFC5246] and MUST prefer to negotiate TLS version 1.2 over earlier versions of TLS."
[22:55:17] <mcpherrin> eugh I am not looking forward to the logistics of disabling TLS 1.0 at work
[22:55:36] <mcpherrin> because https://bugs.python.org/issue16692
[22:59:22] <Ilari> And then there are various apps that misconfig TLS libraries and various admins that do the same...
[23:00:06] <mcpherrin> oh well; we've already forked python at work. Just another patch to carry along.
[23:01:17] <Ilari> Well, some TLS libraries are infamous for being difficult to configure (and being easy to misconfigure). E.g. OpenSSL is infamous for how easy it is to enable various NULL things.
[23:02:47] <kmc> "...OpenSSL is infamous..."
[23:02:57] <mcpherrin> Yeah, that's why I don't want to have to fiddle with this to get OpenSSL + TLS 1.2 working
[23:04:40] <Ilari> I would understand if it was some feature that requires something extra to work, like say PSK or SRP. But why on earth can't OpenSSL use TLS 1.2 without application support? Oh yeah, because it is bad TLS library.
[23:15:10] <Ilari> And I classify various outdated or misconfig'd TLS endpoints as a menance.
[23:57:53] *** Quits: brson (brson@moz-48fqub.res.rr.com) (Quit: leaving)
