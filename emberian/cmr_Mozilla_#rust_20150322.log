[00:00:12] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[00:00:15] *** Quits: mib_b6yyli (Mibbit@moz-2f9.k9k.212.190.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:00:26] *** Quits: kgrandon1 (Adium@moz-6m3528.ca.comcast.net) (Quit: Leaving.)
[00:00:38] *** Joins: brson (brson@moz-fm2.eev.48.37.IP)
[00:00:38] *** ChanServ sets mode: +ao brson brson
[00:00:54] *** Joins: dawehner (quassel@moz-iprcgi.dip0.t-ipconnect.de)
[00:01:50] *** Quits: saterus (saterus@moz-7itu87.res.rr.com) (Connection closed)
[00:02:00] *** Quits: OmniMancer (OmniMancer@moz-6m1jrb.xtra.co.nz) (Quit: Leaving.)
[00:03:04] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[00:03:43] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[00:03:45] *** Quits: nodweber_ (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[00:03:56] *** Quits: dpc_ (dpc@moz-a8v.6sn.162.73.IP) (Ping timeout: 121 seconds)
[00:03:57] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[00:04:44] <tamird> is it possible to implement IntoIterator for HashSet::Difference? http://is.gd/DiitOk
[00:04:48] *** Quits: tristanseifert (tristanseif@moz-anipns.83ld.imo9.6000.2605.IP) (Quit: WeeChat 1.0-dev)
[00:04:57] <tamird> ^ doesn't compile at the moment
[00:04:59] *** Quits: DoomBoom (DoomBoom@moz-a5b.m4r.89.86.IP) (Quit: Leaving)
[00:07:03] *** Joins: tristanseifert (tristanseif@moz-0jr2nc.83ld.imo9.6000.2605.IP)
[00:07:59] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[00:08:17] <bluss> the problem is that the element types don't match I think
[00:08:40] *** Quits: dawehner (quassel@moz-iprcgi.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[00:08:48] <bluss> difference gives you &URI and .extend needs an iterator of URI
[00:09:33] <kl4ng> if i have an enum, which i use as a collection of similar types(structs), is there a way to make a Box that has type of enum instead of one of the types within the enum?
[00:09:46] *** Quits: fmendez (fmendez@moz-1jn.fqm.166.190.IP) (Quit: )
[00:11:15] <kl4ng> e.g., if Leaf is within the Node enum, then if i do Box::new(Leaf l), then it will be of type Box<Leaf>, and im wondering if its possible to make it of type Box<Node>
[00:11:36] <tamird> bluss: right, because it can't consume the original set. any way to make that work?
[00:12:29] <bluss> .clone() out the URIs
[00:12:41] <bluss> i.e. .difference(..).cloned()
[00:13:05] <alex_> is there any way to get an option from a vec?
[00:13:20] <alex_> like, if you didn't know if index 5 was in a vec
[00:13:34] <bluss> alex_: see .get() and .get_mut() (listed among the slice methods)
[00:13:38] <alex_> could I say something like match vec.get(5)
[00:13:40] <alex_> oh
[00:13:42] *** Joins: {-}grant ({0}grant@moz-fctpaa.mo.charter.com)
[00:13:52] <alex_> why isn't it in the vec's documentation?
[00:13:54] <bluss> playbot: vec![1,2,3].get(5)
[00:13:56] -playbot- None
[00:14:07] *** Joins: rossm (ross@moz-pnc4od.as13285.net)
[00:14:17] <bluss> alex_: Vec impls the Deref trait
[00:14:28] <mjboa> kl4ng: if "Leaf" is one of the constructors for your enum, i.e. "enum Node { Leaf(..), Inner(..) }", it should have type Box<Node>
[00:14:39] <bluss> alex_: which means that method calls on a vec may dereference to a slice
[00:14:46] <alex_> ugh
[00:15:09] <tamird> bluss: shouldn't have to clone them, though, since i want to consume the original set
[00:15:12] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Quit: No Ping reply in 180 seconds.)
[00:15:49] <bluss> then, do the same operation as the difference iterator manually
[00:15:50] *** Quits: gingermusketeer (gingermuske@moz-gc5an7.compute.amazonaws.com) (Connection closed)
[00:15:54] <bluss> it does a very simple filtering
[00:15:55] *** Joins: gingermusketeer (gingermuske@moz-bd7nsm.compute.amazonaws.com)
[00:15:57] *** alex_ is now known as alex
[00:16:26] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[00:16:54] *** Joins: dylan_ (dylan@moz-bqi.d0d.43.100.IP)
[00:16:56] *** Joins: alhof (dylan@moz-bqi.d0d.43.100.IP)
[00:17:53] *** Quits: Ms2ger (Ms2ger@moz-bh431q.isp.belgacom.be) (Quit: nn)
[00:18:02] <kl4ng> @mjboa thanks, that worked. in order to have a more detailed type within the enum (i.e., with var-names for each entry), would I need to have Leaf(Leaf_struct) as the constructor?
[00:18:26] <kl4ng> or is this bad practice?
[00:19:05] <bluss> it wouldn't be bad practice for other reasons, but enums can already have struct "shape"
[00:19:22] <bluss> just say Leaf { a: X, b: Y } 
[00:19:27] <scott> kl4ng: you can have struct-like enum variants
[00:19:32] <scott> playbot: #[derive(Debug)] enum Node { Leaf { x: i32 } }; Node::Leaf { x: 42 }
[00:19:33] -playbot- Leaf { x: 42 }
[00:19:46] <mjboa> kl4ng: it isn't necessarily bad practive imo, but you can just embed the struct directly in the enum variant
[00:19:52] <kl4ng> oh i see! that makes alot more sense now, ill try that
[00:19:54] <kl4ng> thanks!
[00:20:39] <bluss> the way you proposed would be good if you needed it as a separate type sometimes
[00:20:52] *** Quits: daniel-s (daniel-s@moz-upmq06.monash.edu.au) (Ping timeout: 121 seconds)
[00:20:52] <bluss> since Node::Leaf is not a struct and not a type of its own
[00:22:21] *** Joins: jviereck (Adium@moz-r87j30.dclient.hispeed.ch)
[00:22:24] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Quit: No Ping reply in 180 seconds.)
[00:23:04] *** Quits: starless (starless@moz-u9gmm1.res.rr.com) (Quit: Leaving)
[00:23:14] *** Quits: tamird (textual@moz-5v5pe2.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[00:23:39] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[00:24:11] *** Quits: cursivecode (textual@moz-4u56i9.res.bhn.net) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[00:25:03] *** Joins: rovar (rovar@moz-m2j7h0.dyn.optonline.net)
[00:25:44] *** Joins: wldcordeiro (wldcordeiro@moz-eibvj8.hmj8.a2nn.0007.2601.IP)
[00:26:07] *** Joins: omissis (omissis@moz-apschj.retail.telecomitalia.it)
[00:26:59] *** Quits: Altazimuth (Altazimuth@moz-q966ko.skybroadband.com) (Ping timeout: 121 seconds)
[00:27:12] *** Joins: lenstr (lenstr@moz-2e7.vju.25.171.IP)
[00:27:25] *** Quits: mjboa (mike@moz-qijlnb.dip0.t-ipconnect.de) (Quit: leaving)
[00:27:29] *** Quits: MichaelGG (MichaelGG@moz-m07.dl9.148.190.IP) (Ping timeout: 121 seconds)
[00:27:45] *** Quits: lenstr (lenstr@moz-2e7.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[00:27:51] *** Joins: lenstr (lenstr@moz-2e7.vju.25.171.IP)
[00:27:54] *** Joins: peacememories (peace@moz-03ni57.dynamic.surfer.at)
[00:28:08] <kl4ng> relatedly, is there a way to make it so i dont have to type Node:: every time i want to specify Leaf?
[00:28:43] <kl4ng> actually, through alias i think, right?
[00:29:03] *** Quits: lenstr (lenstr@moz-2e7.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[00:29:42] <FreeFull> kl4ng: use self::Node::*;
[00:30:01] <FreeFull> playbot: use self::Node::*; #[derive(Debug)] enum Node { Leaf { x: i32 } }; Leaf { x: 42 }
[00:30:02] -playbot- <anon>:14:13: 14:17 error: unresolved import `self::Node::*`. Maybe a missing `extern crate Node`?
[00:30:02] -playbot- <anon>:14         use self::Node::*; #[derive(Debug)] enum Node { Leaf { x: i32 } }; Leaf { x: 42 }
[00:30:02] -playbot- output truncated; full output at: http://bit.ly/19cb5X1
[00:30:11] *** Joins: MichaelGG (MichaelGG@moz-g67.qv9.149.190.IP)
[00:30:14] <FreeFull> Hmm, no
[00:30:28] *** Joins: polyfractal (polyfractal@moz-roi.c9b.43.69.IP)
[00:30:41] *** Quits: RossJH (textual@moz-8vn4o2.range86-165.btcentralplus.com) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[00:31:17] <FreeFull> Ah, this probably won't work with playbot
[00:31:28] *** Quits: brson (brson@moz-fm2.eev.48.37.IP) (Quit: leaving)
[00:32:12] <kl4ng> ok, you were right though, that works in my code
[00:32:20] *** Quits: trishume (tristan@moz-j0vnmp.dynamic.uwaterloo.ca) (Client exited)
[00:32:41] *** Joins: tamird (textual@moz-5v5pe2.ca.comcast.net)
[00:32:54] <FreeFull> kl4ng: http://is.gd/iw4LFm
[00:32:55] <FreeFull> Yeah
[00:33:20] *** Quits: grobinson (grobinson@moz-upe.5fr.90.208.IP) (Quit: )
[00:33:29] <FreeFull> It doesn't work with playbot because playbot uses   show({ your code })
[00:33:38] <FreeFull> So Node is never in module scope
[00:34:32] *** Quits: omissis (omissis@moz-apschj.retail.telecomitalia.it) (Client exited)
[00:34:34] *** Joins: dkd (dkd@moz-msl.q1c.241.117.IP)
[00:35:57] *** Parts: dkd (dkd@moz-msl.q1c.241.117.IP) ()
[00:36:58] <kl4ng> hmm, so using struct-like enum variants still results in those variants being values and not types, huh. so if i want a variable elsewhere to specifically be of 'type' Leaf, there really isnt any way to specify that
[00:37:17] <kl4ng> since it is, of course, of type Node
[00:37:23] <kl4ng> technically
[00:37:35] *** Quits: areski (areski@moz-tijh72.user.ono.com) (Ping timeout: 121 seconds)
[00:37:40] *** Quits: mcoffee_ (mcoffee@moz-erlnm0.bchsia.telus.net) (A TLS packet with unexpected length was received.)
[00:38:37] <alex> I'm getting a 'the type of this value must be known in this context' when trying to do pattern matching
[00:38:41] <alex> how do I add type annotations?
[00:38:55] <reem> kl4ng: A relatively common pattern is to do struct Leaf { ... } enum Node { Leaf(Leaf) }, since this gives you both Node::Leaf as a variant and Leaf as a standalone type.
[00:39:07] <wldcordeiro> If I have three enums, A, B, C with B and C having a Common variant that takes A (B::Common(A) etc) if I had a function that took an A, is there a way to dereference the variant from B or C?
[00:39:27] *** Joins: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net)
[00:39:33] <reem> alex: Show us code/error, it's really hard to know what's wrong and how to fix from that kind of description, since there could be many causes. 
[00:39:38] <alex> oh
[00:39:39] <alex> sorry
[00:40:08] *** Quits: nrc (nrc@moz-4bhi2i.xtra.co.nz) (Ping timeout: 121 seconds)
[00:40:27] *** Quits: ytain (ytain@moz-44k.q8p.140.24.IP) (Quit: Textual IRC Client: www.textualapp.com)
[00:40:37] <alex> match block_transpose.get(byte_num) { Some(byte_transpose) => byte_transpose.push(byte), None => block_transpose.insert(byte_num, vec![byte]) }
[00:40:51] <alex> where byte_transpose and block_transpose are both vectors
[00:41:45] *** Quits: tomprogrammer (thomas@moz-c6tpsn.tr5r.qept.4dd0.2001.IP) (Quit: WeeChat 1.1.1)
[00:41:58] *** Quits: Matthias247 (Miranda@moz-49li60.hsi14.kabel-badenwuerttemberg.de) (Connection closed)
[00:43:24] <wldcordeiro> This obviously doesn't work, but it illustrates what I'm trying to do. http://is.gd/aQUwVd
[00:45:13] <alex> reem, this is a simple recreation that gets the same error: http://is.gd/UKdc1f
[00:46:21] *** Joins: dkd (dkd@moz-msl.q1c.241.117.IP)
[00:47:34] *** Parts: dkd (dkd@moz-msl.q1c.241.117.IP) ()
[00:47:36] *** Quits: {-}grant ({0}grant@moz-fctpaa.mo.charter.com) (Connection closed)
[00:48:29] *** Joins: coxg (sazzer@moz-1hq.kh5.32.217.IP)
[00:48:44] *** Joins: {-}grant ({0}grant@moz-fctpaa.mo.charter.com)
[00:49:35] *** Quits: agjacome (agjacome@moz-0ajq6l.dynamic.jazztel.es) (Ping timeout: 121 seconds)
[00:49:56] *** Quits: hhhhhhhhhh (mike@moz-l54iib.as13285.net) (Quit: WeeChat 1.1.1)
[00:50:27] *** Quits: James (quassel@moz-d43h0f.range86-163.btcentralplus.com) (Ping timeout: 121 seconds)
[00:51:25] *** Joins: psd_ (psd@moz-avd.mmu.202.116.IP)
[00:51:37] *** Quits: james4k (james@moz-ojv7g2.consolidated.net) (Ping timeout: 121 seconds)
[00:51:49] *** Quits: rootnode (rootnode@moz-go1ut4.ip1.george24.com) (Connection closed)
[00:52:41] *** Quits: coxg (sazzer@moz-1hq.kh5.32.217.IP) (Ping timeout: 121 seconds)
[00:53:08] *** Quits: loyd (loyd@moz-uft.32f.108.213.IP) (Ping timeout: 121 seconds)
[00:54:33] *** Quits: psd (psd@moz-avd.mmu.202.116.IP) (Ping timeout: 121 seconds)
[00:54:55] <reem> this is strange...
[00:55:51] <reem> oh
[00:56:01] *** Quits: jviereck (Adium@moz-r87j30.dclient.hispeed.ch) (Quit: Leaving.)
[00:56:51] <reem> it's having an impossible time inferring the type of block_transpose
[00:58:06] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[00:59:23] *** Joins: kakefabrikken (Mibbit@moz-9m21i0.studby.ntnu.no)
[00:59:44] *** Quits: alhof (dylan@moz-bqi.d0d.43.100.IP) (Ping timeout: 121 seconds)
[00:59:45] *** Joins: frangio (Mibbit@moz-04sgf8.fibertel.com.ar)
[00:59:47] *** Quits: dylan_ (dylan@moz-bqi.d0d.43.100.IP) (Ping timeout: 121 seconds)
[01:00:57] <steveklabnik> burntsushi: thanks!
[01:01:06] <steveklabnik> Gankro: unsure
[01:02:21] <frangio> hello! i want to fold an iterator of "Read" types by chaining them. kind of like this
[01:02:27] <frangio>     let v = vec![io::empty(), io::empty()];v.iter().fold(io::empty(), |acc, f| acc.chain(f));
[01:02:45] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[01:02:49] <frangio> but this won't type because Empty and Chain are different types
[01:03:51] <frangio> how can i achieve what i want to do?
[01:04:04] *** Quits: rbattula (rbattula@moz-eetig9.splunk.com) (Ping timeout: 121 seconds)
[01:04:25] *** Joins: KallDrexx (KallDrexx@moz-4fqk30.dybhfl.sbcglobal.net)
[01:04:40] <reem> Read and Iterator, while similar, are different
[01:05:07] *** Quits: Rym (y@moz-cfe.mso.205.31.IP) (Ping timeout: 121 seconds)
[01:05:40] *** Quits: ParahSailin (parahsailin@moz-c16.h7s.199.128.IP) (A TLS packet with unexpected length was received.)
[01:06:54] *** Quits: munksgaard (munksgaard@moz-1i4.hq0.225.130.IP) (Ping timeout: 121 seconds)
[01:07:23] <frangio> yes
[01:07:46] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[01:08:39] *** Joins: rbattula (rbattula@moz-eetig9.splunk.com)
[01:09:16] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[01:09:46] <alex> reem, so how would I fix it?
[01:10:06] *** Joins: Porkepix (Porkepix@moz-e1bv2v.rev.sfr.net)
[01:11:08] *** Joins: cptroot (Mibbit@moz-n169l8.caltech.edu)
[01:12:16] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[01:12:25] *** Quits: KallDrexx (KallDrexx@moz-4fqk30.dybhfl.sbcglobal.net) (Ping timeout: 121 seconds)
[01:13:45] <reem> alex: I'm pretty convinced this is a bug, but you can workaround it by just adding a type hint like Vec<Vec<_>> to the declaration of block_transpose
[01:15:01] <peacememories> huh, gl-rs doesn't seem to build with the newest rust. (at least when using gl_generator)
[01:15:03] *** Joins: Rym (y@moz-cfe.mso.205.31.IP)
[01:16:01] *** Quits: io2 (io2@moz-9i9j3a.home.otenet.gr) (Quit:  ...take irc away, what are you? genius, billionaire, playboy, philanthropist)
[01:16:22] <reem> alex: e.g. let mut x: Vec<Vec<_>> = ...;
[01:17:49] *** Quits: brianloveswords (brianlovesw@moz-mve27s.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[01:18:05] *** Quits: Shackra (Jorge@moz-7bh.ng6.177.186.IP) (Ping timeout: 121 seconds)
[01:18:45] *** Joins: Shackra (Jorge@moz-7bh.ng6.177.186.IP)
[01:18:54] *** Joins: lacrosse (sid21607@moz-0qbveh.ealing.irccloud.com)
[01:20:12] *** Quits: ai (ai@moz-pqofrl.sunline.net.ua) (Quit: Leaving.)
[01:21:39] <peacememories> i don't get this. xml-rs is version 0.1.21, but cargo keeps downloading 0.1.18
[01:21:54] <FreeFull> peacememories: Did you run cargo update?
[01:21:56] *** Joins: yuja (yuja@moz-1cov5a.so-net.ne.jp)
[01:22:11] <peacememories> aaah, didn't know cargo kept a local db index
[01:22:20] <FreeFull> peacememories: No, it's the Cargo.lock file
[01:22:25] <FreeFull> Which locks it onto the older version
[01:22:32] <peacememories> makes sense
[01:22:33] <peacememories> thanks
[01:22:44] *** Quits: frangio (Mibbit@moz-04sgf8.fibertel.com.ar) (Quit: http://www.mibbit.com ajax IRC Client)
[01:24:53] *** Quits: edlothiol (user@moz-n7m9to.unity-media.net) (Ping timeout: 121 seconds)
[01:26:01] *** Joins: jonalmeida (jonalmeida@moz-5j8.kvb.131.104.IP)
[01:27:11] *** Quits: jonalmei_ (jonalmeida@moz-5j8.kvb.131.104.IP) (Ping timeout: 121 seconds)
[01:29:34] *** Joins: lenstr (lenstr@moz-2e7.vju.25.171.IP)
[01:30:11] <Mutabah> Anyone know what RFC defines the 'impl Any + Send {' syntax?
[01:30:43] <huon> it's implied by DST
[01:31:01] <huon> Any + Send is a dynamically sized type
[01:31:01] <Mutabah> woah
[01:31:10] <huon> key point being *type* :)
[01:31:12] *** Quits: polyfractal (polyfractal@moz-roi.c9b.43.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[01:32:01] *** Quits: tamird (textual@moz-5v5pe2.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[01:32:08] <Mutabah> interesting
[01:32:22] *** Quits: acgtyrant (acgtyrant@moz-3kd.b79.160.124.IP) (Ping timeout: 121 seconds)
[01:32:41] *** Joins: brianloveswords (brianlovesw@moz-mve27s.fios.verizon.net)
[01:33:38] *** Quits: lenstr (lenstr@moz-2e7.vju.25.171.IP) (Ping timeout: 121 seconds)
[01:34:30] *** Joins: acgtyrant (acgtyrant@moz-3kd.b79.160.124.IP)
[01:37:28] *** Quits: wldcordeiro (wldcordeiro@moz-eibvj8.hmj8.a2nn.0007.2601.IP) (Ping timeout: 121 seconds)
[01:38:12] <peacememories> is it just me or are rust function signatures getting weirder? fn new<S: ?Sized + AsOsStr>(s: &S) -> &Path
[01:38:35] <peacememories> what does the ? in front of sized mean?
[01:38:40] *** Joins: james4k (james@moz-ojv7g2.consolidated.net)
[01:38:40] <Mutabah> Optional
[01:38:41] *** Quits: mihneadb (mihneadb@moz-i35.mkt.25.188.IP) (Quit: Computer gone to sleep - Zzzz...)
[01:38:50] <Mutabah> Yeah, DSTs added some mess
[01:39:39] <FreeFull> ?Sized actually removes the default Sized bound
[01:40:08] <huon> http://huonw.github.io/blog/2015/01/the-sized-trait/
[01:40:34] *** Joins: frangio (Mibbit@moz-04sgf8.fibertel.com.ar)
[01:40:44] *** Quits: frangio (Mibbit@moz-04sgf8.fibertel.com.ar) (Quit: http://www.mibbit.com ajax IRC Client)
[01:41:01] <Mutabah> huon: Do you know where the + part of that type is defined (in RFC)
[01:41:30] <Mutabah> Because it kinda seems to collide with combining bounds
[01:41:53] *** Joins: killercup (killercup@moz-edmf2j.dip0.t-ipconnect.de)
[01:41:53] <peacememories> welp, i removed most of the warnings to my 5 lines of code... now let's fix the linker exploding in my face v_v
[01:41:59] *** Quits: killercup (killercup@moz-edmf2j.dip0.t-ipconnect.de) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[01:43:10] <huon> Mutabah: you mean of Any + Send?
[01:43:11] *** Joins: tamird (textual@moz-5v5pe2.ca.comcast.net)
[01:43:17] <Mutabah> huon: Yes (sorry)
[01:43:38] <huon> Mutabah: that's how one states a trait object is of multiple traits
[01:44:29] <Mutabah> Yeah, I dont' see it in RFC 490
[01:45:17] *** Quits: murz (murz@moz-h10.ori.130.24.IP) (Quit: Be back later ...)
[01:45:40] *** Joins: ziad (ziad@moz-3kp.prd.136.50.IP)
[01:45:45] *** Quits: fyolnish (fyolnish@moz-a8g1kl.au-net.ne.jp) (Connection closed)
[01:46:27] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[01:46:36] *** Joins: fyolnish (fyolnish@moz-a8g1kl.au-net.ne.jp)
[01:46:52] *** Joins: reem (reem@moz-3s1lie.coob.q2h1.0009.2601.IP)
[01:47:46] <peacememories> "cannot find -lc" ... uh.. i got libc-dev installed?
[01:48:22] <geofft> cross-compiling? 
[01:48:30] <geofft> or building for 32-bit on a 64-bit machine, or something? 
[01:48:47] <alex> http://is.gd/Czte3C
[01:48:52] <alex> why can't I index strings like that?
[01:48:57] <alex> the first way works
[01:48:58] <alex> but not the second
[01:48:59] <alex> wtf?
[01:49:15] <peacememories> i mean it could be... is the rust binary installed with the cli snippet normally 32bit even on 64bit systems?
[01:49:16] <steveklabnik> alex: http://doc.rust-lang.org/nightly/book/more-strings.html#indexing-strings
[01:49:27] *** Quits: toqueteos (toqueteos@moz-plqtsp.staticIP.rima-tde.net) (Quit: Nettalk6 - www.ntalk.de)
[01:49:41] <steveklabnik> unsure how i feel about that working with Range, i don't think i like it
[01:49:48] *** Quits: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[01:50:13] <alex> well, I get the reasoning for the second way not working
[01:50:16] <alex> but for consistency's sake
[01:50:19] <alex> the first way shouldn't either
[01:50:39] <alex> are strings in rust mutable then?
[01:51:00] <alex> and if so, how do I mutate them?
[01:51:04] <alex> I can see that they are growable
[01:51:09] <alex> but what if I just wanted to change them?
[01:51:12] *** Joins: mr_fribble (Mibbit@moz-nd2iqs.fl.atlanticbb.net)
[01:51:23] *** Joins: panicbit (panicbit@moz-gg7i2b.dip0.t-ipconnect.de)
[01:51:38] <reem> it's not possible to generally mutate unicode in-place
[01:51:54] <reem> this is why there is no &mut str
[01:52:00] <reem> it's not usefu
[01:52:02] *** Quits: meh (meh@moz-u15r9i.42-151.net24.it) (Ping timeout: 121 seconds)
[01:52:13] <alex> what about a String
[01:52:15] <alex> rather than a str
[01:52:29] <alex> presumably it'd be smart enough to know the unicode boundaries right?
[01:52:40] *** Joins: jmitchell (jmitchell@moz-o8p.pug.156.104.IP)
[01:52:56] *** Quits: brianloveswords (brianlovesw@moz-mve27s.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[01:53:05] *** Joins: playjax (chatzilla@moz-57udtk.optusnet.com.au)
[01:53:27] *** Joins: polyfractal (polyfractal@moz-roi.c9b.43.69.IP)
[01:54:26] <peacememories> okay, so rustup always installs 32b versions
[01:54:39] *** Quits: jmitchell (jmitchell@moz-o8p.pug.156.104.IP) (Connection closed)
[01:54:57] *** Joins: jmitchell (jmitchell@moz-o8p.pug.156.104.IP)
[01:57:11] <peacememories> gee, this works way better with x64 rust. who would've guessed. especially when it's trying to use an x64 cc after compiling^^
[01:57:23] <geofft> huh, my rustup'd rustc seems to be 64-bit 
[01:57:32] <dwrensha> reem: there is &mut str, just as there is &mut T for any type T
[01:57:35] *** Quits: tsenior (user@moz-btria9.east.verizon.net) (Ping timeout: 121 seconds)
[01:57:38] *** Joins: cursivecode (textual@moz-4u56i9.res.bhn.net)
[01:58:44] <reem> playbot: use std::marker::PhantomData; let x: PhantomData<&mut str> = PhantomData;
[01:58:45] -playbot- ()
[01:58:52] <reem> I guess so
[01:59:09] <scott> it's just difficult to obtain one and not very useful, as reem said
[01:59:22] <reem> playbot: let x = &mut *"hello";
[01:59:23] -playbot- <anon>:14:22: 14:30 error: cannot borrow immutable borrowed content as mutable
[01:59:23] -playbot- <anon>:14         let x = &mut *"hello";
[01:59:23] -playbot- output truncated; full output at: http://bit.ly/1blkBc9
[01:59:38] <reem> playbot: let x = &mut *"hello".to_string();
[01:59:39] -playbot- <anon>:14:22: 14:42 error: cannot borrow immutable borrowed content as mutable
[01:59:39] -playbot- <anon>:14         let x = &mut *"hello".to_string();
[01:59:39] -playbot- output truncated; full output at: http://bit.ly/1AZsMAO
[02:00:00] <reem> nvm that won't work anyway since String wouldn't implement DerefMut
[02:00:10] <reem> s/wouldn't/doesn't
[02:00:39] <scott> does String have a way to replace a character or substring? most of the time it wouldn't have to reallocate or shift any bytes over (particularly for ASCII text), unlike remove/insert
[02:00:43] *** Joins: chc4 (chc4@moz-mjph4c.ma.comcast.net)
[02:00:45] *** Quits: chc4 (chc4@moz-mjph4c.ma.comcast.net) (Quit: AHHHHH BEES)
[02:02:54] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[02:02:55] *** Joins: KallDrexx (KallDrexx@moz-4fqk30.dybhfl.sbcglobal.net)
[02:03:29] <panicbit> scott: Interesting. There doesn't seem to be a way in std. However, the regex crate is able to replace characters.
[02:03:34] *** Joins: OmniMancer (OmniMancer@moz-6m1jrb.xtra.co.nz)
[02:04:30] <scott> even &mut str could support "try" replacement that only replaced if it wouldn't have to change the size of the string, but that would probably be not very useful
[02:04:34] *** Quits: errordeveloper (ilya@moz-g0i.mtf.125.2.IP) (Ping timeout: 121 seconds)
[02:04:38] <dwrensha> I would suggest using Vec<u8> instead of String if you want indexing and replacement
[02:04:49] *** Quits: {-}grant ({0}grant@moz-fctpaa.mo.charter.com) (Connection closed)
[02:05:20] *** Quits: peacememories (peace@moz-03ni57.dynamic.surfer.at) (Ping timeout: 121 seconds)
[02:05:23] <panicbit> dwrensha: Eh, I would rather suggest Vec<char>
[02:05:27] <jn> scott: http://is.gd/VAuhzH
[02:05:44] <scott> that's fine if you aren't dealing with unicode
[02:05:47] <panicbit> dwrensha: In most cases at least
[02:06:27] <scott> Vec<char> is nicer for unicode but also incurs a translation and allocation cost
[02:06:46] <burntsushi> scott: `str` has a `replace` method.
[02:06:53] <dwrensha> I guess each char is stored as a u32 in a Vec<char>?
[02:07:01] <burntsushi> dwrensha: yes.
[02:07:15] <scott> burntsushi: can you link me? I don't see it in the docs
[02:07:28] <burntsushi> scott: the docs are very badly broken at the moment.
[02:07:37] <scott> I see
[02:07:53] <burntsushi> scott: all of the `StrExt` and `CharExt` methods were moved to inherent impls on `char` and `str`. (among other traits.)
[02:08:16] <burntsushi> scott: the rest of the docs weren't updated and it seems `rustdoc` needs to be taught how to show methods on impls for primitive types.
[02:08:36] <scott> dwrensha: char is a u32 + the restriction to "Unicode Scalar Values" which is something like 0..2^21-1 with an extra hole where the surrogate pairs are
[02:08:47] <dwrensha> sure
[02:08:51] <burntsushi> scott: clone `rust` then start read `src/libcollections/str.rs` :-)
[02:09:11] *** Quits: Rym (y@moz-cfe.mso.205.31.IP) (Ping timeout: 121 seconds)
[02:09:11] <XMPPwocky> or read it on github :P
[02:09:17] <burntsushi> or that :P
[02:09:20] *** Joins: bombless (bombless@moz-uag.piv.41.59.IP)
[02:09:24] *** Joins: {-}grant ({0}grant@moz-fctpaa.mo.charter.com)
[02:09:25] <alex> how do I turn a vec<char> into a string then?
[02:09:27] <alex> for printing?
[02:09:30] *** Quits: Nextra (Nextra@moz-5g2dmp.dip.osnanet.de) (Connection closed)
[02:09:34] <burntsushi> alex: collect
[02:09:44] <burntsushi> alex: chars.collect::<String>()
[02:09:54] <alex> thought you could only collect on an iterator
[02:10:11] <burntsushi> alex: sorry, you're right, `chars.into_iter().collect::<String>()`
[02:10:20] <alex> that seems dumb
[02:10:42] <burntsushi> alex: ok?
[02:11:00] <scott> you can turn any T: Iterator<Item=char> into String via collect
[02:11:21] <scott> and you can easily get such an iterator from a Vec<char> with .into_iter
[02:11:28] <scott> it's fairly logical
[02:11:40] <panicbit> playbot: vec!['s','h','a','r','k'].into_iter().collect::<String>()
[02:11:42] -playbot- "shark"
[02:11:57] <scott> you can leave off the ::<String> part if the type can be inferred, too.
[02:12:16] <panicbit> scott: When are type ascriptions coming? :)
[02:12:33] <scott> the RFC was accepted, right?
[02:12:40] *** Joins: kgrandon (Adium@moz-6m3528.ca.comcast.net)
[02:12:41] <panicbit> scott: IIRC yes
[02:12:53] *** Quits: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net) (A TLS packet with unexpected length was received.)
[02:13:13] <panicbit> eyup
[02:14:26] *** Joins: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net)
[02:15:28] <Mutabah> huon: Basically, I'm looking for the spec that defines the syntax (and how it interacts with <T: Trait1+Trait2>)
[02:15:50] *** Joins: munksgaard (munksgaard@moz-1i4.hq0.225.130.IP)
[02:15:52] <huon> Mutabah: the RHS of that aren't types
[02:16:03] <huon> Mutabah: so they essentially don't interact
[02:16:20] <Mutabah> huon: Ah, good point
[02:16:30] <Mutabah> (silly me, they're paths/traits)
[02:17:02] <ogham> Is it going to be post-1.0?
[02:18:05] *** Joins: DerisiveLogic (smuxi@moz-g93io6.res.rr.com)
[02:18:39] *** Quits: infinigon (x@moz-q7ufkk.range81-153.btcentralplus.com) (Quit: leaving)
[02:19:06] *** Joins: vairav (vairav@moz-ms3.on0.126.76.IP)
[02:24:57] *** Joins: murz (murz@moz-h10.ori.130.24.IP)
[02:25:15] *** Quits: Lilly (Lilly@moz-ca683g.bredband.comhem.se) (Quit: bajs)
[02:26:02] *** Quits: {-}grant ({0}grant@moz-fctpaa.mo.charter.com) (Connection closed)
[02:26:13] *** Joins: {-}grant ({0}grant@moz-fctpaa.mo.charter.com)
[02:26:37] <alex> how can I pass around functions as first class objects?
[02:26:43] <alex> specifically the type annotation needed - I'm confused
[02:27:08] <panicbit> alex: Either as &Fn, Box<Fn> or T: Fn
[02:28:07] <alex> binding.rs:1:15: 1:17 error: angle-bracket notation is not stable when used with the `Fn` family of traits, use parentheses [E0215]
[02:28:19] <alex> binding.rs:1 fn second(f: &Fn) {
[02:28:34] <panicbit> alex: Use "&Fn()"
[02:30:09] <panicbit> There are two syntaxes to express Fn traits, one of which is like Fn<(Tuple,Of,Input,Types)> with a associated Output type. The other is the fn style syntax.
[02:30:14] *** Quits: kard (-@moz-m6b8sg.dip0.t-ipconnect.de) (Connection closed)
[02:30:35] *** Joins: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net)
[02:30:37] *** Joins: jaredonline (jaredonline@moz-31rl38.ph.cox.net)
[02:31:03] <panicbit> (Actually you can have Fn<any_type> but then you can't call that Fn using () syntax but only using Fn::call)
[02:32:05] *** Quits: saml_ (saml@moz-rkfmct.res.rr.com) (Connection closed)
[02:33:18] <panicbit> playbot: fn do_effect(f: &Fn()) { f(); };   do_effect(&|| println!("hi"));
[02:33:19] -playbot- hi
[02:33:20] -playbot- ()
[02:34:14] <panicbit> playbot: fn do_effect<F: Fn()>(f: F) { f() };     do_effect(|| println!("hi"));
[02:34:16] -playbot- hi
[02:34:16] -playbot- ()
[02:34:32] *** Joins: summerlight_ (summerlight@moz-99k.2mj.130.121.IP)
[02:34:45] *** Quits: {-}grant ({0}grant@moz-fctpaa.mo.charter.com) (Ping timeout: 121 seconds)
[02:34:59] <panicbit> And Box<Fn...> should work analogous to &Fn...
[02:37:18] *** Joins: coxg (sazzer@moz-1hq.kh5.32.217.IP)
[02:37:18] *** Joins: Rym (y@moz-cfe.mso.205.31.IP)
[02:37:22] *** Joins: Wild_Cat (Max@moz-r586am.cpe.teksavvy.com)
[02:37:23] *** Quits: Selemur (chatzilla@moz-tpgfbn.kawo1.rwth-aachen.de) (Quit: ChatZilla 0.9.91.1 [Firefox 36.0.1/20150305021524])
[02:39:32] *** Joins: tadh (quassel@moz-u32ic7.static.qwest.net)
[02:40:19] *** Quits: bojo1 (bojo@moz-ek1f0s.ocn.ne.jp) (Ping timeout: 121 seconds)
[02:41:08] *** Joins: Eonil (Eonil@moz-ia6.6ut.1.27.IP)
[02:41:30] *** Quits: coxg (sazzer@moz-1hq.kh5.32.217.IP) (Ping timeout: 121 seconds)
[02:42:28] *** Quits: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net) (Ping timeout: 121 seconds)
[02:43:27] *** Joins: eibwen (eibwen@moz-avvkrb.dip0.t-ipconnect.de)
[02:43:29] *** Quits: JackMc (jack@moz-pseh7a.cable.rogers.com) (Ping timeout: 121 seconds)
[02:44:24] <panicbit> alex: Does it work now?
[02:44:28] <alex> yup
[02:44:29] <alex> thanks
[02:45:36] *** Joins: nrc (nrc@moz-4bhi2i.xtra.co.nz)
[02:45:37] *** ChanServ sets mode: +o nrc
[02:49:36] *** Quits: darius93 (dariusc93@moz-2af.8nc.60.74.IP) (Connection closed)
[02:50:17] *** Joins: tsenior (user@moz-j0f1jd.va.comcast.net)
[02:52:16] *** Quits: vairav (vairav@moz-ms3.on0.126.76.IP) (Client exited)
[02:52:34] *** Joins: glennpratt (glennpratt@moz-neq2gf.dsl-w.verizon.net)
[02:53:24] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[02:56:53] *** Joins: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net)
[02:57:40] *** Joins: da-kid (da@moz-vejjnc.dip0.t-ipconnect.de)
[02:58:18] *** Joins: brainproxy (michael@moz-9vjtig.mo.charter.com)
[02:58:43] *** Quits: munksgaard (munksgaard@moz-1i4.hq0.225.130.IP) (Ping timeout: 121 seconds)
[02:59:02] *** Joins: newbie (eibwen@moz-a8u4d3.dip0.t-ipconnect.de)
[02:59:10] *** Quits: Eonil (Eonil@moz-ia6.6ut.1.27.IP) (Quit: This computer has gone to sleep)
[02:59:58] *** Quits: marsel (user@moz-tjk.bk3.180.94.IP) (Ping timeout: 121 seconds)
[03:00:12] *** Quits: murz (murz@moz-h10.ori.130.24.IP) (Quit: Be back later ...)
[03:00:16] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[03:00:29] *** Quits: da-kid_ (da@moz-treeur.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[03:00:29] *** Quits: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net) (A TLS packet with unexpected length was received.)
[03:01:00] *** Quits: kmcguire_ (kmcguire@moz-pg1gb9.biz.rr.com) (Connection closed)
[03:01:17] *** Joins: kmcguire_ (kmcguire@moz-pg1gb9.biz.rr.com)
[03:01:57] *** Quits: eibwen (eibwen@moz-avvkrb.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[03:02:02] *** Quits: kgrandon (Adium@moz-6m3528.ca.comcast.net) (Quit: Leaving.)
[03:02:35] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Connection closed)
[03:02:54] *** Joins: kgrandon (Adium@moz-6m3528.ca.comcast.net)
[03:03:04] *** Quits: cptroot (Mibbit@moz-n169l8.caltech.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[03:03:29] *** Quits: bombless (bombless@moz-uag.piv.41.59.IP) (Quit: Leaving)
[03:03:49] *** Quits: psd_ (psd@moz-avd.mmu.202.116.IP) (Ping timeout: 121 seconds)
[03:04:04] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[03:04:35] *** Joins: dawehner (quassel@moz-iprcgi.dip0.t-ipconnect.de)
[03:05:01] *** Joins: rustyrazorblade (rustyrazorb@moz-pobbah.cable.earthlink.net)
[03:05:20] *** Quits: indefini (chris@moz-qefu0l.ocn.ne.jp) (Ping timeout: 121 seconds)
[03:05:53] *** Quits: psy (psy@moz-ous.ntd.6.103.IP) (Ping timeout: 121 seconds)
[03:05:56] *** Quits: james4k (james@moz-ojv7g2.consolidated.net) (Ping timeout: 121 seconds)
[03:08:05] *** Quits: kakefabrikken (Mibbit@moz-9m21i0.studby.ntnu.no) (Quit: http://www.mibbit.com ajax IRC Client)
[03:08:20] <alex> is there any way to have a default value for a struct?
[03:08:31] <alex> like, say I have color and I want it to default to "black"?
[03:08:40] <Mutabah> alex: Using the Default trait?
[03:08:44] *** Quits: dawehner (quassel@moz-iprcgi.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[03:08:47] *** Joins: mystor (mystor@moz-kg20eb.cable.rogers.com)
[03:08:52] *** Joins: carrus85 (_carrus85_@moz-0l5.6nh.72.64.IP)
[03:09:07] <alex> but what if I didn't want to use the default for that type
[03:09:13] <alex> let's say color is a string?
[03:09:29] <panicbit> Newtype
[03:09:30] <Mutabah> alex: Impl Default on you struct
[03:09:37] <alex> ugh
[03:09:39] <Mutabah> s/you/your/
[03:09:40] <panicbit> struct Color(String)
[03:10:37] *** Joins: cptroot (Mibbit@moz-n169l8.caltech.edu)
[03:11:37] *** Joins: acamda (adam@moz-q44okf.iinet.net.au)
[03:12:25] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Connection closed)
[03:13:43] *** Quits: idegen (greg@moz-9c4nle.or.frontiernet.net) (Ping timeout: 121 seconds)
[03:14:36] <rustyrazorblade> if I want to allocate memory on the heap and manage it w/ unsafe, would I not use Box, then get a pointer?  i'm not really sure if https://doc.rust-lang.org/book/unsafe.html is saying i am required to use malloc or not
[03:15:05] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[03:17:57] *** Quits: playjax (chatzilla@moz-57udtk.optusnet.com.au) (Ping timeout: 121 seconds)
[03:18:31] *** Joins: bojo1 (bojo@moz-5a7.ii6.5.103.IP)
[03:19:42] *** Joins: bombless (bombless@moz-bslt8g.0v2u.0v40.0da8.2001.IP)
[03:19:54] *** Quits: acamda (adam@moz-q44okf.iinet.net.au) (Quit: leaving)
[03:21:11] <panicbit> rustyrazorblade: You probably can use a Box, but you need to initialize that memory with something. If you want a FFI function to initialize your memory then that's not what you want. (It works but it's a useless initialization).
[03:21:35] <panicbit> rustyrazorblade: You probably want to use malloc in that case
[03:21:36] <rustyrazorblade> not ffi - i'm building a graph lib so there's all sorts of crazy pointer madness
[03:22:23] *** Joins: Guest__ (textual@moz-jcu.4a3.146.125.IP)
[03:22:48] *** Quits: mystor (mystor@moz-kg20eb.cable.rogers.com) (Connection closed)
[03:22:50] <panicbit> rustyrazorblade: Do you always have something that you can pass to Box::new ?
[03:22:59] <rustyrazorblade> panicbit: does what i'm doing here make any sense?  https://github.com/rustyrazorblade/thunderdome/blob/master/src/lib.rs#L25
[03:23:05] *** Joins: mystor (mystor@moz-kg20eb.cable.rogers.com)
[03:23:17] *** Joins: psd_ (psd@moz-acc.mpg.78.202.IP)
[03:23:40] <rustyrazorblade> i'm trying to figure out if that's going to be overwritten at some point, what the rules are around it
[03:23:43] *** Quits: fyolnish (fyolnish@moz-a8g1kl.au-net.ne.jp) (Connection closed)
[03:24:14] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Connection closed)
[03:24:14] <rustyrazorblade> the tests mostly pass, but that could just be because the memory wasn't overwritten
[03:24:15] *** Joins: fyolnish (fyolnish@moz-a8g1kl.au-net.ne.jp)
[03:24:55] <panicbit> rustyrazorblade: Yeah I think that makes sense. But I think Box might try to free your pointer when it gets dropped
[03:25:09] <rustyrazorblade> yep - that's exactly my concern 
[03:25:31] <rustyrazorblade> so it frees it, but the pointer still points to the memory that has the right value... for now
[03:25:32] *** Joins: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net)
[03:25:46] <rustyrazorblade> then later it gets overwritten by some new box allocation 
[03:26:02] <panicbit> rustyrazorblade: You can make rust forget that box
[03:26:07] <panicbit> rustyrazorblade: http://doc.rust-lang.org/std/mem/fn.forget.html
[03:26:17] <rustyrazorblade> ah very cool
[03:26:20] <rustyrazorblade> thank you panicbit 
[03:26:23] <rustyrazorblade> ill try that
[03:26:23] <panicbit> np
[03:26:39] <XMPPwocky> but... wait
[03:26:46] <panicbit> rustyrazorblade: That obviously requires that you don't move or clone your box anywhere...
[03:26:55] <XMPPwocky> that will not work at all
[03:27:03] <XMPPwocky> you have a pointer to the box, still
[03:27:18] <rustyrazorblade> XMPPwocky what would you recommend instead?
[03:27:19] <XMPPwocky> after the box goes out of scope, it's not just that the memory it contains gets freed
[03:27:43] <XMPPwocky> rustyrazorblade: transmute Box<T> to *mut T
[03:27:49] <XMPPwocky> and transmute back when you want to free it
[03:28:17] *** Joins: frogonia (Mibbit@moz-f0nlff.nagoya-u.ac.jp)
[03:28:18] *** Quits: frogonia (Mibbit@moz-f0nlff.nagoya-u.ac.jp) (Quit: http://www.mibbit.com ajax IRC Client)
[03:28:54] <rustyrazorblade> so forget wouldn't accomplish the same thing?
[03:29:20] <rustyrazorblade> hmm... this could get complicated.  i'm going to be transmuting all over the place
[03:29:36] <panicbit> rustyrazorblade: Forget would just stop rust from calling .drop()
[03:29:41] *** Quits: xuu (xuu@moz-a0r8ua.ipv6.he.net) (Ping timeout: 121 seconds)
[03:29:51] *** Quits: kimundi (kimundi@moz-d6fa5i.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[03:30:48] <burntsushi> XMPPwocky: i don't think you need transmute for that? http://is.gd/lzAWK0
[03:30:51] *** Quits: mystor (mystor@moz-kg20eb.cable.rogers.com) (Connection closed)
[03:30:51] *** Joins: kimundi (kimundi@moz-l9a7he.dip0.t-ipconnect.de)
[03:31:19] *** Joins: mystor (mystor@moz-kg20eb.cable.rogers.com)
[03:31:50] <XMPPwocky> burntsushi: yes. but transmute also means you don't need to do forget()
[03:31:50] *** Quits: tan (tan@moz-rrp3h1.fios.verizon.net) (Connection closed)
[03:32:14] <burntsushi> ah, i see.
[03:33:14] *** Quits: bombless (bombless@moz-bslt8g.0v2u.0v40.0da8.2001.IP) (Quit: Leaving)
[03:35:06] *** nrc is now known as nrc|afk
[03:35:20] *** kimundi is now known as zz_kimundi
[03:35:29] *** Quits: mystor (mystor@moz-kg20eb.cable.rogers.com) (Ping timeout: 121 seconds)
[03:35:35] <rustyrazorblade> i'll give transmute a shot, ty all
[03:35:39] *** darkowlzz|afk is now known as darkowlzz
[03:35:47] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[03:36:01] *** Joins: mindcat (mindcat@moz-8tb.j1o.118.113.IP)
[03:36:04] *** Quits: ogham (rally@moz-pfgnao.cable.virginm.net) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[03:36:12] <mindcat> lets seee
[03:36:41] <FreeFull> playbot: (-1)/3
[03:36:42] -playbot- 0
[03:36:44] <FreeFull> playbot: (-4)/3
[03:36:46] -playbot- -1
[03:36:47] <FreeFull> playbot: (-5)/3
[03:36:48] -playbot- -1
[03:37:08] <FreeFull> Is this guaranteed to be the way division rounds?
[03:38:06] *** Joins: xuu (xuu@moz-9h1gkh.ktc.sour.is)
[03:38:37] <FreeFull> playbot: (-5)%3
[03:38:39] -playbot- -2
[03:38:51] <panicbit> playbot: 1/2
[03:38:53] -playbot- 0
[03:38:54] <panicbit> playbot: 3/2
[03:38:55] -playbot- 1
[03:39:07] *** Quits: leavengood (leavengood@moz-g5avig.fl.comcast.net) (Ping timeout: 121 seconds)
[03:39:07] <panicbit> rust apparently always rounds down in that case
[03:39:40] <FreeFull> panicbit: Rounding down would give -2
[03:39:43] <FreeFull> Did you mean rounds towards 0?
[03:39:49] <panicbit> Compare to Python >>> round(1/2)
[03:39:49] <panicbit> 0
[03:39:49] <panicbit> >>> round(3/2)
[03:39:49] <panicbit> 2
[03:40:18] <FreeFull> Python probably rounds towards the nearest even number then
[03:40:22] <FreeFull> Haskell does that too
[03:40:23] <panicbit> yup
[03:40:33] *** Joins: psy (psy@moz-ous.ntd.6.103.IP)
[03:40:43] <FreeFull> Rounding towards 0 happens to be what I want
[03:41:10] <FreeFull> Although I would have preferred if (-5)%3 gave a positive number
[03:41:24] <panicbit> Rounding towards 0 makes sense
[03:41:27] *** Joins: jimblandy (user@moz-6gkikn.or.comcast.net)
[03:41:49] <FreeFull> Oh well, I'll deal
[03:42:04] <panicbit> Division is pretty much independed of the sign bit. You just xor them at the end I think?
[03:42:07] *** zz_kimundi is now known as kimundi
[03:42:16] *** Joins: james4k (james@moz-ojv7g2.consolidated.net)
[03:42:17] *** Quits: Rym (y@moz-cfe.mso.205.31.IP) (Ping timeout: 121 seconds)
[03:43:17] *** Quits: jimb (user@moz-6gkikn.or.comcast.net) (Ping timeout: 121 seconds)
[03:43:23] *** Joins: TheDan64 (TheDan64@moz-6hceng.ma.charter.com)
[03:43:43] <rustyrazorblade> XMPPwocky: would the transmute look like this: let ptr: *mut Box<Vertex> = unsafe { mem::transmute(v) };
[03:43:48] <panicbit> FreeFull: If you want to be safe then use float division and round explicitly
[03:45:37] <rustyrazorblade> replacing https://github.com/rustyrazorblade/thunderdome/blob/master/src/lib.rs#L23
[03:45:55] *** Quits: adu (ajr@moz-bqtbbn.fios.verizon.net) (Client exited)
[03:46:01] <FreeFull> panicbit: Float division would mean lost precision
[03:46:15] <FreeFull> A mantissa has fewer than 64 bits
[03:46:17] <panicbit> FreeFull: True
[03:46:30] <FreeFull> I'm doing a base conversion (binary to ternary)
[03:46:35] <FreeFull> So I can't really lose any precision
[03:46:39] <panicbit> ok
[03:46:46] <TheDan64> Hi. I'm trying to get at rust's llvm bindings. extern crate rustc; use rustc::llvm; works fine for me on the playpen, but the latter line says its an unresolved inport on my local machine. Is this because I need to specify somehow that I'm using the alpha and/or nightly build?
[03:47:15] <FreeFull> Why are all the FromPrimitive methods mandatory?
[03:47:44] *** Joins: tinaun (tinaun@moz-7l08ds.ct.comcast.net)
[03:48:21] *** Quits: dlc (dlc@moz-ijetde.res.rr.com) (Ping timeout: 121 seconds)
[03:48:46] *** Joins: larhat1 (Adium@moz-9vj.vcf.204.37.IP)
[03:49:12] <panicbit> TheDan64: Playpen also uses the nightly so if you got the nightly then that's not the cause 
[03:49:13] *** darkowlzz is now known as darkowlzz|afk
[03:49:59] *** Quits: KallDrexx (KallDrexx@moz-4fqk30.dybhfl.sbcglobal.net) (Quit: Leaving)
[03:50:07] <panicbit> TheDan64: extern crate rustc etc. works for me on the nightly
[03:50:25] <XMPPwocky>  rustyrazorblade no
[03:50:34] *** Quits: larhat (Adium@moz-kqv3ht.mfe0.h1q1.2168.2a02.IP) (Ping timeout: 121 seconds)
[03:50:36] <XMPPwocky> rustyrazorblade: let ptr: *mut Vertex = unsafe { mem::transmute(v) };
[03:50:37] <rustyrazorblade>   let ptr: *mut Vertex = unsafe { mem::transmute(v) };?
[03:50:42] <rustyrazorblade> sweet
[03:51:02] <rustyrazorblade> i just tried that and everything just passed, even the stuff that segfaulted before
[03:51:15] <rustyrazorblade> thank you again XMPPwocky 
[03:51:56] <TheDan64> panicbit: Interesting. Thanks for letting me know. Hmm. the extern crate portion doesn't error so it would seem to be finding the rustc module
[03:52:28] <panicbit> XMPPwocky: I like your name, nice pun :)
[03:52:46] <XMPPwocky> lol, ty
[03:53:07] *** darkowlzz|afk is now known as darkowlzz
[03:53:51] *** Quits: Wild_Cat (Max@moz-r586am.cpe.teksavvy.com) (Ping timeout: 121 seconds)
[03:54:03] <panicbit> TheDan64: Can you please post the exact error message?
[03:54:07] *** Quits: SpaceWizard (RJones@moz-fmqc9c.res.rr.com) (Ping timeout: 121 seconds)
[03:54:35] <TheDan64> panicbit: error: unresolved import `rustc::llvm`. Did you mean `self::rustc`?
[03:54:56] <panicbit> TheDan64: Uh... Did you try what the compiler recommended?
[03:55:19] <panicbit> TheDan64: "use self::rustc::llvm"?
[03:55:39] *** Quits: Quanttek (quassel@moz-25k96c.6fkd.dvrb.8108.2a02.IP) (Ping timeout: 121 seconds)
[03:56:06] <TheDan64> panicbit: that worked. haha. I feel silly for not doing that. Thanks
[03:56:10] <panicbit> =)
[03:56:22] *** Joins: alhof (dylan@moz-bqi.d0d.43.100.IP)
[03:56:22] *** Joins: dylan_ (dylan@moz-bqi.d0d.43.100.IP)
[03:58:38] *** darkowlzz is now known as darkowlzz|afk
[04:00:35] *** Quits: Gamecubic__ (cubic@moz-qfrl13.mc.videotron.ca) (Quit: Leaving)
[04:01:22] *** Joins: jonalmei_ (jonalmeida@moz-ruqfvo.home.cgocable.net)
[04:01:30] *** Quits: alhof (dylan@moz-bqi.d0d.43.100.IP) (Ping timeout: 121 seconds)
[04:01:32] *** Quits: newbie (eibwen@moz-a8u4d3.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[04:01:36] *** Quits: dylan_ (dylan@moz-bqi.d0d.43.100.IP) (Ping timeout: 121 seconds)
[04:03:05] *** Quits: jonalmeida (jonalmeida@moz-5j8.kvb.131.104.IP) (Ping timeout: 121 seconds)
[04:03:10] *** Joins: jonalmeida (jonalmeida@moz-5j8.kvb.131.104.IP)
[04:05:22] *** darkowlzz|afk is now known as darkowlzz
[04:06:08] <ebfull> how is Sync defined over all types T, which contain Sync types, without compiler assistance?
[04:06:28] <ebfull> or does the compiler have some simple rule for doing this?
[04:06:34] *** Quits: jonalmei_ (jonalmeida@moz-ruqfvo.home.cgocable.net) (Ping timeout: 121 seconds)
[04:06:51] <XMPPwocky> compiler magic
[04:07:08] <ebfull> so i have to use lang items to define my own Sync trait?
[04:07:25] <XMPPwocky> er, what are you actually trying to do
[04:07:42] <ebfull> i'm just imagining how Sync is automatically implemented by all traits appropriately
[04:07:44] *** Quits: TheDan64 (TheDan64@moz-6hceng.ma.charter.com) (Quit: Leaving)
[04:07:44] <talchas> if you just do unsafe trait Foo {}, impl !Foo for NotSyncStruct {}, does that work?
[04:07:46] <XMPPwocky> if you want something that acts like Sync, you're SOL, you can't get that automatic behavior
[04:08:23] *** Joins: murz (murz@moz-h10.ori.130.24.IP)
[04:08:28] <ebfull> but why did Sync move into the standard library then if it's a primitive like this? is there intention in the future to expand the expressiveness of the language to make it eventually entirely code magic?
[04:08:46] <ebfull> i guess that's kind of a stupid question since a lot of things have to be lang items at some point..
[04:09:05] <cmr> ebfull: yes, there's plans to make Sync etc not-magic.
[04:09:05] <ebfull> but i remember reading about how Sync was moving to the standard library and it wouldn't have compiler magic defining it or something like that
[04:09:24] <FreeFull> Is there any guide to implementing Display?
[04:09:27] <cmr> (details are in an RFC somewhere)
[04:09:32] *** Joins: adu (ajr@moz-0foa9t.md.comcast.net)
[04:09:40] <ebfull> cool cmr i'll look around
[04:10:07] *** Joins: jimbland` (user@moz-6gkikn.or.comcast.net)
[04:10:51] *** darkowlzz is now known as darkowlzz|afk
[04:11:22] *** Quits: jimblandy (user@moz-6gkikn.or.comcast.net) (Ping timeout: 121 seconds)
[04:12:10] *** Joins: fmendez (fmendez@moz-1jn.fqm.166.190.IP)
[04:12:42] *** darkowlzz|afk is now known as darkowlzz
[04:13:32] *** Joins: bombless (bombless@moz-bslt8g.0v2u.0v40.0da8.2001.IP)
[04:13:55] *** Quits: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net) (Ping timeout: 121 seconds)
[04:13:59] <bombless> playbot: struct S(i32); impl S { fn foo(self: &S)->&i32 { &self.0 } }
[04:14:01] -playbot- ()
[04:15:56] *** Joins: lenstr (lenstr@moz-2e7.vju.25.171.IP)
[04:16:42] *** Quits: lenstr (lenstr@moz-2e7.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[04:16:55] *** Joins: lenstr (lenstr@moz-2e7.vju.25.171.IP)
[04:17:35] *** Quits: Guest__ (textual@moz-jcu.4a3.146.125.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[04:17:41] *** Joins: avikpal (avikpal@moz-7qc.0pm.194.117.IP)
[04:17:55] *** Quits: lenstr (lenstr@moz-2e7.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[04:18:07] <panicbit> FreeFull: I hope this helps http://is.gd/XcKGMH
[04:19:14] *** Quits: adu (ajr@moz-0foa9t.md.comcast.net) (Client exited)
[04:19:23] *** Quits: kl4ng (Mibbit@moz-cu9.nag.102.75.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:20:10] *** Quits: avikpal (avikpal@moz-7qc.0pm.194.117.IP) (Connection closed)
[04:20:15] *** darkowlzz is now known as darkowlzz|afk
[04:20:20] *** Quits: james4k (james@moz-ojv7g2.consolidated.net) (Ping timeout: 121 seconds)
[04:20:43] *** Joins: adu (ajr@moz-0foa9t.md.comcast.net)
[04:21:06] <FreeFull> panicbit: From the docs, it's completely unclear write! can be used
[04:21:45] <panicbit> FreeFull: It's coompletely optional. It's just a a shortcut for .write(format!(…));
[04:21:46] *** Quits: bojo1 (bojo@moz-5a7.ii6.5.103.IP) (Ping timeout: 121 seconds)
[04:22:05] <FreeFull> panicbit: My type is a custom numeric type
[04:22:06] *** Joins: james4k (james@moz-ojv7g2.consolidated.net)
[04:22:18] <FreeFull> So it looks like I should be creating a string and then using .pad_numeric
[04:23:00] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[04:23:40] <panicbit> FreeFull: Yeah you could do that
[04:24:18] <FreeFull> Oh, I mean pad_integral
[04:25:50] *** Quits: huseby (huseby@moz-m7l0au.d2vr.5em6.6400.2605.IP) (Ping timeout: 121 seconds)
[04:26:12] *** Joins: coxg (sazzer@moz-1hq.kh5.32.217.IP)
[04:26:29] *** darkowlzz|afk is now known as darkowlzz
[04:26:50] *** Quits: adu (ajr@moz-0foa9t.md.comcast.net) (Client exited)
[04:28:22] <FreeFull> I'm trying to write! to a String, it's not working
[04:28:51] <doomrobo> I read that it's possible to write safe code that uses unsafe. Doesn't unsafe "taint" anything that uses it in a sense?
[04:29:21] <XMPPwocky> doomrobo: there's two "safe" meanings heer
[04:29:42] *** Joins: garming (garming@moz-pqd1u2.xtra.co.nz)
[04:29:44] <XMPPwocky> there's "stuff that the compiler can prove is safe"
[04:29:52] <XMPPwocky> and "stuff that is actually safe"
[04:29:55] <panicbit> FreeFull: Did you import std::io::Write ?
[04:30:07] <XMPPwocky> all the stuff in the former is (hopefully!) in the latter
[04:30:09] *** Joins: adu (adu@moz-melbkr.ms5a.74ae.000a.2601.IP)
[04:30:14] <XMPPwocky> not all the stuff in the latter is in the former
[04:30:24] *** Quits: coxg (sazzer@moz-1hq.kh5.32.217.IP) (Ping timeout: 121 seconds)
[04:30:28] <panicbit> FreeFull: write! actually calls .write_fmt which is implemented by the Write trait
[04:30:29] <alex> how do I have a hashmap that is private to a module?
[04:30:29] <XMPPwocky> Unsafe blocks let you write code you know to be memory-safe
[04:30:34] <alex> I.E. I want a cache
[04:30:37] <XMPPwocky> but that the compiler cannot prove is safe
[04:30:41] *** Joins: maedhroz (maedhroz@moz-4jk5ho.res.rr.com)
[04:30:42] <XMPPwocky> alex: do you want threads
[04:30:48] <alex> no
[04:30:50] <doomrobo> oh ok, that's what I thought
[04:30:54] <FreeFull> panicbit: Forgot to do that
[04:31:10] <XMPPwocky> doomrobo: there was a half-tongue-in-cheek proposal
[04:31:14] <FreeFull> panicbit: Another problem was that because I missed the &mut, it was somehow turning the String into &mut str
[04:31:19] <XMPPwocky> doomrobo: to rename "unsafe" blocks to "trustme"
[04:31:22] <FreeFull> And then complaining &mut str doesn't have that method
[04:31:23] <doomrobo> haha
[04:31:42] *** darkowlzz is now known as darkowlzz|afk
[04:31:44] *** Joins: zettablade (Mibbit@moz-58u.jiv.125.50.IP)
[04:32:01] <doomrobo> in a sense, "trustme" encapsulates all of C++
[04:32:15] <alex> XMPPwocky, presumably this would be like a static variable in java
[04:32:43] *** Joins: brianloveswords (brianlovesw@moz-mve27s.fios.verizon.net)
[04:32:50] <XMPPwocky> alex: a mutex in a lazy_static should do it
[04:32:50] *** Joins: tan (tan@moz-rrp3h1.fios.verizon.net)
[04:33:08] <alex> mutex?
[04:33:11] <alex> lazy_static?
[04:33:24] <panicbit> FreeFull: Well just use .write_fmt directly =P
[04:33:31] <XMPPwocky> mutex is in the standard lobrary
[04:33:33] <XMPPwocky> library, veen
[04:33:33] *** darkowlzz|afk is now known as darkowlzz
[04:33:39] <XMPPwocky> https://github.com/Kimundi/lazy-static.rs this is lazy_static
[04:33:42] <alex> ah
[04:33:48] <alex> I'd rather not use any external libraries
[04:34:05] <XMPPwocky> why?
[04:34:11] *** Quits: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net) (A TLS packet with unexpected length was received.)
[04:34:15] <XMPPwocky> there's also http://doc.rust-lang.org/std/sync/struct.StaticMutex.html
[04:34:18] <XMPPwocky> but it's sorta wonky
[04:34:24] <panicbit> FreeFull: I think the issue is that the write! macro tries to &mut borrow the String wchich auto derefs to &mut str
[04:34:46] *** Joins: eddyb_ (eddyb@moz-6k1.q07.26.188.IP)
[04:34:50] <FreeFull> Ok, my code is definitely broken for negative numbers :/
[04:34:58] <alex> hmm
[04:35:29] *** Quits: eddyb (eddyb@moz-6k1.q07.26.188.IP) (Quit: Bye)
[04:35:37] <FreeFull> Works for positive numbers though
[04:36:00] <XMPPwocky> the solution: pass everything through abs
[04:36:02] <XMPPwocky> ship it
[04:36:28] *** Quits: brianloveswords (brianlovesw@moz-mve27s.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[04:36:52] *** Quits: tan (tan@moz-rrp3h1.fios.verizon.net) (Ping timeout: 121 seconds)
[04:36:53] *** Joins: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net)
[04:37:03] * panicbit holds up a sign with "Don't actually do that" written on it
[04:37:53] *** Quits: new_one (new_one@moz-9hk8kf.rice.edu) (A TLS packet with unexpected length was received.)
[04:38:54] <FreeFull> XMPPwocky: I would have used abs if it wasn't for that pesky i64::MIN
[04:39:21] <XMPPwocky> ah right
[04:39:33] <doomrobo> what do you mean FreeFull ?
[04:39:51] <XMPPwocky> doomrobo: the maximum negative number is greater than the maximum positive number
[04:39:59] <XMPPwocky> or rather thheir absolute values are
[04:40:11] <doomrobo> hahaha
[04:40:21] <doomrobo> can't you get a u64 out of abs?
[04:40:38] *** Joins: mcoffee_ (mcoffee@moz-erlnm0.bchsia.telus.net)
[04:40:39] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[04:40:55] *** Quits: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net) (Ping timeout: 121 seconds)
[04:40:58] <doomrobo> actually, couldn't you get a u32 from abs(i64)?
[04:41:00] *** Quits: zettablade (Mibbit@moz-58u.jiv.125.50.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:41:24] <XMPPwocky> no
[04:42:04] *** darkowlzz is now known as darkowlzz|afk
[04:42:09] <FreeFull> I've written a custom abs that does that before, and (x-y).abs() that also does that
[04:42:14] <oakwhiz> no you can get an i63 out of an abs(i64) :-)
[04:42:17] <XMPPwocky> you'd need an iu63
[04:42:22] <FreeFull> And gives accurate results for all inputs
[04:42:26] <FreeFull> That was before the wrapping changes though
[04:42:49] <FreeFull> u33
[04:43:22] <FreeFull> u64 will definitely suffice
[04:43:37] <FreeFull> Actually, hmm
[04:43:41] <oakwhiz> you just need a 33-bit processor to try it out on
[04:43:50] <doomrobo> why 33 bits?
[04:43:53] <FreeFull> No, you'd need u65
[04:43:53] *** Quits: tadh (quassel@moz-u32ic7.static.qwest.net) (Connection closed)
[04:44:05] <FreeFull> No, u64 would be ok
[04:44:16] <FreeFull> 33 not necessary
[04:44:43] <FreeFull> Now, to figure out why negative numbers produce the wrong result
[04:44:54] *** Quits: jmitchell (jmitchell@moz-o8p.pug.156.104.IP) (Ping timeout: 121 seconds)
[04:45:31] <XMPPwocky> ... did we just take 3 minutes to figure out that 64 bits are needed to represent 64 bits of information
[04:45:34] <XMPPwocky> doh
[04:45:42] <oakwhiz> struct SixtyFiveBits { a: bool, b: u64 }
[04:46:07] <XMPPwocky> i want bitstructs in rust :(
[04:46:09] <FreeFull> XMPPwocky: Less than 64 bits of information. 63 bits and a tiny bit more
[04:46:18] <FreeFull> And yeah
[04:47:19] <doomrobo> oh, that was stupid. signed integers split the values (almost) evenly between positive and negative. That only removes one bit of magnitude, not 32
[04:47:45] <doomrobo> hehe
[04:48:04] *** darkowlzz|afk is now known as darkowlzz
[04:48:36] <FreeFull> Got it
[04:50:07] <FreeFull> I was adding 3 instead of negating
[04:51:28] <doomrobo> I'm pissed. I worked my ass off on my first rust project (shred from coreutils) and submitted the PR on github on Feb 11. Not so much as a comment :\
[04:51:53] <huon> doomrobo: :(
[04:52:12] <doomrobo> FreeFull, I too always confuse +3 with *-1  :P
[04:52:41] <oakwhiz> doomrobo: is that this? https://github.com/uutils/coreutils/pull/527
[04:52:45] <FreeFull> doomrobo: =P
[04:52:48] <huon> doomrobo: you could try @-ing the maintainers?
[04:52:57] <doomrobo> oakwhiz, yes
[04:52:58] <oakwhiz> maybe they are mad that the build failed
[04:53:10] <doomrobo> I was about to cover my bases r.e that :P
[04:53:22] <doomrobo> none of the builds fail because one of the utilities in the suite was broken to begin with
[04:53:28] <doomrobo> *none of the builds succeed
[04:53:35] <alex> http://is.gd/8ujhYc - how would I make counter mutable?
[04:53:57] <doomrobo> If I exclude the broken utility (I forgot what it was) then the whole thing builds
[04:54:15] <doomrobo> huon, good idea, I'll do that
[04:55:09] <doomrobo> I'm actually not even 100% sure that my utility still compiles. 1.3 months is a long time in Rust world
[04:55:18] <panicbit> doomrobo: Also, if you see a maintainer on IRC it couldn't hurt to poke them there :P
[04:56:02] <doomrobo> I'm not on IRC that often. Also I have no clue who these people are
[04:56:47] *** Quits: carrus85 (_carrus85_@moz-0l5.6nh.72.64.IP) (Quit: Ex-Chat)
[04:57:21] *** Quits: cursivecode (textual@moz-4u56i9.res.bhn.net) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[04:57:47] <doomrobo> their usernames aren't on any of the channels I'd expect them to be on right at this moment, but I can check every time I come back. Only problem is that my hours are generally ungodly :3
[04:58:12] *** Joins: huseby (huseby@moz-m7l0au.d2vr.5em6.6400.2605.IP)
[04:58:19] *** Joins: bkearns (Adium@moz-1kbdt7.ca.comcast.net)
[05:00:00] *** Quits: rfnash (weechat@moz-203epe.in.comcast.net) (Ping timeout: 121 seconds)
[05:00:01] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[05:00:51] *** darkowlzz is now known as darkowlzz|afk
[05:01:12] <oakwhiz> alex: add lifetimes to the struct?
[05:01:28] *** Joins: errordeveloper (ilya@moz-g0i.mtf.125.2.IP)
[05:01:31] <oakwhiz> I haven't really learned that far ahead yet so I'm not sure how that works.
[05:02:18] <XMPPwocky> alex: use interior mutability if you're sure you need that
[05:02:25] <panicbit> alex: You want to use "&mut self"
[05:02:29] <XMPPwocky> if you really can't take &mut self
[05:03:11] *** Joins: jmitchell (jmitchell@moz-o8p.pug.156.104.IP)
[05:04:28] <alex> now what? http://is.gd/NJFOg0
[05:04:30] *** Quits: psd_ (psd@moz-acc.mpg.78.202.IP) (Ping timeout: 121 seconds)
[05:04:33] <doomrobo> oh, lazy_static is really clever. Declaring a static struct and implementing Deref so that calls to methods get passed to the actual object it's supposed to hold
[05:05:04] *** Joins: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP)
[05:05:04] *** Quits: joneshf-laptop_ (joneshf@moz-l4h.b5s.208.98.IP) (Connection closed)
[05:05:11] *** Joins: {-}grant ({0}grant@moz-fctpaa.mo.charter.com)
[05:05:33] <alex> <anon>:13:41: 13:42 error: cannot borrow `x` as immutable because it is also borrowed as mutable
[05:05:35] *** Quits: errordeveloper (ilya@moz-g0i.mtf.125.2.IP) (Ping timeout: 121 seconds)
[05:05:38] <alex> why the fuck is rust borrowing a variable as mutable?
[05:05:39] <alex> err
[05:05:41] <alex> immutable?
[05:05:50] <alex> anything that's mutable should be immutable too right?
[05:06:02] <oakwhiz> alex: everything is immutable by default
[05:06:05] <alex> right
[05:06:16] <alex> but having x.insert(x.get + 1) doesn't seem to be working
[05:06:22] <Mutabah> alex: Yeah, that's won't work
[05:06:24] <alex> because x.insert expects x to be mutable
[05:06:29] *** Quits: JusticeFries (textual@moz-v59a5h.co.comcast.net) (Ping timeout: 121 seconds)
[05:06:29] <alex> and x.get expects x to be immutable
[05:06:38] <alex> so how would I do that?
[05:06:46] <Mutabah> alex: The lack of non-lexical borrows means that x.get()'s borrow doesn't expire until the end of the expression
[05:06:47] *** Joins: loveless (loveless@moz-76rf2a.or.comcast.net)
[05:07:06] *** Joins: cursivecode (textual@moz-4u56i9.res.bhn.net)
[05:07:15] *** Quits: loveless (loveless@moz-76rf2a.or.comcast.net) (Quit: Leaving...)
[05:07:25] <Mutabah> alex: 1. Use "Occupied(mut x)"
[05:07:25] <alex> so what, if anything, should I be doing?
[05:07:30] <alex> ok
[05:07:40] <Mutabah> alex: 2. "{ let nextval = x.get() + 1; x.insert(nextval) }"
[05:08:05] <panicbit> alex: http://is.gd/pqDhBh
[05:08:18] <alex> ah, there we go
[05:08:19] <alex> got it working
[05:08:21] <alex> thanks Mutabah 
[05:08:25] <Mutabah> No prob
[05:08:40] <alex> thanks panicbit too
[05:09:41] *** Joins: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net)
[05:10:06] *** Quits: thesnowdog (doug@moz-g5n.flf.181.180.IP) (Connection closed)
[05:10:12] *** Joins: Rym (y@moz-cfe.mso.205.31.IP)
[05:11:57] *** Quits: kmcguire_ (kmcguire@moz-pg1gb9.biz.rr.com) (Ping timeout: 121 seconds)
[05:14:27] <doomrobo> Mutabah, how is it that doing { let nextval = x.get(); x.insert(nextval+1) } doesn't work?
[05:14:38] *** Quits: Rym (y@moz-cfe.mso.205.31.IP) (Ping timeout: 121 seconds)
[05:14:48] <doomrobo> http://is.gd/oZXKyz
[05:14:52] <Mutabah> doomrobo: Huh? That part works
[05:15:09] <Mutabah> doomrobo: Oh, I see
[05:15:34] <Mutabah> doomrobo: The 'n' is "&'x u64" in that case
[05:15:46] *** Quits: fmendez (fmendez@moz-1jn.fqm.166.190.IP) (Connection closed)
[05:15:51] <Mutabah> doomrobo: Meanwhile, if you add 1 before storing to 'n', the n becomes "u64"
[05:15:59] <doomrobo> it's implicitly casted?
[05:16:06] <Mutabah> (because &u64 has Add<u64,Output=u64>
[05:16:17] <doomrobo> oh, ok
[05:16:20] <doomrobo> odd, but ok
[05:16:30] <Mutabah> doomrobo: There's an implementation of the Add trait for &u64 that returns u64
[05:16:47] *** Quits: rustyrazorblade (rustyrazorb@moz-pobbah.cable.earthlink.net) (Client exited)
[05:16:52] <Mutabah> (Don't know the specifics of how it's implemented, could be on any &T where T: Copy
[05:17:51] *** Joins: theme (theme@moz-i3mhhb.asianet.co.th)
[05:18:21] *** Joins: lenstr (lenstr@moz-2e7.vju.25.171.IP)
[05:19:00] <doomrobo> god damn, building rustc has taken 10GB of space, if that's believable
[05:19:03] *** Quits: lenstr (lenstr@moz-2e7.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[05:19:12] *** Joins: Guest__ (textual@moz-jcu.4a3.146.125.IP)
[05:19:16] *** Joins: lenstr (lenstr@moz-2e7.vju.25.171.IP)
[05:19:59] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[05:20:04] <cmr> my build tree is only 2.8GB...
[05:20:16] *** Quits: lenstr (lenstr@moz-2e7.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[05:21:22] *** Quits: _Vi (vi@moz-bbs.vhj.131.104.IP) (Ping timeout: 121 seconds)
[05:21:50] *** Quits: polyfractal (polyfractal@moz-roi.c9b.43.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[05:22:14] *** Joins: vairav (vairav@moz-qtc2tv.ca.comcast.net)
[05:23:41] <doomrobo> ahahaha, the same person who isn't merging my PR also runs a gentoo overlay for cargo--something I really need right now
[05:26:15] *** nrc|afk is now known as nrc
[05:26:33] *** Quits: reem (reem@moz-3s1lie.coob.q2h1.0009.2601.IP) (Connection closed)
[05:26:50] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[05:28:04] *** Quits: DerisiveLogic (smuxi@moz-g93io6.res.rr.com) (Ping timeout: 121 seconds)
[05:30:52] *** Quits: maedhroz (maedhroz@moz-4jk5ho.res.rr.com) (Connection closed)
[05:32:47] *** Joins: mattico (Matthew@moz-0vjqsn.mpls.qwest.net)
[05:33:11] *** Joins: negge_ (nathan@moz-p79l68.fios.verizon.net)
[05:33:26] *** darkowlzz|afk is now known as darkowlzz
[05:33:40] *** Quits: kazimuth (james@moz-gne.8or.17.73.IP) (Quit: Textual IRC Client: www.textualapp.com)
[05:36:10] *** Quits: negge (nathan@moz-p79l68.fios.verizon.net) (Ping timeout: 121 seconds)
[05:37:39] *** Joins: psd (psd@moz-acc.mpg.78.202.IP)
[05:38:47] *** Quits: acgtyrant (acgtyrant@moz-3kd.b79.160.124.IP) (Ping timeout: 121 seconds)
[05:39:46] *** Joins: BigE (BigE@moz-b53.i7b.98.79.IP)
[05:42:17] *** Quits: mr_fribble (Mibbit@moz-nd2iqs.fl.atlanticbb.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:46:05] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Quit: leaving)
[05:46:08] *** Quits: james4k (james@moz-ojv7g2.consolidated.net) (Ping timeout: 121 seconds)
[05:46:32] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[05:47:10] *** Joins: nsm (nsm@moz-mre.u87.185.146.IP)
[05:47:23] *** Quits: cursivecode (textual@moz-4u56i9.res.bhn.net) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[05:48:07] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[05:48:11] *** Joins: jimb (user@moz-6gkikn.or.comcast.net)
[05:48:11] <nsm> i'm playing with rust, and i wanted to create a struct that has a trait member, except that isn't working out so well. i want to be able to write a HashMap<> to anything that implements trait Write
[05:48:22] <nsm> so I created struct WriteLog { write: Write }
[05:48:33] *** Quits: jimbland` (user@moz-6gkikn.or.comcast.net) (Quit: ERC Version 5.3 (IRC client for Emacs))
[05:48:33] <nsm> but obviously, the trait itself isn't sized
[05:48:38] *** Quits: jimb (user@moz-6gkikn.or.comcast.net) (A TLS packet with unexpected length was received.)
[05:48:55] *** Joins: jimb (user@moz-6gkikn.or.comcast.net)
[05:48:59] <nsm> so i can no longer have WriteLog::new()  returning Result<WriteLog>, where the writer is set to a File
[05:49:05] <nsm> am i missing some pattern here?
[05:49:07] *** Quits: mcoffee_ (mcoffee@moz-erlnm0.bchsia.telus.net) (A TLS packet with unexpected length was received.)
[05:49:25] <cmr> nsm: you probably want something like struct WriteLog<W: Write> { write: W }
[05:50:36] <mattico> nsm: read "<W: Write>" as "Type 'W' which implements 'Write'"
[05:51:10] <nsm> ah, yes. thanks! one problem. this writelog is wrapped by struct Database { log: WriteLog<T> }
[05:51:19] <nsm> how do i not expose this T to users of Database?
[05:51:31] *** Quits: MichaelGG (MichaelGG@moz-g67.qv9.149.190.IP) (Ping timeout: 121 seconds)
[05:52:00] <nsm> i'd like to be able to say Database::new(), instead of Database<File>::new()
[05:52:04] <theme> nsm, either you expost it, or you do `struct Database { log: WriteLog<MyWrite> }`
[05:52:18] <nsm> ah of course, yes :) similar to C++
[05:52:55] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[05:53:05] *** Quits: hoony (Thunderbird@moz-q5r.8e9.96.183.IP) (Client exited)
[05:54:14] *** Joins: MichaelGG (MichaelGG@moz-tlq.rcd.209.181.IP)
[05:54:38] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[05:54:58] *** Joins: starless (starless@moz-u9gmm1.res.rr.com)
[05:58:06] *** Joins: _Vi (vi@moz-bbs.vhj.131.104.IP)
[05:59:34] *** Quits: orangeshark (erik@moz-b37i43.miamfl.sbcglobal.net) (Quit: Leaving)
[06:02:02] *** Quits: adu (adu@moz-melbkr.ms5a.74ae.000a.2601.IP) (Ping timeout: 121 seconds)
[06:02:30] *** Quits: jmitchell (jmitchell@moz-o8p.pug.156.104.IP) (Ping timeout: 121 seconds)
[06:02:39] *** Joins: StarBrilliant (StarBrillia@moz-lke.7jj.57.36.IP)
[06:04:10] *** Quits: StarBrilliant (StarBrillia@moz-lke.7jj.57.36.IP) (Quit: Leaving)
[06:04:27] *** Joins: dev-lamda (lando@moz-ql60kj.nc.charter.com)
[06:04:35] <nsm> When I override a trait implementation function for a special type, is there some 'super' to call the original?
[06:04:41] <nsm> s/special/specific
[06:09:12] <theme> nsm, AFAIK, no
[06:09:36] *** Joins: forgottenone (forgottenon@moz-160.l1s.42.176.IP)
[06:09:39] *** Quits: Lovot (root@moz-1je.00u.73.69.IP) (Ping timeout: 121 seconds)
[06:10:50] *** Joins: Rym (y@moz-cfe.mso.205.31.IP)
[06:11:08] *** Parts: dev-lamda (lando@moz-ql60kj.nc.charter.com) ("")
[06:11:14] *** Quits: murz (murz@moz-h10.ori.130.24.IP) (Quit: Be back later ...)
[06:11:41] *** Joins: Lovot (root@moz-1je.00u.73.69.IP)
[06:12:31] *** Joins: dfinninger (dfinninger@moz-6a9v7n.res.rr.com)
[06:14:30] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[06:15:02] *** Joins: coxg (sazzer@moz-1hq.kh5.32.217.IP)
[06:15:24] *** Quits: Rym (y@moz-cfe.mso.205.31.IP) (Ping timeout: 121 seconds)
[06:17:48] <doomrobo> nsm, you could have the thing you're overriding as a member of the struct and then implement Deref for it
[06:18:24] <nsm> doomrobo: i don't understand, could you point to some code/syntax
[06:18:40] *** Joins: tan (tan@moz-rrp3h1.fios.verizon.net)
[06:18:48] *** Quits: tigrou3tac (fabien@moz-gdonfo.fbx.proxad.net) (Ping timeout: 121 seconds)
[06:19:14] *** Quits: coxg (sazzer@moz-1hq.kh5.32.217.IP) (Ping timeout: 121 seconds)
[06:19:54] *** Joins: hoony (Thunderbird@moz-3ad.4e0.96.183.IP)
[06:20:49] *** Joins: lenstr (lenstr@moz-2e7.vju.25.171.IP)
[06:21:19] *** Quits: Anchovieshat (cloin@moz-4t5baq.pentaquine.com) (Connection closed)
[06:21:23] *** Quits: lenstr (lenstr@moz-2e7.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[06:21:29] *** Joins: lenstr (lenstr@moz-2e7.vju.25.171.IP)
[06:21:30] *** Joins: hoony1 (Thunderbird@moz-egf.8vi.223.175.IP)
[06:21:33] *** Joins: Anchovieshat (cloin@moz-4t5baq.pentaquine.com)
[06:21:56] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[06:22:33] *** Quits: iopq (Mibbit@moz-uuic7b.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[06:22:36] *** Quits: lenstr (lenstr@moz-2e7.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[06:22:51] *** Quits: tan (tan@moz-rrp3h1.fios.verizon.net) (Ping timeout: 121 seconds)
[06:23:10] *** Quits: rprichard (rprichard@moz-s27r3p.en8f.d045.0009.2601.IP) (Ping timeout: 121 seconds)
[06:23:22] *** Joins: rprichard (rprichard@moz-ekp75j.en8f.d045.0009.2601.IP)
[06:23:22] *** Quits: ryanxcharles (ryan@moz-31fkpi.bac4.d045.0009.2601.IP) (Ping timeout: 121 seconds)
[06:23:48] *** Quits: tsenior (user@moz-j0f1jd.va.comcast.net) (Ping timeout: 121 seconds)
[06:23:56] *** Quits: hoony (Thunderbird@moz-3ad.4e0.96.183.IP) (Ping timeout: 121 seconds)
[06:24:01] *** Joins: ryanxcharles (ryan@moz-1lugj2.bac4.d045.0009.2601.IP)
[06:24:15] *** Quits: theme (theme@moz-i3mhhb.asianet.co.th) (Quit: Leaving)
[06:25:52] <XMPPwocky> sometimes i think Cell should be a special type of borrow
[06:26:01] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[06:26:04] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[06:26:29] *** Quits: dmac (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[06:26:30] *** Quits: sprang (sprang@moz-skdqur.hfc.comcastbusiness.net) (Ping timeout: 121 seconds)
[06:26:44] *** Quits: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net) (Ping timeout: 121 seconds)
[06:26:59] *** Joins: dmac (dmac@moz-2ig65r.ca.comcast.net)
[06:27:22] *** Quits: bombless (bombless@moz-bslt8g.0v2u.0v40.0da8.2001.IP) (Quit: Leaving)
[06:28:03] *** Joins: dougxxx (dougxxx@moz-59l9bi.iinet.net.au)
[06:28:11] <doomrobo> nsm, here ya go, I hope this helps http://is.gd/odQAth
[06:28:30] *** Quits: panicbit (panicbit@moz-gg7i2b.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[06:29:13] <nsm> doomrobo: thanks a lot!
[06:29:38] <doomrobo> np!
[06:30:15] <doomrobo> XMPPwocky, I'm actually against reduction of explicitness for the most part. I forgot exactly what it was, but some implicit casting was recently added to Rust and I was not happy about it
[06:31:57] <dougxxx> Anyone here familiar with how C++ linkers work? I'm trying to export rust symbols into a c++ dylib, and darned if I can figure it out.
[06:32:28] <doomrobo> nsm, so yeah, the main idea is that when something implements Deref and you try to call a method on it that it doesn't implement, it'll use whatever is returned by deref() and look there for that method. And if that object returned by deref implements Deref, then it'll look deeper, and so on until it finds the method or it fails
[06:32:31] <XMPPwocky> reduction of implicitness, you mean/
[06:32:33] <XMPPwocky> ?
[06:33:12] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[06:33:22] <Ralith> seems pretty clear that he means what he said
[06:33:38] <doomrobo> XMPPwocky, no, I prefer explicit over implicit in most circumstances in the context of Rust. I feel like it's currently at a kind of sweet spot with regard to that
[06:33:48] <XMPPwocky> double negative sort of tripped me up, sorry
[06:35:14] *** Joins: tayrn (tayrn@moz-0r4.4jb.0.50.IP)
[06:35:46] <XMPPwocky> doomrobo: anyways, i dont' think this is an implicit vs explicit issue
[06:35:51] <XMPPwocky> i didn't say RefCell
[06:35:56] <XMPPwocky> nobody wants @mut back
[06:36:48] <doomrobo> XMPPwocky, so what do you propose the borrow should look like?
[06:37:02] <XMPPwocky> call it, as a strawman, &cell
[06:37:05] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[06:37:32] <XMPPwocky> acts like &T, but you can't go from &cell T to &T
[06:37:35] *** Quits: Twinklebear (Twinklebear@moz-ttrcn3.ut.comcast.net) (Quit: Leaving)
[06:37:40] <XMPPwocky> only allowed if T is Copy
[06:37:48] <XMPPwocky> but you can mutate through it, even when aliased
[06:38:11] <XMPPwocky> i guess then you can't put it in a struct or anyth
[06:38:12] <doomrobo> so if I had an immutable i32 called x, I could do (&cell x).set(-15)  ?
[06:38:19] *** Quits: nrc (nrc@moz-4bhi2i.xtra.co.nz) (Connection closed)
[06:38:24] <XMPPwocky> yeah
[06:38:34] <doomrobo> well that just violates mutability outright
[06:38:35] <XMPPwocky> it'd have to work sort of like &mut in that you can't have other borrows
[06:38:54] <XMPPwocky> doomrobo: well, maybe x would need to be mutable
[06:39:02] *** Joins: nrc (nrc@moz-4bhi2i.xtra.co.nz)
[06:39:02] *** ChanServ sets mode: +o nrc
[06:39:20] <XMPPwocky> let mut x = 42; let y = &cell x; let z = &cell x; y.set(-15);
[06:39:25] <doomrobo> well if x is mutable then it's not a problem anymore because Cell is predominantly used as a member of a non-mut struct
[06:40:02] <XMPPwocky> this is why i said "sometimes I feel like Cell should be a type of borrow" rather than "cell should be a type of borrow" :U
[06:40:27] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[06:40:35] <doomrobo> I'm just playing devil's advocate here. If you were to use it like that, then you'd be much better off wrapping it in a critical-area instead of leaving that up to the coder
[06:40:45] <XMPPwocky> uh, critical area?
[06:41:22] <doomrobo> as in for concurrent use. Your above use case looks like it'd be in multithreaded code. But there are already solutions for that which are much stricter
[06:41:28] <XMPPwocky> no
[06:41:36] <XMPPwocky> youu can't do this in multithreaded code
[06:41:43] <XMPPwocky> like I said, *Cell*
[06:41:45] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[06:41:56] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[06:42:18] <doomrobo> okok I just don't see the benefit. I concede, I really don't feel like I know enough about Rust :)
[06:42:32] <XMPPwocky> basically, Cell is "atomics for single threads?
[06:42:46] <XMPPwocky> you can mutate the contents of a Cell through a shared reference
[06:43:07] *** Quits: dfinninger (dfinninger@moz-6a9v7n.res.rr.com) (Connection closed)
[06:44:36] *** Joins: bojo1 (bojo@moz-ek1f0s.ocn.ne.jp)
[06:44:41] <doomrobo> right, but if the content is already mut then the point is moot, no? You're just choosing to mutate it in a way other than assigning
[06:44:55] <doomrobo> ^intended
[06:45:33] <doomrobo> and if the content is not mut then nothing should be able to make it mut
[06:46:10] <XMPPwocky> well. interior mutability is already a thing.
[06:46:16] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[06:46:27] <doomrobo> what's that?
[06:46:40] <XMPPwocky> rusti: let x = std::cell::Cell::new(42); let y = &x; y.set(-15); y.get()
[06:46:41] -playbot- -15
[06:46:48] <XMPPwocky> mutating through &
[06:47:12] <XMPPwocky> Cell, RefCell, Mutex, RwLock, Sender/Receiver (iirc), and atomics
[06:47:22] *** Quits: mattico (Matthew@moz-0vjqsn.mpls.qwest.net) (Ping timeout: 121 seconds)
[06:48:40] <doomrobo> right, but those values are restricted to the interior of those things, and for a very good reason. I'm fairly certain that unsafe{} is necessary to implement interior mutability like that
[06:48:59] *** Joins: proc (proc@moz-k9lvsl.dip0.t-ipconnect.de)
[06:49:04] <doomrobo> a borrow would make everything mutable
[06:49:24] <XMPPwocky> right, it's not a good idea, because you don't just need to borrow
[06:49:42] <XMPPwocky> sometimes you need to have one field of a struct
[06:49:51] <doomrobo> right
[06:51:32] *** Quits: jimb (user@moz-6gkikn.or.comcast.net) (Ping timeout: 121 seconds)
[06:51:49] <doomrobo> god, I really wish I could use Rust where I work but we've got a massive C++ codebase
[06:52:20] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[06:52:25] <doomrobo> we haven't gotten around to fixing the memory leaks either. it's not a lot but any leak is bad
[06:52:28] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[06:52:42] *** Joins: dinfuehr (dinfuehr@moz-jrmm4j.highway.telekom.at)
[06:52:45] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[06:52:48] *** Quits: dschatzberg (dschatz@moz-f4a40c.bu.edu) (A TLS packet with unexpected length was received.)
[06:53:02] <XMPPwocky> i've seen codebases that just give up on fixing leaks and bring in the boehm gc
[06:54:01] <doomrobo> I've literally never heard of that before but it sounds like a terrible and lazy idea :P
[06:55:10] <cmr> it's a pragmatic solution.
[06:55:16] <XMPPwocky> it works pretty well
[06:55:48] <XMPPwocky> it's just sort of sad
[06:56:37] <doomrobo> I'm not even 100% sure why memory leaks are so bad. When a process dies everything is freed anyway. Is the fear that the memory usage will blow up?
[06:56:59] <nathan7> Well, my laptop runs for a week or two on average
[06:57:07] <nathan7> Before I reboot due to maintenance or whatever
[06:57:21] <nathan7> And this server has been running for nearly a year
[06:57:29] <nathan7> So, yes, I'd be rather pissed if memory wasn't being freed
[06:57:46] <Mutabah> doomrobo: In long-running apps, e.g. someone's browser session, it's a bad thing
[06:58:06] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[06:58:25] <oakwhiz> doomrobo: memory leaks on embedded platforms can be hard to debug
[06:58:30] <doomrobo> gotcha. Yeah, our app is a REST service so that's super important
[06:58:55] *** Joins: theme (theme@moz-i3mhhb.asianet.co.th)
[06:59:02] <oakwhiz> debugging sometimes amounts to "oh no the led stopped blinking"
[06:59:04] <Ralith> only very basic web services restart themselves on every single query
[06:59:12] *** Joins: v21 (vee@moz-sa3oki.asianet.co.th)
[06:59:21] <nathan7> plus, depending on how fast your app leaksâ€¦ it might already be an issue for a short runtime
[06:59:23] <Ralith> that just doesn't scale for serious use
[06:59:26] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[06:59:54] <doomrobo> right. our service is very persistent and should ideally run uninterrupted
[06:59:59] <Ralith> oh, right, misread you
[07:00:17] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[07:00:37] <Ralith> of course, the flipside of that coin is that no service can be guaranteed to run interrupted
[07:00:49] <Ralith> hardware failure, natural disasters, inept janitors, etc
[07:01:12] <Ralith> gotta design ways to handle those situations gracefully from the start
[07:01:31] <oakwhiz> doomrobo: you should operate under the assumption that it will be interrupted at the worst possible moments
[07:01:41] *** Joins: jonalmei_ (jonalmeida@moz-ruqfvo.home.cgocable.net)
[07:01:43] <nathan7> the nice part of having systems designed to handle failure is that you can track down the memory leak at your leisure (;
[07:02:06] <XMPPwocky> nathan7: i mean, if you have your app OOM-killed when the usage rises too high, and then restart it
[07:02:21] <XMPPwocky> if your app starts reasonably fast, that's pretty much equivalent to GC
[07:02:26] <nathan7> XMPPwocky: ikr
[07:02:28] <oakwhiz> nathan7: memory leaks are just there to steal your nines of availability
[07:02:38] <nathan7> oakwhiz: my nines do not rely on any single process
[07:03:12] *** Joins: jonalme__ (jonalmeida@moz-5j8.kvb.131.104.IP)
[07:03:16] <doomrobo> oakwhiz, we've got a distributed sqlite database (don't ask) with transaction logs
[07:03:28] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[07:03:30] <nathan7> oakwhiz: things could crash every other request and I'd be fairly fine
[07:03:33] *** Quits: jonalmeida (jonalmeida@moz-5j8.kvb.131.104.IP) (Connection closed)
[07:03:37] <oakwhiz> doomrobo: you bolted replication onto sqlite?
[07:03:45] <doomrobo> if the process is interrupted, it should be able to restart and get up to date without issue
[07:03:49] <nathan7> oakwhiz: it'd get expensive, but whatever
[07:03:55] <nathan7> doomrobo: define 'interrupted'
[07:04:03] <doomrobo> oakwhiz, I didn't, but someone else did. it seems to work quite well
[07:04:25] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[07:04:26] <nathan7> doomrobo: because 'interrupted' means 'plug is pulled, discaring disk writes'
[07:04:34] <nathan7> *discarding
[07:04:45] <doomrobo> nathan7, process crashes mid-operation. transactions are atomic with sqlite so we might lose some data not committed but it won't corrupt anything
[07:05:01] <doomrobo> even assume plug being pulled, same thing
[07:05:05] <nathan7> doomrobo: that should be fine, if your filesystem is sane
[07:05:22] <nathan7> (*cough*anything but ZFS*cough*)
[07:05:26] <oakwhiz> lol
[07:05:35] <doomrobo> idk what AWS uses
[07:05:54] <nathan7> ext4 and the horribleness that is EBS
[07:05:55] <oakwhiz> doomrobo: AWS just provides raw block storage
[07:06:02] <oakwhiz> you can use ZFS on AWS
[07:06:05] <doomrobo> o damn. Do we have a real std::io yet or are we still using old_io?
[07:06:05] <oakwhiz> its just weird
[07:06:07] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[07:06:13] <nathan7> oakwhiz: it's on my todo list
[07:06:24] <cmr> doomrobo: I've ported all my stuff to std::io with success.
[07:06:38] <nathan7> I ought to port some of my stuff to std::io
[07:06:41] <doomrobo> ok, I think I'm going to do that then
[07:06:42] <nathan7> otoh it is 3AM
[07:06:43] *** Quits: jonalmei_ (jonalmeida@moz-ruqfvo.home.cgocable.net) (Ping timeout: 121 seconds)
[07:06:46] <Dabo> doomrobo, std::io is real now!
[07:06:54] <Dabo> and like has a ton of mostly finished everything
[07:06:56] <oakwhiz> nathan7: one of the nice things is that you can better tolerate the loss of an EBS volume and you can mirror across availability zones
[07:06:58] <doomrobo> nathan7, that's a pro
[07:07:19] <oakwhiz> I played around with it for like 2 hours
[07:07:54] *** Quits: kikada (kikada@moz-fc6el8.bb.dnainternet.fi) (Ping timeout: 121 seconds)
[07:08:10] <oakwhiz> also zfs snapshots + send streams are great
[07:08:39] <nathan7> I have moved servers across continents with seconds of downtime using snapshots and send streams
[07:08:48] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[07:09:34] <nathan7> (and hey, rolling-release distros like Arch aren't all that bad given rollbacks)
[07:10:07] <oakwhiz> my #1 pet peeve is that you can't shrink a ZFS zpool because nobody has invented the block pointer rewrite yet
[07:10:13] <Ke> I don't think I have ever used a full rollback, while I have the capability to do so
[07:10:29] *** Joins: loyd (loyd@moz-uft.32f.108.213.IP)
[07:10:57] <oakwhiz> also ZFS gets slightly fragmented under certain edge cases, with no way to defragment besides copying out and back in
[07:10:59] <Ke> oakwhiz: there are a lot of unimplemented invented things everywhere
[07:11:26] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[07:11:36] *** Joins: Rym (y@moz-cfe.mso.205.31.IP)
[07:11:45] <oakwhiz> does sqlite support writing to a raw block device?
[07:11:49] <Ke> eg. someone has invented language documentation, where the main tutorial does not refer to something that has old_ -prefix ;o)
[07:12:04] <Ke> oakwhiz: it supports custom vfs api
[07:12:05] *** Quits: pieter (Mibbit@moz-7bjs3j.ftth.telfortglasvezel.nl) (Quit: http://www.mibbit.com ajax IRC Client)
[07:12:25] <nathan7> oakwhiz: it's unfortunate, yeah
[07:12:37] <nathan7> oakwhiz: but my arrays tend to grow anyway
[07:12:47] <Ke> oakwhiz: so yes, but it's not trivial to say how elegant that is
[07:12:50] <doomrobo> GOD DAMMIT. I think this project is defunct. The build script is now outdated and there's no chance in hell they're gonna merge my PR
[07:12:54] <nathan7> oakwhiz: and the same goes for my laptop's disk
[07:12:57] *** Joins: mindtree (Mitch@moz-dnv.4j6.134.203.IP)
[07:13:01] <nathan7> oakwhiz: (well, SSD)
[07:13:01] *** Quits: fyolnish (fyolnish@moz-a8g1kl.au-net.ne.jp) (Connection closed)
[07:13:24] *** Joins: fyolnish (fyolnish@moz-a8g1kl.au-net.ne.jp)
[07:13:42] <nathan7> oakwhiz: so basically those things aren't implemented because nobody needs them badly enough
[07:14:21] <oakwhiz> nathan7: Yeah that's why I make my zpools raid 10
[07:14:45] <oakwhiz> So that I can split the pool in half in case of emergency
[07:14:48] <nathan7> oakwhiz: err, that's mirror+stripe?
[07:14:50] *** darkowlzz is now known as darkowlzz|afk
[07:15:01] <oakwhiz> yeah mirror of stripe
[07:15:07] <nathan7> oakwhiz: mhm
[07:15:13] *** Joins: kikada (kikada@moz-fc6el8.bb.dnainternet.fi)
[07:15:45] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[07:16:10] *** Quits: Rym (y@moz-cfe.mso.205.31.IP) (Ping timeout: 121 seconds)
[07:16:20] *** Joins: pieter (Mibbit@moz-7bjs3j.ftth.telfortglasvezel.nl)
[07:17:39] *** Quits: freefall (ff@moz-i4n.nhl.10.176.IP) (Ping timeout: 121 seconds)
[07:17:49] *** Quits: starless (starless@moz-u9gmm1.res.rr.com) (Quit: Leaving)
[07:17:55] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[07:18:11] *** Quits: kgrandon (Adium@moz-6m3528.ca.comcast.net) (Quit: Leaving.)
[07:18:57] *** Quits: v21 (vee@moz-sa3oki.asianet.co.th) (Ping timeout: 121 seconds)
[07:19:09] *** Quits: Guest__ (textual@moz-jcu.4a3.146.125.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[07:19:11] *** Joins: freefall (ff@moz-dt7vmg.tor.ninja)
[07:19:16] <pieter> I have a borrowed struct with a Vec field and I want to iterate over the values of the Vec, borrowing them. How do I formulate the for to get this behavior. Code looks something like http://pastebin.com/H3Hx6psd. The error message in the example is that I cannot move out of a borrowed context.
[07:19:20] *** Joins: tan (tan@moz-rrp3h1.fios.verizon.net)
[07:19:48] <eddyb_> &vec instead of vec
[07:19:51] <XMPPwocky> pieter: in for item &a.items
[07:19:53] <XMPPwocky> ack
[07:20:01] <XMPPwocky> pieter: for item in &a.items
[07:20:17] <doomrobo> wait what happened to .iter()?
[07:20:41] <pieter> Thanks. I though I had all permutations, except for that one apparently :).
[07:21:10] <pieter> doomrobo: Don't know; this just works. Haven't I seen an RFC for this in rust weekly?
[07:21:26] *** Quits: fyolnish (fyolnish@moz-a8g1kl.au-net.ne.jp) (Ping timeout: 121 seconds)
[07:21:38] *** Quits: vairav (vairav@moz-qtc2tv.ca.comcast.net) (Client exited)
[07:22:27] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[07:23:07] *** Joins: lenstr (lenstr@moz-2e7.vju.25.171.IP)
[07:23:14] *** Joins: Guest__ (textual@moz-jcu.4a3.146.125.IP)
[07:23:34] *** Quits: tan (tan@moz-rrp3h1.fios.verizon.net) (Ping timeout: 121 seconds)
[07:23:44] *** Quits: lenstr (lenstr@moz-2e7.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[07:23:58] *** Joins: lenstr (lenstr@moz-2e7.vju.25.171.IP)
[07:24:58] *** Quits: lenstr (lenstr@moz-2e7.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[07:25:01] *** Joins: pudgetta (Mibbit@moz-dmc.ucr.21.103.IP)
[07:25:05] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[07:25:32] *** nsm is now known as nsm|away
[07:25:35] *** Parts: pudgetta (Mibbit@moz-dmc.ucr.21.103.IP) ()
[07:27:15] <theme> doomrobo, there's IntoIterator
[07:27:19] <theme> pieter, ^
[07:28:27] <theme> https://github.com/rust-lang/rfcs/blob/master/text/0235-collections-conventions.md#intoiterator-and-iterable
[07:29:25] <doomrobo> when was IntoInterator added to Rust?
[07:29:38] <theme> doomrobo, https://github.com/rust-lang/rust/pull/20790
[07:29:46] <theme> January 31
[07:30:18] <doomrobo> wow, I thought it was more recent. Also the wording here makes it seem like HKT is an inevitability. Is that so?
[07:30:26] <theme> doomrobo, I guess
[07:30:41] <theme> btw I have an unrelated problem with my code
[07:30:43] <theme> What is "error: constant contains unimplemented expression type [E0019]"?
[07:30:49] *** Joins: james4k (james@moz-ojv7g2.consolidated.net)
[07:31:02] <doomrobo> paste?
[07:31:19] <theme> It's quite a huge macro here
[07:31:20] *** Joins: Draco (chatzilla@moz-7bfjq5.res.rr.com)
[07:31:43] * doomrobo raises hands in preemptive resignation
[07:32:20] <XMPPwocky> constant contains something that shouldn't be in a constant, iirc
[07:32:23] <XMPPwocky> maybe a range?
[07:33:11] <XMPPwocky> yes, a range could cause that
[07:33:23] <theme> XMPPwocky, I see a `&'static str` here
[07:33:23] <XMPPwocky> rusti: const x: std::ops::Range<i32> = 0..4;
[07:33:24] -playbot- <anon>:14:41: 14:46 error: constant contains unimplemented expression type [E0019]
[07:33:24] -playbot- <anon>:14         const x: std::ops::Range<i32> = 0..4;
[07:33:24] -playbot- output truncated; full output at: http://bit.ly/19cInFr
[07:33:36] <theme> lemme reduce the test case
[07:34:53] *** Quits: james4k (james@moz-ojv7g2.consolidated.net) (Ping timeout: 121 seconds)
[07:35:34] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[07:37:33] *** Joins: daschl (Adium@moz-oirn1i.vie.surfer.at)
[07:37:56] <doomrobo> XMPPwocky, why can't that be const?
[07:38:19] *** Quits: summerlight_ (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[07:38:19] <XMPPwocky> doomrobo: it says "unimplemented", so i'd assume it's just not implemented yet
[07:38:19] <nathan7> doomrobo: because it is unimplemented
[07:38:20] <XMPPwocky> no clue
[07:39:01] <doomrobo> as long as it's somewhere in the pipeline :P
[07:39:01] <nathan7> doomrobo: you could write std::ops::Range { start: â€¦, end: â€¦ } and it'd be fine
[07:39:34] <doomrobo> Has constexpr been suggested for Rust?
[07:39:40] <XMPPwocky> many times
[07:39:42] *** Quits: hoony1 (Thunderbird@moz-egf.8vi.223.175.IP) (Client exited)
[07:40:06] <XMPPwocky> it's up there with HKT in the list of "things neglected to get 1.0 out the door this decade"
[07:40:13] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[07:40:52] <XMPPwocky> i think rust could stand to learn a lot from nim there, when rust gets around to reevaluating constexpr, ctfe, etc.
[07:41:00] <doomrobo> fine by me. Adding those two features would probably not break anything, so whatever version they're implemented in will still be backwards compatible
[07:41:07] <theme> Ok... I've figured out now what caused that error
[07:41:18] <doomrobo> ctfe?
[07:41:28] <nathan7> compile time function evaluation
[07:41:36] <theme> I was trying to do something like `foo.to_string()`
[07:41:40] <theme> and assign that to a constant
[07:43:19] <doomrobo> XMPPwocky, is Nim at all practical for someone already fluent in Python?
[07:43:38] *** Joins: rootnode (rootnode@moz-go1ut4.ip1.george24.com)
[07:44:40] <XMPPwocky> no clue, haven't used it myself
[07:45:23] <doomrobo> I only learned of ctfe from D's constexpr
[07:45:26] <theme> doomrobo, you are supposed to ask that on a num IRC channel, I guess
[07:45:42] <theme> doomrobo, C++ now has constexpr IIRC
[07:45:56] <theme> s/num/nim/
[07:48:39] *** Quits: psy (psy@moz-ous.ntd.6.103.IP) (Ping timeout: 121 seconds)
[07:48:54] *** Joins: flacko (chatzilla@moz-252.vp3.60.78.IP)
[07:48:57] <doomrobo> eh, the question was just on a whim. I'm currently fed up with the horribly frustrating lack of typing (and having to run through every branch of code to make sure I don't get runtime errors), and the lack of macros in Python. I don't see why pocoo is lauded when they've created impressively opaque frameworks for ORM and HTTP /rant
[07:49:15] <flacko> How do I write arbitrary float in a void buffer in an unsafe context?
[07:49:18] <doomrobo> and yes, C++ does support constexpr since C++11
[07:49:48] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[07:50:03] <theme> flacko, please clarify "void buffer"
[07:50:19] <flacko> theme, arbitrary memory, like in c
[07:50:30] <theme> flacko, raw pointer?
[07:50:39] <flacko> Yeah, in opengl specifically
[07:51:02] <doomrobo> http://doc.rust-lang.org/std/ptr/fn.copy_memory.html ?
[07:51:13] <theme> flacko, I think there are some opengl crates on cargo.io
[07:51:20] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[07:51:37] *** Quits: daschl (Adium@moz-oirn1i.vie.surfer.at) (Quit: Leaving.)
[07:51:46] <flacko> I'm using gl rs, these are unsafe bindings and I want to learn openGL api itself so I don't want to use high level stuff
[07:52:00] <theme> well...
[07:52:26] <theme> flacko, http://doc.rust-lang.org/std/ptr/index.html#functions
[07:52:32] <theme> it's supposed to be copy()
[07:52:36] <theme> but rustdoc has some bugs
[07:52:39] <doomrobo> flacko, could you convert the float into a pointer and then use std::prt::copy_memory?
[07:52:49] <doomrobo> *ptr
[07:52:50] <theme> flacko, wait.. no
[07:53:08] <theme> flacko, `unsafe { *raw_ptr = x; }`
[07:53:13] <flacko> Well yeah, I'll probably convert float to a pointer before I do what
[07:53:32] <flacko> You mean just like that, no casts and it will work (assuming x is f32)?
[07:53:35] *** Joins: dfinninger (dfinninger@moz-6a9v7n.res.rr.com)
[07:53:44] <theme> flacko, `unsafe { *raw_ptr = x; }`
[07:53:50] <theme> flacko, that should do in most cases
[07:53:57] <flacko> Ok I'll try that
[07:54:11] <theme> if `raw_ptr` is `*mut f32` or `*mut f64`
[07:54:13] *** Joins: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net)
[07:54:30] <flacko> Well, raw_ptr is *void
[07:54:52] <theme> flacko, you gotta do `raw_ptr as *f64` or something, I guess
[07:55:19] <flacko> Yeah, I guess I could cast *void pointer to float pointer
[07:55:22] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Ping timeout: 121 seconds)
[07:55:39] *** Joins: kaksmet (kaksmet@moz-ismsth.se.alltele.net)
[07:55:40] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[07:56:56] *** Joins: dawehner (quassel@moz-iprcgi.dip0.t-ipconnect.de)
[07:57:37] *** Quits: dfinninger (dfinninger@moz-6a9v7n.res.rr.com) (Ping timeout: 121 seconds)
[07:57:38] *** Quits: rossm (ross@moz-pnc4od.as13285.net) (Ping timeout: 121 seconds)
[07:57:51] *** Joins: rossm (ross@moz-pnc4od.as13285.net)
[08:01:02] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[08:01:42] <doomrobo> theme, how do I get a raw pointer? I tried x: *f32 = &10 but it's a mismatched type
[08:01:56] *** Joins: Eonil (Eonil@moz-ia6.6ut.1.27.IP)
[08:01:56] <Mutabah> doomrobo: THe right needs to be a f32
[08:02:06] <Mutabah> (that'd coerce to a i32 iirc)
[08:02:10] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[08:02:14] <theme> doomrobo, note that doing that would cause a dangling pointer
[08:02:16] <doomrobo> even so it doesn't work
[08:02:23] <doomrobo> it's in unsafe{}
[08:02:24] *** Quits: pieter (Mibbit@moz-7bjs3j.ftth.telfortglasvezel.nl) (Quit: http://www.mibbit.com ajax IRC Client)
[08:02:26] <Mutabah> theme: Actually, it'd be a local static iirc?
[08:02:30] <theme> doomrobo, you don't need unsafe
[08:02:42] <Mutabah> playbot: let x: *const f32 = &10.0f32;
[08:02:44] -playbot- ()
[08:02:44] <doomrobo> here's the code http://is.gd/Dyngdk
[08:02:51] <theme> doomrobo, *f32 is invalid syntax
[08:02:59] <theme> there are "*const T" and "*mut T"
[08:03:03] <theme> which is a bit weird
[08:03:26] <theme> doomrobo, you need &mut a
[08:03:54] *** Joins: coxg (sazzer@moz-1hq.kh5.32.217.IP)
[08:04:01] <theme> doomrobo, http://is.gd/TrAq4E
[08:04:05] <theme> plus a crash -_-
[08:04:22] *** Quits: tamird (textual@moz-5v5pe2.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[08:04:27] *** Quits: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net) (Ping timeout: 121 seconds)
[08:04:32] <theme> note that it is `copy` not `copy_memory`
[08:05:02] <theme> doomrobo, this also works: http://is.gd/Uy1fa0
[08:05:06] <theme> not sure why it crashes
[08:05:10] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[08:05:25] <theme> doomrobo, the third argument of copy is in bytes O_o
[08:05:27] <theme> not bits
[08:05:49] <theme> wait, no
[08:05:56] <theme> http://is.gd/WHeAqm
[08:06:25] <theme> doomrobo, this is simpler http://is.gd/ODjWxy
[08:07:01] *** Joins: jaen (jaen@moz-ifmik2.copit.pl)
[08:07:06] *** Joins: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net)
[08:08:06] *** Quits: coxg (sazzer@moz-1hq.kh5.32.217.IP) (Ping timeout: 121 seconds)
[08:08:13] <doomrobo> right, I explicitly wanted to use copy for the case that flacko posed
[08:08:19] *** Quits: dinfuehr (dinfuehr@moz-jrmm4j.highway.telekom.at) (Connection closed)
[08:08:45] <doomrobo> flacko, this is the closest to your case I could come up with http://is.gd/r92D7Y
[08:09:05] <flacko> Btw, while we're at it how do I index raw f32 array? Compiler complains I index pointer like fPtr[7] and so on
[08:09:12] <doomrobo> also look at theme's for a more elegant solution if it applies
[08:09:59] <flacko> doomrobo, I don't want to make another buffer and copy everything from that, I'm writing directly from structure
[08:10:05] <theme> flacko, fPtr + 7
[08:10:08] <theme> I think
[08:10:13] <flacko> Oh, that makes sense lol
[08:10:23] *** Quits: alex (alex@moz-jcq.m3b.242.157.IP) (Ping timeout: 121 seconds)
[08:11:27] <doomrobo> yeah, std::raw::Slice doesn't implement anything except for Copy. So it would be something like slice.data+7
[08:11:49] <flacko> I tried *(flPtr + iter) where iter is usize but doesn't work "binary operation `+` cannot be applied to type `*mut f32`"
[08:12:23] *** Joins: Rym (y@moz-cfe.mso.205.31.IP)
[08:12:23] <doomrobo> flacko, what about flPtr.offset(7)
[08:12:47] *** Joins: giucam (giucam@moz-iv0nnc.bb.dnainternet.fi)
[08:13:47] <flacko> doomrobo, It requires isize instead of usize but now I'm golden, thanks
[08:14:36] <doomrobo> flacko, yeah. isize because if you do flPtr.offset(-7) it'll go back 7 elements
[08:14:48] <flacko> Yeah that makes sense
[08:16:54] <doomrobo> holy crap it's past 4AM. I'm going to bed
[08:16:57] *** Quits: Rym (y@moz-cfe.mso.205.31.IP) (Ping timeout: 121 seconds)
[08:16:58] <doomrobo> gn everyone!
[08:17:07] <flacko> bye
[08:17:10] *** Quits: doomrobo (doomrobo@moz-tj2e6v.261j.6edk.2000.2604.IP) (Quit: what have I done)
[08:17:21] *** Joins: Sindriava (textual@moz-ca79jq.broadband10.iol.cz)
[08:17:42] <Sindriava> o/
[08:18:54] *** Joins: fyolnish (fyolnish@moz-fajhu6.au-net.ne.jp)
[08:20:05] *** Joins: tan (tan@moz-rrp3h1.fios.verizon.net)
[08:21:25] *** Quits: loyd (loyd@moz-uft.32f.108.213.IP) (Ping timeout: 121 seconds)
[08:22:51] *** Joins: jviereck (Adium@moz-10jkar.dclient.hispeed.ch)
[08:24:31] *** Quits: tan (tan@moz-rrp3h1.fios.verizon.net) (Ping timeout: 121 seconds)
[08:25:05] *** Joins: e_svedang (e_svedang@moz-p1r4ve.bredband.comhem.se)
[08:25:27] *** Joins: lenstr (lenstr@moz-2e7.vju.25.171.IP)
[08:26:05] *** Quits: lenstr (lenstr@moz-2e7.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[08:26:20] *** Joins: lenstr (lenstr@moz-2e7.vju.25.171.IP)
[08:26:54] *** Quits: DemonOne (Avi@moz-hlioc0.cablep.bezeqint.net) (Ping timeout: 121 seconds)
[08:27:01] *** Quits: fyolnish (fyolnish@moz-fajhu6.au-net.ne.jp) (Ping timeout: 121 seconds)
[08:27:16] *** Quits: lenstr (lenstr@moz-2e7.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[08:28:26] *** Quits: flacko (chatzilla@moz-252.vp3.60.78.IP) (Quit: ChatZilla 0.9.91.1 [Firefox 36.0.1/20150306140254])
[08:28:31] *** Joins: cakecatz (cakecatz@moz-2r5hfh.sannet.ne.jp)
[08:29:16] *** Quits: mindtree (Mitch@moz-dnv.4j6.134.203.IP) (Ping timeout: 121 seconds)
[08:30:41] *** Joins: mindtree (Mitch@moz-mdthv2.iprimus.net.au)
[08:30:57] *** Joins: kmicu (kmicu@moz-uga.edn.218.91.IP)
[08:32:15] *** Joins: zettablade (Mibbit@moz-58u.jiv.125.50.IP)
[08:33:48] *** Joins: negge (nathan@moz-p79l68.fios.verizon.net)
[08:36:19] *** Quits: mnemnion (mnemnion@moz-e8rfii.ca.comcast.net) (Connection closed)
[08:36:34] *** Quits: negge_ (nathan@moz-p79l68.fios.verizon.net) (Ping timeout: 121 seconds)
[08:36:45] *** Joins: dinfuehr (dinfuehr@moz-jrmm4j.highway.telekom.at)
[08:37:17] *** Joins: tamird (textual@moz-5v5pe2.ca.comcast.net)
[08:40:35] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[08:41:05] *** Quits: eddyb_ (eddyb@moz-6k1.q07.26.188.IP) (Ping timeout: 121 seconds)
[08:41:21] *** Quits: tamird (textual@moz-5v5pe2.ca.comcast.net) (Ping timeout: 121 seconds)
[08:41:21] *** Quits: Sindriava (textual@moz-ca79jq.broadband10.iol.cz) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[08:41:23] *** Joins: sillesta (sillesta@moz-501od2.business.telia.com)
[08:42:22] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Quit: leaving)
[08:45:24] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[08:47:45] *** Joins: flacko (chatzilla@moz-252.vp3.60.78.IP)
[08:47:56] <flacko> How do I add destructor to any struct?
[08:50:32] <Mutabah> flacko: Implement the 'Drop' trait
[08:50:40] <flacko> Oh ok
[08:51:23] *** Joins: loyd (loyd@moz-uft.32f.108.213.IP)
[08:52:14] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[08:52:40] *** Quits: Guest__ (textual@moz-jcu.4a3.146.125.IP) (Connection closed)
[08:53:36] *** Quits: cptroot (Mibbit@moz-n169l8.caltech.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[08:53:56] *** Joins: thesnowdog (doug@moz-g88.8fa.181.180.IP)
[08:56:19] *** Quits: MichaelGG (MichaelGG@moz-tlq.rcd.209.181.IP) (Ping timeout: 121 seconds)
[08:56:54] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[08:56:58] *** Quits: larhat1 (Adium@moz-9vj.vcf.204.37.IP) (Quit: Leaving.)
[08:57:13] *** Joins: acgtyrant (acgtyrant@moz-3kd.b79.160.124.IP)
[08:57:23] *** Joins: reem (reem@moz-3s1lie.coob.q2h1.0009.2601.IP)
[08:57:48] *** Quits: nrc (nrc@moz-4bhi2i.xtra.co.nz) (Ping timeout: 121 seconds)
[08:59:07] *** Joins: MichaelGG (MichaelGG@moz-n04.1bq.148.190.IP)
[09:01:47] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[09:03:57] *** Quits: Eonil (Eonil@moz-ia6.6ut.1.27.IP) (Quit: This computer has gone to sleep)
[09:04:44] *** Joins: twipeD (wipeD@moz-jjdg2c.dip0.t-ipconnect.de)
[09:04:54] *** Joins: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk)
[09:07:24] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[09:07:56] *** Joins: Ms2ger (Ms2ger@moz-bh431q.isp.belgacom.be)
[09:08:48] *** Joins: iopq\ (Mibbit@moz-uuic7b.ca.comcast.net)
[09:08:58] *** Quits: dawehner (quassel@moz-iprcgi.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[09:09:46] *** Quits: dinfuehr (dinfuehr@moz-jrmm4j.highway.telekom.at) (Connection closed)
[09:10:06] *** Quits: tristanseifert (tristanseif@moz-0jr2nc.83ld.imo9.6000.2605.IP) (Ping timeout: 121 seconds)
[09:10:42] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[09:11:45] *** Joins: io2 (io2@moz-9i9j3a.home.otenet.gr)
[09:12:04] *** Joins: laparca (laparca@moz-umd7qm.dynamicIP.rima-tde.net)
[09:12:26] *** Joins: Guest40 (textual@moz-5bku1g.chello.nl)
[09:13:09] *** Joins: Rym (y@moz-cfe.mso.205.31.IP)
[09:13:20] *** Quits: theme (theme@moz-i3mhhb.asianet.co.th) (Quit: Leaving)
[09:14:38] *** Joins: nrc (nrc@moz-4bhi2i.xtra.co.nz)
[09:14:38] *** ChanServ sets mode: +o nrc
[09:15:30] *** Joins: dawehner (quassel@moz-cakn0n.dip0.t-ipconnect.de)
[09:17:16] *** Joins: DemonOne (Avi@moz-9uo45a.red.bezeqint.net)
[09:17:22] *** Quits: DemonOne (Avi@moz-9uo45a.red.bezeqint.net) (Connection closed)
[09:17:43] *** Quits: Rym (y@moz-cfe.mso.205.31.IP) (Ping timeout: 121 seconds)
[09:18:12] *** Joins: xificurC (xificurC@moz-3u7gmd.chello.sk)
[09:19:00] *** Joins: daschl (Adium@moz-oirn1i.vie.surfer.at)
[09:19:17] *** Quits: Guest40 (textual@moz-5bku1g.chello.nl) (Quit: Textual IRC Client: www.textualapp.com)
[09:20:15] *** Quits: Shackra (Jorge@moz-7bh.ng6.177.186.IP) (Ping timeout: 121 seconds)
[09:21:16] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Connection closed)
[09:21:34] *** Quits: daschl (Adium@moz-oirn1i.vie.surfer.at) (Quit: Leaving.)
[09:21:37] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[09:24:29] *** Joins: fyolnish (fyolnish@moz-fajhu6.au-net.ne.jp)
[09:25:39] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Ping timeout: 121 seconds)
[09:27:42] *** Joins: lenstr (lenstr@moz-2e7.vju.25.171.IP)
[09:28:02] *** Quits: jxv (jxv___@moz-pi22qa.ca.charter.com) (Quit: Leaving)
[09:28:22] *** Quits: lenstr (lenstr@moz-2e7.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[09:28:29] *** Joins: lenstr (lenstr@moz-2e7.vju.25.171.IP)
[09:29:35] *** Quits: lenstr (lenstr@moz-2e7.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[09:29:40] *** Joins: SneakySnake (nya@moz-i9is4u.pool.telekom.hu)
[09:31:32] *** Quits: fyolnish (fyolnish@moz-fajhu6.au-net.ne.jp) (Ping timeout: 121 seconds)
[09:31:43] <bvssvni> whatâ€™s the difference between `const` and `static`?
[09:32:50] <bvssvni> I had the impression that `const` copies to wherever it is used, while `static` creates one instance which you can point to
[09:32:50] <huon> static is a single memory location, const is just a value
[09:32:56] <huon> yes
[09:32:59] *** Joins: kakefabrikken (Mibbit@moz-9m21i0.studby.ntnu.no)
[09:33:47] *** Joins: Sindriava (textual@moz-ca79jq.broadband10.iol.cz)
[09:34:13] <bvssvni> but, when using `const FOO: &â€™static str = â€¦`
[09:34:49] <bvssvni> https://github.com/PistonDevelopers/opengl_graphics/pull/150#discussion_r26901237
[09:35:30] <huon> &'static str is a pointer
[09:35:43] <bvssvni> so only the pointer gets copied?
[09:36:15] *** Joins: tan (tan@moz-rrp3h1.fios.verizon.net)
[09:37:03] <huon> yes
[09:37:14] <bvssvni> how does the compiler know this? because it is part of a const expression?
[09:37:30] <huon> know which part?
[09:37:34] <huon> that only the pointer gets copied?
[09:37:42] <bvssvni> when to allocate something static
[09:37:53] <huon> a string literal is always in static memroy
[09:37:55] *** Joins: dinfuehr (dinfuehr@moz-jrmm4j.highway.telekom.at)
[09:38:01] *** Joins: areski (areski@moz-tijh72.user.ono.com)
[09:39:03] <bvssvni> huon: ok, I get it!
[09:39:11] *** Quits: nrc (nrc@moz-4bhi2i.xtra.co.nz) (Ping timeout: 121 seconds)
[09:40:55] *** Quits: jviereck (Adium@moz-10jkar.dclient.hispeed.ch) (Quit: Leaving.)
[09:42:25] <Sindriava> How can I return a fn from a function?
[09:42:42] <Mutabah> Sindriava: use a fn type as the return?
[09:42:50] <Mutabah> Sindriava: "-> fn(u32,u32)->u32
[09:43:04] <huon> Sindriava: is it a closure, or just a plain function pointer?
[09:43:04] <Sindriava> And How do I define it inside?
[09:43:41] <Mutabah> Sindriava: use the function name?
[09:43:50] <Sindriava> Mutabah: -.-
[09:43:57] <Sindriava> Mutabah: I meant anonymously
[09:44:11] <Sindriava> huon: Should be a function pointer. I want to take a function (specifically one from std::ops) and return a function that reduces a Vec with the operation
[09:44:17] <Mutabah> Sindriava: Do you mean a function, or a closure?
[09:44:23] <Sindriava> ^
[09:44:37] <huon> Sindriava: could we see the code? (or a sketch?)
[09:44:39] <scott> playbot: fn foo() -> fn(i32) -> i32 { fn inc(x: i32) -> i32 { x + 1 }; inc }; foo()(41)
[09:44:40] -playbot- 42
[09:45:05] <Sindriava> Ohâ€¦ I just tried to return "fn(â€¦) â†’ â€¦ { â€¦ }"
[09:45:19] <Sindriava> huon: Sure, but let me first try what scott suggests
[09:45:41] *** Joins: lenstr (lenstr@moz-2e7.vju.25.171.IP)
[09:46:02] <scott> there's no syntax for fns without names, I believe
[09:46:10] <Sindriava> aaah
[09:46:39] *** Quits: dougxxx (dougxxx@moz-59l9bi.iinet.net.au) (Quit: )
[09:47:43] <Sindriava> what's the type signature of std::ops::Add::add?
[09:48:00] <Sindriava> e.g. I can't use _ in the function definition
[09:48:05] <bvssvni> Sindriava: try `let foo: () = Add::add;` and the compiler will tell you
[09:48:26] <Sindriava> playbot: let foo: () = std::ops::Add::add;
[09:48:27] -playbot- <anon>:14:23: 14:41 error: mismatched types:
[09:48:27] -playbot-  expected `()`,
[09:48:27] -playbot- output truncated; full output at: http://bit.ly/1HiM1ZS
[09:48:53] <Sindriava> My point exactly
[09:48:58] <bvssvni> haha
[09:48:58] <Sindriava> the type is reported as "fn(_, _) -> _"
[09:49:10] *** Quits: iskatu (iskatu@moz-ft041k.dip0.t-ipconnect.de) (Quit: Bye)
[09:49:11] <Sindriava> but I can't use that as a generic
[09:49:25] <Mutabah> Sindriava: You can do fn(A,B)->C and pass generics?
[09:49:30] <Sindriava> Can I just specify it to the type I'm using?
[09:49:49] <bvssvni> `Add::<A, Rhs = B>`?
[09:49:50] <scott> you have to specify the type you want or make your surrounding function generic too (and use the generic parameter on std::ops::Add::add inside)
[09:49:54] *** Joins: iskatu (iskatu@moz-5gvv4e.dip0.t-ipconnect.de)
[09:50:08] <Sindriava> I see
[09:50:24] <Sindriava> one more thing, I can't use fn in a where clause, should I use FnOnce or Fn?
[09:50:39] <scott> fn is a type, Fn/FnMut/FnOnce are traits
[09:51:11] *** Joins: errordeveloper (ilya@moz-g0i.mtf.125.2.IP)
[09:51:30] *** Joins: nwin (textual@moz-5b4ua6.pools.vodafone-ip.de)
[09:51:53] <Sindriava> ah
[09:51:58] <Sindriava> I'll just paste the code
[09:52:29] *** Joins: daschl (Adium@moz-oirn1i.vie.surfer.at)
[09:52:36] <Sindriava> http://is.gd/q8qbGF
[09:52:49] *** Joins: coxg (sazzer@moz-1hq.kh5.32.217.IP)
[09:53:21] <nwin> how would you implement a optimized small vector? does this look sensible? https://gist.github.com/nwin/2f926703e6e458da3146
[09:53:33] *** Joins: nielx (nielx@moz-qca.rvm.109.92.IP)
[09:54:10] *** Quits: dawehner (quassel@moz-cakn0n.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[09:54:12] <scott> Sindriava: you'll need to use closures, not fn types, since you want the returned function to use a variable from an enclosing scope (f, the argument)
[09:54:43] <Sindriava> hnnng
[09:54:52] <Sindriava> Most of my code is using fn now
[09:54:57] <Sindriava> (dies in a horrible death)
[09:55:20] <bluss> nwin: I don't think your destructor is correct
[09:55:21] <Sindriava> So what whould I use in my enum instead of "Function(fn(Vec<MalVal>) -> MalVal)" ?
[09:56:00] <scott> Sindriava: perhaps Function(Box<FnMut(Vec<MalVal>) -> MalVal>)
[09:56:23] <Sindriava> Why FnMut?
[09:56:26] <bluss> nwin: you don't need replace for the elements, just ptr::read. But to forget the array entirely, that's the hard part
[09:56:27] <nielx> I want to copy a struct (with #[repr(c)]) to a buffer (created with Vec::with_capacity). The object is a boxed. How to I transform it so that ptr:copy_memory will do what I want?
[09:56:55] <bluss> nwin: forget on a &mut ref doesn't do it. I suggest you overwrite the Small variant with a Big with an empty vec
[09:57:01] *** Quits: coxg (sazzer@moz-1hq.kh5.32.217.IP) (Ping timeout: 121 seconds)
[09:57:06] *** Quits: dinfuehr (dinfuehr@moz-jrmm4j.highway.telekom.at) (Connection closed)
[09:57:13] <scott> Sindriava: I didn't really think about it - use FnOnce if you can, FnMut if you can't, and Fn if you still can't :p
[09:57:15] <Ms2ger> Why Box?
[09:57:24] *** Joins: mib_ci13rc (Mibbit@moz-dmas1d.rev.sfr.net)
[09:57:39] <Sindriava> scott: :D Yeah, I think that FnOnce is the way to go, probably
[09:58:03] <scott> FnOnce is most restrictive on callers and least restrictive on the person writing the closure. Fn is the reverse
[09:58:24] *** Quits: mib_ci13rc (Mibbit@moz-dmas1d.rev.sfr.net) (Quit: http://www.mibbit.com ajax IRC Client)
[09:59:03] *** Joins: dinfuehr (dinfuehr@moz-jrmm4j.highway.telekom.at)
[09:59:13] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[09:59:16] <huon> Ms2ger: needed for an owned trait object
[09:59:25] <Sindriava> argh
[09:59:28] <Sindriava> he trait `core::marker::Sized` is not implemented for the type `core::ops::FnOnce...
[09:59:37] <huon> Sindriava: you need to Box
[09:59:47] *** Joins: pyon (suckmy@moz-kk3.2im.7.179.IP)
[09:59:49] <huon> although, FnOnce doesn't work usefully as a trait object yet
[09:59:50] <Sindriava> well
[09:59:50] *** Joins: negge_ (nathan@moz-p79l68.fios.verizon.net)
[09:59:52] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[09:59:52] <Sindriava> Function(Box<FnOnce(Vec<MalVal>) -> MalVal>),
[09:59:53] *** Quits: kakefabrikken (Mibbit@moz-9m21i0.studby.ntnu.no) (Quit: http://www.mibbit.com ajax IRC Client)
[09:59:59] <Sindriava> I'm deriving Clone, though
[10:00:07] *** Joins: RossJH (textual@moz-8vn4o2.range86-165.btcentralplus.com)
[10:00:21] <huon> oh, that's the problem
[10:00:25] <nwin> bluss, thx good point but otherwise it looks ok-ish? I will of course add tests ;)
[10:00:32] <bvssvni> nwin: interesting
[10:00:35] <huon> Sindriava: btw, you'll need to use http://doc.rust-lang.org/nightly/std/thunk/trait.Invoke.html instead of FnOnce
[10:00:48] <huon> (entirely a drop in replacement, just works in a trait object)
[10:00:50] <Mutabah> Huh... str is a compiler-provided type, right?
[10:01:17] <Sindriava> huon: So instead of fnâ€¦ I write Invokeâ€¦ ?
[10:01:53] <bluss> nwin: I'll have to question the use of uninitialized in general. Be sure to test this thing with elements that have destructors yourself and catch any double-free bugs
[10:02:32] *** Quits: negge (nathan@moz-p79l68.fios.verizon.net) (Ping timeout: 121 seconds)
[10:02:41] <huon> Sindriava: for a trait object. Instead of Box<FnOnce> write Box<Invoke>
[10:02:51] <Sindriava> Ah
[10:03:02] <huon> Sindriava: the Fn and FnMut traits work fine for trait objects (i.e. it's just FnOnce)
[10:03:09] <huon> Mutabah: yes
[10:03:22] *** Quits: daschl (Adium@moz-oirn1i.vie.surfer.at) (Quit: Leaving.)
[10:03:30] <nwin> bluss: The alternative would be to use [Option<T>; SIZE]â€¦ but then itâ€™s not a transparent replacement for Vec<T> any more
[10:03:32] *** Quits: garming (garming@moz-pqd1u2.xtra.co.nz) (Ping timeout: 121 seconds)
[10:03:33] <Mutabah> huon: Well, this makes my life a little harder (because it could VERY easily be a newtype around [u8])
[10:03:40] *** Joins: djcb (user@moz-8r0oht.elisa-laajakaista.fi)
[10:03:43] <huon> Sindriava: (closures and trait objects aren't usually clonable, btw, so #[derive(Clone)] fails)
[10:03:50] <huon> Mutabah: yeah, it was proposed
[10:03:56] <huon> Mutabah: ... but literals
[10:03:59] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[10:04:19] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[10:04:22] <Sindriava> (headbang)
[10:04:29] <Sindriava> I'll do it another way
[10:04:30] <bluss> nwin: using replace with uninit is a pessimization
[10:04:32] <huon> (at least, I think that was the reason it never really happened, not sure)
[10:04:37] <bluss> nwin: ptr::read is all you ned.
[10:04:50] <Mutabah> huon: Ah, right
[10:04:58] <Sindriava> I'll just write a macro, fuck it
[10:04:59] <Sindriava> :D
[10:05:06] <bluss> nwin: (or ptr::write)
[10:05:07] * Mutabah makes a magic '#' module for compiler-provided types
[10:05:46] <iopq\> what's a way to count the amount of times a condition is true while iterating over a slice?
[10:06:05] <Mutabah> iopq\: Using fold?
[10:06:08] <bluss> you have .filter() and .count()
[10:06:15] <Mutabah> or filter+count
[10:06:23] <iopq\> Mutabah, bluss what is faster
[10:06:37] <bluss> should be equivalent
[10:06:50] <bluss> .filter() + .count() sounds like the simplest way to write it
[10:07:00] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Client exited)
[10:07:10] *** Quits: e_svedang (e_svedang@moz-p1r4ve.bredband.comhem.se) (Client exited)
[10:07:19] *** Joins: e_svedang (e_svedang@moz-p1r4ve.bredband.comhem.se)
[10:07:25] <nwin> bluss yes thanks I updated the gist now Iâ€™ll add some testingâ€¦
[10:08:11] <Mutabah> iopq\: I would take a punt at fold being slightly faster, but filter+count is simpler
[10:08:27] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[10:08:28] *** Joins: v21 (vee@moz-sa3oki.asianet.co.th)
[10:11:20] *** Joins: hhhhhhhhhh (mike@moz-l54iib.as13285.net)
[10:11:33] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[10:11:39] *** Quits: ziad (ziad@moz-3kp.prd.136.50.IP) (Client exited)
[10:11:51] <Sindriava> can I capitalize an identifier in a macro?
[10:12:08] <iopq\> Mutabah: I wrote is as filter+count, but then I thought of a clever optimization with fold, so thank you both
[10:12:32] <Sindriava> e.g. I have "add" in $var and I want "std::ops::Add::add"
[10:12:47] <Sindriava> And I can't pass std::ops::Add::add into the macro, because it's not an ident
[10:13:57] *** Joins: Rym (y@moz-cfe.mso.205.31.IP)
[10:13:59] <scott> I think you can take path instead of ident in a macro
[10:14:06] <huon> Sindriava: can you take a `path` or an `expr` instead of an ident in this case?
[10:14:07] *** Joins: Matthias247 (Miranda@moz-49li60.hsi14.kabel-badenwuerttemberg.de)
[10:14:28] <Sindriava> huon: Yeah, I could add another parameter
[10:15:25] <Sindriava> hmmm
[10:15:25] <Sindriava> src/core.rs:7:21: 7:22 error: unexpected token: `<`
[10:15:26] <Sindriava> src/core.rs:7         fn $func(Vec<MalVal>) -> MalVal {
[10:15:31] *** Quits: laparca (laparca@moz-umd7qm.dynamicIP.rima-tde.net) (Quit: Leaving.)
[10:16:05] <Sindriava> Is that syntax illegal?
[10:16:58] *** Joins: dawehner (quassel@moz-eqebv9.customers.d1-online.com)
[10:17:19] <Sindriava> oh, derp
[10:17:22] <Sindriava> nevermind
[10:18:29] *** Quits: Rym (y@moz-cfe.mso.205.31.IP) (Ping timeout: 121 seconds)
[10:18:39] *** Joins: mahdi (mahdi@moz-p65.u27.244.151.IP)
[10:19:08] *** Quits: Romster (Romster@moz-4g83e8.rev.eftel.com) (Ping timeout: 121 seconds)
[10:19:27] *** Joins: Romster (Romster@moz-4g83e8.rev.eftel.com)
[10:19:56] <Mutabah> Sindriava: Not valid in that context
[10:21:48] *** Joins: {AS} (uid45026@moz-srvrrh.uxbridge.irccloud.com)
[10:21:58] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[10:23:30] *** Quits: dawehner (quassel@moz-eqebv9.customers.d1-online.com) (Ping timeout: 121 seconds)
[10:24:01] *** Quits: dinfuehr (dinfuehr@moz-jrmm4j.highway.telekom.at) (Connection closed)
[10:25:04] *** Joins: jasonrm (jasonrm@moz-s9i3ib.9iq5.ifqp.0470.2001.IP)
[10:26:00] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Ping timeout: 121 seconds)
[10:26:50] *** Quits: jasonrm (jasonrm@moz-s9i3ib.9iq5.ifqp.0470.2001.IP) (Quit: ZNC - http://znc.in)
[10:27:45] *** Joins: edlothiol (user@moz-n7m9to.unity-media.net)
[10:29:02] *** Joins: fyolnish (fyolnish@moz-fajhu6.au-net.ne.jp)
[10:29:14] *** Joins: nicoch (nicoch@moz-g02d7k.be)
[10:29:33] *** Quits: zettablade (Mibbit@moz-58u.jiv.125.50.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:31:43] *** Quits: mahdi (mahdi@moz-p65.u27.244.151.IP) (Quit: )
[10:31:53] *** Joins: mjboa (mike@moz-prg0pt.dip0.t-ipconnect.de)
[10:33:14] <iopq\> I have a [Foo; 4], how do I implement iter() on Foo?
[10:33:22] <iopq\> I just want it to use the array
[10:33:34] <iopq\> er, not on Foo, on Bar which contains the array
[10:34:51] *** Quits: v21 (vee@moz-sa3oki.asianet.co.th) (Ping timeout: 121 seconds)
[10:34:59] <bluss> use the slice iteratorrs
[10:35:18] <bvssvni> iopq\: (&bar).iter()
[10:35:28] *** Joins: bitonic (bitonic@moz-54bp3d.28-151.libero.it)
[10:35:33] <iopq\> bluss: I am confused because for another type I made a type Iter, is this necessary for this case?
[10:36:22] *** Quits: fyolnish (fyolnish@moz-fajhu6.au-net.ne.jp) (Ping timeout: 121 seconds)
[10:36:28] <bluss> for encapsulation reasons you might want to wrap it in a struct, but otherwise it's not necessary
[10:36:46] <bluss> it's much better to reuse the efficient slice iterator than trying to reimplement it
[10:37:35] *** Quits: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk) (Ping timeout: 121 seconds)
[10:38:02] <iopq\> bluss: what type does self.foo.iter() return because I'm trying to make the compiler give me the correct type but I'm not succeeding
[10:38:27] <bluss> it should be a std::slice::Iter<'a, T>
[10:38:57] <bluss> T=Foo in your case.
[10:39:37] *** Quits: SneakySnake (nya@moz-i9is4u.pool.telekom.hu) (Quit: Leaving)
[10:40:10] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[10:40:20] *** Joins: dawehner (quassel@moz-t22s4v.customers.d1-online.com)
[10:40:41] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[10:41:52] *** darkowlzz|afk is now known as darkowlzz
[10:42:48] *** Joins: ogham (rally@moz-pfgnao.cable.virginm.net)
[10:43:40] *** Quits: ogham (rally@moz-pfgnao.cable.virginm.net) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[10:44:27] *** Joins: hoony (Thunderbird@moz-q5r.8e9.96.183.IP)
[10:46:10] <huon> bvssvni: (the & should be unnecessary, fwiw)
[10:46:21] <bvssvni> huon: right
[10:47:31] <iopq\> bluss: any way to do this without lifetimes? I'd have to put a lifetime on everything now
[10:47:51] *** Joins: ogham (rally@moz-pfgnao.cable.virginm.net)
[10:48:23] <bluss> on everything?
[10:48:43] <bluss> you can only iterate a fixed size array with iterators that borrow it basically
[10:48:56] <bluss> so yes, your iterator needs a lifetime
[10:48:59] <iopq\> bluss: yes, it would propagate up to every method
[10:49:02] *** Joins: panicbit (panicbit@moz-gg7i2b.dip0.t-ipconnect.de)
[10:49:14] <iopq\> bluss: I could make an iterator that returns the value of Foo
[10:49:26] <bluss> then maybe you want a custom iterator yes
[10:52:06] *** Quits: mindtree (Mitch@moz-mdthv2.iprimus.net.au) (Ping timeout: 121 seconds)
[10:53:43] *** Joins: spider-mario (spidermario@moz-coblcf.fbx.proxad.net)
[10:54:09] *** Joins: mindtree (Mitch@moz-j73qc4.iprimus.net.au)
[10:54:16] *** Joins: peacememories (peace@moz-03ni57.dynamic.surfer.at)
[10:56:53] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[11:01:26] *** Joins: Nextra (Nextra@moz-23pjqj.osnanet.de)
[11:02:44] *** Joins: Lilly (Lilly@moz-ca683g.bredband.comhem.se)
[11:04:20] *** Joins: jviereck (Adium@moz-10jkar.dclient.hispeed.ch)
[11:05:06] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[11:05:33] *** darkowlzz is now known as darkowlzz|afk
[11:06:17] *** Quits: fmtq (fmtq@moz-d08itp.tpgi.com.au) (Ping timeout: 121 seconds)
[11:07:24] *** Joins: fmtq (fmtq@moz-d08itp.tpgi.com.au)
[11:08:26] *** Joins: james4k (james@moz-ojv7g2.consolidated.net)
[11:08:33] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[11:08:50] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[11:09:13] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[11:09:23] *** Quits: dawehner (quassel@moz-t22s4v.customers.d1-online.com) (Ping timeout: 121 seconds)
[11:09:38] *** Joins: ai (ai@moz-pqofrl.sunline.net.ua)
[11:10:26] *** Quits: Sindriava (textual@moz-ca79jq.broadband10.iol.cz) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[11:11:03] *** Quits: OmniMancer (OmniMancer@moz-6m1jrb.xtra.co.nz) (Quit: Leaving.)
[11:12:01] *** Joins: Altazimuth (Altazimuth@moz-q966ko.skybroadband.com)
[11:12:30] *** Quits: james4k (james@moz-ojv7g2.consolidated.net) (Ping timeout: 121 seconds)
[11:14:41] *** Joins: Rym (y@moz-cfe.mso.205.31.IP)
[11:15:39] *** Quits: sillesta (sillesta@moz-501od2.business.telia.com) (Ping timeout: 121 seconds)
[11:17:09] *** Joins: jonas_ (jonas@moz-06udlh.mpgs.lom5.0a60.2001.IP)
[11:19:13] *** Quits: Rym (y@moz-cfe.mso.205.31.IP) (Ping timeout: 121 seconds)
[11:19:17] *** Joins: dawehner (quassel@moz-t22s4v.customers.d1-online.com)
[11:20:51] <simias> I often encounter an architectural issue when I write rust code and I haven't found the right pattern to solve it:
[11:21:02] <simias> often I want to have struct A contain an instance of struct B
[11:21:13] <simias> and have struct B keep a reference to struct A
[11:21:36] <simias> well
[11:21:53] <simias> rather I want struct B to be able to access its parent struct one way or an other
[11:22:01] <simias> what's the most rust-y way to achieve that?
[11:22:42] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[11:22:52] <simias> in C I'd just pass pointers around but obviously that won't fly with the borrow/lifetime checker
[11:24:04] *** jonas_ is now known as jtepe
[11:24:16] *** Joins: akiss (akiss@moz-22mpm5.pool.digikabel.hu)
[11:25:11] *** Quits: yota (Sebastien@moz-9muu7b.3iqc.r856.0e35.2a01.IP) (Ping timeout: 121 seconds)
[11:25:45] *** Quits: Romster (Romster@moz-4g83e8.rev.eftel.com) (Ping timeout: 121 seconds)
[11:26:27] <Ke> simias: isn't this the case where you use some Rc or something that takes care of the concurrency, if it is not read only
[11:26:44] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Ping timeout: 121 seconds)
[11:27:06] *** Joins: Romster (Romster@moz-4g83e8.rev.eftel.com)
[11:27:30] *** Parts: jtepe (jonas@moz-06udlh.mpgs.lom5.0a60.2001.IP) ("Leaving")
[11:28:35] <simias> Ke: I was considering that but it annoys me to have to add Rcs everywhere even though all the checking could be done statically
[11:28:57] <Ms2ger> I'm not sure why you think that's possible
[11:29:23] <simias> okay, let me give you a concrete example
[11:29:47] <simias> I'm writing an emulator, I've got a bunch of peripherals (RAM, GPU, DMA, controllers etc...)
[11:30:01] <simias> the problem is that I need some peripherals to be able to access other ones
[11:30:13] <simias> for instance the DMA can transfer data between the RAM and GPU
[11:30:38] <simias> so I have a graph-like dependency tree
[11:30:54] <simias> and I can't figure out how to implement that properly in Rust
[11:31:20] <bluss> have you looked at sprocketnes?
[11:31:33] <simias> bluss: heh, I was actually just checking out the code
[11:31:33] <bluss> I don't know how it does, but it does immediately come to mind
[11:31:49] *** Quits: lenstr (lenstr@moz-2e7.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[11:31:50] <Ms2ger> So how do you guarantee that the A outlives the B?
[11:32:11] *** Joins: lenstr (lenstr@moz-2e7.vju.25.171.IP)
[11:32:13] *** Quits: jml (jml@moz-mqpurn.178.in-addr.arpa) (Ping timeout: 121 seconds)
[11:32:16] *** Quits: lenstr (lenstr@moz-2e7.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[11:32:26] *** Joins: lenstr (lenstr@moz-2e7.vju.25.171.IP)
[11:32:59] <simias> Ms2ger: right now I have a tree-like structure: The Cpu contains an Interconnect which contains all other peripherals
[11:33:10] <simias> therefore all peripherals have the same lifetime
[11:33:16] <simias> that of the Interconnect
[11:33:18] *** Quits: lenstr (lenstr@moz-2e7.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[11:33:20] <peacememories> hm, how do i 'use' sibling modules?
[11:33:34] <peacememories> that are declared inline^^
[11:33:34] *** Joins: fyolnish (fyolnish@moz-fajhu6.au-net.ne.jp)
[11:33:41] <peacememories> (gl_generator stuff)
[11:33:45] <Ms2ger> use self::foo;
[11:34:05] <Ms2ger> What if I take the Interconnect out of the Cpu?
[11:34:16] <Ms2ger> No
[11:34:17] *** Joins: jml (jml@moz-mqpurn.178.in-addr.arpa)
[11:34:35] <Ms2ger> What if I take one of the peripherals out of the Interconnect?
[11:34:57] <Ms2ger> And then drop the Interconnect
[11:34:59] <simias> not possible
[11:35:02] <peacememories> i tried using self, but it still just searches the child modules of the current module
[11:35:08] <Ms2ger> mem::replace()
[11:35:42] *** Quits: fyolnish (fyolnish@moz-fajhu6.au-net.ne.jp) (Connection closed)
[11:35:44] *** Joins: fyolnish (fyolnish@moz-fajhu6.au-net.ne.jp)
[11:35:46] <simias> Ms2ger: hey, that's nice
[11:35:47] <Ms2ger> peacememories, oh, maybe super::
[11:35:51] *** Quits: dawehner (quassel@moz-t22s4v.customers.d1-online.com) (Ping timeout: 121 seconds)
[11:35:51] <simias> I didn't know that existed
[11:35:56] <simias> I could definitely use that
[11:36:05] <Ms2ger> Oh? Good
[11:36:28] <peacememories> Ms2ger, well, that works. Seems a bit weird though. i would love something that just searches relative to the current crate
[11:36:46] <Ms2ger> peacememories, that's super :)
[11:36:50] <peacememories> oh, okay
[11:36:58] <peacememories> it sounded like it would just search 'one level up'
[11:36:59] <peacememories> thanks
[11:37:10] <Ms2ger> super::foo is one up, one down
[11:37:15] *** Quits: reem (reem@moz-3s1lie.coob.q2h1.0009.2601.IP) (Connection closed)
[11:37:29] *** Joins: reem_ (reem@moz-2icmmi.ca.comcast.net)
[11:40:42] *** Quits: JanC__ (janc@moz-3s0tpf.dsl.scarlet.be) (Ping timeout: 121 seconds)
[11:41:45] *** Joins: coxg (sazzer@moz-1hq.kh5.32.217.IP)
[11:42:01] *** Quits: bitonic (bitonic@moz-54bp3d.28-151.libero.it) (Ping timeout: 121 seconds)
[11:42:15] *** Joins: cesar (cesar@moz-rgddno.sndgca.sbcglobal.net)
[11:42:26] <simias> I think my difficulties come from the fact that I want to write a non-hierarchical data structure and I'm trying very hard to avoid unsafe code
[11:42:40] <simias> but I don't want to pay the runtime price for Rc<RefCell>
[11:42:50] <simias> life is tough
[11:44:25] *** Quits: chowmeined (chowmeined@moz-v6pi6j.wa.comcast.net) (Ping timeout: 121 seconds)
[11:45:30] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[11:45:40] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[11:45:57] *** Quits: coxg (sazzer@moz-1hq.kh5.32.217.IP) (Ping timeout: 121 seconds)
[11:46:10] *** Joins: yota (Sebastien@moz-v7f8tp.3iqc.r856.0e35.2a01.IP)
[11:46:17] *** Quits: cesar (cesar@moz-rgddno.sndgca.sbcglobal.net) (Ping timeout: 121 seconds)
[11:46:42] *** Joins: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net)
[11:48:15] *** Joins: lenstr (lenstr@moz-2e7.vju.25.171.IP)
[11:49:42] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Ping timeout: 121 seconds)
[11:50:12] *** Quits: mjboa (mike@moz-prg0pt.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[11:50:32] *** Joins: marsel (user@moz-tjk.bk3.180.94.IP)
[11:50:46] *** Joins: dinfuehr (dinfuehr@moz-br4u93.highway.telekom.at)
[11:51:17] *** Joins: ytain (ytain@moz-44k.q8p.140.24.IP)
[11:51:18] *** Joins: ebel (rory@moz-0lehdb.m4r4.nqcu.0470.2001.IP)
[11:52:01] *** Joins: tyler (tyler@moz-5ei.4no.69.155.IP)
[11:53:36] *** Joins: JanC__ (janc@moz-tpfoji.dsl.scarlet.be)
[11:54:20] <kimundi> simias: To be fair, the runtime costs are _just_ integer addition and subtraction each time you either clone a Rc, or take a borrow into the RefCell
[11:54:46] *** Joins: simonoram (simonoram@moz-pllbvg.cable.virginm.net)
[11:54:48] <bluss> simias: if you could solve it with unsafe, could it be wrapped up in a safe abstraction? that would be cool
[11:55:41] <simias> kimundi: yeah but when I do millions of accesses per second the RefCell sounds a bit wasteful
[11:56:09] <kimundi> true, at least if its thousands of different refcells
[11:56:11] <simias> bluss: after some consideration I *think* the only problematic device will be the DMA so I'm just going to implement it in the interconnect
[11:56:41] <simias> this way I'll still have a hierarchical data structure
[11:56:57] <simias> the only downside is that I'll "bloat" the Interconnect with the DMA code but meh
[11:57:09] *** Quits: peacememories (peace@moz-03ni57.dynamic.surfer.at) (Ping timeout: 121 seconds)
[11:59:05] *** Quits: akiss (akiss@moz-22mpm5.pool.digikabel.hu) (Ping timeout: 121 seconds)
[11:59:31] *** Joins: leavengood (leavengood@moz-g5avig.fl.comcast.net)
[11:59:39] *** Quits: acgtyrant (acgtyrant@moz-3kd.b79.160.124.IP) (Quit: å •å…¥ /dev/null)
[12:00:24] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[12:04:23] *** Quits: panicbit (panicbit@moz-gg7i2b.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[12:04:34] *** Joins: tomprogrammer (thomas@moz-hgr5nd.tr5r.qept.4dd0.2001.IP)
[12:04:50] *** Quits: rossm (ross@moz-pnc4od.as13285.net) (Ping timeout: 121 seconds)
[12:05:03] *** Joins: rossm (ross@moz-pnc4od.as13285.net)
[12:05:50] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[12:05:52] <nwin> bluss you were right dropping the vec really causes me some headachesâ€¦ :D
[12:06:24] <nwin> bluss you were right dropping the vec really causes me some headachesâ€¦ :D
[12:06:37] <nwin> sry for repeat
[12:08:52] *** Quits: fyolnish (fyolnish@moz-fajhu6.au-net.ne.jp) (Connection closed)
[12:09:58] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[12:10:42] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Connection closed)
[12:11:23] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[12:13:29] *** Joins: luks (luks@moz-970ftt.de)
[12:13:52] *** Joins: tigrou3tac (fabien@moz-gdonfo.fbx.proxad.net)
[12:15:25] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[12:15:26] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Ping timeout: 121 seconds)
[12:15:27] *** Joins: Rym (y@moz-cfe.mso.205.31.IP)
[12:16:14] <Matthias247> simias: why can't the components have a normal reference to the interconnect (with the comoponents sharing the lifetime of the interconnect)?
[12:16:33] *** Quits: ebel (rory@moz-0lehdb.m4r4.nqcu.0470.2001.IP) (Quit: Leaving)
[12:16:58] *** Joins: jviereck1 (Adium@moz-pqri8u.dclient.hispeed.ch)
[12:17:39] *** Quits: simonoram (simonoram@moz-pllbvg.cable.virginm.net) (Client exited)
[12:19:01] *** Quits: jviereck (Adium@moz-10jkar.dclient.hispeed.ch) (Ping timeout: 121 seconds)
[12:19:06] *** Joins: larhat (Adium@moz-9vj.vcf.204.37.IP)
[12:19:58] *** Joins: fyolnish (fyolnish@moz-fajhu6.au-net.ne.jp)
[12:19:59] *** Quits: Rym (y@moz-cfe.mso.205.31.IP) (Ping timeout: 121 seconds)
[12:21:24] <simias> Matthias247: because I can only have one mutable reference to the interconnect at a time?
[12:21:35] <simias> I don't think I understand what you're proposing
[12:23:41] *** Joins: peacememories (peace@moz-03ni57.dynamic.surfer.at)
[12:25:24] *** Joins: summerlight_ (summerlight@moz-99k.2mj.130.121.IP)
[12:25:32] <Matthias247> simias: oh yes, the mutability is the problem, not the ownership.
[12:27:21] *** Quits: dmac (dmac@moz-2ig65r.ca.comcast.net) (Connection closed)
[12:28:31] *** Quits: {AS} (uid45026@moz-srvrrh.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[12:28:54] *** Quits: fyolnish (fyolnish@moz-fajhu6.au-net.ne.jp) (Connection closed)
[12:30:48] *** Quits: ed_ (ed@moz-tfl2qt.cust.tele2.at) (Ping timeout: 121 seconds)
[12:32:05] *** Joins: ed_ (ed@moz-tfl2qt.cust.tele2.at)
[12:32:17] <enjolras> hi
[12:32:30] <enjolras> is there a way to link against llvm with a suffix ?
[12:32:46] <enjolras> i try to build against an external llvm, but llvm is called llvm-foo36
[12:33:32] <Ke> simias: these kinds of design patterns are very much of interest for me too, please tell if you figure out something
[12:33:57] *** Joins: laparca (laparca@moz-umd7qm.dynamicIP.rima-tde.net)
[12:34:59] *** Joins: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net)
[12:36:11] <Ke> simias: I guess you know there is also rust-osdev where people probably also care a lot about otherwise negligible overhead
[12:36:36] <simias> Ke: yeah I'm already in -osdev :)
[12:36:57] *** Quits: ptx (ptx@moz-jqttnm.ga4r.qpd7.16d8.2001.IP) (Quit: ZNC - http://znc.in)
[12:37:32] *** Joins: naicode (naicode@moz-gv0.jt7.204.89.IP)
[12:38:51] *** Joins: kmcguire (kmcguire@moz-c955nf.res.rr.com)
[12:40:28] *** Quits: brainproxy (michael@moz-9vjtig.mo.charter.com) (Ping timeout: 121 seconds)
[12:41:21] *** Quits: errordeveloper (ilya@moz-g0i.mtf.125.2.IP) (Ping timeout: 121 seconds)
[12:42:18] *** Joins: fyolnish (fyolnish@moz-fajhu6.au-net.ne.jp)
[12:43:07] *** Joins: ptx (ptx@moz-jqttnm.ga4r.qpd7.16d8.2001.IP)
[12:43:15] *** Joins: __mark__ (mark@moz-pb9mc5.dynamic.chello.pl)
[12:44:43] *** Joins: fmendez (fmendez@moz-1jn.fqm.166.190.IP)
[12:47:27] *** Joins: dawehner (quassel@moz-6aq1ua.hsi7.kabel-badenwuerttemberg.de)
[12:48:44] *** Quits: io2 (io2@moz-9i9j3a.home.otenet.gr) (Quit:  ...take irc away, what are you? genius, billionaire, playboy, philanthropist)
[12:49:56] *** Joins: Guest__ (textual@moz-18t.4i4.229.203.IP)
[12:50:11] *** Quits: Kingsquee (kingsley@moz-qq7ns6.bchsia.telus.net) (Quit: Konversation terminated!)
[12:53:00] *** Joins: agjacome (agjacome@moz-0ajq6l.dynamic.jazztel.es)
[12:57:04] <naicode> Does anyone know if there are plans to add general Map/Set traits? It would be useful for some generic functions.
[12:57:14] *** Quits: mindtree (Mitch@moz-j73qc4.iprimus.net.au) (Ping timeout: 121 seconds)
[12:58:12] *** Joins: sillesta (sillesta@moz-501od2.business.telia.com)
[13:00:25] *** Quits: reem_ (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[13:00:47] *** Joins: reem (reem@moz-3s1lie.coob.q2h1.0009.2601.IP)
[13:01:00] *** Quits: peacememories (peace@moz-03ni57.dynamic.surfer.at) (Ping timeout: 121 seconds)
[13:01:22] *** Quits: fmtq (fmtq@moz-d08itp.tpgi.com.au) (Ping timeout: 121 seconds)
[13:01:43] *** Joins: O01eg (o01eg@moz-0t3g6d.cgbk.4n8f.2698.2a02.IP)
[13:02:15] *** Joins: mindtree (Mitch@moz-pe8cvh.iprimus.net.au)
[13:03:35] *** Joins: fmtq (fmtq@moz-d08itp.tpgi.com.au)
[13:03:57] *** Joins: simonoram (simonoram@moz-pllbvg.cable.virginm.net)
[13:05:03] *** Parts: simonoram (simonoram@moz-pllbvg.cable.virginm.net) ()
[13:05:59] *** Joins: JagaJaga (JagaJaga@moz-gd9.blu.205.109.IP)
[13:06:21] <iliekturtles> naicode: Post 1.0 there is an intention to add generic collection traits back in.
[13:06:23] *** Joins: Quanttek (quassel@moz-25k96c.6fkd.dvrb.8108.2a02.IP)
[13:06:35] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[13:09:02] *** Quits: rossm (ross@moz-pnc4od.as13285.net) (Ping timeout: 121 seconds)
[13:09:41] *** Joins: newbie (eibwen@moz-a8u4d3.dip0.t-ipconnect.de)
[13:10:43] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[13:11:22] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[13:11:26] <simukis> do we have pointer arithmetic which allows out-of-bounds calculation?
[13:11:48] * simukis doesnâ€™t want to cast to and from usize
[13:11:54] *** Joins: BlaXpirit (blaxpirit@moz-n5mg1q.pool.ukrtel.net)
[13:11:59] *** Joins: mib_jtivvy (Mibbit@moz-b11uqs.dynamic.upc.nl)
[13:12:01] <ogham> like std::raw?
[13:12:03] <scott> std::ptr::offset iirc
[13:12:04] <Tobba> isn't going out of bounds UB
[13:12:27] <scott> sorry, std::intrinsics::offset
[13:12:50] <simukis> scott: both of these require resulting pointer to be inside the bounds of object
[13:12:54] <jn> Tobba: it might be that the rust side of things doesn't know the real bounds of a block of memory
[13:13:26] <Tobba> jn: well yeah, but going outside of the "real bounds" is UB. don't incur the wrath of the optimizer unless it's really necessary
[13:13:34] <simukis> Tobba: such thing as mmapâ€™ed block of memory doesnâ€™t have any real bounds.
[13:13:59] *** Quits: fyolnish (fyolnish@moz-fajhu6.au-net.ne.jp) (Connection closed)
[13:14:05] <scott> an mmap'ed block is probably bounded by some multiple of the page size
[13:14:24] <simukis> scott: you canâ€™t tell that to the LLVM, really.
[13:14:50] <simukis> unless you convert to slices and whatnot, which I donâ€™t want or have any desire doing.
[13:15:00] <Tobba> converting to slices is non-awful now
[13:15:07] <Tobba> but if you need to just use .offset on the pointer
[13:15:24] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Ping timeout: 121 seconds)
[13:15:44] *** Quits: jviereck1 (Adium@moz-pqri8u.dclient.hispeed.ch) (Quit: Leaving.)
[13:16:03] *** Quits: fmtq (fmtq@moz-d08itp.tpgi.com.au) (Ping timeout: 121 seconds)
[13:16:46] *** Joins: errordeveloper (ilya@moz-g0i.mtf.125.2.IP)
[13:16:53] *** Joins: JackMc (jack@moz-pseh7a.cable.rogers.com)
[13:17:08] *** Joins: exadeci (uid35778@moz-l8iij7.ealing.irccloud.com)
[13:17:16] *** Joins: fmtq (fmtq@moz-d08itp.tpgi.com.au)
[13:17:37] *** Joins: zet (lennart@moz-sg3vdn.dip0.t-ipconnect.de)
[13:17:57] *** Joins: v21 (vee@moz-sa3oki.asianet.co.th)
[13:19:09] *** Quits: dardevelin (dardevelin@moz-a3ode1.adslplus.ch) (Ping timeout: 121 seconds)
[13:19:21] *** Joins: killercup (killercup@moz-edmf2j.dip0.t-ipconnect.de)
[13:20:29] *** Joins: mib_k2twfl (Mibbit@moz-reablc.res.rr.com)
[13:20:39] <mib_k2twfl> hi rust people
[13:22:57] <naicode> iliekturtles: thanks
[13:24:45] *** Quits: fmtq (fmtq@moz-d08itp.tpgi.com.au) (Ping timeout: 121 seconds)
[13:25:53] *** Joins: fmtq (fmtq@moz-d08itp.tpgi.com.au)
[13:29:53] *** Joins: io2 (io2@moz-9i9j3a.home.otenet.gr)
[13:30:33] *** Joins: coxg (sazzer@moz-1hq.kh5.32.217.IP)
[13:31:05] *** Joins: ray (ray@moz-m8t.t3f.66.59.IP)
[13:34:06] *** Joins: dardevelin (dardevelin@moz-a3ode1.adslplus.ch)
[13:34:45] *** Quits: coxg (sazzer@moz-1hq.kh5.32.217.IP) (Ping timeout: 121 seconds)
[13:35:14] *** Joins: Wild_Cat (Max@moz-r586am.cpe.teksavvy.com)
[13:35:15] *** Quits: leavengood (leavengood@moz-g5avig.fl.comcast.net) (Ping timeout: 121 seconds)
[13:36:16] *** Quits: fmtq (fmtq@moz-d08itp.tpgi.com.au) (Ping timeout: 121 seconds)
[13:36:34] *** Quits: flugsio (flugsio@moz-vuteei.bredband.comhem.se) (Quit: uptime integer overflow)
[13:36:53] *** Joins: alonlevy (alon@moz-5c2.plq.19.46.IP)
[13:37:15] *** Joins: flugsio (flugsio@moz-vuteei.bredband.comhem.se)
[13:37:19] *** Joins: fmtq (fmtq@moz-d08itp.tpgi.com.au)
[13:37:50] *** Quits: laparca (laparca@moz-umd7qm.dynamicIP.rima-tde.net) (Quit: Leaving.)
[13:39:41] *** Joins: idegen (greg@moz-lc7.qlb.53.50.IP)
[13:40:40] <bluss> hi mib_k2twfl 
[13:40:47] *** Joins: espadrine (tyl@moz-l019mn.fbx.proxad.net)
[13:44:45] *** darkowlzz|afk is now known as darkowlzz
[13:44:56] *** Joins: lenstr_ (lenstr@moz-vis.vju.25.171.IP)
[13:47:18] *** Quits: lenstr (lenstr@moz-2e7.vju.25.171.IP) (Ping timeout: 121 seconds)
[13:47:34] *** Quits: nicoch (nicoch@moz-g02d7k.be) (Ping timeout: 121 seconds)
[13:47:43] *** Quits: alonlevy (alon@moz-5c2.plq.19.46.IP) (Connection closed)
[13:48:15] *** Quits: dinfuehr (dinfuehr@moz-br4u93.highway.telekom.at) (Connection closed)
[13:48:39] <badboy> Heho!
[13:48:43] *** Joins: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP)
[13:49:05] <badboy> Anyone ever benchmarked the old io vs the new io implementation?
[13:49:07] *** Joins: panicbit (panicbit@moz-gg7i2b.dip0.t-ipconnect.de)
[13:49:28] <badboy> I see a huge performance drop when using the new io module and I'm wondering if I'm using it wrong 
[13:50:09] *** Joins: nicoch (nicoch@moz-g02d7k.be)
[13:51:15] <nwin> Is there any good documentation about what drop does exactly?
[13:53:00] <nwin> I have no clue why I get a stack overflow hereâ€¦ https://gist.github.com/nwin/2f926703e6e458da3146
[13:54:14] <badboy> nwin: hey, where do you get a Stackoverflow?
[13:54:44] <nwin> badboy ahh sry if I run the testsâ€¦
[13:56:27] <bluss> nwin: drop does just what the implementation indicates it does, it just moves a value into itself (the function's scope) and then the function returns
[13:57:02] <bluss> it's not magical in any way, and it doesn't do anything significant to deal with running/not running destructors
[13:57:21] <bluss> using ptr::read and ptr::write however has significant effects
[13:57:30] <bluss> they do read/writes without triggering destructors
[13:57:38] <bluss> and those are you way to success :-)
[13:57:38] <nwin> ah I see so itâ€™s rust rustc calling the drop methodâ€¦
[13:58:50] *** Joins: garming (garming@moz-pqd1u2.xtra.co.nz)
[13:59:52] <iopq\> where do i throw stars at? src\board/mod.rs:540:71: 540:80 error: the trait `core::iter::FromIterator<&board::coord::Coord>` is not implemented for the type `collections::vec::Vec<board::coord::Coord>` [E0277] src\board/mod.rs:540         self.neighbours(*c).iter().filter(|c| self.color(c) == Empty).collect()
[14:01:30] <Gliptic> iopq\, add a .cloned() before .collect()
[14:02:05] <Gliptic> same as .map(|x| x.clone())
[14:02:07] *** Joins: eddyb_ (eddyb@moz-6k1.q07.26.188.IP)
[14:02:26] <iopq\> thanks, Gliptic
[14:02:37] *** Joins: reem_ (reem@moz-3s1lie.coob.q2h1.0009.2601.IP)
[14:02:43] *** Quits: reem (reem@moz-3s1lie.coob.q2h1.0009.2601.IP) (Connection closed)
[14:03:27] <nwin> bluss the thing is that in the example I just linked, I donâ€™t have any uninitialized memory, so it should just workâ€¦thatâ€™s what I donâ€™t understandâ€¦
[14:06:18] <bluss> nwin: it would stack overflow because of line 133?
[14:07:18] <nwin> bluss: I assume so, if I forget it afterwards I get a segfaultâ€¦
[14:07:18] *** Quits: naicode (naicode@moz-gv0.jt7.204.89.IP) (Connection closed)
[14:07:26] *** Joins: dmac_ (dmac@moz-44n.m62.181.69.IP)
[14:07:37] *** Joins: duesenfranz (jona@moz-piq5sk.tirol.surfer.at)
[14:07:50] <iliekturtles> badboy: Someone else was complaining about bad performance yesterday. I think someone identified some inlining issues that may be causing some of the issue.
[14:08:10] <badboy> iliekturtles: interesting
[14:08:21] <badboy> just in case I pushed my tests to GitHub for now: https://github.com/badboy/rust-io-new-vs-old
[14:08:54] <badboy> I'm pretty sure my read_exact method is far from perfect, but atleast it works for now
[14:09:21] *** Joins: polyfractal (polyfractal@moz-roi.c9b.43.69.IP)
[14:09:50] *** Joins: SneakySnake (nya@moz-i9is4u.pool.telekom.hu)
[14:11:08] *** Quits: iotku (ayy@moz-qgf.1im.244.104.IP) (Ping timeout: 121 seconds)
[14:11:33] *** Quits: dmac_ (dmac@moz-44n.m62.181.69.IP) (Ping timeout: 121 seconds)
[14:11:40] *** Joins: iotku (ayy@moz-qgf.1im.244.104.IP)
[14:12:03] <bluss> nwin: your behavior in lines 56-66 would cause a double free I think
[14:12:07] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[14:12:21] *** Joins: daschl (Adium@moz-nhml2c.public.telering.at)
[14:13:20] *** Quits: darnuria (darnuria@moz-cagds5.kokakiwi.net) (Quit: WeeChat 1.2-dev)
[14:13:20] <bluss> nwin: hm ok you have a forget on line 68
[14:13:21] *** Joins: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk)
[14:13:38] *** Joins: jviereck (Adium@moz-pqri8u.dclient.hispeed.ch)
[14:13:51] *** Joins: St4rg4t3ur (plasko_a@moz-ki7slq.abo.wanadoo.fr)
[14:14:13] *** Joins: brianloveswords (brianlovesw@moz-mve27s.fios.verizon.net)
[14:16:09] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Ping timeout: 121 seconds)
[14:16:10] <nwin> bluss: the funny thing is if I uncomment line 133 I get a double free as expectedâ€¦
[14:16:35] <nwin> s/uncomment/comment
[14:16:44] *** Quits: summerlight_ (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[14:16:51] <luks> badboy: reading a maximum of one byte at a time in your read_exact function seems to be highly inefficient
[14:17:11] *** Quits: brianloveswords (brianlovesw@moz-mve27s.fios.verizon.net) (Quit: Textual IRC Client: www.textualapp.com)
[14:17:16] <badboy> luks: it is
[14:17:47] *** Joins: dinfuehr (dinfuehr@moz-br4u93.highway.telekom.at)
[14:18:07] <badboy> the thing is, how could I implement exact reading otherwise? BufReader underneath should already translate that to larger reads, no?
[14:18:17] *** Quits: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net) (A TLS packet with unexpected length was received.)
[14:19:32] *** Quits: garming (garming@moz-pqd1u2.xtra.co.nz) (Ping timeout: 121 seconds)
[14:19:46] *** Joins: NobbZ (NobbZ@moz-lqmicq.ewe-ip-backbone.de)
[14:20:09] <dwrensha> badboy: I implement a read_exact function for capnproto-rust. you may want to have a look: https://github.com/dwrensha/capnproto-rust/blob/master/src/io.rs
[14:21:27] *** Joins: zmack (zmack@moz-4b0.o8l.26.188.IP)
[14:21:31] <badboy> perfect, thanks
[14:21:57] *** Quits: dinfuehr (dinfuehr@moz-br4u93.highway.telekom.at) (Ping timeout: 121 seconds)
[14:22:09] *** Quits: jviereck (Adium@moz-pqri8u.dclient.hispeed.ch) (Quit: Leaving.)
[14:22:14] *** Joins: new_one (new_one@moz-ep9.al6.42.128.IP)
[14:22:52] *** Joins: jviereck (Adium@moz-pqri8u.dclient.hispeed.ch)
[14:23:03] *** Joins: Irbis (Irbis@moz-u02516.abo.bbox.fr)
[14:23:20] *** Joins: Myst (Thunderbird@moz-o9q90t.cable.rogers.com)
[14:23:56] *** Quits: hhhhhhhhhh (mike@moz-l54iib.as13285.net) (Quit: WeeChat 1.1.1)
[14:24:30] *** Quits: daschl (Adium@moz-nhml2c.public.telering.at) (Quit: Leaving.)
[14:24:45] *** Quits: mib_jtivvy (Mibbit@moz-b11uqs.dynamic.upc.nl) (Quit: http://www.mibbit.com ajax IRC Client)
[14:25:48] <bluss> nwin: I can show you the code of something similar but simpler that I have as WIP https://gist.github.com/anonymous/ad5b266b83ad4ef70b9b
[14:25:54] *** Quits: pauls (pauls@moz-e5p333.ccs.neu.edu) (Ping timeout: 121 seconds)
[14:26:05] <bluss> nwin: it's also moving out from a fixed size array piece by piece
[14:27:49] *** Joins: munksgaa1d (munksgaard@moz-478pev.u.parknet.dk)
[14:28:54] *** Quits: marsel (user@moz-tjk.bk3.180.94.IP) (Ping timeout: 121 seconds)
[14:30:47] *** Quits: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk) (Ping timeout: 121 seconds)
[14:32:08] *** Joins: dd (Mibbit@moz-nd2iqs.fl.atlanticbb.net)
[14:33:08] *** Joins: dfinninger (dfinninger@moz-6a9v7n.res.rr.com)
[14:34:07] *** Joins: DerisiveLogic (smuxi@moz-g93io6.res.rr.com)
[14:34:52] *** Quits: zmack (zmack@moz-4b0.o8l.26.188.IP) (Connection closed)
[14:35:32] *** Joins: marsel (user@moz-tjk.bk3.180.94.IP)
[14:35:37] <nwin> bluss thx, I'll have a look
[14:35:51] *** darkowlzz is now known as darkowlzz|afk
[14:36:24] *** Joins: tomleb (Mibbit@moz-9vdbqp.dsl.bell.ca)
[14:36:37] <tomleb> Anyone here?
[14:36:55] <tomleb> I'm having trouble building rust from source
[14:38:34] *** Joins: Guest74 (textual@moz-v7tv6p.ma.charter.com)
[14:39:24] *** Joins: tav_ (tav@moz-rv39fd.range31-52.btcentralplus.com)
[14:39:54] *** Quits: untitaker (untitaker@moz-4qpf64.highway.telekom.at) (Ping timeout: 121 seconds)
[14:40:17] <ogham> What kinda trouble?
[14:40:24] <badboy> dwrensha: thanks, an adaption of that indeed seems to work far better
[14:40:34] <tomleb> I can't build it
[14:40:49] *** Quits: tav (tav@moz-rv39fd.range31-52.btcentralplus.com) (Connection closed)
[14:40:49] *** tav_ is now known as tav
[14:41:08] <tomleb> I'm getting an error "Unsupported target triple "x86_64-pc-windows-gnu" found
[14:41:39] *** Joins: jshs (jshs@moz-v1qkki.dip0.t-ipconnect.de)
[14:42:48] *** Quits: nielx (nielx@moz-qca.rvm.109.92.IP) (Quit: Leaving...)
[14:42:55] *** Joins: mithsv (mithsv@moz-i1nn99.dynamic.caiway.nl)
[14:43:24] *** Joins: infinigon (x@moz-q7ufkk.range81-153.btcentralplus.com)
[14:43:25] <ogham> triple?
[14:43:36] <tomleb> Yeah
[14:44:16] <badboy> wuhu, down to 4seconds (from 11)
[14:44:26] <ogham> I don't know that error :/
[14:45:46] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[14:45:58] *** Joins: untitaker (untitaker@moz-ae93uo.highway.telekom.at)
[14:47:02] *** Joins: Selemur (chatzilla@moz-tpgfbn.kawo1.rwth-aachen.de)
[14:47:11] *** Joins: nano (nano@moz-00j6et.dynamic.kabel-deutschland.de)
[14:49:48] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Ping timeout: 121 seconds)
[14:50:00] *** Joins: rustyrazorblade (rustyrazorb@moz-pobbah.cable.earthlink.net)
[14:54:15] *** Joins: jmitchell (jmitchell@moz-o8p.pug.156.104.IP)
[14:54:35] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[14:57:30] <badboy> now this is much nicer to look at: http://tmp.fnordig.de/priv/perf-rdb.svg
[14:58:16] <nwin> bluss Iâ€™ve got a minimal example http://is.gd/BFPqV5 seem like that rust does not like it if self gets overwritten in dropâ€¦
[14:59:28] *** Quits: lenstr_ (lenstr@moz-vis.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[14:59:58] <asmodeius> hi
[15:00:05] <asmodeius> can i do match
[15:00:12] <asmodeius> that does nothing on one match?
[15:00:21] <Ms2ger> x => (),
[15:00:27] <asmodeius> ok thanks :)
[15:02:46] *** Joins: fyolnish (fyolnish@moz-fajhu6.au-net.ne.jp)
[15:04:28] *** Joins: glendc (glendc@moz-lm5.ch9.159.212.IP)
[15:04:50] *** Quits: jviereck (Adium@moz-pqri8u.dclient.hispeed.ch) (Quit: Leaving.)
[15:08:04] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[15:08:07] <bluss> nwin: it's not weird, you're creating more of itself when it should be destroyed
[15:08:17] <bluss> nwin: I'm using ptr::write instead.
[15:08:18] *** Quits: dd (Mibbit@moz-nd2iqs.fl.atlanticbb.net) (Quit: http://www.mibbit.com ajax IRC Client)
[15:08:39] *** Joins: makhauser (quassel@moz-7p8.00g.111.213.IP)
[15:10:49] *** Quits: fyolnish (fyolnish@moz-fajhu6.au-net.ne.jp) (Ping timeout: 121 seconds)
[15:12:12] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[15:13:16] *** Quits: yuja (yuja@moz-1cov5a.so-net.ne.jp) (Ping timeout: 121 seconds)
[15:13:31] *** Joins: mnemnion (mnemnion@moz-e8rfii.ca.comcast.net)
[15:13:32] *** Joins: mcoffee (mcoffee@moz-erlnm0.bchsia.telus.net)
[15:13:57] *** Quits: reem_ (reem@moz-3s1lie.coob.q2h1.0009.2601.IP) (Connection closed)
[15:14:19] *** Joins: reem (reem@moz-3s1lie.coob.q2h1.0009.2601.IP)
[15:19:06] *** Joins: rmgk (ragnar@moz-7savo2.dyn.telefonica.de)
[15:19:26] *** Joins: coxg (sazzer@moz-1hq.kh5.32.217.IP)
[15:20:11] *** Quits: polyfractal (polyfractal@moz-roi.c9b.43.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[15:22:26] *** Quits: rmgk_ (ragnar@moz-8009r4.dyn.telefonica.de) (Ping timeout: 121 seconds)
[15:23:27] *** Joins: ParahSailin (parahsailin@moz-q7i.ghg.61.168.IP)
[15:23:38] *** Quits: coxg (sazzer@moz-1hq.kh5.32.217.IP) (Ping timeout: 121 seconds)
[15:24:00] *** Joins: lenstr (lenstr@moz-vis.vju.25.171.IP)
[15:25:55] *** Quits: JackMc (jack@moz-pseh7a.cable.rogers.com) (Ping timeout: 121 seconds)
[15:27:02] *** Quits: iopq\ (Mibbit@moz-uuic7b.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[15:27:25] *** Joins: rfnash (weechat@moz-203epe.in.comcast.net)
[15:27:25] *** Joins: jasonrm (jasonrm@moz-s9i3ib.9iq5.ifqp.0470.2001.IP)
[15:28:07] *** Quits: zet (lennart@moz-sg3vdn.dip0.t-ipconnect.de) (Quit: WeeChat 1.1.1)
[15:28:39] <asmodeius> struct Duck<'a> {
[15:28:44] *** Joins: murz (murz@moz-h10.ori.130.24.IP)
[15:28:45] <asmodeius> what is this <'a> thingy?
[15:29:12] <flan3002> It's a lifetime parameter.
[15:29:59] *** Quits: JagaJaga (JagaJaga@moz-gd9.blu.205.109.IP) (Ping timeout: 121 seconds)
[15:29:59] <flan3002> http://doc.rust-lang.org/book/ownership.html#lifetimes
[15:30:04] <asmodeius> oh, thanks :)
[15:31:26] *** Joins: eddyb__ (eddyb@moz-dhp.t65.25.188.IP)
[15:32:29] *** eddyb__ is now known as eddyb
[15:33:18] *** Quits: oal (oal@moz-j1u.a9v.81.192.IP) (Quit: Goodbye, cruel world.)
[15:33:40] *** Joins: SpaceWizard (RJones@moz-fmqc9c.res.rr.com)
[15:34:17] *** Quits: eddyb_ (eddyb@moz-6k1.q07.26.188.IP) (Ping timeout: 121 seconds)
[15:34:17] *** Quits: lenstr (lenstr@moz-vis.vju.25.171.IP) (A TLS packet with unexpected length was received.)
[15:35:10] *** Joins: futile (felix@moz-5kl.840.188.178.IP)
[15:36:00] *** Quits: rfnash (weechat@moz-203epe.in.comcast.net) (A TLS packet with unexpected length was received.)
[15:36:13] *** darkowlzz|afk is now known as darkowlzz
[15:36:33] *** Joins: rfnash (weechat@moz-203epe.in.comcast.net)
[15:38:15] *** Joins: alex (alex@moz-rpu.a9e.242.157.IP)
[15:38:15] *** Quits: jmitchell (jmitchell@moz-o8p.pug.156.104.IP) (Connection closed)
[15:38:22] *** Joins: jmitchell (jmitchell@moz-o8p.pug.156.104.IP)
[15:38:36] *** Quits: spider-mario (spidermario@moz-coblcf.fbx.proxad.net) (A TLS packet with unexpected length was received.)
[15:39:30] *** Quits: fmendez (fmendez@moz-1jn.fqm.166.190.IP) (Connection closed)
[15:39:51] *** Joins: fmendez (fmendez@moz-1jn.fqm.166.190.IP)
[15:39:57] *** Joins: lenstr (lenstr@moz-vis.vju.25.171.IP)
[15:40:18] *** Joins: mystor (mystor@moz-dvb.6fm.114.24.IP)
[15:40:48] *** Quits: lenstr (lenstr@moz-vis.vju.25.171.IP) (Quit: Leaving...)
[15:40:54] <mib_k2twfl> how good is rust with odbc?
[15:41:42] <tomleb> been trying to build rust from source for like 5 hours straight
[15:41:48] <tomleb> this is an awful experience lol
[15:42:14] *** Joins: dinfuehr (dinfuehr@moz-rmfk49.highway.telekom.at)
[15:42:45] *** Quits: Tuna-Fish (quassel@moz-5djkv5.kortex.jyu.fi) (Ping timeout: 121 seconds)
[15:43:04] *** Quits: espadrine (tyl@moz-l019mn.fbx.proxad.net) (Ping timeout: 121 seconds)
[15:43:32] *** Quits: Guest74 (textual@moz-v7tv6p.ma.charter.com) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[15:43:53] *** Quits: fmendez (fmendez@moz-1jn.fqm.166.190.IP) (Ping timeout: 121 seconds)
[15:48:15] <ptalbot> hi folks, I'm facing a conflict between trait impl and I'm not sure if this is an error of mine or of rustc :-/ Please see http://is.gd/OP0ZRz
[15:49:33] *** Quits: mib_k2twfl (Mibbit@moz-reablc.res.rr.com) (Quit: http://www.mibbit.com ajax IRC Client)
[15:51:19] <talchas> ptalbot: I believe the issue is that if you had a type that implemented both Domain and Bound the FDVar impls would overlap
[15:52:33] <ptalbot> talchas, not sure to understand your point, Domain and Bound are not traits, right?
[15:52:55] *** Quits: dawehner (quassel@moz-6aq1ua.hsi7.kabel-badenwuerttemberg.de) (Connection closed)
[15:52:59] <talchas> er, yeah, I miswrote that
[15:53:04] *** Joins: dawehner (quassel@moz-6aq1ua.hsi7.kabel-badenwuerttemberg.de)
[15:53:14] <talchas> Disjoint and Bounded
[15:53:23] <kmcguire> hmm i need Arc<Any>
[15:53:24] *** Joins: Twinklebear (Twinklebear@moz-ttrcn3.ut.comcast.net)
[15:53:34] <kmcguire> any ideas?
[15:53:52] <ptalbot> talchas, do you mean that a problem could arise if Domain::Bound was equal to FDVar<Domain>?
[15:53:53] <kmcguire> Arc<Any + Send + Sync>
[15:54:05] <talchas> I think atm you need Arc<Box<Any>> because they haven't ?Sizied Arc bits yet
[15:54:05] *** Quits: mindcat (mindcat@moz-8tb.j1o.118.113.IP) (Quit: Lost terminal)
[15:54:17] <talchas> though the + Send/Sync thing will be a problem
[15:54:42] <kmcguire> oh crap Arc<Box works
[15:54:59] <kmcguire> well it was complaining that Box had a *mut ()
[15:55:11] <talchas> ptalbot: so consider Domain = Foo, where Foo: Bounded<Bound=Foo> + Disjoint<RHS=Foo>
[15:55:17] *** Joins: scialex (scialex@moz-j5mi8i.cs.brown.edu)
[15:55:26] *** Joins: bombless (bombless@moz-e1624i.0v2u.0v40.0da8.2001.IP)
[15:55:47] <talchas> that matches both impls I believe
[15:56:17] *** Quits: tomleb (Mibbit@moz-9vdbqp.dsl.bell.ca) (Quit: http://www.mibbit.com ajax IRC Client)
[15:56:53] *** Joins: fyolnish (fyolnish@moz-fajhu6.au-net.ne.jp)
[15:57:09] <eddyb> kmcguire: wait a few more days :D
[15:57:13] *** Quits: rustyrazorblade (rustyrazorb@moz-pobbah.cable.earthlink.net) (Client exited)
[15:57:16] *** Quits: BlaXpirit (blaxpirit@moz-n5mg1q.pool.ukrtel.net) (Connection closed)
[15:57:20] * eddyb gets back to working on that
[15:58:18] <ptalbot> talchas, then, why does it work in this case: http://is.gd/eJPGK1
[15:58:32] <FreeFull> kmcguire: Soon Rc and Arc will allow unsized types
[15:58:35] <FreeFull> Not yet, but soon!
[15:58:43] <kmcguire> how you guys doing it?
[15:58:50] <kmcguire> another level of indirection?
[15:59:11] <talchas> I think it just requires adding ?Sized at the right places
[15:59:17] *** Joins: mattico (Matthew@moz-0vjqsn.mpls.qwest.net)
[15:59:24] <kmcguire> oh that would be cool
[15:59:26] *** Quits: hoony (Thunderbird@moz-q5r.8e9.96.183.IP) (Client exited)
[15:59:39] *** Joins: meh (meh@moz-u15r9i.42-151.net24.it)
[15:59:53] *** Quits: mattico (Matthew@moz-0vjqsn.mpls.qwest.net) (Quit: Leaving)
[15:59:57] *** Joins: mattico (Matthew@moz-0vjqsn.mpls.qwest.net)
[16:00:16] *** Quits: v21 (vee@moz-sa3oki.asianet.co.th) (Ping timeout: 121 seconds)
[16:00:17] <talchas> ptalbot: the problematic type would be X = Interval<X>, which is infinite
[16:00:34] <talchas> (and thus forbidden)
[16:01:02] *** Joins: cursivecode (textual@moz-4u56i9.res.bhn.net)
[16:02:03] *** Quits: cursivecode (textual@moz-4u56i9.res.bhn.net) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[16:02:40] *** Joins: polyfractal (polyfractal@moz-roi.c9b.43.69.IP)
[16:02:54] *** Quits: Lilly (Lilly@moz-ca683g.bredband.comhem.se) (Quit: bajs)
[16:03:50] <ptalbot> talchas, hmm ok I understand, thanks. Is there any ways to say that the `bound` of a type is not the type itself?
[16:03:57] *** Joins: starless (starless@moz-u9gmm1.res.rr.com)
[16:04:19] <ptalbot> something like `type Bound: PartialOrd + !Self`
[16:04:38] *** Joins: __mark___ (mark@moz-pb9mc5.dynamic.chello.pl)
[16:04:44] <nwin> bluss yes youâ€™re rightâ€¦
[16:04:56] *** Quits: fyolnish (fyolnish@moz-fajhu6.au-net.ne.jp) (Ping timeout: 121 seconds)
[16:04:56] *** Quits: __mark__ (mark@moz-pb9mc5.dynamic.chello.pl) (Ping timeout: 121 seconds)
[16:04:56] *** __mark___ is now known as __mark__
[16:05:34] <talchas> there's no easy way atm, I'm not sure what sort of hacks might be possible
[16:05:40] <jmesmon> ptalbot: unless something has changed recently, rust doesn't have negative bounds :(
[16:06:05] *** Quits: tomprogrammer (thomas@moz-hgr5nd.tr5r.qept.4dd0.2001.IP) (Connection closed)
[16:07:56] *** Joins: frogmella (Mibbit@moz-d6t.edf.185.31.IP)
[16:08:47] <Selemur> I was thinking, Python has this nice "in" operator for checking if x is in y
[16:08:55] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[16:08:56] <Selemur> Would there be any reasons against implementing some sugar that
[16:09:10] <Selemur> translates "x in y" to "y.contains(&x)" for every expression where you'd expect a boolean
[16:10:22] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[16:10:33] <kimundi> Selemur: Well possible reasons would be added complexity in the language and limited usefulness due to the many variations a contains() method could have
[16:11:54] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Connection closed)
[16:12:15] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[16:12:44] <ptalbot> jmesmon, talchas, okay, got it, thanks!
[16:12:46] <Selemur> I guess x in string could be confusing with x being a char or a string
[16:12:55] *** Quits: jaredonline (jaredonline@moz-31rl38.ph.cox.net) (A TLS packet with unexpected length was received.)
[16:13:03] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[16:15:17] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[16:15:33] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[16:16:13] <flacko> How do I declare static array of floats in rust?
[16:16:17] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Ping timeout: 121 seconds)
[16:16:28] <burntsushi> Selemur: i think it's an interesting idea, i be it at least deserves to be brough up on http://users.rust-lang.org/ as a "pre rfc"
[16:16:39] <burntsushi> Selemur: (i wouldn't expect anything before 1.0 though)
[16:16:43] *** Joins: robo9k (nik@moz-2cj.3lo.147.5.IP)
[16:16:43] *** Joins: UberLambda (uber@moz-4u4.v1a.84.82.IP)
[16:17:50] <burntsushi> flacko: `let xs = [1.0, 1.5, 2.0];`
[16:17:54] *** Joins: cesar (cesar@moz-s9m7l0.lv7r.u2r6.0306.2602.IP)
[16:18:03] <flacko> Ok
[16:18:40] *** Joins: blaphmat (Mibbit@moz-d572aa.bredband.comhem.se)
[16:19:01] <robo9k> could someone look into https://github.com/rust-lang/rand/issues/32 ?
[16:19:20] *** Quits: Matthias247 (Miranda@moz-49li60.hsi14.kabel-badenwuerttemberg.de) (Connection closed)
[16:19:51] <burntsushi> robo9k: i think that's only fixable by huon or acrichto
[16:19:57] <blaphmat> If the stdlib is missing something in the beta, can I expect that it will not be implemented for the final?
[16:20:05] <robo9k> burntsushi: yepp, they're the only two owners
[16:21:29] <burntsushi> blaphmat: i think the intention is that the beta will have all the stability markers that will be present in 1.0. in practice, i'm sure there might be a few stragglers.
[16:22:23] <glendc> this might be slightly off topic
[16:23:01] <glendc> but does someone know a good program (on linux) to quickly browse through source code of a library
[16:23:09] <blaphmat> It's that uncertainty that's really bothering me.. So many parts moving around and who knows where things will end up? Just 8 weeks before the final according to schedule anyway.. Not the way to do things.
[16:23:12] *** Quits: Kxepal (Miranda@moz-hu9lfu.pppoe.mtu-net.ru) (Ping timeout: 121 seconds)
[16:23:31] *** Joins: JusticeFries (textual@moz-v59a5h.co.comcast.net)
[16:23:54] <burntsushi> blaphmat: engineering a release like this is hard. i'm sure they are doing the best they can.
[16:25:00] *** Quits: JusticeFries (textual@moz-v59a5h.co.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[16:25:02] *** Joins: Kxepal (Miranda@moz-s2os05.pppoe.mtu-net.ru)
[16:25:16] <blaphmat> No doubt. I'm just falling in line with the people saying that the release is too rushed. Clearly they're unable to do it as fast as the schedule is suggesting. Which isn't a critique against anyone or anything other than the schedule itself.
[16:25:55] <scott> I don't think the release is rushed. it has taken a long time to get here
[16:26:05] *** Joins: Guest53 (textual@moz-ph5.jg7.239.216.IP)
[16:26:13] <scott> and 1.0 is not a cutoff for feature additions, it's a cutoff for backwards incompatible changes
[16:26:46] *** Quits: scialex (scialex@moz-j5mi8i.cs.brown.edu) (Quit: Leaving)
[16:26:47] <bluss> blaphmat: I don't think it's clear in any way. Things are stabilizing nicely
[16:26:52] <burntsushi> blaphmat: i just do the best i can with what they can give. you may find this thread helpful. it's a bit scattered, but if you're looking for details, it could shed some light: http://users.rust-lang.org/t/using-unstable-apis-tell-us-about-it/157/80
[16:26:54] <blaphmat> scott: From my perspective, the last few weeks has been incredibly frustrating in terms of rust upgrades. Mostly due to things being deprecated with no replacement and no communication regarding future plans for the APIs. I'm attributing this to the rush, but maybe I'm wrong.
[16:27:07] *** Quits: ray (ray@moz-m8t.t3f.66.59.IP) (Connection closed)
[16:28:10] <scott> new features will continue to be added right after 1.0. in fact, features that can be added later without backcompat issues are mostly being postponed so everyone can focus on the stuff that need to be changed now to avoid future breaking changes
[16:28:28] <frogmella> deprecating stuff is not a bad idea at all
[16:28:33] <blaphmat> Fair enough
[16:28:38] <bluss> deprecations need to happen. A warning signal for a bad rush would be low quality, but I frankly haven't seen those signs
[16:28:39] *** Joins: {AS} (uid45026@moz-srvrrh.uxbridge.irccloud.com)
[16:29:11] <blaphmat> frogmella: No, but it should be communicated whether there's plans to reintroduce the APIs or if it's left for third party library developers.
[16:29:12] <scott> blaphmat: I don't really have any comments wrt to that frustration, since I'm not doing any heavy Rust programming right now myself, mainly to avoid that very problem :p
[16:30:00] *** Joins: ismaelga (ismaelga@moz-9sgjm2.cpe.netcabo.pt)
[16:30:05] *** Joins: dlc (dlc@moz-ijetde.res.rr.com)
[16:30:18] *** Quits: nano (nano@moz-00j6et.dynamic.kabel-deutschland.de) (Connection closed)
[16:30:23] <burntsushi> blaphmat: for me personally, it's helpful to remember that a user's perpsective of a language is very different than a designer's perspective. we just have different concerns and priorities. communicating everything effectively is super hard to do.
[16:30:28] *** darkowlzz is now known as darkowlzz|afk
[16:30:42] *** Joins: Guest40 (textual@moz-5bku1g.chello.nl)
[16:31:33] *** Guest40 is now known as Matt___
[16:32:25] <kmcguire> safe interface for looper for android ndk, http://kmcg3413.net/android-rs-glue-doc/doc/lib/lowglue/wraps/struct.Looper.html
[16:32:26] *** Joins: fyolnish (fyolnish@moz-fajhu6.au-net.ne.jp)
[16:32:47] <kmcguire> i like the addFd method -- its made really easy to use with a callback
[16:34:00] *** Quits: murz (murz@moz-h10.ori.130.24.IP) (Quit: Be back later ...)
[16:34:29] <frogmella> blaphmat: what you said is not a must have thing, as for me. They are improving language from an engineering side, things are changing too fast i think, so that is the reason for communication issue.
[16:34:44] <kmcguire> crap wrong darn channel
[16:35:25] *** Joins: mib_obikp0 (Mibbit@moz-b11uqs.dynamic.upc.nl)
[16:35:32] *** Joins: james4k (james@moz-ojv7g2.consolidated.net)
[16:36:26] <blaphmat> frogmella: Yes, I was also putting blame on the pace of change just now. When they're under that sort of pressure, it's no wonder they're cutting corners.
[16:36:38] *** Joins: tristanseifert (tristanseif@moz-av1uqv.83ld.imo9.6000.2605.IP)
[16:37:30] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[16:37:42] *** Joins: tgkokk (tgkokk@moz-bml9je.home.otenet.gr)
[16:39:36] *** Quits: james4k (james@moz-ojv7g2.consolidated.net) (Ping timeout: 121 seconds)
[16:40:28] *** Quits: fyolnish (fyolnish@moz-fajhu6.au-net.ne.jp) (Ping timeout: 121 seconds)
[16:40:40] <asmodeius> how can i store mutable fs:File in struct and pass it as a func?
[16:40:55] *** Quits: mindtree (Mitch@moz-pe8cvh.iprimus.net.au) (Ping timeout: 121 seconds)
[16:41:42] <asmodeius> to a func*
[16:42:49] <burntsushi> asmodeius: `struct Foo { file: fs::File }` ... `some_fun(&mut foo.file)`
[16:43:13] *** Quits: Matt___ (textual@moz-5bku1g.chello.nl) (Quit: Textual IRC Client: www.textualapp.com)
[16:43:51] <asmodeius> i get error
[16:43:51] <asmodeius> src/main.rs:56:31: 56:41 error: cannot borrow immutable field `self._file` as mutable
[16:43:55] <asmodeius> src/main.rs:56         self._input.read(&mut self._file);
[16:44:26] *** Joins: tomprogrammer (thomas@moz-20t6id.tr5r.qept.4dd0.2001.IP)
[16:44:40] <burntsushi> asmodeius: my guess is that `self` is either immutable or immutably borrowed, which means you can mutably borrow from one of its components. but without seeing more code, i cannot be sure.
[16:44:44] <blaphmat> Does it also say self is already mutably borrowed?
[16:45:26] *** Joins: iopq (Mibbit@moz-uuic7b.ca.comcast.net)
[16:45:48] <asmodeius> no only that
[16:45:49] <asmodeius> http://pastebin.com/NzmZTcE5
[16:46:31] <burntsushi> asmodeius: your `read` method borrows `self` immutably.
[16:46:32] <dlc> Is there a safe way to update in place a single generic field in a struct?
[16:46:35] <scott> asmodeius: it's because you took self by immutable reference - read needs to take &self mut to be able to pass out mutable references to its fields
[16:46:42] <iopq> is there a way to implement a custom iterator that is efficient, because I made an iterator over a 4 element array and the Vec was actually faster
[16:46:43] <eddyb> &mut self
[16:46:44] <burntsushi> asmodeius: try using `fn read(&mut self)`
[16:46:44] <scott> &mut self, I mean
[16:46:48] *** Quits: blaphmat (Mibbit@moz-d572aa.bredband.comhem.se) (Quit: http://www.mibbit.com ajax IRC Client)
[16:46:58] <eddyb> iopq: chaining Option's?
[16:47:06] <asmodeius> oh
[16:47:09] <asmodeius> thanks a lot :D
[16:47:10] <bluss> iopq: yes, it's always possible to match the libstd
[16:47:22] *** Joins: PrinceRobot (BhargavR@moz-6dkpra.cable.rogers.com)
[16:47:29] <iopq> bluss: it's hard because I don't know the types of things, and the compiler doesn't help
[16:47:47] <iopq> bluss: and when I look them up in the docs it always finds the wrong thing
[16:47:52] <eddyb> wait, Vec was faster?
[16:48:00] <eddyb> iopq: with what, .into_iter()?
[16:48:23] <iopq> eddyb: I called .iter() on the slice to the Vec and it was faster than calling iter() on my iterator
[16:48:28] <PrinceRobot> When building with Cargo, how can one surpress warnings? 
[16:49:20] <bluss> iopq: aren't you comparing two completely different things then. You couldn't use the slice iterator because of borrowing
[16:49:24] <killercup> ogham: you there? building exa fails for me now because building datetime fails (i'm using a local version of pad, btw). also, i think you can now use git2 as a crates.io dep (instead of the github link)
[16:49:36] <bluss> iopq: so your own iterator has to copy all the elements.
[16:49:53] <dinfuehr> is the crate rand broken on current master? i get the following error for compilation: os.rs:155 let reader = try!(File::open(&Path::new("/dev/urandom")));
[16:49:55] <mattico> PrinceRobot: warnings from cargo or from rustc?
[16:50:00] <bluss> iopq: you could use vec's into_iter() that eddyb mentions
[16:50:21] <PrinceRobot> mattico: Cargo; with rust compiler has a supplimentary flag that I am aware of.
[16:50:26] <dinfuehr> failed to resolve: Use of undeclared type or module `Path`
[16:50:43] *** Joins: cody (cody@moz-9qq7ka.2ic3.1chi.0006.2601.IP)
[16:50:56] <burntsushi> PrinceRobot: i think `cargo build -- --some-rustc-flag=val` will work, but i don't know the flag name to enable/disable warnings.
[16:51:01] <iopq> bluss: my iterator is actually two arrays, one with data, and one with bool to see if that data is valid. I loop over the array and return the data if the bool array is true.
[16:51:15] *** Quits: envi_u (envi@moz-ih5.olo.169.121.IP) (Ping timeout: 121 seconds)
[16:51:44] <burntsushi> dinfuehr: yes, we need huon or acrichto to update it on crates.io. for now, you could specify it as a git dependency.
[16:51:45] <iopq> bluss: I can actually just own the data with my approach, but using a Vec with a slice is actually faster
[16:52:06] <PrinceRobot> burntsushi: Thanks! Also, --no-default-features flag works; but not sure what else it disables so was wondering if there are any specifics. 
[16:52:13] <eddyb> bluss: I wasn't suggesting into_iter, I was asking
[16:52:21] <bluss> iopq: that's what I think is an apples to oranges comparison
[16:52:23] <eddyb> bluss: in case into_iter is more efficient than iter somehow
[16:52:28] <bluss> eddyb: I know. I didn't say you suggested it
[16:52:36] *** Joins: kard (-@moz-qjeh4m.dip0.t-ipconnect.de)
[16:52:46] <eddyb> oh, yes, my bad (reading text at weird angles)
[16:53:06] *** Quits: reem (reem@moz-3s1lie.coob.q2h1.0009.2601.IP) (Connection closed)
[16:53:27] *** Joins: amphibulus (Mibbit@moz-kga.8ee.218.2.IP)
[16:53:30] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[16:53:35] <dinfuehr> burntsushi: how does that work? I also need to mention that I am using a crate, that uses the rand crate, which probably makes that a bit more complicated.
[16:54:11] <burntsushi> dinfuehr: yeah... i think there is a way to override crates in that situation.
[16:54:16] <amphibulus> is it possible to use an Enum as a key to a collection? I'm getting 'does not implement any method in scope named EnumValue'
[16:54:19] *** Joins: kazimuth (james@moz-gne.8or.17.73.IP)
[16:54:35] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[16:54:58] <dinfuehr> burntsushi: thanks, i will try to figure that out.
[16:55:20] <burntsushi> dinfuehr: one piece of the puzzle, specifying a git dependency: http://doc.crates.io/manifest.html#the-[dependencies.*]-sections
[16:55:22] *** Quits: Guest__ (textual@moz-18t.4i4.229.203.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[16:55:25] <bluss> amphibulus: yes it is possible, different collections have different trait requirements. BTreeMap needs Ord, HashMap Eq + Hash
[16:55:39] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[16:55:54] <amphibulus> bluss: and if I wanted a HashSet<glfw::Key> ?
[16:55:57] <burntsushi> dinfuehr: ah, and overriding dependencies: http://doc.crates.io/guide.html#overriding-dependencies
[16:55:57] <iopq> bluss: yes, I thought that owning the data would make it faster instead of creating a bazillion references to it
[16:56:29] <dinfuehr> burntsushi: thanks, great!
[16:56:39] *** Quits: Guest53 (textual@moz-ph5.jg7.239.216.IP) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[16:56:44] <burntsushi> amphibulus: that will only work if `glfw::Key` implements `Eq + Hash`. if it doesn't, you'll need to define a wrapper type.
[16:56:46] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[16:57:07] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[16:57:19] <bluss> iopq: You had a fixed size array of some Foo type? if Foo is small, I'd expect it to have exactly equal performance
[16:57:48] <bluss> iopq: but if the values are larger to copy, copyning and iterating by value would take longer time (?)
[16:58:03] <iopq> bluss: yeah, I had a fixed size array of [Coords, 4] where coords are two integers
[16:58:05] <amphibulus> burntsushi: it implements both, but the line   map.contains(glfw::Key::KeyA) still gives the error  "glfw::Key does not implement any method in scope named KeyA"
[16:58:06] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[16:58:13] <amphibulus> burntsushi: why is the compiler trying to find a method?
[16:58:27] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[16:58:46] <burntsushi> amphibulus: are you sure `glfw::Key` is an enum?
[16:58:52] *** Quits: jwatt (roslea@jwatt.irc.users.mozilla.org) (Ping timeout: 121 seconds)
[16:59:03] *** Quits: polyfractal (polyfractal@moz-roi.c9b.43.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[16:59:23] <amphibulus> burntsushi: http://www.rust-ci.org/bjz/glfw-rs/doc/glfw/enum.Key.html
[16:59:57] <ogham> killercup: hello
[17:00:04] <ogham> did something break datetime?
[17:00:37] *** Joins: rustyrazorblade (rustyrazorb@moz-ec4eb9.east.verizon.net)
[17:00:51] <amphibulus> burntsushi: heh, if I change it to contains(&glfw::Key::KeyA) I get a compiler panic :/
[17:01:00] <killercup> ogham: seems like it, but couldn't reproduce since i mistakenly removed my local overwrite for pad ;)
[17:01:05] <burntsushi> amphibulus: wow. report it!
[17:01:25] <amphibulus> burntsushi: really? I seem to get _a lot_ of compiler panics
[17:01:37] <killercup> ogham: oh, here it is: format.rs:84:48: 84:60 error: type `&mut collections::vec::Vec<u8>` does not implement any method in scope named `write_str`
[17:01:37] <burntsushi> amphibulus: does it say it's an ICE?
[17:01:53] <ogham> killercup: Oh dear. I thought it was just dependency errors
[17:01:55] <ogham> I'll get on that
[17:01:58] <amphibulus> burntsushi: internal compiler error: unexpected panic, this is a bug.
[17:02:22] <burntsushi> amphibulus: you get a lot of those? that's surprising.
[17:02:34] <amphibulus> burntsushi: I do. But I am linking against lots of natives
[17:02:36] <killercup> ogham: no rush :) i just thought i'll let you know here instead of opening 1000 issues on github
[17:02:42] <ogham> heh, thanks
[17:03:01] <mattico> Noob question: Trying to recursively traverse a tree, having a borrow issues (http://is.gd/urIjPk)
[17:03:09] <mattico> ^ play link
[17:03:21] *** Joins: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com)
[17:03:25] <ogham> I merged your rust-pad PR, but forgot to publish it to crates.io until now
[17:03:31] <ogham> I am truly the best crate maintainer
[17:03:41] <ogham> and by best I mean worst
[17:04:23] <killercup> ogham: haha, your not the only one who always fixes stuff on master and never publishes stuff to crates/npm/bundler ;)
[17:04:28] *** Joins: infynyxx (infynyxx@moz-85e.umq.196.73.IP)
[17:04:29] *** Joins: jwatt (roslea@jwatt.irc.users.mozilla.org)
[17:04:30] <PrinceRobot> Where can I see all the data types available?
[17:04:40] *** Quits: Papey (Papey@moz-jg7irf.kimsufi.com) (Quit: LONGUE VIE Ã€ L'ORTIE)
[17:04:43] *** Quits: rustyrazorblade (rustyrazorb@moz-ec4eb9.east.verizon.net) (Ping timeout: 121 seconds)
[17:04:50] <ogham> killercup: It's not so much that, it's more the fact that you spend ages going "why isn't this working! I fixed it!" before realising
[17:04:52] <PrinceRobot> For example, there is i32 str.
[17:05:06] *** Quits: frogmella (Mibbit@moz-d6t.edf.185.31.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:05:07] <burntsushi> mattico: you're almost there. the key is that `unwrap` takes your `left` and `right` fields *by value*, but `self` is borrowed, which means it's illegal.
[17:05:10] *** Joins: polyfractal (polyfractal@moz-roi.c9b.43.69.IP)
[17:05:12] *** Joins: Guest40 (textual@moz-5bku1g.chello.nl)
[17:05:30] <burntsushi> mattico: if you use, e.g., `node.left.as_ref().unwrap()`, then it will borrow instead of taking it by value.
[17:05:51] <burntsushi> PrinceRobot: this? http://doc.rust-lang.org/std/#primitives
[17:05:54] <killercup> ogham: dont you use local overwrites for those crates? without those i'd lose my mind on a project with more than 3 custom deps
[17:06:02] <ogham> PrinceRobot: https://doc.rust-lang.org/std/#primitives gah beaten by like five seconds!
[17:06:09] <mattico> burntsushi: Ahhhhh wow, I had tried to use .unwrap().as_ref(), but I was thinking backwards!
[17:06:17] <mattico> burntsushi: Thanks!
[17:06:31] <PrinceRobot> haha
[17:06:35] <PrinceRobot> Thanks friends :)
[17:07:04] <burntsushi> mattico: yup, the key is that unwrap is defined as `fn unwrap(self) -> T` but as_ref is `fn as_ref(&self) -> Option<&T>`
[17:07:13] <ogham> killercup: I thought about it, and not doing so has bitten me more than once - but I know I'd forget I've done that and accidentally publish my local-pointing Cargo.toml
[17:07:33] <killercup> ogham: btw, i think it super awesome that you have all those separate mini crates, thats the best way to build more complex stuff
[17:07:45] <ogham> killercup: thanks :)
[17:07:57] <PrinceRobot> My goal was to actually test the formating. It says I can put :x or :X within the mustcaches when using the println marco to get the lower and upper hex
[17:08:20] *** Joins: coxg (sazzer@moz-1hq.kh5.32.217.IP)
[17:08:25] <killercup> ogham: i meant using .cargo/config with custom paths, http://doc.crates.io/config.html
[17:08:41] *** Joins: Tuna-Fish (quassel@moz-5djkv5.kortex.jyu.fi)
[17:08:54] <ogham> killercup: Ooooooh, I didn't know about this - adding that will always use a local version if available?
[17:09:10] <ogham> that's definitely something I want, then
[17:09:19] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[17:09:35] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[17:10:04] <killercup> ogham: iirc it kinda rewrites the lookup path for crates that are just referenced by name
[17:10:08] <dinfuehr> burntsushi: thanks, i just had to checkout the rand repo and to create a .cargo/config file
[17:10:22] <dinfuehr> now it compiles again
[17:10:42] <killercup> ogham i.e., makes them work like you used [dependencies.pod] path = "lib/pod/" or something like that
[17:11:24] *** Joins: Edorian (quassel@moz-nuud6h.dynamic.qsc.de)
[17:11:43] *** Quits: alex (alex@moz-rpu.a9e.242.157.IP) (Ping timeout: 121 seconds)
[17:11:44] <ogham> I seeee
[17:12:06] *** Quits: O01eg (o01eg@moz-0t3g6d.cgbk.4n8f.2698.2a02.IP) (Client exited)
[17:12:06] *** Joins: alex (alex@moz-rpu.a9e.242.157.IP)
[17:12:15] *** Joins: tomleb (tomleb@moz-9vdbqp.dsl.bell.ca)
[17:12:32] *** Quits: coxg (sazzer@moz-1hq.kh5.32.217.IP) (Ping timeout: 121 seconds)
[17:12:48] *** Quits: Edorian (quassel@moz-nuud6h.dynamic.qsc.de) (A TLS packet with unexpected length was received.)
[17:13:43] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[17:14:10] *** Joins: edbond (edbond@moz-8st.7gv.108.109.IP)
[17:15:10] *** Quits: dfinninger (dfinninger@moz-6a9v7n.res.rr.com) (Connection closed)
[17:15:22] <asmodeius> is there any easy way to parse "2 5 11 215" as ints and put them to vector?
[17:15:41] <burntsushi> asmodeius: probably some combination of `split` and `parse`
[17:16:24] *** Joins: jimb (user@moz-6gkikn.or.comcast.net)
[17:16:35] <asmodeius> ok thanks
[17:16:40] *** Quits: bkearns (Adium@moz-1kbdt7.ca.comcast.net) (Quit: Leaving.)
[17:17:01] *** Joins: saterus (saterus@moz-rutqj0.res.rr.com)
[17:17:26] <burntsushi> asmodeius: http://is.gd/MRv1om
[17:17:58] <asmodeius> thanks a lot :)
[17:18:35] <PrinceRobot> The dust book says `let x = blah blah` is a delcaration statement so it does not return anything unlike expressions. However, it says `y = 5` IS an expression. So why can I not do `let x = (y = 5);`
[17:18:37] *** Joins: Guest74 (textual@moz-v7tv6p.ma.charter.com)
[17:18:50] *** Quits: Guest74 (textual@moz-v7tv6p.ma.charter.com) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[17:19:15] *** Joins: Guest74 (textual@moz-v7tv6p.ma.charter.com)
[17:19:15] *** Quits: Guest74 (textual@moz-v7tv6p.ma.charter.com) (Connection closed)
[17:19:23] <steveklabnik> PrinceRobot: well, for one, that wouldn't do what you want
[17:19:35] <burntsushi> asmodeius: ah! my deepest apologies, i forgot to eta reduce. improved version: http://is.gd/9p84De
[17:19:36] *** Joins: Guest74 (textual@moz-v7tv6p.ma.charter.com)
[17:19:59] *** Quits: Guest74 (textual@moz-v7tv6p.ma.charter.com) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[17:20:05] <Ms2ger> `let x = (y = 5);` works
[17:20:40] <steveklabnik> PrinceRobot: you _can_: http://is.gd/hVo06P
[17:20:43] <asmodeius> thanks :)
[17:20:52] <PrinceRobot> For me it didnt; did I mess up something? http://prntscr.com/6jzi3n
[17:21:04] <Ms2ger> It just assigns x = () though
[17:21:08] <steveklabnik> PrinceRobot: right, it did work, it just doesn't do what you expect
[17:21:19] <steveklabnik> assignment, as an expression, does not return the value assigned to
[17:21:20] <steveklabnik> it returns ()
[17:21:32] <Ms2ger> Mm, you can even write let x = y = 5;
[17:21:35] *** Joins: O01eg (o01eg@moz-9qo7oc.ltb0.4n8f.2698.2a02.IP)
[17:21:38] *** Quits: tristanseifert (tristanseif@moz-av1uqv.83ld.imo9.6000.2605.IP) (Ping timeout: 121 seconds)
[17:22:18] <PrinceRobot> steveklabnik: Ah, Yes the error does say found () when expecting i32.
[17:22:31] <Ms2ger> rusti: let x; let y; x = y = 5; println!("x={:?} y={:?}", x, y);
[17:22:32] -playbot- x=() y=5
[17:22:32] -playbot- ()
[17:22:41] *** Quits: glendc (glendc@moz-lm5.ch9.159.212.IP) (Ping timeout: 121 seconds)
[17:22:50] *** Joins: violaceae (violaceae@moz-s3vd4e.u4is.n1v0.0007.2601.IP)
[17:23:15] <FreeFull> Ms2ger: Honestly I didn't expect that to compile, but it makes sense it does
[17:23:21] <Ms2ger> Me neither :)
[17:23:38] <PrinceRobot> Ms2ger: Yes, the output is same as expected. Thanks.
[17:24:11] <Ms2ger> But you can't have that not work and still keep foo => x = y, as a match arm, I guess
[17:24:32] *** Quits: dinfuehr (dinfuehr@moz-rmfk49.highway.telekom.at) (Connection closed)
[17:24:33] <PrinceRobot> It would have been good if the book discussed this. 
[17:24:43] <PrinceRobot> whoops
[17:24:48] <Ms2ger> File an issue, please :)
[17:25:00] <PrinceRobot> it does! I just got carried away with the question. I do that sometimes!
[17:25:35] <PrinceRobot> http://prntscr.com/6jzkuv
[17:25:38] <tomleb> Did any of you guys build Rust from source on windows 7?
[17:26:12] <PrinceRobot> tomleb: May I ask - for my own interest - why you built from source instead of running the msi?
[17:26:20] *** Quits: cesar (cesar@moz-s9m7l0.lv7r.u2r6.0306.2602.IP) (Connection closed)
[17:27:03] <iopq> Did a bunch of stuff get removed from prelude recently?
[17:27:26] <FreeFull> playbot: "2 5 11 215".trim().split(' ').map(|x| x.parse::<i64>()).collect::<Vec<_>>()
[17:27:28] -playbot- [Ok(2), Ok(5), Ok(11), Ok(215)]
[17:27:48] <FreeFull> playbot: "2 5 11 215".trim().split(' ').map(|x| x.parse::<i64>()).collect::<Option<Vec<_>>>()
[17:27:50] -playbot- <anon>:14:66: 14:93 error: type mismatch resolving `<[closure <anon>:14:44: 14:64] as core::ops::FnMut<(&str,)>>::Output == core::option::Option<_>`:
[17:27:50] -playbot-  expected enum `core::result::Result`,
[17:27:50] -playbot- output truncated; full output at: http://bit.ly/1IfYpLf
[17:28:00] <steveklabnik> tomleb: WindowsBunny does
[17:28:01] <tomleb> I might sound like a complete noob but I needed the source to get Racer (Vim plugin) to work
[17:28:03] <PrinceRobot> playbot: "println!("Oh Prince Robot, you are so cute!")"
[17:28:03] -playbot- <anon>:14:9: 14:22 error: str literal with a suffix is illegal
[17:28:04] -playbot- <anon>:14         "println!("Oh Prince Robot, you are so cute!")"
[17:28:04] -playbot- output truncated; full output at: http://bit.ly/1CMMW7r
[17:28:09] <PrinceRobot> XD
[17:28:13] <FreeFull> Ok, there is a collect for Result, but not for Option
[17:28:15] <burntsushi> playbot: "2 5 11 215".trim().split(' ').map(str::parse::<i64>).collect::<Result<Vec<_>, _>>()
[17:28:18] -playbot- Ok([2, 5, 11, 215])
[17:28:27] <FreeFull> Ok, that is Result
[17:28:29] <FreeFull> >_<
[17:28:32] *** Quits: tomleb (tomleb@moz-9vdbqp.dsl.bell.ca) (Connection closed)
[17:28:38] *** Joins: tamird (textual@moz-b1l.j2m.56.172.IP)
[17:28:40] <FreeFull> Not sure how I confused Ok with Some
[17:28:49] *** darkowlzz|afk is now known as darkowlzz
[17:29:08] *** Joins: tomleb (tomleb@moz-9vdbqp.dsl.bell.ca)
[17:29:09] <PrinceRobot> playbot: println!("Oh Prince Robot, you are so cute!");
[17:29:11] -playbot- Oh Prince Robot, you are so cute!
[17:29:11] -playbot- ()
[17:29:16] <PrinceRobot> Why thank you!
[17:29:21] <tomleb> Lol
[17:29:32] *** Joins: cesar (cesar@moz-rgddno.sndgca.sbcglobal.net)
[17:29:36] * PrinceRobot wont abuse the bot anymore
[17:29:40] *** Joins: tristanseifert (tristanseif@moz-utm85r.83ld.imo9.6000.2605.IP)
[17:30:03] <steveklabnik> you can /msg it too :)
[17:30:20] <PrinceRobot> Thats actually a great way to avoid verbosity!
[17:30:36] <PrinceRobot>  /msg playbot: println!("Hey sexy, can I get your numba");
[17:30:36] *** Quits: Kinetic_Srv (mer@moz-mfp.gct.51.218.IP) (Connection closed)
[17:30:41] <PrinceRobot> drats!
[17:30:44] *** Quits: cesar (cesar@moz-rgddno.sndgca.sbcglobal.net) (Connection closed)
[17:30:48] *** Joins: alhof (dylan@moz-v7a.6j4.9.153.IP)
[17:30:55] <PrinceRobot> its query on my client
[17:31:04] *** Joins: Kinetic_Srv (mer@moz-mfp.gct.51.218.IP)
[17:31:33] *** Joins: dylan_ (dylan@moz-v7a.6j4.9.153.IP)
[17:31:40] *** Joins: summerlight_ (summerlight@moz-99k.2mj.130.121.IP)
[17:31:46] *** Joins: tamird_ (textual@moz-5v5pe2.ca.comcast.net)
[17:32:00] *** Quits: tamird_ (textual@moz-5v5pe2.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[17:32:01] <kimundi> playbot: "2 5 11 215".trim().split(' ').map(str::parse).collect::<Result<Vec<i64>, _>>()
[17:32:03] -playbot- Ok([2, 5, 11, 215])
[17:32:06] <steveklabnik> yes, let's please keep _that_ out of the channel, thanks
[17:32:48] <PrinceRobot> Do you guys think it would be okay if I make videos using the book?
[17:32:57] *** Joins: dstrbad (dstrbad@moz-2mhph9.dsl.iskon.hr)
[17:32:59] *** Joins: simonoram (simonoram@moz-pllbvg.cable.virginm.net)
[17:33:06] *** Quits: edbond (edbond@moz-8st.7gv.108.109.IP) (Ping timeout: 121 seconds)
[17:33:08] *** darkowlzz is now known as darkowlzz|afk
[17:33:21] <bluss> kimundi: that's nice
[17:33:22] *** Quits: tamird (textual@moz-b1l.j2m.56.172.IP) (Ping timeout: 121 seconds)
[17:33:38] *** Quits: violaceae (violaceae@moz-s3vd4e.u4is.n1v0.0007.2601.IP) (Quit: Leaving)
[17:33:47] *** Quits: tristanseifert (tristanseif@moz-utm85r.83ld.imo9.6000.2605.IP) (Ping timeout: 121 seconds)
[17:33:57] <steveklabnik> PrinceRobot: legally, it is fine. the book's contents are available under the same license as Rust itself, which means as long as you also mntion that it's MIT, you're good
[17:34:03] *** Quits: iskatu (iskatu@moz-5gvv4e.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[17:34:31] <steveklabnik> ie, https://github.com/rust-lang/rust/blob/master/LICENSE-MIT <-
[17:34:40] *** Joins: fmendez (fmendez@moz-1jn.fqm.166.190.IP)
[17:35:42] *** Quits: summerlight_ (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[17:36:01] <PrinceRobot> steveklabnik: Cool, some dude said "[if you can explain it simply you understand it well enough]"; So i might make the videos to see if I understand things correctly. I will make them public but not anticipating them to be watched by anyone other than a few friends :)
[17:36:01] *** Quits: dlc (dlc@moz-ijetde.res.rr.com) (Quit: Leaving)
[17:36:52] <steveklabnik> :)
[17:38:05] *** Joins: fyolnish (fyolnish@moz-fajhu6.au-net.ne.jp)
[17:38:35] <FreeFull> PrinceRobot: Your problem was that you put a space before the /msg
[17:39:00] <FreeFull> You'd need to get rid of the : though
[17:39:28] <PrinceRobot> FreeFull: Yes the ":" was the problem. But /msg does not work I removed it from settings. Also the space was intentional, just trolling
[17:39:49] *** Joins: iskatu (iskatu@moz-ft041k.dip0.t-ipconnect.de)
[17:40:12] *** Quits: UberLambda (uber@moz-4u4.v1a.84.82.IP) (Quit: Leaving the Matrix)
[17:40:23] *** Joins: UberLambda (uber@moz-4u4.v1a.84.82.IP)
[17:40:52] *** Quits: isaacd (quassel@moz-4oj8is.east.verizon.net) (Ping timeout: 121 seconds)
[17:41:30] *** Quits: noam (noam@moz-6kn.6at.57.213.IP) (Quit: Leaving)
[17:41:36] <FreeFull> PrinceRobot: Ok
[17:43:04] *** Quits: tomleb (tomleb@moz-9vdbqp.dsl.bell.ca) (Quit: leaving)
[17:43:46] *** Joins: Guest74 (textual@moz-v7tv6p.ma.charter.com)
[17:43:51] *** Joins: tamird_ (textual@moz-b1l.j2m.56.172.IP)
[17:45:11] *** Quits: Myst (Thunderbird@moz-o9q90t.cable.rogers.com) (Ping timeout: 121 seconds)
[17:45:12] *** Quits: fyolnish (fyolnish@moz-fajhu6.au-net.ne.jp) (Ping timeout: 121 seconds)
[17:45:48] *** Joins: Myst (Thunderbird@moz-o9q90t.cable.rogers.com)
[17:46:23] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[17:46:28] *** Joins: reem_ (reem@moz-2icmmi.ca.comcast.net)
[17:47:34] <iopq> what's a way to list unstable options?
[17:48:48] *** Quits: SerialVelocity (SerialVeloc@moz-attia0.cable.virginm.net) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[17:49:24] *** Quits: reem_ (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[17:50:12] *** Joins: hoony (Thunderbird@moz-q5r.8e9.96.183.IP)
[17:50:18] *** Joins: tamird (textual@moz-b1l.j2m.56.172.IP)
[17:50:38] *** Joins: psy (psy@moz-ous.ntd.6.103.IP)
[17:50:51] *** Quits: tamird_ (textual@moz-b1l.j2m.56.172.IP) (Ping timeout: 121 seconds)
[17:52:30] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[17:55:12] *** Quits: futile (felix@moz-5kl.840.188.178.IP) (Ping timeout: 121 seconds)
[17:55:14] <kmcguire> anyway to make `cargo doc` build for target and not host?
[17:55:49] <iopq> kmcguire: sure, just copy its output and then change some stuff
[17:55:57] <kmcguire> hmm
[17:56:03] <kmcguire> iopq, good idea
[17:56:16] *** Quits: tamird (textual@moz-b1l.j2m.56.172.IP) (Quit: Textual IRC Client: www.textualapp.com)
[17:56:24] <iopq> I have to do this to compile optimized debug builds
[17:56:37] <XMPPwocky> uh
[17:56:40] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[17:56:40] *** ChanServ sets mode: +o erickt
[17:56:43] <XMPPwocky> you can just put a profile in Cargo.toml for that
[17:57:26] <XMPPwocky> http://doc.crates.io/manifest.html
[17:57:28] *** Joins: Rym (y@moz-vsu.f6d.55.31.IP)
[17:57:34] <XMPPwocky> http://doc.crates.io/manifest.html#the-[profile.*]-sections
[17:57:40] *** Quits: saterus (saterus@moz-rutqj0.res.rr.com) (Connection closed)
[17:58:33] *** Quits: bombless (bombless@moz-e1624i.0v2u.0v40.0da8.2001.IP) (Quit: Leaving)
[17:59:51] <kmcguire> i notice `cargo doc` tests your code comments.. is this a feature of rustdoc or cargo?
[18:00:03] <kmcguire> i can never figure out how, or if, rustdoc can, or does, that
[18:00:39] <XMPPwocky> rustdoc --test
[18:01:08] <steveklabnik> yup
[18:01:12] <steveklabnik> you point that at the crate root
[18:01:31] <kmcguire> awesome!!!!
[18:01:41] *** Joins: CustosLimen (CustosLimen@moz-sp8b2d.mtnbusiness.co.za)
[18:01:48] *** Joins: hhhhhhhhhh (mike@moz-969kuj.cable.virginm.net)
[18:02:00] *** Joins: dpc_ (dpc@moz-a8v.6sn.162.73.IP)
[18:02:13] <kmcguire> oh crap it was in --help ..
[18:02:28] <kmcguire> dont ask me how i missed it.. i been looking for it for about two months
[18:02:30] *** Joins: zet (lennart@moz-sg3vdn.dip0.t-ipconnect.de)
[18:03:34] *** Quits: infynyxx (infynyxx@moz-85e.umq.196.73.IP) (Connection closed)
[18:04:01] *** Parts: PrinceRobot (BhargavR@moz-6dkpra.cable.rogers.com) ()
[18:05:06] *** Quits: kanzeon (kanzeon@moz-r5uor8.milwwi.sbcglobal.net) (Connection closed)
[18:06:40] *** Quits: tinaun (tinaun@moz-7l08ds.ct.comcast.net) (Connection closed)
[18:07:46] *** Quits: robo9k (nik@moz-2cj.3lo.147.5.IP) (Quit: Leaving)
[18:08:33] *** Quits: iliekturtles (mike@moz-c7hb0v.me.comcast.net) (Ping timeout: 121 seconds)
[18:08:51] *** Quits: wldcordeiro_ (wldcordeiro@moz-863roc.hfc.comcastbusiness.net) (Ping timeout: 121 seconds)
[18:09:10] *** Joins: tinaun (tinaun@moz-7l08ds.ct.comcast.net)
[18:09:24] *** Joins: wldcordeiro_ (wldcordeiro@moz-863roc.hfc.comcastbusiness.net)
[18:09:26] <Guest40> Is there a way to store something owned, and something that borrows from that very same owned thing in a struct together?
[18:09:37] *** Joins: iliekturtles (mike@moz-c7hb0v.me.comcast.net)
[18:09:39] *** Quits: kazimuth (james@moz-gne.8or.17.73.IP) (Ping timeout: 121 seconds)
[18:09:51] <Ms2ger> No
[18:10:06] <Ms2ger> eddyb, weren't you going to write a FAQ entry about that?
[18:10:17] *** Joins: Gamecubic (cubic@moz-qfrl13.mc.videotron.ca)
[18:10:27] <FreeFull> Strictly speaking, there is a way to do that, but it has problems
[18:10:55] <Ms2ger> See, that's why I wan't a FAQ entry
[18:11:09] <Guest40> that'd be nice :-)
[18:11:18] <Ms2ger> wan't
[18:11:24] <Ms2ger> I swear I'm not drunk
[18:11:47] <kimundi> Guest40: Only possible by making the struct borrow itself, which would make it unmovable
[18:12:24] <Ms2ger> Consider an immovable spherical cow in a vacuum...
[18:12:32] *** Joins: jviereck (Adium@moz-pqri8u.dclient.hispeed.ch)
[18:12:59] <FreeFull> playbot: struct Foo<'a> { bar: String, baz: Cell<Option<&'a str>> } let foo = Foo { bar: "banana chocolate".to_string(), baz: Cell::new(None) }; foo.baz.set(foo.bar.split(' ').next()); println!("{}", foo.baz);
[18:13:00] -playbot- output truncated; full output at: http://bit.ly/1Fqfjsl
[18:13:24] *** Quits: dylan_ (dylan@moz-v7a.6j4.9.153.IP) (Ping timeout: 121 seconds)
[18:13:35] *** Quits: jviereck (Adium@moz-pqri8u.dclient.hispeed.ch) (Quit: Leaving.)
[18:13:36] *** Quits: alhof (dylan@moz-v7a.6j4.9.153.IP) (Ping timeout: 121 seconds)
[18:13:46] <FreeFull> playbot: use std::cell::Cell; struct Foo<'a> { bar: String, baz: Cell<Option<&'a str>> } let foo = Foo { bar: "banana chocolate".to_string(), baz: Cell::new(None) }; foo.baz.set(foo.bar.split(' ').next()); println!("{}", foo.baz.get());
[18:13:48] -playbot- output truncated; full output at: http://bit.ly/1C2IGwQ
[18:13:50] *** Quits: flacko (chatzilla@moz-252.vp3.60.78.IP) (Connection closed)
[18:13:53] <Guest40> My use case is that I have a stream and a wrapper with a buffer that mutably borrows a stream. I want to store that wrapper, but can only do that if I also have storage for the original stream
[18:14:03] <FreeFull> playbot: use std::cell::Cell; struct Foo<'a> { bar: String, baz: Cell<Option<&'a str>> } let foo = Foo { bar: "banana chocolate".to_string(), baz: Cell::new(None) }; foo.baz.set(foo.bar.split(' ').next()); println!("{:?}", foo.baz.get());
[18:14:07] -playbot- Some("banana")
[18:14:07] -playbot- ()
[18:14:21] <asmodeius> is there a way to concatenate two Strings?
[18:14:27] <asmodeius> or to convert int to str
[18:14:30] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[18:14:36] <FreeFull> asmodeius: There are ways to do both things
[18:14:39] <steveklabnik> yeah both
[18:14:43] <steveklabnik> plhk_: 5.to_string()
[18:14:45] <steveklabnik> err
[18:14:45] <steveklabnik> lol
[18:14:49] <steveklabnik> playbot: 5.to_string()
[18:14:50] -playbot- "5"
[18:14:53] *** Quits: hoony (Thunderbird@moz-q5r.8e9.96.183.IP) (Ping timeout: 121 seconds)
[18:14:54] <eddyb> Ms2ger: FAQ? 
[18:15:00] <asmodeius> but it returns String
[18:15:02] <asmodeius> not str
[18:15:03] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[18:15:05] <kimundi> Guest40: What you probably want is a abstraction over "pointer into a stable location with a handle to that location", which we are lacking in Rust at this point
[18:15:13] <eddyb> Ms2ger: no, faqu
[18:15:21] <Ms2ger> That's not nice :(
[18:15:31] <eddyb> you said it first!
[18:15:39] *** Joins: alhof (dylan@moz-v7a.6j4.9.153.IP)
[18:15:39] *** Joins: dylan_ (dylan@moz-v7a.6j4.9.153.IP)
[18:15:43] <eddyb> Ms2ger: seriously now, I have no idea what you're talking about
[18:15:46] <Guest40> kimundi: Thanks, I'll look for another solution then
[18:16:06] <Guest40> I could patch the buffer to also have a variation that takes ownership probably
[18:16:11] *** Quits: simonoram (simonoram@moz-pllbvg.cable.virginm.net) (Client exited)
[18:16:12] <Ms2ger> eddyb, I thought you were going to write that up, but I guess I misremember
[18:16:25] <iopq> does format! make a String?
[18:16:42] <flan3002> It should.
[18:16:44] *** Joins: murz (murz@moz-h10.ori.130.24.IP)
[18:16:57] <kimundi> Guest40: Well, I meant the general case - maybe your usecase is fine with the specific case of having the struct locked to its position on the stack, which is where you can use selr borrowing
[18:17:00] <kimundi> self*
[18:17:02] <iopq> flan3002: how do interpolate a str in a str
[18:17:17] <flan3002> iopq - What do you mean?
[18:17:28] <steveklabnik> asmodeius: String derefs into &str though
[18:17:32] *** Joins: envi_u (envi@moz-ih5.olo.169.121.IP)
[18:17:40] <flan3002> playbot: let s: String = format!("{}", "hello"); s
[18:17:42] -playbot- "hello"
[18:17:58] <flan3002> Or rather...
[18:18:01] <iopq> flan3002 I use format!("foo{}baz", bar) but it gives me a String instead of astr
[18:18:17] <flan3002> iopq - That's impossible, at least with format!.
[18:18:20] <kimundi> We really need a way to abstract over (T, *U), where *U points into T at a stable address even if T gets moved.
[18:18:30] *** Joins: nano (nano@moz-00j6et.dynamic.kabel-deutschland.de)
[18:19:30] *** Quits: murz (murz@moz-h10.ori.130.24.IP) (Quit: Be back later ...)
[18:19:35] *** Joins: essem2 (Thunderbird@moz-5hqi9f.sd.cox.net)
[18:19:35] <asmodeius> steveklabnik: ok thanks :)
[18:19:58] <kimundi> iopq: a &str needs to point somewhere - eiother static memory like for string literals, or some runtime allocation like a buffer on the stack or a String
[18:20:13] <iopq> kimundi: why doesn't the compiler generate a static string at compile time then?
[18:20:13] *** Joins: a5i (uid59278@moz-0a9h81.ealing.irccloud.com)
[18:20:26] *** a5i is now known as WD-40
[18:20:47] <kmcguire> ah .. can not pass a closure for a function pointer
[18:21:15] <WD-40> playbot: WD-40
[18:21:16] -playbot- <anon>:14:9: 14:11 error: unresolved name `WD`
[18:21:16] -playbot- <anon>:14         WD-40
[18:21:16] -playbot- output truncated; full output at: http://bit.ly/1Fqhzjo
[18:21:18] <talchas> if you're doing this at compile time, does concat!(stringify!()) work?
[18:21:27] <WD-40> Exterminated :D
[18:21:43] *** Quits: rntz_ (rntz@moz-l9e88u.fios.verizon.net) (Ping timeout: 121 seconds)
[18:21:43] <FreeFull> concat! only accepts idents
[18:21:48] <talchas> ah
[18:21:50] <talchas> right
[18:21:52] *** darkowlzz|afk is now known as darkowlzz
[18:21:54] <FreeFull> Wait, not idents
[18:21:57] <FreeFull> Whatever they were called
[18:22:08] <WD-40> spaces
[18:22:12] *** Quits: larhat (Adium@moz-9vj.vcf.204.37.IP) (Quit: Leaving.)
[18:22:25] <kimundi> iopq: So a function can not just return a new &str, as would be necessary for such a format! macro
[18:22:42] <talchas> no, concat is what I want, concat_idents is the other one
[18:22:55] <talchas> playbot: concat!("foo", stringify!(1))
[18:22:56] -playbot- "foo1"
[18:22:59] <iopq> kimundi: I mean I just want it to do concat! but not in a cringy way
[18:22:59] <talchas> yeah, that works
[18:23:15] <iopq> playbot: concat!("foo", "bar", "baz")
[18:23:16] -playbot- "foobarbaz"
[18:23:27] *** Quits: Rym (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[18:23:46] *** Joins: rntz_ (rntz@moz-l9e88u.fios.verizon.net)
[18:23:57] <kimundi> iopq: That would be a very restricted variation of the format macro though
[18:23:59] *** Joins: mcanders (carter@moz-of559n.il.comcast.net)
[18:24:35] <iopq> kimundi: I guess I want unlimited compile-time execution
[18:24:41] <kimundi> heh
[18:24:50] <kimundi> who doesn't ;)
[18:24:55] <talchas> I mean, "I'd like constexpr" is not an unreasonable position
[18:25:09] <FreeFull> constexprs would be nice
[18:25:19] *** Joins: dinfuehr (dinfuehr@moz-rmfk49.highway.telekom.at)
[18:25:23] <FreeFull> playbot: concat!("foo", 1)
[18:25:25] -playbot- "foo1"
[18:25:32] <FreeFull> talchas: I don't see a reason to use stringify!
[18:25:54] <talchas> FreeFull: because I didn't know concat! had a built in one :P
[18:26:19] <kimundi> concat!("foo", b"foo")
[18:26:24] *** Joins: murz (murz@moz-h10.ori.130.24.IP)
[18:26:25] *** darkowlzz is now known as darkowlzz|afk
[18:26:26] <kimundi> playbot: concat!("foo", b"foo")
[18:26:27] -playbot- <anon>:14:24: 14:30 error: cannot concatenate a binary literal
[18:26:27] -playbot- <anon>:14         concat!("foo", b"foo")
[18:26:27] -playbot- output truncated; full output at: http://bit.ly/1C2KdDd
[18:26:50] <talchas> hmm, that's a bit of an incorrect error message
[18:27:03] <iopq> this USED TO work: Path::new(format!("fixtures/sgf/{}.sgf", name))
[18:27:34] <talchas> in terms of no-allocation, or just compiling?
[18:27:43] <iopq> talchas: in terms of compiling
[18:28:11] <kimundi> iopq: Pretty sure you need to use PathBuf instead now
[18:28:27] <kimundi> PathBuf ~= String; Path ~= str
[18:28:50] *** Joins: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net)
[18:28:56] *** Joins: Matthias247 (Miranda@moz-49li60.hsi14.kabel-badenwuerttemberg.de)
[18:28:59] <iopq> kimundi: I can't use PathBuf because then I'd have to change to PathBuf everywhere
[18:29:06] *** Joins: dmac (dmac@moz-2ig65r.ca.comcast.net)
[18:29:06] <iopq> kimundi: wtb Rust IDE, pst
[18:29:14] *** Joins: violaceae (violaceae@moz-s3vd4e.u4is.n1v0.0007.2601.IP)
[18:29:22] <XMPPwocky> Petition to rename String to StrBuf
[18:29:25] *** Quits: dinfuehr (dinfuehr@moz-rmfk49.highway.telekom.at) (Ping timeout: 121 seconds)
[18:29:34] <iopq> XMPPwocky: you don't want to go there
[18:29:41] <XMPPwocky> that was a thing
[18:29:45] <XMPPwocky> and i actually think it was better
[18:29:47] <iopq> XMPPwocky: sheds painted as the eye can see
[18:29:53] <kimundi> What about Vec? []Buf? :P
[18:29:58] <XMPPwocky> because now you have "rust has two strings, wtf"
[18:29:59] *** Quits: fmendez (fmendez@moz-1jn.fqm.166.190.IP) (Connection closed)
[18:30:09] *** Quits: mattico (Matthew@moz-0vjqsn.mpls.qwest.net) (Ping timeout: 121 seconds)
[18:30:23] <iopq> kimundi: I'd rather just see arr(Foo, 3) or something
[18:30:31] <kimundi> XMPPwocky: Eh, that kind of WTF you get either way, no matter how you name them
[18:30:34] *** Joins: Rym (y@moz-vsu.f6d.55.31.IP)
[18:30:40] <iopq> kimundi: array special casing is kind of weird because Vec is more common
[18:30:41] <iliekturtles> Path and &path!
[18:31:00] <iopq> iliekturtles: [] and &[]!
[18:31:08] <iopq> [] being Vector
[18:31:18] *** Quits: djcb (user@moz-8r0oht.elisa-laajakaista.fi) (Connection closed)
[18:31:25] <kimundi> iopq: Funny, arrays are a third aspect besides Vec and slices :P
[18:32:04] <iopq> kimundi: I tried really hard to make an array outperform a Vec and I couldn't
[18:32:13] <kimundi> iopq: What do you mean?
[18:32:38] *** Joins: eerie (eerie@moz-nu5r7u.red.bezeqint.net)
[18:32:43] <kimundi> The difference is not really performance related...
[18:32:46] <iopq> kimundi: I had a lot of vectors so I thought it would be faster if they were arrays, but Vec for small types performs just fine except for the allocation cost
[18:33:31] <iopq> kimundi: why wouldn't you just use a Vec everywhere
[18:33:44] <kimundi> iopq: Well sure, but the allocation cost itself is the difference :P
[18:34:05] <iopq> kimundi: yeah, it adds 20ms to my board setup and then there is no cost
[18:34:26] <kimundi> iopq: Becuase there is no need for it to force dynamic memory allocations everywhere where you want to abstract over N elements
[18:34:58] *** Quits: hhhhhhhhhh (mike@moz-969kuj.cable.virginm.net) (Quit: WeeChat 1.1.1)
[18:35:01] <iopq> ok, here's the question
[18:35:05] <iopq> my function is really short
[18:35:07] *** Quits: Rym (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[18:35:15] <iopq> fn sgf(name : &'static str) -> &Path {     Path::new(format!("fixtures/sgf/{}.sgf", name)) }
[18:35:22] <iopq> but it can't be done now
[18:35:45] <iopq> am I really just going to manually search and replace its instances
[18:35:49] <kimundi> Pretty sure that didn't work before either
[18:36:05] <iopq> kimundi: it was a little different before
[18:36:39] <kimundi> fn sgf(name : &'static str) -> PathBuf { PathBuf::new(format!("fixtures/sgf/{}.sgf", name)) } // I assume the new version would look somewhat like this
[18:36:52] <iopq> kimundi: I didn't have to do &Path in my code before and for some reason now I do
[18:37:05] <kimundi> Yes because Path is a usnized type like str now
[18:37:30] <kimundi> &Path points at some memory containing the bytes of the actual Path
[18:37:46] <kimundi> which is some kind of OS-depended binary data
[18:38:01] <iopq> yes, I just want 'static str
[18:38:10] <iopq> "fixtures/sfg/foo.sgf"
[18:38:23] <iopq> so I can write sgf("foo")
[18:38:31] <iopq> instead of having to type that whole thing
[18:38:33] <kimundi> well, you can't have that with format!, and couldn't before either
[18:38:36] *** Quits: RossJH (textual@moz-8vn4o2.range86-165.btcentralplus.com) (Ping timeout: 121 seconds)
[18:38:44] <iopq> well before I didn't have to
[18:38:57] <kimundi> Before you returned the old Path
[18:38:57] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[18:39:02] <kimundi> WHich is the same as the new PathBuf
[18:39:03] *** Joins: tristanseifert (tristanseif@moz-r0t7ns.res.rr.com)
[18:39:22] <iopq> I get the feeling that Rust doesn't like functions
[18:39:27] <XMPPwocky> what?
[18:39:42] <iopq> I just don't write short functions in Rust, it's too much work
[18:39:54] <kimundi> iopq: I really don't see the issue here, apart from catching up with library renamings :P
[18:40:03] <iopq> even my PRIVATE functions have to have a signature
[18:40:15] <iopq> and if I create too many of them, I have to rename them
[18:40:21] <iopq> when my IMPLEMENTATION changes
[18:40:33] <iopq> *change the signature
[18:40:47] *** Quits: Guest74 (textual@moz-v7tv6p.ma.charter.com) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[18:40:47] *** Joins: toqueteos (toqueteos@moz-plqtsp.staticIP.rima-tde.net)
[18:40:47] *** Joins: skali (skali@moz-u41o58.dynamic.ufanet.ru)
[18:41:00] *** Joins: filsmick (filsmick@moz-6jcjhe.abo.wanadoo.fr)
[18:41:05] *** Joins: hhhhhhhhhh (mike@moz-969kuj.cable.virginm.net)
[18:41:28] <iopq> it's actually easier to just write a 200 line function that is the entire API because if you change the implementation you don't have to change internal signatures like you would
[18:41:33] <iopq> when writing a function
[18:42:17] <filsmick> what happens when you pass an invalid path string to std::path::Path::new()?
[18:42:24] *** Joins: doomrobo (doomrobo@moz-tj2e6v.261j.6edk.2000.2604.IP)
[18:42:27] *** Joins: fyolnish (fyolnish@moz-fajhu6.au-net.ne.jp)
[18:42:45] <kimundi> panic! or Err/None result I guess
[18:42:52] * Ralith has difficulty imagining how someone could see writing type signatures as an unreasonable amount of effort
[18:43:16] <iopq> Ralith because I don't know what they are
[18:43:23] <doomrobo> hey, could someone explain what's causing this "Does not implement Sized" error and how to fix it? This code compiled fine roughly a month ago. The error is all the way at the bottom of the file. Most of the code is irrelevant but I included it anyway: http://pastebin.com/kEbkrRNK
[18:43:55] <iopq> Ralith I tried to get the compiler to help me and I wrote foo(_) -> _ and expected it to tell me that the missing types are something
[18:43:59] <filsmick> kimundi: https://doc.rust-lang.org/std/path/struct.Path.html#method.new it returns a &Path so I guess it's a panic
[18:44:06] <iopq> Ralith but then it just complained that I can't put _ in signatures
[18:44:21] <steveklabnik> doomrobo: well the reason it worked a month ago but not now is that new io and path and such have landed
[18:44:34] *** Quits: mystor (mystor@moz-dvb.6fm.114.24.IP) (Connection closed)
[18:44:39] <iopq> Ralith this is my signature: fn spin_up_worker<'a, T: McEngine>(color: Color, recv_halt: Receiver<()>, moves: &'a Vec<Move>, board: Board, send_result: Sender<(MoveStats<'a>, usize)>) -> thread::JoinGuard<'a, ()>
[18:45:04] <doomrobo> steveklabnik, I updated the path code. It was a simple change from std::old_io::Path to std::path::Path
[18:45:05] <steveklabnik> doomrobo: but of course that does not solve your problem
[18:45:27] *** Quits: mcanders (carter@moz-of559n.il.comcast.net) (Ping timeout: 121 seconds)
[18:45:52] <steveklabnik> that error does seem strange
[18:46:39] <doomrobo> especially because nothing on that line is [u8] :\
[18:47:23] <steveklabnik> right
[18:47:26] <steveklabnik> that makes me suspect Deref
[18:47:28] <steveklabnik> or some similar thing
[18:47:28] <doomrobo> the only use of [u8] is PassType::Pattern([u8])
[18:47:33] <doomrobo> oh, ok
[18:47:38] *** Quits: marsel (user@moz-tjk.bk3.180.94.IP) (Ping timeout: 121 seconds)
[18:47:44] <doomrobo> Deref is great but it sucks when debugging
[18:49:07] *** Joins: jonalmeida (jonalmeida@moz-5j8.kvb.131.104.IP)
[18:49:28] *** Quits: jonalme__ (jonalmeida@moz-5j8.kvb.131.104.IP) (Connection closed)
[18:49:29] *** Quits: fyolnish (fyolnish@moz-fajhu6.au-net.ne.jp) (Ping timeout: 121 seconds)
[18:49:34] *** Joins: tadh (quassel@moz-vas.mlv.200.12.IP)
[18:49:42] *** Joins: bkearns (Adium@moz-1kbdt7.ca.comcast.net)
[18:50:30] <doomrobo> ugh, pastebin's Rust syntax highlighting is treating lifetimes like 'a as the beginning of a string
[18:51:02] *** Joins: pedroff (pedroff@moz-5327rl.rev.vodafone.pt)
[18:51:09] *** Joins: mkpankov (user@moz-f68.70f.16.195.IP)
[18:51:13] <mkpankov> hi
[18:51:26] *** Quits: pedroff (pedroff@moz-5327rl.rev.vodafone.pt) (Connection closed)
[18:51:38] <doomrobo> hey
[18:51:38] *** Quits: dstrbad (dstrbad@moz-2mhph9.dsl.iskon.hr) (A TLS packet with unexpected length was received.)
[18:51:50] <mkpankov> could someone help me out with error? "error: source trait is private". what does that even mean?
[18:51:59] *** Quits: Wild_Cat (Max@moz-r586am.cpe.teksavvy.com) (Ping timeout: 121 seconds)
[18:52:15] <iopq> doomrobo: so does eclipse
[18:52:21] <steveklabnik> mkpankov: it means that the trait is private
[18:52:35] <iopq> steveklabnik: amazing answer
[18:52:38] *** Joins: brson (brson@moz-kq1.7vl.56.172.IP)
[18:52:38] *** ChanServ sets mode: +ao brson brson
[18:53:08] <doomrobo> mkpankov, can you paste the offending code?
[18:53:20] <mkpankov> steveklabnik: well I thought the traits are always public somehow 8)
[18:53:35] <killercup> mkpankov: maybe put a `pub` in front of definition of the trait you're implementing?
[18:53:51] <steveklabnik> iopq: :p working on something more in depth
[18:54:10] <steveklabnik> mkpankov: yeah i was trying to work up some code
[18:54:23] <iopq> steveklabnik: good, I'm starving for documentation. I've been on this IRC for days on end now.
[18:54:26] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[18:54:28] *** Joins: tjr_ (trevor.rile@moz-g4gvlm.mn.comcast.net)
[18:54:29] <mkpankov> https://github.com/mkpankov/bread/blob/master/src/lib.rs#L283
[18:54:44] <steveklabnik> mkpankov: there we go: http://is.gd/a6gPrt
[18:54:58] <steveklabnik> mkpankov: check it out: if you don't have the 'pub', then it doesn't work
[18:55:09] <steveklabnik> iopq: docs of what?
[18:55:21] <iopq> steveklabnik document ALL the things
[18:55:24] <mkpankov> I believe this is related to rework of term crate
[18:55:46] <steveklabnik> iopq: then you wouldn't want me to be on IRC :p
[18:55:51] *** Joins: tomleb (tomleb@moz-9vdbqp.dsl.bell.ca)
[18:56:10] <iopq> steveklabnik: I thought your working on more in depth things meant you were working on documentation ;p
[18:56:35] *** Quits: fmtq (fmtq@moz-d08itp.tpgi.com.au) (Ping timeout: 121 seconds)
[18:57:11] *** Joins: dinfuehr (dinfuehr@moz-rmfk49.highway.telekom.at)
[18:57:13] *** Joins: coxg (sazzer@moz-1hq.kh5.32.217.IP)
[18:57:17] *** Joins: timj (timj@moz-qrm.hdf.102.91.IP)
[18:57:36] *** Joins: fmtq (fmtq@moz-d08itp.tpgi.com.au)
[18:58:04] *** Joins: dstrbad (dstrbad@moz-2mhph9.dsl.iskon.hr)
[18:58:18] *** Joins: mcanders (carter@moz-of559n.il.comcast.net)
[18:58:32] *** Quits: tjr_ (trevor.rile@moz-g4gvlm.mn.comcast.net) (Ping timeout: 121 seconds)
[18:59:16] *** Joins: ebel (rory@moz-0lehdb.m4r4.nqcu.0470.2001.IP)
[18:59:19] <filsmick> what does https://doc.rust-lang.org/core/slice/trait.SliceExt.html#tymethod.tail do? There's no explanation of its function
[18:59:59] <steveklabnik> filsmick: tail is usually a function that returns everything but the head of the list
[19:00:03] *** Joins: tjr_ (trevor.rile@moz-pk8hdi.re61.4rqa.0002.2601.IP)
[19:00:06] <steveklabnik> (1, 2, 3).tail => (2, 3)
[19:00:15] <filsmick> steveklabnik: oh, thanks! It works on iterators too?
[19:00:20] <tomleb> Anyone using Racer for rust?
[19:00:26] <filsmick> I've searched the docs for it but couldn't find anything
[19:00:29] <tomleb> on vim
[19:00:40] <steveklabnik> filsmick: what do you mean by 'it works on iterators'?
[19:00:53] <filsmick> steveklabnik: can I call tail on an iterator or do I need to .skip(1)?
[19:01:02] <steveklabnik> well, that is on SliceExt
[19:01:11] <steveklabnik> i don't know if there are other tail methods on other things
[19:01:17] <filsmick> ok, thanks anyway :)
[19:01:23] <filsmick> Knowing what it does is already good
[19:01:25] *** Quits: coxg (sazzer@moz-1hq.kh5.32.217.IP) (Ping timeout: 121 seconds)
[19:01:34] *** Joins: Shackra (Jorge@moz-7bh.ng6.177.186.IP)
[19:01:56] *** Quits: jimb (user@moz-6gkikn.or.comcast.net) (Ping timeout: 121 seconds)
[19:02:07] *** Quits: dstrbad (dstrbad@moz-2mhph9.dsl.iskon.hr) (Ping timeout: 121 seconds)
[19:02:45] *** Quits: Tuna-Fish (quassel@moz-5djkv5.kortex.jyu.fi) (Connection closed)
[19:03:20] <doomrobo> steveklabnik, so any idea r.e the Sized trait?
[19:03:25] *** Joins: eerie_ (eerie@moz-nu5r7u.red.bezeqint.net)
[19:03:44] *** Joins: Hannibal_Smith (nico@moz-j5root.retail.telecomitalia.it)
[19:03:54] *** Joins: Tuna-Fish (quassel@moz-5djkv5.kortex.jyu.fi)
[19:03:57] <steveklabnik> doomrobo: nope, unsure
[19:04:06] *** Quits: tjr_ (trevor.rile@moz-pk8hdi.re61.4rqa.0002.2601.IP) (Ping timeout: 121 seconds)
[19:04:14] *** Quits: skali (skali@moz-u41o58.dynamic.ufanet.ru) (Ping timeout: 121 seconds)
[19:04:32] *** Quits: dpc_ (dpc@moz-a8v.6sn.162.73.IP) (Ping timeout: 121 seconds)
[19:04:40] <doomrobo> well at least I don't feel stupid for not being able to figure it out now :P
[19:05:02] *** Joins: bdkid (Mibbit@moz-6o5c54.dynamic.tds.net)
[19:05:38] *** Quits: bdkid (Mibbit@moz-6o5c54.dynamic.tds.net) (Quit: http://www.mibbit.com ajax IRC Client)
[19:05:42] *** Quits: eerie (eerie@moz-nu5r7u.red.bezeqint.net) (Ping timeout: 121 seconds)
[19:06:08] *** Joins: JagaJaga (JagaJaga@moz-gd9.blu.205.109.IP)
[19:06:17] *** Joins: quacker (Mibbit@moz-hgb6ss.snantx.sbcglobal.net)
[19:07:04] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[19:09:57] <mkpankov> ok so the whole problem was that I was missing 'use std::io::Write`
[19:10:09] *** Joins: Racquetball (namestolenw@moz-lct3cc.res.rr.com)
[19:10:16] <mkpankov> so the error message is kinda ... erhm, misleading
[19:10:47] *** Quits: tinaun (tinaun@moz-7l08ds.ct.comcast.net) (Connection closed)
[19:10:56] <Ms2ger> The error message should say that, no?
[19:11:04] *** Quits: tadh (quassel@moz-vas.mlv.200.12.IP) (Connection closed)
[19:11:16] <mkpankov> it initially said "source trait is private"
[19:11:43] <mkpankov> what trait exactly, it didn't mention. private from which viewpoint either
[19:12:08] <Ms2ger> Huh
[19:12:41] <steveklabnik> yeah that's weird
[19:12:51] *** Quits: meh (meh@moz-u15r9i.42-151.net24.it) (Ping timeout: 121 seconds)
[19:12:58] *** Joins: futile (felix@moz-5kl.840.188.178.IP)
[19:13:51] *** Quits: iliekturtles (mike@moz-c7hb0v.me.comcast.net) (Ping timeout: 121 seconds)
[19:14:16] *** Quits: lorineth (hng@moz-eaj1g6.hfc.comcastbusiness.net) (Ping timeout: 121 seconds)
[19:14:17] <mkpankov> I figured this out by trying to `write!(t.get_mut(), ...)` where t is &mut Box<StdoutTerminal>
[19:14:43] <mkpankov> then it finally said "the trait so and so is implemented but not in scope"
[19:15:12] *** Quits: cody (cody@moz-9qq7ka.2ic3.1chi.0006.2601.IP) (Ping timeout: 121 seconds)
[19:15:19] <mkpankov> but when I added "use ..." I didn't need `.get_mut()` anymore
[19:15:32] *** Joins: kanzeon (kanzeon@moz-v32emv.rkpe.j439.030a.2602.IP)
[19:15:58] *** Joins: tamird (textual@moz-5v5pe2.ca.comcast.net)
[19:15:59] *** Quits: edlothiol (user@moz-n7m9to.unity-media.net) (Connection closed)
[19:16:22] <tamird> eddyb can you help me understand this comment? https://github.com/crabtw/rust-bindgen/issues/184#issuecomment-84520621
[19:17:02] <eddyb> I'll feel bad if it's my comment :P
[19:17:08] *** Joins: dfinninger (dfinninger@moz-6a9v7n.res.rr.com)
[19:17:10] <eddyb> *sigh*
[19:17:11] <tamird> ha
[19:17:18] <eddyb> tamird: so, what do you want to do?
[19:17:41] <tamird> i'd like to replace `quote_method!` with the blessed replacement
[19:18:04] <eddyb> FSVO "blessed"
[19:18:15] <eddyb> tamird: so you'd be the... fourth, I believe
[19:18:21] *** Joins: Guest53 (textual@moz-l52bm6.wi.charter.com)
[19:18:26] <tamird> yeah, i think so
[19:18:31] <eddyb> are you running into any issues?
[19:18:34] *** Joins: marsel (user@moz-tjk.bk3.180.94.IP)
[19:18:59] *** Joins: Lilly (Lilly@moz-ca683g.bredband.comhem.se)
[19:19:32] <tamird> right now i've just replaced quote_method with quote_item
[19:19:38] <tamird> that...seems to have unblocked me
[19:19:48] *** Joins: elgruntox (mumphster@moz-2550gj.members.linode.com)
[19:20:25] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[19:20:33] <tamird> eddyb can I share some code with you?
[19:20:46] <eddyb> tamird: shoot :D
[19:21:07] <eddyb> I've been waiting for someone to ask me about a further step in that issue
[19:21:10] *** Quits: dfinninger (dfinninger@moz-6a9v7n.res.rr.com) (Ping timeout: 121 seconds)
[19:21:14] *** Quits: dinfuehr (dinfuehr@moz-rmfk49.highway.telekom.at) (Connection closed)
[19:21:19] *** Joins: tinaun (tinaun@moz-7l08ds.ct.comcast.net)
[19:21:23] <eddyb> tamird: if I felt like dealing with clang I would just go fix that damn thing myself
[19:21:43] <tamird> i don't see problems with clang, just a sec
[19:21:45] <eddyb> I feel bad now for not adding the nasty macros
[19:22:04] *** Joins: iliekturtles (mike@moz-c7hb0v.me.comcast.net)
[19:22:15] <eddyb> tamird: well, I can't test bindgen without compiling C++ code, can I?
[19:22:20] *** Joins: skali (skali@moz-u41o58.dynamic.ufanet.ru)
[19:22:28] *** Joins: lorineth (hng@moz-eaj1g6.hfc.comcastbusiness.net)
[19:22:44] <tamird> oh, i dont know about that, but i can help you work around that (i'll just show you the errors)
[19:24:06] <tamird> eddyb: https://github.com/tamird/rust-bindgen/tree/rustup
[19:24:44] *** Joins: Rym (y@moz-vsu.f6d.55.31.IP)
[19:24:44] <tamird> eddyb: and the build output https://gist.github.com/tamird/cf34df96dda3cf5c36c2
[19:24:57] *** Joins: nrc (nrc@moz-4bhi2i.xtra.co.nz)
[19:24:57] *** ChanServ sets mode: +o nrc
[19:25:13] <asmodeius> can i create struct with lazy instantiation of members?
[19:25:26] *** Joins: kazagistar (kazagistar@moz-1jum1i.client.bresnan.net)
[19:25:38] <asmodeius> that implements set() that sets this param for first time
[19:25:39] <eddyb> tamird: that's to be expected. you need to adjust anything working with methods to use P<ImplItem>
[19:25:49] <eddyb> tamird: like, actual uses of ImplItem in bindgen
[19:26:14] *** Joins: nodweber_ (nodweber@moz-knt.fgq.178.5.IP)
[19:26:28] *** Quits: skali (skali@moz-u41o58.dynamic.ufanet.ru) (Ping timeout: 121 seconds)
[19:26:31] <asmodeius> sets member for first time*
[19:27:47] <tamird> eddyb so this where i'm out of my depth
[19:28:00] <tamird> gen_comp_methods would have to return Vec<P<ImplItem>>?
[19:28:38] <filsmick> how can I strip a newline from a String / str?
[19:28:48] <doomrobo> tamird, is it just me or does bindgen not compile?
[19:28:53] <tamird> it does not
[19:28:55] <kazagistar> I want to create an N*N mutable square matrix as a simple representation of dense graph (where N is a variable, not constant), but I can't figure out what to use... the best I can come up with is appending the elements togeather 1 by 1 into a Vec<Vec<f64>>, which sucks
[19:29:03] <iopq> filsmick try trim it's on the end or start
[19:29:04] <tamird> doomrobo: that's what i'm trying to fix :(
[19:29:12] *** Quits: quacker (Mibbit@moz-hgb6ss.snantx.sbcglobal.net) (Quit: http://www.mibbit.com ajax IRC Client)
[19:29:14] <filsmick> iopq: end
[19:29:17] *** Quits: Rym (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[19:29:19] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[19:29:25] <doomrobo> tamird, the first issue I had was with Path. Is that it or is there a lot more?
[19:29:39] <tamird> see my branch -- that one was easy
[19:29:40] <iopq> filsmick then trim() should work unless you want to keep other whitespace
[19:29:47] <tamird> doomrobo: https://github.com/tamird/rust-bindgen/tree/rustup
[19:29:48] *** Quits: kimwonyong (kimwonyong@moz-gfp.vhi.163.221.IP) (Quit: )
[19:29:50] <filsmick> iopq: I don't - thanks for the tip
[19:30:00] <filsmick> iopq: works both on &str and String?
[19:30:03] <eddyb> tamird: if they were returning Vec<ImplItem>, yes
[19:30:16] <iopq> filsmick it always gives a String back, and Strings can coerce to &str
[19:30:29] <filsmick> iopq: ok, nice
[19:30:34] *** Joins: skali (skali@moz-u41o58.dynamic.ufanet.ru)
[19:30:43] <iopq> filsmick there's three versions you can trim from beginning, end or both
[19:30:45] *** Joins: Delimiter (Mibbit@moz-trt2jc.unity-media.net)
[19:31:02] <doomrobo> oh, I need libclang
[19:31:03] <tamird> eddyb right now the code looks like this: let method = quote_item!(...); return Some(ast::MethodImplItem(method));
[19:31:15] *** Joins: alonlevy (alon@moz-4jqdpb.telavivmakers.org)
[19:31:38] <eddyb> tamird: you'd have the use the linked workaround to get a P<ImplItem>
[19:31:42] <Delimiter> Hi, is there a simple function to create something like a pipe (that returns a Write and a Read)?
[19:32:10] <tamird> ah i see
[19:32:21] *** Quits: khades (Thunderbird@moz-08k.3vk.74.212.IP) (Client exited)
[19:32:29] <Ms2ger> bjz, around?
[19:32:57] *** Joins: eerie (eerie@moz-nu5r7u.red.bezeqint.net)
[19:32:57] <ogham> Is old_io going to removed any time soon? I'd just like to know how long I can get away with not updating to use it
[19:33:07] <Ms2ger> Delimiter, do you mean channel()?
[19:33:30] <eddyb> tamird: https://github.com/rust-lang/rust/blob/master/src/test/auxiliary/macro_crate_test.rs#L85-L92
[19:33:40] <tamird> eddyb yep following that
[19:33:41] <eddyb> tamird: the result of items.pop() is a P<ImplItem>
[19:33:49] <XMPPwocky> What's the windows 32-bit target tripele?
[19:33:50] <Delimiter> Oh, yes. Pretty dump question, sorry! Thanks, @Ms2ger!
[19:33:54] <Ms2ger> Np
[19:34:47] *** Joins: khades (Thunderbird@moz-08k.3vk.74.212.IP)
[19:34:51] <tamird> eddyb in this case it'd be a `ItemFn` yeah?
[19:35:02] <eddyb> tamird: no
[19:35:04] *** Quits: ismaelga (ismaelga@moz-9sgjm2.cpe.netcabo.pt) (Ping timeout: 121 seconds)
[19:35:10] <FreeFull> ogham: I don't know how long it will stay around for, but I would switch over to new io now
[19:35:12] <eddyb> tamird: if you want a method, you need to wrap it in an impl
[19:35:18] <eddyb> tamird: and extract it from there
[19:35:27] *** Quits: eerie_ (eerie@moz-nu5r7u.red.bezeqint.net) (Ping timeout: 121 seconds)
[19:35:38] <tamird> oh, yuck, ok
[19:35:38] <ogham> FreeFull: I literally can't, as Metadata doesn't support everything that FileStat used to
[19:35:54] *** Quits: envi_u (envi@moz-ih5.olo.169.121.IP) (Ping timeout: 121 seconds)
[19:36:19] *** Quits: skali (skali@moz-u41o58.dynamic.ufanet.ru) (Ping timeout: 121 seconds)
[19:37:10] <XMPPwocky> Is there a list of target triples somewher
[19:37:19] <FreeFull> ogham: I would talk to someone about it
[19:37:25] <doomrobo> ogham, example? this might be relevant to me
[19:37:43] <cmr> XMPPwocky: http://doc.rust-lang.org/src/rustc_back/target/mod.rs.html#62
[19:37:47] <Tiktalik> is there a way to use a rust program to run a bash script?
[19:38:07] *** Quits: mkoskar (mkoskar@moz-r8s4se.server.torland.is) (Client exited)
[19:38:07] <ogham> Basically, a bunch of the stuff I need in std::fs hasn't been finished yet: https://github.com/rust-lang/rfcs/issues/939
[19:38:12] <flan3002> Tiktalik - Just run a bash script from Rust? Sure.
[19:38:26] <cmr> Tiktalik: you can invoke bash like any other program, http://static.rust-lang.org/doc/master/std/process/struct.Command.html
[19:38:37] <FreeFull> Assuming the bash script is executable, yeah
[19:38:42] <XMPPwocky> cmr: thanks
[19:38:48] <ogham> I mean, I can't complain - it takes work, after all
[19:38:53] *** Quits: Shackra (Jorge@moz-7bh.ng6.177.186.IP) (Connection closed)
[19:39:09] <flan3002> FreeFull - Not necessarily. Command::new("bash").arg(path)?
[19:39:10] <FreeFull> The OS takes care of going from "this file is executable" to "how to execute it"
[19:39:34] *** Quits: __mark__ (mark@moz-pb9mc5.dynamic.chello.pl) (Client exited)
[19:39:39] <FreeFull> flan3002: You mean, if the script isn't marked as +x?
[19:40:00] <tamird> eddyb where does Annotatable come from in this workaround?
[19:40:18] *** Quits: starless (starless@moz-u9gmm1.res.rr.com) (Quit: Leaving)
[19:40:21] <flan3002> FreeFull - Yes. This is relevant when e.g. on a filesystem that doesn't support +x.
[19:40:34] <FreeFull> Well, yeah, then you pass it to bash
[19:40:48] *** Quits: g5pw (g5pw@moz-5i3.7ej.244.162.IP) (Connection closed)
[19:40:59] *** Joins: g5pw_ (g5pw@moz-4e9gb9.me)
[19:42:14] <doomrobo> cmr, would you have any idea why I'm getting a "trait Sized not implemented" error in this code? I included the whole file but there's only one relevant section. The error text is at the bottom. http://pastebin.com/kEbkrRNK
[19:43:07] <tamird> eddyb nm, missed the `*` import
[19:43:19] *** Joins: edbond (edbond@moz-8st.7gv.108.109.IP)
[19:43:22] *** Joins: quacker (Mibbit@moz-hgb6ss.snantx.sbcglobal.net)
[19:43:22] <FreeFull> doomrobo: The new Path is unsized
[19:43:23] *** Joins: Shackra (Jorge@moz-7bh.ng6.177.186.IP)
[19:43:52] <cmr> doomrobo: use PathBuf instead.
[19:44:10] <doomrobo> interesting. Do functions never work with unsized types?
[19:44:11] <cmr> (it's the owned counterpart to Path, like String is to str)
[19:44:30] <cmr> they can, but they need to say so.
[19:44:32] <eddyb> tamird: you don't need to care about Annotatable, I don't think
[19:44:37] <tamird> yeah, you're right
[19:44:44] <tamird> this is compiling now
[19:44:47] <tamird> let's see if tests work
[19:45:09] <doomrobo> how would they say so when they're not generic?
[19:45:29] <cmr> if they're not generic, it works fine. the DST just needs to be behind some sort of pointer.
[19:46:40] *** Joins: zmack (zmack@moz-4b0.o8l.26.188.IP)
[19:46:41] <quacker> so, TcpStream read() blocks if there are no bytes to read. does rust have a way to check if there's data to read?
[19:46:54] *** Joins: fyolnish (fyolnish@moz-fajhu6.au-net.ne.jp)
[19:47:06] <quacker> I vaguely recall using select to do this with berkeley sockets.
[19:47:14] <doomrobo> cmr, but I am passing a &Path
[19:47:27] <kimundi> doomrobo: Thats fine
[19:47:45] <kimundi> doomrobo: Passing/returning a Path by value won't work though
[19:47:48] *** Quits: St4rg4t3ur (plasko_a@moz-ki7slq.abo.wanadoo.fr) (Connection closed)
[19:48:00] <cmr> quacker: there's no non-blocking io in std right now, no.
[19:48:17] <cmr> quacker: there's the (unix-only) https://github.com/carllerche/mio/ for it.
[19:48:39] <doomrobo> oh, returning in an Option<> is the issue, then
[19:48:54] *** Joins: nonsensickle (nonsensickl@moz-4v0.gkd.16.182.IP)
[19:48:57] <doomrobo> I'm just kinda pissed that the error said [u8] instead of Path
[19:49:32] <quacker> cmr: thanks. I saw that std::io is unstable right now.
[19:49:33] *** Joins: jviereck (Adium@moz-8db9c7.dclient.hispeed.ch)
[19:49:50] <FreeFull> mio doesn't handle file descriptors
[19:49:50] *** Quits: Delimiter (Mibbit@moz-trt2jc.unity-media.net) (Quit: http://www.mibbit.com ajax IRC Client)
[19:49:57] *** Quits: alex (alex@moz-rpu.a9e.242.157.IP) (Ping timeout: 121 seconds)
[19:50:10] <bodie> how's rust-sdl2?
[19:50:12] <flan3002> Any better way to debug error: unable to infer enough type information about `_`; type annotations required than looking at all involved elements? Any way to get more information what '_' it means?
[19:50:24] <FreeFull> So you'll still end up with a separate thread that blocks on stdin
[19:50:26] <eddyb> bodie: -> #rust-gamedev. also, use glutin if you can
[19:50:32] <iopq> I compiled my project with the latest Rust and lost 4% performance...
[19:50:56] <eddyb> iopq: try -Clto
[19:51:03] <eddyb> wait, I read 40%
[19:51:06] *** Joins: dstrbad (dstrbad@moz-2mhph9.dsl.iskon.hr)
[19:51:08] <bodie> eddyb, ok, cool :)
[19:51:30] <doomrobo> can I get a PathBuf from a Path?
[19:51:38] <eddyb> doomrobo: PathBuf::new
[19:51:47] <eddyb> or to_owned() (not sure if that works)
[19:51:57] <cmr> doomrobo: the relation between PathBuf and Path is that betwen String and str (and, similarly, String and &str)
[19:52:33] <doomrobo> cmr, I'm not too familiar with that relationship either :\
[19:52:42] <doomrobo> oh, there's a to_path_buf method
[19:52:45] <flan3002> ^- he means Vec and &[_]
[19:52:56] *** Joins: ihrwein (Mibbit@moz-ki50p6.sch.bme.hu)
[19:52:58] <cmr> flan3002: no I don't, but that's similar as well.
[19:53:06] *** Joins: dschatzberg (dschatz@moz-f4a40c.bu.edu)
[19:53:35] <iopq> eddyb: wau, it actually worked
[19:53:38] <doomrobo> so Path is always on the stack?
[19:53:43] *** Joins: simonoram (simonoram@moz-pllbvg.cable.virginm.net)
[19:53:45] <flan3002> cmr - Not? Hm, I thought having String in there twice was a typo...
[19:53:53] <flan3002> Sorry. :(
[19:54:00] <tamird> eddyb ok I got it compiling (https://github.com/tamird/rust-bindgen/commits/rustup). Just 2 test failures now (https://gist.github.com/tamird/b1c42a03971dbfb12dd3)
[19:54:18] <eddyb> iopq: then it's missing #[inline] annotations, possibly
[19:54:35] <eddyb> iopq: I think I mentioned this before, erickt found a few
[19:54:58] *** Quits: fyolnish (fyolnish@moz-fajhu6.au-net.ne.jp) (Ping timeout: 121 seconds)
[19:55:17] *** Joins: dinfuehr_ (dinfuehr@moz-rmfk49.highway.telekom.at)
[19:55:37] <iopq> what profiler do you guys recommend for Rust?
[19:55:42] <tamird> eddyb: is this just the ast getting normalized? seems like it's adding the usually-implicit `-> ()`
[19:55:51] *** Joins: __ixti__ (ixti@moz-i3d.dae.119.188.IP)
[19:55:58] <flan3002> iopq - perf and kcachegrind work just fine.
[19:56:12] <eddyb> tamird: heh
[19:56:19] <doomrobo> if I pass a Vec to a function, is it copied?
[19:56:21] <eddyb> tamird: I think that's not my fault, though
[19:56:26] <iopq> flan3002: I'm on my windows box atm
[19:56:28] *** Joins: hoverbear (hoverbear@moz-csaicn.gv.shawcable.net)
[19:56:38] <eddyb> tamird: it's probably an older change that bindgen never updated past
[19:56:42] <tamird> eddyb: yeah, i think it's not, just asking for your input - i think I can just fix the tests to look for the ->
[19:56:54] <eddyb> tamird: so you just need to fix the expected output and you're done!
[19:56:57] <eddyb> congratz \o/
[19:56:57] <flan3002> iopq - Oh... so probably any Windoze profilers. Rust shouldn't be different from C/C++ in that regard.
[19:57:00] <tamird> woo
[19:57:08] <iopq> flan3002: I've never done C++
[19:57:22] <iopq> flan3002: or C for that matter
[19:57:35] <doomrobo> Vec is owned, so I suppose it's not copied, but then it's not usable again
[19:57:45] *** Quits: _ixti_ (ixti@moz-i3d.dae.119.188.IP) (Ping timeout: 121 seconds)
[19:57:59] <flan3002> WindowsBunny --^?
[19:58:05] <steveklabnik> doomrobo: yes, if you take a Vec, ownership is transferred
[19:59:26] <XMPPwocky> iopq: most of them don't work, they don't read DWARF
[19:59:27] *** Quits: {-}grant ({0}grant@moz-fctpaa.mo.charter.com) (Connection closed)
[19:59:33] <jshs> doomrobo: what do you want to do?
[19:59:41] <tamird> eddyb thanks for your help!
[19:59:47] <tamird> https://github.com/crabtw/rust-bindgen/pull/186
[19:59:51] <eddyb> XMPPwocky: WindowsBunny knows of a tool to convert between the two
[19:59:54] <XMPPwocky> gprof is terrible
[19:59:56] *** Joins: skali (skali@moz-u41o58.dynamic.ufanet.ru)
[20:00:01] <XMPPwocky> http://stackoverflow.com/questions/3597530/good-free-profiler-that-supports-mingw32-please
[20:00:19] <doomrobo> jshs, I'm transferring a PathBuf to a function because I don't use it after the call
[20:00:39] <jshs> doomrobo: what do you with the PathBuf?
[20:00:47] <jshs> do you do*
[20:00:48] <bjz> Ms2ger: o/
[20:01:10] <Ms2ger> bjz, so glfw... Do you still use Servo's repo?
[20:01:35] <iopq> XMPPwocky: I'm trying to use CodeXL, but's kind of meh
[20:01:48] <doomrobo> jshs, I return it from one function and use it as input to another
[20:02:01] *** Joins: {-}grant ({0}grant@moz-fctpaa.mo.charter.com)
[20:02:03] <doomrobo> jshs, specifically, I use it in the second function to remove a file
[20:02:14] *** Joins: brianloveswords (brianlovesw@moz-mve27s.fios.verizon.net)
[20:02:23] <jshs> doomrobo: usually, that second function would take a &Path
[20:02:51] <doomrobo> jshs, how do I get that from a PathBuf?
[20:02:51] *** Quits: eerie (eerie@moz-nu5r7u.red.bezeqint.net) (Connection closed)
[20:02:55] *** Joins: eerie (eerie@moz-nu5r7u.red.bezeqint.net)
[20:02:58] <jshs> doomrobo: &my_path_buf
[20:03:07] <bjz> Ms2ger: hum
[20:03:12] <doomrobo> ok
[20:03:17] <jshs> it should coerce from &PathBuf to &Path
[20:03:30] *** Quits: filsmick (filsmick@moz-6jcjhe.abo.wanadoo.fr) (Connection closed)
[20:03:58] <bjz> Ms2ger: you mean for glfw-sys or glfw-rs?
[20:04:04] *** Quits: skali (skali@moz-u41o58.dynamic.ufanet.ru) (Ping timeout: 121 seconds)
[20:04:08] <bjz> Ms2ger: we use my repow
[20:04:38] <Ms2ger> bjz, so PRs to ours should get redirected?
[20:04:39] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[20:04:44] <doomrobo> jshs, how does that work? Is that at the compiler level or in the implementation?
[20:04:55] <doomrobo> dammit, 300+ lines of errors
[20:04:56] <Ms2ger> doomrobo, both :)
[20:05:06] <Ms2ger> doomrobo, PathBuf implements Deref<Path>
[20:05:12] *** Quits: makhauser (quassel@moz-7p8.00g.111.213.IP) (Connection closed)
[20:05:18] <bjz> Ms2ger: for glfw-rs, yes. for glfw-sys, no
[20:05:35] *** Joins: lov2cod (Adium@moz-balbsm.eodv.k60l.0119.2620.IP)
[20:06:00] <doomrobo> Ms2ger, oh, I didn't know that Deref worked for coercion too. wow
[20:06:06] <Ms2ger> bjz, servo/glfw is glfw-sys, right? Any reason not to move that too?
[20:06:09] *** Quits: quacker (Mibbit@moz-hgb6ss.snantx.sbcglobal.net) (Quit: http://www.mibbit.com ajax IRC Client)
[20:06:35] <bjz> Ms2ger: probs not
[20:06:45] <bjz> Ms2ger: just historical I think
[20:07:15] <Ms2ger> bjz, got it
[20:07:34] <Ms2ger> bjz, anyway, your call :)
[20:07:45] *** Quits: cakecatz (cakecatz@moz-2r5hfh.sannet.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[20:08:27] *** Joins: kgrandon (Adium@moz-6m3528.ca.comcast.net)
[20:09:04] <tamird> eddyb sorry to keep bother you :( any idea why this failed? https://travis-ci.org/crabtw/rust-bindgen/jobs/55402114 i'm not seeing the error
[20:09:12] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[20:09:42] *** Quits: mkpankov (user@moz-f68.70f.16.195.IP) (Ping timeout: 121 seconds)
[20:09:50] *** Joins: JackMc (jack@moz-fv2.65n.117.134.IP)
[20:10:01] *** Joins: cakecatz (cakecatz@moz-2r5hfh.sannet.ne.jp)
[20:10:47] <tamird> i guess the tests were never passing on travis :(
[20:11:06] *** Quits: mfs (mike@moz-9unmaq.internode.on.net) (Quit: leaving)
[20:11:07] <doomrobo> haha "Actually run the tests"
[20:11:18] <tamird> yeah, and it failed. i just removed that commit
[20:11:27] *** Quits: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com) (Ping timeout: 121 seconds)
[20:12:03] <panicbit> That looks like rustc is throwing up
[20:12:19] <panicbit> somehow
[20:12:22] *** Quits: UberLambda (uber@moz-4u4.v1a.84.82.IP) (Quit: Leaving the Matrix)
[20:12:55] *** Joins: james4k (james@moz-ojv7g2.consolidated.net)
[20:13:05] <doomrobo> that's really weird
[20:13:55] *** Quits: lov2cod (Adium@moz-balbsm.eodv.k60l.0119.2620.IP) (Quit: Leaving.)
[20:14:04] <panicbit> tamird: I assume it compiles locally?
[20:14:20] <tamird> yeah, `cargo test` works locally
[20:15:45] *** Joins: xcombelle (xcombelle@moz-6qp46t.abo.wanadoo.fr)
[20:16:20] *** Parts: talchas (user@moz-8ubbgk.ca.comcast.net) ("ERC Version 5.3 (IRC client for Emacs)")
[20:16:22] *** Joins: talchas (user@moz-8ubbgk.ca.comcast.net)
[20:16:25] <doomrobo> what's this? <std macros>:2:20: 2:66 error: type `&mut std::old_io::buffered::LineBufferedWriter<std::old_io::stdio::StdWriter>` does not implement any method in scope named `write_fmt`
[20:16:33] <doomrobo> it's not an error in any file I'm compiling
[20:16:34] <ihrwein> Does CString::new("some string here") do memory allocation? The docs say: "This method will consume the provided data and use the underlying bytes to construct a new string ...". 
[20:16:55] <Dabo> doomrobo, looks like an error with not importing old_io::Writer
[20:16:59] *** Quits: james4k (james@moz-ojv7g2.consolidated.net) (Ping timeout: 121 seconds)
[20:17:01] <Dabo> doomrobo, what's the line that is causing that?
[20:17:16] <doomrobo> Dabo, format!
[20:17:18] *** Quits: alhof (dylan@moz-v7a.6j4.9.153.IP) (Ping timeout: 121 seconds)
[20:17:18] *** Quits: dylan_ (dylan@moz-v7a.6j4.9.153.IP) (Ping timeout: 121 seconds)
[20:17:19] <ihrwein> but its parameter is an immutable &str, how can it consume it?
[20:17:42] *** Joins: dfinninger (dfinninger@moz-6a9v7n.res.rr.com)
[20:18:09] <panicbit> ihrwein: I think it will allocate memory because of the trailing 0 byte
[20:18:09] <Dabo> doomrobo, strange, are you using no_std or anything like that?
[20:18:15] <Dabo> or what nightly are you on actually?
[20:18:19] *** Joins: alhof (dylan@moz-v7a.6j4.9.153.IP)
[20:18:19] *** Joins: dylan_ (dylan@moz-v7a.6j4.9.153.IP)
[20:18:40] <cmr> ihrwein: it does do an allocation, it copies it. I think those docs are just imprecise.
[20:18:44] *** Quits: giucam (giucam@moz-iv0nnc.bb.dnainternet.fi) (Ping timeout: 121 seconds)
[20:18:44] <doomrobo> Dabo, ecf8c64e1 2015-03-21
[20:18:52] <doomrobo> lemme include Writer and see if it works
[20:18:52] *** Joins: Rym (y@moz-vsu.f6d.55.31.IP)
[20:18:55] <steveklabnik> cmr: my ear perks up
[20:19:10] <SneakySnake> ihrwein: It takes IntoBytes as a parameter, and IntoBytes is implemented for &str. http://doc.rust-lang.org/src/std/ffi/c_str.rs.html#436
[20:19:16] <SneakySnake> Also \o/ source links work again
[20:19:24] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[20:19:25] <cmr> steveklabnik: http://static.rust-lang.org/doc/master/std/ffi/struct.CString.html#method.new claims it "consumes" the data, but afaik that term is strictly reserved for ownership transfer.
[20:19:27] <iopq> SneakySnake: I know, right?
[20:19:40] <doomrobo> Dabo, yeah, error goes away, thanks!
[20:19:46] <panicbit> ihrwein: Keep in mind that CString::new() consumes a "T: IntoBytes"
[20:19:58] *** Joins: Wild_Cat (Max@moz-r586am.cpe.teksavvy.com)
[20:20:09] <ihrwein> ah, thanks :)
[20:20:18] <ihrwein> for every one of you
[20:20:22] <panicbit> Argh, I overlooked your message SneakySnake :)
[20:20:26] *** Quits: forgottenone (forgottenon@moz-160.l1s.42.176.IP) (Quit: Konversation terminated!)
[20:21:00] <panicbit> So sneaky...
[20:21:04] *** Joins: RossJH (textual@moz-7g64cv.range86-172.btcentralplus.com)
[20:21:05] <steveklabnik> cmr: yeah, that's what i'd think too
[20:21:13] *** Joins: lordblackfox (lordblackfo@moz-3b8jhn.98vr.2s8n.a03f.2a02.IP)
[20:21:15] <ihrwein> is there any way to use Rust strings in arguments of C functions without doing memory allocation ebery time?
[20:21:16] <cmr> steveklabnik: It's a tricky issue when generics are involved...
[20:21:24] <steveklabnik> cmr: it does take T by value though?
[20:21:29] <doomrobo> what happened to Path.filename_display()? Now there's just filename() and display()
[20:21:43] <cmr> steveklabnik: yeah, but T can be Copy.
[20:21:45] *** Quits: dfinninger (dfinninger@moz-6a9v7n.res.rr.com) (Ping timeout: 121 seconds)
[20:21:57] <cmr> steveklabnik: I dunno...
[20:22:12] <steveklabnik> hmm
[20:22:23] <steveklabnik> yeah, with a T being Copy, that'd affect that
[20:22:24] *** Quits: lordblackfox (lordblackfo@moz-3b8jhn.98vr.2s8n.a03f.2a02.IP) (Quit: WeeChat 1.1.1)
[20:22:29] *** Joins: lordblackfox (lordblackfo@moz-3b8jhn.98vr.2s8n.a03f.2a02.IP)
[20:22:37] <steveklabnik> but that'd be on everything then
[20:22:46] <ihrwein> IMHO it's possible with macros like this: cstr!("this string has a null character at its end") but it seems strange to me
[20:22:47] *** Quits: dstrbad (dstrbad@moz-2mhph9.dsl.iskon.hr) (A TLS packet with unexpected length was received.)
[20:22:55] <cmr> ihrwein: well, if you have a String you can .push('\0') and pass .as_ptr()
[20:23:05] <cmr> ihrwein: for a literal, use b"...\0"
[20:23:15] *** Quits: violaceae (violaceae@moz-s3vd4e.u4is.n1v0.0007.2601.IP) (Ping timeout: 121 seconds)
[20:23:26] *** Quits: Rym (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[20:23:34] <cmr> ihrwein: CString checks for interior nulls though, which can be an important security concern for sensitive input.
[20:23:49] *** Quits: simonoram (simonoram@moz-pllbvg.cable.virginm.net) (Client exited)
[20:24:23] <ihrwein> thanks :cmr
[20:25:15] *** Quits: jonalmeida (jonalmeida@moz-5j8.kvb.131.104.IP) (Ping timeout: 121 seconds)
[20:25:29] *** Joins: bitonic (bitonic@moz-54bp3d.28-151.libero.it)
[20:25:29] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[20:25:30] <cmr> steveklabnik: yeah, that's why I think it's not straightforward... the description isn't super-precise, but it's also probably good enough. It might just need to be one of those things you need to know...
[20:25:51] *** Joins: Rym (y@moz-vsu.f6d.55.31.IP)
[20:25:55] *** Joins: turtil (turtil@moz-gfc.es4.23.103.IP)
[20:25:57] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[20:26:08] *** Quits: mib_obikp0 (Mibbit@moz-b11uqs.dynamic.upc.nl) (Quit: http://www.mibbit.com ajax IRC Client)
[20:26:20] *** Quits: turtil (turtil@moz-gfc.es4.23.103.IP) (Quit: WeeChat 1.1.1)
[20:27:09] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[20:27:11] *** Joins: w66745 (Mibbit@moz-b11uqs.dynamic.upc.nl)
[20:27:28] <eddyb> cmr: I wish we had something using &mut String
[20:27:53] <eddyb> cmr: most of the time the backing storage is enough for another byte
[20:28:31] <asmodeius> how to change old_io::stdin().read_line() to not deprecated version?
[20:29:11] <cmr> asmodeius: std::io::stdin().read_line(&mut some_string)
[20:29:23] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[20:29:26] <asmodeius> thanks
[20:29:30] <FreeFull> asmodeius: It will append the line to the String
[20:29:44] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[20:30:01] *** Joins: filsmick (filsmick@moz-6jcjhe.abo.wanadoo.fr)
[20:30:25] *** Quits: Rym (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[20:31:07] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[20:31:41] *** Joins: jonalmeida (jonalmeida@moz-ruqfvo.home.cgocable.net)
[20:33:08] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[20:33:26] *** Joins: jonalmei_ (jonalmeida@moz-5j8.kvb.131.104.IP)
[20:33:52] <flan3002> What is the currently idiomatic way for specifying "a type that is an iterator over some other type" in a trait?
[20:34:16] *** Quits: brson (brson@moz-kq1.7vl.56.172.IP) (Ping timeout: 121 seconds)
[20:34:24] <cmr> T: Iterator<U>?
[20:34:48] <eddyb> T: Iterator<Item=U>
[20:35:30] <flan3002> eddyb - Ah, that's what I forgot... :)
[20:36:47] *** Quits: jonalmeida (jonalmeida@moz-ruqfvo.home.cgocable.net) (Ping timeout: 121 seconds)
[20:36:55] *** Quits: tgkokk (tgkokk@moz-bml9je.home.otenet.gr) (Ping timeout: 121 seconds)
[20:37:56] *** Joins: Rym (y@moz-vsu.f6d.55.31.IP)
[20:38:07] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[20:38:50] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[20:38:58] <kazagistar> Why does rust not find AdditiveIterator<f64>? My error is "error: type `core::slice::Iter<'_, f64>` does not implement any method in scope named `sum`"
[20:39:27] <cmr> kazagistar: did you add `use std::iter::AdditiveIterator`?
[20:40:04] <kazagistar> cmr: I have "use std::iter::*;" at the top of the file
[20:40:13] *** Quits: errordeveloper (ilya@moz-g0i.mtf.125.2.IP) (Ping timeout: 121 seconds)
[20:40:33] *** Joins: chowmeined (chowmeined@moz-v6pi6j.wa.comcast.net)
[20:40:52] *** Joins: glendc (glendc@moz-lm5.ch9.159.212.IP)
[20:41:22] *** Quits: murz (murz@moz-h10.ori.130.24.IP) (Ping timeout: 121 seconds)
[20:41:32] <kazagistar> cmr: I mean, my rust is like a week old now, could it be a really really new feature?
[20:41:38] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[20:42:18] *** Quits: eerie (eerie@moz-nu5r7u.red.bezeqint.net) (Connection closed)
[20:43:02] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[20:43:15] <bluss> kazagistar: needs to be an iterator of f64 I think (not &f64)
[20:43:25] <bluss> so I'd try iter().cloned().sum()
[20:44:01] <kazagistar> bluss: ah, I see
[20:44:32] *** Quits: edbond (edbond@moz-8st.7gv.108.109.IP) (Quit: Leaving)
[20:46:04] *** Joins: coxg (sazzer@moz-1hq.kh5.32.217.IP)
[20:47:13] *** Quits: g5pw_ (g5pw@moz-4e9gb9.me) (A TLS packet with unexpected length was received.)
[20:47:55] <tamird> what's the replacement for old_io::{print,println} in io?
[20:48:02] *** Joins: akiss (akiss@moz-22mpm5.pool.digikabel.hu)
[20:48:18] <tamird> just print! and println!
[20:48:19] <tamird> ?
[20:48:36] *** Joins: g5pw (g5pw@moz-4e9gb9.me)
[20:50:16] *** Quits: coxg (sazzer@moz-1hq.kh5.32.217.IP) (Ping timeout: 121 seconds)
[20:51:36] <zaeleus> tamird: Right.
[20:51:41] <zaeleus> tamird: https://github.com/rust-lang/rfcs/blob/master/text/0517-io-os-reform.md#printing-functions
[20:51:51] *** Joins: Kev` (Kev@moz-n3h9kt.dc.cox.net)
[20:51:55] *** AutomatedTester|AFK is now known as AutomatedTester
[20:52:15] <tamird> got it, so print!("{}", mystr)
[20:52:23] <tamird> thanks
[20:52:26] *** Joins: fyolnish (fyolnish@moz-fajhu6.au-net.ne.jp)
[20:52:29] *** Quits: twipeD (wipeD@moz-jjdg2c.dip0.t-ipconnect.de) (Connection closed)
[20:52:58] <Kev`> If you have a struct with an Option<HashMap<K,V>>, and you create an instance with hashmap: None, does that allocate?
[20:53:09] *** Quits: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net) (Ping timeout: 121 seconds)
[20:53:15] <cmr> Kev`: no
[20:53:28] <Kev`> ah ok, cool thanks
[20:54:06] *** Quits: w66745 (Mibbit@moz-b11uqs.dynamic.upc.nl) (Quit: http://www.mibbit.com ajax IRC Client)
[20:54:39] *** Joins: casual_llama (cl@moz-grk6nt.swbr.surewest.net)
[20:54:43] *** Quits: ebel (rory@moz-0lehdb.m4r4.nqcu.0470.2001.IP) (Quit: Leaving)
[20:55:01] *** Quits: iopq (Mibbit@moz-uuic7b.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[20:55:10] *** Joins: iopq (Mibbit@moz-uuic7b.ca.comcast.net)
[20:55:52] *** Joins: k4-t (Dbeste@moz-5f3c4l.res.rr.com)
[20:57:45] <iopq> Anyone here interested in Weiqi/Baduk programming?
[20:57:47] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[20:57:56] *** Quits: akiss (akiss@moz-22mpm5.pool.digikabel.hu) (Ping timeout: 121 seconds)
[20:58:53] *** Joins: laparca (laparca@moz-umd7qm.dynamicIP.rima-tde.net)
[20:59:46] *** Quits: Guest40 (textual@moz-5bku1g.chello.nl) (Quit: Textual IRC Client: www.textualapp.com)
[20:59:49] *** Joins: cptroot (Mibbit@moz-n169l8.caltech.edu)
[21:00:00] *** Quits: Racquetball (namestolenw@moz-lct3cc.res.rr.com) (Ping timeout: 121 seconds)
[21:00:10] *** Quits: DerisiveLogic (smuxi@moz-g93io6.res.rr.com) (A TLS packet with unexpected length was received.)
[21:00:17] *** Joins: Guest40 (textual@moz-5bku1g.chello.nl)
[21:00:20] *** Joins: DerisiveLogic (smuxi@moz-g93io6.res.rr.com)
[21:00:28] *** Quits: fyolnish (fyolnish@moz-fajhu6.au-net.ne.jp) (Ping timeout: 121 seconds)
[21:00:38] *** Quits: rootnode (rootnode@moz-go1ut4.ip1.george24.com) (Ping timeout: 121 seconds)
[21:00:55] *** Joins: gareins (Mibbit@moz-nks.906.235.212.IP)
[21:02:23] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[21:03:24] <gareins> Is there a way to match on "packaged" Strings, or do I need double match those? Example: http://is.gd/FqIb4D
[21:03:31] *** Quits: RossJH (textual@moz-7g64cv.range86-172.btcentralplus.com) (Quit: Textual IRC Client: www.textualapp.com)
[21:03:54] <bluss> Kev`: you might find it interesting that HashMap::new() does not allocate anything either (capacity is zero until you insert something)
[21:04:02] *** Joins: rvlander (rvlander@moz-f9rs0f.criu.9fof.41d0.2001.IP)
[21:05:08] *** Quits: mcanders (carter@moz-of559n.il.comcast.net) (Ping timeout: 121 seconds)
[21:05:10] <bluss> (use ::with_capacity() to preallocate like most collections)
[21:05:38] *** Quits: jmitchell (jmitchell@moz-o8p.pug.156.104.IP) (Ping timeout: 121 seconds)
[21:06:12] *** Joins: mcanders (carter@moz-of559n.il.comcast.net)
[21:06:16] *** Joins: chrissing (chris@moz-uoca37.fios.verizon.net)
[21:07:10] *** Quits: psd (psd@moz-acc.mpg.78.202.IP) (Ping timeout: 121 seconds)
[21:07:11] <chrissing> hello
[21:07:24] <chrissing> can anyone help he do basic input from stdin?
[21:07:29] <chrissing> *me
[21:07:50] *** Quits: bitonic (bitonic@moz-54bp3d.28-151.libero.it) (Ping timeout: 121 seconds)
[21:07:51] *** Quits: nano (nano@moz-00j6et.dynamic.kabel-deutschland.de) (Connection closed)
[21:08:32] <flan3002> chrissing - Sure, what are you struggling with?
[21:08:49] *** Quits: kgrandon (Adium@moz-6m3528.ca.comcast.net) (Quit: Leaving.)
[21:09:11] <chrissing> i have: let input = stdin().read_line().ok().expect("Error getting input");
[21:09:29] <chrissing> but it is telling me that i need a String argument for read_line
[21:09:58] <flan3002> Yes, that's part of the new io module... let me put together an example. :)
[21:10:04] <chrissing> thank you
[21:11:14] *** Quits: rvlander (rvlander@moz-f9rs0f.criu.9fof.41d0.2001.IP) (Client exited)
[21:11:47] <Ke> would be awesome to have the book updated to new io
[21:11:55] *** Joins: kgrandon (Adium@moz-6m3528.ca.comcast.net)
[21:12:08] *** Quits: nwin (textual@moz-5b4ua6.pools.vodafone-ip.de) (Quit: Textual IRC Client: www.textualapp.com)
[21:12:13] *** Quits: dinfuehr_ (dinfuehr@moz-rmfk49.highway.telekom.at) (Connection closed)
[21:12:42] <steveklabnik> that whole part is just gonna be gone shortly
[21:12:52] <chrissing> why?
[21:12:56] <steveklabnik> rand is gone
[21:13:00] *** Quits: zimbatm (zimbatm@moz-f37kde.com) (Ping timeout: 121 seconds)
[21:13:33] *** Joins: reem (reem@moz-eios6j.coob.q2h1.0009.2601.IP)
[21:14:10] <flan3002> chrissing - Have a look at https://gist.github.com/tilpner/53b0c9d8297e7a705a86 . It reads from stdin into a buffer and prints the input without linebreaks after the stream is closed. I used a match to show what "line" actually is here.
[21:14:54] <chrissing> thank you very much
[21:14:54] *** Joins: cursivecode (textual@moz-4u56i9.res.bhn.net)
[21:15:03] *** Quits: mcanders (carter@moz-of559n.il.comcast.net) (Ping timeout: 121 seconds)
[21:15:14] *** Joins: zimbatm (zimbatm@moz-f37kde.com)
[21:15:39] *** Quits: reem (reem@moz-eios6j.coob.q2h1.0009.2601.IP) (Connection closed)
[21:15:52] *** Joins: reem (reem@moz-eios6j.coob.q2h1.0009.2601.IP)
[21:16:04] *** Joins: mjboa (mike@moz-prg0pt.dip0.t-ipconnect.de)
[21:16:12] *** Parts: dwrensha (chatzilla@moz-46o4hi.pa.comcast.net) ("")
[21:17:59] *** Joins: reem_ (reem@moz-ojhkuk.coob.q2h1.0009.2601.IP)
[21:18:28] *** Joins: dfinninger (dfinninger@moz-6a9v7n.res.rr.com)
[21:18:29] <casual_llama> Where is collections::string::String coming from and why doesn't it implement PartialEq with str? http://is.gd/wbMdc5
[21:19:12] *** Joins: mib_2gdswp (Mibbit@moz-cu9.nag.102.75.IP)
[21:19:38] <flan3002> casual_llama - std::string::String is an alias for collections::string::String.
[21:19:54] <flan3002> casual_llama - The std crate re-exports many types from other crates.
[21:20:05] <steveklabnik> just s ==
[21:20:11] <steveklabnik> for one thing
[21:20:12] *** Quits: io2 (io2@moz-9i9j3a.home.otenet.gr) (Ping timeout: 121 seconds)
[21:20:16] <casual_llama> s== makes it think it's a move
[21:20:21] <casual_llama> can't
[21:20:27] *** Joins: io2 (io2@moz-fphcqm.home.otenet.gr)
[21:20:33] <steveklabnik> that's the Some(s) part
[21:20:35] <steveklabnik> not the comparison
[21:20:54] *** Quits: reem (reem@moz-eios6j.coob.q2h1.0009.2601.IP) (Ping timeout: 121 seconds)
[21:21:09] <flan3002> casual_llama - http://is.gd/sQ4HC2
[21:21:11] <steveklabnik> http://is.gd/wGrkph runs, thought it might be nicer
[21:21:15] <steveklabnik> without ref
[21:21:26] <flan3002> Oh...
[21:21:44] *** Quits: loyd (loyd@moz-uft.32f.108.213.IP) (Ping timeout: 121 seconds)
[21:22:03] <casual_llama> Huh, didn't think ref would be necessary -- thanks flan3002 and steveklabnik :)
[21:22:11] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[21:22:17] <steveklabnik> it is if you don't want it to move
[21:22:21] <steveklabnik> because it creates a reference
[21:22:24] <steveklabnik> rather than taking ownership :)
[21:22:31] *** Quits: dfinninger (dfinninger@moz-6a9v7n.res.rr.com) (Ping timeout: 121 seconds)
[21:22:40] *** Joins: makhauser (quassel@moz-7p8.00g.111.213.IP)
[21:22:42] <casual_llama> I would've figured I could convince it to take a reference with &, heh
[21:22:51] *** Quits: amphibulus (Mibbit@moz-kga.8ee.218.2.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:22:56] <casual_llama> Still have a lot to learn :P
[21:23:20] *** Joins: psd (psd@moz-of5.270.215.180.IP)
[21:23:27] <rovar> \MB \      MW-=-=\NS
[21:24:21] *** Quits: Quanttek (quassel@moz-25k96c.6fkd.dvrb.8108.2a02.IP) (Ping timeout: 121 seconds)
[21:24:37] *** Joins: dinfuehr (dinfuehr@moz-rmfk49.highway.telekom.at)
[21:24:42] <rovar> +
[21:25:13] *** Joins: jmitchell (jmitchell@moz-o8p.pug.156.104.IP)
[21:26:50] *** Quits: e_svedang (e_svedang@moz-p1r4ve.bredband.comhem.se) (Client exited)
[21:26:53] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[21:27:11] *** Quits: tomleb (tomleb@moz-9vdbqp.dsl.bell.ca) (Connection closed)
[21:27:48] <rovar> --RIF6QE1./[\
[21:28:52] <cmr> rovar: yes?
[21:29:12] *** Joins: bfops (uid58242@moz-e5u6m0.charlton.irccloud.com)
[21:29:58] *** Quits: xcombelle (xcombelle@moz-6qp46t.abo.wanadoo.fr) (Quit: Quitte)
[21:29:59] *** Quits: futile (felix@moz-5kl.840.188.178.IP) (Quit: WeeChat 1.0-dev)
[21:30:23] *** Quits: Ralith (ralith@moz-tiaj7p.customer.broadstripe.net) (Ping timeout: 121 seconds)
[21:30:52] *** Quits: dylan_ (dylan@moz-v7a.6j4.9.153.IP) (Ping timeout: 121 seconds)
[21:30:56] *** Quits: alhof (dylan@moz-v7a.6j4.9.153.IP) (Ping timeout: 121 seconds)
[21:31:17] <chrissing> can someone explain why i have to say buffer is mutable twice? and is this correct form? http://is.gd/QGnvUv
[21:31:32] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[21:31:55] *** Quits: Myst (Thunderbird@moz-o9q90t.cable.rogers.com) (Ping timeout: 121 seconds)
[21:32:26] *** Joins: Ralith (ralith@moz-tiaj7p.customer.broadstripe.net)
[21:33:13] <badboy> hey chrissing, you mean in line 7?
[21:33:16] *** Joins: violaceae (violaceae@moz-s3vd4e.u4is.n1v0.0007.2601.IP)
[21:33:22] <chrissing> yes
[21:33:58] <badboy> because read_line expects a mutable reference, that's what &mut does
[21:34:10] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[21:34:26] <badboy> but to actually get a mutable reference the data must be mutable in the first place
[21:34:34] *** Quits: cursivecode (textual@moz-4u56i9.res.bhn.net) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[21:34:56] <chrissing> ok thank you so there is a difference between a mutable variable and having their reference mutable
[21:34:58] <chrissing> ?
[21:35:04] *** Joins: c0a8 (joel@moz-4v1.4bo.191.67.IP)
[21:35:25] *** Quits: tamird (textual@moz-5v5pe2.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[21:35:28] <c0a8> is there a convenient way to create a Vec<u8> from a byte string? (e.g. b"abcd")
[21:35:34] *** Quits: fmtq (fmtq@moz-d08itp.tpgi.com.au) (Ping timeout: 121 seconds)
[21:36:26] <badboy> chrissing: yes, by default a reference allows only read access
[21:36:50] *** Joins: fmtq (fmtq@moz-d08itp.tpgi.com.au)
[21:36:52] <badboy> &mut on the other hand allows write access and rust makes sure there is only ever one place having this write access
[21:38:00] <iopq> Does a debugger show which functions get called if they are not pub?
[21:38:26] <cmr> iopq: it will, yes.
[21:38:29] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[21:38:40] <badboy> chrissing: http://is.gd/gTgRcj ?
[21:38:56] <flan3002> playbot: b"1234".iter().collect::<Vec<_>>()
[21:38:58] -playbot- [49, 50, 51, 52]
[21:38:59] <iopq> cmr: my profiler doesn't show non-pub functions, I'm using CodeXL, do you know of anything better for Windows?
[21:38:59] <panicbit> c0a8: http://is.gd/CSeygZ
[21:39:25] <badboy> ah, no nead for .as_slice
[21:39:26] <cmr> iopq: ah, I'm not sure what the situation is in that case - they might be getting inlined, or the debuginfo might just not be good enough.
[21:39:34] <badboy> yeah, panicbit's way looks better
[21:39:51] <iopq> cmr: is there any compiler switch for even more debugging info (because I am inlinining those pub functions and they show up just fine)
[21:40:02] <cmr> iopq: there's only -g
[21:40:19] *** Quits: proc (proc@moz-k9lvsl.dip0.t-ipconnect.de) (Quit: Gotta eat my pizza)
[21:40:22] *** Quits: xificurC (xificurC@moz-3u7gmd.chello.sk) (Ping timeout: 121 seconds)
[21:40:25] <cmr> c0a8: b"abcd".to_vec()
[21:40:34] <c0a8> cmr, panicbit: thanks!
[21:40:38] *** Quits: nodweber_ (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[21:40:52] <panicbit> don't forget badboy :)
[21:40:59] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[21:41:15] <cmr> and flan3002 :P
[21:41:20] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[21:41:33] <badboy> there's to_vec? oO
[21:41:37] <badboy> that was too easy...
[21:41:47] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[21:41:50] *** Joins: tamird (textual@moz-5v5pe2.ca.comcast.net)
[21:42:43] <panicbit> playbot: b"abcd".to_vec()
[21:42:44] -playbot- [97, 98, 99, 100]
[21:42:54] <panicbit> Weird. I it missing from the docs?
[21:43:15] <cmr> it's there, http://static.rust-lang.org/doc/master/std/primitive.slice.html#method.to_vec
[21:43:46] <panicbit> cmr: It somehow doesn't show up in the search results
[21:43:50] *** Quits: fmtq (fmtq@moz-d08itp.tpgi.com.au) (Ping timeout: 121 seconds)
[21:44:03] *** Quits: jalcine (jacky@moz-7ghsj4.jalcine.me) (Quit: ZNC - http://znc.in)
[21:44:09] *** Joins: tjakubow (tom@moz-ag87jj.fios.verizon.net)
[21:44:13] <kazagistar> I can't figure out how to call this function, why can't I find it? http://doc.rust-lang.org/rand/rand/fn.thread_rng.html
[21:44:21] *** Joins: Twinklebear_ (Twinklebear@moz-ttrcn3.ut.comcast.net)
[21:44:30] <kazagistar> I can't build an Rng
[21:44:42] <elgruntox> Hey anyone else having issues with getting cargo working in windows? (using the latest nightly)
[21:44:48] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Quit: leaving)
[21:44:50] <elgruntox> I get an access violation error and it just breaks
[21:44:52] *** Joins: fmtq (fmtq@moz-d08itp.tpgi.com.au)
[21:45:01] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[21:45:04] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Connection closed)
[21:45:23] <tjakubow> elgruntox: can you give more details, like the specific error message + what you invoked cargo with
[21:45:25] *** Quits: Twinklebear (Twinklebear@moz-ttrcn3.ut.comcast.net) (Ping timeout: 121 seconds)
[21:45:28] <cmr> kazagistar: see the usage instructions on https://github.com/rust-lang/rand
[21:45:34] <elgruntox> sure
[21:45:47] *** Joins: boblehest (jlode@moz-mquaka.customer.lyse.net)
[21:45:48] *** Quits: bjz (bjz@moz-puppgq.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[21:46:06] <elgruntox> Unhandled exception at 0x0000000076F3E4E4 (ntdll.dll) in cargo.exe: 0xC0000005: Access violation writing location 0x0000000000000024.
[21:46:10] <elgruntox> no arguments
[21:46:15] *** Joins: ziad (ziad@moz-3kp.prd.136.50.IP)
[21:46:46] *** Quits: reem_ (reem@moz-ojhkuk.coob.q2h1.0009.2601.IP) (Connection closed)
[21:47:11] *** Quits: c0a8 (joel@moz-4v1.4bo.191.67.IP) (Quit: WeeChat 1.1.1)
[21:47:44] *** Twinklebear_ is now known as Twinklebear
[21:47:49] *** Quits: Twinklebear (Twinklebear@moz-ttrcn3.ut.comcast.net) (Quit: Leaving)
[21:47:55] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[21:48:00] *** Joins: Twinklebear (Twinklebear@moz-ttrcn3.ut.comcast.net)
[21:49:16] <kazagistar> cmr: right, so why does it not notice that rand does not exist in my Cargo.toml when I extern it? and rust does not compile rand (even though I just reinstalled rust)
[21:50:05] <cmr> kazagistar: there is a `rand` crate as part of the standard distribution right now, but it should be printing a deprecated/unstable warning...
[21:50:18] <cmr> afaik it's a very old version used for the compiler.
[21:52:32] <SneakySnake> elgruntox: Sounds like a serious bug somewhere.
[21:52:39] *** Quits: psy (psy@moz-ous.ntd.6.103.IP) (Ping timeout: 121 seconds)
[21:53:08] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[21:53:29] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[21:54:02] *** Joins: errordeveloper (ilya@moz-g0i.mtf.125.2.IP)
[21:54:07] *** Joins: eric_lagergren (barsonme@moz-lr1hrn.wa.comcast.net)
[21:54:45] <elgruntox> SneakySnake: I guess it had to do with how I was running cargo, it doesnt like being ran in a shell setup with MSYS
[21:54:52] <elgruntox> works fine in a vanilla cmd.exe
[21:54:56] <elgruntox> very strange
[21:55:21] *** Joins: psy (psy@moz-ous.ntd.6.103.IP)
[21:55:49] *** Quits: timj (timj@moz-qrm.hdf.102.91.IP) (Ping timeout: 121 seconds)
[21:56:36] *** Joins: Racquetball (namestolenw@moz-lct3cc.res.rr.com)
[21:56:41] *** Joins: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP)
[21:57:25] *** Quits: filsmick (filsmick@moz-6jcjhe.abo.wanadoo.fr) (Quit: )
[21:57:58] *** Joins: fyolnish (fyolnish@moz-fajhu6.au-net.ne.jp)
[21:58:13] *** Quits: killercup (killercup@moz-edmf2j.dip0.t-ipconnect.de) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[21:58:40] *** Quits: marsel (user@moz-tjk.bk3.180.94.IP) (Ping timeout: 121 seconds)
[21:58:54] *** Quits: casual_llama (cl@moz-grk6nt.swbr.surewest.net) (Quit: Bai.)
[21:59:40] *** Joins: fizzbooze (bp@moz-lt3.k7f.113.208.IP)
[22:00:43] *** Quits: Racquetball (namestolenw@moz-lct3cc.res.rr.com) (Ping timeout: 121 seconds)
[22:00:49] *** Joins: jalcine (jacky@moz-7ghsj4.jalcine.me)
[22:01:13] *** Joins: killercup (killercup@moz-edmf2j.dip0.t-ipconnect.de)
[22:01:27] *** Quits: killercup (killercup@moz-edmf2j.dip0.t-ipconnect.de) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[22:03:14] *** Joins: rossm (ross@moz-pnc4od.as13285.net)
[22:04:59] *** Quits: kaksmet (kaksmet@moz-ismsth.se.alltele.net) (Connection closed)
[22:05:00] *** Quits: fyolnish (fyolnish@moz-fajhu6.au-net.ne.jp) (Ping timeout: 121 seconds)
[22:05:07] *** Quits: kard (-@moz-qjeh4m.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[22:06:09] *** Joins: mib_fild4v (Mibbit@moz-4vn.bnl.217.91.IP)
[22:06:09] *** Quits: cakecatz (cakecatz@moz-2r5hfh.sannet.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[22:06:29] <mib_2gdswp> how do i match based on enum-val within a box? e.g.: http://is.gd/K80vE6
[22:06:53] *** Quits: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP) (Quit: Leaving.)
[22:07:36] *** Quits: mib_fild4v (Mibbit@moz-4vn.bnl.217.91.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:07:59] <cmr> mib_2gdswp: http://is.gd/Ow4PzE is the "straightforward" way
[22:08:03] *** Joins: dylan_ (dylan@moz-v7a.6j4.9.153.IP)
[22:08:03] *** Joins: alhof (dylan@moz-v7a.6j4.9.153.IP)
[22:08:09] <cmr> mib_2gdswp: (which is a non-moving match)
[22:08:23] <kamalmarhubi> hi all
[22:08:32] *** Quits: {AS} (uid45026@moz-srvrrh.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[22:08:33] <panicbit> kamalmarhubi: Hi
[22:08:45] <kamalmarhubi> I'm looking for contributors files or guidelines for cargo
[22:08:57] <kamalmarhubi> I have a couple of minor fixes I'd like to send in
[22:09:08] <kamalmarhubi> but there's nothing in the readme or in the github wiki
[22:09:17] <kamalmarhubi> panicbit: hi :-)
[22:09:20] <panicbit> kamalmarhubi: #cargo should be a better place to ask
[22:09:27] <kamalmarhubi> oh didn't realise it had its own
[22:09:29] <panicbit> :)
[22:09:33] <kamalmarhubi> of course, rust isn't small anymore!
[22:09:41] *** Joins: jviereck1 (Adium@moz-8db9c7.dclient.hispeed.ch)
[22:09:42] *** Quits: jviereck (Adium@moz-8db9c7.dclient.hispeed.ch) (Connection closed)
[22:09:54] *** Quits: gareins (Mibbit@moz-nks.906.235.212.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:10:48] <panicbit> kamalmarhubi: If they are just small fixes then I think you should just file a PR
[22:10:54] <mib_2gdswp> @cmr: thanks! can you explain what you mean by non-moving match, though? i'm still trying to wrap my head around how memory/referencing works in rust
[22:11:20] *** Joins: dlc (dlc@moz-ijetde.res.rr.com)
[22:11:26] *** Quits: dinfuehr (dinfuehr@moz-rmfk49.highway.telekom.at) (Connection closed)
[22:11:30] *** Quits: dlc (dlc@moz-ijetde.res.rr.com) (Connection closed)
[22:11:46] <cmr> mib_2gdswp: you could also match on just *a, http://is.gd/Y2EGi7
[22:11:52] *** Joins: nil (nil@moz-76k618.p5sj.b1d9.0003.2601.IP)
[22:12:05] <cmr> mib_2gdswp: moves are part of the ownership system, http://doc.rust-lang.org/book/ownership.html
[22:13:08] <mib_2gdswp> alright, ill read up on that
[22:13:29] *** Joins: mib_jz4epx (Mibbit@moz-b11uqs.dynamic.upc.nl)
[22:13:59] *** AutomatedTester is now known as AutomatedTester|AFK
[22:14:06] <Fenhl> has anyone here worked with type maps before? I've tried asking in #iron but no one replied
[22:14:38] *** Quits: hhhhhhhhhh (mike@moz-969kuj.cable.virginm.net) (Quit: WeeChat 1.1.1)
[22:14:39] *** Joins: cakecatz (cakecatz@moz-2r5hfh.sannet.ne.jp)
[22:14:40] *** Joins: mytochar (Thunderbird@moz-qbc2nj.wa.comcast.net)
[22:15:00] *** Joins: jethrogb (jethrob@moz-p2iedd.scintilla.utwente.nl)
[22:17:55] *** Joins: Gabriel_7 (Gabriel@moz-mkkr4g.mtgr.92aj.0e35.2a01.IP)
[22:18:01] *** Quits: kmicu (kmicu@moz-uga.edn.218.91.IP) (Client exited)
[22:19:22] *** Joins: dfinninger (dfinninger@moz-6a9v7n.res.rr.com)
[22:19:49] *** Quits: violaceae (violaceae@moz-s3vd4e.u4is.n1v0.0007.2601.IP) (Quit: Leaving)
[22:20:38] *** Quits: jviereck1 (Adium@moz-8db9c7.dclient.hispeed.ch) (Quit: Leaving.)
[22:21:42] *** Quits: zmack (zmack@moz-4b0.o8l.26.188.IP) (Connection closed)
[22:21:43] *** Joins: njn (chatzilla@moz-mv909v.iinet.net.au)
[22:22:20] *** Quits: Irbis (Irbis@moz-u02516.abo.bbox.fr) (Quit: )
[22:22:25] *** Quits: Wild_Cat (Max@moz-r586am.cpe.teksavvy.com) (Ping timeout: 121 seconds)
[22:22:58] *** Joins: forgottenone (forgottenon@moz-160.l1s.42.176.IP)
[22:23:15] *** nrc is now known as nrc|afk
[22:23:24] *** Quits: dfinninger (dfinninger@moz-6a9v7n.res.rr.com) (Ping timeout: 121 seconds)
[22:24:24] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[22:24:25] *** Joins: fmendez (fmendez@moz-1jn.fqm.166.190.IP)
[22:25:17] *** Joins: agoforth (agoforth@moz-g3gi2n.netcologne.de)
[22:25:48] <kamalmarhubi> panicbit: thanks, that's what they said in #cargo too :-)
[22:25:56] *** Quits: Rym (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[22:26:00] *** Quits: Guest40 (textual@moz-5bku1g.chello.nl) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[22:26:23] *** Joins: steveire (quassel@moz-qme3pe.adsl.alicedsl.de)
[22:26:51] *** Quits: psd (psd@moz-of5.270.215.180.IP) (Ping timeout: 121 seconds)
[22:27:16] <nil> so say I wanted to have accessible in my application the hash for the current git commit, mostly to easilly differentiate dev builds.
[22:27:38] <nil> what's the best way to go about obtatining that information? some sort of git hook? build script?
[22:28:06] <nil> I know I can get the current version in cargo at compile time via env!("CARGO_PKG_VERSION"), so I'd like to do something similar idealy.
[22:28:07] <nil> :D
[22:28:23] *** Quits: Fill (Fill@moz-2fjhju.7o2i.a0qj.41d0.2001.IP) (Quit: switching zncs)
[22:29:25] *** Quits: steveire (quassel@moz-qme3pe.adsl.alicedsl.de) (Quit: http://quassel-irc.org - Chat comfortably. Anywhere.)
[22:30:07] *** Joins: Wild_Cat (Max@moz-r586am.cpe.teksavvy.com)
[22:31:12] *** Joins: Fill (Fill@moz-rc35i9.fs1g.619c.a880.2604.IP)
[22:31:18] <flan3002> nil - I suppose you could use the libgit2 crate as a build-dependency for determining the HEAD hash in a truly-cross-platform (I hope?) way, but that'd probably be overkill. Otherwise, you could probably use [ https://crates.io/crates/external_mixin ] to shell out to git differently per platform.
[22:31:26] *** Quits: laparca (laparca@moz-umd7qm.dynamicIP.rima-tde.net) (Quit: Leaving.)
[22:31:47] *** Joins: kaksmet (kaksmet@moz-ismsth.se.alltele.net)
[22:32:03] *** Quits: kaksmet (kaksmet@moz-ismsth.se.alltele.net) (Connection closed)
[22:32:52] *** Joins: jzelinskie (sid17772@moz-6ms.lg2.184.192.IP)
[22:33:23] *** Quits: Hannibal_Smith (nico@moz-j5root.retail.telecomitalia.it) (Quit: Leaving)
[22:34:08] *** Quits: munksgaa1d (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[22:34:56] *** Joins: coxg (sazzer@moz-1hq.kh5.32.217.IP)
[22:35:11] *** Joins: starless (starless@moz-u9gmm1.res.rr.com)
[22:35:35] <nil> every platform I'm working on has the same subset of unix-like functionality, so doing it in a slightly hacky manner is fine.
[22:35:52] <nil> there's no way I'm going to develop on windows without either msys/mingw or cygwin
[22:37:30] *** Joins: cesar (cesar@moz-rgddno.sndgca.sbcglobal.net)
[22:37:31] *** Quits: cesar (cesar@moz-rgddno.sndgca.sbcglobal.net) (Connection closed)
[22:37:32] *** Joins: cesar (cesar@moz-rgddno.sndgca.sbcglobal.net)
[22:38:07] <flan3002> let hash = sh_mixin!("cat .git/refs/heads/master");
[22:38:14] <flan3002> nil - Something like that might do.
[22:38:30] <flan3002> Or... just read it at compile time.
[22:38:30] *** Quits: elbow_jason (elbow@moz-p3t.dkk.30.50.IP) (Connection closed)
[22:38:35] <nil> yep, was just looking over the external_mixin crate
[22:38:36] *** Joins: elbow_jason (elbow@moz-p3t.dkk.30.50.IP)
[22:38:40] <nil> it's deliciously hacky, I like it
[22:39:06] <flan3002> nil - If you read the file by hand, you could be cross-platform, if there's .git on Windoze too.
[22:39:08] *** Quits: coxg (sazzer@moz-1hq.kh5.32.217.IP) (Ping timeout: 121 seconds)
[22:39:34] *** Quits: ai (ai@moz-pqofrl.sunline.net.ua) (Quit: Leaving.)
[22:40:07] *** Quits: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net) (Ping timeout: 121 seconds)
[22:40:46] <nil> oh.. so something like -- static GITHASH: &'static str = include_str!(".git/refs/heads/master"); would work aye?
[22:41:01] <flan3002> Heh, very nice. Didn't think of that. :)
[22:41:24] <flan3002> Does anyone know if git uses the same structure on Windows?
[22:41:54] *** Joins: ai (ai@moz-pqofrl.sunline.net.ua)
[22:42:00] <nil> I would assume it does
[22:42:07] *** Quits: Altazimuth (Altazimuth@moz-q966ko.skybroadband.com) (Ping timeout: 121 seconds)
[22:42:14] *** Quits: ai (ai@moz-pqofrl.sunline.net.ua) (Quit: Leaving.)
[22:43:33] *** Quits: cesar (cesar@moz-rgddno.sndgca.sbcglobal.net) (Connection closed)
[22:44:04] *** Joins: cesar (cesar@moz-995f02.us.xo.net)
[22:44:06] *** nsm|away is now known as nsm
[22:45:54] *** Quits: bojo1 (bojo@moz-ek1f0s.ocn.ne.jp) (Ping timeout: 121 seconds)
[22:46:26] *** Joins: psd (psd@moz-acc.mpg.78.202.IP)
[22:47:35] *** Quits: dawehner (quassel@moz-6aq1ua.hsi7.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[22:49:20] *** Joins: Racquetball (namestolenw@moz-m02h38.res.rr.com)
[22:49:43] *** Joins: ofeldt (ofeldt@moz-7a34v1.dip0.t-ipconnect.de)
[22:49:45] *** Quits: forgottenone (forgottenon@moz-160.l1s.42.176.IP) (Quit: Konversation terminated!)
[22:49:47] *** Quits: essem2 (Thunderbird@moz-5hqi9f.sd.cox.net) (Client exited)
[22:49:48] *** Parts: kdj (kyle@moz-dfc.tqd.68.208.IP) ()
[22:49:58] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[22:49:58] *** ChanServ sets mode: +o erickt
[22:51:08] *** Quits: JagaJaga (JagaJaga@moz-gd9.blu.205.109.IP) (Ping timeout: 121 seconds)
[22:51:08] *** Quits: kgrandon (Adium@moz-6m3528.ca.comcast.net) (Quit: Leaving.)
[22:51:10] *** Quits: ihrwein (Mibbit@moz-ki50p6.sch.bme.hu) (Quit: http://www.mibbit.com ajax IRC Client)
[22:51:18] *** Quits: rossm (ross@moz-pnc4od.as13285.net) (Ping timeout: 121 seconds)
[22:51:24] *** Joins: kgrandon (Adium@moz-6m3528.ca.comcast.net)
[22:51:33] *** Joins: rossm (ross@moz-pnc4od.as13285.net)
[22:52:00] *** Quits: Shackra (Jorge@moz-7bh.ng6.177.186.IP) (Ping timeout: 121 seconds)
[22:52:07] *** Quits: kgrandon (Adium@moz-6m3528.ca.comcast.net) (Quit: Leaving.)
[22:56:18] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[22:56:39] <iopq> what does #[inline] mean compared to #[inline(always)]
[22:56:51] <iopq> because when I put #[inline] on a hot path it didn't actually inline it
[22:58:14] <bluss> 1) it allows cross crate inlining (if it wasn't already possible and 2) increases the compiler's tendency to inline it a bit
[22:59:02] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[22:59:24] *** Joins: Rym (y@moz-vsu.f6d.55.31.IP)
[22:59:45] *** Quits: ofeldt (ofeldt@moz-7a34v1.dip0.t-ipconnect.de) (Quit: quit)
[23:00:06] *** Joins: ofeldt (ofeldt@moz-7a34v1.dip0.t-ipconnect.de)
[23:00:27] <iopq> bluss I am happy I got 5% better performance, but I'm also getting 5 seconds longer compile times :(
[23:00:57] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[23:01:37] *** Quits: duesenfranz (jona@moz-piq5sk.tirol.surfer.at) (Client exited)
[23:02:19] *** Quits: {-}grant ({0}grant@moz-fctpaa.mo.charter.com) (Connection closed)
[23:02:33] *** Joins: fyolnish (fyolnish@moz-fajhu6.au-net.ne.jp)
[23:03:52] *** Quits: BigE (BigE@moz-b53.i7b.98.79.IP) (Connection closed)
[23:03:56] *** Quits: Rym (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[23:04:01] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[23:04:18] *** Joins: BigE (BigE@moz-kc79oc.fsa-bg.org)
[23:04:41] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[23:07:46] <untitaker> I have this code: http://sprunge.us/ajBd and I think it's supposed to work, but the compiler complains that rv.field doesn't live long enough, although rv is literally the return val?
[23:08:31] <untitaker> Error message: http://sprunge.us/QSJc
[23:09:10] <WindowsBunny> iopq: the D language comes with cv2pdb which converts DWARF debug info to PDB debug info. It depends on having VS installed.
[23:09:39] *** Quits: fyolnish (fyolnish@moz-fajhu6.au-net.ne.jp) (Ping timeout: 121 seconds)
[23:09:41] *** Joins: foven (foven@moz-tl09vt.nj.comcast.net)
[23:09:44] <untitaker> I guess what I'm confused about is why rustc doesn't recognize that &mut rv.field lives as long as rv.
[23:10:23] *** Quits: psd (psd@moz-acc.mpg.78.202.IP) (Quit: Leaving)
[23:10:49] <untitaker> Or rather, that I can't make a struct's field ref to another struct's field?
[23:10:53] *** Quits: chrissing (chris@moz-uoca37.fios.verizon.net) (Connection closed)
[23:11:11] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[23:11:51] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[23:11:52] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[23:12:16] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[23:12:51] <jshs> untitaker: I would need more context here, but in general you can't move a value with references to (parts of) itself
[23:12:53] <panicbit> untitaker: Can you please share the code of what you're attempts?
[23:12:54] <iopq> WindowsBunny: I'm using CodeXL which seems to work, but I can't see deeper than pub functions
[23:13:06] <panicbit> attempting*
[23:13:41] <iopq> WindowsBunny: is that a problem with CodeXL or rustc or do I have to put annotations so private functions don't get inlined
[23:14:45] *** Joins: jviereck (Adium@moz-8db9c7.dclient.hispeed.ch)
[23:14:47] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[23:14:52] <WindowsBunny> Might be a CodeXL problem
[23:15:06] <WindowsBunny> I believe if you use cv2pdb and then use VS for profiling it should work
[23:15:23] <untitaker> jshs: that actually clears a lot of things up, thanks! I thought as long as the object was "alive", the pointers would be valid too.
[23:15:41] <iopq> WindowsBunny I don't have VS installed
[23:15:48] <untitaker> panicbit: the whole system is quite interdependent, would take a while
[23:16:04] <WindowsBunny> iopq: The community edition is free and comes with profiling
[23:16:24] *** Joins: GGist (Mibbit@moz-35qr64.wa.comcast.net)
[23:16:26] <panicbit> untitaker: Can you instead try to come up with a minimal example?
[23:16:32] <untitaker> panicbit: yes, hang on
[23:16:45] <iopq> WindowsBunny: OK, I'll try it, but I can't guarantee I won't feel bad about using Microsoft stuff
[23:17:25] <untitaker> panicbit: Is it a problem if the example doesn't compile (this is more about conceptual things)
[23:17:52] *** Joins: {-}grant ({0}grant@moz-fctpaa.mo.charter.com)
[23:18:17] <WindowsBunny> iopq: Feel free to mail all your bad feelings to me
[23:18:44] <iopq> do I have to compile cv2pdb from source?
[23:18:54] *** Quits: fizzbooze (bp@moz-lt3.k7f.113.208.IP) (Ping timeout: 121 seconds)
[23:18:57] *** Quits: Guest53 (textual@moz-l52bm6.wi.charter.com) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[23:18:58] <panicbit> untitaker: No it doesn't matter as long as its clarifies your intentions
[23:19:11] <panicbit> s/its/it/
[23:19:12] <WindowsBunny> iopq: If you trust me I can send you my binary
[23:19:45] <iopq> windowsbunny: ok, if I get pwned I'll complain to the mods and they'll ban you
[23:20:04] <WindowsBunny> iopq: https://dl.dropboxusercontent.com/u/30849960/cv2pdb.7z
[23:20:13] *** Joins: dfinninger (dfinninger@moz-6a9v7n.res.rr.com)
[23:22:10] *** Joins: dinfuehr (dinfuehr@moz-rmfk49.highway.telekom.at)
[23:22:12] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Connection closed)
[23:22:57] <SneakySnake> Hmm. I am binding a C function that takes char*, but it doesn't write to the pointee. Can I just declare the argument *const c_char in the FFI declaration?
[23:23:43] *** Joins: timj (timj@moz-558coe.dip0.t-ipconnect.de)
[23:24:04] <SneakySnake> I want to use it with CString, but there doesn't seem to be a way to get a *mut c_char into a CString.
[23:24:08] <WindowsBunny> SneakySnake: Only if you can guarantee that C function doesn't write to it
[23:24:15] *** Quits: dfinninger (dfinninger@moz-6a9v7n.res.rr.com) (Ping timeout: 121 seconds)
[23:24:21] <SneakySnake> Well, I looked at the source code, and it doesn't write to it.
[23:24:23] <WindowsBunny> SneakySnake: Also you can cast between const and mut pointers trivially
[23:25:07] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[23:25:32] *** Quits: agjacome (agjacome@moz-0ajq6l.dynamic.jazztel.es) (Ping timeout: 121 seconds)
[23:26:14] *** Quits: dinfuehr (dinfuehr@moz-rmfk49.highway.telekom.at) (Ping timeout: 121 seconds)
[23:26:18] *** Quits: sillesta (sillesta@moz-501od2.business.telia.com) (Ping timeout: 121 seconds)
[23:26:24] <SneakySnake> So the const mismatch on the FFI declaration won't cause any trouble if the C function doesn't write to the pointee, right?
[23:26:33] <WindowsBunny> yep
[23:26:48] *** Quits: jethrogb (jethrob@moz-p2iedd.scintilla.utwente.nl) (Quit: Winners never quit.)
[23:26:51] *** Quits: brianloveswords (brianlovesw@moz-mve27s.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[23:26:53] *** Quits: zet (lennart@moz-sg3vdn.dip0.t-ipconnect.de) (Quit: WeeChat 1.1.1)
[23:26:54] <WindowsBunny> there's no ABI difference
[23:27:03] *** Quits: Skyler (Skyler@moz-e93b35.sd.cox.net) (Client exited)
[23:27:03] <SneakySnake> Okay, thanks!
[23:27:08] *** Quits: kazagistar (kazagistar@moz-1jum1i.client.bresnan.net) (Quit: Leaving.)
[23:27:51] *** Joins: dmac_ (dmac@moz-2ig65r.ca.comcast.net)
[23:28:41] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[23:31:35] *** Joins: playjax (chatzilla@moz-oa9a2k.optusnet.com.au)
[23:31:59] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Quit: No Ping reply in 180 seconds.)
[23:31:59] *** Quits: dmac_ (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[23:32:50] *** Joins: jethrogb (jethrob@moz-p2iedd.scintilla.utwente.nl)
[23:32:54] *** Quits: jethrogb (jethrob@moz-p2iedd.scintilla.utwente.nl) (Quit: Winners never quit.)
[23:32:57] *** Joins: sprang (sprang@moz-skdqur.hfc.comcastbusiness.net)
[23:33:05] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[23:33:46] *** Quits: jaen (jaen@moz-ifmik2.copit.pl) (Quit: WeeChat 1.1.1)
[23:35:24] *** Quits: mjboa (mike@moz-prg0pt.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[23:36:47] *** Joins: qard (qard@moz-nekdha.vc.shawcable.net)
[23:37:59] *** Joins: glen (Mibbit@moz-orc2oj.res.bhn.net)
[23:38:25] <glen> Hello, I'm trying to get some macros working within a project but the compiler is complaining that they're undefined
[23:39:32] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[23:39:58] *** Joins: Izach (Izacht@moz-mch.nch.45.199.IP)
[23:40:04] <glen> Here is a gist of the code that isn't compiling: https://gist.github.com/anonymous/e090e1490b5b985178a8
[23:40:11] <WindowsBunny> glen: Macros need to be defined before they are used
[23:40:28] *** Quits: masonl (masonl@moz-cnt.haj.125.74.IP) (Ping timeout: 121 seconds)
[23:40:32] <glen> I did define it, in a module called macros
[23:40:46] *** Quits: Ms2ger (Ms2ger@moz-bh431q.isp.belgacom.be) (Ping timeout: 121 seconds)
[23:40:53] <glen> I then use the module macros and mark it with #[macro_use]
[23:41:05] <WindowsBunny> glen: Is the macros module defined before the module you use it from though?
[23:41:45] <glen> It is defined in the root of the crate.
[23:41:52] *** Joins: rootnode (rootnode@moz-go1ut4.ip1.george24.com)
[23:42:07] <WindowsBunny> glen: But the order of the mod definitions
[23:42:16] <WindowsBunny> is the macros mod defined before everything else?
[23:42:26] *** Quits: zxq9_ (ceverett@moz-qsm369.mesh.ad.jp) (Quit: Konversation terminated!)
[23:42:33] *** Quits: cptroot (Mibbit@moz-n169l8.caltech.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[23:42:48] <glen> Oh, you mean in my main where I add files to my crate with the 'mod' keyword?
[23:42:56] * njn gets `errorformat` set correctly for vim quicklists for rustc
[23:43:05] <WindowsBunny> glen: Yes
[23:43:16] <njn> `set efm=%f:%l:%c:\ %*[0-9]:%*[0-9]\ error:\ %m`, if anyone's wondering
[23:43:19] <ChrisMorgan> The `#[macro_use] use macros;` is superfluous, too; `#[macro_use]` only has effect on `extern crate` statements.
[23:43:35] <ChrisMorgan> njn: :compiler rustc
[23:43:48] <glen> In that case, how would I use a macro defined in another module within my crate?
[23:43:55] <njn> ChrisMorgan: "compiler not supported"
[23:44:18] *** Joins: Guest17 (textual@moz-l52bm6.wi.charter.com)
[23:44:18] *** Quits: ytain (ytain@moz-44k.q8p.140.24.IP) (Quit: Textual IRC Client: www.textualapp.com)
[23:44:22] <SneakySnake> If I want to indicate failure, but there is no information about the failure, should I use bool or Result<(), ()>?
[23:44:26] <ChrisMorgan> njn: itâ€™s a part of rust.vim, that suggests you havenâ€™t set it up.
[23:44:31] <glen> After changing the order of my modules so that 'macros' is at the top of the list, I get the same compiler error.
[23:45:11] <SneakySnake> I suppose Result is better, because it's marked must_use, so the user is warned that they might be ignoring failure
[23:45:17] <ChrisMorgan> glen: have you got #[macro_export] on the `mod macros;`?
[23:45:31] <panicbit> SneakySnake: How about Option instead?
[23:45:49] <SneakySnake> Option<()> sounds weird.
[23:45:56] <SneakySnake> Is Option marked must_use?
[23:46:01] *** Joins: kgrandon (Adium@moz-6m3528.ca.comcast.net)
[23:46:08] <untitaker> I've posted my design issue here: http://sprunge.us/cjaB
[23:46:16] <ChrisMorgan> SneakySnake: no
[23:46:20] <panicbit> SneakySnake: Oh you mean you the  function doesn't even return something useful?
[23:46:43] <panicbit> SneakySnake: Still, I think Option<()> is better than Result<(), ()>
[23:46:45] <glen> ChrisMorgan: I just added 
[23:46:53] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[23:47:04] <glen> the #[macro_export] to my `mod macros` line.  The errors persist
[23:47:11] <untitaker> SneakySnake: bool?
[23:47:25] <ChrisMorgan> SneakySnake: if it is a case of failure, then Result is good.
[23:47:39] <SneakySnake> Yeah, I think so too. must_use is a useful property
[23:47:40] <untitaker> oh you already suggested that
[23:47:42] <ChrisMorgan> Result<(), ()> is not terribly common but there is definitely nothing wrong with it.
[23:47:58] <SneakySnake> It just looks weird. Like a ghost's face.
[23:48:45] <untitaker> SneakySnake: perhaps you want to define a stub struct anyway, so you don't have to rewrite your code that much
[23:49:08] <SneakySnake> I suppose you're right.
[23:49:23] <untitaker> (in case you want to return finer-grained errs later)
[23:50:04] <iopq> WindowsBunny: VS is 9 gigs
[23:50:33] <panicbit> whut
[23:50:58] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Ping timeout: 121 seconds)
[23:51:40] <iopq> inb4 I profile it and it's just going to tell me "yep, everything on your hot path is slow"
[23:52:06] <glen> It seems that putting the macro into my main.rs file fixed the issue.  Is it possible to have a macro defined in a separate module file be used by other files in that crate?
[23:52:08] *** Quits: tyler (tyler@moz-5ei.4no.69.155.IP) (Quit: Textual IRC Client: www.textualapp.com)
[23:52:19] *** Joins: Johannes (Johannes@moz-4et8d7.ocn.ne.jp)
[23:52:36] <iopq> glen I did macro_use not sure if that helps
[23:52:49] *** Quits: alhof (dylan@moz-v7a.6j4.9.153.IP) (Ping timeout: 121 seconds)
[23:52:53] <WindowsBunny> iopq: Depends on how good our debug info is, ideally it should have line numbers
[23:52:56] *** Quits: dylan_ (dylan@moz-v7a.6j4.9.153.IP) (Ping timeout: 121 seconds)
[23:53:37] *** Joins: Rym (y@moz-vsu.f6d.55.31.IP)
[23:53:50] <iopq> WindowsBunny I just want which function takes the longest to run inside of my pub functions (I already know the pub functions are slow). I wonder maybe I can just disable inlining
[23:54:10] <WindowsBunny> iopq: #[inline(never)]
[23:54:21] *** Joins: summerlight_ (summerlight@moz-99k.2mj.130.121.IP)
[23:54:25] <ChrisMorgan> glen: hang on, my memory is incorrect. #[macro_use] on the `mod macros;` and put it first, thatâ€™s all thatâ€™s needed.
[23:54:28] *** Joins: alhof (dylan@moz-v7a.6j4.9.153.IP)
[23:54:29] *** Joins: dylan_ (dylan@moz-v7a.6j4.9.153.IP)
[23:54:42] *** Quits: summerlight_ (summerlight@moz-99k.2mj.130.121.IP) (Quit: ì „ ì´ë§Œ ê°‘ë‹ˆë‹¤.)
[23:54:47] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[23:54:57] <ChrisMorgan> The stuff is covered in the book, too: http://doc.rust-lang.org/book/advanced-macros.html
[23:55:30] *** Quits: kiwnix (egarcia@moz-mj5u9d.user.ono.com) (Ping timeout: 121 seconds)
[23:55:31] <glen> Ah, thanks for the link!
[23:56:07] *** Quits: glendc (glendc@moz-lm5.ch9.159.212.IP) (Ping timeout: 121 seconds)
[23:56:41] *** Quits: polyfractal (polyfractal@moz-roi.c9b.43.69.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[23:56:49] *** Joins: d3z (davidb@moz-0fgl8u.members.linode.com)
[23:57:51] *** Joins: Myst (Thunderbird@moz-o9q90t.cable.rogers.com)
[23:57:52] *** Joins: masonl (masonl@moz-cnt.haj.125.74.IP)
[23:58:45] *** Quits: glen (Mibbit@moz-orc2oj.res.bhn.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:59:02] *** Joins: awgross (Adium@moz-qp0.3bf.38.207.IP)
[23:59:40] *** Joins: vairav (vairav@moz-qtc2tv.ca.comcast.net)
[23:59:53] *** Quits: Rym (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
