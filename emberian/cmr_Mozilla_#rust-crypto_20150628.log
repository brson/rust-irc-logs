[00:11:00] <Ilari> (Of course, one would have to be more careful with padding.)
[00:13:52] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[00:19:11] *** Quits: dpc (dpc@moz-t6gr4b.ca.comcast.net) (Ping timeout: 121 seconds)
[00:37:43] <Ilari> E.g. Private key is (a, v), public key is aG,  M' = M || pad1 || le8octets(len(M)) || C || le8octets(len(C)) || octet(0x80) || pad2  (pads are to fill block with zeroes)  r = H(M' || octet(0x00) || v)    h = H(M' || encode(rB))   s = r - h * a,  Signature is (rB, s).
[00:42:47] <Ilari> That needs hash capabilities not normally present, but should work with majority of hash functions.
[00:46:48] <Ilari> (Big enough output of course, 384/512 bits)
[00:52:19] *** Joins: dpc (dpc@moz-t6gr4b.ca.comcast.net)
[01:16:01] <Ilari> I don't plan to send that (would be too confusing).
[01:32:07] <Ilari> Kinda surpsiring things have been this quiet.
[01:39:00] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[01:43:29] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[02:01:16] <eternaleye> Ilari: Simple arrays in arrays hits the issue.
[02:01:36] <eternaleye> Ilari: Arrays are length-delimited, and contain arbitrary CBOR data structures.
[02:01:48] <eternaleye> So array of array of num = nested
[02:06:09] *** Quits: blank_name (blank_name@moz-p4egrb.mi.frontiernet.net) (Quit: leaving)
[02:07:59] *** Joins: blank_name (blank_name@moz-p4egrb.mi.frontiernet.net)
[02:40:56] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[03:04:44] *** Quits: Yurume (Yurume@moz-0t8.piq.68.115.IP) (Ping timeout: 121 seconds)
[03:05:12] *** Quits: klutzy (not@moz-0t8.piq.68.115.IP) (Ping timeout: 121 seconds)
[03:06:02] *** Joins: Yurume (Yurume@moz-0t8.piq.68.115.IP)
[03:06:44] *** Joins: klutzy (not@moz-0t8.piq.68.115.IP)
[03:45:30] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[03:46:25] *** Quits: dpc (dpc@moz-t6gr4b.ca.comcast.net) (Ping timeout: 121 seconds)
[04:18:42] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[04:39:25] *** Joins: dpc (dpc@moz-t6gr4b.ca.comcast.net)
[05:14:13] *** Quits: dpc (dpc@moz-t6gr4b.ca.comcast.net) (Ping timeout: 121 seconds)
[05:18:19] *** Joins: dpc (dpc@moz-t6gr4b.ca.comcast.net)
[06:15:36] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[06:20:41] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[06:58:44] *** Quits: dpc (dpc@moz-t6gr4b.ca.comcast.net) (Ping timeout: 121 seconds)
[07:22:01] *** Quits: skeuomorf (skeuomorf@moz-v34.cog.32.197.IP) (Ping timeout: 121 seconds)
[07:48:26] *** Joins: skeuomorf (skeuomorf@moz-5m2.pff.32.197.IP)
[08:04:41] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[08:09:26] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[09:38:42] *** Quits: klutzy (not@moz-0t8.piq.68.115.IP) (Ping timeout: 121 seconds)
[09:39:15] *** Quits: Yurume (Yurume@moz-0t8.piq.68.115.IP) (Ping timeout: 121 seconds)
[09:53:26] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[09:58:11] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[10:04:32] *** Joins: Yurume (Yurume@moz-0t8.piq.68.115.IP)
[11:42:12] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[11:46:58] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[12:53:04] *** Joins: hendrik (chatzilla@moz-2keeo2.dip0.t-ipconnect.de)
[12:53:33] *** Quits: hendrik (chatzilla@moz-2keeo2.dip0.t-ipconnect.de) (Quit: ChatZilla 0.9.91.1 [Firefox 38.0.5/20150602115007])
[12:55:21] *** Joins: hoodie (chatzilla@moz-2keeo2.dip0.t-ipconnect.de)
[13:12:42] *** Joins: klutzy (not@moz-0t8.piq.68.115.IP)
[13:30:59] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[13:35:44] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[15:16:27] *** Joins: Ilari_laptop (ilariliusva@moz-odeneh.dhcp.inet.fi)
[15:16:44] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[15:21:29] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[15:27:14] *** Quits: hoodie (chatzilla@moz-2keeo2.dip0.t-ipconnect.de) (Quit: ChatZilla 0.9.91.1 [Firefox 38.0.5/20150602115007])
[15:53:56] *** Parts: Ilari (user@moz-cb3c4u.elisa-laajakaista.fi) ()
[16:21:53] *** Joins: Ilari (user@moz-cb3c4u.elisa-laajakaista.fi)
[16:47:42] *** Quits: Ilari_laptop (ilariliusva@moz-odeneh.dhcp.inet.fi) (Quit: leaving)
[17:05:37] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[17:10:15] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[17:11:40] <Ilari> Pfft... Android feature that scans for TLS handshake signature to detect unencrypted traffic. So if one wants to use something that isn't garbage, one needs to enable cleartext traffic.
[18:17:23] <Ilari> Hmm... Wonder in how many protocols would double-pipe structure like in two of the CFRG signature proposals cause problems...
[19:07:48] <Tiffany> wow
[19:08:00] <Tiffany> so even if you have crypto, android will be all "wah wah this app is insecure!" because you're not using TLS?
[19:08:03] <Tiffany> is there no way around that?
[19:09:52] <c74d> wrap the other encryption inside TLS? (mostly joking)
[19:10:11] <Tiffany> I wonder how easy it is to make your protocol look enough like TLS to past the test without actually being TLS
[19:21:06] <bascule> wow that's... kinda lame
[19:21:53] <Tiffany> I wonder if it tests for the NULL cipher
[19:22:12] <Tiffany> if it doesn't, then that's an amazing fail on both fronts
[19:22:22] <bascule> TLS_ECDH_ECDSA_WITH _NULL_SHA!
[19:22:35] <Tiffany> is it possible to get TLS_NULL_WITH_NULL_NULL?
[19:23:07] <bascule> I suppose it would depend on what sort of packet inspection afforementioned thing is doing
[19:23:44] <Tiffany> well, is there a TLS thing for that at all?
[19:24:20] <Tiffany> I googled and all I found is this RFC which defines TLS_{DHE_,RSA_,}_PSK_WITH_NULL_SHA
[19:24:27] <bascule> according to Google, yes?
[19:24:39] <Tiffany> oh, here's a list of all the suites
[19:24:40] <bascule>    TLS_NULL_WITH_NULL_NULL is specified and is the initial state of a
[19:24:40] <bascule>    TLS connection during the first handshake on that channel, but must
[19:24:40] <bascule>    not be negotiated, as it provides no more protection than an
[19:24:40] <bascule>    unsecured connection.
[19:24:40] <bascule>     CipherSuite TLS_NULL_WITH_NULL_NULL                = { 0x00,0x00 };
[19:24:48] <Tiffany> yeah
[19:24:52] <Tiffany> codepoint 0 is all nulls
[19:24:54] <Tiffany> wonderful
[19:25:49] <Tiffany> TLS_NULL_WITH_NULL_NULL is my new favourite TLS cipher suite
[19:26:06] <Tiffany> is there any reason for this to exist at all?
[19:27:11] <bascule> "debugging!" >_<
[19:27:27] <bascule> and the use case you described, bypassing shitty TLS packet inspection?
[19:27:28] <bascule> lol
[19:27:40] <bascule> I suppose this is why all ciphersuite strings have you do !aNULL:!eNULL
[19:28:11] <bascule> just in case something is stupid enough to have that on by default
[19:28:26] <Tiffany> what happens with TLS_NULL_WITH_NULL_NULL?
[19:28:31] <Tiffany> like, it goes through the whole handshake?
[19:28:41] <Tiffany> now I need to read about the TLS handshake
[19:30:00] <Tiffany> okay
[19:30:24] <bascule> haha I have no idea
[19:30:35] <bascule> what's the ClientKeyExchange part of nullnullnull?
[19:31:22] <Tiffany> ClientHello, ServerHello, Certificate+ServerKeyExchange are skipped, ServerHelloDone, then empty ClientKeyExchange, then ChangeCipherSpec + Finished
[19:31:52] <Tiffany> and then you start sending what is essentially TCP but with 8 bytes of pointless overhead
[19:31:53] <Tiffany> incredible
[19:32:13] <Tiffany> or uh 5?
[19:32:16] <Tiffany> this table is confusing
[19:36:57] <Tiffany> yeah, 5 bytes of overhead
[19:37:03] <Tiffany> weird that it doesn't enforce alignment
[19:45:41] <Tiffany> TLS_KRB5_WITH_DES_CBC_SHA what in the world is this?
[19:46:19] <Tiffany> and what's "Anon"?
[19:49:01] *** Joins: dpc (dpc@moz-t6gr4b.ca.comcast.net)
[19:49:07] <Tiffany> I'm having trouble finding any info on DH_anon and ECDH_anon besides people saying not to use it
[19:49:33] <Tiffany> oh
[19:49:43] <Tiffany> it's for "completely anonymous" i.e. unauthenticated, prone to active MITM
[19:50:21] <Tiffany> so you could use it for opportunistic encryption
[19:51:49] <Tiffany> apparently the IESG "strongly discourages" the use of the KRB5 suites with 40 bit security
[19:52:33] <Tiffany> oh
[19:52:35] <Tiffany> I see how this works
[19:52:46] <Tiffany> it lets you plug in the service key you get from the AS into your TLS connection
[19:52:49] <Tiffany> that's kind of neat
[19:53:31] <Tiffany> maybe I should write a blog post about the fascinating horrors lurking in TLS
[19:54:56] <Tiffany> hahaha there's a TLS ciphersuite which supports this https://en.wikipedia.org/wiki/Fortezza
[20:13:45] <bascule> lol wtf
[20:14:46] <bascule> KRB5 ciphersuites for TLS?
[20:14:56] <bascule> I didn't know those existed
[20:15:03] <Ilari> Tiffany: As for ways around it, application can have "insecure" communications enabled.
[20:16:14] <Ilari> Tiffany: As for the all NULLs one, that exists as a special value. It is not actually a valid ciphersuite.
[20:24:20] *** Quits: dpc (dpc@moz-t6gr4b.ca.comcast.net) (Ping timeout: 121 seconds)
[20:27:15] <Ilari> And to improve TLS security, one has to remove that old crap.
[20:28:01] <Tiffany> I'm guessing that shows up in the permissions screen?
[20:28:22] <Tiffany> I guess it will at least discourage junk crypto along the lines of telegram
[20:29:02] <Ilari> Well, if one has someone competent crypto designer, making more secure than TLS protocol isn't difficult.
[20:29:41] <bascule> know what I discovered about Telegram that bugs me even more?
[20:29:48] <bascule> their UI is a blatent ripoff of WhatsApp
[20:29:57] <bascule> like, carbon copy almost
[20:31:00] <Tiffany> yeah ilari
[20:31:27] <Tiffany> ilari: are the other null suites valid though?
[20:31:31] <Ilari> That's because the original designers of SSL v3 weren't competent, and then IETF didn't rewrite the thing to actually make it secure.
[20:31:37] <Tiffany> why does it need to exist as a special value?
[20:31:42] <Tiffany> and more importantly, does openssl reject it?
[20:33:21] *** Joins: dpc (dpc@moz-t6gr4b.ca.comcast.net)
[20:34:12] <Ilari> (Well, at least up to TLS 1.2)
[20:34:43] <Tiffany> I've wondered about that
[20:34:54] <Tiffany> is there any reason we can't build an entirely new crypto protocol and just call it "TLS 1.3" or "TLS 1.4"?
[20:35:24] <Tiffany> I mean the handshake still has to be compatible enough for a server to branch based on the received ClientHello
[20:35:31] <Tiffany> but other than that, it can be completely different
[20:35:51] <bascule> TLS 1.3 is sort of heading in that direction, if it's headed in a direction, heh
[20:45:14] <Ilari> Okay, looks like the detection looks for connection (or datagram set) starting with packet containing TLS record with type 22 (handshake), major version 3 (254 in case of DTLS) and handshake message type 1 (ClientHello).
[20:48:25] <Ilari> So TCP stream that started 16 03 FF FF FF 00 00 01 01 would be detected as TLS (nevermind that is totally invalid for TLS).
[20:49:47] <bascule> cool, just stick that preamble into all encryption protocols o_O
[20:53:33] <Ilari> Oops, 16 03 FF FF FF 01 00 00 00 ... TLS version 1.254, 65535 byte record (maximum legit one has IIRC size of 18kB), ClientHello with 0 byte payload.
[20:57:12] <Ilari> What matters is that it starts with 16 03 xx xx xx 01, where xx can be any byte. And for DTLS, 16 FE xx xx xx xx xx xx xx xx xx xx xx 01.
[20:58:00] <Tiffany> heh
[21:03:08] <Ilari> I actually once wrote a server program (now discontinued) that sniffed TLS vs. clear from first bytes of the connection.
[21:04:47] <Ilari> And the replacement of that sniffs encrypted (now not TLS) vs. clear from the first byte of the connection.
[21:13:12] <Ilari> One example of why operating heavy machinery when tired is not a good idea: Mistaking aircraft landing for takeoff and raising landing gear just before touchdown (the copilot has very little time to abort landing). :->
[21:23:37] <Ilari> Well, TLS 1.3 will at least be really different from TLS 1.2 (and SSL v3). Of course, if it is actually usable remains to be seen.
[21:30:55] <Ilari> Not supporting configurations would cut at least a good chunk of the complexity.
[21:31:17] <Ilari> And TLS 1.3 can still start in 1RTT even without those.
[21:36:32] *** Quits: dpc (dpc@moz-t6gr4b.ca.comcast.net) (Ping timeout: 121 seconds)
[21:36:40] <Ilari> Short descriptions of some TLS extensions: "This extension is somewhat dangerous." and "Infamous.".
[21:41:02] <kmc> haha
[21:41:20] <kmc> which one is infamous? https://tools.ietf.org/html/draft-rescorla-tls-extended-random-00 ?
[21:48:58] <bascule> haha, sounds about right
[21:51:01] <Ilari> Actually, there were two with "Infamous.". Client_authz and Server_authz.
[21:52:51] <Ilari> Haha, drew state machine of TLS 1.3 handshake (minus 0-RTT, which I can't figure out how it would work). Looks like I found a mistake... EncryptedExtensions is not sent for PurePSK, except that might actually be needed (e.g. for ALPN, which is bit special).
[21:54:18] <kmc> nice
[21:54:56] <Ilari> 16 states, 20 transitions.
[21:55:37] <kmc> did you model it formally?
[21:55:43] <kmc> can you check properties formally?
[21:56:23] <bascule> kmc: ever seen this? https://raw.githubusercontent.com/basho/webmachine/develop/docs/http-headers-status-v3.png
[21:56:46] <kmc> neat
[21:57:45] <Ilari> kmc: Well, just whipped up Graphviz digraph.
[21:58:25] <kmc> I don't know much about formal modeling of protocols
[21:58:45] <kmc> Alloy is nice to use, and sufficiently flexible that you should be able to get at least a few properties
[21:59:22] <kmc> it's a "theorem disprover"; it uses a SMT solver to find small counterexamples to your properties, if they exist
[22:01:20] <Ilari> Also, the Resumption EncryptedExtensions is probably a mistake also considering that TLS 1.3 is supposed to have resumption be special case of pure-psk, and pure-psk sure needs extensions like ALPN which go to EncryptedExtensions.
[22:05:00] <Ilari> Also, the diagram doesn't consider messages from extensions. 
[22:07:48] <Ilari> Also, there are 3 duplicated messages (ClientHello, Certificate, CertificateVerify (which appears thrice)).
[22:08:15] <Ilari> Oops, finished is also duplicated, appears thrice.
[22:10:01] <Ilari> Taking directionality into account there are three duplicated messages: ClientHello, CertificateVerify (server to client), Finished (server to client). The latter two are because of behaviour of CertificateRequest.
[22:21:45] <Ilari> bascule: AFAIK, fetch() does buggy things if one is trying to do PUT and server returns 301.
[22:26:46] *** Quits: eddyb (eddyb@moz-l3g.mv7.25.188.IP) (Ping timeout: 121 seconds)
[22:31:53] <Ilari> The reason why I can't figure out what to do with 0-RTT is that TLS key exchange is half-duplex, and I can't find any end marker for the 0-RTT.
[22:32:32] *** Joins: dpc (dpc@moz-t6gr4b.ca.comcast.net)
[22:38:12] <Ilari> Well, the amount of TODOs with 0RTT is pretty large, so I guess it is one of those.
[22:41:17] *** Quits: dpc (dpc@moz-t6gr4b.ca.comcast.net) (Ping timeout: 121 seconds)
[22:48:19] <Ilari> Also, one (if one is competent with crypto design) could probably design and implement proper secure transport protocol in less time it will take to finish TLS 1.3, despite the fact that TLS 1.3 has over 14 months of head start. :->
[22:50:26] <Ilari> And I don't see the chances that TLS 1.3 will get finished (at least into shape for WGLC) this year as very big...
[22:51:34] <eternaleye> Ilari: It's a pretty low bar of competence.
[22:53:07] <eternaleye> Ilari: Considering one could basically just say "Use any nonce-based AE scheme, use Rogaway's STREAM construction, key it from an anonymous diffie-hellman exchange, derive a channel binding, and perform authentication over the channel binding using signatures on contextualized hashes" 
[22:53:23] <eternaleye> er, elliptic curve diffie-hellman
[22:54:25] <eternaleye> Ilari: Side benefit, the STREAM construction would work for a DTLS equivalent too.
[22:55:14] <eternaleye> Ilari: Now, stuff like ALPN, NPN, etc. would require more on top of that, but personally I consider those misfeatures at the secure transport level anyway...
[22:55:33] <eternaleye> Ilari: Doing all auth over the channel binding makes it trivial to do those on the inside, even with termination.
[22:56:42] <eternaleye> Ilari: Really, this shouldn't require ANY innovation - the pieces are already out there.
[22:57:31] <eternaleye> Ilari: The auth flow of tcpcrypt, the online-AEAD handling of Rogaway, unauthenticated DH-like key exchange is a long-solved problem, and done.
[22:57:32] <Ilari> Then there are fun edge cases in TLS 1.3 WIP: Like DH-anon with configuration obtained out-of-band...
[22:58:15] <eternaleye> Really, all the problems the TLS process is having are because TLS does way too fucking much, and does it in the wrong order
[22:59:55] <Ilari> Well, the current major problems seem to be related to wanting to do two-peer 0-RTT.
[23:01:48] <eternaleye> I personally think 0-RTT is a red herring
[23:02:14] <eternaleye> It only really helps short-lived sessions, and those should honestly be relatively short once HTTP/2 gets off the ground
[23:02:26] <Ilari> Hasn't it already?
[23:02:28] <eternaleye> s/short/thin on the ground/
[23:02:39] <eternaleye> Ilari: It's *done*, I meant in terms of deployment
[23:02:51] <eternaleye> Ilari: off the ground = wide-spread usage
[23:07:24] <Tiffany> it's been a while since the IPv4 reserves on ARIN's site have changed
[23:08:09] <eternaleye> Everyone's gone home, it's over, nobody left to update it :P
[23:16:33] <Ilari> Ah, found Firefox 38 telemetry statistics for HTTP/2 usage: ~19 billion out of ~200 billion requests.
[23:16:57] <Ilari> So about 9.5% in that sample.
[23:20:29] <eternaleye> What I really think will make the difference is CDNs
[23:21:03] <eternaleye> Once those have mostly converted over to HTTP/2, I suspect there'll be a lot less short-lived connections
[23:21:40] <Ilari> Reminds me of comment on ECC Workshop about Rich Salz flipping a switch...
[23:24:54] <Ilari> Modern versions of Chrome and Firefox both can do HTTP/2, and if server has it enabled, they will.
[23:27:55] <Ilari> Also, pretty much the only supported certificate format in TLS is pretty bad.
[23:39:33] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[23:44:14] <Tiffany> what also has to be defeated is the practice of splitting files over as many domains as possible
[23:49:52] <Tiffany> hmm
[23:49:56] <Tiffany> PSK means pre-shared key, right?
[23:50:01] <Ilari> Tiffany: Yes.
[23:50:15] <Tiffany> what is the point in  having a dedicated KRB5 authentication mechanism when you could just hook it up to PSK?
[23:51:38] <Tiffany> well, whatever that first thing in the cipher suite is
[23:51:40] <Tiffany> key exchange?
[23:51:55] <Tiffany> oh, both
[23:53:24] <Tiffany> I wonder what this is: TLS_GOSTR341094_WITH_28147_CNT_IMIT
[23:53:29] <Tiffany> there's no wikipedia page for GOSTR
[23:53:52] <Tiffany> ah
[23:54:02] <Tiffany> there is a wikipedia page for GOST, which is apparently a block cipher
[23:54:04] <c74d> <https://en.wikipedia.org/wiki/GOST#GOST_R>
[23:54:44] <Tiffany> hm
[23:54:49] <Tiffany> does GOST share the same role as SEED?
