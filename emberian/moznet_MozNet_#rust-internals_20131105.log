[00:07:04] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[00:17:12] <Luqman> nmatsakis: ok, added the check to astconv and the test.
[00:23:55] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[00:30:37] *** Quits: geoffhill (geoffhill@moz-79C8D45C.amazon.com) (Quit: geoffhill)
[00:37:44] <brson> acrichto: do your recent changes to file io obsolete https://github.com/mozilla/rust/issues/6085?
[00:38:09] <acrichto> brson: kinda, right now they don't take a c_int, I ended up settling on a u32
[00:38:21] <acrichto> this is just for permissions bits
[00:38:27] <acrichto> which arguably isn't the most elegant interface
[00:38:47] <sfackler> It'd be nice to clean up EnumSet and put it in libstd
[00:38:51] <acrichto> but I had trouble thinking of something as expressive and easy to use while still allowing you do do everything that flags does
[00:39:00] <acrichto> that would probably be the best alternative yeah
[00:40:22] <sfackler> it doesn't even implement Set and MutableSet atm
[00:42:20] <brson> I added an issue about moving EnumSet to std https://github.com/mozilla/rust/issues/10272
[00:42:31] <brson> somebody on the mailing list was asking about this today, so they may want to tackle it
[00:43:15] <brson> are there other things in std that want EnumSet?
[00:43:15] <acrichto> one of these days I will submit a runtime patch that's less than a few hundred lin
[00:43:25] <acrichto> brson: time
[00:43:35] <brson> there's no time in std is there?
[00:43:36] <acrichto> FileStat::{ctime,mtime,atime} are just u64 which is kinda sad
[00:43:39] <brson> ah
[00:43:54] <acrichto> maybe not a full-blown time abstraction
[00:43:58] <acrichto> but u64 is wrong in that situation
[00:44:11] <acrichto> brson: a sorting algorithm like strcat has mentioned
[00:44:19] <acrichto> (no clone bound and not slow)
[00:44:41] <acrichto> ebml! (jk)
[00:45:06] <brson> FileMode is more traditionally a set of flags, though I don't know that it's better that way
[00:45:15] <brson> or two sets of flags perhaps?
[00:45:26] <acrichto> having it as an EnumSet would make usage easier though
[00:45:40] <acrichto> stat(&path).perm & io::MyPermissions == io::MyPermissions is annoying to write/read
[00:45:42] * strcat thinks treemap, ringbuf and priority_queue belong in libstd but they need to be cleaned up first
[00:46:01] <brson> do we even have a plain old queue anywhere?
[00:46:07] <strcat> ringbuf
[00:46:17] <brson> is it fixed size?
[00:46:19] <strcat> no
[00:46:30] <brson> can we call it queue? :)
[00:46:39] <strcat> brson: well, it was called 'deque' before
[00:46:43] <brson> or is the ringbufness important?
[00:46:44] <nmatsakis> Luqman: ping
[00:46:50] <brson> oh it's a deque
[00:47:05] <tikue> aren't ~[T] queues? 
[00:47:14] <strcat> you can use ~[T] as a stack
[00:47:15] <brson> seems like having a type called Queue and Stack is kind of a no-brainer
[00:47:21] <brson> just for discoverability
[00:47:27] <brson> maybe they can be simple typedefs or wrappers
[00:48:09] <dbaupp> Stack would just be a typedef for ~[], which seems a little silly.
[00:48:29] <strcat> and Queue would be a typedef for Deque/Ringbuf (whatever it ends up being called)
[00:48:48] <sfackler> I would think that they'd be traits
[00:51:34] <Luqman> nmatsakis: pong
[00:52:53] *** Joins: geoffhill (geoffhill@moz-244CF33A.amazon.com)
[00:53:14] <nmatsakis> Luqman: PR looks great, one last thing we should have a test for: https://github.com/mozilla/rust/pull/10064#issuecomment-27737919 want to add it right now and r+ afterwards? 
[00:53:45] <nmatsakis> brson: regarding go and stacks, that was totally the wrong link, but I can't find the one I meant to send :/
[00:54:03] <nmatsakis> ah, here it is!
[00:54:23] <strcat> this https://docs.google.com/document/d/1wAaf1rYoM4S4gtnPh0zOlGzWtrZFQ5suE8qr2sD8uWQ/pub ?
[00:54:41] <aatch> strcat, for the priority queue, I'd say reduce it to a min/max heap for inclusion in libstd
[00:54:56] <strcat> aatch: well that's what it is
[00:54:59] <strcat> a max heap
[00:55:04] <brson> strcat: Can you open seperate issues about moving treemap, ringbuf, priority_queue, and sorting to std? I agree we need a few more of the most common data structures
[00:55:07] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[00:55:10] <brson> for sure we need to be able to *sort* things
[00:55:25] <nmatsakis> strcat: yes, that.
[00:55:25] <brson> though extra::sort is a mess
[00:55:26] <strcat> you can sort ~[T] in-place  with PriorityQueue ;p
[00:55:27] <aatch> strcat, I meant following the idea of just typedef-ing things.
[00:56:36] <strcat> well it could be based on vector functions
[00:56:41] <aatch> Hmm, can you have a function and a module with the same name?
[00:56:43] <Luqman> nmatsakis: sweet, thanks!
[00:56:54] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[00:57:41] <dbaupp> strcat: fwiw, PriorityQueue is about 2x slower than sort::quick_sort3 (for a large vector of f64s, in my testing) so it's not an acceptable replacement for extra::sort yet.
[00:57:54] <strcat> well it's not well optimized yet
[00:58:12] <dbaupp> and neither is sort, I assume :P
[01:00:31] <aatch> At any rate, we need some sort of standard sorting function that just takes a ~[T] and returns a sorted ~[T] with <T:Ord>.
[01:00:50] <aatch> preferably, just called 'sort'.
[01:01:43] <strcat> well it should likely be on &mut [T]
[01:02:18] <dbaupp> (or the mutable version of RandomAccessIterator)
[01:03:10] <aatch> strcat, yeah. Preferably both would be available, one way or another.
[01:03:32] <aatch> a ~[T] -> ~[T] is good for functional-style code.
[01:04:36] <sfackler> you could do that with v.clone().sort()
[01:05:27] <strcat> sort won't return anything, in all likelihood
[01:05:30] <dbaupp> not quite, that would just sort the temporary
[01:06:08] <sfackler> oh right
[01:08:18] <aatch> At any rate, the current case of having like 4 different sorting functions is just mad
[01:09:49] <strcat> just need a single sort algorithm
[01:09:50] <acrichto> brson: debuginfo tests may not be running on the bots normally
[01:09:56] <acrichto> brson: the snapshot just failed due to one failing
[01:12:55] <acrichto> brson: nvmd, must just be a different version of gdb
[01:13:50] <brson> damn bots
[01:14:01] <acrichto> oh I checked, we're running debug-info test
[01:14:05] <acrichto> so no worries there
[01:14:09] <acrichto> https://github.com/mozilla/rust/pull/10276
[01:22:06] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[01:22:06] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14ecfa654 to 14658637b: 02http://git.io/N3iJvQ
[01:22:07] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[01:22:08] *** Quits: tikue (tikue_star@E3D1796E.21C37D63.689607DE.IP) (Ping timeout)
[01:22:10] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[01:22:10] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/DI3_UQ
[01:22:10] <ghrust> 13rust/06auto 14e7a6782 15Alex Crichton: Relax the constraints on a debuginfo test...
[01:22:10] <ghrust> 13rust/06auto 1472e432d 15bors: auto merge of #10276 : alexcrichton/rust/fix-debug-info, r=jdm...
[01:22:11] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[01:25:25] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[01:27:27] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[01:27:28] *** ChanServ sets mode: +o tjc
[01:27:33] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Client exited)
[01:35:11] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[01:41:42] *** Joins: lkuper (lkuper@89685233.276CCABD.D92E75BF.IP)
[01:45:24] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[02:05:46] <acrichto> brson: r? https://github.com/mozilla/rust/pull/10270
[02:21:09] *** Joins: tikue (tikue_star@E3D1796E.21C37D63.689607DE.IP)
[02:21:31] <mletterle> eh.. ironically, i think I originally had the debug-info-metadata test not looking for the crate name..
[02:21:43] <mletterle> for some reason I think I ended up thinking that [...] didn't work within a line.
[02:22:26] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Quit: ZZZzzzâ€¦)
[02:22:48] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[02:23:09] <brson> acrichto: does that mean stdout will have bad perf when piping?
[02:23:14] *** Quits: tikue (tikue_star@E3D1796E.21C37D63.689607DE.IP) (Ping timeout)
[02:24:03] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Quit: ZZZzzzâ€¦)
[02:24:06] <strcat> brson: yes, at least relative to other languages
[02:25:07] <brson> acrichto: can you open an issue about the perf problem?
[02:27:11] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[02:27:12] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/DI3_UQ
[02:27:12] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[02:28:26] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[02:32:08] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[02:32:08] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/dnHNWw
[02:32:08] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[02:32:16] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[02:32:16] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/oMRTeg
[02:32:16] <ghrust> 13rust/06auto 1464b4cb8 15Luqman Aden: libsyntax/librustc: Allow calling variadic foreign functions.
[02:32:16] <ghrust> 13rust/06auto 14a1931f5 15Luqman Aden: Add tests for variadic foreign functions.
[02:32:16] <ghrust> 13rust/06auto 141f9c8b6 15bors: auto merge of #10064 : luqmana/rust/vvv, r=nikomatsakis...
[02:32:18] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[02:33:39] *** Quits: jeffdb (jeff@moz-ED35AD97.hsd1.ca.comcast.net) (Quit: jeffdb)
[02:34:07] *** Joins: strobegen (Adium@A75B6238.EACE1F8D.A133900E.IP)
[02:35:02] *** Joins: tikue (tikue_star@E3D1796E.21C37D63.689607DE.IP)
[02:37:15] <acrichto> brson: I'll open an issue, sure
[02:38:41] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[02:38:41] <ghrust> 01[13rust01] 15alexcrichton merged 06master into 06snap-stage3: 02http://git.io/DI3_UQ
[02:38:41] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[02:39:03] *** Joins: jeffdb (jeff@moz-ED35AD97.hsd1.ca.comcast.net)
[02:44:00] <strcat> nmatsakis: around?
[02:45:39] <nmatsakis> strcat: yes, tohugh likely not for long
[02:47:22] *** Quits: jeffdb (jeff@moz-ED35AD97.hsd1.ca.comcast.net) (Quit: jeffdb)
[02:47:40] *** Quits: geoffhill (geoffhill@moz-244CF33A.amazon.com) (Quit: geoffhill)
[02:51:37] <nmatsakis> strcat: going to bed 
[02:51:54] <strcat> nmatsakis: \o, don't worry, I'll talk tommorow, it's a long-ish thing
[02:52:08] <strcat> and I might figure it out myself by then ;p
[02:56:10] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[02:56:32] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[02:57:59] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[03:14:34] *** Quits: dbaupp (Thunderbir@moz-9879E359.lns20.syd6.internode.on.net) (Quit: dbaupp)
[03:16:40] *** Joins: dbaupp (Thunderbir@moz-9879E359.lns20.syd6.internode.on.net)
[03:21:51] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[03:21:52] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 141f9c8b6 to 1472e432d: 02http://git.io/N3iJvQ
[03:21:52] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[03:21:59] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[03:21:59] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/4LAK1g
[03:21:59] <ghrust> 13rust/06auto 146163743 15Alex Crichton: Add a type_id intrinsic...
[03:21:59] <ghrust> 13rust/06auto 14b004493 15Alex Crichton: Remove unnecessary unwind messages...
[03:21:59] <ghrust> 13rust/06auto 144b04395 15bors: auto merge of #10182 : alexcrichton/rust/typeid-intrinsic, r=nikomatsakis...
[03:22:01] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[03:29:49] *** Joins: dcrewi (david@moz-AB8667CE.gyrae.net)
[03:51:02] *** Quits: zz_kimundi (kimundi@moz-E2D26A0B.dip0.t-ipconnect.de) (Ping timeout)
[03:54:36] *** Joins: zz_kimundi (kimundi@moz-A0D07E3E.dip0.t-ipconnect.de)
[03:54:37] *** zz_kimundi is now known as kimundi
[03:58:42] *** Quits: tikue (tikue_star@E3D1796E.21C37D63.689607DE.IP) (Ping timeout)
[04:04:29] *** Joins: tikue (tikue_star@E3D1796E.21C37D63.689607DE.IP)
[04:06:25] *** Quits: tikue (tikue_star@E3D1796E.21C37D63.689607DE.IP) (Ping timeout)
[04:15:27] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[04:17:25] *** Quits: lkuper (lkuper@89685233.276CCABD.D92E75BF.IP) (Quit: lkuper)
[04:29:11] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[04:39:46] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[04:57:02] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[04:57:03] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/4LAK1g
[04:57:03] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[04:57:05] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[04:58:53] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[05:01:31] *** Quits: pcwalton (pcwalton@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[05:02:07] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[05:02:07] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/k1t2vA
[05:02:07] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[05:02:14] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[05:02:15] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/p6xy5Q
[05:02:15] <ghrust> 13rust/06auto 14c669ccf 15Luqman Aden: libsyntax/librustc: Allow calling variadic foreign functions.
[05:02:15] <ghrust> 13rust/06auto 1477e0235 15Luqman Aden: Add tests for variadic foreign functions.
[05:02:15] <ghrust> 13rust/06auto 141c56652 15bors: auto merge of #10064 : luqmana/rust/vvv, r=nikomatsakis...
[05:02:17] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[05:18:26] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[05:45:28] *** Joins: pcwalton (pcwalton@moz-B51927E9.hsd1.ca.comcast.net)
[05:45:28] *** ChanServ sets mode: +ao pcwalton pcwalton
[05:46:21] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[05:53:18] *** Joins: jeffdb (jeff@moz-ED35AD97.hsd1.ca.comcast.net)
[05:55:27] *** Quits: pcwalton (pcwalton@moz-B51927E9.hsd1.ca.comcast.net) (Quit: pcwalton)
[05:55:27] *** Joins: eddyb (eddy@FE23D96E.F33C1089.FB866788.IP)
[05:55:42] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[06:15:35] *** Quits: dbaupp (Thunderbir@moz-9879E359.lns20.syd6.internode.on.net) (Input/output error)
[06:16:09] *** Joins: dbaupp (Thunderbir@moz-9879E359.lns20.syd6.internode.on.net)
[06:32:46] *** Joins: cmr (moznet@moz-EC676DFE.members.linode.com)
[06:33:19] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[06:34:27] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Quit: ZZZzzzâ€¦)
[06:36:58] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[06:36:59] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/p6xy5Q
[06:36:59] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[06:42:04] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[06:42:05] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/H2SS7Q
[06:42:05] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[06:43:09] <Luqman> \o/ variadic foreign functions finally landed
[06:47:02] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[06:47:02] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/NWRn4w
[06:47:02] <ghrust> 13rust/06auto 14615444d 15Alex Crichton: Stop extra buffering when stdout isn't a tty...
[06:47:02] <ghrust> 13rust/06auto 14bf98981 15bors: auto merge of #10270 : alexcrichton/rust/no-super-buffer, r=brson...
[06:47:02] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[06:47:04] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[06:47:04] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/H2SS7Q
[06:47:04] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[06:48:45] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[06:48:45] <ghrust> 01[13rust01] 15alexcrichton merged 06master into 06snap-stage3: 02http://git.io/A7HbLw
[06:48:45] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[06:49:52] <dbaupp> Luqman: \o/
[06:57:36] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[07:09:41] *** Quits: jeffdb (jeff@moz-ED35AD97.hsd1.ca.comcast.net) (Quit: jeffdb)
[07:37:19] <cmr> Seldaek acrichto: the new docs are better than I could have hoped when starting rustdoc_ng. Thanks for bringing it to fruition \o/
[07:37:45] <cmr> I think we might have the best doc extractor of any language :)
[07:38:47] <acrichto> cmr: and we certainly wouldn't have gotten here without you either!
[07:38:49] <cmr> Eridius: the new path is wonderful too
[07:39:20] * cmr is updating multibuilder and finding that rust is much much more pleasant than a few months ago
[07:39:30] <cmr> it's easy to lose the forest for the trees
[07:39:38] <acrichto> that's the goal at least :P
[07:39:52] <Eridius> cmr: :)
[07:51:06] <cmr> It'd be convenient if assert!() returned the value the expression it is given evaluates to.
[07:51:29] <Eridius> the.. boolean expression?
[07:51:36] <Eridius> but you know it has to be true after the assert
[07:51:38] <cmr> ...oh yeah
[07:51:49] <cmr> I forgot that part >_>
[07:52:01] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[07:56:25] <eddyb> cmr: you are thinking of LIKELY :P?
[07:56:48] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[07:57:13] <cmr> What I wanted was an is_dir!(e) that evaluates the expr (to a path), asserts that it's a directory, and then returns that value.
[07:57:29] <cmr> I thought for som reason that assert!() could do what I want
[07:57:55] <eddyb> I actually had MOST_LIKELY and MOST_UNLIKELY in a beastly C++ project, for safety checks. once I did some tests and figured those checks aren't required, I would add enable a compile-time define to turn them off :P
[07:58:10] <eddyb> cmr: maybe with a helper function?
[07:58:25] <eddyb> (that uses assert)
[07:58:44] <cmr> functions too! I apparently need sleep
[08:00:30] <dbaupp> cmr: multibuilder needs more updates? (The std::rt::io::fs stuff?)
[08:01:09] <cmr> dbaupp: yeah
[08:01:19] <cmr> dbaupp: some crap in std::os that Path took care of was removed too
[08:01:35] <cmr> I'm going to catch travis at  a bad time, I bet, and it will complain that it's broken.
[08:01:41] <dbaupp> haha
[08:01:55] <dbaupp> how dare you break my repo!
[08:01:59] <dbaupp> :P
[08:02:09] <cmr> It's annoying that travis will tell you *every time* rust-ci updates it after a fixed build
[08:02:22] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[08:02:22] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/NWRn4w
[08:02:22] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[08:02:40] <cmr> <3 travis, though, awesome to use rust with it
[08:02:54] <dbaupp> yup
[08:05:33] <cmr> 1600 built commits. a solemn number.
[08:06:02] <dbaupp> that's quite a few.
[08:06:12] <dbaupp> how much disk space?
[08:06:27] <cmr> /dev/sdb4       382G  182G  181G  51% /mnt/rustb
[08:06:39] <dbaupp> (and, yup, travis is complaining about it being broken.)
[08:07:22] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[08:07:22] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/4cRa4A
[08:07:22] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[08:07:27] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[08:07:27] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/OO7cqA
[08:07:27] <ghrust> 13rust/06auto 144b9c5d6 15Steven Fackler: Allow --cfg on rustpkg test...
[08:07:27] <ghrust> 13rust/06auto 14379bda9 15bors: auto merge of #10282 : sfackler/rust/rustpkg-test-cfg, r=alexcrichton...
[08:07:28] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[08:07:47] <cmr> 182G for 6 months of builds is pretty reasonable.
[08:07:59] <dbaupp> yeah, not too bad
[08:08:29] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[08:08:54] <cmr> the bencher is running. the rustc.rc -> lib.rs change broke it for a bit.
[08:09:03] <cmr> (in case you werewondering about the gap)
[08:09:12] * dbaupp hadn't noticed a gap
[08:09:29] * dbaupp sees the gap
[08:10:01] <dbaupp> hm, I guess I should just trim the number of displayed benches to the last 500, or something; at least until I can optimise the code some more.
[08:10:19] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[08:10:28] <cmr> please please do :p
[08:12:11] * dbaupp dons a hazmat suit, as he dives in to his horrible JS :/
[08:12:52] <cmr> acrichto: memory usage has regressed a bit recently
[08:13:10] <cmr> dbaupp: a nice feature would be the ability to see the difference in memory usage between given commits
[08:13:23] <cmr> eyeballing it is not so great
[08:13:24] * eddyb looks at his beautiful ES6 and pities the fools :P
[08:13:42] <cmr> oh wait, it's in the cards
[08:13:45] <cmr> that's not so bad
[08:14:17] <dbaupp> cmr: the max, you mean?
[08:14:26] <dbaupp> (i.e the number itself)
[08:14:29] <cmr> dbaupp: yeah
[08:14:51] <cmr> but selecting two commits would show the delta
[08:15:02] <cmr> but I didn't see the max number in the cards on my netbook screen
[08:15:03] <cmr> it's nbd
[08:15:20] <dbaupp> meh, later :P
[08:15:37] <cmr> that was fast
[08:15:41] <dbaupp> IRFY is definitely in maintenance mode until my exams
[08:15:44] <cmr> apparently the gap wasjust acrichto failing to land anything
[08:15:59] <dbaupp> *after my exams
[08:21:14] <dbaupp> cmr: ok, trimmed to 400... in theory. (just gotta wait for it to update to see if my change was correct.)
[08:21:58] <cmr> dbaupp: awesome, thanks!
[08:22:55] * dbaupp wonders if anyone will notice/ask where the data's gone
[08:42:30] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[08:43:54] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[08:46:08] *** kimundi is now known as zz_kimundi
[09:27:14] *** zz_kimundi is now known as kimundi
[09:39:59] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[09:42:45] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[09:42:45] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/OO7cqA
[09:42:45] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[09:47:43] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[09:47:43] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/HE3mMg
[09:47:43] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[09:47:50] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[09:47:50] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/XgUkgg
[09:47:50] <ghrust> 13rust/06auto 146184e84 15Steven Fackler: Remove #[deriving]s on impls...
[09:47:50] <ghrust> 13rust/06auto 1492065ce 15bors: auto merge of #10285 : sfackler/rust/weird-derivings, r=huonw...
[09:47:51] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[10:08:37] <dbussink> so is there a way in unsafe code to ignore the " use of possibly uninitialized variable" error?
[10:08:48] <dbussink> because in this case the type is wildly different for different platforms
[10:08:56] <dbussink> can be a struct, or even a pointer
[10:09:10] <eddyb> dbussink: can we see some code?
[10:09:11] <dbussink> and it's always initialized through calling ffi bound functions so rust doesn't need to do it itelf
[10:09:14] <dbussink> itself
[10:09:51] <dbussink> eddyb: https://gist.github.com/dbussink/75ac5b4801391e00a409
[10:10:07] <dbussink> eddyb: problem is that pthread_attr_t is very different on different platforms
[10:10:15] <dbussink> on os x it's a struct
[10:10:22] <dbussink> on freebsd it's a pointer
[10:10:31] <dbussink> so there's no "generic" way to initialize it
[10:10:40] <eddyb> I think you can use the uninit intrinsic there
[10:10:52] <dbussink> and it always needs to be initialized with pthread_attr_init() since that's how pthreads work
[10:11:07] <dbussink> eddyb: ah ok, i'll look for some examples of that then, thank!
[10:11:09] <dbussink> thanks
[10:11:48] <eddyb> that should mark the local as initialized, even though it's not obvious to liveness/borrowck
[10:12:32] <dbussink> eddyb: right, let's see what this does then :)
[10:13:56] <dbussink> eddyb: that works, thanks :)
[10:14:04] <dbussink> one step closer to cleaning this stuff up :)
[10:15:26] <dbaupp> dbussink: from a semantics point-of-view those functions should probably be taking &mut attr, since they're modifying it.
[10:15:56] <dbussink> dbaupp: right, makes sense
[10:22:05] <dbussink> dbaupp: actually this results in some better code setup anyway, thanks :)
[10:24:27] <dbussink> hmm, is there a way to define a c union type in rust?
[10:24:34] <dbaupp> dbussink: np :) (are you writing a high level interface to native mutices?)
[10:24:50] <dbussink> dbaupp: i'm working on moving some of the thread stuff to rust
[10:24:52] <dbussink> from c++
[10:25:08] <dbaupp> there's not really, other than a block of memory like [u8, .. size] which you transmute to the appropriate type.
[10:25:15] <dbaupp> ah, cool.
[10:25:15] <dbussink> hmm
[10:25:29] <dbussink> mutices seem like a good next step :)
[10:25:39] <dbussink> but these internal types are sometimes whacky
[10:29:18] <dbussink> dbaupp: but first real exposure to rust besides some hello world level stuff ;)
[10:29:28] <dbussink> so that's why i'm asking dumb questions sometimes :p
[10:29:55] <dbaupp> none of your questions so far have been dumb :)
[10:30:13] <dbussink> dbaupp: well, it feels that way for me ;)
[10:31:07] <dbaupp> dbussink: yeah, well, C unions are highly non-trivial, as is explicitly not initialising data safely (since it's impossible).
[10:31:47] <dbussink> dbaupp: also this union doesn't make too much sense to me actually
[10:32:45] <dbussink> ah, wait, it does
[10:32:47] <dbussink> hmm
[10:33:33] <dbussink> dbaupp: so this is the union: https://gist.github.com/dbussink/8a6feebe5cf95f1e24bb
[10:33:58] <dbussink> dbaupp: so they want that for alignment, but the possible values for __SIZEOF_PTHREAD_ATTR_T for both 32 and 64 bit already seem to be aligned to a word size boundary
[10:34:05] <dbussink> so seems a bit superfluous to me
[10:38:42] <dbaupp> __SIZEOF_PTHREAD_ATTR_T is 56 for me, which isn't word size?
[10:39:44] <eddyb> dbaupp: it is...
[10:39:52] <eddyb> it's bytes, not bits :P
[10:40:33] <dbaupp> oh, right
[10:40:36] * dbaupp is silly
[10:40:43] <dbussink> hehe
[10:40:52] <dbussink> i was like, can't i even compute 56 / 8 anymore now :P
[10:40:52] <dbaupp> see, I'm the stupid one around here :P
[10:41:43] <dbussink> hmm, what about a new helper that can be used for sys calls that follow the return 0 or set errno pattern?
[10:41:51] <dbussink> there's one for that in the c++ parts
[10:42:00] <dbussink> seems like it would be useful to have in rust internally as well
[10:46:58] <dbaupp> something like `check_errno(&fn() -> c_int) -> Result<(), c_int>` (i.e. Err(10) corresponds to errno == 10) ?
[10:47:39] <dbaupp> and the you can call it like `let res = do check_errno { some_c_function(10) };`
[10:47:40] <dbussink> dbaupp: well, right now it would just abort on certain calls
[10:47:44] <dbussink> and just prints the errno message
[10:47:54] <dbussink> that's at least the current behavior for most of these pthreads_* calls
[10:48:20] <dbussink> these are more the type where if it fails there's something pretty much fubar on the system
[10:49:10] <dbaupp> ah, I see
[10:50:29] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[10:51:24] <dbussink> dbaupp: https://github.com/mozilla/rust/blob/master/src/rt/rust_globals.h#L100-L110
[10:51:34] <dbussink> that's what the c/c++ equivalent does
[10:52:52] <dbaupp> dbussink: at the very least you could define a similar macro/function locally for your changes, and then if demand is high enough, it can be moved to std::rt::utils or where ever.
[10:54:25] <dbussink> dbaupp: yeah, that would be a first step
[10:54:29] <dbussink> can always be moved later
[11:01:42] *** Quits: strobegen (Adium@A75B6238.EACE1F8D.A133900E.IP) (Quit: Leaving.)
[11:01:57] *** Joins: strobegen (Adium@A75B6238.EACE1F8D.A133900E.IP)
[11:22:42] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[11:22:42] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/XgUkgg
[11:22:42] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[11:34:05] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[11:42:25] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[11:42:25] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/MMq0ow
[11:42:25] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[11:42:32] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[11:42:32] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/ntfPsw
[11:42:32] <ghrust> 13rust/06auto 14ac3a5cb 15sh8281.kim: Add make check support(arm-linux-androideabi debuginfo)
[11:42:32] <ghrust> 13rust/06auto 149b14d6f 15sh8281.kim: upgrade to latest rust version
[11:42:32] <ghrust> 13rust/06auto 144edfbc0 15sh8281.kim: modify some code style & function
[11:42:34] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[11:43:27] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[11:46:39] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[11:48:36] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Input/output error)
[12:05:04] <dbussink> so what do people do here who don't have windows ready to make sure it works there?
[12:31:42] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[12:32:04] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[12:32:28] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[12:57:40] <dbaupp> dbussink: ask someone to push some commits to the try branch (e.g. me)
[12:58:17] <dbussink> dbaupp: is it easy to setup a windows env, perhaps with a windows evaluation image etc.
[12:58:33] <dbussink> since this changes things quite a bit and i don't want to bother others too much
[12:58:44] <dbaupp> dbussink: no, it's notoriously hard ( https://github.com/mozilla/rust/wiki/Note-getting-started-developing-Rust#windows ) :(
[12:59:01] <dbaupp> just make sure you bother a different person each time :P
[13:02:23] *** kimundi is now known as zz_kimundi
[13:03:30] <dbussink> dbaupp: hmm, too bad :(
[13:05:51] <dbaupp> dbussink: the other option is to just leave the (complicated) windows logic in C++ and let someone in a better position to develop on windows handle that. (assuming that it's possible to disentangle it.)
[13:06:14] <dbussink> dbaupp: actually the windows logic is less lines of code
[13:06:27] <dbussink> i just don't know if all the types are defined and setup appropriately everywhere
[13:06:30] <dbaupp> e.g. reading random numbers from the OS is done in pure Rust on non-windows, but there are 3 helper functions for windows because I couldn't test it either. https://github.com/mozilla/rust/blob/master/src/rt/rust_builtin.cpp#L623-L680
[13:06:42] <dbussink> and i don't trust myself to write code that runs immediately :P
[13:07:03] <dbaupp> But Rust almost guarantees it :P
[13:07:23] <dbussink> well, if i can compile on windows yeah :P
[13:07:45] *** zz_kimundi is now known as kimundi
[13:14:18] <dbussink> dbaupp: i can do a pull request that you could test perhaps?
[13:14:38] <dbussink> necessary fixes are most likely just fiddling with the types, no big changes in how it works etc.
[13:16:56] <dbussink> dbaupp: https://github.com/mozilla/rust/pull/10290
[13:19:26] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[13:19:26] <ghrust> 01[13rust01] 15huonw 04force-pushed 06try from 143e7073d to 147f838dd: 02http://git.io/k471pw
[13:19:26] <ghrust> 13rust/06try 147f838dd 15Dirkjan Bussink: Move implementation for threads to Rust...
[13:19:26] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[13:20:13] <dbaupp> dbussink: watch http://buildbot.rust-lang.org/console?branch=try&refresh=15 (it will take a little bit for the 'try' builders to spin up, I guess)
[13:21:12] <dbaupp> dbussink: http://buildbot.rust-lang.org/builders/try-win/builds/633 is the windows one
[13:24:39] <dbussink> dbaupp: ah, already found an issue, if i update the PR do i need to do anything to retrigger a build?
[13:24:56] <dbaupp> dbussink: yeah, pester me again
[13:25:13] <dbaupp> (that was just me pushing your branch by hand, which I'm happy to do again)
[13:27:43] <dbaupp> dbussink: btw, what do you mean by "convention"? (naming convention?)
[13:28:17] <dbaupp> dbussink: windows failed too, btw, http://buildbot.rust-lang.org/builders/try-win/builds/633/steps/compile/logs/stdio
[13:28:18] <dbussink> dbaupp: naming convention, etc, basically anything i should think about
[13:29:09] <dbaupp> dbussink: all caps, and, from a quick glance around std::rt, DEFAULT_*whatever* seems to be appropriate
[13:30:34] <dbussink> dbaupp: yeah, that's what i found as well
[13:30:52] *** Joins: bynaryshef (bynaryshef@moz-7B18684.mem.bellsouth.net)
[13:41:05] <dbaupp> dbussink: if/when you fix that windows failure, ping me for a re-try (although i'll probably only be awake for about 20 minutes or so)
[13:41:50] <dbussink> dbaupp: ok, i will
[13:43:50] <dbussink> dbaupp: ok, just pushed some commits
[13:45:16] <dbaupp> dbussink: don't you need to remove the import in https://github.com/dbussink/rust/commit/caa691ac0b83dc5e167dc82ea7dd5abc3996ad1c ?
[13:45:28] <dbussink> doh
[13:46:30] <dbussink> dbaupp: this is why i guess i'd want to setup a windows machine :P
[13:46:36] <dbussink> to not end up in cycles like this ;)
[13:47:04] <dbaupp> haha, yup :)
[13:47:07] <dbaupp> ready to go?
[13:47:29] <dbussink> i think so ;)
[13:47:55] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[13:47:55] <ghrust> 01[13rust01] 15huonw pushed 5 new commits to 06try: 02http://git.io/31gnIA
[13:47:55] <ghrust> 13rust/06try 14aa6b93d 15Dirkjan Bussink: Include correct type for *BSD systems
[13:47:55] <ghrust> 13rust/06try 14c648e57 15Dirkjan Bussink: Move default stack size to constant value
[13:47:55] <ghrust> 13rust/06try 148e92242 15Dirkjan Bussink: Load INFINITE constant on Windows from correct location
[13:47:57] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[13:48:19] *** Quits: [o__o] (~o__o@moz-24EBFAC7.me) (Input/output error)
[13:48:20] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[13:48:37] *** Joins: [o__o] (~o__o@moz-24EBFAC7.me)
[13:52:38] <dbaupp> dbussink: windows failed again :( http://buildbot.rust-lang.org/builders/try-win/builds/634/steps/compile/logs/stdio
[13:52:48] <dbussink> dbaupp: yeah, i saw it
[13:52:53] <dbussink> also realized another issue
[13:59:20] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[14:01:09] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[14:05:30] <dbussink> dbaupp: ok, pushed some more fixes
[14:07:06] <dbaupp> dbussink: I looks like you didn't fix "error: unresolved name `rust_thread`."?
[14:07:21] <dbussink> dbaupp: hmm, where is that?
[14:07:22] <dbaupp> (in the call to WaitForSingleObject)
[14:07:41] <dbussink> ugh
[14:08:32] <dbussink> dbaupp: also pushed :)
[14:09:29] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[14:09:29] <ghrust> 01[13rust01] 15huonw pushed 2 new commits to 06try: 02http://git.io/GK9cSw
[14:09:29] <ghrust> 13rust/06try 14f997b33 15Dirkjan Bussink: Setup proper return type for thread callback...
[14:09:29] <ghrust> 13rust/06try 145857c86 15Dirkjan Bussink: Use correct argument name for WaitForSingleObject call
[14:09:29] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[14:09:37] <dbaupp> dbussink: done
[14:10:09] <dbaupp> dbussink: (I'm off to bed, but I'm sure you can find others to assist if you need some more trys)
[14:10:18] <dbussink> dbaupp: alright, thanks for the help so far!
[14:10:33] <dbaupp> dbussink: (also, when they pass, could you squash the commits into one?)
[14:10:34] <dbaupp> np
[14:10:39] <dbaupp> thanks for removing some C++ :)
[14:10:46] <dbussink> dbaupp: i was already planning that :)
[14:11:03] <dbussink> dbaupp: and i should look into getting windows to run if i plan on doing more
[14:20:48] <dbussink> anyone else who could retrigger a try build (again...)
[14:21:22] <dbaupp> dbussink: I lied, I'm awake still :P
[14:21:41] <dbussink> dbaupp: you're evil! ;)
[14:22:27] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[14:22:27] <ghrust> 01[13rust01] 15huonw 04force-pushed 06try from 145857c86 to 141c424fe: 02http://git.io/k471pw
[14:22:27] <ghrust> 13rust/06try 143a6a094 15Dirkjan Bussink: Move implementation for threads to Rust...
[14:22:27] <ghrust> 13rust/06try 141c424fe 15Dirkjan Bussink: Make arguments mutable and fix types for Windows
[14:22:28] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[14:26:26] *** Quits: bynaryshef (bynaryshef@moz-7B18684.mem.bellsouth.net) (Quit: Leaving)
[14:27:05] <dbussink> dbaupp: could you shed some light on the first error here? http://buildbot.rust-lang.org/builders/try-win/builds/636/steps/compile/logs/stdio
[14:27:20] <dbussink> how can i assign that some type it apparently wants?
[14:32:48] <benh> maybe mut_null() instead of null()?
[14:35:00] <dbussink> yeah
[14:35:03] <dbussink> just did that
[14:35:30] <dbussink> now for a new build of try :)
[14:36:58] <dbussink> i feel like doing incantations to please the windows gods
[14:42:19] <dbussink> benh: can you push to the try branch for another build?
[14:42:58] <benh> I'm afraid I don't have any access like that
[14:43:03] <benh> I'm only a small-time contributor :)
[14:43:05] <dbussink> ah ok, too bad
[14:43:08] <dbussink> yeah, new here as well
[14:44:54] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Quit: ZZZzzzâ€¦)
[14:53:18] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[15:10:24] *** kimundi is now known as zz_kimundi
[15:14:58] *** zz_kimundi is now known as kimundi
[15:28:00] *** kimundi is now known as zz_kimundi
[15:30:06] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[15:30:38] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[15:33:05] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[15:33:41] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[15:39:43] *** Quits: Kxepal (Miranda@moz-653B3EC5.pppoe.mtu-net.ru) (Ping timeout)
[15:43:00] *** Joins: Kxepal (Miranda@moz-CB85EBA8.pppoe.mtu-net.ru)
[16:03:49] <dbussink> acrichto: see you commented, could  you also trigger a new try build? want to see if windows now passes like the others :)
[16:04:01] <acrichto> dbussink: sure
[16:04:36] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[16:04:36] <ghrust> 01[13rust01] 15alexcrichton pushed 1 new commit to 06try: 02http://git.io/JThPNg
[16:04:36] <ghrust> 13rust/06try 1415a7c6e 15Dirkjan Bussink: Use mutable null pointer for Windows
[16:04:36] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[16:07:15] <acrichto> dbussink: this looks awesome, I love how there's 0 supporting C+
[16:07:27] <dbussink> acrichto: yeah, managed to get rid of it all :)
[16:07:29] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Ping timeout)
[16:07:57] <dbussink> acrichto: updating now with the additional feedback :)
[16:08:31] <acrichto> haha you're guaranteed to be faster than my train wifi
[16:08:41] <dbussink> acrichto: btw, on os x i have one failure here on make check but that's not related to my changes it seems
[16:08:47] <dbussink> acrichto: related to rust-pkg
[16:09:03] <dbussink> but the build bot passed on os x
[16:09:04] <acrichto> hm, I've seen those recently too, which tests?
[16:09:27] <dbussink> don't have it in my scroll back anymore
[16:09:30] <dbussink> i can rerun it to check
[16:09:46] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[16:09:59] <acrichto> not sure why they would be reliable on the bots and not on local instances though
[16:10:37] <dbussink> yeah, that seems weird to me as well
[16:13:16] <dbussink> acrichto: on that stack size constructor, maybe add that when there's a real need for it?
[16:13:26] <dbussink> or a case where control over it would be useful?
[16:13:42] <acrichto> yeah that's probably fine, it's clearly easy enough to add
[16:13:48] <dbussink> acrichto: btw, without the annotations i get this "invoking non-Rust fn in fn without #[fixed_stack_segment], #[deny(cstack)] on by default"
[16:13:57] <acrichto> oh nvmd, then you need them
[16:14:06] <acrichto> I thought all ffi functions had been removed
[16:14:09] <dbussink> or is it only about the start function?
[16:14:33] <acrichto> this is the fn start ?
[16:14:35] <dbussink> because they can be removed there indeed
[16:14:37] <dbussink> right
[16:15:12] <acrichto> weird, well I think the plan is to remove that annotation regardless
[16:15:21] <acrichto> eventually
[16:16:05] <acrichto> dbussink: nice work! if this passes try then r+ from me
[16:16:15] <acrichto> would you mind rebasing your commits into one as well?
[16:16:32] <acrichto> if there's some extra annotations then that's fine
[16:16:55] <dbussink> acrichto: yeah, i'll squash it
[16:16:59] <dbussink> still a windows failure though
[16:17:10] <dbussink> error: linking with `g++` failed with code 1
[16:17:10] <dbussink> note: g++ arguments: -LC:\bot\slave\try-win\build\obj\i686-pc-mingw32\stage0\bin\rustc\i686-pc-mingw32\bin -m32 -o i686-pc-mingw32\stage0\bin\rustc\i686-pc-mingw32\bin\std-6c65cf4b443341b1-0.9-pre.dll i686-pc-mingw32\stage0\bin\rustc\i686-pc-mingw32\bin\lib.o -LC:\bot\slave\try-win\build\obj\.rust -LC:\bot\slave\try-win\build\obj -shared -lmorestack -lrustrt
[16:17:10] <dbussink> note: i686-pc-mingw32\stage0\bin\rustc\i686-pc-mingw32\bin\lib.o:fake:(.text+0xc4ee1): undefined reference to `CreateThread'
[16:17:21] <dbussink> do i need to do something special on windows to have that symbol available?
[16:17:34] <acrichto> hm there must be some library that's providing it that we're not linking against
[16:18:19] <acrichto> weird, looks like it's a part of kernel32.dll
[16:18:26] <acrichto> which I thought we were linking against...
[16:18:29] *** Quits: strobegen (Adium@A75B6238.EACE1F8D.A133900E.IP) (Quit: Leaving.)
[16:22:22] <dbussink> acrichto: weird thing is that WaitForSingleObject apparently works
[16:22:24] <klutzy> CreateThread doesn't exist
[16:22:41] <klutzy> hmm?
[16:22:49] <dbussink> did i typo this?
[16:22:57] <dbussink> i think i took it from the old impl
[16:23:00] <klutzy> maybe you forgot "stdcall" abi
[16:23:28] <dbussink> the old implementation was in the c++ parts
[16:23:54] <klutzy> yes, c++ knows it's stdcall since it is described in .h file
[16:23:59] <klutzy> but we have to label it manually
[16:24:11] <klutzy> e.g. extern "stdcall" { fn CreateThread(...) }
[16:24:34] <dbussink> klutzy: ah, is that a windows specific thing?
[16:24:49] <acrichto> klutzy: oh and doesn't win64 need to omit "stdcall" ?
[16:24:52] <klutzy> dbussink: it's even 32-bit specific
[16:24:58] <klutzy> acrichto: yep :p
[16:25:07] <dbussink> oh, fun
[16:25:10] <acrichto> dbussink: ^ there's some examples elsewhere as well
[16:25:21] <dbussink> yeah, i was looking for that :)
[16:25:33] <dbussink> i'll wrap both of them then
[16:25:35] <dbussink> for only 32 bit
[16:25:47] <dbussink> can i do multiple cfg lines?
[16:25:52] <dbussink> or do need to create one then?
[16:26:02] <klutzy> multiple cfg will behaves like 'or'
[16:26:13] <dbussink> ah, nvm
[16:26:16] <dbussink> found an example
[16:27:20] <dbussink> klutzy: so something like this? https://gist.github.com/dbussink/22f2375ab52598187e29
[16:27:47] <acrichto> that looks right to me
[16:28:03] <dbussink> acrichto: also rebased and pushed to the pull request
[16:28:11] <dbussink> with the changes suggested applied
[16:28:31] <klutzy> dbussink: looks good :)
[16:28:48] <dbussink> actually seeing how hard it is to get windows compile going in a vm
[16:28:51] <dbussink> still building
[16:29:16] <acrichto> dbussink: as one final thing, I was never a big fan of conditional imports, and b/c most of them are only used in one function can you move the imports to the functions that they're only used in?
[16:29:21] <acrichto> should reduce the noise at the top of the file
[16:30:11] <acrichto> we should also define "stdcall" as the C abi on win64 for real
[16:30:29] <dbussink> acrichto: so basically do use inside a method?
[16:30:45] <dbussink> which import specifically are you talking about here?
[16:30:45] <acrichto> yeah, you can have `use` statements at the top of any block
[16:30:49] <acrichto> which includes functions
[16:30:58] <acrichto> intrinsics/INFINITE
[16:31:02] <dbussink> or can i create a big windows / unix block
[16:31:05] <dbussink> and put it all in there
[16:31:07] <acrichto> PTHREAD_CREATE_JOINABLE
[16:31:22] <acrichto> I'm ok with the two functions each cfg'd right
[16:32:04] <dbussink> acrichto: how about unstable::intrinsics
[16:32:08] <dbussink> only used on unix
[16:32:15] <acrichto> yeah, that can get moved into where it's used
[16:32:17] <dbussink> but non conditional will give a warning on windows
[16:32:18] <acrichto> if it's only used once
[16:32:34] <dbussink> you're right :)
[16:32:46] <acrichto> instead of #[cfg(foo)] use foo; #[cfg(foo)] fn bar() -> foo { ... }
[16:33:00] <acrichto> well bad example, but you get the idea of only one instance of #[cfg(foo)] -ish
[16:33:28] <dbussink> can i also apply that cfg block for multiple functions?
[16:33:33] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[16:33:33] *** ChanServ sets mode: +o tjc
[16:33:36] <dbussink> so i can just do one group for windows and one for unix?
[16:33:49] <acrichto> sadly blocks only work ainside functions, not inside modules
[16:34:18] <dbussink> ah ok
[16:34:54] <dbussink> ah, the use for LPSECURITY_ATTRIBUTES is not needed in two places because of the windows stdcall stuff :(
[16:36:00] <acrichto> yeah that's fine to leave at the top
[16:36:07] <dbussink> acrichto: should have updated it all again
[16:36:26] <dbussink> whoops
[16:36:28] <dbussink> more cleanup!
[16:36:57] <acrichto> there's a few extra allow(non_camel_ase_type) as well
[16:37:55] <dbussink> yeah, those are the ones i cleaned up :)
[16:38:42] <acrichto> lgtm
[16:38:45] <acrichto> thanks!
[16:38:54] <dbussink> acrichto: should a new build be tried?
[16:39:26] <acrichto> eh, bors is good at that
[16:39:51] <dbussink> ah ok, dbaupp triggered builds by merging to try
[16:39:59] <dbussink> or will this now go through another process?
[16:40:29] <dbussink> or is it now time to try merging through bors then?
[16:41:10] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[16:41:10] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14c16069c to 1492065ce: 02http://git.io/N3iJvQ
[16:41:10] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[16:41:11] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[16:41:11] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/9oTIeg
[16:41:11] <ghrust> 13rust/06auto 148937fe5 15Dirkjan Bussink: Move implementation for threads to Rust...
[16:41:11] <ghrust> 13rust/06auto 14d0ddba9 15bors: auto merge of #10290 : dbussink/rust/thread_in_rust, r=alexcrichton...
[16:41:12] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[16:41:13] <acrichto> bors is our automation for testing, it'll pick up the r+ on the last commit of the pull request and then run it through
[16:41:16] <acrichto> (as it just did)
[16:41:21] <dbussink> Actually this is one of the things I'm proudest of: 7 files changed, 150 insertions(+), 178 deletions(-)
[16:41:24] <acrichto> if all the tests pass then bors will push the commits to master
[16:41:26] <dbussink> a negative contribution :)
[16:41:28] <acrichto> \o/
[16:41:38] <acrichto> negative contributions are the best
[16:41:47] <acrichto> especially if you retain all the original functionality!
[16:41:57] <dbussink> yeah
[16:42:02] <tjc> yes, negative diffstats are an accomplishment :-)
[16:42:05] <tjc> especially at this point
[16:42:11] <dbussink> i also saw there's a similar issue for mutex / cond vars
[16:42:19] <acrichto> so bors will run the commit through all various architectures that we test on, and it'll comment with any failures if there are any
[16:42:19] <dbussink> might be interesting to take a look at
[16:42:32] <acrichto> dbussink: you would be a hero if we could have a statically initialized mutex
[16:42:49] <acrichto> there is so much C++ that could get removed after that
[16:42:56] <dbussink> acrichto: does that pose a fundamental problem then?
[16:42:59] <dbussink> as in implementing it?
[16:43:06] <dbussink> or could a similar approach as here be taken?
[16:43:12] <acrichto> it's mostly just getting the definitions for all the locks right
[16:43:22] <acrichto> pthreads supplies a PTHREAD_MUTEX_INIT or something like that
[16:43:27] <acrichto> and that's basically what we'd want to copy
[16:43:36] <acrichto> I'm not entirely sure what the windows equivalent is
[16:43:46] <acrichto> it may have to do some CAS fun to initialize it
[16:43:49] <dbussink> but that could be called in a constructor then?
[16:43:57] <dbussink> or is that a problem for the static lock?
[16:44:03] <acrichto> static locks :(
[16:44:36] <dbussink> where does that init happen now for static locks then?
[16:44:43] <acrichto> C++ magic I think
[16:44:46] <dbussink> since they need to be initialized from c++ as well now
[16:44:57] <acrichto> I'm not actually entirely sure when they get initialized
[16:45:04] <acrichto> we don't explicitly run C++ initializers
[16:45:19] <dbussink> looks like the c++ constructor
[16:45:48] <dbussink> which makes sense
[16:46:42] <dbussink> acrichto: c++ runs the constructor for a static variable like a normal object
[16:46:48] <dbussink> is there a similar thing in rust then or not?
[16:47:44] <acrichto> I'm not entirely sure who runs it though
[16:47:59] <acrichto> I would imagine there's some magical section of the executable with initializeers to-be-run
[16:48:06] <acrichto> just a guess though
[16:48:14] <acrichto> in rust we have no life before main
[16:48:19] <acrichto> at least in the rust world
[16:48:36] <acrichto> also, train arrived, brb in ~20 mins
[16:48:52] <acrichto> ah, looks like tests failed, just ping me to r+ again
[16:48:56] <dbussink> updated pr
[16:49:04] <dbussink> acrichto: missing some stuff for linux 32 bit
[16:49:25] <acrichto> could you amend?
[16:49:59] <dbussink> acrichto: updated
[16:50:24] <acrichto> ok now I must actually go, brb
[16:50:40] <dbussink> acrichto: ok, thnx!
[16:56:09] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[16:56:09] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14d0ddba9 to 1492065ce: 02http://git.io/N3iJvQ
[16:56:09] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[16:56:17] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[16:56:17] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/nUXfRg
[16:56:17] <ghrust> 13rust/06auto 1447e0bd4 15Dirkjan Bussink: Move implementation for threads to Rust...
[16:56:17] <ghrust> 13rust/06auto 147fb583b 15bors: auto merge of #10290 : dbussink/rust/thread_in_rust, r=alexcrichton...
[16:56:18] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[16:56:45] <dbussink> i think that means it passed, yay :)
[16:57:03] <tjc> dbussink: not yet :-) It means bors is running tests
[16:57:12] <tjc> bors pushes commits to auto, runs tests, and if the tests pass, it merges auto into mater
[16:57:19] <tjc> when you see it merge something in to master, that's when you succeeded :-)
[16:57:26] <dbussink> ah ok :)
[16:57:31] <dbussink> not cheering yet then :P
[16:58:08] <tjc> but it's a good sign, at least, it means no one is ahead of you in the queue :-)
[16:58:43] <tjc> dbussink: you can watch the progress of your build at http://buildbot.rust-lang.org/console?refresh=15
[16:58:47] <tjc> the ywllos boxes mean it's in progress
[16:58:54] <tjc> yellow even
[16:59:03] <tjc> you can click on individual boxes to ssee the status of the build on each platform
[16:59:25] <dbussink> yeah, dbaupp linked me it when it was running on the try branch :)
[17:00:50] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[17:03:09] <KokaKiwi> Yay, Modified a structure in Rust compiler, now I have exactly 42 errors when I compile Rust \o/
[17:03:47] <tjc> KokaKiwi: Errors are good! It means you know what to do next :-)
[17:04:57] <dbussink> 42 entries on the task list!
[17:04:59] <dbussink> automatically
[17:05:12] <KokaKiwi> Uhuh :)
[17:12:43] *** zz_kimundi is now known as kimundi
[17:43:33] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Quit: ZZZzzzâ€¦)
[17:53:52] <dbussink> acrichto: this is the test failure btw: https://gist.github.com/dbussink/2a20409356a146bbd7c3
[17:54:22] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:54:23] *** ChanServ sets mode: +qo brson brson
[17:54:26] <acrichto> dbussink: hrm, I was seeing that a lot recently as well
[17:54:30] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:54:34] <acrichto> I have a feeling I'm gonna have to figure out what's actually causing that :(
[17:54:41] <acrichto> it's some sort of recursive failure
[17:54:46] <acrichto> which causes badness
[17:57:01] <dbussink> acrichto: it was the only failing for make check here, other tests all pass
[17:57:49] <dbussink> acrichto: on the upside, build bot is almost through it all
[17:57:55] <dbussink> and seems all green so far :)
[17:58:35] <acrichto> dbussink: yeah it's something that looks pretty rare to me, I've seen it on the bots before but I see it more frequently locally
[17:58:41] <acrichto> it was blocking a previous pull request of mine
[17:58:53] <dbussink> i get it consistently here
[18:00:45] <sfackler> fwiw, the failure message may be lying. rustpkg returns a hardcoded error code currently
[18:01:44] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[18:02:22] <acrichto> dbussink: if you look at the output, it's some subprocess/subtask that's way deep down which is calling fail!() in a fail!()
[18:05:02] *** Joins: pcwalton (pcwalton@moz-B51927E9.hsd1.ca.comcast.net)
[18:05:02] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:05:14] <dbussink> acrichto: hmm, not seeing that
[18:05:16] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[18:05:24] <dbussink> or i'm just reading it wrong :)
[18:06:36] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[18:08:10] <sfackler> acrichto: the rustpkg error?
[18:10:22] *** jdm is now known as jdm|f00ding
[18:10:28] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[18:13:34] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Quit: ZZZzzzâ€¦)
[18:14:34] <acrichto> sfackler: yeah
[18:14:47] <acrichto> when I started to look at the output of the processes I saw the recurisve failure
[18:15:20] <sfackler> in this one? https://gist.github.com/dbussink/2a20409356a146bbd7c3 It looks like a normal failure to me
[18:15:45] <acrichto> yeah if you take a look at the output it looks really funny (at least that's what I was seeing)
[18:15:53] <acrichto> although I may have also caused all the problems myself
[18:16:11] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[18:16:11] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/nUXfRg
[18:16:11] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[18:20:39] <dbussink> yay!
[18:20:59] <tjc> \o/
[18:21:13] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[18:21:13] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/Yef_2A
[18:21:13] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[18:21:20] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[18:21:20] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/_ICYJQ
[18:21:20] <ghrust> 13rust/06auto 142cdee60 15Niko Matsakis: Refactor TypeContents to be more scrutable. In particular, create coarser bits...
[18:21:20] <ghrust> 13rust/06auto 140eaa463 15Niko Matsakis: Make TypeContents consider the type `T` to be reachable via `*T` pointers...
[18:21:20] <ghrust> 13rust/06auto 14de6da3a 15bors: auto merge of #10289 : nikomatsakis/rust/issue-10157-TypeContents-refactor, r=pcwalton...
[18:21:22] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[18:30:32] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[18:36:14] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[18:36:14] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14de6da3a to 147fb583b: 02http://git.io/N3iJvQ
[18:36:14] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[18:36:17] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[18:36:17] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/eMdwcg
[18:36:17] <ghrust> 13rust/06auto 1471e188d 15Alex Crichton: Register new snapshots
[18:36:17] <ghrust> 13rust/06auto 145848aeb 15bors: auto merge of #10294 : alexcrichton/rust/snapshots, r=pcwalton...
[18:36:18] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[18:43:23] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[18:48:06] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[18:55:28] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[18:56:50] *** Quits: pcwalton (pcwalton@moz-B51927E9.hsd1.ca.comcast.net) (Quit: pcwalton)
[18:58:34] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[18:59:37] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:59:37] *** ChanServ sets mode: +qo brson brson
[19:01:16] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[19:03:47] *** Quits: eddyb (eddy@FE23D96E.F33C1089.FB866788.IP) (Ping timeout)
[19:06:08] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[19:06:08] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 145848aeb to 147fb583b: 02http://git.io/N3iJvQ
[19:06:08] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[19:06:13] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[19:06:13] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/du7iEw
[19:06:13] <ghrust> 13rust/06auto 14519b86b 15Matt Carberry: Added octal literal support.
[19:06:13] <ghrust> 13rust/06auto 1466abb92 15Matt Carberry: Grammar error and vim syntax highlighting mistake fixed.
[19:06:14] <ghrust> 13rust/06auto 14e9b068f 15bors: auto merge of #10243 : mattcarberry/rust/master, r=cmr...
[19:06:16] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[19:06:40] *** Joins: eddyb (eddy@FE23D96E.F33C1089.FB866788.IP)
[19:11:19] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[19:13:31] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Quit: ZZZzzzâ€¦)
[19:16:13] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[19:17:00] <cmr> nmatsakis: acrichto: what is this about changes to slice representation?
[19:17:53] <acrichto> I believe that in theory if we had owned vecs/slices have the same binary representation then codegen would be a lot easier along with being able to do some clever things with stuff like transmute
[19:18:02] <acrichto> nmatsakis would know more though
[19:19:59] *** Joins: tikue (tikue_star@1BE4CCA6.CD72397.689607DE.IP)
[19:22:14] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Quit: ZZZzzzâ€¦)
[19:24:43] *** kimundi is now known as zz_kimundi
[19:33:04] *** Quits: Kxepal (Miranda@moz-CB85EBA8.pppoe.mtu-net.ru) (Quit: Kxepal)
[19:33:34] *** Joins: Kxepal (Miranda@moz-CB85EBA8.pppoe.mtu-net.ru)
[19:34:22] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[19:35:45] *** Joins: pcwalton (pcwalton@moz-B51927E9.hsd1.ca.comcast.net)
[19:35:45] *** ChanServ sets mode: +ao pcwalton pcwalton
[19:35:53] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[19:36:12] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[19:36:12] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14e9b068f to 147fb583b: 02http://git.io/N3iJvQ
[19:36:12] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[19:36:13] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[19:36:13] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/fiIaAQ
[19:36:13] <ghrust> 13rust/06auto 1471e188d 15Alex Crichton: Register new snapshots
[19:36:13] <ghrust> 13rust/06auto 144230e9e 15bors: auto merge of #10294 : alexcrichton/rust/snapshots, r=pcwalton...
[19:36:13] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[19:36:50] *** Joins: lkuper (lkuper@89685233.276CCABD.D92E75BF.IP)
[19:50:38] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[19:51:32] *** Quits: tikue (tikue_star@1BE4CCA6.CD72397.689607DE.IP) (Ping timeout)
[19:51:57] <strcat> hm
[19:52:17] <strcat> I guess what I'll do for dtor vtables is to consider the constructor to be the node id of the call...
[19:52:39] <strcat> that way they get initialized for any set of type parameters where there's going to be a dtor call
[19:52:53] <strcat> doesn't really matter if the node id doesn't correspond to anything real afaict...
[19:53:04] <strcat> need a way to look it up though
[19:53:16] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[19:53:16] *** ChanServ sets mode: +qo brson brson
[19:55:43] *** Joins: tikue (tikue_star@1BE4CCA6.CD72397.689607DE.IP)
[19:57:04] <brson> lbergstrom: thanks for taking minutes yet again
[19:58:06] <lbergstrom> brson: I'm happy to help out! And the Rust meeting's always great because so many other folks edit when I mishear or misunderstand something.
[19:58:26] <lbergstrom> Though I'm a little self-conscious that #rust is watching me type (and mis-type :-) )
[19:58:34] <cmr> we are ;)
[19:59:26] <lbergstrom> cmr: "I know who did the crime - I recognize those frequent typos in the monitor caught on camera!"
[19:59:50] <tikue> link to notes?
[20:00:00] <cmr> tikue: https://etherpad.mozilla.org/Rust-meeting-weekly
[20:00:04] <tikue> nvm they're on r/rust
[20:00:06] <tikue> oh ok :P thx
[20:03:11] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[20:04:29] <tikue> oh, are we changing .. to * in refutable patterns like vectors?
[20:05:11] <tikue> that seems mildly inconsistent with the [T, ..N] syntax
[20:05:42] <tikue> oh nvm, the issue answers that question
[20:08:18] *** Quits: lkuper (lkuper@89685233.276CCABD.D92E75BF.IP) (Quit: lkuper)
[20:15:55] *** jld is now known as jld|voting
[20:25:39] *** jld|voting is now known as jld
[20:26:53] *** Quits: eddyb (eddy@FE23D96E.F33C1089.FB866788.IP) (Ping timeout)
[20:31:21] <nmatsakis> I was thinking that when DST moves ahead,
[20:31:24] <nmatsakis> vector slices ought to change
[20:31:28] <nmatsakis> I should file an issue about this I guess
[20:31:34] <nmatsakis> right now [] matches ~[T], &[T], etc
[20:31:44] <nmatsakis> but I guess it ought to be that in a DST world [...] matches [T]
[20:31:50] <nmatsakis> more consistent
[20:32:30] <strcat> nmatsakis: match as in pattern matching?
[20:32:35] <strcat> I think it only works on &[T] slices atm
[20:32:58] <nmatsakis> yes match as in pattern matching
[20:32:59] *** jdm|f00ding is now known as jdm
[20:33:11] <nmatsakis> you might be right; either way, it should change
[20:34:04] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[20:34:39] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[20:34:52] *** vfetwnuncszu is now known as dcrewi
[20:41:09] *** Joins: bytewise (bytewise@moz-90F30968.eduroam.rwth-aachen.de)
[20:47:29] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[20:47:29] *** ChanServ sets mode: +o pnkfelix
[20:49:43] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[20:49:51] *** Quits: bytewise (bytewise@moz-90F30968.eduroam.rwth-aachen.de) (Ping timeout)
[20:50:47] *** Joins: bytewise (bytewise@moz-90F30968.eduroam.rwth-aachen.de)
[20:54:45] *** Quits: pcwalton (pcwalton@moz-B51927E9.hsd1.ca.comcast.net) (Quit: pcwalton)
[21:01:02] *** Joins: andrew-__ (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net)
[21:01:09] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[21:01:19] *** Quits: andrew-__ (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net) (Input/output error)
[21:01:30] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[21:01:39] *** Joins: andrew-__ (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[21:01:44] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[21:02:26] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[21:04:50] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Quit: Leaving...)
[21:05:04] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Quit: ZZZzzzâ€¦)
[21:11:11] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[21:12:55] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[21:23:17] *** Quits: tikue (tikue_star@1BE4CCA6.CD72397.689607DE.IP) (Ping timeout)
[21:30:16] *** Joins: tikue (tikue_star@1BE4CCA6.CD72397.689607DE.IP)
[21:31:34] *** Joins: andrew-d_w (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net)
[21:31:41] *** Quits: andrew-d_w (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net) (Input/output error)
[21:31:55] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[21:31:55] *** ChanServ sets mode: +o tjc
[21:32:02] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[21:32:41] *** Quits: andrew-__ (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[21:42:53] *** Quits: tikue (tikue_star@1BE4CCA6.CD72397.689607DE.IP) (Ping timeout)
[21:45:49] *** Joins: tikue (tikue_star@1BE4CCA6.CD72397.689607DE.IP)
[21:51:02] *** Joins: geoffhill (geoffhill@moz-244CF33A.amazon.com)
[22:01:21] *** Joins: pcwalton (pcwalton@D903B46D.8AEA38DE.F3334A4B.IP)
[22:01:21] *** ChanServ sets mode: +ao pcwalton pcwalton
[22:02:20] *** Quits: geoffhill (geoffhill@moz-244CF33A.amazon.com) (Ping timeout)
[22:02:42] *** Quits: pcwalton (pcwalton@D903B46D.8AEA38DE.F3334A4B.IP) (Connection reset by peer)
[22:02:43] *** Joins: pwalton (pcwalton@D903B46D.8AEA38DE.F3334A4B.IP)
[22:04:43] *** Joins: geoffhill (geoffhill@moz-79C8D45C.amazon.com)
[22:09:04] *** zz_kimundi is now known as kimundi
[22:14:26] *** Quits: pwalton (pcwalton@D903B46D.8AEA38DE.F3334A4B.IP) (Ping timeout)
[22:15:41] *** Joins: pcwalton (pcwalton@A2AFD874.8AEA38DE.F3334A4B.IP)
[22:15:42] *** ChanServ sets mode: +ao pcwalton pcwalton
[22:16:53] *** Joins: pwalton (pcwalton@D903B46D.8AEA38DE.F3334A4B.IP)
[22:17:43] *** Quits: pcwalton (pcwalton@A2AFD874.8AEA38DE.F3334A4B.IP) (Ping timeout)
[22:17:45] *** Quits: pwalton (pcwalton@D903B46D.8AEA38DE.F3334A4B.IP) (Connection reset by peer)
[22:18:11] *** Joins: pcwalton (pcwalton@D903B46D.8AEA38DE.F3334A4B.IP)
[22:18:11] *** ChanServ sets mode: +ao pcwalton pcwalton
[22:18:29] *** Joins: ktt3ja (Mibbit@moz-6B6EE8C0.hsd1.va.comcast.net)
[22:19:01] *** Quits: pcwalton (pcwalton@D903B46D.8AEA38DE.F3334A4B.IP) (Connection reset by peer)
[22:19:24] *** Joins: pcwalton (pcwalton@D903B46D.8AEA38DE.F3334A4B.IP)
[22:19:25] *** ChanServ sets mode: +ao pcwalton pcwalton
[22:20:15] *** Quits: pcwalton (pcwalton@D903B46D.8AEA38DE.F3334A4B.IP) (Connection reset by peer)
[22:20:40] *** Joins: pcwalton (pcwalton@D903B46D.8AEA38DE.F3334A4B.IP)
[22:20:40] *** ChanServ sets mode: +ao pcwalton pcwalton
[22:20:54] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[22:34:58] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[22:37:15] *** Joins: lkuper (lkuper@89685233.276CCABD.D92E75BF.IP)
[22:39:16] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[22:39:16] *** ChanServ sets mode: +qo brson brson
[22:42:56] *** Joins: pwalton (pcwalton@A2AFD874.8AEA38DE.F3334A4B.IP)
[22:43:57] *** Quits: pcwalton (pcwalton@D903B46D.8AEA38DE.F3334A4B.IP) (Ping timeout)
[22:43:58] *** pwalton is now known as pcwalton
[22:47:30] *** Quits: pcwalton (pcwalton@A2AFD874.8AEA38DE.F3334A4B.IP) (Ping timeout)
[22:49:26] *** Joins: pcwalton (pcwalton@A2AFD874.8AEA38DE.F3334A4B.IP)
[22:49:26] *** ChanServ sets mode: +ao pcwalton pcwalton
[23:05:02] *** Quits: geoffhill (geoffhill@moz-79C8D45C.amazon.com) (Quit: geoffhill)
[23:06:09] *** Joins: geoffhill (geoffhill@moz-244CF33A.amazon.com)
[23:07:53] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[23:08:46] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[23:08:46] *** ChanServ sets mode: +qo brson brson
[23:13:24] *** Joins: pwalton (pcwalton@D903B46D.8AEA38DE.F3334A4B.IP)
[23:13:43] *** Quits: pcwalton (pcwalton@A2AFD874.8AEA38DE.F3334A4B.IP) (Ping timeout)
[23:15:05] *** Quits: pwalton (pcwalton@D903B46D.8AEA38DE.F3334A4B.IP) (Ping timeout)
[23:16:09] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[23:16:09] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 144230e9e to 147fb583b: 02http://git.io/N3iJvQ
[23:16:09] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[23:16:16] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[23:16:17] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/qVjH_g
[23:16:17] <ghrust> 13rust/06auto 14243c0da 15Alex Crichton: Use loader_path instead of executable_path for osx...
[23:16:17] <ghrust> 13rust/06auto 145d16ed3 15bors: auto merge of #10299 : alexcrichton/rust/osx-loader-path-fix, r=brson...
[23:16:17] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[23:19:52] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Ping timeout)
[23:25:05] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[23:25:05] <ghrust> 01[13rust01] 15alexcrichton merged 06auto into 06snap-stage3: 02http://git.io/_UO8uA
[23:25:05] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[23:27:37] *** Joins: tautologico (lymph@703660AA.CFE755C8.C27E1635.IP)
[23:28:29] *** Quits: lkuper (lkuper@89685233.276CCABD.D92E75BF.IP) (Quit: lkuper)
[23:31:33] *** Quits: bytewise (bytewise@moz-90F30968.eduroam.rwth-aachen.de) (Quit: Leaving)
[23:36:06] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[23:37:48] *** kimundi is now known as zz_kimundi
[23:41:51] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[23:42:49] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[23:43:39] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[23:47:14] *** Parts: McPherrin (mimcpher@moz-345B5EBA.csclub.uwaterloo.ca) ()
[23:49:38] <acrichto> strcat: for #10300, do you know if it'd be ok to just align everything to 8 bytes for now?
