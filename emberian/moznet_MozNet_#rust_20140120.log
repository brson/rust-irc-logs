[00:00:00] <mitsuhiko> cmr: a specific reason for that? makes debugging easier.
[00:00:23] <dbaupp> andor: I don't know... whatever version you are using
[00:00:38] <dbaupp> andor: I don't think the CString interface has changed since 0.9 though.
[00:01:02] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[00:01:04] <dbaupp> mitsuhiko: it makes ~str <-> ~[u8] sane
[00:01:12] <dbaupp> (and &str <-> &[u8])
[00:01:12] <SiegeLord> I bet in that case I'd just do "bar\0".as_ptr() with a string literal
[00:01:26] <SiegeLord> I think I did in fact do that a few times...
[00:01:31] <cmr> I'd just use bytes!("bar", 0)
[00:01:34] <cmr> :P
[00:01:35] <andor> dbaupp: well StrSlice defines as_ptr, CString doesn't define anything like that
[00:01:41] <mitsuhiko> dbaupp: i don't mean that rust would depend on it. just make sure it's still there automatically if you hook a debugger in
[00:01:53] <dbaupp> andor: it has to define something that gives you a *u8 (or *c_char)
[00:02:19] <dbaupp> mitsuhiko: it... doesn't work
[00:02:33] <mitsuhiko> best effort does work :)
[00:02:38] <dbaupp> mitsuhiko: e.g. ~[u8] -> ~str would require pushing a 0, which may realloc
[00:02:42] <andor> dbaupp: oh, it has as_bytes
[00:02:53] <dbaupp> and only *sometimes* pushing a 0 would make the reverse impossible
[00:03:04] *** Quits: squiddy (squiddy@moz-F847A3EE.adsl.alicedsl.de) (Quit: Leaving)
[00:03:09] <mitsuhiko> dbaupp: why would it require pushing? the \0 would not be part of the string itself
[00:03:14] <mitsuhiko> it just hangs at the end of the allocation
[00:03:32] <ChrisMorgan> Does anyone just happen to have written any libraries for working with sparse matrices?
[00:04:08] <dbaupp> mitsuhiko: so, you're saying any ~"foo" literals, etc, should have a secret \0 at the end, that's not part of the string itself; but ~str's created any other way don't necessarily have it?
[00:04:17] <mitsuhiko> dbaupp: jap
[00:04:22] *** Joins: nham (Mibbit@moz-2C6185F8.lightspeed.dybhfl.sbcglobal.net)
[00:04:30] <SiegeLord> That's what D does
[00:04:44] <SiegeLord> Hidden \0 past the end of every string literal
[00:05:06] <dbaupp> that functionality may still be there (if it wasn't removed when compulsory nulls were)
[00:05:11] <SiegeLord> Although that's not quite ~"abc"
[00:05:28] <SiegeLord> I'd rather make a CString with a 100 byte buffer in it
[00:05:35] <carllerche> hmm… seems like I'm hitting a compiler bug https://gist.github.com/carllerche/a8ee40e63173a0cfe5c7
[00:06:24] <cmr> carllerche: yup!
[00:06:38] <carllerche> reading the bug submission doc :P
[00:06:56] <andor> dbaupp: oh shit, there's unwrap() for CString, i completley skipped over that
[00:06:58] <andor> i feel so dumbá
[00:07:21] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Quit: Leaving.)
[00:07:33] <mitsuhiko> andor: careful. unwrap releases memory ownership
[00:07:56] *** Joins: dmac (dmac@moz-94F55C3.hfc.comcastbusiness.net)
[00:07:58] <joebobjoe> Ah. So nice. Type-safe equality! I am sick of Scala's.
[00:08:06] <andor> well i'm only doing "foo".to_c_str().unwrap()
[00:08:14] <andor> eg. hardcoded strings
[00:08:17] <cmr> andor: and now you're leaking memory! \o/
[00:08:33] <cmr> andor: just use "foo\0" or bytes!("foo\0") or bytes!("foo", 0)
[00:08:38] <andor> :(
[00:08:59] <SiegeLord> Or if you want to be edgy, you can actually put the NUL there
[00:09:02] <carllerche> what info is generally helpful besides the error message and version / platform info?
[00:09:08] <SiegeLord> Break some editors in the process ;)
[00:09:18] *** Quits: leroux (leroux@moz-421CF1E4.dsl.bell.ca) (Ping timeout)
[00:09:19] <SiegeLord> Geany will think the whole document is chinese
[00:09:27] <cmr> carllerche: well a minimal testcase is ideal.
[00:09:35] <cmr> carllerche: a backtrace could also be useful
[00:09:36] <dbaupp> andor: I guess it's .as_bytes().as_ptr()
[00:09:44] <cmr> gdb rustc --args foo.rs, break rust_fail
[00:10:06] <carllerche> cmr: i will see if i can figure out a minimal test case but i have no idea what's happening :P
[00:10:14] <cmr> me neither!
[00:10:16] * cmr hasn't seen that one.
[00:10:50] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[00:11:22] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Ping timeout)
[00:11:46] <andor> cmr: okay, but how do i turn bytes!("foo\0") into an *i8/*c_char.... :\
[00:11:56] <cmr> andor: it returns a &[u8]
[00:11:59] <cmr> same .as_ptr()
[00:12:12] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[00:12:25] *** Joins: jsonnull (Thunderbir@E86DD23.582C899D.494A0F8B.IP)
[00:12:31] <mitsuhiko> andor: when in doubt, transmute
[00:12:46] *** Quits: jsonnull (Thunderbir@E86DD23.582C899D.494A0F8B.IP) (Quit: jsonnull)
[00:12:48] <andor> as_ptr gives me u8, i need i8
[00:12:50] *** Joins: jsonnull (Thunderbir@E86DD23.582C899D.494A0F8B.IP)
[00:12:53] <andor> mitsuhiko: been there, done that
[00:13:04] <andor> and as *i8 doesn't seem to work
[00:13:05] <cmr> `.as_ptr() as *i8`
[00:13:08] <cmr> it should
[00:13:12] <andor> no, it does not
[00:13:31] <cmr> rusti: bytes!("foo\0").as_ptr() as *i8
[00:13:31] <andor> this is what i have as a reference, since this works
[00:13:33] -rusti- pastebinned 6 lines of output: http://ix.io/9ZP
[00:13:44] <andor> ~"TeamSpeak 3".with_c_str(|y| unsafe {
[00:13:46] <andor>   println!("{}", FindWindowA(std::ptr::null(), y));
[00:13:46] <cmr> rusti: let b = bytes!("foo\0"); b.as_ptr() as *i8
[00:13:48] -rusti- (0x7fc8e04d2d14 as *())
[00:13:48] <andor>  });
[00:14:27] <andor> oh sorry
[00:14:42] <andor> never mind, bytes!().as_ptr() as *i8 works
[00:14:48] *** Quits: acrichto (acrichto@moz-B63D64BD.res.cmu.edu) (Quit: leaving)
[00:14:54] *** Joins: acrichto (acrichto@moz-B63D64BD.res.cmu.edu)
[00:14:54] *** ChanServ sets mode: +o acrichto
[00:15:42] <andor> i just copied what you said and forgot to modify the string itself...
[00:15:46] *** Joins: snerd (motk@moz-D21A06DF.members.linode.com)
[00:15:59] *** Joins: rwt (quassel@moz-C59DEDD3.dhcp-bl.indiana.edu)
[00:18:09] *** Joins: dmac1 (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[00:19:09] *** Joins: bcj (Mibbit@444A29ED.100E5B0A.C02F1E60.IP)
[00:19:19] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[00:19:29] *** Joins: orospakr (orospakr@moz-A57EF4CD.cpe.net.cable.rogers.com)
[00:19:39] <carllerche> cmr: https://github.com/mozilla/rust/issues/11676
[00:19:41] <carllerche> hopefully that is enough info
[00:20:39] *** Quits: nkoep (nik@moz-7D0E86DA.pool.mediaways.net) (Quit: Leaving)
[00:21:01] *** Joins: bmurphy1976 (bmurphy197@moz-ED7F06D5.lightspeed.cicril.sbcglobal.net)
[00:21:02] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[00:21:35] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[00:22:12] *** Quits: bcj (Mibbit@444A29ED.100E5B0A.C02F1E60.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:22:42] <carllerche> cmr: perhaps it's not possible to extern "C" a generic function?
[00:23:36] <dbaupp> carllerche: i.e. as `extern "C" fn foo<T>(...) { ... }`? I think that does have bugs, yes
[00:23:51] <carllerche> dbaupp: I have a bound on the generic but yeah
[00:24:26] *** Joins: bvssvni (Mibbit@moz-CBD76C21.bb.online.no)
[00:25:02] *** Quits: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de) (Connection reset by peer)
[00:25:13] <carllerche> dbaupp: would could be a work around?
[00:25:53] *** Quits: bmurphy1976 (bmurphy197@moz-ED7F06D5.lightspeed.cicril.sbcglobal.net) (Quit: bmurphy1976)
[00:26:36] <dbaupp> carllerche: do you have the ability to pass in extra data to the callback?
[00:26:42] <sfackler> eddyb: yeah, the limitations on $foos in quote_* is pretty annoying
[00:26:52] <carllerche> dbaupp: possibly, what kind of data?
[00:26:52] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[00:27:15] <SiegeLord> Drat, got a personality error
[00:27:26] *** Quits: acrichto (acrichto@moz-B63D64BD.res.cmu.edu) (Quit: leaving)
[00:27:32] *** Joins: acrichto (acrichto@moz-B63D64BD.res.cmu.edu)
[00:27:32] *** ChanServ sets mode: +o acrichto
[00:27:47] <dbaupp> carllerche: I would have the extern "C" function take a Rust function and just call that (i.e. a thin wrapper), and just pass in a generic Rust function
[00:27:51] <dbaupp> or something like tht
[00:28:36] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[00:29:09] <dbaupp> something like `extern "C" fn callback(ptr: *c_void, f: fn(*c_void)))  fn foo<T>(ptr: *c_void) { let ptr = ptr as *T; /* use ptr */ }`
[00:29:26] <dbaupp> and then you'd pass in foo::<int> to the place that feeds it to `callback`
[00:29:54] <dbaupp> carllerche: (the body of callback would just be `f(ptr)`)
[00:30:52] <carllerche> ah, ok. I will attempt
[00:31:06] *** Joins: new_one (new_one@B48A3C4C.4C8100B8.B3C0173E.IP)
[00:32:33] <dbaupp> sfackler: fwiw do you actually need to quote $k1 twice (i.e. you have let k1 = ...; let k1 = quote_expr!(..., $k1);` and then use that $k1 later, when you could just skip the individual quotes and do it all in one go?
[00:34:19] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[00:34:49] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[00:34:55] *** Joins: a_m0d (a_m0d@moz-322A4DE4.acanac.net)
[00:37:12] <dbaupp> rusti: extern "C" fn foo<T>(_: T) {}
[00:37:14] -rusti- pastebinned 9 lines of output: http://ix.io/9ZQ
[00:37:23] <dbaupp> carllerche: ^
[00:37:31] <dbaupp> looks like is the generic
[00:38:06] <carllerche> indeed
[00:39:03] *** Joins: peterdreid (peterdreid@moz-D18776CD.nc.res.rr.com)
[00:40:10] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[00:40:43] *** Joins: paul_dufr (Mibbit@BD42CDE6.73FB178E.3DEE0DD0.IP)
[00:41:27] <paul_dufr> Was to try rust on Windows XP (tried it about 15 mins on Arch Linux in the past).
[00:42:50] <paul_dufr> Just installed mingw, but on D: rather than C: (no place on C:). This seems to not be found.
[00:43:19] <paul_dufr> D:\Documents and Settings\Paul\myrust>rustc hello.rs error: could not exec the linker `gcc` error: aborting due to previous error task 'rustc' failed at 'explicit failure', C:\bot\slave\dist2-win\build\src\libs yntax\diagnostic.rs:75 task '<main>' failed at 'explicit failure', C:\bot\slave\dist2-win\build\src\lib rustc\lib.rs:453
[00:44:58] <SiegeLord> paul_dufr, I'd add the MinGW's bin directory to PATH
[00:45:07] *** jorendorff_away is now known as jorendorff
[00:45:12] <SiegeLord> Compiling rust on Win7 atm, hehe
[00:47:40] <paul_dufr> hum, indeed gcc does not run... but did not do step 5, and was trying directly rather than in MSYS window
[00:48:09] *** Quits: moostik (Icedove@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[00:49:19] <paul_dufr> still searching how to launch MSYS :-)
[00:49:35] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Ping timeout)
[00:50:37] <SiegeLord> There should be an msys.bat in a subdirectory of where you installed mingw
[00:50:37] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[00:51:14] <ChrisMorgan> Anyone with Windows experience know what "note: gcc: fatal error: -fuse-linker-plugin, but liblto_plugin-0.dll not found" would mean/entail/whatever? http://stackoverflow.com/q/21196525/497043
[00:51:35] *** Joins: moostik (Icedove@6181009C.10715965.BCDF592F.IP)
[00:52:00] *** Joins: kvanb (kvanb@2B5C483.28BE6889.1611EE05.IP)
[00:53:36] <jmgrosen> ugh, having to put & around all of these .slice calls makes it looks ugly >.<
[00:53:43] <jmgrosen> well, it's only temporary, I guess
[00:53:50] <jmgrosen> until stage0 has the new sugar
[00:53:53] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[00:54:05] <paul_dufr> found MSYS.bat but gcc and other not working, so adding MinGW bin dir in env variables
[00:54:56] *** Parts: shu (sguo@moz-DB4A9C19.scl3.mozilla.com) ()
[00:55:55] *** jorendorff is now known as jorendorff_away
[00:56:16] <klutzy> paul_dufr: you may need to type `sh /postinstall/pi.sh` in msys shell
[00:56:40] <klutzy> (it sets /etc/fstab to mingw dir)
[00:56:44] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[00:57:04] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[00:57:23] <klutzy> ChrisMorgan: I've heard the issue at https://github.com/mozilla/rust/issues/11651
[00:57:39] <klutzy> ChrisMorgan: what's your mingw version installed?
[00:57:55] <ChrisMorgan> klutzy: 't ain't me, 'ts that SO question.
[00:58:28] * ChrisMorgan just observes nothing happening with it and doesn't want it to get forgotten
[00:58:36] <klutzy> aha, I should read SO page first :p
[00:59:14] * ChrisMorgan hasn't used Windows for a while
[00:59:31] *** jorendorff_away is now known as jorendorff
[01:00:15] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[01:03:23] *** Joins: bmurphy1976 (bmurphy197@moz-ED7F06D5.lightspeed.cicril.sbcglobal.net)
[01:03:32] *** Quits: heftig (heftig@moz-2118892D.dip0.t-ipconnect.de) (Quit: Quitting)
[01:03:56] *** Quits: a_m0d (a_m0d@moz-322A4DE4.acanac.net) (Quit: Leaving.)
[01:04:09] <paul_dufr> hum... mingw problem: each time I run $gcc I get "Exception Processing Message c00000013 Parameters 75b6b7c 4 75b6b7c ..." before getting correct result in window.
[01:09:28] *** Quits: paul_dufr (Mibbit@BD42CDE6.73FB178E.3DEE0DD0.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:10:25] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[01:11:35] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[01:12:50] <bmurphy1976> I have a problem, main.rs references crate.rs which references a system library.  When I compile main to an executable, it finds crate.rs but does not pull in the reference to the system library.  If I compile all the code as a single source file, everything works.  What is the correct way to ensure that the main executable also references all dependent system libraries?
[01:13:12] *** Quits: orospakr (orospakr@moz-A57EF4CD.cpe.net.cable.rogers.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:14:30] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[01:14:30] *** ChanServ sets mode: +o jdm
[01:15:27] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[01:15:29] <itdaniher> Luqman: Thanks for the build!
[01:16:16] <itdaniher> If making ARM snapshots is just an infrastructure issue, I can donate hardware to ensure testing & continuous builds feasible
[01:16:25] *** jorendorff is now known as jorendorff_away
[01:18:43] <sfackler> dbaupp: good catch, you're right
[01:23:51] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[01:24:02] *** Quits: rwt (quassel@moz-C59DEDD3.dhcp-bl.indiana.edu) (Ping timeout)
[01:24:58] <jmgrosen> hmmmmmm
[01:25:00] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[01:25:11] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[01:25:15] <jmgrosen> I'm beginning to think having Slice return an arbitrary type is impossible to worth with
[01:25:20] <jmgrosen> *work
[01:26:02] <SiegeLord> What's the issue?
[01:26:04] *** Quits: patpat (patpat@moz-85F8C52A.as13285.net) (Ping timeout)
[01:26:57] *** Joins: patpat (patpat@moz-85F8C52A.as13285.net)
[01:27:36] <SiegeLord> Anyone know what QML is? Would it be any better fit for Rust than Qt proper?
[01:27:37] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[01:27:58] <cmr> SiegeLord: QML is a markup language that QtQuick uses iirc.
[01:28:08] <cmr> I'm pretty sure you need Qt proper to actually use it.
[01:28:11] <mcpherrin> SiegeLord: It's like using javascript and an htmlish language to make UIs
[01:28:29] <mcpherrin> uh I only say htmlish in that it's a markup
[01:28:48] <cmr> it looks you can actually have logic in it. is it just embedded js?
[01:28:54] * cmr only recalls it being markup
[01:28:59] <SiegeLord> So it's no easier to support it than to "just" bind Qt?
[01:29:18] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[01:29:23] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[01:29:30] <cmr> it might be easier to wrap due to smaller API surface.
[01:29:32] <cmr> not entirely sure.
[01:29:44] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[01:29:44] <cmr> definitely worth looking into!
[01:29:55] *** Joins: a_m0d (a_m0d@moz-322A4DE4.acanac.net)
[01:30:15] *** Quits: zil (sid23500@moz-31ABA2C0.irccloud.com) (Ping timeout)
[01:30:55] *** Joins: zil (sid23500@moz-31ABA2C0.irccloud.com)
[01:30:56] <ChrisMorgan> QML includes JavaScript for scripting of it.
[01:31:28] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[01:32:07] *** Quits: gwty (gwtypc@E2C142AC.FA920D05.137C914F.IP) (Ping timeout)
[01:33:00] *** Joins: rwt (quassel@moz-C59DEDD3.dhcp-bl.indiana.edu)
[01:34:25] *** Joins: orospakr (orospakr@moz-4514BEF2.cpe.teksavvy.com)
[01:34:41] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[01:35:25] <jmgrosen> SiegeLord: this is the crux of the problem: https://gist.github.com/jmgrosen/6731558196f15fa674ac
[01:35:34] <jmgrosen> that doesn't work :/
[01:35:34] *** Quits: psquid (psquid@moz-CEF96322.threembb.co.uk) (Client exited)
[01:36:22] *** Joins: amphibulus (Mibbit@moz-3879A9EC.phlapa.fios.verizon.net)
[01:36:53] *** Quits: amphibulus (Mibbit@moz-3879A9EC.phlapa.fios.verizon.net) (Quit: http://www.mibbit.com ajax IRC Client)
[01:37:02] <joebobjoe> Hm. I just realized. Scala's path-dependent types are kind of like ownership in Rust. Or am I completely wrong?/
[01:38:31] <jmgrosen> SiegeLord: I can do it once https://github.com/mozilla/rust/issues/5518 is fixed
[01:38:39] <jmgrosen> (I think)
[01:39:02] *** Quits: japaric (japaric@465C3E59.F60EC59D.F29ED47E.IP) (Ping timeout)
[01:39:15] *** Quits: hays (quassel@moz-95A78BD8.washdc.east.verizon.net) (Ping timeout)
[01:39:19] <SiegeLord> Still compiling Rust... it's so much slower on Windows for some reason...
[01:39:49] <cmr> SiegeLord: the llvm half is dreadful because process spawning is slower.
[01:40:04] <dbaupp> Does LLVM spawn a lot of processes??
[01:40:11] <cmr> dbaupp: a compiler for every cpp file
[01:40:15] <dbaupp> Oh, to compile LLVM
[01:40:20] *** Joins: hays (quassel@moz-F677D4AB.washdc.east.verizon.net)
[01:40:21] <dbaupp> not rustc using LLVM
[01:40:26] <cmr> yeah
[01:40:28] <cmr> sorry
[01:40:50] <cmr> the rustc half shouldn't be slower than usual
[01:41:01] *** Joins: japaric (japaric@465C3E59.F60EC59D.F29ED47E.IP)
[01:41:25] <dbaupp> well, it will be slower, since it has to call the external linker, and that will be slightly slower :P
[01:41:56] *** Quits: earlz (earlz@moz-483E1E31.neo.res.rr.com) (Quit: Leaving.)
[01:44:14] *** kimundi is now known as zz_kimundi
[01:44:41] *** Joins: Cevn (sameer@moz-F316C21E.hr.hr.cox.net)
[01:45:35] <o11c> it's a pity Option<> can't optimize the size when the body is already an enum ...
[01:45:52] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[01:45:52] <cmr> there's an issue open for discriminant coalescing.
[01:45:59] <cmr> jld: :)
[01:46:04] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[01:47:15] <Luqman> itdaniher: no problem. it's just a matter of me running the script :P 
[01:47:21] <Luqman> itdaniher: so does it work for you?
[01:48:26] *** Quits: moostik (Icedove@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[01:50:23] *** Joins: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com)
[01:50:55] <reima> rustc tells me "value may contain references; add `'static` bound", but I'm not sure how to go about that
[01:51:03] <reima> Here's my code if anyone wants to take a look: https://gist.github.com/reima/ce7a7e44848c60c2f66e
[01:51:54] *** Joins: moostik (Icedove@6181009C.10715965.BCDF592F.IP)
[01:52:07] <cmr> reima: try ~Fun:'static<T, V>
[01:53:44] <reima> cmr: Thanks, I'll try
[01:57:22] *** Quits: MrByte (Dartakio@moz-81792842.chy-wy.client.bresnan.net) (Ping timeout)
[01:58:53] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[01:59:12] *** Quits: moostik (Icedove@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[02:02:02] *** Quits: Cevn (sameer@moz-F316C21E.hr.hr.cox.net) (Ping timeout)
[02:04:56] *** Joins: MrByte (Dartakio@moz-81792842.chy-wy.client.bresnan.net)
[02:06:09] *** Joins: kanru (kanru@moz-99690620.hinet-ip.hinet.net)
[02:09:47] <reima> cmr: Had no luck with that, but "fn compose<T, U: 'static, V> ..." made it compile
[02:09:48] *** Joins: rmccue (rmccue@moz-66F4DDD7.static.exetel.com.au)
[02:10:00] <reima> These lifetime bounds are still a bit of a mystery to me
[02:10:09] <cmr> oh... ok.
[02:10:15] <rmccue> Hi! https://github.com/mozilla/rust/wiki/Note-bors-usage notes that Bors source should be available "soon", but that was last edited 6 months ago. Any word on that? :)
[02:10:27] <cmr> well, the 'static kind means "contains no borrowed pointers that don't have the 'static lifetime"
[02:10:44] <cmr> rmccue: it's at https://github.com/graydon/bors
[02:10:51] * cmr updates wiki
[02:10:59] <rmccue> cmr: Thanks a bunch! :)
[02:12:23] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[02:12:40] <rmccue> Kind of surprised it's not written in Rust :)
[02:12:57] *** Quits: lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net) (Ping timeout)
[02:13:31] <ChrisMorgan> rmccue: it was written when there was nothing much for at least HTTP, so it would have been a mish-mash of things. It could be written in Rust now, but why bother when it works?
[02:13:32] <cmr> when bors was written rust was definitely not suitable for it.
[02:13:37] <cmr> now? maybe.
[02:13:46] <rmccue> Fair enough
[02:14:23] <rmccue> Also, hi ChrisMorgan, long time no talk
[02:14:24] <ChrisMorgan> BTW: hi rmccue, haven't heard from you for years ☺
[02:14:30] <rmccue> Heh :)
[02:15:22] *** Joins: lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net)
[02:16:26] *** Quits: bmurphy1976 (bmurphy197@moz-ED7F06D5.lightspeed.cicril.sbcglobal.net) (Quit: bmurphy1976)
[02:18:26] *** Joins: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au)
[02:19:47] <reima> cmr: That makes sense, but I'm not sure how I could have forseen that I need a 'static bound on that type variable (not that I understand why it's needed at all)
[02:22:51] <cmr> reima: well, you need it because you're using it in a ~Trait object.
[02:23:02] <cmr> reima: I'm not sure why you *don't* need it on the other ones.
[02:23:07] *** Joins: elux (peter@moz-6B45ADE5.dsl.bell.ca)
[02:23:19] *** Joins: bmurphy1976 (bmurphy197@moz-ED7F06D5.lightspeed.cicril.sbcglobal.net)
[02:23:23] <cmr> reima: you'd have to ask someone else, about it.
[02:24:23] <reima> cmr: Ok, thanks for your help
[02:25:38] *** Quits: WebeWizard (Justin@moz-7CCD1DAE.ks.ks.cox.net) (Quit: Leaving)
[02:25:43] *** Quits: zil (sid23500@moz-31ABA2C0.irccloud.com) (Ping timeout)
[02:26:02] *** Quits: patrikstenmark (sid16326@moz-A42E5B7B.irccloud.com) (Ping timeout)
[02:26:02] *** Quits: cds (uid23856@moz-E77DEB21.irccloud.com) (Ping timeout)
[02:26:13] *** Joins: zil (sid23500@moz-31ABA2C0.irccloud.com)
[02:26:35] *** Joins: cds (uid23856@moz-E77DEB21.irccloud.com)
[02:27:27] *** Joins: patrikstenmark (sid16326@moz-A42E5B7B.irccloud.com)
[02:27:29] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[02:28:22] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[02:29:18] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[02:29:58] *** Joins: Cevn (sameer@moz-F316C21E.hr.hr.cox.net)
[02:30:04] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[02:30:25] *** Quits: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com) (Quit: csherratt)
[02:30:26] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[02:30:58] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[02:31:15] *** Joins: Denommus (user@moz-B9DBEB9C.user.veloxzone.com.br)
[02:31:16] *** Quits: reima (reima@moz-9F359C5F.dip0.t-ipconnect.de) (Quit: Leaving)
[02:31:18] <Denommus> hi
[02:31:51] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[02:32:04] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[02:32:10] *** Joins: future_horizons (Mibbit@D43271B6.278C2F23.97BBD552.IP)
[02:32:18] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[02:32:51] <cmr> hello Denommus
[02:32:54] <future_horizons> What is the Rust 0.9 io::read_whole_file_str() equivalent please?
[02:33:05] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[02:33:11] *** Quits: a_m0d (a_m0d@moz-322A4DE4.acanac.net) (Quit: Leaving.)
[02:33:12] <cmr> future_horizons: yikes how old is the code you're porting?
[02:33:26] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[02:33:45] <cmr> File::new(Path::new("foo.txt")).read_to_str()
[02:33:45] *** Joins: blaphmat (Mibbit@4244B1FB.102F4801.301BE678.IP)
[02:34:06] <Denommus> macro_rules! is a funny name
[02:34:07] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[02:34:12] <future_horizons> started back at 0.5
[02:34:19] <o11c> macro_sucks! would be a better one
[02:34:25] <future_horizons> cmr: Thanks
[02:35:00] *** jorendorff_away is now known as jorendorff
[02:35:08] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[02:35:16] *** Joins: bitwalker (bitwalker@moz-8FC28563.sierrabravo.net)
[02:35:30] <dbaupp> cmr: isn't the current bors brson/bors?
[02:35:31] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Connection reset by peer)
[02:35:46] <cmr> dbaupp: no
[02:35:53] <cmr> you'll notice it's a fork and far older.
[02:36:29] *** Joins: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com)
[02:36:32] <dbaupp> cmr: Oh, ok
[02:36:45] <dbaupp> (I'd've thought brson would've taken ownership, but apparently not.)
[02:37:28] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[02:39:20] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[02:40:38] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[02:46:09] *** Quits: dmac1 (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Quit: Leaving.)
[02:46:22] *** Joins: sellout (Adium@moz-76D71F1A.hlrn.qwest.net)
[02:46:35] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[02:47:26] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[02:47:31] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[02:47:37] *** Quits: dmac (dmac@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[02:47:54] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[02:51:07] *** Quits: blaphmat (Mibbit@4244B1FB.102F4801.301BE678.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:52:21] *** Joins: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP)
[02:53:23] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[02:54:17] *** Quits: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[02:58:07] <bmurphy1976> is this something I should be concerned about?  warning: found enum type without foreign-function-safe representation annotation in foreign module, #[warn(ctypes)] on by default
[02:58:47] *** Joins: machty (sid13535@moz-31ABA2C0.irccloud.com)
[02:59:03] <mcpherrin> bmurphy1976: Do you care about passing that enum to a foreign function? If not it's fine probably.  I'm curious to see the code though as I haven't run into it
[02:59:26] <_achin> put #[repr(C)] on your enum
[02:59:37] <bmurphy1976> mcpherrin: here's what I'm doing... I'm building a very low level wrapper around libcurl as a learning excercise
[02:59:50] <_achin> you will need it
[03:00:38] *** Quits: Cevn (sameer@moz-F316C21E.hr.hr.cox.net) (Ping timeout)
[03:00:54] <dmz> Question = in what case a trait becomes automatically bounded by Send?
[03:01:01] <bmurphy1976> mcpherrin: the method I am calling takes an int but I'm using an enum to add some extra type safety, it's basically CODE => payload and there's four different types of payloads thus four different enums
[03:01:25] <bmurphy1976> _achin: I'll look into that, thanks :)
[03:02:06] <_achin> i'm not sure where it's documented though.  you can thank cmr who answered that exact same question when i asked it yesterday :)
[03:03:31] <dmz> I'm getting "cannot pack type `~XXX`, which does not fulfill `Send`, as a trait bounded by Send", but I didn't set the Send bound to my trait
[03:03:40] <bmurphy1976> it worked (at least removed the warning).  
[03:04:09] *** Quits: kvanb (kvanb@2B5C483.28BE6889.1611EE05.IP) (Ping timeout)
[03:05:27] <glennsl> dmz: an owned pointer to a trait is bound by Send by default. you can override it by explicitly specifying no bounds, e.g. `~Foo:`
[03:05:47] <dmz> oh
[03:06:02] *** Joins: kvanb (kvanb@moz-2A371643.lnse2.win.bigpond.net.au)
[03:06:29] <dmz> glennsl: thanks! it's the first time I see syntax ~Foo: though
[03:06:40] <dmz> have I missed some of the tutorials perhaps?
[03:06:54] <yuriks> _achin: you only need that if the enum is part of a struct
[03:07:11] *** Quits: bitwalker (bitwalker@moz-8FC28563.sierrabravo.net) (Ping timeout)
[03:07:11] <glennsl> dmz: don't think so, I haven't seen it before either. Learned it just yesterday :)
[03:07:40] <dmz> cool, ty
[03:07:42] *** Joins: lpy (lpy@7FD2B9AB.3720F6C5.952560D4.IP)
[03:08:43] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[03:08:51] <dmz> glennsl: ouch, now I'm getting tons of other problems with that
[03:08:52] *** Quits: zz_kimundi (kimundi@moz-F79A61BC.dip0.t-ipconnect.de) (Ping timeout)
[03:10:04] <dmz> the higher-level structs (that own ~Trait) no longer fulfill 'static for me, which I need
[03:11:40] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[03:12:50] *** Joins: zz_kimundi (kimundi@moz-AEB7B25C.dip0.t-ipconnect.de)
[03:13:07] *** zz_kimundi is now known as kimundi
[03:13:32] <glennsl> dmz: I think 'static means there can be no non-static references, and Send requires you have no references at all
[03:13:41] <glennsl> dmz: what are you trying to do?
[03:13:43] <wycats> question
[03:14:05] <wycats> if I do ~foo() and foo() returns a T, it heap allocates it without first putting it on the stack and copying, right?
[03:14:14] <cmr> wycats: it should yes.
[03:14:30] <wycats> cmr: is there a way to get a similar semantic if your function returns a Result<T,U>
[03:14:36] <wycats> let's say I want the T on the heap
[03:14:48] <wycats> if I say ~foo.unwrap() it seems like it would go through the stack
[03:14:50] <dmz> glennsl: I need to fulfill 'static (in order to pass to TLS and some other stuff) for ~Trait. How do I do that?
[03:15:26] <wycats> dmz: make sure you have no references out?
[03:15:31] <wycats> no ~ and not &
[03:16:31] <cmr> wycats: so the way it works is that all functions have an out pointer where they store their result.
[03:16:36] <wycats> c
[03:16:40] <wycats> it seems like an edge-case
[03:16:42] <cmr> wycats: usually it's just the stack, but when you say ~expr it uses that heap box.
[03:16:44] <wycats> that breaks the niceness
[03:16:56] <cmr> ~foo.unwrap() should do the same thing.
[03:17:02] <cmr> however it depends on exactly how it ends up working.
[03:17:19] <cmr> if it uses temporaries inside the function, they'll be on the stack first....
[03:17:23] <cmr> best bet is to look at the IR.
[03:17:23] <wycats> what about match foo() { }
[03:17:26] <dmz> glennsl,wycats: ok, I added :'static to the trait and everything worked
[03:17:43] <wycats> I don't REALLY want to look at the IR ;) I want Rust to have a public API semantic that I know skips the copy
[03:18:22] *** Quits: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com) (Quit: csherratt)
[03:19:02] <cmr> ABI you mean?
[03:19:14] <nightpool> How can I convert a (u8) char to ascii? Is there a std/extra library I could use? 
[03:19:19] <cmr> nightpool: .to_ascii()
[03:19:32] <cmr> http://static.rust-lang.org/doc/master/std/ascii/trait.AsciiCast.html
[03:19:58] <nightpool> thank you!
[03:20:10] <nightpool> not sure how I missed that ;)
[03:20:14] <cmr> wycats: so ultimately it's an optimization. the result will always be written to the out pointer but if they function uses stack temporaries LLVM *might* not optimize out the intermediate stores before the final write to the out pointer.
[03:20:19] *** Quits: Earnestly (earnest@moz-E86D50FA.dyn.plus.net) (Ping timeout)
[03:20:23] *** Quits: rootnode (rootnode@moz-7FAB5E8.ip1.george24.com) (Ping timeout)
[03:21:46] <cmr> wycats: but the caller won't be able to observe that.
[03:23:24] <_achin> yuriks: i don't believe that is true
[03:23:33] <_achin> yuriks: at least, it wasn't true in my case
[03:23:40] <yuriks> _achin: how were you using it?
[03:24:03] <_achin> at part of a enum.  the enum was used in place of "c_int" for a ffi call
[03:24:37] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[03:24:50] <yuriks> ah, if you're directly using it as a parameter type then maybe you need that
[03:25:07] <yuriks> C interfaces usually just have ints though, don't they?
[03:25:34] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[03:25:51] <_achin> what do you mean?
[03:26:29] <yuriks> that most C interfaces I've seen go the router of #define and ints instead of using enums like that
[03:26:32] <cmr> yuriks: sane ones do, yes.
[03:26:50] <_achin> ah.  yes.  yes, the c interface i was binding to used an 'int' for the type
[03:27:05] <_achin> instead of also using an int, i wanted to use a enum, since there were only a few possible values that made semantic sense
[03:29:07] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[03:29:37] <_achin> (seems like something that should be added to the FFI tutorial)
[03:30:55] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[03:31:27] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[03:32:28] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[03:33:35] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[03:33:44] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: It is tiem!)
[03:34:05] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[03:35:53] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[03:40:54] *** Quits: kanru (kanru@moz-99690620.hinet-ip.hinet.net) (Connection reset by peer)
[03:41:00] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[03:41:03] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[03:41:19] *** Quits: canhtak (canhtak@moz-6C22A50C.wl.t.ulaval.ca) (Quit: canhtak)
[03:41:32] *** Joins: kanru (kanru@moz-99690620.hinet-ip.hinet.net)
[03:44:42] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[03:45:27] *** Quits: voxpopuli (fanservice@moz-424BC304.hsd1.pa.comcast.net) (Ping timeout)
[03:46:13] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[03:47:14] *** Joins: canhtak (canhtak@moz-6C22A50C.wl.t.ulaval.ca)
[03:47:54] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[03:48:23] <Gracenotes> Can anyone provide style/idiom comments about my code? http://fpaste.org/69889/01896301/
[03:48:33] <Gracenotes> It's a pretty straightforward port of example #1 from http://www.arcsynthesis.org/gltut/index.html
[03:50:07] <cmr> Gracenotes: example #1 is http://www.arcsynthesis.org/gltut/Basics/Intro%20What%20is%20OpenGL.html#d0e909 ?
[03:51:16] <Gracenotes> this one: http://www.arcsynthesis.org/gltut/Basics/Tutorial%2001.html
[03:51:24] *** Joins: Erik_ (Erik_S@moz-E7E31D21.hlrn.qwest.net)
[03:52:03] <Gracenotes> and the source: https://bitbucket.org/alfonse/gltut/src/1d1479cc7027f1e32c5adff748f3b296f1931d84/Tut%2001%20Hello%20Triangle/tut1.cpp?at=default
[03:52:11] <Gracenotes> (hm.. not sure how to get a HEAD link)
[03:52:48] <Gracenotes> actually, comparing the two, it's even more straightforward than I thought.
[03:54:10] *** Joins: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com)
[03:54:42] *** jorendorff is now known as jorendorff_away
[03:55:30] <wycats> cmr: it seems like the new allocator stuff may help
[03:55:39] <wycats> except that I don't think you will be able to give "the stack" as an allocator
[03:57:15] <cmr> wycats: will help with what, exactly?
[03:57:57] <cmr> Gracenotes: I'm in the process of writing some similar sorts of stuff. https://github.com/cmr/hgl-rs
[03:58:20] <_achin> bindings for rust seems to be a popular project thes days
[03:58:43] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[03:58:48] <cmr> _achin: 'course. we need bindings to actually do things.
[03:59:08] <Gracenotes> ah, that would be a good thing to be able to use.
[03:59:20] *** Quits: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au) (Quit: Leaving.)
[03:59:28] <_achin> plus, it's a great way to get some rust practice, i think
[03:59:28] <cmr> Gracenotes: hgl-rs? :)
[03:59:42] <Gracenotes> high-level bindings in general
[03:59:51] <cmr> yeah
[04:00:14] *** Quits: bmurphy1976 (bmurphy197@moz-ED7F06D5.lightspeed.cicril.sbcglobal.net) (Quit: bmurphy1976)
[04:00:29] <Gracenotes> my main goal at this point is to expand (well, port first) a C++ program I wrote that procedurally generates, renders, and moves around in random caves.
[04:00:54] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[04:00:59] <Gracenotes> but when I wrote it the first time, I didn't use shaders, just did manual texture mapping and matrix-based camera manipulation.
[04:01:10] <cmr> fun!
[04:01:39] <Ralith> Gracenotes: you should implement dual contouring!
[04:02:09] <cmr> Gracenotes: (note that hgl-rs is nowhere near finished, I just pushed to show it)
[04:02:25] <cmr> Ralith: http://faculty.cs.tamu.edu/schaefer/research/dualcontour.pdf ?
[04:02:33] <Ralith> cmr: yeah
[04:03:07] *** Quits: peterdreid (peterdreid@moz-D18776CD.nc.res.rr.com) (Ping timeout)
[04:03:17] *** Quits: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[04:03:21] <Ralith> cmr, Gracenotes: www.cs.rice.edu/~jwarren/papers/techreport02408.pdf‎ for more details
[04:04:08] <Gracenotes> hm, seems cool. I used http://paulbourke.net/geometry/polygonise/#tetra for my thing
[04:04:09] *** Quits: short (Mibbit@moz-85C0C507.hsd1.wa.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:05:36] <Ralith> Gracenotes: this is basically that but with both much greater ability to represent fine detail and built-in LoD and geometry simplification
[04:06:02] <Ralith> also a nice sparse representation
[04:06:26] <Ralith> and cheap mesh updates on CSG operations
[04:07:10] <Gracenotes> hm... nice. so I did also have a notion of dynamic loading/unloading of chunks, which did make uniform detail pretty convenient.
[04:07:12] *** Joins: lkuper (lkuper@6FA5FA9.52E2F3EF.FBBA4BA2.IP)
[04:07:42] <Gracenotes> I'll have to see how boundaries behave with this un
[04:08:01] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[04:08:06] <Ralith> built-in LoD makes it easier to up the view distance without increasing frame cost
[04:08:23] <Ralith> since you can maintain roughly fixed triangles per screen area
[04:08:52] <Ralith> rather than having to simply not render distant geometry
[04:09:23] *** Joins: Cevn (sameer@moz-F316C21E.hr.hr.cox.net)
[04:09:48] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Connection reset by peer)
[04:10:40] <Gracenotes> perhaps it seems a bit more restrictive, in that the dumber polygonization lets you have arbitrary isosurfaces. (so usually perlin noise and variants thereon...)
[04:11:44] <Gracenotes> would be a bit more work to represent, at least for this kind of application
[04:12:20] *** Quits: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com) (Ping timeout)
[04:13:52] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[04:14:25] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[04:15:25] <Gracenotes> at a low enough level most noise algorithms are just interpolation, so maybe not incredibly difficult
[04:15:40] *** Joins: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP)
[04:15:41] *** Quits: AvianFlu (AvianFlu@974D245D.130DDD13.67CD788C.IP) (Input/output error)
[04:17:50] *** Quits: ronny (ronnypfa@moz-E7EE6ABE.uberspace.de) (Ping timeout)
[04:18:54] *** Quits: koomi (koomi@moz-41AD638A.uberspace.de) (Ping timeout)
[04:19:59] <Ralith> Gracenotes: this is an isosurface extraction algorithm...
[04:20:38] *** Joins: gverilla_ (gverilla@moz-1AA5FE19.versanet.de)
[04:20:53] *** Quits: veddan (viktor@moz-C79BC80B.csbnet.se) (Ping timeout)
[04:21:00] <Gracenotes> hm. maybe I missed the starting point of it. how do you get the Hermite data in the first place?
[04:21:35] *** Quits: gverilla__ (gverilla@moz-5EAE171E.versanet.de) (Ping timeout)
[04:22:19] *** Joins: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au)
[04:23:47] *** Joins: ronny (ronnypfa@moz-E7EE6ABE.uberspace.de)
[04:25:22] *** Joins: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com)
[04:25:36] *** Joins: gkostyanikov (gkostyanik@3BDE05C0.2AEE264E.CA6E2165.IP)
[04:27:19] *** jorendorff_away is now known as jorendorff
[04:27:29] *** Quits: ronny (ronnypfa@moz-E7EE6ABE.uberspace.de) (Ping timeout)
[04:29:51] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[04:30:28] *** Joins: dmac` (dmac@moz-94F55C3.hfc.comcastbusiness.net)
[04:31:39] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[04:32:50] *** Quits: gkostyanikov (gkostyanik@3BDE05C0.2AEE264E.CA6E2165.IP) (Ping timeout)
[04:32:57] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[04:33:36] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[04:33:47] *** Joins: gkostyanikov (gkostyanik@3BDE05C0.2AEE264E.CA6E2165.IP)
[04:33:57] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[04:34:21] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[04:34:31] *** Joins: zmthy (zmthy@moz-6DAA26C.cable.telstraclear.net)
[04:34:43] *** Quits: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au) (Quit: Leaving.)
[04:35:38] *** Quits: gkostyanikov (gkostyanik@3BDE05C0.2AEE264E.CA6E2165.IP) (Quit: My iMac has gone to sleep. ZZZzzz…)
[04:35:48] <wycats> cmr: being able to specify an allocator to a function may allow you to write a function that is agnostic to stack, heap or arena allocation
[04:36:09] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[04:36:23] <cmr> wycats: as in, its locals are not on the stack?
[04:36:32] <wycats> cmr: as in
[04:36:36] <wycats> I have a function that returns a T
[04:36:43] <wycats> it would be nice to be able to tell it where to put the T
[04:36:49] <cmr> that's what box(Foo) that_function()
[04:36:49] <wycats> right now you can do it via a special-case hack
[04:36:51] <wycats> if it's just T
[04:36:55] <wycats> right
[04:37:00] <wycats> but it doesn't work for Result<T, U>
[04:37:06] <wycats> I can't get in at just the right moment
[04:37:10] <cmr> hm
[04:37:18] <wycats> and intercept the T and move it somewhere else
[04:37:31] <cmr> ok
[04:37:33] <cmr> but not the U?
[04:37:54] *** Joins: leroux (leroux@moz-421CF1E4.dsl.bell.ca)
[04:39:48] <wycats> maybe the U, maybe not
[04:39:53] <wycats> maybe the U is a 'static str
[04:39:56] <wycats> &'static str
[04:42:00] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[04:43:35] *** Joins: dew (Instantbir@moz-9D36B7B6.static.stls.mo.charter.com)
[04:43:50] *** Joins: veddan (viktor@moz-C79BC80B.csbnet.se)
[04:44:49] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[04:46:03] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[04:47:42] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[04:49:03] <wycats> where is the definition of the enum struct?
[04:49:06] <wycats> discrim etc.
[04:50:08] *** Quits: leroux (leroux@moz-421CF1E4.dsl.bell.ca) (Client exited)
[04:50:14] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[04:55:38] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[04:56:17] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[04:56:42] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[04:57:39] *** Joins: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au)
[04:59:24] *** Quits: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au) (Ping timeout)
[05:01:12] <ChrisMorgan> wycats: in the source
[05:03:29] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[05:03:29] *** ChanServ sets mode: +ao dherman dherman
[05:04:39] <wycats> ChrisMorgan: which source
[05:05:03] <ChrisMorgan> wycats: I don't know precisely where, but I think it's somewhere in middle.
[05:05:07] *** Joins: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au)
[05:05:09] <ChrisMorgan> (src/librustc/middle/)
[05:05:10] <wycats> I couldn't find it
[05:05:12] <wycats> ah
[05:05:13] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[05:05:14] <wycats> lol
[05:05:15] <wycats> "in the middle"
[05:05:17] <wycats> O_o
[05:05:18] <wycats> :P
[05:06:12] <wycats> it would be in an .h file right?
[05:06:55] *** Quits: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au) (Ping timeout)
[05:06:56] *** Joins: leroux (leroux@moz-421CF1E4.dsl.bell.ca)
[05:07:19] <cmr> wait what exactly are you looking for.
[05:07:24] <cmr> structure layout of enums?
[05:07:28] <cmr> or the code that generates them?
[05:07:45] *** Joins: ercxx (ercan@moz-88DD3A7E.dyn.optonline.net)
[05:08:08] <ChrisMorgan> wycats: no .h files here; it's generated at run time into LLVM IR and the precise layout depends upon the enum variants that there are.
[05:09:23] <wycats> cmr: structure layout of enums
[05:09:32] <cmr> wycats: yeah it's only in the IR
[05:09:36] *** Quits: Kxepal (Miranda@moz-33C7CDB3.pppoe.mtu-net.ru) (Ping timeout)
[05:09:37] <wycats> I remember seeing the structure layout of Option<&str> at some point
[05:09:40] <wycats> but now I can't find it
[05:10:35] *** Quits: leroux (leroux@moz-421CF1E4.dsl.bell.ca) (Quit: Leaving)
[05:12:40] <ChrisMorgan> What? error: failed to find an implementation of trait std::clone::Clone for [u64, .. 64] ☹
[05:12:53] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[05:12:59] <cmr> ChrisMorgan: yeah fixed length arrays don't get impls.
[05:12:59] *** Joins: Kxepal (Miranda@moz-77F2B717.pppoe.mtu-net.ru)
[05:13:04] <ChrisMorgan> Why not?
[05:13:11] <cmr> can't parameterize over the length.
[05:13:31] * ChrisMorgan remembered that as soon as he typed "Why not?"
[05:14:18] <ChrisMorgan> Given ~[u64, ..64] where I'm using ~ to keep the size of the containing enum down, is there performance benefit to the `, ..64`?
[05:15:47] *** Joins: sindork (sindork@ABFA98AB.DD47BB48.F7A44A1B.IP)
[05:17:08] <rwt> Really new to rust here. What is the significance of "!". For example, println vs println! ?
[05:17:19] <ChrisMorgan> rwt: it's a macro invocation
[05:17:27] <rwt> ok, thats what I thought
[05:17:47] <rwt> still making my way through the documentation
[05:18:59] *** jorendorff is now known as jorendorff_away
[05:23:18] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[05:26:59] *** Quits: new_one (new_one@B48A3C4C.4C8100B8.B3C0173E.IP) (Client exited)
[05:30:36] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[05:32:23] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[05:32:34] *** Quits: jcmoyer (deadbeef@moz-40035C19.sta.embarqhsd.net) (Ping timeout)
[05:34:36] <ChrisMorgan> Is there a performance or memory efficiency difference between ~[u64, ..64] and a ~[u64] which will always have 64 elements?
[05:34:50] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[05:35:02] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[05:35:03] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[05:35:10] <eevee> the latter would have to eat at least another machine int for the size, right
[05:36:25] <ChrisMorgan> I expect so.
[05:36:25] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[05:36:27] *** Quits: elux (peter@moz-6B45ADE5.dsl.bell.ca) (Quit: Leaving...)
[05:36:40] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[05:36:46] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[05:38:35] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[05:41:25] *** Quits: StarLight (StarLight@moz-D32EDF8E.dynamic.avangarddsl.ru) (Ping timeout)
[05:44:11] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: Leaving)
[05:45:49] *** Joins: StarLight (StarLight@moz-63396A19.dynamic.avangarddsl.ru)
[05:45:59] *** Joins: m_kato (m_kato@moz-C286AD9A.bitcat.net)
[05:46:00] *** Quits: nham (Mibbit@moz-2C6185F8.lightspeed.dybhfl.sbcglobal.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:47:10] *** Joins: blaenk (blaenk@moz-C270A5EA.lsanca.dsl-w.verizon.net)
[05:48:46] *** Joins: aravindavk (aravinda@moz-BD0CADEE.redhat.com)
[05:48:56] *** Quits: lkuper (lkuper@6FA5FA9.52E2F3EF.FBBA4BA2.IP) (Ping timeout)
[05:52:26] *** Quits: orospakr (orospakr@moz-4514BEF2.cpe.teksavvy.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:52:36] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[05:54:26] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[05:54:40] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[05:54:44] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[05:56:14] *** Quits: rwt (quassel@moz-C59DEDD3.dhcp-bl.indiana.edu) (Input/output error)
[05:58:18] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[05:58:45] *** Quits: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[06:00:10] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Ping timeout)
[06:00:19] <dbaupp> ChrisMorgan: yes, ~[u64] has an extra addition for each index
[06:00:29] <dbaupp> and 2 words for size + capacity
[06:01:18] <sfackler> I'd guess that LLVM may have an easier time omitting builds checks for a ~[u64, ..64] as well
[06:01:25] <sfackler> er, bounds checks
[06:05:55] *** Joins: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au)
[06:06:37] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[06:07:45] *** Quits: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au) (Ping timeout)
[06:16:18] *** Quits: Cevn (sameer@moz-F316C21E.hr.hr.cox.net) (Ping timeout)
[06:16:30] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[06:17:27] *** Joins: koomi (koomi@moz-41AD638A.uberspace.de)
[06:18:01] *** Joins: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP)
[06:18:38] *** Joins: brson (brson@moz-5386576F.sd.sd.cox.net)
[06:18:38] *** ChanServ sets mode: +ao brson brson
[06:18:48] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Quit: Leaving.)
[06:19:31] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[06:20:35] *** Joins: mib_cuxwa4 (Mibbit@9C959817.29344E37.E2D7CD47.IP)
[06:20:48] *** Quits: dmac` (dmac@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[06:21:02] *** Quits: mib_cuxwa4 (Mibbit@9C959817.29344E37.E2D7CD47.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:22:57] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Taking a nap.)
[06:23:58] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[06:24:56] *** Quits: Dessimat0r (Dessimat0r@moz-E3008B7A.me) (Ping timeout)
[06:25:00] *** Quits: qmx (qmx@moz-B6DBCD05.qmx.me) (Ping timeout)
[06:25:24] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[06:25:32] *** Quits: mmalecki (maciej@DE8E8A22.9EBA3CD1.D6573861.IP) (Ping timeout)
[06:25:41] *** Quits: jxs (joaoxsouls@1FF12F4F.CDF09DE2.D6573861.IP) (Ping timeout)
[06:25:41] *** Quits: katis (katis@40C8AF65.EFDC2270.EE6E63A5.IP) (Ping timeout)
[06:25:41] *** Joins: qmx (qmx@moz-B6DBCD05.qmx.me)
[06:25:47] *** Quits: veeti (veeti@moz-D6414854.rojekti.fi) (Ping timeout)
[06:25:51] *** Quits: avsej (avsej@D9A610B8.4841F515.FB33447D.IP) (Ping timeout)
[06:25:52] *** Joins: katis (katis@40C8AF65.EFDC2270.EE6E63A5.IP)
[06:26:00] *** Joins: ronny (ronnypfa@moz-E7EE6ABE.uberspace.de)
[06:26:11] *** Quits: ptrr (ptrr@48799E9.1D1EB2D6.85889BB1.IP) (Ping timeout)
[06:28:59] *** Quits: blaenk (blaenk@moz-C270A5EA.lsanca.dsl-w.verizon.net) (Quit: Leaving)
[06:29:31] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Quit: Leaving.)
[06:29:53] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[06:30:00] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[06:30:35] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[06:31:21] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[06:31:24] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[06:31:26] *** Joins: veeti (veeti@moz-D6414854.rojekti.fi)
[06:32:10] *** Joins: Dessimat0r (Dessimat0r@moz-E3008B7A.me)
[06:32:14] *** Joins: jxs (joaoxsouls@1FF12F4F.CDF09DE2.D6573861.IP)
[06:32:16] *** Joins: avsej (avsej@D9A610B8.4841F515.FB33447D.IP)
[06:32:41] *** Joins: mmalecki (maciej@DE8E8A22.9EBA3CD1.D6573861.IP)
[06:33:05] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[06:34:13] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[06:35:37] *** Joins: ptrr (ptrr@48799E9.1D1EB2D6.85889BB1.IP)
[06:39:29] *** Joins: fabiand (fabiand@moz-E71530F5.adsl.alicedsl.de)
[06:42:07] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[06:44:29] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[06:46:18] *** Quits: jsonnull (Thunderbir@E86DD23.582C899D.494A0F8B.IP) (Ping timeout)
[06:48:21] *** Quits: akhosrav (akhosrav@moz-3F7067A0.tukw.qwest.net) (Connection reset by peer)
[06:49:02] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[06:49:37] *** Joins: jsonnull (Thunderbir@E86DD23.582C899D.494A0F8B.IP)
[06:49:51] *** Joins: blaenk (blaenk@moz-C270A5EA.lsanca.dsl-w.verizon.net)
[06:50:06] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[06:53:00] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[06:53:01] *** Joins: benjamin__ (benjamin@moz-93F26ABF.dip0.t-ipconnect.de)
[06:53:24] <carllerche> are there any gotchas around rust logging? I set RUST_LOG=info but nothing seems to get output (i have some output at all levels)
[06:56:13] <Yurume> carllerche: as far as I can tell a file with `fn main() { info!("log"); }` prints `log` when run with `RUST_LOG=info`. what's your code/use case?
[06:56:41] <carllerche> I am compiling a dylib using --staticlib and linking that with C code
[06:57:22] <carllerche> using logging with a rust compiled executable seems to work fine
[06:57:31] <dbaupp> carllerche: you may need -Z gen-crate-map or something
[06:57:35] <dbaupp> acrichto: ^
[06:57:45] <carllerche> dbaupp: got that
[06:59:10] <dbaupp> carllerche: are you initialising a runtime at all?
[06:59:23] <carllerche> dbaupp: no, logging is a runtime feature then?
[07:00:14] <dbaupp> well, the crate map is initialised (to have the log levels for each module) as part of starting a runtime
[07:00:31] <dbaupp> I'd guess there's a way to do it without a runtime, but I'm not really sure.
[07:00:53] <carllerche> ah well
[07:01:00] *** Quits: FreeFull (freefull@moz-4F046D30.as13285.net) (Quit: )
[07:01:47] *** Quits: yuriks (yuriks@8E8458DA.1755AC6C.F6EE4B40.IP) (Ping timeout)
[07:04:27] *** Quits: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com) (Ping timeout)
[07:06:44] *** Joins: dmacvicar (dmacvicar@moz-6C19808.suse.de)
[07:06:47] *** Joins: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au)
[07:06:58] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[07:08:02] *** Joins: Ms2ger (Ms2ger@B7B2FF50.C60A97A6.F9FB0584.IP)
[07:08:32] *** Quits: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au) (Ping timeout)
[07:10:19] *** Joins: b1nd (b1nd@moz-3749DB1E.nhl8.cht.bigpond.net.au)
[07:14:16] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[07:14:58] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[07:16:23] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[07:16:42] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[07:17:01] <Gracenotes> is there a function for dropping everything and just exiting?
[07:17:36] <Gracenotes> a high-level, built-in one, would be pretty nice.
[07:18:03] <Yurume> drop?
[07:18:08] <Yurume> rusti:
[07:18:09] <Yurume> rusti: version
[07:18:10] -rusti- "rustc 0.10-pre (db7b9a3 2014-01-15 02:09:57 -0500)"
[07:18:15] <Yurume> rusti: let x = ~42; drop(x);
[07:18:16] -rusti- ()
[07:18:29] <Yurume> but you would rarely use that
[07:18:41] <Gracenotes> more like exit(0)
[07:19:02] <Yurume> I doubt there is such function
[07:19:16] <Yurume> you can use libc::exit though
[07:19:19] <Yurume> (in the unsafe block)
[07:19:37] <dbaupp> that won't run destructors
[07:20:34] <Yurume> or using fail!() with a topmost task?
[07:22:28] <Gracenotes> I suppose not running destructors is not safe
[07:22:57] <strcat> exiting without running dtors is perfectly safe
[07:22:59] <Gracenotes> it is a straightforward-ish primitive, though... and perhaps destructors could be run atexit?
[07:23:05] <strcat> no, they shouldn't
[07:23:14] <strcat> there are other ways to exit that aren't exit()
[07:23:17] <Gracenotes> that might be a bit... divergent
[07:23:30] <Yurume> Gracenotes: it's safe as long as the operating system takes care of it, which normally does
[07:23:33] <strcat> it would be really slow to manage some list of dtors to run on exit
[07:23:41] <strcat> nothing unsafe about exiting...
[07:23:55] <strcat> as your process can be killed via a signal or run out of memory and die too
[07:24:22] <strcat> if dying by running out of memory was 'unsafe', you'd have to mark everything unsafe
[07:24:26] <Gracenotes> okay, becuase I really don't care about anything in the program if I'm exiting from it.
[07:24:35] *** Quits: sigma (sigma@moz-1C81041B.range86-184.btcentralplus.com) (Client exited)
[07:24:38] <Gracenotes> it seems like exit would be a good use for non-returning functions, though
[07:24:45] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[07:24:48] <Yurume> Gracenotes: you may expect some unwanted side effects like half-written files etc., but if you are concerning about that then you also have to be prepared of OOM situation as well.
[07:25:28] <strcat> well, C stdio is integrated with exit, but rust's isn't ;p
[07:25:39] *** Quits: b1nd (b1nd@moz-3749DB1E.nhl8.cht.bigpond.net.au) (Ping timeout)
[07:26:13] <Gracenotes> of course it's nice to know that libraries won't exit on you, but silly scripts with non-exceptional exit mechanisms... bit trickier
[07:26:28] <strcat> the library can exit by running out of memory
[07:26:49] *** Joins: sigma (sigma@moz-1C81041B.range86-184.btcentralplus.com)
[07:27:00] <Gracenotes> well, that's your fault, as the user of the library ;)
[07:27:04] *** Quits: sigma (sigma@moz-1C81041B.range86-184.btcentralplus.com) (Client exited)
[07:27:17] <strcat> if it allocated 1 byte and died? not really your fault
[07:27:40] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[07:28:34] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[07:29:52] <Gracenotes> it is a bit like the difference between Mount St. Helens erupting and dropping an atomic bomb. One is a global thing no one's to blame for, the other is just anti-social.
[07:30:32] <Yurume> they are really indistinguishable for normal citizens though :)
[07:30:51] <Gracenotes> hm. it's getting a bit late here. perhaps exiting might be a nice addition to std::os, I guess.
[07:31:06] <Yurume> and atexit?
[07:31:23] <Yurume> do atexit { ... }
[07:31:44] <Gracenotes> that is a pretty nice interface.
[07:32:06] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[07:32:30] <Yurume> though you would need an ARC or similar to use that.
[07:32:35] *** Quits: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com) (Quit: csherratt)
[07:32:42] <strcat> Yurume: a proc will work fine
[07:32:57] <strcat> i.e. you can clean up something like a directory you created that way just fine
[07:33:11] <Yurume> hmm, that would be possible
[07:33:16] *** Quits: Ms2ger (Ms2ger@B7B2FF50.C60A97A6.F9FB0584.IP) (Ping timeout)
[07:33:22] <Yurume> but in general cases it is a bit limited
[07:33:56] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[07:34:41] *** Quits: Erik_ (Erik_S@moz-E7E31D21.hlrn.qwest.net) (Ping timeout)
[07:35:35] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[07:35:40] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[07:36:37] *** Quits: alonlevy (alon@moz-AFF00A6D.bb.netvision.net.il) (Ping timeout)
[07:39:09] <o11c> sigh, just unwind for exit
[07:40:44] *** Joins: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP)
[07:41:07] *** Joins: vadimg (vadimg@BCFFDE00.DF0A212.39C00A7A.IP)
[07:48:43] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[07:50:33] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[07:51:06] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[07:51:13] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[07:51:31] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[07:51:33] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Client exited)
[07:51:44] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[07:52:12] *** Joins: Ms2ger (Ms2ger@B7B2FF50.C60A97A6.F9FB0584.IP)
[07:53:33] *** Quits: future_horizons (Mibbit@D43271B6.278C2F23.97BBD552.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:54:06] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[07:54:36] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[07:56:18] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[07:56:53] *** Quits: brson (brson@moz-5386576F.sd.sd.cox.net) (Quit: leaving)
[08:01:05] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[08:07:34] *** Joins: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au)
[08:09:18] *** Quits: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au) (Ping timeout)
[08:10:29] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[08:11:34] *** Joins: z0w0 (zack@moz-87AABEA0.lnse1.woo.bigpond.net.au)
[08:11:48] *** Quits: kvanb (kvanb@moz-2A371643.lnse2.win.bigpond.net.au) (Ping timeout)
[08:13:26] *** Joins: kvanb (kvanb@moz-2FD67D8D.lnse7.win.bigpond.net.au)
[08:13:38] *** Quits: joebobjoe (Dale@moz-4014DDC7.ga.at.cox.net) (Quit: Leaving.)
[08:14:20] *** Joins: b1nd (b1nd@moz-3749DB1E.nhl8.cht.bigpond.net.au)
[08:14:54] *** Joins: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP)
[08:14:56] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[08:16:30] *** Ms2ger is now known as Ms2ger|deputyduty
[08:16:35] <eddyb> story of my life https://xkcd.com/1319/ (Rust is included there)
[08:16:46] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[08:17:35] <Yurume> eddyb: ditto here
[08:17:36] <Yurume> lol
[08:17:50] <Ms2ger|deputyduty> Hmm, he's got an older comic along these lines
[08:17:55] <Ms2ger|deputyduty> He should automate that
[08:18:38] *** flaper87|afk is now known as flaper87
[08:18:46] *** Joins: Ferreus (ferreus@moz-13287B95.dip0.t-ipconnect.de)
[08:18:53] <Ms2ger|deputyduty> http://xkcd.com/1205/ wasn't the one I was thinking of
[08:18:57] <eddyb> wait, isn't that the story of the human race?
[08:19:16] * eddyb feels slightly better now
[08:20:53] *** Quits: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[08:22:15] *** Quits: eevee (eevee@moz-8DEBFFC9.lv.lv.cox.net) (Ping timeout)
[08:22:31] *** Joins: olem (olem@moz-D8B40BE5.fbx.proxad.net)
[08:25:21] *** Joins: eevee (eevee@moz-8DEBFFC9.lv.lv.cox.net)
[08:25:28] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[08:25:30] <carllerche> how does one create a ~[u8] of an arbitrary length (vs. capacity)? I can't find anything :(
[08:25:49] <strcat> push it it an arbitrary amount
[08:25:53] <strcat> or use from_elem/from_fn
[08:26:34] *** Joins: cornelius (Mibbit@moz-90DAD07C.rivrw10.nsw.optusnet.com.au)
[08:26:40] <cornelius> hi
[08:27:28] <cornelius> now that we can load macros that weren't built in to the compiler
[08:27:33] *** Joins: michaeljdennis (michaeljde@moz-D1393DB0.socal.res.rr.com)
[08:27:48] <cornelius> how can I use select! from std::comm::select?
[08:28:20] *** Joins: Florob (Florob@moz-39532932.de)
[08:28:30] <cmr> Pygments update merged: https://bitbucket.org/birkenfeld/pygments-main/pull-request/270/rust-lexer-update-to-09
[08:28:35] <cmr> Now to wait a billion years for github to update.
[08:28:38] <cornelius> the pull request https://github.com/mozilla/rust/pull/11151 seems to say that I should just put a #[phase(syntax)] before an extern mod
[08:28:45] *** Joins: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au)
[08:29:02] <eddyb> cornelius: that's for procedural macros
[08:29:04] <cornelius> but I don't think I can extern mod std::comm::select
[08:29:18] <eddyb> cornelius: where you load a module containing code to transform the AST
[08:29:22] <cmr> eddyb: no
[08:29:31] <cmr> eddyb: it's also normal macros.
[08:29:37] <eddyb> cmr: wait, what?
[08:29:39] <cmr> cornelius: select!() isn't exported right now.
[08:29:42] <cmr> eddyb: yes, it was also added.
[08:29:51] <eddyb> with #[phase(syntax)]?
[08:29:56] <cmr> yes.
[08:30:04] <cmr> you'll notice the example in the PR shows both.
[08:30:07] <eddyb> hah, I thought they were exported from crates now
[08:30:35] <cornelius> ah, okay, so when it is exported, which I just put a #[phase(syntax)] on the extern mod std? or will I call the macro with std::comm::select! ?
[08:30:35] <cmr> cornelius: once it is, *all* the macros will probably be exported from std, and #[phase(syntax)] will be injected automatically.
[08:30:43] <eddyb> cmr: that's... curious
[08:30:47] <cmr> it'd just be select!()
[08:30:48] <Yurume> #[phase(syntax)] extern mod std;
[08:30:50] <cmr> macros still don't have scope.
[08:31:16] <cornelius> okay, cheers
[08:31:26] <eddyb> I thought #[phase(syntax)] compiled and loaded the module before compiling the rest of the code
[08:31:35] <cmr> compiled? no.
[08:31:44] *** Quits: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au) (Quit: Leaving.)
[08:32:03] <Yurume> the crate should have been compiled before the syntax phase
[08:32:22] <eddyb> cmr: is the module also included as normal?
[08:32:33] <cmr> eddyb: crate, not module.
[08:32:37] *** Quits: aravindavk (aravinda@moz-BD0CADEE.redhat.com) (Ping timeout)
[08:32:49] <eddyb> err yes. I meant the extern mod import of the crate
[08:32:52] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[08:33:03] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[08:33:27] *** Quits: vadimg (vadimg@BCFFDE00.DF0A212.39C00A7A.IP) (Ping timeout)
[08:34:38] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[08:34:47] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[08:34:48] <eddyb> cmr: my mental model is clouded by the fact that I've liked the idea of double compilation to include procedural macros in the same crate with the rest of the code
[08:35:59] <Zr40> I've got a warning about an enum being never used, but I am using that enum. Am I misunderstanding this warning or is this a compiler bug?
[08:36:45] <cmr> Zr40: potential bug, testcase?
[08:36:46] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Client exited)
[08:36:48] <eddyb> Zr40: is the code using the enum being used?
[08:36:54] <eddyb> Zr40: dead code propagates ;)
[08:37:05] <Zr40> eddyb: yes, and this is the only warning
[08:37:28] <eddyb> if you're writing a library, you could be missing pub (I've done that a few times, before actually using it as a library)
[08:38:16] *** Joins: andrew-d_w (andrew-d_w@4CCE6E0C.339B431B.1E537B93.IP)
[08:38:32] *** Quits: andrew-d_w (andrew-d_w@4CCE6E0C.339B431B.1E537B93.IP) (Input/output error)
[08:38:47] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[08:38:55] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[08:40:30] *** Joins: patrickkim2 (Mibbit@4244B1FB.102F4801.301BE678.IP)
[08:40:44] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[08:41:10] *** Joins: mouse_ (mouse@moz-373942D2.dhcp.yndx.net)
[08:41:31] *** Quits: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca) (Quit: Leaving.)
[08:42:50] <Zr40> testcase: https://gist.github.com/zr40/8516878
[08:43:35] <cmr> Zr40: it's telling the truth.
[08:43:42] *** Quits: cornelius (Mibbit@moz-90DAD07C.rivrw10.nsw.optusnet.com.au) (Quit: http://www.mibbit.com ajax IRC Client)
[08:43:42] <cmr> you have `mod the_enum;`
[08:43:43] <eddyb> Zr40: you have double module insertion
[08:43:44] <cmr> twice.
[08:43:55] <eddyb> the_enum has two instances in two places
[08:44:17] <eddyb> we should lint against that by default :/
[08:44:59] <cmr> we really should
[08:45:05] <cmr> and it should be deny by default.
[08:45:08] <eddyb> because other languages have invariants about it - require(foo) === require(foo) for example
[08:45:25] <eddyb> and intuition is biting people
[08:45:43] <Zr40> without mod the_enum;, the_enum::Test fails to resolve
[08:46:33] <eddyb> Zr40: "use" is absolute in the module tree
[08:46:49] <cmr> http://static.rust-lang.org/doc/master/tutorial.html#crates-and-the-module-system
[08:47:13] <eddyb> if you have the_enum in some_module, its path is some_module::the_enum
[08:48:40] <Zr40> eddyb: `use the_enum::Foo;` won't compile without `mod the_enum;` following
[08:49:02] *** Joins: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au)
[08:49:36] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:49:44] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[08:50:13] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[08:50:13] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Ping timeout)
[08:50:14] <eddyb> Zr40: update the gist, so I know where you left mod the_enum
[08:51:23] *** Joins: aravindavk (aravinda@moz-BD0CADEE.redhat.com)
[08:51:27] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[08:51:34] <Zr40> eddyb: done
[08:52:15] <cmr> Zr40: you still need `mod the_enum;` in main.rs
[08:52:17] <eddyb> Zr40: heh. we said that you have mod the_enum twice. as in, it should be only once
[08:52:33] <eddyb> cmr: or in some_module.rs, that's why I asked to see where he left it
[08:52:43] <eddyb> but not in *both* places
[08:52:55] <cmr> please don't advocate people using `mod` outside of the crate root or a mod.rs
[08:53:09] <cmr> it's more confusing in the long run and runs against how it's meant to be used.
[08:53:31] *** Quits: franckverrot (Franck_Ver@C3033BF6.B86F1645.C91367C6.IP) (Ping timeout)
[08:53:43] *** Joins: franckverrot (Franck_Ver@C3033BF6.B86F1645.C91367C6.IP)
[08:53:49] <eddyb> hmm, true, but I couldn't tell how the module true actually looks
[08:54:02] <eddyb> some_module.rs could be some_module/mod.rs
[08:54:28] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[08:54:42] <eddyb> *module tree
[08:55:02] *** Quits: michaeljdennis (michaeljde@moz-D1393DB0.socal.res.rr.com) (Quit: )
[08:55:46] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[08:55:55] <Zr40> in my case it's the former
[08:55:56] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[08:56:05] *** Quits: patrickkim2 (Mibbit@4244B1FB.102F4801.301BE678.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:56:30] *** Joins: pilf (pilf@8FA95888.1A994CBC.4B228AD7.IP)
[08:56:36] <eddyb> Zr40: oh, ok, in that case your code should just work if you have mod the_enum; in main.rs
[08:57:07] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[08:57:08] <eddyb> Zr40: you might need "pub mod the_enum;" to make it visible to other modules
[08:57:56] <Yurume> hmm, wait, is this an intended behavior that the following crate works: a.rs `mod b;` b.rs `mod c;` c.rs `fn foo() {}`?
[08:58:17] <cmr> Yurume: yes.
[08:58:21] <Yurume> (i.e. submodule can go the same directory as parent modules and grandparent and so on?)
[08:58:35] <Yurume> I didn't think that possibility! 8)
[08:58:50] <dbaupp> cmr: nice work with pygments
[08:58:57] <cmr> dbaupp: eh
[08:59:03] <cmr> I'm now tempted to write a full lexer.
[08:59:10] <cmr> but pygments doesn't have enough token types >:D
[09:00:18] <eddyb> pygments is transpilable to JS, last I checked. it is more flexible than kate-syntax highlighting files, though less portable
[09:00:36] <dbaupp> cmr: does your addition support raw strings?
[09:00:52] <eddyb> I don't know of any JS highlighter as powerful as pygments - for kate-syntax I have my own thing
[09:00:56] <cmr> dbaupp: yes.
[09:01:01] <dbaupp> !
[09:01:04] <flaper87> cmr: what are you doing with pygments?
[09:01:05] <dbaupp> that's cool
[09:01:07] * flaper87 is curious
[09:01:10] <cmr> flaper87: I updated the lexer.
[09:02:42] <dbaupp> it will mean that github's highlighting is up-to-date
[09:03:08] <dbaupp> (when they update...)
[09:03:10] <eddyb> dbaupp: pygments and github?
[09:04:24] <dbaupp> eddyb: yes?
[09:04:40] <eddyb> I thought they used some Ruby thing
[09:05:19] <cmr> they do.
[09:05:29] <cmr> it's a wrapper that calls into a daemon running pygments on inputs
[09:05:37] <eddyb> oh, lol
[09:05:48] *** Joins: akhosrav (akhosrav@moz-3F7067A0.tukw.qwest.net)
[09:06:28] *** Quits: canhtak (canhtak@moz-6C22A50C.wl.t.ulaval.ca) (Quit: canhtak)
[09:07:52] <flaper87> o_0 didn't know that!
[09:08:31] <ChrisMorgan> cmr: re. Pygments, you have [A-Za-z_] in various places where that is far too restrictive—for starters 0-9 is valid (e.g. in lifetimes), but that still doesn't allow Unicode identifiers and things ☹. Also does that support nested comments?
[09:09:21] *** Quits: Sharp (Sharp@moz-EEC85237.hsd1.ca.comcast.net) (Quit: Sharp)
[09:09:58] <cmr> ChrisMorgan: nested comments yes.
[09:10:18] *** Quits: b1nd (b1nd@moz-3749DB1E.nhl8.cht.bigpond.net.au) (Ping timeout)
[09:10:27] <cmr> ChrisMorgan: patches accepted :p
[09:10:56] <ChrisMorgan> cmr: Pygments was on my list of things that I should get round to updating if someone else doesn't first—well, someone did. Thanks!
[09:10:57] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[09:11:18] <cmr> rusti: let x: &'ab213 = &2;
[09:11:23] -rusti- pastebinned 6 lines of output: http://ix.io/a0p
[09:11:35] <cmr> rusti: let x: &'ab213 int = &2;
[09:11:39] -rusti- pastebinned 7 lines of output: http://ix.io/a0q
[09:11:49] <cmr> apparently it is valid!
[09:12:10] <Ms2ger|deputyduty> Oh, I thought 'a was the only valid lifetime :)
[09:14:08] <dbaupp> Ms2ger|deputyduty: 'r too
[09:14:09] <Yurume> '___
[09:14:09] <ChrisMorgan> cmr: sure, any identifier is valid for lifetimes
[09:14:09] <dbaupp> (and static)
[09:14:11] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[09:14:21] <Ralith> Gracenotes: woops, sorry, got distracted
[09:14:35] *** Joins: benjamin_ (benjamin@moz-F16AEFE7.dip0.t-ipconnect.de)
[09:14:48] <Ms2ger|deputyduty> fn foo(a: &'_ A, b: &'__ B, c: &'___ C) -> &'____ D {}
[09:14:56] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[09:15:01] *** Quits: pilf (pilf@8FA95888.1A994CBC.4B228AD7.IP) (Connection reset by peer)
[09:15:03] <Ms2ger|deputyduty> For Readability
[09:15:06] <Ralith> Gracenotes: same place you get your sign data, presumably
[09:15:08] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[09:15:17] *** Quits: benjamin__ (benjamin@moz-93F26ABF.dip0.t-ipconnect.de) (Ping timeout)
[09:15:23] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[09:15:27] <TheHydroImpulse> Is 'static equivalent to 'a?
[09:15:35] <dbaupp> no
[09:15:43] <ChrisMorgan> TheHydroImpulse: no, 'static is a special lifetime meaning the duration of the task.
[09:15:48] <cmr> not task, program.
[09:15:49] <dbaupp> ChrisMorgan: program
[09:15:50] <ChrisMorgan> (Task or process?)
[09:15:52] <cmr> process.
[09:15:53] <dbaupp> not just task
[09:15:55] <cmr> it's the infinite lifetime.
[09:16:01] * ChrisMorgan isn't quite sure why he said task then
[09:16:18] <TheHydroImpulse> haha. So what is a'?
[09:16:37] <Ms2ger|deputyduty> 'a is just some lifetime that you gave a name
[09:17:04] *** Joins: pilf (pilf@8FA95888.1A994CBC.4B228AD7.IP)
[09:17:08] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[09:17:32] <TheHydroImpulse> ahh ok. Thanks
[09:18:57] *** Joins: b1nd (b1nd@moz-3749DB1E.nhl8.cht.bigpond.net.au)
[09:22:25] *** Joins: andrew-d_w (andrew-d_w@4CCE6E0C.339B431B.1E537B93.IP)
[09:22:37] *** Quits: andrew-d_w (andrew-d_w@4CCE6E0C.339B431B.1E537B93.IP) (Input/output error)
[09:23:01] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[09:24:12] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[09:30:39] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[09:32:14] *** Quits: smw (smw@moz-26FB3BC7.socal.res.rr.com) (Client exited)
[09:32:50] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[09:33:11] <cmr> ChrisMorgan: the regex isn't actually wrong
[09:33:17] <cmr> And I remember why now, looking at it.
[09:33:28] <cmr> [A-Za-z_] is the first char
[09:33:33] <cmr> \w* is that with the numerals.
[09:33:40] * ChrisMorgan wasn't looking closely enough
[09:33:51] <ChrisMorgan> My Unicode identifiers point still holds, anyway.
[09:33:55] * ChrisMorgan salvages his honour
[09:34:00] <cmr> we don't support unicode identifiers :)
[09:34:04] <cmr> feature flags don't count.
[09:34:14] <ChrisMorgan> Aww.
[09:35:57] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[09:36:08] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[09:36:48] *** Quits: aravindavk (aravinda@moz-BD0CADEE.redhat.com) (Ping timeout)
[09:39:17] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[09:39:36] *** Joins: victorporof (victorporo@D3766C4.A4BCC9AB.79933D60.IP)
[09:44:19] *** Quits: KindOne (KindOne@moz-DCBC5EC4.dynamic.ip.windstream.net) (Ping timeout)
[09:48:10] *** Joins: KindOne (KindOne@moz-DCBC5EC4.dynamic.ip.windstream.net)
[09:49:48] *** Joins: nkoep (nik@moz-A941E87E.pool.mediaways.net)
[09:50:03] *** Joins: jackneill (jackneill@moz-E9D68037.pool.digikabel.hu)
[09:54:30] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[09:58:34] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Quit: Leaving.)
[09:59:00] <ChrisMorgan> DeepClone.
[10:01:29] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[10:02:12] <cmr> ChrisMorgan: yes?
[10:02:29] <ChrisMorgan> Still investigating it, but it seems to me that it's obsolete and not actually doing anything—by its description, things like the contents of an Rc would be cloned when deep cloned, but it doesn't look like they do.
[10:03:01] <ChrisMorgan> Actually, I'm wrong, Rc does deep clone.
[10:03:04] *** Joins: rca (rcatolino@moz-10E18C17.adsl.proxad.net)
[10:03:21] <strcat> Clone is the minimum work to produce T from &T
[10:03:32] <strcat> DeepClone actually produces an independent type by deep copying through Rc/Gc and similar types
[10:03:43] <strcat> independent value*
[10:04:29] *** Joins: andre (andre@moz-CB3D10F7.dynamic.adsl.gvt.net.br)
[10:05:24] *** Quits: b1nd (b1nd@moz-3749DB1E.nhl8.cht.bigpond.net.au) (Ping timeout)
[10:12:48] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[10:13:32] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Quit: Leaving)
[10:14:34] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[10:15:10] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[10:15:54] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[10:16:19] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[10:16:41] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[10:17:47] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[10:19:49] *** Joins: moostik (Icedove@6181009C.10715965.BCDF592F.IP)
[10:19:59] *** Joins: Heather (Heather@19663F6.F53BAACC.9C17E900.IP)
[10:20:23] *** Quits: franckverrot (Franck_Ver@C3033BF6.B86F1645.C91367C6.IP) (Ping timeout)
[10:20:23] <Heather> expected `&'static str` but found `&str` :(
[10:20:43] *** Joins: franckverrot (Franck_Ver@C3033BF6.B86F1645.C91367C6.IP)
[10:20:59] <Heather> why? I pass it to args : &[&str]
[10:21:04] *** Quits: benjamin_ (benjamin@moz-F16AEFE7.dip0.t-ipconnect.de) (Ping timeout)
[10:22:22] <pnkfelix> Heather: can you provide a more concrete example?  (e.g. a gist of a small source file?)
[10:23:02] *** Quits: lennart (lennart@moz-DE70D6F.stanford.edu) (Ping timeout)
[10:23:48] *** Joins: autra (augustin@A14DAE84.7F753DD1.EE2CA32B.IP)
[10:23:56] <Heather> pnkfelix: hi!
[10:24:31] <Heather> pnkfelix: pub fn e(cmd: &str, args : &[&str]) {  &&& e("git", [&"pull", "--rebase", "origin", branch]);
[10:24:57] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[10:25:14] <Heather> pnkfelix: &"pull" is static ?
[10:25:38] <eddyb> rusti: [&"foo", "bar"]
[10:25:43] -rusti- ["foo", "bar"]
[10:25:59] <Heather> eddyb: rusti updated?
[10:26:05] <eddyb> rusti: version
[10:26:07] -rusti- "rustc 0.10-pre (db7b9a3 2014-01-15 02:09:57 -0500)"
[10:26:17] <Heather> eddyb: to old
[10:26:33] <eddyb> 5 days ago, did &"foo" change since then?
[10:26:47] <Heather> yes ) eddyb: feel free to drop it and mark outdated )
[10:27:07] <eddyb> Heather: anyways, you shouldn't put &"foo" and "bar" in the same vector, it's asking for trouble
[10:27:31] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[10:27:50] <eddyb> rusti: print!("{:?} ", ["foo", ~"bar".as_slice()]);
[10:27:53] -rusti- pastebinned 11 lines of output: http://ix.io/a0t
[10:27:55] <Heather> eddyb: I use &"foo" to convert "bar" to '&str
[10:28:37] <eddyb> Heather: &'a str should include any &'lt str with 'lt >= 'a
[10:28:49] <eddyb> rusti: print!("{:?} ", ["foo", (~"bar").as_slice()]);
[10:28:52] -rusti- pastebinned 21 lines of output: http://ix.io/a0u
[10:29:09] <eddyb> rusti: let s = ~"bar"; print!("{:?} ", ["foo", s.as_slice()]);
[10:29:10] -rusti- ["foo", "bar"] ()
[10:29:28] *** Joins: b1nd (b1nd@moz-3749DB1E.nhl8.cht.bigpond.net.au)
[10:29:30] <Heather> eddyb: eh... what do you mean with inclue any &'lt
[10:29:58] <eddyb> Heather: see above. I'm constructing a [&'a str] from &'static str and &'a str (same 'a)
[10:30:09] <Heather> rusti: let a = "hi"; [&"foo", &a]
[10:30:11] -rusti- pastebinned 7 lines of output: http://ix.io/a0v
[10:30:33] <Heather> rusti: let a = "hi"; [&"foo", a]
[10:30:34] <eddyb> that's &'static str and &&'static str
[10:30:34] -rusti- ["foo", "hi"]
[10:30:35] *** Joins: killerswan (kevin.cant@641A2B33.2E0ACDEE.4B50E195.IP)
[10:30:41] <eddyb> and that's both &'static str
[10:31:28] <eddyb> (you can't put strings on the stack, at least not in this rusti version)
[10:32:06] <eddyb> I didn't realize &"foo" became something else and I'm surprised (if) it isn't &&'static str
[10:32:25] <Heather> rusti: let a = &"hi"; [&"foo", a]
[10:32:26] -rusti- ["foo", "hi"]
[10:32:44] <strcat> eddyb: imo &"foo" being &str is a bug
[10:32:48] <kimundi> "foo" and &"foo" are both exactly the same
[10:33:03] <Heather> rusti: let a = &"hi"; ["foo", a]
[10:33:04] -rusti- ["foo", "hi"]
[10:33:17] <Heather> rusti: let a = &"hi"; [&"foo", "bar", a]
[10:33:18] -rusti- ["foo", "bar", "hi"]
[10:33:23] <Heather> rusti: let a = &"hi"; ["foo", "bar", a]
[10:33:23] -rusti- ["foo", "bar", "hi"]
[10:33:28] <Zr40> how long does it normally take to build rust on a reasonable system?
[10:33:41] *** Quits: killerswan (kevin.cant@641A2B33.2E0ACDEE.4B50E195.IP) (Ping timeout)
[10:33:42] <Heather> Zr40: reasonable system?
[10:33:43] <pnkfelix> Zr40: define reasonable?
[10:33:48] <eddyb> Zr40: depends how far you go
[10:33:49] <kimundi> Zr40: Depends. IS it also building llvm?
[10:34:01] <cmr> with llvm, 30-40 minutes isn't out of the norm...
[10:34:10] <Heather> Zr40: Depends bootstrap and other configure options
[10:34:12] <strcat> Zr40: a while to build LLVM (20-30 min?) and then 15 minutes to build rust
[10:34:12] <Florob> About 5h on a system reasonable for normal web browsing and office work :P
[10:34:20] <strcat> Florob: wat?
[10:34:35] <Heather> Florob: much faster for me...
[10:34:36] <strcat> if you don't have enough memory to build and are constantly swapping maybe
[10:34:44] <pnkfelix> strcat: you don't need much resources to do web browsing and office work
[10:34:51] <pnkfelix> strcat: so Florob's comment makes sense to me.
[10:34:55] <strcat> > don't need much resources to do web browsing
[10:34:58] * strcat disagrees
[10:35:02] <Zr40> I'm building on a 2.5 GHz i7 with 8 GB memory
[10:35:06] <strcat> browsers eat so much memory these days
[10:35:18] <Heather> strcat: addons
[10:35:23] <strcat> without addons
[10:35:30] <Heather> strcat: well 50mb
[10:35:52] <eddyb> 200MB for youtube subscriptions and it can go up if you let it idle
[10:35:56] <strcat> open gmail, look at how much memory it uses in about:memory in ffx
[10:35:58] <strcat> and it leaks over time
[10:36:03] <Zr40> eddyb: how far I go?
[10:36:13] <eddyb> Zr40: stage1 or stage2
[10:36:16] <strcat> and that's an optimized 'web app' ;p
[10:36:20] <Heather> strcat:  what browser do you use?
[10:36:27] *** Quits: moostik (Icedove@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[10:36:34] <Heather> okay... much offtopic already
[10:36:39] <Zr40> eddyb: er, whichever make does
[10:37:25] <eddyb> Zr40: if you recompile often, you'd want to go only to stage1
[10:37:28] <Heather> well anyways this rusti can't reproduce my error since it's outdated
[10:37:31] <eddyb> since stage2 is double the cost
[10:38:06] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[10:38:18] <Florob> Did not expect that to be so controversial. But yes, I guess I'm still in a people don't use lots of web apps that eat through memory mindset.
[10:38:55] <cmr> facebook, imgur, twitter, etc are all hogs.
[10:39:05] <eddyb> Heather: fn main(){let s = ~"bar"; let v = ["foo", s.as_slice()];} // does that work?
[10:39:08] <cmr> all the stuff "Kids these days" will be using :p
[10:39:31] * ChrisMorgan doesn't use Facebook but observed Facebook using over 1GB in Chrome on his brother's laptop. That's absurd.
[10:39:33] <pnkfelix> to me "browse the web" doesn't mean "hang out on FB and/or gmail"
[10:39:41] <eddyb> Florob: a mailing list tab goes over 50MB
[10:39:42] <kimundi> rustilite: fn main(){let s = ~"bar"; let v = ["foo", s.as_slice()];}
[10:39:42] -rustilite- <anon>:1:31: 1:32 warning: unused variable: `v`, #[warn(unused_variable)] on by default
[10:39:42] -rustilite- <anon>:1 fn main(){let s = ~"bar"; let v = ["foo", s.as_slice()];}
[10:39:43] -rustilite-                                        ^
[10:39:44] <pnkfelix> but I recognize that it does mean that to many
[10:39:49] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[10:40:21] <Ms2ger|deputyduty> pnkfelix, you hang out on myspace instead? :)
[10:40:26] <strcat> pnkfelix: *shrug* ;p, browse the web to me means a browser sitting there with a few persistent tabs and a churn of temporary ones
[10:40:43] <strcat> and web pages love memory and polling
[10:40:47] <eddyb> I have the "activity manger" from chrome open and always-on-top so I can kill tab process
[10:41:00] <eddyb> *processes
[10:41:08] <eddyb> whenever I need to recompile rust
[10:41:09] *** Joins: mankyKitty (Instantbir@moz-9B898D95.enst-bretagne.fr)
[10:42:48] <mankyKitty> Greetings :)
[10:43:04] * strcat needs a time machine to make gopher win against http/html
[10:43:30] *** Quits: b1nd (b1nd@moz-3749DB1E.nhl8.cht.bigpond.net.au) (Ping timeout)
[10:44:06] *** Joins: ricepuddin (graham@moz-D0A31D2B.wlan.ic.ac.uk)
[10:45:20] <Florob> eddyb, honestly I'd expect the CPU to be more important for the compile time anyway. As long as you can fit the compile + whatever you have running into your RAM, you're fine.
[10:45:31] *** Joins: b1nd (b1nd@moz-3749DB1E.nhl8.cht.bigpond.net.au)
[10:45:40] <eddyb> Florob: 3GB of RAM, rustc uses 1.2GB
[10:46:09] <strcat> well, 1.2GiB of RES...
[10:46:11] <eddyb> I can easily reach 2.5GB with chrome open, linux doesn't let me go past 2.7GB without swap hell
[10:46:21] <strcat> it has a lot of virtual memory churn causing TLB misses, etc.
[10:49:29] <Heather> eddyb: not sure
[10:49:49] <eddyb> Heather: does it give an error? it sounds like a bug if it does
[10:50:01] <Heather> eddyb: I think mys situation is different
[10:50:06] <eddyb> Heather: just test what I've said
[10:50:21] <Heather> eddyb:  fn main(){let s = ~"bar"; let v = ["foo", s.as_slice()];}  ?
[10:50:30] <eddyb> Heather: yes, does it work with your version?
[10:52:01] *** Joins: oberstet (quassel@moz-796410BC.dynamic.mnet-online.de)
[10:52:02] <Heather> eddyb: it works
[10:52:19] <Heather> no error there
[10:52:23] <Heather> only warning
[10:52:25] *** Quits: ricepuddin (graham@moz-D0A31D2B.wlan.ic.ac.uk) (Ping timeout)
[10:52:38] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[10:52:40] *** Quits: ecl3ctic (Mibbit@moz-E1FAD64C.wzfv1.vic.bigpond.net.au) (Quit: http://www.mibbit.com ajax IRC Client)
[10:53:37] *** Joins: fyolnish (fyolnish@moz-38986C0F.uqwimax.jp)
[10:54:25] <eddyb> Heather: okay then, try e("git", ["pull", "--rebase", "origin", branch]);
[10:55:23] *** Quits: fyolnish (fyolnish@moz-38986C0F.uqwimax.jp) (Ping timeout)
[10:55:51] *** kimundi is now known as zz_kimundi
[10:57:54] <Heather> eddyb: fn foo(args : &[&str]) { ; }
[10:57:54] <Heather> fn bar(z : &str) { foo([&"foo", "bar", z]); }
[10:57:55] <Heather> fn main(){bar("z");}
[10:58:39] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[10:59:25] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[10:59:58] <eddyb> Heather: why do you want &"foo" there?
[11:00:16] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Client exited)
[11:00:22] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[11:00:26] <eddyb> Heather: it should work with "foo" instead of &"foo"
[11:00:38] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[11:00:43] *** Quits: blaenk (blaenk@moz-C270A5EA.lsanca.dsl-w.verizon.net) (Quit: Leaving)
[11:01:23] *** Joins: skade (skade@moz-46E15697.dip0.t-ipconnect.de)
[11:01:42] <Heather> eddyb: because I've got it in output of another function
[11:01:51] <Heather> eddyb:  that's  long story...
[11:01:58] *** Joins: heftig (heftig@moz-D746319F.unitymedia.biz)
[11:02:20] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Ping timeout)
[11:02:21] <eddyb> Heather: explain it better. I think you're creating a &&'static str there
[11:02:21] *** Joins: netoarmando (textual@moz-9CD6252B.dsl.telesp.net.br)
[11:02:33] <Heather> eddyb:  it doesn't work with "foo" either
[11:02:44] <eddyb> Heather: okay, that's a bug. what's the error?
[11:03:00] <Heather> eddyb: exactly the same
[11:03:04] <Heather> eddyb:  mismatched types: expected `&'static str` but found `&str` (lifetime mismatch)
[11:03:44] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[11:04:06] <Heather> eddyb: I used &"foo" to descript that it's &str and not static because else way it used to think that I pass wrong args
[11:04:18] <Heather> eddyb: not sure if that works different now (looks like)
[11:04:31] <eddyb> Heather: fn main(){let () = &"foo";} what's the error?
[11:04:53] <eddyb> I didn't hear anything about placing strings on stack, so it might as well be &&'static str
[11:05:11] <Heather> eddyb:  mismatched types: expected `&'static str` but found `()` (expected &'static str but found ())
[11:05:18] *** Quits: mankyKitty (Instantbir@moz-9B898D95.enst-bretagne.fr) (Quit: mankyKitty)
[11:05:39] <eddyb> Heather: lol. so &"foo" didn't change?
[11:05:48] <eddyb> because that's what the error is saying
[11:06:12] <Heather> not sure....
[11:06:12] *** zz_kimundi is now known as kimundi
[11:06:29] <Heather> &"foo" is &str when "foo" is &'static str
[11:06:34] <Heather> at least it used to be so
[11:06:50] <eddyb> Heather: &'static str can be used where &str can be
[11:07:13] <Heather> eddyb: no
[11:07:19] <eddyb> Heather: using the wrong terminology, &'static str coerces to any &'a str
[11:07:40] <eddyb> it's not coercion, it's lifetime subsetting and whatnot, I don't know the right terms myself
[11:07:43] <Heather> eddyb: it can say to array that array's type is static str and then I can't pass other str there...
[11:08:00] <eddyb> Heather: I didn't say the other way around
[11:08:09] <eddyb> I said &'static str can be used in place of any &str
[11:08:31] <Heather> eddyb: well .... it's right and wrong
[11:08:34] <eddyb> rusti: fn foo(args: &[&str]) {} fn bar(z: &str) { foo([&"foo", "bar", z]); } bar("z");\
[11:08:36] -rusti- pastebinned 6 lines of output: http://ix.io/a0y
[11:08:37] <eddyb> rusti: fn foo(args: &[&str]) {} fn bar(z: &str) { foo([&"foo", "bar", z]); } bar("z");
[11:08:38] -rusti- <anon>:10:16: 10:20 warning: unused variable: `args`, #[warn(unused_variable)] on by default
[11:08:38] -rusti- <anon>:10         fn foo(args: &[&str]) {} fn bar(z: &str) { foo([&"foo", "bar", z]); } bar("z");
[11:08:38] -rusti-                          ^~~~
[11:08:38] -rusti- ()
[11:08:48] <eddyb> rusti: fn foo(args: &[&str]) {} fn bar(z: &str) { foo(["foo", "bar", z]); } bar("z");
[11:08:51] -rusti- pastebinned 11 lines of output: http://ix.io/a0z
[11:09:05] <eddyb> Heather: mkay, this is a fixed vector bug
[11:09:09] *** Quits: olem (olem@moz-D8B40BE5.fbx.proxad.net) (Client exited)
[11:09:10] <eddyb> rusti: fn foo(args: &[&str]) {} fn bar(z: &str) { foo(&["foo", "bar", z]); } bar("z");
[11:09:12] -rusti- pastebinned 11 lines of output: http://ix.io/a0A
[11:09:26] <eddyb> Heather: we have a similar one when coercing to traits
[11:09:30] *** Joins: olem (olem@moz-D8B40BE5.fbx.proxad.net)
[11:09:51] <eddyb> I'm surprised &"foo" could be used to erase the lifetime, that's silly to me
[11:10:18] *** Joins: andrew-d_w (andrew-d_w@4CCE6E0C.339B431B.1E537B93.IP)
[11:10:23] <eddyb> rusti: fn foo(args: &[&str]) {} fn bar(z: &str) { foo(&["foo", z]); } bar("z");
[11:10:25] -rusti- pastebinned 11 lines of output: http://ix.io/a0B
[11:10:28] *** Quits: andrew-d_w (andrew-d_w@4CCE6E0C.339B431B.1E537B93.IP) (Input/output error)
[11:10:51] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[11:10:54] <eddyb> rusti: fn foo(args: &[&str]) {} fn bar() {let z = ~"foo"; foo(["foo", z.as_slice()]); } bar()
[11:10:55] -rusti- <anon>:10:16: 10:20 warning: unused variable: `args`, #[warn(unused_variable)] on by default
[11:10:55] -rusti- <anon>:10         fn foo(args: &[&str]) {} fn bar() {let z = ~"foo"; foo(["foo", z.as_slice()]); } bar()
[11:10:55] -rusti-                          ^~~~
[11:10:55] -rusti- ()
[11:11:04] <eddyb> what's special about as_slice()?
[11:11:11] *** Quits: olem (olem@moz-D8B40BE5.fbx.proxad.net) (Ping timeout)
[11:11:27] <Heather> eddyb: I don't use as_slice in my snippets...
[11:11:30] *** Joins: moostik (Icedove@moz-1FF02BE5.w92-151.abo.wanadoo.fr)
[11:11:43] <eddyb> Heather: I'm trying to find the bug's spread
[11:11:56] <eddyb> rusti: fn foo(args: &[&str]) {} fn bar<'a>(z: &'a str) { foo(["foo", "bar", z]); } bar("z");
[11:11:59] <Heather> eddyb: rusti version updated?
[11:12:03] <eddyb> Heather: no
[11:12:04] <Heather> rusti: version
[11:12:05] -rusti- failed to pastebin 11 lines of output
[11:12:05] -rusti- "rustc 0.10-pre (db7b9a3 2014-01-15 02:09:57 -0500)"
[11:12:15] <Heather> eddyb: then you do it a bit wrong...
[11:12:31] <Heather> eddyb: 15 day rusti version used to build my project
[11:12:50] <eddyb> Heather: hmm?
[11:13:04] <eddyb> the difference is 5 days, unless you mean something else
[11:13:16] <eddyb> and this bug doesn't seem to have changed
[11:13:28] <eddyb> rusti: let () = &"foo";
[11:13:28] <Heather> eddyb: 15, 16 day rustc was working just fine
[11:13:31] -rusti- pastebinned 7 lines of output: http://ix.io/a0C
[11:13:58] <eddyb> Heather: okay, so the only thing that changed was &"foo" it went from &'anon str to &'static str
[11:14:28] <eddyb> rusti: fn foo(args: &[&str]) {} fn bar(z: &str) { foo(["foo".as_slice(), "bar", z]); } bar("z");
[11:14:31] -rusti- pastebinned 13 lines of output: http://ix.io/a0D
[11:14:31] <Heather> eddyb: WHY
[11:14:43] <eddyb> Heather: because it was silly, maybe?
[11:14:53] <Heather> no :(
[11:14:53] <eddyb> Heather: you were using a bug as an workaround for another bug
[11:15:02] <Heather> lol
[11:15:03] <eddyb> do you understand that :)?
[11:15:11] <Heather> that's language I used
[11:15:20] *** Joins: gwty (gwtypc@928A4B44.FD2DAC3C.C924875F.IP)
[11:15:36] <Heather> and when you fix the bug you break my code
[11:16:05] <eddyb> Heather: vectors are broken because they use the type of the first element
[11:16:08] *** Joins: TisButMe (Mibbit@moz-85E31F67.w109-212.abo.wanadoo.fr)
[11:16:25] <Heather> so I need workaround to fix your fix of bug that I used as workaround for another bug, see ?
[11:16:25] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[11:16:37] <eddyb> rusti: fn foo(args: &[&str]) {} fn bar(z: &str) {let first = "foo".as_slice(); foo([first, "bar", z]); } bar("z");
[11:16:38] -rusti- pastebinned 13 lines of output: http://ix.io/a0E
[11:16:49] <eddyb> Heather: it becomes more obvious that it was an workaround
[11:17:00] <eddyb> Heather: and you'll be able to remove it when the vector bug is fixed
[11:17:37] <eddyb> rusti: fn foo(args: &[&str]) {} fn bar(z: &str) {let first = "foo"; foo([first.as_slice(), "bar", z]); } bar("z");
[11:17:37] -rusti- <anon>:10:16: 10:20 warning: unused variable: `args`, #[warn(unused_variable)] on by default
[11:17:37] -rusti- <anon>:10         fn foo(args: &[&str]) {} fn bar(z: &str) {let first = "foo"; foo([first.as_slice(), "bar", z]); } bar("z");
[11:17:38] -rusti-                          ^~~~
[11:17:38] -rusti- ()
[11:17:43] <eddyb> Heather: there ^^
[11:18:15] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[11:18:59] *** Joins: Palmik (palmik@moz-DEC2AB.pks.muni.cz)
[11:20:01] *** Quits: b1nd (b1nd@moz-3749DB1E.nhl8.cht.bigpond.net.au) (Ping timeout)
[11:20:28] <Heather> hm?
[11:20:41] <eddyb> Heather: try that
[11:20:59] *** Joins: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP)
[11:21:25] <Heather> eddyb: I use foo( ) many times in code ....
[11:21:48] <Heather> eddyb: it will be really dirty to define first string like that all over code now :S
[11:22:09] <eddyb> Heather: it is an workaround
[11:23:22] <Heather> LOL
[11:23:53] <Heather> eddyb: workaround for fix of bug I used as workaround for another bug ?
[11:24:04] <eddyb> the bug affects trait coercion, too
[11:24:06] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[11:24:41] <eddyb> you should be able to do let v: &[&Clone] = &[&0, &true];
[11:25:37] <eddyb> it tries to eagerly match all vector elements with the first one
[11:25:55] *** Quits: netoarmando (textual@moz-9CD6252B.dsl.telesp.net.br) (Quit: )
[11:26:00] <Zr40> Ports can detect that the sender has disconnected. Chans can detect that the receiver is gone using try_send, but can this be detected without sending anything?
[11:26:07] *** Joins: netoarmando (textual@moz-9CD6252B.dsl.telesp.net.br)
[11:26:35] *** Quits: netoarmando (textual@moz-9CD6252B.dsl.telesp.net.br) (Quit: )
[11:28:18] <cmr> Zr40: sure, have another Chan/Port pair and check if your Port is hung up!
[11:28:44] <Zr40> cmr: yeah, that's what I'm doing now. Just wondering if it can be done without the extra pair
[11:29:00] <cmr> nope
[11:29:15] <pyon> Is there any difference between using a DuplexStream and using two Chan/Port pairs?
[11:31:17] <Zr40> pyon: looking at the source, it's exactly that. http://static.rust-lang.org/doc/master/src/extra/home/rustbuild/src/rust-buildbot/slave/doc/build/src/libextra/comm.rs.html#22-25
[11:32:00] <pyon> Zr40: Ah!
[11:32:47] *** Joins: aravindavk (aravinda@moz-BD0CADEE.redhat.com)
[11:35:31] *** Quits: doomlord_ (servitor@moz-D9C46C01.range86-184.btcentralplus.com) (Ping timeout)
[11:38:35] *** Joins: squiddy (squiddy@moz-5E5BFA05.adsl.alicedsl.de)
[11:38:50] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[11:39:13] *** Joins: mib_3vciz2 (Mibbit@moz-D4A9DE45.cust.tele2.se)
[11:39:30] *** Quits: mib_3vciz2 (Mibbit@moz-D4A9DE45.cust.tele2.se) (Quit: http://www.mibbit.com ajax IRC Client)
[11:42:39] <TisButMe> I don't get the behaviour of the pattern-matching checker in this example: https://gist.github.com/TisButMe/169a186c88b46cbd3a9a 
[11:42:45] <TisButMe> Can someone have a look please ?
[11:43:04] <cmr> TisButMe: 13, 14, and 15 are all equivalent.
[11:43:26] <cmr> TisButMe: you're creating a binding with those names, not matching that their contents are LCommand etc.
[11:43:50] <TisButMe> Ooooh
[11:44:08] <TisButMe> So I should pattern match against the unwrap() of the option ?
[11:44:24] <cmr> or just Some(cmd) => match cmd { ... }
[11:44:40] <eddyb> hmm?
[11:45:02] <TisButMe> thanks :)
[11:45:11] *** Joins: kris_ (kris@moz-6D20263F.fullrate.dk)
[11:45:15] *** Quits: kris_ (kris@moz-6D20263F.fullrate.dk) (Quit: kris_)
[11:45:16] <eddyb> rusti: match Some(0) {Some(0) => 0, Some(1) => 1, _ => -1}
[11:45:18] *** Quits: pilf (pilf@8FA95888.1A994CBC.4B228AD7.IP) (Ping timeout)
[11:45:22] -rusti- timeout triggered!
[11:45:24] <eddyb> rusti: match Some(0) {Some(0) => 0, Some(1) => 1, _ => -1}
[11:45:25] -rusti- 0
[11:45:42] <eddyb> cmr: pretty sure you can match like TisButMe wants to
[11:45:49] <TisButMe> seems to work here
[11:45:58] <eddyb> TisButMe: is the enum in a different module?
[11:46:03] <TisButMe> yes
[11:46:10] <eddyb> TisButMe: you need to import the variants
[11:46:14] <cmr> rusti: enum Foo {A,B,C} match Some(A) { Some(A) => println!("a"), Some(B) => println!("b"), _ => println!("else") }
[11:46:15] -rusti- a
[11:46:15] -rusti- ()
[11:46:18] <cmr> ohhh
[11:46:20] <cmr> yeah that'd do it.
[11:46:40] <eddyb> you can nest patterns ;)
[11:46:46] <TisButMe> cool
[11:46:53] <TisButMe> ok, importing variants, it works
[11:46:54] <eddyb> (though you can't go through smart pointers, we maybe need sugar for that)
[11:46:55] *** Joins: pilf (pilf@8FA95888.1A994CBC.4B228AD7.IP)
[11:46:56] <cmr> well, what I said was accurate.
[11:47:09] <TisButMe> it was
[11:47:14] <TisButMe> a bit misleading, though :)
[11:47:17] <cmr> suggest fix was off though :p
[11:48:11] *** Joins: eibwen (kvirc@moz-59633B70.dip0.t-ipconnect.de)
[11:49:05] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[11:49:16] *** Quits: Soft (soft@moz-EC8D39F.yok.fi) (Ping timeout)
[11:50:33] *** Quits: nomme (nomme@moz-A30B1161.a336.priv.bahnhof.se) (Ping timeout)
[11:50:33] *** Quits: ion (ion@heh.fi) (Ping timeout)
[11:50:57] *** Joins: ion (ion@heh.fi)
[11:51:09] *** Joins: nomme (nomme@moz-A30B1161.a336.priv.bahnhof.se)
[11:53:57] *** Joins: fyolnish (fyolnish@moz-F3E067E9.uqwimax.jp)
[11:54:37] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[11:55:41] *** Quits: fyolnish (fyolnish@moz-F3E067E9.uqwimax.jp) (Ping timeout)
[11:56:25] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[11:56:57] *** Joins: vmx (vmx@moz-E0F5F46.pools.arcor-ip.net)
[11:58:46] *** Quits: eibwen (kvirc@moz-59633B70.dip0.t-ipconnect.de) (Ping timeout)
[11:58:58] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[12:00:42] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[12:00:49] *** Quits: aravindavk (aravinda@moz-BD0CADEE.redhat.com) (Quit: Leaving)
[12:03:01] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[12:05:26] *** Quits: z0w0 (zack@moz-87AABEA0.lnse1.woo.bigpond.net.au) (Client exited)
[12:07:48] *** Joins: olem (olem@moz-D8B40BE5.fbx.proxad.net)
[12:10:41] *** Quits: pilf (pilf@8FA95888.1A994CBC.4B228AD7.IP) (Quit: pilf)
[12:10:43] <Zr40> eek. C:\Windows as fallback tmpdir? http://static.rust-lang.org/doc/master/src/std/home/rustbuild/src/rust-buildbot/slave/doc/build/src/libstd/os.rs.html#457-488
[12:11:19] <Ms2ger|deputyduty> !
[12:11:31] *** Joins: marianoguerra (marianogue@moz-43653196.dip0.t-ipconnect.de)
[12:12:05] *** Parts: marianoguerra (marianogue@moz-43653196.dip0.t-ipconnect.de) ()
[12:12:23] *** Quits: Ferreus (ferreus@moz-13287B95.dip0.t-ipconnect.de) (Ping timeout)
[12:13:53] <dbaupp> Woah, SO has Rust highlighting via `<!-- language: lang-rust -->`
[12:14:03] <cmr> wat
[12:14:08] <cmr> why is language selection so awful
[12:14:14] <cmr> why don't they add code fences :(
[12:14:24] <dbaupp> yes
[12:14:35] <dbaupp> indentation is annoying :'(
[12:14:52] <dbaupp> also, it's weird that the rust tag doesn't get Rust highlighting automatically yet
[12:14:57] *** Joins: pilf (pilf@8FA95888.1A994CBC.4B228AD7.IP)
[12:16:39] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[12:17:30] *** Joins: vadimg (vadimg@BCFFDE00.DF0A212.39C00A7A.IP)
[12:17:51] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[12:18:26] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[12:18:48] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[12:19:18] *** Joins: Ferreus (ferreus@moz-E0229F7D.dip0.t-ipconnect.de)
[12:19:35] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[12:19:35] *** ChanServ sets mode: +o jdm
[12:19:41] *** Parts: Heather (Heather@19663F6.F53BAACC.9C17E900.IP) ()
[12:21:49] <ChrisMorgan> dbaupp: and my opinion of the Rust syntax highlighter on SO? Awful. No lifetime support, for starters.
[12:22:07] <dbaupp> ChrisMorgan: better than no highlighting
[12:22:32] *** Quits: skade (skade@moz-46E15697.dip0.t-ipconnect.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[12:22:37] <ChrisMorgan> dbaupp: its default highlighting is just about as good.
[12:22:55] *** Ms2ger|deputyduty is now known as Ms2ger
[12:23:22] <dbaupp> ChrisMorgan: "default"? Rust seems to be completely unhighlighted by default
[12:23:36] *** Joins: skade (skade@moz-46E15697.dip0.t-ipconnect.de)
[12:24:01] <cmr> (I think that's the point)
[12:24:08] <ChrisMorgan> dbaupp: <!-- language: lang-default -->
[12:24:24] <cmr> ah
[12:24:42] <dbaupp> cmr: we don't joke about syntax highlighters.
[12:24:46] <dbaupp> serious business.
[12:26:08] *** Quits: skade (skade@moz-46E15697.dip0.t-ipconnect.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[12:26:09] <ChrisMorgan> lang-rust highlights words like "match", "fn", "trait" and *breaks* multi-line strings, but that's about it.
[12:27:27] *** Joins: Earnestly (earnest@moz-E86D50FA.dyn.plus.net)
[12:28:10] <Zr40> hm. I'm getting a segfault when calling walk_dir. gdb shows a null pointer in readdir. rustc v0.10-pre compiled from master this morning
[12:28:17] *** Quits: m_kato (m_kato@moz-C286AD9A.bitcat.net) (Quit: Leaving...)
[12:29:01] * flaper87 is really bad at keeping up with SO. Not enough time
[12:29:45] *** Joins: ricepuddin (graham@moz-D0A31D2B.wlan.ic.ac.uk)
[12:31:17] <Ms2ger> flaper87, oh, I read SO as significant other
[12:31:51] <flaper87> Ms2ger: hehe, nah, it's just stackoverflow! :D
[12:32:05] <pnkfelix> works both ways
[12:32:10] *** Quits: noct (quassel@moz-4F2CA1D7.noctal.com) (Ping timeout)
[12:32:10] *** Quits: km (quassel@moz-777F24DE.kevinmehall.com) (Ping timeout)
[12:32:11] *** Joins: noct (quassel@moz-4F2CA1D7.noctal.com)
[12:32:13] *** Joins: km (quassel@moz-777F24DE.kevinmehall.com)
[12:32:14] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[12:32:21] *** Quits: dg (dg@moz-AF6F3E94.com) (Ping timeout)
[12:32:22] *** Joins: dg (dg@moz-AF6F3E94.com)
[12:33:45] *** Quits: andre (andre@moz-CB3D10F7.dynamic.adsl.gvt.net.br) (Ping timeout)
[12:33:56] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[12:34:15] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[12:34:16] *** Joins: Soft (soft@moz-EC8D39F.yok.fi)
[12:35:35] *** Joins: andre (andre@moz-5302C5C9.dynamic.adsl.gvt.net.br)
[12:36:33] *** Quits: vadimg (vadimg@BCFFDE00.DF0A212.39C00A7A.IP) (Ping timeout)
[12:39:46] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[12:41:12] *** kimundi is now known as zz_kimundi
[12:42:16] <Zr40> what can I do about that segfault?
[12:42:29] *** Joins: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au)
[12:42:58] <flaper87> Zr40: do you have your code posted somewhere?
[12:44:03] *** Quits: Denommus (user@moz-B9DBEB9C.user.veloxzone.com.br) (Ping timeout)
[12:44:41] *** Quits: Kxepal (Miranda@moz-77F2B717.pppoe.mtu-net.ru) (Quit: Kxepal)
[12:45:02] *** Joins: Kxepal (Miranda@moz-77F2B717.pppoe.mtu-net.ru)
[12:45:13] *** Joins: mankyKitty (Instantbir@moz-9B898D95.enst-bretagne.fr)
[12:45:55] *** Quits: Kxepal (Miranda@moz-77F2B717.pppoe.mtu-net.ru) (Quit: Kxepal)
[12:46:22] *** Joins: Kxepal (Miranda@moz-77F2B717.pppoe.mtu-net.ru)
[12:47:27] <mankyKitty> Greetings :)
[12:48:10] <Zr40> flaper87: https://github.com/hendrikx-itc/cortex/blob/develop/src/cortex/publisher.rs
[12:48:19] <Zr40> flaper87: oddly, it doesn't segfault if I uncomment line 10
[12:51:51] <strcat> bstrie_nope: around?
[12:52:08] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[12:56:17] *** Joins: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP)
[12:57:25] <dbaupp> strcat: /r/rust related?
[12:57:30] <strcat> no
[12:57:33] *** Joins: peterdreid (peterdreid@moz-D18776CD.nc.res.rr.com)
[12:57:35] <dbaupp> ok
[12:57:48] *** Joins: bjz_ (bjz@B398BE78.F804C29E.D35A31DF.IP)
[12:57:57] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[12:58:42] <Zr40> actually, it does segfault with that line uncommented, but only on the second iteration of the loop of the calling function
[12:58:56] <Zr40> I suppose that would suggest a compiler bug
[12:59:22] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[12:59:48] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[12:59:57] *** Quits: ricepuddin (graham@moz-D0A31D2B.wlan.ic.ac.uk) (Ping timeout)
[13:01:05] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[13:06:14] <Zr40> let's see if I can reduce this somewhat
[13:07:10] *** Joins: skade (skade@3E753816.E7BADBF1.B0C2132F.IP)
[13:08:11] *** Joins: jvrmaia (jvrmaia@488448C0.A3C460C4.EBCD9D32.IP)
[13:12:10] *** Joins: canhtak (canhtak@moz-6C22A50C.wl.t.ulaval.ca)
[13:12:54] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[13:15:12] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[13:16:40] <johnsoft> when upgrading rustc, is it necessary to recompile all your rlibs and such?
[13:17:10] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[13:17:22] *** Joins: doomlord_ (servitor@moz-D9C46C01.range86-184.btcentralplus.com)
[13:17:43] <Zr40> flaper87: https://gist.github.com/zr40/242fe67a6c6c8f3e0458
[13:18:03] <dbaupp> johnsoft: ye
[13:18:04] *** Joins: mankyKit1 (Instantbir@moz-9B898D95.enst-bretagne.fr)
[13:18:07] <dbaupp> s
[13:18:40] *** Quits: mankyKit1 (Instantbir@moz-9B898D95.enst-bretagne.fr) (Quit: mankyKit1)
[13:18:45] *** Quits: mankyKitty (Instantbir@moz-9B898D95.enst-bretagne.fr) (Ping timeout)
[13:18:51] *** Joins: mankyKitty (Instantbir@moz-9B898D95.enst-bretagne.fr)
[13:18:54] <johnsoft> thought it might
[13:18:55] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[13:19:13] <johnsoft> i need to whip up a script or this will get tedious fast
[13:20:03] *** Joins: new_one (new_one@CCDACABD.439D8424.B3C0173E.IP)
[13:22:04] <Ms2ger> johnsoft, relevant: http://xkcd.com/1319/
[13:22:49] *** Joins: c-a (c-a@moz-8D7A06D6.a163.priv.bahnhof.se)
[13:22:50] *** Quits: kvanb (kvanb@moz-2FD67D8D.lnse7.win.bigpond.net.au) (Quit: kvanb)
[13:23:02] <flaper87> Zr40: mmh, not 100% sure of what's going on there. Could you `-S --emit-llvm` ?
[13:24:41] <johnsoft> Ms2ger- but that's part of the fun!
[13:24:54] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[13:25:13] <johnsoft> speaking of which, maybe i should write a chef cookbook to upgrade rust for me :P
[13:25:21] *** Joins: b1nd (b1nd@moz-3749DB1E.nhl8.cht.bigpond.net.au)
[13:25:37] <Zr40> flaper87: https://gist.github.com/zr40/1b3cb224c5220c1155db
[13:28:27] <rca> Zr40: i don't think that should even compile. publish_path should move when you call single_scan, so you shouldn't be able to call it in a loop.
[13:28:47] <rca> Zr40: what if you use &Path in single_scan instead?
[13:28:52] *** Quits: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au) (Quit: gavinb)
[13:29:50] <Zr40> rca: that doesn't segfault
[13:30:38] <Zr40> rca: hm, it seems the spawn allows it to compile
[13:31:44] <rca> Zr40: known issue : https://github.com/mozilla/rust/issues/10398
[13:31:50] *** Quits: b1nd (b1nd@moz-3749DB1E.nhl8.cht.bigpond.net.au) (Ping timeout)
[13:32:47] *** Quits: jsonnull (Thunderbir@E86DD23.582C899D.494A0F8B.IP) (Ping timeout)
[13:32:53] <rca> Zr40: sorry you're gonna have to be careful not to reuse moved values in spaw() :(
[13:32:58] <ChrisMorgan> johnsoft: my recipe to rebuild Rust is simply `git pull --ff-only mozilla master && git push && make && make install && make TAGS.vi`. It stays in history so I can access it with ^R, I can tweak it if I want, all nice and easy ☺
[13:34:36] <eddyb> ChrisMorgan: git p gives me git pull --rebase parent master
[13:34:47] <strcat> where is the repo for the static content like rust-lang.org now?
[13:34:51] <eddyb> (it might be just "g" usually)
[13:35:01] <ChrisMorgan> strcat: https://github.com/graydon/rust-www
[13:35:16] <strcat> ah it's in a branch
[13:35:35] <ChrisMorgan> eddyb: I tend to go for the TAGS part, it's the most consistently correct
[13:36:10] *** Joins: jsonnull (Thunderbir@E86DD23.582C899D.494A0F8B.IP)
[13:36:52] * flaper87 does git pull --rebase && .......
[13:37:01] <flaper87> gtg
[13:37:12] <eddyb> I use parent as the name of the origin from which I forked it
[13:37:13] <strcat> you should use --ff-only with master
[13:37:23] <strcat> --rebase only makes sense on a local branch
[13:37:33] *** flaper87 is now known as flaper87|afk
[13:37:37] <eddyb> strcat: yeah, I broke my master once doing that, heh
[13:37:41] <strcat> and the default pull functionality is dumb so I alias it to --ff-only
[13:38:06] <eddyb> I had to force checkout a commit in the past, remove all the extra files, and then forward
[13:38:42] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[13:42:26] *** Quits: canhtak (canhtak@moz-6C22A50C.wl.t.ulaval.ca) (Quit: canhtak)
[13:43:23] <ChrisMorgan> strcat: not as "alias.pull = pull --ff-only", I hope?
[13:44:02] *** Joins: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com)
[13:44:08] <johnsoft> ChrisMorgan- thanks!
[13:44:46] *** Joins: mr_fribble (Mibbit@D0859826.B8520FC9.3B82F87E.IP)
[13:44:53] *** Quits: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP) (Ping timeout)
[13:45:21] *** Quits: mr_fribble (Mibbit@D0859826.B8520FC9.3B82F87E.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:46:01] *** Quits: patpat (patpat@moz-85F8C52A.as13285.net) (Quit: )
[13:46:54] <ChrisMorgan> (strcat: just in case, "To avoid confusion and troubles with script usage, aliases that hide existing Git commands are ignored.", c.f. http://stevelosh.com/blog/2013/04/git-koans/#silence)
[13:51:42] *** Joins: angdev (uid7041@moz-E77DEB21.irccloud.com)
[13:51:59] *** Joins: eibwen (hein@moz-DDF522BC.wlan.hu-berlin.de)
[13:52:07] <eibwen> Hello :)
[13:52:23] <eibwen> I created the List type of the tutorial
[13:52:53] <eibwen> and now I have a list like y = ~Cons(4, ~Cons(5, ~Nil))
[13:53:02] <eibwen> how would I change the 5?
[13:53:05] <eibwen> I tried
[13:53:44] <strcat> ChrisMorgan: no, via zsh
[13:53:50] <eibwen> match(y) { Cons(_, l) => *l = ~Cons(6, ~Nil) }
[13:53:59] <strcat> ChrisMorgan: I tried git aliases and they didn't do what I wanted
[13:54:09] <eibwen> but it sayslist.rs:13:17: 13:19 error: cannot assign to immutable dereference of ~ pointer
[13:54:18] <eibwen> any idea?
[13:54:33] <cmr> eibwen: ref mut l
[13:54:36] <strcat> ChrisMorgan: *shrug*, I could just make my own git wrapper based on 10 commands ;p
[13:54:44] <cmr> strcat: and call it... hg!
[13:54:46] <cmr> ;p
[13:54:51] <ChrisMorgan> :D
[13:54:56] *** Quits: Kxepal (Miranda@moz-77F2B717.pppoe.mtu-net.ru) (Connection reset by peer)
[13:54:59] <cmr> I've been exposed to hg recently and I quite like it.
[13:55:04] <cmr> bitbucket is far nicer than github too.
[13:55:05] <mitsuhiko> cmr: i'm disappoint
[13:55:08] <eibwen> cmr: why ref mut l ?
[13:55:10] * ChrisMorgan vastly prefers hg to git
[13:55:16] <Ms2ger> +1
[13:55:17] <cmr> eibwen: to get a mutable reference.
[13:55:19] <mitsuhiko> i'm disappointed in all of you :(
[13:55:28] <strcat> hg is further from what I want than git considering that I don't like merges ;p
[13:55:30] <cmr> eibwen: (to the inner thing)
[13:55:35] <eibwen> cmr: I don't need a reference, I get a pointer, I though
[13:55:36] <eibwen> t
[13:55:45] <eibwen> something of the type ~List
[13:55:54] <eibwen> which I thought I could dereference and assign
[13:55:55] <strcat> you could have taken that hint from me saying I only use pull --ff-only and pull --rebase
[13:56:10] * strcat shrugs ;p
[13:57:49] *** Joins: Kxepal (Miranda@moz-77F2B717.pppoe.mtu-net.ru)
[13:59:16] <strcat> rust itself uses the fast-forward-only model but bors makes merge commits for each fast forward
[13:59:25] <strcat> *shrug*
[13:59:40] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[14:00:07] <strcat> http://osrc.dfm.io/bors bors likes to pretend he does work
[14:00:13] <cmr> he pretends pretty well.
[14:01:11] *** Joins: Kruppe (user@moz-26BAF00B.net.uwaterloo.ca)
[14:01:20] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[14:02:07] *** Joins: ricepuddin (graham@moz-D0A31D2B.wlan.ic.ac.uk)
[14:02:54] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[14:03:25] *** Joins: bakkdoor (bakkdoor@moz-3562EADE.osnanet.de)
[14:03:53] *** Quits: ricepuddin (graham@moz-D0A31D2B.wlan.ic.ac.uk) (Ping timeout)
[14:10:39] *** Joins: canhtak (canhtak@moz-6C22A50C.wl.t.ulaval.ca)
[14:11:41] *** Quits: gwty (gwtypc@928A4B44.FD2DAC3C.C924875F.IP) (Ping timeout)
[14:12:04] *** Quits: canhtak (canhtak@moz-6C22A50C.wl.t.ulaval.ca) (Quit: canhtak)
[14:12:33] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[14:15:39] <eibwen> so
[14:15:42] *** Quits: Ms2ger (Ms2ger@B7B2FF50.C60A97A6.F9FB0584.IP) (Quit: bbl)
[14:15:46] <eibwen> why do I need to do
[14:16:42] <eibwen> match(y) { Cons(_, ref mut l) => *l = ~Cons(6, ~Nil); }
[14:16:46] <eibwen> (the ref mut)
[14:17:06] <eibwen> (and also, can I somehow tell rust to microoptimize this to one allocation?
[14:17:21] <eibwen> (the ~Cons and ~Nil into one malloc chunk)
[14:17:21] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[14:17:53] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[14:18:20] *** Joins: canhtak (canhtak@moz-6C22A50C.wl.t.ulaval.ca)
[14:19:06] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[14:19:22] *** Quits: eibwen (hein@moz-DDF522BC.wlan.hu-berlin.de) (Client exited)
[14:20:45] *** Quits: skade (skade@3E753816.E7BADBF1.B0C2132F.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[14:21:10] *** Joins: eibwen (heinrich59@moz-DE11707E.de)
[14:22:21] <eibwen> soo
[14:22:40] <eibwen> I think I missed the previous answer, can someone pastebin the last 10min log of this channel?
[14:23:22] *** Quits: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au) (Quit: Leaving.)
[14:23:53] <Zr40> eibwen: https://botbot.me/mozilla/rust
[14:23:59] <lynks> eibwen: you are the only person who has spoken in the past 10 minutes :(
[14:24:10] *** Quits: jvrmaia (jvrmaia@488448C0.A3C460C4.EBCD9D32.IP) (Client exited)
[14:24:10] *** Quits: canhtak (canhtak@moz-6C22A50C.wl.t.ulaval.ca) (Quit: canhtak)
[14:24:16] *** Joins: AvianFlu (AvianFlu@974D245D.130DDD13.67CD788C.IP)
[14:24:16] <eibwen> Zr40: lynks: thanks
[14:24:33] *** Joins: jvrmaia (jvrmaia@488448C0.A3C460C4.EBCD9D32.IP)
[14:24:47] <dbaupp> lynks has all the right links
[14:25:08] <dbaupp> oh, erm, it was Zr40 who had the link..
[14:25:14] <eddyb> eibwen: it will always be two allocations
[14:25:19] * dbaupp backs away
[14:26:15] *** Quits: jvrmaia (jvrmaia@488448C0.A3C460C4.EBCD9D32.IP) (Ping timeout)
[14:26:23] <eddyb> eibwen: you can use struct List(T, Option<~List>); to get better performance (it's the same size, Option<~T> is a nullable pointer)
[14:26:36] <eddyb> eibwen: you need ref mut to get a &mut
[14:26:45] <eibwen> otherwise I get what?
[14:26:58] <strcat> eibwen: List(T, Option<~List>) can't be empty
[14:27:02] <strcat> er
[14:27:04] <strcat> eddyb: 
[14:27:07] <eddyb> eibwen: the value that was inside
[14:27:12] *** Quits: doomlord_ (servitor@moz-D9C46C01.range86-184.btcentralplus.com) (Connection reset by peer)
[14:27:43] <strcat> linked data structures are more fun in C :(
[14:28:05] <eibwen> strcat: I think you can make them fun in rust too
[14:28:19] <eddyb> strcat: struct Cons<T>(T, List); static Nil: List = None; type List<T> = Option<~Cons<T>>;
[14:28:26] <eddyb> strcat: sound about right?
[14:28:35] <strcat> but I want intrusive data structures and circular lists ;p
[14:28:35] <eibwen> like fn next(&self) { match cons -> return l, empty -> fail }
[14:28:48] *** Joins: pepper_chico (pepper_chi@moz-13107F6.dsl.telesp.net.br)
[14:28:54] <eddyb> it won't match as nice :(
[14:29:11] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[14:29:14] <rca> strcat: unsafe, unsafe everywhere! :)
[14:29:41] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[14:29:53] <eibwen> eddyb: the value that is inside is (IMO) ~List
[14:30:17] <eddyb> eibwen: yes. it's just a value
[14:30:28] <eddyb> eibwen: an rvalue in C++ terms
[14:30:43] <eibwen> ahh
[14:30:51] <eibwen> and ref makes it a lvalue
[14:30:55] *** Joins: canhtak (canhtak@moz-6C22A50C.wl.t.ulaval.ca)
[14:31:06] <eddyb> eibwen: ref mut l creates &mut ~List
[14:31:20] *** Quits: canhtak (canhtak@moz-6C22A50C.wl.t.ulaval.ca) (Quit: canhtak)
[14:31:26] <eddyb> to which you can assign
[14:31:48] <strcat> rusti: let mut x = ~5; let ~ref mut y = x; *y = 10; x
[14:31:56] <eddyb> (Rust doesn't have lvalues in the same sense as C++, you can't make foo(x) = bar work)
[14:31:58] -rusti- pastebinned 10 lines of output: http://ix.io/a0H
[14:32:15] <strcat> rusti: let mut x = ~5; { let ~ref mut y = x; *y = 10; } x
[14:32:17] -rusti- ~10
[14:32:32] <eibwen> ok, that's how I modify it inplace
[14:32:39] <strcat> ^^
[14:33:35] <strcat> if you just use 'ref mut' then you have to deref away the &mut and the ~ to get at it
[14:34:08] *** Joins: dave1629 (dave@1A49DFD2.75B49943.DDE5D3F6.IP)
[14:34:15] <eibwen> I have a list let x = ~Cons(5, ~Cons(6, ~Cons(7, ~Nil)))
[14:34:22] <eibwen> then let y = x.clone()
[14:34:35] <eibwen> what if I now modify '
[14:34:48] <eibwen> 'y.next.value'?
[14:34:53] <eddyb> y is completely different than x
[14:35:06] <eibwen> does y.next point to the same as x.next?
[14:35:10] <eddyb> ~T is unique, you can't have two instances of it with the same address
[14:35:21] <eibwen> x.clone() makes a deep copy?
[14:35:25] <strcat> eibwen: no
[14:35:27] <eddyb> eibwen: yes
[14:35:29] <eibwen> in this case
[14:35:32] <strcat> eibwen: it does the minimal work to turn &T to T
[14:35:38] <eibwen> ok
[14:35:40] <strcat> which in this case means calling clone on the thing inside the ~T
[14:35:44] <strcat> and allocating a new ~ to put it in
[14:35:45] <eibwen> in this case it makes a deep copy
[14:35:47] <eibwen> ok
[14:35:58] <eibwen> strcat: and if we have a Rc<T>, it won't copy?
[14:35:59] <pepper_chico> guys I was thinking here, about this new "box" syntax, as of now, there's box 42, box(GC) 42, and maybe other boxes to come... I was thinking whether it would be nice and ok to have boxes with inferred ownership, so, let p:~int = box 42, let p:Gc<int> = box 42 would produce proper boxes, well this is more verbose, but I was just thinking whether deciding how a heap object is managed through the pointer not the box itself would be nicer
[14:36:05] <strcat> eibwen: it will refcount
[14:36:44] <strcat> eibwen: ~T has value semantics
[14:36:59] <eibwen> (offtopci: is the ~ syntax deprecated)
[14:37:04] <strcat> no
[14:37:09] <eibwen> strcat: only if I don't move it, right?
[14:37:10] *** Joins: espindola (espindola@moz-8F837B07.dsl.teksavvy.com)
[14:37:17] <eibwen> x = ~1
[14:37:19] <eibwen> y = x
[14:37:22] <eibwen> x is inaccesible
[14:37:25] <eibwen> right?
[14:37:32] <strcat> until reinitialized, yes
[14:37:38] <eddyb> pepper_chico: some of us want that too. box(GC) and box(HEAP) are nothing but *temporary hacks*
[14:37:53] <pepper_chico> eddyb, hmm, ok
[14:38:05] <eibwen> will it result in an actual copy, strcat ?
[14:38:09] <strcat> eibwen: 'actual' copy?
[14:38:19] <eibwen> strcat: is it a nop or not?
[14:38:20] <strcat> eibwen: passing/assigning/returning is a shallow copy
[14:38:37] <eibwen> I mean this could just be done by the compiler
[14:38:41] <strcat> eibwen: if the type containers a dtor, closure or &mut then it considers a shallow copy to be a move of ownership
[14:38:46] <dbaupp> eibwen: at the machine level, a move and an "implicit copy" (i.e. what `int` does) are the same
[14:39:00] <strcat> eibwen: this simple case will optimize out.... many won't
[14:39:05] <eibwen> ok
[14:39:09] <eibwen> thanks
[14:39:15] <strcat> 5 + 3 can be implemented as 8, doesn't mean + 3 is always a no-op at compile-time ;p
[14:39:20] <strcat> er, at runtime
[14:39:24] <eibwen> :)
[14:39:36] <strcat> like
[14:39:38] *** Joins: gwty (gwtypc@928A4B44.FD2DAC3C.C924875F.IP)
[14:40:20] <strcat> *x = y; where you're moving ownership from `y`
[14:40:33] *** Quits: kanru (kanru@moz-99690620.hinet-ip.hinet.net) (Ping timeout)
[14:40:59] *** Joins: orospakr (orospakr@moz-B9F98D62.dedicated.allstream.net)
[14:41:52] <eibwen> can I have a function fn element(int x) { return the n-th element of the list as reference }
[14:42:13] <eibwen> something like return an & with the same 'lifetiem' as the original list
[14:42:25] <eibwen> *lifetime
[14:42:39] *** Joins: vadimg (vadimg@BCFFDE00.DF0A212.39C00A7A.IP)
[14:43:23] *** jorendorff_away is now known as jorendorff
[14:43:24] <strcat> eibwen: yes
[14:44:02] <strcat> fn get<'a>(&'a self, index: uint) -> Option<&'a T> { ... }
[14:44:13] *** Joins: pzol (nobody@moz-553BEE64.dynamic.chello.pl)
[14:44:23] <eibwen> 'a means lifetime?
[14:44:49] <eibwen> mh no
[14:44:53] <strcat> eibwen: 'anything does
[14:45:35] <strcat> 'static is the only special lifetime name
[14:45:50] <eibwen> mh k
[14:45:51] <strcat> although 'keyword is forbidden
[14:46:08] <eibwen> but aren't you missing a type for self there?
[14:46:18] <strcat> eibwen: well it was an example of a method
[14:46:21] <machty> rust
[14:46:23] *** Joins: pzol_ (pzol@moz-553BEE64.dynamic.chello.pl)
[14:46:38] <eibwen> strcat: so it's just because it's an example
[14:46:39] <eibwen> k
[14:46:43] <strcat> impl<T> List<T> { fn get<'a>(&'a self, index: uint) -> Option<&'a T> { ... } }
[14:47:37] *** Quits: pzol (nobody@moz-553BEE64.dynamic.chello.pl) (Client exited)
[14:47:38] *** pzol_ is now known as pzol
[14:47:52] <eibwen> thanks
[14:48:20] *** Joins: elux (peter@B6F21F4B.1F20BC31.2170E5F.IP)
[14:48:59] <strcat> and you could also have 'fn get_mut<'a>(&'a mut self, index: uint) -> Option<&'a mut T>'
[14:49:34] *** Joins: bmurphy1976 (bmurphy197@moz-949A8196.hsd1.il.comcast.net)
[14:50:25] <eibwen> how are println!("{?r}", some_struct_enum_whatever), some_struct_enum_whatever.deepcopy, and so on implemented without havnig compile-time reflection
[14:51:25] *** Quits: bmurphy1976 (bmurphy197@moz-949A8196.hsd1.il.comcast.net) (Quit: bmurphy1976)
[14:52:34] *** Joins: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP)
[14:52:49] *** Quits: pzol (pzol@moz-553BEE64.dynamic.chello.pl) (Quit: Colloquy for iPad - http://colloquy.mobi)
[14:53:12] <eibwen> eddyb: you said "it will always be two allocations" - I have basically no idea on the impact of allocations, but I've seen some C stuff allocating a huge chunk of memory and then assigning certain ranges to pointers, because it knew beforehand how much memory it will use
[14:53:35] <eibwen> so micro-optimizations like that won't work in rust?
[14:53:36] <eddyb> it would be an interesting LLVM optimization
[14:53:48] <eddyb> eibwen: you'd have to use unsafe code to do it
[14:54:15] *** Joins: pzol (pzol@moz-553BEE64.dynamic.chello.pl)
[14:54:16] <eddyb> unless we provide some variadic generic function to allocate a bunch of values at once
[14:54:25] <eddyb> well, no, it's worse than that
[14:54:34] <dbaupp> eddyb: you can use an explicit arena
[14:54:45] <eibwen> arena is a typo of area here?
[14:54:46] <dbaupp> which hands out chunks of a ~[u8]
[14:54:49] <dbaupp> eibwen: no
[14:54:55] *** Parts: dmz (Mibbit@moz-F30E0473.cpe.net.cable.rogers.com) ()
[14:55:00] <eddyb> eibwen: you can take the ~Nil out and now it points to something that's not the start of a malloc'd region
[14:55:06] <eddyb> eibwen: freeing it becomes UB. fun stuff
[14:55:06] <dbaupp> eibwen: http://static.rust-lang.org/doc/master/extra/arena/index.html
[14:55:31] *** Joins: igork (Igor@9C577557.7893D71C.6E0EE79F.IP)
[14:55:58] <eibwen> dbaupp: arena seems to be exactly the thing I was talking about
[14:56:08] <eddyb> dbaupp: is the typed arena in std/extra?
[14:56:08] <eibwen> is it implemented in a lifetime-safe manner?
[14:56:20] <eibwen> eddyb: module extra::arena
[14:56:23] <eibwen> I suppose so
[14:56:35] <eddyb> no, not that arena, the new typed arenas
[14:56:47] <eibwen> eddyb: also seen in that link, so ye
[14:56:48] <eibwen> s
[14:57:14] <eddyb> oh, wait, sorry, didn't realize it's a module name
[14:57:26] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[14:57:29] <eddyb> I blame index.html :P
[14:57:47] *** Quits: pzol (pzol@moz-553BEE64.dynamic.chello.pl) (Client exited)
[14:57:47] *** Quits: orospakr (orospakr@moz-B9F98D62.dedicated.allstream.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[14:58:02] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[14:58:34] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[14:59:31] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[14:59:33] *** Joins: Cevn (sameer@moz-F316C21E.hr.hr.cox.net)
[14:59:33] *** Joins: orospakr (orospakr@moz-B9F98D62.dedicated.allstream.net)
[14:59:37] <eibwen> rust doesn't seem to like uninitalized memory :D
[14:59:53] <eibwen> Arena.alloc needs an initialization func
[15:00:05] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[15:00:12] *** Quits: orospakr (orospakr@moz-B9F98D62.dedicated.allstream.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[15:00:17] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[15:01:03] *** Quits: vadimg (vadimg@BCFFDE00.DF0A212.39C00A7A.IP) (Ping timeout)
[15:01:03] <eddyb> eibwen: of course it doesn't. I've heard LLVM can optimize things like [0u8, ..64] on the stack if it's obvious that you're always writing before reading to any part of it
[15:01:45] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[15:02:01] *** Parts: spacetime (quassel@moz-CAB487E6.rishab.in) (A disturbance in the spacetime continuum was detected.)
[15:02:17] *** Joins: zakora (NC@moz-28181BF.fbx.proxad.net)
[15:02:21] <strcat> eddyb: it's a dead store
[15:02:24] *** Quits: dmacvicar (dmacvicar@moz-6C19808.suse.de) (Ping timeout)
[15:02:27] <eddyb> right
[15:02:29] <eibwen> strcat: a what?
[15:02:43] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[15:02:43] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[15:03:35] <strcat> let mut x = 5; x = 10;
[15:03:50] <eddyb> strcat: hmm, LLVM doesn't have range analysis, does it? where would range information go, if we could provide it (for slices)?
[15:04:05] *** Quits: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP) (Client exited)
[15:05:09] <eddyb> oh, and Option<Rc<T>> is probably twice as big as Option<~T>, we might have to add a #[no_null] attribute for it
[15:05:31] <strcat> eddyb: I implemented that
[15:05:37] <strcat> wasn't merged
[15:05:54] *** Joins: canhtak (canhtak@moz-6C22A50C.wl.t.ulaval.ca)
[15:06:15] <dbaupp> what was the reason?
[15:06:51] *** Joins: orospakr (orospakr@moz-B9F98D62.dedicated.allstream.net)
[15:07:35] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[15:08:08] <whitequark> strcat: eddyb: http://llvm.org/docs/LangRef.html#range-metadata ?
[15:08:22] <whitequark> and I think scev can use it
[15:08:25] <strcat> whitequark: he means something else
[15:08:28] <whitequark> oh
[15:08:28] *** Quits: orospakr (orospakr@moz-B9F98D62.dedicated.allstream.net) (Connection reset by peer)
[15:08:39] <eddyb> dynamic range correlation
[15:08:59] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[15:09:04] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[15:09:18] <strcat> whitequark: we do put range metadata on stuff like enum discriminants and bools
[15:09:24] <eddyb> o_O
[15:09:28] <whitequark> doesn't scalar evolution do something like he wants?
[15:09:44] <eddyb> strcat: I thought you said LLVM doesn't have range analysis at all
[15:09:46] <whitequark> it's not very advanced though and in practice wants overflow to be undefined...
[15:09:54] <strcat> eddyb: I didn't think you meant ranges of integers
[15:09:56] *** Joins: bynaryshef (bynaryshef@moz-8F921C32.mem.bellsouth.net)
[15:10:18] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[15:10:19] <strcat> whitequark: yeah it requires inbounds GEP to do sane code generation
[15:10:20] <eddyb> strcat: a while ago, talking about integers
[15:10:23] <strcat> eddyb: oh
[15:10:25] <strcat> well yes
[15:10:27] <strcat> you can mark ranges ;p
[15:10:29] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[15:10:38] <strcat> but where are you going to get that from at the rust level?
[15:10:42] <eddyb> strcat: but LLVM can't infer them or do something smart?
[15:10:43] <whitequark> strcat: won't rust be able to guarantee inboundnessness?
[15:10:46] *** Joins: adwhit (Mibbit@moz-54C61813.cable.virginm.net)
[15:10:51] <strcat> whitequark: yes, it does
[15:11:02] <whitequark> (is that even a word?)
[15:11:04] <strcat> whitequark: we used to use GEP for the offset intrinsic, not inbounds GEP
[15:11:04] <dbaupp> fwiw, http://code.google.com/p/range-analysis/
[15:11:19] <whitequark> ah
[15:11:20] <eddyb> (smart as in "would require something like SMT ")
[15:11:23] <strcat> whitequark: because offset used to be safe (not *really* safe as you're going to use the result)
[15:11:53] <strcat> whitequark: anyway afaik we only generate inbounds GEP now
[15:12:11] <strcat> LLVM is really bad at optimizing out the array bounds checks though
[15:12:50] <strcat> pretty good at hoisting a check out of a loop
[15:13:00] * strcat shrugs
[15:13:00] <eddyb> strcat: when I looked at ~[T], the IR was doing something atrocious with pointers
[15:13:11] <strcat> eddyb: well ~[T] needs to be removed
[15:13:14] <eddyb> it was taking pointers to the length field and data
[15:13:33] <tiffany> I wouldn't be surprised if you need an approximation of a dependant type system to optimize out bounds checks
[15:13:33] <eddyb> and it wasn't obvious that those pointers couldn't alias (especially since you were moving the data pointer around)
[15:13:35] *** Joins: ricepuddin (graham@moz-A7384469.wlan.ic.ac.uk)
[15:15:07] <eddyb> tiffany: and then you move the SMT solver from LLVM to rustc
[15:15:11] <eddyb> sounds impractical :P
[15:15:20] <whitequark> tiffany: I'd think LLVM could see the inbound GEP, and since out-of-bounds loads through an inbounds GEP is UB, it would understand that bounds checks are redundant
[15:15:28] <whitequark> but apparently the logic is not there
[15:15:54] <strcat> whitequark: well I mean as a separate thing
[15:16:10] <strcat> rust's iterators optimize down to the same code as a loop in C
[15:16:19] <strcat> but regular accesses are bounds checked
[15:16:27] <strcat> and LLVM pretty much always fails to eliminate them
[15:16:51] *** Joins: jvrmaia (jvrmaia@488448C0.A3C460C4.EBCD9D32.IP)
[15:16:53] *** Joins: benjamin_ (benjamin@moz-A842198B.dip0.t-ipconnect.de)
[15:16:53] <strcat> whitequark: a major problem is how we pass parameters
[15:17:15] <eibwen> so an iterator doesn't do bounds checks?
[15:17:17] <eddyb> (see my comment above btw. it's loading the length before each comparison, even if it never changes)
[15:17:29] <whitequark> strcat: how do we do it?
[15:17:32] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[15:17:32] <strcat> eibwen: doesn't need bounds checks, it's looping until a condition is met
[15:17:48] <eibwen> yea, this was a postive suprise from me :)
[15:17:51] <strcat> whitequark: by-value passing for anything > 1 word is done via a pointer at the LLVM level (some things are always via ptr due to bugs stopping them from being switched)
[15:18:04] <eibwen> strcat: that it might be as efficient as for(int i = 0; i < NUM; i++)
[15:18:08] <strcat> whitequark: we generate the copy ourselves in the caller
[15:18:18] <strcat> whitequark: the major problem is that LLVM sees a pointer, and doesn't know it points to a valid object
[15:18:24] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[15:18:28] <strcat> whitequark: this applies to borrowed ptrs too, as they are non-null/valid
[15:18:39] *** Quits: Cevn (sameer@moz-F316C21E.hr.hr.cox.net) (Ping timeout)
[15:18:58] <dbaupp> can we mark a pointer/other values as always valid?
[15:19:07] <strcat> don't think so
[15:19:21] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[15:19:23] <strcat> I started adding sret to our return ptrs because it tells LLVM that invariant
[15:19:24] <strcat> and it helped a lot
[15:19:30] <strcat> but other parameters don't have that
[15:19:46] <strcat> and sret is annoying because it changes the ABI in a way that breaks tail call elim
[15:19:48] <whitequark> strcat: hm, rust does its own byval passing because of bugs in LLVM?
[15:19:49] <dbaupp> can we add sret to them? or would that be UB/break things?
[15:20:02] <whitequark> dbaupp: sret is invalid for proper arguments
[15:20:04] <strcat> whitequark: well, clang passes by-pointer too and marks the pointer as byval
[15:20:15] <whitequark> strcat: that's... weird.
[15:20:16] <dbaupp> whitequark: I assumed so
[15:20:17] <strcat> whitequark: and byval makes LLVM generate a copy
[15:20:28] <strcat> whitequark: afaik it's all ABI nonsense
[15:20:30] <strcat> but anyway
[15:20:43] <eddyb> #[inline(never)] fn bar(_f: Foo) {} fn foo(f: Foo) {bar(f);} that always makes a copy in foo that could be otherwise elided. it's a missing LLVM optimization, actually
[15:20:45] <strcat> since clang never generates by-value parameters/returns for large things, it isn't supported well
[15:20:49] <eddyb> (or so I've been told)
[15:21:08] <whitequark> yeah, sounds possible
[15:21:12] <strcat> whitequark: LLVM didn't used to have first-class aggregates so... that's why it evolved this way afaik
[15:21:14] <strcat> + ABI nonsense
[15:21:26] <strcat> like C99 complex numbers having a special ABI
[15:21:28] <eddyb> (with Foo larger than uint)
[15:21:40] <eddyb> strcat: wat?
[15:21:40] <whitequark> ABI nonsense certainly plays a role, but most of Rust functions map to fastcc
[15:22:04] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Quit: Leaving...)
[15:22:10] <strcat> whitequark: well we use cdecl and then LLVM switches it to fastcc for internal ones
[15:22:16] <strcat> but we don't try to follow the C ABI
[15:22:25] <strcat> since following the C ABI means doing super non-obvious things in the frontend
[15:22:27] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[15:22:41] <strcat> it would be ideal if we could just pass/return by aggregate
[15:22:42] <whitequark> eddyb: www.x86-64.org/documentation/abi.pdf‎ page 18
[15:22:52] <eddyb> do I even want to know?
[15:22:53] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[15:23:05] <whitequark> eddyb: perhaps you sleep way too well at night
[15:23:11] <eddyb> The requested URL /documentation/abi.pdfâ€Ž was not found on this server.
[15:23:19] <strcat> delete the weird stuff then
[15:23:21] <strcat> ;p
[15:23:28] <eddyb> whitequark: are you on windows?
[15:23:31] <whitequark> debian
[15:23:46] <whitequark> the link works for me also
[15:23:47] *** Joins: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au)
[15:23:49] <eddyb> weird... my IRC client was capable of seeing non-printable unicode. maybe they fixed it
[15:24:25] <eddyb> heh, 3 suse emails <3
[15:25:02] *** Quits: igork (Igor@9C577557.7893D71C.6E0EE79F.IP) (Quit: Leaving.)
[15:25:16] <eddyb> complex T... is that a thing?
[15:25:28] *** Quits: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au) (Ping timeout)
[15:25:46] <eddyb> I thought they added something in C11, but that... take it away from me :/
[15:26:00] <whitequark> C11 has fixed-point weirdness
[15:26:06] <eddyb> lol x87
[15:26:14] <strcat> eddyb: c99 has complex numbers
[15:27:01] <strcat> The fixed-point types are short _Fract, _Fract, long _Fract, long long _Fract, unsigned short _Fract, unsigned _Fract, unsigned long _Fract, unsigned long long _Fract, _Sat short _Fract, _Sat _Fract, _Sat long _Fract, _Sat long long _Fract, _Sat unsigned short _Fract, _Sat unsigned _Fract, _Sat unsigned long _Fract, _Sat unsigned long long _Fract, short _Accum, _Accum, long _Accum, long long
[15:27:03] <strcat> _Accum, unsigned short _Accum, unsigned _Accum, unsigned long _Accum, unsigned long long _Accum, _Sat short _Accum, _Sat _Accum, _Sat long _Accum, _Sat long long _Accum, _Sat unsigned short _Accum, _Sat unsigned _Accum, _Sat unsigned long _Accum, _Sat unsigned long long _Accum.
[15:27:16] <eddyb> *blink*
[15:27:41] <strcat> Fixed-point data values contain fractional and optional integral parts. The format of fixed-point data varies and depends on the target machine.
[15:27:44] <strcat> ????
[15:27:44] *** Joins: rca_ (rcatolino@moz-18AEB6AE.adsl.proxad.net)
[15:27:50] <whitequark> yes, it's insanity. also, it basically has the int.frac dot fixed on an arbitrary point
[15:28:10] <strcat> pdf.js is so slow ;s
[15:28:19] <whitequark> apparently several DSP vendors went to the committee and pushed a half-done solution unusable without nonstandard extensions
[15:28:20] *** Quits: rca (rcatolino@moz-10E18C17.adsl.proxad.net) (Ping timeout)
[15:28:23] <whitequark> so, the usual
[15:28:32] *** Quits: bjz_ (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[15:28:42] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[15:29:11] <whitequark> it also has atomics, implemented in a similar manner
[15:29:34] <whitequark> and I still wait for someone to explain me why C actually has destructors
[15:29:47] *** Quits: Kruppe (user@moz-26BAF00B.net.uwaterloo.ca) (Client exited)
[15:29:53] <Zr40> C has destructors?
[15:30:01] <rca_> whitequark: C has destructors?
[15:30:47] <eddyb> come on, don't look surprised
[15:30:51] <whitequark> the unwinding ABI and its implementation includes provisions for landing pads in C code, which can include cleanup but not catch clauses
[15:31:01] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[15:31:09] <whitequark> rust actually abuses the personality function of these landing pads
[15:31:29] <eddyb> I hated C, had a childish reaction to C++ (eww, "::"), then found C++ quite powerful, and so I hated C even more, and now I've come to love Rust
[15:31:34] <eddyb> etc. etc.
[15:32:08] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[15:32:09] <whitequark> also stuff like "C landing pad" is practically impossible to google for... so I have no idea why that even exists
[15:32:16] <eddyb> C11 is born out of desperation IMHO
[15:32:22] <Zr40> so C doesn't have destructors, but the ABI does?
[15:32:51] <whitequark> Zr40: I *think* there's something in the standard which causes that feature to be provided in the ABI
[15:32:58] *** Quits: moostik (Icedove@moz-1FF02BE5.w92-151.abo.wanadoo.fr) (Ping timeout)
[15:33:00] <whitequark> I mean, they probably didn't add it just for funsies
[15:33:37] <whitequark> of course it's not C++-style explicitly definable destructions, but just some obscure crap
[15:33:50] <whitequark> which is nevertheless equivalent to having destructors
[15:34:20] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[15:35:12] <adwhit> Hi there - I submitted a pull request here: https://github.com/mozilla/rust/pull/11615 and I'm bit confused, it has been merged before I could make the requested amendments?
[15:35:18] <strcat> Zr40: GNU C has dtors ;p
[15:35:39] <rca_> whitequark: but will the landing pad be run while leaving a function normally or via the personality function only?
[15:35:40] <benh> adwhit: Looks like it was in fact the bot who got confused :)
[15:36:09] <benh> adwhit: Just do a follow-up PR at your leisure, I guess.
[15:36:21] <whitequark> rca_: only when unwinding
[15:36:33] <pnkfelix> adwhit: I assume cmr knew full well that bors would go ahead and merge in your changes
[15:36:43] <whitequark> also, I figured it out via this comment in compiler-rt: https://llvm.org/svn/llvm-project/compiler-rt/trunk/lib/gcc_personality_v0.c
[15:36:56] <whitequark> it's for a GNU-specific extension __attribute__((cleanup(...)))
[15:37:03] *** Joins: Sharp (Sharp@moz-EEC85237.hsd1.ca.comcast.net)
[15:37:06] <whitequark> so, ANSI C doesn't have them, no
[15:37:13] <strcat> whitequark: they also have another attribute for dtors
[15:37:17] *** Joins: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com)
[15:37:33] <strcat> weird stuff
[15:37:39] <whitequark> cleanup (cleanup_function)
[15:37:39] <whitequark> The cleanup attribute runs a function when the variable goes out of scope. This attribute can only be applied to auto function scope variables; it may not be applied to parameters or variables with static storage duration. The function must take one parameter, a pointer to a type compatible with the variable. The return value of the function (if any) is ignored.
[15:37:44] <whitequark> If -fexceptions is enabled, then cleanup_function is run during the stack unwinding that happens during the processing of the exception. Note that the cleanup attribute does not allow the exception to be caught, only to perform an action. It is undefined what happens if cleanup_function does not return normally. 
[15:37:59] <whitequark> rca_: it's not only when unwinding! it's actually destructors
[15:38:05] <strcat> whitequark: http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html
[15:38:08] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[15:38:14] <whitequark> yes, just copy-pasted from there
[15:38:15] <strcat> whitequark: constructor/destructor attributes
[15:38:18] <strcat> ;p
[15:38:19] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[15:38:48] <whitequark> strcat: oh, that's just term confusion. it's static initializers/deinitializers
[15:38:52] <strcat> yeah
[15:38:53] <adwhit> pnkfelix: I assumed it was deliberate! I mustn't forget to do the doc though
[15:39:04] <strcat> whitequark: they have another thing you can put on structs though iirc
[15:39:06] <strcat> trying to find it
[15:39:24] <benh> What's that? Any sufficiently complicated C or C-like language implementation contains an ad-hoc and informally-specified implementation of half of C++?
[15:39:28] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[15:39:37] <whitequark> ... including C++
[15:39:47] <Zr40> benh: that was originally about LISP, right?
[15:39:48] <benh> C++ has two of those :D
[15:40:00] <whitequark> Zr40: common lisp, yes. greenspun's tenth rule iirc
[15:40:03] <benh> yeah
[15:40:25] <benh> One of those bits of fp propaganda you pick up without ever having written a line of lisp code...
[15:40:26] *** Quits: adwhit (Mibbit@moz-54C61813.cable.virginm.net) (Quit: http://www.mibbit.com ajax IRC Client)
[15:41:07] <strcat> common lisp? functional? no more than rust ;p
[15:41:49] <bjz> http://c2.com/cgi/wiki?GreenspunsTenthRuleOfProgramming
[15:41:54] <benh> strcat: At this point I just assume 'functional' means how many of their idioms are built out of closures
[15:41:58] <bjz> <3 the c2 wiki
[15:42:06] *** Quits: heftig (heftig@moz-D746319F.unitymedia.biz) (Ping timeout)
[15:42:14] <benh> what with everybody _having_ closures these days
[15:42:22] *** Joins: Kruppe (user@moz-FF408BBD.net.uwaterloo.ca)
[15:42:41] <whitequark> I think a useful definition of "functional" would be "suited well to work with immutable, recursive data structures"
[15:43:07] *** Quits: autra (augustin@A14DAE84.7F753DD1.EE2CA32B.IP) (Quit: by!)
[15:43:08] <strcat> whitequark: immutable data gets really annoying without laziness
[15:43:22] <strcat> need it to make a cyclic data structure
[15:43:32] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[15:43:50] <whitequark> strcat: alternatively you can make it mostly immutable
[15:46:06] <rca_> whitequark: i've been reading the gnu declarations attributes link. Fun stuff. But the destructors seem to only be run after a call to exit(), or a return from main(). You're not doint RAII with that anytime soon :)
[15:46:45] <strcat> rca_: the  cleanup attribute lets you attach a dtor to a variable
[15:47:07] <rca_> oh i was looking at the destructor attribute.
[15:47:13] <whitequark> yeah it's deceptively named
[15:47:17] <benh> Does that one work with exit() though?
[15:47:24] <whitequark> I think it does
[15:47:29] <Edwards> So here's a question for you guys. Is there any written rationale anywhere for Rust's lifetime system? Research into making lifetimes inferred, that sort of thing?
[15:47:46] <strcat> whitequark: afaik the naming comes from it using the same machinery as used for C++ dtors/ctors in globals
[15:47:54] *** Quits: jsonnull (Thunderbir@E86DD23.582C899D.494A0F8B.IP) (Ping timeout)
[15:48:04] <dbaupp> Edwards: I believe lifetime inference was tried, but didn't work fully
[15:48:18] *** Quits: wilkie (wilkie@moz-A19F104D.pitbpa.fios.verizon.net) (Ping timeout)
[15:48:47] <strcat> and it was still just local inference
[15:48:53] <strcat> since rust intentionally avoids global type inference
[15:49:18] <whitequark> strcat: doesn't that just place the function into .init.$PRIO / .fini.$PRIO ?
[15:49:30] <eibwen> global type inference like the type of function parameters/results?
[15:49:51] <strcat> eibwen: yes
[15:50:59] *** Joins: pzol (pzol@moz-553BEE64.dynamic.chello.pl)
[15:51:15] *** Joins: jsonnull (Thunderbir@E86DD23.582C899D.494A0F8B.IP)
[15:51:17] *** Joins: igork (Igor@9C577557.7893D71C.6E0EE79F.IP)
[15:52:41] *** Joins: wilkie (wilkie@moz-A19F104D.pitbpa.fios.verizon.net)
[15:54:18] *** Quits: pzol (pzol@moz-553BEE64.dynamic.chello.pl) (Client exited)
[15:54:24] *** Joins: pzol (pzol@moz-553BEE64.dynamic.chello.pl)
[15:55:11] *** Joins: fyolnish (fyolnish@moz-A068431F.uqwimax.jp)
[15:55:13] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[15:55:40] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[15:56:27] *** Joins: moostik (Icedove@5A22E6A1.10715965.BCDF592F.IP)
[15:56:30] *** Quits: ricepuddin (graham@moz-A7384469.wlan.ic.ac.uk) (Ping timeout)
[15:56:36] *** Quits: dave1629 (dave@1A49DFD2.75B49943.DDE5D3F6.IP) (Quit: dave1629)
[15:56:51] *** Quits: fyolnish (fyolnish@moz-A068431F.uqwimax.jp) (Ping timeout)
[15:59:17] *** Quits: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP) (Quit: leaving)
[15:59:32] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Client exited)
[15:59:53] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[16:00:28] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[16:01:35] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Ping timeout)
[16:01:58] *** Joins: ricepuddin (graham@moz-A7384469.wlan.ic.ac.uk)
[16:02:11] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[16:03:35] *** Joins: autra (augustin@A14DAE84.7F753DD1.EE2CA32B.IP)
[16:03:53] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[16:04:11] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[16:04:50] *** Joins: herrwolfe45 (user@moz-3F0F09A7.cm.sunflower.com)
[16:05:39] *** Joins: yuriks (yuriks@8E8458DA.1755AC6C.F6EE4B40.IP)
[16:06:46] *** Quits: eibwen (heinrich59@moz-DE11707E.de) (Quit: Lost terminal)
[16:07:23] <herrwolfe45> coming from python, is there an existing way to import a list/array of all printable characters in rust?
[16:07:41] <herrwolfe45> in python, one could do from string import printable
[16:08:36] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[16:08:36] *** ChanServ sets mode: +o jdm
[16:09:14] <whitequark> there's a unicode database in the standard library
[16:09:19] <strcat> herrwolfe45: in python that's just ascii ones
[16:09:52] *** Quits: Kruppe (user@moz-FF408BBD.net.uwaterloo.ca) (Ping timeout)
[16:10:15] <herrwolfe45> thanks whitequark  - I'll check there
[16:11:16] <herrwolfe45> strcat: just out of curiosity, in python3 is it still just the ascii ones?
[16:11:36] <strcat> herrwolfe45: yes, it'd be enormous if it was non-zero-width unicode code points
[16:11:46] <strcat> and 'printable' is a questionable thing to call that
[16:11:47] <herrwolfe45> good point, thanks
[16:12:00] <strcat> like, do you include combining chars in printable?
[16:12:00] *** Quits: pepper_chico (pepper_chi@moz-13107F6.dsl.telesp.net.br) (Ping timeout)
[16:12:02] <strcat> they are drawn
[16:12:07] <strcat> but they follow another code point
[16:12:28] *** Quits: ricepuddin (graham@moz-A7384469.wlan.ic.ac.uk) (Ping timeout)
[16:13:00] *** Joins: dave1629 (dave@1A49DFD2.75B49943.DDE5D3F6.IP)
[16:13:36] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[16:14:23] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[16:14:30] *** Quits: tgummerer (tgummerer@moz-582025B2.members.linode.com) (Quit: Coyote finally caught me)
[16:14:38] *** Joins: tgummerer (tgummerer@moz-582025B2.members.linode.com)
[16:15:19] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[16:16:06] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[16:16:40] *** Quits: victorporof (victorporo@D3766C4.A4BCC9AB.79933D60.IP) (Quit: victorporof)
[16:16:59] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Ping timeout)
[16:17:04] *** Joins: victorporof (victorporo@D3766C4.A4BCC9AB.79933D60.IP)
[16:17:45] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[16:17:59] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[16:18:01] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[16:18:40] *** Quits: mankyKitty (Instantbir@moz-9B898D95.enst-bretagne.fr) (Ping timeout)
[16:19:46] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[16:21:00] *** Quits: Ferreus (ferreus@moz-E0229F7D.dip0.t-ipconnect.de) (Ping timeout)
[16:23:02] *** Quits: lpy (lpy@7FD2B9AB.3720F6C5.952560D4.IP) (Quit: Leaving...)
[16:23:36] *** Joins: rumpler (Mibbit@moz-C65D5F59.adsl.highway.telekom.at)
[16:24:32] *** Joins: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au)
[16:25:51] *** Joins: mankyKitty (Instantbir@moz-9B898D95.enst-bretagne.fr)
[16:26:09] <bjz> hey - Rust isn't on c2: http://c2.com/cgi/wiki?RustLanguage
[16:26:11] <bjz> :P
[16:26:13] *** Quits: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au) (Ping timeout)
[16:26:19] *** Joins: Ms2ger (Ms2ger@53A418F8.CD932C3B.187A1082.IP)
[16:27:44] *** Joins: FreeFull (freefull@moz-4F046D30.as13285.net)
[16:28:40] *** Quits: dave1629 (dave@1A49DFD2.75B49943.DDE5D3F6.IP) (Quit: dave1629)
[16:29:15] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[16:31:42] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[16:33:24] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[16:34:09] *** Quits: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP) (Input/output error)
[16:35:38] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[16:37:00] *** Joins: Denommus (user@B10298EA.CBEEDAD3.AD91B79.IP)
[16:37:02] *** Joins: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net)
[16:38:26] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[16:38:32] *** Quits: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP) (Ping timeout)
[16:41:25] *** Parts: herrwolfe45 (user@moz-3F0F09A7.cm.sunflower.com) (ERC Version 5.3 (IRC client for Emacs))
[16:41:34] *** Quits: gwty (gwtypc@928A4B44.FD2DAC3C.C924875F.IP) (Ping timeout)
[16:41:38] *** Quits: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net) (Quit: bye!)
[16:42:29] *** Joins: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net)
[16:43:21] *** Joins: gwty (gwtypc@928A4B44.FD2DAC3C.C924875F.IP)
[16:43:57] *** Quits: canhtak (canhtak@moz-6C22A50C.wl.t.ulaval.ca) (Quit: canhtak)
[16:44:14] *** Quits: mouse_ (mouse@moz-373942D2.dhcp.yndx.net) (Ping timeout)
[16:44:45] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[16:45:26] *** Joins: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP)
[16:47:10] *** Joins: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP)
[16:47:18] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Ping timeout)
[16:48:00] *** Quits: mankyKitty (Instantbir@moz-9B898D95.enst-bretagne.fr) (Ping timeout)
[16:48:16] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[16:48:58] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[16:49:10] *** Quits: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net) (Quit: bye!)
[16:52:13] *** Quits: rmccue (rmccue@moz-66F4DDD7.static.exetel.com.au) (Quit: Leaving)
[16:53:05] *** Quits: AvianFlu (AvianFlu@974D245D.130DDD13.67CD788C.IP) (Input/output error)
[16:55:25] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[16:56:01] *** Joins: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[16:56:20] *** Joins: fyolnish (fyolnish@moz-A068431F.uqwimax.jp)
[16:56:31] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[16:58:13] *** Joins: dave1629 (dave@1A49DFD2.75B49943.DDE5D3F6.IP)
[16:58:16] *** Quits: rumpler (Mibbit@moz-C65D5F59.adsl.highway.telekom.at) (Quit: http://www.mibbit.com ajax IRC Client)
[16:59:12] *** Quits: bakkdoor (bakkdoor@moz-3562EADE.osnanet.de) (Quit: Linkinus - http://linkinus.com)
[16:59:21] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[16:59:44] *** Quits: fyolnish (fyolnish@moz-A068431F.uqwimax.jp) (Ping timeout)
[16:59:51] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[16:59:51] *** Joins: ricepuddin (graham@moz-EE1EF9D8.wlan.ic.ac.uk)
[17:00:43] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[17:01:53] <Tobba> ugh
[17:02:04] <Tobba> why is using unsigned ints the biggest pain in the ass ever in any language
[17:02:25] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[17:02:47] <tiffany> why is it a pain?
[17:03:32] *** Quits: dave1629 (dave@1A49DFD2.75B49943.DDE5D3F6.IP) (Quit: dave1629)
[17:04:15] <Tobba> right now
[17:04:25] <Tobba> rust is getting the idea of throwing my uints to ints as soon as I perform any operation on them
[17:04:28] <Tobba> and literals are always ints
[17:04:30] <Tobba> and ugh
[17:05:21] <strcat> Tobba: literals are generic, not ints
[17:05:25] *** Joins: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au)
[17:05:32] <strcat> 5i is an int literal, 5 is generic
[17:06:24] <pnkfelix> Tobba: and also, 5u is a uint literal
[17:06:27] *** Joins: popinman322 (magisun@moz-DB516D62.twcny.res.rr.com)
[17:06:47] <pnkfelix> Tobba: so even if you have trouble with the generic forms, you can explicitly indicate your intent that way.
[17:06:49] <Tobba> yeah I know
[17:06:51] *** Quits: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com) (Quit: csherratt)
[17:06:51] *** Joins: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP)
[17:07:01] <Tobba> any use of unsigneds ever:
[17:07:05] <Tobba> as int as int as int as int as int as int
[17:07:07] *** Quits: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au) (Ping timeout)
[17:07:43] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[17:07:51] *** Quits: benjamin_ (benjamin@moz-A842198B.dip0.t-ipconnect.de) (Ping timeout)
[17:09:23] *** Joins: Ferreus (ferreus@moz-D830B08C.pools.arcor-ip.net)
[17:11:01] <Tobba> I can probably improve some of it by using craploads of generics
[17:11:13] <Tobba> but when stuff like intrinsics gets involved it gets beyond awful, mutability too
[17:11:58] *** Quits: ricepuddin (graham@moz-EE1EF9D8.wlan.ic.ac.uk) (Ping timeout)
[17:12:41] <popinman322> So I built a library (ncurses-rs) and it installed to the git root, but when I move it to "~/.rust/lib/<platform>/" rustpkg says it can't find the library. Do I have to mess with the rustpkg_db.json file or something?
[17:13:02] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[17:14:24] *** Joins: tq (tq@moz-9FE9CCF4.a251.priv.bahnhof.se)
[17:15:05] *** Quits: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP) (Ping timeout)
[17:15:06] *** Joins: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP)
[17:16:10] <tq> Hm, the current version of rust on github fails to build.
[17:16:15] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[17:16:27] <Tobba> hm
[17:16:29] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[17:16:35] <olsonjeffery> happy MLK day, rust
[17:16:37] <Tobba> I really wish libstd was split into a platform dependant part and one independant part
[17:16:37] <cmr> tq: maybe on your platform with your config, yes, but everything on master goes through CI before it lands.
[17:16:45] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[17:16:45] <cmr> Tobba: in progress
[17:16:58] *** Joins: SingingBoyo (SingingBoy@DA28FB90.A5D0D593.4F048BDC.IP)
[17:16:59] <olsonjeffery> anyone care to proofread/critique a blog post on network IO/serialization i'm working on? thanks.. https://gist.github.com/olsonjeffery/8524390
[17:17:00] <Tobba> whats the platform dependant one named?
[17:17:11] <cmr> doesn't fully exist yet
[17:17:36] <cmr> like I said, in progress :)
[17:17:45] <Tobba> right
[17:17:47] <tq> task 'rustc' failed at 'Couldn't find visit method for uniq_managed', /jox/code/rust/src/libstd/option.rs:111
[17:17:55] <Tobba> in my system file paths partially dont even make sense
[17:17:59] <tq> error: internal compiler error: unexpected failure
[17:18:00] <Tobba> absolute paths sorta do
[17:18:05] <cmr> tq: do you have an old build tree around? git clean -xdf
[17:18:18] *** Quits: andre (andre@moz-5302C5C9.dynamic.adsl.gvt.net.br) (Quit: leaving)
[17:18:25] <tq> cmr, no I just pulled it fresh from github
[17:18:28] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[17:18:30] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[17:18:33] <Tobba> yeah mine does that too
[17:18:34] <cmr> tq: OS?
[17:18:44] <tq> osx
[17:18:44] <cmr> oh yikes, reproduction!
[17:18:45] <Tobba> but only when compiling libstd via rustc
[17:18:53] <Tobba> from mingw with the makefile its fine
[17:18:57] <cmr> Tobba: did you pass --cfg stage2?
[17:19:06] <Tobba> ah
[17:19:07] *** Joins: igstan (igstan@moz-42A3EA4C.residential.rdsnet.ro)
[17:19:09] <lynks> Earnestly: I have really confused myself by reading the glibc sources. I no longer know what posix is.
[17:19:13] <eddyb> uniq_managed was removed, but not by me...
[17:19:29] <Tobba> dunno why the hell it complains though
[17:19:51] <Tobba> yikes libstd takes long to build
[17:19:52] <cmr> because staging.
[17:19:59] <eddyb> the snapshot must be older than the source
[17:20:13] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[17:20:14] <eddyb> (older than cfg(stage0) source, that is)
[17:20:45] *** Joins: sedman (sedman@E4D2F0A.47298EC7.57E8EAD3.IP)
[17:20:50] <olsonjeffery> cmr: could I impose on you to give the above post a quick read? it's pretty short..
[17:20:59] <cmr> olsonjeffery: one sec.
[17:21:02] <SiegeLord> Is it possible for an --rlib vs --lib to have different dependencies?
[17:21:06] <cmr> I have it open, but doing a bazillion things.
[17:21:21] <SiegeLord> In the sense of different source files
[17:21:21] * olsonjeffery nods
[17:21:30] <olsonjeffery> cmr: thanks. no hurries.
[17:21:35] <Tobba> hm
[17:21:43] <Tobba> building libstd only uses up like 40% of my CPU
[17:21:45] <eddyb> SiegeLord: with cfg, though not sure if rlib/lib creates cfg
[17:21:49] <Tobba> threading anyone
[17:21:56] <eddyb> variables or... whatever they're called
[17:21:57] <Tobba> 30% even
[17:22:03] <SiegeLord> I'm going to hope it doesn't >_<
[17:22:04] <SiegeLord> lol
[17:22:31] <eddyb> SiegeLord: you don't want it? then why are you asking?
[17:22:49] <SiegeLord> In case somebody else wants it. Coding up dependency scanning for CMake
[17:23:21] <eddyb> don't we already have a make dependency generation option?
[17:23:26] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[17:23:30] <eddyb> SiegeLord: can't you just parse that output?
[17:23:38] <SiegeLord> That's what I'm doing
[17:23:51] <eddyb> sooo what's with --lib/--rlib?
[17:24:12] <SiegeLord> If you do --lib + --rlib it'll produce 2 lines of dependencies
[17:24:23] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[17:24:26] *** Joins: brson (brson@moz-5386576F.sd.sd.cox.net)
[17:24:26] *** ChanServ sets mode: +ao brson brson
[17:24:27] <SiegeLord> I'm wondering if I have to parse both, and what to do if they're different
[17:24:50] <SiegeLord> I'm going under the assumption that they are identical for now
[17:25:07] <SiegeLord> (aside from the output file, obviously)
[17:25:29] <popinman322> The package system seems a bit insane atm. http://pastebin.com/u1cjTTU4
[17:25:37] <popinman322> How can rustpkg both find and not find ncurses?
[17:26:04] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[17:26:05] <SiegeLord> People are working on fixing/replacing rustpkg as we speak ;)
[17:26:15] <cmr> fine I'll announce it
[17:26:23] <popinman322> What should I use in the interim?
[17:26:26] <cmr> Hey all! Look what I made: https://github.com/cmr/cargo-lite
[17:26:52] <SiegeLord> popinman322: git checkout + ./build.sh
[17:26:56] <SiegeLord> *git clone
[17:27:11] <SiegeLord> Or make, or cmake .. && make etc
[17:27:19] <SiegeLord> I.e. do what you do in C++
[17:27:23] <olsonjeffery> cmr: nice
[17:27:30] <popinman322> Ach, I hate makefiles
[17:27:49] <SiegeLord> I don't even know what cargo-lite is supposed to do :P
[17:28:08] *** Quits: veddan (viktor@moz-C79BC80B.csbnet.se) (Ping timeout)
[17:28:17] *** Quits: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP) (Ping timeout)
[17:28:21] <cmr> it's supposed to fetch and build dependencies.
[17:28:24] *** Joins: veddan (viktor@moz-C79BC80B.csbnet.se)
[17:28:27] <olsonjeffery> SiegeLord: "cargo" was the pre-rustpkg stab at a centralizzed package manager ala npm
[17:28:29] <SiegeLord> I like how "build system is a non-goal" and then there is a [build] section in the .conf file
[17:28:31] <bjz> cmr: hey, you're not meant to share that around
[17:28:31] <olsonjeffery> but it never really went anywhere
[17:28:44] <olsonjeffery> it was a git repo under mozilla's control that listed downstream packages
[17:28:45] <bjz> cmr: didn't you hear what cmr said?
[17:28:50] <bjz> >_<
[17:29:00] <SiegeLord> It's cmr's evil twin. He's evil
[17:29:29] <cmr> SiegeLord: yeah :p
[17:29:56] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[17:30:20] <olsonjeffery> basically, someone built a package diretory before there was a dependency/build system hoping that the Build Gods would bless us with a working system.
[17:30:25] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[17:30:25] <olsonjeffery> so i guess it was a cargo cult approach. heh.
[17:30:32] *** Joins: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP)
[17:30:33] <SiegeLord> Same thing about 'rustc' integration :P
[17:30:41] <cmr> yeah 
[17:30:45] * cmr fixes readme
[17:30:56] <SiegeLord> It's as schizophrenic as the creator ;)
[17:31:14] <cmr> to be fair I hadn't slept for like 26 hours when I wrote that :p
[17:31:16] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[17:32:02] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[17:33:09] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[17:33:44] *** Quits: c-a (c-a@moz-8D7A06D6.a163.priv.bahnhof.se) (Quit: Ex-Chat)
[17:35:33] *** Joins: Cevn (sameer@moz-F316C21E.hr.hr.cox.net)
[17:36:28] <Tobba> I havent slept for like 26 hours either but I somehow managed to scramble together working syscalls
[17:36:41] *** Quits: Denommus (user@B10298EA.CBEEDAD3.AD91B79.IP) (Quit: ERC Version 5.3 (IRC client for Emacs))
[17:36:53] <cmr> hey cargo-lite works!
[17:36:55] <cmr> :p
[17:36:59] <Tobba> neat
[17:37:08] <Ms2ger> Tobba, in that case, I'd put quotes around "working" ;)
[17:37:26] <Tobba> it only crashed a good few times from stupidity
[17:37:29] *** Quits: skrylar (skrylar@moz-F692F728.austin.res.rr.com) (Ping timeout)
[17:38:54] *** Joins: mankyKitty (Instantbir@moz-21AD3B58.rev.sfr.net)
[17:39:29] *** Joins: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP)
[17:39:38] *** Quits: gwty (gwtypc@928A4B44.FD2DAC3C.C924875F.IP) (Ping timeout)
[17:40:22] <cmr> SiegeLord: readme updated, look better now?
[17:40:31] <cmr> (changed non-goals, added paragraph in intro)
[17:41:17] <SiegeLord> Aww, why no rust rewrite?
[17:41:36] *** Joins: gwty (gwtypc@1EFB01E7.E90DBF57.137C914F.IP)
[17:41:37] <cmr> I ain't dealing with that
[17:41:40] <SiegeLord> (I thought at first that referred to rewriting rustc)
[17:41:43] <cmr> heh
[17:41:47] <SiegeLord> Which is a common non-goal
[17:42:01] <cmr> as much as bstrie_nope and dbaupp like to joke about it, I will *not* indeed be rewriting rustc.
[17:42:35] <SiegeLord> "No configurable package script" what about that conf file?
[17:42:37] * eddyb shyly raises a hand
[17:42:53] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[17:42:55] <cmr> well... that's not quite what rustpkg thinks is a package script.
[17:42:59] <cmr> I'll rephrase.
[17:43:08] <SiegeLord> Ooh, I see what you mean by that
[17:43:54] <cmr> updated.
[17:44:05] *** Quits: sigma1 (sigma@moz-1C81041B.range86-184.btcentralplus.com) (Ping timeout)
[17:44:32] *** bstrie_nope is now known as bstrie_ng
[17:44:38] *** Joins: pzol_fon (pzol_fon@E6DF3E17.66AAAD72.E44F24E1.IP)
[17:44:45] *** Joins: doener (doener@moz-C68F600D.unity-media.net)
[17:45:06] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[17:45:12] *** Joins: sigma (sigma@moz-1C81041B.range86-184.btcentralplus.com)
[17:45:17] *** Joins: mouse_ (mouse@moz-813060C4.broadband.corbina.ru)
[17:45:20] <SiegeLord> Alright, no RustCMake supports combining --lib and --rlib XD
[17:45:42] <cmr> I actually want to support that.
[17:45:44] <SiegeLord> *now
[17:46:20] *** Quits: pzol_fon (pzol_fon@E6DF3E17.66AAAD72.E44F24E1.IP) (Ping timeout)
[17:46:22] <SiegeLord> I kind of wish --dep-info wasn't what it is
[17:46:42] <SiegeLord> Does ninja build fix the spaces in the filename problem of make?
[17:46:46] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Ping timeout)
[17:47:12] <tiffany> time for me to get back into writing rust
[17:48:04] <cmr> SiegeLord: not sure, actually.
[17:48:06] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[17:48:27] <pyon> Do dumb pointers (*) also get autodereferenced when using do notation (ptr.some_method(...)) ?
[17:48:34] <eddyb> pyon: nope
[17:48:48] <pyon> Dang.
[17:48:51] <eddyb> why?
[17:49:06] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[17:49:07] <SiegeLord> Looks like it provides an escape mechanism
[17:49:21] <eddyb> life *should* be hard when you're using unsafe pointers
[17:49:38] <eddyb> if you work with FFI, write macros for common patterns
[17:49:45] <cmr> pyon: auto-deref of raw pointers would be double-unsafe since they aren't require to point to a valid value of the type.
[17:50:02] <pyon> cmr: Ah, right! Makes sense.
[17:50:26] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[17:50:53] *** Joins: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr)
[17:51:09] *** Quits: vmx (vmx@moz-E0F5F46.pools.arcor-ip.net) (Quit: Leaving)
[17:51:37] *** Quits: Cevn (sameer@moz-F316C21E.hr.hr.cox.net) (Ping timeout)
[17:52:06] *** Quits: mankyKitty (Instantbir@moz-21AD3B58.rev.sfr.net) (Quit: mankyKitty)
[17:52:12] *** Quits: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com) (Ping timeout)
[17:53:00] *** Quits: japaric (japaric@465C3E59.F60EC59D.F29ED47E.IP) (Ping timeout)
[17:53:10] *** Joins: Kruppe (user@moz-253119B0.esg.uwaterloo.ca)
[17:53:14] *** Joins: japaric (japaric@465C3E59.F60EC59D.F29ED47E.IP)
[17:54:39] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[17:56:37] <cmr> olsonjeffery: looks good!
[17:56:48] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[17:56:51] <cmr> olsonjeffery: very well written I think, too.
[17:57:20] <cmr> obviously in the "introductory rust" category, but that's definitely a good thing at this point.
[17:57:40] *** Joins: dave1629 (dave@E84667F4.474E6E0A.DDE5D3F6.IP)
[17:58:07] <olsonjeffery> cmr: damnnation by faint praise!
[17:58:24] *** Joins: vikstrous (v@13F2CEC5.7672369.D8E68FF6.IP)
[17:58:35] <olsonjeffery> as i snarked on reddit recently, ill let others bang on the ownership/lifetime drum (which, to be fair, is also pretty introductory)
[17:58:48] <olsonjeffery> so ill go where there's underserved markets (like explaining key stdlib semantics)
[17:58:52] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[17:59:33] *** Joins: Jemaclus (Mibbit@4EEAB704.5843BA5A.D4E4C7A5.IP)
[18:00:00] *** Quits: sedman (sedman@E4D2F0A.47298EC7.57E8EAD3.IP) (Ping timeout)
[18:00:08] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[18:00:11] <adridu59> we have regularly PRs that fix a few things in rust pkg
[18:00:18] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Client exited)
[18:00:32] <adridu59> I think it should stabilize sometimes; it's been left in an almost finished state
[18:00:38] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[18:01:06] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[18:01:31] <wycats> adridu59: indeed
[18:01:42] <Jemaclus> so I've been working on a few small programs with Rust over the last week or so, and I think I have a handle on it now. Are there any simple things that need to be done in Rust that I can cut my teeth on? Like math libs or something...?
[18:01:45] <wycats> adridu59: there's some motion on that under the water
[18:01:45] *** zz_kimundi is now known as kimundi
[18:01:57] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[18:02:05] <wycats> the sharks acometh
[18:02:11] <wycats> and by the sharks, I mean me :P
[18:02:13] <wycats> or something
[18:02:34] <adridu59> wycats: we have a few stalled PRs right now
[18:02:40] <adridu59> but it'll get better
[18:02:46] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[18:02:51] <wycats> adridu59: c
[18:03:44] <adridu59> Jemaclus: bjz/math-rs
[18:04:58] *** Quits: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[18:05:19] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[18:05:37] *** Parts: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP) ()
[18:06:15] *** Joins: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au)
[18:06:58] <Jemaclus> cool thanks
[18:07:00] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[18:07:56] *** Quits: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au) (Ping timeout)
[18:11:13] *** Quits: Sharp (Sharp@moz-EEC85237.hsd1.ca.comcast.net) (Quit: Sharp)
[18:11:19] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[18:12:04] *** Quits: pilf (pilf@8FA95888.1A994CBC.4B228AD7.IP) (Quit: pilf)
[18:13:51] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[18:14:25] *** Joins: vadimg (vadimg@BCFFDE00.DF0A212.39C00A7A.IP)
[18:15:20] *** Quits: jvrmaia (jvrmaia@488448C0.A3C460C4.EBCD9D32.IP) (Quit: Leaving...)
[18:15:40] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Quit: ziad)
[18:15:48] *** Joins: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com)
[18:15:58] *** Quits: autra (augustin@A14DAE84.7F753DD1.EE2CA32B.IP) (Quit: by!)
[18:16:09] *** Quits: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP) (Input/output error)
[18:17:09] <cmr> http://www.reddit.com/r/rust/comments/1voshl/cargolite_a_dirtsimple_package_manager/
[18:17:17] *** Joins: joebobjoe (Dale@moz-4014DDC7.ga.at.cox.net)
[18:17:38] *** Parts: joebobjoe (Dale@moz-4014DDC7.ga.at.cox.net) ()
[18:18:39] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[18:20:13] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[18:20:14] <ronny> hi
[18:20:15] *** Quits: gwty (gwtypc@1EFB01E7.E90DBF57.137C914F.IP) (Ping timeout)
[18:20:15] <sfackler> cmr: cool! figuring out the multi-crate package situation sooner rather than later would probably be a good idea imo
[18:20:24] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[18:20:38] *** Joins: Cevn (sameer@moz-F316C21E.hr.hr.cox.net)
[18:20:50] <cmr> sfackler: should be trivial.
[18:21:00] <sfackler> I guess just changing crate_file = "" to crate_files = [""] would work
[18:21:05] <ronny> how far along the road is rust for bare environments (in particulart wrt kernel development)
[18:21:06] <cmr> add sub_crates = ["src/whatever", "baz/whatever"]
[18:21:11] <sfackler> yeah
[18:21:14] <cmr> ronny: already used for it.
[18:21:18] <cmr> (and it loads the conf from them)
[18:21:19] *** Quits: dave1629 (dave@E84667F4.474E6E0A.DDE5D3F6.IP) (Quit: dave1629)
[18:21:51] <sfackler> it'd have to track inter-crate dependencies too
[18:22:00] <ronny> cmr: any keywords that help googleing for those projects?
[18:22:22] <cmr> ronny: nope not really!
[18:22:28] *** Quits: Cevn (sameer@moz-F316C21E.hr.hr.cox.net) (Ping timeout)
[18:22:44] <cmr> sfackler: dep management isn't in scope really :(
[18:22:50] <cmr> at least not versioned deps.
[18:23:23] <sfackler> cmr: I just meant package foo contains crates bar and baz, and baz depends on bar
[18:23:30] <cmr> ok yeah that's fine.
[18:23:44] <sfackler> so it'd just have to figure out the proper build order
[18:23:59] <cmr> source order in the conf :p
[18:24:06] <ronny> hmmk
[18:24:06] <sfackler> haha
[18:24:08] <sfackler> that'd work
[18:24:22] *** Joins: dmac (Adium@moz-99EF2EE6.hfc.comcastbusiness.net)
[18:26:06] <tq> ronny: "rust" "kernel" ?
[18:26:17] <ronny> tq: as in operating system kernel
[18:26:48] <steveklabnik> http://github.com/charliesome/rustboot
[18:26:55] <steveklabnik> is the first one lots of people are working off of
[18:27:00] <steveklabnik> ronny: i believe there's #rust-osdev
[18:27:38] <ronny> steveklabnik: thx for the channel
[18:27:48] *** Joins: nszceta (quassel@moz-E6CA8D6.hsd1.pa.comcast.net)
[18:27:51] <steveklabnik> any time
[18:28:05] <ronny> that rustboot thing is a bit non-func tho, it lacks details wrt memory, tasks, and anything more interesting
[18:28:26] <nszceta> has anybody written an operating system using assembly and rust?
[18:28:53] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Quit: Leaving...)
[18:29:23] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Quit: Lost terminal)
[18:29:27] <eddyb> you really need assembly because rust lacks naked functions
[18:30:01] <eddyb> but if we fix that (can we?), you need 0 assembly and 0 C to run a Rust kernel
[18:30:58] *** Joins: patpat (patpat@moz-1599AAE4.as13285.net)
[18:31:01] *** Joins: ziad (ziad@B20586FB.BDB3D91.6E370BFC.IP)
[18:31:04] *** jorendorff is now known as jorendorff_away
[18:31:28] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[18:32:11] <steveklabnik> ronny: right, people have been building on top of it
[18:32:25] <nszceta> eddyb: that would be epic
[18:32:32] *** Quits: patpat (patpat@moz-1599AAE4.as13285.net) (Quit: )
[18:32:35] *** Joins: patpat (patpat@moz-1599AAE4.as13285.net)
[18:33:12] <ronny> eddyb: would be nice
[18:33:33] <eddyb> nszceta: IDT entries is what needs assembly
[18:33:39] <eddyb> WAIT
[18:33:52] <nszceta> mmmm
[18:33:55] <eddyb> the LLVM IR macro thing - it allows you to builds functions from scratch
[18:34:09] <eddyb> 0 allocas and 0 SSA temporaries => naked
[18:34:26] <cmr> eddyb: you don't need naked functions to use lidt etc
[18:34:28] <eddyb> well, no variables => no allocas, but no allocas isn't enough
[18:34:35] <nszceta> hm
[18:34:36] *** Quits: vadimg (vadimg@BCFFDE00.DF0A212.39C00A7A.IP) (Ping timeout)
[18:34:41] <eddyb> cmr: you need naked functions to handle interrupts
[18:34:46] <cmr> sure.
[18:34:52] <eddyb> cmr: because of iretd, you have to manually manage the stack frame
[18:34:57] <cmr> yes.
[18:35:00] *** Joins: Sharp (Sharp@moz-4D4C136C.dsl.pltn13.sbcglobal.net)
[18:35:00] <eddyb> was llvm! ever merged?
[18:35:03] <cmr> no
[18:35:21] *** Quits: Sharp (Sharp@moz-4D4C136C.dsl.pltn13.sbcglobal.net) (Quit: Sharp)
[18:37:05] *** Joins: m-r-r (mrr@moz-84B6E1ED.rev.sfr.net)
[18:39:46] *** Quits: brson (brson@moz-5386576F.sd.sd.cox.net) (Quit: leaving)
[18:40:12] *** Joins: bmats_ (bmats@moz-87F0A991.hfc.comcastbusiness.net)
[18:40:20] *** Joins: brson (brson@moz-5386576F.sd.sd.cox.net)
[18:40:20] *** ChanServ sets mode: +ao brson brson
[18:41:15] *** Joins: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP)
[18:41:41] *** Joins: lennart (lennart@moz-DE70D6F.stanford.edu)
[18:41:53] *** Quits: popinman322 (magisun@moz-DB516D62.twcny.res.rr.com) (Quit: Leaving.)
[18:42:30] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[18:42:45] *** Joins: Sharp (Sharp@moz-4D4C136C.dsl.pltn13.sbcglobal.net)
[18:43:17] *** Joins: pzol_ (pzol@86821BC.DEB41A6D.AADC76B.IP)
[18:43:25] *** Joins: nate (user@C3BA61EE.F9392C3A.CB3564DC.IP)
[18:43:38] *** Quits: pzol (pzol@moz-553BEE64.dynamic.chello.pl) (Quit: Textual IRC Client: www.textualapp.com)
[18:43:38] *** pzol_ is now known as pzol
[18:44:12] *** Quits: igstan (igstan@moz-42A3EA4C.residential.rdsnet.ro) (Quit: igstan)
[18:44:25] *** Joins: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de)
[18:44:43] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[18:45:06] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[18:46:47] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Ping timeout)
[18:46:59] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[18:48:39] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Ping timeout)
[18:51:09] *** Joins: mankyKitty (Instantbir@moz-21AD3B58.rev.sfr.net)
[18:51:14] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[18:52:03] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[18:53:12] <tiffany> &str doesn't have .iter() anymore?
[18:53:25] <cmr> .chars()
[18:53:59] *** Quits: m-r-r (mrr@moz-84B6E1ED.rev.sfr.net) (Ping timeout)
[18:54:42] <cmr> (or .bytes())
[18:55:22] * strcat has RTM working for rust :)
[18:55:27] *** Joins: io2 (io2@moz-871549F5.home.otenet.gr)
[18:55:47] <kimundi> strcat: RTM?
[18:55:53] <Ms2ger> Read the manual
[18:55:55] * Ms2ger ducks
[18:56:06] *** Joins: marianoguerra (marianogue@moz-43653196.dip0.t-ipconnect.de)
[18:56:10] <strcat> kimundi: haswell's hardware transactional memory
[18:56:19] <strcat> it's not making my benchmark faster though ;[
[18:56:23] <kimundi> ah, nice :)
[18:56:35] <eddyb> should we implement Iterable<T, I: Iterator<T>> now, with fn(self) -> I or wait until Iterable<'a, T, I: Iterator<'a, T>> with fn(&'a self) -> I works?
[18:56:35] <marianoguerra> hi! I'm playing with rust-xlib and I need to pass a pointer to XEvent as parameter to a function XEvent is an alias to c_void
[18:56:46] <eddyb> both should work, the latter is just better defined
[18:56:52] <marianoguerra> how do I create a *XEvent and pass a reference to the function?
[18:57:03] <eddyb> (actually, only the former works with &str/&[T] without DST)
[18:58:21] *** Joins: skrylar (skrylar@moz-F692F728.austin.res.rr.com)
[18:58:39] *** Joins: heftig (heftig@moz-40C6AD78.dip0.t-ipconnect.de)
[18:58:49] <olsonjeffery> alright, I have one more post I'd like feedback/critique for: https://gist.github.com/olsonjeffery/8526752
[18:59:00] *** Quits: brson (brson@moz-5386576F.sd.sd.cox.net) (Ping timeout)
[18:59:00] <olsonjeffery> thank you to anyone who's willing to look at it.
[18:59:43] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[19:01:23] <SiegeLord> marianoguerra: I think the binding is broken. https://github.com/mozilla-servo/rust-xlib/blob/master/xlib.rs#L735
[19:01:34] *** Quits: oberstet (quassel@moz-796410BC.dynamic.mnet-online.de) (Client exited)
[19:01:59] <SiegeLord> Ideal, as far as I understand it, you'd create XEvent on the stack... but since the binding is bad, it won't work
[19:02:39] <marianoguerra> SiegeLord: thanks
[19:03:42] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[19:04:42] <SiegeLord> marianoguerra: You can bind xlib using rust-bindgen
[19:05:03] <SiegeLord> Alternatively, use pub struct XEvent { data: [u64, ..24u], }
[19:05:12] <SiegeLord> (got that from rust-bindgen myself)
[19:05:14] *** Quits: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP) (Ping timeout)
[19:05:17] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: rcirc on GNU Emacs 24.3.1)
[19:05:25] *** Joins: brson (brson@moz-5386576F.sd.sd.cox.net)
[19:05:25] *** ChanServ sets mode: +ao brson brson
[19:05:26] <marianoguerra> SiegeLord: I will try, thanks
[19:05:57] *** Quits: nate (user@C3BA61EE.F9392C3A.CB3564DC.IP) (Ping timeout)
[19:07:00] *** Joins: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au)
[19:08:08] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Ping timeout)
[19:08:42] *** Quits: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au) (Ping timeout)
[19:09:32] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[19:10:22] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[19:10:55] *** Quits: Sharp (Sharp@moz-4D4C136C.dsl.pltn13.sbcglobal.net) (Ping timeout)
[19:12:39] <nemo> off HN http://thornydev.blogspot.com/2014/01/chinese-whispers-in-rust.html
[19:12:54] <cmr> nemo: all over our subreddit :p
[19:12:56] <nemo> mm
[19:13:03] <nemo> yeah. I just read the HN comments
[19:14:59] <FreeFull> nemo: Should try that with Haskell
[19:15:12] * strcat will try it with C++
[19:16:10] *** Quits: cosarara (cosarara97@moz-7DC71179.red-88-1-127.dynamicip.rima-tde.net) (Ping timeout)
[19:16:12] <Ms2ger> Does Go really use :=?
[19:16:18] <cmr> yep.
[19:16:21] <cmr> and also =
[19:16:51] <sfackler> := works like let (with some caveats)
[19:16:53] *** Quits: bynaryshef (bynaryshef@moz-8F921C32.mem.bellsouth.net) (Quit: Leaving)
[19:16:59] <strcat> well, it works like auto in C++11
[19:17:18] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[19:17:38] <sfackler> oh, yeah, that's a better comparison
[19:17:52] *** Joins: lucian_ (lucian@303F9692.4304AE1E.CE5E78F6.IP)
[19:18:18] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[19:18:51] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[19:18:59] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[19:19:07] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[19:19:22] *** Joins: dave1629 (dave@moz-292CF3C9.public.wayport.net)
[19:19:34] *** Quits: lucian_ (lucian@303F9692.4304AE1E.CE5E78F6.IP) (Ping timeout)
[19:19:59] <FreeFull> Hmm, that example makes a new channel each time
[19:20:11] <o11c> FreeFull: isn't that the point?
[19:20:19] <FreeFull> I'm not sure how well the go keyword would map to forkIO
[19:20:25] <strcat> meh, it's too stupid to map it to TBB
[19:20:35] *** Quits: Jemaclus (Mibbit@4EEAB704.5843BA5A.D4E4C7A5.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:20:36] <FreeFull> TBB?
[19:20:36] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[19:20:50] <nszceta> ?
[19:21:23] <FreeFull> I guess I should be reading the Rust code instead
[19:22:12] <Matthias247> that benchmark is stupid
[19:22:28] <FreeFull> Yeah, forkIO seems right
[19:22:32] <FreeFull> And agreed about the stupidity
[19:23:22] <Matthias247> cmr: why did my PR got aborted due to merge errors even though it contained no code?
[19:23:27] <cmr> Matthias247: link?
[19:23:41] <Matthias247> https://github.com/mozilla/rust/pull/11486
[19:23:42] <FreeFull> I'm not sure how to actually ensure the program blocks until all the threads are finished
[19:24:04] <cmr> Matthias247: doc blocks are tested :)
[19:24:08] <cmr> scroll to the bottom
[19:24:10] <strcat> FreeFull: in haskell?
[19:24:16] <FreeFull> Yeah
[19:24:16] <cmr> test result: FAILED. 3 passed; 4 failed; 8 ignored; 0 measured
[19:24:26] <FreeFull> Oh, I guess the read on the Chan will block
[19:24:27] <cmr> the 4 failed are from the callbacks section.
[19:25:42] <strcat> anyway you could just make it use a thread pool
[19:25:57] <Matthias247> don't see it yet
[19:26:25] *** Quits: mankyKitty (Instantbir@moz-21AD3B58.rev.sfr.net) (Quit: mankyKitty)
[19:26:36] <Matthias247> I only see logs which contain sth like task '<unnamed>' failed at 'explicit failure', C:\bot\slave\auto-win-32-nopt-t\build\src\test\run-pass\vector-sort-failure-safe.rs:69
[19:27:03] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Quit: Leaving.)
[19:27:32] <sfackler> Matthias247: scroll all the way to the bottom of this: http://buildbot.rust-lang.org/builders/auto-linux-64-nopt-t/builds/2771/steps/test/logs/stdio
[19:28:33] <Matthias247> ok, there I see it. Didn't expect that he tries it
[19:28:55] <Matthias247> for the C code it's hopeless :)
[19:29:34] <sfackler> Matthias247: If you do ```rust,ignore as the first line it'll avoid running it
[19:29:43] <sfackler> or I guess ```C,ignore in this case?
[19:30:17] <sfackler> er, actually, I'm not sure that's what you do for the tutorials
[19:30:22] <cmr> ```ignore should do it.
[19:30:38] <eddyb> please multilang syntax highlighting
[19:30:41] <sfackler> will that still try to compile them?
[19:30:46] <cmr> shouldn't no.
[19:30:53] <cmr> that'd be ```xfail
[19:30:58] <Matthias247> I started the code sections with ~~~~
[19:31:00] <sfackler> ah
[19:31:02] <cmr> same difference.
[19:31:10] <Matthias247> so I should replace that with ```
[19:31:13] <Matthias247> ?
[19:31:27] <eddyb> that's github preferred style AFAIK
[19:31:27] <cmr> no, I think ~~~{.ignore} works.
[19:31:33] <cmr> look at the other doc blocks :)
[19:31:47] <strcat> ~~~ works in pandoc
[19:31:51] <strcat> not github markdown
[19:31:53] <strcat> both work in pandoc
[19:32:09] <Matthias247> they have ~~~~ {.xfail-test}
[19:32:13] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Quit: Lost terminal)
[19:32:52] <cmr> brson: did we standardize on xfail?
[19:33:28] <Matthias247> in several variations, 3~  or 4~
[19:33:36] <Matthias247> and with space and without :)
[19:35:12] <FreeFull> "main: thread blocked indefinitely in an MVar operation" Yay
[19:35:13] <SiegeLord> What do you mean ~~~ doesn't work in github?
[19:35:39] <eddyb> FreeFull: how did you do that?
[19:35:49] <cmr> eddyb: that's haskell.
[19:35:54] <eddyb> oh, heh
[19:36:38] <FreeFull> Yep =P
[19:36:45] <FreeFull> Rust doesn't have any MVars
[19:38:12] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[19:38:22] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[19:39:49] <Matthias247> Go has also a nice error message like: "all your goroutines are deadlocked"
[19:40:12] <whitequark> all your base are belong to us
[19:40:15] <Matthias247> hehe
[19:40:35] *** Quits: zakora (NC@moz-28181BF.fbx.proxad.net) (Quit: Textual IRC Client: www.textualapp.com)
[19:40:44] <FreeFull> I'm not sure what in my code is actually wrong
[19:40:53] <sfackler> CML just aborts the process with no error output at all!
[19:41:18] <FreeFull> I wonder if it's an actual indefinite block or just something that gets detected as such
[19:42:36] <eddyb> Matthias247: all thy sprockets hath rusted
[19:43:53] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[19:45:48] <Matthias247> what is the correct syntax to allocate a dynamic vector of a given size? ~[0, ..size] doesn't work
[19:46:05] <cmr> std::vec::from_elem(size, 0)
[19:46:14] <cmr> ... although check the docs for the arg order.
[19:46:18] <cmr> I think that's it :p
[19:46:36] <Matthias247> ok
[19:47:48] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[19:49:30] <Ms2ger> rusti: std::vec::from_elem(size, 0u)
[19:49:42] -rusti- pastebinned 7 lines of output: http://ix.io/a0X
[19:49:42] <Ms2ger> :(
[19:49:53] <Ms2ger> >.<
[19:49:56] <Ms2ger> rusti: std::vec::from_elem(7, 0u)
[19:49:58] -rusti- ~[0u, 0u, 0u, 0u, 0u, 0u, 0u]
[19:49:59] <Matthias247> rusti: std::vec::from_elem::<u32>(size, 0u)99
[19:49:59] <Matthias247> d99,99
[19:50:01] -rusti- pastebinned 6 lines of output: http://ix.io/a0Y
[19:50:11] <cmr> you people are silly :p
[19:50:38] <Matthias247> std::vec::from_elem::<u32>(123, 0u)99,99
[19:50:47] *** Quits: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP) (Client exited)
[19:50:52] <Matthias247> at least it's working in my program :)
[19:55:02] *** Joins: dLog (anonymous@moz-8FAE8709.eastlink.ca)
[19:55:49] *** Joins: trevor_ (trevor@moz-5A789E2A.compute-1.amazonaws.com)
[19:56:39] *** Quits: olem (olem@moz-D8B40BE5.fbx.proxad.net) (Quit: Leaving...)
[19:56:48] <sfackler> there's also vec::from_fn(size, |idx| { make_the_value() }) for more complex cases
[19:57:02] *** Joins: nif (nif@moz-8181E2AC.oberlin.net)
[19:57:14] *** Joins: epsylon (epsylon@moz-35BFFF47.thele.me)
[19:57:39] <FreeFull> Seems time is a bash intrinsic
[19:58:07] <JustAPerson> So I checked out a project from github, `rustpkg install <name>`, but it installed to the project's .rust/ instead of my RUST_PATH. How do I properly install to my RUST_PATH?
[19:58:17] <FreeFull> I've written a Haskell version and it takes 4s too
[19:58:29] <trevor_> I used to be able to rustpkg install from git repos but it doesn't work anymore. Is this affecting everyone or just me?
[19:58:42] <FreeFull> In fact, uncannily close to the Rust version's time
[19:58:52] *** Joins: vadimg (vadimg@BCFFDE00.DF0A212.39C00A7A.IP)
[19:58:53] <FreeFull> Oh, user is significantly smaller though
[19:59:04] <FreeFull> Just the real time that matches
[19:59:11] *** Joins: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP)
[20:00:41] <FreeFull> http://lpaste.net/8332946542398799872
[20:01:08] *** Quits: Matrixiumn (zack@moz-1B22AAE2.net) (Ping timeout)
[20:01:55] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[20:01:58] *** Joins: Matrixiumn (zack@moz-1B22AAE2.net)
[20:02:49] *** Joins: nate (user@C3BA61EE.F9392C3A.CB3564DC.IP)
[20:03:00] <strcat> fwiw the benchmark takes 2ms with thread building blocks
[20:03:47] <strcat> I did it recursively though... I don't know how to do it in a loop pattern
[20:04:02] *** Joins: skade (skade@moz-B73EE4D5.pools.arcor-ip.net)
[20:05:01] *** Joins: b1nd (b1nd@moz-3749DB1E.nhl8.cht.bigpond.net.au)
[20:05:45] *** Quits: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP) (Quit: Taking a nap.)
[20:05:53] <brson> cmr: no, i think 'ignore' is more likely to win
[20:05:57] <brson> but no decision yet
[20:06:05] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[20:06:34] *** Quits: nate (user@C3BA61EE.F9392C3A.CB3564DC.IP) (Ping timeout)
[20:07:04] *** Quits: squiddy (squiddy@moz-5E5BFA05.adsl.alicedsl.de) (Input/output error)
[20:07:20] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[20:07:46] *** Joins: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au)
[20:09:09] <andor> are macros documented somewhere?
[20:09:28] *** Quits: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au) (Ping timeout)
[20:10:44] *** Quits: dave1629 (dave@moz-292CF3C9.public.wayport.net) (Quit: dave1629)
[20:11:38] *** Joins: trinary (Adium@moz-D78CD0D5.hsd1.co.comcast.net)
[20:12:08] <kimundi> andor: here is a macro tutorial
[20:12:26] <eddyb> *there?
[20:12:41] <andor> kimundi: i mean macros in the standard library
[20:12:55] <olsonjeffery> andor: the main macros are actually in the rust compiler
[20:13:10] <strcat> brson: do we want ring buffers and priority queues in libstd?
[20:13:23] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[20:13:33] <andor> olsonjeffery: oh, okay, so i should look into rustc's code?
[20:14:19] <eddyb> andor: src/libsyntax/ext
[20:14:28] <eddyb> somewhere in there, AFAIK
[20:14:47] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[20:14:48] *** Joins: pzol_ (pzol@moz-553BEE64.dynamic.chello.pl)
[20:14:55] <olsonjeffery> strcat: i vote +1 for it. wasn't there talk of organizing the structures into a centralized location?
[20:15:01] <andor> eddyb: cheers
[20:15:02] <olsonjeffery> hash{map|set}, etc
[20:15:15] <olsonjeffery> trie et al
[20:15:23] <Matthias247> strcat: and if you arrange the logic in a single loop that counts to 100000 it's even less ;-)
[20:15:47] *** Quits: b1nd (b1nd@moz-3749DB1E.nhl8.cht.bigpond.net.au) (Client exited)
[20:15:48] <strcat> Matthias247: sure, but tbb is actually spawning 100k tasks ;p
[20:16:10] <Matthias247> So I now have my own Rust channel
[20:16:16] <Matthias247> maybe I should benchmark it
[20:16:25] <Matthias247> hmm, better not :)
[20:16:32] <eddyb> strcat: is TBB that thing that only works on very recent Intel CPUs?
[20:16:35] <strcat> that benchmark is just measuring the time to spawn tasks
[20:16:38] <strcat> eddyb: no
[20:16:40] <strcat> eddyb: it's a library
[20:16:54] <eddyb> ooh, so... what does it do internally?
[20:16:55] <Matthias247> it's works everywhere
[20:17:10] <strcat> eddyb: well this is using their task graph
[20:17:13] <Matthias247> library that provides synchronization, tasks, futures, ...
[20:17:19] *** Quits: pzol_ (pzol@moz-553BEE64.dynamic.chello.pl) (Ping timeout)
[20:17:20] <strcat> eddyb: TBB tasks don't have stacks
[20:17:27] <eddyb> strcat: oh
[20:17:31] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[20:17:34] <strcat> they're a struct
[20:17:41] <eddyb> so, reification?
[20:17:44] *** Joins: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP)
[20:17:47] <eddyb> (or whatever it was called)
[20:18:15] <strcat> eddyb: it runs them on scheduler threads, and you make a tree/DAG of dependencies
[20:18:33] <trevor_> Running master whenever I try to rustpkg install from github I get a nonexistent_package error claiming it couldn't interpret it as a URL fragment
[20:18:43] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[20:18:47] <strcat> eddyb: anyway it's able to reuse the same stacks since it doesn't context-switch
[20:18:50] <trevor_> any ideas?
[20:19:05] <eddyb> strcat: oookay
[20:19:07] *** Joins: tdc (santegoeds@moz-11C3F42C.range86-159.btcentralplus.com)
[20:19:11] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[20:19:15] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[20:19:17] <eddyb> I guess I know too little to see the magic
[20:19:28] <strcat> eddyb: the benchmark is basically the overhead of the TBB allocator spawning 100k little allocations afaik
[20:19:31] <strcat> ;p
[20:19:54] <eddyb> strcat: context switches are replaced by calling a continuation, or something like that?
[20:19:58] <strcat> eddyb: http://software.intel.com/en-us/node/468188
[20:20:20] <strcat> eddyb: it solves a specific problem, fine-grained parallelism without I/O
[20:20:38] *** Quits: vadimg (vadimg@BCFFDE00.DF0A212.39C00A7A.IP) (Ping timeout)
[20:20:43] <strcat> they also have a nice memory allocator, nice concurrent data structures, etc.
[20:20:43] <eddyb> strcat: would generators help?
[20:20:44] <JustAPerson> so I'll ask again, how do I get `rustpkg install <name>` to properly install to my $RUST_PATH? It just installs to the workspace directory
[20:20:47] *** Parts: moostik (Icedove@5A22E6A1.10715965.BCDF592F.IP) ()
[20:20:59] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[20:21:01] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[20:21:01] <eddyb> strcat: to map Rust functions to TBB tasks
[20:21:02] <Matthias247> Hmm, then C# TPL is better, because it supports I/O between tasks
[20:21:11] <strcat> eddyb: it's a lib for expressing parallelism, not something like generators/coroutines
[20:21:27] <eddyb> "continuation-passing style" I was right :D. kinda
[20:21:34] <Matthias247> you could build the same library in rust
[20:21:36] <strcat> Matthias247: if by better you mean significantly slower ;p
[20:21:54] <strcat> it doesn't support context-switching on I/O intentionally
[20:22:00] <Matthias247> strcat: don't know. haven't used it
[20:22:15] <Matthias247> for sure it's slower. Question is if it is significant
[20:22:23] <eddyb> strcat: no, I mean, if you make TBB call Iterator::next on a generator, that would allow you to write a loop and whatnot inside the generator, and shove it in TBB
[20:22:31] <strcat> eddyb: hm?
[20:23:01] <strcat> eddyb: tasks aren't for parallel loops
[20:23:04] <strcat> that stuff is separate
[20:23:26] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[20:23:27] <eddyb> well, yield would do exactly what it says, inside a generator ran by TBB
[20:23:32] *** Quits: io2 (io2@moz-871549F5.home.otenet.gr) (Ping timeout)
[20:23:36] <strcat> TBB doesn't use generators
[20:23:43] <strcat> anyway I don't know what you mean
[20:23:59] <eddyb> strcat: I'm just thinking how you would help Rust code provide the TBB kernels or whatever they're called
[20:23:59] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Broken pipe)
[20:24:22] <strcat> eddyb: the whole point of the task scheduler is to schedule stuff with a tree/DAG of dependencies
[20:24:29] *** Joins: jzcz (nick@moz-BF346884.dyn.centurytel.net)
[20:24:30] <eddyb> maybe I'm just dumb
[20:24:34] <eddyb> and I should go to sleep
[20:24:45] <eddyb> I didn't even get to benchmark my fmt contraption :(
[20:24:56] <Matthias247> Ok, I now have channels, Timers and TCP Streams working in parallel in Rust :-)\fs26
[20:24:56] <lennart> JustAPerson: I'm not sure what the best practice for that is
[20:24:58] <strcat> if you just want to do a parallel loop, they have various magic partition algorithms
[20:25:12] <Matthias247> (in one task)
[20:25:17] <lennart> but if you are trying to build an app linking to a rust library, you can just move the library file anywhere
[20:25:17] <strcat> + parallel loop things
[20:25:30] <lennart> and give a -L flag to rustc when building your app
[20:25:50] <yuriks> JustAPerson: I think it always installs to cwd or something like that
[20:26:48] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[20:26:55] <JustAPerson> So do I copy the <workspace>/lib/ or /build/ to the workspace where I need it? I'm trying to build a library for use in another project.
[20:27:01] <lennart> so if the package builds a dynamic library, you can copy <cwd>/build/<architecture>/<library>.so to your own project
[20:27:21] <JustAPerson> lennart: ok, do I put it in the same place in the new project?
[20:27:31] <strcat> Matthias247: afaik, TBB has this cornered for C++ as much as gmp does for bigints
[20:27:53] <strcat> it's pretty much just silk without compiler support
[20:27:54] <strcat> via templates
[20:28:03] <strcat> instead of adding syntax
[20:28:13] <lennart> JustAPerson: sure, and then indicate the directory where it exists with that -L flag to rustc
[20:28:25] <strcat> er
[20:28:27] <strcat> *cilk
[20:28:59] <eddyb> bench.rs:30:14: 33:10 error: mismatched types: expected `|&mut Self|` but found `|&mut Self|` (expected concrete lifetime, but found bound lifetime parameter &)
[20:29:01] <eddyb> wat?
[20:29:03] <lennart> I think things are different if you use rustpkg to build your own project as well, but I don't know any details about that
[20:29:21] <Matthias247> strcat: Now my channel is a ~[] and a mutex/condvar. Is that good or bad? :-)
[20:29:52] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[20:30:00] <strcat> Matthias247: well hopefully you're building a ring buffer on it
[20:30:02] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[20:30:45] <strcat> a multiple-producer/multiple-consumer blocking channel requires a mutex afaik or it can't maintain priority/fairness
[20:31:37] <Matthias247> I didn't knew how good [] is for a queue. If it's not good I would convert it either to a ringbuffer or something like std::deque
[20:31:47] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[20:32:04] <Matthias247> However It's just for proof-of-concept now. Microoptimization can come later
[20:32:06] <strcat> Matthias247: well it will have O(n) operations on one of the sides
[20:32:11] <strcat> it's not a micro-optimization
[20:32:17] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Ping timeout)
[20:32:21] <strcat> you can build a ring buffer on top of a dynamic array
[20:32:29] <strcat> std::deque isn't really a good implementation of one
[20:32:43] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[20:32:50] <Matthias247> for me it is, because I now want to have a working concept/API
[20:33:07] *** Quits: brson (brson@moz-5386576F.sd.sd.cox.net) (Ping timeout)
[20:33:15] <strcat> API is pretty relevant to perf ;p
[20:33:26] <bascule> indeed
[20:33:29] <bascule> look to Disruptor
[20:33:35] <strcat> Matthias247: https://github.com/thestinger/rust-core/blob/master/core/concurrent.rs#L316
[20:33:37] <bascule> you need a fixed sized array and a way of preventing false sharing
[20:33:45] <strcat> that's blocking and multiple-producer/consumer so...
[20:33:49] <strcat> it has to use a mutex afaik
[20:33:56] <bascule> :|
[20:33:56] <strcat> if you make a non-blocking API, then you can do a lot better
[20:34:10] <strcat> bascule: no talking about disruptor
[20:34:11] <strcat> not*
[20:34:13] <bascule> lolol
[20:34:24] <bascule> why?
[20:34:29] <strcat> huh?
[20:34:34] <eddyb> bench.rs:32:40: 32:44 error: cannot move out of captured outer variable
[20:34:41] <strcat> bascule: I wasn't replying to you, is what I'm saying
[20:34:43] <eddyb> is there a way to create a closure and use it from within itself?
[20:34:45] <bascule> why exactly are you telling me not to talk about disruptor?
[20:34:49] <strcat> bascule: I'm not...
[20:34:55] <strcat> 15:35:09            strcat | bascule: no talking about disruptor
[20:34:58] <strcat> 15:35:11            strcat | not*
[20:35:01] <bascule> aah
[20:35:13] *** Joins: Cevn (sameer@moz-F316C21E.hr.hr.cox.net)
[20:35:47] <bascule> strcat: I was citing Disruptor as an example of a system which uses a ring buffer to coordinate work between threads
[20:36:05] <strcat> bascule: ah
[20:36:10] <Matthias247> strcat: mine signals less often :-)
[20:36:19] <strcat> Matthias247: this is bounded, is yours?
[20:36:25] <strcat> above there is an unbounded one with 1 condvar
[20:36:26] <bascule> they also ran into, and fixed, a lot of the performance-related problems of systems like that
[20:36:29] <bascule> like e.g. false sharing
[20:36:35] <strcat> Matthias247: but the cond var is basically free
[20:36:43] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[20:36:44] <Matthias247> it's not. But I could add it
[20:36:46] <bascule> which is hard to prevent on a system like the JVM where the compiler is kind of working against you for lack of language features ;)
[20:37:04] <strcat> Matthias247: look above for the unbounded one then
[20:37:18] <strcat> unbounded uses 1 cond var, bounded uses 2, no difference in performance
[20:37:20] <Matthias247> but if you push() you only have to signal if it was empty before
[20:37:54] *** Quits: jzcz (nick@moz-BF346884.dyn.centurytel.net) (Quit: Konversation terminated!)
[20:37:59] *** Joins: jzcz (nick@moz-BF346884.dyn.centurytel.net)
[20:38:56] *** Joins: nate (user@C3BA61EE.F9392C3A.CB3564DC.IP)
[20:39:10] <strcat> Matthias247: the lock is the cost
[20:39:19] * strcat shrugs
[20:39:30] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[20:39:52] <Matthias247> hmm, I read some docs that described the signal as way more costly than the (uncontended) lock
[20:40:23] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[20:40:35] *** Joins: Crandom_ (Crandom__@moz-56264BBC.sx)
[20:40:38] <strcat> Matthias247: *waiting* for a signal, sure
[20:41:32] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Quit: Leaving.)
[20:41:36] <strcat> you can play with signal before/after unlocking or branching for it and it doesn't seem to make a difference
[20:41:49] *** Quits: luz (lucy@moz-CD18B14B.customer.cdi.no) (Input/output error)
[20:41:54] *** Joins: luz (lucy@moz-CD18B14B.customer.cdi.no)
[20:42:29] *** Quits: sigma (sigma@moz-1C81041B.range86-184.btcentralplus.com) (Ping timeout)
[20:42:58] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[20:43:43] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[20:44:08] *** Quits: Cevn (sameer@moz-F316C21E.hr.hr.cox.net) (Ping timeout)
[20:44:51] *** Joins: marianog1erra (marianogue@moz-EAB92869.dip0.t-ipconnect.de)
[20:44:57] <strcat> anyway if you want it to be fast you have to give up something
[20:45:35] <strcat> but I like the idea of having a featureful one by default with blocking, blocking until a timeout, and non-blocking methods with multi-consumer/producer support
[20:45:44] <strcat> and then you switch to a more specific one if you can
[20:46:21] *** Quits: marianoguerra (marianogue@moz-43653196.dip0.t-ipconnect.de) (Ping timeout)
[20:46:27] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[20:46:33] *** Quits: Kruppe (user@moz-253119B0.esg.uwaterloo.ca) (Ping timeout)
[20:46:49] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[20:46:57] <Matthias247> multi-producer and multi-consumer will be interesting ;)
[20:47:06] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[20:47:25] <Matthias247> cmr: I added the x-fail to the doc examples. How will it get retried?
[20:47:29] *** Joins: mib_0oc2ai (Mibbit@moz-EE0CB57D.hsi6.kabel-badenwuerttemberg.de)
[20:47:50] <strcat> interesting is when you give up multi-producer/consumer and your ring buffer doesn't need locks ;p
[20:48:01] <strcat> and you get wonderful memory ordering stuff to worry about
[20:48:08] <strcat> if you want it to be fast
[20:48:31] <strcat> or just give up blocking
[20:48:33] *** Quits: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP) (Ping timeout)
[20:48:43] *** Quits: mib_0oc2ai (Mibbit@moz-EE0CB57D.hsi6.kabel-badenwuerttemberg.de) (Quit: http://www.mibbit.com ajax IRC Client)
[20:49:23] *** Quits: trevor_ (trevor@moz-5A789E2A.compute-1.amazonaws.com) (Quit: leaving)
[20:49:34] <busylizzy> > `cmp` moved here because it has type `|&T, &T| -> std::cmp::Ordering`, which is a non-copyable stack closure (capture it in a new closure, e.g. `|x| f(x)`, to override)
[20:49:46] <busylizzy> looks like a kludge
[20:49:59] <strcat> hm?
[20:51:02] <busylizzy> why to wrap closure into another closure just to pass it to recursive call (of quick sort in my case)?
[20:53:04] *** Joins: squiddy (squiddy@moz-5E5BFA05.adsl.alicedsl.de)
[20:53:24] *** Joins: io2 (io2@moz-871549F5.home.otenet.gr)
[20:54:18] <SiegeLord> busylizzy: See this: https://gist.github.com/bstrie/8443947
[20:54:31] <SiegeLord> That's how you hack around recursion and stack closures
[20:55:11] *** Quits: nszceta (quassel@moz-E6CA8D6.hsd1.pa.comcast.net) (Input/output error)
[20:56:03] <busylizzy> SiegeLord: thanks, looks better :)
[20:56:12] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[20:56:19] <bstrie_ng> SiegeLord: how did you even find that
[20:56:35] <SiegeLord> bstrie_ng: My history ;)
[20:56:56] <busylizzy> i thought that rust automaticaly dereferences pointers before indexing/calling/etc
[20:57:33] <busylizzy> is this functionality broken?
[20:57:54] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Ping timeout)
[20:57:56] <SiegeLord> I don't think it is meant to dereference in every single situation
[20:58:11] <SiegeLord> I think just the . operator does it, no?
[20:58:36] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[20:59:37] <Matthias247> it also doesn't always
[20:59:55] *** Joins: fyolnish (fyolnish@moz-2B0C7CE0.uqwimax.jp)
[20:59:59] <busylizzy> SiegeLord: in old tutorial i swa that [] also dereferences. i thought that rust always does it.
[21:00:04] <busylizzy> saw*
[21:00:33] *** Joins: vadimg (vadimg@BCFFDE00.DF0A212.39C00A7A.IP)
[21:00:49] *** Quits: Palmik (palmik@moz-DEC2AB.pks.muni.cz) (Quit: Lost terminal)
[21:00:59] *** Joins: sigma (sigma@C91C7F36.70518F41.9D18269F.IP)
[21:01:38] *** Quits: fyolnish (fyolnish@moz-2B0C7CE0.uqwimax.jp) (Ping timeout)
[21:01:53] *** Joins: mib_7y4w8z (Mibbit@1E938A47.7A147555.F5B76090.IP)
[21:02:15] *** Quits: new_one (new_one@CCDACABD.439D8424.B3C0173E.IP) (Client exited)
[21:03:05] *** Joins: canhtak (canhtak@moz-46971EF1.wl.t.ulaval.ca)
[21:03:17] <busylizzy> i definitely need to read the reference manual :) yesterday i tried to implement simple algorithm in 20 lines, and it took 1 hour to compile this.
[21:03:50] *** Joins: m-r-r (mrr@moz-CC41C8EB.rev.sfr.net)
[21:04:24] *** Joins: zeenix (zeenix@moz-B92AB3AA.range109-158.btcentralplus.com)
[21:04:28] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Quit: Leaving)
[21:04:28] <SiegeLord> lol, what's happening here: http://www.rust-ci.org/projects/#database
[21:04:57] *** Parts: zeenix (zeenix@moz-B92AB3AA.range109-158.btcentralplus.com) (Leaving)
[21:05:00] <busylizzy> with quick sort i also had problems, you see.
[21:05:10] *** Quits: jackneill (jackneill@moz-E9D68037.pool.digikabel.hu) (Quit: WeeChat 0.4.1)
[21:05:18] <FreeFull> SiegeLord: postgres bindings?
[21:05:33] <SiegeLord> I'm referring to the 5 documentation links
[21:05:54] *** Quits: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP) (Ping timeout)
[21:05:58] <SiegeLord> *6
[21:06:14] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[21:06:36] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[21:06:38] <Matthias247> busylizzy: as I started last week I needed 2 hours to get a pattern match right
[21:06:49] <Matthias247> "cannot move out of ..."
[21:06:58] <Ms2ger> Those are fun :)
[21:07:04] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[21:07:56] *** Joins: hoverbear (hoverbear@moz-CB80FFE.wireless.uvic.ca)
[21:08:25] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[21:08:31] *** Joins: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au)
[21:09:45] *** Quits: hoverbear (hoverbear@moz-CB80FFE.wireless.uvic.ca) (Ping timeout)
[21:10:19] *** Quits: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au) (Ping timeout)
[21:10:28] *** Quits: Ms2ger (Ms2ger@53A418F8.CD932C3B.187A1082.IP) (Quit: nn)
[21:10:49] <marianog1erra> SiegeLord: I generated the bindings for xlib, still don't know how to pass a reference to it :) https://github.com/marianoguerra/hkwm/blob/master/rust-xlib/xlib.rs#L1084
[21:10:57] <marianog1erra> how do I allocate an XEvent now?
[21:11:18] <SiegeLord> let e = XEvent{ data: [0, ..24] }
[21:11:23] *** Joins: Kjelle (karl@moz-58495553.static.spa.siw.siwnet.net)
[21:12:16] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[21:12:54] *** Quits: mib_7y4w8z (Mibbit@1E938A47.7A147555.F5B76090.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:13:53] *** Joins: hoverbear (hoverbear@moz-CB80FFE.wireless.uvic.ca)
[21:14:08] *** Quits: hoverbear (hoverbear@moz-CB80FFE.wireless.uvic.ca) (Quit: Taking a nap.)
[21:14:41] <Kjelle> I'm quite the rust newbie. I'm just getting started with this 2D game and I'm confused by the module "qualifiers". In my world-module use the module entity and 
[21:14:43] <Kjelle> list
[21:15:11] <Kjelle> So from the crate root, whenever I want to change stuff in that list I have to use world::list::function()
[21:16:31] *** Joins: synackse (jordyd@moz-3085E89D.seg36.ucf.edu)
[21:16:41] *** Quits: mouse_ (mouse@moz-813060C4.broadband.corbina.ru) (Quit: Ex-Chat)
[21:16:42] *** Quits: m-r-r (mrr@moz-CC41C8EB.rev.sfr.net) (Ping timeout)
[21:16:53] *** Quits: nate (user@C3BA61EE.F9392C3A.CB3564DC.IP) (Quit: leaving)
[21:16:56] *** Joins: m-r-r (mrr@moz-84B6E1ED.rev.sfr.net)
[21:17:14] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: sw17ch)
[21:17:37] <Kjelle> The creation of my world in main looks a bit nasty because of this: https://github.com/KarlZylinski/Hollobock/blob/master/hollobock.rs
[21:18:22] *** Quits: tdc (santegoeds@moz-11C3F42C.range86-159.btcentralplus.com) (Quit: Leaving)
[21:19:26] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[21:19:57] *** Joins: eibwen (kvirc@moz-89B3F0CA.dip0.t-ipconnect.de)
[21:19:59] <Kjelle> I'm aware that I can write like "use thing::thing2::{Stuff}", but if I use the entity module in the crate root and also inside the world module it's as if those two aren't interchangeable.
[21:20:24] <Kjelle> (I have probably understood some basic thing about modules wrong)
[21:20:33] <SiegeLord> They will be interchangeable
[21:20:46] <SiegeLord> use is simply a way to create an alias
[21:21:12] <Kjelle> Hm, gonna experiment a bit more
[21:21:15] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[21:21:31] *** Joins: new_one (new_one@1E1119CE.47460DF6.B3C0173E.IP)
[21:23:34] *** Joins: ofeldt (ofeldt@moz-42077DC7.dip0.t-ipconnect.de)
[21:23:55] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[21:24:05] *** Quits: new_one (new_one@1E1119CE.47460DF6.B3C0173E.IP) (Ping timeout)
[21:24:35] *** Quits: ofeldt- (ofeldt@moz-CD295A79.dip0.t-ipconnect.de) (Ping timeout)
[21:26:00] <SiegeLord> I wonder if Travis keeps the current directory when it goes from script to after_script
[21:26:12] *** Parts: synackse (jordyd@moz-3085E89D.seg36.ucf.edu) ()
[21:26:16] <Kjelle> Okay, I got it working now. Had to type "using super::list" in my game's "world" module - which sits right on top of the crate root - in order to make the world and crate root see my list enum as the same thing. Is that the recommended way to go about it?
[21:26:35] <Kjelle> use super::list*
[21:28:55] *** Quits: m-r-r (mrr@moz-84B6E1ED.rev.sfr.net) (Ping timeout)
[21:29:31] <SiegeLord> Where is the list module located?
[21:30:02] <Kjelle> in the crate root
[21:30:06] *** Joins: m-r-r (mrr@moz-84B6E1ED.rev.sfr.net)
[21:31:15] <SiegeLord> That's not quite what the code you linked to is implying
[21:31:24] *** Quits: wtw (wtw@moz-D8FB7390.org) (Quit: Lost terminal)
[21:31:57] <Kjelle> Ah, I just changed that locally and got it working the way i wanted, just about to push new stuff.
[21:32:11] *** Joins: mankyKitty (Instantbir@moz-21AD3B58.rev.sfr.net)
[21:32:18] <SiegeLord> Ah
[21:33:20] <Kjelle> like so: https://github.com/KarlZylinski/Hollobock/blob/master/hollobock.rs and https://github.com/KarlZylinski/Hollobock/blob/master/world.rs
[21:33:37] *** Quits: brandonw (brandonw@moz-B334F9B.dhcp.oxfr.ma.charter.com) (Ping timeout)
[21:34:34] <strcat> Matthias247: btw what are you using for timers? are you using timedwait on cond vars or do you use something like timerfd/eventfd?
[21:34:36] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[21:34:57] <jzcz> Is there a way to implement iterator over an a struct with a member "next: option<~list>"?
[21:35:39] * strcat is really curious about how slow eventfd + epoll is over a cond var
[21:35:40] <jzcz> A linked list struct obviously...
[21:35:40] <Matthias247> strcat: currently timerfd because I wanted to have a fast result. Alternative would be a priority queue and passing the first value to epoll.wait()
[21:35:53] <Matthias247> feel free for some feedback: https://github.com/mozilla/rust/issues/11165#issuecomment-32798282\fs26
[21:36:09] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[21:36:35] <Matthias247> you could benchmark it with my channel implementation. For the easy port I use condvar. And as soon as the port goes into evented mode i switch to eventfd
[21:37:13] <strcat> jzcz: yes
[21:37:34] <strcat> jzcz: you store a ptr to a list node in the iterator, and increment it on next()
[21:37:41] <strcat> so
[21:38:13] <strcat> struct Items<'a> { node: Option<ListNode<'a>> }
[21:38:15] <strcat> something like that
[21:38:20] <strcat> er
[21:38:30] <strcat> struct Items<'a> { node: Option<&'a ListNode> }
[21:39:36] <jzcz> ah...I was trying to use ~ptr and converting in my impl of iterator's next fn
[21:39:45] *** Joins: new_one (new_one@1E1119CE.47460DF6.B3C0173E.IP)
[21:40:01] <jzcz> and returning a &'a Node, but I've been having lifetime problems
[21:40:51] <jzcz> so instead of keeping ~ptr in the struct, keeping a ref with a lifetime should work?
[21:41:00] *** Joins: Amaranthus (travis@moz-F81BB56A.cpe.cableone.net)
[21:41:07] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Ping timeout)
[21:41:26] <Matthias247> if your struct has the same lifetime then yes
[21:41:37] <Matthias247> the iterator struct i mean
[21:42:22] *** Quits: io2 (io2@moz-871549F5.home.otenet.gr) (Ping timeout)
[21:44:29] *** Joins: brandonw (brandonw@moz-B334F9B.dhcp.oxfr.ma.charter.com)
[21:44:36] <jzcz> Matthias247: I'm not sure what you mean
[21:44:57] <Matthias247> your iterator struct needs also a lifetime that equals the lifetime of the contained ptr
[21:45:24] <eibwen> can you extend rust's syntax with libraries?
[21:45:35] <cmr> eibwen: syntax extensions, aka macros, yes.
[21:45:41] *** Parts: eibwen (kvirc@moz-89B3F0CA.dip0.t-ipconnect.de) (Once you know what it is you want to be true, instinct is a very useful device for enabling you to know that it is)
[21:45:41] <cmr> https://github.com/mozilla/rust/pull/11151
[21:45:46] *** Joins: eibwen (kvirc@moz-89B3F0CA.dip0.t-ipconnect.de)
[21:45:48] <cmr> https://github.com/mozilla/rust/pull/11151
[21:46:22] <eibwen> in a way that I could define ~ on my own?
[21:47:00] <cmr> no.
[21:47:02] <cmr> not like that
[21:47:27] <Matthias247> @cmr Can you trigger retry? https://github.com/mozilla/rust/pull/11486
[21:47:33] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[21:47:39] <cmr> Matthias247: yup, thanks!
[21:47:45] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Quit: buildmaster reconfigured: bot disconnecting)
[21:47:46] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[21:47:48] <eibwen> cmr: like what instead? like println! ?
[21:48:13] <Matthias247> cmr: And then you can read about my IO implementation ;)
[21:48:21] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Ping timeout)
[21:48:57] <cmr> eibwen: yes, exactly.
[21:49:24] *** Joins: moostik (Icedove@6181009C.10715965.BCDF592F.IP)
[21:49:26] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[21:50:22] *** Joins: amro (quassel@F1E3FD84.8AAAF769.FAAB0799.IP)
[21:51:13] <jzcz> when I do "next: Option<&'a TokenList>" I get "error: wrong number of lifetime parameters: expected 1 but found 0"
[21:51:19] <jzcz> is that syntax incorrect?
[21:51:41] *** Quits: m-r-r (mrr@moz-84B6E1ED.rev.sfr.net) (Ping timeout)
[21:51:47] <Matthias247> how is the surrounding struct defined?
[21:51:52] *** Joins: m-r-r (mrr@moz-84B6E1ED.rev.sfr.net)
[21:52:13] <eibwen> Matrixiumn: that range definition seems awkward
[21:52:25] <eibwen> * Matthias247
[21:53:18] <jzcz> Matthias247: pub struct TokenList<'a> {
[21:53:22] <Matthias247> eibwen: which?
[21:53:48] <eibwen> eibwen: the range!('(', 123, 456, ')')
[21:54:13] <eibwen> range!((123, 456)) would be way nicer, but I guess that's not even logically possible
[21:54:17] <Matthias247> eibwen: I have no clue about that thing
[21:54:20] <eibwen> ok
[21:54:31] <sfackler> eibwen: yeah, the issue is that () and [] have to be matched or the parser fails
[21:54:36] <cmr> eibwen: macros need to have balanced delimiters.
[21:54:39] <kvark> cmr: are there any plans to make Gc/Rc usage as short and convenient as it was with @?
[21:54:43] <cmr> kvark: yes.
[21:54:47] <sfackler> so range!((123, 456)) would work but range([123, 456)) wouldn't
[21:55:12] <eibwen> sfackler: could you indeed parse range!((123,456))?
[21:55:14] <sfackler> though note that you don't need the first and last comma
[21:55:18] <sfackler> yeah
[21:55:20] *** Quits: mankyKitty (Instantbir@moz-21AD3B58.rev.sfr.net) (Quit: mankyKitty)
[21:55:29] <cmr> what's the point of a range macro if you don't get half-open intervals?
[21:55:29] <kvark> cmr: I'm ok with what we have more or less... but I'm worried that the lack of easy Rc/Gc may easily scare away the Python/Java/C#/Ruby crowd
[21:55:35] <sfackler> and range!([123, 456]) as well
[21:55:35] <eibwen> then maybe you could do it like range!((|123, 456))
[21:55:46] *** Quits: moostik (Icedove@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[21:55:57] <cmr> hm that could work.
[21:56:09] <cmr> at that point I'd like range(|123, 456) though
[21:56:16] <cmr> remove the extra layer of paren
[21:56:20] <sfackler> iirc you may run into parsing issues if you try range((123, 456|))
[21:56:21] <o11c> ooh, I like
[21:56:38] *** Quits: m-r-r (mrr@moz-84B6E1ED.rev.sfr.net) (Ping timeout)
[21:56:41] <sfackler> since it'll try to parse the | as part of the expression for the upper bound and then fail
[21:56:43] <eibwen> cmr: you can even do that??
[21:56:51] *** Joins: m-r-r (mrr@moz-CC41C8EB.rev.sfr.net)
[21:56:53] <Matthias247> jzcz: hmm, that should basically work
[21:56:56] <eibwen> that would be a lot nicer IMO
[21:57:02] <eibwen> range!(|123,456|)
[21:57:11] <cmr> eibwen: of course.
[21:57:13] <cmr> well
[21:57:14] *** Quits: fabiand (fabiand@moz-E71530F5.adsl.alicedsl.de) (Quit: Verlassend)
[21:57:18] <cmr> I *think* it's possible..
[21:57:23] *** Quits: amro (quassel@F1E3FD84.8AAAF769.FAAB0799.IP) (Client exited)
[21:57:29] <cmr> sfackler: take $lit rather than expr perhaps?
[21:57:32] <cmr> or maybe even $ident
[21:57:38] <sfackler> that's pretty limiting though
[21:58:08] <o11c> I would hope that $expr would just parse as much as possible and leave the rest
[21:58:31] *** Joins: io2 (io2@moz-871549F5.home.otenet.gr)
[21:58:58] <eibwen> however, coming from python I think that most often range(inclusive, exclusive) is needed
[21:59:11] <cmr> and that's what range() does.
[21:59:13] <eibwen> (even more often, range(upper_exclusive_bound)
[21:59:22] <cmr> rusti: range(0i, 24).to_owned_vec()
[21:59:24] -rusti- ~[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23]
[21:59:51] <Matthias247> kvark: I think it will never be as easy as C#/Java. Deref will propably be easier. But then there's still the refcell thing that you need for mutability
[21:59:56] <eibwen> rusti: range(0, 5)
[21:59:58] -rusti- std::iter::Range<int>{state: 0, stop: 5, one: 1}
[22:00:16] <eibwen> what? step is named 'one'?
[22:00:16] <sfackler> o11c: I don't think the parser ever backtracks
[22:00:23] *** Joins: fyolnish (fyolnish@moz-D6B86FDB.uqwimax.jp)
[22:00:28] <strcat> eibwen: it doesn't have a step, it has 'one' ;p
[22:00:31] <strcat> range_step has a step
[22:00:36] <eibwen> what is one?
[22:00:39] <strcat> one
[22:00:39] <eibwen> one is 1?
[22:00:41] <eibwen> ....
[22:00:44] <cmr> the multiplicative identity.
[22:00:45] <sfackler> eibwen: range can be used with any type that implements the One trait
[22:00:47] <cmr> for the type.
[22:00:55] <sfackler> and Add
[22:01:15] <strcat> eibwen: if we had some succ/pred trait it wouldn't be necessary
[22:01:30] <jzcz> Matthias247: https://gist.github.com/juszczakn/8530084
[22:01:38] <jzcz> Matthias247: exact problem, if that helps
[22:01:40] *** Quits: m-r-r (mrr@moz-CC41C8EB.rev.sfr.net) (Ping timeout)
[22:01:54] <sfackler> jzcz: You need next: Option<&'a TokenList<'a>>
[22:01:59] *** Joins: m-r-r (mrr@moz-84B6E1ED.rev.sfr.net)
[22:02:13] *** Quits: fyolnish (fyolnish@moz-D6B86FDB.uqwimax.jp) (Ping timeout)
[22:02:23] <jzcz> sfackler: what is the extra <'a> for, if I might ask?
[22:02:35] *** Joins: brson (brson@moz-5386576F.sd.sd.cox.net)
[22:02:35] *** ChanServ sets mode: +ao brson brson
[22:02:44] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[22:02:55] <sfackler> jzcz: the TokenList type takes a lifetime parameter, so you're filling the lifetime you want in there
[22:03:36] <jzcz> Cool, thanks everyone for the help :)
[22:03:52] <eibwen> cmr: why is the one part of the structure?
[22:04:23] <o11c> sfackler: it's a single token ...
[22:04:58] <cmr> eibwen: it's an optimization to avoid evaluating One::one() in the iterator lop
[22:05:31] *** Quits: brson (brson@moz-5386576F.sd.sd.cox.net) (Quit: leaving)
[22:05:54] <sfackler> right, but if the expression parser sees 10| it's going to expect to then parse another subexpression for the binary |
[22:05:58] <sfackler> like 10|5
[22:06:00] *** Joins: zmthy_ (zmthy@moz-C2881CC3.ecs.vuw.ac.nz)
[22:06:11] <kvark> Matthias247: I find the situation frightening. It used to be as easy as in Java/Python with @, and now it's by far more complex, to the point forcing people to go deep into the rabbit hole of rust borrowing, owning and on-stack allocations. It's going to be too rough for newcomers.
[22:06:26] *** Quits: zmthy_ (zmthy@moz-C2881CC3.ecs.vuw.ac.nz) (Quit: leaving)
[22:06:38] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[22:07:00] <Matthias247> Ahh, i didn't saw the tokenlist declaration. For the list itself you propably won't want/need the lifetime and have an owned reference instead
[22:07:11] <TheHydroImpulse> Quick question: What's the purpose of a named lifetime, such as ``
[22:07:18] <TheHydroImpulse> 'a
[22:07:19] <eibwen> cmr: shouldn't One be constant time anyway?
[22:07:20] *** Quits: rca_ (rcatolino@moz-18AEB6AE.adsl.proxad.net) (Ping timeout)
[22:07:35] <Matthias247> kvark: I see it somewhat the same way.
[22:07:58] <TheHydroImpulse> I can't seem to find any docs talking about it
[22:08:05] <eibwen> cmr: can't you make a type trait that is a constant?
[22:08:09] *** Quits: m-r-r (mrr@moz-84B6E1ED.rev.sfr.net) (Ping timeout)
[22:08:26] <Matthias247> kvark: it's far more complex than the others. But that's propably the price for the extra safety
[22:09:00] *** Quits: heftig (heftig@moz-40C6AD78.dip0.t-ipconnect.de) (Quit: Quitting)
[22:09:17] <cmr> eibwen: it throws off llvm's loop idiom stuff.
[22:09:18] *** Joins: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au)
[22:09:25] <cmr> (iirc)
[22:09:29] <cmr> strcat: can confirm?
[22:09:57] <Matthias247> TheHydroImpulse: http://static.rust-lang.org/doc/master/guide-lifetimes.html#named-lifetimes
[22:10:14] *** Quits: brandonw (brandonw@moz-B334F9B.dhcp.oxfr.ma.charter.com) (Quit: leaving)
[22:10:19] <eibwen> cmr: what is llvm's loop idiom stuff?
[22:10:27] *** Joins: brandonw (brandonw@moz-B334F9B.dhcp.oxfr.ma.charter.com)
[22:10:30] <sfackler> cmr: I'd imagine you'd also run into poor optimizations if you forget to inline the one() definition
[22:10:33] <cmr> eibwen: it recognizes certain patterns of loops and optimizes them better.
[22:10:35] <cmr> sfackler: yup.
[22:11:02] *** Quits: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au) (Ping timeout)
[22:11:08] <cmr> although maybe not since it's a trait impl. Not sure how those work wrt metadata.
[22:11:31] *** Quits: tq (tq@moz-9FE9CCF4.a251.priv.bahnhof.se) (Quit: tq)
[22:11:33] *** Quits: brandonw (brandonw@moz-B334F9B.dhcp.oxfr.ma.charter.com) (Quit: leaving)
[22:11:38] *** Joins: m-r-r (mrr@moz-CC41C8EB.rev.sfr.net)
[22:11:46] <eibwen> sfackler: inline isn't automatic?
[22:11:54] *** Joins: heftig (heftig@moz-214741C6.dip0.t-ipconnect.de)
[22:12:03] <cmr> eibwen: not across crates (libraries)
[22:12:20] *** Joins: brandonw (brandonw@moz-B334F9B.dhcp.oxfr.ma.charter.com)
[22:12:36] <eibwen> cmr: not even when both sources are known at ompile time?
[22:12:38] <strcat> eibwen: One can allocate
[22:12:48] <strcat> eibwen: with -Z lto, it can inline cross-crate without annotations
[22:13:00] *** Joins: vadimg2 (vadimg@BCFFDE00.DF0A212.39C00A7A.IP)
[22:13:07] <eibwen> lto?
[22:13:12] <cmr> eibwen: by definition, both sources *aren't* known at compile time, if you have two crates.
[22:13:14] <sfackler> link time optimization
[22:13:20] <cmr> (though lto blurs that boundary)
[22:13:35] <TheHydroImpulse> Matthias247 Thanks. Much appreciated.
[22:13:50] *** Quits: Jesin (Jesin@moz-A43618DF.res.lehigh.edu) (Quit: Leaving)
[22:13:53] <strcat> eibwen: loads the LLVM bitcode for each crate and optimizes it as a whole
[22:14:04] *** Quits: vadimg (vadimg@BCFFDE00.DF0A212.39C00A7A.IP) (Ping timeout)
[22:14:04] *** Quits: sigma (sigma@C91C7F36.70518F41.9D18269F.IP) (Ping timeout)
[22:14:27] <eibwen> I just see that for(int i = 0; i < UPPER_BOUND; i++) takes one int, while range takes three
[22:15:07] <sfackler> three? range(0, 10)
[22:15:24] <strcat> eibwen: one is a private field
[22:15:34] <eibwen> rusti: range(0, 10)
[22:15:35] -rusti- std::iter::Range<int>{state: 0, stop: 10, one: 1}
[22:15:38] <strcat> not part of the user-visible API
[22:15:38] <eibwen> sfackler: ^
[22:15:43] <strcat> eibwen: that's not public
[22:15:48] <FreeFull> rusti: range(0,10).to_vec()
[22:15:51] -rusti- pastebinned 7 lines of output: http://ix.io/a1f
[22:16:02] <eibwen> strcat: yes, but private/public doesn't make a difference in case of RAM
[22:16:21] <strcat> eibwen: what makes you think it keeps that object in memory?
[22:16:23] <sfackler> eibwen: LLVM will optimize range to something identical to a for loop
[22:16:33] <strcat> unless you're actually storing it somewhere
[22:16:39] <eibwen> strcat: ok, I thought it would do that
[22:16:48] <FreeFull> rusti: range(0,10).to_owned)vec()
[22:16:51] -rusti- pastebinned 9 lines of output: http://ix.io/a1g
[22:16:51] <FreeFull> rusti: range(0,10).to_owned_vec()
[22:16:52] -rusti- ~[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
[22:16:53] <eibwen> (would store it in memory)
[22:17:29] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[22:17:41] <strcat> eibwen: SROA replaces aggregates like that with scalars if it doesn't get passed somewhere else as a ptr that way
[22:17:42] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:17:55] <strcat> although I think other optimizations will rip it apart too
[22:17:58] *** Joins: aatch (James@moz-B437F499.pocketrent.com)
[22:18:03] <FreeFull> I'm not sure what to think about range not including the second argument by default
[22:18:14] <cmr> constant folding, too
[22:18:32] <FreeFull> At least range_inclusive exists
[22:18:34] <cmr> combined with an inlined Add and it should be fine.
[22:18:41] <FreeFull> > range_inclusive(0,10).to_owned_vec()
[22:18:45] <cmr> FreeFull: "including the second arg by default"?
[22:18:47] <FreeFull> rusti: range_inclusive(0,10).to_owned_vec()
[22:18:49] -rusti- pastebinned 7 lines of output: http://ix.io/a1h
[22:18:56] <cmr> oh
[22:18:58] <FreeFull> cmr: The 10 in this example
[22:18:59] <cmr> half-open
[22:19:04] <cmr> yeah it's standard range behavior..
[22:19:11] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[22:19:15] <eibwen> cmr: half open range, like in python
[22:19:15] <aatch> There's not really a "best" version.
[22:19:25] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[22:19:26] <FreeFull> I suppose it imitates the most common case for C for loops
[22:19:27] <strcat> FreeFull: that's what you get in python/boost and with a simple C loop
[22:19:37] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[22:19:41] <strcat> FreeFull: write a C loop including the end case ;p
[22:19:59] <FreeFull> for(int x = 0; i <= 10; i++)
[22:20:07] <strcat> FreeFull: where the end case is `n`, like range
[22:20:16] <strcat> <= doesn't work, you can overflow past it
[22:20:34] <FreeFull> True
[22:20:43] <strcat> rusti: range(0, 255).skip(240).to_owned_vec()
[22:20:44] -rusti- ~[240, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 252, 253, 254]
[22:20:55] <johnsoft> for (BigNum x = BigNum("0"); x < n; x.increment())
[22:21:02] <strcat> rusti: std::iter::range_inclusive(0, 255).skip(240).to_owned_vec()
[22:21:03] -rusti- ~[240, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 252, 253, 254, 255]
[22:21:22] *** Quits: doener (doener@moz-C68F600D.unity-media.net) (Quit: leaving)
[22:21:26] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[22:21:27] <strcat> rusti: std::iter::range_step(0, 255, 20).to_owned_vec()
[22:21:28] -rusti- ~[0, 20, 40, 60, 80, 100, 120, 140, 160, 180, 200, 220, 240]
[22:21:31] *** Quits: brandonw (brandonw@moz-B334F9B.dhcp.oxfr.ma.charter.com) (Quit: leaving)
[22:21:42] <strcat> rusti: std::iter::range_step(50, 0, -20).to_owned_vec()
[22:21:47] -rusti- timeout triggered!
[22:21:49] *** Joins: brandonw (brandonw@moz-B334F9B.dhcp.oxfr.ma.charter.com)
[22:21:50] <FreeFull> Ah, std::iter just isn't in scope
[22:21:53] <strcat> wat
[22:21:56] <sbalmos> uh oh
[22:22:01] <strcat> rusti: std::iter::range_step(50, 0, -20).to_owned_vec()
[22:22:02] -rusti- ~[50, 30, 10]
[22:22:03] <FreeFull> I mean, used
[22:22:05] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[22:22:16] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[22:22:19] <strcat> rusti: std::iter::range_step(50, 40, -20).to_owned_vec()
[22:22:20] -rusti- ~[50]
[22:22:24] <strcat> rusti: std::iter::range_step(50, 30, -20).to_owned_vec()
[22:22:25] -rusti- ~[50]
[22:22:28] <strcat> rusti: std::iter::range_step_inclusive(50, 30, -20).to_owned_vec()
[22:22:29] -rusti- ~[50, 30]
[22:22:38] <strcat> FreeFull: yeah only range is in the prelude
[22:22:41] <FreeFull> strcat: Behaviour seems expected to me here
[22:23:13] <strcat> FreeFull: I just said 'wat' based on the timeout
[22:23:16] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[22:25:25] <FreeFull> Ah
[22:25:54] * strcat made those things so they *better* work as he expects ;p
[22:26:30] <FreeFull> It's better than how lambdabot behaves sometimes
[22:26:49] *** Quits: brandonw (brandonw@moz-B334F9B.dhcp.oxfr.ma.charter.com) (Quit: leaving)
[22:27:46] *** Joins: brandonw (brandonw@moz-B334F9B.dhcp.oxfr.ma.charter.com)
[22:28:34] <ercxx> anybody familiar with embedded multimedia kinda things?
[22:28:49] <FreeFull> For example?
[22:29:17] <ercxx> I'm writing a upnp server in rust. I would like to know what `NEVER` todo?
[22:29:33] <geomyidae_> upnp, good luck. also great idea, been hacking on one idly as well
[22:29:36] <ercxx> especially from a rust perspective
[22:29:57] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[22:29:57] *** ChanServ sets mode: +ao pcwalton pcwalton
[22:30:05] <eibwen> ercxx: NEVER?
[22:30:13] <ercxx> geomyidae_: I have something that can stream at the moment but doesn't handle seeking.
[22:30:26] <ercxx> eibwen: I don't know best practices
[22:30:33] <whitequark> upnp is just such a horrible protocol. zero security :(
[22:30:39] * geomyidae_ is just grumbling about upnp av and dlna specs and protocols.
[22:30:58] <eibwen> upnp is very bad implemented IIRC
[22:30:58] <ercxx> whitequark: As far as understand it's not designed for security :)
[22:31:16] <whitequark> that's... shortsighted, to put it mildly
[22:31:23] <geomyidae_> it's a travesty on a number of levels. mdns and dns-sd winds up being more interesting imo, but upnp av has infected everything
[22:31:33] <ercxx> I thinkg that's one way of dealing with security :)
[22:31:42] <whitequark> if you hate your users, sure.
[22:31:48] <geomyidae_> upnp av is on top of upnp which isn't just "not designed for security", it has real world implications if you leave upnp admin turned on in your routers.
[22:31:56] *** Quits: jzcz (nick@moz-BF346884.dyn.centurytel.net) (Ping timeout)
[22:32:17] <geomyidae_> for example, I can use upnp to change the default route on many consumer routers to reroute external traffic, all sorts of not good things. anyway, ot....
[22:32:20] <ercxx> geomyidae_: There was a thing about upnp routers responding to requests from outside.
[22:32:54] <strcat> ercxx: the OEM firmware has intentional backdoors anyway... for real ;s
[22:33:01] <ercxx> strcat: I know :)
[22:33:16] *** Quits: Kjelle (karl@moz-58495553.static.spa.siw.siwnet.net) (Quit: )
[22:33:18] *** Joins: jzcz (nick@moz-BF346884.dyn.centurytel.net)
[22:33:24] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[22:33:39] <ercxx> here's the link to test your upnp enabled router https://www.grc.com/x/ne.dll?bh0bkyd2
[22:33:47] <ercxx> The guys from Security Now.
[22:34:27] <mcpherrin> http://attrition.org/errata/charlatan/steve_gibson/
[22:34:32] <ercxx> mcpherrin: I know.
[22:34:44] <ercxx> Doesn't change anything though.
[22:34:59] <mcpherrin> :)
[22:36:47] <yuriks> mine exposes UPnP
[22:36:51] <yuriks> good going DLink
[22:36:59] <ercxx> yuriks: :)
[22:37:13] <arrdem> generic shitty [DLink|Netgear|Linksys|...]
[22:37:17] <yuriks> ercxx: I want to get rid of this piece of shit
[22:37:19] <ercxx> Think positive. You don't have to be home to change settings.
[22:37:37] <yuriks> it dies/stops accepting new connections if you leave a torrent client open
[22:37:40] <ercxx> Buy something that you can install somehing like open-wrt on.
[22:37:41] <arrdem> ercxx: think positive, your router is probably part of a botnet!
[22:37:49] <strcat> yuriks: the fun part is that they have their horrible WPS stuff
[22:37:55] <strcat> takes a few hours to break into
[22:38:02] *** Quits: jzcz (nick@moz-BF346884.dyn.centurytel.net) (Ping timeout)
[22:38:08] <strcat> and on many, you disable it in the UI and it stays on
[22:38:11] <strcat> :|
[22:38:13] <strcat> (like mine)
[22:38:13] <yuriks> :|
[22:38:47] <Earnestly> Or they add a small lockout after a few attempts
[22:38:49] *** Joins: jzcz (nick@moz-BF346884.dyn.centurytel.net)
[22:38:49] <yuriks> I previously used another dlink, but just as a wireless ap, so it can just stay in as dumb as possible mode and not interfere with anything
[22:38:53] <Earnestly> s/small/short
[22:38:56] <strcat> yuriks: https://en.wikipedia.org/wiki/Wi-Fi_Protected_Setup#Brute-force_attack
[22:39:04] <strcat> it's hilarious, since all routers basically have this now...
[22:39:09] <Earnestly> reaper \o/
[22:39:13] <yuriks> but my ISP "helpfully" provided this new integrated adsl modem + router when I upgraded
[22:39:14] <ercxx> arrdem: Making dogecoins, helping jamaican bobsled team : http://mashable.com/2014/01/20/dogecoins-amaica-bobsled-team/
[22:39:25] *** Joins: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au)
[22:39:27] <Earnestly> strcat: Most still suffer from dns rebinding attacks
[22:39:33] <arrdem> ercxx: I actually tweeted about that earlier :P
[22:39:35] <Earnestly> (noscript prevents this)
[22:39:45] <ercxx> :)
[22:40:14] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[22:41:10] <mcpherrin> WPS is scarily poorly designed
[22:41:27] <mcpherrin> I'd have thought after the embarrasment that is WEP, the Wifi people would have learned
[22:41:42] <o11c> learning and marketing and mutually exclusive
[22:41:44] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[22:41:48] <o11c> s/and/are/2
[22:42:05] <FreeFull> strcat: What if the router has a WPS button, that enables WPS for 1 minute or so?
[22:42:23] <strcat> mcpherrin: WPS is worse than WEP because it didn't take people being clever to break it and doesn't require any traffic on the network
[22:42:56] <strcat> if you use a wired connection and it's just on, you're vulnerable
[22:43:08] <mcpherrin> strcat: I dunno, WEP is pretty thoroughly broken.
[22:43:13] <Earnestly> FreeFull: Yeah, mine has that.  The attack doesn't work on mine because that button needs to be pressed
[22:43:16] <eibwen> isn't WPS a button that opens up your network for a minute or so?
[22:43:22] <strcat> mcpherrin: yeah, takes 30 seconds to break *if there is traffic* ;p
[22:43:30] <mcpherrin> strcat: But you can generate that traffic, no?
[22:43:31] <Earnestly> mcpherrin: WEP isn't about security though, Wired Equivalent Privacy, althouh it's not even equvalent anymore
[22:43:37] <strcat> mcpherrin: if there are clients connected
[22:43:42] <strcat> over wifi
[22:43:45] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Ping timeout)
[22:43:52] <strcat> mcpherrin: WPS works when there aren't
[22:44:01] <strcat> and it's just a loop
[22:44:09] <strcat> luckily many routers crash if you go too fast
[22:44:18] <Earnestly> strcat: fwiw, the attack fails against mine since it needs a buttom pressed
[22:44:23] <mcpherrin> strcat: I think we can agree they're both pretty broken
[22:44:27] <strcat> mcpherrin: yes ;]
[22:44:29] <Earnestly> button* even
[22:44:38] <strcat> mcpherrin: still, I can see that they *thought* WEP was secure
[22:44:41] <strcat> but WPS...
[22:44:45] <Matthias247> acrichto, pcwalton: If youre around you might want to take a look: https://github.com/mozilla/rust/issues/11165#issuecomment-32798282
[22:44:55] <strcat> Earnestly: *shrug*
[22:45:03] <strcat> Earnestly: still bad, just not awful ;p
[22:45:20] <mcpherrin> strcat: WPS is probably a bigger modern problem since WEP isn't deployed as much 
[22:45:29] <Earnestly> strcat: I've also disabled TKIP, but yeah.  This whole situation is aweful, time to make your own routers
[22:45:44] <eibwen> TKIP?
[22:45:47] <strcat> mcpherrin: yeah, WPS is basically in every consumer router now
[22:45:49] <strcat> on by default :)
[22:46:05] <Earnestly> eibwen: Use CCMP instead
[22:46:10] <eibwen> strcat: easy to break in :)
[22:46:19] <eibwen> for both the actual customer and anoyone else
[22:46:20] <eibwen> *anyone
[22:46:27] <Earnestly> https://en.wikipedia.org/wiki/Temporal_Key_Integrity_Protocol#Security
[22:46:53] <Earnestly> (CCMP → https://en.wikipedia.org/wiki/Advanced_Encryption_Standard#Known_attacks )
[22:48:02] <mcpherrin> I think I should find out what my neighbours are using when I get home tonight :P
[22:48:16] <whitequark> wait, there are WPS implementations *without* a button?!
[22:48:24] <eibwen> Earnestly: thank you :)
[22:48:28] <whitequark> I thought it was moderately safe in practice since you'd have to wait for someone to press it
[22:48:43] *** Quits: vikstrous (v@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[22:48:57] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[22:49:12] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Quit: Leaving.)
[22:49:12] *** Quits: nkoep (nik@moz-A941E87E.pool.mediaways.net) (Quit: Leaving)
[22:49:13] <strcat> whitequark: afaik, they originally didn't have a button
[22:49:21] <strcat> and lots still don't
[22:49:27] <whitequark> what the actual f.
[22:49:35] *** Quits: vadimg2 (vadimg@BCFFDE00.DF0A212.39C00A7A.IP) (Ping timeout)
[22:49:46] *** Quits: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au) (Quit: Leaving.)
[22:50:19] *** Joins: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au)
[22:50:29] <Earnestly> whitequark: The "wtf" moment was realising that you could cut the keyspace in half
[22:50:32] <mcpherrin> Well, without the button, an 8 digit PIN is approximately enough to make brute force infeasable
[22:50:36] <Earnestly> Because it's dumb
[22:50:49] <Earnestly> mcpherrin: You only need half of the pin
[22:50:53] <mcpherrin> Earnestly: exactly
[22:50:57] <Earnestly> :I
[22:51:06] <whitequark> it's like it was deliberately designed to be insecure
[22:51:28] <Earnestly> whitequark: Seen the recent c3 talks about the NSA?  I wouldn't be surprised, seriously.
[22:51:30] *** Joins: kvanb (kvanb@moz-2FD67D8D.lnse7.win.bigpond.net.au)
[22:51:45] <whitequark> yeah yeah
[22:51:49] <mcpherrin> The NSA doesn't need shitty WPS bugs :p
[22:52:02] *** Quits: twi (Adium@moz-512229A7.lns9.lon.bigpond.net.au) (Ping timeout)
[22:52:02] <Earnestly> mcpherrin: They have all sorts of exploits
[22:52:19] <o11c> the kind of bugs NSA uses are, say, in RSA
[22:52:22] <Earnestly> Some deliberately designed into it.  Even now RSA is under huge suspicion since the documents were released
[22:53:05] * whitequark . o O ( soon, people are going to run around saying how RSA, the algorithm, is woefully insecure )
[22:53:10] *** Quits: canhtak (canhtak@moz-46971EF1.wl.t.ulaval.ca) (Quit: canhtak)
[22:53:15] <Earnestly> How they put implants in Dell servers and how they can "guarantee 100% success rates on Apple's IOS"
[22:53:23] *** Joins: canhtak (canhtak@moz-46971EF1.wl.t.ulaval.ca)
[22:53:30] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[22:57:57] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[22:58:06] <eibwen> Earnestly: RSA? you're talking about the company, right?
[22:58:59] *** Quits: io2 (io2@moz-871549F5.home.otenet.gr) (Ping timeout)
[22:59:09] <mcpherrin> eibwen: Yeah.  NSA paid RSA to use their backdoored crypto
[22:59:18] *** Joins: Jemaclus (Mibbit@4EEAB704.5843BA5A.D4E4C7A5.IP)
[22:59:28] <mcpherrin> EC-DRBG
[23:00:36] <Earnestly> eibwen: Yeah
[23:01:13] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[23:01:50] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[23:02:53] *** Quits: itdaniher (it@moz-7FAAAB8D.bstnma.fios.verizon.net) (Ping timeout)
[23:03:38] <johnsoft> it seems most packaged libs don't use rlibs
[23:03:52] <johnsoft> i can't get 'extern mod' to work without rlibs
[23:04:00] <johnsoft> what's the right workflow for this?
[23:04:10] <eibwen> rlibs?
[23:04:29] <johnsoft> yeah, rustc --rlib
[23:05:01] <johnsoft> they exist but seem not to be preferred?
[23:05:07] <eibwen> $ man rustc --rlib
[23:05:08] <eibwen> $
[23:05:13] <eibwen> uhm
[23:05:17] <johnsoft> if i want to use, say, https://github.com/sfackler/rust-postgres, how do i go about it?
[23:06:10] *** Quits: nif (nif@moz-8181E2AC.oberlin.net) (Client exited)
[23:06:11] *** Quits: elux (peter@B6F21F4B.1F20BC31.2170E5F.IP) (Quit: Bye!)
[23:06:24] *** Joins: nif (nif@moz-8181E2AC.oberlin.net)
[23:06:29] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[23:08:04] <Earnestly> johnsoft: Which version of rustc are you using?
[23:08:18] <Earnestly> Ah nevermind
[23:08:28] <johnsoft> just pulled from master
[23:08:43] <Earnestly> Yeah, man page is out of date
[23:10:11] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[23:10:17] *** Quits: victorporof (victorporo@D3766C4.A4BCC9AB.79933D60.IP) (Quit: victorporof)
[23:11:26] <ChrisMorgan> The man pages are from 0.7. I wanted to update them before 0.9 was released but didn't get time.
[23:11:40] *** Joins: wopr2014 (wopr14@moz-1E2B7C70.dip0.t-ipconnect.de)
[23:12:34] <Jemaclus> i asked this earlier, then got distracted by work stuff and forgot the response. Are there any low-hanging fruit that I can tackle, as far as features for Rust? Something like a math lib or something. I'm a noob, but I'd like to contribute something...
[23:12:44] <johnsoft> ChrisMorgan, what's your workflow?
[23:12:51] <ChrisMorgan> johnsoft: ?
[23:13:17] <johnsoft> before you added --rlib to rust-http, how did you get rustc to recognize it as extern mod?
[23:14:41] <ChrisMorgan> johnsoft: rustc should be working fine with only .so/.dylib/.dll files and no .rlib files, by using dynamic linking—but if you are trying to tell it to make a statically linked thing such as with #[crate_id = "rlib"]; or --rlib, it won't work.
[23:14:54] <wopr2014> Hi there . I am looking at the periodic tbale of rust pointer types. And I have difficulties to understand in which use cases to use which pointer type. Is it possible that someone extends this periodic table with the appropriate use cases, please?
[23:14:59] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[23:15:20] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[23:15:47] <johnsoft> i always get disconnected just ask i ask something...
[23:16:11] <mcpherrin> wopr2014: Have you read the tutorial?
[23:16:13] *** Quits: canhtak (canhtak@moz-46971EF1.wl.t.ulaval.ca) (Quit: canhtak)
[23:16:19] *** Joins: alisdair (textual@BB0336C3.D2943E17.C579BC3E.IP)
[23:16:31] <JustAPerson> how can I get a Range of i32s? `for i in range(0, 8) {}` results in `i` being an int, but I need an i32. Is it find to just use `as i32` here?
[23:16:40] <mcpherrin> The table is pretty brief; it isn't really entirely suitable for learning on its own
[23:16:58] <kimundi> for i in range(0i32, 8) {}
[23:17:03] <dbaupp> JustAPerson: range(0i32, 8) will force the 0 to be i32, and infer the 8 to be one too
[23:17:09] <wopr2014> I read the tutorial, yes. But it just mentions what pointers and their types there are, not when to use them.
[23:17:17] <JustAPerson> kimundi: dbaupp alright, thank you ❤
[23:18:06] <ercxx> any news on the future of rustpkg?
[23:18:08] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[23:18:28] <wopr2014> mcpherrin: Even if the table is brief, it shows that there are many, many types of pointers. And I would like to understand their use cases.
[23:18:50] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[23:18:51] <kimundi> wopr2014: Basically, & and &mut is used all the time to express usage of something without owning it. ~ Is only really needed for stuff where you _need_ a heap allocation/pointer indirection: Namely strings, vectors, trait objects, and for defining recursive data structures
[23:18:51] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Client exited)
[23:19:20] <aatch> Hmm, I'm not sure if I like that table...
[23:19:25] <steveklabnik> wopr2014: http://static.rust-lang.org/doc/0.9/guide-pointers.html has use cases specifically
[23:19:26] <ChrisMorgan> kimundi: and occasionally for memory efficiency on some types of enums
[23:19:48] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[23:20:01] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[23:20:17] <kimundi> ChrisMorgan: Yeah, I count that as "needing pointer indirection" :)
[23:20:24] *** Quits: marianog1erra (marianogue@moz-EAB92869.dip0.t-ipconnect.de) (Ping timeout)
[23:20:41] *** Quits: jzcz (nick@moz-BF346884.dyn.centurytel.net) (Quit: Konversation terminated!)
[23:20:47] *** Joins: jzcz (nick@moz-BF346884.dyn.centurytel.net)
[23:21:15] <Matthias247> 0i32,8i32
[23:21:28] <Matthias247> oh, didn't scroll down
[23:21:35] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[23:22:00] * kimundi liked that we can do 0_i32 to make such literals more readable
[23:22:02] <aatch> I much prefer use 'reference' for '&' at least in tutorial-ish stuff.
[23:22:05] <kimundi> likes*
[23:22:11] <eibwen> rusti: 0
[23:22:12] -rusti- 0
[23:22:14] <eibwen> rustilite: 0i
[23:22:16] -rustilite- pastebinned 6 lines of output: http://ix.io/a1l
[23:22:18] <eibwen> rusti: 0
[23:22:19] -rusti- 0
[23:22:24] <eibwen> rusti: 0i
[23:22:25] -rusti- 0
[23:22:29] <kimundi> aatch: reference is the new official term for them anyway
[23:22:30] <eibwen> rusti: 0i8
[23:22:31] -rusti- 0i8
[23:22:43] <eibwen> rusti: 0i32
[23:22:44] -rusti- 0i32
[23:22:50] <eibwen> rusti: 0i64
[23:22:51] -rusti- 0i64
[23:22:53] <Matthias247> rusti: 1i
[23:22:54] -rusti- 1
[23:22:54] *** Quits: m-r-r (mrr@moz-CC41C8EB.rev.sfr.net) (Quit: WeeChat 0.4.2)
[23:22:56] <aatch> eibwen, can you stop spamming the channel.
[23:23:00] <eibwen> sorry
[23:23:10] <eibwen> is there another channel with rusti availabe?
[23:23:15] <mcpherrin> eibwen: you can PM rusti
[23:23:18] <kimundi> eibwen: You can query rusti :)
[23:23:21] <eibwen> oh ok
[23:23:24] <eibwen> thanks
[23:23:59] <Matthias247> he's lying, 1i = sqrt(-1) :-)
[23:24:08] *** Quits: squiddy (squiddy@moz-5E5BFA05.adsl.alicedsl.de) (Quit: Leaving)
[23:24:35] *** Joins: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net)
[23:25:57] *** Joins: canhtak (canhtak@moz-46971EF1.wl.t.ulaval.ca)
[23:26:40] <FreeFull> rusti: 0_3
[23:26:41] -rusti- 3
[23:26:45] <FreeFull> rusti: 0_3_5
[23:26:46] -rusti- 35
[23:27:01] <FreeFull> I guess that's useful for binary literals
[23:27:07] *** Quits: TisButMe (Mibbit@moz-85E31F67.w109-212.abo.wanadoo.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[23:27:09] <Jemaclus> hm. when would you use that syntax?
[23:27:11] <FreeFull> rusti: 0b1001_1011_1011
[23:27:11] -rusti- 2491
[23:27:22] <Jemaclus> oh snap.
[23:27:38] *** Joins: bitwalker (bitwalker@moz-8FC28563.sierrabravo.net)
[23:28:13] <diverse> FreeFull: or possibly useful for spilting by the every 3 digits in decimal notation.
[23:28:22] *** Joins: Jesin (Jesin@moz-3114216B.eecs.lehigh.edu)
[23:29:23] *** Quits: Jesin (Jesin@moz-3114216B.eecs.lehigh.edu) (Quit: Leaving)
[23:29:33] *** Joins: Jesin (Jesin@moz-3114216B.eecs.lehigh.edu)
[23:30:00] <diverse> rusti: println!("It's over {}!", 9_000)
[23:30:01] -rusti- It's over 9000!
[23:30:01] -rusti- ()
[23:31:38] *** Quits: jzcz (nick@moz-BF346884.dyn.centurytel.net) (Ping timeout)
[23:32:29] <wopr2014> Guys, You just have to link with blinking red links from the tutorial to the - more or less hidden - guides. They make it really clear, what is not clear in the tutorial. I for example thought that the guides are for advanced , complicated things.
[23:32:43] *** Quits: bitwalker (bitwalker@moz-8FC28563.sierrabravo.net) (Ping timeout)
[23:32:48] <steveklabnik> wopr2014: yup, this needs re-work
[23:32:53] <steveklabnik> it's on my to-do list this release cycle
[23:33:15] <wopr2014> cool :)
[23:34:01] <diverse> steveklabnik is the man with the plan
[23:34:13] <steveklabnik> sometimes
[23:34:41] *** Joins: bitwalker (bitwalker@moz-1684082D.hsd1.mn.comcast.net)
[23:35:55] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[23:36:05] <trinary> how does one find the guides?
[23:36:10] <trinary> ah, Other Docs.
[23:36:25] <wopr2014> they are linked at the top of the first page
[23:36:55] <mcpherrin> they're also linked at the bottom of the introductory tutorial
[23:37:05] <mcpherrin> They're totally easy to miss though
[23:38:07] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[23:40:18] <johnsoft> is there a tutorial anywhere for using external libraries?
[23:41:03] <sfackler> johnsoft: it's decently similar to using external libraries in C or C++
[23:41:08] <sfackler> except without the headers
[23:41:13] <aatch> johnsoft, what's the issue you're having? The most common one I see is people not putting the correct path in the compiler command.
[23:41:33] <aatch> (i.e. not having one at all)
[23:41:58] <johnsoft> I cloned rust-postgres, ran make
[23:42:28] <johnsoft> now in rust-postgres/build/, i have: libpostgres-e8d942e6-0.0.so*  postgres.d  submodule-trigger
[23:42:53] <johnsoft> I ran rustc with -L .../rust-postgres/build
[23:43:04] <johnsoft> and src/main.rs:4:1: 4:59 error: can't find crate for `postgres`
[23:43:10] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[23:43:49] <aatch> is that supposed to be 3 dots there?
[23:44:23] <johnsoft> I truncated the path, it's actually -L ~/Documents/Dev/Source/rust-postgres/build
[23:44:34] <steveklabnik> johnsoft: http://static.rust-lang.org/doc/0.9/guide-ffi.html
[23:44:50] <steveklabnik> well, maybe you dont mean THAT external ;)
[23:45:42] <johnsoft> isn't ffi just for c code?
[23:46:35] <aatch> johnsoft, there'
[23:46:53] <aatch> there's an example at the top of lib.rs in rust-postgres.
[23:46:58] <aatch> Have you tried that?
[23:47:01] <sfackler> aatch: that's actually out of date
[23:47:13] <sfackler> I stopped using rustpkg over hte weekend but forgot to update it c.c
[23:47:20] <sfackler> you should just use "extern mod postgres;"
[23:47:23] <aatch> sfackler, was wondering about that.
[23:47:42] <ercxx> is there a way of telling rustpkg to look in `src/rust-nameoflib` for a lib instead of `src/nameoflib` ?
[23:47:59] *** Quits: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de) (Connection reset by peer)
[23:48:14] <sfackler> aatch: about why I switched away?
[23:48:27] *** Quits: eibwen (kvirc@moz-89B3F0CA.dip0.t-ipconnect.de) (Ping timeout)
[23:49:02] <aatch> sfackler, no, why the structure didn't look like rustpkg, but the example code suggested rustpkg usage.
[23:49:17] <sfackler> oh
[23:49:31] <sfackler> the structure other than the makefile should be rustpkg structure
[23:49:37] <sfackler> i.e. root-level lib.rs
[23:49:56] <sfackler> the test setup is different but rustpkg's test structure is pretty janky
[23:50:12] <johnsoft> <sfackler> you should just use "extern mod postgres;"
[23:50:21] <johnsoft> that was my problem, thanks!
[23:50:31] <sfackler> awesome! sorry about that, i'll fix the readme now
[23:50:36] *** Joins: Seich (seich@moz-3D9F5ED0.webfaction.com)
[23:50:40] <johnsoft> no problem
[23:50:43] <sfackler> and add a "make install" option to the Makefile
[23:51:06] <johnsoft> i wish i knew how/why that fixed it though
[23:51:49] <aatch> johnsoft, wait, what did you have before?
[23:51:51] <lennart> ercxx: #[file="<path to library>"] above the mod statement, I think
[23:52:16] <sfackler> johnsoft: part at the end changed rustc to look for a library called librust-postgres I think
[23:52:18] <johnsoft> aatch- extern mod postgres = "github.com/sfackler/rust-postgres";
[23:52:47] <johnsoft> which was definitely working on 0.9, although it required me to skip 'make' and compile an rlib manually
[23:53:15] *** Joins: ray (bernhard@moz-FF531B82.vie.surfer.at)
[23:53:26] <sfackler> johnsoft: I also changed rust-postgres to call itself "postgres" instead of "rust-postgres"
[23:53:47] <sfackler> before, if you didn't use rustpkg to manage it you had to do "extern mod postgres = "rust-postgres";"
[23:53:54] <sfackler> since rust-postgres isn't a valid package name
[23:54:15] <ercxx> lennart: thanks
[23:54:25] <johnsoft> okay, so not a language change then
[23:54:34] <sfackler> yep, just a library change
[23:54:48] <johnsoft> i cannot wait for rust 1.0 :)
[23:55:09] <ray> is there a roadmap btw
[23:55:28] <johnsoft> consistency, stability...
[23:56:00] *** Joins: seich_ (seichMoz@E0DBF039.6AE14CEC.624CE61B.IP)
[23:56:04] <aatch> johnsoft, meh, 1.0 will arrive when it's a good time.
[23:56:20] *** Quits: ross (r@moz-35D0ADAB.clr.io) (Quit: -)
[23:56:41] <aatch> Better to have it take time than rush for some arbitrary "stable" goal.
[23:56:51] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[23:56:55] <aatch> (though of course, polishing for eternity is no better)
[23:57:18] <ray> also the docs are msi
[23:57:19] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[23:57:22] <ray> missing some stuff
[23:57:31] * Earnestly hopes 1.0 is a long way off
[23:57:34] <johnsoft> very much agreed
[23:58:24] <aatch> ray, agreed, however documentation is a choice between missing/sparse and out-of-date a lot of the time for Rust.
[23:58:40] <aatch> It's gotton much better recently as the language has stabilised.
[23:58:41] <ray> exactly
[23:58:51] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[23:59:06] <ray> i was missing stuff on sockets for instance
[23:59:07] <aatch> I learned most of what I know about Rust from reading the compiler and library code.
[23:59:08] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[23:59:27] <ray> luckily found a SO thread with old and new solutions
