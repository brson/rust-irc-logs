[00:00:13] <tikue_me> do newtype structs dereference automatically when calling methods?
[00:00:20] <aatch> tikue_me, nope.
[00:00:24] <tikue_me> yeah didn't think so
[00:00:26] <tikue_me> that was a dumb question
[00:00:39] <engla> don't they?
[00:00:51] <tikue_me> where's rusti when you need him
[00:01:10] <aatch> I assume you're talking about Foo(int) -> int "deference"
[00:01:15] <tikue_me> yes
[00:01:18] <tikue_me> wait
[00:01:19] <aatch> dereference*
[00:01:21] <tikue_me> i mean like
[00:01:28] <engla> you can call the inner methods yes
[00:01:33] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[00:01:34] <pcwalton> hmm
[00:01:37] <tikue_me> struct Stack(~[int]); Stack(~[]).is_empty()
[00:01:50] <tikue_me> without doing (*Stack(~[])).is_empty()
[00:01:54] <pcwalton> do we expect that removing @fn will result in a compile time improvement?
[00:01:59] <pcwalton> it simplifies the way rust closures look
[00:03:45] <engla> tikue_me: you can still do that.
[00:04:13] <tikue_me> oh great
[00:04:15] <tikue_me> thanks :)
[00:04:28] <ecr> so now I have foo(_dummy_self: Option<Self>) and I call it like Trait::foo(None), but I still get a unconstrained type parameter error
[00:04:28] *** Quits: int3_ (int3_@moz-A2B259C8.public.wayport.net) (Ping timeout)
[00:04:57] <engla> ecr: now put the type hint on None.  None::<T>
[00:06:33] *** Joins: erickt (etryzelaar@20D6D0DE.50CA9683.D51AEBE4.IP)
[00:06:59] *** Quits: sebcrozet (sebcrozet@moz-2517AE39.w80-13.abo.wanadoo.fr) (Quit: Gone)
[00:07:11] *** Joins: int3_ (int3_@moz-A2B259C8.public.wayport.net)
[00:07:51] *** kimundi is now known as zz_kimundi
[00:10:14] <ecr> engla: thanks, I think that worked. at least it's made it through stage0 w/o failing
[00:10:31] <aatch> Well that's interesting. So you can't actually implement methods on newtype structs and be able to call them.
[00:10:39] *** Quits: dwhyte (dwhyte@DFA0622C.2732CD06.B7FCEB19.IP) (Connection reset by peer)
[00:11:01] <ecr> aatch: I'm pretty sure you can...
[00:11:10] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[00:11:24] <ecr> aatch: see std::rt::io::{tcp, udp}
[00:12:07] <ecr> struct NewType(OldType);
[00:12:07] <aatch> ecr, nevermind, I was an idiot, forgot the self param...
[00:12:12] <ecr> >.<
[00:12:41] *** Quits: bytewise (bytewise@moz-4A801D04.unitymediagroup.de) (Quit: Leaving)
[00:13:09] *** Quits: int3_ (int3_@moz-A2B259C8.public.wayport.net) (Ping timeout)
[00:13:30] <aatch> I can programs good!
[00:13:54] *** Quits: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net) (Quit: Leaving.)
[00:15:24] <tikue_me> can you do if foo { } else if bar { }
[00:15:35] <tikue_me> or do you have to do if foo { } else { if bar {} }
[00:15:44] <aatch> tikue_me, you can do else if
[00:15:51] <tikue_me> thanks aatch 
[00:16:34] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[00:17:47] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[00:17:53] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[00:18:39] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[00:19:34] *** Quits: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net) (Input/output error)
[00:20:38] *** Quits: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu) (Ping timeout)
[00:20:57] *** Quits: Aszarsha_ (Aszarsha@moz-16BFBC53.rev.numericable.fr) (Client exited)
[00:20:58] *** Joins: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP)
[00:22:57] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[00:23:15] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[00:29:16] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[00:29:25] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[00:30:15] *** Quits: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net) (Ping timeout)
[00:30:41] *** Joins: Yurume_ (yurume@AC58A8CE.8A059B47.E313B915.IP)
[00:31:08] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[00:34:57] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Ping timeout)
[00:39:22] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[00:40:10] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[00:40:25] *** Joins: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net)
[00:41:25] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[00:43:45] *** Joins: mihneadb (mihneadb@moz-329F29A3.lightspeed.sntcca.sbcglobal.net)
[00:45:06] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[00:46:04] <tikue_me> are there ways to add additional methods to a type?
[00:46:40] <ecr> tikue_me: impl
[00:46:43] <tikue_me> e.g. ```type Foo = ~[uint]; impl Foo { fn foo(&self) { } }
[00:46:51] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[00:46:51] <tikue_me> ecr: it doesn't override the old impl completely?
[00:46:59] <ecr> I think it just extends it
[00:47:04] <tikue_me> ah great, that's what i was hoping
[00:47:12] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[00:47:15] <ecr> worst case scenario, you can wrap it in a newtype and impl on the newtype
[00:47:50] <tikue_me> right
[00:47:56] <tikue_me> bleh
[00:48:08] <tikue_me> for some reason rustc is ICE'ing every time I try to compile anything
[00:49:00] *** Quits: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com) (Quit: ecr)
[00:49:24] <noct> I don't suppose anyone has run into 'configure: error: C compiler cannot create executables' trying to build curl for windows?
[00:50:03] <kmc> no but my general advice is to look at config.log
[00:50:16] <tikue_me> test.rs:2:0: 6:1 error: no base type found for inherent implementation; implement a trait or new type instead
[00:50:18] <tikue_me> any idea what that means?
[00:50:26] *** Quits: heftig (heftig@moz-278A4FFC.dip0.t-ipconnect.de) (Ping timeout)
[00:51:32] <noct> kmc: I have, but 'undefined reference to `__chkstk_ms'' isn't any more enlightening
[00:52:46] <bblum> tikue_me: this is what 'coherence' is about
[00:52:55] <tikue_me> bblum: what's coherence
[00:53:20] <bblum> when you write an impl, it has to be such that either the type or the trait is defined in the file you're in
[00:53:57] <bblum> this prevents, e.g., two different modules from implementing methods with the same name on a type that neither of them owns
[00:54:20] <bblum> because then if you import from both of those modules, it is 'incoherent' which impl you want a method from
[00:54:28] <tikue_me> bblum: so how do you extend behavior of a vector, for instance? what is the idiom?
[00:54:42] <bblum> well, you can write your own trait
[00:54:50] <bblum> containing the desired behaviour
[00:55:22] <tikue_me> bblum: will that work with default methods?
[00:55:32] <tikue_me> what if I want to define a trait specifically for ~[uint]
[00:55:46] <bblum> what do you mean by 'with' default methods?
[00:55:49] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[00:55:49] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/Z3EnMw
[00:55:49] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[00:56:04] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[00:56:10] <bblum> and, what do you mean by 'specifically for ~[uint]'? (short of just only providing the impl for ~[uint] and for no other type)
[00:56:25] <tikue_me> bblum: I want to put the code in the trait rather than the impl
[00:56:33] <bblum> oh, i mean, that should work i guess
[00:56:37] <tikue_me> how?
[00:56:50] <tikue_me> because it won't let you, for instance
[00:56:52] <bblum> you jsut write the trait, and then write 'impl Foo for ~[uint] { }"
[00:57:01] <tikue_me> right but
[00:57:02] *** Joins: heftig (heftig@moz-4D08C80.dip0.t-ipconnect.de)
[00:57:16] <SiegeLord> Don't even need the {}
[00:57:39] <tikue_me> the trait won't let you do something like: ```trait Stack { fn push(&mut self, val: float) { self.push(val) } }```
[00:57:47] <tikue_me> it says something like
[00:57:58] <tikue_me> test.rs:3:8: 3:22 error: type `&Self` does not implement any method in scope named `push`
[00:57:58] <tikue_me> test.rs:3         self.push(4f);
[00:58:10] <bblum> that's a bug
[00:58:19] <bblum> somewhere it's dropping the 'mut'
[00:58:26] <jfbk> i've never understood why languages prefer to either add restrictions or impose resolution heuristics to avoid name collisions like this.  why not just detect the collision and make the programmer explicitly state which one they want? 
[00:58:41] <bblum> but, no, you can't use the push method from vectors on the self type
[00:58:47] <tikue_me> sorry that was a mistake
[00:58:48] <tikue_me> i meant this
[00:58:49] <tikue_me> test.rs:3:8: 3:22 error: type `&mut Self` does not implement any method in scope named `push`
[00:58:50] <tikue_me> test.rs:3         self.push(4f);
[00:58:53] <bblum> ok well
[00:59:00] <bblum> that type of code has to go in the impl
[00:59:01] <tikue_me> but yes
[00:59:07] <tikue_me> that was what i was wondering
[00:59:15] <bblum> also i don't know what it will do if you name it 'push'
[00:59:30] <bblum> given that that conflicts with the push from trait MutableVector
[00:59:33] <tikue_me> right
[00:59:38] <tikue_me> but what if the trait was
[01:00:00] <tikue_me> trait Foo: MutableVector { fn test(&mut self) { self.push("test"); } }
[01:00:15] <tikue_me> or something
[01:00:17] <bblum> that would work
[01:00:28] <bblum> except for the push conflict
[01:00:38] <tikue_me> why is there a conflict
[01:00:47] <bblum> oh my mistake
[01:00:49] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[01:00:50] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/gjYmbA
[01:00:50] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[01:00:51] <bblum> you wrote fn test not fn push
[01:00:51] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[01:00:51] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/yeL5pw
[01:00:51] <ghrust> 13rust/06auto 146b3ac8f 15Kevin Ballard: Make the iterator protocol more explicit...
[01:00:51] <ghrust> 13rust/06auto 14752a6c4 15Kevin Ballard: Make Zip iterator short-circuit...
[01:00:52] <ghrust> 13rust/06auto 147e5278c 15bors: auto merge of #8276 : kballard/rust/iterator-protocol, r=cmr...
[01:00:53] <bblum> that's fine
[01:00:54] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[01:00:56] <tikue_me> ok cool
[01:01:11] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[01:01:39] <tikue_me> now it's just ice'ing lol
[01:01:48] <bblum> welp, report that :P
[01:01:53] <tikue_me> never!
[01:01:58] <bblum> NEVER
[01:03:03] <tikue_me> why does rustc only work when i compile from my rust repo
[01:03:04] <tikue_me> :(
[01:03:43] *** Joins: ChrisMorgan (chris@moz-1A621BB6.its.monash.edu.au)
[01:03:50] <tikue_me> has anyone else had that issue?
[01:04:07] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[01:04:08] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[01:04:39] <mcpherrin> tikue_me: versus what?
[01:04:50] <tikue_me> symlinking to /usr/bin
[01:04:57] <tikue_me> and using rustc wherever the heck i want
[01:05:25] <tikue_me> it ICE's if i do rustc anywhere other than inside the rust repo
[01:05:25] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[01:05:44] <tikue_me> task <unnamed> failed at 'region parameterization should have inferred that this type is RP', /Users/tkuehn/rust/src/librustc/middle/typeck/rscope.rs:238
[01:06:08] *** Joins: sonwow (sonwow@5AB4884B.FCC4549.14D5B978.IP)
[01:07:11] *** Quits: sp3d (a@moz-6F12212B.fidnet.com) (Ping timeout)
[01:07:49] <tikue_me> bblum: https://gist.github.com/tikue/f36ac9d58acb927840ee
[01:08:15] <tikue_me> any ideas?
[01:08:30] *** Joins: mib_9uybip (mib_9uybip@FFC4F26.497EC1B8.5EFB9497.IP)
[01:08:32] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[01:08:57] <noct> kmc: well, whatever it was seems to be related to the 4.6 release required by rust; upgrading to 4.7 and building curl w/ that works
[01:09:00] <mcpherrin> tikue_me: that's odd.  What happens if you "make install" it somewhere 
[01:09:04] *** Quits: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com) (Ping timeout)
[01:09:16] <tikue_me> mcpherrin: i thought you're not supposed to make install?
[01:09:47] <mcpherrin> tikue_me: Really? I dunno :p
[01:09:54] <mcpherrin> I do.
[01:11:01] *** Joins: eholk (eric@moz-F70D5031.hsd1.in.comcast.net)
[01:11:12] <bblum> tikue_me: that's an ICE that only nmatsakis will know how to deal with
[01:11:48] <eholk> hey all, what's the latest syntax for calling a static method on a trait that's associated with a type parameter?
[01:12:18] <tikue_me> eholk: haha this is getting asked a lot. i think the answer is the syntax was removed and not yet replaced, so you need to use type inferrence
[01:12:37] <tikue_me> someone correct me if i'm wrong
[01:13:20] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[01:13:41] <eholk> are there good ways to give more hints to the type inferer?
[01:14:13] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[01:15:04] *** Joins: Niessy (Mibbit@moz-E56CAA08.dsl.bell.ca)
[01:15:58] <Eridius> eholk: if the static method returns the impl type, you could use a let binding with an explicit type on the variable
[01:16:01] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[01:16:43] <eholk> Eridius: hmm.. I guess I could return a tuple with a dummy value
[01:16:53] <engla> eholk: here is libstd's solution  https://github.com/mozilla/rust/blob/master/src/libstd/num/num.rs#L288
[01:17:37] <eholk> engla: ah, that's exactly what I'm doing
[01:17:53] <eholk> thanks!
[01:18:00] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[01:18:31] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[01:18:51] <Eridius> eholk: if you're using the same unused_self thing (which btw should really start with _ to squelch the unused var warning), you should make it Option<&Self> instead
[01:18:58] *** Quits: Nisstyre (wes@moz-FD86289.netflash.net) (Quit: Leaving)
[01:19:09] <Eridius> Primitive knows that the types it's implemented on are primitive numbers, but for arbitrary types you don't want the Option to be unnecessarily large
[01:19:41] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[01:20:11] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[01:20:23] *** Quits: carllerche (carllerche@1E2EB9E3.186539A3.965084DF.IP) (Quit: carllerche)
[01:20:41] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[01:20:41] *** ChanServ sets mode: +ao dherman dherman
[01:20:48] <eholk> Eridius: ahh, good call
[01:21:08] <eholk> although, not I'm getting "use of undeclared type name `Self`"
[01:21:12] <eholk> *now
[01:21:44] *** Quits: robarnold (rob@BD56354E.DB510C09.6E370BFC.IP) (Ping timeout)
[01:23:55] *** Joins: adu (ajr@moz-F930C5C9.washdc.fios.verizon.net)
[01:26:20] *** Joins: maik (maik___@moz-81035A5A.dip0.t-ipconnect.de)
[01:26:37] <kmc> one thing I really like about Rust's syntax: it's easy to find a function definition by grepping for 'fn foo'
[01:28:07] <mcpherrin> kmc: that's a good point.  Greppability is important :)
[01:28:15] <jdm> I do appreciate that
[01:28:32] <Niessy> hey just wondering do can you do lifetime stuff with @ pointers like you do with ~ pointers or because they're GCed you don't have to worry about that?
[01:29:00] <kmc> you mean, can you borrow an @-box as &'t ?
[01:29:34] <kmc> you can iirc, but the lifetime 't will be bounded by the static extent of how long the compiler can "root" the box for
[01:30:02] <Eridius> eholk: you can only use Self in the declaration of the trait; in the actual impl you have to use the real type name
[01:30:50] <kmc> rooting meaning in theory preventing it from moving or being GC'd
[01:31:00] <Niessy> i guess what i mean is do you have to worry about lifetimes in general with @ pointers
[01:31:02] <kmc> but right now @ boxes are reference counted and don't move, so it means just holding onto a reference behind the scenes
[01:31:10] <kmc> well an @ or ~ pointer itself never has an associated lifetime
[01:31:23] <kmc> lifetimes are a thing for & / &mut only
[01:32:12] <Niessy> hmmm ok let me just try something it's probably the best way to answer my own question
[01:32:23] *** Joins: carllerche (carllerche@1E2EB9E3.186539A3.965084DF.IP)
[01:32:32] *** Quits: carllerche (carllerche@1E2EB9E3.186539A3.965084DF.IP) (Quit: carllerche)
[01:32:43] *** Quits: erickt (etryzelaar@20D6D0DE.50CA9683.D51AEBE4.IP) (Ping timeout)
[01:32:46] *** Joins: robarnold (rob@BD56354E.DB510C09.6E370BFC.IP)
[01:33:56] *** Quits: adu (ajr@moz-F930C5C9.washdc.fios.verizon.net) (Quit: adu)
[01:34:46] *** Joins: adu (ajr@moz-F930C5C9.washdc.fios.verizon.net)
[01:35:35] <jeaye> Did something change recently with the way items are 'used'?
[01:36:09] <jeaye> After updating Rust, I'm getting some errors with unresolved usings that I don't recall touching.
[01:37:05] <pcwalton> do &traits work?
[01:37:32] <tikue_me> can you match on strings?
[01:37:38] <pcwalton> yes I believe
[01:37:48] *** Joins: dew1 (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com)
[01:37:53] *** Joins: Ralith (ralith@114DA04D.CD83ED0A.BCDF04A6.IP)
[01:38:17] <tikue_me> like match "foo bar" { *" "* => (), }
[01:38:18] <tikue_me> or something?
[01:38:25] *** Quits: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com) (Ping timeout)
[01:38:36] *** Quits: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: My lid went down)
[01:38:52] <engla> pcwalton: the new fmt code uses &mut Writer  at least
[01:38:59] <pcwalton> ok
[01:39:22] *** Joins: Jesin (Jessin_@moz-DD8D71FB.cc.lehigh.edu)
[01:39:22] <Eridius> tikue_me: that's matching on a string pattern, not on a string. I don't believe there's a way to do that
[01:39:39] <tikue_me> Eridius: ah ok. thanks!
[01:42:36] *** Joins: threecreepio (jdp@moz-71E164C9.cust.bredbandsbolaget.se)
[01:43:17] <eholk> Eridius: ok, thanks!
[01:43:24] *** Quits: KindOne (KindOne@moz-F991F831.dynamic.ip.windstream.net) (Ping timeout)
[01:44:10] *** Quits: riley (riley@8BA43816.9AA11D69.65DDFA89.IP) (Client exited)
[01:45:44] *** Quits: mihneadb (mihneadb@moz-329F29A3.lightspeed.sntcca.sbcglobal.net) (Input/output error)
[01:45:49] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[01:45:49] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 147e5278c to 145ef8cdb: 02http://git.io/N3iJvQ
[01:45:49] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[01:45:50] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[01:45:50] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/ZT6KBg
[01:45:50] <ghrust> 13rust/06auto 1414cdc26 15Corey Richardson: src/test/bench: restructure
[01:45:50] <ghrust> 13rust/06auto 148a07f57 15Corey Richardson: Teach compiletest to use multiple --src-base's
[01:45:51] <ghrust> 13rust/06auto 1443f851d 15Corey Richardson: Teach the makefile to use multiple src-base's
[01:45:53] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[01:46:19] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:46:35] <pcwalton> /Users/pwalton/Source/rust/master/src/libsyntax/ast_util.rs:406:4: 406:31 error: can only cast an @-pointer to an @-object, not a type error
[01:46:37] <pcwalton> nice error message :)
[01:46:52] <engla> make is saying  make[1]: Circular libuv.a <- libuv.a dependency dropped.
[01:47:03] *** Joins: KindOne (KindOne@moz-F991F831.dynamic.ip.windstream.net)
[01:48:47] <eholk> oooh, what is #[fixed_stack_segment] ?
[01:49:17] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Quit: Ex-Chat)
[01:50:27] <bjz> eholk: http://static.rust-lang.org/doc/tutorial-ffi.html
[01:51:36] <bjz> eholk: means that you can call C functions without worrying about the small stack size in rust tasks
[01:51:40] <bjz> I think
[01:51:44] <eholk> ok, that makes sense
[01:52:51] <eholk> ooh, externfn! is pretty cool
[01:57:07] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[01:57:37] <tikue_me> rusti: "c" as char
[01:57:41] -rusti- <anon>:5:9: 5:20 error: non-scalar cast: `&'static str` as `char`
[01:57:41] -rusti- <anon>:5          "c" as char
[01:57:41] -rusti-                   ^~~~~~~~~~~
[01:57:41] -rusti- error: aborting due to previous error
[01:57:41] -rusti- application terminated with error code 101
[01:57:46] <tikue_me> rusti: "c".to_char()
[01:57:47] -rusti- <anon>:5:9: 6:5 error: type `&'static str` does not implement any method in scope named `to_char`
[01:57:47] -rusti- <anon>:5          "c".to_char()
[01:57:47] -rusti- <anon>:6     };
[01:57:48] -rusti- error: aborting due to previous error
[01:57:50] -rusti- application terminated with error code 101
[01:57:53] <tikue_me> how do you get a char from a str :\
[01:58:01] <jorendorff>    rusti: "c"[0]
[01:58:06] <tikue_me> that's not safe though
[01:58:09] <pcwalton> transmute(string)
[01:58:10] <jorendorff> rusti: "c"[0]
[01:58:12] -rusti- 99
[01:58:38] <jeaye> rusti: "A"[0] as char
[01:58:39] -rusti- 'A'
[01:58:44] <tikue_me> thx
[01:58:51] * pcwalton wants to write the compiler plugin that fixes all typechecking errors by inserting transmutes
[01:59:04] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Ping timeout)
[02:00:48] <tikue_me> rusti: for c in "a b c d".iter().filter(|&c| c != ' ') { printÂ©; }
[02:00:49] -rusti- <anon>:5:64: 5:64 error: unknown start of token: \xa9
[02:00:49] -rusti- <anon>:5          for c in "a b c d".iter().filter(|&c| c != ' ') { printÂ©; }
[02:00:49] -rusti-                                                                          ^
[02:00:49] -rusti- application terminated with error code 101
[02:01:00] <tikue_me> rusti: for c in "a b c d".iter().filter(|&c| c != ' ') { print(c); }
[02:01:00] -rusti- <anon>:5:65: 5:66 error: mismatched types: expected `&str` but found `char` (expected &str but found char)
[02:01:01] -rusti- <anon>:5          for c in "a b c d".iter().filter(|&c| c != ' ') { print(c); }
[02:01:01] -rusti-                                                                           ^
[02:01:01] -rusti- error: aborting due to previous error
[02:01:01] -rusti- application terminated with error code 101
[02:01:09] <maik> can I add my own methods to an owned vector?
[02:01:10] <eholk> i forget how to make the test runner only use a single task
[02:01:11] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[02:01:16] <tikue_me> rusti: for c in "a b c d".iter().filter(|&c| c != " ") { print(c); }
[02:01:24] -rusti- pastebinned 8 lines of output: http://ix.io/7Gb
[02:01:25] <kmc> maik: you can define a new trait and then an impl for ~[T}
[02:01:28] <kmc> ~[T]
[02:01:29] <tikue_me> rusti: for c in "a b c d".iter().filter(|c| c != " ") { print(c); }
[02:01:30] -rusti- <anon>:5:58: 5:59 error: unknown start of token: \x1c
[02:01:30] -rusti- <anon>:5          for c in "a b c d".iter().filter(|c| c != " ") { print(c); }
[02:01:30] -rusti-                                                                    ^
[02:01:30] -rusti- application terminated with error code 101
[02:01:38] <tikue_me> rusti: for c in "a b c d".iter().filter(|c| c != " ") { print(c); }
[02:01:38] -rusti- <anon>:5:58: 5:59 error: unknown start of token: \x1c
[02:01:39] -rusti- <anon>:5          for c in "a b c d".iter().filter(|c| c != " ") { print(c); }
[02:01:39] -rusti-                                                                    ^
[02:01:39] -rusti- application terminated with error code 101
[02:01:47] <maik> kmc, okay thanks, wasn't sure if it was possible
[02:01:57] <kmc> you can't add non-trait methods to a type from a different crate
[02:01:57] <klutzy> rusti: let mut a = 1; let mut b = 0; (a, b) = (a + b, a);
[02:01:58] <tikue_me> rusti: for c in "a b c d".iter().filter(|c| c != " ") { printÂ©; }
[02:02:00] -rusti- pastebinned 10 lines of output: http://ix.io/7Gc
[02:02:00] -rusti- <anon>:5:63: 5:63 error: unknown start of token: \xa9
[02:02:00] -rusti- <anon>:5          for c in "a b c d".iter().filter(|c| c != " ") { printÂ©; }
[02:02:00] -rusti-                                                                         ^
[02:02:00] -rusti- application terminated with error code 101
[02:02:02] <aatch> rusti: for c in "a b c d".iter().filter(|c| c != " ") { print(c); }
[02:02:03] <tikue_me> omg what
[02:02:05] -rusti- pastebinned 8 lines of output: http://ix.io/7Gd
[02:02:18] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[02:02:18] <bjz> rusti: unsafe { std::cast::transmute::<(uint, uint), &str>("hiya!") }
[02:02:19] -rusti- <anon>:5:61: 5:68 error: mismatched types: expected `(uint,uint)` but found `&'static str` (expected tuple but found &'static str)
[02:02:19] -rusti- <anon>:5          unsafe { std::cast::transmute::<(uint, uint), &str>("hiya!") }
[02:02:20] -rusti-                                                                       ^~~~~~~
[02:02:20] -rusti- error: aborting due to previous error
[02:02:21] -rusti- application terminated with error code 101
[02:02:23] <aatch> rusti: for c in "a b c d".iter().filter(|c| c != ' ') { print(c); }
[02:02:25] -rusti- pastebinned 8 lines of output: http://ix.io/7Ge
[02:02:28] <eholk> pcwalton: that compiler pass sounds evil
[02:02:35] <bjz> rusti: unsafe { std::cast::transmute::<&str, (uint, uint)>("hiya!") }
[02:02:35] -rusti- (4230168, 5)
[02:02:46] <aatch> rusti: for c in "a b c d".iter().filter(|&c| c != ' ') { print(c); }
[02:02:47] -rusti- <anon>:5:65: 5:66 error: mismatched types: expected `&str` but found `char` (expected &str but found char)
[02:02:47] -rusti- <anon>:5          for c in "a b c d".iter().filter(|&c| c != ' ') { print(c); }
[02:02:47] -rusti-                                                                           ^
[02:02:47] -rusti- error: aborting due to previous error
[02:02:48] -rusti- application terminated with error code 101
[02:02:48] <pcwalton> eholk: yeah, a less risky one would just delete the functions that cause type errors from the AST
[02:03:02] <engla> tikue_me: there's a method called slice_shift_char or similar
[02:03:05] <aatch> rusti: for c in "a b c d".iter().filter(|&c| c != ' ') { print(c.to_str()); }
[02:03:05] -rusti- <anon>:5:65: 5:76 error: type `char` does not implement any method in scope named `to_str`
[02:03:06] -rusti- <anon>:5          for c in "a b c d".iter().filter(|&c| c != ' ') { print(c.to_str()); }
[02:03:06] -rusti-                                                                           ^~~~~~~~~~~
[02:03:06] -rusti- error: aborting due to previous error
[02:03:07] -rusti- application terminated with error code 101
[02:03:11] <tikue_me> for c in "a b c d".iter().filter(|&c| c != ' ') { print( c ); }
[02:03:13] <bjz> pcwalton: x)
[02:03:20] <engla> rusti: "c".slice_shift_char()
[02:03:20] <tikue_me> rusti: for c in "a b c d".iter().filter(|&c| c != ' ') { print( c ); }
[02:03:22] -rusti- ('c', "")
[02:03:22] -rusti- <anon>:5:66: 5:67 error: mismatched types: expected `&str` but found `char` (expected &str but found char)
[02:03:22] -rusti- <anon>:5          for c in "a b c d".iter().filter(|&c| c != ' ') { print( c ); }
[02:03:22] -rusti-                                                                            ^
[02:03:22] -rusti- error: aborting due to previous error
[02:03:24] -rusti- application terminated with error code 101
[02:03:32] <engla> rusti: "Î±Î²".slice_shift_char()
[02:03:33] -rusti- ('\u03b1', "\u03b2")
[02:03:51] <aatch> lolwut, char doesn't implement to_str?
[02:04:02] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[02:04:03] <eholk> pcwalton: yeah, although you'd have to delete all the functions that call those, and the functions that call those...
[02:04:18] <tikue_me> rusti: for c in "a b c d".iter().filter(|c| c != ' ') { print( c ); }
[02:04:19] <bjz> aatch: no, kinda weird
[02:04:22] -rusti- pastebinned 8 lines of output: http://ix.io/7Gf
[02:04:44] <tikue_me> rusti: for c in "a b c d".iter().filter(|&c| c != ' ') { print( c.to_str() ); }
[02:04:45] -rusti- <anon>:5:66: 5:78 error: type `char` does not implement any method in scope named `to_str`
[02:04:45] -rusti- <anon>:5          for c in "a b c d".iter().filter(|&c| c != ' ') { print( c.to_str() ); }
[02:04:45] -rusti-                                                                            ^~~~~~~~~~~~
[02:04:45] -rusti- error: aborting due to previous error
[02:04:46] <aatch> That seems like an oversight...
[02:04:47] -rusti- application terminated with error code 101
[02:04:53] <aatch> rusti: 1.to_str()
[02:04:56] -rusti- pastebinned 35 lines of output: http://ix.io/7yB
[02:05:02] <aatch> rusti: 1u.to_str()
[02:05:04] -rusti- ~"1"
[02:05:50] <tikue_me> rusti: for c in "a b c d".iter().filter(|&c| c != ' ') { print!("{}", c); }
[02:05:52] -rusti- abcd()
[02:05:55] <tikue_me> lol
[02:07:29] <eholk> does RUST_NUM_THREADS still work?
[02:08:51] <engla> isn't it RUST_THREADS=
[02:09:07] <eholk> oh, maybe
[02:09:19] <eholk> yup, that's it
[02:10:14] <tikue_me> rusti: enum Foo { Mul = '*', Div = '/' }
[02:10:17] -rusti- pastebinned 8 lines of output: http://ix.io/7Gg
[02:14:11] <tikue_me> rusti: '0'.to_digit()
[02:14:12] -rusti- <anon>:5:9: 6:5 error: this function takes 1 parameter but 0 parameters were supplied
[02:14:12] -rusti- <anon>:5          '0'.to_digit()
[02:14:12] -rusti- <anon>:6     };
[02:14:12] -rusti- error: aborting due to previous error
[02:14:12] -rusti- application terminated with error code 101
[02:14:19] <tikue_me> rusti: '0'.to_digit(9)
[02:14:20] -rusti- Some(0)
[02:14:23] <tikue_me> rusti: '9'.to_digit(9)
[02:14:25] -rusti- None
[02:14:28] <tikue_me> rusti: '9'.to_digit(10)
[02:14:29] -rusti- Some(9)
[02:14:42] <maik> can I use collect in for x in v.iter()?
[02:14:55] <kmc> how do you want to use it?
[02:14:59] <maik> dunno
[02:15:29] <tikue_me> maik: you can't collect() and iterate over it both
[02:15:32] <tikue_me> you do one or the other
[02:15:36] <tikue_me> actually that's not true
[02:15:40] <kmc> you can try to do x.iter().collect().iter() but why
[02:15:41] <tikue_me> you can break out and collect the rest of the iterator
[02:15:58] <kmc> ah interesting
[02:16:59] *** Quits: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net) (Connection reset by peer)
[02:17:21] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[02:17:47] *** Quits: olsonjeffery (pf@B8927AE1.CFEFA148.239A1A9E.IP) (Ping timeout)
[02:17:47] *** Quits: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[02:17:48] <tikue_me> let mut s = "abcde".iter(); for &c in s { printfln!( c); if c == 'c' { break; }} printfln!(s.collect::<str>());
[02:17:55] *** Joins: olsonjeffery (pf@B8927AE1.CFEFA148.239A1A9E.IP)
[02:17:57] <tikue_me> rusti: let mut s = "abcde".iter(); for &c in s { printfln!( c); if c == 'c' { break; }} printfln!(s.collect::<str>());
[02:18:01] -rusti- pastebinned 12 lines of output: http://ix.io/7Gi
[02:18:25] <tikue_me> rusti: let mut s = "abcde".iter(); for c in s { printfln!( c); if c == 'c' { break; }} printfln!(s.collect::<&str>());
[02:18:28] -rusti- pastebinned 8 lines of output: http://ix.io/7Gj
[02:18:41] <engla> must collect to ~str (a type that has its own allocation)
[02:18:43] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[02:18:45] <tikue_me> rusti: let mut s = "abcde".iter(); for c in s { printfln!( c); if c == 'c' { break; }} printfln!(s.collect::<~str>());
[02:18:47] -rusti- 'a'
[02:18:47] -rusti- 'b'
[02:18:47] -rusti- 'c'
[02:18:47] -rusti- ~"de"
[02:18:47] -rusti- ()
[02:18:50] <tikue_me> thanks
[02:18:58] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:19:01] *** Quits: adu (ajr@moz-F930C5C9.washdc.fios.verizon.net) (Quit: adu)
[02:19:31] <engla> the representation of the CharIterator is in fact just a &str (wrapped in a struct) as well
[02:20:03] <engla> maybe it should be possible to convert back to a slice
[02:20:41] *** Joins: mihneadb (mihneadb@moz-9C82EA01.lightspeed.sntcca.sbcglobal.net)
[02:21:28] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[02:21:28] <engla> let mut s = "abcde".iter(); for c in s { if c == 'c' { break } } println!("{:?}", s)
[02:21:34] <engla> rusti: let mut s = "abcde".iter(); for c in s { if c == 'c' { break } } println!("{:?}", s)
[02:21:35] -rusti- {string: "de"}
[02:21:35] -rusti- ()
[02:22:39] <kmc> somebody remind me what "managed unique" boxes are?  ~-boxes that contain an @ somewhere?
[02:23:01] <kmc> and annihilate() at task exit will traverse those as well as @ boxes themselves?
[02:23:11] <jack> kmc @~int
[02:24:18] <jack> hmm. now i'm not sure.
[02:24:24] *** Quits: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[02:26:29] <engla> kmc: you are right
[02:28:48] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[02:30:16] *** Joins: rlin-nb (rlin@moz-99690620.hinet-ip.hinet.net)
[02:30:47] *** Quits: eholk (eric@moz-F70D5031.hsd1.in.comcast.net) (Quit: Konversation terminated!)
[02:31:11] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[02:31:56] *** Joins: ofeldt- (ofeldt@moz-8AEB8DF9.dip0.t-ipconnect.de)
[02:32:35] *** Quits: ofeldt (ofeldt@moz-DCA1E5D7.dip0.t-ipconnect.de) (Ping timeout)
[02:34:34] *** Quits: Ralith (ralith@114DA04D.CD83ED0A.BCDF04A6.IP) (Ping timeout)
[02:34:53] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[02:35:14] <maik> what is the best way to use one clojure in different tasks?
[02:35:26] <maik> can I use an arc?
[02:35:42] <maik> or can I somehow clone a clojure?
[02:36:01] *** Joins: Ralith (ralith@114DA04D.CD83ED0A.BCDF04A6.IP)
[02:38:37] <Scaevolus> closure
[02:40:08] <engla> maik: closures will be changed around a bit, so things will change
[02:40:14] <engla> can't be cloned right now
[02:41:10] <maik> engla, is there a work around?
[02:41:23] <maik> engla, maybe I mark it as static? like &'static fn?
[02:42:54] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[02:43:13] <tikue_me> is there a way to use enums for precedence?
[02:43:15] <tikue_me> like:
[02:43:30] <tikue_me> rusti: enum Operators { div = 1, mult = 1, plus = 0, minus = 0 }
[02:43:34] -rusti- pastebinned 8 lines of output: http://ix.io/7Gm
[02:44:18] <engla> maik: if it closes over anything it can't be 'static
[02:45:48] <engla> maik: you can clone &'static fn() with some dirty code, since it's just a function pointer without environment, inside a closure representation
[02:45:51] *** Quits: zz_kimundi (kimundi@moz-25720C1F.dip0.t-ipconnect.de) (Ping timeout)
[02:45:58] <engla> an extern fn is Send
[02:48:09] <tikue_me> so do you have to do enum Operator { div(uint), mult(uint), plus(uint), minus(uint) } to get that behavior?
[02:48:28] <tikue_me> which lacks compile-time checking of precedence
[02:49:00] *** Joins: zz_kimundi (kimundi@moz-2D7CCC0A.dip0.t-ipconnect.de)
[02:49:27] *** zz_kimundi is now known as kimundi
[02:51:35] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: G'night everynyan~!)
[02:54:28] *** Joins: mib_zklei2 (Mibbit@moz-F4E830A0.cable.mindspring.com)
[02:54:30] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[02:54:51] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[02:55:42] <tikue_me> rusti: enum Foo { Bar, Baz } impl Cmp for Foo { fn cmp(&self, other: &Self) -> Ordering { (self as uint).cmp(other as uint) } }
[02:55:48] -rusti- pastebinned 8 lines of output: http://ix.io/7Gn
[02:55:52] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[02:55:52] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/ZT6KBg
[02:55:52] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[02:56:38] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[02:57:31] <tikue_me> rusti: enum Foo { Bar, Baz } impl Ord for Foo { fn lt(&self, other: &Self) -> bool { (other as uint).lt(self as uint) } }
[02:57:32] -rusti- <anon>:5:71: 5:75 error: use of undeclared type name `Self`
[02:57:32] -rusti- <anon>:5          enum Foo { Bar, Baz } impl Ord for Foo { fn lt(&self, other: &Self) -> bool { (other as uint).lt(self as uint) } }
[02:57:32] -rusti-                                                                                 ^~~~
[02:57:32] -rusti- error: aborting due to previous error
[02:57:33] -rusti- application terminated with error code 101
[02:57:45] <tikue_me> rusti: enum Foo { Bar, Baz } impl Ord for Foo { fn lt(&self, other: &Foo) -> bool { (other as uint).lt(self as uint) } }
[02:57:47] -rusti- pastebinned 11 lines of output: http://ix.io/7Go
[02:58:23] <tikue_me> rusti: enum Foo { Bar, Baz } impl Ord for Foo { fn lt(&self, other: &Foo) -> bool { (*other as uint).lt(*self as uint) } }
[02:58:24] -rusti- <anon>:5:106: 5:119 error: mismatched types: expected `&uint` but found `uint` (expected &-ptr but found uint)
[02:58:24] -rusti- <anon>:5          enum Foo { Bar, Baz } impl Ord for Foo { fn lt(&self, other: &Foo) -> bool { (*other as uint).lt(*self as uint) } }
[02:58:24] -rusti-                                                                                                                    ^~~~~~~~~~~~~
[02:58:24] -rusti- error: aborting due to previous error
[02:58:26] -rusti- application terminated with error code 101
[02:58:41] <tikue_me> rusti: enum Foo { Bar, Baz } impl Ord for Foo { fn lt(&self, other: &Foo) -> bool { (*other as uint).lt(&(*self as uint)) } }
[02:58:42] -rusti- ()
[02:58:47] <achin> hm, anyone having troubles cloning from github? 
[02:59:59] <tikue_me> 1u.lt(&2u)
[03:00:04] <tikue_me> rusti: 1u.lt(&2u)
[03:00:05] -rusti- true
[03:00:50] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[03:01:10] *** Joins: victorporof_ (victorporo@moz-BAE8D951.pck.nerim.net)
[03:01:35] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[03:01:35] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/eOQmzg
[03:01:35] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[03:01:39] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[03:01:39] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/PqNnKw
[03:01:39] <ghrust> 13rust/06auto 144fd1e31 15Brian Anderson: rustc: Fix cstack lint for default methods. Closes #8753
[03:01:39] <ghrust> 13rust/06auto 14b720ffa 15bors: auto merge of #8796 : brson/rust/cstack, r=catamorphism
[03:01:40] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[03:01:45] *** Quits: victorporof (victorporo@moz-18BD542A.pck.nerim.net) (Ping timeout)
[03:04:47] <tikue_me> rusti: enum Foo { Bar, Baz } impl Ord for Foo { fn lt(&self, other: &Foo) -> bool { (*other as uint).lt(&(*self as uint)) } } Bar < Baz
[03:04:48] -rusti- false
[03:05:06] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[03:08:02] <enix> Has something changed with calling generic implementations? NumCast::from::<S,T>() doesn't seem to work for me on master
[03:10:04] <tikue_me> yup
[03:10:07] <acrichto> enix: the Self type argument can no longer be specified in ::<> lists
[03:10:19] <acrichto> it has to be implied through some other method, normally ascription of the destination
[03:12:03] *** Quits: boredomist (user@moz-63CF9F31.res-cmts.sesp.ptd.net) (Ping timeout)
[03:12:26] <gavinb> I'm trying to write a macro that will help with declaring four-ccs. These are widely used in video and audio file formats, as tags which are say uint32_t numbers but spell an abbreviation, like 'TIFF'. But I get the error: error: paths in constants may only refer to items without type parameters.
[03:12:46] <enix> ok, thanks.
[03:13:13] <gavinb> So is there a way for the macro to compute this thing at compile time? Currently using transmute to go from u8[4] to u32.
[03:13:52] *** Quits: huseby (huseby@8F761026.B5EF4AF6.E96CA9D8.IP) (Quit: Leaving)
[03:14:00] <acrichto> sadly statics can only be initialized with a very limited set of things, namely only constants (no function calls)
[03:14:57] *** Quits: Earnestly (earnest@moz-F387F877.dyn.plus.net) (Ping timeout)
[03:15:35] *** Joins: zeuxcg (zeuxcg@moz-80D1F912.hsd1.ca.comcast.net)
[03:16:36] <sfackler> it's super ugly, but you can do something like 'T' as u32 << 24 | 'I' as u8 << 16, etc
[03:17:09] <maik> okay I implemented a par_map in Rust... that was painful 
[03:17:12] <sfackler> and call the macro like fourcc!('T', 'I', 'F', 'F')
[03:18:31] *** Joins: emartin (emartin@moz-96C98BDD.res.umontreal.ca)
[03:21:33] <gavinb> ok, thanks - I'll try it out
[03:22:04] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:22:28] <tikue_me> rusti: let n: uint = FromStr::from_str("99")
[03:22:29] -rusti- <anon>:6:4: 6:5 error: expected `;` but found `}`
[03:22:29] -rusti- <anon>:6     };
[03:22:29] -rusti-              ^
[03:22:29] -rusti- application terminated with error code 101
[03:22:31] <tikue_me> rusti: let n: uint = FromStr::from_str("99");
[03:22:39] -rusti- pastebinned 7 lines of output: http://ix.io/7Gp
[03:22:44] *** Quits: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP) (Ping timeout)
[03:22:49] <tikue_me> rusti: let n: uint = FromStr::from_str("99").unwrap();
[03:22:50] -rusti- <anon>:5:13: 5:14 warning: unused variable: `n` [-W unused-variable (default)]
[03:22:51] -rusti- <anon>:5          let n: uint = FromStr::from_str("99").unwrap();
[03:22:51] -rusti-                       ^
[03:22:51] -rusti- ()
[03:22:52] <gavinb> acrichto: this would be a constant though, if I could get the macro evaluated at compile time...
[03:23:11] <acrichto> compile-time-function-evaluation is a whole can of worms though
[03:23:23] <acrichto> it's certainly possible though
[03:23:35] <gavinb> yeah, hairy - but very useful!
[03:24:04] <gavinb> Lisp macros spring to mind...
[03:25:56] <gavinb> It would be kinda cool if Rust had the gcc extension for fourcc support; 'TIFF' compiles to uint32_t
[03:26:15] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[03:27:14] <tikue_me> is there a split str method that splits on any of a list of chars
[03:27:28] *** Quits: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP) (Quit: Lost terminal)
[03:28:58] *** Quits: olsonjeffery (pf@B8927AE1.CFEFA148.239A1A9E.IP) (Ping timeout)
[03:30:21] *** Quits: mib_9uybip (mib_9uybip@FFC4F26.497EC1B8.5EFB9497.IP) (Client exited)
[03:31:07] <maik> any idea why --bench outputs 0ns/iter? doesn't it work with tasks?
[03:32:17] *** Joins: mib_9uybip (mib_9uybip@FFC4F26.497EC1B8.5EFB9497.IP)
[03:32:31] *** Joins: olsonjeffery (pf@B8927AE1.CFEFA148.239A1A9E.IP)
[03:34:24] *** Quits: mib_9uybip (mib_9uybip@FFC4F26.497EC1B8.5EFB9497.IP) (Client exited)
[03:37:47] *** Quits: Archer (Archer@moz-C36DFA25.bb.online.no) (Quit: Leaving)
[03:40:49] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[03:40:49] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14b720ffa to 147c6c751: 02http://git.io/N3iJvQ
[03:40:49] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[03:43:03] <tikue_me> rusti: enum Foo { Bar(uint), Baz(uint) } match Bar(2u) { Bar(_) @ bar => bar, _ => fail!(), }
[03:43:03] -rusti- <anon>:5:66: 5:67 error: expected `=>` but found `@`
[03:43:03] -rusti- <anon>:5          enum Foo { Bar(uint), Baz(uint) } match Bar(2u) { Bar(_) @ bar => bar, _ => fail!(), }
[03:43:03] -rusti-                                                                            ^
[03:43:04] -rusti- application terminated with error code 101
[03:43:08] <tikue_me> what happened to that?
[03:43:26] <tikue_me> rusti: enum Foo { Bar(uint), Baz(uint) } match Bar(2u) { Bar(_) as bar => bar, _ => fail!(), }
[03:43:27] -rusti- <anon>:5:66: 5:68 error: expected `=>` but found `as`
[03:43:27] -rusti- <anon>:5          enum Foo { Bar(uint), Baz(uint) } match Bar(2u) { Bar(_) as bar => bar, _ => fail!(), }
[03:43:27] -rusti-                                                                            ^~
[03:43:27] -rusti- application terminated with error code 101
[03:43:36] <tikue_me> rusti: enum Foo { Bar(uint), Baz(uint) } match Bar(2u) { Bar(_) : bar => bar, _ => fail!(), }
[03:43:36] -rusti- <anon>:5:66: 5:67 error: expected `=>` but found `:`
[03:43:36] -rusti- <anon>:5          enum Foo { Bar(uint), Baz(uint) } match Bar(2u) { Bar(_) : bar => bar, _ => fail!(), }
[03:43:36] -rusti-                                                                            ^
[03:43:36] -rusti- application terminated with error code 101
[03:43:48] <tikue_me> i thought there was a way to destructure while keeping a reference to the whole thing
[03:44:02] <jeaye> Did something change recently with the way items are 'used'?
[03:44:06] <jeaye> After updating Rust, I'm getting some errors with unresolved usings that I don't recall touching.
[03:45:23] *** Joins: mib_9uybip (mib_9uybip@FFC4F26.497EC1B8.5EFB9497.IP)
[03:47:19] *** Quits: robarnold (rob@BD56354E.DB510C09.6E370BFC.IP) (Quit: leaving)
[03:47:23] *** Quits: emartin (emartin@moz-96C98BDD.res.umontreal.ca) (Quit: leaving)
[03:50:15] <sfackler> tikue_me: bar @ Bar(_) => ...
[03:50:37] <tikue_me> ohhh always i do it backwards >_<
[03:50:54] *** Quits: maik (maik___@moz-81035A5A.dip0.t-ipconnect.de) (Ping timeout)
[03:50:55] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[03:50:55] *** ChanServ sets mode: +o tjc
[03:52:19] <dbaupp> rusti: printfln!("foo bar1baz".split_iter(&[' ', '1']).to_owned_vec())
[03:52:20] -rusti- ~["foo", "bar", "baz"]
[03:52:20] -rusti- ()
[03:52:31] <dbaupp> tikue_me: ^ btw
[03:52:49] <tikue_me> ooh awesome, thanks dbaupp 
[03:52:52] <sfackler> does anyone know how I can properly express lifetime constraints here? https://gist.github.com/sfackler/73588d3ddd489eaa387e
[03:53:21] <dbaupp> rusti: printfln!("foo bar1baz".split_iter(|c: char| c == ' ' || c == '1').to_owned_vec())
[03:53:22] -rusti- ~["foo", "bar", "baz"]
[03:53:22] -rusti- ()
[03:53:35] <dbaupp> tikue_me: also ^, if you have something more complicated
[03:54:19] <tikue_me> dbaupp: there's no way to split without losing chars is there
[03:54:39] <dbaupp> tikue_me: i.e. the separators?
[03:54:44] <tikue_me> yea
[03:54:45] <dbaupp> I don't think so
[03:54:48] <tikue_me> ok
[03:54:48] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[03:54:48] *** ChanServ sets mode: +ao dherman dherman
[03:57:09] <dbaupp> brson: https://github.com/mozilla/rust/pull/8854 r?
[03:57:49] *** Quits: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[03:58:04] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[03:59:50] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[04:00:01] <tikue_me> can you derivce something to get the trait std::fmt::Default
[04:00:54] *** Joins: emartin (emartin@moz-96C98BDD.res.umontreal.ca)
[04:02:18] <emartin> i'm looking at the Eq impl for ~str in libstd/str.rs. Is there any reason that the "ne" function has to do !(*self).eq(other) rather than just !self.eq(other)?
[04:03:00] <acrichto> tikue_me: no, ther's no derivation of that yet
[04:03:06] <tikue_me> ok thx
[04:03:44] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[04:03:51] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[04:05:32] *** Quits: mihneadb (mihneadb@moz-9C82EA01.lightspeed.sntcca.sbcglobal.net) (Input/output error)
[04:05:54] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: zzzzzzzzzz)
[04:06:10] <dbaupp> emartin: probably not
[04:07:13] <emartin> dbaupp: thanks. is there any reason i shouldn't go around and clean up stuff like that now that Eq has a default method for "ne"?
[04:07:20] *** Joins: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP)
[04:07:30] <steven_is_false> bblum: ping?
[04:07:37] <dbaupp> emartin: there is a good reason to do it, yes :)
[04:07:51] * dbaupp can never answer negative questions properly
[04:07:53] <strcat> just be careful about things without total equality
[04:08:06] <strcat> floats, or anything possibly implementing Eq on top of floats (containers)
[04:08:37] <dbaupp> emartin: str is possibly one of the last ones that can be converted
[04:10:55] *** Joins: z0w0 (zack@moz-7E6DC3A.lnse2.woo.bigpond.net.au)
[04:12:15] <emartin> dbaupp: why str last?
[04:13:21] <dbaupp> emartin: because others have gone through and done many of the other ones :)
[04:13:32] *** Quits: tikue_me (tkuehn@97508B57.E6CB677E.689607DE.IP) (Quit: tikue_me)
[04:13:36] <dbaupp> (that said, there's probably a few more squirreled away somewhere)
[04:13:57] <emartin> oh, got it. i thought you were saying there were others to do before str, not that str is one of the few remaining ones
[04:14:12] *** Quits: ChrisMorgan (chris@moz-1A621BB6.its.monash.edu.au) (Ping timeout)
[04:15:16] <noct> anyone here managed to build rust on windows?
[04:15:31] <noct> configure always fails for me w/ gcc < 4.6
[04:15:34] <dbaupp> noct: yes (not me personally, but others have)
[04:15:43] <noct> but the docs say you have to use <4.6
[04:15:50] <dbaupp> what's the error output?
[04:16:49] <noct> dbaupp: the gcc check fails
[04:17:01] <noct> looking at config.log I get: undefined reference to `__chkstk_ms`
[04:17:32] <noct> from what I've learned it's supposed to be in libgcc, which I've installed
[04:17:40] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[04:18:09] <noct> I got the same problem building curl, but was able to build it with the latest msys gcc
[04:18:40] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[04:19:06] <noct> but obviously that's problematic for rust if it doesn't build w/ >= 4.6
[04:19:57] <dbaupp> do you have both gcc and g++ < 4.6?
[04:20:08] <noct> yeah
[04:20:40] <dbaupp> ok; I don't have any thing else to offer.. and google doesn't say much for __chkstk_ms :(
[04:20:46] <noct> (libgcc and libstdc++ as well)
[04:20:49] <noct> yeah I know
[04:20:59] <noct> took a bunch of digging to even find the libgcc relation
[04:23:29] *** Joins: ChrisMorgan (chris@moz-1A621BB6.its.monash.edu.au)
[04:25:21] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:28:41] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[04:30:15] *** Joins: robarnold (rob@BD56354E.DB510C09.6E370BFC.IP)
[04:31:16] *** Quits: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net) (Quit: gavinb)
[04:31:34] *** Quits: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr) (Ping timeout)
[04:32:10] *** Joins: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net)
[04:35:40] *** Joins: tikue_ (tkuehn@moz-9DE1181F.hfc.comcastbusiness.net)
[04:36:02] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[04:37:49] *** Quits: KindOne (KindOne@moz-F991F831.dynamic.ip.windstream.net) (Ping timeout)
[04:38:09] *** Quits: threecreepio (jdp@moz-71E164C9.cust.bredbandsbolaget.se) (Quit: threecreepio)
[04:40:49] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[04:40:49] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/YbQ_yA
[04:40:49] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[04:41:37] *** Joins: KindOne (KindOne@moz-9DB15391.dynamic.ip.windstream.net)
[04:42:42] <Eridius> rusti: let x = ~"foo"; ~"test" + x
[04:42:43] -rusti- ~"testfoo"
[04:42:46] <Eridius> rusti: let x = ~"foo"; "test" + x
[04:42:48] -rusti- ~"testfoo"
[04:43:23] <Eridius> rusti: let x = @"foo"; @"test" + x
[04:43:24] -rusti- ~"testfoo"
[04:45:47] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[04:45:47] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/kP0jNg
[04:45:47] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[04:45:50] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[04:45:51] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/3anXjQ
[04:45:51] <ghrust> 13rust/06auto 1497f61e7 15Alex Crichton: Remove @io::Writer from sys/repr/reflect...
[04:45:51] <ghrust> 13rust/06auto 14e0fdbfe 15bors: auto merge of #8820 : alexcrichton/rust/no-io-writer, r=brson...
[04:45:51] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[04:46:09] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[04:47:17] *** Quits: jclements (jclements@moz-CDAD933D.wireless.calpoly.edu) (Ping timeout)
[04:48:01] *** Joins: jclements (jclements@moz-CDAD933D.wireless.calpoly.edu)
[04:52:27] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[04:56:02] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[04:56:30] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[04:56:46] *** Quits: tikue_ (tkuehn@moz-9DE1181F.hfc.comcastbusiness.net) (Quit: tikue_)
[04:57:20] *** Joins: mihneadb (mihneadb@moz-329F29A3.lightspeed.sntcca.sbcglobal.net)
[04:58:25] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[04:59:54] *** Quits: aatch (aatch@moz-B437F499.pocketrent.com) (Quit: Leaving)
[05:04:32] *** Quits: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net) (Ping timeout)
[05:07:11] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: sleep)
[05:08:07] *** Joins: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[05:09:07] *** Joins: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net)
[05:10:38] <tikue_> rusti: 2f.pow(2f)
[05:10:39] -rusti- <anon>:5:16: 5:18 error: mismatched types: expected `&float` but found `float` (expected &-ptr but found float)
[05:10:39] -rusti- <anon>:5          2f.pow(2f)
[05:10:39] -rusti-                          ^~
[05:10:39] -rusti- error: aborting due to previous error
[05:10:39] -rusti- application terminated with error code 101
[05:10:47] <tikue_> rusti: 2f.pow(&2f)
[05:10:48] -rusti- 4
[05:11:00] <tikue_> is there a keyword for exponent
[05:11:56] <acrichto> not currently
[05:13:10] <dbaupp> rusti: std::num::pow(2f, 2.5f)
[05:13:12] -rusti- 5.65685425
[05:14:09] <dbaupp> rusti: format!("{}", 5.82)
[05:14:11] -rusti- ~"5.82"
[05:14:16] <dbaupp> rusti: format!("{:f}", 5.82)
[05:14:17] -rusti- ~"5.82"
[05:14:31] <Eridius> tikue_: did you mean operator? why, should there be?
[05:14:58] <tikue_> Eridius: it should at least be in the prelude imo
[05:15:02] <dbaupp> acrichto: https://github.com/mozilla/rust/issues/2249 ?
[05:15:14] <dbaupp> acrichto: (do you reckon that's closeable?)
[05:15:28] <dbaupp> rusti: format!("{}", 1, 2)
[05:15:28] -rusti- <anon>:5:26: 5:27 error: argument never used
[05:15:29] -rusti- <anon>:5          format!("{}", 1, 2)
[05:15:29] -rusti-                                    ^
[05:15:29] -rusti- error: aborting due to previous error
[05:15:29] -rusti- application terminated with error code 101
[05:15:42] <eevee> rust is borrowing from python faster than python can find things to reinvent
[05:15:45] <tikue_> i'm just annoyed that num.pow() takes a pointer as arg :(
[05:15:46] <eevee> <3
[05:16:03] <Eridius> Someone should review acrichto's https://github.com/mozilla/rust/pull/8843. It at least fixes the ICE I was hitting, and I hope it fixes the Windows issue I had with my Process::new() PR
[05:16:03] <tikue_> eevee: which things are you thinking of specifically? 
[05:16:06] *** Joins: threecreepio (jdp@moz-1A9F0A3C.cust.bredband2.com)
[05:16:09] <eevee> tikue_: new format  :)
[05:16:09] <dbaupp> tikue: use the free standing wrapper, std::num::pow
[05:16:13] <tikue_> haha
[05:16:28] <Eridius> tikue_: most trait functions like that take a pointer, since they may be implemented on non-primitive types
[05:16:29] <dbaupp> *tikue_
[05:16:34] *** Joins: ecr (Thunderbir@moz-CF8BEBEF.dia.static.qwest.net)
[05:16:41] <tikue_> dbaupp: what is the reasoning for std::num::pow not taking pointers, but method pow taking a pointer?
[05:17:00] <dbaupp> tikue_: so that you're not calling std::num::pow(&2.0, &1.5) I guess
[05:17:03] *** Quits: ecr (Thunderbir@moz-CF8BEBEF.dia.static.qwest.net) (Quit: ecr)
[05:17:11] <tikue_> eevee: iterators and format are definitely the most conspicuously python-influenced
[05:17:14] <dbaupp> (since the most common case will be on primitive types; i.e. it's just sugar)
[05:17:27] <tikue_> ok, makes sense
[05:17:34] <jack> tikue: the RHS always takes a pointer because you have no idea how big the struct that impls Pow or whatever is going to be.
[05:17:49] <tikue_> jack: but why isn't the same logic true for function pow(arg1, arg2)
[05:18:00] <jack> because that is defined only on primitives right?
[05:18:12] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[05:18:12] <dbaupp> it's generic to Real
[05:18:16] <dbaupp> (or whatever the trait is)
[05:18:24] <jack> ah, then no idea.
[05:18:27] <dbaupp> rusti: std::num::pow((), ())
[05:18:28] -rusti- <anon>:5:9: 5:22 error: failed to find an implementation of trait std::num::Algebraic for ()
[05:18:28] -rusti- <anon>:5          std::num::pow((), ())
[05:18:28] -rusti-                   ^~~~~~~~~~~~~
[05:18:29] -rusti- application terminated with error code 101
[05:18:33] <dbaupp> Algebraic
[05:18:39] <Eridius> Algebraic
[05:18:41] <Eridius> dammit dbaupp 
[05:18:42] <acrichto> dbaupp: that's a good metabug, I should probably update the progress though
[05:19:12] <jack> Add, Eq, and others all take refs on the RHS too.
[05:19:21] <bjz> dbaupp: we really need to add pow
[05:19:23] <jack> so at least *that* part is consistent.
[05:19:30] <dbaupp> bjz: it already exists?
[05:19:38] <acrichto> dbaupp: actually hmmm.... nothing else on that metabug is done, it probably deserves a better name though
[05:19:39] <bjz> dbaupp: folks are always asking for it - for ints
[05:19:54] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[05:19:54] <bjz> dbaupp: also proper conversions
[05:20:08] <dbaupp> rusti: std::num::pow_with_uint(2.0f, 5)
[05:20:12] -rusti- pastebinned 7 lines of output: http://ix.io/7Gs
[05:20:50] *** Joins: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr)
[05:20:50] <dbaupp> hm, pow_with_uint is uselses
[05:20:56] <dbaupp> *essentially useless
[05:20:57] <bjz> aye
[05:21:12] <bjz> annoying name too
[05:21:14] <bjz> :P
[05:21:25] <dbaupp> jack: do you know if/when the icfp results are released?
[05:21:37] <dbaupp> bjz: well it's useless, so it can be as annoying as it likes
[05:21:39] <jack> usually a little bit before the conference.
[05:22:04] <dbaupp> :( still a month to wait
[05:22:51] <gavinb> dbaupp: Did you enter with Rust?
[05:23:39] <dbaupp> gavinb: jack, bjz, eatkinson and I, yes.
[05:23:58] <jack> narrowly missed top 25 finish too 
[05:24:01] <gavinb> cool! How do you think you went?
[05:24:10] * bjz was moral support, and recruiter of dbaupp
[05:24:13] <bjz> ;)
[05:24:37] <gavinb> I thought the topic was not especially inspiring. I much preferred the simulations, robots and stuff of earlier years.
[05:25:22] <jack> gavinb: there have been better topics for sure. but it was still a ton of fun.
[05:25:45] <dbaupp> rust was nice because it's fast; so brute force was perfectly reasonable
[05:26:28] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[05:27:54] <dbaupp> (among other things, obviously)
[05:28:16] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[05:28:27] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:29:57] <gavinb> so you didn't invent some AI inference engine magic? baw
[05:30:43] *** Joins: SingingBoyo (SingingBoy@4DF3381A.51F4D838.4F048BDC.IP)
[05:31:28] <dbaupp> nah, we did; but, err, the compiler kept ICEing, so we couldn't compile it :(
[05:31:31] <dbaupp> :P
[05:31:48] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[05:31:48] *** ChanServ sets mode: +o tjc
[05:32:07] <gavinb> I know your pain!
[05:32:12] <Eridius> dbaupp: we should have an extra::dwim module, but every attempt to use it just ICE's permanently
[05:32:19] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[05:32:34] <jack> we were generating programs at the rate of 3 microsecs per candidate.
[05:32:38] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[05:32:44] <jack> something crazy like that.
[05:33:01] <jack> at the top sizes i think it was 15us or so
[05:34:22] <dbaupp> Eridius: I'd r+ it :P
[05:39:47] <Eridius> how can I run the doc code examples without running a full `make check`?
[05:40:28] <dbaupp> make check-stage2-doc iirc
[05:40:40] <dbaupp> (without the `iirc` ;) )
[05:41:00] *** Joins: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com)
[05:41:49] <Eridius> bah. I tried make check-doc and variants
[05:41:59] <Eridius> yay that's doing something. thanks
[05:42:29] <Eridius> oh geeze, it doesn't know how to scale to cores. It just massively oversubscribed my cPU
[05:42:47] <Eridius> I think the run-pass infrastructure in general tries to run too many at once
[05:43:36] <dbaupp> I think RUST_THREADS=1 works for it?
[05:44:30] *** Quits: jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: zzz)
[05:44:36] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[05:44:55] <Eridius> yeah that does seem to help. I'm just surprised, I thought it tried to use ncpus or something
[05:45:01] <Eridius> but it's running too many
[05:46:40] <dbaupp> it probably overcommits on purpose
[05:47:18] *** Quits: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP) (Ping timeout)
[05:47:40] <Eridius> I know the scheduler tests do, but run-pass shouldn't
[05:47:55] <Eridius> yesterday while running `make check` I looked at uptime in the middle of run-pass and my 1-minute load average was 30
[05:47:59] <Eridius> (ncpus is 8)
[05:48:05] <dbaupp> the standard test runner does the overcommit too
[05:48:13] <dbaupp> 4 * ncpus by default
[05:48:53] <dbaupp> (or RUST_TEST_TASKS without a multiplier; and ncpus == RUST_THREADS if it's set)
[05:48:57] <Eridius> hrm. run-pass (and probably compile-fail) should probably not do that. compiling is cpu-intensive
[05:49:02] <dbaupp> yeah
[05:49:04] <dbaupp> change it
[05:49:12] <Eridius> it's very noticeable right now since I'm raiding in WoW ;)
[05:49:14] *** Joins: sp3d (a@moz-6F12212B.fidnet.com)
[05:49:43] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: zzzzzzzzzz)
[05:49:58] <dbaupp> commit message: "running tests is degrading my gaming experience."
[05:50:09] <Eridius> :D
[05:52:37] <tikue_> can you do any kind of equality pattern matching
[05:53:03] <dbaupp> tikue_: what do you mean?
[05:53:07] <tikue_> ```if foo matches Foo { Bar: ref bar } { â€¦ } ```
[05:53:47] <dbaupp> no
[05:53:56] <tikue_> let's add it :)
[05:53:57] *** Joins: klapaucius (klapaucius@272B8F8B.5692770D.BB41F968.IP)
[05:54:53] <dbaupp> e.g. `if matches!(<expr>, <pattern>) {  }` which expands to `match <expr> { <pattern> => true, _ => false }` ?
[05:55:04] <tikue_> yes
[05:55:06] <tikue_> no
[05:55:14] <tikue_> no because
[05:55:16] <tikue_> i want to bind things
[05:55:19] <dbaupp> ah
[05:55:21] <tikue_> to use in the block
[05:55:45] *** Quits: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com) (Input/output error)
[05:55:45] <dbaupp> I guess that's impossible as a syntax extension
[05:55:53] <tikue_> actually
[05:55:55] <tikue_> that's a bad idea
[05:55:56] <tikue_> it'd be unreadable
[05:55:58] <tikue_> :\
[05:56:02] <dbaupp> but, match foo { Foo { bar: ref bar } => ... } kinda works?
[05:56:16] <tikue_> yeah it works just fine
[05:56:24] <tikue_> the main use case i was thinking of was where i do something like
[05:57:11] <tikue_> loop { match foo() { Foo(bar) => /* use bar */, _ => break } }
[05:57:17] <tikue_> so instead like
[05:57:36] <tikue_> while foo() matches Foo(bar) { /* use bar */ }
[05:58:10] <tikue_> or maybe
[05:58:24] <olsonjeffery> default method is best method
[05:58:27] <tikue_> while Foo(bar) matches foo()
[05:58:30] <tikue_> olsonjeffery: yes
[06:02:57] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[06:10:17] <klutzy> rusti: 1 = 2;
[06:10:24] -rusti- pastebinned 4 lines of output: http://ix.io/7Gy
[06:12:14] *** Joins: fabiand (fabiand@moz-8783E110.adsl.alicedsl.de)
[06:13:47] <olsonjeffery> rusti: trait A<'self> { fn foo(&self) }  trait B : A { fn bar(&self) }
[06:13:47] -rusti- <anon>:5:40: 5:41 error: expected `;` or `{` but found `}`
[06:13:47] -rusti- <anon>:5          trait A<'self> { fn foo(&self) }  trait B : A { fn bar(&self) }
[06:13:48] -rusti-                                                  ^
[06:13:48] -rusti- application terminated with error code 101
[06:14:00] <olsonjeffery> rusti: trait A<'self> { fn foo(&self); }  trait B : A { fn bar(&self); }
[06:14:01] -rusti- ()
[06:20:56] *** Quits: mihneadb (mihneadb@moz-329F29A3.lightspeed.sntcca.sbcglobal.net) (Input/output error)
[06:22:04] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[06:24:06] *** Joins: five (five@moz-993E0FAA.v4.ngi.it)
[06:25:44] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[06:27:08] <olsonjeffery> rusti: trait A<'self> { fn foo(&self) -> &'self str; }  trait B : A { fn bar(&self); }
[06:27:08] -rusti- <anon>:5:68: 5:70 error: Illegal anonymous lifetime: anonymous lifetimes are not permitted here
[06:27:08] -rusti- <anon>:5          trait A<'self> { fn foo(&self) -> &'self str; }  trait B : A { fn bar(&self); }
[06:27:08] -rusti-                                                                              ^~
[06:27:08] -rusti- error: aborting due to previous error
[06:27:10] -rusti- application terminated with error code 101
[06:27:41] <olsonjeffery> anyone know how to fix this error?
[06:27:49] <olsonjeffery> rusti: trait A<'self> { fn foo(&self) -> &'self str; }  trait B<'self> : A { fn bar(&self); }
[06:27:49] -rusti- <anon>:5:75: 5:77 error: Illegal anonymous lifetime: anonymous lifetimes are not permitted here
[06:27:49] -rusti- <anon>:5          trait A<'self> { fn foo(&self) -> &'self str; }  trait B<'self> : A { fn bar(&self); }
[06:27:50] -rusti-                                                                                     ^~
[06:27:50] -rusti- error: aborting due to previous error
[06:27:51] -rusti- application terminated with error code 101
[06:28:00] <olsonjeffery> rusti: trait A<'self> { fn foo(&self) -> &'self str; }  trait B<'self> : A<'self> { fn bar(&self); }
[06:28:01] -rusti- error: internal compiler error: unexpected failure
[06:28:02] -rusti- note: the compiler hit an unexpected failure path. this is a bug
[06:28:02] -rusti- note: try running with RUST_LOG=rustc=1 to get further details and report the results to github.com/mozilla/rust/issues
[06:28:02] -rusti- application terminated with error code 101
[06:29:31] *** Quits: txdv (quassel@966F3542.3BA477DA.14C26596.IP) (Ping timeout)
[06:31:12] <klutzy> anyone knows why "let mut (a, b) = ... " is obsolete?
[06:31:32] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:31:46] <tikue_> klutzy: probably because it's confusing
[06:31:55] <tikue_> klutzy: tuples are immutable, so it's not clear what that means
[06:32:17] <tikue_> klutzy: at some point i think we'll be able to do ```let (mut a, mut b) = ...```
[06:32:46] <klutzy> ah, it makes sense
[06:33:40] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Connection reset by peer)
[06:34:16] <acrichto> do we have a method of connecting an interator of strings yet?
[06:34:36] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[06:34:39] <tikue_> rusti: let mut xs = ~[1, 2, 3]; println!("{:?}", xs); xs.push(4u);
[06:34:44] -rusti- pastebinned 14 lines of output: http://ix.io/7Gz
[06:35:02] <tikue_> rusti: let mut xs = ~[1, 2, 3]; println!("{:?}", ref xs); xs.push(4u);
[06:35:04] -rusti- pastebinned 8 lines of output: http://ix.io/7GA
[06:35:05] <dbaupp> acrichto: nope
[06:35:13] <tikue_> ^ that's messed up
[06:35:15] <dbaupp> (other than .to_owned_vec() that is)
[06:35:18] <tikue_> why the hell does println move its args
[06:35:25] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[06:35:30] <dbaupp> acrichto: hm, actually, you could use flat_map(|s| s.iter()) I guess
[06:35:40] <dbaupp> but that's obviously pretty bad
[06:35:43] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[06:35:47] <acrichto> tikue_: oh I can fix that I think
[06:36:21] <tikue_> acrichto: :D 
[06:36:46] <acrichto> tikue_: yes, I can fix that
[06:36:52] <olsonjeffery> anyone have an idea about working around the errors i rusti'd above?
[06:36:53] <tikue_> acrichto: wee, good! i was worried
[06:37:16] <olsonjeffery> rusti: trait A<'self> { fn foo(&self) -> &'self str; }  trait B<'self> : A { fn bar(&self); }
[06:37:17] -rusti- <anon>:5:75: 5:77 error: Illegal anonymous lifetime: anonymous lifetimes are not permitted here
[06:37:17] -rusti- <anon>:5          trait A<'self> { fn foo(&self) -> &'self str; }  trait B<'self> : A { fn bar(&self); }
[06:37:17] -rusti-                                                                                     ^~
[06:37:17] -rusti- error: aborting due to previous error
[06:37:19] -rusti- application terminated with error code 101
[06:37:42] <acrichto> tikue_: it won't be too too soon though, I'm rewriting logging and this'll just get lumped in with that to make things easier
[06:37:43] <olsonjeffery> rusti: trait A { fn foo(&self) -> &'self str; }  trait B<'self> : A { fn bar(&self); }
[06:37:46] <dbaupp> olsonjeffery: put one on the A
[06:37:46] -rusti- pastebinned 8 lines of output: http://ix.io/7GB
[06:37:56] <olsonjeffery> rusti: trait A<'self> { fn foo(&self) -> &'self str; }  trait B<'self> : A<'self> { fn bar(&self); }
[06:37:56] -rusti- error: internal compiler error: unexpected failure
[06:37:57] -rusti- note: the compiler hit an unexpected failure path. this is a bug
[06:37:57] -rusti- note: try running with RUST_LOG=rustc=1 to get further details and report the results to github.com/mozilla/rust/issues
[06:37:57] -rusti- application terminated with error code 101
[06:37:57] <tikue_> acrichto: no prob, just wanted to make sure it was on the radar :)
[06:38:02] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[06:38:06] <dbaupp> woah
[06:38:06] <olsonjeffery> dbaupp: like that, you mean? ;P
[06:38:14] <dbaupp> olsonjeffery: looks like bug material
[06:38:40] <olsonjeffery> huzzah
[06:39:44] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[06:41:09] <tikue_> huh
[06:41:16] <tikue_> are ~Traits broken again?
[06:41:19] *** Parts: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP) (ERC Version 5.3 (IRC client for Emacs))
[06:41:26] <acrichto> they shouldn't be
[06:42:20] <tikue_> getting an ICE on this code (which compiled a couple weeks ago):
[06:42:40] <tikue_> https://gist.github.com/tikue/66c35a110cc2c2c4a460#file-generic_primes-rs
[06:43:12] *** Quits: mib_9uybip (mib_9uybip@FFC4F26.497EC1B8.5EFB9497.IP) (Client exited)
[06:43:27] <acrichto> that's a lot of code
[06:43:34] <tikue_> just the first gist
[06:43:48] <tikue_> only 36 lines ._.
[06:45:24] <dbaupp> tikue_: https://gist.github.com/tikue/66c35a110cc2c2c4a460#file-generic_primes-rs-L29, I don't believe you :P
[06:45:41] <acrichto> tikue_: you may be running into trait inheritance issues
[06:45:42] <tikue_> dbaupp: divs is an infinite iterator
[06:45:46] <acrichto> not sure though
[06:45:49] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[06:45:50] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14e0fdbfe to 14ed422b8: 02http://git.io/N3iJvQ
[06:45:50] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[06:45:50] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[06:45:50] <ghrust> 01[13rust01] 15bors pushed 1 new commit to 06auto: 02http://git.io/0AyVWQ
[06:45:50] <ghrust> 13rust/06auto 14d70634c 15bors: auto merge of #8831 : catamorphism/rust/extend_rust_path, r=brson...
[06:45:50] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[06:46:06] * dbaupp was joking
[06:46:09] <tikue_> oh :D
[06:46:37] <dbaupp> tikue_: does the non-generic one ice?
[06:46:42] <tikue_> dbaupp: no
[06:48:01] <tikue_> hah! dbaupp 
[06:48:02] <tikue_> i lied
[06:48:04] <tikue_> it does
[06:48:07] <tikue_> it's in the first function
[06:48:14] <tikue_>         divs: ~(~[2u]).move_iter().chain(count(3u, 2)) as ~Iterator<uint>,
[06:48:16] <tikue_> that's the line
[06:49:07] <emartin> i'm looking at std::at_vector::build_sized . where is raw::reserve from in this context?
[06:49:14] <olsonjeffery> rusti: trait A<'self> { fn foo(&self) -> &'self str; }  trait B : A { fn bar(&self); }
[06:49:14] -rusti- <anon>:5:68: 5:70 error: Illegal anonymous lifetime: anonymous lifetimes are not permitted here
[06:49:15] -rusti- <anon>:5          trait A<'self> { fn foo(&self) -> &'self str; }  trait B : A { fn bar(&self); }
[06:49:15] -rusti-                                                                              ^~
[06:49:15] -rusti- error: aborting due to previous error
[06:49:16] -rusti- application terminated with error code 101
[06:49:39] <acrichto> emartin: there should be an inner `mod raw` in at_vec.rs
[06:50:07] <emartin> acrichto: thanks, hadn't thought of looking for another module in the same file
[06:50:13] <fabiand> acrichto, good morning
[06:50:43] <acrichto> fabiand: morning :) although it's 11:50pm here :(
[06:51:02] <fabiand> acrichto, uh :) always this tz stuff ;)
[06:51:06] <acrichto> emartin: resolve is tricky and is almost always guaranteed to get the best of you
[06:52:05] <fabiand> acrichto, I just wanted to quickly ping ou baout the llvm patches .. as you noted in issue https://github.com/mozilla/rust/issues/6802 there are still some pending ones, on another issue you pointed them out - I just wanted check if the upstreaming of the pending patches is planned for 0.8?
[06:52:06] *** Quits: KindOne (KindOne@moz-9DB15391.dynamic.ip.windstream.net) (Ping timeout)
[06:52:37] <acrichto> so far I don't believe that there are concrete plans to upstream them
[06:52:42] <acrichto> they should definitely be upstreamed, however
[06:52:59] <acrichto> they're starting to pile up and the problem is that they're not necessarily up to llvm's quality standards
[06:53:11] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[06:54:16] <olsonjeffery> rusti: trait A<'self> { fn foo(&self) -> &'self str; }  trait B : A<'self> { fn bar(&self); }
[06:54:16] -rusti- error: internal compiler error: unexpected failure
[06:54:17] -rusti- note: the compiler hit an unexpected failure path. this is a bug
[06:54:17] -rusti- note: try running with RUST_LOG=rustc=1 to get further details and report the results to github.com/mozilla/rust/issues
[06:54:17] -rusti- application terminated with error code 101
[06:54:55] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[06:56:42] *** Joins: KindOne (KindOne@EC51CE2D.E114B4AE.EC6A1518.IP)
[06:56:43] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[06:59:26] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[06:59:49] *** Quits: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue_)
[07:00:15] <emartin> why is it ok for a method that takes &self on an impl for ~T to dereference self twice (**self)
[07:00:18] <emartin> ?
[07:00:50] <emartin> is the borrowed pointer a pointer to the unique pointer?
[07:00:51] <olsonjeffery> emartin: the first * is to deref from &~T to ~T
[07:02:10] *** Joins: Palmik (palmik@moz-CC484FDD.tmcz.cz)
[07:02:22] <emartin> olsonjeffery: so the borrowed pointer points to the unique pointer?
[07:03:12] <tikue> thoughts on adding SyncStream to std::comm?
[07:03:16] <tikue> or maybe extra::comm?
[07:04:10] <olsonjeffery> rusti: trait A { fn foo(&self) -> ~str } struct B(~str); impl A for ~B { fn foo(&self) { **self } }
[07:04:10] -rusti- <anon>:5:41: 5:42 error: expected `;` or `{` but found `}`
[07:04:11] -rusti- <anon>:5          trait A { fn foo(&self) -> ~str } struct B(~str); impl A for ~B { fn foo(&self) { **self } }
[07:04:11] -rusti-                                                   ^
[07:04:11] -rusti- application terminated with error code 101
[07:04:18] <olsonjeffery> rusti: trait A { fn foo(&self) -> ~str; } struct B(~str); impl A for ~B { fn foo(&self) { **self } }
[07:04:19] -rusti- <anon>:5:76: 5:100 error: method `foo` has an incompatible type: expected ~str but found ()
[07:04:19] -rusti- <anon>:5          trait A { fn foo(&self) -> ~str; } struct B(~str); impl A for ~B { fn foo(&self) { **self } }
[07:04:19] -rusti-                                                                                      ^~~~~~~~~~~~~~~~~~~~~~~~
[07:04:19] -rusti- error: aborting due to previous error
[07:04:21] -rusti- application terminated with error code 101
[07:04:32] *** Quits: five (five@moz-993E0FAA.v4.ngi.it) (Ping timeout)
[07:04:34] <olsonjeffery> rusti: trait A { fn foo(&self) -> ~str; } struct B(~str); impl A for ~B { fn foo(&self) -> ~str{ **self } }
[07:04:35] -rusti- <anon>:5:99: 5:107 error: mismatched types: expected `~str` but found `main::B` (expected ~str but found struct main::B)
[07:04:36] -rusti- <anon>:5          trait A { fn foo(&self) -> ~str; } struct B(~str); impl A for ~B { fn foo(&self) -> ~str{ **self } }
[07:04:38] -rusti-                                                                                                             ^~~~~~~~
[07:04:41] -rusti- error: aborting due to previous error
[07:04:43] -rusti- application terminated with error code 101
[07:04:45] *** flaper87|afk is now known as flaper87
[07:04:47] <tikue> fn sync_stream() -> (SyncPort, SyncChan) { /* a port that acks its received values; a chan that blocks until receiving an ack */ }
[07:05:08] *** Quits: emartin (emartin@moz-96C98BDD.res.umontreal.ca) (Quit: leaving)
[07:06:15] *** Joins: froystig (froystig@moz-5AA1643.stanford.edu)
[07:06:41] <tikue> instead of mail delivery, it'd be handshake messaging
[07:06:49] <tikue> idk i think it could be useful
[07:09:49] *** Joins: NewGuy (Mibbit@moz-E759CEF9.resnet.usf.edu)
[07:10:42] <NewGuy> If anyone happens to still be awake: How's the windows support for Rust going? I know it was recently changed to a higher priority, and I've seen a few threads mentioning success.
[07:11:01] *** Joins: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[07:11:19] <sp3d> I think it's looking up recently--for example win32 just got a much more complete (full?) testsuite running a bit ago
[07:11:44] <klutzy> win32's stack unwinding had been broken but it works now
[07:11:50] <NewGuy> That's the only reason I'm asking, actually! I went to look at isrustfastyet, and saw Windows is actually doing a testsuite!
[07:12:09] *** Quits: froystig (froystig@moz-5AA1643.stanford.edu) (Quit: leaving)
[07:12:51] *** Quits: Jesin (Jessin_@moz-DD8D71FB.cc.lehigh.edu) (Ping timeout)
[07:14:32] *** Joins: dwhyte (dwhyte@DFA0622C.2732CD06.B7FCEB19.IP)
[07:14:38] <NewGuy> So would you say it's come to the point where I can start doing serious Rust development on Windows? That's the only thing that's preventing me from adopting it as my main hobby/research language.
[07:15:19] <acrichto> rusti: bytes!("a")
[07:15:20] -rusti- &[97]
[07:15:48] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[07:15:48] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14d70634c to 14ed422b8: 02http://git.io/N3iJvQ
[07:15:48] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[07:15:51] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[07:15:51] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/JDiYCg
[07:15:51] <ghrust> 13rust/06auto 14fcce7e8 15Seo Sanghyeon: Remove --newrt option
[07:15:51] <ghrust> 13rust/06auto 1497b542b 15Seo Sanghyeon: Android: Pass the environment when running tests
[07:15:51] <ghrust> 13rust/06auto 14974f854 15bors: auto merge of #8839 : sanxiyn/rust/env, r=thestinger
[07:15:53] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[07:16:22] *** Quits: ChrisMorgan (chris@moz-1A621BB6.its.monash.edu.au) (Quit: Leaving.)
[07:16:34] <tikue_> newtype structs can't make the inner field private can they?
[07:16:48] <tikue_> rusti: struct Foo(priv uint);
[07:16:56] <acrichto> tikue_: no, you have to use a field for that
[07:16:57] -rusti- pastebinned 7 lines of output: http://ix.io/7GC
[07:17:04] <tikue_> too bad
[07:17:14] <tikue_> is there any particular reason other than aesthetics?
[07:18:02] * acrichto attempts to find past issue on this
[07:18:42] <acrichto> tikue_: https://github.com/mozilla/rust/issues/5489
[07:18:55] <tikue_> ah i see
[07:19:12] <tikue_> that's reasonable
[07:19:19] <klutzy> NewGuy: I think the biggest issue is library dependency to gcc
[07:19:39] *** Quits: victorporof_ (victorporo@moz-BAE8D951.pck.nerim.net) (Quit: victorporof_)
[07:19:53] <klutzy> NewGuy: it also implies exception handling abi issues
[07:20:08] <NewGuy> klutzy: Doesn't seem unreasonable, though. That's the compiler I use for most of my C++ work.
[07:20:18] <NewGuy> klutzy: Hm? Such as?
[07:24:04] <zol> You couldn't override function implementations in an inherited trait implementation, right?
[07:24:23] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[07:24:30] <acrichto> zol: you can override a default method
[07:24:46] <acrichto> hence the "default" :)
[07:25:08] <klutzy> NewGuy: mingw uses dwarf exception handling (thus your binary requires libgcc_s_dw2.dll), but other binaries may use windows' native exception handling mechanism. I don't know deeply but I guess it is not good to link two objective files of different abis
[07:27:49] <NewGuy> klutzy: Anyway to use mingw64? I know it offers SEH exceptions.
[07:27:52] <zol> acrichto: Ok, thank you! *googles*
[07:28:17] <tikue_> rusti: true.and(())
[07:28:18] -rusti- <anon>:5:9: 6:5 error: type `bool` does not implement any method in scope named `and`
[07:28:19] -rusti- <anon>:5          true.and(())
[07:28:19] -rusti- <anon>:6     };
[07:28:19] -rusti- error: aborting due to previous error
[07:28:19] -rusti- application terminated with error code 101
[07:29:15] <klutzy> NewGuy: I added mingw-w64 support to rust ;) it cross-builds hello-world very well, but it fails to build rustc so I'm planning to investigate tomorrow
[07:29:25] <tikue_> rusti: ::std::bool::and(true, ())
[07:29:26] -rusti- <anon>:5:32: 5:34 error: mismatched types: expected `bool` but found `()` (expected bool but found ())
[07:29:26] -rusti- <anon>:5          ::std::bool::and(true, ())
[07:29:26] -rusti-                                          ^~
[07:29:26] -rusti- error: aborting due to previous error
[07:29:27] -rusti- application terminated with error code 101
[07:30:19] <klutzy> NewGuy: and I don't expect SEH works now because llvm does not support it yet
[07:31:03] <zol> acrichto: Found https://air.mozilla.org/intern-presentation-sullivan/ :)
[07:31:23] <tikue_> hey all i have a question
[07:31:39] <tikue_> i'm trying to imagine how a Synchronous channel would implement try_send
[07:31:46] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Quit: Leaving)
[07:31:54] <tikue_> obviously, if the port is closed, try send will simply return false
[07:31:57] <tikue_> however, if the port is open
[07:32:02] <tikue_> and the message successfully sends
[07:32:12] <tikue_> should the chan use try_recv
[07:32:15] <tikue_> or just regular recv
[07:32:21] <NewGuy> klutzy: Ah dammit. What advice would you give here? Just use mingw, use mingw64, or continue to use Linux as a test bed for the code I'm writing (VM - and it's not platform specific code ATM).
[07:32:40] <tikue_> to ensure synchronous behavior
[07:33:08] *** Joins: victorporof (victorporo@87C1F78E.1DE10CA8.D8E68FF6.IP)
[07:33:16] <tikue_> i'm thinking it would look like this:
[07:33:17] <tikue_>     fn try_send(&self, val: T) -> bool {
[07:33:17] <tikue_>         if self.duplex_stream.try_send(val) {
[07:33:18] <tikue_>             self.duplex_stream.try_recv().is_some()
[07:33:19] <tikue_>         }
[07:33:20] <tikue_>     }
[07:33:53] <zol> tikue_: For pasties, try  http://hastebin.com :)
[07:34:15] <tikue_> zol: i use gist, but i figured 4 lines wouldn't bother anyone (rusti allows up to 5 before pasting)
[07:34:16] *** flaper87 is now known as flaper87|afk
[07:34:43] * zol nods at tikue_
[07:34:50] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:35:19] <tikue_> rusti: for _ in range(5) { println("don't you, rusti?"); }
[07:35:24] -rusti- pastebinned 7 lines of output: http://ix.io/7GF
[07:35:26] <tikue_> lol
[07:35:31] <klutzy> NewGuy: I have to say to use mingw for now. or.. I prefer to use linux :p
[07:35:47] <Eridius> tikue_: that would have actually pasted because of the () :P
[07:35:53] <tikue_> :P
[07:36:01] <tikue_> rusti: for _ in range(4u) { println("don't you, rusti?"); }
[07:36:07] -rusti- pastebinned 7 lines of output: http://ix.io/7GG
[07:36:13] <Eridius> rusti: for _ in range(0,4) { println("hah"); }
[07:36:14] -rusti- hah
[07:36:15] -rusti- hah
[07:36:15] -rusti- hah
[07:36:15] -rusti- hah
[07:36:15] -rusti- ()
[07:36:16] <tikue_> srwhat the hell
[07:36:25] <tikue_> oh
[07:36:28] <tikue_> god damn
[07:36:30] <Eridius> :P
[07:36:34] <zol> When I want to do a git pull of Rust, can I just ./configure;make && make install and everything will be updated to the newest changes or do I need to uninstall it first?
[07:36:49] <Eridius> zol: just `make && make install`
[07:36:54] <Eridius> it will re-configure if necessary
[07:37:00] <zol> Eridius: Cool, thank you.
[07:38:05] <tikue_> what is chan.send_deferred?
[07:38:11] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[07:38:15] <NewGuy> klutzy: Haha, well then mingw it is. Thanks for the help, though. Love seeing the active community and how you guys are actually solving problems! Have a great night.
[07:38:35] *** flaper87|afk is now known as flaper87
[07:39:12] <tikue_> rusti: struct Foo { bar: uint }; *Foo { bar: 0u }
[07:39:13] -rusti- <anon>:5:35: 5:39 error: can only dereference structs with one anonymous field
[07:39:14] -rusti- <anon>:5          struct Foo { bar: uint }; *Foo { bar: 0u }
[07:39:14] -rusti-                                             ^~~~
[07:39:14] -rusti- error: aborting due to previous error
[07:39:14] -rusti- application terminated with error code 101
[07:40:19] *** Quits: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net) (Quit: gavinb)
[07:42:34] * zol wishes he could have Rust compiling 24/7 in a terminal as a dynamic wallpaper.
[07:43:18] <tikue_> lol
[07:43:34] <tikue_> does anyone understand the contractual obligations of chan.try_send()
[07:43:48] <tikue_> does it return true if successfully sends? or does it return true if it successfully completes?
[07:44:19] <tikue_> e.g. a synchronous channel has two steps: 1) send 2) wait for ack that the msg was received. either of those could fail. but do both failures qualify as a return false?
[07:45:05] *** Joins: Ms2ger (Ms2ger@moz-982ABA97.adsl-dyn.isp.belgacom.be)
[07:47:42] <NewGuy> klutzy: Just a quick Google leads me to believe: DW2 exceptions are incompatible(?), SEH aren't working, but SLJL (while slower) are quite capable. These work in 32 & 64 bit Windows, and are supported by both mingw64 and LLVM.
[07:49:21] *** Quits: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue_)
[07:49:24] *** Quits: NewGuy (Mibbit@moz-E759CEF9.resnet.usf.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[07:49:40] *** Joins: sebcrozet (sebcrozet@moz-C27D92D8.w193-252.abo.wanadoo.fr)
[07:50:12] *** Quits: Palmik (palmik@moz-CC484FDD.tmcz.cz) (Connection reset by peer)
[07:57:37] *** Joins: hopplaboppla (Mibbit@moz-963D6814.redpill-linpro.com)
[07:58:37] <hopplaboppla> I can't clone the rust repo anymore
[07:58:46] <hopplaboppla> i consistently get http://pastie.org/8282746
[07:59:30] <hopplaboppla> anyone else seeing that? It says remote end hung up but perhaps it is my network still
[07:59:57] <klutzy> not rust but I've got some failures from github today
[08:00:15] <klutzy> maybe github daemon gots bored and is randomly closing connections :(
[08:00:44] <hopplaboppla> ill see if i can find some other lasrge repo 
[08:04:19] <hopplaboppla> it happens on https cloning... ssh sees the same degradation in speed but recovers and finishes  :S
[08:04:59] *** Joins: Jesin (Jessin_@moz-A680C20B.cc.lehigh.edu)
[08:07:56] *** Quits: sebcrozet (sebcrozet@moz-C27D92D8.w193-252.abo.wanadoo.fr) (Ping timeout)
[08:08:13] *** Joins: sebcrozet (sebcrozet@moz-7FB6C00B.w193-252.abo.wanadoo.fr)
[08:08:25] *** Joins: five (five@moz-993E0FAA.v4.ngi.it)
[08:10:32] <zol> http://hastebin.com/fuqutolefo.vbs -- this means I am lacking those libs, right? 
[08:11:26] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[08:14:44] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[08:14:48] <klutzy> zol: seems you lack zlib. what's your os?
[08:15:48] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[08:15:49] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/JDiYCg
[08:15:49] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[08:15:58] *** Joins: sk (sk@76BFB31C.71F9CB99.78DD174B.IP)
[08:16:00] <zol> klutzy: Ubuntu 13.04
[08:18:08] <klutzy> zol: in fact I'm not sure it's from zlib or not.. could you install zlib1g-dev and try it again?
[08:19:00] <zol> klutzy: ALready newest version
[08:19:31] <Eridius> shouldn't it be complaining about not being able to find libz? Undefined reference suggests it's not even trying to link
[08:19:54] <Eridius> or was there perchance any ld warnings?
[08:20:45] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[08:20:46] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/TpA-Ow
[08:20:46] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[08:20:48] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[08:20:48] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/HtoU-w
[08:20:48] <ghrust> 13rust/06auto 1497f61e7 15Alex Crichton: Remove @io::Writer from sys/repr/reflect...
[08:20:48] <ghrust> 13rust/06auto 14f94844c 15bors: auto merge of #8820 : alexcrichton/rust/no-io-writer, r=brson...
[08:20:49] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[08:21:57] <zol> Eridius: http://hastebin.com/mitekamixa.md
[08:24:12] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[08:24:45] *** Quits: hopplaboppla (Mibbit@moz-963D6814.redpill-linpro.com) (Quit: http://www.mibbit.com ajax IRC Client)
[08:25:25] *** Quits: z0w0 (zack@moz-7E6DC3A.lnse2.woo.bigpond.net.au) (Ping timeout)
[08:25:47] *** Joins: z0w0 (zack@moz-30F36A45.qld.bigpond.net.au)
[08:26:30] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[08:30:47] *** Quits: sonwow (sonwow@5AB4884B.FCC4549.14D5B978.IP) (Quit: leaving)
[08:35:57] <zol> If my trait only got default methods
[08:35:58] *** Quits: Jesin (Jessin_@moz-A680C20B.cc.lehigh.edu) (Ping timeout)
[08:36:41] *** Joins: Jesin (Jessin_@moz-A680C20B.cc.lehigh.edu)
[08:37:51] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[08:38:10] *** Quits: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com) (Quit: Leaving.)
[08:38:17] *** Joins: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com)
[08:39:37] *** Quits: SingingBoyo (SingingBoy@4DF3381A.51F4D838.4F048BDC.IP) (Quit: Leaving)
[08:39:57] *** Quits: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com) (Ping timeout)
[08:40:59] *** AutomatedTester|AFK is now known as AutomatedTester
[08:41:12] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[08:41:22] *** Joins: SingingBoyo (Brandon@4DF3381A.51F4D838.4F048BDC.IP)
[08:45:22] *** AutomatedTester is now known as AutomatedTester|AFK
[08:46:34] *** Quits: Jesin (Jessin_@moz-A680C20B.cc.lehigh.edu) (Ping timeout)
[08:58:07] *** Joins: squiddy (squiddy@moz-779AB2F2.adsl.alicedsl.de)
[08:59:53] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[09:02:16] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[09:04:18] *** Joins: Jesin (Jessin_@moz-DD8D71FB.cc.lehigh.edu)
[09:17:00] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[09:20:30] *** Joins: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au)
[09:20:48] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[09:20:48] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/HtoU-w
[09:20:48] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[09:21:33] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Ping timeout)
[09:25:48] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[09:25:49] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1I1z-w
[09:25:49] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[09:25:51] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[09:25:51] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/eaC71g
[09:25:51] <ghrust> 13rust/06auto 142c1d656 15Alex Crichton: Fix a bug with statics inside blocks in generic fns...
[09:25:51] <ghrust> 13rust/06auto 14f10e50a 15bors: auto merge of #8843 : alexcrichton/rust/fix-bug, r=huonw...
[09:25:52] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[09:26:42] *** Quits: SingingBoyo (Brandon@4DF3381A.51F4D838.4F048BDC.IP) (Quit: Leaving)
[09:26:55] *** flaper87 is now known as flaper87|afk
[09:27:24] *** Quits: sebcrozet (sebcrozet@moz-7FB6C00B.w193-252.abo.wanadoo.fr) (Ping timeout)
[09:29:49] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[09:32:13] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[09:32:21] *** Joins: sebcrozet (sebcrozet@moz-87D51607.w80-13.abo.wanadoo.fr)
[09:35:18] *** flaper87|afk is now known as flaper87
[09:35:52] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Ping timeout)
[09:37:43] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Ping timeout)
[09:39:05] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[09:40:16] *** Quits: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au) (Quit: gavinb)
[09:40:55] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[09:45:06] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[09:45:18] <zol> Damnit, can't figure out why I can't make rust :.
[09:46:04] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[09:46:10] <klutzy> previous error again?
[09:46:59] <zol> klutzy: Yes
[09:48:49] *** Quits: squiddy (squiddy@moz-779AB2F2.adsl.alicedsl.de) (Ping timeout)
[09:50:54] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[09:51:49] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[09:55:16] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[09:55:32] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[10:00:57] *** Quits: klapaucius (klapaucius@272B8F8B.5692770D.BB41F968.IP) (Quit: klapaucius)
[10:05:09] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Ping timeout)
[10:05:39] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[10:05:42] *** Parts: z0w0 (zack@moz-30F36A45.qld.bigpond.net.au) ()
[10:09:26] *** Joins: mib_9uybip (mib_9uybip@moz-9B8221B3.rivrw1.nsw.optusnet.com.au)
[10:10:42] *** Joins: mib_9uyb_ (mib_9uybip@730DAE49.BF91A228.DF793B8F.IP)
[10:11:57] *** Quits: mib_9uybip (mib_9uybip@moz-9B8221B3.rivrw1.nsw.optusnet.com.au) (Ping timeout)
[10:15:42] *** flaper87 is now known as flaper87|afk
[10:16:08] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[10:20:51] *** Joins: Florob (Florob@moz-39532932.de)
[10:24:00] *** Joins: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk)
[10:25:30] *** Quits: mib_9uyb_ (mib_9uybip@730DAE49.BF91A228.DF793B8F.IP) (Client exited)
[10:25:45] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[10:25:45] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/eaC71g
[10:25:45] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[10:26:35] *** flaper87|afk is now known as flaper87
[10:26:42] *** Quits: Jesin (Jessin_@moz-DD8D71FB.cc.lehigh.edu) (Ping timeout)
[10:28:07] *** Joins: mib_9uybip (mib_9uybip@730DAE49.BF91A228.DF793B8F.IP)
[10:29:29] <zol> I found a bug! \o/ How can I tell whether it's a known bug or not? 
[10:30:28] *** Joins: toqueteos (Mibbit@moz-69F152C3.dynamic.jazztel.es)
[10:30:45] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[10:30:45] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/ZTzO0A
[10:30:45] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[10:30:46] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[10:30:47] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/thgfgw
[10:30:47] <ghrust> 13rust/06auto 1454e7bdc 15Huon Wilson: rt: Handle non-integer RUST_THREADS (slightly) more gracefully....
[10:30:47] <ghrust> 13rust/06auto 14440f1e2 15Huon Wilson: rt: use sugary functions rather than manual range loops.
[10:30:47] <ghrust> 13rust/06auto 14e835c6b 15Huon Wilson: rt: remove a series of unfortunate casts.
[10:30:49] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[10:32:23] <toqueteos> rusti: for i in [1, 2, 3] { println(i); }
[10:32:25] -rusti- <anon>:5:9: 6:5 error: type `&mut [<VI2>, .. 3]` does not implement any method in scope named `next`
[10:32:25] -rusti- <anon>:5          for i in [1, 2, 3] { println(i); }
[10:32:25] -rusti- <anon>:6     };
[10:32:25] -rusti- error: aborting due to previous error
[10:32:25] -rusti- application terminated with error code 101
[10:32:56] <toqueteos> mmm... is "in" a keyword?
[10:34:27] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[10:34:45] <myname> rusti: for i in range(1u, 3) { println(i); }
[10:34:45] -rusti- <anon>:5:41: 5:42 error: mismatched types: expected `&str` but found `uint` (expected &str but found uint)
[10:34:45] -rusti- <anon>:5          for i in range(1u, 3) { println(i); }
[10:34:46] -rusti-                                                   ^
[10:34:46] -rusti- error: aborting due to previous error
[10:34:46] -rusti- application terminated with error code 101
[10:34:50] <myname> meh
[10:35:13] <myname> toqueteos: [1,2,3] is a vec and vecs aren't iterators
[10:35:21] <myname> for only works on iterators
[10:35:45] <myname> rusti: for i in [1u,2,3].iter() { printfln!(i); }
[10:35:59] <myname> huh
[10:36:04] <toqueteos> myname: but is in a keyword?
[10:36:08] -rusti- pastebinned 11 lines of output: http://ix.io/7GK
[10:36:11] <toqueteos> i don't see it on spec page
[10:36:35] <myname> i don't really know if it is considered a keyword by the developers
[10:36:36] <toqueteos> not here http://static.rust-lang.org/doc/rust.html#keywords neither here http://static.rust-lang.org/doc/rust.html#for-expressions
[10:36:49] <toqueteos> for_expr : "for" expr [ '|' ident_list '|' ] ? '{' block '}' ;
[10:36:58] <toqueteos> it should appear somewhere on the spec
[10:37:08] <myname> looks like 0.7 documentation
[10:37:18] <myname> the in syntax is new to 0.8
[10:37:43] <toqueteos> http://static.rust-lang.org/doc/rust.html#for-expressions != http://static.rust-lang.org/doc/0.7/rust.html#for-expressions ?
[10:37:55] <myname> oh
[10:38:08] <toqueteos> better to file a issue..
[10:38:30] <pnkfelix> toqueteos: the exxamples in the manual were updated, but the grammatical production was not
[10:39:25] <pnkfelix> toqueteos: but yes, file an issue.
[10:39:46] <toqueteos> i would send a PR but i don't know how the grammar should be so.. just issue :
[10:41:39] <toqueteos> https://github.com/mozilla/rust/issues/8876 :)
[10:42:07] *** Parts: dwhyte (dwhyte@DFA0622C.2732CD06.B7FCEB19.IP) ()
[10:42:23] <toqueteos> rusti: for i in &[1u,2,3].iter() { printfln!(i); }
[10:42:33] <toqueteos> nope, still not working
[10:42:35] -rusti- pastebinned 14 lines of output: http://ix.io/7GL
[10:44:04] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[10:44:20] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[10:45:11] <toqueteos> rusti: for i in [1u,2,3].mut_iter() { printfln!(i); }
[10:45:13] -rusti- pastebinned 11 lines of output: http://ix.io/7GM
[10:45:45] *** Joins: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP)
[10:48:14] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[10:48:16] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[10:52:33] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[10:53:47] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[10:55:44] *** Joins: puffo96 (puffo96@moz-5A0DEE01.retail.telecomitalia.it)
[10:56:00] *** Parts: puffo96 (puffo96@moz-5A0DEE01.retail.telecomitalia.it) ()
[10:56:26] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Client exited)
[10:56:26] *** Quits: rlin-nb (rlin@moz-99690620.hinet-ip.hinet.net) (Quit: Leaving.)
[11:10:53] <kimundi> toqueteos: in is a keyword
[11:11:03] <kimundi> If that's still unclear
[11:11:22] <toqueteos> kimundi: then list of keywords needs a modification too
[11:11:31] <toqueteos> kimundi: thanks btw
[11:11:35] <kimundi> The manual is out of dat ein general
[11:11:39] <kimundi> date*
[11:12:18] <kimundi> let mut l = [1u,2,3]; for i in l.mut_iter() { printfln!(i); }
[11:12:23] <kimundi> rusti: let mut l = [1u,2,3]; for i in l.mut_iter() { printfln!(i); }
[11:12:25] -rusti- &mut 1
[11:12:25] -rusti- &mut 2
[11:12:26] -rusti- &mut 3
[11:12:26] -rusti- ()
[11:12:41] <kimundi> toqueteos: ^ If that's still an issue
[11:12:48] <toqueteos> nope it isn't but thanks anyways
[11:12:54] <toqueteos> does it have to be mut to iter?
[11:13:07] *** Joins: feduser (feduser@650B4444.AAE9A62C.650F25DA.IP)
[11:13:09] <toqueteos> rusti: let l = [1u,2,3]; for i in l.iter() { printfln!(i); }
[11:13:10] -rusti- &1
[11:13:10] -rusti- &2
[11:13:10] -rusti- &3
[11:13:10] -rusti- ()
[11:13:21] <toqueteos> rusti: for i in [1u,2,3].iter() { printfln!(i); }
[11:13:25] -rusti- pastebinned 11 lines of output: http://ix.io/7GK
[11:13:27] <toqueteos> that's the one which fails
[11:13:29] <pnkfelix> toqueteos: by the way, you can private message rusti and get a private session that way
[11:13:33] <kimundi> The problem is that rustc doesn't extend the lifetime in a chained expression long enough, so you have to 'root' the vector in a local variable
[11:13:38] <pnkfelix> toqueteos: (unless you are deliberately trying to demo things to the channel)
[11:13:55] <toqueteos> pnkfelix: didn't know that! ty
[11:14:15] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[11:14:17] <LRN> how do i open files and read from them? Test code uses rt::io, but "extern mod rt" fails for me :(
[11:15:20] <kimundi> LRN: Where is that test code located?
[11:15:24] <zol> http://hastebin.com/niwapilici.rust -- here is the bug I found, does it mean it is already known (due to the this is a bug message)?
[11:15:26] <LRN> https://github.com/mozilla/rust/blob/master/src/libstd/rt/io/file.rs
[11:16:37] <kimundi> zol: "this is a bug" just refers to the fact that you see an ICE at all. In general, if you're unsure just file the bug, it's better to have duplicates than to have something not listed.
[11:16:54] <pnkfelix> LRN: Look at the std::io module
[11:17:10] <LRN> unresolved import: there is no `Open` in `std::io`
[11:17:16] <zol> kimundi: Ok, thank you! Will file it later today. :)
[11:17:25] <LRN> failed to resolve import `std::io::Open`
[11:17:39] <pnkfelix> LRN: no, I meant, look at the docs for that module
[11:17:45] <klutzy> zoi: what's the result with RUST_LOG=rustc=1?
[11:17:50] <LRN> they mention no "Open"
[11:17:54] <pnkfelix> LRN: Its a different API there than this `Open` stuff you seemed to have discovered elsehwere
[11:17:59] <LRN> and they have 0 exampes
[11:18:01] <kimundi> LRN: That file contains the body of a module in the std library, therefore all use statements in it are relative to it's crate root. "use rt::io;" in libstd is equal to "use std::rt::io" in other crates
[11:18:06] <LRN> s/exampes/examples/
[11:18:20] <zol> klutzy: I haven't figured out yet how to recompile with that setting yet. Currently I just use: rust run ...
[11:18:54] <pnkfelix> LRN: You also want to look at std::path, for creating Path's within the filesystem
[11:19:00] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[11:19:02] <pnkfelix> LRN: (e.g. to reference particular files)
[11:19:19] <LRN> pnkfelix, Path works (apparently, it's part of the prelude), "open" doesn't
[11:19:38] <pnkfelix> LRN: yes, you don't want open.  Thought I made that pretty plain up above.
[11:19:43] <pnkfelix> LRN: try instead e.g. file_reader
[11:20:04] <LRN> file_reader() is not documented
[11:20:19] <kimundi> LRN: If you haven't already, I recommend reading the new module tutorial, it might clear up a few things about how that stuff works. :)
[11:20:49] <pnkfelix> LRN: yes, unfortunately, the io.rs module has #[allow(missing_doc)] turned on
[11:20:52] <LRN> I/O tutorial is not mentioned in http://static.rust-lang.org/doc/tutorial.html
[11:21:20] <pnkfelix> LRN: nonetheless, if you open the source code for io.rs
[11:21:28] <pnkfelix> LRN: you'll see some test code there for file_reader
[11:21:32] <LRN> okay
[11:21:39] <pnkfelix> LRN: e.g. std::io::tests::test_simple
[11:21:50] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Ping timeout)
[11:22:04] <klutzy> zol: logging is enabled if you type RUST_LOG=... before "rust run"
[11:22:35] <klutzy> zol: .. maybe only if you built rust with `configure --enable-debug`. I'm not sure if it is necessary now
[11:24:44] *** Quits: mib_9uybip (mib_9uybip@730DAE49.BF91A228.DF793B8F.IP) (Client exited)
[11:25:25] <pnkfelix> zol: yeah I think to see the instrumentation for e.g. RUST_LOG=rustc=1 you will need to first rebuild with  â€”enable-debug  added to the configure switches
[11:25:35] <klutzy> zol: ah, I have recent rustc. I'll just run with mine and paste the result here
[11:26:21] <klutzy> it's here http://pastebin.com/G9K93A25
[11:26:27] <zol> pnkfelix: Aha, thanks
[11:26:38] <pnkfelix> zol: (In general for your own rust-compiled code, you'd need â€”cfg debug to get the output from the debug! macro; otherwise its stripped out from the result.  The `â€”enable-debug` option is what causes `â€”cfg debug` to get passed along when rustc gets built locally.)
[11:27:36] <zol> pnkfelix: Sorry, I don't really understand all of that, and I can't test recompiling rust at the moment since I can't get it to make. Will continue this later once I get home again. 
[11:27:49] <zol> klutzy: Thanks for the output, will file the issue in a few hours!
[11:27:54] <klutzy> pnkfelix: I think I've seen an issue about enabling debug as default. isn't it done yet?
[11:28:07] <pnkfelix> klutzy: Oh, I don't know about that
[11:28:18] <klutzy> zol: seems it is reported here https://github.com/mozilla/rust/issues/8808
[11:28:33] <klutzy> I didn't read the code deeply so it may differ :p
[11:29:30] *** Quits: five (five@moz-993E0FAA.v4.ngi.it) (Ping timeout)
[11:29:39] <zol> klutzy: Mine is a derived trait, but might be same issue? 
[11:30:36] <pnkfelix> klutzy: AFAICT the configure script still defaults with debug turned off: https://github.com/mozilla/rust/blob/master/configure#L376
[11:30:47] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[11:31:33] <klutzy> pnkfelix: https://github.com/mozilla/rust/issues/8181
[11:31:58] <klutzy> zol: I have no answer since I don't know yet what the error really is. sorry!
[11:32:12] <pnkfelix> klutzy: Ah. that would be a matter of the defaults for the snapshot compiler
[11:32:18] <pnkfelix> klutzy: still not sure what we do there
[11:32:36] <klutzy> pnkfelix: aha, I see
[11:32:41] <pnkfelix> klutzy: but I could believe that the snapshot compiler could be built with a different set of options from the default
[11:34:19] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[11:35:47] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[11:35:47] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/thgfgw
[11:35:47] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[11:36:18] <dbaupp> does anyone disagree that the for grammar is currently: `for_expr : "for" pat "in" expr '{' block '}' ;`  ?
[11:37:43] <klutzy> zol: I now think your ICE shares same core with reported one, but it's still useful to note derived case at the issue
[11:37:51] <pnkfelix> dbaupp: I think parser.rs agrees with you
[11:38:30] <toqueteos> dbaupp: i copy pasted what's online, maybe you fixed that but it's not yet on the webpage?
[11:38:46] <zol> klutzy: Cool, I will link to the mentioned issue then
[11:38:51] *** Joins: fyolnish (fyolnish@moz-A39E8A3F.uqwimax.jp)
[11:39:20] <toqueteos> dbaupp: ok, nvm, i read that badly
[11:39:57] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Ping timeout)
[11:40:18] *** Joins: Earnestly (earnest@moz-F387F877.dyn.plus.net)
[11:40:49] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[11:40:49] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/MZyGIg
[11:40:49] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[11:40:49] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[11:40:49] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/WkvH0A
[11:40:49] <ghrust> 13rust/06auto 14b656bfa 15blake2-ppc: std::str: Remove functions count_chars, count_bytes...
[11:40:49] <ghrust> 13rust/06auto 141f9bd62 15bors: auto merge of #8857 : blake2-ppc/rust/std-str-remove, r=thestinger...
[11:40:50] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[11:41:15] <dbaupp> toqueteos: commented on https://github.com/mozilla/rust/issues/8876 (and edited it too; thanks for reporting it.)
[11:41:43] <pnkfelix> dbaupp: there's no definition for the `block` production in the grammar in rust.md, from what I can see, so its not really possible to verify that this coincides with parser.rs.  (The code for parser.rs makes it seem like `block` should include the left and right curly braces.  But your suggested change is more consistent with what is currently in the rust.md manual)
[11:42:27] <dbaupp> pnkfelix: `block` seems to be used everywhere in the manual (e.g. `"if" expr '{' block '}'`), so I guess that's a bigger problem to solve
[11:42:35] <toqueteos> dbaupp: you are welcome, I had to do something to prove pcwalton i'm not a troll on HN
[11:42:52] <dbaupp> toqueteos: :)
[11:42:57] <pnkfelix> dbaupp: yeah.  We'll probably address it by moving to a formal grammar that we actually use, e.g. with a parser generator.
[11:43:10] <dbaupp> pnkfelix: that would be the nicest solution
[11:43:17] <pnkfelix> dbaupp: its on my list of tasks
[11:43:42] <dbaupp> e.g. `vec_expr : '[' "mut" ? vec_elems? ']'` ... we've errored on `mut` for ages.
[11:44:18] <dbaupp> (and the do grammar takes an ident_list, not a series of patterns.)
[11:44:42] * dbaupp refrains from pointing out all the new grammar mistakes he's finding
[11:44:43] <toqueteos> pnkfelix: parser generator? something like Coco/R?
[11:46:40] <pnkfelix> toqueteos: yes, something like that.
[11:47:10] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[11:50:00] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[11:51:22] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[11:53:12] *** Joins: bytewise (bytewise@moz-4A801D04.unitymediagroup.de)
[11:58:00] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[11:58:31] *** Joins: five (five@moz-993E0FAA.v4.ngi.it)
[12:02:26] *** Joins: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[12:04:37] *** Joins: maik (maik___@moz-B08A740.dip0.t-ipconnect.de)
[12:05:34] *** Quits: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net) (Input/output error)
[12:05:45] *** Joins: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[12:11:12] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[12:24:17] *** AutomatedTester|AFK is now known as AutomatedTester
[12:26:40] *** Quits: feduser (feduser@650B4444.AAE9A62C.650F25DA.IP) (Ping timeout)
[12:29:14] *** Quits: pcdummy (pcdummy@moz-CF4CA865.page4me.ch) (Client exited)
[12:30:10] *** Joins: pcdummy (pcdummy@moz-CF4CA865.page4me.ch)
[12:36:03] *** Joins: maxli (maxli@13F2CEC5.7672369.D8E68FF6.IP)
[12:40:08] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[12:40:47] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[12:40:47] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/WkvH0A
[12:40:47] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[12:42:58] <bstrie> so does libuv include a tcp library, or was our old net::tcp actually a complete rust implementation?
[12:43:15] <cmr> bstrie: libuv has complete networking.
[12:43:20] <cmr> I don't know what extra::net was
[12:43:44] <bstrie> cmr: define "complete" :P http? udp?
[12:44:18] <bstrie> or is it just ip+tcp
[12:44:36] <cmr> bstrie: udp, tcp, dns, ip
[12:44:49] <bstrie> cool, thanks
[12:45:46] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[12:45:46] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/8Ezq7Q
[12:45:46] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[12:45:47] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[12:45:47] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/02-K7Q
[12:45:47] <ghrust> 13rust/06auto 1405bb4c4 15Daniel Micay: reduce the size of UnsafeArc from 2 words to 1
[12:45:47] <ghrust> 13rust/06auto 140ac3e02 15bors: auto merge of #8867 : thestinger/rust/smaller-arc, r=alexcrichton
[12:45:48] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[12:47:35] <bstrie> cmr: do you know if there's a newnet::tcp lib somewhere as part of the new runtime work yet?
[12:47:45] <bstrie> it's so hard to keep track of what's finished and what's not
[12:48:15] <cmr> std::rt::io::net::{tcp,unix,udp,ip}
[12:48:25] <bstrie> ooh nifty
[12:50:02] <tiffany> needs more sctp
[12:50:18] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[12:50:32] <bstrie> hm, no docs for std::rt
[12:53:22] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[12:53:32] <cmr> bstrie: they're marked with #[doc(hidden)]
[12:53:52] <bstrie> good. docs are meant to be hidden
[12:53:53] <cmr> http://seld.be/rustdoc/master/std/rt/index.html
[12:54:17] <bstrie> if anyone could see our docs, they might critique us for how bad they are
[12:54:25] <bstrie> better to just hide the docs. forever.
[12:54:30] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[12:55:14] <cmr> well std::rt isn't a public API
[12:55:47] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[12:57:56] *** flaper87 is now known as flaper87|afk
[13:01:23] *** Joins: mindcat (mindcat@830D7BF7.BED0357D.E47F7BFE.IP)
[13:09:32] *** flaper87|afk is now known as flaper87
[13:14:47] <mindcat> ok, where is net module? std? extra?
[13:16:17] <jorendorff> pub struct Condvar<'self> { ... priv failed: &'self mut bool, ... }
[13:16:39] <jorendorff> What's the default lifetime for a reference like that?
[13:16:59] * jorendorff tries it without 'self
[13:17:04] <mindcat> rusti: use std::*;
[13:17:05] -rusti- <anon>:5:13: 5:20 warning: unused import [-W unused-imports (default)]
[13:17:06] -rusti- <anon>:5          use std::*;
[13:17:06] -rusti-                       ^~~~~~~
[13:17:06] -rusti- ()
[13:17:11] <mindcat> rusti: use std::net;
[13:17:14] -rusti- pastebinned 8 lines of output: http://ix.io/7GU
[13:17:17] <mindcat> rusti: use std::net_tcp;
[13:17:19] -rusti- pastebinned 8 lines of output: http://ix.io/7GV
[13:17:24] <mindcat> :(
[13:18:03] <jorendorff> rusti: use std::rt::io::net::tcp;
[13:18:04] -rusti- <anon>:5:13: 5:34 warning: unused import [-W unused-imports (default)]
[13:18:04] -rusti- <anon>:5          use std::rt::io::net::tcp;
[13:18:04] -rusti-                       ^~~~~~~~~~~~~~~~~~~~~
[13:18:04] -rusti- ()
[13:19:18] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[13:19:28] <jorendorff> "anonymous lifetimes are not permitted here" Now that is awesome.
[13:19:32] <dbaupp> jorendorff: there isn't a default lifetime; it's required to have either 'static, or to declare one in the struct "header" (currently it has to be called 'self)
[13:19:34] <mindcat> rust doc didn't wrote "std::rt" modules, thanks.
[13:20:10] <dbaupp> mindcat: these ones do: http://seld.be/rustdoc/master/std/rt/io/index.html
[13:20:30] <mindcat> dbaupp: oh
[13:20:47] <dbaupp> (but only because they ignore the #[doc(hidden)] setting.)
[13:20:49] <mindcat> dbaupp: I see now
[13:22:39] *** Quits: five (five@moz-993E0FAA.v4.ngi.it) (Ping timeout)
[13:22:43] *** Joins: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP)
[13:22:44] *** ChanServ sets mode: +o jdm
[13:24:39] <mindcat> now I see libuv again :D
[13:27:27] *** Quits: maik (maik___@moz-B08A740.dip0.t-ipconnect.de) (Connection reset by peer)
[13:28:19] *** Joins: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net)
[13:30:36] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[13:35:04] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[13:37:41] *** Joins: five (five@moz-993E0FAA.v4.ngi.it)
[13:40:08] *** Quits: Niessy (Mibbit@moz-E56CAA08.dsl.bell.ca) (Quit: http://www.mibbit.com ajax IRC Client)
[13:43:57] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[13:44:22] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[13:45:43] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[13:45:43] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/02-K7Q
[13:45:43] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[13:46:22] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[13:49:49] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[13:49:59] *** Joins: feduser (feduser@DF1FC817.76F0BAA0.650F25DA.IP)
[13:50:43] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[13:50:43] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/KkESiQ
[13:50:43] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[13:50:46] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[13:50:46] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/fv2ayA
[13:50:46] <ghrust> 13rust/06auto 14ba101d2 15Michael Woerister: debuginfo: Support for variables captured in closures and closure type descriptions.
[13:50:46] <ghrust> 13rust/06auto 145e040e9 15Michael Woerister: debuginfo: Support for by-value arguments (still excluding some cases of self arguments)
[13:50:47] <ghrust> 13rust/06auto 14dde633e 15Michael Woerister: debuginfo: Added test cases for structs, tuples, enums, etc passed by value....
[13:50:49] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[13:53:29] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[13:56:36] *** Quits: victorporof (victorporo@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: victorporof)
[13:56:47] *** Joins: Guest_ (textual@moz-15DCD320.hfc.comcastbusiness.net)
[13:56:51] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[14:04:38] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[14:05:40] <SimonSapin> what is the hash in a libâ€™s filename based on?
[14:06:18] <bstrie> SimonSapin: I *think* it's the lib's "version" attribute
[14:06:22] <bstrie> or at least it used to be
[14:06:27] <bstrie> might be other factors as well
[14:06:34] <bstrie> probably both version and name
[14:06:35] <SimonSapin> I just had a hash change without any metadata change
[14:06:50] <SimonSapin> metadata being name, version, uuid, url
[14:06:57] <bstrie> hmm
[14:07:11] <bstrie> SimonSapin: did you change the set of public functions?
[14:07:21] <SimonSapin> bstrie: possibly
[14:07:26] <bstrie> or otherwise change the outward-facing API
[14:07:34] <SimonSapin> http://pastebin.mozilla.org/2940547
[14:07:37] <bstrie> even just marking something as #[inline] could change the hash, in that case
[14:07:42] <SimonSapin> yes
[14:07:57] *** Quits: toqueteos (Mibbit@moz-69F152C3.dynamic.jazztel.es) (Quit: http://www.mibbit.com ajax IRC Client)
[14:08:45] <engla> all the things that escape into the public API even if they are not pub, do those affect the hash as well?
[14:08:51] <engla> for example structs
[14:12:18] *** Joins: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com)
[14:12:19] *** Joins: maik (maik___@moz-B08A740.dip0.t-ipconnect.de)
[14:12:21] <bstrie> someone should file a bug to clarify the situation
[14:12:35] <mindcat> in "std::rt::uv::net::StreamWatcher::read_start", I don't understand what is "AllocCallback". can someone tell me?
[14:13:03] <maik> how can I use rustpkg with a path? rustpkg build /path/libname doesn't work
[14:13:18] <bstrie> maik: have to ask tjc
[14:13:53] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[14:14:42] <mindcat> so how use "std::rt::uv::net"?
[14:15:02] <maik> bstrie, do you know if I can ue 'cd' in a make file  like cd /path/ rustpkg build libname?
[14:15:07] *** Quits: tav (tav@moz-C302A43C.range86-149.btcentralplus.com) (Quit: tav)
[14:15:30] <bstrie> mindcat: the uv bindings are in std::rt::io::net"
[14:15:34] <bstrie> I think?
[14:15:37] <bstrie> never used them myself
[14:16:06] <mindcat> bstrie: but they are here: http://seld.be/rustdoc/master/std/rt/uv/index.html
[14:17:04] <bstrie> mindcat: I have no idea how the two differ. our whole io story is out of whack right now
[14:17:25] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[14:18:21] <dbaupp> mindcat: that's very low level: you probably want std::rt::io::* which is the higher-level bindings
[14:18:34] *** Quits: fabiand (fabiand@moz-8783E110.adsl.alicedsl.de) (Quit: Verlassend)
[14:19:27] <mindcat> dbaupp: I just want use libuv...
[14:19:32] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[14:19:46] <dbaupp> mindcat: directly?
[14:19:48] <dbaupp> why?
[14:21:27] <mindcat> dbaupp: because I want asyncchronous
[14:21:59] <mindcat> dbaupp: do I should go other way?
[14:22:28] <dbaupp> the easiest way to get "async" is to just spawn a new task for each io operation
[14:22:32] <engla> the new IO code (in std::rt::io) is still unfinished
[14:22:44] *** Joins: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu)
[14:22:54] <mindcat> dbaupp: ok..
[14:23:14] *** Quits: Guest_ (textual@moz-15DCD320.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[14:23:48] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[14:25:20] <engla> mindcat: here's the plan for the future/ongoing https://github.com/mozilla/rust/issues/4419
[14:25:37] *** Joins: Guest_ (textual@moz-15DCD320.hfc.comcastbusiness.net)
[14:25:38] *** Joins: boredomist (user@moz-63CF9F31.res-cmts.sesp.ptd.net)
[14:25:38] <engla> so async io will be part of rust eventually
[14:26:21] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[14:26:47] *** Joins: victorporof (victorporo@87C1F78E.1DE10CA8.D8E68FF6.IP)
[14:27:44] *** Quits: reyre (reyre@moz-9002CDDA.cpe.net.cable.rogers.com) (Client exited)
[14:27:54] *** Joins: reyre (reyre@moz-9002CDDA.cpe.net.cable.rogers.com)
[14:28:02] *** Quits: reyre (reyre@moz-9002CDDA.cpe.net.cable.rogers.com) (Client exited)
[14:28:11] *** Joins: reyre (reyre@moz-9002CDDA.cpe.net.cable.rogers.com)
[14:29:02] *** Joins: lmandel (lmandel@moz-E80E0719.dsl.bell.ca)
[14:32:04] *** Joins: tav (tav@moz-C302A43C.range86-149.btcentralplus.com)
[14:32:09] *** Quits: five (five@moz-993E0FAA.v4.ngi.it) (Ping timeout)
[14:32:23] <olsonjeffery> nmatsakis: ping
[14:32:56] *** Quits: victorporof (victorporo@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[14:33:08] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Ping timeout)
[14:35:42] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[14:35:42] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 144340044 to 140ac3e02: 02http://git.io/N3iJvQ
[14:35:42] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[14:35:43] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[14:35:44] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/J57Lpw
[14:35:44] <ghrust> 13rust/06auto 146409f6b 15Alex Crichton: Correct the sources of glob imports...
[14:35:44] <ghrust> 13rust/06auto 14f914253 15bors: auto merge of #8869 : alexcrichton/rust/issue-8847-fix-unused, r=huonw...
[14:35:44] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[14:36:49] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[14:37:08] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[14:37:19] *** Joins: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net)
[14:37:53] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[14:39:18] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[14:41:08] *** Quits: heftig (heftig@moz-4D08C80.dip0.t-ipconnect.de) (Ping timeout)
[14:41:54] *** Joins: heftig (heftig@moz-4D08C80.dip0.t-ipconnect.de)
[14:43:15] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (Ping timeout)
[14:43:17] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[14:45:40] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[14:45:42] *** Quits: Guest_ (textual@moz-15DCD320.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[14:47:46] *** Joins: jstevans (Instantbir@moz-7CFC13C1.bootp.virginia.edu)
[14:49:52] *** Joins: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP)
[14:51:05] <jstevans>  Is there anything special I need to do in MinGW to get Rust installed on Windows 8?
[14:51:28] *** Joins: Ghost (Ice@E8A7525.6332494E.D0DDB18B.IP)
[14:56:38] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[14:57:34] <kimundi> jstevans: Probably, yeah. Whether anyone here knows what that is is an other question, though ;)
[14:57:39] <SimonSapin> fourth build of LLVM today.
[14:57:48] <kimundi> sounds like fun
[14:57:53] <kimundi> (slow fun)
[14:59:11] <SimonSapin> Servo was upgraded to a Rust from three days ago, but thatâ€™s way too old already. So upgrading again.
[14:59:32] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[14:59:32] *** ChanServ sets mode: +ao dherman dherman
[15:00:49] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[15:06:37] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Quit: Konversation terminated!)
[15:07:02] <jdm> heh
[15:08:33] <jstevans> So, I went through the tutorial to set up Rust on Windows. Curl wouldn't install with GCC 4.5, so I re-upgraded to 4.7, installed Curl, and then downgraded to 4.5 to install Rust. I'm now getting errors while trying to set up Rust. I can run configure fine, but make is showing a ton of stuff.
[15:09:10] <maik> does servo now use the newest master?
[15:09:49] *** Joins: Guest_ (textual@moz-15DCD320.hfc.comcastbusiness.net)
[15:11:47] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[15:11:57] *** Parts: Guest_ (textual@moz-15DCD320.hfc.comcastbusiness.net) (Textual IRC Client: www.textualapp.com)
[15:12:09] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[15:14:15] *** Quits: Ralith (ralith@114DA04D.CD83ED0A.BCDF04A6.IP) (Ping timeout)
[15:19:15] *** Joins: valenting (Thunderbir@243D5248.F5D5DDE0.7A932F41.IP)
[15:20:14] *** Joins: jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[15:21:11] <jdm> maik: not currently, and not usually
[15:21:32] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[15:23:40] *** Joins: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP)
[15:23:46] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[15:23:46] *** ChanServ sets mode: +o tjc
[15:25:22] *** Joins: mib_9uybip (mib_9uybip@moz-9B8221B3.rivrw1.nsw.optusnet.com.au)
[15:26:33] *** Quits: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP) (Quit: Textual IRC Client: www.textualapp.com)
[15:27:03] *** Quits: mib_9uybip (mib_9uybip@moz-9B8221B3.rivrw1.nsw.optusnet.com.au) (Ping timeout)
[15:27:22] *** Quits: sk (sk@76BFB31C.71F9CB99.78DD174B.IP) (Quit: Leaving)
[15:28:26] *** Quits: valenting (Thunderbir@243D5248.F5D5DDE0.7A932F41.IP) (Ping timeout)
[15:29:13] *** Quits: jstevans (Instantbir@moz-7CFC13C1.bootp.virginia.edu) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[15:29:24] *** Parts: a_m0d (dschoof@moz-670D1285.commercial.cgocable.net) ()
[15:30:43] *** Joins: erickt (Adium@A76FB231.50CA9683.D51AEBE4.IP)
[15:31:18] *** Joins: valenting (Thunderbir@590D2376.7E118222.89C0DD0D.IP)
[15:31:50] *** Joins: victorporof (victorporo@87C1F78E.1DE10CA8.D8E68FF6.IP)
[15:33:51] *** Quits: victorporof (victorporo@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[15:34:18] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[15:35:09] *** Quits: trevs (trevor@moz-5080A02E.mc.videotron.ca) (Ping timeout)
[15:35:15] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[15:35:43] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[15:35:43] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/J57Lpw
[15:35:43] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[15:36:50] <unfoldl> Is there any nice inbuilt function which returns the index of the first element in a vector [x] such that f(x) returns true? (f is a function x -> bool)
[15:38:12] <engla> yes,  v.iter().position()
[15:38:59] <engla> as many methods as possible are pushed up to the iterators
[15:39:07] <unfoldl> engla: thanks!
[15:39:37] *** Quits: valenting (Thunderbir@590D2376.7E118222.89C0DD0D.IP) (Ping timeout)
[15:39:48] *** Quits: Ghost (Ice@E8A7525.6332494E.D0DDB18B.IP) (Quit: Bring Me To Life...)
[15:40:09] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[15:40:49] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[15:40:49] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/_aIXVA
[15:40:49] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[15:40:51] <SimonSapin> traits donâ€™t like unsafe pointers anymore? http://pastebin.mozilla.org/2940981
[15:40:53] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[15:40:53] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/akDkHw
[15:40:53] <ghrust> 13rust/06auto 1420def31 15Micah Chalmer: Correct indent with trailing spaces/comments on previous line
[15:40:53] <ghrust> 13rust/06auto 140b9dc80 15Micah Chalmer: One indent after open paren with no argument
[15:40:53] <ghrust> 13rust/06auto 1470bc163 15Micah Chalmer: Multiline comments with leading *s line up the *s
[15:40:55] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[15:40:55] *** Joins: anders (anders@moz-329650BE.cust.bredbandsbolaget.se)
[15:41:48] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[15:42:09] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[15:42:36] *** Quits: anders (anders@moz-329650BE.cust.bredbandsbolaget.se) (Ping timeout)
[15:42:46] <engla> SimonSapin: can it be related to this? https://github.com/mozilla/rust/issues/8306
[15:43:29] <SimonSapin> engla: maybe, but adding an arg name "fixed" it
[15:43:38] <engla> oh
[15:44:02] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[15:44:15] <engla> it must be a parsing bug
[15:45:02] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[15:46:46] <nsf> I wonder, is it possible to produce 100% statically linked binary (with complete runtime) and is it hard? I know that the current library depends on libc, but what if it doesn't
[15:48:10] *** Quits: zeuxcg (zeuxcg@moz-80D1F912.hsd1.ca.comcast.net) (Ping timeout)
[15:48:21] <nsf> one of the qualities of Go that I just don't want to give up on
[15:48:58] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[15:50:08] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[15:50:14] <jack> nsf: we don't support static linking right now, but it is planned.
[15:50:16] <kimundi> nsf: It si definitly planned, but currently not possible
[15:50:54] <nsf> thanks, good to know
[15:51:51] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[15:52:30] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[15:52:35] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[15:55:09] *** Quits: ofeldt- (ofeldt@moz-8AEB8DF9.dip0.t-ipconnect.de) (Ping timeout)
[15:56:34] *** Quits: feduser (feduser@DF1FC817.76F0BAA0.650F25DA.IP) (Ping timeout)
[15:59:14] *** AutomatedTester is now known as AutomatedTester|AFK
[15:59:42] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[15:59:57] *** Joins: valenting (Thunderbir@590D2376.7E118222.89C0DD0D.IP)
[16:03:54] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[16:04:39] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[16:07:04] *** Quits: valenting (Thunderbir@590D2376.7E118222.89C0DD0D.IP) (Ping timeout)
[16:07:08] *** Joins: valenting (Thunderbir@590D2376.7E118222.89C0DD0D.IP)
[16:08:09] <maik> what do people mean if they use NG?
[16:08:17] <maik> (programming related)
[16:08:45] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[16:08:45] *** ChanServ sets mode: +ao dherman dherman
[16:09:10] <kimundi> maik: need more context :P
[16:09:27] *** Quits: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP) (Input/output error)
[16:09:29] *** Joins: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP)
[16:09:29] *** ChanServ sets mode: +o jdm
[16:09:38] *** Quits: valenting (Thunderbir@590D2376.7E118222.89C0DD0D.IP) (Ping timeout)
[16:09:44] <cmr> maik: new/next generation, usually
[16:10:08] <mindcat> "std::rt::io::net::tcp" this painful for me, I wan't do a echo server but how can I read some strings?
[16:10:23] <zxcdw> Not Greater instruction in some hypotethical instruction set? ;)
[16:11:39] <mindcat> "fn read(&mut self, buf: &mut [u8]) -> Option<uint> { ... }" what is "buf"?
[16:11:49] <cmr> mindcat: buffer to read into.
[16:11:52] <maik> mindcat, byte array
[16:12:19] <engla> mindcat: it will attempt to read enough to fill the mutable byte slice 
[16:13:48] <engla> mindcat:   let mut buf = [0u8, ..1024];  file.read(buf)   // that's the basics.
[16:14:03] <cmr> mindcat: http://seld.be/rustdoc/master/std/rt/io/trait.Reader.html
[16:14:41] <mindcat> engla: ok...
[16:16:10] <jdm> why is ptr::offset unsafe?
[16:16:39] <cmr> jdm: good question. it shouldn't be.
[16:17:02] <jdm> achrito, j'accuse!
[16:17:15] <engla> it's unsafe now because pointer arithmetic is undefined if you create a pointer outside the base object
[16:17:16] <jdm> "Remove offset_inbounds for an unsafe offset function "
[16:17:30] <cmr> engla: yes, but only dereferencing unsafe pointers is unsafe.
[16:17:40] <cmr> memory-unsafe
[16:17:55] <engla> ah but the assumption here is that creating undefined behavior (in llvm) is unsafe itself
[16:17:58] *** Joins: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP)
[16:18:06] <engla> ask strcat
[16:18:46] <engla> if you want the old offset, convert to uint, add, cast back
[16:23:17] <engla> (but .offset is better)
[16:25:39] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: sw17ch)
[16:27:26] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[16:27:40] *** Quits: maik (maik___@moz-B08A740.dip0.t-ipconnect.de) (Ping timeout)
[16:29:34] <acrichto> jdm: yeah we lower them to llvm's GEP function, and the offset_inbounds had the 'inbounds' restriction as well
[16:30:14] <acrichto> it didn't really make sense to have two though because 99.9% of the time you wanted offset_inbounds, and the extra .1% you probably didn't care that much about the performance hit from casting to an int and back to a pointer
[16:30:34] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: Places to go, people to annoy)
[16:31:18] *** Joins: sw17ch (sw17ch@moz-39D8564F.wndsny.tds.net)
[16:32:40] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[16:32:47] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[16:33:23] *** Quits: ronny (ronnypfa@moz-E7EE6ABE.uberspace.de) (Ping timeout)
[16:33:39] *** Joins: ronny (ronnypfa@moz-E7EE6ABE.uberspace.de)
[16:35:03] *** Joins: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net)
[16:38:25] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[16:38:33] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[16:39:23] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[16:39:46] *** Joins: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com)
[16:40:37] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[16:40:43] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[16:40:43] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/akDkHw
[16:40:43] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[16:43:44] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[16:45:41] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[16:45:41] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/S0A-DQ
[16:45:41] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[16:45:45] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[16:45:45] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/0Lbp3A
[16:45:45] <ghrust> 13rust/06auto 14a2ffcea 15Bouke van der Bijl: Add missing space
[16:45:45] <ghrust> 13rust/06auto 147077aef 15bors: auto merge of #8877 : bouk/rust/master, r=sanxiyn...
[16:45:45] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[16:45:47] *** Quits: mib_zklei2 (Mibbit@moz-F4E830A0.cable.mindspring.com) (Quit: http://www.mibbit.com ajax IRC Client)
[16:49:09] <engla> acrichto: I'm sorry for messing up like this, but can you visit PR https://github.com/mozilla/rust/pull/8858 again and put the r+ on the Eq::ne commit? it's actually the tip
[16:49:34] <engla> it's my fault, but I still begrudge github for displaying commits in date order instead of git's topo order
[16:50:29] *** Quits: igl (igl@moz-3D14EE9.adsl.alicedsl.de) (Ping timeout)
[16:50:38] <acrichto> engla: ah yes I meant to do that
[16:50:41] <acrichto> I still blame github for that
[16:50:50] <acrichto> although looks like dbaupp got to it first
[16:50:57] *** Quits: jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: brb)
[16:51:03] *** Joins: igl (igl@moz-AD2B6999.adsl.alicedsl.de)
[16:51:38] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[16:51:50] *** Joins: jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[16:51:56] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[16:52:11] <engla> third time's the charm
[16:52:27] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[16:52:31] <engla> because dbaupp was fooled too
[16:55:05] *** Quits: jclements (jclements@moz-CDAD933D.wireless.calpoly.edu) (Quit: jclements)
[16:56:52] *** Joins: jclements (jclements@moz-CDAD933D.wireless.calpoly.edu)
[16:59:39] *** Quits: threecreepio (jdp@moz-1A9F0A3C.cust.bredband2.com) (Quit: threecreepio)
[17:01:02] *** Quits: igl (igl@moz-AD2B6999.adsl.alicedsl.de) (Ping timeout)
[17:01:09] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[17:01:26] *** Joins: igl (igl@moz-574BEBC8.adsl.alicedsl.de)
[17:02:08] *** Joins: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[17:03:48] <jld> So, libstd/rt/args.rs:135     externfn!(fn rust_get_global_args_ptr() -> *mut Option<~~[~str]>)
[17:04:35] <jld> I made the ctypes lint pass flag enums without FFI-safe representation attributes, and now that breaks libstd because of the above.
[17:04:52] <cmr> yeah
[17:05:17] <jld> And actually deciding whether to use the null pointer optimization, in general, depends on getting bit sizes during trans.
[17:05:58] *** Quits: jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Input/output error)
[17:06:01] *** Joins: jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[17:08:17] <engla> thanks acrichto :)
[17:08:22] <SimonSapin> is it a bug that I can assign random bytes in the middle of ~str and mess up the UTF8?
[17:08:30] <engla> it would be
[17:08:39] <SimonSapin> Shouldnâ€™t this require an unsafe{} block?
[17:08:51] <engla> can you do that?
[17:08:53] <acrichto> SimonSapin: do you have an example?
[17:09:14] <SimonSapin> a[0] = 0x80;
[17:09:40] <engla> that's bad
[17:10:03] <acrichto> rusti: let mut s = ~"test"; s[0] = 0x80; s
[17:10:04] -rusti- task <unnamed> failed at 'assertion failed: (w != 0)', /build/rust-git/src/rust/src/libstd/str.rs:1981
[17:10:04] -rusti- application terminated with error code 101
[17:10:12] <kimundi> rusti: let mut foo = "foo"; foo[1] = 0xff; foo
[17:10:13] -rusti- <anon>:5:30: 5:35 error: cannot assign to immutable str content
[17:10:13] -rusti- <anon>:5          let mut foo = "foo"; foo[1] = 0xff; foo
[17:10:13] -rusti-                                        ^~~~~
[17:10:13] -rusti- error: aborting due to previous error
[17:10:13] -rusti- application terminated with error code 101
[17:10:26] <engla> rusti: let mut s = ~"Î±Î²"; s[1] = 0; (std::str::is_utf8("Î±Î²".as_bytes()), std::str::is_utf8(s.as_bytes()))
[17:10:27] -rusti- (true, false)
[17:10:27] <kimundi> rusti: let mut foo = ~"foo"; foo[1] = 0xff; foo
[17:10:27] -rusti- task <unnamed> failed at 'assertion failed: (w != 0)', /build/rust-git/src/rust/src/libstd/str.rs:1981
[17:10:27] -rusti- application terminated with error code 101
[17:10:29] *** Quits: StarLight (StarLight@moz-7B293BE1.dynamic.avangarddsl.ru) (Ping timeout)
[17:10:34] *** Joins: igl1 (igl@moz-CA4872E4.adsl.alicedsl.de)
[17:10:37] *** Quits: igl (igl@moz-574BEBC8.adsl.alicedsl.de) (Ping timeout)
[17:10:44] <acrichto> rusti: let mut s = ~"test"; s[0] = 0x80; s.as_bytes()
[17:10:50] -rusti- pastebinned 16 lines of output: http://ix.io/7H8
[17:11:03] <kimundi> rusti: let mut s = ~"test"; s[0] = 0x80; s.as_bytes().to_owned()
[17:11:04] -rusti- ~[128, 101, 115, 116]
[17:11:12] <acrichto> SimonSapin: yes, that does indeed look like a bug
[17:11:19] <acrichto> SimonSapin: could you open an issue?
[17:11:23] <engla> hehe still the simplest things show up as bugs :)
[17:12:29] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Ping timeout)
[17:12:29] <tikue_> how do you use from_str?
[17:13:05] <kimundi> rusti: ::std::from_str::FromStr::from_str::<uint>("42")
[17:13:06] -rusti- Some(42)
[17:13:11] <tikue_> ah thank you
[17:13:21] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[17:13:31] <jorendorff> are you sure you can't fit another from_str in there
[17:13:39] <jorendorff> maybe sidewasy
[17:13:49] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[17:13:50] <kimundi> :)
[17:14:00] <engla> it's in the prelude, so you can fit one less at least.
[17:14:12] <kimundi> rusti: FromStr::from_str::<uint>("42")
[17:14:12] -rusti- Some(42)
[17:14:20] *** Joins: StarLight (StarLight@moz-982398AC.dynamic.avangarddsl.ru)
[17:15:05] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Ping timeout)
[17:15:29] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[17:15:44] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[17:17:10] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Ping timeout)
[17:17:13] *** Quits: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk) (Client exited)
[17:17:31] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[17:17:59] <sfackler> oh cool, you can give type hints for Self again?
[17:18:31] *** Joins: Guest__ (textual@moz-15DCD320.hfc.comcastbusiness.net)
[17:18:37] <engla> from_str has return type Self so it's not the same as  Primitive::bits()
[17:18:53] <engla> or maybe it's the same question?
[17:19:08] * engla shuts mouth
[17:19:10] <kimundi> hm... afaik rusti is running an old version because seomthing broke
[17:19:19] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Quit: Ex-Chat)
[17:19:24] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[17:19:25] <kimundi> might just not have that chabnge yet
[17:19:33] <sfackler> ah
[17:20:02] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Ping timeout)
[17:20:14] <SiegeLord> Can you overload an operator such that something like 1 / my_struct will work?
[17:20:18] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[17:20:18] *** ChanServ sets mode: +ao pcwalton pcwalton
[17:20:46] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[17:20:46] *** ChanServ sets mode: +o tjc
[17:21:05] <engla> bblum: ok, excuse the dumb question, but I'm looking at reverse enumerates.. in std::select line 90  you have  .mut_rev_iter().enumerate()   where you get the index "from the back" with enumerate. at a different place in the function, you enumerate from the front, are you sure the line 90 is correct wrt the index you extract?
[17:21:16] <kimundi> SiegeLord: not as operator overloading is currently implemented
[17:21:39] <bblum> engla: let me see, i already fixed a bug on that line once already, so i'd be surprised if my fix is wrong
[17:21:43] * bblum goes to look
[17:23:06] <bblum> engla: you are way right
[17:23:10] <bblum> engla: please fix this
[17:23:20] <bblum> very surprised that no test case caught that
[17:23:23] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[17:23:47] *** Joins: ofeldt (ofeldt@moz-A6AFADE7.dip0.t-ipconnect.de)
[17:23:47] <bblum> actually, not too surprised, that code only happens in race condition cases
[17:23:58] <engla> Uh, sure, I'm working on a PR to make .enumerate().invert() possible so the fix will be simple
[17:24:29] *** Joins: eholk (eholk@11AF97BF.48D4C455.51B6877.IP)
[17:25:46] *** Joins: true_droid (true_droid@moz-123FD9B8.beck.volia.net)
[17:27:32] <engla> is it possible to add a test case for it? I don't know this code at all
[17:28:48] <tikue_> is there a way to reassign to a mutable value in a tuple
[17:28:57] <tikue_> for example, to swap two values
[17:29:20] *** Joins: obk (Mibbit@moz-BDCF418A.dyn.optonline.net)
[17:29:26] <engla> yes you can pattern match to get a mut ref
[17:30:11] <engla> rusti: let mut t = (1, 2);  match t { (ref mut x, _) => *x = 99 }; t
[17:30:12] -rusti- (99, 2)
[17:30:26] <tikue_> rusti: let mut a = 1; let mut b = 2; let (mut ref a, mut ref b) = (&b, &(a + b));
[17:30:30] -rusti- pastebinned 7 lines of output: http://ix.io/7Ha
[17:30:45] <tikue_> rusti: let mut a = 1; let mut b = 2; let (ref mut a, ref mut b) = (&b, &(a + b));
[17:30:49] -rusti- pastebinned 13 lines of output: http://ix.io/7Hb
[17:31:27] <obk> struct Value<T> { value: ~T }; impl<T> Value<T> { fn mutate(&mut self, update: &fn(~T) -> ~T) { self.value = update(self.value); } } - why is this forbidden?
[17:32:00] <mindcat> rusti: let mut a,b = 1,2
[17:32:02] -rusti- pastebinned 15 lines of output: http://ix.io/7Hd
[17:32:08] <engla> good question obk 
[17:32:15] <pcwalton> because you tried to move out of "self.value", leaving a hole
[17:32:29] <pcwalton> while "update" is occurring
[17:32:32] <pcwalton> Rust abhors a vacuum
[17:32:34] <obk> pcwalton: Yes, I realize that. But I fill it immediately.
[17:32:41] *** Quits: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com) (Connection reset by peer)
[17:32:42] <obk> Wo I can't have a "safe vacuum"?
[17:32:52] <obk> s/W/S/
[17:32:55] <engla> there could be a function to do this pattern
[17:33:10] <obk> Hmmm. There probably is, somewhere in utils or something?
[17:33:12] <pcwalton> I've thought about how to do this but there's no real way to do it right now
[17:33:24] <obk> I could do it with unsafe pointers, of course.
[17:33:42] <obk> Maybe there should be a util::mutate function or something like that?
[17:33:44] <pcwalton> I was thinking about some sort of shuffle! macro that would internally use unsafe code to let you make temporary holes
[17:34:03] <pcwalton> this would make things like binary search trees using unique pointers way easier
[17:34:08] <obk> So what should one do for now, when needing something like that?
[17:34:16] <obk> Yes, my case is very close to exactly that.
[17:34:16] <pcwalton> obk: swap it with something, or use Cell
[17:34:24] <pcwalton> or use &mut in update
[17:34:28] <engla> or use Option
[17:34:33] <pcwalton> if you can make update use &mut that's easiest
[17:34:57] <obk> No, using &mut in update is a no-go for me. Using Option is a PITA because the whole Value<T> is already in an Option (it has other fields of course).
[17:35:08] <obk> Using a Cell... hmmm. I need to read up on that.
[17:35:24] <kimundi> obk: Cell is the same as Option in this case
[17:35:27] <pcwalton> or just use unsafe code :P
[17:35:39] <pcwalton> I mean, if you can expose a safe interface unsafe code is not truly evil
[17:35:43] <pcwalton> it's just sorta evil
[17:35:45] <kimundi> Cell is just a inherently mutable Option
[17:35:56] <obk> Well, I have my own "more" module where I throw in "stuff I wanted to see in extra"
[17:35:59] <obk> Or in std :-)
[17:36:03] <pcwalton> if you can expose it in a generic way, then submit a PR :)
[17:36:15] <obk> For example, a mut_last() function for vectors ;-)
[17:36:17] <pcwalton> I've been thinking a lot about combinators to make unique pointers easier to use
[17:36:34] <obk> That would help a lot
[17:36:51] <obk> Actually, there's a deeper issue here.
[17:36:53] *** Joins: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP)
[17:37:05] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[17:37:09] <obk> If I write Rust code that _uses_ containers, things are pretty great.
[17:37:18] <obk> As long as I know the name of the function to call :-)
[17:37:27] <SiegeLord> Hehehe: https://gist.github.com/SiegeLord/6392369
[17:37:28] <obk> But if I try to _implement_ a Rust container, oh biy.
[17:37:46] <obk> That is downright painful.
[17:37:46] <SiegeLord> I take that's not too satisfactory for the arbitrary infix operator folks XD
[17:37:48] <pcwalton> I think that's related to not allowing holes
[17:37:57] <obk> Related, yes.
[17:38:06] <pcwalton> a symptom of it, really
[17:38:13] <pcwalton> binary search trees are hard to do with unique pointers
[17:38:16] <obk> But there's also implementing stuff twice - once for mutable and once for non-mutable.
[17:38:17] <pcwalton> vector-like things are easier
[17:38:30] <pcwalton> hmm? doesn't inherited mutability fix that?
[17:38:49] <obk> And then, if I want the container to hold a T or just ~T or allow &Ts whose life is shorter than the container, or @Ts, again lots of code duplication
[17:39:06] <obk> No, that's why you have find and find_mut and so on.
[17:39:14] <obk> So there's lots of duplicated code
[17:39:39] <obk> It isn't like calling find on a mutable HashMap gives you a mutable value, right? :-(
[17:39:53] <pcwalton> well, the rules are different for &mut and &
[17:40:02] <pcwalton> so I don't see how we could allow that abstraction soundly
[17:40:06] <pcwalton> but I see it could be annoying
[17:40:22] *** Joins: threecreepio (jdp@moz-71E164C9.cust.bredbandsbolaget.se)
[17:40:22] <obk> I agree it isn't clear how to do it.
[17:40:45] <obk> I'm just saying, writing containers in Rust is hard.
[17:41:20] <obk> The question is, whether it is possible to make it less painful by having these combinators you talked about, and maybe some ways to reduce the duplicated code.
[17:41:24] <jack> Good containers are hard in every language.
[17:41:27] <pcwalton> yeah, without any unsafe code it'll always be somewhat more difficult than in other languages just because the invariants are painful
[17:41:46] <obk> Yes, but in most languages it is easy to write bad ones. In Rust, it is good ones or nothing :-D
[17:41:48] <pcwalton> I mean it's hard in C++, and impossible in Go :) but C++ makes it easier because the language doesn't enforce that you did it soundly
[17:42:00] <obk> Exactly
[17:42:07] <engla> it would be nice to refactor hashmap to use a pointer instead of an index in its internal FoundEntry enum. But that would mean duplicating the search logic for mut/immut too
[17:42:15] <jack> obk: then we just have to make sure we have some good ones in the standard library :)
[17:42:26] <obk> That only goes so far.
[17:42:27] <pcwalton> I think it's worth investing in making it easier to write containers
[17:42:36] <pcwalton> for example, shuffle!
[17:42:44] <obk> Yes, indeed.
[17:42:45] <pcwalton> btw, it *is* easy to write Okasaki-style red black trees
[17:42:55] <pcwalton> if you write it pure functional
[17:43:10] <obk> That's "a bit" of a special case...
[17:43:16] <pcwalton> you can basically translate the code to rust because of the pattern matching
[17:43:16] <shachaf> hi obk
[17:43:22] <obk> shachaf: hi
[17:43:42] * obk is playing burrowed pointers Sudoku inside generic Rust containers again
[17:44:42] <obk> Anyway, I'll try writing some mutate! macro allowing modifying mutable ~T members. We'll see how that goes.
[17:44:52] <pcwalton> cool, I'm curious
[17:45:01] <obk> Just wanted to ensure I'm not re-inventing the wheel here.
[17:45:05] <pcwalton> you're not
[17:45:09] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[17:45:13] <obk> Great (I guess?)
[17:45:29] <engla> you'll have to handle the failure case so that destructors run on the right things
[17:46:37] *** Joins: Jesin (Jessin_@moz-A680C20B.cc.lehigh.edu)
[17:46:44] *** Joins: five (five@moz-993E0FAA.v4.ngi.it)
[17:47:39] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[17:48:14] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[17:48:26] *** Joins: anders (anders@moz-329650BE.cust.bredbandsbolaget.se)
[17:48:29] *** Quits: anders (anders@moz-329650BE.cust.bredbandsbolaget.se) (Quit: anders)
[17:48:32] <bblum> engla: sounds good, thank you
[17:49:40] *** Quits: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP) (Quit: Textual IRC Client: www.textualapp.com)
[17:49:45] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:50:02] <SiegeLord> Hmm... I wonder if it's possible to implement a dwim lifetime fixer
[17:50:32] <SiegeLord> It'll try all the possible ways you can assign lifetimes in a function and find if any one of them compiles
[17:50:40] *** Quits: ronny (ronnypfa@moz-E7EE6ABE.uberspace.de) (Ping timeout)
[17:50:57] <engla> SimonSapin: that's .. neat is the wrong word... hacky :), I guess you saw this in python too. Still lives by the limitations of operator overloading (call by &T for one)
[17:51:20] *** Joins: ronny (ronnypfa@moz-E7EE6ABE.uberspace.de)
[17:51:28] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[17:51:48] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[17:52:10] <engla> ooh sorry that was for SiegeLord 
[17:52:25] *** Quits: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net) (Ping timeout)
[17:53:36] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[17:53:36] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Ping timeout)
[17:55:44] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[17:55:45] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/0Lbp3A
[17:55:45] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[17:55:51] <tjc> nmatsakis or pcwalton : question about trait matching...
[17:56:06] <tjc> in workcache I have a #[deriving(Encodable, Decodable)] for a type that's defined with --
[17:56:15] <tjc> struct WorkMap(TreeMap<WorkKey, ~str>);
[17:56:19] <tjc> where WorkKey is a struct
[17:56:30] <tjc> I just realized that the only ToJson impl is for TreeMap<~str, A>
[17:56:43] <tjc> but the code gets accepted anyway, and then (I think) generates incorrect json
[17:56:49] <tjc> is this because of trait matching ignoring the type parameters?
[17:56:54] *** Joins: jviereck (Adium@moz-54D06D87.dip0.t-ipconnect.de)
[17:57:13] <pcwalton> what is A?
[17:57:45] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[17:57:47] *** Joins: riley (riley@8BA43816.9AA11D69.65DDFA89.IP)
[17:58:04] <tjc> pcwalton: the impl in ToJson is impl<A:ToJson> ToJson for TreeMap<~str, A> 
[17:58:17] <tjc> so it's defined on TreeMaps with ~str keys, and any type of value that implements ToJson
[17:58:20] <pcwalton> trait matching shouldn't be ignoring the type parameters...
[17:58:35] <tjc> let me see if there's another impl I don't know about
[17:58:37] <pcwalton> I would be very surprised if it did in the general case
[17:59:22] <tjc> pcwalton: It seems to be. The only impl of ToJson for a TreeMap is the one that I just mentioned, which is only for TreeMaps with ~str keys
[17:59:40] <pcwalton> that must be a bug in that specific case
[17:59:43] <pcwalton> because in general that doesn't happen
[17:59:49] <tjc> Ok, I'll try to come up with a stand-alone test case
[17:59:50] <pcwalton> we would have noticed
[18:00:42] <pcwalton> actually I'm surprised it generates invalid JSON instead of ICE-ing in trans
[18:00:45] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[18:00:45] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/WcM_mg
[18:00:45] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[18:00:46] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[18:00:46] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/1RHG3A
[18:00:46] <ghrust> 13rust/06auto 14d8801ce 15blake2-ppc: std::str: Use CharIterator in NormalizationIterator...
[18:00:46] <ghrust> 13rust/06auto 14479aefb 15blake2-ppc: std::str: Fix bug in .slice_chars()...
[18:00:47] <ghrust> 13rust/06auto 1415bb9b4 15blake2-ppc: extra::dlist: Fix bug in Eq::ne
[18:00:48] <pcwalton> or just segfaulting
[18:00:49] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[18:01:31] <tjc> Yeah, I'm surprised too. Will dig deeper
[18:02:25] *** Quits: jviereck (Adium@moz-54D06D87.dip0.t-ipconnect.de) (Quit: Leaving.)
[18:03:27] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Quit: Konversation terminated!)
[18:04:33] *** Quits: Jesin (Jessin_@moz-A680C20B.cc.lehigh.edu) (Ping timeout)
[18:06:12] *** Joins: Jesin (Jessin_@moz-A680C20B.cc.lehigh.edu)
[18:07:17] *** Joins: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP)
[18:08:41] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Connection reset by peer)
[18:08:51] *** Joins: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP)
[18:09:57] * pcwalton wonders if you could write a util::steal(&mut T) -> (T, Stolen<T>)
[18:10:25] <pcwalton> Stolen<T> uses the region system to never outlive the &mut T borrow and has a method .put_back() which lets you return a value of type T to that slow
[18:10:27] <pcwalton> slot
[18:10:43] <pcwalton> put_back() consumes the Stolen<T>
[18:10:48] <pcwalton> and if you don't return a value by the end of that scope the destructor on Stolen<T> fires which fails your program
[18:11:06] *** Quits: eholk (eholk@11AF97BF.48D4C455.51B6877.IP) (Quit: eholk)
[18:11:27] <pcwalton> that effectively makes your unique pointers have dynamic move semantics, like C++11 unique_ptr, for a lexically scoped block
[18:11:33] <pcwalton> and they have to return to normalcy by the end
[18:12:14] *** Joins: mihneadb_ (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net)
[18:12:18] *** Quits: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net) (Connection reset by peer)
[18:12:31] <pcwalton> would make working with unique pointers for containers way easier I think
[18:12:41] <kimundi> souns interesting
[18:13:05] *** Quits: igl1 (igl@moz-CA4872E4.adsl.alicedsl.de) (Ping timeout)
[18:13:13] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:13:13] *** ChanServ sets mode: +ao brson brson
[18:13:17] *** Joins: igl (igl@moz-6659A14.adsl.alicedsl.de)
[18:13:37] <obk> pcwalton: Is trickier than I thought, I am causing havoc with the automatic deallocation of owned pointers
[18:14:43] *** Joins: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP)
[18:14:58] *** Quits: igl (igl@moz-6659A14.adsl.alicedsl.de) (Ping timeout)
[18:15:03] <pcwalton> yeah, you'll have to do some magic there
[18:15:47] *** Joins: igl (igl@moz-A56A1054.adsl.alicedsl.de)
[18:16:38] *** Joins: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net)
[18:16:39] *** Joins: fabiand (fabiand@moz-8783E110.adsl.alicedsl.de)
[18:16:50] *** Joins: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP)
[18:18:00] *** Joins: jviereck (Adium@moz-54D06D87.dip0.t-ipconnect.de)
[18:18:18] *** Quits: igl (igl@moz-A56A1054.adsl.alicedsl.de) (Ping timeout)
[18:19:06] *** Quits: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP) (Ping timeout)
[18:20:09] *** Joins: igl (igl@moz-9DDA361C.adsl.alicedsl.de)
[18:21:45] <tjc> pcwalton: test case - https://gist.github.com/catamorphism/6392818 - should be rejected by the typechecker, compiles and runs, then fails with a JSON decoding error
[18:21:49] <tjc> I'll file a bug
[18:22:23] *** Quits: bytewise (bytewise@moz-4A801D04.unitymediagroup.de) (Ping timeout)
[18:23:22] *** Joins: bytewise (bytewise@moz-4A801D04.unitymediagroup.de)
[18:23:50] *** Quits: robarnold (rob@BD56354E.DB510C09.6E370BFC.IP) (Ping timeout)
[18:24:55] *** Joins: Florob (Florob@moz-39532932.de)
[18:25:30] *** Quits: igl (igl@moz-9DDA361C.adsl.alicedsl.de) (Connection reset by peer)
[18:26:26] <tjc> https://github.com/mozilla/rust/issues/8883
[18:26:27] *** Joins: igl (igl@moz-4E260E78.adsl.alicedsl.de)
[18:28:56] *** Quits: jviereck (Adium@moz-54D06D87.dip0.t-ipconnect.de) (Quit: Leaving.)
[18:29:12] *** Quits: five (five@moz-993E0FAA.v4.ngi.it) (Ping timeout)
[18:29:52] *** Joins: robarnold (rob@BD56354E.DB510C09.6E370BFC.IP)
[18:30:38] *** Quits: igl (igl@moz-4E260E78.adsl.alicedsl.de) (Ping timeout)
[18:31:32] <engla> tjc: you can derive Encodable right, because TreeMap is generically implemented  for Encodable
[18:31:44] <tjc> engla: it is?
[18:32:18] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[18:32:20] *** Joins: maik (maik___@moz-B08A740.dip0.t-ipconnect.de)
[18:32:24] <engla> yes. that part looks fine
[18:32:32] *** Joins: victorporof (victorporo@87C1F78E.1DE10CA8.D8E68FF6.IP)
[18:32:44] <engla> that's generic and doesn't involve json
[18:33:12] *** Joins: igl (igl@moz-7E0B38DE.adsl.alicedsl.de)
[18:34:12] <tjc> engla: Oh, I see, so you're saying that the compiler accepting the deriving(â€¦) decls is fine; it's just the json::Encoder / json::Decoder part that's the issue?
[18:34:19] *** Quits: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Ping timeout)
[18:34:30] <engla> yes, but I don't know about the second part
[18:34:36] <tjc> sure
[18:34:39] <tjc> I'll add a comment clarifying
[18:35:43] *** Quits: igl (igl@moz-7E0B38DE.adsl.alicedsl.de) (Ping timeout)
[18:35:51] <engla> it looks like json implements Encodable wrong. don't know if that's related. it doesn't emit the enum tag
[18:36:34] <tjc> hmm, could be
[18:36:35] <obk> pcwalton: Seems one needs to be aware of the internals of how the owned pointers work to figure out the right incantation
[18:36:43] <pcwalton> yes
[18:36:44] <pcwalton> '
[18:36:45] <obk> It is too deep for me :-(
[18:37:37] <obk> I guess I'll need to go with Option/Cell for now :-(
[18:37:55] <obk> "All problems in computers are solved by another level of indirection"
[18:38:00] <pcwalton> ok. I'll look at trying to implement steal soon
[18:38:13] <obk> Post in rust-dev?
[18:38:23] <pcwalton> well, if I get it working :)
[18:38:27] <obk> Of course :-D
[18:38:36] *** Joins: igl (igl@moz-BCBB0CD5.adsl.alicedsl.de)
[18:39:19] <maik> does --bench work with tasks?
[18:40:17] *** Quits: igl (igl@moz-BCBB0CD5.adsl.alicedsl.de) (Ping timeout)
[18:40:20] <maik> because I implemented a .par_map method and the rust benchmark outputs 0ns/iter 
[18:40:33] <olsonjeffery> nmatsakis: ping
[18:41:18] *** Joins: miza (miza@moz-4DD51325.home.otenet.gr)
[18:41:33] *** Joins: igl (igl@moz-474C8639.adsl.alicedsl.de)
[18:41:39] *** Quits: Guest__ (textual@moz-15DCD320.hfc.comcastbusiness.net) (Quit: Textual IRC Client: www.textualapp.com)
[18:41:54] <engla> obk: funny, I was talking yesterday with my brother about how some problems aren't solved well (at all) by having your computer tech in a different country, under a contractor.. guess it doesn't scale all the way :)
[18:42:24] <erickt> good morning #rust. Has anyone ever put into any thought into how we could send a rust function from one machine to another?
[18:42:39] <bstrie> erickt: amazon mechanical turk
[18:42:58] <zol> There was an easy issue earlier today about porting rust_log.cpp, but I can't find it anymore. Guess someone did it already? 
[18:43:03] <tjc> erickt: a Rust function as in a closure?
[18:43:08] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[18:43:14] <erickt> I'm sitting in a spark class, which is a hadoop-ish thing written in scala that lets you do interactive mapreduce in a shell
[18:43:30] <tjc> zol: https://github.com/mozilla/rust/issues/8703
[18:43:39] <tjc> zol: fhahn is working on it, don't know if that's you or not :-)
[18:43:42] <erickt> tjc: well I'd be happy first with a regular bare function, but a closure would be cool :)
[18:43:42] <tjc> I guess not
[18:43:46] <erickt> bstrie: lol
[18:43:51] <tjc> erickt: Hmm, ok
[18:43:54] *** AutomatedTester|AFK is now known as AutomatedTester
[18:44:01] <zol> tjc: Yeah, just found it -- had github to show me issues for milestones
[18:44:12] *** Quits: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP) (Quit: Textual IRC Client: www.textualapp.com)
[18:44:18] <tjc> erickt: As far as I know, that hasn't been proposed yet
[18:44:20] <erickt> tjc: it's easy for scala because they can just send the java classfile across the wire
[18:44:21] <zol> tjc: Thank you!
[18:44:31] <kimundi> erickt: In theory you could have some sort of compiletime reflection that prepares an AST, and send it together with any state data over to the other machine, which jits the function.
[18:44:33] <tjc> erickt: Sure. We have reflect, so maybe it would be easy to do using that
[18:44:53] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[18:44:54] <erickt> tjc: can we reflect the code in a function?
[18:45:01] <kimundi> there is also an issue for that already
[18:45:04] <tjc> erickt: good question! *goes and reads the source*
[18:45:07] <erickt> ooh
[18:45:26] <erickt> tjc: we *could* have a syntax extension that just converts a codeblock into an ast
[18:45:53] <kimundi> isn't that what the quasi quoter does? :D
[18:45:56] <tjc> erickt: no, I guess not (with reflect, I mean)
[18:46:06] <erickt> kimundi: yeah I guess so :)
[18:46:08] *** mihneadb_ is now known as mihneadb|lunch
[18:46:23] <erickt> I'm trying to build an argument that future big data systems should be written in rust
[18:47:44] <erickt> hrm. And maybe we have a rust server that can catch the ast, jit it, and run it remotely
[18:48:13] *** Quits: igl (igl@moz-474C8639.adsl.alicedsl.de) (Ping timeout)
[18:48:29] <zol> Any documents I should read before posting an issue? 
[18:49:01] <erickt> or we could compile that stub executable on the client side and ship the executable over the wire and interact with it that way. That'd probably be a bit more scalable
[18:49:20] *** Joins: igl (igl@moz-E2BAB4BA.adsl.alicedsl.de)
[18:49:27] <flaper87> How can I run just style checks? I think I saw a way to do that but I can't seem to find it anymore
[18:49:31] <cmr> zol: not really
[18:49:38] <cmr> flaper87: what style checks?
[18:49:52] <kimundi> make tidy
[18:49:56] <cmr> zol: there's https://github.com/mozilla/rust/wiki/Note-development-policy and such
[18:49:58] <cmr> Ah tidy
[18:50:14] <cmr> zol: but not really important for jsut opening an issue
[18:50:16] <flaper87> cmr: code style
[18:50:18] <maik> haha I hacked together a .par_map function in Rust and it's only slower 20000 times slower than the current map , yay :D https://gist.github.com/MaikKlein/6393079
[18:50:20] <zol> cmr: Ok, thank you!
[18:50:34] <maik> -slower*
[18:51:00] *** Quits: igl (igl@moz-E2BAB4BA.adsl.alicedsl.de) (Ping timeout)
[18:51:19] *** Joins: igl (igl@moz-785CA79A.adsl.alicedsl.de)
[18:51:39] <erickt> maik: heh
[18:51:53] <flaper87> kimundi: cmr thanks
[18:52:47] <erickt> maik: par_map really needs a way to share a subset of an array by passing a pointer rather than by moving like you did
[18:52:49] *** Joins: eholk (eholk@11AF97BF.48D4C455.51B6877.IP)
[18:52:57] <erickt> maik: I think nmatsakis was working on that at one point
[18:53:31] <Ralith> maik: and of course to have a real speedup you will need to be mapping a computationally intensive function on a machine with several cores
[18:53:37] <maik> erick, yeah it was a very naive approach :D
[18:54:09] <kimundi> re par_map, see this blog post if you haven'T already: http://smallcultfollowing.com/babysteps/blog/2013/06/11/data-parallelism-in-rust/
[18:57:00] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[18:57:04] <maik> kimundi, ah I saw this post 2 months ago but I wasn't proficient enough in Rust to understand it. Thanks for reminding me
[18:57:07] *** Quits: Jesin (Jessin_@moz-A680C20B.cc.lehigh.edu) (Ping timeout)
[18:57:39] *** Quits: eholk (eholk@11AF97BF.48D4C455.51B6877.IP) (Quit: eholk)
[19:00:45] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[19:00:45] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/1RHG3A
[19:00:45] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[19:01:06] *** Joins: Lovot_ (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[19:02:33] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Ping timeout)
[19:05:00] <pcwalton> https://gist.github.com/pcwalton/6393232
[19:05:05] <pcwalton> Steal is pretty easy ^
[19:05:45] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[19:05:45] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/Hx4Oog
[19:05:45] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[19:05:50] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[19:05:50] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/QcPznQ
[19:05:50] <ghrust> 13rust/06auto 14ba101d2 15Michael Woerister: debuginfo: Support for variables captured in closures and closure type descriptions.
[19:05:50] <ghrust> 13rust/06auto 145e040e9 15Michael Woerister: debuginfo: Support for by-value arguments (still excluding some cases of self arguments)
[19:05:50] <ghrust> 13rust/06auto 14dde633e 15Michael Woerister: debuginfo: Added test cases for structs, tuples, enums, etc passed by value....
[19:05:52] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[19:06:24] *** Joins: igl1 (igl@moz-BB3FB29F.adsl.alicedsl.de)
[19:07:09] *** Quits: igl (igl@moz-785CA79A.adsl.alicedsl.de) (Ping timeout)
[19:07:25] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[19:07:29] *** Joins: eholk (eholk@11AF97BF.48D4C455.51B6877.IP)
[19:08:53] <kimundi> Hm, I does anyone think this macro would be useful to have? https://gist.github.com/Kimundi/6393248
[19:09:22] <engla> pcwalton: do you know if it will be optimized away if you put back the value unmodified?
[19:09:40] <cmr> kimundi: no, since it moves.
[19:10:04] <cmr> although, not necessarily I suppose
[19:10:06] <cmr> so maybe
[19:10:07] <kimundi> I just now wrote it to make a complicated nested state machine pattern matching situation less verbose
[19:10:14] <kimundi> cmr: ah, yeah
[19:10:40] <jdm> could you make it match on &$e? would that avoid moving problems?
[19:10:42] <pcwalton> engla: well, it optimized that case into just 4 printlns
[19:10:59] <cmr> jdm: well, you'd just use &Foo in the pattern you pass it.
[19:11:24] <engla> nice
[19:11:37] <brson> irfy is returning 503 "backend is unhealthy"
[19:11:53] <cmr> brson: that'd be a github thing
[19:11:54] <kimundi> updated gist with &, now it doesn't move anymore and still compiles :)
[19:12:07] <pcwalton> someone should try writing a binary search tree with ~ and steal
[19:12:09] <engla> it doesn't necessarily move anyway
[19:12:14] <pcwalton> I'll do it if I get time
[19:12:18] <pcwalton> should see if it makes it easier
[19:12:32] <pcwalton> I would imagine/hope it makes the pointer stitching MUCH easier
[19:13:19] <kimundi> engla: I know, used it in a non-moving situation myself.
[19:13:26] <miza> are there classes in rust?
[19:13:33] <kimundi> no
[19:13:34] <cmr> miza: not like in traditional OO systems.
[19:13:35] <miza> i read an article
[19:13:39] <cmr> we have typeclasses instead.
[19:13:43] <miza> but i think is not working
[19:13:44] <cmr> (traits)
[19:13:50] <cmr> miza: what's the date on it?
[19:13:55] <kimundi> just types + traits + impls
[19:13:56] <miza> 2012
[19:13:57] *** Joins: Jesin (Jessin_@moz-DD8D71FB.cc.lehigh.edu)
[19:14:00] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[19:14:18] <cmr> yeah, so really out of date.
[19:14:21] *** Quits: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net) (Ping timeout)
[19:14:25] *** Quits: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue_)
[19:14:34] *** Quits: Ms2ger (Ms2ger@moz-982ABA97.adsl-dyn.isp.belgacom.be) (Quit: nn)
[19:14:50] <miza> i have so many questions
[19:14:56] <miza> but if ui start i ll spam you :p
[19:15:05] <cmr> ask away
[19:15:06] <kimundi> just ask
[19:15:10] <obk> Hmm. Shouldn't Cell::with_ref be fn with_ref<'a>(&'a self, op: &fn(v: &'a T) -> R) -> R ?
[19:15:18] <miza> how can i take an reference of a variable?
[19:15:22] <engla> miza: you can read the tutorial, and the FAQs
[19:15:28] <cmr> rusti: let x = 5; printfln!(&x)
[19:15:29] -rusti- &5
[19:15:30] -rusti- ()
[19:15:33] <kimundi> the only thing that counts as spamming here is using rusti to much xD
[19:16:16] <miza> the other question from now is
[19:16:34] <miza> that i read that owned boxes are not garbage collected
[19:16:40] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[19:16:55] *** Quits: Aszarsha (Aszarsha@moz-16BFBC53.rev.numericable.fr) (Client exited)
[19:16:55] <cmr> They are garbage collected with reference counting, cycles are collected on task exit.
[19:17:02] <cmr> A "real" GC is in-progress.
[19:17:15] <miza> if i use an owned box in a function that has end
[19:17:27] <miza> still exist?
[19:17:32] <brson> cmr: i think you read that wrong. owned boxes are not gc'd
[19:17:36] <cmr> Oh!
[19:17:39] <cmr> Owned
[19:17:41] <cmr> Right
[19:18:02] <cmr> miza: owned pointers are not GC'd, no. they're destructed and free'd when they leave scope (just like other values)
[19:18:18] <miza> ok thx :D
[19:18:30] <kimundi> with no runtime magic
[19:18:30] <zol> Filed my first issue: https://github.com/mozilla/rust/issues/8885 :) Wish I knew how to fix it!
[19:19:03] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[19:19:09] <miza> thats the articles tha i found about classes
[19:19:10] *** Quits: vadimcn (chatzilla@A2267643.76F9E272.DA40C4B3.IP) (Connection reset by peer)
[19:19:10] <miza> http://pcwalton.github.io/blog/2012/06/03/maximally-minimal-classes-for-rust/
[19:19:20] *** Joins: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com)
[19:19:23] <tjc> zol: it's a good test case! that's at least half the battle
[19:19:46] <miza> just saying, i ll read about traits
[19:19:46] <cmr> miza: I'm pretty sure none or almost none of that is relevant to modern rust
[19:20:08] <tjc> cmr: Not actually -- that blog post describes, more or less, the design we ended up adopting for traits/impls
[19:20:27] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Quit: Konversation terminated!)
[19:20:27] <cmr> tjc: oh!
[19:20:28] <brson> cmr: do you know why the test-restructure branch reduced the cycle time?
[19:20:29] <tjc> But, when reading it you have to keep in mind it's talking about 0.3 (or 0.4? I'm not sure), so the changes it's talking about as proposed have been made now
[19:20:31] <zol> tjc: Thanks :) 
[19:20:33] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Bye!)
[19:20:53] <cmr> brson: ...no. if it did, that probably means I did it wrong and things aren't being built anymore.
[19:21:59] <cmr> brson: it should have only been benchmarks though
[19:22:05] <miza> i am reading rust just few days and after ruby, it looks so hard :P
[19:22:05] <miza> but i like it :D
[19:22:35] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[19:22:35] *** Joins: jviereck (Adium@moz-A952351F.dip0.t-ipconnect.de)
[19:22:41] <miza> i'm going to a dive to rust and i ll come later for more questions :p
[19:22:42] <cmr> brson: that's enough of a drop that I think actually running the benchmarks is probably not a good idea on the buildbots!
[19:22:50] <zol> miza: No pain, no gain :)
[19:23:02] <cmr> but keeping them building is nice.
[19:23:14] <zol> miza: I recommend the tutorial, it is really instructive!
[19:23:24] <brson> cmr: it does look like benchmarks are not running now
[19:23:24] <miza> i am reading this
[19:23:31] <zol> miza: http://static.rust-lang.org/doc/rust.html is also nice to have
[19:23:53] <miza> zol: but i want to have and some fun with the rust, not only reading
[19:23:58] <cmr> that's what, 20% drop in cycle time?
[19:24:13] <zol> miza: Just bookmark it and look there when you get stuck on something :)
[19:24:22] *** Quits: Diamond (dick@moz-D7E07B36.ks.ks.cox.net) (Client exited)
[19:24:35] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[19:25:07] <miza> zol: i writing some basic algorithms to be familiar with the rust
[19:25:33] <zol> miza: Cool, I am trying to write an RPG simulator.
[19:25:36] <miza> zol: i ll go for levenshtein now
[19:25:59] <miza> zol: nice
[19:26:07] <zol> miza: Oh, never heard of that one before - thanks!
[19:26:11] <miza> zol: is this on github?
[19:26:17] <brson> cmr: will you look into what happened?
[19:26:34] <cmr> brson: yes
[19:28:09] <brson> thanks
[19:28:16] <zol> miza: https://github.com/Zolomon/rust-rpg-sim ? I haven't commited much yet, trying to figure out how to implement the equivalent of http://en.wikipedia.org/wiki/Composite_pattern in Rust 
[19:28:30] *** Quits: jviereck (Adium@moz-A952351F.dip0.t-ipconnect.de) (Ping timeout)
[19:28:57] <SiegeLord> zol: What does your RPG simulator simulate exactly?
[19:29:16] *** Joins: jviereck (Adium@moz-69BD9138.dip0.t-ipconnect.de)
[19:29:20] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Ping timeout)
[19:31:24] <zol> SiegeLord: Imagine something similar to Diablo. A hero wakes up at a town old enough to go exploring. He can portal/walk back to town when he needs to restock, has to rest when he gets tired and things like that. Currently I'm trying to implement a hierarchical goal system for AI.
[19:31:35] <SiegeLord> So it's just an RPG :P
[19:31:37] <olsonjeffery> brson: hey is nmatsakis out?
[19:31:52] <zol> SiegeLord: No, it's a simulation. You don't control anything. :)
[19:32:14] * kimundi upgraded his matches! macro a bit more: https://gist.github.com/Kimundi/6393248
[19:32:15] <brson> olsonjeffery: yes, he's on pto today
[19:32:18] <doomlord> game plays itself?
[19:32:20] <SiegeLord> So it's a game for an AI... that's neat
[19:32:29] <zol> doomlord: yes 
[19:32:32] <Ralith> zol: it's generally helpful to have a manual control mode for testing purposes.
[19:32:36] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: Places to go, people to annoy)
[19:33:10] *** Quits: Jesin (Jessin_@moz-DD8D71FB.cc.lehigh.edu) (Ping timeout)
[19:33:20] <doomlord> i was always thinking how good automatic playthrough would be for testing - repeatability
[19:33:23] <zol> Ralith: Yeah, I was thinking about adding debug commands. Haven't worked out yet how to make things work on different threads and how to communicate. Think there are pipes/channels for that? 
[19:33:37] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[19:33:42] <olsonjeffery> brson: ok.. is there anyone who can troubleshoot this: https://github.com/mozilla/rust/issues/8873 ?
[19:34:06] <olsonjeffery> curious if im doing something wrong in terms of what i want to express or if there's a workaround..
[19:34:48] *** Quits: eagen (eagen@8737942B.7A99C13A.B7961A98.IP) (Quit: Leaving)
[19:35:07] *** Quits: jviereck (Adium@moz-69BD9138.dip0.t-ipconnect.de) (Ping timeout)
[19:35:25] <Ralith> zol: I'm kind of curious why you're using threads
[19:35:55] *** Joins: jviereck (Adium@moz-C6035CC9.dip0.t-ipconnect.de)
[19:36:10] <brson> olsonjeffery: heading to lunch now, sorry :-S
[19:36:33] <maik> how do I import enums?
[19:36:34] <olsonjeffery> np
[19:36:41] <zol> Ralith: I don't want to block while waiting for input, I think. But I guess that depends on what kind of debugging commands I'd like to support.
[19:36:50] <kimundi> maik: like every other item
[19:37:02] <maik> use std::option::Option::{Some,None}?
[19:37:07] <cmr> maik: you can't import variants.
[19:37:14] <kimundi> sure?
[19:37:15] <cmr> use std::option::{Some, None}
[19:37:27] <kimundi> ah, wiat wait
[19:37:29] <Ralith> zol: well, I'm not the right person to talk to about IO in Rust, but you certainly don't need threads just to avoid blocking.
[19:37:31] <maik> cmr, ah okay thanks
[19:37:38] <Ralith> in general principle, anyway.
[19:38:06] <kimundi> "enum variants are not scoped under their type" != "you can't import variants". :P
[19:38:18] <cmr> ok, yes.
[19:39:15] <kimundi> But we really need that hypothetical 'enum mod { ... }' sometime in the future :)
[19:40:02] <olsonjeffery> there was talk at one point of (being able to scope|enforcing scoping of) enums by their containing type
[19:40:10] *** Quits: mihneadb|lunch (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net) (Input/output error)
[19:40:52] <kimundi> olsonjeffery: And the result of that was being able to write 'enum mod {}' which works like enum {} but scopes the variants under the type
[19:41:25] <kimundi> AT least, as I remembered no one had any objections against that solution
[19:41:45] <cmr> I'd prefer a syntax extension for it.
[19:42:04] <cmr> enum_mod! { ... }
[19:42:07] <kimundi> cmr: Can't implement that with a se
[19:42:12] <cmr> generates the proper enum and a module.
[19:42:15] <cmr> kimundi: why not?
[19:42:24] <cmr> the module would just have reexports
[19:42:31] <cmr> it should be able to be the same name?
[19:42:50] <cmr> rusti: enum Foo { A, B } mod Foo { pub use super::A; }
[19:42:54] -rusti- pastebinned 8 lines of output: http://ix.io/7Hj
[19:43:09] <cmr> rusti: pub enum Foo { A, B } mod Foo { pub use super::A; }
[19:43:12] -rusti- pastebinned 8 lines of output: http://ix.io/7Hk
[19:43:20] *** Joins: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net)
[19:43:20] <kimundi> But then the type itself becomes Foo::Foo
[19:43:37] <cmr> no, it'd still be Foo, in my mental model of how rust works
[19:43:41] *** Joins: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net)
[19:44:01] <kimundi> unless you expand to "pub use Foo::Foo; mod Foo { pub use A; pub use B; enum Foo {A, B} }"
[19:44:15] *** Quits: erickt (Adium@A76FB231.50CA9683.D51AEBE4.IP) (Quit: Leaving.)
[19:44:22] *** Joins: eagen (eagen@8737942B.7A99C13A.B7961A98.IP)
[19:45:00] <kimundi> rusti: mod x { pub use Foo::Foo; pub mod Foo { pub use A; pub use B; enum Foo {A, B} } }
[19:45:03] -rusti- pastebinned 20 lines of output: http://ix.io/7Hl
[19:45:24] <kimundi> rusti: mod x { pub use self::Foo::Foo; pub mod Foo { pub use A; pub use B; enum Foo {A, B} } }
[19:45:31] -rusti- pastebinned 20 lines of output: http://ix.io/7Hm
[19:45:59] <kimundi> rusti: mod x { pub use self::Foo::Foo; pub mod Foo { pub use self::A; pub use self::B; pub enum Foo {A, B} } }
[19:46:00] -rusti- <anon>:5:63: 5:70 error: unresolved import
[19:46:01] -rusti- <anon>:5          mod x { pub use self::Foo::Foo; pub mod Foo { pub use self::A; pub use self::B; pub enum Foo {A, B} } }
[19:46:01] -rusti-                                                                         ^~~~~~~
[19:46:01] -rusti- error: aborting due to previous error
[19:46:01] -rusti- application terminated with error code 101
[19:46:01] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[19:47:04] *** Joins: tgummerer (tgummerer@moz-6F89D3DC.retail.telecomitalia.it)
[19:48:23] <engla> it doesn't look like it's possible to have a mod and an enum of the same name
[19:48:24] *** abacus is now known as [a]bacus
[19:48:41] <engla> as in use Foo = Foo::Foo;  will error later if you try to use Foo as a type
[19:48:42] <kimundi> both are declarations
[19:49:12] *** Quits: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net) (Ping timeout)
[19:49:24] <kimundi> I would find it strange if you could name them the same in the same location
[19:49:34] <kimundi> module-tree wise
[19:50:56] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[19:51:00] *** Joins: robertknight (robertknig@moz-53D8EF63.range81-151.btcentralplus.com)
[19:51:08] *** Joins: Jesin (Jessin_@moz-DD8D71FB.cc.lehigh.edu)
[19:52:24] *** Quits: fabiand (fabiand@moz-8783E110.adsl.alicedsl.de) (Quit: Verlassend)
[19:54:12] *** Quits: Jesin (Jessin_@moz-DD8D71FB.cc.lehigh.edu) (Ping timeout)
[19:55:06] <maik> http://www.reddit.com/r/rust/comments/1lf4im/wyre_a_task_based_dependency_graph_library/
[19:55:42] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[19:55:42] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14117b681 to 140553618: 02http://git.io/N3iJvQ
[19:55:42] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[19:55:42] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[19:55:42] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/Swq3Zw
[19:55:42] <ghrust> 13rust/06auto 14c7a269f 15Carlos: doc/rust.md: Missing in keyword on keyword list.
[19:55:42] <ghrust> 13rust/06auto 14116c034 15bors: auto merge of #8878 : toqueteos/rust/patch-1, r=sanxiyn...
[19:55:43] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[20:00:10] <sp3d> engla: no? I had been using that in some code but hadn't actually written the consumer side of it yet
[20:00:40] <sp3d> I guess I wasn't doing any "use ..." though, if that's the side of it that's broken
[20:01:24] *** Joins: Aszarsha (Aszarsha@moz-16BFBC53.rev.numericable.fr)
[20:03:03] *** Quits: eholk (eholk@11AF97BF.48D4C455.51B6877.IP) (Quit: eholk)
[20:03:10] <engla> well you know more than me maybe. It just looks like you can't have   std::option::Option as a type and std::option::Option::None as the variant
[20:03:32] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[20:03:44] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Connection reset by peer)
[20:05:04] <sp3d> I would have thought std::option::None would be the variant
[20:05:16] <kimundi> it is
[20:06:16] *** AutomatedTester is now known as AutomatedTester|mtg
[20:06:58] <engla> it is now, but not if you use various enum mod hacks
[20:07:17] <kimundi> every element you can see in such a path is a specific declared item: std::option::None - module::module::variant
[20:07:35] <kimundi> std::option::Option - module::module::type
[20:07:50] <sp3d> I've been doing mod foo { enum foo {bar} } and referring to them as foo::bar of type foo::foo
[20:07:53] *** Joins: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com)
[20:07:57] <sp3d> unless I'm mistaken :P
[20:08:20] <kimundi> std::option::Option::Some would have to be module::module::type::variant to make std::option::Option still an module::module::type
[20:08:45] *** Quits: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Quit: msingle)
[20:09:01] <kimundi> sp3d: That is correct. enum variants just live right next to their type in the module hierachy
[20:10:39] <kimundi> Other example: If you could have both mod Foo and enum Foo, what would Foo::some_fn() call? an assoziated function of the type, or an freestanding function in an module
[20:10:56] <kimundi> ?
[20:12:14] *** Joins: Jesin (Jessin_@moz-A680C20B.cc.lehigh.edu)
[20:13:12] <engla> that's a conflict
[20:13:21] <unfoldl> Another noob question: Why does this fail? "["abc", "def"].contains("abc")"
[20:13:48] <unfoldl> (With "expected `&&'static str` but found `&'static str` (expected &-ptr but found &'static str)")
[20:13:52] <kimundi> rusti: ["abc", "def"].contains("abc")
[20:13:54] -rusti- <anon>:5:33: 5:38 error: mismatched types: expected `&&'static str` but found `&'static str` (expected &-ptr but found &'static str)
[20:13:54] -rusti- <anon>:5          ["abc", "def"].contains("abc")
[20:13:54] -rusti-                                           ^~~~~
[20:13:54] -rusti- error: aborting due to previous error
[20:13:54] -rusti- application terminated with error code 101
[20:13:58] <tedh> ping cmr
[20:14:01] <kimundi> rusti: ["abc", "def"].contains(&"abc")
[20:14:02] -rusti- <anon>:5:33: 5:39 error: mismatched types: expected `&&'static str` but found `&str` (expected &-ptr but found &str)
[20:14:02] -rusti- <anon>:5          ["abc", "def"].contains(&"abc")
[20:14:03] -rusti-                                           ^~~~~~
[20:14:03] -rusti- error: aborting due to previous error
[20:14:04] -rusti- application terminated with error code 101
[20:14:06] <kimundi> rusti: ["abc", "def"].contains(& &"abc")
[20:14:08] -rusti- true
[20:14:49] <kimundi> unfoldl: contains is working with an reference to the thing you're looking for in the vector
[20:15:01] <cmr> tedh: pong
[20:15:24] <kimundi> your vector is [&'static str], so contains expects a & &'static str
[20:15:25] <tedh> it looks like 8458 is causing most tests not to be run
[20:15:36] <cmr> tedh: most tests? not just benchmarks?
[20:15:51] <kimundi> "foo" is suagr for &"foo", so you need to pass & &"foo" to get that type
[20:16:07] <tedh> run-pass, run-fail, compile-fail all seem to say 0 tests now
[20:16:12] <cmr> yikes
[20:16:12] *** Quits: sw17ch (sw17ch@moz-39D8564F.wndsny.tds.net) (Quit: sw17ch)
[20:16:17] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[20:16:27] <cmr> I'll get to that asap then
[20:16:29] <tedh> http://buildbot.rust-lang.org/builders/auto-mac-64-opt/builds/1192/steps/test/logs/stdio
[20:16:29] <kimundi> note that the & & need to be seperated by whitespace, or else thy get confused with and 
[20:16:31] <cmr> I thought it was just benchmarks.
[20:16:41] <engla> oh that's why my local make check was fast
[20:17:26] <tedh> compared to:
[20:17:27] <tedh> http://buildbot.rust-lang.org/builders/auto-mac-64-opt/builds/1190/steps/test/logs/stdio
[20:17:47] *** Quits: threecreepio (jdp@moz-71E164C9.cust.bredbandsbolaget.se) (Quit: threecreepio)
[20:18:12] *** Joins: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net)
[20:18:59] *** Joins: threecreepio (jdp@moz-71E164C9.cust.bredbandsbolaget.se)
[20:19:24] <cmr> https://github.com/mozilla/rust/pull/8886
[20:19:33] *** Quits: sebcrozet (sebcrozet@moz-87D51607.w80-13.abo.wanadoo.fr) (Ping timeout)
[20:20:00] *** Quits: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net) (Ping timeout)
[20:20:11] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:20:21] *** Joins: squiddy (squiddy@moz-779AB2F2.adsl.alicedsl.de)
[20:21:47] *** Quits: tgummerer (tgummerer@moz-6F89D3DC.retail.telecomitalia.it) (Ping timeout)
[20:23:32] <tedh> thanks, hopefully nothing bad snuck in there
[20:24:08] *** Quits: maik (maik___@moz-B08A740.dip0.t-ipconnect.de) (Ping timeout)
[20:25:00] *** Joins: sebcrozet (sebcrozet@moz-D8879CC3.w80-13.abo.wanadoo.fr)
[20:29:23] *** Quits: jviereck (Adium@moz-C6035CC9.dip0.t-ipconnect.de) (Quit: Leaving.)
[20:32:06] *** Joins: int3_ (int3_@moz-7B0110AD.mv.mozilla.com)
[20:32:19] <miza> how can i create two dimensional array?
[20:32:40] <cmr> rusti: let x = ~[~[1, 2, 3], ~[4, 5, 6], ~[7, 6, 9]]; x
[20:32:42] -rusti- ~[~[1, 2, 3], ~[4, 5, 6], ~[7, 6, 9]]
[20:32:55] *** Joins: toqueteos (Mibbit@moz-69F152C3.dynamic.jazztel.es)
[20:32:56] <cmr> miza: it'd be type ~[~[T]]
[20:33:00] <cmr> also, vectors, not arrays.
[20:33:03] <kimundi> miza: either nest one array inside an other, or use a one dimensional and calculate 2d indice positions
[20:33:28] <engla>  if it's fixed size it can be   [[1,2], [3,4]] of course
[20:33:32] <toqueteos> why is rust-lang.org down?
[20:33:48] <engla> it's not toqueteos 
[20:33:50] <sam113101> because it isn't
[20:34:02] <toqueteos> isup.me says: It's not just you! http://www.rust-lang.org looks down from here.
[20:34:17] <toqueteos> and it's located in another continent
[20:34:19] <jack> toqueteos: https://status.github.com/
[20:34:24] <jack> github is havingi problems
[20:34:49] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[20:34:49] <toqueteos> jack: ty!
[20:36:29] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[20:36:34] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[20:36:35] *** ChanServ sets mode: +o tjc
[20:36:44] *** Quits: maxli (maxli@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Leaving.)
[20:38:18] *** Quits: ronny (ronnypfa@moz-E7EE6ABE.uberspace.de) (Ping timeout)
[20:38:38] *** Joins: ronny (ronnypfa@moz-E7EE6ABE.uberspace.de)
[20:39:54] <miza> cmr: and if i want to make it based on a variable like [0, ..3]
[20:40:09] <cmr> miza: ~[[T, ..3]]
[20:40:15] <cmr> or [[T, ..3], ..3]
[20:40:15] <miza> let x =2; [0,..x]
[20:40:21] <cmr> Can't do that
[20:40:28] <cmr> [T, ..n] is fixed-length
[20:40:36] <kimundi> each [T, ..N] is a seperate type
[20:40:41] <cmr> Use a vector (~[]) or a slice (&[])
[20:40:49] <myname>  i still don't get the idea behind that syntax
[20:41:05] <kimundi> myname: ,.. 
[20:41:07] <kimundi> ?
[20:41:08] <cmr> myname: what do you mean?
[20:41:13] <myname> kimundi: yes
[20:41:23] <kimundi> It's to make it conform to the expression syntax
[20:41:32] <myname> ?
[20:41:44] <kimundi> rusti: let x: [uint, ..3] = [1, ..3];
[20:41:45] -rusti- <anon>:5:13: 5:14 warning: unused variable: `x` [-W unused-variable (default)]
[20:41:45] -rusti- <anon>:5          let x: [uint, ..3] = [1, ..3];
[20:41:45] -rusti-                       ^
[20:41:45] -rusti- ()
[20:41:48] <kimundi> rusti: let x: [uint, ..3] = [1, ..3]; x
[20:41:49] -rusti- [1, 1, 1]
[20:41:56] *** Joins: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[20:42:11] <kimundi> befor we had: let x: [uint * 3] = [1, ..3]; x
[20:42:26] <kimundi> but that's inconsistent compared to everywhere else
[20:42:33] <cmr> the ML is strong with thatone
[20:42:36] *** Quits: Guest (textual@34641662.FB4DE631.66C78B76.IP) (Quit: Textual IRC Client: www.textualapp.com)
[20:42:56] <kimundi> and: let x: [uint * 3] = [1 * 3]; wouldn't work for obvious reasons ;)
[20:47:15] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[20:47:54] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[20:48:36] *** Joins: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net)
[20:49:23] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[20:50:09] <sp3d> rusti: [1u, ..0]
[20:50:10] -rusti- []
[20:50:24] *** Quits: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net) (Ping timeout)
[20:50:36] <sp3d> rusti: [1u, ..-0]
[20:50:37] -rusti- []
[20:50:38] <sp3d> rusti: [1u, ..-1]
[20:50:39] -rusti- <anon>:5:16: 5:18 error: expected positive integer for repeat count but found negative integer
[20:50:40] -rusti- <anon>:5          [1u, ..-1]
[20:50:40] -rusti-                          ^~
[20:50:40] -rusti- error: aborting due to previous error
[20:50:40] -rusti- application terminated with error code 101
[20:50:57] <cmr> rusti: -0 == 0
[20:50:58] -rusti- true
[20:51:03] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Connection reset by peer)
[20:51:16] <sp3d> right, I was just making sure it parsed
[20:52:03] *** Quits: obk (Mibbit@moz-BDCF418A.dyn.optonline.net) (Quit: http://www.mibbit.com ajax IRC Client)
[20:52:04] <bstrie> just banned my first reddit user as the /r/rust admin! this calls for a celebration
[20:52:13] <bstrie> bartender, a glass of troll tears all around
[20:52:40] <mcpherrin> bstrie: haha, is that something that actually needs to happen?
[20:52:50] *** Joins: tikue_ (tkuehn@FDD42276.B9B3942C.689607DE.IP)
[20:52:52] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[20:53:15] <olsonjeffery> bstrie: link to troll post?
[20:53:15] <tjc> bstrie: nice!
[20:53:22] <bstrie> mcpherrin: someone made an inane comment on one of maik's posts and their prior reddit-wide comment history was... disheartening. so I took preemptive action
[20:53:30] <mcpherrin> disappointing in some ways, but encouraging that enough people care about Rust to troll the subreddit
[20:53:33] <tjc> bstrie: good move
[20:53:42] <tjc> mcpherrin: it's Reddit, discussions about knitting get trolled
[20:53:48] <bstrie> olsonjeffery: http://www.reddit.com/r/rust/comments/1lf4im/wyre_a_task_based_dependency_graph_library/cbym4or
[20:54:00] <bstrie> olsonjeffery: it wasn't even that post, just check out the user's history
[20:54:29] <bstrie> I'm happy enough to leave the post itself in downvote hell, as an example to others
[20:54:33] <zol> What are my options if I need different implementations of the same (base) trait? 
[20:54:43] <mcpherrin> tjc: That's true.  I've even had to remove some posts from /r/chipmunks :P
[20:54:55] <olsonjeffery> zol: what do you mean?
[20:54:57] <tjc> Heh, if not for the comment history I would think that user was a bot that writes comments of the form, "Not another post by __________, ..."
[20:55:08] <olsonjeffery> zol: you provide the impl yourself?
[20:55:21] <tjc> zol: different implementations of the same trait for the same type?
[20:55:45] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[20:55:45] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/Swq3Zw
[20:55:45] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[20:55:52] <zol> tjc: Oh, right! I can make different structs instead, smart!
[20:56:03] <tjc> zol: Yeah, usually the trick is to make a "newtype"
[20:56:12] <tikue_> bstrie: where is the comment?
[20:56:32] <bstrie> tikue_: see my link above to olsonjeffery 
[20:56:38] <tikue_> ah ok
[20:56:39] <tikue_> wow
[20:56:46] <tikue_> :\
[20:57:43] <olsonjeffery> rusti: trait A { fn foo(&self) -> bool; } struct B(bool) : A { fn foo(&self) -> bool { *self } } struct C(bool) { fn foo(&self) -> bool { *self } } trait D { fn bar<T: A>(e: &A) -> bool; }
[20:57:46] -rusti- pastebinned 4 lines of output: http://ix.io/7Hr
[20:59:03] <zol> olsonjeffery: What is that magickery? struct B(bool): A {...}?
[20:59:09] <olsonjeffery> just a sec
[20:59:12] <olsonjeffery> working out the syntax, heh
[20:59:14] <olsonjeffery> one-liners!
[20:59:29] *** Quits: robertknight (robertknig@moz-53D8EF63.range81-151.btcentralplus.com) (Ping timeout)
[20:59:52] <tikue_> zol: newtype struct
[20:59:59] <tikue_> oh nvm
[21:00:01] <tikue_> weird
[21:00:12] <tikue_> maybe that was supposed to be a semicolon
[21:00:35] <zol> tikue_: Still, never seen the struct B(bool) thing? 
[21:00:37] <olsonjeffery> here we go
[21:00:39] <olsonjeffery> rusti: trait A { fn foo(&self) -> bool; } struct B(bool); impl A for B { fn foo(&self) -> bool { **self } } struct C(bool); impl A for C { fn foo(&self) -> bool { **self } } trait D { fn bar<T: A>(e: &T) -> bool; }
[21:00:40] -rusti- ()
[21:00:46] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[21:00:46] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/MpsIxA
[21:00:46] <ghrust> 13rust/06auto 14fdcc415 15Corey Richardson: Revert "Teach the makefile to use multiple src-base's"...
[21:00:46] <ghrust> 13rust/06auto 14f585767 15Corey Richardson: Revert "Teach compiletest to use multiple --src-base's"...
[21:00:47] <ghrust> 13rust/06auto 14d7be86f 15Corey Richardson: Revert "src/test/bench: restructure"...
[21:00:49] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[21:00:50] <tikue_> zol: ah! yeah that's a newtype struct
[21:00:52] <tikue_> they're great !
[21:00:58] <tikue_> they allow for automatic dereferencing in method calls
[21:01:00] <olsonjeffery> that's not a newtype
[21:01:13] <olsonjeffery> newtype is `pub type Foo = SomeOtherType;`
[21:01:15] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[21:01:15] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02https://github.com/mozilla/rust/compare/116c034791e0...116c034791e0
[21:01:15] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[21:01:24] <olsonjeffery> pub struct Foo(Bar) is a single variant enum
[21:01:25] <tikue_> olsonjeffery: newtype is like struct Foo(bool);
[21:01:32] <olsonjeffery> or single element tuple?
[21:01:32] <zol> olsonjeffery: That's basically a typedef from C++ world? 
[21:01:38] <olsonjeffery> someone's gonna come in and school me.
[21:01:39] <zol> C/C++
[21:01:48] <kmc> zol: no because you have to explicitly wrap/unwrap it
[21:02:01] <strcat> olsonjeffery: type is just a type alias (same type, different name), a newtype is a strong new type
[21:02:02] <tikue_> olsonjeffery: struct Foo(Bar) is not a single variant enum
[21:02:07] <zol> kmc: Could you elaborate on that, please? 
[21:02:17] <olsonjeffery> strcat: ok, thanks for clearing that up.
[21:02:26] <kmc> the virtue being you can have  struct Inches(float); struct Meters(float); and the type system will prevent you from accidentally adding inches to meters
[21:02:48] * olsonjeffery <-- mistaken
[21:02:58] <tikue_> kmc: not only that
[21:03:06] <tikue_> kmc: you can also do method calls on the outer struct
[21:03:35] <olsonjeffery> anyways, my snippet was demonstrating for zol how you would have multiple impls of the same trait
[21:03:35] <tikue_> rusti: struct Foo(uint); Foo(2u).times(&2u)
[21:03:36] -rusti- <anon>:5:41: 5:44 error: mismatched types: expected `&fn<no-bounds>()` but found `&uint` (expected fn but found &-ptr)
[21:03:37] -rusti- <anon>:5          struct Foo(uint); Foo(2u).times(&2u)
[21:03:37] -rusti-                                                   ^~~
[21:03:37] -rusti- error: aborting due to previous error
[21:03:37] -rusti- application terminated with error code 101
[21:03:38] <kmc> by contrast a C typedef or a Rust 'type' just defines a new name for the same type; the new and old names can be used interchangeably
[21:03:57] <olsonjeffery> and then have a function parameterized on a trait object (trait D's foo method)
[21:04:03] *** Joins: erickt (Adium@4530196F.50CA9683.D51AEBE4.IP)
[21:04:05] <tikue_> rusti: struct Foo(uint); Foo(2u).div_floor(2u)
[21:04:06] <olsonjeffery> the struct B(bool) stuff is a red herring.
[21:04:06] -rusti- <anon>:5:45: 5:47 error: mismatched types: expected `&uint` but found `uint` (expected &-ptr but found uint)
[21:04:06] -rusti- <anon>:5          struct Foo(uint); Foo(2u).div_floor(2u)
[21:04:07] -rusti-                                                       ^~
[21:04:07] -rusti- error: aborting due to previous error
[21:04:07] -rusti- application terminated with error code 101
[21:04:27] <kmc> yes it's true newtype structs are useful for other things, like making a trait impl when the underlying type already has one
[21:04:37] <tikue_> rusti: struct Foo(uint); Foo(1u).pow(&2u)
[21:04:38] -rusti- <anon>:5:27: 6:5 error: type `main::Foo` does not implement any method in scope named `pow`
[21:04:38] -rusti- <anon>:5          struct Foo(uint); Foo(1u).pow(&2u)
[21:04:38] -rusti- <anon>:6     };
[21:04:38] -rusti- error: aborting due to previous error
[21:04:38] -rusti- application terminated with error code 101
[21:04:52] <tikue_> i can't think of a small example lol
[21:04:56] <jclements> wait... I have to compile LLVM AGAIN? I think this build script is secretly mining bitcoins
[21:05:06] *** Quits: toqueteos (Mibbit@moz-69F152C3.dynamic.jazztel.es) (Quit: http://www.mibbit.com ajax IRC Client)
[21:05:07] <kmc> zol: if x is a newtype struct then you can do *x to unwrap it, as an alternative to the usual pattern matching
[21:05:16] <tikue_> rusti: ue std::num::Algebraic; struct Foo(uint); Foo(1u).pow(&2u)
[21:05:17] -rusti- <anon>:5:12: 5:15 error: expected one of `; }` but found `std`
[21:05:17] -rusti- <anon>:5          ue std::num::Algebraic; struct Foo(uint); Foo(1u).pow(&2u)
[21:05:17] -rusti-                      ^~~
[21:05:17] -rusti- application terminated with error code 101
[21:05:25] <tikue_> rusti: use std::num::Algebraic; struct Foo(uint); Foo(1u).pow(&2u)
[21:05:25] <sp3d> rusti: struct Foo(uint); Foo(2u).div_floor(&2u)
[21:05:26] <zol> kmc: Thank you
[21:05:26] -rusti- <anon>:5:52: 6:5 error: type `main::Foo` does not implement any method in scope named `pow`
[21:05:27] -rusti- <anon>:5          use std::num::Algebraic; struct Foo(uint); Foo(1u).pow(&2u)
[21:05:27] -rusti- <anon>:6     };
[21:05:27] -rusti- error: aborting due to previous error
[21:05:27] -rusti- application terminated with error code 101
[21:05:28] -rusti- 1
[21:05:36] <tikue_> i don't get it
[21:05:37] <sp3d> no pow for ints yet afaik?
[21:05:37] <kmc> this unfortunately means that (unlike Haskell) you can't have abstract newtypes, where the guts are only visible within a single module
[21:05:39] <zol> olsonjeffery: And to you too! Trying to decipher your snippet. :)
[21:05:44] <tikue_> oh
[21:05:49] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[21:05:58] <pcwalton> we should make that opt-in
[21:05:58] <sp3d> rusti: struct Foo(f32); Foo(2f32).pow(&2f32)
[21:05:59] -rusti- 4
[21:06:03] <pcwalton> the * for deref of newtype structs
[21:06:09] <kmc> by some attribute?
[21:06:12] <pcwalton> yeah
[21:06:15] <kmc> something like deriving
[21:06:16] <tikue_> kmc: yeah i was thinking about that before
[21:06:18] <kmc> yeah that would be ok
[21:06:25] <pcwalton> you can do abstract newtypes but you have to use an explicit struct with a field
[21:06:32] <tikue_> like i was thinking of making struct SyncChan(DuplexStream);
[21:06:38] <tikue_> but you can't have the internals private 
[21:06:42] <kmc> it doesn't matter so much, because (unlike Haskell) there is no operational / efficiency difference between a newtype and a plain old struct with one field
[21:06:46] <tikue_> only slightly inconvenient
[21:06:56] <kmc> it's just that the latter is more verbose because you have to name the field
[21:06:59] <tikue_> yeah
[21:07:00] <olsonjeffery> zol: sorry.. it's not very helper because it's a one-liner..
[21:07:01] <engla> we have lots of single-member wrapper structs
[21:07:15] <olsonjeffery> engla: it's super useful when wrapping *c_void
[21:07:57] <cmr> jclements: but we have windows debuginfo now!
[21:08:07] <tikue_> pcwalton: i have a question about the contract for the GenericSmartChan trait
[21:08:19] <engla> and for wrapping integers, like niko mentioned  struct EdgeIndex(uint);
[21:08:29] <jclements> cmr: awesome! In about thirty hours,that should be a lifesaver....
[21:08:29] *** Joins: Shaladdle (Shaladdle@moz-424BC304.hsd1.pa.comcast.net)
[21:08:43] <engla> olsonjeffery: I think there used to be cross-crate usage bugs, otherwise there'd be more uses of newtype structs
[21:08:55] <pcwalton> tikue_: sure
[21:09:25] <tikue_> pcwalton: does ```pub fn try_send(&self, x: T) -> bool;``` require that it not fail?
[21:09:35] <pcwalton> i would think so
[21:09:53] <tikue_> pcwalton: in other words, if i were to implement it for a synchronous stream, how would that work? the chan would block for an ack, so there are two points of failure
[21:10:14] <tikue_> does try_send return true only if it sent successfully, or is it deeper than that
[21:10:20] <kimundi> pcwalton: struct NewType(priv T) would be nice...
[21:10:30] <kimundi> (and consistent)
[21:10:48] <tikue_> kimundi: yes it would be :) there's a closed issue where graydon said quite firmly, "no"
[21:10:57] * tikue_ was wondering about this last night
[21:11:03] <olsonjeffery> tikue_: have you consulted existing impls in std?
[21:11:15] *** Quits: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[21:11:18] <olsonjeffery> iirc try_send on the rt::comm types is meant to fail if the port on the far end is closed/dead
[21:11:20] <pcwalton> where would be the point of failure be?
[21:11:20] <tikue_> olsonjeffery: yes, but there aren't any synchronous chans yet, so it hasn't been an issue
[21:11:22] <pcwalton> linked failure?
[21:11:36] <pcwalton> kimundi: I'm not sure it's consistent
[21:11:43] <zol> olsonjeffery: http://hastebin.com/ligoyiyuna.coffee is what I managed to do so far, right before you posted your snippet. :)
[21:11:52] *** Joins: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net)
[21:11:54] <pcwalton> because priv doesn't change what operators do (or whether they work) elsewhere in the language
[21:11:58] <pcwalton> unless you consider . an operator
[21:12:00] <tikue_> pcwalton: so a SynChan's internal implementation of send() would be ```duplex_stream.send(val); duplex_stream.recv();```
[21:12:01] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[21:12:12] <sp3d> what's the important difference b/w that and struct NewType {foo : priv T}?
[21:12:19] <tikue_> either of those calls could fail
[21:12:20] <zol> olsonjeffery: Let's see if I can make it work with your example -- I would prefer if I could write GoalExplore::new()/GoalRest::new() instead!
[21:12:38] *** Quits: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP) (Quit: Lost terminal)
[21:12:53] <olsonjeffery> zol: ok .. so if you wanted a fn that could take either GoalRest or GoalExplore
[21:13:07] <kimundi> pcwalton: I'd see * as a anonymous field access in this context
[21:13:09] <olsonjeffery> you'd do: fn foo<G: Goal>(goal: &G) { .. }
[21:13:22] <olsonjeffery> or goal: ~G or goal: @G
[21:13:27] <pcwalton> I guess, except it's involved in autoderef..
[21:13:36] <zol> olsonjeffery: Ah, cool - thanks!
[21:13:37] <pcwalton> maybe it shouldn't be * at all but instead foo.*
[21:13:38] <olsonjeffery> that's how you can represent traits as types.. (have to be annotated w/ a pointer-type)
[21:13:39] <pcwalton> or something
[21:13:46] *** Quits: victorporof (victorporo@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: victorporof)
[21:13:46] <olsonjeffery> something something *handwave* vtables...
[21:13:47] <brson> how do you convert a string to an int?
[21:13:57] * zol grins at olsonjeffery.
[21:14:02] <tikue_> brson: FromStr::from_str
[21:14:11] *** Quits: jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: Don't tell them I was here...)
[21:14:15] <tikue_> rusti: let two: uint = FromStr::from_str("2"); two
[21:14:17] <kimundi> brson, or directyl, eg std::uint__from_int
[21:14:18] -rusti- pastebinned 7 lines of output: http://ix.io/7Hv
[21:14:21] *** Joins: jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[21:14:32] <kimundi> err, std::uint::from_uint
[21:14:37] <tikue_> rusti: let two: uint = FromStr::from_str("2").unwrap(); two
[21:14:38] -rusti- 2
[21:14:44] <kimundi> ... forget it I'm to tired xD
[21:14:52] <kimundi> std::uint::from_str
[21:14:54] <pcwalton> we should put from_str in the prelude and make trait static methods reexportable
[21:14:57] <brson> yes please
[21:14:59] <pcwalton> from_str::<uint>(2)
[21:15:02] <kimundi> yeah
[21:15:07] <brson> FromStr::from_str is ridiculous
[21:15:07] <kimundi> definitly neccessary
[21:15:09] <tikue_> pcwalton: what does reexportable mean
[21:15:19] <pcwalton> oops sorry
[21:15:21] <strcat> pcwalton: wouldn't it be from_str::<for uint> now?
[21:15:23] <olsonjeffery> zol: it should be observed that, in the case of using "trait objects", those calls are all virtual .. while if you were passing a GoalRest/GoalExplore directly, those method calls (even if part of a Goal impl) are all static
[21:15:24] <pcwalton> from_str::<for uint>(2)
[21:15:26] <pcwalton> strcat: yes
[21:15:32] <kimundi> tikue_: Ability to do 'pub use FromStr::from_str'
[21:15:50] <pcwalton> keep in mind if we do that we will lose the ability to call "new" on typedefs
[21:15:53] <tikue_> kimundi: pub use meaning anyoen importing this file gets that as well?
[21:15:58] <olsonjeffery> there's no such thing as a free abstraction
[21:16:01] <brson> we could also just create a from_str function
[21:16:04] <pcwalton> typedef MyHashMap<K,V> = HashMap<K,V>; MyHashMap::new()
[21:16:04] *** Joins: Niessy (Mibbit@moz-E56CAA08.dsl.bell.ca)
[21:16:08] <brson> paramerized over FromStr
[21:16:15] <zol> olsonjeffery: Hm.. I don't really understand that. I don't know the different between a call being virtual or not. :/
[21:16:18] <kimundi> tikue_: Read the module section of the tutorial :)
[21:16:19] <strcat> olsonjeffery: lots are free in most cases
[21:16:26] <zol> difference*
[21:16:31] <strcat> traits as type bounds don't have overhead
[21:16:35] *** Quits: jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: Don't tell them I was here...)
[21:16:43] *** Joins: jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[21:16:49] <tikue_> i don't like the sound of losing that ability pcwalton 
[21:16:54] <cmr> they aren't free in codespace though
[21:16:59] <pcwalton> well, the problem is
[21:17:11] <pcwalton> type MyHashMap<K,V> = HashMap<K,V>;
[21:17:14] <pcwalton> pub use MyHashMap::new;
[21:17:22] <tikue_> ah
[21:17:22] <pcwalton> now "type" participates in import resolution
[21:17:29] <pcwalton> which means you will have cyclic import unhappiness
[21:17:31] <strcat> cmr: they are one of two alternatives - indirect calls or specialization
[21:17:35] <cmr> right
[21:17:37] <strcat> there's not overhead to traits
[21:17:39] <cmr> but they're not free.
[21:17:40] <strcat> they let you pick
[21:17:43] <kimundi> pcwalton: wait... isn't type just an alias?
[21:17:46] <strcat> it's free, because there's no other way to do it
[21:17:49] *** Joins: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP)
[21:17:51] *** Quits: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP) (Quit: pepper_chico)
[21:18:01] <engla>   use MyHashMap = HashMap   is ok, but type can fold in type parameters
[21:18:03] <strcat> you either write a function for each type or you specialize them - those are the choices you have by hand too
[21:18:04] <pcwalton> kimundi: it's an alias that doesn't participate in import resolution
[21:18:08] <strcat> you can hoist stuff out either way
[21:18:10] <pcwalton> at the moment
[21:18:11] <pcwalton> that's important
[21:18:14] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[21:18:23] *** Joins: maik (maik___@moz-B08A740.dip0.t-ipconnect.de)
[21:18:29] <strcat> traits give you the *same choices* you have when doing it manually, that's not an abstraction cost
[21:18:43] <cmr> ok, sure.
[21:19:22] *** Joins: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net)
[21:19:24] *** Joins: jmgrosen (jmgrosen@moz-916CF0AA.sd.sd.cox.net)
[21:19:35] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Quit: WeeChat 0.4.1)
[21:19:40] <kimundi> pcwalton: I'd imagine that a typedef would be interchangeable with the underlying base type, and that there shouldn't be an difference... Could you point at where exactly the problem lies?
[21:19:58] <strcat> rust's (current) closures don't give you that choice, so you could consider them not free
[21:20:45] <strcat> and they are not perfectly implemented so that's a cost too ;p
[21:21:01] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[21:21:10] *** Quits: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net) (Ping timeout)
[21:21:52] <zol> olsonjeffery: Now I'm going to figure out how I can write a recursive datatype that will allow me to make a tree/graph of different Goal implementations. 
[21:22:27] <tikue_> zol: you'd have to use ~Trait presumably
[21:22:48] <Aszarsha> Hi. :-) What's the rational behind the ability a assigned from an immutable box to a mutable box (ex: let r = ~13; let mut s = r; from tutorial) ? It looks like a hole as first view. The other way around seems perfect though
[21:22:53] <maik> is 'some' c++ interop planed for 1.0?
[21:22:55] <tikue_> actually no you could just parameterize over T: Goal
[21:23:12] <tikue_> Aszarsha: because it moves the value
[21:23:18] <cmr> Aszarsha: it's called "inherited mutability"
[21:23:46] <cmr> Aszarsha: When you own something (either by value or through an owned pointer), its mutability is the mutability of the thing it is stored in.
[21:24:12] <strcat> ~ is like most types, in that it's not inherently mutable or immutable
[21:24:32] <cmr> maik: no
[21:24:33] <strcat> just depends on the location it's stored
[21:24:39] <cmr> maik: https://github.com/mozilla/rust/issues/5853 wasn't accepted for a milestone.
[21:24:57] <cmr> maik: if someone does it, it will be included of course, but it's not a blocker.
[21:24:58] <Aszarsha> right, I think tikue_ explanation is clear to me, it moves the value. then r would be unusable afterward ?
[21:25:07] <cmr> Aszarsha: yes
[21:25:13] <tikue_> Aszarsha: right-o
[21:25:37] <kmc> mutability is set at the root of an ownership tree, which is either a variable or an @/@mut box
[21:25:49] <cmr> kmc: or &/&mut ?
[21:26:00] <strcat> cmr: no those just observe existing mutability
[21:26:05] *** Quits: jmgrosen (jmgrosen@moz-916CF0AA.sd.sd.cox.net) (Ping timeout)
[21:26:06] <cmr> ok
[21:26:09] <cmr> yeah that makes sense.
[21:26:57] <tikue_> rusti: let r = ~1; let s = &mut r; *s = 0; r
[21:26:58] -rusti- <anon>:5:42: 5:43 error: mismatched types: expected `~<VI0>` but found `<VI1>` (expected ~-ptr but found integral variable)
[21:26:58] -rusti- <anon>:5          let r = ~1; let s = &mut r; *s = 0; r
[21:26:58] -rusti-                                                    ^
[21:26:58] -rusti- error: aborting due to previous error
[21:26:59] -rusti- application terminated with error code 101
[21:27:13] <Aszarsha> so basically, ~ 'pointers' cannot be manipulated 'by value' ?
[21:27:14] <tikue_> rusti: let r = ~1; let s = &mut r; **s = 0; r
[21:27:17] -rusti- pastebinned 11 lines of output: http://ix.io/7Hy
[21:27:23] <kmc> how would I wait until a task exits, including it annihilating all its @-boxes?
[21:27:36] <strcat> Aszarsha: ~T and T act the same
[21:27:43] <zol> tikue_: From looking at http://static.rust-lang.org/doc/rust.html#recursive-types it seems like I should use an enum? 
[21:27:53] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[21:27:58] <tikue_> zol: enum or struct, yea
[21:28:04] <strcat> only difference is that ~T is always pointer-size and always has a destructor
[21:28:12] <strcat> and to access the inner type you need *
[21:28:20] <strcat> but ~T still has value semantics
[21:28:38] <tikue_> enums are nice unless you have a value at each node, in which case using struct is probably easier
[21:28:52] <kmc> looks like some of the TaskOpts can do it?
[21:29:50] <tikue_> rusti: struct Tree<T> { val: T, left: Option<~Tree<T>>, right: Option<~Tree<T>>, };
[21:29:52] -rusti- ()
[21:30:54] <tikue_> rusti: enum Tree<T> { Leaf(T), Node { left: ~Tree<T>, right: ~Tree<T> }}
[21:30:55] -rusti- ()
[21:31:07] * tikue_ shrugs
[21:31:36] <tikue_> enum is cleaner if only leaves store values
[21:31:37] <tikue_> imo
[21:32:17] <erickt> now that we can't write `Trait::static_method::<T>()` how to I call a static method on a trait that doesn't return a type that depends on `T`? For example, `trait Size { fn size(&self) -> uint { sys::size_of::<T>() } }`?
[21:32:44] <erickt> I'm getting an error calling `let size: uint = Size::size()`
[21:33:17] <acrichto> erickt: do you mean the <T> to be <Self> ?
[21:33:23] *** Joins: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net)
[21:33:30] <erickt> acrichto:  err, yeah
[21:33:41] <acrichto> hmm, I'm not actually sure that you can any more pcwalton ^
[21:34:19] <pcwalton> you can't
[21:34:22] <pcwalton> needs the ::<for>
[21:34:29] <pcwalton> which is not implemented and does not yet have consensus
[21:34:43] <erickt> :(
[21:35:58] <erickt> I suppose I could return a Either<T, uint>, and always return `Right(size_of::<T>())` :)
[21:36:10] <tikue_> lol
[21:36:17] <tikue_> that's disgusting :)
[21:36:34] *** Joins: Liothen (liothen@moz-80EF0CD7.spkn.qwest.net)
[21:36:37] *** Quits: cdidd (cdidd@moz-3134514.broadband.corbina.ru) (Ping timeout)
[21:36:37] *** Joins: cdidd (cdidd@moz-958CE7C7.broadband.corbina.ru)
[21:36:46] <tikue_> i don't understand why the old syntax was scrapped?
[21:36:50] <kimundi> pcwalton: I'd still like to talk about this 'type' issue. :) - what exactly is the semantic of a 'type' declaration? I'd assume that it creates an alias item in the module tree with an "is interchangeable with" relation to an other item in the module tree
[21:37:09] <pcwalton> because stacking type parameters at the end is bad
[21:37:14] <pcwalton> and unintuitive
[21:37:15] <kimundi> However, that would mean there is no problem, so that doesn't seem to be it
[21:37:23] <tikue_> pcwalton: but seemingly more expressive
[21:37:39] <pcwalton> and also wrong
[21:37:53] <pcwalton> HashMap::new::<K,V>() is wrong compared to HashMap::<K,V>::new()
[21:37:55] <kimundi> tikue_: It will be just as expressive, the current removel is just temporary
[21:38:17] <tikue_> kimundi: what about what erickt just poitned out
[21:38:25] <pcwalton> people always ask why they can't do things like HashMap::<K,V>::find_like::<Q>() instead of HashMap::find_like::<K,V,Q>()
[21:38:31] <pcwalton> that is solvable with the "for" syntax
[21:39:32] <tikue_> so what is the problem with what erickt pointed out?
[21:39:37] <kimundi> tikue_: That is something that is now temporary not expressible, but will again in the future
[21:39:42] <pcwalton> use sys::size_of::<for T>
[21:39:52] <erickt> oh, that works?
[21:39:56] <pcwalton> not yet
[21:39:59] <pcwalton> I would like to bring it up
[21:40:04] <kimundi> tikue_: The inability to specify the Self type for the function
[21:40:13] <jack> pcwalton: that imports a size_of bound to T?
[21:40:23] <pcwalton> not "use"
[21:40:25] <pcwalton> literally
[21:40:35] <pcwalton> I mean, utilize "sys::size_of::<for T>"
[21:40:38] <tikue_> kimundi: ohhh i see
[21:40:45] <Aszarsha> Is there a way to make a closure which take a reference part/all of their environment ?
[21:40:53] <tikue_> so would it be like
[21:41:00] <jack> maybe i need to read more backlog, but how is that different that sys::size_of::<T>() now?
[21:41:06] <pcwalton> sys::size_of::<T> is gone
[21:41:08] <pcwalton> well
[21:41:10] <pcwalton> no it's not
[21:41:13] <pcwalton> sorry I don't mean sys
[21:41:17] <pcwalton> I mean something else like Bounded
[21:41:26] *** Parts: riley (riley@8BA43816.9AA11D69.65DDFA89.IP) (Leaving...)
[21:41:35] <erickt> pcwalton: I never quite understood why the "for" was needed. Do you know if there is an argument for it somewhere?
[21:41:42] * pcwalton is tired of defending this change
[21:41:53] <tikue_> trait Size<T> { fn size_of<T> { sys::<for Self>::size_of() } }
[21:42:02] <tikue_> is that what it'll look like?
[21:42:06] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: night)
[21:42:10] <engla> no
[21:42:10] <pcwalton> it is needed because "for" is not part of the type parameter list
[21:42:17] <pcwalton> before I made this change
[21:42:39] <pcwalton> trait Foo<T,U> { fn f<X,Y>() -> Self { ... } }
[21:42:40] <engla> you don't have to defend it, just explain it I guess
[21:42:47] <pcwalton> how do you invoke this
[21:42:50] <erickt> pcwalton: sorry, I hope you don't take me as attacking this idea, I'm fine with the change, I was just curious
[21:42:53] <pcwalton> with explicit type parameters
[21:42:57] <engla> erickt: the current workaround is demonstrated in  std::num::Primitive::bits
[21:43:03] <pcwalton> you had to do this
[21:43:04] <erickt> thanks engla
[21:43:07] <kimundi> pcwalton: No need to defend :) Just explain. So you're planning to require the keyword 'for' to seperate Self type from regular type params on trait, right?
[21:43:25] <pcwalton> Foo::f::<T,U,Self,X,Y>
[21:43:32] <brson> pcwalton: if you could reexport static fns then where would the trait's typarams go?
[21:43:42] <pcwalton> brson: good point
[21:43:48] <pcwalton> e.g. Foo::f::<int,float,i8,i16,i32>()
[21:43:55] <pcwalton> where i8 is the self type
[21:43:58] <pcwalton> this is pretty insane
[21:44:08] <pcwalton> now with my proposal it is
[21:44:23] <pcwalton> Foo::<for i8,int,float>::f::<i16,i32>()
[21:44:39] *** Quits: lmandel (lmandel@moz-E80E0719.dsl.bell.ca) (Ping timeout)
[21:44:39] <pcwalton> which makes it obvious where the type parameters go
[21:44:43] <kimundi> which is a definity improvement
[21:45:09] <miza> https://gist.github.com/mikezaby/7638bb5c2a1be84ba272
[21:45:11] <acrichto> pcwalton: you mentioned that it wasn't fully agreed on yet?
[21:45:15] <miza> why i cant do this?
[21:45:17] <pcwalton> acrichto: the "for Self" isn't fully agreed on
[21:45:25] <maik> why do we even need to declare the type parameters in Foo for f if f doesn't need them?
[21:45:28] <tikue_> pcwalton: you mean in default methods?
[21:45:34] <pcwalton> in general
[21:45:40] <pcwalton> has nothing to do with default methods
[21:45:41] <Eridius> pcwalton: my only question is why use the `for` keyword instead of just always making Self first, i.e. `Foo::<i8,int,float>::f::<i16,i32>()`?
[21:45:49] <kimundi> I guess people are just wondering if the 'for' keyword is a grammar necessarity, or just to seperate it from the regular type params
[21:45:50] <pcwalton> because Self is special in Rust
[21:46:01] <pcwalton> it's not Haskell
[21:46:13] <kimundi> Makes sense.
[21:46:17] <Eridius> ok
[21:46:24] <pcwalton> for better or worse we have this hidden type parameter "Self"
[21:47:39] <tikue_> miza: you moved the closure
[21:47:41] <erickt> pcwalton: is there an issue number for finishing up the Trait::<for T>::method()? I'd like to tag a fixme with it
[21:47:52] <pcwalton> erickt: I don't think there is but feel free to file one
[21:48:01] <erickt> Ok
[21:48:14] <tikue_> miza: you moved it into the function call_closure_with_ten. you can't use it again after moving it
[21:49:15] <tikue_> pcwalton: so the `for Self` would be in a function declaration of a trait, right?
[21:49:43] <pcwalton> it's when you call a static trait method with explicit type parameters, or you call a static impl method with explicit type parameters
[21:50:35] <erickt> pcwalton: what would call this feature? "Finish moving Trait typarams from the method to the trait"?
[21:50:48] <pcwalton> I would just say "ability to specify self parameter in static method call"
[21:51:53] *** Quits: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[21:51:56] <erickt> Ok
[21:52:05] *** Quits: robarnold (rob@BD56354E.DB510C09.6E370BFC.IP) (Ping timeout)
[21:52:39] <kimundi> pcwalton: "[type is ...] an alias that doesn't participate in import resolution" - Do you mean you can't import it, can't see it if it's imported, or both?
[21:52:40] <miza> tikue: could i do this in some way?
[21:52:45] <pcwalton> you can't import *from* the type
[21:52:56] <pcwalton> i.e. you can't import static methods from it
[21:53:31] <miza> i try also to copy but i cant
[21:53:38] <pcwalton> you can't copy closures
[21:53:41] <kimundi> Right, is that an limitation, or the reason type exists to begin with?
[21:53:42] <pcwalton> this is needed for soundness
[21:54:01] <pcwalton> kimundi: because if you could then we would have to consider "type" as part of the import graph and then you would get way too many cyclic import errors
[21:54:58] <kimundi> pcwalton: I  guess what I'm asking is how "pub use Foo = Bar;" differs from "pub type Foo = Bar"
[21:55:26] <pcwalton> right now, static methods are accessible under Foo for pub use and are not accessible under Foo for pub type
[21:56:12] <kimundi> but both are aliases to the same item, and interchangeable usable with it?
[21:56:15] <pcwalton> yes
[21:56:16] <tikue_> miza: you can give a pointer to the closure
[21:56:18] <tikue_> lol
[21:56:23] <tikue_> idk if this is "good" but
[21:56:34] <pcwalton> unless you're talking about static methods then they're totally interchangeable
[21:56:35] <tikue_> https://gist.github.com/tikue/2332e2bdcc30230a5002
[21:56:35] *** AutomatedTester|mtg is now known as AutomatedTester
[21:56:39] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[21:56:40] <tikue_> miza: ^
[21:57:01] <kimundi> So, the only difference between type and pub use is that you can't import from a type... Why have type at all then?
[21:57:19] <kimundi> You meantion cyclic import erros, but wouldn't hose exist with pub use anyway?
[21:57:30] <miza> tikue_: weird :p
[21:57:41] <tikue_> miza: idk why it works
[21:57:43] <pcwalton> because type can have type parameters
[21:57:45] <miza> ok i dont need this just playing to understund
[21:57:50] <pcwalton> for one
[21:58:02] <erickt> pcwalton: is the `for` in `::<for T>` required to help properly parse the path? Or is it just a hint for the user that this part of the path is different from another part of the path?
[21:58:23] <kimundi> pcwalton: Ah, so 'type' allows you to reshuffle/compct the type parms too, while a pub use only exports the name?
[21:58:27] <pcwalton> kimundi: yes
[21:58:43] <tikue_> pcwalton: would it be impossible to support auto dereferencing of closures when calling them?
[21:58:44] <pcwalton> also it doesn't participate in import resolution
[21:58:56] <pcwalton> which means that the import resolution phase doesn't consider them when checking for cyclic imports
[21:59:01] <pcwalton> for more details... read resolve code :)
[21:59:29] <pcwalton> tikue_: not impossible but I am hesitant to add more autoderef to rust
[21:59:42] <tikue_> yea
[21:59:44] <tikue_> fair enough
[21:59:46] <pcwalton> erickt: it is not required but for the reasons I outlined before I am in favor of it
[22:00:05] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[22:00:16] <erickt> pcwalton: cool. I made https://github.com/mozilla/rust/issues/8888 for you. Feel free to edit in any other bits that I missed
[22:00:19] <zol> tikue_: I agree about the enum. If I want variable size of Node's, would 
[22:00:22] <pcwalton> erickt: great, thanks
[22:00:24] <zol> rusti: enum Tree<T> { Leaf(T), Node { children: ~[@Goal]} }
[22:00:25] -rusti- <anon>:5:53: 5:57 error: use of undeclared type name `Goal`
[22:00:25] -rusti- <anon>:5          enum Tree<T> { Leaf(T), Node { children: ~[@Goal]} }
[22:00:25] -rusti-                                                               ^~~~
[22:00:25] -rusti- error: aborting due to previous error
[22:00:25] -rusti- application terminated with error code 101
[22:00:55] <tikue_> rusti: enum Tree<T> { Leaf(T), Node { children: ~[T] }}
[22:00:56] -rusti- ()
[22:01:01] <tikue_> oh that's wrong
[22:01:08] <tikue_> rusti: enum Tree<T> { Leaf(T), Node { children: ~[Tree<T>] }}
[22:01:10] -rusti- ()
[22:01:34] <zol> tikue_: Oh, this feels so magical. :) 
[22:01:42] <tikue_> :)
[22:01:48] <tikue_> rust is beautiful
[22:01:48] <tikue_> !
[22:02:35] <tikue_> miza: there's a better way
[22:02:47] <tikue_> miza: https://gist.github.com/tikue/2332e2bdcc30230a5002
[22:03:31] <miza> tikue_: hmm ok
[22:03:47] <miza> tikue_ but this cant access local variables
[22:03:51] <tikue_> you're right
[22:04:03] <zol> tikue_: How would I instantiate my Tree<>? let a: Tree<int> = Node { children: ... }?
[22:04:30] <olsonjeffery> bstrie: upon closer inspection of that braineaters account.. it appears to be some kind of novelty account. i almost wonder if the responses are genearted in some way.
[22:04:30] <kimundi> pcwalton: Hm, I'm still not sure what's so important about them not participating in import resolution/what that actually means. What would be an example of an cyclic import error that you're talking about? I'd read the resolve code if I understood more about the compiler internals to actually know what's what :(
[22:04:52] <tikue_> miza: the other way allows capturing -- https://gist.github.com/tikue/2332e2bdcc30230a5002#file-closure2-rs
[22:04:57] <tikue_> it's just not pretty
[22:04:58] <pcwalton> kimundi: resolve will fail if it you try to make cycles with "pub use"
[22:05:05] <pcwalton> mod a pub uses from b, mod b pub uses from a
[22:05:14] <tikue_> zol: i'd just make it mutable
[22:05:18] <pcwalton> now if pub type == pub use
[22:05:23] <pcwalton> then now you will have a lot more cycles
[22:05:43] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[22:05:43] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/MpsIxA
[22:05:43] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[22:06:29] <tikue_> rusti: enum Tree<T> { Leaf(T), Node(~[Tree<T>]) } let mut my_tree = Node(~[]); my_tree.push(Leaf(1u)); my_tree
[22:06:34] <miza> tikue_: i got it, thanks
[22:06:35] -rusti- pastebinned 8 lines of output: http://ix.io/7HB
[22:06:38] <kimundi> pcwalton: Hm, I don't get why? You get the cycles if you don't undertsand how pub use works, the compiler yells at you and you have documentation to explain what you did wrong
[22:06:51] <pcwalton> "pub type" gives you the freedom to make cycles
[22:06:57] <tikue_> rusti: enum Tree<T> { Leaf(T), Node(~[Tree<T>]) } let mut my_tree<uint> = Node(~[]); my_tree.push(Leaf(1u)); my_tree
[22:06:57] -rusti- <anon>:5:67: 5:68 error: expected `;` but found `<`
[22:06:57] -rusti- <anon>:5          enum Tree<T> { Leaf(T), Node(~[Tree<T>]) } let mut my_tree<uint> = Node(~[]); my_tree.push(Leaf(1u)); my_tree
[22:06:57] -rusti-                                                                             ^
[22:06:57] -rusti- application terminated with error code 101
[22:07:00] <pcwalton> if pub type == pub use then you don't have that freedom anymore
[22:07:05] <pcwalton> I strongly suspect that will break code
[22:07:08] <tikue_> rusti: enum Tree<T> { Leaf(T), Node(~[Tree<T>]) } let mut my_tree: <uint> = Node(~[]); my_tree.push(Leaf(1u)); my_tree
[22:07:09] -rusti- <anon>:5:69: 5:70 error: expected type, found token LT
[22:07:09] -rusti- <anon>:5          enum Tree<T> { Leaf(T), Node(~[Tree<T>]) } let mut my_tree: <uint> = Node(~[]); my_tree.push(Leaf(1u)); my_tree
[22:07:11] -rusti-                                                                               ^
[22:07:14] -rusti- application terminated with error code 101
[22:07:26] <kimundi> pcwalton: Ah, so it's an problem of not being able to express something.
[22:07:29] <pcwalton> yes
[22:07:30] <Eridius> tikue_: .push() isn't going to work
[22:07:34] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[22:07:37] <tikue_> Eridius: why is that?
[22:07:44] <tikue_> oh it's not a newtype struct
[22:07:46] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[22:07:46] <ghrust> 01[13rust01] 15erickt created 06cleanup (+3 new commits): 02http://git.io/o_vShQ
[22:07:46] <ghrust> 13rust/06cleanup 14b94d5c5 15Erick Tryzelaar: fix various warnings
[22:07:46] <ghrust> 13rust/06cleanup 145fee4ef 15Erick Tryzelaar: rustc: capitalize types in rscope.rs
[22:07:46] <ghrust> 13rust/06cleanup 14c2beeac 15Erick Tryzelaar: std: Add a fixme for when we add Trait::<for T>::static_method()
[22:07:47] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[22:07:58] <erickt> ack! wrong repo!
[22:08:19] <acrichto> at least you didn't overwrite master, I did that once by accident :(
[22:08:20] <erickt> bah. anyone mind if I delete that branch?
[22:08:21] *** Joins: enticeing (user@CB864A86.D932A275.5037098C.IP)
[22:08:28] <pcwalton> erickt: go ahead. I've done that many times :)
[22:08:34] <tikue_> rusti: enum Tree<T> { Leaf(T), Node { children: ~[Tree<T>] } } let mut my_tree: <uint> = Node { children: ~[] }; my_tree.children.push(Leaf(1u)); my_tree
[22:08:36] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[22:08:36] <ghrust> 01[13rust01] 15erickt 04deleted 06cleanup at 14c2beeac: 02http://git.io/GOItuQ
[22:08:36] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[22:08:36] -rusti- pastebinned 4 lines of output: http://ix.io/7HC
[22:08:48] <tikue_> rusti: enum Tree<T> { Leaf(T), Node { children: ~[Tree<T>] } } let mut my_tree: Tree<uint> = Node { children: ~[] }; my_tree.children.push(Leaf(1u)); my_tree
[22:08:50] -rusti- pastebinned 5 lines of output: http://ix.io/7HD
[22:09:02] <tikue_> aw jeez
[22:09:12] <tikue_> that's frustrating. would have to pattern match
[22:09:13] <Eridius> tikue_: the problem is you're not matching on my_tree to see what variant it is
[22:09:17] <tikue_> yeah :\
[22:09:22] <enticeing> I'm still having problems with rust-bindgen
[22:09:32] <Eridius> tikue_: more likely you need to impl Tree and define things like .push() that maintain whatever tree invariants you want
[22:09:50] <enticeing> It can't seem to find libclang on its own, and when i point it to the right directory i get a lot of undefined reference errors
[22:10:10] *** Quits: maik (maik___@moz-B08A740.dip0.t-ipconnect.de) (Ping timeout)
[22:10:38] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[22:10:39] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/uw5zfA
[22:10:39] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[22:10:41] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[22:10:41] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/Sg4KFQ
[22:10:41] <ghrust> 13rust/06auto 148464ee0 15Tim Chevalier: rustc: Change a stray error! statement to debug!
[22:10:41] <ghrust> 13rust/06auto 143c10070 15Tim Chevalier: std: Add a file-renaming function to std::os
[22:10:41] <ghrust> 13rust/06auto 1419dfddf 15Tim Chevalier: rustpkg: Add a not_a_workspace condition
[22:10:43] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[22:11:21] <zol> tikue_: Maybe the struct variant works better? 
[22:11:41] <enticeing> is there a specific way i should be building rust-bindgen ?
[22:12:00] <kimundi> pcwalton: That's an example of a type cycle that you couldn't do with pub use, right? - https://gist.github.com/Kimundi/6394806
[22:12:02] <erickt> r? https://github.com/mozilla/rust/pull/8889
[22:12:23] <kimundi> no, wait... that's not an cycle
[22:12:24] <tikue_> rusti: enum Tree<T> { Leaf(T), Node { children: ~[Tree<T>] } } let mut my_tree: Tree<uint> = Node { children: ~[] }; match my_tree { Node { ref mut children } => children.push(Leaf(1u)), _ => () } my_tree
[22:12:27] -rusti- pastebinned 7 lines of output: http://ix.io/7HE
[22:12:36] <pcwalton> kimundi: yeah I think so.
[22:12:54] <tikue_> rusti: enum Tree<T> { Leaf(T), Node { children: ~[Tree<T>] } } let mut my_tree: Tree<uint> = Node { children: ~[] }; match my_tree { Node { children: ref mut children } => children.push(Leaf(1u)), _ => () } my_tree
[22:12:55] -rusti- Node(~[Leaf(1)])
[22:12:58] <tikue_> lol
[22:13:02] <tjc> erickt: r+'ed
[22:13:14] <tikue_> zol: so with enums it's easy to construct and a bit trickier to modify i guess
[22:14:11] <zol> tikue_: Yeah, thanks!
[22:14:13] <tikue_> rusti: enum Tree<T> { Leaf(T), Node { children: ~[Tree<T>] } } let mut my_tree: Tree<uint> = Node { children: ~[Leaf(1u), Leaf(2u)] }; my_tree
[22:14:16] -rusti- pastebinned 4 lines of output: http://ix.io/7HF
[22:14:24] <jclements> ooh, I hate to roll in here and complain... it looks like "rust test rustc.rs" isn't working in master; apparently it wants CFG_VERSION to be defined. is running rust test rustc.rs not commonly done ... anymore...?
[22:14:27] *** Joins: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au)
[22:15:25] <sfackler> jclements: that's due to changes I made to the env! syntax extension. It used to return an empty string if the variable wasn't defined and now fails. you should be able to do
[22:15:34] <erickt> tjc: thanks!
[22:15:36] <sfackler> env CFG_VERSION=asdf rust test rustc.rs
[22:15:58] <jclements> sfackler: looks like I need a whole pile of env vars, but no problem: many thanks for the explanation!
[22:16:28] *** Quits: int3_ (int3_@moz-7B0110AD.mv.mozilla.com) (Client exited)
[22:16:48] *** Joins: int3_ (int3_@moz-7B0110AD.mv.mozilla.com)
[22:17:09] <zol> Is there a way to dump/inspect a variable or will I have to use println and fmt!?
[22:17:44] <sfackler> there is printfln!
[22:17:47] <acrichto> zol: the easiest way to do that is println!("{:?}", var)
[22:17:51] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[22:17:53] *** Quits: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net) (Ping timeout)
[22:18:12] <kimundi> pcwalton: I think I'm starting to understand 'type' now. It's not an full item-alias, but just an type-alias. Can use it in places where a type belongs, but not for, eg importing or constructing. In that light it makes sense to not being bale to import from it
[22:18:21] <pcwalton> right
[22:18:26] <pcwalton> that's the idea
[22:18:36] *** Quits: int3_ (int3_@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[22:18:49] *** Joins: ww242c (ww242c@moz-AFFC9D6C.lsanca.dsl-w.verizon.net)
[22:19:24] <benh> huh
[22:19:44] *** Quits: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net) (Input/output error)
[22:19:56] *** Joins: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net)
[22:19:57] <tikue_> zol: printfln!(Foo) works. also https://gist.github.com/tikue/e6dafe3c434b53fbb0cd
[22:20:03] <tikue_> that's how i would do the tree
[22:20:23] <tikue_> acrichto: is printfln! staying around? do u know
[22:20:31] <acrichto> tikue_: it's on the way out
[22:20:48] <acrichto> I'm also removing printxxx!(object)
[22:21:19] <tikue_> acrichto: there was talk a while back about getting something like python's print(*args). is that no longer on the table?
[22:21:20] <jorendorff> printxxx! ?!
[22:21:28] <brson> lol
[22:21:44] <tikue_> i think jack you were in favor of that no?
[22:21:48] <acrichto> tikue_: I don't recall that
[22:21:54] <acrichto> also may have just not been present
[22:21:58] *** Parts: ww242c (ww242c@moz-AFFC9D6C.lsanca.dsl-w.verizon.net) (Leaving)
[22:22:19] <tikue_> so having for instance print!("item {}".format(1), "item {}".format(2));
[22:22:29] <tikue_> or sorry those would be macros
[22:22:33] <jorendorff> didn't the language once have a debug output statement? istr, back when there were typestates
[22:22:53] <tikue_> print!(fmt!("item {}", 1), fmt!("item {}", 2))
[22:22:58] <acrichto> tikue_: I'm adding a format_args!() macro, were you talkinga bout that?
[22:23:06] <jorendorff> zol: kind of nice, i hadn't done this yet https://gist.github.com/jorendorff/6394884
[22:23:08] <tjc> jorendorff: It still does, debug!("foo %s", foo)
[22:23:11] <dbaupp> jorendorff: there's debug!("foo")
[22:23:13] <acrichto> tikue_: print! will be like C's printf
[22:23:14] <tjc> it doesn't have anything to do with typestate
[22:23:22] <miza> are you using rust 0.7 or you building from master?
[22:23:46] <dbaupp> acrichto, tikue_: (except using python .format syntax rather than printf syntax)
[22:23:47] <tikue_> jorendorff: but that's if you have a value at each node
[22:24:11] <jorendorff> it is, what i was curious about was the syntax for mutating methods
[22:24:33] <tikue_> jorendorff: what do you mean mutating methods?
[22:24:51] <jorendorff> see the "(&mut self"  bit?
[22:25:05] <dbaupp> cmr: why was this needed? https://github.com/mozilla/rust/pull/8886
[22:25:22] <cmr> dbaupp: accidentally disabled all the non-unit tests
[22:25:37] <dbaupp> cmr: oh... whoops!
[22:25:40] <cmr> yup!
[22:25:42] <tikue_> jorendorff: you're talking about how to mutate an object via methods?
[22:25:44] <acrichto> cycle time went way down though :)
[22:25:47] <jorendorff> yes
[22:26:06] *** Quits: threecreepio (jdp@moz-71E164C9.cust.bredbandsbolaget.se) (Quit: threecreepio)
[22:26:13] <tikue_> jorendorff: you can also pass in mut self instead of &self
[22:26:20] *** Joins: keret (Mibbit@moz-FEC8A276.laptops.usf.edu)
[22:26:24] <erickt> would anyone be opposed to me breaking up std::num::NumCast into multiple traits?
[22:26:33] *** Quits: keret (Mibbit@moz-FEC8A276.laptops.usf.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[22:26:34] <tikue_> jorendorff: which is used e.g. with the iterator methods to make method chaining easy
[22:26:48] <dbaupp> engla: ping
[22:26:57] <zol> jorendorff: me neither! :)
[22:27:12] <erickt> bjz: ping
[22:27:23] <zol> tikue_: Thanks a lot! :)
[22:27:44] <jorendorff> tikue_: when i remove the & on that line, i get "error: found `self` in ident position"
[22:27:52] *** Joins: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net)
[22:28:07] <tikue_> jorendorff: i don't think you want to remove the & from that method
[22:28:23] <jorendorff> tikue_: oh. what did you mean by "mut self instead of &self" then?
[22:28:35] <cmr> &mut self
[22:28:41] <tikue_> jorendorff: sometimes that's useful but not for what you were doing
[22:28:55] <tikue_> cmr: no i meant like methods that consume self
[22:29:06] <cmr> can't do that for self afaik
[22:29:11] <cmr> need to rebind in method body
[22:29:12] <tikue_> cmr: the iterators do that
[22:29:24] <tikue_> oh you mean you can't do ```mut self```
[22:29:30] <cmr> yes
[22:29:31] <tikue_> why not? isn't it a patterN?
[22:29:40] <cmr> not for self I don't think
[22:29:41] <tikue_> you can do mut var
[22:29:42] <tikue_> ah
[22:29:54] <cmr> other args yes
[22:30:00] <tikue_> damn self
[22:30:04] <tikue_> y u no pattern
[22:31:13] *** Joins: gunther (Mibbit@moz-F4E830A0.cable.mindspring.com)
[22:31:31] <engla> dbaupp: hi
[22:31:54] <tikue_> rusti: struct Foo; impl Foo { fn consume(self) { println!("no more {}", self); }} let foo = Foo; foo.consume();
[22:31:57] -rusti- pastebinned 10 lines of output: http://ix.io/7HJ
[22:32:10] <tikue_> rusti: struct Foo; impl Foo { fn consume(self) { println!("no more {:?}", self); }} let foo = Foo; foo.consume();
[22:32:11] -rusti- no more {}
[22:32:11] -rusti- ()
[22:32:30] *** Quits: fread2281 (zcarterc@moz-CB181B42.dia.static.qwest.net) (Ping timeout)
[22:32:41] *** Joins: threecreepio (jdp@moz-71E164C9.cust.bredbandsbolaget.se)
[22:32:53] <tikue_> acrichto: what would need to happen to get {:?} to print out the struct name
[22:32:59] <gunther> hi, it seems the live uv binding is gone in the master. anyone know why is that and what is the plan for the socket implementation?
[22:33:08] <dbaupp> engla: I was overexcited and commented on https://github.com/mozilla/rust/pull/8884 instead of waiting :)
[22:33:21] <cmr> gunther: it's still there
[22:33:37] <engla> dbaupp: can I answer the question here? I didn't really think about restrictions (inheriting) that were not needed
[22:33:44] <dbaupp> engla: yes
[22:33:46] <engla> overexcited, that's cool
[22:33:58] * dbaupp just couldn't wait to say things
[22:33:59] <cmr> gunther: std::rt::uv
[22:34:00] <dbaupp> :P
[22:34:03] <cmr> gunther: private interface though
[22:34:21] <gunther> thanks cmr. will take a look
[22:34:23] <engla> this ExactSizeHint could have its own method fn exact_size() with default implementation, but it's sort of unneeded
[22:34:26] <dbaupp> engla: I guess inheritance just makes the traits "more organised"?
[22:34:34] <cmr> gunther: http://seld.be/rustdoc/master/std/rt/uv/index.html
[22:34:48] *** Joins: fread2281 (zcarterc@moz-CB181B42.dia.static.qwest.net)
[22:34:50] <dbaupp> gunther: there's also higher level bindings in std::rt::io::net
[22:34:50] <engla> yes could inherit double-ended to make it clear that's its niche
[22:35:10] <cmr> dbaupp: (also not a public API)
[22:35:19] <dbaupp> cmr: which?
[22:35:47] <dbaupp> gunther: http://seld.be/rustdoc/master/std/rt/io/net/index.html
[22:35:59] <cmr> dbaupp: std::rt::io::net
[22:36:25] *** Quits: threecreepio (jdp@moz-71E164C9.cust.bredbandsbolaget.se) (Quit: threecreepio)
[22:36:31] *** Quits: sebcrozet (sebcrozet@moz-D8879CC3.w80-13.abo.wanadoo.fr) (Quit: Gone)
[22:36:35] <dbaupp> cmr: I thought that was the eventual public interface?
[22:36:43] <dbaupp> (surely std::rt::uv is even less public?)
[22:38:02] <cmr> dbaupp: the public interface will be moved into std::io, but I don't know how much it will change when it moves there
[22:38:05] *** Quits: ski (md9slj@moz-4BB5E0FF.studat.chalmers.se) (Ping timeout)
[22:38:30] <dbaupp> cmr: right
[22:38:36] <tikue_> who's been working on file i/o?
[22:38:41] <cmr> tikue_: olsonjeffery
[22:38:44] <tikue_> thx cmr
[22:38:49] *** Quits: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net) (Connection reset by peer)
[22:38:55] <tikue_> olsonjeffery: are file iterators something being considered?
[22:39:05] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[22:39:10] *** Joins: alisdair (textual@E1CEBB1A.D061F0C9.AA6AEE7B.IP)
[22:39:14] *** Quits: alisdair (textual@E1CEBB1A.D061F0C9.AA6AEE7B.IP) (Client exited)
[22:39:25] <dbaupp> <3 `for line in open('foo'): ...`
[22:40:01] <olsonjeffery> tikue_: what do you mean?
[22:40:05] <acrichto> tikue_: #[deriving(ToStr)]
[22:40:11] <olsonjeffery> like getting the files in a directory and iterating over them?
[22:40:14] <tikue_> acrichto: oh thank you! had no idea 
[22:40:20] <Aszarsha> Is there a way to make a closure which take a reference part/all of their environment ? Is is intended but not implemented or not intended at all ?
[22:40:34] <tikue_> olsonjeffery: rather, opening a file and then getting an iterator over the lines
[22:41:01] <olsonjeffery> tikue_: that would probably be implemented in a higher level trait then Reader
[22:41:03] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[22:41:04] <cmr> Aszarsha: Closures which reference their environment are &fn()
[22:41:06] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[22:41:15] <olsonjeffery> tikue_: it's not a priority for me, right now, though.
[22:41:23] <olsonjeffery> i have a bunch of api surface of libuv to add support for
[22:41:33] <tikue_> olsonjeffery: ohh ok. that makes snese
[22:41:33] <olsonjeffery> stat, directory operations, etc
[22:41:48] <tikue_> yeah true
[22:42:06] *** Quits: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au) (Quit: gavinb)
[22:42:30] <olsonjeffery> tikue_: first, i think i would want to implement some kind of BufferedFileStream
[22:42:40] <dbaupp> pcwalton: is the `steal` thing `fail`-safe?
[22:42:40] <Aszarsha> cmr: What i meant (sorry if i'm not clear), is if a closure can take a 'borrow pointer' to their environment ?
[22:42:43] <olsonjeffery> and do chomp, read_line(), etc on top of that
[22:43:00] <kimundi> pcwalton: I'm kinda confused. I tried on two differnt ways to cause seome kind of cyclic import error, but all seems to work: https://gist.github.com/Kimundi/6394994
[22:43:03] <Aszarsha> cmr: as more specifically to part of their environment
[22:43:05] <cmr> Aszarsha: yes, that's what &fn() is. But closures cannot themselves capture a borrowed pointer (I don't think)
[22:43:08] <pcwalton> dbaupp: yeah, I was thinking about that, I might have to lexically make unkillable
[22:43:18] <pcwalton> kimundi: you'd have to read the code to find the exact rules
[22:43:21] <pcwalton> I honestly don't remember them
[22:43:22] <tikue_> olsonjeffery: i was looking at some of the file i/o the other day -- what happens if you pass a vector not large enough to read the entire file? does it grow?
[22:43:29] <Aszarsha> cmr: ha ! thank you
[22:43:47] *** Joins: maik (maik___@moz-B08A740.dip0.t-ipconnect.de)
[22:43:48] <olsonjeffery> tikue_: no... FileStream has seek(2) semantics, by default
[22:43:58] <olsonjeffery> so you would do multiple read() calls until you reached eof
[22:44:04] <tikue_> ah gotcha
[22:44:12] <olsonjeffery> i should say FileStream has seek(2) semantics, period.
[22:44:29] <olsonjeffery> the actual libuv api is meant to be positional, ie cursor-free
[22:44:35] *** Quits: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com) (Quit: Leaving.)
[22:44:39] <tikue_> sorry, what is cursor-free?
[22:45:01] <olsonjeffery> tikue_: all calls to read/write pass an offset value to read/write from the beginning of the file
[22:45:15] <tikue_> ohh ok
[22:45:34] *** Quits: erickt (Adium@4530196F.50CA9683.D51AEBE4.IP) (Quit: Leaving.)
[22:45:37] *** Joins: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au)
[22:45:52] <olsonjeffery> so in order to out the length, in "real bytes" of a file, you have to read it all
[22:45:53] <tikue_> cmr: i think what Aszarsha was wondering is, let's say you had some local variable x: uint; instead of capturing the variable, could you take a reference to it within a closure, such that the variable itself didn't move into the closure
[22:46:04] <tikue_> olsonjeffery: gotcha
[22:46:06] *** Quits: eagen (eagen@8737942B.7A99C13A.B7961A98.IP) (Quit: Leaving)
[22:46:21] <olsonjeffery> but with seek(2) stuff. you can use SEEK_END
[22:46:21] <Aszarsha> tikue_: that's exactly what i meant ! :)
[22:46:25] <olsonjeffery> yedda yadda
[22:47:00] <engla> tikue_: someone needs to figure out a good api for iterators over a reader
[22:47:00] <cmr> I don't think that's possible but I'm not really firm on the intricacies of closures
[22:47:10] <tikue_> olsonjeffery: where can i read about seek(2) semantics? from a quick google search i've inferred i don't know the right keywords to look for
[22:47:26] *** Quits: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au) (Quit: gavinb)
[22:47:27] <olsonjeffery> tikue_: are you using linux or osx?
[22:47:30] <tikue_> osx
[22:47:33] <olsonjeffery> if so: `man 2 seek`
[22:47:36] <tikue_> great thx
[22:47:53] <olsonjeffery> already man 2 write|read
[22:48:02] <olsonjeffery> and pread pwrite, which may/may not be included in the same man page
[22:48:28] <tikue_> engla: what options are there other than line by line? word by word?
[22:48:33] <tikue_> character by character i suppose heh
[22:48:44] <engla> tikue_: and chunk by chunk
[22:48:47] <olsonjeffery> chomp() is char-by-char
[22:48:58] <engla> tikue_: how to handle the buffers is one of the issues
[22:49:01] <olsonjeffery> id want to do a BufferedFileStream that had an internal read size
[22:49:09] <olsonjeffery> and would read chunk-by-chunk and then chomp through it for newlines
[22:49:34] <Aszarsha> In c++, there is a model where you have some kind of pointer (say unique_ and shared_) and a pointer-view (raw * for unique and weak_ for shared_). Aren't borrow pointers kind of trying to be pointer-views for multiple types of base pointers (~ and &) ?
[22:50:07] <tikue_> olsonjeffery: that seems pretty good to me
[22:50:24] <tikue_> i guess the question comes down to what size to make the internal read size
[22:50:29] <engla> tikue_: the bytes part is simple. https://gist.github.com/anonymous/523c397a47766c78323f
[22:50:30] <olsonjeffery> 1028.
[22:50:31] <goffrie> Aszarsha: yes, but in a safe way
[22:50:34] <olsonjeffery> next question.
[22:50:39] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[22:50:39] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 142851e96 to 146a22595: 02http://git.io/N3iJvQ
[22:50:39] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[22:50:40] <tikue_> olsonjeffery: :P what makes you say that
[22:50:41] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[22:50:41] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/MCrW8g
[22:50:41] <ghrust> 13rust/06auto 14a80d79c 15Kevin Ballard: run: Process::new() should take &[Str] instead of &[~str] for args...
[22:50:41] <ghrust> 13rust/06auto 14a75d4ca 15bors: auto merge of #8203 : kballard/rust/process-new-args, r=erickt...
[22:50:41] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[22:50:48] <tikue_> is it an accepted standard for read size?
[22:51:01] <olsonjeffery> well, iirc the suggested_size for libuv is always 512
[22:51:22] <olsonjeffery> (this is, when libuv asks your buffer factry fn ptr for a buf, it provides a "suggested sized" input)
[22:51:41] <tikue_> engla: so char-by-char would simply convert the byte from that iterator 
[22:51:44] <Aszarsha> Wouldn't it be easier to explain the language if each pointer type had its own pointer-view but each view-type keeping the guaranties it can provide (compile time for ~ and runtime deterministic for @ ref-count, runtime underministic for @ gc, etc) ?
[22:52:19] <Aszarsha> Instead of saying & is compile time IF bound to... ELSE... ?
[22:52:50] <engla> tikue_: it can, but I think buffering a bit is better
[22:52:59] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
[22:53:01] <tikue_> Aszarsha: & is always ref counted i think
[22:53:03] *** Quits: bct (bct@moz-D3BEA05.ed.shawcable.net) (Ping timeout)
[22:53:09] <olsonjeffery> wow i was way off
[22:53:14] <olsonjeffery> suggested_size is always 64K
[22:53:17] <pcwalton> you mean @
[22:53:23] <tikue_> pcwalton: yes
[22:53:24] <pcwalton> but at this point I'm really thinking about removing @
[22:53:28] <pcwalton> GC<>
[22:53:46] <Eridius> but we needs the syntactical sugar!
[22:53:51] <Eridius> use gc::@;
[22:54:05] <tikue_> pcwalton: you don't like the @ sigil?
[22:54:10] <olsonjeffery> tikue_: anyways.. im fine w/ always using what libuv recommends. so there's an answer.
[22:54:16] <pcwalton> not really, no
[22:54:17] <Aszarsha> pcwalton: and not ~ to unique<> or UNIQ<> or else ?
[22:54:42] <dbaupp> tikue_: http://pcwalton.github.io/blog/2013/06/02/removing-garbage-collection-from-the-rust-language/
[22:54:43] <tikue_> pcwalton: i don't like it either, but i think that's because i've been pavlov'd into disliking it 
[22:54:47] <pcwalton> a sigil for ~ is fine but we keep getting people confused as to whether they use @ or &
[22:54:53] <Aszarsha> pcwalton: with a RC<> for ref-counted ?
[22:54:59] <pcwalton> Aszarsha: RC<> already exists
[22:55:01] <Eridius> pcwalton: oh? I didn't know folks got confused between @ and &. curious
[22:55:01] <cmr> Aszarsha: we already have Rc
[22:55:05] <tikue_> dbaupp: i meant just the sugar
[22:55:07] <pcwalton> coda hale recently, also that post on reddit
[22:55:35] <dbaupp> tikue): right
[22:55:43] <dbaupp> *tikue_
[22:56:01] <Eridius> what post?
[22:56:20] <dbaupp> pcwalton: that blog post gets people confused too, fwiw: "Rust is removing garbage collection."
[22:56:23] <tikue_> RC is for when you want multiple mutable references but don't require cycles right?
[22:56:26] <pcwalton> http://www.reddit.com/r/rust/comments/1le6vu/i_wrote_a_prototype_parser_combinator_in_rust_and/
[22:56:31] <pcwalton> dbaupp: I know. it's badly titled
[22:56:35] <cmr> tikue_: no, immutable references.
[22:56:36] <pcwalton> jonathan shapiro chewed us out for it
[22:56:48] <cmr> tikue_: RWArc is for mutable.
[22:57:12] <engla> RcMut can have several clones
[22:57:30] <Eridius> RC<Cell<T>>
[22:57:31] <engla> with dynamic "borrow check"
[22:57:47] <tikue_> Eridius: Rc<Cell<T>> === RcMut?
[22:57:52] <dbaupp> straw-poll: how does `#[deprecated] fn foo() { ... }` and `#[deprecated="will be removed in v0.9"] fn bar() { .. }` look?
[22:57:55] <pcwalton> btw, it's not clear at this point that @mut can become @Cell<> (or GC<Cell<>>) because of @mut Trait
[22:57:56] <pcwalton> sadly
[22:57:58] <engla> tikue_: basically
[22:58:00] <cmr> dbaupp: +1
[22:58:11] <tikue_> mm
[22:58:12] <acrichto> dbaupp: I think the ="message" should be required
[22:58:15] *** Quits: tikue_ (tkuehn@FDD42276.B9B3942C.689607DE.IP) (Quit: tikue_)
[22:58:27] <Eridius> dbaupp: looks fine to me
[22:58:29] <dbaupp> acrichto: even for `#[stable] fn baz() { .. }` ?
[22:58:32] <cmr> acrichto: I disagree.
[22:58:37] <Eridius> I don't think the message should be required
[22:58:43] * dbaupp is experimenting with https://github.com/mozilla/rust/issues/6875
[22:58:46] <acrichto> dbaupp: for #[stable] I don't think so
[22:58:47] <Eridius> if you require it you're just going to get #[deprecated="deprecated"]
[22:59:01] <acrichto> cmr Eridius: but then you start getting stuff all over the place marked #[deprecated] and you have no idea why
[22:59:20] <Eridius> acrichto: unless otherwise stated, you can assume it's deprecated because the author doesn't want you using it anymore ;)
[22:59:33] <Eridius> but unless the author has concrete plans to remove it at some specific milestone or date, what message would they write
[22:59:36] <acrichto> yeah but if you were using it the first question on your mind is "what do I do now"
[22:59:42] <cmr> acrichto: IMO the reason should be in the doc comment, not the attribute.
[22:59:49] <Eridius> I mean, sure, #[deprecated="use Foo instead!"] would be nice, but not every deprecated thing has a drop-in replacement
[22:59:52] *** Joins: mib_9uybip (mib_9uybip@moz-9B8221B3.rivrw1.nsw.optusnet.com.au)
[22:59:53] <acrichto> cmr: but this way it can be validated at compile time
[23:00:00] <Eridius> and I agree with cmr, the doc comment is the appropriate place to put the "use this instead" info
[23:00:08] <acrichto> Eridius: yeah but there's always a reason for deprecation
[23:00:28] <Eridius> but that reason may not always fit into a one-liner compiler message
[23:00:31] <dbaupp> (the plan is for the text to be printed when the deprecated warning/error is printed at the point-of-use.)
[23:00:34] <acrichto> placement-wise I think that a doc comment is alright but you just can't validate that it's there
[23:01:04] <acrichto> dbaupp: is this going to be serialized into crate metadata as well?
[23:01:06] <Eridius> acrichto: maybe have a lint that says deprecations need messages? But requiring a message to make the most basic use of the feature seems overly restrictive
[23:01:17] <dbaupp> acrichto: well, it's just an attribute; so yes
[23:01:32] <dbaupp> (attributes are all serialised aren't they?)
[23:01:35] <acrichto> Eridius: yeah it is kinda unfortunate but I'm also afraid of piling even more lint passes on for small things
[23:01:36] <cmr> dbaupp: (yes)
[23:01:40] <acrichto> dbaupp: oh if that's the case then nvmd
[23:01:55] <Eridius> acrichto: because of performance, or just worry about having too many lint options?
[23:02:06] <dbaupp> acrichto: lint needs a restructure anyway
[23:02:20] <cmr> It'd be nice if lint made a single pass over the AST (does it do that now?)
[23:02:22] <acrichto> Eridius: too many lint options
[23:02:26] <cmr> Where possible of course
[23:02:31] <cmr> acrichto: can't have too many lints IMO
[23:02:32] <acrichto> cmr: no, I had ideas for doing that though
[23:02:32] <dbaupp> cmr: kinda-not-really
[23:03:01] <acrichto> cmr: complexity-wise it'll still be N lints x AST size
[23:03:11] <Eridius> acrichto: meh. If you think there are too many lints, maybe just make some lint sets, like common-lints, pedantic-lints, all-lints, etc?
[23:03:12] *** Joins: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au)
[23:03:15] <acrichto> although in reality it may be faster
[23:03:28] <Eridius> so the average user can just turn on common-lints without having to decide about each individual one?
[23:03:38] <acrichto> Eridius: yeah I think I'd be ok with a lint if there were strong opposition to "must have string" by default
[23:03:57] <acrichto> Eridius: what would you think about warning about a missing deprecation reason?
[23:04:00] <acrichto> (by default)
[23:04:00] <Aszarsha> Is there a doc or a blog post explaining the rational behind freezing ?
[23:04:12] <zol> tikue: https://gist.github.com/Zolomon/6395123 -- it almost works..!
[23:04:26] <Eridius> acrichto: you mean have a lint, but set it to warn by default? I suppose that'd be ok with me
[23:04:33] <acrichto> Eridius: yeah
[23:04:44] <Eridius> I don't really care if it's warn or allow by default. I just think that the feature itself should be permissive enough to avoid users saying #[deprecated="Deprecated"]
[23:04:51] *** AutomatedTester is now known as AutomatedTester|AFK
[23:04:53] <dbaupp> I'm not really sure how this'll work with the current lint infrastructure... I don't see a way to do it without just having a lit for each level
[23:04:54] <zol> tikue: Apparently it doesn't like that GoalExplore is a derived trait of Goal
[23:05:35] <dbaupp> Eridius: we could have a lint to check if the text `deprecated` is > 50% of the message :P
[23:05:38] <Eridius> haha
[23:05:40] <acrichto> dbaupp: were you thinking of adding a 'deprecation' lint which warngs by default?
[23:05:48] <kimundi> Aszarsha: In general: Having you data immutable is good because it means less errors from accidentially modifying something, and also enables you to safely share the memory between tasks because no one will write to it
[23:05:50] <dbaupp> acrichto: something like that
[23:06:11] <dbaupp> acrichto: but there'll be experimental, unstable, stable, frozen and locked as well
[23:06:15] <acrichto> dbaupp: you should just be able to add a lint pass that iterates over expressions, finds function calls, resolves them, and then sees whether the target has a deprecated attribute
[23:06:31] <acrichto> would you enforce unstable/stable/frozen?
[23:06:37] <kimundi> Aszarsha: However, sometimes its useful to actually mutate siomething. The solution is to be able to freeze and unfreeze types depending on where they are stored
[23:06:38] <dbaupp> acrichto: yeah; that's not the problem: it's adding 3 more lints
[23:06:43] <dbaupp> acrichto: unstable yes
[23:06:51] <dbaupp> probably not the other ones (yet)
[23:07:14] *** Quits: Nisstyre (wes@moz-FD86289.netflash.net) (Quit: Leaving)
[23:07:17] <acrichto> dbaupp: #[unstable] would be convenient for std::unstable
[23:07:21] <miza> is there a way to write something ti sketch that not oneliner?
[23:07:34] <Aszarsha> kimundi: ho yeah, sure ! I'm kind of a const-nazi myself when coding in c++, but why freezing ? why can't the 'data' be mutable or immutable depending on the type of its alias ?
[23:07:42] <dbaupp> acrichto: so i'd need to check the whole module chain for attributes?
[23:07:53] <miza> in sketch*
[23:07:55] * dbaupp thinks this might get O(bad)
[23:07:55] <engla> miza: yes, see :help
[23:07:58] <Aszarsha> kimundi: instead of the type of its 'last' alias
[23:08:06] <acrichto> dbaupp: or just maintain state of what the current "unstable" level is, although then you'd need to be able to revert it so it may be a bad idea
[23:08:06] <strcat> Aszarsha: memory safety
[23:08:10] <kimundi> Aszarsha: what do you mean with alias?
[23:08:42] <dbaupp> acrichto: I mean, if you see `std::unstable::baz()` you'd need to check `baz` and then `unstable` (and then `std`)
[23:08:46] <strcat> Aszarsha: freezing doesn't exist because it can, but because it's required to prevent things like iterator invalidation (but there are a nearly endless list of memory corruption things you could do without it)
[23:08:51] <acrichto> dbaupp: yes that would be bad
[23:09:02] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[23:09:17] <dbaupp> acrichto: I leave it on function/method calls for now
[23:09:32] <acrichto> dbaupp: sounds good to me, I'm curious to see what this diff does :)
[23:09:43] <Aszarsha> ho right ! iterator invalidation could happen ! thank you, that's what I was looking for ! :-)
[23:10:28] <acrichto> is there a tool to list all the prettified symbols from a binary/library?
[23:10:42] <dbaupp> acrichto: objdump -t * | c++filt ?
[23:10:48] <strcat> Aszarsha: another common one would be changing the type of an enum, while you had refs inside
[23:10:56] <acrichto> dbaupp: oh nice
[23:11:04] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[23:11:04] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14a75d4ca to 146a22595: 02http://git.io/N3iJvQ
[23:11:04] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[23:11:10] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[23:11:10] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/nExuHg
[23:11:10] <ghrust> 13rust/06auto 148464ee0 15Tim Chevalier: rustc: Change a stray error! statement to debug!
[23:11:10] <ghrust> 13rust/06auto 1434ed4e2 15Tim Chevalier: std: Add a file-renaming function to std::os
[23:11:10] <ghrust> 13rust/06auto 147cbdee1 15Tim Chevalier: rustpkg: Add a not_a_workspace condition
[23:11:12] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[23:11:14] <strcat> but it's mostly just about iterator/reference invalidation
[23:11:20] <acrichto> dbaupp: also re your coment on 8875, I'm aiming to fix that, but it wasn't as good as I thought
[23:13:28] <Aszarsha> Is there a way to remove this runtime validation of freezing (as well as array bounds check if there are) at compile time, or on a per-variable basis ?
[23:14:06] <dbaupp> only @mut has runtime validation?
[23:14:06] *** Joins: jgilbert (jgilbert@moz-4C088FCE.hsd1.ca.comcast.net)
[23:14:25] *** Quits: enticeing (user@CB864A86.D932A275.5037098C.IP) (Ping timeout)
[23:14:46] *** Joins: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com)
[23:15:13] <dbaupp> Aszarsha: and you can avoid bounds checks using iterators (if you just need to go from the ends), or using v.unsafe_get(i) and v.unsafe_set(i, elem)
[23:15:20] <zol> Is it possible to downcast an instance of a derived trait to its base trait? 
[23:16:16] <kimundi> Aszarsha: There is only runtime validation of freezing if you use @mut, all other are compile time
[23:16:41] *** Joins: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[23:17:06] *** Quits: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue_)
[23:17:09] <dbaupp> kimundi, Aszarsha: (RcMut also has runtime validation, as does task-local storage, just btw.)
[23:17:15] <Aszarsha> dbaupp: if I understood correctly, Arc, Rc and RcMut (other?) should do this runtime validation too, no ?
[23:17:26] <kimundi> Only RcMut
[23:17:27] <strcat> Rc and Arc are immutable
[23:17:38] <Aszarsha> RWArc then :p
[23:17:50] <kimundi> Immutable one don't need it as they can't be unfrozen
[23:17:53] <strcat> RWArc has a lock for safety, doesn't need that dynamic freeze stuff
[23:18:35] <Aszarsha> alright, I abdicate :-)
[23:19:51] <Aszarsha> So, is there a way to prevent that, like I would be an asserting depending on a compilation flag ?
[23:20:11] <SimonSapin> rusti: let a = ~"test"; a[1] = 0x80; a.as_bytes().to_owned()
[23:20:12] -rusti- <anon>:5:26: 5:29 error: cannot assign to immutable str content
[23:20:12] -rusti- <anon>:5          let a = ~"test"; a[1] = 0x80; a.as_bytes().to_owned()
[23:20:12] -rusti-                                    ^~~
[23:20:13] -rusti- error: aborting due to previous error
[23:20:13] -rusti- application terminated with error code 101
[23:20:18] <Aszarsha> Is in even the the language design goal to provide this kind of facilities ?
[23:20:20] <SimonSapin> rusti: let mut a = ~"test"; a[1] = 0x80; a.as_bytes().to_owned()
[23:20:21] <dbaupp> Aszarsha: just don't use @mut or RcMut?
[23:20:22] -rusti- ~[116, 128, 115, 116]
[23:20:36] *** Quits: kgriffs (Adium@moz-7E0D846A.aus1.rackspace.com) (Ping timeout)
[23:21:29] <Aszarsha> dbaupp: Don't I have to use them if I can't know the lifetime (through sharing or not for the matter) of my objects at compile-time ?
[23:21:40] <kimundi> Aszarsha: In general it's a bda idea to disable features that exist for memory safety without explicitly writing and reviewing the code to work that way ;)
[23:22:01] <dbaupp> Aszarsha: kinda, maybe. You can get a very long way with just ~ and & though.
[23:22:02] *** Quits: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au) (Quit: gavinb)
[23:22:15] <Aszarsha> kimundi: I understand that, that's precisely why I asked on a per-variable basis too ? :-)
[23:22:16] <dbaupp> enix: you're catching all the regressions!
[23:22:18] <SimonSapin> rusti: let mut a = ~"test"; a[1] = 0x80; (a.as_bytes().to_owned(), st
[23:22:19] -rusti- <anon>:6:4: 6:5 error: incorrect close delimiter: `}`
[23:22:19] -rusti- <anon>:6     };
[23:22:19] -rusti-              ^
[23:22:19] -rusti- application terminated with error code 101
[23:22:27] *** flaper87 is now known as flaper87|afk
[23:22:37] <SimonSapin> rusti: let mut a = ~"test"; a[1] = 0x80; (a.as_bytes().to_owned(), ::std::str::is_utf8(a.as_bytes()))
[23:22:39] -rusti- (~[116, 128, 115, 116], false)
[23:22:51] <dbaupp> acrichto, strcat: https://github.com/mozilla/rust/issues/8890 do we know which passes changed?
[23:23:12] <brson> strcat: what does it mean that non-inbounds pointer math 'doesn't exist in C++ either'?
[23:23:20] <brson> strcat: re https://github.com/mozilla/rust/pull/8807
[23:23:36] <acrichto> dbaupp: interesting... I will investigate that tonight
[23:23:37] <kimundi> If you absolutely need to circumvent array bounds checks, use iterators or unsafe_get and unsafe_set. If you need to circumvent dynamic borrow checking, juggle unsafe pointers around. But making safe things unsafe based on some global switch is bad :P
[23:23:39] <brson> strcat: why did we make this change?
[23:23:58] <brson> and why is ptr::offset unsafe now?
[23:24:26] <kimundi> Aszarsha: Ah, sorry. Per varibale: use unsafe functions that don't perform checks
[23:24:53] <benh> Isn't it undefined behavior in C++ to do pointer offsets past one past the end of an object, even if you don't deref it?
[23:25:01] <acrichto> brson: the unsafe part is at least because if it's not actually inbounds it produces undefined behavior from llvm iirc
[23:25:03] <strcat> brson: C/C++ define pointer arithmetic outside the bounds of an object (one byte past the end counts as in-bounds) as undefined
[23:25:06] <Aszarsha> kimundi: right, unsafe code. thanks :)
[23:25:30] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[23:25:33] <strcat> brson: a dereference outside the bounds of an object is always undefined, but with non-inbounds GEP you are allowed to index outside and then back inside
[23:25:35] <strcat> and then deref
[23:25:37] <brson> acrichto: only with GEP? not with the previous technique?
[23:25:43] <Eridius> acrichto: damn, your static fix didn't fix my windows link failure
[23:25:56] <strcat> brson: GEP can be used with/without the 'inbounds' qualifier
[23:25:58] <acrichto> brson: only with "GEP inbounds" if it's actually out of bounds is it underfined
[23:26:07] *** Joins: eatkinson (eatkinson@moz-183B900F.airbears.berkeley.edu)
[23:26:17] <SimonSapin> Assigning random bytes in a string should be unsafe: https://github.com/mozilla/rust/issues/8891
[23:26:43] <Eridius> wow, I didn't realize str even allowed index-assign
[23:27:00] <brson> acrichto: is this a measurable perf difference, and what are the consequencs of doing a non-inbounds offset? is it going to introduce memory unsafety?
[23:27:08] <acrichto> Eridius: what's the failure?
[23:27:19] <strcat> brson: an example is that without inbounds, vector iterators did 2 checks per iteration instead of 1
[23:27:20] <Eridius> acrichto: same as before. undefined reference to a few windows functions
[23:27:28] *** Quits: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net) (Quit: Leaving.)
[23:27:37] <Eridius> acrichto: I should just pull the extern fn declarations out of the generic function, and hope that fixes it, but I wish I could test it myself
[23:27:47] <strcat> brson: before, you could offset outside the object + offset back inside + deref, and it would be safe
[23:27:53] <acrichto> Eridius: can you paste me the code
[23:27:58] <strcat> now you can't do that with offset (but you can still convert to/from a uint)
[23:28:07] <acrichto> brson: from llvm : "With the inbounds keyword, the result value of the GEP is undefined if the address is outside the actual underlying allocated object and not the address one-past-the-end."
[23:28:27] <Eridius> acrichto: https://gist.github.com/kballard/55fbbbf6f93c71cdb52d
[23:28:42] <acrichto> brson: I take that to mean that LLVM will optimize assuming that it's always inbounds and if you're not you could actually create memory unsafety
[23:28:45] *** Joins: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[23:28:47] <brson> making ptr math unsafe is a major semantic change. we've always said that ptr math was safe - dereferencing pointers is unsafe
[23:28:55] <Eridius> acrichto: ok they're actually `use` declarations, not extern declarations. But those 4 functions there taken from kernel32 show up as undefined references when building libextra
[23:29:21] <acrichto> brson: hmm, perhaps I should revert and further discuss later
[23:29:28] <benh> I've always wondered whether your safety guarantees that extend beyond C's are actually obeyed by llvm :)
[23:29:39] <benh> or definedness rather
[23:29:40] <engla> brson: you can still cast to uint, add, and cast back to pointer type or define Add to do this
[23:30:00] <acrichto> engla: the problem with Add is that it hides the unsafety
[23:30:03] <strcat> I really don't think we want slow pointer arith via Add as the default
[23:30:18] *** Quits: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue_)
[23:30:21] <strcat> indexing outside the bounds of the object is still possible via uint conversions, but imo not useful
[23:30:27] *** Quits: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu) (Ping timeout)
[23:30:40] <acrichto> brson: although now that I think about it, we could just make offset a safe function
[23:30:52] <strcat> well before, offset was safe and there was offset_inbounds
[23:30:53] <acrichto> if dereferencing a * is always unsafe, then there's no harm passing them around
[23:30:59] <strcat> acrichto: there is harm
[23:31:09] <strcat> the GEP operation is undefined, if you use inbounds
[23:31:09] <acrichto> strcat: how so?
[23:31:17] <strcat> if offset is safe it can't be inbounds GEP
[23:31:18] <acrichto> what would that mean though?
[23:31:28] <strcat> acrichto: undefined behaviour, the program is not valid
[23:31:31] <strcat> no memory safety
[23:31:39] *** Quits: eatkinson (eatkinson@moz-183B900F.airbears.berkeley.edu) (Quit: eatkinson)
[23:31:39] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[23:31:42] <kimundi> you can't _calculate_ the ptr in safe code
[23:31:45] <acrichto> but you're never actually reading the memory?
[23:31:49] <strcat> acrichto: doesn't matter
[23:31:53] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[23:32:04] <engla> I guess UB would mean llvm can change its behavior between versions and between optimization settings
[23:32:10] <strcat> acrichto: non-inbounds GEP is well-defined if you index past the end
[23:32:16] <strcat> you *cannot* deref outside of the bounds
[23:32:18] <strcat> ever
[23:32:19] *** Quits: squiddy (squiddy@moz-779AB2F2.adsl.alicedsl.de) (Quit: Leaving)
[23:32:30] <strcat> inbounds GEP is not well-defined if you do pointer arith outside the object
[23:32:40] <strcat> all C pointer arith is inbounds
[23:33:01] <strcat> you can convert to/from integers like rust to avoid it
[23:33:20] <strcat> there are 3 ways to do pointer arith:
[23:33:31] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
[23:34:11] <benh> (How does C define object here? if I have typedef struct { int i; float f; } foo; foo foos[3]; and a pointer to foos[1].i, can i walk over to foos[2].f with that?)
[23:34:27] *** Joins: emartin (emartin@moz-96C98BDD.res.umontreal.ca)
[23:34:58] <strcat> benh: depends where the pointer came from
[23:35:18] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[23:35:28] <strcat> there are aliasing rules from what pointers are based on that you already have to obey
[23:35:46] <strcat> inbounds vs. non-inbounds GEP doesn't change the aliasing rules
[23:35:54] <benh> I assume aliasing rules only come into play when I start dereferencing things
[23:35:58] <strcat> yes
[23:36:01] <benh> I mean just with regards to the pointer arithmetic here
[23:36:17] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[23:36:30] <strcat> benh: if you take a pointer to a location inside the array, it's well-defined to offset it anywhere inside the array or 1 byte past the end
[23:36:33] <brson> what does llvm learn from pointer operations being inbounds? it can't know what the bounds are, so it's just taking my word that it's inbounds
[23:36:52] <benh> ok :)
[23:37:02] <strcat> brson: it knows that they don't wrap
[23:37:11] <Aszarsha> strcat: I think those inbound outbound rules are for segmented architectures... Can't you simply assume linear memory and be done with it ?
[23:37:26] <strcat> it's not about that
[23:37:30] <strcat> the rule is unrelated to hardware
[23:37:34] <strcat> as are the aliasing rules
[23:37:46] <strcat> the rules are there so LLVM optimization passes have something to work with
[23:38:00] <strcat> ok so the 3 levels of this:
[23:38:33] <strcat> 1) conversion to/from integers -> you can have a pointer to anywhere, but it's not allowed to alias something that was not part of the creation of integer
[23:38:36] <kimundi> pcwalton: Stray thought, do you think it would be a good idea to forbid declarations with the same name? Eg no "mod Foo; fn Foo() { ... }"
[23:39:18] <brson> strcat: why does not wrapping matter?
[23:39:33] <strcat> brson: wrapping means it has to add another check for wrapping back into the object, in a loop
[23:39:41] <strcat> there are other cases
[23:40:17] <brson> strcat: why does it have to do that? all we're doing is adding and subtracting numbers
[23:40:30] <strcat> brson: LLVM pointers aren't numbers, they have other semantic rules
[23:40:53] <strcat> they're not a representation of hardware pointers, they're a model of pointers into objects with aliasing rules
[23:41:15] <strcat> and the inbounds guarantee allows a lot of vectorization, elimination of checks, etc.
[23:41:27] <brson> but at runtime, ptr::offset is literally just doing addition
[23:41:34] <brson> why does any of this matter for ptr::offset
[23:42:11] <brson> ok, I can imagine
[23:42:19] <strcat> brson: it's not necessarily doing addition bit by bit
[23:42:21] *** Quits: RMF (RMF@moz-9A206CFB.dsl.telepac.pt) (Quit: Textual IRC Client: www.textualapp.com)
[23:42:26] <maik> bjz, ping
[23:42:30] <jclements> pcwalton: ping
[23:42:55] <strcat> brson: ok for example
[23:42:58] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[23:43:05] <strcat> lets say you have an array [a, b, c]
[23:43:29] <strcat> and you have a pointer based on b (say, you take a ptr to a field inside it)
[23:43:51] <strcat> it's always undefined behaviour to increment it inside c, and deref it (regardless of how we do pointer arith)
[23:44:16] <strcat> LLVM will assume that never happens
[23:44:48] <strcat> you'd have to add a lot of volatile qualifiers for stuff like that
[23:45:18] <dbaupp> how do I go std::x::foo() -> attributes on foo (i.e. cross-crate?)
[23:45:19] <brson> acrichto: no, let's keep it. the current behavior is going to be the best for optimizations, and producing undefined behavior for safe code is wrong. i'm just bent that such a major change happened while i wasn't looking. my fault
[23:45:30] <strcat> anyway what inbounds GEP does is make the actual arithmetic undefined, *if* a dereference would be undefined (with the exception of one-past-the-end)
[23:45:44] <strcat> since a deref of one-past-the-end is undef, but you are allowed to index there
[23:45:44] <acrichto> brson: yeah sorry about that, I didn't realize how far-reaching it was and it probably didn't get enough visibility
[23:46:33] <strcat> brson: originally we had just 'offset' using a uint conversion
[23:46:51] <strcat> I switched it to GEP (essentially the same semantics), and added offset_inbounds to use in places like the vec iterator
[23:47:15] <strcat> graydon didn't really like having both, since I couldn't actually come up with a use case for non-inbounds
[23:48:02] <benh> I was about to ask :)
[23:48:07] <strcat> and C/C++ don't have it, so it's clearly not a very useful thing to do (how will you actually safely point it back inside the object?)
[23:48:16] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[23:48:16] *** ChanServ sets mode: +ao dherman dherman
[23:48:33] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[23:49:54] <strcat> brson: we could have both again (offset using GEP, offset_inbounds using inbounds GEP), if there's a good reason for it
[23:50:38] <strcat> but the restrictions on when you can deref are still the same
[23:50:43] <benh> (Why is there an offset function rather than an overloaded + anyway?)
[23:51:06] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[23:51:16] <strcat> benh: Add trait is marked as safe
[23:51:35] <strcat> any implementation has to be safe
[23:52:02] <benh> Yeah, okay, I see. :(
[23:52:33] <strcat> so like
[23:52:43] <strcat> |                         [ object ]            |
[23:52:56] <Aszarsha> I'm really sorry to have so many questions :-) Why isn't mut part of the type signature ? (ex generics over T are overloaded with T and mut T)
[23:52:58] <strcat> with inbounds GEP, your pointer arith has to stay in those bounds
[23:53:20] <strcat> with non-inbounds GEP, you could wrap around back to the object with a huge offset, and then deref
[23:53:33] <strcat> or you could index outside like...
[23:53:38] <strcat> |            x            [ object ]            |
[23:53:44] <brson> strcat: what optimization did we get by changing ptr::offset to inbounds GEP/
[23:53:47] <strcat> but then that pointer can't be dereferenced
[23:54:01] <olsonjeffery> Aszarsha: "mut" is about how a value is stored in memory, not type
[23:54:08] <strcat> brson: iterators are now ptr offset + check against end ptr
[23:54:21] <strcat> with non-inbounds GEP they are ptr offset + check against end ptr + check against null
[23:54:31] <olsonjeffery> it appears in fn signatures because the parameters are specific how the values passed into a function are stored in memory
[23:54:39] <strcat> but it also can't see that they aren't infinite loops with non-inbounds
[23:54:45] <strcat> so it won't delete no-op loops
[23:55:05] *** Quits: true_droid (true_droid@moz-123FD9B8.beck.volia.net) (Client exited)
[23:55:07] <strcat> brson: originally I just solved this by adding offset_inbounds though
[23:55:14] <benh> strcat: this is pretty cool, thanks for the explanations :)
[23:55:39] <olsonjeffery> Aszarsha: otherwise `mut` comes up when storing a value within the local score via `let mut foo = bar` or some such
[23:55:58] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[23:56:13] <olsonjeffery> there's more to it than that, like when inferring the mutability of a referenced value (&mut foo, for example)
[23:57:00] <strcat> brson: we don't lose anything by also exposing a safe operation (beyond a tiny API size increase), but I don't think we gain anything either
[23:57:00] <Aszarsha> olsonjeffery: ok. why does it matter then ? if the value is stack allocated i expect nothing more that the value and some compiler-handled lifetime, if the value is on the heap I expect to receive a pointer. what does mut changes ?
[23:57:30] <strcat> brson: since you'd have to be very, very careful about somehow guaranteeing you index back inside the object before a dereference
[23:57:41] <kimundi> Aszarsha: And something like "fn foo(mut x: T)" doesn'T even mean anything for you, it's just sugar for bidning x mutable inside the module body
[23:57:41] <olsonjeffery> rusti: struct Foo { a: bool } let f = Foo{a:true}; f = false;
[23:57:42] -rusti- <anon>:5:57: 5:62 error: mismatched types: expected `main::Foo` but found `bool` (expected struct main::Foo but found bool)
[23:57:42] -rusti- <anon>:5          struct Foo { a: bool } let f = Foo{a:true}; f = false;
[23:57:43] -rusti-                                                                   ^~~~~
[23:57:43] -rusti- error: aborting due to previous error
[23:57:43] -rusti- application terminated with error code 101
[23:57:45] <brson> strcat: i'm still not sure this is unsafe. it seems like inbounds is just an assertion to enable better optimizations
[23:57:48] <olsonjeffery> rusti: struct Foo { a: bool } let f = Foo{a:true}; f.a = false;
[23:57:49] -rusti- <anon>:5:53: 5:56 error: cannot assign to immutable field
[23:57:49] -rusti- <anon>:5          struct Foo { a: bool } let f = Foo{a:true}; f.a = false;
[23:57:49] -rusti-                                                               ^~~
[23:57:49] -rusti- error: aborting due to previous error
[23:57:51] -rusti- application terminated with error code 101
[23:57:53] <olsonjeffery> rusti: struct Foo { a: bool } let mut f = Foo{a:true}; f.a = false;
[23:57:54] -rusti- ()
[23:58:01] <olsonjeffery> Aszarsha: ^
[23:58:12] <strcat> brson: it considers it undefined behaviour to violate the invariant you assert though
[23:58:24] <strcat> brson: as in C undef behaviour so...
[23:58:39] <strcat> if condition { invoke undefined behaviour } else { looks okay to LLVM }
[23:58:46] <strcat> it can delete the first branch
[23:59:01] <brson> yeah, ok
[23:59:37] <strcat> and if it was really smart it could assume the condition was false, and propagate it
[23:59:47] <olsonjeffery> rusti: struct Foo { a: bool } impl Foo { fn bar(&self, in: bool) { self.a = in; }  let mut f = Foo{a:true}; f.bar(false); f.a
[23:59:47] -rusti- <anon>:8:0: 8:1 error: file ended with unbalanced delimiters
[23:59:48] -rusti- <anon>:8 }
[23:59:48] -rusti-          ^
[23:59:48] -rusti- application terminated with error code 101
[23:59:54] <olsonjeffery> rusti: struct Foo { a: bool } impl Foo { fn bar(&self, in: bool) { self.a = in; }}  let mut f = Foo{a:true}; f.bar(false); f.a
[23:59:59] -rusti- pastebinned 8 lines of output: http://ix.io/7HL
