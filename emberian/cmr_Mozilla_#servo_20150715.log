[00:00:03] <pcwalton> but, I might fail and we'll have to back off to per-process.
[00:00:10] <njn> ok
[00:00:17] <pcwalton> does that seem OK? do you have a preference?
[00:00:23] <njn> the use of the trait object seems fundamental, but I'm no Rust expert
[00:00:36] <njn> I guess it's better if there's a single global one
[00:00:43] <njn> so that all the results get collated and printed in sync
[00:00:47] <pcwalton> ok, I'll see what I can do.
[00:00:53] <njn> but if it doesn't work, the other way can be made to be ok
[00:00:55] <njn> thanks
[00:01:13] <pcwalton> do you mind being the reviewer for this?
[00:01:23] <njn> intermingled output from multiple processes on the console could be ugly
[00:01:52] <njn> I'm happy to at least partially review; if there's stuff I don't understand I'll defer to someone else
[00:02:21] <pcwalton> ok
[00:02:22] *** Joins: till (till@moz-khrut1.dyn.telefonica.de)
[00:05:23] *** Quits: bjz (bjz@moz-puppgq.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[00:06:38] *** Quits: till (till@moz-khrut1.dyn.telefonica.de) (Ping timeout: 121 seconds)
[00:11:10] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[00:11:11] -ghservo- [13servo] 15bors-servo pushed 0 new commits to 06auto: 02http://git.io/vmZzf
[00:11:11] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[00:11:11] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[00:11:11] -ghservo- [13servo] 15bors-servo pushed 3 new commits to 06auto: 02http://git.io/vmZhi
[00:11:11] -ghservo- 13servo/06auto 14e5b1ec4 15Patrick Walton: script: Split `Pipeline::create` into chrome process and content...
[00:11:11] -ghservo- 13servo/06auto 14c2195c4 15Patrick Walton: compositing: Use the pre-existing script channel in the same-domain...
[00:11:11] -ghservo- 13servo/06auto 14e06eaa0 15bors-servo: Auto merge of #6618 - pcwalton:content-process-code-shuffling, r=larsbergstrom...
[00:11:11] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[00:16:50] <gw> wikipedia + gl - azure - skia https://i.imgur.com/OmOyg9O.png
[00:17:10] <pcwalton> gw: fantastic!
[00:17:12] <SimonSapin> nice!
[00:17:26] <pcwalton> I knew Wikipedia had a really simple display list.
[00:17:59] <gw> yep :) now to actually do some timings and experiment with some different batching / upload strategies
[00:18:03] <pcwalton> gw: I'm really curious in the performance numbers for asset rasterization (glyphs + images) + asset upload + drawing
[00:18:12] <pcwalton> do you have some ballpark initial numbers? I'm just curious
[00:18:22] <gw> nothing yet, but hopefully in the next day or so
[00:18:25] <pcwalton> awesome
[00:19:06] <pcwalton> are you just using freetype to rasterize glyphs?
[00:19:29] <gw> yea, no sdf yet. i'm hoping we can merge with your sdf work, so I haven't done anything there
[00:19:39] <pcwalton> well, the SDF uses freetype too :)
[00:19:44] <gw> true... :)
[00:19:52] <SimonSapin> are liguatures rasterized as a single glyph?
[00:19:55] <pcwalton> from what I've read it's really expensive to try to go straight from bezier curves -> SDF, as tantalizing at that would be
[00:20:02] <pcwalton> SimonSapin: yeah, the TextRun stores them that way.
[00:21:15] <gw> yeah, there is glyphy, which does do bezier -> sdf on gpu I believe, but it's quite slow
[00:21:21] <pcwalton> ah, cool
[00:21:46] <gw> although, using glyphy to build a normal atlas could be an interesting idea
[00:21:47] <SimonSapin> pcwalton: does that mean one "glyph" per word in arabic?
[00:22:03] <pcwalton> SimonSapin: it's per ligatureâ€¦ I dunno if that means per word
[00:22:07] <pcwalton> I don't know how arabic usually works
[00:22:28] <pcwalton> https://github.com/behdad/glyphy/blob/master/src/glyphy-sdf.glsl yeah, this is way expensive
[00:22:49] <pcwalton> copyright 2012, wow
[00:23:07] * pcwalton wonders what kind of HW could run that in 2012
[00:23:38] <gw> the glyphy demo runs at 60fps on my machine, but not sure how well it would go on mobile
[00:23:48] <pcwalton> interesting
[00:23:52] <pcwalton> maybe it's not as complicated as it looks
[00:24:02] <jack> gw: that loosk great. someone tweet from @ServoDev :)
[00:24:15] <pcwalton> let's hold off until we get some basic numbers
[00:24:24] <gw> and fix the text glyph bugs :)
[00:24:30] <pcwalton> I imagine the numbers will be good, but we should get them first :)
[00:24:56] <larsberg> I'm also happy to retweet things via @ServoDev so people get proper full attribution and suchlike for their work :-)
[00:25:03] *** Quits: MrZeus (MrZeus@moz-ecvk02.skybroadband.com) (Ping timeout: 121 seconds)
[00:26:06] * pcwalton is oddly fascinated by the mixture of the Google style guide and the GNU coding standards in glyphy
[00:28:32] <larsberg> Have you been following the style guideline conversation trainwreck on dev-platform? We can't get nrc's rustfmt in place soon enough :-)
[00:28:52] <pcwalton> I haven't
[00:28:56] * pcwalton is not sure he wants to
[00:29:05] * larsberg would not recommend it
[00:29:20] <SimonSapin> mrobinson: Iâ€™m off for tonight, please push your changes either on top of rustup_2015-07-10 or to some other branch and comment on https://github.com/servo/servo/pull/6591
[00:29:20] <crowbot1> PR #6591: Upgrade to rustc 1.3.0-dev (fddfd089b 2015-07-10) - https://github.com/servo/servo/pull/6591
[00:30:05] <pcwalton> for a nice style-related piece of mozilla fun, I recommend mwu's taxonomy of the 12 bool types that Firefox had in 2011 https://blog.mozilla.org/mwu/2011/07/28/the-twelve-booleans-of-mozilla/
[00:30:25] <pcwalton> mork_bool and realGLboolean being my favorite
[00:30:38] <mrobinson> gw: Nice! Are you using webrast?
[00:30:44] <pcwalton> it's not webrast, it's custom
[00:31:17] <SimonSapin> larsberg: thatâ€™s the kind of this Mark Folder Read is for :)
[00:31:18] <pcwalton> hopefully they'll be merged soon -- so far webrast has mostly tackled the hard stuff like SDF generation, complex clipping/batching interactions, and border radii
[00:31:19] <gw> mrobinson: just my own hacked up code for experiments for now, we will merge with webrast once we have a better idea of what techniques work well on real web pages I think
[00:31:35] <pcwalton> wikipedia barely uses any of it, so
[00:32:06] <pcwalton> mostly webrast is an experiment to see how simple of a shader I can use while still handling everything CSS can throw at me (minus filters/svg/canvas)
[00:32:36] <mwu> bool wasn't just about using a better type name though
[00:32:57] <mwu> otherwise we wouldn't have needed static analysis to switch over
[00:33:07] *** Quits: playjax (chatzilla@moz-m2t78f.optusnet.com.au) (Connection closed)
[00:33:10] <pcwalton> too many implicit conversions I guess?
[00:34:19] <mwu> home made bool types are really just uint8_ts, and some people actually depended on their home made bool types to hold values other than 0 or 1
[00:34:25] <mwu> some code, rather
[00:34:39] <pcwalton> oh, that's terrible
[00:34:44] <pcwalton> I'm sorry :)
[00:36:32] *** Quits: dzbarsky (Adium@moz-mukjmn.fios.verizon.net) (Quit: Leaving.)
[00:37:54] <pcwalton> I guess one way to think about the whole rasterizer thing is that there are two questions that need answering
[00:38:14] <pcwalton> (1) can a super simple rasterizer go significantly faster than CPU rasterization and/or Skia-GL
[00:38:27] <pcwalton> (2) can that super simple rasterization strategy scale up to CSS used by most sites
[00:38:36] <pcwalton> gw's preliminary work answers (1); webrast answers (2)
[00:38:50] *** Joins: zmike_ (discomfitor@moz-oek0ra.ct.comcast.net)
[00:39:13] <pcwalton> ("super simple" being a relative term of course)
[00:39:24] <pcwalton> maybe just "simple"
[00:40:40] *** Quits: Savago (Savago@moz-8hd.3b6.246.162.IP) (Client exited)
[00:40:42] <gw> that seems like a reasonable summary of the questions to answer
[00:50:14] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[00:50:14] -ghservo- [13servo] 15mrobinson pushed 1 new commit to 06rustup_2015-07-10: 02http://git.io/vmnLk
[00:50:14] -ghservo- 13servo/06rustup_2015-07-10 14efdf2cd 15Martin Robinson: Update to latest rust-layers, azure, and skia...
[00:50:14] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[00:50:54] <zofrex> mwu: I feel your pain. On the platform I work on for my day job, booleans are strings, truthy values include 1, 2, "1", "2", "true", "t", "yes", "y", falsey values 0, "false", and so on... and lots of code depends on it being "t" or "1" rather than truthy
[00:51:22] <mwu> fun
[00:51:47] <mwu> pretty sure that's even worse than what we had
[00:51:55] *** Quits: barosl (barosl@moz-tmp.qma.67.220.IP) (Ping timeout: 121 seconds)
[00:51:58] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[00:51:58] -ghservo- [13servo] 15bors-servo merged 06auto into 06master: 02http://git.io/vmZhi
[00:51:58] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[00:52:03] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[00:52:03] -ghservo- [13servo] 15bors-servo closed pull request #6618: script: Split `Pipeline::create` into chrome process and content process parts. (06master...06content-process-code-shuffling) 02http://git.io/vmqRB
[00:52:03] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[00:52:52] <pcwalton> \o/
[00:53:10] <pcwalton> e10s has an entry point now
[00:54:08] *** Quits: elemongw (textual@moz-9ppu2f.dynamic.cyta.gr) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[00:54:45] <mwu> though.. now that I look back at the bugs I found
[00:54:56] <mwu> there were some pretty great ones
[00:55:45] <mwu> (as part of removing PRBool)
[00:55:55] <mwu> eg. -5632 wasn't a valid default value to use for int prefs
[00:56:05] <pcwalton> what
[00:56:06] <mwu> but you can use any other integer
[00:57:05] <mwu> http://hg.mozilla.org/mozilla-central/rev/0fba4d8f69c5#l6.12
[00:58:13] <zofrex> mwu: oh my god that's amazing
[00:58:35] <pcwalton> wow
[00:58:56] <pcwalton> just under an #ifdef XP_OS2
[01:01:04] *** Joins: _Y_ (chatzilla@moz-u095h7.isp.telekom.rs)
[01:03:07] *** Joins: till (till@moz-khrut1.dyn.telefonica.de)
[01:07:37] *** Quits: till (till@moz-khrut1.dyn.telefonica.de) (Ping timeout: 121 seconds)
[01:09:26] <pcwalton> anyone have ideas as to the simplest memory allocator that one can write that has reasonable scaling?
[01:09:32] <pcwalton> I was thinking about a simple buddy allocator
[01:09:48] <zmike> pcwalton: it's definitely NOT tcmalloc
[01:09:52] <pcwalton> yeah :)
[01:09:56] <pcwalton> I know buddy allocators are bad generally but they're really easy to write
[01:10:03] <pcwalton> I just need something for display list shmem
[01:10:11] <gw> what are the allocation / free patterns?
[01:10:12] <pcwalton> and I don't think the "get jemalloc to allocate into an arena" is going to work
[01:10:33] <pcwalton> gw: fairly chaotic patterns, some long-lived, some not
[01:11:13] <pcwalton> it's the display items, so there will be a big up-front allocation for first paint, and then a relatively smaller amount of random frees/allocations
[01:11:19] <gw> are there a lot of different alloc sizes?
[01:11:21] <pcwalton> as DOM nodes get removed and added
[01:11:31] <pcwalton> yeah, I think so
[01:11:38] <gw> how about just an array of fixed size pools with an internal free list
[01:11:38] <pcwalton> text runs are really big, display items are small
[01:11:55] <pcwalton> hmm, yeah, I should look at how segregated the size classes are
[01:12:31] <pcwalton> that's a good idea if they're segregated well
[01:12:45] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Ping timeout: 121 seconds)
[01:14:10] *** Quits: FreeFull (freefull@moz-147vhh.range31-48.btcentralplus.com) (Ping timeout: 121 seconds)
[01:22:22] *** Quits: nattokirai (nattokirai@moz-86b4bs.bitcat.net) (Ping timeout: 121 seconds)
[01:22:22] *** Joins: slyu (slyu@moz-2hf62a.HINET-IP.hinet.net)
[01:22:41] *** Parts: slyu (slyu@moz-2hf62a.HINET-IP.hinet.net) ()
[01:22:47] *** Joins: nattokirai (nattokirai@moz-86b4bs.bitcat.net)
[01:24:16] *** Quits: laleh (Adium@moz-h8636h.mobile.uci.edu) (Quit: Leaving.)
[01:25:01] *** Quits: rohin (rohin@moz-6lrl3i.user.start.ca) (Ping timeout: 121 seconds)
[01:29:20] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[01:29:20] -ghservo- [13servo] 15michaelwu opened pull request #6628: Remove window field from domrectlist (06master...06slim-domrectlist) 02http://git.io/vmnZk
[01:29:20] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[01:29:49] *** Joins: mib_c4os2t (Mibbit@moz-hu6.nja.252.72.IP)
[01:31:58] *** Quits: valentin1 (icecold@moz-n6g5vp.net.upcbroadband.cz) (Ping timeout: 121 seconds)
[01:36:20] *** Quits: Nekit1234007 (nekit@moz-t2fg7e.broadband.iskratelecom.ru) (A TLS packet with unexpected length was received.)
[01:37:21] *** Quits: _Y_ (chatzilla@moz-u095h7.isp.telekom.rs) (Connection closed)
[01:38:14] <larsberg> It appears the rustup is ready to go (it builds with mrobinson's latest patches)...
[01:38:28] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[01:38:28] -ghservo- [13servo] 15pcwalton opened pull request #6629: profile: Make the time and memory profilers run over IPC. (06master...06profiler-ipc) 02http://git.io/vmncc
[01:38:28] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[01:38:32] <pcwalton> njn: r? https://github.com/servo/servo/pull/6629
[01:38:32] <crowbot1> PR #6629: profile: Make the time and memory profilers run over IPC. - https://github.com/servo/servo/pull/6629
[01:38:58] <larsberg> pcwalton: maybe r? #6591 to get the rustup in first?
[01:38:59] <crowbot1> Issue #6591: Upgrade to rustc 1.3.0-dev (fddfd089b 2015-07-10) - https://github.com/servo/servo/pull/6591
[01:39:51] <pcwalton> larsberg: LGTM
[01:40:03] <larsberg> pcwalton: great, thanks! approving...
[01:40:24] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[01:40:24] -ghservo- [13servo] 15bors-servo pushed 0 new commits to 06auto: 02http://git.io/vmncQ
[01:40:24] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[01:40:26] *** Joins: ghservo (ghservo@moz-0l2.5u0.30.192.IP)
[01:40:26] -ghservo- [13servo] 15bors-servo pushed 1 new commit to 06auto: 02http://git.io/vmnc7
[01:40:26] -ghservo- 13servo/06auto 149af229b 15bors-servo: Auto merge of #6591 - servo:rustup_2015-07-10, r=larsbergstrom...
[01:40:26] *** Parts: ghservo (ghservo@moz-0l2.5u0.30.192.IP) ()
[01:41:47] *** Quits: eddyb (eddyb@moz-pic.82i.25.188.IP) (Ping timeout: 121 seconds)
[01:42:05] *** Joins: eddyb (eddyb@moz-v6d.q07.26.188.IP)
[01:42:48] *** Quits: mib_c4os2t (Mibbit@moz-hu6.nja.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:44:29] *** Joins: dwins (dwins@moz-9sdv1c.va.comcast.net)
[01:44:36] *** Quits: dwins (dwins@moz-9sdv1c.va.comcast.net) (Quit: Leaving...)
[01:45:06] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[01:46:14] *** Quits: enaqx (enaqx@moz-dtk.cpv.163.188.IP) (A TLS packet with unexpected length was received.)
[01:52:38] *** Joins: enaqx (enaqx@moz-dtk.cpv.163.188.IP)
[02:02:48] *** Joins: rohin (rohin@moz-6lrl3i.user.start.ca)
[02:02:51] *** Quits: Rym (uid91135@moz-n2i7qm.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[02:04:12] *** Joins: till (till@moz-on9rls.adsl.alicedsl.de)
[02:08:34] *** Quits: till (till@moz-on9rls.adsl.alicedsl.de) (Ping timeout: 121 seconds)
[02:09:22] *** Quits: kimundi (kimundi@moz-lr69rq.56vm.o3ls.4fe2.2002.IP) (Ping timeout: 121 seconds)
[02:11:45] *** Quits: lerc (quassel@moz-e698gn.telstraclear.net) (Quit: No Ping reply in 180 seconds.)
[02:14:14] <njn> the GitHub/Servo workflow makes merge conflicts more infurating than the Bugzilla/Firefox workflow
[02:14:23] *** Joins: kimundi (kimundi@moz-ffdgkl.n3fm.urnq.57bc.2002.IP)
[02:14:59] <njn> doing it fully manually is easier IME than partially manually, partially automatically
[02:15:03] *** Quits: rohin (rohin@moz-6lrl3i.user.start.ca) (Ping timeout: 121 seconds)
[02:15:47] *** Joins: lerc (quassel@moz-e698gn.telstraclear.net)
[02:18:02] *** Quits: chotchki (chotchki@moz-39dgbp.fios.verizon.net) (Quit: This computer has gone to sleep)
[02:19:02] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[02:19:02] -ghservo- [13servo] 15bors-servo merged 06auto into 06master: 02http://git.io/vmnEB
[02:19:02] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[02:19:07] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[02:19:07] -ghservo- [13servo] 15bors-servo closed pull request #6591: Upgrade to rustc 1.3.0-dev (fddfd089b 2015-07-10) (06master...06rustup_2015-07-10) 02http://git.io/vqF00
[02:19:07] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[02:20:31] <frewsxcv> njn: in what ways does the github/servo workflow make it more difficult?
[02:25:05] *** Quits: enaqx (enaqx@moz-dtk.cpv.163.188.IP) (A TLS packet with unexpected length was received.)
[02:25:30] *** Quits: tikue (tim@moz-n71.k1b.0.198.IP) (Connection closed)
[02:25:49] *** Joins: enaqx (enaqx@moz-dtk.cpv.163.188.IP)
[02:29:55] *** Joins: playjax (chatzilla@moz-m2t78f.optusnet.com.au)
[02:30:29] *** Quits: lucasmartins (lucasmartin@moz-j36.7pu.2.177.IP) (Client exited)
[02:35:29] *** Joins: aravindavk (aravinda@moz-sk8.86b.171.122.IP)
[02:37:35] *** Quits: sneakyness (textual@moz-tmbr33.biz.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[02:43:11] <njn> frewscxv: every time there's a conflict I have to rebase, get r+ again, then wait for CI and merge conflict checking. The last half is slow and out of my control
[02:43:28] <njn> so every time it fails I get pulled away from whatever it was I had swtiched to
[02:43:44] <njn> with the Firefox way, all that stuff is manual, so it's under my control and I can do it all at once
[02:44:46] <njn> basically it comes down to how long it takes to find out you've hit conflicts; with the Servo way it's 30 or 60 or 90 minutes, with the Firefox way it's 1 or 2 minutes
[02:46:17] <larsberg> Don't you have to re-run all of the tests (as our CI does) and take more than 2 minutes? Or does Firefox allow people to just land stuff if they think the rebase over a conflict probably didn't affect anything since the last time they ran tests?
[02:46:25] <njn> and I feel like that lag after uploading the new version increases the likelihood someone has landed conflicts
[02:46:28] <njn> larsberg: exactly
[02:46:46] <njn> larsberg: and sometimes the "probably" is false; pros and cons
[02:47:16] <larsberg> That... terrifies me. But then, I've never worked without CI / autolanding (except on academic projects in school).
[02:47:24] <njn> larsberg: Firefox tests run after landing and then you get backed out if you caused a failure
[02:48:04] <njn> larsberg: it helps that Firefox has a working try server
[02:49:29] *** Quits: crowbot1 (nodebot@moz-2bpv8f.compute-1.amazonaws.com) (A TLS packet with unexpected length was received.)
[02:49:31] *** Joins: crowbot (nodebot@moz-sb3k94.compute-1.amazonaws.com)
[02:49:35] <frewsxcv> That is really scary.
[02:49:56] * frewsxcv strongly prefer the way Servo currently works to that
[02:50:21] <njn> Servo: if tests fail, the patch doesn't land;  Firefox: if tests fail, the patch gets backed out
[02:50:27] <njn> it's not *that* different
[02:50:54] <njn> it's fine if you prefer the Servo way, but it's not worth getting into a faint over
[02:52:56] <larsberg> Does firefox not have a lot of conflicting / patches so that you can easily back it out? I'd have thought that even with just a couple hundred patches a day the backout would have chain reactions (clearly not or this would be something that hits people). Maybe hg is also better about this than git / perforce
[02:54:28] <larsberg> Anyway, it's late my time, but I should sit down with somebody on the build automation side at the next workweek and bug them about it  :-)
[02:55:09] *** Quits: aravindavk (aravinda@moz-sk8.86b.171.122.IP) (Quit: Konversation terminated!)
[02:56:48] *** Joins: frogzilla (Mibbit@moz-hu6.nja.252.72.IP)
[03:00:54] *** Quits: frogzilla (Mibbit@moz-hu6.nja.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:04:59] *** Joins: till (till@moz-on9rls.adsl.alicedsl.de)
[03:06:38] *** Joins: nefzaoui__ (nefzaoui@moz-0u1.mcs.228.41.IP)
[03:08:41] *** Quits: nefzaoui_ (nefzaoui@moz-juh.4e9.227.41.IP) (Ping timeout: 121 seconds)
[03:09:18] *** Quits: till (till@moz-on9rls.adsl.alicedsl.de) (Ping timeout: 121 seconds)
[03:14:22] <mwu> larsberg: I've done things the gecko way and it sucks. carry on
[03:14:51] <mwu> we have to have humans working in every time zone to make it work
[03:15:24] <mwu> homu is always there, always watching, and does not care about your petty grumblings about merge conflicts
[03:18:22] *** Joins: FreeFull (freefull@moz-5141vd.range86-184.btcentralplus.com)
[03:22:56] *** Joins: chotchki (chotchki@moz-39dgbp.fios.verizon.net)
[03:23:44] *** chmanchester is now known as chmanchester|afk
[03:24:22] <mwu> larsberg: and yes, every so often, there's a huge pile of check ins all at the same time, and stuff breaks and people scramble to figure out what to backout/fix to get the tree back in order
[03:24:23] *** Quits: chotchki (chotchki@moz-39dgbp.fios.verizon.net) (Quit: Leaving)
[03:28:42] *** Joins: dzbarsky (Adium@moz-mukjmn.fios.verizon.net)
[03:36:27] *** Quits: enaqx (enaqx@moz-dtk.cpv.163.188.IP) (A TLS packet with unexpected length was received.)
[03:38:50] <jack> well one big difference is that we never ever close the tree :)
[03:39:21] <jack> At least not since rust upgrades became relatively painless, and even then it was only briefly
[03:44:37] *** Quits: mwu (mwu@moz-rcj0fv.nj.comcast.net) (Quit: Leaving)
[03:54:31] *** Quits: bdero (bran@moz-nr0176.b90n.1kaj.018d.2601.IP) (Ping timeout: 121 seconds)
[04:04:15] *** Joins: bombless (bombless@moz-r8j.puq.21.116.IP)
[04:04:22] <njn> can someone r+ my rebase of #6572, please?
[04:04:22] <crowbot> Issue #6572: Wire up the JS engine's memory reporting. - https://github.com/servo/servo/pull/6572
[04:05:12] <njn> I understand the homu way is the way of the future; I'm just noting that it's not totally perfect
[04:05:44] *** Joins: till (till@moz-on9rls.adsl.alicedsl.de)
[04:08:20] *** Quits: vikaton (uid59278@moz-0a9h81.ealing.irccloud.com) (Quit: Connection closed for inactivity)
[04:10:16] *** Quits: till (till@moz-on9rls.adsl.alicedsl.de) (Ping timeout: 121 seconds)
[04:12:58] <dzbarsky> jack: ping?
[04:14:25] <gw> njn: who did the previous r+ ? (just so I can add that in the bors line)
[04:15:42] <jack> dzbarsky: pong?
[04:17:14] <jack> reviewable seems to think there is nothing to review
[04:17:36] <dzbarsky> jack: had a question about traits and stuff. I'm looking at implementing something in Servo like nsIMutationObserver, would it work to have a MutationObserver trait and store a Vec<MutationObserver> on Document?  Or a Vec of boxes or something?
[04:18:17] <dzbarsky> jack: and would that avoid holding a ref to whatever object happens to implement MutationObserver?
[04:19:06] <gw> ah, finally found the rounding issue causing small glyphs to get cut off occasionally. now to actually work on batching
[04:20:44] <jack> dzbarsky: If you want a trait it has to be Box<Trait> or in something else that can deal with the size.
[04:21:06] <jack> I don't think you can have Vec<Trait>
[04:21:32] <jack> Do we not have other observers?
[04:21:34] <Manishearth> jack: nope, because the fat pointer will be broken
[04:21:49] <Manishearth> Vec<Box<Trait> or Vec<*Trait> or something
[04:21:53] <dzbarsky> jack: ok, that's what I figured.  and I'd need add_observer/remove_observer calls to keep the vector up to date, right?
[04:22:23] <dzbarsky> jack: I don't think so
[04:22:39] <jack> Yes. I assume each thing that is observable will need this.
[04:22:53] * jack isn't very familiar with nslMutationObserver
[04:23:38] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[04:23:38] -ghservo- [13servo] 15bors-servo pushed 0 new commits to 06auto: 02http://git.io/vmnQy
[04:23:38] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[04:23:38] <dzbarsky> well what gecko does is you just register to observe a document (or maybe window) and then nodes that are mutated inform the doc, and the observers get a callback
[04:23:39] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[04:23:39] -ghservo- [13servo] 15bors-servo pushed 2 new commits to 06auto: 02http://git.io/vmnQS
[04:23:39] -ghservo- 13servo/06auto 14c90be8e 15Michael Wu: Remove window field from domrectlist
[04:23:39] -ghservo- 13servo/06auto 14c83500f 15bors-servo: Auto merge of #6628 - michaelwu:slim-domrectlist, r=jdm...
[04:23:39] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[04:24:16] <dzbarsky> the mutation info includes the thing that mutated so you can just do nothing in your callback if you don't care
[04:31:21] *** Joins: kmicu (kmicu@moz-uga.edn.218.91.IP)
[04:32:36] <njn> gw: sorry, it was jdm
[04:33:27] <njn> gw: and it looks like he already re-approved
[04:33:33] <njn> yeah, 7 minutes ago
[04:35:41] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[04:35:51] <gw> njn: ah, cool
[04:37:34] *** Joins: nefzaoui_ (nefzaoui@moz-o23.2qm.228.41.IP)
[04:38:41] *** Joins: barosl (barosl@moz-tmp.qma.67.220.IP)
[04:39:18] *** Quits: nefzaoui__ (nefzaoui@moz-0u1.mcs.228.41.IP) (Ping timeout: 121 seconds)
[04:43:42] *** Joins: rn10950 (rn10950@moz-vfitoc.dyn.optonline.net)
[04:44:29] <dzbarsky> Manishearth: what would Vec<*Trait> do?
[04:47:55] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[04:47:55] -ghservo- [13servo] 15SimonSapin 04deleted 06rustup_2015-07-10 at 14efdf2cd: 02http://git.io/vmnFX
[04:47:55] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[04:48:43] <Manishearth> dzbarsky: oh by *Trait I meant "some kind of pointer"
[04:48:50] *** Quits: sawrubh (uid6719@moz-sr8l1j.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[04:48:56] <Manishearth> eg &Trait, Rc<Trait>, etc
[04:49:11] <Manishearth> you can use these if Trait was already boxed elsewhere
[04:49:42] <dzbarsky> Manishearth: ah got it
[04:50:12] <Manishearth> but Vec<Trait> won't work, because Vec<T> contains *one* raw pointer to T, and with dynamically sized types the info about the type (slice size, trait vtable, etc) is stored in the pointer instead of behind it
[04:50:29] <Manishearth> so you need one fat pointer for each, not one fat pointer to rule them all
[04:50:33] <dzbarsky> right, that makes sense
[04:52:19] <jack> Why no FatVec<T>? :)
[04:52:41] <Manishearth> jack: how would that work?
[04:52:53] <jack> You just allocate 2x the storage and store the fat poitners.
[04:53:19] <Manishearth> this is Rust, a data structure pointing to itself won't work
[04:53:46] <Manishearth> There's no way to make a fatvec leveraging existing smart pointer support
[04:53:57] *** Joins: nefzaoui__ (nefzaoui@moz-jvb.1uu.228.41.IP)
[04:54:03] <Manishearth> we'd instead need to represent it differently
[04:54:12] <Manishearth> and treat it like how we treat utf8 strs
[04:54:35] <Manishearth> so instead of *T, which is {*unsized T,  *vtable}
[04:54:56] <Manishearth> we store a Vec of {vtable, len, unsized T}, flat
[04:55:17] <Manishearth> indexing is O(n) now, but we have avoided extra allocation
[04:56:19] *** Quits: nefzaoui_ (nefzaoui@moz-o23.2qm.228.41.IP) (Ping timeout: 121 seconds)
[04:56:47] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[04:56:47] -ghservo- [13servo] 15bors-servo 04force-pushed 06auto from 14c83500f to 149af229b: 02http://git.io/A9I6iA
[04:56:47] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[04:56:51] *** Joins: ghservo (ghservo@moz-0l2.5u0.30.192.IP)
[04:56:51] -ghservo- [13servo] 15bors-servo pushed 2 new commits to 06auto: 02http://git.io/vmnNL
[04:56:51] -ghservo- 13servo/06auto 14d70fdc5 15Nicholas Nethercote: Wire up the JS engine's memory reporting....
[04:56:51] -ghservo- 13servo/06auto 14800c090 15bors-servo: Auto merge of #6572 - nnethercote:js-reporting, r=jdm...
[04:56:51] *** Parts: ghservo (ghservo@moz-0l2.5u0.30.192.IP) ()
[04:57:25] <dzbarsky> hmmm, I'm implementing MutationObserver for Range and trying to use a method that is in RangeMethods (also implemented for Range) but rustc claims it doesn't exist. any idea why it doesn't see it?
[04:57:37] *** Quits: nefzaoui__ (nefzaoui@moz-jvb.1uu.228.41.IP) (Quit: Ex-Chat)
[04:57:48] <dzbarsky> do I need to somehow tell it that the Range implements RangeMethods in the MutationObserver impl?
[04:57:56] <Manishearth> dzbarsky: is Range a trait?
[04:58:03] <dzbarsky> Range is a struct
[04:58:06] <Manishearth> okay
[04:58:09] <Manishearth> oh, our Range
[04:58:16] <dzbarsky> dom::range
[04:58:18] <dzbarsky> yea
[04:58:18] <Manishearth> dzbarsky: did you import the trait?
[04:58:27] <SimonSapin> can we get rid of it yet?
[04:58:37] <Manishearth> the compiler should ideally tell you that "this method exists on trait Foo, import it like so"
[04:58:37] <dzbarsky> I'm just defining it in range.rs (right above RangeMethods in case that matters)
[04:59:00] <Manishearth> wut
[04:59:01] <Manishearth> hm
[04:59:21] <Manishearth> dzbarsky: wait, JSRef<Range> implements rangemethods, no?
[04:59:54] <dzbarsky> impl<'a> RangeMethods for &'a Range { 
[04:59:58] <Manishearth> wha
[05:00:19] <Manishearth> oh, this is this Range
[05:00:59] <Manishearth> but how does this work o.o
[05:01:06] <Manishearth> oh im an idiot
[05:01:10] <Manishearth> forgot about the smup
[05:01:17] <Manishearth> this is what happens when you're out of the loop for a month
[05:01:21] <dzbarsky> heh
[05:01:29] <Manishearth> dzbarsky: so, firstly, make sure that you have an &Range
[05:01:32] *** Joins: jdm (jdm@moz-34mnpi.cpe.pppoe.ca)
[05:01:32] *** ChanServ sets mode: +qo jdm jdm
[05:01:37] <Manishearth> but you probably do
[05:01:56] <dzbarsky> actually I don't
[05:01:57] <Manishearth> if the method is &self or the impl is for &'a Mutationovserver
[05:02:06] <Manishearth> show the patch?
[05:02:07] <dzbarsky> ah, I didn't do &self
[05:02:11] <Manishearth> there we go
[05:02:19] <dzbarsky> probably need mut too
[05:02:19] <Manishearth> either use &self, or do impl Trait for &Foo
[05:02:34] <Manishearth> former is the usual Rust way of doing it, the latter is for DOM structs and stuff
[05:03:43] *** Quits: nonsensickle (nonsensickl@moz-4v0.gkd.16.182.IP) (Connection closed)
[05:04:42] <njn> so there's a memory reporter for the paint task, but at some point it was changed so it doestn' measure anything
[05:04:49] *** Joins: nonsensickle (nonsensickl@moz-4v0.gkd.16.182.IP)
[05:04:53] <Manishearth> wha
[05:05:10] <dzbarsky> Manishearth: lol I was also using the wrong method name...
[05:05:12] <njn> which feels kind of rude
[05:05:16] <Manishearth> ha!
[05:05:37] <Manishearth> dzbarsky: be thankful this isn't javascript
[05:06:28] <dzbarsky> oh yeah i've wasted countless time on that
[05:06:30] *** Joins: till (till@moz-on9rls.adsl.alicedsl.de)
[05:07:25] <njn> #6530 did it
[05:07:26] <crowbot> Issue #6530: Move LayerBuffer cache to the compositor - https://github.com/servo/servo/pull/6530
[05:07:42] * Manishearth -> meeting-thing
[05:09:24] <jdm> mmm, yeah
[05:09:49] *** Joins: mt2d2 (mt2@moz-ek040u.ph.cox.net)
[05:10:08] *** Quits: nonsensickle (nonsensickl@moz-4v0.gkd.16.182.IP) (Connection closed)
[05:10:52] *** Quits: till (till@moz-on9rls.adsl.alicedsl.de) (Ping timeout: 121 seconds)
[05:10:59] *** Joins: nonsensickle (nonsensickl@moz-4v0.gkd.16.182.IP)
[05:11:16] *** Joins: bogdan_maris (Instantbird@moz-662.esi.231.62.IP)
[05:13:32] <mt2d2> Is anyone else seeing a warning in paint_context.rs about unneeded mut? can take care of that quickly 
[05:14:55] *** Joins: waffles (waffles@moz-72q.v0d.227.220.IP)
[05:15:56] <jdm> mt2d2: go for it!
[05:16:24] <mt2d2> was busy trying to rebase another change, but saw that, easy peasy :) 
[05:17:51] *** Quits: waffles (waffles@moz-72q.v0d.227.220.IP) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[05:18:16] *** Joins: waffles (waffles@moz-72q.v0d.227.220.IP)
[05:18:32] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[05:18:32] -ghservo- [13servo] 15mt2d2 opened pull request #6630: Remove unused mut. (06master...06remove_unused_mut) 02http://git.io/vmnpV
[05:18:32] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[05:18:48] <njn> is there any rhyme or reason why sometimes port/chan terminology is used and sometimes sender/receiver is used?
[05:18:52] <dzbarsky> jdm: hey, can I get some advice on lifetimes?
[05:19:01] <jdm> dzbarsky: sure!
[05:19:19] <jdm> njn: yeah, they used to be called Ports and Channels in the literature and standard library
[05:19:27] <jdm> then everything changed when the fire nation attacked
[05:19:29] <Elaine> njn: port/chan is the "old" terminology from Rust, sender/receiver is new.
[05:19:49] <njn> jdm, Elaine: ok, thank you. It's driving me batty
[05:19:57] <dzbarsky> jdm: so I'm trying to store some MutationObservers in a document. MutationObserver is a trait implemented by dom::range::Range
[05:20:32] <dzbarsky> jdm: I'm not really sure what type I should store in, it seems like I can't use a Box because I can't move my Range into it, right?
[05:21:03] <dzbarsky> also, I tried to do HashSet<Box<MutationObserver>> and got errors about Eq not being implemented but maybe that's just because of Box?
[05:21:44] *** Joins: laleh (Adium@moz-hgq383.reshsg.uci.edu)
[05:22:02] <jdm> dzbarsky: when nox was looking into this, he was using something like weak pointers
[05:22:04] <dzbarsky> jdm: in theory I could impl it on RangeInner instead, but I think then borrowing inner as mut would panic as long as the document holds on to the observer
[05:22:09] *** Quits: nonsensickle (nonsensickl@moz-4v0.gkd.16.182.IP) (Connection closed)
[05:22:38] *** Quits: waffles (waffles@moz-72q.v0d.227.220.IP) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[05:23:08] *** Joins: waffles (waffles@moz-72q.v0d.227.220.IP)
[05:23:28] *** Joins: nonsensickle (nonsensickl@moz-4v0.gkd.16.182.IP)
[05:23:59] <dzbarsky> jdm: so if I'm in Range and I call document.add_mutation_observer(self) wouldn't I run into trouble creating a weak pointer from the range in document?
[05:25:37] * jdm thinks
[05:26:18] <dzbarsky> jdm: you can't Root a trait right?
[05:26:22] <jdm> correct
[05:29:52] <jdm> so remind me how ranges come into this?
[05:30:10] <njn> lol, whoever wrote components/webdriver_server/lib.rs doesn't know how to spell receiver
[05:30:11] *** Quits: nonsensickle (nonsensickl@moz-4v0.gkd.16.182.IP) (Connection closed)
[05:30:34] * jdm hides
[05:31:12] *** Joins: nonsensickle (nonsensickl@moz-4v0.gkd.16.182.IP)
[05:31:40] <dzbarsky> jdm: when CharacterData changes, ranges want to be notified and update their bounds
[05:32:07] <jdm> dzbarsky: what sort of trouble are you thinking of?
[05:34:39] <dzbarsky> jdm: maybe I just don't understand Weak.  Don't we need to create an Rc to make a Weak?
[05:35:29] *** Quits: nonsensickle (nonsensickl@moz-4v0.gkd.16.182.IP) (Connection closed)
[05:36:49] *** Joins: nonsensickle (nonsensickl@moz-4v0.gkd.16.182.IP)
[05:36:56] <jdm> dzbarsky: I don't mean an actual Weak value
[05:37:08] <jdm> I mean an implementation of weak pointers specifically for mutation observers
[05:37:34] <jdm> or maybe we could lean on the real Weak
[05:37:45] *** Joins: ghservo (ghservo@moz-0l2.5u0.30.192.IP)
[05:37:45] -ghservo- [13servo] 15bors-servo pushed 2 new commits to 06auto: 02http://git.io/vmceh
[05:37:45] -ghservo- 13servo/06auto 14ff915ae 15Michael Tremel: Remove unused mut.
[05:37:45] -ghservo- 13servo/06auto 14da5f1ab 15bors-servo: Auto merge of #6630 - mt2d2:remove_unused_mut, r=metajack...
[05:37:45] *** Parts: ghservo (ghservo@moz-0l2.5u0.30.192.IP) ()
[05:38:00] <mt2d2> fyi for the logs, on os x 10.11/command-line tools, openssl/hmac.h may not be available by default, worked around
[05:38:08] <Manishearth> njn: there stil lare a lot of examples of old terminology/style/patterns in Servo and Rust code
[05:38:10] <jdm> and have MutationObserver have a get_weak() that returns Weak<Self::Inner>
[05:38:14] <Manishearth> *still are
[05:38:35] <njn> Manishearth: even the (tx,rx) ones, too
[05:38:45] <dzbarsky> jdm: What is Inner?
[05:38:54] <jdm> dzbarsky: basically, if we have Range contain an Rc<RangeInner> value, that might work
[05:39:08] <jdm> dzbarsky: Inner can be an associated type that is specialized by anything implementing the trait
[05:39:58] <dzbarsky> jdm: as, speaking of which, do you know why RangeInner exists?
[05:40:17] <dzbarsky> jdm: but I think that makes sense
[05:40:39] *** Quits: nonsensickle (nonsensickl@moz-4v0.gkd.16.182.IP) (Connection closed)
[05:40:41] <jdm> oh heh, I forgot that this stuff already exists
[05:40:52] <jdm> probably for the reasons I'm describing
[05:42:32] *** Joins: nonsensickle (nonsensickl@moz-4v0.gkd.16.182.IP)
[05:43:01] <Manishearth> njn: I like tx,rx fwiw
[05:45:55] <dzbarsky> jdm: hmm it's a little weird because I have to implement the callback on the inner now so it's not actually part of the MutationObserver trait, but I guess that's ok
[05:47:08] *** Quits: bombless (bombless@moz-r8j.puq.21.116.IP) (Ping timeout: 121 seconds)
[05:47:09] <jdm> perhaps we need a MutationObservable and MutationObserver trait separation :)
[05:50:01] <njn> does Rust have any kind of enum inheritance?
[05:50:21] <Elaine> no
[06:01:37] *** Joins: tikue (tim@moz-ths0nf.26es.bi7c.0647.2601.IP)
[06:05:08] *** Quits: nonsensickle (nonsensickl@moz-4v0.gkd.16.182.IP) (Connection closed)
[06:05:25] <dzbarsky> tikue: sup
[06:06:00] <tikue> dzbarsky: hey hey
[06:06:01] *** Joins: nonsensickle (nonsensickl@moz-4v0.gkd.16.182.IP)
[06:06:08] <tikue> dzbarsky: working on anything? :P
[06:06:29] <dzbarsky> jdm: ok, now I'm just getting https://pastebin.mozilla.org/8839569
[06:07:11] <jdm> dzbarsky: yeah, you need an implementation of JSTraceable for Weak<T> where T: JSTraceable
[06:07:12] <dzbarsky> jdm: do I need to implement JSTraceable for RangeInner
[06:07:16] *** Joins: till (till@moz-on9rls.adsl.alicedsl.de)
[06:07:18] <jdm> see trace.rs
[06:07:24] <dzbarsky> ok thanks I'll look
[06:07:53] <dzbarsky> tikue: struggling with weak pointers to traits
[06:08:59] <tikue> should be easy as long as you've implemented the trait... JSTraceable is after my time :) I really need to dive back in, I've got an itch
[06:09:45] <jdm> that's the spirit!
[06:09:51] <dzbarsky> tikue: I bet there's several hundred open issues that you haven't seen yet ;)
[06:10:22] <tikue> oh i look at issues from time to time
[06:11:32] *** Quits: till (till@moz-on9rls.adsl.alicedsl.de) (Ping timeout: 121 seconds)
[06:12:35] <tikue> dzbarsky: you working on a specific issue right now?
[06:12:55] <dzbarsky> tikue: it's not filed, but I'm adding support for mutation observers
[06:13:07] <dzbarsky> tikue: and using that to continue working on DOM Range stuff
[06:13:29] <tikue> cool!
[06:14:24] *** Quits: waffles (waffles@moz-72q.v0d.227.220.IP) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[06:15:41] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[06:15:41] -ghservo- [13servo] 15bors-servo merged 06auto into 06master: 02http://git.io/vmceh
[06:15:41] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[06:15:44] *** Quits: fkaa (fkaa@moz-501od2.business.telia.com) (RecvQ exceeded)
[06:15:46] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[06:15:46] -ghservo- [13servo] 15bors-servo closed pull request #6630: Remove unused mut. (06master...06remove_unused_mut) 02http://git.io/vmnpV
[06:15:46] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[06:16:26] *** Joins: fkaa (fkaa@moz-501od2.business.telia.com)
[06:18:21] <njn> so I ran ./mach test-wpt and the first thing it says is "Downloading Rust snapshot..."
[06:18:23] <njn> O_o
[06:18:44] <dzbarsky> jdm: even with that I get the same error. is it possible that the compiler doesn't realize MutationObserver is traceable?
[06:23:51] <tikue> dzbarsky: can you link to a branch / file
[06:24:07] <dzbarsky> tikue: sure one sec
[06:25:09] <dzbarsky> tikue: https://github.com/dzbarsky/servo/blob/mutationobserver/components/script/dom/document.rs#L155
[06:28:09] *** Quits: nonsensickle (nonsensickl@moz-4v0.gkd.16.182.IP) (Connection closed)
[06:29:01] *** Quits: tikue (tim@moz-ths0nf.26es.bi7c.0647.2601.IP) (Connection closed)
[06:29:59] *** Joins: nonsensickle (nonsensickl@moz-4v0.gkd.16.182.IP)
[06:30:17] *** Joins: tikue (tim@moz-u6dt3k.ca.comcast.net)
[06:30:22] <tikue> dzbarsky: building
[06:31:10] <dzbarsky> tikue: I changed it to observers: Vec<Weak<MutationObserver>> and it still isn't picking up the trait impl
[06:31:18] <jdm> dzbarsky: well, since MutationObserver doesn't inherit from JSTraceable, yes
[06:31:22] <jdm> that would be expected
[06:32:13] <dzbarsky> should it, or is there another way to specify that both must be implemented by a struct?
[06:32:56] <jdm> I think the only other option is to impl JSTraceable for MutationObserver, but I don't think that is a solution that will help
[06:33:55] <tikue> jdm: where is this happening? does #[dom_struct] derive JSTraceable?
[06:34:24] <dzbarsky> tikue: well this is RangeInner, which has #[derive_JSTraceable]
[06:35:04] *** Quits: cgaebel (cgaebel@moz-aq9.qj7.199.198.IP) (A TLS packet with unexpected length was received.)
[06:36:01] <tikue> dzbarsky: the error msg is pointing me to line 112 of document.rs
[06:37:03] <tikue> ah yeah
[06:37:06] <tikue> components//plugins/lib.rs:13://!  - `#[dom_struct]` : Implies `#[privatize]`,`#[derive(JSTraceable)]`, and `#[must_root]`.
[06:37:08] <dzbarsky> tikue: oh right sorry, yea
[06:37:23] <dzbarsky> thought you were talking about the other end
[06:41:16] <tikue> dzbarsky: I see two options
[06:41:57] <tikue> dzbarsky: possibly change MutationObserver to require JSTraceable: `pub trait MutationObserver: JSTraceable { .. }`
[06:42:29] <tikue> or create a new trait that requires both, if you don't want to bind them like that
[06:42:57] <tikue> `pub trait JSTraceableMutationObserver: JSTraceable + MutationObserver { }`
[06:44:04] *** Joins: ctp (textual@moz-k1m.esd.51.212.IP)
[06:44:13] <dzbarsky> tikue: I think it's probably fine to bind them, but I tried the first option already and it didn't seem to pick it up
[06:45:06] <tikue> dzbarsky: did you add an impl of JSTraceable for RangeInner
[06:45:32] <tikue> or derive it
[06:45:37] <dzbarsky> tikue: its already #[derive(JSTraceable)]
[06:45:42] <tikue> yeah i just noticed that 
[06:46:21] <dzbarsky> tikue: is my impl of JSTraceable for Weak<T> correct?
[06:48:15] <tikue> dzbarsky: uhhh it looks correct to me but you'd have to check with someone who actually understands JSTraceable :P
[06:48:32] <dzbarsky> jdm: any other ideas for what could be wrong? ;)
[06:48:36] <Manishearth> dzbarsky: DIFF?
[06:48:51] <tikue> dzbarsky: you might just need JSTraceable to be in scope
[06:48:53] <tikue> not sure though
[06:48:59] * jdm reads the backscroll
[06:49:04] <Manishearth> oops sorry caps
[06:49:10] <Manishearth> got the diff
[06:49:44] <tikue> dzbarsky: oh i think i see
[06:49:57] <tikue> dzbarsky: RefCell<MutationOBserver> needs to impl JSTraceable
[06:50:10] <tikue> dzbarsky: otherwise Weak<RefCell<MutationObserver>> won't pick it up
[06:50:16] <Manishearth> dzbarsky: that jstraceable impl may cause problems
[06:50:35] <dzbarsky> tikue: RefCell<T> is JSTraceable in trace.rs
[06:51:17] <tikue> dzbarsky: ah true
[06:51:19] <Manishearth> dzbarsky: I'm afraid of Rc cycles here
[06:51:24] <Manishearth> can there be cycles?
[06:51:36] <Manishearth> because .trace() will happily go round the cycles
[06:51:52] <dzbarsky> Manishearth: range.start.owner_doc->doc->range
[06:51:53] <dzbarsky> so yeah
[06:52:06] <Manishearth> dzbarsky: but range/doc are dom structs
[06:52:09] <Manishearth> that breaks the cycle
[06:52:11] <Manishearth> I think
[06:52:34] <dzbarsky> hmm but the observers are RangeInner, which isn't dom struct
[06:52:46] <Manishearth> jdm: JStraceable is run *after* we determine that a JS<T> hasn't already been traced, right?
[06:52:58] * jdm has no idea
[06:53:02] <Manishearth> dzbarsky: if there's a JS<T> in the path of tracing, we're okay
[06:53:18] <Manishearth> dzbarsky: is owner_doc a JS<T>, if so, it should be fine
[06:53:20] <dzbarsky> Manishearth: oh ok then there's no cycle
[06:53:30] <dzbarsky> the range's nodes are JS<Node>
[06:53:47] <Manishearth> because JStraceable should only recurse down JS<T> when it determines that those haven't yet been marked
[06:53:51] <Manishearth> which *should* be the behavior
[06:54:15] <Manishearth> We've got three memory management paradigms interacting here
[06:54:17] <Manishearth> yay Rust
[06:54:37] <Manishearth> two of them can handle cycles, the question is, does their integration break on cycles?
[06:54:38] <tikue> dzbarsky: this definitely seems weird to me :( my only guess is that I misunderstand how `trait Foo: Bar` works
[06:54:40] *** Quits: tikue (tim@moz-u6dt3k.ca.comcast.net) (Connection closed)
[06:54:44] <Manishearth> it seems like it shouldn't, not in this cas
[06:54:57] <Manishearth> tomaka: what are you trying with trait Foo: Bar?
[06:55:00] <Manishearth> * tiku
[06:55:03] <Manishearth> * tikue
[06:55:06] *** Joins: tikue (tim@moz-ths0nf.26es.bi7c.0647.2601.IP)
[06:55:07] <Elaine> they left.
[06:55:10] <Elaine> they're back.
[06:55:21] <tikue> lol
[06:55:26] <Manishearth> tikue what are you trying with trait Foo: Bar?
[06:55:27] <dzbarsky> we tried trait MutationObserver : JSTraceable
[06:55:45] <Manishearth> dzbarsky: what are you trying to do?
[06:55:56] <Manishearth> do you want to autoderive mutationobserver on all jstraceable things
[06:55:59] <Manishearth> * ?
[06:56:09] <dzbarsky> Manishearth: this to compile: https://pastebin.mozilla.org/8839569
[06:56:12] <tikue> Manishearth: dzbarsky's branch isn't compiling because of this line added to the Document
[06:56:14] <tikue> observers: Vec<Weak<RefCell<MutationObserver>>>,
[06:56:23] <Manishearth> ohhhh
[06:56:31] <Manishearth> um
[06:56:35] <tikue> I added `trait MutationObserver: JSTraceable`
[06:56:42] <Manishearth> I believe trait objects don't implement the trait itself
[06:56:47] *** Joins: krl (krl@moz-q0m.1lf.72.131.IP)
[06:56:49] <tikue> ...oh! duh
[06:56:55] <tikue> wait
[06:57:00] <tikue> isn't that weird?
[06:57:31] *** Quits: nonsensickle (nonsensickl@moz-4v0.gkd.16.182.IP) (Connection closed)
[06:57:39] <Manishearth> tikue: you need to impl MutationObserver for MutationObserver :)
[06:57:41] <Manishearth> I think
[06:57:49] <Manishearth> I forgot how this works
[06:57:50] <tikue> haha ok, dzbarsky try that :P
[06:57:56] <Elaine> Manishearth: Trait objects do implement the trait, that is the purpose of the object safety check.
[06:58:01] *** Joins: nonsensickle (nonsensickl@moz-4v0.gkd.16.182.IP)
[06:58:07] <tikue> doh
[06:58:12] <Manishearth> Elaine: Trait objects do, trait tyeps don't
[06:58:14] <Manishearth> not sure
[06:58:20] *** Joins: waffles (waffles@moz-u4k.spa.139.14.IP)
[06:58:29] *** Joins: enaqx (enaqx@moz-dtk.cpv.163.188.IP)
[06:58:48] <Elaine> Ah, for that you need `trait Foo for Sized?` I think.
[06:59:07] <tikue> Elaine: that definitely sounds correct! let's see...
[06:59:53] <Manishearth> ah, right, we need ?Sized bounds
[07:00:43] *** Joins: nefzaoui (nefzaoui@moz-5rv.74g.227.41.IP)
[07:00:51] <tikue> what is the syntax for that? I can never remember. pub trait Foo: Bar + ?Sized doesn't work
[07:01:18] <Manishearth> not sure
[07:01:19] <dzbarsky> for Sized?
[07:01:53] <dzbarsky> maybe not anymore
[07:02:01] <tikue> it definitely was at one point
[07:02:40] <Manishearth> this works
[07:02:40] <dzbarsky> maybe it's just Sized now
[07:02:43] <Manishearth> http://is.gd/RC72o7
[07:03:00] <Manishearth> OH
[07:03:16] <Manishearth> dzbarsky: add a ?Sized bound to RefCell and Weak
[07:03:30] *** Quits: bogdan_maris (Instantbird@moz-662.esi.231.62.IP) (Client exited)
[07:03:37] <Manishearth> as in impl>T:JSTraceable+?Sized> JStraceable for Weak<T> {}
[07:03:38] <Manishearth> etc
[07:03:44] <Manishearth> for all of the wrappers around T
[07:04:30] *** Quits: tikue (tim@moz-ths0nf.26es.bi7c.0647.2601.IP) (Connection closed)
[07:04:42] <dzbarsky> Manishearth: why is the Sized bound needed?
[07:04:57] <Manishearth> dzbarsky: because it's an unbound :)
[07:05:04] <Manishearth> ?Sized is an upside down thing
[07:05:13] <Manishearth> by default, <T> is <T: Sized>
[07:05:21] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[07:05:21] -ghservo- [13servo] 15jdm opened issue #6631: Worker ids aren't unique 02http://git.io/vmcZ8
[07:05:21] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[07:05:22] <Manishearth> <T: ?Sized> tells the compiler to not do that
[07:05:24] *** Joins: tikue (tim@moz-u6dt3k.ca.comcast.net)
[07:05:33] <tikue> Manishearth: nice! good catch
[07:05:34] <dzbarsky> ok, still why is that necessary
[07:05:35] <Manishearth> in this case, we have impls of JSTraceable for Weak/RefCell/etc
[07:05:41] <Manishearth> but those use <T>
[07:05:46] <dzbarsky> oh because MutationObserver is unsized
[07:05:46] <tikue> dzbarsky: because by default rust assumes things are sized
[07:05:50] <Manishearth> i.e. <T: Sized>
[07:06:11] <Manishearth> dzbarsky: specifically only RefCell's impl needs it
[07:06:12] <tikue> dzbarsky: so impl<T> Foo for Bar<T> assumes T is sized
[07:06:26] <Manishearth> wait, both RefCell and Weak need it
[07:06:26] <dzbarsky> Manishearth: may as well add it to all of them, right?
[07:06:35] <Manishearth> dzbarsky: add it to Rc, Box, Weak, RefCell
[07:06:51] <Manishearth> I think RefCell<Unsized> itself is unsized
[07:07:42] <dzbarsky> Manishearth: how about Cell
[07:08:01] *** Joins: till (till@moz-on9rls.adsl.alicedsl.de)
[07:09:48] <tikue> well adding the ?Sized bounds fixed the trait errors
[07:10:06] <Manishearth> dzbarsky: sure
[07:10:07] <tikue> now just a bunch of other errors :P
[07:10:21] <dzbarsky> tikue: yeah, borrow check.  time to keep chugging away
[07:10:50] <tikue> dzbarsky: haha good progress though. i wish i understood better how to know which impls of JSTraceable require the ?Sized bounds though...i'm off to bed, good night and good luck
[07:11:06] <dzbarsky> thanks for the help everyone
[07:11:13] <tikue> Manishearth: is it just that the other structs already have a ?Sized bound?
[07:11:22] <dzbarsky> tikue: thanks, good night
[07:11:48] <Elaine> It's for any impl that you want to also apply to DSTs, or more specifically, trait objects.
[07:12:14] <dzbarsky> tikue: I think we can add it to all of them as long as servo compiles. It's just that nobody's needed it yet
[07:12:21] *** Quits: till (till@moz-on9rls.adsl.alicedsl.de) (Ping timeout: 121 seconds)
[07:12:30] <tikue> Elaine: so it's only needed for structs whose <T> *can* be unsized
[07:12:51] <tikue> is that right? i.e. Vec<T> doesn't need ?Sized because Vec<T> can't have an unsized T
[07:13:28] <tikue> meh that doesn't sound right actually. can't you coerce Vec<T> to Vec<Trait>?
[07:14:47] <Elaine> I don't think coercions like that exist
[07:15:05] <Elaine> But I must admit my knowledge of these corners of Rust is not very new.
[07:16:00] <tikue> Elaine: I don't really understand when you can coerce like that and when you can't. I know you can coerce Box<[int; N]> to Box<Debug>
[07:16:12] <tikue> (replace int with i32 or whatnot)
[07:16:40] *** Quits: nonsensickle (nonsensickl@moz-4v0.gkd.16.182.IP) (Connection closed)
[07:17:59] *** Joins: nonsensickle (nonsensickl@moz-4v0.gkd.16.182.IP)
[07:18:03] <tikue> or Rc<[i32; N]> to Rc<Debug>
[07:18:57] <tikue> alright, I'll think more about it later. off to bed for now. night all
[07:19:52] *** Quits: waffles (waffles@moz-u4k.spa.139.14.IP) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[07:20:47] *** Quits: tikue (tim@moz-u6dt3k.ca.comcast.net) (Quit: )
[07:24:04] *** Quits: DroidLogician (Austin@moz-9lhp5e.ca.charter.com) (Quit: Leaving)
[07:24:52] *** Joins: till (till@moz-on9rls.adsl.alicedsl.de)
[07:27:35] *** Joins: dbaron (dbaron@moz-emlu1c.m8rt.25se.06b8.2a02.IP)
[07:30:49] *** Quits: playjax (chatzilla@moz-m2t78f.optusnet.com.au) (Ping timeout: 121 seconds)
[07:31:36] *** Joins: Ms2ger (Ms2ger@moz-u01.vup.182.91.IP)
[07:31:41] *** Quits: bpierre (sid33117@moz-2g65u1.ealing.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: hrybacki (sid75425@moz-39rgnc.ealing.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: Jesse (sid422@moz-cb66cl.0j4i.jtu0.0101.2620.IP) (*.net *.split)
[07:31:41] *** Quits: new_one (new_one@moz-ps5j1c.fs1g.619c.a880.2604.IP) (*.net *.split)
[07:31:41] *** Quits: Eeems (sid20210@moz-51oh7e.charlton.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: steshaw (sid30841@moz-mij4a1.highgate.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: mystor (sid79584@moz-761b3h.charlton.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: kzentner (uid95525@moz-mbkkrh.charlton.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: dbaron (dbaron@moz-emlu1c.m8rt.25se.06b8.2a02.IP) (*.net *.split)
[07:31:41] *** Quits: mihnea_ (sid16310@moz-87gr0i.highgate.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: gw (sid60@moz-p8llle.0j4i.jtu0.0101.2620.IP) (*.net *.split)
[07:31:41] *** Quits: Aria (aredridel@moz-4ipci1.mn92.glcm.0470.2001.IP) (*.net *.split)
[07:31:41] *** Quits: zwarich (sid63988@moz-402giv.ealing.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: RJ (sid1@moz-bfakr9.highgate.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: froydnj|away (sid368@moz-8lcb9r.0j4i.jtu0.0101.2620.IP) (*.net *.split)
[07:31:41] *** Quits: pkondzior (sid768@moz-nrgp4s.highgate.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: duncank (sid93441@moz-98bao6.charlton.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: nmatsakis (sid381@moz-32a8b5.0j4i.jtu0.0101.2620.IP) (*.net *.split)
[07:31:41] *** Quits: ggherdov_ (sid11402@moz-u71qnt.charlton.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: burg (sid14893@moz-r6aeph.brockwell.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: dkua (sid29936@moz-74bhjj.charlton.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: bigbluehat (sid632@moz-e9hfd2.ealing.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: seanmonstar|offline (seanmonstar@moz-jd3i0j.fkdv.ulf6.3c01.2600.IP) (*.net *.split)
[07:31:41] *** Quits: ttaubert (sid254@moz-of58j1.0j4i.jtu0.0101.2620.IP) (*.net *.split)
[07:31:41] *** Quits: vadimcn (uid46608@moz-0d43u8.highgate.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: aturon (sid379@moz-hhfc8n.0j4i.jtu0.0101.2620.IP) (*.net *.split)
[07:31:41] *** Quits: jandem (sid16255@moz-2gehe3.highgate.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: dustinm` (dustinm@moz-1c1j82.fu2o.sj0n.5300.2607.IP) (*.net *.split)
[07:31:41] *** Quits: fitzgen (sid92847@moz-0p91jt.charlton.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: jack (sid19593@moz-fhlsm9.highgate.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: fabrice (sid166@moz-9m0f7p.0j4i.jtu0.0101.2620.IP) (*.net *.split)
[07:31:41] *** Quits: dherman (sid7996@moz-u0jlif.ealing.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: huon (huon@moz-hj272o.8rnv.rggd.6180.2400.IP) (*.net *.split)
[07:31:41] *** Quits: chmanchester|afk (sid313@moz-6igabj.0j4i.jtu0.0101.2620.IP) (*.net *.split)
[07:31:41] *** Quits: flaki (sid26072@moz-kltomo.highgate.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: mrobinson (mrobinson@moz-630lok.qa6l.uj49.3c02.2600.IP) (*.net *.split)
[07:31:41] *** Quits: merl (sid17756@moz-n96e6m.highgate.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: krit (sid15081@moz-itd50n.charlton.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: jryans (sid12941@moz-u4l2d8.brockwell.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: m_khvoinitsky (quassel@moz-c4esiv.mp2c.6dnu.04f8.2a01.IP) (*.net *.split)
[07:31:41] *** Quits: robertknight_ic (sid15951@moz-cjv40p.highgate.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: Jasper (jstpierre@moz-ocal2u.qa6l.uj49.3c02.2600.IP) (*.net *.split)
[07:31:41] *** Quits: spastorino (sid27384@moz-i6sgse.brockwell.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: locks (sid130@moz-11300h.brockwell.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: jtdowney (jtdowney@moz-di14r5.i2gt.qoll.a880.2604.IP) (*.net *.split)
[07:31:41] *** Quits: mtsr (mtsr@moz-b5lsuq.yourbnc.co.uk) (*.net *.split)
[07:31:41] *** Quits: larsberg (sid89@moz-1a60qu.0j4i.jtu0.0101.2620.IP) (*.net *.split)
[07:31:41] *** Quits: hlieberman (sid17492@moz-h2vumj.highgate.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: pnkfelix (sid344@moz-nnnecs.0j4i.jtu0.0101.2620.IP) (*.net *.split)
[07:31:41] *** Quits: reem (sid78397@moz-octfcu.brockwell.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: sp3d (sp3d@moz-re8m3s.mf75.3igv.0240.2601.IP) (*.net *.split)
[07:31:41] *** Quits: kzentner_ (zentner@moz-upmn30.fkdv.ulf6.3c01.2600.IP) (*.net *.split)
[07:31:41] *** Quits: jonalmeida (sid17545@moz-c167m6.highgate.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: frewsxcv (sid86219@moz-dneii9.brockwell.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: TD-Linux (Thomas@moz-fl9m6s.fs1g.619c.a880.2604.IP) (*.net *.split)
[07:31:41] *** Quits: cha0s (chaos@moz-ebt9bj.q7tv.7c32.b0c0.2a03.IP) (*.net *.split)
[07:31:41] *** Quits: evilpie (sid7877@moz-cergcq.charlton.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: jagtalon (sid24114@moz-mr5hqr.charlton.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: teotwaki (teotwaki@moz-hqiu2s.s4a3.2e4u.41d0.2001.IP) (*.net *.split)
[07:31:41] *** Quits: ianconnolly (uid22487@moz-6hrg9i.brockwell.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: je_julie (uid29643@moz-2q4j9e.brockwell.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: tobytailor (sid44@moz-bjj40k.0j4i.jtu0.0101.2620.IP) (*.net *.split)
[07:31:41] *** Quits: wycats (sid79@moz-b4lrm3.brockwell.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: ato (sid11@moz-c1oek8.0j4i.jtu0.0101.2620.IP) (*.net *.split)
[07:31:41] *** Quits: dmarcos (sid15240@moz-9ahsin.ealing.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: Gankro (sid71432@moz-sc2bd6.charlton.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: nrc (sid365@moz-3taf2s.0j4i.jtu0.0101.2620.IP) (*.net *.split)
[07:31:41] *** Quits: nox (sid3872@moz-fvvn96.ealing.irccloud.com) (*.net *.split)
[07:31:41] *** Quits: kimundi (kimundi@moz-ffdgkl.n3fm.urnq.57bc.2002.IP) (*.net *.split)
[07:31:41] *** Quits: ted (sid140@moz-ou6k55.0j4i.jtu0.0101.2620.IP) (*.net *.split)
[07:31:41] *** Quits: dprien (dprien@moz-15s7c4.udtd.gaqb.04f8.2a01.IP) (*.net *.split)
[07:31:41] *** Quits: shinglyu (sid377@moz-esfubb.0j4i.jtu0.0101.2620.IP) (*.net *.split)
[07:31:41] *** Quits: mbrubeck (sid61@moz-2pjnuf.0j4i.jtu0.0101.2620.IP) (*.net *.split)
[07:32:02] *** Joins: jtdowney (jtdowney@moz-di14r5.i2gt.qoll.a880.2604.IP)
[07:32:02] *** Joins: new_one (new_one@moz-ps5j1c.fs1g.619c.a880.2604.IP)
[07:32:02] *** Joins: cha0s (chaos@moz-ebt9bj.q7tv.7c32.b0c0.2a03.IP)
[07:32:02] *** Joins: TD-Linux (Thomas@moz-fl9m6s.fs1g.619c.a880.2604.IP)
[07:32:02] *** Joins: seanmonstar|offline (seanmonstar@moz-jd3i0j.fkdv.ulf6.3c01.2600.IP)
[07:32:02] *** Joins: teotwaki (teotwaki@moz-hqiu2s.s4a3.2e4u.41d0.2001.IP)
[07:32:02] *** Joins: mrobinson (mrobinson@moz-630lok.qa6l.uj49.3c02.2600.IP)
[07:32:02] *** Joins: Jasper (jstpierre@moz-ocal2u.qa6l.uj49.3c02.2600.IP)
[07:32:02] *** Joins: vadimcn (uid46608@moz-0d43u8.highgate.irccloud.com)
[07:32:02] *** Joins: frewsxcv (sid86219@moz-dneii9.brockwell.irccloud.com)
[07:32:02] *** Joins: robertknight_ic (sid15951@moz-cjv40p.highgate.irccloud.com)
[07:32:02] *** Joins: wycats (sid79@moz-b4lrm3.brockwell.irccloud.com)
[07:32:02] *** Joins: nox (sid3872@moz-fvvn96.ealing.irccloud.com)
[07:32:02] *** Joins: Gankro (sid71432@moz-sc2bd6.charlton.irccloud.com)
[07:32:02] *** Joins: reem (sid78397@moz-octfcu.brockwell.irccloud.com)
[07:32:02] *** Joins: spastorino (sid27384@moz-i6sgse.brockwell.irccloud.com)
[07:32:02] *** Joins: burg (sid14893@moz-r6aeph.brockwell.irccloud.com)
[07:32:02] *** Joins: jryans (sid12941@moz-u4l2d8.brockwell.irccloud.com)
[07:32:02] *** Joins: dprien (dprien@moz-15s7c4.udtd.gaqb.04f8.2a01.IP)
[07:32:02] *** Joins: evilpie (sid7877@moz-cergcq.charlton.irccloud.com)
[07:32:02] *** Joins: zwarich (sid63988@moz-402giv.ealing.irccloud.com)
[07:32:02] *** Joins: jagtalon (sid24114@moz-mr5hqr.charlton.irccloud.com)
[07:32:02] *** Joins: dkua (sid29936@moz-74bhjj.charlton.irccloud.com)
[07:32:02] *** Joins: krit (sid15081@moz-itd50n.charlton.irccloud.com)
[07:32:02] *** Joins: ggherdov_ (sid11402@moz-u71qnt.charlton.irccloud.com)
[07:32:02] *** Joins: mystor (sid79584@moz-761b3h.charlton.irccloud.com)
[07:32:02] *** Joins: fitzgen (sid92847@moz-0p91jt.charlton.irccloud.com)
[07:32:02] *** Joins: bigbluehat (sid632@moz-e9hfd2.ealing.irccloud.com)
[07:32:02] *** Joins: bpierre (sid33117@moz-2g65u1.ealing.irccloud.com)
[07:32:02] *** Joins: dmarcos (sid15240@moz-9ahsin.ealing.irccloud.com)
[07:32:02] *** Joins: dherman (sid7996@moz-u0jlif.ealing.irccloud.com)
[07:32:02] *** Joins: kzentner (uid95525@moz-mbkkrh.charlton.irccloud.com)
[07:32:02] *** Joins: shinglyu (sid377@moz-esfubb.0j4i.jtu0.0101.2620.IP)
[07:32:02] *** Joins: gw (sid60@moz-p8llle.0j4i.jtu0.0101.2620.IP)
[07:32:02] *** Joins: nmatsakis (sid381@moz-32a8b5.0j4i.jtu0.0101.2620.IP)
[07:32:02] *** Joins: tobytailor (sid44@moz-bjj40k.0j4i.jtu0.0101.2620.IP)
[07:32:02] *** Joins: ted (sid140@moz-ou6k55.0j4i.jtu0.0101.2620.IP)
[07:32:02] *** Joins: fabrice (sid166@moz-9m0f7p.0j4i.jtu0.0101.2620.IP)
[07:32:02] *** Joins: pnkfelix (sid344@moz-nnnecs.0j4i.jtu0.0101.2620.IP)
[07:32:02] *** Joins: froydnj|away (sid368@moz-8lcb9r.0j4i.jtu0.0101.2620.IP)
[07:32:02] *** bruford.mozilla.org sets mode: +o gw
[07:32:02] *** Joins: mbrubeck (sid61@moz-2pjnuf.0j4i.jtu0.0101.2620.IP)
[07:32:02] *** Joins: ttaubert (sid254@moz-of58j1.0j4i.jtu0.0101.2620.IP)
[07:32:02] *** Joins: aturon (sid379@moz-hhfc8n.0j4i.jtu0.0101.2620.IP)
[07:32:02] *** Joins: ato (sid11@moz-c1oek8.0j4i.jtu0.0101.2620.IP)
[07:32:02] *** Joins: nrc (sid365@moz-3taf2s.0j4i.jtu0.0101.2620.IP)
[07:32:02] *** Joins: chmanchester|afk (sid313@moz-6igabj.0j4i.jtu0.0101.2620.IP)
[07:32:02] *** Joins: m_khvoinitsky (quassel@moz-c4esiv.mp2c.6dnu.04f8.2a01.IP)
[07:32:02] *** Joins: je_julie (uid29643@moz-2q4j9e.brockwell.irccloud.com)
[07:32:02] *** Joins: merl (sid17756@moz-n96e6m.highgate.irccloud.com)
[07:32:02] *** Joins: flaki (sid26072@moz-kltomo.highgate.irccloud.com)
[07:32:02] *** Joins: mihnea_ (sid16310@moz-87gr0i.highgate.irccloud.com)
[07:32:02] *** Joins: dustinm` (dustinm@moz-1c1j82.fu2o.sj0n.5300.2607.IP)
[07:32:02] *** Joins: huon (huon@moz-hj272o.8rnv.rggd.6180.2400.IP)
[07:32:02] *** Joins: hrybacki (sid75425@moz-39rgnc.ealing.irccloud.com)
[07:32:02] *** Joins: dbaron (dbaron@moz-emlu1c.m8rt.25se.06b8.2a02.IP)
[07:32:02] *** Joins: mtsr (mtsr@moz-b5lsuq.yourbnc.co.uk)
[07:32:02] *** Joins: RJ (sid1@moz-bfakr9.highgate.irccloud.com)
[07:32:02] *** Joins: locks (sid130@moz-11300h.brockwell.irccloud.com)
[07:32:02] *** Joins: pkondzior (sid768@moz-nrgp4s.highgate.irccloud.com)
[07:32:02] *** Joins: kzentner_ (zentner@moz-upmn30.fkdv.ulf6.3c01.2600.IP)
[07:32:02] *** Joins: Aria (aredridel@moz-4ipci1.mn92.glcm.0470.2001.IP)
[07:32:02] *** Joins: jandem (sid16255@moz-2gehe3.highgate.irccloud.com)
[07:32:02] *** Joins: duncank (sid93441@moz-98bao6.charlton.irccloud.com)
[07:32:02] *** Joins: ianconnolly (uid22487@moz-6hrg9i.brockwell.irccloud.com)
[07:32:02] *** Joins: jonalmeida (sid17545@moz-c167m6.highgate.irccloud.com)
[07:32:02] *** Joins: sp3d (sp3d@moz-re8m3s.mf75.3igv.0240.2601.IP)
[07:32:02] *** Joins: Jesse (sid422@moz-cb66cl.0j4i.jtu0.0101.2620.IP)
[07:32:02] *** Joins: steshaw (sid30841@moz-mij4a1.highgate.irccloud.com)
[07:32:02] *** Joins: Eeems (sid20210@moz-51oh7e.charlton.irccloud.com)
[07:32:02] *** Joins: jack (sid19593@moz-fhlsm9.highgate.irccloud.com)
[07:32:02] *** Joins: hlieberman (sid17492@moz-h2vumj.highgate.irccloud.com)
[07:32:02] *** Joins: larsberg (sid89@moz-1a60qu.0j4i.jtu0.0101.2620.IP)
[07:32:02] *** Joins: kimundi (kimundi@moz-ffdgkl.n3fm.urnq.57bc.2002.IP)
[07:32:02] *** bruford.mozilla.org sets mode: +ooo mbrubeck jack larsberg
[07:38:12] *** Quits: nonsensickle (nonsensickl@moz-4v0.gkd.16.182.IP) (Connection closed)
[07:39:11] *** Joins: nonsensickle (nonsensickl@moz-4v0.gkd.16.182.IP)
[07:41:23] *** Joins: doener (doener@moz-fnh.n4j.147.5.IP)
[07:42:20] *** Quits: jdm (jdm@moz-34mnpi.cpe.pppoe.ca) (Quit: )
[07:44:33] *** Quits: njn (chatzilla@moz-270n86.iinet.net.au) (Quit: ChatZilla 0.9.91.1 [Firefox 42.0a1/20150713004157])
[07:54:53] *** Joins: valentin (icecold@moz-n6g5vp.net.upcbroadband.cz)
[07:55:20] *** Joins: waffles (waffles@moz-u4k.spa.139.14.IP)
[07:57:35] *** Joins: TYLin (sid187@moz-i7l0ku.0j4i.jtu0.0101.2620.IP)
[07:59:37] *** Quits: waffles (waffles@moz-u4k.spa.139.14.IP) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[08:00:31] *** Quits: nattokirai (nattokirai@moz-86b4bs.bitcat.net) (Client exited)
[08:00:47] *** Joins: waffles (waffles@moz-u4k.spa.139.14.IP)
[08:04:12] *** Quits: nonsensickle (nonsensickl@moz-4v0.gkd.16.182.IP) (Connection closed)
[08:05:31] *** Joins: nonsensickle (nonsensickl@moz-4v0.gkd.16.182.IP)
[08:06:38] *** Joins: Nekit1234007 (nekit@moz-t2fg7e.broadband.iskratelecom.ru)
[08:10:26] *** Joins: ghservo (ghservo@moz-0l2.5u0.30.192.IP)
[08:10:26] -ghservo- [13servo] 15Ms2ger opened pull request #6632: Initialize info directly in get_system_heap_allocated. (06master...06unused-mut) 02http://git.io/vmcw8
[08:10:26] *** Parts: ghservo (ghservo@moz-0l2.5u0.30.192.IP) ()
[08:11:32] *** Quits: ctp (textual@moz-k1m.esd.51.212.IP) (Connection closed)
[08:17:02] *** Joins: ctp (textual@moz-k1m.esd.51.212.IP)
[08:17:42] *** Quits: ctp (textual@moz-k1m.esd.51.212.IP) (Connection closed)
[08:23:08] *** Joins: ctp (textual@moz-k1m.esd.51.212.IP)
[08:23:12] *** Quits: nonsensickle (nonsensickl@moz-4v0.gkd.16.182.IP) (Connection closed)
[08:24:12] *** Joins: nonsensickle (nonsensickl@moz-4v0.gkd.16.182.IP)
[08:25:11] *** Quits: ctp (textual@moz-k1m.esd.51.212.IP) (Connection closed)
[08:25:14] *** Joins: ctp (textual@moz-k1m.esd.51.212.IP)
[08:27:41] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[08:27:41] -ghservo- [13servo] 15dzbarsky opened issue #6633: Implement mutation observers (and hook up DOM Range) 02http://git.io/vmciI
[08:27:41] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[08:27:49] *** Quits: cimes (cimes@moz-sfmbhq.il.comcast.net) (Connection closed)
[08:29:18] *** Quits: ctp (textual@moz-k1m.esd.51.212.IP) (Ping timeout: 121 seconds)
[08:30:52] *** Joins: ctp (textual@moz-k1m.esd.51.212.IP)
[08:31:22] <Ms2ger> dzbarsky, you're on a roll, dammit :)
[08:31:22] *** Quits: ctp (textual@moz-k1m.esd.51.212.IP) (Connection closed)
[08:32:06] <dzbarsky> Ms2ger: heh I think I'm starting to get the hang of this
[08:32:18] <dzbarsky> Ms2ger: sorry for slamming yall with reviews
[08:34:03] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[08:37:48] *** Quits: waffles (waffles@moz-u4k.spa.139.14.IP) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[08:38:56] *** Joins: waffles (waffles@moz-u4k.spa.139.14.IP)
[08:43:30] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[08:43:35] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[08:44:18] *** Joins: cimes (cimes@moz-sfmbhq.il.comcast.net)
[08:46:28] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[08:46:37] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[08:47:57] *** Quits: nefzaoui (nefzaoui@moz-5rv.74g.227.41.IP) (Ping timeout: 121 seconds)
[08:50:19] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[08:51:52] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[09:03:41] *** Joins: laumann (thomas@moz-3m6.3kq.109.2.IP)
[09:04:19] <dzbarsky> Ms2ger: ping?
[09:04:23] *** Joins: akiss (akiss@moz-c6colr.inf.u-szeged.hu)
[09:04:36] <Ms2ger> Ack
[09:04:46] <Ms2ger> Though I'm still not through my email
[09:05:00] <dzbarsky> Ms2ger: how do I compare RefCell<T> foo1 to T foo2?
[09:05:16] <dzbarsky> Ms2ger: foo1.borrow() gives Ref<T> and that doesn't coerce to T
[09:06:00] <dzbarsky> Ms2ger: oh wait I bet * works
[09:06:04] <Elaine> &*a.borrow() == &b
[09:06:10] <Elaine> in general
[09:06:37] <Ms2ger> Yeah, something along those lines
[09:07:36] *** Joins: Jackneill (Jackneill@moz-pcnmjp.pool.digikabel.hu)
[09:08:23] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[09:09:54] <dzbarsky> ok, thanks i'll play with it
[09:10:12] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[09:12:56] *** Quits: acgtyrant (acgtyrant@moz-bhi.kg4.201.115.IP) (Connection closed)
[09:15:10] *** Joins: acgtyrant (acgtyrant@moz-v9p.mqv.201.115.IP)
[09:16:07] <waffles> Ms2ger around?
[09:18:27] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Ping timeout: 121 seconds)
[09:19:03] *** Quits: Jackneill (Jackneill@moz-pcnmjp.pool.digikabel.hu) (Ping timeout: 121 seconds)
[09:25:19] <Ms2ger> waffles, shoot
[09:27:08] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[09:28:00] <Manishearth> Ms2ger: whatsay we extract https://github.com/servo/servo/blob/master/components/net/mime_classifier.rs into a new crate?
[09:28:14] <Manishearth> https://github.com/cybergeek94/multipart/pull/4 could use it
[09:28:17] <crowbot> PR #4: Bring `multipart` back from the dead! - https://github.com/cybergeek94/multipart/pull/4
[09:28:18] <waffles> Ms2ger: I gotta test the wptrunner - I've added test.cfg pointing to servo's debug path, but the test.py file shows an `ImportError`
[09:28:39] <Ms2ger> jgraham, ^
[09:28:55] <waffles> Is he around? I thought he was idle
[09:29:11] <Ms2ger> That doesn't mean he's not around :)
[09:30:13] <Ms2ger> Manishearth, don't see an obvious argument against
[09:37:10] *** Joins: goyox86 (textual@moz-qfs.570.70.83.IP)
[09:40:35] <jgraham> Who are you calling idle? :)
[09:40:41] *** Joins: goyox86_ (textual@moz-qfs.570.70.83.IP)
[09:41:18] <jgraham> waffles: Can you pastebin the error somewhere (e.g. pastebin.mozilla.org)
[09:41:21] <jgraham> Oh wait
[09:41:29] *** Quits: waffles (waffles@moz-u4k.spa.139.14.IP) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[09:41:36] <jgraham> You need to create a virtualenv in the wptrunner directory
[09:41:49] <jgraham> virtualenv _virtualenv
[09:41:57] <jgraham> source _virtualenv/bin/activate
[09:42:02] *** Joins: waffles (waffles@moz-u4k.spa.139.14.IP)
[09:42:16] * jgraham repeats that
[09:42:18] <jgraham> You need to create a virtualenv in the wptrunner directory
[09:42:21] <jgraham> virtualenv _virtualenv
[09:42:23] <jgraham> source _virtualenv/bin/activate
[09:42:29] <jgraham> pip install -e ./
[09:42:50] <jgraham> That will install wptrunner itself into the virtualenv
[09:43:01] <waffles> No worries, I saw the log :P
[09:43:24] *** Quits: goyox86 (textual@moz-qfs.570.70.83.IP) (Ping timeout: 121 seconds)
[09:43:47] <waffles> jgraham: So, whenever I do the tests, I have to create one?
[09:44:47] <waffles> (it's downloading stuff, glad that I'm in college)
[09:45:04] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[09:45:04] -ghservo- [13servo] 15Ms2ger opened pull request #6634: Remove parse_web_socket_url in favour of functions in rust-websocket. (06master...06ws-parse) 02http://git.io/vmCqe
[09:45:04] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[09:45:13] <jgraham> waffles: Well you need to do it once then just make sure it's active
[09:45:31] <waffles> alriight
[09:50:48] *** Quits: je_julie (uid29643@moz-2q4j9e.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[09:51:27] *** Joins: eibwen (eibwen@moz-14h7fq.dip0.t-ipconnect.de)
[09:53:45] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[09:54:06] <waffles> jgraham: I've made my changes in my local wptrunner repo, and I've pointed the servodriver to my servo debug build, while the tests directory is in `wptrunner/tests`, but what about the metadata?
[09:54:31] *** Quits: till (till@moz-on9rls.adsl.alicedsl.de) (Connection closed)
[09:54:36] <waffles> there's one in `wptrunner/test/metadata` but I'm not sure
[09:56:08] *** Joins: till (till@moz-on9rls.adsl.alicedsl.de)
[09:57:10] <jgraham> er, right, so you can tell this isn't very polished, but if you point both to a checkout of web-platform-tests
[09:57:18] <jgraham> that should work
[09:57:39] <jgraham> (you are literally the first person that isn't Ms2ger or myself to use this)
[09:57:47] <jgraham> (and I'm not sure about Ms2ger)
[09:58:00] <Ms2ger> wptrunner tests? Don't think os
[09:58:00] <Ms2ger> so
[10:03:45] *** Quits: enaqx (enaqx@moz-dtk.cpv.163.188.IP) (A TLS packet with unexpected length was received.)
[10:06:01] <jgraham> waffles: Will be afk for a bit
[10:06:11] *** Joins: enaqx (enaqx@moz-dtk.cpv.163.188.IP)
[10:06:24] *** Joins: ctp (textual@moz-k1m.esd.51.212.IP)
[10:06:41] <waffles> jgraham: wait, one last minute question - there's an `ImportError` on ssllutils
[10:07:07] <waffles> and I couldn't find a package
[10:07:29] <Ms2ger> ssll?
[10:08:48] <waffles> yes, when I run `python test.py`, it says `ImportError` for sslutils
[10:08:57] <waffles> Ms2ger ^
[10:09:37] *** Quits: dzbarsky (Adium@moz-mukjmn.fios.verizon.net) (Quit: Leaving.)
[10:18:17] *** Joins: nefzaoui (nefzaoui@moz-85n.lpn.228.41.IP)
[10:27:11] *** Quits: waffles (waffles@moz-u4k.spa.139.14.IP) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[10:31:31] *** Quits: enaqx (enaqx@moz-dtk.cpv.163.188.IP) (A TLS packet with unexpected length was received.)
[10:32:41] *** Joins: enaqx (enaqx@moz-dtk.cpv.163.188.IP)
[10:32:43] *** Quits: enaqx (enaqx@moz-dtk.cpv.163.188.IP) (A TLS packet with unexpected length was received.)
[10:32:45] *** Joins: enaqx (enaqx@moz-dtk.cpv.163.188.IP)
[10:34:35] *** Joins: bombless (bombless@moz-r8j.puq.21.116.IP)
[10:35:18] *** Quits: acgtyrant (acgtyrant@moz-v9p.mqv.201.115.IP) (Ping timeout: 121 seconds)
[10:42:51] *** Joins: acgtyrant (acgtyrant@moz-v9p.mqv.201.115.IP)
[10:44:41] *** Joins: elemongw (textual@moz-9ppu2f.dynamic.cyta.gr)
[10:56:55] *** Joins: aravindavk (aravinda@moz-m6j.f0d.244.121.IP)
[11:06:00] *** Quits: aravindavk (aravinda@moz-m6j.f0d.244.121.IP) (Ping timeout: 121 seconds)
[11:06:12] *** Joins: aravindavk (aravinda@moz-so4.f0d.244.121.IP)
[11:06:22] *** Quits: aravindavk (aravinda@moz-so4.f0d.244.121.IP) (Quit: Konversation terminated!)
[11:06:31] *** Joins: aravindavk (aravinda@moz-so4.f0d.244.121.IP)
[11:06:32] *** Quits: aravindavk (aravinda@moz-so4.f0d.244.121.IP) (Quit: Konversation terminated!)
[11:11:37] *** Joins: bdero (bran@moz-e4f4ei.mit.edu)
[11:23:25] *** Quits: enaqx (enaqx@moz-dtk.cpv.163.188.IP) (A TLS packet with unexpected length was received.)
[11:26:15] *** Joins: enaqx (enaqx@moz-dtk.cpv.163.188.IP)
[11:27:23] *** Joins: bogdan_maris (Instantbird@moz-662.esi.231.62.IP)
[11:38:00] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[11:38:00] -ghservo- [13servo] 15bors-servo pushed 2 new commits to 06auto: 02http://git.io/vmCbJ
[11:38:00] -ghservo- 13servo/06auto 146a61a5d 15Ms2ger: Remove parse_web_socket_url in favour of functions in rust-websocket.
[11:38:00] -ghservo- 13servo/06auto 148fa6e0a 15bors-servo: Auto merge of #6634 - Ms2ger:ws-parse, r=metajack...
[11:38:00] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[11:43:31] *** Joins: mukilan (mukilan@moz-mu4.o0o.164.122.IP)
[11:44:18] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[11:51:21] *** AutomatedTester|AFK is now known as AutomatedTester
[11:51:23] *** Joins: sawrubh (uid6719@moz-sr8l1j.brockwell.irccloud.com)
[11:57:19] *** Joins: tetsuharu (tetsuharu@moz-9k9mc5.ocn.ne.jp)
[11:57:47] *** Quits: tetsuharu (tetsuharu@moz-9k9mc5.ocn.ne.jp) (Quit: )
[11:59:59] *** Joins: nefzaoui_ (nefzaoui@moz-33t.lpn.228.41.IP)
[12:01:53] *** Quits: nefzaoui (nefzaoui@moz-85n.lpn.228.41.IP) (Ping timeout: 121 seconds)
[12:04:00] *** Quits: enaqx (enaqx@moz-dtk.cpv.163.188.IP) (A TLS packet with unexpected length was received.)
[12:07:26] *** Quits: bombless (bombless@moz-r8j.puq.21.116.IP) (Ping timeout: 121 seconds)
[12:10:25] *** Joins: waffles (waffles@moz-uts.43b.136.123.IP)
[12:10:36] *** Quits: waffles (waffles@moz-uts.43b.136.123.IP) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[12:14:14] *** Joins: enaqx (enaqx@moz-dtk.cpv.163.188.IP)
[12:15:13] *** Quits: enaqx (enaqx@moz-dtk.cpv.163.188.IP) (A TLS packet with unexpected length was received.)
[12:15:14] *** Joins: enaqx (enaqx@moz-dtk.cpv.163.188.IP)
[12:21:20] *** Quits: laumann (thomas@moz-3m6.3kq.109.2.IP) (Ping timeout: 121 seconds)
[12:23:19] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[12:23:19] -ghservo- [13rust-selectors] 15Ms2ger opened issue #38: Don't check the parent for :nth-child and friends 02http://git.io/vmWLw
[12:23:19] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[12:24:39] *** Quits: bdero (bran@moz-e4f4ei.mit.edu) (Ping timeout: 121 seconds)
[12:25:57] *** Joins: playjax (chatzilla@moz-e55hhb.optusnet.com.au)
[12:40:26] *** Joins: bdero (bran@moz-0jhegm.dyn.mit.edu)
[12:41:32] *** Joins: rohin (rohin@moz-6lrl3i.user.start.ca)
[12:42:20] *** Joins: mib_058hzp (Mibbit@moz-tdo.68l.152.37.IP)
[12:43:13] *** Joins: aravindavk (aravinda@moz-m6j.f0d.244.121.IP)
[12:43:14] *** Quits: elemongw (textual@moz-9ppu2f.dynamic.cyta.gr) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[12:44:00] *** Joins: elemongw (textual@moz-9ppu2f.dynamic.cyta.gr)
[12:46:05] *** Joins: dwins (dwins@moz-9sdv1c.va.comcast.net)
[12:46:09] *** Quits: elemongw (textual@moz-9ppu2f.dynamic.cyta.gr) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[12:47:21] <mib_058hzp> Hello, I am interested in PDF generation using servo and came accross this old reddit post: https://www.reddit.com/r/rust/comments/28qc9t/rust_and_servo_for_generating_pdfs/   The approach discussed in this post suggests using the pdf backend of skia.  However, skia is a c++ library and I think you therefore cannot call it from rust code?
[12:47:55] *** Joins: nattokirai (nattokirai@moz-rq9a8e.asahi-net.or.jp)
[12:48:05] <mib_058hzp> I saw there is a project called rust-azure for interfacing with skia, would this also give access to skia pdf backend?
[12:48:21] <SimonSapin> mib_058hzp: you can, and we do (through moz2d). You need to write C wrappers, though
[12:49:29] <SimonSapin> mib_058hzp: In theory itâ€™s possible, but youâ€™d have to extend the C wrappers and rust bindings to expose the PDF backend
[12:50:34] <mib_058hzp> Ok.  So basically you'd have to work outwards from skia to create something that can be used from rust, and then plug this into servo in the correct place.
[12:50:52] *** Quits: playjax (chatzilla@moz-e55hhb.optusnet.com.au) (Ping timeout: 121 seconds)
[12:51:15] <mib_058hzp> So moz2d is the place to look for examples of these kinds of c wrappers?
[12:51:56] <SimonSapin> mib_058hzp: Yes, and also do something about Servoâ€™s tiling compositor which is heavily based on raster buffers
[12:53:09] <SimonSapin> re C wrappers, yes: https://github.com/servo/rust-azure/ (Azure is the other name of moz2d)
[12:54:14] <mib_058hzp> Ah ok.  So rust-azure would need to be extended to provide access to the skia pdf backend.
[12:54:23] <mib_058hzp> Thanks for your answers!  I think this is probably a fairly ambitious undertaking, but it is something that I find very interesting.
[12:54:34] <SimonSapin> That said, we also have experiments to get rid of moz2d and skia entirely, and call OpenGL directly. So I donâ€™t know how viable it is to rely skiaâ€™s PDF backend.
[12:54:52] <SimonSapin> long term
[12:55:26] <mib_058hzp> But OpenGL wouldn't offer any PDF rendering possibilities, or would it?
[12:55:41] <SimonSapin> right, it wouldnâ€™t
[12:57:53] <SimonSapin> Iâ€™ve played a little with rendering PDF directly in https://github.com/mbrubeck/robinson/ . Doing rectangles is not too hard, but font embedding looks scary
[12:58:16] <SimonSapin> https://github.com/mbrubeck/robinson/blob/master/src/pdf.rs
[13:00:54] *** Joins: tomaka_ (Pierre@moz-qrfl5c.abo.wanadoo.fr)
[13:01:08] <mib_058hzp> yes, I see!  Thanks for that link.  
[13:01:55] <mib_058hzp> Gives me a concrete place to start.
[13:01:57] *** Quits: tomaka (Pierre@moz-qrfl5c.abo.wanadoo.fr) (Ping timeout: 121 seconds)
[13:01:58] *** Joins: ahal (ahal@moz-b8e0a0.cpe.pppoe.ca)
[13:06:55] <SimonSapin> mib_058hzp: Iâ€™d recommend starting from Servoâ€™s display lists, finding a way to bypass Servoâ€™s compositor, and either writing PDF directly like in robinson (if youâ€™re feeling very brave and no afraid to spend a *lot* of time reading the PDF spec) or using cairo and https://github.com/rust-gnome/cairo
[13:07:31] <SimonSapin> although it looks like rust-gnome/cairo might need to be extended as well to expose cairoâ€™s PDF backend
[13:09:26] <SimonSapin> I find cairo a much more friendly library to use in various projects. For example, it has documentation and itâ€™s fairly widely distributed.
[13:10:11] <SimonSapin> Whereas Skia is pretty much an internal detail of Chromium whose code happens to be available somewhere, but youâ€™re on your own to use it.
[13:10:54] <SimonSapin> At least thatâ€™s how I felt when working on WeasyPrint. In Servo I donâ€™t know the graphics code very well.
[13:12:05] <mib_058hzp> Yeah, getting too deeply involved in the pdf spec is probably not a good idea.
[13:12:09] *** Quits: cimes (cimes@moz-sfmbhq.il.comcast.net) (Quit: Leaving)
[13:13:42] *** Quits: goyox86_ (textual@moz-qfs.570.70.83.IP) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[13:14:22] <mib_058hzp> I see, in robinson you write directly to a pdf binary.
[13:14:45] <SimonSapin> yes
[13:14:52] <mib_058hzp> Thats a bit low-level indeed...
[13:15:31] <SimonSapin> I had to do some PDF spec reading when adding links and outlines to WeasyPrint: https://github.com/Kozea/WeasyPrint/blob/master/weasyprint/pdf.py
[13:15:42] <SimonSapin> from there, painting a few rectangles is not too hard
[13:16:09] <SimonSapin> but I didnâ€™t even try to do text/fonts
[13:16:23] <SimonSapin> this stuff pre-dates Unicode, itâ€™s a big mess
[13:16:31] <SimonSapin> (in the PDF format I mean)
[13:16:51] <mib_058hzp> Yes, I can imagine.
[13:19:58] *** Joins: Jackneill (Jackneill@moz-s7g5eg.pool.digikabel.hu)
[13:30:20] *** Joins: goyox86 (textual@moz-6gq.t8s.78.166.IP)
[13:32:20] <mib_058hzp> Thanks for the pointers, lots of interesting stuff to explore here.
[13:35:02] *** Quits: aravindavk (aravinda@moz-m6j.f0d.244.121.IP) (Quit: Konversation terminated!)
[13:38:09] *** Joins: cimes (cimes@moz-lvg.16c.135.128.IP)
[13:43:13] *** Quits: nattokirai (nattokirai@moz-rq9a8e.asahi-net.or.jp) (Client exited)
[13:47:02] *** tomaka_ is now known as tomaka
[13:47:55] <Ms2ger> #6634
[13:47:56] <crowbot> Issue #6634: Remove parse_web_socket_url in favour of functions in rust-websocket. - https://github.com/servo/servo/pull/6634
[13:48:31] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[13:48:31] -ghservo- [13servo] 15bors-servo 04force-pushed 06homu-tmp from 14bc457c5 to 148fa6e0a: 02http://git.io/veK6S
[13:48:31] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[13:51:55] <nox> Given we have child_inserted(), shouldn't we have child_removed() too?
[13:55:36] *** Quits: rohin (rohin@moz-6lrl3i.user.start.ca) (Ping timeout: 121 seconds)
[13:58:06] *** Joins: rohin (rohin@moz-6lrl3i.user.start.ca)
[14:03:22] *** Quits: FreeFull (freefull@moz-5141vd.range86-184.btcentralplus.com) (Quit: BBL)
[14:04:42] *** AutomatedTester is now known as AutomatedTester|AFK
[14:09:58] *** Joins: FreeFull (freefull@moz-5141vd.range86-184.btcentralplus.com)
[14:10:53] *** AutomatedTester|AFK is now known as AutomatedTester
[14:11:41] *** Quits: enaqx (enaqx@moz-dtk.cpv.163.188.IP) (A TLS packet with unexpected length was received.)
[14:11:47] *** Quits: acgtyrant (acgtyrant@moz-v9p.mqv.201.115.IP) (Ping timeout: 121 seconds)
[14:12:54] *** Joins: waffles (wafflespean@moz-ksa.948.23.1.IP)
[14:17:58] *** Quits: nefzaoui_ (nefzaoui@moz-33t.lpn.228.41.IP) (Quit: Ex-Chat)
[14:18:08] *** Joins: nefzaoui (nefzaoui@moz-33t.lpn.228.41.IP)
[14:18:29] *** Quits: bogdan_maris (Instantbird@moz-662.esi.231.62.IP) (Client exited)
[14:19:56] *** Joins: enaqx (enaqx@moz-dtk.cpv.163.188.IP)
[14:21:31] *** Quits: rohin (rohin@moz-6lrl3i.user.start.ca) (Ping timeout: 121 seconds)
[14:22:04] *** Joins: nefzaoui_ (nefzaoui@moz-2t8.vcl.227.41.IP)
[14:24:07] *** Quits: nefzaoui (nefzaoui@moz-33t.lpn.228.41.IP) (Ping timeout: 121 seconds)
[14:24:07] *** Quits: goyox86 (textual@moz-6gq.t8s.78.166.IP) (Connection closed)
[14:24:28] <Ms2ger> frewsxcv, yes, it's possible to root() an Option, that's why I suggested it :)
[14:25:10] *** Joins: goyox86 (textual@moz-qfs.570.70.83.IP)
[14:25:44] <waffles> jgraham: ping?
[14:29:51] *** Joins: mihneadb (mihneadb@moz-hqm.mqa.46.89.IP)
[14:31:05] *** Joins: ghservo (ghservo@moz-0l2.5u0.30.192.IP)
[14:31:05] -ghservo- [13servo] 15bors-servo pushed 0 new commits to 06homu-tmp: 02http://git.io/vmlfp
[14:31:05] *** Parts: ghservo (ghservo@moz-0l2.5u0.30.192.IP) ()
[14:31:23] *** AutomatedTester is now known as AutomatedTester|AFK
[14:31:44] <frewsxcv> Ms2ger: https://github.com/servo/servo/pull/6536#issuecomment-121634467
[14:31:44] <crowbot> PR #6536: Complete steps for ChildNode::before - https://github.com/servo/servo/pull/6536
[14:32:43] <Ms2ger> Huh
[14:32:44] *** Quits: goyox86 (textual@moz-qfs.570.70.83.IP) (Connection closed)
[14:32:51] <Ms2ger> I'm sure it was possible...
[14:32:51] *** AutomatedTester|AFK is now known as AutomatedTester
[14:32:59] *** Joins: goyox86 (textual@moz-9ct.il3.161.192.IP)
[14:33:02] <Ms2ger> Where is mwu when you need him
[14:34:23] <Ms2ger> Yeah, he removed it
[14:34:25] <Ms2ger> That's inane
[14:34:37] <Ms2ger> File an issue to bring that back, please
[14:35:13] <Ms2ger> frewsxcv, in the meantime, .map(Root::from_rooted)
[14:35:46] <jgraham> waffles: Hi
[14:35:51] <frewsxcv> I think I already tried that and rustc wasn't happy about lifetimes but I can try again
[14:36:15] <jgraham> waffles: In your web-platform-tests checkout run "git submodule update --init --recursive"
[14:37:39] <waffles> jgraham: Wait, I've made a pastebin just for you :)
[14:37:45] *** Quits: goyox86 (textual@moz-9ct.il3.161.192.IP) (Ping timeout: 121 seconds)
[14:37:49] <waffles> jgraham: https://pastebin.mozilla.org/8839587
[14:38:06] *** Joins: goyox86 (textual@moz-6gq.t8s.78.166.IP)
[14:38:16] <waffles> ^^^ (progress)
[14:38:40] *** Joins: laumann (thomas@moz-3m6.3kq.109.2.IP)
[14:38:44] <jgraham> waffles: Right, the submodule update will pull in the sslutils module amongst other useful stuff
[14:38:53] *** Quits: nefzaoui_ (nefzaoui@moz-2t8.vcl.227.41.IP) (Ping timeout: 121 seconds)
[14:39:02] *** Quits: laumann (thomas@moz-3m6.3kq.109.2.IP) (Quit: leaving)
[14:39:04] *** Joins: laumann (thomas@moz-3m6.3kq.109.2.IP)
[14:39:40] <waffles> great!
[14:42:17] *** Quits: mihneadb (mihneadb@moz-hqm.mqa.46.89.IP) (Quit: Bye)
[14:43:03] *** AutomatedTester is now known as AutomatedTester|AFK
[14:44:24] *** Quits: goyox86 (textual@moz-6gq.t8s.78.166.IP) (Ping timeout: 121 seconds)
[14:47:00] <waffles> jgraham: nothing happens (sigh) -_-
[14:48:38] <waffles> Are the parameters in my `test.cfg` file correct? Are we doing the test from the `wptrunner` repo over the servo repo?
[14:51:00] <waffles> Because, those changes have been done to the `wptrunner` repo (but not servo)
[14:51:12] <waffles> I'm really confused about this :/
[14:53:47] *** Quits: enaqx (enaqx@moz-dtk.cpv.163.188.IP) (A TLS packet with unexpected length was received.)
[14:54:19] *** Quits: waffles (wafflespean@moz-ksa.948.23.1.IP) (Quit: C'yall soon...)
[14:54:24] *** Joins: waffles (wafflespean@moz-ksa.948.23.1.IP)
[14:54:36] *** Joins: rohin (rohin@moz-6lrl3i.user.start.ca)
[14:55:40] *** Quits: kmicu (kmicu@moz-uga.edn.218.91.IP) (Ping timeout: 121 seconds)
[14:56:57] *** Joins: enaqx (enaqx@moz-dtk.cpv.163.188.IP)
[14:58:29] *** Quits: mib_058hzp (Mibbit@moz-tdo.68l.152.37.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:59:07] <jgraham> waffles: What kind of nothing happens? What do you see?
[14:59:42] *** Joins: ghservo (ghservo@moz-0l2.5u0.30.192.IP)
[14:59:42] -ghservo- [13servo] 15bors-servo merged 06auto into 06master: 02http://git.io/vmCbJ
[14:59:42] *** Parts: ghservo (ghservo@moz-0l2.5u0.30.192.IP) ()
[14:59:47] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[14:59:47] -ghservo- [13servo] 15bors-servo closed pull request #6634: Remove parse_web_socket_url in favour of functions in rust-websocket. (06master...06ws-parse) 02http://git.io/vmCqe
[14:59:47] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[14:59:54] <waffles> jgraham: I see nothing. It just comes back to the prompt (just like what happens when we press [Return])
[15:00:32] <jgraham> waffles: The extra parameters I have are
[15:00:37] <jgraham> include=_test
[15:01:09] <jgraham> and exclude set to
[15:01:21] <jgraham> exclude=/_test/testharness/firefox
[15:02:37] <waffles> jgraham, what's in `_test`?
[15:02:57] <waffles> did you make that dir?
[15:03:10] *** Quits: dbaron (dbaron@moz-emlu1c.m8rt.25se.06b8.2a02.IP) (Quit: 8403864 bytes have been tenured, next gc will be global.)
[15:03:37] <jgraham> waffles: No it's not a real directory
[15:04:35] <jgraham> It runs the server from web-platform-tests and the server servers the test files under _test
[15:05:00] <jgraham> You might try running ./manifest in your web-platform-tests checkout
[15:05:23] *** Joins: kmicu (kmicu@moz-uga.edn.218.91.IP)
[15:06:31] *** Quits: eddyb (eddyb@moz-v6d.q07.26.188.IP) (Ping timeout: 121 seconds)
[15:07:32] *** Quits: ctp (textual@moz-k1m.esd.51.212.IP) (Quit: Textual IRC Client: www.textualapp.com)
[15:08:50] *** Quits: sawrubh (uid6719@moz-sr8l1j.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[15:09:52] <waffles> jgraham: wait, checkout? I've been doing all this in my servo repo (`servo/tests/wpt/web-platform-tests/`)
[15:10:49] <jgraham> Oh well, I've never tired
[15:10:53] <jgraham> *tried that
[15:11:22] <jgraham> I suggest using an upstream checkout of wptrunner and web-platform-tests
[15:12:02] <jgraham> I mean it *might* work the way you're doing it, but I guess it's easier to stick with a known good configuration
[15:12:19] <waffles> jgraham: alright, I'll go for that.
[15:12:57] *** Quits: rohin (rohin@moz-6lrl3i.user.start.ca) (Ping timeout: 121 seconds)
[15:19:40] *** Joins: nefzaoui (nefzaoui@moz-ad3.m64.228.41.IP)
[15:27:17] *** Quits: laumann (thomas@moz-3m6.3kq.109.2.IP) (Ping timeout: 121 seconds)
[15:28:27] *** AutomatedTester|AFK is now known as AutomatedTester
[15:28:51] <Ms2ger> r? https://github.com/servo/servo/pull/6632
[15:28:52] <crowbot> PR #6632: Initialize info directly in get_system_heap_allocated. - https://github.com/servo/servo/pull/6632
[15:35:51] *** Joins: mib_k3y4ts (Mibbit@moz-hu6.nja.252.72.IP)
[15:36:07] *** Joins: eddyb (eddyb@moz-v6d.q07.26.188.IP)
[15:40:19] *** Quits: mib_k3y4ts (Mibbit@moz-hu6.nja.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:47:54] *** Joins: filsmick (filsmick@moz-0qapam.abo.wanadoo.fr)
[15:47:56] *** Joins: ghservo (ghservo@moz-0l2.5u0.30.192.IP)
[15:47:56] -ghservo- [13servo] 15Ms2ger opened pull request #6635: Spawn a thread for WebSocket messages. (06master...06ws-task) 02http://git.io/vmlDt
[15:47:56] *** Parts: ghservo (ghservo@moz-0l2.5u0.30.192.IP) ()
[15:49:03] *** mystor is now known as Layzell
[15:49:31] *** Layzell is now known as mystor
[15:51:47] *** mystor is now known as ursuIa
[15:52:18] *** ursuIa is now known as mystor
[15:55:11] *** Joins: Savago (Savago@moz-k613vv.ca.comcast.net)
[15:58:35] *** Joins: ctp (textual@moz-k1m.esd.51.212.IP)
[16:02:59] <waffles> jgraham: I'm still having trouble with importing sslutils :/
[16:03:52] <waffles> Now, when I run that submodule update in my clone dedicated to wpt, I get `No submodule mapping found in .gitmodules for path 'support/android-rs-glue'`
[16:05:48] <jgraham> Huh?
[16:05:59] <jgraham> That's nothing to do with wpt
[16:06:07] <jgraham> Sounds like part of servo
[16:07:01] *** Joins: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP)
[16:07:31] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[16:07:31] *** ChanServ sets mode: +o brson
[16:09:56] <waffles> jgraham: yeah, that was a sparse checkout of `tests` from servo
[16:09:57] *** Joins: rohin (rohin@moz-6lrl3i.user.start.ca)
[16:10:54] <jgraham> waffles: You want the actual upstream though, which is https://github.com/w3c/web-platform-tests (and https://github.com/w3c/wptrunner)
[16:12:01] <waffles> ah damn. silly me...
[16:14:16] <waffles> jgraham: and sorry for all the confusion :)
[16:18:47] *** Joins: acgtyrant (acgtyrant@moz-v9p.mqv.201.115.IP)
[16:19:10] *** Quits: rohin (rohin@moz-6lrl3i.user.start.ca) (Ping timeout: 121 seconds)
[16:24:16] *** ahal is now known as ahal|afk
[16:37:10] *** Joins: mib_weh045 (Mibbit@moz-hu6.nja.252.72.IP)
[16:39:48] *** Joins: ProgramFOX (ProgramFOX@moz-oob.vol.86.89.IP)
[16:43:24] *** Quits: mib_weh045 (Mibbit@moz-hu6.nja.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:44:12] *** AutomatedTester is now known as AutomatedTester|AFK
[16:45:45] *** Quits: enaqx (enaqx@moz-dtk.cpv.163.188.IP) (A TLS packet with unexpected length was received.)
[16:46:50] <Ms2ger> Is today a Canadian holiday?
[16:47:16] *** AutomatedTester|AFK is now known as AutomatedTester
[16:48:17] <jgraham> Ms2ger: Not afaict
[16:56:28] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[16:56:28] -ghservo- [13servo] 15bors-servo pushed 2 new commits to 06auto: 02http://git.io/vm83w
[16:56:28] -ghservo- 13servo/06auto 14c90be8e 15Michael Wu: Remove window field from domrectlist
[16:56:28] -ghservo- 13servo/06auto 14b6b9508 15bors-servo: Auto merge of #6628 - michaelwu:slim-domrectlist, r=jdm...
[16:56:28] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[16:56:29] *** Joins: mccr8 (mccr8@moz-m84lpe.ca.comcast.net)
[16:56:33] *** Joins: enaqx (enaqx@moz-dtk.cpv.163.188.IP)
[16:56:33] *** Quits: enaqx (enaqx@moz-dtk.cpv.163.188.IP) (A TLS packet with unexpected length was received.)
[16:56:35] *** Joins: enaqx (enaqx@moz-dtk.cpv.163.188.IP)
[16:56:41] *** Quits: mccr8 (mccr8@moz-m84lpe.ca.comcast.net) (Quit: computer sleep)
[16:56:57] *** AutomatedTester is now known as AutomatedTester|AFK
[17:01:41] *** Joins: MrZeus (MrZeus@moz-ecvk02.skybroadband.com)
[17:03:19] *** Quits: Savago (Savago@moz-k613vv.ca.comcast.net) (Client exited)
[17:03:23] *** ahal|afk is now known as ahal
[17:06:41] *** Quits: tomaka (Pierre@moz-qrfl5c.abo.wanadoo.fr) (Quit: Leaving)
[17:06:57] *** Joins: qrlpx (smuxi@moz-n7t.3nb.211.95.IP)
[17:08:05] <SimonSapin> mbrubeck: do you want to get homu set up for unicode-bidi, or should I push the green button?
[17:09:17] <mbrubeck> SimonSapin: I guess this is a good time to get it set up.
[17:09:59] *** Joins: mccr8 (mccr8@moz-cfhap5.mtv2.mozilla.com)
[17:10:08] <mbrubeck> jack: Can you run your script to add servo/unicode-bidi to homu?
[17:10:27] *** Joins: lsocks (sid340@moz-061fqd.0j4i.jtu0.0101.2620.IP)
[17:10:44] <waffles> jgraham: going through the chat logs, I now understand whatever you said previously (everything's due to not cloning an upstream) :P
[17:14:29] *** Joins: ghservo (ghservo@moz-0l2.5u0.30.192.IP)
[17:14:29] -ghservo- [13servo] 15pcwalton closed pull request #6629: profile: Make the time and memory profilers run over IPC. (06master...06profiler-ipc) 02http://git.io/vmncc
[17:14:29] *** Parts: ghservo (ghservo@moz-0l2.5u0.30.192.IP) ()
[17:14:33] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[17:14:33] -ghservo- [13servo] 15pcwalton reopened pull request #6629: profile: Make the time and memory profilers run over IPC. (06master...06profiler-ipc) 02http://git.io/vmncc
[17:14:33] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[17:15:29] *** Joins: rohin (rohin@moz-6lrl3i.user.start.ca)
[17:15:57] *** Joins: tomaka (Pierre@moz-qrfl5c.abo.wanadoo.fr)
[17:17:18] <jgraham> waffles: Sorry I wasn't more clear earlier
[17:17:24] *** chmanchester|afk is now known as chmanchester
[17:18:02] *** Joins: pcwalton (pcwalton@moz-nh2.o1i.216.216.IP)
[17:18:02] *** ChanServ sets mode: +o pcwalton
[17:18:19] <jack> mbrubeck: one sec
[17:18:36] <jack> actually i can't it's on the other machine. i can have my wife do it in a bit.
[17:19:06] <mbrubeck> jack: Is it something I can do manually? I should probably set up some other hooks on that repo too (like the IRC notifications)
[17:19:30] <jack> mbrubeck: yes, you can do it manually. all the keys are listed in /srv/pillar/homu.sls on servo-master.
[17:19:36] *** Quits: rohin (rohin@moz-6lrl3i.user.start.ca) (Ping timeout: 121 seconds)
[17:20:04] <waffles> jgraham: Oh please, I'm quite happy that you helped me all the way, thanks! (well, there's still a long way to go :P).
[17:20:06] <mbrubeck> jack: okay, let me try that
[17:21:18] <pcwalton> ok, I think I may be able to get rid of all the extra threads but one in my PRs, and allow you to select over both receivers and IPC receivers, with Mach port sets
[17:21:29] <pcwalton> will require some extra work
[17:25:06] *** chmanchester is now known as chmanchester|afk
[17:38:13] <kzentner> So I'd like to work on Servo fulltime 6-9 months from now. Is this the right place to ask about what my next steps should be? I'm one of the Gecko interns.
[17:38:22] <kzentner> Sorry if this is off-topic.
[17:39:14] *** Joins: jviereck (Adium@moz-9batfl.dip0.t-ipconnect.de)
[17:39:39] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[17:39:39] -ghservo- [13servo] 15bors-servo merged 06auto into 06master: 02http://git.io/vm83w
[17:39:39] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[17:39:45] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[17:39:45] -ghservo- [13servo] 15bors-servo closed pull request #6628: Remove window field from domrectlist (06master...06slim-domrectlist) 02http://git.io/vmnZk
[17:39:45] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[17:41:49] <SimonSapin> jack: ^
[17:42:02] <larsberg> kzentner: Do you mean full-time as a volunteer / student, or did you mean to apply for a position? Right now, we have one open spot, but it's for someone with significant experience in either browsers or browser-related implementation (https://careers.mozilla.org/en-US/position/ollA0fw0 ) - the average candidate we screen has at least 5 years of related
[17:42:02] <larsberg> experience. That said, next year either we or the product teams may be hiring more people at a junior level, and you can check the careers page (or just ask on this channel).
[17:42:29] <larsberg> (assuming by "intern" you mean a college undergraduate intern)
[17:43:35] <kzentner> larsberg: Yeah, I would like to apply for a position at some point, but right now there clearly aren't any at my experience level. Your assumption is correct.
[17:44:57] <kzentner> larsberg: In the mean time, it would be nice to contribute as a volunteer / student. It's not totally clear what pieces of work would be best for that.
[17:45:02] *** Joins: mwu (mwu@moz-rcj0fv.nj.comcast.net)
[17:45:26] <Ms2ger> jgraham, gah, I forgot I was going to look at #6416
[17:45:27] <crowbot> Issue #6416: Use hosts-replaced URL only when loading resources - https://github.com/servo/servo/pull/6416
[17:45:52] *** Quits: jviereck (Adium@moz-9batfl.dip0.t-ipconnect.de) (Quit: Leaving.)
[17:46:43] <jgraham> Ms2ger: I just assumed that you had more important things going on :)
[17:46:48] <larsberg> kzentner: Awesome :-) We try to have lots of good first bugs (https://github.com/servo/servo/issues?q=is%3Aopen+is%3Aissue+label%3AE-easy ), though they're much more heavily weighted to DOM/content stuff than other areas today. The one upside to being so early in product development is that if there's an area you're interested in, we probably have something
[17:46:49] <larsberg> approachable that you could do to start contributing
[17:46:54] <Ms2ger> Well, obviously :)
[17:47:55] <waffles> Hey jgraham, I think I'm getting a weird `ImportError` now. `sslutils` have gone, and now it's `mozprocess` that's missing
[17:48:16] <waffles> (I've done all that you just said)
[17:51:04] <kzentner> larsberg: Thanks! Is anyone working on parts of some of the large missing things like svg and flexbox? I went through the servo training at Whistler, so I wouldn't mind trying to grab something larger.
[17:51:32] <jgraham> waffles: In your virtualenv try `pip install -r requirements_servo.txt`
[17:51:41] *** Parts: mwu (mwu@moz-rcj0fv.nj.comcast.net) ("Leaving")
[17:51:45] <Ms2ger> Flexbox is something that regularly seems to end up on the radar, but never happens
[17:51:45] *** Joins: mwu (mwu@moz-rcj0fv.nj.comcast.net)
[17:51:51] <Ms2ger> SVG is off the radar
[17:52:12] <jgraham> How hard could it be? ;)
[17:52:50] <kzentner> Ms2ger: Alright, cool. Yeah, it's obviously pretty hard. Still, I might be able to start to make progress.
[17:52:52] <Ms2ger> In-tree or in-img?
[17:53:17] <larsberg> kzentner: flexbox is something we would really love to have but, as Ms2ger said, never makes the top of the priority list right now.
[17:53:40] *** Joins: jviereck (Adium@moz-9batfl.dip0.t-ipconnect.de)
[17:54:42] <kzentner> larsberg: Well, that makes it a good target for me :). I'm not sure how much progress I'll make, but it's worth a shot.
[17:55:20] <Ms2ger> kzentner, you probably want to talk to at least one of { pcwalton , SimonSapin } before starting :)
[17:55:24] <larsberg> kzentner: We could probably set up some time to chat with SimonSapin - he owns a lot of our styling and layout code and could help with a tour of what would need to happen.
[17:55:46] <pcwalton> yeah, it shouldn't be difficult to get started
[17:56:00] <larsberg> I think pcwalton had some ideas for SVG, but they largely involved using shim implementations (e.g., canVG to a canvas) and aren't quite as exciting as flexbox
[17:56:08] <pcwalton> well, roc is quite opposed to that
[17:56:20] <pcwalton> so I think I'm coming around to a more of "implement the bare minimum we need to not break web content"
[17:56:22] <pcwalton> approach
[17:56:29] <pcwalton> just implement it directly
[17:56:42] <Ms2ger> I'm not a fan of shims either :)
[17:56:44] <pcwalton> anyway, regarding flexbox: make a new FlexFlow which is a "subclass" of BlockFlow in the same manner that ListItemFlow is
[17:56:58] <jgraham> Me neither, but I still wouldn't put SVG near the top of the list
[17:57:05] <Ms2ger> We should probably have an issue where we can paster whatever pcwalton is saying now :)
[17:57:05] <pcwalton> flexbox is definitely more important though
[17:57:10] <Ms2ger> paste*
[17:57:28] <pcwalton> SVG is kind of legacy in my mind in the same way that Flash isâ€¦ I would almost rather have Shumway working in terms of priorities, sadly
[17:58:01] <jgraham> SVG is sort of legacy in the sense that there's nothing that replaces it?
[17:58:03] <pcwalton> regarding flexbox, I would r+ a patch that did that and something incredibly basic, like putting kids next to each other in {horizontal,vertical} direction, and nothing more
[17:58:07] <pcwalton> well, <canvas>
[17:58:22] <jgraham> Canvas seems pretty different
[17:58:42] <pcwalton> web devs seem to reach for canvas when they want to do most of the really fancy SVG stuff, like SMIL
[17:59:02] <jgraham> (I'm not arguing that it has great cost/value mind you)
[17:59:08] <pcwalton> anyway, I don't really care either way
[17:59:11] <pcwalton> I think we're all in agreement
[17:59:18] *** Joins: Savago (Savago@moz-8hd.3b6.246.162.IP)
[18:00:00] <pcwalton> in terms of long-tail stuff, contenteditable scares me a lot more than SVG does
[18:00:11] <pcwalton> but contenteditable is mostly a DOM problem
[18:00:17] <kzentner> Is there a particularly hard part to it?
[18:00:22] <pcwalton> to what, contenteditable
[18:00:23] <pcwalton> ?
[18:00:26] <kzentner> Yeah.
[18:00:41] <Ms2ger> The editing part :)
[18:00:57] <pcwalton> yeah, for several reasons: (1) it's not specced at all really, so it's a question of "finding the intersection of all the features that the 8 popular JS rich text libraries + gmail use"
[18:01:05] <pcwalton> that intersection MIGHT be pretty small
[18:01:06] <pcwalton> but we don't know
[18:01:18] <pcwalton> (2) getting undo + transactions right just sucks
[18:01:21] <pcwalton> nobody really does
[18:01:30] *** Joins: ghservo (ghservo@moz-0l2.5u0.30.192.IP)
[18:01:30] -ghservo- [13servo] 15larsbergstrom opened issue #6636: Initial Flexbox implementation 02http://git.io/vm8D1
[18:01:30] *** Parts: ghservo (ghservo@moz-0l2.5u0.30.192.IP) ()
[18:01:46] <larsberg> kzentner: Comment in https://github.com/servo/servo/issues/6636 if you'd like to take it :-)
[18:01:46] <crowbot> Issue #6636: Initial Flexbox implementation - https://github.com/servo/servo/issues/6636
[18:01:54] <waffles> jgraham: Finally, the test runs! But, there's one problem. All the tests end with a `socket error on port` - I don't think this is expected
[18:02:10] <jgraham> Nope, that doesn't sound expected
[18:02:11] <pcwalton> (3) the long-tail stuff that Firefox supports but almost nobody else does (I think?), such as pasting images and whatnot, are difficult to implement
[18:02:19] <pcwalton> I hope that (3) is irrelevant, but we don't really know.
[18:02:40] <pcwalton> it would be very interesting for someone to scope out the work by just determining what we need to implement to be web compatible -- talking to ehsan would be helpful
[18:02:50] <jgraham> pcwalton: I think 2) is not that small
[18:02:57] <jgraham> Sorry 1)
[18:03:07] <pcwalton> yeah, it might not be
[18:03:12] <pcwalton> ehsan seemed to think it might be
[18:03:15] <pcwalton> but we don't really know.
[18:03:32] <jgraham> pcwalton: So Aryeh tried to write a spec for this some time ago
[18:03:44] <jgraham> That's probably the right place to start implementing
[18:03:51] <jgraham> Even though it's known to be wrong
[18:04:00] <pcwalton> I was under the impression that browsers do so utterly and wildly incompatible things that libraries may be fairly conservative
[18:04:07] <kzentner> Most specs are known to be wrong somewhere ;)
[18:04:12] <SimonSapin> pcwalton: Ms2ger: so, W3C has a thing called Editing Task Force which is apparently trying to spec contentEditable. They want to meet in Paris next month (just before CSS) and asked me to host
[18:04:19] <SimonSapin> so Iâ€™m gonna be there
[18:04:30] <pcwalton> cool, it'd be helpful to know if anybody has scoped out what has to be spec'd
[18:04:56] <SimonSapin> anything specific I should ask them?
[18:05:04] <jgraham> pcwalton: Nope, it's much, much worse than that. Browsers do wildly different things, so editing libraries special case individual browsers for everything using eyewatering hacks
[18:05:12] *** Joins: ldng (ldng@moz-j945dl.abo.bbox.fr)
[18:05:36] <jgraham> Seriously, some of the most alarming browser-detection code I've ever seen has been in editing libraries
[18:05:36] <pcwalton> jgraham: well, in a sense, that's irrelevant for Servo, right? if they're UA sniffing then all of the UA sniffing tests are gonna fail on Servo
[18:05:48] <pcwalton> that actually almost makes our life easier
[18:05:55] *** Joins: jdm|phone (AndChat2040@moz-vhn.r2n.114.24.IP)
[18:05:57] <jgraham> pcwalton: Yeah, the fallback behaviour is usually to not do anything
[18:06:00] <pcwalton> SimonSapin: "who are the big users of contenteditable in the wild -- can we get a list" and "what is the intersection of the features that all browsers support"
[18:06:04] <pcwalton> which is pretty easy to implement :)
[18:06:34] <jgraham> Well yeah, in the same way it's easier to not implement any of a web browser at all :)
[18:06:51] <jdm|phone> FYI: there's a student who has received approval to spend 6 months working on SVG in Servo for a thesis starting in october.
[18:07:24] <jdm|phone> And we're in discussion with the gecko folks to learn from their mistakes.
[18:07:26] <pcwalton> from a totally self-centered and lazy point of view if a lot of contenteditable practically depends on us crossing the "should we aggressively try to pretend to be another browser" chasm, then that's a bit easier for us, because I don't think we are going to cross that chasm anytime soon
[18:07:31] *** Joins: dzbarsky (Adium@moz-mukjmn.fios.verizon.net)
[18:07:33] <pcwalton> jdm|phone: awesome
[18:07:40] <pcwalton> my only suggestion is "concentrate on what we know to be used in the wild"
[18:07:52] <pcwalton> I don't want to be chasing SVG bugs down that nobody uses
[18:07:56] <pcwalton> that are in features nobody uses
[18:07:57] <pcwalton> that is
[18:08:06] <pcwalton> e.g. I want to know who is actually using SMIL before we implement it
[18:08:12] <pcwalton> or SVG Fonts
[18:08:13] <pcwalton> etc
[18:08:14] <Ms2ger> jdm|phone, ohai, can I get a review? :)
[18:08:28] <jdm|phone> Yeah, we're planning to ignore SMIL.
[18:08:34] <pcwalton> cool
[18:08:52] <jdm|phone> Ms2ger, sure once I get on a laptop in 30 minutes
[18:08:59] <Ms2ger> Great, thanks :)
[18:09:37] <jgraham> Ms2ger: Bear in mind he's piping all his output over the phone, so your code review way go to whoever's on the other end
[18:10:22] <waffles> uh, jgraham? regarding that socket error?
[18:10:22] <jgraham> waffles: Want to pastebin your output?
[18:10:26] <waffles> sure
[18:10:50] <pcwalton> I hope I don't sound like I'm too lazy, BTW -- I just want to scope new feature work as much as we can as we progress into the long tail of Web features, because we still have a bunch of basic CSS 2.1 tests failing and such :)
[18:11:01] <waffles> jgraham: https://pastebin.mozilla.org/8839613
[18:11:16] <pcwalton> obviously I don't want to break sites
[18:12:22] <Ms2ger> Can't someone write a PhD about table layout...
[18:12:40] <pcwalton> there is quite possibly a paper there
[18:12:48] <pcwalton> in how we do the parallel layout
[18:12:53] <pcwalton> probably not a whole Ph.D. thesis :)
[18:13:18] <pcwalton> (webrast is also possibly a paper if it works, BTW)
[18:13:52] <pcwalton> I almost want to put out a "Call to Write Papers For Us About the Stuff We've Been Doing"
[18:13:55] <jgraham> pcwalton: I agree that contenteditable is hard and probably has to be low priority
[18:14:25] <pcwalton> long-tail web features are annoying :(
[18:14:27] *** Joins: sneakyness (textual@moz-tmbr33.biz.rr.com)
[18:14:28] <jgraham> There are Loads Of Things that you need to be a good web browser that servo doesn't have yet which are also easier and high impact
[18:14:40] <pcwalton> yeah, like document.write and offsetTop :)
[18:14:59] <pcwalton> btw, offsetTop and friends are all mostly unimplemented, high-value, and also pretty easy, easier than document.write
[18:15:18] <pcwalton> we have gBCR which is the hard one
[18:15:52] <jdm|phone> Pcwalton: could you write up the expected solutions for the layout properties?
[18:15:57] <pcwalton> jdm|phone: sure thing
[18:16:14] <jdm|phone> I've trief before and got stuck due to lack of knowledge
[18:16:18] *** Joins: rohin (rohin@moz-6lrl3i.user.start.ca)
[18:16:27] <jgraham> waffles: So, do you have something else running on port 8000?
[18:16:56] <pcwalton> basically you just look at the gBCR code and copy-paste it, then modify it a bit -- the trickiest part is computing a property relative to your parent, but that isn't too tough (just compute your parent's property and then subtract as necessary)
[18:17:26] <pcwalton> you could try to cheat and use the flow property instead of computing your parent's, but that strikes me as fragile because the flow tree does not always correspond to the DOM
[18:17:46] <waffles> jgraham: Oh, yeah. Django runs on that
[18:19:05] *** Joins: jdm (jdm@moz-vhn.r2n.114.24.IP)
[18:19:05] *** ChanServ sets mode: +qo jdm jdm
[18:19:15] <jgraham> waffles: So that's the port that wptserve really wants to run on, so you either need to edit the config.json file in your web-platform-tests checkout or stop django
[18:19:33] *** Quits: jdm|phone (AndChat2040@moz-vhn.r2n.114.24.IP) (Quit: Bye)
[18:20:25] *** Quits: rohin (rohin@moz-6lrl3i.user.start.ca) (Ping timeout: 121 seconds)
[18:21:08] <waffles> jgraham: Wait, but I'm not using Django now though (it's been two months since I used that) o_O
[18:21:12] <jgraham> waffles: If you want a config.json, copy config.default.json and change the ports as required
[18:21:25] *** mystor is now known as Isocks
[18:21:28] <waffles> before that, I'll check my ports
[18:21:37] *** Isocks is now known as mystor
[18:21:49] <jgraham> If you are on linux or something you can use lsof -i :8000
[18:22:13] <pcwalton> got select() working on ipc-channel on Mac :)
[18:22:39] <pcwalton> Mach port sets \o/
[18:22:45] *** Quits: pcwalton (pcwalton@moz-nh2.o1i.216.216.IP) (Client exited)
[18:23:45] <jgraham> waffles: (heading afk for a bit)
[18:23:47] <waffles> jgraham: Yeah, I'm in Ubuntu and I did use that, but I don't see any open port
[18:23:51] <waffles> oh my...
[18:24:06] <waffles> Alright, I'll see what I can do
[18:24:15] <jgraham> waffles: Try ./serve from the web-platform-tests root
[18:24:46] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[18:24:48] <jgraham> Oh, I tell you what
[18:24:50] <waffles> jgraham: another traceback
[18:24:52] <jgraham> Read the README
[18:24:59] <waffles> Oh, heh :P
[18:25:03] <jgraham> You might have to set up /etc/hosts
[18:25:19] *** Joins: elemongw (textual@moz-h6tesn.dynamic.cyta.gr)
[18:25:20] <waffles> Very well :)
[18:25:30] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[18:25:30] -ghservo- [13servo] 15notriddle opened pull request #6637: Don't crash when Firefox doesn't send autoMargins. (06master...06master) 02http://git.io/vm8A6
[18:25:30] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[18:25:32] <jdm> every time pcwalton disappears after making some comment about mac IPC code I imagine he's triggered a new kernel oops
[18:25:58] *** Quits: ProgramFOX (ProgramFOX@moz-oob.vol.86.89.IP) (Quit: ChatZilla 0.9.91.1 [Firefox 39.0/20150630154324])
[18:29:57] <Ms2ger> jdm, got a laptop? ;)
[18:30:02] <jdm> yep!
[18:30:11] <Ms2ger> #6635 is eyeing you :)
[18:30:11] <crowbot> Issue #6635: Spawn a thread for WebSocket messages. - https://github.com/servo/servo/pull/6635
[18:30:39] *** Joins: nefzaoui_ (nefzaoui@moz-hh3.a0i.228.41.IP)
[18:31:45] * jdm was excited to see that earlier
[18:31:49] *** Joins: gunthertrexx (Mibbit@moz-hu6.nja.252.72.IP)
[18:32:38] *** Quits: nefzaoui (nefzaoui@moz-ad3.m64.228.41.IP) (Ping timeout: 121 seconds)
[18:35:43] <jdm> did we just happen to file an initial description of implementing flexbox, and somebody just happened to decide to start trying to implement it three minutes later, or was there some hidden synchronization here?
[18:36:04] <jdm> oh wait, this is actually an easy first step
[18:36:21] * jdm went o.o when he saw E-easy on "initial flexbox implementation"
[18:36:44] <Ms2ger> There was hidden synchronization
[18:37:09] * Ms2ger wonders if there's anything actionable in this expensify email
[18:40:35] <SimonSapin> jdm: then you realized it was an issue, not a PR? :)
[18:40:37] *** Quits: jviereck (Adium@moz-9batfl.dip0.t-ipconnect.de) (Quit: Leaving.)
[18:40:52] <jdm> I never was confused about that aspect of it
[18:42:14] <mbrubeck> argh, preformatted text means that a single inline flow can contain multiple "paragraphs" in the bidi algorithm sense.
[18:42:46] *** Quits: laleh (Adium@moz-hgq383.reshsg.uci.edu) (Quit: Leaving.)
[18:43:01] * waffles is going to bed - he'll ping jgraham tomorrow
[18:43:21] *** Joins: jviereck (Adium@moz-9batfl.dip0.t-ipconnect.de)
[18:43:44] *** Quits: waffles (wafflespean@moz-ksa.948.23.1.IP) (Quit: C'yall later...)
[18:45:15] <SimonSapin> mbrubeck: yep, and thereâ€™s a whole bunch of corner cases in css whitespace processing that we might not be doing right
[18:46:34] *** Quits: v_v (leibniz@moz-bjpds3.priv.bahnhof.se) (Ping timeout: 121 seconds)
[18:46:55] <mbrubeck> SimonSapin: It's easy enough to break up the text content and call unicode_bidi::process_paragraph repeatedly... but it gets tricky trying to iterate through the results, without doing inefficient things like copying them all into one flat vec.
[18:48:24] *** chmanchester|afk is now known as chmanchester
[18:49:56] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[18:49:56] -ghservo- [13servo] 15Ms2ger closed pull request #6562: Update most dependencies. (06master...06update-all) 02http://git.io/vqZMn
[18:49:56] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[18:50:44] *** Quits: elemongw (textual@moz-h6tesn.dynamic.cyta.gr) (Ping timeout: 121 seconds)
[18:51:31] *** Joins: v_v (leibniz@moz-bjpds3.priv.bahnhof.se)
[18:51:37] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[18:55:38] *** Quits: gunthertrexx (Mibbit@moz-hu6.nja.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:56:53] *** Joins: rohin (rohin@moz-8rvdar.user.start.ca)
[19:00:03] *** Joins: ghservo (ghservo@moz-0l2.5u0.30.192.IP)
[19:00:03] -ghservo- [13servo] 15jdm opened issue #6638: Move websocket network connection creation to the resource task 02http://git.io/vm4YW
[19:00:03] *** Parts: ghservo (ghservo@moz-0l2.5u0.30.192.IP) ()
[19:03:29] *** Joins: ghservo (ghservo@moz-0l2.5u0.30.192.IP)
[19:03:29] -ghservo- [13servo] 15bors-servo pushed 0 new commits to 06auto: 02http://git.io/vm4Od
[19:03:29] *** Parts: ghservo (ghservo@moz-0l2.5u0.30.192.IP) ()
[19:03:31] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[19:03:31] -ghservo- [13servo] 15bors-servo pushed 5 new commits to 06auto: 02http://git.io/vm4ON
[19:03:31] -ghservo- 13servo/06auto 14db3323e 15Ms2ger: Split up WebSocketTaskHandler....
[19:03:31] -ghservo- 13servo/06auto 1434f8a4d 15Ms2ger: Remove the receiver field from WebSocket....
[19:03:31] -ghservo- 13servo/06auto 146c91eb1 15Ms2ger: Set the WebSocket's Sender from the ConnectionEstablishedTask....
[19:03:31] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[19:04:10] <Ms2ger> Takk
[19:04:58] *** AutomatedTester|AFK is now known as AutomatedTester
[19:05:17] *** Joins: laleh (Adium@moz-h8636h.mobile.uci.edu)
[19:05:25] *** Quits: till (till@moz-on9rls.adsl.alicedsl.de) (A TLS packet with unexpected length was received.)
[19:05:26] *** Joins: tikue (tim@moz-n71.k1b.0.198.IP)
[19:05:37] *** Joins: till (till@moz-on9rls.adsl.alicedsl.de)
[19:12:03] *** Quits: jdm (jdm@moz-vhn.r2n.114.24.IP) (Ping timeout: 121 seconds)
[19:13:06] *** Quits: zmike_ (discomfitor@moz-oek0ra.ct.comcast.net) (Ping timeout: 121 seconds)
[19:15:51] *** Joins: zmike_ (discomfitor@moz-oek0ra.ct.comcast.net)
[19:17:39] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[19:17:39] *** ChanServ sets mode: +o pcwalton
[19:20:28] <dzbarsky> Ms2ger: hey, I'm having some trouble unregistering ranges from observing the document
[19:21:21] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[19:21:21] -ghservo- [13servo] 15dzbarsky opened pull request #6639: Make ranges observe mutations on document (06master...06mutationobserver) 02http://git.io/vm4WB
[19:21:21] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[19:22:06] <dzbarsky> Ms2ger: I tried something like https://github.com/servo/servo/commit/976063e61b47c046b0597e3fea6a397d16349c17#diff-30a18e04d7e0b66aafdf192e416cad44R1117 but that doesn't work
[19:22:44] <dzbarsky> Ms2ger: because MutationObserver doesn't implement PartialEq.  If I make MutationObserver derive JSTraceable + PartialEq, then I get errors about how it can't be a trait object or something
[19:22:53] <dzbarsky> any ideas?
[19:25:25] *** nefzaoui_ is now known as nefzaoui
[19:26:33] *** Quits: enaqx (enaqx@moz-dtk.cpv.163.188.IP) (A TLS packet with unexpected length was received.)
[19:28:12] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[19:28:12] -ghservo- [13servo] 15mrobinson opened pull request #6640: Add memory profiling for the compositor task (06master...06memory-profiling-for-compositor) 02http://git.io/vm4Bk
[19:28:12] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[19:29:29] *** Quits: rohin (rohin@moz-8rvdar.user.start.ca) (Ping timeout: 121 seconds)
[19:29:29] *** Joins: enaqx (enaqx@moz-dtk.cpv.163.188.IP)
[19:30:59] *** Quits: till (till@moz-on9rls.adsl.alicedsl.de) (Connection closed)
[19:31:21] *** Joins: till (till@moz-on9rls.adsl.alicedsl.de)
[19:38:00] *** Quits: akiss (akiss@moz-c6colr.inf.u-szeged.hu) (Ping timeout: 121 seconds)
[19:38:20] *** Quits: mukilan (mukilan@moz-mu4.o0o.164.122.IP) (A TLS packet with unexpected length was received.)
[19:50:55] *** Quits: mmatyas (mmatyas@moz-4lg94m.inf.u-szeged.hu) (Connection closed)
[19:50:59] *** Quits: mmatyas_ (mmatyas@moz-4lg94m.inf.u-szeged.hu) (Connection closed)
[19:52:56] *** Quits: Jackneill (Jackneill@moz-s7g5eg.pool.digikabel.hu) (A TLS packet with unexpected length was received.)
[19:53:34] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[19:53:59] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[19:53:59] *** ChanServ sets mode: +o pcwalton
[19:58:59] *** chmanchester is now known as chmanchester|afk
[19:59:18] *** Quits: jviereck (Adium@moz-9batfl.dip0.t-ipconnect.de) (Quit: Leaving.)
[20:09:42] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[20:09:42] -ghservo- [13unicode-bidi] 15mbrubeck opened pull request #11: Add Travis CI config (06master...06travis) 02http://git.io/vm4Xc
[20:09:42] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[20:11:16] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[20:11:16] -ghservo- [13saltfs] 15mbrubeck opened pull request #82: Add servo/unicode-bidi to homu (06master...06bidi) 02http://git.io/vm4Xb
[20:11:16] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[20:13:49] *** Joins: akiss (akiss@moz-quen0b.pool.digikabel.hu)
[20:16:05] *** Quits: enaqx (enaqx@moz-dtk.cpv.163.188.IP) (A TLS packet with unexpected length was received.)
[20:18:04] *** Joins: rohin (rohin@moz-8rvdar.user.start.ca)
[20:19:45] <pcwalton> ok, I have a better replacement for cross-process boxed trait objects working on Mac
[20:20:17] <SimonSapin> how does that work?
[20:21:02] <pcwalton> on Mac, ipc-channel now supports a "Router" which you can use to convert an IpcReceiver<T> into either (a) a callback that will execute an arbitrary function of your choice on a special router thread or (b) a Receiver<T> (which you can then select over)
[20:21:07] <pcwalton> (b) is just implemented as a special case of (a)
[20:21:14] <pcwalton> Linux shouldn't be hard to do
[20:21:28] <pcwalton> the Router uses only one thread per process, implemented as a lazy-static
[20:21:55] <pcwalton> so, for example, the resource task can enqueue runnables on the script thread whenever messages are received
[20:22:13] <pcwalton> and the layout task can just continue to use in-process Receivers as usual
[20:22:39] <SimonSapin> does this help with malicious vtables?
[20:22:52] <pcwalton> yeah, because the vtables stay in-process only
[20:23:04] <pcwalton> you still can't *really* send trait objects across threads
[20:23:10] <pcwalton> it's just that all the use cases I've found for it are subsumed by the Router
[20:23:33] <pcwalton> overhead is only one extra thread per process, and a couple of extra context switches on messages handled by the router
[20:23:47] <pcwalton> err, sorry -- you still can't really send trait objects across processes
[20:25:01] *** Quits: dwins (dwins@moz-9sdv1c.va.comcast.net) (A TLS packet with unexpected length was received.)
[20:25:30] <pcwalton> basically, the pattern is: instead of sending a trait object with a callback F across processes, send an IpcSender<T> and use the Router to connect the receiving end to callback F
[20:26:39] <pcwalton> I guess one annoyance is that right now you will leak callbacks forever
[20:27:00] <pcwalton> we'll need to use Mach port notifications to know when the send rights for the port have dropped to zeroâ€¦how annoying
[20:30:11] *** till is now known as till|brb
[20:31:30] *** Joins: jviereck (Adium@moz-9batfl.dip0.t-ipconnect.de)
[20:36:25] *** Quits: rohin (rohin@moz-8rvdar.user.start.ca) (Ping timeout: 121 seconds)
[20:37:33] *** Quits: filsmick (filsmick@moz-0qapam.abo.wanadoo.fr) (Quit: )
[20:38:56] <mbrubeck> r? anyone https://github.com/servo/unicode-bidi/pull/11
[20:38:56] <crowbot> PR #11: Add Travis CI config - https://github.com/servo/unicode-bidi/pull/11
[20:40:59] *** Quits: bdero (bran@moz-0jhegm.dyn.mit.edu) (Ping timeout: 121 seconds)
[20:41:17] *** Quits: ctp (textual@moz-k1m.esd.51.212.IP) (Ping timeout: 121 seconds)
[20:44:17] *** chmanchester|afk is now known as chmanchester
[20:44:54] <SimonSapin> r+
[20:45:22] *** Quits: FreeFull (freefull@moz-5141vd.range86-184.btcentralplus.com) (Quit: BBL)
[20:48:32] *** Quits: jviereck (Adium@moz-9batfl.dip0.t-ipconnect.de) (Quit: Leaving.)
[20:48:47] <pcwalton> the Mach headers use octal
[20:48:49] <pcwalton> why :(
[20:48:55] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[20:48:55] -ghservo- [13unicode-bidi] 15mbrubeck pushed 2 new commits to 06master: 02http://git.io/vm4xD
[20:48:55] -ghservo- 13unicode-bidi/06master 140c74b4c 15Matt Brubeck: Add Travis CI config
[20:48:55] -ghservo- 13unicode-bidi/06master 14076d8fe 15Matt Brubeck: Merge pull request #11 from mbrubeck/travis...
[20:48:55] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[20:49:21] <mbrubeck> (using the green button because the homu config hasn't landed yet)
[20:52:24] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[20:52:24] -ghservo- [13rust-layers] 15mrobinson opened pull request #192: Allow Scene to report its total memory usage (06master...06scene-memory-usage) 02http://git.io/vm4h2
[20:52:24] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[20:53:05] <pcwalton> perhaps at the end of the day I'll check to see how expensive SDFs are versus a plain old shader on the GPU
[20:53:11] <pcwalton> "plain old shader" meaning "color + texture"
[20:56:35] *** Joins: FreeFull (freefull@moz-5141vd.range86-184.btcentralplus.com)
[20:57:28] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[20:57:35] *** Joins: jdm (jdm@moz-ilbt2e.cable.teksavvy.com)
[20:57:35] *** ChanServ sets mode: +qo jdm jdm
[21:02:58] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[21:02:58] *** ChanServ sets mode: +o pcwalton
[21:03:27] *** Quits: Ms2ger (Ms2ger@moz-u01.vup.182.91.IP) (Quit: nn)
[21:05:08] *** Quits: jdm (jdm@moz-ilbt2e.cable.teksavvy.com) (Quit: )
[21:13:49] <gw> you mean generating sdf in the shader?
[21:15:50] *** Quits: barosl (barosl@moz-tmp.qma.67.220.IP) (Quit: Leaving)
[21:17:40] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[21:17:40] -ghservo- [13servo] 15michaelwu opened pull request #6641: Directly append children to output node in parse_html_fragment (06master...06direct-output) 02http://git.io/vmBLb
[21:17:40] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[21:18:44] *** Joins: enaqx (enaqx@moz-dtk.cpv.163.188.IP)
[21:19:38] *** Quits: kmicu (kmicu@moz-uga.edn.218.91.IP) (Client exited)
[21:20:30] <mwu> nox: another rootedvec removal in https://github.com/servo/servo/pull/6641
[21:20:30] <crowbot> PR #6641: Directly append children to output node in parse_html_fragment - https://github.com/servo/servo/pull/6641
[21:21:48] *** till|brb is now known as till
[21:22:22] *** Joins: ctp (textual@moz-k1m.esd.51.212.IP)
[21:22:48] *** Quits: enaqx (enaqx@moz-dtk.cpv.163.188.IP) (Ping timeout: 121 seconds)
[21:26:35] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[21:26:35] -ghservo- [13saltfs] 15bors-servo pushed 2 new commits to 06auto: 02http://git.io/vmBYU
[21:26:35] -ghservo- 13saltfs/06auto 142608032 15Matt Brubeck: Add servo/unicode-bidi to homu
[21:26:35] -ghservo- 13saltfs/06auto 14f37847a 15bors-servo: Auto merge of #82 - mbrubeck:bidi, r=metajack...
[21:26:35] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[21:28:33] *** Quits: ctp (textual@moz-k1m.esd.51.212.IP) (Ping timeout: 121 seconds)
[21:29:08] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[21:29:08] -ghservo- [13saltfs] 15bors-servo closed pull request #82: Add servo/unicode-bidi to homu (06master...06bidi) 02http://git.io/vm4Xb
[21:29:08] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[21:33:03] <mbrubeck> jack: Should that homu configuration be working now, or is there more stuff to happen?  I added the web hook, using "gh-webhook-secret" from servo-master:/srv/pillar/homu.sls
[21:37:06] *** Quits: cimes (cimes@moz-lvg.16c.135.128.IP) (Ping timeout: 121 seconds)
[21:37:59] *** Joins: enaqx (enaqx@moz-dtk.cpv.163.188.IP)
[21:42:24] <larsberg> mbrubeck: did you also git pull the updated saltfs repo and then run `salt servo-master state.highstate` on servo-master? That actually installs the change and HUPs necessary services.
[21:42:50] * larsberg is happy to do so, but just wanted to check
[21:42:51] <pcwalton> ok, fixed the leaks using Mach port notifications and added unit tests for it
[21:43:27] <larsberg> pcwalton: nice! You saw that the rustup landed last night, right? Is there anything else needed to start landing your IPC changes that required it?
[21:43:41] <pcwalton> I don't think so, thanks for doing that!
[21:44:02] <larsberg> np, mrobinson did the last bits to tie everything together and it luckily just sailed through the buildbots
[21:44:25] <pcwalton> I'm redoing IPC again to make the trait object thing better
[21:45:31] <larsberg> Excellent; this definitely sounds like it would be worthy of a blog post when it's landed, if it's not too much work. 
[21:46:03] <mbrubeck> larsberg: No, I haven't
[21:46:36] <larsberg> mbrubeck: I'll do that right now
[21:46:40] <mbrubeck> Thanks
[21:46:54] <jack> mbrubeck: sorry for the high latency in meetings all day today :)
[21:47:01] *** Joins: naudtov (naudtov@moz-21c.726.16.75.IP)
[21:47:10] <larsberg> mbrubeck: Done!
[21:48:32] *** Quits: ahal (ahal@moz-b8e0a0.cpe.pppoe.ca) (A TLS packet with unexpected length was received.)
[21:48:54] <mbrubeck> larsberg: Okay, now the webhook is returning error 400 "Invalid signature" https://github.com/servo/unicode-bidi/settings/hooks/5313310
[21:50:09] <mbrubeck> Oh, it's working!
[21:52:02] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[21:52:02] -ghservo- [13unicode-bidi] 15mbrubeck closed pull request #10: Fix issues found in initial review (06master...06review) 02http://git.io/vmB8u
[21:52:02] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[21:52:06] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[21:52:06] -ghservo- [13unicode-bidi] 15mbrubeck reopened pull request #10: Fix issues found in initial review (06master...06review) 02http://git.io/vmB8u
[21:52:06] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[21:56:11] *** Joins: ghservo (ghservo@moz-0l2.5u0.30.192.IP)
[21:56:11] -ghservo- [13unicode-bidi] 15bors-servo pushed 8 new commits to 06auto: 02http://git.io/vmB4x
[21:56:11] -ghservo- 13unicode-bidi/06auto 14c433b01 15Matt Brubeck: Fix loop behavior in visual_runs
[21:56:11] -ghservo- 13unicode-bidi/06auto 141ca45bb 15Matt Brubeck: Comment on spec omissions
[21:56:11] -ghservo- 13unicode-bidi/06auto 149ff3086 15Matt Brubeck: Fix comment typos
[21:56:11] *** Parts: ghservo (ghservo@moz-0l2.5u0.30.192.IP) ()
[21:56:29] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[21:56:29] -ghservo- [13servo] 15glennw opened pull request #6642: gleam 0.1.3 + fix cargo.lock for cef/gonk (06master...06gleam0.1.3) 02http://git.io/vmB4p
[21:56:29] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[21:57:53] *** Quits: sneakyness (textual@moz-tmbr33.biz.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[21:58:10] *** Quits: dzbarsky (Adium@moz-mukjmn.fios.verizon.net) (Ping timeout: 121 seconds)
[21:58:47] *** Joins: dzbarsky (Adium@moz-mukjmn.fios.verizon.net)
[21:59:00] *** Quits: tikue (tim@moz-n71.k1b.0.198.IP) (Connection closed)
[22:01:15] <mbrubeck> larsberg: Do you know what's up with https://github.com/servo/unicode-bidi/pull/10 ? It says it's "waiting" but I'm not sure what if any test jobs are running.
[22:01:15] <crowbot> PR #10: Fix issues found in initial review - https://github.com/servo/unicode-bidi/pull/10
[22:01:51] <SimonSapin> mbrubeck: You can check on https://travis-ci.org/servo/unicode-bidi/requests
[22:02:03] <SimonSapin> (reachable from Settings on the top right)
[22:02:27] <mbrubeck> Travis is all green but homu hasn't reacted.  Maybe my .travis.yml isn't set up right?
[22:02:40] <mbrubeck> it has the http://build.servo.org:54856/travis web hook
[22:02:52] <SimonSapin> it does
[22:02:54] *** Quits: laleh (Adium@moz-h8636h.mobile.uci.edu) (Quit: Leaving.)
[22:02:58] <SimonSapin> does homu need to be redeployed?
[22:03:23] <larsberg> I just did a redeploy/update of homu after the saltfs changes landed
[22:03:28] *** Joins: pwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[22:03:28] *** ChanServ sets mode: +o pwalton
[22:05:03] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Ping timeout: 121 seconds)
[22:06:02] <larsberg> mbrubeck: I don't know what's going on - might have to wait for jack to get out of meetings (possibly dinner, too) tonight to look at it. Sorry :-(
[22:06:18] <SimonSapin> does homu have logs?
[22:06:19] <mbrubeck> I'll try rerunning the Travis build for now...
[22:07:02] *** Quits: pwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Connection closed)
[22:07:08] *** Quits: enaqx (enaqx@moz-dtk.cpv.163.188.IP) (A TLS packet with unexpected length was received.)
[22:13:38] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[22:13:38] *** ChanServ sets mode: +o pcwalton
[22:14:42] *** Joins: cimes (cimes@moz-sfmbhq.il.comcast.net)
[22:14:52] *** Quits: acgtyrant (acgtyrant@moz-v9p.mqv.201.115.IP) (Ping timeout: 121 seconds)
[22:15:38] *** Joins: acgtyrant (acgtyrant@moz-v9p.mqv.201.115.IP)
[22:17:14] *** Joins: matiaslina (matias@moz-ufm.jl5.11.190.IP)
[22:17:43] <jack> oh, we need to sync homu
[22:17:56] <jack> that has to be done via its web api
[22:18:10] <jack> by clicking synchronize here: http://build.servo.org/homu/queue/unicode-bidi
[22:18:22] <jack> mbrubeck: try now
[22:18:36] <jack> (i just clicked that button and the prs now show up in homu's queue page)
[22:18:38] <SimonSapin> jack: Is that the "turn it off and on again" button?
[22:18:59] <gw> is there a way to get the stdout/stderr of tests from the reftest framework to print out? I seem to recall there is an env var you can set for the test framework?
[22:19:17] <jack> SimonSapin: no. homu doesn't every poll unless explicitly asked to in the web interface
[22:19:27] <jack> so when you add a new repo, it ca't know about pull requests that are already open
[22:19:35] <mbrubeck> I had pressed the sync button, and saw the PRs show up
[22:19:39] <jack> s/every/ever/
[22:19:42] <mbrubeck> and then I left an r+ comment and it picked that up
[22:19:49] <jack> did travis build it?
[22:19:52] <mbrubeck> but it never changed from "pending" to "merged" when the resulting Travis build finished
[22:20:06] <jack> oh
[22:20:07] *** Quits: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP) (Connection closed)
[22:20:15] <jack> di dyou update .travis.yml to add the travis notifications to homu? :)
[22:20:38] <mbrubeck> Yup, travis build: https://travis-ci.org/servo/unicode-bidi/builds/71159991
[22:20:50] <mbrubeck> yes
[22:21:06] <mbrubeck> https://github.com/servo/unicode-bidi/blob/auto/.travis.yml
[22:21:23] *** Joins: ctp (textual@moz-k1m.esd.51.212.IP)
[22:21:31] <jack> did you update the travis webhook to use the same token that homu uses?
[22:21:44] <jack> often those have us as the owner instead of bors-servo
[22:21:50] <jack> so the tokens don't match
[22:22:02] <jack> my script updates the travis hooks to use bors-servo and bors-servo's token
[22:22:26] <mbrubeck> Hmm, I don't think I did anything with tokens...
[22:24:34] <mbrubeck> Okay, updated the Travis CI webhook at https://github.com/servo/unicode-bidi/settings/hooks/5313315 to use @bors-servo and the "travis-ci-token" from /srv/pillar/homu.sls
[22:24:51] <jack> https://github.com/servo/unicode-bidi/settings/hooks/5313315 looks right
[22:25:05] <jack> retry the build now and see if travis notifies homu
[22:25:41] <mbrubeck> restarted https://travis-ci.org/servo/unicode-bidi/builds/71159991
[22:26:31] *** Joins: fkaa_ (fkaa@moz-kkuc5p.cust.tele2.se)
[22:27:11] <mbrubeck> Still nothing, but maybe I need to force a new Travis build instead?
[22:27:16] * mbrubeck tries closing/reopening the PR again
[22:27:22] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[22:27:22] -ghservo- [13unicode-bidi] 15mbrubeck closed pull request #10: Fix issues found in initial review (06master...06review) 02http://git.io/vmB8u
[22:27:22] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[22:27:25] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[22:27:25] -ghservo- [13unicode-bidi] 15mbrubeck reopened pull request #10: Fix issues found in initial review (06master...06review) 02http://git.io/vmB8u
[22:27:25] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[22:27:26] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[22:27:26] -ghservo- [13unicode-bidi] 15bors-servo pushed 8 new commits to 06auto: 02http://git.io/vmBVp
[22:27:26] -ghservo- 13unicode-bidi/06auto 14c433b01 15Matt Brubeck: Fix loop behavior in visual_runs
[22:27:26] -ghservo- 13unicode-bidi/06auto 141ca45bb 15Matt Brubeck: Comment on spec omissions
[22:27:26] -ghservo- 13unicode-bidi/06auto 149ff3086 15Matt Brubeck: Fix comment typos
[22:27:26] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[22:28:38] *** Quits: fkaa (fkaa@moz-501od2.business.telia.com) (Ping timeout: 121 seconds)
[22:28:41] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[22:28:41] -ghservo- [13unicode-bidi] 15bors-servo merged 06auto into 06master: 02http://git.io/vmBVp
[22:28:41] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[22:28:46] <mbrubeck> \o/
[22:33:23] *** Joins: laleh (Adium@moz-h8636h.mobile.uci.edu)
[22:33:54] *** Joins: enaqx (enaqx@moz-dtk.cpv.163.188.IP)
[22:34:23] *** Quits: enaqx (enaqx@moz-dtk.cpv.163.188.IP) (A TLS packet with unexpected length was received.)
[22:34:25] *** Joins: enaqx (enaqx@moz-dtk.cpv.163.188.IP)
[22:35:12] *** Joins: sneakyness (textual@moz-tmbr33.biz.rr.com)
[22:39:52] <gw> interesting segfault... https://pastebin.mozilla.org/8839642
[22:40:55] <mwu> the asmjs part?
[22:41:24] <gw> well, yea. that the amd gl driver is raising a signal which is caught by mozjs :|
[22:41:35] <mwu> I think it's just always there
[22:41:42] <gw> ok
[22:42:45] <mwu> gw: http://www.jandemooij.nl/blog/2014/02/18/using-segfaults-to-interrupt-jit-code/ see the odinmonkey section
[22:43:38] <gw> mwu: interesting, thanks.
[22:43:44] <jack> gw: can you take a look quick at why this doesn't work in servo (also prints no errors): http://enyojs.com/sampler/latest/
[22:44:03] * gw has no idea why changing 3 lines of unrelated code is causing X11 segfaults
[22:44:06] <gw> because X I guess
[22:44:11] <mwu> cuz X
[22:44:13] <gw> jack: looking
[22:44:18] <mwu> time to turn on sync?
[22:45:03] <gw> probably, yea
[22:45:08] *** Quits: nefzaoui (nefzaoui@moz-hh3.a0i.228.41.IP) (Ping timeout: 121 seconds)
[22:48:49] *** Joins: bdero (bran@moz-nr0176.b90n.1kaj.018d.2601.IP)
[22:49:39] *** Quits: ldng (ldng@moz-j945dl.abo.bbox.fr) (Connection closed)
[22:54:06] <gw> jack: the display list seems to match the flow tree. the flow tree is very small, and looks to be roughly what you see on screen. maybe one of the xhrs isn't working, and it's not creating all the dom nodes or something. still looking
[22:58:17] *** Joins: mr_bootrexx (Mibbit@moz-hu6.nja.252.72.IP)
[22:58:29] <gw> do we support synchronous xhr?
[23:03:00] <pcwalton> ok, got routing working on linux
[23:03:07] <pcwalton> now to redo my IPC PRs
[23:03:16] <pcwalton> this should make people happier
[23:06:05] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[23:06:59] *** Quits: mr_bootrexx (Mibbit@moz-hu6.nja.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[23:10:08] *** Quits: ctp (textual@moz-k1m.esd.51.212.IP) (Ping timeout: 121 seconds)
[23:16:01] *** Joins: nattokirai (nattokirai@moz-j1b.ii6.5.103.IP)
[23:21:26] *** Joins: ctp (textual@moz-k1m.esd.51.212.IP)
[23:23:19] *** Quits: nattokirai (nattokirai@moz-j1b.ii6.5.103.IP) (Client exited)
[23:26:26] *** Quits: enaqx (enaqx@moz-dtk.cpv.163.188.IP) (A TLS packet with unexpected length was received.)
[23:28:17] *** Quits: eibwen (eibwen@moz-14h7fq.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[23:28:53] *** Quits: Nekit1234007 (nekit@moz-t2fg7e.broadband.iskratelecom.ru) (Quit: Lost terminal)
[23:43:37] *** Quits: sneakyness (textual@moz-tmbr33.biz.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[23:51:58] *** Quits: Savago (Savago@moz-8hd.3b6.246.162.IP) (Client exited)
[23:53:50] *** AutomatedTester is now known as AutomatedTester|AFK
[23:58:29] <pcwalton> we have a crate just for "memchr"
[23:58:33] *** Joins: sneakyness (textual@moz-tmbr33.biz.rr.com)
[23:58:37] <pcwalton> I thought it surely must be doing something than binding memchr
[23:58:40] <pcwalton> but no, that's what it does
[23:58:47] *** Quits: fkaa_ (fkaa@moz-kkuc5p.cust.tele2.se) (Ping timeout: 121 seconds)
[23:59:23] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[23:59:41] <larsberg> see also num_cpus
