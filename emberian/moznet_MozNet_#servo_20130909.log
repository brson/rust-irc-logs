[12:56:38] *** Joins: cmr (moznet@moz-EC676DFE.members.linode.com)
[12:56:59] *** Quits: CaseyBecking (CaseyBecki@moz-7EBF4B5D.lsanca.fios.verizon.net) (Broken pipe)
[12:57:59] *** Quits: kanru` (kanru@3BFFCBBC.ED95B50E.EDDC15BA.IP) (Ping timeout)
[12:58:04] *** Joins: CaseyBecking (CaseyBecki@moz-7EBF4B5D.lsanca.fios.verizon.net)
[12:58:11] <cmr> Hello servo people. I'm looking to improve extra::url (previously known as extra::net::url), are there any improvements Servo wants or needs but hasn't gotten around to yet?
[13:01:31] <SimonSapin> Hi cmr. Does extra::url support resolving relative URLs?
[13:01:58] <SimonSapin> A quick looks at the docs does not turn up anything
[13:02:00] <cmr> SimonSapin: Not presently, no.
[13:02:42] <cmr> I imagine you'd want to give an existing Url a resource and have it return a new one with the result of the resolution?
[13:02:55] *** Joins: annevk (annevk@88F51059.F3BBB17D.144F44FA.IP)
[13:03:39] <SimonSapin> Also it should ideally be based on http://url.spec.whatwg.org/ rather than the RFCs
[13:04:09] <SimonSapin> whatwg.org seems down at the moment, but the same spec is at https://github.com/whatwg/url
[13:04:16] <SimonSapin> or http://rawgithub.com/whatwg/url/master/url.html
[13:05:26] <SimonSapin> yes, the parser takes an input string and an optional base URL as a parsed object
[13:05:47] <SimonSapin> (and other stuff too http://rawgithub.com/whatwg/url/master/url.html#parsing )
[13:07:39] <cmr> I see this required utf16 (as it's intended for the DOM, I imagine). How does servo deal with the mismatch between Rust strings and DOM strings?
[13:09:17] <SimonSapin> thatâ€™s still an open question, unfortunately
[13:09:25] *** Quits: CaseyBecking (CaseyBecki@moz-7EBF4B5D.lsanca.fios.verizon.net) (Client exited)
[13:09:46] <SimonSapin> well, the API part of the spec is for JavaScript
[13:09:46] <annevk> cmr: it doesn't require utf-16...
[13:09:57] <annevk> cmr: that's some misleading IDL syntax :/
[13:10:30] *** Joins: CaseyBecking (CaseyBecki@moz-7EBF4B5D.lsanca.fios.verizon.net)
[13:10:43] <SimonSapin> I donâ€™t think the Rust API needs to be exactly the same, as long as the same data an behavior is exposed
[13:10:59] <annevk> yeah don't do the same API
[13:11:20] <bz_sleep> cmr: the string situation is an unholy mess, as usual
[13:11:32] <annevk> I think the API you want in Rust is basically http://rawgithub.com/whatwg/url/master/url.html#concept-url
[13:11:53] <annevk> Euhm http://rawgithub.com/whatwg/url/master/url.html#concept-parsed-url
[13:12:19] <SimonSapin> we might have to use [u16] for strings in Servo because of JavaScript, but I think that extra::url should still use &str
[13:13:08] <annevk> perf might dictate otherwise long term
[13:13:22] <annevk> but it should be easy enough to twiddle those details later on, no?
[13:13:37] <bz_sleep> the string representation?  ;)
[13:14:07] <annevk> bz_sleep: well not in general :) but say the strings a URL parser deals with
[13:14:30] <annevk> it would be rather good though if we figured out what we wanted for Rust sooner
[13:14:31] <SimonSapin> Servo might end up duplicating the code to work on a different string representation, but I donâ€™t think that Servo constraints should affect Rustâ€™s libstd/libextra
[13:15:01] <cmr> I agree
[13:15:04] <annevk> given that Servo is Rust's #1 use case, that seems rather odd
[13:15:32] <cmr> annevk: as a rust contributor and someone who uses rust for all of his side projects, I find that offensive :)
[13:16:44] <annevk> building a browser with strings that are not 16bit unsigned integers is rather problematic
[13:17:04] <bz_sleep> In the end, the complexity has to live somewhere to keep the microbenchmarg gods happy
[13:17:05] <SimonSapin> cmr: Ignore annevk and let him pretend that anything that isnâ€™t a web browser doesnâ€™t exist ;)
[13:17:26] <bz_sleep> Either in SpiderMonkey or in Servo or in Rust
[13:17:42] <bz_sleep> annevk: and building one with strings that _are_ that is as well
[13:18:03] <bz_sleep> annevk: note the attempts in WebKit/Blink to move to a dual representation to save memory
[13:18:30] <annevk> bz_sleep: I can see dual representation, I could even see CESU-8 making a comeback
[13:18:50] <annevk> bz_sleep: but Rust has an attempt at pure utf-8, which is none of that
[13:19:14] * dbaupp wishes we could just iconv the entire web to utf8
[13:19:15] <annevk> and in particular does not deal well with JavaScript's imposed legacy
[13:19:19] <bz_sleep> annevk: well, if you only use your strings for actual text...
[13:19:26] <bz_sleep> dbaupp: How the heck would that help?
[13:19:38] <bz_sleep> dbaupp: the web uses "strings" for non-text
[13:19:54] <bz_sleep> dbaupp: as in, as generic arrays of uint16_t
[13:20:03] <dbaupp> bz_sleep: seriously? :(
[13:20:12] <Ms2ger> Welcome to the web
[13:20:12] <bz_sleep> dbaupp: Uh.... yes, very seriously
[13:20:18] <Ms2ger> And good morning, sleeping bz
[13:20:22] <bz_sleep> dbaupp: And very commonly
[13:20:25] *** bz_sleep is now known as bz
[13:20:26] *** Joins: ahal (ahal@13F2CEC5.7672369.D8E68FF6.IP)
[13:20:27] <annevk> You have to go back to '94 or so and convince Brendan not to base JavaScript's string design on Java
[13:20:29] <bz> Good morning
[13:20:40] <bz> dbaupp: I mean, it's not like JS offered an alternative!
[13:20:40] * dbaupp leaves the conversation he clearly knows nothing about :)
[13:20:50] <bz> dbaupp: or does even now; consider atob
[13:21:07] <bz> annevk: I'm not sure it was Brendan's call per se.  :(
[13:21:24] <bz> Anyway, web strings are like C strings: strings in name only
[13:21:27] <annevk> bz: I think what abarth cooked up for Blink looks quite nice, though it only optimizes for ASCII
[13:21:29] <bz> But take more space.
[13:21:31] <annevk> bz: might be enough though
[13:21:42] <Ms2ger> annevk, might as well go back further and invent utf-8 before computers happened ;)
[13:21:55] <bz> annevk: True.
[13:22:21] * bz is a bit worried by how much code we already have without having really sorted out the string issue. :(
[13:22:29] <bz> Because converting after the fact is a huge PITA
[13:22:38] <SimonSapin> And Unicode. And have the Han unification debate by paper mail
[13:22:44] <jgraham> Uh, yeah, this doesn't seem good
[13:23:10] <Ms2ger> Afaict, we'll need to drop all mentions of ~str
[13:23:30] <Ms2ger> Also, not share any code with anyone
[13:23:36] <annevk> bz: agreed, I have tried to run through it several times, I think you can't get away with utf-8-based strings anywhere in the platform
[13:23:42] <cmr> probably, though you can implement the string traits on whatever it is you replace it with
[13:23:44] <annevk> bz: only the network layer is that pure
[13:23:55] <annevk> bz: everything else is poisoned
[13:24:39] <Ms2ger> (You wonder why we drink? Here's why.)
[13:24:40] <cmr> What operations does a rendering engine actually need to do on strings though? I imagine most of it is very limited, in the dom.
[13:24:43] <dbaupp> cmr: there's a few that assume utf8-ness, I believe. (e.g. `as_slice()`) so they'd need to be carefully rearranged.
[13:24:44] <annevk> and the more hooks we give to scripts long term, the more will be poisoned
[13:25:08] <dbaupp> cmr: and pretty much nothing is generic over the various string types, so it'd be pretty useless atm.
[13:25:13] <cmr> dbaupp: yeah
[13:25:23] <jgraham> cmr: Well yeah, the whole DOM and parser (HTML, CSS) and so on
[13:25:28] <annevk> e.g. with NavigationController the network layer might become poisoned I suspect
[13:25:37] <SimonSapin> dbaupp: wouldnâ€™t it work to treat indices as opaque integers that come from other methods?
[13:25:55] <dbaupp> SimonSapin: i.e. for slice() etc?
[13:25:59] <SimonSapin> yeah
[13:26:22] <dbaupp> yeah, but the return types would need to be made generic too
[13:26:36] <SimonSapin> oh, ok
[13:26:59] <annevk> I wonder if dual string types would be an option for a language
[13:27:00] <SimonSapin> I was thinking of the meaning of the index positions
[13:27:06] <dbaupp> i.e. utf16.slice(2, 4) can't return &str (as slice currently does) without allocating and reencoding as utf8
[13:27:27] <dbaupp> (and this is impossible)
[13:27:30] <annevk> One that's pure and one that's somewhat borked but can be cast into the pure one (using FFFD)
[13:28:04] <annevk> I guess the other thing you'd want to change is to not expose the underlying representation as Rust does now...
[13:28:35] <bz> cmr: well, there's the actual text rendering bit....
[13:29:02] <cmr> bz: ah yes, that too
[13:29:10] <cmr> strings, strings everywherre :(
[13:30:59] <jgraham> And all the formats stink?
[13:31:13] *** Quits: CaseyBecking (CaseyBecki@moz-7EBF4B5D.lsanca.fios.verizon.net) (Client exited)
[13:31:26] <annevk> I think 16-bit unsigned integers as underlying representation with some kind of extra-safe Unicode scalar value wrapper might be the way to go. Plus the ASCII optimization Blink has.
[13:32:14] <annevk> Most Rust code could use the extra-safe wrapper. The browser would use the still safe 16-bit representation. And memory for pure ASCII would be kept to a minimum.
[13:32:18] *** Joins: CaseyBecking (CaseyBecki@moz-7EBF4B5D.lsanca.fios.verizon.net)
[13:33:06] <annevk> Pure utf-8 is nice, but incompatible with the web platform.
[13:34:48] <SimonSapin> but Rust is not just for the web platform, and Iâ€™m not convinced these constraints should influence fundamental choices in the language
[13:35:04] <Ms2ger> Right
[13:35:11] <Ms2ger> Which means Servo reinvents everything
[13:35:42] *** Joins: jdsanders (Adium@moz-8527430D.hlrn.qwest.net)
[13:35:49] <annevk> SimonSapin: "not just" doesn't matter
[13:36:03] <jgraham> Well it does
[13:36:05] <annevk> SimonSapin: it's *also* for writing a browser and you cannot write a browser with pure utf-8-based strings
[13:37:18] <annevk> SimonSapin: and if the browser cannot use any of the standard libraries because it requires a completely different string format, it's kinda fucked in terms of setup
[13:37:30] <Ms2ger> annevk, you mean like in C++
[13:37:41] <SimonSapin> Nothing prevents Servo from using [u16]. What Iâ€™m saying is that Servo should not be a *sufficient* reason to make the default worse for everyone else
[13:38:16] <annevk> As you long as you provide a Unicode scalar value wrapper it's not worse
[13:38:17] <jgraham> There are only two real choices. Either rust uses web-compatible strings and servo looks like normal rust code, possibly at the expense of non-servo use cases, or servo invents its own string type and can't reuse anything from the wider ecosystem, but possibly allowing non-sero rust to be slightly nicer
[13:38:34] <cmr> annevk: What does unicode scalar value wrapper mean?
[13:38:47] *** Quits: eagen (eagen@8737942B.7A99C13A.B7961A98.IP) (Quit: Leaving)
[13:38:51] <annevk> cmr: same value space as pure-utf-8-based strings basically
[13:39:05] <annevk> jgraham: right
[13:39:38] <annevk> jgraham: having to write all fundamental libraries twice for a small project seems like an obvious non-starter
[13:39:49] <annevk> although people here seem to think otherwise...
[13:40:21] <SimonSapin> I donâ€™t know how much really needs to be written twice
[13:40:23] <cmr> What from the wider ecosystem that deals with strings would servo use?
[13:40:33] <cmr> I can see lots of non-string things
[13:40:57] <Ms2ger> Well
[13:41:08] <Ms2ger> It'd be nice to not reimplement URL parsing
[13:41:09] <annevk> SimonSapin: Encoding / URL / HTML / CSS / JavaScript / Networking
[13:41:11] <Ms2ger> encodings
[13:41:16] <annevk> SimonSapin: at least if you want to prevent lots of conversion
[13:41:30] <annevk> SimonSapin: which you do, see bz's remark about microbenchmarks above
[13:41:50] <jgraham> cmr: Potentially a lot of things
[13:42:11] <jgraham> The HTML / CSS parsers could be standalone libraries, for example
[13:42:13] <Ms2ger> Count the servo submodules :)
[13:43:06] *** Quits: CaseyBecking (CaseyBecki@moz-7EBF4B5D.lsanca.fios.verizon.net) (Client exited)
[13:43:07] <jgraham> My feeling is that making rust servo compatible here is a bigger win for rust than making it different
[13:43:10] <Ms2ger> (We'd probably want some kind of refcounted string anyway)
[13:43:30] <cmr> My feeling is the oppposite but all of the evidence points the other way.
[13:43:31] <jgraham> Because servo can bootstrap the ecosystem
[13:44:10] *** Joins: CaseyBecking (CaseyBecki@moz-7EBF4B5D.lsanca.fios.verizon.net)
[13:45:32] <Ms2ger> Points which way?
[13:46:11] <bz> reusing a CSS parser is not like reusing a URL parser
[13:46:28] <bz> since the former mutates like a fruit fly in a nuclear reactor
[13:46:31] <bz> unlike the latter
[13:46:40] <bz> the HTML parser is somewhere in between
[13:46:54] <SimonSapin> CSS doesnâ€™t actually have that many strings that are directly exposed to JS
[13:46:56] *** Joins: kanru` (kanru@355BB431.4EA043EC.B62AF9C3.IP)
[13:47:07] <Ms2ger> SimonSapin, you mean, except "all of them"?
[13:47:21] <bz> Though a web browser wants things out of its HTML parser that other consumers do not
[13:47:27] <bz> (hello, speculative tokenizer)
[13:47:30] <SimonSapin> eg. property names would internally be enums rather than actual strings
[13:47:58] <bz> For CSS, the main question is what string format the parser takes as input
[13:48:08] <bz> and what strings you can provide
[13:48:10] <bz> there are two cases
[13:48:38] <SimonSapin> the parserâ€™s input is whatever the character decoderâ€™s output is
[13:48:41] <bz> 1)  <style>.  This starts as a DOM text node for input.  Wholesale conversion to UTF-8 might not be fatal
[13:48:51] <bz> Note that character decoders are NOT involved in case 1
[13:49:00] <SimonSapin> ah yes, indeed
[13:49:04] <bz> 2) <link>.  This takes whatever character decoders output.
[13:49:15] <Ms2ger> They're involved at some point
[13:49:20] <bz> In Gecko, that's UTF-16, but maybe servo should do UTF-8 or both
[13:49:33] <bz> ms2ger: well, assuming you store your DOM as UTF-16....
[13:49:45] <bz> ms2ger: not at the point at which the CSS parser cares.
[13:49:50] <Ms2ger> Right
[13:50:15] <bz> Ms2ger: and even then, the <style> could be constructed purely through the DOM
[13:50:22] <bz> ms2ger: gmail used to do that
[13:50:26] <Ms2ger> Fun
[13:50:31] <annevk> There's a lot of things that do that...
[13:50:36] <bz> Sure
[13:51:04] <bz> The thing is, it might be ok to convert to UTF-8 at the point at which you enter the CSS parser if need be
[13:51:17] <bz> Once you do...
[13:51:29] <Ms2ger> bz, on an unrelated note, do you have someone who can review a few thousand lines of page loading tests?
[13:51:45] <bz> ms2ger: not offhand
[13:51:55] <annevk> bz: UAs now I think allow storing lone surrogates for certain CSS values
[13:52:02] <bz> In Gecko's CSS parser, strings get used for the following bits:
[13:52:19] <bz> annevk: via the parser, or CSSOM?
[13:52:22] <annevk> bz: might be okay to break that, but I'm not sure why we'd do that, and CSS is of course not the only consideration here
[13:52:30] <annevk> bz: JavaScript
[13:52:32] <bz> 1)  Attribute values
[13:52:43] <bz> e.g. [foo=bar]
[13:52:54] <bz> 2) Generated content
[13:53:33] <bz> 3)  interning (for .foo, #foo, attribute names in [foo=bar])
[13:53:38] <bz> 4) Probably :lang
[13:53:59] <SimonSapin> bz: URLs?
[13:54:15] <bz> Probably
[13:54:17] <annevk> user-defined idents
[13:54:24] <Ms2ger> Variables
[13:54:25] * bz can't recall whether we store those as UTF-8 or not
[13:54:34] <bz> annevk: right, so counter names and the like
[13:55:00] *** Quits: CaseyBecking (CaseyBecki@moz-7EBF4B5D.lsanca.fios.verizon.net) (Client exited)
[13:55:04] <bz> annevk: but those would be ok either way if we don't allow unpaired surrogates in them already
[13:55:23] <bz> annevk: since those, unlike generated content, don't have to interact with the rest of the system
[13:55:43] <annevk> bz: if we don't...
[13:56:05] *** Joins: CaseyBecking (CaseyBecki@moz-7EBF4B5D.lsanca.fios.verizon.net)
[13:56:33] <annevk> bz: even if the rest of the system doesn't care though, you might expect that writing and reading doesn't do any transformation
[13:56:48] <annevk> bz: I'm not entirely sure yet text rendering actually needs to care about lone surrogates for instance
[13:57:03] <bz> It's worth testing what UAs do
[13:57:16] <bz> I agree that manipulation via CSSOM probably allows sneaking in lone surrogates
[13:57:34] <bz> But parsing from source...
[13:57:36] *** Joins: heiress (royalty@moz-9FE842F.cpe.net.cable.rogers.com)
[13:57:36] * bz checks
[13:57:54] *** Joins: caitp__ (royalty@moz-9FE842F.cpe.net.cable.rogers.com)
[13:58:10] <annevk> The other question is whether making CSS safe from lone surrogates is worth the "perf hit" and whether it's actually helping solving the larger issue.
[13:58:12] *** Quits: heiress (royalty@moz-9FE842F.cpe.net.cable.rogers.com) (Client exited)
[13:58:50] <bz> Unclear
[13:59:00] <bz> re whether gecko allows lone surrogates via the parser
[13:59:13] <annevk> JavaScript's presence throughout the system will keep growing I suspect, so all the conversion will hurt even more.
[13:59:34] <bz> Looks like it does except via escapes
[13:59:39] <bz> well
[14:00:01] <bz> Yeah
[14:02:26] *** Quits: ahal (ahal@13F2CEC5.7672369.D8E68FF6.IP) (Input/output error)
[14:02:52] *** Joins: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP)
[14:04:15] <annevk> bz: do you know if this is on the radar somewhere?
[14:04:32] <annevk> bz: seems kinda fundamental to get the string design right ;/
[14:05:35] *** Joins: ahal (ahal@13F2CEC5.7672369.D8E68FF6.IP)
[14:06:02] * bz sighs
[14:06:07] <bz> I keep trying to bring it up
[14:06:12] <bz> and it keeps getting punted, more or less.
[14:06:25] <Ms2ger> https://github.com/mozilla/servo/issues/282
[14:07:09] *** Quits: CaseyBecking (CaseyBecki@moz-7EBF4B5D.lsanca.fios.verizon.net) (Client exited)
[14:08:13] *** Joins: CaseyBecking (CaseyBecki@moz-7EBF4B5D.lsanca.fios.verizon.net)
[14:10:12] <annevk> added a comment
[14:19:08] *** Quits: CaseyBecking (CaseyBecki@moz-7EBF4B5D.lsanca.fios.verizon.net) (Ping timeout)
[14:21:00] *** Quits: kanru` (kanru@355BB431.4EA043EC.B62AF9C3.IP) (Ping timeout)
[14:21:09] *** Joins: eagen (eagen@8737942B.7A99C13A.B7961A98.IP)
[14:26:00] <annevk> cmr: in any event, you're gonna work on a new URL parser?
[14:32:16] *** Joins: dzbarsky (Adium@moz-CC308D8F.wireless-pennnet.upenn.edu)
[14:33:31] *** Parts: jdsanders (Adium@moz-8527430D.hlrn.qwest.net) ()
[14:35:29] *** Joins: kimundi (kimundi@moz-12AAE460.dip0.t-ipconnect.de)
[14:35:36] *** Joins: kanru` (kanru@moz-CBD3E512.static.cust.telenor.com)
[14:54:44] *** Joins: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP)
[15:07:05] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[15:07:06] <ghservo> 01[13servo01] 15bors-servo pushed 0 new commits to 06auto: 02http://git.io/kmAlkw
[15:07:06] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[15:07:07] *** Joins: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP)
[15:07:07] <ghservo> 01[13servo01] 15bors-servo pushed 2 new commits to 06auto: 02http://git.io/W7lRUA
[15:07:07] <ghservo> 13servo/06auto 14fe46fb2 15Ms2ger: Handle doctype.textContent correctly....
[15:07:07] <ghservo> 13servo/06auto 14150f03e 15bors-servo: auto merge of #890 : Ms2ger/servo/textcontent-getter-bug, r=jdm...
[15:07:07] *** Parts: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP) ()
[15:11:30] *** Joins: jdm (jdm@moz-2C5514D1.lightspeed.sntcca.sbcglobal.net)
[15:11:30] *** ChanServ sets mode: +o jdm
[15:14:22] <Ms2ger> jdm, anything I can do for the global object PR?
[15:14:39] <jdm> Ms2ger: is that not landed yet?
[15:14:51] <jdm> curious
[15:15:07] <Ms2ger> https://github.com/mozilla/servo/pull/883? Doesn't seem to
[15:15:24] <jdm> yeah, I need to address kmc's comment
[15:16:47] <jdm> Ms2ger: so it looks like a node needs to always be associated with a document, but we should have some other means of determining whether it's in a document besides ownerDoc
[15:16:57] <jdm> does that sound correct?
[15:17:12] <Ms2ger> jdm, what do you mean by "in a document"?
[15:17:25] <Ms2ger> "In a tree that chains up to a Document"?
[15:17:28] <jdm> right
[15:17:41] <Ms2ger> Yeah, that's something else entirely
[15:18:08] <jdm> yeah, what I originally used that information for was sending out reflow requests on attribute changes
[15:20:15] <Ms2ger> You'd probably either store a boolean, or a pointer to the subtree root
[15:20:36] <jdm> Ms2ger: subtree root?
[15:21:05] <jgraham> Why would you want a pointer to the subtree root?
[15:21:34] <jgraham> IS there some case where it's useful for a disconnected subtree?
[15:21:40] <Ms2ger> I think we use it for cycle collection optimizations
[15:21:46] <jgraham> Ah
[15:22:59] <Ms2ger> jdm, what you get when you follow .parentNode until you get a null
[15:23:05] <jdm> aha
[15:23:35] <Ms2ger> Range might want it too
[15:24:17] <Ms2ger> And there's a caller near HTMLPropertiesCollection?
[15:24:28] <Ms2ger> But the boolean is probably good enough
[15:25:36] *** Quits: dzbarsky (Adium@moz-CC308D8F.wireless-pennnet.upenn.edu) (Connection reset by peer)
[15:25:39] *** Joins: dzbarsky1 (Adium@moz-CC308D8F.wireless-pennnet.upenn.edu)
[15:26:29] <jgraham> Probably OK for range to be slow until you run Aryeh's tests :)
[15:28:40] <Ms2ger> Not sure if there's a Range implementation yet
[15:31:18] <jgraham> Pretty sure there isn't
[15:32:31] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[15:34:07] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[15:34:07] <ghservo> 01[13servo01] 15bors-servo merged 06auto into 06master: 02http://git.io/W7lRUA
[15:34:07] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[15:34:07] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[15:34:07] <ghservo> [13servo] 15bors-servo closed pull request #890: Handle doctype.textContent correctly. (06master...06textcontent-getter-bug)  02http://git.io/w2lShA
[15:34:07] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[15:37:04] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[15:37:04] <ghservo> 01[13servo01] 15bors-servo pushed 0 new commits to 06auto: 02http://git.io/1d8pNA
[15:37:04] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[15:37:04] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[15:37:04] <ghservo> 01[13servo01] 15bors-servo pushed 2 new commits to 06auto: 02http://git.io/3Cwwag
[15:37:04] <ghservo> 13servo/06auto 14c9470d5 15Ms2ger: Fix unused import warnings.
[15:37:04] <ghservo> 13servo/06auto 14bfaa5be 15bors-servo: auto merge of #891 : Ms2ger/servo/unused-import-warnings, r=jdm
[15:37:04] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[15:45:00] *** Quits: dzbarsky1 (Adium@moz-CC308D8F.wireless-pennnet.upenn.edu) (Quit: Leaving.)
[15:52:08] *** Quits: kanru` (kanru@moz-CBD3E512.static.cust.telenor.com) (Ping timeout)
[16:01:02] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[16:01:02] <ghservo> [13servo] 15bors-servo closed pull request #891: Fix unused import warnings. (06master...06unused-import-warnings)  02http://git.io/ol334g
[16:01:02] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[16:01:03] *** Joins: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP)
[16:01:03] <ghservo> 01[13servo01] 15bors-servo merged 06auto into 06master: 02http://git.io/3Cwwag
[16:01:03] *** Parts: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP) ()
[16:01:53] *** Quits: jdm (jdm@moz-2C5514D1.lightspeed.sntcca.sbcglobal.net) (Ping timeout)
[16:11:40] *** Joins: dzbarsky (Adium@moz-64198F06.wlan.wireless-pennnet.upenn.edu)
[16:13:44] *** Quits: johnath (johnath@A3213FC9.52B8005.D25A875A.IP) (concrete.mozilla.org sand.mozilla.org)
[16:14:01] *** Quits: AutomatedTester (David@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[16:14:01] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[16:14:18] *** Quits: nmatsakis (nmatsakis@moz-DB4A9C19.scl3.mozilla.com) (Input/output error)
[16:14:25] *** Quits: gavin (gavin@moz-DB4A9C19.scl3.mozilla.com) (Input/output error)
[16:14:56] *** Joins: nmatsakis (nmatsakis@moz-DB4A9C19.scl3.mozilla.com)
[16:15:17] *** Joins: gavin (gavin@moz-DB4A9C19.scl3.mozilla.com)
[16:15:28] *** Joins: johnath (johnath@A3213FC9.52B8005.D25A875A.IP)
[16:17:32] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[16:17:32] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:17:32] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[16:17:32] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:18:02] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[16:18:02] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:18:02] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[16:18:02] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:18:32] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[16:18:32] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:18:32] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[16:18:32] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:19:02] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[16:19:02] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:19:02] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[16:19:02] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:19:03] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[16:19:32] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[16:19:32] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:19:33] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[16:19:33] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:20:02] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[16:20:02] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:20:03] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[16:20:03] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:20:32] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[16:20:32] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:20:33] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[16:20:33] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:21:02] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[16:21:02] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:21:03] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[16:21:03] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:21:32] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[16:21:32] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:21:33] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[16:21:33] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:21:47] *** Joins: jdm (jdm@moz-7B0110AD.mv.mozilla.com)
[16:21:47] *** ChanServ sets mode: +o jdm
[16:22:02] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[16:22:02] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:22:03] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[16:22:03] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:22:32] <cmr> annevk: probably not unless the existing parser proves to be inadequate
[16:22:32] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[16:22:32] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:22:33] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[16:22:33] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:23:02] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[16:23:02] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:23:03] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[16:23:03] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:23:32] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[16:23:32] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:23:33] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[16:23:33] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:24:03] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[16:24:03] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:24:03] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[16:24:03] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:24:15] <SimonSapin> cmr: whether itâ€™s from scratch or not, I think annevk means something based on http://url.spec.whatwg.org/
[16:24:24] <cmr> Oh
[16:24:28] <cmr> Yes, definitely.
[16:24:33] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[16:24:33] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:24:33] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[16:24:33] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:24:40] *** Quits: jdm (jdm@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[16:25:03] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[16:25:03] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:25:03] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[16:25:03] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:25:22] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[16:25:22] *** ChanServ sets mode: +o pcwalton
[16:25:25] <SimonSapin> I donâ€™t know how much exactly it differs from the RFCs
[16:25:32] <annevk> The current parser will change
[16:25:33] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[16:25:33] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:25:33] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[16:25:33] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:25:46] <SimonSapin> annevk: do you mean in the spec?
[16:25:51] <cmr> At least as much as of it as I need for it to be useful for rust-http and my own purposes.
[16:25:59] <annevk> I might do it at some point, depending on availability and depending on whether Rust sorts out it's string story
[16:26:03] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[16:26:03] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:26:03] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[16:26:03] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:26:09] *** Joins: jdm (jdm@moz-BBE3ABD.mv.mozilla.com)
[16:26:09] *** ChanServ sets mode: +o jdm
[16:26:16] <annevk> SimonSapin: I suspect it'll evolve over time as most things do, sure, hopefully not too much though :)
[16:26:33] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[16:26:33] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:26:33] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[16:26:33] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:26:35] <SimonSapin> oh, you mean the parser changes from the RFCs
[16:27:03] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[16:27:03] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:27:03] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[16:27:03] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:27:33] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[16:27:33] *** Quits: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:27:34] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[16:27:34] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:27:35] <SimonSapin> Rustâ€™s string story is UTF-8, as far as I understand. (There are bugs that allow you to break the invariant, but these will be fixed over time.)
[16:27:52] <cmr> Most of those bugs were patched up last week with removing the ability to cast from an integer to a char.
[16:27:54] <SimonSapin> itâ€™s Servo that needs to figure out what to do
[16:28:03] <cmr> (and rejecting surrogates that utf-8 disallows)
[16:28:04] *** Joins: AutomatedTester (David@moz-DB4A9C19.scl3.mozilla.com)
[16:28:04] *** Quits: AutomatedTester (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:28:04] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[16:28:04] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:28:12] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[16:28:30] <SimonSapin> cmr: Iâ€™m mostly thinking of #8891
[16:28:34] *** Joins: AutomatedTester (David@moz-DB4A9C19.scl3.mozilla.com)
[16:28:34] *** Quits: AutomatedTester (David@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:28:34] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[16:28:34] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:28:37] <annevk> SimonSapin: well we may decide to change Rust too, no?
[16:28:57] <SimonSapin> annevk: based on discussion in #rust thatâ€™s not happening, I believe
[16:28:57] <annevk> SimonSapin: if it's better for the overall research project
[16:29:02] <Ms2ger> annevk, #rust brought out the pitchforks
[16:29:04] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[16:29:04] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:29:07] <annevk> Hah
[16:29:34] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[16:29:34] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:30:05] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[16:30:05] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[16:30:22] *** Quits: dzbarsky (Adium@moz-64198F06.wlan.wireless-pennnet.upenn.edu) (Connection reset by peer)
[16:30:27] *** Joins: dzbarsky1 (Adium@moz-64198F06.wlan.wireless-pennnet.upenn.edu)
[16:30:35] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[16:32:06] *** jdm sets mode: +b Yoric!*@*
[16:33:02] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[16:38:06] <jgraham> SimonSapin: I hope that conversation included the costs to servo / rust of not changing
[16:38:30] <jgraham> Basically little-to-no shared code
[16:38:56] <Ms2ger> Yes
[16:39:38] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[16:39:38] *** ChanServ sets mode: +o tjc
[16:40:31] <pcwalton> what are we talking about changing in Rust?
[16:40:37] * pcwalton is not up to date
[16:40:45] <cmr> pcwalton: string representation
[16:40:50] <pcwalton> from what to what?
[16:41:03] <Ms2ger> pcwalton, from utf-8 to something the web can use
[16:41:08] <cmr> from utf-8 to webfucked u16 arrays
[16:41:23] <pcwalton> oh, yes, we've talked about this for years
[16:41:28] <annevk> not necessarily u16 arrays
[16:41:39] <annevk> though that would be one of the representations for sure
[16:41:39] <Ms2ger> pcwalton, but no decision was made
[16:42:11] <pcwalton> I think it is inevitable that Rust will have to grow support for other encodings
[16:42:14] <pcwalton> for example, Windows
[16:42:28] <annevk> ?
[16:42:48] <pcwalton> to call Windows API functions you need strings in UCS-2 (or UTF-16? I forget)
[16:43:09] <Ms2ger> I think we'll just have to start by implementing something in Servo
[16:43:10] <pcwalton> unless you restrict yourself to calling the legacy ASCII-only versions which are non-starters
[16:43:11] <kimundi> pcwalton: (I think those issues could be mainly solved by allowing one to define a custom str_utf16 type, which would hopefully be possible with DSTs - I made an issue about that: https://github.com/mozilla/rust/issues/9077)
[16:43:13] <annevk> You mean like a library?
[16:43:28] <pcwalton> kimundi: yeah, something like that would be what I'd prefer
[16:43:30] <annevk> I think if you're talking about a library for encodings you're not really understanding the issue
[16:44:03] <cmr> annevk: the win32 api requires utf16 strings.
[16:44:20] <pcwalton> I'm talking about support for utf-16 strings in the language
[16:44:31] <pcwalton> (and other encodings)
[16:44:56] <annevk> So utf-16 strings and utf-8 strings share the same value space
[16:45:00] <annevk> so that doesn't get us very far
[16:45:03] *** Joins: mccr8 (mccr8@moz-BBE3ABD.mv.mozilla.com)
[16:45:10] <annevk> you need 16-bit unsigned integers for the web
[16:45:32] * Ms2ger puts that on his todo list for after vacation
[16:45:33] <pcwalton> yeah, I know
[16:45:33] <annevk> including fast access and without surrogate protection :/
[16:45:43] <pcwalton> we've discussed this for years
[16:45:57] <annevk> but it's unresolved?
[16:45:58] <Ms2ger> Discussing doesn't help much
[16:46:04] *** Joins: lbergstrom (Adium@moz-BBE3ABD.mv.mozilla.com)
[16:46:40] <annevk> having strings nailed down is pretty fundamental for a lot of browser libraries
[16:46:48] <pcwalton> the plan as I was last aware was to continue to use UTF-8 and see how painful it is
[16:46:55] <Ms2ger> Well, painful
[16:47:04] <Ms2ger> It's not about being painful, it's about being wrong
[16:47:05] <annevk> I don't see how that can be a plan
[16:47:29] <Ms2ger> You can't implement the DOM with strict utf-8 strings
[16:47:32] <pcwalton> if we have to change to UCS-2 then we can do that
[16:47:40] <Ms2ger> So we need to implement something else
[16:47:46] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[16:47:53] <annevk> utf-8 is fundamentally incompatible with the value space, CESU-8 could maybe work, but that is super hairy
[16:48:02] <annevk> and if not done carefully will lead to tons of security issues
[16:48:30] <pcwalton> so I'm not opposed to doing UCS-2 if we have to, we've known for a long time that this was a probable outcome
[16:48:46] <Ms2ger> We have to
[16:48:52] <kimundi> ( struct str_web([u16]) )
[16:49:02] <SimonSapin> Is UCS-2 [u16]?
[16:49:04] <Ms2ger> Now that we've got that out of the way, who's implementing it?
[16:49:06] *** Joins: Kostic (marko@C4D4CB5C.58A2DD99.2168A69F.IP)
[16:49:08] <annevk> pcwalton: I think you want to consider something nicer than just 16-bit integers, e.g. Chrome has clever wrappers that allow storing pure ASCII as just bytes
[16:49:36] <cmr> I'm with kimundi that we should not change from str being utf-8, but that we should make the language more powerful so that different string types are equally as useful.
[16:49:42] *** Quits: ahal (ahal@13F2CEC5.7672369.D8E68FF6.IP) (Connection reset by peer)
[16:49:50] <pcwalton> cmr++
[16:50:08] <cmr> But I'm also of the opinion that text handling is a specialized task deserving of its own specialized libraries, and and especially that normal programmers (including myself!) should never touch user input
[16:50:24] <cmr> (textual input, that is)
[16:50:37] <cmr> Too hairy, too easy to get wrong.
[16:50:47] *** Joins: ahal (ahal@13F2CEC5.7672369.D8E68FF6.IP)
[16:50:58] <Ms2ger> jdm, fwiw, I've been adding tests to the web-platform-tests repo, with the hope of getting those running on Servo asap
[16:51:08] <pcwalton> ISTR that there was a discussion about the string hierarchy
[16:51:10] <bz> Look
[16:51:12] <Ms2ger> jdm, I don't think it's terribly useful to rewrite those tests
[16:51:16] <bz> strings are hard not just because of encoding
[16:51:22] <bz> but also because of ownership models
[16:51:24] *** Quits: dbaron (dbaron@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[16:51:31] <bz> So we'll need some sort of wrapper anyway
[16:51:32] <bz> or something
[16:51:35] <pcwalton> UCS-2 strings + ASCII strings + interned strings
[16:51:38] <bz> because we want to not even copy
[16:51:38] <pcwalton> bz++
[16:51:46] <bz> when going JS to C++
[16:51:47] <pcwalton> Servo's gonna need its own string type
[16:51:49] <Ms2ger> + refcounted buffers
[16:51:50] <bz> er, JS to Rust
[16:51:52] <cmr> it's not even encoding that's the problem, it's the issue of combining characters, and the difference between a codepoint and glyph, etc etc etc
[16:51:55] <bz> so Rust needs to keep JSStrings alive
[16:51:57] <bz> or something
[16:52:13] <jdm> Ms2ger: I'd just like a sanity check that demonstrates that new code being added is working right now
[16:52:17] <jdm> and continues to work
[16:52:57] <kimundi> something like: enum str_web { usc2([u16]), ascii([u8]), interned(InternerIndex) } ?
[16:53:02] <pcwalton> because all browsers have to have their own string types
[16:53:17] <pcwalton> kimundi: preferably an unsafe pointer or something to the interned string but yeah
[16:53:38] <kimundi> hmm... unsized enums would be interesting
[16:53:49] <annevk> cmr: this is not really about text rendering that much
[16:54:22] <cmr> annevk: it's not just rendering that needs to care about that stuff, it's also indexing and searching and slicing and everything else
[16:55:03] <cmr> standard string operations that almost every program does incorrectly unless it uses a specialized library
[16:55:24] <cmr> </rant>
[16:55:47] <cmr> (silly humans and their text, we should just get rid of them)
[16:55:48] <annevk> yeah you want good Unicode support, that seems pretty obvious
[16:56:02] <annevk> doesn't have much to do with string types though
[16:56:20] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[16:57:03] <annevk> pcwalton: if you think you can abstract away the different string types and make it somehow magically work and fast, I guess...
[16:57:05] <SimonSapin> pcwalton: are we doing a Servo conf call today?
[16:58:19] <pcwalton> SimonSapin: let's share a vidyo room
[16:58:22] <annevk> pcwalton: I don't really see how that would work without having to do expensive casts and such, but then I don't really know much about it I suppose
[16:58:30] <bz> slicing a unicode string is probable fail
[16:58:54] <bz> searching for non-ASCII is near-guaranteed fail
[16:59:19] <bz> (yay NFC & friends)
[16:59:20] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[16:59:46] *** Joins: bholley (anonymous@moz-BBE3ABD.mv.mozilla.com)
[16:59:52] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[17:00:00] <pcwalton> maybe we should make a wiki page about strings
[17:00:04] <pcwalton> (was there one?)
[17:00:07] <pcwalton> so we can hash out a hierarchy
[17:00:19] <SimonSapin> https://github.com/mozilla/servo/wiki/Strings
[17:00:27] <pcwalton> yay
[17:00:56] <pcwalton> SimonSapin: we're in The Bridge, let me try to join
[17:00:57] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[17:02:55] <bz> which vidyo room?
[17:02:57] *** Joins: mihneadb (Mihnea@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:03:01] <pcwalton> The Bridge
[17:03:05] <pcwalton> ... assuming I joined it right :)
[17:03:22] *** Joins: dbaron (dbaron@DA4ABEAF.1DE10CA8.D8E68FF6.IP)
[17:04:03] <jack> https://etherpad.mozilla.org/Servo-meeting-weekly
[17:04:15] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:04:15] *** ChanServ sets mode: +o brson
[17:05:28] <Ms2ger> Is that right now?
[17:05:32] <jdm> Ms2ger: yep
[17:05:55] <Ms2ger> Conflicts with #ateam's meeting, then
[17:05:57] <annevk> clarified that Strings page
[17:06:09] <annevk> you can't even do 16-bit code units -> utf-8
[17:06:25] <Ms2ger> Maybe I'll attend some other time if you can get me a guest link
[17:06:33] <Ms2ger> (https://mana.mozilla.org/wiki/display/SD/Guest+link+for+a+Vidyo+room)
[17:06:48] <jdm> if only that worked for conference rooms
[17:06:58] <Ms2ger> Mm
[17:07:16] <Ms2ger> Yay for openness
[17:08:32] <bz> where's the wiki page?
[17:09:00] <pcwalton> https://github.com/mozilla/servo/wiki/Incremental-flow-tree-construction
[17:09:18] <pcwalton> "Alternative proposal by eatkinson" is the probably best representation of our current thinking
[17:10:38] <annevk> bz: https://github.com/mozilla/servo/wiki/Strings
[17:10:49] <annevk> bz: in case that was in reply to me
[17:12:42] *** Quits: annevk (annevk@88F51059.F3BBB17D.144F44FA.IP) (Input/output error)
[17:13:51] <bz> annevk: thanks
[17:13:54] <bz> pcwalton: thanks
[17:15:26] <kmc> can someone define "inline block split" for me?
[17:15:57] *** mccr8 is now known as mccr8|away
[17:16:40] <bz> <div style="display: inline">ab <div>cd</div> ef</div>
[17:16:43] <bz> kmc: ^
[17:17:24] *** Quits: dzbarsky1 (Adium@moz-64198F06.wlan.wireless-pennnet.upenn.edu) (Quit: Leaving.)
[17:20:20] *** Quits: ahal (ahal@13F2CEC5.7672369.D8E68FF6.IP) (Input/output error)
[17:20:21] <kmc> so it's a block inside an inline, with some other inline content aronud it?
[17:21:30] <bz> yes
[17:21:45] <bz> or no content around it: just block inside inline
[17:21:53] *** Joins: eholk (eholk@moz-BA312F07.crest.iu.edu)
[17:22:01] <kmc> ok
[17:23:33] <bz> And the problem with is is the rendering ends up a bit weird
[17:27:17] *** Joins: dzbarsky (Adium@moz-64198F06.wlan.wireless-pennnet.upenn.edu)
[17:31:31] *** Joins: ahal (ahal@13F2CEC5.7672369.D8E68FF6.IP)
[17:32:05] *** Joins: sanxiyn (tinuviel@AE8B10D7.A92E374.57C4C441.IP)
[17:35:39] *** Quits: dzbarsky (Adium@moz-64198F06.wlan.wireless-pennnet.upenn.edu) (Ping timeout)
[17:35:42] <sanxiyn> Can someone look at #882?
[17:37:10] <jdm> I'll make sure someone does
[17:37:32] <sanxiyn> It's one line patch
[17:43:29] <jdm> bholley: http://servo-buildbot.pub.build.mozilla.org/bors/bors.html
[17:46:17] <SimonSapin> pcwalton: the generalization of dynamically-sized enum is having a header followed by a vector, right?
[17:46:26] <pcwalton> SimonSapin: yes
[17:50:05] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[17:55:18] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Connection reset by peer)
[17:55:27] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[17:55:27] *** ChanServ sets mode: +o tjc
[17:57:18] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[17:59:52] *** Joins: dzbarsky (Adium@moz-AC762417.wlan.wharton.upenn.edu)
[18:00:12] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[18:02:04] *** Joins: annevk (annevk@DF1341F2.4F390C2A.420B7681.IP)
[18:02:23] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[18:03:09] *** Joins: CaseyBec_ (CaseyBecki@moz-1460D4E6.west.biz.rr.com)
[18:04:12] *** Quits: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP) (Ping timeout)
[18:04:19] <evilpie> I think implementing ascii strings in SpiderMonkey wouldn't be too hard
[18:04:47] <evilpie> there is just a long tail, because so many functions would need to be changed to work with ascii strings instead of always having to convert
[18:05:44] *** Quits: dzbarsky (Adium@moz-AC762417.wlan.wharton.upenn.edu) (Ping timeout)
[18:06:36] <annevk> It'd be interesting to know how much memory we'd save... I wonder if we could analyze that somehow by not actually implementing it, but by counting when we'd use it or something like that...
[18:06:55] <evilpie> I think the webkit bug for that had some numbers, let me try to find it
[18:07:20] <SimonSapin> evilpie: latin1, even
[18:07:26] <SimonSapin> (8 vs 7 bits)
[18:07:38] <evilpie> ah yeah
[18:07:43] <evilpie> < 127 right?
[18:08:47] <SimonSapin> ASCII covers U+0000 to U+007F, but you can cover U+0000 to U+00FF in one byte. (which is latin1, aka ISO-8859-1)
[18:09:44] <SimonSapin> (note that this is "real" latin1, not the webâ€™s idea of latin1 which is an alias for windows-1252)
[18:11:40] <annevk> Depending on how you get the string determining the 7-bit thing might be easier. If you already convert to utf-16 the "original latin1" thing prolly works
[18:12:39] <annevk> We should find a new name for "original latin1"
[18:13:40] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[18:14:26] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[18:14:26] *** ChanServ sets mode: +qo dherman dherman
[18:15:46] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[18:16:32] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[18:18:46] <evilpie> damn either that bug never existed or I can't find it
[18:19:05] *** Quits: ahal (ahal@13F2CEC5.7672369.D8E68FF6.IP) (Input/output error)
[18:21:02] <Ms2ger> I know it's been discussed
[18:22:13] *** Quits: bholley (anonymous@moz-BBE3ABD.mv.mozilla.com) (Quit: bholley)
[18:22:30] *** Quits: Kostic (marko@C4D4CB5C.58A2DD99.2168A69F.IP) (Ping timeout)
[18:24:36] *** Joins: dzbarsky (Adium@moz-895AD799.wlan.wireless-pennnet.upenn.edu)
[18:24:50] *** Quits: dzbarsky (Adium@moz-895AD799.wlan.wireless-pennnet.upenn.edu) (Max SendQ exceeded)
[18:25:44] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[18:25:56] <kmc> what do you mean by "original latin1"
[18:26:34] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[18:27:39] <jdm> https://github.com/w3c/testharness.js/
[18:28:05] *** Joins: bholley (anonymous@moz-BBE3ABD.mv.mozilla.com)
[18:28:58] *** Joins: nathan7 (nathan@86F860FE.3CD03790.F113998C.IP)
[18:29:08] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[18:29:26] *** Joins: dzbarsky (Adium@moz-895AD799.wlan.wireless-pennnet.upenn.edu)
[18:31:18] <annevk> kmc: http://encoding.spec.whatwg.org/ latin1 == windows-1252 on the web
[18:32:42] <kmc> mm
[18:32:47] <kmc> I would say ISO 8859-1 to disambiguate, then
[18:32:52] <kmc> unless that too is an alias for cp1252 :(
[18:32:58] <annevk> is
[18:33:11] <annevk> there's no such thing as "real latin1" web-exposed atm
[18:33:26] <annevk> if we're going to add it via some API-only thingy we need a new name
[18:33:43] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:33:43] *** ChanServ sets mode: +o brson
[18:33:50] <kmc> working with the web makes me want to yell "THIS IS WHY WE CAN'T HAVE NICE THINGS" on a daily basis
[18:33:59] <luisbg> kmc, hahahaaa
[18:34:14] <annevk> meh, it's not too bad, people shouldn't be using latin1 anyway
[18:34:15] <kmc> and yet... it is actually a lot nicer than you might imagine the global standard for distributing networked apps would be
[18:35:18] <kmc> annevk: yeah
[18:35:25] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[18:35:38] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[18:35:48] <kmc> I guess in this case I should just blame Microsoft for embracing and extending Latin-1
[18:39:18] <Ms2ger> Blaming MS works for me :)
[18:40:38] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[18:42:07] *** Joins: alex__ (alex@moz-7421D6C9.mc.videotron.ca)
[18:42:50] *** Quits: alex_abreu (alex@moz-7421D6C9.mc.videotron.ca) (Ping timeout)
[18:43:12] *** Quits: dbaron (dbaron@DA4ABEAF.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[18:44:22] *** Joins: veddan (viktor@moz-C79BC80B.csbnet.se)
[18:45:13] *** Quits: dzbarsky (Adium@moz-895AD799.wlan.wireless-pennnet.upenn.edu) (Quit: Leaving.)
[18:46:21] *** Joins: ahal (ahal@13F2CEC5.7672369.D8E68FF6.IP)
[18:51:14] *** mccr8|away is now known as mccr8
[18:54:43] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[18:57:24] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[19:01:28] *** Quits: CaseyBec_ (CaseyBecki@moz-1460D4E6.west.biz.rr.com) (Client exited)
[19:01:53] *** Joins: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP)
[19:08:44] *** bz is now known as bz_away
[19:09:32] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[19:11:03] *** Quits: ahal (ahal@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[19:11:22] *** Joins: dzbarsky (Adium@C330B4C2.37C272E6.B5B6DD03.IP)
[19:12:54] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[19:16:13] <caitp__> extending latin1?
[19:16:59] *** Quits: olsonjeffery (pf@B8927AE1.CFEFA148.239A1A9E.IP) (Ping timeout)
[19:17:05] *** Joins: olsonjeffery (pf@B8927AE1.CFEFA148.239A1A9E.IP)
[19:18:09] *** Joins: ahal (ahal@13F2CEC5.7672369.D8E68FF6.IP)
[19:19:25] *** Quits: dzbarsky (Adium@C330B4C2.37C272E6.B5B6DD03.IP) (Quit: Leaving.)
[19:19:50] *** Quits: olsonjeffery (pf@B8927AE1.CFEFA148.239A1A9E.IP) (Ping timeout)
[19:21:19] *** Quits: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP) (Quit: victorporof)
[19:21:37] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[19:22:24] *** Joins: olsonjeffery (pf@B8927AE1.CFEFA148.239A1A9E.IP)
[19:24:08] *** Quits: olsonjeffery (pf@B8927AE1.CFEFA148.239A1A9E.IP) (Ping timeout)
[19:24:27] *** Quits: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP) (Client exited)
[19:27:22] *** Joins: olsonjeffery (pf@B8927AE1.CFEFA148.239A1A9E.IP)
[19:29:22] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[19:29:22] <kmc> caitp__: yeah, Windows-1252 is Latin-1 with some printable characters in place of the little used C1 control characters
[19:30:25] <caitp__> well I don't know if anyone would call it iso8859-1
[19:30:27] <kmc> (possibly other small differences)
[19:31:14] <kmc> unfortunately lots of people do on the web, and that's why the HTML5 spec says you need to interpret "iso8859-1" as Windows-1252
[19:31:53] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[19:31:53] *** ChanServ sets mode: +o tjc
[19:31:55] <kmc> along with "latin1" and lots of other aliases and even "ascii" and "ansi_x3.4-1968"
[19:32:48] <caitp__> hah, seriously
[19:32:52] <caitp__> that's gross ;)
[19:33:54] *** Joins: CaseyBecking (CaseyBecki@moz-1460D4E6.west.biz.rr.com)
[19:34:12] *** Quits: CaseyBecking (CaseyBecki@moz-1460D4E6.west.biz.rr.com) (Client exited)
[19:34:18] *** Joins: CaseyBecking (CaseyBecki@moz-1460D4E6.west.biz.rr.com)
[19:34:27] *** Quits: CaseyBecking (CaseyBecki@moz-1460D4E6.west.biz.rr.com) (Client exited)
[19:34:52] *** Joins: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP)
[19:38:40] <kmc> yep
[19:41:35] <annevk> using anything other than utf-8 is what's gross, the rest doesn't matter
[19:42:24] <kmc> yep
[19:42:40] <caitp__> well, there's that. so when are we going to expunge all the other existing encodings? :p
[19:43:11] <annevk> we can't, but we have algorithms for turning them into Unicode scalar value streams
[19:43:12] *** Joins: harth (heather@moz-A0276582.hsd1.ca.comcast.net)
[19:45:26] <caitp__> yeah but then you end up with piles of encoding translation code in the browser and huge libraries like the icu or iconv or something, and wouldn't it be great if all that crap just wasn't there at all
[19:46:28] <kmc> yeah
[19:46:50] <kmc> it's true that a lot of the complexity in Unicode comes from the requirement to support round trip conversion from/to legacy encodings
[19:46:58] <kmc> a lot of characters could go away too
[19:47:29] <kmc> but that round trip property is really important for some applications, and the legacy encodings aren't actually going away any time soon
[19:48:20] <kmc> lbergstrom: my DLBI work in progress is up at https://github.com/kmcallister/servo/tree/dlbi
[19:48:41] <lbergstrom> kmc: thanks!
[19:48:49] <caitp__> as soon as MS decides to start using a unicode encoding as the default encoding for all locales and stops worrying about legacy windows apps and tells other vendors to just deal with it, you might get pretty far with throwing away that other stuff
[19:49:12] *** Quits: olsonjeffery (pf@B8927AE1.CFEFA148.239A1A9E.IP) (Ping timeout)
[19:49:12] *** Joins: olsonjeffery (pf@B8927AE1.CFEFA148.239A1A9E.IP)
[19:50:08] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[19:50:14] <annevk> caitp__: http://encoding.spec.whatwg.org/ is not that complex
[19:50:25] <annevk> caitp__: some indexes are a bit big, but it's not too bad
[19:51:00] <kmc> caitp__: who's going to convert all the content
[19:52:16] <caitp__> whoever does it, if there's a demand for it
[19:52:44] <kmc> browser vendors won't ship an update that completely breaks a huge number of existing pages
[19:53:42] <kmc> that's just for web content.... what about the 100 GB production database that nobody wants to touch
[19:53:52] <caitp__> just imagine, you see a page with some weird exotic encoding attribute, and you display some block like "WHOA THIS USES A WEIRD ENCODING, YOU SHOULD REALLY TRANSCODE THIS TO UTF8"
[19:54:03] <kmc> lol
[19:54:08] <caitp__> and the problem will fix itself in a few weeks
[19:54:28] <annevk> yeah, by everyone migrating to a browser that's not as obnoxious
[19:54:40] <caitp__> well, maybe
[19:54:47] <kmc> I think there's a lot of content on the web that can effectively *never* be edited
[19:55:00] <kmc> what, I'm going to log into some university webspace I forgot about in order to run some iconv command?
[19:55:07] <kmc> so this effectively just destroys a lot of content
[19:55:11] <caitp__> if you could get every browser to be obnoxious for a little while, then you could make browsers (and operating systems in general) a lot less crap
[19:55:26] <kmc> true in so many ways and yet here we are
[19:55:28] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[19:55:38] <kmc> building the Internet around Postel's Law was a huge mistake, to be sure
[19:56:49] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[19:57:31] <caitp__> a lot of sites wouldn't be affected, most of the big commercial sites are already using more robust encodings, and a good chunk of americans and europeans would be happy, so that leaves you with like 400 million happy customers
[19:57:38] <Ms2ger> Also what made it successful :)
[19:57:53] <kmc> Ms2ger: I'm not so sure about that
[19:58:21] <Ms2ger> I'm pretty confident it helped quite a bit
[19:58:25] <kmc> not like it's applied at every level of the stack... TCP and IP aren't very forgiving
[19:58:39] <caitp__> quirks mode definitely helped frustrate a lot of people
[19:58:52] <kmc> if SMTP and HTTP servers were a bit less forgiving, people would have just fixed bugs that they ended up fixing anyway, but with less legacy compat fallout
[19:58:54] <Ms2ger> Sure, but lots more people write HTML/CSS/JS than TCP/IP
[19:59:01] <kmc> that's one theory anyway
[19:59:18] <kmc> sure but it's not like it's impossible for humans to code to well specified languages
[19:59:25] <kmc> we just get lazy when we don't have to
[19:59:52] <kmc> also no point here really but "Over a period of 36 hours, tens of thousands of workers pulled the spikes from the west rail of all the broad gauge lines in the South, moved them 3 in east and spiked them back in place."
[20:01:15] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[20:01:15] *** ChanServ sets mode: +o brson
[20:02:56] *** Joins: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP)
[20:08:28] *** Quits: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP) (Ping timeout)
[20:14:49] *** Joins: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP)
[20:15:52] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[20:20:09] *** Quits: shachaf (shachaf@moz-F37E0395.members.linode.com) (Ping timeout)
[20:20:40] *** bz_away is now known as bz
[20:23:32] *** Joins: shachaf (shachaf@moz-F37E0395.members.linode.com)
[20:24:52] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[20:25:54] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[20:26:28] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[20:26:28] <ghservo> [13servo] 15jdm opened issue #892: Nodes should not return their parent node as their binding parent object  02http://git.io/6EGFOQ
[20:26:28] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[20:27:15] <Ms2ger> jdm, the scope chain bits are exactly why nodes have that setup
[20:27:27] <jdm> Ms2ger: have what setup?
[20:28:26] <Ms2ger> Oh wait
[20:28:53] *** Quits: shachaf (shachaf@moz-F37E0395.members.linode.com) (Ping timeout)
[20:29:11] <Ms2ger> But you're aware that nodes do need a special scope chain?
[20:32:03] *** Joins: valenting (Thunderbir@BC8F8C4C.4ABED146.FB866788.IP)
[20:32:15] *** Joins: shachaf (shachaf@moz-F37E0395.members.linode.com)
[20:33:41] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[20:38:10] <jdm> Ms2ger: please explain further; bholley only mentioned node event listeners and form event listeners as ones that needed particular scope chains
[20:38:30] <jdm> I believe most other things just parent to the document?
[20:38:37] *** Joins: Jayflux (Jason@moz-2D3FB47E.as13285.net)
[20:38:56] <Ms2ger> jdm, yeah, that
[20:39:00] <jdm> ok, good
[20:39:49] *** Quits: Jayflux (Jason@moz-2D3FB47E.as13285.net) (Quit: Leaving)
[20:39:54] *** Joins: Jayflux (Jason@moz-2D3FB47E.as13285.net)
[20:40:42] *** Joins: tikue (tkuehn@61D12352.CD72397.689607DE.IP)
[20:42:36] *** Quits: Jayflux (Jason@moz-2D3FB47E.as13285.net) (Quit: Leaving)
[20:42:42] *** Joins: Jayflux (Jason@moz-2D3FB47E.as13285.net)
[20:43:43] *** Quits: valenting (Thunderbir@BC8F8C4C.4ABED146.FB866788.IP) (Ping timeout)
[20:45:12] *** Joins: ahal_ (ahal@FCCEA34F.7672369.D8E68FF6.IP)
[20:45:27] *** Quits: ahal (ahal@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Leaving)
[20:45:53] *** ahal_ is now known as ahal
[20:46:57] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[20:47:07] *** Quits: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP) (Quit: victorporof)
[20:47:32] <bholley> jdm: see bug 773488
[20:48:10] <bholley> jdm: and bug 760095, which is a dep
[20:48:13] <bholley> jdm: neither should be too hard
[20:48:55] *** Quits: Jayflux (Jason@moz-2D3FB47E.as13285.net) (Quit: Leaving)
[20:48:59] *** Joins: Jayflux (Jason@moz-2D3FB47E.as13285.net)
[20:49:55] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[20:51:36] *** Quits: ahal (ahal@FCCEA34F.7672369.D8E68FF6.IP) (Ping timeout)
[21:00:34] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[21:01:42] *** Quits: eagen (eagen@8737942B.7A99C13A.B7961A98.IP) (Quit: Leaving)
[21:05:53] *** Quits: Ms2ger (Ms2ger@9C9504FF.4EC82F13.3773EA9F.IP) (Quit: nn)
[21:07:13] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[21:13:14] *** Joins: ahal (ahal@FCCEA34F.7672369.D8E68FF6.IP)
[21:21:22] *** Quits: eholk (eholk@moz-BA312F07.crest.iu.edu) (Quit: eholk)
[21:27:35] *** Quits: lbergstrom (Adium@moz-BBE3ABD.mv.mozilla.com) (Quit: Leaving.)
[21:28:47] *** Quits: jdm (jdm@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[21:29:09] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[21:29:39] *** Joins: lbergstrom (Adium@moz-BBE3ABD.mv.mozilla.com)
[21:30:15] *** Joins: lbergstrom1 (Adium@moz-BBE3ABD.mv.mozilla.com)
[21:30:15] *** Quits: lbergstrom (Adium@moz-BBE3ABD.mv.mozilla.com) (Input/output error)
[21:30:47] *** Joins: jdm (jdm@moz-BBE3ABD.mv.mozilla.com)
[21:30:47] *** ChanServ sets mode: +o jdm
[21:37:11] *** Quits: tikue (tkuehn@61D12352.CD72397.689607DE.IP) (Quit: tikue)
[21:37:23] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[21:40:00] *** Joins: eatkinson (eatkinson@moz-C2126207.airbears2.berkeley.edu)
[21:41:31] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[21:42:02] *** Joins: valenting (Thunderbir@BC8F8C4C.4ABED146.FB866788.IP)
[21:45:53] *** Joins: CaseyBec_ (CaseyBecki@moz-1460D4E6.west.biz.rr.com)
[21:46:39] *** Quits: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP) (Ping timeout)
[21:47:33] *** Joins: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP)
[21:48:22] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[21:48:23] *** ChanServ sets mode: +o brson
[21:49:12] *** Quits: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP) (Ping timeout)
[21:50:32] *** Joins: tikue (tkuehn@61D12352.CD72397.689607DE.IP)
[21:50:32] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[21:54:12] <kmc> pcwalton: do you have a meta-ticket for all the small "demo-ready" tasks?
[21:54:21] <pcwalton> kmc: no I don't but that would be a good idea
[21:54:25] <jdm> mhm
[21:58:51] *** Quits: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP) (Quit: lmandel)
[22:00:48] *** Quits: CaseyBec_ (CaseyBecki@moz-1460D4E6.west.biz.rr.com) (Client exited)
[22:01:13] *** Joins: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP)
[22:04:10] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[22:05:39] *** Joins: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP)
[22:05:39] <ghservo> [13servo] 15jdm opened issue #893: Demo ideas  02http://git.io/XxBieg
[22:05:39] *** Parts: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP) ()
[22:08:10] *** Quits: valenting (Thunderbir@BC8F8C4C.4ABED146.FB866788.IP) (Ping timeout)
[22:09:39] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[22:25:25] <brson> do cross-origin iframes actually render in parallel right now?
[22:28:06] <tikue> brson: yes
[22:28:16] <tikue> brson: *in some cases
[22:29:58] <tikue> brson: i have a very simple test case showing this. however, it'd be nice to have a more complex example that shows javascript being run in parallel in an iframe and the outer page
[22:30:24] *** Quits: ahal (ahal@FCCEA34F.7672369.D8E68FF6.IP) (Connection reset by peer)
[22:31:47] <tikue> https://gist.github.com/tikue/cc59f8a02e84fc75c9fd
[22:32:58] *** Quits: eatkinson (eatkinson@moz-C2126207.airbears2.berkeley.edu) (Quit: eatkinson)
[22:37:50] <tikue> are there any basic javascript programs we can run right now that modify some content? like it'd be great to have an iframe looping continuously changing its text's color while the parent frame does the same
[22:39:33] <tikue> ^ something only servo can do atm
[22:40:58] <kmc> yeah we've been talking about demos like that
[22:41:15] <kmc> for the summit
[22:44:37] <tikue> so has servo week officially started :D
[22:46:59] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[22:47:16] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[22:48:04] *** Joins: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP)
[22:48:13] <kmc> yep
[22:49:48] *** Quits: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP) (Ping timeout)
[22:51:00] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[22:51:00] <ghservo> [13servo] 15jdm opened issue #894: Make iframe sandbox attribute cause a new script task to be created  02http://git.io/SKefUg
[22:51:00] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[22:56:45] *** kimundi is now known as zz_kimundi
[23:03:08] <tikue> how does something like this work? http://jsfiddle.net/5BAkx/
[23:03:30] <tikue> or, what i mean isâ€¦that doesn't seem to be blocking anything
[23:03:47] <tikue> is the javascript re-run every interval essentially?
[23:03:53] <jdm> tikue: yes
[23:04:17] <jdm> it's like a setTimeout call that includes new setTimeout
[23:04:54] <tikue> jdm: ah ok. so what would be a "blocking" way to do the same thing? just loop and every n modulo X, do something?
[23:07:47] <jdm> tikue: var now = new Date(); var next = new Date(now.getMilliseconds() + 1000); while(true) { if ((new Date()) >= next) { foo(); next = new Date((new Date()).getMilliseconds() + 1000); } }
[23:08:30] <tikue> jdm: awesome, thanks!
[23:16:02] *** Joins: ghservo (ghservo@79968228.6A2AE50.F3114085.IP)
[23:16:02] <ghservo> 01[13servo01] 15bors-servo pushed 0 new commits to 06auto: 02http://git.io/9uevnQ
[23:16:02] *** Parts: ghservo (ghservo@79968228.6A2AE50.F3114085.IP) ()
[23:16:06] *** Joins: ghservo (ghservo@79968228.6A2AE50.F3114085.IP)
[23:16:06] <ghservo> 01[13servo01] 15bors-servo pushed 4 new commits to 06auto: 02http://git.io/Ekeoyg
[23:16:06] <ghservo> 13servo/06auto 143bddaee 15Ilyong Cho: Implement collapsing margin
[23:16:06] <ghservo> 13servo/06auto 147a2bbf6 15Ilyong Cho: Adjust top_offset when top margin of a element collapses with its first child
[23:16:06] <ghservo> 13servo/06auto 143fd7790 15Ilyong Cho: Add reftest for margin collapsing
[23:16:08] *** Parts: ghservo (ghservo@79968228.6A2AE50.F3114085.IP) ()
[23:16:24] *** Quits: Jayflux (Jason@moz-2D3FB47E.as13285.net) (Quit: Leaving)
[23:30:01] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[23:31:47] <tikue> it's hard to think of a good javascript example that demonstrates iframe parallelism, since most good javascript wouldn't be a long-running loop
[23:39:31] *** Quits: annevk (annevk@DF1341F2.4F390C2A.420B7681.IP) (Input/output error)
[23:39:58] *** Joins: annevk (annevk@DF1341F2.4F390C2A.420B7681.IP)
[23:41:11] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[23:41:41] *** Quits: annevk (annevk@DF1341F2.4F390C2A.420B7681.IP) (Ping timeout)
[23:41:48] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[23:41:48] *** ChanServ sets mode: +o brson
[23:45:07] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[23:46:08] *** Joins: ghservo (ghservo@79968228.6A2AE50.F3114085.IP)
[23:46:08] <ghservo> [13servo] 15bors-servo closed pull request #759: Implement collapsing margin (06master...06collapsing)  02http://git.io/84Bdyw
[23:46:08] *** Parts: ghservo (ghservo@79968228.6A2AE50.F3114085.IP) ()
[23:47:50] *** Quits: bholley (anonymous@moz-BBE3ABD.mv.mozilla.com) (Quit: bholley)
[23:48:32] *** Joins: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP)
[23:50:18] *** Quits: victorporof (victorporo@338A6DC2.9CD5E4C4.D111398B.IP) (Ping timeout)
[23:53:31] <tikue> does getElementById work right now?
[23:53:35] <tikue> i'm getting  ReferenceError: document is not defined\n"
[23:53:45] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[23:55:20] *** Quits: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP) (Ping timeout)
[23:56:19] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[23:57:59] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[23:58:30] *** Quits: caitp__ (royalty@moz-9FE842F.cpe.net.cable.rogers.com) (Ping timeout)
