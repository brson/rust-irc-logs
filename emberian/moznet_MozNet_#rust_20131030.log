[00:00:02] -rusti- <anon>:9:93: 9:94 warning: unused variable: `x`, #[warn(unused_variable)] on by default
[00:00:02] -rusti- <anon>:9          #[unsafe_no_drop_flag] struct Foo; impl Drop for Foo { fn drop(&mut self) {} }; let x = [Foo, Foo, Foo];
[00:00:03] -rusti-                                                                                                       ^
[00:00:03] -rusti- timeout triggered!
[00:00:23] <Luqman> krdln: afaik print is buffered
[00:00:31] <strcat> Sharp: maybe because it's undefined behaviour, dunno
[00:00:43] <Sharp> Makes it easier to write a test :P
[00:00:55] <reedlepee> strcat: So what should i do .. Should I run make clean ?
[00:01:04] <krdln> cmr, Luqman: how can I flush print's buffer? (flushing stdout's buffer improves nothing)
[00:01:34] <cmr> krdln: good question
[00:01:37] <cmr> krdln: maybe it's broken!
[00:02:09] <strcat> reedlepee: not sure, if you haven't ever run make with sudo or with another user, I have no idea why it'd happen
[00:02:50] <Luqman> krdln: i don't know if you can. acrichto would be the one to ask
[00:03:01] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[00:03:10] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[00:03:11] *** Joins: ktt3ja (Mibbit@moz-6B6EE8C0.hsd1.va.comcast.net)
[00:03:50] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[00:04:36] *** Joins: nejucomo (Adium@moz-FC8B8F66.hsd1.ca.comcast.net)
[00:05:09] *** Quits: nejucomo (Adium@moz-FC8B8F66.hsd1.ca.comcast.net) (Quit: Leaving.)
[00:05:25] <brson> reedlepee: just delete the file as root
[00:05:59] <reedlepee> brson: I ran make clean 
[00:06:09] <reedlepee> then make check
[00:06:16] <reedlepee> its actually running now 
[00:07:43] <acrichto> krdln: std::rt::io::stdio::with_task_stdout(|io| io.flush())
[00:07:54] <acrichto> I think I got the colons all in the right place
[00:10:03] <krdln> acrichto: Thanks, and I found similar solution just know: do with_task_stdout |o| { o.write(" World".as_bytes()); }
[00:11:26] <Luqman> krdln: is there a reason you need to directly write to stdout instead of just using print?
[00:12:04] <krdln> Luqman: I tried to use extra::term to get colors
[00:12:50] <acrichto> krdln: it may not be the best designed interface, so if you have pain points feel free to open issues about them!
[00:13:30] <krdln> acrichto, Luqman: Is there good reason, why print and stdout just can't share same buffer?
[00:14:02] <acrichto> krdln: what do you mean? anything created by io::stdout() is a unique handle and isn't shared
[00:14:55] <andor> does make install work on windows? or rather, is it supposed to?
[00:15:08] <krdln> but that Writer could be just wrapper to another writer, which would handle buffering
[00:15:19] *** Quits: Mx7f (Mibbit@moz-A4F22CCD.nycap.res.rr.com) (Quit: http://www.mibbit.com ajax IRC Client)
[00:15:32] <brson> andor: i would not expect 'make install' to do anything but cause meyhem on windows
[00:16:06] <acrichto> krdln: you're the one that gets to determine whether the stream is buffered or not, and a buffered stream can't be shared among two owners
[00:16:33] *** Joins: snerd (motk@moz-D21A06DF.members.linode.com)
[00:16:57] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[00:17:21] *** Joins: alan (alan@moz-F8EE186F.lightspeed.snantx.sbcglobal.net)
[00:18:30] *** Joins: doomlord_ (servitor@moz-B44A6624.range86-160.btcentralplus.com)
[00:18:38] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[00:19:02] <krdln> acrichto: I think I've finally understood how stdout works (more or less). Thanks for explaining.
[00:19:22] *** jorendorff is now known as jorendorff_away
[00:20:09] *** Joins: brendan (brendaneic@B0D36173.5F77D495.B41F1B80.IP)
[00:20:14] <acrichto> krdln: no problem! Again though if anything looks super weird, feel free to raise concerns here (I didn't put hours of thought into it)
[00:20:25] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:22:08] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[00:23:29] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[00:23:42] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[00:26:22] *** Quits: snerd (motk@moz-D21A06DF.members.linode.com) (Quit: leaving)
[00:28:04] *** Joins: jvns (quassel@moz-DE62990.nyc.res.rr.com)
[00:28:43] *** Quits: zws3mb (Mibbit@A4F1BB26.8239D6FF.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:29:45] *** jorendorff_away is now known as jorendorff
[00:30:25] <krdln> acrichto: So now we have with_task_stdout, which contains unsafe wrapper to per task buffer. Wouldn't it be more elegant to have eg. fn task_stdout() -> MagicWriter, returning thin wrapper to that buffer?
[00:30:43] <mletterle> I love passing blocks around. <3
[00:30:54] *** Joins: zws3mb (Mibbit@FFC5F268.4F63199.DDE5D3F6.IP)
[00:31:21] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[00:32:15] <acrichto> krdln: I would rather do that, but the stdout stream is still owned by the task and there's no real way to return a task-owned pointer right now
[00:32:48] *** Quits: brendan (brendaneic@B0D36173.5F77D495.B41F1B80.IP) (Ping timeout)
[00:33:47] <krdln> acrichto: It could be returned as a value. Without Send, to make it task-owned.
[00:34:21] <acrichto> krdln: the problem is that once the task no longer owns it then the task will create another buffer next time you print
[00:34:49] *** Joins: brendan (brendaneic@B0D36173.5F77D495.B41F1B80.IP)
[00:36:23] <krdln> acrichto: It sounds little like a black magic to me. Why task would stop owning its own buffer?
[00:37:22] <cmr> acrichto: Weouldn't marking the object as non-Send do that? Do we have a way to do that atm?
[00:37:33] *** jorendorff is now known as jorendorff_away
[00:37:40] *** Joins: snerd (motk@moz-D21A06DF.members.linode.com)
[00:37:43] <strcat> #[no_send]
[00:38:03] *** Quits: snerd (motk@moz-D21A06DF.members.linode.com) (Quit: leaving)
[00:38:10] <cmr> Oh krdl already said it
[00:38:15] <cmr> *krdln
[00:38:40] *** Joins: snerd (motk@moz-D21A06DF.members.linode.com)
[00:38:44] <acrichto> krdln: most values in rust can only have one owner, and if you wanted to return the buffer completely then the task must relinquish ownership of the buffer
[00:38:45] *** Quits: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: dherman)
[00:38:53] *** Quits: snerd (motk@moz-D21A06DF.members.linode.com) (Quit: leaving)
[00:39:11] <acrichto> Ideally one would want "fn task_stdout() -> &'task Writer"
[00:39:28] *** Joins: snerd (motk@moz-D21A06DF.members.linode.com)
[00:40:17] <krdln> acrichto: no! I don't want to return a buffer, just some wrapper with unsafe code, to access task's buffer
[00:40:56] <acrichto> krdln: hm well the api shouldn't ever require unsafe code, and the purpose of with_task_stdout is to call a closure with a borrowed reference to the task's stdout buffer
[00:41:04] *** Joins: Mx7f (Mibbit@moz-A4F22CCD.nycap.res.rr.com)
[00:41:13] *** Quits: blank_name (blank_name@FAB53C88.7071B2C8.31EC03F3.IP) (Ping timeout)
[00:41:26] <acrichto> actually now that I think about this I think that with_task_stdout is an unsound interface
[00:41:28] *** Quits: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[00:41:53] <acrichto> I may change the name to flush_task_stdout() b/c that should be the only operation you need to call on it
[00:41:53] *** Joins: nejucomo (Adium@moz-FC8B8F66.hsd1.ca.comcast.net)
[00:42:03] *** Quits: lfox (lfox@moz-B8648F0F.nycmny.fios.verizon.net) (Ping timeout)
[00:42:12] *** Quits: cdidd (cdidd@moz-29E84F8B.broadband.corbina.ru) (Input/output error)
[00:42:24] <krdln> acrhichto: I meant unsafe only in implementation, just as with_task_stdout does now. I am just wondering if returning wrapper wouldn't be more elegant and easy to use.
[00:42:54] *** Quits: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net) (Ping timeout)
[00:43:03] <acrichto> krdln: there's nothing preventing you from calling task_stdout() twice, and you can't get two mutable references to it
[00:43:16] <acrichto> or rather you shouldn't be able to get two utable references
[00:43:18] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[00:43:24] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[00:43:58] <krdln> acrichto: (doesn't flushing issue a write syscall?)
[00:44:12] <acrichto> krdln: I think I'm losing track of what you're saying here
[00:44:14] *** Joins: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net)
[00:44:30] *** Joins: blank_name (blank_name@FAB53C88.7071B2C8.31EC03F3.IP)
[00:45:07] *** Joins: lxy (Mibbit@moz-4A9D169A.gae.googleusercontent.com)
[00:46:03] *** Quits: lxy (Mibbit@moz-4A9D169A.gae.googleusercontent.com) (Quit: http://www.mibbit.com ajax IRC Client)
[00:46:52] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[00:47:02] *** Quits: brendan (brendaneic@B0D36173.5F77D495.B41F1B80.IP) (Quit: brendan)
[00:47:04] *** Joins: lfox (lfox@moz-B8648F0F.nycmny.fios.verizon.net)
[00:47:18] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[00:47:20] <krdln> acrichto: I don't see how these „mutable references” could cause any problems..
[00:47:46] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[00:47:47] *** Quits: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net) (Quit: gavinb)
[00:48:22] <acrichto> krdln: one of the main goals of rust is to only allow one mutable reference to a value at any one time
[00:48:26] <acrichto> at least in sound code
[00:48:30] <acrichto> *safe
[00:48:50] <krdln> Now I can make a struct implementing Writer, which does every operation via with_task_stdout(). And my idea is to just make that struct available in std.
[00:49:22] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[00:49:47] <acrichto> krdln: I don't think that that is the interface that we want
[00:50:01] <acrichto> if you really want fine-grained control over stdout then you should create a handle via io::stdout() and then not call println
[00:50:38] *** Joins: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net)
[00:51:08] *** Quits: nejucomo (Adium@moz-FC8B8F66.hsd1.ca.comcast.net) (Quit: Leaving.)
[00:51:33] <mletterle> in the test runner, is there a way to actually check/capture a fail?
[00:51:54] <cmr> mletterle: capture, no. but #[should_fail] works.
[00:52:01] <sfackler> mletterle: you can manually do a task::try { ... } if you actually want to capture
[00:52:24] *** Joins: nejucomo (Adium@moz-FC8B8F66.hsd1.ca.comcast.net)
[00:52:51] <krdln> I just want to address a case, where there are multiple writers to stdout within same task. with_task_stdout() interface is good enough for using writer directly, but there are objects that want to use eg. @Writers (like Terminal that I mentioned).
[00:53:26] <cmr> krdln: extra::term needs to be fixed to not use @Writer now that we have &Trait working correctly.
[00:53:38] *** Joins: RMF (RMF@ADEE763B.194C8B26.11F731AB.IP)
[00:53:39] <cmr> It doesn't even really need to be a trait object I don't think
[00:53:43] <mletterle> hrm... okay. 
[00:53:45] <cmr> I don't remember why I made it take one.
[00:53:53] <mletterle> sfackler: by capture, I kinda meant get the fail message :)
[00:53:57] <mletterle> but thanks both!
[00:54:08] <kmc> krdln, acrichto: there are restrictions on what even unsafe { ... } blocks are allowed to do with mutable pointers, http://static.rust-lang.org/doc/master/rust.html#behavior-considered-unsafe
[00:54:32] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[00:54:34] <kmc> of course these aren't checked by the compiler, breaking these rules is undefined behavior in the C sense
[00:54:42] <kmc> i.e. You're Gonna Have A Bad Time
[00:54:56] <krdln> cmr: That @ was looking little weird, but nonetheless that Terminal wants to have a Writer.
[00:55:47] *** Quits: CyBeRKeL (cyber@E6A1FD6F.BE88DC8C.9C1C15C3.IP) (Ping timeout)
[00:55:56] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[00:56:54] *** Quits: maik (maik@moz-FE083F80.dip0.t-ipconnect.de) (Ping timeout)
[00:57:06] *** jorendorff_away is now known as jorendorff
[00:57:57] *** Quits: fyolnish (fyolnish@moz-DD178E09.uqwimax.jp) (Client exited)
[00:58:00] *** Parts: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) ()
[00:58:02] *** Joins: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com)
[00:59:06] <Sharp> strcat: What should we do with fill for size 0 types?
[00:59:34] <strcat> dunno
[01:00:03] <Sharp> I assume by this point it's not really worth error checking it to make sure it's really the same size… just ignore it?
[01:00:20] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[01:00:32] *** Quits: bent (chatzilla@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[01:02:08] *** Joins: yghannam (yghannam@moz-C5BCCF4E.lightspeed.austtx.sbcglobal.net)
[01:02:22] *** Quits: vertexclique (vertexcliq@88443504.DE7F3465.1826D296.IP) (Client exited)
[01:04:06] *** Quits: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net) (Quit: gavinb)
[01:05:16] *** Quits: tikue_ (tikue_star@9746E5A.EB08480C.689607DE.IP) (Ping timeout)
[01:07:52] <krdln> cmr, acrichto: I dont's see, why stdout returning @StdWriters is better than something like that: https://gist.github.com/krdln/7225579
[01:08:52] <acrichto> krdln: the standard library shouldn't require gc by default, especially with stdio, and currently that code isn't quite sound
[01:09:01] <acrichto> (due to the unsound interface of with_task_stdout
[01:09:02] <acrichto> )
[01:09:11] *** Quits: Daniel_S (Daniel_S@moz-5B58D8B7.dhcp.snlo.ca.charter.com) (Quit: This computer has gone to sleep)
[01:12:24] *** Quits: nejucomo (Adium@moz-FC8B8F66.hsd1.ca.comcast.net) (Quit: Leaving.)
[01:13:09] <krdln> acrichto: So.. why not get rid of @? It would make also buffering more predictable
[01:13:15] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[01:13:43] <acrichto> krdln: I don't see how using @ relates to buffering at all
[01:14:10] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[01:15:51] <krdln> acrichto: My idea, in addition to @ removal, changes semantics, so https://gist.github.com/krdln/7224818 works as expected.
[01:16:12] *** Joins: dew1 (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[01:16:24] *** Quits: alan (alan@moz-F8EE186F.lightspeed.snantx.sbcglobal.net) (Quit: alan)
[01:16:36] <krdln> (or as I expect, I don't know if it's good idea)
[01:17:06] *** Quits: RMF (RMF@ADEE763B.194C8B26.11F731AB.IP) (Quit: Textual IRC Client: www.textualapp.com)
[01:17:15] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[01:17:32] *** Joins: maik (maik@moz-FE083F80.dip0.t-ipconnect.de)
[01:18:20] *** Joins: msingle (Thunderbir@moz-1A29E89B.nrflva.fios.verizon.net)
[01:18:48] *** Quits: msingle (Thunderbir@moz-1A29E89B.nrflva.fios.verizon.net) (Quit: msingle)
[01:18:54] *** Quits: yghannam (yghannam@moz-C5BCCF4E.lightspeed.austtx.sbcglobal.net) (Ping timeout)
[01:19:01] <reedlepee> brson : https://github.com/mozilla/rust/pull/10168
[01:19:05] <Sharp> Looking through some of the other alloc code, why do we always allocate at least 4 elements for any vector?
[01:19:06] <acrichto> krdln: that's just something that comes with understanding that stdio is buffered
[01:19:14] *** Quits: maik (maik@moz-FE083F80.dip0.t-ipconnect.de) (Ping timeout)
[01:19:20] <acrichto> krdln: you can't expect something like C to handle that at all when you're mixing printf and write
[01:19:35] <strcat> Sharp: because it always has to allocate
[01:20:01] <strcat> vectors are not implemented in a good way
[01:20:21] <strcat> https://github.com/mozilla/rust/issues/8981
[01:20:26] * strcat shrugs
[01:20:46] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[01:21:19] <acrichto> strcat: can you remove your r+ from #9945? brson and I still have concerns about it
[01:22:09] <strcat> okay
[01:22:11] <Sharp> It seems like alloc_vec presently actually requires you to allocate at least 1 byte for each element, since we use nonzero_llsize_of to determine the number of bytes
[01:22:32] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[01:22:35] <krdln> acrichto: So it would be the best if that code wouldn't compile at all :) I just don't see good reason why not to buffer whole stdout as a whole. I think multiple writers writing to same stream is not weird case.
[01:22:43] <strcat> acrichto: it no longer does what the name of the PR says
[01:22:56] <Sharp> Or rather, the unit size (but indirectly, number of bytes)
[01:24:05] <acrichto> krdln: there's no reason that it shouldn't compile because the sharing of resources is at the kernel level which we can't really protect against at all
[01:24:12] <strcat> Sharp: I'm not suggesting that you change unique/managed vectors in any way
[01:24:19] <Sharp> I wasn't intending to.
[01:24:22] *** Quits: alisdair (textual@BB0336C3.D2943E17.C579BC3E.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:24:32] <strcat> fixed-size vectors of zero-size elements are actually zero-size
[01:24:38] <strcat> that's why that code causes undef behaviour
[01:24:46] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[01:25:34] <Sharp> Okay :)  I wasn't saying I wanted to change it, I was just wondering whether that was the reason iter() was working (though I guess iter() works on more than just vectors, and its macrofied code looks different, so never mind that :P)
[01:29:17] <brson> reedlepee: thanks!
[01:29:56] <reedlepee> brson: :)
[01:30:35] <krdln> acrichto: I think that Rust could forbid a compilation with sufficiently abstracted libraries, but that's rather a philosophical question. Thanks for the patience :)
[01:30:37] *** Joins: Yeri (jasonjasmi@BA0CD88C.B2E00889.31F69D78.IP)
[01:31:07] *** Joins: erickt (etryzelaar@BF60BF52.64BC77A3.7FC6A66E.IP)
[01:32:03] *** Joins: alan (alan@32702EE8.939109B2.FB082A98.IP)
[01:32:05] <kmc> is the query string encoding from extra::url::Url exposed anywhere other than Url's to_str()?
[01:32:11] <Sharp> ImmutableVector::iter currently *does* allocate at least [len] bytes, I imagine that would be within the scope of this change?
[01:32:16] <cmr> kmc: unfortunately not.
[01:32:23] <cmr> (last I looked)
[01:32:24] <kmc> okay
[01:33:55] <Sharp> Or just Slices?
[01:34:22] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[01:37:17] *** Joins: jstevans (Instantbir@moz-5A31DAB0.bootp.virginia.edu)
[01:37:52] <jstevans> Is there a way to modify a given element (not necessarily the top) in a PriorityQueue?
[01:38:15] <strcat> no
[01:38:27] *** Quits: Yeri (jasonjasmi@BA0CD88C.B2E00889.31F69D78.IP) (Quit: Yeri)
[01:39:25] *** Quits: Addle (quassel@moz-89E971E4.cable.teksavvy.com) (Client exited)
[01:41:13] <kmc> cmr: oh, it seems to be extra::url::query_to_str
[01:41:20] *** Joins: RMF (RMF@moz-71FBA3E0.dsl.telepac.pt)
[01:42:46] <kmc> rusti: extra::url::query_to_str(&[(~"foo",~"my query string = the best"), (~"bar",~"2")].into_owned())
[01:42:49] -rusti- ~"foo=my%20query%20string%20%3D%20the%20best&bar=2"
[01:44:27] <mletterle> hrm.. that mutex doesn't seem to be doing what I want.. which is.. unsurprising...
[01:45:51] *** Quits: jvns (quassel@moz-DE62990.nyc.res.rr.com) (Ping timeout)
[01:47:24] *** Joins: tjc (tjc@C6B2069.2D024FDB.284344F5.IP)
[01:47:24] *** ChanServ sets mode: +o tjc
[01:47:28] *** Quits: krdln (Mibbit@moz-6F8A8560.dynamic.chello.pl) (Quit: http://www.mibbit.com ajax IRC Client)
[01:47:57] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:48:34] *** Quits: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Ping timeout)
[01:48:39] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[01:50:18] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[01:51:32] <kmc> rusti: extra::url::query_to_str(~[])
[01:51:33] -rusti- pastebinned 7 lines of output: http://sprunge.us/DUKL
[01:51:35] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[01:51:38] <kmc> rusti: extra::url::query_to_str(&~[])
[01:51:39] -rusti- ~""
[01:51:59] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[01:52:05] <zws3mb> how should I read from a libc pipe?
[01:52:55] <Ralith> libc defines pipes?
[01:53:07] <zws3mb> c_int
[01:53:30] <strcat> I don't think using POSIX stuff directly is going to work out well
[01:53:56] <strcat> zws3mb: I'm curious what the use case is
[01:54:08] <strcat> we don't really have solid multiprocessing support
[01:54:13] <mletterle> well RWLock works... better.
[01:54:17] <zws3mb> (we're pretty confused at this point, so sorry for the simple/stupid questions.) We're supposed to modify our webserver to support server-side bash scripts, but a bash that we made for the previous problem set
[01:55:07] <zws3mb> the bash shell has been set up to take  a cmd line string, input pipe, output pipe, error pipe, etc.
[01:55:33] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[01:55:51] *** Quits: engla_ (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[01:56:09] *** Joins: napoleon (Mibbit@8BF3A618.2B6E44A8.57DA49D3.IP)
[01:56:19] *** Quits: napoleon (Mibbit@8BF3A618.2B6E44A8.57DA49D3.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:56:40] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[01:56:56] *** Quits: tjc (tjc@C6B2069.2D024FDB.284344F5.IP) (Ping timeout)
[01:58:43] *** Joins: tikue_ (tikue_star@9746E5A.EB08480C.689607DE.IP)
[02:00:28] *** Joins: tjc (tjc@C6B2069.2D024FDB.284344F5.IP)
[02:00:28] *** ChanServ sets mode: +o tjc
[02:01:14] *** Joins: krdln (Mibbit@moz-6F8A8560.dynamic.chello.pl)
[02:03:50] *** Quits: tjc (tjc@C6B2069.2D024FDB.284344F5.IP) (Ping timeout)
[02:03:51] <mletterle> interesting... on travis I get SSL_DISABLED instead of BAD_CERT.. ah.. I bet they don't have a pki directory...
[02:04:12] <mletterle> Going to have to figure that out tomorrow.
[02:04:55] *** Quits: ktt3ja (Mibbit@moz-6B6EE8C0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:06:30] *** Joins: jvns (quassel@moz-DE62990.nyc.res.rr.com)
[02:06:32] *** Quits: jvns (quassel@moz-DE62990.nyc.res.rr.com) (Client exited)
[02:06:42] *** Quits: FreeFull (freefull@25F0ABBB.10B8873C.F2A80E0C.IP) (Ping timeout)
[02:09:17] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[02:11:58] *** Quits: tikue_ (tikue_star@9746E5A.EB08480C.689607DE.IP) (Ping timeout)
[02:12:36] *** Quits: azakai_ (alon@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:13:56] *** Joins: tikue_ (tikue_star@9746E5A.EB08480C.689607DE.IP)
[02:14:25] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[02:14:30] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[02:14:38] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[02:15:00] *** Joins: tjc (tjc@C6B2069.2D024FDB.284344F5.IP)
[02:15:00] *** ChanServ sets mode: +o tjc
[02:15:51] *** Quits: SilverKey (SilverKey@moz-B589DA51.sw.biz.rr.com) (Ping timeout)
[02:16:45] <kmc> the lack of a concise conditional operator in Rust makes me sad
[02:16:58] *** Quits: heftig (heftig@moz-3E10DED1.dip0.t-ipconnect.de) (Ping timeout)
[02:17:10] <kmc> if foo { value } else { othervalue }  is just a lot of noise compared to (foo ? value : othervalue)
[02:18:48] *** Joins: fabiand_ (fabiand@moz-46EC10BD.adsl.alicedsl.de)
[02:19:02] <jeaye> I'd like to see a ternary operator in Rust.
[02:19:34] *** Quits: fabiand (fabiand@moz-A2502B1D.adsl.alicedsl.de) (Ping timeout)
[02:19:51] <Sharp> The terenary operator isn't really that useful when if / else is an expression… IMO anyway.
[02:20:53] <SiegeLord> if/else is very syntax heavy, and it doesn't work in const-expressions
[02:21:17] <SiegeLord> The last point has a chance of being fixed though...
[02:21:19] <strcat> ternary won't work in const exprs if if-else doesn't
[02:21:52] <kmc> Sharp: it's just a lot cleaner to read
[02:22:11] <Sharp> I suppose.  I find that it's mostly only useful if you have to do a lot of nested ones and match works much better in those cases.
[02:22:12] <kmc> Rust is expression-oriented but it inherits C syntax style which is not always convenient to use in expression context
[02:22:22] *** Quits: Mx7f (Mibbit@moz-A4F22CCD.nycap.res.rr.com) (Quit: http://www.mibbit.com ajax IRC Client)
[02:22:27] <kmc> Sharp: I don't see why it's only useful in nested cases
[02:22:35] <kmc> my lament comes from writing some code just now that would be much cleaner with ?:
[02:22:39] *** Joins: bleibig (bleibig@moz-CB11172C.hsd1.ca.comcast.net)
[02:22:40] <Sharp> Because otherwise if / else usually fit on the line.
[02:22:40] *** Joins: ktt3ja (Mibbit@moz-6B6EE8C0.hsd1.va.comcast.net)
[02:22:52] <ercxx> maybe if match didn't need the braces.
[02:22:55] <kmc> they fit but it's noise.
[02:22:58] *** Joins: Daniel_S (Daniel_S@moz-5B58D8B7.dhcp.snlo.ca.charter.com)
[02:23:00] <jeaye> (alter ? foo[0] : foo[1]) = new_foo;
[02:23:08] <kmc> yeah, allowing to drop the braces would be ok too
[02:23:14] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:23:24] <cmr> kmc: can we drop the braces if we don't want () around the conditionals?
[02:23:35] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[02:23:57] <Sharp> With ? : I find myself adding parentheses indiscriminately anyway :P
[02:24:02] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[02:24:07] *** Joins: SilverKey (SilverKey@moz-B589DA51.sw.biz.rr.com)
[02:24:15] *** Joins: heftig (heftig@moz-C04B16C1.dip0.t-ipconnect.de)
[02:24:30] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[02:24:52] *** Quits: reedlepee (Mibbit@9B9315E1.A6025CA.1C37C358.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:25:21] <SiegeLord> I suggested introducing if a => b syntax
[02:25:23] <ercxx> let something = match (bool) is_pokemon : yes_awesome() : nope_ok_no_problem();
[02:26:43] <ercxx> That looks like a very different language though.
[02:26:58] *** Quits: SilverKey (SilverKey@moz-B589DA51.sw.biz.rr.com) (Ping timeout)
[02:27:22] <strcat> I don't think we need more control flow constructs
[02:27:59] * strcat would be for *removing* `do`
[02:28:01] <ercxx> I agree. But I love syntactic sugar.
[02:28:10] * Sharp likes creating temporaries whenever he has to do more than a couple of couple of calculations.
[02:28:25] <strcat> ercxx: every feature has to pull weight though
[02:28:32] <strcat> it's extra complexity
[02:28:32] *** Quits: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[02:28:34] <strcat> makes the language harder to learn
[02:28:49] <ercxx> That's true.
[02:29:41] *** Quits: tjc (tjc@C6B2069.2D024FDB.284344F5.IP) (Ping timeout)
[02:31:15] *** Joins: SilverKey (SilverKey@moz-B589DA51.sw.biz.rr.com)
[02:31:31] <ercxx> anybody very intimate with TcpStream?
[02:31:49] <strcat> I think it would be great if we removed 'loop' in favour of 'while true' too ;p
[02:31:57] <Sharp> ++strcat
[02:32:52] <Sharp> Is loop actually a keyword?
[02:32:54] <strcat> yes
[02:32:56] <strcat> loop {}
[02:32:56] <ercxx> yep
[02:33:09] *** Quits: SilverKey (SilverKey@moz-B589DA51.sw.biz.rr.com) (Ping timeout)
[02:33:51] *** Joins: hjr3 (hradtke@moz-9AC18790.public.wayport.net)
[02:33:57] *** Joins: SilverKey (SilverKey@moz-B589DA51.sw.biz.rr.com)
[02:34:22] <Sharp> Let's just replace all control flow keywords with call/cc :)
[02:36:51] *** Joins: tautologico (shung@703660AA.CFE755C8.C27E1635.IP)
[02:39:50] <zws3mb> anyone know of/can easily generate an example declaration/initiation of BytesReader?
[02:40:16] *** Quits: krdln (Mibbit@moz-6F8A8560.dynamic.chello.pl) (Quit: http://www.mibbit.com ajax IRC Client)
[02:41:39] *** Quits: dew1 (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[02:42:17] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[02:43:30] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:44:13] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[02:44:47] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Ping timeout)
[02:46:16] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[02:47:38] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[02:48:59] *** Joins: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net)
[02:50:58] *** Quits: lfox (lfox@moz-B8648F0F.nycmny.fios.verizon.net) (Quit: )
[02:52:57] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[02:55:59] *** Joins: guacamole (Mibbit@moz-24A8D406.hsd1.va.comcast.net)
[02:56:24] <guacamole> is there any way to parse a string using regex?
[02:56:42] <guacamole> or check for a regex expression within the string?
[02:57:24] <sfackler> guacamole: There currently isn't any regex support in the standard library. There are some PCRE bindings floating around iirc
[02:58:13] <guacamole> ok thx
[02:58:29] *** Quits: jstevans (Instantbir@moz-5A31DAB0.bootp.virginia.edu) (Ping timeout)
[02:58:41] <sfackler> zws3mb: BytesReader? Do you mean MemReader?
[03:00:24] *** Joins: MisterAbc (Mibbit@moz-E7EA667F.bootp.virginia.edu)
[03:00:53] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[03:00:55] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[03:01:56] *** Quits: ktt3ja (Mibbit@moz-6B6EE8C0.hsd1.va.comcast.net) (Ping timeout)
[03:02:08] *** Quits: test (Mibbit@1914817D.DD5A7578.2B99CF6B.IP) (Ping timeout)
[03:02:36] <zws3mb> sfackler, I suppose MemReader would work too--mostly messing around to try to deal with an out pipe
[03:03:18] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[03:03:35] *** Joins: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net)
[03:04:07] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[03:04:08] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[03:04:47] <sfackler> oh, are you on 0.8?
[03:06:44] *** Quits: Daniel_S (Daniel_S@moz-5B58D8B7.dhcp.snlo.ca.charter.com) (Quit: Leaving)
[03:06:56] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:07:30] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[03:07:31] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:07:38] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[03:07:38] *** ChanServ sets mode: +o pnkfelix
[03:07:57] *** Quits: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net) (Quit: gavinb)
[03:08:12] <guacamole> yea .8
[03:08:19] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Quit: Leaving.)
[03:08:33] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Quit: )
[03:08:38] <guacamole> if I had a tuple, say (uint, uint), how do i access each value of the tuple?
[03:08:47] <zws3mb> .first()
[03:08:51] <zws3mb> .second()
[03:09:03] <guacamole> alright thanks
[03:11:19] *** Joins: ktt3ja (Mibbit@moz-6B6EE8C0.hsd1.va.comcast.net)
[03:11:31] *** Quits: KindOne (KindOne@moz-C10D0A83.dynamic.ip.windstream.net) (Ping timeout)
[03:13:11] <jeaye> error: type `std::rt::io::file::FileReader` does not implement any method in scope named `read_line`
[03:13:21] <jeaye> I've brought in Reader, BufferedReader, and FileReader.
[03:13:49] *** Joins: brendan (brendaneic@B0D36173.5F77D495.B41F1B80.IP)
[03:14:33] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[03:15:20] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[03:15:23] <sfackler> for some reason, read_line is only implemented for a bufferedreader. Wrap your FileReader in a BufferedReader
[03:16:04] <jeaye> sfackler: How so?
[03:16:05] *** Joins: KindOne (KindOne@moz-E3099081.dynamic.ip.windstream.net)
[03:17:35] <sfackler> jeaye: let r = FileReader::new(..); let r = BufferedReader::new(r); r.read_line();
[03:17:53] *** Quits: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net) (Client exited)
[03:20:00] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[03:21:25] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[03:22:15] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[03:22:51] *** Joins: cdidd (cdidd@moz-6595103B.broadband.corbina.ru)
[03:23:07] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[03:23:24] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[03:23:36] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[03:24:08] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[03:24:39] *** Joins: salamiwiglet (Mibbit@moz-4B2DE764.hsd1.wa.comcast.net)
[03:24:55] <salamiwiglet> Hello
[03:25:55] <salamiwiglet> I'm disappointed to see segmented stacks get cut.
[03:26:02] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[03:27:09] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[03:27:19] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[03:27:35] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[03:27:39] <pnkfelix> salamiwiglet: You aren't alone, but we haven't figured out a way to make competitive
[03:27:44] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[03:28:06] *** Quits: tautologico (shung@703660AA.CFE755C8.C27E1635.IP) (Quit: tautologico)
[03:28:20] <salamiwiglet> I agree it is technically challenging, but there is a use case where it would be a killer feature
[03:28:45] <pnkfelix> salamiwiglet: if it hasn't already been mentioned on the mailing list thread
[03:28:47] <strcat> so how do you implement it without pushing rust out of the systems language niche?
[03:28:55] <pnkfelix> salamiwiglet: then feel free to add it there
[03:28:58] <salamiwiglet> It would also require solving the unwind problem, so that a stack overflow only causes task failure
[03:28:59] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[03:29:32] *** Joins: tautologico (shung@703660AA.CFE755C8.C27E1635.IP)
[03:29:40] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Quit: Leaving.)
[03:29:40] <strcat> segmented stacks turn stack overflow into out-of-memory, if you go deep enough
[03:30:00] <salamiwiglet> I wouldn't expect to see this in 1.0 because of those challenges, but it would be nice if it were kept on the roadmap
[03:30:03] <pnkfelix> salamiwiglet: (I'm referred to the "More on stack safety" thread)
[03:30:38] <pnkfelix> sed -e s/referred/referring/
[03:31:52] <salamiwiglet> I've worked with several systems where memory overcommit is turned off so that malloc() failure can be handled instead of getting OOM-killed when you touch a page and the OS can't commit memory to it.
[03:32:06] <strcat> rust aborts on OOM
[03:32:44] <salamiwiglet> This would also require OOM to fail the task instead of aborting
[03:32:51] <strcat> failure allocates
[03:32:52] *** Quits: mr_pants (Mibbit@moz-F2E42C9D.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[03:33:00] <strcat> lots of dtors allocate too
[03:33:08] <strcat> and if you have segmented stacks, calling functions allocates
[03:33:11] <strcat> so you can't handle OOM
[03:33:31] <salamiwiglet> Well, keep some per-task memory around for a rainy day.  If you exhaust that, then abort().  Then you just have to be careful in your destructors.
[03:33:45] <salamiwiglet> I don't want to get mired in implementation details, I'm just trying to outline the scenario.
[03:33:53] <strcat> so each task needs to reserve memory
[03:34:13] <strcat> how much memory do you get for unwinding?
[03:34:23] <strcat> recursing deep into a tree to destroy it uses as much stack space as anything else
[03:34:42] <strcat> I don't think you can have segmented stacks + handling for dynamic OOM
[03:34:56] <strcat> without reserving a large segment for unwinding
[03:35:05] <strcat> and now you don't have any benefits of segmented stacks
[03:35:15] <salamiwiglet> With memory over-commit turned off, you want segmented stacks so you consume address space incrementally, since all address space allocations are immediately backed by physical memory.
[03:35:30] <strcat> not necessarily
[03:35:42] <strcat> do you want to pay a huge performance hit to allow having many tasks? most of the time, I don't think so
[03:36:30] <salamiwiglet> I guess you could cordon off a chunk of address space and map pages into it on-demand.  The important thing is that failing to grow the stack doesn't kill the entire process.
[03:37:00] *** Joins: Addle (quassel@moz-89E971E4.cable.teksavvy.com)
[03:37:25] <strcat> if you cut up address space into chunks instead of consuming it contiguously, there is high overhead
[03:37:40] <strcat> you are *never* going to get in the systems language niche with segmented stacks
[03:37:52] <salamiwiglet> Basically what I'm asking for is:  1) Memory allocation failures take down tasks but not the entire process.   2)  Stack growth is subject (1) like any other allocation of memory.
[03:37:55] <strcat> current C/C++ users will have zero interest in a language that's more than 20-30% slower
[03:39:00] <salamiwiglet> I thought the stack check introduced more like 1-2% overhead
[03:39:13] <strcat> sure, the stack check is low overhead
[03:39:19] <strcat> segmented stacks are not
[03:39:26] *** Quits: ktt3ja (Mibbit@moz-6B6EE8C0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[03:39:59] <strcat> (low as in 1-7%)
[03:40:20] *** jorendorff is now known as jorendorff_away
[03:40:21] <strcat> segmented stacks cut up the stack into a bunch of pieces
[03:40:25] <strcat> they kill memory locality
[03:40:35] <strcat> you also end up thrashing on boundaries
[03:40:45] <strcat> allocate a segment, and deallocate
[03:40:46] <strcat> over and over
[03:40:54] <strcat> Go is dropping segmented stacks because of thrashing alone
[03:41:54] <strcat> and it's not really a competitor in the C/C++ niche
[03:42:13] <salamiwiglet> You can work around it by tuning the default segment size.  It's often the case that only one or two uncommon code paths recurse deeply.  If you only need to allocate the extra segments on those occasions and then release them, you're golden.
[03:42:37] <strcat> the problem will always exist
[03:42:49] <strcat> it's not caused just by recursion
[03:43:13] <strcat> your current segment is nearly full, and you're in a function with a loop calling some other function N times
[03:43:20] <strcat> you end up allocating/deallocating N times
[03:43:24] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[03:43:59] *** Quits: Phlunk3 (Phlunk3@B3BD2D2D.D79BC248.293D7F07.IP) (Quit: Leaving)
[03:44:02] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[03:44:20] <strcat> you can watch what it does to the cache in callgrind too
[03:44:36] <strcat> although I don't know how realistic callgrind is
[03:44:39] <salamiwiglet> So you can profile it and tune the size of the first segment to cover your common cases, or try to reduce stack usage.
[03:45:13] <strcat> there will always be cases where it thrashes
[03:45:28] <strcat> reducing stack usage just moves the thrashing somewhere else
[03:45:31] <salamiwiglet> Then your uncommon cases will be less performant, but they won't *crash*.  And you don't have to commit memory/address space up front for every task just for the occasional burst of high stack usage.
[03:45:34] <strcat> as does changing sizes or other tuning
[03:45:55] <pnkfelix> strcat: wait, Go is dropping segmented stacks?   I thought pcwalton just said that they increased the segment size?
[03:46:05] <strcat> pnkfelix: they already increased it afaik
[03:46:13] <zws3mb> any pastebin sites which support rust syntax?
[03:46:13] <strcat> they are getting a fully precise GC
[03:46:17] <strcat> so they are going to use contiguous stacks
[03:46:24] <strcat> and reallocate them (but never shrink)
[03:46:33] <pnkfelix> strcat: oh i see
[03:46:37] <strcat> they'll use the precise GC metadata to fix pointers (they have no unmanaged ptrs)
[03:47:00] <pnkfelix> strcat: do you have a ptr handy?
[03:47:12] <strcat> pnkfelix: https://docs.google.com/document/d/1wAaf1rYoM4S4gtnPh0zOlGzWtrZFQ5suE8qr2sD8uWQ/pub I think this is old
[03:47:21] <SiegeLord> zws3mb: Github's gist sort of does
[03:47:41] <strcat> or not, it looks up-to-date since it talks about precise gc
[03:47:51] <salamiwiglet> So they are dropping support for segmented stacks in favor of something with all the same benefits.  The only reason rust can't do the same is because of its memory model.
[03:47:56] <Sharp> strcat: Can you build a Phi node with only one input?
[03:48:08] <strcat> Sharp: well in that case you probably don't need a phi node ;p
[03:48:14] <Sharp> Of course you don't :)
[03:48:22] <Sharp> I was thinking I could pass one into a general loop function as a ValueRef.
[03:48:35] <Sharp> For those who didn't need it to be a Phi node they could just use it that way.
[03:48:41] <Sharp> Otherwise you could add a branch.
[03:49:17] <Sharp> Well, maybe you can do the same thing by taking the label of a block and it's not necessary anyway :)
[03:49:28] <strcat> pnkfelix: I think those graphs do a really good job of showing why it's terrible though
[03:50:00] <sfackler> on 64bit there's more than enough room to do expanding stacks with a segfault handler without ever needing to move stacks around
[03:50:02] <strcat> there are arbitrary points in the program where you have an unpredictable perf hit due to being at the end of a segment but not actually needing enough space to hold onto a new one
[03:50:26] <salamiwiglet> sfackler: yeah, that might be another possibility instead of segments.
[03:50:33] <strcat> definitely couldn't use a language with this in a video game, or embedded, or a kernel
[03:50:53] <strcat> it's worse than a global GC pause in the JVM
[03:51:02] *** Joins: GeneralMaximus (ankur@104A6D6D.3AF170B5.CEFA97FA.IP)
[03:51:14] * strcat shrugs
[03:51:30] <strcat> predictable performance is part of reliability for code that is performance critical
[03:51:48] <salamiwiglet> not crashing under memory pressure is even more critical
[03:52:04] <salamiwiglet> performance drops to 0 when you dump core
[03:52:27] <strcat> you can reserve your memory up-front
[03:52:32] <strcat> that's what embedded programs do
[03:52:32] <pnkfelix> salamiwiglet: maybe it will have to be some Ph.D students research project
[03:52:42] <salamiwiglet> If you can leverage the task model while still having localized failure in OOM conditions, that would be a killer feature for certain workloads
[03:53:22] <strcat> rust's entire philosophy is using proven technologies and not taking risks with blue sky ideas
[03:53:31] *** Quits: GeneralMaximus (ankur@104A6D6D.3AF170B5.CEFA97FA.IP) (Connection reset by peer)
[03:54:10] *** Joins: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net)
[03:54:14] <strcat> at least it's stated all over the place in the docs
[03:54:15] *** jorendorff_away is now known as jorendorff
[03:54:36] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[03:55:42] <salamiwiglet> If I run out of memory in Java, I get an exception, but the rest of the application continues chugging along.  Are you saying that rust will never support behavior other than calling abort()?  Do you except people to use it for high-reliability systems?
[03:56:19] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[03:56:56] <strcat> high-reliability systems don't use malloc/free, they allocate the upper bounds immediately
[03:57:11] <strcat> if you don't have upper bounds, it's a joke to call it reliable
[03:58:35] <salamiwiglet> Only part of the system may have hard reliability requirements.
[03:58:49] *** Quits: kimundi (kimundi@moz-1D7A8D6E.dip0.t-ipconnect.de) (Ping timeout)
[03:58:57] <strcat> rust will support multi-processing
[03:59:05] <salamiwiglet> For example, it's acceptable to start rejecting or throttling client connections to a server.  But it is not acceptable to crash and fail to flush a cache to disk, etc.
[03:59:18] <salamiwiglet> So some subsystems will pre-allocate, and others will not.
[03:59:56] <salamiwiglet> This can be done in C.  What can't be done in C is using light-weight tasks as a convenient concurrency primitive.
[04:00:07] <salamiwiglet> Having both in one language would be a killer feature.
[04:00:16] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[04:00:25] *** Joins: yghannam (yghannam@moz-C5BCCF4E.lightspeed.austtx.sbcglobal.net)
[04:00:40] *** Joins: pnathan (Adium@moz-EF4F82C8.tukw.qwest.net)
[04:00:49] <pnkfelix> salamiwiglet: wait, Java can recover from OOM?  That wasn't my understanding.  See e.g. http://stackoverflow.com/questions/3058198/can-the-jvm-recover-from-an-outofmemoryerror-without-a-restart
[04:00:57] <strcat> salamiwiglet: C doesn't have stack safety
[04:01:08] *** Joins: GeneralMaximus (ankur@D85D9C2.49E56CE.8DE24349.IP)
[04:01:16] <pnkfelix> salamiwiglet: (I'm well aware of OutOfMemoryError.   the queston is whether you can actually recover, versus just attempt to shut down gracefully)
[04:01:45] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[04:01:55] <pnkfelix> salamiwiglet: but i haven't used Java in a long time, maybe the state of the JVM has improved
[04:02:08] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[04:02:11] *** Joins: kimundi (kimundi@moz-E3DE4244.dip0.t-ipconnect.de)
[04:02:12] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[04:02:13] *** Quits: yghannam (yghannam@moz-C5BCCF4E.lightspeed.austtx.sbcglobal.net) (Ping timeout)
[04:02:15] <salamiwiglet> pnkfelix: I suspect that in practice there will be libraries that do not cope well with it.  I didn't think there was a problem at the level of the JVM.
[04:02:43] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:03:08] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[04:03:37] <salamiwiglet> strcat: No, but it's not as important if I'm not using lightweight tasks, as I can just allocate absurdly large stacks for my thread pools.  The problem is that I then have to program in an annoying Node.js callback-hell style.
[04:04:10] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[04:04:19] <pnkfelix> salamiwiglet: I suppose its in principle an issue of what the JRE does in terms of its libraries, not the JVM itself.  But I remain skeptical of attempting to keep chugging along.
[04:04:21] <strcat> C# has high-level async code without needing actors
[04:04:34] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[04:04:50] <salamiwiglet> Sure.  You could add async/await to Rust.  But then what's the purpose of having lightweight tasks?
[04:05:19] <strcat> for dividing up CPU-bound work and executing it efficiently with a thread pool
[04:05:27] <strcat> like intel-tbb
[04:06:15] <strcat> or any other time you have units of work
[04:06:15] <salamiwiglet> I'm interested more in IO multiplexing use cases.
[04:06:18] *** Quits: geoffhill (geoffhill@moz-79C8D45C.amazon.com) (Quit: geoffhill)
[04:06:19] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Ping timeout)
[04:06:38] *** kimundi is now known as zz_kimundi
[04:06:45] <salamiwiglet> I'd love to have a task per unit of work.  If trying to do so risks abort() being called, I can't use the feature.
[04:06:49] *** Quits: Voomer (Voomer@moz-CC05FF5E.hsd1.wa.comcast.net) (Connection reset by peer)
[04:06:59] *** Joins: Voomer (Voomer@moz-CC05FF5E.hsd1.wa.comcast.net)
[04:07:03] <Sharp> strcat: What's the difference between sub_block and scope_block?
[04:07:22] <strcat> Sharp: dunno
[04:07:54] <strcat> salamiwiglet: doing anything without an upper bound risks calling abort
[04:08:02] <strcat> any out-of-memory condition is handled by rust with abort
[04:08:06] <salamiwiglet> If tasks are designed more for userspace timeslicing of CPU-bound workloads and not for scalable IO multiplexing, then that's fine.
[04:08:17] <strcat> throwing an exception within a dtor is handled with abort
[04:08:34] <strcat> but it could be fixed to only abort when an exception is already thrown
[04:08:48] <Sharp> Based on the function params, the difference is that scope_block has, um, scope :P  But I'm not sure what scope means in the context of SSA.
[04:09:14] * Sharp figured it was for debugging.
[04:09:35] *** Joins: bjz (textual@B398BE78.F804C29E.D35A31DF.IP)
[04:09:55] <strcat> salamiwiglet: it doesn't do time slicing at all
[04:09:57] <salamiwiglet> Tasks seem like the way to go, though, as the call stack is a natural fit for rust's lifetime semantics.
[04:10:30] <strcat> tasks are cooperatively scheduled
[04:10:54] <salamiwiglet> Trying to do CPS (even with help from the compiler) seems like it would run into problems with lifetimes
[04:11:10] <strcat> I don't think pre-emption of userspace threads outside of a VM is realistic without huge overhead, at that point they should be OS threads
[04:11:13] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[04:11:13] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[04:11:51] <salamiwiglet> strcat: So what's the point of *lightweight* tasks.  You can do a threadpool with plain old pthreads.
[04:11:57] <strcat> the only lightweight thing about them is the lack of a pre-emptive/fair scheduler
[04:12:02] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[04:12:14] <salamiwiglet> So what's the intended use case?  I thought it was IO.
[04:12:23] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[04:12:46] <strcat> I'm not the person to ask about it, I don't think the task model will ever compete with a simple epoll/kqueue loop
[04:13:22] <strcat> epoll/kqueue -> event-based code without callbacks and without the overhead of any kind of actor system
[04:13:31] <strcat> that's lost in the libuv abstraction layer though
[04:14:07] *** zz_kimundi is now known as kimundi
[04:14:07] <salamiwiglet> Not having to write event- or callback-driven code is the major motivation in ditching C for rust (for me)
[04:14:46] <salamiwiglet> Async/await would also work, but it seems like tasks are a better fit for the memory lifetime model of rust.
[04:14:50] *** Quits: Voomer (Voomer@moz-CC05FF5E.hsd1.wa.comcast.net) (Connection reset by peer)
[04:14:59] <pnkfelix> strcat: BTW, I thought plan-of-record (from when graydon was lead) was for nested failure inside dtor to go to fallback failure mode in the task.  (This is not implemented yet, to my knowledge).  But it should not cause whole program to abort.
[04:15:01] *** Joins: Voomer (Voomer@moz-CC05FF5E.hsd1.wa.comcast.net)
[04:15:25] <strcat> pnkfelix: well, what about failure in a dtor during failure
[04:15:32] <strcat> lets say you have a landing pad
[04:15:36] <pnkfelix> strcat: that's what I mean by nested failure
[04:15:44] <strcat> { call dtor_x; call dtor_y; call dtor_z; }
[04:15:50] <strcat> the dtor calls can fail
[04:15:57] <strcat> do you output another landing pad?
[04:16:06] <strcat> and then another
[04:16:09] <strcat> and then another
[04:16:11] *** Quits: guacamole (Mibbit@moz-24A8D406.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:16:12] <strcat> ;s
[04:16:51] <strcat> I don't think you can have your cake and eat it too - if you have exceptions without a VM, you have problems like this
[04:16:55] <pnkfelix> strcat: maybe I'm mistaken, I'm trying to find my reference for this.  I'm pretty sure graydon was not trying to dictate that we infinitely regress in the compiler
[04:16:58] *** Quits: GeneralMaximus (ankur@D85D9C2.49E56CE.8DE24349.IP) (Ping timeout)
[04:17:03] <salamiwiglet> I'm also not so certain that an event-driven model will always be faster than userspace context switching, as call stacks have good cache locality that might be lost when moving state into records on the heap.
[04:17:27] <strcat> yeah, in the long-term OS threads will win as they always have
[04:17:36] <pnkfelix> strcat: ah, 
[04:17:48] <strcat> at least on linux, that's where things will go
[04:18:00] <strcat> you won't need to write async code because threads will be enough, as they usually are now
[04:18:21] <strcat> spawning 100k OS threads is totally fine *right now*
[04:18:23] <pnkfelix> strcat: hard failure means you don't run dtors.  You "just" free resources.  But honestly I don't know what that is supposed to mean, since some resource won't know how to be freed soundly without a dtor 
[04:18:31] <strcat> pnkfelix: that breaks invariants though
[04:18:36] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[04:18:37] <strcat> you don't unlock locks, you don't poison arcs
[04:18:51] <pnkfelix> strcat: (I'm just going what was written in the rust.md).  I agree that I don't see how to do it soundly
[04:19:10] <strcat> imo reliable code means allocating up-front and not using exceptions.... I don't see how you can do it otherwise
[04:19:25] <strcat> I'm starting to fear that rust-core is going to be a separate stdlib forever
[04:19:39] <pnkfelix> strcat: at least not without assigning "freeing resource" some sort of specialized privileged state that doesn't include user-written dtors. 
[04:20:07] <pnkfelix> strcat: (which is a non-starter for libraries like Arc etc)
[04:20:17] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[04:20:22] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Connection reset by peer)
[04:20:22] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[04:21:02] *** Quits: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net) (Quit: gavinb)
[04:21:16] <salamiwiglet> strcat: I agree that OS threads making sync calls will always be faster than async/event-driven models, but they don't scale today.
[04:21:28] <strcat> they scale enough for most use cases
[04:21:42] <salamiwiglet> strcat: Thus the existence of nginx, node.js, etc.
[04:21:45] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[04:21:50] *** Quits: crembo (crembo@moz-C2B364AA.vc.shawcable.net) (Quit: Leaving...)
[04:21:57] <salamiwiglet> They don't scale for mine.
[04:22:02] <strcat> which is what?
[04:22:22] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[04:22:58] <strcat> http://blog.coralic.nl/2013/05/12/apache-2-4-vs-nginx-1-4/
[04:23:18] * strcat shrugs
[04:23:19] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[04:23:26] *** Joins: GeneralMaximus (ankur@3CB5D08.3621702D.EBA8E3F.IP)
[04:23:27] <salamiwiglet> storage protocol servers
[04:23:32] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[04:23:32] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[04:24:45] <salamiwiglet> "It clearly shows that Nginx uses less CPU than Apache for the same work, the difference is so big you can see it by just looking at the system monitor."
[04:25:05] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[04:26:22] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[04:26:45] <ChrisMorgan> Luqman: I'm not having success with building LLVM for ARM :-(
[04:26:52] *** Quits: refold (gman@moz-42D68426.a258.priv.bahnhof.se) (Quit: leaving)
[04:27:15] <salamiwiglet> Anyway, if segmented stacks aren't the way to achieve highly scalable IO multiplexing, that's fine.
[04:27:43] <salamiwiglet> But I'd love for there to be a solution to the problem in rust that involves writing direct-style code rather than CPS or event-driven code
[04:28:16] <salamiwiglet> And rust's efficient memory model with no mandatory GC makes it a good candidate for this kind of work
[04:29:24] <ChrisMorgan> My Clang isn't working. Claims stddef.h is not found (this also has prevented `rust check` from working for quite some time, not sure when it began).
[04:29:56] <salamiwiglet> Are there any plans for an async/await or generator-style mechanism?
[04:30:34] <strcat> salamiwiglet: implementing generators like C# is a future plan, but not going to happen in the near future
[04:31:27] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[04:32:27] <salamiwiglet> I could imagine the interactions with lifetimes could get hairy.  That's why tasks are attractive as a unit of work.
[04:32:57] <strcat> we already have those interactions with lifetimes with iterators today
[04:33:01] <strcat> generators would be sugar for it
[04:33:16] <strcat> tasks are far too slow to use them for iteration, so we already need something else
[04:33:24] <salamiwiglet> And isn't there now a problem where you have to write unsafe code to implement &mut iterators?
[04:33:31] *** Joins: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net)
[04:34:07] <strcat> salamiwiglet: http://smallcultfollowing.com/babysteps/blog/2013/10/24/iterators-yielding-mutable-references-take-2/
[04:34:42] <salamiwiglet> Yeah...
[04:35:17] <strcat> we were already able to write safe &mut iterators for trees
[04:35:35] <salamiwiglet> That's good to hear
[04:35:54] <strcat> (a long time ago ;p)
[04:36:05] <sp3d> for vectors the only missing bit is a more finely-grained way to safely split an &mut--it seems like fancier pattern-matching in a match could do that
[04:36:15] <strcat> mut_split()
[04:36:24] <strcat> or you mean without unsafe code?
[04:36:27] <sp3d> the latter
[04:36:28] <salamiwiglet> Just to be clear, my main interest is in the async/await side of things.
[04:36:39] <strcat> sp3d: but the compiler codegen is essentially an unsafe block anyway
[04:37:03] <strcat> I don't think it matters whether it's a 3 line unsafe block in libstd or 150 lines of codegen in librustc (although the unsafe block is a *lot* easier to verify)
[04:37:20] <strcat> I'm not clear on why it's suddenly better if it's a compiler feature
[04:37:21] <salamiwiglet> Generators have to be as lightweight as possible over other concerns since you might want to use them in CPU-bound code.
[04:37:57] <sp3d> the only reason to prefer the latter is that more powerful pattern-matching increases expressiveness
[04:38:01] *** Joins: eddyb (eddy@A93A03C9.9065A63B.FCAAE698.IP)
[04:38:08] <salamiwiglet> Unsafe code in stdlib isn't a big deal.  I trust the rust developers to get it right.
[04:38:11] <strcat> sp3d: I agree that slice matching should work for &mut slices
[04:38:39] <strcat> but in general I think we should move features out of the compiler
[04:38:42] <cmr> salamiwiglet: ehh, that's not historically true ;)
[04:38:47] <strcat> ~[T], ~T
[04:38:48] <salamiwiglet> The problem is when app or library developers are forced to use it too often.  You start to lose the advantage of a provably-safe language.
[04:39:04] <strcat> they're never forced to use it, they can copy or use refcounting/gc
[04:39:26] <salamiwiglet> This kills the performance, etc. etc.
[04:39:39] <sp3d> strcat: would that imply losing the ability to match on vec slices at all?
[04:39:39] <strcat> you need unsafe blocks when you want to write code as you would in the most efficient C way, for some percentage of cases
[04:39:44] <strcat> sp3d: no
[04:39:48] <strcat> sp3d: there's no matching on ~[T]
[04:39:57] <sp3d> ah, ok
[04:40:00] <strcat> matching is on &[T] atm
[04:40:03] <sp3d> yeah
[04:40:03] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Connection reset by peer)
[04:40:04] <strcat> not implemented for &mut [T]
[04:40:06] <strcat> but should be
[04:40:10] <salamiwiglet> Yeah.  Don't get me wrong, being able to tell the compiler "Just do it my way" is essential for a systems language.
[04:40:52] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[04:41:12] <pnkfelix> strcat: do you know if pcwalton's plan for better support for smart-ptr syntax includes pattern binding?  (I assume that using an explicit borrow method as illustrated by RC<T>'s borrow is not meant to be the ideal we're aspiring to for smart-ptrs?)
[04:41:36] <strcat> pnkfelix: I consider the borrow method a really ugly bug
[04:41:47] <strcat> anything the built-in types can do that a library type can't do is a bug imo
[04:41:59] <pnkfelix> strcat: he mentioned pattern-binding in passing w.r.t. placement-new, so I assume he's thinking about it, but I don't know what the plan is
[04:41:59] <strcat> (excluding something like precise GC)
[04:42:16] <strcat> pnkfelix: well deref is a 'solved' problem, just not implemented :)
[04:42:28] *** Quits: GeneralMaximus (ankur@3CB5D08.3621702D.EBA8E3F.IP) (Ping timeout)
[04:42:32] <strcat> just shove borrow into a trait, put a lang item on it, and add it to the deref code path
[04:42:42] <strcat> once deref works, auto-deref will Just Work too
[04:42:47] <strcat> so some_box.foo will work
[04:43:04] <pnkfelix> strcat: … right, some_box.foo will work, but not  match some_box { … }, right ?
[04:43:14] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[04:43:17] <strcat> pnkfelix: right
[04:43:17] <strcat> since the field is priv
[04:43:22] <strcat> like if you have...
[04:43:30] <strcat> (Rc<int>, int)
[04:43:36] <strcat> you couldn't match out the ints
[04:43:48] <strcat> rusti: let x = (~5, 2); let (~a, b) = x; (a, b)
[04:43:50] -rusti- (5, 2)
[04:43:51] <strcat> like you can do there
[04:44:02] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[04:44:04] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Quit: Leaving)
[04:44:06] <strcat> I'm not sure what a solution to that would be
[04:44:13] *** Joins: jstevans (Instantbir@moz-20668614.bootp.virginia.edu)
[04:44:25] <pnkfelix> strcat: yeah i don't either.  maybe some sort of destructuring method on the trait?  not clear.
[04:44:37] <strcat> pnkfelix: imo the solution for vectors is to make auto-slicing a trait
[04:45:02] <strcat> (and obviously indexing should be a set of trait, and *not* the crappy Index we have now)
[04:45:06] <strcat> set of traits*
[04:45:40] <strcat> rusti: let x = ~5; let y: &int = x; y
[04:45:41] -rusti- pastebinned 18 lines of output: http://sprunge.us/CEaG
[04:45:58] <strcat> rusti: let x = ~5; let y: &int = x; *y
[04:45:59] -rusti- 5
[04:46:20] <strcat> pnkfelix: well... we could base it off that ^
[04:46:30] <strcat> if you implement Pointer, you could get implicit conversions to &T
[04:46:34] <strcat> and pattern matching could use it
[04:46:41] <sp3d> rusti: let x = ~5; let y = x as &int; *y
[04:46:43] -rusti- pastebinned 7 lines of output: http://sprunge.us/DSSR
[04:47:05] <sp3d> reasonable, I guess
[04:47:18] * strcat would love it if 'as' didn't exist ;p
[04:47:26] <strcat> evil const exprs
[04:47:32] <strcat> (if we had CTFE)
[04:47:35] <strcat> rust 2.0? ;p
[04:49:02] <pnkfelix> strcat: wait, so what would your proposal do for this:
[04:49:04] <pnkfelix> rusti: let x = ~5; match x { ~5 => "yes", _ => "no" }
[04:49:04] -rusti- "yes"
[04:49:32] *** Joins: GeneralMaximus (ankur@7655A519.E9DECC69.90B98F9.IP)
[04:50:14] <strcat> pnkfelix: well we are already going to need #[non_nullable_ptr] for the Option<T> optimization, so we could just endow them with something like newtype-like destructuring
[04:50:21] <strcat> Rc(5)
[04:50:23] * strcat shrugs
[04:50:37] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[04:51:35] <strcat> pnkfelix: I think Rust is currently not doing a great job at supporting libraries though, because of special cases like this for built-ins
[04:51:49] <strcat> so imo we do need general solutions to stuff like this
[04:51:49] *** Quits: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net) (Connection reset by peer)
[04:51:53] <strcat> generic container literals and so on
[04:52:00] *** Joins: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net)
[04:52:23] <strcat> C++11 does a better job because *none* of the containers are built-in so it was absolutely horrible to use and they had to fix it
[04:53:00] <strcat> for example... I can write std::map<int, int> {{1, 2}, {5, 10}, {11, 12}}; in C++
[04:53:00] *** Joins: Heather (Heather@19663F6.F53BAACC.9C17E900.IP)
[04:53:05] <Heather> morning
[04:53:09] <strcat> same syntax as vectors (std::vector<int> {1, 2, 3})
[04:53:19] <Heather> why I've got warnings on comments
[04:53:25] <strcat> what do you mean?
[04:53:56] <Heather> strcat "/*" within comment [-Wcomment]
[04:54:14] *** Quits: Voomer (Voomer@moz-CC05FF5E.hsd1.wa.comcast.net) (Connection reset by peer)
[04:54:25] *** Joins: Voomer (Voomer@moz-CC05FF5E.hsd1.wa.comcast.net)
[04:54:29] <Heather> I see nothing bad in comments so just wonder why compiler warn me about them
[04:54:31] *** Quits: tautologico (shung@703660AA.CFE755C8.C27E1635.IP) (Quit: tautologico)
[04:54:54] <ChrisMorgan> I believe nested comments are coming or have already come.
[04:55:33] <Heather> ChrisMorgan what is nested comments?
[04:55:44] <SiegeLord> They already exist
[04:55:52] <sp3d> rusti: /* /* */ */ ()
[04:55:53] -rusti- ()
[04:55:56] <ChrisMorgan>  /* outer comment /* this is a nested comment */ this is still a comment */
[04:56:08] *** Joins: onr99 (onur@DBB90BD8.70012127.53438D71.IP)
[04:56:25] <tikue_> rusti: 1 /* /* wee */ look at that comment! what's it doing there? */
[04:56:27] <Heather> ChrisMorgan do you think the warning is about nested comments?
[04:56:29] -rusti- 1
[04:56:52] <ChrisMorgan> rusti: /* foo /* bar */ fn x(){} x()
[04:56:57] -rusti- pastebinned 8 lines of output: http://sprunge.us/UjVf
[04:57:11] *** Quits: onr99 (onur@DBB90BD8.70012127.53438D71.IP) (Quit: Leaving)
[04:57:26] <ChrisMorgan> Heather: dunno
[04:57:54] <strcat> rusti: /* "/*" */
[04:57:55] -rusti- pastebinned 8 lines of output: http://sprunge.us/iOaT
[04:58:07] <Heather> rusti: while(true) { ; }
[04:58:11] <strcat> I don't see how you'd trigger that warning ;p
[04:58:12] -rusti- timeout triggered!
[04:58:20] <ChrisMorgan> rusti: () // /* foo
[04:58:22] -rusti- ()
[04:58:43] <Heather> rusti: print("hi"); while(true) { ; }
[04:58:43] <ChrisMorgan> That was /* in a comment, but no warning.
[04:58:48] -rusti- hitimeout triggered!
[04:59:00] <ChrisMorgan> rusti: loop{}
[04:59:02] -rusti- pastebinned 10 lines of output: http://sprunge.us/aCEK
[05:00:17] <Heather> rusti: print("test\x08");
[05:00:20] -rusti- test()
[05:01:16] <Heather> rusti: sleep(1);
[05:01:17] -rusti- pastebinned 7 lines of output: http://sprunge.us/PTKg
[05:01:55] *** Quits: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP) (Ping timeout)
[05:02:10] <Heather> rusti: std::rt::io::timer::sleep(10); print("test");
[05:02:11] -rusti- test()
[05:02:21] <Heather> rusti: std::rt::io::timer::sleep(1000); print("test");
[05:02:24] -rusti- test()
[05:02:29] *** Joins: vu3rdd (vu3rdd@moz-E083170.cisco.com)
[05:02:29] <ChrisMorgan> Heather: you can PM rusti
[05:02:46] <Heather> ChrisMorgan good
[05:03:09] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[05:03:26] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:03:37] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[05:03:46] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[05:05:14] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[05:05:59] *** Parts: salamiwiglet (Mibbit@moz-4B2DE764.hsd1.wa.comcast.net) ()
[05:07:13] <MisterAbc> quick question, I want to read a file, push it into a
[05:07:17] *** Quits: MisterAbc (Mibbit@moz-E7EA667F.bootp.virginia.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[05:07:25] * ChrisMorgan will try installing LLVM/Clang 3.4 instead of 3.2
[05:07:34] <ChrisMorgan> Wow, that really *was* a quick question :P
[05:08:37] <Heather> ChrisMorgan yes...
[05:09:18] <Heather> ChrisMorgan you can build clang by using llvm sub-repository from rust
[05:09:51] *** Quits: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP) (Ping timeout)
[05:09:51] *** Quits: eddyb9 (eddy@A93A03C9.9065A63B.FCAAE698.IP) (Ping timeout)
[05:09:57] *** Quits: alan (alan@32702EE8.939109B2.FB082A98.IP) (Quit: alan)
[05:10:50] *** Quits: brendan (brendaneic@B0D36173.5F77D495.B41F1B80.IP) (Quit: brendan)
[05:11:30] <ChrisMorgan> Heather: that might work or it might not work. Hard to tell, really. The fact is that you need Clang to build Clang, and my Clang is broken. Or was before... 3.4 seems (initially at least) to be working.
[05:11:56] <Heather> ChrisMorgan you don't need clang to build clang
[05:12:45] * ChrisMorgan doesn't know, /me is just following https://gist.github.com/luqmana/40528aff62afcdb72680 and had it failing at the `REQUIRES_RTTI=1 make` step.
[05:13:07] <strcat> I don't think you want REQUIRES_RTTI
[05:13:13] <strcat> it just adds a bunch of useless bloat ;p
[05:13:24] * ChrisMorgan doesn't know, /me is just following Luqman's directions
[05:13:29] <Heather> ChrisMorgan I used to use clang getting started page )
[05:13:44] *** Quits: valenting (Thunderbir@8E5435E.7AF34920.FB866788.IP) (Ping timeout)
[05:14:05] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[05:15:27] *** Joins: brendan (brendaneic@B0D36173.5F77D495.B41F1B80.IP)
[05:20:13] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[05:20:23] *** Joins: DeTeam (DeTeam@3F8887A3.6883A39.F5F3AF2.IP)
[05:22:05] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[05:23:06] <Heather> strcat ChrisMorgan I wonder if it possible to make it possible to build clang with rust just by passing some optional flag to configure
[05:23:18] <Heather> strcat ChrisMorgan will it be useful?
[05:23:24] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[05:23:47] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[05:23:47] *** Quits: DeTeam (DeTeam@3F8887A3.6883A39.F5F3AF2.IP) (Ping timeout)
[05:23:54] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[05:24:01] <ChrisMorgan> Heather: I haven't any notion. I'm just getting what I need working working, not stopping to understand all the interconnections completely.
[05:29:30] *** Joins: eddyb9 (eddy@43ADE84.2484615.4A6B528C.IP)
[05:32:22] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[05:32:48] *** Joins: geoffhill (geoffhill@moz-2785B672.hsd1.wa.comcast.net)
[05:37:14] *** Joins: yghannam (yghannam@moz-C5BCCF4E.lightspeed.austtx.sbcglobal.net)
[05:37:55] *** Joins: DeTeam (DeTeam@3F8887A3.6883A39.F5F3AF2.IP)
[05:39:08] *** Quits: yghannam (yghannam@moz-C5BCCF4E.lightspeed.austtx.sbcglobal.net) (Ping timeout)
[05:41:19] *** Quits: geoffhill (geoffhill@moz-2785B672.hsd1.wa.comcast.net) (Quit: geoffhill)
[05:43:17] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[05:43:50] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[05:45:01] *** Joins: m_kato (m_kato@moz-C286AD9A.bitcat.net)
[05:50:13] *** Joins: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP)
[05:50:38] *** Quits: jstevans (Instantbir@moz-20668614.bootp.virginia.edu) (Ping timeout)
[05:52:11] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[05:55:18] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[05:55:18] *** ChanServ sets mode: +o tjc
[05:55:50] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[05:57:12] <cmr> Heather: as in build clang using rust's internal llvm?
[05:57:31] <cmr> we used to but it got cut out to make compiles shorter
[05:58:02] <Luqman> ChrisMorgan: what step is it failing at?
[05:58:12] <ChrisMorgan> Luqman: it's going again now.
[05:58:21] *** Joins: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com)
[05:58:37] <ChrisMorgan> It was an LLVM problem with Clang mostly broken. Upgrading from 3.2 to 3.4 fixed it.
[05:59:06] <Luqman> ah
[05:59:44] <Luqman> wait, does your clang support targeting arm?
[06:00:33] * ChrisMorgan hasn't any notion
[06:00:52] <ChrisMorgan> At present I'm up to building libsyntax.
[06:01:15] <Luqman> awesome
[06:01:37] <Luqman> ChrisMorgan: btw do you have an arm machine with enough ram to build rust?
[06:01:43] <ChrisMorgan> No.
[06:02:05] <zws3mb> Can anyone explain std::os::pipe? I don't understand what pipe.in c_int is/does can work with anything
[06:03:00] *** sam113101 is now known as sam113101_afk
[06:03:02] <Luqman> ChrisMorgan: that's unfortunate :( the only arm board i have access to right now has 128mb and using qemu user emulation doesn't seem to work
[06:03:19] <Heather> cmr why not optional? :S
[06:03:21] <Luqman> McPherrin: how much ram did your board have again?
[06:03:24] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[06:03:29] <strcat> zws3mb: it's a thin wrapper around posix pipes
[06:03:38] <strcat> file descriptors are c_int in POSIX
[06:03:39] <ChrisMorgan> Mine is an Asus Eee Pad Transformer TF101, which has 1GB of RAM. And not much more disk space :P
[06:03:45] <strcat> pipe/socket return a file descriptor
[06:04:04] <Luqman> ChrisMorgan: would you be willing to let it thrash swap for a night? :P
[06:04:14] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[06:04:18] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:04:28] <ChrisMorgan> Luqman: it's running Android. I'm almost certain it would never get anywhere near completion.
[06:04:39] <zws3mb> so maybe this is a dumb question, but does that mean that in/out are file locations for temp. input/output files created by proccesses?
[06:05:11] <Luqman> ChrisMorgan: ah, yea i haven't tried it with android yet
[06:05:15] * ChrisMorgan doesn't know anything about std::os::pipe
[06:05:36] <Luqman> but i do have a branch which theoretically should let you just build on vanilla arm/linux
[06:05:43] <strcat> zws3mb: they aren't actually "files" as in "things in some storage device"
[06:05:54] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[06:05:56] <strcat> but yes, stdin/stdout/stderr are file descriptors
[06:06:06] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[06:06:20] <ChrisMorgan> Luqman: I'm running Ubuntu inside Android, still using the Android kernel and init program.
[06:06:31] <zws3mb> can they be read with filereaders?
[06:07:28] *** Quits: GeneralMaximus (ankur@7655A519.E9DECC69.90B98F9.IP) (Ping timeout)
[06:07:40] <strcat> zws3mb: dunno
[06:07:59] <strcat> if you want to be using POSIX pipes you're on your own at this point, you'll need to just do it like in C
[06:08:10] <strcat> unless acrichto added bindings for them somewhere ;p
[06:08:43] <acrichto> PipeStream::open will open a file descriptor
[06:08:52] *** Quits: cubic (cubic@moz-80241A3A.mc.videotron.ca) (Quit: Leaving)
[06:09:00] <acrichto> http://static.rust-lang.org/doc/master/std/rt/io/pipe/struct.PipeStream.html
[06:09:04] <zws3mb> praise be to all of you, thank you so much.
[06:09:57] <acrichto> zws3mb: although os::pipe() may not stick around in its current form
[06:10:13] <acrichto> it will probably migrate eventually to returning ~Reader and ~Writer
[06:10:23] <acrichto> or just a PipeReader and PipeWriter
[06:10:56] <Heather> zws3mb you can use reader and writer ... I think
[06:11:12] <zws3mb> if it sticks around long enough for us to submit and demo this PS, it works for me =P
[06:12:17] <Heather> zws3mb there is Path.open_reader(io::Open) and Path.open_writer(io::Create) ... not sure if that is what you was needed
[06:12:28] *** Quits: m_kato (m_kato@moz-C286AD9A.bitcat.net) (Ping timeout)
[06:12:49] *** Joins: m_kato (m_kato@moz-C286AD9A.bitcat.net)
[06:13:40] *** Quits: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Quit: ozten)
[06:13:49] <zws3mb> Thanks, Heather
[06:14:38] <Heather> zws3mb note that both of them return Option
[06:14:57] *** Quits: m_kato (m_kato@moz-C286AD9A.bitcat.net) (Ping timeout)
[06:15:17] *** Joins: m_kato (m_kato@moz-C286AD9A.bitcat.net)
[06:15:17] <Heather> zws3mb and unwrapped thing could be converted just to io::Reader by using managed boxes
[06:15:30] <Heather> zws3mb please don't ask me what is managed boxes, I don't know
[06:15:31] *** Joins: mark_edward (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[06:16:30] <Heather> zws3mb but that's how I back to reader and writer I used before IO changes
[06:16:51] <ChrisMorgan> Luqman: very significant progress! "bin/rustc: /lib/arm-linux-gnueabi/libc.so.6: version `GLIBC_2.17` not found." :-)
[06:17:53] <earlzlap> So, I just submitted this. Seem like a good idea? https://github.com/mozilla/rust/issues/10170
[06:18:16] * ChrisMorgan is running Ubuntu 12.04 there, which only has glibc 2.15
[06:18:37] * ChrisMorgan wonders whether this is the time to attempt to upgrade it to 13.10
[06:19:05] <Luqman> ChrisMorgan: that error :( came across that one time too many 
[06:19:22] * eddyb9 tries to stays ahead of suse releases, upgrading during beta or rc1 :P
[06:19:25] <ChrisMorgan> Luqman: at least it is readily explicable.
[06:19:29] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[06:20:14] <ChrisMorgan> eddyb9: I stay ahead of Ubuntu releases nowadays on my laptop, but on my tablet where I'm running in a thoroughly unsupported environment it's a little trickier, so I haven't upgraded from precise yet.
[06:20:16] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[06:20:36] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[06:21:15] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[06:21:26] <Luqman> ChrisMorgan: haha well i've since avoided that by just moving my screen session to a more up to date machine
[06:22:03] *** Joins: GeneralMaximus (ankur@D40CCD53.CE00AA8A.D1005D78.IP)
[06:22:26] *** Joins: m_kato_ (m_kato@moz-C286AD9A.bitcat.net)
[06:22:37] *** Quits: m_kato (m_kato@moz-C286AD9A.bitcat.net) (Ping timeout)
[06:22:42] <ChrisMorgan> By my reckoning, I'd need to upgrade to at least raring to get glibc 2.17. Well, I'll copy my entire 2GB disk file and then try my hand at updating. That will *certainly* make it impossible to be finished today, for it is a slow beast. (Even copying a 2GB file will take just over 10 minutes minimum, its storage is that slow.)
[06:23:18] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[06:23:21] <eddyb9> try backing up 32GB from a N900
[06:23:27] <ChrisMorgan> No thanks.
[06:23:31] <eddyb9> 10m is nothing
[06:23:54] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[06:24:18] * ChrisMorgan calculated the write performance when he decided 1GB simply wasn't big enough and whacked another GB of zeroes onto the end of the loop disk
[06:25:12] <ChrisMorgan> Then I had to resize the partition. Should have been easier, but with the way I set up my terminal to auto-start deb it took a couple of reboots of the entire tablet before it would recognise it.
[06:26:13] * Heather wonders that linux users who hate windows the most are ubuntu users.
[06:26:29] *** Quits: GeneralMaximus (ankur@D40CCD53.CE00AA8A.D1005D78.IP) (Ping timeout)
[06:27:55] <zws3mb> arichto: Is PipeStream in 0.8?
[06:28:18] <ChrisMorgan> zws3mb: http://static.rust-lang.org/doc/0.8/std/rt/io/pipe/struct.PipeStream.html
[06:28:30] <eddyb9> Heather: I hate both windows and ubuntu
[06:28:56] <acrichto> zws3mb: the open function was not in 0.8
[06:29:35] <zws3mb> yea, sorry--realized I should be using 0.8 docs and not master. Thanks ChrisMorgan, acrichto
[06:30:56] *** Quits: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com) (Ping timeout)
[06:31:14] *** sam113101_afk is now known as sam113101
[06:31:39] <ChrisMorgan> Heather: I don't hate Windows; it's a decent operating system for most people; but for myself, I'm far happier in Ubuntu, and I think that barring the problem of software that isn't available for Linux, most would find Ubuntu better than Windows.
[06:31:55] <ChrisMorgan> eddyb9: why do you hate Ubuntu?
[06:32:37] *** jorendorff is now known as jorendorff_away
[06:32:58] *** Joins: GeneralMaximus (ankur@4B944C20.37FEB6A9.D8537A8F.IP)
[06:33:32] *** Joins: valenting (Thunderbir@8E5435E.7AF34920.FB866788.IP)
[06:34:00] <strcat> ChrisMorgan: canonical spreads more FUD about open-source and gives less back than microsoft ;\
[06:34:59] *** Quits: GeneralMaximus (ankur@4B944C20.37FEB6A9.D8537A8F.IP) (Connection reset by peer)
[06:35:26] <eddyb9> strcat: I forgive you for the allocator nonsense :D
[06:35:40] <ChrisMorgan> I don't see it that way myself.
[06:36:00] <strcat> microsoft has even contributed more to the linux kernel than them
[06:36:17] <ChrisMorgan> Yes, Canonical do like to have control of many things. That's a lot of the reason why they're successful.
[06:36:25] <strcat> they aren't successful
[06:36:45] <eddyb9> the reason microsoft are "successful" is viral marketing, back before it had a name
[06:36:54] * Sharp hates Windows because he spent two years as devops in a Windows environment.
[06:37:25] <ChrisMorgan> Developing on Windows is certainly painful. Developing on Mac OS X is hardly better from what I've seen...
[06:37:35] <Sharp> Whether it has merits as a desktop system or not, running a server on it is a crazy idea.
[06:37:45] <strcat> ChrisMorgan: I'm not sure how spreading lies about wayland/systemd and forking projects without making any attempts to work with upstream is about control
[06:37:51] <Sharp> OS X itself is pretty bad but nobody tries to run giant server farms off OS X :P
[06:37:51] <eddyb9> they are two evils. and linux isn't the answer to everything so canonical doesn't even have that going for it
[06:37:59] <Sharp> Or almost no one.
[06:38:04] <strcat> and their CLA agreement + GPLv3 is about being able to sell their software as proprietary software to vendors
[06:38:56] * Sharp wishes Solaris was still a thing :(
[06:40:23] <strcat> ChrisMorgan: just read mark's blog http://www.markshuttleworth.com/archives/1295
[06:41:42] <strcat> his transparent lies/FUD do a better job than I can at making him look bad ;p
[06:41:56] *** Quits: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net) (Quit: gavinb)
[06:42:28] <strcat> he dares to talk about "NIH" after lying about planning to use wayland when they were developing their own in-house solution all along
[06:42:31] * strcat shrugs
[06:43:23] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[06:43:37] <strcat> and there was the music application they edited to send referral money to them instead of gnome + they send user data to amazon for money
[06:44:16] <strcat> the only good thing I can say about canonical is they're not apple ;p
[06:44:21] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[06:44:35] *** Joins: GeneralMaximus (ankur@81D1CC12.C6B718B2.EBA8E3F.IP)
[06:44:59] <Heather> again holywar
[06:45:55] <strcat> not a 'holy war', I don't mind ubuntu, but the company developing hurts the linux community more than they help it
[06:48:34] <Heather> strcat well and your point of view is point for holy war for some other people :D
[06:48:36] *** Joins: pyrac (pyrac@moz-CB14E320.w92-162.abo.wanadoo.fr)
[06:48:46] <strcat> sure, for paid employees of canonical
[06:48:47] <Ralith> it's not a point of view, it's fact
[06:49:02] <Ralith> they're doing damage
[06:50:01] <Heather> Ralith strcat well... I hate ubuntu with other reasons and don't think that they really do much damage but your words is still being provocation of holy war :D
[06:51:22] <strcat> spending a year lying about planning to use wayland while developing their own in-house version + spreading lies/FUD about it does damage
[06:51:22] <Heather> Ralith there are no facts in the objective view, it's all subjective...
[06:51:31] <strcat> moving from xorg -> wayland has been severely set back
[06:52:02] <strcat> stealing royalties from gnome does damage
[06:53:07] <Heather> strcat to be honest I see nothing interesting in wayland. I doubt they can do something like mesa or emulate mesa or ... it will be anyways weird I think and I don't care about wayland until I will see they make something usable.
[06:53:35] <strcat> Heather: I'm not sure what you mean
[06:53:54] <strcat> wayland uses evdev/mesa/dri2
[06:54:19] <strcat> it can run X11 applications faster than Xorg
[06:54:45] <strcat> because X11 applications only do zero-copy rendering when they're fullscreen, and since it runs them rootless it counts as that
[06:55:19] <strcat> it's the same stack Xorg runs on, without the millions of lines of code
[06:55:34] <Heather> strcat maybe I need to checkout more about wayland :S
[06:56:52] <Ralith> that would be a prudent thing to do before decrying it, yes
[06:57:38] <bjz> how can you force a rebuild of libuv?
[06:57:42] <strcat> and everyone was on-board with it... kde/gnome/enlightenment have wayland compositors, intel and red hat have put a lot of effort into it
[06:58:01] <Heather> strcat is mesa a kind of libwayland-EGL fork ? :S
[06:58:01] <bjz> is it possible?
[06:58:03] <strcat> but now the waters are muddied thanks to mir, and a move to it is not going to go as fast, since now there are 2 protocols
[06:58:50] <strcat> Heather: mesa implements opengl/drivers, wayland uses the plain old vanilla mesa
[06:58:59] *** sam113101 is now known as sam113101_afk
[06:59:26] <Heather> strcat what means plain old vanilla mesa? how is it different to mesa I use?
[06:59:32] <strcat> it's not different
[06:59:57] <bjz> I get: "clang: error: no such file or directory: 'x86_64-apple-darwin/rt/libuv/libuv.a'"
[07:00:25] <strcat> wayland doesn't require a single patch/fork to anything... it's developed by the same people who develop Xorg/mesa/dri
[07:00:26] <bjz> the build was interrupted because I had to agree to the eula for xcodebuild
[07:00:35] * bjz doesn't want to recompile llvm
[07:00:38] <strcat> (mostly intel and red hat employees)
[07:00:42] *** Quits: canhtak (canhtak@moz-1BED280F.wl.t.ulaval.ca) (Quit: canhtak)
[07:01:04] <Heather> strcat but mesa is developing for xorg.... isn't it?
[07:01:08] <strcat> no
[07:01:19] <Heather> strcat then for what?
[07:01:29] *** Quits: hjr3 (hradtke@moz-9AC18790.public.wayport.net) (Ping timeout)
[07:02:15] <strcat> it's portable
[07:02:47] <bjz> is there any docs for the build process?
[07:03:04] <strcat> Heather: it's just a common infrastructure/implementation of video drivers
[07:03:13] <bjz> I tried make clean too
[07:03:17] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[07:03:42] <Heather> strcat but on their page here http://www.mesa3d.org/intro.html I can see they say about xorg but nothing about wayland
[07:03:46] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[07:04:22] <strcat> it runs on windows too..
[07:04:42] <strcat> Heather: they're saying where it's most commonly used
[07:04:43] <bjz> ok, also tried re-running ./configure
[07:05:12] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:05:24] <Sharp> Do we have any unit tests in the trans?
[07:05:36] <bjz> dbaupp: any ideas? can you force a rebuild of libuv?
[07:05:44] <Sharp> Just curious.
[07:05:54] <bjz> the build state is confused
[07:06:26] <dbaupp> bjz: ... no idea... maybe `make clean-libuv`
[07:06:29] * dbaupp is guessing
[07:07:02] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[07:07:07] <bjz> heh: "make: *** No rule to make target `clean-libuv'.  Stop."
[07:07:28] *** Quits: bobthenameless (bobthename@moz-1C30D660.hsd1.wa.comcast.net) (Ping timeout)
[07:07:49] * bjz gives up
[07:07:50] <Heather> strcat so I used to think that wayland is using some weird way to communicate with xorg and with mesa... but if I really wrong there then what is current blockers for wayland?
[07:08:19] <Sharp> Whee, looks like I broke stage 1 :P
[07:08:41] <bjz> Sharp: always fun! :D
[07:08:49] <strcat> gnome/kde need to finish their wayland compositors and gtk3/qt5 support needs to be fully completed (they do run in it, but 100% of stuff doesn't work yet)
[07:09:03] <strcat> wayland itself is already solid
[07:09:16] *** Joins: bobthenameless (bobthename@moz-1C30D660.hsd1.wa.comcast.net)
[07:09:21] *** Quits: pyrac (pyrac@moz-CB14E320.w92-162.abo.wanadoo.fr) (Quit: pyrac)
[07:09:44] <strcat> I can start it up now and use gtk3/qt5 applications including a webkit-based browser... 
[07:09:46] *** Quits: valenting (Thunderbir@8E5435E.7AF34920.FB866788.IP) (Ping timeout)
[07:10:00] <Heather> strcat well gnome 3.10.1 which I'm using currently should runs fine with wayland I think
[07:10:29] <mark_edward> how do you get literal braces with the new format! ?
[07:10:30] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Ping timeout)
[07:11:06] *** Quits: zws3mb (Mibbit@FFC5F268.4F63199.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:11:08] <ChrisMorgan> mark_edward: backslash
[07:11:26] <mark_edward> ChrisMorgan: ok cool. used to be double brackets. Thanks!
[07:11:44] *** sam113101_afk is now known as sam113101
[07:11:57] <ChrisMorgan> rusti: format!("format!(\"\\{\\}\", {:?})", 42)
[07:11:58] *** Joins: hjr3 (hradtke@moz-BBC925AA.ph.ph.cox.net)
[07:11:58] -rusti- ~"format!(\"{}\", 42)"
[07:13:00] <ChrisMorgan> The fact that you need to double the backslash in non-raw strings is a little unfortunate.
[07:13:13] <mark_edward> ChrisMorgan: does fail! use the new format?
[07:13:17] <ChrisMorgan> Yes.
[07:13:21] <ChrisMorgan> Old fmt is entirely gone.
[07:13:28] <strcat> as is the old io now
[07:13:31] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[07:13:33] <ChrisMorgan> Yes. Yay!
[07:15:30] <mark_edward> when did this happen? im using rust-nightly on ubuntu and this line is giving me errors:
[07:15:32] <eddyb9> lol, class started, and I didn't get to send "KF5/wayland is my future"
[07:15:32] <mark_edward> Err(msg) => fail!("\{ url: {0}, err: {1} \}","http://www.reddit.com", msg),
[07:15:41] *** Parts: Heather (Heather@19663F6.F53BAACC.9C17E900.IP) ()
[07:16:16] <eddyb9> strcat: they are considering a X11-less KF5 :D
[07:16:59] <eddyb9> strcat: for osdev, this means less requirements for linux compat :P
[07:17:08] *** Joins: Ms2ger (Ms2ger@moz-E10D6F22.ugent.be)
[07:18:54] *** Quits: hjr3 (hradtke@moz-BBC925AA.ph.ph.cox.net) (Ping timeout)
[07:19:27] <mark_edward> ChrisMorgan: any advice? error is "unknown escape \{"
[07:19:35] <ChrisMorgan> Double the backslash.
[07:19:44] <mark_edward> oh
[07:19:59] <ChrisMorgan> rusti: "\\{" == r"\{"
[07:20:01] -rusti- true
[07:20:16] *** sam113101 is now known as sam113101_afk
[07:22:19] *** Joins: hjr3 (hradtke@moz-9AC18790.public.wayport.net)
[07:22:46] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[07:23:01] *** sam113101_afk is now known as sam113101
[07:23:25] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[07:23:55] <mark_edward> ChrisMorgan: what am i doing wrong here with rust-http? gist: https://gist.github.com/MarkJr94/7228355
[07:24:16] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[07:24:38] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[07:25:18] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[07:25:34] *** Quits: m_kato_ (m_kato@moz-C286AD9A.bitcat.net) (Ping timeout)
[07:25:35] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[07:25:54] *** Joins: m_kato (m_kato@moz-C286AD9A.bitcat.net)
[07:25:59] <ChrisMorgan> mark_edward: try adding a slash to http://www.reddit.com
[07:26:00] *** Joins: pyrac (pyrac@moz-CB14E320.w92-162.abo.wanadoo.fr)
[07:26:06] *** Quits: pyrac (pyrac@moz-CB14E320.w92-162.abo.wanadoo.fr) (Quit: pyrac)
[07:26:32] *** Quits: hjr3 (hradtke@moz-9AC18790.public.wayport.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[07:26:58] <mark_edward> ChrisMorgan: thanks, that did it
[07:27:42] <ChrisMorgan> Good, that was my first guess. That means that it was sending a request line like `GET  HTTP/1.1` rather than `GET / HTTP/1.1`.
[07:27:59] <ChrisMorgan> Sounds like Url needs fixing to correct that case, because an empty path isn't valid.
[07:30:18] <Sharp> The compiler error I'm getting is "task '<unnamed>' failed at 'borrowed'"
[07:30:24] <Sharp> It's new code so I can't link it, but the line is if (llsize_of_alloc(bcx.ccx(), type_of::sizing_type_of(bcx.ccx(), unit_ty)) == 0) {
[07:30:38] <Sharp> In iter_vec_raw
[07:30:58] <Sharp> Anyone have any ideas?
[07:32:10] <dbaupp> yum, @mut failures.
[07:32:38] <Sharp> Oh :(  Why would that be happening?  Overoptimistic dereferencing?
[07:33:03] <strcat> Sharp: do let ccx = bcx.ccx()
[07:33:12] <strcat> above there
[07:33:17] <strcat> well
[07:33:24] <strcat> maybe they both take &mut CrateContext
[07:33:35] <strcat> anyway just put those on separate lines ;p
[07:33:42] <strcat> as in
[07:33:59] <Sharp> They don't actually… when I tried that, it complained that one was mut and one immut
[07:34:01] <Sharp> Yeah
[07:34:04] <Sharp> Separate lines :P
[07:34:12] <strcat> Sharp: well I mean take the type_of outside of the llsize_of_alloc part
[07:34:21] <strcat> and use a temporary
[07:34:24] <Sharp> Yeah
[07:34:26] <Sharp> That was what I was about to try
[07:34:41] <Sharp> It's kind of silly that that matters considering it's a lexical scoping issue
[07:34:53] <Sharp> Well, I guess in this case it's not silly.
[07:34:58] * Sharp is still thinking about lifetimes.
[07:36:24] *** Joins: vertexclique (vertexcliq@88443504.DE7F3465.1826D296.IP)
[07:37:48] *** Joins: Jackneill (Jackneill@moz-79F8902B.pool.digikabel.hu)
[07:37:51] <mark_edward> ChrisMorgan: what does rust-http do with cookies?
[07:38:27] <ChrisMorgan> mark_edward: nothing, they're there in the headers in raw form at present.
[07:38:38] <mark_edward> ok, thansk!!!!
[07:38:46] <ChrisMorgan> If you wanted to implement parsing for the headers, that'd be good
[07:38:52] <Sharp> Actually, thinking more about it, it is kind of strange unless Rust explicitly says that subexpressions are subject to reordering in such cases.
[07:40:10] *** Joins: avsej (avsej@DF1824D5.EFF97412.48F984E6.IP)
[07:40:42] *** Joins: oberstet (quassel@moz-9A2AC71A.dynamic.mnet-online.de)
[07:40:53] <mark_edward> how do raw strings and format! interact?
[07:41:17] <ChrisMorgan> Raw strings are string literals just the same.
[07:43:17] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[07:43:31] *** Quits: GeneralMaximus (ankur@81D1CC12.C6B718B2.EBA8E3F.IP) (Ping timeout)
[07:43:51] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[07:44:00] *** flaper87|afk is now known as flaper87
[07:44:30] *** Joins: Ferreus (ferreus@moz-5798C698.dip0.t-ipconnect.de)
[07:45:38] <Sharp> I think that fixed it, thanks :)
[07:45:53] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[07:47:14] <Sharp> Heh
[07:47:42] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[07:47:45] <Sharp> GetElementPtrInst may not work for 0 size types
[07:48:17] <Sharp> I imagine that error wasn't showing up because we would just give it a pretend sized type in those situations before
[07:48:47] <strcat> Sharp: yeah we would do the GEP on i8
[07:49:25] <Sharp> Oh well… this just means I have to do the size check in my new loop function too.
[07:49:52] <Sharp> (Or we could just replace them both with indexed loops, but I assume there's a reason you did it this way).
[07:50:22] <Sharp> ("Them both" = the regular and 0-size behavior).
[07:52:07] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[07:52:22] *** Joins: pnkfelix (pnkfelix@DA4ABEAF.1DE10CA8.D8E68FF6.IP)
[07:52:23] *** ChanServ sets mode: +o pnkfelix
[07:52:26] *** Quits: pnkfelix (pnkfelix@DA4ABEAF.1DE10CA8.D8E68FF6.IP) (Client exited)
[07:58:34] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: zzzzzzzzzz)
[07:59:36] *** Joins: z0w0 (zack@moz-238C2341.lnse3.cha.bigpond.net.au)
[08:00:41] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[08:03:00] <Sharp> rusti: "a" "b"
[08:03:04] -rusti- pastebinned 6 lines of output: http://sprunge.us/WTAa
[08:03:14] <Sharp> So that doesn't work :(
[08:03:24] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[08:03:45] <Sharp> Does string concatenation of static strings get resolved at compile time?
[08:03:57] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[08:04:12] <kimundi> Don't think so
[08:04:34] <Sharp> What's the recommended way for me to get one string on two lines, then?  make check is complaining about the 100 character limit.
[08:04:50] <kimundi> just make a linebreak in it
[08:05:06] <Sharp> Oh.  That was what I thought I was testing with rusti but I guess not all whitespace is considered the same.
[08:05:32] <strcat> Sharp: as in don't close the quote
[08:05:42] <Sharp> Doesn't that affect the output?
[08:05:43] <strcat> open on one line, close on a later line
[08:05:57] <kimundi> "foo \n bar", except with the \n being a real linebreak
[08:06:00] <strcat> Sharp: it is smart enough to not include the indent if you use \
[08:06:06] <strcat> here
[08:06:08] <strcat> sec
[08:06:14] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[08:06:20] <Sharp> Ah, okay, cool :)  Hard to test with rusti.
[08:06:22] <kimundi> "foo \\n bar", will result in "foo bar"
[08:06:40] <kimundi> again, \n being a real one
[08:07:10] <Sharp> Okay, cool.  Does that apply to anything but strings?  IIRC it works for everything that has to appear on one line in C.
[08:07:18] <Sharp> Or is it just an escape character?
[08:07:28] <kimundi> its just an escape character
[08:07:36] <Sharp> Ah, gotcha.  Thanks.
[08:07:55] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[08:08:09] <kimundi> rust code is not white space sensitive, so we don't need a line continuation token
[08:09:18] <dbaupp> (except for in strings.)
[08:12:29] <Sharp> I appreciate that Rust tries to suggest an identifier if I typo'd, but I think its algorithm could use some work :)  If I write 'sefl' the odds are that I mean 'self' rather than 'ctx'.
[08:13:08] <kimundi> ha!, you wheren't there before we put a limit on it :)
[08:13:18] <Sharp> Oh?
[08:13:29] <ChrisMorgan> Sharp: unknown variable "foo", did you mean "whoa_the_levenshtein_distance_is_unbounded"?
[08:13:39] <Sharp> What's the limit?  Lexically close?  Same type and in scope?
[08:13:40] <Sharp> Oh, hah
[08:13:43] <Sharp> Awesome.
[08:13:52] <kimundi> It used to just _Always_ print out the closes match... not matter how far removed from reality it actually got
[08:14:01] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[08:14:05] <strcat> Sharp: I think it doesn't realize self/globals exist
[08:14:18] <dbaupp> the limit is 5
[08:14:33] <Sharp> In this case, the lines immediately above it all used self, so it must be quite restricted.
[08:14:37] <Sharp> Ah, that makes more sense :)
[08:14:39] <dbaupp> but straight levenstein based on variables declared with `let` (and possibly `match`)
[08:15:20] <Sharp> Is there an issue for adding self to the list of tokens it knows about?
[08:15:24] <Sharp> And/or globals?
[08:15:29] <Sharp> I'm guessing yes.
[08:15:49] * strcat is guessing no but who knows
[08:15:59] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:19:33] <Sharp> BTW, strcat, what should the test for this be?  Just a file that calls a destructor on a zero length array, or do we also want to do something else (like verify that the pointer the destructor receives is the same every time it's called?)
[08:20:05] <strcat> Sharp: just make sure it's called 3 times
[08:20:17] <strcat> if it's 3 long
[08:20:18] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[08:20:25] <Sharp> Sure.
[08:22:08] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[08:22:48] *** Joins: pyrac (pyrac@151566EE.73C89388.AD05C589.IP)
[08:23:06] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[08:23:21] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[08:24:05] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[08:24:51] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[08:25:28] *** flaper87 is now known as flaper87|afk
[08:28:22] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[08:28:52] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[08:32:08] *** Quits: bodie (bodie@moz-10569756.cmdnnj.fios.verizon.net) (Ping timeout)
[08:33:17] *** flaper87|afk is now known as flaper87
[08:33:44] *** Quits: pnathan (Adium@moz-EF4F82C8.tukw.qwest.net) (Quit: Leaving.)
[08:34:35] <eddyb9> http://pdos.csail.mit.edu/~xi/papers/stack-sosp13.pdf
[08:34:43] <eddyb9> this might be interesting
[08:35:44] *** Quits: bobthenameless (bobthename@moz-1C30D660.hsd1.wa.comcast.net) (Ping timeout)
[08:37:21] <eddyb9> can we even have optimization-unstable code in Rust?
[08:38:22] <Ms2ger> Undefined behaviour? I hope not
[08:38:34] *** Quits: tikue_ (tikue_star@9746E5A.EB08480C.689607DE.IP) (Ping timeout)
[08:38:43] <strcat> eddyb9: in safe rust code, there isn't undefined behaviour
[08:38:50] <dbaupp> we inherit some undefined behaviour from LLVM
[08:38:57] <strcat> assuming no compiler bugs or bugs in unsafe blocks
[08:39:04] <strcat> unsafe blocks obviously do have undefined behaviour
[08:39:27] <dbaupp> is -128i8 / -1i8 checked yet?
[08:39:32] <strcat> no
[08:39:42] *** Joins: bodie (bodie@moz-10569756.cmdnnj.fios.verizon.net)
[08:39:43] <strcat> only loosely undefined anyway
[08:39:43] <Ms2ger> Also, who ever thought "hey, this looks like an overflow check, I'll remove it" was a good idea?
[08:39:49] <strcat> Ms2ger: no one
[08:39:53] <strcat> not how compilers think
[08:40:32] <strcat> it will remove code that is a no-op, like a branch that's always true
[08:40:43] <strcat> and it works within the defined model
[08:41:12] <strcat> if you dereference a pointer, it's non-dull and non-dangling
[08:41:16] <strcat> non-null
[08:42:02] <strcat> LLVM has integers, and operators on them like add
[08:42:14] <strcat> you can opt-in to undefined behaviour on overflow (nuw for unsigned, nsw for signed)
[08:42:26] <strcat> clang outputs nsw for signed integer operations, since C makes it undef
[08:42:40] *** kimundi is now known as zz_kimundi
[08:42:40] <strcat> you can pass -fwrapv to turn that off but it's non-portable
[08:42:59] * strcat shrugs
[08:43:08] <strcat> it does have to work from some model, and the C standard is a good one to use...
[08:43:12] <strcat> if you're compiling C
[08:43:15] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[08:43:46] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[08:43:47] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Client exited)
[08:44:05] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[08:48:25] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Connection reset by peer)
[08:51:20] *** Joins: bobthenameless (bobthename@moz-1C30D660.hsd1.wa.comcast.net)
[08:51:55] *** Joins: GeneralMaximus (ankur@81D1CC12.C6B718B2.EBA8E3F.IP)
[08:53:42] *** Quits: erickt (etryzelaar@BF60BF52.64BC77A3.7FC6A66E.IP) (Ping timeout)
[09:00:02] *** Quits: oberstet (quassel@moz-9A2AC71A.dynamic.mnet-online.de) (Client exited)
[09:03:21] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[09:03:27] *** Quits: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[09:03:51] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[09:07:12] *** Joins: tikue_ (tikue_star@9746E5A.EB08480C.689607DE.IP)
[09:08:10] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[09:08:40] *** Quits: vertexclique (vertexcliq@88443504.DE7F3465.1826D296.IP) (Client exited)
[09:09:01] *** Joins: vertexclique (vertexcliq@88443504.DE7F3465.1826D296.IP)
[09:09:17] *** Quits: tikue_ (tikue_star@9746E5A.EB08480C.689607DE.IP) (Ping timeout)
[09:09:48] *** Joins: erickt (etryzelaar@BF60BF52.64BC77A3.7FC6A66E.IP)
[09:10:11] *** Quits: bobthenameless (bobthename@moz-1C30D660.hsd1.wa.comcast.net) (Ping timeout)
[09:10:51] *** Quits: vertexclique (vertexcliq@88443504.DE7F3465.1826D296.IP) (Ping timeout)
[09:12:11] *** Quits: erickt (etryzelaar@BF60BF52.64BC77A3.7FC6A66E.IP) (Ping timeout)
[09:12:26] *** Joins: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au)
[09:12:33] *** Joins: gov (Mibbit@DB043839.B18C48BA.248E7B84.IP)
[09:12:39] <gov> hello :)
[09:12:44] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[09:14:06] *** Quits: ofeldt- (ofeldt@moz-3D21AC81.dip0.t-ipconnect.de) (Ping timeout)
[09:14:10] *** Joins: bobthenameless (bobthename@moz-1C30D660.hsd1.wa.comcast.net)
[09:14:22] <gov> is there a mysql lib for rust ?
[09:16:30] <gov> is there a mysql lib for rust ?
[09:17:02] * Sharp doesn't think so but doesn't know for sure.
[09:17:14] <Sharp> I think it should be easy to create bindings though.
[09:17:25] <gov> i looked for in google, don"t find anything
[09:17:32] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[09:17:36] <Sharp> http://stackoverflow.com/questions/9450224/i-want-to-call-c-library-mysql-h-from-rust-language ?
[09:18:06] <dbaupp> (that's from 1.5+ years ago, so its likely not relevant...)
[09:18:07] <gov> i saw this but it's not a native lib .rs
[09:18:20] *** Joins: tikue_ (tikue_star@9746E5A.EB08480C.689607DE.IP)
[09:18:39] <Sharp> (I don't know… has C struct binding changed dramatically in that timespan?)
[09:18:40] <gov> i fount postgres but not mysql, strange ^^
[09:19:39] <Sharp> Not so strange, the userbase is pretty small so I suspect it's heavily dependent on what people need at the moment, rather than overall popularity.
[09:19:55] <gov> think so :/
[09:21:14] *** Quits: tikue_ (tikue_star@9746E5A.EB08480C.689607DE.IP) (Client exited)
[09:23:26] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[09:23:30] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[09:23:42] <eddyb9> hmmm
[09:24:11] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[09:24:32] <eddyb9> it would be cool if str was defined as <E=u8> [E]
[09:25:16] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[09:25:30] *** Joins: ofeldt (ofeldt@moz-4856A3D0.dip0.t-ipconnect.de)
[09:25:44] <pcmattman> isn't str in terms of char, which is 4 bytes?
[09:25:48] *** Joins: sweet_kid (Upasana@F685FB81.839A33D6.388CF16F.IP)
[09:25:52] <eddyb9> so str<char> would be a memory-expensive unicode (32bit) string, but potentially useful for some cases
[09:25:59] <eddyb9> pcmattman: no, str is utf8
[09:27:02] <eddyb9> .len() is the number of bytes, O(1), .char_len() is the number of characters, O(N)
[09:27:04] *** Quits: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au) (Quit: gavinb)
[09:27:19] *** Joins: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au)
[09:29:12] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[09:29:31] <gov> have a good day guys ^^
[09:29:32] <gov> +
[09:29:35] *** Quits: gov (Mibbit@DB043839.B18C48BA.248E7B84.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:30:15] *** Joins: nkoep (nik@moz-C2DD8EC3.pool.mediaways.net)
[09:31:44] <eddyb9> more govs should quit
[09:32:43] *** zz_kimundi is now known as kimundi
[09:33:16] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[09:33:25] *** Quits: eddyb9 (eddy@43ADE84.2484615.4A6B528C.IP) (Ping timeout)
[09:36:01] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[09:39:29] <pnkfelix>  
[09:40:35] *** Quits: m_kato (m_kato@moz-C286AD9A.bitcat.net) (Ping timeout)
[09:42:35] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[09:43:09] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[09:43:41] *** Joins: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net)
[09:44:01] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[09:44:11] *** Quits: ofeldt (ofeldt@moz-4856A3D0.dip0.t-ipconnect.de) (Ping timeout)
[09:44:29] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[09:45:51] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[09:52:23] *** Joins: ofeldt (ofeldt@moz-E11B987D.dip0.t-ipconnect.de)
[09:53:07] *** Quits: GeneralMaximus (ankur@81D1CC12.C6B718B2.EBA8E3F.IP) (Quit: Computer has gone to sleep.)
[09:54:11] *** Joins: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP)
[10:01:18] *** Joins: FreeFull (freefull@18BF88A.8F3F3853.EFA10D3.IP)
[10:02:37] *** Joins: CyBeRKeL (cyber@E6A1FD6F.BE88DC8C.9C1C15C3.IP)
[10:03:21] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[10:03:53] *** Joins: erickt (etryzelaar@BF60BF52.64BC77A3.7FC6A66E.IP)
[10:04:06] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[10:06:15] *** Quits: erickt (etryzelaar@BF60BF52.64BC77A3.7FC6A66E.IP) (Ping timeout)
[10:07:51] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[10:08:00] *** Quits: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au) (Quit: gavinb)
[10:09:37] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[10:10:42] *** Joins: GeneralMaximus (ankur@BA07138C.9925E880.493B1C0B.IP)
[10:11:49] *** Quits: bjz (textual@B398BE78.F804C29E.D35A31DF.IP) (Quit: Textual IRC Client: www.textualapp.com)
[10:12:02] *** Joins: bjz (textual@B398BE78.F804C29E.D35A31DF.IP)
[10:12:48] *** Quits: sweet_kid (Upasana@F685FB81.839A33D6.388CF16F.IP) (Quit: Leaving)
[10:12:54] *** Joins: sweet_kid (Upasana@F685FB81.839A33D6.388CF16F.IP)
[10:13:42] *** Quits: sweet_kid (Upasana@F685FB81.839A33D6.388CF16F.IP) (Quit: Leaving)
[10:13:47] *** Joins: sweet_kid (Upasana@F685FB81.839A33D6.388CF16F.IP)
[10:14:20] *** Quits: pyrac (pyrac@151566EE.73C89388.AD05C589.IP) (Quit: pyrac)
[10:18:13] *** Quits: sweet_kid (Upasana@F685FB81.839A33D6.388CF16F.IP) (Quit: Leaving)
[10:18:21] *** Joins: sweet_kid (Upasana@F685FB81.839A33D6.388CF16F.IP)
[10:21:38] *** Joins: skade (skade@30BBD5E6.505237C9.CAE22B62.IP)
[10:22:19] *** Joins: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au)
[10:22:31] *** Joins: aeqwa (aeqwa@moz-634131FA.dsl.tropolys.de)
[10:23:19] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[10:23:45] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[10:23:53] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[10:24:48] <aeqwa> any suggestions for my tokenizer function which seperater a math expr e.g. (3+3)*3 into tokens? thats a project just for fun. http://pastebin.com/J7AGnuKu
[10:25:31] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[10:26:36] *** Joins: steffenomak (steffenoma@moz-FB0A4BEB.student.uu.se)
[10:30:56] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[10:34:48] *** kimundi is now known as zz_kimundi
[10:35:51] *** Joins: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP)
[10:41:33] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[10:43:14] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Ping timeout)
[10:46:15] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[10:48:52] *** Joins: vertexclique (vertexcliq@88443504.DE7F3465.1826D296.IP)
[10:49:33] *** Quits: brendan (brendaneic@B0D36173.5F77D495.B41F1B80.IP) (Quit: brendan)
[10:53:27] <Sharp> rusti: [1,2].slice(0)
[10:53:29] -rusti- pastebinned 7 lines of output: http://sprunge.us/JPAh
[10:53:52] <Sharp> rusti: [1,2].slice(0,0)
[10:53:53] -rusti- pastebinned 17 lines of output: http://sprunge.us/cMTF
[10:54:12] <Sharp> rusti: let x = ~[1,2]; x.slice(0,0)
[10:54:13] -rusti- pastebinned 18 lines of output: http://sprunge.us/Jjab
[10:54:59] <Sharp> rusti: let x = [1,2]; let y = x.slice(0,0); y
[10:55:00] -rusti- pastebinned 18 lines of output: http://sprunge.us/iMab
[10:55:41] <Sharp> rusti: let x = [1,2]; let y = x.slice(0,0); y.clone()
[10:55:42] -rusti- pastebinned 18 lines of output: http://sprunge.us/OWBf
[10:56:42] <Sharp> rusti: [1,2]}.slice(0,0)
[10:56:43] -rusti- pastebinned 6 lines of output: http://sprunge.us/REMS
[10:57:45] <Sharp> rusti: [1,2]}; let _ = { ()
[10:57:46] -rusti- [1, 2]
[10:57:57] *** Joins: erickt (etryzelaar@BF60BF52.64BC77A3.7FC6A66E.IP)
[10:59:05] <Sharp> rusti: [1,2]}; let s = r.slice(0,0); print(s); let _ = { ()
[10:59:07] -rusti- pastebinned 7 lines of output: http://sprunge.us/QTeH
[10:59:29] <Sharp> rusti: [1,2]}; let s = r.slice(0,0); println!("{}", s); let _ = { ()
[10:59:30] -rusti- pastebinned 10 lines of output: http://sprunge.us/dHjd
[10:59:50] <Sharp> rusti: [1,2]}; let s = r.slice(0,0); println!("{?:}", s); let _ = { ()
[10:59:51] -rusti- pastebinned 7 lines of output: http://sprunge.us/Rhcj
[11:00:09] <Sharp> rusti: [1,2]}; let s = r.slice(0,0); println!("{:?}", s); let _ = { ()
[11:00:10] -rusti- &[]
[11:00:10] -rusti- [1, 2]
[11:00:20] *** Quits: erickt (etryzelaar@BF60BF52.64BC77A3.7FC6A66E.IP) (Ping timeout)
[11:01:03] <Sharp> rusti: "1+2-3*4"}; let s = r.slice(0,0); println!("{:?}", s); let _ = { ()
[11:01:04] -rusti- ""
[11:01:04] -rusti- "1+2-3*4"
[11:02:09] <Sharp> rusti: "1+2-3*4"}; let s = r.slice(0,1); println!("{:?}", s); let _ = { ()
[11:02:10] -rusti- "1"
[11:02:10] -rusti- "1+2-3*4"
[11:02:45] <dbaupp> Sharp: you can private message rusti
[11:02:57] <Sharp> Yeah, sorry… didn't mean for that to go on that long :P
[11:03:18] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[11:03:26] <dbaupp> aeqwa: using a string iterator
[11:03:52] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[11:04:27] <dbaupp> aeqwa: also, a character isn't necessarily 1 byte, so feeding it say "öäå" will make it crash (with a fail!())
[11:04:29] *** Quits: GeneralMaximus (ankur@BA07138C.9925E880.493B1C0B.IP) (Ping timeout)
[11:05:07] <aeqwa> dbaupp: that way i already try it but i think thats the way to go
[11:05:43] <dbaupp> aeqwa: using char_range_at ( http://static.rust-lang.org/doc/master/std/str/trait.StrSlice.html#tymethod.char_range_at ) and setting n to the `next` field would fix the unicode failure (although using the iterator is the nicer/more correct way)
[11:05:56] *** Joins: IRCMonkey12304 (a@CCE30603.DB19ABC4.17913DC0.IP)
[11:06:25] <dbaupp> something like `let mut chars = expr.iter(); loop { let c = match chars.next() { Some(c) => c, None => break }; match c { ... } }`
[11:06:51] <dbaupp> (notably/unfortunately, you can't use the `for` sugar here, since you have nested loops that need to advance the iterator.)
[11:07:03] <aeqwa> dbaupp: thank you :) i will going that direction
[11:07:26] *** Joins: GeneralMaximus (ankur@BA07138C.9925E880.493B1C0B.IP)
[11:07:41] <Sharp> Didn't someone say they wanted to implement a really nice DFA engine in Rust?
[11:08:04] <Sharp> I.e., not just PCRE?
[11:08:49] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[11:09:13] * Sharp wants RustyLex / RustyYacc :)
[11:10:34] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[11:13:18] *** zz_kimundi is now known as kimundi
[11:14:10] <Sharp> kimundi: Apparently you were doing some stuff with Rust regexps?
[11:16:10] *** Joins: bholley (anonymous@moz-BC4FAFB9.dip0.t-ipconnect.de)
[11:21:59] *** Quits: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au) (Quit: gavinb)
[11:23:22] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[11:24:06] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[11:24:12] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[11:24:21] *** flaper87 is now known as flaper87|afk
[11:25:49] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[11:26:45] *** Quits: dbaupp (Thunderbir@moz-B3C9E9E8.lns20.syd6.internode.on.net) (Ping timeout)
[11:27:24] *** Parts: IRCMonkey12304 (a@CCE30603.DB19ABC4.17913DC0.IP) (Leaving...)
[11:27:50] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[11:30:23] *** Joins: dbaupp (Thunderbir@moz-B3C9E9E8.lns20.syd6.internode.on.net)
[11:33:24] *** Joins: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au)
[11:34:15] *** Joins: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP)
[11:39:33] *** Joins: mib_f1t15h (Mibbit@moz-204D4F5C.dynamic.hinet.net)
[11:41:17] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[11:41:32] *** Quits: mib_f1t15h (Mibbit@moz-204D4F5C.dynamic.hinet.net) (Quit: http://www.mibbit.com ajax IRC Client)
[11:43:13] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[11:44:01] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[11:45:24] *** Quits: Ms2ger (Ms2ger@moz-E10D6F22.ugent.be) (Quit: bbl)
[11:47:05] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[11:48:52] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[11:50:41] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Ping timeout)
[11:52:03] *** Joins: erickt (etryzelaar@BF60BF52.64BC77A3.7FC6A66E.IP)
[11:52:44] <ChrisMorgan> Luqman: I discovered that I'm out of luck on the topic of getting glibc 2.17 on my tablet for now; the build I have of Ubuntu 12.04 is armel rather than armhf, and armel releases stopped after 12.10, but glibc 2.17 didn't come until 13.04. So unless I can figure out how to switch an armel OS to armhf or get an entirely new image working...
[11:53:21] *** Joins: brendan (brendaneic@B0D36173.5F77D495.B41F1B80.IP)
[11:54:24] *** Quits: erickt (etryzelaar@BF60BF52.64BC77A3.7FC6A66E.IP) (Ping timeout)
[11:54:46] *** Joins: amro (quassel@CC16DC52.8AAAF769.FAAB0799.IP)
[11:55:18] *** Quits: doomlord_ (servitor@moz-B44A6624.range86-160.btcentralplus.com) (Connection reset by peer)
[11:59:17] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[11:59:29] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[12:02:56] *** Joins: engla_ (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[12:03:26] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[12:03:48] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[12:04:04] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[12:04:29] *** Joins: erickt (etryzelaar@BF60BF52.64BC77A3.7FC6A66E.IP)
[12:08:56] *** Joins: johnmurray (jmurray@moz-299FF8FF.fw.nyc2.appnexus.com)
[12:09:42] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[12:10:29] *** Quits: alonlevy (alon@moz-E6115DFA.bb.netvision.net.il) (Ping timeout)
[12:11:23] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[12:11:55] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[12:12:10] *** Parts: z0w0 (zack@moz-238C2341.lnse3.cha.bigpond.net.au) ()
[12:13:52] *** Joins: refold (gman@moz-42D68426.a258.priv.bahnhof.se)
[12:14:33] *** Quits: brendan (brendaneic@B0D36173.5F77D495.B41F1B80.IP) (Quit: brendan)
[12:15:07] *** Joins: brendan (brendaneic@B0D36173.5F77D495.B41F1B80.IP)
[12:16:22] *** Quits: bobthenameless (bobthename@moz-1C30D660.hsd1.wa.comcast.net) (Ping timeout)
[12:16:51] *** Quits: johnmurray (jmurray@moz-299FF8FF.fw.nyc2.appnexus.com) (Quit: johnmurray)
[12:17:24] *** Quits: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net) (Ping timeout)
[12:17:25] *** Joins: bobthenameless (bobthename@moz-1C30D660.hsd1.wa.comcast.net)
[12:18:43] *** Quits: brendan (brendaneic@B0D36173.5F77D495.B41F1B80.IP) (Quit: brendan)
[12:19:29] *** Joins: bletch (Mibbit@9B9315E1.A6025CA.1C37C358.IP)
[12:19:36] *** Quits: bletch (Mibbit@9B9315E1.A6025CA.1C37C358.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:20:42] *** Joins: johnmurray (jmurray@moz-299FF8FF.fw.nyc2.appnexus.com)
[12:20:46] *** Joins: reedlepee (Mibbit@9B9315E1.A6025CA.1C37C358.IP)
[12:22:41] *** bhearsum|afk is now known as bhearsum
[12:23:08] *** Quits: bobthenameless (bobthename@moz-1C30D660.hsd1.wa.comcast.net) (Ping timeout)
[12:23:24] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[12:24:00] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[12:24:25] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[12:24:35] *** Quits: bjz (textual@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[12:24:57] *** Joins: bjz (textual@B398BE78.F804C29E.D35A31DF.IP)
[12:25:27] *** Joins: alonlevy (alon@moz-61A0AD83.red.bezeqint.net)
[12:26:11] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[12:26:51] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[12:32:34] *** Joins: bobthenameless (bobthename@moz-1C30D660.hsd1.wa.comcast.net)
[12:34:05] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[12:34:12] *** Joins: canhtak (canhtak@moz-1BED280F.wl.t.ulaval.ca)
[12:34:25] *** Quits: vertexclique (vertexcliq@88443504.DE7F3465.1826D296.IP) (Client exited)
[12:34:54] *** Joins: vertexclique (vertexcliq@88443504.DE7F3465.1826D296.IP)
[12:35:03] *** Quits: vertexclique (vertexcliq@88443504.DE7F3465.1826D296.IP) (Quit: )
[12:35:07] *** Joins: Lonley_home (chatzilla@moz-CC64AAAF.cable.teksavvy.com)
[12:35:19] *** Quits: bobthenameless (bobthename@moz-1C30D660.hsd1.wa.comcast.net) (Ping timeout)
[12:35:29] <Lonley_home> Hello
[12:37:03] *** Quits: Lonley_home (chatzilla@moz-CC64AAAF.cable.teksavvy.com) (Quit: ChatZilla 0.9.90.1 [SeaMonkey 2.21/20130916112225])
[12:38:28] *** Joins: bobthenameless (bobthename@moz-1C30D660.hsd1.wa.comcast.net)
[12:43:21] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[12:43:43] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[12:47:35] *** Quits: GeneralMaximus (ankur@BA07138C.9925E880.493B1C0B.IP) (Quit: Computer has gone to sleep.)
[12:50:04] *** Joins: Ms2ger (Ms2ger@moz-E10D6F22.ugent.be)
[12:53:10] *** flaper87|afk is now known as flaper87
[12:55:23] <kimundi> Sharp: I where just discussing a potential API with someone who knew how to implement it, but I don't know how to implement an efficient one myself :)
[12:55:44] <Sharp> Ah, cool :)
[12:56:55] *** Quits: nkoep (nik@moz-C2DD8EC3.pool.mediaways.net) (Ping timeout)
[12:57:03] <eddyb> a[i] can be implemented for any types, right?
[12:57:11] <eddyb> so m[(i, j)] is doable atm?
[12:57:16] <bstrie> yeah
[12:57:37] <eddyb> I was thinking, since , is not an operator in Rust, can't we make m[i, j] work?
[12:57:53] <bstrie> you mean, like, by special-casing the indexing syntax?
[12:57:57] <Sharp> It's not an operator in C either, but I still can't do m[i, j]...
[12:57:57] <bstrie> to return a tuple there?
[12:57:59] <bjz> eddyb: index needs reform
[12:58:11] <eddyb> Sharp: it's an operator in C/C++
[12:58:19] <Sharp> I thought it was just a separator for some reason
[12:58:21] <Sharp> Does it evaluate?
[12:58:27] *** Quits: dbaupp (Thunderbir@moz-B3C9E9E8.lns20.syd6.internode.on.net) (Input/output error)
[12:58:29] <eddyb> and some other languages as well
[12:58:41] <eddyb> Sharp: (a, b, c) is equivalent to {a; b; c} in Rust
[12:58:47] <Sharp> Ah, okay
[12:59:02] <Sharp> I vaguely remember something like that
[12:59:12] <Sharp> OTOH, I think (a; b; c) is also equivalent.
[12:59:22] <eddyb> rusti: (1; 2)
[12:59:23] -rusti- pastebinned 6 lines of output: http://sprunge.us/eEXd
[12:59:31] <Sharp> (In C).
[12:59:37] <eddyb> that's not valid C syntax
[12:59:50] <Sharp> Maybe not… maybe only in a for.  I'm trying to remember when I used commas.
[12:59:55] <Sharp> Maybe that was it :P
[13:00:04] <eddyb> for is a special case, not related
[13:00:09] *** Quits: bobthenameless (bobthename@moz-1C30D660.hsd1.wa.comcast.net) (Ping timeout)
[13:00:28] <eddyb> bjz: this might require variadic generics to work :/
[13:00:29] <bjz> eddyb: to do a[x, y] right, you'd also need variadic type parameters, so you could cover a[x0, x1, x2, ...xn], 
[13:00:35] <bjz> yep
[13:01:27] *** Quits: reedlepee (Mibbit@9B9315E1.A6025CA.1C37C358.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:02:02] <Sharp> Does anyone here have the ability to review PRs, incidentally?  I have one ready but I imagine most reviewers are asleep.
[13:02:30] *** Quits: ofeldt (ofeldt@moz-E11B987D.dip0.t-ipconnect.de) (Ping timeout)
[13:02:30] <eddyb> bjz: more reasons to get working on implementing my proposal :P
[13:03:00] *** Quits: Jesin (Jessin_@moz-48B48C95.eecs.lehigh.edu) (Input/output error)
[13:03:20] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[13:03:30] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[13:03:46] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[13:04:04] <adridu59> rusti: let (a,b) = (1,2); (a,b) = (3,4);
[13:04:07] -rusti- pastebinned 8 lines of output: http://sprunge.us/iIaC
[13:04:08] <Sharp> Couldn't regular pattern matching handle it in this case, as long as you were willing to write a[(x0, x1, x2)]?  Maybe not to arbitrary dimensions, I guess...
[13:04:22] <bstrie> Sharp: I am secretly a reviewer
[13:04:30] <adridu59> rusti: let a,b = 1,2; a,b = 3,4;
[13:04:31] -rusti- pastebinned 13 lines of output: http://sprunge.us/cNAX
[13:04:41] <Sharp> Haha
[13:04:49] *** Quits: erickt (etryzelaar@BF60BF52.64BC77A3.7FC6A66E.IP) (Ping timeout)
[13:04:52] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[13:04:52] <bstrie> Sharp: but I'm not really qualified to review anything more than superficial patches
[13:05:08] <bstrie> not especially well-versed in the compiler internals
[13:05:13] <Sharp> I don't think this is superficial but I don't really know what superficial means in this context.
[13:05:14] <Sharp> Oh.
[13:05:21] <Sharp> Yeah, I'll wait.  Or maybe I should ask in rust-internals.
[13:05:32] <Ms2ger> bstrie, don't be so self-deprecating and r+ already ;)
[13:05:47] <bstrie> I can take a look at it and tell you if I know what's going on :P
[13:05:52] * Sharp isn't well versed in compiler internals either, but he isn't a reviewer :D
[13:05:54] *** Joins: ofeldt (ofeldt@moz-E11B987D.dip0.t-ipconnect.de)
[13:05:56] <Sharp> https://github.com/mozilla/rust/pull/10172
[13:06:17] <Sharp> Thanks :)
[13:07:08] <bstrie> Sharp: hrm, I feel like strcat has something very specific in mind for this issue, so I'd prefer to let him review it instead :)
[13:07:27] <Sharp> Okay, sure :)
[13:07:35] *** Quits: ofeldt (ofeldt@moz-E11B987D.dip0.t-ipconnect.de) (Ping timeout)
[13:10:35] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[13:10:48] <eddyb> Sharp: the tuple version would work, the point is to not require wrapping in a tuple
[13:11:03] <Sharp> For mathy stuff?
[13:11:25] *** Joins: ofeldt (ofeldt@moz-E11B987D.dip0.t-ipconnect.de)
[13:11:28] <Sharp> I kind of like the tuple variant because it feels more mathy, actually :P
[13:11:31] *** Joins: nkoep (nik@moz-D8E3D708.vpn.rwth-aachen.de)
[13:11:41] <Sharp> But it's less convenient to type.
[13:11:44] <eddyb> Sharp: you have both [] and ()
[13:11:59] *** Quits: amro (quassel@CC16DC52.8AAAF769.FAAB0799.IP) (Ping timeout)
[13:12:18] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[13:12:25] <eddyb> Sharp: to do m(1, 2) on any m, you need the Fn trait, which is just as much work as a variadic Index trait
[13:12:26] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[13:12:29] <Sharp> Yeah, I see what you are saying.
[13:12:35] <bstrie> eddyb: first we'd need to come up with use cases to justify special-cased rules like that
[13:12:45] <eddyb> bstrie: how is it special?
[13:13:10] <bstrie> eddyb: having second syntax for declaring a tuple, that only works inside of indexes
[13:13:15] <Sharp> Bleh, the AST is kind of messy
[13:13:17] <eddyb> that's not a tuple
[13:13:20] <Sharp> Is there any project to clean it up?
[13:13:25] <eddyb> bstrie: it's a variadic operator[]
[13:13:28] * bstrie hands sharp a mop
[13:13:45] <bstrie> we don't *have* variadic functions :P
[13:13:55] <eddyb> not yet. we need them though
[13:14:03] <bstrie> you'll have to convince the devs, then
[13:14:25] <bstrie> and I think the line you'll get, as ever, will be "our hands are full, putting it off until 2.0"
[13:14:48] <eddyb> they agree (the Fn trait was introduced to me by nmatsakis' blog post), but yeah, not for 1.0
[13:14:59] *** Quits: SilverKey (SilverKey@moz-B589DA51.sw.biz.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[13:15:33] * Sharp sees lots of ÅST-related issues but (so far) no general cleanup issue.
[13:15:58] <eddyb> Å?
[13:16:09] <bstrie> Åbstract Syntax Trees
[13:16:15] <Sharp> Oh, blah
[13:16:42] <Sharp> I think my Mac is set to turn various letters into symbols with accents if I hold the key down and don't pay attention.
[13:17:06] *** Quits: alonlevy (alon@moz-61A0AD83.red.bezeqint.net) (Ping timeout)
[13:17:54] <engla_> 1e-10 metre syntax trees
[13:18:35] * Sharp suspects that the actual data probably could fit on that scale for most programs :P
[13:18:59] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[13:19:03] *** Quits: Ms2ger (Ms2ger@moz-E10D6F22.ugent.be) (Quit: bbl)
[13:20:04] <bstrie> bleh, engla_ beat me to the angstrom joke :P
[13:21:01] *** Joins: pyrac (pyrac@151566EE.73C89388.AD05C589.IP)
[13:22:44] *** Quits: sweet_kid (Upasana@F685FB81.839A33D6.388CF16F.IP) (Ping timeout)
[13:23:02] *** Quits: fmtq (fmt@moz-5769BD38.static.tpgi.com.au) (Ping timeout)
[13:23:19] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[13:23:58] *** Joins: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com)
[13:24:05] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[13:24:17] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[13:24:33] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[13:24:44] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Ping timeout)
[13:24:45] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[13:24:55] *** Joins: fmtq (fmt@moz-5769BD38.static.tpgi.com.au)
[13:26:34] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[13:27:27] *** Joins: sweet_kid (Upasana@F685FB81.839A33D6.388CF16F.IP)
[13:28:42] *** Joins: amro (quassel@CC16DC52.8AAAF769.FAAB0799.IP)
[13:30:16] *** Joins: Ms2ger (Ms2ger@moz-E10D6F22.ugent.be)
[13:32:07] *** Joins: alonlevy (alon@moz-B0E66DB7.static.bezeqint.net)
[13:32:11] *** Joins: sweet_kid_ (Upasana@381B8FDE.608D219A.4A5F0685.IP)
[13:32:49] *** Quits: sweet_kid (Upasana@F685FB81.839A33D6.388CF16F.IP) (Ping timeout)
[13:33:46] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[13:33:54] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[13:35:18] *** Joins: erickt (etryzelaar@BF60BF52.64BC77A3.7FC6A66E.IP)
[13:39:05] *** Parts: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au) ()
[13:40:25] *** Joins: _eddyb_ (eddy@FE23D96E.F33C1089.FB866788.IP)
[13:40:29] *** Quits: eddyb (eddy@A93A03C9.9065A63B.FCAAE698.IP) (Ping timeout)
[13:43:16] *** Quits: bjz (textual@B398BE78.F804C29E.D35A31DF.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[13:43:28] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[13:44:06] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[13:44:55] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Client exited)
[13:45:36] *** Quits: kaeso (kaeso@moz-F21FF626.unstable.it) (Quit: ZNC - http://znc.sourceforge.net)
[13:45:55] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[13:45:57] *** Joins: nif (Mibbit@moz-B6DFA19D.wireless.oberlin.edu)
[13:46:07] *** Joins: kaeso (kaeso@moz-F21FF626.unstable.it)
[13:49:12] *** Quits: canhtak (canhtak@moz-1BED280F.wl.t.ulaval.ca) (Quit: canhtak)
[13:49:39] *** Joins: bjz (textual@B398BE78.F804C29E.D35A31DF.IP)
[13:53:30] *** Joins: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com)
[13:54:19] *** Quits: sweet_kid_ (Upasana@381B8FDE.608D219A.4A5F0685.IP) (Ping timeout)
[13:54:37] *** Joins: canhtak (canhtak@moz-1BED280F.wl.t.ulaval.ca)
[13:54:54] *** Quits: bjz (textual@B398BE78.F804C29E.D35A31DF.IP) (Quit: Textual IRC Client: www.textualapp.com)
[13:55:02] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[13:55:07] *** Quits: nif (Mibbit@moz-B6DFA19D.wireless.oberlin.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[13:55:09] *** Joins: sweet_kid (Upasana@381B8FDE.608D219A.4A5F0685.IP)
[13:55:32] *** Joins: nif (Mibbit@moz-B6DFA19D.wireless.oberlin.edu)
[13:57:12] *** Joins: bjz (textual@B398BE78.F804C29E.D35A31DF.IP)
[14:01:46] *** Quits: DeTeam (DeTeam@3F8887A3.6883A39.F5F3AF2.IP) (Quit: DeTeam)
[14:02:17] *** Joins: skeet70 (skeet70@moz-156ACA63.msu.montana.edu)
[14:02:18] *** Quits: vu3rdd (vu3rdd@moz-E083170.cisco.com) (Ping timeout)
[14:03:11] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[14:03:42] *** Joins: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP)
[14:04:03] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[14:04:38] *** Joins: maik_ (maik@moz-7D392208.dip0.t-ipconnect.de)
[14:04:41] <maik_> #rust-gamedev
[14:04:52] <maik_> ups
[14:05:03] *** Parts: netfeed (netfeed@moz-59CB720.members.linode.com) (WeeChat 0.3.0)
[14:09:19] *** Quits: bjz (textual@B398BE78.F804C29E.D35A31DF.IP) (Quit: Textual IRC Client: www.textualapp.com)
[14:09:26] *** Joins: bjz (textual@B398BE78.F804C29E.D35A31DF.IP)
[14:09:53] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[14:10:49] *** Joins: ianj (ianjneu@moz-7140CF01.ccs.neu.edu)
[14:11:30] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[14:13:12] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[14:16:50] *** Quits: skeet70 (skeet70@moz-156ACA63.msu.montana.edu) (Ping timeout)
[14:16:56] *** Quits: amro (quassel@CC16DC52.8AAAF769.FAAB0799.IP) (Ping timeout)
[14:17:52] *** Joins: sweet_kid_ (Upasana@F685FB81.839A33D6.388CF16F.IP)
[14:18:07] *** Joins: arancha (Mibbit@moz-4D4895B.dip0.t-ipconnect.de)
[14:18:15] *** Parts: arancha (Mibbit@moz-4D4895B.dip0.t-ipconnect.de) ()
[14:18:31] *** Quits: canhtak (canhtak@moz-1BED280F.wl.t.ulaval.ca) (Quit: canhtak)
[14:18:51] *** Quits: sweet_kid (Upasana@381B8FDE.608D219A.4A5F0685.IP) (Ping timeout)
[14:20:28] *** _eddyb_ is now known as eddyb
[14:20:44] *** Quits: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP) (Ping timeout)
[14:20:53] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[14:21:08] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[14:21:38] *** Joins: canhtak (canhtak@moz-1BED280F.wl.t.ulaval.ca)
[14:21:40] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[14:22:37] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[14:23:13] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[14:23:59] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[14:25:05] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[14:26:45] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[14:27:30] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[14:27:36] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[14:29:38] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[14:30:18] *** Parts: taotetek (taotetek@moz-E29919E6.hsd1.va.comcast.net) (WeeChat 0.4.0)
[14:30:53] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[14:35:08] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[14:36:22] *** Joins: sanxiyn (tinuviel@B4104EBB.3CC170B1.1E14B209.IP)
[14:36:27] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Quit: Leaving.)
[14:36:48] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[14:37:22] *** Joins: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP)
[14:38:47] *** Joins: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com)
[14:42:18] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[14:43:18] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[14:44:07] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[14:46:24] *** Quits: erickt (etryzelaar@BF60BF52.64BC77A3.7FC6A66E.IP) (Ping timeout)
[14:47:01] *** Joins: DeTeam (DeTeam@moz-B44FF931.yandex.net)
[14:47:33] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[14:47:43] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[14:47:52] *** Joins: blinky (Mibbit@moz-AD1BD40D.moldtelecom.md)
[14:47:55] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[14:51:32] *** Quits: blinky (Mibbit@moz-AD1BD40D.moldtelecom.md) (Quit: http://www.mibbit.com ajax IRC Client)
[14:53:52] <eddyb> someone be following me on github. didn't know you could actually do that :D
[14:54:23] *** Joins: jvshahid (jvshahid@moz-53774307.nycm.ny.megapath.net)
[14:55:20] <nif> eddyb: hello!  :D yeah, I think that's me.
[14:56:08] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[14:56:09] *** ChanServ sets mode: +o jdm
[14:56:22] <eddyb> nif: sorry if I don't remember, did I tell you anything interesting :P?
[14:57:02] <nif> eddyb: oh, I just noticed that you forked my gist, so I figured I'd follow you because why not.  :)
[14:57:15] <eddyb> it's hard to keep track of everyone in here
[14:57:30] <bstrie> nif: did you ever figure out that error you were having the other day?
[14:57:48] <nif> bstrie: I didn't, but someone found me a workaround!
[14:57:55] <bstrie> hooray!
[14:57:58] <nif> :)
[14:58:21] <nif> so now I'm implementing some ~real methods~
[14:58:34] <nif> like insertions and deletions and stuff like that.
[14:58:47] <sanxiyn> What are you implementing?
[14:58:55] <nif> a B-Tree
[14:59:04] *** Quits: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP) (Quit: WeeChat 0.4.3-dev)
[14:59:10] *** Joins: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP)
[14:59:34] <nif> I decided it might make a nice first contribution because it sounded an awful lot like something I'd already done in intro CS many years ago.
[15:00:05] *** Quits: avsej (avsej@DF1824D5.EFF97412.48F984E6.IP) (Client exited)
[15:00:51] <sanxiyn> Eh, not really
[15:00:57] <sanxiyn> That sounds like a challenging project
[15:01:17] <nif> yep, it's much harder than I was expecting.
[15:01:47] <sanxiyn> Because you aren't just writing a B-Tree, you are writing a B-Tree that Rust compiler can prove safe
[15:02:18] * Sharp doesn't think a B-tree should present serious problems in that regard?
[15:02:20] <sanxiyn> (Or you can use lots of unsafe, but that wouldn't be as interesting)
[15:02:27] <nif> yeah! exactly.
[15:02:45] *** Joins: exobit_ (textual@moz-E06F46F0.corp.bitshelter.com)
[15:02:48] <nif> Sharp: it oughtn't, but if you're not used to how Rust handles pointers it is a little tricky
[15:02:54] <nif> for me anyway
[15:02:56] <Sharp> That is very true :)
[15:03:04] <nif> it's also been years since I took systems programming, so there is that too
[15:03:16] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[15:03:24] <sanxiyn> Sharp: Look at treemap code in the standard library sometimes...
[15:03:53] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[15:04:36] * Sharp looks.
[15:05:20] <Sharp> I don't see any unsafe pointers, maybe I'm not looking in the right place?
[15:05:33] <sanxiyn> Sharp: There isn't
[15:06:46] <Sharp> To clarify, I just don't think there will be like… serious lifetime issues with B-trees.  Not that the implementation isn't otherwise complex :P
[15:07:07] <nif> :)
[15:07:22] <eddyb> wouldn't parent pointers (unsafe, if Rc is too heavy) get rid of the iteration stack?
[15:08:07] <Sharp> Because they can share lifetimes with their children?
[15:08:35] *** Quits: refold (gman@moz-42D68426.a258.priv.bahnhof.se) (Quit: leaving)
[15:08:35] <eddyb> hmm?
[15:08:50] <Sharp> Why do parent pointers get rid of the iteration stack in Rust?
[15:09:20] <eddyb> not sure how Rust implements it, but you can do stackless iteration of a binary tree if you have parent pointers, I think
[15:09:24] <sanxiyn> Eh... can you have parent pointers at all?
[15:09:42] <mletterle> that nss channel is hoping, i tell you what.
[15:09:45] <Sharp> Borrowed pointers maybe?  I'm not sure.
[15:10:09] <sanxiyn> Rust treemap in the standard library does not have parent pointers
[15:10:11] <Sharp> Probably not, actually… Rust doesn't like cycles.
[15:10:34] <sanxiyn> I believe it is possible to do B-tree without bottom-up pass (splitting top-down)
[15:11:32] <eddyb> I remember this because I implemented a ternary tree (a silly CS exercise, similar properties to a dumb binary tree) and I didn't need a stack for the iterator, just the current node
[15:12:05] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[15:12:38] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Quit: Lost terminal)
[15:12:39] <eddyb> I was iterating in the sorted order (is that the same thing as "in-order"? I think so), and doing some weird state machine dance
[15:13:12] <Amanieu> yes you can definitely get rid of the stack in the iterator if you have parent pointers
[15:13:25] <eddyb> okay, so I wasn't being crazy :)
[15:13:26] <Amanieu> but you would have to use unsafe pointers for those
[15:13:47] <Sharp> I wish tuple structs were real structs so we could reuse struct_def in a non lame way
[15:13:50] <eddyb> and prove (to at least yourself) that it's safe
[15:13:52] <Sharp> Right now we are reusing it in an extremely lame way
[15:14:00] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[15:14:04] *** Joins: erickt (etryzelaar@BF60BF52.64BC77A3.7FC6A66E.IP)
[15:14:35] <sanxiyn> Sharp: ?
[15:14:35] <eddyb> here's that weird thing: https://gist.github.com/eddyb/64e362ef5435dd862e1a
[15:14:44] <Sharp> "It's a struct!  Except it doesn't have any fields and one of its optional fields is set, sometimes."
[15:14:56] <Sharp> None of our code really knows the difference so it's been added on an ad hoc basis.
[15:15:33] *** Joins: feduser (feduser@DBDDF1EC.46326E73.650F25DA.IP)
[15:15:41] <Sharp> Trivial illustration of why it's not great: because structs have a field list, tuple structs do too.  But since struct fields have names and visibility and tuple struct fields have neither, we just have a cell with nothing in it
[15:16:06] <Sharp> So (1) it's annoying to figure out if it's a tuple struct, (2) you don't immediately know that the entire list is correctly typed, (3) you waste space.
[15:16:07] <Amanieu> eddyb: yes, also that's how std::map is implemented in the STL
[15:16:29] <Sharp> ((4) you make subtle mistakes during code generation and/or treat it like an enum when it's not).
[15:17:25] <sanxiyn> Sharp: That was probably too rust-internals-y...
[15:17:44] *** Joins: brendan (brendaneic@B0D36173.5F77D495.B41F1B80.IP)
[15:17:45] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[15:18:06] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[15:18:10] <Sharp> Perhaps, yeah.
[15:18:42] * Sharp is bad at switching between rooms.
[15:19:18] *** Joins: alisdair (textual@E1CEBB1A.D061F0C9.AA6AEE7B.IP)
[15:19:47] <jdavis> Is variable scope the only way to control the time an owned pointer gets freed?
[15:20:16] <maik_> How do I write a const ptr in rust FFI? like "DLL bool h3dCheckExtension( const char *extensionName ); "
[15:20:19] <Sharp> transmute? :)
[15:20:22] *** Joins: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net)
[15:20:51] <Sharp> (Actually I don't know if that changes when it gets freed, but it does change the lifetime with which it's associated).
[15:20:55] <sanxiyn> jdavis: Basically, yes
[15:21:20] <nmatsakis> maik_: do you mean how do you write the type? there is no direct equiv, but people usually just write *c_char
[15:22:07] <jdavis> sanxiyn: so let's say I make a hack, where I send it over to some special process that just holds on to that one variable. And that special process can either send the variable back on request, or terminate (freeing the variable). 
[15:22:13] <maik_> nmatsakis, okay thanks
[15:22:43] <jdavis> sanxiyn: is that at all sane? Is there a better way to do something like that without making a new process?
[15:22:58] <sanxiyn> Process?
[15:23:10] <sanxiyn> Did you mean task?
[15:23:14] <jdavis> sanxiyn: yes, sorry
[15:23:20] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[15:23:26] <sanxiyn> Why do you need task for that?
[15:23:55] <jdavis> sanxiyn: I guess I don't. I am very new to rust, so I must have missed something simple.
[15:24:06] <sanxiyn> What are you trying to do?
[15:24:14] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[15:24:49] <jdavis> Right now, I'm just trying to play with the memory management. Let's say I make a tiny interactive database and want to be able to free chunks of data after the user deletes them.
[15:25:27] *** Quits: Siyo (Siyo@A89938F4.87DAA49F.F113998C.IP) (Quit: Leaving)
[15:25:30] <eddyb> jdavis: you can use Option<~T> and set it to None to "free" (it acts almost like a nullable pointer)
[15:25:55] <eddyb> jdavis: or remove a ~T from a container, like a vector or a map
[15:26:14] *** Quits: alisdair (textual@E1CEBB1A.D061F0C9.AA6AEE7B.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[15:26:35] <jdavis> eddyb, OK, so with owned pointers, they always destruct at exactly the time you set the owner to None (with an option type)?
[15:26:50] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Connection reset by peer)
[15:26:51] *** Quits: maik_ (maik@moz-7D392208.dip0.t-ipconnect.de) (Ping timeout)
[15:26:52] <sanxiyn> jdavis: Yes
[15:27:01] <jdavis> OK, interesting, thank you.
[15:27:29] <sanxiyn> Let's say you have a variable X typed ~[~S]
[15:27:32] <eddyb> jdavis: they act somewhat like unique_ptr in C++, if you are familiar with that
[15:27:47] <eddyb> you get rid of the box, it gets freed
[15:27:53] <sanxiyn> Assigning to X[0] will free (and call destructor if there is one) what was in X[0]
[15:28:27] <jdavis> sanxiyn, ok, I see.
[15:29:36] *** Joins: Siyo (Siyo@A89938F4.87DAA49F.F113998C.IP)
[15:31:27] <ChrisMorgan> Ahh... `make TAGS.vi` and add it to Vim 'tags' and all of a sudden things are easier. Then implement the same thing in rust-http and things are *way* easier.
[15:31:44] <sanxiyn> jdavis: In general, if left hand side's type is ~, whenever you assign old value will be freed
[15:32:00] <sanxiyn> (That is, code freeing old value is generated by compiler)
[15:33:13] *** Joins: nejucomo1 (Adium@moz-434492BB.dsl.static.sonic.net)
[15:33:13] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Connection reset by peer)
[15:34:25] *** Joins: jvns (quassel@87D98E32.4046EB22.428F94DD.IP)
[15:34:47] <jdavis> After experimenting a little more, now I think I understand moving and freeing owned pointers. Thanks!
[15:35:07] <bstrie> hooray for understanding!
[15:36:49] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[15:38:12] <sanxiyn> I am thinking about implementing multiple assignment
[15:38:18] <sanxiyn> i.e. (a, b) = (b, a)
[15:38:59] <bstrie> sanxiyn: only if you can do it while keeping the rules sane...
[15:39:26] <benh> set!(a, b) = (b, a)?
[15:39:37] <bstrie> I honestly don't think it's very useful, compared to what we currently have
[15:39:52] <bstrie> you need to write like two extra lines, 0.001% of the time
[15:40:06] <sanxiyn> bstrie: more than 0.001%
[15:40:56] <sanxiyn> For example, once I wanted to write
[15:41:09] <bstrie> iirc you only need temps when you want to mutate the variables from an outer scope with the results of a function that returns a tuple
[15:41:13] <sanxiyn> (c[i], carry) = add_one_digit(a[i], b[i], carry)
[15:41:37] <sanxiyn> bstrie: You also need temp when you assign to non-pattern
[15:42:19] <sanxiyn> Currently you write
[15:42:29] <sanxiyn> let (x, y) = add_one_digit(a[i], b[i], carry)
[15:42:31] <sanxiyn> c[i] = x
[15:42:33] <sanxiyn> carry = y
[15:42:35] <bstrie> sanxiyn: change it to `c[i] = carry.add_one_digit(a[i], b[i])` :P
[15:42:44] <sanxiyn> bstrie: WTF
[15:42:51] *** Joins: Palmik (palmik@moz-11EA685D.pks.muni.cz)
[15:43:03] <bstrie> haha
[15:43:19] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[15:43:20] <sanxiyn> benh: How would that expand? (macro ends at set!(a, b)?)
[15:43:36] <myname> you could do set!(a, b = b, a)
[15:43:53] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[15:44:06] <benh> sanxiyn: just as a hint so you know to parse it as patterns and not expressions, it'd still need to be really magic
[15:44:53] <sanxiyn> benh: I want to parse it as expression; see above
[15:45:03] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[15:45:28] <sanxiyn> myname: Now that is an interesting idea
[15:45:45] <benh> sanxiyn: probably reasonable enough
[15:45:53] <sanxiyn> benh: ?
[15:46:11] <benh> i mean parsing as expression is probably more reasonable than coming up with weird rules to cover all the cases
[15:46:44] <sanxiyn> myname: At the moment, x = y is an expression, so that would be three expressions
[15:46:50] <sanxiyn> a
[15:46:53] <sanxiyn> b = b
[15:46:53] <sanxiyn> a
[15:47:45] <sanxiyn> Perhaps it shouldn't be? Why is x = y an expression?
[15:48:40] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[15:49:28] <bstrie> rusti: let x = y = 4; x
[15:49:29] -rusti- pastebinned 7 lines of output: http://sprunge.us/bGYZ
[15:49:46] <bstrie> rusti: let mut y = 2; let x = y = 4; x
[15:49:47] -rusti- pastebinned 7 lines of output: http://sprunge.us/WWAY
[15:50:05] <sanxiyn> bstrie: That did result in ()
[15:50:09] <bstrie> yup
[15:50:19] <bstrie> it's weird to me too
[15:50:25] <sanxiyn> Is this in any way useful?
[15:50:26] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[15:50:31] <bstrie> no
[15:50:37] <bstrie> it only ever returns ()
[15:51:02] <benh> Do we have any statements besides let, items and expressions?
[15:51:21] <sanxiyn> benh: No
[15:51:29] <bstrie> I think, maybe, the reason for this is
[15:51:39] <bstrie> back in the day, we let you do `let x = 2, y = 3;`
[15:51:47] <bstrie> which we don't allow anymore
[15:51:57] <Sharp> sanxiyn: Return?  Is that considered an expression?
[15:52:00] <sanxiyn> bstrie: That still does not make sense
[15:52:12] <bstrie> maybe
[15:52:16] <sanxiyn> Sharp: Yes, return is an expression
[15:52:31] <benh> rusti: 5 + return ()
[15:52:32] -rusti- pastebinned 10 lines of output: http://sprunge.us/KTjF
[15:52:39] <sanxiyn> rusti: fn f() -> int { (return 1, return 2, return 3) } f()
[15:52:40] -rusti- pastebinned 6 lines of output: http://sprunge.us/AQVV
[15:52:49] <Sharp> Whoops.
[15:53:12] <sanxiyn> Heh, I triggered ICE
[15:53:40] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[15:53:42] <sanxiyn> These are full list of statements:
[15:53:44] <sanxiyn> * item
[15:53:45] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[15:53:46] <sanxiyn> * let
[15:53:53] <sanxiyn> * expression with semicolon
[15:53:57] <sanxiyn> * expression without semicolon
[15:54:03] <sanxiyn> * macro which expands to statement
[15:54:05] <sanxiyn> That's it
[15:54:07] <Sharp> Isn't #4 the same as return?
[15:54:23] <sanxiyn> Sharp: No
[15:54:52] <benh> rusti: let x = { (); 42 }; x
[15:54:53] *** Joins: maik_ (maik@moz-7D392208.dip0.t-ipconnect.de)
[15:54:53] -rusti- 42
[15:54:57] <sanxiyn> Sharp: e.g. if true { 1 } else { 2 }
[15:54:59] <benh> couldn't write that with return :v
[15:55:01] <Sharp> Doesn't it always have a value though?
[15:55:11] <sanxiyn> Sharp: It does
[15:55:13] <Sharp> Isn't the difference between expressions and statements precisely that expressions evaluate to a value?
[15:55:41] *** Quits: nif (Mibbit@moz-B6DFA19D.wireless.oberlin.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[15:55:56] <sanxiyn> Sharp: Well, in terms of Rust internals, Stmt is whatever is inside block
[15:55:58] *** Quits: Mowah (Mowah@moz-436C35C5.cust.bredbandsbolaget.se) (Ping timeout)
[15:56:00] <benh> well, the difference is really that most expressions can't directly contain statements, or something
[15:56:24] <Sharp> Expressions can contain expressions without semicolon though...
[15:56:38] *** Joins: alan (alan@32702EE8.939109B2.FB082A98.IP)
[15:56:54] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[15:57:05] <sanxiyn> Sharp: See above; if expression contains a block, which contains a list of statements
[15:57:11] <Sharp> Oh… must have unit type.
[15:57:16] <Sharp> (According to the comments).
[15:57:24] <sanxiyn> Sharp: Eh no
[15:57:44] *** Joins: hjr3 (hradtke@moz-9AC18790.public.wayport.net)
[15:57:46] <Sharp> The comment could easily be incorrect, wouldn't be the first time :)
[15:57:49] *** Quits: heftig (heftig@moz-C04B16C1.dip0.t-ipconnect.de) (Quit: Quitting)
[15:57:56] <sanxiyn> Sharp: Which comment?
[15:58:03] <Sharp> In ast.rs
[15:58:06] <Sharp>     // expr without trailing semi-colon (must have unit type):
[15:58:09] <Sharp>     StmtExpr(@Expr, NodeId),
[15:58:18] <sanxiyn> Eh oh
[15:58:23] <sanxiyn> Sharp: I think comments are swapped
[15:58:27] <sanxiyn> See right below
[15:58:43] <Sharp> Yeah… that one's for a statement with a semicolon, which makes perfect sense
[15:58:54] <Sharp> Both comments make sense where they are :)  They might not reflect reality but swapping them doesn't make them make more sense.
[15:58:58] <McPherrin> Luqman: (answering 11:03pm) 512mb
[16:01:12] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:01:35] <sanxiyn> Sharp: Eh... expr without trailing semicolon must have unit type?
[16:01:43] <Sharp> For it to be a statement.
[16:01:45] <sanxiyn> (not may have any type?)
[16:02:02] <sanxiyn> Eh
[16:02:03] <sanxiyn> Oh
[16:02:06] <Sharp> If it doesn't have a semicolon at the end and it doesn't have a unit type, it's just an expression.
[16:02:08] *** Quits: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw) (Ping timeout)
[16:02:11] <Sharp> Makes sense to me.
[16:02:15] <benh> that's a weird perspective :I
[16:02:29] <sanxiyn> Yeah that works
[16:02:40] <sanxiyn> So... I think assignment should be statement
[16:02:47] <benh> so () is not an expression?
[16:02:53] <Sharp> Nope.
[16:02:55] <Sharp> Or rather
[16:02:57] <Sharp> It is a statement
[16:03:06] <sanxiyn> benh: Well it is
[16:03:08] <Sharp> I don't know if I can definitively say that it's not also an expression :)
[16:03:24] <benh> let x = (); //  so I can initialise variables with statements now?
[16:03:33] <benh> meh
[16:03:37] <Sharp> According to the AST documentation :P
[16:03:37] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[16:03:43] <bblum> no
[16:03:45] <benh> statements are what goes into blocks
[16:03:46] <bblum> () is an expression
[16:03:49] *** Quits: maik_ (maik@moz-7D392208.dip0.t-ipconnect.de) (Ping timeout)
[16:03:55] <Sharp> You can do let x;
[16:04:02] <Sharp> Though that's different.
[16:04:07] <sanxiyn> () is ExprLit(lit_nil)
[16:04:08] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[16:04:11] <bblum> a statement is an expression OR a non-expression statement such as let x; or let x = expr;
[16:04:17] <Sharp> Ah.  So () doesn't have unit type.
[16:04:22] <bblum> () does have unit type.
[16:04:27] <sanxiyn> bblum: I found that "x = y" is an expression
[16:04:32] <bblum> statements do not have types; expressions do
[16:04:42] <bblum> sanxiyn: also true as long as you don't have let out front
[16:04:57] <sanxiyn> bblum: Why is it not a statement?
[16:05:05] <Sharp> According to the AST, a statement may be an expression with a unit type.  Perhaps I was incorrect to state that *all* such expressions are statements though :)
[16:05:08] <bblum> it is also a statement; all expressions are statements
[16:05:22] <benh> Maybe so we can write guard_condition && (x = y)!
[16:05:24] <sanxiyn> bblum: I question usefulness of having "x = y" as an expression
[16:05:28] <SiegeLord> x = y returns ()
[16:05:35] *** Joins: maik_ (maik@moz-9713D08E.dip0.t-ipconnect.de)
[16:05:41] <sanxiyn> benh: So that you can slip in backdoor silently? :)
[16:05:42] <bblum> sanxiyn: yeah i wouldn't use it personally
[16:05:47] <Sharp> Maybe in Rust all statements are expressions, but in pretty much every other language that makes the distinction that's not the case.
[16:05:49] *** Joins: bobthenameless (bobthename@moz-1C30D660.hsd1.wa.comcast.net)
[16:05:58] <sanxiyn> benh: See http://lwn.net/Articles/57135/ for details
[16:06:01] <benh> yeah :)
[16:06:14] <bblum> Sharp: rust takes after functional languages like SML and Haskell in its grammar, not C/C++
[16:06:16] <sanxiyn> (Someone actually tried to slip in backdoor to Linux Kernel using = in a guard)
[16:06:42] <Sharp> I think SML does have statements, though I could be wrong
[16:06:45] *** Quits: Ms2ger (Ms2ger@moz-E10D6F22.ugent.be) (Quit: bbl)
[16:06:49] <McPherrin> sanxiyn: That wasn't a very subtle attempt though :P
[16:06:54] <sanxiyn> benh: I want to make assignment a statement so that you *can't* do that in a guard
[16:07:04] <Sharp> I doubt Haskell does.
[16:07:34] <Sharp> SML also distinguishes between declarations and expressions, I believe.
[16:07:40] <bstrie> rusti: let x; if x = 2 { print("true"); } else { print("false"); }
[16:07:41] -rusti- pastebinned 7 lines of output: http://sprunge.us/aeZE
[16:07:51] <bstrie> sanxiyn: ^
[16:07:57] <Sharp> But declarations aren't statements, they just aren't expressions.
[16:07:58] <sanxiyn> bstrie: Yeah won't typecheck
[16:08:00] <sanxiyn> bstrie: But parses
[16:08:10] <sanxiyn> If assignment is a statement, that won't parse
[16:08:40] * benh wonders if there's a good way to grep for assignment-as-non-statement-expression
[16:09:09] *** Quits: maik_ (maik@moz-9713D08E.dip0.t-ipconnect.de) (Ping timeout)
[16:10:00] <sanxiyn> rusti: let x; if {x=1;true} { "true" } else { "false" }
[16:10:01] -rusti- pastebinned 7 lines of output: http://sprunge.us/QhZV
[16:10:25] <sanxiyn> bstrie: ^ actually works
[16:10:33] <Sharp> {x;y} is an expression though
[16:10:40] *** Joins: maik_ (maik@moz-35B8FD77.dip0.t-ipconnect.de)
[16:10:52] <Sharp> Or do you mean let x; ?
[16:11:13] <sanxiyn> Sharp: Using assignment in if condition
[16:11:14] <bstrie> sanxiyn: that's even less subtle than the linux backdoor :P
[16:11:40] <bstrie> sanxiyn: in any case, making assignment a statement wouldn't prevent that
[16:11:41] <benh> if assignment is a statement, i won't be able to write match foo { bar(y) => x = y , ... }, right
[16:11:52] <benh> i'll need to use the blocky case form
[16:11:59] <sanxiyn> benh: yes
[16:12:01] <bstrie> sanxiyn: not that I disagree with you, I don't think it needs to be an expression
[16:12:06] * Sharp figures that Rust doesn't care as long as it knows the variable is assigned in every path.
[16:12:15] *** Joins: themgt (themgt@moz-83F07CDA.cm.vtr.net)
[16:12:33] <SiegeLord> I'd imagine just sticking a semicolon would also work
[16:12:49] <sanxiyn> SiegeLord: ?
[16:12:54] <bstrie> both a semicolon and a pair of braces
[16:13:00] <bstrie> if you're talking about the match there
[16:13:04] <SiegeLord> Why both?
[16:13:14] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[16:13:17] <benh> kinda unwieldy already
[16:13:32] <SiegeLord> Can't you do bar(y) => let x = y; today without braces?
[16:13:33] <bstrie> SiegeLord: actually, I think you're right, wouldn't need the braces there
[16:13:46] <bstrie> maybe?
[16:13:48] *** Joins: andrew-__ (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net)
[16:13:50] <bstrie> someone should try it :P
[16:13:54] <benh> rusti: match () { () => let x = (); }; ()
[16:13:54] -rusti- pastebinned 9 lines of output: http://sprunge.us/dgKh
[16:14:18] *** Quits: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP) (Quit: Leaving)
[16:14:23] <benh> looks like match arms must be expressions, so it'd need to be { x = y; }
[16:14:28] <benh> unsure how I feel about that ;)
[16:14:33] <Sharp> I think there's an issue to fix that
[16:14:39] <sanxiyn> There is?
[16:14:43] <bstrie> it would look weird
[16:14:50] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[16:14:55] <bstrie> `bar(y) => x=y;, ...`
[16:14:56] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[16:14:57] <bstrie> gross
[16:14:59] <Sharp> https://github.com/mozilla/rust/issues/3085
[16:15:07] *** Quits: brendan (brendaneic@B0D36173.5F77D495.B41F1B80.IP) (Quit: brendan)
[16:16:22] <sanxiyn> Sharp: Eh, that is an issue to make arms expressions
[16:16:24] <Sharp> That may be a slightly different issue though, I'm not sure.
[16:16:32] <sanxiyn> It is different issue
[16:16:56] *** Joins: bent (chatzilla@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[16:17:06] *** Joins: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net)
[16:17:35] *** Quits: pyrac (pyrac@151566EE.73C89388.AD05C589.IP) (Ping timeout)
[16:18:04] *** Quits: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net) (Quit: maxiepoo)
[16:18:18] <eddyb> rusti: let mut x : (); match () { () => {x = ();} };
[16:18:20] -rusti- pastebinned 7 lines of output: http://sprunge.us/RIfP
[16:18:30] <eddyb> rusti: let mut x : (); match () { () => {x = ();} }; x
[16:18:31] -rusti- ()
[16:18:35] <eddyb> rusti: let mut x : (); match () { () => {x = ()} }; x
[16:18:36] -rusti- ()
[16:19:01] <eddyb> I like the braces, they make an assignment explicit enough to help with not screwing it up
[16:19:28] *** Quits: erickt (etryzelaar@BF60BF52.64BC77A3.7FC6A66E.IP) (Ping timeout)
[16:19:30] *** Quits: andrew-__ (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net) (Input/output error)
[16:19:51] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[16:20:26] *** Quits: sanxiyn (tinuviel@B4104EBB.3CC170B1.1E14B209.IP) (Quit: Leaving)
[16:22:54] *** Joins: erickt (etryzelaar@93E94B80.D1E9439C.98A37E8C.IP)
[16:22:54] *** Joins: brendan (brendaneic@B0D36173.5F77D495.B41F1B80.IP)
[16:22:58] *** Joins: jstevans (Instantbir@9E8638C2.C4F5A14C.DDE5D3F6.IP)
[16:24:14] *** Joins: lurkerww (Mibbit@moz-71F7E457.cable.teksavvy.com)
[16:24:52] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[16:25:02] *** Quits: themgt (themgt@moz-83F07CDA.cm.vtr.net) (Ping timeout)
[16:29:33] *** Quits: brendan (brendaneic@B0D36173.5F77D495.B41F1B80.IP) (Quit: brendan)
[16:29:51] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[16:30:31] *** Joins: themgt (themgt@moz-83F07CDA.cm.vtr.net)
[16:30:59] *** Quits: lurkerww (Mibbit@moz-71F7E457.cable.teksavvy.com) (Quit: http://www.mibbit.com ajax IRC Client)
[16:31:43] *** Joins: eholk (eholk@moz-BA312F07.crest.iu.edu)
[16:32:59] *** Quits: themgt (themgt@moz-83F07CDA.cm.vtr.net) (Quit: Pogoapp - http://www.pogoapp.com)
[16:33:19] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Quit: Leaving)
[16:33:25] *** Quits: erickt (etryzelaar@93E94B80.D1E9439C.98A37E8C.IP) (Ping timeout)
[16:34:59] *** Joins: brendan (brendaneic@B0D36173.5F77D495.B41F1B80.IP)
[16:36:24] *** Quits: brendan (brendaneic@B0D36173.5F77D495.B41F1B80.IP) (Quit: brendan)
[16:36:48] *** Joins: brendan (brendaneic@B0D36173.5F77D495.B41F1B80.IP)
[16:39:43] *** Quits: canhtak (canhtak@moz-1BED280F.wl.t.ulaval.ca) (Quit: canhtak)
[16:41:09] *** Quits: brendan (brendaneic@B0D36173.5F77D495.B41F1B80.IP) (Quit: brendan)
[16:41:42] *** Joins: brendan (brendaneic@B0D36173.5F77D495.B41F1B80.IP)
[16:43:18] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[16:44:09] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[16:44:23] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[16:45:04] *** Quits: hjr3 (hradtke@moz-9AC18790.public.wayport.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[16:45:36] *** Quits: jeffdb (jeffbelg@moz-ABCAA64B.efi.com) (Quit: Leaving.)
[16:45:40] *** Joins: JanC__ (janc@moz-7B192D41.dsl.scarlet.be)
[16:46:19] *** Quits: JanC_ (janc@moz-E4BC6B65.dsl.scarlet.be) (Ping timeout)
[16:48:35] *** Quits: adu (ajr@moz-1A861F1E.washdc.fios.verizon.net) (Quit: adu)
[16:48:56] *** Quits: FreeFull (freefull@18BF88A.8F3F3853.EFA10D3.IP) (Ping timeout)
[16:49:42] *** Joins: FreeFull (freefull@DB5E48DA.D6594DF9.56E8E578.IP)
[16:50:39] *** Quits: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: ZZZzzz…)
[16:51:44] *** Quits: FreeFull (freefull@DB5E48DA.D6594DF9.56E8E578.IP) (Ping timeout)
[16:52:56] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[16:53:38] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[16:54:06] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[16:54:44] *** Joins: FreeFull (freefull@379F2BBF.CC7C6ECB.F2A80E0C.IP)
[16:57:24] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[16:57:24] *** ChanServ sets mode: +ao pcwalton pcwalton
[16:57:59] *** Quits: FreeFull (freefull@379F2BBF.CC7C6ECB.F2A80E0C.IP) (Ping timeout)
[16:58:09] *** Joins: azakai_ (alon@moz-BBE3ABD.mv.mozilla.com)
[16:58:10] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[16:58:22] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[16:58:25] *** Joins: mib_ynseza (Mibbit@544EAAD5.1D01375D.D609CF0D.IP)
[16:58:33] *** Quits: mib_ynseza (Mibbit@544EAAD5.1D01375D.D609CF0D.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:58:49] *** Joins: pyrac (pyrac@moz-CB14E320.w92-162.abo.wanadoo.fr)
[16:59:38] *** Quits: Kxepal (Miranda@moz-A79FEB26.pppoe.mtu-net.ru) (Ping timeout)
[17:02:38] *** Joins: Kxepal (Miranda@moz-18708274.pppoe.mtu-net.ru)
[17:02:47] *** Joins: hjr3 (hradtke@moz-9AC18790.public.wayport.net)
[17:03:15] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[17:03:43] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[17:04:34] <utkarsh> What is the smallest program that compiles without the runtime as of today?
[17:04:56] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[17:05:00] <utkarsh> https://github.com/pcwalton/zero.rs was deprecated 7 days ago saying "It is no longer necessary to use this to achieve runtime-less operation; just use #[start] and/or #[no_std] and avoid the runtime."
[17:05:21] <utkarsh> and here's something I tried, with the output - https://gist.github.com/2ee00bb4f0aff9e73b6d
[17:05:44] *** Quits: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr) (Ping timeout)
[17:06:16] <pcwalton> hmmm, I'm not sure off the top of my head, as rust_stack_exhausted is a new thing
[17:06:58] *** Joins: SilverKey (SilverKey@moz-B589DA51.sw.biz.rr.com)
[17:06:59] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[17:07:10] *** Joins: edorian (Mibbit@moz-8F89148C.dynamic.qsc.de)
[17:07:20] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:08:02] *** kimundi is now known as zz_kimundi
[17:08:21] *** Joins: hoverbear (hoverbear@moz-CA327798.wireless.uvic.ca)
[17:08:35] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[17:08:42] *** Joins: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr)
[17:08:45] *** Joins: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw)
[17:09:04] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[17:09:29] <acrichto> pcwalton: yes, I added it recently. __morestack calls it when stack exhaustion is detected
[17:09:42] <pcwalton> acrichto: where is it defined?
[17:09:48] <pcwalton> looks like it's inhibiting runtimeless rust
[17:09:53] <acrichto> utkarsh: https://github.com/mozilla/rust/issues/9839 is the issue tracking that
[17:09:57] <acrichto> pcwalton: std::rt::task
[17:10:00] <pcwalton> ok
[17:10:10] <acrichto> in theory no_std means you should get a different version of __morestack
[17:10:16] <acrichto> but it's also not clear which version you should be getting
[17:10:51] <acrichto> #[no_std] as "runtimeless rust" doesn't really mean much if you don't start managing the stack limits
[17:11:03] *** Joins: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com)
[17:11:15] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[17:12:32] *** Quits: DeTeam (DeTeam@moz-B44FF931.yandex.net) (Quit: DeTeam)
[17:12:54] *** Joins: heftig (heftig@moz-E8E2034C.inf.fh-bonn-rhein-sieg.de)
[17:14:00] *** Joins: canhtak (canhtak@moz-1BED280F.wl.t.ulaval.ca)
[17:14:08] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[17:14:31] *** Quits: nejucomo1 (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[17:14:39] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[17:14:45] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[17:15:09] *** Quits: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr) (Max SendQ exceeded)
[17:15:47] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[17:16:10] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[17:16:25] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[17:16:28] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[17:18:23] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[17:20:42] <andor> the wiki is a bit conflicting in parts so i'm not quite sure what to believe, but rust does successfully build with gcc 4.8 on windows now
[17:22:41] <McPherrin> Can I specify the storage type for a "c-like enum" with explicit discriminators?
[17:22:52] <McPherrin> (I want it to be a c_int)
[17:23:01] *** Quits: hoverbear (hoverbear@moz-CA327798.wireless.uvic.ca) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[17:23:06] *** Joins: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr)
[17:23:09] *** Joins: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net)
[17:23:16] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[17:23:55] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[17:26:33] <jeaye> McPherrin: Nope.
[17:26:55] *** Joins: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com)
[17:26:55] <McPherrin>  mmmkay.  A collection of statics it is :(
[17:26:59] <jeaye> The storage of enums is not as predictable/reliable as C or C++.
[17:28:20] <jeaye> It'd be awesome to see `enum mod` and even `enum Foo : c_int`. In other words, to add to Rust was C++11 recently introduced.
[17:28:51] <pcwalton> jeaye: it juuuust landed
[17:28:58] <jeaye> What did?!
[17:29:10] <pcwalton> check it: https://github.com/mozilla/rust/commit/5e1a69112584341522e2cc00bfc6dd1db6e0ec3a
[17:29:11] <pcwalton> :)
[17:29:32] <McPherrin> pcwalton: Ah-ha I thought I saw something about that 
[17:30:05] <jeaye> pcwalton: Ahh, nice.
[17:30:12] * jeaye got excited about `enum mod`
[17:30:25] <pcwalton> you can specify the size and it picks the smallest one by deafult
[17:30:27] <pcwalton> default*
[17:30:32] <pcwalton> I wonder if this will reduce rustc memory usage
[17:30:36] <pcwalton> and/or Servo memory usage
[17:30:52] <pcwalton> Servo is pretty lightweight already IIRC but never hurts
[17:31:01] *** Quits: jstevans (Instantbir@9E8638C2.C4F5A14C.DDE5D3F6.IP) (Ping timeout)
[17:31:05] <jeaye> :)
[17:31:05] <SiegeLord> Still can't do duplicate discriminants
[17:31:42] <SiegeLord> I'd just stick to a collection of statics myself, that's the closest analogue to what C enums are
[17:32:39] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[17:32:44] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[17:32:45] *** ChanServ sets mode: +ao dherman dherman
[17:34:37] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Ping timeout)
[17:35:40] *** Quits: Ferreus (ferreus@moz-5798C698.dip0.t-ipconnect.de) (Ping timeout)
[17:36:06] *** Joins: jstevans (Instantbir@9E8638C2.C4F5A14C.DDE5D3F6.IP)
[17:36:22] <bjz> pcwalton: !!!
[17:36:33] * bjz jumps around
[17:36:36] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[17:36:51] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:37:50] *** Quits: engla_ (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Connection reset by peer)
[17:38:28] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Quit: Leaving)
[17:38:32] *** Joins: ksf (ksf@moz-6D9B434E.adsl.hansenet.de)
[17:40:23] *** Quits: canhtak (canhtak@moz-1BED280F.wl.t.ulaval.ca) (Quit: canhtak)
[17:42:10] *** Joins: adu (ajr@moz-1A861F1E.washdc.fios.verizon.net)
[17:42:51] <McPherrin> SiegeLord: hmm, I don't need that use case but it seems useful
[17:43:11] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[17:43:22] <SiegeLord> And what exactly does the NUM_FOO_FLAGS variant supposed to mean :P
[17:43:23] <McPherrin> enum Foo {bar = baz = 1, foo = fuh = 2, quuz = qaax = 3 } seems like a reasonable syntax
[17:43:58] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[17:44:04] <McPherrin> Better than just having duplicates in the enum, which seems bugprone
[17:44:41] *** Quits: feduser (feduser@DBDDF1EC.46326E73.650F25DA.IP) (Quit: Leaving)
[17:45:39] *** Joins: mikezaby (mikezaby@moz-B26868E.home.otenet.gr)
[17:45:50] <myname> afaik assignments return ()
[17:45:56] <myname> i don't like that, though
[17:46:27] <Eridius> myname: you'd rather the assignment move the value you just assigned back out of the variable?
[17:47:17] <myname> Eridius: well, i get your point, but i'd like to use it at least at copyables
[17:47:19] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[17:47:42] <Eridius> myname: ah, so you want the language to be horribly inconsistent.
[17:47:46] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[17:48:02] <McPherrin> myname: If you're talking about what I said, that's an enum definition, not really an assignment
[17:48:07] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:48:35] <myname> ah
[17:48:37] <myname> hmm
[17:48:47] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:49:56] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[17:50:32] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[17:52:03] *** Joins: jdm (jdm@FCCEA34F.7672369.D8E68FF6.IP)
[17:52:03] *** ChanServ sets mode: +o jdm
[17:53:19] *** Joins: jdm_ (jdm@13F2CEC5.7672369.D8E68FF6.IP)
[17:53:32] *** Quits: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Quit: ozten)
[17:53:43] *** Quits: jdm (jdm@FCCEA34F.7672369.D8E68FF6.IP) (Ping timeout)
[17:56:59] *** Joins: erickt (etryzelaar@93E94B80.D1E9439C.98A37E8C.IP)
[17:57:12] *** zz_kimundi is now known as kimundi
[17:57:44] <Luqman> McPherrin: say, for your board, does it mount csc nfs (specifically scratch) as well as do kerberos?
[17:57:53] *** jdm_ is now known as jdm
[17:57:55] <McPherrin> Luqman: no, just kerb
[17:58:13] *** Joins: expr (user@moz-2AD13122.dyn.optonline.net)
[17:58:16] <McPherrin> Luqman: and I can't get it to boot...
[17:58:27] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:58:50] *** Joins: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com)
[17:59:00] <McPherrin> Luqman: NFS is restricted to the 10.15.134.0/24 so I can't use it outside
[18:01:25] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[18:01:51] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[18:03:40] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[18:04:10] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[18:04:47] *** Quits: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP) (Connection reset by peer)
[18:04:52] *** Joins: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP)
[18:05:49] *** Joins: cwmma (Mibbit@moz-468348D6.hsd1.ma.comcast.net)
[18:07:08] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Quit: Leaving)
[18:07:52] *** Quits: jstevans (Instantbir@9E8638C2.C4F5A14C.DDE5D3F6.IP) (Ping timeout)
[18:08:34] *** Quits: erickt (etryzelaar@93E94B80.D1E9439C.98A37E8C.IP) (Ping timeout)
[18:09:27] *** Joins: erickt (etryzelaar@93E94B80.D1E9439C.98A37E8C.IP)
[18:09:54] *** Joins: tjc (tjc@moz-80F8D2BA.hsd1.ca.comcast.net)
[18:09:54] *** ChanServ sets mode: +o tjc
[18:12:41] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[18:13:34] *** Joins: Mowah (Mowah@moz-436C35C5.cust.bredbandsbolaget.se)
[18:13:36] *** Joins: cubic (cubic@moz-80241A3A.mc.videotron.ca)
[18:14:23] *** Joins: ozten (ozten@ACD43220.1BE0C567.AB83B051.IP)
[18:14:43] *** Joins: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP)
[18:15:44] *** Joins: Florob (Florob@moz-39532932.de)
[18:16:47] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[18:17:19] *** Joins: g3orge (g3orge@moz-CE3A1669.access.hol.gr)
[18:17:38] *** Quits: bjz (textual@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[18:18:46] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[18:19:35] *** Quits: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net) (Connection reset by peer)
[18:19:38] *** Joins: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net)
[18:19:56] *** Quits: ozten (ozten@ACD43220.1BE0C567.AB83B051.IP) (Quit: ozten)
[18:21:11] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[18:21:18] *** Joins: bjz (textual@B398BE78.F804C29E.D35A31DF.IP)
[18:21:29] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[18:21:51] <SimonSapin> Is sending some marker message in a channel the idiomatic way to signal that a task is done, or is there some way to wait on a task?
[18:21:56] *** Quits: erickt (etryzelaar@93E94B80.D1E9439C.98A37E8C.IP) (Ping timeout)
[18:22:33] <McPherrin> SimonSapin: Usually you'd make a note on an appropriate bug (unless you mean something different from what I think)
[18:23:09] <SiegeLord> Hah, task communication through bugzilla
[18:23:18] <SimonSapin> McPherrin: I’m confused
[18:23:25] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[18:23:33] <SimonSapin> I’m talking about std::task
[18:23:37] <McPherrin> SimonSapin: OH
[18:23:46] <McPherrin> SimonSapin: wow I totally misunderstood you
[18:23:59] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[18:24:00] <SimonSapin> yeah I could have been more specific
[18:24:09] *** Quits: tjc (tjc@moz-80F8D2BA.hsd1.ca.comcast.net) (Quit: zzzzzzzzzz)
[18:24:15] *** Joins: geoffhill (geoffhill@moz-244CF33A.amazon.com)
[18:24:36] <McPherrin> I thought you meant "Is sending some message in an ( IRC ) channel the way to signal that a task (done by a human, eg writing some rustc code) is done
[18:24:37] *** Quits: mikezaby (mikezaby@moz-B26868E.home.otenet.gr) (Input/output error)
[18:24:58] <McPherrin> I don't know why I thought that
[18:25:23] <SimonSapin> I meant: is there a better way to do this: https://github.com/mozilla/servo/pull/1152/files#diff-55a6fd41b7568e346ab424f0dfa992b1R71
[18:26:49] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[18:27:00] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[18:27:06] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Quit: james4k)
[18:27:10] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[18:27:56] <SiegeLord> If I interrupt a build before the final stage is done, will it have to redo everything from scratch?
[18:28:52] <McPherrin> No
[18:29:08] <McPherrin> i regularily ctrl-c builds because I want to borrow some cpu cycles
[18:29:21] <kimundi> It only redoes the step it was currently doing
[18:29:26] <SiegeLord> Ok, great
[18:29:34] <tiffany> you should just set the niceness higher then, mcpherrin
[18:29:43] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[18:29:55] <McPherrin> tiffany: yeah but ctrl-c is easier
[18:29:59] <McPherrin> ;)
[18:30:13] <SiegeLord> I shouldn't wait to recompile rustc on my presentation laptop an 1.5 hours before the presentation itself >_<
[18:31:52] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[18:32:09] <eddyb> I suggest doing it immediately after it starts a new step (i.e. it outputs a new line), to not waste compilation time
[18:32:20] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[18:32:43] <SiegeLord> Yeah, I'm waiting to librustc to finish
[18:32:58] <eddyb> SimonSapin: I thought .times was getting deprecated
[18:33:19] <SimonSapin> eddyb: is it?
[18:33:33] *** Joins: tjc (tjc@820240F3.FD5C31A1.284344F5.IP)
[18:33:33] *** ChanServ sets mode: +o tjc
[18:33:39] <Luqman> afaik i thought we decided to keep it around?
[18:33:48] <SimonSapin> eddyb: is 'for _ in range(0, n)' the replacement?
[18:34:01] <SiegeLord> I thought the reason was that 'do' was going to be for 'once' functions only
[18:34:15] <SiegeLord> So times could stay, but the nice syntax for it would be gone
[18:34:17] *** Quits: bent (chatzilla@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[18:34:52] <eddyb> SiegeLord: AFAIK, yes
[18:35:10] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[18:35:38] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[18:36:01] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[18:36:09] *** Quits: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[18:36:26] <eddyb> and it's not as inconsistent when you need the index :P
[18:36:47] <SimonSapin> In this case I don’t
[18:37:24] <Luqman> i thought it just read nicely: `do n.times { ... }`
[18:37:28] *** Quits: nkoep (nik@moz-D8E3D708.vpn.rwth-aachen.de) (Ping timeout)
[18:38:34] *** Joins: bent (chatzilla@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[18:39:30] *** Joins: valenting (Thunderbir@8E5435E.7AF34920.FB866788.IP)
[18:40:22] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[18:41:14] *** Quits: heftig (heftig@moz-E8E2034C.inf.fh-bonn-rhein-sieg.de) (Quit: Quitting)
[18:41:43] *** Quits: pyrac (pyrac@moz-CB14E320.w92-162.abo.wanadoo.fr) (Quit: pyrac)
[18:42:08] *** Joins: StarLight (StarLight@moz-43B2932C.pppoe.avangarddsl.ru)
[18:43:21] <pcwalton> `make -j8 check` is awesome
[18:43:28] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Client exited)
[18:43:29] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[18:43:35] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[18:43:38] <McPherrin> pcwalton: only 8? Get some more cores ;)
[18:43:45] <pcwalton> I just upgraded from 2 to 8!
[18:44:16] *** Joins: Kruppe (user@moz-253119B0.esg.uwaterloo.ca)
[18:44:22] <bstrie> pcwalton: do we no longer mysteriously race when running the test suite in parallel?
[18:44:28] <pcwalton> bstrie: uh
[18:44:30] <pcwalton> I have no idea
[18:44:41] <bstrie> that was the state of things as of, like, a year ago
[18:44:48] <bstrie> when I gave up trying to run it in parallel :P
[18:45:02] *** Quits: tjc (tjc@820240F3.FD5C31A1.284344F5.IP) (Ping timeout)
[18:46:54] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[18:46:55] *** Quits: bholley (anonymous@moz-BC4FAFB9.dip0.t-ipconnect.de) (Quit: bholley)
[18:48:19] *** pnkfelix is now known as pnkfelix|dinner
[18:48:21] *** Joins: onr99 (onur@DBB90BD8.70012127.53438D71.IP)
[18:49:14] *** Joins: tjc (tjc@820240F3.FD5C31A1.284344F5.IP)
[18:49:14] *** ChanServ sets mode: +o tjc
[18:50:17] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[18:50:30] *** Joins: pyrac (pyrac@moz-CB14E320.w92-162.abo.wanadoo.fr)
[18:50:30] *** Joins: DeTeam (DeTeam@moz-25868064.dyn.broadband.iskratelecom.ru)
[18:51:16] *** Joins: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com)
[18:52:04] *** flaper87 is now known as flaper87|afk
[18:52:24] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[18:53:04] *** Joins: voxpopuli (fanservice@17356A8.3591AA85.689607DE.IP)
[18:53:36] *** Joins: doomlord_ (servitor@moz-B44A6624.range86-160.btcentralplus.com)
[18:55:33] *** Quits: DeTeam (DeTeam@moz-25868064.dyn.broadband.iskratelecom.ru) (Quit: DeTeam)
[19:01:17] *** Joins: erickt (etryzelaar@BF60BF52.64BC77A3.7FC6A66E.IP)
[19:01:46] *** Quits: CyBeRKeL (cyber@E6A1FD6F.BE88DC8C.9C1C15C3.IP) (Quit: )
[19:01:50] *** Joins: nkoep (nik@moz-C2DD8EC3.pool.mediaways.net)
[19:02:16] *** Parts: bent (chatzilla@moz-DFAA4E15.p2p.sfo1.mozilla.com) ()
[19:02:20] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[19:03:40] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:03:45] *** Quits: pyrac (pyrac@moz-CB14E320.w92-162.abo.wanadoo.fr) (Quit: pyrac)
[19:03:53] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[19:05:04] <dbussink> hi all, pretty new to rust here, i was looking at https://github.com/mozilla/rust/issues/10162 and wondering how in this case to define the pthread_t type in rust then to have that available
[19:06:33] *** Quits: bobthenameless (bobthename@moz-1C30D660.hsd1.wa.comcast.net) (Ping timeout)
[19:07:05] *** Joins: DeTeam (DeTeam@moz-25868064.dyn.broadband.iskratelecom.ru)
[19:09:21] *** Joins: pyrac (pyrac@moz-CB14E320.w92-162.abo.wanadoo.fr)
[19:09:33] *** Quits: DeTeam (DeTeam@moz-25868064.dyn.broadband.iskratelecom.ru) (Quit: DeTeam)
[19:10:38] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[19:11:38] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Quit: Sharp)
[19:11:39] *** Quits: skade (skade@30BBD5E6.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:13:34] *** Quits: maik_ (maik@moz-35B8FD77.dip0.t-ipconnect.de) (Ping timeout)
[19:14:13] *** Joins: Ms2ger (Ms2ger@B7B2FF50.C60A97A6.F9FB0584.IP)
[19:15:44] *** Joins: nik_ (nik@moz-F2A7C020.pool.mediaways.net)
[19:15:48] *** Quits: brendan (brendaneic@B0D36173.5F77D495.B41F1B80.IP) (Quit: brendan)
[19:16:03] *** Quits: nkoep (nik@moz-C2DD8EC3.pool.mediaways.net) (Ping timeout)
[19:19:16] *** Joins: maik_ (maik@moz-35B8FD77.dip0.t-ipconnect.de)
[19:19:16] <dbussink> would it mean basically defining the structure for it manually like other structures in src/libstd/libc.rs?
[19:19:29] *** Quits: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net) (Quit: Leaving.)
[19:19:35] *** Quits: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP) (Quit: leaving)
[19:20:28] <acrichto> dbussink: the other option would be to have an FFI wrapper which is just something like rust_size_of_pthread_t
[19:20:43] <acrichto> dbussink: but I'd keep the definitions inside of rt::thread instead of putting them in libc
[19:20:51] <acrichto> (if you went down that route)
[19:21:04] <dbussink> acrichto: right, it's more that i'm wondering what the recommended approach would be
[19:21:23] <dbussink> that wrapper would be the size then, but would that mean manual allocation?
[19:21:35] <dbussink> and not a type inside the object like it's now in the c++ wrapper?
[19:21:38] <acrichto> dbussink: I'm always a fan of fewer allocations, but if the definition of pthread_t is horrendously difficult then it may not be worth it
[19:21:51] <dbussink> acrichto: right, the type is crazy :)
[19:21:55] *** Quits: erickt (etryzelaar@BF60BF52.64BC77A3.7FC6A66E.IP) (Ping timeout)
[19:22:01] <acrichto> dbussink: yeah ideally we'd have 'struct Thread { handle: pthread_t }"
[19:22:18] <dbussink> acrichto: yeah, that was what i was aiming for, but it seems really tricky :)
[19:22:19] *** Joins: bobthenameless (bobthename@moz-1C30D660.hsd1.wa.comcast.net)
[19:23:03] <dbussink> which is also i guess why it's still a c++ object now
[19:23:09] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[19:23:21] <acrichto> dbussink: apparently on OSX it's a long, some weird pointer, and then 1168 characters (?)
[19:23:33] <acrichto> weird
[19:23:45] <dbussink> acrichto: i was already digging through the headers, it's even called _opaque_pthread_t ;)
[19:24:01] <acrichto> dbussink: for now I'd recommend making an ffi call which just returns sizeof(pthread_t) and then malloc it manually
[19:24:02] <dbussink> and has a char __opaque[__PTHREAD_SIZE__]; as one of the members
[19:24:02] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[19:24:12] <acrichto> ah excellent, at least it's parameterized!
[19:24:17] <dbussink> hehe
[19:24:35] <dbussink> yeah, can do that and just make pthread_t* a void type alias then right?
[19:24:54] <acrichto> dbussink: yeah in rust just 'type pthread_t = libc::c_void'
[19:25:18] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[19:26:10] <dbussink> acrichto: alright, thanks for the answers :)
[19:26:14] <acrichto> np
[19:26:22] <dbussink> acrichto: probably going to play with it tomorrow more then
[19:28:04] *** Joins: kud1ing (Mibbit@moz-A2DD7270.pools.arcor-ip.net)
[19:28:43] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[19:29:40] *** pnkfelix|dinner is now known as pnkfelix
[19:30:37] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[19:32:17] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[19:32:29] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[19:34:23] *** Quits: cwmma (Mibbit@moz-468348D6.hsd1.ma.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[19:34:45] *** Quits: hjr3 (hradtke@moz-9AC18790.public.wayport.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[19:35:49] *** Quits: KindOne (KindOne@moz-E3099081.dynamic.ip.windstream.net) (Ping timeout)
[19:35:55] <McPherrin> #[repr(c_int)] doesn't work :(
[19:36:21] *** Joins: reeldepee (Mibbit@9B9315E1.A6025CA.1C37C358.IP)
[19:36:55] *** Quits: Kruppe (user@moz-253119B0.esg.uwaterloo.ca) (Client exited)
[19:38:14] *** Quits: valenting (Thunderbir@8E5435E.7AF34920.FB866788.IP) (Ping timeout)
[19:38:17] *** Joins: themgt (themgt@moz-83F07CDA.cm.vtr.net)
[19:38:51] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[19:39:50] *** Joins: valenting (Thunderbir@8E5435E.7AF34920.FB866788.IP)
[19:40:02] *** Joins: KindOne (KindOne@moz-579149B3.dynamic.ip.windstream.net)
[19:40:04] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[19:40:29] *** Joins: erickt (etryzelaar@BF60BF52.64BC77A3.7FC6A66E.IP)
[19:40:42] *** Quits: adu (ajr@moz-1A861F1E.washdc.fios.verizon.net) (Quit: adu)
[19:41:40] *** Quits: tjc (tjc@820240F3.FD5C31A1.284344F5.IP) (Quit: zzzzzzzzzz)
[19:42:33] <Sharp> strcat: Hey!  Just so you know, https://github.com/mozilla/rust/pull/10172 is up :)  Please let me know if it's correct when you have time.
[19:43:23] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[19:43:59] *** Quits: reeldepee (Mibbit@9B9315E1.A6025CA.1C37C358.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:44:01] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[19:44:34] *** Joins: Kruppe (user@moz-253119B0.esg.uwaterloo.ca)
[19:45:09] *** Quits: expr (user@moz-2AD13122.dyn.optonline.net) (Ping timeout)
[19:45:16] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Quit: Leaving)
[19:45:40] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[19:46:37] *** Joins: brendan (brendaneic@B0D36173.5F77D495.B41F1B80.IP)
[19:46:50] *** Joins: azita (Azita@4947820E.5F77D495.B41F1B80.IP)
[19:48:32] *** Joins: tjc (tjc@820240F3.FD5C31A1.284344F5.IP)
[19:48:32] *** ChanServ sets mode: +o tjc
[19:49:23] <maik_> rusti: 5
[19:49:24] -rusti- 5
[19:49:59] <maik_> rusti: enum Foo { Test = 1} enum Bar { Test = 1 }
[19:50:00] -rusti- pastebinned 10 lines of output: http://sprunge.us/PZVB
[19:50:12] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Quit: Leaving)
[19:50:33] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[19:50:49] <Sharp> Huh… pattern matching doesn't unify?
[19:50:51] <maik_> how would I resolve this issue? ^
[19:51:09] <maik_> do I really need to put each enum in a different name space?
[19:51:14] *** Joins: reedlepee (Mibbit@9B9315E1.A6025CA.1C37C358.IP)
[19:51:40] <benh> enum Foo { FooTest = 1 }  etc..
[19:54:57] <sfackler> maik_: you can do mod Foo { enum Foo { Test = 1 } }
[19:55:11] <sfackler> there's an issue filed to make that syntax less awkward: https://github.com/mozilla/rust/issues/10090
[19:55:38] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Ping timeout)
[19:55:55] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[19:55:55] *** ChanServ sets mode: +ao brson brson
[19:57:24] <maik_> sfackler, thanks
[19:57:45] <maik_> now I have to refactor ~30 enums :/
[19:59:16] *** Joins: heftig (heftig@moz-C04B16C1.dip0.t-ipconnect.de)
[20:00:05] <kud1ing> i am trying to make Rust cross-compile to iOS/arm. after some tweaking, i get:
[20:00:07] <kud1ing> src/rt/arch/arm/_context.S:9:7: error: unknown token in expression .align
[20:00:09] *** Quits: erickt (etryzelaar@BF60BF52.64BC77A3.7FC6A66E.IP) (Ping timeout)
[20:01:10] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Quit: Leaving)
[20:01:20] <kud1ing> anyone got an idea?
[20:01:57] *** bhearsum is now known as bhearsum|mtg
[20:01:57] <kud1ing> maybe clang does not speak Assembler
[20:02:42] *** Joins: erickt (etryzelaar@BF60BF52.64BC77A3.7FC6A66E.IP)
[20:02:44] *** Quits: exobit_ (textual@moz-E06F46F0.corp.bitshelter.com) (Quit: )
[20:02:51] <Sharp> LLVM does speak assembler, but this (looks like it) is hardcoded into Rust.
[20:02:59] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[20:03:28] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:03:29] *** Quits: tjc (tjc@820240F3.FD5C31A1.284344F5.IP) (Ping timeout)
[20:03:51] <kud1ing> hm
[20:03:53] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[20:03:54] *** Joins: tjc (tjc@820240F3.FD5C31A1.284344F5.IP)
[20:03:54] *** ChanServ sets mode: +o tjc
[20:04:04] *** Joins: KeyboardWarrior (kw@moz-A916EA18.dia.static.qwest.net)
[20:04:14] *** Joins: FreeFull (freefull@E8BE3E80.34BA17B9.CAF63861.IP)
[20:05:37] *** Quits: tjc (tjc@820240F3.FD5C31A1.284344F5.IP) (Ping timeout)
[20:05:49] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[20:05:53] *** nrc is now known as nrc|afk
[20:06:06] *** Joins: hjr3 (hradtke@moz-15FA5152.ph.ph.cox.net)
[20:06:27] *** Joins: cwmma (Mibbit@moz-468348D6.hsd1.ma.comcast.net)
[20:06:42] <cwmma> writting and reading files in 0.9
[20:06:58] <cwmma> is there any documentation/demos/etc around on that ?
[20:07:15] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Ping timeout)
[20:07:25] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Quit: Leaving)
[20:07:34] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[20:07:39] *** Joins: Blub\w (wry@moz-E6EFB77D.wireless.dyn.drei.com)
[20:09:09] <kmc> why is an @mut pointer two words? drop flag?
[20:09:16] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[20:09:24] *** Joins: tjc (tjc@820240F3.FD5C31A1.284344F5.IP)
[20:09:24] *** ChanServ sets mode: +o tjc
[20:09:53] <sfackler> dynamic freeze flag?
[20:10:24] <kmc> isn't that on the box itself?
[20:11:14] <kmc> oh, this is an @mut Trait, that makes sense then
[20:11:20] *** Joins: canhtak (canhtak@moz-1BED280F.wl.t.ulaval.ca)
[20:11:25] <kmc> ptr to object + ptr to vtable
[20:11:38] *** Quits: themgt (themgt@moz-83F07CDA.cm.vtr.net) (Ping timeout)
[20:11:56] *** Quits: hjr3 (hradtke@moz-15FA5152.ph.ph.cox.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[20:12:02] *** Quits: tjc (tjc@820240F3.FD5C31A1.284344F5.IP) (Ping timeout)
[20:12:28] *** Quits: kud1ing (Mibbit@moz-A2DD7270.pools.arcor-ip.net) (Quit: http://www.mibbit.com ajax IRC Client)
[20:14:06] *** Joins: bytbox (s@moz-75D4B5A8.wireless.umd.edu)
[20:15:06] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Quit: Leaving)
[20:16:04] *** Quits: erickt (etryzelaar@BF60BF52.64BC77A3.7FC6A66E.IP) (Ping timeout)
[20:16:24] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[20:16:45] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:16:53] *** Joins: tjc (tjc@820240F3.FD5C31A1.284344F5.IP)
[20:16:53] *** ChanServ sets mode: +o tjc
[20:17:00] *** Joins: hjr3 (hradtke@moz-15FA5152.ph.ph.cox.net)
[20:17:22] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[20:17:32] *** Quits: tjc (tjc@820240F3.FD5C31A1.284344F5.IP) (Quit: zzzzzzzzzz)
[20:18:00] *** Quits: bytbox (s@moz-75D4B5A8.wireless.umd.edu) (Ping timeout)
[20:18:26] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[20:20:33] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:20:53] <strcat> kmc: I don't think it's two words
[20:21:01] <strcat> oh nvm
[20:21:38] *** Quits: hjr3 (hradtke@moz-15FA5152.ph.ph.cox.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[20:22:31] *** Joins: pepper_chico (pepper_chi@552215C7.BBE04DBB.F546FA5F.IP)
[20:22:33] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[20:23:57] *** Quits: geoffhill (geoffhill@moz-244CF33A.amazon.com) (Ping timeout)
[20:25:13] *** Joins: geoffhill (geoffhill@moz-244CF33A.amazon.com)
[20:25:15] <Sharp> strcat: Thanks :)
[20:25:18] <kmc> rusti doesn't have #[feature(managed_boxes)] :/
[20:25:33] <McPherrin> strcat: ^
[20:26:29] <strcat> rusti is old
[20:26:33] <strcat> rust doesn't work anymore in the sandbox
[20:26:39] <strcat> haven't looked into it yet
[20:26:47] <strcat> probably wants another device
[20:27:04] <strcat> or it doesn't like being pid 1? who knows ;p
[20:27:44] *** Quits: geoffhill (geoffhill@moz-244CF33A.amazon.com) (Quit: geoffhill)
[20:28:13] *** Quits: pepijndevos (pepijndevo@9EACEF43.E50A3180.BCE47D84.IP) (Ping timeout)
[20:29:52] *** Quits: jvshahid (jvshahid@moz-53774307.nycm.ny.megapath.net) (Quit: leaving)
[20:29:55] *** Joins: jvshahid (jvshahid@moz-53774307.nycm.ny.megapath.net)
[20:31:02] *** Quits: zheng_li (zheng_li@moz-D6711E9E.xenplanet.org) (Ping timeout)
[20:31:36] *** Quits: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com) (Quit: Leaving)
[20:31:59] *** Quits: jvshahid (jvshahid@moz-53774307.nycm.ny.megapath.net) (Quit: leaving)
[20:32:01] *** Joins: jvshahid (jvshahid@moz-53774307.nycm.ny.megapath.net)
[20:32:14] *** Joins: pepijndevos (pepijndevo@9EACEF43.E50A3180.BCE47D84.IP)
[20:32:24] *** Quits: maik_ (maik@moz-35B8FD77.dip0.t-ipconnect.de) (Ping timeout)
[20:32:28] *** Joins: erickt (etryzelaar@BF60BF52.64BC77A3.7FC6A66E.IP)
[20:34:25] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[20:35:06] <TeXitoi> what are the possibilities to replace the old and dead Reader.each_line?
[20:35:19] *** Joins: maik_ (maik@moz-35B8FD77.dip0.t-ipconnect.de)
[20:36:12] <brson> acrichto: ^?
[20:36:47] <brson> TeXitoi: there's a read_line method on BufferedReader, but no each_line yet
[20:37:02] *** Quits: maik_ (maik@moz-35B8FD77.dip0.t-ipconnect.de) (Ping timeout)
[20:37:23] *** Joins: geoffhill (geoffhill@moz-244CF33A.amazon.com)
[20:39:17] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[20:40:29] *** Joins: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net)
[20:40:54] *** Quits: eddyb (eddy@FE23D96E.F33C1089.FB866788.IP) (Ping timeout)
[20:43:04] *** Joins: zheng_li (zheng_li@moz-D6711E9E.xenplanet.org)
[20:43:19] *** Quits: a__ (a__@moz-6F5CFC76.nycmny.fios.verizon.net) (Ping timeout)
[20:43:19] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:43:19] *** Quits: canhtak (canhtak@moz-1BED280F.wl.t.ulaval.ca) (Quit: canhtak)
[20:44:09] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[20:44:31] *** Quits: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com) (Ping timeout)
[20:45:11] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Quit: Leaving)
[20:46:46] *** Quits: onr99 (onur@DBB90BD8.70012127.53438D71.IP) (Ping timeout)
[20:46:49] *** Joins: canhtak (canhtak@moz-1BED280F.wl.t.ulaval.ca)
[20:47:00] *** Joins: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com)
[20:47:18] <TeXitoi> brson: thanks, is there an issue about that? The only thing I found is #4248 that talk about "Iterators and I/O" but with no specific issue
[20:47:35] <TeXitoi> I'd be happy to contribute to that
[20:48:09] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[20:51:11] <brson> TeXitoi: https://github.com/mozilla/rust/issues/6164
[20:51:28] <brson> TeXitoi: there are some mailing list posts about the design of the encoding subsystem too
[20:53:15] *** Quits: valenting (Thunderbir@8E5435E.7AF34920.FB866788.IP) (Ping timeout)
[20:53:50] <TeXitoi> brson: thanks
[20:56:16] <cwmma> in 0.8, anyone know how to cast a string to a float? std::float::from_str  doesn't work anymore
[20:56:29] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[20:56:50] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:56:54] *** Joins: skeet70 (skeet70@13023F39.C24BC101.B6E96A0D.IP)
[20:57:55] *** Quits: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP) (Ping timeout)
[20:58:31] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[20:58:42] *** Joins: eddyb9 (eddy@FE23D96E.F33C1089.FB866788.IP)
[20:59:31] *** Joins: themgt (themgt@moz-83F07CDA.cm.vtr.net)
[20:59:35] <strcat> rusti: let x: f64 = from_str("1.1").unwrap(); x
[20:59:36] *** Quits: themgt (themgt@moz-83F07CDA.cm.vtr.net) (Client exited)
[20:59:38] -rusti- 1.1f64
[21:00:20] *** Quits: Palmik (palmik@moz-11EA685D.pks.muni.cz) (Quit: Lost terminal)
[21:00:23] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[21:00:32] <aeqwa> cwmma: let number = match std::from_str::<f64>("3.33") { Some(value) => value, None => 0f64 };
[21:01:12] <aeqwa> strcat: that's better :)
[21:01:18] <cwmma> ahhh thank you
[21:01:19] <engla> there's a method for that, unwrap_or_zero()
[21:01:20] *** Joins: valenting (Thunderbir@8E5435E.7AF34920.FB866788.IP)
[21:01:24] <Florob> Say... is there a decent way to read lines from stdin, until EOF is received?
[21:02:08] <eddyb9> engla: unwrap_or(0f64) looks nicer. maybe not the 64 :P
[21:02:29] *** Quits: Ms2ger (Ms2ger@B7B2FF50.C60A97A6.F9FB0584.IP) (Quit: nn)
[21:03:16] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[21:03:19] <engla> rusti: from_str("3.33").unwrap_or(0f64)
[21:03:21] -rusti- 3.33f64
[21:03:41] <engla> hm. either that, or .unwrap_or_zero() with the type annotation somewhere
[21:03:48] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[21:04:34] <engla> Florob: well read_line  is implemented on BufferedReader in the new io, so it's halfway decent
[21:06:23] *** Quits: azita (Azita@4947820E.5F77D495.B41F1B80.IP) (Quit: azita)
[21:06:39] *** Joins: zws3mb (Mibbit@7D4DE93A.6925E1D4.DDE5D3F6.IP)
[21:07:25] *** Quits: johnmurray (jmurray@moz-299FF8FF.fw.nyc2.appnexus.com) (Quit: johnmurray)
[21:08:48] *** Quits: Kruppe (user@moz-253119B0.esg.uwaterloo.ca) (Ping timeout)
[21:10:27] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[21:10:27] *** ChanServ sets mode: +ao dherman dherman
[21:10:53] <engla> Florob: you can make an iterator like this. use std::rt::io; let r = io::buffered::BufferedReader::new(io::stdin()); std::iter::Unfold::new(r, |r| r.read_line())
[21:11:01] <engla> but it raises an end of file condition
[21:11:15] <engla> so now it's down at quartway decent I think
[21:11:23] <acrichto> TeXitoi: if you wrap your reader in a BufferedReader you can get read_line()
[21:11:32] *** Quits: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com) (Ping timeout)
[21:12:09] <acrichto> TeXitoi: although ah now that I read more I see that you already know about that
[21:12:31] <acrichto> Florob: you can wrap stdin in a BufferedReader and then call read_line() until it returns None
[21:12:36] *** Joins: tjc (tjc@moz-E7FCCD43.lightspeed.sntcca.sbcglobal.net)
[21:12:37] *** ChanServ sets mode: +o tjc
[21:13:02] <engla> I have a feeling acrichto it approaching backlog-zero :-)
[21:13:25] * acrichto can totally read
[21:13:38] <engla> I can totally type
[21:13:49] *** Quits: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[21:14:09] * eddyb9 can totally confused
[21:14:24] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[21:15:42] <sfackler> acrichto: how would you feel about a PR that moved read_line and read_until onto Reader? There are plenty of cases where reading a byte at a time isn't expensive that don't involve a BufferedReader sitting at the top of the reader chain
[21:15:59] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:16:00] *** Quits: eholk (eholk@moz-BA312F07.crest.iu.edu) (Quit: eholk)
[21:16:17] <sfackler> they also aren't currently defined for BufferedStream
[21:16:37] *** Joins: maik_ (maik@moz-35B8FD77.dip0.t-ipconnect.de)
[21:16:37] <acrichto> sfackler: hm I think I would be ok with that, I mostly don't want to promote mixing strings with streams until we have our encoding story figured out first
[21:16:43] <cmr> I'm not okay with it.
[21:16:48] <acrichto> I only added read_line() to be able to port everyone away from std::io
[21:16:58] <cmr> read_line requires buffering, and that belongs on something with the name Buffered on it.
[21:17:07] *** Quits: brendan (brendaneic@B0D36173.5F77D495.B41F1B80.IP) (Quit: brendan)
[21:17:18] <sfackler> cmr: What if I have a MemReader
[21:17:22] *** Joins: brendan (brendaneic@B0D36173.5F77D495.B41F1B80.IP)
[21:17:30] <sfackler> or a SomethingReader<BufferedReader<Foo>>
[21:17:52] <cmr> sfackler: Good point
[21:18:02] <cmr> It should move into a trait that isn't Reader
[21:18:17] <jeaye> We need foo.read<T>(&mut my_T)
[21:19:00] <jeaye> One of the nastiest parts of Rust's stdlib right now, in my experience, is file IO. It just makes me _really_ miss C++ streams.
[21:19:07] <jeaye> Especially since read_char was removed. :(
[21:19:17] <strcat> read_char was memory unsafe ;\
[21:19:39] <jeaye> char::from_u32(fio.read_byte() as u32).expect("Invalid char") kind of sucks.
[21:19:39] <strcat> it went to huge lengths to avoid using Option
[21:19:40] *** Quits: fabiand_ (fabiand@moz-46EC10BD.adsl.alicedsl.de) (Quit: Verlassend)
[21:19:54] <strcat> jeaye: that's not reading a char
[21:20:07] <acrichto> jeaye: hopefully soon though! the first major hurdle was to remove all of std::io, but thankfully that's done now
[21:20:28] <strcat> jeaye: you could do fio.read_byte() as char if you wanted that, but it's really not reading a char
[21:20:40] <strcat> it's reading a byte and casting it as a code point, not decoding UTF-8
[21:20:45] <jeaye> Wait... I can use 'as char'?
[21:20:53] <jeaye> I thought that wasn't allowed for u8
[21:20:54] <strcat> jeaye: sure but it doesn't work as you think it does
[21:21:00] <strcat> it is allowed for u8
[21:21:06] <jeaye> fuck
[21:21:19] <strcat> you can't decode UTF-8 by casting bytes as code point values
[21:21:22] <jeaye> I wrote some nasty code using from_u32 yesterday because of it.
[21:21:30] <strcat> you will only end up with code points from 0 to 255
[21:21:34] *** Joins: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP)
[21:21:45] <strcat> and that's not how code points are encoded
[21:22:00] <jeaye> fio >> my_char; // :D :D
[21:22:11] <strcat> jeaye: not really
[21:22:22] <Florob> acrichto, actually... you can't. Because once EOF is encountered that raises a condition :/
[21:22:27] <strcat> at least if you mean built-in
[21:22:34] *** Quits: erickt (etryzelaar@BF60BF52.64BC77A3.7FC6A66E.IP) (Ping timeout)
[21:22:42] <engla> Florob: you can trap the EOF condition
[21:22:47] <engla> Florob: rather, you should.
[21:23:16] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[21:23:20] *** jorendorff_away is now known as jorendorff
[21:23:23] <acrichto> Florob: conditions are still a little hairy around the edges now
[21:23:35] <Florob> engla, that's the part about the "decent" way. Getting stdio, wrapping that into a buffered reader, and then trapping a condition around that is a bit... verbose
[21:23:43] <acrichto> they're on the table for removal, but it's not 100% decided just yet
[21:23:53] <engla> Florob: that's why I adjusted from halfway to quartway decent!
[21:23:59] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[21:24:14] <jeaye> Some very terrible copy-pasta crap to read words: https://github.com/jeaye/q3/blob/master/src/client/md5/model/model.rs#L84
[21:24:23] <jeaye> Was still crap, but less smelly with read_char
[21:24:48] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Ping timeout)
[21:24:54] <engla> oi yeah
[21:25:00] <strcat> jeaye: it's not reading characters though...
[21:25:11] <engla> there exists code floating around that turns a byte iterator into a char iterator etc
[21:25:15] <strcat> you have only correct ASCII support and anything else is broken
[21:25:27] * strcat shrugs
[21:25:39] <jeaye> strcat: Yeah, that's all I need though.
[21:25:49] <strcat> jeaye: so why use 'char' ?
[21:25:54] <strcat> char is a unicode code point
[21:25:56] <jeaye> It's a model file format, not internationalized text.
[21:25:57] <engla> jeaye: at least use the byte iterator, I think
[21:26:01] <strcat> jeaye: so use u8 and [u8]
[21:26:04] <jeaye> strcat: Because ~str wants it.
[21:26:08] <strcat> jeaye: you don't want ~str
[21:26:12] <strcat> you want ~[u8]
[21:26:20] <strcat> ~str is ~[u8] with an invariant that it's valid UTF-8
[21:26:33] <strcat> rusti: bytes!("foo")
[21:26:34] -rusti- &[102u8, 111u8, 111u8]
[21:26:35] <jeaye> Can I do comparisons with string literals and ~[u8]?
[21:26:45] <strcat> jeaye: you don't want string literals
[21:26:48] <strcat> you only want [u8]
[21:26:55] <strcat> we have bytes! for making [u8] literals
[21:27:03] <jeaye> I see.
[21:27:12] <strcat> it'd be nice if we allowed b"foo" but what we have does work
[21:27:17] <jeaye> That's a different way of thinking.
[21:27:20] *** Quits: edorian (Mibbit@moz-8F89148C.dynamic.qsc.de) (Quit: http://www.mibbit.com ajax IRC Client)
[21:27:38] <jeaye> So I could use ~[u8] and compare against bytes!("something")
[21:27:41] <jeaye> hmm
[21:27:46] *** Joins: CarpNet (Alasdair@moz-25C796BC.cable.virginm.net)
[21:27:52] <jeaye> That could well use a rewrite then.
[21:28:01] <jeaye> 'cause it's shit now.
[21:28:55] <strcat> jeaye: pushing a char to a ~str runs a UTF-8 encoder
[21:28:58] <Sharp> What's wrong with it?  For string comparison you have to iterate through the string anyway so the UTF-8 speed disadvantage disappears.
[21:29:20] <strcat> Sharp: the issue with is that he's reading bytes, casting them to char incorrectly and encoding them with a UTF-8 encoder
[21:29:27] <strcat> to take advantage of sugar we also have for [u8]
[21:29:42] <Sharp> Oh.  I see.
[21:29:48] <strcat> if you have
[21:29:53] <strcat> [byte, byte, byte]
[21:30:06] <strcat> I really doubt they represent low-range unicode code points
[21:30:09] <strcat> that's not how UTF-8 works
[21:31:45] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Client exited)
[21:31:54] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Quit: Leaving)
[21:33:58] *** Joins: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP)
[21:33:58] *** ChanServ sets mode: +o jdm
[21:36:18] *** Quits: bjz (textual@B398BE78.F804C29E.D35A31DF.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:37:06] <jeaye> strcat: This could end up being much better. Thanks for the explanation.
[21:38:26] *** Quits: g3orge (g3orge@moz-CE3A1669.access.hol.gr) (Ping timeout)
[21:38:43] *** Joins: g3orge (g3orge@moz-CE3A1669.access.hol.gr)
[21:40:05] *** Joins: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com)
[21:41:33] *** Joins: bjz (textual@B398BE78.F804C29E.D35A31DF.IP)
[21:42:05] *** Joins: dbaupp (Thunderbir@moz-B3C9E9E8.lns20.syd6.internode.on.net)
[21:43:12] *** Joins: tikue_ (tikue_star@94F1ACEF.F3E8A984.689607DE.IP)
[21:43:21] <acrichto> sfackler: ok I'm cool with read_line moving to Reader, and I think that it's also ok to create a read_char interpreting the stream as utf8
[21:44:55] *** nrc|afk is now known as nrc
[21:45:53] <jeaye> If we get a MemoryReader, it should have a read<T>(&mut T)
[21:46:41] <jeaye> Well, read<T>() -> Option<T> would be more realistic unless we're returning Result.
[21:47:15] <cmr> jeaye: how do you know of the content of the reader at that point is a valid T?
[21:47:20] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[21:47:24] *** Quits: KeyboardWarrior (kw@moz-A916EA18.dia.static.qwest.net) (Ping timeout)
[21:47:57] *** Joins: KeyboardWarrior (kw@moz-A916EA18.dia.static.qwest.net)
[21:47:59] *** Joins: jviereck (Adium@moz-E143157D.dip0.t-ipconnect.de)
[21:48:33] <jeaye> cmr: It's a memory reader, you can't. It's unsafe memory file IO. Doesn't mean it shouldn't be provided.
[21:48:48] <cmr> so unsafe fn read :)
[21:48:59] <strcat> you can implement totally safe memory mapped I/O
[21:50:43] *** Quits: jvns (quassel@87D98E32.4046EB22.428F94DD.IP) (Ping timeout)
[21:50:56] *** Quits: tikue_ (tikue_star@94F1ACEF.F3E8A984.689607DE.IP) (Ping timeout)
[21:52:08] *** Joins: tikue_ (tikue_star@94F1ACEF.F3E8A984.689607DE.IP)
[21:52:12] <cmr> strcat: reading arbitrary values of generic type?
[21:52:31] <strcat> sure
[21:52:36] <cmr> how
[21:52:37] <strcat> as long as the type implements a way to read it from memory ;p
[21:52:42] <cmr> well pfft
[21:52:55] *** Joins: jvns (quassel@87D98E32.4046EB22.428F94DD.IP)
[21:53:05] <cmr> that's no better than extra::serialize
[21:53:25] <strcat> you can have zero-copy deserialization
[21:53:26] <strcat> return &T
[21:53:49] <strcat> assuming it is truly just some bytes where endian doesn't matter and so on ;p
[21:53:57] <strcat> (UTF-8 strings!)
[21:54:36] <strcat> or if it's platform dependent serialization... I guess
[21:56:25] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[21:57:41] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[21:58:01] *** Quits: bjz (textual@B398BE78.F804C29E.D35A31DF.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:59:05] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[22:01:31] *** Joins: skade (skade@moz-A89F791B.pools.arcor-ip.net)
[22:01:39] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[22:01:58] *** Quits: Voomer (Voomer@moz-CC05FF5E.hsd1.wa.comcast.net) (Ping timeout)
[22:02:04] *** Joins: Voomer (Voomer@moz-CC05FF5E.hsd1.wa.comcast.net)
[22:03:32] *** Quits: skade (skade@moz-A89F791B.pools.arcor-ip.net) (Quit: Textual IRC Client: www.textualapp.com)
[22:03:55] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Ping timeout)
[22:04:03] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Quit: buildmaster reconfigured: bot disconnecting)
[22:04:41] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Input/output error)
[22:05:03] *** Joins: mib_d89ztz (Mibbit@moz-762E6763.protectedgroup.com)
[22:05:09] *** Joins: pcwalton (pcwalton@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[22:05:10] *** ChanServ sets mode: +ao pcwalton pcwalton
[22:05:11] *** Quits: mib_d89ztz (Mibbit@moz-762E6763.protectedgroup.com) (User has been banned from Mozilla (no spamming here))
[22:06:39] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[22:08:19] *** Quits: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com) (Client exited)
[22:08:20] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[22:09:25] *** Quits: maik_ (maik@moz-35B8FD77.dip0.t-ipconnect.de) (Ping timeout)
[22:09:42] *** Quits: tikue_ (tikue_star@94F1ACEF.F3E8A984.689607DE.IP) (Client exited)
[22:10:17] *** Quits: g3orge (g3orge@moz-CE3A1669.access.hol.gr) (Quit: leaving)
[22:10:59] *** Quits: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com) (Ping timeout)
[22:12:34] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[22:12:35] *** Quits: jvns (quassel@87D98E32.4046EB22.428F94DD.IP) (Ping timeout)
[22:15:35] *** Quits: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP) (Ping timeout)
[22:16:03] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[22:16:18] *** Quits: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP) (Ping timeout)
[22:16:37] *** Joins: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP)
[22:16:37] *** ChanServ sets mode: +o jdm
[22:16:39] <zws3mb> That feeling when you make a rust program segfault because you have to use libc stuff: *sigh*
[22:17:25] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[22:19:17] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[22:20:38] *** Quits: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP) (Input/output error)
[22:20:41] *** Joins: orshem (orshem@E54CCADA.B9DE554A.EB50AD2C.IP)
[22:20:44] *** Joins: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP)
[22:20:44] *** ChanServ sets mode: +o jdm
[22:20:45] <steffenomak> lol
[22:21:06] *** Quits: Blub\w (wry@moz-E6EFB77D.wireless.dyn.drei.com) (Quit: bb2m)
[22:21:53] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[22:22:39] *** Joins: Yeri (jasonjasmi@BA0CD88C.B2E00889.31F69D78.IP)
[22:23:04] *** kimundi is now known as zz_kimundi
[22:23:40] *** Quits: jvshahid (jvshahid@moz-53774307.nycm.ny.megapath.net) (Ping timeout)
[22:24:01] <steffenomak> Does someone know how to get the raw pointer from a struct that is a pointer itself? I'm trying just that and it gives me 0x5 when I print the pointer value
[22:24:56] <strcat> access the field? I don't quite understand
[22:25:04] <orshem> how do i declare an bounded function pointer as an argument to a function?
[22:25:11] <orshem> fn test(t: &fn<T: TotalOrd>(&mut [T])) does not appear to work
[22:25:35] *** Quits: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: ZZZzzz…)
[22:25:40] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[22:25:42] <strcat> orshem: the bound goes on 'test'
[22:25:59] <strcat> fn test<T: TotalOrd>(f: &fn(&mut [T])) ?
[22:26:41] <orshem> strcat, thanks! 
[22:26:52] *** Quits: Jackneill (Jackneill@moz-79F8902B.pool.digikabel.hu) (Input/output error)
[22:27:12] <steffenomak> strcat: yes, I need to access a field in a struct that is a pointer, and the field itself is also a pointer
[22:28:09] <cmr> steffenomak: Structs can't be pointers. They are always values. What do you actually mean? Do you have code?
[22:28:20] <strcat> rusti: struct Foo { ptr: ~int } let x = Foo { ptr: ~5 }; let y = &x; y.ptr
[22:28:23] -rusti- pastebinned 7 lines of output: http://sprunge.us/GEie
[22:28:34] <strcat> er
[22:28:41] <strcat> bad example ;p
[22:28:48] <strcat> rusti: struct Foo { ptr: ~int } let x = Foo { ptr: ~5 }; let y = &x; y.ptr.clone()
[22:28:50] -rusti- ~5
[22:28:59] <strcat> I don't really understand the issue
[22:29:21] <strcat> rusti: struct Foo { ptr: ~int } let x = Foo { ptr: ~5 }; let y = &x; *y.ptr
[22:29:21] -rusti- 5
[22:29:29] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[22:29:55] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[22:30:26] *** Joins: yghannam (yghannam@moz-C5BCCF4E.lightspeed.austtx.sbcglobal.net)
[22:31:06] <steffenomak> cmr: http://pastebin.com/kfudYV1w I need to pass format from SDL_Surface, and I only have a pointer to SDL_Surface in a wrapper struct
[22:31:27] *** jorendorff is now known as jorendorff_away
[22:31:33] <cmr> steffenomak: A reference to format, or the value of format? (That value is a pointer)
[22:32:02] *** Quits: ianj (ianjneu@moz-7140CF01.ccs.neu.edu) (Quit: leaving)
[22:32:24] <steffenomak> cmr: I need the addess of format, so the pointer of it
[22:33:48] <cmr> steffenomak: you have pointers to, not pointers of. I'm asking if you want a pointer to the field in the struct, or the value of the field. The former is &s.format, the latter is just s.format
[22:34:10] *** Joins: jvns (quassel@87D98E32.4046EB22.428F94DD.IP)
[22:35:09] <steffenomak> cmr: I need the value of the field.
[22:35:35] *** Quits: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net) (Ping timeout)
[22:36:08] <strcat> steffenomak: access the field?
[22:36:11] <steffenomak> cmr: I am trying with something like (*self.raw).format where slef i a Surface struct and raw a pointer of SDL_Surface
[22:36:40] <steffenomak> strcat: Yes, of SDL_Surface to get the value of format int SDL_Surface
[22:37:05] <strcat> but you know how to access a struct field so I don't know what you're asking
[22:37:12] <cmr> rusti: struct Foo { x: *int } struct Bar { raw: Foo } let x = Foo { x: 123 as *int }; let y = Bar { raw : x }; y.raw.x
[22:37:13] -rusti- (0x7b as *())
[22:37:23] <cmr> steffenomak: what's the problem?
[22:39:34] <steffenomak> cmr: I get a segfault at the location where i need a value of format. When I print with println(format("{:p}", (*self.raw).format) I get 0x05 all the time.
[22:39:44] *** Quits: tjc (tjc@moz-E7FCCD43.lightspeed.sntcca.sbcglobal.net) (Quit: zzzzzzzzzz)
[22:40:04] <dbaupp> steffenomak: is self.raw non-null?
[22:40:23] <steffenomak> dbaupp: Yes.
[22:40:31] <strcat> steffenomak: well if you've made an invalid ptr, the only thing we can say is to not make an invalid ptr
[22:40:51] <strcat> if you use unsafe code, memory safety is up to you
[22:40:57] <steffenomak> strcat: But the pointer isn't made by me but sdl
[22:41:19] <steffenomak> strcat: Yes I know, but I tried equivalen code in c and that worked, but to clarify
[22:41:30] *** Quits: valenting (Thunderbir@8E5435E.7AF34920.FB866788.IP) (Ping timeout)
[22:41:30] *** Quits: alonlevy (alon@moz-B0E66DB7.static.bezeqint.net) (Ping timeout)
[22:41:37] <strcat> maybe one of your FFI type definitions is wrong
[22:41:51] *** Quits: jvns (quassel@87D98E32.4046EB22.428F94DD.IP) (Ping timeout)
[22:42:06] *** bhearsum|mtg is now known as bhearsum|afk
[22:42:10] <steffenomak> the structure looks like this: struct Foo {raw: *Bar} struct Bar {something: *Format}
[22:42:42] <steffenomak> and I need the value of something through Foo
[22:43:05] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[22:43:08] <strcat> the problem isn't how you're accessing it if it's invalid, the mistake is elsewhere
[22:43:24] <strcat> an FFI type definition is wrong, or you're breaking one of the invariants the SDL API requires
[22:43:24] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[22:43:47] <steffenomak> so I wrote somethink like Foo.raw.something and the compiler didn't let that so I tried (*Foo.raw).something
[22:43:57] *** Quits: jviereck (Adium@moz-E143157D.dip0.t-ipconnect.de) (Quit: Leaving.)
[22:44:25] *** Quits: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP) (Quit: lmandel)
[22:44:27] <steffenomak> ok I'll try to find it, the code that is responsible isn't that complex.
[22:45:14] *** Quits: simon (simon@moz-FD4ADBC6.cable.teksavvy.com) (Quit: look at the time)
[22:45:25] <steffenomak> ... oh my...
[22:45:31] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[22:46:25] <steffenomak> i found it when I dubble checked SDL_Surface... In the docks they have a grayed out field of the first field...
[22:46:50] *** Quits: skeet70 (skeet70@13023F39.C24BC101.B6E96A0D.IP) (Ping timeout)
[22:46:50] <strcat> you probably want to look in the headers rather than documentation
[22:46:51] <steffenomak> My bad, sorry for inconviniencing you all. And than you for the help.
[22:46:53] <cmr> steffenomak: use rust-bindgen on the headers.
[22:46:58] *** Joins: Jesin (Jessin_@moz-52A42BDD.cc.lehigh.edu)
[22:47:08] <strcat> (or use existing bindings like rust-sdl)
[22:47:19] <steffenomak> cmr: Whats that?
[22:47:36] <cmr> steffenomak: https://github.com/crabtw/rust-bindgen
[22:48:55] *** Joins: skeet70 (skeet70@13023F39.C24BC101.B6E96A0D.IP)
[22:49:00] <steffenomak> strcat: I could, but I didn't like it how I had to use it, and when I tried to fix it, it broke. I later found out why but then I was already so far along my own little path, and it have helped me majorly in lerning how to write bindings in rust.
[22:49:57] <Thiez> hmmn, I have a question
[22:50:15] <Thiez> destructors can have side effects, such as printing strings and stuff
[22:50:35] <Thiez> but when I create an object and assign to _, it appears the destructor doesn't run
[22:50:39] <Thiez> is this intentional?
[22:50:42] <strcat> Thiez: known bug
[22:50:43] <strcat> no
[22:50:48] <Thiez> ah, ok
[22:50:54] <strcat> _ (Ignore destination) doesn't work
[22:51:03] <Thiez> shame, that :(
[22:51:09] <strcat> _a will work
[22:51:19] <strcat> but it frees at the end of the scope the usual way
[22:51:25] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[22:51:40] <Thiez> would be cool if assigning to _ triggered a destruction
[22:51:46] <strcat> it's supposed to
[22:51:53] <strcat> just doesn't work
[22:52:14] <cmr> Thiez: solution: fn destroy<T>(_: T) {}
[22:52:55] <strcat> acrichto: what weird thing is rust doing to stdin? ;\
[22:53:00] <Thiez> cmr: yes I know that one :) I also once hacked the compiler to enable just calling 'drop' on types that implement it :p
[22:53:27] <strcat> I don't think whatever it's doing is valid :(
[22:53:35] *** Joins: tjc (tjc@820240F3.FD5C31A1.284344F5.IP)
[22:53:40] <strcat> rusti: 2
[22:53:46] -rusti- timeout triggered!
[22:53:50] <strcat> meh, rusti can just use rust-core for now
[22:53:54] <acrichto> strcat: it's attempting to open it as a tty stream first, I'm not entirely sure what uv does on its end of things
[22:54:10] <strcat> it doesn't work in my sandbox, it infinite loops :(
[22:54:31] <strcat> need to strace it more to figure out exactly why
[22:54:37] * pcmattman wonders if it's missing an isatty somewhere
[22:55:09] *** Quits: yghannam (yghannam@moz-C5BCCF4E.lightspeed.austtx.sbcglobal.net) (Ping timeout)
[22:55:18] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[22:55:36] *** Quits: brendan (brendaneic@B0D36173.5F77D495.B41F1B80.IP) (Quit: brendan)
[22:56:52] <pcwalton> brson: RunRemote is incompatible with procs
[22:56:56] <pcwalton> because procs are once fns
[22:56:58] <pcwalton> what should I do?
[22:57:21] *** Quits: tjc (tjc@820240F3.FD5C31A1.284344F5.IP) (Ping timeout)
[22:57:32] *** Quits: reedlepee (Mibbit@9B9315E1.A6025CA.1C37C358.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:57:51] <acrichto> pcwalton: you mean remote callbacks?
[22:57:57] <pcwalton> whatever RunRemote in rt/basic.rs is
[22:58:01] <pcwalton> it is incompatible with procs
[22:58:04] <pcwalton> RemoveRemote is
[22:58:06] <pcwalton> is compatible
[22:58:09] <strcat> it dead lcks on futex
[22:58:11] <strcat> locks*
[22:58:19] <acrichto> pcwalton: in general the RemoteCallback isn't compatible
[22:58:29] * pcwalton thought this would be a simple change :(
[22:58:31] <strcat> hm
[22:58:32] <acrichto> b/c it's an owned function that must ge called many times
[22:58:41] <pcwalton> how do we plan to fix that?
[22:58:47] <pcwalton> trait objects I guess?
[22:59:18] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[22:59:23] <acrichto> hmm, brson would know more about what the true purpose of it is
[22:59:24] <pcwalton> also MockReader really needs to be a trait object
[22:59:32] <pcwalton> it's not proc-compatible at the moment
[22:59:32] <acrichto> mock reader can probably just die
[22:59:34] <strcat> dynamic linkers are so silly
[22:59:37] *** Quits: JanC__ (janc@moz-7B192D41.dsl.scarlet.be) (Connection reset by peer)
[22:59:38] <acrichto> I don't think it's used anywhere
[22:59:42] <pcwalton> it's used in a few tests
[22:59:42] <strcat> they make 2000 mprotect calls >.<
[23:00:09] <pcwalton> acrichto: but it seems superfluous
[23:00:11] <acrichto> pcwalton: currently the only remote callback ever made is an 'extern "Rust" fn', so as a transitionary thing it could move to that
[23:00:13] <pcwalton> just imll Reader and Writer
[23:00:18] <pcwalton> aha
[23:00:22] <pcwalton> I'll rm the mocks first
[23:00:44] <acrichto> pcwalton: they may also be able to become stack closures
[23:00:57] <acrichto> but not certainly
[23:01:11] *** Joins: tjc (tjc@67ED1846.5A282F70.284344F5.IP)
[23:01:11] *** ChanServ sets mode: +o tjc
[23:01:57] *** Joins: JanC (janc@moz-7B192D41.dsl.scarlet.be)
[23:02:10] *** Quits: CarpNet (Alasdair@moz-25C796BC.cable.virginm.net) (Quit: Leaving)
[23:02:53] *** Quits: tjc (tjc@67ED1846.5A282F70.284344F5.IP) (Ping timeout)
[23:03:14] <acrichto> pcwalton: almost all of the uv bindings are going to have to change
[23:03:17] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[23:03:20] <pcwalton> what? :(
[23:03:20] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[23:03:29] <acrichto> pcwalton: they currently all take ~fn(), but I think that many of them are called more than once
[23:03:34] <pcwalton> I didn't see any errors
[23:03:38] <pcwalton> when I batch renamed them to proc
[23:03:40] <acrichto> it's all unsafe code
[23:03:43] <pcwalton> oh
[23:03:45] <pcwalton> well I don't care then
[23:03:45] <acrichto> it's all ffi-related
[23:03:47] <pcwalton> I mean, I *care*
[23:03:49] <pcwalton> but I don't *care* care
[23:03:56] <pcwalton> I want this change to land, dammit ;)
[23:04:07] <acrichto> I guess if you see segfaults that may be a first place to look
[23:04:15] <pcwalton> it won't segfault
[23:04:19] <pcwalton> because it won't be moving out of an upvar
[23:04:21] <pcwalton> since it wasn't before
[23:04:24] <acrichto> doesn't it free the environment after being called?
[23:04:37] <pcwalton> hmm
[23:04:41] <pcwalton> not sure
[23:04:54] <acrichto> b/c proc == ~once fn, right?
[23:04:55] <pcwalton> maybe I just won't fix this yet
[23:04:56] <pcwalton> yes
[23:05:05] *** Quits: steffenomak (steffenoma@moz-FB0A4BEB.student.uu.se) (Ping timeout)
[23:05:05] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[23:05:12] <acrichto> so the function itself must free the environment?
[23:05:26] *** Quits: nik_ (nik@moz-F2A7C020.pool.mediaways.net) (Ping timeout)
[23:05:27] <pcwalton> I thought that it just zeroed out moved upvars
[23:05:27] <acrichto> or maybe the cleanup glue when ~once fn is dropped...
[23:05:28] <pcwalton> but I'm not sure
[23:05:28] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[23:05:29] <pcwalton> yeah
[23:05:32] <pcwalton> the cleanup glue does it
[23:05:34] <pcwalton> or I would think anyway
[23:05:47] <strcat> rusti: 2
[23:05:52] -rusti- timeout triggered!
[23:05:55] <acrichto> this may h ave a very high chance of making everything related to uv unsound...
[23:06:19] *** Quits: orshem (orshem@E54CCADA.B9DE554A.EB50AD2C.IP) (Ping timeout)
[23:06:21] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[23:06:40] *** Quits: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[23:08:06] *** Joins: tjc (tjc@67ED1846.5A282F70.284344F5.IP)
[23:08:06] *** ChanServ sets mode: +o tjc
[23:09:50] *** Quits: tjc (tjc@67ED1846.5A282F70.284344F5.IP) (Ping timeout)
[23:10:24] <strcat> it'd be nice if libuv checked exit codes of syscalls ;p
[23:10:36] <strcat> really can't figure out what is wrong
[23:10:46] <strcat> it keeps on going long after an error is returned
[23:10:54] *** Joins: tjc (tjc@67ED1846.5A282F70.284344F5.IP)
[23:10:54] *** ChanServ sets mode: +o tjc
[23:11:14] <strcat> rusti: 2
[23:11:19] -rusti- timeout triggered!
[23:11:47] <jdm> 2 is obviously transcendental
[23:11:50] <jdm> er
[23:11:52] <jdm> irrational
[23:12:16] *** Joins: tautologico (shung@703660AA.CFE755C8.C27E1635.IP)
[23:12:35] *** Quits: tjc (tjc@67ED1846.5A282F70.284344F5.IP) (Ping timeout)
[23:12:40] <brson> pcwalton: i think all the multiply-used callbacks in the runtime need to be converted to traits
[23:12:54] <pcwalton> brson: do you have a list?
[23:13:13] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[23:14:37] <strcat> acrichto: did subprocess stuff change in the past week too?
[23:14:49] <acrichto> strcat: only in that it's using uv instead of native stuff now
[23:15:10] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[23:15:35] * strcat needs a time machine to kill whoever invented dynamic linking before the act
[23:15:59] <strcat> ld pollutes everything with 200 lseek/mprotect/mmap calls
[23:16:09] *** Quits: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP) (Ping timeout)
[23:16:45] *** Quits: zws3mb (Mibbit@7D4DE93A.6925E1D4.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[23:16:52] <brson> pcwalton: looking
[23:17:29] <strcat> [pid 14695] ioctl(2, SNDCTL_TMR_TIMEBASE or SNDRV_TIMER_IOCTL_NEXT_DEVICE or TCGETS, 0x7fffb0347710) = -1 ENOTTY (Inappropriate ioctl for device)
[23:17:32] <strcat> and so on
[23:17:48] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[23:17:48] *** ChanServ sets mode: +ao dherman dherman
[23:18:49] <dbaupp> strcat: grep -v them away?
[23:19:19] *** Joins: tjc (tjc@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[23:19:19] *** ChanServ sets mode: +o tjc
[23:19:51] *** Quits: azakai_ (alon@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[23:20:03] *** Quits: pepper_chico (pepper_chi@552215C7.BBE04DBB.F546FA5F.IP) (Quit: Ex-Chat)
[23:20:26] *** Quits: ksf (ksf@moz-6D9B434E.adsl.hansenet.de) (Client exited)
[23:21:02] *** Joins: azakai_ (alon@moz-BBE3ABD.mv.mozilla.com)
[23:21:06] *** Quits: skeet70 (skeet70@13023F39.C24BC101.B6E96A0D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:21:45] *** Quits: pyrac (pyrac@moz-CB14E320.w92-162.abo.wanadoo.fr) (Quit: pyrac)
[23:21:54] *** Joins: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com)
[23:23:17] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[23:23:27] * pcwalton wonders, if we had precise stack maps like Apple is doing, could we do precise per-task memory reporting
[23:23:33] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[23:23:35] <pcwalton> including exchange heap
[23:23:51] <pcwalton> assuming you can associate a visitable tydesc with a stack/reg location at each safe point....
[23:24:08] <strcat> exchange allocs don't have tydescs anymore though
[23:24:15] <pcwalton> strcat: that's why you put 'em on the side
[23:24:17] *** Quits: azakai_ (alon@moz-BBE3ABD.mv.mozilla.com) (Connection reset by peer)
[23:24:26] <pcwalton> associate them with the stack map location.
[23:24:33] <strcat> ah
[23:24:41] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[23:24:49] <strcat> and when they're in @ there is a tydesc
[23:25:01] <strcat> pcwalton: what about something like Rc?
[23:25:12] <pcwalton> strcat: it should be implementing Visit anyway
[23:25:19] <strcat> hm?
[23:25:22] <pcwalton> well, I mean
[23:25:31] <pcwalton> we should have a way for custom smart pointers to be introspectable
[23:25:34] <pcwalton> reflectable
[23:25:49] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[23:27:16] <strcat> rusti: 2
[23:27:22] -rusti- timeout triggered!
[23:27:58] * strcat sighs
[23:28:51] <strcat> pcwalton: so we could use the stack map support they are adding to LLVM? what exactly do they need it for?
[23:29:11] <pcwalton> strcat: implementing a JavaScript JIT in LLVM ;)
[23:29:23] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[23:29:31] <pcwalton> their JS JIT has non moving GC though
[23:29:32] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[23:29:39] <pcwalton> so they aren't adding the support that we'd want for it, boo
[23:29:40] <pcwalton> still
[23:29:44] <pcwalton> I'll take what I can get!
[23:29:58] <strcat> that sounds like it would be unbearably slow (a JS JIT)
[23:30:45] <pcwalton> they're only going to use it for super super hot JS functions
[23:31:04] <pcwalton> like benchmarks ;P
[23:31:06] <strcat> ah so they'll already be outputting specialized bytecode for it
[23:31:13] <pcwalton> (which isn't a jab at them by any means)
[23:31:14] *** Joins: skeet70 (skeet70@moz-496E571A.msu.montana.edu)
[23:31:37] <pcwalton> (IonMonkey is practically only used for benchmarks and demos based on our statistics…it's depressing)
[23:31:42] <strcat> afaik MCJIT is just some fancy linker magic to do AOT compilation of a whole module and have usable code in-memory
[23:32:09] *** Quits: canhtak (canhtak@moz-1BED280F.wl.t.ulaval.ca) (Quit: canhtak)
[23:32:49] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Quit: Sharp)
[23:34:03] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Ping timeout)
[23:34:10] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[23:34:19] <strcat> pcwalton: btw I don't think a concurrent hash table would want a RWArc, just an UnsafeArc + custom locking
[23:34:24] <brson> exit
[23:34:26] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[23:34:29] <pcwalton> strcat: right
[23:34:30] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[23:34:30] *** ChanServ sets mode: +ao brson brson
[23:34:58] <brson> pcwalton: here's my best guess about which rt/uv ~fns need to be called more than once https://gist.github.com/brson/7242129
[23:35:15] <pcwalton> for servo string interning we're thinking about http://da-data.blogspot.kr/2013/03/optimistic-cuckoo-hashing-for.html
[23:35:21] <strcat> acrichto: yeah it's not from a syscall that's blacklisted
[23:36:06] *** Quits: sweet_kid_ (Upasana@F685FB81.839A33D6.388CF16F.IP) (Quit: Leaving)
[23:36:19] *** Joins: canhtak (canhtak@moz-1BED280F.wl.t.ulaval.ca)
[23:36:32] <strcat> not from namespaces...
[23:38:47] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[23:42:53] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[23:43:02] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[23:43:18] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[23:44:23] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[23:44:58] *** Joins: nkoep (nik@moz-5DB02B84.pool.mediaways.net)
[23:47:06] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[23:48:11] <nmatsakis> ChrisMorgan: I took a look at your branch
[23:48:24] <nmatsakis> ChrisMorgan: unfortunately, without a PR, I can't seem to add comments in github?
[23:48:46] <nmatsakis> ChrisMorgan: I'll need to read more, but one thing I noted was that the code for binary operators was basically duplicated for the augmented case; we'll want to fix that
[23:55:52] *** Quits: skeet70 (skeet70@moz-496E571A.msu.montana.edu) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:56:19] *** Joins: skeet70 (skeet70@moz-496E571A.msu.montana.edu)
[23:56:49] *** Joins: a__ (a__@moz-56DB9895.nycmny.fios.verizon.net)
[23:57:54] *** jorendorff_away is now known as jorendorff
[23:59:37] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
