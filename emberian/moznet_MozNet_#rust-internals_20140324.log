[00:00:00] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:07:41] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Input/output error)
[00:08:16] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[00:09:57] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[00:17:04] *** Joins: lpy (lpy@186A8F3A.F09091A8.1348A864.IP)
[00:19:31] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:19:57] *** Joins: sunfish (chatzilla@8F761026.B5EF4AF6.E96CA9D8.IP)
[00:21:37] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:22:29] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[00:30:41] <sfackler> wow, TIL that log used to be a keyword
[00:40:03] *** Joins: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca)
[00:41:40] *** Joins: clusterfoo (Mibbit@moz-F8B381B4.hm.shawcable.net)
[00:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:44:40] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[00:44:41] *** ChanServ sets mode: +qo brson brson
[00:46:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:48:56] *** Joins: zimbabao (rajaram@817E69AE.26907A.D2D1FAF0.IP)
[00:49:48] *** Quits: lpy (lpy@186A8F3A.F09091A8.1348A864.IP) (Client exited)
[00:50:04] <strcat> rusti: __log
[00:50:05] -rusti- <anon>:10:9: 10:14 error: unresolved name `__log`.
[00:50:05] -rusti- <anon>:10         __log
[00:50:05] -rusti-                   ^~~~~
[00:50:05] -rusti- error: aborting due to previous error
[00:50:05] -rusti- application terminated with error code 101
[00:50:15] *** Joins: lpy (lpy@186A8F3A.F09091A8.1348A864.IP)
[00:50:36] *** Quits: lpy (lpy@186A8F3A.F09091A8.1348A864.IP) (Connection reset by peer)
[00:53:24] <nrc> huh, gdb prints struct literals using `=` rather than `:`
[00:53:34] <nrc> I approve :-p
[00:59:49] *** Quits: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca) (Ping timeout)
[01:02:20] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[01:02:42] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[01:03:07] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:04:56] *** Quits: aurynj (Eon@C498BDEC.C264657C.C6282BC4.IP) (Ping timeout)
[01:05:03] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:05:51] *** Joins: lpy (lpy@186A8F3A.F09091A8.1348A864.IP)
[01:08:26] *** kimundi is now known as zz_kimundi
[01:10:48] <nrc> I want refinement types!
[01:11:35] *** Joins: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca)
[01:13:34] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Ping timeout)
[01:17:58] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[01:17:58] *** ChanServ sets mode: +qo brson brson
[01:19:26] <nrc> Damn, initialising a graph in Rust is a massive PITA
[01:19:54] *** Quits: lpy (lpy@186A8F3A.F09091A8.1348A864.IP) (Client exited)
[01:20:49] *** Joins: gwty (gwtypc@6FD8EC9F.DA4EE100.BD94A9D5.IP)
[01:21:06] <ski> .. refinement types for graphs ?
[01:21:55] <nrc> no, two unconnected moans :-s
[01:22:26] <nrc> refinement types for making two enums where the variants of one have references to the variants of the other
[01:23:04] <nrc> I wish I knew how to solve the graph init problem
[01:23:12] <nrc> that seems like a real issue to me
[01:23:17] <ski> not following the references thing
[01:23:34] <ski> maybe you're wishing for some kind of (limited) dependent types ?
[01:23:51] <nrc> enum A { a, b, c }
[01:24:16] <nrc> enum B { aa(A::a), bb(A::b), cc(A::c) }
[01:24:16] <aatch> ski, the idea is to declare an enum that has as possible variant a subset of the variants of another enum
[01:24:26] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:24:32] <ski> oh .. i suppose you just mean one enum type being a refinement type of the other ?
[01:24:44] <aatch> ski, so, I guess that, yes, it's a limited form of dependent typing.
[01:24:49] <nrc> no, the refinement type is the A::a bit
[01:24:53] * ski was thinking of something GADTy
[01:25:08] <nrc> being able to refer to a single enum variant (or a subset of them) as a type
[01:25:58] <ski> nrc : why should it be allowed to refer to different enum types for each variant ?
[01:26:16] <aatch> I comes up a lot in the compiler, where a certain function is called with (for example) ast::Expr, but only for a certain set of variants
[01:26:18] <ski> (and if not, why repeat `A' ?)
[01:26:37] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:26:51] <ski> aatch : *nod*
[01:26:52] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[01:26:52] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/crzG9w
[01:26:52] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[01:27:05] <aatch> I'd prefer something like enum B : A { <variant names from A and only A> }
[01:27:16] <nrc> ski: why not? And I think there is more correlation in that example than necessary
[01:27:20] <nrc> another e.g. would be
[01:27:22] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[01:27:23] <ghrust> [13rust] 15brson pushed 2 new commits to 06dist-snap: 02http://git.io/Iu7Gcw
[01:27:23] <ghrust> 13rust/06dist-snap 143fdde1d 15Brian Anderson: mk: Remove some debug logging
[01:27:23] <ghrust> 13rust/06dist-snap 14b0bb16e 15Brian Anderson: mk: Don't rm 'dist' during clean, just its contents...
[01:27:23] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[01:27:38] <nrc> enum C { c1(~str), c2(A::b) }
[01:28:41] <aatch> nrc, thats not what refinement types are.
[01:28:43] <ski> oh, i misunderstood, i thought `aa' was a renaming of `A::a', while it's actually wrapping it
[01:29:43] <nrc> aatch: I think refinement types are anyway of refining a given type to some subset of it, enums being where we usually want it in Rust
[01:29:50] <ski> anyway, if you want to refer to variants which ultimately don't come from the same common variants, then i think you probably want full subtyping
[01:30:20] <aatch> nrc, but in your example, C is not a subset of anthing
[01:30:25] <nrc> yeah, just wrapping, all I'm doing is using A::a as a type
[01:30:34] <nrc> aatch: right A::b is the subset
[01:31:05] <aatch> nrc, what is `b` though?
[01:31:08] <nrc> (I'm using some sugar to make a set of one and the thing itself equivalent, but you get the idea)
[01:31:19] <nrc> a variant of A
[01:31:28] <nrc> (I'm abusing :: too)
[01:31:36] <ski> it would be simpler to declare a refinement type `Ab' as only having the `b' variant of `A', and then use `Ab' as the argument type, imo
[01:31:40] <nrc> from `enum A { a, b, c }`
[01:32:01] <aatch> ski, agreed
[01:32:04] <nrc> ski: I don't want that intermediate stage, but yeah, same story
[01:32:39] <aatch> nrc, if refinement types happen, you're gonna have that stage, i can almost guarentee it.
[01:32:45] <ski> nrc : then some light-weight / structural syntax for refinement types could probably be invented
[01:32:47] <nrc> why?
[01:33:24] <nrc> if you allow the full type, you can always use a typedef to get the shortcut type if you prefer
[01:33:41] <nrc> forcing name bindings with refinement types seems un-orthogonal
[01:33:43] <ski> (i suspect `{A::b}' is reserved for something else, otherwise it could perhaps be used. perhaps `enum {A::b}')
[01:35:05] <aatch> nrc, what value would it give aver abstracting the data in the variant to a seperate type?
[01:35:08] <nrc> oh sure, we would need to figure out the exact syntax, I am just throwing things around
[01:35:10] <aatch> over*
[01:35:56] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[01:36:07] <nrc> aatch: what exactly do you mean by that - you mean pulling the info in the variant out as a struct or a tuple or something?
[01:36:29] <aatch> nrc, yes
[01:37:05] <nrc> just succinctness and better representation of programmer intent
[01:37:08] * ski presumes aatch means s/to a seperate type/to a seperate *named* type/
[01:37:11] <nrc> I don't think you get anything deep
[01:37:39] <aatch> nrc, then I dont believe it pays for its complexity.
[01:37:57] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[01:38:04] <nrc> I think refinement types have value outside of this example, and the neatness in this example are a free bonus
[01:38:11] <nrc> I agree this alone would not justify it
[01:39:13] <aatch> refinement types have value. your single variant sugar does, in my opinion, not.
[01:40:37] <nrc> if the sugar is being able to write `A::b` rather than `{A::b}` (or something equivalent), then I think it is worth it, since I imagine referring to a single variant is common enough to justify such a minor addition
[01:41:09] *** Quits: blank_name (blank_name@AD525492.9285D4F9.93A5C78C.IP) (Ping timeout)
[01:41:34] <aatch> nrc, thats the thing, I don't think referring to a single variant is that common.
[01:42:08] <aatch> Why would you pass a type that can only be a single variant as opposed to just passing the contents of that variant?
[01:42:37] <nrc> because you usually use the whole enum, but sometimes you want just one variant
[01:42:46] <nrc> I have no evidence for this, it is just a guess :-)
[01:42:50] <aatch> nrc, not in my experience.
[01:42:54] <nrc> I'd be interested to see data
[01:43:04] <aatch> nrc, look through the compiler
[01:43:25] <aatch> Look at how many match blocks end with "bug(shouldn't ever get here)"
[01:44:32] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:44:46] * ski would tend to agree with aatch here
[01:46:33] <aatch> It would be very nice to be able to write a function that says: "I accept only adt represnentable types" and have then checked at compiletime.
[01:46:39] <aatch> have that*
[01:46:44] <aatch> instead of runtime.
[01:48:10] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:48:24] <aatch> "I only accept this single variant" is... less helpful because you've reduced your subset to 1, making it essentiall equivalent to a struct.
[01:49:31] <ski> it might be useful if used as an argument of a parametric type ..
[01:50:45] <aatch> I'm not saying it's useless, I'm just saying that I don't believe it's usefulness outweighs the complexity it adds.
[01:51:31] <nrc> So, my hyothetical example is something like ast::NodeItem, I might want to write a method which operates only on structs and I would like it to take an argument of type ItemStruct - I don't want to tke StructDef because I want the generics info and I might want to do something with te Node, not the def, but I do want to work just with structs
[01:51:50] <nrc> I'm not sure if we would ever want to do that though
[01:51:56] <nrc> or if it is done already
[01:52:04] <nrc> or if we had it, how often we would use it
[01:52:29] <nrc> so, yeah, I'm not sure if the usefulness outwieghs the complexity or not
[01:53:14] <nrc> but it seems that if you allow sets, the sugar to allow singletons is not very much complexity. Perhaps that is an argument against as well as for, though
[01:54:11] <bjz> have you guys looked into row polymorphism?
[01:54:12] *** Quits: clusterfoo (Mibbit@moz-F8B381B4.hm.shawcable.net) (Quit: http://www.mibbit.com ajax IRC Client)
[01:54:43] <bjz> might be useful
[01:55:41] <bjz> http://web.cecs.pdx.edu/~mpj/pubs/96-3.pdf
[01:56:22] <bjz> not sure how relevant it is to the discussion (I was only idly perusing)
[01:56:40] <aatch> nrc, all features add complexity. Even if it doesn't seem like much. It's not just implementation complexity either. It adds more to the language, which means more... things.. to interact with other features, new features
[01:57:24] <bjz> http://docs.purescript.org/en/latest/types.html#row-polymorphism
[01:57:36] <bjz> ^ an example of it implemented
[01:58:59] <bjz> the idea is you can type check the addition and removal of fields or variants
[01:59:18] <bjz> but it might be too structural for Rust's type system
[01:59:30] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[01:59:41] <bjz> also it probably works better when you have whole-program inference
[01:59:50] <bjz> dunno
[02:00:10] <bjz> but yeah, I agree with aatch 
[02:00:28] <bjz> we need a more rock solid foundation to the type system
[02:00:33] <bjz> formally that is
[02:00:52] <aatch> bjz, go bug nmatsakis about Patina :P
[02:01:05] <bjz> dw, I've been chatting to him
[02:01:13] <bjz> we need it for 1.0
[02:01:29] <aatch> bjz, the formalisation?
[02:01:33] <bjz> yep
[02:02:02] <bjz> we don't want to run into some ugly realisations down the road
[02:02:30] <nrc> yeah, I think a formalisation of the borrow checking stuff in particular is needed
[02:02:48] <aatch> Kinda wish I was still at uni (and at the right point), I'd love to do something like develop a formal model of Rust (or a subset) as honours or masters project.
[02:02:49] <bjz> plus, it affects our credibility as a 'safe' language
[02:03:17] <aatch> bjz, I think we're always going to get some flak from both side.
[02:03:46] <aatch> From the "practical" people for being to "academic" and from the "academic" people for being to "practical"
[02:04:07] <aatch> (That is, strawman practical people and academics)
[02:04:10] <bjz> these are not acedemic problems, they could potentially have real world implications
[02:05:17] <nrc> Yeah, a safe language that wasn't would be a bummer :-p
[02:05:41] <bjz> the other good thing about a formal framework is it could allow folks to check things that are beyond Rust's type system
[02:06:05] <bjz> as in, they could use it as a base to work from
[02:06:21] <aatch> bjz, I'm not against it, in fact I'm all for it. Just thinking about how people look at the world.
[02:06:26] <bjz> yeah
[02:06:28] <bjz> sorry
[02:06:45] *** Joins: blank_name (blank_name@5EC13E3.964BADD.93A5C78C.IP)
[02:08:10] <aatch> <aatch> Kinda wish I was still at uni (and at the right point), I'd love to do something like develop a formal model of Rust (or a subset) as honours or masters project.
[02:08:28] <bjz> aatch: yeah, I agree it's important to have unsafe code, in fact it is at the heart of Rust's power. and I agree that every application should not have to check all their unsafe code as thoroughly. But in 'safe' code, things should be safe. The user shouldn't have to worry about it.
[02:08:30] <bjz> yeah
[02:08:32] <aatch> Is that something somebody against a formal model would say ^^ :D
[02:08:38] <bjz> not arguing at you
[02:09:09] <bjz> just at your hypothetical 'practical' people
[02:09:11] <bjz> :)
[02:09:15] <aatch> bjz, heh. I'll try to stop being defensive.
[02:09:52] <bjz> and I'll stop debating hypothetical figments of my imagination
[02:09:54] <bjz> :D
[02:10:53] * bjz is trying to teach himself type theory
[02:11:14] <bjz> so yeah, I am still pretty naive about this stuff
[02:13:02] <aatch> bjz, I looked at redex, could not get my head around it at all.
[02:13:09] <bjz> yeah
[02:13:19] <bjz> I will have to look at it again
[02:13:37] <bjz> anyway, bbl, off to grab a coffee
[02:15:23] <nrc> better off to learn the pencil and paper way first, then get onto redex when you understand the principles
[02:15:40] <nrc> some time invested with Pearce's TAPL is time well spent, it is an excellent book
[02:16:03] * nrc is not a redex fan in any case
[02:16:48] <aatch> nrc, yeah, that was what i was planning on trying (more or less, learn the underlying theories) before going back anyway.
[02:17:16] <aatch> nrc, I couldn't find anything else that was like redex though.
[02:17:26] *** Joins: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com)
[02:17:31] <aatch> That said, I wasn't *entirely* sure what I was looking for.
[02:17:59] <nrc> if you are really interested in computer assistance for type theory, use Coq. But it is a different game from redex
[02:18:57] <aatch> nrc, I might check out Coq, I'm assuming it doesn't do reduction semantics? (not that it really matters to me)
[02:19:46] <nrc> Coq will do anything you want it to - certainly you can encode operational semantics, but you are working at a different level of abstraction from pencil and paper proofs
[02:20:07] <nrc> redex tries to work at that level of abstraction, but I don't think it gives you much
[02:20:11] <nrc> better just to stick to paper and LaTeX :-)
[02:21:05] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Ping timeout)
[02:29:07] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[02:29:10] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:31:32] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:35:06] <bjz> nrc: I was thinking of looking at Coq or Agda
[02:35:34] <bjz> nrc: but you think it is better just to use pen and paper?
[02:36:36] <bjz> nrc: I've been going through TaPL slowly anyway
[02:37:03] <nrc> Yeah, definitely learn the pen and paper stuff first
[02:37:19] <nrc> once you understand that well, using Coq or something will be much easier
[02:37:42] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[02:37:47] <nrc> and its the pen and paper stuff - the underlying concepts - that are really important
[02:38:06] <bjz> yep
[02:38:31] <bjz> I'm sure you can do a lot of blundering about with those proof assistants
[02:40:49] <nrc> my personal opinion (which is not universal) is that proof assistants are great for pure type theory (e.g., coming up with System F 2.0), but not that useful for the applied stuff (e.g., proving Rust is sound)
[02:40:58] <bjz> ah
[02:41:21] <bjz> interesting
[02:41:25] <bjz> why is that?
[02:41:35] <nrc> many people feel differently though - there has been a big movement towards mechanical proofs for all papers with type theory
[02:42:10] <bjz> isn't it important to have a solid foundation?
[02:42:25] <bjz> I guess I haven't had much experience to judge
[02:43:15] <nrc> basically because proof assistants are at the assembly language level and it doesn't scale usefully to 'large' calculi. Furthermore, the libraries which exist are designed for derivatives of the lambda calculus not more practical calculi like Featherweight Java
[02:43:44] <nrc> Pen and paper _is_ a solid foundation - good enough for 2500 years of mathematics, good enough for me :-)
[02:43:49] <bjz> isn't that just a problem of creating better libraries?
[02:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:44:13] <nrc> yeah, but library design is hard and you don't get academic papers for it, so it hasn't been done
[02:44:24] <nrc> well, it has, but there is a long way to go
[02:44:50] <bjz> ah
[02:45:03] <bjz> that's a shame
[02:45:38] <nrc> If you think of Coq like assembly code, you need asm libraries, then you need higher level lanaguages, then you need libraries for those languages
[02:45:48] <nrc> we're still at the asm libraries stage
[02:46:07] <bjz> dang
[02:46:32] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:47:07] <bjz> that's kind of exciting though - that there is much that needs to be still done, but annoying for work that needs to be done *now*
[02:47:07] *** Quits: gwty (gwtypc@6FD8EC9F.DA4EE100.BD94A9D5.IP) (Ping timeout)
[02:47:20] <bjz> :P
[02:47:43] <nrc> yeah, its a really interesting field with lots of good work to come
[02:47:50] <nrc> but the barriers to entry are high
[02:48:32] <nrc> Coq is _hard_ and library design is _hard_ and language design is _hard_ and in the needs lots of time, not just smarts way
[02:48:36] <nrc> and there is no money in it
[02:48:41] <bjz> yep :(
[02:48:46] <nrc> other than research grants
[02:50:51] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:52:03] <bjz> nrc: so you would be more interested in proof assistants for practical work if they were at a higher level than they currently are?
[02:52:16] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[02:52:48] <nrc> bjz: totally
[02:52:58] <bjz> cool, just clarifying
[02:53:21] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:53:29] <bjz> and you think that although redex is higher-level it isn't sound?
[02:54:01] <bjz> if not, why are you not a fan of it?
[02:54:34] *** Quits: japaric (japaric@D2861789.743D7231.BFC118EE.IP) (Ping timeout)
[02:55:57] <nrc> it is not a proof assistant in the same way as Coq - it relies on tests, rather than proofs, at least for some things
[02:56:09] <bjz> ah
[02:56:13] <nrc> and it is not high level in the way I would like (which is probably just taste, but heh)
[02:56:23] <bjz> heh
[02:56:52] <nrc> I think the idea is great, and I think there is definitely space for tools which assist, but don't guarantee sound proofs
[02:56:57] *** Joins: japaric (japaric@65A1FC0F.FD3D1332.95AFB88D.IP)
[02:57:02] <bjz> so do you think it could produce false positives if you are not careful?
[02:57:31] <bjz> and that it is better to work on pen and paper so that you don't fool yourself?
[02:57:36] <ski> nrc : "redex" ?
[02:57:44] <nrc> ski: PLT redex
[02:57:44] <bjz> ski: a racket library
[02:57:49] <ski> ok
[02:58:09] <bjz> ski: used by https://github.com/nikomatsakis/rust-redex/
[02:58:14] <ski> is it something QuickCheck-like ?
[02:58:21] * ski suspects no
[02:59:02] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[02:59:37] <nrc> bjz: I think using redex vs pen and paper is not equivalent, redex just gives you a framework for defining a formalism and testing it. By using pen and paper, you can prove stuff about it.
[03:00:20] * ski thinks we need better support for "chains" in reasoning
[03:00:23] <nrc> redex is useful in that it helps you avoid errors, but in exchange you have to stick to their idea of how you should do things and if you want to look at a property that it hasn't been designed for you are kind of stuck
[03:00:49] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[03:00:58] <nrc> COq and the like let you do anything and assure the soundness of your argument, but at the cost of much higher complexity
[03:01:03] <bjz> nrc: could you use it as a way to check your pen and paper stuff after the fact?
[03:01:22] <bjz> nrc: also, what is your opinion on agda? same as coq?
[03:02:01] <nrc> that's getting to the borders of my knowledge of redex - I think you could, but it would be more picking up syntactic problems with your _model_ rather than issues with your proofs, which are more interesting
[03:02:14] <nrc> I don't know much about Agda, sorry
[03:02:29] <bjz> ah
[03:02:29] <bjz> np
[03:02:59] <bjz> what do you think are the main things we have to tackle in order to build a good formal foundation for Rust?
[03:03:15] <nrc> that's a hard question
[03:03:41] <bjz> sorry
[03:03:47] <nrc> there's a few things that I think are interesting and deserve formalisation (borrow checking, coercions, variance)
[03:04:17] <nrc> the bulk of the type system is similar enough to existing systems that it is not too scary
[03:04:45] <nrc> the hard bit is where the scary bits interact with each other or the non-scary bits
[03:05:43] <bjz> ick
[03:05:47] <bjz> sounds tricky
[03:06:07] <bjz> I don't know how much I don't know in this kind of thing
[03:06:59] <ski> nrc : probably Agda is roughly the same as Coq, as to these regards
[03:07:09] <ski> er
[03:07:12] <ski> bjz ^
[03:07:17] <bjz> ski: that was my thinking
[03:07:22] <bjz> from what has been said
[03:07:47] <bjz> what do you think of http://www.seas.upenn.edu/~cis500/current/sf/index.html ?
[03:07:50] <ski> Agda is more tuned to doing programming in it (and also proofs for those programs)
[03:09:06] <ski> bjz : heard about it, haven't attempted it yet
[03:09:24] <nrc> looks cool, the author list is impressive at least :-)
[03:10:02] * ski recognizes six of those names
[03:12:32] <bjz> :)
[03:13:07] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:15:03] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:15:46] <ski> (.. though i don't recall where i recognize Andrew Tolmach from. typed assembly, maybe ?)
[03:19:30] <bjz> heh
[03:19:45] <bjz> typed assembly? sounds interesting
[03:20:27] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[03:34:51] *** Quits: lkuper (lkuper@moz-61339218.dyn.optonline.net) (Ping timeout)
[03:39:14] *** Quits: sunfish (chatzilla@8F761026.B5EF4AF6.E96CA9D8.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 28.0/20140317233501])
[03:41:38] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[03:41:54] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:44:09] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:46:34] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:51:07] *** Quits: zz_kimundi (kimundi@moz-2E6F4AE4.dip0.t-ipconnect.de) (Ping timeout)
[03:54:22] *** Joins: aurynj (Eon@C498BDEC.C264657C.C6282BC4.IP)
[03:54:22] *** Joins: zz_kimundi (kimundi@moz-B2FDAD53.dip0.t-ipconnect.de)
[03:54:24] *** zz_kimundi is now known as kimundi
[03:55:51] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:58:12] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[04:06:55] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[04:07:02] *** Quits: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca) (Quit: canhtak)
[04:11:36] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[04:27:11] *** Quits: zimbabao (rajaram@817E69AE.26907A.D2D1FAF0.IP) (Ping timeout)
[04:39:29] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[04:41:37] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[04:44:29] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[04:46:38] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:00:52] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:02:25] *** Joins: andrew-d_w (andrew-d_w@moz-17320F4E.hsd1.ca.comcast.net)
[05:02:36] *** Quits: andrew-d_w (andrew-d_w@moz-17320F4E.hsd1.ca.comcast.net) (Input/output error)
[05:03:17] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:07:59] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[05:08:51] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[05:21:22] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[05:21:24] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[05:21:56] *** Joins: rook (rook@moz-31CCE085.hfc.comcastbusiness.net)
[05:24:03] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Quit: Textual IRC Client: www.textualapp.com)
[05:24:12] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[05:32:59] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[05:35:42] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[05:36:59] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[05:44:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:46:25] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:49:09] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Input/output error)
[05:52:50] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[05:54:33] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[05:57:38] *** Joins: zimbabao (rajaram@47769425.AE842F9B.81C3DAA1.IP)
[06:06:05] *** Joins: edwardw (Mibbit@13A2FE5.E4C8743.30C05AB6.IP)
[06:06:28] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[06:08:20] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:18:12] *** Quits: ktt3ja (ktt3ja@moz-8D2A07E1.hsd1.va.comcast.net) (Quit: Leaving)
[06:26:32] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[06:28:00] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[06:30:00] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[06:46:26] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:49:08] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[06:51:32] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:11:15] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:11:52] *** Quits: aurynj (Eon@C498BDEC.C264657C.C6282BC4.IP) (Quit: Leaving)
[07:13:12] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:18:09] *** Joins: bjz_ (bjz@B398BE78.F804C29E.D35A31DF.IP)
[07:19:10] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[07:25:25] *** Quits: limeburst (me@247D1419.D73964AC.27A8748.IP) (Ping timeout)
[07:25:39] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[07:25:46] *** Quits: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP) (Ping timeout)
[07:26:03] *** Quits: Yurume (Yurume@A826BD81.8A0DEF81.38747683.IP) (Ping timeout)
[07:35:31] *** Joins: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP)
[07:37:04] *** Quits: bjz_ (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[07:37:13] *** Joins: Yurume (Yurume@A826BD81.8A0DEF81.38747683.IP)
[07:37:15] *** Joins: limeburst (me@247D1419.D73964AC.27A8748.IP)
[07:40:57] *** flaper87|afk is now known as flaper87
[07:43:39] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[07:43:55] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[07:44:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:45:22] *** Quits: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com) (Ping timeout)
[07:46:03] *** Joins: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net)
[07:46:03] *** ChanServ sets mode: +o huon
[07:46:06] *** Quits: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net) (Input/output error)
[07:46:25] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:47:14] *** Joins: newbie (kvirc@moz-FE27BA67.dip0.t-ipconnect.de)
[07:48:29] *** Quits: eibwen (kvirc@moz-BBC2056C.dip0.t-ipconnect.de) (Ping timeout)
[07:49:17] *** Joins: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net)
[07:49:17] *** ChanServ sets mode: +o huon
[07:51:32] *** Quits: newbie (kvirc@moz-FE27BA67.dip0.t-ipconnect.de) (Ping timeout)
[07:54:08] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:56:37] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:12:08] *** Parts: edwardw (Mibbit@13A2FE5.E4C8743.30C05AB6.IP) ()
[08:16:15] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:18:13] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:28:38] *** Joins: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP)
[08:36:39] *** Quits: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP) (Quit: leaving)
[08:36:59] *** Joins: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP)
[08:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:46:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:47:57] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[08:54:16] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[08:59:07] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[09:01:27] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:16:02] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 31.0a1/20140322030204])
[09:21:13] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[09:23:12] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:31:27] *** Joins: doener (bs@moz-AA189A5A.unitymedia.biz)
[09:39:14] <eddyb> nmatsakis: good morning :)
[09:39:47] <eddyb> nmatsakis: when can types move by default and not require drop?
[09:40:40] <huon> eddyb: when they have `std::kinds::marker::NoPod`?
[09:40:45] <huon> (or are &mut?)
[09:41:25] *** Joins: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca)
[09:41:34] <eddyb> oh, hmm, &mut might be the issue here
[09:42:30] <eddyb> TC::NeedsDrop vs TC::Moves
[09:42:58] <huon> (closures too, although they may be treated as &mut internally?)
[09:43:01] <eddyb> OwnsManaged isn't in Moves
[09:43:02] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[09:43:20] <huon> managed is @
[09:43:23] <eddyb> while OwnsAffine isn't in NeedsDrop
[09:43:30] <eddyb> (I guess that's &mut)
[09:44:19] <huon> OwnsAffine, OwnsDtor, OwnsOwned are the things in Moves, right?
[09:44:54] <huon> and OwnsAffine is NoPod, &mut and once functions
[09:46:20] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:55:09] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[10:11:59] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[10:18:55] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[10:19:52] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[10:25:39] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[10:27:01] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[10:27:23] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[10:28:01] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:29:05] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[10:33:44] *** Joins: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru)
[10:47:42] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[10:49:44] *** Quits: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru) (Quit: Leaving...)
[10:49:44] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:54:35] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[10:56:46] <eddyb> let's try rebase -i and edit a commit without creating a fixup temporary
[10:58:10] <eddyb> okay, that was simple enough
[10:58:36] <eddyb> nmatsakis: r? fixed nit https://github.com/mozilla/rust/pull/13004
[10:58:42] <eddyb> s/nit/serious issue/ :P
[11:01:04] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[11:03:03] <bvssvni> is it ok to add multiple test cases in same file to run-pass?
[11:03:47] <eddyb> yeah, if they're related
[11:05:04] <eddyb> huon: I'm tempted to implement Deref for Spanned
[11:05:19] <eddyb> huon: that will remove a bunch of explicit .node accesses
[11:05:51] <eddyb> I think it's all enums, so it's not too great of a change :/
[11:06:03] * huon isn't sure how he feels about taht
[11:06:17] <eddyb> huon: it would work better if we had structs and not enums in Spanned, I guess
[11:06:31] <eddyb> huon: I was reading this https://github.com/mozilla/rust/pull/13108#discussion_r10874621
[11:07:22] <huon> don't you like field.node.ty.span ? :P
[11:07:39] <eddyb> that `node` there just feels extra
[11:09:43] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:11:32] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:19:41] *** Quits: japaric (japaric@65A1FC0F.FD3D1332.95AFB88D.IP) (Ping timeout)
[11:20:01] *** Joins: japaric (japaric@2B3146EA.839FBF92.95AFB88D.IP)
[11:23:34] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[11:25:18] <eddyb> huon: bors is being lazy and I have a PR :/
[11:25:33] <huon> eddyb: which?
[11:25:44] <huon> oh there's probably some doc PRs somewhere
[11:25:49] <eddyb> huon: this one https://github.com/mozilla/rust/pull/13004
[11:25:49] * huon checks
[11:26:04] <huon> eddyb: ah... I'm not gonna r+ that one :)
[11:26:12] <eddyb> nmatsakis commented on one thing, I've fixed, but I'm not sure he's being positive on it yet
[11:26:24] <eddyb> huon: yeah, I know, I just like to bug people
[11:27:06] * huon is an insect
[11:27:12] <eddyb> hahaha
[11:27:41] <eddyb> huon: the sad thing is that even though I've made significant changes in trans, I don't trust myself enough to review trans code
[11:28:13] <eddyb> it worries me that we'll have parts of the code owned by one or two people max, for the rest of their lives
[11:30:40] *** Quits: gimpf (gimpf@moz-F83BFCD0.adsl.highway.telekom.at) (Ping timeout)
[11:30:48] <huon> it sounds a lot like you and nmatsakis (and others) are doing things to simplify/safe-ify trans progressively
[11:30:59] <huon> (with Datums etc.)
[11:31:08] <huon> so that will presumably becoming less true... hopefully
[11:32:15] <eddyb> yeah, hope, I have too much of that going around :P
[11:32:40] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[11:33:21] * huon has lots of hop going around
[11:33:28] <huon> all these kangaroos, you see
[11:34:13] <eddyb> huon: you should get yourself a rusty branding iron
[11:41:54] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[11:41:54] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/ioz0zw
[11:41:54] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[11:41:54] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[11:41:54] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/L7keKQ
[11:41:54] <ghrust> 13rust/06auto 14a6c14dd 15Olle Jonsson: Documentation sprint: Terminfo
[11:41:54] <ghrust> 13rust/06auto 1411d9483 15bors: auto merge of #12948 : olleolleolle/rust/master, r=huonw...
[11:41:55] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[11:42:29] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[11:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:46:27] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:46:31] *** Joins: gimpf (gimpf@moz-F3893FF0.adsl.highway.telekom.at)
[11:52:18] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:54:39] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:01:01] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[12:02:42] *** Quits: zimbabao (rajaram@47769425.AE842F9B.81C3DAA1.IP) (Ping timeout)
[12:03:29] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[12:05:35] *** Joins: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru)
[12:05:51] <pnkfelix> whoa, did github change their css or something?  I am now seeing line breaks in the middle of `code blocks`
[12:06:18] <pnkfelix> e.g. `--cfg acceptable` is rendering with the "--cfg" on top of the "acceptable" in https://github.com/mozilla/rust/pull/13113
[12:07:01] <huon> pnkfelix: yeah, I noticed that too; it's weird
[12:07:33] <huon> I think it's interpreting `foo <literal new line> bar` with the \n in it, not as a continuous piece of inline text
[12:08:30] <pnkfelix> ah, so I just got unlucky with my line-breaks in emacs
[12:08:48] <eddyb> it actually looks... cool
[12:09:05] <eddyb> inline multiline code blocks
[12:09:08] <pnkfelix> blargh, I see, its interprting *all* of my line breaks literally?  :(
[12:09:24] <eddyb> pnkfelix: why you have line breaks?
[12:09:45] <pnkfelix> because that's the way I formatted the git log comment
[12:09:57] <pnkfelix> anyway I fixed the PR description now
[12:10:22] <eddyb> https://github.com/pnkfelix/rust/commit/57ac379a630d9756c71f2747debe1756ccf62c5f that's quite a long commit message
[12:10:32] <eddyb> pnkfelix: I didn't realize it came from the commit, my bad
[12:11:20] <pnkfelix> is there a way to get git to print the log message of a commit without indenting it?
[12:11:29] <pnkfelix> (just curious about that, not a strict necessity)
[12:11:47] <huon> do we write lifetimes with or without the '? i.e. is it "the `'static` lifetime", or "the `static` lifetime"? (I've seen both.)
[12:12:02] <eddyb> pnkfelix: pretty sure this syntax isn't actually used by the compiler - &'static c
[12:12:28] <pnkfelix> eddyb: well that might be why using that syntax didn't help.  :)
[12:12:39] <pnkfelix> eddyb: but it still might be a nice thing to support, no?
[12:12:48] <eddyb> pnkfelix: especially for named blocks ;)
[12:12:59] <pnkfelix> huon: I think within rust.md we only write "the `static` lifetime"; I tried to stay consistent with that.
[12:13:06] <eddyb> pnkfelix: but &c where c is static should give a &'static, that's probably the bug there
[12:13:06] <pnkfelix> eddyb: yeah, that's a clear future extension
[12:13:33] <pnkfelix> eddyb: ah true, that would probably be nice
[12:13:48] <eddyb> maybe regionck doesn't take that into consideration?
[12:14:02] <huon> pnkfelix: ok
[12:14:17] <pnkfelix> huon: but TBH i don't know what would be "right"
[12:14:26] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:14:34] <eddyb> `'a` would be saner if we had inline highlighting
[12:14:41] <pnkfelix> huon: especially assuming we are going to generalize the kind bounds to support lifetimes other than `static`
[12:14:50] <pnkfelix> huon: at that point we might be better off switching notation
[12:16:06] <eddyb> pnkfelix: link_region ignores cat_static_item completely
[12:16:29] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:16:33] <eddyb> not sure if it should do something more there
[12:16:35] <huon> pnkfelix: oh, yeah; good point. (my vote is for including the ',.)
[12:16:42] * eddyb too
[12:16:42] * huon punctuation-man!
[12:16:46] <huon> s/,//
[12:17:10] <eddyb> pnkfelix: I could probably figure out what is going on if I stared at it for a few hours
[12:17:20] <eddyb> but I don't have a few hours! and I haven't touched P at all today
[12:17:31] <pnkfelix> eddyb: don't worry about it, it might end up rolling into what I'm trying to do for #12857
[12:17:44] <eddyb> is this going to be another one of those weeks where nothing gets done?
[12:17:45] <pnkfelix> (P?)
[12:17:57] <eddyb> pnkfelix: ast::P, possibly syntax::ptr::P
[12:18:02] <pnkfelix> eddyb: ah
[12:18:11] <eddyb> the universal AST pointer. experimenting with it
[12:18:22] * huon 's client made that into a lot of `:P` smiley graphics
[12:18:26] <pnkfelix> eddyb: right, I remember that now.
[12:18:40] <eddyb> the folder looks more consistent when it consumes a value and produces another one
[12:18:48] <eddyb> rather than some times taking a &T and producing a T
[12:19:14] <eddyb> even without in-place folding, I think it can reuse heap space
[12:29:08] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[12:29:20] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[12:36:10] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:38:03] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:38:35] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[12:40:46] *** Joins: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com)
[12:41:23] <nmatsakis> eddyb: I'm surprised you didn't do Datum<LvalueOrPod>
[12:41:30] *** Joins: glaebhoerl (glaebhoerl@moz-3590251D.kabelnet.hu)
[12:41:31] <nmatsakis> but I guess it doesn't matter
[12:41:52] <nmatsakis> that's more the Expr model
[12:42:06] <nmatsakis> (which presumably could be renamed to LvalueOrRvalue)
[12:42:32] <eddyb> nmatsakis: the matching kinda worked better the way I did it. though I'm still not happy about a few things
[12:42:46] <eddyb> nmatsakis: I was afraid of expanding the Expr model in another direction
[12:43:46] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Client exited)
[12:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:44:11] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[12:44:11] <nmatsakis> it seems like almost every case of `match get_item_val` throws an error for one or the other
[12:44:25] <nmatsakis> if not every case
[12:44:49] <nmatsakis> not sure if this indicates a better possible factoring, or is just the way it is. I suspect the latter -- at least not without a lot more work and some associated types
[12:45:35] <eddyb> nmatsakis: it shows how unsafe code used to be :P
[12:46:29] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:46:43] <nmatsakis> eddyb: if you were to follow the Expr model, I would have expected `assert_pod() -> Datum<Pod>` and `assert_lvalue() > Datum<Lvalue>` as methods on `Datum<LvalueOrPod>
[12:46:54] <nmatsakis> be a bit shorter if nothing else, I guess
[12:46:59] <eddyb> riiight
[12:47:04] <nmatsakis> not that you couldn't do this with PodOrLvalue the way it is
[12:47:20] <eddyb> I'd rather explode get_item_val into something saner
[12:47:38] <eddyb> especially if you have an AST node with a specific variant
[12:48:01] <eddyb> (like most things calling get_item_val do)
[12:48:07] <nmatsakis> yes, that's mainly what I was getting at
[12:48:12] <nmatsakis> basically the way to make this more type safe
[12:48:14] <nmatsakis> is to have distinct keys
[12:48:38] <nmatsakis> I guess get_item_val might stay the same but delegate to more specific helpers than be keyed in different ways
[12:49:19] <nmatsakis> so I'd be happier with Datum<PodOrLvalue> (whichever order;) because it'd be more consistent with what exists, but basically this patch looks good. I don't claim to have read the details of the last commit though
[12:49:25] <nmatsakis> just skimmed
[12:49:47] <eddyb> I did remove some pointer casting stuff
[12:50:01] <eddyb> which mmaaybe was obsolete. travis doesn't fail because of it
[12:50:02] <nmatsakis> which stuff is that?
[12:50:02] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[12:50:06] <nmatsakis> oh,
[12:50:11] <nmatsakis> like just some random PointerCasts()
[12:50:15] <eddyb> nmatsakis: monomorphic_fn
[12:50:26] <eddyb> it used to return a should_cast bool
[12:50:48] <nmatsakis> yes, iirc that was from reusing monomorphic instances
[12:50:53] <nmatsakis> I *think* we turned that off
[12:50:57] <nmatsakis> though I don't know fo rusre
[12:50:58] <nmatsakis> *for sure
[12:50:59] <eddyb> I removed the enum variants for it
[12:51:14] <eddyb> mono_any and mono_repr IIRC
[12:51:34] <nmatsakis> ok, I see
[12:51:38] <nmatsakis> so yes you definitely turned it off :)
[12:51:44] <nmatsakis> but I presume those were unused?
[12:51:58] <nmatsakis> (at least, searching through the diff doesn't find much)
[12:52:13] <eddyb> there was code to cast that pointer
[12:52:31] <eddyb> in... calle::some_weird_long_name_fn_that_calls_monomorphic_fn
[12:52:34] <nmatsakis> I mean, Idon't see anybody creating instances of mono_any or mono_repr
[12:52:35] <eddyb> *callee
[12:52:42] <eddyb> nmatsakis: ah yeah they were dead code
[12:52:49] <nmatsakis> yeah I think we reipped out the reuse stuff
[12:52:56] <nmatsakis> it was causing too many bugs
[12:53:06] * nmatsakis never liked that approach anyhow
[12:53:49] <nmatsakis> eddyb: any other major changes, or was it all just fallout from using datums?
[12:54:03] <eddyb> mostly fallout
[12:54:09] <nmatsakis> ok, my skimming didn't find much
[12:54:26] <eddyb> some iterator-based approaches where I could (*sigh* cabi being total :/)
[12:54:39] *** Quits: japaric (japaric@2B3146EA.839FBF92.95AFB88D.IP) (Ping timeout)
[12:54:50] *** Joins: edwardw (Mibbit@FF3CCB4.1B2F6624.7F41E82D.IP)
[12:55:12] *** Joins: japaric (japaric@E3A27319.2A33E3C8.A936879B.IP)
[12:56:30] <nmatsakis> eddyb: r+ but one thing: can you please update the docs in trans/doc.rs
[12:56:48] <nmatsakis> er
[12:56:50] <nmatsakis> where are those docs
[12:57:14] <eddyb> there are no docs :P
[12:57:17] <nmatsakis> ah yes, doc.rs
[12:57:18] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:57:18] <nmatsakis> doch
[12:57:33] <nmatsakis> in particular these is coverage of datums, lvalue vs rvalue
[12:57:37] <nmatsakis> and I would like it extended to describe pod
[12:58:01] <nmatsakis> src/librustc/middle/trans/doc.rs
[12:58:17] <nmatsakis> I'd also prefer to see Datum<PodOrValue>, it really seems inconsistent now
[12:58:47] <nmatsakis> but those are minor quibbles, this looks great
[12:59:35] <nmatsakis> pnkfelix: regarding lifetime issues, I know there are some piling up, I am hoping to start working on Rust a lot more come April (probably after TC39 mtg)
[12:59:40] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:59:42] *** Joins: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP)
[13:00:03] <pnkfelix> nmatsakis: Well, it seemed like a good way to force myself to understand the code
[13:00:11] <nmatsakis> pnkfelix: yeah, that's fine, I'm happy if you get to them first ;)
[13:00:32] <nmatsakis> there is also some sketchiness I really want to investigate regarding trait bounds and few other bits of regionck
[13:00:33] <pnkfelix> nmatsakis: though I admit, the lack of explicit fixme's in the code has left me wondering at times
[13:00:58] <nmatsakis> pnkfelix: specific examples?
[13:01:16] <nmatsakis> pnkfelix: or just a general sense
[13:01:21] <pnkfelix> nmatsakis: e.g. the "cannot relate bound region" error in region_inference/mod.rs 's fn make_subregion, has me wondering "Hmm, was this just meant as a placeholder"
[13:01:32] <nmatsakis> no
[13:01:39] <pnkfelix> nmatsakis: "... or is there a fundmental reason we would never be able to resolve any of these constraints"
[13:01:40] <nmatsakis> that should not happen
[13:01:41] <nmatsakis> yes
[13:01:47] <nmatsakis> it makes no sense at all
[13:02:17] <pnkfelix> nmatsakis: I'm a little surprised that it makes no sense to try to relate early-bound to unification-variables
[13:02:35] <nmatsakis> it doesn't make sense to relate bound lifetimes.
[13:02:37] <nmatsakis> however,
[13:02:46] <nmatsakis> if you are relating fn types,
[13:02:51] <nmatsakis> there is specific code to replace bound lifetimes
[13:02:52] <nmatsakis> with fresh variables
[13:02:57] <nmatsakis> in a contained way
[13:03:14] <nmatsakis> but reigon inference only deals with free lifetimes, not bound ones
[13:07:18] <pnkfelix> nmatsakis: maybe the act of replacing bound lifetimes with fresh variables is what I'm interested in doing then
[13:08:13] <pnkfelix> nmatsakis: At least, that sounds the closest to what I was assuming would be the "natural" way to handle this
[13:09:00] <nmatsakis> pnkfelix: what is the specific situation?
[13:09:24] <pnkfelix> nmatsakis: ... uh, all of the bugs where people are encountering "cannot relate bound region" ?
[13:10:02] <pnkfelix> nmatsakis: I'll try to identify one that seems like a reasonable thing for us to statically check and accept
[13:11:42] *** Parts: edwardw (Mibbit@FF3CCB4.1B2F6624.7F41E82D.IP) ()
[13:12:23] *** Quits: glaebhoerl (glaebhoerl@moz-3590251D.kabelnet.hu) (Ping timeout)
[13:13:40] <pnkfelix> (my machine had just alerted me that I was down to 100 MB free and that I darn well better free up some space)
[13:13:45] <pnkfelix> (so I've been distracted...)
[13:16:44] *** Quits: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com) (Quit: victorporof)
[13:17:21] <nmatsakis> pnkfelix: :) ok
[13:17:51] <nmatsakis> pnkfelix: I haven't inspected the bugs in detail, I'd need to look at a specific one to tell you just what I expect to be happening (naturally)
[13:17:59] <pnkfelix> nmatsakis: yeah I totally understand
[13:19:25] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:19:54] *** Joins: glaebhoerl (glaebhoerl@moz-3590251D.kabelnet.hu)
[13:20:01] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[13:20:18] <pnkfelix> nmatsakis: if you care, I think the second example on this bug https://github.com/mozilla/rust/issues/12851 is a decent example.
[13:20:38] *** Joins: zimbabao (rajaram@817E69AE.26907A.D2D1FAF0.IP)
[13:21:26] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:21:39] <pnkfelix> nmatsakis: also, I've been wondering if part of #5121 is going to be to require lifetime bounds on the self type in trait declarations.
[13:21:46] *** Joins: MaXYZW (MaXYZW@moz-F787D177.dk.customer.tdc.net)
[13:22:34] <pnkfelix> nmatsakis: e.g. something like `trait Foo<'a> : 'a`, as a way to say that implementations of `Foo<'a>` are allowed to carry `&'a _` references.
[13:23:35] <eddyb> pnkfelix: that's a decent solution, I think
[13:23:46] <pnkfelix> nmatsakis: though I haven't really thought that through, it was more an idle thought in response to a conversation with eddyb from yesterday.
[13:24:31] <pnkfelix> nmatsakis: It  might be something that you would only need to enforce when the trait has methods that take or produce Self by value.
[13:25:44] <eddyb> hmm, a trait Foo: 'static + Pod {} could prove useful as a bound
[13:25:52] <nmatsakis> pnkfelix: damn default methods, they mess everything up. But yeah that probably makes sense. In general I think we'll need to be able to add (general, named) lifetime bounds on parameters
[13:26:15] <nmatsakis> pnkfelix: that relates to the area of code I was saying I want to go back in and clean up :)
[13:26:26] <nmatsakis> I'm fairly convinced there's some wrongness lurking in there
[13:26:52] <nmatsakis> I was hoping to start by working on the redex model, actually
[13:26:56] *** Joins: gwty (gwtypc@834AF78F.8B603116.F64220F6.IP)
[13:27:01] <nmatsakis> just so we can better write out everything
[13:27:08] <pnkfelix> nmatsakis: I've been thinkking about the redex model too
[13:27:17] <eddyb> nmatsakis: now I have two PRs to work on and no time left :/
[13:27:25] <pnkfelix> nmatsakis: but i'm in the mood for rustc hacking today.  :)
[13:27:51] <eddyb> I really need to get myself back to speed otherwise someone will ruin the AST for the sake of removing @
[13:28:00] <eddyb> well, ruin is a strong word
[13:28:18] <pnkfelix> eddyb: yeah I was going to say
[13:28:40] <pnkfelix> eddyb: weren't you just complaining up above about too few code owners?
[13:28:51] <pnkfelix> eddyb: gotta learn to trust other people to be capable.  :)
[13:29:09] <eddyb> I can trust people as long as there are general guidelines
[13:29:34] <eddyb> but for that I have to write massive blog posts that would take even longer than doing everything myself
[13:29:42] <eddyb> (if I want things done my way/vision, that is)
[13:29:53] <huon> that doesn't sound like trusting people :)
[13:30:04] <pnkfelix> huon: trust via dictatorship
[13:30:06] <eddyb> let's try to put it another way
[13:30:08] <huon> (that sounds like "people doing what I say" :P )
[13:30:34] * huon cowers from eddyb's whip
[13:30:49] <eddyb> I don't expect people to spend a lot of time figuring out if a better fix is possible
[13:31:10] <huon> why not?
[13:32:00] <eddyb> huon: because... I'm supposed to be crazier
[13:32:04] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[13:32:04] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/L7keKQ
[13:32:04] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[13:32:15] <huon> it's perfectly reasonable to expect people do do a proper job of things. (especially in a very public environment with code review.)
[13:32:30] <eddyb> huon: anyone else would've just removed @ from a few places, maybe add some clones
[13:32:36] <eddyb> and be done in a couple hours
[13:32:40] <huon> why?
[13:32:47] <eddyb> I spent like a week removing RefCell's
[13:32:53] <huon> people have been talking about using an arena for quite a while
[13:33:08] <eddyb> rewriting things so they don't require interior mutability
[13:33:13] <eddyb> like liveness
[13:33:47] <huon> that was very nice work :) but I don't understand why you're unique in your ability to do that?
[13:33:52] <huon> anyway
[13:33:54] * huon -> bed
[13:34:04] <eddyb> *sigh* why do I sound like I'm better?
[13:34:34] <eddyb> the results *can* *sometimes* be better, but I'm taking a chance at attempting something time consuming and potentially unworkable
[13:36:42] <eddyb> I've found borrow_mut in places where borrow would've sufficed. I wouldn't have expected pcwalton to look at every single one of those and figure out the minimal requirements based on actual types and whatnot
[13:36:53] <eddyb> though I digress too much
[13:36:56] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[13:36:56] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/C1zRSw
[13:36:56] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[13:36:57] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[13:36:57] <ghrust> [13rust] 15bors pushed 5 new commits to 06auto: 02http://git.io/J8RBFg
[13:36:57] <ghrust> 13rust/06auto 1483d8f33 15Eduard Burtescu: trans::reflect: Don't use Vec where arrays would suffice.
[13:36:57] <ghrust> 13rust/06auto 14010e1e2 15Eduard Burtescu: Removed unreachable ~str matching code.
[13:36:58] <ghrust> 13rust/06auto 14f31b66f 15Eduard Burtescu: Add a Datum kind to be used by Pod rvalues.
[13:37:00] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[13:37:35] <eddyb> nmatsakis: oh, thanks, I didn't realize you didn't expect those changes in the same PR :)
[13:38:23] <eddyb> now let's hope it doesn't fail with a LLVM assertion building stdtest (which might be impossible to build on this machine)
[13:39:26] *** Quits: gwty (gwtypc@834AF78F.8B603116.F64220F6.IP) (Ping timeout)
[13:40:53] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:41:49] <eddyb> pnkfelix: reading back the log - I'm like strcat's evil twin brother :/
[13:42:07] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[13:42:19] <pnkfelix> eddyb: I figured I'd let you stop putting your foot in your mouth
[13:42:38] <pnkfelix> eddyb: :)
[13:42:48] <eddyb> aaand now I have to look that up
[13:43:02] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:44:30] <pnkfelix> eddyb: Oh are you not a native english speaker?  I hadn't realized
[13:45:26] <eddyb> pnkfelix: I've been banned a few times from IRC channels for not expressing myself properly and ending up saying something even completely opposite from what I wanted to
[13:45:30] <pnkfelix> eddyb: (your command of the language has been formidable)
[13:46:13] <eddyb> it's all an act. I've never been able to put my thoughts into words well, unless there's some highly technical (yet simplistic) way to do so
[13:47:17] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[13:50:10] <eddyb> pnkfelix: I tend to make pretty good first impressions only to completely ruin them later. that's actually one of the few reasons I gave up applying for a Rust job
[13:50:56] <eddyb> but I'm going offtopic again. maybe I should spend this week writing a few RFCs to clear my head. though I know I won't
[13:51:28] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[13:52:50] <huon> eddyb: you should apply for a Rust job (what have you got to lose?)
[13:53:48] <huon> nmatsakis: could you glance at the docs I wrote in https://github.com/mozilla/rust/pull/13070 to check I'm not saying anything ridiculous? (thanks)
[13:53:52] <eddyb> huon: are you talking through your dreams?
[13:54:00] <huon> eddyb: I lied :P
[13:54:12] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[13:54:14] <huon> cmr: ( https://github.com/rust-lang/rfcs/pull/19 )
[13:54:20] * huon -> bed for real
[13:54:23] <nmatsakis> huon: ok
[13:56:51] * sigma had eddyb pegged as a native english speaker
[13:57:22] <pnkfelix> sigma: he actually never confirmed or denied my assumption. :)
[13:57:34] <pnkfelix> sed -e s/or/nor/
[13:57:35] <eddyb> sigma: most of the curve was during pedigree development
[13:58:03] <eddyb> pcmattman can attest to that, I guess
[13:58:45] <eddyb> also, IRC in general helped me
[13:58:56] *** Quits: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[14:02:21] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:02:58] * eddyb is a product of a decaying society and the internet
[14:03:05] <eddyb> I would add more dramatic nonsense but I gtg
[14:04:42] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:08:23] *** Quits: zimbabao (rajaram@817E69AE.26907A.D2D1FAF0.IP) (Ping timeout)
[14:11:59] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[14:11:59] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14199b766 to 1411d9483: 02http://git.io/N3iJvQ
[14:11:59] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[14:12:01] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[14:12:01] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/s3Tskg
[14:12:01] <ghrust> 13rust/06auto 14cda3334 15Huon Wilson: syntax: allow `trace_macros!` and `log_syntax!` in item position....
[14:12:01] <ghrust> 13rust/06auto 14f8f60d8 15bors: auto merge of #12998 : huonw/rust/log_syntax, r=alexcrichton...
[14:12:01] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[14:16:52] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[14:16:52] *** ChanServ sets mode: +ao dherman dherman
[14:21:16] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[14:22:58] *** Joins: average-bot (average-ti@A191A65E.125EA510.F365210E.IP)
[14:23:00] <average-bot> full version pc game http://tinyurl.com/qjpb87s
[14:24:33] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:26:23] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:30:17] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[14:30:26] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[14:30:52] *** Quits: average-bot (average-ti@A191A65E.125EA510.F365210E.IP) (Quit: )
[14:35:05] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[14:38:29] <cmr> aatch: do you know what was up with meyer?
[14:38:57] <eddyb> nmatsakis: I jinxed it :( http://buildbot.rust-lang.org/builders/auto-bsd-64-opt/builds/4711/steps/test/logs/stdio
[14:39:13] <eddyb> nmatsakis: I'll add the pointer casts when I get back
[14:45:39] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:46:16] *** Joins: gwty (gwtypc@834AF78F.8B603116.F64220F6.IP)
[14:48:01] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:48:09] *** Quits: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca) (Quit: canhtak)
[14:51:25] *** Joins: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca)
[14:53:25] *** Quits: gwty (gwtypc@834AF78F.8B603116.F64220F6.IP) (Ping timeout)
[14:54:46] *** Quits: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP) (Ping timeout)
[14:58:39] <nmatsakis> eddyb: hmmmm
[14:58:53] <nmatsakis> eddyb: well, you can also do those other changes too if you have to  edit it ;) I was just trying to spare you some rebasing pain...
[14:59:20] <nmatsakis> eddyb: I remember some problems around casting due to extern fns too, maybe that's part of it
[14:59:32] <nmatsakis> eddyb: e.g., if you have the same extern fn declared twice in your code, with different signatures
[15:00:08] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[15:01:55] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[15:04:08] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[15:05:41] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[15:07:58] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:09:42] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:11:48] *** Joins: zimbabao (rajaram@817E69AE.26907A.D2D1FAF0.IP)
[15:13:18] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[15:16:05] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[15:16:05] *** ChanServ sets mode: +qo brson brson
[15:16:21] <cmr> flaper87: thanks for the cc on the oibit rfc
[15:16:47] <flaper87> cmr: my pleasure :)
[15:17:19] <flaper87> cmr: did you get my msgs about phabricator ? I played with it a bit yday, looks powerful 
[15:17:31] <flaper87> all good so far. I just submitted a patch I had already submitted to GH
[15:17:45] <cmr> flaper87: yup, already reviewed it
[15:23:21] <cmr> flaper87: I'm excited about arcanist's lint support. check out https://secure.phabricator.com/book/phabricator/article/arcanist_lint/
[15:23:24] <doener> can you get diffs for individual commits in the code review in phabricator?
[15:23:41] <cmr> doener: not that I've been able to tell :\
[15:23:44] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Input/output error)
[15:24:06] <cmr> I was expecting each commit sha to be clickable in the diff overview
[15:24:46] <doener> too bad... still looking for something that we might be able to use at work, but not having individual diffs is a no-go
[15:26:12] *** Joins: edwardw (edwardw@2BFF2300.F4429B.7E4FEB66.IP)
[15:26:58] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[15:26:58] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/s3Tskg
[15:26:58] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[15:27:29] <cmr> doener: https://secure.phabricator.com/T1508
[15:27:34] *** Quits: MaXYZW (MaXYZW@moz-F787D177.dk.customer.tdc.net) (Quit: Computer has gone to sleep.)
[15:27:43] *** Quits: glaebhoerl (glaebhoerl@moz-3590251D.kabelnet.hu) (Connection reset by peer)
[15:27:47] *** Joins: glaebhoerl_ (glaebhoerl@moz-3590251D.kabelnet.hu)
[15:28:53] <cmr> doener: in their irc (#phabricator on freenode) https://gist.github.com/cmr/9742447
[15:29:19] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:29:39] <doener> ah, cool
[15:30:17] <cmr> I'm surprised both by how polished and young this tool is sometimes.
[15:31:23] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:32:00] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[15:32:00] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/LuZ-VQ
[15:32:00] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[15:32:02] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[15:32:02] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/3J0dJg
[15:32:02] <ghrust> 13rust/06auto 1457ac379 15Felix S. Klock II: Correct overly broad definition of `'static` kind bound....
[15:32:02] <ghrust> 13rust/06auto 14f460ffc 15bors: auto merge of #13113 : pnkfelix/rust/correct-static-kind-doc, r=huonw...
[15:32:02] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[15:32:28] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[15:34:56] *** Joins: MaXYZW (MaXYZW@moz-F787D177.dk.customer.tdc.net)
[15:34:58] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[15:35:19] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[15:37:02] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[15:39:30] *** Joins: gwty (gwtypc@834AF78F.8B603116.F64220F6.IP)
[15:42:50] *** Quits: gwty (gwtypc@834AF78F.8B603116.F64220F6.IP) (Ping timeout)
[15:44:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:45:57] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[15:46:25] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:46:44] *** Quits: MaXYZW (MaXYZW@moz-F787D177.dk.customer.tdc.net) (Quit: Computer has gone to sleep.)
[15:47:35] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Ping timeout)
[15:49:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:50:49] *** Quits: japaric (japaric@E3A27319.2A33E3C8.A936879B.IP) (Ping timeout)
[15:51:04] *** Joins: lpy (lpy@1834E2CB.F09091A8.1348A864.IP)
[16:01:22] *** Quits: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP) (Quit: leaving)
[16:03:06] *** Joins: japaric (japaric@E3A27319.2A33E3C8.A936879B.IP)
[16:04:35] *** Quits: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net) (Ping timeout)
[16:04:43] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[16:04:56] *** Quits: zimbabao (rajaram@817E69AE.26907A.D2D1FAF0.IP) (Ping timeout)
[16:05:09] <erickt> nmatsakis: ping
[16:05:24] *** Joins: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net)
[16:05:49] <nmatsakis> erickt: pong
[16:06:03] <nmatsakis> erickt: oh, I've been wanting to ping you about something too.
[16:06:21] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Quit:   .)
[16:06:25] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[16:06:29] <erickt> good morning nmatsakis! I ran into an interesting quirk with generic methods. Is this valid? specifically line 37? https://gist.github.com/erickt/9743270
[16:06:34] <erickt> nmatsakis: oh great! what's up?
[16:07:17] *** Joins: glaebhoer1 (glaebhoerl@moz-3590251D.kabelnet.hu)
[16:07:18] *** Quits: glaebhoerl_ (glaebhoerl@moz-3590251D.kabelnet.hu) (Ping timeout)
[16:07:53] <nmatsakis> erickt: that should not be valid, no. You shouldn't be permitted tigher bounds than the trait. This is the subject of issue #2687 (and PR #12611)
[16:08:39] <erickt> nmatsakis: shucks, I thought it shouldn't be allowed, but then I also thought it might help alleviate some of the pains with long typarams
[16:09:58] <erickt> nmatsakis: specifically for Encodable/Decodable. We could slip in an extra constraint on the `encode`/`decode` method that the encoder *also* needs to expose these methods
[16:11:12] <nmatsakis> erickt: yeah so encodable / decodable is what I wanted to talk about
[16:11:25] <nmatsakis> the current setup (which I know I argued for) is maybe not quite right
[16:11:31] <nmatsakis> though HKT would help here
[16:11:39] <nmatsakis> this has to do with problems that edwardw encountered while patching up some bugs
[16:11:49] <erickt> :) I started an RFC on thursday to do another pass on them
[16:11:50] <nmatsakis> in particular the way we have Encodable<S> where S is the "serializer"
[16:12:01] <nmatsakis> vs Encodable { fn encode<S:Serializer>(s: &mut S); }
[16:12:14] <nmatsakis> anyway, I started opening an issue discussing it,
[16:12:17] <nmatsakis> and got dragged off
[16:12:25] <nmatsakis> and I've been meaning to get back to it
[16:12:53] <nmatsakis> but I think the TL;DR is that for now the best thing to do is to define the trait Encodable in the way I wrote above
[16:13:01] <erickt> yeah I didn't know what to do for edwardw
[16:13:07] <nmatsakis> the reason has to do with lifetimes and so on
[16:13:33] <nmatsakis> (grr I've been so time constrainted lately, but one thing I want to do is to pull apart his PR, there are a couple of issues packed in there.)
[16:13:45] *** Joins: newbie (kvirc@moz-A1C6347E.dip0.t-ipconnect.de)
[16:13:54] <nmatsakis> anyway, did you see/understand the problem he uncovered with JSON?
[16:13:57] <nmatsakis> er, JSOn.rs
[16:14:03] <erickt> wouldn't that mean that we can't then write a Encodable that know's it working with a JsonEncoder?
[16:14:13] <nmatsakis> yes
[16:14:19] <nmatsakis> are we employing that?
[16:14:21] <nmatsakis> I didn't dig deeply
[16:14:26] <nmatsakis> another option would be 
[16:14:41] <nmatsakis> to just rewrite the particular method in question a bit
[16:14:44] <cmr> erickt: that's actually not strictly true.
[16:14:59] <cmr> erickt: I believe you could cast it to an &Any and then use it's is method to check if it's a JsonEncoder
[16:15:08] <nmatsakis> ick
[16:15:12] <erickt> nmatsakis: no, but I did just ask nical to see if he could implement it in https://github.com/mozilla/rust/pull/12740#issuecomment-38412784
[16:15:16] <cmr> ick indeed
[16:15:20] <nmatsakis> erickt: so another option would be
[16:15:22] <nmatsakis> for that particular method
[16:15:32] <nmatsakis> to have a serializer like ToMemWriterSerializer { mw: MemWriter }
[16:15:40] <nmatsakis> rather than having it keep a &mut Writer object
[16:15:51] <nmatsakis> then you can have the bound Encodable<MemWriterSerializer>
[16:16:00] <erickt> nmatsakis: I think I'm using this technique in my Hasher rewrite though
[16:16:01] <nmatsakis> i.e., no borrowed data, just ownership
[16:16:12] <nmatsakis> I was afraid of that ;) 
[16:16:17] <nmatsakis> I haven't looked deeply into that
[16:16:32] <nmatsakis> but I had this nagging feeling
[16:16:57] <nmatsakis> let me look around briefly
[16:17:25] <nmatsakis> erickt: it's only a problem if you are trying to use a serializer that's stack local, basically
[16:17:44] <nmatsakis> erickt: and it's possible that in the future (with higher-kinded-types) we can make that work
[16:17:52] <nmatsakis> so it might be best to work around the problem locally for now and keep the trait design as is
[16:18:01] <nmatsakis> since I think it's probably the better trait design
[16:18:02] <erickt> nmatsakis: is this what you were worried about? https://github.com/mozilla/rust/blob/master/src/libstd/hash/sip.rs#L255
[16:18:27] <nmatsakis> erickt: ah, no, that's ok
[16:18:40] <nmatsakis> erickt: you sidestepped the problem I think because the trait takes &mut S
[16:18:46] <nmatsakis> and the type S itself doesn't have borrowed data in it
[16:19:02] <nmatsakis> so another option with the memwriter thing, actually,
[16:19:08] <nmatsakis> would be to not take a &mut Writer, but rather ~Writer
[16:19:22] <nmatsakis> but it's not really what you want elsewhere, just that one method
[16:19:36] <nmatsakis> anyway, after this discussion, I'm thinking it best to create a targeted PR
[16:19:40] <nmatsakis> that just patches this function
[16:19:44] <nmatsakis> and which definitely patches up this hole
[16:19:47] <nmatsakis> before we can build more traits atop of it :)
[16:19:50] <nmatsakis> I've let it sit too long
[16:20:00] <erickt> :)
[16:20:28] <nmatsakis> but we can keep the trait as is (I think!) and let HKT (eventually) enable the full flexibility I'd like to see
[16:20:36] <erickt> another option I guess is we could go back to a really old idea and have the Encoder/Encodable thread some state object through each method
[16:21:02] <erickt> would that also address this problem?
[16:21:39] <nmatsakis> yes, I debated that too.
[16:21:50] <nmatsakis> it would address the problem,
[16:21:57] <nmatsakis> and in *some sense* it's the better solution
[16:22:23] <nmatsakis> maybe
[16:22:30] <nmatsakis> i.e., it isolates out the user-data from the "serializer"
[16:22:40] <nmatsakis> because I can imagine that most of the time you want to target a specific serializer
[16:22:52] <nmatsakis> it's mostly about having some user-data that's specific to your type(s)
[16:23:02] <nmatsakis> and not so much about the format you're serializing into
[16:23:14] <nmatsakis> as we talked about way back when, you can model this using object types etc etc but...
[16:23:26] <sigma> Is there a write-up anywhere on what's involved in implementing HKT?
[16:23:43] <nmatsakis> no. there isn't really a concrete design on the table. 
[16:23:47] <cmr> sigma: there's not even a writeup on its affects on the language
[16:24:08] <cmr> it's still a ways down the road
[16:24:14] <nmatsakis> I've thought it through somewhat but recently been thiking of a different design than what I had in mind; but I have to do a bunch of other writeup first ;) and then some research too 
[16:24:40] <nmatsakis> (I'm not too afraid of it though, I think we can at least do what haskell does, but maybe we can do more.)
[16:25:08] <edwardw> >= haskell? hurray
[16:25:10] <sigma> well that's me out then ^^ I barely understand what Haskell does
[16:27:48] <erickt> nmatsakis: one other check on threading user state around in Encoder/Decoder is that we've got that PR to allow encode* to return errors. We'll be paying for the syntatic overhead anyway, so it won't add *that* much more to the use
[16:28:09] <erickt> nmatsakis: I'm not sure if we lose anything by doing it though
[16:28:44] *** Joins: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP)
[16:29:56] <nmatsakis> erickt: I don't think you really lose anything.
[16:30:05] <cmr> nmatsakis: r? https://github.com/mozilla/rust/pull/13001
[16:31:27] <nmatsakis> cmr: ok
[16:31:41] <nmatsakis> I read it once already but realized I needed to read up more on the meaning ofLLVM's attributes
[16:32:02] <cmr> (http://llvm.org/docs/LangRef.html#parameter-attributes)
[16:33:46] <cmr> I think we can also apply noalias to non-immediate args.
[16:34:19] <cmr> actually nevermind. passing the same local should make two args alias.
[16:34:59] <nmatsakis> cmr: is there a specific reason you opted to inclde the ReFree(FreeRegion...) case
[16:35:31] <cmr> nmatsakis: no
[16:35:46] <nmatsakis> ok, I think that's...maybe not wrong, but not obviously correct, possibly just impossible
[16:36:25] <nmatsakis> I'd be happier if it weren't there :)
[16:36:29] <cmr> will remove
[16:38:59] <cmr> done
[16:40:10] <nmatsakis> cmr: (should probably retest to see if I'm right ;)
[16:40:17] <doener> cmr: the ZExt stuff was for my bool-as-i1 experiment, it's not useful without that change
[16:40:22] <cmr> doener: ok
[16:40:27] <nmatsakis> it depends a bit on who invokes the register_fn,
[16:40:31] <nmatsakis> but baed on callers I can see,
[16:40:34] <nmatsakis> rebound() is the right thing
[16:40:43] <nmatsakis> since they are pasing in the "external" signature
[16:41:33] <cmr> it'd be nice if our test harness supported making sure gen'd code has certain properties
[16:42:39] *** Quits: doener (bs@moz-AA189A5A.unitymedia.biz) (Quit: leaving)
[16:46:00] <cmr> nmatsakis: seems to be true for the usecases I'm testing
[16:46:24] <nmatsakis> cmr: ok
[16:54:12] *** Quits: luz (lu.cy@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[16:54:35] *** Joins: luz (lu.cy@moz-CD18B14B.customer.cdi.no)
[16:55:54] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[16:55:54] *** ChanServ sets mode: +ao pcwalton pcwalton
[16:57:34] *** Quits: Kxepal (Miranda@moz-CC5238CC.pppoe.mtu-net.ru) (Ping timeout)
[16:58:41] *** Joins: MaXYZW (MaXYZW@moz-F787D177.dk.customer.tdc.net)
[16:59:47] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[17:00:29] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[17:00:29] *** ChanServ sets mode: +ao pcwalton pcwalton
[17:01:26] *** Joins: Kxepal (Miranda@moz-DE055BA8.pppoe.mtu-net.ru)
[17:01:58] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[17:01:58] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14f460ffc to 14f8f60d8: 02http://git.io/N3iJvQ
[17:01:58] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[17:02:32] *** Joins: gwty (gwtypc@834AF78F.8B603116.F64220F6.IP)
[17:02:38] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:06:01] *** Joins: jensnockert (jensnocker@moz-EF95FD94.astro.lu.se)
[17:11:14] *** Quits: MaXYZW (MaXYZW@moz-F787D177.dk.customer.tdc.net) (Quit: Computer has gone to sleep.)
[17:12:40] *** Joins: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP)
[17:13:31] *** Quits: lpy (lpy@1834E2CB.F09091A8.1348A864.IP) (Client exited)
[17:15:32] *** Quits: jensnockert (jensnocker@moz-EF95FD94.astro.lu.se) (Input/output error)
[17:17:52] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:18:38] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[17:18:58] *** Joins: MaXYZW (MaXYZW@moz-F787D177.dk.customer.tdc.net)
[17:20:12] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:22:04] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[17:22:31] *** Joins: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP)
[17:23:14] *** Quits: gwty (gwtypc@834AF78F.8B603116.F64220F6.IP) (Ping timeout)
[17:25:25] *** Quits: glaebhoer1 (glaebhoerl@moz-3590251D.kabelnet.hu) (Ping timeout)
[17:28:00] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[17:29:20] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:31:33] *** Joins: jensnockert (jensnocker@moz-EF95FD94.astro.lu.se)
[17:31:39] *** Joins: gwty (gwtypc@1DCDD019.781836C4.CEFA97FA.IP)
[17:34:54] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:34:54] *** Quits: rook (rook@moz-31CCE085.hfc.comcastbusiness.net) (Connection reset by peer)
[17:36:47] *** Quits: blank_name (blank_name@5EC13E3.964BADD.93A5C78C.IP) (Ping timeout)
[17:37:25] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[17:37:56] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[17:37:56] *** ChanServ sets mode: +ao pcwalton pcwalton
[17:38:49] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[17:38:58] *** Quits: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca) (Quit: canhtak)
[17:39:38] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:40:20] *** Joins: blank_name (blank_name@5EC13E3.964BADD.93A5C78C.IP)
[17:41:06] *** Quits: luz (lu.cy@moz-CD18B14B.customer.cdi.no) (Input/output error)
[17:41:12] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[17:41:14] *** Joins: luz (lu.cy@moz-CD18B14B.customer.cdi.no)
[17:41:59] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:42:40] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[17:44:02] *** Quits: gwty (gwtypc@1DCDD019.781836C4.CEFA97FA.IP) (Client exited)
[17:44:31] *** Quits: MaXYZW (MaXYZW@moz-F787D177.dk.customer.tdc.net) (Input/output error)
[17:52:04] *** Joins: sunfish (chatzilla@13F2CEC5.7672369.D8E68FF6.IP)
[17:54:36] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:55:53] <acrichto> brson: do you have thoughts on https://github.com/mozilla/rust/pull/13049 ?
[17:57:24] <acrichto> cmr: what's the status of https://github.com/mozilla/rust/pull/12526 ?
[17:57:31] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[17:57:52] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[17:59:38] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[18:02:09] *** Joins: Sharp (Sharp@moz-3301C7AB.static-ip.telepacific.net)
[18:05:30] <sfackler> acrichto: IMO, a reader that constantly reads 0 bytes is bad and should feel bad
[18:05:34] *** Quits: Sharp (Sharp@moz-3301C7AB.static-ip.telepacific.net) (Quit: Sharp)
[18:05:46] <acrichto> that's what I would think
[18:06:11] <sfackler> fwiw, like 90% of the methods on Reader will probably loop forever as well
[18:06:50] <acrichto> that's a good point
[18:06:54] <brson> acrichto: no
[18:09:27] *** Quits: jensnockert (jensnocker@moz-EF95FD94.astro.lu.se) (Input/output error)
[18:09:54] *** Joins: jensnockert (jensnocker@moz-EF95FD94.astro.lu.se)
[18:11:38] *** Quits: jensnockert (jensnocker@moz-EF95FD94.astro.lu.se) (Ping timeout)
[18:11:57] *** Joins: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP)
[18:11:57] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/pgA9qg
[18:11:57] *** Parts: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP) ()
[18:12:02] *** Joins: jensnockert (jensnocker@moz-EF95FD94.astro.lu.se)
[18:13:29] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[18:13:29] *** ChanServ sets mode: +o tjc
[18:17:04] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[18:17:04] <ghrust> [13rust] 15bors pushed 1 new commit to 06auto: 02http://git.io/D9Sj-Q
[18:17:04] <ghrust> 13rust/06auto 1461309a3 15bors: auto merge of #13063 : brson/rust/dist, r=alexcrichton...
[18:17:04] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[18:18:12] *** Joins: Sharp (Sharp@moz-3301C7AB.static-ip.telepacific.net)
[18:28:24] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: rcirc on GNU Emacs 24.3.1)
[18:37:01] *** Joins: glaebhoer1 (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP)
[18:38:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:45:00] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:47:19] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:50:53] *** Joins: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca)
[18:52:41] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[18:53:03] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[18:53:13] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[18:59:16] <cmr> acrichto: I'm getting back to it Real Soon Now.
[19:00:29] <eddyb> OP will surely deliver
[19:01:04] <cmr> eddyb: keep it up, I'll leave you out of TWiR :P
[19:01:31] <eddyb> cmr: you get that for free now
[19:01:58] <eddyb> since I seem to be so terrible at getting even the simplest things done
[19:02:13] *** Quits: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca) (Quit: canhtak)
[19:03:45] <cmr> pft
[19:03:49] <cmr> you wrote a 10k patch
[19:05:38] <eddyb> cmr: when?
[19:06:19] <cmr> https://github.com/mozilla/rust/pull/12735
[19:06:59] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[19:06:59] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1461309a3 to 14e6468a8: 02http://git.io/N3iJvQ
[19:06:59] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[19:07:05] <eddyb> cmr: oh I'm so bad at keeping time
[19:07:19] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:07:20] <eddyb> well, no, "7 days ago"
[19:07:41] <eddyb> cmr: I guess it just barely didn't make it into last week?
[19:08:13] <cmr> it was 6 days ago yesterday when I started twir :p
[19:08:58] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[19:10:11] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[19:10:38] *** Quits: jensnockert (jensnocker@moz-EF95FD94.astro.lu.se) (Input/output error)
[19:10:39] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:11:11] *** Joins: jensnockert (jensnocker@moz-EF95FD94.astro.lu.se)
[19:12:52] *** Quits: jensnockert (jensnocker@moz-EF95FD94.astro.lu.se) (Ping timeout)
[19:24:19] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[19:29:23] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:29:37] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[19:30:26] *** Joins: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca)
[19:31:19] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:40:45] *** Quits: pcmattman (pcmattman@moz-D9B7D938.net) (Ping timeout)
[19:41:17] *** Joins: pcmattman (pcmattman@moz-D9B7D938.net)
[19:50:04] <eddyb> acrichto: \o/ https://github.com/mozilla/rust/pull/13117
[19:50:16] <eddyb> good riddance
[19:50:21] *** Quits: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP) (Connection reset by peer)
[19:50:47] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:51:12] *** Joins: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP)
[19:51:36] <edwardw> good because smaller binary?
[19:51:49] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz)
[19:51:50] <acrichto> it's just one less dep to deal with
[19:51:58] <acrichto> it was super hacky how the crate map was loaded/dealt with
[19:52:01] <eddyb> and one less complication in trans
[19:52:11] <eddyb> I think I've had issues with that code once or twice
[19:52:18] <edwardw> k
[19:52:22] <eddyb> and I looked at it thinking "how I wish this wasn't here"
[19:52:41] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:54:00] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Input/output error)
[19:55:48] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:00:34] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[20:02:43] *** Quits: edwardw (edwardw@2BFF2300.F4429B.7E4FEB66.IP) (Quit: Leaving...)
[20:03:34] *** Joins: Jesse (jruderman@moz-62518563.mtv2.mozilla.com)
[20:05:25] <aatch> cmr, meyer was having issues submitting a diff for review because of characters that were not in the Basic Multilingual Plane, he was working on unicode-related stuff.
[20:06:09] <aatch> cmr, I was just wondering if there was a setting you could tweak on your end, since the error was from Phabricator, not arcanist
[20:10:48] <cmr> aatch: hmm, I don't see anything. I'll pester their irc channel
[20:10:55] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[20:12:43] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Quit: leaving)
[20:12:46] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[20:12:46] *** ChanServ sets mode: +qo brson brson
[20:13:23] <eddyb> cmr: oh dear is this going to turn into "Phabricator phails because PHP can't into unicode"?
[20:13:54] <brson> flaper87: how did the snaps go?
[20:16:23] <cmr> jjj
[20:16:29] <cmr> feh
[20:19:14] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[20:19:14] *** ChanServ sets mode: +o tjc
[20:19:20] <acrichto> brson: r? https://github.com/mozilla/rust/pull/12900
[20:19:52] <flaper87> brson: all good!
[20:19:59] <flaper87> brson: snapshot landed yday
[20:21:50] <eddyb> acrichto: did you end up reverting (*foo).bar now that autoderef is (supposed to be) working cross-crate?
[20:22:04] <cmr> eddyb: no, actually it's mysql's fault
[20:22:31] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[20:22:31] *** ChanServ sets mode: +ao dherman dherman
[20:22:45] <acrichto> eddyb: not yet, but it's only in I think around 5 places
[20:23:57] <flaper87> cmr: can phabricator run on psql ?
[20:24:07] <cmr> flaper87: no
[20:24:31] * flaper87 sad panda
[20:26:10] <brson> flaper87: thanks!
[20:26:45] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[20:26:45] <ghrust> [13rust] 15brson 04force-pushed 06dist-snap from 14b0bb16e to 14b797867: 02http://git.io/0Tp-4A
[20:26:45] <ghrust> 13rust/06dist-snap 14de7f2a7 15Brian Anderson: mk: Don't rm 'dist' during clean, just its contents...
[20:26:45] <ghrust> 13rust/06dist-snap 143f937e4 15Brian Anderson: mk: Fix a minor UI bug
[20:26:46] <ghrust> 13rust/06dist-snap 141c43fbd 15Brian Anderson: mk: Fix prepare.mk...
[20:26:48] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[20:26:50] <flaper87> brson: np, my pleasure
[20:28:52] <eddyb> brson: is that a test for 0.10?
[20:29:32] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[20:29:39] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:30:35] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:31:13] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[20:31:24] <brson> eddyb: i am trying to get the dist bots working again, so sorta
[20:33:50] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Input/output error)
[20:34:34] *** Quits: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP) (Quit: victorporof)
[20:39:11] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:42:03] *** Quits: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP) (Ping timeout)
[20:42:35] <acrichto> brson: if you're in a reviewing mood, you could also take a look at https://github.com/mozilla/rust/pull/12991, but it may take some time
[20:46:16] <brson> ok
[20:46:55] *** Joins: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP)
[20:48:07] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[20:57:00] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[20:57:00] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/WKYrgw
[20:57:00] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[20:57:16] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[20:57:35] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[21:02:00] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[21:02:00] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/t_SDPA
[21:02:00] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[21:02:03] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[21:02:04] <ghrust> [13rust] 15bors pushed 12 new commits to 06auto: 02http://git.io/KjgvgA
[21:02:04] <ghrust> 13rust/06auto 14da118e8 15Alex Crichton: Snapshot cleanup
[21:02:04] <ghrust> 13rust/06auto 14dd64bd8 15Alex Crichton: std: Move NativeMutex from &mut self to &self...
[21:02:04] <ghrust> 13rust/06auto 14d6b3f1f 15Alex Crichton: sync: Move the concurrent queue to using &self...
[21:02:06] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[21:11:23] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:11:28] <aatch> cmr, but HHVM has pgsql support now!
[21:11:34] <cmr> aatch: :P
[21:11:36] * aatch implemented it
[21:11:39] * cmr knows
[21:12:35] <aatch> cmr, you manage to fix the issue?
[21:12:43] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[21:12:48] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[21:12:50] <cmr> aatch: there's no issue to fix, but I'm going to try and workaround it when I'm done twir (almost done)
[21:13:12] <aatch> cmr, fair enough.
[21:15:01] *** Quits: Axord (xord@moz-BC8E2FBC.static.rvsd.ca.charter.com) (Ping timeout)
[21:16:45] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:22:36] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[21:26:40] *** Quits: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP) (Ping timeout)
[21:27:36] *** Joins: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP)
[21:29:31] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[21:29:31] <ghrust> [13rust] 15brson 04force-pushed 06dist-snap from 14b797867 to 1439b48fb: 02http://git.io/0Tp-4A
[21:29:31] <ghrust> 13rust/06dist-snap 14e30ab71 15Brian Anderson: mk: Stop building OS X .pkg as part of 'make dist'...
[21:29:31] <ghrust> 13rust/06dist-snap 14df141e6 15Brian Anderson: mk: Reorder definitions in dist.mk...
[21:29:31] <ghrust> 13rust/06dist-snap 144176cf4 15Brian Anderson: mk: Cleanup
[21:29:33] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[21:32:12] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[21:32:12] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/--aTVg
[21:32:12] <ghrust> 13rust/06auto 144fdff3e 15Alex Crichton: native: Fix a possible deadlock in spawn...
[21:32:12] <ghrust> 13rust/06auto 14bcaaffb 15bors: auto merge of #13080 : alexcrichton/rust/possible-osx-deadlock, r=brson...
[21:32:13] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[21:32:15] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[21:32:15] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14b2fde3e to 14e06348e: 02http://git.io/N3iJvQ
[21:32:15] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[21:33:28] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[21:40:41] *** Joins: Axord (xord@moz-BC8E2FBC.static.rvsd.ca.charter.com)
[21:41:19] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[21:42:42] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[21:44:01] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Connection reset by peer)
[21:44:13] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[21:44:20] <nrc> Why does iter::any need mut self?
[21:45:22] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[21:45:26] <strcat> to mutate the iterator
[21:45:56] <strcat> it doesn't need it by-value since it's not going to store it anywhere
[21:46:15] <nrc> urgh, of course
[21:46:17] <strcat> most of the iterators do take by-value, and then by_ref exists to take "by-reference" (since your value is a reference)
[21:46:28] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Connection reset by peer)
[21:46:58] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[21:47:08] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[21:47:12] <nrc> so why do any and find take by ref and not value?
[21:47:35] <strcat> because they're not adaptors
[21:47:37] <nrc> and a few others
[21:47:40] <strcat> they don't benefit from by-value
[21:47:57] <strcat> only ones that are adaptors take iterators by-value
[21:47:57] <eddyb> nrc: they have similar usage to "next"
[21:48:02] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Connection reset by peer)
[21:48:12] <eddyb> nrc: they mutate an iterator you have
[21:48:32] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[21:48:46] <nrc> oh I see, so the ones that return the adapter take by value and the ones that actually return a result are by ref
[21:49:22] <nrc> this makes perfect sense, but purely as a client of the library it is very unintuitive
[21:49:43] <eddyb> cmr: wait, so this week we got a 400MB gain?
[21:50:05] <cmr> eddyb: seems so!
[21:50:08] <eddyb> cmr: the well placed indirection is in librustc (middle::ty) btw, not libsyntax
[21:50:13] <cmr> irfy will be back soon
[21:50:19] <cmr> fixing
[21:50:30] <eddyb> cmr: irfy will be so anticlimactic =))
[21:50:33] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Connection reset by peer)
[21:50:37] <strcat> nrc: technically they could all take by-ref, or all take by-value
[21:50:48] <strcat> nrc: but it's more useful for the adaptors to be by-value, at least atm
[21:51:01] <eddyb> indirection in adaptors could lead to slowdowns
[21:51:14] <eddyb> (if it's not optimized out)
[21:51:24] <strcat> it will be because we'll be marking &mut self noalias
[21:51:52] <strcat> atomics are fixed so we can probably land that soon
[21:54:13] <eddyb> https://github.com/mozilla/rust/pull/12924/files haha there's actually less code *and* it's faster
[21:54:51] <sfackler> eddyb: we should really just kill off the entire thing and use gmp
[21:55:04] <cmr> we can't
[21:55:06] <cmr> license.
[21:55:25] <sfackler> lgpl should be work-aroundable
[21:55:31] <strcat> we could, the license of libgcc, etc. is similar
[21:55:33] <strcat> and we use those
[21:56:03] <cmr> we only use libgcc_s, and it has an exception for this
[21:56:15] <strcat> cmr: LGPL allows proprietary software
[21:56:17] <sfackler> I was talking to some people at the last Rust meetup (pcwalton maybe?) and the license apparently isn't that much of an issue
[21:56:17] <cmr> yes.
[21:56:24] <cmr> libgcc_s omits the linking clause though.
[21:56:35] <cmr> sfackler: it's not that big of a deal.
[21:56:42] <eddyb> I'd still like to have a simplistic Big(U)Int in Rust (maybe not in the main repo) that has decent optimizations
[21:56:51] <eddyb> I wonder if Polly can improve its performance
[21:56:53] <strcat> LGPL allows a) dynamic linking and b) static linking if you make linkable object files (.o/.a) available to your users
[21:57:00] <cmr> I know
[21:57:07] * strcat doesn't see it as a problem
[21:57:09] <strcat> ;p
[21:57:23] <eddyb> did anyone try to get Polly working with Rust?
[21:57:42] <sfackler> polly?
[21:58:07] <eddyb> sfackler: http://polly.llvm.org/performance.html
[21:58:10] <cmr> eddyb: no.
[21:58:15] <eddyb> graphs don't lie :P
[21:58:22] <aatch> http://polly.llvm.org/
[21:58:27] <aatch> I assume
[21:58:29] <aatch> dammit.
[21:58:44] <eddyb> "covariance" what is that?
[21:59:10] <eddyb> sounds like a benchmark for some sort of algorithm that you'd find in a compiler
[21:59:44] <eddyb> http://www.cse.ohio-state.edu/~pouchet/software/polybench/ yupp
[22:00:24] <eddyb> "Multiresolution analysis kernel (MADNESS)" aww cheesy names
[22:01:13] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[22:01:25] <aatch> Looks like Polly is basically a linear equation solver, or at least, it's based on the same theories.
[22:02:09] <eddyb> aatch: yeah, but it applies that to modern architecture layout
[22:02:28] <eddyb> all that fun cache stuff
[22:02:51] <aatch> eddyb, oh, it's very clever, even figuring out how to model the state as a linear equation (with integer variables no less!) is hard.
[22:03:26] <aatch> I mean, I had a hard enough time just trying to convert to a linear approximation from an existing set of non-linear equations.
[22:04:18] <eddyb> aatch: don't tempt me to go back into the land of SAT
[22:04:43] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Client exited)
[22:05:03] <eddyb> two years is enough wasted time on a wild goose chase
[22:05:03] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: brb)
[22:05:23] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[22:05:23] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[22:05:24] <aatch> eddyb, apologies, I'm all SAT'd out from my brief foray. Probably didn't help that I was working with inherently non-linear systems (basically physics)
[22:06:10] <eddyb> and that reminds of me of the N-body problem. nope, not going to attempt to solve that either
[22:06:38] <aatch> eddyb, but, but, Fields Medal! :P
[22:07:27] <eddyb> every new approach I could come up with is just a rehashed one from 4 generations ago that's totally bogus
[22:07:55] <eddyb> aatch: this? https://en.wikipedia.org/wiki/Fields_medal
[22:08:04] <aatch> eddyb, yeah, unless trying to solve these kinds of problems is your day-job, it's unlikely you're going to be able to tread new ground.
[22:08:20] <eddyb> $15k for N-body? lol, you must be joking
[22:08:45] <eddyb> just go to google, they have to have something that can use a solution :P
[22:10:00] <eddyb> aatch: a solution to N-body/many-body would be at the center of an universal simulator
[22:10:14] <eddyb> which is a ridiculous daydream for many reasons
[22:10:33] * eddyb starts to count his NP-hard dreams
[22:10:36] *** Quits: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca) (Quit: canhtak)
[22:10:37] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Quit: Computer has gone to sleep.)
[22:11:01] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[22:11:05] <aatch> eddyb, eh, just prove that P=NP, that's solves that pesky NP-hard problem.
[22:11:17] <eddyb> okay, still one hand, I've not gone too insane thus far
[22:11:27] <eddyb> aatch: aaaaand break the internet in the process?
[22:12:11] <aatch> eddyb, shush, don't let people know that our security is based on something we *think* is hard, probably.
[22:12:36] <eddyb> I can shout and nobody will listen
[22:12:44] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[22:12:50] <eddyb> just because I'm too dumb to prove it :(
[22:14:23] <aatch> eddyb, tangent, have you heard of quantum bogosort?
[22:14:33] <cmr> lol
[22:14:34] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[22:14:49] <eddyb> aatch: http://notch.tumblr.com/post/10526684412/o-1-np-solving-using-the-mqsc
[22:15:15] <aatch> eddyb, heh, so yes
[22:15:48] <eddyb> I wouldn't use that to sort numbers
[22:16:14] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[22:17:32] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[22:22:42] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[22:24:39] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[22:25:26] *** Joins: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca)
[22:27:10] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Connection reset by peer)
[22:27:22] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[22:27:37] <acrichto> brson: btw, I remembered something about --libdir the other day, the current system only works if you're running rustc or rustdoc, all other things linking to librustc are in the wrong spot so the auto-sysroot doesn't work
[22:27:53] <acrichto> I was thinking that we'd just start using the --libdir configure switch
[22:27:58] <acrichto> as an alternate sysroot
[22:29:53] <brson> acrichto: the big problem is with binary installers. if somebody says `install.sh --libdir=foo` it's too late to tell rustc that it should look in libdir for sysroot
[22:30:05] *** Quits: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru) (Input/output error)
[22:30:07] <acrichto> brson: oh dear, that's unfortunate
[22:30:11] <brson> i was thinking of doing some ugly hacks to make the common cases work
[22:30:28] <acrichto> can a dylib figure out the path of itself?
[22:30:29] <brson> like just look for dirs named 'lib' 'lib64' etc
[22:30:34] *** Joins: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru)
[22:30:35] <brson> i don't think so
[22:30:39] <acrichto> librustc only needs to find itself, right?
[22:30:45] <acrichto> surely with something like dladdr we could do it
[22:30:52] <brson> on all platforms ...
[22:30:58] <acrichto>     const char *dli_fname;  /* Pathname of shared object that
[22:30:58] <acrichto>                                contains address */
[22:32:01] <brson> so, currently i'm planning on reverting the change that wires `make install` to `install.sh` in order to buy more time to figure this out
[22:32:16] <brson> for 0.10 the binary installers may not be fully functional
[22:32:17] *** Quits: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru) (Ping timeout)
[22:32:40] <brson> well 'reverting'; i haven't even committed that change yet
[22:32:55] <acrichto> you may be right, I'm not seeing something for windows right off the bad
[22:33:01] <acrichto> why revert though? it should still work for 'make install' ?
[22:33:28] <brson> oh, yeah, it may happen to work correctly for 'make install', assuming that rustc uses CFG_LIBDIR_RELATIVE
[22:33:36] <brson> need to test
[22:33:37] <acrichto> oh I lied, you can do it on windows
[22:33:56] <acrichto> you may actually be able to find out the current library path at runtime
[22:38:11] <strcat> acrichto: I'm curious if we could reuse the main thread with libnative
[22:38:15] <strcat> you can find out the stack size on linux
[22:38:16] <strcat> accuratelyt
[22:38:24] <acrichto> we do use the main thread with libnative
[22:38:30] <acrichto> we just guess at the stack size though
[22:38:38] <acrichto> as a conservative estimate
[22:38:45] <strcat> ah, I thought there was an extra clone syscall
[22:38:50] <acrichto> https://github.com/mozilla/rust/blob/master/src/libnative/lib.rs#L95-L98
[22:38:54] <strcat> acrichto: can use getrlimit
[22:39:07] <strcat> since linux sets the main thread (but not necessarily other threads) to the stack rlimit, if it's set
[22:39:20] <strcat> if it's unset it uses 2MiB iirc, don't know that part for sure
[22:39:37] <strcat> although if we only relied on guard pages we wouldn't need to know that
[22:39:39] <acrichto> good idea, I'll comment on the bug
[22:40:21] *** Quits: sunfish (chatzilla@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[22:40:23] *** Joins: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru)
[22:41:35] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Quit: Leaving)
[22:41:41] *** newbie is now known as eibwen
[22:43:41] *** Quits: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru) (Input/output error)
[22:44:28] <strcat> acrichto: RLIMIT_STACK is kind of weird, since it only applies to the main thread ;s
[22:44:35] <strcat> libpthread follows it as a default for others but doesn't have to
[22:44:42] * strcat shrugs
[22:44:48] <acrichto> that's fine though, we spawn all threads with a specific stack size
[22:44:56] <strcat> it makes sense, just weird that it's considered a 'limit'
[22:44:56] <acrichto> we only need to figure out the main thread
[22:45:11] <strcat> I guess they wanted it exposed via the rlimit API rather than just a sysctl knob
[22:45:23] <strcat> just find it very weird that it's thrown in with that other stuff ;p
[22:50:38] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[22:55:14] *** Joins: rook (rook@moz-DE88DB2D.hfc.comcastbusiness.net)
[22:56:40] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:57:52] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:57:53] *** Quits: vadimcn (chatzilla@moz-E841EA3A.hsd1.wa.comcast.net) (Connection reset by peer)
[22:59:28] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[23:08:39] <huon> acrichto: you can call native::start on non-main threads, right?
[23:08:44] <huon> (e.g. inside another process)
[23:09:07] <strcat> perf trace <3
[23:10:08] <acrichto> huon: yeah, that's the part we don't handle well
[23:10:14] <acrichto> but on thos, we don't even know where on the stack we are
[23:10:27] <acrichto> even if we knew the limit of the stack I don't think it would fix everything
[23:10:34] <acrichto> we'd need to know the exact address range
[23:11:33] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[23:11:47] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[23:13:27] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[23:13:31] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[23:14:37] *** Joins: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru)
[23:16:22] *** Quits: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru) (Ping timeout)
[23:16:23] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Quit: leaving)
[23:17:48] *** Quits: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP) (Input/output error)
[23:25:58] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[23:25:58] *** ChanServ sets mode: +ao pcwalton pcwalton
[23:30:44] <eddyb> acrichto: install SIGSEGV handler, start probing :P?
[23:32:04] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[23:32:04] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/--aTVg
[23:32:05] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[23:34:04] *** Quits: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net) (Ping timeout)
[23:36:59] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[23:36:59] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/lZe4vw
[23:36:59] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[23:37:03] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[23:37:03] <ghrust> [13rust] 15bors pushed 12 new commits to 06auto: 02http://git.io/MgRBMQ
[23:37:03] <ghrust> 13rust/06auto 14da118e8 15Alex Crichton: Snapshot cleanup
[23:37:03] <ghrust> 13rust/06auto 14dd64bd8 15Alex Crichton: std: Move NativeMutex from &mut self to &self...
[23:37:03] <ghrust> 13rust/06auto 14d6b3f1f 15Alex Crichton: sync: Move the concurrent queue to using &self...
[23:37:05] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[23:39:31] *** Quits: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca) (Quit: canhtak)
[23:41:23] *** Joins: clusterfoo (clusterfoo@moz-F8B381B4.hm.shawcable.net)
[23:45:24] <eddyb> acrichto: I forgot "???" and "PROFIT", sorry
[23:45:35] <eddyb> (also remove the SIGSEGV handler)
[23:56:12] *** Joins: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca)
