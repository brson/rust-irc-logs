[00:00:06] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[00:00:29] <nejucomo> Hrm…  I just pulled and got a build error: http://sebsauvage.net/paste/?90794aefc56d4bc8#bGkl6t4C0kPuBX4veLE61jlSxYlhPr07f05Hydu6TyE=
[00:00:36] <nejucomo> It's a segfault.
[00:01:32] <dbaupp> nejucomo: can you get a backtrace in gdb? (if you run `make VERBOSE=1` it will print the command it is running, which you can then run with `gdb --args <command>`)
[00:02:39] <nejucomo> dbaupp: Yes, but beware I have an ancient gdb...
[00:02:59] <dbaupp> nejucomo: heh, ok :)
[00:03:52] *** Quits: jstevans (Instantbir@moz-735D8260.washdc.fios.verizon.net) (Ping timeout)
[00:04:34] *** Joins: msingle (Thunderbir@moz-1A29E89B.nrflva.fios.verizon.net)
[00:05:32] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:07:10] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[00:08:51] *** Joins: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP)
[00:09:19] <nejucomo> dbaupp: Hrm…  When I run in gdb I get a debuginfo error about missing environment variabels (CFG_VERSION)...
[00:09:39] <nejucomo> So I need to figure out the relevant environment make used...
[00:10:01] <dbaupp> `CFG_COMPILER_TRIPLE= CFG_LIBDIR= CFG_PREFIX= CFG_VERSION=` works for me
[00:10:33] *** Parts: tzakyrie (tzakyrie@moz-57E04ADC.hsd1.va.comcast.net) ()
[00:12:09] *** Joins: jstevans (Instantbir@moz-735D8260.washdc.fios.verizon.net)
[00:12:20] *** Joins: maik (maik@moz-5DA9E925.dip0.t-ipconnect.de)
[00:13:21] <nejucomo> Ok…  I'll try that.
[00:13:31] *** Quits: squiddy (squiddy@moz-4265BEBB.adsl.alicedsl.de) (Quit: Leaving)
[00:13:36] *** Joins: jstevans1 (Instantbir@moz-735D8260.washdc.fios.verizon.net)
[00:13:49] <cmr> yeah, all those cfg's really threw my the bencher into a tizzy
[00:14:03] <cmr> there were, like, ~300 failed commits while I was sleeping one night, before I noticed that :\
[00:14:45] *** Quits: jstevans (Instantbir@moz-735D8260.washdc.fios.verizon.net) (Ping timeout)
[00:14:51] *** Joins: jstevans (Instantbir@moz-735D8260.washdc.fios.verizon.net)
[00:16:12] *** Quits: jstevans1 (Instantbir@moz-735D8260.washdc.fios.verizon.net) (Ping timeout)
[00:17:53] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[00:18:27] *** Joins: mikezaby (mikezaby@moz-908EA8DE.home.otenet.gr)
[00:19:16] *** Quits: maik (maik@moz-5DA9E925.dip0.t-ipconnect.de) (Ping timeout)
[00:20:42] <dbaupp> strcat: fwiw, I agree with your responses on https://github.com/mozilla/rust/pull/9589 (and the dtor segue is smoooooth ;P )
[00:20:58] *** Quits: sp3d (a@6361F3B1.19CD1E54.8354FB35.IP) (Ping timeout)
[00:21:06] *** Joins: sastraxi (Thunderbir@moz-16AB02E.cable.sta.mountaincable.net)
[00:23:22] *** Joins: anri (solancile@moz-E49E7C4B.hsd1.wa.comcast.net)
[00:23:48] <nejucomo> dbaupp: Here's a bt: http://sebsauvage.net/paste/?351df71ba6a3a346#fXOFSqjIHzXhGcyLzhxxa1c/J8W6SfxaR39RlwJI2nU=
[00:24:10] <dbaupp> nejucomo: are you running out of memory?
[00:25:10] <bstrie> I just realized
[00:25:17] * nejucomo checks
[00:25:17] <bstrie> our format specifiers look like little emoticons
[00:25:23] <bstrie> {:i}
[00:25:32] *** Joins: sp3d (a@6361F3B1.19CD1E54.8354FB35.IP)
[00:25:35] <bstrie> {:p}
[00:25:41] * dbaupp has already enjoyed format!("{d:}", d = 100)
[00:25:47] <nejucomo> Ah, ulimit shows: virtual memory          (kbytes, -v) 2097152
[00:25:57] <myname> dbaupp: what the hell?
[00:25:57] <nejucomo> Could it require more than 2GiB of memory?
[00:25:58] <bstrie> dbaupp: what does it do to put the d in front of the colon?
[00:26:06] <dbaupp> rusti: format!("{D:}", D=10)
[00:26:06] -rusti- ~"10"
[00:26:19] <bstrie> ah I see
[00:26:24] <dbaupp> bstrie: named arguments
[00:26:31] <dbaupp> myname: hm?
[00:26:38] <strcat> nejucomo: definitely requires more than 2GiB of VIRT
[00:26:44] <strcat> not more than 2GiB of actual memory
[00:26:48] <myname> so, if i want it as i, is it D::i or D:i?
[00:27:01] <cmr> strcat: we more than 2GiB
[00:27:02] <bstrie> ...oh man
[00:27:04] <bstrie> new format specs
[00:27:09] <cmr> we use like 2.6G right now
[00:27:10] <dbaupp> strcat: according to IRFY it is > 2GB (unless cgroups measures VIRT?)
[00:27:11] <bstrie> might mean that a rust quine just got better
[00:27:15] <strcat> cmr: oh Ls
[00:27:42] <dbaupp> myname: `:` is the name vs. format seperator, so {:i} is valid, as is {d:i}
[00:28:04] <myname> ah, so :i is really <Nothing>:i
[00:28:15] <dbaupp> rusti: format!("{} {:} {a:} {b:i}", 1, 2, a=3, b=4)
[00:28:15] -rusti- ~"1 2 3 4"
[00:28:17] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[00:28:17] <dbaupp> yes
[00:28:21] <cmr> strcat: yeah, 1GiB regression in the past 3 months:\
[00:29:29] <myname> rusti: format!("{1:} {2:}", "a", "b")
[00:29:31] -rusti- pastebinned 8 lines of output: http://sprunge.us/EAic
[00:29:42] <dbaupp> myname: 0 based
[00:29:55] <myname> i see
[00:32:23] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Quit: Leaving)
[00:32:39] *** Quits: jstevans (Instantbir@moz-735D8260.washdc.fios.verizon.net) (Ping timeout)
[00:32:54] *** Joins: Jesin (Jessin_@D04ED9AA.1AFF763C.DAC4D86A.IP)
[00:35:36] *** Quits: Jesin (Jessin_@D04ED9AA.1AFF763C.DAC4D86A.IP) (Quit: Leaving)
[00:35:52] *** Joins: Jesin (Jessin_@D04ED9AA.1AFF763C.DAC4D86A.IP)
[00:35:58] *** Joins: jstevans (Instantbir@moz-735D8260.washdc.fios.verizon.net)
[00:36:09] <nejucomo> If I use rustdoc, do I get the latest/greatest html API renders, like the new API docs on rust-lang.org?
[00:36:27] <cmr> nejucomo: yup!
[00:37:32] <nejucomo> Hm.  I hit a different (non memory exhaustion bug):
[00:37:33] <nejucomo> error: internal compiler error: unexpected failure
[00:37:33] <nejucomo> note: the compiler hit an unexpected failure path. this is a bug
[00:37:49] <nejucomo> I'm rerunning with RUST_LOG=rustc=1 make now.
[00:37:54] <nejucomo> BIAB.
[00:37:59] *** Quits: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net) (Quit: Leaving.)
[00:38:25] *** Quits: Jesin (Jessin_@D04ED9AA.1AFF763C.DAC4D86A.IP) (Ping timeout)
[00:40:19] *** Joins: Jesin (Jessin_@moz-6EF909D6.cc.lehigh.edu)
[00:42:00] *** Quits: Jesin (Jessin_@moz-6EF909D6.cc.lehigh.edu) (Quit: Leaving)
[00:42:20] *** Joins: Jesin (Jessin_@moz-6EF909D6.cc.lehigh.edu)
[00:46:24] *** Quits: moby (Mibbit@moz-20CEEF38.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[00:48:32] *** Quits: Earnestly (earnest@moz-BE290A2B.dyn.plus.net) (Quit: WeeChat 0.4.2-rc1)
[00:49:16] *** Joins: Earnestly (earnest@moz-BE290A2B.dyn.plus.net)
[00:51:00] *** Joins: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP)
[00:56:50] *** Quits: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net) (Ping timeout)
[00:57:02] *** Quits: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[01:01:53] *** Quits: KindOne (KindOne@moz-C2792F8.dynamic.ip.windstream.net) (Ping timeout)
[01:02:18] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[01:02:23] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[01:02:26] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[01:02:33] *** Quits: msingle (Thunderbir@moz-1A29E89B.nrflva.fios.verizon.net) (Quit: msingle)
[01:06:03] *** Joins: KindOne (KindOne@moz-C2792F8.dynamic.ip.windstream.net)
[01:07:22] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:07:28] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[01:07:41] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:09:21] *** Quits: Azdle (patrick@moz-8C723B60.hsd1.mn.comcast.net) (Ping timeout)
[01:09:21] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[01:10:56] *** Quits: clusterfoo (computer@moz-F8B381B4.hm.shawcable.net) (Ping timeout)
[01:19:21] *** Quits: DanC (connolly@moz-CAC8C247.dyn.everestkc.net) (Quit: So long and thanks...)
[01:21:51] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[01:22:19] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[01:22:53] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[01:23:15] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[01:24:05] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Ping timeout)
[01:24:17] *** Quits: tefter (tefter@B5D119DC.B856A0A1.73804765.IP) (Client exited)
[01:24:18] *** Quits: mikezaby (mikezaby@moz-908EA8DE.home.otenet.gr) (Input/output error)
[01:25:38] <jeaye> bjz: ping
[01:26:13] <jordyd> Is there any documentation on how named lifetimes work with structs and impls?
[01:26:55] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[01:29:47] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[01:30:21] <jordyd> Nvm I think I found something
[01:30:47] <cmr> jordyd: what did you find?
[01:30:54] <jordyd> http://maikklein.github.io/2013/08/27/lifetimes-explained/
[01:30:56] <cmr> I don't know of any documentation on it
[01:31:04] <jordyd> It's a blog post
[01:32:58] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[01:33:02] *** Joins: jdsanders (Adium@moz-F45527D6.hlrn.qwest.net)
[01:33:42] <jeaye> glfw-rs is using `finally` on a lambda, but I don't see it in 0.8
[01:33:48] <jeaye> Did it go somewhere else?
[01:33:49] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[01:34:34] <cmr> jeaye: as in, the compile is failing, or you don't see where it's defined?
[01:35:06] <jeaye> Compilation is failing, since `finally` is not found for my lambda.
[01:35:21] <dbaupp> jeaye: you need `use std::unstable::finally::Finally`
[01:35:28] <jeaye> (|| { }).finally(|| { println!("finally"); });
[01:35:35] <jeaye> Ahh, thanks dbaupp 
[01:35:42] <jeaye> 'unstable'?
[01:35:48] * jeaye gulps
[01:36:06] <jdsanders> Hi! Is there a way I can make module-level "global" storage? ie. a variable I can access across invocations of some method in some module?
[01:36:07] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[01:36:29] <jdsanders> Or am I really just trying to reinvent instantiating a struct and calling a method on it in a particularly dumb way...
[01:36:32] <dbaupp> jeaye: it means your program might topple over if you don't tie it down well enough
[01:36:34] <dbaupp> :P
[01:36:48] <cmr> jdsanders: Hi! We have `static mut`, but it requires unsafe code (not threadsafe)
[01:37:01] <jdsanders> cmr: gotcha
[01:37:03] <dbaupp> jeaye: I believe it's things that haven't really been thought through fully/don't know if we want them in std
[01:37:26] <jdsanders> does it *have* to require unsafe code, or does it just *currently*?
[01:37:37] <benh> It's intended to require unsafe code because it is unsafe
[01:37:57] <cmr> I think it will always need unsafe code, since you could be reading it while another thread is writing to it.
[01:38:13] <SiegeLord> Well, you could make them be TLS
[01:38:20] <SiegeLord> I think that'd be too much though
[01:38:27] <cmr> There are ways to avoid that (locking, atomics), but the type system would need to learn about those.
[01:38:30] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[01:38:31] <jdsanders> yeah…I think I see it
[01:38:33] <dbaupp> and you can create multiple &mut references to it, or an & and an &mut (i.e. break the type system entirely)
[01:38:53] <cmr> dbaupp: wait you can create a & to a static mut?
[01:40:02] <dbaupp> I believe so?
[01:40:11] <dbaupp> rusti: static mut x: int = 1; unsafe { &x }
[01:40:13] -rusti- &1
[01:40:22] *** Joins: Cua (Cua@A4682D08.E3C7EE03.9C269F8F.IP)
[01:40:26] <cmr> Ah you need to do it in unsafe code
[01:40:28] <cmr> Ok
[01:40:39] <dbaupp> rusti: static mut x: int = 1; unsafe { (&x, &x, &mut x, &mut x) }
[01:40:40] -rusti- (&1, &1, &mut 1, &mut 1)
[01:41:11] <wakandan> morning!
[01:41:11] <engla> I'm seeing double
[01:41:16] <wakandan> I'm fixing https://github.com/mozilla/rust/issues/9483
[01:41:43] <cmr> rusti: static mut x: int = 1; do spawn { unsafe { x = 5 } } unsafe { (&x, &x, &mut x, &mut x) }
[01:41:44] -rusti- (&5, &5, &mut 5, &mut 5)
[01:41:55] <wakandan> most of the places with the pattern #[abi = "foo"] extern {....} I already replaced with the new sytanx
[01:41:57] <cmr> rusti: static mut x: int = 1; do spawn_sched { unsafe { x = 5 } } unsafe { (&x, &x, &mut x, &mut x) }
[01:41:58] -rusti- <anon>:7:35: 7:46 error: unresolved name `spawn_sched`.
[01:41:58] -rusti- <anon>:7          static mut x: int = 1; do spawn_sched { unsafe { x = 5 } } unsafe { (&x, &x, &mut x, &mut x) }
[01:41:58] -rusti-                                             ^~~~~~~~~~~
[01:41:59] -rusti- error: aborting due to previous error
[01:41:59] -rusti- application terminated with error code 101
[01:42:03] <wakandan> however in some places I'm not too sure how to do 
[01:42:06] <cmr> feh, lost interest
[01:42:20] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:42:22] <jdsanders> is there any sort of dominant constructor idiom? blah::Blah() or blah::new or blah::init or ...?
[01:42:26] <cmr> wakandan: links?
[01:42:30] <jeaye> jdsanders: new
[01:42:30] <cmr> jdsanders: Blah::new()
[01:42:31] *** Quits: KindOne (KindOne@moz-C2792F8.dynamic.ip.windstream.net) (Ping timeout)
[01:42:32] <dbaupp> jdsanders: ::new()
[01:42:34] <wakandan> like this place
[01:42:36] <wakandan> #[abi = "cdecl"] pub mod rustrt {     use libc::size_t;      extern {         pub fn rand_gen_seed(buf: *mut u8, sz: size_t);     } }
[01:42:42] <jdsanders> unanimous! :)
[01:42:42] <jeaye> jdsanders: new_with_foo
[01:42:44] <jdsanders> thanks
[01:42:45] <wakandan> http://mibpaste.com/39Q8y0 
[01:42:49] <dbaupp> jdsanders: and or, ::from_xyz() if its a converter
[01:42:57] <wakandan> not sure if I can just add "cdecl" into the extern...
[01:43:01] <jdsanders> nice, very informative
[01:43:02] <dbaupp> wakandan: yes
[01:43:06] *** Joins: tychof (Mibbit@96AC98ED.4BDE79FD.86CC3CCD.IP)
[01:43:09] <cmr> wakandan: I think it can be extern "cdecl" yeah
[01:43:10] <wakandan> cmr: https://github.com/mozilla/rust/issues/9483
[01:43:22] <wakandan> and it's ok with the "pub ..."?
[01:43:26] <dbaupp> yes
[01:43:28] <wakandan> cool that's great
[01:43:41] <wakandan> the only way I check that was through "make check" but it's too damn slow
[01:43:43] *** Quits: sastraxi (Thunderbir@moz-16AB02E.cable.sta.mountaincable.net) (Client exited)
[01:44:17] <dbaupp> if `git grep '#\[api *='` doesn't show any results then that's probably ok
[01:44:17] <wakandan> I've read about that syntax 
[01:44:35] <wakandan> but not 100% sure what it does
[01:44:39] *** Quits: q66_ (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[01:44:42] *** Quits: SealedSun (Mibbit@moz-CD16210D.cust.bluewin.ch) (Quit: http://www.mibbit.com ajax IRC Client)
[01:44:46] <wakandan> dbaupp: you mean #[abi...]?
[01:44:48] <Luqman> wakandan: i'm pretty sure you can just remove all of them
[01:45:05] <Luqman> and not even have to make any other changes
[01:45:26] <jason_> is there a way to do this? error: cannot provide an extension implementation for a trait not defined in this crate
[01:45:36] <dbaupp> wakandan: right,y es :)
[01:46:14] <cmr> jason_: no, it would break coherence (the ability to link any combination of crates together)
[01:46:39] <wakandan> dbaupp: also, in the case of 2 externs in the same mod?
[01:46:58] <wakandan> dbaupp: can I just add the same thing to 2 externs?
[01:47:18] <dbaupp> wakandan: put it on both (but as Luqman says: #[abi] is currently doing nothing, so if it compiles now, it will compile with the #[abi]'s removed and no other changes)
[01:47:44] <wakandan> oh cool 
[01:47:57] <wakandan> semantically they doesn't matter any more?
[01:48:18] <cmr> dbaupp: well, it can compile and still be using the wrong abi can't it?
[01:48:23] <jason_> cmr: there must be some work around like defining my own type and implementing the trait on that?
[01:48:32] *** Joins: KindTwo (KindOne@moz-6A76EE7B.dynamic.ip.windstream.net)
[01:48:40] <cmr> jason_: Oh, yeah, you can do a newtype struct like `struct Foo(ThatOtherType)`
[01:48:40] *** KindTwo is now known as KindOne
[01:49:01] <cmr> Workaround, not really a way to provide extensions impls
[01:49:29] <dbaupp> cmr: yeah, but it's *currently* working with whatever ABIs its getting
[01:49:47] <wakandan> and the only way to test if all of them work is "make check"?
[01:49:48] <Luqman> #[abi] does nothing anymore
[01:49:55] *** Quits: jstevans (Instantbir@moz-735D8260.washdc.fios.verizon.net) (Ping timeout)
[01:49:57] <derboi_c> On i686-pc-linux, why it try to get the the first arg at 0xc(%ebp) then the first arg is at 0x8. On my prog it make a shift and all call of function.
[01:49:57] <wakandan> is there any faster alternative?
[01:49:59] <dbaupp> wakandan: the ABI does matter, its just the #[abi] method for specifying it does nothing i.e. doesn't affect the ABI rustc uses
[01:50:02] <Luqman> so removing it require no other changes
[01:50:13] <wakandan> I left my comp overnight to run it 
[01:50:14] <derboi_c> https://gist.github.com/anonymous/6748592
[01:50:20] <wakandan> Luqman: that's good to hear
[01:50:41] *** Quits: KindOne (KindOne@moz-6A76EE7B.dynamic.ip.windstream.net) (Ping timeout)
[01:50:44] *** Joins: KindTwo (KindOne@moz-EB454250.dynamic.ip.windstream.net)
[01:51:02] <wakandan> I really need a faster computer for this stuff T_T
[01:51:02] <cmr> derboi_c: every function currently has a hidden first parameter, to make using a function as a closure cheap (free)
[01:51:52] <cmr> strcat: Have you experimented with the perf impact of removing that, even at the manually-editing-IR level?
[01:52:00] *** KindTwo is now known as KindOne
[01:52:10] <cmr> I imagine it'd only really be noticable on larger programs where it can actually do smart things with that register
[01:52:46] <derboi_c> cmr: which add this "hidden" param?
[01:53:01] <cmr> derboi_c: rustc adds it, if that's what you're asking
[01:53:38] <derboi_c> cmr: my question is most "where"
[01:54:06] *** Joins: jstevans (Instantbir@moz-735D8260.washdc.fios.verizon.net)
[01:54:14] <derboi_c> because i don't see where in my asm produced, and a must do it "manualy" in my code. I get a reel shift.
[01:54:40] <cmr> derboi_c: if you look at the llvm IR (rustc -S --emit-llvm), you can see the extra parameter in the functions
[01:55:01] *** Joins: sglez (Mibbit@E19C1D7A.4B605195.A208C5.IP)
[01:56:48] *** Joins: ryeguy (ryeguy@9C569A0.5D1143CD.E8644521.IP)
[01:56:52] <engla> how much difference does it do to pass by &T compared to @T? I'm looking at some very basic de-@ of a file in rustc
[01:56:52] *** Quits: ryeguy (ryeguy@9C569A0.5D1143CD.E8644521.IP) (Quit: )
[01:57:01] <engla> performance difference should be very small
[01:57:52] <dbaupp> every copy of an @T bumps the ref-count
[01:58:05] <cmr> engla: depends on how many @ it is
[01:58:08] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[01:58:21] <cmr> one of the bigger de-@'s yielded a few percent increase in rustc speed
[01:58:26] <engla> I'm not going to do something monumental here
[01:58:32] *** Joins: ryeguy (ryeguy@9C569A0.5D1143CD.E8644521.IP)
[01:58:43] <engla> just translating @ast::Expr → &ast::Expr where possible
[01:58:48] <Luqman> engla: i would not be surprised if your changes slowly spun out of control
[01:58:50] <strcat> cmr: it can always do smart things with a register
[01:58:50] <engla> without changing anything
[01:58:51] <Luqman> :P
[01:58:52] <strcat> there are not many of them
[01:58:54] *** Joins: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP)
[01:58:57] <derboi_c> cmr: yes i agree with that, but at the call, the first arg is set a the first place, this are no shift for hidden param. mov %ecx, (%esp) before the call
[01:59:02] <engla> without changing logic
[01:59:11] <dbaupp> strcat: (is that a #rust-internals response?)
[01:59:28] <cmr> dbaupp: well, I asked in here
[02:00:00] <dbaupp> cmr: oh, it was a long delayed response?
[02:00:04] <cmr> dbaupp: yes
[02:00:06] <cmr> well
[02:00:07] * dbaupp chimes out :P
[02:00:20] <cmr> 8 minutes
[02:02:04] <derboi_c> https://gist.github.com/anonymous/6748674
[02:02:56] <derboi_c> If it place an hidden value, it will set a (%esp). When a compile on 64bit, the first it set a 0x4(%esp), but in 32 0x0.
[02:03:50] <strcat> we pass undef as the env slot parameter
[02:04:05] <strcat> the value is undefined, LLVM can output what it wants
[02:04:37] <derboi_c> Yes, i agree, but it place the first arg in the hidden case
[02:04:42] <derboi_c> (in 32)
[02:04:57] <derboi_c> (i've a reel bug)
[02:05:50] *** Joins: HeddyQuilts (Mibbit@moz-EADCE602.sktn.hsdb.sasknet.sk.ca)
[02:06:15] <strcat> methods use the env slot for the self parameter
[02:07:56] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[02:08:11] <benh> Is declaring statics within functions intended functionality?
[02:08:23] <cmr> benh: yes, it should be possible now.
[02:08:26] *** Joins: ross (ross@moz-5EA04060.br.br.cox.net)
[02:08:32] * dbaupp wonders how much slower Rust got after the methodisation of the stdlib
[02:08:33] <benh> I think it breaks if you do it with generics
[02:08:50] <benh> Is there an issue for that already? :)
[02:08:54] <cmr> dbaupp: it was actually a significant slowdown
[02:09:01] <dbaupp> benh: acrichto did a lot of work fixing it for the new format!, what version is your compiler/what's the code?
[02:09:05] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[02:09:17] <benh> rusti: fn f<U>() { static i: Option<U> = None; } ()
[02:09:18] <dbaupp> cmr: 2% or 20%?
[02:09:18] -rusti- pastebinned 2 lines of output: http://sprunge.us/ZZDh
[02:09:31] <benh> that's my code, I just built rust earlier tonight
[02:09:36] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[02:09:38] <cmr> https://github.com/mozilla/rust/issues/9431 exists
[02:09:47] <dbaupp> rusti: fn f() { static i: Option<U> = None; }
[02:09:47] -rusti- <anon>:7:35: 7:36 error: use of undeclared type name `U`
[02:09:47] -rusti- <anon>:7          fn f() { static i: Option<U> = None; }
[02:09:47] -rusti-                                             ^
[02:09:47] -rusti- error: aborting due to previous error
[02:09:48] -rusti- application terminated with error code 101
[02:09:57] <derboi_c> strcat: i'm realy tired i think, i'm realy low to understand you. In file load like module, each function which be exported must have an self?
[02:10:02] <cmr> "ficticious type"
[02:10:23] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[02:11:22] <dbaupp> benh: https://github.com/mozilla/rust/issues/5997
[02:13:21] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[02:13:22] <benh> ah, sounds like it should just error because I shouldn't be able to reference the type parameter in the nested item...
[02:13:53] <benh> close enough :)
[02:15:10] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[02:17:15] *** Joins: apples (textual@moz-843551AE.hsd1.ca.comcast.net)
[02:18:29] *** Joins: CurlyBrace (Mibbit@7102442F.615B56E6.43362C16.IP)
[02:20:52] *** Joins: jviereck (Adium@moz-4C9C4638.dip0.t-ipconnect.de)
[02:24:04] <CurlyBrace> Hello, rusties
[02:24:10] <CurlyBrace> ...is that the correct terminology?
[02:24:45] <cmr> CurlyBrace: there's no official term, but rusties is my favorite :p
[02:25:27] *** Quits: jviereck (Adium@moz-4C9C4638.dip0.t-ipconnect.de) (Quit: Leaving.)
[02:26:50] <CurlyBrace> So,  slightly more serious question,
[02:27:08] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[02:27:09] <CurlyBrace> can anybody help me with rerouting proceses' input and output
[02:27:09] <CurlyBrace> ?
[02:27:40] *** Quits: GeneralMaximus (ankur@D2FC7BAD.3B7EC11C.BE90E62C.IP) (Ping timeout)
[02:27:51] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[02:28:43] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:29:28] * dbaupp likes rustifarians or radical Rusticals :P
[02:30:13] *** Quits: HeddyQuilts (Mibbit@moz-EADCE602.sktn.hsdb.sasknet.sk.ca) (Quit: http://www.mibbit.com ajax IRC Client)
[02:30:23] <dbaupp> CurlyBrace: you mean via std::run?
[02:30:38] <CurlyBrace> std::run::Process is what I am trying
[02:31:54] <dbaupp> yup; you can use ProcessOptions + Process::new to specify a file descriptor to which to write output/input
[02:32:20] <dbaupp> unfortunately the only way (i know of) to get a file descriptor is via libc (e.g. std::libc::open)
[02:32:20] <CurlyBrace> ^That's as far as I am, I have no idea how to do that
[02:32:33] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[02:32:42] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[02:32:42] <CurlyBrace> do I create a process options struct, and then replace fd_out or fd_in with the file descriptor?
[02:32:49] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:34:49] *** Quits: kimundi (kimundi@moz-E17678C9.dip0.t-ipconnect.de) (Ping timeout)
[02:34:55] <CurlyBrace> Oh, hi rust
[02:34:57] <CurlyBrace> rusti*
[02:35:33] <dbaupp> yeah, Some(fd) for either
[02:35:40] *** Quits: KindOne (KindOne@moz-EB454250.dynamic.ip.windstream.net) (Ping timeout)
[02:35:56] <CurlyBrace> You guys are great, don't get me wrong, but rusti the best, its almost like he magically knows exactly what any rust code will do.
[02:36:32] <CurlyBrace> Ah, lemme look for that...
[02:36:51] <dbaupp> something like `Process::new("foo", ["--bar"], ProcessOptions { in_fd: Some(fd), .. ProcessOptions::new() })`
[02:36:53] *** Joins: KindOne (KindOne@moz-EB454250.dynamic.ip.windstream.net)
[02:37:18] <CurlyBrace> Oooh!
[02:37:23] <CurlyBrace> That is very helpful, thanks!
[02:38:02] *** Joins: zz_kimundi (kimundi@moz-AAC1E158.dip0.t-ipconnect.de)
[02:38:19] *** zz_kimundi is now known as kimundi
[02:40:04] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[02:40:59] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[02:42:13] *** Joins: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net)
[02:42:59] *** Quits: jdsanders (Adium@moz-F45527D6.hlrn.qwest.net) (Quit: Leaving.)
[02:43:45] *** Joins: Kruppe (user@67DC0089.80DA567B.66C78069.IP)
[02:45:47] <jeaye> wtf
[02:45:58] <jeaye> "The ocean at the last of the land..."
[02:46:27] <engla> :)
[02:46:29] <cmr> jeaye: runtime error?
[02:46:36] <jeaye> yeah
[02:46:38] <jeaye> haha
[02:46:38] <cmr> mmm
[02:46:52] <cmr> I love the lovecraft on those, whoever thought that up was genius
[02:46:59] *** Joins: Lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net)
[02:47:05] <jeaye> Always the same, or do they differ?
[02:47:38] <cmr> there's a few different ones in there
[02:48:16] <jeaye> Who wrote them?
[02:51:02] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[02:51:34] *** Quits: Ferreus (ferreus@moz-80A38711.dyn.telefonica.de) (Quit: WeeChat 0.4.1)
[02:52:28] *** Joins: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net)
[02:53:06] *** Quits: Kruppe (user@67DC0089.80DA567B.66C78069.IP) (Ping timeout)
[02:53:31] <dbaupp> cmr: brson
[02:54:15] <dbaupp> jeaye: there's 10-ish different ones selected randomly based on a "hash" of the error message
[02:54:44] <jeaye> That's pretty nifty.
[02:55:45] *** Joins: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP)
[02:56:14] <CurlyBrace> Can anyone give me an example of using the libc file descriptor in rust?
[02:57:25] <CurlyBrace> ...I'm assuming its not just passing in a string
[02:57:42] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:58:07] <strcat> derboi_c: methods have a self parameter and no env parameter
[02:58:11] <strcat> functions have an unused env parameter
[02:58:22] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[02:59:22] <dbaupp> CurlyBrace: using one, or creating one?
[03:00:22] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Quit: Leaving.)
[03:00:51] <dbaupp> jeaye: https://github.com/mozilla/rust/blob/master/src/libstd/rt/util.rs#L83 (I misremembered: there's only 5)
[03:01:23] <CurlyBrace> erm, creating one, I guess, as the process should be how I am using one
[03:01:24] <jeaye> hehe
[03:01:42] <CurlyBrace> Is it as simple as using a C file?
[03:01:56] *** Quits: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[03:04:07] <dbaupp> rusti: do "/etc/passwd".with_c_str |name| { "r".with_c_str(|mode| unsafe { std::libc::open(name, mode) }) }
[03:04:07] -rusti- <anon>:7:77: 7:106 error: this function takes 3 parameters but 2 parameters were supplied
[03:04:07] -rusti- <anon>:7          do "/etc/passwd".with_c_str |name| { "r".with_c_str(|mode| unsafe { std::libc::open(name, mode) }) }
[03:04:07] -rusti-                                                                                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[03:04:07] -rusti- error: aborting due to previous error
[03:04:09] -rusti- application terminated with error code 101
[03:07:39] <dbaupp> rusti: use std::libc; do "/etc/passwd".with_c_str |name| { unsafe { libc::open(name, libc::O_RDONLY, 0) } }
[03:07:40] -rusti- <anon>:7:70: 7:80 error: invoking non-Rust fn in fn without #[fixed_stack_segment] [-D cstack (default)]
[03:07:40] -rusti- <anon>:7          use std::libc; do "/etc/passwd".with_c_str |name| { unsafe { libc::open(name, libc::O_RDONLY, 0) } }
[03:07:40] -rusti-                                                                                ^~~~~~~~~~
[03:07:40] -rusti- error: aborting due to previous error
[03:07:41] -rusti- application terminated with error code 101
[03:08:08] <dbaupp> rusti: use std::libc;  #[fixed_stack_segment] fn foo() -> libc::c_int { do "/etc/passwd".with_c_str |name| { unsafe { libc::open(name, libc::O_RDONLY, 0) } } }
[03:08:09] -rusti- ()
[03:08:11] <dbaupp> rusti: use std::libc;  #[fixed_stack_segment] fn foo() -> libc::c_int { do "/etc/passwd".with_c_str |name| { unsafe { libc::open(name, libc::O_RDONLY, 0) } } } foo()
[03:08:12] -rusti- 21i32
[03:08:18] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[03:08:27] <dbaupp> CurlyBrace: ^ I got there eventually
[03:08:30] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[03:08:40] <CurlyBrace> Haha, no worries, you're leagues ahead of me
[03:08:47] <benh> 21? huh
[03:09:09] <dbaupp> benh: "huh" in what way?
[03:09:14] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[03:09:19] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[03:09:21] <benh> That's a lot of open files
[03:09:23] <cmr> benh: well it runs rustc in that same sandbox too
[03:09:28] <CurlyBrace> Our of curiousity, what is the  #[fixed_stack_segment]?
[03:10:01] <cmr> CurlyBrace: if I told you you don't want to know would you believe me? :P
[03:10:04] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[03:10:09] <dbaupp> benh: and the rust rt will open /dev/urandom to initialise itself (among other things, I'm sure)
[03:10:19] *** Quits: tikue_ (tkuehn@4245E30A.E2CAEE6E.689607DE.IP) (Ping timeout)
[03:10:21] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:10:27] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:10:44] <dbaupp> CurlyBrace: it's a consequence of not using the C stack always (or, at least, planning to not use it)
[03:11:07] <luisbg> can you have global constants in a Rust file like C's #define?
[03:11:19] <dbaupp> CurlyBrace: Rust is designed to have segmented stacks, so each task starts with a very small stack (e.g. kilobytes or less) and grows as functions request more
[03:11:22] <cmr> luisbg: statics are the closest you'll get.
[03:11:25] <benh> open returns 37 in a separately compiled file here, I'm surprised
[03:11:35] <benh> urandom is open like eight times alone :D
[03:11:35] <CurlyBrace> I'll believe you if you tell me how to use it :P
[03:11:39] <cmr> benh: yikes!
[03:11:44] * cmr doesn't know how to use it
[03:11:44] <luisbg> cmr, should I just have immutable variables inside the struct?
[03:11:46] <CurlyBrace> Just define it at the top of the file, I assume?
[03:11:54] <cmr> rustc yells at you when a function should have it and it doesn't
[03:11:59] <dbaupp> CurlyBrace: fixed_stack_segment basically says "run this on a big stack since C functions assume they have one"
[03:12:19] <dbaupp> CurlyBrace: (it's an attribute you attach to functions when rustc complains basically)
[03:12:33] <cmr> luisbg: eh? You can do `static X: int = 4;` to get basically the same thing as a  #define
[03:12:48] <luisbg> cmr, cool. let me try that
[03:12:53] <dbaupp> luisbg: (as `#define X 4`, that is)
[03:12:55] <benh> cmr: I think it's because it spawns a lot of threads and opens pipes between them?
[03:13:08] <luisbg> dbaupp, thanks
[03:13:37] <CurlyBrace> It amuses me that my OS prof wants us to migrate over to Rust, and only rust, avoiding using C libraries, and then gives us a problem like this one :P
[03:13:40] <dbaupp> benh: it should spawn #CPUs + 1
[03:13:49] <dbaupp> CurlyBrace: cs4414?
[03:13:52] <CurlyBrace> (Nothing against Rust itself, mind)
[03:13:54] <CurlyBrace> Yep
[03:14:00] <dbaupp> cool :)
[03:14:13] <jason_> ok, i'm stuck. i'd like to define std::fmt::Default trait for std::os::MemoryMap. i've tried defining my own struct MyMemoryMap(MemoryMap) and impl fmt::Default for MyMemoryMap, but i can't seem to cast the MemoryMap to MyMemoryMap. what am i missing?
[03:14:17] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[03:14:30] <dbaupp> CurlyBrace: yeah, the prof has thrown you guys a bit in the deep end :P
[03:14:41] <cmr> jeaye: MyMemoryMap(some_value)
[03:14:46] <dbaupp> jason_: the "cast" is writing that ^
[03:14:54] <jeaye> cmr: Ok. :P
[03:14:56] <dbaupp> cmr: you missed :P
[03:15:04] <jason_> ok
[03:16:11] *** Quits: bytewise (bytewise@moz-4A801D04.unitymediagroup.de) (Quit: Leaving)
[03:16:13] <CurlyBrace> I'm mostly just unhappy that he chose to use a language pre 1.0 (That is, incomplete documentation/few examples) for a tricky, concept heavy class)
[03:16:24] <CurlyBrace> Rust in the progamming languages course would be cool
[03:16:27] <luisbg> CurlyBrace, on of the benefits is that there is less code you could copy from out in the net
[03:16:33] <luisbg> if the exercises where in C
[03:16:40] <luisbg> a bunch of smart searching and copy-pasting would do the trick
[03:16:50] <dbaupp> jason_: depending how you're defining it, you could even submit a PR adding an impl for std::os::MemoryMap
[03:16:56] <CurlyBrace> haha, very true
[03:17:02] <jason_> cmr: ok getting close here, but MemoryMap::new returns a ~MemoryMap
[03:17:09] <CurlyBrace> of course, the prof is also 'oursourcing' the office hours to you guys, so...
[03:17:11] <CurlyBrace> :P
[03:17:12] <cmr> jason_: yikes, it does?
[03:17:24] <dbaupp> CurlyBrace: he's in here too occasionally
[03:17:47] <jason_> dbaupp: yup, my eventually plan was to impl Reader/Writer too and submit a PR
[03:17:51] <luisbg> CurlyBrace, that is also true
[03:17:54] <jason_> eventual*
[03:17:56] <cmr> jason_: it really shouldn't do that :\
[03:18:03] <luisbg> jason_, oooh cool :)
[03:18:03] * dbaupp calls the remove-unnecessary-~ brigade
[03:18:19] <cmr> it also shouldn't take a ~[MapOption]
[03:18:24] <jason_> cmr: well a Result<~MemoryMap, MapError>
[03:18:28] <dbaupp> cmr: what should it take?
[03:18:33] <CurlyBrace> Ooh, I better watch what I say, then
[03:18:35] <cmr> Considering how closely I reviewed this, this is a pretty good indication of my evolving skills!
[03:18:43] <cmr> dbaupp: &[MapOption]
[03:18:45] <dbaupp> jason_: yep, should definitely be Result<MemoryMap, MapErorr>
[03:18:52] <dbaupp> cmr: oh, of course
[03:18:53] * dbaupp is silly
[03:18:57] <dbaupp> CurlyBrace: haha
[03:19:18] <dbaupp> jason_: well, it should be that but with less typos :P
[03:19:34] <jason_> cmr: doesn't it need to return a ~MemoryMap so you can move the value around and destructor is only called once?
[03:19:52] <cmr> jason_: additionally so you can avoid allocations when you don't need them.
[03:19:53] <dbaupp> jason_: ~ doesn't change the semantics like that
[03:20:16] <dbaupp> jason_: http://static.rust-lang.org/doc/master/tutorial.html#boxes (shiny new section about ~ added a few hours ago)
[03:20:21] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[03:20:35] *** Joins: JanC_ (janc@moz-12DFBB97.dsl.scarlet.be)
[03:20:43] <jason_> dbaupp: ok, i mean now that you mention it, i implemented this myself before i found os::MemoryMap and didn't use ~ and it seemed to work
[03:20:59] *** Quits: JanC (janc@moz-12DFBB97.dsl.scarlet.be) (Ping timeout)
[03:21:20] <jason_> https://github.com/toffaletti/rust-mmap/blob/master/src/mmap/lib.rs
[03:21:50] <jason_> i just assumed i had made a mistake and std::os would be DoingTheRightThing
[03:21:55] *** Joins: slack1256 (slack@moz-C0A95B6F.baf.movistar.cl)
[03:22:07] <dbaupp> heh, no guarantees that the stdlib is doing that :p
[03:22:43] <dbaupp> btw, you can use debug2!("munmapping {}", self.addr) rather than debug!(format!(...))
[03:23:07] <dbaupp> the former is much more efficienter: it prints directly, and doesnt allocate an intermediate ~str
[03:23:16] <jason_> ahh, i tried debug_format!
[03:23:16] <cmr> oh it doesn't?
[03:23:18] <cmr> sweet
[03:23:33] <dbaupp> (and fail2! also)
[03:23:47] <dbaupp> cmr: yeah, that was part of acrichto's motivation for the current design
[03:24:04] <dbaupp> (you can even get this goodness yourself with the format_args! macro)
[03:24:17] <cmr> We need to slap #[experimental] on std::unstable and unmark it as #[doc(hidden)]
[03:24:22] <cmr> Beause there's really useful stuff in there.
[03:24:29] <dbaupp> cmr: it don't work
[03:24:35] <cmr> dbaupp: I knew that, but didn't know debug2 etc did that
[03:24:39] <cmr> dbaupp: what don't?
[03:24:44] <dbaupp> (#[experimental] on modules)
[03:25:00] <cmr> are you sure rustdoc won't render it?
[03:25:11] <dbaupp> oh, it mgiht
[03:25:25] <dbaupp> but the compiler doesn't pipe up when you use any of the functions inside it
[03:25:30] <cmr> yeah, I'm fine with that.
[03:25:46] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[03:25:47] *** Quits: sglez (Mibbit@E19C1D7A.4B605195.A208C5.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:27:02] <dbaupp> cmr: I think the conversion to make debug2! unallocating is what caused the most recent 100MB memory jump
[03:27:31] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[03:28:02] *** Quits: canhtak (jeremy@moz-C6007F4.wl.t.ulaval.ca) (Quit: canhtak)
[03:29:27] *** Quits: SiegeLord (sl@moz-3D449DF.bstnma.fios.verizon.net) (Quit: Leaving)
[03:30:00] *** Joins: clusterfoo (computer@moz-F8B381B4.hm.shawcable.net)
[03:30:50] *** Parts: clusterfoo (computer@moz-F8B381B4.hm.shawcable.net) ()
[03:31:03] *** Joins: tikue_ (tkuehn@4245E30A.E2CAEE6E.689607DE.IP)
[03:31:46] <cmr> dbaupp: wait, why would *not allocating* cause a memory hit?
[03:32:07] *** Joins: SiegeLord (sl@moz-3D449DF.bstnma.fios.verizon.net)
[03:33:01] <engla> I think acrichto can explain. There is some transitionary stuff like still using fmt! together with format!
[03:34:15] <dbaupp> cmr: I think it's a side effect of the change, e.g. it makes the compiler generate different/more code
[03:34:17] * dbaupp doesn't know
[03:34:19] <acrichto> debug! went from call(fmt!) to call(call(format!(fmt!)))
[03:34:22] <acrichto> temporarily
[03:34:28] <cmr> oh dear lord
[03:34:33] <acrichto> which I think is the reason for the perf hit
[03:34:40] <cmr> yeah, I'd buy that :p
[03:35:19] <dbaupp> rusti: println!("{}", fmt!("%s", format!("{}", "it could be worse")))
[03:35:22] <engla>  also it's not really about not allocating is it, more like, it's possible to implement it without allocating (depending on which Writer you insert) (?)
[03:35:22] -rusti- it could be worse
[03:35:23] -rusti- ()
[03:36:04] <dbaupp> engla: "it" == logging?
[03:36:13] <engla> yes
[03:36:53] <cmr> mmap stdout! never alloc again!
[03:36:54] <dbaupp> yeah, it'd be nice to be able to log to stderr without allocating a ~str (and is now possible with format!)
[03:37:10] <engla> that's great
[03:38:08] <dbaupp> cmr: "unrecognised macros: `stdout`, `again`"
[03:38:36] <benh> Can you actually mmap stdout, what does that even do
[03:38:43] <engla> is it possible to implement an allocation less fail!() then?
[03:38:56] <dbaupp> acrichto: ^
[03:39:14] <acrichto> soon hopefully
[03:39:15] <cmr> benh: don't know till you try? :P
[03:39:19] <acrichto> it's just file I think
[03:39:21] <acrichto> filename
[03:39:47] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[03:40:11] <engla> I think it would be cool to fail!() on OOM
[03:40:36] <cmr> Yeah, but only of the stack unwinding doesn't allocate :p
[03:40:41] <cmr> *if
[03:42:57] <dbaupp> rusti: use std::os; let m = os::MemoryMap::new(1000, ~[os::MapWritable, os::MapFd(1)]); unsafe { *m.data = 'a' as u8; }
[03:42:59] -rusti- pastebinned 5 lines of output: http://sprunge.us/LEfT
[03:43:16] <dbaupp> rusti: use std::os; let m = os::MemoryMap::new(1000, ~[os::MapWritable, os::MapFd(1)]).unwrap(); unsafe { *m.data = 'a' as u8; }
[03:43:17] -rusti- pastebinned 1 lines of output: http://sprunge.us/EVYG
[03:43:29] <dbaupp> ;(
[03:43:38] <dbaupp> benh: ^
[03:43:59] <benh> aw
[03:44:30] <benh> I was already speculating that it'd make a pipe's backing buffer addressable and what would be a reasonable wrap-around behavior or something :(
[03:45:06] *** Quits: Jesin (Jessin_@moz-6EF909D6.cc.lehigh.edu) (Quit: Leaving)
[03:46:01] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:53:00] *** Joins: Niessy (Mibbit@80CC1C4F.809247E8.F7D14508.IP)
[03:54:07] <jeaye> Is trait inheritance a thing now?
[03:54:32] <cmr> jeaye: yes!
[03:54:40] <jeaye> What's it look like?
[03:54:42] <cmr> ...although trait objects might still have bugs, especially around default methods
[03:54:48] <cmr> trait Foo: Bar
[03:54:53] <cmr> See std::num for tons of examples
[03:54:57] <jeaye> Any public/private?
[03:55:07] <jeaye> inheritance
[03:55:09] <cmr> What do you mean?
[03:55:10] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[03:55:48] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[03:55:59] <jeaye> C++ has different access levels for inheritance. (public, protected, and private) Just wondering if there's any such thing in Rust.
[03:56:08] <dbaupp> no
[03:56:15] <jeaye> Sounds good.
[03:56:17] <jeaye> Thanks.
[03:56:40] <dbaupp> I'm not even sure that such a thing would make sense for Rust's inheritance?
[03:56:52] * dbaupp doesn't understand C++ enough to be sure though
[03:57:45] <CurlyBrace> Rust has inheritance?
[03:57:52] <cmr> CurlyBrace: only trait inheritance
[03:58:02] <jeaye> Private inheritance, for example, says that the child doesn't inherit the public interface of the base (so it can't be treated directly as a base -- though it's still polymorphic). Only the internals of the child would be able to use the base's interface.
[03:58:04] <CurlyBrace> I guess that makes more sense
[03:58:14] <jeaye> It *could* make sense in Rust, but it's probably not needed.
[03:58:26] <dbaupp> jeaye: I see, yeah, that would be possible I guess.
[03:58:30] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[03:58:56] <dbaupp> CurlyBrace: as in, trait Foo: Bar {} means that anything implementing Foo must also implement Bar
[03:59:13] <dbaupp> (and writing T: Foo in a generic implies T: Bar)
[03:59:19] <luisbg> I'm getting the following error: "error: first-class methods are not supported"
[03:59:26] <luisbg> but I see libstd code use it
[03:59:26] <CurlyBrace> ah
[03:59:51] <cmr> luisbg: Link to libstd code using it?
[04:00:05] <cmr> That only happens when trying to store a method somewhere
[04:00:23] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[04:00:47] <jeaye> That error happens when calling a method as if it were static.
[04:00:55] <jeaye> Use an invoking object, luisbg.
[04:01:10] <luisbg> jeaye, invoking object?
[04:01:23] <cmr> jeaye: like Trait::method(self_obj, ...) ?
[04:01:33] <jeaye> An instance of your struct with which to invoke your method.
[04:01:38] <jeaye> cmr: Minus the self
[04:01:46] <cmr> rusti: Iterator::next()
[04:01:48] -rusti- <anon>:7:9: 7:23 error: unresolved name `Iterator::next`.
[04:01:48] -rusti- <anon>:7          Iterator::next()
[04:01:48] -rusti-                   ^~~~~~~~~~~~~~
[04:01:48] -rusti- error: aborting due to previous error
[04:01:48] -rusti- application terminated with error code 101
[04:01:54] <cmr> rusti: std::iter::Iterator::next()
[04:01:55] -rusti- <anon>:7:9: 7:34 error: unresolved name `std::iter::Iterator::next`.
[04:01:55] -rusti- <anon>:7          std::iter::Iterator::next()
[04:01:55] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~~~~~
[04:01:56] -rusti- error: aborting due to previous error
[04:01:56] -rusti- application terminated with error code 101
[04:01:56] <luisbg> jeaye, I see
[04:02:04] <cmr> jeaye: eh? :\
[04:02:13] <jeaye> sec
[04:02:20] <cmr> rusti: let x = std::iter::Iterator::next; x
[04:02:22] -rusti- <anon>:7:17: 7:42 error: unresolved name `std::iter::Iterator::next`.
[04:02:22] -rusti- <anon>:7          let x = std::iter::Iterator::next; x
[04:02:22] -rusti-                           ^~~~~~~~~~~~~~~~~~~~~~~~~
[04:02:22] -rusti- error: aborting due to previous error
[04:02:22] -rusti- application terminated with error code 101
[04:03:34] <sfackler> is it a known bug that pub enums in a private module can be used cross-crate?
[04:04:12] <sfackler> and that private modules can be use'd cross crate?
[04:04:26] <dbaupp> sfackler: it's probably a consequence of us not enforcing privacy correctly
[04:04:53] <cmr> slash not having a well-defined notion of privacy.
[04:04:57] <dbaupp> so it'll probably be fixed by the resolution of https://github.com/mozilla/rust/issues/8215
[04:05:37] <jeaye> cmr: 
[04:05:39] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[04:05:40] <jeaye> rusti: struct T; impl T { pub fn foo(&self) { } } T::foo()
[04:05:40] -rusti- pastebinned 8 lines of output: http://sprunge.us/REEU
[04:05:44] <jeaye> Check the output
[04:06:11] <dbaupp> rusti: struct T; impl T { pub fn foo(&self) { } } T::foo
[04:06:12] -rusti- pastebinned 8 lines of output: http://sprunge.us/HdLC
[04:06:35] <cmr> Huh
[04:06:39] <jeaye> :P
[04:07:01] <luisbg> can I have static functions as well as static variables?
[04:07:15] <cmr> luisbg: what would a static function do?
[04:07:17] *** Quits: ryeguy (ryeguy@9C569A0.5D1143CD.E8644521.IP) (Quit: )
[04:07:21] <cmr> Functions are already global and immutable :P
[04:07:50] *** Joins: LowPotential (user@moz-B721E318.pitbpa.fios.verizon.net)
[04:08:00] <dbaupp> rusti: fn a_static_function() { println("foo"); } a_static_function()
[04:08:01] -rusti- foo
[04:08:01] -rusti- ()
[04:08:02] <jeaye> luisbg: I think, by static, he means any function not taking self
[04:08:13] <luisbg> jeaye, yes
[04:08:20] *** Quits: Cua (Cua@A4682D08.E3C7EE03.9C269F8F.IP) (Quit: rau má!!!!!!!!!!!!!!!)
[04:08:23] <jeaye> luisbg: You may have such functions in Rust.
[04:08:23] <cmr> ah, static methods?
[04:08:25] <luisbg> so not part of a struct's impl
[04:08:40] <cmr> Oh, free functions?
[04:08:42] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[04:08:45] <jeaye> cmr: "method" is a very Rustic 
[04:08:47] <luisbg> cmr, yes
[04:08:48] <cmr> Yeah we have literally tons of them, everywhere.
[04:09:14] <bblum> literally tons
[04:09:14] <luisbg> cmr, any example I can grep for and use as a reference to how they are written?
[04:09:17] <bblum> i don't think that is true
[04:09:20] <jeaye> luisbg: Isn't your main function free? :P
[04:09:27] <bblum> with hard drives weighing a couple pounds and storing a terabyte each
[04:09:27] <cmr> https://github.com/mozilla/rust/blob/master/src/libstd/iter.rs#L1793
[04:09:30] <bblum> that would be a LOT of methods
[04:09:55] <cmr> bblum: no no no, not literally literally
[04:10:02] <jeaye> bblum: Most hard drives these days are not yet 1TB. :P
[04:10:03] <ldunn> figuraliterally
[04:10:10] <jeaye> ^
[04:10:11] <cmr> ldunn gets it!
[04:10:22] <luisbg> jeaye, yes, but I understand the concept, just struggling to get my non-free function to see the free on outside of the struct
[04:10:29] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[04:10:30] <luisbg> keep getting error of non-found
[04:10:37] <cmr> luisbg: is it pub?
[04:10:43] <luisbg> cmr, yes
[04:10:43] <jeaye> Is use `use`d?
[04:10:46] <LowPotential> Hello everyone. I'm experimenting with std::rt::io. I'm trying to call a function "repl( stream: &TcpStream )" on every accepted connection TCP connection. So I have: "for stream in acceptor.incoming() { do sapwn { repl( ~stream.unwrap() ); } }. However, I keep getting an error: "cannot move out of captured outer variable in a heap closure". Any tips?
[04:11:11] <luisbg> cmr, wait a second
[04:11:18] <LowPotential> Sorry, that should be "repl( stream: ~TcpStream )"
[04:11:20] <sfackler> LowPotential: you want to use std::task::spawn_with
[04:11:32] <strcat> LowPotential: you probably don't want ~ there, doesn't really make sense - you want &
[04:11:37] <dbaupp> LowPotential: https://github.com/mozilla/rust/wiki/Doc-under-construction-FAQ#once-functions
[04:11:52] *** Joins: Puddles (Mibbit@moz-64FBC90D.socal.res.rr.com)
[04:12:07] <dbaupp> LowPotential: (the spawn_with(stream) |stream| { ... } suggestion should resolve it)
[04:12:31] <ldunn> ew, rustc log output is...hard to read
[04:12:41] <LowPotential> sfackler, dbaupp: Thanks. I'll check out 'spawn_with'.
[04:12:53] <luisbg> cmr, you are good :) I was missing the 'pub'
[04:13:11] <luisbg> cmr, funny, since I am drinking a bit after arriving from the actual Pub
[04:13:12] *** Quits: tikue_ (tkuehn@4245E30A.E2CAEE6E.689607DE.IP) (Quit: tikue_)
[04:13:20] <cmr> heh
[04:13:36] <dbaupp> ldunn: using the debug2/info2/... macros will give nicer output
[04:13:36] <cmr> ldunn: it's not so hard to read as there's a ton of it from lots of different pieces of the code.
[04:13:49] <cmr> it's like looking at dmesg your first time :P
[04:13:50] <dbaupp> ldunn: oh, wait, you're using rustc
[04:13:56] <ldunn> cmr: linebreaks at least would be nice!
[04:14:21] <ldunn> dbaupp: well, I'm trying to poke a compiler crash, yeah
[04:15:01] <CurlyBrace> That sounds like poking a bear with sticks
[04:15:22] <bblum> LowPotential: oh yeah, i wrote a blurb page for this problem -- https://github.com/mozilla/rust/wiki/Doc-under-construction-FAQ
[04:16:03] <ldunn> The only real indication I'm getting is that it's trying to unwrap a None, though. Hmf
[04:16:09] * ldunn -> gdb
[04:16:29] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[04:16:37] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[04:16:56] <dbaupp> ldunn: what's the crash message?
[04:16:59] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:17:12] <ldunn> "task '<unnamed>' failed at 'called `Option::unwrap()` on a `None` value', /home/ldunn/dev/rust/src/libstd/option.rs:323"
[04:17:58] <dbaupp> drat that's not helpful
[04:18:13] <ldunn> indeed not
[04:18:15] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[04:18:21] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Connection reset by peer)
[04:18:32] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:19:33] <ldunn> https://gist.github.com/ldunn/7a7c6e0ae7386bcd73d9 is the backtrace 
[04:22:01] <dbaupp> cmr: has the bencher finished that batch?
[04:22:18] <cmr> dbaupp: oh, yes it has!
[04:22:21] <cmr> didn't even notice.
[04:22:57] <Eridius> can I ask someone to run `make check-stage2-rustpkg RUST_THREADS=1 RUST_LOG=rustpkg` and gist the outpu?
[04:22:59] * cmr kicks up multibuilder again.
[04:23:07] * dbaupp just noticed the lack of "isrustfastyet pushed ... update mem [to huonw/isrustfastyet]"
[04:23:59] <cmr> I really need to automate my diff of already-built.txt and ~/benches
[04:24:06] <cmr> and get it going automagically
[04:24:16] <strcat> http://static.rust-lang.org/doc/master/tutorial.html#boxes hopefully really clear now...
[04:24:24] <strcat> the rest of the tutorial is worse
[04:26:09] *** Quits: derboi_c (derboi_c@510621FB.DF3CA0D0.BA2F4534.IP) (Ping timeout)
[04:26:17] <dbaupp> Eridius: that outputs more than a meg of output?
[04:26:35] <cmr> dbaupp: that huge cap between the old and the new is the 212 commits that failed to build when I ran out of disk space
[04:26:38] <cmr> :P
[04:26:51] <cmr> *gap
[04:26:56] <dbaupp> cmr: haha <3 having no disk space
[04:27:00] <cmr> they're rebuilding now.
[04:27:17] <luisbg> does Rust have the ? expression, like C's, for "bool? run_true: run_false;" 
[04:27:24] *** Quits: Puddles (Mibbit@moz-64FBC90D.socal.res.rr.com) (Quit: http://www.mibbit.com ajax IRC Client)
[04:27:26] <cmr> luisbg: no, but if is an expression
[04:27:31] <cmr> rusti: if true { 42 } else { 24 }
[04:27:32] <Eridius> dbaupp: it does? I get 319k
[04:27:32] -rusti- 42
[04:27:40] <luisbg> cmr, oooh, that is nice
[04:27:51] <jeaye> luisbg: Rust doesn't need C's ternary because of its usage of ;
[04:27:55] <Eridius> dbaupp: I'm specifically looking for the output for tests::rust_path_hack_cwd
[04:28:02] <luisbg> jeaye, good point
[04:28:11] <dbaupp> Eridius: a whole pile of raw debug output dumping workcache hashtables (or trees or whatever they are)
[04:28:11] <Eridius> dbaupp: I have 3 failing tests, but I'm not sure what's going wrong, so I want to see how my debug output differs
[04:28:40] <Eridius> dbaupp: eww, really? I don't have that
[04:28:51] <Eridius> my master is only 53 hours old too, so I'm not that far out of date
[04:28:55] <jeaye> luisbg: So `int32_t a = foo ? 32 : 42;` becomes `let a = if foo { 32 } else { 42 };`
[04:29:02] <engla> trans/build.rs uses @mut Block all over. All of those functions could use &mut Block, except that leads to borrowck errors .. :(
[04:29:04] <cmr> dbaupp: multibuilder is fast enough that distributing the build amongst many boxes is not really a priority.
[04:29:19] <dbaupp> Eridius: http://ix.io/8h6
[04:29:24] *** Joins: maik (maik@moz-5DA9E925.dip0.t-ipconnect.de)
[04:29:25] <cmr> fsvo fast
[04:29:29] <dbaupp> cmr: yeah, I'd kinda assumed that :)
[04:29:33] <Eridius> dbaupp: thanks
[04:29:42] <cmr> 742 commits in however long it's been is pretty impressive.
[04:29:49] <engla> errors that are just because of   f(cx, g(cx, xyz), wwz) types of expressions
[04:29:55] <luisbg> jeaye, reads nicely
[04:30:00] *** Joins: derboi_c (derboi_c@510621FB.DF3CA0D0.BA2F4534.IP)
[04:30:20] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[04:30:47] <dbaupp> Eridius: thta's with TESTNAME=rust_path_hack_cwd
[04:31:32] <Eridius> dbaupp: oddly you seem to have lost newlines
[04:31:38] *** Joins: tikue_ (tkuehn@4245E30A.E2CAEE6E.689607DE.IP)
[04:31:44] <Eridius> `Did find id foo-0.1 in dir /tmp/9FKZ6CZuD6hLaJy4foo/foo` is interesting. I don't have that
[04:32:04] <Eridius> I get `Didn't find id foo-0.1 in dir /private/var/folders/cs/l6c6g06x0974_0w5pdg8dps80000gn/T/7bKF0kDH6b5OZ6h6foo/foo`
[04:32:18] <cmr> Heh
[04:32:48] <dbaupp> Eridius: I'm on linux, rust hash 3ae895360c89b27bee7f076fded1c99691bd057e
[04:33:52] <LowPotential> https://gist.github.com/anonymous/6749361
[04:34:00] *** Quits: apples (textual@moz-843551AE.hsd1.ca.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[04:34:06] <LowPotential> I'm still struggling with spawn_with and TcpStreams.
[04:34:16] <LowPotential> (See above gist)
[04:34:38] <tikue_> LowPotential: that's up to you
[04:34:46] <tikue_> what do you want to happen if a stream returns None?
[04:35:11] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[04:35:11] <LowPotential> tikue_: More pressing is that I'm getting the error "cannot borrow immutable dereference of & pointer as mutable"
[04:35:12] <tikue_> there's no one way to handle that -- up to the implementer. options are essentially a nullable type
[04:35:21] *** Joins: nixprime (Mibbit@moz-B5BC087D.hsd1.ca.comcast.net)
[04:35:47] <tikue_> oh ok
[04:35:51] <tikue_> that's not a problem with option
[04:35:52] <ldunn> does rustc make any assumptions about what should be present in an impl of, say, OwnedVector<T>?
[04:35:54] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[04:36:12] *** Quits: maik (maik@moz-5DA9E925.dip0.t-ipconnect.de) (Ping timeout)
[04:36:12] <dbaupp> ldunn: what do you mean? other than what the trait specifies?
[04:36:28] <ldunn> er I guess I mean trait, not impl. 
[04:36:38] <engla> ldunn: only traits tagged with a `lang` attribute are special. For example trait Add
[04:36:42] <wakandan> hmm, how do I edit a pull request?
[04:36:42] <ldunn> I'm looking at the backtrace of the crash, and it looks like it's something to do with encoding impls.
[04:36:46] <ldunn> Hm. 
[04:37:05] <dbaupp> wakandan: just push to that branch
[04:37:14] <ldunn> (And I'm providing my own OwnedVector and OwnedStr, so I'm wondering if I need to do something in particular to make rustc happy with those)
[04:37:31] <dbaupp> wakandan: you'll probably need to force-push (push -f) if you're updating your #[abi] one
[04:37:34] <LowPotential> tikue_: Yes. I guess the question that I'm really asking is how to pass as 'Option<TcpStream'> into a closure which then passes it by mutable borrow to a function.
[04:37:39] <wakandan> dbaupp: here's the pr
[04:37:39] <wakandan> https://github.com/mozilla/rust/pull/9601
[04:37:40] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[04:37:47] <LowPotential> Because my current attempts are not working. :)
[04:37:47] <sfackler> tikue_: dealing with the Option in this case is trivial since those methods only return None if you a condition is raised and trapped
[04:37:51] <dbaupp> ldunn: no, nothing special, they're just normal traits
[04:37:58] <wakandan> dbaupp: I need to remove the first 3 commits and squash the last 2 together
[04:38:02] <ldunn> alrighty, hm
[04:38:03] <wakandan> not sure how to it :(
[04:38:07] <wakandan> do*
[04:38:09] <dbaupp> wakandan: I know (I'm huonw :P )
[04:38:14] <wakandan> ll
[04:38:15] <wakandan> lol
[04:38:17] <wakandan> ok 
[04:38:26] <wakandan> dbaupp: I could use some help here 
[04:38:45] <dbaupp> wakandan: http://gitready.com/advanced/2009/02/10/squashing-commits-with-rebase.html
[04:39:14] *** Quits: tychof (Mibbit@96AC98ED.4BDE79FD.86CC3CCD.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:39:33] <Luqman> wakandan: i think you should leave off the cdecl from those externs
[04:41:51] <wakandan> Luqman: leave off means, not to add them in add all?
[04:41:53] <wakandan> :(
[04:42:00] *** Joins: maik (maik@moz-5DA9E925.dip0.t-ipconnect.de)
[04:42:03] <LowPotential> dbaupp: Would you please expand on how to use spawn_with? I'm trying "spawn_with( stream ) |stream| { repl( stream.unwrap() ) }"
[04:42:25] <dbaupp> LowPotential: what is the problem with that?
[04:43:09] <LowPotential> dbaupp: Correction: "spawn_with( stream ) |stream| { repl( &mut stream.unwrap() ) }"
[04:43:16] <LowPotential> dbaupp: and hitting a compiler error, I think.
[04:43:20] <tikue_> what do i need to import to use Ipv4Addr? >_<
[04:43:21] <LowPotential> error: internal compiler error: drop_ty_immediate: non-box ty
[04:43:41] <strcat> LowPotential: what does repl take?
[04:43:47] <wakandan> dbaupp: alright squashing seems to work
[04:43:51] <LowPotential> strcat: "&mut TcpStream"
[04:43:52] <tikue_> io reexports it but `use std::rt::io`` doesn't work
[04:43:59] <wakandan> dbaupp: how to remove these commits 
[04:44:26] <wakandan> dbaupp: the last 2 commit in the pr is on the HEAD, followed the last 3 ...
[04:44:26] <dbaupp> wakandan: you can use interactive rebase to delete them: just remove those lines
[04:44:36] <wakandan> ah
[04:45:06] <sfackler> tikue_: io only exports the type, not the variants
[04:45:20] <sfackler> you'll need to 'use std::rt::io::net::ip::Ipv4Addr'
[04:45:49] <tikue_> sfackler: ah, gotcha
[04:45:53] <LowPotential> dbaupp, strcat: https://gist.github.com/anonymous/6749412
[04:45:57] <ldunn> oh my lawd. Turns out I had my #[lang="drop"] in the wrong place
[04:45:58] <LowPotential> (For clarity)
[04:46:02] <wakandan> dbaupp: in my history it doesn't look like that's all :(
[04:46:04] *** Quits: jordyd (jordyd@moz-2C53E992.seg41.ucf.edu) (Ping timeout)
[04:46:14] <wakandan> dbaupp: it was followed by some automerge
[04:46:14] <ldunn> I wonder if where it's supposed to be changed, or if rustc just didn't are before
[04:46:40] <ldunn> s/are/care/
[04:46:46] <tikue_> LowPotential: can you just pass the stream to repl by value
[04:47:10] <tikue_> LowPotential: or are you using the stream outside of repl afterward
[04:47:42] <LowPotential> tikue_: Nope, not using it after. Would passing by value be the best in this case? I'm still learning Rust basics.
[04:47:58] <Eridius> how come the rustpkg debug output sometimes truncates with [...]? From reading the code that happens if the log exceeds 2048 chars, but this line isn't 2048 chars long. Is it batching up output for some reason?
[04:48:08] <tikue_> LowPotential: yeah basically if you're moving an argument into a function (i.e. it wants to "own" it) then passing by value is best
[04:48:22] <dbaupp> LowPotential: oh, it's probably beacause it's a new type struct and they're kinda broken for small types
[04:48:34] <dbaupp> LowPotential: using an explicit match probably works
[04:48:53] <tikue_> LowPotential: this compiles for me https://gist.github.com/tikue/6ba1b2352a90fb3ac639
[04:49:10] <dbaupp> wakandan: I don't erally know, I'm not particularly good at git :(
[04:49:12] *** Joins: SteveMcQwark (SteveMcQwa@moz-7CFCF343.cpe.net.cable.rogers.com)
[04:49:14] <dbaupp> *really
[04:49:24] <LowPotential> tikue_: Thanks!
[04:49:38] <tikue_> sfackler: can you elaborate on when acceptor.incoming() would return Some(None)
[04:49:53] <tikue_> it doesn't appear to be documented
[04:50:29] <Eridius> dbaupp: could I ask you to run the test again, but this time adding std::path to the RUST_LOG?
[04:50:58] <dbaupp> Eridius: as well as rustpkg?
[04:51:02] <Eridius> dbaupp: yes please
[04:51:29] * Eridius will just compile a separate copy of the compiler if he needs anything else
[04:51:37] <LowPotential> tikue_: If the type that I was passing by value didn't contain any owned boxes, then it would just be copied, and not moved? Would the compiler know to move it instead of copying it in that case if I never used it after passing into to the function?
[04:51:54] <tikue_> LowPotential: actually, rust moves by default
[04:52:12] <dbaupp> Eridius: http://ix.io/8h7 (doesn't appear to be any different)
[04:52:22] <tikue_> LowPotential: the only time it doesn't move is if it infers that you want to copy and the struct happens to be implicitly copyable
[04:52:40] <Eridius> dbaupp: hmm
[04:52:40] <strcat> it's not really like that
[04:52:47] <LowPotential> tikue_: Got it. Thanks again for your help.
[04:52:50] <tikue_> strcat: aw cmon it's basically like that
[04:52:53] <Eridius> dbaupp: thanks. I guess I'll just do a side compile
[04:52:53] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Connection reset by peer)
[04:52:57] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[04:53:00] <dbaupp> LowPotential: if there is a semantic different between "moving" and "copying" then the copy has to be explicit with .clone()
[04:53:01] <strcat> tikue_: no, it's not really
[04:53:06] <tikue_> strcat: how is it then?
[04:53:06] <strcat> a move is a copy that steals ownership
[04:53:11] <sfackler> tikue_: so incoming() returns an iterator. The iterator always returns Some(_). If there was an error (dead socket, etc), it will raise the io_cond condition and then return Some(None). It will otherwise return Some(Some(a_tcp_socket)). If you're not trapping io_cond, you can just unwrap the result without worrying
[04:53:13] <LowPotential> dbaupp: Thanks to you as well.
[04:53:15] <strcat> it's not cheaper than a regular by-value copy
[04:53:20] <strcat> it's identical in how much it copies
[04:53:47] <strcat> assigning/passing/returning is always a shallow copy, and it steals ownership (moving) if the type has a destructor, &fn or &mut
[04:53:49] <strcat> that's all
[04:54:00] <dbaupp> LowPotential, tikue_: http://static.rust-lang.org/doc/master/tutorial.html#move-semantics
[04:55:07] <tikue_> strcat: i'm not sure i see how what i said contradicts that
[04:55:45] <tikue_> i said the only time it doesn't move is when it infers you want a copy instead
[04:55:53] <tikue_> rusti: let a = 1; let b = a; a + b
[04:55:54] <strcat> it doesn't infer anything
[04:55:54] -rusti- 2
[04:55:56] <dbaupp> it doesn't infer anyhting
[04:56:02] *** Joins: jdsanders (Adium@moz-F45527D6.hlrn.qwest.net)
[04:56:11] <strcat> tikue_: let b = a always does a shallow copy of a to b
[04:56:14] <strcat> there are no exceptions
[04:56:32] <dbaupp> tikue_: an implicit copy is *exactly* the same as a move, except you can still use the source
[04:56:36] <tikue_> strcat: oh, you mean it never moves if a is implicitly cloneable?
[04:56:39] <tikue_> dbaupp: i know that
[04:56:53] <strcat> tikue_: 'implicitly copyable' doesn't really make sense
[04:56:55] <strcat> lets stop saying it
[04:57:13] <strcat> all types in rust are implicitly copyable, rust's only form of assignment/passing/returning is by-shallow-copy
[04:57:28] <strcat> if the type has a destructor, &fn or &mut, it is a move of ownership
[04:57:38] <strcat> it is still a kind of shallow copy. it is user-visible that it's shallow, and a copy
[04:57:58] <strcat> I'm not sure why we're drawing incorrect analogies and pretending it's different than a copy all the time :s
[04:58:23] <dbaupp> because a lot of people think it's magical and different? :(
[04:58:27] <tikue_> because moving isn't just copying?
[04:58:33] <strcat> tikue_: it is just copying
[04:58:37] <strcat> it does a shallow copy
[04:58:41] <strcat> and now the source is unusable
[04:58:45] <tikue_> right
[04:58:52] <tikue_> that's why it's not just copying...
[04:58:54] <strcat> why is the source unusable? an artificial limitation for memory safety
[04:59:31] <dbaupp> tikue_: it's a copy + the *compiler* considering the source unusable, no difference at runtime
[04:59:40] <strcat> and that's user-visible
[04:59:59] <strcat> (the fact that it still just shallows copies it as usual)
[05:00:20] <tikue_> strcat: i'm not sure what you mean by artificial limitation
[05:00:23] <tikue_> dbaupp: again, i know that
[05:00:29] *** Joins: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP)
[05:00:47] <strcat> tikue_: as in rust could still let you use the source
[05:01:09] <LowPotential> strcat, dbaupp, tikue_: This is all fairly confusing. Question: if I'm passing a struct by value and the struct has owned boxes, then the struct is moved. Right? If the struct is copyable, then it's copied. Is that right?
[05:01:18] <strcat> LowPotential: no
[05:01:21] <tikue_> strcat: but it doesn't, which is an important distinction
[05:01:24] *** Quits: jdsanders (Adium@moz-F45527D6.hlrn.qwest.net) (Quit: Leaving.)
[05:01:30] <strcat> ignore everything said on irc and read that move semantics section in the tutorial
[05:01:37] <LowPotential> strcat: Deal.
[05:01:39] <strcat> tikue_: but it's still a copy
[05:01:43] <tikue_> strcat: i know
[05:01:49] <strcat> and we need to stop telling people it's not a copy because they think that means it doesn't copy it
[05:02:00] <strcat> (since that's what you're saying)
[05:02:01] <tikue_> what do you want to call it?
[05:02:04] <LowPotential> strcat: Is passing the TcpStream by value the right thing to do in this case?
[05:02:08] <strcat> a move. a copy that steals ownership
[05:02:28] <dbaupp> LowPotential: depends if you want to use it in later in the spawn'd function or not
[05:02:35] <LowPotential> dbaupp: Nope.
[05:02:40] <LowPotential> Can be moved.
[05:02:47] <dbaupp> LowPotential: then by value is fine, yes
[05:02:58] <strcat> rusti: let mut a = ~5; let b = a; a = ~6; (a, b)
[05:03:00] -rusti- (~6, ~5)
[05:03:20] <wakandan> dbaupp: hmm, for this commit 
[05:03:22] <wakandan> dbaupp: https://github.com/wakandan/rust/commit/eafde3a49aacedb694a53bce67bf3750350f647e
[05:03:33] <strcat> rusti: let a = 5; let b = 5; (&a as *int, &b as *int)
[05:03:34] -rusti- ((0x7f2ed4629148 as *()), (0x7f2ed4629140 as *()))
[05:03:37] <wakandan> dbaupp: most of it is from auto merged from master in mozilla/rust
[05:03:40] <strcat> rusti: let a = 5; let b = a; (&a as *int, &b as *int)
[05:03:41] -rusti- ((0x7fcde8629148 as *()), (0x7fcde8629140 as *()))
[05:03:50] <strcat> rusti: let a = ~5; let b = a; (&a as *~int, &b as *~int)
[05:03:51] -rusti- pastebinned 8 lines of output: http://sprunge.us/SCaN
[05:04:02] <strcat> rusti: let mut a = ~5; let b = a; a = ~6; (&a as *~int, &b as *~int)
[05:04:03] -rusti- ((0x7fb426e29148 as *()), (0x7fb426e29140 as *()))
[05:04:04] <dbaupp> strcat: I guess part of the problem is conflating different meanings of "copy" e.g. .clone() vs memcpy (so you using shallow copy is good)
[05:04:36] <strcat> at a language level there's only one thing, though
[05:04:39] <dbaupp> yes
[05:04:41] <wakandan> dbaupp: the only place contains my changes was changing Left, Right, which infact was to revert the changes I made earlier...
[05:05:06] *** Joins: wil (wil@moz-BEF339ED.bootp.virginia.edu)
[05:05:14] <wakandan> dbaupp: I don't understand why it's wrong... :(
[05:05:16] <strcat> thankfully we don't have by-references values/parameters like C++, as they are just normal values in rust
[05:05:29] <strcat> now *that* would be hard to explain
[05:05:31] <strcat> ;p
[05:05:33] <dbaupp> strcat: I know that there's only one thing in the language, but it's not necessarily obvious to a beginner.
[05:05:38] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[05:05:58] <dbaupp> wakandan: can't you just remove that commit entirely?
[05:05:58] <tikue_> rusti: let mut a = ~5; let b = a; a
[05:05:59] <strcat> well that's why I wrote a section in the tutorial explaining it N months ago ;p
[05:05:59] -rusti- pastebinned 8 lines of output: http://sprunge.us/NUhT
[05:06:11] <strcat> tikue_: you can still use 'a' if you write something else to it
[05:06:16] <dbaupp> wakandan: (as well as the ones introducing the Eithers)
[05:06:17] <tikue_> rusti: let mut a = ~5; let b = a; a = ~1; a
[05:06:17] -rusti- <anon>:7:29: 7:30 warning: unused variable: `b` [-W unused-variable (default)]
[05:06:17] -rusti- <anon>:7          let mut a = ~5; let b = a; a = ~1; a
[05:06:18] -rusti-                                       ^
[05:06:18] -rusti- ~1
[05:06:23] <tikue_> strcat: that's entirely unintuitive
[05:06:25] <tikue_> imo
[05:06:33] <strcat> tikue_: because you're thinking about moves the wrong way
[05:06:35] <tikue_> i never knew you could do that until now
[05:06:35] *** Quits: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[05:06:37] <strcat> moves == copies
[05:06:37] <wakandan> dbaupp: that commit was to revert what I was doing wrong, to make the code work
[05:06:47] <dbaupp> wakandan: "what you were doing wrong"?
[05:06:52] <dbaupp> what were you doing wrong?
[05:06:53] <tikue_> strcat: right but what is a before you reassign to it?
[05:07:05] <strcat> tikue_: a variable you're not allowed to use
[05:07:09] *** Quits: maik (maik@moz-5DA9E925.dip0.t-ipconnect.de) (Ping timeout)
[05:07:16] <tikue_> then there should be a better compiler error
[05:07:17] <strcat> it has the same address before you move (copy) from it, and after you reassign to it
[05:07:28] <tikue_> a is not moved, a is a variable you can't currently use
[05:07:43] <wil> Is it possible for task::spawn_supervised to not return immediately?
[05:07:45] <dbaupp> tikue_: the contents of a is moved
[05:07:50] <wakandan> dbaupp: I was going to remove some use of Either in src/libstd/fmt/mod.rs and src/libstd/fmt/rt.rs
[05:07:50] <strcat> tikue_: right, you're 'moving' (copying) a value *from* `a`
[05:07:58] <tikue_> dbaupp: i think that's what the compiler should say
[05:07:59] <tikue_> strcat: ^
[05:08:03] <strcat> tikue_: it's called a move because ownership is moved
[05:08:04] <wakandan> dbaupp: but it turns out to be much more complicated than that, I can't proceed
[05:08:11] <strcat> tikue_: still implemented with copying
[05:08:13] <dbaupp> wakandan: yes, and those commits need to be removed from the abi PR
[05:08:18] <tikue_> strcat: i know it's a copy
[05:08:20] <nejucomo> This discussion is helpful for me.  For some reason I imagined that: let a = ~1; let b = a; // might result in a single memory slot on the stack, which at one point is called "a" and another point is called "b".
[05:08:23] <dbaupp> wakandan: (the Either ones)
[05:08:23] <strcat> and swaps are a double-move
[05:08:35] <wakandan> dbaupp: ah ok, so it's possible to just remove those commits out of the PR then?
[05:08:41] <nejucomo> Realizing that move is just copy with a static restriction thereafter on the source simplifies my understanding.
[05:09:01] <dbaupp> wakandan: yes, using interactive rebasing to remove them from the branch that is associated with the PR
[05:09:04] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[05:09:09] <nixprime> anyone willing to help a rust noob with some lifetime issues? I've read the docs, including the borrowed ptr tutorial, and done some googling and I can't find anything relevant
[05:09:10] <tikue_> i think "use of moved value: `a`" is the wrong way to put it
[05:09:33] <dbaupp> wakandan: and then pushing the new contents of the branch (which should just be a single extra commit compared to the master branch in the mozilla repo) to your fork
[05:09:43] <dbaupp> nixprime: yes
[05:09:45] <strcat> nejucomo: yeah, I feel we've gone too far into weird analogies and made simple things complex
[05:09:46] <tikue_> maybe "use of variable `a` whose contents were moved"
[05:09:55] <strcat> nejucomo: rust used to be a much different language, and it *was* complex
[05:09:55] <nejucomo> nixprime: I'm also a rust noob, but I like seeing pastebins and learning from them.  ;-)
[05:09:58] <strcat> but the rules are simple now
[05:10:00] <dbaupp> tikue_: submit a PR :)
[05:10:05] <nixprime> on rustc 0.8: https://gist.github.com/nixprime/0317a807f3d274410953
[05:10:14] <wil> nixprime: I'm also noobish, but can try
[05:10:18] <tikue_> dbaupp: would you r+ it :P
[05:10:23] <nejucomo> strcat: Yes.  One of my favorite aspects of rust is how refreshingly simple it is (especially compared to say, C++).
[05:10:36] <tikue_> nejucomo: it's simple in disguise
[05:10:36] *** Quits: jstevans (Instantbir@moz-735D8260.washdc.fios.verizon.net) (Ping timeout)
[05:10:40] <strcat> now that moves are simply based on the type and not computed/inferred in horrible ways like pre... 0.4?
[05:10:46] <dbaupp> nixprime: you need next: Option<&'self Node<'self>>
[05:10:47] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[05:10:52] <nejucomo> I'm also quite happy to see how much simpler it is since 0.4 days.
[05:11:06] <strcat> now we just need to make the docs simpler/saner
[05:11:08] <dbaupp> nixprime: since Node now has internal lifetimes, and so acts a bit like `&` in that it needs one
[05:11:08] <strcat> ;p
[05:11:18] <strcat> nejucomo: http://static.rust-lang.org/doc/master/tutorial.html#boxes I just replaced that section, for example
[05:11:22] <strcat> I think it's a lot simpler now.
[05:11:30] <strcat> going to rewrite a few other parts
[05:11:34] <dbaupp> tikue_: maybe :P but I might submit one before you...
[05:11:36] <nixprime> dbaupp: ah, I see - thanks!
[05:11:39] * dbaupp races
[05:11:45] <tikue_> no!!!
[05:11:56] * tikue_ doesn't even know where that would be. starts grep...
[05:12:37] <nejucomo> nixprime: Ah… nice example, and dbaupp: thanks for the explanation!
[05:14:17] <nejucomo> strcat: It's obvious to me why the first example would have infinite size, but that's because I inferred enums require as much space as their largest alternative...
[05:14:27] <nejucomo> -and I inferred that from knowledge of C unions...
[05:14:28] <dbaupp> tikue_: http://ix.io/8h9/diff
[05:14:29] *** Joins: maik (maik@moz-5DA9E925.dip0.t-ipconnect.de)
[05:14:35] <strcat> nejucomo: that's why there's a note there
[05:14:37] <nejucomo> So it might help some readers to spell that out.
[05:14:40] <tikue_> dbaupp: :((((
[05:14:45] <tikue_> my words!!!
[05:14:46] <dbaupp> tikue_: err, oops, spelling :P
[05:15:06] <dbaupp> tikue_: feel free to steal that though, /me isn't sure he's bothered to fix the testsuite
[05:15:08] <strcat> 'It's comparable to a nullable pointer in many other languages, but stores the contained value unboxed.'
[05:15:15] <tikue_> :P
[05:15:50] <nejucomo> Ah…  I see.  I read that and just missed the importance of "unboxed".
[05:17:43] <SiegeLord> It still uses the term box one line before it's introduced
[05:17:53] *** Quits: silotis (quassel@moz-4B8C4631.oc.oc.cox.net) (Client exited)
[05:18:14] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[05:18:18] <nejucomo> Oh, interesting.  The next example explains something I was unclear about but wanted to know more - the fact that callers can choose where to place returned values...
[05:18:35] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[05:18:39] <strcat> I added that after explaining it 10+ times in one day here ;p
[05:18:44] <Eridius> ok wtf. `RUST_LOG=::help ./rustpkgtest-x86_64-apple-darwin` lists 5 components in std, none of them path. But path has debug!() statements
[05:18:45] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:18:53] <Eridius> why would path's debug not be showing up?
[05:19:02] <Eridius> and yes I gave --enable-debug to ./configure
[05:19:03] <dbaupp> Eridius: I've noticed that too, it's horrible
[05:19:04] <strcat> nejucomo: when you do ~expr, it allocates the ~ before evaluating the expr and puts the result in it
[05:19:19] <strcat> nejucomo: so ~foo() where foo() returns a large object will pass the ~ ptr *as the out pointer*
[05:19:45] <strcat> (ofc, LLVM also gets to optimize, but this is just what rustc outputs)
[05:19:51] <wil> A call to do task::spawn_supervised should return (essentially) immediately, correct?
[05:20:03] <Eridius> dbaupp: random thought: maybe there's a problem with debug in default methods? since this is a default method.
[05:20:03] <dbaupp> wil: yes
[05:20:04] <cmr> wil: yes
[05:20:12] <dbaupp> Eridius: possibly
[05:20:26] <dbaupp> Eridius: there's also problems with inlining items
[05:20:32] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[05:21:11] <Eridius> dbaupp: nope, just tested, works fine in a debug method
[05:21:23] <wil> dbaupp, cmr: Are there any cases that could cause it to only return after the fn passed in has completed? Specifically, I'm running a process in the function I pass, and sometimes the 'do spawn_supervised' seems to return immediately, while sometimes it doesn't return until the process has completed.
[05:21:33] <dbaupp> Eridius: (e.g. RUST_LOG=::help rustc has rustc::{condition, ebml, attr} which are in std, extra and syntax respectively)
[05:21:35] <strcat> nejucomo: http://ix.io/8ha becomes http://ix.io/8hb (can see that it calls malloc, casts it, passes as the out pointer, writes directly to it)
[05:21:45] <cmr> wil: I think it depends on how the scheduler is feeling at the moment.
[05:21:57] <cmr> wil: It might be that your task isn't getting rescheduled
[05:22:01] <Eridius> dbaupp: wacky
[05:22:28] <Eridius> dbaupp: I feel like debug!() statements simply aren't working in libstd
[05:22:33] <tikue_> dbaupp: the problem is so many other error msgs should probably change too for consistency :\
[05:22:38] <strcat> if we had sane FFI wrappers it would optimize it to 'ret 0' and not allocate anything ;[
[05:22:39] <dbaupp> Eridius: possibly
[05:22:48] <dbaupp> tikue_: where/which?
[05:22:57] <wil> cmr: Ah, interesting... Could I fix that by instantiating my own scheduler? 
[05:23:02] <tikue_> "capture of moved value"
[05:23:08] <cmr> wil: spawn_sched
[05:23:13] <SiegeLord> I'd add to that tutorial after "...but stores the contained value unboxed." a sentence: "That is, Option<T> is at least as large as T."
[05:23:21] <dbaupp> tikue_: notice the format strings in that error message? ;)
[05:23:33] <dbaupp> wil, cmr: you probably don't want/need that
[05:23:45] <strcat> SiegeLord: sure
[05:23:50] <tikue_> dbaupp: ooh, is that like all the cases? ;D
[05:23:59] <dbaupp> wil: you can explcicitly deschedule your task with std::task::deschedule()
[05:24:19] <tikue_> dbaupp: what about "cannot move foo"
[05:24:23] <dbaupp> tikue_: it's 4 cases: `{use,capture} of {,partially }moved value`
[05:24:34] <nejucomo> strcat: Thanks for those pastes.  Is the second llvm IR? 
[05:24:38] <wil> dbaupp: Ah, ok. So if I do that after the 'do..' returns, subsequent calls should properly schedule?
[05:24:38] <strcat> nejucomo: yeah
[05:24:43] <dbaupp> tikue_: so probably not that one
[05:24:54] <strcat> nejucomo: post-optimization just to clean it up, but the order/functionality is the same pre-optimization too
[05:25:10] <dbaupp> wil: well, no, each time you call deschedule you're letting that task yield to the scheduler so it can decide to run other tasks
[05:25:12] <jason_> with how terse rust is with everything else, the choice of 'deschedule' over 'yield' baffles
[05:25:20] <cmr> jason_: it used to be yield
[05:25:29] <cmr> jason_: now yield is a keyword, for generators/coroutines
[05:25:30] <tikue_> jason_: yield is reserved for a higher purpose now
[05:25:38] <dbaupp> rusti: let yield = 1;
[05:25:39] -rusti- <anon>:7:13: 7:18 error: `yield` is a reserved keyword
[05:25:39] -rusti- <anon>:7          let yield = 1;
[05:25:39] -rusti-                       ^~~~~
[05:25:39] -rusti- application terminated with error code 101
[05:25:57] <strcat> jason_: it used to be called yield
[05:26:10] <cmr> strcat: so late to that party :P
[05:26:11] <tikue_> `let yield = 1; // <rustc>:no u`
[05:26:12] <nejucomo> SiegeLord, strcat: +1 on "That is, Option<T> is at least as large as T."
[05:26:36] <wil> dbaupp: Hmm, ok. I'll play around with descheduling at the end of each task (before the do returns) and see what that gets me. Thanks!
[05:26:38] *** Quits: SiegeLord (sl@moz-3D449DF.bstnma.fios.verizon.net) (Quit: Leaving)
[05:27:10] <dbaupp> wil: you probably need to deschedule at the start to make the spawn_supervised return immediately
[05:27:25] <dbaupp> i.e. do spawn { deschedule(); ... }
[05:27:59] <strcat> keeping in mind that it's just a point it *may* yield and may just continue on
[05:28:03] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:28:07] <dbaupp> wil: and if you have a tight loop that you want to be able to interrupt (i.e. let the scheduler run another task for a bit) then you can make it call deschedule in there
[05:28:12] <strcat> if you're using it to enforce semantics, it's wrong
[05:28:19] <dbaupp> (and what strcat says, it's not a guarantee)
[05:28:37] <wil> Ok.
[05:28:42] <strcat> and you have no idea how it's choosing to divide the work over the thread pool really
[05:29:02] <strcat> it could run every task on a thread, it could run all the tasks on 1 thread - you need to specify if you need to know
[05:29:05] <dbaupp> if you need the guarantee you'll need to use a port/chan to make the inner one wait until the outer one tells it to start
[05:29:16] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[05:29:36] <jason_> shouldn't spawn add the task to a queue of tasks to be scheduled instead of running it immediatly?
[05:30:08] <wil> Hrmm, interesting. All I'm really going for is an immediate return (this is for implementing background tasks), so I don't think I'll have to use a chan to tell it to wait
[05:30:18] <jason_> that is the least surprising considering just about everything else works that way
[05:30:21] *** Joins: SiegeLord (sl@moz-3D449DF.bstnma.fios.verizon.net)
[05:30:49] <dbaupp> jason_: maybe it does, and sometime it gets scheduled immediately
[05:31:25] <strcat> jason_: there aren't guarantees, it could queue it, context switch immediately from the current task or spawn it in a different worker thread
[05:31:28] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[05:31:40] *** Quits: LowPotential (user@moz-B721E318.pitbpa.fios.verizon.net) (Quit: ERC Version 5.3 (IRC client for Emacs))
[05:31:44] <wil> dbaupp: Even if it does get scheduled immediately, wouldn't that still be executing separately from the spawn, which should have returned?
[05:31:55] <wil> (just out of a desire to learn how this works)
[05:31:57] <jason_> ok then maybe i'm saying spawn shouldn't be a point where a task can context switch
[05:32:38] <nejucomo> Geez, I haven't even *gotten* to the concurrency tutorial yet.  ;-)
[05:32:48] <dbaupp> wil: I'm no expert, but the parent task may be descheduled in favour of the the child
[05:33:00] <dbaupp> i.e. the current worker thread stops running the parent and runs the child instead
[05:33:07] <wil> Ah, ok
[05:33:27] *** Joins: silotis (quassel@moz-4B8C4631.oc.oc.cox.net)
[05:33:38] <wil> Interesting. I would have thought the child would have lower/equal priority to the parent by default, and so would run after it.
[05:33:49] <wil> I suppose I should just read the scheduler source...
[05:33:53] <tikue_> nejucomo: you don't need a tutorial :P
[05:34:03] *** Joins: jdsanders (Adium@moz-F45527D6.hlrn.qwest.net)
[05:34:07] <cmr> wil: I wouldn't depend on the current implementation of the scheduler
[05:34:26] <wil> cmr: Too much in flux?
[05:34:56] <dbaupp> yes
[05:35:00] <cmr> wil: Too much unspecified behavior!
[05:35:06] <wil> Ah, haha
[05:35:11] <tikue_> rusti: let (port, chan) = stream(); do spawn { println!("Hi! I'm in a task! My parent task gave me a {}!", port.recv()); } chan.send(1i); // nejucomo 
[05:35:13] -rusti- Hi! I'm in a task! My parent task gave me a 1!()
[05:35:42] <nejucomo> tikue: Ok, thanks.  Done.  I hope that the concurrency tutorial page just has that snippet and nothing else.  ;-)
[05:36:03] <jason_> having spawn be a point of context switch doesn't make sense to me because i think of context switching only when you're waiting on something. spawn isn't waiting on anything
[05:36:10] <tikue_> nejucomo: lol i'm not saying it's all you need to know…but it's all you need to know ;D
[05:36:30] <tikue_> jason_: there's also a context switch when you send something over a channel
[05:36:47] <dbaupp> (a possible context switch)
[05:37:10] <jason_> that makes sense though, sending is io
[05:37:21] <tikue_> jason_: it doesn't block though
[05:37:26] <tikue_> it's not waiting on anything
[05:37:30] <dbaupp> wil: btw, if you are looking for the scheduler it's in src/std/rt, not the old dir of src/rt.
[05:37:31] <wil> Why would there be a switch when there's a send? I'd expect one for a receive, but not send.
[05:37:43] <wil> dbaupp: Great, thanks!
[05:37:44] <tikue_> wil: any io yields i believe
[05:37:54] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:38:00] <wil> tikue_: Ah, ok
[05:38:19] <cmr> I'm done all my homework :|
[05:38:22] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[05:38:26] <tikue_> cmr: jealous
[05:38:29] <cmr> I have no way to constructively procrastinate writing this code
[05:38:58] <jason_> it might have to wait. tasks might be scheduled on different threads in which case you could need a mutex to protect the channel's underlying queue
[05:39:13] <wil> jason_: Truel
[05:39:14] <tikue_> wil: i think the reason is that tasks aren't coerced into yielding so they need semi-arbitrary queues that they should yield. (i could be wrong about this though, i know next to nothing about the runtime stuff)
[05:39:16] <wil> *True.
[05:39:39] <tikue_> by queue i mean like stage queue not the data structure
[05:39:47] * nejucomo reads http://lwn.net/Articles/547145/
[05:39:50] *** Quits: jdsanders (Adium@moz-F45527D6.hlrn.qwest.net) (Quit: Leaving.)
[05:39:51] <jason_> even if you implement the channels queue as a lock-free queue, it can't be wait-free because you have to wake up a sleeping task on the other end
[05:39:56] *** Quits: bytbox (s@moz-DC83764A.washdc.fios.verizon.net) (Quit: Lost terminal)
[05:40:08] <tikue_> jason_: channels don't have an underlying queue though do they?
[05:40:14] <wil> tikue_: Ah, alright. Yeah, I'm learning about the underpinnings of concurrency as I'm learning rust, so I know even less about them...
[05:40:33] <dbaupp> cmr: what on earth could be so bad about some piece of code?
[05:40:43] <tikue_> wil: there are some good talks about rust's runtime out there…let me find one
[05:40:56] <tikue_> wil: https://air.mozilla.org/2013-intern-todd/
[05:40:58] <dbaupp> tikue_: they do? how else are messages buffered?
[05:41:04] <jason_> tikue_: i haven't looked at the code, but message passing via channels is usually implemented with queues
[05:41:07] <wil> tikue_: Cool, thanks
[05:41:14] <tikue_> dbaupp: by the port's queue presumably? i dunno :\
[05:41:26] <cmr> dbaupp: url.spec.whatwg.org + rfc3492 + rfc3490
[05:41:37] <dbaupp> cmr: hah, sounds fun :P
[05:41:37] <jason_> anyway, my initial point still stands. spawn isn't "waiting" on anything so why context switch inside it?
[05:41:48] <dbaupp> tikue_: oh, I see. a matter of names :P
[05:41:58] <tikue_> dbaupp: sorry :P i usually hate semantic debates lol
[05:42:18] * dbaupp wonders why he's constantly rebuilding LLVM :S
[05:43:29] <tikue_> has there been any more talk of closure reform lately?
[05:43:51] <nejucomo> "Thus, while it is impossible to get a runtime error for a NULL pointer dereference, it is quite possible to get a runtime error for an array bounds error. It is not clear whether this is a deliberate omission, or whether it is something that might be changed later."  The author hints at dependent types?
[05:44:59] <wil> So, are any of you Mozilla employees, or is Rust active development purely from the community?
[05:45:01] <tikue_> dbaupp: in librustc/middle/liveness.rs there is `MovedValue => "moved value"`
[05:45:04] <tikue_> what's the deal with that
[05:45:27] <cmr> wil: https://github.com/mozilla/rust/graphs/contributors
[05:45:28] <dbaupp> wil: no-one who has talked in the last half hour or so is mozilla
[05:45:37] <tikue_> dbaupp: literally just typed that same sentence
[05:45:57] <nejucomo> This channel is pretty hoppin' for a saturday night.  ;-)
[05:45:58] <dbaupp> tikue_: down to the "or so" ? :P
[05:46:08] <tikue_> dbaupp: i think i typed "last hour or so"
[05:46:16] <dbaupp> tikue_: no idea, I look
[05:46:19] *** Quits: Niessy (Mibbit@80CC1C4F.809247E8.F7D14508.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[05:46:25] <tikue_> nejucomo: <---- procrastinating hw
[05:46:28] <ldunn> nejucomo: or a sunday afternoon :D
[05:46:36] <ldunn> god, I'm doing the same thing as tikue_ :(
[05:46:37] <cmr> wil: of the top ten contributors in the past year, only 6 are mozilla employees, and acrichto was hired two weeks ago
[05:46:52] <ldunn> On the other hand, I can load an ELF file as my userland now, so that's fun
[05:46:58] <tikue_> lol
[05:46:58] <dbaupp> tikue_: woah, weird, that looks like an exact duplciate of the borrowck errors
[05:47:15] <tikue_> dbaupp: yeah i don't know where it's used
[05:47:15] <cmr> ldunn: Oi! You're actually, like, making progress with your OS project!
[05:47:28] <ldunn> cmr: sometimes!
[05:47:43] <dbaupp> tikue_: once, on line 1439
[05:47:44] <cmr> ldunn: I still haven't touched mine :( Too much other stuff to do.
[05:47:52] <ldunn> cmr: :< aw
[05:48:06] <dbaupp> nejucomo: it's sunday afternoon for me :P
[05:48:43] * strcat is starting to hate deltas
[05:49:11] * nejucomo envisions a globe and attempts to imagine where the terminator lies.
[05:49:13] <tikue_> dbaupp: "cannot move `foo` into closure because it is borrowed" still exists after this change
[05:49:20] <strcat> it takes longer to generate the new pkg from it than downloading the full thing several times
[05:49:59] <cmr> strcat: yeah, I also experience that, but I have a gigabit connection to a mirror now :P
[05:50:11] *** Joins: GeneralMaximus (ankur@4116177C.2F59B96B.D5D59AD9.IP)
[05:50:15] <dbaupp> tikue_: does that need to change?
[05:50:25] <tikue_> i think it should
[05:50:43] <tikue_> "cannot move contents of `foo` into closure because it is borrowed"
[05:51:03] * dbaupp just knows how to grep, not actual things about the compiler :P
[05:51:13] <dbaupp> but yeah, that sounds reasonable
[05:51:20] *** Quits: SteveMcQwark (SteveMcQwa@moz-7CFCF343.cpe.net.cable.rogers.com) (Quit: SteveMcQwark)
[05:52:28] <tikue_> and then there's "capture of moved value: `foo`". 
[05:52:36] * tikue_ doesn't have the patience
[05:52:39] <tikue_> all yours dbaupp 
[05:54:06] <tikue_> and "moved by default" would need to change too or be incongruous
[05:54:24] <tikue_> "Contents of `foo` moved here because it has type `NonCopyable`, which is moved by default."
[05:54:28] <tikue_> doesn't make sense
[05:54:51] <tikue_> "Contents of `foo` moved here because it has type `NonCopyable`, which moves contents by default." ??
[05:54:55] <dbaupp> "moved by default" does make sense either
[05:55:04] <tikue_> yeah
[05:56:46] <cmr> While you're at it, mind making the rest of the compiler's errors make sense too?
[05:56:48] <cmr> kthx :D
[05:57:25] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[05:57:33] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[05:57:38] <tikue_> lol
[05:57:47] <tikue_> acceptor.incoming() bothers me
[05:57:58] <tikue_> because it ends up being way more verbose than loop { match acceptor.accept()
[05:58:01] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[05:58:08] <tikue_> so what's the point
[05:59:39] *** Joins: SteveMcQwark (SteveMcQwa@moz-7CFCF343.cpe.net.cable.rogers.com)
[05:59:39] <Eridius> oh crud, vec::SplitIterator doesn't implement DoubleEndedIterator?
[05:59:50] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Ping timeout)
[06:00:13] <Eridius> only reason I can think of is if the predicate has a side-effect :/
[06:00:30] <Eridius> I guess I need to add reverse iterators
[06:00:31] <engla> It's because split and splitn are implemented together
[06:00:34] <tikue_> sfackler: just read your backlog, i suppose that makes sense. thanks :)
[06:00:39] <dbaupp> Eridius: it's probably not been update to act like str.split
[06:00:42] <dbaupp> *updated
[06:00:44] <engla> splitn is not double-ended (in an efficient way)
[06:00:50] <Eridius> :/
[06:01:12] * dbaupp votes Eridius updates it, because rabbit holes are fun
[06:01:26] <Eridius> dbaupp: I can't afford to go updating other parts of libstd at the moment. Not until path is done
[06:01:37] <Eridius> if I could, I'd have added an ImmutableEqVector.starts_with()/ends_with() already
[06:01:42] <dbaupp> haha :P
[06:02:01] <dbaupp> but yeah, I'm looking forward to correct path support :)
[06:02:11] <Eridius> if I can get rustpkg to behave
[06:02:19] <Eridius> I found the one thing I screwed up in rustpkg. Now lets see if implementing it fixes things
[06:02:28] * Eridius conflated is_parent_of() with is_ancestor_of(). They do different things
[06:02:41] <Eridius> but now I need to implement the former, which I'm giving the more sensible name of .ends_with_path()
[06:02:50] *** Joins: drrb (drrb@4D561226.896EE5A.377B9828.IP)
[06:03:01] * dbaupp isn't sure that's a more sensible name
[06:03:07] <Eridius> but that's what it does
[06:03:13] <dbaupp> `is_direct_parent_of`?
[06:03:19] <Eridius> but that's not what it does
[06:03:30] <Eridius> it requires the argument be a relative path and checks if the relative path is identical to the suffix of the receiver
[06:03:30] <dbaupp> oh, ok
[06:03:37] <Eridius> i.e. "a/b/c".ends_with_path("b/c") == true
[06:03:51] <Eridius> hence why I'm renaming it
[06:04:01] <dbaupp> ah, yep, I agree
[06:04:18] <drrb> Hello
[06:04:20] *** Quits: maik (maik@moz-5DA9E925.dip0.t-ipconnect.de) (Ping timeout)
[06:05:14] <dbaupp> hi
[06:05:17] <cmr> Whoaaaaaaah that can't be right.
[06:05:29] <cmr> Only 24 PRs this week!?
[06:05:39] <dbaupp> 0.8
[06:05:41] <dbaupp> ?
[06:06:09] <dbaupp> cmr: count these: http://huonw.github.io/isrustfastyet/buildbot/ ?
[06:06:21] <cmr> Oops, my branch wasn't up to date
[06:06:25] <dbaupp> cmr: (or, ask me to run an SQL query? :P )
[06:06:47] <tikue_> how do you use 'static?
[06:06:49] <cmr> 79, that's more like it.
[06:06:51] <tikue_> is there a tutorial on it
[06:06:57] <cmr> tikue_: no, and it's dead simple:
[06:07:06] <cmr> it's the lifetime that's always valid
[06:07:15] <tikue_> what does that mean
[06:07:18] <tikue_> :P
[06:07:22] <cmr> So basically that gives you string literals and statics
[06:07:45] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[06:07:49] <tikue_> cmr: i've got this error: error: value may contain borrowed pointers; add `'static` bound
[06:07:54] <cmr> Oh the bound
[06:07:57] <cmr> Heh
[06:07:59] *** Quits: SteveMcQwark (SteveMcQwa@moz-7CFCF343.cpe.net.cable.rogers.com) (Input/output error)
[06:07:59] <tikue_> on this line: `let client = @mut client;`
[06:09:26] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Quit: )
[06:09:27] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[06:10:19] <drrb> I'm wanting to move a reference to a variable outside a closure. I've seen a couple of allusions to using Cell to do it (e.g. http://osdir.com/ml/rust-mozilla-developemnt/2013-04/msg00236.html), but my efforts have ended with "cannot capture variable of type `std::cell::Cell<TypeThatIWantToCopy>`, which does not fulfill `Send`, in a bounded closure"
[06:10:31] <drrb> I'm doing something like:
[06:10:38] <tikue_> cmr: i got it to work by putting it in the type parameter <S: Stream + 'static>
[06:11:07] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[06:11:16] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[06:11:36] <tikue_> drrb: i believe you cannot ever move borrowed pointers into a heap closure
[06:12:35] <drrb> let analysis = Cell::new_empty();
[06:12:36] <drrb> do rt::run {
[06:12:37] <drrb>         let analysis_ = compile(file_name);
[06:12:38] <drrb>         analysis.put_back(analysis_);
[06:12:39] <drrb> };    
[06:13:29] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[06:13:53] <tikue_> drrb: is analysis of type &T?
[06:14:28] <drrb> tikue_: analysis of type T
[06:14:48] <drrb> analysis is *
[06:14:54] <tikue_> drrb: does it contain any &T 
[06:15:41] <drrb> No, but it has an @ field 
[06:15:56] <tikue_> that's the problem then
[06:16:07] <tikue_> @ aren't `Send`
[06:16:42] <tikue_> drrb: usually @ isn't necessary though. is there any particular reason you need it in this case?
[06:17:00] <drrb> Ok, so I can do the Cell thing as long as the thing i'm moving a struct that only has owned pointers for fields?
[06:17:23] *** Quits: doomlord_ (servitor@moz-2BA2D1DA.range86-184.btcentralplus.com) (Ping timeout)
[06:17:36] <drrb> Yeah, that analysis struct is being returned from a library
[06:17:50] *** Joins: bytbox (s@moz-DC83764A.washdc.fios.verizon.net)
[06:17:56] <engla> just owned/Send values in general drrb 
[06:18:17] <tikue_> drrb: everything fulfills Send except @, @mut, &, and &mut -- i think
[06:18:29] <tikue_> or anything containing those
[06:19:01] <tikue_> drrb: do you need a pointer though? usually by-value works unless you have a specific need for recursive data structures
[06:19:06] <tikue_> or some other side cases 
[06:19:10] <tikue_> s/side/edge
[06:19:16] <cmr> tikue_: the 'static bound means something like "contains no borrowed pointers that aren't 'static"
[06:19:31] <cmr> used to be called something else I think
[06:19:33] <cmr> Durable, maybe?
[06:19:35] * cmr shrugs
[06:19:54] <tikue_> cmr: ah ok. just guarantees it won't get destroyed presumably
[06:20:02] <tikue_> because @ wants to control that
[06:20:31] *** Quits: nixprime (Mibbit@moz-B5BC087D.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[06:20:48] <drrb> tikue_: Ok, so Send means "Something sendable because I can either copy it or i own the only reference to it"?
[06:21:36] <tikue_> drrb: things that arent Send can still be copied, and everything that is Send are copyable by necessity
[06:21:54] <tikue_> drrb: but yeah i think "i own this" is the important part
[06:22:13] *** Quits: Lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net) (Ping timeout)
[06:22:27] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[06:22:43] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[06:23:35] *** Quits: KindOne (KindOne@moz-EB454250.dynamic.ip.windstream.net) (Ping timeout)
[06:24:09] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[06:24:37] <drrb> tikue_: Ok, that makes sense, thanks! To answer your question about needing pointers, I'm not sure yet. Still trying to get my head around it!
[06:25:40] <tikue_> drrb: cool :) in general, i think rust has gotten a slightly misleading reputation as "why can't i hold all these pointers?!" but really they serve very focused purposes, and in much/most of the code you'll write you won't need them. and when you _do_ need them, you'll know exactly why
[06:26:04] <Amaranth> I thought Send invalidated your handle to the data
[06:26:16] <cmr> Amaranth: no, that's moving in general
[06:26:25] <tikue_> Amaranth: Send is a kind, it just exists, it doesn't do anything by itself
[06:26:27] <dbaupp> why is http://osdir.com/ml/rust-mozilla-developemnt/ misspelled :(
[06:26:34] <Amaranth> Right but you guys are talking about making copies
[06:26:37] <tikue_> dbaupp: lol :|
[06:26:42] <Amaranth> Whenever someone says copy I get worried
[06:26:46] <tikue_> Amaranth: it copies and invalidates
[06:26:55] <Amaranth> If it actually copies that's sad
[06:27:05] <tikue_> Amaranth: it does and it's not sad :\
[06:27:13] <cmr> it's a shallow memcpy
[06:27:23] *** Joins: KindOne (KindOne@moz-EB454250.dynamic.ip.windstream.net)
[06:27:24] <dbaupp> Amaranth: it's a shallow memcpy style copy
[06:27:28] <Amaranth> So you're saying you're copying my pointer
[06:27:36] <dbaupp> i.e. copying ~T is a single word
[06:27:39] <tikue_> Amaranth: if the pointer is being copied
[06:27:51] <Amaranth> Using the term copy there is _really_ confusing
[06:27:58] <cmr> But that's exactly what it's doing.
[06:28:05] *** Joins: heather (Heather@C1D39E87.BD70D8E3.256079E2.IP)
[06:28:08] <tikue_> Amaranth: T.clone() copies T. if T is ~T then it copies the pointer. if T is struct Foo { … } it copies the struct Foo
[06:28:13] <heather> please Hello
[06:28:21] <tikue_> heather: hi :)
[06:28:29] *** Quits: CurlyBrace (Mibbit@7102442F.615B56E6.43362C16.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:28:33] <tikue_> Amaranth: check out this goofy example strcat  showed earlier:
[06:28:35] <cmr> tikue_: not true about ~T
[06:28:42] <tikue_> cmr: o rly?
[06:28:43] <Amaranth> In C++ if I told you I was copying *Foo you'd think it was allocating space for a new Foo, copying over the contents, and giving you the new object
[06:28:57] <Amaranth> Or rather a pointer to the new object
[06:28:58] <tikue_> cmr: it copies the underlying data as well? damn i thought i had it straight
[06:29:02] <strcat> Amaranth: so what's wrong with the tutorial saying rust passes/assigns/returns by-shallow-copy?
[06:29:25] <strcat> rust doesn't *have* move/copy constructors, it always does a shallow copy just like C
[06:29:33] <tikue_> rusti: let mut a = ~1; let b = a; a = ~2; (a, b) // Amaranth 
[06:29:34] -rusti- (~2, ~1)
[06:29:37] <cmr> tikue_: see the impl of Clone for ~T
[06:29:39] <dbaupp> tikue_: Clone is unrelated to moves/"implicit" copies
[06:29:42] <engla> tikue_: yes of course, otherwise it wouldn't be an owned pointer anymore with two pointers to the thing after clone
[06:29:45] <cmr> (it's just ~(**self).clone()
[06:29:46] <cmr> )
[06:30:08] <heather> Maybe someone could what could cause " llvm-build: error: invalid native target: 'x86_64' (not in project)  " during rust build
[06:30:09] <tikue_> dbaupp: argh right, i didn't really mean clone, i just forgot it's not the same thing
[06:30:15] <Amaranth> Now I think I don't understand something very fundamental about this programming langauge
[06:30:22] *** Joins: aeqwa (aeqwa@moz-133DA764.dsl.tropolys.de)
[06:30:30] <Amaranth> Like I don't trust myself to write a function if I don't know this
[06:30:32] *** Joins: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com)
[06:30:33] <strcat> it has the same value semantics as C
[06:30:42] <strcat> it does everything by-shallow-copy
[06:30:54] <Amaranth> If you did that example in C you wouldn't get two numbers
[06:31:07] <strcat> Amaranth: sure you would?
[06:31:15] <tikue_> cmr: yeh that makes perfect sense, i honestly just wasn't thinking about it when i wrote T.clone() >_>
[06:31:19] <strcat> Amaranth: let x = ~5
[06:31:21] <strcat> is
[06:31:25] <dbaupp> Amaranth: ~ is a new allocation
[06:31:54] <strcat> size_t x = malloc(sizeof(size_t)); if (!x) abort(); *x = 5;
[06:32:00] <strcat> and a free(x) at the end of the scope
[06:32:06] <strcat> er
[06:32:08] <strcat> size_t *x
[06:32:11] <strcat> and let y = x
[06:32:13] <strcat> is
[06:32:17] <strcat> size_t *y = x;
[06:32:23] <tikue_> Amaranth: essentially, it's not moving the variable `a`, it's moving the ownership of the contents of the variable `a` and won't let you use `a` again until you give it something new to own
[06:32:25] <Amaranth> int *a = (int*) malloc(sizeof(int)); *a = 1; int *b = a; *a = 2; printf("%d %d", *a, *a); free(a);
[06:32:42] <strcat> Amaranth: no
[06:32:42] <cmr> Amaranth: what you're missing is there's not a dereference in that rus.
[06:32:45] <Amaranth> How do I make Rust do that?
[06:33:00] <Amaranth> Because I want Rust to do that when I decide that is a good idea
[06:33:15] <cmr> Well you need @mut or unsafe code.
[06:33:22] <strcat> or make b a reference
[06:33:30] <strcat> and you can assign to a again when it goes out of scope
[06:33:42] <Amaranth> Alright, bad example
[06:33:59] <Amaranth> Although sure, reference would solve that I suppose
[06:34:33] <Amaranth> I guess the main thing is you're either doing copies of structs and such all over the place which makes me sad or you're relying on copy elision which is fragile
[06:34:52] <tikue_> rusti: let mut a = ~1; { let b = &mut a; **b = 2; } a
[06:34:52] -rusti- ~2
[06:35:11] <Amaranth> Right so let's see
[06:35:42] <strcat> Amaranth: when you see '=' or a parameter passed, or a return, it does the same thing it would do for that type in C
[06:35:50] <strcat> in terms of how deep it copies
[06:36:29] <Amaranth> strcat: So I don't have the ability to explicitly move ownership to a new variable without a copy, right?
[06:37:16] <tikue_> Amaranth: correct
[06:37:56] *** Quits: Voomer (Voomer@moz-CC05FF5E.hsd1.wa.comcast.net) (Ping timeout)
[06:38:08] <Amaranth> So if I have fn foo(thing: ~SomeLargeStruct); the ~SomeLargeStruct I pass to it is going to be copied and there is no way to prevent this?
[06:38:20] <strcat> Amaranth: *shallow copy*
[06:38:24] <cmr> Amaranth: the size of ~SomeLargeStruct is the size of a pointer
[06:38:26] <cmr> Because it's a pointer.
[06:38:32] <Amaranth> You just said that isn't how it works
[06:38:38] <strcat> Amaranth: no, I didn't say that
[06:38:46] <strcat> I said rust always passes, assigns, and returns like C
[06:38:48] <strcat> via shallow copy
[06:38:50] <strcat> it has no copy constructors
[06:38:55] <Amaranth> let mut a = ~1; let b = a; a = ~2; (a, b)
[06:38:57] <strcat> there is never an implicit heap allocation
[06:39:07] <strcat> Amaranth: let b = a; does a shallow copy of a to b
[06:39:12] *** Joins: reillyeon (reillyeon@moz-D5807178.hsd1.ca.comcast.net)
[06:39:21] <Amaranth> Wait, that wasn't the spot I was looking for
[06:39:22] <strcat> a can no longer be used, until it's reinitialized, because it had ownership stolen from it
[06:39:32] <heather> What could cause " llvm-build: error: invalid native target: 'x86_64' (not in project)  " during rust build
[06:39:46] <cmr> heather: How are you running configure and make, what OS and platform are you on?
[06:39:48] <strcat> Amaranth: if you have foo(thing: ~SomeLargeStruct)
[06:39:55] *** Quits: wil (wil@moz-BEF339ED.bootp.virginia.edu) (Quit: sleep)
[06:40:00] <strcat> passing to it is equivalent to passing to foo(SomeLargeStruct *thing) in C
[06:40:21] <tikue_> strcat: how large is large enough to warrant using ~ anyway?
[06:40:21] <strcat> it's never not a shallow copy, there is no way to override it
[06:40:28] <heather> cmr: gentoo amd 64
[06:40:31] <strcat> tikue_: read http://static.rust-lang.org/doc/master/tutorial.html#boxes
[06:40:34] <tikue_> i did
[06:40:37] <tikue_> it was ambiguous :)
[06:40:39] <Amaranth> I think my main problem here is again the fact that you're using the word copy
[06:40:46] <strcat> Amaranth: shallow copy
[06:40:53] <Amaranth> I don't call that a copy
[06:40:56] <strcat> so what is it?
[06:41:02] <Amaranth> int a = 5; int b = a; is not a copy to me
[06:41:06] <Amaranth> That's just assignment
[06:41:12] <cmr> But that's what it is, at the hardware and semantic level.
[06:41:12] <strcat> so is memcpy not a copy?
[06:41:19] <heather> cmr: ./configute --prefix="${EPREFIX}"/usr $(use_enable clang) --local-rust-root="${EPREFIX}"/usr
[06:41:27] <tikue_> Amaranth: that copies the 5
[06:41:35] <Amaranth> Right I can see why you'd use the term
[06:41:42] <Amaranth> But that is not what copy means to me
[06:41:53] <strcat> Amaranth: well then rust doesn't support copying, as a language feature
[06:41:59] <strcat> if you don't define copy that way
[06:42:01] <Amaranth> Copy means expensive because you're doing more work than passing a pointer :P
[06:42:07] <tikue_> rusti: struct Foo { a: int, b: int } let a = Foo { a: 1, b: 2 }; let b = a; (a, b)
[06:42:08] -rusti- (main::Foo{a: 1, b: 2}, main::Foo{a: 1, b: 2})
[06:42:13] <tikue_> Amaranth: is that copy ^?
[06:43:02] <Amaranth> I understand what you're trying to do
[06:43:07] <cmr> At least for cases where ownership is transfered, I'm pretty sure rustc could omit the copy/"assignment"
[06:43:16] <dbaupp> rusti: let a = [0u64, .. 1000]; let b = a; (a, b) // 8 KB
[06:43:16] -rusti- line longer than 10000 characters, bailing out
[06:43:23] <tikue_> lol
[06:43:33] <strcat> cmr: then you don't need to do it
[06:43:37] <dbaupp> rusti: let a = [0u64, .. 100]; let b = a; (a, b) // 0.8 KB
[06:43:38] -rusti- pastebinned 1 lines of output: http://sprunge.us/FAbF
[06:43:53] <dbaupp> cmr: LLVM will presumably get rid of them
[06:43:57] <strcat> cmr: a move of ownership occurs *when you do a shallow copy of types with destructors*
[06:44:02] <strcat> you don't want a move of ownership
[06:44:06] <strcat> or you wouldn't do anything
[06:44:10] <dbaupp> strcat: freezing/thawing?
[06:44:16] <strcat> dbaupp: no longer useful
[06:44:31] <dbaupp> strcat: in what way?
[06:44:33] <strcat> unless you mean 'in some cases rustc lacks syntax for declaring things mutable and we use hacks to work around it'
[06:44:41] <strcat> dbaupp: because you no longer ever need to manually freeze something
[06:44:45] <strcat> borrowck isn't retarded anymore ;p
[06:44:55] <strcat> I remember when you had to do it
[06:45:15] <dbaupp> what about manually thawing things?
[06:45:17] <strcat> you had to put a container in an immutable variable to get an iterator over it
[06:45:28] <dbaupp> (that is needed until `mut a` is a valid pattern, at least)
[06:45:29] <strcat> dbaupp: when do you do that?
[06:45:35] <strcat> dbaupp: yeah, a workaround for a language issue
[06:45:41] <dbaupp> strcat: yes
[06:46:19] <dbaupp> and you might want to use freezing/thawing to construct an object and then freeze it to avoid accidentally modifying it later
[06:46:20] <tikue_> strcat: what counts as a destructor?
[06:46:23] <tikue_> rusti: struct Foo; impl Drop for Foo { fn drop(&mut self) { } } let a = Foo; let b = Foo; (a, b)
[06:46:24] -rusti- (main::Foo, main::Foo)
[06:46:36] <dbaupp> tikue_: any impl of Drop is a dtor
[06:46:41] <strcat> a destructor counts as a destructor? ;p
[06:46:46] <tikue_> dbaupp: so why does that work ^
[06:46:47] <tikue_> i'm confused :(
[06:46:51] <strcat> tikue_: you are making two
[06:46:54] <cmr> tikue_: because you have tweo separate Foo's there
[06:47:04] <tikue_> i know but i thought a move of ownership would occur
[06:47:10] <strcat> tikue_: you are making a second one
[06:47:14] <cmr> From where?
[06:47:18] <cmr> You're constructing twice.
[06:47:22] <tikue_> oh damn
[06:47:25] <tikue_> i wrote the wrong thing
[06:47:35] <cmr> rusti: struct Foo; impl Drop for Foo { fn drop(&mut self) { } } let a = Foo; let b = a; (a, b)
[06:47:36] -rusti- pastebinned 8 lines of output: http://sprunge.us/JZbd
[06:48:01] <strcat> &fn/&mut/destructor anywhere in the ownership tree -> it moves ownership on assignment/passing/returning
[06:48:08] <strcat> it still works the same way (via shallow copy)
[06:48:37] <strcat> at a language level that's truly the only thing that exists.
[06:48:46] <strcat> borrowed pointers are passed *by-value*, with the usual shallow copy
[06:48:56] *** Joins: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP)
[06:49:20] <dbaupp> at a language level shallow copy is the only thing that exists?? isn't the move checker part of the language semantics?
[06:49:29] <tikue_> strcat: constructing a &T does a shallow copy yeah?
[06:49:32] <strcat> dbaupp: move == shallow copy
[06:49:40] <strcat> dbaupp: you can no longer use the source, because ownership was moved
[06:49:41] <dbaupp> strcat: right, but the move semantics are part of the language
[06:49:43] <strcat> but it is *clearly* a shallow copy
[06:49:44] <cmr> tikue_: kinda? it's address-of
[06:49:47] <strcat> dbaupp: yes, but a move *is* a shallow copy
[06:49:55] <strcat> you can take an address of both variables
[06:49:59] <strcat> you can take the size of both variables
[06:50:03] <strcat> you can clearly see that a copy occured
[06:50:07] <dbaupp> strcat: the implementation of a move is a shallow copy, yes
[06:50:09] *** Joins: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP)
[06:50:17] <strcat> dbaupp: it's not just the implementation
[06:50:31] <strcat> when you want a shallow copy, and the type happens to have a destructor, you move ownership from the source
[06:50:43] <strcat> a move of ownership isn't want you *want*, it would be more useful if it didn't happen - it's for safety
[06:51:09] <strcat> and you can reinitialize the location you moved from
[06:51:17] <tikue_> cmr: so it doesn't copy?
[06:51:32] *** Quits: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Client exited)
[06:51:36] <heather> cmr: so any ideas about error?
[06:51:49] <strcat> rusti: let mut x = ~5; let y = x; x = ~6; (x, y)
[06:51:50] -rusti- (~6, ~5)
[06:51:57] <strcat> I think that shows pretty clearly that it's not magical
[06:52:02] <Eridius> dbaupp: woo! Fixing that one error (s/is_ancestor_of/ends_with_path/) fixed the librustpkg tests! now to run a full make check
[06:52:08] <strcat> it's *only* a copy, with a restriction that you can't use the source anymore
[06:52:14] <cmr> heather: nope, no idea how to even trigger such an error. the ebuild must be doing weird things.
[06:52:21] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[06:52:37] *** Joins: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[06:52:45] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[06:52:49] <dbaupp> strcat: the problem with calling it a copy is it gets people confused
[06:52:57] <strcat> dbaupp: I'm not calling it a copy
[06:53:05] <dbaupp> strcat: "it's only a copy"
[06:53:07] <strcat> I am calling it a shallow copy that *moves ownership*
[06:53:09] <strcat> dbaupp: it is
[06:53:16] *** Quits: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP) (Quit: z0w0)
[06:53:16] <dbaupp> it's only a *shallow* copy
[06:53:31] <strcat> dbaupp: yes, the only form of assignment/passing/returning in rust
[06:53:37] <tikue_> imo moving ownership means it's not just a shallow copy…it's a bit more than that
[06:53:49] <cmr> but it's not more than that.
[06:53:50] <strcat> tikue_: it is just a shallow copy, the source is marked unusable for safety
[06:53:50] * dbaupp will try to religiously use "shallow copy" when describing this, rather than just "copy"
[06:54:02] <cmr> move checking is a static assertion, just like borrow checking.
[06:54:16] <cmr> is &foo more than just taking the address of a variable?
[06:54:18] <tikue_> strcat: it's just <shallow copy + marked unusable>
[06:54:22] <tikue_> not just <shallow copy>
[06:54:46] <strcat> tikue_: sure, just like &5 isn't just address-of
[06:54:54] <tikue_> strcat: i actually don't know what &5 does
[06:54:57] <dbaupp> tikue_: the "marked unusable" doesn't happen at runtime
[06:54:58] *** Quits: reillyeon (reillyeon@moz-D5807178.hsd1.ca.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[06:55:27] <Amaranth> Semantically it is a move because the compiler enforces that but at runtime it's just a shallow copy
[06:55:36] <tikue_> dbaupp: fair enough, but shouldn't we be describing what the compiler is doing, since what happens at runtime isn't "rust"
[06:55:36] <Amaranth> I want to say assignment there but someone will correct me :P
[06:55:46] <strcat> Amaranth: saying assignment is fine
[06:55:55] <cmr> tikue_: what happens at runtime is a *huuuge* part of Rust's appeal!
[06:55:56] *** Quits: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP) (Ping timeout)
[06:56:01] <tikue_> cmr: haha i knowwww
[06:56:03] <tikue_> but!
[06:56:05] <dbaupp> tikue_: &5 puts 5 on the stack and takes the address of the place in the stack it was placed.
[06:56:27] *** Joins: streamer45 (streamer45@moz-47A4E4E4.retail.telecomitalia.it)
[06:56:30] <tikue_> dbaupp: what about `let x = 5; &x`
[06:56:33] <tikue_> what does `&x` do
[06:56:36] <cmr> tikue_: same thing\
[06:56:40] *** Parts: streamer45 (streamer45@moz-47A4E4E4.retail.telecomitalia.it) (:P)
[06:56:53] <strcat> tikue_: if you want to view compile-time static checks as part of 'what does it do'
[06:57:05] <strcat> then it also marks the memory location as immutable until that reference goes out of scope
[06:57:28] <tikue_> strcat: yeah, and i think that's the right way to describe &foo
[06:57:45] <strcat> &foo takes the address of foo, that's what it does and why you would use it
[06:58:11] <tikue_> strcat: &mut foo takes the address as well
[06:58:20] <strcat> yes
[06:58:24] <tikue_> and & vs &mut is not an arbitrary decision
[06:58:30] <strcat> no one said it was arbitrary
[06:58:34] <strcat> but you have no choice with a move
[06:58:38] <strcat> you never opt-in to it
[06:58:40] <strcat> you never *want* it
[06:58:41] <cmr> Rust seems to be approaching "C, but with safety features, and a bunch of cool extras", which is exactly what I want, personally.
[06:58:42] <tikue_> so saying &foo is just <takes the address of foo> isn't the whole thing
[06:59:01] <strcat> tikue_: yes, you need a few pages to describe the borrow checker
[06:59:05] <dbaupp> cmr: do we have goto yet? :P
[06:59:17] <tikue_> strcat: the implementation or the purpose?
[06:59:22] <Amaranth> cmr: Next step, inheritance based OOP via macros ala glib
[06:59:25] <cmr> dbaupp: yeah, forward goto would be nice.
[06:59:30] <strcat> tikue_: the details visible to a user of the language
[06:59:38] <tikue_> why can't you simply say <takes the address of foo and marks foo as immutable until the borrowed pointer goes out of scope>
[06:59:49] <dbaupp> cmr: we do have that with labelled break; although it's kinda ridiculously ugly
[06:59:55] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[07:00:18] <cmr> dbaupp: I'm pretty sure single-iteration loops are thedailywtf worthy
[07:00:20] <cmr> :p
[07:00:34] <tikue_> cmr: what
[07:00:39] <SiegeLord> It's a standard injection technique in C :P
[07:00:46] <SiegeLord> do {} while(0)
[07:01:36] <heather> cmr: I'm ebuild author ) maybe trying to build 0.8 on 64arch currently, will also try it without enabling clang flag, maybe it cause trouble
[07:02:20] <dbaupp> rusti: fn foo(i: int) -> ~str { 'jump: loop { if i == 1 { /* error! */ break 'jump; } if i == 2 { break 'jump; } return ~"ok"; } ~"error" } (foo(1), foo(2), foo(3))
[07:02:21] -rusti- (~"error", ~"error", ~"ok")
[07:02:23] <cmr> heather: I build like `./configure --enable-clang --enable-ccache --prefix=$HOME/.local; make install;` all the time.
[07:02:56] <heather> cmr: how it should help me? :)
[07:02:58] <tikue_> idk, i really think it's wrong to teach someone what a move is by saying it's literally just a shallow copy, because they'd rightfully say "then it's not really moved" to which you'd say "well we're marking the original location as unusable until it is reassigned" to which they would rightfully say "well why didn't you say that in the first place rather than calling it a literal shallow copy"
[07:03:09] <strcat> tikue_: it isn't really moved
[07:03:14] <strcat> *ownership* is moved
[07:03:14] <tikue_> strcat: we call this a move
[07:03:21] <strcat> tikue_: the *object* isn't moved
[07:03:23] <strcat> ownership is
[07:03:24] <tikue_> strcat:  i know
[07:03:38] <strcat> it's not incorrect to say it's a shallow copy
[07:03:45] <heather> someone used to build rust without clang?
[07:04:06] <dbaupp> heather: I think gcc is the default
[07:04:17] <tikue_> if someone asked you who the president of france was and you said he's literally just a human being, they probably be unsatisfied with that answer, though not incorrect
[07:04:30] <dbaupp> heather: (and I'm using the default)
[07:04:31] <tikue_> it's clearly not the whole picture
[07:04:37] *** Quits: GeneralMaximus (ankur@4116177C.2F59B96B.D5D59AD9.IP) (Ping timeout)
[07:04:37] <tikue_> and worse
[07:04:43] <tikue_> it seems intentionally misleading
[07:04:46] <strcat> tikue_: we've created a lot of confusion by claiming moves are not the same thing as implicit copies
[07:04:55] *** Joins: tefter (tefter@B5D119DC.B856A0A1.73804765.IP)
[07:05:02] <tikue_> strcat: agreed
[07:05:13] <heather> dbaupp: I see, sad, stll can't get what can cause: invalid native target: 'x86_64' (not in project)
[07:05:15] <tikue_> so show the whole picture
[07:05:19] *** Joins: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP)
[07:05:21] <strcat> I am
[07:05:33] <tikue_> if someone asks what is a move, what would you say?
[07:05:48] <strcat> I would say a move is a shallow copy where ownership is transferred
[07:05:57] <strcat> and that every assignment, passed parameter and return in rust is a shallow copy
[07:05:58] <tikue_> then we're not in disagreement.
[07:05:58] <dbaupp> heather: are you building like `./configure; make` ?
[07:06:14] <tikue_> as long as you don't say "it's literally just a shallow copy" i have no beef
[07:06:43] <heather> dbaupp: it's in irc log, let me grab
[07:07:04] <heather> dbaupp: ./configute --prefix="${EPREFIX}"/usr $(use_enable clang) --local-rust-root="${EPREFIX}"/usr
[07:07:08] *** Quits: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[07:07:27] <tikue_> it looks like there's no warning for unused modules
[07:07:37] <dbaupp> heather: I assume that ./configute is meant to be ./configure? other than that, looks reasonable to me
[07:08:34] *** Joins: GeneralMaximus (ankur@668D8DBE.EDDAF85E.D2D1FAF0.IP)
[07:08:54] <heather> dbaupp: just my typo
[07:08:58] <heather> dbaupp: it
[07:09:34] <heather> dbaupp: it's written right in original build script )
[07:09:50] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[07:09:57] <Eridius> the heck? librustc::back::rpath::test::test_prefix_rpath() really just tests the path module. nothing rust-specific. That's strange
[07:11:27] *** Joins: jdsanders (Adium@moz-F45527D6.hlrn.qwest.net)
[07:11:31] *** Quits: jdsanders (Adium@moz-F45527D6.hlrn.qwest.net) (Quit: jdsanders)
[07:12:31] *** Joins: io2 (io2@moz-A6202C16.home.otenet.gr)
[07:13:51] *** Quits: Earnestly (earnest@moz-BE290A2B.dyn.plus.net) (Ping timeout)
[07:16:07] <strcat> Eridius: the rpath stuff is strange.
[07:16:09] <strcat> it's awful
[07:16:12] <strcat> ;p
[07:16:30] <dbaupp> Eridius: it's just double checking that path is actually working for the stuff rustc::back::rpath needs?
[07:16:33] *** Joins: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP)
[07:16:43] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[07:16:43] <Eridius> dbaupp: I have no idea what the intention was
[07:17:06] <dbaupp> Eridius: does blame/history indicate it's changed?
[07:17:07] <Eridius> it's basically `let a = calculate_some_path(); let b = a.join("foo/bar/baz"); assert!(a.to_str().ends_with(b.to_str()))`
[07:17:18] <Eridius> not worth going that deep. I just found it very odd
[07:17:21] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[07:18:55] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Ping timeout)
[07:20:59] <dbaupp> Eridius: it's been there since rpath was first written (19ba9b4d8d0fec474acbbd472e17ef0351c20df2), and used to be: let res = get_install_prefix_rpath("triple"); assert res == #env("CFG_PREFIX") + "/lib/rustc/triple/lib";
[07:22:18] <dbaupp> (and then changed to ends_with rather than == 2 days later)
[07:22:31] <Eridius> dbaupp: thanks for checking. Just seemds weird
[07:22:33] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[07:24:21] *** Joins: maik (maik@moz-5DA9E925.dip0.t-ipconnect.de)
[07:24:37] *** Quits: aeqwa (aeqwa@moz-133DA764.dsl.tropolys.de) (Quit: Lost terminal)
[07:25:02] *** Parts: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) ()
[07:30:55] *** Quits: threecreepio (jdp@moz-9C11F46E.cust.bredbandsbolaget.se) (Quit: threecreepio)
[07:30:57] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:34:25] *** Quits: lenstr (lenstr@CD7D5ABA.83A99F98.85938D85.IP) (Client exited)
[07:35:31] *** Joins: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP)
[07:38:13] *** Joins: aeqwa (aeqwa@moz-133DA764.dsl.tropolys.de)
[07:39:05] *** Quits: SiegeLord (sl@moz-3D449DF.bstnma.fios.verizon.net) (Quit: Leaving)
[07:39:34] *** Joins: minzh (Mibbit@AEC6E6CC.5CE80800.D2BA945D.IP)
[07:40:44] *** Quits: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[07:41:06] *** Joins: SteveMcQwark (steven099@moz-7CFCF343.cpe.net.cable.rogers.com)
[07:41:48] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[07:42:35] *** Quits: maik (maik@moz-5DA9E925.dip0.t-ipconnect.de) (Ping timeout)
[07:42:50] *** Joins: sebcrozet (sebcrozet@moz-7FB6C00B.w193-252.abo.wanadoo.fr)
[07:43:59] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[07:51:01] *** Joins: squiddy (squiddy@moz-543CC057.adsl.alicedsl.de)
[07:51:08] *** Joins: lhatsk (Adium@moz-760822D4.pool.mediaways.net)
[07:53:02] *** Joins: SteveMcQwark_ (SteveMcQwa@moz-7CFCF343.cpe.net.cable.rogers.com)
[07:53:08] *** Quits: SteveMcQwark_ (SteveMcQwa@moz-7CFCF343.cpe.net.cable.rogers.com) (Quit: SteveMcQwark_)
[07:54:43] <SteveMcQwark> ps aux
[07:57:29] <zxcdw> rm -rf /
[07:58:25] <klutzy> The incident will be reported.
[08:00:14] <zxcdw> oops, forgot to unset HISTFILE
[08:00:16] * zxcdw hides
[08:01:18] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[08:02:28] *** Quits: aeqwa (aeqwa@moz-133DA764.dsl.tropolys.de) (Ping timeout)
[08:03:30] *** Quits: slack1256 (slack@moz-C0A95B6F.baf.movistar.cl) (Quit: Konversation terminated!)
[08:06:52] *** Joins: aeqwa (aeqwa@moz-E0502FA3.dsl.tropolys.de)
[08:07:11] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[08:10:52] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[08:11:28] *** Quits: dew (Instantbir@moz-EEE6B2F8.dhcp.stls.mo.charter.com) (Ping timeout)
[08:11:38] *** Joins: dew (Instantbir@moz-EEE6B2F8.dhcp.stls.mo.charter.com)
[08:13:21] *** Quits: dew (Instantbir@moz-EEE6B2F8.dhcp.stls.mo.charter.com) (Ping timeout)
[08:15:21] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[08:16:39] <drrb> Hi guys, still trying to move a variable out of a closure. It seems that I can do it (using a Cell), as long as the closure isn't owned. Is there any way (with Cells or otherwise) to move a variable out of an owned closure?
[08:17:01] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[08:17:10] *** Joins: dew (Instantbir@moz-EEE6B2F8.dhcp.stls.mo.charter.com)
[08:20:24] *** Joins: five (five@moz-F45C65F8.v4.ngi.it)
[08:22:09] <dbaupp> rusti: let a = std::cell::Cell::new(~"move this"); let f: ~() -> ~str = || { a.take() }; f()
[08:22:10] -rusti- <anon>:7:64: 7:66 error: expected `;` but found `->`
[08:22:10] -rusti- <anon>:7          let a = std::cell::Cell::new(~"move this"); let f: ~() -> ~str = || { a.take() }; f()
[08:22:10] -rusti-                                                                          ^~
[08:22:10] -rusti- application terminated with error code 101
[08:22:16] *** Quits: six600110 (six600110@moz-3C5CCD60.neo.res.rr.com) (Client exited)
[08:22:22] <dbaupp> rusti: let a = std::cell::Cell::new(~"move this"); let f: ~fn() -> ~str = || { a.take() }; f()
[08:22:23] -rusti- ~"move this"
[08:22:41] <dbaupp> rusti: let a = ~"move this"; let f: ~fn() -> ~str = || { a }; f()
[08:22:42] -rusti- <anon>:7:59: 7:60 error: cannot move out of captured outer variable in a heap closure
[08:22:42] -rusti- <anon>:7          let a = ~"move this"; let f: ~fn() -> ~str = || { a }; f()
[08:22:42] -rusti-                                                                     ^
[08:22:42] -rusti- error: aborting due to previous error
[08:22:42] -rusti- application terminated with error code 101
[08:23:01] <drrb> That's almost like what i've got
[08:23:28] <drrb> fn main() {
[08:23:29] <drrb>     let message_holder = std::cell::Cell::new_empty();
[08:23:30] <drrb>     do something_with {
[08:23:32] <drrb>         message_holder.put_back(~"hi");
[08:23:33] <drrb>     };
[08:23:35] <drrb>     println(message_holder.take());
[08:23:36] <drrb> }
[08:23:38] <drrb> fn something_with(do_it: &fn ()) {
[08:23:39] <drrb>     do_it();
[08:23:39] <drrb> }
[08:24:10] <drrb> If the second method is changed to take an ~fn(), it won't let me take() the value back.
[08:24:55] <dbaupp> yeah, message_holder gets captured by the closure and moved *into* it, so that you can't use it outside
[08:25:09] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[08:25:19] <drrb> Yeah, that makes sense
[08:25:29] <dbaupp> what are you actually trying to do with the code? there might be a neater way
[08:25:34] <drrb> The reason i need to do it that way is that the second function is actual std::rt::run, which I can't return stuff from.
[08:25:49] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Ping timeout)
[08:26:43] <dbaupp> ah, well, I think doing anything outside of `run` is peculiar. can you gist the whole code?
[08:27:17] <drrb> Yep, one sec
[08:27:54] <drrb> (briefly, the reason I'm doing that is because I'm running rustc embedded from java)
[08:28:22] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[08:28:27] *** Joins: busylizzy (lisa@85228838.12D0DC84.211374C4.IP)
[08:32:52] <drrb> https://gist.github.com/drrb/3df45f89c01497c3501a
[08:33:58] <drrb> The compile() function uses librustc to compile the file.
[08:34:12] <Eridius> hrm, NO_REBUILD=1 doesn't seem to be working with check-stage2-rustc. That's unfortunate
[08:34:40] <dbaupp> drrb: did you mean for it to be recursive like that?
[08:35:00] <drrb> dbaupp: no, sorry, trying to take out noise to make it easier to read
[08:35:02] <dbaupp> (it appears to be calling `compile` straight in `compile`)
[08:35:08] <dbaupp> ah, ok
[08:35:13] * dbaupp thinks
[08:35:14] <drrb> just updated it
[08:36:00] *** Joins: mikezaby (mikezaby@moz-908EA8DE.home.otenet.gr)
[08:36:10] <dbaupp> Eridius: you can normally build it yourself using an "old" stage2 compiler
[08:36:31] <Eridius> dbaupp: yeah, and I probably will do that next time
[08:36:56] <dbaupp> (you can get the invocation with VERBOSE=1, and you'll need CFG_COMPILER_TRIPLE= CFG_LIBDIR= CFG_PREFIX= CFG_VERSION= if you're just building it, I guess they'll need to be set to useful things if you're running the tests too)
[08:37:10] <dbaupp> drrb: hm, I'm not quite sure how to handle this
[08:37:19] <dbaupp> it might take some unsafe transmutes
[08:37:59] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[08:38:37] <drrb> Hmm, ok.
[08:38:50] <dbaupp> i.e. if you can somehow get a `&mut Option<~Diagnostic>` into the closure then you're ok, but that's not possible since &mut isn't Send in general (which ~fn requires)
[08:38:55] <Eridius> ooh that's why the test fails. Because .get_relative_to() behaved differently on the old path. Forgot about that
[08:39:35] <drrb> I take it changing std::rt::run() to accept a &fn() is out of the question? :)
[08:39:44] <dbaupp> drrb: also, rt::start/rt::start_on_main_thread do the clean up for you
[08:39:54] <dbaupp> yeah, I imagine there's a good reason for it to be ~fn
[08:40:27] <drrb> yeah, i did see those, but wasn't sure what to pass as arguments to rt::start
[08:42:11] <dbaupp> they're the C-style argv/argc
[08:42:35] <dbaupp> so I think start(0, &std::ptr::null(), func) should work
[08:43:08] <dbaupp> rusti: std::rt::start(0, &std::ptr::null(), || { println("hi"); })
[08:43:09] -rusti- You've met with a terrible fate, haven't you?
[08:43:09] -rusti- fatal runtime error: assertion failed: (*ptr).is_none()
[08:43:09] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[08:43:34] * strcat doesn't understand why it has that instead of signal 6
[08:43:35] <dbaupp> hm it possibly doesn't handle that very well :'(
[08:43:49] *** Joins: pyrac (pyrac@moz-1C318C84.w92-162.abo.wanadoo.fr)
[08:44:03] <strcat> rusti: std::rt::start(0, std::ptr::null(), || { println("hi"); })
[08:44:04] -rusti- You've met with a terrible fate, haven't you?
[08:44:04] -rusti- fatal runtime error: assertion failed: (*ptr).is_none()
[08:44:04] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[08:44:15] <strcat> rusti: std::rt::start(0, & &std::ptr::null(), || { println("hi"); })
[08:44:16] -rusti- <anon>:7:27: 7:47 error: mismatched types: expected `**u8` but found `&&*<V6>` (expected *-ptr but found &-ptr)
[08:44:16] -rusti- <anon>:7          std::rt::start(0, & &std::ptr::null(), || { println("hi"); })
[08:44:16] -rusti-                                     ^~~~~~~~~~~~~~~~~~~~
[08:44:16] -rusti- error: aborting due to previous error
[08:44:17] -rusti- application terminated with error code 101
[08:44:40] <Luqman> drrb: are you trying to call into a rust library from java that starts the runtime?
[08:44:42] <drrb> Yeah, i'd assumed you'd have to pass it a pointer to an empty array, but i'm a total C novice, so I have no idea how!
[08:44:42] <strcat> I guess rust doesn't work if the caller passes no argv[0]?
[08:45:21] <dbaupp> strcat: looking at the source, it should
[08:45:35] <strcat> rusti: [&"foo"[0] as *u8, 0 as *u8] 
[08:45:36] -rusti- [(0x409562 as *()), (0x0 as *())]
[08:45:41] <dbaupp> it's possibly because we're starting it inside a program that's already started one
[08:45:48] <strcat> dbaupp: ah right
[08:45:50] <strcat> good point
[08:46:20] <strcat> rusti: let xs = &([&"foo"[0] as *u8, 0 as *u8][0]); std::rt::start(1, xs as **u8), || { println("hi"); })
[08:46:21] -rusti- <anon>:7:106: 7:107 error: incorrect close delimiter: `)`
[08:46:21] -rusti- <anon>:7          let xs = &([&"foo"[0] as *u8, 0 as *u8][0]); std::rt::start(1, xs as **u8), || { println("hi"); })
[08:46:21] -rusti-                                                                                                                    ^
[08:46:21] -rusti- application terminated with error code 101
[08:46:30] <dbaupp> rusti: std::rt::start(1, &([&"foo"[0], std::ptr::null()][0]), || { println("hi"); })
[08:46:31] -rusti- pastebinned 8 lines of output: http://sprunge.us/fQBX
[08:46:45] <dbaupp> rusti: std::rt::start(1, &([&"foo"[0] as *u8][0]), || { println("hi"); })
[08:46:46] -rusti- You've met with a terrible fate, haven't you?
[08:46:46] -rusti- fatal runtime error: assertion failed: (*ptr).is_none()
[08:46:46] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[08:47:20] <dbaupp> rusti: std::rt::start(1, &([&"foo\x00"[0] as *u8][0]), || { println("hi"); })
[08:47:21] -rusti- You've met with a terrible fate, haven't you?
[08:47:21] -rusti- fatal runtime error: assertion failed: (*ptr).is_none()
[08:47:21] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[08:47:31] <strcat> anyway I guess you can't start 2
[08:47:33] <dbaupp> drrb: in theory this isn't something you have to worry about
[08:47:49] <strcat> I'd be surprised if it actually behaved well embedded in another process though
[08:47:54] <dbaupp> (since you're not going to be starting one rt inside another)
[08:48:07] <Luqman> well, there's also the issue about it always assuming the cratemap is never null
[08:48:14] <Luqman> which wouldn't be true for drrb
[08:48:19] <dbaupp> Luqman: does it currently do that?
[08:48:28] <drrb> Luqman: yeah. I'm making a Netbeans plugin (https://github.com/drrb/rust-netbeans). It currently uses a parser implemented in Java (https://github.com/jbclements/rust-antlr), but it's based on rust 0.7, and it's too slow to parse a whole project, so I want to use rustc.
[08:49:05] <Luqman> oh in 0.7, it expects you to pass it a crate_map arg which can't be null
[08:49:15] <sam113101> I don't want to start a flamewar or derive the subject, but
[08:49:38] * mcpherrin prepares popcorn for sam113101 flame war
[08:49:38] <Luqman> but i think it should be possible to do all the init stuff that start does for you and just skip the logging part
[08:50:11] <drrb> Luqman: that's what I'm doing. The logging initialisation segfaults for me.
[08:50:58] <dbaupp> drrb: you're not using 0.7, are you?
[08:51:08] <dbaupp> sam113101: but... ?
[08:51:21] <sam113101> why was D not good enough for servo (or the next gecko)?
[08:51:22] <tikue_> dbaupp: i know i'm so excited for what sam113101 was about to say!
[08:51:53] <tikue_> sam113101: it doesn't provide nearly as strong safety guarantees and it's garbage collected
[08:51:55] <drrb> dbaupp: No, I updated to 0.8
[08:51:56] <tikue_> for starters
[08:51:59] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[08:52:28] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[08:52:38] <sam113101> tikue_: what's wrong about the fact that it's garbage collected, though?
[08:52:57] <strcat> sam113101: not memory safe, has data races, doesn't provide an alternative to GC for heap allocation
[08:52:58] <tikue_> sam113101: browsers need to be consistently performant, without hiccups
[08:53:02] <mcpherrin> sam113101: Garbage collection isn't good if you want a low latency and reliable latency system
[08:53:24] <strcat> because GC needs 3-5x the amount of memory in order to compete in throughput, and *still* has latency problems
[08:53:33] <strcat> :s
[08:54:03] <mcpherrin> sam113101: That isn't to say GC doesn't have a place, but we need alternatives sometimes :)
[08:54:08] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Ping timeout)
[08:54:14] <strcat> and there are more resources than memory
[08:54:28] <strcat> so you need a more general solution anyway
[08:54:35] <sam113101> highlight festa
[08:54:43] <tikue_> lol
[08:54:54] <tikue_> does rust even have true GC? it's all reference counting right?
[08:55:09] <strcat> tikue_: it will have a GC, for @/@mut (whatever they are called)
[08:55:14] <dbaupp> *still reference counting
[08:55:28] <mcpherrin> tikue_: Graydon wrote a basic GC, but I don't think it ever landed
[08:55:31] * dbaupp wants to be able to stop saying that sometime
[08:55:35] <strcat> tikue_: it's mostly just stack discipline
[08:55:38] <strcat> neither reference counting or gc
[08:55:58] <tikue_> strcat: forgive my ignorance, as I know nothing about GC implementations, but why would something like mark and sweep be better than RC for @/@mut?
[08:56:03] <tikue_> dbaupp:  mcpherrin ^^
[08:56:04] <Luqman> drrb: so, yea. calling std::rt::args::init(argc, argv), std::rt::env::init(), std::rt::run(foo), std::rt::cleanup() should work
[08:56:16] <dbaupp> tikue_: cycles
[08:56:20] <strcat> more than that
[08:56:26] <mcpherrin> tikue_: RC has pretty high memory and cpu overhead
[08:56:26] <strcat> tikue_: Rc/RcMut are for reference counting.
[08:56:32] <strcat> mcpherrin: GC overhead is much higher
[08:56:35] <strcat> in memory
[08:56:42] <strcat> really, the reason for having both is pretty simple
[08:56:52] <mcpherrin> strcat: Yeah, but isn't most that out of your hot path?
[08:56:57] *** Quits: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[08:56:59] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[08:57:00] <mcpherrin> strcat: so your caches aren't affected except when you're sweeping
[08:57:06] <strcat> garbage collection handles cycles, and has high *throughput* for many small object allocations
[08:57:14] *** Quits: heather (Heather@C1D39E87.BD70D8E3.256079E2.IP) (Input/output error)
[08:57:22] <strcat> mcpherrin: take a look at how Rc works
[08:57:25] <tikue_> ok, so in situations where latency isn't an issue, GC is preferable?
[08:57:27] <dbaupp> tikue_: overhead of modifying ref-counts (especially with the current implementation of @)
[08:57:29] <strcat> you only pay for reference counting when you split ownership
[08:57:33] <strcat> it uses move semantics
[08:57:54] <strcat> it adds 1 word overhead to the allocation, + refcount on splitting ownership
[08:58:40] <sam113101> but
[08:58:51] <strcat> @ is definitely a terrible fit for reference counting, because it doesn't have move semantics
[08:59:06] <strcat> very expensive and holds onto things longer than you want
[08:59:07] <sam113101> can you have memory on the heap with rust? how does it work
[08:59:19] <strcat> sam113101: there's a tutorial explaining it
[08:59:21] <sam113101> or is it all on the stack
[08:59:22] *** Quits: pyrac (pyrac@moz-1C318C84.w92-162.abo.wanadoo.fr) (Quit: pyrac)
[08:59:24] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[08:59:29] <tikue_> sam113101: ~ and @ allocate on the heap
[08:59:47] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[08:59:47] *** ChanServ sets mode: +o pnkfelix
[08:59:53] <sam113101> when is the memory deallocated?
[09:00:00] <tikue_> sam113101: when it moves out of scope
[09:00:09] <tikue_> maybe move isn't the right word. too overloaded
[09:00:12] <tikue_> when it *goes* out of scope
[09:00:31] <Luqman> rusti: unsafe { std::rt::args::init(0, std::ptr::null()); } std::rt::env::init(); std::rt::run(|| println("Hello World!")); std::rt::cleanup();
[09:00:31] -rusti- You've met with a terrible fate, haven't you?
[09:00:32] -rusti- fatal runtime error: assertion failed: (*ptr).is_none()
[09:00:32] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[09:00:35] <strcat> ~ owns some memory on the heap and cleans it up when it goes out of scope, if you don't move it elsewhere
[09:00:45] <tikue_> rusti: { let s = ~"yay i'm on the heap"; } s // no longer allocated, won't compile
[09:00:45] -rusti- <anon>:7:45: 7:46 error: unresolved name `s`.
[09:00:46] -rusti- <anon>:7          { let s = ~"yay i'm on the heap"; } s // no longer allocated, won't compile
[09:00:46] -rusti-                                                       ^
[09:00:46] -rusti- error: aborting due to previous error
[09:00:46] -rusti- application terminated with error code 101
[09:00:52] <strcat> Rc provides *shared ownership* of some memory on the heap, and it is cleaned up as soon as the last handle goes out of scope
[09:00:58] <strcat> it is not common to need it though
[09:01:16] <strcat> and @ provides the same thing via an eventual GC, to allow cycles and fit a slightly different niche
[09:01:29] *** Joins: pyrac (pyrac@moz-1C318C84.w92-162.abo.wanadoo.fr)
[09:01:40] <drrb> Luqman: thanks. At the moment I'm using rt::envLLinit(), rt::run() and rt::cleanup(), because I haven't been able to produce something that args::init likes. It seems to be working ok, but I guess I don't know if it's doing something weird behind the scenes.
[09:01:51] <tikue_> strcat: why does @ allow cycles now if it's RC'd?
[09:01:59] <strcat> tikue_: because it's an implementation detail
[09:02:03] <strcat> tikue_: a null gc is a valid gc
[09:02:08] <mcpherrin> tikue_: It's the desired semantics of @
[09:02:10] <sam113101> if @things are already working, why use a GC?
[09:02:12] <strcat> gc gives you no guarantees about anything ;p
[09:02:14] <tikue_> does it leak though?
[09:02:26] <tikue_> sam113101: performance
[09:02:26] <dbaupp> sam113101: they're not working
[09:02:29] <strcat> sam113101: because Rc provides reference counting
[09:02:40] <sam113101> what's Rc btw? rustc?
[09:02:42] <strcat> Rc is usually going to be more efficient than a gc, but not always
[09:02:44] <dbaupp> tikue_: it does leak: cycles get collected at task death
[09:02:48] <strcat> sam113101: reference counted box type
[09:02:57] <tikue_> dbaupp: ah ok. wow i didn't know that
[09:03:00] <dbaupp> sam113101: defined in extra::rc
[09:03:09] <Luqman> drrb: does rt::args::init(0, ptr::null()) work?
[09:03:28] <mcpherrin> (Offtopic: If you want to see a sweet, hardware assisted GC, check out Azul's Zing GC
[09:03:31] <Luqman> it won't work if the runtime has already been started but otherwise it should work
[09:03:38] <dbaupp> tikue_: (but again, that's an implementation detail, with a proper GC they'll often get collected in a more timely manner)
[09:03:58] <tikue_> dbaupp: it's an important implementation detail though
[09:04:01] <strcat> dbaupp: @ does "work"
[09:04:06] <strcat> a gc that doesn't do anything is totally valid
[09:04:10] <strcat> the cycles are cleaned up at the end of the task
[09:04:20] <tikue_> dbaupp: servo uses @mut all over the place and they'll probably all need to be removed before @ becomes GC'ed
[09:04:21] <strcat> if you need guarantees, you generally can't use gc
[09:04:29] <sam113101> oh
[09:04:35] <sam113101> so it's temporary
[09:04:42] <mcpherrin> tikue_: Servo relies on cycles not going away?
[09:04:42] <drrb> Luqman: It does!
[09:04:47] <dbaupp> strcat: right, but it doesn't work as intended
[09:04:56] <dbaupp> tikue_: why?
[09:05:01] <tikue_> no sorry, that's not what i meant
[09:05:07] <tikue_> i meant for performance
[09:05:08] <strcat> dbaupp: in the average case, it doesn't handle cycles as well as intended
[09:05:15] <strcat> but a gc doesn't provide a better worst case
[09:05:20] <sam113101> in what kind of tasks/situations would GC be better than Rc?
[09:05:21] <Luqman> drrb: awesome, soon just using std::rt::start should work once the cratemap thing is sorted out
[09:05:31] <strcat> sam113101: when you need to have graphs of objects with cycles
[09:05:44] <strcat> or when you have *many* small allocations being made/destroyed
[09:06:01] <strcat> but do keep in mind that 99% of rust code needs neither reference counting or garbage collection
[09:06:15] <sam113101> r-really?
[09:06:16] <drrb> Luqman: cool! I'll keep an eye out
[09:06:20] <strcat> sam113101: yes
[09:06:25] <strcat> you can write large programs without either
[09:06:40] <pnkfelix> strcat: there *are* certain formal guarantees one can make about precise GC's.  e.g. A no-op GC is sound with respect to safety, but not w.r.t. asymptotic space efficiciency
[09:06:41] <strcat> whether that's a good idea depends on what you're doing
[09:07:18] <drrb> Luqman, dbaupp: Thanks for your help guys :) . I'm going to head off. Have a good night!
[09:07:48] <strcat> pnkfelix: well you can have a guarantee about space until you require it to be real-time ;p
[09:07:53] <pnkfelix> strcat: see e.g. clinger 1998 http://www.cesura17.net/~will/Professional/Research/Papers/tail.pdf
[09:08:43] <strcat> if you require a certain latency, there would be a tipping point where you could generate garbage faster than it would be cleaned up
[09:08:48] <strcat> not that alternative ways of managing memory solve that
[09:09:15] <pnkfelix> strcat: sure, pause times and MMU are yet another question
[09:10:51] <pnkfelix> strcat: (one which I spent years of my life on, see: http://www.cesura17.net/~will/Professional/Research/Papers/Klock/klock11-diss.pdf )
[09:10:51] *** Quits: drrb (drrb@4D561226.896EE5A.377B9828.IP) (Quit: drrb)
[09:11:08] <strcat> jemalloc at least gives you an upper bound on latency and size overhead for small objects ;]
[09:11:15] <sam113101> are there times when you _want_ to use something like malloc, that doesn't free when it goes out of scope?
[09:11:26] <sam113101> but still not GC
[09:11:37] <sam113101> if that makes any sense
[09:11:39] <strcat> sam113101: ~ is "malloc"
[09:11:51] <strcat> it's only freed when it goes out of scope if you don't move it somewhere else
[09:11:53] <pnkfelix> (or the shorter http://www.cesura17.net/~will/Professional/Research/Papers/boundedLatencyGC.pdf)
[09:12:14] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[09:12:32] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[09:12:35] <sam113101> ok
[09:13:09] <strcat> ~T and ~[T] give you the lowest level memory allocation primitives you need for the use cases malloc fits
[09:13:26] <strcat> they are thin layers on top of malloc
[09:13:54] <strcat> { let x = ~5; foo(x /* by-value */) }
[09:14:00] <strcat> will just compile to the equivalent C
[09:14:05] <sam113101> can you have buffer overflows in rust?
[09:14:13] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[09:14:29] <mcpherrin> sam113101: With unsafe, you could, but in general memory accesses are checked.
[09:14:33] <strcat> sam113101: rust doesn't have null pointer dereferences, buffer overflows, dangling pointers, data races, etc. without using unsafe {} blocks
[09:14:51] <sam113101> ok
[09:15:13] <mcpherrin> strcat: While I know what you said to be true, it still makes me happy to see that list of 80s era problems solved in one list :)
[09:15:44] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[09:15:59] <strcat> the only thing that you really pay a cost for solving is preventing out-of-bounds array indexing
[09:16:05] <strcat> (a cost as in a performance cost)
[09:16:28] <strcat> although, iterators handle many cases and don't have overhead over C
[09:17:04] <strcat> but the checks on index OOB are really high overhead...
[09:17:06] <sam113101> I'm eager to learn rust
[09:17:27] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[09:18:12] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[09:18:42] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[09:19:02] <strcat> { let x = ~5; foo(x /* by-value */) } will compile the same as { size_t *x = malloc(sizeof(size_t)); if (!x) abort(); foo(x) } in C
[09:19:09] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[09:19:15] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[09:19:53] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[09:20:52] <tikue_> strcat: high enough that it's too much? :\ 
[09:20:53] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Ping timeout)
[09:21:38] <tikue_> and is VecIterator implemented in a way that avoids the OOB checks? 
[09:21:50] *** Quits: pyrac (pyrac@moz-1C318C84.w92-162.abo.wanadoo.fr) (Quit: pyrac)
[09:21:55] <Eridius> woohoo, finally found a place where the new Path's forced normalization is a problem. rustc uses Path to represent an rpath, which has .. in it. It really shouldn't be using Path for that though, so I guess I get to fix that
[09:22:15] <strcat> tikue_: vector iterators have zero overhead over loops over arrays in C
[09:22:23] *** Quits: GeneralMaximus (ankur@668D8DBE.EDDAF85E.D2D1FAF0.IP) (Ping timeout)
[09:22:28] <strcat> iter() takes a ptr to the start and the end
[09:22:42] <strcat> iterating will increment the pointer, and check if it equals the end (2 operations per iteration)
[09:23:02] <tikue_> strcat: doesn't it need to do index OOB checking though?
[09:23:31] <strcat> tikue_: no
[09:23:36] <strcat> the check against the end is the only check it needs
[09:23:43] <strcat> you need that check in C/C++ too, to know when you're done
[09:24:18] <tikue_> strcat: i mean i know it doesn't need to do the check. but i'm curious how it avoids doing it? i would've thought that the compiler generated code that puts the checks in at runtime
[09:24:59] <sam113101> I wish I was as knowlegdeable as you about programming, guys ;_;
[09:25:26] *** Joins: pyrac (pyrac@moz-1C318C84.w92-162.abo.wanadoo.fr)
[09:25:41] <sam113101> I've never used any compiled language, let alone manually manage memory
[09:25:48] <tikue_> sam113101: i find programming in rust to be really enjoyable! stick around here a while and you'll learn a lot :)
[09:26:43] <tikue_> sam113101: well i don't know if i'd say memory is manually managed in rust. you just get to choose how it's managed for you, or something. you certainly never do explicit mallocs or frees
[09:26:49] *** Joins: mindcat (mindcat@6B5E55D0.7EE3DE8.F956842C.IP)
[09:27:45] *** Joins: GeneralMaximus (ankur@21779A10.6F4D4287.BE90E62C.IP)
[09:28:48] <sam113101> yeah, but you still need to know how things are laid out in memory to make good use of them
[09:28:52] <sam113101> stack vs head, etc.
[09:28:54] <sam113101> heap*
[09:29:15] <sam113101> but less tedious than in C I can imagine
[09:29:40] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[09:31:25] *** Quits: five (five@moz-F45C65F8.v4.ngi.it) (Ping timeout)
[09:33:39] <tikue_> much less tedious
[09:36:46] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[09:38:53] <lhatsk> so, for graphs with a lot of vertex deletion you'd probably use smth like nodes: ~[@T]?
[09:39:53] *** Joins: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP)
[09:39:53] <strcat> if the nodes have keys you can use a pair of maps
[09:41:03] *** Joins: mib_jovzre (Mibbit@moz-A74172D2.hsi13.kabel-badenwuerttemberg.de)
[09:42:25] *** Quits: mikezaby (mikezaby@moz-908EA8DE.home.otenet.gr) (Input/output error)
[09:43:49] <mib_jovzre> I'm pretty new to rust and currently trying to bend my head around the memory model. Currently I would like to have a global vector with entries visible to all tasks and modifiable by one at a time. What would be the way to go. I would prefer not having to translate this access pattern into a msg passing protocoll
[09:44:30] <strcat> mib_jovzre: you could use an Arc for guarded access to shared mutable data
[09:44:47] <strcat> but you'd almost always be better off using message passing ;p
[09:46:00] *** Quits: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[09:47:10] *** Quits: pyrac (pyrac@moz-1C318C84.w92-162.abo.wanadoo.fr) (Quit: pyrac)
[09:49:14] <mib_jovzre> strcat: thx for the tipp. So how would to pass the values around, such that "most" of the time the other tasks see an up to date representation of the vector?
[09:49:30] *** Joins: slackito (slackito@moz-7779E4A6.dyn.user.ono.com)
[09:49:44] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[09:54:10] *** Joins: mikezaby (mikezaby@moz-908EA8DE.home.otenet.gr)
[09:54:27] *** Quits: victorporof_ (victorporo@35F65A40.E0F96B01.D111398B.IP) (Quit: victorporof_)
[09:55:22] *** Joins: victorporof (victorporo@35F65A40.E0F96B01.D111398B.IP)
[09:58:39] <strcat> mib_jovzre: well, if you use an Arc you would just give them each a handle to it
[09:58:53] <strcat> via message passing you wouldn't structure the code that way
[10:04:49] *** Joins: pyrac (pyrac@moz-1C318C84.w92-162.abo.wanadoo.fr)
[10:06:42] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[10:07:09] <mib_jovzre> strcat: think of a graph structure and you want a dfs with multiple tasks, how would you model the color states of vertices in a msg passing fashion?
[10:07:11] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[10:07:43] <strcat> mib_jovzre: sounds like fork-join parallelism would be better for that use case than tasks, which we still need to implement in a library module
[10:08:37] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[10:08:38] <strcat> you would be able to pass &/&mut to fork-join workers (which would just wrap tasks with unsafe code)
[10:08:56] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Ping timeout)
[10:10:13] *** Joins: fireglow (fireglow@1D843F6D.FFAA71EC.37339E3A.IP)
[10:10:26] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[10:10:35] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[10:10:53] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[10:10:53] *** ChanServ sets mode: +o pnkfelix
[10:11:02] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[10:12:01] *** Joins: jdsanders (Adium@moz-F45527D6.hlrn.qwest.net)
[10:12:08] <mib_jovzre> strcat: i'm not so sure this would help. Sounds a little like ignoring causality. I would have to pass mutable references to entries which i don't know yet e.g. before doing the next dfs step i don't know which vertices i'm going to discover otherwise i would already have done the dfs
[10:12:14] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[10:12:44] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[10:12:47] *** Joins: six600110 (six600110@moz-3C5CCD60.neo.res.rr.com)
[10:12:49] <strcat> mib_jovzre: true, wouldn't really work for dfs of a graph that wasn't provably acyclic
[10:13:28] <strcat> but if you use tasks you're not going to get much parallelism, they'll be locking on the shared data structure
[10:13:36] <strcat> probably slower than serially unless they have work to do as they go along
[10:14:27] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[10:14:39] <strcat> mib_jovzre: well, unless ofc it was immutable
[10:14:42] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[10:14:51] <strcat> if it was immutable, you'd use an immutable Arc and there wouldn't be locking
[10:15:04] <strcat> you'd need to build it in advance, then put it into the Arc
[10:15:08] *** Quits: fireglow (fireglow@1D843F6D.FFAA71EC.37339E3A.IP) (Quit: fireglow)
[10:16:06] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[10:16:31] *** Joins: fireglow (fireglow@1D843F6D.FFAA71EC.37339E3A.IP)
[10:17:18] *** Quits: jdsanders (Adium@moz-F45527D6.hlrn.qwest.net) (Ping timeout)
[10:17:50] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[10:21:53] <mib_jovzre> strcat: ofc?
[10:22:03] <strcat> of course
[10:22:33] <strcat> but I don't think that really fits your use case
[10:22:42] <mib_jovzre> strcat: sorry, can't follow. how can the states be immutable during the dfs example
[10:23:17] <strcat> the graph could be immutable to at least reduce lock contention but I can't see where you'd get any parallelism out of it
[10:23:35] <mib_jovzre> strcat: sure, the benefit of parallelism depends on the graph structure. If it's large and sparse (as many organic graphs) you can have a benefit
[10:24:07] <strcat> if you have a data structure with fine-grained locking to share state ;p
[10:24:08] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[10:24:09] <mib_jovzre> i agree that for a dfs the graph can be immutable
[10:24:24] <strcat> but we don't have concurrent data structures atm, just big locks via Arc
[10:24:28] <mib_jovzre> strcat: exactly, thats what i'm looking for
[10:24:48] <mib_jovzre> strcat: ok, arc has a single lock
[10:24:49] *** Joins: heftig (heftig@moz-FC0CF353.dip0.t-ipconnect.de)
[10:24:49] *** Quits: heftig (heftig@moz-FC0CF353.dip0.t-ipconnect.de) (Input/output error)
[10:25:15] <strcat> mib_jovzre: yeah, immutable ones just rely on that and RWArc uses a lock
[10:25:29] <strcat> er, or MutexArc does at least
[10:25:34] * strcat isn't sure what the difference is
[10:25:47] <tikue_> strcat: are there plans for concurrent data structures? like java's ConcurrentHashMap or something
[10:25:55] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[10:26:14] <mib_jovzre> now it gets interesting ;)
[10:26:20] *** Joins: nkoep (nik@moz-9D188047.pool.mediaways.net)
[10:26:21] <tikue_> i just figure you could use a task for that, but i suppose that's relatively heavy-handed
[10:26:27] <strcat> tikue_: I wouldn't say there are plans, at least afaik, but I'm sure someone will implement them
[10:27:36] <tikue_> strcat: i can't see how it'd work though? that usually requires shared mutable state
[10:27:45] <strcat> rust lets you build stuff like that via unsafe code
[10:28:02] <strcat> keep in mind that all the concurrency support, including tasks, is essentially entirely done in libstd
[10:28:18] <tikue_> yes 
[10:28:27] <tikue_> but 
[10:28:38] <strcat> you could make a Send mutable hashmap with fine-grained locking
[10:28:44] *** Joins: dnn (daniel@2C446249.F7F04062.79933D60.IP)
[10:28:49] <strcat> it would use the same building blocks as arcs do
[10:29:02] <strcat> would need to be atomically reference counted as a whole, and then handle locking *itself*
[10:29:05] <mib_jovzre> so basically the map would life in it's own task
[10:29:13] <mib_jovzre> and manage storage and retrival?
[10:29:17] <strcat> mib_jovzre: wouldn't have to
[10:29:23] <tikue_> strcat: do RWArcs allow multiple writers?
[10:29:53] *** Quits: dnn (daniel@2C446249.F7F04062.79933D60.IP) (Quit: Ex-Chat)
[10:29:56] <strcat> tikue_: you wouldn't build it on top of RWArc/MutexArc
[10:29:57] *** Quits: wakandan (Mibbit@3ACC418E.8FF05F7.4605F140.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:30:05] <tikue_> strcat: no i'm just wondering
[10:30:13] <strcat> tikue_: I am not entirely sure, MutexArc has 1 lock and blocks
[10:30:18] <strcat> RWArc I don't know about
[10:30:40] <strcat> A dual-mode ARC protected by a reader-writer lock. The data can be accessed mutably or immutably, and immutably-accessing tasks may run concurrently.
[10:30:49] <strcat> I guess it's just a slightly more flexible MutexArc
[10:30:54] *** Joins: hm (Mibbit@moz-540687FF.range86-182.btcentralplus.com)
[10:31:03] <strcat> lets you have multiple concurrent readers
[10:32:01] <tikue_> ah, I see what it does. clever. there's only ever one mutable reference to a RWArc
[10:32:09] <strcat> std::unstable::sync::UnsafeArc is what they build on
[10:32:18] <tikue_> this is accomplished by having a "write mode" method that gives you a mutable reference of the arc
[10:32:22] <strcat> so you could take that, and build fine-grained locking data structures with it
[10:32:53] <mib_jovzre> sounds like fun
[10:32:58] <tikue_> not really lol
[10:33:05] <hm> is there a std::vec method that gets an item by index and returns Option<T>?
[10:33:08] <mib_jovzre> depends on your preferences ;)
[10:33:26] <tikue_> i don't think using concurrent data structures will ever be "elegant" in rust, because it's not designed to make it elegant
[10:33:37] <strcat> I think they could be elegant ;p
[10:33:46] <mib_jovzre> i think they should be elegant
[10:33:47] <tikue_> strcat: you'll probably always need an intermediate method call
[10:33:51] <hm> it seems like something like get_opt should exist on std::vec
[10:33:55] <strcat> you could even implement the Map trait
[10:34:03] <tikue_> concurrent_hashmap.as_writer().store(foo, bar)
[10:34:16] <strcat> tikue_: store could do that internally
[10:34:41] <tikue_> strcat: then it'd be exposing a false api
[10:34:46] <tikue_> &self store
[10:34:49] <tikue_> even though store is mutating
[10:34:57] <strcat> that would take &mut self
[10:35:02] <strcat> get would take &self
[10:35:05] <mib_jovzre> just out of interest. Are concurrent hash maps in java rw-locked per bucket or globally?
[10:35:07] <strcat> they would be #[no_freeze] anyway
[10:35:23] <tikue_> strcat: how can it take &self if you can only have one mutable reference at a time? 
[10:35:26] <strcat> mib_jovzre: I assume it is fine-grained if they put concurrent in the name ;]
[10:35:39] <strcat> tikue_: it blocks
[10:35:43] <strcat> like MutexArc
[10:35:56] *** Quits: victorporof (victorporo@35F65A40.E0F96B01.D111398B.IP) (Quit: victorporof)
[10:36:00] <tikue_> strcat: but what do the tasks actually have a handle to?
[10:36:09] <tikue_> it has to be `mut <something>` presumably
[10:36:19] <strcat> tikue_: it doesn't have to be mut
[10:36:26] <strcat> they are non-Freeze
[10:36:35] *** Joins: victorporof (victorporo@35F65A40.E0F96B01.D111398B.IP)
[10:36:37] <tikue_> strcat: that's what i mean about exposing a false api
[10:36:38] <strcat> shared ownership + mutability -> non-Freeze, not inherited mutability
[10:36:47] <strcat> tikue_: @mut/RcMut/RWArc/MutexArc all do it already
[10:36:52] *** Quits: victorporof (victorporo@35F65A40.E0F96B01.D111398B.IP) (Client exited)
[10:36:55] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[10:36:56] <strcat> and Cell
[10:37:07] <tikue_> i don't like Cell :(
[10:37:09] <strcat> tikue_: the fact that they are not Freeze exposes it as part of the API
[10:37:16] <strcat> they are *always* mutable
[10:37:23] <tikue_> fair enough
[10:37:27] <tikue_> i wouldn't call it elegant
[10:37:40] <strcat> well, not as elegant as nice owned data structures
[10:37:54] <strcat> but I haven't seen an equivalent in other languages I know
[10:37:55] *** Joins: victorporof (victorporo@35F65A40.E0F96B01.D111398B.IP)
[10:38:04] <strcat> to data structures with external iterator objects you can't accidentally invalidate, etc.
[10:38:16] <tikue_> mhm
[10:38:24] <tikue_> but if someone went and wrote a non-freeze iterator
[10:38:32] <tikue_> that'd all be thrown out anyway
[10:38:46] <strcat> or if you just put the container in @mut
[10:38:48] <strcat> ;p
[10:38:52] <tikue_> yeah
[10:38:53] <tikue_> that too
[10:38:56] <tikue_> i dunno : \
[10:38:58] <strcat> then it gets dynamically frozen and the modification fails
[10:39:16] <tikue_> i feel like there is room to improve upon this area
[10:39:21] <tikue_> but i don't have any suggestions
[10:39:22] <tikue_> :)
[10:39:40] <tikue_> if something is mutable it should be marked as mutable
[10:39:42] <tikue_> i don't like cell
[10:39:42] <strcat> I guess a concurrent data structure wouldn't implement Map
[10:39:48] <strcat> it would want to clone out, not hand you a ref
[10:40:04] <strcat> otherwise it'd be weird and could deadlock
[10:40:22] <tikue_> strcat: or just give out Options ?
[10:40:35] <strcat> tikue_: so if there's contention you get None? ;p
[10:40:39] <tikue_> Some(None) would be contended
[10:40:45] <tikue_> Some(Some(foo)) would be uncontended
[10:40:46] <tikue_> :)
[10:40:52] <tikue_> perfect
[10:40:55] <strcat> seems bad for most use cases
[10:41:00] <tikue_> lol
[10:41:02] <strcat> only works if your tasks have something else to do
[10:41:07] <tikue_> yea
[10:41:08] <strcat> "I'll go read a book for a bit, then"
[10:41:09] *** Joins: sergi (textual@moz-DB55470C.upc-a.chello.nl)
[10:41:11] <tikue_> rofl
[10:41:29] <tikue_> "sorry jim, shouldn't be using a concurrent data structure anyway. love, task 3"
[10:41:45] <tikue_> idk
[10:41:53] *** Quits: nkoep (nik@moz-9D188047.pool.mediaways.net) (Ping timeout)
[10:41:58] <tikue_> mutable means mutable, period
[10:42:02] <tikue_> or at least it should
[10:42:33] *** Quits: minzh (Mibbit@AEC6E6CC.5CE80800.D2BA945D.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:42:54] <mib_jovzre> anyway, is there already some kind of graph library for rust?
[10:43:28] <tikue_> even the `with_writer()` thing that RWArc does is weird, because the fact that &self can give out a copy of itself as &mut self feels wrong
[10:43:42] <tikue_> mib_jovzre: i don't know of anything in libstd or libextra offhand
[10:44:04] <lhatsk> mib_jovzre: the only thing I found is: https://github.com/Tristramg/rust-graph
[10:44:45] *** Quits: sergi (textual@moz-DB55470C.upc-a.chello.nl) (Quit: Computer has gone to sleep.)
[10:46:15] <strcat> librustc has a primitive internal graph library it uses ;p
[10:47:13] <lhatsk> strcat: where is it implemented?
[10:48:08] <lhatsk> found it… https://github.com/mozilla/rust/blob/master/src/librustc/middle/graph.rs
[10:48:21] *** Joins: jviereck (Adium@moz-4C9C4638.dip0.t-ipconnect.de)
[10:48:40] *** Joins: Ms2ger (Ms2ger@9D0A393.CB23CDC6.3773EA9F.IP)
[10:48:55] <mib_jovzre> thx, that helped alot
[10:49:12] <tikue_> what if ConcurrentHashMap had a writer task, and concurrent_hash_map.write(key, val) sent the (key, val) tuple over a channel to the writer? and reading was similar to how Arcs work
[10:49:50] <hm> Anyone know how to get / lookup an Option(item) by index from a vector?
[10:50:16] <strcat> tikue_: it would likely be no more concurrent than one in a MutexArc
[10:50:17] *** Quits: jviereck (Adium@moz-4C9C4638.dip0.t-ipconnect.de) (Quit: Leaving.)
[10:50:28] <strcat> handling recv/send would serialize it
[10:50:30] <tikue_> strcat: but it wouldn't be breaking the type system as much
[10:51:18] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: sleep)
[10:53:15] <tikue_> rusti: let v = [1, 2, 3, 4, 5]; v.idx(5)
[10:53:16] -rusti- <anon>:7:34: 8:5 error: type `[<VI4>, .. 5]` does not implement any method in scope named `idx`
[10:53:16] -rusti- <anon>:7          let v = [1, 2, 3, 4, 5]; v.idx(5)
[10:53:16] -rusti- <anon>:8     };
[10:53:16] -rusti- error: aborting due to previous error
[10:53:16] -rusti- application terminated with error code 101
[10:53:30] <tikue_> rusti: let v = [1, 2, 3, 4, 5]; v.iter().idx(5)
[10:53:32] -rusti- pastebinned 16 lines of output: http://sprunge.us/SVTJ
[10:53:32] <dbaupp> hm: if i < v.index() { Some(v[i]) } else { None }
[10:53:59] <tikue_> rusti: let v = [1, 2, 3, 4, 5]; let it = v.iter(); it.idx(5)
[10:54:00] -rusti- pastebinned 16 lines of output: http://sprunge.us/cfHO
[10:54:26] <dbaupp> hm: gah, `v.len()`, not v.index()
[10:54:44] *** Joins: sergi (textual@moz-DB55470C.upc-a.chello.nl)
[10:55:08] <tikue_> hm: what's your use case? perhaps there's another way that rust makes easier right now
[10:55:59] <hm> tikue_: my use case was getting cmd line arg[1] if present, but not bombing out if not
[10:56:46] <hm> dbaupp: thanks, that'd probably do the trick. seems slightly surprising there's no stdlib method for doing that
[10:57:20] <tikue_> hm: you should add it :)
[10:57:25] <tikue_> idx_opt or something
[10:57:31] <tikue_> hm: but for now you can do this
[10:57:40] <hm> exactly, that's what i was thinking
[10:57:45] <hm> i'll submit a pr then :)
[10:57:53] *** Joins: nkoep (nik@moz-1A45C073.vpn.rwth-aachen.de)
[10:58:00] <tikue_> rusti: let v = ~[1, 2, 3, 4, 5]; let it = v.iter(); println!("{:?}", it.idx(5));
[10:58:01] -rusti- None
[10:58:01] -rusti- ()
[10:58:05] <dbaupp> rusti: let v = [1, 2, 3, 4, 5]; println!("{} {}" ,v.iter().idx(5), v.iter().idx(2));
[10:58:06] -rusti- pastebinned 10 lines of output: http://sprunge.us/YdDO
[10:58:11] <tikue_> beatcha
[10:58:22] <dbaupp> rusti: let v = [1, 2, 3, 4, 5]; println!("{:?} {:?}" ,v.iter().idx(5), v.iter().idx(2));
[10:58:23] -rusti- None Some(&3)
[10:58:23] -rusti- ()
[10:58:33] *** Joins: mdup (mdup@moz-2989B319.rev.numericable.fr)
[10:58:43] * dbaupp bows to the superiority of tikue_
[10:58:48] <tikue_> :P
[10:59:02] <tikue_> hm: though in the end you're still going to do a match :P so you're not really saving any keystrokes
[10:59:19] <tikue_> though idx_opt should definitely exist imo
[10:59:46] <tikue_> (as an aside, all the various vector traits make going through the docs a mild pain)
[10:59:49] *** Quits: mdup (mdup@moz-2989B319.rev.numericable.fr) (Input/output error)
[11:00:48] <dbaupp> tikue_: why a match? option has a pile of adaptor methods
[11:00:55] <hm> tikue_: true, but if you use something like unwrap_or then you might save some keystrokes
[11:01:09] <tikue_> hm, dbaupp: quite right
[11:01:19] <tikue_> option has a stupendous amount of adaptor methods
[11:01:19] <hm> ok, i'll definitely submit a pr then
[11:01:37] <dbaupp> <3 strcat's option reorganisation
[11:01:43] <tikue_> dbaupp: totally agreed
[11:01:47] <tikue_> what's the status on that
[11:01:53] <tikue_> any consensus?
[11:02:28] <tikue_> Some(3i).or_else(|| fail!())
[11:02:32] <tikue_> rusti: Some(3i).or_else(|| fail!())
[11:02:32] -rusti- Some(3)
[11:02:56] <dbaupp> tikue_: waiting for this weeks meeting to discuss
[11:03:00] *** Joins: Earnestly (earnest@moz-BE290A2B.dyn.plus.net)
[11:03:13] <tikue_> cool
[11:03:23] *** tikue_ is now known as tikue_sleep_question_mark
[11:03:28] *** Quits: tikue_sleep_question_mark (tkuehn@4245E30A.E2CAEE6E.689607DE.IP) (Quit: tikue_sleep_question_mark)
[11:03:43] *** Quits: dew (Instantbir@moz-EEE6B2F8.dhcp.stls.mo.charter.com) (Ping timeout)
[11:04:09] *** Joins: dew (Instantbir@moz-EEE6B2F8.dhcp.stls.mo.charter.com)
[11:04:10] <hm> in terms of naming, do you have a preference between get_opt and idx_opt?
[11:08:04] *** Joins: valenting (Thunderbir@55FBCC0.8C025854.E16F0CF5.IP)
[11:08:42] <Earnestly> hm: Which conveys the the most amount of information?
[11:09:31] *** Quits: tefter (tefter@B5D119DC.B856A0A1.73804765.IP) (Ping timeout)
[11:09:50] *** Quits: pyrac (pyrac@moz-1C318C84.w92-162.abo.wanadoo.fr) (Quit: pyrac)
[11:10:42] *** Quits: sergi (textual@moz-DB55470C.upc-a.chello.nl) (Quit: Computer has gone to sleep.)
[11:11:48] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[11:12:14] *** Quits: lhatsk (Adium@moz-760822D4.pool.mediaways.net) (Quit: Leaving.)
[11:14:46] *** Quits: sebcrozet (sebcrozet@moz-7FB6C00B.w193-252.abo.wanadoo.fr) (Quit: Gone)
[11:16:29] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[11:18:09] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[11:19:03] *** Joins: jviereck (Adium@moz-4C9C4638.dip0.t-ipconnect.de)
[11:21:05] *** Joins: CarpNet (Alasdair@moz-EF831A5E.cable.virginmedia.com)
[11:22:28] *** Quits: jviereck (Adium@moz-4C9C4638.dip0.t-ipconnect.de) (Quit: Leaving.)
[11:22:52] <heftig_> rusti: None.expect("oh noez")
[11:22:53] -rusti- pastebinned 10 lines of output: http://sprunge.us/NPaH
[11:23:16] *** Joins: mib2 (Mibbit@moz-5A71125.sub-70-209-2.myvzw.com)
[11:24:05] <bjz> rusti: None::<int>.expect("oh noez")
[11:24:06] -rusti- task '<unnamed>' failed at 'oh noez', /build/rust-git/src/rust/src/libstd/option.rs:351application terminated with error code 101
[11:24:14] <bjz> heftig_: ^
[11:24:32] <bjz> heftig_: needs to know what the type parameter is
[11:24:43] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[11:24:45] *** Joins: pyrac (pyrac@moz-1C318C84.w92-162.abo.wanadoo.fr)
[11:26:18] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[11:26:40] <mib2> Is there a way to cast *mut c_int to *mut c_void?
[11:26:55] *** Quits: Ms2ger (Ms2ger@9D0A393.CB23CDC6.3773EA9F.IP) (Ping timeout)
[11:29:02] <dbaupp> rusti: use std::libc::{c_int, c_void}; let x = 0 as *mut c_int; x as *mut c_void
[11:29:03] -rusti- (0x0 as *mut ())
[11:29:21] <dbaupp> mib2: ^
[11:29:38] <mib2> Hmmm. I thought I tried `as`.  Let me try it again...
[11:32:58] *** Joins: canhtak (jeremy@877D54DD.7A8E554D.FC900DAF.IP)
[11:33:40] <mib2> dbaupp and rusti:  What I am trying to do is pass a pointer to a mut c_int to a C function that will write a value into it.
[11:34:10] <mib2> This C function takes a void *, though, because depending on the values of other parameters, it can treat the pointer as a different pointer type.
[11:34:21] <mib2> So I have `let mut x: c_int = 0;`
[11:34:56] <mib2> When I try `&mut x` I get expected `*mut std::libc::types::common::c95::c_void` but found `&mut i32`
[11:35:48] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[11:36:09] <mib2> let x_ptr: *mut c_void = (&mut x) as *mut c_void;
[11:36:14] <mib2> same error
[11:37:05] <dbaupp> rusti: use std::libc::*; let mut x: c_int = 0; let x_ptr: *mut c_void = (&mut x) as *mut c_int as *mut c_void; x_ptr
[11:37:06] -rusti- (0x7f3f5ca29154 as *mut ())
[11:37:55] <dbaupp> mib2: &mut T and *mut S are different types, but if (and only if) T and S are the same type, you can cast &mut -> *mut, and from there you can cast to whatever you want.
[11:38:06] <dbaupp> (differnt types even if T == S)
[11:38:19] <mib2> dbaupp: Ah! Thank you, that worked!
[11:38:45] <mib2> &mut T and *mut S being different makes sense.
[11:39:40] <dbaupp> & -> *  happens automatically in some contexts, e.g. f(&mut x) will coerce to *mut if f takes *mut, but it's not automatic with `as`
[11:41:35] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[11:41:44] <mib2> I have another question.
[11:42:18] <mib2> I have a struct method taking a str with templated lifetime: `s: &'a str`
[11:42:20] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[11:42:44] <mib2> I want to put this into a different struct.
[11:43:14] <mib2> pub struct Foo { priv s: &'a str }
[11:43:30] <mib2> But I get the error: Illegal lifetime 'a: only 'self is allowed as part of a type declaration
[11:44:22] <dbaupp> pub struct Foo<'self> { priv s: &'self str }
[11:44:38] *** Joins: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP)
[11:45:04] <dbaupp> then Foo basically acts like a borrowed pointer, except you write Foo<'a> rather than &'a T
[11:45:25] *** Joins: Ms2ger (Ms2ger@9D0A393.CB23CDC6.3773EA9F.IP)
[11:45:27] <mib2> Oh. Does this limit how I can use Foo?
[11:45:52] <mib2> I mean, if my `s` is a owned ptr ~str
[11:46:08] <mib2> Can I only use owned boxes for Foo?
[11:46:43] <dbaupp> I don't understand the question, but you can use Foo with &str whereever you can use &str
[11:48:08] <mib2> dbaupp: Yeah, sorry, that question was terrible. I just tried Foo and I did not get an error, so I guess what I am trying to do is okay.
[11:48:19] <mib2> err Foo<'a>
[11:49:31] <dbaupp> yup, if you're returning that constructed from a &'a str arg, that's correct.
[11:49:38] *** Quits: Liothen (liothen@moz-266BCA86.spkn.qwest.net) (Quit: Textual IRC Client: www.textualapp.com)
[11:50:40] *** Quits: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[11:52:30] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[11:52:39] *** Quits: squiddy (squiddy@moz-543CC057.adsl.alicedsl.de) (Ping timeout)
[11:52:50] *** Joins: fabiand (fabiand@moz-286C0087.adsl.alicedsl.de)
[11:53:06] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[11:54:52] *** Quits: fabiand (fabiand@moz-286C0087.adsl.alicedsl.de) (Quit: Verlassend)
[11:56:15] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[11:57:40] *** Joins: Kruppe (user@67DC0089.80DA567B.66C78069.IP)
[12:01:51] *** Quits: mindcat (mindcat@6B5E55D0.7EE3DE8.F956842C.IP) (Quit: Lost terminal)
[12:02:37] *** Quits: Kruppe (user@67DC0089.80DA567B.66C78069.IP) (Ping timeout)
[12:03:14] <mib2> Does rust support default parameter values?
[12:04:24] *** Quits: pyrac (pyrac@moz-1C318C84.w92-162.abo.wanadoo.fr) (Quit: pyrac)
[12:04:42] <mib2> I tried `param: int = 0`, but this did not work. Also, I tried overloading, but rust does not allow this?
[12:05:58] <ChrisMorgan> Rust does not support default parameter values.
[12:06:05] <ChrisMorgan> Nor does it support overloading of that form.
[12:06:35] <ChrisMorgan> Default parameter values are likely to come at some point, but stabilising the language is at present a higher priority.
[12:08:02] <dbaupp> mib2: https://github.com/mozilla/rust/issues/6973#issuecomment-22502982 gives a workaround
[12:09:38] <dbaupp> mib2: and yes, Rust only offers overloading via traits.
[12:09:50] *** Quits: Earnestly (earnest@moz-BE290A2B.dyn.plus.net) (Ping timeout)
[12:10:20] <mib2> Okay
[12:10:46] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[12:11:19] <mib2> Well, in my case it's not that bad. I kind of like the more explicit method names.
[12:11:58] <mib2> I am trying to call a static function, but I do not know the syntax.
[12:12:42] <ChrisMorgan> Function, or static method?
[12:12:48] <mib2> So I have struct Foo with static functions `fn do_stuff() -> Foo` and `fn do_stuff_with_stuff(x: int) -> Foo`
[12:12:51] <dbaupp> what's a "static function", a function declared in an impl but without a `self` arg?
[12:12:59] <ChrisMorgan> Foo::do_stuff()
[12:13:01] <mib2> Oh, static method.
[12:14:13] <mib2> ChrisMorgan: Thank you
[12:15:06] *** Joins: threecreepio (jdp@moz-9C11F46E.cust.bredbandsbolaget.se)
[12:16:52] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[12:18:38] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[12:19:03] *** Joins: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[12:19:50] <mib2> If I have `struct Foo<'self> { s: &'self str }`, how do I create an instance?
[12:20:00] <ChrisMorgan> Foo { s: ... }
[12:20:09] <mib2> I tried `return Foo<'a> { s: s}`, but I get an error
[12:20:16] <ChrisMorgan> No lifetime marker.
[12:20:27] <dbaupp> skip the <'a>, rustc infers it fomr the s
[12:20:30] <dbaupp> *from
[12:20:43] <mib2> I see.
[12:20:51] <ChrisMorgan> A common convention is to have a static method called `new`.
[12:21:20] <mib2> Yes, I am attempting writing a `new` static method :)
[12:21:50] <ChrisMorgan> If you haven't read the Rust tutorial and main reference: they're well worth while reading.
[12:22:01] <dbaupp> rusti: struct Foo<'self> { s: &'self str } impl<'self> Foo <'self> { fn new<'a>(s: &'a) -> Foo<'a> { Foo { s: s } } } static s: &'static str = "foo"; Foo::new(s)
[12:22:02] -rusti- pastebinned 4 lines of output: http://sprunge.us/UTiA
[12:22:13] <dbaupp> rusti: struct Foo<'self> { s: &'self str } impl<'self> Foo <'self> { fn new<'a>(s: &'a str) -> Foo<'a> { Foo { s: s } } } static s: &'static str = "foo"; Foo::new(s)
[12:22:14] -rusti- pastebinned 5 lines of output: http://sprunge.us/XiUO
[12:22:46] <dbaupp> rusti: struct Foo<'self> { s: &'self str } impl<'self> Foo <'self> { fn new<'a>(s: &'a str) -> Foo<'a> { Foo { s: s } } } static STATICS_MAKE_CONFUSING_ERROR_MESSAGES: &'static str = "foo"; Foo::new(STATICS_MAKE_CONFUSING_ERROR_MESSAGES)
[12:22:48] -rusti- main::Foo<>{s: "foo"}
[12:23:13] <mib2> I really like the tutorial. It is excellent writing.
[12:23:42] <mib2> I like the manual, too, but it is a little more terse :)
[12:23:59] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[12:24:00] *** Joins: Kruppe (user@67DC0089.80DA567B.66C78069.IP)
[12:24:16] <dbaupp> it's also a little more incorrect unfortunately
[12:24:31] <ChrisMorgan> dbaupp: Pro-Tip: send PMs to rusti, then when you've got it right post in-channel and you get to look good for getting it right first time ;-)
[12:24:40] <dbaupp> (the tutorial is also less correct that it could be in places, fwiw)
[12:25:14] <dbaupp> ChrisMorgan: I was just, err, demonstrating some possible pitfalls.
[12:25:25] *** Quits: victorporof (victorporo@35F65A40.E0F96B01.D111398B.IP) (Quit: victorporof)
[12:25:44] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[12:25:55] <ChrisMorgan> I'm trying to figure out that second failure; what actually went wrong there?
[12:26:12] <dbaupp> statics are allowed in pattern matches
[12:26:24] *** Quits: raze (raze@moz-4E6675AF.bredband.comhem.se) (Quit: Nighty night.)
[12:26:25] <ChrisMorgan> ... and arguments are pattern matches.
[12:26:28] <dbaupp> yup
[12:26:46] <dbaupp> rusti: static foo: int = 1; let foo = "bar";
[12:26:47] -rusti- <anon>:7:34: 7:37 error: only refutable patterns allowed here
[12:26:47] -rusti- <anon>:7          static foo: int = 1; let foo = "bar";
[12:26:47] -rusti-                                            ^~~
[12:26:47] -rusti- error: aborting due to previous error
[12:26:47] -rusti- application terminated with error code 101
[12:26:54] <dbaupp> bam, confusion all around
[12:27:07] <ChrisMorgan> Yeah, I do seem to recall hitting that a month or two ago.
[12:27:17] * dbaupp added a lint to make UPPERCASE_STATICS for precisely this reason, but it's allow by default
[12:27:18] *** Joins: fmt (Mibbit@moz-5769BD38.static.tpgi.com.au)
[12:27:31] <ChrisMorgan> Why allow?
[12:27:34] <fmt> hey :) 
[12:27:42] <ChrisMorgan> Hey, fmt!
[12:28:04] <dbaupp> ChrisMorgan: because people did want the compiler tell 'em what to do
[12:28:10] <fmt> so, syntax highlighting for Rust? :)
[12:28:23] <dbaupp> fmt: you're just in time for fmt! to be replaced by format!
[12:28:23] <fmt> looking for vim
[12:28:31] <ChrisMorgan> fmt: src/etc/vim
[12:28:32] <dbaupp> fmt: in src/etc/vim/
[12:28:40] <fmt> oh my 
[12:28:44] <dbaupp> or https://github.com/wting/rust.vim
[12:28:52] <dbaupp> (if you're using a package manager)
[12:28:59] <fmt> I didn't get chided out for asking for syntax highlighting.
[12:29:11] * dbaupp loves his colours
[12:29:12] <ChrisMorgan> Why would we chide for that? We're nice!
[12:30:24] * ChrisMorgan doesn't understand the "syntax highlighting is for wimps" attitude at all
[12:31:01] <mib2> I *wish* TextWrangler had Rust highlighting.
[12:31:24] <dbaupp> ChrisMorgan: "it's a crutch that gets in the way of understanding the code"
[12:31:45] <ChrisMorgan> Bah.
[12:31:51] <dbaupp> mib2: do you know if/the format to add syntax highlighting to it?
[12:32:03] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[12:32:35] <mib2> Well, TextWrangler is a freeware version of BBEdit.
[12:33:04] <mib2> They would prefer if users upgraded, so I am not sure if I can add a syntax format.
[12:33:11] <mib2> I don't know, though.
[12:33:59] <dbaupp> looks like you might be able to (e.g. http://renderingpipeline.com/2012/12/glsl-syntax-highlighting-for-textwrangler-bbedit/)
[12:34:32] * ChrisMorgan writes Vim syntax/&c. files for fun whenever he hits unhighlighted things
[12:34:40] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[12:35:38] <mib2> dbaupp: Hallelujah
[12:35:39] <dbaupp> mib2: if you feel like it, there's emacs, vim, kate and gedit files in src/etc/<editorname>/ which you could base a highlighting file off (assuming it's xml/regex based, I guess kate or gedit would be the easiest)
[12:36:25] *** Joins: sergi (textual@moz-DB55470C.upc-a.chello.nl)
[12:36:30] <mib2> Yeah. I am definitely going to work on one.
[12:38:07] <mib2> I have a struct Bar: `struct Bar { intvec: ~[int] }`
[12:38:19] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[12:38:38] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[12:38:39] <mib2> I also have `let myvec: ~[int] = with_capacity(20)`
[12:38:51] <mib2> I want to create a Bar with a slice of `myvec`
[12:39:11] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[12:39:17] <mib2> I tried: `Bar { intvec: myvec.slice_to(10) }`
[12:39:52] <mib2> But this results in an error: mismatched types: expected `~[i32]` but found `&[i32]` ([] storage differs: expected ~ but found &)
[12:40:08] <mib2> (Actually, the type is ~[c_int], but you get the idea.)
[12:40:08] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[12:40:08] <ChrisMorgan> A slice is &[int]; you then want .to_owned()
[12:40:44] <mib2> ChrisMorgan: Thanks!
[12:40:50] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[12:41:09] <ChrisMorgan> Realise that that will copy the contents of the slice.
[12:41:23] <mib2> I was just about to ask that :)
[12:41:23] <ChrisMorgan> (Thus cloning each item.)
[12:41:56] <mib2> Is there a way to have a slice that is like a view into an existing vector?
[12:41:58] <ChrisMorgan> ~[c_int] means that it owns all the c_ints, so they've got to be cloned.
[12:42:05] <ChrisMorgan> That's what the &[c_int] is.
[12:42:32] *** Joins: xitology (xi@85437D54.5AFA3E4.CEDFC552.IP)
[12:42:35] <mib2> I can't put that into my struct Bar, right?
[12:42:54] <ChrisMorgan> Sure, though you'll need the 'self lifetime on the struct
[12:43:09] <ChrisMorgan> struct Bar<'self> { intvec: &'self [int] }
[12:44:34] <mib2> Hrmm. I am already using 'self for something else.
[12:46:12] <dbaupp> lifetime names don't have to be unique
[12:47:34] *** Quits: sergi (textual@moz-DB55470C.upc-a.chello.nl) (Quit: Computer has gone to sleep.)
[12:48:11] <mib2> I am not sure that I understand. For now, I'll just put a TODO comment in my code to remind me about this.
[12:49:19] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[12:50:51] *** Joins: pyrac (pyrac@moz-1C318C84.w92-162.abo.wanadoo.fr)
[12:54:54] <fmt> now I just need a tutorial geared towards either a Python or Java programmer.
[12:56:15] <mib2> How do I specify a library dir when running `rust test`?
[12:56:33] <mib2> I am seeing: dyld: lazy symbol binding failed: Symbol not found
[12:56:44] <mib2> (I am on a Mac.)
[12:57:15] <dbaupp> fmt: does the http://static.rust-lang.org/doc/master/tutorial.html tutorial count? :)
[12:58:22] *** Quits: slackito (slackito@moz-7779E4A6.dyn.user.ono.com) (Quit: leaving)
[12:58:29] *** Joins: squiddy (squiddy@moz-543CC057.adsl.alicedsl.de)
[12:59:32] <xitology> what is the easiest way to do scanf in rust? for instance, scanf("%d %f %f", &n, &x, &y)?
[12:59:57] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[13:04:23] <fmt> dbaupp: nuu
[13:08:08] <dbaupp> fmt: well, learn rust and then write one yourself :P
[13:08:27] <dbaupp> there's http://www.rustforrubyists.com/ which is pretty good even for non-rubyists
[13:08:57] <dbaupp> xitology: there isn't an easy one yet: you're reduced to something like:
[13:09:37] <fmt> yeah I know ruby too, so that'll work for me
[13:09:38] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[13:09:54] <fmt> I find when I learn a new language the fastest way for me to transition is to learn what maps with languages I'm familiar with immediately.
[13:10:23] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[13:11:06] <dbaupp> rusti: let s = "10 1.2 1.3"; let mut it = s.split_iter(' '); match (it.next().and_then(from_str::<int>), it.next().and_then(from_str::<float>), it.next().and_then(from_str::<float>)) { (Some(a), Some(b), Some(c)) => (a,b,c), _ => fail!("invalid formatting") }
[13:11:07] -rusti- (10, 1.2, 1.3)
[13:11:32] <dbaupp> xitology: ^ (that splits on ' ', and then calls from_str on the first 3 splits)
[13:11:32] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[13:11:32] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[13:11:51] <dbaupp> rusti: let s = "invalid numbers"; let mut it = s.split_iter(' '); match (it.next().and_then(from_str::<int>), it.next().and_then(from_str::<float>), it.next().and_then(from_str::<float>)) { (Some(a), Some(b), Some(c)) => (a,b,c), _ => fail!("invalid formatting") }
[13:11:53] -rusti- task '<unnamed>' failed at 'invalid formatting', <anon>:7application terminated with error code 101
[13:12:07] <xitology> dbaupp: yeah, got it... thanks!
[13:12:22] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[13:17:15] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[13:18:55] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[13:19:50] *** Joins: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com)
[13:20:13] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[13:21:09] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[13:22:53] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[13:23:27] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[13:23:27] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[13:24:12] <dbaupp> mib2: btw, https://github.com/mozilla/rust/wiki/Doc-packages,-editors,-and-other-tools#editors
[13:24:26] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[13:24:41] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[13:24:58] <dbaupp> mib2: https://github.com/erikrose/rust-bbedit-plugin although it's 2 years old so will need some *serious* updating to be usable in this modern age
[13:25:38] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[13:26:51] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[13:27:19] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[13:29:07] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Ping timeout)
[13:30:37] *** Joins: kvark (Mibbit@F21FE202.8C19BC3D.26E1259.IP)
[13:32:15] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[13:32:20] *** Quits: hm (Mibbit@moz-540687FF.range86-182.btcentralplus.com) (Quit: http://www.mibbit.com ajax IRC Client)
[13:32:28] *** Joins: q66_ (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[13:32:54] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[13:33:25] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[13:35:15] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[13:35:54] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[13:37:33] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[13:38:58] *** Joins: victorporof (victorporo@16E89FDD.B0D0881A.79933D60.IP)
[13:39:33] *** Joins: pnkfelix1 (pnkfelix@moz-43495417.fbx.proxad.net)
[13:40:10] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[13:41:02] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[13:41:14] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[13:41:30] *** Quits: masondesu (masondesu@moz-75054A8B.gsp.bellsouth.net) (Ping timeout)
[13:46:37] *** Joins: masondesu (masondesu@moz-75054A8B.gsp.bellsouth.net)
[13:47:37] *** Quits: Kruppe (user@67DC0089.80DA567B.66C78069.IP) (Ping timeout)
[13:49:25] *** Joins: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP)
[13:50:47] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[13:51:50] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[13:55:43] *** Quits: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[13:55:44] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[13:56:19] *** Joins: Kruppe (user@67DC0089.80DA567B.66C78069.IP)
[13:56:26] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[13:57:38] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[13:57:57] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[13:58:03] *** Joins: siavashserver (siavash@886BADB8.E43E3ED2.82A25C10.IP)
[13:58:31] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[14:00:47] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[14:01:19] <siavashserver> Hello. Is it possible to output of compiled rust codes assembly? Something like "--save-temps" in GCC.
[14:01:26] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[14:01:30] <siavashserver> *to see
[14:01:40] *** Parts: kvark (Mibbit@F21FE202.8C19BC3D.26E1259.IP) ()
[14:02:42] <bjz> siavashserver: we have a --save-temps flag on rustc
[14:03:00] <bjz> also --emit-llvm
[14:03:08] <siavashserver> bjz: That's cool. Thank you :)
[14:03:18] <bjz> no worries :)
[14:03:18] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[14:03:33] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[14:03:56] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[14:03:58] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Ping timeout)
[14:05:55] *** Joins: raze (raze@moz-4E6675AF.bredband.comhem.se)
[14:07:02] <fmt> so an implementation is like a class
[14:07:24] *** Joins: LowPotential (user@moz-B721E318.pitbpa.fios.verizon.net)
[14:08:42] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[14:10:50] <LowPotential> Hello all. Question about rustpkg. I have a workspace which consists of a library foo (src/foo/lib.rs), a server (src/foo-server/main.rs), and a client (src/foo-client/main.rs). In rustpkg terms, these are all distinct packages, right? However, if the library, client, and server were to all be included in the same workspace on GitHub (for instance) and I were to "rustpkg install" it, would the package manager install all three as a
[14:10:50] <LowPotential> single package?
[14:12:47] *** Quits: mib2 (Mibbit@moz-5A71125.sub-70-209-2.myvzw.com) (Quit: http://www.mibbit.com ajax IRC Client)
[14:12:48] <steveklabnik> hey LowPotential 
[14:13:16] <steveklabnik> it depends. ideally, you shouldn't need to do rustpkg install; when you extern mod a package, you should provide the URL to where it comes from
[14:13:31] <steveklabnik> then when you build your project, it will automatically go fetch all of that
[14:13:50] <steveklabnik> i am 80% sure that when you install it, it will only install one of the three.
[14:13:51] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[14:13:59] <steveklabnik> they're all in the same workspace, but are different packages
[14:14:03] <steveklabnik> does that make sense?
[14:14:52] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[14:15:45] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[14:15:53] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[14:16:04] *** Joins: mindcat (mindcat@6B5E55D0.7EE3DE8.F956842C.IP)
[14:17:11] <LowPotential> steveklabnik: I think so. I'm still trying to wrap my head around how rustpkg is supposed to be used.
[14:17:38] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[14:17:47] <steveklabnik> did you see the new tutorial?
[14:18:14] <steveklabnik> http://static.rust-lang.org/doc/master/tutorial-rustpkg.html
[14:18:16] <steveklabnik> might help
[14:18:46] <steveklabnik> i need to write the 'extern mod points at a package id' bit that i just told you though
[14:18:49] <steveklabnik> re-skimming it
[14:19:07] <steveklabnik> rustpkg is still being sorted out, so some things are still a bit fuzzy
[14:19:29] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[14:20:05] <LowPotential> steveklabnik: Yup, that's what I'm following. I guess my remaining questions are about workspaces that are completely local (without the intent to publish, or maybe to make that decision later).
[14:20:43] <LowPotential> So, if I want to reference the library (foo) in the client code, what I have now (and what seems to work) is to just have "extern mod foo" in src/foo-client/main.rs.
[14:21:03] <steveklabnik> check out https://github.com/steveklabnik/redis
[14:21:03] <LowPotential> Then I do "rustpkg build foo-client", and it appears to build the library "foo" appropriately.
[14:21:11] <steveklabnik> which is nowhere near a working implementation of redis ;)
[14:21:23] *** Joins: phaer (user@moz-8B932D8B.home.otenet.gr)
[14:21:26] <steveklabnik> but it has an example and what will become the client code
[14:21:44] <steveklabnik> i believe that you are doing the right thing
[14:21:50] <steveklabnik> and the same thing as i just pasted
[14:21:53] *** Quits: GeneralMaximus (ankur@21779A10.6F4D4287.BE90E62C.IP) (Ping timeout)
[14:22:10] <steveklabnik> tjc is who is in charge of rustpkg; they're not around now, but always the best person to ask
[14:24:13] <LowPotential> steveklabnik: Ah, okay. One last question which you may be able to answer. If I wanted to install the binaries of a rust package to my system (so to a certain prefix), it seems like that's outside the scope of rustpkg and the domain of package managers. Is that the right way to see things?
[14:24:38] *** Joins: Jesin (Jessin_@moz-394702A3.cc.lehigh.edu)
[14:24:49] <LowPotential> steveklabnik: Or is rustpkg supposed to handle that too?
[14:24:53] *** Quits: fmt (Mibbit@moz-5769BD38.static.tpgi.com.au) (Quit: http://www.mibbit.com ajax IRC Client)
[14:25:00] <steveklabnik> at this time it most certainly doesn't.
[14:25:11] <steveklabnik> i'm not sure if that was decided upon
[14:25:21] <steveklabnik> well....hmmmm
[14:25:38] *** Joins: GeneralMaximus (ankur@98B9F57.BE5187B7.274D17D6.IP)
[14:25:50] <dbaupp> I imagine that there might be a `rustpkg install --global <name>` option at some point
[14:25:56] <steveklabnik> i think you could today with a special pkg.rs
[14:26:05] <steveklabnik> and i THINK there's a way to pass flags through...
[14:26:14] <steveklabnik> but yeah, i'm sure that will be there someday.
[14:26:19] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[14:26:45] *** Joins: sinma (sinma@moz-6A11C47C.fbx.proxad.net)
[14:27:02] <sinma> Hi, are there any convention for Rust code regarding tabs and spaces?
[14:27:11] <steveklabnik> four spaces, no tabs
[14:27:24] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[14:27:45] <steveklabnik> https://github.com/mozilla/rust/wiki/Note-style-guide <- a bit old, but still good
[14:27:53] <sinma> damn, why so much people love spaces
[14:27:54] <LowPotential> steveklabnik dbaupp: Got it. Thanks!
[14:28:35] <steveklabnik> sinma: everyone sees the exact same thing
[14:28:48] <steveklabnik> LowPotential: any time. there isn't that much code in rustpkg, you should check it out if you're interested
[14:29:52] *** Quits: siavashserver (siavash@886BADB8.E43E3ED2.82A25C10.IP) (Ping timeout)
[14:30:14] <sinma> steveklabnik: as long as you can agree on a number of spaces, you can agree on a size for tabs, no? But I understand that’s the conventation in many many language, so…
[14:30:50] <steveklabnik> sinma: yeah, to be clear, that's my personal opinion about why spaces > tabs.
[14:31:11] <steveklabnik> i also come to rust from Ruby, so I find the four spaces a bit wide. it doesn't take long to adjust
[14:31:27] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[14:31:33] <LowPotential> steveklabnik: I might try to get involved in some capacity, but it would be as a novice. I have to decide if my schedule and other commitments allow for it as well, but the interest is certainly there.
[14:31:38] <steveklabnik> my editor inserts spaces when I hit the tab key
[14:32:04] <steveklabnik> LowPotential: rust's community is incredibly novice friendly. you should see the dumb questions i ask in here all the time ;)
[14:32:11] <sinma> steveklabnik: the only drawback I see for tabs is with web browsers and the like, almost impossible to enter a tabulation
[14:32:11] <steveklabnik> so swing by when you have the time
[14:32:14] <steveklabnik> the more the merrier
[14:32:55] <LowPotential> steveklabnik: Will do. :)
[14:32:58] <steveklabnik> sinma: this topic generally just ends in tears, so I'd rather just leave it where it is. I get where you're coming from, and I agree, that is one of the downsides of tabs.
[14:33:01] <sinma> LowPotential: I agree with steveklabnik, I ask dumb questions all the time
[14:33:55] <sinma> stevelabknik: I’m relatively new in the world of dev so it’s always interesting to why things are what they are
[14:34:08] <sinma> *to know
[14:34:16] <engla> With only spaces you don't have to deal with tabs + spaces for alignment
[14:34:43] <steveklabnik> sinma: ahhh, yeah. this is one of those discussions that people are extra passionate about. it generally gets really heated and everyone ends up unhappy
[14:34:44] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[14:34:58] <steveklabnik> and it's 7:30am here so I don't want to start my day off being unhappy. ;)
[14:35:04] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[14:36:11] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[14:36:34] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[14:36:39] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[14:36:54] <sinma> steveklabnik (sorry for mispelling your pseudo previously): I don’t care about tabs vs spaces (even if spaces are a little bit less pratictal), just curiosity!
[14:36:59] <steveklabnik> absolutely
[14:37:03] <steveklabnik> no worries :)
[14:38:20] *** Joins: fmt (fmt@moz-5769BD38.static.tpgi.com.au)
[14:38:25] <sinma> steveklabnik: is Rust conventions writtent anywhere? There are conventions about naming but I didn’t found anything about spaces and tabs
[14:38:27] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[14:38:58] <steveklabnik> sinma: i pasted you a link up above, it says spaces, no tabs, but doesnt mention 4
[14:39:47] <sinma> steveklabnik: oooops, but I thinked about something in the doc (convention about Rust code in general, not only Rust itself)
[14:40:50] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[14:41:05] <dbaupp> the standard lib/compiler is exclusively 4 spaces + no tabs, and most other Rust code I've seen follows that.
[14:41:29] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[14:41:46] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[14:42:48] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[14:44:20] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[14:44:27] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[14:44:32] <fmt> any particularly mature UI bindings? curses for instance?
[14:44:40] <steveklabnik> nothing is mature ;)
[14:44:48] <steveklabnik> someone released wx bindings
[14:44:51] <steveklabnik> recntly
[14:44:54] <fmt> wx still exists?!
[14:45:15] <steveklabnik> apparently
[14:45:19] <fmt> wow
[14:45:23] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[14:45:49] <steveklabnik> https://mail.mozilla.org/pipermail/rust-dev/2013-September/005772.html
[14:46:14] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[14:46:16] <steveklabnik> rust has good FFI, bindings aren't hard. i'm not sure what else there is at the moment... there are a lot of graphical bindings, but not a lot of UI ones yet
[14:46:50] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[14:47:17] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[14:48:17] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[14:48:17] <sinma> fmt: wx is based on GTK, so most of the work is done in GTK
[14:48:37] <fmt> found a couple of ncurses wrappers on github
[14:48:42] <fmt> sinma: thanks
[14:49:26] <sinma> Maybe you use GTK, there is a Gobject binding generator
[14:49:30] <sinma> Or something like that
[14:49:31] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[14:50:06] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[14:50:21] <fmt> SDL: https://github.com/brson/rust-sdl/blob/master/demo/video.rs
[14:51:27] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[14:51:37] <steveklabnik> yup
[14:51:49] <steveklabnik> i think the sdl2 bindings are better?
[14:51:51] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[14:51:52] <fmt> somehow made SDL look pretty 
[14:51:55] <steveklabnik> i vaguely remmeber something about that?
[14:52:06] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[14:52:25] <fmt> SDL2: https://github.com/AngryLawyer/rust-sdl2/blob/master/demo/video.rs
[14:53:44] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[14:54:21] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[14:56:05] *** Quits: a__ (a__@moz-4CC03B10.nycmny.fios.verizon.net) (Client exited)
[14:56:12] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[14:56:20] *** Joins: a__ (a__@moz-4CC03B10.nycmny.fios.verizon.net)
[14:57:54] *** Joins: ross (ross@moz-5EA04060.br.br.cox.net)
[15:02:30] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[15:03:08] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[15:03:24] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[15:05:16] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[15:05:28] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[15:05:28] <myname> is there still a limitation about trait implementations like you have to define the trait or the struct in the same file?
[15:05:52] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[15:06:14] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[15:06:32] <dbaupp> myname: in the same crate, not the same file, but yes, that hasn't changed
[15:06:57] <myname> hmm
[15:07:10] <myname> have to look up how a crate is defined
[15:07:10] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[15:07:41] <dbaupp> crate is just the compilation unit
[15:07:49] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[15:08:05] <dbaupp> i.e. you run `rustc foo.rs` and the crate is the resulting lib/binary
[15:08:14] <myname> i see
[15:08:24] <myname> that sounds reasonable
[15:08:37] <dbaupp> (well, that's the compiled crate, the "source crate" is just all the files that foo.rs brings in via `mod`)
[15:09:34] <myname> since 0.8 is officially now i want to implement one of the ideas i was told here for learning
[15:09:35] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[15:09:52] <myname> *officially out
[15:09:59] *** Quits: mib_jovzre (Mibbit@moz-A74172D2.hsi13.kabel-badenwuerttemberg.de) (Quit: http://www.mibbit.com ajax IRC Client)
[15:10:10] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[15:10:55] <bjz> dbaupp: it's funny how we still acll them 'crates' even though cargo was retired ages ago
[15:10:59] <bjz> :)
[15:12:01] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[15:12:22] <dbaupp> <3 historical quirks
[15:13:40] <myname> so you are a fan of floppy disk symbols for save functions?
[15:15:13] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[15:15:15] <steveklabnik> heh
[15:15:35] <steveklabnik> that is one thing that i'd like to do someday... clean up stuff like that. old terms that don't make snese
[15:15:39] <steveklabnik> sense
[15:18:01] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[15:18:11] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[15:18:41] *** Quits: LowPotential (user@moz-B721E318.pitbpa.fios.verizon.net) (Client exited)
[15:18:50] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[15:19:48] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[15:22:59] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[15:23:44] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[15:24:56] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[15:25:13] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Connection reset by peer)
[15:25:53] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[15:25:54] *** Joins: maik (maik@moz-41A4E36A.dip0.t-ipconnect.de)
[15:26:03] *** Joins: lenstr_ (lenstr@AF8EB999.6049B16A.85938D85.IP)
[15:26:14] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[15:26:21] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[15:28:01] *** Joins: Ferreus (ferreus@moz-F0869777.dyn.telefonica.de)
[15:28:46] *** Joins: jdm (jdm@7F255D02.1B9223B5.AE2B2F80.IP)
[15:28:46] *** ChanServ sets mode: +o jdm
[15:29:02] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[15:29:14] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[15:29:37] *** Quits: lenstr_ (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[15:30:23] *** Quits: Ms2ger (Ms2ger@9D0A393.CB23CDC6.3773EA9F.IP) (Ping timeout)
[15:30:27] *** Quits: sinma (sinma@moz-6A11C47C.fbx.proxad.net) (Quit: Konversation terminated!)
[15:30:42] *** Joins: lenstr_ (lenstr@AF8EB999.6049B16A.85938D85.IP)
[15:30:53] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[15:33:16] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[15:34:38] *** Quits: StarLight (StarLight@moz-DBB2336A.dynamic.avangarddsl.ru) (Ping timeout)
[15:37:16] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[15:38:36] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Ping timeout)
[15:38:59] *** Joins: StarLight (StarLight@moz-3B2C1A39.dynamic.avangarddsl.ru)
[15:39:59] *** Joins: Demagog (misiek@moz-D6C49A87.goleniow.vectranet.pl)
[15:40:51] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[15:42:11] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[15:42:50] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[15:43:00] *** Quits: Demagog (misiek@moz-D6C49A87.goleniow.vectranet.pl) (Ping timeout)
[15:43:00] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[15:44:01] *** Joins: Demagog (misiek@moz-D6C49A87.goleniow.vectranet.pl)
[15:44:04] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[15:44:15] *** Joins: mib_fx149r (Mibbit@moz-F2E42C9D.hsd1.va.comcast.net)
[15:44:35] <mib_fx149r> is there a queue implementation in std?
[15:45:16] *** Quits: Kruppe (user@67DC0089.80DA567B.66C78069.IP) (Ping timeout)
[15:45:29] *** Joins: tefter (tefter@B5D119DC.B856A0A1.73804765.IP)
[15:45:41] <myname> aren't vectors queues?
[15:45:44] *** Joins: sergi (textual@moz-DB55470C.upc-a.chello.nl)
[15:45:58] <steveklabnik> depends on if you mean the basic data structure or ZeroMQ ;)
[15:46:12] <mib_fx149r> no vector isnt a queue
[15:46:24] <engla> mib_fx149r: there is extra::ringbuf for O(1) delete/insert at both ends
[15:46:25] <mib_fx149r> no efficient enqueue and dequeue 
[15:46:35] <myname> push and pop?
[15:46:36] <mib_fx149r> gotcha
[15:46:46] <myname> ah
[15:46:57] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[15:47:04] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[15:47:18] <engla> extra::ringbuf has the right algorithm, but the implementation is a bit silly (it's not as low level as vec, so it has a small bit of overhead)
[15:47:29] <myname> not sure if rust has haskell-like list construction pattern matching
[15:47:48] <myname> that'd be dequeue
[15:49:11] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Quit: Leaving.)
[15:49:13] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[15:49:18] *** Joins: Ms2ger (Ms2ger@9D0A393.CB23CDC6.3773EA9F.IP)
[15:49:55] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[15:50:09] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[15:50:14] <engla> Deque trait has two implementations in extra   http://static.rust-lang.org/doc/master/extra/container/trait.Deque.html
[15:50:22] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[15:51:55] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[15:52:34] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[15:53:42] *** Quits: SteveMcQwark (steven099@moz-7CFCF343.cpe.net.cable.rogers.com) (Ping timeout)
[15:54:07] *** Joins: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP)
[15:55:35] *** Joins: bytewise (bytewise@moz-4A801D04.unitymediagroup.de)
[15:55:36] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[15:56:22] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[15:57:03] *** Joins: Kruppe (user@67DC0089.80DA567B.66C78069.IP)
[15:58:02] *** Quits: derboi_c (derboi_c@510621FB.DF3CA0D0.BA2F4534.IP) (Ping timeout)
[15:58:28] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[15:58:48] *** Joins: five (five@moz-F45C65F8.v4.ngi.it)
[15:59:10] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[15:59:49] *** Quits: mikezaby (mikezaby@moz-908EA8DE.home.otenet.gr) (Input/output error)
[15:59:51] *** Quits: Jesin (Jessin_@moz-394702A3.cc.lehigh.edu) (Quit: Leaving)
[16:00:15] *** Quits: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[16:00:23] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[16:00:43] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[16:01:25] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[16:01:29] *** Joins: SteveMcQwark (steven099@moz-7CFCF343.cpe.net.cable.rogers.com)
[16:02:06] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[16:02:07] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[16:02:50] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[16:05:22] *** Joins: orshem (orshem@F0A9EA9.588A166C.E3D28531.IP)
[16:05:58] *** Joins: Amaranthus (travis@moz-F81BB56A.cpe.cableone.net)
[16:06:11] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Ping timeout)
[16:07:22] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Quit: Leaving)
[16:07:25] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[16:08:32] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[16:08:32] *** Quits: Kruppe (user@67DC0089.80DA567B.66C78069.IP) (Ping timeout)
[16:10:01] *** Joins: jdsanders (Adium@moz-F45527D6.hlrn.qwest.net)
[16:10:24] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[16:10:41] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[16:11:00] *** Joins: slackito (slackito@moz-7779E4A6.dyn.user.ono.com)
[16:11:22] <orshem> are there any example of how to use the new io?
[16:12:09] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[16:13:35] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[16:16:33] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[16:16:34] *** Quits: Demagog (misiek@moz-D6C49A87.goleniow.vectranet.pl) (Quit: Changing server)
[16:18:07] *** Joins: mib2 (Mibbit@moz-9C700C0E.sub-70-209-8.myvzw.com)
[16:18:24] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:20:03] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[16:20:03] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[16:22:10] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[16:22:50] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[16:23:09] *** Joins: olivier (chatzilla@moz-2811C56F.fbx.proxad.net)
[16:24:10] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[16:24:12] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[16:24:42] *** Joins: dluna (Mibbit@80CC1C4F.809247E8.F7D14508.IP)
[16:25:01] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[16:26:29] *** Quits: pyrac (pyrac@moz-1C318C84.w92-162.abo.wanadoo.fr) (Quit: pyrac)
[16:27:51] <jdsanders> So I have a library in `src/blah/lib.rs` and an `examples/example.rs` that does `extern mod blah`. How can I use rustpkg to install `blah` such that `example.rs` can use it, without having to push the project to github or somewhere
[16:28:19] *** Joins: Larry (larryfox@moz-1D59E114.nycmny.fios.verizon.net)
[16:30:45] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[16:33:00] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[16:33:57] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[16:35:40] *** Joins: victorporof_ (victorporo@16E89FDD.B0D0881A.79933D60.IP)
[16:35:53] <olivier> Hi, which gcc version do you use to compile the rust-0.8?
[16:37:02] *** Quits: victorporof (victorporo@16E89FDD.B0D0881A.79933D60.IP) (Ping timeout)
[16:37:13] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[16:38:05] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[16:39:46] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[16:39:52] *** Joins: siavashserver (siavash@BFE1785A.1921C094.82A25C10.IP)
[16:40:27] *** Quits: Larry (larryfox@moz-1D59E114.nycmny.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[16:40:37] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[16:41:11] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[16:42:00] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[16:42:42] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[16:43:13] *** Joins: derboi_c (derboi_c@510621FB.DF3CA0D0.BA2F4534.IP)
[16:44:24] <steveklabnik> olivier: i just compiled rust this morning, gcc version 4.7.2 (Debian 4.7.2-5) 
[16:45:15] <olivier> steveklabnik: thanks, I suspect (hope) that my problems come from the gcc version.
[16:46:04] *** Quits: derboi_c (derboi_c@510621FB.DF3CA0D0.BA2F4534.IP) (Ping timeout)
[16:46:33] *** Quits: maik (maik@moz-41A4E36A.dip0.t-ipconnect.de) (Ping timeout)
[16:46:34] <steveklabnik> i hope you can get this all sorted out :/
[16:47:11] *** Quits: SteveMcQwark (steven099@moz-7CFCF343.cpe.net.cable.rogers.com) (Quit: leaving)
[16:47:17] *** Joins: sinma (sinma@moz-6A11C47C.fbx.proxad.net)
[16:47:28] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[16:47:30] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Quit: jaen)
[16:48:09] <olivier> steveklabnik: thanks. If I succeed, I'll tell Heather and post an issue one github.
[16:48:57] <olivier> steveklabnik: gcc version is 4.6.3 on my computer.
[16:49:08] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[16:49:09] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Quit: jaen)
[16:49:11] <steveklabnik> interesting
[16:49:15] <steveklabnik> you're gentoo, yeah?
[16:49:45] <olivier> steveklabnik: yes. GCC build is a bit long on my old computer.
[16:50:05] <steveklabnik> makes sense.
[16:50:09] *** Joins: derboi_c (derboi_c@510621FB.DF3CA0D0.BA2F4534.IP)
[16:50:13] <steveklabnik> rust's build is a bit lon on everyone's computers ;)
[16:50:26] <siavashserver> Use rustc
[16:50:40] <olivier> steveklabnik: Same for rust. So the respond will be after two hours.
[16:50:43] <steveklabnik> ... can you elaborate?
[16:50:51] <steveklabnik> siavashserver: ^^^
[16:51:05] *** Joins: SteveMcQwark (steven099@moz-7CFCF343.cpe.net.cable.rogers.com)
[16:51:10] <siavashserver> steveklabnik: kidding :P
[16:51:12] <steveklabnik> ah :)
[16:51:41] <olivier> steveklabnik: llvm  embedded sources in rust are compiled with gcc, isn't it?
[16:52:02] <steveklabnik> I don't know, to be honest. 'make' has always Just Worked for me, I haven't paid it a lot of attention
[16:52:13] <steveklabnik> I mostly write documentation, so I only bother to recompile like once a week
[16:52:33] <olivier> I understand why you need ccache ;)
[16:52:40] <steveklabnik> oh yeah, how do you use ccache?
[16:52:46] <steveklabnik> ive seen people mention it but haven't tried it
[16:53:22] <olivier> I used when I updated often. Now, I update only when needed (computer too slow).
[16:54:04] <luisbg> steveklabnik, extra long when you need to build two versions of Rust if you want to play with Servo :P
[16:54:23] <steveklabnik> heh
[16:55:13] <jdsanders> doesn't rust's build process do one extra build that is only used for verifying the build?
[16:55:34] <jdsanders> is it possible to save some time by skipping that and assuming it would have verified?
[16:56:01] *** Joins: pyrac (pyrac@moz-1C318C84.w92-162.abo.wanadoo.fr)
[16:56:44] *** Quits: five (five@moz-F45C65F8.v4.ngi.it) (Ping timeout)
[16:57:19] *** Joins: maik (maik@moz-41A4E36A.dip0.t-ipconnect.de)
[17:00:18] *** Joins: reillyeon (reillyeon@moz-D5807178.hsd1.ca.comcast.net)
[17:00:51] *** Quits: pyrac (pyrac@moz-1C318C84.w92-162.abo.wanadoo.fr) (Quit: pyrac)
[17:01:18] *** Joins: jstevans (Instantbir@moz-735D8260.washdc.fios.verizon.net)
[17:02:14] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[17:03:27] *** Joins: Earnestly (earnest@moz-BE290A2B.dyn.plus.net)
[17:05:06] *** Quits: sinma (sinma@moz-6A11C47C.fbx.proxad.net) (Ping timeout)
[17:06:18] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[17:06:58] *** Joins: five (five@moz-F45C65F8.v4.ngi.it)
[17:07:08] *** Joins: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[17:07:49] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Ping timeout)
[17:08:02] *** Quits: nmatsakis (nmatsakis@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[17:08:08] *** Quits: AutomatedTester (David@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[17:08:08] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[17:08:09] *** Quits: lenstr_ (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[17:08:33] *** Quits: gavin (gavin@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[17:08:33] *** Quits: rhelmer (rhelmer@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[17:08:38] *** Quits: froydnj (nfroyd@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[17:09:25] *** Quits: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Ping timeout)
[17:11:16] *** Joins: dandy (Dandy@moz-84CC8377.hsd1.co.comcast.net)
[17:11:32] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[17:12:07] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[17:12:09] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[17:12:29] *** Joins: Lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net)
[17:12:30] *** Quits: Lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net) (Client exited)
[17:13:21] *** Joins: pyrac (pyrac@moz-1C318C84.w92-162.abo.wanadoo.fr)
[17:14:31] <c74d> Why are ~"strings" not allowed to be compared with "strings"?
[17:15:20] <steveklabnik> c74d: can you show me some code?
[17:15:38] <c74d> rusti: let s = ~"foo"; s == "foo"
[17:15:39] -rusti- <anon>:7:30: 7:35 error: mismatched types: expected `~str` but found `&'static str` (str storage differs: expected ~ but found &'static )
[17:15:39] -rusti- <anon>:7          let s = ~"foo"; s == "foo"
[17:15:39] -rusti-                                        ^~~~~
[17:15:40] -rusti- error: aborting due to previous error
[17:15:40] -rusti- application terminated with error code 101
[17:15:42] <c74d> rusti: let s = ~"foo"; s == ~"foo"
[17:15:43] -rusti- true
[17:15:44] <steveklabnik> right.
[17:15:55] <steveklabnik> so ~"foo" is a pointer to a string. "foo" is a static string on the stack
[17:15:59] <steveklabnik> so they're different types
[17:16:18] <steveklabnik> unless you have some comparison operator that compares the two different types, that won't work
[17:16:28] <c74d> And it doesn’t automatically dereference the pointer.
[17:16:32] <c74d> Okay, thanks.
[17:16:59] <steveklabnik> totally
[17:17:06] <steveklabnik> also, strings are a different type
[17:17:15] <c74d> I was thinking Rust’s pointers worked like C++ references, i.e. they’d be automatically dereferenced.
[17:17:16] <steveklabnik> you can't have just a plain str, you have to have a ~str or an &str
[17:17:33] *** Joins: nmatsakis (nmatsakis@moz-DB4A9C19.scl3.mozilla.com)
[17:17:33] *** ChanServ sets mode: +ao nmatsakis nmatsakis
[17:17:37] *** Joins: froydnj (nfroyd@moz-DB4A9C19.scl3.mozilla.com)
[17:17:42] *** Joins: gavin (gavin@moz-DB4A9C19.scl3.mozilla.com)
[17:17:43] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[17:17:46] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[17:17:46] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[17:17:52] *** jdm is now known as jdm|f00d
[17:17:58] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[17:18:02] *** AutomatedTester|AFK is now known as AutomatedTester
[17:18:16] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[17:18:16] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[17:18:32] *** Joins: rhelmer (rhelmer@moz-DB4A9C19.scl3.mozilla.com)
[17:18:39] <c74d> How can I compare a ~str with a str? Dereferencing the ~str doesn’t seem to work.
[17:18:43] <c74d> rusti: let s = ~"foo"; *s == "foo"
[17:18:44] -rusti- pastebinned 8 lines of output: http://sprunge.us/BJGJ
[17:18:46] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:18:47] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[17:18:47] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[17:19:17] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[17:19:17] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[17:19:28] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[17:19:32] *** rhelmer is now known as IRCMonkey53860
[17:19:47] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[17:19:47] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[17:20:01] <steveklabnik> c74d: trying to remember what it is...
[17:20:17] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[17:20:17] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[17:20:30] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[17:20:47] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[17:20:47] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[17:20:52] <steveklabnik> rusti: let x = ~"foo"; "foo".equiv(&x);
[17:20:53] -rusti- ()
[17:20:58] <steveklabnik> c74d: ^^^
[17:21:17] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[17:21:17] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[17:21:21] <steveklabnik> the discussion: https://mail.mozilla.org/pipermail/rust-dev/2013-April/003868.html
[17:21:43] <c74d> steveklabnik: Thanks.
[17:21:47] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[17:21:47] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[17:21:47] <tiffany> is .equiv shallow equality (as in, pointers)?
[17:21:54] <klutzy> rusti: let x = ~"foo"; "foo" == x
[17:21:54] *** Quits: siavashserver (siavash@BFE1785A.1921C094.82A25C10.IP) (Quit: Konversation terminated!)
[17:21:55] -rusti- true
[17:22:01] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[17:22:06] <klutzy> this is quite tricky but works
[17:22:10] <dandy> Is there a somewhat official naming convention? Like why equiv instead of equivalent?
[17:22:15] <tiffany> rusti: let x = ~"foo"; "foo".equiv(&x)
[17:22:16] -rusti- true
[17:22:17] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[17:22:17] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[17:22:36] <klutzy> anyway, "abc" is &'static str, not str. there is no str type
[17:22:47] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[17:22:47] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[17:22:48] <steveklabnik> right
[17:22:48] <klutzy> this is why dereferencing ~str doesn't make sense
[17:22:51] <dandy> klutzy, why is that tricky?
[17:23:14] <dandy> because the compiler uses the same memory for both str?
[17:23:17] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[17:23:17] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[17:23:39] <nejucomo> Hm…  It looks like I can now make the compiler (my problems yesterday were insufficient memory on a 4gb vm; today I quit as many other processes as possible) - but now I have doc generation problems: http://sebsauvage.net/paste/?8b1f6fab197096d7#zqJZOT2gulinPJEddzbufM9a8FSCXY5BnXghbVihVuI=
[17:23:44] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[17:23:47] <klutzy> dandy: since x == "foo" does not work
[17:23:47] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[17:23:47] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[17:24:01] <nejucomo> I don't want pdfs, I want html.  Is it possible to configure the build system to avoid latex but still generate html?
[17:24:09] <klutzy> but "foo" == x does. I now forget why only one of them works :'(
[17:24:12] <nejucomo> -and if not, how do I disable doc gen altogether?
[17:24:17] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[17:24:17] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[17:24:18] <dandy> oh, thats shady
[17:24:34] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[17:24:41] *** Quits: mindcat (mindcat@6B5E55D0.7EE3DE8.F956842C.IP) (Quit: Lost terminal)
[17:24:47] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[17:24:47] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[17:24:50] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Client exited)
[17:24:50] <steveklabnik> i know why something like that would happen in ruby, but in rust i don't quite have the chops :)
[17:24:53] <tiffany> I've been using ~"foo" == x in my code
[17:24:57] <tiffany> I'm guessing that is a no-no
[17:25:23] *** Joins: Larry (larryfox@moz-1D59E114.nycmny.fios.verizon.net)
[17:25:43] *** Joins: BitPuffin (isak@moz-49828767.cust.tele2.se)
[17:25:43] <tiffany> I don't mind using .equiv though, it's still cleaner than C
[17:25:50] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[17:25:52] <steveklabnik> tiffany: you might enjoy that link i posted
[17:25:59] <steveklabnik> the title is "PSA: ~str is  usually not what you want"
[17:26:09] <tiffany> yeah I'm reading that
[17:26:11] *** Joins: jviereck (Adium@moz-4C9C4638.dip0.t-ipconnect.de)
[17:26:24] <steveklabnik> cool
[17:26:24] *** Quits: reillyeon (reillyeon@moz-D5807178.hsd1.ca.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[17:26:38] <tiffany> I imagine my rust code does a lot of unnecessary allocations currently
[17:27:00] <tiffany> it's hard to tell what does and what doesn't when in C the only way to allocate is with malloc() and functions like strdup()
[17:27:10] *** Quits: sergi (textual@moz-DB55470C.upc-a.chello.nl) (Quit: Computer has gone to sleep.)
[17:27:19] <steveklabnik> ... you're speaking of heap allocation only
[17:27:23] <steveklabnik> then?
[17:27:30] <tiffany> well, that's kind of what I meant
[17:27:44] <tiffany> I guess I should think about stack usage too
[17:27:56] <steveklabnik> :)
[17:28:18] <steveklabnik> we're all learning how to write good rust.... i'm sure i have way too many allocations
[17:28:21] *** Quits: pnkfelix1 (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[17:28:38] <steveklabnik> in generall, rust prefers that you allocate things on the stack, at least according to strcat
[17:28:43] <steveklabnik> you only need pointers in certain situations
[17:28:57] <steveklabnik> we'll see when my pointer tutorial PR actually lands
[17:29:08] <tiffany> I have a very bad habit of passing ~str and ~[] when I should be passing &s
[17:30:45] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[17:31:38] <dandy> is it possible to do a match using .equiv( ?
[17:32:07] <dandy> or any function really
[17:32:39] <dandy> or is that the territory of "if" only?
[17:33:00] <steveklabnik>     let x = ~"foo";
[17:33:00] <steveklabnik>     match "foo".equiv(&x) {
[17:33:00] <steveklabnik>         true  => println("yes"),
[17:33:00] <steveklabnik>         false => println("no"),
[17:33:00] <steveklabnik>     }
[17:33:04] <steveklabnik> that prints 'yes'
[17:33:08] <dandy> haha ok
[17:33:16] <steveklabnik> equiv returns a bool
[17:33:30] <steveklabnik> rusti: match "foo".equiv(&~"foo") { }
[17:33:31] -rusti- pastebinned 13 lines of output: http://sprunge.us/cFVj
[17:33:43] *** Quits: mib_fx149r (Mibbit@moz-F2E42C9D.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[17:33:50] <steveklabnik> ahaha that wasn't illustrative
[17:34:02] <steveklabnik> whne i take out the true and false lines in my example, it says 'unexhaustive match for type bool'
[17:34:08] <dandy> I meant more along the lines of match "foo" { "a" => ... "b" => ... "c" =>... } to somehow use a function call to determine matching
[17:34:29] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[17:35:00] <steveklabnik>     match "foo" {
[17:35:00] <steveklabnik>         "foo" => println("yes"),
[17:35:00] <steveklabnik>         _     => println("no"),
[17:35:00] <steveklabnik>     }
[17:35:02] <steveklabnik> prints 'yes'
[17:35:23] <dandy> what if I wanted it to ignore case for <127
[17:35:25] *** Quits: Amaranthus (travis@moz-F81BB56A.cpe.cableone.net) (Ping timeout)
[17:35:30] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[17:35:50] <steveklabnik> ... i'm not that good. ;)
[17:35:59] <steveklabnik> sounds like you want to see if a string is ascii?
[17:36:04] *** Joins: ssalbiz_ (ssalbiz@D9BFBBC1.8C6B4B29.8CAEFE8D.IP)
[17:36:16] *** Quits: ssalbiz_ (ssalbiz@D9BFBBC1.8C6B4B29.8CAEFE8D.IP) (Quit: leaving)
[17:36:30] <dandy> no, I want to compare an input string to "foo" and "bar" and do so in a case insensitive way so that "FoO" would match
[17:36:49] <dandy> and I can do that with ifs, but it would feel better to use match I think
[17:37:05] <jason_> lower case "FoO" before matching
[17:37:16] <dandy> but I guess match is meant for specific values or destructuring things
[17:37:24] *** Joins: siavashserver (siavash@68FB30DC.2ECC9A1.82A25C10.IP)
[17:37:25] <dandy> jason_, I try to avoid allocations
[17:37:54] *** Quits: ssalbiz (ssalbiz@moz-21D6B3DE.csclub.uwaterloo.ca) (Quit: leaving)
[17:38:54] <steveklabnik> dandy: i'm not sure if there's a case-insensitive comparison lying around
[17:38:57] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[17:39:05] *** Quits: fread2281 (zcarterc@moz-CB181B42.dia.static.qwest.net) (Quit: WeeChat 0.4.0)
[17:39:24] *** Joins: fread2281 (zcarterc@moz-CB181B42.dia.static.qwest.net)
[17:39:25] <dandy> steveklabnik, that would have to depend on culture stuff
[17:39:35] <steveklabnik> huh?
[17:39:50] <dandy> case rules are different depending on where you are in the world
[17:39:50] <jason_> http://static.rust-lang.org/doc/0.8/std/ascii/trait.AsciiStr.html#fn.eq_ignore_case
[17:39:58] <steveklabnik> ahhh std:ascii
[17:40:01] <steveklabnik> i looked in std::str
[17:40:07] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[17:40:09] <steveklabnik> dandy: right.
[17:41:13] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[17:42:05] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[17:42:52] <steveklabnik> bytes! is for a stack allocated string, what's the equivalent for a ~str or a &str?
[17:44:12] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[17:44:40] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[17:45:01] *** Quits: pyrac (pyrac@moz-1C318C84.w92-162.abo.wanadoo.fr) (Quit: pyrac)
[17:45:28] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[17:45:45] <sp3d> rusti: let a = bytes!(22, 45); a.to_owned()
[17:45:46] -rusti- ~[22u8, 45u8]
[17:46:00] <sp3d> I guess?
[17:46:13] *** Quits: fread2281 (zcarterc@moz-CB181B42.dia.static.qwest.net) (Quit: WeeChat 0.4.0)
[17:46:30] <steveklabnik> hmmmm
[17:47:01] <nejucomo> In playing around with string matching / eq, I've run into a conceptual problem…  How/when/where do pointers become borrowed?
[17:47:30] <steveklabnik> nejucomo: http://static.rust-lang.org/doc/master/tutorial-borrowed-ptr.html <- you probably want to check this out
[17:47:30] <nejucomo> If I have: let x = ~"foo" ; let y = &x ; // -then y has type &~str rather than &str.  Why?
[17:47:55] <steveklabnik> you're borrowing a pointer to an owned string, not converting them
[17:48:35] *** Quits: jstevans (Instantbir@moz-735D8260.washdc.fios.verizon.net) (Ping timeout)
[17:49:05] *** Quits: siavashserver (siavash@68FB30DC.2ECC9A1.82A25C10.IP) (Quit: Konversation terminated!)
[17:49:06] <nejucomo> steveklabnik: Then why does this borrow:  fn foo(x: &T) {…} ; let x = ~make_T(); foo(x)
[17:49:07] <steveklabnik> rusti:  let x = &~&@~~@~"foo";
[17:49:08] -rusti- <anon>:7:14: 7:15 warning: unused variable: `x` [-W unused-variable (default)]
[17:49:08] -rusti- <anon>:7           let x = &~&@~~@~"foo";
[17:49:08] -rusti-                        ^
[17:49:08] -rusti- ()
[17:49:09] *** Joins: fread2281 (zcarterc@moz-CB181B42.dia.static.qwest.net)
[17:49:11] <steveklabnik> ;)
[17:49:34] <nejucomo> Why isn't the type of parameter x &~T instead of &T ?
[17:49:48] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[17:49:48] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[17:49:58] <nejucomo> Does it have to do with the fact that ~[T] and ~str are dynamically sized, so require fat pointers?
[17:50:04] *** Quits: fread2281 (zcarterc@moz-CB181B42.dia.static.qwest.net) (Quit: WeeChat 0.4.0)
[17:50:05] <dandy> Why is T a common generic type parameter name?
[17:50:05] <steveklabnik> you should check out that tutorial. it's much more thorough, i'm afriad i'll explain it wrong, frankly.
[17:50:06] <sp3d> yeah, strings and vectors don't work the same as other types because you can't dereference them
[17:50:16] <nejucomo> steveklabnik: ok.
[17:50:18] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[17:50:18] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[17:50:40] <nejucomo> dandy: Do you mean why is that the convention?  I dunno.  I always use capital T for "type".
[17:50:42] <Ms2ger> nejucomo, a ~T is a pointer with a defined ownership model, a &T is just a pointer
[17:50:43] <jason_> dandy: T for Type
[17:50:48] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[17:50:48] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[17:50:55] *** Joins: jstevans (Instantbir@moz-735D8260.washdc.fios.verizon.net)
[17:51:18] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[17:51:18] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[17:51:26] <steveklabnik> sp3d: to_owned() doesn't work because i start off with a ~"", not a vector of bytes
[17:51:40] <SteveMcQwark> nejucomo: when you assign ~T to &T, you're not borrowing the unique pointer, you're norrowing its referand. i.e. you're borrowing *from* the unique pointer
[17:51:48] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[17:51:48] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[17:52:18] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[17:52:18] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[17:52:21] <sp3d> steveklabnik: hm
[17:52:29] <jason_> rusti: let x = ~1; &int(x)
[17:52:29] -rusti- <anon>:7:22: 7:25 error: unresolved name `int`. Did you mean `x`?
[17:52:29] -rusti- <anon>:7          let x = ~1; &int(x)
[17:52:29] -rusti-                                ^~~
[17:52:29] -rusti- error: aborting due to previous error
[17:52:30] -rusti- application terminated with error code 101
[17:52:36] <nejucomo> SteveMcQwark: That does not seem true for let bindings:
[17:52:38] <nejucomo> rusti: let x = ~4; let y = &x; y == 3
[17:52:39] -rusti- <anon>:7:38: 7:39 error: mismatched types: expected `&~<VI0>` but found `<VI1>` (expected &-ptr but found integral variable)
[17:52:39] -rusti- <anon>:7          let x = ~4; let y = &x; y == 3
[17:52:39] -rusti-                                                ^
[17:52:39] -rusti- error: aborting due to previous error
[17:52:39] -rusti- application terminated with error code 101
[17:52:43] <steveklabnik> sp3d: i'm getting some input and then turning it into bytes and throwing it down a tcp socket ;)
[17:52:48] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[17:52:48] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[17:53:00] <nejucomo> Notice that the type of y is &~int, not &int
[17:53:01] <sp3d> have a snippet I could see?
[17:53:18] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[17:53:18] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[17:53:23] <steveklabnik> https://github.com/steveklabnik/redis/blob/master/src/example/main.rs#L36
[17:53:35] <steveklabnik> that currently _works_, trying to slowly refactor it out into a library
[17:53:36] <SteveMcQwark> nejucomo: thats because you're using the borrow operator, rather than doing a straight assignment
[17:53:48] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[17:53:48] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[17:54:18] *** Joins: fread2281 (zcarterc@moz-CB181B42.dia.static.qwest.net)
[17:54:18] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[17:54:18] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[17:54:19] <nejucomo> Ah, right:
[17:54:21] <nejucomo> rusti: let x = ~4u; let y: &uint = x; y == true
[17:54:22] -rusti- <anon>:7:45: 7:49 error: mismatched types: expected `&uint` but found `bool` (expected &-ptr but found bool)
[17:54:22] -rusti- <anon>:7          let x = ~4u; let y: &uint = x; y == true
[17:54:22] -rusti-                                                       ^~~~
[17:54:25] -rusti- error: aborting due to previous error
[17:54:26] -rusti- application terminated with error code 101
[17:54:41] *** Quits: five (five@moz-F45C65F8.v4.ngi.it) (Ping timeout)
[17:54:49] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[17:54:49] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[17:55:16] *** Quits: Larry (larryfox@moz-1D59E114.nycmny.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[17:55:19] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[17:55:19] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[17:55:38] *** Quits: jstevans (Instantbir@moz-735D8260.washdc.fios.verizon.net) (Ping timeout)
[17:55:49] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[17:55:49] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[17:55:59] * nejucomo is trying to understand why ~"foo" == &"foo" does not typecheck...
[17:56:14] <nejucomo> The definition of eq is: fn eq(&self, other: &Self) -> bool;
[17:56:19] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[17:56:19] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[17:56:44] <tiffany> &self and &Self are the same type
[17:56:53] *** Quits: fread2281 (zcarterc@moz-CB181B42.dia.static.qwest.net) (Quit: WeeChat 0.4.0)
[17:56:57] <nejucomo> Ah, so in ~"foo".eq(other) - the impl type is ~str and the self parameter type is &~str   ?
[17:57:17] <tiffany> I think so
[17:57:18] <cmr> Self is ~str, &Self is &~str
[17:57:19] *** Quits: AutomatedTester (David@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[17:57:19] *** Quits: nmatsakis (nmatsakis@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[17:57:19] *** Quits: maik (maik@moz-41A4E36A.dip0.t-ipconnect.de) (Ping timeout)
[17:57:36] *** Quits: gavin (gavin@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[17:57:37] <cmr> self is also ~str, &self is &~str
[17:57:42] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Ping timeout)
[17:57:44] <nejucomo> Ok, now I understand why ~"foo" == &"foo" does not typecheck.
[17:57:52] *** Quits: IRCMonkey53860 (rhelmer@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[17:58:00] *** Quits: froydnj (nfroyd@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[17:58:05] <tiffany> it would be nice if Eq had lhs and rhs
[17:58:06] <nejucomo> -which makes this PSA thread much clearer.
[17:58:09] *** Quits: olivier (chatzilla@moz-2811C56F.fbx.proxad.net) (Quit: ChatZilla 0.9.90.1 [SeaMonkey 2.20/20130803203006])
[17:58:21] <nejucomo> tiffany: I disagree.
[17:58:28] <cmr> What PSA?
[17:58:29] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[17:58:40] <nejucomo> MyWackyThing { … } == ~"banana"  // -evaluates to true.
[17:58:44] <steveklabnik> cmr: i linked to the pcwalton ML thread called "PSA: ~str is probably not what you want"
[17:58:48] <cmr> oh
[17:58:55] <nejucomo> cmr: Yeah, sorry, that's the thread.
[17:58:58] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[17:59:00] *** Joins: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP)
[17:59:03] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[17:59:20] <dandy> https://mail.mozilla.org/pipermail/rust-dev/2013-April/003867.html
[17:59:35] <nejucomo> I'd rather keep eq simple and sane the way it is, and figure out a clean solution to str / vec equality.
[17:59:45] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[18:00:12] <steveklabnik> cmr: how do i turn a ~str into a [u8] ? bytes! is for a stack allocated string...
[18:00:23] <cmr> steveklabnik: as_bytes
[18:00:27] <steveklabnik> ty
[18:00:36] <steveklabnik> i'm gonna cross-refernce those docs i think
[18:00:38] <cmr> bytes! is for byte string literals.
[18:00:50] <steveklabnik> right
[18:01:07] <steveklabnik> i was using bytes!("...) before, eventually, I want that "" to not be literal
[18:01:15] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[18:01:19] <steveklabnik> refactoring my redis binding from my sample to an actual library
[18:01:27] *** Joins: fread2281 (zcarterc@moz-CB181B42.dia.static.qwest.net)
[18:01:39] *** Joins: kbroder (Mibbit@35ED2E10.75B49943.DDE5D3F6.IP)
[18:01:45] *** Quits: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[18:02:04] <klutzy> uh, seems like bors is down
[18:02:22] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[18:02:22] *** ChanServ sets mode: +o pnkfelix
[18:02:30] <nejucomo> Sometimes I see people say "autoborrowing" but I don't see what in the borrow tutorial they are referring to.
[18:02:47] <cmr> nejucomo: it might not be in the tutorial
[18:02:53] *** Joins: pyrac (pyrac@moz-1C318C84.w92-162.abo.wanadoo.fr)
[18:03:03] <nejucomo> What is autoborrowing?  Where does it occur?
[18:03:18] <cmr> Basically if you have `let x = SomeFoo::new(); x.y()` and y is a &self method, it will auto-borrow to a &SomeFoo
[18:03:47] <cmr> I think there's more subtlty than that but that's as far as my knowledge extends
[18:03:59] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[18:04:13] *** Quits: Earnestly (earnest@moz-BE290A2B.dyn.plus.net) (Input/output error)
[18:04:15] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[18:04:16] *** Joins: Earnestly (earnest@moz-BE290A2B.dyn.plus.net)
[18:04:57] <Ms2ger> I thought it was silently treating ~T as &T
[18:06:43] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[18:07:18] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[18:07:27] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[18:07:34] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[18:08:11] <steveklabnik> is there a reason why std::rt::io::net::tc::TcpStream.connect does this?
[18:08:13] <steveklabnik>      match stream {
[18:08:13] <steveklabnik>             Ok(s) => Some(TcpStream::new(s)),
[18:08:13] <steveklabnik>             Err(ioerr) => {
[18:08:13] <steveklabnik>                 rtdebug!("failed to connect: %?", ioerr);
[18:08:15] <steveklabnik>                 io_error::cond.raise(ioerr);
[18:08:17] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[18:08:18] <steveklabnik>                 None
[18:08:20] <steveklabnik>             }
[18:08:23] <steveklabnik>         }why condition AND maybe?
[18:08:31] <steveklabnik> wouldn't you want one or the other? and when could None actually get returned here?
[18:08:51] <cmr> steveklabnik: have you read the condition tutorial?
[18:08:55] <cmr> Conditions don't imply failure.
[18:08:55] <steveklabnik> yes, i have it open
[18:08:58] <steveklabnik> ahhh okay
[18:09:04] <cmr> You can handle the condition and continue on
[18:09:04] <steveklabnik> so yeah, after it's trapped, it would come back
[18:09:06] <steveklabnik> and you'd get a none
[18:09:09] <cmr> Yup
[18:09:16] <nejucomo> cmr: I thought that case of &self was due to automatic dereferencing:  let p = @Point { x: 42, y: 23 }; p.x == (*p).x
[18:09:20] *** Joins: reillyeon (reillyeon@moz-D5807178.hsd1.ca.comcast.net)
[18:09:22] <steveklabnik> so in the calling code, a none handler would be a retry, probably?
[18:10:06] *** Quits: jdsanders (Adium@moz-F45527D6.hlrn.qwest.net) (Quit: Leaving.)
[18:10:06] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[18:10:24] <cmr> nejucomo: no, since in my example you don't *have* a pointer, it's a value.
[18:10:28] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[18:10:30] *** Joins: jdsanders (Adium@moz-F45527D6.hlrn.qwest.net)
[18:10:43] <nejucomo> Ah, good point.  I see.
[18:11:11] <cmr> steveklabnik: or some nice logging and a fail, or a "Can't connect page" in servo, or whatever
[18:11:31] <steveklabnik> word. thanks! time to write some docs ;)
[18:11:41] <steveklabnik> i was assuming things because it returned an option
[18:11:48] <steveklabnik> then i looked at the code....
[18:12:18] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[18:13:29] *** Joins: frogaincia (Mibbit@C83F40FA.C3C4EFEF.4BC5EF08.IP)
[18:16:35] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[18:16:36] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[18:17:45] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[18:18:26] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[18:18:28] *** Quits: frogaincia (Mibbit@C83F40FA.C3C4EFEF.4BC5EF08.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:19:10] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:19:11] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[18:19:33] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[18:19:54] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[18:20:05] *** Quits: reillyeon (reillyeon@moz-D5807178.hsd1.ca.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[18:20:53] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[18:22:28] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[18:22:30] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[18:23:01] *** Joins: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net)
[18:23:02] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[18:23:07] *** Quits: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net) (Quit: bye!)
[18:23:13] *** Joins: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net)
[18:23:20] *** Quits: phaer (user@moz-8B932D8B.home.otenet.gr) (Ping timeout)
[18:23:24] *** Quits: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net) (Quit: bye!)
[18:23:26] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[18:24:07] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[18:25:56] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[18:28:12] *** Joins: lolcatz (Mibbit@50E1805B.387BC77F.DDE5D3F6.IP)
[18:28:38] <lolcatz> how would one runa program in the background using rust
[18:30:11] *** Joins: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP)
[18:30:48] *** Joins: Jesin (Jessin_@moz-E6B69119.cc.lehigh.edu)
[18:31:28] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[18:31:33] *** Quits: canhtak (jeremy@877D54DD.7A8E554D.FC900DAF.IP) (Ping timeout)
[18:32:45] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[18:32:45] *** ChanServ sets mode: +o pnkfelix
[18:33:37] *** Quits: jdsanders (Adium@moz-F45527D6.hlrn.qwest.net) (Quit: Leaving.)
[18:34:19] *** Joins: gweg (Mibbit@moz-97FD188C.cpe.net.cable.rogers.com)
[18:34:40] *** Quits: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[18:36:51] *** Joins: SiegeLord (sl@moz-3D449DF.bstnma.fios.verizon.net)
[18:36:56] <cmr> lolcatz: std::run
[18:37:03] *** Joins: Kruppe (user@67DC0089.80DA567B.66C78069.IP)
[18:37:30] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[18:37:38] *** Joins: phaer (user@moz-8B932D8B.home.otenet.gr)
[18:38:14] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[18:38:41] *** Joins: engla (engla@moz-9B69FE7C.selucle.dyn.perspektivbredband.net)
[18:38:58] *** Quits: Kruppe (user@67DC0089.80DA567B.66C78069.IP) (Ping timeout)
[18:39:04] <lolcatz> cmr: would I just run it using proceess output?
[18:39:22] <cmr> lolcatz: "process output"?
[18:39:28] *** Joins: nmatsakis (nmatsakis@moz-DB4A9C19.scl3.mozilla.com)
[18:39:29] *** ChanServ sets mode: +ao nmatsakis nmatsakis
[18:39:41] *** Joins: gavin (gavin@moz-DB4A9C19.scl3.mozilla.com)
[18:39:49] *** Joins: AutomatedTester|AFK (David@moz-DB4A9C19.scl3.mozilla.com)
[18:39:49] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:39:49] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:39:52] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[18:40:06] *** AutomatedTester|AFK is now known as AutomatedTester
[18:40:19] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:40:19] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:40:20] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[18:40:34] *** Joins: froydnj (nfroyd@moz-DB4A9C19.scl3.mozilla.com)
[18:40:50] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:40:50] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:41:01] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[18:41:13] *** Joins: rhelmer (rhelmer@moz-DB4A9C19.scl3.mozilla.com)
[18:41:16] <lolcatz> cmr: yea you said i could run in the bg using std:run
[18:41:20] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:41:20] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:41:22] *** Joins: Kruppe (user@67DC0089.80DA567B.66C78069.IP)
[18:41:32] <cmr> lolcatz: yes, you can. what does process output mean?
[18:41:42] <cmr> What are you trying to accomplish?
[18:41:43] *** Joins: fabiand (fabiand@moz-C69053D9.static.qsc.de)
[18:41:49] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:41:49] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:41:52] <lolcatz> cmr: how exactly would i do that.  Looking at the docs I'm not sure how i would
[18:42:14] *** rhelmer is now known as IRCMonkey46673
[18:42:16] <lolcatz> run a process but allow the program to continue to accept input
[18:42:19] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:42:19] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:42:49] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:42:49] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:42:52] *** Quits: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com) (Quit: bye for now)
[18:43:20] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:43:20] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:43:50] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:43:50] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:44:20] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:44:20] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:44:32] <nejucomo> I think one thing I've learned from this channel and rust-dev is that if your language is both pre-1.0 and interesting, then there will be many, many alternative suggestions for changes.  ;-)
[18:44:50] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:44:50] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:44:57] *** Joins: mikezaby (mikezaby@moz-908EA8DE.home.otenet.gr)
[18:45:20] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:45:20] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:45:33] <cmr> lolcatz: https://github.com/huonw/multibuilder/blob/master/git.rs has a bunch of examples
[18:45:49] *** Quits: Kruppe (user@67DC0089.80DA567B.66C78069.IP) (Ping timeout)
[18:45:50] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:45:50] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:45:56] <lolcatz> cmr: thanks ill take a look
[18:46:20] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:46:20] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:46:25] <SiegeLord> nejucomo, It won't stop post 1.0 either... people just love to paint them bikesheds
[18:46:50] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:46:50] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:47:03] <SiegeLord> They'll just say... "Here's what you need to do for 2.0"
[18:47:10] <SiegeLord> Or 3.0 etc
[18:47:21] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:47:21] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:47:51] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:47:51] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:48:18] <nejucomo> Embedded anonymous structs, special case str type to ease comparisons, trait "fields", ($) and (|>) function composition operators, patterned-assignments...
[18:48:21] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:48:21] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:48:51] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:48:51] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:49:21] <cmr> I think "patterned assignments" would be better achieved with `let super ... = ...`
[18:49:21] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:49:21] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:49:29] <nejucomo> I'm really happy with the conservatism of feature changes these days.  We don't want to make another C++ !
[18:49:32] <cmr> super just means it doesn't reintroduce a new binding, it modifies existing ones
[18:49:51] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:49:51] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:49:51] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[18:49:57] <SiegeLord> Yes, it's concervatism of Rust that attracts me the most
[18:50:09] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[18:50:14] <nejucomo> I think patterned assignments are best with the current language: patterned let, followed by individual assignment statments.  :-p
[18:50:21] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:50:21] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:50:37] <nejucomo> Ok, I can see the appeal of them...
[18:50:48] <nejucomo> Still seems like something a macro can do fairly well...
[18:50:51] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:50:51] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:50:56] *** Joins: canhtak (jeremy@877D54DD.7A8E554D.FC900DAF.IP)
[18:51:21] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:51:21] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:51:52] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:51:52] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:52:01] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[18:52:01] *** ChanServ sets mode: +o pnkfelix
[18:52:22] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:52:22] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:52:52] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:52:52] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:53:08] *** Quits: phaer (user@moz-8B932D8B.home.otenet.gr) (Quit: ERC Version 5.3 (IRC client for Emacs))
[18:53:22] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:53:22] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:53:37] *** Quits: pyrac (pyrac@moz-1C318C84.w92-162.abo.wanadoo.fr) (Quit: pyrac)
[18:53:47] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[18:53:52] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:53:52] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:54:07] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[18:54:07] *** ChanServ sets mode: +o pnkfelix
[18:54:22] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:54:22] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:54:52] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:54:52] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:55:23] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:55:23] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:55:53] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:55:53] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:56:07] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[18:56:23] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:56:23] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:56:53] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:56:53] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:57:23] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:57:23] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:57:53] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:57:53] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:58:02] <lolcatz> cmr: so after looking through, it looks very similar that i'm invoking my commands
[18:58:02] <amatus> what should i use instead of atoi?
[18:58:20] <cmr> rusti: from_str::<int>("12352")
[18:58:21] -rusti- Some(12352)
[18:58:23] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:58:23] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:58:45] <cmr> amatus: ^
[18:58:46] <lolcatz> cmr: the program starts the process and waits for it to finish before doing anythign else, but i want the program to accept input while the process is running
[18:58:54] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:58:54] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:59:00] *** Joins: phaer (user@moz-8B932D8B.home.otenet.gr)
[18:59:13] <amatus> rusti: from_str::<int>("12352").unwrap()
[18:59:14] -rusti- 12352
[18:59:20] <amatus> cmr: thanks
[18:59:24] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:59:24] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[18:59:27] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[18:59:46] <cmr> lolcatz: it only waits because it calls finish_with_output. If you don't call one of the finish methods, you don't wait.
[18:59:50] <cmr> lolcatz: http://static.rust-lang.org/doc/master/std/run/struct.Process.html
[18:59:54] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[18:59:54] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:00:24] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:00:24] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:00:54] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:00:54] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:01:24] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:01:24] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:01:53] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[19:01:54] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:01:54] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:02:00] *** Quits: Ms2ger (Ms2ger@9D0A393.CB23CDC6.3773EA9F.IP) (Ping timeout)
[19:02:01] *** Joins: pyrac (pyrac@moz-1C318C84.w92-162.abo.wanadoo.fr)
[19:02:25] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:02:25] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:02:52] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[19:02:55] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:02:55] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:03:25] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:03:25] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:03:55] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:03:55] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:04:25] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:04:25] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:04:52] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[19:04:55] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:04:55] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:05:26] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:05:26] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:05:32] *** Quits: slackito (slackito@moz-7779E4A6.dyn.user.ono.com) (Quit: leaving)
[19:05:56] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:05:56] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:06:16] *** Quits: six600110 (six600110@moz-3C5CCD60.neo.res.rr.com) (Connection reset by peer)
[19:06:26] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:06:26] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:06:56] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:06:56] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:07:01] *** Joins: SteveMcQ1ark (steven099@moz-7CFCF343.cpe.net.cable.rogers.com)
[19:07:06] *** Joins: six600110 (six600110@moz-3C5CCD60.neo.res.rr.com)
[19:07:17] *** Quits: SteveMcQwark (steven099@moz-7CFCF343.cpe.net.cable.rogers.com) (Ping timeout)
[19:07:26] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:07:26] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:07:56] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:07:56] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:08:27] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:08:27] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:08:28] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[19:08:57] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:08:57] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:09:07] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[19:09:13] *** Quits: threecreepio (jdp@moz-9C11F46E.cust.bredbandsbolaget.se) (Quit: threecreepio)
[19:09:27] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:09:27] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:09:57] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:09:57] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:10:53] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:10:53] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:11:23] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:11:23] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:11:40] <mib2> How do I declare an extern pointer-to-function?
[19:11:53] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:11:53] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:12:12] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[19:12:23] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:12:23] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:12:53] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:12:53] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:12:53] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[19:12:57] <mib2> A C library that I am wrapping exports a function pointer, and I need to call the function
[19:13:23] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:13:23] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:13:53] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:13:53] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:14:23] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:14:23] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:14:26] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[19:14:45] *** Quits: six600110 (six600110@moz-3C5CCD60.neo.res.rr.com) (Ping timeout)
[19:14:53] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:14:53] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:15:09] *** Joins: six600110 (six600110@moz-3C5CCD60.neo.res.rr.com)
[19:15:23] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:15:23] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:15:53] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:15:53] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:15:55] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[19:16:11] *** Quits: SteveMcQ1ark (steven099@moz-7CFCF343.cpe.net.cable.rogers.com) (Ping timeout)
[19:16:23] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:16:23] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:16:25] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[19:16:53] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:16:53] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:17:09] <lolcatz> cmr: the behaviour is what im looking for with process (without calling finish) but this method also doesn't direct the output anywhere, I still want the output from the process on stdout as it comes
[19:17:23] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:17:23] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:17:54] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:17:54] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:17:54] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[19:18:06] *** Quits: jviereck (Adium@moz-4C9C4638.dip0.t-ipconnect.de) (Quit: Leaving.)
[19:18:24] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:18:24] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:18:54] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:18:54] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:19:06] *** Joins: exia (Mibbit@moz-BBC77913.bootp.virginia.edu)
[19:19:22] <exia> is anyone familiar with error "cannot move out of captured outer variable"?
[19:19:24] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:19:24] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:19:32] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:19:54] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:19:54] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:20:24] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:20:24] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:20:54] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:20:54] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:21:04] *** Joins: SteveMcQwark (steven099@moz-7CFCF343.cpe.net.cable.rogers.com)
[19:21:08] *** Joins: jviereck (Adium@moz-4C9C4638.dip0.t-ipconnect.de)
[19:21:11] *** Joins: Ms2ger (Ms2ger@9D0A393.CB23CDC6.3773EA9F.IP)
[19:21:17] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[19:21:24] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:21:24] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:21:54] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:21:54] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:22:25] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:22:25] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:22:49] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[19:22:52] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[19:22:55] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:22:55] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:23:08] <SiegeLord> mib2, extern "C" fn(...)->...
[19:23:25] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:23:25] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:23:55] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:23:55] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:24:09] <SiegeLord> Gosh darn... >_<
[19:24:25] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:24:25] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:24:28] <lolcatz> how would I get a out_fd for stdout
[19:24:35] <lolcatz> to use with a process option?
[19:24:44] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[19:24:54] <mib2> SiegeLord: Thank you.
[19:24:55] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:24:55] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:25:25] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:25:25] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:25:30] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[19:25:56] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:25:56] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:26:11] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[19:26:26] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:26:26] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:26:51] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[19:26:56] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:26:56] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:27:00] *** Quits: SteveMcQwark (steven099@moz-7CFCF343.cpe.net.cable.rogers.com) (Ping timeout)
[19:27:00] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[19:27:09] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[19:27:26] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:27:26] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:27:48] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[19:27:56] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:27:56] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:28:26] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:28:26] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:28:57] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:28:57] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:29:03] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[19:29:27] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:29:27] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:29:57] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:29:57] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:30:15] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[19:30:27] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:30:27] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:30:48] <mib2> lolcatz: Looking in io.rs, try `libc::STDOUT_FILENO`
[19:30:57] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:30:57] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:30:58] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[19:31:13] <mib2> rusti: std::libc::STDOUT_FILENO
[19:31:13] -rusti- 1i32
[19:31:20] *** Joins: tzakyrie (tzakyrie@moz-57E04ADC.hsd1.va.comcast.net)
[19:31:27] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:31:27] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:31:45] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[19:31:52] <mib2> lolcatz: std::io::stdout() is implemented with: `pub fn stdout() -> @Writer { fd_writer(libc::STDOUT_FILENO as c_int, false) }`
[19:31:58] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:31:58] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:32:12] <mib2> So it just gets the fd_t from std::libc.
[19:32:28] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:32:28] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:32:28] *** Joins: SteveMcQwark (steven099@moz-7CFCF343.cpe.net.cable.rogers.com)
[19:32:32] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[19:32:58] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:32:58] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:33:00] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[19:33:27] *** Joins: sinma (sinma@moz-6A11C47C.fbx.proxad.net)
[19:33:28] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:33:28] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:33:58] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:33:58] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:34:28] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:34:28] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:34:29] <sinma> Hello, I have many questions about Rust: what are the language where the Rust features comes from now (because in the list given in the doc, some languages inspired removed features)
[19:34:58] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:34:58] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:35:28] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:35:28] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:35:46] *** Quits: pyrac (pyrac@moz-1C318C84.w92-162.abo.wanadoo.fr) (Quit: pyrac)
[19:35:59] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:35:59] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:36:29] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:36:29] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:36:37] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[19:36:40] *** Joins: krdln (Mibbit@moz-6F8A8560.dynamic.chello.pl)
[19:36:59] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:36:59] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:37:05] *** Joins: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[19:37:29] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:37:29] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:37:59] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:37:59] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:38:29] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:38:29] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:38:54] <sinma> Someone tell me that a language inspired typestate
[19:38:59] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:38:59] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:39:14] <sinma> And not much,
[19:39:29] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:39:29] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:40:00] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:40:00] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:40:30] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:40:30] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:41:00] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:41:00] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:41:30] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:41:30] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:41:50] *** Joins: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com)
[19:42:00] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:42:00] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:42:30] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:42:30] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:43:00] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:43:00] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:43:31] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:43:31] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:43:46] *** Quits: dandy (Dandy@moz-84CC8377.hsd1.co.comcast.net) (Quit: Leaving)
[19:44:01] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:44:01] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:44:57] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:44:57] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:45:26] <sinma> Anybody?
[19:45:27] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:45:27] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:45:47] <steveklabnik> sinma: i just re-joined, what's up?
[19:45:57] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:45:57] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:46:21] <sinma> what are the language that inspired currently implemented Rust features?
[19:46:27] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:46:27] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:46:33] *** Quits: aeqwa (aeqwa@moz-E0502FA3.dsl.tropolys.de) (Quit: Lost terminal)
[19:46:37] <steveklabnik> the biggest ones are C++, OCaML, and erlang
[19:46:40] <sinma> Because one language named on the doc inspired typestates for example
[19:46:57] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:46:57] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:47:01] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Connection reset by peer)
[19:47:05] <steveklabnik> wow Yoric's client is really acting up
[19:47:27] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:47:27] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:47:29] <orshem> hi, sorry to spam but are there examples of how to use the new io?
[19:47:32] <sinma> In the doc, there’s mention of NIL et Herme, Erlang, Sather, Newsqueak, Napier et Napier88
[19:47:38] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[19:47:50] <steveklabnik> orshem: what are you trying to do with it?
[19:47:57] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:47:57] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:47:57] <sinma> orshem: there are examples in the doc, if I found it
[19:48:23] *** Joins: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net)
[19:48:27] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:48:27] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:48:34] <orshem> steveklabnik, basics :). read/write text file
[19:48:36] <orshem> s
[19:48:40] <steveklabnik> one moment
[19:48:48] <steveklabnik> (it was files vs say, tcp that i was wondering)
[19:48:50] <orshem> sinma, of the new io?
[19:48:57] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:48:57] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:49:08] <sinma> For the new print! and println! syntax
[19:49:11] *** Joins: dandy (Dandy@moz-84CC8377.hsd1.co.comcast.net)
[19:49:22] <sinma> As for the input, I can tell you examples
[19:49:25] <steveklabnik> orshem: basic examples here: http://static.rust-lang.org/doc/0.8/std/rt/io/index.html
[19:49:27] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:49:27] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:49:53] <steveklabnik> orshem: file stuff here: http://static.rust-lang.org/doc/0.8/std/rt/io/file/fn.open.html
[19:49:57] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:49:57] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:50:27] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[19:50:27] *** ChanServ sets mode: +o pnkfelix
[19:50:27] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:50:27] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:50:30] <sinma> It’s outdated, no? e.g.: for stdin().each_line |line| { println(line) }
[19:50:37] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[19:50:51] <steveklabnik> i dont know, i've been doing tcp
[19:50:57] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:50:57] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:51:00] <steveklabnik> if it is we should fix it
[19:51:01] <sinma> It may be `for line in stdin().each_line() {…}`
[19:51:09] <orshem> steveklabnik, thanks!!
[19:51:27] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:51:27] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:51:46] <dandy> are there any conventions for where to put tests?
[19:51:57] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:51:57] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:52:06] <steveklabnik> dandy: it's still shaking out, but there are two
[19:52:10] <steveklabnik> rustpkg expects a test.rs
[19:52:22] <steveklabnik> some are using those for integration style tests, bigger ones
[19:52:25] <dandy> steveklabnik, right next door to lib.rs?
[19:52:26] <steveklabnik> and unit tests in the same file
[19:52:27] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:52:27] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:52:28] <steveklabnik> yup
[19:52:42] <steveklabnik> even when not using rustpkg, I bet that'll be the convention
[19:52:48] <dandy> so rustpkg will only run "integration tests" and rustc will run all tests?
[19:52:48] *** Joins: pyrac (pyrac@moz-1C318C84.w92-162.abo.wanadoo.fr)
[19:52:58] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:52:58] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:53:00] <steveklabnik> well, rustpkg test was only implemented two days ago
[19:53:04] <steveklabnik> i'd like to have it run all the tests
[19:53:28] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:53:28] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:53:37] <dandy> so for now I should probably just put unit tests in the file that most related to them, at the bottom I suppose
[19:53:42] <steveklabnik> yup
[19:53:45] <steveklabnik> seems good
[19:53:55] <dandy> thanks
[19:53:58] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:53:58] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:54:23] *** Joins: jordyd (jordyd@moz-6D07A7DF.seg57.ucf.edu)
[19:54:28] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:54:28] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:54:52] <sinma> I heard that loop will be removed
[19:54:58] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:54:58] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:55:10] <sinma> Is it true?
[19:55:19] <steveklabnik> yes
[19:55:23] <steveklabnik> it will be called 'continue'
[19:55:24] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[19:55:28] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:55:28] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:55:34] <steveklabnik> they're synonyms on master, iirc
[19:55:59] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:55:59] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:56:29] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:56:29] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:56:37] *** Quits: orshem (orshem@F0A9EA9.588A166C.E3D28531.IP) (Quit: Leaving)
[19:56:46] <mib2> I have a *c_char (C string) that I want to log via error!(), but I am having difficulty.
[19:56:48] <sinma> Ok,
[19:56:50] <sinma> thx
[19:56:59] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:56:59] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:57:08] <mib2> This C string is an error message.
[19:57:14] <steveklabnik> makes sense
[19:57:16] <steveklabnik> what's the probleM
[19:57:28] <mib2> I am trying: `let err_str = unsafe { CString::new(err, false).as_str().unwrap() };`
[19:57:29] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:57:29] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:57:38] <mib2> but I get the error: borrowed value does not live long enough
[19:57:43] *** Quits: kbroder (Mibbit@35ED2E10.75B49943.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:57:52] <mib2> I am sure that this is way more complicated than it needs to be.
[19:57:59] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:57:59] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:58:04] <mib2> but I don't know the solution
[19:58:12] *** Joins: maik (maik@moz-41A4E36A.dip0.t-ipconnect.de)
[19:58:13] <steveklabnik> mmmmmm this sounds silly
[19:58:16] <steveklabnik> but what about
[19:58:29] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:58:29] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:58:59] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:58:59] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[19:59:02] <steveklabnik> let x = CString::new(err, false); let err_str = unsafe{ x.as_str().unwrap() };
[19:59:04] <sinma> Can I access all the libc functions through std::libc?
[19:59:16] <steveklabnik> sinma: you shoud, as far as i know
[19:59:29] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[19:59:29] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[20:00:00] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[20:00:00] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[20:00:22] <steveklabnik> actually
[20:00:30] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[20:00:30] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[20:00:32] <steveklabnik> hmmm
[20:00:50] <steveklabnik> yeah, your approach seems like the simplest one
[20:00:59] <steveklabnik> you'll need SOMETHING unsafe if you're willing to guarantee the string is always good
[20:01:00] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[20:01:00] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[20:01:01] *** Quits: maik (maik@moz-41A4E36A.dip0.t-ipconnect.de) (Ping timeout)
[20:01:30] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[20:01:30] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[20:02:00] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[20:02:00] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[20:02:17] *** Quits: sp3d (a@6361F3B1.19CD1E54.8354FB35.IP) (Ping timeout)
[20:02:30] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[20:02:30] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[20:02:38] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[20:02:42] <mib2> steveklabnik: Splitting it up with a temporary `x` is the only way that I can get it to work.
[20:02:49] <mib2> Your solution was fine.
[20:02:58] <steveklabnik> cool. seems awkward. unsure if there's a better way
[20:03:01] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[20:03:01] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[20:03:03] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[20:03:11] <steveklabnik> i bet you could use a named lifetime of some kind ;)
[20:03:25] *** Quits: mikezaby (mikezaby@moz-908EA8DE.home.otenet.gr) (Input/output error)
[20:03:31] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[20:03:31] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[20:03:39] <Ms2ger> Well, in `let err_str = unsafe { CString::new(err, false).as_str().unwrap() };`, the CString will always die at the end of the statement, no?
[20:04:01] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[20:04:01] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[20:04:04] <steveklabnik> right
[20:04:06] <steveklabnik> that's the error
[20:04:31] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[20:04:31] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[20:04:49] *** Quits: bytewise (bytewise@moz-4A801D04.unitymediagroup.de) (Quit: Leaving)
[20:04:53] <Ms2ger> Maybe with a .to_owned()
[20:04:57] *** Quits: lolcatz (Mibbit@50E1805B.387BC77F.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:05:01] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[20:05:01] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[20:05:04] <sinma> rusti: for line in io::stdin().each_line() { println(line) }
[20:05:05] -rusti- pastebinned 11 lines of output: http://sprunge.us/BJfc
[20:05:09] <sinma> It doesn’t work
[20:05:16] <steveklabnik> seems bad :(
[20:05:19] *** Quits: pyrac (pyrac@moz-1C318C84.w92-162.abo.wanadoo.fr) (Quit: pyrac)
[20:05:21] <sinma> What do I wrong?
[20:05:27] <mib2> I get the same error with unsafe { error!("Error: %s", CString::new(err, false).as_str().unwrap()); }
[20:05:31] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[20:05:31] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[20:05:43] <steveklabnik> sinma: oh, you might have to use std::rt::io;
[20:06:01] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[20:06:01] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[20:06:08] *** Joins: mib_82ztfh (Mibbit@D0BAA3E1.AA9008B0.DDE5D3F6.IP)
[20:06:12] <steveklabnik> rusti: for line in io::stdin().each_line() { println(line) }
[20:06:13] -rusti- pastebinned 11 lines of output: http://sprunge.us/PYDE
[20:06:13] <steveklabnik> oops
[20:06:24] <steveklabnik> rusti: use std::rt::io; for line in io::stdin().each_line() { println(line) }
[20:06:25] -rusti- pastebinned 7 lines of output: http://sprunge.us/BDaB
[20:06:32] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[20:06:32] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[20:06:33] <sinma> Doesn’t work for me
[20:06:42] <sinma> What the hell with Yoric
[20:06:49] <steveklabnik> yeah, now it knows what io is but something is still wrong
[20:06:54] <steveklabnik> yeah Yoric :(
[20:07:02] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[20:07:02] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[20:07:16] *** Joins: alk (alk@moz-32A9FF6A.fbxo.proxad.net)
[20:07:32] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[20:07:32] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[20:08:02] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[20:08:02] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[20:08:07] <sinma> That io problems are annoying
[20:08:32] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[20:08:32] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[20:09:03] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[20:09:03] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[20:09:33] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[20:09:33] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[20:09:41] *** jdm|f00d is now known as jdm
[20:10:03] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[20:10:03] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[20:10:21] *** Quits: jordyd (jordyd@moz-6D07A7DF.seg57.ucf.edu) (Ping timeout)
[20:10:29] <sinma> And int::from_str() doesn’t work anymore
[20:10:33] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[20:10:33] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[20:10:42] *** jdm sets mode: +b Yoric!*@*
[20:10:43] <steveklabnik> sinma: from_str::<int>
[20:10:48] <sinma> Ok
[20:10:50] <steveklabnik> jdm: <3 <3 <3
[20:11:15] <steveklabnik> rusti: from_str::<int>("5")
[20:11:16] -rusti- Some(5)
[20:11:24] <steveklabnik> :D
[20:12:02] <sinma> I didn’t know they’ve changed that
[20:12:08] <steveklabnik> it was a while back
[20:12:12] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[20:12:16] <sinma> Thx. But I’ve still my previous problem
[20:12:28] <steveklabnik> that io sample?
[20:12:36] <sinma> Oh, it’s a program I’ve made when I tested 0.7 «stable
[20:12:37] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[20:12:55] <sinma> yes, for line in stdin.each_line() {…}
[20:12:56] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[20:13:23] <sinma> I make a new on Rust, and file reading is an interesting example
[20:13:30] <sinma> a news
[20:16:37] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[20:18:40] <sinma> Acces denied: http://static.rust-lang.org/doc/0.8/std/fmt/parse/Argument/structfield.format.html
[20:18:44] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[20:19:23] <steveklabnik> which docs is that supposed to be?
[20:19:28] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[20:19:38] <sinma> std::fmt::parse::Argument::format
[20:19:49] <sinma> Appears when I type «format» and search
[20:19:56] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:20:00] <steveklabnik> http://static.rust-lang.org/doc/0.8/std/fmt/parse/struct.Argument.html
[20:20:02] <steveklabnik> has no link t othat
[20:20:05] <steveklabnik> search :/ 
[20:20:08] <steveklabnik> cmr: ^^^^^^
[20:20:41] <sinma> I still search the doc about formatting on the doc…
[20:21:01] <steveklabnik> http://static.rust-lang.org/doc/0.8/std/fmt/index.html
[20:21:03] <steveklabnik> has a LOT of info
[20:21:40] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[20:21:42] *** jdm sets mode: -b Yoric!*@*
[20:21:44] <sinma> I wonder fmt was the previous io
[20:21:51] *** Quits: fabiand (fabiand@moz-C69053D9.static.qsc.de) (Quit: Verlassend)
[20:21:53] <sinma> evil trap
[20:22:03] <sinma> You’ve renommed ifmt
[20:22:04] <steveklabnik> fmt! is going away, format! is the future
[20:22:15] <steveklabnik> i think fmt! might even be gone on master
[20:22:20] <steveklabnik> or there's a PR open or something
[20:22:40] <sinma> yes, I know that
[20:22:49] <sinma> This is why I didn’t search for fmt
[20:22:49] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[20:22:57] *** Quits: mib_82ztfh (Mibbit@D0BAA3E1.AA9008B0.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:23:22] *** Quits: phaer (user@moz-8B932D8B.home.otenet.gr) (Ping timeout)
[20:23:33] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[20:24:11] *** Joins: ksev (DrunkenPan@moz-71F7E457.cable.teksavvy.com)
[20:24:24] <sinma> Why you tell me to use std::rt?
[20:24:35] <sinma> std::rt::io
[20:24:39] <steveklabnik> all io should be through std::rt::io
[20:24:45] <sinma> It’s going to replace std::io?
[20:24:50] <steveklabnik> std::io is 'full of bugs and going away', to quote someone else
[20:24:54] <steveklabnik> yup
[20:25:16] <sinma> And my example with each_line() still doesn’t compile!
[20:25:39] <sinma> Rust doc is a bit difficult to read for me
[20:26:42] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[20:26:56] <sinma> and std::rt::io.stdin().read_line() doesn’t work for me
[20:27:04] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[20:27:14] <sinma> Am i stupid, or Rust doesn’t like me today?
[20:27:17] <steveklabnik> if you can pastie me some code i can try to help you.
[20:27:23] <steveklabnik> i haven't done any file io myself
[20:28:11] <sinma> Oh it’s not about file here, because I try first with stding
[20:28:14] <sinma> *stdin
[20:28:18] <steveklabnik> i've only done tcp
[20:28:35] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[20:30:01] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:30:29] <sinma> Are some features absent from rt::io? Cause I can’t compile anything when using it, I’ve always damn errors
[20:30:43] <steveklabnik> like i said, i've only done tcp, so i can't tell you
[20:30:57] <steveklabnik> i can check it out if you can give me some code that's broken
[20:31:02] <steveklabnik> if the docs are wrong i'll fix them
[20:31:18] <sfackler> some parts of rt::io are only sketched out. all of the native stuff fails for exampl
[20:31:46] *** Quits: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com) (Connection reset by peer)
[20:32:09] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[20:32:32] <sfackler> does anyone know if it's possible to make a public newtype with a private constructor?
[20:32:35] *** Joins: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com)
[20:33:43] *** Joins: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP)
[20:34:30] *** Joins: jdsanders (Adium@moz-F45527D6.hlrn.qwest.net)
[20:35:07] <sinma> I will check rt::io doc
[20:36:05] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[20:36:15] *** Quits: jdsanders (Adium@moz-F45527D6.hlrn.qwest.net) (Ping timeout)
[20:38:00] *** Quits: krdln (Mibbit@moz-6F8A8560.dynamic.chello.pl) (Quit: http://www.mibbit.com ajax IRC Client)
[20:38:16] *** Quits: jviereck (Adium@moz-4C9C4638.dip0.t-ipconnect.de) (Quit: Leaving.)
[20:39:04] *** Joins: jviereck (Adium@moz-4C9C4638.dip0.t-ipconnect.de)
[20:39:52] *** Quits: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[20:41:19] *** Quits: canhtak (jeremy@877D54DD.7A8E554D.FC900DAF.IP) (Quit: canhtak)
[20:43:00] <sinma> After trying to understand rt::io doc, I am still not able to compile my code!
[20:43:03] *** Quits: jviereck (Adium@moz-4C9C4638.dip0.t-ipconnect.de) (Quit: Leaving.)
[20:43:05] <sinma> rusti: for line in io::stdin().each_line { println(line) }
[20:43:05] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[20:43:06] -rusti- pastebinned 11 lines of output: http://sprunge.us/VYCA
[20:43:20] <sinma> oooops
[20:43:26] <sinma> rusti: for line in std::rt::io::stdin().each_line { println(line) }
[20:43:27] -rusti- <anon>:7:21: 7:51 error: attempted to take value of method `each_line` on type `std::rt::io::stdio::StdReader` (try writing an anonymous function)
[20:43:27] -rusti- <anon>:7          for line in std::rt::io::stdin().each_line { println(line) }
[20:43:27] -rusti-                               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[20:43:27] -rusti- error: aborting due to previous error
[20:43:27] -rusti- application terminated with error code 101
[20:43:39] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[20:44:33] *** Quits: masondesu (masondesu@moz-75054A8B.gsp.bellsouth.net) (Quit: Computer has gone to sleep.)
[20:45:13] <sinma> Same error with std::io
[20:46:00] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[20:46:03] <sfackler> rusti: for std::rt::io::stdin().each_line |line| { println(line) }
[20:46:03] -rusti- <anon>:7:33: 7:34 error: expected `in`, found `.`
[20:46:03] -rusti- <anon>:7          for std::rt::io::stdin().each_line |line| { println(line) }
[20:46:04] -rusti-                                           ^
[20:46:04] -rusti- application terminated with error code 101
[20:46:12] <sfackler> rusti: do std::rt::io::stdin().each_line |line| { println(line) }
[20:46:13] -rusti- <anon>:7:9: 7:67 error: failed to find an implementation of trait std::io::Reader for std::rt::io::stdio::StdReader
[20:46:13] -rusti- <anon>:7          do std::rt::io::stdin().each_line |line| { println(line) }
[20:46:13] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[20:46:13] -rusti- application terminated with error code 101
[20:46:24] <sfackler> rusti: do std::io::stdin().each_line |line| { println(line) }
[20:46:25] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[20:46:25] -rusti- <anon>:7:46: 7:63 error: mismatched types: expected `bool` but found `()` (expected bool but found ())
[20:46:25] -rusti- <anon>:7          do std::io::stdin().each_line |line| { println(line) }
[20:46:25] -rusti-                                                        ^~~~~~~~~~~~~~~~~
[20:46:26] -rusti- error: aborting due to previous error
[20:46:26] -rusti- application terminated with error code 101
[20:46:56] <sfackler> std::io::stdin::each_line still uses the old internal iterator setup
[20:47:10] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[20:47:51] <sfackler> and std::rt::io::stdin() isn't implemented yet
[20:47:57] <sfackler> pub fn stdin() -> StdReader { fail!() }
[20:48:19] <sinma> damn
[20:48:27] <sinma> So I can read files
[20:49:01] <sinma> *can’t
[20:49:34] <strcat> sinma: not sure where you got that from what sfackler said
[20:49:51] <strcat> you just can't use the for loop with it
[20:50:26] <steveklabnik> the docs are kinda bad then :/
[20:51:59] <sinma> So, can I read file?
[20:52:18] <sinma> *how can I read files?
[20:52:28] *** Quits: ksev (DrunkenPan@moz-71F7E457.cable.teksavvy.com) (Ping timeout)
[20:52:43] <sinma> I must use a loop {}?
[20:53:17] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[20:53:28] <Ms2ger> rusti: do std::io::stdin().each_line |line| { println(line) };
[20:53:28] -rusti- <anon>:7:46: 7:63 error: mismatched types: expected `bool` but found `()` (expected bool but found ())
[20:53:28] -rusti- <anon>:7          do std::io::stdin().each_line |line| { println(line) };
[20:53:28] -rusti-                                                        ^~~~~~~~~~~~~~~~~
[20:53:29] -rusti- error: aborting due to previous error
[20:53:29] -rusti- application terminated with error code 101
[20:53:32] <Ms2ger> rusti: do std::io::stdin().each_line |line| { println(line): }
[20:53:33] -rusti- <anon>:7:61: 7:62 error: expected one of `; }` but found `:`
[20:53:33] -rusti- <anon>:7          do std::io::stdin().each_line |line| { println(line): }
[20:53:33] -rusti-                                                                       ^
[20:53:35] <Ms2ger> Bah
[20:53:35] -rusti- application terminated with error code 101
[20:53:37] <Ms2ger> rusti: do std::io::stdin().each_line |line| { println(line); }
[20:53:37] -rusti- <anon>:7:46: 7:64 error: mismatched types: expected `bool` but found `()` (expected bool but found ())
[20:53:40] -rusti- <anon>:7          do std::io::stdin().each_line |line| { println(line); }
[20:53:42] -rusti-                                                        ^~~~~~~~~~~~~~~~~~
[20:53:43] <Ms2ger> Oh, bool
[20:53:45] -rusti- error: aborting due to previous error
[20:53:46] -rusti- application terminated with error code 101
[20:53:50] * Ms2ger shuts up
[20:54:11] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[20:54:33] *** Joins: kvark (Mibbit@3CE6C4B2.8C19BC3D.26E1259.IP)
[20:54:45] <sinma> Works with loop
[20:55:16] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[20:55:21] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[20:55:30] <kvark> I've upgrading to 0.8, and see even more issues with fixed-size arrays. For example, #[deriving(Eq)] doesn't work any more with a struct containing fixed-size array
[20:55:45] <kvark> s/I've/I'm/
[20:56:02] <kvark> is this a known regression?
[20:56:04] *** tikue_ is now known as tikue-
[20:56:07] <steveklabnik> hmmmmmmmmmm
[20:56:31] <steveklabnik> kvark: https://github.com/mozilla/rust/blob/0.8/RELEASES.txt#L314-L315
[20:56:32] <steveklabnik> ?
[20:56:35] <kvark> #[deriving(Clone)] doesn't work for them either :(
[20:56:53] <steveklabnik> oh wait
[20:56:56] <steveklabnik> that was from 0.6
[20:56:57] <tikue-> rusti: #[deriving(Eq)] struct Foo { a: [int, ..5] }
[20:56:58] <steveklabnik> shuts up
[20:56:58] -rusti- ()
[20:57:03] <tikue-> works fine?
[20:57:08] <kvark> hmm
[20:57:19] <kvark> error: failed to find an implementation of trait std::cmp::Eq for [uint, .. 2]
[20:57:35] <tikue-> rusti: #[deriving(Eq)] struct Foo { a: [int, ..5] } Foo { a: [1, 2, 3, 4, 5] } == Foo { a: [1, 2, 3, 4, 5] }
[20:57:35] -rusti- <anon>:7:54: 7:87 error: binary operation == cannot be applied to type `main::Foo`
[20:57:35] -rusti- <anon>:7          #[deriving(Eq)] struct Foo { a: [int, ..5] } Foo { a: [1, 2, 3, 4, 5] } == Foo { a: [1, 2, 3, 4, 5] }
[20:57:36] -rusti-                                                                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[20:57:36] -rusti- error: aborting due to previous error
[20:57:37] -rusti- application terminated with error code 101
[20:58:32] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[20:58:37] <kvark> rusti: #[deriving(Eq)] struct Foo { a : [uint, ..2] }
[20:58:46] -rusti- ()
[20:59:17] <kvark> rusti: type Vector=[uint,..2]; #[deriving(Eq,IterBytes)] struct Foo {v:Vector}
[20:59:18] -rusti- ()
[20:59:23] <kvark> weird
[20:59:34] <kvark> is rusti on 0.8?
[20:59:45] <steveklabnik> unsure
[20:59:45] <tikue-> it's updated daily so no
[20:59:50] <kvark> ha
[21:00:47] *** Joins: akash_07 (Mibbit@67638EE5.A8D618E.1C37C358.IP)
[21:00:54] <tikue-> perhaps it is indeed broken in .8
[21:01:33] <kvark> yep, I just checked same cases locally - 0.8 is broken
[21:02:15] <tikue-> i'm not so sure
[21:02:23] * kvark looking for existing issues
[21:02:24] <tikue-> i'm on HEAD of master and have the same issue
[21:02:26] <tikue-> i don't know what's going on
[21:02:32] <kvark> oh
[21:02:34] <kvark> interesting
[21:02:46] <kvark> maybe rusti is on incoming then?..
[21:04:07] *** Joins: agrif (agrif@moz-94847975.net)
[21:04:11] <nejucomo> Ugh…  The memory regressions are killing me.  There's like a 30% chance of compilation succeeding without memory exhaustion on my poor little vm here.
[21:04:29] <nejucomo> I was looking into a macro bug, but perhaps I should try to fix the memory regressions.
[21:04:36] <tikue-> do eet
[21:05:45] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[21:05:52] *** Quits: engla (engla@moz-9B69FE7C.selucle.dyn.perspektivbredband.net) (Ping timeout)
[21:06:12] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[21:06:57] *** Quits: squiddy (squiddy@moz-543CC057.adsl.alicedsl.de) (Ping timeout)
[21:07:03] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[21:07:03] *** ChanServ sets mode: +o pnkfelix
[21:07:44] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[21:07:56] *** Quits: mib2 (Mibbit@moz-9C700C0E.sub-70-209-8.myvzw.com) (Quit: http://www.mibbit.com ajax IRC Client)
[21:07:58] <kvark> rusti: type Vector=[uint,..2]; #[deriving(Eq,IterBytes,Clone)] struct Foo {v:Vector}
[21:07:59] -rusti- ()
[21:08:08] <kvark> doh
[21:09:29] <nejucomo> Hrm…  it looks like some git funniness I'm not familiar with:
[21:09:30] <nejucomo> $ git checkout master
[21:09:30] <nejucomo> Already on 'master'
[21:09:30] <nejucomo> Your branch is ahead of 'origin/master' by 9020 commits.
[21:09:30] <nejucomo>   (use "git push" to publish your local commits)
[21:09:48] <steveklabnik> :)
[21:09:49] *** Joins: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net)
[21:09:50] <nejucomo> I certainly don't recall making 9020 commits.
[21:09:52] <benh> did you rebase or something?
[21:10:00] <steveklabnik> nejucomo: what's your `git remote -v`
[21:10:01] <tikue-> nejucomo: try git fetch && git checkout origin/master
[21:10:09] <nejucomo> Not that I recall.
[21:10:16] <benh> try git reset origin/master
[21:10:40] <benh> potentially losing 9020 commits worth of work..
[21:10:51] <nejucomo> I did something kind of funny: git checkout /path/to/mozilla/rust/checkout; then I edited .git/config and cut'n'pasted the origin / branch sections from my original commit.
[21:11:00] <steveklabnik> o-O
[21:11:03] <nejucomo> I think I'll just git clone from scratch.
[21:11:07] <tikue-> uhh
[21:11:08] <tikue-> lol
[21:11:11] <tikue-> ok
[21:11:32] <benh> do you mean git clone?
[21:12:04] <nejucomo> benh: Yeah.
[21:12:25] <nejucomo> I thought I could save the bandwidth of pulling everything down again, but obviously my git is too shaky for such shenanigans.
[21:12:30] <benh> Shouldn't really cause problems
[21:12:38] <benh> I'd just try git reset :)
[21:12:52] <steveklabnik> nejucomo: you use --depth for that
[21:12:53] <steveklabnik> in the future
[21:12:59] <nejucomo> Too late.  I nuked that directory and I'm doing a fresh git clone.
[21:13:00] <benh> but then you can't make commits
[21:13:03] <steveklabnik> git clone whatever --depth 5
[21:13:07] <benh> or pull requests rather
[21:13:09] <steveklabnik> will only fetch the last x
[21:13:19] <nejucomo> Oh, another detail is I did a github fork…  Maybe I forked the wrong branch which became "master" in my own repository?
[21:13:57] <steveklabnik> :/
[21:14:33] *** Quits: akash_07 (Mibbit@67638EE5.A8D618E.1C37C358.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:14:40] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[21:15:00] <nejucomo> Yeah…  wtf.  I just cloned from my fork, and now I have: 5005be6 graydon@mozilla.com - (HEAD, origin/snap-stage3, origin/master, origin/HEAD, master) 
[21:15:16] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[21:15:26] <steveklabnik> you _probably_ had origin as your fork, and upstream as mozilla/rust
[21:15:32] <steveklabnik> hence my question about remote -v ;)
[21:15:52] <steveklabnik> 'origin' isn't enough information
[21:15:53] *** Quits: nkoep (nik@moz-1A45C073.vpn.rwth-aachen.de) (Ping timeout)
[21:15:53] <nejucomo> -but this page makes it look like mozilla master is 9883a625: https://github.com/mozilla/rust/commits/master
[21:16:18] <steveklabnik> right, but your fork isnt
[21:16:18] <steveklabnik> https://github.com/nejucomo/rust
[21:16:22] <steveklabnik> because you haven't updated it
[21:16:27] <steveklabnik> in a few thousand commits ;)
[21:16:31] <benh> then git reset wouldn't help, yeah :)
[21:16:39] <steveklabnik> tl;dr do this:
[21:16:49] <steveklabnik> git clone https://github.com/nejucomo/rust
[21:16:50] <steveklabnik> cd rust
[21:17:01] <steveklabnik> git remote add upstream https://github.com/mozilla/rust
[21:17:03] <steveklabnik> git fetch upstream
[21:17:15] <steveklabnik> git reset --hard upstream/master
[21:17:21] <nejucomo> steveklabnik: So, when I'm on github and I click "fork" what happens?
[21:17:26] <steveklabnik> git push origin master
[21:17:30] <steveklabnik> then your local fork will be exactly the same 'reset --hard' as upstream/master
[21:17:37] <steveklabnik> nejucomo: it makes you a new git repository
[21:17:45] <steveklabnik> that's a clone of whatever it was at the time you clicked fork
[21:17:55] <steveklabnik> it won't update unless you tell it to
[21:18:16] <nejucomo> Ah…  That's obnoxious.  I guess I was looking at …  well I don't know why I was looking at non-master.
[21:18:27] <steveklabnik> it's actually really, really nice.
[21:18:36] <steveklabnik> but yeah, it can be confusing until you understand what's up.
[21:18:42] *** Joins: Voomer (Voomer@moz-CC05FF5E.hsd1.wa.comcast.net)
[21:19:05] <nejucomo> steveklabnik: Thanks for the tl;dr instructions.
[21:19:26] <steveklabnik> any time. git is really simple, but not easy
[21:19:33] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[21:19:34] <steveklabnik> (if you're a rich hickey fan. i'm not, but i like that bit.)
[21:19:45] <nejucomo> I would much rather have the web ui clone the exact state of the parent, and then if I want to fiddle with branches I can do so on the commandline...
[21:19:51] <steveklabnik> it does!
[21:19:55] <steveklabnik> it just doesn't change from out under you
[21:20:05] <strcat> kvark: deriving doesn't work in a function scope
[21:20:10] <steveklabnik> it's fundamnetal to the way git works
[21:20:17] <strcat> the rusti bot compiles the input as part of a main function
[21:20:27] <strcat> and it compiles it with rustc
[21:20:31] <nejucomo> steveklabnik: I think my confusion is *github* not git.
[21:20:36] <steveklabnik> you might want to read through http://git-scm.com/book
[21:20:47] <steveklabnik> github just does operations on git repositories
[21:20:53] <steveklabnik> the fork button is just 'git clone'
[21:20:59] <nejucomo> I just clicked fork maybe 30 minutes ago, but for some reason the master of my fork is some ancient revision.  I don't understand why.
[21:21:10] <steveklabnik> ahhhhh THAT is a problem, yes
[21:21:14] <steveklabnik> fork should NOT do that
[21:21:18] <steveklabnik> that sounds like a bug.
[21:21:20] <steveklabnik> in github.
[21:21:26] <steveklabnik> i thought you clicked fork long ago, my apologies
[21:21:46] <nejucomo> -or it "automagically" sets master based on the context in which you click fork?
[21:21:49] *** Joins: maik (maik@moz-41A4E36A.dip0.t-ipconnect.de)
[21:21:50] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[21:21:57] <kvark> strcat: I don't think I understand what the "function scope" is here. I'm just declaring structs in the root of *.rs files.
[21:22:00] <steveklabnik> i don't know, that wouldn't make sense.
[21:22:12] <steveklabnik> anyway, this isn't #github, i'm glad stuff is right now
[21:22:13] <nejucomo> Actually, maybe I did click fork a long time ago.  If that were the case, and I clicked fork today, what would happen?
[21:22:16] <strcat> kvark: I'm telling you that the bot (rusti) runs what you type in main
[21:22:17] * nejucomo clicks fork again...
[21:22:19] <strcat> and deriving doesn't work there
[21:22:24] <steveklabnik> nejucomo: nothing, it takes you to your fork
[21:22:37] <nejucomo> -ah, yeah, that must be what happened.
[21:22:41] <nejucomo> Ok, my sanity is restored.
[21:22:50] <steveklabnik> +!
[21:22:51] <steveklabnik> +1
[21:22:53] <steveklabnik> :)
[21:23:08] <nejucomo> I guess I expected it to say: "You already have a fork."
[21:23:22] <tikue-> strcat: does deriving(eq) not work on fixed size arrays now?
[21:23:30] <steveklabnik> it used to give some sort of message, 'you alreayd have one, go to it?'
[21:23:43] <strcat> tikue-: never did? fixed-size arrays don't have methods
[21:23:52] <kvark> strcat: so deriving on fixed-size *only* works inside main() now?
[21:23:54] <tikue-> strcat: ah ok
[21:23:57] <strcat> kvark: no
[21:24:00] <strcat> I am not saying that
[21:24:01] *** Quits: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com) (Ping timeout)
[21:24:03] <steveklabnik> nejucomo: in fact it still does. your icon is gray'd out and if you mouseover it says 'go to your fork'
[21:24:06] <strcat> kvark: deriving does not work inside function scope, like inside of main
[21:24:10] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[21:24:11] <strcat> it just plain doesn't do anything
[21:24:13] *** Joins: tjc (tjc@moz-B74A81FA.hsd1.ca.comcast.net)
[21:24:13] *** ChanServ sets mode: +o tjc
[21:24:16] <strcat> it won't error out because it's doing nothing
[21:24:42] <tikue-> that seems like the wrong behavior lol
[21:24:58] <exia> i have an array argv (~[~str]), which has some values. i also have another array temp (~[~str]) initialized to ~[]. why am i not allowed to do "temp[0]=argv[0]"? (i get "cannot move out of captured outer variable rust")
[21:25:12] <kvark> strcat: ok, I see. So what about it nor working at all? A known regression/issue?
[21:25:12] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[21:25:20] <strcat> kvark: not a regression, never worked
[21:25:32] <strcat> known issue though
[21:25:35] <nejucomo> Is it possible to "shadow" impls?  Say: struct T {…}; impl T {…}; fn foo() { impl T {…}; … }
[21:25:41] <kvark> strcat: wrong. IterBytes worked for me on 0.6
[21:25:43] <Ms2ger> exia, what would argv[0] be after that?
[21:25:49] <strcat> kvark: I am not talking about IterBytes
[21:25:54] <strcat> I am saying deriving doesn't work in function scope
[21:25:57] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[21:26:05] <strcat> and fixed-size arrays don't implement any traits
[21:26:24] <exia> it should stay the same? or is it set up in rust such that an assignment is not a simple copy?
[21:26:25] <strcat> don't know where I'm not being clear, have not said anything about specific traits or deriving working or not working in general
[21:26:27] <kvark> strcat: #deriving(Eq,IterBytes) worked for me, on 0.6, on a struct with fixed-size arrays
[21:26:52] <strcat> yeah, it may have worked because they coerce to slices
[21:26:53] <kvark> I was on 0.6 until now, and now on 0.8 it complained
[21:26:58] <strcat> but it's not entirely correct that it did work
[21:26:58] <kvark> hmm
[21:27:28] <kvark> strcat: ok, thanks. I'll implement them manually for now
[21:27:33] <Ms2ger> exia, it can't stay the same, you can only have one owning pointer (~) pointing to one value
[21:27:37] *** Joins: jordyd (jordyd@7DAC4ACE.77F880E0.D9401097.IP)
[21:27:38] <tikue-> exia: it should work
[21:27:38] <strcat> fixed-size arrays just don't have a single method implemented on them
[21:27:39] <tikue-> rusti: let v1 = ~[1, 2, 3]; let mut v2 = ~[0]; v2[0] = v1[0]
[21:27:40] -rusti- ()
[21:27:49] <strcat> they'll happily coerce to slices
[21:28:23] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[21:28:33] <kvark> strcat: but slices have this stuff implemented, so it shouldn't be difficult to propagate it to fixed-size arrays
[21:28:34] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[21:28:50] <tikue-> rusti: let v1 = ~[~[1], ~[2], ~[3]]; let mut v2 = ~[~[0]]; v2[0] = v1[0]
[21:28:50] <exia> oh i see, so i will need to change temp to some other pointer type
[21:28:51] -rusti- error: internal compiler error: unexpected failure
[21:28:51] -rusti- note: the compiler hit an unexpected failure path. this is a bug
[21:28:51] -rusti- note: try running with RUST_LOG=rustc=1 to get further details and report the results to github.com/mozilla/rust/issues
[21:28:51] -rusti- ()
[21:29:12] <tikue-> Ms2ger: ~[] isn't an owning pointer
[21:29:31] <tikue-> rusti: let v1 = ~[~[1], ~[2], ~[3]]; let mut v2 = ~[~[0]]; v2[0] = v1[0]
[21:29:31] -rusti- ()
[21:29:39] <Ms2ger> tikue, this was about ~[~str], no?
[21:29:52] <tikue-> Ms2ger: I thought it was about ~[~[]]
[21:29:53] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[21:30:49] *** Joins: tautologico (lymph@7A53DAF8.92451A23.6EB699AE.IP)
[21:30:59] <tikue-> exia: you will probably need to clone 
[21:31:05] <tikue-> if you want to use the temp variable again
[21:31:05] <tikue-> rusti: let v1 = ~[~[1], ~[2], ~[3]]; let mut v2 = ~[~[0]]; v2[0] = v1[0].clone(); (v2, v1)
[21:31:07] -rusti- (~[~[1]], ~[~[1], ~[2], ~[3]])
[21:31:34] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[21:31:39] <Luqman> is  fhahn on irc?
[21:33:08] <exia> i don't think i know how to clone...would it work if i dereferenced the string from the owned pointer (~str) and then assign it to a temporary str variable and have that temporary variable be assigned to an element in temp vector?
[21:34:35] *** Quits: Ms2ger (Ms2ger@9D0A393.CB23CDC6.3773EA9F.IP) (Quit: nn)
[21:34:38] *** Joins: nkoep (nik@moz-9D188047.pool.mediaways.net)
[21:34:59] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[21:35:22] <tikue-> rusti: let mut v2 = ~[~"hi", ~"hey", ~"ho"]; let v1 = ~[~"how"]; v2[0] = v1[0].clone(); (v1, v2)
[21:35:24] -rusti- (~[~"how"], ~[~"how", ~"hey", ~"ho"])
[21:35:27] <tikue-> exia: is that not what you want ^ ?
[21:35:29] <nejucomo> exia: ~str cannot be dereferenced, because str is dynamically sized, from what I gather.
[21:36:06] <tikue-> exia: you could also use swap
[21:36:14] <exia> yes! that is what i wanted
[21:36:17] *** Joins: canhtak (jeremy@877D54DD.7A8E554D.FC900DAF.IP)
[21:36:26] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[21:36:57] <tikue-> rusti: use std::util::swap; let mut v2 = ~[~"hi", ~"hey", ~"ho"]; let mut v1 = ~[~"how"]; swap(&mut v2[0], &mut v1[0]); (v1, v2)
[21:36:59] -rusti- (~[~"hi"], ~[~"how", ~"hey", ~"ho"])
[21:37:08] <exia> thank you, but where do i find the documentation for vectors? i couldnt locate functions for non-io stuff...
[21:37:30] <tikue-> exia: std::vec
[21:37:31] <exia> the only ones i found were .push, .remove
[21:37:36] <exia> i see, thank you
[21:37:40] <tikue-> http://static.rust-lang.org/doc/master/std/vec/index.html
[21:37:55] <tikue-> exia: a lot of the methods are buried in the traits though
[21:38:18] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[21:38:19] <tikue-> i think that needs a nicer way of being organized because really most people probably don't care about the traits, they just want to see a comprehensive list of what they can do with vectors
[21:38:21] <tikue-> but idk
[21:38:35] <tikue-> i understand why it's organized as it is
[21:38:58] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[21:39:40] <tikue-> rust-lang's docs now remind me of an old article by mark rosewater (magic the gathering lead) http://www.wizards.com/magic/magazine/article.aspx?x=mtgcom/daily/mr146
[21:39:45] <nejucomo> tikue-: It seems it would be good to provide both views: Show me all traits implemented, and one that is show me all methods implemented for this type on all known traits (with an obvious link to the relevant trait).
[21:39:52] *** Quits: heftig_ (heftig@moz-FC0CF353.dip0.t-ipconnect.de) (Ping timeout)
[21:40:07] <tikue-> nejucomo: yes, i think it's possible to have our cake and eat it too. different "views" is a nice idea
[21:40:10] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[21:41:25] *** Quits: tikue- (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue-)
[21:41:25] *** Joins: slack1256 (slack@moz-B110B203.baf.movistar.cl)
[21:41:37] <nejucomo> Or we could replace the api doc links to that Mark Rosewater post.
[21:41:38] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[21:41:41] <nejucomo> ;-)
[21:41:58] *** Joins: heftig_ (heftig@moz-41907BDD.dip0.t-ipconnect.de)
[21:42:51] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[21:43:47] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[21:43:47] <SiegeLord> Is that not what already happens?
[21:44:02] <steveklabnik> nejucomo: which post?
[21:44:35] <SiegeLord> What's missing, I think, is an entry dedicated to [T]
[21:44:51] <SiegeLord> And so on
[21:44:55] *** Quits: sinma (sinma@moz-6A11C47C.fbx.proxad.net) (Ping timeout)
[21:45:27] *** Joins: sinma (sinma@moz-6A11C47C.fbx.proxad.net)
[21:45:40] *** Quits: sinma (sinma@moz-6A11C47C.fbx.proxad.net) (Quit: Konversation terminated!)
[21:45:47] <nejucomo> steveklabnik: I was just joking.  tikue- just pasted this: http://www.wizards.com/magic/magazine/article.aspx?x=mtgcom/daily/mr146
[21:46:09] <steveklabnik> ahahaha
[21:46:34] *** Quits: derboi_c (derboi_c@510621FB.DF3CA0D0.BA2F4534.IP) (Ping timeout)
[21:46:35] <SiegeLord> E.g. this: http://static.rust-lang.org/doc/0.8/extra/treemap/struct.TreeMap.html
[21:46:47] <SiegeLord> That's providing all the traits the type implements
[21:46:48] <nejucomo> SiegeLord: I'm not sure what you are talking about.  http://static.rust-lang.org/doc/0.8/std/vec/index.html
[21:46:49] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[21:47:03] <SiegeLord> All that's needed is the same page, but for built-in types
[21:47:18] <SiegeLord> If ~[] was not built in, then it'd already exist
[21:47:24] <nejucomo> Oh, I bet vectors are special...
[21:47:44] <nejucomo> I see.  Yeah, the struct example looks like what I hoped for.
[21:48:57] *** Joins: derboi_c (derboi_c@510621FB.DF3CA0D0.BA2F4534.IP)
[21:49:53] <maik> drop is &mut self now?
[21:49:57] <Eridius> yes
[21:50:14] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: night)
[21:50:24] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:50:44] <SiegeLord> Naturally you want to include all the built-in types... like int/uint etc... the same system could be used for types from external structs
[21:50:52] <SiegeLord> *external crates
[21:52:12] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[21:53:40] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[21:55:11] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[21:57:05] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[21:58:59] *** Quits: nkoep (nik@moz-9D188047.pool.mediaways.net) (Ping timeout)
[22:00:27] *** Quits: exia (Mibbit@moz-BBC77913.bootp.virginia.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[22:00:38] <maik> what did str::from_bytes become?
[22:01:19] <kvark> from_utf8
[22:01:19] *** Joins: ksev (DrunkenPan@moz-71F7E457.cable.teksavvy.com)
[22:01:31] <maik> ah thanks
[22:02:50] *** Joins: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[22:03:08] *** Quits: ksev (DrunkenPan@moz-71F7E457.cable.teksavvy.com) (Ping timeout)
[22:03:09] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[22:03:47] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[22:04:17] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[22:06:57] *** Joins: SealedSun (Mibbit@moz-CD16210D.cust.bluewin.ch)
[22:08:21] *** Joins: sp3d (a@6361F3B1.19CD1E54.8354FB35.IP)
[22:08:50] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[22:09:29] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[22:10:44] *** Quits: maik (maik@moz-41A4E36A.dip0.t-ipconnect.de) (Ping timeout)
[22:12:20] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Quit: 랜덤은 쇠퇴했습니다.)
[22:13:32] *** Joins: nkoep (nik@moz-751DDAE3.vpn.rwth-aachen.de)
[22:14:50] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Connection reset by peer)
[22:15:07] *** Joins: lolCatz (Mibbit@moz-F2E42C9D.hsd1.va.comcast.net)
[22:15:11] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[22:15:40] <lolCatz> how do you create an option::Option<int> ??
[22:15:42] <lolCatz> from an int
[22:15:45] <benh> Some(42)
[22:15:56] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[22:15:56] *** Quits: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP) (Ping timeout)
[22:15:56] <lolCatz> just use some?
[22:16:02] <benh> yes
[22:16:10] <engla> you can also use None::<int>
[22:16:18] <benh> but that's hardly 'from an int'
[22:16:35] *** Quits: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue_)
[22:16:49] <engla> oh yeah
[22:17:58] *** Joins: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP)
[22:17:59] *** Joins: noxivs (Mibbit@73A4E6D9.F0F9B395.5E95B1A8.IP)
[22:18:38] <lolCatz> so I am invoking programs using this statement let mut proc = run::Process::new(program, argv, opts);
[22:19:00] <lolCatz> but sometimes the output doesn't come to d outst
[22:19:04] <lolCatz> stdout
[22:19:11] *** Joins: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net)
[22:19:13] <lolCatz> like for ls it does, but for top it doesnt show up
[22:19:26] <lolCatz> im trying to run programs in the backgrouncommandd using that 
[22:19:37] <lolCatz> in the bg using that statment*
[22:19:49] <cmr> lolCatz: top needs a tty, ls doesn't.
[22:20:00] <lolCatz> what is tty?
[22:20:30] <cmr> lolCatz: http://www.linusakesson.net/programming/tty/
[22:21:33] <tjc> Did something happen to make debug! messages print out without the trailing newline?
[22:21:44] <tjc> Or am I in a flawed part of the space-time continuum?
[22:22:22] *** heftig_ is now known as heftig
[22:22:35] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[22:22:49] <lolCatz> cmr: so how would I get something like top to work with that command?
[22:23:29] <cmr> tjc: I didn't see anything like that two days ago
[22:23:51] *** Quits: SealedSun (Mibbit@moz-CD16210D.cust.bluewin.ch) (Quit: http://www.mibbit.com ajax IRC Client)
[22:23:56] <pnkfelix> tjc: I think someone was talking about this on the chat room recently
[22:23:58] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[22:24:39] *** Quits: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com) (Quit: uhhh tmux?)
[22:24:52] <tjc> lolCatz: It looks like you can pass the -l flag to top to periodically redisplay raw output
[22:25:00] <tjc> without that flag, top is for using interactively
[22:25:06] <cmr> lolCatz: you'd need to create a pty
[22:25:29] *** Quits: io2 (io2@moz-A6202C16.home.otenet.gr) (Quit: )
[22:26:37] <lolCatz> hmmm well actually i tried to execute sleep 10 using let mut proc = run::Process::new(program, argv, opts);
[22:26:51] *** Joins: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com)
[22:26:57] <lolCatz> and my program waited 10 seconds before accepting input
[22:27:12] <lolCatz> so its not running in the background at all
[22:28:32] *** Quits: noxivs (Mibbit@73A4E6D9.F0F9B395.5E95B1A8.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:30:17] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[22:30:24] <pnkfelix> tjc: maybe its this: https://github.com/mozilla/rust/pull/9609
[22:30:35] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Connection reset by peer)
[22:31:04] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[22:31:11] <lolCatz> anybody else have an idea of how I could run a process in the background from a rust program so the original program can continue execution?
[22:31:36] *** Quits: lolCatz (Mibbit@moz-F2E42C9D.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[22:32:05] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[22:32:17] *** Joins: masondesu (masondesu@moz-75054A8B.gsp.bellsouth.net)
[22:32:37] <tjc> pnkfelix: Ah, probably. Thanks!
[22:34:37] *** Quits: ofeldt- (ofeldt@moz-B8CCE771.dip0.t-ipconnect.de) (Ping timeout)
[22:34:37] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[22:36:17] *** Quits: CarpNet (Alasdair@moz-EF831A5E.cable.virginmedia.com) (Quit: Leaving)
[22:36:24] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[22:37:13] *** Quits: aatch (James@moz-B437F499.pocketrent.com) (Ping timeout)
[22:38:04] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[22:38:08] *** Joins: ofeldt (ofeldt@moz-B8CCE771.dip0.t-ipconnect.de)
[22:38:26] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[22:38:30] *** Joins: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP)
[22:39:11] *** Joins: rust_student (Mibbit@moz-5C4D9E04.bootp.virginia.edu)
[22:39:25] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[22:39:40] *** Quits: jdm (jdm@7F255D02.1B9223B5.AE2B2F80.IP) (Ping timeout)
[22:40:19] *** Quits: rust_student (Mibbit@moz-5C4D9E04.bootp.virginia.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[22:40:20] *** Quits: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net) (Quit: Leaving.)
[22:41:03] *** Joins: zws3mb (Mibbit@moz-5C4D9E04.bootp.virginia.edu)
[22:43:58] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:44:34] *** Quits: pnathan1 (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[22:44:52] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[22:45:12] *** Quits: masondesu (masondesu@moz-75054A8B.gsp.bellsouth.net) (Quit: Computer has gone to sleep.)
[22:47:10] *** Quits: bogen (dwight@moz-8B4E7E75.dsl.rcsntx.swbell.net) (Ping timeout)
[22:47:49] *** Joins: bogen (dwight@moz-3AB88140.tx.res.rr.com)
[22:49:47] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[22:50:48] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:51:12] *** Parts: tzakyrie (tzakyrie@moz-57E04ADC.hsd1.va.comcast.net) ()
[22:52:10] *** Joins: TheDust (Stijn@moz-8C2076C2.upc-d.chello.nl)
[22:52:21] *** Quits: TheDust (Stijn@moz-8C2076C2.upc-d.chello.nl) (Quit: Leaving)
[22:52:40] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[22:53:15] *** Joins: masondesu (masondesu@moz-75054A8B.gsp.bellsouth.net)
[22:57:00] *** Joins: Azdle (patrick@moz-8C723B60.hsd1.mn.comcast.net)
[22:57:26] *** Quits: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com) (Ping timeout)
[22:58:07] <dbaupp> kvark: the reason #[deriving(IterBytes)] worked with [,..] (and probably still does) is because [,..] borrows to &[] and that has IterBytes (which returns an integer of some sort), but Clone needs to return Self, so when it's borrowed to &[] it tries to return a &[] => type mismatch.
[22:59:04] <kvark> dbaupp: oh I see
[22:59:08] <kvark> thanks for the explanation
[23:02:00] *** Quits: kvark (Mibbit@3CE6C4B2.8C19BC3D.26E1259.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[23:06:53] *** Quits: SiegeLord (sl@moz-3D449DF.bstnma.fios.verizon.net) (Quit: Leaving)
[23:07:13] *** Quits: Ferreus (ferreus@moz-F0869777.dyn.telefonica.de) (Quit: WeeChat 0.4.1)
[23:08:35] <dandy> AM I doing this wrong: I have a lib.rs with a #[link and I build it with rustc --lib but I keep getting warning: missing crate link meta 'name', using 'lib as default
[23:08:57] *** Quits: tjc (tjc@moz-B74A81FA.hsd1.ca.comcast.net) (Ping timeout)
[23:09:10] *** Joins: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com)
[23:09:32] <dandy> and steveklabnik is probably the one with the answer :(
[23:09:50] <cmr> dandy: paste your code
[23:09:57] <dandy> hang on ill commit it
[23:09:58] <cmr> you need #[link(name="foo")]
[23:10:23] <cmr> steveklabnik: bit overwhelmed by the massive outpouring of RfR PRs?
[23:10:26] <cmr> ;p
[23:10:46] <dandy> https://github.com/aarondandy/vertesaur-rust/blob/master/src/vertesaur/lib.rs
[23:10:59] <steveklabnik> cmr: it's been great!
[23:11:07] <steveklabnik> just shows how opening stuff helps a ton
[23:11:13] <steveklabnik> i've always accepted patches through email
[23:11:14] <steveklabnik> i got like 5
[23:11:23] <steveklabnik> 11 prs in three days after hitting 'open' :)
[23:12:26] <cmr> dandy: lgtm
[23:12:36] <dandy> come again?
[23:12:45] <cmr> looks goot to me
[23:12:48] <cmr> *good
[23:12:59] <dandy> c:\projects\vertesaur-rust>rustc --lib ./src/vertesaur/lib.rs
[23:13:01] <cmr> You really don't want https://github.com/aarondandy/vertesaur-rust/blob/master/src/vertesaur/lib.rs#L13 though
[23:13:13] <cmr> That will be vertesaur::vertesaur
[23:13:25] <dandy> oh right! I want that to be root
[23:14:31] <dandy> does that rustc command look right?
[23:15:00] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Quit: buildmaster reconfigured: bot disconnecting)
[23:15:04] *** Joins: tjc (tjc@moz-B74A81FA.hsd1.ca.comcast.net)
[23:15:04] *** ChanServ sets mode: +o tjc
[23:15:15] <cmr> yes
[23:15:21] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[23:15:29] *** Joins: devin909 (Mibbit@AC28E72A.17A0D1EC.B7830B68.IP)
[23:15:59] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[23:16:00] <devin909> is there a way to modify the stdin when you run the function run::process_status()?
[23:16:34] <dbaupp> devin909: not with process_status, but if you use Process::new you can give it an fd to redirect it
[23:16:46] *** Quits: tjc (tjc@moz-B74A81FA.hsd1.ca.comcast.net) (Ping timeout)
[23:21:02] *** Quits: ofeldt (ofeldt@moz-B8CCE771.dip0.t-ipconnect.de) (Ping timeout)
[23:21:14] <dandy> cmr, I did not have ; after my attributes, it was upset about that but not enough to fail the compile
[23:21:40] *** Joins: Liothen (liothen@moz-266BCA86.spkn.qwest.net)
[23:21:41] <cmr> Ah
[23:21:45] <cmr> Yes, I always forget that too :\
[23:21:58] <cmr> dandy: link meta isn't important, purely informational.
[23:22:26] <dandy> thats important info, also that selects the filename for me aparently
[23:22:41] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[23:22:42] <cmr> yeah
[23:22:50] <cmr> rustpkg obsoletes the link meta.
[23:22:52] <devin909> okay thanks!
[23:22:55] <dandy> yeah
[23:23:09] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[23:24:12] <dandy> so can I do pub mod :: { pub use fileMod::SomeStruct } so that I can bave SomeStruct exposed as vertesaur::SomeStruct ?
[23:24:16] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (No route to host)
[23:24:17] <dbaupp> cmr: even version? (/what are we using to replace version?)
[23:24:27] <cmr> dbaupp: infers from vcs iirc
[23:24:29] <dandy> i'm not sure how to expose stuff within the root
[23:24:35] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[23:24:42] *** Joins: ofeldt (ofeldt@moz-DC6B58CF.dip0.t-ipconnect.de)
[23:25:17] *** Joins: tikue_ (tkuehn@1010CB72.CD72397.689607DE.IP)
[23:25:41] <cmr> dandy: don't put the pub uses in a submodule, put them directly in the crate root.
[23:25:59] *** Joins: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net)
[23:26:34] *** Quits: nkoep (nik@moz-751DDAE3.vpn.rwth-aachen.de) (Ping timeout)
[23:28:17] *** Quits: tikue_ (tkuehn@1010CB72.CD72397.689607DE.IP) (Quit: tikue_)
[23:29:33] *** Quits: masondesu (masondesu@moz-75054A8B.gsp.bellsouth.net) (Quit: Computer has gone to sleep.)
[23:30:50] <mjrosenb> kmc: ping?
[23:31:10] *** Joins: nejucomo1 (Adium@moz-434492BB.dsl.static.sonic.net)
[23:31:12] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Connection reset by peer)
[23:32:18] *** Joins: jdm (jdm@7F255D02.1B9223B5.AE2B2F80.IP)
[23:32:18] *** ChanServ sets mode: +o jdm
[23:33:32] *** Joins: Ferreus (ferreus@moz-F0869777.dyn.telefonica.de)
[23:34:33] <dandy> are there any traits/impls/structs declared directly within std:: ?
[23:35:03] <nejucomo1> Do you mean anywhere in std::* ?
[23:35:07] <dandy> yes
[23:35:10] <nejucomo1> There are many.
[23:35:16] <dandy> may I have an example?
[23:35:45] <nejucomo1> https://github.com/mozilla/rust/blob/master/src/libstd/cmp.rs#L37
[23:36:15] <engla> dandy: none are directly std::XYZ, but are inside a module like std::vec::XYZ
[23:36:28] <dandy> engla, thanks
[23:36:33] <engla> for example the trait std::container::Map
[23:36:45] *** nejucomo1 is now known as nejucomo
[23:37:26] <dandy> I have some impls that will have a lot of code so I want them in their own file, but I think it would be weird to have a path of vertesaur::polygon::Polygon2 instead of vertesaur::Polygon2
[23:37:33] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[23:37:38] <dandy> what would be more rustic, so far it seems to be extra namespacing
[23:37:39] <bjz> what happens if you fail in a Drop::drop?
[23:37:57] <dbaupp> dandy: impls of traits or an impl without a trait?
[23:37:59] <dbaupp> bjz: undefined
[23:38:12] <dbaupp> bjz: https://github.com/mozilla/rust/issues/910
[23:38:36] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[23:38:37] <dandy> dbaupp, I have no idea
[23:38:44] <engla> dandy: you can lift them up to the vertesaur::Polygon2 location
[23:38:51] <engla> dandy: by using "pub use" in the main file
[23:39:05] <dandy> engla, yeah I figured out how to do that, but I am not sure if that is the right thing to do
[23:39:09] <engla> dandy: now libstd doesn't do anything like this (I think) since it's a general library
[23:39:44] <alk> hi #rust, I'm a beginner, is it possible to do something like this? https://gist.github.com/BenoitZugmeyer/6757552
[23:40:00] <dbaupp> dandy: are you writing `impl Trait for Foo` or `impl Foo`?
[23:40:03] <alk> somehow, cast a type parameter
[23:40:21] <dandy> dbaupp, I suppose I would have both
[23:40:39] <dandy> for the Vector2 example I have a struct and I will be implementing some traits for it
[23:41:00] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[23:41:21] <dbaupp> dandy: well, you can freely move `impl Trait for Foo` around without having to reexport anything, so if you leave the Trait where you wan people to import it from, you can put the impl in a new file.
[23:41:36] <engla> alk: I think you can't do that, you need to create a new Container value. something like  Container{x: ~Foo as ~Trait}  will be Container<~Trait>
[23:42:35] <dandy> dbaupp, but the impl Foo and struct Bar must be re-exported to move them?
[23:42:40] <alk> that's sad
[23:43:12] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[23:43:46] <dandy> I think it would be best for me to just make it in any way that it works and then try moving things around later
[23:44:07] <cmr> Who was working on encoding/decoding? SimonSapin?
[23:44:09] <dbaupp> dandy: struct Bar yes, but I' not sure about impl Foo
[23:44:20] <dandy> I'm more curious now about what is "normal"
[23:44:23] <dbaupp> dandy: (I think it might work, but it's buggy)
[23:44:59] <dandy> lib::modthings::ModThing1 or lib::ModThing1
[23:45:02] *** Joins: nkoep (nik@moz-9D188047.pool.mediaways.net)
[23:45:14] <dandy> modthings will probably contain very few impl/structs
[23:45:55] <dandy> so far I am seeing a lot of lib::modthings so I guess I should just have a bunch of pub mod in my lib.rs file rather than re-exporting things through pub use
[23:46:14] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[23:46:20] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[23:46:29] *** Joins: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net)
[23:47:58] *** Joins: xandy (xandy@moz-12478316.unity-media.net)
[23:48:38] *** Joins: tjc (tjc@moz-D91BA12F.sfba.hfc.comcastbusiness.net)
[23:48:38] *** ChanServ sets mode: +o tjc
[23:49:45] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[23:50:03] <alk> thank you engla this was helpful, it solved my problem
[23:50:44] *** Joins: jeaye_ (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[23:50:53] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Ping timeout)
[23:51:17] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[23:51:23] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[23:51:38] *** jeaye_ is now known as jeaye
[23:51:51] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[23:51:54] *** Quits: alk (alk@moz-32A9FF6A.fbxo.proxad.net) (Ping timeout)
[23:52:33] *** Joins: jonathan_ (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[23:52:33] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Connection reset by peer)
[23:53:02] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[23:53:58] *** Quits: zws3mb (Mibbit@moz-5C4D9E04.bootp.virginia.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[23:55:31] <dandy> is rustpkg the only way to satisfy extern mod?
[23:55:44] <cmr> dandy: no
[23:55:49] <dandy> can I just drop the crate somewhere?
[23:55:58] <cmr> rustc also looks in the paths given with -L
[23:56:11] <dandy> is ./ not one by default?
[23:56:22] <cmr> no
[23:56:33] <dbaupp> yes, it's not a default
[23:56:53] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[23:57:08] <dandy> that did it, thanks
[23:57:23] <dandy> so... is that by design or just something that needs to be worked out?
[23:57:33] <cmr> What do you mean?
[23:57:37] <dandy> -L./
[23:57:46] <cmr> It's be design.
[23:57:48] <cmr> *by
[23:58:04] <cmr> rustpkg is how dependencies are resolved. If you want something else, you need to specify it manually.
[23:58:12] <dandy> gotcha
[23:59:08] *** Quits: Jesin (Jessin_@moz-E6B69119.cc.lehigh.edu) (Ping timeout)
[23:59:20] *** Quits: Ralith (ralith@moz-36466B9F.customer.broadstripe.net) (Ping timeout)
