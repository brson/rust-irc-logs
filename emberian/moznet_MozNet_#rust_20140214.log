[00:00:10] *** Joins: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net)
[00:00:31] *** Quits: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com) (Connection reset by peer)
[00:00:31] *** Quits: nif (nif@moz-84FF761D.oberlin.net) (Quit: Konversation terminated!)
[00:01:05] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[00:01:08] *** Joins: nkoep (nik@moz-C06E669E.pool.mediaways.net)
[00:01:42] *** Joins: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com)
[00:01:52] *** Quits: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[00:02:36] *** Quits: tiernjo (quassel@moz-21A5F23D.ks.ks.cox.net) (Client exited)
[00:02:39] *** Joins: nif (nif@moz-84FF761D.oberlin.net)
[00:05:41] *** Quits: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com) (Ping timeout)
[00:06:04] *** Quits: voxpopuli (fanservice@71D59995.6A843466.689607DE.IP) (Ping timeout)
[00:06:36] *** Joins: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com)
[00:06:42] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[00:06:53] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[00:07:54] *** flaper87 is now known as flaper87|afk
[00:07:58] *** pmoore is now known as pmoore|tea-break
[00:09:28] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[00:12:55] *** Joins: lpy (lpy@F864F9BC.9B88FD1B.E99F7FDB.IP)
[00:13:09] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[00:15:04] *** Quits: lpy (lpy@F864F9BC.9B88FD1B.E99F7FDB.IP) (Ping timeout)
[00:16:25] <cgaebel> is there a rust simd library yet?
[00:17:45] *** Quits: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com) (Input/output error)
[00:18:44] *** Joins: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com)
[00:18:47] <cmr> cgaebel: depends on what you want
[00:19:00] <cmr> there's std::unstable::simd
[00:19:21] <cmr> those types can be used for (very) basic simd
[00:19:24] *** Quits: nkoep (nik@moz-C06E669E.pool.mediaways.net) (Quit: Leaving)
[00:19:58] *** Quits: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net) (Quit: Leaving)
[00:20:19] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:20:40] <cgaebel> cmr: do they actually compile down to SSE instructions?
[00:20:46] <cmr> cgaebel: yes.
[00:20:55] <cgaebel> also, is there some way to do "inline LLVM" in the same style as "inline assembly"?
[00:20:58] <cgaebel> I think that'd be nifty
[00:21:14] <cmr> no, unfortunately not.
[00:21:26] <cmr> there was a pull request for it but it was rejected to try and limit our coupling to LLVM
[00:21:35] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[00:21:35] *** ChanServ sets mode: +o tjc
[00:21:40] <cmr> now that we have feature gates I think we could allow it.
[00:22:37] *** Quits: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP) (Ping timeout)
[00:23:09] <SiegeLord> It could be considered a rustc extension to 'standard' Rust
[00:23:41] *** Joins: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP)
[00:23:48] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Input/output error)
[00:23:57] <cmr> indeed, thus the feature flag.
[00:25:40] *** Quits: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP) (Ping timeout)
[00:26:33] *** Quits: dukeleto (dukeleto@104402BE.9B9053F6.D4043753.IP) (Ping timeout)
[00:29:33] *** Joins: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP)
[00:29:55] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[00:30:05] *** Joins: sankha93 (uid12218@moz-31ABA2C0.irccloud.com)
[00:30:23] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[00:31:39] *** pmoore|tea-break is now known as pmoore
[00:31:57] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[00:32:03] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[00:33:00] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[00:33:00] *** ChanServ sets mode: +ao pcwalton pcwalton
[00:33:06] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[00:38:22] *** Quits: isaacd (quassel@moz-6902374D.dhcp.oxfr.ma.charter.com) (Ping timeout)
[00:39:21] *** Joins: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP)
[00:39:33] *** Joins: mzdravkov (me@moz-DE5913DF.speedy-net.bg)
[00:41:02] *** Quits: ksev (DrunkenPan@moz-C6488E57.autodesk.com) (Ping timeout)
[00:44:36] *** Parts: mzdravkov (me@moz-DE5913DF.speedy-net.bg) ()
[00:46:04] *** Quits: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP) (Ping timeout)
[00:48:00] *** pmoore is now known as pmoore|away
[00:48:15] *** Joins: fournm (Aria@moz-ABB60BA0.austin.res.rr.com)
[00:49:25] *** Joins: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[00:50:53] *** Joins: whitglint (uid15486@moz-31ABA2C0.irccloud.com)
[00:50:54] *** Joins: lenary (sid5084@moz-31ABA2C0.irccloud.com)
[00:51:18] *** Quits: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[00:51:29] *** Quits: fabrice (fabrice@347FA24B.24D9B0A0.495EC8CD.IP) (Quit: Leaving.)
[00:52:03] *** Joins: tomdale (sid5518@moz-31ABA2C0.irccloud.com)
[00:52:03] *** Joins: Afuna (sid21127@moz-31ABA2C0.irccloud.com)
[00:52:03] *** Joins: zil (sid23500@moz-31ABA2C0.irccloud.com)
[00:52:31] *** Joins: arrrrrrrrr (arrrrrrrrr@moz-76FEE3FB.dynamic.qsc.de)
[00:53:01] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[00:53:22] <arrrrrrrrr> how can I make rustc emit assembly?
[00:53:31] <cmr> arrrrrrrrr: rustc --emit=asm
[00:53:50] <cmr> or just --emit asm
[00:54:41] *** Quits: synackse (jordyd@2D608993.77F880E0.D9401097.IP) (Ping timeout)
[00:54:45] <arrrrrrrrr> thx
[00:55:16] *** Joins: bgyss (sid11244@moz-31ABA2C0.irccloud.com)
[00:55:18] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[00:55:55] *** Joins: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP)
[00:56:22] *** Quits: zmthy (zmthy@moz-C2881CC3.ecs.vuw.ac.nz) (Quit: Lost terminal)
[00:56:34] *** Quits: nif (nif@moz-84FF761D.oberlin.net) (Quit: Konversation terminated!)
[00:57:12] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[00:57:31] *** Quits: igork (igork@moz-F6DD8476.broadband.corbina.ru) (Quit: Leaving.)
[00:57:55] *** Quits: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP) (Ping timeout)
[00:58:12] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[00:58:51] *** Quits: japaric (japaric@8C26A633.8C2993CE.5C7588CA.IP) (Ping timeout)
[00:59:19] <arrrrrrrrr> -O and no -O is like night and day :)
[00:59:32] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:59:57] *** Joins: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP)
[01:00:04] *** Joins: japaric (japaric@8465B6C3.31BF4ADA.BFC118EE.IP)
[01:00:05] *** Quits: calvinmetcalf (cmetcalf@moz-88F71F23.hfc.comcastbusiness.net) (Quit: calvinmetcalf)
[01:00:12] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[01:00:45] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[01:00:54] *** Quits: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP) (Quit: Leaving...)
[01:00:55] *** Joins: isaacd (quassel@moz-6902374D.dhcp.oxfr.ma.charter.com)
[01:02:04] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[01:02:38] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[01:02:45] *** Quits: speckle (speckle@moz-AD109A29.hsd1.md.comcast.net) (Connection reset by peer)
[01:02:53] *** Joins: speckle (speckle@moz-AD109A29.hsd1.md.comcast.net)
[01:03:13] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Quit: No Ping reply in 180 seconds.)
[01:03:24] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[01:05:07] *** Quits: arrrrrrrrr (arrrrrrrrr@moz-76FEE3FB.dynamic.qsc.de) (Quit: arrrrrrrrr)
[01:06:03] *** Quits: chromatic (chromatic@moz-28CBC7F4.hsd1.or.comcast.net) (Quit: Leaving)
[01:07:22] *** Joins: pongad (Mibbit@moz-7E8AAD2E.res.gatech.edu)
[01:07:48] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[01:08:51] *** Joins: fabrice (fabrice@moz-99690620.hinet-ip.hinet.net)
[01:13:20] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:13:41] *** Joins: lpy (lpy@F864F9BC.9B88FD1B.E99F7FDB.IP)
[01:14:00] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[01:15:43] *** Quits: lpy (lpy@F864F9BC.9B88FD1B.E99F7FDB.IP) (Ping timeout)
[01:18:03] *** Quits: speckle (speckle@moz-AD109A29.hsd1.md.comcast.net) (Connection reset by peer)
[01:18:09] *** Joins: speckle (speckle@moz-AD109A29.hsd1.md.comcast.net)
[01:19:45] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:19:46] *** Joins: alinab (alina@BBA794CD.548B13EB.2CFD4520.IP)
[01:20:55] *** Joins: cmeiklejohn (sid1900@moz-31ABA2C0.irccloud.com)
[01:22:04] *** Joins: escalant3 (uid14896@moz-31ABA2C0.irccloud.com)
[01:22:05] *** Joins: marc_ (uid5324@moz-31ABA2C0.irccloud.com)
[01:22:20] *** Quits: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP) (Input/output error)
[01:22:34] *** Joins: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP)
[01:23:32] *** Joins: jdm (jdm@E595D12E.1196002C.7DBB297B.IP)
[01:23:32] *** ChanServ sets mode: +o jdm
[01:23:39] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[01:23:47] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[01:26:06] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[01:27:18] *** Joins: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca)
[01:30:12] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[01:31:15] *** Quits: gmjosack (gary@F91A859E.75E3DBFA.7AB8439E.IP) (Ping timeout)
[01:33:29] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[01:34:10] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Client exited)
[01:34:32] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[01:34:48] *** Quits: a_m0d (a_m0d@moz-2F294D00.acanac.net) (Quit: Leaving.)
[01:35:34] *** Joins: gmjosack (gary@F91A859E.75E3DBFA.7AB8439E.IP)
[01:36:15] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Ping timeout)
[01:38:10] *** Joins: qlkzy (qlkzy@moz-A97B5CE9.members.linode.com)
[01:41:05] *** Joins: aurynj (Eon@BF507CFB.1CEEC774.4C51A5AE.IP)
[01:41:25] *** Quits: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP) (Ping timeout)
[01:42:03] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[01:42:54] *** Joins: wikkit (Mibbit@moz-6DD2EAF1.hsd1.ca.comcast.net)
[01:43:01] *** Joins: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP)
[01:43:24] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[01:43:46] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[01:44:14] *** Quits: wikkit (Mibbit@moz-6DD2EAF1.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[01:44:38] *** Quits: alinab (alina@BBA794CD.548B13EB.2CFD4520.IP) (Quit: leaving)
[01:45:33] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[01:49:54] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[01:50:11] *** Joins: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[01:51:40] *** Quits: claudiu (claudiu@moz-FB94486E.thefacebook.com) (Connection reset by peer)
[01:51:46] *** Joins: claudiu (claudiu@moz-FB94486E.thefacebook.com)
[01:52:03] *** Quits: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[01:57:20] *** Joins: elyzion (elyzion@moz-D4AAE1FD.ap122.ftth.ucom.ne.jp)
[01:58:11] *** Quits: pongad (Mibbit@moz-7E8AAD2E.res.gatech.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[02:02:48] *** Quits: gmjosack (gary@F91A859E.75E3DBFA.7AB8439E.IP) (Ping timeout)
[02:03:58] *** Quits: johanh (uid17185@moz-A42E5B7B.irccloud.com) (Ping timeout)
[02:03:58] *** Quits: avdi (sid16245@moz-A42E5B7B.irccloud.com) (Ping timeout)
[02:03:58] *** Quits: tautologico (uid22285@moz-A42E5B7B.irccloud.com) (Ping timeout)
[02:03:58] *** Quits: wouterw (uid22165@moz-A42E5B7B.irccloud.com) (Ping timeout)
[02:03:58] *** Quits: huhlig (sid17687@moz-A42E5B7B.irccloud.com) (Ping timeout)
[02:03:58] *** Quits: janx (uid16602@moz-A42E5B7B.irccloud.com) (Ping timeout)
[02:03:58] *** Quits: robert (uid15951@moz-A42E5B7B.irccloud.com) (Ping timeout)
[02:05:05] *** Joins: cptroot (Mibbit@moz-4F146589.caltech.edu)
[02:05:29] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Quit: ZNC - http://znc.in)
[02:06:05] <cptroot> Hey, does anyone know how I would initialize something like `[ Factor {n, 1} ]`, which is a list of structs with one value
[02:06:36] *** Joins: janx (uid16602@moz-A42E5B7B.irccloud.com)
[02:07:04] <Yurume> cptroot: Factor { field_1: n, field_2: 1 }
[02:07:21] <Yurume> you need to specify all field names in the struct.
[02:07:28] <cptroot> ah, thanks for the correction
[02:07:33] *** Quits: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP) (Ping timeout)
[02:07:34] *** Quits: cptroot (Mibbit@moz-4F146589.caltech.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[02:07:38] *** Joins: robert (uid15951@moz-A42E5B7B.irccloud.com)
[02:08:04] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[02:08:44] *** Joins: huhlig (sid17687@moz-A42E5B7B.irccloud.com)
[02:08:45] *** Joins: johanh (uid17185@moz-A42E5B7B.irccloud.com)
[02:09:12] *** Joins: arrrrrrrrr (arrrrrrrrr@moz-76FEE3FB.dynamic.qsc.de)
[02:09:27] *** Quits: aurynj (Eon@BF507CFB.1CEEC774.4C51A5AE.IP) (Quit: Leaving)
[02:09:44] *** Joins: derek_c (derek@moz-8F4BAB1D.cit.cornell.edu)
[02:09:51] <arrrrrrrrr> has the "no circular references" thing been addressed by now?
[02:09:57] *** Joins: wouterw (uid22165@moz-A42E5B7B.irccloud.com)
[02:10:35] *** Joins: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP)
[02:11:07] *** Joins: avdi (sid16245@moz-A42E5B7B.irccloud.com)
[02:11:48] <derek_c> acrichto: I was talking with a PHD student today and I told it a bit about the green scheduler.  He suggested that one way to improve it would be to use a stack instead of a queue for the global sleeper list, because then you would be waking up threads that were more recently put to sleep, and that's going to be more cache-friendly.  What do you think?
[02:11:57] <derek_c> *I told him*
[02:12:41] <Yurume> arrrrrrrrr: what do you mean?
[02:12:50] <acrichto> derek_c: perhaps, I'm more worried about the kernel syscalls for hitting write() and epoll()
[02:13:13] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[02:13:21] *** Quits: sunfish (chatzilla@moz-C06D9702.mtv1.mozilla.com) (Ping timeout)
[02:13:26] <arrrrrrrrr> Yurume: Parent contains a list of children, children contain a pointer to the parent
[02:14:01] <arrrrrrrrr> Yurume: or simply a doubly linked list
[02:14:02] <derek_c> acrichto: yeah, I'm sure the syscall issue is much more of a bottleneck
[02:14:26] *** Joins: lpy (lpy@F864F9BC.9B88FD1B.E99F7FDB.IP)
[02:14:35] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[02:14:38] <cgaebel> derek_c: that sounds starvation-prone
[02:14:38] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[02:14:39] *** ChanServ sets mode: +ao pcwalton pcwalton
[02:14:47] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[02:14:49] <derek_c> derek_c: starvation of whom?
[02:14:56] <derek_c> cgaebel: ^
[02:15:00] <cgaebel> the things near the beginning
[02:15:06] <Yurume> arrrrrrrrr: I think std::gc::Gc is still being developed, so the answer would be "not yet".
[02:15:23] <derek_c> cgaebel: I'm not sure I understand
[02:15:29] <cgaebel> maybe I don't. don't mind me.
[02:15:31] <arrrrrrrrr> Yurume: GC as in garbage collection? I'm not sure how that comes into play
[02:15:34] *** Joins: sssilver (sssilver@moz-A2247A31.lightspeed.rcsntx.sbcglobal.net)
[02:15:43] *** Quits: nszceta (hax@moz-E458A7C0.pharm.pitt.edu) (Input/output error)
[02:15:44] <cgaebel> I might've missed something. internet's cutting in and out
[02:16:08] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:16:16] <aatch> arrrrrrrrr, you can use Rc with weak references
[02:16:21] <mcpherrin> arrrrrrrrr: The canonical way to do circular references right now is using Rc with a weak reference
[02:16:28] *** Quits: lpy (lpy@F864F9BC.9B88FD1B.E99F7FDB.IP) (Ping timeout)
[02:16:28] <arrrrrrrrr> I see.
[02:16:29] <Yurume> yes, there are three major smart pointers in the standard library: Rc (task-local reference counted), Gc (task-local garbage collected), and Arc (task-global atomically reference counted).
[02:16:37] <sssilver> Hello everyone!
[02:16:41] *** Joins: tautologico (uid22285@moz-A42E5B7B.irccloud.com)
[02:16:45] *** Joins: jroweboy (Mibbit@moz-18814A6B.provo.static.broadweavenetworks.net)
[02:16:47] <sssilver> I'm very excited about Rust. What now?
[02:17:00] <Yurume> arrrrrrrrr: ah, yes. Weak does work for data structures. not the general solution though.
[02:17:01] *** Quits: reima (Instantbir@moz-6F6DFF8C.dip0.t-ipconnect.de) (Quit: Leaving.)
[02:17:12] <mcpherrin> sssilver: write some code?
[02:17:15] <mcpherrin> sssilver: bake a cake?
[02:17:16] <cgaebel> that's a lot of wasted ram for a doubly-linked list...
[02:17:25] <sssilver> mcpherrin: sounds great! thanks for the tip~
[02:17:46] <marc_> buy a cake and eat it
[02:17:49] <marc_> write more code
[02:17:51] <mcpherrin> cgaebel: For that I'd probably use raw pointers and wrap them in code that does the write thing
[02:18:12] <cgaebel> mcpherrin: yeah exactly. I don't think Rc is really appropriate for this
[02:18:22] <Yurume> cgaebel: data structures have several intricated constraints that may not be provable by the compiler, so raw pointers are sometimes inevitable.
[02:18:27] <sssilver> I just came to say that I wish from the bottom of my heart that Rust puts C++ out of the industry.
[02:18:32] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:18:34] <mcpherrin> cgaebel: right -- depends on your use case
[02:18:47] <cgaebel> sssilver: hey that's why I got excited about it too!
[02:19:00] <Yurume> I really hope so, having programmed in C and C++ for years :)
[02:19:10] <cgaebel> mcpherrin: well... I assume the use case of a doubly-linked list..
[02:19:16] <mcpherrin> :-)
[02:19:16] <arrrrrrrrr> What's the Rc overhead?
[02:19:21] <cgaebel> a word.
[02:19:23] <cgaebel> of ram
[02:19:26] <cgaebel> per-element
[02:19:31] <mcpherrin> one word in the referent, which is the refcount
[02:19:40] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[02:19:44] <cgaebel> in terms of time, almost nothing
[02:19:51] <elyzion> I'd like to ask for some advice on how to obtain peer_name from a BufferedStream<TcpStream>. The code in this gist used to work https://gist.github.com/elyzion/8816127 for it. However, I recently updated the master and it's been resulting a segv since then. What is the correct way of obtaining the peer_name in this case? Any other pointers or comments are welcome as well... just started learning rust.
[02:19:52] <Yurume> arrrrrrrrr: a word for the reference counting, and one additional operation for every cloning and free.
[02:19:57] <mcpherrin> Well, depends if you have refcount churn, which can be significant
[02:19:59] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[02:20:08] <cgaebel> but in space and cache pressure... it's annoying and useless in this case
[02:20:19] *** Joins: mib_rsx28p (Mibbit@moz-20E7F852.cpe.webspeed.dk)
[02:20:21] <aatch> Actually, it's 2 words for Rc
[02:20:28] <cgaebel> really!?
[02:20:30] <cgaebel> oh weak and strong count
[02:20:35] <Yurume> oh
[02:20:41] <arrrrrrrrr> What do you mean by word? On x86x64 a word is 16bit but I think you mean 64 bit, right?
[02:20:51] <Yurume> uint in general
[02:21:15] <cgaebel> I mean machine-sized word
[02:21:15] <cgaebel> the native register width, if you want to get really technical
[02:21:16] <aatch> uint, which is currently pointer-sized
[02:21:29] <mcpherrin> Hmm, I wonder what happens when you overflow the refcount
[02:21:31] <Yurume> so... it takes two words (i.e. 16 bytes in x86-64) per each value.
[02:21:44] <aatch> mcpherrin, bad things, most likely
[02:21:48] <mcpherrin> aatch: yes :)
[02:21:51] <cgaebel> Yurume yup
[02:21:52] <Yurume> mcpherrin: is that possible at all?
[02:21:57] <cgaebel> no it's not
[02:21:58] *** Joins: p1start (rewi@moz-A082F561.adsl.xtra.co.nz)
[02:21:59] <mcpherrin> Yurume: welll not really
[02:22:06] <cgaebel> not unless you break the interface..
[02:22:10] <mcpherrin> but I bet you could do sneaky things to make it happen
[02:22:13] <aatch> In theory, yes, in practice, unlikely.
[02:22:14] <cgaebel> probably
[02:22:23] <mcpherrin> I should try to use that idea to exploit some softwares
[02:22:23] <Yurume> :)
[02:22:28] <cgaebel> it'd be fun to try to do that without "unsafe" primitives, though
[02:22:30] <mcpherrin> get some nice use-after-free vulns
[02:22:43] <aatch> You'd probably have to use ignore() though
[02:22:58] <Yurume> <aatch> In theory, yes, in practice, unlikely. <- I really like this quote.
[02:22:59] <aatch> Otherwise you'd have to stash your references somewhere
[02:23:51] <aatch> Then you'd run out of addresspace before you overflowed your uint
[02:23:54] *** Joins: alinab (alina@moz-94EAE39D.alinab.org)
[02:24:40] <cgaebel> I don't see an obvious way to do it without unsafe{} code
[02:24:47] <aatch> cgaebel, neither
[02:25:36] <mcpherrin> The only way I can see it happening is if you had some sort of compacting data structure
[02:25:46] <cgaebel> ?
[02:26:13] <mcpherrin> Say you had a CompactingStore<T> that had an array-like interface
[02:26:22] *** Quits: mib_rsx28p (Mibbit@moz-20E7F852.cpe.webspeed.dk) (Quit: http://www.mibbit.com ajax IRC Client)
[02:26:23] <mcpherrin> It compresses its content
[02:26:28] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[02:26:31] <cgaebel> wut
[02:26:32] <mcpherrin> so you stick in a few hundred thousand references 
[02:26:51] <cgaebel> you can't "compress" a reference without unsafe code
[02:26:56] <mcpherrin> well yeah
[02:27:10] <mcpherrin> But it's an otherwise-safe data structure
[02:27:11] <cgaebel> and if you allow unsafe code, then just cast the Rc struct to expose it's priv fields
[02:27:32] *** Joins: barosl (barosl@34F62860.E551553C.7544CABF.IP)
[02:27:57] <mcpherrin> One could imagine such a thing existing as a safe data structure, though.  Using unsafe code to expose priv fields is cheating
[02:28:16] <cgaebel> not really. a data structure that "compresses" references sounds extremely unsafe
[02:28:53] <mcpherrin> I don't think there would be any unsafety other than the aforementioned problem of being able to overfill an address space
[02:29:40] <Yurume> mcpherrin: UnsafeCompactRc16 etc?
[02:29:41] <cgaebel> what do you mean? how do you propose we do this compaction?
[02:30:25] *** Quits: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com) (Ping timeout)
[02:30:35] <mcpherrin> You expose an interface so you'd do like getItem(n: uint) -> &'a T
[02:30:49] <Yurume> I think Rc itself should not change, but such limited-purpose unsafe compact rc does have its use
[02:30:57] <mcpherrin> you're just gzipping a bunch of "Send"able objects
[02:31:09] <mcpherrin> of course Rc<T> aren't Send so this probably doesn't matter
[02:33:03] *** Quits: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP) (Ping timeout)
[02:34:08] *** Quits: arrrrrrrrr (arrrrrrrrr@moz-76FEE3FB.dynamic.qsc.de) (Quit: arrrrrrrrr)
[02:35:34] *** Joins: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net)
[02:36:20] *** Joins: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP)
[02:36:55] <cgaebel> mcpherrin: I think you should try writing this... it sounds very non-trivial and very unsafe.
[02:37:03] <Yurume> mcpherrin: actually, I'm pretty interested in the compressed pointer representation, as like compressed oops in Java Hotspot
[02:37:42] *** Quits: sssilver (sssilver@moz-A2247A31.lightspeed.rcsntx.sbcglobal.net) (Client exited)
[02:37:51] *** Quits: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP) (Client exited)
[02:38:04] *** Joins: arrrrrrrrr (arrrrrrrrr@moz-76FEE3FB.dynamic.qsc.de)
[02:38:12] <arrrrrrrrr> can I have some Rc/Weak example code?
[02:38:23] *** Quits: onelson (onelson@moz-DD666EC5.laika.com) (Quit: Leaving.)
[02:38:50] <aatch> arrrrrrrrr, if you look in the source of rc.rs, you can look at the tests.
[02:39:37] <aatch> However, the way you use them in general is to use clone() to clone the reference, and then if you want it to be weak, use `downgrade` to make it a weak reference.
[02:39:54] *** Joins: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP)
[02:40:28] <arrrrrrrrr> why would I want a weak reference?
[02:40:48] <aatch> arrrrrrrrr, weak references dont keep the data alive
[02:41:21] <aatch> so you can have cyclical references without leaking memory
[02:41:22] <arrrrrrrrr> of course
[02:42:04] <Yurume> arrrrrrrrr: http://ix.io/auC
[02:42:11] <Yurume> should print x = 42, y = 42 and y is gone.
[02:42:18] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: It is tiem!)
[02:42:50] <arrrrrrrrr> looks good
[02:43:04] *** Joins: ctangent (textual@moz-4B354EF9.hsd1.wa.comcast.net)
[02:43:32] <arrrrrrrrr> how optimized is rustc?
[02:43:54] <Yurume> note that Weak itself cannot dereference the value directly, it has to be upgraded again to use `borrow()`.
[02:44:32] <mcpherrin> arrrrrrrrr: rustc itself has lots of places it needs work :-)
[02:44:44] <arrrrrrrrr> I mean the generated code
[02:44:50] <mcpherrin> arrrrrrrrr: The code it outputs goes through LLVM's optimizers (if you use the flag), which is pretty well optimized
[02:45:02] <Yurume> if it were not the case, a dangling pointer can be created by borrowing from Weak and deallocating the Rc by erasing all references to it.
[02:45:17] <arrrrrrrrr> Yurume: Got it
[02:45:19] <mcpherrin> I don't know if rustc passes it all the information LLVM needs (aliasing info in particular) to be super awesome
[02:46:06] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[02:46:22] *** Joins: sunfish (chatzilla@moz-BBE3ABD.mv.mozilla.com)
[02:46:23] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[02:46:23] *** ChanServ sets mode: +ao brson brson
[02:46:38] *** Quits: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP) (Ping timeout)
[02:47:33] <aatch> we dont do as much alias analysis as we could
[02:47:38] <Yurume> brson: hi! is the rust-sdl still maintained?
[02:48:49] *** Joins: brendan (brendaneic@moz-5A0C40E4.hfc.comcastbusiness.net)
[02:49:00] <brson> Yurume: personally I only merge pull requests. Not sure if AngryLawyer is still maintaining it or not
[02:49:12] <brson> i see there are 3 open prs ...
[02:49:33] <enix> how do I disable optimization when building rustc?
[02:49:39] <arrrrrrrrr> I've written some equivalent code in C and Rust and the Clang output is slightly better but not much
[02:49:43] *** Joins: cgaebel (clark@moz-B2624B52.nycmny.east.verizon.net)
[02:50:04] *** Joins: huon (Thunderbir@2702835C.D5A1DCF.37681C44.IP)
[02:50:08] <aatch> arrrrrrrrr, yeah, clang tends to be *slightly* better
[02:50:14] <aatch> Though not always
[02:50:30] <Yurume> brson: I think three PRs mostly address the same issue, though my (lifthrasiir) issue also covers SDL_image and SDL_mixer (which I seem to be the only user for now).
[02:50:39] <huon> there are some examples were we drive LLVM *much* better than clang does
[02:50:59] *** Joins: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[02:51:29] *** Quits: cgaebel (clark@moz-B2624B52.nycmny.east.verizon.net) (Ping timeout)
[02:51:50] <brson> Yurume: I just merged one, and now the other two are unmergeable. Just tell me what to do and I'll do it
[02:51:56] <brson> Yurume: if you want I can make you an owner
[02:52:17] *** Joins: brendan_ (brendaneic@79611EE9.A51CB73B.6FBF6D51.IP)
[02:52:25] *** Quits: brendan (brendaneic@moz-5A0C40E4.hfc.comcastbusiness.net) (Ping timeout)
[02:52:25] *** brendan_ is now known as brendan
[02:52:46] *** Quits: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[02:52:51] <huon> Yurume: quick! tell brson to send all the rust contributors a pile of chocolate!
[02:52:54] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[02:53:00] <Yurume> brson: okay, I'll rebase my PR later today. I'm willing to take the ownership if you want.
[02:53:08] <Yurume> but that's another story:)
[02:53:15] <Yurume> huon: you said that!!!!
[02:53:43] <brson> Yurume: you're a collaborator on rust-sdl now. Do as you see fit :)
[02:53:47] <Yurume> thank you!
[02:54:12] *** Quits: dmac (Adium@moz-99EF2EE6.hfc.comcastbusiness.net) (Quit: Leaving.)
[02:54:14] *** Quits: ctangent (textual@moz-4B354EF9.hsd1.wa.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:54:16] <aatch> clang has the advantage of being maintained by roughly the same set of people that maintain llvm
[02:54:19] * ChrisMorgan delivers a high five to huon
[02:54:29] <mcpherrin> Hey guys, what's Rust's take on Undefined Behaviour? (in the c++ sense)
[02:54:46] <mcpherrin> There isn't a "Rust Spec" so it doesn't exactly make sense to ask that
[02:54:50] <arrrrrrrrr> Some example code where rustc is better than clang?
[02:55:00] <aatch> mcpherrin, outside of unsafe, it shouldn't exist
[02:55:24] <aatch> Oh, except for signed overflow
[02:55:29] <Yurume> aatch: how about integer overflows? is that an UB unless... yeah.
[02:55:32] <aatch> I think that's undefined behaviour
[02:55:44] <mcpherrin> Signed overflow being UB would be terrible
[02:55:48] <brson> afaik signed overflow is correct in rust right now
[02:55:55] <brson> the default is supposedly well defined
[02:55:55] <mcpherrin> Like, nobody uses non-2s compliment machine
[02:55:58] <Yurume> is that an UB or just an UV?
[02:56:06] <huon> aatch: signed overflow is defined in Rust
[02:56:26] <aatch> huon, it is? I thought it was only unsigned. Well, that's good to know
[02:56:26] *** Joins: jherms (jherms@moz-C3C10EC4.jetstream.xtra.co.nz)
[02:56:48] <mcpherrin> The question doesn't really matter until a specification for rust is written
[02:57:07] <mcpherrin> since really everything is UB until then ;)
[02:57:16] <huon> http://static.rust-lang.org/doc/master/rust.html#behavior-considered-unsafe is theoretically the list of UB
[02:57:18] <Yurume> huon: hmm, then is (-1i16) / (-0x8000i16) equal to -0x8000i16?
[02:57:33] <huon> Yurume: that is UB
[02:57:46] *** Joins: canhtak (canhtak@moz-4D8F0D46.wl.t.ulaval.ca)
[02:57:53] <huon> (well, -0x8000/-1, right?)
[02:58:03] <Yurume> oh, yes.
[02:58:07] <derek_c> is it possible to implement functions specifically for a type like Option<BigInteger>?
[02:58:21] <huon> we apparently should be catching it like we do x / 0
[02:58:30] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[02:58:31] <huon> derek_c: probably only via a trait
[02:59:01] <aatch> Yes, only via a trait, because of coherence rules and similar
[02:59:05] <huon> Yurume aatch: https://github.com/mozilla/rust/issues/8460
[03:00:53] <derek_c> how about using a typedef?
[03:00:56] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[03:01:08] <ChrisMorgan> `type a = b` is purely an alias. No impls on them.
[03:01:15] <derek_c> rusti: type Haha = Option<BigInteger>; impl Haha {}
[03:01:17] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[03:01:21] <Yurume> derek_c: no use, only the newtype will allow the direct impl without a trait for it.
[03:01:47] * ChrisMorgan has been wondering whether there is any value in tuple structs
[03:01:58] *** Joins: an0nymous (Jacob@moz-F04BA440.tx.res.rr.com)
[03:02:28] *** Joins: jherms_ (Jonas@moz-C3C10EC4.jetstream.xtra.co.nz)
[03:02:36] *** Quits: jherms (jherms@moz-C3C10EC4.jetstream.xtra.co.nz) (Quit: jherms)
[03:02:39] <arrrrrrrrr> 1.0 when?
[03:02:45] *** Joins: jherms (jherms@moz-C3C10EC4.jetstream.xtra.co.nz)
[03:02:46] <aatch> arrrrrrrrr, then
[03:02:49] <ChrisMorgan> arrrrrrrrr: a time, times and half a time.
[03:02:49] <huon> ChrisMorgan++
[03:02:55] *** Quits: jherms (jherms@moz-C3C10EC4.jetstream.xtra.co.nz) (Quit: jherms)
[03:03:01] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[03:03:02] <Yurume> "when it's done"
[03:03:04] *** Joins: jherms (jherms@moz-C3C10EC4.jetstream.xtra.co.nz)
[03:03:16] <aatch> time = time * time
[03:03:17] *** Quits: jherms (jherms@moz-C3C10EC4.jetstream.xtra.co.nz) (Connection reset by peer)
[03:03:42] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[03:03:47] *** Quits: jherms_ (Jonas@moz-C3C10EC4.jetstream.xtra.co.nz) (Quit: Leaving)
[03:03:51] <aatch> then = now + (then - now)
[03:03:57] *** Joins: jherms (Jonas@moz-C3C10EC4.jetstream.xtra.co.nz)
[03:03:58] <mcpherrin> arrrrrrrrr: By the end of the year, maybe? or maybe not!
[03:04:31] <huon> aatch: (we don't put `nsw` (no signed wrap) on our `add` LLVM instructions, so signed addition is defined.)
[03:04:38] <ChrisMorgan> We have `struct X(Y)` and `struct X { y: Y }`. By parallel, we have `enum Q { X(Y) }` and `enum Q { X { y: Y } }`. This parallel ’twixt the twain is convenient, I suppose.
[03:04:40] * huon just double checked
[03:04:56] <ChrisMorgan> Obvious solution: remove tuple structs *and* tuple enum variants!
[03:05:03] <huon> ChrisMorgan: we could just go full-Haskell and not have the former (or have it just as sugar for single variant enums)
[03:05:05] <huon> Some { val: val }
[03:05:09] <huon> yum :P
[03:05:29] <aatch> huon, I'm not surprised, I just didn't think we had it.
[03:05:30] <Yurume> ChrisMorgan: I think enum X { X(Y) } is possible
[03:05:40] <aatch> Yurume, it is
[03:05:43] <Yurume> yes
[03:05:51] <aatch> Since the two 'X's are in different namespaces
[03:05:52] * ChrisMorgan can imagine a world where there are only enum structs of the four
[03:05:55] <Yurume> is that fully equivalent to struct X(Y);?
[03:06:00] <aatch> Yurume, yes
[03:06:02] *** Joins: gmjosack (gary@F91A859E.75E3DBFA.7AB8439E.IP)
[03:06:28] <aatch> Right down to the codegen
[03:06:34] *** Joins: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP)
[03:06:37] <aatch> except the name of the type
[03:06:40] <aatch> that's different
[03:07:05] <aatch> (in LLVM, one would be "enum X" the other "struct X")
[03:08:26] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[03:09:53] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[03:10:05] *** Joins: lpy (lpy@F864F9BC.9B88FD1B.E99F7FDB.IP)
[03:11:02] *** Joins: onelson (owen@18CF7301.95770028.5B6BFE7D.IP)
[03:17:37] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[03:17:48] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:20:11] *** Quits: valenting (Thunderbir@9A1975C1.39CE2EE.E400A05F.IP) (Connection reset by peer)
[03:20:18] *** Joins: valenting (Thunderbir@9A1975C1.39CE2EE.E400A05F.IP)
[03:21:28] *** Quits: claudiu (claudiu@moz-FB94486E.thefacebook.com) (Connection reset by peer)
[03:21:49] *** Joins: claudiu (claudiu@moz-FB94486E.thefacebook.com)
[03:23:45] *** Quits: jroweboy (Mibbit@moz-18814A6B.provo.static.broadweavenetworks.net) (Quit: http://www.mibbit.com ajax IRC Client)
[03:24:31] *** Joins: ctangent (textual@moz-4B354EF9.hsd1.wa.comcast.net)
[03:25:25] *** Quits: Earnestly (earnest@119EDA00.66A37A5.BFD1ABFD.IP) (Ping timeout)
[03:25:53] *** Quits: huon (Thunderbir@2702835C.D5A1DCF.37681C44.IP) (Ping timeout)
[03:25:59] *** Quits: ctangent (textual@moz-4B354EF9.hsd1.wa.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:26:34] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Quit: leaving)
[03:26:47] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[03:26:47] *** ChanServ sets mode: +ao brson brson
[03:27:12] *** Joins: huon (Thunderbir@2702835C.D5A1DCF.37681C44.IP)
[03:28:44] *** Joins: ctangent (textual@moz-4B354EF9.hsd1.wa.comcast.net)
[03:29:16] *** Joins: dylukes (dylukes@moz-ED57011A.oakland.resnet.pitt.edu)
[03:29:57] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[03:31:54] <Moor> Is there some way to have a function take an optional argument?
[03:32:16] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Quit: Leaving.)
[03:32:16] <Moor> To have a default value, or something?
[03:32:52] *** Quits: rca (rcatolino@moz-7FACA309.adsl.proxad.net) (Ping timeout)
[03:33:31] <strcat> Moor: no
[03:33:32] <o11c> Moor: not yet, but I think consensus might be moving toward it
[03:35:12] *** Quits: zz_kimundi (kimundi@moz-7D8AC97.dip0.t-ipconnect.de) (Ping timeout)
[03:36:32] *** Joins: synackse (jordyd@moz-1719F70B.seg34.ucf.edu)
[03:36:41] *** Joins: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net)
[03:36:47] <bjz> Moor: it's a backwards compatible feature, so there hasn't been lots of time spent on it
[03:37:14] <bjz> Moor: plenty of other fish to fry :)
[03:37:38] <Moor> Is there some suggested way of implementing it?
[03:38:00] <Moor> (On a case-by-case basis, I mean.)
[03:38:10] *** Joins: zz_kimundi (kimundi@moz-B28844C0.dip0.t-ipconnect.de)
[03:38:19] <ChrisMorgan> Moor: there are two main workarounds. One: use a struct for the arguments, with default values. Two: use Option<T> for the custom argument instead of T, and pass in None to mean deafult.
[03:38:26] <ChrisMorgan> s/deafult/default/
[03:38:38] *** zz_kimundi is now known as kimundi
[03:38:49] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[03:39:06] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[03:39:18] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[03:39:26] <huon> https://github.com/mozilla/rust/issues/6973 is the issue
[03:39:47] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Quit: Leaving)
[03:40:02] <huon> Moor: https://github.com/mozilla/rust/issues/6973#issuecomment-22502982 includes a workaround
[03:40:05] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[03:40:36] *** Quits: jdm (jdm@E595D12E.1196002C.7DBB297B.IP) (Quit: Lost terminal)
[03:41:06] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:41:07] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Ping timeout)
[03:41:09] *** Quits: sunfish (chatzilla@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[03:41:46] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Quit: Leaving)
[03:42:13] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[03:42:55] * ChrisMorgan laments that that example uses a method named default rather than implementing the Default trait
[03:43:30] *** Quits: canhtak (canhtak@moz-4D8F0D46.wl.t.ulaval.ca) (Quit: canhtak)
[03:44:37] *** Quits: jherms (Jonas@moz-C3C10EC4.jetstream.xtra.co.nz) (Ping timeout)
[03:44:38] *** Joins: Jemaclus (jemaclus@moz-5A4BC30.hsd1.ca.comcast.net)
[03:45:12] <arrrrrrrrr> Do you guys like the Rust syntax?
[03:45:26] *** Joins: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net)
[03:45:33] *** Joins: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com)
[03:45:47] <ross> mostly. yeah
[03:45:59] <ross> I don't care for :: but overall I like it
[03:46:12] <o11c> just <> really bugs me
[03:46:25] *** Quits: kvanb (kvanb@moz-5B744777.lns5.lon.bigpond.net.au) (Ping timeout)
[03:46:31] *** Joins: jherms (jherms@moz-C3C10EC4.jetstream.xtra.co.nz)
[03:47:12] *** Quits: jherms (jherms@moz-C3C10EC4.jetstream.xtra.co.nz) (Quit: jherms)
[03:47:17] *** Joins: jherms (jherms@moz-C3C10EC4.jetstream.xtra.co.nz)
[03:47:23] *** Joins: canhtak (canhtak@moz-4D8F0D46.wl.t.ulaval.ca)
[03:47:40] *** Quits: jherms (jherms@moz-C3C10EC4.jetstream.xtra.co.nz) (Quit: jherms)
[03:49:28] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[03:51:33] *** Joins: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[03:52:24] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[03:53:27] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[03:53:36] *** Quits: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[03:55:05] <Moor> Thanks. I'll go the Option route, 'cause I haven't looked much at structs-with-defaults or traits yet.
[03:55:48] *** Quits: synackse (jordyd@moz-1719F70B.seg34.ucf.edu) (Ping timeout)
[03:56:37] <strcat> Moor: if there are more than 4, I would definitely go with an option struct
[03:57:14] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[03:57:27] *** Joins: synackse (jordyd@moz-1719F70B.seg34.ucf.edu)
[03:57:49] <strcat> struct ConnectionBuilder { ... } static builder: ConnectionBuilder = ...;
[03:57:56] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[03:58:05] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[03:58:22] *** Quits: Jemaclus (jemaclus@moz-5A4BC30.hsd1.ca.comcast.net) (Client exited)
[03:58:39] <strcat> or whatever
[03:59:30] *** Joins: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP)
[03:59:49] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[03:59:50] <strcat> url(foo).proxy(address, port).data(form).post()
[03:59:53] <strcat> stuff like that
[03:59:58] <bstrie_vanished> ChrisMorgan: re: comment on reddit about range() vs iteration, I'm actually trying to figure out why some code I have is slower when switching to iteration from indexing-via-range
[04:00:23] <ChrisMorgan> bstrie_vanished: well, iteration is *supposed* to be faster for vectors.
[04:00:29] <strcat> it is faster
[04:00:44] <strcat> there is a known LLVM limitation though
[04:00:51] <bstrie_vanished> ChrisMorgan: then I'm not sure why the code I have is slower when I start using iter()
[04:01:05] <bstrie_vanished> <-- bad at profiling
[04:01:11] <strcat> bstrie_vanished: because of enums
[04:01:12] <aatch> It can't always optimize out `None` checks, right?
[04:01:29] <strcat> aatch: right, since we switched to special-casing non-nullable pointers in enums
[04:01:36] <huon> bstrie_vanished: what are you iterating over?
[04:01:46] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[04:01:47] <strcat> and there is no way to communicate that a pointer is non-null to LLVM
[04:02:07] <strcat> fn foo(x: &int) -> bool { Some(x) == None }
[04:02:09] <strcat> consider this
[04:02:16] <strcat> what do you think it will optimize down to?
[04:02:22] <strcat> the answer is a null check
[04:02:27] <bstrie_vanished> huon: it's the perlin noise benchmark in the test suite. currently it has a [f32, ..65536], and I wanted to switch it to [[f32, ..256], ..256]
[04:02:31] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[04:02:38] <Yurume> strcat: could we use LLVM unreachable instruction for that purpose?
[04:02:43] <strcat> Yurume: no.
[04:02:45] <Yurume> (or do we already use that?)
[04:02:50] <strcat> Yurume: LLVM isn't capable of using unreachable that way
[04:02:53] <strcat> GCC is, but not LLVM
[04:02:53] <aatch> when it *should* optimize down to 'false`
[04:02:58] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[04:03:12] <strcat> Yurume: it optimizes out the branch + unreachable as dead code very early on
[04:03:27] <strcat> Yurume: it does learn that it is non-null, but the information is *quickly* lost
[04:03:29] <Yurume> huh, that's unfortunate.
[04:03:39] <strcat> it's generally how LLVM works
[04:03:39] <huon> bstrie_vanished: and the inner one is slower?
[04:03:42] <bstrie_vanished> didn't we have an llvm expert floating around? has anyone asked them if this is really impossible?
[04:03:42] <strcat> parameter marked noalias?
[04:03:42] <Yurume> (I was reminded of http://blog.regehr.org/archives/1096 on this topic)
[04:03:44] <huon> *nested
[04:03:47] <strcat> if LLVM inlines the function, the aliasing info is lost
[04:03:57] <bstrie_vanished> huon: very slightly. I wouldn't care if it wasn't a fiddly microbenchmark :)
[04:04:02] <strcat> attributes on functions are destroyed during inlining
[04:04:10] <strcat> branches to unreachable optimized out as dead code
[04:04:12] <strcat> etc.
[04:04:22] <strcat> it *does* learn stuff from them and store it in-memory, but it isn't preserved for very long at all
[04:04:26] <huon> bstrie_vanished: possibly https://github.com/mozilla/rust/issues/11751
[04:04:54] <strcat> Yurume: we also can't realistically output a branch + unreachable for every non-nullable ptr all over the place
[04:04:58] <strcat> would massively slow down builds
[04:05:03] <huon> bstrie_vanished: if you run with `--emit ir` grep for `icmp eq.*, null`
[04:05:04] <strcat> and you can't just place them strategically either
[04:05:09] <strcat> to solve one case, sure
[04:05:18] <strcat> but it's a recurring issue
[04:05:39] <strcat> Option is widely used and Option is essentially not a very cheap abstraction due to this...
[04:05:42] <huon> bstrie_vanished: (i'd guess a range loop over a fixed length vector that's constructed "in view" of the loop can optimise out the bounds checks)
[04:06:17] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[04:06:18] <huon> strcat: is there an LLVM bug for nonnull?
[04:06:40] <strcat> huon: there isn't an open issue about generic metadata for it
[04:06:54] <strcat> there's an open bug requesting a non-null parameter attribute
[04:06:57] <huon> bstrie_vanished: (also, hi, I changed nicks if you wanna talk /r/rust moderation ;) )
[04:06:59] <strcat> but that's not really enough
[04:07:17] <strcat> there's an open bug about branches to unreachable not working as a way to communicate info
[04:07:22] <bstrie_vanished> huon: yeah I gathered, it's a pretty rare name :P
[04:07:34] <strcat> anyway
[04:08:02] <strcat> if there was a nonnull parameter attribute and it communicate the information to the callee *and the caller*, it would at least be an ad-hoc solution
[04:08:07] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[04:08:09] <strcat> communicated*
[04:08:41] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[04:09:17] *** Joins: astroch (astroch@moz-C18802C0.dhcp.embarqhsd.net)
[04:09:34] <huon> bstrie_vanished: but yeah, optimising things is best done with a liberal application of callgrind, perf and/or looking at IR/asm.
[04:10:38] <strcat> looking at IR/asm is the most useful for this kind of micro-optimization
[04:10:45] <cmr> more staring than looking
[04:10:59] <cmr> (IME)
[04:11:26] * o11c grumbles again about emitting calls to an explicit unreachable function and inlining *that* later
[04:11:35] <strcat> o11c: enormous compile-time hit
[04:11:36] *** Quits: MrByte (Dartakio@moz-81792842.chy-wy.client.bresnan.net) (Ping timeout)
[04:11:38] <strcat> it's not an acceptable solution
[04:11:48] <strcat> o11c: branch introduces 2 more basic blocks
[04:11:52] <strcat> LLVM optimizes basic block at a time
[04:11:56] <strcat> so it also hurts optimizations a *lot*
[04:12:03] <strcat> and makes it really slow
[04:12:04] <huon> And nonnull pointers/references are *everywhere* in Rust
[04:12:23] <o11c> strcat: I'm not seeing any new bb
[04:12:39] <strcat> o11c: you need to give labels to the branch
[04:12:44] <o11c> it's just replace IR 'unreachable' with IR 'call unreachable(); unreachable'
[04:13:04] <strcat> o11c: then it won't consider that branch to be a hint
[04:13:13] <strcat> it might have a side effect
[04:13:13] *** Quits: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com) (Ping timeout)
[04:13:23] <strcat> o11c: anyway there is a branch
[04:13:26] <o11c> strcat: right, but *later* you give unreachable() a body and inline again
[04:13:44] <strcat> o11c: if ptr.is_null() { unreachable() }
[04:13:44] <o11c> obviously propogating the information will never be *completely* free
[04:13:45] <strcat> is a branch
[04:14:14] <strcat> o11c: it can be free in the sense that it doesn't slow down compile-time by 2-3x and destroy optimizations by splitting into lots of blocks
[04:14:28] <strcat> metadata works well for this kind of thing
[04:14:44] <o11c> strcat: that's a branch either way, the only difference is when it's removed, which is the whole point
[04:14:56] <strcat> no, it's not a branch either way...
[04:15:04] <strcat> there is no branch right now
[04:15:12] <o11c> if ptr.is_null() { IR unreachable } is still a branch ...
[04:15:18] <strcat> I am not suggesting we do that...
[04:15:22] <strcat> I am saying it is not acceptable to do that
[04:15:34] <o11c> okay, then I'm not suggesting it either
[04:15:56] <strcat> if you branch to unreachable, then you split the basic block into 3
[04:16:02] <strcat> and LLVM is really, really dumb
[04:16:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[04:16:09] <o11c> I'm not seeing where branches come in at all, then
[04:16:10] <strcat> it works on one block at a time in general
[04:16:19] <strcat> o11c: if ptr.is_null() { unreachable }
[04:16:23] <strcat> introduces a branch
[04:16:24] <o11c> if you're already emitting 'unreachable' in a block, you can just emit it again
[04:16:29] <o11c> I'm not suggesting that!
[04:16:39] <strcat> we aren't emitting unreachable in a block
[04:17:04] <strcat> o11c: so what are you suggesting?
[04:17:17] <strcat> if you introduce any kind of branch like that, it hurts optimization and compile-time
[04:17:21] <o11c> then what is the "unreachable being optimized out" if there is no unreachable?
[04:17:58] <strcat> o11c: I was responding to Yurume 
[04:18:12] <strcat> 23:03:53          Yurume | strcat: could we use LLVM unreachable instruction for that purpose?
[04:18:14] <strcat> 23:03:57          strcat | Yurume: no.
[04:18:16] <strcat> 23:04:00          Yurume | (or do we already use that?)
[04:18:18] <strcat> 23:04:05          strcat | Yurume: LLVM isn't capable of using unreachable that way
[04:18:20] <strcat> 23:04:08          strcat | GCC is, but not LLVM
[04:18:22] <strcat> yes, there are other ways to do it
[04:18:24] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[04:18:29] *** Quits: arrrrrrrrr (arrrrrrrrr@moz-76FEE3FB.dynamic.qsc.de) (Quit: arrrrrrrrr)
[04:18:32] <strcat> none of them are acceptable due to the other problems
[04:18:43] <strcat> a nonnull function attribute would at least mean you could output
[04:18:50] <strcat> call assert_nonnull(ptr)
[04:19:01] <strcat> but it's still problematic
[04:19:10] <strcat> in order to prevent LLVM optimizing it out, you can't tell LLVM it is pure
[04:19:13] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Ping timeout)
[04:19:15] <strcat> so it makes the function it's in impure
[04:19:26] <strcat> and then it damages the aliasing info
[04:19:43] <strcat> because it could be reading/writing global state
[04:20:04] <o11c> so, the issue is not actually "LLVM isn't capable of using unreachable that way" but "that would introduce too many blocks"
[04:20:24] <strcat> o11c: well it's both
[04:20:44] <strcat> the branch splits it into more blocks, which is bad for performance and compile-time
[04:20:46] *** Quits: rootnode (rootnode@moz-7FAB5E8.ip1.george24.com) (Ping timeout)
[04:21:05] <strcat> and an opaque function also hurts aliasing information + makes the caller impure too
[04:21:32] <strcat> I don't think going down that path is going to work
[04:21:47] <strcat> even if we add a nonnull parameter attribute so we only need a single call and no branch
[04:21:55] <strcat> because the opaque function is really going to hurt
[04:23:12] <strcat> if LLVM supported the branch to unreachable idiom, you would need to split into blocks but not introduce impurity and mess with aliasing info
[04:23:17] <strcat> still bad
[04:23:36] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[04:23:37] <strcat> I don't think GCC's optimizer would be hurt by a branch like that, but LLVM isn't clever enough yet
[04:23:39] <aatch> strcat, couldn't we add a nonnull attribute and a custom pass though?
[04:23:56] <aatch> Or augment an existing one?
[04:23:58] <strcat> aatch: we could set arbitrary metadata where we need it and use a custom pass
[04:24:08] <strcat> aatch: augmenting an existing one means we'd need to get it done upstream
[04:24:17] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Client exited)
[04:24:23] <strcat> custom passes can be dynamically loaded
[04:24:33] <strcat> so yes, that's one solution
[04:24:52] <huon> isn't there something about requiring LLVM's cmake build system to build custom passes?
[04:25:07] <strcat> yeah we'd need to totally change our build system
[04:25:19] <strcat> you have to build that kind of thing in-tree too
[04:25:28] <strcat> so it's not really something I can implement
[04:25:29] *** Quits: nate (pinkeh@moz-A3C418FF.hcs.harvard.edu) (Quit: ...)
[04:25:32] *** Quits: derek_c (derek@moz-8F4BAB1D.cit.cornell.edu) (Ping timeout)
[04:25:46] <strcat> requires someone with buildbot access, etc.
[04:26:15] <huon> sounds like upstream is the more sensible approach (modulo the difficulty of getting LLVM patches merged...)
[04:26:17] <aatch> Hmm, I wonder how responsive the LLVM people would be to adding a nonnull attribute + the associated pass. Seems general enough.
[04:26:37] <strcat> aatch: it can't be an attribute
[04:26:51] <strcat> need metadata
[04:26:57] <aatch> strcat, why?
[04:27:08] *** Joins: Rym (Instantbir@C8A68A75.CF6EA49B.8772DA20.IP)
[04:27:43] <strcat> aatch: attributes only go on function types, function return types and function parameter types
[04:27:58] <strcat> aatch: when it inlines, it loses them
[04:28:09] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[04:28:09] <strcat> I already implemented a nonnull attribute and it doesn't fix this
[04:28:26] <strcat> it helps some contrived test cases I made, but I am not sure it will fix any real-world perf issues in rust
[04:28:54] <strcat> if we did it ourselves, we'd use metadata + custom pass
[04:29:06] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[04:29:12] *** Quits: gmjosack (gary@F91A859E.75E3DBFA.7AB8439E.IP) (Ping timeout)
[04:29:23] <strcat> if it's done upstream, then I think it involves standardizing a new form of metadata or reusing TBAA metadata
[04:29:26] *** Joins: eddyb (eddy@688E9026.F7C96DA2.FCAAE698.IP)
[04:29:30] <strcat> I think it'd probably be an extra field in TBAA metadata
[04:30:06] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: Textual IRC Client: www.textualapp.com)
[04:30:45] <aatch> strcat, it could be done by implementing a special intrinsics, like the lifetime ones
[04:30:58] *** Joins: tiernjo (quassel@moz-21A5F23D.ks.ks.cox.net)
[04:31:23] *** Joins: Jemaclus (jemaclus@moz-5A4BC30.hsd1.ca.comcast.net)
[04:33:51] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[04:34:30] <strcat> aatch: those hurt compile-time a fair bit though
[04:35:27] <strcat> as in I think it'd be maybe a 10% compile-time hit to output an instruction like that per ptr
[04:35:57] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[04:35:57] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[04:38:13] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[04:38:59] *** Quits: claudiu (claudiu@moz-FB94486E.thefacebook.com) (Input/output error)
[04:39:11] *** Quits: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca) (Quit: Leaving.)
[04:39:19] *** Joins: claudiu (claudiu@moz-FB94486E.thefacebook.com)
[04:40:41] *** Quits: Jemaclus (jemaclus@moz-5A4BC30.hsd1.ca.comcast.net) (Client exited)
[04:41:03] *** Quits: claudiu (claudiu@moz-FB94486E.thefacebook.com) (Ping timeout)
[04:41:07] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[04:41:29] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[04:43:41] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[04:44:20] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Client exited)
[04:44:24] *** Quits: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net) (Ping timeout)
[04:45:03] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[04:45:07] *** Quits: tiernjo (quassel@moz-21A5F23D.ks.ks.cox.net) (Ping timeout)
[04:45:30] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[04:45:59] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[04:46:00] *** Quits: brendan (brendaneic@79611EE9.A51CB73B.6FBF6D51.IP) (Quit: brendan)
[04:46:13] *** Quits: eevee (eevee@moz-8DEBFFC9.lv.lv.cox.net) (Quit: upgrades)
[04:47:27] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[04:50:57] <pzol> Can't get this binding for libicu to work https://gist.github.com/pzol/8995990 u_strFromUTF8WithSub does nothing... :(
[04:51:33] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[04:51:53] <strcat> icu makes me want to cry
[04:52:10] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[04:52:19] *** Joins: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[04:52:32] <pzol> strcat me to ;( spent like 5h on that ... can't figure why the it does nothing ;(
[04:53:13] <pzol> strcat let mut buf: ~[UChar] = std::vec::from_elem(cap, 0u8); should create a buffer to which the c function should write, right?
[04:53:59] <huon> pzol: you don't need .with_c_str
[04:54:18] *** Quits: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[04:54:26] <huon> pzol: s.as_bytes().as_ptr() should be fine, since Rust's strings are UTF-8
[04:55:05] <huon> (and, in fact, .with_c_str is actually incorrect, since \x00 is a valid byte in UTF-8, but not in a C string)
[04:55:44] <pzol> huon ok, will try
[04:55:59] <pzol> huon should UChar be i8 or u8??
[04:56:11] <huon> pzol: i think it should be u16
[04:56:14] <huon> if it's UTF-16
[05:00:19] <pzol> wierd, getting now [1]    41522 bus error  ./ffi
[05:01:03] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Input/output error)
[05:01:17] <huon> run it under valgrind
[05:02:19] *** Quits: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP) (Ping timeout)
[05:02:22] <pzol> ok
[05:02:26] <huon> pzol: are you creating buf with 0u8 or 0u16?
[05:02:31] *** Joins: zihaowang (zihaowang@moz-8BAEDE0A.hsd1.va.comcast.net)
[05:03:01] <pzol> both don't work
[05:03:23] <pzol> now getting segfault
[05:03:39] *** Joins: kvanb (kvanb@moz-E7540EE5.lnse4.win.bigpond.net.au)
[05:04:38] *** Joins: eevee (eevee@moz-8DEBFFC9.lv.lv.cox.net)
[05:05:21] <pzol> huon when running it under valgrind it doesnt crash
[05:06:14] <pzol> huon I have added the valgrind output... can u have a look?
[05:06:34] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:07:03] <huon> pzol: weird; I'm just building it locally now
[05:07:27] <pzol> huon icucore should work under osx only
[05:07:44] <pzol> the other icuuc should work elsewhere too
[05:08:26] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:09:20] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[05:09:51] *** Quits: vosen (vosen@moz-266BA656.icpnet.pl) (Connection reset by peer)
[05:10:44] <huon> it doesn't :( can't find u_strFromUTF8WithSub
[05:11:26] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[05:11:26] <pzol> huon is from the macos /usr/lib/libicucore
[05:11:58] <huon> yeah, I've got it in the header files here (linux), but I can't work out which icu library it's in
[05:12:02] <huon> meh :(
[05:12:57] <pzol> can you try the icuuc::u_strFromUTF8WithSub_52
[05:13:24] <huon> linking against icuuc still gives an "symbol not found error"
[05:13:40] *** Joins: tiernjo (quassel@moz-21A5F23D.ks.ks.cox.net)
[05:14:01] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[05:14:22] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[05:14:57] <pzol> nm /usr/local/lib/libicuuc.dylib | grep u_strFromUTF8WithSub_52 ?
[05:15:15] <huon> oh, yes; you are correct
[05:15:25] <huon> I missed the _52 :)
[05:15:29] <huon> it builds \o/
[05:15:32] <pzol> :) 
[05:15:59] *** Quits: canhtak (canhtak@moz-4D8F0D46.wl.t.ulaval.ca) (Quit: canhtak)
[05:16:03] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[05:16:08] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:17:40] <Yurume> huon: is that the Unicode version? :p
[05:18:05] *** Quits: luzie (lucy@moz-CD18B14B.customer.cdi.no) (Input/output error)
[05:18:12] *** Joins: luz (lucy@moz-CD18B14B.customer.cdi.no)
[05:18:32] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:19:10] <pzol> it crashes with
[05:19:10] <pzol> ==58616==  Non-existent physical address at address 0x10022F084
[05:19:10] <pzol> ==58616==    at 0x2216D8: u_strFromUTF8WithSub (in /usr/lib/libicucore.A.dylib)
[05:19:49] <pzol> Yurume having fun with unicode :D
[05:19:58] <huon> pzol: I'm seeing it crash with "Access not within mapped region at address 0x600000000"
[05:20:13] <pzol> duh... any idea why??
[05:20:21] <huon> first thing I would do is double/triple check the definitions of the functions you're calling
[05:20:38] <pzol> http://icu-project.org/apiref/icu4c/ustring_8h.html#a0e9b7cd493c351804322ad1805fbe775
[05:20:46] <Yurume> that sounds like a calling convension problem.
[05:21:05] <pzol> I translated this into pub fn u_strFromUTF8WithSub(dest: *mut UChar, destCapacity: i32, pDestLength: *mut i32, src: *c_char, subChar: UChar32, pNumSubstitutions: *i32, pErrorCode: *mut UErrorCode) -> *UChar;
[05:22:18] <huon> it should be -> *mut UChar
[05:22:25] <huon> but yes, that seems correct
[05:22:38] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[05:22:41] <Yurume> and pNumSubstitutions is also an output parameter, but anyway.
[05:22:58] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[05:23:12] <pzol> Yurume is let pNumSubstitutions: *mut i32 = &mut 0; wrong?
[05:23:22] <Yurume> pzol: what ABi are you using for the `extern` block which contains the definition?
[05:23:31] <Yurume> pzol: I meant `pNumSubstitutions: *i32` part.
[05:23:48] <pzol> Yurume https://gist.github.com/pzol/8995990
[05:23:49] *** Joins: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP)
[05:24:41] *** Joins: aravindavk (aravinda@moz-BD0CADEE.redhat.com)
[05:24:54] *** Joins: pudgetta (Mibbit@5943575B.EB1D9B29.764A0A6D.IP)
[05:25:40] *** Quits: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP) (Ping timeout)
[05:25:48] <huon> pzol: I kinda fixed it by https://gist.github.com/huonw/2f7b180db2ea649027b0
[05:25:58] <huon> i.e. don't take address of temporaries
[05:26:12] <pudgetta> I am a newb, may I ask what is the fastest way to upgrade my installed rust from 0.8 to 0.9?
[05:26:20] <Yurume> pudgetta: what OS are you using?
[05:26:32] <pudgetta> mac os
[05:26:38] <pudgetta> 10.9
[05:27:20] <huon> at least... it's not crashing anymore
[05:27:48] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[05:28:27] <Yurume> pudgetta: I guess you have to compile it yourself unfortunately.
[05:28:37] <Yurume> i.e. as in https://github.com/mozilla/rust#linux--os-x
[05:28:44] <pzol> huon thanks! will have a look!
[05:28:47] <pudgetta> homebrew only to 0.4
[05:29:13] *** Joins: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP)
[05:29:18] <pzol> huon getting Access not within mapped region at address 0x10
[05:30:13] <Yurume> pzol: &mut 0? I think you need to define a proper variable (e.g. let mut numSubstitutions: i32 = 0) and take its reference whenever required (..., &mut numSubstitutions, ...).
[05:30:21] <huon> pzol: weird, it's not crashing for me
[05:30:40] <huon> but that sounds like it's passing a length in place of a pointer
[05:31:10] <pzol> huon but does it return anyting?
[05:31:24] *** Joins: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP)
[05:31:34] *** Quits: dylukes (dylukes@moz-ED57011A.oakland.resnet.pitt.edu) (Quit: Textual IRC Client: www.textualapp.com)
[05:32:07] <huon> pzol: nope
[05:32:20] <huon> ... the return value (i.e. r) is NULL too :(
[05:32:22] <pzol> Yurume changed it let mut pNumSubstitutions = 0; 
[05:32:28] <pzol> huon wierd... 
[05:32:40] *** Joins: edwardw (Mibbit@E6E87FA7.354F6412.B9C6B12A.IP)
[05:32:48] <pzol> huon the only thing I got working from icu was printf ;)
[05:33:18] *** Quits: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP) (Ping timeout)
[05:33:29] <huon> pzol: ah, the definition is wrong!
[05:33:33] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[05:33:46] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[05:34:05] <huon> missing srcLength
[05:34:16] <Yurume> oops!
[05:34:22] <huon> it works \o/
[05:35:38] <huon> buf ~[102u16, 111u16, 111u16, 98u16, 97u16, 114u16, 0u16, 0u16, 0u16, 0u16, 0u16, 0u16]
[05:40:11] *** Quits: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP) (Quit: brendan)
[05:40:39] *** Quits: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net) (Quit: Leaving)
[05:40:41] *** Quits: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw) (Ping timeout)
[05:44:11] *** Joins: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw)
[05:44:24] *** Parts: agallego (agallego@moz-6B897026.nyc.res.rr.com) ()
[05:45:39] *** Quits: fournm (Aria@moz-ABB60BA0.austin.res.rr.com) (Quit: Leaving)
[05:47:14] *** Quits: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw) (Ping timeout)
[05:47:54] *** Quits: pudgetta (Mibbit@5943575B.EB1D9B29.764A0A6D.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[05:50:40] *** Quits: p1start (rewi@moz-A082F561.adsl.xtra.co.nz) (Ping timeout)
[05:52:31] *** Quits: tiernjo (quassel@moz-21A5F23D.ks.ks.cox.net) (Client exited)
[05:53:05] *** Joins: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[05:54:11] <pzol> huon you're a genius ;)
[05:54:24] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[05:55:00] *** Quits: synackse (jordyd@moz-1719F70B.seg34.ucf.edu) (Ping timeout)
[05:55:08] *** Quits: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[05:56:11] *** Joins: p1start (rewi@moz-A082F561.adsl.xtra.co.nz)
[05:56:51] *** Parts: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP) ()
[05:56:58] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[05:56:59] <pzol> huon can you send me your source pls?
[05:57:13] *** Joins: mankyKitty (Instantbir@325B2C60.E2538F64.BC02889B.IP)
[05:58:29] <huon> pzol: I just added srcLength: i32 after src: *c_char in the definition
[05:58:38] <huon> and passed `s.len()` for that argument
[05:58:41] <pzol> huon ok thanks a million :)
[05:59:28] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[06:00:10] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[06:00:33] *** Quits: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca) (Quit: Leaving.)
[06:03:19] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[06:03:20] *** Joins: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP)
[06:04:14] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:05:29] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[06:10:32] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[06:10:38] *** Joins: dmac1 (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[06:10:38] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Connection reset by peer)
[06:12:51] *** kimundi is now known as zz_kimundi
[06:12:55] *** Quits: dmac1 (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Quit: Leaving.)
[06:13:32] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Input/output error)
[06:16:47] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[06:16:52] *** Quits: zihaowang (zihaowang@moz-8BAEDE0A.hsd1.va.comcast.net) (Client exited)
[06:17:52] *** Joins: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net)
[06:18:35] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:20:09] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[06:20:38] *** Joins: skade (skade@moz-F3F67608.pools.arcor-ip.net)
[06:20:40] *** Quits: edwardw (Mibbit@E6E87FA7.354F6412.B9C6B12A.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:20:54] *** Joins: edwardw (Mibbit@E761717E.1B2F6624.7F41E82D.IP)
[06:22:10] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[06:22:10] *** ChanServ sets mode: +ao brson brson
[06:25:40] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[06:28:24] *** Joins: hacker_s_ (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[06:28:47] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[06:32:22] *** Joins: jyyou (jyyou@moz-B061DB92.cs.nctu.edu.tw)
[06:32:40] *** Joins: derek_c (derek@moz-472DCADA.cit.cornell.edu)
[06:35:23] *** Quits: matp (matp@moz-16FE1E05.matp.at) (Ping timeout)
[06:36:29] *** Joins: jackneill (jackneill@moz-20521AD2.pool.digikabel.hu)
[06:36:53] *** Joins: Jemaclus (jemaclus@moz-5A4BC30.hsd1.ca.comcast.net)
[06:38:30] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Quit: Leaving...)
[06:40:01] *** Joins: Ferreus (ferreus@moz-92609A17.dip0.t-ipconnect.de)
[06:41:15] *** Joins: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[06:41:23] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[06:43:23] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[06:44:24] *** Joins: matp (matp@moz-16FE1E05.matp.at)
[06:44:48] *** Quits: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net) (Quit: zztr)
[06:46:26] *** Quits: aatch (James@moz-B437F499.pocketrent.com) (Client exited)
[06:48:02] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[06:48:06] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Input/output error)
[06:48:52] *** Quits: edwardw (Mibbit@E761717E.1B2F6624.7F41E82D.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:49:29] *** Joins: edwardw (Mibbit@E761717E.1B2F6624.7F41E82D.IP)
[06:49:32] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[06:50:55] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[06:53:20] *** Quits: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Client exited)
[06:53:50] *** Quits: derek_c (derek@moz-472DCADA.cit.cornell.edu) (Ping timeout)
[06:53:52] *** Quits: Jemaclus (jemaclus@moz-5A4BC30.hsd1.ca.comcast.net) (Client exited)
[06:55:01] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[06:57:39] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[06:58:35] *** Quits: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:00:44] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Client exited)
[07:01:06] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[07:01:57] *** Quits: trinary (Adium@moz-D78CD0D5.hsd1.co.comcast.net) (Quit: Leaving.)
[07:02:48] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[07:05:51] *** Quits: valenting (Thunderbir@9A1975C1.39CE2EE.E400A05F.IP) (Ping timeout)
[07:08:09] *** Joins: mouse (mouse@moz-4A3624F.broadband.corbina.ru)
[07:10:23] *** Quits: ctangent (textual@moz-4B354EF9.hsd1.wa.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:11:01] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[07:13:20] *** Quits: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP) (Ping timeout)
[07:16:05] *** Joins: synackse (jordyd@2D608993.77F880E0.D9401097.IP)
[07:16:08] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:16:48] *** Joins: sokomo (sokomo@8293D4FC.93FF164A.408809BB.IP)
[07:17:00] *** Quits: sokomo (sokomo@8293D4FC.93FF164A.408809BB.IP) (Input/output error)
[07:17:16] *** Joins: sokomo (sokomo@8293D4FC.93FF164A.408809BB.IP)
[07:17:23] *** Joins: ctangent (textual@moz-4B354EF9.hsd1.wa.comcast.net)
[07:17:48] *** Joins: fabiand (fabiand@moz-7B8E9E60.adsl.alicedsl.de)
[07:18:31] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:18:43] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[07:19:32] *** Quits: ctangent (textual@moz-4B354EF9.hsd1.wa.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:19:59] *** Quits: huon (Thunderbir@2702835C.D5A1DCF.37681C44.IP) (Quit: huon)
[07:20:17] *** Quits: edwardw (Mibbit@E761717E.1B2F6624.7F41E82D.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:21:05] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Quit: Leaving...)
[07:21:18] *** Quits: FreeFull (freefull@moz-1883929A.as13285.net) (Quit: I used to put messages here)
[07:23:29] *** Quits: mouse (mouse@moz-4A3624F.broadband.corbina.ru) (Ping timeout)
[07:23:59] *** Joins: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[07:24:27] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[07:25:53] *** Quits: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[07:27:47] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[07:31:27] *** Joins: eibwen (kvirc@moz-DBA0490C.dip0.t-ipconnect.de)
[07:32:04] *** Joins: tiernjo (quassel@moz-21A5F23D.ks.ks.cox.net)
[07:33:37] *** Joins: claudiu (claudiu@moz-D5BFAAB5.hsd1.ca.comcast.net)
[07:34:13] *** Joins: vgeddes (vincent.ge@moz-D8D4FE4D.dsl.mweb.co.za)
[07:34:55] *** Joins: claudiu_ (claudiu@CB447DD5.6B10AC3.E2F59BBC.IP)
[07:35:19] *** Quits: claudiu (claudiu@moz-D5BFAAB5.hsd1.ca.comcast.net) (Ping timeout)
[07:36:38] *** Joins: pongad (Mibbit@moz-7E8AAD2E.res.gatech.edu)
[07:36:56] *** Quits: StarLight (StarLight@moz-22315840.dynamic.avangarddsl.ru) (Ping timeout)
[07:37:28] <pongad> Is there a way to efficiently make copies of |&T| -> U  ?
[07:38:30] <elyzion> http://static.rust-lang.org/doc/master/guide-conditions.html this page is giving me an access denied (linked to from the bottom of the tutoral in What's next?)
[07:38:41] <elyzion> tutorial*
[07:38:58] *** Joins: jdm (jdm@DFC6E2EA.EDD2F557.D938BA7F.IP)
[07:38:58] *** ChanServ sets mode: +o jdm
[07:39:40] <elyzion> (0.9 is fine though.)
[07:40:18] <sfackler> elyzion: conditions have been removed from the standard library and that tutorial was as well, but I guess we missed a link
[07:40:20] *** Joins: montezuma (Mibbit@moz-BC38AAEC.ztv.ne.jp)
[07:40:25] *** Joins: jdm_ (jdm@DFC6E2EA.EDD2F557.D938BA7F.IP)
[07:40:40] *** Quits: montezuma (Mibbit@moz-BC38AAEC.ztv.ne.jp) (Quit: http://www.mibbit.com ajax IRC Client)
[07:40:54] *** Quits: jdm (jdm@DFC6E2EA.EDD2F557.D938BA7F.IP) (Ping timeout)
[07:40:56] <elyzion> yes, i just cheched https://github.com/mozilla/rust/pull/12039 
[07:41:04] <elyzion> definitly a missed link :)
[07:41:15] *** Joins: StarLight (StarLight@moz-90E30E2D.dynamic.avangarddsl.ru)
[07:41:19] *** Joins: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[07:42:08] *** Joins: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP)
[07:42:30] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[07:42:53] *** Quits: ercxx (ercan@moz-88DD3A7E.dyn.optonline.net) (Quit: WeeChat 0.4.3)
[07:43:56] *** Quits: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP) (Ping timeout)
[07:44:03] *** Quits: kaksmet_ (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[07:45:01] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[07:45:09] *** Quits: skade (skade@moz-F3F67608.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:46:46] *** Joins: Ms2ger (Ms2ger@moz-CB2E71FA.adsl-dyn.isp.belgacom.be)
[07:47:00] *** Quits: jdm_ (jdm@DFC6E2EA.EDD2F557.D938BA7F.IP) (Ping timeout)
[07:47:07] <pzol> how do I write an definition for a C function call with variadic args ? int32_t u_fprintf_u (UFILE * f, const UChar * patternSpecification,... )	
[07:47:29] <strcat> rust supports varargs in FFI
[07:47:32] <strcat> just use ...
[07:48:45] <pzol> strcat pub fn u_printf_u_52(patternSpecification: *UChar, ...) -> i32; correct?
[07:50:04] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[07:50:23] <strcat> pzol: well and the file arg :)
[07:50:35] <Yurume> you missed `f` :)
[07:51:50] *** Quits: tiernjo (quassel@moz-21A5F23D.ks.ks.cox.net) (Ping timeout)
[07:55:51] *** Quits: pongad (Mibbit@moz-7E8AAD2E.res.gatech.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[07:56:36] <pzol> what??  ... this one prints to stdout
[07:56:49] <pzol> http://www.icu-project.org/apiref/icu4c/ustdio_8h.html#a0def795626752c7b5107aa5addd457d7
[07:57:07] <Yurume> then you pasted a wrong definition...
[07:57:13] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[07:57:17] <Yurume> for u_printf_u you are right.
[07:57:47] <pzol> Haven't done ANYTHING in C for 10.years.... writing a binding for icu in Rust now, I am SO happy I have left C behind
[07:57:50] <pzol> :)
[07:58:57] <pzol> and now I am back in the wonderful world of random crashes, invalid reads and friends :)
[07:59:03] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[07:59:55] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[08:04:48] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[08:06:12] *** Joins: doener (doener@moz-C68F600D.unity-media.net)
[08:06:14] <elyzion> pzol: i was just reading your github.io site hashmap stuff. it helps a lot when starting out, thanks for all the effort!
[08:06:23] <pzol> elyzion thanks ;)
[08:06:24] *** Joins: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP)
[08:08:27] *** Quits: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[08:09:27] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[08:10:39] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[08:11:25] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[08:11:54] <pzol> How do I get a char buffer ??? let mut buf: ~[char] = std::vec::from_elem(src.len() + 1, 0u8); -> error: mismatched types: expected `~[char]` but found `~[u8]` (expected char but found u8)
[08:12:26] <eddyb> char is a codepoint in rust, not a byte
[08:12:31] *** Quits: Rym (Instantbir@C8A68A75.CF6EA49B.8772DA20.IP) (Ping timeout)
[08:13:06] <mcpherrin> you can't go from a str to a [char] without copying.  Though I expect there's something in the stdlib to do it
[08:13:14] <mcpherrin> this is where we need roogle
[08:13:25] <mcpherrin> rostgle?
[08:13:31] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[08:13:35] <pzol> eddyb so a u8 buffer instead?
[08:13:40] <eddyb> pzol: yupp
[08:13:43] <pzol> :)
[08:14:37] <eddyb> pzol: you can borrow a ~str or &str as &[u8] with .as_bytes(), I think
[08:15:00] <pzol> eddyb I need a buffer to pass to a C function which will write into it
[08:15:54] <eddyb> you can use ~str and then call .set_len if teh C function gives you a length
[08:15:56] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:16:44] <eddyb> std::str::with_capacity(n) will give you an appropriately sized buffer to contain n bytes (n-1 ASCII characters + \0)
[08:17:19] *** Quits: onelson (owen@18CF7301.95770028.5B6BFE7D.IP) (Ping timeout)
[08:17:21] <eddyb> pzol: hmm, I wonder though... you might want to work with ~[u8] and then convert it to ~str using one of the safe functions that check for utf8
[08:17:53] *** Joins: mouse (mouse@moz-373942D2.dhcp.yndx.net)
[08:18:10] *** flaper87|afk is now known as flaper87
[08:18:16] <pzol> eddyb am working on string lib... using icu undercover, so I just need to convert back 
[08:18:30] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[08:18:39] <pzol> eddyb will try std::str::with_capacity(n)
[08:20:05] *** Joins: Locke23rus (quassel@moz-1014EFC0.static.linky.ru)
[08:21:44] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[08:22:28] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[08:23:26] *** Joins: bluz (blaz@moz-84D58AA8.anonymous.at.anonine.com)
[08:23:33] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[08:24:01] <elyzion> what is the rust equivalent for exit(int status)?
[08:24:20] <elyzion> standard c lib extention?
[08:24:35] <elyzion> (as in std::libc::funcs::c95::stdlib::exit)
[08:24:55] *** Parts: synackse (jordyd@2D608993.77F880E0.D9401097.IP) ()
[08:25:28] <mcpherrin> elyzion: you can set_exit_status before returning from main
[08:25:55] <mcpherrin> elyzion: to exit from anywhere else you want to use the libc exit
[08:26:16] <elyzion> mcpherrin: thank you! 
[08:26:40] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:26:41] <mcpherrin> I think it's os::set_exit_status or something, but you can search the docs for more info
[08:26:42] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:26:43] *** Joins: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net)
[08:26:47] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:26:51] <strcat> mcpherrin: main isn't tied to the program lifetime when using libstd
[08:26:58] <strcat> falling off main doesn't exit
[08:27:03] <strcat> it exits when all tasks end
[08:27:14] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:27:43] <mcpherrin> strcat: oh, of course.  I know that; I ought to not give advice when sleepy :)
[08:28:23] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[08:28:30] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Client exited)
[08:29:16] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[08:30:33] *** Quits: ab (alex@BC9D99CC.37C1012D.FE617B51.IP) (Ping timeout)
[08:31:14] *** Joins: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de)
[08:31:15] *** Quits: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de) (Quit: Matthias247)
[08:31:55] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:31:56] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:32:22] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[08:33:02] *** Quits: victorporof (victorporo@8F761026.B5EF4AF6.E96CA9D8.IP) (Quit: victorporof)
[08:33:15] *** Joins: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de)
[08:35:36] *** Joins: aurynj (Eon@2C265A5F.5D40BDF3.6B2FAB37.IP)
[08:36:18] *** Joins: bytbox (s@moz-AA99B23F.washdc.fios.verizon.net)
[08:39:52] *** Joins: agarnier (agarnier@B49B97BC.DF317A48.8108A302.IP)
[08:40:02] *** Quits: thesnowdog (doug@6BB4FF85.9D0B7490.6F17036B.IP) (Ping timeout)
[08:40:33] *** Quits: gfarfl (david@61CAEA53.EC1EE148.D1416617.IP) (Ping timeout)
[08:41:54] *** Quits: agarnier (agarnier@B49B97BC.DF317A48.8108A302.IP) (Quit: Quitte)
[08:42:01] *** Joins: jdm (jdm@DFC6E2EA.EDD2F557.D938BA7F.IP)
[08:42:02] *** ChanServ sets mode: +o jdm
[08:42:29] *** Joins: thesnowdog (doug@6BB4FF85.9D0B7490.6F17036B.IP)
[08:42:54] *** Joins: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP)
[08:43:02] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[08:44:03] *** Joins: gfarfl (david@61CAEA53.EC1EE148.D1416617.IP)
[08:44:42] *** Quits: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP) (Ping timeout)
[08:44:54] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[08:44:57] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Quit: Leaving.)
[08:46:23] *** Quits: jdm (jdm@DFC6E2EA.EDD2F557.D938BA7F.IP) (Ping timeout)
[08:46:50] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[08:47:30] *** Joins: jdm (jdm@DFC6E2EA.EDD2F557.D938BA7F.IP)
[08:47:30] *** ChanServ sets mode: +o jdm
[08:48:39] *** Quits: jdm (jdm@DFC6E2EA.EDD2F557.D938BA7F.IP) (Input/output error)
[08:48:50] *** Joins: jdm (jdm@DFC6E2EA.EDD2F557.D938BA7F.IP)
[08:48:50] *** ChanServ sets mode: +o jdm
[08:48:54] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[08:49:04] *** Joins: skade (skade@541D1605.505237C9.CAE22B62.IP)
[08:49:35] *** Quits: patpat (patpat@moz-1599AAE4.as13285.net) (Ping timeout)
[08:50:39] *** Quits: jdm (jdm@DFC6E2EA.EDD2F557.D938BA7F.IP) (Input/output error)
[08:50:48] *** Joins: jdm (jdm@DFC6E2EA.EDD2F557.D938BA7F.IP)
[08:50:48] *** ChanServ sets mode: +o jdm
[08:51:56] *** Quits: jdm (jdm@DFC6E2EA.EDD2F557.D938BA7F.IP) (Input/output error)
[08:52:13] *** Joins: jdm (jdm@DFC6E2EA.EDD2F557.D938BA7F.IP)
[08:52:13] *** ChanServ sets mode: +o jdm
[08:55:19] *** Joins: zucchini (Mibbit@4310ACE0.D4D8582E.3FE05282.IP)
[08:58:05] *** Quits: zucchini (Mibbit@4310ACE0.D4D8582E.3FE05282.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:59:27] <pzol> if I do "föobär".as_bytes() how do I get the same back into a ~str ??
[09:00:03] <mcpherrin> str::from_utf8 I think
[09:00:47] <mcpherrin> also from_utf8_owned and from_utf8_lossy depending on your needs
[09:02:02] <pzol> mcpherrin hmmm I always get back Some(~"f\xf6ob\xe4r\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00")
[09:02:48] <mcpherrin> rusti: "föobär".as_bytes()
[09:02:49] -rusti- &[102u8, 195u8, 182u8, 111u8, 98u8, 195u8, 164u8, 114u8]
[09:03:24] *** Quits: jdm (jdm@DFC6E2EA.EDD2F557.D938BA7F.IP) (Ping timeout)
[09:03:51] <mcpherrin> rusti: str::from_utf8_lossy("föobär".as_bytes())
[09:03:51] *** Joins: jdm (jdm@DFC6E2EA.EDD2F557.D938BA7F.IP)
[09:03:52] *** ChanServ sets mode: +o jdm
[09:04:00] -rusti- failed to pastebin 11 lines of output
[09:04:06] <eddyb> pzol: you have to call .set_len
[09:04:12] <pzol> eddyb ?
[09:04:25] <eddyb> to cut off the 0 padding
[09:04:41] <eddyb> (which makes me think you used from_elem instead of with_capacity)
[09:04:42] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[09:04:52] *** Quits: A1kmm (A1kmm@moz-72AA67E.dsl.mel.iprimus.net.au) (Ping timeout)
[09:05:15] *** Joins: Hildar (Mibbit@moz-1FA995E0.in-addr.btopenworld.com)
[09:05:22] *** Quits: p1start (rewi@moz-A082F561.adsl.xtra.co.nz) (Ping timeout)
[09:06:07] <pzol> rusti: std::str::from_utf8("föobär".as_bytes()).unwrap()
[09:06:08] -rusti- "f\xf6ob\xe4r"
[09:06:13] <pzol> eddyb see?
[09:06:43] <eddyb> rusti: print!("{} ", std::str::from_utf8("föobär".as_bytes()).unwrap())
[09:06:45] -rusti- föobär ()
[09:06:49] *** Quits: jdm (jdm@DFC6E2EA.EDD2F557.D938BA7F.IP) (Ping timeout)
[09:07:02] <eddyb> pzol: you were looking at the output of {:?}
[09:07:06] <pzol> yes :D
[09:07:08] <eddyb> the only problem is the extra zeroes
[09:07:20] <eddyb> the rest is just repr being thorough
[09:07:33] <pzol> eddyb thanks!
[09:08:14] <Yurume> pzol: excess zeroes are there since i) we don't know what the length of returned string would be so ii) we overallocate and let the function fill the zero-terminated bytes but iii) we haven't stripped the trailing zeroes when we convert the bytes into a string.
[09:08:21] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[09:08:48] <eddyb> Yurume: whaa?
[09:08:50] <Yurume> finding the first zero byte and slicing as needed is the caller's job :)
[09:08:55] <pzol> Yurume :) 
[09:09:05] *** Quits: elyzion (elyzion@moz-D4AAE1FD.ap122.ftth.ucom.ne.jp) (Quit: Lost terminal)
[09:09:11] <Yurume> eddyb: since it deals with an FFI.
[09:09:14] <eddyb> Yurume: pretty sure pzol was creating a padded buffer
[09:09:17] <Yurume> yes
[09:09:25] <eddyb> so why "we"?
[09:09:33] <eddyb> are you talking about something in libstd?
[09:09:53] <Yurume> eddyb: ah sorry... it is meant to refer to pzol
[09:09:55] <pzol> eddyb yurume converting utf8 -> utf16 and back ;) and it actually works (besides the bloddy 0)
[09:09:56] <Hildar> Can I .(mut_)iter over a ~[u8] and still add/remove elements from the array? Or do I _have_ to make a second array and .move_iter() everything into the new one?
[09:10:04] <eddyb> I would expect the function pzol calls to return the written length
[09:10:11] <pzol> eddyb it does ;)
[09:10:21] <eddyb> Yurume: told him :P
[09:10:24] <Yurume> lol
[09:10:42] <eddyb> unsafe { buffer.set_len(written_len); } // done
[09:10:50] <eddyb> Hildar: you mean push/pop?
[09:10:59] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (Ping timeout)
[09:11:12] <eddyb> move_iter doesn't do anything fancy for Pod's
[09:11:55] <Hildar> eddyb: Not necessarily at the end (I'm doing things like stripping things like \0, ensuring CR is followed by LF, etc.).
[09:11:59] *** Joins: jdm (jdm@DFC6E2EA.EDD2F557.D938BA7F.IP)
[09:11:59] *** ChanServ sets mode: +o jdm
[09:12:32] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[09:12:42] <Hildar> eddyb: If it's pod I can just .iter() and copy it into a new vector I suppose.
[09:12:52] <Hildar> Which it is (it's u8 :P)
[09:13:04] *** Joins: marianoguerra (marianogue@moz-49BCECB2.dip0.t-ipconnect.de)
[09:13:42] <eddyb> Hildar: I would use an iterator and collecting into another vector. that said, if you don't expect to be doing many insertions/removals (that require memoves), you could edit it in-place, but not with an iterator
[09:14:35] *** Joins: agarnier (agarnier@B49B97BC.DF317A48.8108A302.IP)
[09:15:07] <Hildar> eddyb: Well, I have to iterate over it to find what I need to change?
[09:15:51] <eddyb> while i < v.len() {... i += 1;} etc.
[09:16:02] <eddyb> it really depends on your usecase
[09:16:04] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[09:16:13] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[09:16:22] *** Joins: pilf (pilf@8FA95888.1A994CBC.4B228AD7.IP)
[09:17:17] *** Quits: avsej (avsej@D9A610B8.4841F515.FB33447D.IP) (No route to host)
[09:17:52] *** Quits: jdm (jdm@DFC6E2EA.EDD2F557.D938BA7F.IP) (Ping timeout)
[09:18:32] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:19:40] *** Joins: A1kmm (A1kmm@moz-F1AD0EAF.dsl.mel.iprimus.net.au)
[09:23:05] *** Joins: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP)
[09:23:30] *** Joins: iDolfHatler (idolf@moz-47812C15.static.bcbnet.dk)
[09:24:53] *** Quits: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP) (Ping timeout)
[09:25:08] *** Joins: victorporof (victorporo@8F761026.B5EF4AF6.E96CA9D8.IP)
[09:25:27] *** Quits: q66 (q66@moz-30F47C55.range86-151.btcentralplus.com) (Quit: Leaving)
[09:25:47] *** Parts: pzol (pzol@86821BC.DEB41A6D.AADC76B.IP) (Textual IRC Client: www.textualapp.com)
[09:26:48] *** Joins: pzol (pzol@86821BC.DEB41A6D.AADC76B.IP)
[09:26:52] * pzol has conquered ICU's utf8 -> utf16 -> utf8 conversions!
[09:27:41] <Zr40> pzol: now try the U+1F4A9 PILE OF POO character! 💩
[09:28:05] <Zr40> if that survives the round trip, anything will
[09:28:57] <pzol> :D
[09:30:37] <eddyb> hang on, I'm feeling a bit warm... I might actually have a high temperature
[09:30:41] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[09:30:53] <eddyb> that would explain the slow thinking and whatnot
[09:31:49] <eddyb> ah, fever is the word I was looking for
[09:32:56] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[09:33:13] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[09:35:48] <eddyb> probably the first time I am not excited by being sick :P
[09:36:31] <Zr40> eddyb: be sure to drink lots of water
[09:38:03] *** Joins: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP)
[09:38:37] *** Joins: q66 (q66@moz-30F47C55.range86-151.btcentralplus.com)
[09:40:03] *** Joins: nkoep (nik@moz-C75B39A9.pool.mediaways.net)
[09:40:05] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[09:43:19] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[09:43:40] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[09:43:42] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 30.0a1/20140213030201])
[09:43:48] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[09:45:13] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Connection reset by peer)
[09:45:21] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[09:45:47] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[09:45:55] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[09:45:56] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[09:46:25] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[09:47:45] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[09:48:08] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[09:48:54] *** Quits: victorporof (victorporo@8F761026.B5EF4AF6.E96CA9D8.IP) (Ping timeout)
[09:49:26] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Quit: arturo)
[09:49:32] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[09:50:29] *** Quits: xitology (xi@85437D54.5AFA3E4.CEDFC552.IP) (Ping timeout)
[09:50:51] *** Joins: igork (igork@moz-F6DD8476.broadband.corbina.ru)
[09:51:10] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[09:51:30] *** Joins: jyyou_ (jyyou@moz-47B052FA.cs.nctu.edu.tw)
[09:55:08] *** Quits: jyyou (jyyou@moz-B061DB92.cs.nctu.edu.tw) (Quit: leaving)
[09:55:33] *** jyyou_ is now known as jyyou
[09:56:05] <pzol> Zr40 it passes test_pile_of_poo :)
[09:56:14] <Zr40> pzol: awesome :)
[09:56:22] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[09:57:35] *** Quits: fmtq (fmt@moz-5769BD38.static.tpgi.com.au) (Ping timeout)
[09:58:33] *** Quits: agarnier (agarnier@B49B97BC.DF317A48.8108A302.IP) (Quit: Quitte)
[09:58:40] *** Joins: agarnier (agarnier@B49B97BC.DF317A48.8108A302.IP)
[09:58:44] *** Quits: aurynj (Eon@2C265A5F.5D40BDF3.6B2FAB37.IP) (Quit: Leaving)
[09:59:15] *** Joins: fmtq (fmt@moz-5769BD38.static.tpgi.com.au)
[10:01:25] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[10:01:46] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[10:03:01] *** Joins: rca (rcatolino@moz-7FACA309.adsl.proxad.net)
[10:03:33] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[10:04:22] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[10:06:32] *** Joins: andre (andre@CA528A4A.45A4338E.8EE27E6.IP)
[10:07:37] *** Joins: patpat (patpat@moz-7F753D82.gold.ac.uk)
[10:11:46] *** Quits: fabrice (fabrice@moz-99690620.hinet-ip.hinet.net) (Quit: Leaving.)
[10:12:51] *** Joins: oberstet (quassel@moz-8986665C.dynamic.mnet-online.de)
[10:14:05] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[10:16:43] *** zz_kimundi is now known as kimundi
[10:17:29] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[10:21:37] *** Joins: Armavica (virgile@moz-AD428ED7.ens.fr)
[10:21:55] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[10:22:56] *** Quits: alinab (alina@moz-94EAE39D.alinab.org) (Quit: leaving)
[10:23:51] *** Joins: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP)
[10:24:20] *** Quits: rca (rcatolino@moz-7FACA309.adsl.proxad.net) (Ping timeout)
[10:25:41] *** Quits: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP) (Ping timeout)
[10:26:27] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[10:28:34] *** Joins: matsurika (dmitry@1B1ADD.28646B65.1A3E6EBE.IP)
[10:28:43] *** Joins: rca (rcatolino@moz-FE9F045F.adsl.proxad.net)
[10:28:54] *** Joins: NiccosSystem_ (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[10:29:03] *** Quits: matp (matp@moz-16FE1E05.matp.at) (Ping timeout)
[10:29:17] <NiccosSystem_> Is there a good tutorial or some documentation on sockets?
[10:29:38] *** Quits: Amanieu (amanieu@10FEE2FD.ECEF57A4.2CFD4520.IP) (Client exited)
[10:29:47] *** Quits: qmx (qmx@moz-B6DBCD05.qmx.me) (Ping timeout)
[10:30:11] <Hildar> NiccosSystem_: Sockets in general, or rust sockets?
[10:30:18] *** Quits: dbussink (dbussink@moz-E0A5568C.bussink.me) (Ping timeout)
[10:30:31] <NiccosSystem_> I guess networking in general
[10:30:46] *** Joins: Amanieu (amanieu@10FEE2FD.ECEF57A4.2CFD4520.IP)
[10:30:46] *** Quits: Amanieu (amanieu@10FEE2FD.ECEF57A4.2CFD4520.IP) (Client exited)
[10:31:01] *** Joins: victorporof (victorporo@8F761026.B5EF4AF6.E96CA9D8.IP)
[10:31:41] *** Quits: oal (oal@26029749.1D466084.2CFD4520.IP) (Ping timeout)
[10:31:52] *** Quits: Dessimat0r (Dessimat0r@moz-E3008B7A.me) (Ping timeout)
[10:31:53] *** Quits: katis (katis@40C8AF65.EFDC2270.EE6E63A5.IP) (Ping timeout)
[10:32:02] *** Quits: veeti (veeti@moz-D6414854.rojekti.fi) (Ping timeout)
[10:32:42] *** Quits: busylizzy (lisa@270089DC.4EF5D73F.4E00FFE9.IP) (Ping timeout)
[10:32:56] *** Quits: pranz (pranz@7A64FDC4.BFE7E494.85889BB1.IP) (Ping timeout)
[10:33:11] *** Quits: jpf (jan@moz-A8C26A15.org) (Ping timeout)
[10:33:26] *** Quits: vgeddes (vincent.ge@moz-D8D4FE4D.dsl.mweb.co.za) (Ping timeout)
[10:34:30] <Hildar> Hmm, I'm not sure on a good one. Plenty for C (but BSD sockets in C are verbose and a very old api). Google around is my best answer sorry.
[10:35:07] *** Joins: Guest_ (textual@moz-77D0F250.nebulazone.fi)
[10:35:10] <eddyb> we do have TCP, UDP and Unix sockets, and (some) docs for them, AFAIK
[10:36:09] <NiccosSystem_> aye, I'll doo some googlin 8)
[10:36:09] *** Quits: aravindavk (aravinda@moz-BD0CADEE.redhat.com) (Quit: Leaving)
[10:36:15] <Matthias247> the API doc, but no how-to-use them for beginners :) But as Hildar recommended, lookup up the doc from other langauges isn't too bad
[10:36:20] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[10:36:34] *** Quits: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP) (Client exited)
[10:36:44] <Matthias247> and apart from that Rusts sockets are still broken
[10:36:44] *** Joins: doomlord_ (servitor@moz-9B2006BF.range109-151.btcentralplus.com)
[10:37:13] *** Quits: igork (igork@moz-F6DD8476.broadband.corbina.ru) (Ping timeout)
[10:38:10] <Hildar> I for one welcome our new zombie socket overlords.
[10:38:28] *** Joins: veeti (veeti@moz-D6414854.rojekti.fi)
[10:38:31] <Matthias247> yeah
[10:38:38] <Matthias247> zombies are in :)
[10:38:43] *** Joins: oal (oal@26029749.1D466084.2CFD4520.IP)
[10:38:48] *** Quits: rca (rcatolino@moz-FE9F045F.adsl.proxad.net) (Ping timeout)
[10:39:04] <pnkfelix> (finally, a reference to a meme that I understand)
[10:39:26] *** Quits: NiccosSystem_ (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[10:39:40] *** Joins: qmx (qmx@moz-B6DBCD05.qmx.me)
[10:39:57] *** Joins: pranz (pranz@7A64FDC4.BFE7E494.85889BB1.IP)
[10:40:14] *** Joins: NiccosSystem_ (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[10:40:14] *** Joins: victorporof_ (victorporo@8F761026.B5EF4AF6.E96CA9D8.IP)
[10:40:18] <NiccosSystem_> really?
[10:40:25] *** Quits: fmtq (fmt@moz-5769BD38.static.tpgi.com.au) (Ping timeout)
[10:41:07] *** Joins: fmtq (fmt@moz-5769BD38.static.tpgi.com.au)
[10:41:08] *** Joins: dbussink (dbussink@moz-E0A5568C.bussink.me)
[10:41:12] *** Joins: Amanieu (amanieu@10FEE2FD.ECEF57A4.2CFD4520.IP)
[10:41:16] *** Quits: victorporof (victorporo@8F761026.B5EF4AF6.E96CA9D8.IP) (Ping timeout)
[10:41:49] *** Quits: Amanieu (amanieu@10FEE2FD.ECEF57A4.2CFD4520.IP) (Client exited)
[10:41:53] *** Joins: Dessimat0r (Dessimat0r@moz-E3008B7A.me)
[10:41:57] <NiccosSystem_> How so, Matthias247?
[10:42:04] *** Joins: Amanieu (amanieu@10FEE2FD.ECEF57A4.2CFD4520.IP)
[10:42:12] *** Joins: rca (rcatolino@moz-A8A930D.adsl.proxad.net)
[10:42:59] *** Joins: vgeddes (vincent.ge@moz-D8D4FE4D.dsl.mweb.co.za)
[10:43:20] *** Joins: busylizzy (lisa@270089DC.4EF5D73F.4E00FFE9.IP)
[10:43:23] <Matthias247> NiccosSystem: at first you couldn't read and write them in parallel. Now you can do that, but you can't close the socket as long as you are still reading the remote doesn't close it. Therefore the socket and it's task will stay around possibly forever without anything you can do against it -> Zombie-Socket
[10:43:50] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[10:44:24] <huon> pnkfelix: you're feeling hip and cool again?
[10:44:34] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[10:44:35] <eddyb> I'm feeling hot
[10:44:44] <pnkfelix> huon: yeah, nothing like early 90's simpsons references to make me feel good about myself
[10:44:59] <eddyb> so hot I'm shivering and working at 10% capacity
[10:45:37] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[10:46:28] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[10:46:36] *** Joins: jpf (jan@moz-A8C26A15.org)
[10:48:12] <Zr40> eddyb: did you drink some water?
[10:48:31] <NiccosSystem_> :c
[10:48:51] <eddyb> Zr40: and then some
[10:50:04] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[10:50:46] *** Joins: mohawk (Mibbit@moz-2B5663E.nokia.com)
[10:51:12] *** Quits: mohawk (Mibbit@moz-2B5663E.nokia.com) (Quit: http://www.mibbit.com ajax IRC Client)
[10:51:29] *** Quits: NiccosSystem_ (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[10:51:45] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[10:51:50] *** Quits: agarnier (agarnier@B49B97BC.DF317A48.8108A302.IP) (Quit: Quitte)
[10:54:19] *** Joins: rootnode (rootnode@moz-7FAB5E8.ip1.george24.com)
[10:56:08] *** Joins: alexherbo2 (alexherbo2@moz-9AE52DD7.w90-3.abo.wanadoo.fr)
[10:56:09] *** Joins: jherms (jherms@moz-4616FDCB.dyn.cust.vf.net.nz)
[10:56:43] *** Quits: jherms (jherms@moz-4616FDCB.dyn.cust.vf.net.nz) (Quit: jherms)
[11:02:43] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Input/output error)
[11:03:10] *** Joins: NiccosSystem_ (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[11:03:11] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[11:04:57] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Ping timeout)
[11:06:28] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[11:07:10] *** Quits: NiccosSystem_ (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[11:10:33] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[11:15:01] *** Joins: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP)
[11:16:04] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:16:46] *** Quits: deggert (deggert@moz-2C16B246.host.de.colt.net) (Quit: deggert)
[11:17:02] *** Joins: deggert (deggert@moz-2C16B246.host.de.colt.net)
[11:18:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:18:30] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Connection reset by peer)
[11:18:44] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[11:18:52] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[11:20:26] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[11:21:21] *** Quits: kkris (kkris@moz-CB70009.yourvserver.net) (Ping timeout)
[11:21:32] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[11:24:10] <ChrisMorgan> I am delighted to say that I finally found a model for dealing with bad HTTP headers that satisfies me *and* has no [server request reader] or absolutely minimal [server response writer and client] overhead in memory and processing: providing hooks into which callbacks can be inserted.
[11:24:39] *** Joins: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP)
[11:25:10] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[11:25:16] <ChrisMorgan> It occurred to me just as I got towards the end of an article that I'm writing on how rust-http handles headers and what should be done. That means that I think I've solved one of the two problems that I have ☺
[11:25:52] *** Quits: mankyKitty (Instantbir@325B2C60.E2538F64.BC02889B.IP) (Ping timeout)
[11:26:32] *** Quits: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP) (Ping timeout)
[11:27:16] *** Joins: rca_ (rcatolino@6405C1A3.4B0D2AD2.2CE09D78.IP)
[11:27:55] *** Quits: rca (rcatolino@moz-A8A930D.adsl.proxad.net) (Ping timeout)
[11:32:31] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[11:33:31] *** Quits: rca_ (rcatolino@6405C1A3.4B0D2AD2.2CE09D78.IP) (Quit: leaving)
[11:35:06] *** Joins: kkris (kkris@moz-CB70009.yourvserver.net)
[11:35:39] *** Quits: Ferreus (ferreus@moz-92609A17.dip0.t-ipconnect.de) (Ping timeout)
[11:36:07] *** Quits: rootnode (rootnode@moz-7FAB5E8.ip1.george24.com) (Ping timeout)
[11:41:04] *** Joins: mrshankly (mrshankly_@moz-A56896CA.rev.vodafone.pt)
[11:44:17] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[11:46:01] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[11:49:04] *** Quits: nkoep (nik@moz-C75B39A9.pool.mediaways.net) (Client exited)
[11:50:03] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Client exited)
[11:50:24] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[11:52:14] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[11:52:23] *** Joins: Ferreus (ferreus@moz-D3F71656.dip0.t-ipconnect.de)
[11:53:14] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Input/output error)
[11:55:24] *** Joins: mrmonday (mrmonday@moz-C7DC1A73.lin.openzula.org)
[11:55:28] *** Joins: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com)
[11:56:27] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[11:57:58] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[12:04:11] *** Quits: patpat (patpat@moz-7F753D82.gold.ac.uk) (Ping timeout)
[12:06:18] *** Joins: Chilledheart (chilledhea@A3ABD4AE.D1277449.E3D9F69D.IP)
[12:09:38] *** Joins: FrozenCow (FrozenCow@moz-E69F48E.dynamic.upc.nl)
[12:09:39] *** Joins: agarnier (agarnier@B49B97BC.DF317A48.8108A302.IP)
[12:09:40] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[12:09:40] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[12:09:56] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[12:09:56] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[12:10:12] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[12:11:24] *** pmoore|away is now known as pmoore
[12:13:39] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[12:13:39] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[12:13:48] *** Quits: mitchty (mitchty@moz-9F527C8F.net) (Ping timeout)
[12:13:57] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[12:13:57] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[12:17:30] *** Joins: mitchty (mitchty@moz-9F527C8F.net)
[12:20:41] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[12:22:33] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[12:24:21] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[12:25:24] *** Joins: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP)
[12:27:16] *** Quits: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP) (Ping timeout)
[12:28:49] *** Quits: Ms2ger (Ms2ger@moz-CB2E71FA.adsl-dyn.isp.belgacom.be) (Quit: bbl)
[12:30:26] *** Joins: katis (katis@40C8AF65.EFDC2270.EE6E63A5.IP)
[12:33:37] *** Joins: Earnestly (earnest@119EDA00.66A37A5.BFD1ABFD.IP)
[12:33:46] *** Quits: kvanb (kvanb@moz-E7540EE5.lnse4.win.bigpond.net.au) (Ping timeout)
[12:36:26] *** Joins: jdm (jdm@E595D12E.1196002C.7DBB297B.IP)
[12:36:26] *** ChanServ sets mode: +o jdm
[12:37:35] *** Quits: mawuli (mawuli@moz-5ADAB167.com.gh) (Connection reset by peer)
[12:38:03] *** Joins: mawuli (mawuli@moz-5ADAB167.com.gh)
[12:38:27] *** Joins: kvanb (kvanb@moz-6CE11EED.lnse2.win.bigpond.net.au)
[12:39:52] *** Joins: skade_ (skade@541D1605.505237C9.CAE22B62.IP)
[12:39:52] *** Quits: skade (skade@541D1605.505237C9.CAE22B62.IP) (Connection reset by peer)
[12:42:16] *** Joins: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net)
[12:42:37] *** Joins: vmx (vmx@moz-A1DFD5B1.pools.arcor-ip.net)
[12:44:25] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[12:46:07] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[12:50:45] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[12:52:29] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[12:54:08] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Input/output error)
[12:54:48] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[12:56:33] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Ping timeout)
[12:57:52] *** Joins: xitology (xi@85437D54.5AFA3E4.CEDFC552.IP)
[13:01:56] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[13:02:15] *** Joins: autra (augustin@A14DAE84.7F753DD1.EE2CA32B.IP)
[13:04:53] *** Joins: patpat (patpat@moz-1599AAE4.as13285.net)
[13:05:43] *** Joins: dylukes (dylukes@moz-86EE0464.wireless.pitt.edu)
[13:05:49] *** Quits: dylukes (dylukes@moz-86EE0464.wireless.pitt.edu) (Quit: dylukes)
[13:06:19] *** Joins: olem (olem@moz-D8B40BE5.fbx.proxad.net)
[13:06:26] *** Quits: olem (olem@moz-D8B40BE5.fbx.proxad.net) (Quit: olem)
[13:06:34] *** Quits: patpat (patpat@moz-1599AAE4.as13285.net) (Ping timeout)
[13:06:59] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[13:09:03] *** Joins: diverse (diverse@moz-ED94B8D.oc.oc.cox.net)
[13:09:30] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[13:14:28] *** Joins: fabrice (fabrice@FDFA6ECE.E098B4C5.90004011.IP)
[13:14:43] *** Joins: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP)
[13:14:45] *** Joins: aurynj (Eon@36F86BD3.C264657C.C6282BC4.IP)
[13:15:45] *** Joins: tiernjo (quassel@moz-21A5F23D.ks.ks.cox.net)
[13:16:04] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:16:31] *** Quits: ksev (DrunkenPan@1865C1F9.ECF92FCA.CDBA6951.IP) (Ping timeout)
[13:16:36] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[13:16:52] *** Quits: aurynj (Eon@36F86BD3.C264657C.C6282BC4.IP) (Ping timeout)
[13:17:08] *** Joins: aurynj (Eon@BF507CFB.1CEEC774.4C51A5AE.IP)
[13:18:22] *** Quits: mawuli (mawuli@moz-5ADAB167.com.gh) (Ping timeout)
[13:18:27] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:20:01] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[13:21:21] *** Quits: trobertson (quassel@moz-A4AC319.sd.sd.cox.net) (Ping timeout)
[13:21:49] *** Joins: patpat (patpat@moz-1599AAE4.as13285.net)
[13:21:56] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[13:22:22] *** Joins: trobertson (quassel@moz-A4AC319.sd.sd.cox.net)
[13:23:54] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[13:26:27] *** Joins: Ms2ger (Ms2ger@moz-CDEAD70F.ugent.be)
[13:27:00] *** Quits: alexherbo2 (alexherbo2@moz-9AE52DD7.w90-3.abo.wanadoo.fr) (Quit: WeeChat 0.4.3-dev)
[13:27:09] *** Joins: alexherbo2 (alexherbo2@moz-9AE52DD7.w90-3.abo.wanadoo.fr)
[13:32:17] *** Quits: nfroidure (nfroidure@moz-7F79C7DA.w90-18.abo.wanadoo.fr) (Ping timeout)
[13:35:06] *** Quits: jdm (jdm@E595D12E.1196002C.7DBB297B.IP) (Quit: Lost terminal)
[13:35:13] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[13:35:35] *** Quits: fabrice (fabrice@FDFA6ECE.E098B4C5.90004011.IP) (Ping timeout)
[13:36:34] *** Joins: fabrice (fabrice@FDFA6ECE.E098B4C5.90004011.IP)
[13:38:25] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[13:39:09] *** Joins: mawuli (mawuli@moz-5ADAB167.com.gh)
[13:40:04] *** Joins: edwardw (edwardw@FC63E399.AB331A3B.FAED9FFC.IP)
[13:41:17] *** Joins: damag (damien@moz-5C881CB.grassart.com)
[13:41:19] *** Quits: mawuli (mawuli@moz-5ADAB167.com.gh) (Ping timeout)
[13:42:22] <Hildar> How much does fork()ing blow everything up right now (using green theads and tcpsockets mainly)? Is it even consistent in the issues it can cause or causes hilarity to ensue?
[13:43:53] *** Parts: Dcoder (a@moz-F8BDC9E8.org) ()
[13:44:41] <Tobba> pretty sure it should work fine due to the nature of fork(), but I'm not totally sure
[13:44:57] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[13:45:09] *** Quits: Chilledheart (chilledhea@A3ABD4AE.D1277449.E3D9F69D.IP) (Client exited)
[13:45:59] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Connection reset by peer)
[13:46:38] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[13:46:43] <Matthias247> I'm pretty sure it will blow everything :)
[13:46:55] *** Joins: Chilledheart (chilledhea@A3ABD4AE.D1277449.E3D9F69D.IP)
[13:47:25] <Matthias247> you then have even two processes which will operate on the same libuv handles. And these are not even thread-safe
[13:47:32] *** Joins: novabyte (novabyte@5FFCEA92.1EC43911.56E8E578.IP)
[13:50:11] *** Joins: nfroidure (nfroidure@moz-6A75AFA6.w90-34.abo.wanadoo.fr)
[13:50:39] <Hildar> Matthias247: That's a pain. Guess I'm just not handling messages while I dump to disk then, instead of forking it off. (I wanted to do what I would in C, which is fork(), then in the child saveDBToDisk(); exit(0))
[13:51:04] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[13:51:11] <Ms2ger>  error: internal compiler error: Cannot relate bound region: ReEarlyBound(9105, 0, a) <= ReInfer(96)
[13:51:47] <Matthias247> Hildar: I never liked fork, so it's no problem for me :)
[13:52:03] *** Quits: trobertson (quassel@moz-A4AC319.sd.sd.cox.net) (Ping timeout)
[13:52:51] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[13:52:58] *** Joins: nkoep (nik@moz-C75B39A9.pool.mediaways.net)
[13:53:01] *** Joins: trobertson (quassel@moz-A4AC319.sd.sd.cox.net)
[13:53:15] <Hildar> Matthias247: fork()/exec() sucks. fork() alone with CoW is decent (but rarely appropriate).
[13:53:23] <Matthias247> why can't you create a thread for that work?
[13:53:38] <damag> Hildar, why not do the same thing using Rust's tasks?
[13:54:16] <Hildar> Matthias247: I want to dump an image of the 'database' I'm working with, and it will cause a nticable pause while it copies the whole thing to hand off to a task.
[13:54:23] *** Joins: calvinmetcalf (cmetcalf@moz-2B24E694.public.wayport.net)
[13:54:33] *** Quits: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net) (Ping timeout)
[13:55:07] <Matthias247> I prefer freshly started tasks/processes that do specifically what I want to and do not carry the garbage of the parent process :)
[13:55:32] <Matthias247> Hildar: but the fork would also have to copy it to be safe?
[13:55:42] *** Joins: untwisted (untwisted@46B5412F.3597C859.3AF705F3.IP)
[13:56:48] *** Quits: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:57:28] <Matthias247> you could also move a pointer to the current DB to your work task and use a new DB in the current task. Of course that won't work if you want to continue with that DB in parallel
[13:57:35] *** Quits: fabrice (fabrice@FDFA6ECE.E098B4C5.90004011.IP) (Quit: Leaving.)
[13:57:35] *** Quits: Chilledheart (chilledhea@A3ABD4AE.D1277449.E3D9F69D.IP) (Client exited)
[13:57:45] *** Quits: kvanb (kvanb@moz-6CE11EED.lnse2.win.bigpond.net.au) (Quit: kvanb)
[13:58:02] <Hildar> Matthias247: On linux at least: the child can happily just read and save. If the parent modifies it, the kernel clones the page
[13:58:27] <Hildar> Yeah, I'm trying to avoid having to not work while I save everything.
[13:58:34] *** Joins: fabrice (fabrice@FDFA6ECE.E098B4C5.90004011.IP)
[13:58:39] <damag> Isn't that essentially a copy also?
[13:58:48] *** Joins: synackse (jordyd@2D608993.77F880E0.D9401097.IP)
[13:58:55] <damag> I guess it might be more efficient if done by the kernel
[13:59:02] <Hildar> damag: It only copies the pages it needs, not the whole thng.
[13:59:05] *** Quits: fabrice (fabrice@FDFA6ECE.E098B4C5.90004011.IP) (Max SendQ exceeded)
[13:59:10] <damag> Ah right
[13:59:25] <Ms2ger> nmatsakis, do you know what "error: internal compiler error: Cannot relate bound region: ReEarlyBound(9105, 0, a) <= ReInfer(96)" means?
[13:59:41] *** Joins: fabrice (fabrice@FDFA6ECE.E098B4C5.90004011.IP)
[14:00:19] <Hildar> I'll just copy it and send it off to a task for now. I can come back when rust is more stable for the low-level memory hacking.
[14:01:16] <Matthias247> how many MB are we talking about?
[14:01:56] *** Joins: lunaryorn (lunaryorn@moz-9E462E98.dynamic.mnet-online.de)
[14:03:33] <Hildar> Matthias247: As many as I give it right now? A couple of MB at most. It as more a thought experiment to see if I could accomplish the same as C could do it.
[14:04:17] *** Joins: Chilledheart (chilledhea@A3ABD4AE.D1277449.E3D9F69D.IP)
[14:05:58] *** Quits: Chilledheart (chilledhea@A3ABD4AE.D1277449.E3D9F69D.IP) (Ping timeout)
[14:06:33] *** Parts: synackse (jordyd@2D608993.77F880E0.D9401097.IP) ()
[14:07:47] *** Quits: lunaryorn (lunaryorn@moz-9E462E98.dynamic.mnet-online.de) (Quit: lunaryorn)
[14:07:53] *** Joins: lunaryorn (lunaryorn@moz-9E462E98.dynamic.mnet-online.de)
[14:09:43] *** Quits: untwisted (untwisted@46B5412F.3597C859.3AF705F3.IP) (Ping timeout)
[14:11:21] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[14:13:35] *** Quits: lunaryorn (lunaryorn@moz-9E462E98.dynamic.mnet-online.de) (Quit: lunaryorn)
[14:13:39] *** Joins: lunaryorn (lunaryorn@moz-9E462E98.dynamic.mnet-online.de)
[14:14:08] *** Joins: dschatzberg (dschatzber@moz-9384E83C.bu.edu)
[14:14:24] *** Quits: lunaryorn (lunaryorn@moz-9E462E98.dynamic.mnet-online.de) (Quit: lunaryorn)
[14:15:31] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Ping timeout)
[14:17:22] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[14:20:26] *** Quits: fabrice (fabrice@FDFA6ECE.E098B4C5.90004011.IP) (Ping timeout)
[14:20:34] *** Quits: calvinmetcalf (cmetcalf@moz-2B24E694.public.wayport.net) (Ping timeout)
[14:21:31] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[14:22:42] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[14:23:42] <Ms2ger> Also, "method `get_attr` has an incompatible type: ..." is really not a helpful way to say "you don't match your trait, fool"
[14:24:35] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[14:27:02] <Hildar> Ms2ger: The error message should say that. "<T> does not match requested trait <K>, you fool!"
[14:27:25] <Ms2ger> That would certainly be more helpful
[14:32:55] *** Joins: fabrice (fabrice@FDFA6ECE.E098B4C5.90004011.IP)
[14:33:25] *** Quits: fabrice (fabrice@FDFA6ECE.E098B4C5.90004011.IP) (Max SendQ exceeded)
[14:36:07] *** Joins: canhtak (canhtak@moz-843B48BB.wl.t.ulaval.ca)
[14:37:33] *** Joins: fabrice (fabrice@FDFA6ECE.E098B4C5.90004011.IP)
[14:39:06] *** Quits: fabrice (fabrice@FDFA6ECE.E098B4C5.90004011.IP) (Max SendQ exceeded)
[14:39:09] *** Quits: xitology (xi@85437D54.5AFA3E4.CEDFC552.IP) (Ping timeout)
[14:40:56] *** Quits: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP) (Quit: leaving)
[14:43:48] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[14:45:22] *** Joins: fabrice (fabrice@FDFA6ECE.E098B4C5.90004011.IP)
[14:45:32] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[14:45:44] *** Joins: refold (gman@moz-42D68426.a258.priv.bahnhof.se)
[14:46:10] *** Quits: Ms2ger (Ms2ger@moz-CDEAD70F.ugent.be) (Ping timeout)
[14:46:58] *** Quits: astroch (astroch@moz-C18802C0.dhcp.embarqhsd.net) (Ping timeout)
[14:47:15] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[14:49:56] *** Quits: fabrice (fabrice@FDFA6ECE.E098B4C5.90004011.IP) (Ping timeout)
[14:50:12] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[14:51:26] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[14:52:12] *** Joins: wting (wting@E31B3884.E538DA90.20F09BA6.IP)
[14:52:28] *** Quits: alexherbo2 (alexherbo2@moz-9AE52DD7.w90-3.abo.wanadoo.fr) (Quit: WeeChat 0.4.3-dev)
[14:52:31] *** Joins: fabrice (fabrice@FDFA6ECE.E098B4C5.90004011.IP)
[14:53:05] *** Quits: fabrice (fabrice@FDFA6ECE.E098B4C5.90004011.IP) (Max SendQ exceeded)
[14:53:06] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[14:54:53] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[14:55:03] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Client exited)
[14:55:07] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[14:57:35] *** Joins: alexherbo2 (alexherbo2@moz-9AE52DD7.w90-3.abo.wanadoo.fr)
[14:57:39] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[14:57:52] *** Joins: fabrice (fabrice@FDFA6ECE.E098B4C5.90004011.IP)
[14:58:22] *** Quits: fabrice (fabrice@FDFA6ECE.E098B4C5.90004011.IP) (Max SendQ exceeded)
[14:58:34] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[14:59:19] *** Joins: rootnode (rootnode@moz-7FAB5E8.ip1.george24.com)
[14:59:24] *** Joins: fabrice (fabrice@FDFA6ECE.E098B4C5.90004011.IP)
[15:00:48] *** Joins: bellows (Mibbit@moz-D6F81C83.lnse1.pie.bigpond.net.au)
[15:00:49] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[15:01:21] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[15:01:55] *** Joins: Ms2ger (Ms2ger@moz-D3A2030C.ugent.be)
[15:02:11] *** Quits: victorporof_ (victorporo@8F761026.B5EF4AF6.E96CA9D8.IP) (Quit: victorporof_)
[15:02:25] *** Quits: twi (Adium@2CCDF5AA.B720E8FD.A622856D.IP) (Quit: Leaving.)
[15:02:28] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[15:02:49] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[15:02:53] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[15:03:13] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[15:03:58] *** Quits: fabrice (fabrice@FDFA6ECE.E098B4C5.90004011.IP) (Ping timeout)
[15:04:48] *** Quits: Guest_ (textual@moz-77D0F250.nebulazone.fi) (Ping timeout)
[15:05:55] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[15:07:07] *** Quits: bellows (Mibbit@moz-D6F81C83.lnse1.pie.bigpond.net.au) (Quit: http://www.mibbit.com ajax IRC Client)
[15:09:03] <jensnockert> bjz: I found this funny https://code.google.com/p/go/issues/detail?id=6794
[15:10:05] *** Joins: trinary (Adium@moz-D78CD0D5.hsd1.co.comcast.net)
[15:10:23] *** Joins: terkle (terk@moz-36C06839.dsl.dyn.smithvilledsl.net)
[15:14:03] *** Quits: mrshankly (mrshankly_@moz-A56896CA.rev.vodafone.pt) (Quit: leaving)
[15:16:08] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:16:46] *** Joins: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net)
[15:17:42] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[15:18:18] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[15:18:26] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:18:55] *** Joins: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP)
[15:19:52] *** Joins: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net)
[15:19:58] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Quit: Leaving.)
[15:21:38] *** Joins: lkuper (lkuper@moz-AD4C50F5.dhcp-bl.indiana.edu)
[15:24:42] *** Joins: xitology (xi@85437D54.5AFA3E4.CEDFC552.IP)
[15:28:58] *** Joins: exobit_ (textual@moz-E06F46F0.corp.bitshelter.com)
[15:30:56] *** Joins: astroch (astroch@moz-C18802C0.dhcp.embarqhsd.net)
[15:32:17] *** Quits: Kxepal (Miranda@moz-D87D4BA.pppoe.mtu-net.ru) (Ping timeout)
[15:33:01] *** Quits: astroch (astroch@moz-C18802C0.dhcp.embarqhsd.net) (Ping timeout)
[15:33:31] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[15:35:51] *** Joins: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP)
[15:36:36] *** Joins: Kxepal (Miranda@moz-F04ED80E.pppoe.mtu-net.ru)
[15:36:42] *** Quits: Ferreus (ferreus@moz-D3F71656.dip0.t-ipconnect.de) (Ping timeout)
[15:38:07] *** Parts: nyuszika7h (nyuszika7h@moz-423AFF1D.net) (WeeChat 0.4.4-dev)
[15:38:12] *** Quits: bluz (blaz@moz-84D58AA8.anonymous.at.anonine.com) (Ping timeout)
[15:38:57] *** Quits: eddyb (eddy@688E9026.F7C96DA2.FCAAE698.IP) (Ping timeout)
[15:41:58] *** Quits: sp3d (s@6361F3B1.19CD1E54.8354FB35.IP) (Ping timeout)
[15:41:59] *** Quits: agarnier (agarnier@B49B97BC.DF317A48.8108A302.IP) (Quit: Quitte)
[15:42:16] *** Joins: dualcoding (ceninan@moz-6BD43586.a370.priv.bahnhof.se)
[15:44:42] *** Parts: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) ()
[15:46:05] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[15:47:46] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[15:51:48] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[15:53:33] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[16:00:21] *** Quits: mouse (mouse@moz-373942D2.dhcp.yndx.net) (Ping timeout)
[16:02:29] *** Joins: wilmoore (wilmoore@moz-1248C037.mystrotv.com)
[16:03:03] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[16:04:18] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[16:04:42] *** Quits: lkuper (lkuper@moz-AD4C50F5.dhcp-bl.indiana.edu) (Quit: lkuper)
[16:05:17] *** Quits: drueck (uid25037@moz-5F4AA75A.irccloud.com) (Ping timeout)
[16:05:20] *** Quits: mhenretty (sid11899@moz-5F4AA75A.irccloud.com) (Ping timeout)
[16:05:25] *** Quits: Locke23rus (quassel@moz-1014EFC0.static.linky.ru) (Client exited)
[16:05:54] *** Quits: dualcoding (ceninan@moz-6BD43586.a370.priv.bahnhof.se) (Client exited)
[16:06:10] *** Quits: Ms2ger (Ms2ger@moz-D3A2030C.ugent.be) (Quit: Leaving)
[16:07:55] *** Joins: mhenretty (sid11899@moz-5F4AA75A.irccloud.com)
[16:08:07] *** Joins: drueck (uid25037@moz-5F4AA75A.irccloud.com)
[16:08:47] *** Joins: nszceta (hax@moz-E458A7C0.pharm.pitt.edu)
[16:10:45] *** abinader is now known as abinader_lunch
[16:11:07] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Quit: Leaving)
[16:11:48] *** Quits: damag (damien@moz-5C881CB.grassart.com) (Quit: Leaving)
[16:11:52] *** Joins: kanru` (kanru@7A2E4FBA.C62D262.7D6C905B.IP)
[16:12:23] *** Joins: dradtke (dradtke@moz-77578067.hfc.comcastbusiness.net)
[16:13:49] <dradtke> Hey, is it possible to borrow an immutable reference to a mutable piece of data? I want a child task to be able to see changes made by the parent to a piece of data, but not be able to make changes itself.
[16:14:03] <cmr> dradtke: no.
[16:14:17] *** Quits: vgeddes (vincent.ge@moz-D8D4FE4D.dsl.mweb.co.za) (Ping timeout)
[16:14:20] <cmr> dradtke: such a borrow would be the old concept of "const", &const. read-only, but not immutable.
[16:15:26] *** kimundi is now known as zz_kimundi
[16:15:31] *** Quits: japaric (japaric@8465B6C3.31BF4ADA.BFC118EE.IP) (Quit: WeeChat 0.4.2)
[16:15:32] <dradtke> cmr: so is there any way to implement the action I described?
[16:15:47] <cmr> dradtke: no.
[16:15:51] <eibwen> you could implement a wrapper type
[16:15:53] <cmr> not safely, at least.
[16:16:06] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:16:29] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Ping timeout)
[16:17:15] *** Quits: skade_ (skade@541D1605.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[16:18:09] <Hildar> An Arc would do it I believe, but it's not safe.
[16:18:27] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:18:27] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[16:18:56] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[16:18:57] <cmr> Hildar: no it wouldn't
[16:19:04] <cmr> Arc isn't mutable.
[16:19:15] *** Joins: herrwolfe45 (user@CACBD77F.4EBBBE62.C082B7DC.IP)
[16:19:17] <Hildar> Oh, ignore me then.
[16:19:25] <cmr> (and they are safe)
[16:19:39] *** Joins: japaric (japaric@8465B6C3.31BF4ADA.BFC118EE.IP)
[16:19:50] *** pmoore is now known as pmoore|away
[16:19:51] *** Quits: etrepum (sid763@moz-5F4AA75A.irccloud.com) (Ping timeout)
[16:19:51] *** Quits: lexs (uid12437@moz-5F4AA75A.irccloud.com) (Ping timeout)
[16:19:51] *** Quits: andreypopp (uid22726@moz-5F4AA75A.irccloud.com) (Ping timeout)
[16:19:54] *** Joins: ctangent (textual@moz-4B354EF9.hsd1.wa.comcast.net)
[16:19:56] *** Quits: wycats (sid79@moz-5F4AA75A.irccloud.com) (Ping timeout)
[16:19:56] *** Quits: drueck (uid25037@moz-5F4AA75A.irccloud.com) (Ping timeout)
[16:19:56] *** Quits: sawrubh (uid6719@moz-5F4AA75A.irccloud.com) (Ping timeout)
[16:19:58] <Matthias247> of course you can place everything in an unsafearc. But then you also you have to provide proper synchronization
[16:20:23] *** Quits: mhenretty (sid11899@moz-5F4AA75A.irccloud.com) (Ping timeout)
[16:20:24] *** Quits: wilfred (sid159@moz-5F4AA75A.irccloud.com) (Ping timeout)
[16:20:56] <dradtke> my end goal is to be able to execute a potentially long-running child task that communicates with the parent via a DuplexStream (or other means, but that one seams to be the best), and those communications may cause the parent to modify data that ideally the child would be able to see but not modify.
[16:21:22] <dradtke> I suppose I could send information along the stream back to the child, but then it would need to update the initial data on every communication.
[16:22:03] <Matthias247> yes, that's how you would to it "properly" in the message passing world
[16:22:44] *** Joins: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com)
[16:22:51] *** Joins: dualcoding (dualcoding@moz-6BD43586.a370.priv.bahnhof.se)
[16:23:21] <Hildar> Where is Arc in the library? I can only find UnsafeArc
[16:23:58] <cmr> dradtke: you could of course store an unsafe pointer to the data, but that gets ugly if there are any destructors involved.
[16:24:02] *** Joins: vosen (vosen@moz-266BA656.icpnet.pl)
[16:24:17] <dradtke> but if the child potentially sends many messages to the parent, taking each response into consideration, then either I need to make the relevant data mutable (not desirable) or create a new variable name for each update
[16:24:33] <dradtke> cmr: I would prefer to try and keep it safe if possible, so I'm exploring means in that direction.
[16:24:39] <dradtke> cmr: but thanks for the tip.
[16:24:42] <Hildar> Oh, Arc is in sync::Arc, but UnsafeArc is in std::Sync::UnsafeArc? That seems... backwards.
[16:26:00] *** Quits: japaric (japaric@8465B6C3.31BF4ADA.BFC118EE.IP) (Quit: WeeChat 0.4.2)
[16:26:30] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Client exited)
[16:26:42] *** Joins: kris (kris@moz-6D20263F.fullrate.dk)
[16:27:12] <cmr> dradtke: there is no safe way to hold a read-only reference to mutable data, so you're going to have to explore inefficiencies...
[16:28:28] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[16:30:01] *** Quits: sokomo (sokomo@8293D4FC.93FF164A.408809BB.IP) (Quit: Read error: Connection reset by peer)
[16:31:41] *** pmoore|away is now known as pmoore
[16:32:41] *** Joins: japaric (japaric@8465B6C3.31BF4ADA.BFC118EE.IP)
[16:33:21] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[16:33:27] *** Quits: kronquii (kronquii@moz-2F636E0B.onid.oregonstate.edu) (Ping timeout)
[16:33:27] *** Quits: herrwolfe45 (user@CACBD77F.4EBBBE62.C082B7DC.IP) (Ping timeout)
[16:35:13] *** Joins: kronquii (kronquii@moz-2F636E0B.onid.oregonstate.edu)
[16:35:42] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: sw17ch)
[16:36:01] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Input/output error)
[16:36:06] <Matthias247> cmr: I really don't like the words safe/unsafe in such discussions. It refers more to Rust code that doesn't use unsafe blocks than with real unsafety :)
[16:36:37] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[16:37:32] <cmr> Matthias247: what better word is there for code which uses unsafe blocks?
[16:37:54] *** Quits: kronquii (kronquii@moz-2F636E0B.onid.oregonstate.edu) (Ping timeout)
[16:38:19] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[16:38:23] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Ping timeout)
[16:38:33] <Matthias247> cmr: "code which uses unsafe blocks"
[16:38:47] <cmr> Matthias247: what a pain!
[16:38:51] <Matthias247> sorry, have nothing better :(
[16:39:01] <cmr> I think safe/unsafe is much better :)
[16:39:09] <Hildar> unsafe = unsafe blocks (which may still be safe if coded correctly), dangerous = *nullptr.
[16:39:10] <cmr> My word for code which is actually unsafe is "incorrect"
[16:39:37] <Matthias247> but with the whole recent unsafe talk most seem to get the impression that the whole world will explode as soon as anyone uses a raw pointer - which isn't necessarily unsafe
[16:39:39] *** Quits: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP) (Quit: victorporof)
[16:39:54] *** Joins: kronquii (kronquii@moz-2F636E0B.onid.oregonstate.edu)
[16:39:59] <cmr> well, that's a silly thought to have.
[16:40:05] <dradtke> so I'm getting an error trying to get an immutable unsafe pointer from a mutable value; I keep getting the error "values differ in mutability"
[16:40:38] <cmr> rusti: let mut x = 42; let y = &mut x; let z = x as *mut int as *int; z
[16:40:40] -rusti- <anon>:10:29: 10:30 warning: unused variable: `y`, #[warn(unused_variable)] on by default
[16:40:40] -rusti- <anon>:10         let mut x = 42; let y = &mut x; let z = x as *mut int as *int; z
[16:40:40] -rusti-                                       ^
[16:40:41] -rusti- (0x2a as *())
[16:40:58] <cmr> dradtke: you unfortunately need to do a bit of a dance to get a *T without transmutes
[16:41:07] <cmr> rusti: let mut x = 42; let y = &mut x; let z = x as *int; z
[16:41:08] -rusti- <anon>:10:29: 10:30 warning: unused variable: `y`, #[warn(unused_variable)] on by default
[16:41:08] -rusti- <anon>:10         let mut x = 42; let y = &mut x; let z = x as *int; z
[16:41:09] -rusti-                                       ^
[16:41:09] -rusti- (0x2a as *())
[16:41:16] <cmr> or maybe not!
[16:41:21] <dradtke> cmr: what kind of dance?
[16:41:23] <cmr> dradtke: code?
[16:41:24] *** Joins: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP)
[16:41:29] <dradtke> cmr: thanks. =)
[16:41:34] <dradtke> cmr: but I'm not sure what code could help here
[16:41:38] <cmr> (the dance being "as *mut T as *T", but it seems to not be necessary)
[16:41:56] <cmr> dradtke: no, I'm asking for the code you wrote that made the error.
[16:42:03] <dradtke> ah
[16:42:23] <dradtke> I'm just using ptr::to_unsafe_ptr() on a mutable &-ptr
[16:42:30] *** Joins: gwty (gwtypc@D207B5D8.9189635C.49FF672.IP)
[16:42:48] <dradtke> which generates a *&mut value, but my child task wants a *&
[16:43:04] <cmr> gah don't use that function
[16:43:18] <cmr> use `as` to cast from &T to *T
[16:43:21] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[16:43:27] * cmr goes to remove them
[16:44:21] *** Quits: gwty (gwtypc@D207B5D8.9189635C.49FF672.IP) (Ping timeout)
[16:44:53] *** Joins: teosz (teosz@D15A38EC.410E8117.3EA6AAD8.IP)
[16:45:18] *** Quits: ctangent (textual@moz-4B354EF9.hsd1.wa.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[16:45:56] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[16:46:01] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[16:46:04] <dradtke> cmr: I'm still getting the "values differ in mutability" error
[16:46:12] *** Joins: gwty (gwtypc@81092C33.AB257A8F.F64220F6.IP)
[16:46:14] <dradtke> expects *-ptr, but found &mut-pointer
[16:46:20] <dradtke> in the line with the cast
[16:46:23] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[16:46:36] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[16:48:09] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[16:48:21] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[16:49:35] *** Quits: iDolfHatler (idolf@moz-47812C15.static.bcbnet.dk) (Ping timeout)
[16:51:46] *** Quits: mark_edward (mark@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Ping timeout)
[16:52:05] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[16:52:29] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Input/output error)
[16:52:34] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[16:53:35] *** Joins: skade (skade@moz-4A2385D8.web.vodafone.de)
[16:53:47] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[16:53:58] *** pmoore is now known as pmoore|away
[16:54:48] *** Quits: Hildar (Mibbit@moz-1FA995E0.in-addr.btopenworld.com) (Quit: http://www.mibbit.com ajax IRC Client)
[16:55:30] *** Quits: autra (augustin@A14DAE84.7F753DD1.EE2CA32B.IP) (Quit: by!)
[16:55:38] *** Joins: autra_ (augustin@A14DAE84.7F753DD1.EE2CA32B.IP)
[16:57:28] *** Quits: autra_ (augustin@A14DAE84.7F753DD1.EE2CA32B.IP) (Ping timeout)
[16:58:11] *** Joins: herrwolfe45 (user@CACBD77F.4EBBBE62.C082B7DC.IP)
[16:58:39] *** Joins: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[16:59:55] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:02:18] *** Quits: skade (skade@moz-4A2385D8.web.vodafone.de) (Connection reset by peer)
[17:02:25] *** Quits: ski (ski@moz-E5796727.student.chalmers.se) (Quit: Lost terminal)
[17:03:22] *** Quits: novabyte (novabyte@5FFCEA92.1EC43911.56E8E578.IP) (Quit: Leaving.)
[17:03:38] *** abinader_lunch is now known as abinader
[17:03:45] *** Quits: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com) (Connection reset by peer)
[17:04:01] <herrwolfe45> rusti: bytes!("hi");
[17:04:04] -rusti- pastebinned 7 lines of output: http://ix.io/a6T
[17:04:08] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[17:04:40] <eibwen> rusti: bytes!("hi")
[17:04:41] -rusti- &[104u8, 105u8]
[17:04:43] <eibwen> herrwolfe45: ^
[17:05:33] <herrwolfe45> ha thanks - the semicolon did it
[17:07:18] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[17:07:26] *** Joins: voxpopuli (fanservice@8DA2303.6A843466.689607DE.IP)
[17:07:34] <teosz> how i can write in a file in rust 10.pre ?
[17:08:04] *** Quits: dschatzberg (dschatzber@moz-9384E83C.bu.edu) (Input/output error)
[17:08:05] <cmr> teosz: https://github.com/cmr/rust-examples/blob/master/file.rs
[17:08:08] *** Joins: onelson (onelson@moz-DD666EC5.laika.com)
[17:09:12] <cmr> oh it seems I never actually added that to rust-ci
[17:09:12] *** Joins: mark_edward (mark@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[17:09:15] <cmr> it's probably out of date
[17:10:07] *** Joins: eddyb (eddy@688E9026.F7C96DA2.FCAAE698.IP)
[17:10:15] *** Joins: dschatzberg (dschatzber@moz-9384E83C.bu.edu)
[17:10:28] <cmr> hansjorg: http://www.rust-ci.org/p/add/ just gave me a 500
[17:11:14] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:11:36] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[17:12:33] <teosz> cmr: pastebin.com/0UzRTyEg
[17:13:57] <eddyb> fwiw, I'm not dead, and my fever went down :)
[17:14:04] *** Quits: raze (raze@moz-EAF6E9D.members.linode.com) (Ping timeout)
[17:14:33] *** Quits: lpy (lpy@F864F9BC.9B88FD1B.E99F7FDB.IP) (Client exited)
[17:15:10] <cmr> teosz: just updated it.
[17:15:15] <cmr> teosz: what rust version are you using, though?
[17:15:18] <cmr> rustc -v
[17:15:45] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[17:16:49] *** Joins: pagefault (Mibbit@F0FB0A89.CFCF7F00.E300B677.IP)
[17:17:09] *** Quits: heftig (heftig@moz-6E0B1C69.dip0.t-ipconnect.de) (Ping timeout)
[17:17:10] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:17:26] *** Joins: raze (raze@moz-EAF6E9D.members.linode.com)
[17:17:50] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[17:17:52] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[17:18:54] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[17:19:09] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Quit: WeeChat 0.4.2)
[17:19:11] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:19:18] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[17:19:43] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[17:19:53] *** Joins: Ferreus (ferreus@moz-57D49CF4.pools.arcor-ip.net)
[17:19:54] *** Quits: Ferreus (ferreus@moz-57D49CF4.pools.arcor-ip.net) (Quit: Ferreus)
[17:20:24] *** Quits: deggert (deggert@moz-2C16B246.host.de.colt.net) (Quit: deggert)
[17:20:35] *** Quits: pagefault (Mibbit@F0FB0A89.CFCF7F00.E300B677.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:20:54] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[17:21:12] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:23:03] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Connection reset by peer)
[17:23:15] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[17:24:23] *** Quits: robarnold (rob@moz-59F6B5.hfc.comcastbusiness.net) (Ping timeout)
[17:24:35] *** Joins: robarnold (rob@moz-59F6B5.hfc.comcastbusiness.net)
[17:24:40] *** Quits: barosl (barosl@34F62860.E551553C.7544CABF.IP) (Quit: 랜덤은 쇠퇴했습니다.)
[17:24:59] *** Quits: fabiand (fabiand@moz-7B8E9E60.adsl.alicedsl.de) (Quit: Verlassend)
[17:25:01] *** Joins: Ferreus (ferreus@moz-57D49CF4.pools.arcor-ip.net)
[17:26:53] <teosz> cmr: 10.pre
[17:27:01] <cmr> teosz: date, commit?
[17:27:06] <eddyb> http://www.reddit.com/r/rust/comments/1xsfr5/why_have_you_chosen_rust_over_other_system/ this is a lovely read :)
[17:28:37] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[17:29:08] <teosz> what commit ?
[17:29:21] <cmr> teosz: the full output of rustc -v ...
[17:29:27] *** Joins: Jemaclus (jemaclus@A084B2A7.5843BA5A.D4E4C7A5.IP)
[17:29:33] <cmr> teosz: regardless you shouldn't be getting unresolved imports.
[17:29:36] <cmr> those all exist on master.
[17:30:05] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[17:30:48] <teosz> rustc 0.10-pre (30e9bba 2014-01-30 07:06:27 -0800)
[17:30:49] <teosz> host: x86_64-unknown-linux-gnu
[17:31:05] *** Quits: wilmoore (wilmoore@moz-1248C037.mystrotv.com) (Ping timeout)
[17:31:08] <teosz> i use fedora
[17:32:24] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[17:32:40] <teosz> and on 10.pre how i can edit a file ?
[17:33:09] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[17:34:12] <cmr> teosz: https://github.com/cmr/rust-examples/blob/master/file.rs shows how to read and write from a file.
[17:35:35] *** Quits: kronquii (kronquii@moz-2F636E0B.onid.oregonstate.edu) (Ping timeout)
[17:37:32] *** Joins: kronquii (kronquii@moz-2F636E0B.onid.oregonstate.edu)
[17:37:41] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:40:46] *** Quits: nszceta (hax@moz-E458A7C0.pharm.pitt.edu) (Input/output error)
[17:40:52] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Connection reset by peer)
[17:41:19] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[17:41:39] *** Quits: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP) (Quit: Leaving)
[17:41:55] *** Quits: gwty (gwtypc@81092C33.AB257A8F.F64220F6.IP) (Ping timeout)
[17:41:55] *** Quits: teosz (teosz@D15A38EC.410E8117.3EA6AAD8.IP) (Ping timeout)
[17:42:48] *** Joins: ski (ski@moz-E5796727.student.chalmers.se)
[17:42:51] <PeterSP> rusti: 2**3
[17:42:52] *** Quits: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP) (Ping timeout)
[17:42:52] -rusti- <anon>:10:11: 10:13 error: type `<generic integer #1>` cannot be dereferenced
[17:42:52] -rusti- <anon>:10         2**3
[17:42:52] -rusti-                     ^~
[17:42:52] -rusti- error: aborting due to previous error
[17:42:52] -rusti- application terminated with error code 101
[17:42:58] <PeterSP> <_<
[17:43:55] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[17:43:58] <cmr> 2 * (*3)
[17:44:07] <PeterSP> Yes I got that.
[17:44:22] <PeterSP> I then felt silly that I didn't scroll up in the rust tutorial I have open to check what operators are available.
[17:45:28] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[17:45:46] *** Joins: nszceta (hax@moz-E458A7C0.pharm.pitt.edu)
[17:46:22] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[17:46:35] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[17:46:57] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[17:48:02] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[17:48:26] *** Joins: sawrubh (uid6719@moz-5F4AA75A.irccloud.com)
[17:48:26] *** Joins: wilfred (sid159@moz-5F4AA75A.irccloud.com)
[17:48:26] *** Joins: etrepum (sid763@moz-5F4AA75A.irccloud.com)
[17:48:29] *** Joins: lexs (uid12437@moz-5F4AA75A.irccloud.com)
[17:48:29] *** Joins: drueck (uid25037@moz-5F4AA75A.irccloud.com)
[17:48:30] *** Joins: andreypopp (uid22726@moz-5F4AA75A.irccloud.com)
[17:48:34] *** Joins: wycats (sid79@moz-5F4AA75A.irccloud.com)
[17:48:39] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[17:49:37] *** Joins: mhenretty_ (sid11899@moz-5F4AA75A.irccloud.com)
[17:50:00] <saml> i'm gonna learn valentine because it's rust
[17:50:07] <saml> i mean gonna learn rust
[17:50:18] <PeterSP> because it's valentine (sic)?
[17:50:53] <saml> yes. it's a half day
[17:51:01] <saml> it's being compiled
[17:52:34] *** Quits: Jemaclus (jemaclus@A084B2A7.5843BA5A.D4E4C7A5.IP) (Client exited)
[17:53:52] *** Joins: lkuper (lkuper@moz-AD4C50F5.dhcp-bl.indiana.edu)
[17:54:02] <saml> cp: x86_64-unknown-linux-gnu/stage1/lib/libsyntax.so   this takes a long time
[17:54:17] *** pmoore|away is now known as pmoore
[17:54:29] <saml> no actually rustc starts to compiling itself
[17:56:53] *** Parts: dradtke (dradtke@moz-77578067.hfc.comcastbusiness.net) ()
[17:57:01] *** Quits: oberstet (quassel@moz-8986665C.dynamic.mnet-online.de) (Connection reset by peer)
[17:57:31] *** Quits: alexherbo2 (alexherbo2@moz-9AE52DD7.w90-3.abo.wanadoo.fr) (Ping timeout)
[17:57:40] *** Joins: gmjosack (gary@F91A859E.75E3DBFA.7AB8439E.IP)
[17:57:43] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[18:00:58] *** Joins: mouse (mouse@moz-4A3624F.broadband.corbina.ru)
[18:01:51] *** mhenretty_ is now known as mhenretty
[18:06:12] *** Joins: askalski (akuda@2BA4E5A7.CC7751E8.6712E96B.IP)
[18:07:58] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[18:08:12] *** Joins: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP)
[18:09:00] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[18:09:05] *** Joins: astroch (astroch@moz-C18802C0.dhcp.embarqhsd.net)
[18:10:42] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[18:12:20] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Input/output error)
[18:12:50] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[18:13:58] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[18:13:59] *** Quits: nkoep (nik@moz-C75B39A9.pool.mediaways.net) (Quit: Leaving)
[18:14:03] *** Quits: eddyb (eddy@688E9026.F7C96DA2.FCAAE698.IP) (Ping timeout)
[18:14:20] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[18:14:34] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Ping timeout)
[18:15:39] <Kroisse> is there any method to increment a char?
[18:15:47] <Kroisse> like 'c' + 1 in C
[18:15:55] *** Joins: dagnir (chatzilla@A1D3E7F1.DBF4469E.7E8D5209.IP)
[18:15:55] <tedh> what does --cfg rtopt do?
[18:16:13] <pnkfelix> Kroisse: not directly, I don't believe.  I think you need to coerce it to a u32 and back
[18:16:37] <cmr> Kroisse: incrementing a char isn't a sensible operation, that could make it an invalid codepoint.
[18:16:39] <pnkfelix> Kroisse: (because we are trying to ensure that in safe code, every char actually corresponds to a codepoin)
[18:16:48] <Kroisse> I found std::char::from_u32(), but there's not a reversed one
[18:16:59] <cmr> rusti: '4' as u32
[18:17:01] -rusti- 52u32
[18:17:07] <Kroisse> oh
[18:17:25] <mcpherrin> rusti: ('A' as u32) +1 as char
[18:17:28] -rusti- pastebinned 8 lines of output: http://ix.io/av5
[18:17:36] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[18:17:38] <Kroisse> it's simpler than i think
[18:17:43] <mcpherrin> rusti: (('A' as u32) +1 )as char
[18:17:44] -rusti- <anon>:10:9: 10:34 error: only `u8` can be cast as `char`, not `u32`
[18:17:44] -rusti- <anon>:10         (('A' as u32) +1 )as char
[18:17:44] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~~~~~
[18:17:44] -rusti- error: aborting due to previous error
[18:17:44] -rusti- application terminated with error code 101
[18:17:45] <Kroisse> thanks :)
[18:17:55] <mcpherrin> rusti: (('A' as u8) +1 )as char
[18:17:56] -rusti- 'B'
[18:18:12] <pnkfelix> rusti: std::char::from_u32( ('A' as u32) + 1)
[18:18:14] -rusti- Some('B')
[18:18:15] <Kroisse> rusti: std::char::from_u32(('A' as u32) + 1)
[18:18:15] *** Quits: kanru` (kanru@7A2E4FBA.C62D262.7D6C905B.IP) (Ping timeout)
[18:18:16] -rusti- Some('B')
[18:18:23] <Kroisse> rusti: std::char::from_u32(('가' as u32) + 1)
[18:18:25] -rusti- Some('\uac01')
[18:18:27] <Kroisse> cool
[18:18:48] <mcpherrin> Seems a little overly verbose but oh well I guess?
[18:19:50] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[18:19:58] <pnkfelix> rusti: std::char::from_u32( ('\U0010fffe' as u32) + 1)
[18:20:00] -rusti- Some('\U0010ffff')
[18:20:03] <pnkfelix> rusti: std::char::from_u32( ('\U0010ffff' as u32) + 1)
[18:20:05] -rusti- None
[18:20:10] <pnkfelix> ta da
[18:20:17] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[18:20:29] <eibwen> will it only check for bounds or also whether there exists a specific codepoint?
[18:20:48] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[18:21:18] *** Joins: Rym (Instantbir@E81B972B.6D40ECF1.51C6DE68.IP)
[18:21:27] <Eridius> rusti: std::char::from_u32(\xd800)
[18:21:28] -rusti- <anon>:10:29: 10:30 error: unknown start of token: \\
[18:21:28] -rusti- <anon>:10         std::char::from_u32(\xd800)
[18:21:28] -rusti-                                       ^
[18:21:28] -rusti- application terminated with error code 101
[18:21:32] <Eridius> rusti: std::char::from_u32(0xd800)
[18:21:34] -rusti- None
[18:21:48] <Eridius> eibwen: it returns None for surrogate chars and anything past 0x10FFFF
[18:22:24] <Eridius> Theoretically we could implement CheckedAdd for char
[18:23:01] *** pmoore is now known as pmoore|away
[18:23:02] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[18:23:18] *** Quits: edwardw (edwardw@FC63E399.AB331A3B.FAED9FFC.IP) (Quit: Leaving...)
[18:23:38] <Eridius> hmm, maybe not. CheckedAdd apparently inherits from Add<Self, Self>
[18:23:45] <Eridius> so I guess you can't have a CheckedAdd when you can't have an Add?
[18:24:25] <sfackler> that inheretance seems wrong, I'd just remove it
[18:24:33] <sfackler> (sp)
[18:24:36] <pnkfelix> sfackler: yeah I was just wondering about that option.
[18:25:14] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[18:25:38] *** Quits: Rym (Instantbir@E81B972B.6D40ECF1.51C6DE68.IP) (Ping timeout)
[18:26:08] *** Joins: teosz (teosz@D15A38EC.410E8117.3EA6AAD8.IP)
[18:26:35] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[18:26:52] *** Joins: Savago (Savago@D8B9C081.E820043D.D4C04133.IP)
[18:27:03] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: rcirc on GNU Emacs 24.3.1)
[18:27:07] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[18:27:09] *** Joins: herrwolf` (user@CACBD77F.4EBBBE62.C082B7DC.IP)
[18:27:59] *** Quits: herrwolfe45 (user@CACBD77F.4EBBBE62.C082B7DC.IP) (Ping timeout)
[18:28:03] *** Quits: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP) (Quit: victorporof)
[18:28:30] *** Parts: matsurika (dmitry@1B1ADD.28646B65.1A3E6EBE.IP) ()
[18:28:51] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[18:28:57] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[18:29:43] *** Joins: FreeFull (freefull@moz-1883929A.as13285.net)
[18:29:58] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Connection reset by peer)
[18:30:02] *** Joins: sunfish (chatzilla@moz-C06D9702.mtv1.mozilla.com)
[18:30:06] *** Joins: edwardw (Mibbit@655F78EA.BF27AFA4.B9C6B12A.IP)
[18:30:12] *** Joins: Rym (Instantbir@E81B972B.6D40ECF1.51C6DE68.IP)
[18:30:15] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[18:30:35] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[18:30:37] *** Joins: eddyb (eddy@688E9026.F7C96DA2.FCAAE698.IP)
[18:31:28] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[18:31:37] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[18:32:21] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[18:32:39] *** Joins: dmac (Adium@moz-DBF6FF2C.hfc.comcastbusiness.net)
[18:34:02] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[18:35:31] *** Quits: pilf (pilf@8FA95888.1A994CBC.4B228AD7.IP) (Quit: pilf)
[18:36:31] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:37:46] <saml> okay rustc got installed finally
[18:38:10] *** Quits: marianoguerra (marianogue@moz-49BCECB2.dip0.t-ipconnect.de) (Ping timeout)
[18:38:24] *** Quits: eddyb (eddy@688E9026.F7C96DA2.FCAAE698.IP) (Ping timeout)
[18:38:56] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[18:39:07] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[18:39:20] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[18:40:00] *** Joins: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP)
[18:40:00] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[18:40:28] <saml> how can I install src/etc/vim  ?
[18:40:52] <cmr> saml: you can use https://github.com/wting/rust.vim with vundle etc
[18:41:15] <sfackler> alternatively https://github.com/thestinger/packages/blob/master/rust-git/PKGBUILD#L46
[18:41:17] <saml> ah is that the same thing?
[18:41:21] <cmr> you should really use vundle or vam or pathogen or something
[18:41:25] <cmr> but it just needs to be copied into ~/.vim
[18:41:28] <cmr> yeah
[18:41:31] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:41:31] <saml> thanks 
[18:41:46] *** Joins: jdm (jdm@E595D12E.1196002C.7DBB297B.IP)
[18:41:46] *** ChanServ sets mode: +o jdm
[18:43:32] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[18:44:04] *** Joins: matp (matp@moz-16FE1E05.matp.at)
[18:44:30] *** Quits: teosz (teosz@D15A38EC.410E8117.3EA6AAD8.IP) (Ping timeout)
[18:45:14] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[18:45:20] *** Joins: sp3d (s@6361F3B1.19CD1E54.8354FB35.IP)
[18:46:22] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[18:47:12] <saml> whoa my hello world program is 3MB
[18:47:28] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[18:47:32] *** Quits: nszceta (hax@moz-E458A7C0.pharm.pitt.edu) (Connection reset by peer)
[18:47:38] <Eridius> saml: welcome to static linking
[18:47:42] <Eridius> saml: try turning on dynamic linking
[18:48:06] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[18:48:12] <cmr> -C prefer-dynamic
[18:48:29] <cmr> with -Z lto and stripped it's under a meg
[18:48:31] <cmr> but it's still huge
[18:48:37] <cmr> we still have work to do there.
[18:48:49] <saml> error: Unrecognized option: 'C'.
[18:48:56] <cmr> What rust version did you build
[18:49:00] <saml> 0.9
[18:49:05] <cmr> oh :(
[18:49:08] <cmr> it's -Z prefer-dynamic
[18:49:12] <cmr> what OS are you using?
[18:49:13] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[18:49:16] *** Joins: dukeleto (dukeleto@moz-C083E0FB.ptld.qwest.net)
[18:49:28] <saml> i'm using ubuntu 64bit
[18:49:41] <Eridius> cmr: some day we should fix "warning: source code was requested to be rendered, but processing `<std macros>` had an error: no such file or directory skipping rendering of source code"
[18:49:46] <cmr> saml: there's a nightly ppa on https://launchpad.net/~hansjorg/+archive/rust
[18:49:55] <saml> oh it's 9.2K now
[18:50:07] *** Quits: gmjosack (gary@F91A859E.75E3DBFA.7AB8439E.IP) (Ping timeout)
[18:50:19] <saml> ah thanks. 1.0 is going to be released soon?
[18:50:22] <cmr> no.
[18:50:23] *** Joins: Chilledheart (chilledhea@A3ABD4AE.D1277449.E3D9F69D.IP)
[18:50:27] <cmr> 0.10 comes after 0.9
[18:50:52] <saml> oh. would you recommend beginners to use nightly ?
[18:50:56] <cmr> yes.
[18:50:58] <saml> or stick with 0.9 for now?
[18:51:02] <cmr> use nightly.
[18:51:06] <saml> ah thanks
[18:51:08] <cmr> there's no point to using releases right now
[18:51:19] <PeterSP> It's funny because the tutorial points you to releases.
[18:51:29] *** Joins: eddyb (eddy@688E9026.F7C96DA2.FCAAE698.IP)
[18:51:35] *** Quits: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net) (Ping timeout)
[18:51:56] *** Quits: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP) (Quit: victorporof)
[18:52:01] <cmr> so they do.
[18:52:03] * cmr fixes that.
[18:52:10] *** Quits: Chilledheart (chilledhea@A3ABD4AE.D1277449.E3D9F69D.IP) (Ping timeout)
[18:52:51] *** Joins: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP)
[18:53:17] *** pmoore|away is now known as pmoore
[18:53:36] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[18:53:40] *** Joins: gmjosack (gary@F91A859E.75E3DBFA.7AB8439E.IP)
[18:54:51] *** Quits: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[18:54:55] <Jemaclus> so let's say i want to help out with servo... given that I'm a noob, where's the best place to start?
[18:55:00] <cmr> Jemaclus: #servo
[18:55:11] <Jemaclus> derp
[18:55:15] <Jemaclus> :)
[18:55:46] <saml> with nightly println is unresolved
[18:55:54] <cmr> saml: removed from prelude
[18:55:57] <cmr> use println!()
[18:56:06] <saml> oh i should read nightly tutorial, not 0.9
[18:56:08] <cmr> (it still exists, as std::io::println)
[18:56:48] <edwardw> std::io::stdio::println?
[18:56:51] <cmr> no.
[18:57:09] <cmr> well, yes.
[18:57:17] <saml> what does ! mean in println! ?  eager evaluation?
[18:57:18] <cmr> but don't use, it's awful! it's reexported in std::io
[18:57:24] <cmr> saml: macro invocation.
[18:57:29] <saml> ah thanks
[18:57:33] <edwardw> cmr: ok
[18:57:36] <cmr> rust is strictly evaluated.
[18:58:18] <cmr> PeterSP: https://github.com/mozilla/rust/pull/12269
[18:59:54] *** Joins: victorporof (victorporo@8F761026.B5EF4AF6.E96CA9D8.IP)
[19:01:50] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[19:02:26] <PeterSP> r+ :P
[19:02:31] *** Quits: DasIch (dasich@moz-5EDA591.de) (Ping timeout)
[19:03:06] <edwardw> I always wonder what r+ means :)
[19:03:22] *** pmoore is now known as pmoore|away
[19:03:24] <cmr> edwardw: "approved"
[19:03:52] <edwardw> cmr: how come? not a+?
[19:04:03] <cmr> edwardw: the r is for review.
[19:04:16] <edwardw> cmr: ah, that makes sense
[19:05:20] <sam113101> rust will fail
[19:06:13] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[19:06:39] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[19:07:17] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[19:07:36] <Luqman> edwardw: comes from bugzilla: "r? [person]" to ask for a review, r+ for reviewed and good, r- for reviewed but still needs work
[19:08:06] <PeterSP> sam113101: why?
[19:08:28] <sam113101> PeterSP: because it doesn't have function overloading
[19:08:50] <cmr> lol
[19:09:08] <olsonjeffery> cmr: is the cargo-lite update done, by any chance? no rush, just curious.
[19:09:10] *** Quits: askalski (akuda@2BA4E5A7.CC7751E8.6712E96B.IP) (Quit: Wychodzi)
[19:09:16] <cmr> olsonjeffery: yes
[19:09:19] <cmr> pushed yesterday
[19:09:34] <edwardw> Luqman: I see
[19:09:35] <Matthias247> javascript also doesn't have that, misses 1000 other points and still didn't fail :)
[19:10:20] <Jemaclus> getting this in an error message:  found `|<generic #3>| -> bool`
[19:10:25] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[19:10:25] <Jemaclus> what exactly does <generic #3> mean?
[19:10:29] <Kroisse> even C doesn't have that :)
[19:10:36] <sfackler> Jemaclus: some type that the compiler can't infer
[19:10:37] <Jemaclus> i mean, obviously, it's a generic type, but i don't know how it would get that
[19:10:39] <cmr> Jemaclus: An inferred type, that is not known.
[19:10:39] <Jemaclus> ah
[19:10:40] <Jemaclus> i see
[19:10:47] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[19:11:02] *** Quits: andre (andre@CA528A4A.45A4338E.8EE27E6.IP) (Quit: leaving)
[19:11:16] <PeterSP> Matthias247: javascript piggypbacked on HTTP/HTML already being a success, though
[19:12:31] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[19:12:32] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[19:12:36] *** Joins: mgottschlag (quassel@moz-65AB7C61.cust.bluewin.ch)
[19:13:05] <saml> whoa assert! is compile time
[19:13:12] *** Joins: DasIch (dasich@moz-5EDA591.de)
[19:13:22] <cmr> saml: what do you mean?
[19:13:36] <Jemaclus> i read that as punctuation. My brain: "Whoa, assert! (pause) Is compile time."
[19:13:37] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[19:13:49] <saml> i mean assert!(4.0 == 4u)   fails to compile
[19:13:57] <cmr> because the types are different
[19:14:03] <cmr> that's just type safety, not a property of assert
[19:14:06] <saml> oh i see
[19:14:07] *** Joins: nszceta (hax@moz-4F52CE66.wireless.pitt.edu)
[19:15:26] <olsonjeffery> cmr: beuno, will try it out and give feedback
[19:16:00] *** Quits: mouse (mouse@moz-4A3624F.broadband.corbina.ru) (Ping timeout)
[19:16:49] *** Joins: mouse (mouse@moz-4A3624F.broadband.corbina.ru)
[19:17:30] <olsonjeffery> cmr: so what kind of stuff will be CARGO_RUSTFLAGS ?
[19:17:42] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Client exited)
[19:17:46] <olsonjeffery> im curious how ill push that down to a Makefile
[19:17:48] <cmr> olsonjeffery: nothing right now but stuff like -O or -Z lto would be passed.
[19:18:06] <saml> do I make a pull request for tutorial docs?
[19:18:11] <cmr> saml: yes.
[19:18:21] *** Joins: teosz (teosz@D15A38EC.410E8117.3EA6AAD8.IP)
[19:18:23] <saml> let me try :P
[19:19:06] *** Quits: jack (sid19593@moz-A42E5B7B.irccloud.com) (Ping timeout)
[19:19:20] *** Quits: zil (sid23500@moz-31ABA2C0.irccloud.com) (Ping timeout)
[19:19:33] <saml> println!(format!("{} is {}", "the answer", 43.234));   woot infinite loop when compile
[19:19:38] *** Joins: zil (sid23500@moz-31ABA2C0.irccloud.com)
[19:19:48] <cmr> println takes a format string
[19:19:51] <saml> http://static.rust-lang.org/doc/master/tutorial.html#syntax-extensions   this speaks about format! but example was println!
[19:19:52] <cmr> println!("{} is {}", ...)
[19:19:58] <cmr> rusti: println!(format!("{} is {}", "the answer", 43.234));
[19:19:59] -rusti- more than 10000 lines of output, bailing out
[19:20:01] <saml> yah so i was trying to use format!, too
[19:20:02] <cmr> heh
[19:20:03] <edwardw> saml: it is a known issue
[19:20:23] <edwardw> saml: https://github.com/mozilla/rust/issues/11692
[19:20:51] <brandonson> cmr:10000 lines of output?  what on earth his happening there.
[19:20:54] <Jemaclus> http://pastebin.com/w4dMNChW
[19:20:56] *** Quits: mouse (mouse@moz-4A3624F.broadband.corbina.ru) (Ping timeout)
[19:20:59] <brandonson> is*
[19:21:11] <cmr> no idea
[19:21:13] *** Joins: jack (sid19593@moz-A42E5B7B.irccloud.com)
[19:21:13] *** ChanServ sets mode: +o jack
[19:21:26] <Jemaclus> test.rs:4:9: 4:29 error: mismatched types: expected `fn(~str) -> bool` but found `|<generic #3>| -> bool` (expected extern fn but found fn) 
[19:21:29] <Jemaclus> ^ what's that mean?
[19:21:43] <cmr> Jemaclus: it wanted a function, you gave it a closure.
[19:21:44] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[19:21:44] *** ChanServ sets mode: +ao brson brson
[19:21:51] <Jemaclus> oh.
[19:21:55] <Jemaclus> hm
[19:21:59] <Jemaclus> lemme go read the manual again.
[19:22:15] <cmr> cange foo to it: |~str| -> bool
[19:22:49] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: Lost terminal)
[19:22:50] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[19:22:57] *** Quits: herrwolf` (user@CACBD77F.4EBBBE62.C082B7DC.IP) (Quit: ERC Version 5.3 (IRC client for Emacs))
[19:23:06] *** Joins: cremes (cremes@moz-72B945E0.hsd1.il.comcast.net)
[19:23:06] *** Joins: askalski (akuda@2BA4E5A7.CC7751E8.6712E96B.IP)
[19:23:14] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[19:23:14] *** ChanServ sets mode: +ao brson brson
[19:23:19] <Jemaclus> I see.
[19:24:09] *** Joins: mouse (mouse@moz-4A3624F.broadband.corbina.ru)
[19:29:29] *** Quits: jdm (jdm@E595D12E.1196002C.7DBB297B.IP) (Quit: Lost terminal)
[19:30:24] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Input/output error)
[19:30:36] *** Quits: teosz (teosz@D15A38EC.410E8117.3EA6AAD8.IP) (Ping timeout)
[19:31:05] *** Quits: mouse (mouse@moz-4A3624F.broadband.corbina.ru) (Ping timeout)
[19:31:53] *** Joins: skade (skade@moz-A153E721.web.vodafone.de)
[19:33:09] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:34:09] *** Quits: gmjosack (gary@F91A859E.75E3DBFA.7AB8439E.IP) (Ping timeout)
[19:35:15] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[19:35:33] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[19:35:36] <saml> https://gist.github.com/saml/9007581   can be a tricky interview question
[19:36:24] <saml> rusti, match 1 { 1..2 => 0, 1 | 2 => 1, _ => 2 }
[19:36:27] -rusti- pastebinned 8 lines of output: http://ix.io/avc
[19:36:37] *** Quits: skade (skade@moz-A153E721.web.vodafone.de) (Ping timeout)
[19:36:50] <cmr> such an interview question would be asinine
[19:36:50] <saml> rusti, match 1 { 1 | 2 => 0, 1..2 => 1, _ => 2 }
[19:36:52] -rusti- 0
[19:37:10] *** Joins: iDolfHatler (idolf@moz-47812C15.static.bcbnet.dk)
[19:37:43] <Jemaclus> because 1 | 2 would never be reached in the 2nd example?
[19:37:56] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Quit: Leaving...)
[19:38:04] <saml> okay happy long weekend
[19:38:05] *** Parts: saml (sam@moz-14C16814.cst.lightpath.net) (Leaving)
[19:38:12] <Jemaclus> cool, good answer.
[19:38:21] <eddyb> hang on, this looks like a bug
[19:38:51] <eddyb> it's not an actual case where the order *should* matter
[19:39:23] <Jemaclus> is the pattern 1..2 matching for [1,2]? Or is it the same as 1 | 2?
[19:39:25] <eddyb> match opt {_ => None, Some(x) => Some(x)} is a case where it matters and for a good reason
[19:40:08] <eddyb> Jemaclus: it's a range... 1 | 2 and 1..2 should cover the same elements
[19:40:24] <Jemaclus> good, that's what i expected.
[19:40:52] <Jemaclus> well, it seems to me that 1..2 would match the same thing as 1 | 2, and since that's the case, 1 | 2 would never get matched
[19:40:55] <Jemaclus> so the compiler error makes sense?
[19:41:01] <eddyb> it should error for both cases
[19:41:05] <eddyb> (IMO)
[19:41:07] <Jemaclus> oh i see
[19:41:15] <eddyb> cmr: well, there won't be a chance for such an interview question if we fix this :P
[19:41:18] *** Joins: gmjosack (gary@F91A859E.75E3DBFA.7AB8439E.IP)
[19:41:48] <Jemaclus> if 2+ match expressions are equivalent, then 1+ are unreachable, regardless of the order.
[19:41:49] *** Quits: teratorn (teratorn@moz-5363C32C.teratorn.org) (Quit: Absum!)
[19:41:51] <Jemaclus> so that makes sense
[19:42:08] <Jemaclus> i have another unrelated question
[19:42:26] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[19:42:28] <eddyb> I thought matching against ranges was stricter, since it's only allowed for integers, which makes me wonder if my a..b sugar idea for range(a, b) could work for matching
[19:42:28] <Jemaclus> at someone's (I forget who) request, I've been working on updating an older grapheme cluster library
[19:43:03] <Jemaclus> in cluster_count(), sbillig is doing:  do each_cluster(s) |_| { c += 1; true }
[19:43:10] <Jemaclus> https://github.com/sbillig/rust-grapheme/blob/master/src/grapheme.rs
[19:43:54] <Jemaclus> I know do has been deprecated/removed, but my question is, in that statement, when does the do statement stop?
[19:44:35] <Jemaclus> my understanding says that's an infinite loop, but clearly it stops at some point to return c
[19:44:35] *** Joins: teratorn (teratorn@moz-5363C32C.teratorn.org)
[19:44:40] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[19:44:51] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[19:45:16] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[19:45:24] <cmr>             if !it(unsafe{slice_bytes(s, startp, pos)}) { return; }
[19:45:33] <cmr> if it returns false, the loop breaks.
[19:45:41] *** Quits: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com) (Input/output error)
[19:45:47] <cmr> this is the old internal iterator style.
[19:45:52] *** Joins: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com)
[19:46:11] <Jemaclus> right.
[19:46:12] *** Quits: edwardw (Mibbit@655F78EA.BF27AFA4.B9C6B12A.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:46:20] *** Joins: edwardw (Mibbit@24D7341C.32602B75.B9C6B12A.IP)
[19:46:22] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[19:46:43] <cmr> the do syntax was `do function(args) |closure args| { body }`
[19:47:11] <cmr> you'll notice it 's in a while loop... 
[19:48:01] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[19:48:06] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[19:48:38] *** Joins: edwardw_ (Mibbit@6ED525DA.BF27AFA4.B9C6B12A.IP)
[19:48:54] <Jemaclus> right
[19:49:12] <cmr> so what makes you think it's an iloop?
[19:49:44] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[19:49:53] <Jemaclus> i'm running it, and it's going on forever :)
[19:49:54] <brandonson> how does one get the value from inside a single-field struct?  Do you just have to use match?
[19:50:04] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[19:50:17] <cmr> brandonson: or let
[19:50:23] <cmr> let StructName(inner_value) = value;
[19:50:40] <brandonson> cmr: ah, that'll be much nicer, thanks.
[19:50:47] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[19:50:50] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[19:51:23] *** Quits: edwardw (Mibbit@24D7341C.32602B75.B9C6B12A.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:51:35] *** edwardw_ is now known as edwardw
[19:52:26] *** Quits: aurynj (Eon@BF507CFB.1CEEC774.4C51A5AE.IP) (Ping timeout)
[19:53:32] *** Quits: dualcoding (dualcoding@moz-6BD43586.a370.priv.bahnhof.se) (Ping timeout)
[19:53:44] *** Quits: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com) (Ping timeout)
[19:55:31] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[19:55:53] *** Joins: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com)
[19:56:07] *** Joins: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net)
[19:57:09] *** Quits: teratorn (teratorn@moz-5363C32C.teratorn.org) (Quit: Absum!)
[19:57:35] *** Joins: teratorn (teratorn@moz-5363C32C.teratorn.org)
[19:58:38] *** Quits: nszceta (hax@moz-4F52CE66.wireless.pitt.edu) (Input/output error)
[19:58:52] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[19:59:45] <brson> Several times recently I've wished to have a Rust-based console markdown formatter
[19:59:49] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:00:01] <brson> I think we'd find a lot of uses for such a thing in our tooling
[20:00:25] <brson> it would maybe add bold face to sections, and syntax highlight code snippets
[20:00:31] <mcpherrin> brson: You mean markdown -> vt100 style formatting?
[20:00:34] <brson> yes
[20:00:40] *** Joins: tcfunk (Mibbit@moz-4251878.consolidated.net)
[20:01:09] *** Quits: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com) (Ping timeout)
[20:01:10] <acrichto> brson: last time I used godoc's console interface I found it quite nice to have
[20:01:24] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:01:28] <brson> acrichto: ah, I've never seen it
[20:01:38] *** Parts: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) ()
[20:01:52] *** Joins: gimpf (gimpf@moz-C9F096CE.adsl.highway.telekom.at)
[20:02:29] *** Joins: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com)
[20:02:33] *** Quits: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com) (Connection reset by peer)
[20:02:33] <cmr> I have a dead branch for man-page rendering for rustdoc
[20:04:26] *** Quits: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP) (Client exited)
[20:05:51] <acrichto> brson: https://gist.github.com/anonymous/9008196 <- output of "godoc sync"
[20:06:09] <acrichto> I think it's tougher to browse
[20:06:15] <acrichto> but it's nice if you know what you're looking for
[20:06:49] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[20:09:04] *** Quits: tcfunk (Mibbit@moz-4251878.consolidated.net) (Quit: http://www.mibbit.com ajax IRC Client)
[20:10:17] *** Parts: edwardw (Mibbit@6ED525DA.BF27AFA4.B9C6B12A.IP) ()
[20:10:49] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[20:12:04] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:13:49] *** Quits: doener (doener@moz-C68F600D.unity-media.net) (Quit: leaving)
[20:16:59] <SiegeLord> Heh, that golo website port even stole the sentence structure of the original
[20:17:58] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[20:19:03] *** Quits: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP) (Client exited)
[20:19:24] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[20:19:37] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[20:22:11] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[20:23:37] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[20:24:09] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[20:25:52] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[20:26:07] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[20:26:27] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[20:26:36] *** Quits: FrozenCow (FrozenCow@moz-E69F48E.dynamic.upc.nl) (Client exited)
[20:26:40] *** Joins: skade (skade@moz-A153E721.web.vodafone.de)
[20:27:01] *** Joins: pdewacht (repent@moz-A79C5CB3.be)
[20:28:13] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[20:28:13] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[20:29:21] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[20:29:58] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[20:30:00] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[20:30:09] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[20:31:01] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[20:31:03] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:32:06] *** Joins: alexherbo2 (alexherbo2@moz-9AE52DD7.w90-3.abo.wanadoo.fr)
[20:32:42] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[20:32:45] *** Quits: skade (skade@moz-A153E721.web.vodafone.de) (Connection reset by peer)
[20:32:59] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[20:33:01] *** Joins: twi (Adium@24080336.302FB0FF.54B829D6.IP)
[20:33:07] *** Quits: twi (Adium@24080336.302FB0FF.54B829D6.IP) (Max SendQ exceeded)
[20:33:19] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[20:33:19] *** Joins: twi (Adium@24080336.302FB0FF.54B829D6.IP)
[20:33:28] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[20:34:57] <bjz> does rustc implicitly `-L $PATH`?
[20:35:13] <cmr> bjz: no.
[20:35:21] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[20:35:25] <cmr> but the linker still does its usual think.
[20:35:31] <cmr> *thing
[20:35:42] <bjz> what do you mean by that?
[20:35:52] <cmr> it will still check /etc/ld.so.conf
[20:35:59] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[20:36:34] *** Quits: victorporof (victorporo@8F761026.B5EF4AF6.E96CA9D8.IP) (Quit: victorporof)
[20:37:02] <bjz> cmr: does it check ~/.rust?
[20:37:20] <cmr> bjz: ~/.rust/$target/lib, I think.
[20:37:33] <bjz> hm
[20:37:53] <bjz> might need to change my install targets then
[20:38:12] <bjz> photex: ^
[20:38:34] <photex> heyo
[20:38:45] <brson> r/rust exploded with stories last night
[20:38:53] <photex> what is $target cmr?
[20:38:56] <bjz> cmr: is there a way to get $target from rustc?
[20:39:04] <cmr> brson: yeah pretty crazy.
[20:39:06] <photex> the platform string (x86_linux_unknown)
[20:39:09] <photex> ?
[20:39:11] <cmr> bjz: no.
[20:39:14] <cmr> photex: yes
[20:39:19] <cmr> It's the default, or passed to rustc with --target
[20:40:10] <cmr> I don't remember if/how to get target triple from system
[20:40:16] <cmr> strcat: do you know?
[20:40:27] <brson> rustc won't tell you what it's own target triple is though. it does have that info, but it's not exposed on the command line
[20:40:31] *** Joins: herrwolfe45 (user@CACBD77F.4EBBBE62.C082B7DC.IP)
[20:40:44] <strcat> they're usually pretty obvious
[20:41:11] <photex> makes it tough to use in a makefile though
[20:41:15] <bjz> photex: we could regex rustc -v
[20:41:26] <cmr> oh hey it's there.
[20:41:28] <photex> bjz: yiss
[20:41:43] <bjz> photex: I've seen that in a few makefiles
[20:41:46] <photex> rustc -v | grep host | cut -f 2 -d ' '
[20:42:25] <photex> not available on windows.... but it's a Makefile :)
[20:42:35] <photex> will have to think of something for that case
[20:44:02] *** Joins: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP)
[20:44:05] <bjz> photex: yeah
[20:45:02] <bjz> photex: don't you need Cygwin for compiling rust on windows though?
[20:45:13] <cmr> all you need is gcc.
[20:45:57] <bjz> ah, really?
[20:46:17] <herrwolfe45> Hi - I've written a piece of code two different ways and I'm unsure (a) which is the preferable way to write it in rust and (b) why does the second version I wrote, using skip and take return a pointer to the code point instead of the value? (or have i misunderstood what it is returning) https://gist.github.com/derwolfe/dadadfb488e06baedc97 - thanks
[20:46:35] <bjz> how does configure/make work then? does gcc do that?
[20:46:42] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[20:46:45] <cmr> no...
[20:46:48] <cmr> well
[20:46:51] <photex> ~/.rust/$target/lib doesn't *seem* to work
[20:46:53] <cmr> you need cygwin to *build* rust
[20:46:56] <cmr> but not to use rustc.
[20:47:03] <cmr> and you don't need to build rust to use rustc
[20:47:10] <photex> do I need to put the crate name without a hash in there?
[20:47:32] <cmr> hm
[20:48:16] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[20:48:27] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[20:48:33] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[20:48:37] *** Joins: mrshankly (mrshankly_@moz-A56896CA.rev.vodafone.pt)
[20:48:54] <photex> I asked this the other afternoon and I thought I was told that there are no implicit search paths for crates other than where ever the std crates live
[20:49:14] <cmr> reading the source
[20:49:24] <cmr> it seems rustpkg itself must have been injecting ~/.rust/$target/lib
[20:49:29] <bjz> herrwolfe45: you can just do bytes.len()
[20:50:17] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[20:50:17] <herrwolfe45> i'll change that, thanks
[20:50:50] *** Quits: rootnode (rootnode@moz-7FAB5E8.ip1.george24.com) (Ping timeout)
[20:50:55] <photex> herrwolfe45: I'm not a contributor or expert, but as a dude standing around I like the second version
[20:50:59] <photex> I find it easier to read 
[20:51:01] *** Joins: skade (skade@moz-A153E721.web.vodafone.de)
[20:51:05] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[20:51:19] <herrwolfe45> thanks photex 
[20:52:04] <bjz> cmr: so .rust is no more?
[20:53:06] <mcpherrin> herrwolfe45: fwiw, http://static.rust-lang.org/doc/master/std/vec/struct.Chunks.html
[20:53:11] <Jemaclus> herrwolfe45: should that i in the 2nd example be chunk instead?
[20:53:30] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[20:53:34] <cmr> bjz: seems not.
[20:53:43] <cmr> bjz: note that cargo-lite by default drops things in ~/.rust/lib
[20:53:47] <cmr> (no target)
[20:53:47] <photex> mcpherrin: that's awesome
[20:53:48] <Jemaclus> herrwolfe45: also, i prefer the 2nd one. Totally a noob, though, so take my opinion with a grain of salt :)
[20:53:57] <photex> all these useful things
[20:54:03] <mcpherrin> Note that I didn't actually read the code :)
[20:55:02] <photex> bjz: it's possible that we could just add some default flags then
[20:55:10] <photex> -L/usr/lib -L/usr/local/lib
[20:55:19] <bjz> photex: yeah
[20:55:24] <herrwolfe45> Jemaclus: thanks for the help! I prefer the second as well. The piece I still don't understand is why the second version returns ~[&98u8...] vs ~[98u8...], i.e. a pointer to a byte instead of a the byte as a value.
[20:55:42] <bjz> photex: maybe we should be installing to ~/.rust
[20:55:56] <photex> bjz: I'd prefer that honestly
[20:56:17] <strcat> (that's really not where you're supposed to put stuff on linux fwiw...)
[20:56:18] <photex> nothing I'd do at work could be installed to /usr/* anyway
[20:56:25] <bjz> strcat: I know
[20:56:44] <bjz> strcat: silly . files messing up my ~
[20:57:07] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:57:13] <photex> well, there isn't anything stopping someone from customizing where they install to
[20:57:23] <photex> but for the defaults I'm cool with either
[20:57:26] *** Quits: askalski (akuda@2BA4E5A7.CC7751E8.6712E96B.IP) (Input/output error)
[20:57:27] <strcat> regardless, it's not where stuff is supposed to go
[20:57:46] <Jemaclus> herrwolfe45: no idea... i haven't quite figured that kind of stuff out yet, myself.
[20:57:47] * bjz gets so annoyed with every single silly application that wants its own dotfile/directory
[20:57:57] <photex> sorry strcat that wasn't in response to your statement, I just wanted to move the chains a bit
[20:58:19] <photex> so it sounds like bjz we can stick with /usr/local
[20:58:29] <bjz> photex: yeah, I think a prefix might be the way to go
[20:58:30] <photex> and just add some default search paths to the makefiles
[20:59:09] <strcat> rust's pkg manager should never be putting stuff in /usr
[20:59:12] <bjz> photex: I have another person wanting it for a custom build system too
[20:59:13] <strcat> even in /usr/local
[20:59:20] *** Parts: Earnestly (earnest@119EDA00.66A37A5.BFD1ABFD.IP) (WeeChat 0.4.4-dev)
[20:59:32] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[20:59:32] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[20:59:59] <bjz> photex: yeah I have no idea
[21:00:03] *** Quits: herrwolfe45 (user@CACBD77F.4EBBBE62.C082B7DC.IP) (Quit: ERC Version 5.3 (IRC client for Emacs))
[21:00:28] <sfackler> strcat: /opt instead if it needs to be global?
[21:00:30] *** Joins: arielb1 (arielb1@moz-CB7488B7.red.bezeqint.net)
[21:00:35] <strcat> sfackler: no
[21:00:52] <strcat> it shouldn't install to /, that's what a real package is for
[21:01:06] <bjz> Ideally it should be nowhere
[21:01:08] *** Joins: ghn (grandy@moz-362CDC0.fttp.sta.comporium.net)
[21:01:11] <sfackler> ah
[21:01:19] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[21:01:24] *** Joins: wilmoore (wilmoore@moz-1248C037.mystrotv.com)
[21:01:24] *** Quits: arielb1 (arielb1@moz-CB7488B7.red.bezeqint.net) (Quit: ircII EPIC5-1.1.2 -- Are we there yet?)
[21:01:25] <bjz> you should not be using a computer
[21:01:38] <strcat> it's not hard to generate proper packages
[21:01:41] *** Joins: zihaowang (zihaowang@moz-8BAEDE0A.hsd1.va.comcast.net)
[21:01:57] *** Quits: jackneill (jackneill@moz-20521AD2.pool.digikabel.hu) (Ping timeout)
[21:02:02] *** Quits: skade (skade@moz-A153E721.web.vodafone.de) (Connection reset by peer)
[21:02:02] *** Joins: arielb1 (arielb1@moz-CB7488B7.red.bezeqint.net)
[21:03:06] <bjz> strcat: what do you mean by "real package"
[21:03:29] <Ralith> strcat: hey, you were the guy that was playing with seccomp-bpf right?
[21:03:34] <strcat> a package managed by the system package manager, with external deps handled correctly
[21:03:40] <strcat> Ralith: yes
[21:03:53] <Ralith> strcat: do windows/osx have anything remotely analogous?
[21:04:02] <Ralith> or bsd for that matter
[21:04:15] <strcat> Ralith: I don't think even openbsd has the same level of sandboxing features
[21:04:34] <Ralith> that's remarkable
[21:04:38] <Ralith> what do people do for sandboxing on win32?
[21:04:50] <strcat> Ralith: well there's crappy stuff like sandboxie
[21:04:52] <strcat> it's not very secure
[21:05:08] <strcat> since it still basically attack the entire kernel
[21:05:15] <Ralith> doesn't look suitable for programmatic use either, at a glance
[21:05:20] <PeterSP> I would hope that ultimately rust will be in rpm/deb form <_<
[21:05:35] <strcat> there are already packages for rust itself
[21:05:42] <strcat> but manually packaging all of the libs for $DISTRO would be a pain
[21:05:57] <PeterSP> And it'd be nice to have a rust packager which could automatically generate rpms / debs
[21:06:00] <strcat> can usually do semi-auto-conversion
[21:06:05] <diverse> PeterSP: that's not what it does
[21:06:10] <photex> well bjz that seems to work nicely.
[21:06:12] <strcat> PeterSP: well, it can't really do that automatically
[21:06:20] <photex> lunch time bbl
[21:06:21] <strcat> different distros give packages different names
[21:06:24] <bjz> photex: o/
[21:06:28] <PeterSP> I'm speaking of wish-fulfillment, not any understanding of reality.
[21:06:45] <strcat> if there was actually a rust package builder, then it could have a mapping of deps -> names
[21:06:47] *** Quits: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net) (Connection reset by peer)
[21:06:51] <strcat> and handle external deps properly
[21:07:20] <strcat> otherwise it's just like haskell where you can auto-generate a package
[21:07:26] <strcat> but you need a bunch of special cases
[21:07:50] <PeterSP> That would be less useful.
[21:08:36] <strcat> https://github.com/archhaskell/habs/tree/master/patches for example, the exceptions for over 200+ haskell packages auto-generated for arch linux
[21:08:46] <Jemaclus> well, i figured out the answer to herrwolfe's problem, but he left. bummer.
[21:09:05] *** Joins: newguy (Mibbit@moz-27705653.wireless-pennnet.upenn.edu)
[21:09:44] <newguy> hey giys quick question. when i open up terminal, what's the meaning of whatever is before the ":~"
[21:10:01] <cmr> newguy: what terminal...
[21:10:07] <newguy> bash
[21:10:20] <strcat> depends on what your prompt is set to
[21:10:22] <ghn> newguy: thats a linux question, but it depends
[21:10:33] <k4nar> should be your hostname i reckon
[21:10:40] <ghn> newguy: most likely your pwd also
[21:10:47] <strcat> mine is 'user@hostname vimode dir vcs_branch %'
[21:10:50] <newguy> oh ok, does it change depending on what network youre on?
[21:10:52] *** Joins: skade (skade@moz-A153E721.web.vodafone.de)
[21:10:55] *** Joins: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net)
[21:11:15] <newguy> i connected to a different network, and i no longer see what im used to seeing
[21:11:23] <newguy> im just wondering what it is
[21:11:23] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[21:11:27] <k4nar> like, via ssh ?
[21:11:31] <newguy> no
[21:11:33] <cmr> newguy: it's set by the PS1 environment variable.
[21:11:34] <PeterSP> that would depend on the setting of PS1 in your environment
[21:11:35] *** Joins: herrwolfe45 (user@CACBD77F.4EBBBE62.C082B7DC.IP)
[21:11:37] <cmr> it's shell and environment dependant.
[21:11:37] <newguy> i physically went to a different place
[21:11:40] <PeterSP> jinx
[21:11:52] *** Quits: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net) (Quit: Leaving)
[21:12:12] <newguy> im at a museam now, and it says mus001:~ myusername$
[21:12:32] <mcpherrin> that's probably the hostname of the computer
[21:12:35] <PeterSP> Is it the same computer?
[21:12:42] <mcpherrin> which may be assigned by DHCP when you connect to the network
[21:12:58] <newguy> im using my own computer, and ive never seen it change like this before
[21:13:09] <newguy> mcpherrin: oh ok
[21:13:10] <PeterSP> DHCP seems the likeliest suspect
[21:13:17] <k4nar> I think mcpherrin's right
[21:13:43] <newguy> i see..
[21:14:05] <newguy> so this is normal?
[21:14:09] <cmr> yes
[21:14:13] <mcpherrin> You can turn that off if you want, but yeah it's fairly normal behavior
[21:14:38] *** Joins: p1start (rewi@moz-A082F561.adsl.xtra.co.nz)
[21:15:04] <k4nar> does rust support type overloading for trait's implementation ?
[21:15:11] <k4nar> the following example is failing : https://gist.github.com/k4nar/9009324
[21:15:21] <k4nar> and I'm not sure to understand why
[21:15:24] <newguy> mcpherrin: so when you said that its referring to the hostname of the computer, youre talking about the computer that im connected to?
[21:15:37] <cmr> newguy: whatever the shell is running on.
[21:15:39] *** Quits: skade (skade@moz-A153E721.web.vodafone.de) (Connection reset by peer)
[21:15:46] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[21:16:16] <cmr> newguy: when you remote into another machine, you are using a different shell...
[21:16:56] <newguy> cmr: ok. so this happens automatically, even though i never ssh'ed
[21:16:58] <newguy> ?
[21:17:17] *** Quits: claudiu_ (claudiu@CB447DD5.6B10AC3.E2F59BBC.IP) (Connection reset by peer)
[21:17:17] <cmr> how are you connected to it if you didn't ssh.
[21:17:30] <diverse> thats what I'm curious about
[21:17:55] <k4nar> he's connected to a wifi network, I think that's all…
[21:18:04] <newguy> k4nar: yep
[21:18:14] <newguy> cmr: i just connected to a wifi network
[21:18:17] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[21:18:20] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[21:18:34] <diverse> and so whenever you reconnect, your hostname changes?
[21:18:35] *** Joins: Chilledheart (chilledhea@A3ABD4AE.D1277449.E3D9F69D.IP)
[21:18:41] <strcat> newguy: the prompt is configurable, without seeing how you have it configured then we can't say what that is
[21:18:44] <k4nar> and this network doesn't use his default hostname (no idea why, I'm not found of networks)
[21:18:45] <cmr> oh
[21:19:03] <newguy> diverse: this is the only time i noticed the change. so im not entirely sure
[21:19:09] <strcat> any computer has a hostname, and it's possible (but not common...) to accept a hostname over dhcp
[21:19:36] <strcat> if it's really your own computer with an install you did of a linux distro, then I find it quite odd
[21:19:52] *** Joins: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com)
[21:19:57] <strcat> it's not the setting I'd expect from something not mass deployment for an organization
[21:20:02] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[21:20:17] *** Quits: Chilledheart (chilledhea@A3ABD4AE.D1277449.E3D9F69D.IP) (Ping timeout)
[21:20:46] <arielb1> I can't get cross-module macros to work https://gist.github.com/anonymous/9009504
[21:21:09] <cmr> arielb1: you need #[macro_export] on the macro for it to be exported cross-crate.
[21:21:12] <cmr> sfackler: right?
[21:21:20] <k4nar> the ways of dhcp are mysterious
[21:21:58] <sfackler> cmr: yep
[21:22:12] <sfackler> macro_escape is within the crate
[21:22:50] <mcpherrin> strcat: I am pretty sure Ubuntu takes it hostname from the network if one is not otherwise explicitly set
[21:23:10] <strcat> it lets you not set a hostname by default? ;s
[21:23:21] <arielb1> still doesn't work https://gist.github.com/anonymous/9009592
[21:23:40] <cmr> arielb1: you need to also put #[phase(syntax)] when you import the crate I think.
[21:24:05] <arielb1> that's a single crate
[21:24:22] <arielb1> I put it in test.rs and compile it with rustc test.rs
[21:24:26] <sfackler> oh,
[21:24:27] <cmr> oh
[21:24:32] <cmr> semicolon after #[macro_export]
[21:24:37] <cmr> needs to be on the mod, not the macro.
[21:24:45] <sfackler> arielb1: you want #[macro_escape] on mod spec, not #[feature(macro_escape)]
[21:24:47] <sfackler> cmr, no
[21:24:50] <sfackler> it should be on the macro
[21:24:56] <cmr> oh, was that changed?
[21:24:58] <sfackler> macro_escape is at the module level
[21:25:02] <sfackler> macro_export is at the macro level
[21:25:05] <cmr> oh I meant macro_escape
[21:25:08] <cmr> sorry
[21:25:33] *** Joins: skade (skade@moz-A153E721.web.vodafone.de)
[21:25:43] <arielb1> now I get unresolved import: there is no `my_macro` in `spec`
[21:25:47] *** Joins: pilf (pilf@44BF5D7D.B6A69891.5411983D.IP)
[21:25:52] <newguy> mcpherrin: "OS X normally gets the hostname from a reverse lookup of the IP address the machine has. When you're on DHCP, that means your hostname can change"
[21:26:01] <newguy> mcpherrin: you were right!
[21:26:07] <sfackler> arielb1: you don't "use foo" for macros
[21:26:16] <arielb1> now it works. thanks
[21:26:24] <arielb1> could someone document this?
[21:26:36] *** Quits: mrshankly (mrshankly_@moz-A56896CA.rev.vodafone.pt) (Quit: leaving)
[21:26:37] *** Joins: ofeldt (ofeldt@moz-F8D633BE.dip0.t-ipconnect.de)
[21:26:38] <sfackler> arielb1: https://gist.github.com/sfackler/9009653
[21:26:50] <sfackler> I'm planning on writing up a thing on it for the next meetup
[21:26:50] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[21:26:53] <newguy> do you guys change your host name?
[21:26:59] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[21:27:01] <newguy> just wondering
[21:27:08] <cmr> newguy: no.
[21:27:15] *** Quits: ofeldt- (ofeldt@moz-B304C5B.dip0.t-ipconnect.de) (Ping timeout)
[21:27:17] <mcpherrin> I always name all my computers!
[21:27:21] <arielb1> the macro_export isn't needed
[21:27:22] * cmr does too
[21:27:22] <arielb1> ?
[21:27:26] <newguy> lol
[21:27:33] <cmr> arielb1: not for inter-crate, sorry.
[21:27:34] <newguy> mcpherrin: what did you name yours?
[21:27:39] <sfackler> arielb1: not unless you want to load my_macro! from another crate
[21:27:39] *** Quits: skade (skade@moz-A153E721.web.vodafone.de) (Connection reset by peer)
[21:27:48] <cmr> intra, jeez
[21:27:50] <mcpherrin> newguy: Work laptop is crepe, home laptop is flapjack
[21:27:51] <arielb1> macro_export makes macros cross-crate
[21:27:52] * cmr sits on his hands
[21:28:01] <mcpherrin> desktop is peameal, which replaced bacon
[21:28:05] <sfackler> yep
[21:28:10] <arielb1> and macro_escape makes them cross-module but global
[21:28:19] <mcpherrin> switch is eggs, roomba is bagel
[21:28:23] <arielb1> even across different files from the same crate?
[21:28:26] <newguy> cool
[21:28:40] <sfackler> arielb1: macro_escape is a bit weird
[21:28:43] <cmr> arielb1: not global afaik, but merely lets it escape up one-level of module.
[21:28:46] <cmr> it is very weird.
[21:28:48] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[21:28:50] <newguy> well, im off. thanks for clearing things up...
[21:28:50] <cmr> it was and continues to be a hack.
[21:28:58] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:28:59] <cmr> is among the reasons macro_rules is feature gated...
[21:28:59] <sfackler> when you define a macro with macro_rules, it will insert it in the lowest crate that *doesn't* have a macro_escape attribute
[21:29:05] <sfackler> it's really bad
[21:29:08] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[21:29:15] *** Quits: newguy (Mibbit@moz-27705653.wireless-pennnet.upenn.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[21:29:17] <arielb1> thats ugly
[21:29:20] <sfackler> yep
[21:29:22] <arielb1> horrible ns pollution
[21:29:39] <sfackler> it's kind of hard because expansion happens before the stages at which "use" declarations are processed
[21:29:55] <cmr> macros aren't namespaced, that's the point.
[21:29:57] <arielb1> is there some compiler structure doc somewhere?
[21:30:10] <cmr> there's some READMEs in librustc
[21:30:52] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[21:30:55] *** Quits: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) (Quit: Savago)
[21:33:07] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[21:34:16] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[21:34:24] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[21:34:40] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[21:34:57] <hdevalence> what are the options for using Rust to write code that needs a GUI?
[21:35:15] <hdevalence> is there a way to connect Rust to, e.g., QML, or something like that?
[21:35:22] <NiccosSystem> about time I installed RustyCage 8)
[21:37:32] *** Quits: doomlord_ (servitor@moz-9B2006BF.range109-151.btcentralplus.com) (Quit: Leaving)
[21:39:15] *** Quits: KindOne (KindOne@moz-D832705E.dynamic.ip.windstream.net) (Ping timeout)
[21:40:44] *** Joins: dualcoding (dualcoding@moz-6BD43586.a370.priv.bahnhof.se)
[21:40:58] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[21:42:59] *** Joins: KindOne (KindOne@moz-FB259627.dynamic.ip.windstream.net)
[21:43:03] *** Joins: deggert (deggert@moz-2C16B246.host.de.colt.net)
[21:44:07] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[21:44:18] *** Quits: gimpf (gimpf@moz-C9F096CE.adsl.highway.telekom.at) (Ping timeout)
[21:45:54] *** Quits: herrwolfe45 (user@CACBD77F.4EBBBE62.C082B7DC.IP) (Quit: ERC Version 5.3 (IRC client for Emacs))
[21:46:21] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[21:46:48] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[21:48:02] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[21:48:28] <k4nar> any thoughts why this code doesn't compile ? https://gist.github.com/k4nar/9009324
[21:49:04] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[21:49:09] *** Quits: twi (Adium@24080336.302FB0FF.54B829D6.IP) (Quit: Leaving.)
[21:49:54] <k4nar> i'm implementing a traits with two differents types, but it seems to conflict
[21:50:02] <k4nar> (i'm using rust 0.9)
[21:50:12] <sfackler> the trait resolve logic has always been a bit buggy, but I didn't think it was that bad
[21:50:21] <Eridius> same error on current master
[21:50:54] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[21:51:05] <eddyb> http://trypepperjs.appspot.com/ hmm, Rust could target this
[21:51:34] <k4nar> sfackler: that's kinda weird isn't it ?
[21:52:18] <sfackler> k4nar: very
[21:52:20] <SiegeLord> Maybe related to this bug I submitted: https://github.com/mozilla/rust/issues/12091
[21:52:31] <SiegeLord> It's probably the same underlying issue somewhere
[21:52:46] <strcat> eddyb: pepper.js isn't something you'd target
[21:52:57] <sfackler> this was the trait resolve issue that I was aware of https://github.com/mozilla/rust/issues/8075
[21:53:00] <strcat> the target is PNaCl and pepper is the fallback for browsers without PNaCl
[21:53:04] <sfackler> but k4nar's seems different
[21:53:05] <strcat> pepper.js *
[21:53:13] <sfackler> and worse
[21:53:19] *** Quits: eddyb (eddy@688E9026.F7C96DA2.FCAAE698.IP) (Ping timeout)
[21:54:11] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[21:55:51] <k4nar> should I open an issue ?
[21:56:25] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[21:56:57] <sfackler> please do
[21:56:58] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:57:04] <k4nar> ok :)
[21:57:11] *** Joins: mouse (mouse@moz-4A3624F.broadband.corbina.ru)
[21:58:41] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[21:59:32] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[22:01:31] <k4nar> ok, I think there is an issue for it there : https://github.com/mozilla/rust/issues/7590
[22:01:35] *** Quits: ghn (grandy@moz-362CDC0.fttp.sta.comporium.net) (Quit: Leaving.)
[22:01:44] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[22:01:50] *** Joins: FrozenCow (FrozenCow@moz-E69F48E.dynamic.upc.nl)
[22:02:46] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[22:03:09] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[22:03:53] *** Quits: wilmoore (wilmoore@moz-1248C037.mystrotv.com) (Ping timeout)
[22:04:52] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[22:05:19] <sfackler> k4nar: you can work around it by introducing an extra trait I think
[22:05:45] <sfackler> e.g. RowIndex here: https://github.com/sfackler/rust-postgres/blob/master/src/lib.rs#L1440
[22:06:42] <k4nar> sfackler: I'm reading http://smallcultfollowing.com/babysteps/blog/2012/10/04/refining-traits-slash-impls/ , the "What if I want overloading" section suggests a workaround too
[22:06:54] <k4nar> but I'll take a look, thanks
[22:07:46] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[22:07:46] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[22:07:47] <sfackler> k4nar: my thing is basically what's in that post
[22:07:54] <k4nar> ok :)
[22:10:25] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[22:10:47] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[22:11:44] <kmc> re PNaCl: you should target asm.js instead ;)
[22:11:52] *** Joins: Hildar (Mibbit@moz-7F4621B6.cable.virginm.net)
[22:12:46] <arielb1> why is rust compilation so slow
[22:12:47] <arielb1> and serial?
[22:12:48] <kmc> asm.js code uses standard Web APIs and runs unmodified in any browser
[22:13:15] <kmc> [P]NaCl code uses "Pepper API" which is Google-controlled and only implemented in Chrome (because it's basically Chrome guts exposed as an API)
[22:13:25] <strcat> kmc: if it needs the asm.js performance then it doesn't run unmodified in any browser
[22:13:37] <strcat> if it doesn't need the asm.js performance, why is it using asm.js?
[22:13:39] <kmc> pepper.js is an attempt to implement some of that on top of web APIs
[22:14:08] <strcat> nacl gives native performance, asm.js is 50% slower without taking into account the lack of 64-bit integers, SIMD, and more
[22:14:28] <strcat> and asm.js doesn't have a way to let you use threads (without giving up the whole 'unmodified in any browser' thing)
[22:14:32] <strcat> no threads in 2014 is a *joke*
[22:14:36] *** Joins: mccr8 (mccr8@moz-BBE3ABD.mv.mozilla.com)
[22:14:54] <arielb1> strcat: tell that to the rust compiler
[22:14:58] <mcpherrin> strcat: if it's a joke, I'm not laughing :P
[22:15:21] <strcat> saying asm.js is compatible with old browsers is very misleading since anything requiring the performance won't work there
[22:15:24] <steveklabnik> arielb1: there hasn't been a lot of effort to optimize
[22:15:33] <kmc> arielb1: it's slow because we emit a ton of code and rely on LLVM to optimize it away
[22:15:35] <strcat> a game using asm.js and actually *needing* asm.js isn't going to run in a browser not able to run it fast
[22:15:38] <arielb1> what does it do that takes so much time and needs to be serial
[22:15:57] <cmr> llvm doesn't need to be serial.
[22:15:57] <kmc> LLVM doesn't do parallel codegen within a single compilation unit / whatever
[22:16:13] <kmc> aiui fixing that would require LLVM hacking, not just Rust frontend hacking
[22:16:29] <strcat> intel implemented parallel optimization for LLVM
[22:16:33] <huon> (intel ha[sd] parallel LLVM patches, didn't get merged)
[22:16:37] <strcat> it wouldn't seriously improve the rust situation
[22:16:46] <strcat> because rust is generating really terrible code split into many functions
[22:16:48] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[22:16:52] <strcat> it's mostly the stdlib's fault, not rustc's
[22:17:00] *** Joins: schnozzle (Mibbit@moz-7F0B15AB.range81-157.btcentralplus.com)
[22:17:07] <strcat> if you don't use the stdlib then rust compiles pretty quickly
[22:17:08] *** Joins: LEOXD (Thunderbir@moz-ECCE2937.dk.customer.tdc.net)
[22:17:20] <arielb1> what kind of problem? C++-style template sprawl?
[22:17:23] <strcat> I think it probably compiles faster than the equivalent C++ now
[22:17:33] <strcat> arielb1: just not designed with code size, performance and compile-time in mind
[22:17:43] <arielb1> but it compiles crate-at-once
[22:17:46] <strcat> and there's not a willingness to make changes to improve those things
[22:17:57] <strcat> arielb1: crates are just rust's compilation unit, you can use as few or as many as you want
[22:18:01] <arielb1> so 1) it isn't parallel 2) you need to recompile on every small change
[22:18:05] *** Joins: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net)
[22:18:22] <strcat> for rust itself (as in the rust compiler), you need to recompile on every small change regardless
[22:18:24] <strcat> due to bootstrapping
[22:18:48] <strcat> splitting into many crates also slows down the total compile time, when you're not doing an incremental build
[22:19:18] <strcat> anywayy
[22:19:26] <strcat> you can certainly write rust code that compiles quickly
[22:19:42] <strcat> and you can write code that doesn't have awful performance at --opt-level=0 and --opt-level=1
[22:19:45] *** Quits: schnozzle (Mibbit@moz-7F0B15AB.range81-157.btcentralplus.com) (Quit: http://www.mibbit.com ajax IRC Client)
[22:19:45] <strcat> you don't have to avoid generics
[22:19:54] <strcat> you just can't use them without careful though, as the stdlib does
[22:20:01] <strcat> careful thought*
[22:20:08] *** Joins: skade (skade@moz-B941E5E5.dip0.t-ipconnect.de)
[22:20:28] <huon> strcat: "there's not a willingness to make changes to improve those things" pcwalton is removing  ~[] from the language
[22:20:41] <strcat> huon: that's not related to this...
[22:21:03] <huon> strcat: in what way? ~[] is much worse than Vec
[22:21:13] <strcat> the current implementation
[22:21:15] <strcat> and... it's not related to what I'm talking about
[22:21:37] <brson> strcat: what are we not willing to improve?
[22:21:55] <strcat> --opt-level=0/--opt-level=1 performance
[22:21:58] <strcat> and code size
[22:22:00] <huon> and anyway, just because the libraries haven't had a lot of detailed work done on them doesn't mean that they never will; it just means there are more important things
[22:22:05] *** Joins: fabiand (fabiand@moz-7B8E9E60.adsl.alicedsl.de)
[22:22:14] <strcat> it really has nothing to do with that
[22:22:16] *** Quits: Rym (Instantbir@E81B972B.6D40ECF1.51C6DE68.IP) (Ping timeout)
[22:22:22] <huon> huh?
[22:22:32] <strcat> it has to do with design, not time
[22:22:37] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[22:22:59] <strcat> rust has chosen not to care about unoptimized performance and compile-time
[22:23:07] <brson> strcat: you are wrong
[22:23:16] <brson> there are tradeoffs
[22:23:17] <strcat> you'd need to actually carefully apply inline(always) (and I do mean *carefully*) and stop using dynamic dispatch everywhere
[22:23:24] <brson> but we care about everything related to rust
[22:23:32] <arielb1> why is dynamic dispatch so evil?
[22:23:33] <strcat> yeah, there are tradeoffs
[22:24:03] *** Quits: kronquii (kronquii@moz-2F636E0B.onid.oregonstate.edu) (Ping timeout)
[22:24:09] <huon> strcat: acrichto reopened an issue about the IO traits stuff just today; I don't see how you can say that no-one cares at all.
[22:24:23] <strcat> and yet again, the solution is 'let LLVM worry about it'
[22:24:27] <strcat> screw fast compile time
[22:25:06] *** Joins: Rym (Instantbir@E81B972B.6D40ECF1.51C6DE68.IP)
[22:25:17] *** Quits: mouse (mouse@moz-4A3624F.broadband.corbina.ru) (Ping timeout)
[22:25:29] <strcat> that's the path chosen for making unwinding optional too
[22:25:53] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[22:26:07] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[22:26:12] <arielb1> does rust have unwinding?
[22:26:16] <strcat> yes
[22:26:17] <huon> do you have a better plan than "no unwinding" and "native runtime only"?
[22:26:18] *** Joins: teosz (teosz@D15A38EC.410E8117.3EA6AAD8.IP)
[22:26:32] <huon> arielb1: caught at task boundaries (i.e. no general try-catch)
[22:26:39] <strcat> allow actually disabling unwinding
[22:26:56] <strcat> rather than just saying LLVM can worry about it, we'll mark everything nounwind retroactively
[22:27:01] <arielb1> isn't it needed only for Rc?
[22:27:05] <cmr> arielb1: ...no
[22:27:07] <arielb1> [real unwinding]
[22:27:09] <cmr> arielb1: any time a task fails.
[22:27:17] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[22:27:17] *** ChanServ sets mode: +o tjc
[22:27:20] <strcat> huon: anyway, don't need 'native runtime only'
[22:27:41] <arielb1> who can place finally blocks?
[22:27:43] *** Quits: mccr8 (mccr8@moz-BBE3ABD.mv.mozilla.com) (Quit: computer sleep)
[22:27:52] <strcat> just don't have dynamic dispatch everywhere
[22:27:54] <arielb1> C++ code?
[22:27:59] <huon> strcat: how do you get a uniform io/task interface in the stdlib otherwise?
[22:28:06] <strcat> huon: can't have a 'uniform' interface
[22:28:12] <strcat> threads have priorities
[22:28:19] <strcat> threads have preemption
[22:28:32] *** Joins: j3parker (j3parker@moz-39DD8B52.convextech.ca)
[22:28:40] <strcat> existing C libraries use threads and rely on thread-local storage
[22:28:47] <strcat> existing C libraries block *everywhere*
[22:29:09] <strcat> how do I set SCHED_FIFO for a rust task?
[22:29:42] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[22:29:51] <arielb1> do you do SCHED_FIFO and malloc in the same thread?
[22:30:09] <strcat> ofc you can have a crippled interface and code bloat everywhere
[22:30:10] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:30:15] <strcat> how about a really complicated trait hierarchy too
[22:30:29] <strcat> leaky abstractions everywhere
[22:30:43] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[22:31:11] <arielb1> I don't think that people use SCHED_FIFO/priorities and stdlib IO at the same time
[22:31:20] *** Joins: mccr8 (mccr8@moz-F6A7B612.dsl.dynamic.sonic.net)
[22:31:26] <arielb1> If you're doing the former you want control over timing
[22:31:32] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[22:31:33] *** Joins: kronquii (kronquii@moz-2F636E0B.onid.oregonstate.edu)
[22:31:50] *** Joins: larsberg (larsberg@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net)
[22:31:52] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[22:31:58] *** Parts: larsberg (larsberg@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net) ()
[22:32:03] <arielb1> You will probably just call syscalls directly
[22:32:21] <strcat> there's no advantage to making syscalls directly
[22:32:45] *** Quits: Ferreus (ferreus@moz-57D49CF4.pools.arcor-ip.net) (Ping timeout)
[22:33:43] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[22:34:24] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Quit: Leaving.)
[22:34:26] <arielb1> stdio may have buffering and other mess
[22:34:43] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[22:34:46] <arielb1> which you can't control
[22:34:49] <strcat> stdio gives you control over buffering
[22:34:55] <strcat> and anyway we're talking about rust, not C's stdlib
[22:35:07] <strcat> (both give you control over buffering though)
[22:35:24] <strcat> and I don't think buffering has much to do with scheduling
[22:35:30] <strcat> you can flush whenever you want anyway
[22:35:49] <strcat> windows has user-mode scheduling so there's no reason to use M:N there
[22:35:49] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:35:56] *** Quits: teosz (teosz@D15A38EC.410E8117.3EA6AAD8.IP) (Quit: Lost terminal)
[22:36:04] <arielb1> It may malloc and lock at the worst time'
[22:36:08] <strcat> it won't perform any better, and loses the ability to context-switch on blocking or page faults
[22:36:10] <arielb1> can't trust it
[22:36:21] <strcat> arielb1: the buffering doesn't malloc
[22:36:37] *** Joins: victorporof (victorporo@8F761026.B5EF4AF6.E96CA9D8.IP)
[22:36:59] <arielb1> stdio doesn't occasionally malloc when it wants to?
[22:37:04] <strcat> I don't think you could have a conformant C implementation with a dynamically sized stdio buffer
[22:37:32] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[22:37:34] <strcat> malloc isn't the end of the world anyway, it can have tight bounds on performance
[22:37:43] <arielb1> it can acquire a lock
[22:37:46] <arielb1> hi priority inversion
[22:37:54] <strcat> allocators don't need to require locking
[22:37:55] *** Quits: Moor (Moor@moz-C04C27D8.hsd1.ca.comcast.net) (Ping timeout)
[22:38:35] <arielb1> even in the worst case?
[22:38:36] <strcat> jemalloc/tcmalloc have thread local pools with tight fragmentation bounds and then fall through to mmap for large allocations
[22:38:36] *** Joins: mankyKitty (Instantbir@325B2C60.E2538F64.BC02889B.IP)
[22:38:43] <strcat> arielb1: the worst case can be tightly bounded
[22:38:54] <strcat> a modern allocator isn't ever O(n)
[22:39:05] <strcat> and the fragmentation is bounded
[22:39:15] <arielb1> another thread won't randomly steal your memory
[22:39:26] <strcat> don't know what you mean by steal
[22:39:35] <strcat> they are thread local pools
[22:39:55] <cmr> wait-free allocators exist.
[22:39:58] <strcat> you could certainly pass memory to another thread and have cacheline contention
[22:39:58] <arielb1> how do they grow
[22:40:04] <strcat> mmap
[22:40:18] <strcat> (soon, vrange, on linux)
[22:41:23] <arielb1> who uses tcmalloc?
[22:41:35] <strcat> google
[22:41:43] <zwarich> and WebKit
[22:41:56] <strcat> facebook and mozilla use jemalloc
[22:41:57] <arielb1> so it's just glibc's malloc with occasional pauses
[22:41:58] <arielb1> and locks
[22:42:09] <strcat> well glibc's allocator is quite terrible
[22:42:18] *** Joins: nszceta (hax@moz-E6CA8D6.hsd1.pa.comcast.net)
[22:42:22] *** Quits: fabiand (fabiand@moz-7B8E9E60.adsl.alicedsl.de) (Quit: Verlassend)
[22:42:25] <zwarich> these thread-caching allocators also tend to hate to return memory to the OS
[22:42:25] <strcat> it scales poorly and fragments memory a lot
[22:42:40] <arielb1> so why it is in glibc?
[22:42:42] <strcat> zwarich: older allocators pretty much never return memory to the OS... they can't
[22:43:05] <strcat> zwarich: they use brk/sbrk so they're only able to free memory from the end of a single large run
[22:43:10] <zwarich> strcat: on Darwin the standard allocator does a pretty good job of returning memory to the OS
[22:43:22] *** Quits: kronquii (kronquii@moz-2F636E0B.onid.oregonstate.edu) (Ping timeout)
[22:43:31] *** Quits: dschatzberg (dschatzber@moz-9384E83C.bu.edu) (Input/output error)
[22:43:36] <strcat> jemalloc/tcmalloc do a good job releasing actual RES to the OS
[22:44:18] <zwarich> TCMalloc does a bad job, WebKit had to hack it up to have better support for returning memory, but maybe it's changed upstream
[22:44:25] *** Joins: kronquii (kronquii@moz-2F636E0B.onid.oregonstate.edu)
[22:44:35] <strcat> tcmalloc definitely doesn't do a bad job
[22:44:37] *** Quits: zihaowang (zihaowang@moz-8BAEDE0A.hsd1.va.comcast.net) (Connection reset by peer)
[22:44:44] <strcat> it didn't used to release memory, ages ago
[22:44:53] <strcat> back when browsers didn't have a JIT...
[22:44:55] *** Joins: zihaowang (zihaowang@moz-8BAEDE0A.hsd1.va.comcast.net)
[22:44:57] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:44:59] * strcat shrugs
[22:45:05] <arielb1> probably glibc gave stdio a reputation of jitterness
[22:45:21] <strcat> I don't think there's anything wrong with glibc's stdio
[22:45:38] <strcat> stdio is a somewhat poor I/O design though
[22:45:51] *** Quits: alexherbo2 (alexherbo2@moz-9AE52DD7.w90-3.abo.wanadoo.fr) (Quit: WeeChat 0.4.3-dev)
[22:45:57] <strcat> there are a lot of hidden costs
[22:46:14] <strcat> there's a doubly-linked list threaded through the file objects
[22:46:29] <arielb1> for flushing?
[22:46:35] <strcat> yes
[22:46:41] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[22:46:51] <strcat> and it uses a lot of locking to satisfy the spec
[22:46:57] <strcat> there are _unlocked functions
[22:47:02] <strcat> but they are mostly not portable
[22:47:06] <strcat> only a few are portable
[22:47:48] *** Joins: Ferreus (ferreus@moz-6AEB72A8.pools.arcor-ip.net)
[22:48:19] <arielb1> so people just call the system calls directly and skip glibc
[22:48:31] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[22:48:49] <strcat> I really doubt people make system calls directly
[22:49:29] <arielb1> I mean call the system calls rather then f*
[22:49:36] <arielb1> not inline syscall instructions
[22:49:39] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[22:50:10] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[22:50:10] *** ChanServ sets mode: +ao pcwalton pcwalton
[22:50:27] <strcat> it's not trivial to correctly do a write via write(), needs to be done in a loop with a byte counter
[22:50:41] <strcat> so it's not really something you'd use directly
[22:50:58] <strcat> you might use a different I/O library than stdio, but I don't think applications are calling read/write directly
[22:51:21] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[22:51:37] <strcat> the annoying bits of stdio are stuff like the ungetc buffer slowing down all reads and needing to use non-portable _unlocked stuff
[22:52:18] *** Quits: astroch (astroch@moz-C18802C0.dhcp.embarqhsd.net) (Ping timeout)
[22:52:37] <arielb1> each app has its own io library
[22:52:48] <arielb1> specialised to its own needs
[22:52:50] *** Quits: Rym (Instantbir@E81B972B.6D40ECF1.51C6DE68.IP) (Ping timeout)
[22:53:40] *** Joins: schubidu25 (schubidu25@moz-92FA7201.superkabel.de)
[22:54:08] *** Joins: arpd (ben@moz-991ADA30.ripe.li)
[22:54:21] <strcat> I don't understand why an application would need a specialized I/O library
[22:54:21] *** Joins: Moor (Moor@moz-C04C27D8.hsd1.ca.comcast.net)
[22:54:22] *** Quits: p1start (rewi@moz-A082F561.adsl.xtra.co.nz) (Ping timeout)
[22:54:40] <o11c> because nobody has gotten I/O right yet
[22:54:54] <Hildar> None exhaustive patterns on an enum defined in another module just warn about "unused variable" instead of compile failing? http://pastebin.com/QV9Cv3kY
[22:55:07] <strcat> o11c: so how is having a specialized I/O library going to help?
[22:55:11] <Hildar> I presume that isn't intended?
[22:55:27] <o11c> by "nobody" I mean "nobody's standard library"
[22:55:36] <strcat> what's an example of an application with a specialized I/O library because 'nobody has gotten I/O right'?
[22:55:41] <cmr> Hildar: `Bar` here isn't the enum variant...
[22:55:44] <cmr> Hildar: it's a variable.
[22:55:49] <o11c> well, I know *I* wrote one
[22:55:55] <strcat> I have never seen a reinvention of I/O in python...
[22:56:12] <cmr> Hildar: either `use modulename::Bar;` or match against `modulename::Bar`
[22:56:14] <cmr> strcat: twisted?
[22:56:15] <o11c> because in python, you don't usually care if you're doing it right
[22:56:31] <o11c> but twisted, and the new python3.4 async thing, *is* a great example
[22:56:40] <strcat> I'm not talking about async I/O
[22:56:49] <cmr> it's still a reinvention..
[22:57:01] <Hildar> cmr: Ohh, that's 'fun'. It still happens if I import Foo, but not Bar (makes sense now).
[22:57:29] <strcat> cmr: it's not
[22:57:38] <cmr> strcat: how is it not? what do you consider a reinvention?
[22:57:56] <strcat> implementing another I/O library
[22:58:11] <cmr> and twisted was not implementing another io library?
[22:58:41] *** Quits: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net) (Ping timeout)
[22:58:43] <arielb1> they wrap
[22:58:46] <strcat> cmr: I'm talking about python's I/O library, not asyncore
[22:58:56] <cmr> ok.
[22:58:58] <arielb1> twisted wrap python's IO
[22:59:00] *** Quits: Moor (Moor@moz-C04C27D8.hsd1.ca.comcast.net) (Ping timeout)
[22:59:13] <kanaka> Is there a way to suppress dead code warnings for a whole crate. I use the same crate in two libraries and they each don't use all the functions defined in the crate?
[22:59:22] <kanaka> ^libraries^programs
[22:59:26] <strcat> anyway nvm
[22:59:33] <strcat> clearly, you can't design a good stdlib and everyone needs to reinvent
[22:59:49] <strcat> so rust should continue having a really poorly performing, bloated stdlib with complex APIs
[22:59:53] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[23:01:19] *** Quits: mark_edward (mark@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Quit: Leaving)
[23:02:14] <sfackler> kanaka: put #[allow(dead_code)]; at the crate root
[23:02:31] <rcxdude> ugh, the long compile time for rustc is gonna completely kill my attempts at playing around with it
[23:03:01] <rcxdude> not the first compile, but a single line change..
[23:03:12] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:03:35] <Diamond> rcxdude: I'm working on a solution to that annoyance 
[23:04:14] <mcpherrin> rcxdude: Part of it comes with the territory of hacking on a bootstrapping compiler...
[23:04:26] *** Parts: mccr8 (mccr8@moz-F6A7B612.dsl.dynamic.sonic.net) ()
[23:04:35] * pcwalton sighs
[23:05:10] *** Quits: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net) (Ping timeout)
[23:05:35] <pcwalton> libgreen outperforms libnative with RUST_THREADS=1 despite being poorly performing, bloated, and with complex APIs
[23:06:05] <Diamond> I wonder how erlang's threading works
[23:06:18] <Diamond> i know it uses green threads
[23:06:25] <pcwalton> Rust's I/O story is fine
[23:06:28] <pcwalton> strcat is being unreasonable
[23:06:40] <pcwalton> IMHO
[23:06:47] *** Quits: eevee (eevee@moz-8DEBFFC9.lv.lv.cox.net) (Ping timeout)
[23:07:05] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: sw17ch)
[23:07:06] <rcxdude> is there a good way to avoid the bootstrapping or otherwise speed up the iteration for changes?
[23:07:12] <cmr> rcxdude: don't build it all.
[23:07:24] *** Quits: pilf (pilf@44BF5D7D.B6A69891.5411983D.IP) (Quit: pilf)
[23:07:26] <cmr> rcxdude: make stage1-rustc
[23:07:29] <cmr> etc
[23:07:34] <rcxdude> cool, thanks
[23:07:41] <sp3d> it seemed unsatisfying when I heard that every IO call would have to do dynamic dispatch to disambiguate between runtimes
[23:07:42] *** Joins: p1start (rewi@moz-A082F561.adsl.xtra.co.nz)
[23:07:50] <pcwalton> sp3d: the overhead is negligible
[23:07:57] <sp3d> but I would expect that would be completely dominated by syscall overhead, yeah
[23:08:03] <rcxdude> dynamic dispatch is *way* cheaper than IO
[23:08:21] <pcwalton> I don't think we should think of it as two runtimes
[23:08:25] <sp3d> I think strcat's point is that it causes problems because it breaks inlining paths that /would/ be significant
[23:08:28] <pcwalton> I think that's making the design seem muddled
[23:08:35] <pcwalton> it doesn't cause problems
[23:08:39] <sp3d> but I don't know how big of a perf change that would be
[23:08:51] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:08:53] <pcwalton> I think that we should think of native threads as the basis
[23:09:02] <pcwalton> and green threads ("fibers"?) built on top
[23:09:15] <strcat> pcwalton: the code size and compile-time increase isn't negligible
[23:09:22] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[23:09:23] <pcwalton> it's all fixable
[23:09:24] <strcat> pcwalton: fibers don't need to be in libstd then
[23:09:28] *** Quits: wilkie (wilkie@moz-A19F104D.pitbpa.fios.verizon.net) (Ping timeout)
[23:09:30] <pcwalton> libstd need supports for them
[23:09:38] <pcwalton> if we want to have them at all
[23:09:38] *** Joins: eevee (eevee@moz-8DEBFFC9.lv.lv.cox.net)
[23:09:40] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[23:09:43] <pcwalton> they are already out of libstd and into libgreen
[23:09:46] <strcat> it doesn't need support for them on windows
[23:09:53] <pcwalton> yes it does if we want to use IOCP
[23:10:09] <pcwalton> we've talked about having a libiocp that arbitrates between threads
[23:10:22] <pcwalton> in lieu of libuv on windows
[23:10:24] <strcat> I don't think there's a point of using IOCP for tasks
[23:10:38] <pcwalton> I think there is because it makes task spawning much cheaper
[23:10:44] <strcat> user-mode scheduling lets you context-switch on blocking I/O
[23:10:59] <pcwalton> we have not measured any of this
[23:11:32] <strcat> anyway I wasn't talking about libgreen
[23:11:38] <strcat> I was talking about generic code
[23:11:46] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Ping timeout)
[23:12:05] <Matthias247> what does IOCP have to do with (green) threads?!?
[23:12:07] <strcat> as in stuff like TotalOrd existing
[23:12:14] <strcat> which I regret adding
[23:12:15] <pcwalton> that was there because you put it there
[23:12:32] <strcat> yeah and now I will never convince anyone it should be removed :(
[23:12:33] *** Quits: exobit_ (textual@moz-E06F46F0.corp.bitshelter.com) (Quit: )
[23:12:39] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[23:12:41] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[23:12:50] <strcat> it'd be so much easier to just use the IEEE754 total ordering for floats
[23:13:03] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[23:13:05] <strcat> and have the partial ordering done via other methods
[23:13:07] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[23:13:10] <pcwalton> there's little disagreement that the TotalEq/TotalOrd situation is not ideal
[23:13:15] <pcwalton> I am completely open to a fix
[23:13:19] <brson> strcat: this is something you could easily fix
[23:13:32] <huon> strcat: huh? lots of people agree that TotalOrd should be removed... have you missed all the comments on the issue??
[23:13:49] <strcat> most of the conversation hasn't been on the issue
[23:13:52] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[23:13:59] <strcat> I don't think there's consensus to change Eq/Ord to total ordering
[23:14:01] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[23:14:32] <strcat> anyway I'm not having a great day so that's why I'm frustrated about it ;\
[23:14:48] <huon> there's not a consensus, but you have convinced some people.
[23:15:44] <strcat> sure, but I have a hundred little issues like this in the stdlib that bother me
[23:15:44] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[23:16:08] <strcat> and yeah, I can go on and on about one for months and eventually there is consensus to change it
[23:16:23] <strcat> but atm I really dislike most of the APIs
[23:16:23] *** Quits: mankyKitty (Instantbir@325B2C60.E2538F64.BC02889B.IP) (Quit: mankyKitty)
[23:16:51] <acrichto> strcat: complaining about them all at once is a terrible way to change the state of the world, fixing them one by one is a great way to make it better
[23:17:10] <strcat> I can't fix them though, I could make a PR for each thing but it wouldn't be accepted
[23:17:27] <acrichto> that's a false assertion with not data to back it up
[23:17:41] <strcat> it's not a false assertion
[23:17:52] <strcat> I've had lots of disagreements with how things were done where I 'lost'
[23:18:10] <strcat> and for some I put work into them
[23:18:16] <acrichto> that does not mean that we reject all PRs, it means that perhaps you are not right 100% of the time in the eyes of everyone else
[23:18:26] <strcat> didn't say all pull requests are rejected
[23:18:43] <strcat> just that changing existing APIs in the stdlib without making sure there is consensus first is not something I think will fly
[23:19:02] <strcat> so instead I opened a few issues and waited
[23:19:02] *** Quits: vmx (vmx@moz-A1DFD5B1.pools.arcor-ip.net) (Quit: Leaving)
[23:19:08] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[23:19:19] <acrichto> that is indeed correct, changing everything without consensus is generally a bad idea
[23:19:24] *** Joins: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com)
[23:20:48] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[23:22:07] *** Quits: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com) (Ping timeout)
[23:22:09] *** Joins: wilkie (wilkie@moz-A19F104D.pitbpa.fios.verizon.net)
[23:25:33] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[23:25:55] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[23:26:06] <strcat> cmp is a nice thing to concentrate on because it's simple and I think the right answer is pretty clear
[23:26:26] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[23:26:30] <strcat> saying I think strings need to be completely thrown out as they are now, or that we should remove all the numeric traits used for floats is not as easy to push for
[23:27:07] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[23:28:37] *** Joins: Moor (Moor@moz-C04C27D8.hsd1.ca.comcast.net)
[23:29:06] <Diamond> is Gc<> usable yet?
[23:29:12] *** Joins: kvanb (kvanb@moz-6CE11EED.lnse2.win.bigpond.net.au)
[23:29:15] <cmr> Diamond: compared to what?
[23:29:17] <strcat> it's usable, it's not really useful yet
[23:29:24] *** Quits: FrozenCow (FrozenCow@moz-E69F48E.dynamic.upc.nl) (Client exited)
[23:29:26] <FreeFull> Haskell's Ord and Eq don't agree for Float and Double
[23:29:30] <Diamond> over using @
[23:29:31] <strcat> need a tracing gc implemented before it has a use case
[23:29:39] <FreeFull> compare NaN NaN returns Eq
[23:29:48] <FreeFull> EQ*
[23:30:00] <strcat> I don't think we should do what haskell does for floats
[23:30:07] <Diamond> hm actually nvm
[23:30:13] <strcat> I think we should do what SML does
[23:30:18] <strcat> but then implement the total ordering predicate
[23:30:23] <strcat> it's really easy to implement
[23:30:39] <strcat> for equality I think you just do a bitwise comparison
[23:31:02] <strcat> only thing I'm unsure about is which order it's supposed to use for NaNs
[23:31:19] <strcat> but LLVM doesn't support signalling NaN anyway
[23:31:51] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:31:56] <strcat> it sure would be nice if you didn't have to buy the standard
[23:32:05] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:32:53] <cmr> yeah
[23:32:56] <cmr> :|
[23:33:13] <cmr> what's even the point of selling them..
[23:33:28] <strcat> to fund the development of new standards I guess, at least if you don't take a cynical view
[23:34:07] <strcat> for C they at least have the drafts which they barely changed
[23:34:15] <strcat> and POSIX is available
[23:34:36] *** Joins: mawuli (mawuli@moz-5ADAB167.com.gh)
[23:34:40] <strcat> LLVM barely allows any IEEE754 support anyway ;\
[23:34:42] *** Quits: schubidu25 (schubidu25@moz-92FA7201.superkabel.de) (Quit: Leaving...)
[23:34:53] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[23:35:37] <strcat> technically we have to supply our own math library for well-defined behaviour since we use LLVM intrinsics too
[23:35:57] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:35:58] <strcat> but it's the kind of UB that I doubt anyone will run into
[23:36:04] <strcat> it exists though
[23:36:14] <strcat> LLVM floating point intrinsics assume errno isn't set
[23:36:18] <strcat> but with glibc it can be set
[23:36:40] <strcat> and in a really contrived case it might reorder one in between a call setting errno and an errno check
[23:37:06] <cmr> contrived indeed.
[23:38:21] <strcat> I would say that we should have a single floating point trait for abstracting across IEEE float sizes
[23:38:35] <strcat> and it should have special comparison methods
[23:38:41] <strcat> for the traditional way
[23:38:53] *** Joins: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com)
[23:38:56] <strcat> with Eq/Ord as total ordering (including float impls) along with the built-in operators
[23:38:56] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[23:39:30] *** Quits: KindOne (KindOne@moz-FB259627.dynamic.ip.windstream.net) (Ping timeout)
[23:39:31] *** Joins: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net)
[23:39:40] <strcat> putting requirements on Add/Mul/Div is pretty hopeless
[23:40:37] <huon> requirements like associativity/commutivity?
[23:41:06] <strcat> yes
[23:41:17] <huon> ChrisMorgan: https://github.com/mozilla/rust/pull/12271 r the vim stuff?
[23:41:20] <strcat> I don't think that'd ever turn out well
[23:41:40] *** Quits: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com) (Ping timeout)
[23:42:03] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:43:35] <strcat> but it does mean they are not incredibly useful
[23:43:37] *** Joins: engla (engla@moz-F64E1B0F.cust.bredbandsbolaget.se)
[23:43:42] <strcat> I think you'd need something else in a numeric lib
[23:43:50] <cmr> thus num-rs
[23:43:53] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[23:44:03] *** Joins: KindOne (KindOne@moz-20684B0D.dynamic.ip.windstream.net)
[23:44:03] <strcat> it'd have to define a new Add trait, etc. though
[23:44:12] <cmr> sure
[23:44:43] <cmr> I don't think much can be usefully generic over Add, especially what people want to be using it for
[23:44:57] <strcat> we actually require a proper Eq/Ord all over the stdlib so I think it makes sense to follow SML's way
[23:45:01] <cmr> or the rest of the operators (mixing matrices and vectors and what have you)
[23:45:30] <SiegeLord> It works ok for now :P
[23:45:41] <SiegeLord> Since nobody tried to put math into them yet
[23:45:56] *** Quits: arielb1 (arielb1@moz-CB7488B7.red.bezeqint.net) (Ping timeout)
[23:45:56] *** Quits: iDolfHatler (idolf@moz-47812C15.static.bcbnet.dk) (Ping timeout)
[23:46:14] <strcat> would also mean changing how floats work in patterns
[23:46:21] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[23:46:32] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[23:47:28] <rcxdude> what's the thought on extra operators like element-wise operations vs matrix multiply for matrices/vectors?
[23:47:37] <SiegeLord> I don't think I'll ever be able to use num-rs in my matrix library, it's just not designed for real code, imo
[23:47:40] <rcxdude> It seems like it would be difficult to add generically
[23:48:02] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[23:48:15] *** Quits: skade (skade@moz-B941E5E5.dip0.t-ipconnect.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:48:18] <strcat> I don't think we should add more operators to the language
[23:48:26] <SiegeLord> I'm overloading operators for elementwise operations, and will have a method for matrix multiplication
[23:48:32] <SiegeLord> Kind of like numpy does it
[23:48:35] <strcat> and I don't really think rust is the right language for user-defined operators
[23:49:08] <strcat> infix call syntax might be nice but method call syntax is already pretty close
[23:49:30] *** zz_kimundi is now known as kimundi
[23:49:54] <rcxdude> it's the kind of thing I really miss from MATLAB, as horrible as it is otherwise
[23:49:58] *** Quits: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP) (Quit: Leaving...)
[23:50:12] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[23:50:18] <strcat> haskell has user-defined operators
[23:50:36] <strcat> can make arbitrary punctuation squiggles with arbitrary associativity/precedence
[23:50:52] <strcat> and it gets abused a lot ;p
[23:50:59] <tjc> and end up just parenthesizing everything anyway because you can never remember the precedence :-D
[23:51:00] *** eatkinson-away is now known as eatkinson
[23:51:04] *** Quits: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com) (Ping timeout)
[23:51:04] <tjc> or maybe I'm the only person who has that problem in Haskell
[23:51:09] <kmc> Haskell only has infix but Agda has arbitrary mixfix :)
[23:51:19] <kmc> you can define a function named if_then_else_ and call it as "if x then y else z"
[23:51:22] <tjc> it's important to have enough rope
[23:51:53] <benh> tjc: user-defined operators with weird precedence let you make lots of $ $ $ in haskell though!
[23:51:54] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[23:52:19] <cmr> hahah
[23:52:43] <SiegeLord> rcxdude: I'm trying to see how much MATLAB I can stick into my library... I also miss nice vector/matrix ops in languages
[23:53:47] <carter> SiegeLord: wheres the lib?
[23:53:49] <SiegeLord> Although again, I find numpy's API better
[23:53:58] <SiegeLord> carter: It's the same one I showed you before
[23:54:02] *** Quits: zihaowang (zihaowang@moz-8BAEDE0A.hsd1.va.comcast.net) (Ping timeout)
[23:54:04] <carter> whats the URL again?
[23:54:08] <carter> has anything changed?
[23:54:15] <SiegeLord> https://github.com/SiegeLord/RustAlgebloat
[23:54:26] <SiegeLord> Well, I added a few more things... busy with stuff and stuff
[23:54:46] *** Joins: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com)
[23:55:55] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[23:56:06] <strcat> SiegeLord: are you really able to cause bad error messages?
[23:56:19] <strcat> I'd expect that you'd just have horrific function signatures
[23:56:34] <SiegeLord> It's no worse than you get with iterators
[23:56:34] *** Joins: zihaowang (zihaowang@moz-8BAEDE0A.hsd1.va.comcast.net)
[23:56:38] <SiegeLord> The LHS type tends to get scary
[23:56:53] <carter> some of your API could be made super pretty once GADTs get rustified
[23:57:03] *** Quits: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com) (Ping timeout)
[23:57:08] <strcat> if they do ;p
[23:57:15] <carter> well
[23:57:18] <carter> they should
[23:57:26] * strcat doesn't think it's clear cut that we'll get GADTs and HKTs
[23:57:36] <carter> then you can't have nice things
[23:57:45] <carter> those two features have an amazing power weight ratio
[23:57:59] <carter> :P
[23:58:04] <strcat> but taking advantage of it means more complex stdlib APIs
[23:58:06] <carter> i'm being hyperbolic a wee bit
[23:58:10] <carter> strcat: nah
[23:58:18] <carter> they need not be used in the stdlib
[23:58:22] <carter> but
[23:58:29] <strcat> but then you'll have a hard time justifying adding them ;p
[23:58:32] <carter> well
[23:58:34] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[23:58:36] <carter> strcat: heres the thing
[23:58:54] <carter> those two features, when used well, *reduce* lib complexity
[23:59:16] <carter> a bad API is a bad api
[23:59:34] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[23:59:39] <carter> and they're features that are very hard to misues to write wrong code
[23:59:47] <strcat> if rust gets associated constants, associated types, integers as type parameters, single inheritance for structs, GADTs, HKTs, enum refinement, [...] then it's going to be pretty complex
[23:59:48] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
