[00:01:31] <Jeaye> strcat: That's how boost felt before C++11. :P
[00:01:52] <strcat> and now a million strace -f to get the minimum set of syscalls
[00:01:54] <strcat> ;p
[00:01:56] <benh> IF ONLY we had variadic templates!!!
[00:01:57] <strcat> [pid 32051] --- SIGSYS {si_signo=SIGSYS, si_code=0x1, si_pid=31652999, si_uid=32654, si_value={int=28, ptr=0xc000003e0000001c}} ---
[00:01:59] <strcat> yay
[00:02:03] <strcat> benh: wouldn't help me :)
[00:02:09] <strcat> the C library can't be wrapped sanely
[00:02:48] *** Quits: eholk (eholk@moz-F8E3901F.uconnect.utah.edu) (Quit: eholk)
[00:03:11] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Quit: tikue)
[00:03:15] <strcat> it works!
[00:03:26] <strcat> http://ix.io/61x ;)
[00:03:44] <strcat> I need to generate per-arch tables of syscall constants now
[00:03:59] <strcat> + figure out a way to deal with varargs... ;p
[00:04:03] <flu_> just found mention of Option<T> with Some and None... Rust love++
[00:04:53] <benh> After the adjustment period I don't think I can go back to Maybe/Just/Nothing again, rust's names are clearly superior
[00:05:08] <aatch> hmm, why would repeat count ever be < 0
[00:05:10] <aatch> ?
[00:05:18] <flu_> benh: Scala made the same choice vs Haskell's names
[00:05:30] <strcat> flu_: well and ocaml/ml/boost
[00:05:36] <bjz> benh: ML ftw
[00:05:49] <bjz> wasn't it from ML/SML?
[00:05:55] <benh> (i'd seen them in the context of *ml before but no idea where specifically)
[00:05:58] <aatch> Because the eval_repeat_count function seems to think casting to a uint is fine.
[00:06:04] <strcat> benh: type theory calls them option types.
[00:06:50] *** Joins: eholk (eholk@moz-F8E3901F.uconnect.utah.edu)
[00:08:57] <bjz> strcat: but then we call ADTs enums, so we can't claim to be termonologically correct all the time :)
[00:09:01] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[00:09:57] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[00:10:18] * pcwalton would have called them variants, but Brendan broke the tie in favor of enum :)
[00:10:42] <benh> enum is the shorter keyword anyway
[00:10:49] <pcwalton> and it makes a nice dual of "struct"
[00:11:05] <pcwalton> the primitive kinds of data in Rust are structs and enums
[00:11:08] <bjz> at then endo of the day it's just a name
[00:11:11] <pcwalton> which is kind of a nice distillation of C
[00:11:13] <bjz> :)
[00:11:14] *** Quits: \n (NDesaulnie@43CB6079.66715431.D25A875A.IP) (Ping timeout)
[00:11:15] <bjz> aye
[00:11:43] * aatch should file bug related to enums and #[fast_ffi]
[00:11:54] <aatch> seems to think that they shoud be pointers...
[00:11:59] <pcwalton> I think niko had a bunch of fixes to fast_ffi
[00:12:03] <pcwalton> dunno if they landed.
[00:12:47] *** Joins: \n (NDesaulnie@2557E599.66715431.D25A875A.IP)
[00:13:01] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[00:13:10] <strcat> pcwalton: any idea if there's a way to run code in the main scheduler thread?
[00:13:37] <xenocons> impl<'self> Reader for BytesReader<'self>, and file_reader takes &Path and returns Result<@Reader, ~str> following that logic i should be able to glue the two functions together like so: io::file_reader(path).read_whole_stream(); right?
[00:13:37] <pcwalton> strcat: use the PlatformThread task::spawn option
[00:13:53] <strcat> pcwalton: ah, perfect
[00:13:56] <strcat> I think that'll work
[00:13:58] *** Joins: yardena (yardena@moz-A95F12B1.members.linode.com)
[00:14:09] <strcat> problem is that right now it sandboxes a thread (not useful) instead of the process
[00:14:12] <benh> what X and Y called in enum E {X(int), Y{field:~str}}? I've heard "variants", is "constructors" the correct term?
[00:14:36] <toddaaro> http://research.google.com/pubs/author39484.html - haskell event manager paper
[00:14:38] <pcwalton> variants
[00:14:40] <pcwalton> is what I call them
[00:14:43] <strcat> benh: haskell calls them type constructors
[00:14:55] <bblum> i call them "arms"
[00:15:25] <flu_> +1 for arms - heheh
[00:15:32] *** Joins: alisdair (textual@E1CEBB1A.D061F0C9.AA6AEE7B.IP)
[00:15:51] *** Quits: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com) (Client exited)
[00:16:18] <bblum> mind you, i will call them variants when trying to be more professional
[00:17:01] <xenocons> we need a 'Roogle' for rust, like hoogle for haskell
[00:17:08] <strcat> nice, it got killed trying to exit
[00:17:09] <bstrie> we had a rustle
[00:17:10] <xenocons> so we can drop in a type signature and get backa list of functions :)
[00:17:10] <strcat> :)
[00:17:14] <\n> or Google for Go
[00:17:28] <bstrie> rustle was for like version 0.3 though
[00:17:30] <bstrie> probably never got updated
[00:17:30] <strcat> pcwalton: I guess it's guaranteed to block the main thread?
[00:17:31] <xenocons> heh
[00:17:39] <pcwalton> strcat: yup
[00:17:39] <strcat> pcwalton: until it yields or finishes
[00:17:43] <strcat> pcwalton: ok perfect
[00:17:47] <pcwalton> it's good for OpenGL
[00:17:49] <pcwalton> servo uses it
[00:17:52] <xenocons> i want @rutle: &Path -> @Reader
[00:17:53] <pcwalton> sprocketnes too
[00:18:03] <xenocons> i want @rutle: &Path -> @Reader -> ~[u8]
[00:18:06] <strcat> pcwalton: works for making a sandbox :)
[00:19:56] <strcat> I guess libuv needs to be used to fork
[00:21:01] *** Quits: koomi (koomi@moz-CBF7646B.pools.arcor-ip.net) (Ping timeout)
[00:21:04] *** Quits: eschweic (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[00:21:35] *** Quits: alisdair (textual@E1CEBB1A.D061F0C9.AA6AEE7B.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[00:22:14] <strcat> cmr: heh, it turns out libseccomp already has this:
[00:22:22] *** Joins: SimonSapin (simon@5924A8D9.7F79A810.4065847B.IP)
[00:22:22] <strcat> int seccomp_syscall_resolve_name(const char *name);
[00:23:41] <strcat> uses a linear search ;p
[00:24:21] <xenocons> rusti: let p : ~[uint] = ~[]; vec::push(p,1); p
[00:24:24] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/LGag
[00:24:42] <flu_> what a polite bot!
[00:25:04] <strcat> rusti: botsnack
[00:25:05] -rusti- "nom nom"
[00:25:07] * xenocons scratches head
[00:25:22] <strcat> xenocons: std::vec
[00:25:31] <xenocons> ahh
[00:25:37] <xenocons> rusti: let p : ~[uint] = ~[]; std:;vec::push(p,1); p
[00:25:38] -rusti- <anon>:10:35: 10:36 error: expected `;` or `}` after expression but found `:`
[00:25:38] -rusti- <anon>:10          let p : ~[uint] = ~[]; std:;vec::push(p,1); p
[00:25:38] -rusti-                                              ^
[00:25:38] -rusti- application terminated with error code 101
[00:25:45] <xenocons> rusti: let p : ~[uint] = ~[]; std::vec::push(p,1); p
[00:25:47] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/IgFM
[00:25:48] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[00:25:49] <xenocons> typing skills suck
[00:25:53] *** Quits: yardena (yardena@moz-A95F12B1.members.linode.com) (Quit: yardena)
[00:28:35] <flu_> 'let mut p: ~[uint] = ~[];' ?
[00:30:24] *** Quits: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk) (Connection reset by peer)
[00:31:57] * aatch is glad that he uses the read-only path for the upstream repo
[00:33:03] *** Joins: yardena (yardena@moz-A95F12B1.members.linode.com)
[00:33:22] <strcat> hm
[00:33:50] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[00:33:51] <jmgrosen> i can listen and accept a connection, but can't read anything
[00:34:13] *** Quits: dforsyth (dforsyth@AC76BBB4.5FDB5121.EE6E63A5.IP) (Ping timeout)
[00:34:13] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Connection reset by peer)
[00:34:33] <strcat> I don't really understand where we get these syscalls from...
[00:34:36] <strcat> [pid  1306] open("/proc/sys/vm/overcommit_memory", O_RDONLY|O_CLOEXEC <unfinished ...>
[00:34:52] <Jesse> O_RLY
[00:35:18] <strcat> I guess the allocator is doing it.
[00:35:35] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[00:35:39] *** Quits: SimonSapin (simon@5924A8D9.7F79A810.4065847B.IP) (Quit: Leaving.)
[00:35:44] * flu_ thinks, "hey it might be worthwhile to make rust bindings for zeromq...", googles, finds rust-zmq on github
[00:35:58] <strcat> ah, it's probably to check if it should use MADV_DONTNEED or munmap
[00:36:28] *** Joins: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk)
[00:37:01] <aatch> flu_, rust-zmq may need modernizing though
[00:37:16] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[00:37:24] *** Joins: tikue (tkuehn@2557E599.66715431.D25A875A.IP)
[00:37:24] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Connection reset by peer)
[00:37:25] <xenocons> let mut p : ~[uint] = ~[]; std::vec::push(p,1); Dp
[00:37:56] <flu_> aatch: should be able to test drive it tonight
[00:38:31] <aatch> flu_, more just advance warning. So when you likely get hundreds of errors, you know why.
[00:38:37] <flu_> lolol
[00:40:26] <xenocons> rusti: let mut p : ~[uint] = ~[]; std::vec::push(p,1); p
[00:40:28] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/VIOe
[00:41:08] *** Quits: pragmatic (pragmatic@moz-1A421840.hsd1.ca.comcast.net) (Ping timeout)
[00:41:08] *** Quits: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[00:41:24] <aatch> strcat, ty
[00:41:47] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[00:41:54] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[00:42:40] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Connection reset by peer)
[00:43:09] *** Quits: eholk (eholk@moz-F8E3901F.uconnect.utah.edu) (Quit: eholk)
[00:43:31] *** Joins: SimonSapin (simon@5924A8D9.7F79A810.4065847B.IP)
[00:45:51] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[00:46:02] <xenocons> alright, i cant work it out heh
[00:46:03] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Connection reset by peer)
[00:48:01] *** Joins: wuwei`lab (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[00:48:34] <xenocons> rusti: let p : ~[uint] = ~[]; std::vec::push(~p,1u); 
[00:48:35] -rusti- ()
[00:48:40] *** Joins: ghrust (ghrust@C621748.6A2AE50.F3114085.IP)
[00:48:41] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/3eIVwg
[00:48:41] *** Parts: ghrust (ghrust@C621748.6A2AE50.F3114085.IP) ()
[00:48:42] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[00:48:57] <aatch> rusti: let p : ~[uint] = ~[]; std::vec::push(~p,1u); p
[00:48:58] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Connection reset by peer)
[00:48:59] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/YhDd
[00:49:03] <strcat> xenocons: those free functions are deprecated though, should use the method
[00:49:16] <xenocons> strcat: 'method'?
[00:49:28] <strcat> p.push(1)
[00:49:35] <aatch> rusti: let p : ~[uint] = ~[]; std::vec::push(p,1u); p
[00:49:36] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/ZIJV
[00:49:52] <Jeaye> Rust defines a method as a member function with an invoking object, xenocons 
[00:49:52] <xenocons> ah
[00:49:55] <aatch> rusti: let mut p : ~[uint] = ~[]; std::vec::push(p,1u); p
[00:49:56] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/VENS
[00:50:00] <Jeaye> Like Java
[00:50:14] <aatch> rusti: let mut p : ~[uint] = ~[]; std::vec::push(&mut p,1u); p
[00:50:14] <xenocons> rusti: let mut p : ~[uint] = ~[]; p.push(1u); p
[00:50:16] -rusti- ~[1]
[00:50:16] -rusti- ~[1]
[00:50:27] <xenocons> aatch: interesting
[00:50:31] <xenocons> Jeaye: gross :P
[00:50:32] <aatch> bah, I misread the signature the first time
[00:50:45] <aatch> it wants mutable pointer to the vector itself.
[00:50:59] <aatch> not a mutable slice
[00:51:02] <strcat> like ocaml* ;p, then
[00:51:09] *** Joins: pragmatic (pragmatic@moz-1A421840.hsd1.ca.comcast.net)
[00:51:10] <aatch> since you can't extend a mutable slice
[00:51:20] <xenocons> lets think of it as 'types have corresponding functions' ;)
[00:51:26] *** Quits: \n (NDesaulnie@2557E599.66715431.D25A875A.IP) (Ping timeout)
[00:51:35] <xenocons> yeah i think i get the concept mostly
[00:51:37] <strcat> xenocons: yeah they're just associated functions with sugar for calling them
[00:51:41] *** Joins: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP)
[00:51:41] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/D_F3bw
[00:51:41] *** Parts: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP) ()
[00:51:41] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[00:51:41] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/Tr387g
[00:51:41] <ghrust> 13rust/06auto 14f702b90 15Brian Anderson: mk: Fix _RUST_STAGEX variables under cross compile. Fix incoming
[00:51:41] <ghrust> 13rust/06auto 14f2e6c01 15bors: auto merge of #6984 : brson/rust/rtcross, r=brson
[00:51:42] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[00:51:44] <xenocons> ive always disliked it beceause it breaks composition
[00:51:51] <xenocons> but with 'traits' that should be removed slightly
[00:51:59] <strcat> xenocons: any function can be a method on the type of the first parameter, it's essentially just sugar
[00:52:16] <xenocons> right
[00:52:18] <strcat> xenocons: eventually they'll be usable *as* functions like T::method(t, 2)
[00:52:27] <xenocons> ahhh nice
[00:52:28] <xenocons> thats good
[00:52:29] *** Joins: dforsyth (dforsyth@AC76BBB4.5FDB5121.EE6E63A5.IP)
[00:52:39] *** Joins: \n (NDesaulnie@43CB6079.66715431.D25A875A.IP)
[00:52:45] <xenocons> this . function access stuff really annoys me in ocaml and F#
[00:53:01] <xenocons> you need to know the type of 'data' you are operating on to write functions
[00:53:21] <xenocons> type classes (traits) is the nicest approach i know to solve this though
[00:53:23] <Jeaye> Do function types have to be @? Seems so.
[00:53:32] <bblum> no
[00:53:37] <strcat> Jeaye: no they can be &fn or ~fn
[00:53:42] <strcat> or 'extern fn' if they lack an env
[00:53:46] <strcat> as in, not a closure
[00:53:50] <Jeaye> Ohh
[00:54:08] *** Joins: MaikKlein (maik@moz-F9B59FC9.dip0.t-ipconnect.de)
[00:54:11] <strcat> extern "Rust" fn maybe, I forget if the default if C or Rust
[00:54:18] *** Quits: vosen (vosen@moz-266BA656.icpnet.pl) (Quit: Leaving)
[00:54:43] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[00:54:46] <xenocons> my god my rust compiles 
[00:54:59] <flu_> My God of Rust
[00:54:59] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Connection reset by peer)
[00:55:03] <flu_> who art iron oxide
[00:55:07] <xenocons> hahaha
[00:55:10] <Jeaye> strcat: Default is Rust
[00:57:38] <xenocons> hmm
[00:57:38] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[00:58:33] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Connection reset by peer)
[00:58:55] <xenocons> Rust doc needs a 'back to index' button heh
[01:00:22] <xenocons> so .get works on Result, i see how this work
[01:00:23] *** Joins: \n_ (NDesaulnie@2557E599.66715431.D25A875A.IP)
[01:00:23] <xenocons> s
[01:00:26] *** Quits: dherman (dherman@2557E599.66715431.D25A875A.IP) (Quit: dherman)
[01:00:30] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[01:00:50] *** Quits: \n (NDesaulnie@43CB6079.66715431.D25A875A.IP) (Ping timeout)
[01:00:50] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Connection reset by peer)
[01:00:50] *** \n_ is now known as \n
[01:03:35] *** Quits: \n (NDesaulnie@2557E599.66715431.D25A875A.IP) (Quit: \n)
[01:03:39] *** Quits: sankha93 (Instantbir@3A62547A.1F4087EF.8B6C1D65.IP) (Ping timeout)
[01:03:46] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[01:03:51] *** Joins: joebobjoe (joebobjoe@55F2E07A.7F841963.2213276E.IP)
[01:04:09] <jensnockert> bjz: Did you mention me before?
[01:04:10] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Connection reset by peer)
[01:04:10] <xenocons> rusti: core::path::from_str("test");
[01:04:11] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/KRPK
[01:04:33] <xenocons> rusti: core::Path::from_str("test");
[01:04:35] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/bJDG
[01:04:48] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ChatZilla 0.9.90-rdmsoft [XULRunner 18.0.2/20130201065344])
[01:04:59] <Jeaye> rusti: std::Path::from_str("test");
[01:05:06] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/ObGi
[01:05:25] <xenocons> http://static.rust-lang.org/doc/0.6/core/path.html
[01:05:57] <Jeaye> xenocons: Core no longer exists.
[01:06:06] <xenocons> ah right
[01:06:12] <xenocons> i saw something about this on the mailing list
[01:06:28] <Jeaye> rusti: std::io::Path::from_str("test");
[01:06:30] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/QUTR
[01:06:48] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[01:06:57] <xenocons> elusive
[01:07:19] <cmr> brson: What's the jemalloc failure on windows? If it was try, try-win is broken iirc
[01:07:19] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Connection reset by peer)
[01:07:19] <xenocons> rusti: std::os::Path::from_str("test");
[01:07:21] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/NfcQ
[01:07:38] <Jeaye> rusti: Path("test");
[01:07:39] -rusti- ()
[01:07:41] <joebobjoe> This channel is being monitored by the NSA.
[01:07:46] <Jeaye> rusti: Path("test")
[01:07:46] *** Joins: sankha93 (Instantbir@1B648967.65B4E0A8.8B6C1D65.IP)
[01:07:47] -rusti- {is_absolute: false, components: ~[~"test"]}
[01:08:12] <Jeaye> xenocons: When in doubt, don't try so hard. :P
[01:08:14] <xenocons> Jeaye: god damnit
[01:08:15] <xenocons> hahaha
[01:09:12] *** Quits: yardena (yardena@moz-A95F12B1.members.linode.com) (Quit: yardena)
[01:10:54] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[01:11:45] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Connection reset by peer)
[01:11:45] <brson> cmr: I had to go poke at the try-win bot, but it's succeeded now. just doing one last test on mac
[01:12:33] <brson> the time to build rustc got worse on mac, but I am doing it on a bot, so maybe other builds are messing up my timing
[01:12:46] *** Quits: MaikKlein (maik@moz-F9B59FC9.dip0.t-ipconnect.de) (Ping timeout)
[01:13:56] <brson> ugh, I'm going to r+ it. tired of this
[01:13:59] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[01:14:09] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[01:14:20] *** Joins: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net)
[01:14:20] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Connection reset by peer)
[01:15:29] *** Joins: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP)
[01:16:03] *** Quits: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net) (Ping timeout)
[01:17:10] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[01:18:02] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Connection reset by peer)
[01:18:44] *** Quits: brendan (brendaneic@E9758364.9EC0A5AF.CFE928A7.IP) (Quit: brendan)
[01:19:02] *** Joins: carter (carter@moz-12C317EF.nyc.res.rr.com)
[01:19:30] *** Quits: moonchrome (moonchrome@moz-77761FFA.dsl.iskon.hr) (Quit: Leaving)
[01:20:03] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[01:20:12] <bjz> jensnockert: aye
[01:20:12] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Connection reset by peer)
[01:20:35] <bjz> jensnockert: I have an Interpolate trait, but only with lerp
[01:20:40] *** Quits: carllerche (carllerche@moz-BF6CB667.hsd1.ca.comcast.net) (Quit: carllerche)
[01:20:57] <bjz> jensnockert: should I just push it, then you could add to it if you want?
[01:21:07] <jensnockert> Sounds good.
[01:23:26] *** Quits: thomaslee (thomaslee@moz-6C3931E3.static.twtelecom.net) (Client exited)
[01:23:34] <xenocons> where does the 2048 size come from in fn read_whole_stream of io?
[01:23:41] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[01:23:42] <bjz> jensnockert: we also need to think of string conversions
[01:23:49] <bjz> jensnockert: woops
[01:23:49] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Connection reset by peer)
[01:24:00] <bjz> jensnockert: not string
[01:24:02] <bjz> jensnockert: I mean num conversions
[01:24:07] <jensnockert> Yeah.
[01:24:12] <bjz> jensnockert: like, from_int
[01:24:40] *** Quits: a__ (a__@moz-250D9B4.nycmny.fios.verizon.net) (Ping timeout)
[01:24:47] <bjz> jensnockert: atm we only have the functions that mirror the primitive casts
[01:24:51] *** Joins: a__ (a__@moz-250D9B4.nycmny.fios.verizon.net)
[01:25:02] <jensnockert> Casts make me dizzy.
[01:25:06] <bjz> jensnockert: it would be good if there was a more generic system
[01:25:11] <jensnockert> ^
[01:25:21] <cmr> xenocons: good question
[01:25:21] <cmr> It's a decent buffer size.
[01:25:35] <cmr> I'd expect it to be a block length though tbh.
[01:25:44] <bjz> jensnockert: eg. for ratios, complex nums, bignums etc
[01:26:08] <jensnockert> I really wish we had `as'-overloading, or am I crazy?
[01:26:09] *** Quits: Jesin (Jessin_@moz-48B48C95.eecs.lehigh.edu) (Ping timeout)
[01:26:12] *** Quits: pragmatic (pragmatic@moz-1A421840.hsd1.ca.comcast.net) (Ping timeout)
[01:26:15] <bjz> jensnockert: no
[01:26:20] <jensnockert> Good.
[01:26:39] <bjz> jensnockert: I've brought it up
[01:26:41] *** Quits: SiegeLord (siege@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[01:26:46] <xenocons> cmr: yeah, not sure how to calculate a good block length though
[01:26:48] <jensnockert> <3
[01:26:50] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[01:26:55] <cmr> xenocons: 4K, almost universally.
[01:26:59] <bjz> jensnockert: can't remember if I made an issue though
[01:27:00] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Connection reset by peer)
[01:27:27] <xenocons> cmr: hrm
[01:27:34] <jensnockert> bjz: https://github.com/mozilla/rust/issues/6016
[01:27:59] <bjz> jensnockert: I think pcwalton said 'I hadn't thought about that'. the general issues with overloading hold
[01:28:16] <xenocons> cmr: strangely, that function is returning 4311 bytes of a file that is 231753 bytes ;p
[01:28:23] <bjz> jensnockert: ahh yep
[01:28:28] <bjz> jensnockert: thought I had
[01:29:12] <bjz> jensnockert: I don't know if we need a std::conv module
[01:29:18] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[01:29:18] <bjz> jensnockert: but yeah
[01:29:33] <jensnockert> Preferably we only have `as' or conv module.
[01:30:04] <bjz> jensnockert: the other issue if 'cast' is the right ay of describing it for some cases
[01:30:05] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[01:30:15] <bjz> *way
[01:30:17] <jensnockert> bjz: Probably not.
[01:30:34] <jensnockert> bjz: But it is the most pressing issue.
[01:30:34] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Connection reset by peer)
[01:30:41] <bjz> from/to seems good for most cases
[01:30:51] <xenocons> could be my incorrect assumption though: http://codepad.org/yORxEFG7
[01:31:01] <bjz> ie. a 'from' associated function
[01:31:02] *** Quits: kemurphy (kemurphy@moz-7332FD74.hsd1.pa.comcast.net) (Ping timeout)
[01:31:16] <bjz> and a 'to' method
[01:31:42] <bblum> argh this serialize thing is really putting a cramp in my style
[01:31:46] <bjz> to_*
[01:31:46] <bjz> jensnockert: if that makes sense
[01:31:57] <jensnockert> bjz: I think so.
[01:32:07] <strcat> bjz: you want specific kinds of conversions though.
[01:32:09] *** cscottnet_away is now known as cscottnet
[01:33:23] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[01:33:32] <cmr> xenocons: it works fine. also, bytes.len(), not vec::len(bytes)
[01:33:33] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Connection reset by peer)
[01:33:42] <xenocons> ahh
[01:34:02] <xenocons> but that file is clearly larger than what is reported
[01:34:12] <cmr> works fine for me, I mean
[01:34:17] <cmr> on linux
[01:34:24] <xenocons> hrm
[01:35:09] <xenocons> windows here
[01:35:14] *** Joins: kemurphy (kemurphy@moz-7332FD74.hsd1.pa.comcast.net)
[01:35:22] <xenocons> are you reading a binary file?
[01:35:36] <cmr> Yes, but on unix there is no separation between binary and text files
[01:35:56] <cmr> (nor is there in NT, just a silly distinction win32 makes)
[01:36:04] <xenocons> well, len might have seperations (one would hope, not over vec:: though)
[01:36:04] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[01:36:56] <xenocons> strange as the file on disk is size: 231753 but rust reports 4311 (am i making wrong assumptions about calculating a file size)
[01:36:58] *** Joins: brendan (brendaneic@E9758364.9EC0A5AF.CFE928A7.IP)
[01:37:05] *** Joins: ysuzuki (ysuzuki@moz-F333A8C8.st.keio.ac.jp)
[01:37:11] <xenocons> file size = number of bytes is my assumption
[01:37:20] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[01:37:57] <bjz> jensnockert: how should lerp handle NaNs and infs?
[01:37:57] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Connection reset by peer)
[01:38:01] <cmr> you can use 'wc -c /c/users/dklein/desktop/librhash.dll' too
[01:38:05] <cmr> (from mingw)
[01:38:09] <strcat> xenocons: yes, number of bytes in the file isn't necessarily how big it is on disk
[01:38:20] <strcat> but which do you want to know?
[01:38:22] <jensnockert> bjz: Should just return the NaN / inf op.
[01:38:29] <xenocons> strcat: the number of bytes 
[01:38:34] <jensnockert> bjz: If both are, just select one.
[01:39:13] <bjz> jensnockert: atm I have: value.mul_add(*other, value.mul_add(-*self, *self))
[01:39:25] <aatch> Hmm, it seems I am being a little over-zealous with my issue clean up.
[01:39:31] <jensnockert> bjz: That should be fine, I think.
[01:40:15] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[01:40:39] <bjz> rusti: fn lerp(x: float, y: float, val: float) -> float { val.mul_add(y, val.mul_add(-x, x)) } lerp(1f, 2f, 0.5f)
[01:40:39] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Connection reset by peer)
[01:40:40] -rusti- 1.5
[01:40:46] <bjz> rusti: fn lerp(x: float, y: float, val: float) -> float { val.mul_add(y, val.mul_add(-x, x)) } lerp(1f, 2f, 0.75f)
[01:40:47] -rusti- 1.75
[01:41:05] <bjz> rusti: fn lerp(x: float, y: float, val: float) -> float { val.mul_add(y, val.mul_add(-x, x)) } lerp(1f, 2f, Float::NaN())
[01:41:06] -rusti- NaN
[01:41:19] <bjz> rusti: fn lerp(x: float, y: float, val: float) -> float { val.mul_add(y, val.mul_add(-x, x)) } lerp(1f, Float::NaN(), 0.75f)
[01:41:20] -rusti- NaN
[01:41:26] <bjz> rusti: fn lerp(x: float, y: float, val: float) -> float { val.mul_add(y, val.mul_add(-x, x)) } lerp(Float::NaN(), 2f, 0.75f)
[01:41:27] -rusti- NaN
[01:41:41] <bjz> rusti: fn lerp(x: float, y: float, val: float) -> float { val.mul_add(y, val.mul_add(-x, x)) } lerp(Float::infinity(), 2f, 0.75f)
[01:41:42] -rusti- NaN
[01:41:51] <bjz> rusti: fn lerp(x: float, y: float, val: float) -> float { val.mul_add(y, val.mul_add(-x, x)) } lerp(1f, Float::infinity(), 0.75f)
[01:41:53] -rusti- inf
[01:42:03] <bjz> rusti: fn lerp(x: float, y: float, val: float) -> float { val.mul_add(y, val.mul_add(-x, x)) } lerp(1f, 2f, Float::infinity())
[01:42:04] -rusti- NaN
[01:42:11] <bjz> rusti: fn lerp(x: float, y: float, val: float) -> float { val.mul_add(y, val.mul_add(-x, x)) } lerp(3f, 2f, Float::NaN())
[01:42:12] -rusti- NaN
[01:42:18] <bjz> rusti: fn lerp(x: float, y: float, val: float) -> float { val.mul_add(y, val.mul_add(-x, x)) } lerp(3f, 2f, 0.75f)
[01:42:18] -rusti- 2.25
[01:42:40] * bjz stops spamming
[01:42:40] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[01:42:40] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/Tr387g
[01:42:40] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[01:42:47] <bjz> jensnockert: does that look ok?
[01:43:15] <jensnockert> bjz: The ones concerning infinity should probably return infinity.
[01:43:56] <bjz> jensnockert: if I just get the basics down, could you make sure the edge-cases work?
[01:44:01] <jensnockert> bjz: Sure.
[01:45:39] *** Joins: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP)
[01:45:39] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/mU5Gbg
[01:45:39] *** Parts: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP) ()
[01:45:42] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[01:45:42] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/tVVP_g
[01:45:42] <ghrust> 13rust/06auto 14829b5de 15Brian Anderson: mk: Bulid rustrt with -pthread instead of -lpthread
[01:45:42] <ghrust> 13rust/06auto 145d2cadb 15bors: auto merge of #6895 : cmr/rust/jemalloc, r=brson
[01:45:42] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[01:46:06] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[01:46:38] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[01:46:38] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Connection reset by peer)
[01:47:52] *** Quits: joebobjoe (joebobjoe@55F2E07A.7F841963.2213276E.IP) (Quit: Textual IRC Client: www.textualapp.com)
[01:48:09] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[01:48:58] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[01:49:04] *** Joins: pragmatic (pragmatic@moz-1A421840.hsd1.ca.comcast.net)
[01:49:48] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Connection reset by peer)
[01:50:43] *** Joins: enticeing (user@1983AA36.E4834407.EAAB5301.IP)
[01:50:55] <enticeing> what exactly is going to be happening with core/std ?
[01:51:03] <cmr> enticeing: what about it?
[01:51:05] *** Quits: devbug (quassel@moz-E1DE087C.bchsia.telus.net) (Ping timeout)
[01:51:07] <aatch> enticeing, what do you mean?
[01:51:17] <enticeing> i've heard the names are going to be changed
[01:51:23] <cmr> Already changes
[01:51:24] *** Joins: joebobjoe (joebobjoe@55F2E07A.7F841963.2213276E.IP)
[01:51:25] <cmr> *changed
[01:51:26] <enticeing> and the docs for both link to core
[01:51:26] <aatch> They changed several weeks ago
[01:51:57] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[01:52:02] <enticeing> so is there just core now?
[01:52:06] <cmr> no
[01:52:17] <aatch> no, core -> std, std -> extra
[01:52:17] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Connection reset by peer)
[01:52:20] <cmr> core was renamed to std, std was renamed to extra
[01:52:31] <enticeing> okay, then the site might need updating?
[01:52:41] <aatch> enticeing, I think there is an issue open
[01:52:43] <enticeing> or was that just going to wait until 0.7 ?
[01:52:48] <aatch> it's been noticed however.
[01:53:10] *** Quits: joebobjoe (joebobjoe@55F2E07A.7F841963.2213276E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[01:53:34] *** Joins: joebobjoe (joebobjoe@55F2E07A.7F841963.2213276E.IP)
[01:53:39] <enticeing> it's just the link is pointing to the .../std/... instead of .../extra/..., and the names are wrong
[01:54:10] *** Quits: a_m0d (a_m0d@moz-9036E0FE.home.cgocable.net) (Ping timeout)
[01:55:27] <SiegeLord> How can I get this to work:
[01:55:39] <SiegeLord> rusti: let mut a = Some(5); let b : &mut int = match(&mut a) { Some(a) => a, None => fail!() };
[01:55:41] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/fGOb
[01:55:50] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[01:56:08] <SiegeLord> I want to extract a (mutable) borrowed refence from an enum
[01:56:08] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Connection reset by peer)
[01:56:21] <strcat> rusti: let mut a = Some(5); let b = match(a) { Some(ref mut a) => a, None => fail!() }; b
[01:56:23] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/EWEU
[01:56:23] <pcwalton> SiegeLord: match a { Some(ref mut a) => ... }
[01:56:25] <enticeing> i think it's in the match, where you have Some(a)
[01:56:28] <strcat> rusti: let mut a = Some(5); let b = match(a) { Some(ref mut a) => a, None => fail!() }; fmt("%?", b)
[01:56:29] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/WOeQ
[01:56:32] <xenocons> is there a &[uint] -> ~[u8] function?
[01:56:37] <strcat> rusti: let mut a = Some(5); let b = match(a) { Some(ref mut a) => a, None => fail!() }; fmt!("%?", b)
[01:56:38] -rusti- ~"&mut 5"
[01:56:53] <strcat> there's get_mut() though if you actually want to fail on the None case
[01:57:31] <SiegeLord> Sweet... thanks
[01:57:55] <aatch> this should be interesting, renaming #[inline(always)] to #[inline(force)] and making `always` emit a warning.
[01:58:52] <strcat> lots of them should really just be #[inline].
[01:58:58] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[01:59:16] *** Joins: jclements (jclements@moz-20AD2EFB.dsl.static.sonic.net)
[01:59:16] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Connection reset by peer)
[01:59:36] <aatch> strcat, I know. I'm hoping that "force" is a better name for it based on what it actually ends up doing.
[01:59:48] <aatch> this will also give me a nice list of every where it's used.
[02:00:33] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Quit: Eaten by a grue)
[02:00:36] <SiegeLord> So why the need for 'ref'... why can't I write Some(&mut a) => ...?
[02:00:43] <SiegeLord> Is it some parser ambiguity?
[02:00:55] *** Joins: eholk (eholk@moz-9AB4D52F.hsd1.ut.comcast.net)
[02:00:59] <aatch> though it appears my span isn't correct. oh well.
[02:01:12] <pcwalton> SiegeLord: you can write Some(&mut a), but that won't do what you want
[02:01:26] <pcwalton> it would match against Option<&mut foo>
[02:01:38] <pcwalton> what you need is to create a & reference, not match against one
[02:02:05] <strcat> rusti: extern { fn getuid() -> u32; } unsafe { getuid() }
[02:02:06] -rusti- 1000
[02:02:14] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[02:02:30] *** Quits: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP) (Quit: pcwalton)
[02:02:30] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Connection reset by peer)
[02:03:26] <strcat> rusti: extern { fn getuid() -> u32; fn unshare(flags: u32) -> u32; } unsafe { getuid(); unshare(0x10000000) }
[02:03:32] -rusti- timeout triggered!
[02:03:44] <strcat> oh that needs a syscall
[02:05:04] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[02:05:10] *** Joins: \n (NDesaulnie@moz-C2B49FFE.hsd1.ca.comcast.net)
[02:05:10] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Connection reset by peer)
[02:05:19] *** Quits: \n (NDesaulnie@moz-C2B49FFE.hsd1.ca.comcast.net) (Quit: \n)
[02:05:23] <xenocons> rusti: let x : ~[uint] = [1u,2u,3u,4u]; x.from_elem(4,u8);
[02:05:25] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/eNYa
[02:05:46] <xenocons> rusti: let x : ~[uint] = [1u,2u,3u,4u]; x.from_elem(4,~[u8]);
[02:05:48] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/CZaL
[02:05:59] <xenocons> hrmm
[02:06:20] <xenocons> i guess i could just map into something that converts the individual uints to bytes
[02:06:51] <aatch> xenocons, there's map_flatten(?) for that
[02:07:00] <aatch> I may have the name wrong.
[02:07:09] *** Joins: dbaupp (Thunderbir@58809B52.D5A1DCF.37681C44.IP)
[02:07:13] <xenocons> flatten_map ?
[02:07:18] <aatch> sounds right
[02:07:19] <xenocons> er
[02:07:31] <xenocons> i swear i just saw that
[02:07:37] *** Joins: thomaslee (thomaslee@moz-306D3DF4.hsd1.or.comcast.net)
[02:07:46] <xenocons> flat_map
[02:08:04] *** Joins: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP)
[02:08:04] *** ChanServ sets mode: +o pcwalton
[02:08:10] <xenocons> but i need to know how to go from uint -> ~[u8] first :)
[02:08:13] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[02:09:00] <xenocons> then i guess its just uintVector.map bytesOfUint
[02:09:00] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Connection reset by peer)
[02:09:39] *** Quits: dbaupp (Thunderbir@58809B52.D5A1DCF.37681C44.IP) (Connection reset by peer)
[02:10:28] <aatch> xenocons, well you could be kinda tricksy
[02:10:35] *** Joins: gazoombo (uid6629@moz-D8B63698.irccloud.com)
[02:10:38] *** Quits: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP) (Quit: pcwalton)
[02:10:49] <xenocons> tricksy like a hobbits?
[02:10:56] *** Joins: dbaupp (Thunderbir@58809B52.D5A1DCF.37681C44.IP)
[02:11:09] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[02:11:42] <cmr> *hobbitses, isn't it?
[02:11:51] <xenocons> heh
[02:13:05] <aatch> rusti: let i = 45u; let i_ptr : *uint = &i; let u8_ptr = i_ptr as *u8; unsafe { std::vec::raw::from_buf(u8_ptr, std::sys::size_of_val(i)) }
[02:13:07] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/gZOW
[02:13:24] <aatch> rusti: let i = 45u; let i_ptr : *uint = &i; let u8_ptr = i_ptr as *u8; unsafe { std::vec::from_buf(u8_ptr, std::sys::size_of_val(i)) }
[02:13:25] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/CAcg
[02:13:40] <strcat> hm
[02:13:44] <aatch> rusti: let i = 45u; let i_ptr : *uint = &i; let u8_ptr = i_ptr as *u8; unsafe { std::vec::from_buf(u8_ptr, std::sys::size_of_val(&i)) }
[02:13:45] -rusti- ~[45, 0, 0, 0, 0, 0, 0, 0]
[02:13:45] <strcat> CLONE_NEWUSER doesn't seem to ever work
[02:13:50] <strcat> even the util-linux wrappers fail
[02:14:02] <aatch> rusti: let i = 455432646727325u; let i_ptr : *uint = &i; let u8_ptr = i_ptr as *u8; unsafe { std::vec::from_buf(u8_ptr, std::sys::size_of_val(&i)) }
[02:14:03] -rusti- ~[157, 150, 32, 173, 54, 158, 1, 0]
[02:14:04] <xenocons> aatch: hmmm heh
[02:14:17] <cmr> strcat: iirc from reading the shortlogs, userns has a lot of churn and brokenness
[02:14:17] <aatch> hence, tricksy
[02:14:22] *** Joins: adu (ajr@moz-96FE9B84.washdc.fios.verizon.net)
[02:14:24] <xenocons> wait, is u unsigned 32bit integer
[02:14:30] <cmr> xenocons: no, uint.
[02:14:34] <cmr> platform-dependant size
[02:14:35] <strcat> cmr: well I know it's not secure as root yet but... it doesn't seem to even work ;p
[02:14:37] <aatch> xenocons, machine integer
[02:14:44] <xenocons> ah, fudge
[02:14:54] <strcat> cmr: maybe it was disabled.
[02:14:56] <aatch> hence why I didn't hard-code the size in
[02:15:06] <xenocons> u32 is the unsigned 32bit int right
[02:15:08] *** Quits: adu (ajr@moz-96FE9B84.washdc.fios.verizon.net) (Quit: adu)
[02:15:13] <aatch> xenocons, yep
[02:15:38] <SiegeLord> Hmm... maybe I'll forget about trait objects for now and just use enums... keep hitting ICE's
[02:15:41] <xenocons> easy to fix i thin s/u\,/u32\,/ i hope
[02:16:58] <jmgrosen> anyone able to help with tcp serving?
[02:17:04] *** Quits: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP) (Ping timeout)
[02:17:06] *** Joins: adu (ajr@moz-96FE9B84.washdc.fios.verizon.net)
[02:17:33] *** Quits: jclements (jclements@moz-20AD2EFB.dsl.static.sonic.net) (Quit: jclements)
[02:17:52] <SiegeLord> Is it possible to make this function a bit less ugly? https://gist.github.com/SiegeLord/5726643#file-test-rs-L54
[02:18:10] <SiegeLord> Well, mostly the match in that spot
[02:18:19] <strcat> get_mut
[02:18:27] <strcat> or get_ref_mut
[02:18:29] <strcat> whatever it's called
[02:18:31] *** Joins: devbug (quassel@moz-E1DE087C.bchsia.telus.net)
[02:18:51] <cmr> that works on enums?
[02:18:54] <gazoombo> what are the odds of rustpkg being stable enough to play with in 0.6?
[02:19:09] <strcat> cmr: err, thought it was an Option from the earlier conversation
[02:19:11] <strcat> no, then
[02:19:21] <xenocons> aatch: ty that works
[02:19:26] <strcat> gazoombo: it's not
[02:19:31] <xenocons> rusti: let i = 0xA2DED572u32; let i_ptr : *u32 = &i; let u8_ptr = i_ptr as *u8; unsafe { std::vec::from_buf(u8_ptr, std::sys::size_of_val(&i)) }
[02:19:33] -rusti- ~[114, 213, 222, 162]
[02:19:35] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[02:19:37] <strcat> it's not stable enough in incoming yet so it definitely wasn't then
[02:19:38] <xenocons> 'unsafe' worries me though hehe
[02:19:46] <cmr> xenocons: as it should!
[02:19:52] <gazoombo> strcat: :-( ok. good to know.
[02:20:00] <strcat> xenocons: for one thing you're relying on endianness
[02:20:06] <xenocons> strcat: yeah
[02:20:20] <aatch> I wasn't intending for it to be the perfect solution
[02:20:21] <xenocons> but there doesnt seem to be a .toBytes() yet
[02:20:28] <cmr> xenocons: there sure is.
[02:20:39] <cmr> http://static.rust-lang.org/doc/core/to_bytes.html
[02:20:42] *** Quits: enticeing (user@1983AA36.E4834407.EAAB5301.IP) (Client exited)
[02:20:50] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Quit: tikue)
[02:20:51] *** Quits: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net) (Quit: ["Textual IRC Client: www.textualapp.com"])
[02:21:04] <xenocons> hmm :(
[02:21:05] <steven_is_false> Hi! I was trying to learn the Servo source, and wass reading over issues. One in particular caught my eye. https://github.com/mozilla/servo/issues/280 . Why can't enums be made as efficient as virtual method calls?
[02:21:40] <xenocons> rusti: 0x15u32.to_bytes();
[02:21:44] *** Joins: jclements (jclements@moz-20AD2EFB.dsl.static.sonic.net)
[02:21:47] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/JCaL
[02:21:51] <strcat> steven_is_false: they're more efficient for some things
[02:21:54] <bblum> finally made libsyntax compile.
[02:22:03] * bblum shakes fist at the serializer
[02:22:11] <aatch> strcat, what kind of things would require forcing inlining?
[02:22:12] *** Quits: KindOne (KindOne@90FB4CF8.8E36DE4.EC6A1518.IP) (Ping timeout)
[02:22:14] <strcat> steven_is_false: if you have 100 possible types, vtables will be more efficient
[02:22:50] <jmgrosen> no one's done tcp stuff? :(
[02:22:51] <steven_is_false> strcat: So then perhaps Rust should switch strategies on large enums?
[02:23:02] <strcat> steven_is_false: it can't switch strategies
[02:23:09] <strcat> enums don't box their variants
[02:23:24] <strcat> and their variants don't all have to have the same methods/traits
[02:23:47] <strcat> they are far more efficient for 2-3 variants, for sure
[02:23:57] *** cscottnet is now known as cscottnet_away
[02:24:22] <strcat> branch and call a function at a known location (and it can be inlined)
[02:24:44] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[02:24:52] <steven_is_false> strcat: But this would be more expensive than enums right? struct MyEnum (~fn (~fn (A), ~fn (B)));
[02:25:21] <xenocons> cmr: nice this seems extensive
[02:25:21] <steven_is_false> strcat: Even if it was a magical low level implementation.
[02:25:35] <xenocons> now to just work out how to use it
[02:25:36] *** Quits: joebobjoe (joebobjoe@55F2E07A.7F841963.2213276E.IP) (Quit: Textual IRC Client: www.textualapp.com)
[02:25:37] <strcat> steven_is_false: well I don't really know how that replaces it
[02:25:39] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Quit: eatkinson)
[02:25:42] <strcat> steven_is_false: small enums are very efficient
[02:25:58] <steven_is_false> strcat: This is the double negation encoding of sum types.
[02:26:01] <xenocons> rusti: (1u32).to_bytes();
[02:26:03] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/XEKY
[02:26:07] <strcat> but when they end up with many tags, you have a lookup table or a binary search to match on them
[02:26:14] *** Quits: thomaslee (thomaslee@moz-306D3DF4.hsd1.or.comcast.net) (Connection timed out)
[02:26:33] <xenocons> rusti: (1u32).ToBytes();
[02:26:35] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/AFNT
[02:26:39] <steven_is_false> strcat: It can be done using the visitor pattern in an OOP language. And is a generic way to use virtual dispatch to implement enums.
[02:26:50] *** Joins: KindOne (KindOne@moz-D173A859.dynamic.ip.windstream.net)
[02:26:52] <steven_is_false> However it pays the cost of dispatch twice.
[02:26:56] <strcat> so there's a crossover point when dynamic dispatch becomes faster than branching on a tag and doing static dispatch
[02:27:21] *** Joins: thomaslee (thomaslee@moz-306D3DF4.hsd1.or.comcast.net)
[02:27:26] <steven_is_false> I'm asking whether doing the dynamic dispatch twice is faster than the static dispatch.
[02:27:47] <strcat> with how many variants?
[02:28:23] <steven_is_false> strcat: The pattern generalizes neatly to any number of variants.
[02:28:42] <strcat> steven_is_false: question can't really be answered without a # of variants though
[02:28:50] <strcat> enum Foo { A(T), B(U) }
[02:28:55] <strcat> matching is a single branch
[02:29:12] <strcat> and the compiler is clever at optimizing switches
[02:29:14] <aatch> strcat, std::iterator, any reason to be specifically #[inline(always)]?
[02:29:29] <strcat> aatch: yes, we know better than LLVM
[02:29:35] <strcat> aatch: they're a loop body
[02:29:46] <steven_is_false> strcat: struct Foo (&'static Vtable, Environment).
[02:29:48] <aatch> ok, I'll change 'em to force
[02:29:58] *** Quits: thomaslee (thomaslee@moz-306D3DF4.hsd1.or.comcast.net) (Ping timeout)
[02:30:13] *** Quits: zz_kimundi (kimundi@moz-28AE5A0F.dip0.t-ipconnect.de) (Ping timeout)
[02:30:15] <strcat> aatch: basically if it can inline them, it can merge them all into a loop
[02:30:23] <steven_is_false> strcat: I should actually make a Gist though, and show the full visitor pattern using traits so you understand what I mean better.
[02:30:39] <strcat> aatch: and it's often too cautious
[02:30:47] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[02:31:11] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[02:31:18] <strcat> steven_is_false: the # of variants greatly influences the answer to the question.
[02:31:26] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[02:31:29] *** Joins: Guest (textual@moz-E64A54F3.nyc.res.rr.com)
[02:31:31] <strcat> 5 variants -> switch + static dispatch will win
[02:31:40] <strcat> 500 variants -> obviously dynamic dispatch will win
[02:31:53] <strcat> I don't know the precise point at which it becomes more efficient
[02:31:54] <Guest> hey guys, i'm going through the rust tutorial now, is the _ the wildcard for a matcher or is *?
[02:31:58] <steven_is_false> strcat: Right, so why can't it switch over to dynamic dispatch for large numbers of variants?
[02:32:12] <aatch> strcat, fair enough. Though I think my recent optimization passes help slightly, there are a few passes that shrink functions before doing the inline pass.
[02:32:15] *** Quits: jclements (jclements@moz-20AD2EFB.dsl.static.sonic.net) (Quit: jclements)
[02:32:23] *** Quits: adu (ajr@moz-96FE9B84.washdc.fios.verizon.net) (Quit: adu)
[02:32:26] <cmr> steven_is_false: that isn't what enums are.
[02:32:29] <strcat> steven_is_false: allocating memory isn't just an implementation detail, for one thing
[02:32:36] <strcat> but I don't really see how you'd do it
[02:32:52] <aatch> Guest, _ matches a single item, * matches every item in a variant
[02:32:56] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Ping timeout)
[02:33:16] <aatch> so you can have a lone `_` in an arm, but not a lone `*`
[02:33:39] *** Joins: zz_kimundi (kimundi@moz-21CA7C26.dip0.t-ipconnect.de)
[02:33:59] *** zz_kimundi is now known as kimundi
[02:34:01] <steven_is_false> strcat: Let me work on a Gist.
[02:34:10] <SiegeLord> Is vec::push something that can be relied to minimize allocations?
[02:34:10] <Guest> aatch awesome, thanks!
[02:34:20] <SiegeLord> *relied on
[02:34:29] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (Ping timeout)
[02:34:41] <aatch> SiegeLord, it over-allocates if that is what you mean
[02:34:51] <SiegeLord> Yes, thanks
[02:34:53] <aatch> so 4 -> 8 -> 16
[02:35:18] <cmr> there was something about using 1.5 as the growth factor instead of 2
[02:35:40] *** Guest is now known as CannedCorn
[02:35:40] *** Joins: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net)
[02:35:43] <aatch> Still, it doesn't just grow one element at a time.
[02:35:47] <cmr> right
[02:35:50] <strcat> cmr: the libc++ devs found that 1.5x was faster
[02:35:59] <strcat> and fragments memory less
[02:36:07] <cmr> had to do with the golden ratio, no?
[02:36:12] <strcat> magic to do with memory allocators and the golden ratio, yeah
[02:36:16] <cmr> I remember you linking a very fascinating blog post about it
[02:36:43] <strcat> it probably depends a lot on the allocator, we'd have to measure
[02:36:55] <strcat> and fragmentation is hard to measure
[02:37:16] *** Joins: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net)
[02:38:30] *** Quits: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net) (Client exited)
[02:39:36] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[02:39:36] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/tVVP_g
[02:39:36] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[02:39:36] *** Joins: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net)
[02:41:43] <cmr> yayt!
[02:41:56] <cmr> dbaupp: make isrustfastyet update
[02:42:34] *** Joins: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP)
[02:42:34] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/T7etNw
[02:42:34] *** Parts: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP) ()
[02:42:35] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[02:42:36] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/tZ-O7A
[02:42:36] <ghrust> 13rust/06auto 148bcefef 15Daniel Micay: libc: omit memcpy, memmove and memset...
[02:42:36] <ghrust> 13rust/06auto 1474d9de7 15bors: auto merge of #6979 : thestinger/rust/libc, r=brson...
[02:42:36] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[02:42:41] *** Joins: thomaslee (thomaslee@moz-306D3DF4.hsd1.or.comcast.net)
[02:42:46] *** Quits: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net) (Quit: ["Textual IRC Client: www.textualapp.com"])
[02:43:12] *** Quits: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net) (Client exited)
[02:45:10] *** Joins: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net)
[02:45:12] *** Quits: doomlord (doomlod@moz-8F385DB0.range109-153.btcentralplus.com) (Ping timeout)
[02:46:00] *** Joins: ysuzuki_ (ysuzuki@moz-3830D141.st.keio.ac.jp)
[02:46:50] *** Quits: ysuzuki (ysuzuki@moz-F333A8C8.st.keio.ac.jp) (Ping timeout)
[02:47:01] <xenocons> so uh, how do i use to_bytes in core?
[02:47:13] *** Quits: dbaupp (Thunderbir@58809B52.D5A1DCF.37681C44.IP) (Ping timeout)
[02:47:18] *** Joins: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net)
[02:47:20] <xenocons> it is a 'method' of an 'interface' `ToBytes'
[02:47:38] <cmr> rusti: use std::to_bytes::ToBytes; 1723541235u64.to_bytes()
[02:47:40] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/RgLH
[02:47:54] <cmr> rusti: use std::to_bytes::ToBytes; 1723541235u64.to_bytes(true)
[02:47:57] -rusti- ~[243, 38, 187, 102, 0, 0, 0, 0]
[02:48:05] <xenocons> ahh, you need to 'use' it
[02:48:12] <xenocons> bloody hell
[02:49:07] <cmr> strcat: jemalloc in the rt shouldn't affect libc::malloc/libc::free, right?
[02:49:19] <strcat> cmr: it does, those use jemalloc now
[02:49:31] *** Joins: annodomini (lambda@moz-9AC5B452.hsd1.ma.comcast.net)
[02:49:39] <strcat> hrm
[02:49:40] <strcat> or do they
[02:49:47] <cmr> that's what I thought originally
[02:49:51] <cmr> but now I'm not so sure :p
[02:49:55] <cmr> since it's linked in statically
[02:49:57] <steven_is_false> strcat: Okay, so here's a prototype of the idea https://gist.github.com/sstewartgallus/5726751 . In the comments it lists a few problems with the idea. What do you think?
[02:50:32] <strcat> cmr: they should probably *not* be using it
[02:50:39] <strcat> or at least there has to be a way to not use it
[02:50:56] <xenocons> so std has replaced core in trunk, but not release, right?
[02:51:02] <cmr> xenocons: yes
[02:51:08] <xenocons> k ty
[02:51:33] <strcat> cmr: problem is there are bad C libraries allocating stuff themselves with an allocator not chosen by the caller without providing their own free (like g_free for glib)
[02:52:02] <strcat> but... this is a problem without jemalloc since not everything dynamically links against the same libc
[02:52:11] <strcat> they usually do :)
[02:52:12] <cmr> strcat: do you have a jemalloc build kicking around to test? should be simple, call malloc a bunch of times in a loop and look at perf report and see if libc malloc is in there
[02:52:26] <strcat> cmr: I don't but I'll build and testr
[02:52:27] <strcat> test*
[02:52:38] <strcat> I think it's going to be calling jemalloc, it's easy enough to work around that
[02:52:38] *** Joins: mflamer (Mibbit@moz-C6ED16AA.hsd1.ca.comcast.net)
[02:52:44] <strcat> if we want to
[02:53:09] <cmr> benh asked about it but the more I thought about it the more I thought I gave him the wrong asnwer
[02:55:02] <steven_is_false> strcat: I don't think that creating anonymous instances of the trait would be problematic, and I have no idea if the fact that one can't have generic virtual functions would be problematice but the ~fn part is problematic with the implementation.
[02:56:39] *** Joins: brson (brson@5F06B402.AD1E507F.3688B332.IP)
[02:56:39] *** ChanServ sets mode: +o brson
[02:57:07] <bjz> it seems I have lost term colours for rustc
[02:57:16] <cmr> bjz: known problem
[02:57:21] <bjz> ahh
[02:57:22] <bjz> :P
[02:57:46] *** Joins: adu (ajr@moz-96FE9B84.washdc.fios.verizon.net)
[02:57:49] <cmr> 'echo $TERM; tput colors;' please?
[02:58:22] <steven_is_false> strcat: But the environment part of the closure would only ever be one of the enum variants so we can always provide an upper bound on the environment size, so a ~fn wouldn't actually be required so I don't see any fundamental problems with the approach.
[02:59:14] *** Quits: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net) (Quit: ["Textual IRC Client: www.textualapp.com"])
[03:00:10] <Eridius> bjz: you're using Linkinus? what OS version? Lion changed the default TERM to xterm-256color from xterm-color
[03:00:37] <bjz> Eridius: I use iterm2, set to xterm-256color
[03:00:44] <Eridius> bjz: xterm-256color should work
[03:00:46] <jmgrosen> colors aren't working for me either, and $TERM == xterm-256color and `tput colors` == 256
[03:00:46] <cmr> ok, known issue then.
[03:00:48] <cmr> I'm working on it.
[03:01:02] *** Quits: ysuzuki_ (ysuzuki@moz-3830D141.st.keio.ac.jp) (Client exited)
[03:01:21] <xenocons> how do you use an immutable binding within a for loop? let x = 1; for some_sequence |p| { dothis(p,1); }
[03:02:19] <xenocons> currently 'moving out of a captured outer immutable variable in a stack closure'
[03:02:24] <xenocons> slightly confusing error message
[03:02:42] <strcat> xenocons: what's the actual type?
[03:02:47] *** Joins: mleise (marco@moz-3468AB5B.pools.arcor-ip.net)
[03:02:49] <xenocons> ~[u8]
[03:02:55] <Eridius> xenocons: your sample code doesn't involve any captured outer variables
[03:03:09] <gazoombo> so even if rustpkg isn't ready yet, is the format for pkg.rs stable? or is that a moving target still at this point?
[03:03:18] <strcat> xenocons: well you can mutate it or read it but you can't move out of it in the for loop
[03:03:27] *** Quits: brson (brson@5F06B402.AD1E507F.3688B332.IP) (Ping timeout)
[03:03:31] <xenocons> hm
[03:03:42] <strcat> gazoombo: moving target, and I think pkg.rs is gone
[03:03:59] <strcat> or at least, intended to be optional
[03:04:00] * strcat isn't sure
[03:04:05] <gazoombo> strcat: oh wow, ok.
[03:04:23] <xenocons> strcat: so if my ~[u8] is a result of reading a file, i must read the file N times (length of loop)?
[03:04:26] <xenocons> i saw this <-> thing
[03:04:39] <strcat> xenocons: no
[03:04:40] <cmr> swap operator, deprecated and removed.
[03:04:41] <strcat> and <-> is gone
[03:04:47] <xenocons> ah
[03:04:59] <strcat> xenocons: passing an object with a destructor by-value is a move
[03:05:09] <strcat> you can pass around a slice or a borrowed pointer
[03:05:14] <xenocons> oh right
[03:05:53] <xenocons> maybe its time to re-read the borrowed pointers tutorial
[03:06:11] *** Quits: carter (carter@moz-12C317EF.nyc.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[03:06:21] <cmr> they're really simple once you get used to them, I think
[03:06:45] <xenocons> like most things understood :)
[03:06:54] *** Joins: Jesin (Jessin_@moz-157A63DD.cc.lehigh.edu)
[03:07:06] <cmr> well no, some things are always complex no matter how well you understand them
[03:07:25] <xenocons> hm, fair enough
[03:07:44] *** Joins: brson (brson@DA348D07.AD1E507F.3688B332.IP)
[03:07:44] *** ChanServ sets mode: +o brson
[03:08:26] <cmr> brson: strcat: I was expecting more of an impact by the jemalloc land on isrustfastyet :\
[03:09:00] <strcat> cmr: it adds an extra thing to build, and the compiler doesn't really do anything in parallel
[03:09:13] <cmr> but even the testsuite
[03:09:23] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[03:09:23] <cmr> strcat: also the buildbots don't use -j foo?
[03:09:24] <xenocons> i would like rust to just pick a pointer type by default and translate stuff at compile time so it 'just works' for beginners, and later they can delve into different ownerships\pointers, but i think this probably undermines the meaning of the language
[03:09:31] <cmr> Even though the rust build isn't parallel, the rt one is.
[03:09:31] *** Joins: rustyFriend (Mibbit@moz-9FB1258A.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[03:09:49] <strcat> cmr: jemalloc improves threaded performance though, it doesn't affect multiprocessing
[03:10:06] <strcat> and it's only like 5-10% gains in single-threaded microbenchmarks
[03:10:14] <strcat> rust only spends a fraction of the time actually allocating
[03:10:22] <strcat> big perf wins aren't that easy ;p
[03:10:24] *** Joins: ysuzuki (ysuzuki@moz-A563888C.ics.keio.ac.jp)
[03:10:56] *** Joins: semisight (alex@moz-98C64AAE.dsl.irvnca.pacbell.net)
[03:12:10] <cmr> strcat: even so, I saw a 2 minute decrease in compile time locally using jemalloc
[03:12:47] <bjz> r? https://github.com/mozilla/rust/pull/6986
[03:14:08] *** Joins: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com)
[03:14:18] <bjz> graydon: and so #4819 continues :D
[03:14:45] <xenocons> ok i got it to work, strangely
[03:15:12] <graydon> lerp?
[03:15:17] <graydon> this is outside my familiarity
[03:15:22] <cmr> linear interpolation
[03:15:35] <xenocons> let bytes = readFileBytes...; for p.each |pat| { search(&bytes,pat); }
[03:15:56] <bjz> graydon: http://fgiesen.wordpress.com/2012/08/15/linear-interpolation-past-present-and-future/
[03:16:07] *** Quits: brson (brson@DA348D07.AD1E507F.3688B332.IP) (Ping timeout)
[03:16:12] <bjz> graydon: http://en.wikipedia.org/wiki/Linear_interpolation
[03:16:39] <graydon> sure, ok
[03:16:44] <graydon> why linear and not something else?
[03:16:50] <graydon> simplest form?
[03:16:55] *** Quits: nooy (user@moz-2458675D.a146.priv.bahnhof.se) (Connection reset by peer)
[03:16:55] *** Joins: nooy (user@moz-2458675D.a146.priv.bahnhof.se)
[03:17:03] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[03:17:20] *** Quits: brendan (brendaneic@E9758364.9EC0A5AF.CFE928A7.IP) (Quit: brendan)
[03:17:28] <bjz> graydon: jensnockert plans to add spline and catrom I believe
[03:17:34] <graydon> k
[03:17:42] <bjz> graydon: very useful for graphics applications
[03:17:56] <graydon> I'll take your word for it :)
[03:18:01] <bjz> :)
[03:18:13] *** Joins: dcoates (dcoates@283ACBFC.F6F164F0.EFF8B7BF.IP)
[03:18:20] <rustyFriend> Hello
[03:18:30] <rustyFriend> I'm pretty new to Rust/Linux
[03:18:35] <bjz> hi!
[03:18:41] <bjz> but you're a friend!
[03:18:47] <bjz> hello friend!
[03:19:05] <rustyFriend> hello!  i'm trying to build rust and install
[03:19:05] *** Quits: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com) (Client exited)
[03:19:14] <bjz> rustyFriend: from incoming?
[03:19:53] <bjz> the general conensus is that git-incoming is the best :)
[03:19:59] <rustyFriend> bjz: I guess C/Python and Windows
[03:20:12] <cmr> rustyFriend: no, he means the version of rust.
[03:20:15] <rustyFriend> oh
[03:20:21] <bjz> sorry
[03:20:31] <rustyFriend> latest stable version - 0.6
[03:20:40] <rustyFriend> I am getting this error
[03:20:41] <rustyFriend> http://www.duas.org/miraj.htm
[03:20:46] <bjz> rustyFriend: latest stable is incoming :D
[03:20:52] <rustyFriend> sorry
[03:21:07] <bjz> ?Ø§Ù„Ù„ÙŽÙ‘Ù‡ÙÙ…ÙŽÙ‘ ØµÙŽÙ„ÙÙ‘ Ø¹ÙŽÙ„ÙŽÙ‰Ù° Ù…ÙØ­ÙŽÙ…ÙŽÙ‘Ø¯Ù ÙˆÙŽØ¢Ù„Ù
[03:21:16] <bjz> :D
[03:22:11] <bjz> rustyFriend: show us your error, but as I say, incoming is the most up-to date. treat the point releases as snapshots
[03:22:57] *** Quits: Sorella (queen@B12A78F5.BA14766C.95C8B7C6.IP) (Quit: (quit))
[03:23:24] *** Parts: semisight (alex@moz-98C64AAE.dsl.irvnca.pacbell.net) ()
[03:24:02] *** Quits: CannedCorn (textual@moz-E64A54F3.nyc.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[03:24:22] <rustyFriend> make: *** {x_86_64-unknown-linux-gnu/stage0/lib/rustc/x86_64-unknown-linux/librustc.so] error 137
[03:24:29] *** Joins: brson (brson@5F06B402.AD1E507F.3688B332.IP)
[03:24:29] *** ChanServ sets mode: +o brson
[03:24:48] <cmr> rustyFriend: going to need the whole log, that only says that an error happened, not what it was
[03:24:50] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[03:25:03] <xenocons> is anyone on windows here who can check the behaviour of file_reader for me
[03:25:03] *** Joins: Guest (textual@moz-E64A54F3.nyc.res.rr.com)
[03:26:58] <rustyFriend> oh sorry...should i paste the latest snippet here?
[03:27:09] <cmr> rustyFriend: you can paste it to https://gist.github.com/
[03:27:28] <steven_is_false> strcat: So this is a low level implementation of the dynamic dispatch strategy for enums using gcc extensions https://gist.github.com/sstewartgallus/5726875 . This implementation doesn't suffer from boxing issues. Could this strategy be used in Rust for enums with large numbers of variants?
[03:28:25] <sp3d> isn't 137 "killed" (oom usually)?
[03:28:54] <cmr> sp3d: I dunno. I didn't know that the make error codes were actually significant :)
[03:29:46] <rustyFriend> Here is the Gist: https://gist.github.com/anonymous/5726888
[03:29:52] <rustyFriend> thanks...
[03:30:42] <cmr> sp3d: by golly you're right
[03:30:47] <cmr> rustyFriend: How much memory do you have?
[03:31:08] <cmr> Rust needs ~2.5GB to build
[03:31:14] <rustyFriend> 1GB
[03:31:16] <rustyFriend> yikes...
[03:31:22] <rustyFriend> okay
[03:31:25] *** Quits: igl (igl@moz-B7343949.adsl.alicedsl.de) (Ping timeout)
[03:31:26] *** Joins: igl (igl@moz-EA4BCEFC.adsl.alicedsl.de)
[03:31:28] <cmr> yeah, we're working on bringing that down :(
[03:31:32] <rustyFriend> i was messing around with it in my virtual machine
[03:31:52] <cmr> rustyFriend: You don't need to build 0.6 though, there are binary packages.
[03:32:05] <rustyFriend> oh...where can i get those?
[03:32:18] <cmr> http://static.rust-lang.org/dist/rust-0.6.tar.gz
[03:32:21] <aatch> unfortunately it's difficult to bring it down /that/ much... since some of the crates are just massive...
[03:33:39] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[03:33:39] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/tZ-O7A
[03:33:40] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[03:33:57] <Jeaye> Best way to tokenize "foo bar spam" into ["foo", "bar", "spam"]?
[03:33:57] *** Quits: ysuzuki (ysuzuki@moz-A563888C.ics.keio.ac.jp) (Client exited)
[03:33:58] *** Joins: jclements (jclements@moz-20AD2EFB.dsl.static.sonic.net)
[03:34:15] *** Joins: brendan (brendaneic@E9758364.9EC0A5AF.CFE928A7.IP)
[03:34:36] <rustyFriend> thanks for the help.  
[03:34:41] <strcat> Jeaye: each_split_char
[03:35:02] *** Quits: RMF (RMF@68B6AD91.A3D80C3C.8D19547B.IP) (Ping timeout)
[03:35:08] <Jeaye> Perfect. Thanks, strcat 
[03:36:09] <Jeaye> fn each_split_char<'a>(s: &'a str, sep: char, it: &fn(&'a str) -> bool) -> bool
[03:36:34] *** Joins: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP)
[03:36:34] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/3aSTYQ
[03:36:34] *** Parts: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP) ()
[03:36:35] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[03:36:35] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/Xx8Erw
[03:36:35] <ghrust> 13rust/06auto 14de27064 15James Miller: Disallow negative counts in repeat expressions
[03:36:35] <ghrust> 13rust/06auto 144abd83b 15bors: auto merge of #6985 : Aatch/rust/fixed-vec-6977, r=thestinger...
[03:36:36] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[03:36:42] <cmr> rusti: "foo bar spam".each_split_char(' ') |&n| { println(n); }
[03:36:44] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/FiGG
[03:37:04] <cmr> rusti: for "foo bar spam".each_split_char(' ') |&n| { println(n); }
[03:37:07] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/HEPg
[03:37:18] <cmr> rusti: for "foo bar spam".each_split_char(' ') |n| { println(n); }
[03:37:19] -rusti- foo
[03:37:19] -rusti- bar
[03:37:20] -rusti- spam
[03:37:20] -rusti- ()
[03:38:08] *** Joins: RMF (RMF@moz-D471E70.dsl.telepac.pt)
[03:38:15] <Jeaye> Interesting. Thanks, cmr
[03:38:40] <Jeaye> Tough to determine it's that syntax just by seeing the signature.
[03:39:21] <cmr> Yeah It's the internal iterator protocol, it takes a closure as the last argumnet. the closure returns bool to mark whether to break or not.
[03:39:50] <jmgrosen> why is there an extra () at the end?
[03:40:14] <cmr> jmgrosen: rusti-the-bot prints fmt!("%?", { .. your input .. }) or something like that
[03:40:23] <jmgrosen> ah, ok
[03:41:03] <Jeaye> cmr: Which means it needs to be wrapped in something like a for loop?
[03:41:12] <cmr> Jeaye: it doesn't have to be.
[03:41:32] <cmr> rusti: "foo bar spam".each_split_char(' ', |n| { println(n); true })
[03:41:34] -rusti- foo
[03:41:34] -rusti- bar
[03:41:34] -rusti- spam
[03:41:34] -rusti- true
[03:41:46] <cmr> rusti: "foo bar spam".each_split_char(' ', |n| { println(n); false })
[03:41:48] -rusti- foo
[03:41:48] -rusti- false
[03:42:03] <Jeaye> ohh
[03:42:29] <adu> how goes?
[03:44:03] *** Quits: jrfeenst (jrfeenst@moz-F912484F.cpe.norwoodlight.com) (Quit: jrfeenst)
[03:44:46] <aatch> wow, there were a lot of #[inline(always)] fns
[03:45:01] <aatch> admittedly many of them wouldn't have mattered, but still.
[03:45:51] <aatch> The weirder thing was that there were quite a few that /should/ have been at least #[inline] that weren't
[03:47:51] <cmr> strcat: I like how parameterized string capabilities aren't described by x/open curses at all.
[03:48:37] *** Joins: ysuzuki (ysuzuki@moz-A563888C.ics.keio.ac.jp)
[03:49:52] <Jeaye> Can I 'return' from a closure? Trying the straightforward approach fails.
[03:50:18] <cmr> rusti: || { return 4; }()
[03:50:20] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/JIgg
[03:50:22] *** Parts: steven_is_false (user@moz-144077DE.bchsia.telus.net) (ERC Version 5.3 (IRC client for Emacs))
[03:50:48] <cmr> rusti: let x = || { return 4; }; x()
[03:50:50] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/jaZG
[03:50:51] <Jeaye> rusti: { || { return 4; }() }
[03:50:52] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/ZDBD
[03:51:02] <cmr> Jeaye: nope, guess not
[03:51:10] <cmr> there's a hack that lets it work for "for" loop iirc
[03:51:39] <Jeaye> mmk
[03:53:27] <aatch> cmr, correct
[03:53:49] *** Quits: dcoates (dcoates@283ACBFC.F6F164F0.EFF8B7BF.IP) (Client exited)
[03:53:54] <aatch> it adds a hidden variable that indicates break vs loop vs return
[03:56:36] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[03:57:29] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[03:58:54] *** Quits: brendan (brendaneic@E9758364.9EC0A5AF.CFE928A7.IP) (Quit: brendan)
[03:59:20] *** Quits: adu (ajr@moz-96FE9B84.washdc.fios.verizon.net) (Quit: adu)
[03:59:26] *** Quits: thomaslee (thomaslee@moz-306D3DF4.hsd1.or.comcast.net) (Connection reset by peer)
[03:59:54] *** Joins: thomaslee (thomaslee@moz-306D3DF4.hsd1.or.comcast.net)
[04:00:33] *** Quits: cantsin (cantsin@moz-F99612CC.members.linode.com) (Quit: ZNC - http://znc.in)
[04:02:36] *** Quits: annodomini (lambda@moz-9AC5B452.hsd1.ma.comcast.net) (Quit: annodomini)
[04:04:57] <xenocons> love the use of the word 'whence' in io.rs
[04:04:57] <xenocons> lol
[04:05:08] <bstrie> cmr: I don't see any dramatic speedup from jmalloc on http://huonw.github.io/isrustfastyet/ :(
[04:05:46] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[04:05:53] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Client exited)
[04:05:55] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[04:06:06] <cmr> bstrie: see log above
[04:06:10] <bjz> xenocons: I know eh?
[04:06:21] <bjz> xenocons: I think it's a Unix-ism
[04:06:27] <bjz> xenocons: though
[04:06:35] <SiegeLord> Hmm... there's no such thing as iterable yet?
[04:06:49] <cmr> bjz: it is, man 3 fseek
[04:07:08] <bjz> SiegeLord: std::iterator?
[04:07:09] <xenocons> bjz: hehe
[04:07:23] *** Quits: eholk (eholk@moz-9AB4D52F.hsd1.ut.comcast.net) (Quit: eholk)
[04:07:31] <SiegeLord> bjz, I don't see it there
[04:07:47] <bjz> SiegeLord: incoming?
[04:07:56] <SiegeLord> Yes
[04:08:00] <bjz> SiegeLord: hum
[04:08:12] <bjz> it should be there :D
[04:08:15] <aatch> SiegeLord, there isn't an explicit Iterable
[04:08:24] <xenocons> another question, file_reader in io seems to provide fopen with "r" instead of "rb", i have a feeling im only seen a portion of the bytes from read_whole_stream() as it only goes up to the first null byte?
[04:08:27] <aatch> there is an Iter trait though.
[04:08:31] *** Joins: doomlord (doomlod@moz-8F385DB0.range109-153.btcentralplus.com)
[04:08:40] <bstrie> graydon: argument in favor of allowing ? in identifier names: https://twitter.com/ID_AA_Carmack/status/342844087113760768 :)
[04:08:41] *** Quits: steven_is_false (user@moz-144077DE.bchsia.telus.net) (Ping timeout)
[04:08:45] *** Quits: brson (brson@5F06B402.AD1E507F.3688B332.IP) (Ping timeout)
[04:08:48] <xenocons> (or is this incorrect)
[04:09:15] <xenocons> os::as_c_charp("r", |modebuf| libc::fopen(pathbuf, modebuf)
[04:09:18] <aatch> bstrie, I would like that, is '?' actually used anywhere?
[04:09:58] <xenocons> its opening the file as a text file, not a binary file
[04:10:03] <bstrie> aatch: no, we don't use it at all
[04:10:11] <aatch> the only thing I can think of is the ternary operator, but we don't have a ternary operator
[04:10:13] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[04:10:18] <graydon> it was used for binding but nobody liked it
[04:10:23] <graydon> except me
[04:10:26] <graydon> then it was used for ternary
[04:10:29] <graydon> currently it's unused
[04:10:48] <graydon> I'm an old schemer so I like ? in idents, but I think it might rattle some nerves
[04:10:55] *** Joins: brendan (brendaneic@E9758364.9EC0A5AF.CFE928A7.IP)
[04:11:11] <aatch> Sounds like something we should ask about though.
[04:11:11] <graydon> and I expect that keeping a few ascii chars reserved for preprocessing rust code isn't the worst possible idea
[04:11:11] <sp3d> I think Vala uses T? like Option<T>
[04:11:34] <sp3d> though that seems particularly unrustlike, so not a real suggestion
[04:11:53] <Jeaye> Wow, I'm actually starting to write Rustic code. Not Rustic C++ code.
[04:12:03] <aatch> When I first encountered ruby, the abilty to have '?' in names was nice, especially for predicates
[04:12:12] <Jeaye> aatch: Agreed.
[04:12:39] <sp3d> ime foo? vs. foo[-]p isn't a big deal as long as the culture picks one as the convention
[04:13:11] *** Joins: brson (brson@DA348D07.AD1E507F.3688B332.IP)
[04:13:11] *** ChanServ sets mode: +o brson
[04:13:14] <Eridius> graydon: I want ' to be legal in idents
[04:13:15] <sp3d> but foo-p is clearly not an option in Rust :P
[04:13:16] <cmr> of course, we could just use the interrobang.
[04:13:49] <cmr> rusti: let â€½ = 4; â€½
[04:13:50] -rusti- <anon>:10:9: 10:12 error: unknown start of token: 8253
[04:13:50] -rusti- <anon>:10          let â€½ = 4; â€½
[04:13:50] -rusti-                    ^~~
[04:13:50] -rusti- application terminated with error code 101
[04:13:53] <bstrie> Eridius: what for?
[04:14:03] <cmr> Or maybe not :p
[04:14:11] <Eridius> bstrie: let f' = someVariantOf(f);
[04:14:20] <Eridius> haskell does this ;)
[04:14:22] <bstrie> rusti: let ÃŸ = 4; ÃŸ
[04:14:22] <Jeaye> Eridius: Ah, that's fair.
[04:14:23] -rusti- 4
[04:14:38] <bstrie> Eridius: bah, mathematicians :P
[04:14:39] <sp3d> that's nice in Haskell, but I feel like that would cause confusion with lifetimes in Rust?
[04:14:43] <Jeaye> rusti: let Âµ = 5; Âµ
[04:14:44] -rusti- 5
[04:14:47] <bstrie> f_prime is clearer!
[04:14:48] <aatch> I'd certainly prefer '?' since it's not going to produce odd identifiers with doubled-up p's
[04:14:51] <Eridius> sp3d: well a lifetime must come after &
[04:14:57] <Eridius> bstrie: f_prime_prime_prime
[04:14:58] <sp3d> yes, the grammar would work out probably
[04:15:14] <Jeaye> Eridius: prime!(f, 3)
[04:15:25] <bstrie> Eridius: no, there's a plan to also use lifetimes as general labels
[04:15:25] <xenocons> ok i fixed file_reader to read the correct # of bytes
[04:15:25] <sp3d> but it seems like from a visual perspective it would be confusing
[04:15:29] <bstrie> like for labeled break
[04:15:32] <Eridius> bstrie: o_O
[04:15:35] <cmr> Eridius: or in the <>'s of a function/trait/impl
[04:15:37] <sp3d> hm
[04:15:38] *** Quits: Guest (textual@moz-E64A54F3.nyc.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[04:15:39] <cmr> Eridius: or as labels
[04:15:48] <cmr> oh bstrie covered that
[04:15:55] <cmr> it's not just as plan, it already exists
[04:15:58] <xenocons> http://codepad.org/LHlHYQSu easy enough fix "r" to "rb" heh
[04:16:02] <Eridius> let fâ€™ = 3; fâ€™
[04:16:08] <Eridius> rusti: let fâ€™ = 3; fâ€™
[04:16:09] -rusti- <anon>:10:13: 10:14 error: unknown start of token: 8217
[04:16:09] -rusti- <anon>:10          let fâ€™ = 3; fâ€™
[04:16:09] -rusti-                        ^
[04:16:09] -rusti- application terminated with error code 101
[04:16:13] <Eridius> damn
[04:16:22] <aatch> let whatâ€½ = 4; â€½
[04:16:29] <aatch> rusti: let whatâ€½ = 4; whatâ€½
[04:16:29] -rusti- <anon>:10:13: 10:17 error: unknown start of token: 8253
[04:16:29] -rusti- <anon>:10          let whatâ€½ = 4; whatâ€½
[04:16:29] -rusti-                        ^~~~
[04:16:29] -rusti- application terminated with error code 101
[04:16:38] <bstrie> rusti: let Ø¹ÙŽÙ„ÙŽÙ‰Ù° = 4; Ø¹ÙŽÙ„ÙŽÙ‰Ù°
[04:16:39] -rusti- 4
[04:16:43] <cmr> I think it's because of the class those are in
[04:16:47] <Jeaye> bstrie: Oh, pretty
[04:16:50] <Eridius> rusti: let â˜ƒ = 3; â˜ƒ
[04:16:51] -rusti- <anon>:10:9: 10:12 error: unknown start of token: 9731
[04:16:51] -rusti- <anon>:10          let â˜ƒ = 3; â˜ƒ
[04:16:51] -rusti-                    ^~~
[04:16:51] -rusti- application terminated with error code 101
[04:16:54] <Eridius> oh now that's obviously a bug
[04:17:01] <Jeaye> No snowman?! :(
[04:17:17] <sp3d> rusti: let fÂ´= 2; fÂ´
[04:17:17] -rusti- <anon>:10:13: 10:14 error: unknown start of token: 180
[04:17:17] -rusti- <anon>:10          let fÂ´= 2; fÂ´
[04:17:17] -rusti-                        ^
[04:17:17] -rusti- application terminated with error code 101
[04:17:20] <aatch> presumably because it's not a start/continue character
[04:17:21] <graydon> XID_Start / XID_Continue, friends
[04:17:25] <graydon> unicode has worked all this out
[04:17:28] <graydon> we just follow the rules
[04:17:29] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[04:17:32] <sp3d> :D
[04:17:33] <graydon> (plus _ because come ON)
[04:17:33] <Eridius> graydon: clearly it got it wrong if â˜ƒ isn't included
[04:17:45] <graydon> back in a bit, laundry
[04:17:48] <bstrie> Eridius: feel free to file a complaint with the unicode consortium
[04:18:00] <aatch> is there an XID_End?
[04:18:00] <Jeaye> I'll r+ it
[04:18:23] <xenocons> what symbol is that, looks like a bug squished on my screen
[04:18:40] <cmr> xenocons: snowman
[04:18:47] <xenocons> haha
[04:18:49] <cmr> http://unicodesnowmanforyou.com/
[04:18:53] <Eridius> U+2603 SNOWMAN
[04:18:56] <xenocons> i copied it into notepad++ it looks like a poop with a hat on
[04:19:32] <Eridius> xenocons: no that's ðŸ’©
[04:19:40] <rpearl> http://sbp.so/supercombiner is the best unicode
[04:19:41] <Eridius> (I assume that rendered correctly; mosh doesn't handle it so I can't see it)
[04:19:50] *** Quits: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP) (Quit: lmandel)
[04:19:54] <xenocons> (my terminal doesnt have unicode support)
[04:20:01] <sp3d> it's U+01f4a9; I don't have an emoji font
[04:20:04] <Eridius> xenocons: boooo
[04:20:06] <xenocons> well, it came up as a square
[04:20:09] <Eridius> sp3d: U+1F4A9 PILE OF POO
[04:20:20] <Eridius> otherwise known as the happy poop
[04:20:22] <sp3d> it's encoded properly at least ;)
[04:20:42] <cmr> Is there a sad poop?
[04:20:46] <xenocons> lol
[04:21:43] <strcat> rusti: std::sys::size_of::<(int, (int, int)>()
[04:21:43] -rusti- <anon>:11:4: 11:5 error: incorrect close delimiter: `}`
[04:21:44] -rusti- <anon>:11     }));
[04:21:44] -rusti-               ^
[04:21:44] -rusti- application terminated with error code 101
[04:21:53] <strcat> rusti: std::sys::size_of::<(int, (int, int))>()
[04:21:54] -rusti- 24
[04:25:12] *** Quits: jclements (jclements@moz-20AD2EFB.dsl.static.sonic.net) (Quit: jclements)
[04:27:30] *** Joins: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP)
[04:27:30] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/Xx8Erw
[04:27:30] *** Parts: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP) ()
[04:29:36] <graydon> it is a bit of a shame we need to special case every non-ident operator as a lexeme, I'll admit
[04:29:37] <graydon> also note https://github.com/mozilla/rust/issues/4928
[04:31:08] <Eridius> "The lists in TR 10176:2003 are recommended as the minimum set of characters that an implementation should allow in identifiers."
[04:31:25] <Eridius> clearly this means snowman should be added
[04:31:33] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[04:31:36] <xenocons> hrm
[04:32:01] <xenocons> is the #debug thing still around?
[04:32:13] <aatch> xenocons, debug!()
[04:32:14] <cmr> xenocons: debug!()
[04:32:16] <xenocons> ah
[04:32:18] *** Quits: wizeman (quassel@moz-9C343656.dyn.user.ono.com) (Connection reset by peer)
[04:32:28] <cmr> http://static.rust-lang.org/doc/rust.html#logging-system
[04:32:32] *** Joins: jclements (jclements@moz-20AD2EFB.dsl.static.sonic.net)
[04:32:42] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[04:32:44] <xenocons> i think ive got most of my code working now
[04:32:49] <graydon>  á›ˆ and á›— are in XID_Start ...
[04:32:52] *** Joins: wizeman (quassel@moz-9C343656.dyn.user.ono.com)
[04:33:14] <cmr> I can't even see those
[04:33:24] <aatch> What are they supposed to be? (They render, I just don't know what they are)
[04:33:29] <xenocons> im stuck on determining the offset of a match
[04:33:46] <aatch> xenocons, what do you mean?
[04:34:11] <graydon> oh, 0x005f LOW LINE is in XID_Continue after all
[04:34:16] <graydon> aatch: they're runic
[04:34:34] <xenocons> aatch: http://codepad.org/USOgvo7d i converted this code from the one on github, in my C i just subtract the ptr that the offset is found at off the ptr that is the data im seraching, which gets the offset
[04:35:18] *** Quits: brendan (brendaneic@E9758364.9EC0A5AF.CFE928A7.IP) (Quit: brendan)
[04:35:42] <graydon> I guess single lexemes for many of these might be plausible http://en.wikipedia.org/wiki/Unicode_mathematical_operators_and_symbols
[04:35:45] <aatch> xenocons, you can cast *ptrs to uints
[04:35:58] <graydon> but the thing is, if you use them in code you had better have a workaround for people with no input method..
[04:36:24] <xenocons> aatch: i cant work out the variable that relates to the position within the haystack where a match was found, i assumed it was ii, but erm, that appears to be not correct?
[04:36:55] <cmr> graydon: di-, tri-, and quad- graphs!
[04:37:10] <cmr> alternatively the corresponding tex thingy
[04:37:14] <graydon> cmr: I think just mappings as method names. foo.union(bar)
[04:37:59] <graydon> if you can't write "foo âˆª bar", that is
[04:38:16] <graydon> but .. I think it's just asking for trouble
[04:39:46] <aatch> xenocons, I'm not sure what you mean. Can you try more descriptive variables?
[04:39:51] <aatch> `ii` is clear as mud
[04:40:04] <xenocons> aatch: yeah i copied it from https://github.com/killerswan/boyer-moore-search/blob/master/search.rs
[04:40:12] <xenocons> i should try make the variable names clearer
[04:46:08] *** Joins: dbaupp (Thunderbir@moz-C6B1454A.lns20.syd7.internode.on.net)
[04:50:03] *** Quits: steven_is_false (user@moz-144077DE.bchsia.telus.net) (Ping timeout)
[04:50:17] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[04:50:21] *** Quits: steven_is_false (user@moz-144077DE.bchsia.telus.net) (Client exited)
[04:53:35] *** Quits: brson (brson@DA348D07.AD1E507F.3688B332.IP) (Ping timeout)
[04:55:13] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke. It's all a joke.)
[04:56:17] *** Quits: thomaslee (thomaslee@moz-306D3DF4.hsd1.or.comcast.net) (Connection reset by peer)
[04:56:43] *** Joins: thomaslee (thomaslee@moz-306D3DF4.hsd1.or.comcast.net)
[04:59:47] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[04:59:49] *** Joins: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net)
[04:59:52] <dbaupp> cmr: what was the urgency?
[05:00:27] *** Quits: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[05:04:16] *** Quits: jclements (jclements@moz-20AD2EFB.dsl.static.sonic.net) (Ping timeout)
[05:05:01] *** Joins: brson (brson@DA348D07.AD1E507F.3688B332.IP)
[05:05:01] *** ChanServ sets mode: +o brson
[05:07:07] *** Joins: royw (royw@moz-E9B4079C.hsd1.ca.comcast.net)
[05:07:53] <aatch> 83 changed files with 1,413 additions and 1,348 deletions
[05:08:36] <dbaupp> aatch: llvm-rs?
[05:09:49] *** Joins: jclements (jclements@moz-20AD2EFB.dsl.static.sonic.net)
[05:10:09] <aatch> nope, changing #[inline(always)] to #[inline(force)]
[05:10:54] <dbaupp> there's now inline(force) ?
[05:11:03] <dbaupp> or just renamed to make it scarier?
[05:11:26] <aatch> renamed it to make it scarier
[05:11:35] *** Quits: Jesse (jruderman@2557E599.66715431.D25A875A.IP) (Quit: Jesse)
[05:16:48] *** Quits: royw (royw@moz-E9B4079C.hsd1.ca.comcast.net) (Quit: royw)
[05:17:06] <mflamer> I'm finding cases where the compiler acts like it successfully compiled a crate but never creates an executable, is this a known bug?
[05:18:22] <mflamer> I get a list of compiler errors, fix them one by one. At some point rustc quits complaining, but never actually builds anything
[05:19:36] <mflamer> Its tough to figure out exactly why. I have one case I can reproduce. Should I submit it as a bug?
[05:20:07] <dbaupp> mflamer: what does it output if you run it with '-Z time-passes'?
[05:20:29] <mflamer> have never tried that..... 
[05:20:34] <mflamer> gimme a sec
[05:23:23] <mflamer>  gives a list of compiler stages, ending with "method resolution"
[05:25:08] <dbaupp> hm, my rustc doesn't have exactly that, but the last 3 passes are/should be translation, LLVM passes and linking
[05:25:16] <dbaupp> so clearly soemething's gone wrong
[05:25:22] <dbaupp> what version of Rust? 0.6?
[05:25:27] <mflamer> yes
[05:25:30] *** Quits: jclements (jclements@moz-20AD2EFB.dsl.static.sonic.net) (Quit: jclements)
[05:25:49] <dbaupp> do you have a short(ish) test case?
[05:26:25] <mflamer> yes, where should I place it?
[05:27:38] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Ping timeout)
[05:27:49] <dbaupp> anywhere on the internet ;) gist.github.com or any old pastebin works
[05:28:38] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[05:30:21] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[05:33:12] *** Joins: pcwalton (pcwalton@moz-481A040C.hsd1.ca.comcast.net)
[05:33:12] *** ChanServ sets mode: +o pcwalton
[05:33:13] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Quit: eatkinson)
[05:34:00] <mflamer> when I isolate it in another file, now I'm getting some errors.
[05:37:36] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[05:38:14] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[05:39:40] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[05:39:53] *** Joins: fabiand (fabiand@moz-CD45D048.adsl.alicedsl.de)
[05:40:11] <dbaupp> mflamer: oh? does fixing them make the compile go through?
[05:41:18] *** Joins: yardena (yardena@moz-A95F12B1.members.linode.com)
[05:42:54] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[05:45:46] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[05:49:17] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[05:49:35] *** Joins: SingingBoyo (brandon@moz-94AE1D3A.bchsia.telus.net)
[05:50:21] <aatch> Woah, building jemalloc
[05:50:38] <aatch> forgot about that.
[05:52:29] <Jeaye> rusti: let mut s = ~"foo bar"; let foo = ~""; for s.each_split_char(' ') |x| { foo = x.to_owned(); break; } foo
[05:52:35] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/RAcZ
[05:52:57] <Jeaye> rusti: let mut s = ~"foo bar"; let mut foo = ~""; for s.each_split_char(' ') |x| { foo = x.to_owned(); break; } foo
[05:53:00] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/GJfd
[05:53:19] <Jeaye> rusti: let s = ~"foo bar"; let mut foo = ~""; for s.each_split_char(' ') |x| { foo = x.to_owned(); break; } foo
[05:53:20] -rusti- ~"foo"
[05:53:22] <mflamer> trying to fix the errors now
[05:57:10] *** Joins: jclements (jclements@moz-20AD2EFB.dsl.static.sonic.net)
[05:58:16] <xenocons> rusti: let x = ~[1u]; println(fmt!("%?",*x));
[05:58:18] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/OfAZ
[05:58:40] <xenocons> rusti: let x = ~[1u]; println(fmt!("%?",*~x));
[05:58:42] -rusti- ~[1]
[05:58:42] -rusti- ()
[05:58:51] <xenocons> rusti: let x = ~[1u]; println(fmt!("%?",*~x));
[05:58:53] -rusti- ~[1]
[05:58:53] -rusti- ()
[05:59:04] <xenocons> whoops
[05:59:14] <mflamer> dbaupp: the trouble was with an enum and a trait impl (Eq) for the enum. If the enum is defined in the file after the impl, I recieve no compiler errors (but it also dosent build). If the enum is before the impl, I get the appropiate errors 
[06:00:28] <dbaupp> mflamer: woah, that sounds like a bug! do you mean like `enum Foo { .. } impl Eq for Foo { .. }` doesn't compile, and `impl Eq for Foo { .. } enum Foo { .. }` does?
[06:01:15] *** Quits: thomaslee (thomaslee@moz-306D3DF4.hsd1.or.comcast.net) (Client exited)
[06:02:54] <mflamer> https://gist.github.com/anonymous/4ff8fab1041974cb484c
[06:03:10] <mflamer> that's theexample
[06:04:36] <dbaupp> mflamer: well, that makes rust ICE for me
[06:04:41] <dbaupp> are you on windows?
[06:04:49] <dbaupp> (ICE = internal compiler error, btw)
[06:05:12] <mflamer> yes, windows
[06:06:07] <xenocons> hrmm
[06:06:13] <xenocons> rusti: let x = ~[1u]; println(fmt!("%d",*~x));
[06:06:14] <dbaupp> ok, I think the lack of an error is just bad error reporting on windows (possibly still worth a bug report for that part)
[06:06:16] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/RUNT
[06:06:25] <aatch> dbaupp, there's already a bug for it
[06:06:32] <dbaupp> aatch: ok, cool
[06:06:39] <aatch> well, similar anyway
[06:07:08] <aatch> it's to do with the way types are resolved.
[06:07:15] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[06:07:22] <aatch> ah resolve, how you haunt my nightmares
[06:07:44] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[06:07:49] *** Quits: mflamer (Mibbit@moz-C6ED16AA.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[06:08:09] <xenocons> before someone mentioned you could treat ~[] as plain pointers, can you perform arithmetic and vector access doing this? is it just * infront of the current pointer type e.g. *&data)
[06:08:30] <dbaupp> xenocons: you'll need convert them to a * with a method
[06:08:40] <dbaupp> xenocons: to_raw_pointer, maybe?
[06:08:44] <xenocons> ah
[06:09:03] *** Quits: jclements (jclements@moz-20AD2EFB.dsl.static.sonic.net) (Quit: jclements)
[06:09:13] <xenocons> guessing this is in vector somewhere
[06:09:31] <xenocons> vec:;raw::to_ptr
[06:09:34] <dbaupp> yeah, .unsafe_ref(index) and .unsafe_mut_ref(index)
[06:09:40] <xenocons> oh
[06:09:42] <dbaupp> rusti: ~[].unsafe_ref(0)
[06:09:44] -rusti- error: internal compiler error: unexpected failure
[06:09:44] -rusti- note: the compiler hit an unexpected failure path. this is a bug
[06:09:44] -rusti- note: try running with RUST_LOG=rustc=1,::rt::backtrace to get further details and report the results to github.com/mozilla/rust/issues
[06:09:44] -rusti- application terminated with error code 101
[06:09:49] <xenocons> heh
[06:09:55] <dbaupp> rusti: (~[1]).unsafe_ref(0)
[06:09:57] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/QMaK
[06:10:13] <dbaupp> rusti: unsafe { (~[1]).unsafe_ref(0) }
[06:10:15] -rusti- 139948424431984
[06:10:19] <xenocons> i see
[06:10:29] <xenocons> (love the unsafe {} btw)
[06:10:51] <dbaupp> (raw::to_ptr would work too)
[06:11:04] <xenocons> i figure its better to get used to this .something syntax
[06:11:10] <xenocons> is it concrete? (decided to stay in rust?)
[06:11:23] <xenocons> i mean, the way to access stuff like that, not the individual functions
[06:14:01] <dbaupp> yeah, methods are definitely going to stay around
[06:14:47] <dbaupp> (there is (slow but steady) move to convert many of the normal functions into methods)
[06:16:00] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: Don't tell them I was here...)
[06:16:19] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[06:16:57] *** Joins: mflamer (Mibbit@moz-C6ED16AA.hsd1.ca.comcast.net)
[06:17:16] *** Joins: igl1 (igl@moz-EF52208C.adsl.alicedsl.de)
[06:17:35] *** Quits: igl (igl@moz-EA4BCEFC.adsl.alicedsl.de) (Ping timeout)
[06:18:04] *** Joins: Voomer_ (Voomer@moz-E97E8EB7.br.br.cox.net)
[06:18:04] *** Quits: Voomer (Voomer@moz-E97E8EB7.br.br.cox.net) (Connection reset by peer)
[06:18:09] <xenocons> ah
[06:19:13] *** Quits: SingingBoyo (brandon@moz-94AE1D3A.bchsia.telus.net) (Ping timeout)
[06:19:23] <xenocons> and im guessing i cant fn (*) (x:~[T]) { return x.unsafe_ref(0); }
[06:19:35] <xenocons> yet
[06:19:52] *** Quits: brson (brson@DA348D07.AD1E507F.3688B332.IP) (Ping timeout)
[06:20:12] <xenocons> hmm
[06:20:13] <dbaupp> sure you can
[06:20:17] <xenocons> cool
[06:20:22] <dbaupp> although the pointer will then be a dangling reference
[06:20:27] <dbaupp> (since x gets deallocated)
[06:20:31] <xenocons> right, yuck
[06:20:41] <xenocons> hmm 
[06:20:56] <dbaupp> it should work fine with (x: &[T]) -> *T { x.unsafe_ref(0) }
[06:21:06] <xenocons> so i have let mut search needle; if i want to mutate this on a pointer basis, do i need to use unsafe_mut_ref or just unsafe_ref
[06:21:37] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Quit: eatkinson)
[06:21:37] <dbaupp> are you mutating the actual data `needle` points to, or mutating which data it points to?
[06:22:00] <xenocons> good question, example, lastChar = *--search;
[06:22:20] <dbaupp> if you're mutating the data, then unsafe_mut_ref (i.e. *mut T), otherwise just unsafe_ref
[06:22:25] <xenocons> where i translate to: search.unsafe_ref(0) -= 1
[06:22:26] <dbaupp> that looks like *T
[06:22:39] <xenocons> then let mut lastChar = search;
[06:22:54] <dbaupp> yeah
[06:23:11] *** Quits: ysuzuki (ysuzuki@moz-A563888C.ics.keio.ac.jp) (Client exited)
[06:26:22] *** Joins: Blei (philipp@moz-96D25F7A.cust.bluewin.ch)
[06:32:07] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[06:34:24] *** Quits: pcwalton (pcwalton@moz-481A040C.hsd1.ca.comcast.net) (Quit: pcwalton)
[06:34:41] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[06:35:08] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Quit: eatkinson)
[06:39:07] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[06:39:23] *** Quits: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk) (Connection reset by peer)
[06:40:08] *** Joins: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk)
[06:40:22] *** Quits: fabiand (fabiand@moz-CD45D048.adsl.alicedsl.de) (Ping timeout)
[06:40:54] *** Quits: pragmatic (pragmatic@moz-1A421840.hsd1.ca.comcast.net) (Ping timeout)
[06:42:17] *** Joins: true_droid (Adium@moz-123FD9B8.beck.volia.net)
[06:42:41] *** Joins: fabiand (fabiand@moz-CD45D048.adsl.alicedsl.de)
[06:43:19] *** Quits: sankha93 (Instantbir@1B648967.65B4E0A8.8B6C1D65.IP) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[06:44:17] *** Joins: ysuzuki (ysuzuki@moz-A563888C.ics.keio.ac.jp)
[06:44:28] *** Quits: devbug (quassel@moz-E1DE087C.bchsia.telus.net) (Ping timeout)
[06:45:57] *** Joins: sankha93 (Instantbir@1B648967.65B4E0A8.8B6C1D65.IP)
[06:46:57] *** Quits: rustyFriend (Mibbit@moz-9FB1258A.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Quit: http://www.mibbit.com ajax IRC Client)
[06:48:39] *** Joins: devbug (quassel@moz-E1DE087C.bchsia.telus.net)
[06:59:41] *** Joins: pragmatic (pragmatic@moz-1A421840.hsd1.ca.comcast.net)
[07:07:53] <dbaupp> strcat: are you around?
[07:07:57] *** Quits: sankha93 (Instantbir@1B648967.65B4E0A8.8B6C1D65.IP) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[07:07:59] <strcat> yes
[07:08:03] <dbaupp> cool
[07:08:27] <dbaupp> do you think people will get annoyed if I/we start removing the huge number of fn each_* functions from vec and str?
[07:08:47] <dbaupp> or should this wait until there is a nicer syntax for external iterators?
[07:09:04] <strcat> dbaupp: I think we should start removing them
[07:09:06] <aatch> dbaupp, screw those people
[07:09:11] <dbaupp> heh
[07:09:13] <strcat> every day I get more uneasy about our current 'for'
[07:09:25] <strcat> it being a closure where 'break' and 'return' don't always work is... weird
[07:09:38] <dbaupp> to say the least
[07:09:43] <aatch> In my experience, nothing changes until you sit down an actually do something.
[07:09:47] <strcat> and it has the weird move issues of closures
[07:10:01] <strcat> lets see how far we can get with external iterators, imo
[07:10:11] <strcat> the only drawback is that they're harder to implement, sometimes
[07:10:17] <dbaupp> yeah
[07:10:21] <strcat> so we only need internal iterator adaptors, not internal iterators
[07:10:49] <dbaupp> Not sure how to do the each_split* functions in str
[07:11:01] <strcat> dbaupp: they basically just have to be a state machine
[07:11:22] <strcat> they have to keep track of an index in the struct
[07:11:41] <dbaupp> yeah, but there is at least one place where we need to drop the last "split", but only if it is empty
[07:11:58] <strcat> dbaupp: well then you just add an extra bool field :)
[07:12:06] <dbaupp> onto the iterator?
[07:12:09] <strcat> dbaupp: yes
[07:12:13] <strcat> I think...
[07:12:15] <dbaupp> well, that was obvious
[07:12:19] <dbaupp> :)
[07:12:36] <strcat> dbaupp: you just need all of the state saved between iteration in the struct
[07:12:41] <dbaupp> yeah
[07:12:42] <strcat> it's pretty easy until you have to deal with recursion
[07:12:49] <strcat> recursion is.... not fun
[07:12:58] <dbaupp> heh, manually unwinding it
[07:13:01] <strcat> look at the one in TreeMap - and that's a simple data structure with one type of child
[07:13:15] <strcat> TrieMap is harder, and will get even harder when the suffixes are held in buckets
[07:13:31] <strcat> so yeah, that's why internal iterators will stay around - when we haven't put in effort to replace them ;p
[07:14:00] <dbaupp> the treemap one doesn't look *that* bad
[07:14:02] *** Quits: pragmatic (pragmatic@moz-1A421840.hsd1.ca.comcast.net) (Ping timeout)
[07:14:02] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[07:14:02] *** Quits: indirect (indirect_m@moz-770AB053.hsd1.ca.comcast.net) (Ping timeout)
[07:14:18] *** Quits: robarnold (rob@moz-59F6B5.hfc.comcastbusiness.net) (Ping timeout)
[07:14:43] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Ping timeout)
[07:14:43] *** Quits: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net) (Ping timeout)
[07:14:43] *** Joins: robarnold (rob@moz-59F6B5.hfc.comcastbusiness.net)
[07:15:00] *** Joins: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net)
[07:15:01] *** Joins: pragmatic (pragmatic@moz-1A421840.hsd1.ca.comcast.net)
[07:15:01] *** Joins: indirect (indirect_m@moz-770AB053.hsd1.ca.comcast.net)
[07:15:03] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[07:15:16] <strcat> dbaupp: it's annoying though, hoisting the stack frame state into the struct as a vector
[07:15:29] <strcat> and then dealing with the consequences of that ;p
[07:15:48] <dbaupp> yeah, I imagine it's less efficient than a plain internal one, too?
[07:16:06] <strcat> dbaupp: I don't actually know. it's possible that our stack overflow checks are expensive anyway
[07:16:51] <strcat> dbaupp: the depth is log2(n) so the vectors are never big
[07:17:15] <strcat> it could likely reserve the max depth up front
[07:17:25] * strcat doesn't know how big that'd be
[07:18:01] <strcat> I mean if you somehow actually got 2**64 things in there.... the depth would be ~64
[07:18:25] <strcat> would have to actually figure out the worst case balancing bound
[07:18:32] <dbaupp> logarithms are pretty awesome
[07:18:35] *** Joins: pyrac (pyrac@29E99D66.73C89388.AD05C589.IP)
[07:18:54] <dbaupp> I'm sure just allocating 32/64 up front would give some benefit
[07:19:08] <dbaupp> (even if it's not the correct bound)
[07:19:17] <strcat> dbaupp: yeah, but it can likely be much smaller
[07:19:24] <strcat> uint can index every byte in memory
[07:19:25] *** Joins: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com)
[07:19:34] <dbaupp> yup
[07:19:35] <strcat> and we know how big a tree node is
[07:19:45] <strcat> and we use jemalloc now so we know what the allocator will round up to
[07:20:00] <dbaupp> but 64 is pretty small
[07:20:00] <strcat> there's actually a function it provides to ask at runtime
[07:20:11] <strcat> yeah, but it could be smaller :)
[07:20:36] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[07:21:13] <dbaupp> gah! one tiny non-code change and now a full recompile :(
[07:21:21] *** Quits: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com) (Ping timeout)
[07:21:35] <strcat> a treenode for 0 size key/value is 3 words (assuming no ~ header)
[07:21:41] <strcat> so 24 bytes, rounded up to 32 bytes
[07:22:20] <strcat> so that brings the approximate max depth down to 59 ;p
[07:22:48] <strcat> anyway x86_64 is really 48-bit
[07:22:58] <strcat> address space
[07:23:14] <strcat> so... worst case 43
[07:23:28] <strcat> on non-existent computers with 256TiB of ram
[07:24:09] <dbaupp> yeah, and wikipedia says that AA-trees are balanced, so that should be a hard upper bound
[07:24:36] <strcat> dbaupp: yeah but they still get a bit less balanced than perfect
[07:24:43] <strcat> not sure by how much
[07:24:46] <dbaupp> true, so 44?
[07:24:58] <strcat> dbaupp: something like that. anyway it can just reserve something like 16
[07:25:02] <strcat> will cover 99% of cases
[07:25:04] <strcat> or even 8
[07:26:29] <strcat> dbaupp: or we could throw it out and use a b-tree with higher fanout :)
[07:27:27] <dbaupp> that's the optimal approach, I guess, but it has the drawback of requiring many more lines of code ;)
[07:28:10] *** Quits: mflamer (Mibbit@moz-C6ED16AA.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[07:28:58] <strcat> yeah I did an aa tree because they're a super simple form of rbtrees
[07:29:02] *** Joins: sanxiyn (tinuviel@858F408C.B797260D.EF43EC08.IP)
[07:29:13] <sanxiyn> I think https://mail.mozilla.org/pipermail/rust-dev/2013-June/thread.html stopped updating
[07:29:14] <strcat> and laziness triumps over all other design needs
[07:29:19] <sanxiyn> Can anyone else confirm that?
[07:29:28] <strcat> sanxiyn: yeah, the archiving stopped :(
[07:29:36] <sanxiyn> What happened?
[07:29:58] *** Joins: oksobul (Instantbir@5420C305.88F2F905.4A037BC4.IP)
[07:30:09] <strcat> sanxiyn: don't know, it's archived on other sites like gmane
[07:30:22] <strcat> I guess rust's mailman (or whatever it is) is broken
[07:30:36] <sanxiyn> It is Mailman
[07:31:51] *** Quits: ysuzuki (ysuzuki@moz-A563888C.ics.keio.ac.jp) (Client exited)
[07:32:01] *** Quits: devbug (quassel@moz-E1DE087C.bchsia.telus.net) (Connection reset by peer)
[07:32:28] *** Joins: ysuzuki (ysuzuki@moz-A563888C.ics.keio.ac.jp)
[07:32:50] *** Quits: ysuzuki (ysuzuki@moz-A563888C.ics.keio.ac.jp) (Client exited)
[07:36:36] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[07:38:29] *** Joins: ysuzuki (ysuzuki@moz-F333A8C8.st.keio.ac.jp)
[07:45:41] <dbaupp> aatch: are you waiting for a compile or something? :)
[07:45:51] <aatch> dbaupp, yup lol.
[07:45:58] <dbaupp> hehe
[07:46:05] <aatch> Also, having over 1000 issues open is kinda disturbing
[07:46:27] <dbaupp> yeah, a lot of them seem to be bitrotted/fixed though
[07:46:35] <dbaupp> (at least, you're able to close a lot)
[07:47:57] <Blei> so, is the output of --emit-llvm -S supposed to be valid? it doesn't compile with llc
[07:48:45] <aatch> Blei, it should compile, what happens when you try?
[07:49:59] <Blei> https://gist.github.com/Blei/5727650
[07:50:24] <Blei> hmm, apparently if you do this it works: rustc --emit-llvm foo.rs; llvm-dis foo.bc
[07:50:42] <sanxiyn> It is supposed to be valid.
[07:51:14] <aatch> It is valid, but only the version used by rust
[07:51:37] <aatch> Yep, it's a 3.3 feature
[07:51:51] <sanxiyn> What is a 3.3 feature?
[07:51:59] <aatch> that attribute syntax
[07:52:01] <Blei> ah, ok
[07:52:29] <aatch> Blei, rust does build the LLVM tools, so you can use the one from there
[07:52:31] *** Joins: rust (Mibbit@A1793499.EC15082C.D7C984E0.IP)
[07:52:49] <Blei> aatch: will do, thanks
[07:53:42] *** Joins: doener (bs@moz-AA189A5A.unitymedia.biz)
[08:01:26] *** Joins: jviereck (Adium@moz-39C72C7.dip0.t-ipconnect.de)
[08:01:43] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[08:02:18] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[08:05:59] *** Quits: graydon (graydon@moz-8B524EBD.cable.teksavvy.com) (Quit: Leaving.)
[08:06:05] *** Quits: sanxiyn (tinuviel@858F408C.B797260D.EF43EC08.IP) (Quit: Leaving)
[08:08:31] *** Quits: blitter (blitter@moz-BA14D5CF.dyn.centurytel.net) (Ping timeout)
[08:09:27] *** Joins: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[08:09:28] *** Quits: indirect (indirect_m@moz-770AB053.hsd1.ca.comcast.net) (Ping timeout)
[08:16:46] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[08:25:42] *** Quits: pyrac (pyrac@29E99D66.73C89388.AD05C589.IP) (Quit: pyrac)
[08:27:02] *** Joins: indirect (indirect_m@moz-770AB053.hsd1.ca.comcast.net)
[08:29:56] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[08:36:35] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[08:36:35] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/fBy9HQ
[08:36:35] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[08:36:37] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[08:36:37] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/3dumGg
[08:36:37] <ghrust> 13rust/06auto 149b37439 15Philipp BrÃ¼schweiler: rustc::metadata::decoder: cleanup and slightly speed up each_path
[08:36:37] <ghrust> 13rust/06auto 14af863cf 15bors: auto merge of #6946 : Blei/rust/fix-each-path, r=Aatch
[08:36:37] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[08:39:04] *** Quits: ysuzuki (ysuzuki@moz-F333A8C8.st.keio.ac.jp) (Client exited)
[08:40:41] *** Quits: Blei (philipp@moz-96D25F7A.cust.bluewin.ch) (Quit: WeeChat 0.4.1)
[08:40:48] *** Joins: thomaslee (thomaslee@moz-306D3DF4.hsd1.or.comcast.net)
[08:41:36] *** Joins: berak (chatzilla@3591FB4A.8B38C502.16E13E53.IP)
[08:43:45] *** Joins: z0w0 (zack@moz-1EDE5BC0.lnse1.woo.bigpond.net.au)
[08:44:43] <santiago> When you compile a lib, do you also need some sort of header file to use it, or just the lib is enough? 
[08:45:37] <dbaupp> santiago: all the info rust needs to use a (rust) lib is included in it
[08:45:46] <dbaupp> so just the lib is enough
[08:45:56] <santiago> dbaupp: Awesome, that's great. 
[08:53:55] <dbaupp> aatch: https://github.com/mozilla/rust/pull/6988 r?
[08:54:09] *** Quits: pragmatic (pragmatic@moz-1A421840.hsd1.ca.comcast.net) (Quit: pragmatic)
[08:55:20] <aatch> dbaupp, done
[08:55:25] *** Parts: berak (chatzilla@3591FB4A.8B38C502.16E13E53.IP) ()
[08:56:04] *** Quits: SimonSapin (simon@5924A8D9.7F79A810.4065847B.IP) (Quit: Leaving.)
[08:56:22] <dbaupp> thanks
[09:00:50] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[09:03:14] *** Joins: EXetoC (ex@moz-C741B177.customer.t3.se)
[09:04:05] *** Parts: rust (Mibbit@A1793499.EC15082C.D7C984E0.IP) ()
[09:09:35] <aatch> Woo!
[09:10:05] <aatch> You know how macros didn't handle empty sequences very well in some cases?
[09:14:21] <doener> rusti: fmt!("")
[09:14:23] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/ADCZ
[09:14:34] *** Joins: pyrac (pyrac@moz-E5F8F718.math.u-bordeaux1.fr)
[09:18:39] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[09:19:07] *** Joins: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk)
[09:19:14] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[09:20:13] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[09:21:52] *** Joins: MaikKlein (maik@moz-F9B59FC9.dip0.t-ipconnect.de)
[09:25:44] *** Quits: victorporof (victorporo@60FA9E67.483E5FE1.9B1E38F4.IP) (Quit: victorporof)
[09:26:42] *** Joins: SimonSapin (simon@5924A8D9.7F79A810.4065847B.IP)
[09:27:37] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[09:27:37] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/3dumGg
[09:27:37] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[09:28:13] *** Joins: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net)
[09:28:19] *** Joins: thomaslee_ (thomaslee@moz-306D3DF4.hsd1.or.comcast.net)
[09:28:21] *** Quits: thou (thou@144F3092.A9FAD7B8.947355CE.IP) (Ping timeout)
[09:29:17] *** Quits: thomaslee (thomaslee@moz-306D3DF4.hsd1.or.comcast.net) (Ping timeout)
[09:29:46] *** Joins: thou (thou@moz-1C1CA9F7.fasttrackcomm.net)
[09:30:36] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[09:30:36] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/dXjEKA
[09:30:36] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[09:30:36] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[09:30:37] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/klVOmg
[09:30:37] <ghrust> 13rust/06auto 1443e52e4 15Huon Wilson: syntax: move functions from deriving/mod to deriving/generic....
[09:30:37] <ghrust> 13rust/06auto 146d5beda 15Huon Wilson: syntax: move expand_generic_deriving to be a method on TraitDef
[09:30:38] <ghrust> 13rust/06auto 14ebf7281 15Huon Wilson: syntax: rewrite deriving(Ord) to not require Eq....
[09:30:39] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[09:33:07] <nmatsakis> bjz: ping
[09:34:50] *** Joins: victorporof (victorporo@60FA9E67.483E5FE1.9B1E38F4.IP)
[09:34:57] *** Quits: victorporof (victorporo@60FA9E67.483E5FE1.9B1E38F4.IP) (Client exited)
[09:36:04] *** Quits: MaikKlein (maik@moz-F9B59FC9.dip0.t-ipconnect.de) (Ping timeout)
[09:37:32] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[09:39:24] <bjz> nmatsakis: pong
[09:39:29] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[09:39:46] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Input/output error)
[09:39:59] <nmatsakis> bjz: I wanted to ask you what the state of your GL callbacks was :)
[09:40:07] <nmatsakis> bjz: I am doing some research into how we use fn types
[09:40:13] <nmatsakis> bjz: validating my assumptions, as it were :)
[09:40:19] *** Quits: SimonSapin (simon@5924A8D9.7F79A810.4065847B.IP) (Quit: Leaving.)
[09:40:40] <bjz> nmatsakis: which ones? the function loader, or the glfw wrapper?
[09:41:03] <nmatsakis> bjz: incidentally I haven't had more time to look at th extern "C" fix, still stalled on whatever this windows issue is
[09:41:24] <nmatsakis> bjz: I guess I mean, the glfw wrapper?
[09:41:34] <bjz> https://github.com/bjz/glfw-rs/blob/master/src/private.rs
[09:41:55] <bjz> It's not the prettiest thing in the world
[09:42:36] <bjz> then I have all the function types here: https://github.com/bjz/glfw-rs/blob/master/src/glfw.rs#L53
[09:43:16] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[09:43:39] <bjz> I then have a macro that adds the callback to TLS: https://github.com/bjz/glfw-rs/blob/master/src/glfw.rs#L460
[09:44:15] <bjz> and this is how they are used in the window impl: https://github.com/bjz/glfw-rs/blob/master/src/glfw.rs#L654
[09:44:23] <nmatsakis> that was my next question
[09:44:24] <nmatsakis> :)
[09:44:47] <bjz> so
[09:44:58] <nmatsakis> wait, do you hvae code that uses the window impl?
[09:45:14] <bjz> I need to do that because each callback is associated with a different window
[09:45:17] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Input/output error)
[09:45:18] <bjz> just a sec
[09:45:35] <bjz> https://github.com/bjz/glfw-rs/blob/master/examples/callbacks.rs
[09:46:07] <bjz> the error and monitor callbacks are easier, because they are global
[09:46:10] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[09:46:49] <bjz> you can see them here: https://github.com/bjz/glfw-rs/blob/master/src/private.rs#L121
[09:47:51] <bjz> and this is how the error callback is set: https://github.com/bjz/glfw-rs/blob/master/src/glfw.rs#L149
[09:48:22] <bjz> as I say, it's a little convoluted, not my proudest moment
[09:48:24] <bjz> :)
[09:49:00] *** Quits: aatch (aatch@moz-B437F499.pocketrent.com) (Client exited)
[09:49:04] <dbaupp> aatch: what about macros and empty sequences?
[09:50:53] <bjz> nmatsakis: https://github.com/Jeaye/q3/blob/master/src/main.rs#L69
[09:51:22] <bjz> nmatsakis: apparently it crashes on close for Jeaye though :(
[09:51:46] <bjz> nmatsakis: we haven't managed to figure it out
[09:52:54] <nmatsakis> bjz: ok, thanks
[09:53:49] <bjz> nmatsakis: hope that helps!
[09:53:59] *** Quits: doomlord (doomlod@moz-8F385DB0.range109-153.btcentralplus.com) (Ping timeout)
[09:54:15] <nmatsakis> bjz: well, can I ask your opinion about something?
[09:54:17] *** Joins: ysuzuki (ysuzuki@moz-A563888C.ics.keio.ac.jp)
[09:54:22] <bjz> sure
[09:54:42] <nmatsakis> bjz: actually, might have to defer, I think my daughter is stirring ;)
[09:54:48] <bjz> hehe
[09:54:53] <bjz> :)
[10:00:01] *** Joins: sk (sk@44FB31D1.A56C954C.78DD174B.IP)
[10:04:08] *** Joins: SimonSapin (simon@5924A8D9.7F79A810.4065847B.IP)
[10:05:00] *** Joins: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP)
[10:06:17] *** Quits: heftig (heftig@moz-B1A193BC.dip0.t-ipconnect.de) (Ping timeout)
[10:07:39] *** kimundi is now known as zz_kimundi
[10:08:58] *** Quits: pyrac (pyrac@moz-E5F8F718.math.u-bordeaux1.fr) (Ping timeout)
[10:09:42] *** zz_kimundi is now known as kimundi
[10:10:30] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[10:11:01] *** Joins: aruniiird (arun@93268CE3.A3499980.FFE8C4AF.IP)
[10:11:10] *** Joins: heftig (heftig@moz-B679706C.dip0.t-ipconnect.de)
[10:12:48] *** Joins: sankha93 (Instantbir@83A1CD4B.EEA5FE15.8B6C1D65.IP)
[10:13:03] *** Quits: aruniiird (arun@93268CE3.A3499980.FFE8C4AF.IP) (Ping timeout)
[10:16:24] *** Quits: jviereck (Adium@moz-39C72C7.dip0.t-ipconnect.de) (Quit: Leaving.)
[10:17:50] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[10:19:15] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[10:19:45] *** Quits: thou (thou@moz-1C1CA9F7.fasttrackcomm.net) (Input/output error)
[10:22:28] *** Quits: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net) (Ping timeout)
[10:22:30] *** Quits: SimonSapin (simon@5924A8D9.7F79A810.4065847B.IP) (Quit: Leaving.)
[10:26:31] *** Joins: brendan (brendaneic@E9758364.9EC0A5AF.CFE928A7.IP)
[10:28:22] *** Joins: koomi (koomi@moz-E8AECC1E.pools.arcor-ip.net)
[10:29:18] *** Joins: aruniiird (arun@moz-3DB73AA5.azulsystems.com)
[10:29:36] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[10:31:29] *** Quits: sankha93 (Instantbir@83A1CD4B.EEA5FE15.8B6C1D65.IP) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[10:34:33] *** Quits: ysuzuki (ysuzuki@moz-A563888C.ics.keio.ac.jp) (Client exited)
[10:37:55] *** Quits: thomaslee_ (thomaslee@moz-306D3DF4.hsd1.or.comcast.net) (Connection reset by peer)
[10:38:20] *** Joins: thomaslee (thomaslee@moz-306D3DF4.hsd1.or.comcast.net)
[10:42:01] *** Quits: heftig (heftig@moz-B679706C.dip0.t-ipconnect.de) (Quit: Quitting)
[10:43:24] *** Joins: heftig (heftig@moz-B679706C.dip0.t-ipconnect.de)
[10:55:18] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[10:56:02] *** Quits: thomaslee (thomaslee@moz-306D3DF4.hsd1.or.comcast.net) (Client exited)
[10:58:45] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: bbl)
[11:04:11] <cmr> dbaupp: it was nothing urgent, just wanted to see the effect of the jemalloc pull :p
[11:08:43] *** kimundi is now known as zz_kimundi
[11:16:54] *** Joins: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com)
[11:18:47] *** Quits: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com) (Ping timeout)
[11:19:50] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[11:21:42] *** Quits: aruniiird (arun@moz-3DB73AA5.azulsystems.com) (Ping timeout)
[11:21:44] <dbaupp> cmr: oh I see... it doesn't appear to have had a huge impact :(
[11:22:43] *** Joins: benw (Mibbit@moz-B17FABB9.lns20.cbr1.internode.on.net)
[11:23:25] <dbaupp> has anyone happened to have asm!("cpuid") (or anything else) work any point?
[11:27:01] <benw> Hi, I'm chasing what I think is a bug in std::net::tcp. My test cases causes a failed assertion in libuv/src/unix/stream.c.
[11:27:45] *** zz_kimundi is now known as kimundi
[11:27:54] *** Joins: jviereck (Adium@moz-39C72C7.dip0.t-ipconnect.de)
[11:28:19] <benw> I'm just looking for a sanity check, to confirm that the interface of std::net::tcp is intended to be safe.
[11:30:53] <benw> i.e. a test case that just uses std::net::tcp should not be able to provoke a crash in libuv.
[11:32:18] <benw> The alternative would be that clients of std::net::tcp are required to be well-behaved.
[11:36:55] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[11:38:48] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[11:43:24] *** Joins: aruniiird (arun@D56A2CE1.FA52E998.FFE8C4AF.IP)
[11:53:55] *** Joins: snearch (snearch@moz-C8C93E58.pool.mediaways.net)
[12:02:38] *** kimundi is now known as zz_kimundi
[12:04:39] *** Quits: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net) (Client exited)
[12:05:08] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[12:08:14] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (Ping timeout)
[12:11:16] *** Quits: benw (Mibbit@moz-B17FABB9.lns20.cbr1.internode.on.net) (Quit: http://www.mibbit.com ajax IRC Client)
[12:11:19] *** Joins: Blei (philipp@moz-96D25F7A.cust.bluewin.ch)
[12:15:10] *** Quits: wizeman (quassel@moz-9C343656.dyn.user.ono.com) (Client exited)
[12:15:38] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[12:21:32] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[12:28:55] *** Quits: fabiand (fabiand@moz-CD45D048.adsl.alicedsl.de) (Quit: Verlassend)
[12:35:11] <xenocons> just got back from 2600 heh,got 2 guys interested in rust
[12:37:03] <bstrie> xenocons: you are a time traveler from the year 2600?
[12:37:14] <xenocons> hah
[12:37:48] <xenocons> http://en.wikipedia.org/wiki/2600:_The_Hacker_Quarterly
[12:38:08] <xenocons> had a bit of a talk about jemalloc
[12:38:45] <xenocons> one of the guys was interested to see if dlmalloc had been benchmarked against jemalloc or something
[12:39:19] <xenocons> i was like 'just join irc and ask' so i guess we will see..
[12:42:26] * dbaupp sidles up to bstrie
[12:42:32] <dbaupp> https://github.com/mozilla/rust/pull/6988 r?
[12:44:56] *** Joins: annodomini (lambda@moz-9AC5B452.hsd1.ma.comcast.net)
[12:45:52] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[12:45:58] *** Joins: reyre_ (reyre@F2D29657.F60B0462.67AC9B1.IP)
[12:49:34] *** Joins: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP)
[12:55:11] <dbaupp> bstrie: (I was possibly too subtle) ^
[12:55:58] <bstrie> no, I got the hint :P reviewing it
[12:56:18] <mleise> "The magazine's name comes from the phreaker discovery in the 1960s that the transmission of a 2600 hertz tone (which could be produced perfectly with a plastic toy whistle given away free with Cap'n Crunch cerealâ€”discovered by friends of John Draper) over a long-distance trunk connection gained access to "operator mode" and allowed the user to explore aspects of the telephone system that were not otherwise accessible."
[12:57:51] <dbaupp> bstrie: cool :)
[12:57:53] <xenocons> the glory days
[12:58:04] *** Joins: adu (ajr@moz-96FE9B84.washdc.fios.verizon.net)
[12:58:50] <mleise> xenocons: that's what I thought. back then you could do real magic. what can you do with a toy whistle today? :(
[12:58:59] <mleise> annoy your neighbour's dog?
[12:59:40] <dbaupp> xenocons: just reading wikipedia "dlmalloc performance was inversely proportional to the number of threads"
[13:00:00] <dbaupp> "[jemalloc] scale[s] linearly with the number of threads"
[13:00:15] <dbaupp> http://en.wikipedia.org/wiki/C_dynamic_memory_allocation#dlmalloc
[13:00:45] <dbaupp> so I'm guessing that jemalloc is significantly more appropriate for Rust (assuming that the person you were talking to was talking about that dlmalloc)
[13:01:50] <mleise> I didn't know there was more than kalloc, malloc, calloc and alloca.
[13:02:49] <dbaupp> these are just different implementations of malloc
[13:04:28] <mleise> ok i see, its comon to use your initials as prefix for your malloc implementation. then mine would be 'mlmalloc'
[13:05:37] <bstrie> mleise: don't be a sheep, stand out and call yours Awesome_Malloc
[13:06:14] <mleise> should it use a global lock or be lock-free?
[13:07:08] <bstrie> mleise: neither. wake up, sheeple!
[13:07:39] <mleise> so... a local lock, alright
[13:07:53] *** Quits: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP) (Ping timeout)
[13:09:32] <bstrie> some other ideas for names, taken from /usr/share/dict/words
[13:09:39] <bstrie> agalloch
[13:09:47] <bstrie> allocaffeine
[13:09:56] <bstrie> allochiral
[13:10:06] <bstrie> allochromatic
[13:10:18] <bstrie> ballocks
[13:10:29] <bstrie> crystallochemistry
[13:10:47] <bstrie> thallochlore
[13:11:20] <dbaupp> crystallochemistry sounds like a good allocator
[13:12:26] *** Quits: brendan (brendaneic@E9758364.9EC0A5AF.CFE928A7.IP) (Quit: brendan)
[13:12:36] <xenocons> dbaupp: from the limited readings ive had, i would agree
[13:12:53] <xenocons> mleise: what can you do with a toy whistle today? what CANT you do!
[13:13:45] *** Joins: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP)
[13:14:06] *** Joins: fabiand (fabiand@2FF87739.3A27401E.16E13E53.IP)
[13:21:51] *** Joins: sankha93 (Instantbir@83A1CD4B.EEA5FE15.8B6C1D65.IP)
[13:29:57] *** Joins: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP)
[13:31:24] *** Quits: fabiand (fabiand@2FF87739.3A27401E.16E13E53.IP) (Ping timeout)
[13:31:26] *** Quits: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP) (Client exited)
[13:32:21] *** Joins: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP)
[13:32:39] *** Quits: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP) (Client exited)
[13:33:17] *** Joins: fabiand (fabiand@2FF87739.3A27401E.16E13E53.IP)
[13:34:46] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[13:35:13] *** Quits: reyre_ (reyre@F2D29657.F60B0462.67AC9B1.IP) (Client exited)
[13:36:10] <ssbr> dbaupp: Yeah, I'd probably call it "is" and not "was", but a whole bunch of stuff has come up in my personal life (mostly relating to graduating / getting a job)
[13:36:16] <ssbr> so it's on hold while I sort stuff out
[13:37:37] *** Quits: annodomini (lambda@moz-9AC5B452.hsd1.ma.comcast.net) (Quit: annodomini)
[13:38:50] *** Joins: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP)
[13:40:24] *** zz_kimundi is now known as kimundi
[13:42:46] <dbaupp> ssbr: good luck :)
[13:42:49] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[13:45:25] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[13:45:47] *** Joins: brendan (brendaneic@88F51059.F3BBB17D.144F44FA.IP)
[13:46:30] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[13:47:34] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[13:48:02] *** Joins: reyre_ (reyre@F2D29657.F60B0462.67AC9B1.IP)
[13:53:50] *** Joins: pwalton (pcwalton@moz-481A040C.hsd1.ca.comcast.net)
[13:56:08] *** Joins: MaikKlein (maik@moz-F9B59FC9.dip0.t-ipconnect.de)
[13:56:16] *** Joins: orshem (orshem@19491716.F0FDCE77.E3D28531.IP)
[13:56:17] <jensnockert> bjz: I'm working on those interpolations now.
[13:57:50] <dbaupp> bstrie: thanks :)
[13:59:48] *** Quits: fabiand (fabiand@2FF87739.3A27401E.16E13E53.IP) (Quit: Verlassend)
[14:00:18] *** Joins: SimonSapin (simon@A5049320.3E93794D.61EA6C28.IP)
[14:00:35] *** Joins: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP)
[14:00:35] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14b99c6c6 to 14af863cf: 02http://git.io/N3iJvQ
[14:00:35] *** Parts: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP) ()
[14:00:39] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[14:00:39] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/ckC_vQ
[14:00:39] <ghrust> 13rust/06auto 1443e52e4 15Huon Wilson: syntax: move functions from deriving/mod to deriving/generic....
[14:00:39] <ghrust> 13rust/06auto 146d5beda 15Huon Wilson: syntax: move expand_generic_deriving to be a method on TraitDef
[14:00:39] <ghrust> 13rust/06auto 14ebf7281 15Huon Wilson: syntax: rewrite deriving(Ord) to not require Eq....
[14:00:40] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[14:02:32] *** Quits: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP) (Ping timeout)
[14:04:07] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[14:04:08] *** Joins: jdm (jdm@DB05BBF2.BB1F48F2.971E19F6.IP)
[14:04:11] *** Joins: sanxiyn (tinuviel@858F408C.B797260D.EF43EC08.IP)
[14:04:23] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[14:05:45] <sanxiyn> Borrow checker help?
[14:05:46] <sanxiyn> http://pastebin.mozilla.org/2495213
[14:05:48] *** Joins: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net)
[14:06:28] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[14:06:32] <MaikKlein> do we have this now in rust? http://www.phoronix.com/scan.php?page=news_item&px=MTM4NDk
[14:06:46] <dbaupp> sanxiyn: does `&'self self.a` work?
[14:07:07] <bstrie> MaikKlein: yes, I think we're using it
[14:07:11] *** Joins: berak (chatzilla@4D822416.5F42470D.16E13E53.IP)
[14:07:20] <MaikKlein> cool
[14:07:25] *** Parts: orshem (orshem@19491716.F0FDCE77.E3D28531.IP) (WeeChat 0.4.0)
[14:07:25] <bstrie> MaikKlein: iirc the problem is that it's so immature right now that it's making us slower :P
[14:07:30] *** Joins: lmandel (lmandel@F2D29657.F60B0462.67AC9B1.IP)
[14:07:52] *** Parts: berak (chatzilla@4D822416.5F42470D.16E13E53.IP) ()
[14:08:06] <dbaupp> bstrie: that was the basic-block vectoriser (which is disabled for now in Rust)... is that the same thing?
[14:08:06] <MaikKlein> :p
[14:08:54] <sanxiyn> MaikKlein: Yup, it's there:
[14:08:54] <sanxiyn> https://github.com/mozilla/rust/blob/incoming/src/librustc/back/passes.rs#L120
[14:09:29] <bstrie> that article appears to be conflating llvm and clang
[14:09:44] *** Quits: steven_is_false (user@moz-144077DE.bchsia.telus.net) (Client exited)
[14:09:45] <bstrie> unless I'm mistaken and llvm actually has -O3, -02, and -Os flags...
[14:09:57] <MaikKlein> super weird that llvm is a word and not an acronym :D
[14:10:08] <Yoric> Many people do.
[14:10:13] <Yoric> (conflate llvm and clang)
[14:10:18] <bstrie> MaikKlein: "LLVM" stand for "LLVM Is Not An Acronym"
[14:10:33] <sanxiyn> bstrie: llc actually has -O{0,1,2,3}
[14:10:39] <MaikKlein> bstrie, wow this is so bad :D
[14:10:55] <kimundi>  LINAA?
[14:11:02] <bstrie> MaikKlein: I may be being facetious
[14:11:14] <sanxiyn> dbaupp: No that doesn't work
[14:11:19] <sanxiyn> (Same error, as far as I can tell)
[14:11:26] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[14:11:41] <sanxiyn> The question is, requirements are apparently conflicting, but what is the difference?
[14:11:44] <sanxiyn> They look same to me...
[14:12:21] <dbaupp> sanxiyn: oh :(
[14:12:40] <dbaupp> I have a feeling that that might actually be unsafe, so the compiler is correct in rejecting it, maybe?
[14:13:17] <sanxiyn> dbaupp: I thought the same thing, but I can't see how...
[14:13:45] <dbaupp> since b is supposed to point to immutable data, but a can be modified
[14:14:18] <dbaupp> `b: &'self const Option<~T>` might work, but I'm guessing again ;P
[14:14:35] <dbaupp> (also, not sure if const is deprecated yet(?))
[14:14:46] <sanxiyn> Not &'self mut...?
[14:14:55] <dbaupp> oh, that would work too
[14:15:08] <dbaupp> but it would force everything you put into b to be a &mut pointer
[14:15:31] <sanxiyn> Except it doesn't work... :(
[14:15:32] <Blei> sanxiyn: change the method signature to:  fn set_b(&'self mut self) {
[14:15:48] <sanxiyn> Blei: ?!
[14:16:03] <sanxiyn> Wow, that worked. What is going on?!
[14:16:18] <Blei> the ways of the rust borrow checker are mysterious *shrug*
[14:17:00] <sanxiyn> So inferred lifetime for &self is not 'self?
[14:17:02] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[14:17:07] <Blei> i think so
[14:17:09] <bstrie> sanxiyn: make sure it runs, even if it compiles
[14:17:18] <dbaupp> sanxiyn: nope, that was changed
[14:17:19] <Blei> everything unnamed is something new iirc
[14:17:27] <dbaupp> that was too inflexible
[14:19:15] *** Quits: MaikKlein (maik@moz-F9B59FC9.dip0.t-ipconnect.de) (Ping timeout)
[14:19:34] *** Joins: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP)
[14:19:35] <sanxiyn> Hm I get no hit for "self mut self" in Rust source
[14:19:37] <bstrie> I'm impressed that the count in the bug tracker has fallen by 30 or so in the past day
[14:19:40] <sanxiyn> I guess this is uncommon...
[14:19:58] <dbaupp> bstrie: aatch was waiting for (several) compiles
[14:20:20] <sanxiyn> Blei: Thanks a lot
[14:20:24] <cmr> bstrie: triage closed a few I think
[14:21:04] *** Joins: MaikKlein (maik@moz-F9B59FC9.dip0.t-ipconnect.de)
[14:21:18] <bstrie> yes, the recent triage efforts seem to be paying off nicely
[14:21:41] <bstrie> the usual "oh crap we have a release in two days, let's start poring through bugs" was getting old :P
[14:21:50] <Blei> it's an adventure to instantiate that type though
[14:21:53] <Blei> already hit an ice
[14:23:42] *** Quits: pwalton (pcwalton@moz-481A040C.hsd1.ca.comcast.net) (Quit: pwalton)
[14:25:14] <sanxiyn> bstrie: I confirmed that it runs too
[14:26:18] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Quit: Eaten by a grue)
[14:26:35] <sanxiyn> http://pastebin.mozilla.org/2495323
[14:26:47] <sanxiyn> Blei: How did you hit ICE?
[14:26:54] <MaikKlein> hm how would I find out if "external function pointers" are ready? Is there somewhere at ticket?
[14:27:06] *** Joins: jeff (jeff@4231C034.745B261B.F12515B4.IP)
[14:27:17] <Blei> sanxiyn: let mut s = S { a: None, b: &None };
[14:27:18] <bstrie> MaikKlein: what is an external function pointer?
[14:27:32] <cmr> MaikKlein: https://github.com/mozilla/rust/pull/6661
[14:28:00] <Blei> i know what the problem is, but i'm not sure about the fix
[14:28:01] <MaikKlein> bstrie, I am not sure but bjz needs it https://github.com/bjz/gl-rs
[14:28:05] <MaikKlein> cmr, thanks!
[14:28:12] <jensnockert> I wish all x86-64 processors had FMA :(
[14:28:33] <sanxiyn> jensnockert: Does *anything* have it?
[14:28:33] <dbaupp> jensnockert: what generation/brand is required for fma?
[14:28:44] <sanxiyn> IIRC, no current Intel chip has it
[14:29:25] <jensnockert> dbaupp, sanxiyn: Haswell and Bulldozer+
[14:29:26] <MaikKlein> hmmm okay I am so confused right now
[14:29:50] <jensnockert> But it is super-silly to evaluate polynomials without it :(
[14:30:15] <sanxiyn> Blei: Huh that is the error message I have never seen...
[14:30:25] <dbaupp> rusti: None
[14:30:26] -rusti- error: internal compiler error: unexpected failure
[14:30:26] -rusti- note: the compiler hit an unexpected failure path. this is a bug
[14:30:26] -rusti- note: try running with RUST_LOG=rustc=1,::rt::backtrace to get further details and report the results to github.com/mozilla/rust/issues
[14:30:26] -rusti- application terminated with error code 101
[14:30:37] <sanxiyn> internal compiler error: Autoderef but type not derefable
[14:30:41] <sanxiyn> (Very mysterious)
[14:30:42] <bstrie> haha
[14:30:43] <dbaupp> Blei: it's that^ error, right?
[14:30:51] <bstrie> rusti: Some(1)
[14:30:53] -rusti- Some(1)
[14:30:57] <dbaupp> jensnockert: silly or slow?
[14:30:59] <Blei> dbaupp: haha, exactly
[14:31:06] <MaikKlein> this https://github.com/mozilla/rust/pull/6661 got closed and referenced to https://github.com/mozilla/rust/issues/1192. But https://github.com/mozilla/rust/issues/1192 got closed and referenced to this https://github.com/mozilla/rust/pull/6661
[14:31:11] <jensnockert> dbaupp: Silly as in slower and lower precision.
[14:31:19] <cmr> MaikKlein: 6661 isn't closed.
[14:31:34] <MaikKlein> cmr, oh
[14:31:50] <sanxiyn> jensnockert: Haswell isn't out yet?
[14:31:59] <jensnockert> sanxiyn: It was released a few days ago.
[14:32:03] <sanxiyn> Oh
[14:32:16] <dbaupp> jensnockert: oh, right
[14:32:20] <jensnockert> sanxiyn: I don't think you can buy one yet, but they have been reviewed etc.
[14:32:44] <sanxiyn> Indeed, released 3 days ago or so
[14:32:44] <sanxiyn> ...
[14:32:47] <jensnockert> Still, VAX had the instruction in 1977.
[14:33:00] <jensnockert> And C99 requires it.
[14:33:06] <jensnockert> And IEEE 754-2008â€¦
[14:33:10] <MaikKlein> oh man only the windows tests failed? :(
[14:33:23] <Blei> jensnockert: c99 requires an instruction?
[14:33:31] <cmr> MaikKlein: there's a weird and hard-to-debug issue with windows, probably abi/stack handling
[14:33:38] <cmr> nmatsakis: Any progress on it?
[14:33:41] <sanxiyn> Blei: It does have "fma" function
[14:33:43] <dbaupp> jensnockert: speaking of numbers and stuff, do you happen to have any opinions on random number generations and APIs for such?
[14:33:46] <jensnockert> Blei: No, but it has a fma function.
[14:33:47] <sanxiyn> Of course you can emulate it in software
[14:33:53] <Blei> ah, that makes more sense
[14:34:25] <jensnockert> Blei: And without hardware for it, you kind of need to emulate a 2N bit adder etc. Which is silly-inefficient (as in several hundred cycles on x86)
[14:34:44] <sanxiyn> dbaupp: By the way, what's up with None there?
[14:34:57] <jensnockert> dbaupp: I probably do, but I am not sure what's the best way to do it.
[14:35:04] <dbaupp> sanxiyn: Rust can't work out what type it is
[14:35:09] <jensnockert> dbaupp: Isn't the current method pretty nice?
[14:35:10] <dbaupp> sanxiyn: and so it explodes
[14:35:15] <dbaupp> jensnockert: in Rust?
[14:35:18] <dbaupp> jensnockert: nah
[14:35:30] <jensnockert> dbaupp: Only used it once, so cannot really comment on it.
[14:35:47] <dbaupp> jensnockert: ok, cool, that's fine :)
[14:36:05] <sanxiyn> dbaupp: Doesn't Rust report error in other cases?
[14:36:08] <jensnockert> dbaupp: I would want to just type T::random() on most floating point types though.
[14:36:11] <sanxiyn> i.e. "unconstrained type"
[14:36:17] <dbaupp> sanxiyn: (to be specific, it can't work out the type of the type parameter, which iseems to be the problem)
[14:36:18] <jensnockert> Or something similar.
[14:36:32] <dbaupp> jensnockert: where T = float/f32/f64 ?
[14:36:35] <sanxiyn> dbaupp: let _ = None; results in "unconstrained type", not ICE...
[14:36:39] <jensnockert> dbaupp: Yes.
[14:36:45] <dbaupp> sanxiyn: not sure of the details
[14:37:05] <dbaupp> rusti: 1.0f + std::rand::random()
[14:37:07] -rusti- 1.92536955
[14:37:12] <dbaupp> currently works
[14:37:12] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[14:37:17] <sanxiyn> rusti: 1.0f + std::rand::random()
[14:37:18] -rusti- 1.01605886
[14:37:21] <dbaupp> (yay, type inference!)
[14:37:44] <dbaupp> rusti: 1u8 + std::rand::random()
[14:37:46] -rusti- 138
[14:38:11] <heftig> rusti: std::rand::random::<int>()
[14:38:12] -rusti- -5473152175068287946
[14:38:34] <bstrie> rusti: 1.0 + std::rand::random()
[14:38:36] -rusti- 1.3155445
[14:38:39] <heftig> rusti: std::rand::random::<bool>()
[14:38:40] -rusti- true
[14:38:52] <sanxiyn> rusti: std::rand::random::<bool>()
[14:38:53] -rusti- false
[14:38:56] <sanxiyn> rusti: std::rand::random()
[14:38:58] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/IYbJ
[14:39:07] *** Joins: fabiand (fabiand@moz-CD45D048.adsl.alicedsl.de)
[14:39:08] <heftig> rusti: true || std::rand::random()
[14:39:10] -rusti- true
[14:39:13] <dbaupp> rusti: std::rand::random::<(Option<int>, Option<int>, ~@~f32)>()
[14:39:14] <bstrie> it *is* really awesome... if only the damn type hint syntax wasn't so hideous!
[14:39:15] -rusti- (None, None, ~@~0.74356766)
[14:39:29] <sanxiyn> Heh
[14:39:49] <dbaupp> bstrie: most of the time you can drop the hints
[14:39:58] <bstrie> rusti: std::rand::random<()>()
[14:40:01] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/MjTj
[14:40:04] *** Quits: fabiand (fabiand@moz-CD45D048.adsl.alicedsl.de) (Quit: Verlassend)
[14:40:18] <dbaupp> rusti: std::rand::random::<()>()
[14:40:19] -rusti- ()
[14:40:23] *** Joins: fabiand (fabiand@moz-CD45D048.adsl.alicedsl.de)
[14:40:31] <bstrie> damn it! I wasn't even trying to make a point there :P
[14:40:34] <heftig> dbaupp: is it just me or is Option biased towards None?
[14:40:47] <dbaupp> heftig: should be just you
[14:41:02] <dbaupp> heftig: since it's if random() { None } else { Some(random()) }
[14:41:06] *** Joins: Guest__ (textual@BBE7C46A.B4F11D08.8612FA94.IP)
[14:41:07] <ssbr> dbaupp: feel free to ping me around the 23rd to see if I'm back on task yet :P
[14:41:07] <dbaupp> (basically)
[14:41:16] <cmr> rusti: std::rand::random::<(Option<int>, Option<int>>()
[14:41:17] -rusti- <anon>:11:4: 11:5 error: incorrect close delimiter: `}`
[14:41:17] -rusti- <anon>:11     }));
[14:41:17] -rusti-               ^
[14:41:17] -rusti- application terminated with error code 101
[14:41:24] <dbaupp> but the bool generator may be biased
[14:41:24] <cmr> rusti: std::rand::random::<(Option<int>, Option<int>)>()
[14:41:26] -rusti- (Some(-3816205691377236716), Some(-287622806577880606))
[14:41:27] <cmr> rusti: std::rand::random::<(Option<int>, Option<int>)>()
[14:41:30] -rusti- (None, Some(7431562098473838151))
[14:41:30] <cmr> rusti: std::rand::random::<(Option<int>, Option<int>)>()
[14:41:33] -rusti- (Some(7319583554091255596), None)
[14:41:34] <cmr> rusti: std::rand::random::<(Option<int>, Option<int>)>()
[14:41:35] -rusti- (None, Some(6521567058310091928))
[14:41:36] <engla> dbaupp: that's cute because that might actually compile like you wrote it, right?
[14:41:59] <bstrie> dbaupp: why would the bool generator be biaseD?
[14:42:01] <heftig> got like 10 Nones in succession
[14:42:04] <dbaupp> engla: well I did write the implementation :P
[14:42:11] <bstrie> heftig: randomness is random :)
[14:42:25] <dbaupp> bstrie: low order bits of some generators are sometimes less "random" than higher ones
[14:42:36] <engla> heftig: http://dilbert.com/strips/comic/2001-10-25/
[14:42:50] <dbaupp> bstrie: I'm pretty sure ISAAC doesn't have that problem though, so it should be fine
[14:42:52] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[14:44:17] <dbaupp> Anyway... the reason I brought random numbers up is because I'm currently redoing std::rand, and so if anyone's got any comments about APIs and such, feel free to say something. :)
[14:44:46] <bstrie> dbaupp: make it nice to use, and fast, and expressive
[14:45:17] <bstrie> dbaupp: are there problems with the current rand module?
[14:45:33] <dbaupp> bstrie: I think I can get the latter two relatively easily
[14:45:37] <dbaupp> bstrie: yeah
[14:45:41] <dbaupp> it calls into the runtime
[14:45:55] <dbaupp> you can't set the seed of the RNG in Rust
[14:45:58] <jensnockert> dbaupp: Just make the actual generator optionally swappable and I am happy.
[14:46:06] <engla> is the random state thread local?
[14:46:07] <cmr> Well
[14:46:16] <dbaupp> there's not much support for distributions
[14:46:20] <cmr> jensnockert: there's the Rng trait, isn't there?
[14:46:24] <dbaupp> jensnockert: yep, traits
[14:46:41] <jensnockert> cmr: I think so, but never actually looked into it much.
[14:46:41] <dbaupp> engla: random() uses a thread local RNG
[14:46:51] <dbaupp> jensnockert: there is currently
[14:46:53] <engla> ok that's good
[14:47:12] <dbaupp> engla: (you can access that RNG via task_rng() if you need to)
[14:47:55] <dbaupp> bstrie: essentially, I'd like Rust's random number support to surpass C++11's
[14:49:49] *** Quits: jviereck (Adium@moz-39C72C7.dip0.t-ipconnect.de) (Quit: Leaving.)
[14:50:07] <bstrie> dbaupp: surpass how, though?
[14:50:11] <bstrie> performance?
[14:50:19] *** Quits: SimonSapin (simon@A5049320.3E93794D.61EA6C28.IP) (Quit: Leaving.)
[14:50:41] <dbaupp> bstrie: flexibility mainly
[14:50:55] <dbaupp> bstrie: (performance is a bit implementation dependent)
[14:51:16] <bjz> jensnockert: did you see my pull?
[14:51:23] <jensnockert> bjz: About interpolation?
[14:51:32] *** Quits: doener (bs@moz-AA189A5A.unitymedia.biz) (Quit: leaving)
[14:51:36] *** Joins: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP)
[14:51:36] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/ckC_vQ
[14:51:36] *** Parts: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP) ()
[14:51:42] <dbaupp> but basically, allow for external libraries to be able to substitute/fit into the RNG framework easily enough
[14:51:54] <jensnockert> bjz: Yeah, I am working on improving it.
[14:51:58] *** Joins: SimonSapin (simon@A5049320.3E93794D.61EA6C28.IP)
[14:52:02] <indutny> hey guys
[14:52:02] *** Quits: SimonSapin (simon@A5049320.3E93794D.61EA6C28.IP) (Input/output error)
[14:52:05] <indutny> just got this rust: task failed at 'Unsupported constant expr', /Users/indutny/Code/mozilla/rust/src/librustc/middle/const_eval.rs:245
[14:52:19] <indutny> sitting on fresh incoming as usual (built this morning)
[14:52:19] <dbaupp> bstrie: also, supporting CPU RNG's, but Rust's asm! isn't good enough yet :(
[14:52:19] <bjz> jensnockert: sweet!
[14:52:26] <indutny> was it already fixed?
[14:52:30] <dbaupp> indutny: what's the code?
[14:52:35] <indutny> hard to tell
[14:52:41] <indutny> its like a couple of thousands LoC
[14:52:44] <dbaupp> ah
[14:52:47] <dbaupp> :(
[14:53:01] <jensnockert> bjz: Do we have a trait for Pi / Constants?
[14:53:04] <MaikKlein> bjz,  jensnockert what are you guys working on?
[14:53:15] <indutny> dbaupp: but you can try cloning it https://github.com/indutny/linearscan.rs
[14:53:18] <indutny> and running `make`
[14:53:19] <bjz> jensnockert: Real::pi
[14:53:23] <jensnockert> bjz: <3
[14:53:29] <Blei> woo, one autoderef done, at least one more to go
[14:53:39] <indutny> dbaupp: it should be somehow related to tuple structs
[14:53:49] <indutny> because its failing after the latest commit
[14:53:58] <indutny> which replaces all `type` uses with `struct Type(uint)`
[14:54:05] <indutny> for type checks
[14:55:35] <sanxiyn> Blei: Is the issue same as https://github.com/mozilla/rust/issues/6458 ?
[14:55:44] <dbaupp> rusti: struct A(uint); static foo: A = A(1); foo
[14:55:46] -rusti- {__field__: 1}
[14:56:01] <sanxiyn> What?
[14:56:15] <sanxiyn> rusti: struct A(int, int); static foo: A = A(1, 2); foo
[14:56:16] -rusti- {__field__: 1, __field__: 2}
[14:56:17] <Blei> sanxiyn: kind of... it has the same underlying issue, namely that ty_error is not handled
[14:56:23] <dbaupp> indutny: hm
[14:56:44] <dbaupp> indutny: it is certainly that last commit
[14:56:48] <indutny> Ð½ÑƒÑ‹
[14:56:48] <indutny> yes
[14:57:00] <indutny> but its too big to figure out what exactly has happened
[14:57:04] <sanxiyn> dbaupp: Hm so it's all called __field__
[14:57:12] <indutny> and I can't split it
[14:57:15] <indutny> :(
[14:57:19] <bjz> MaikKlein: we are working on the Interpolate trait in num
[14:57:27] <dbaupp> sanxiyn: yeah, anonymous struct fields all become __field__
[14:57:28] <indutny> I'll try building rust with some extra logging in that place
[14:57:30] <dbaupp> :/
[14:57:42] <dbaupp> indutny: it's probably either a match or a static
[14:57:42] <indutny> dbaupp: so compiler doesn't translate them to raw types?
[14:58:01] <indutny> dbaupp: I thought compiler would just generate code as like they're uints
[14:58:03] <dbaupp> indutny: well, for the purposes of reflection they become __field__
[14:58:13] <indutny> oh gosh
[14:58:20] <dbaupp> indutny: but, in theory, it should generate code like they're uints
[14:58:29] <indutny> ok
[14:58:39] <dbaupp> (since, strangely enough, reflection happens at compile time, for the most part)
[14:58:50] <dbaupp> I don't think it actually does do that yet
[14:59:12] <dbaupp> Luqman had a patch that fixed it, but I'm not sure if it landed
[14:59:44] <sanxiyn> dbaupp: It didn't
[14:59:52] <sanxiyn> #6725
[15:01:02] <dbaupp> oh :(
[15:01:24] <sanxiyn> I tried to rebase it (rebase goes well, minimal conflict)
[15:01:34] <sanxiyn> And I got LLVM crash (even on Linux)
[15:01:39] <sanxiyn> Not sure what's going on
[15:01:45] *** Quits: Guest__ (textual@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[15:02:09] <sanxiyn> dbaupp: It seems to interact badly with #6731
[15:02:18] <dbaupp> rusti: struct A(uint); match &A(1) { &A(i) => i }
[15:02:19] -rusti- 1
[15:02:48] <indutny> do you think its matching?
[15:02:52] <indutny> I think its something about Eq
[15:02:54] <dbaupp> indutny: I'm not sure
[15:03:12] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[15:03:27] <dbaupp> indutny: you can just dereference to unwrap a newtype struct, btw
[15:03:32] *** Quits: jessicah (jessicah@moz-B8A3AE25.massey.ac.nz) (Ping timeout)
[15:03:35] <dbaupp> rusti: struct A(uint); *A(1)
[15:03:36] -rusti- 1
[15:04:15] <MaikKlein> what
[15:04:34] *** Joins: Guest__ (textual@BBE7C46A.B4F11D08.8612FA94.IP)
[15:04:37] <dbaupp> MaikKlein: it's just syntactic sugar
[15:04:39] <MaikKlein> rusti: struct A(uint,uint); *A(1,2)
[15:04:40] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/cQDD
[15:04:52] <sanxiyn> rusti: struct A(B(C(D(E(F(G(int))))))); *******A(B(C(D(E(F(G(1)))))))
[15:04:54] -rusti- <anon>:10:19: 10:20 error: expected `,` but found `(`
[15:04:54] -rusti- <anon>:10          struct A(B(C(D(E(F(G(int))))))); *******A(B(C(D(E(F(G(1)))))))
[15:04:54] -rusti-                              ^
[15:04:54] -rusti- application terminated with error code 101
[15:05:04] <sanxiyn> Ah no
[15:05:05] <sanxiyn> Sorry
[15:05:23] *** Quits: snearch (snearch@moz-C8C93E58.pool.mediaways.net) (Quit: Verlassend)
[15:05:27] <sanxiyn> rusti: struct A(int); struct B(A); **A(B(1))
[15:05:30] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/ZVdW
[15:05:37] <MaikKlein> so if I have a struckt with just one field I can just deference it to get it?
[15:05:46] <MaikKlein> struct*
[15:05:56] <sanxiyn> rusti: struct A(int); struct B(A); **B(A(1))
[15:05:57] <dbaupp> MaikKlein: yeah, but only for tuple structs
[15:05:57] -rusti- 1
[15:06:02] <dbaupp> it doesn't work if the field is named
[15:06:09] <MaikKlein> ok
[15:06:17] <dbaupp> rusti: struct A { x: int } *(A {x: 1})
[15:06:18] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/BjYW
[15:06:20] <engla> only for "newtype" structs
[15:06:53] *** Joins: jessicah (jessicah@moz-B8A3AE25.massey.ac.nz)
[15:07:21] *** Quits: sanxiyn (tinuviel@858F408C.B797260D.EF43EC08.IP) (Quit: Leaving)
[15:07:36] <Blei> yes, no ices anymore
[15:07:44] <dbaupp> does anyone know why the jemalloc patch seems to have had no effect? http://huonw.github.io/isrustfastyet/#5d2cadb
[15:07:46] <Blei> just slightly confusing and noisy errors
[15:08:05] <MaikKlein> rusti: struct A([uint]); *A([1,2,3])
[15:08:06] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/ATNC
[15:08:21] <kimundi> rusti: struct A([uint, ..3]); *A([1,2,3])
[15:08:22] -rusti- [1, 2, 3]
[15:08:24] <dbaupp> rusti: struct A(~[uint]); *A(~[1,2,3])
[15:08:26] -rusti- ~[1, 2, 3]
[15:08:55] <MaikKlein> ah okay thanks
[15:09:49] <engla> dbaupp: doesn't the jemalloc merge add a lot of files that need to be compiled? you're changing the thing you are measuring..
[15:09:59] <Blei> dbaupp: how do i reproduce that error you got with rusti in a standalone file? all my attempts either work correctly or end in a different ice :S
[15:10:32] <dbaupp> Blei: fn main() { println(fmt!("%?", None)); } is basically what rusti does
[15:10:40] <dbaupp> engla: oh, maybe
[15:10:54] <Blei> oh wait, that was a different one
[15:10:55] *** Joins: unbracketed (textual@moz-7F0EE151.lsanca.fios.verizon.net)
[15:10:56] <Blei> hmm
[15:10:57] <dbaupp> engla: is compiling jemalloc particularly slow?
[15:11:10] <Blei> dbaupp: thanks, that's an ice that wasn't fixed ;)
[15:11:32] <dbaupp> engla: and I'd expect a speedup on the testsuite, since that's not compiling jemalloc at all
[15:11:49] <engla> no idea, probably not. But it's 40k new lines of code.
[15:12:09] <engla> hm true
[15:13:24] <engla> an unchanging benchmark would be more interesting to me. like pypy's speed website
[15:15:29] <bstrie> 40k seems like a hell of a lot of code
[15:15:48] <dbaupp> engla: yup I agree (especially since the buildbots are ridiculously inconsistent)
[15:15:55] *** Quits: hansjorg (hansjorg@moz-EECB5F79.static.cust.telenor.com) (Quit: Leaving.)
[15:16:19] <bstrie> we *do* have benchmarks. compile versions of rustc before and after the change, and then run the shootouts or whatever you please
[15:17:03] <dbaupp> bstrie: yeah, unfortunately that's no where near as easy or fast as going to a webpage :(
[15:18:44] <indutny> dbaupp: oh so I don't need uint
[15:18:47] <indutny> err
[15:18:49] <indutny> to_uint()
[15:18:50] <indutny> gosh
[15:18:55] <indutny> ah, whatever
[15:19:06] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[15:19:56] <dbaupp> indutny: yeah, I guess
[15:20:10] <indutny> well, it looks clearier
[15:20:17] <indutny> I've a lot of dereferences
[15:20:46] <dbaupp> does it fix the ice?
[15:21:31] *** Quits: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Quit: Leaving.)
[15:25:53] *** Quits: Guest__ (textual@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[15:26:09] <indutny> em?
[15:26:10] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[15:26:30] *** Joins: doener (doener@moz-121949B3.unitymediagroup.de)
[15:26:37] <dbaupp> indutny: using derefences instead of .to_uint()?
[15:26:40] <indutny> ah
[15:26:45] <indutny> well, I haven't tried
[15:27:12] <dbaupp> oh ok
[15:27:33] <dbaupp> also, I've got a fix that (hopefully) will stop the error being an ICE and actually give a useful message
[15:29:23] <nmatsakis> cmr: I am still working on that Windows bug, yes, but I'm kind of stalled---
[15:29:28] <nmatsakis> cmr: I traced down where the error occurs
[15:29:35] <nmatsakis> cmr: but I have been unable to reproduce in a simpler example,
[15:29:38] <nmatsakis> cmr: or determine the cause. 
[15:30:03] <nmatsakis> cmr: It occurs when the stage2 rustc tries to call os::getenv, which in turn passes through many layers before eventually calling some Windows stdcall fn,
[15:30:10] <nmatsakis> cmr: which I think *in turn* invokes the dynamic linker,
[15:30:18] <nmatsakis> cmr: and I think something goes wrong there, causing it to jump off into nowhere,
[15:30:20] <nmatsakis> cmr: leading to the crash.
[15:30:32] <nmatsakis> cmr: but the last two parts are a bit supposition, and I have no idea what's causing that,
[15:30:41] <nmatsakis> cmr: if I just write some standalone code that calls os::getenv, it compiles and runs fine.
[15:30:57] <nmatsakis> cmr: the generated llvm *looks* ok
[15:31:24] *** Joins: bent (chatzilla@moz-932324BF.hsd1.ca.comcast.net)
[15:31:56] <Blei> what if it's the same problem we had with rusti? i.e. that the dynamic linker uses too much stack space?
[15:31:58] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[15:32:04] *** Joins: rindolf (Shlomi@moz-79B283F7.red.bezeqint.net)
[15:32:07] <rindolf> Hi all.
[15:32:14] <rindolf> How do I swap two values in Rust?
[15:32:15] <Blei> that could lead to random crashes
[15:32:33] <bstrie> rindolf: do you want it to be super duper fast?
[15:32:35] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Ping timeout)
[15:32:42] <rindolf> bstrie: no, I don't.
[15:32:52] <bstrie> rindolf: let (a, b) = (b, a);
[15:32:55] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[15:32:55] <rindolf> bstrie: just idiomatic.
[15:33:00] <rindolf> bstrie: ah.
[15:33:21] <engla> rindolf: there is a function std::util::swap
[15:33:23] <rindolf> bstrie: can I omit the "let".
[15:33:28] <bstrie> rindolf: if that gives you any problems, you can use `std::util::swap`
[15:33:32] <rindolf> engla: OK.
[15:33:34] <bstrie> rindolf: no
[15:33:37] <rindolf> bstrie: thanks.
[15:33:54] <jensnockert> bjz: Have there ever been any Rust discussion on how similar the results of the math library should be over different hardware? Is a slight difference between for example PPC and x86-64 considered harmful?
[15:34:10] *** Quits: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP) (Ping timeout)
[15:34:23] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[15:34:43] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[15:34:46] <bjz> jensnockert: there have been no discussions about that afaik
[15:34:59] *** Quits: igl1 (igl@moz-EF52208C.adsl.alicedsl.de) (Ping timeout)
[15:35:31] *** Quits: MaikKlein (maik@moz-F9B59FC9.dip0.t-ipconnect.de) (Ping timeout)
[15:35:35] <jensnockert> bjz: Considering we essentially link libc for the transcendentals, we're already producing wildly different results across different OSes.
[15:35:35] <Blei> afaik differences between architectures are unavoidable
[15:35:37] *** Joins: igl (igl@moz-1AC4C2DC.adsl.alicedsl.de)
[15:35:44] <jensnockert> Blei: Not really.
[15:35:51] <jensnockert> Blei: IEEE 754 support is universal.
[15:36:01] <bjz> jensnockert: it would be nice to decouple from libc
[15:36:05] <jensnockert> bjz: I agree.
[15:36:12] <jensnockert> bjz: Especially on Windows.
[15:36:15] <Blei> sure but it only specifies a certain precision, not absolute precision
[15:36:20] <Blei> iirc
[15:36:22] *** Joins: josh (josh@moz-BE33DA21.fw1.sfo1.mozilla.net)
[15:36:27] <jensnockert> Blei: It actually requires correct rounding.
[15:36:38] <bjz> jensnockert: I think it would be really nice to see these algorithms implemented in rust
[15:37:04] <bjz> jensnockert: it was even cool just to see fpclassify implemented in rust
[15:37:07] <jensnockert> bjz: Would save us a lot of shit with the intrinsics trashing the stack.
[15:37:31] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[15:37:55] <bjz> jensnockert: if that's an area you're interested in working in, by all means you're welcome to get to it!
[15:37:57] <bjz> :)
[15:38:18] <jensnockert> I'll need to go to the library and find some books from the 80:ties then bjz ;)
[15:38:28] <bjz> hehe
[15:38:56] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[15:39:10] <bjz> jensnockert: so wait, are you saying we shouldn't use the intrinsics?
[15:39:29] <jensnockert> bjz: They just link libc essentially, so no point in using them.
[15:39:36] <bjz> ahh
[15:39:42] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[15:39:48] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[15:39:59] <jensnockert> bjz: They need to run on a C stack.
[15:40:35] <dbaupp> strcat: I've needed to add more dummy type parameters to some of the iterators :(
[15:40:45] * jensnockert hugs dbaupp
[15:41:12] * dbaupp is thankful for the support
[15:41:57] <jensnockert> bjz: The other advantage is that we would get vector versions of the code for free.
[15:41:59] *** Joins: cscehr (Mibbit@moz-E9C5938B.solidonetworks.com)
[15:42:16] <bjz> ?
[15:42:21] <bjz> how so?
[15:42:44] <Blei> jensnockert: http://speleotrove.com/decimal/daops.html#refpower
[15:43:03] <Blei> ctrl+f "but may be up to 1 ulp (unit in last place) in error."
[15:43:33] <jensnockert> Blei: That's not floating point.
[15:43:42] <Blei> wut? 
[15:43:44] <Blei> oh
[15:43:44] <jensnockert> Blei: Also not from IEEE 754.
[15:46:24] <jensnockert> Blei: I'll find some quote from the standard, brb.
[15:47:18] <jensnockert> Blei: On page 41, "A conforming function shall return results correctly rounded for the applicable rounding direction for all operands in its domain."
[15:47:22] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[15:48:29] *** Joins: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[15:48:42] <Blei> i see. even better :)
[15:48:46] <Blei> thanks!
[15:49:15] *** Joins: pnkfelix|rcirc (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[15:51:43] *** Joins: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP)
[15:52:49] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[15:52:52] <dbaupp> bstrie: https://github.com/mozilla/rust/pull/6990 r?
[15:53:26] <dbaupp> indutny: that ^ pr will probably make the ICE disappear and give you a useful error message
[15:53:39] <bstrie> dbaupp: does that not affect any tests?
[15:53:52] <dbaupp> bstrie: it shouldn;t
[15:53:59] <dbaupp> bstrie: are there tests that ICE?
[15:54:03] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[15:54:08] <bstrie> ah, didn't know it was causing an ice
[15:54:19] <bstrie> r+
[15:55:12] <erickt> dbaupp: got a test for that PR?
[15:55:16] *** Joins: igl1 (igl@moz-B79703D8.adsl.alicedsl.de)
[15:55:30] <dbaupp> erickt: I'm not quite sure if it should be tested...
[15:55:44] <dbaupp> erickt: because check_const.rs should be filtering this out
[15:55:49] *** Quits: igl (igl@moz-1AC4C2DC.adsl.alicedsl.de) (Ping timeout)
[15:55:55] <erickt> What was the error?
[15:56:18] <dbaupp> erickt: and the only way I can trigger it is by things like `static x: &'static uint = &'static 1; static y: uint = *x;`
[15:56:19] * erickt can't tell from the context
[15:56:43] <dbaupp> it's evaluating constant expressions
[15:56:54] <erickt> that looks like a fine edge case to test :) We got these run-fail tests for this very reason
[15:57:00] <dbaupp> rusti: static x: &'static uint = &'static 1; static y: uint = *x; 1
[15:57:01] -rusti- error: internal compiler error: unexpected failure
[15:57:01] -rusti- note: the compiler hit an unexpected failure path. this is a bug
[15:57:01] -rusti- note: try running with RUST_LOG=rustc=1,::rt::backtrace to get further details and report the results to github.com/mozilla/rust/issues
[15:57:01] -rusti- application terminated with error code 101
[15:57:07] <erickt> unless there's one that already covers this case
[15:57:11] *** kimundi is now known as zz_kimundi
[15:57:14] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[15:57:15] <dbaupp> I'm not even sure that's the correct ICE though
[15:57:29] <dbaupp> because there are at least two different ones I've seen
[15:57:35] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[15:57:35] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/OztJdA
[15:57:36] <ghrust> 13rust/06auto 14bc81d27 15Huon Wilson: rustc: Convert a fail! to a useful error message.
[15:57:36] <ghrust> 13rust/06auto 1418019a1 15bors: auto merge of #6990 : huonw/rust/const-eval, r=bstrie...
[15:57:36] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[15:57:41] <Blei> rusti: struct S<T> { o: ~Option<T> } S { ~None }
[15:57:42] -rusti- <anon>:10:41: 10:42 error: expected `;` or `}` after expression but found `{`
[15:57:42] -rusti- <anon>:10          struct S<T> { o: ~Option<T> } S { ~None }
[15:57:42] -rusti-                                                    ^
[15:57:43] -rusti- application terminated with error code 101
[15:57:48] <dbaupp> *but*, the point is that the above expression seems like it should be valid
[15:58:22] <dbaupp> erickt: and so testing for something that's not at all defined anywhere seems... strange
[15:58:36] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[15:58:36] <Blei> rusti: struct S<T> { o: ~Option<T> } let a = S { ~None };
[15:58:37] -rusti- <anon>:10:49: 10:50 error: expected `;` but found `{`
[15:58:37] -rusti- <anon>:10          struct S<T> { o: ~Option<T> } let a = S { ~None };
[15:58:37] -rusti-                                                            ^
[15:58:37] -rusti- application terminated with error code 101
[15:58:38] <dbaupp> (i.e. what is and what isn't a valid constant expression)
[15:59:27] <erickt> does `static x:Â &'static uint = &'static 1; static y: uint = *x;` work with your patch? Or just now error with a message instead of an ICE?
[15:59:37] <dbaupp> just an error message
[16:00:44] <erickt> dbaupp: In that case, can you file a bug saying that code should work and reference #6990 in the body?
[16:01:24] <dbaupp> erickt: I'm not actually sure that code should work though
[16:02:08] <erickt> I use these kinds of bug reports to get a definitive answer about a case like this so it's easy for someone to find in a search
[16:02:17] <rindolf> http://paste.debian.net/9043/ ==> how can I fix these errors?
[16:02:28] *** Quits: aruniiird (arun@D56A2CE1.FA52E998.FFE8C4AF.IP) (Ping timeout)
[16:02:37] <erickt> dbaupp: I think it'd be fine for someone to close the report with INVALID or something
[16:02:38] <dbaupp> erickt: yep, I'll file in a second
[16:02:49] <erickt> dbaupp: thanks!
[16:03:21] <erickt> dbaupp: please mention your hesitation about whether or not it's a bug
[16:03:37] <erickt> got to run now though
[16:04:32] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[16:04:32] *** ChanServ sets mode: +o dherman
[16:07:41] <indutny> dbaupp: let me try
[16:07:44] *** Quits: skchrko_ (sk@61A494B3.BA40E8A.AAC02D62.IP) (Connection reset by peer)
[16:08:14] *** Joins: skchrko_ (sk@61A494B3.BA40E8A.AAC02D62.IP)
[16:09:04] *** Quits: fabiand (fabiand@moz-CD45D048.adsl.alicedsl.de) (Quit: Verlassend)
[16:09:04] *** Joins: thou (thou@moz-1C1CA9F7.fasttrackcomm.net)
[16:09:45] *** Quits: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP) (Client exited)
[16:10:11] <dbaupp> erickt: https://github.com/mozilla/rust/issues/6991
[16:10:22] *** Joins: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP)
[16:10:29] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[16:11:11] *** Quits: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP) (Client exited)
[16:12:13] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[16:17:45] *** Joins: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP)
[16:17:46] *** ChanServ sets mode: +o pcwalton
[16:18:42] *** Joins: aruniiird (arun@481A01D9.C3D86A2.5296A3D0.IP)
[16:19:13] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[16:20:04] <pnkfelix> nmatsakis: ping
[16:20:41] *** Joins: dylukes (dylukes@moz-B5418F79.hsd1.pa.comcast.net)
[16:23:02] *** Quits: jdm (jdm@DB05BBF2.BB1F48F2.971E19F6.IP) (Ping timeout)
[16:23:09] <pcwalton> I'm going to do a little rustc performance work today because I'm tired of slow builds
[16:23:22] <Blei> pcwalton++
[16:23:31] <strcat> pcwalton: glue code! ;p
[16:23:47] <pcwalton> glue actually isn't *that* much
[16:23:57] <pcwalton> first question I want to answer is how much time in trans is spent in LLVM vs. Rust
[16:24:06] <pcwalton> need to learn dtrace
[16:24:15] <strcat> pcwalton: perf can tell you that too, on linux
[16:24:24] <pcwalton> call stacks aren't what I want
[16:24:25] <strcat> pcwalton: it can show the .so time is spent in
[16:24:29] <pcwalton> oh, hmm
[16:24:55] <strcat> pcwalton: perf report -s dso
[16:25:10] <Blei> when compiling rustc (without any options), 50 out of 60s are in llvm IIRC
[16:25:30] <pcwalton> that's not exactly what I'm interested in
[16:25:33] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[16:25:44] <pcwalton> what I want to know is how much of *trans* is in LLVM
[16:25:55] <Blei> ah, i see
[16:25:59] <strcat> pcwalton: ah
[16:28:43] *** Joins: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com)
[16:29:37] *** Quits: josh (josh@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: josh)
[16:30:01] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[16:30:54] *** Quits: oksobul (Instantbir@5420C305.88F2F905.4A037BC4.IP) (Quit: Instantbird 1.3 -- http://www.instantbird.com)
[16:31:19] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[16:35:52] <indutny> dbaupp: pub static Double: GroupId = GroupId(1);
[16:35:58] <indutny> that was it
[16:36:11] <indutny> so, I can't have constant structs?
[16:36:13] <pcwalton> I guess I can just write a perl script to data mine the output of sample(1)
[16:36:19] *** Quits: dylukes (dylukes@moz-B5418F79.hsd1.pa.comcast.net) (Quit: ["Textual IRC Client: www.textualapp.com"])
[16:36:19] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[16:36:21] <dbaupp> indutny: not sure?
[16:36:26] <pcwalton> constant structs work
[16:36:37] <indutny> well, how can I do it?
[16:36:43] <indutny> test/emulator.rs:28:29: 28:40 error: Unsupported constant expr
[16:36:43] <indutny> test/emulator.rs:28 pub static Double: GroupId = GroupId(1);
[16:36:48] <indutny> that's what I get
[16:36:50] <pcwalton> oh, you mean tuple structs
[16:36:52] <pcwalton> that's a bug
[16:36:57] <dbaupp> rusti: struct GroupId(uint); pub static Double: GroupId = GroupId(1); Double
[16:36:58] <indutny> heh
[16:36:59] -rusti- {__field__: 1}
[16:37:08] <indutny> dbaupp: too old rusti?
[16:37:18] <dbaupp> indutny: rusti's a nightly build
[16:37:45] <indutny> this works in rusti
[16:37:46] <indutny> for me...
[16:37:57] <strcat> rusti the bot uses rustc
[16:38:13] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[16:38:57] <dbaupp> it's possibly something about static's in fn vs static's at the top level
[16:38:58] <indutny> hm...
[16:38:59] *** Quits: true_droid (Adium@moz-123FD9B8.beck.volia.net) (Quit: Leaving.)
[16:39:07] <indutny> dbaupp: not really
[16:39:16] <Thiez> rusti: struct A { s: @int } impl Owned for A {} fn eight<T:Owned>(_x: T) -> int {8} eight(A{s: @4})
[16:39:17] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/FHFB
[16:39:21] <Thiez> baw it doesn't work :D
[16:40:04] <Thiez> would be fun if we could cheat with the traits
[16:42:36] <nmatsakis> pnkfelix: pong (in meeting)
[16:43:42] <pnkfelix> nmatsakis: I had a comment on why the thunk { â€¦ } form that does not require a list of vars may be preferable, but maybe I'll wait until you are free
[16:43:46] *** Quits: EXetoC (ex@moz-C741B177.customer.t3.se) (Quit: WeeChat 0.4.1)
[16:43:58] <pnkfelix> nmatsakis: (or maybe i'll just point you to these notes, since I'm about to point them.)
[16:44:10] *** Joins: doomlord (doomlod@moz-8F385DB0.range109-153.btcentralplus.com)
[16:45:08] *** Joins: graydon (Adium@A5087023.2354C43D.D8E68FF6.IP)
[16:45:08] *** ChanServ sets mode: +qo graydon graydon
[16:45:38] *** Joins: EXetoC (ex@moz-2DBEB1E4.customer.t3.se)
[16:45:44] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:45:53] *** Quits: LimeBurst (me@247D1419.D73964AC.27A8748.IP) (Quit: leaving)
[16:47:28] <dbaupp> strcat: each2* is gone, and each[i]_mut is in progress
[16:48:32] *** Joins: cmr_ (cmr_@moz-E7EA111C.clients.kiwiirc.com)
[16:48:35] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[16:48:35] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/OztJdA
[16:48:35] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[16:48:40] <cmr_> nmatsakis: that's _really_ weird
[16:48:51] <nmatsakis> cmr_: yes.
[16:48:53] *** Joins: jclements (jclements@2557E599.66715431.D25A875A.IP)
[16:49:22] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[16:50:54] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[16:51:05] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:51:21] *** Joins: eholk (eholk@moz-F8E3901F.uconnect.utah.edu)
[16:52:21] *** Joins: LimeBurst (me@247D1419.D73964AC.27A8748.IP)
[16:52:48] *** Quits: sk (sk@44FB31D1.A56C954C.78DD174B.IP) (Quit: Leaving)
[16:52:50] *** Quits: z0w0 (zack@moz-1EDE5BC0.lnse1.woo.bigpond.net.au) (Client exited)
[16:53:11] *** Quits: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk) (Client exited)
[16:58:19] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[16:58:41] *** Joins: pragmatic (pragmatic@moz-1A421840.hsd1.ca.comcast.net)
[16:58:41] *** Quits: pragmatic (pragmatic@moz-1A421840.hsd1.ca.comcast.net) (Connection reset by peer)
[16:59:40] <strcat> dbaupp: yay :)
[16:59:52] <strcat> dbaupp: we'll also need things like a reverse external iterator for vectors
[17:00:51] <strcat> xs.iter().zip(xs.reversed())
[17:01:03] <strcat> or reverse_iter()
[17:01:21] <dbaupp> yup
[17:02:15] *** Quits: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP) (Ping timeout)
[17:02:48] <rindolf> Hi all. This program gives me compilation errors - https://github.com/shlomif/rust-progs/blob/deal-freecell-compile-error/rust-progs/deal_freecell.rs
[17:03:08] <rindolf> How can I fix it?
[17:03:23] <strcat> [â€“]axilmar 1 point 5 minutes ago
[17:03:25] <strcat> Well, ok, but the cases where the performance issue is critical are so few that they don't justify a brand new compiler and toolchain.
[17:03:28] <strcat> oh well, I'm happy
[17:03:54] *** Joins: cantsin (cantsin@moz-F99612CC.members.linode.com)
[17:03:59] <dbaupp> rindolf: do you need to be defining your own RNG?
[17:04:01] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Ping timeout)
[17:04:16] <rindolf> dbaupp: RNG?
[17:04:19] <rindolf> dbaupp: what is RNG?
[17:04:26] <cmr_> random number generator
[17:04:26] *** Joins: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com)
[17:04:39] <rindolf> dbaupp: and yes - I need it for http://rosettacode.org/wiki/Deal_cards_for_FreeCell
[17:05:18] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[17:05:18] *** ChanServ sets mode: +o dherman
[17:05:22] <rindolf> dbaupp: I'm trying to add a Rust version there.
[17:05:43] <dbaupp> rindolf: the problem is with the util::swap call, right?
[17:05:53] <rindolf> dbaupp: yes, it is.
[17:06:07] *** Quits: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[17:06:09] <dbaupp> rindolf: try vec::swap(deck, i, j)
[17:07:15] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Ping timeout)
[17:10:50] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[17:10:51] <rindolf> dbaupp: thanks.
[17:11:30] <bblum> what do you all think of using GC pointers inside of destructors?
[17:11:37] <bblum> this seems dangerous to me
[17:11:40] <pnkfelix> nmatsakis: http://blog.pnkfx.org/blog/2013/06/07/detective-work-on-rust-closures/#digression_on_macros
[17:13:21] <bblum> for example, could a "let x = @..." expression inside a destructor trigger a GC if the destructor is invoked during a GC pass?
[17:14:02] *** cscottnet_away is now known as cscottnet
[17:14:21] <cmr_> bblum: seems to me to be that way.
[17:14:25] <cmr_> graydon: ^^ ?
[17:15:10] *** Joins: jdm (jdm@F2D29657.F60B0462.67AC9B1.IP)
[17:15:24] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[17:15:24] *** ChanServ sets mode: +o brson
[17:15:56] <jclements> pnkfelix: nmatsakis: +1 on digression on macros.
[17:16:25] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[17:16:31] <pnkfelix> jclements: I hope you're at the mtg today, to explain further if necessary, since I cannot be there
[17:16:49] <jclements> erâ€¦ what meeting?
[17:17:42] <brson> jemalloc broke the cross-compile :(
[17:17:54] <pnkfelix> jclements: "Discuss Rust Closures etc" ?
[17:18:04] <jclements> pnkfelix: ohâ€¦ I see it on zimbra. Two Hours?
[17:18:29] <strcat> brson: hmm, any idea why?
[17:18:36] <pnkfelix> jclements: Too long?
[17:19:02] <jclements> pnkfelix: well, only because I'm scrambling to get things done.
[17:19:02] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[17:19:07] *** Joins: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP)
[17:19:17] *** Joins: jviereck (Adium@moz-39C72C7.dip0.t-ipconnect.de)
[17:19:17] *** cscottnet is now known as cscott
[17:19:23] <brson> strcat: looks like misconfiguration
[17:19:31] <pnkfelix> jclements: heh.  I follow.  Anyway, check with Niko, maybe he was just being conservative
[17:19:44] <bblum> oh, what time is the meeting again?
[17:19:49] *** Joins: pyrac (pyrac@moz-96C2FD1F.w109-214.abo.wanadoo.fr)
[17:19:54] <bblum> 11 am?
[17:19:56] <pcwalton> 11
[17:20:01] *** Quits: H4199 (chatzilla@moz-64E556D3.austin.res.rr.com) (Quit: ChatZilla 0.9.90 [Firefox 23.0a2/20130530004016])
[17:20:01] <bblum> ok, good
[17:20:26] <bblum> pcwalton: thoughts on the above statement about GC in destructors?
[17:20:54] <pcwalton> maybe we should just shut off gc during dtors
[17:21:54] <bblum> would gc trigger before it ran out of memory to allocate some @, or only when that happened?
[17:22:31] <pnkfelix> bblum: have you ever read Boehms paper on Destructors and Finalizers?  It provides much food for thought on how/when finalizers can run in relation to the GC
[17:22:38] <pnkfelix> bblum: http://www.hpl.hp.com/techreports/2002/HPL-2002-335.html
[17:22:40] <bblum> i haven't
[17:24:09] *** Joins: mschifer (Adium@2557E599.66715431.D25A875A.IP)
[17:25:33] <pnkfelix> bblum: IIRC, it is more about finalizers than about desctructors.  I suspect that pcwalton's intution (to turn off GC while dtors are running) could be right.
[17:26:41] *** Quits: brendan (brendaneic@88F51059.F3BBB17D.144F44FA.IP) (Quit: brendan)
[17:27:40] *** Joins: brendan (brendaneic@88F51059.F3BBB17D.144F44FA.IP)
[17:28:14] *** Joins: thomaslee (thomaslee@moz-6C3931E3.static.twtelecom.net)
[17:29:42] <bblum> we should have an issue tag just for destructors
[17:30:34] *** Quits: thomaslee (thomaslee@moz-6C3931E3.static.twtelecom.net) (Client exited)
[17:30:36] *** Joins: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu)
[17:31:00] *** Joins: thomaslee (thomaslee@moz-6C3931E3.static.twtelecom.net)
[17:31:32] *** Quits: brendan (brendaneic@88F51059.F3BBB17D.144F44FA.IP) (Quit: brendan)
[17:33:05] <dbaupp> strcat: https://github.com/mozilla/rust/pull/6995 r?
[17:33:53] <cmr_> dbaupp: sweet
[17:34:31] <strcat> sad that we need all the dummy parameters :(
[17:34:36] <strcat> silly type inference
[17:34:36] *** Quits: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu) (Ping timeout)
[17:35:05] <dbaupp> yeah :(
[17:35:10] *** Quits: thomaslee (thomaslee@moz-6C3931E3.static.twtelecom.net) (Client exited)
[17:35:37] <bblum> is there a wiki page describing the milestones?
[17:35:41] <bstrie> dbaupp: what are these dummy parameters?
[17:36:00] <dbaupp> bstrie: https://github.com/huonw/rust/commit/5e9f006c5b95ea98893b0398decd458fd642f38f
[17:36:02] <strcat> bstrie: they help the type inference pass not fail at working
[17:36:02] <cmr_> bblum: https://github.com/mozilla/rust/issues/milestones
[17:36:09] <strcat> bstrie: it's a compiler bug workaround
[17:36:18] <bblum> thanks
[17:36:24] *** Quits: seth (seth@moz-D840E602.dsl.static.sonic.net) (Input/output error)
[17:36:29] <dbaupp> bstrie: describing the element type of an iterator
[17:36:51] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[17:36:56] <dbaupp> bstrie: the compiler can't infer it properly without it explicitly being on each and every iterator adaptor, it seems :(
[17:37:23] <strcat> yeah it can't turn T where T is Iterator<A> back into A
[17:37:23] <bstrie> strcat: are you sure it's a bug rather than some sort of known limitation of HM? the latter would be heartbreaking
[17:37:33] <cmr_> What is HM?
[17:37:34] <strcat> bstrie: it works in haskell
[17:37:35] <dbaupp> we don't use HM?
[17:37:41] <bstrie> we do use HM
[17:37:48] <dbaupp> really? cool!
[17:37:54] <bstrie> I mean, I think so...
[17:38:07] <bstrie> cmr_: http://bulbapedia.bulbagarden.net/wiki/HM
[17:38:08] <dbaupp> cmr_: Hindleyâ€“Milner
[17:38:10] <strcat> bstrie: essentially
[17:38:13] <bblum> cmr_: and to nominate, i add I-Nominated and comment which milestone?
[17:38:15] <strcat> if I write
[17:38:20] <dbaupp> cmr_: the type inferer
[17:38:23] <strcat> <A, T: Iterator<A>>
[17:38:29] <cmr_> bstrie: :p
[17:38:32] <strcat> it should infer the type of A, without help
[17:38:58] *** Quits: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk) (Connection reset by peer)
[17:39:29] <dbaupp> (anyway it's ridiculously late here, so I'm going to bed... hopefully I've fixed all the tests...)
[17:39:35] *** Joins: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP)
[17:39:36] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/F20w1w
[17:39:36] *** Parts: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP) ()
[17:39:38] *** Joins: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP)
[17:39:38] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/7q8LRw
[17:39:38] <ghrust> 13rust/06auto 145e9f006 15Huon Wilson: std: more dummy type parameters on iterators to work around #6967.
[17:39:38] <ghrust> 13rust/06auto 14f661a15 15Huon Wilson: std: remove vec::each2 and vec::each2_mut in favour of iterators
[17:39:39] *** Joins: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk)
[17:39:39] <ghrust> 13rust/06auto 1454d914a 15Huon Wilson: std: remove each[i]_mut functions, in favour of iterators.
[17:39:41] *** Parts: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP) ()
[17:39:55] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[17:40:07] <strcat> dbaupp: and ofc we can get rid of any, all, fold, anyi or any of the other weird versions ;p
[17:40:22] <dbaupp> strcat: tomorrow! ;)
[17:40:25] <strcat> any_container.iter().fold(0, |a, b| a + b)
[17:40:32] <strcat> dbaupp: no worries, you don't have to do all of it ;p
[17:40:49] <bstrie> strcat: does this only impact the implementation, or does it leak into the API as well?
[17:41:01] <strcat> bstrie: it makes the API much simpler
[17:41:14] <strcat> there will be no iteration adaptors bolted onto vector (like folds, filters, etc.)
[17:41:20] <strcat> they will just work with any container
[17:41:24] <bstrie> strcat: I mean the dummy parameter
[17:41:27] <strcat> bstrie: oh, no
[17:41:34] <strcat> bstrie: it's internal, unless you want to write out types
[17:41:38] <strcat> it makes the types uglier.
[17:41:38] <bstrie> ok, that's my biggest concern :)
[17:41:53] <strcat> bstrie: instead of
[17:41:54] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[17:42:01] <strcat> Adaptor<Iterator>
[17:42:02] <strcat> you have
[17:42:04] <strcat> well
[17:42:07] <strcat> Adaptor<Iterator<Element>>
[17:42:09] *** Quits: dbaupp (Thunderbir@moz-C6B1454A.lns20.syd7.internode.on.net) (Ping timeout)
[17:42:10] <strcat> you have
[17:42:15] <strcat> Adaptor<Element, Iterator<Element>>
[17:42:22] <strcat> so it's a lot uglier with a lot of wrapped iterators
[17:42:27] *** Joins: ysuzuki (ysuzuki@moz-285468F7.net219126120.t-com.ne.jp)
[17:42:29] <strcat> but you never have to write those types
[17:42:43] <bstrie> strcat: and what would associated items do to that type?
[17:42:49] <brson> pnkfelix: thanks for the detective work
[17:42:55] <strcat> bstrie: well we shouldn't need associated items :)
[17:42:58] <strcat> for this
[17:43:02] <bstrie> ah ok
[17:43:18] <strcat> associated types would be *awesome* because you could define the Iterator type as an associated type for the containers
[17:43:31] <strcat> atm making Iterable a trait is tricky
[17:43:43] <strcat> now that's going to involve a lot of dummy parameter hacks
[17:43:45] <strcat> ;p
[17:44:07] *** Joins: mattin (user@E8F297A5.DC7A989C.7F8AB798.IP)
[17:44:12] <strcat> Iterable<Element, Iterator<Element>> at the very least
[17:44:21] <strcat> maybe that's not so bad...
[17:44:40] <strcat> it should just be Iterable<Iterator<Element>> though
[17:45:00] <strcat> just makes things more painful. more type parameters makes it harder to understand in a glance
[17:46:37] *** Quits: ysuzuki (ysuzuki@moz-285468F7.net219126120.t-com.ne.jp) (Connection reset by peer)
[17:46:38] *** Quits: cmr_ (cmr_@moz-E7EA111C.clients.kiwiirc.com) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[17:46:38] *** Joins: MaikKlein (maik@moz-F9B59FC9.dip0.t-ipconnect.de)
[17:46:45] *** Joins: ysuzuki (ysuzuki@moz-285468F7.net219126120.t-com.ne.jp)
[17:49:20] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[17:49:54] <pnkfelix> brson: I feel like I ended up including more of the red herrings than I had intended.  :(  oh well.
[17:50:29] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[17:51:08] <Blei> pnkfelix: apparently your code sections are not escaped correctly: "innocentlookingvictim"
[17:51:36] <pnkfelix> Blei: thank you.  Hmm.
[17:52:34] *** Joins: lkuper (lkuper@F7922891.D3FA0837.51B6877.IP)
[17:54:08] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[17:55:02] *** Joins: blitter (blitter@moz-BA14D5CF.dyn.centurytel.net)
[17:56:36] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[17:56:45] *** Quits: MaikKlein (maik@moz-F9B59FC9.dip0.t-ipconnect.de) (Ping timeout)
[17:58:16] *** Quits: ysuzuki (ysuzuki@moz-285468F7.net219126120.t-com.ne.jp) (Connection reset by peer)
[17:58:20] *** Joins: ysuzuki (ysuzuki@moz-285468F7.net219126120.t-com.ne.jp)
[17:58:20] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[17:59:07] *** Joins: tjc (tjc@moz-B867959A.redactedconsulting.com)
[17:59:07] *** ChanServ sets mode: +o tjc
[17:59:09] <bstrie> Blei: perhaps he's just using rust's unicode support to embed italics into his function names, i.e. https://gist.github.com/bstrie/5731113
[17:59:36] <Blei> bstrie: :D
[17:59:44] *** Quits: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP) (Quit: pcwalton)
[17:59:52] <pnkfelix> Biel: ah, answer is here: http://stackoverflow.com/questions/10759577/underscore-issues-jekyll-redcarpet-github-flavored-markdown
[18:00:08] <bstrie> Blei: sadly I can't test to see if that's actually legal, because it's impossible to paste those characters into PuTTY
[18:00:39] <Blei> bstrie: compiles without any issues here
[18:00:54] <bstrie> awesome
[18:01:00] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[18:01:03] <nmatsakis> pnkfelix: I don't follow the question about free variables being referenced by macros. What kind of free variables would it make sense to reference?
[18:01:40] *** Quits: aruniiird (arun@481A01D9.C3D86A2.5296A3D0.IP) (Ping timeout)
[18:01:40] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[18:01:40] *** ChanServ sets mode: +o brson
[18:01:41] <pnkfelix> nmatsakis: e.g. a macro that constructs some sort of structure
[18:01:43] <jclements> nmatsakis: one example: a macro that inserts a counter bump.
[18:01:45] *** Joins: mib_l9shy9 (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[18:01:53] <bstrie> Blei: maybe this is the start of a trend! we can finally settle the age-old toggleCase vs snake_case holy war by introducing them to italic........ 
[18:01:57] <nmatsakis> jclements: still don't get it. what is the name of the counter?
[18:02:04] <bstrie> those ....... are putty trying to paste the characters
[18:02:05] <pnkfelix> nmatsakis: with another macro/procedure to destructure it.  (Sometimes delay/force in Scheme are implemented this way)
[18:02:19] <pnkfelix> nmatsakis: where you want to hide what a Promise is represented as, so people don't forge it
[18:02:25] <jclements> pnkfelix: nmatsakis: heading upstairs to Zombocom
[18:02:30] <pnkfelix> nmatsakis: and instead can only make them via the delay/force interface
[18:02:45] <pnkfelix> nmatsakis: gotta go, I think jclements can fill in the details.
[18:02:50] <nmatsakis> pnkfelix: k
[18:03:07] <Blei> rusti: let italics = 1; italics
[18:03:07] -rusti- <anon>:10:9: 10:12 error: unknown start of token: 29
[18:03:07] -rusti- <anon>:10          let italics = 1; italics
[18:03:08] -rusti-                    ^~~
[18:03:08] -rusti- application terminated with error code 101
[18:03:11] <Blei> hrm
[18:03:31] <strcat> Blei: it points to the wrong place, known bug
[18:03:33] <strcat> rusti: `
[18:03:34] -rusti- <anon>:9:23: 9:24 error: unknown start of token: 96
[18:03:34] -rusti- <anon>:9     println(fmt!("%?", {
[18:03:34] -rusti-                                 ^
[18:03:34] -rusti- application terminated with error code 101
[18:04:00] *** Quits: jclements (jclements@2557E599.66715431.D25A875A.IP) (Quit: jclements)
[18:04:03] *** Quits: ysuzuki (ysuzuki@moz-285468F7.net219126120.t-com.ne.jp) (Connection reset by peer)
[18:04:19] <Eridius> rusti: let bold = 1; bold
[18:04:20] -rusti- <anon>:10:9: 10:12 error: unknown start of token: 2
[18:04:20] -rusti- <anon>:10          let bold = 1; bold
[18:04:20] -rusti-                    ^~~
[18:04:20] -rusti- application terminated with error code 101
[18:04:22] *** Joins: ysuzuki (ysuzuki@moz-285468F7.net219126120.t-com.ne.jp)
[18:04:24] <Blei> oh well, i doubt that rusti translates the irc italics to unicode italics and back
[18:04:31] *** Joins: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP)
[18:04:31] *** ChanServ sets mode: +o pcwalton
[18:04:51] *** Quits: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Quit: Leaving.)
[18:05:12] *** Joins: ysuzuki_ (ysuzuki@moz-285468F7.net219126120.t-com.ne.jp)
[18:05:16] *** Quits: jviereck (Adium@moz-39C72C7.dip0.t-ipconnect.de) (Quit: Leaving.)
[18:05:17] *** Joins: jclements (jclements@2557E599.66715431.D25A875A.IP)
[18:05:19] <bstrie> tjc: if you're having trouble making your slides look nice, maybe mitsuhiko would be willing to take you on as his apprentice :) his slides always super gorgeous
[18:05:32] <tjc> bstrie: Hehâ€¦ do you know what he uses to make them?
[18:05:42] <tjc> part of the problem is I'm using Keynote for the first time and am not used ti it
[18:05:49] <tjc> and feeling like it would work much better with a tablet
[18:05:51] <tjc> which I don't have
[18:06:06] <Eridius> Keynote ftw
[18:06:06] <mitsuhiko> tjc: http://lucumr.pocoo.org/2013/5/25/my-slides-workflow/
[18:06:08] *** Quits: ysuzuki (ysuzuki@moz-285468F7.net219126120.t-com.ne.jp) (Ping timeout)
[18:06:19] *** Quits: pnkfelix|rcirc (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Quit: rcirc on GNU Emacs 24.2.1)
[18:06:27] <tjc> mitsuhiko: cool, will take a look later. thanks!
[18:06:37] *** Joins: jed (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[18:09:21] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:12:26] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[18:13:08] *** Joins: dualhbridge (dad@moz-9FEE6D3B.maine.res.rr.com)
[18:13:50] *** Quits: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP) (Ping timeout)
[18:16:54] <strcat> aw a test failed
[18:17:09] *** Joins: aruniiird (arun@551F6C38.661AAE84.FFE8C4AF.IP)
[18:17:12] <adu> hi strcat
[18:17:19] <strcat> hi
[18:18:32] <sully> tjc: ping
[18:18:44] *** Quits: dualhbridge (dad@moz-9FEE6D3B.maine.res.rr.com) (Connection reset by peer)
[18:18:45] <tjc> sully: in meeting, ping me again in about an hour and a half?
[18:18:58] <sully> ok
[18:19:03] *** Quits: koomi (koomi@moz-E8AECC1E.pools.arcor-ip.net) (Quit: WeeChat 0.4.1)
[18:19:04] *** Quits: aruniiird (arun@551F6C38.661AAE84.FFE8C4AF.IP) (Ping timeout)
[18:19:19] *** Joins: dualhbridge (dad@moz-9FEE6D3B.maine.res.rr.com)
[18:19:32] *** Joins: dylukes (dylukes@moz-B5418F79.hsd1.pa.comcast.net)
[18:21:02] *** Joins: spider-mario (spidermari@moz-AC2C1EAE.rev.sfr.net)
[18:22:25] *** Quits: pyrac (pyrac@moz-96C2FD1F.w109-214.abo.wanadoo.fr) (Quit: pyrac)
[18:23:04] *** Quits: dualhbridge (dad@moz-9FEE6D3B.maine.res.rr.com) (Client exited)
[18:25:00] *** Joins: dualhbridge (dad@moz-9FEE6D3B.maine.res.rr.com)
[18:26:30] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[18:26:30] *** ChanServ sets mode: +o dherman
[18:27:42] *** Joins: aruniiird (arun@E3D5E9CE.FA52E998.FFE8C4AF.IP)
[18:29:15] <rindolf> Hi all. How can I join a vector of strings into one big string with a delimiter? Like Perl 5's join(",", "One", "Two", "Three") which gives me "One,Two,Three".
[18:34:20] <doener> rusti: ["One", "Two", "Three"].connect(",")
[18:34:21] -rusti- ~"One,Two,Three"
[18:34:38] *** Joins: tikue (tkuehn@2557E599.66715431.D25A875A.IP)
[18:35:46] <rindolf> doener: thanks.
[18:36:44] *** Joins: mib_rrsjb2 (Mibbit@95B80E95.2FB07F3F.2527DA1D.IP)
[18:37:42] *** Quits: mib_rrsjb2 (Mibbit@95B80E95.2FB07F3F.2527DA1D.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:44:06] *** Joins: seth (seth@A9EA9133.54F68E60.DD3002AF.IP)
[18:44:14] <rindolf> deal_freecell.rs:76:43: 76:86 error: mismatched types: expected `&[~[<V90>]]` but found `~[~str]` (expected vector but found ~str)
[18:44:21] <rindolf> What can I do about it?
[18:44:52] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[18:45:38] *** Joins: koomi (koomi@moz-B2B8B6D1.superkabel.de)
[18:46:08] <Eridius> rusti: str::connect(["One", "Two", "Three"], ",")
[18:46:10] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/AMbQ
[18:46:13] <Eridius> rusti: std::str::connect(["One", "Two", "Three"], ",")
[18:46:14] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/WXjW
[18:46:30] <Eridius> rusti: std::str::connect([~"One", ~"Two", ~"Three"], ",")
[18:46:31] -rusti- ~"One,Two,Three"
[18:46:50] <bstrie> doener: try sticking a & on the thing that's giving you the error
[18:46:54] <Eridius> rindolf: I'm not sure where doener's suggested method connect is defined, I'm not seeing it in vec or str in the current docs on rust-lang.org (is it new in incoming?)
[18:47:03] <bstrie> er
[18:47:06] <bstrie> not doener
[18:47:16] <jensnockert> bjz: I have implemented linear, cosine, smooth, barycentric, cubic, hermite, catmull_rom now, just writing some tests. Anything you (or anyone else?) think is missing?
[18:47:18] <bstrie> and in any case that probably wouldn't work in this case
[18:47:48] *** Quits: seth (seth@A9EA9133.54F68E60.DD3002AF.IP) (Input/output error)
[18:47:48] <strcat> pcwalton: ugh, the method resolve bug is really annoying :(
[18:47:58] <strcat> pcwalton: lots of conflicts with IteratorUtil in scope
[18:48:06] <strcat> that's why this pull failed...
[18:48:12] <bstrie> jensnockert: are these distributions for rand?
[18:48:14] * strcat will rename last to last_ for now
[18:48:21] <bstrie> or are these lmath things
[18:48:21] *** Joins: seth (seth@A9EA9133.54F68E60.DD3002AF.IP)
[18:48:22] <jensnockert> bstrie: No interpolation methods.
[18:48:35] <jensnockert> *No, interpolation methods.
[18:49:30] <doener> Eridius: yeah, it's rather new in incoming. And it worked in rusti :)
[18:49:56] <doener> rusti the bot, I mean
[18:50:25] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[18:51:15] *** Joins: pyrac (pyrac@moz-96C2FD1F.w109-214.abo.wanadoo.fr)
[18:51:25] <strcat> rusti: 222222222222222222
[18:51:29] -rusti- 222222222222222222
[18:52:16] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:52:24] *** Joins: carllerche (carllerche@moz-BF6CB667.hsd1.ca.comcast.net)
[18:54:41] <strcat> c'mon bors
[18:54:50] <strcat> ugh I bet other names are going to conflict too
[18:55:03] *** dherman is now known as dherman-meetings
[18:55:40] <cmr> strcat: if terminfo strings had any sort of conditional jump they'd be turing complete
[18:55:49] <strcat> cmr: ha
[18:57:36] *** Quits: mib_l9shy9 (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:57:40] *** Joins: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP)
[18:57:40] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 144ddeb41 to 1418019a1: 02http://git.io/N3iJvQ
[18:57:40] *** Parts: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP) ()
[18:57:40] *** Joins: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP)
[18:57:40] <ghrust> 01[13rust01] 15bors pushed 6 new commits to 06auto: 02http://git.io/C1SJGg
[18:57:40] <ghrust> 13rust/06auto 145e9f006 15Huon Wilson: std: more dummy type parameters on iterators to work around #6967.
[18:57:40] <ghrust> 13rust/06auto 14f661a15 15Huon Wilson: std: remove vec::each2 and vec::each2_mut in favour of iterators
[18:57:40] <ghrust> 13rust/06auto 1454d914a 15Huon Wilson: std: remove each[i]_mut functions, in favour of iterators.
[18:57:42] *** Parts: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP) ()
[18:59:04] *** Joins: true_droid (Adium@moz-123FD9B8.beck.volia.net)
[18:59:06] <Blei> and one more ice down
[18:59:18] <Blei> i'm on fire today (pun intended)
[18:59:32] <heftig> jensnockert: sinc?
[18:59:34] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[19:01:44] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[19:01:48] *** Quits: mattin (user@E8F297A5.DC7A989C.7F8AB798.IP) (Quit: Leaving)
[19:02:46] *** Quits: eschweic (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[19:03:29] *** Quits: seth (seth@A9EA9133.54F68E60.DD3002AF.IP) (Ping timeout)
[19:03:52] <jensnockert> heftig: Not really at that level of complexity yet. Sinc would probably not be in the standard library.
[19:04:27] *** Joins: fenster (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[19:05:11] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[19:05:34] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[19:05:41] *** Joins: seth (seth@A9EA9133.54F68E60.DD3002AF.IP)
[19:07:34] <bstrie> jensnockert: what are these interpolations, and why do they belong in the stdlib?
[19:07:45] <bstrie> as opposed to in extra
[19:08:10] <jensnockert> bstrie: Extra would probably be fine.
[19:08:40] <jensnockert> bstrie: They are methods for creating a continuous function from a set of points.
[19:08:54] <jensnockert> Useful for graphics, physics, animation and audio for example.
[19:09:06] <cmr> (*hugely* useful)
[19:09:22] <jensnockert> bstrie: bjz added the trait to std, so I am just running with it.
[19:09:41] <bstrie> cmr: useful enough to live in std rather than extra?
[19:10:08] <cmr> no, just pointing out they're really important and nice to have distributed with the batteries
[19:10:29] <bstrie> ok, sounds good
[19:10:31] *** Joins: Guest__ (textual@BBE7C46A.B4F11D08.8612FA94.IP)
[19:11:07] *** Joins: MaikKlein (maik@moz-76A64E0E.dip0.t-ipconnect.de)
[19:12:59] *** Quits: jeff (jeff@4231C034.745B261B.F12515B4.IP) (Quit: jeff)
[19:12:59] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[19:13:02] <jensnockert> Someone should make a guide for what should be in std, and what should be in extra.
[19:13:07] *** Quits: svenstaro (svenstaro@moz-1E96A5B8.com) (Quit: WeeChat 0.4.1)
[19:13:28] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Quit: tikue)
[19:13:31] *** Quits: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net) (Quit: computer sleeping)
[19:14:44] *** Joins: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net)
[19:14:51] *** Quits: seth (seth@A9EA9133.54F68E60.DD3002AF.IP) (Ping timeout)
[19:15:23] *** Quits: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[19:16:23] *** Joins: seth (seth@A9EA9133.54F68E60.DD3002AF.IP)
[19:17:47] *** Quits: seth (seth@A9EA9133.54F68E60.DD3002AF.IP) (Input/output error)
[19:20:16] *** Quits: aruniiird (arun@E3D5E9CE.FA52E998.FFE8C4AF.IP) (Ping timeout)
[19:22:11] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[19:25:21] *** Quits: eholk (eholk@moz-F8E3901F.uconnect.utah.edu) (Quit: eholk)
[19:27:52] <jed> any insight on the error "uniquely-owned traits must be sendable"? apologies if this is a dumb question
[19:28:16] <bstrie> jed: can we see the code?
[19:29:27] <jed> roughly "FooElement { elemtype: 3, key: k, val: ~self as ~FooTrait }"
[19:30:17] *** Quits: dualhbridge (dad@moz-9FEE6D3B.maine.res.rr.com) (Quit: Leaving.)
[19:30:35] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[19:30:36] *** Joins: dualhbridge (dad@moz-9FEE6D3B.maine.res.rr.com)
[19:32:23] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[19:35:57] <bstrie> jed: hm, I don't have any experience with using traits like that, and there's a good chance they may also be buggy
[19:36:05] <bstrie> I'll try it out
[19:36:37] <bstrie> jed: what's the definition of FooElement?
[19:36:59] *** Joins: seth (seth@2557E599.66715431.D25A875A.IP)
[19:37:31] <bstrie> jed: also, what type is "self" here?
[19:37:33] <cmr> Yes, ~Traits are buggy, but I don't think that's a bug.
[19:37:59] <rindolf> Hi all. Looking for idea for improvements before I put it on http://rosettacode.org/wiki/Deal_cards_for_FreeCell
[19:38:24] <rindolf> Hi all. Looking for idea for improvements before I put it on http://rosettacode.org/wiki/Deal_cards_for_FreeCell ==> https://github.com/shlomif/rust-progs/blob/master/rust-progs/deal_freecell.rs
[19:39:41] <cmr> rindolf: seems you should genericize the RNG and split it into its own rosetta code entry: http://rosettacode.org/wiki/Linear_congruential_generator
[19:40:05] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[19:40:07] <rindolf> cmr: OK.
[19:41:34] <bstrie> rindolf: so MSRand is the linear congruential generator? I think that would be more clear if it was named LCGen or something
[19:41:45] <bstrie> I kept looking at it wondering what about it was microsoft-specific
[19:41:57] <doener> rindolf: is the while condition on line 24 correct? That excludes the first slot in the deck
[19:41:59] *** Quits: dualhbridge (dad@moz-9FEE6D3B.maine.res.rr.com) (Quit: Leaving.)
[19:42:46] <rindolf> bstrie: it is the Microsoft Random number generator.
[19:43:41] <pcwalton> only 15% or so of the time in trans is spent in LLVM
[19:43:41] <jed> bstrie: self is of type FooObject, which is defined like FooObject { size: i32; fields: ~[FooElement<~FooTrait>] }. FooElement looks like FooElement<V> { elemtype: u8, key: ~str, val: V}.
[19:43:47] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[19:43:57] *** Joins: dualhbridge (dad@moz-9FEE6D3B.maine.res.rr.com)
[19:44:11] <cmr> pcwalton: that's down a lot from just a few weeks ago
[19:44:20] <pcwalton> no, I mean trans, not LLVM passes
[19:44:24] <cmr> before it was like... 60%, iirc
[19:44:26] <cmr> I know
[19:44:43] *** Joins: tikue (tkuehn@2557E599.66715431.D25A875A.IP)
[19:44:54] <doener> rindolf: looks like a bug compared to the C++ implementation
[19:45:15] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[19:45:19] <cmr> at least I think it's down, aatch was working on bringing the ratio of trans:llvm down to 5:1
[19:45:34] <pcwalton> I mean something different
[19:45:36] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[19:45:49] <cmr> What do you mean?
[19:46:08] <rindolf> doener: let me see.
[19:46:50] <rindolf> doener: it yields fine results.
[19:47:19] <brson> https://github.com/mozilla/rust/wiki/Meeting-2013-06-07
[19:47:36] *** Quits: jclements (jclements@2557E599.66715431.D25A875A.IP) (Quit: jclements)
[19:47:48] *** Quits: dualhbridge (dad@moz-9FEE6D3B.maine.res.rr.com) (Quit: Leaving.)
[19:48:18] <cmr> brson: what are all the arrows in the DST section?
[19:49:07] <rindolf> doener: I have +1 there.
[19:49:26] <bstrie> rindolf: you can get rid of most of the i32 suffixes in the impl
[19:49:30] <doener> rindolf: but you never swap with i = 0
[19:49:54] <bstrie> in fact you can get rid of all of the i32 suffixes
[19:50:24] *** Joins: annodomini (lambda@moz-6424FBF8.hfc.comcastbusiness.net)
[19:50:54] <rindolf> doener: when i = 0 then i+1 == 1 and then the modulo is always 0 , so it will be swapped with itself.
[19:51:08] <bstrie> rindolf: you don't need to wrap return values in parentheses
[19:51:17] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[19:51:32] *** Joins: dualhbridge (dad@moz-9FEE6D3B.maine.res.rr.com)
[19:51:35] <doener> you don't need "return" either
[19:51:37] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[19:51:37] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/C1SJGg
[19:51:38] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[19:52:04] <bstrie> it's fine to use return, it's just weird to use it with parentheses :P
[19:52:42] *** Quits: dualhbridge (dad@moz-9FEE6D3B.maine.res.rr.com) (Quit: Leaving.)
[19:52:57] *** Quits: sp3d (a@moz-49806493.dhcp.stls.mo.charter.com) (Quit: sp3d)
[19:53:19] <bstrie> rindolf: you also don't need to wrap the conditions in the if statements with parentheses
[19:53:21] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[19:53:28] *** Quits: ysuzuki_ (ysuzuki@moz-285468F7.net219126120.t-com.ne.jp) (Client exited)
[19:53:53] *** Quits: cdidd (cdidd@moz-7D146F62.broadband.corbina.ru) (Ping timeout)
[19:53:57] <rindolf> bstrie: OK.
[19:54:34] *** Joins: cdidd (cdidd@moz-F58375C.broadband.corbina.ru)
[19:55:48] *** Joins: jclements (jclements@2557E599.66715431.D25A875A.IP)
[19:56:27] <strcat> yay bors, you did it
[19:56:40] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[19:56:40] *** ChanServ sets mode: +o brson
[19:58:14] *** Quits: jed (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:58:35] <doener> rindolf: the output is transposed for me, compared to the two examples on rosetta code
[19:58:55] *** Quits: reyre_ (reyre@F2D29657.F60B0462.67AC9B1.IP) (Client exited)
[19:59:11] <rindolf> doener: yes, it's on purpose.
[19:59:15] <doener> ok
[19:59:27] *** Quits: fenster (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:59:32] <strcat> heh, http://lizards.opensuse.org/2013/06/06/openqa-in-opensuse/ this is one of the strangest QA contraptions I've seen
[19:59:37] <rindolf> doener: Freecell columns are given in screen lines.
[19:59:38] *** Quits: dylukes (dylukes@moz-B5418F79.hsd1.pa.comcast.net) (Quit: ["Textual IRC Client: www.textualapp.com"])
[19:59:38] <strcat> they use opencv to test their GUIs
[20:00:02] <strcat> I guess window placement isn't deterministic? ;\
[20:00:12] <doener> rindolf: columns could be set using vec::from_elem(num_cols, ~[])
[20:00:41] <rindolf> doener: OK, let me see.
[20:00:48] <doener> rusti: std::vec::from_fn(4*13-1, |i| i)
[20:00:51] -rusti- line longer than 150 columns, pastebinned: http://sprunge.us/PGgO
[20:01:16] <doener> rusti: std::vec::from_fn(4*13, |i| i)
[20:01:17] -rusti- line longer than 150 columns, pastebinned: http://sprunge.us/NhSf
[20:01:28] <doener> that would work for deck
[20:03:11] <bstrie> rindolf: you can replace your entire _perl_range function with https://gist.github.com/bstrie/5732001
[20:03:19] <bstrie> dammit, doener beat me to it :P
[20:03:52] <bstrie> but mine's copypasteable!
[20:04:04] <rindolf> doener: thanks.
[20:04:15] *** Joins: brendan (brendaneic@E9758364.9EC0A5AF.CFE928A7.IP)
[20:04:33] *** Quits: MaikKlein (maik@moz-76A64E0E.dip0.t-ipconnect.de) (Client exited)
[20:04:51] *** Joins: jed (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[20:05:25] <doener> rindolf: if you make render_card accept a &uint instead of a uint, you can directly pass that to map, avoiding the extra closure
[20:05:46] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[20:06:09] <rindolf> doener: OK.
[20:06:13] <strcat> I guess each_mut can mostly be killed off now
[20:06:31] <bstrie> haha, why does this algorithm call for randomizing the deck, and then reversing it?
[20:07:10] <strcat> rusti: let mut xs = ~[1, 2, 3, 4, 5]; for xs.mut_iter().take_while(|&x| *x < 4).advance |x| { *x = 5 }; xs
[20:07:12] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/TGBB
[20:07:32] <strcat> rusti: use std::iterator::IteratorUtil; let mut xs = ~[1, 2, 3, 4, 5]; for xs.mut_iter().take_while(|&x| *x < 4).advance |x| { *x = 5 }; xs
[20:07:33] -rusti- ~[5, 5, 5, 4, 5]
[20:08:15] *** Joins: mib_ztptp3 (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[20:08:51] *** Quits: jclements (jclements@2557E599.66715431.D25A875A.IP) (Quit: jclements)
[20:09:03] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[20:09:55] * brson lunch
[20:10:11] *** Quits: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP) (Quit: pcwalton)
[20:10:30] *** mschifer is now known as mschifer|lunch
[20:14:17] *** Quits: Jesin (Jessin_@moz-157A63DD.cc.lehigh.edu) (Ping timeout)
[20:15:02] <jed> It looked like my issue was just weirdness with ~ traits. Using @ traits there were no problems.
[20:15:12] *** Quits: Blei (philipp@moz-96D25F7A.cust.bluewin.ch) (Quit: WeeChat 0.4.1)
[20:15:29] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:15:40] <cmr> jed: Can you make a minimal testcase?
[20:15:40] *** Joins: josh (josh@moz-BE33DA21.fw1.sfo1.mozilla.net)
[20:16:48] *** Joins: Jesin (Jessin_@moz-157A63DD.cc.lehigh.edu)
[20:17:03] <cmr> It's probably nto a bug, the struct probably just isn't sendable.
[20:17:12] <bstrie> jed: oh sorry, I lost track of you while helping rindolf :)
[20:17:27] <jed> I'll make some test cases and see what comes up
[20:17:42] <jed> no worries, mostly just playing around with stuff for the moment :)
[20:18:32] *** Joins: reyre_ (reyre@F2D29657.F60B0462.67AC9B1.IP)
[20:19:13] <rindolf> https://github.com/shlomif/rust-progs/blob/master/rust-progs/deal_freecell.rs - here is the latest version - hit reload.
[20:21:34] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[20:22:04] <bstrie> jed: test cases would be good, I keep hitting LLVM assertions while trying to duplicate your code
[20:22:20] <cmr> yay ~Traits :)
[20:24:24] <doener> rindolf: connect() with an empty separator is just concat()
[20:24:39] <rindolf> doener: OK, thanks.
[20:25:22] *** Joins: dymk (dymk@44EEE21C.A6E21E6E.5E500FC7.IP)
[20:25:57] <EXetoC> strcat: neat
[20:26:17] *** Quits: josh (josh@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: josh)
[20:26:26] *** Quits: Jesin (Jessin_@moz-157A63DD.cc.lehigh.edu) (Ping timeout)
[20:27:51] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[20:28:41] *** Joins: Jesin (Jessin_@moz-157A63DD.cc.lehigh.edu)
[20:30:26] <jed> Seems like I'm getting LLVM assertions as well when I compile it outside of a module. May take me a minute to figure this out
[20:30:34] <doener> rusti: let game = std::i32::from_str("1").expect("I need a real number"); game
[20:30:35] -rusti- 1
[20:30:42] <doener> rusti: let game = std::i32::from_str("borked").expect("I need a real number"); game
[20:30:44] -rusti- rust: task failed at 'I need a real number', /build/rust-incoming-git/src/rust/src/libstd/option.rs:324
[20:30:44] -rusti- rust: domain main @0x65c1b0 root task failed
[20:30:44] -rusti- application terminated with error code 101
[20:31:45] *** Quits: tjc (tjc@moz-B867959A.redactedconsulting.com) (Ping timeout)
[20:35:23] *** Quits: Ralith (ralith@moz-50F3C77.vc.shawcable.net) (Ping timeout)
[20:36:49] *** Quits: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com) (Client exited)
[20:37:14] <jed> http://pastebin.com/TeDnJ9p1
[20:37:48] <gazoombo> I have no idea how the Rust codebase is organized, but I noticed that linenoise is in src/rt on incoming... does that mean I won't need something like https://github.com/davbo/rust-linenoise in the future? 
[20:38:29] <bstrie> gazoombo: iirc the only purpose of linenoise is for the repl, and some people question how useful the repl can really be
[20:39:01] <bstrie> so it's possible it won't stick around. maybe it will, maybe it won't
[20:39:04] <gazoombo> bstrie: ah, ok. so it's just used in rusti? no bindings are exposed?
[20:39:11] <strcat> cling is useful. but cling works properly ;p
[20:39:12] <cmr> gazoombo: extra::rl
[20:40:17] *** Joins: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com)
[20:40:53] <bstrie> jed: btw did your assertions look like https://github.com/mozilla/rust/issues/5882 ?
[20:40:58] <gazoombo> cmr: aha! that's what I was looking for. (src/libextra/rl.rs) Thanks!  
[20:42:27] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[20:43:42] <jed> no, it was actually a problem with my system. here is the code I'm using: http://pastebin.com/m7zxdXNc
[20:43:59] *** Quits: seth (seth@2557E599.66715431.D25A875A.IP) (Input/output error)
[20:44:06] <bstrie> jed: ok, I've got it reproducing now
[20:44:24] *** Joins: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net)
[20:45:14] *** Quits: thou (thou@moz-1C1CA9F7.fasttrackcomm.net) (Input/output error)
[20:45:36] *** Joins: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP)
[20:45:36] *** ChanServ sets mode: +o pcwalton
[20:45:51] *** Joins: SingingBoyo (brandon@moz-94AE1D3A.bchsia.telus.net)
[20:46:28] <doener> jed: seems to be caused by self being a borrowed pointer. If you use ~self, it "works" for FooObject (compiler crashes)
[20:47:13] <doener> jed: http://pastebin.com/cbTzm61S
[20:47:29] <bstrie> doener: yeah, that's the error I was getting before and the issue link that I pasted above
[20:47:33] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[20:47:35] <doener> ah
[20:47:42] <bstrie> jed: I think in this case it really is a bug
[20:47:45] * doener didn't pay attention
[20:48:12] <bstrie> doener: well I only just now tried it with his actual code, I was affirming you rather than rebutting you :P
[20:49:16] <jed> yeah I'm getting the crash as well
[20:49:22] *** Quits: lkuper (lkuper@F7922891.D3FA0837.51B6877.IP) (Ping timeout)
[20:50:07] *** Quits: lahwran (lahwran@lahwran.net) (Ping timeout)
[20:50:27] *** Joins: eholk (eholk@moz-F8E3901F.uconnect.utah.edu)
[20:50:37] <bstrie> strcat: in dbaupp's pull request, he replaces `vec::eachi_mut(foo)` with `foo.mut_iter().zip(foo.iter()).advance` in one place and `foo.mut_iter().enumerate().advance` in another
[20:50:45] <bstrie> is this just an oversight or am I missing something subtle here
[20:51:25] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Ping timeout)
[20:51:44] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[20:52:09] <bblum> nmatsakis: https://gist.github.com/bblum/5719126 would you be able to do this with your closure proposal?
[20:52:37] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[20:52:53] *** Joins: lahwran (lahwran@lahwran.net)
[20:53:04] <bblum> i'm not suggesting that's sure to be an important use case
[20:53:11] <bblum> but i think it's theoretically interesting and would be sad to see it go
[20:53:32] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:54:00] <strcat> bstrie: are you sure it wasn't each2_mut?
[20:54:20] <strcat>     std: remove vec::each2 and vec::each2_mut in favour of iterators
[20:54:23] <nmatsakis> bblum: https://gist.github.com/bblum/5719126#comment-842053
[20:54:29] <strcat> that was replaced with the generic zip
[20:54:29] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[20:54:39] <bblum> ok, yeah, good
[20:54:52] *** Quits: ssbr (ssbr@moz-F4C1E66D.dsl.bell.ca) (Client exited)
[20:54:59] <bblum> i guess i was never clear on to what extent region/kind bounds would stay on stack closures
[20:55:11] <strcat> bstrie: or maybe it used eachi to get an index to index a second array
[20:55:19] <strcat> I forget
[20:55:47] *** Joins: sp3d (a@moz-49806493.dhcp.stls.mo.charter.com)
[20:56:17] <bstrie> strcat: aha, the XXX above the old code does mention each2_mut
[20:56:42] <bstrie> I was wondering how that was even a replacement for eachi_mut
[20:56:47] <strcat> bstrie: anyway we can essentially get rid of every internal iterator except where external ones are a huge pain to write
[20:56:59] <bstrie> yes, I think it makes sense
[20:57:02] <strcat> like if you have a tree with 50 types of children
[20:57:10] <strcat> an external iter would be hell to make without compiler help ;p
[20:58:32] <flu_> Visitor pattern?
[20:59:02] *** Quits: Jesin (Jessin_@moz-157A63DD.cc.lehigh.edu) (Ping timeout)
[20:59:04] *** Joins: jclements (jclements@2557E599.66715431.D25A875A.IP)
[20:59:05] <strcat> that means an internal iterator so you lose lots of composability
[20:59:07] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[20:59:23] <flu_> guess I'm unclear as to the difference between internal and external iterators
[20:59:32] <strcat> flu_: an internal one runs a closure internally
[20:59:42] <strcat> you can't save the state, it's not an object adaptors can be written for
[20:59:52] *** Quits: jed (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:00:02] <strcat> no 'zip' for example, fundamentally can't zip 2 arbitrary internal iterators
[21:00:15] <flu_> ah, ok
[21:00:15] *** Joins: MaikKlein (maik@moz-76A64E0E.dip0.t-ipconnect.de)
[21:00:21] <strcat> so you need a _zip version (vec called it '2') hardcoded for every kind
[21:00:27] <strcat> as in
[21:00:33] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[21:00:45] <strcat> hardcode zip for forward iteration over a vector and reverse iteration over a set
[21:00:52] <strcat> so you'd have thousands of them
[21:01:07] <strcat> + they all have to reimplement the traversals ;p
[21:02:00] <strcat> you also have to ask the iterator to break instead of just not running another iteration so that creates borrow/move issues
[21:02:16] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[21:02:57] <flu_> it seems like you could do zip generically if the iterator interface as a simple next<T>() -> T / has_next() -> bool thing
[21:03:13] <flu_> I'm probably missing something about the specific problem space
[21:03:13] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[21:03:27] *** Quits: MaikKlein (maik@moz-76A64E0E.dip0.t-ipconnect.de) (Ping timeout)
[21:03:29] <cmr> flu_: that's what an external iterator is :p
[21:03:34] <cmr> (more or less)
[21:03:46] <cmr> strcat wrote a large, nice post to the ML about it
[21:03:58] <flu_> lolll
[21:04:03] <cmr> https://mail.mozilla.org/pipermail/rust-dev/2013-June/004364.html
[21:04:20] <flu_> *reading*
[21:05:16] <flu_> ha! Problem is clear within the first ten sentences
[21:05:29] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[21:05:37] <strcat> flu_: a multitude of problems :)
[21:07:38] *** Joins: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu)
[21:08:26] <graydon> brson: re #6998, are you or someone looking into it?
[21:09:06] <brson> graydon: i am not yet, and don't think i will get to it today
[21:09:41] <rindolf> http://rosettacode.org/wiki/Deal_cards_for_FreeCell#Rust - added.
[21:09:44] <bstrie> pcwalton: what are the compile times for servo like?
[21:10:04] <graydon> brson: ok
[21:10:22] <brson> graydon: do you need it fixed now? I can revert
[21:11:01] <graydon> brson: no, I just wanted to point it out to whoever else might fix it before it gets lost / forgotten in the "oh incoming, it's always red lately" ignoring-ness
[21:11:09] *** zz_kimundi is now known as kimundi
[21:11:15] <brson> graydon: fixing incoming is always on my radar! :-D
[21:11:44] <graydon> indeed
[21:13:02] <graydon> you've been on it like a hawk. I'll go nag cmr and/or strcat.
[21:13:02] *** Quits: pyrac (pyrac@moz-96C2FD1F.w109-214.abo.wanadoo.fr) (Quit: pyrac)
[21:13:05] <graydon> nag nag, nag nag.
[21:13:18] <graydon> cmr & strcat: https://github.com/mozilla/rust/issues/6998
[21:13:39] <cmr> every time I try and touch the build system I break it.
[21:13:41] <cmr> so
[21:13:56] * strcat looks
[21:14:12] <cmr> Is jemalloc not getting passed the right flags?
[21:14:36] * strcat is so bad at navigating the buildbot UI
[21:14:40] *** Joins: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP)
[21:14:50] <graydon> np, I'll dig it up
[21:15:02] <strcat> graydon: hmm, strange that configure fails
[21:15:12] <strcat> graydon: all I changed is configure is adding jemalloc to the list of dirs to make
[21:15:22] <strcat> configure: git: submodule sync
[21:15:23] <jclements> in MTV: a group of visitors just strolling through the second floor.  I mentioned research, and one young fellow asked: do you do Rust? I said yes :).
[21:15:24] <strcat> You need to run this command from the toplevel of the working tree.
[21:16:15] <pcwalton> bstrie: not good
[21:16:20] <cmr> strcat: there's also http://buildbot.rust-lang.org/builders/incoming-full-linux/builds/1457/steps/compile/logs/stdio, which is the current incoming fail
[21:16:38] <strcat> No Such Resource
[21:16:39] <cmr> looks like it needs the target.
[21:16:40] <strcat> No such child resource.
[21:16:42] <strcat> ;\
[21:16:57] <pcwalton> I'm doing some data mining
[21:17:01] <pcwalton> to try to figure out why trans is so slow
[21:17:05] <strcat> I regret saying bad things about buildbot, it knows
[21:17:10] <true_droid> is there an error handling tutorial for Rust? or some code where it's demonstrated?
[21:17:27] <cmr> strcat: for that link? https://gist.github.com/cmr/a8dd99c6b51bd45d3334 is a copy
[21:17:35] <strcat> thanks
[21:18:03] <cmr> true_droid: well what about error handling? capturing task failure? condition system? Option<T>? Result<T, U> ?
[21:18:16] <cmr> All of it? :)
[21:18:21] <SiegeLord> Is it in principle possible for Rust to have a GCC backend? Or is it strongly tied to LLVM?
[21:18:23] <strcat> we need to pass --host to jemalloc
[21:18:24] <strcat> in configure
[21:18:29] <cmr> SiegeLord: very strongly.
[21:18:36] <strcat>   --host=HOST       cross-compile to build programs to run on HOST [BUILD]
[21:18:43] *** Joins: Jesin (Jessin_@moz-157A63DD.cc.lehigh.edu)
[21:18:52] <true_droid> cmr: I'd like to know more about Rust's idioms in this fields. What is the preferred way to deal with filesystem errors? network errors? task errors?
[21:18:53] <cmr> SiegeLord: Certainly not impossible, though, I think
[21:18:54] *** Joins: vosen (vosen@moz-266BA656.icpnet.pl)
[21:19:17] <true_droid> programmer's errors (are all caught by the compiler)?
[21:19:22] <strcat> graydon: would forcing a build of a commit pushed to try on the bots that cross compile work?
[21:19:25] <cmr> SiegeLord: I hear adding frontends to gcc is a huuuuuuge mess though
[21:19:39] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
[21:19:50] <SiegeLord> Well, it's been done by Go and D in a couple of years
[21:19:58] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Quit: tikue)
[21:20:06] *** dherman-meetings is now known as dherman
[21:20:11] <SiegeLord> By like 1 man in case of D... so it's an arduous, but not impossible task
[21:21:00] <strcat> someone would need to be motivated to do it
[21:21:10] <strcat> and there doesn't really seem to be much to gain
[21:21:22] <strcat> LLVM used to be able to use gcc as a backend but I think that project died
[21:21:22] <cmr> at all
[21:21:26] *** Joins: snearch (snearch@moz-C8C93E58.pool.mediaways.net)
[21:21:29] <pcwalton> there's DragonEgg
[21:21:32] <pcwalton> but that's the other way
[21:22:05] *** Quits: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu) (Client exited)
[21:22:24] *** Joins: themgt (themgt@moz-248BBB96.dhcp.gnvl.sc.charter.com)
[21:22:32] *** Quits: themgt (themgt@moz-248BBB96.dhcp.gnvl.sc.charter.com) (Quit: themgt)
[21:22:37] *** Joins: themgt (themgt@moz-248BBB96.dhcp.gnvl.sc.charter.com)
[21:22:40] <cmr> SiegeLord: Why would you want it?
[21:22:47] * strcat deletes a few dozen old branches
[21:22:59] <cmr> Both go and D had compilers with an ad-hoc backend, no?
[21:23:05] <SiegeLord> cmr, Just curious... I like multiple backends
[21:23:08] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[21:23:18] <strcat> cmr: yes the motivation was because go/d have terrible reference compilers when it comes to optimization
[21:23:23] <strcat> so people ported to gcc/llvm
[21:23:28] <SiegeLord> cmr, The official compilers, yes... but in case of D, there's both a version with GCC and LLVM backends
[21:23:46] <strcat> cmr: ian lance taylor is a gcc dev employed by google
[21:24:00] <strcat> and he likes Go, so he ported it (probably on his own time)
[21:24:29] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[21:24:53] *** Quits: lmandel (lmandel@F2D29657.F60B0462.67AC9B1.IP) (Quit: lmandel)
[21:25:06] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[21:26:06] <strcat> brson: is $(1) in the Makefile a host triple other tools will understand? (gcc/clang)
[21:26:12] *** mschifer|lunch is now known as mschifer
[21:27:02] *** Joins: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP)
[21:27:02] <ghrust> 01[13rust01] 15thestinger 04force-pushed 06try from 147b78b52 to 14e3e20ee: 02http://git.io/k471pw
[21:27:02] <ghrust> 13rust/06try 14e3e20ee 15Daniel Micay: fix jemalloc on cross-compiled builds
[21:27:02] *** Parts: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP) ()
[21:27:38] <true_droid> strcat: Ian's on the Go team, so he must've been paid
[21:27:49] <true_droid> he's also delivered a talk on the gcc frontend to GO
[21:27:56] <true_droid> http://talks.golang.org/2010/gofrontend-gcc-summit-2010.pdf
[21:27:59] <true_droid> 50k lines
[21:28:08] <strcat> true_droid: they have 20% time, they didn't have to care about it for him to do it
[21:28:18] <strcat> Go was started as a 20% time project
[21:28:52] <brson> strcat: if it's a triple then yes it should be a common one that gcc and clang understand
[21:29:36] *** Joins: mschifer1 (Adium@2557E599.66715431.D25A875A.IP)
[21:29:37] *** Quits: mschifer (Adium@2557E599.66715431.D25A875A.IP) (Connection reset by peer)
[21:31:08] <strcat> graydon: I think I fixed it http://buildbot.rust-lang.org/builders/incoming-full-linux/builds/1458
[21:31:17] *** Quits: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP) (Quit: Leaving.)
[21:31:25] <strcat> that's a build of try
[21:31:35] * strcat will make a PR
[21:31:51] *** Joins: BitPuffin (quassel@moz-E15AD4B3.cust.tele2.se)
[21:32:22] <graydon> thanks!
[21:33:17] <strcat> if it would actually load the stdio I could tell ;p
[21:33:47] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[21:33:47] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:35:05] *** Quits: BitPuffin (quassel@moz-E15AD4B3.cust.tele2.se) (Client exited)
[21:35:39] *** Joins: tikue (tkuehn@2557E599.66715431.D25A875A.IP)
[21:36:54] *** Joins: moonchrome (moonchrome@moz-AE4D19CF.dsl.iskon.hr)
[21:37:01] *** Joins: BitPuffin (quassel@moz-E15AD4B3.cust.tele2.se)
[21:37:03] *** Quits: spider-mario (spidermari@moz-AC2C1EAE.rev.sfr.net) (Connection reset by peer)
[21:37:25] <strcat> graydon: ah nvm it still failed :(
[21:37:29] *** Quits: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com) (Client exited)
[21:37:59] <strcat> configure: WARNING: if you wanted to set the --build type, don't use --host.
[21:38:01] <strcat>     If a cross compiler is detected then cross compile mode will be used
[21:38:32] <graydon> which configuration is emitting that?
[21:38:37] <strcat> graydon: jemalloc's
[21:38:47] *** Quits: BitPuffin (quassel@moz-E15AD4B3.cust.tele2.se) (Client exited)
[21:38:49] <strcat> System types:
[21:38:51] <strcat>   --build=BUILD     configure for building on BUILD [guessed]
[21:38:53] <strcat>   --host=HOST       cross-compile to build programs to run on HOST [BUILD]
[21:39:01] <strcat> I'll try --build=triple instead
[21:40:02] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[21:40:02] <ghrust> 01[13rust01] 15thestinger 04force-pushed 06try from 14e3e20ee to 14a3b8481: 02http://git.io/k471pw
[21:40:02] <ghrust> 13rust/06try 14a3b8481 15Daniel Micay: fix jemalloc on cross-compiled builds...
[21:40:02] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[21:41:10] *** Joins: BitPuffin (quassel@moz-E15AD4B3.cust.tele2.se)
[21:41:22] <graydon> which triple are you passing?
[21:41:36] <graydon> we track 2 (or maybe 3) different triples
[21:41:39] *** Joins: jviereck (Adium@moz-39C72C7.dip0.t-ipconnect.de)
[21:41:45] <strcat> graydon: $(1) from the Makefile, and that's like x86_64-unknown-linux-gnu
[21:43:44] <strcat> graydon: I could just be doing this locally since I have a multilib gcc for building Arch packages anyway. ;p
[21:43:48] *** Quits: brendan (brendaneic@E9758364.9EC0A5AF.CFE928A7.IP) (Quit: brendan)
[21:44:29] <graydon> where is the configuration done?
[21:44:41] <graydon> found it
[21:44:54] *** Joins: seth (seth@2557E599.66715431.D25A875A.IP)
[21:45:37] <graydon> gr. we don't _have_ the build triple in that make rule
[21:47:12] <strcat> graydon: it could be moved to be part of rust's configure but then we need another top-level dir like libuv/llvm
[21:47:30] <graydon> why?
[21:47:45] <strcat> graydon: because make clean clears the directory it gets built in atm
[21:47:50] *** Joins: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com)
[21:47:57] <strcat> and it needs ./configure to build out-of-tree (src/rt)
[21:48:35] <graydon> oh wait
[21:48:37] <graydon> CFG_BUILD_TRIPLE
[21:48:47] <graydon> should be available globally across the makefiles
[21:48:49] <graydon> try that
[21:48:52] <strcat> ah
[21:48:59] <graydon> (I _thought_ we tracked all 3)
[21:49:37] <strcat> makefiles are such a pain :)
[21:49:39] <graydon> pass that as --build and $(1) as --host, I think?
[21:50:03] *** Quits: seth (seth@2557E599.66715431.D25A875A.IP) (Ping timeout)
[21:50:03] <graydon> it's weird that jemalloc calls target "host", but it's not a cross compiler so I guess that's legit
[21:53:14] *** Quits: sankha93 (Instantbir@83A1CD4B.EEA5FE15.8B6C1D65.IP) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[21:53:17] *** Quits: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com) (Client exited)
[21:53:21] *** Joins: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP)
[21:53:21] <ghrust> 01[13rust01] 15thestinger 04force-pushed 06try from 14a3b8481 to 140bf7a1c: 02http://git.io/k471pw
[21:53:21] <ghrust> 13rust/06try 140bf7a1c 15Daniel Micay: fix jemalloc on cross-compiled builds...
[21:53:21] *** Parts: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP) ()
[21:54:28] *** Quits: Excureo (c@moz-DE8C33F1.static.yakm.wa.charter.com) (Ping timeout)
[21:55:01] *** Joins: mschifer (Adium@2557E599.66715431.D25A875A.IP)
[21:55:04] *** Quits: mschifer1 (Adium@2557E599.66715431.D25A875A.IP) (Connection reset by peer)
[21:55:14] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[21:55:19] <strcat> graydon: trying to build android one time has given me nightmares about cross-compiling
[21:55:29] *** Quits: Guest__ (textual@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[21:55:32] <strcat> it takes like an hour just for it to clone the 10000 repos though
[21:55:41] *** Quits: reyre_ (reyre@F2D29657.F60B0462.67AC9B1.IP) (Client exited)
[21:56:07] *** kimundi is now known as zz_kimundi
[21:57:18] *** Joins: Excureo (c@moz-DE8C33F1.static.yakm.wa.charter.com)
[21:57:49] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:58:33] *** Joins: tjc (tjc@moz-B867959A.redactedconsulting.com)
[21:58:33] *** ChanServ sets mode: +o tjc
[22:00:06] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: night)
[22:01:42] <strcat> configure: error: in `/home/rustbuild/src/rust-buildbot/slave/incoming-full-linux/build/obj/rt/i686-unknown-linux-gnu/stage1/jemalloc':
[22:01:44] <strcat> configure: error: cannot run test program while cross compiling
[22:01:46] <strcat> heh
[22:02:37] * strcat doesn't understand what it wants
[22:02:44] *** Quits: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP) (Quit: pcwalton)
[22:02:56] *** Quits: rindolf (Shlomi@moz-79B283F7.red.bezeqint.net) (Quit: Leaving)
[22:03:01] *** Joins: brendan (brendaneic@E9758364.9EC0A5AF.CFE928A7.IP)
[22:03:49] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[22:04:29] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[22:04:29] *** ChanServ sets mode: +o brson
[22:05:39] <strcat> stupid autoconf
[22:05:49] *** Quits: Jesin (Jessin_@moz-157A63DD.cc.lehigh.edu) (Ping timeout)
[22:05:57] <strcat> it wants to run a program to check the page size and bails out in a cross-compile ;\
[22:06:19] <cmr> wut
[22:06:27] <cmr> isn't autoconf /designed/ to ease cross compiles?
[22:06:46] <tjc> Sure
[22:06:49] <tjc> and C was designed to be portable
[22:06:49] <tjc> :-)
[22:06:53] <cmr> heh
[22:06:56] <cmr> touche
[22:07:11] <cmr> I try to avoid autotools. They just look like an unholy mess to me :\
[22:08:02] *** Joins: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP)
[22:08:02] *** ChanServ sets mode: +o pcwalton
[22:08:17] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[22:08:20] <graydon> strcat: did you pass both build and host?
[22:08:25] <strcat> graydon: yeah
[22:08:32] *** Quits: eschweic (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[22:08:53] <strcat> graydon: there's an autoconf test running a C program to get the page size
[22:08:55] <strcat> and it does this
[22:08:57] <strcat> as_fn_error $? "cannot run test program while cross compiling
[22:09:18] <strcat> if $cross_compiling is "yes"
[22:09:43] <strcat> looks like we have to set a static page size
[22:10:21] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[22:10:54] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[22:11:06] <graydon> isn't it supposed to ... know how to do that?
[22:12:09] <pcwalton> hey, I discovered something
[22:12:15] <pcwalton> 63% of trans time is spent executing glue
[22:12:23] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Quit: tikue)
[22:12:48] <pcwalton> 10% of it in LLVM
[22:13:01] <strcat> all those @?
[22:13:08] <pcwalton> I bet the @ stuff is inlined, no?
[22:13:16] <pcwalton> it's probably all free for ~
[22:13:44] <strcat> pcwalton: does the free call get inlined where LLVM can see it yet?
[22:13:49] <pcwalton> don't think so
[22:13:54] <pcwalton> I just want to go remove allocations to remove this
[22:13:56] <pcwalton> to fix this
[22:14:06] *** Joins: tikue (tkuehn@2557E599.66715431.D25A875A.IP)
[22:14:44] <doener> I noticed some time ago, that some glue seems not to get inlined, although it's marked as "always inline"
[22:15:17] <pcwalton> I don't think it's always inline
[22:15:26] <strcat> pcwalton: non-structural types are
[22:15:30] <pcwalton> ah right
[22:15:49] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[22:15:49] <doener> I noticed it for unique pointers
[22:16:30] <doener> wondered why there were calls to glue_drop, although it would have been obvious that free wasn't necessary because a move happened, if the code was inlined
[22:17:18] <strcat> graydon: http://www.canonware.com/pipermail/jemalloc-discuss/2011-April/000001.html a thread about it
[22:17:25] <strcat> lets see if there's an easy solution...
[22:18:03] <strcat> meh
[22:18:23] <doener> pcwalton: by "trans" you mean the last pass before things are handed off to LLVM?
[22:18:24] <graydon> it'll be 12 everywhere except windows; 16 on windows, IIRC
[22:18:45] <pcwalton> doener: right
[22:18:57] <cmr> graydon: page size?
[22:18:59] <pcwalton> strcat: what I think/hope is that there are a bunch of useless allocations in trans
[22:19:06] <pcwalton> and by removing them there could be large wins
[22:19:07] <doener> pcwalton: is there a flag to make rustc stop after that? I only know that --no-trans stops just before it
[22:19:08] <graydon> log2 page size, yeah
[22:19:11] <cmr> oh
[22:19:13] <pcwalton> doener: --emit-llvm
[22:19:19] <doener> pcwalton: ah, thanks!
[22:19:44] <cmr> pcwalton: just look as far as the crate context... @bool
[22:19:50] <strcat> and -S will save you an llvm-dis
[22:20:02] <jensnockert> graydon: Page size should be 4k on all x86?
[22:20:05] <Eridius> rusti: let ãƒ¼ = 3; ãƒ¼
[22:20:06] -rusti- 3
[22:20:07] <Eridius> heh
[22:22:06] <graydon> jensnockert: yeah, it depends whether you're thinking "page table" or "what the OS refers to as a page when you do VM-level allocs"
[22:22:33] <strcat> graydon: http://ix.io/62v here's the section btw
[22:22:52] <strcat> so I guess we could just hardcode the number for all the possible targets
[22:23:53] <jensnockert> graydon: Oh, right, the mmap-alike on Windows has 64k pages, you're totally right.
[22:23:58] *** Joins: seth (seth@2557E599.66715431.D25A875A.IP)
[22:24:02] <graydon> I'm willing to do that for now. the GC does that.
[22:24:04] <jensnockert> Thanks for reminding me.
[22:24:23] <graydon> it reminded me itself, recently :)
[22:24:54] * jensnockert hugs graydon.
[22:26:29] *** Joins: MaikKlein (maik@moz-76A64E0E.dip0.t-ipconnect.de)
[22:26:39] *** Quits: doomlord (doomlod@moz-8F385DB0.range109-153.btcentralplus.com) (Ping timeout)
[22:30:52] *** Quits: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP) (Quit: Leaving)
[22:31:21] *** Quits: unbracketed (textual@moz-7F0EE151.lsanca.fios.verizon.net) (Quit: Computer has gone to sleep.)
[22:35:06] *** Joins: mib_59gjtg (Mibbit@moz-8F24012A.range109-154.btcentralplus.com)
[22:36:50] *** Quits: mib_59gjtg (Mibbit@moz-8F24012A.range109-154.btcentralplus.com) (Quit: http://www.mibbit.com ajax IRC Client)
[22:37:22] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[22:37:43] <flu_> I built rust from source (0.6) and I dont have a cargo executable alongside the rust utilities - is cargo still in use?
[22:37:55] <flu_> or maybe there's a different tarball I need to grab?
[22:38:17] * flu_ notices rustpkg
[22:39:34] <strcat> graydon: meh, I need someone who understands autotools ;p
[22:39:46] <cmr> those people exist?
[22:39:59] <graydon> they do, but they deny it
[22:40:02] <cmr> heh
[22:40:24] <graydon> strcat: I know a bit, what are you trying to do?
[22:41:02] <strcat> graydon: well I don't know how to go about setting this je_cv_static_page_shift variable
[22:41:11] <strcat> it's used in the configure script
[22:41:22] <strcat> checks if it's set and then tries to run that test if it's not
[22:41:31] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Textual IRC Client: www.textualapp.com)
[22:41:57] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[22:42:40] <brendanc> AC_CACHE_CHECK ?
[22:42:49] *** Quits: cdidd (cdidd@moz-F58375C.broadband.corbina.ru) (Ping timeout)
[22:42:56] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[22:44:07] <tikue> what is the reason for multiple-trait inheritance separating inherited traits with a '+' rather than some other delimiter, such as ','?
[22:44:16] <cmr> tikue: that isn't inheritance
[22:44:16] *** Joins: cdidd (cdidd@moz-AFAFD3B0.broadband.corbina.ru)
[22:44:20] <cmr> tikue: Those are trait bounds.
[22:44:26] <strcat> cmr: there's trait inheritance too
[22:44:35] <strcat> trait Foo: Bar + Baz {}
[22:44:37] <cmr> strcat: it uses : though, doesn't it?
[22:44:39] <cmr> oh
[22:44:46] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: jorendorff)
[22:44:49] <strcat> same syntax as bounds though
[22:45:03] * cmr feels silly
[22:45:08] <tikue> cmr: my question applies to trait bounds too, though
[22:45:10] <strcat> it used to be space-separated, I forget why it was changed (ambiguity? consistency?)
[22:46:30] <cmr> I like using +. Looks nice, makes sense intuitively to me ("you're bounded by/inheret all of these traits added together")
[22:46:37] <cmr> maybe I'm weird, though :)
[22:49:29] *** Quits: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[22:49:54] <sully> where are crate contexts defined?
[22:49:58] *** Quits: heftig (heftig@moz-B679706C.dip0.t-ipconnect.de) (Quit: Quitting)
[22:50:03] <cmr> trans/common.rs iirc
[22:51:28] *** Joins: heftig (heftig@moz-B679706C.dip0.t-ipconnect.de)
[22:52:16] <pcwalton> whoa
[22:52:29] <pcwalton> every time we call "insn_ctxt" (which happens everywhere) we duplicate a string onto the heap
[22:52:31] <pcwalton> in trans
[22:52:37] <pcwalton> and they're all static strings
[22:52:43] <pcwalton> whoops!!
[22:54:09] *** Quits: MaikKlein (maik@moz-76A64E0E.dip0.t-ipconnect.de) (Client exited)
[22:54:21] <tikue> rusti: struct Foo { bar: ~fn }; let foo = Foo { bar: || println("baz"), }; foo.bar();
[22:54:22] -rusti- <anon>:10:31: 10:32 error: expected `(` but found `}`
[22:54:22] -rusti- <anon>:10          struct Foo { bar: ~fn }; let foo = Foo { bar: || println("baz"), }; foo.bar();
[22:54:22] -rusti-                                          ^
[22:54:22] -rusti- application terminated with error code 101
[22:54:43] <dymk> oh, rusti got an upgrade
[22:54:44] <dymk> neat
[22:55:00] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[22:55:17] *** Quits: mib_ztptp3 (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:55:21] *** Joins: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP)
[22:56:54] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:56:55] <tikue> rusti: struct Foo { bar: ~fn() }; let foo = Foo { bar: || { println("baz"); }, }; foo.bar();
[22:56:58] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/BCaP
[22:57:20] <tikue> ^ can someone explain this error
[22:57:24] <flu_> ha! Facebook is using our game as their screenshot on how to do subscriptions with facebook credits. #winning
[22:57:42] <cmr> flu_: what game?
[22:57:46] <flu_> ^-- wrong channel... still worth some bragging I suppose
[22:57:48] <flu_> bingo blitz
[22:58:08] <doener> pcwalton: doesn't that only happen when the counting is enableD?
[22:58:09] <cmr> tikue: bar isn't a method, though that does seem oddly broken.
[22:58:25] <doener> pcwalton: or am I missing something?
[22:58:30] <tikue> cmur: any idea how I would do what I'm trying to do?
[22:58:35] <tikue> cmr: ^
[22:58:37] <cmr> tikue: no, sorry :(
[22:58:39] <cmr> tikue: maybe...
[22:58:49] <cmr> rusti: struct Foo { bar: ~fn() }; let foo = Foo { bar: || { println("baz"); }, }; let x = foo.bar; x()
[22:58:51] -rusti- baz
[22:58:51] -rusti- ()
[22:59:05] <bstrie> cmr: it looks like jemalloc gets built at every stage, rather than once ever. surely that's not intentional?
[22:59:14] *** Quits: eholk (eholk@moz-F8E3901F.uconnect.utah.edu) (Quit: eholk)
[22:59:19] <cmr> bstrie: seriously strcat did all the work
[22:59:22] <cmr> all I did was open the PR
[22:59:29] <tikue> cmr: heh, weird. thank you :)
[22:59:31] <bstrie> cmr: too late, now it's yours forever
[22:59:34] <cmr> :(
[22:59:37] <strcat> bstrie: the runtime is built at every stage now
[22:59:42] <strcat> it wasn't when I made that
[23:00:17] <bstrie> strcat: surely there's no reason we *have* to build jemalloc at every stage, right?
[23:00:42] <strcat> there isn't really a reason but it means making another top-level directory for it
[23:01:03] <bstrie> I'm going to file a bug then
[23:01:08] <strcat> where do we put libuv?
[23:01:10] <cmr> Would an extern or thirdparty dir make sense?
[23:01:22] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[23:01:35] *** Joins: pongad (Mibbit@moz-244CF33A.amazon.com)
[23:01:47] *** Quits: pongad (Mibbit@moz-244CF33A.amazon.com) (Quit: http://www.mibbit.com ajax IRC Client)
[23:01:48] <bstrie> I think handling it the same way as libuv would be ideal
[23:01:57] *** zz_kimundi is now known as kimundi
[23:01:59] <bstrie> for the sake of consistency
[23:03:07] <pcwalton> doener: oh yeah, that's true. hmm.
[23:03:16] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[23:04:54] <pcwalton> oh blech, it's the reference counting
[23:05:28] *** Joins: Sorella (queen@B12A78F5.BA14766C.95C8B7C6.IP)
[23:05:31] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[23:05:32] *** Joins: jrfeenst (jrfeenst@moz-F912484F.cpe.norwoodlight.com)
[23:07:17] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[23:07:40] *** Quits: jviereck (Adium@moz-39C72C7.dip0.t-ipconnect.de) (Quit: Leaving.)
[23:07:46] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Quit: Leaving)
[23:08:22] <strcat> bstrie: anyway it just means putting jemalloc outside of the stage dirs
[23:08:27] <strcat> it would be easy to fix
[23:08:33] <strcat> first need to fix cross-compiling ;p
[23:13:40] <bstrie> graydon: "Personally I like the sigil for its terseness; it's not clear to me
[23:13:42] <bstrie> anyone else does
[23:13:47] <bstrie> <-- this guy likes the sigil
[23:13:50] <graydon> whee
[23:15:14] <bstrie> not that I don't also like the prospect of putting GC in a library, maybe we can just make the built-in GC special :)
[23:15:23] <cmr> I agree
[23:15:54] <bstrie> perhaps it would also allow us to switch to RC rather than GC for all @ in runtimeless rust?
[23:16:16] <strcat> no
[23:16:20] <strcat> cycles.
[23:16:38] <strcat> and they don't move
[23:16:56] <strcat> you need move semantics for reference counted pointers
[23:17:10] <bstrie> strcat: right, I figured runtimeless rust using RC for @ would just leak cycles eternally like we do today :P
[23:17:20] <bblum> that would be great
[23:17:20] <strcat> bstrie: but @ is slow for reference counting
[23:17:23] <strcat> it implicitly copies
[23:17:57] <bstrie> I'm not saying it's a great idea, it just seems like it could make runtimeless rust a bit less painful. but I'm not wedded to the idea, it's just a cute thing that was brought up a long time ago
[23:18:06] <strcat> that's why it's slow in rust right now. because even though in 9/10 cases we don't need the refcount we're doing it
[23:18:11] <bblum> FWIW, my vote is to have RC and GC implementations in the library, and choose one of them to be the "recommended way", and put #[lang="@"] on top of it
[23:18:21] <bblum> to make the common case much more concise
[23:18:27] <strcat> bblum: then everyone will have to live with @ not being implicitly copyable
[23:18:31] <cmr> What are the lang attributes?
[23:18:36] <bblum> strcat: why... wouldn't it be?
[23:18:44] <strcat> bblum: because that's terrible with reference counting.
[23:19:07] <strcat> especially once we have fork
[23:19:10] <bblum> fork?
[23:19:16] <strcat> multiprocessing
[23:19:16] <bblum> isn't it not bad today? we emit take glue for @ or something like that
[23:19:25] <strcat> bblum: yes, but @ is unacceptably bad today
[23:19:36] <strcat> it's not an acceptable reference counted type at all - it costs a ton
[23:19:46] <strcat> let x = @5; foo(x)
[23:19:48] <strcat> by-value
[23:19:50] <strcat> shouldn't refcount
[23:19:52] <strcat> it should move into foo
[23:19:59] <strcat> if it was actually designed for reference counting
[23:20:13] <sully> hm. I had thought I had figured out what was going on with this default method bug.
[23:20:15] <bblum> that doesn't seem like a limitation of today's @; that seems like a bug
[23:20:19] <sully> actually I am more confused than ever
[23:20:27] <strcat> bblum: that @ copies implicitly?
[23:20:45] <bblum> your use of "implicitly copy" seems to be different than mine
[23:20:49] <bblum> mine means "if necessary"
[23:20:49] <strcat> let x = @5; foo(x); *x /* needs to throw use-after-move error */
[23:20:55] <strcat> bblum: but we removed that magic
[23:21:05] *** Joins: Ralith (ralith@moz-50F3C77.vc.shawcable.net)
[23:21:06] <bblum> oh yeah, last use...
[23:21:06] <bblum> hmm
[23:21:14] <bblum> i liked last use :X
[23:21:34] <bblum> ok well anyway
[23:21:39] <strcat> could probably analyze the number of current refcounts that are last use
[23:21:45] <bblum> why would it be a problem, if lang="@" was on Gc<T> rather than Rc<T>?
[23:21:45] <strcat> I bet it's a very high percentage
[23:22:04] <strcat> bblum: then it wouldn't, but it shouldn't be a switch if it's not acceptable as Rc
[23:22:47] <strcat> bblum: an unbelievable amount of librustc's time and size are for refcounts
[23:22:54] *** Joins: SimonSapin (simon@A5049320.3E93794D.61EA6C28.IP)
[23:23:05] <strcat> it's not a problem with refcounting, it's a problem with making @ refcounted
[23:23:12] <strcat> without changing it to move
[23:23:36] <strcat> + we had stuff like a 400MiB leak from an @ cycle
[23:23:45] <bblum> haha 400mb
[23:23:50] <bblum> really? how much time is spent refcounting?
[23:23:59] <bblum> i thought 80% of it was in llvm >_>
[23:24:04] <strcat> bblum: pcwalton just pegged it at ~60% of the time spent in glue in trans
[23:24:11] <pcwalton> well
[23:24:15] <pcwalton> it's refcounting + unique
[23:24:23] <pcwalton> unique pointer allocations and freeing
[23:24:41] <pcwalton> I'm busy changing the CrateContext to an unsafe pointer to see how much it helps
[23:25:22] <strcat> bblum: we have a lot of performance issues around this stuff
[23:26:19] <strcat> TreeMap is ~3x slower at inserts/removes than the same code in C++ because of moves and drop glue
[23:26:35] <strcat> and headers on ~, but mostly the glue is responsible
[23:26:36] <bstrie> strcat: regarding https://github.com/mozilla/rust/issues/6997 "The body of the loop won't have to be a closure" <-- isn't that the whole point of for notation?
[23:26:46] <strcat> bstrie: no
[23:27:20] <bstrie> strcat: for foo.iter |i| { /* this part isn't necessary? */ }
[23:27:29] <strcat> bstrie: external iterators don't use closures
[23:27:55] <strcat> unless you're forced to
[23:27:56] <bstrie> can you give an example of how a basic usage of external iterators would look without a closure?
[23:28:05] <bstrie> rather, with for notation
[23:28:44] <pcwalton> yeah, I really want to talk about nmatsakis about making destructors always definitely run or not at the end of the bloc
[23:28:59] <pcwalton> that seems important for performance.
[23:29:14] <strcat> rusti: let xs = ~[1, 2, 3]; let mut it = xs.iter(); loop { let x = it.next(); match x { Some(x) => println(x.to_str()), None => break }
[23:29:14] -rusti- <anon>:11:5: 11:6 error: incorrect close delimiter: `)`
[23:29:14] -rusti- <anon>:11     }));
[23:29:15] -rusti-                ^
[23:29:15] -rusti- application terminated with error code 101
[23:29:18] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[23:29:20] <strcat> rusti: let xs = ~[1, 2, 3]; let mut it = xs.iter(); loop { let x = it.next(); match x { Some(x) => println(x.to_str()), None => break } }
[23:29:22] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/IJGc
[23:29:42] <strcat> rusti: use std::iterator::*; let xs = ~[1, 2, 3]; let mut it = xs.iter(); loop { let x = it.next(); match x { Some(x) => println(x.to_str()), None => break } }
[23:29:44] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/ACYb
[23:29:56] <strcat> yay integer inference bu
[23:29:59] <strcat> g
[23:30:04] <strcat> rusti: use std::iterator::*; let xs = ~[1i, 2, 3]; let mut it = xs.iter(); loop { let x = it.next(); match x { Some(x) => println(x.to_str()), None => break } }
[23:30:05] -rusti- 1
[23:30:05] -rusti- 2
[23:30:05] -rusti- 3
[23:30:05] -rusti- ()
[23:30:14] <strcat> anyway you really don't want to write that
[23:30:44] <bstrie> I don't need a working example, just want to see what your ideal looks like
[23:30:48] <bblum> pcwalton: speaking of destructors, what's the way to nominate for a milestone? tag with I-nominated and comment "nominating for..."?
[23:30:52] <pcwalton> yup
[23:30:56] <strcat> bstrie: for xs.iter() |x| { }
[23:31:10] <bstrie> strcat: and isn't the |x| { } part the closure?
[23:31:12] *** Quits: echristo (echristo@D423593A.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[23:31:18] <strcat> bstrie: there would be no closure
[23:31:35] <strcat> 'return' and 'break' would *actually* return and break
[23:31:42] <strcat> they couldn't not work. so borrow checking wouldn't be hell
[23:31:47] <strcat> and you wouldn't get closure errors for moves
[23:31:55] *** Joins: jviereck (Adium@moz-39C72C7.dip0.t-ipconnect.de)
[23:31:57] <cmr> That would be delightful.
[23:32:01] <strcat> and it wouldn't compile as slow as xs.each does
[23:32:01] *** Quits: jviereck (Adium@moz-39C72C7.dip0.t-ipconnect.de) (Client exited)
[23:32:04] <bstrie> is this just strictly a performance optimization? basically "un-faking" our current faked control-loop-via-closures?
[23:32:16] <strcat> bstrie: no it's a semantic improvement
[23:32:29] <cmr> I come across all sorts of weirdness using do and for blocks in code and moving and mutating stuff outside.
[23:32:31] <strcat> external iterators can be composed, they can implement a trait, they can return/break successfully
[23:32:56] <strcat> if you're offered the choice of an API written by someone else with an external iterator or an internal one, the external one is better in every single way
[23:33:18] <strcat> the only reason internal iterators exist is because external ones are hard to write for recursive data structures without help from the compiler.
[23:33:34] <bstrie> so then this change would mean that we *actually* have a concept of for-loops in the language?
[23:33:49] <bstrie> even if they did only work on iterables as per python
[23:33:51] <strcat> bstrie: well they'd just be sugar for calling next and matching on the Option until it's None
[23:34:12] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke. It's all a joke.)
[23:34:30] <bstrie> ok, I was presuming that this was a much smaller change to the semantics of `for`
[23:34:39] <bstrie> thanks for the clarification
[23:34:52] <strcat> I've written lots of for loops with 'while' or 'loop' because borrow checking can't know that return/break actually work
[23:36:09] <strcat> rusti: use std::treemap::TreeSet; use std::iterator::*; let xs = [1, 2, 3]; let mut ys = TreeSet::new(); ys.insert(8); ys.insert(2);
[23:36:10] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/dbQa
[23:36:18] *** Quits: eschweic (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[23:36:23] <strcat> rusti: use extra::treemap::TreeSet; use std::iterator::*; let xs = [1, 2, 3]; let mut ys = TreeSet::new(); ys.insert(8); ys.insert(2);
[23:36:24] -rusti- <anon>:10:42: 10:59 warning: unused import [-W unused-imports (default)]
[23:36:24] -rusti- <anon>:10          use extra::treemap::TreeSet; use std::iterator::*; let xs = [1, 2, 3]; let mut ys = TreeSet::new(); ys.insert(8); ys.insert(2);
[23:36:24] -rusti-                                                     ^~~~~~~~~~~~~~~~~
[23:36:24] -rusti- ()
[23:37:09] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[23:37:25] <strcat> rusti: use extra::treemap::TreeSet; use std::iterator::*; let xs = [1, 2, 3]; let mut ys = TreeSet::new(); ys.insert(8); ys.insert(2); let zs: ~[int] = xs.zip(ys.transform(|&x| x * 2)).collect(); zs
[23:37:27] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/jNQe
[23:38:16] <strcat> rusti: use extra::treemap::TreeSet; use std::iterator::*; let xs = [1, 2, 3]; let mut ys = TreeSet::new(); ys.insert(8); ys.insert(2); let zs: ~[int] = xs.iter().zip(ys.iter().transform(|&x| x * 2)).collect(); zs
[23:38:17] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/XRHh
[23:38:36] <flu_> wooo pull request to rust-zmq sent
[23:38:39] * strcat forgets what kimundi called that
[23:38:52] <strcat> oh rusti just isn't updated
[23:39:16] <kimundi> collect is right
[23:39:23] <strcat> rusti: use extra::treemap::TreeSet; use std::iterator::*; let xs = [1, 2, 3]; let mut ys = TreeSet::new(); ys.insert(8); ys.insert(2); xs.iter().zip(ys.iter().transform(|&x| x * 2)).to_vec()
[23:39:25] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/CePF
[23:39:26] *** Joins: SiegeLord (siege@moz-CAF07B4C.hsd1.ma.comcast.net)
[23:39:36] <strcat> yay for type inference bugs
[23:39:44] <kimundi> though maybe sth shorter could be found?
[23:39:59] <strcat> rusti: use extra::treemap::TreeSet; use std::iterator::*; let xs = [1u, 2, 3]; let mut ys = TreeSet::new(); ys.insert(8u); ys.insert(2u); xs.iter().zip(ys.iter().transform(|&x| x * 2u)).to_vec()
[23:40:01] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/fThh
[23:40:18] <strcat> if only we had working type inference ;p
[23:40:28] <strcat> rusti: use extra::treemap::TreeSet; use std::iterator::*; let xs = [1u, 2, 3]; let mut ys = TreeSet::new(); ys.insert(8u); ys.insert(2u); xs.iter().zip(ys.iter().transform(|&x: &uint| x * 2u)).to_vec()
[23:40:29] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/TQIM
[23:40:30] *** dherman is now known as dherman-babyduty
[23:40:33] <cmr> jclements: ping
[23:40:42] <kimundi> gather(), accum()?
[23:40:56] <strcat> kimundi: accum is too much like what fold does
[23:41:12] <strcat> it's not really accumulating or gathering or collecting
[23:41:17] <jclements> cmr: pong, but running out the door....
[23:41:20] <jclements> cmr: what's up?
[23:41:32] <cmr> jclements: are you jbclements on github?
[23:41:40] <jclements> cmr: yep
[23:41:50] <cmr> jclements: what's the major impact of https://github.com/mozilla/rust/pull/6938?
[23:41:58] <cmr> (I'm writing up a "This Week In Rust" post)
[23:42:04] * strcat doesn't understand why that doesn't infer.
[23:42:26] <jclements> cmr: no major impact yetâ€¦it's still just getting the groundwork laid for hygiene. 
[23:42:33] <cmr> jclements: Ok, that's what I thought. thanks :)
[23:42:43] *** Parts: steven_is_false (user@moz-144077DE.bchsia.telus.net) (ERC Version 5.3 (IRC client for Emacs))
[23:42:45] *** Parts: jclements (jclements@2557E599.66715431.D25A875A.IP) ()
[23:42:45] <bblum> this week in rust: adding features that bblum hates and removing features that bblum likes
[23:43:00] *** Quits: BitPuffin (quassel@moz-E15AD4B3.cust.tele2.se) (Ping timeout)
[23:43:09] <kimundi> Ah, other thing I thought of. How about a deref() method in place of transform(|&e|e)?
[23:43:12] <bblum> sorry. i should keep it to myself.
[23:44:20] *** Quits: eschweic (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[23:44:34] <strcat> bblum: are you talking about loops?
[23:45:02] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[23:45:10] <bblum> partly? i'm not convinced of the motivation for even more magic syntax
[23:45:16] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Quit: tikue)
[23:45:30] <strcat> bblum: it's less magic than magic closure control blocks where keywords like 'return' and 'break' don't do what they claim
[23:45:31] <bblum> and it just seems to be moving the language to a more object-oriented, less functional direction in general
[23:45:42] <doener> yay, type checking for librustc from 5.187s to 4.672s. Now to get a merge request out of the mess in my working tree...
[23:46:05] <strcat> bblum: we can't have 'zip' right now, I wouldn't call that very functional
[23:46:17] <bblum> we can't?
[23:46:30] <cmr> not without huge code duplication for every container
[23:46:33] <strcat> bblum: you need external iterators or lazy thunks
[23:46:38] <strcat> cmr: can't write a generic zip though
[23:46:45] <strcat> hardcoded versions are besides the point ;p
[23:46:49] <bblum> zip... doesn't take a closure
[23:47:12] <strcat> bblum: what does it take then? how do you currently zip over 2 arbitrary iterators?
[23:47:26] <bblum> what zip are we talking about here?
[23:47:53] <strcat> Prelude> zip [1, 2, 3] ["foo", "bar", "baz"]
[23:47:55] <strcat> [(1,"foo"),(2,"bar"),(3,"baz")]
[23:48:12] <strcat> with arbitrary containers (haskell has laziness, so it's a different story)
[23:48:21] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[23:48:30] <strcat> arbitrary iterators* rather
[23:49:10] <bblum> fn zip<T, U, Tc: Iterable<T>, Uc: Iterable<U>, TUc: Iterable<(T,U)>>(Tc, Uc) -> TUc
[23:49:25] <strcat> bblum: and what's Iterable?
[23:49:30] *** Joins: BitPuffin (quassel@moz-E15AD4B3.cust.tele2.se)
[23:49:43] <strcat> internal iterators can't have iteration interleaved
[23:49:47] <strcat> if you break out, the state is gone
[23:49:55] <strcat> so you can't implement a zip iterator
[23:49:56] <bblum> hmmm
[23:50:09] <bblum> (also that returning a TUc thing doesn't make much sense)
[23:50:26] <bblum> (wait, maybe it does)
[23:50:50] <bblum>  mean, Iterable could contain both a fn next() and a fn each()
[23:50:55] *** Joins: tikue (tkuehn@2557E599.66715431.D25A875A.IP)
[23:51:06] <strcat> bblum: Iterator gives you 'advance' which is 'each'
[23:51:36] <bblum> that seems like sort of a counterintuitive name
[23:51:44] <bblum> advance suggests "go next one step"
[23:51:54] <strcat> bblum: it shouldn't exist though, it's a hack
[23:52:02] <bblum> why?
[23:52:11] <strcat> it doesn't work as it should - returning and breaking from a for loop isn't treated as actually returning/breaking
[23:52:34] <strcat> the borrowck and move check has no idea that it will actually return from the function if you write return
[23:52:42] <bblum> why doesn't it?
[23:52:44] <strcat> because with an internal iterator, there's no guarantee it will
[23:52:49] <bblum> looking in iterator.rs it seems like it does
[23:52:52] <strcat> bblum: 'return' in a for loop currently doesn't return
[23:52:54] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[23:52:59] <strcat> bblum: borrowck is local reasoning
[23:53:17] *** Quits: tjc (tjc@moz-B867959A.redactedconsulting.com) (Quit: zzzzzzzzzz)
[23:53:27] <strcat> it doesn't necessarily even have the source code for advance in another module
[23:53:36] <strcat> if it wasn't inlined
[23:53:46] <bblum> ah hm
[23:53:57] <strcat> bblum: atm if you 'return', the loop can keep going anyway
[23:54:26] <bblum> sure, yeah
[23:54:34] <strcat> with an external iterator it can't
[23:54:38] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[23:54:38] *** ChanServ sets mode: +o brson
[23:54:43] <bblum> hmm
[23:55:09] *** Quits: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP) (Quit: pcwalton)
[23:55:24] *** Joins: Jesin (Jessin_@moz-3AD6F09F.res.lehigh.edu)
[23:55:40] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[23:56:19] *** Quits: BitPuffin (quassel@moz-E15AD4B3.cust.tele2.se) (Client exited)
[23:56:22] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[23:56:48] <bblum> strcat: what borrowck difficulties does that present?
[23:56:51] *** Joins: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP)
[23:56:51] *** ChanServ sets mode: +o pcwalton
[23:57:26] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:57:27] <bblum> i guess i don't think the for iteration protocol should support 'return' anyway, only 'break' and 'continue'
[23:57:46] <strcat> bblum: but an internal iterator won't necessarily break anyway
[23:58:02] <strcat> so borrowck thinks you're aliasing &mut or moving from things twice
[23:58:02] <bblum> true; but what difficulties are there with that?
[23:58:05] <strcat> bblum: lots
[23:58:12] <bblum> example?
[23:58:24] <strcat> bblum: returning &mut
[23:58:40] <strcat> when you have an &mut index into a container
[23:58:59] <strcat> all the existing code is written with @ besides a few containers in the stdlib...
[23:59:38] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[23:59:44] <bstrie> pcwalton: regarding lang items for GC, if I'm providing a custom GC for use with my program via lang items, but I'm also using a library that was only tested with the the stock GC, do you expect everything to work fine?
