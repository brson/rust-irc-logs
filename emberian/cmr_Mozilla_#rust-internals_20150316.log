[00:00:04] *** Quits: jxv_ (jxv___@moz-pi22qa.ca.charter.com) (Quit: Leaving)
[00:05:21] *** Joins: evanfarrar (evanfarrar@moz-56vd31.res.rr.com)
[00:15:35] *** Quits: gsingh93 (uid22642@moz-aq0iah.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[00:16:33] *** Quits: evanfarrar (evanfarrar@moz-56vd31.res.rr.com) (Connection closed)
[00:17:04] *** Joins: evanfarrar (evanfarrar@moz-56vd31.res.rr.com)
[00:36:00] *** Joins: violaceae (violaceae@moz-7uq2fc.u4is.n1v0.0007.2601.IP)
[00:38:12] *** Quits: evanfarrar (evanfarrar@moz-56vd31.res.rr.com) (Connection closed)
[00:40:40] *** Quits: eibwen (eibwen@moz-568rsq.dip0.t-ipconnect.de) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[00:40:58] *** Joins: eibwen (eibwen@moz-568rsq.dip0.t-ipconnect.de)
[00:44:22] *** Quits: o11c (ben@moz-9bd9kh.customer.t3.se) (Ping timeout: 121 seconds)
[00:48:59] *** Joins: o11c (ben@moz-9bd9kh.customer.t3.se)
[00:50:21] *** Quits: eibwen (eibwen@moz-568rsq.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[01:05:33] *** Quits: Nekit1234007 (nekit@moz-vbf.vq8.182.62.IP) (Quit: leaving)
[01:08:00] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:09:21] *** Joins: reem (reem@moz-di7pfv.coob.q2h1.0009.2601.IP)
[01:09:53] *** Quits: violaceae (violaceae@moz-7uq2fc.u4is.n1v0.0007.2601.IP) (Ping timeout: 121 seconds)
[01:13:42] *** Quits: reem (reem@moz-di7pfv.coob.q2h1.0009.2601.IP) (Connection closed)
[01:23:20] *** Joins: zmack (zmack@moz-b26i0b.home.aster.pl)
[01:26:53] *** Joins: violaceae (violaceae@moz-7uq2fc.u4is.n1v0.0007.2601.IP)
[01:27:22] *** Quits: zmack (zmack@moz-b26i0b.home.aster.pl) (Ping timeout: 121 seconds)
[01:28:56] *** Joins: _zxq9_ (ceverett@moz-qsm369.mesh.ad.jp)
[01:34:51] *** kimundi is now known as zz_kimundi
[01:42:47] *** zz_kimundi is now known as kimundi
[01:48:35] *** Joins: evanfarrar (evanfarrar@moz-56vd31.res.rr.com)
[01:52:44] *** Quits: evanfarrar (evanfarrar@moz-56vd31.res.rr.com) (Ping timeout: 121 seconds)
[01:55:47] *** Joins: minzh (minzh@moz-u8rq5v.citrix.com)
[01:56:23] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[01:59:16] *** Joins: sprang (sprang@moz-bll05b.zoominternet.net)
[01:59:53] *** Quits: minzh (minzh@moz-u8rq5v.citrix.com) (Ping timeout: 121 seconds)
[02:03:21] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[02:03:41] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[02:08:05] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[02:08:41] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[02:10:13] *** kimundi is now known as zz_kimundi
[02:10:32] *** Quits: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net) (Ping timeout: 121 seconds)
[02:12:25] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[02:12:41] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[02:13:41] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[02:17:28] *** Joins: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net)
[02:18:22] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[02:18:51] *** zz_kimundi is now known as kimundi
[02:19:13] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[02:19:49] *** Joins: minzh (minzh@moz-u8rq5v.citrix.com)
[02:30:08] *** Quits: chc4 (chc4@moz-pdo0at.ma.comcast.net) (Quit: AHHHHH BEES)
[02:31:23] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[02:32:41] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[02:38:33] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[02:45:13] *** Quits: ^BR (br@moz-egk.dm6.194.78.IP) (Client exited)
[02:45:18] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[02:53:57] *** Quits: violaceae (violaceae@moz-7uq2fc.u4is.n1v0.0007.2601.IP) (Quit: Leaving)
[02:56:16] *** Joins: ^BR (br@moz-egk.dm6.194.78.IP)
[03:08:01] *** Joins: erickt (erickt@moz-hc1ntj.sntcca.sbcglobal.net)
[03:08:26] *** Joins: jdm (jdm@moz-ilbt2e.cable.teksavvy.com)
[03:10:19] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Connection closed)
[03:12:29] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[03:23:20] *** Joins: Gankro (uid71432@moz-sc2bd6.charlton.irccloud.com)
[03:26:57] *** Joins: evanfarrar (evanfarrar@moz-56vd31.res.rr.com)
[03:28:09] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[03:37:02] *** Quits: kimundi (kimundi@moz-2itb6k.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[03:37:05] *** Quits: evanfarrar (evanfarrar@moz-56vd31.res.rr.com) (Connection closed)
[03:38:20] *** Joins: kimundi (kimundi@moz-vchv39.dip0.t-ipconnect.de)
[03:41:03] <Gankro> So I'm vaguely aware that typestate was a thing we used to have to have a single type with conditional functionality. We can emulate it today with phantom types but it's kinda annoying. I'm wondering if anyone has any longterm plans on the backburner to regain some of the ergonomics?
[03:42:31] *** kimundi is now known as zz_kimundi
[03:51:15] *** zz_kimundi is now known as kimundi
[03:53:09] *** Joins: dpc (dpc@moz-a8v.6sn.162.73.IP)
[03:53:44] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[03:56:33] *** Joins: mib_tsw2tp (Mibbit@moz-juv.9o3.252.72.IP)
[03:56:45] * Gankro ragequits the community because his vague questions aren't promptly answered in the middle of a sunday night
[03:58:33] <Eridius> nooooo
[04:05:55] *** Quits: mib_tsw2tp (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:13:02] *** Quits: erickt (erickt@moz-hc1ntj.sntcca.sbcglobal.net) (Ping timeout: 121 seconds)
[04:14:25] *** Quits: Rym_ (y@moz-859.d1r.39.217.IP) (Ping timeout: 121 seconds)
[04:14:45] *** Joins: semarie (semarie@moz-1ke7g5.ip-92-222-38.eu)
[04:19:34] *** Joins: Rym_ (y@moz-859.d1r.39.217.IP)
[04:22:13] *** sunfish-away is now known as sunfish
[04:24:53] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[04:35:10] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[04:37:34] *** Joins: guacamole (Mibbit@moz-juv.9o3.252.72.IP)
[04:38:02] *** Quits: guacamole (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:40:11] <WindowsBunny> Gankro: lol
[04:43:03] *** kimundi is now known as zz_kimundi
[04:43:47] *** zz_kimundi is now known as kimundi
[04:45:12] *** Joins: kushal (kdas@moz-es3.2tk.189.118.IP)
[04:47:26] *** Joins: evanfarrar (evanfarrar@moz-56vd31.res.rr.com)
[04:51:31] *** Quits: evanfarrar (evanfarrar@moz-56vd31.res.rr.com) (Ping timeout: 121 seconds)
[04:54:36] *** kimundi is now known as zz_kimundi
[04:55:36] *** Quits: O01eg (o01eg@moz-7n6.3tq.165.5.IP) (Client exited)
[04:58:11] <Gankro> WindowsBunny: Also no one is taking implementing HKT seriously for 1.0?! What's the deal! Just Do It. I mean come on how complicated could it be?
[04:58:28] <WindowsBunny> Gankro: I want HKT :(
[04:58:54] <Gankro> WindowsBunny: Everyone does
[05:00:34] *** Joins: zmack (zmack@moz-b26i0b.home.aster.pl)
[05:04:36] *** Quits: zmack (zmack@moz-b26i0b.home.aster.pl) (Ping timeout: 121 seconds)
[05:11:05] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[05:16:01] *** Joins: sinclair (chatzilla@moz-o36q4q.xnet.co.nz)
[05:22:43] *** Quits: _zxq9_ (ceverett@moz-qsm369.mesh.ad.jp) (Quit: Konversation terminated!)
[05:24:43] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[05:33:26] *** Joins: theme (theme@moz-i3mhhb.asianet.co.th)
[05:34:07] *** Joins: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net)
[05:34:07] *** ChanServ sets mode: +o pcwalton
[05:36:06] *** Quits: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net) (Client exited)
[05:38:58] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[05:41:02] *** Joins: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk)
[05:43:26] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Ping timeout: 121 seconds)
[05:49:34] *** Joins: Johannes_ (Johannes@moz-4et8d7.ocn.ne.jp)
[05:52:00] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[05:52:45] *** Quits: Johannes (Johannes@moz-4et8d7.ocn.ne.jp) (Ping timeout: 121 seconds)
[06:02:13] *** Quits: sprang (sprang@moz-bll05b.zoominternet.net) (Ping timeout: 121 seconds)
[06:04:27] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[06:22:08] <theme> Seriously, I don't understand why everyone seems to disagree with me about making comparison traits unsafe
[06:22:12] <theme> https://github.com/rust-lang/rfcs/pull/956
[06:24:52] <theme> I think that 4 dupes on stackoverflow should be enough to say that comparison is not so simple
[06:31:51] *** Joins: zmack (zmack@moz-b26i0b.home.aster.pl)
[06:35:53] *** Quits: zmack (zmack@moz-b26i0b.home.aster.pl) (Ping timeout: 121 seconds)
[06:39:18] *** Joins: arrrrrrr1 (arrrrrrrrs@moz-t1eq9a.dynamic.qsc.de)
[06:40:00] *** Joins: Nekit1234007 (nekit@moz-vbf.vq8.182.62.IP)
[06:40:43] *** Quits: martin_ (martin@moz-bmp33l.u0v6.gff7.1608.2001.IP) (Ping timeout: 121 seconds)
[06:41:41] *** Quits: njn (chatzilla@moz-56pkrv.iinet.net.au) (Quit: ChatZilla 0.9.91.1 [Firefox 39.0a1/20150315153114])
[06:48:51] *** Quits: bfops (uid58242@moz-e5u6m0.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[06:50:58] <Yurume> huon: I'm not sure, but isn't gh23410 the intended behavior? both `Foo` and `Wrapper` is unsized and the lifetime only has to occur when it turns into a sized type somehow.
[06:50:58] <[o__o]> Unboxed trait object can be stored in struct without lifetime: https://github.com/rust-lang/rust/issues/23410
[06:53:08] <theme> Yurume, huon, Is that default bounds?
[06:56:28] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[06:58:10] *** Joins: ptalbot (ptalbot@moz-r8uvn2.dyn.as47377.net)
[07:01:44] *** Joins: jgallagher_ (john@moz-6ge.dhn.131.24.IP)
[07:02:09] *** Quits: jmesmon (ydoc@moz-naocu2.einic.org) (Ping timeout: 121 seconds)
[07:02:43] *** Quits: jgallagher (john@moz-6ge.dhn.131.24.IP) (Ping timeout: 121 seconds)
[07:02:43] *** jgallagher_ is now known as jgallagher
[07:03:12] *** Joins: jmesmon (ydoc@moz-naocu2.einic.org)
[07:04:20] <huon> Yurume: unclear
[07:04:34] <huon> Yurume: e.g. struct Foo([u8]) is unsized but doesn't need a lifetime
[07:04:48] <huon> Yurume: and, e.g. a lifetime is required in an impl block
[07:04:49] *** Joins: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se)
[07:06:06] <Yurume> hmm
[07:07:04] <huon> Yurume: clarified the text slightly :)
[07:08:14] *** Joins: dinfuehr (dinfuehr@moz-3sm28n.public.t-mobile.at)
[07:13:01] *** Quits: {-}grant ({0}grant@moz-63ubas.in.charter.com) (Ping timeout: 121 seconds)
[07:13:54] *** Joins: dinfuehr_ (dinfuehr@moz-c25.u8s.112.91.IP)
[07:13:55] *** Joins: eerie (eerie@moz-nu5r7u.red.bezeqint.net)
[07:14:06] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:14:08] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[07:14:15] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Connection closed)
[07:14:22] *** Joins: dinfueh__ (dinfuehr@moz-c25.u8s.112.91.IP)
[07:14:24] *** Quits: dinfuehr_ (dinfuehr@moz-c25.u8s.112.91.IP) (Connection closed)
[07:16:09] *** Joins: dinfuehr_ (dinfuehr@moz-c25.u8s.112.91.IP)
[07:16:15] *** Quits: dinfuehr (dinfuehr@moz-3sm28n.public.t-mobile.at) (Ping timeout: 121 seconds)
[07:17:29] *** Quits: Johannes_ (Johannes@moz-4et8d7.ocn.ne.jp) (Connection closed)
[07:17:51] *** Joins: Johannes (Johannes@moz-4et8d7.ocn.ne.jp)
[07:19:22] *** Quits: dinfueh__ (dinfuehr@moz-c25.u8s.112.91.IP) (Ping timeout: 121 seconds)
[07:23:33] *** Quits: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[07:24:45] *** Quits: untitaker (untitaker@moz-qo8vhd.highway.telekom.at) (Ping timeout: 121 seconds)
[07:29:51] *** Quits: eerie (eerie@moz-nu5r7u.red.bezeqint.net) (Connection closed)
[07:30:38] *** Joins: martin_ (martin@moz-bmp33l.u0v6.gff7.1608.2001.IP)
[07:30:51] *** Joins: untitaker (untitaker@moz-1nefhg.highway.telekom.at)
[07:30:52] <theme> Is there any reason my RFC is met with overwhelming disagreement?
[07:30:57] <theme> https://github.com/rust-lang/rfcs/pull/956
[07:35:08] <Mutabah> theme: basically, unsafe should be avoided in most code
[07:35:36] <theme> Well... are there *that* many custom comparison impls?
[07:35:51] <theme> #[derive(PartialEq, Eq)] seems enough for most cases for me
[07:36:27] <huon> 'seems' isn't very convincing :)
[07:36:43] <cmr> huon: r? https://github.com/rust-lang/rust/pull/23411
[07:36:46] <huon> doing some research into the number of manual impls would be good
[07:36:57] <theme> where should I look for custom comparison impls?
[07:37:06] <theme> how to do it?
[07:37:25] * theme doesn't want to manually parse stuff
[07:37:32] <Mutabah> theme: grep for 'PartialEq for'
[07:37:44] <theme> Mutabah, grep in what?
[07:38:14] <Mutabah> In rustc for a start
[07:38:25] <Mutabah> or github code search
[07:38:31] <huon> theme: https://github.com/huonw/rfcs/blob/must-use/text/0000-must-use-functions.md#appendix-is-this-going-to-affect-most-code-bases
[07:38:38] <huon> as an example
[07:38:46] <theme> ok...
[07:38:50] <cmr> steveklabnik: if I give you a list of issues, can you use your magic migrator to make them an RFC issue?
[07:39:07] *** Joins: James (quassel@moz-t5os7p.range86-163.btcentralplus.com)
[07:39:47] * theme does some work
[07:40:36] <Mutabah> theme: 841 matches for 'PartialEq for' in github
[07:41:18] <theme> Mutabah, mine got 38
[07:41:37] <theme> 38 or 8117, depending on how you search
[07:42:45] <theme> wait, why I got 831 now
[07:43:00] *** Joins: c0170 (c0170@moz-bb29a4.cambridge.arm.com)
[07:43:18] *** Quits: kushal (kdas@moz-es3.2tk.189.118.IP) (Ping timeout: 121 seconds)
[07:43:32] *** Joins: kushal (kdas@moz-es3.2tk.189.118.IP)
[07:45:10] *** Joins: reem (reem@moz-i4oevu.coob.q2h1.0009.2601.IP)
[07:45:32] <theme> Mutabah, compared to the 1564 crates on crates.io, is that too big?
[07:46:09] <theme> quite some of them are impl for weird stuff like "Fool" or "Fish"
[07:47:23] *** Quits: kushal (kdas@moz-es3.2tk.189.118.IP) (Quit: Leaving)
[07:47:59] *** Joins: eerie (eerie@moz-nu5r7u.red.bezeqint.net)
[07:48:31] *** Quits: Gankro (uid71432@moz-sc2bd6.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[07:48:35] *** Quits: James (quassel@moz-t5os7p.range86-163.btcentralplus.com) (A TLS packet with unexpected length was received.)
[07:49:29] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[07:50:36] <Mutabah> theme: Possibly
[07:50:50] <theme> also, some of them can use #[derive], but didn't
[07:50:56] *** Joins: bjz (bjz@moz-4l6.mjm.52.113.IP)
[07:51:34] <theme> Mutabah, how did you get 841 matches?
[07:51:54] <theme> with/without quotes?
[07:51:58] <Mutabah> I searched with quotes
[07:52:02] *** Quits: eerie (eerie@moz-nu5r7u.red.bezeqint.net) (Ping timeout: 121 seconds)
[07:52:06] <theme> single/double?
[07:52:08] <Mutabah> Which seemed to have forced it to match on the same line
[07:52:09] <Mutabah> double
[07:52:13] *** Quits: minzh (minzh@moz-u8rq5v.citrix.com) (Connection closed)
[07:52:20] *** Joins: minzh (minzh@moz-u8rq5v.citrix.com)
[07:52:31] <theme> "PartialEq for"
[07:52:39] <theme> got 282 code results and a timeout
[07:52:52] <theme> now, 787 O_o
[07:53:19] <theme> apparently, quotes are ignored on github :(
[07:53:32] <theme> see the sign on the right of the search text box
[07:53:50] *** zz_kimundi is now known as kimundi
[07:57:17] *** Joins: madmalik (uid13697@moz-lfin5p.brockwell.irccloud.com)
[07:58:07] *** Quits: Kxepal (Miranda@moz-d9p0am.pppoe.mtu-net.ru) (Ping timeout: 121 seconds)
[08:01:47] *** Joins: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP)
[08:03:25] <Manishearth> git grep :P
[08:04:37] *** Quits: reem (reem@moz-i4oevu.coob.q2h1.0009.2601.IP) (Connection closed)
[08:05:09] *** Quits: bjz (bjz@moz-4l6.mjm.52.113.IP) (Ping timeout: 121 seconds)
[08:06:00] *** Quits: acharles (acharles@moz-ulbdcn.ca.comcast.net) (Client exited)
[08:08:00] *** Quits: jdm (jdm@moz-ilbt2e.cable.teksavvy.com) (Quit: )
[08:09:33] *** Joins: squiddy (squiddy@moz-md4.pm3.19.178.IP)
[08:14:18] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[08:16:20] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[08:16:58] *** Quits: ptalbot (ptalbot@moz-r8uvn2.dyn.as47377.net) (Ping timeout: 121 seconds)
[08:17:56] *** Joins: larhat (Adium@moz-8v4.af0.232.213.IP)
[08:24:04] <theme> In rustc there are 81 "PartialEq for"s
[08:24:10] <theme> 27 of them are in src/test
[08:24:18] <theme> 54 in other places
[08:24:29] <theme> many of them already deal with unsafe code
[08:25:32] <Mutabah> theme: https://github.com/thepowersgang/binaryview2/blob/master/src/value.rs#L424
[08:25:41] <Mutabah> Safe code, but uses the cmp traits
[08:25:50] <theme> I saw other cases already
[08:26:52] *** Joins: killercup (killercup@moz-4udt1b.dip0.t-ipconnect.de)
[08:26:59] <theme> Mutabah, note that your case implements PartialOrd, but not Ord
[08:27:01] *** Quits: c0170 (c0170@moz-bb29a4.cambridge.arm.com) (Connection closed)
[08:27:04] <theme> not sure why
[08:27:05] *** Joins: c0170 (c0170@moz-bb29a4.cambridge.arm.com)
[08:27:19] <simukis> Manishearth: queue is empty!
[08:27:21] <simukis> do something!
[08:27:32] <Mutabah> theme: Can't be strict ordered.
[08:27:40] <theme> Mutabah, well... that
[08:27:50] <Mutabah> theme: It has the equivalent of NaN
[08:28:04] * simukis screams and runs in circles.
[08:28:32] <Manishearth> simukis: git rm *; git commit -m "stabilize everything"; git push origin fix-all-the-things; hub pull-request; @bors: r+ p=1000
[08:28:34] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[08:28:49] <theme> ???
[08:29:23] <simukis> Manishearth: git init; git remote add origin github.com:rust/rust; git commit -m "Initial"; git push -f
[08:29:36] <theme> lol
[08:30:14] <bstrie> we've decided that's it not time for 1.0 after all, and in fact we're better off starting over from scratch
[08:30:25] <Manishearth> hah
[08:30:27] *** Joins: bjz (bjz@moz-puppgq.tpgi.com.au)
[08:30:28] * bstrie brushes the cobwebs off of OCaml
[08:30:37] <bstrie> vim rust.ocaml
[08:30:57] <Manishearth> bstrie: no, that *is* 1.0
[08:31:14] <bstrie> hahaha
[08:31:18] <bstrie> what a great april fools
[08:31:22] <bstrie> just release ocaml as 1.0
[08:31:47] <cmr> is there a crate somewhere providing easy cp -r functionality?
[08:32:03] <Manishearth> After realizing that everyone's just going to compare Rust to Go and Nim, the Rust team decides to rewrite it as a simple, intuitive language, rather than a useful one.
[08:32:18] <bstrie> Manishearth: s/intuitive/pragmatic
[08:32:21] <Manishearth> bstrie: we should actualy do that :P
[08:32:33] <Manishearth> who is Rust releng?
[08:32:43] <bstrie> I might change the /r/rust css to make it appear to be /r/ocaml
[08:32:46] <Manishearth> yess
[08:33:28] <bstrie> ugh but their css is so boring
[08:33:34] <simukis> so, we have a plan, we should also post that we succeeded in breaking all the timelines and are moving the 1.0 release date to 1st
[08:33:40] <bstrie> /r/swift would be a more visually interesting spoof
[08:33:47] <Manishearth> bstrie: no you make it look like the css of a properly-styled /r/ocaml
[08:33:52] <Manishearth> put a camel on it
[08:33:57] <Manishearth> yes
[08:33:57] <bstrie> ugh but that requires *work*
[08:34:15] <bstrie> simukis: you can't announce an april fools joke, you just have to do it
[08:34:20] <simukis> .camel { position: absolute; top: 0; left: 0; width: 1000px; }
[08:34:20] <bstrie> *SURPRISE 1.0 RELEASE!!*
[08:34:32] <Manishearth> how about /r/go? they have the flying gopher
[08:34:46] <Manishearth> golang
[08:34:50] <bstrie> I'm not about to go there
[08:35:02] <Manishearth> haha
[08:35:09] <Manishearth> but..but..gopher!
[08:35:27] <Manishearth> That is the most hilarious and derpy mascot I've ever seen
[08:41:46] *** Quits: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[08:42:09] *** Joins: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP)
[08:43:58] *** Joins: aepsil0n (eduard@moz-s4dovi.73sq.ctqi.8071.2a02.IP)
[08:44:42] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[08:47:00] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[08:51:29] *** Joins: zmack (zmack@moz-b26i0b.home.aster.pl)
[09:00:11] *** Quits: dpc (dpc@moz-a8v.6sn.162.73.IP) (Ping timeout: 121 seconds)
[09:01:37] *** Quits: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk) (Ping timeout: 121 seconds)
[09:16:07] *** Joins: Guest63 (textual@moz-qfs.570.70.83.IP)
[09:27:26] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[09:28:54] *** Joins: munksgaard (munksgaard@moz-1i4.hq0.225.130.IP)
[09:29:57] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[09:35:03] *** Quits: nrc (nrc@moz-4bhi2i.xtra.co.nz) (Ping timeout: 121 seconds)
[09:44:05] <munksgaard> I don't understand why the left hand side of ExprAssign is an Expr and not a Pat? We allow arbitrary expression in the left hand side of an assign?
[09:44:50] <cmr> munksgaard: ExprAssign is `foo = bar`, not `let foo = bar`
[09:44:52] *** Quits: Guest63 (textual@moz-qfs.570.70.83.IP) (Quit: Textual IRC Client: www.textualapp.com)
[09:45:14] <munksgaard> cmr: Sure, I'm with you that far, but still.
[09:45:25] <huon> munksgaard: *qux(foo.bar().baz) = 10 is legal
[09:45:37] <munksgaard> huon: ewwww
[09:45:41] <huon> not every expression is legal
[09:45:51] <huon> (at the type level)
[09:46:01] <huon> but syntactically they are
[09:46:16] <munksgaard> Any example of expressions that aren't legal?
[09:46:24] <huon> foo.bar() = 10
[09:46:33] <cmr> 10 = 20
[09:46:48] <huon> playbot: fn foo() -> u8 { 0 } foo() = 1;
[09:46:49] -playbot- <anon>:14:30: 14:39 error: illegal left-hand side expression [E0070]
[09:46:49] *** Joins: imperio (Mibbit@moz-aibeqg.fbx.proxad.net)
[09:46:49] -playbot- <anon>:14         fn foo() -> u8 { 0 } foo() = 1;
[09:46:49] -playbot- output truncated; full output at: http://bit.ly/1NZdtAY
[09:46:51] *** Joins: Guest63 (textual@moz-qfs.570.70.83.IP)
[09:47:11] <munksgaard> That makes sense :)
[09:48:54] <arrrrrrr1> what's stored in the ptr field when I create a &[] ?
[09:49:16] <arrrrrrr1> note that &[] has static lifetime
[09:52:23] <huon> have you called .as_ptr()?
[09:52:39] <arrrrrrr1> apparently just some random address on the stack
[09:52:45] *** Quits: theme (theme@moz-i3mhhb.asianet.co.th) (Quit: Leaving)
[09:52:47] <arrrrrrr1> http://is.gd/co0fsZ
[09:53:09] <huon> playbot: (&[]).as_ptr()
[09:53:10] -playbot- <anon>:14:15: 14:23 error: unable to infer enough type information about `_`; type annotations required [E0282]
[09:53:10] -playbot- <anon>:14         (&[]).as_ptr()
[09:53:10] -playbot- output truncated; full output at: http://bit.ly/1NZe9GJ
[09:53:21] <huon> playbot: let x: &[u8] = &[]; x.as_ptr()
[09:53:22] -playbot- 0x7f94a4c81d80
[09:53:28] *** Joins: laumann (thomas@moz-vj4.hq0.225.130.IP)
[09:53:29] <huon> playbot: static x: &[u8] = &[]; x.as_ptr()
[09:53:29] -playbot- <anon>:14:19: 14:24 error: missing lifetime specifier [E0106]
[09:53:30] -playbot- <anon>:14         static x: &[u8] = &[]; x.as_ptr()
[09:53:30] -playbot- output truncated; full output at: http://bit.ly/1ALMXkw
[09:53:34] <huon> playbot: static x: &'static [u8] = &[]; x.as_ptr()
[09:53:36] -playbot- <anon>:14:9: 14:39 warning: static constant `x` should have an upper case name such as `X`, #[warn(non_upper_case_globals)] on by default
[09:53:36] -playbot- <anon>:14         static x: &'static [u8] = &[]; x.as_ptr()
[09:53:36] -playbot- output truncated; full output at: http://bit.ly/1NZe8m5
[09:53:57] <arrrrrrr1> playbot: let x: &'static [u8] = &[]; x.as_ptr()
[09:53:59] -playbot- 0x7fa1153f3d80
[09:54:19] <arrrrrrr1> playbot: static X: &'static [u8] = &[]; X.as_ptr()
[09:54:21] -playbot- 0x7ff229552d80
[09:56:17] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[10:04:28] *** Joins: simukis (nagisa@moz-pol184.mif.vu.lt)
[10:08:07] *** Joins: minzh_ (minzh@moz-u8rq5v.citrix.com)
[10:08:15] *** Quits: minzh (minzh@moz-u8rq5v.citrix.com) (Connection closed)
[10:13:58] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[10:18:54] *** Joins: rustical (dida@moz-55rvi2.dclient.hispeed.ch)
[10:27:41] <arrrrrrr1> https://gist.github.com/anonymous/cd205023c32405244152
[10:27:46] <arrrrrrr1> why doesn't this work?
[10:28:13] <arrrrrrr1> why does X have to be a trait?
[10:33:30] *** Quits: Rym_ (y@moz-859.d1r.39.217.IP) (Ping timeout: 121 seconds)
[10:43:42] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[11:01:07] <munksgaard> arrrrrrr1: Well, you're saying that Y should satisfy the trait X, right?
[11:01:15] <munksgaard> `Y: X`
[11:01:18] <arrrrrrr1> no, I'm saying that Y should be a subtype of X
[11:04:37] <munksgaard> But perhaps it doesn't know what X is?
[11:04:46] <arrrrrrr1> X is a type
[11:05:02] <cmr> : is not a subtype relation
[11:05:07] <arrrrrrr1> it should be
[11:05:11] <cmr> and rust doesn't support anything like that
[11:05:14] <arrrrrrr1> it should
[11:05:37] <arrrrrrr1> you could write Rc<Trait> in a library right now if this was supported
[11:05:39] <arrrrrrr1> well, almost
[11:05:52] <arrrrrrr1> you also have to be able to get the size and drop function of a trait object
[11:06:32] <Manishearth> munksgaard: the ast is jsut an ast, so it is valid post expansion
[11:06:41] <Manishearth> *post parsing
[11:07:03] <Manishearth> so even regular variable identifiers are Exprs
[11:08:08] <Manishearth> arrrrrrr1: why should it?
[11:08:20] <arrrrrrr1> so that you can write Rc<Trait>, duh
[11:09:01] <Manishearth> I don't see how that follows, elaborate please?
[11:09:34] <arrrrrrr1> Manishearth: I'm writing a possible implementation right now. need a bit more time
[11:10:23] <Manishearth> k
[11:13:10] *** Joins: Rym_ (y@moz-859.d1r.39.217.IP)
[11:17:37] *** Quits: Rym_ (y@moz-859.d1r.39.217.IP) (Ping timeout: 121 seconds)
[11:18:56] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[11:21:16] <munksgaard> How come `for x in xs` loops translate into something with a result? Won't it always be () ? 
[11:21:54] *** Joins: ytain (ytain@moz-44k.q8p.140.24.IP)
[11:24:17] <Manishearth> munksgaard: as in?
[11:24:27] <Manishearth> where does it say that they do?
[11:25:50] <Manishearth> I mean all exprs are assumed a priori to have a result, even though some of them can't
[11:26:08] <munksgaard> Well, if I expand something like `let v = vec!(1, 2); for x in v { };` I get https://gist.github.com/Munksgaard/b11bcd026f8df9ec3be0
[11:26:37] <munksgaard> It looks to me like the `let result = ` is completely redundant
[11:26:49] <munksgaard> or useless or whatever you prefer :)
[11:27:00] <Manishearth> I guess that's to propagate the !?
[11:27:08] <Manishearth> hm
[11:27:11] <munksgaard> (Also, this is a problem for us, since that iter is not getting consumed, and humpty adds it to the map of tracked vars)
[11:27:33] <Manishearth> gah
[11:27:52] <munksgaard> (clarification: the `let result` part isn't a problem for us, the `mut iter` part is.
[11:27:55] <Manishearth> munksgaard: but we don't care about variables of that type, right?
[11:28:39] <munksgaard> Manishearth: Right, I'm just nitpicking about result :)
[11:29:42] <Manishearth> munksgaard: no, I'm saying that `mut iter` shouldn't be a problem anyway
[11:29:57] <Manishearth> munksgaard: it seems like `result` is there to propagate the bottom type
[11:30:35] <Manishearth> u, lemme see
[11:30:47] <Manishearth> *um
[11:30:55] <munksgaard> Manishearth: Ah, I see. Well right now it is a problem, since it can have type IntoIter<Foo>, and the current incarnation of walk_pat_and_add walks the type for any protected types
[11:31:17] <Manishearth> munksgaard: why are we iterating over protected types?
[11:31:25] <Manishearth> do we need to?
[11:32:02] <arrrrrrr1> Manishearth: https://gist.github.com/anonymous/f04beabc8d34aa91d679
[11:32:16] <munksgaard> I think so. If I say `let x = (Foo, 42u8)`, humpty needs to keep track of x.
[11:33:03] <munksgaard> or `struct Container { x: Foo } let bla = Container { x: Foo }`
[11:33:28] <Manishearth> yes
[11:33:42] <munksgaard> I guess I could check if it's an IntoIter, and then ignore it, but I'm not sure it that's a good longterm solution
[11:33:57] <Manishearth> munksgaard: my question is different, are there situations where we want to iterate over chans?
[11:34:14] <munksgaard> Manishearth: Yes, definitely. 
[11:34:16] <Manishearth> ah
[11:34:18] <Manishearth> hm
[11:35:10] *** Quits: dinfuehr_ (dinfuehr@moz-c25.u8s.112.91.IP) (Ping timeout: 121 seconds)
[11:35:15] <munksgaard> For example, we might have a server with a bunch of processes connected, each using the same protocol and the server takes turns serving them
[11:35:28] <Manishearth> munksgaard: we can check the ForLoopDesugar for the match inside it
[11:35:40] <Manishearth> we can special case that iter arm
[11:35:56] <Manishearth> the MatchSource will let us do that
[11:35:56] <munksgaard> Ah, yes! Good idea!
[11:36:06] <Manishearth> hooray for the ast
[11:36:08] <munksgaard> Brilliant :)
[11:36:53] <Manishearth> munksgaard: btw, feel free to merge that PR or whatever 
[11:37:01] <Manishearth> I jsut PRd it so that I could comment on stuff
[11:37:05] <munksgaard> Manishearth: Yeah, thanks.
[11:37:46] <munksgaard> I'll do it when loops and for loops work
[11:37:55] <munksgaard> break and return are nasty
[11:37:59] <munksgaard> I'm afraid
[11:38:04] <Manishearth> hah
[11:38:21] <munksgaard> (But I think the PR is a good way to keep track of stuff too, so that's why I'm not rushing)
[11:38:38] <Manishearth> sure
[11:38:40] <Manishearth> your choice
[11:38:50] <Manishearth> just letting you know I don't mind :p
[11:42:14] *** Joins: _zxq9_ (ceverett@moz-qsm369.mesh.ad.jp)
[11:44:54] * eddyb is here now
[11:45:33] <eddyb> Manishearth: what was that about?
[11:46:10] <arrrrrrr1> Manishearth: cmr: https://github.com/rust-lang/rfcs/issues/981
[11:46:33] <eddyb> hah
[11:46:49] <eddyb> wait
[11:46:54] <eddyb> arrrrrrr1: what are those intrinsics?!
[11:47:08] <arrrrrrr1> eddyb: "Given some additional intrinsics ... "
[11:47:12] <eddyb> the intrinsics we need are size_of_val, min_align_of_val
[11:47:22] <arrrrrrr1> eddyb: sure, if you enable those for traits
[11:47:24] <eddyb> like, we already have the functions, they need to be intrinsics to work on unsized values
[11:47:31] <arrrrrrr1> yep, you're right
[11:47:33] <eddyb> it's the only plan I ever heard
[11:47:50] <arrrrrrr1> still need deref_drop and deref_addr
[11:48:06] <eddyb> drop_in_place
[11:48:13] <eddyb> maybe I should add that to https://github.com/rust-lang/rust/pull/23376
[11:48:24] <eddyb> arrrrrrr1: as for deref_addr... why do you want that?
[11:48:44] <eddyb> (calling them deref_foo doesn't really help making sense of the situation)
[11:48:57] <arrrrrrr1> eddyb: to get the addr of a &T for both T sized and T unsized. &T as *const _ as usize could also work for T a trait but ICEs currently
[11:49:09] <eddyb> heh, I see what you're doing with Shared
[11:49:13] <eddyb> it's not exactly correct
[11:49:26] <eddyb> and it's completely unnecessary
[11:49:32] <arrrrrrr1> is that so
[11:49:35] <eddyb> yupp
[11:49:41] <arrrrrrr1> alright
[11:49:57] <eddyb> RcBox<Trait> has always been the plan and I don't see why it wouldn't work
[11:50:27] <eddyb> arrrrrrr1: I guess I'll add all the relevant intrinsics
[11:50:36] <arrrrrrr1> good good
[11:50:45] <huon> X: T isn't a subtyping relationship at all
[11:50:46] <eddyb> but I wanted to clean up more DST hacks in trans 
[11:50:56] <arrrrrrr1> huon: not right now
[11:51:12] <huon> I don't think we want to turn it into one
[11:51:16] <eddyb> X: Y is merely a predicate
[11:51:19] <kimundi> Fun hack: let x; ... || { ... {x} ... } instead of let x; ... || { ... x ... } to cause a by-move capture
[11:51:38] <eddyb> kimundi: yeah, that's what I proposed to avoid adding the move keyword
[11:51:49] <kimundi> oh, interesting
[11:51:52] <eddyb> let x = x; inside the closure
[11:52:02] <eddyb> {x} does the same thing, really
[11:52:12] <eddyb> kimundi: oh, I guess it looks nicer than a macro invocation
[11:52:19] <kimundi> well, seems like a hack though, and does not scale to multiple mentions of a variable
[11:52:27] <eddyb> at some point I jokingly mentioned {x} as a shorthand for drop(x)
[11:52:45] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[11:52:53] <eddyb> kimundi: also, you can't do by-copy captures without `move`
[11:53:07] <kimundi> ah right, that references?
[11:53:09] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[11:54:21] <eddyb> I think we might want to optimize by-ref to by-copy where possible (Copy+no interior mutability+no escaping/mutable references)
[11:54:37] <eddyb> s/by-ref/by-imm-ref/ s/mutable//
[11:54:58] <eddyb> and with a size threshold
[11:55:06] <eddyb> kimundi: but it would still have the lifetime
[11:55:34] <eddyb> arrrrrrr1: is it called Shared in liballoc, and not RcBox?
[11:55:44] *** Quits: minzh_ (minzh@moz-u8rq5v.citrix.com) (A TLS packet with unexpected length was received.)
[11:55:48] <arrrrrrr1> eddyb: it's called RcBox
[11:56:00] *** Quits: simukis (nagisa@moz-pol184.mif.vu.lt) (Ping timeout: 121 seconds)
[11:56:23] <eddyb> OH
[11:56:31] <eddyb> arrrrrrr1: you implemented pivot pointers manually
[11:56:54] <eddyb> I don't even know what to comment then
[11:57:18] <arrrrrrr1> I'm just using some tricks well known to C hackers (e.g. storing metadata next to the pointer data) I've no idea what a pivot pointer is.
[11:57:48] <eddyb> arrrrrrr1: the pointer to RcBox/Shared/w/e/ is pointing to the data field instead of the first field
[11:57:54] <arrrrrrr1> yup
[11:58:18] <arrrrrrr1> every few months you can see posts on /r/programming where someone has re-discovered how to implement slices in C
[11:58:21] <eddyb> and alignment padding is right-justified instead of left, for fields before the pivot
[11:58:50] <eddyb> in this particular case, it's pretty easy
[11:59:37] <eddyb> Rc { _ref = _ref }
[11:59:48] <arrrrrrr1> _ref: _ref
[11:59:52] * eddyb scans arrrrrrr1 for exotic particles
[12:00:17] <arrrrrrr1> it doesn't compile so it's hard to find those little mistakes
[12:00:36] <arrrrrrr1> >et size = 2*size_of::<Cell<usize>> + 
[12:00:38] <arrrrrrr1> ¯\_(ツ)_/¯
[12:01:00] <arrrrrrr1> >min_align_of(Cell<usize>>)
[12:01:17] *** Joins: simukis (nagisa@moz-pol184.mif.vu.lt)
[12:01:17] <eddyb> you use transmute for &T -> *const T :/
[12:01:26] <arrrrrrr1> eddyb: because &T as *const T ices
[12:01:33] <arrrrrrr1> for traits
[12:01:42] <eddyb> that's a bug
[12:01:44] <arrrrrrr1> yup
[12:01:54] *** Joins: ptalbot (ptalbot@moz-1gn7gb.eu0n.jcdj.0660.2001.IP)
[12:01:58] <eddyb> hmm
[12:02:22] <eddyb> arrrrrrr1: so, that code is broken
[12:02:26] <arrrrrrr1> is that so
[12:02:32] <eddyb> you just got lucky
[12:02:36] <arrrrrrr1> alright
[12:02:42] <arrrrrrr1> eddyb: maybe I was deliberately lucky
[12:03:16] <eddyb> arrrrrrr1: I'll add #[repr(align(X))] just so I can break it irrespective of platform
[12:03:41] <arrrrrrr1> I took that into account hoping that nothing has alignment stronger that 2*sizeof(usize)
[12:03:52] <eddyb> this is why pivot pointers were supposed to be a language feature. and then I never got to that and DST went under the bus
[12:03:56] <arrrrrrr1> so, simd has alignment 16 on x86_64
[12:04:24] <eddyb> arrrrrrr1: the important thing to note is that Shared<T> is not compatible with Shared<()>
[12:04:52] <eddyb> wait, you used #[repr(C)]
[12:04:53] <arrrrrrr1> eddyb: but you can always read from a &Shared<()> because it has at worst strictly weaker alignment
[12:04:57] <arrrrrrr1> yup
[12:05:04] <eddyb> so let me ask you this
[12:05:08] <arrrrrrr1> here it comes
[12:05:15] <eddyb> arrrrrrr1: how does C define the layout of Trait*?
[12:05:26] <arrrrrrr1> not at all, in Shraed<T>, the T is sized
[12:05:40] <eddyb> oh, right, hacks
[12:05:57] <arrrrrrr1> eddyb: and, of course, the content of the T doesn't have to have C-repr. it only has to start at the proper place
[12:06:13] <arrrrrrr1> (right after the second Cell<usize>)
[12:06:15] <eddyb> playbot: use std::cell::Cell; #[repr(C)] struct Foo<T: Copy> { x: Cell<T> }
[12:06:17] -playbot- ()
[12:06:23] <eddyb> that's odd that you can just do that
[12:06:27] <arrrrrrr1> it is
[12:07:01] <eddyb> arrrrrrr1: anyways, there's a few things you're not considering here
[12:07:06] <arrrrrrr1> is that so
[12:07:15] <arrrrrrr1> how do you know what I have or haven't considered
[12:07:21] *** Joins: Rym_ (y@moz-859.d1r.39.217.IP)
[12:07:31] <Manishearth> whoa
[12:07:47] <Manishearth> ! is totally unnecessary
[12:08:27] <eddyb> arrrrrrr1: if you where shooting for plausibility, you could have went for a trait that can coerce *const T to *const U
[12:08:29] <Manishearth> (hold on, playpen)
[12:09:06] <Manishearth> aw, no, it's necessary
[12:09:09] <arrrrrrr1> eddyb: better comment in the issue. stuff posted on IRC is quickly forgotten.
[12:09:31] <eddyb> the whole thing is from a parallel universe :/
[12:09:59] <eddyb> [13:56] <eddyb> I don't even know what to comment then
[12:10:12] <arrrrrrr1> 13:00:38   arrrrrrr1 | ¯\_(ツ)_/¯
[12:10:22] <Manishearth> eddyb: any reason why http://is.gd/tPgNzo shouldn't work?
[12:10:31] <Manishearth> As in, do we really need the in built bottom type?
[12:10:33] <eddyb> arrrrrrr1: well, I know where to start
[12:10:38] <Manishearth> When we can treat any empty enum as one?
[12:10:39] <arrrrrrr1> good good
[12:10:57] <eddyb> arrrrrrr1: nmatsakis made the mistake to assume there is a reasonable upper bound to alignment in DST5
[12:11:16] <eddyb> arrrrrrr1: that's one of the reasons why DST was never finalized
[12:11:25] <eddyb> arrrrrrr1: you make the same mistake
[12:11:53] *** Quits: Rym_ (y@moz-859.d1r.39.217.IP) (Ping timeout: 121 seconds)
[12:11:57] <arrrrrrr1> eddyb: well, of course the code can easily be adapted for arbitrary alignment if you sprinkle some "aling_of" here and there. I just tried to keep it simple.
[12:12:06] <eddyb> you have to allocate manually
[12:12:19] <arrrrrrr1> wat
[12:12:35] <arrrrrrr1> are you referring to this: let shared = box Shared {
[12:12:38] <arrrrrrr1> ?
[12:12:39] <eddyb> yeah
[12:12:56] <arrrrrrr1> but that's completely safe code
[12:13:12] <eddyb> you can't do that, you need the first two fields to be right-justified
[12:13:13] <arrrrrrr1> the only thing you don't know automatically is the offset of `value` field
[12:13:18] <eddyb> so any padding goes before the first field
[12:13:26] <arrrrrrr1> not true
[12:13:34] <arrrrrrr1> you just have to know the offset of the value field
[12:13:40] <eddyb> arrrrrrr1: it's not efficient otherwise
[12:13:41] <arrrrrrr1> from the start of the Shared
[12:13:59] <eddyb> which means you lost to the baselines that is on the table
[12:14:03] <eddyb> *baseline
[12:14:21] <arrrrrrr1> I don't see why it would be any less efficient. the offset of `value` can be calculated at compile time. .offset(-N) is not less efficient than .offset(-2)
[12:14:43] <eddyb> arrrrrrr1: if your `shared` method needs to query alignment, that means reading from the vtable
[12:14:57] <arrrrrrr1> aha, that's true
[12:15:03] <eddyb> and then you spend a bunch of cycles tweaking the pointer so it fits
[12:15:09] <arrrrrrr1> my evil plans have been foiled again
[12:15:23] <eddyb> let me find the gist
[12:15:37] <arrrrrrr1> so we need right alignment. shouldn't be too hard with CTFE
[12:15:47] <eddyb> what would CTFE do?
[12:16:00] <eddyb> ah, you want to construct the right structure
[12:16:01] <arrrrrrr1> just put a _dummy: [usize; calculate_the_right_prefix_padding(Trait)] before the cells
[12:16:14] <eddyb> would be funny if you can do that
[12:16:53] <eddyb> arrrrrrr1: allocating manually is not the hard part, though
[12:17:24] <eddyb> with the box protocol in place, you'll need a Rc implementation that does some low-level stuff anyways
[12:19:01] <arrrrrrr1> have you seen my evil plan to use the box protocol for unsized return values?
[12:19:40] <eddyb> I completely forgot to look at it
[12:20:15] <eddyb> I want direct unsized value construction within in-place contexts
[12:21:39] <eddyb> arrrrrrr1: you're empowering the return pointer, I guess... it's better than other designs I've seen. but you still can't do &such_function(), I bet
[12:22:01] <arrrrrrr1> not sure how this would work
[12:22:05] <eddyb> (and -> impl Fn(T) -> U looks worse than -> Fn(T) -> U q_q)
[12:22:11] <arrrrrrr1> where do you store the rv of such_function?
[12:22:20] <eddyb> arrrrrrr1: you can't do it on the stack, I mean
[12:22:35] <arrrrrrr1> I'm not sure what you mean by that syntax then
[12:22:54] <arrrrrrr1> an automatic HEAP temporary?
[12:23:20] <eddyb> no, I just stated that it won't work
[12:23:25] <arrrrrrr1> ok
[12:23:36] <eddyb> https://gist.github.com/eddyb/45cb0f45876a67987996 almost one year ago...
[12:23:59] <arrrrrrr1> it's pretty ugly that you would have to use the `in f() { g() }` syntax sometimes
[12:24:09] <arrrrrrr1> not sure who came up with this and found it "ok"
[12:24:10] <eddyb> arrrrrrr1: I didn't consider const size_of/align_of back then, that's a newer development
[12:24:59] * kimundi expects at least one major movement to the get the in syntax changed once it actually works
[12:25:28] <arrrrrrr1> `put g() in f()`
[12:25:35] <arrrrrrr1> `box g() in f()`
[12:25:37] *** Joins: larhat1 (Adium@moz-8v4.af0.232.213.IP)
[12:25:43] * kimundi still things some kind of infix operator would be best
[12:25:51] <arrrrrrr1> f() <- g()
[12:25:52] *** Quits: larhat1 (Adium@moz-8v4.af0.232.213.IP) (Connection closed)
[12:26:01] <kimundi> yeah, like that
[12:26:31] *** Joins: larhat1 (Adium@moz-eou.8og.232.213.IP)
[12:27:12] <eddyb> I thought that was actually what it changed to
[12:27:29] <kimundi> vec.back() <- foo() seems like a tolerable thing to make idiomatic, which I can't say about the other syntax forms
[12:27:49] <kimundi> did it get changed again?
[12:27:49] <eddyb> that's pretty much what I think of it, as well
[12:27:58] <arrrrrrr1> not sure how I feel about the channel operator being used for non-channel stuff
[12:28:00] <arrrrrrr1> lol
[12:28:15] <eddyb> kimundi: I thought `place <- expr` was the current version
[12:28:20] <arrrrrrr1> but, vec.back() is really a channel with one cell
[12:29:29] *** Quits: larhat (Adium@moz-8v4.af0.232.213.IP) (Ping timeout: 121 seconds)
[12:29:35] <kimundi> then again, let handle: = arena <- foo(); looks a bit funky
[12:29:51] <kimundi> (ignore the : )
[12:29:55] <arrrrrrr1> let handle <- arena <- foo()
[12:29:58] <arrrrrrr1> magic
[12:30:54] <kimundi> nonsense magic :)
[12:31:00] <arrrrrrr1> let handle = <- arena <- foo()
[12:32:33] <kimundi> anyway, enough irc distraction for today...
[12:35:59] <eddyb> arrrrrrr1: so, now that I think about it... it's possible to emulate pivots (I wouldn't even bother with a struct layout and CTFE if you are willing to be hacky)
[12:38:40] *** Joins: mib_nbi2kk (Mibbit@moz-juv.9o3.252.72.IP)
[12:40:17] <arrrrrrr1> eddyb: can you currently write anything in Rust that has alignment > 16?
[12:40:41] <arrrrrrr1> I wish you could but I think it's not possible
[12:41:24] <eddyb> really, we should have added an attribute a long time ago
[12:41:25] *** Quits: mib_nbi2kk (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:41:32] <arrrrrrr1> yup
[12:44:23] <eddyb> arrrrrrr1: there must have been a reason why I thought pivot pointers need to be part of the language
[12:45:48] <eddyb> arrrrrrr1: but you have half of a solution, so I'm considering it's possible to implement this in 1.0 with only the DST stuff that's on the track
[12:47:15] *** Joins: dinfuehr (dinfuehr@moz-hfpu02.tuwien.ac.at)
[12:49:12] <eddyb> arrrrrrr1: I wonder if Rc<Any> would be a good benchmark for overhead, with an updated version of DST5's Rc (with dynamic vtable-based alignment adjustments)
[12:50:21] <eddyb> it would be easy to test even without automatic coercions, Rc<T> -> Rc<Any> can be done with two transmutes
[12:52:54] *** Quits: simukis (nagisa@moz-pol184.mif.vu.lt) (Client exited)
[12:53:35] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[12:54:39] *** Joins: jdm (jdm@moz-ilbt2e.cable.teksavvy.com)
[12:55:12] <eddyb> dammit!
[12:55:23] <eddyb> arrrrrrr1: I just remembered what I needed pivot pointers for
[12:55:32] <eddyb> arrrrrrr1: like, at language level. Rc<RefCell<T>>
[13:01:30] *** Joins: Rym_ (y@moz-859.d1r.39.217.IP)
[13:01:57] <arrrrrrr1> is there a reason that <X, Y: X> can be used to express subtyping?
[13:04:01] <kimundi> eddyb: Would the pivot pointer always point at the start of the possibly-dst field of type T?
[13:04:46] *** Joins: c0170_ (c0170@moz-bb29a4.cambridge.arm.com)
[13:04:50] <kimundi> (if yes, then I'm wondering if it can be automatic since you can have just one dst field)
[13:06:03] *** Quits: Rym_ (y@moz-859.d1r.39.217.IP) (Ping timeout: 121 seconds)
[13:06:44] *** Quits: c0170 (c0170@moz-bb29a4.cambridge.arm.com) (Ping timeout: 121 seconds)
[13:07:20] *** Joins: simukis (nagisa@moz-pol184.mif.vu.lt)
[13:08:19] *** Quits: dinfuehr (dinfuehr@moz-hfpu02.tuwien.ac.at) (Connection closed)
[13:09:01] <eddyb> arrrrrrr1: the only subtyping in Rust is lifetime-based
[13:09:31] <arrrrrrr1> maybe it should say <X, Y, &Y: &X>
[13:09:37] <arrrrrrr1> which is what we want
[13:10:05] <eddyb> coercions != subtyping
[13:10:13] <eddyb> it's funny cause someone made the opposite mistake
[13:10:21] <eddyb> saying ! coerces to any T
[13:10:43] <eddyb> that *was* subtyping
[13:10:54] <arrrrrrr1> not necessarily coercion. what we want is \exists f: &Y -> &X
[13:11:03] <arrrrrrr1> normally f = as
[13:11:17] <arrrrrrr1> for traits
[13:11:35] <eddyb> arrrrrrr1: that's historical cruft
[13:11:47] <eddyb> and soon it shouldn't work with `as`
[13:12:33] <eddyb> arrrrrrr1: right now `as &Trait` is a hacky duplication of the unsizing coercion (which is more powerful)
[13:12:45] *** Quits: simukis (nagisa@moz-pol184.mif.vu.lt) (Client exited)
[13:15:02] *** Quits: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net) (Connection closed)
[13:15:24] *** Joins: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net)
[13:15:43] *** Quits: aepsil0n (eduard@moz-s4dovi.73sq.ctqi.8071.2a02.IP) (Ping timeout: 121 seconds)
[13:17:44] *** Quits: ctennis (ctennis@moz-vcpg3c.in.comcast.net) (Quit: Leaving...)
[13:38:35] *** Quits: laumann (thomas@moz-vj4.hq0.225.130.IP) (Ping timeout: 121 seconds)
[13:39:39] *** Quits: munksgaard (munksgaard@moz-1i4.hq0.225.130.IP) (Ping timeout: 121 seconds)
[13:40:56] *** Quits: lu324 (lu324___@moz-3v8ljg.dhcp.embarqhsd.net) (Quit: Leaving)
[13:42:16] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[13:42:30] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[13:42:59] *** Quits: Guest63 (textual@moz-qfs.570.70.83.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[13:46:27] *** Joins: Guest63 (textual@moz-qfs.570.70.83.IP)
[13:51:32] *** Quits: rustical (dida@moz-55rvi2.dclient.hispeed.ch) (A TLS packet with unexpected length was received.)
[13:55:38] *** Joins: Rym_ (y@moz-859.d1r.39.217.IP)
[14:00:12] *** Quits: Rym_ (y@moz-859.d1r.39.217.IP) (Ping timeout: 121 seconds)
[14:00:51] *** Quits: det (chris@moz-7bbmke.lv.cox.net) (Connection closed)
[14:02:47] *** Joins: arielb1 (Mibbit@moz-jv8mdr.checkpoint.com)
[14:11:09] *** Quits: jgallagher (john@moz-6ge.dhn.131.24.IP) (Client exited)
[14:11:16] *** Quits: c0170_ (c0170@moz-bb29a4.cambridge.arm.com) (Connection closed)
[14:11:17] *** Joins: lu324 (lu324___@moz-3v8ljg.dhcp.embarqhsd.net)
[14:11:27] <arrrrrrr1> rusti: 1u64 >> 64
[14:11:28] -playbot- <anon>:14:9: 14:19 error: bitshift exceeds the type's number of bits, #[deny(exceeding_bitshifts)] on by default
[14:11:28] -playbot- <anon>:14         1u64 >> 64
[14:11:28] -playbot- output truncated; full output at: http://bit.ly/1AN0ngg
[14:16:37] <arielb1> rusti: 1u64 >> (32+32)
[14:16:38] -playbot- <anon>:14:9: 15:6 error: bitshift exceeds the type's number of bits, #[deny(exceeding_bitshifts)] on by default
[14:16:38] -playbot- <anon>:14         1u64 >> (32+32)
[14:16:38] -playbot- output truncated; full output at: http://bit.ly/1ClDgPw
[14:16:53] <arielb1> rusti: let s = 64; 1u64 >> s
[14:16:54] -playbot- 139879398780624
[14:16:56] *** Joins: det (chris@moz-7bbmke.lv.cox.net)
[14:17:48] *** Quits: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[14:18:38] *** Joins: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP)
[14:19:19] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[14:21:56] *** Quits: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP) (Quit: Leaving...)
[14:23:43] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Ping timeout: 121 seconds)
[14:24:18] *** Joins: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP)
[14:30:46] *** Joins: Gankro (uid71432@moz-sc2bd6.charlton.irccloud.com)
[14:39:11] *** Joins: nrc|afk (nrc|afk@moz-4bhi2i.xtra.co.nz)
[14:39:19] *** Quits: arielb1 (Mibbit@moz-jv8mdr.checkpoint.com) (Quit: http://www.mibbit.com ajax IRC Client)
[14:39:22] *** nrc|afk is now known as nrc
[14:42:31] *** Joins: ctennis (ctennis@moz-su6.e72.137.99.IP)
[14:43:01] *** Joins: jgallagher (john@moz-d5e8oc.hfc.comcastbusiness.net)
[14:44:17] *** Quits: nrc (nrc|afk@moz-4bhi2i.xtra.co.nz) (Ping timeout: 121 seconds)
[14:49:31] *** Quits: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP) (Quit: Leaving...)
[14:49:49] *** Joins: Rym_ (y@moz-859.d1r.39.217.IP)
[14:50:25] *** Joins: munksgaard (munksgaard@moz-3v9.hq0.225.130.IP)
[14:50:30] *** Joins: llogiq (Mibbit@moz-4e63or.reverse.dsi.net)
[14:52:26] <llogiq> Hi folks. I wanted to try out writing a lint, unfortunately my rustc doesn't want to build it (btw. the example on RFC #89 is severely outdated :-)). Code is at https://github.com/llogiq/rust_stuff/blob/master/src/lint_eq_cmp.rs - can someone spot my mistakes?
[14:54:19] *** Quits: Rym_ (y@moz-859.d1r.39.217.IP) (Ping timeout: 121 seconds)
[14:54:19] *** Joins: dinfuehr (dinfuehr@moz-sjrhg5.tuwien.ac.at)
[14:54:20] <llogiq> The error is: /usr/bin/ld: cannot find crti.o: File or Folder not found.
[14:55:03] *** Joins: scialex (scialex@moz-j5mi8i.cs.brown.edu)
[14:59:35] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[15:00:22] <imperio> llogiq: generally, I say it's because rustc isn't well linked so let's try !
[15:00:33] <imperio> ./confire --enable-rpath
[15:00:36] <imperio> configure
[15:00:38] <imperio> then rebuild
[15:00:42] <imperio> and retry
[15:00:59] <imperio> or change the LD_PATH
[15:04:32] <llogiq> So I'll have to manually build rustc?
[15:05:08] *** Quits: dinfuehr (dinfuehr@moz-sjrhg5.tuwien.ac.at) (Connection closed)
[15:06:22] * llogiq git-clones rust
[15:10:11] <imperio> you don't need it when working on lint ?
[15:13:19] <llogiq> I just started out writing rust code, and static code analysis is one of my favorite topics, so I just called rustup and tried to write and compile the code :-)
[15:13:58] *** Quits: jevin (jevin@moz-sra.ovp.12.72.IP) (Quit: Textual IRC Client: www.textualapp.com)
[15:15:07] *** Quits: munksgaard (munksgaard@moz-3v9.hq0.225.130.IP) (Ping timeout: 121 seconds)
[15:19:14] *** Joins: bfops (uid58242@moz-e5u6m0.charlton.irccloud.com)
[15:19:56] *** Joins: rajat (rajat@moz-utq.l4p.189.205.IP)
[15:25:47] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[15:25:53] *** Joins: eibwen (eibwen@moz-g4q14p.dip0.t-ipconnect.de)
[15:39:23] *** Joins: O01eg (o01eg@moz-sok.5l5.112.37.IP)
[15:43:56] *** Joins: Rym_ (y@moz-859.d1r.39.217.IP)
[15:48:30] *** Quits: Rym_ (y@moz-859.d1r.39.217.IP) (Ping timeout: 121 seconds)
[15:49:08] *** Joins: blaenk_ (blaenkdenum@moz-em283u.res.rr.com)
[15:50:26] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Ping timeout: 121 seconds)
[15:50:53] *** Joins: eerie (eerie@moz-nu5r7u.red.bezeqint.net)
[15:51:24] *** Quits: squiddy (squiddy@moz-md4.pm3.19.178.IP) (Quit: Leaving)
[15:53:51] <doener> llogiq: my rustup'd rustc builds that just fine
[15:54:46] *** Quits: eerie (eerie@moz-nu5r7u.red.bezeqint.net) (Connection closed)
[15:54:50] <doener> llogiq: maybe you don't have dev files for libc installed?
[15:55:11] <doener> llogiq: on debian (or derivates), install libc6-dev
[15:55:48] *** Quits: blaenk_ (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[15:56:38] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[15:57:09] *** Joins: munksgaard (munksgaard@moz-vj4.hq0.225.130.IP)
[15:57:41] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[15:57:47] <enjolras> hi
[15:58:16] <enjolras> is there a reason for trait construction over associated types is not injective ? 
[15:58:33] *** Joins: eerie (eerie@moz-nu5r7u.red.bezeqint.net)
[15:59:55] <llogiq> thx, doener.
[16:02:09] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[16:02:38] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[16:02:44] <enjolras>  http://is.gd/e8G01A here is an example, a bit dump, but which demonstrate the case
[16:03:14] <enjolras> I wonder why the compiler is not able to tell that the implementations can't conflict 
[16:03:47] <enjolras> for trait construction over associated types not being injective*
[16:04:17] *** Quits: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP) (Ping timeout: 121 seconds)
[16:06:01] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[16:06:27] *** Quits: eerie (eerie@moz-nu5r7u.red.bezeqint.net) (Connection closed)
[16:06:51] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[16:10:11] *** Quits: _zxq9_ (ceverett@moz-qsm369.mesh.ad.jp) (Quit: Konversation terminated!)
[16:10:22] <llogiq> cu folks.
[16:10:24] *** Parts: llogiq (Mibbit@moz-4e63or.reverse.dsi.net) ()
[16:11:28] *** Joins: sprang (sprang@moz-bll05b.zoominternet.net)
[16:11:49] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[16:13:28] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Ping timeout: 121 seconds)
[16:14:08] *** Joins: jevin (jevin@moz-sra.ovp.12.72.IP)
[16:17:19] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[16:18:16] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[16:18:16] *** ChanServ sets mode: +o brson
[16:18:35] <arrrrrrr1> http://doc.rust-lang.org/std/slice/trait.SliceExt.html#tymethod.sort_by
[16:18:38] <arrrrrrr1> who is supposed to read this?
[16:19:21] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[16:19:55] *** Quits: poorman (poorman@moz-7p5b2o.res.rr.com) (Quit: )
[16:20:00] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[16:20:31] <Gankro> nmatsakis: http://www.reddit.com/r/rust/comments/2z8tf1/why_isnt_trait_construction_over_associated_types/
[16:20:31] <arrrrrrr1> http://a.pomf.se/yxclxo.png
[16:20:36] <arrrrrrr1> absolutely useless documentation
[16:21:04] <WindowsBunny> arrrrrrr1: lol
[16:21:32] <arrrrrrr1> WindowsBunny: I think there has been some unintended fallout from our last rustdoc fix
[16:21:51] <arrrrrrr1> gh23397
[16:21:51] <[o__o]> Stability dashboard bars almost unusable on docs page: https://github.com/rust-lang/rust/issues/23397
[16:22:35] <arrrrrrr1> not feeling super bad about it since rustdoc seems to ignore stability attributes in my crates
[16:22:58] <enjolras> GrecKo: i realized i was writting something dumb. Actually, i should just do : http://is.gd/qM8qZU
[16:23:18] <enjolras> Gankro, sorry for the wrong HL
[16:23:24] <enjolras> still, the question holds :)
[16:23:39] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[16:23:55] <GrecKo> I think you are correct
[16:24:11] <GrecKo> despite having no idea of what you are talking
[16:24:40] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[16:25:32] <enjolras> i'm not sure myself of what i am talking about actually
[16:27:22] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[16:27:22] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[16:28:10] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[16:28:23] <bstrie> aturon: dare I ask how API stabilization is coming along? :)
[16:28:32] <aturon> bstrie: you dare!
[16:28:48] <aturon> it's actually in quite good shape
[16:29:01] <bstrie> aturon: io and path ready to use?
[16:29:02] <aturon> the only module not fully stabilized yet is std::net
[16:29:11] <aturon> the rest of io and path are ready, yes
[16:29:23] <aturon> and acrichto has a PR for std::net, just waiting on an RFC decision
[16:29:44] <aturon> once that lands, i'll make an announcement and invite people to start finding the smaller gaps
[16:30:16] <bstrie> aturon: nice, by stable do we mean that the PRs are in the queue or that they've already landed? also, is std::io at feature-parity with old_io?
[16:30:25] <Yurume> I'm close to finishing the flt2dec portion of rust-strconv in terms of features.
[16:30:50] <aturon> bstrie: i believe that all the relevant PRs have landed (just std::net waiting)
[16:31:09] <Yurume> I've devised a clever way to avoid *three* different implementations of Dragon and Grisu (instead of two)
[16:31:20] <aturon> bstrie: new io is not at parity with old io, no. for exmaple, we don't have timeouts on sockets yet
[16:31:46] <aturon> bstrie: but there should be enough there now to get quite far
[16:32:03] <aturon> (and i believe that timeouts are feasible before beta)
[16:32:37] <bstrie> ok, thanks :)
[16:32:41] <aturon> any time
[16:32:47] *** Quits: Rusky (russell@moz-2a17lj.slkc.qwest.net) (Connection closed)
[16:32:57] <Gankro> bstrie: You have to implement it, though
[16:33:02] <Gankro> It's The Only Way
[16:33:32] <bstrie> no I'm too busy thinking of april fools jokes for the subreddit
[16:34:28] *** Joins: Rusky (russell@moz-2a17lj.slkc.qwest.net)
[16:34:32] <Gankro> Oh shoot, I need to write up some RFCs in the similar vein
[16:34:49] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[16:34:54] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[16:35:06] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[16:35:51] <steveklabnik> cmr: yes, you can
[16:36:10] <steveklabnik> bstrie: thanks
[16:37:06] *** Quits: munksgaard (munksgaard@moz-vj4.hq0.225.130.IP) (Ping timeout: 121 seconds)
[16:38:04] *** Joins: Rym_ (y@moz-859.d1r.39.217.IP)
[16:38:16] *** Quits: Guest63 (textual@moz-qfs.570.70.83.IP) (Quit: Textual IRC Client: www.textualapp.com)
[16:41:08] <brson> aturon acrichto: fyi i'm on the home stretch of the feature gating patch. i've had to make two hacks to rustdoc to get doctests to work
[16:41:45] <aturon> brson: this is the one making unstable APIs an error on stable releases?
[16:42:14] <brson> aturon: yes
[16:42:29] <brson> aturon: well, making undeclared features errors mostly
[16:42:38] *** Quits: Rym_ (y@moz-859.d1r.39.217.IP) (Ping timeout: 121 seconds)
[16:42:49] <aturon> right :) home stretch!
[16:43:12] *** Joins: nrc (nrc@moz-4bhi2i.xtra.co.nz)
[16:43:12] *** ChanServ sets mode: +o nrc
[16:43:19] <aturon> we should be able to start conceptually badging some serious crates as "stable rust" now
[16:43:59] *** Quits: imperio (Mibbit@moz-aibeqg.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[16:44:17] *** Joins: Rym_ (y@moz-859.d1r.39.217.IP)
[16:46:35] *** Joins: sternmull (kringel@moz-pip61u.dip0.t-ipconnect.de)
[16:46:43] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:46:58] *** Joins: pcwalton (pcwalton@moz-u92.384.6.71.IP)
[16:46:58] *** ChanServ sets mode: +o pcwalton
[16:47:25] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[16:48:16] *** Quits: nrc (nrc@moz-4bhi2i.xtra.co.nz) (Ping timeout: 121 seconds)
[16:50:34] <arrrrrrr1> what's the quickest way to calculate a 64 bit hash of a type that implements Hash?
[16:51:39] <arrrrrrr1> does Hasher::finish reset the Hasher to its initial state?
[16:53:28] *** Joins: eerie (eerie@moz-nu5r7u.red.bezeqint.net)
[16:57:38] <acrichto> brson: nice! that... must be a monstrous patch, especially with all the tests we have
[16:57:57] *** Joins: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net)
[17:01:14] *** Joins: osa1 (omer@moz-0jenh8.dhf3.7bs7.18e8.2001.IP)
[17:02:37] <osa1> how are these comments used in testing: https://github.com/rust-lang/rust/blob/master/src/test/debuginfo/borrowed-enum.rs#L18 can anyone point me the driver code that parses those commands and runs tests?
[17:02:48] *** Quits: scialex (scialex@moz-j5mi8i.cs.brown.edu) (Quit: Leaving)
[17:03:34] *** Quits: pcwalton (pcwalton@moz-u92.384.6.71.IP) (Client exited)
[17:03:38] *** Joins: SilverKey (SilverKey@moz-0bv.shp.79.67.IP)
[17:03:39] *** Quits: SilverKey (SilverKey@moz-0bv.shp.79.67.IP) (Quit: Cheerio!)
[17:03:41] *** Joins: SilverKey (SilverKey@moz-b7q751.biz.rr.com)
[17:03:42] *** Quits: SilverKey (SilverKey@moz-b7q751.biz.rr.com) (Connection closed)
[17:09:05] <Eridius> I don't know why but I'm kind of amused that I was just informed that `if let` did not come from Swift (even though I wrote the RFC)
[17:09:07] *** Quits: killercup (killercup@moz-4udt1b.dip0.t-ipconnect.de) (Quit: My Mac has gone to sleep. ZZZzzz…)
[17:17:04] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[17:18:29] *** Joins: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se)
[17:20:16] <kmc> haha
[17:21:34] <Eridius> to be fair, he did point out a ticket (#1529) that I'd never seen before that suggested destructing if statements, back in January 2012. But it was not a factor in the design of `if let` (since I'd never seen it)
[17:22:16] *** Joins: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP)
[17:22:45] <sfackler> I'm pretty sure that there's an ancient ticket for any given possible rust feature
[17:22:54] <Eridius> probably true
[17:31:30] <munksgaard> playbot: const FOO: [usize; 1] = [1]; let tmp = FOO.iter();
[17:31:31] -playbot- <anon>:14:48: 14:51 error: borrowed value does not live long enough
[17:31:32] -playbot- <anon>:14         const FOO: [usize; 1] = [1]; let tmp = FOO.iter();
[17:31:32] -playbot- output truncated; full output at: http://bit.ly/1EVD6Aj
[17:31:44] <munksgaard> Isn't that a bit weird? So you need to do
[17:31:55] <munksgaard> playbot: const FOO: [usize; 1] = [1]; let foo_ = FOO; let tmp = foo_.iter();
[17:31:56] -playbot- ()
[17:32:56] *** Quits: tjakubow (tom@moz-ag87jj.fios.verizon.net) (Quit: WeeChat 1.1.1)
[17:33:09] <munksgaard> Any good reason?
[17:33:46] <brson> osa1: https://github.com/rust-lang/rust/blob/master/src/compiletest/runtest.rs#L764
[17:35:01] *** Joins: aepsil0n (eduard@moz-gqh53q.73sq.ctqi.8071.2a02.IP)
[17:35:43] *** Quits: eerie (eerie@moz-nu5r7u.red.bezeqint.net) (Connection closed)
[17:35:45] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[17:36:39] *** Joins: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net)
[17:36:45] *** Quits: osa1 (omer@moz-0jenh8.dhf3.7bs7.18e8.2001.IP) (Ping timeout: 121 seconds)
[17:38:51] *** Quits: Murarth (Murarth@moz-c6ubhh.phnx.qwest.net) (Quit: Screw you guys. I'm going home.)
[17:39:18] *** Joins: Murarth (Murarth@moz-rtn.78t.166.46.IP)
[17:39:21] <sfackler> munksgaard: seems like an rvalue lifetime thing. consts don't represent locations in memory, they're more like #defines. the broken example is basically [1].iter();
[17:40:24] <munksgaard> playbot: [1].iter()
[17:40:25] -playbot- output truncated; full output at: http://bit.ly/1BpPAJ2
[17:42:00] <munksgaard> sfackler: Would that be considered a bug? It's certainly somewhat weird...
[17:42:13] <munksgaard> playbot: let tmp = [1].iter()
[17:42:14] -playbot- <anon>:15:5: 15:6 error: expected one of `.`, `;`, or an operator, found `}`
[17:42:14] -playbot- <anon>:15     });
[17:42:14] -playbot- output truncated; full output at: http://bit.ly/1EVFd72
[17:42:21] <munksgaard> playbot: let tmp = [1].iter();
[17:42:22] -playbot- <anon>:14:19: 14:22 error: borrowed value does not live long enough
[17:42:22] -playbot- <anon>:14         let tmp = [1].iter();
[17:42:22] -playbot- output truncated; full output at: http://bit.ly/1BpQ6ql
[17:42:25] <sfackler> not really imo
[17:42:49] <sfackler> there's a delicate balance between rvalues living "too long" and "not long enough"
[17:43:00] *** Joins: eerie (eerie@moz-nu5r7u.red.bezeqint.net)
[17:43:15] <munksgaard> sfackler: Reason I'm asking is because I'm trying to refactor the expansion of for loops, and so far there's only one case that breaks, which is some code in librand that iterates over a const
[17:43:47] *** Quits: rajat (rajat@moz-utq.l4p.189.205.IP) (Client exited)
[17:43:52] <sfackler> what's the refactor? one break in a deprecated crate seems like not that big of a deal
[17:44:04] *** Joins: joneshf-laptop (joneshf@moz-4olupj.ucdavis.edu)
[17:45:24] <munksgaard> Basically, it seems like there's a lot of redundant code in the expansion as it is right now. There's a result that's always unit, and the result of into_iter() is matched on
[17:45:28] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (A TLS packet with unexpected length was received.)
[17:45:36] <munksgaard> I wanted to do away with the extraneous match and replace it with a let
[17:45:37] *** Joins: Kxepal (Miranda@moz-og7jv6.pppoe.mtu-net.ru)
[17:46:24] <sfackler> oh, that match is used specifically to "fix" lifetimes iirc
[17:46:24] <munksgaard> But apparently doing so interferes with for loops over const arrays
[17:46:50] *** Quits: ptalbot (ptalbot@moz-1gn7gb.eu0n.jcdj.0660.2001.IP) (Ping timeout: 121 seconds)
[17:46:50] *** Joins: mib_r8pxhs (Mibbit@moz-juv.9o3.252.72.IP)
[17:47:25] <munksgaard> Hm, I'm not sure I see why it's necessary?
[17:47:39] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[17:47:39] *** ChanServ sets mode: +o pcwalton
[17:47:50] <sfackler> match [1].iter() { it => { ... } } will work
[17:48:04] <sfackler> but let foo = [1].iter(); .. won't
[17:48:10] *** Joins: munksgaa1d (munksgaard@moz-urnkl5.u.parknet.dk)
[17:48:15] <sfackler> the lifetime of the iterator extends over the match body
[17:48:32] <sfackler> where it does not extend though an arbitrary number of statements in the second case
[17:49:22] <munksgaa1d> Hm, okay
[17:51:27] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[17:51:47] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Ping timeout: 121 seconds)
[17:52:19] *** Quits: aepsil0n (eduard@moz-gqh53q.73sq.ctqi.8071.2a02.IP) (Connection closed)
[17:53:03] *** Joins: nrc (nrc@moz-4bhi2i.xtra.co.nz)
[17:53:03] *** ChanServ sets mode: +o nrc
[17:53:24] *** Joins: eerie_ (eerie@moz-nu5r7u.red.bezeqint.net)
[17:54:08] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[17:56:11] *** Quits: eerie (eerie@moz-nu5r7u.red.bezeqint.net) (Ping timeout: 121 seconds)
[17:58:41] *** Quits: ^BR (br@moz-egk.dm6.194.78.IP) (Client exited)
[18:01:26] <Eridius> sfackler, munksgaa1d: see https://github.com/rust-lang/rfcs/blob/master/text/0066-better-temporary-lifetimes.md
[18:01:37] <Eridius> that RFC should theoretically fix this problem if it ever gets implemented
[18:01:59] *** Joins: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com)
[18:03:13] <brson> only three new contributors last week...
[18:03:28] <brson> also only 99 prs
[18:04:51] <acrichto> "only"
[18:09:22] *** Quits: mib_r8pxhs (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:10:36] <munksgaa1d> Eridius: Ah, interesting. I'll take a look at it :)
[18:10:57] <bluss> One week is just 168 hours meaning 84 bors cycles
[18:11:05] <bluss> only 84 bors cycles maximum per week
[18:11:42] <bluss> I guess a bit less since it's between 2 and 3 hours
[18:16:11] *** Quits: Murarth (Murarth@moz-rtn.78t.166.46.IP) (Quit: Screw you guys. I'm going home.)
[18:16:15] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[18:16:30] *** Joins: Murarth (Murarth@moz-c6ubhh.phnx.qwest.net)
[18:18:14] *** Joins: {-}grant ({0}grant@moz-63ubas.in.charter.com)
[18:18:23] *** Joins: osa1 (omer@moz-002.lrp.160.149.IP)
[18:20:22] *** Joins: mib_8vcl2j (Mibbit@moz-juv.9o3.252.72.IP)
[18:21:58] <Eridius> the [src] links in the documentation all seem to be broken
[18:23:31] *** Joins: eerie (eerie@moz-nu5r7u.red.bezeqint.net)
[18:23:31] *** Quits: eerie_ (eerie@moz-nu5r7u.red.bezeqint.net) (Connection closed)
[18:24:20] *** Quits: zmack (zmack@moz-b26i0b.home.aster.pl) (Connection closed)
[18:25:19] <kimundi> Eridius: known issue
[18:26:10] <Eridius> :/
[18:26:11] *** Joins: James (quassel@moz-t5os7p.range86-163.btcentralplus.com)
[18:27:19] *** Quits: larhat1 (Adium@moz-eou.8og.232.213.IP) (Quit: Leaving.)
[18:27:36] *** Quits: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP) (Quit: Leaving...)
[18:29:47] *** Joins: mib_gwzhh1 (Mibbit@moz-41p.i31.157.175.IP)
[18:30:05] *** Joins: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP)
[18:31:14] *** Quits: mib_gwzhh1 (Mibbit@moz-41p.i31.157.175.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:31:53] *** Joins: ^BR (br@moz-71m.3nd.202.89.IP)
[18:33:22] *** Quits: mib_8vcl2j (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:34:32] *** Joins: rajat (rajat@moz-av1.l4p.189.205.IP)
[18:35:25] *** Joins: zmack (zmack@moz-b26i0b.home.aster.pl)
[18:43:05] *** Joins: ^BR_ (br@moz-71m.3nd.202.89.IP)
[18:43:24] *** Joins: killercup (killercup@moz-edmf2j.dip0.t-ipconnect.de)
[18:44:05] *** Quits: zmack (zmack@moz-b26i0b.home.aster.pl) (Connection closed)
[18:44:11] *** Quits: ^BR (br@moz-71m.3nd.202.89.IP) (Ping timeout: 121 seconds)
[18:44:11] *** ^BR_ is now known as ^BR
[18:46:06] *** Joins: squiddy (squiddy@moz-71v64m.adsl.alicedsl.de)
[18:46:18] <acrichto> brson: btw mac3 is doing that thing where it's trying to build a nightlybut it keeps cycling in the middle
[18:46:41] <acrichto> brson: e.g. 4-5 builds that are all canceled for mysterious reasons
[18:50:45] <brson> ok
[18:52:18] <brson> is this a new phenomenon?
[18:53:08] <acrichto> brson: I saw this happening about a week ago I think?
[18:53:19] <brson> last night's linux nightly failed...
[18:53:27] <acrichto> brson: yeah trying to investigate that locally
[18:53:38] <acrichto> brson: when I investigated the osx disappearance it was b/c the keepalive wasn't being sent
[18:53:45] <acrichto> which led me to suspect high cpu usage on the master
[18:53:53] <acrichto> but you correctly pointed out it couldn't be *that* high for *hours*
[18:54:03] <acrichto> or so one would hope
[18:54:19] <acrichto> brson: http://buildbot.rust-lang.org/builders/nightly-dist-rustc-mac?numbuilds=100
[18:54:19] <brson> i bet there's a problem with the build rules for llvm-config in cross-host builds http://buildbot.rust-lang.org/builders/nightly-dist-rustc-linux/builds/79/steps/compile/logs/stdio
[18:54:20] *** Joins: scialex (scialex@moz-j5mi8i.cs.brown.edu)
[18:54:41] <acrichto> brson: oh I wonder if this is that old bug where the deps aren't set up right
[18:55:34] <nrc> what does it mean when bors corsses out an r=... ?
[18:55:42] <nrc> *crosses
[18:56:14] <brson> nrc: it doesn't mean anything i think. bors is trying *not* to draw attention to itself
[18:56:28] <nrc> oh, ok
[18:56:35] <nrc> that is kind of weird
[18:56:42] <brson> i've suggested changing it
[18:56:50] <brson> it has the opposite of intended effect i think
[18:57:05] <brson> barosl: fyi ^ strikeout comments confuse nrc too
[18:57:07] <nrc> because people like me and wonder what is going on?
[18:57:25] <brson> yeah
[18:57:59] <nrc> :-)
[18:58:03] <brson> acrichto: it could be bad internet in mv perhaps?
[18:58:12] <steveklabnik> barosl: yeah i was confused by the strikeout
[18:58:15] <brson> i recall it was flaky over the weekend
[18:58:34] *** Quits: Gankro (uid71432@moz-sc2bd6.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[18:58:37] <acrichto> brson: hm yes my SF server was down for a bit one day as well
[18:58:41] <acrichto> that may be it
[19:04:03] *** Quits: ^BR (br@moz-71m.3nd.202.89.IP) (Client exited)
[19:05:50] *** Quits: eerie (eerie@moz-nu5r7u.red.bezeqint.net) (Connection closed)
[19:06:36] *** Joins: eerie (eerie@moz-nu5r7u.red.bezeqint.net)
[19:06:37] *** Joins: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net)
[19:12:37] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[19:13:04] *** Quits: ctennis (ctennis@moz-su6.e72.137.99.IP) (Quit: Leaving...)
[19:16:41] *** Quits: joneshf-laptop (joneshf@moz-4olupj.ucdavis.edu) (Connection closed)
[19:22:14] *** Joins: dinfuehr (dinfuehr@moz-sb03m1.highway.telekom.at)
[19:23:09] *** Quits: eerie (eerie@moz-nu5r7u.red.bezeqint.net) (Connection closed)
[19:23:35] *** Joins: eerie (eerie@moz-nu5r7u.red.bezeqint.net)
[19:27:32] *** Joins: joneshf-laptop (joneshf@moz-4olupj.ucdavis.edu)
[19:30:10] *** Joins: reem (reem@moz-4ilvor.coob.q2h1.0009.2601.IP)
[19:39:18] *** Quits: {-}grant ({0}grant@moz-63ubas.in.charter.com) (Connection closed)
[19:40:20] *** Quits: joneshf-laptop (joneshf@moz-4olupj.ucdavis.edu) (Quit: Leaving)
[19:40:29] *** Joins: joneshf-laptop (joneshf@moz-4olupj.ucdavis.edu)
[19:43:59] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[19:53:45] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[19:54:23] <nrc> nmatsakis, eddyb: https://github.com/rust-lang/rfcs/pull/982
[19:54:33] <nrc> DST coercions RFC
[19:54:50] <simukis> acrichto: https://github.com/rust-lang/rust/compare/master...nagisa:stack-cleanup is the stack prototype (don’t mind the misplaced functions or bad code style). Works fine so far. I’m wondering though, why getrlimit was abandoned (?) if it was ever used (I assume it was, because I saw a few comments about it in a related section of the code base)
[19:55:17] <eddyb> nrc: <3
[19:56:21] <simukis> acrichto: most interesting is sys/common/thread.rs changes, followed by libstd/rt/mod.rs
[19:56:25] <eddyb> nrc: PhantomFn? is that... how markers work?
[19:56:33] <nrc> yes
[19:56:47] <nrc> (I think, I've never actually used one in anger)
[19:57:45] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[19:57:45] <eddyb> nrc: I thought MarkerTrait was the trait base and the PhantomFoo stuff were only unit structs
[19:58:34] <nrc> I think you have to use PhatomFn etc. if you have type variables that need referring to, other than Self
[19:59:07] <simukis> do these DST coercions also allow for making ArbitraryStruct(Trait) possible, given ArbitraryStruct can contain unsized types?
[19:59:07] <eddyb> nrc: oh, it *is* a trait
[19:59:46] * simukis hadn’t read the rfc, just skimmed it, honestly
[20:00:18] <nrc> For some definitions of ArbitraryStruct, yes
[20:00:43] *** Quits: munksgaa1d (munksgaard@moz-urnkl5.u.parknet.dk) (Ping timeout: 121 seconds)
[20:00:58] <eddyb> nrc: any specific reason you didnt use ```rust?
[20:01:01] *** Joins: ^BR (br@moz-71m.3nd.202.89.IP)
[20:01:17] <nrc> I just dislike it in general :-p
[20:01:29] <eddyb> nrc: it makes the rendered thing nicer
[20:01:39] * simukis prefers 4 space ident
[20:01:40] <nrc> It's line noise when reading the source and the syntax highlighting isn't that great with it on
[20:01:41] <eddyb> nrc: but I wish I had a way to force it #justgithubthings
[20:01:48] <simukis> which sadly does not allow specifying language at all
[20:02:08] <eddyb> simukis: I considered using comments to switch languages in kate
[20:02:09] <nrc> yeah, I want to be able to set ``` == ```rust for a whole repo
[20:02:24] <eddyb> PHP files don't use... PHP highlighting
[20:02:29] <eddyb> they use HTML
[20:02:38] *** Quits: enaqx (enaqx@moz-asgdqm.infomir.com.ua) (Ping timeout: 121 seconds)
[20:02:39] <eddyb> which can embed CSS, JS or PHP
[20:02:47] <eddyb> I wonder if you can recurse a lot
[20:02:49] <simukis> in vim they get mixed for blocks of PHP code and HTML code.
[20:03:16] <simukis> eddyb: somehow I thought about http://johnmacfarlane.net/highlighting-kate/
[20:04:01] <eddyb> simukis: I'm talking about the files that uses
[20:04:21] <eddyb> I once did the same in JS
[20:05:02] * steveklabnik mumbles something about Perl 6 changing parsers on the fly
[20:05:33] <eddyb> steveklabnik: who needs decidable parsing, anyway :P
[20:10:21] *** Joins: ctennis (ctennis@moz-vcpg3c.in.comcast.net)
[20:11:16] *** Quits: ^BR (br@moz-71m.3nd.202.89.IP) (Connection closed)
[20:11:17] *** Joins: ^BR_ (br@moz-71m.3nd.202.89.IP)
[20:13:54] *** Quits: bjz (bjz@moz-puppgq.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[20:14:14] *** Joins: Tobba|Laptop (Tobba@moz-o13d22.bredband.telia.com)
[20:14:28] *** Joins: zmack (zmack@moz-b26i0b.home.aster.pl)
[20:16:08] <eddyb> nrc: I'm a bit confused about the newtype coercion
[20:16:39] <nrc> how so?
[20:16:51] <nrc> (it is the bit I've thought least about, so most likely to be buggy)
[20:17:14] <eddyb> I mentioned newtypes before, but they were something else
[20:17:22] <eddyb> (newtypes *of pointers*)
[20:17:55] <nrc> I'm specifically trying to address the NonZero case
[20:18:19] *** Quits: Tobba|Laptop (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[20:18:25] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[20:18:25] *** ChanServ sets mode: +o pcwalton
[20:18:30] *** Quits: zmack (zmack@moz-b26i0b.home.aster.pl) (Ping timeout: 121 seconds)
[20:18:30] <eddyb> nrc: which is?
[20:19:20] <nrc> as in, the _ptr field in Rc is NonZero<*mut T>, so we have to cope with that in any coercion scheme
[20:19:35] <nrc> without the newtype coercions, the custom coercions won't apply to Rc
[20:19:39] <eddyb> oh
[20:19:47] <eddyb> nrc: but ?Sized is irrelevant then
[20:19:48] <nrc> alternatives - allow custom coercions to go deep
[20:19:52] <eddyb> that's the part that confused me
[20:20:13] *** Quits: ^BR_ (br@moz-71m.3nd.202.89.IP) (Client exited)
[20:20:13] <eddyb> nrc: so it *is* about newtypes of pointers
[20:20:18] <nrc> well, if the newtype param does not have the ?Szied bound, then it will never get an Unsizing coercion applied to it
[20:20:23] <nrc> ah crap
[20:20:29] <nrc> that is wrong isn't it
[20:20:40] <eddyb> the pointers are not unsized :P
[20:20:43] <nrc> because T = *mut T
[20:20:48] <nrc> *U
[20:20:53] <nrc> yeah
[20:21:02] * nrc updates the RFC
[20:21:23] <eddyb> nrc: if you do it automatically....
[20:21:33] <eddyb> nrc: then Rc can be a newtype of *mut RcBox
[20:21:54] *** Joins: larhat (Adium@moz-55ipb7.mfe0.h1q1.2168.2a02.IP)
[20:22:02] <eddyb> nrc: so it only makes sense to recurse as part of custom coercions
[20:22:29] <eddyb> nrc: unless I'm not seeing the whole picture here
[20:22:37] <nrc> my def of newtype is one field tuple structs, but you are right, that is getting very close to Rc - naming a field doesn't seem super significant
[20:23:01] <eddyb> I would add that having trivially-zero-sized structs around it isn't significant either
[20:23:25] *** Quits: eerie (eerie@moz-nu5r7u.red.bezeqint.net) (Connection closed)
[20:23:36] *** Joins: eerie (eerie@moz-nu5r7u.red.bezeqint.net)
[20:23:36] <eddyb> (and pretty easy to account for, really)
[20:24:56] *** Quits: reem (reem@moz-4ilvor.coob.q2h1.0009.2601.IP) (Connection closed)
[20:25:43] <eddyb> nrc: one can quickly write a recursive function constructing a "path" going through struct fields and finding the one and only that needs to be coerced
[20:26:04] <nrc> Ii think having opt-in everywhere and allowing recursive use of CoerceUnsized is best
[20:26:08] <eddyb> nrc: I guess zero-sized fields would fit the subtype rule you have
[20:26:15] <nrc> right
[20:26:32] <nrc> I think even >0 sized fields should be Ok
[20:26:42] <nrc> as long as only one is coerced
[20:27:44] *** Joins: zmack (zmack@moz-b26i0b.home.aster.pl)
[20:28:15] <eddyb> nrc: oh, now I see the side table. I actually just thought of that myself. but instead of a field index, I'd have a path (a Vec of indexes)
[20:28:40] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[20:30:29] <eddyb> nrc: I'd prefer not to add more recursive structures to the compiler when this really doesn't have to be that complicates
[20:30:33] <eddyb> *complicated
[20:32:24] <eddyb> nrc: I would limit the coerced field to raw pointers, leaving only the from/to types and the "index path"
[20:32:33] <eddyb> nrc: to describe the whole impl
[20:34:31] <nrc> I don't see the adjustment representation as complicated - in fact I think a path of indices is more complex, since it is losing the context of the abstraction
[20:35:10] <nrc> or to put it another way, it is a more explicit representation of the coercion
[20:36:43] <simias> sorry if it's not the place to ask but I don't know where this is documented: is signed right shift and shit overflows defined behaviours in rust?
[20:36:59] * XMPPwocky hands simias the letter F
[20:37:27] <eddyb> nrc: recursive structures are terrible to deal with IMO
[20:37:48] <simias> XMPPwocky: F?
[20:37:51] <eddyb> nrc: right now we have to account for edge cases that we cannot create :|
[20:37:55] <eddyb> nrc: and might never
[20:38:35] <eddyb> like... automatic T -> *const &mut *mut T
[20:41:19] <XMPPwocky> simias: reference says it's defined, but reference is incredibly old
[20:41:33] <XMPPwocky> assuming you meant *shift* overflows...
[20:41:43] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[20:41:49] <WindowsBunny> ricky26: This should excite you http://reviews.llvm.org/rL232003
[20:42:20] <simias> I mean things like "-4i32 >> 1" (which I assume would be an arithmetic shift, but I think it's UB in C)
[20:42:40] <simias> and things like "1u32 << 200" which I assume would be "0" but I think it's UB in C
[20:42:47] <eddyb> nrc: I don't think *very explicit* compiler implementation details belong in the RFC, just the abstract semantic rules
[20:43:21] <eddyb> nrc: but I should wait until you've sorted out newtypes
[20:43:32] <nrc> yeah, I was erring on the side of over-sharing with that one, just because I'd thought about it and wanted to write it somewhere - it also helped me find some bugs with earlier ideas
[20:43:40] <simias> the reference says that ">>" is "logical right shift" which seems to imply that it's never arithmetic
[20:44:01] <eddyb> *sigh* so much dead code
[20:44:03] <simias> but I've stumbled upon http://www.reddit.com/r/rust/comments/2lp3il/where_is_arithmetic_signed_rightshift/
[20:44:14] <simias> which seems to say the reference is wrong
[20:44:25] <nrc> re recursive structures - I prefer having easier to understand code, even if it means a few more checks for unreachable stuff
[20:44:36] <nrc> s/stuff/edge cases
[20:44:49] <simias> however that was 4 months ago and the refrence still says "SRL"
[20:44:52] <eddyb> nrc: recursive is very hard to understand in this case
[20:45:02] *** Quits: semarie (semarie@moz-1ke7g5.ip-92-222-38.eu) (A TLS packet with unexpected length was received.)
[20:45:07] <eddyb> because you have a linear set of actions
[20:45:14] <eddyb> spread across 10 different functions
[20:45:23] <eddyb> when it could be a tiny loop in one function
[20:45:24] <simias> the reference also says that integer overflow is well defined which is not the case anymore AFAIK
[20:45:52] <eddyb> nrc: the implementation of unsizing for constants is incomplete because it handles only two levels of nesting
[20:45:58] <eddyb> nrc: except... we never emit more...
[20:47:31] <ricky26> WindowsBunny: That looks nice, I guess after that we're just waiting for the exception table generation in the MSVC format, right? Still gonna aim for a 3.6 workaround. :p
[20:48:06] <simias> XMPPwocky: oh right, shiFt overflow, I understand now :)
[20:48:23] <eddyb> nrc: one day we'll have a MIR and this discussion will be pointless :(
[20:48:50] <nrc> I guess we have different opinions on what makes code understandable - for me the more that I can grok from a data structure, the better and I'd rather see a bunch of small functions than a "tiny loop" which does something quite subtle
[20:48:57] <nrc> yes! we agree on that :-)
[20:49:11] <eddyb> nrc: the data structure looks like it could be arbitrarily nested, which is not true
[20:49:23] *** Quits: jgallagher (john@moz-d5e8oc.hfc.comcastbusiness.net) (Client exited)
[20:49:33] <simias> I'll submit a bug request just in case
[20:49:49] <eddyb> thankfully we use an integer instead of Boxes for the number of autoderefs
[20:50:04] * eddyb shudders imagining the memory usage of those side tables
[20:51:03] *** Joins: srh (User@moz-ov4.5f3.242.50.IP)
[20:51:30] *** Quits: zmack (zmack@moz-b26i0b.home.aster.pl) (Connection closed)
[20:52:00] <eddyb> nrc: I also want to poke at ty::UnsizedKind, I have a faint hope that it can be simplified
[20:53:14] *** Quits: eerie (eerie@moz-nu5r7u.red.bezeqint.net) (Connection closed)
[20:53:41] *** Joins: eerie (eerie@moz-nu5r7u.red.bezeqint.net)
[20:54:28] <eddyb> nrc: a funny one was DefUpvar(@Def, ...) which was hiding a strange data dependency (solved by moving a tiny pass into resolve)
[20:54:33] *** Quits: squiddy (squiddy@moz-71v64m.adsl.alicedsl.de) (Quit: Leaving)
[20:57:03] <eddyb> hang on a second :|
[20:57:15] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[20:57:41] <eddyb> doener: have you ever considered flattening *all* nested structures?
[20:58:04] <eddyb> just dump the fields in the same "list"
[20:58:44] <eddyb> I think it might be worth considering at least using it for indexes
[20:59:03] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[20:59:37] <eddyb> nrc: it would make UnsizedKind O(1) in memory ;)
[21:00:14] <eddyb> (wait, you're storing a *type parameter* index. that requires more thought)
[21:00:36] <eddyb> Luqman: but there's some stuff you did that ended up in Vec<usize>, for the nullptr optimization. that can be represented with a single integer :D
[21:01:03] <nrc> would it make that much difference? I don't know if we store enough UnsizeKinds to make it worth optimising their memory use
[21:01:04] <bstrie> eddyb: get them to hire you as an intern so that you can implemenet mir
[21:02:15] <Luqman> eddyb: oh? but you're gonna need a &[uint] sooner or later for the GEPi indicies
[21:02:17] <acrichto> simias: interesting! This is primarily just moving away from /proc, right? It also looks like it may be a bit more accurate for the main thread sometimes as well
[21:02:23] <acrichto> er sorry, simukis ^
[21:02:30] <eddyb> Luqman: don't we build those on demand?
[21:02:34] <arrrrrrr1> how do I signal oom without importing liballoc?
[21:02:51] <eddyb> Luqman: because of C types
[21:02:51] <simukis> acrichto: I’m not sure about the accuracy, honestly
[21:03:04] <simukis> I need to have control of _start to make it accurate
[21:03:14] <simukis> _start as in the _start which glibc provides for us currently
[21:03:50] <eddyb> nrc: this isn't premature optimization, it's designing something *simple*
[21:04:11] <simukis> for example it might fail if the user has a lot of environment variables and argvs that get put onto the end of the stack
[21:04:18] <Luqman> eddyb: for the nullable ptr opt at least we build that vec once in represent_type and use that
[21:04:30] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[21:04:36] <eddyb> Luqman: fair enough... though!
[21:04:42] <eddyb> Luqman: if we were flattening LLVM types :P
[21:04:57] <simukis> re /proc: yes, my intention is to basically move away from proc and stop making a guard page for main thread stack
[21:05:05] <simukis> since that’s not necessary
[21:05:05] <Luqman> eddyb: true, if we did flatten the types then we wouldn't need to
[21:05:13] <acrichto> simukis: ah interesting, makes sense though
[21:05:18] <eddyb> Luqman: but I don't know if that's a good idea
[21:05:27] <acrichto> simukis: hm, yeah I'm not 100% sure why we're doing that
[21:05:34] <eddyb> Luqman: except for that fact that there's a desire to erase pointer types in LLVM
[21:05:42] <acrichto> simukis: b/c I thought we did indeed research and find that all platforms had guard pages
[21:05:46] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[21:05:52] <eddyb> (no T*, just a single pointer type)
[21:06:01] <simukis> I guess just some dead code, since there’s a lot of code to support split stacks in our codebase, still
[21:06:15] <simukis> or rather reallocated stacks, I should say
[21:06:38] <eddyb> simukis: how much stack probing support do we have?
[21:06:43] <nrc> eddyb: I'm not sure exactly what you are proposing for simplifying UnsizeKind, but I pretty much like the recursive structure
[21:06:51] <simukis> eddyb: windows only for now
[21:06:56] <eddyb> simukis: q_q
[21:07:04] <simukis> and probably won’t change for a while
[21:07:26] <eddyb> nrc: my point is that the struct doesn't matter and it makes *all* the code using it recursive
[21:07:29] <doener> eddyb: you mean treating A in struct T { a: i8, b: i64 }, struct S { x: i8, t: T } as { x: i8, __pad: [7 x i8], a: i8, b: i64 }?
[21:07:45] <Luqman> eddyb: i think that the opaque pointer type changes are starting to land. i remember sseeing something re: GEPs landing recently
[21:07:45] <eddyb> doener: the padding makes me sad
[21:07:48] <doener> s/A/S/
[21:07:56] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[21:07:58] <nrc> eddyb: which struct?
[21:08:01] <doener> eddyb: you'll need that if you flatten the struct
[21:08:05] <eddyb> nrc: UnsizeStruct
[21:08:16] *** Joins: munksgaa1d (munksgaard@moz-urnkl5.u.parknet.dk)
[21:08:21] <nrc> oh, I see what you mean
[21:08:57] <eddyb> I'm not going to poke it just yet, I'm still cleaning up some Box handling
[21:09:11] <nrc> How does it not matter? Will you re-explore each time to find which param to adjust?
[21:10:52] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[21:11:15] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[21:12:03] <eddyb> type params are not exactly reliable, but I'm not aware of *all* of the uses
[21:12:26] <eddyb> nrc: most of my thoughts are exploratory
[21:12:49] <eddyb> nrc: so don't take anything *too* seriously just yet
[21:12:53] <nrc> heh
[21:13:06] <nrc> I'll be interested to see where you get to in any case :-)
[21:13:12] <eddyb> right, me too
[21:13:33] <eddyb> nrc: having a RFC is an important step in the right direction, thanks for writing that up :D
[21:13:55] <nrc> np :-)
[21:14:04] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[21:14:27] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[21:16:24] *** Joins: Gankro (uid71432@moz-sc2bd6.charlton.irccloud.com)
[21:16:26] *** Joins: _rovar_ (rovar@moz-m2j7h0.dyn.optonline.net)
[21:17:21] <carllerche> is there a way to compile a 32 bit binary on a 64 bit system?
[21:17:28] <eddyb> carllerche: --target
[21:17:43] <eddyb> carllerche: I think multirust allows you to install 32-bit libs
[21:18:01] <carllerche> thanks, I will look. Trying to get 32 bit CI working on travis
[21:18:14] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[21:18:16] *** Quits: larhat (Adium@moz-55ipb7.mfe0.h1q1.2168.2a02.IP) (Quit: Leaving.)
[21:18:39] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[21:19:44] <sfackler> carllerche: you'll have to pull the rustlib dir out of the 32 bit nightlies and install it in the right place too
[21:20:20] *** Quits: dinfuehr (dinfuehr@moz-sb03m1.highway.telekom.at) (Connection closed)
[21:20:36] <eddyb> sfackler: that's why I mentioned multirust
[21:20:41] <eddyb> maybe it's not that advanced yet
[21:21:50] *** Joins: arielb1 (Ariel@moz-fvcu0s.red.bezeqint.net)
[21:22:37] *** Quits: killercup (killercup@moz-edmf2j.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[21:22:59] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Ping timeout: 121 seconds)
[21:24:51] *** Parts: sternmull (kringel@moz-pip61u.dip0.t-ipconnect.de) ()
[21:30:30] *** Joins: Rym (y@moz-859.d1r.39.217.IP)
[21:30:36] *** Quits: Rym_ (y@moz-859.d1r.39.217.IP) (Ping timeout: 121 seconds)
[21:31:18] *** Joins: lilybetss (Mibbit@moz-juv.9o3.252.72.IP)
[21:31:57] *** Joins: zubron (Mibbit@moz-g4s61s.cable.virginm.net)
[21:32:54] *** Quits: eerie (eerie@moz-nu5r7u.red.bezeqint.net) (Connection closed)
[21:32:56] *** Quits: lilybetss (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:33:04] *** Quits: Rym (y@moz-859.d1r.39.217.IP) (Connection closed)
[21:33:08] *** Joins: Rym (y@moz-859.d1r.39.217.IP)
[21:35:06] *** Quits: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP) (Connection closed)
[21:36:50] *** Joins: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP)
[21:38:30] *** Joins: njn (chatzilla@moz-gok.4b2.214.203.IP)
[21:42:20] <simukis> oooh, this week in Rust!
[21:44:14] *** Quits: scott (uid25790@moz-e5ok1n.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[21:46:24] <simukis> acrichto: in https://github.com/rust-lang/rfcs/blob/master/text/0640-debug-improvements.md in the first line of the summary did you mean “implemented by every struct” rather than “implemented by every trait”? if so, want me to send a PR?
[21:46:27] *** Quits: Nekit1234007 (nekit@moz-vbf.vq8.182.62.IP) (Ping timeout: 121 seconds)
[21:47:09] <sfackler> simukis: derp, should be struct
[21:47:20] <simukis> sigh, I’m disappointed I didn’t catch this earlier
[21:47:33] *** Quits: evanfarrar (evanfarrar@moz-7vs.bl6.251.207.IP) (Connection closed)
[21:48:50] <bstrie> holy crap, bstrie is compiling rustc
[21:48:53] <simukis> https://github.com/rust-lang/rfcs/pull/983
[21:48:59] <bstrie> the day of prophecy has come at last
[21:49:03] *** Quits: srh (User@moz-ov4.5f3.242.50.IP) (Quit: Leaving)
[21:50:34] <sfackler> simukis: now that I think about it, it should probably be "type", not "struct" since enums can/should implement Debug too
[21:50:55] <simukis> ah right
[21:51:02] <simukis> that sounds like the best word here
[21:51:04] <brson> https://github.com/brson/rust-dev-archives
[21:53:19] <nrc> bstrie: I hope that means you are doing it by hand using pencil and paper, painstakingly writing out billions of zeros and ones
[21:55:08] *** Joins: SilverKey (SilverKey@moz-liif3j.res.rr.com)
[21:56:55] *** Quits: Rym (y@moz-859.d1r.39.217.IP) (Connection closed)
[21:57:14] *** Joins: Rym (y@moz-859.d1r.39.217.IP)
[21:57:16] <simukis> now I’ll subbornly never use integer suffixes ever again.
[21:58:03] *** Quits: zubron (Mibbit@moz-g4s61s.cable.virginm.net) (Quit: http://www.mibbit.com ajax IRC Client)
[21:58:13] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[22:00:22] <bstrie> nrc: it's the only way to prove that rustc hasn't fallen prey to a reflections-on-trusting-trust attack
[22:01:49] *** Quits: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com) (Connection closed)
[22:01:58] <simukis> did somebody sneak in some nasty code in 0.1 times?
[22:02:23] *** Joins: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com)
[22:04:11] *** Quits: eibwen (eibwen@moz-g4q14p.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[22:06:54] *** Joins: tjakubow (tom@moz-dia6e2.warp2biz.com)
[22:08:26] *** Quits: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com) (Ping timeout: 121 seconds)
[22:17:39] <richo> I was pondering this the other night. If you wanted to do the two-compiler trick to assert that rustc isn't backdoored, it's actually pretty straightforward if the concern is code injection
[22:17:48] <richo> since you don't have to implement typechecking, borrowchecking etc
[22:18:04] <richo> you literally just ahve to parse -> ast -> codegen
[22:18:12] <richo> "just"
[22:18:52] <simukis> well, the C compiler doesn’t really have (almost) any of these stages either
[22:19:47] *** Quits: scialex (scialex@moz-j5mi8i.cs.brown.edu) (Quit: Leaving)
[22:19:48] <cmr> Do you trust LLVM?
[22:19:58] <richo> staying out of that
[22:20:03] *** Quits: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net) (Client exited)
[22:20:08] <richo> after wanting to mute all of twitter after that xcode fiasco
[22:20:11] <simukis> cmr: do you trust intel?
[22:20:22] <simukis> /arm/ati/etc.
[22:20:25] <richo> but tbc, when I suggested a reimplementation, I was not intending to backend to llvm
[22:20:26] <cmr> simukis: no, but that's beyond the point.
[22:20:40] <richo> honestly, backending to a jvm is probably the most straightforward approach
[22:20:41] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[22:20:50] <richo> macro_rules! rust_to_scala(
[22:21:06] <XMPPwocky> you don't trust rustc but you trust the *JVM*?
[22:21:23] <richo> err, yeah I trust that the jvm doesn't have the same backdoor as rustc
[22:21:44] <richo> backdooring the jvm like that would be *insane* and guaranteed to be discovered
[22:22:01] <simukis> and then as a result people discover backdoors in both rustc *and* jvm
[22:22:07] *** Joins: jxv (jxv___@moz-qneod7.pk6i.d98i.030a.2602.IP)
[22:22:28] <simukis> richo: backdooring now, yes, but nobody can guarantee it wasn’t when nobody was looking at it aeons ago
[22:22:38] <Gankro> Backdooring the jvm is *way* easier.
[22:22:59] <richo> I think your threat model is different than mine
[22:23:36] <richo> my model is that if you write a rust compiler in scala, and then build the official rustc sources with it (compiler 1), and then build the official rust sources with the official rust compiler (compiler 2)
[22:23:37] <Gankro> Backdooring individual clients vs backdooring library producer
[22:23:50] <richo> then build the official sources with both of those compilers, the resulting outputs should be bitwise identical
[22:23:56] <richo> which asserts no backdoor in the official rust compiler
[22:24:00] <Gankro> Oh, you're using the jvm as a bootstrap, not an end-target
[22:24:04] <cmr> oh, you're not talking about diverse double compiling
[22:24:10] <reem> except... optimization?
[22:24:19] <simukis> reem: it is easy to turn these off
[22:24:25] <XMPPwocky> so the idea is, you have "rustc-lite" which does no type/whatever checking
[22:24:25] <richo> shouldn't matter
[22:24:31] <XMPPwocky> and outputs JVM bytecode or scala or something
[22:24:37] <XMPPwocky> you compile rustc with rustc-lite
[22:24:41] <richo> sure. "emits some turing complete stuff"
[22:24:42] <XMPPwocky> you now have a rustc that runs on the jvm
[22:24:47] <XMPPwocky> you compile rustc with *that*
[22:24:51] <richo> exactly
[22:24:53] <reem> if you compile two C equivalent programs with gcc and clang I doubt you get bitwise identical binaries
[22:24:59] <XMPPwocky> and if you get something that doesn't match
[22:25:02] <richo> reem: no, but that's not the point
[22:25:04] <reem> s/two equivalent C programs/one C program twice/
[22:25:14] <richo> if you compile clang with gcc and clang, you get two functionaly identical clangs
[22:25:15] <XMPPwocky> reem: the idea is, you compile the same program with the same compiler
[22:25:22] <reem> oh, sample compiler, sure
[22:25:23] <XMPPwocky> right lick richo said
[22:25:25] <richo> that should emit bitwise identical programs (modulo UB)
[22:25:29] <XMPPwocky> you sort of bootstrap
[22:25:37] <reem> Oh you're saying you compile compiler 2 with compiler 1
[22:25:59] <richo> well, you build compiler 1a with compiler 1 and compiler 2a with compiler 2
[22:26:32] <XMPPwocky> you start off with the source to rustc and the source to a "rustc-lite"
[22:26:38] <reem> ya, I got it now
[22:26:44] <richo> sorry for being unclear
[22:26:56] <reem> my bad for being dense :)
[22:27:41] <richo> np! (richo afk, but interested in chatting more if someone's actually crazy enogh to do this with me)
[22:28:54] <XMPPwocky> i have, on the... not even the backburner
[22:28:58] <XMPPwocky> it's all the way behind the stove at this point
[22:29:17] <XMPPwocky> a silly idea to write a trans alternative that just spits out x86 bytecode as fast as possible
[22:29:20] <XMPPwocky> er, asm
[22:29:27] <XMPPwocky> that might be somewhat useful
[22:29:31] *** Quits: tjakubow (tom@moz-dia6e2.warp2biz.com) (Quit: WeeChat 1.1)
[22:34:05] *** Quits: ranma42 (ranma42@moz-2if8va.di.unipi.it) (Ping timeout: 121 seconds)
[22:37:17] *** Quits: WindowsBunny (Peter@moz-gv8vtu.east.verizon.net) (Connection closed)
[22:37:45] *** Joins: ranma42 (ranma42@moz-2if8va.di.unipi.it)
[22:37:54] *** Joins: WindowsBunny (Peter@moz-gv8vtu.east.verizon.net)
[22:41:52] <nrc> GAH! newtype coercions are awkward
[22:48:05] <eddyb> nrc: are you still trying to specify them as anything other than part of custom coercions going through nested structures?
[22:48:53] <nrc> no
[22:49:05] <nrc> I'm trying to make them like other nested coercions
[22:49:10] <nrc> but they are not
[22:49:48] <nrc> because e.g., NonZero T: Unsize<U> is not true, it's more like T: Coerce<U>
[22:50:03] <nrc> but I don't want to add *another* magic trait
[22:52:22] <eddyb> nrc: what nested coercions?
[22:54:15] <nrc> s/nested/custom
[22:54:28] <eddyb> oh
[22:54:31] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[22:54:46] <eddyb> nrc: I see no point in that
[22:55:07] <eddyb> nrc: unless you go for the whole Coerce hierchy that was outlined a while back...
[22:56:45] <nrc> it seems weird to me to treat newtypes differently from Rc, but I think actually it is not
[22:56:57] * nrc goes back to the original approach, with a tweak
[23:02:24] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Quit: leaving)
[23:03:03] <kmc> wonder if this proof is correct http://www.reddit.com/r/rust/comments/2z8tf1/why_isnt_trait_construction_over_associated_types/cph2qlk?context=2
[23:04:07] *** Quits: osa1 (omer@moz-002.lrp.160.149.IP) (Quit: Konversation terminated!)
[23:04:07] *** Joins: osa1_ (omer@moz-002.lrp.160.149.IP)
[23:06:47] <huon> kmc: seems correct to me
[23:12:16] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Client exited)
[23:15:00] <barosl> brson, steveklabnik, Yeah, sorry! I'm planning to replace the strikethrough with something more unambiguous, and there are a few candidates and I must choose one of them. However I'm very poor at deciding something :/
[23:15:09] <barosl> Maybe I should make up my mind today
[23:15:10] *** Joins: adu (ajr@moz-0foa9t.md.comcast.net)
[23:16:23] <steveklabnik> barosl: it's all good :)
[23:16:32] <steveklabnik> it didn't take me long to figure it out
[23:17:58] *** Joins: swgillespie (swgillespie@moz-upj.3un.220.167.IP)
[23:18:10] *** Quits: osa1_ (omer@moz-002.lrp.160.149.IP) (Ping timeout: 121 seconds)
[23:21:10] <barosl> Oh, the type ascription RFC has been merged
[23:21:25] <bstrie> barosl: what is the strikethrough for?
[23:21:53] *** Joins: ^BR (br@moz-egk.dm6.194.78.IP)
[23:21:58] <barosl> bstrie, They're used to "hide" the comment, because it is used internally only for the bot
[23:22:13] <barosl> But, unfortunately, it gained more attraction :/
[23:22:23] <bstrie> barosl: can you do a superscript to make it small?
[23:22:48] *** Quits: rajat (rajat@moz-av1.l4p.189.205.IP) (Client exited)
[23:23:11] <bstrie> barosl: or maybe you can put the bot's comment in a code block, preceded by a line comment :)
[23:23:16] <barosl> That's also viable, but one of the candidates I'm considering is to describe the situation: "Commit XXXX has been approved by REVIEWER, @homu r=REVIEWER XXXX"
[23:24:00] <barosl> Hmm. GitHub does support superscript, but using the direct HTML tag
[23:24:05] <barosl> <sup>...</sup>
[23:25:00] <steveklabnik> i guess since i get them by email
[23:25:08] <steveklabnik> they will always end up being important to me :)(
[23:25:09] <steveklabnik> :)
[23:25:21] <steveklabnik> i'll just get the text/plain
[23:25:40] <barosl> Yeah, I should avoid using the plain HTML if possible
[23:25:54] *** Quits: munksgaa1d (munksgaard@moz-urnkl5.u.parknet.dk) (Ping timeout: 121 seconds)
[23:26:40] *** Quits: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net) (Ping timeout: 121 seconds)
[23:29:04] *** Quits: SilverKey (SilverKey@moz-liif3j.res.rr.com) (Quit: ZZZzzz…)
[23:29:39] <barosl> steveklabnik, Oh wait. Do you also not get the rendered emoji? I think I'm getting them through <img>, but in the text/plain mode, they may be replaced with the Unicode equivalent?
[23:30:50] <reem> You can put HTML comments in markdown
[23:34:59] <kimundi> heh now that would be hiding
[23:35:24] <reem> That's a pretty classic way to hide metadata in github comments
[23:35:36] <reem> and, more rarely, READMEs
[23:36:56] <kimundi> barosl: So, how about dem html comments?
[23:37:10] <Manishearth> eddyb: steveklabnik https://github.com/Manishearth/rust/compare/ast-doc
[23:37:16] <Manishearth> finally got around to it
[23:37:32] <Manishearth> one of the few things in my backlog that I could do without internet
[23:37:33] <barosl> reem, What HTML tags are generally used to hide something? Does style work?
[23:37:40] <barosl> Let's see
[23:37:47] <rprichard> acrichto: Are you still looking into last night's linux build failure?  I think my -L change caused it.
[23:38:04] <reem> barosl: <!-- metadata --> 
[23:38:05] <kimundi> barosl: <!-- foo bar --> seems to work in a gist
[23:38:18] <barosl> Huh, it does
[23:38:19] <barosl> ...
[23:38:25] <barosl> I'm so surprised
[23:39:04] <barosl> reem, Thanks, I'll consider that
[23:39:53] <barosl> kimundi, It also works on the comments! It really surprises me, cause I've never thought any comment is allowed in a comment :P
[23:40:01] <kimundi> heh
[23:40:17] <Manishearth> Can we prioritize this?
[23:40:18] <Manishearth> https://github.com/rust-lang/rust/issues/23115
[23:40:29] <Manishearth> it's breaking a lot of things
[23:42:31] *** Joins: mib_h5mizm (Mibbit@moz-juv.9o3.252.72.IP)
[23:46:08] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[23:47:57] <arielb1> Manishearth: does anyone have a reprod?
[23:48:07] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[23:48:12] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[23:48:12] *** ChanServ sets mode: +o pcwalton
[23:49:19] <rprichard> The previous Linux nightly also complained about a missing llvm-config, but it built OK anyway. The rustc rule uses LLVM_LIBDIR_$(1) without depending on LLVM_CONFIG_$(1).
[23:49:39] <Manishearth> arielb1: yes, multiple, but not a MWE
[23:50:02] <arielb1> Is there a cargo reprod?
[23:50:16] *** Joins: osa1_ (omer@moz-o4q.6no.54.68.IP)
[23:51:50] <Manishearth> arielb1: as in?
[23:51:56] *** Joins: zmack (zmack@moz-4b0.o8l.26.188.IP)
[23:52:05] <arielb1> is there a reproducer you can post to the bug report?
[23:52:23] <Manishearth> arielb1: um, see the comments?
[23:52:35] <Manishearth> There are multiple cargo repos which have been hit by it
[23:54:36] *** Joins: arrrrrrrrr (arrrrrrrrs@moz-69t4ps.dynamic.qsc.de)
[23:54:48] <acrichto> rprichard: yeah I haven't been able to repro though
[23:55:10] <rprichard> To reproduce, I *think* you need to avoid passing -j
[23:55:36] <rprichard> The nightly build also builds both 32 and 64-bit hosts, but I'm not sure if that's important
[23:55:58] *** Quits: zmack (zmack@moz-4b0.o8l.26.188.IP) (Ping timeout: 121 seconds)
[23:56:57] <rprichard> I haven't reproduced it yet either, FWIW
[23:57:22] *** Quits: arrrrrrr1 (arrrrrrrrs@moz-t1eq9a.dynamic.qsc.de) (Ping timeout: 121 seconds)
[23:57:52] *** Quits: ctennis (ctennis@moz-vcpg3c.in.comcast.net) (Quit: Leaving...)
[23:59:54] <arielb1> Manishearth: if you could have a stand-alone repro that would be nice
