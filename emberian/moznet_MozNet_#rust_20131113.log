[00:00:52] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[00:01:15] *** Quits: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[00:01:24] *** Quits: eholk (eholk@moz-BA312F07.crest.iu.edu) (Quit: eholk)
[00:02:17] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[00:02:19] <heftig> Luqman: now add ephemeral diffie-hellman key exchange :p
[00:02:37] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[00:02:38] *** Quits: alan (alan@moz-FE02DD30.sat6.rackspace.com) (Ping timeout)
[00:03:47] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[00:04:22] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[00:06:26] *** Quits: icarot (yaaic@moz-C92E6072.wavecable.com) (Ping timeout)
[00:06:46] *** Quits: admnor (random@moz-5A33CAF5.range86-169.btcentralplus.com) (Quit: Leaving)
[00:10:25] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[00:11:19] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[00:12:56] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[00:13:13] *** Joins: houzi (houzi@moz-4F6A1E26.getinternet.no)
[00:13:19] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[00:21:37] *** Quits: skeet70 (skeet70@moz-697F48F2.bzm-mt.client.bresnan.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:22:21] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[00:23:14] *** Joins: bholley (anonymous@moz-24EDB000.hsd1.ca.comcast.net)
[00:23:24] *** Joins: test-fxos-desktop (nodebot@moz-BBE3ABD.mv.mozilla.com)
[00:23:44] *** Quits: lfox (lfox@993C33BE.AE625458.ECED8BE3.IP) (Quit: )
[00:24:08] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[00:24:26] *** Joins: amcabey (~hym@2E8E8DAB.8D5CB68.6654B540.IP)
[00:25:22] <amcabey> hello
[00:25:23] *** Joins: lfox (lfox@993C33BE.AE625458.ECED8BE3.IP)
[00:25:23] *** Quits: lfox (lfox@993C33BE.AE625458.ECED8BE3.IP) (Quit: lfox)
[00:25:30] <wycats_> btw: hola folks
[00:25:43] <wycats_> making progress!
[00:25:45] <wycats_> that is all
[00:26:01] <wycats_> also, thank you acrichto 
[00:26:08] <amcabey> where are you from ?
[00:26:13] <wycats_> me?
[00:26:17] <wycats_> Portland atm
[00:26:26] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[00:26:48] <amcabey> turkey / bursa
[00:27:41] *** Quits: test-fxos-desktop (nodebot@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[00:29:21] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[00:30:13] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[00:30:38] *** Joins: scorpion (~hym@2E8E8DAB.8D5CB68.6654B540.IP)
[00:30:44] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[00:31:01] *** Quits: scorpion (~hym@2E8E8DAB.8D5CB68.6654B540.IP) (Quit: )
[00:33:12] *** Joins: garthk (garth@moz-B118B14A.static.internode.on.net)
[00:33:38] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[00:33:58] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[00:34:50] *** Joins: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP)
[00:35:02] *** Quits: amcabey (~hym@2E8E8DAB.8D5CB68.6654B540.IP) (Ping timeout)
[00:35:22] *** Joins: test-fxos-desktop (nodebot@moz-BBE3ABD.mv.mozilla.com)
[00:35:43] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[00:35:48] *** Quits: abnrngr (user@C31B7093.A9FCDC29.B3C843D.IP) (Input/output error)
[00:37:27] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[00:38:06] *** Joins: kellogh (timkellogg@moz-68DF7EF7.teliax.com)
[00:38:27] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[00:39:11] *** Quits: test-fxos-desktop (nodebot@moz-BBE3ABD.mv.mozilla.com) (Client exited)
[00:39:29] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[00:39:35] <bstrie> wycats_: progress on what?
[00:40:22] *** Joins: dherman (dherman@5AB4884B.FCC4549.14D5B978.IP)
[00:40:22] *** ChanServ sets mode: +ao dherman dherman
[00:40:28] *** Joins: pcwalton (pcwalton@5AB4884B.FCC4549.14D5B978.IP)
[00:40:28] *** ChanServ sets mode: +ao pcwalton pcwalton
[00:40:42] <kmc> rustc is giving me a type error where the "expected type" is the name of a function and not a type
[00:40:45] <kmc> o_O
[00:40:46] *** Joins: jdm (jdm@5AB4884B.FCC4549.14D5B978.IP)
[00:40:46] *** ChanServ sets mode: +o jdm
[00:43:05] <wycats_> bstrie: my port to rust of a ruby agent
[00:43:11] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Ping timeout)
[00:43:35] *** Quits: kellogh (timkellogg@moz-68DF7EF7.teliax.com) (Quit: kellogh)
[00:44:19] *** Joins: alisdair (textual@moz-DBA2EB65.vc.shawcable.net)
[00:44:49] <wycats_> I'll say more when more progress is made
[00:46:42] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[00:51:52] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[00:52:12] *** Joins: tikue (tikue_star@CFD7FEA6.E6CB677E.689607DE.IP)
[00:55:38] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[00:57:27] <wycats_> so one issue I'm running into (an embedding issue) is the dependency on libstdc++
[00:57:43] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[00:58:12] <wycats_> since I plan to embed my library in a lot of different environments, I can't pull in libstdc++ without the gates of hell opening up
[00:58:54] *** zz_kimundi is now known as kimundi
[00:59:25] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[01:00:17] *** Joins: azita (Azita@5AB4884B.FCC4549.14D5B978.IP)
[01:01:24] *** Joins: fournm (Aria@moz-ABB60BA0.austin.res.rr.com)
[01:01:57] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[01:02:04] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: Places to go, people to annoy)
[01:04:01] *** Quits: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net) (Quit: maxiepoo)
[01:05:44] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[01:06:19] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[01:07:34] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[01:08:19] *** Quits: berleon (leon@moz-BF3525A1.superkabel.de) (Quit: Leaving)
[01:08:56] *** Joins: jstevans (Instantbir@3C9987C4.28BE7003.DDE5D3F6.IP)
[01:12:50] *** Quits: tikue (tikue_star@CFD7FEA6.E6CB677E.689607DE.IP) (Client exited)
[01:18:12] *** Quits: echristo (echristo@B3AA7BA8.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[01:20:47] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Quit: Leaving)
[01:21:01] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[01:21:21] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[01:21:33] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[01:22:32] *** Quits: jdm (jdm@5AB4884B.FCC4549.14D5B978.IP) (Quit: Lost terminal)
[01:23:05] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[01:23:23] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[01:23:28] *** Quits: pcwalton (pcwalton@5AB4884B.FCC4549.14D5B978.IP) (Quit: pcwalton)
[01:23:41] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[01:23:58] *** Quits: geoffhill (geoffhill@moz-738DC0DB.org) (Ping timeout)
[01:25:12] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[01:25:38] *** Quits: alisdair (textual@moz-DBA2EB65.vc.shawcable.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:28:16] *** Quits: jvshahid (jvshahid@moz-53774307.nycm.ny.megapath.net) (Ping timeout)
[01:29:58] *** Joins: Jesin (Jessin_@moz-F96C3835.cc.lehigh.edu)
[01:30:23] *** Quits: refold (gman@moz-42D68426.a258.priv.bahnhof.se) (Quit: leaving)
[01:32:10] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:35:07] *** Joins: KindOne (KindOne@moz-8A3C358F.dynamic.ip.windstream.net)
[01:40:35] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[01:42:37] *** Joins: tikue (tikue_star@CFD7FEA6.E6CB677E.689607DE.IP)
[01:42:43] <bstrie> wycats_: what is an "agent" here?
[01:43:03] <bstrie> like, a daemon?
[01:43:09] <wycats_> bstrie: the product I work on is an agent that runs inside of people's Rails apps, collects information, and send it to our collector
[01:43:20] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Ping timeout)
[01:43:27] <wycats_> https://www.skylight.io
[01:43:29] <bstrie> interesting
[01:43:39] <wycats_> bstrie: unfortunately, Ruby is not very good at controlling memory usage :P
[01:43:50] <wycats_> also unfortunately, Rust is not very good at being embedded
[01:44:02] <bstrie> and you want to insert some rust bits into this monitoring tool for rails, or you want to make something analogous to this agent for rust code?
[01:44:09] <wycats_> the former
[01:44:24] <bstrie> wycats_: I presume you've seen brson's old post on embedding rust in ruby?
[01:44:31] <wycats_> bstrie: yes
[01:44:34] <wycats_> right now I am working on converting the part that creates a protobuf into Rust
[01:44:35] <bstrie> ok
[01:44:42] <wycats_> unfortunately, the Rust protobuf library uses @-boxes
[01:44:47] <bstrie> ugh
[01:44:49] <bstrie> gross :)
[01:44:51] <wycats_> so acrichto has been helping me
[01:45:17] <wycats_> he has written some code that will allow me to run Rust code inside a task from an extern'ed function that is itself not run in a task
[01:45:51] <wycats_> so basically a Ruby C extension calls into no-task Rust, which sends a message to a task to do the protobuf work
[01:45:55] <wycats_> which returns a ~[u8]
[01:45:56] *** Quits: tikue (tikue_star@CFD7FEA6.E6CB677E.689607DE.IP) (Client exited)
[01:46:08] <wycats_> which gets transmuted into a *void_c
[01:46:13] <wycats_> which gets sent back to C
[01:46:15] *** Joins: tikue (tikue_star@CFD7FEA6.E6CB677E.689607DE.IP)
[01:46:19] <bstrie> wycats_: I'm sad to hear that rust is difficult to embed, I imagine that it's one of the few languages that are even possible to use in this space
[01:46:19] <wycats_> which gets converted into an RString
[01:46:20] <wycats_> wheeee
[01:46:26] <wycats_> bstrie: the other option is C
[01:46:51] <wycats_> which I'd rather not use :P
[01:46:57] <wycats_> bstrie: one of the major issues that I noticed so far is Rust's reliance on libstdc++, which is embedding kryptonite
[01:47:41] <wycats_> also, something like acrichto's hack should probably be built in, so you could boot up a single task that you can communicate with from externed functions to do work on your behalf
[01:47:43] <bstrie> wycats_: that's weird to me, I thought we were getting rid of more and more c++ code
[01:47:56] <wycats_> bstrie: acrichto says it's related to unwinding
[01:48:05] <acrichto> bstrie: sadly we're stuck with C++ for awhile until we get another unwinding solution
[01:48:11] <bstrie> obviously if you need @ you can't forgo the runtime entirely, as we prefer for embedding stuff...
[01:48:18] <wycats_> which carllerche tells me is the main reason why libstdc++ is such a pain to embed
[01:48:32] <wycats_> bstrie: honestly, forgoing the runtime seems like a bad idea
[01:48:42] <wycats_> it's basically sending you right down a language fork from the get-go
[01:48:59] <bstrie> I prefer to think of it as a "subset" rather than a fork :P
[01:49:03] <jfb> dunno if anyone tried, but libc++ and libc++abi can replace libstdc++ and libsupc++
[01:49:13] *** Quits: azita (Azita@5AB4884B.FCC4549.14D5B978.IP) (Quit: azita)
[01:49:19] <jfb> you still have libgcc_eh, but libunwind should be able to do the trick
[01:49:19] <cmr> We don't need libc++, just the runtime support.
[01:49:23] <bstrie> but yeah, I do get concerned that a similar sort of library split that D had will occur with us
[01:49:24] <wycats_> bstrie: I think practically speaking, it ends up being a somewhat hostile subset
[01:49:38] <wycats_> "use native IO instead of librustuv"
[01:49:44] <jfb> cmr: which runtime? compiler_rt, or the gcc_eh stuf?
[01:49:47] <wycats_> basically a fork
[01:49:48] <tikue> bstrie: it's a fork as long as rust-core is a separate project :)
[01:49:50] <dbaupp> bstrie: the split is already shaping up with rust-core :(
[01:49:55] <bstrie> right
[01:50:00] <cmr> jfb: c++abi/supc++
[01:50:01] <bstrie> rust-core is a bit concerning
[01:50:08] <wycats_> I'm an embedding consumer, and I'd rather not go down the rust-core path
[01:50:22] <wycats_> I'd imagine that some good tree-shaking work could get you where you need to go without a fork
[01:50:25] <jfb> hmm, do you actually use exceptions at all?
[01:50:25] <wycats_> but I'm not an expert
[01:50:33] <cmr> jfb: yes, it's how we implement task failure.
[01:50:39] <jfb> ah I see
[01:50:40] <wycats_> jfb: I do not, but I can't be sure that nothing I use uses exceptions
[01:51:19] *** Joins: azita (Azita@5AB4884B.FCC4549.14D5B978.IP)
[01:51:31] <wycats_> acrichto: mind if I share your gist with the class?
[01:51:40] <acrichto> of course!
[01:51:47] *** Joins: fyolnish (fyolnish@moz-BD4A4B5.uqwimax.jp)
[01:51:49] <jfb> what I mean is that you can convert invoke/landingpad to calls and abort() on throw if you don't actually need it, and potentially do setjmp/longjmp non-zero-cost EH if you actually do but don't care about the overhead
[01:52:01] <wycats_> https://gist.github.com/anonymous/7441935#file-rsext-rs-L117
[01:52:17] <wycats_> jfb: who is the "you" in that sentence?
[01:52:48] <strcat> bstrie: well I'm not interested in the stdlib anymore
[01:52:57] <bstrie> strcat: that's fair
[01:52:57] <strcat> haven't been doing much rust lately but when I am it will be on rust-core
[01:53:13] <jfb> wycats_ it pretty much has to be the runtime
[01:53:27] <wycats_> jfb: right
[01:53:30] <jfb> and the user if any of these are user-exposed
[01:53:33] *** Quits: fyolnish (fyolnish@moz-BD4A4B5.uqwimax.jp) (Ping timeout)
[01:53:35] <strcat> I don't think M:N threading has a future and my views don't align with the *current* consensus on many stdlib topics
[01:54:00] <wycats_> jfb: it sucks that libstdc++ is such an embedding hazard
[01:54:02] <wycats_> but it sadly is
[01:54:53] <strcat> if libstdc++ doesn't work for you, the stdlib is a whole different world than what you want
[01:55:21] <wycats_> strcat: afaict stdlib uses libstdc++ for exception unwinding
[01:55:33] <wycats_> which seems not like the broad statement you're making
[01:55:51] <bstrie> strcat: I think rust-core is super valuable. you aren't going to be the only one to feel that way
[01:55:55] <bstrie> I just hope we can avoid a fissure
[01:56:00] <strcat> bstrie: I think it will be more valuable than the stdlib
[01:56:12] <strcat> I think more people want to use rust for places they will want rust-core than the stdlib
[01:56:30] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[01:56:32] <strcat> depends on how much work I decide to put into it
[01:56:46] <strcat> so far, close to none ;p
[01:56:57] <wycats_> strcat: the ecosystem will be built around the stdlinb
[01:56:58] <wycats_> stdlib
[01:57:09] <strcat> wycats_: sure, the tiny rust ecosystem
[01:57:15] <strcat> the existing C/C++ ecosystem is built around pthreads
[01:57:17] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[01:57:21] <strcat> it's built around blocking I/O
[01:57:23] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[01:57:31] <wycats_> depends on what you're doing
[01:57:34] <strcat> if you're using the stdlib, you have to reinvent every library with blocking I/O
[01:57:40] <strcat> have fun with that! ;p
[01:57:46] <strcat> rust-core is less work than libstd
[01:57:50] <wycats_> if the node community can do it, I have faith in the Rust community
[01:58:08] <strcat> wycats_: sure, and rust will be a server DSL
[01:58:13] <strcat> is it okay that file I/O is incredibly slow?
[01:58:15] <strcat> I don't think it is.
[01:58:37] <wycats_> strcat: it takes ecosystems a very long time to develop
[01:58:40] <strcat> why use rust if it's an order of magnitude slower than C++? in the real world I/O performance matters more than scaling to many clients on a server
[01:58:43] <strcat> wycats_: it's not about time to develop
[01:58:50] <strcat> async I/O == slow for the common case
[01:58:51] <wycats_> strcat: it would make more sense to swap out the scheduler than build a totally new thing
[01:59:16] <strcat> wycats_: sure, that's rust-core - rust without the scheduler, M:N threading, unwinding, reflection
[02:01:01] *** Quits: nejucomo (Adium@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: Leaving.)
[02:01:51] <strcat> when you actually get to the point where the overhead of preemption (the only overhead of 1:1 threading over rust tasks) is expensive, I doubt you're going to be able to deal with the overhead of the task model
[02:01:59] <jstevans> How do I build rust for arm?
[02:02:13] <jstevans> or rather
[02:02:30] <jstevans> how do I use my current (normal) rust compiler to compile a program for ARM?
[02:03:23] <cmr> jstevans: you can't, if you didn't enable ARM cross-building with configure
[02:03:38] <cmr> But otherwise you'd just say --target somethinggoes here
[02:03:45] <cmr> arm-linux-gnueabihf or something
[02:04:09] <Luqman> cmr: well you could
[02:04:10] <tikue> strcat: are you planning on implementing streams etc.?
[02:04:17] <Luqman> you just wouldn't have any of the support libs :P
[02:04:37] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[02:04:51] <strcat> tikue: I plan on having full bindings for the parts of POSIX I don't hate (threads, blocking I/O, sockets, mmap)
[02:05:08] <strcat> no signals, no posix AIO (glibc implements them with thread per req anyway) and all the other dumb stuff ;p
[02:05:27] <tikue> but what of the concurrency model? 
[02:05:37] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[02:05:38] *** Joins: brson (brson@5AB4884B.FCC4549.14D5B978.IP)
[02:05:38] *** ChanServ sets mode: +ao brson brson
[02:05:46] <strcat> tikue: pthreads
[02:05:53] <tikue> that's not hwat i mean
[02:06:13] *** Quits: brson (brson@5AB4884B.FCC4549.14D5B978.IP) (Quit: leaving)
[02:06:22] <tikue> i mean will ports and chans work as-is, or wil lthey need a separate pthreads implementation?
[02:06:32] <wycats_> strcat: are you sure you can't do this alongside rust prope
[02:06:42] <strcat> wycats_: yes, I'm sure
[02:06:55] <wycats_> Make rust better at not pulling in parts it doesn't need
[02:07:22] <strcat> I'm not interested in making stuff "less bad"
[02:07:33] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[02:08:28] *** Joins: pcwalton (pcwalton@5AB4884B.FCC4549.14D5B978.IP)
[02:08:28] *** ChanServ sets mode: +ao pcwalton pcwalton
[02:08:49] <erickt> pcwalton: ping
[02:08:57] <pcwalton> erickt: pong
[02:09:30] <erickt> pcwalton: good evening! I just wanted to check in to see if you are on track for next week, or if not, if there's anything I can help with
[02:09:31] <strcat> if SCHED_NORMAL/SCHED_BATCH/SCHED_IDLE aren't enough - why not just add a SCHED_POOL grabbing a thread per core with scheduling like SCHED_NORMAL, and treat the threads within it as SCHED_IDLE
[02:09:40] <pcwalton> erickt: next week sounds great :)
[02:09:47] <pcwalton> I'll probably be partially winging my talk
[02:09:50] <strcat> contributing a scheduler to the linux kernel sounds fun ;p
[02:09:58] <pcwalton> which is fine since I did that at new relic
[02:10:20] <erickt> pcwalton: cool :) need any help getting sprocketnes compiling on HEAD?
[02:10:31] <strcat> (ofc, if google lands their changes it won't matter)
[02:10:36] <pcwalton> erickt: oh, I should do that :)
[02:11:10] <tikue> what changes strcat ?
[02:11:13] <erickt> pcwalton: :)
[02:11:40] <strcat> tikue: they want to be able to use 1:1 threading without pre-emption
[02:11:54] <strcat> and they want to be able to switch from thread A to thread B by swapping it out on the same CPU
[02:12:11] <strcat> usually, when you create a thread it spawns it *immediately*, *before* descheduling the parent
[02:12:15] <strcat> even if the parent is about to block
[02:12:19] <strcat> because the kernel can't know that
[02:12:47] *** Quits: jstevans (Instantbir@3C9987C4.28BE7003.DDE5D3F6.IP) (Ping timeout)
[02:12:56] <strcat> anyway, that's the future of concurrency on linux - 1:1 threading, and maybe eventually no non-blocking sockets (but in the present, no non-blocking I/O)
[02:13:18] <sp3d> hmm
[02:13:18] <strcat> (as in file I/O)
[02:13:28] *** Quits: boredomist (ruqs@8186917.CC8FA3EE.E3401B6E.IP) (Ping timeout)
[02:13:32] <strcat> there are lots of problems with N:M threading
[02:13:34] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[02:13:36] <sp3d> I thought linux asynchronous disk IO could be a performance win
[02:13:46] <strcat> sp3d: linux doesn't have async disk I/O afaik
[02:13:52] <sp3d> (not glibc posix AIO)
[02:14:08] <strcat> sp3d: consider it in google's model
[02:14:15] <strcat> blocking I/O call already yields
[02:14:42] <strcat> and threads aren't fighting with each other, they're only yielding when they block
[02:15:11] <erickt> pcwalton: also, do you know if the OpenDNS person will be able to connect their laptop to the projector?
[02:15:14] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[02:15:23] <strcat> even in the current model, async I/O is slower until you have so many threads that context switches are hurting you a lot
[02:15:41] <wycats_> strcat: why can't the Task abstraction work on a native thread base scheduler?
[02:15:49] <wycats_> based*
[02:16:01] <strcat> because you can build a better abstraction on threads
[02:16:13] <strcat> you can have fast thread-local storage, for one thing
[02:16:18] *** Joins: brson (brson@5AB4884B.FCC4549.14D5B978.IP)
[02:16:18] *** ChanServ sets mode: +ao brson brson
[02:16:45] <strcat> #[thread_local] static foo: uint = 5; where setting/getting is as fast as setting/getting any global, if you use static linking (if you don't, it's slower, but not as slow as pthread TLS)
[02:17:08] *** Quits: kirneh (kirneh@moz-ACBB9422.k955.webspeed.dk) (Ping timeout)
[02:17:19] <erickt> brson: hey there! are you going to have a slide deck for your lighting talk next week?
[02:18:09] <strcat> wycats_: page faults block, for example
[02:18:17] <strcat> if you use M:N threading, you don't get to use mmap everywhere
[02:18:36] <strcat> on 64-bit, why use open() on files in the file system at all?
[02:18:47] <strcat> you can just memory map everything and access them as byte arrays
[02:18:59] <strcat> that's a fundamentally more useful API
[02:19:05] <strcat> and it's faster
[02:19:44] *** Joins: twocoat (twocoat@moz-F9806A3F.stny.res.rr.com)
[02:19:45] <bjz> what would folks think about having a 'yada yada' case for the fail! macro? like fail!(...) => fail!("Not yet implemented."). or maybe even an unimplemented!() macro
[02:20:07] <wycats_> strcat: have you tried proposing any of this?
[02:20:08] <sp3d> strcat: https://code.google.com/p/kernel/wiki/AIOUserGuide
[02:20:11] <cmr> (mmap: as pioneered by multics)
[02:20:17] <strcat> wycats_: proposing dropping M:N scheduling? no
[02:20:23] <heftig> strcat: you mean why use read/write instead of mmap
[02:20:40] <strcat> heftig: right ;]
[02:20:45] <wycats_> So why are you sure it can't be done then?
[02:20:59] <wycats_> It sounds like you have good ideas
[02:21:03] <wycats_> Maybe people will listen
[02:21:14] <bstrie> bjz: how would its behavior differ from the default fail!() case?
[02:21:32] <bjz> bstrie: give a more insightful message
[02:21:40] <strcat> wycats_: I don't care about 32-bit, or scaling to many threads on proprietary desktop operating systems
[02:21:45] <bstrie> bjz: people have proposed a general yada yada operator in the past
[02:21:46] <wycats_> You can't be angry at rust for not implementing something you never proposed
[02:21:51] <strcat> wycats_: I'm not angry at rust
[02:21:57] <wycats_> You are ;)
[02:22:06] <twocoat> who are you angry with
[02:22:08] <bstrie> bjz: where executing it always fails with something like "Not yet implemented"
[02:22:13] <bjz> bstrie: I'm not really a fan of adding more syntax
[02:22:26] <bstrie> bjz: too late, we already tokenize ... :P
[02:22:31] <strcat> wycats_: strong opinions about something != anger ;p
[02:23:03] <bjz> bstrie: unimplemented!() also is reads better, and is more greppable
[02:23:04] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[02:23:04] <strcat> I have several open proposals already, I don't want to have 300 open RFCs
[02:23:12] <strcat> if they're accepted, I'll move on to the next thing
[02:23:21] <wycats_> You should turn your strong opinions into proposals 
[02:23:36] <strcat> or I could just implement them in rust-core, far easier
[02:23:42] <bstrie> wycats_: strcat has a lot of strong opinions :)
[02:24:04] <strcat> if people like how I do $SOMETHING in rust-core, it can be accepted into the stdlib
[02:24:06] <wycats_> Would a lot of proposals make you sad?
[02:24:10] *** Joins: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP)
[02:24:15] <strcat> a working implementation is worth more than an RFC
[02:24:18] <bjz> bstrie: I just find fail!() is not explicit enough
[02:24:22] <strcat> wycats_: yes
[02:24:23] <twocoat> why not do both if its that important
[02:24:29] <wycats_> "I can just do it myself" rate limits you on yourself
[02:24:33] <cmr> bjz: I would like a ... for fail!()
[02:24:43] <dbaupp> bjz: fail!("unimplemented") ?
[02:24:43] <wycats_> strcat: I wasn't asking you :)
[02:24:51] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[02:24:53] <tikue> wycats_: proofs of concept are worth more than words though :)
[02:25:10] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[02:25:12] <bjz> dbaupp: would be nice to standardise it, father than having lots of different styles
[02:25:24] <bjz> dbaupp: again - greppability
[02:25:31] <bjz> *rather
[02:25:33] <wycats_> Not always
[02:25:50] <twocoat> you can program a time machine and nobody would download it if you have no communication
[02:25:54] <strcat> and I wouldn't open an RFC about something like removing unwinding because it won't happen
[02:25:56] <wycats_> Communities need coherence, and OSS is much stronger than the capabilities of a single contributor
[02:26:03] <tikue> twocoat: there's a lot of communication here
[02:26:10] <wycats_> How do you know?
[02:26:16] <wycats_> Maybe it would?
[02:26:19] <cmr> wycats_: Because we *need* it
[02:26:24] <bjz> cmr: the issue with fail!(...) is it's not actually very evident what it means
[02:26:29] <cmr> wycats_: Servo does, at least.
[02:26:31] <bstrie> bjz: having a yada yada operator as per perl 6 might allow us to do interesting things beyond just having a standardized error message
[02:26:46] *** Quits: azita (Azita@5AB4884B.FCC4549.14D5B978.IP) (Quit: azita)
[02:26:52] <bjz> bstrie: how so?
[02:27:07] <wycats_> cmr: I bet the discussion would tease out useful design space at minimum 
[02:27:15] <bstrie> bjz: being able to stub out entire code paths
[02:27:16] <strcat> wycats_: I have 119 open issue reports for the rust repo ;p (and 492 closed ones, but that includes pull requests)
[02:27:31] * strcat has a feeling most of the closed ones are pulls
[02:27:39] <bstrie> bjz: not that the special case of `fail!(...)` couldn't expand to magic that does the same thing, but now you're far expanding the scope of the macro
[02:27:45] *** Quits: Jesin (Jessin_@moz-F96C3835.cc.lehigh.edu) (Ping timeout)
[02:27:52] <heftig> strcat: by SCHED_POOL you mean something like OSX's GCD?
[02:27:59] <wycats_> Sounds like they're listening?
[02:28:05] <strcat> heftig: maybe
[02:28:41] <wycats_> Dinnertime
[02:29:16] <twocoat> I propose we start implementing a foldout dual monitor on laptops all those in favor
[02:29:24] <cmr> aye!
[02:29:37] <sp3d> q: is there any sense in trying to write portions of code which are verified to be "fail-free"?
[02:29:49] <sp3d> like a #[no_fail] lint or whatnot
[02:30:08] <strcat> heftig: I have a feeling no though - does every GCD task have its own thread ID, thread-local storage, stack, etc?
[02:30:31] <dbaupp> sp3d: https://github.com/mozilla/rust/wiki/Proposal-for-effects has something like that (a little more general though)
[02:31:05] <strcat> sp3d: anything taking a closure isn't fail-free
[02:31:11] <strcat> so iterators are generally not fail-free
[02:31:14] *** Quits: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP) (Ping timeout)
[02:31:14] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[02:31:21] <strcat> so anything using iterators (everything) is generally not fail free
[02:31:26] <heftig> strcat: no, it's more like rust's task. pass the system a function or closure and it will be scheduled eventually
[02:31:34] <strcat> heftig: ah, then no - not like that
[02:31:48] <sp3d> strcat: ah... and indexing can fail too, so you're basically out of luck entirely :|
[02:32:26] <strcat> heftig: http://www.youtube.com/watch?v=KXuZi9aeGTw this!
[02:32:28] <sp3d> why can closures necessarily fail? heap allocation?
[02:32:37] <strcat> sp3d: because they are arbitrary functions
[02:32:42] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Connection reset by peer)
[02:32:47] <strcat> and atm, all rust closures are boxed
[02:32:54] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[02:32:59] <strcat> so you don't know what the specific function is where you call it
[02:33:13] <sp3d> purity analysis all over again, I guess :/
[02:33:54] <strcat> but with purity you can just hand wave and say a function is pure if what you pass to it is pure
[02:34:01] <strcat> and then the call site can easily determine if it is pure
[02:34:08] <strcat> you could do it with failure too
[02:34:28] <strcat> but it's going to be a huge pain
[02:34:33] <sp3d> mm
[02:34:38] <strcat> easier to just say there is no unwinding
[02:34:58] <sp3d> shame, it'd be cool to be able to write total systems code
[02:35:12] <dbaupp> sp3d: loop {}
[02:35:25] <strcat> errors that can be handled are reported via return values, errors that cannot (or logic errors in the program) lead to an abort
[02:35:45] <strcat> not hard if you do it from the start like that
[02:36:00] <sp3d> dbaupp: as in, "Rice's theorem applies" or as in "bottom can sneak in there too"?
[02:36:27] <strcat> imo unwinding introduces more problems than it solves
[02:36:37] <dbaupp> sp3d: as in, "fail isn't the only non-totality" (so that latter, I guess)
[02:36:41] <sp3d> yeah
[02:36:50] <strcat> lets say a C library uses callbacks
[02:36:53] <strcat> how do you use it from rust?
[02:37:08] <erickt> strcat: do you know if the google threading work is any similar to windows user-mode scheduling? http://msdn.microsoft.com/en-us/library/windows/desktop/dd627187%28v=vs.85%29.aspx
[02:37:09] <strcat> pass rust function to the C library -> rust function unwinds -> boom, you break all the lib invariants
[02:37:17] *** Quits: bholley (anonymous@moz-24EDB000.hsd1.ca.comcast.net) (Quit: bholley)
[02:37:17] <sp3d> indeed
[02:37:20] <sp3d> :/
[02:37:39] *** Joins: bholley (anonymous@moz-24EDB000.hsd1.ca.comcast.net)
[02:37:41] <strcat> erickt: yes, it's the same thing, but windows threads + VM aren't cheap
[02:37:44] *** Quits: bholley (anonymous@moz-24EDB000.hsd1.ca.comcast.net) (Quit: bholley)
[02:38:00] <wycats_> I would like to be able to opt out of unwinding (and the c++ dep it pulls in)
[02:38:18] <cmr> wycats_: #[no_std]
[02:38:20] <strcat> pthreads on linux can already be spawned at the same speed as rust tasks, but context switching overhead is very real and somewhat unpredictable
[02:38:26] <erickt> strcat: cool! I was wondering when that idea was going to get merged into linux. Do you have a link that goes into what google is working on?
[02:38:42] <strcat> erickt: did you see the youtube link?
[02:38:43] <wycats_> cmr: that is a blunt force instrument
[02:38:53] <cmr> wycats_: you don't get to avoid the c++ dep with rustc, you need to compile with llc or clang
[02:38:54] <erickt> strcat: nope, I'll check my scroll history
[02:38:55] <wycats_> Can't use libraries with @, can't use IO
[02:38:56] <strcat> erickt: http://www.youtube.com/watch?v=KXuZi9aeGTw
[02:39:12] <erickt> strcat: thanks!
[02:39:14] <wycats_> Have to define my own allocators
[02:39:18] <SiegeLord> I don't think it's 100% realistic to expect never to get logic errors by accident
[02:39:35] *** Joins: azita (Azita@5AB4884B.FCC4549.14D5B978.IP)
[02:39:38] <strcat> erickt: google has likely been doing this for a year or two, but they made it public recently
[02:39:46] <wycats_> cmr: say more
[02:39:50] <mark_edward> what;s the way to do ptr subtraction/addition now?
[02:39:56] <strcat> mark_edward: offset method
[02:39:57] <cmr> wycats_: rustc always links in librustrt
[02:40:04] <cmr> wycats_: which depends on libsupc++
[02:40:13] <dbaupp> cmr: " Update [...] ProcessExit changes " with no ProcessExit changes at all
[02:40:19] * dbaupp shakes his head :P
[02:40:21] <cmr> dbaupp: yeah, the rebase got rid of it
[02:40:22] <bstrie> wycats_: I really can't know of anyone who's tried to embed rust without disabling the runtime. you're in uncharted waters
[02:40:23] <cmr> :(
[02:40:23] *** Joins: canhtak (canhtak@moz-24D0A1FD.wl.t.ulaval.ca)
[02:40:42] <wycats_> Right... I was saying if the requirements are small, it would be nice to make it possible
[02:41:04] <cmr> wycats_: sure, it's part of the std-profiles project
[02:41:04] <wycats_> bstrie: I can't disable the runtime and use rust libraries (which sadly use @-boxes)
[02:41:07] <mark_edward> strcat: what happened to the operators? this is so clumsy. i'm already in unsafe code, let me add pointers...
[02:41:13] <cmr> wycats_: you can, actually.
[02:41:15] <wycats_> And having to write my own allocators sounds like not fun
[02:41:23] <wycats_> I can?
[02:41:24] <cmr> wycats_: you just need to implement the supporting code for @: it's all lang items.
[02:41:26] <strcat> mark_edward: the operator traits use safe function signatures
[02:41:38] <strcat> mark_edward: fast pointer arithmetic isn't safe
[02:41:43] <cmr> wycats_: Rust gives you all the tool to write the stdlib: the stdlib is written in rust
[02:41:52] <strcat> mark_edward: pointers *could* have operators
[02:41:57] <strcat> but they need to be implemented as part of the language
[02:42:00] <strcat> and type-checked as unsafe
[02:42:08] <strcat> we could have x + y for raw pointers, just not in a generic fn
[02:42:19] <bstrie> wycats_: I also encourage you to port rust-protobuf away from @ and towards something like the RC type
[02:42:22] <dherman> bstrie, cmr: we will definitely care about embedding for servo, I think we just haven't really gotten into it yet
[02:42:42] <bstrie> dherman: glad to hear it
[02:42:58] <dbaupp> cmr: eurgh, the (expected) errors from your update display some really useless spans: https://travis-ci.org/huonw/multibuilder/builds/13893086#L206
[02:43:03] <bstrie> dherman: and I'm happy to hear that there might one day be an alternative to webkit in the embedded browser engine space
[02:43:10] <dherman> bstrie: indeed!
[02:43:32] <wycats_> I'll maybe eventually get skilled enough to port the library - hopefully not before I run out of work time :)
[02:43:43] <strcat> bstrie: considering that gnome, qt, android and iOS use webkit, it's probably too late for that ;p
[02:43:47] *** Joins: Edwards (MeltdownMo@moz-B62E1D6B.members.linode.com)
[02:43:57] *** Quits: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[02:43:58] *** Joins: Jesin (Jessin_@moz-14E09ADA.cc.lehigh.edu)
[02:44:19] <mimcpher> strcat: "Why would apple use khtml? Gecko completely owns the embedded browser space"
[02:44:20] <bstrie> strcat: new platforms will rise :P nobody has any delusions of rust replacing all the C++ code ever written
[02:44:29] <sp3d> strcat: https://github.com/mozilla/servo/issues/441 is pretty exciting
[02:44:31] <bstrie> well, I hope nobody does...
[02:44:32] <dherman> we're looking at the future, not the past
[02:44:47] <dherman> we are entering interesting times
[02:44:48] <wycats_> The future: it is bigger than the past
[02:44:50] <sp3d> and, relatedly, #440
[02:44:52] <wycats_> Or so I hear
[02:45:01] <dherman> a "web browser" may become a very different thing that what you're used to
[02:45:04] <tikue> wycats_: that won't always be true
[02:45:11] <tikue> wycats_: once we reach the halfway mark to the heat death of the universe
[02:45:21] <strcat> dherman: yeah, it might be native rust applications running in a sandbox instead of horrible web stuff! :P
[02:45:29] * strcat goes to hide somewhere
[02:45:30] <dherman> strcat: ok.
[02:45:33] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[02:45:43] <bstrie> strcat: pnacl launched today! we can start writing the rust frontend! :)
[02:46:13] <mark_edward> why do generators need microsoft patents? python has them
[02:46:17] <dbaupp> bstrie: asm.js launched ages ago, and there's still no rust -> asm.js pathway :P
[02:46:20] <erickt> bstrie: I look forward to someone porting pnacl to asm.js so I can run it in firefox
[02:46:29] <mimcpher> erickt: pepper.js already exists
[02:46:32] <dherman> erickt: pepper.js
[02:46:36] <erickt> lol
[02:46:36] <dbaupp> mark_edward: microsoft's/C#'s generators are fairly different to python
[02:46:38] <dherman> ha
[02:46:53] <strcat> just don't host binaries in the US and patents don't matter? :p
[02:46:57] <mark_edward> dbaupp: do we need to use microsoft thingies to have generators?
[02:47:03] <strcat> opengl is covered by patents too
[02:47:13] <strcat> linux distros ship patented features anyway
[02:47:25] <bstrie> mark_edward: microsoft has done a lot of the research on compiling generators into state machines
[02:47:27] <strcat> subpixel rendering is patented
[02:47:34] <bstrie> python has a different approach to generators
[02:47:47] <tikue> python generators are slow
[02:47:47] <tikue> :)
[02:47:49] <dbaupp> mark_edward: they're essentially compiled to a struct with a .next() method, while python's are a full coroutine (i.e. .next() takes a context switch, kinda as if every iterator was a separate task, sending things down a channel)
[02:48:05] <erickt> dbaupp: last I looked the microsoft generator patent was on flattening multiple generator state machines into one state machine. I think we could get a lot of benefit by avoiding that optimization
[02:48:23] <mark_edward> dbaupp: have you all read the papers? i haven't. i'll do a clean room impl :P
[02:48:28] <qmx> howdy! has anyone managed to build rust on mavericks yet?
[02:48:40] <dbaupp> erickt: oh, really? yeah, getting a basic non-flattening impl would be good.
[02:48:44] <tikue> qmx: yes!
[02:48:45] <wycats_> The state machine approach seems "obvious"
[02:48:58] <pcmattman> qmx: yep
[02:49:12] <Edwards> qmz: Just got it through Homebrew today. Compiles fine on Mavericks.
[02:49:12] <qmx> tikue: homebrew failed for me, will research more then
[02:49:13] *** Joins: willingc (willingc@moz-B396B22A.west.biz.rr.com)
[02:49:21] <Edwards> qmx: Just got it through Homebrew today. Compiles fine on Mavericks.
[02:49:41] <tikue> does homebrew even have rust master??
[02:49:42] <tikue> oO
[02:49:55] <qmx> tikue: oh, I was trying 0.8
[02:50:01] <tikue> oh ok
[02:50:04] *** Quits: willingc (willingc@moz-B396B22A.west.biz.rr.com) (Connection reset by peer)
[02:50:07] <strcat> rusti: 2 + 2
[02:50:08] -rusti- 4
[02:50:15] <Luqman> tikue: yes, if you pass a flag afaik
[02:50:16] <qmx> tikue: but technically you can do --HEAD
[02:50:19] *** Joins: willingc (willingc@moz-B396B22A.west.biz.rr.com)
[02:50:46] <tikue> Luqman: qmx: I'm not very experienced with homebrew...do you mean brew install rust --HEAD ?
[02:50:52] <qmx> tikue: exactly
[02:50:52] <strcat> bstrie: isn't it just an LLVM target?
[02:50:57] <tikue> huh
[02:50:58] <tikue> wow
[02:51:08] <cmr> rusti: version
[02:51:08] -rusti- "rustc 0.8"
[02:51:11] <cmr> darn
[02:51:22] <strcat> master doesn't work in the sandbox anymore
[02:51:28] <cmr> (yet)
[02:51:56] <strcat> well, *I'm* not going to fix it ;p
[02:52:31] * strcat usually assumes that if he's not willing to fix something it will remain broken forever
[02:52:37] <strcat> seems to generally be true for any software I use :P
[02:52:58] <pcmattman> strcat: is it easily reproducible?
[02:53:20] <strcat> if you run rust in playpen you will reproduce it
[02:53:44] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[02:53:52] *** Joins: guacamole (Mibbit@moz-A653BFD7.hsd1.tn.comcast.net)
[02:54:03] *** Quits: guacamole (Mibbit@moz-A653BFD7.hsd1.tn.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:54:09] <strcat> I have... very little interest in narrowing down libuv bugs
[02:54:28] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[02:54:51] <Edwards> Is there currently a good way of calling Rust code from Java? I'm interested in building an IntelliJ plugin for it, but I'd like to use the rust compiler project itself for all of the heavy lifting.
[02:55:16] <SiegeLord> So... how do I use rustdoc and rustpkg in the same project?
[02:55:19] <cmr> Edwards: JNI w/C shim is easiest.
[02:55:35] <cmr> Edwards: so, no.
[02:55:35] <Edwards> That's what I was afraid of
[02:55:51] <SiegeLord> It seems the former needs a #[link(name)] while the latter breaks horrifically if you use it
[02:56:02] *** Quits: tikue (tikue_star@CFD7FEA6.E6CB677E.689607DE.IP) (Client exited)
[02:56:12] <cmr> Edwards: There's nothing you'd be able to do using rustc as a library that you can't do using it as an executable
[02:56:30] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[02:56:59] <Edwards> I can get it to invoke just the lexer, or just the parser?
[02:57:04] <cmr> rustc --parse-only
[02:57:19] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[02:57:19] *** Joins: tikue (tkuehn@CFD7FEA6.E6CB677E.689607DE.IP)
[02:57:21] *** Joins: geomyidae_ (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[02:57:21] *** Quits: geomyidae_ (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[02:57:27] <Edwards> cmr: That doesn't output anything.
[02:57:59] <Edwards> (If I can invoke rustc and get the AST as JSON or YAML or something, that'd work just as well.)
[02:58:18] <cmr> Edwards: it isn't supposed to output anything, it just parses it :p
[02:58:28] <cmr> We can't print the AST atm
[02:58:58] <pcwalton> acrichto: how do I print a literal "{ib}" in a println?
[02:58:59] *** Quits: twocoat (twocoat@moz-F9806A3F.stny.res.rr.com) (Quit: Leaving...)
[02:59:15] <acrichto> pcwalton: println!(r"\{ib\}")
[02:59:42] *** Quits: willingc (willingc@moz-B396B22A.west.biz.rr.com) (Client exited)
[03:00:03] *** Joins: willingc (willingc@moz-B396B22A.west.biz.rr.com)
[03:00:06] <cmr> Edwards: What exactly are you trying to do with this plugin?
[03:00:19] <strcat> I would expect the sanest way to do IDE support would be what gocode does
[03:00:31] <strcat> build a caching server, expose a service
[03:00:36] <strcat> write plugins for all the editors
[03:00:48] <Edwards> cmr: Syntax highlighting, intellisense, symbol browsing, etc. It's not a work in progress, just an idea I'm exploring right now.
[03:01:12] <cmr> Edwards: see rustfind for the latter
[03:01:15] *** Quits: nkoep (nik@moz-1C6EABE9.pool.mediaways.net) (Client exited)
[03:01:17] *** Joins: willingc_ (willingc@moz-B396B22A.west.biz.rr.com)
[03:01:21] <cmr> https://github.com/dobkeratops/rustfind
[03:01:23] *** Quits: willingc (willingc@moz-B396B22A.west.biz.rr.com) (Connection reset by peer)
[03:01:40] <Edwards> Cool
[03:02:02] <SiegeLord> Hmm... and if I do put it in, rustpkg install now complains about a missing pkg_id >_<
[03:02:28] *** Joins: jstevans (Instantbir@75A0308F.A6568C8B.B7830B68.IP)
[03:02:47] *** Quits: willingc_ (willingc@moz-B396B22A.west.biz.rr.com) (Client exited)
[03:03:08] *** Joins: willingc (willingc@moz-B396B22A.west.biz.rr.com)
[03:04:49] *** Quits: willingc (willingc@moz-B396B22A.west.biz.rr.com) (Ping timeout)
[03:06:45] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[03:07:21] *** Quits: ancelin (ancelin@moz-C4C968AA.members.linode.com) (Quit: WeeChat 0.4.2)
[03:08:41] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[03:09:07] <SiegeLord> If there's a thing that needs to be forked, it's rustpkg imo
[03:09:35] *** Joins: RageOfThou (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[03:09:41] <cmr> SiegeLord: send PRs
[03:09:50] <cmr> and that's actually a rustdoc problem
[03:09:51] <SiegeLord> I can't send a PR changing the design :P
[03:10:12] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[03:10:24] <cmr> What's wrong with the design?
[03:10:26] <SiegeLord> The package_id meta-attribute cannot possible have a sensible value
[03:10:45] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[03:10:48] <SiegeLord> Because the package id depends on the directory structure where the package root is located
[03:11:06] <cmr> No it doesn't. The directory structure depends on the package id.
[03:11:31] <SiegeLord> It does not today
[03:11:36] <cmr> Yes it does?
[03:11:46] <cmr> (https://github.com/mozilla/rust/issues/9696 btw)
[03:12:20] <cmr> SiegeLord: the only way a package's source gets into $workspace/src is by something putting it in a dir which is the same as the pkgid
[03:12:45] <SiegeLord> warning: missing crate link meta `package_id`, using `test` as default
[03:12:50] <SiegeLord> That behavior is wrong
[03:12:55] <cmr> Sure
[03:13:00] <SiegeLord> And it cannot be fixed
[03:13:28] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[03:13:47] *** Parts: pnathan (Adium@moz-5EBBDD83.tukw.qwest.net) ()
[03:15:18] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[03:16:33] <cmr> Is that happening because you're defining `name`?
[03:16:43] <strcat> erickt: I really, really hope google lands those scheduler features ;p
[03:16:56] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[03:16:58] <SiegeLord> cmr: Yes
[03:17:06] <cmr> SiegeLord: that link meta, along with vers, is deprecated.
[03:17:10] <strcat> erickt: thread pools? pretty much instantly obsolete.
[03:17:12] <cmr> *it* is broken, not rustpkg.
[03:17:18] <cmr> (rustdoc is also broken by requiring it)
[03:17:27] <SiegeLord> cmr: Except that even rustpkg manual refers to vers :P
[03:17:40] <strcat> they could start wiping out the niche filled by projects like intel-tbb
[03:18:03] <SiegeLord> I just don't understand how to effectively use rustpkg
[03:18:07] <strcat> and someone can write a trashy blog post about thread pools being harmful
[03:18:11] <strcat> it'll be great ;p
[03:18:18] <cmr> SiegeLord: nobody does, except *maybe* tjc, and even that is doubtworthy.
[03:18:23] <SiegeLord> It doesn't appeal to me to have to create workspaces with a gihub.com directory
[03:18:24] <cmr> it's incomplete still
[03:18:32] <cmr> SiegeLord: You don't
[03:18:48] <cmr> `rustpkg build` in any random directory works.
[03:19:00] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[03:19:05] <cmr> It builds and installs into the first entry in $RUST_PATH, afaik
[03:19:20] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Quit: Leaving.)
[03:19:37] <SiegeLord> If it's not in that directory, it's package id will be different
[03:19:56] <SiegeLord> Than what I'd get if I did rustpkg install github.com/blah/blah
[03:20:12] <cmr> Hm, that is a problem.
[03:20:52] *** Quits: pcwalton (pcwalton@5AB4884B.FCC4549.14D5B978.IP) (Quit: pcwalton)
[03:21:01] *** Quits: azita (Azita@5AB4884B.FCC4549.14D5B978.IP) (Quit: azita)
[03:21:23] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[03:21:36] <SiegeLord> So if you write code like "extern mod foo = "github.com/blah/blah" you *have* to create a local directory github.com/blah/blah if you want to use a local copy of the source
[03:21:44] <cmr> Yes
[03:22:39] *** Quits: dherman (dherman@5AB4884B.FCC4549.14D5B978.IP) (Quit: dherman)
[03:22:46] *** Quits: brson (brson@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[03:22:47] <SiegeLord> Or, you could do extern mod foo = "blah"; but that forces the users of this code to manually check out packages
[03:23:10] <SiegeLord> I.e. they'd have to cd src; git clone github.com/blah/blah
[03:23:37] <cmr> yes
[03:23:43] <cmr> that is problematic
[03:23:44] *** jorendorff_away is now known as jorendorff
[03:24:44] *** Quits: Jesin (Jessin_@moz-14E09ADA.cc.lehigh.edu) (Ping timeout)
[03:25:12] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[03:25:13] *** Joins: Jesin (Jessin_@moz-F96C3835.cc.lehigh.edu)
[03:25:18] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[03:26:42] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[03:33:00] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[03:35:27] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Quit: leaving)
[03:36:32] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[03:39:39] *** Joins: z0w0 (zack@moz-FE2A0BDD.lnse2.woo.bigpond.net.au)
[03:40:05] *** Joins: kimundi_ (kimundi@moz-A21FC351.dip0.t-ipconnect.de)
[03:41:19] *** Quits: kimundi (kimundi@moz-93826068.dip0.t-ipconnect.de) (Ping timeout)
[03:41:19] *** kimundi_ is now known as kimundi
[03:45:55] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[03:46:27] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[03:48:21] *** Joins: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP)
[03:48:48] *** Parts: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP) ()
[03:48:54] *** Joins: boredomist (ruqs@B16F530C.DC641F2C.BCAEBB33.IP)
[03:49:18] *** kimundi is now known as zz_kimundi
[03:49:28] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[03:49:53] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[03:50:33] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[03:55:37] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Ping timeout)
[03:55:49] *** Joins: Sgeo (quassel@moz-D0F30617.dyn.optonline.net)
[03:56:19] *** Quits: fhahn (fhahn@moz-7924DB5C.vie.surfer.at) (Ping timeout)
[03:56:35] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[03:57:09] *** zz_kimundi is now known as kimundi
[03:58:40] <Sgeo> I guess I haven't looked at Rust that closely, but I do have a comment
[03:59:21] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[03:59:25] <Sgeo> I see that some statements, due to what is admitted to be an "artificial restriction" must come before others (use before declarations, and extern mod before those, I think)
[04:00:00] <mimcpher> Sgeo: It wasn't always a restriction, and the semantics were confusing.
[04:00:04] <Sgeo> My concern is that this makes it harder to deal with macros that emit those statements. If you have two separate macros that emit both uses and other declarations, you can't use both of them
[04:00:19] <Sgeo> Unless macro-emitted code could be exempted from this
[04:00:22] *** Joins: willingc (willingc@moz-B396B22A.west.biz.rr.com)
[04:00:30] <mark_edward> cmr:  how do i a access a memeber of a *Struct? get a type error with x.y
[04:00:44] <cmr> mark_edward: (*x).y
[04:01:15] <mark_edward> What! why . waste of characters. i demand (->) !
[04:02:49] <Yurume> mark_edward, normally you can access members/methods of &ptr or ~ptr or @ptr via ".". for raw pointers (*ptr), it's unsafe and it's not desirable that such auto-deference works (since you can access unsafe pointers *mistakenly*).
[04:03:00] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[04:04:19] *** Joins: prooftechnique (prooftechn@moz-65B7D4EE.hsd1.vt.comcast.net)
[04:04:31] *** Quits: fournm (Aria@moz-ABB60BA0.austin.res.rr.com) (Quit: Leaving)
[04:05:08] <ChrisMorgan> acrichto: thanks, I'm switching rust-http to use the more efficient technique for allocation. I'm still deciding precisely what to do with regards to switching to using the libstd BufferedStream—how the chunked transfer-encoding and the content-length sizing work suggest it will be more efficient *not* to use the BufferedWriter part.
[04:05:59] *** Quits: jstevans (Instantbir@75A0308F.A6568C8B.B7830B68.IP) (Ping timeout)
[04:07:05] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[04:07:17] <mark_edward> God do i hate C pointers. what is the diff between `const char *` and `const char * const` and what do they correspond to in terms of Rust unsafe pointers
[04:07:26] <cmr> mark_edward: that's C++, not C
[04:07:41] <mark_edward> cmr: what do you mean
[04:07:42] <cmr> "const char*" means read-only
[04:07:50] <cmr> C doesn't have "const char* const"
[04:07:56] <mark_edward> im looking at C right know what that has it
[04:08:05] <mark_edward> the lz4 impl is not in C++
[04:08:22] <mimcpher> mark_edward: There are two things that can be constant: The pointer, and the data
[04:08:57] <cmr> mark_edward: where do you see it in the lz4 source? I don't see it anywhere.
[04:09:18] <mark_edward> cmr:  __builtin_expect
[04:09:42] * cmr runs svn up
[04:09:50] <mark_edward> cmr: https://code.google.com/p/lz4/source/browse/trunk/lz4.c#422
[04:10:56] <sp3d> const char* is a mutable pointer to an immutable character; const char* const is an immutable pointer to an immutable character
[04:11:07] <mimcpher> mark_edward: const char *a = malloc(5); will disallow a[1]='a'; but will allow a++
[04:11:27] <cmr> mark_edward: interesting! I didn't know C allowed that.
[04:12:00] <mark_edward> mimcpher: so is `const char * lol = ...` the same thing as `let mut lol: *u8 = ...`
[04:13:01] <sp3d> you can change which thing it points to, but not the contents of whichever thing it is pointing to
[04:14:05] <mimcpher> mark_edward: rust only has char * and const char * const 
[04:14:14] <mimcpher> because mutability goes through ownership
[04:14:24] <mimcpher> (uh, is this true for raw pointers?)
[04:14:25] <cmr> mimcpher: not for raw pointers, they don't own.
[04:14:35] <cmr> same for borrowed and managed
[04:14:40] <mimcpher> cmr: But how does mutability work? Are they always just mutable?
[04:14:43] <cmr> let a: *mut = ...;
[04:14:53] <mimcpher> Okay, so we do get all four in rust then
[04:15:12] <mimcpher> char *; const char *; char * const; const char * const;
[04:16:37] <mark_edward> mut *mut u8; mut *u8; *mut u8; *u8; 
[04:16:44] <mark_edward> is that correct?
[04:16:51] <cmr> no
[04:17:05] <cmr> The const after the * is not part of the type in rust, it's part of the variable's binding
[04:17:07] <cmr> ie, `let mut`
[04:17:44] *** Joins: meTaAU (Mibbit@moz-CDAE1865.lns20.per1.internode.on.net)
[04:17:53] <mimcpher> let me just quickly write up two example programs which ought to clear up everything
[04:18:12] <cmr> In mimcpher's order, `mut a: *mut u8`, `mut a: *u8`, `a: *mut u8`, `a: *u8`
[04:18:22] <cmr> (smack a let in front of all of those and it's valid code)
[04:18:24] <mark_edward> let mut x: *mut u8; let mut *u8;  let x: *mut u8; let x: *u8; 
[04:18:26] *** Joins: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP)
[04:19:06] <mark_edward> cmr: ah okay thanks. have you seen that guide for reading C type decls? It's a spiral!
[04:19:12] <cmr> yes
[04:19:21] *** Joins: jstevans (Instantbir@75A0308F.A6568C8B.B7830B68.IP)
[04:20:12] <mimcpher> mark_edward: the spiral is a lie!
[04:21:32] *** Joins: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net)
[04:21:38] <mark_edward> really?
[04:21:43] <cmr> rusti: static x: int = 4 | 2; x
[04:21:45] -rusti- 6
[04:21:46] <mimcpher> Yeah, it only works in a few cases
[04:21:58] <cmr> rusti: static y: int = 4; static x: int = y | 2; x
[04:21:58] -rusti- 6
[04:21:59] <mimcpher> eg, doesn't work on "foo* a[1][2]"
[04:22:49] *** jorendorff is now known as jorendorff_away
[04:23:44] *** Quits: willingc (willingc@moz-B396B22A.west.biz.rr.com) (Client exited)
[04:24:05] *** Joins: willingc (willingc@moz-B396B22A.west.biz.rr.com)
[04:24:10] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[04:24:54] *** Joins: willingc_ (willingc@moz-B396B22A.west.biz.rr.com)
[04:24:55] *** Quits: willingc (willingc@moz-B396B22A.west.biz.rr.com) (Connection reset by peer)
[04:25:09] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[04:26:01] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[04:26:59] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[04:27:17] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[04:27:33] *** Quits: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net) (Quit: maxiepoo)
[04:27:51] *** Joins: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net)
[04:28:37] <ChrisMorgan> acrichto: OK, now I'm *really* lost as to where the performance is going bad. Spawn time is back down to where it should be (about 7%), but it's still going at only ~2100 rps instead of >4000 rps. wrk benchmark is also down to 40% of what it was.
[04:29:08] <ChrisMorgan> (Spawn time including creating the BufferedStream.)
[04:29:34] <acrichto> ChrisMorgan: have you profiled it?
[04:29:52] <ChrisMorgan> Yes, though only with a simple perf record/perf report, not the full tree thing yet.
[04:30:08] *** Quits: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net) (Quit: maxiepoo)
[04:30:40] <acrichto> hm, I'd start by looking there
[04:30:42] <cmr> ChrisMorgan: btw, you should exclude -a when doing the perf record
[04:30:45] <acrichto> just seeing what's hot in general
[04:31:16] <ChrisMorgan> Top item is [vdso] 0x0000000000000a2f at 5.06%, second is libhttp*.so cast::transmute_copy::h9cc355f5da21f3afaR::v0.1 at 4.97%
[04:32:30] *** Quits: jstevans (Instantbir@75A0308F.A6568C8B.B7830B68.IP) (Ping timeout)
[04:33:24] <ChrisMorgan> Interesting... I was allocating an entirely unused ~[0u8, 0x1000] (4KB), a relic of times gone by, somehow missed.
[04:33:30] *** Quits: Jesin (Jessin_@moz-F96C3835.cc.lehigh.edu) (Quit: Leaving)
[04:35:00] <ChrisMorgan> Hmm, `rustpkg install http` is certainly not a good plan; it doesn't seem to rebuild the library.
[04:35:34] <acrichto> ChrisMorgan: I saw that once, and when I compiled by hand it all went away
[04:35:39] <acrichto> I wasn't certain that libhttp was getting optimized
[04:36:42] <ChrisMorgan> Ah, that could explain the performance drop... let me try it.
[04:37:03] *** Quits: mcarberry (mcarberry@moz-BE1C9F3F.lightspeed.frokca.sbcglobal.net) (Ping timeout)
[04:38:13] *** Joins: m_kato (m_kato@moz-C286AD9A.bitcat.net)
[04:38:19] *** Joins: mcarberry (mcarberry@moz-BE1C9F3F.lightspeed.frokca.sbcglobal.net)
[04:39:03] *** Joins: dherman (dherman@5AB4884B.FCC4549.14D5B978.IP)
[04:39:03] *** ChanServ sets mode: +ao dherman dherman
[04:39:40] *** Joins: pcwalton (pcwalton@5AB4884B.FCC4549.14D5B978.IP)
[04:39:41] *** ChanServ sets mode: +ao pcwalton pcwalton
[04:39:47] *** Quits: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP) (Quit: Leaving.)
[04:40:05] *** Joins: azita (Azita@5AB4884B.FCC4549.14D5B978.IP)
[04:40:22] <ChrisMorgan> That's closer to what I expected.
[04:40:32] <meTaAU> Has anyone looked at a Rust equivalent of the C volatile keyword?
[04:40:33] <acrichto> yay!
[04:40:37] <cmr> ChrisMorgan: what you *originally* expected, ie, 30% perf increase?
[04:40:40] <ChrisMorgan> OK, that mostly-rustpkg-Makefile commit is being reverted.
[04:40:50] *** Joins: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP)
[04:41:06] <ChrisMorgan> No, it's still not getting that far, but I haven't run the full comparison yet.
[04:41:22] <cmr> mm
[04:41:23] *** Joins: brson (brson@5AB4884B.FCC4549.14D5B978.IP)
[04:41:24] *** ChanServ sets mode: +ao brson brson
[04:41:58] <sp3d> meTaAU: 'const' used to be somewhat similar; * may have similar semantics now, but I don't know and it seems unlikely to be exact enough to be usable where you'd need volatile in C
[04:42:12] <strcat> sp3d: const wasn't similar to volatile
[04:42:16] <strcat> const was similar to const ;p
[04:42:25] *** Joins: eholk (eric@moz-F70D5031.hsd1.in.comcast.net)
[04:42:29] <strcat> we do need volatile but it shouldn't have a keyword
[04:42:31] <sp3d> strcat: I thought the notion of const was that it could change between reads
[04:42:50] <eholk> what's the best way to sleep a task these days?
[04:42:55] <strcat> sp3d: sure, the notion of const was a pointer you can only read from but can be written to elsewhere
[04:42:58] <sp3d> that's about half of volatile
[04:43:04] <strcat> no, it's not
[04:43:04] *** Joins: fhahn (fhahn@moz-7924DB5C.vie.surfer.at)
[04:43:05] *** Joins: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP)
[04:43:07] <sp3d> no?
[04:43:12] <strcat> that's what const means in C
[04:43:18] <meTaAU> I've just got Rust code building for a ARM cortex-M0 chip, trying to work out the best way of handling special register read/write
[04:43:23] <strcat> volatile means something *outside* the program may read/write from/to it
[04:43:26] <strcat> const didn't mean that
[04:43:27] <meTaAU> ^ is the context
[04:43:31] <strcat> it meant what const means in C
[04:44:10] <eholk> ah, looks like std::io::timer::sleep
[04:44:13] <eddyb9> meTaAU: going down :D?
[04:44:26] <strcat> sp3d: you can have a const volatile pointer too
[04:44:31] <strcat> const just removes the ability to write to it
[04:44:34] <sp3d> mm
[04:44:35] <eddyb9> meTaAU: it would be interesting to see Rust for AVR, if even possible
[04:44:36] <strcat> without saying it is certainly immutable
[04:44:49] <cmr> eddyb9: not possible, no LLVM support.
[04:44:52] <strcat> (it *might* be - a string in read-only memory, for example)
[04:45:21] <eddyb9> cmr: adding LLVM support shouldn't be impossible, I don't think
[04:45:23] <strcat> meTaAU: fwiw rust has inline ASM
[04:45:23] <cmr> meTaAU: you'll likely just need to use inline asm to get/set it all the time :(
[04:45:31] <meTaAU> I managed to use rust-core and libc (newlib-nano), it only has 1K flash and 100 bytes RAM overhead :D
[04:45:34] <cmr> eddyb9: there's already a fork that adds it, but it's not quite all-there yet.
[04:45:46] <strcat> meTaAU: and it has to be annotated with register information at least if it's like the gcc/llvm inline asm
[04:45:52] <sp3d> wouldn't it be the case that the compiler couldn't cache reads from a (rust) const variable, though, like reading from a (const or not) volatile in C?
[04:46:02] *** Quits: yuriks (yuriks@21CAA321.88B480FC.748B6D8D.IP) (Connection reset by peer)
[04:46:13] <meTaAU> Yep, I'll go with some inline LLVM IR
[04:46:15] <strcat> sp3d: const is the same as const in C - same invariants
[04:46:28] <eddyb9> meTaAU: there's no inline IR
[04:46:49] <meTaAU> I haven't looked yet
[04:46:54] <meTaAU> But that might not be good...
[04:47:01] <strcat> sp3d: it can still cache reads from a mutable ptr
[04:47:11] <strcat> it just has to prove nothing writes to it
[04:47:21] <eddyb9> meTaAU: just GCC-like inline asm. but the constraints are a little different. to specify a register, you have to use {r9} (for example)
[04:47:22] <sp3d> hmm
[04:47:25] <strcat> it knows another thread doesn't write to it
[04:47:27] <cmr> meTaAU: there was a PR that added a bit ago, I think Luqman man was doing it. Maybe jensnockert..
[04:47:31] <strcat> that would be undefined behaviour (data race)
[04:47:38] <strcat> so it only has to do alias analysis
[04:47:51] <strcat> and prove that none of the stores in the function it is analyzing write to what this pointer sees
[04:47:55] <Luqman> cmr: Luqman man? :D
[04:47:56] <sp3d> I see
[04:48:02] <eddyb9> cmr: I don't think he needs LLVM IR
[04:48:13] <sp3d> that makes sense, thanks
[04:48:13] <strcat> sp3d: for example, lets say you have...
[04:48:27] <Sgeo> *poke* any thoughts on the macro thing?
[04:48:34] <meTaAU> My current build pricess is rustc -> ll, llc -> asm, gcc -> binary
[04:48:39] <brson> erickt: probably not
[04:48:41] <strcat> fn foo(x: ~int, &mut int)
[04:48:47] <strcat> well
[04:48:50] <strcat> wait
[04:48:57] <strcat> lets say you have 'fn foo(x: &int, y: &mut int)'
[04:49:00] <strcat> you read from x, you write to y
[04:49:08] <strcat> and then lets say you print the value of x
[04:49:19] <eddyb9> meTaAU: inline asm still works, because it's outputted as the LLVM "inline asm function"
[04:49:31] <meTaAU> Ahh, excellent
[04:49:35] <strcat> so since it thinks x may alias y, it has to read x twice
[04:49:39] <strcat> but in rust, x *cannot* alias y
[04:49:50] <strcat> rust can communicate this information via type-based alias analysis
[04:49:55] <sp3d> yeah
[04:50:20] <strcat> sp3d: anyway it does do interprocedural analysis but... it's not as good as you'd expect, due to compile-time constraints
[04:50:23] <sp3d> I just thought rust const didn't take advantage of task semantics the way it apparently did
[04:50:32] <ChrisMorgan> Is there an easy way to check if something is built with optimisations? e.g. a single line of code that is instantaneous optimised and slow/eternal unoptimised?
[04:50:44] <strcat> sp3d: well, it has to follow LLVM's memory model, where data races are undefined
[04:50:53] <strcat> LLVM's memory model is basically the C++11 memory model
[04:51:04] <strcat> it's a bit less strict in some ways... but not much
[04:51:04] *** Joins: yuriks (yuriks@21CAA321.88B480FC.748B6D8D.IP)
[04:51:13] <strcat> (as in, they don't take advantage of all the undefined behaviour they could)
[04:51:59] *** Quits: willingc_ (willingc@moz-B396B22A.west.biz.rr.com) (Client exited)
[04:52:10] <strcat> rust's job is to restrict what you can express just as much as necessary to remove all undefined behaviour
[04:52:19] <strcat> (in safe code)
[04:52:20] *** Joins: willingc (willingc@moz-B396B22A.west.biz.rr.com)
[04:52:26] <dbaupp> Sgeo: it's not really a problem in practice, because (1) you can put use statements inside blocks so `fn foo() { if something() { use foo::bar;  bar() } }` is ok, and (2) there's no way to expand to something that has a `use` and other things at the top level
[04:52:42] <dbaupp> Sgeo: that is, an macro can't expand to multiple items
[04:52:43] <strcat> and unsafe code should be able to do anything C can do, as C would do it (but likely with uglier syntax - it's not common so it doesn't really deserve to be optimized for syntax-wise)
[04:52:49] <sp3d> mhm
[04:53:53] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[04:54:09] *** Quits: willingc (willingc@moz-B396B22A.west.biz.rr.com) (Ping timeout)
[04:54:17] <Sgeo> Expanding into multiple items could be useful. The way Lisps generally handle it is with a form that just runs its inner forms. 
[04:54:31] <Sgeo> Well, hmm, not "runs", more like 'splices in'
[04:54:34] <dbaupp> multiple items is a bug: https://github.com/mozilla/rust/issues/4375
[04:55:42] <aatch> Unfortunately, the way macros are implemented in the parser makes it tricky to solve.
[04:56:02] <Sgeo> And that could serve as a solution to problems re: whether it's confusing. Most humans won't be directly writing 'begin' forms like this, so allow the 'confusing' order for things that are in begin form. That is, fn blah() {}   begin { use ... } would be acceptable, and the restriction only applying at the real top level
[04:56:05] <aatch> (a macro usage is parsed as either and item or a statement/expression)
[04:56:23] *** Joins: Jesin (Jessin_@moz-5C1F7BD2.res.lehigh.edu)
[04:56:37] <Sgeo> (Or at any begin level including a conceptual begin surrounding the toplevel)
[04:56:45] <dbaupp> aatch: there's a few Option<@Item>'s that could become ~[@Item]'s... in theory without too much fall out
[04:56:57] <dbaupp> (as return values from the various expanders.)
[04:57:02] <Sgeo> Oh, I don't know anything about Rust implementation
[04:57:34] <aatch> dbaupp, I haven't looked into it too much, but I have a feeling that wouldn't work for macro_rules! though
[04:57:42] <dbaupp> aatch: it should
[04:57:53] *** Quits: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP) (Ping timeout)
[04:58:02] <aatch> The stuff in the parser around it is confusing though.
[04:58:04] <SiegeLord> Sgeo: I don't quite see why the current reasons why the order is enforced wouldn't apply to macros too
[04:58:11] <dbaupp> aatch: agree with you on that
[04:58:43] <Sgeo> Because with the order enforced, it limits your ability to create and use certain kinds of macros
[04:58:52] <aatch> I just remember it being a little more complex than simply "replace with new token tree".
[04:59:06] <dbaupp> SiegeLord: Sgeo is basically saying that in `fn bar() {} foo!() fn baz() {}` foo!() should be allowed to expand to `use std::vec; fn qux() { /* use vec */ }`, which seems reasonable
[04:59:27] <SiegeLord> It seems that that limitation is in line with the reason why the order is enforced
[04:59:28] <dbaupp> (which is predicated on us having multiple item support.)
[04:59:50] <SiegeLord> Lifting it for macros does not make the confusion go away... in fact it's even more confusing, as it's generated by a macro
[04:59:51] <aatch> Hmm, that said, we could have an internal AST node that gets folded out
[05:00:10] <dbaupp> SiegeLord: no, it's an internal implementation detail of the macro
[05:00:21] <aatch> like Sgeo's `begin` but only ever created by a macro
[05:00:36] <SiegeLord> I am specifically talking about putting use's everywhere
[05:00:38] <dbaupp> SiegeLord: (well, I guess it depends if the `use` escapes from the macro or not)
[05:01:15] <SiegeLord> If a macro can do it, why can't non-macro code not do it as well?
[05:01:25] <SiegeLord> In fact it'll have to be able to, as per --pretty expanded
[05:01:38] <Sgeo> I was intending for the use to be able to escape the macro. Ideally, a macro's documentation should describe that it affects things globally like that. But then, any poorly-documented macro, even without the ability to do this, could be hard to use properly
[05:01:46] <dbaupp> SiegeLord: --pretty expanded doesn't generate runnable code
[05:02:00] <dbaupp> SiegeLord: e.g. the deriving attributes are still there, so one gets duplicate definitions
[05:02:14] <SiegeLord> Well... that sounds like a bug :P
[05:02:35] <dbaupp> maybe, but it's basically designed for debugging macros/syntax extensions; not actually running code
[05:02:37] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[05:03:14] <dbaupp> Sgeo: there's another thing, macros aren't first class at all, so they aren't exportable or documentable.
[05:03:56] <SiegeLord> It would seem useful in terms of debugging macros to have the code be runnable..
[05:03:58] <SiegeLord> .
[05:04:23] * dbaupp shrugs
[05:04:33] <Sgeo> Not... documentable? Does Rust have a documentation system built-in, because that's the only way I can make sense out of that, no offense
[05:04:43] <dbaupp> Sgeo: it does
[05:04:46] <Sgeo> Ah
[05:05:12] *** Joins: Heather (Heather@19663F6.F53BAACC.9C17E900.IP)
[05:05:44] *** Quits: Jesin (Jessin_@moz-5C1F7BD2.res.lehigh.edu) (Quit: Leaving)
[05:05:56] *** Joins: Jesin (Jesin@moz-5C1F7BD2.res.lehigh.edu)
[05:05:58] <Heather> hey
[05:05:59] <SiegeLord> I guess it might be tricky to get right with hygiene and all
[05:06:33] *** Quits: yuriks (yuriks@21CAA321.88B480FC.748B6D8D.IP) (Ping timeout)
[05:06:44] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[05:07:54] <Sgeo> Are Rust macros hygienic? I haven't actually looked closely at the macro system yet
[05:08:36] *** Quits: eddyb9 (eddy@336E3A7F.D51DAF03.FB866788.IP) (Quit: Leaving)
[05:08:42] <dbaupp> they're half hygienic
[05:08:52] <dbaupp> (the half of non-hygiene is a bug though)
[05:09:28] <dbaupp> that is, they're hygienic with respect to variables declared by `let`, but not function arguments, or patterns in `match ... { pattern => ..., pattern => ... }`
[05:09:52] <dbaupp> (iirc; there's a few bugs filed about the missing bits.)
[05:10:51] *** Quits: KindOne (KindOne@moz-8A3C358F.dynamic.ip.windstream.net) (Ping timeout)
[05:10:53] *** Quits: azita (Azita@5AB4884B.FCC4549.14D5B978.IP) (Quit: azita)
[05:11:04] <dbaupp> https://github.com/mozilla/rust/issues/9383 and https://github.com/mozilla/rust/issues/9384 fwiw.
[05:11:05] <Heather> where is my std::rt ? :S
[05:11:15] *** Quits: dherman (dherman@5AB4884B.FCC4549.14D5B978.IP) (Quit: dherman)
[05:11:22] <dbaupp> Heather: std::rt::io -> std::io
[05:11:27] <cmr> Heather: std::rt::io was renamed to std::io, as it should be.
[05:11:28] *** Quits: pcwalton (pcwalton@5AB4884B.FCC4549.14D5B978.IP) (Quit: pcwalton)
[05:11:45] <Heather> just renamed? few ) not much work to do )
[05:12:03] <Sgeo> It looks syntax-rules based
[05:12:08] *** Quits: brson (brson@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[05:12:39] <Sgeo> I'd prefer there to be an option for arbitary computation in macros, but the Scheme community is divided on the best way to do that
[05:12:59] <SiegeLord> I guess the proposal here is to make them hygiene with respect to type names too?
[05:13:16] <SiegeLord> I suppose that'd be consistent... but it'd imply non-escaping use's
[05:13:35] <SiegeLord> Sgeo: That's planned
[05:13:50] <Sgeo> SiegeLord: cool
[05:13:52] <SiegeLord> There already are non-user defined macros like that
[05:14:01] <strcat> Sgeo: the rust compiler has 'syntax extensions' but they can't be user-defined at this point
[05:14:01] <SiegeLord> They are just hardcoded into the compiler atm
[05:14:06] <dbaupp> Sgeo: the ones declared with macro_rules! are syntax-rules based, but there is support for Rust syntax extensions, e.g. file!() and format!() are hard-coded
[05:14:16] <strcat> rusti: println!("{} {}", 2)
[05:14:16] -rusti- <anon>:9:18: 9:25 error: invalid reference to argument `1` (there are 1 arguments)
[05:14:16] -rusti- <anon>:9          println!("{} {}", 2)
[05:14:16] -rusti-                            ^~~~~~~
[05:14:16] -rusti- error: aborting due to previous error
[05:14:16] -rusti- application terminated with error code 101
[05:14:25] *** Joins: KindOne (KindOne@moz-3B9F6C7F.dynamic.ip.windstream.net)
[05:14:31] <strcat> rusti: println!("{} {1} {3}", 2, 2)
[05:14:31] -rusti- <anon>:9:18: 9:30 error: invalid reference to argument `3` (there are 2 arguments)
[05:14:32] -rusti- <anon>:9          println!("{} {1} {3}", 2, 2)
[05:14:32] -rusti-                            ^~~~~~~~~~~~
[05:14:32] -rusti- error: aborting due to previous error
[05:14:32] -rusti- application terminated with error code 101
[05:14:41] *** Joins: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP)
[05:14:50] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[05:15:02] <myname> i do think the first message is kind of confusing
[05:15:25] <strcat> it's zero-indexed like everything else in rust ;p
[05:15:33] <Sgeo> I think to make sense, my proposal would require being able to disable hygiene selectively in order to be useful (presumably, a more powerful thing than syntax-rules would supply that ability)
[05:15:36] <myname> i know
[05:15:43] <Sgeo> Actually, not sure
[05:15:51] <strcat> rusti: let xs = [1]; xs[1] /* is it really different than this error message? */
[05:15:52] -rusti- task <unnamed> failed at 'index out of bounds: the len is 1 but the index is 1', <anon>:9
[05:15:52] -rusti- application terminated with error code 101
[05:16:08] <ChrisMorgan> I suggest s/argument `1`/argument with index 1/ for indexed arguments.
[05:16:13] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[05:16:15] * dbaupp agrees
[05:16:25] *** Parts: Heather (Heather@19663F6.F53BAACC.9C17E900.IP) ()
[05:17:53] *** Quits: eholk (eric@moz-F70D5031.hsd1.in.comcast.net) (Quit: Konversation terminated!)
[05:18:13] <cmr> Luqman: Heh. Luq<tab>man :P
[05:19:04] <strcat> wat?
[05:19:19] <tikue> tl;dr cmr typed Luqman man earlier
[05:19:21] <tikue> :P
[05:21:01] <mark_edward> how can i emulate https://code.google.com/p/lz4/source/browse/trunk/lz4.c#406 this function? It has gotos and labels inside and outside of a for loop. having trouble following the control flow
[05:23:09] <Sgeo> Looks like this kind of goto and labeling is being used to do something like a return except with more to come after? I think non-Rust non-C languages that can do so would do this via... well, exceptions and try/finally seem extreme
[05:23:24] <Sgeo> But that's what this puts me in mind of, a little. Didn't read the full code, could be wrong
[05:25:11] <SiegeLord> I'd just follow the control flow and write it in Rust
[05:25:13] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[05:25:22] <strcat> Sgeo: they're doing it as a questionable micro-optimization though
[05:27:07] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[05:30:52] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[05:31:12] <rhodesd> mark_edward: fwiw, there's some tests in rust/src/tests/run-pass that cover labeled breaks, ... ./issue-2216.rs:18,  ./issue-9047.rs:14,  ./labeled-break.rs:14 .  
[05:31:26] <mark_edward> rhodesd: thanks
[05:31:32] <rhodesd> yep
[05:31:50] *** Quits: Liothen (liothen@moz-266BCA86.spkn.qwest.net) (Quit: Textual IRC Client: www.textualapp.com)
[05:37:47] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[05:38:19] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[05:39:06] *** Joins: genbattle (quassel@moz-44ABD640.jetstream.xtra.co.nz)
[05:39:59] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[05:51:26] *** Quits: notmatt (notmatt@118CCA77.D1B89392.602E4FC1.IP) (Client exited)
[05:52:49] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[05:55:53] *** Quits: tikue (tkuehn@CFD7FEA6.E6CB677E.689607DE.IP) (Quit: tikue)
[05:56:33] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[05:58:24] <ChrisMorgan> OK, I have some decent rust-http performance figures now. At concurrency of 1, 5% better performance. But higher concurrency is faring much better, over 1.7× at 8 concurrent requests instead of 1.25×. Thus, Node is now definitely surpassed, increasing the 10% lead to 40% by concurrency of 8. (Last benchmarks, Rust was faring 5% better than Node at concurrency 1, 15-5% worse >1.)
[05:58:28] *** Joins: tikue (tkuehn@CFD7FEA6.E6CB677E.689607DE.IP)
[05:59:08] <ChrisMorgan> acrichto: so, your performance improvements haven't made as much difference as I'd *like*, but they are definitely visible, especially for higher concurrency.
[05:59:25] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[05:59:36] <acrichto> ChrisMorgan: hurray! at least a little :
[05:59:37] <acrichto> :)*
[05:59:58] <cmr> About 5% of a hurray? :P
[06:00:21] <ChrisMorgan> I'd been hoping for 10-20%.
[06:00:43] <dbaupp> cmr: one only gets a hurray when one doubles the performance?
[06:00:51] <dbaupp> harsh task master
[06:01:09] <ChrisMorgan> Still significantly behind Go for concurrency >1, though; Go gets an immediate 2.1× for concurrency 2 while we're only getting 1.2×.
[06:01:17] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (Ping timeout)
[06:01:26] <cmr> dbaupp: learned from bstrie :P
[06:02:08] <tikue> ChrisMorgan: do you have any perception into the main cause of the poor scaling?
[06:02:16] <ChrisMorgan> dbaupp: I think hoorays are cheaper than hurrays.
[06:02:17] <dbaupp> ChrisMorgan: Go more-than-doubles?
[06:02:57] <ChrisMorgan> Yep. Absolutely consistent in my benchmarking, it's always been about 2.1×.
[06:03:16] *** Quits: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP) (Quit: Leaving.)
[06:03:17] <dbaupp> weird; I guess the task overhead is a lot with just one thread.
[06:03:30] <tikue> could be cache effects
[06:03:45] * ChrisMorgan hasn't tried to understand it
[06:04:08] *** Joins: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP)
[06:05:06] *** Quits: prooftechnique (prooftechn@moz-65B7D4EE.hsd1.vt.comcast.net) (Quit: )
[06:05:38] <ChrisMorgan> tikue: I haven't looked very deeply into it at all. The cause will be outside rust-http, though; it'll be in either the scheduler or the TcpStream/libuv implementation.
[06:07:03] <tikue> ChrisMorgan: yeah I dunno, but I don't find it terribly hard to believe
[06:08:16] <ChrisMorgan> Well, the rust-http server is simply accepting connections and immediately spawning new tasks for them. There's very little scope for poor scaling in rust-http itself.
[06:08:23] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[06:09:25] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[06:10:16] *** Quits: RageOfThou (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[06:11:07] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[06:12:54] <klutzy> ChrisMorgan: we are preparing website made with rust-http http://test.rust-kr.org/ :)
[06:13:14] <ChrisMorgan> klutzy: are you crazy? :-)
[06:14:35] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[06:15:21] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[06:15:30] <dbaupp> $ curl -I test.rust-kr.org => Server: Example
[06:15:36] <ChrisMorgan> klutzy: you're returning 200 OK for bad pages :-(
[06:15:41] <klutzy> ChrisMorgan: well, it runs on not-my-server :p
[06:16:04] <klutzy> ChrisMorgan: yep. a lot of things are to-dos
[06:16:25] <ChrisMorgan> (You're writing "No such page", it's not far from that to adding `response.status = NotFound`.)
[06:16:52] <ChrisMorgan> Well, you're more adventurous than I. I haven't written any genuine servers with rust-http yet.
[06:17:09] <klutzy> here's code https://github.com/klutzy/rust-kr-rust
[06:18:18] <cmr> jinja2.rs, heh
[06:18:38] <klutzy> it currently understands {{var}} only though
[06:19:52] *** Quits: genbattle (quassel@moz-44ABD640.jetstream.xtra.co.nz) (Ping timeout)
[06:21:41] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[06:22:58] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:24:31] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[06:24:57] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[06:25:02] <mark_edward> is this legal C ? `ip[-1]==ref[-1]`
[06:25:11] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[06:26:13] <strcat> mark_edward: yes
[06:26:22] <strcat>     The deﬁnition of the subscript operator [] is that E1[E2] is identical to (*((E1)+(E2))).
[06:26:26] * mark_edward grumbles
[06:26:29] <sfackler> you should probably feel bad doing it though
[06:26:38] * strcat knew it was legal but googled it to find a quote ;p
[06:26:42] <strcat> anyway a funny thing
[06:26:44] <strcat> 3["foo"]
[06:26:47] <strcat> is legal
[06:26:49] <strcat> well
[06:26:56] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[06:27:08] <strcat> it's a silly example ;p
[06:28:17] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[06:28:51] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[06:29:48] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[06:30:08] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[06:30:11] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[06:31:15] <ChrisMorgan> klutzy: I take it that your server is sitting behind a reverse proxy of some sort (I see the header Vary: Accept-Encoding without corresponding code)?
[06:31:51] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[06:32:29] <klutzy> ChrisMorgan: yep. rust server only binds 127.0.0.1, then it is provided via some proxy
[06:32:34] <ChrisMorgan> Very wise.
[06:32:44] <klutzy> I don't know details since it's not my server :)
[06:33:29] <Yurume> ChrisMorgan: it's my server
[06:33:40] <Yurume> it's a simple reverse proxy via Apache
[06:34:11] <klutzy> ChrisMorgan: anyway, have you met any error when non-local client connects to rust-http server?
[06:34:27] <klutzy> I thought I met it but I'm not sure
[06:34:28] <ChrisMorgan> I would not recommend using rust-http in production, though it should fare fairly well in general; but I would actively dissuade anyone from serving _directly_ through it.
[06:35:03] <ChrisMorgan> I can't think off-hand of any problems, so long as the interface bound is accessible from outside.
[06:35:41] <dbaupp> ChrisMorgan: do you use an `unsafe` in rust-http itself?
[06:35:44] <ChrisMorgan> A rust-http server is at present likely to be easily prone to a DoS attack
[06:35:44] <dbaupp> *any
[06:35:49] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[06:36:14] *** Quits: cubic (cubic@moz-80241A3A.mc.videotron.ca) (Connection reset by peer)
[06:37:20] <ChrisMorgan> dbaupp: not in rust-http itself (though one for a mutable global variable in the script that generates status.rs), but I'm about to commit two (uninitialised read/write buffers in BufferedStream) for performance.
[06:38:39] *** kimundi is now known as zz_kimundi
[06:41:39] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:41:59] <ChrisMorgan> dbaupp: I'm curious why you were asking.
[06:42:31] <dbaupp> ChrisMorgan: oh, just wondering
[06:42:54] *** Quits: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP) (Ping timeout)
[06:44:01] <dbaupp> ChrisMorgan: but mainly, a preponderance of unsafe code would indicate a large attack surface for C-style buffer overruns, etc.  (but then, it uses libstd, which has definitely not been verified)
[06:44:23] <Yurume> ChrisMorgan: I have set fairly low timeouts for proxies, and my Apache has a basic configuration for excessive requests, but well, I'm not sure as always.
[06:44:32] <ChrisMorgan> Good :-)
[06:44:35] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[06:44:36] <Yurume> at least it does not run on root ;)
[06:44:44] *** Joins: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP)
[06:46:50] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[06:48:02] <ChrisMorgan> dbaupp: yeah, the only unsafe there is is a very simple and obvious one for efficiency.
[06:49:39] <mark_edward> can anyone tell me what's going wrong ehre? https://gist.github.com/MarkJr94/7444763
[06:50:45] <dbaupp> mark_edward: wrap it in (), maybe
[06:50:58] <dbaupp> i.e. `(AARCH!(...) = ...)`
[06:52:27] *** Joins: brendan (brendaneic@1865C1F9.ECF92FCA.CDBA6951.IP)
[06:53:50] <sfackler> mark_edward: it may be https://github.com/mozilla/rust/issues/5941
[06:56:33] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[06:56:37] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[06:57:08] <ChrisMorgan> mark_edward: LHS can't be an expression; it must be a pattern.
[06:57:09] *** Quits: brendan (brendaneic@1865C1F9.ECF92FCA.CDBA6951.IP) (Quit: brendan)
[06:57:31] <dbaupp> ChrisMorgan: no
[06:57:40] <dbaupp> ChrisMorgan: this isn't a `let`
[06:57:48] <mark_edward> ChrisMorgan: this works:
[06:57:52] <mark_edward> rusti: struct P { p: int} (*({ ~P { p: 5} })).p = 5;
[06:57:52] <ChrisMorgan> Sorry, you're right.
[06:57:53] -rusti- ()
[06:58:15] <mark_edward> which is essentially what i'm trying to do
[06:58:24] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[06:58:31] <dbaupp> mark_edward: did you try wrapping it in parens?
[06:59:32] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[06:59:49] <mark_edward> dbaupp: ah yes, that seems to have done  it what exactly i'm doing is confusing me, but i'm am just a lowly porter
[07:03:06] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[07:03:42] <ChrisMorgan> klutzy: did you know http://test.rust-kr.org/%80 (i.e. invalid UTF-8 sequence in the title) will kill your poor server? (Of course, only that request will die, not the entire server.)
[07:03:58] <klutzy> yep :)
[07:07:03] *** Joins: ross (ross@moz-5EA04060.br.br.cox.net)
[07:07:33] *** Joins: victorporof (victorporo@9B024C76.73B1E539.9B1E38F4.IP)
[07:08:05] *** flaper87|afk is now known as flaper87
[07:13:35] *** Joins: Palmik (palmik@moz-DEC2AB.pks.muni.cz)
[07:14:11] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[07:17:20] *** Joins: fabiand (fabiand@moz-23FC164C.adsl.alicedsl.de)
[07:19:38] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[07:19:50] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[07:20:07] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[07:21:41] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[07:22:41] *** zz_kimundi is now known as kimundi
[07:23:10] *** Joins: Ms2ger (Ms2ger@moz-FED0935A.ugent.be)
[07:23:12] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[07:24:19] *** Joins: eddyb9 (eddy@A55FC9C7.8E4D8E22.4A6B528C.IP)
[07:25:10] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[07:25:51] *** Joins: notmatt (notmatt@moz-3C7AF18C.lightspeed.sntcca.sbcglobal.net)
[07:31:57] *** Quits: ktt3ja (Mibbit@moz-6B6EE8C0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[07:32:03] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[07:32:04] *** Joins: genbattle (quassel@moz-44ABD640.jetstream.xtra.co.nz)
[07:34:12] <sfackler> cmr: docs.octayn.net doesn't seem to be updating
[07:34:55] <cmr> sfackler: guh, libvirtd doesn't seem to be starting properly on boot.
[07:35:35] *** Quits: jgilbert (jgilbert@moz-4C088FCE.hsd1.ca.comcast.net) (Ping timeout)
[07:35:50] <cmr> sfackler: thanks for the heads up
[07:35:52] *** Joins: brson (brson@5AB4884B.FCC4549.14D5B978.IP)
[07:35:52] *** ChanServ sets mode: +ao brson brson
[07:36:05] <sfackler> np
[07:37:12] *** Quits: notmatt (notmatt@moz-3C7AF18C.lightspeed.sntcca.sbcglobal.net) (Connection reset by peer)
[07:37:36] *** Joins: pcwalton (pcwalton@5AB4884B.FCC4549.14D5B978.IP)
[07:37:36] *** ChanServ sets mode: +ao pcwalton pcwalton
[07:37:44] *** Joins: notmatt (notmatt@moz-3C7AF18C.lightspeed.sntcca.sbcglobal.net)
[07:38:36] *** Quits: mark_edward_ (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Ping timeout)
[07:39:44] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[07:39:57] *** Joins: azita (Azita@5AB4884B.FCC4549.14D5B978.IP)
[07:40:48] *** kimundi is now known as zz_kimundi
[07:42:11] <nlminhtl> which trait must I support for converting a generic type to float?
[07:42:55] *** Quits: anri (solancile@moz-E49E7C4B.hsd1.wa.comcast.net) (Ping timeout)
[07:43:57] <ChrisMorgan> ToPrimitive
[07:45:04] <nlminhtl> ChrisMorgan: Where is it?
[07:45:17] *** Joins: jdm (jdm@5AB4884B.FCC4549.14D5B978.IP)
[07:45:17] *** ChanServ sets mode: +o jdm
[07:45:20] <nlminhtl> I have not found in the std documentation.
[07:45:30] <ChrisMorgan> http://static.rust-lang.org/doc/master/std/num/trait.ToPrimitive.html
[07:46:40] <ChrisMorgan> I'm assuming you're using master there rather than 0.8.
[07:46:53] <nlminhtl> ChrisMorgan: no :)
[07:47:02] <ChrisMorgan> For 0.8, http://static.rust-lang.org/doc/0.8/std/num/trait.NumCast.html
[07:47:32] <ChrisMorgan> (Search keyword I used for 0.8 where I couldn't remember what ToPrimitive had been called before: `to_f32`)
[07:47:33] *** Joins: alonlevy (alon@moz-74377C14.bb.netvision.net.il)
[07:47:48] *** Quits: genbattle (quassel@moz-44ABD640.jetstream.xtra.co.nz) (Ping timeout)
[07:47:50] *** Joins: brendan (brendaneic@1865C1F9.ECF92FCA.CDBA6951.IP)
[07:49:48] <nlminhtl> ChrisMorgan: hm, doesn't work https://gist.github.com/Ignotus/2918b81b981295d087a8
[07:50:33] <ChrisMorgan> nlminhtl: `as float` won't work, you need to be using the appropriate method.
[07:50:56] <ChrisMorgan> That is, .to_float().
[07:51:22] *** Quits: brson (brson@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[07:52:04] <ChrisMorgan> By the way, the `float` data type is also obsolete and removed in master. Use f32 or f64 instead.
[07:54:24] <nuts> Hi, It's possible to convert *c_long (issued from a C library) into an std::vec?
[07:54:46] *** zz_kimundi is now known as kimundi
[07:54:56] <strcat> nuts: does it give you a size?
[07:55:21] <strcat> and... is it allocated with malloc, or is it a view?
[07:55:38] <nuts> yes, I know the size
[07:55:40] *** Quits: azita (Azita@5AB4884B.FCC4549.14D5B978.IP) (Quit: azita)
[07:55:43] <nuts> it's a view
[07:56:11] <strcat> nuts: well, a slice is a ptr and a length
[07:56:28] <strcat> in master, it's (ptr_to_start, element_length)
[07:56:35] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[07:56:47] <strcat> so, you can just construct a std::unstable::raw::Slice and then transmute it to &[T]
[07:56:58] <strcat> but you need to give it a real lifetime for this to be safe
[07:57:29] <strcat> so, if the C function is essentially returning a view into a ptr you pass in, you need to mark that with a lifetime and the ret value with that lifetime
[07:57:48] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[07:59:04] <nuts> I don't find std::unstable into the doc
[07:59:05] <nuts> http://static.rust-lang.org/doc/master/std/index.html
[07:59:25] <nuts> ok, for the lifetime
[08:00:01] <nuts> the lifetime of the ptr is only in my unsafe block, I did not need it outside
[08:01:15] *** Quits: dumitru (dgherman@moz-7C253BEB.getcadre.com) (Ping timeout)
[08:01:36] *** Joins: dumitru (dgherman@moz-7C253BEB.getcadre.com)
[08:01:56] *** Joins: mib_4w12fx (Mibbit@moz-D3227443.dip0.t-ipconnect.de)
[08:02:22] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[08:02:33] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[08:03:07] <dbaupp> nuts: http://static.rust-lang.org/doc/master/std/vec/raw/fn.buf_as_slice.html works too
[08:03:26] *** Quits: meTaAU (Mibbit@moz-CDAE1865.lns20.per1.internode.on.net) (Quit: http://www.mibbit.com ajax IRC Client)
[08:04:23] *** Quits: mib_4w12fx (Mibbit@moz-D3227443.dip0.t-ipconnect.de) (Quit: http://www.mibbit.com ajax IRC Client)
[08:10:02] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[08:11:28] <nuts> dbaupp: thanks
[08:11:34] <nuts> that works with that
[08:11:40] <kmc> it would be cool to have a lightweight way to wrap an imported C function, which turns raw pointers into borrowed pointers which are at least required to outlast the function call
[08:11:47] <nuts> strcat: thanks too
[08:12:00] <kmc> thinking of how to catch the common error of c_function(foo.with_c_str(|x| x))
[08:12:19] <cmr> kmc: imo with_c_str should just give the closure a &u8
[08:12:38] <cmr> or whatever type it is, & and not *
[08:12:42] <strcat> kmc: mark the C function as taking a borrowed pointer if it's not allowed to be NULL
[08:12:56] <strcat> imo that's the way to go
[08:13:02] <kmc> that'll just work?
[08:13:05] <cmr> yep
[08:13:09] <kmc> cool
[08:13:36] <strcat> kmc: also, if a C function returns something via malloc(), you could mark it as returning a struct with a priv field containing a malloc'ed ptr + a dtor
[08:13:43] <kmc> yes
[08:13:52] <kmc> or if I want to play fast and loose, transmute it to ~T ;P
[08:13:59] <strcat> kmc: well, that may break ;)
[08:14:00] <kmc> but we might not be using the same allocator, etc
[08:14:02] <kmc> yep
[08:14:14] <strcat> kmc: I'm somewhat determined to push for ~T not allocating for small types
[08:14:28] <cmr> strcat: hm, that'd be neat
[08:14:33] <strcat> as in types no larger than a ptr
[08:14:48] <strcat> and switch the tydesc bool to an enum (eventually dropping the managed one and turning it back to a bool)
[08:14:59] <strcat> well
[08:15:02] <strcat> actually you just need size.
[08:15:04] <strcat> so nvm
[08:15:06] <strcat> tydesc irrelevant ;p
[08:15:13] <strcat> (size is already there)
[08:15:16] *** Quits: tikue (tkuehn@CFD7FEA6.E6CB677E.689607DE.IP) (Quit: tikue)
[08:17:45] *** Joins: brson (brson@5AB4884B.FCC4549.14D5B978.IP)
[08:17:45] *** ChanServ sets mode: +ao brson brson
[08:19:17] *** Quits: alonlevy (alon@moz-74377C14.bb.netvision.net.il) (Ping timeout)
[08:20:17] <nlminhtl> Can I tell in the trait implementation that my class also supports another trait?
[08:20:47] *** Quits: mcarberry (mcarberry@moz-BE1C9F3F.lightspeed.frokca.sbcglobal.net) (Ping timeout)
[08:21:42] <dbaupp> nlminhtl: you can use other trait implementations when you're impl'ing a trait for a type... is that what you mean?
[08:21:50] <nuts> And how I can manipulate an * * c_schar issued from a c library too?
[08:22:06] <strcat> nlminhtl: traits can inherit from other traits, and any type implementing the trait implements any traits they inherit from
[08:22:30] <nuts> in that each * c_schar contain a string
[08:22:52] <nlminhtl> dbaupp: no. I'm calling one method from another trait from one trait. And compiler tell me that this method is not implemented
[08:23:05] <dbaupp> nlminhtl: oh, in a default method?
[08:23:48] <nlminhtl> dbaupp: https://gist.github.com/Ignotus/6e5d8ef3671681c2ca14
[08:23:50] <Ms2ger> c_schar?
[08:24:00] *** Joins: sigma (sigma@moz-39E40618.range86-143.btcentralplus.com)
[08:24:47] <dbaupp> Ms2ger: signed char
[08:24:50] <nuts> yep
[08:24:56] <nuts> it's a signed char
[08:24:57] <dbaupp> nlminhtl: oh, you need to import the trait
[08:25:10] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[08:25:14] <dbaupp> nlminhtl: i.e. have it in scope unqualified, to be able to call methods
[08:26:39] <nlminhtl> dbaupp: can you give me an example?
[08:26:49] *** Quits: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP) (Ping timeout)
[08:27:33] <nuts> dbaupp: I tried to build a vec<*c_schar>, but that did not work
[08:29:22] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[08:29:51] <dbaupp> nlminhtl: `use vertex_traits::Equation;` at the top of the file
[08:30:02] <dbaupp> nuts: you mean ~[*c_shar]?
[08:30:25] *** Quits: notmatt (notmatt@moz-3C7AF18C.lightspeed.sntcca.sbcglobal.net) (Client exited)
[08:30:27] <dbaupp> nuts: what are you trying to do? take the **c_schar that a C function gives you and convert it into... ?
[08:31:08] <nlminhtl> dbaupp: hm, like a prototype declaration in C++ :)
[08:31:18] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[08:31:34] *** Joins: Ferreus (ferreus@moz-8E678950.dip0.t-ipconnect.de)
[08:32:09] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[08:32:50] <cmr> Except nothing like it in any way besides that it's at the top of the file!
[08:32:58] <nuts> dbaupp: I've **c_schar, I try to make a ~[~str] from that, I think it can do in 2 steps
[08:33:24] <nuts> **c_schar to ~[*c_schar] to ~[str] or something like thath
[08:33:47] <nlminhtl> dbaupp: doesn't work. src/vertex2d.rs:1:4: 1:17 error: unresolved import. maybe a missing `extern mod vertex_traits`?
[08:33:48] <cmr> nuts: you want &[*c_schar], not ~[*c_schar]
[08:34:11] <dbaupp> nlminhtl: hm, maybe need `use self::vertex_traits::Equation;` if it's not the crate root
[08:34:47] <nuts> cmr: yes sorry
[08:35:00] <dbaupp> nuts: it's probably easiest to go **c_schar -> ~[~str] in "one" step, i.e. iterate over the *c_schar's converting them to a string, pushing them to a vector
[08:35:19] <cmr> nuts: and from there you can just do that_slice.iter().map(|x| from_c_str(x)).to_owned_vec()
[08:35:37] <cmr> but yeah, what dbaupp said is undoubtedly simpler :)
[08:35:48] <dbaupp> no, cmr's correct
[08:36:08] <nuts> how I can iterate into my **c_schar ?
[08:36:10] <dbaupp> since you know the length, you can get a &[*c_schar] with buf_as_slice
[08:36:21] <dbaupp> and then do the iteration cmr suggests
[08:36:36] <nuts> oh ok
[08:36:41] <dbaupp> nuts: http://static.rust-lang.org/doc/master/std/ptr/fn.array_each_with_len.html if you actually want to iterate on the **c_schar directly, fwiw.
[08:37:03] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[08:39:27] <Ms2ger> "SAFETY NOTE: Pointer-arithmetic. Dragons be here."
[08:39:28] <Ms2ger> Heh
[08:41:08] *** pmoore|away is now known as pmoore
[08:41:47] <eddyb9> at least you can cage dragons in their rusty chains
[08:42:10] <nlminhtl> dbaupp: ToPrimitive is only for standard types, what about generic types, how can I convert a float type to generic T?
[08:42:25] *** Quits: Ms2ger (Ms2ger@moz-FED0935A.ugent.be) (Ping timeout)
[08:42:46] <dbaupp> nlminhtl: are you using master or 0.8?
[08:42:52] <nlminhtl> 0.8
[08:44:03] <dbaupp> I don't know if there is one
[08:44:17] <dbaupp> if it exists, it'll be here: http://static.rust-lang.org/doc/0.8/std/num/index.html 
[08:44:40] <dbaupp> (and, I can't remember what 0.8 had at all.)
[08:44:46] <nlminhtl> dbaupp: what about master?
[08:45:02] <dbaupp> FromPrimitive
[08:45:08] <dbaupp> http://static.rust-lang.org/doc/master/std/num/trait.FromPrimitive.html
[08:45:14] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[08:45:38] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[08:46:03] <dbaupp> nlminhtl: (btw, if you're on linux, there's nightly packages for some distros: https://github.com/mozilla/rust/wiki/Doc-packages,-editors,-and-other-tools )
[08:46:54] <nlminhtl> dbaupp: I'm packaging rust for openSUSE https://build.opensuse.org/package/show/home:Ignotusp:devel:languages:rust/rust :)
[08:47:34] <dbaupp> nlminhtl: oh, cool :)
[08:47:56] <dbaupp> nlminhtl: feel free to add it to that list
[08:48:17] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[08:48:37] <dbaupp> (assuming you've got it organised such that others can use it reliably, of course.)
[08:48:41] <nlminhtl> dbaupp: does master have the same source archive like 0.8?
[08:48:58] <nlminhtl> or I must clone it from github for the latest version
[08:49:15] <nlminhtl> dbaupp: I mean some internal release after 0.8
[08:50:00] <cmr> nlminhtl: need to lcone
[08:50:03] <cmr> clone*
[08:50:17] *** Quits: rossm (rossm@moz-EE3BB1DC.br.br.cox.net) (Ping timeout)
[08:50:48] <dbaupp> (there are no internal releases btw, master is the development branch and tests run for every addition to it, so in theory it's always stable.)
[08:50:56] <nlminhtl> dbaupp: openSUSE package has some problem that needs to fix before I can push it to the official repository. For example placing rust libraries for 64-bit in /usr/lib64 and /usr/lib64/*/lib64/* but not in /usr/lib and /usr/lib/*/lib/*
[08:51:12] <eddyb9> nlminhtl: whoa whoa
[08:51:15] <dbaupp> nlminhtl: oh, do we do /usr/lib always?
[08:51:30] <nlminhtl> eddyb9: ?
[08:51:34] <eddyb9> nlminhtl: I have a rust-git package, which I haven't had time to polish
[08:51:58] <eddyb9> and to run a cron job to update it nightly
[08:52:48] <nlminhtl> eddyb9: hm,  cool.  this one? https://build.opensuse.org/package/view_file/home:eddybb:devel:languages:rust/rust-git/rust-git.spec?expand=1
[08:52:59] <eddyb9> yupp
[08:53:03] <nlminhtl> dbaupp: at this moment yes
[08:53:04] <nlminhtl> :)
[08:53:10] <eddyb9> we should merge efforts :D
[08:53:21] <eddyb9> nlminhtl: is yours a stable release one?
[08:53:40] <nlminhtl> dbaupp: so there could be some conflicts when you are going to install both 32 and 64 versions
[08:53:44] <nlminhtl> eddyb9: yeah
[08:54:05] <eddyb9> dbaupp: and ./configure doesn't accept some generic flags, so %configure in rpm spec fails
[08:54:07] <dbaupp> nlminhtl: does `./configure --libdir=<whatever>` work?
[08:54:09] <nlminhtl> eddyb9: yes, we should :)
[08:54:28] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[08:54:39] <nlminhtl> dbaupp: rust use another related libraries in their source folders
[08:54:40] *** Quits: boredomist (ruqs@B16F530C.DC641F2C.BCAEBB33.IP) (Ping timeout)
[08:55:08] <nlminhtl> dbaupp: so I cannot affect on them by only this one
[08:55:12] *** Joins: mcarberry (mcarberry@moz-BE1C9F3F.lightspeed.frokca.sbcglobal.net)
[08:56:02] <nlminhtl> eddyb9: please add rust to the conflict packages in your spec :)
[08:56:12] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[08:57:58] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Ping timeout)
[08:58:18] *** Joins: mib_93lxek (Mibbit@17C6E360.77E50CE9.6525FFAA.IP)
[08:58:36] *** Quits: mib_93lxek (Mibbit@17C6E360.77E50CE9.6525FFAA.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:00:53] *** Joins: meTaAU (admin@moz-CDAE1865.lns20.per1.internode.on.net)
[09:01:19] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[09:02:26] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[09:02:46] <nlminhtl> dbaupp: and also, will changes in the llvm fork be merged to the main project?
[09:03:03] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[09:03:04] <dbaupp> nlminhtl: https://github.com/mozilla/rust/issues/4259
[09:03:20] <dbaupp> (yes, it's wanted; and dropping segmented stacks will likely make it easier.)
[09:03:30] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[09:05:50] * nlminhtl must go to work. *BYE*
[09:05:56] *** Quits: nlminhtl (ignotus@moz-BA3DE7EF.volia.net) (Quit: Konversation terminated!)
[09:06:36] *** Joins: Ms2ger (Ms2ger@moz-FED0935A.ugent.be)
[09:06:51] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[09:08:19] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[09:09:28] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[09:10:03] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[09:10:06] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Quit: )
[09:11:34] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[09:11:38] *** Joins: tulloch (tulloch@moz-BC895BC5.damtp.cam.ac.uk)
[09:12:00] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[09:12:41] *** Joins: avsej (avsej@DF1824D5.EFF97412.48F984E6.IP)
[09:12:51] *** Quits: FreeFull (freefull@133CB72F.B3D53FFC.AE02ECA4.IP) (Quit: )
[09:17:01] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[09:17:17] *** Quits: canhtak (canhtak@moz-24D0A1FD.wl.t.ulaval.ca) (Quit: canhtak)
[09:24:55] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[09:24:56] *** Quits: sigma (sigma@moz-39E40618.range86-143.btcentralplus.com) (Ping timeout)
[09:24:57] *** Joins: onix (Mibbit@545C3BFB.DC42D29D.13B3C60E.IP)
[09:24:59] *** Joins: alonlevy (alon@moz-B0E66DB7.static.bezeqint.net)
[09:25:31] *** pmoore is now known as pmoore|away
[09:25:55] *** Quits: tulloch (tulloch@moz-BC895BC5.damtp.cam.ac.uk) (Quit: leaving)
[09:26:01] *** Joins: tulloch (tulloch@moz-BC895BC5.damtp.cam.ac.uk)
[09:26:17] *** Quits: tulloch (tulloch@moz-BC895BC5.damtp.cam.ac.uk) (Quit: leaving)
[09:26:22] *** Joins: tulloch (tulloch@moz-BC895BC5.damtp.cam.ac.uk)
[09:27:46] *** jdm is now known as jdm|f00d
[09:27:51] *** Joins: sigma (sigma@moz-39E40618.range86-143.btcentralplus.com)
[09:27:57] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[09:30:57] *** Quits: cdidd (cdidd@moz-4BD645F1.broadband.corbina.ru) (Ping timeout)
[09:32:27] *** Quits: onix (Mibbit@545C3BFB.DC42D29D.13B3C60E.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:34:01] *** pmoore|away is now known as pmoore
[09:34:27] *** Parts: pmoore (pmoore@moz-DB4A9C19.scl3.mozilla.com) ()
[09:35:54] *** Joins: genbattle (quassel@moz-44ABD640.jetstream.xtra.co.nz)
[09:36:05] *** Quits: brendan (brendaneic@1865C1F9.ECF92FCA.CDBA6951.IP) (Quit: brendan)
[09:36:14] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[09:38:17] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[09:38:26] *** Quits: genbattle (quassel@moz-44ABD640.jetstream.xtra.co.nz) (Quit: http://quassel-irc.org - Chat comfortably. Anywhere.)
[09:38:28] *** Joins: genbattle (quassel@moz-44ABD640.jetstream.xtra.co.nz)
[09:38:34] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[09:38:48] *** Quits: eddyb9 (eddy@A55FC9C7.8E4D8E22.4A6B528C.IP) (Quit: Leaving)
[09:40:52] *** Joins: notmatt (notmatt@moz-3C7AF18C.lightspeed.sntcca.sbcglobal.net)
[09:42:41] *** Quits: notmatt (notmatt@moz-3C7AF18C.lightspeed.sntcca.sbcglobal.net) (Ping timeout)
[09:45:29] *** Joins: brendan (brendaneic@1865C1F9.ECF92FCA.CDBA6951.IP)
[09:45:36] *** Joins: cdidd (cdidd@moz-D6C165C4.broadband.corbina.ru)
[09:45:36] *** Joins: andre (andre@CA528A4A.45A4338E.8EE27E6.IP)
[09:45:53] <cmr> dbaupp: do you remember where the metrics data lives?
[09:46:29] *** Joins: amro (quassel@CC16DC52.8AAAF769.FAAB0799.IP)
[09:47:26] *** Quits: genbattle (quassel@moz-44ABD640.jetstream.xtra.co.nz) (Client exited)
[09:47:29] <cmr> http://static.rust-lang.org/build-metrics/ccadbd3b7c936dacab69856cc3963aad477c7f06/auto-linux-64-opt/linux1/check-stage2-T-x86_64-unknown-linux-gnu-H-x86_64-unknown-linux-gnu-std-metrics.json
[09:48:19] <cmr> brson: So, the first thing to getting the metrics to be discoverable is enabling directory listing for build-metrics
[09:48:59] <cmr> Actually wait
[09:49:06] <cmr> I can't meaningfully use this data
[09:49:10] <cmr> buildbots are too noisy
[09:49:45] <cmr> Well, the bench runner does a good job of normalizing.
[09:50:10] *** Quits: amro (quassel@CC16DC52.8AAAF769.FAAB0799.IP) (Ping timeout)
[09:51:59] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Ping timeout)
[09:51:59] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[09:52:11] *** Joins: d3xter (sinz@moz-8A32107B.nat.uclv.net)
[09:52:15] <d3xter> hey guys
[09:52:55] <d3xter> i've got a struct with a ~str in it. now i've created a getter for it. is it the rust way to just ~str.clone() and return another ~str?
[09:53:22] <cmr> d3xter: Why do you have a getter?
[09:54:16] <cmr> (The answer to the actual question is no: return a reference to the inner string: &str. It's not mutable)
[09:54:30] <d3xter> cmr: data encapsulation
[09:55:31] <cmr> d3xter: that's not really a good reason unless you have a specific reason the string needs to be private (ie, invariants that need to be maintained)
[09:55:45] <d3xter> cmr: but "self.name" doesnt work: "expected &str, but found ~str"
[09:55:57] <d3xter> cmr: well, i've got a oop background, so i'm used to this stuff :)
[09:55:59] <cmr> d3xter: &*self.name
[09:56:09] <cmr> d3xter: or, rather, self.name.as_slice()
[09:58:22] *** Joins: amro (quassel@CC16DC52.8AAAF769.FAAB0799.IP)
[10:00:22] <d3xter> cmr: &*self.name doesnt work, "type ~str cannot be dereferenced", as_slice() says "borrowed pointer doesnt live long enough"?
[10:00:48] <cmr> d3xter: right. Your method needs to look something like fn get_foo<'a>(&self) -> &'a str
[10:01:00] <cmr> &'a self, rather
[10:01:23] <cmr> Otherwise the compiler can't assert that the reference doesn't outlive the thing it references, which would create memory unsafety
[10:01:34] <d3xter> cmr: oh ok, learning lifetimes is still on my todo list :)
[10:02:23] <d3xter> cmr: but why doesnt dereferening of a owned str not work?
[10:02:36] <Ms2ger> There's not such thing as a 'str'
[10:02:42] <Ms2ger> Only ~str / &str
[10:02:51] <Ms2ger> s/not/no/
[10:02:55] <d3xter> Ms2ger: "owned str"
[10:03:02] <Ms2ger> Right
[10:03:10] <Ms2ger> So what type is *self.name?
[10:04:04] <d3xter> self is ~Task and name is ~str
[10:04:49] <Ms2ger> So |self.name| is of type ~str
[10:04:58] <Ms2ger> What is the type of |*self.name|?
[10:05:12] *** Quits: amro (quassel@CC16DC52.8AAAF769.FAAB0799.IP) (Client exited)
[10:05:16] *** Joins: amro (quassel@CC16DC52.8AAAF769.FAAB0799.IP)
[10:06:26] *** Quits: meTaAU (admin@moz-CDAE1865.lns20.per1.internode.on.net) (Ping timeout)
[10:06:37] *** Quits: santiago (santiago@moz-8ADE82B4.socal.res.rr.com) (Quit: Textual IRC Client: http://www.textualapp.com/)
[10:06:42] <d3xter> Ms2ger: how can i figure this out?
[10:06:51] *** Joins: meTaAU (admin@moz-A89094B0.lns20.per1.internode.on.net)
[10:07:05] <Ms2ger> You don't, because there's no type that it *can* be
[10:07:32] <d3xter> Ms2ger: right, so is there any way to get &str from ~str?
[10:07:41] <cmr> d3xter: call .as_slice() on it
[10:07:43] <Ms2ger> .to_owned(), I believe
[10:07:45] <Ms2ger> Er
[10:07:45] *** jdm|f00d is now known as jdm
[10:07:51] <cmr> Ms2ger: that's the other way around :p
[10:07:54] <Ms2ger> Yes, that way, so as_slice
[10:08:37] <d3xter> cmr, Ms2ger: thanks
[10:08:47] <Ms2ger> Np
[10:08:50] <dbaupp> cmr, brson: the easiest way is probably to just run `zip metrics.zip *.json` on the buildbot, and push metrics.zip
[10:09:11] <dbaupp> (i.e. give it a fixed address in its subfolder)
[10:09:32] *** Joins: fyolnish_ (fyolnish@moz-BE2BAE5B.miinet.jp)
[10:09:49] <dbaupp> cmr: and, yes, the data will likely be most useful in aggregate looking for "long term" trends, rather than individual commits.
[10:10:22] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[10:11:16] *** Quits: fyolnish_ (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[10:12:02] *** Quits: indutny (indutny@moz-49D42D15.c.ircrelay.com) (Quit: IRCRelay - http://ircrelay.com)
[10:13:32] *** Quits: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP) (Quit: Leaving.)
[10:14:12] *** Joins: azita (Azita@5AB4884B.FCC4549.14D5B978.IP)
[10:14:23] *** Joins: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP)
[10:14:55] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[10:15:17] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[10:15:25] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[10:17:10] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[10:18:23] *** Joins: dherman (dherman@5AB4884B.FCC4549.14D5B978.IP)
[10:18:23] *** ChanServ sets mode: +ao dherman dherman
[10:18:50] *** Joins: pmoore (pmoore@moz-DB4A9C19.scl3.mozilla.com)
[10:19:18] <d3xter> another question: if i've got a method "fn getName<'a>(&'a self) -> &'a str", is the lifetime 'a used from self?
[10:19:43] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[10:20:29] <cmr> d3xter: The lifetime is specified by the caller, and is the same for both self and the return value.
[10:20:43] *** Joins: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP)
[10:21:21] <d3xter> cmr: thanks
[10:22:25] *** Joins: MrOrdinaire (Mibbit@5C68C0A1.6BCC7DAD.FD383126.IP)
[10:23:14] *** Quits: MrOrdinaire (Mibbit@5C68C0A1.6BCC7DAD.FD383126.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:23:31] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[10:28:26] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[10:28:31] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[10:28:31] *** ChanServ sets mode: +o pnkfelix
[10:30:07] *** Quits: d3xter (sinz@moz-8A32107B.nat.uclv.net) (Ping timeout)
[10:30:42] *** pmoore is now known as pmoore|away
[10:34:26] *** Quits: amro (quassel@CC16DC52.8AAAF769.FAAB0799.IP) (Ping timeout)
[10:35:13] *** pmoore|away is now known as pmoore
[10:36:09] *** Quits: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP) (Ping timeout)
[10:36:34] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[10:37:48] *** Joins: d3xter (sinz@moz-8A32107B.nat.uclv.net)
[10:39:24] *** Quits: m_kato (m_kato@moz-C286AD9A.bitcat.net) (Quit: Leaving...)
[10:39:25] *** Quits: Ms2ger (Ms2ger@moz-FED0935A.ugent.be) (Ping timeout)
[10:40:02] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[10:44:41] *** Quits: d3xter (sinz@moz-8A32107B.nat.uclv.net) (Ping timeout)
[10:48:54] *** Joins: Ms2ger (Ms2ger@moz-2EC3C8F8.ugent.be)
[10:50:37] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[10:54:34] *** Joins: mib_0vu6za (Mibbit@53C8C852.E9399114.DDE7AB2D.IP)
[10:55:22] *** Quits: mib_0vu6za (Mibbit@53C8C852.E9399114.DDE7AB2D.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:59:11] <dbaupp> klutzy: btw, did you know about https://github.com/erickt/rust-mustache ? (for rust-kr)
[10:59:12] *** kimundi is now known as zz_kimundi
[10:59:52] <klutzy> dbaupp: first contact; looks cool :D
[11:02:25] <dbaupp> klutzy: (I have a PR updating it to work with master, fwiw.)
[11:03:53] *** Quits: tulloch (tulloch@moz-BC895BC5.damtp.cam.ac.uk) (Ping timeout)
[11:04:41] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[11:05:04] *** Joins: indutny (indutny@moz-49D42D15.c.ircrelay.com)
[11:05:59] *** Joins: tulloch (tulloch@moz-BC895BC5.damtp.cam.ac.uk)
[11:07:31] *** Joins: d3xter (sinz@moz-4B85799E.atmpu0031.highway.a1.net)
[11:10:07] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[11:10:55] <dbaupp> gah :( yet another blog post that says "Rust has no shared memory"
[11:11:15] <cmr> dbaupp: link?
[11:11:17] *** Quits: d3xter (sinz@moz-4B85799E.atmpu0031.highway.a1.net) (Ping timeout)
[11:11:29] <dbaupp> cmr: http://cananian.livejournal.com/69096.html kinda old
[11:11:43] <dbaupp> cmr: (and looks stained by inexperience)
[11:12:16] <cmr> very stained
[11:12:52] *** Quits: StarLight (StarLight@moz-36A78DE0.dynamic.avangarddsl.ru) (Connection reset by peer)
[11:17:31] *** Joins: StarLight (StarLight@moz-622CB397.pppoe.avangarddsl.ru)
[11:17:45] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[11:18:13] <benh> http://cananian.livejournal.com/68747.html huh, re: the last paragraph
[11:18:56] *** Quits: dherman (dherman@5AB4884B.FCC4549.14D5B978.IP) (Quit: dherman)
[11:20:05] *** Joins: fyolnish (fyolnish@moz-5F25D3C.uqwimax.jp)
[11:20:28] <eddyb> livejournal?
[11:20:40] * strcat laughs at anyone who says you can understand *memory accesses* by looking at C code
[11:20:43] * eddyb checks the date. yupp, still 2013. weird
[11:20:46] <strcat> it doesn't map to modern hardware at all
[11:21:09] <strcat> callgrind can certainly guess how it maps to memory accesses... I don't know how accurate it is ;p
[11:21:28] <eddyb> strcat: one of these days I'll put my intel manuals to good use
[11:21:36] <cmr> eddyb: you have hard copies!?
[11:21:47] <strcat> eddyb: they move too fast ;p
[11:21:53] *** Quits: fyolnish (fyolnish@moz-5F25D3C.uqwimax.jp) (Ping timeout)
[11:21:54] <eddyb> cmr: they were free :)
[11:22:04] <strcat> for example, unaligned memory access and unaligned vectors are no slower than aligned ones now
[11:22:07] <eddyb> (they still may be)
[11:22:26] * cmr just uses the pdfs
[11:22:47] <strcat> they totally screwed the perf of my laptop with their C state patches though :s
[11:22:58] <benh> I kinda sympathized with the post's complaints and apprehensions :(
[11:23:06] <benh> too bad he didn't offer easy solutions though!
[11:23:47] <strcat> benh: a lot of it doesn't make much sense to me
[11:23:52] <strcat> just seems like inexperience with the language
[11:25:07] <cmr> He's also writing a post in October about a language that no longer exists
[11:25:17] <benh> I'm just hesitant to write it off as someone else's inexperience when it could be my own stockholm syndrome :)
[11:25:19] <cmr> (6-month old Rust)
[11:25:21] <dbaupp> his turtlescript thingo still uses mut on struct fields
[11:25:29] <eddyb> (I thought about JS at a lower level, but at the same time I wanted a language more powerful than C++, and preferably flexible in a few ways)
[11:25:38] <cmr> Rust is a *lot* different and nicer now.
[11:25:44] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[11:26:02] <eddyb> (nevermind me)
[11:27:32] <benh> dbaupp: Wasn't there a post about emulating mut on struct fields as a desirable idiom on the mailing list recently?
[11:27:46] <dbaupp> benh: kinda different
[11:27:53] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[11:28:11] *** zz_kimundi is now known as kimundi
[11:28:30] <dbaupp> benh: the old mut would allow you to mutate the struct in any position, the proposed one is essentially just having fields that are constant after construction
[11:28:44] <dbaupp> i.e. a field is mutable if the struct is mutable and the field is marked with `mut`
[11:29:11] <dbaupp> (or, conversely, a field marked with <some-new-keyword-like-immut> is never mutable, even if the struct is mutable.)
[11:29:27] <dbaupp> ("the old mut would allow you to mutate the struct *field* in any position")
[11:29:48] <cmr> It also caused endless pain in the soundness of the type system, didn't it?
[11:30:01] <dbaupp> field-level mutability? yeah
[11:30:20] *** Joins: dherman (dherman@5AB4884B.FCC4549.14D5B978.IP)
[11:30:20] *** ChanServ sets mode: +ao dherman dherman
[11:30:20] <benh> oh, i thought it was to have mutability in certain fields in an immutable struct inside an Rc
[11:30:41] <dbaupp> benh: there's `Mut<T>` too, but that essentially acts like @mut without the @
[11:30:46] <geal> comparing rust with C on local memory access is unproductive. If someone really wants the performance and wants to control everything, yes, they could use C, or even assembly. But properties of the language, like default immutability in a concurrent or parallel setting can make the code faster, just because you don't need to lock, or invalidate CPU cache lines
[11:31:03] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[11:31:15] <strcat> geal: you can do anything you would do in C in rust
[11:31:22] <strcat> there's unsafe code
[11:31:30] <dbaupp> cmr: field mut was half the cause of the INHTPAMA thing as I understand it ( http://smallcultfollowing.com/babysteps/blog/2012/11/18/imagine-never-hearing-the-phrase-aliasable/ )
[11:31:30] <strcat> rust has packed structs, standard C doesn't
[11:31:32] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[11:31:45] <strcat> rust is missing alignas, and enums without tags
[11:31:50] <strcat> but not much else
[11:31:56] <strcat> (and no one uses C11 anyway)
[11:32:15] <geal> strcat: exactly. But I don't want to, now that I know rust :p
[11:32:30] <geal> whops, that's not what I wanted to say
[11:32:30] <strcat> and it does have shared memory in the stdlib, just not implementations of concurrent data structures *yet*
[11:32:52] <strcat> (arcs and mutable arcs)
[11:33:01] <geal> I meant, I don't want do do C, now that I know rust ;)
[11:33:04] <strcat> ah
[11:33:20] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[11:33:34] *** Quits: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net) (Connection reset by peer)
[11:33:47] <strcat> I think rust is very appealing to someone who really knows their way around C++ (especially C++11) but some C programmers who don't like C++ will probably not like rust for many of the same reasons
[11:34:50] <Ms2ger> (Oh no, you can declare variables when you use them!)
[11:34:56] <strcat> it permits building higher-level abstractions before needing to trade off performance... so it's idiomatic to use them, and it's not as clear what's going on in terms of machine code
[11:35:06] <strcat> Ms2ger: well, you can in C too
[11:35:08] *** Quits: azita (Azita@5AB4884B.FCC4549.14D5B978.IP) (Quit: azita)
[11:35:15] <strcat> C11 == ISO/ANSI C ;p
[11:35:16] <eddyb> I've always liked the freedom of expression in C++, and all the abstractions that C just can't have :D
[11:35:22] <strcat> C89/C99 are retracted standards! >:)
[11:35:23] *** Quits: jdm (jdm@5AB4884B.FCC4549.14D5B978.IP) (Quit: Lost terminal)
[11:35:38] <Ms2ger> strcat, okay, in C I can use in MSVC :)
[11:35:42] <eddyb> but I want just a little more metaprogramming in Rust to be happy
[11:35:53] <eddyb> Ms2ger: that can burn
[11:36:04] <strcat> Ms2ger: the libav devs made https://github.com/libav/c99-to-c89/ for that ;p
[11:36:23] <Ms2ger> Heh
[11:36:41] <strcat> but LLVM is going to be compatible with MSVC so... should become obsolete
[11:37:08] <cmr> So I have a HashMap<int, ~[T]>. If there is a value for a given key I want to insert this item into that vector, otherwise I want to create a new vector and insert it in that position. Any easy way to do this? Matching on find_mut obviously doesn't work because then I can't insert in the case of None
[11:37:12] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[11:37:15] *** Quits: pcwalton (pcwalton@5AB4884B.FCC4549.14D5B978.IP) (Quit: pcwalton)
[11:37:31] *** Joins: tikue (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[11:37:36] <strcat> cmr: the closure ones?
[11:37:50] <strcat> hm
[11:38:10] <dbaupp> cmr: .mangle does everything
[11:38:26] <cmr> dbaupp: hah, somehow I missed that one
[11:39:02] <eddyb> is there no equivalent to the std::map operator[]/insert() thing?
[11:39:04] <dbaupp> hm, why does hashmap still have internal iterators .each_key and .each_value
[11:39:08] *** Quits: dherman (dherman@5AB4884B.FCC4549.14D5B978.IP) (Quit: dherman)
[11:39:08] <dbaupp> ?
[11:39:14] <strcat> eddyb: rust doesn't have ctors, so no equivalent to C++ operator[]
[11:39:46] <strcat> (C++ operator[] on maps is the weirdest thing ever imo)
[11:39:54] <strcat> for people who don't know C++...
[11:39:59] <eddyb> it's awesome - in an unsafe way
[11:40:01] <dbaupp> (we do have an "empty ctor" trait in std::default::Default)
[11:40:04] <strcat> auto x = map[key];
[11:40:10] <strcat> if the key exists, it returns a ref to the value
[11:40:17] *** Quits: brson (brson@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[11:40:18] <strcat> if the key doesn't exist, it returns a ref to the value - safely
[11:40:24] <strcat> how? it inserts the value if it didn't exist...
[11:40:29] <strcat> default constructed
[11:40:35] <strcat> such a stupid default IMO.
[11:40:47] <eddyb> it means you can do map[key] = value
[11:40:52] <strcat> I always accidentally insert keys because I forget to use insert/find
[11:40:53] <benh> But it's great for a map of ints so you can just count things by doing blah[key]++ :D
[11:40:55] <strcat> eddyb: sure
[11:41:10] <strcat> eddyb: rust could have find_or_default
[11:41:12] <strcat> it has a Default trait
[11:41:21] * eddyb wonders if insert can be implemented so nothing is allocated, if the key is present
[11:41:23] <strcat> but how often do you *really* want that? ;p
[11:41:44] <strcat> eddyb: yes, but it still has to take ownership of the key/value you pass
[11:41:49] <strcat> it could return them if they were unused...
[11:42:09] *** Joins: dherman (dherman@5AB4884B.FCC4549.14D5B978.IP)
[11:42:10] *** ChanServ sets mode: +ao dherman dherman
[11:42:10] <strcat> or it could clone them for the case they are needed
[11:42:17] <strcat> I'm not sure what that guy expects rust to do differently
[11:42:19] <strcat> ;p
[11:42:23] <strcat> it has to do *something*
[11:42:24] *** Quits: dherman (dherman@5AB4884B.FCC4549.14D5B978.IP) (Quit: dherman)
[11:42:48] <cmr> strcat: "Memory safety is hard, so I'm going to add @ everywhere" is almost an immediate grounds for disqualification of opinion, IMO
[11:42:51] * dbaupp loves himself some collections.defaultdict in Python
[11:43:06] *** Joins: ab (alex@BC9D99CC.37C1012D.FE617B51.IP)
[11:43:11] <strcat> dbaupp: meh, I prefer explicitly using setdefault
[11:43:23] <dbaupp> strcat: that's no fun :P (but yeah, that works too)
[11:43:26] <cmr> defaultdict is great when you're doing web scraping
[11:43:31] <tikue> hmm...i have an iterator with which i'm chaining some methods. it looks something like it.filter(|el| vec.contains(e)).inspect(|e| vec.push(e)) -- why does this work? shouldn't the first closure close over vec? why can the second closure push to it?
[11:43:37] <strcat> until you start accidentally inserting
[11:43:39] <strcat> and you will
[11:43:43] <eddyb> strcat: oh, I mean, you pass ~[T::new()] to insert and the allocation can get inlined so it only happens (assuming no side-effects) if the key isn't present
[11:43:51] *** Quits: Ms2ger (Ms2ger@moz-2EC3C8F8.ugent.be) (Ping timeout)
[11:44:26] <strcat> tikue: iterators can yield mutable references
[11:44:30] <eddyb> tikue: the closures don't overlap in their lifetimes
[11:44:43] <dbaupp> tikue: can you break memory safety with it?
[11:44:47] <tikue> strcat: i know that -- i think eddyb is getting at what i mean
[11:44:58] <tikue> dbaupp: no but i didn't know rust was smart enough to realize
[11:44:59] <strcat> tikue: well the closures don't know about each other, or the vector
[11:45:03] *** Joins: Sorella_ (quildreen@D2D1E5DD.81EFC25A.A95FAE2B.IP)
[11:45:03] <cmr> tikue: best way to get an answer to that is give it to bblum and ask him to find the unsoundness :P
[11:45:18] <strcat> too stupid enough to consider that as something that could be wrong really (and it's not wrong ;p)
[11:45:28] <strcat> it just chains the lifetime along
[11:45:41] <strcat> there are places where &mut is broken
[11:45:44] <strcat> I don't think that's one
[11:45:55] <eddyb> strcat: his question was about the closures capturing vec
[11:46:02] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[11:46:04] <eddyb> the first one ends before the second one
[11:46:22] <strcat> yeah, rust evaluates left-to-right
[11:46:41] <strcat> but I don't think the compiler cares about the closures
[11:46:49] *** Joins: nkoep (nik@moz-B92E790B.pool.mediaways.net)
[11:47:23] <eddyb> tikue: I think it would be a problem if you took the closures from the function arguments, and stored them in local variables
[11:47:31] <strcat> tikue: easy test would be storing the iterator and trying to touch the vector
[11:47:32] <cmr> rusti: let vec = ~[1, 2, 3]; for _ in range(1, 10).filter(|e1| vec.push(42)).inspect(|e| vec.push(24)) { } vec
[11:47:32] -rusti- <anon>:9:65: 9:78 error: mismatched types: expected `bool` but found `()` (expected bool but found ())
[11:47:33] -rusti- <anon>:9          let vec = ~[1, 2, 3]; for _ in range(1, 10).filter(|e1| vec.push(42)).inspect(|e| vec.push(24)) { } vec
[11:47:33] -rusti-                                                                           ^~~~~~~~~~~~~
[11:47:33] -rusti- error: aborting due to previous error
[11:47:34] -rusti- application terminated with error code 101
[11:48:00] <cmr> rusti: let vec = ~[1, 2, 3]; for _ in range(1, 10).filter(|e1| { vec.push(42); true}).inspect(|e| vec.push(24)) { } vec
[11:48:01] -rusti- pastebinned 8 lines of output: http://sprunge.us/cNYb
[11:48:10] <cmr> rusti: let mut vec = ~[1, 2, 3]; for _ in range(1, 10).filter(|e1| { vec.push(42); true}).inspect(|e| vec.push(24)) { } vec
[11:48:11] -rusti- pastebinned 7 lines of output: http://sprunge.us/jGjK
[11:48:17] <cmr> Yeah
[11:48:25] <cmr> That seems totally broken to me.
[11:48:50] <eddyb> why?
[11:48:52] <cmr> You have two mutable captures at the same time, and those closures are stored.
[11:49:15] <cmr> eddyb: you have aliasing &mut's
[11:49:24] <eddyb> oooh, wait, those are iterators
[11:49:35] <cmr> nmatsakis: ^
[11:49:42] * eddyb /facepalm
[11:49:53] <cmr> nmatsakis: `let mut vec = ~[1, 2, 3]; for _ in range(1, 10).filter(|e1| { vec.push(42); true}).inspect(|e| vec.push(24)) { } vec` seems unsound to me; is it? (output: http://sprunge.us/jGjK)
[11:51:01] <eddyb> now I should apologize to tikue for propagating a bad assumption in my response to him :(
[11:51:49] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[11:52:11] <strcat> cmr: I guess this is the &mut escaping issue then
[11:52:18] <tikue> hm
[11:52:24] <strcat> I thought the vectors came from the iterator
[11:52:25] <tikue> my code is similar except one of them is immutable
[11:52:36] <strcat> i.e. it iterated over the vectors and pushed to them
[11:52:38] * strcat is silly
[11:52:44] <tikue> https://gist.github.com/tikue/8152ff58dcfd5bce020b
[11:52:56] <cmr> tikue: your code should be fine\
[11:53:21] <cmr> strcat: yeah, it looks like it is.
[11:55:08] <tikue> cmr: why is yours unsound? you don't iterate over the vector
[11:55:11] <tikue> you simply push to it
[11:55:28] <tikue> you simply push to it right?
[11:55:44] *** Quits: tikue (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue)
[11:55:48] <cmr> tikue: there are two aliasing &mut: one in the closure captured by the filterator, one in the closure captured by the inspecterator
[11:55:54] *** Joins: tikue (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[11:56:23] <tikue> cmr: not sure if you got my last message, think my irc client is broken
[11:56:28] <cmr> I did
[11:56:30] <cmr> tikue: there are two aliasing &mut: one in the closure captured by the filterator, one in the closure captured by the inspecterator
[11:57:18] *** Quits: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP) (Quit: Leaving.)
[11:57:19] <dbaupp> fwiw, I can't actually get both &mut's into the one spot
[11:57:21] <tikue> so why is that unsound but mine isn't? i thought that you aren't supposed to be able to have a borrowed pointer while there's a mutable borrowed pointer
[11:57:39] <cmr> oh, yeah
[11:57:41] <cmr> you're right
[11:57:45] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[11:57:48] <cmr> dbaupp: yeah, I don't see a way to exploit this at all
[11:57:54] <dbaupp> any attempt to pass an &mut (or & for that matter) out of the first one (e.g. via .map) hits lifetime errors
[11:57:54] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[11:57:57] <cmr> that doesn't make it correct, though
[11:58:11] *** Quits: tulloch (tulloch@moz-BC895BC5.damtp.cam.ac.uk) (No route to host)
[11:58:32] <tikue> as long as it closes over the vector i would expect the vector to be immutable
[11:58:47] <dbaupp> rusti: let mut n = 0; for _ in range(0, 10).map(|_| &n).inspect(|x| n += **x) {} 
[11:58:48] -rusti- pastebinned 8 lines of output: http://sprunge.us/bTCS
[11:59:18] <dbaupp> rusti: let mut n = 0; for _ in range(0, 10).map(|_| &mut n).inspect(|x| n += **x) {} 
[11:59:19] -rusti- pastebinned 14 lines of output: http://sprunge.us/OAeY
[12:01:49] *** Joins: santiago (santiago@moz-8ADE82B4.socal.res.rr.com)
[12:02:47] <tikue> rusti: let mut n = 0; for i in range(0, 10).map(|x| n + x).inspect(|x| n += *x) { print!("{}, ", i) }
[12:02:47] -rusti- 0, 1, 3, 7, 15, 31, 63, 127, 255, 511, ()
[12:04:42] <tikue> so in that example i would expect n to be constant in the map() 
[12:05:34] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[12:08:04] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[12:08:20] <eddyb> tikue: it would be easier to visualize and reason about with generators
[12:08:48] <dbaupp> eddyb: generators would not remove .map or .inspect... ?
[12:09:06] *** Joins: fyolnish (fyolnish@moz-449553B5.uqwimax.jp)
[12:09:20] <eddyb> dbaupp: yeah, but you can express those using generators
[12:10:16] <dbaupp> eddyb: so? they would still take closures and so the ordering/mutability would still be weird.
[12:10:49] <eddyb> dbaupp: I mean, you would rewrite the entire example using generators. nevermind :/
[12:10:57] *** Quits: fyolnish (fyolnish@moz-449553B5.uqwimax.jp) (Ping timeout)
[12:11:10] <dbaupp> eddyb: oh, I see
[12:11:21] <tikue> lol someone figure out how to make that example print out 2 4 8 16 etc...it's bothering me :P
[12:12:01] <eddyb> how would that work?
[12:12:09] <tikue> no idea
[12:12:15] <tikue> it's only off by 1 tho
[12:12:26] <tikue> rusti: let mut n = 0; for i in range(0, 10).map(|x| n + x).inspect(|x| n += *x) { print!("{}, ", i+1) }
[12:12:26] -rusti- 1, 2, 4, 8, 16, 32, 64, 128, 256, 512, ()
[12:12:41] <eddyb> n = 1, maybe?
[12:12:46] <tikue> tried it
[12:13:14] <eddyb> .map(|x| x + 1) afterwards
[12:13:21] <tikue> cheating!
[12:13:30] <eddyb> tikue: you get 2^i -1, which actually makes sense
[12:13:44] <tikue> eddyb: i'm very tired :) can you explain to me how it's being computed
[12:14:17] <myname> i don't quite get why you get 2^i
[12:14:44] <tikue> neither do i, i'm trying to figure it out but my head is working too slowly right now
[12:14:49] <eddyb> tikue: it's a sum which is equal to (2^n) - 1. one series which does this is the all the powers of 2, from 0 to n-1
[12:15:11] <myname> doesn't .map(|x| n + x) with n = 0 does nothing?
[12:15:13] <eddyb> (i.e. all the bits until n. add one and you get 1 << n)
[12:15:18] <eddyb> but this is a different thing
[12:15:26] <dbaupp> eddyb: no its not
[12:15:29] <dbaupp> its exactly that
[12:15:33] <eddyb> myname: inspect runs after each map
[12:15:42] <myname> oh
[12:15:43] <dbaupp> wait...
[12:15:48] <myname> what does inspect do?
[12:15:51] <eddyb> dbaupp: but... it's numbers from 0 to 10
[12:16:03] <dbaupp> eddyb: yeah, I realised
[12:16:09] <eddyb> myname: it's like map, but doesn't replace the value
[12:16:17] <myname> ah
[12:17:03] <myname> strange stuff
[12:17:04] <tikue> yeah it just allows for side effects before returning a value
[12:18:33] <eddyb> tikue: it has to be the binomial thing
[12:18:49] <myname> okay, now i get it
[12:18:53] <myname> quite interesting
[12:18:55] <eddyb> (1 + 1)^n == 2^n
[12:19:11] <eddyb> (and expand on the left side with newton's thing)
[12:20:49] <cmr> heh
[12:21:31] <eddyb> rusti: let mut n = 0; for i in range(0, 10) { let x = n + i; n += x; print!("{}, ", x+1) }
[12:21:32] -rusti- 1, 2, 4, 8, 16, 32, 64, 128, 256, 512, ()
[12:22:56] <eddyb> rusti: let mut n = 0; for i in range(0, 10) { n = n + n + i; print!("{}, ", n) }
[12:22:57] -rusti- 0, 1, 4, 11, 26, 57, 120, 247, 502, 1013, ()
[12:23:12] <eddyb> rusti: let mut n = 0; for i in range(0, 10) { n = n + n + i; print!("{}, ", n-i) }
[12:23:12] -rusti- 0, 0, 2, 8, 22, 52, 114, 240, 494, 1004, ()
[12:23:21] *** Joins: dherman (dherman@9C2E78E6.8C982E60.292610BC.IP)
[12:23:21] *** ChanServ sets mode: +ao dherman dherman
[12:23:28] <eddyb> hmm, that's weird :P
[12:23:43] <tikue> youo're printing the wrong thing
[12:23:53] <tikue> you need to print x
[12:23:59] <eddyb> I know, but I thought it would be easy to get x from n
[12:24:21] <eddyb> rusti: let mut n = 0; for i in range(0, 10) { n = n + n + i; print!("{}, ", (n-i) / 2 + i) }
[12:24:22] -rusti- 0, 1, 3, 7, 15, 31, 63, 127, 255, 511, ()
[12:24:30] <eddyb> rusti: let mut n = 0; for i in range(0, 10) { n = n + n + i; print!("{}, ", (n-i) / 2 + i + 1) }
[12:24:30] <tikue> it is, if n = 2n + i, and x is supposed to be n + i, then ... yeah there
[12:24:31] -rusti- 1, 2, 4, 8, 16, 32, 64, 128, 256, 512, ()
[12:24:32] *** Joins: ofeldt- (ofeldt@moz-355FDAC1.dip0.t-ipconnect.de)
[12:24:38] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[12:24:56] *** Joins: pcwalton (pcwalton@9C2E78E6.8C982E60.292610BC.IP)
[12:24:56] *** ChanServ sets mode: +ao pcwalton pcwalton
[12:25:12] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[12:25:14] <eddyb> tikue: this looks more complicated than the binomial one
[12:25:31] *** Quits: ofeldt (ofeldt@moz-B450C213.dip0.t-ipconnect.de) (Ping timeout)
[12:26:11] <tikue> it's funny that i just stumbled across it by trying to distill an unsoundness problem to as small a snippet as possible
[12:26:49] <eddyb> rusti: let mut n = 0; for i in range(0, 10) { n = n + n + i; print!("{}, ", (n+i) / 2 + 1) }
[12:26:49] -rusti- 1, 2, 4, 8, 16, 32, 64, 128, 256, 512, ()
[12:26:58] <eddyb> (magic :P)
[12:27:13] <eddyb> rusti: let mut n = 0; for i in range(0, 10) { n = n + n + i; print!("{}, ", n+i) }
[12:27:14] -rusti- 0, 2, 6, 14, 30, 62, 126, 254, 510, 1022, ()
[12:27:23] <eddyb> rusti: let mut n = 0; for i in range(0, 10) { n = n + n + i; print!("{}, ", n+i+2) }
[12:27:24] -rusti- 2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, ()
[12:28:12] <dbaupp> https://www.wolframalpha.com/input/?i=n[i]+%3D+2*n[i-1]+%2B+i+%2C+n[0]+%3D+0 :P
[12:28:31] <eddyb> I was about to do that :D
[12:28:41] <tikue> dbaupp: thanks :P
[12:28:49] *** Quits: arodier74 (Thunderbir@moz-25EB015.in-addr.btopenworld.com) (Quit: arodier74)
[12:28:53] <tikue> and with that i'm off to sleep for three hours! ;D
[12:28:59] * eddyb can get crazy about rearranging code
[12:29:16] *** Quits: tikue (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue)
[12:30:46] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[12:33:42] *** Quits: Sgeo (quassel@moz-D0F30617.dyn.optonline.net) (Connection reset by peer)
[12:35:58] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[12:35:59] *** ChanServ sets mode: +ao brson brson
[12:41:53] *** pmoore is now known as pmoore|lunch
[12:44:25] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[12:46:07] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[12:53:11] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[12:55:06] *** Quits: pcwalton (pcwalton@9C2E78E6.8C982E60.292610BC.IP) (Quit: pcwalton)
[12:55:27] *** Quits: heftig (heftig@moz-BFBECE4.dip0.t-ipconnect.de) (Ping timeout)
[12:55:56] *** Joins: jdm (jdm@9C2E78E6.8C982E60.292610BC.IP)
[12:55:56] *** ChanServ sets mode: +o jdm
[13:00:35] *** Joins: FreeFull (freefull@E424A224.387C8A0C.DC9D01B1.IP)
[13:02:03] *** Joins: heftig (heftig@moz-BFBECE4.dip0.t-ipconnect.de)
[13:05:47] *** Quits: moostik (Icedove@moz-4AD91EE4.w82-121.abo.wanadoo.fr) (Ping timeout)
[13:10:37] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Ping timeout)
[13:10:38] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[13:10:54] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[13:10:54] *** ChanServ sets mode: +ao brson brson
[13:14:05] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Ping timeout)
[13:17:28] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[13:17:29] *** ChanServ sets mode: +ao brson brson
[13:20:41] *** kimundi is now known as zz_kimundi
[13:25:54] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[13:26:25] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[13:27:07] *** Quits: huseby (huseby@moz-52B306B9.chrismail.de) (Ping timeout)
[13:28:12] *** Quits: Kxepal (Miranda@moz-64407EE.pppoe.mtu-net.ru) (Quit: Kxepal)
[13:28:38] *** Joins: Kxepal (Miranda@moz-64407EE.pppoe.mtu-net.ru)
[13:30:42] *** Quits: aatch (James@moz-B437F499.pocketrent.com) (Ping timeout)
[13:31:18] *** jorendorff_away is now known as jorendorff
[13:31:49] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[13:38:57] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[13:40:55] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Quit: Leaving)
[13:41:27] *** Joins: aatch (James@moz-B437F499.pocketrent.com)
[13:42:48] *** Joins: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com)
[13:43:51] *** Joins: mib_ktu65i (Mibbit@moz-8D772A95.rev.sfr.net)
[13:44:20] <mib_ktu65i> Hello, I have finished a new game. Please, test him! You can see the trailer her: http://www.youtube.com/watch?v=AvJMlDIvf_o
[13:44:30] <mib_ktu65i> You can download it her: https://mega.co.nz/#!E4ggXIwQ!Lt6JZXrEdGeE9ofJkHVhHFxVJLhAY2VK8eNuEsYlPOE and for the first startup, you need http://www.win-rar.com for launch the launcher. Estheone.
[13:44:43] *** Quits: mib_ktu65i (Mibbit@moz-8D772A95.rev.sfr.net) (Quit: http://www.mibbit.com ajax IRC Client)
[13:46:36] <ChrisMorgan> Wow! We're important enough to get spam :-)
[13:46:53] * dbaupp hopes that game was written in Rust
[13:49:06] <ChrisMorgan> Compressed with WinRAR? Unlikely. Far, far more likely to just be malware.
[13:49:22] *** Joins: Jackneill (Jackneill@moz-ED030615.pool.digikabel.hu)
[13:49:41] * dbaupp was being optimistic with the use of "game"... and about the use of Rust
[13:57:13] *** jorendorff is now known as jorendorff_away
[13:57:31] <bstrie> dbaupp: look on the bright side, maybe the malware is written in rust :)
[13:58:44] *** Quits: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:01:05] *** Joins: bynaryshef (bynaryshef@moz-433ADB5E.mem.bellsouth.net)
[14:01:21] *** Quits: bynaryshef (bynaryshef@moz-433ADB5E.mem.bellsouth.net) (Client exited)
[14:01:26] *** Joins: bynaryshef (bynaryshef@moz-433ADB5E.mem.bellsouth.net)
[14:01:29] *** jorendorff_away is now known as jorendorff
[14:01:50] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Ping timeout)
[14:03:37] <eddyb> bstrie: bonus points for not using any gated features
[14:04:24] <eddyb> optimization as obfuscation. I wish :P
[14:06:24] *** zz_kimundi is now known as kimundi
[14:07:19] <mletterle> Time for ChrisMorgan to go to bed.
[14:07:41] <ChrisMorgan> True, that.
[14:07:56] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[14:13:28] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Ping timeout)
[14:13:33] *** Joins: GeneralMaximus (ankur@C287FC83.5F6B62E6.BE90E62C.IP)
[14:13:46] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[14:14:07] *** Quits: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: ZZZzzz…)
[14:14:09] *** Joins: arodier74 (Thunderbir@moz-25EB015.in-addr.btopenworld.com)
[14:15:41] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[14:15:55] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[14:16:51] *** jorendorff is now known as jorendorff_away
[14:17:33] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[14:18:48] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[14:19:03] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[14:19:59] *** Joins: Skif (emschwar@moz-4C5BB5A8.beyondbb.com)
[14:20:11] *** Joins: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com)
[14:20:12] *** Quits: Skif (emschwar@moz-4C5BB5A8.beyondbb.com) (Client exited)
[14:20:14] *** Joins: Skif (emschwar@moz-4C5BB5A8.beyondbb.com)
[14:20:28] *** pmoore|lunch is now known as pmoore
[14:20:40] *** Joins: canhtak (canhtak@moz-24D0A1FD.wl.t.ulaval.ca)
[14:20:50] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[14:21:57] *** Quits: Skif (emschwar@moz-4C5BB5A8.beyondbb.com) (Connection reset by peer)
[14:23:48] *** Joins: mitra_ (mitra@8E712A0.54C21BA0.9F317420.IP)
[14:23:48] *** Quits: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP) (Connection reset by peer)
[14:28:12] *** Quits: brendan (brendaneic@1865C1F9.ECF92FCA.CDBA6951.IP) (Quit: brendan)
[14:28:14] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[14:28:34] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[14:29:10] *** Quits: GeneralMaximus (ankur@C287FC83.5F6B62E6.BE90E62C.IP) (Quit: Computer has gone to sleep.)
[14:30:22] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[14:32:23] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[14:35:42] *** Joins: mark_edward_ (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[14:37:00] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[14:37:11] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[14:37:47] *** Quits: dherman (dherman@9C2E78E6.8C982E60.292610BC.IP) (Quit: dherman)
[14:38:56] *** Joins: jaeholee (uid4856@moz-31ABA2C0.irccloud.com)
[14:39:08] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[14:39:14] *** Joins: tav (tav@moz-196E6F10.sohonet.co.uk)
[14:39:29] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[14:41:12] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[14:42:57] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[14:46:42] *** jorendorff_away is now known as jorendorff
[14:47:02] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[14:47:15] *** Joins: brendan (brendaneic@1865C1F9.ECF92FCA.CDBA6951.IP)
[14:49:28] *** Quits: mitra_ (mitra@8E712A0.54C21BA0.9F317420.IP) (Quit: Konversation terminated!)
[14:55:16] *** Joins: RageOfThou (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[15:00:05] *** Joins: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net)
[15:01:29] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[15:04:45] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[15:04:58] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[15:09:43] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[15:10:34] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[15:13:01] *** Quits: japaric (japaric@C9DBF810.55B992BD.5C7588CA.IP) (Ping timeout)
[15:13:15] *** Joins: japaric (japaric@C9DBF810.55B992BD.5C7588CA.IP)
[15:13:58] *** Joins: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP)
[15:16:26] *** Quits: avsej (avsej@DF1824D5.EFF97412.48F984E6.IP) (Client exited)
[15:19:46] *** Quits: brendan (brendaneic@1865C1F9.ECF92FCA.CDBA6951.IP) (Quit: brendan)
[15:20:05] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[15:20:11] *** Quits: fabiand (fabiand@moz-23FC164C.adsl.alicedsl.de) (Ping timeout)
[15:20:18] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[15:20:33] *** Joins: moostik (Icedove@moz-4AD91EE4.w82-121.abo.wanadoo.fr)
[15:20:43] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[15:21:48] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[15:23:49] *** Quits: heftig (heftig@moz-BFBECE4.dip0.t-ipconnect.de) (Quit: Quitting)
[15:23:54] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[15:24:32] *** Joins: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net)
[15:25:45] *** Quits: penguin_dan (dan_johnsi@6902762D.11B071D.FB9A45AF.IP) (Client exited)
[15:27:02] *** Quits: bynaryshef (bynaryshef@moz-433ADB5E.mem.bellsouth.net) (Quit: This computer has gone to sleep)
[15:27:11] *** Joins: penguin_dan (dan_johnsi@6902762D.11B071D.FB9A45AF.IP)
[15:29:38] *** Quits: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com) (Ping timeout)
[15:30:06] *** Joins: fabiand (fabiand@moz-23FC164C.adsl.alicedsl.de)
[15:30:44] *** pmoore is now known as pmoore|mtg
[15:30:48] *** Quits: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP) (Client exited)
[15:31:35] *** Joins: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP)
[15:32:55] *** Joins: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com)
[15:35:01] *** Quits: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net) (Quit: maxiepoo)
[15:36:53] *** Joins: tulloch (tulloch@moz-6809CC86.nat.csx.cam.ac.uk)
[15:38:59] <mark_edward> the lack of pointer arithmetic makes low-level stuff excruciating `ptr = ptr.offset(1)` instead of `++ptr`. i just don't understand the reasoning. pointers are unsafe. if im using raw pointers, all this typing just leaves more room for bugs
[15:39:20] <cmr> mark_edward: it avoids UB and makes it more efficient.
[15:40:06] <cmr> The reality of pointers is that they aren't just arbitrary integers. They have very precise semantics.
[15:40:07] *** Joins: cubic (cubic@moz-80241A3A.mc.videotron.ca)
[15:40:42] <mark_edward> but when you are selling Rust to people who want to do low-level stuff, who almost all come from C, C++, they're going to take one look and walk away when something as common as pointer arith is so clumsy
[15:41:24] *** Quits: Kxepal (Miranda@moz-64407EE.pppoe.mtu-net.ru) (Ping timeout)
[15:41:32] <cmr> Pointer arith isn't common in C++. It's only common in C because it's the only way to get things done.
[15:41:57] <cmr> And tons (all?) of C programs have UB problems
[15:42:03] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[15:42:13] <cmr> Almost every time gcc introduces another optimization they break programs.
[15:42:29] <mark_edward> how is it more efficient btw? 
[15:42:58] <cmr> LLVM can do alias analysis and thus vectorization and all sorts of other things
[15:43:29] <cmr> It can't do that if you don't use GEPi (ptr.offset)
[15:44:03] *** Joins: jvshahid (jvshahid@moz-53774307.nycm.ny.megapath.net)
[15:44:43] *** Joins: Kxepal (Miranda@moz-876F9B77.pppoe.mtu-net.ru)
[15:44:56] <mark_edward> GEPi?
[15:45:09] <cmr> get pointer inbounds
[15:45:11] <cmr> it's in their docs
[15:47:05] *** Joins: Janko (chatzilla@D9AEFC3E.9E37BD61.9C3D12F2.IP)
[15:48:42] *** Quits: tulloch (tulloch@moz-6809CC86.nat.csx.cam.ac.uk) (Quit: leaving)
[15:49:23] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[15:50:36] <mark_edward> cmr: you know i changed my font to something else, for some reason it's now much less irritation
[15:53:33] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[15:53:48] *** Joins: tikue (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[15:54:51] <nmatsakis> cmr: that example should be disallowed per #2202 -- got a fix for that upcoming, next time I have a block of Rust coding time
[15:55:23] <nmatsakis> cmr: still wrestling with precisely how strict to make the rules -- or rather how much automatic rewriting of closures to do so as to avoid need for boilerplate -- will prob land with the minimal amount first, then add more convenience later
[15:57:00] *** Joins: huseby (huseby@moz-8F605F11.chrismail.de)
[15:58:11] *** Joins: kellogh (timkellogg@moz-68DF7EF7.teliax.com)
[16:00:17] *** Quits: tav (tav@moz-196E6F10.sohonet.co.uk) (Quit: tav)
[16:01:00] *** Joins: jackinloadup (jackinload@moz-E630552F.compute-1.amazonaws.com)
[16:01:04] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[16:01:04] *** ChanServ sets mode: +o pnkfelix
[16:02:39] *** Parts: jfb (jfb@2ABF3B40.D6CCE4AE.77834EAA.IP) (Konversation terminated!)
[16:05:17] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[16:06:09] *** Joins: tav (tav@moz-196E6F10.sohonet.co.uk)
[16:07:29] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[16:07:52] *** Joins: tulloch (tulloch@moz-6809CC86.nat.csx.cam.ac.uk)
[16:10:15] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[16:10:36] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[16:12:20] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[16:14:08] *** Joins: Liothen (liothen@moz-266BCA86.spkn.qwest.net)
[16:15:29] *** Quits: moostik (Icedove@moz-4AD91EE4.w82-121.abo.wanadoo.fr) (Ping timeout)
[16:15:49] *** Quits: tulloch (tulloch@moz-6809CC86.nat.csx.cam.ac.uk) (Ping timeout)
[16:16:20] *** Joins: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu)
[16:16:32] *** Joins: edorian (Mibbit@moz-92C7CC5.dynamic.qsc.de)
[16:16:34] *** Quits: tav (tav@moz-196E6F10.sohonet.co.uk) (Quit: tav)
[16:19:28] *** Joins: moostik (Icedove@moz-4AD91EE4.w82-121.abo.wanadoo.fr)
[16:19:41] *** Joins: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP)
[16:20:15] *** Joins: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk)
[16:20:32] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[16:20:58] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[16:20:59] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[16:21:54] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[16:21:56] *** pmoore|mtg is now known as pmoore|dinner
[16:22:40] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[16:23:06] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[16:23:23] *** Quits: Janko (chatzilla@D9AEFC3E.9E37BD61.9C3D12F2.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 28.0a1/20131112153009])
[16:24:46] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[16:24:46] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[16:24:46] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[16:25:50] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[16:26:24] *** Quits: tulloch (tulloch@moz-1C33A2E7.nat.csx.cam.ac.uk) (Ping timeout)
[16:26:25] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[16:27:35] *** Quits: sawrubh (uid6719@moz-5F4AA75A.irccloud.com) (Quit: Connection closed for inactivity)
[16:27:56] *** Joins: avsej (avsej@D9A610B8.4841F515.FB33447D.IP)
[16:28:53] *** Joins: tav (tav@moz-196E6F10.sohonet.co.uk)
[16:30:58] *** Joins: tulloch (tulloch@moz-6809CC86.nat.csx.cam.ac.uk)
[16:34:05] *** Joins: Skif (emschwar@moz-4C5BB5A8.beyondbb.com)
[16:35:08] *** Joins: zatnosk (zatnosk@A9F4C5B1.7BBF6107.D79F9FB4.IP)
[16:40:03] *** Quits: moostik (Icedove@moz-4AD91EE4.w82-121.abo.wanadoo.fr) (Ping timeout)
[16:40:18] *** pmoore|dinner is now known as pmoore
[16:40:37] *** Joins: beifeng (Mibbit@B9A84FB8.E025778C.601BAF88.IP)
[16:40:57] *** Quits: alonlevy (alon@moz-B0E66DB7.static.bezeqint.net) (Ping timeout)
[16:42:54] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[16:45:07] *** Joins: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net)
[16:45:15] *** Quits: Ferreus (ferreus@moz-8E678950.dip0.t-ipconnect.de) (Ping timeout)
[16:45:27] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[16:50:16] *** Joins: heftig (heftig@moz-E8E2034C.inf.fh-bonn-rhein-sieg.de)
[16:51:09] <bstrie> maybe one day I will convince google that I don't want to invite rust-dev@mozilla.org to gmail
[16:54:46] *** Quits: kellogh (timkellogg@moz-68DF7EF7.teliax.com) (Quit: kellogh)
[16:55:26] *** Quits: tav (tav@moz-196E6F10.sohonet.co.uk) (Quit: tav)
[16:57:24] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[16:57:53] <erickt> good morning all, can anyone figure out how to implement something like this without explicitly naming the type of InnerIterator.iter? https://github.com/erickt/rust-serde/blob/master/src/serde/serde/encode.rs#L582
[16:58:36] <tikue> erickt:  you could do impl<'self, T: Iterator<'self>>
[16:58:40] <tikue> (i think)
[16:58:44] <erickt> I don't think I can just declare `struct InnerIterator<'self, T>` because I still have to specify the whole type on line 583
[16:59:25] <erickt> tikue: I think ^ covers that case
[16:59:46] *** Quits: heftig (heftig@moz-E8E2034C.inf.fh-bonn-rhein-sieg.de) (Ping timeout)
[17:00:08] *** Joins: kellogh (timkellogg@moz-68DF7EF7.teliax.com)
[17:00:41] *** Joins: heftig (heftig@moz-E8E2034C.inf.fh-bonn-rhein-sieg.de)
[17:02:25] <tikue> erickt: have you tried `impl<'self, T, I: Iterator<'self, T>> Encode2<'self, I> for Inner { fn encode_iter(&'self self) -> I { .. } }
[17:07:09] *** Joins: moostik (Icedove@5A22E6A1.10715965.BCDF592F.IP)
[17:07:10] *** Quits: z0w0 (zack@moz-FE2A0BDD.lnse2.woo.bigpond.net.au) (Ping timeout)
[17:08:03] *** jorendorff is now known as jorendorff_away
[17:09:13] *** jorendorff_away is now known as jorendorff
[17:09:51] *** Quits: Jesin (Jesin@moz-5C1F7BD2.res.lehigh.edu) (Ping timeout)
[17:11:16] *** Joins: bholley (anonymous@moz-24EDB000.hsd1.ca.comcast.net)
[17:11:55] <bblum> pnkfelix: pong
[17:14:47] *** Joins: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP)
[17:15:47] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[17:16:33] *** Joins: dradtke (dradtke@moz-849051B9.il.subnet.cable.rcn.com)
[17:16:44] <pnkfelix> bblum: uh, I think my Q got answered.
[17:16:48] <bblum> ok great
[17:17:16] *** pmoore is now known as pmoore|away
[17:19:50] <erickt> tikue: not yet, I'll try it, but I don't think that'll work either :)
[17:20:20] <erickt> once rust builds of course
[17:20:51] *** Joins: notmatt (notmatt@118CCA77.D1B89392.602E4FC1.IP)
[17:21:13] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[17:22:16] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[17:22:54] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[17:23:10] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[17:23:41] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[17:23:50] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[17:24:41] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[17:25:15] *** Quits: zatnosk (zatnosk@A9F4C5B1.7BBF6107.D79F9FB4.IP) (Quit: Have a great life!)
[17:25:18] <erickt> nmatsakis: ping
[17:27:06] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[17:27:29] <nmatsakis> erickt: pong
[17:27:31] <adridu59> r? https://github.com/mozilla/rust/pull/10421
[17:27:33] <mark_edward> constexpr would be nice
[17:29:37] *** Joins: maxiepoo (Max@moz-DEDB4821.nuwlan.northwestern.edu)
[17:29:46] <erickt> nmatsakis: hey there! In regards to your comment on https://github.com/mozilla/rust/issues/10448#issuecomment-28396438, would it be simpler (or even possible) for the return type to be automatically deduced if it can only be derived from the function body?
[17:30:22] <nmatsakis> erickt: well, how else would it be derived? ;) I guess whta you mean is only for leaf functions?
[17:30:23] <erickt> nmatsakis: I don't know the details, but that's what we did in felix
[17:31:18] <nmatsakis> erickt: truth is though it doesn't make much difference, we have to do some refactoring of the typeck pass no matter what
[17:31:27] <nmatsakis> erickt: plus I haven't found the time to look into your failure, sorry
[17:32:34] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[17:32:59] *** Quits: moostik (Icedove@5A22E6A1.10715965.BCDF592F.IP) (Ping timeout)
[17:33:24] *** Joins: notmatt_ (notmatt@118CCA77.D1B89392.602E4FC1.IP)
[17:33:50] *** Quits: notmatt (notmatt@118CCA77.D1B89392.602E4FC1.IP) (Ping timeout)
[17:33:52] <erickt> nmatsakis: oh, yeah, that makes total sense :)
[17:36:03] <erickt> nmatsakis: and no worries about that failure, I'm also looking forward to parallel js :)
[17:36:15] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[17:36:44] *** Joins: notmatt (notmatt@moz-6071FD3.lightspeed.sntcca.sbcglobal.net)
[17:36:55] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Ping timeout)
[17:36:55] *** Quits: notmatt_ (notmatt@118CCA77.D1B89392.602E4FC1.IP) (Ping timeout)
[17:36:59] <erickt> nmatsakis: it's a shame you're on the wrong coast nowadays, you're going to miss our meetup
[17:37:52] *** Joins: moostik (Icedove@5A22E6A1.10715965.BCDF592F.IP)
[17:37:54] *** Joins: alan (alan@moz-FE02DD30.sat6.rackspace.com)
[17:37:59] <dradtke> So in order to learn Rust, I'm trying to write Rustic versions of some of the GNU utilites, but I can't seem to get my first version of cat to work. This compiles and runs, but never prints anything out. Any ideas why? http://pastebin.com/iraaKkJn
[17:38:07] *** Quits: andre (andre@CA528A4A.45A4338E.8EE27E6.IP) (Quit: leaving)
[17:38:51] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[17:38:51] <bstrie> dradtke: because rust is even stricter than haskell. we believe that *any* input or output should be forbidden. thus you must learn to write programs that cannot communicate with anything
[17:39:00] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[17:39:05] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[17:39:13] <jdm> dradtke: the ~f looks fishy; try f as &mut io::Reader
[17:39:20] <erickt> dradtke: it's the most efficient language ever. we compile *everything* away
[17:39:51] <erickt> jdm: ooh, or maybe we have auto-coercing to traits now?
[17:40:03] <jdm> pretty sure I would remember that going by
[17:41:01] <dradtke> jdm: You mean in the match block?
[17:41:25] <jdm> dradtke: right
[17:41:28] <dradtke> bstrie: Hm, this line of thinking intrigues me...
[17:42:07] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[17:42:22] <dradtke> jdm: Doesn't work.
[17:42:24] <erickt> dradtke: which rust version are you using?
[17:42:38] <dradtke> erickt: 0.8
[17:43:57] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[17:45:03] *** Joins: GGpin (hell@moz-CF3E31A5.cst.lightpath.net)
[17:47:10] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[17:47:27] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Ping timeout)
[17:47:44] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[17:47:45] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[17:47:49] <Seldaek> acrichto: my point is, if you unwrap none don't you get a task failure?
[17:47:54] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[17:48:02] <acrichto> Seldaek: yes
[17:48:18] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[17:48:22] <Seldaek> so if you care a bit, you should use unwrap_or() 
[17:48:42] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[17:49:27] <Seldaek> not sure I agree with you that only having a hard way is the best way to get people not to shoot themselves, but it's not a major use case anyway so I guess I won't argue further :p
[17:50:21] <Seldaek> I mean having no easy way means people can't shoot themselves in the foot, but it also makes the language more painful to use
[17:50:22] <acrichto> we already probably have too many unwraps today
[17:50:47] <acrichto> it's true, and if this does become a problem then we can certainly revisit it
[17:50:57] <acrichto> for now I'd like to try to use enums and just enums
[17:51:02] <Seldaek> fair enough
[17:51:32] <Seldaek> acrichto: is there  a shorter way to do the match I did though?
[17:51:48] <acrichto> no
[17:52:03] <Seldaek> maybe improving things on that front would be a better way than forcing Option everywhere
[17:52:18] <Seldaek> not sure if there is a way though 
[17:54:15] <Seldaek> acrichto: I can put the match in the set_exit_status() call which avoids repeating the call but makes it look a bit awkward :)
[17:55:49] <erickt> dradtke: https://gist.github.com/erickt/7453356 <- that gets it to work on rust HEAD
[17:57:08] <erickt> dradtke: although it's failing for me on 0.8...
[17:58:23] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Quit: Leaving)
[17:58:27] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[17:58:39] *** Joins: Ms2ger (Ms2ger@B7B2FF50.C60A97A6.F9FB0584.IP)
[17:58:44] <erickt> dradtke: oh, because std::rt wasn't fully implemented on 0.8. You should instead use std::io on 0.8, or upgrade to HEAD and use my gist
[17:59:52] *** Quits: arodier74 (Thunderbir@moz-25EB015.in-addr.btopenworld.com) (Quit: arodier74)
[18:00:14] *** Joins: meTaAU_ (admin@moz-C1AB960F.lns20.per2.internode.on.net)
[18:00:25] *** Quits: meTaAU (admin@moz-A89094B0.lns20.per1.internode.on.net) (Ping timeout)
[18:00:47] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[18:01:41] *** Joins: unbracketed (textual@moz-DD541BA.lsanca.fios.verizon.net)
[18:01:51] *** Quits: alan (alan@moz-FE02DD30.sat6.rackspace.com) (Quit: alan)
[18:01:56] *** Joins: alan (alan@moz-FE02DD30.sat6.rackspace.com)
[18:01:57] *** Quits: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net) (Quit: Leaving.)
[18:01:57] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[18:02:08] *** Quits: alan (alan@moz-FE02DD30.sat6.rackspace.com) (Quit: alan)
[18:03:08] <dradtke> erickt: I was starting to use std::io, but ran into some problems which I can't remember right now.
[18:03:15] <dradtke> erickt: Anyway, thanks for the tip. I was getting really confused.
[18:03:28] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[18:03:58] *** Joins: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net)
[18:06:52] <Scriptor> so here's a really vague question, have people done a lot of work with bitmaps/bitmap arrays in Rust?
[18:07:55] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[18:09:05] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Quit: Leaving.)
[18:09:07] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[18:10:48] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[18:14:10] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[18:14:36] *** Quits: tulloch (tulloch@moz-6809CC86.nat.csx.cam.ac.uk) (Ping timeout)
[18:15:13] *** Quits: tikue (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue)
[18:15:14] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[18:15:54] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[18:15:56] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[18:16:18] *** Quits: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net) (Quit: Leaving.)
[18:16:41] <dradtke> Scriptor: You mean with a game library or something?
[18:16:53] <dradtke> Scriptor: I'm not familiar with bitmap arrays.
[18:17:06] <Scriptor> in general, I guess
[18:17:08] *** Joins: tikue (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[18:17:15] <Yurume> bitmaps in what sense?
[18:18:24] <sfackler> cmr: should I just host docs for rust-postgres myself for the time being until rustpkg is a bit more developed?
[18:18:43] <Scriptor> well, I'm not sure what the technical term is, but by bitmap array I mean something you can use when you need a bitmap of more than 64 bits
[18:18:53] <Scriptor> or whatever the size of an unsigned int is
[18:19:21] *** Joins: Gpin (hell@D9CD1E7.96CB7DCC.284344F5.IP)
[18:19:29] *** Quits: GGpin (hell@moz-CF3E31A5.cst.lightpath.net) (Connection reset by peer)
[18:19:29] *** Quits: Gpin (hell@D9CD1E7.96CB7DCC.284344F5.IP) (Connection reset by peer)
[18:21:57] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[18:21:57] *** ChanServ sets mode: +o pnkfelix
[18:21:59] *** Joins: brendan (brendaneic@1865C1F9.ECF92FCA.CDBA6951.IP)
[18:24:08] *** Quits: jdm (jdm@9C2E78E6.8C982E60.292610BC.IP) (Quit: Lost terminal)
[18:24:57] *** Joins: lolwat (nano@moz-74CAD1CA.superkabel.de)
[18:25:10] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[18:25:26] *** Quits: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP) (Ping timeout)
[18:25:39] *** Joins: GGpin (hell@moz-CF3E31A5.cst.lightpath.net)
[18:25:58] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[18:27:22] *** Quits: maxiepoo (Max@moz-DEDB4821.nuwlan.northwestern.edu) (Quit: maxiepoo)
[18:29:22] *** Quits: unbracketed (textual@moz-DD541BA.lsanca.fios.verizon.net) (Quit: Computer has gone to sleep.)
[18:29:32] *** Joins: josh (josh@moz-E140EF6F.public.wayport.net)
[18:30:11] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[18:30:14] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[18:30:28] *** Quits: Ms2ger (Ms2ger@B7B2FF50.C60A97A6.F9FB0584.IP) (Ping timeout)
[18:30:56] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[18:32:41] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[18:32:41] *** Quits: moostik (Icedove@5A22E6A1.10715965.BCDF592F.IP) (Ping timeout)
[18:32:41] *** Quits: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[18:33:20] *** Joins: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP)
[18:36:15] *** Joins: tav (tav@moz-196E6F10.sohonet.co.uk)
[18:37:01] *** Joins: jdm (jdm@9C2E78E6.8C982E60.292610BC.IP)
[18:37:01] *** ChanServ sets mode: +o jdm
[18:37:19] *** Quits: tav (tav@moz-196E6F10.sohonet.co.uk) (Quit: tav)
[18:38:12] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[18:39:12] *** Quits: canhtak (canhtak@moz-24D0A1FD.wl.t.ulaval.ca) (Quit: canhtak)
[18:41:35] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[18:42:10] *** Quits: beifeng (Mibbit@B9A84FB8.E025778C.601BAF88.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:45:42] *** Quits: heftig (heftig@moz-E8E2034C.inf.fh-bonn-rhein-sieg.de) (Ping timeout)
[18:45:47] *** Quits: GGpin (hell@moz-CF3E31A5.cst.lightpath.net) (Client exited)
[18:46:37] *** Joins: Ms2ger (Ms2ger@B7B2FF50.C60A97A6.F9FB0584.IP)
[18:46:51] *** Quits: jdm (jdm@9C2E78E6.8C982E60.292610BC.IP) (Quit: Lost terminal)
[18:47:51] *** Joins: rossm (rossm@moz-EE3BB1DC.br.br.cox.net)
[18:49:34] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[18:50:07] *** Joins: prooftechnique (prooftechn@3AD0BB7B.6E83AEB1.6C361E84.IP)
[18:51:05] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[18:51:53] *** Quits: avsej (avsej@D9A610B8.4841F515.FB33447D.IP) (Ping timeout)
[18:52:19] *** Joins: avsej (avsej@D9A610B8.4841F515.FB33447D.IP)
[18:52:22] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[18:53:25] *** Quits: a__ (a__@moz-56DB9895.nycmny.fios.verizon.net) (Ping timeout)
[18:53:30] *** Joins: a__ (a__@moz-56DB9895.nycmny.fios.verizon.net)
[18:54:49] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Input/output error)
[18:55:35] *** Joins: Kruppe (user@moz-43706AAA.eng.wind.ca)
[18:56:00] *** Quits: josh (josh@moz-E140EF6F.public.wayport.net) (Quit: josh)
[18:56:02] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[18:56:29] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[18:57:33] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[18:58:22] *** Quits: edorian (Mibbit@moz-92C7CC5.dynamic.qsc.de) (Quit: http://www.mibbit.com ajax IRC Client)
[19:01:23] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[19:02:45] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[19:04:21] *** Quits: tikue (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue)
[19:05:37] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[19:05:38] *** Joins: tikue (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[19:11:28] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[19:13:03] *** Joins: engla_ (engla@moz-F64E1B0F.cust.bredbandsbolaget.se)
[19:13:07] *** Joins: echristo (echristo@24D1937F.D6CCE4AE.77834EAA.IP)
[19:13:39] *** Quits: engla (engla@moz-F64E1B0F.cust.bredbandsbolaget.se) (Ping timeout)
[19:13:40] *** Joins: moostik (Icedove@5A22E6A1.10715965.BCDF592F.IP)
[19:14:55] *** Joins: jordyd (jordyd@moz-383C39FB.seg58.ucf.edu)
[19:15:53] *** Joins: bytewise (bytewise@moz-AB9A0CEA.eduroam.rwth-aachen.de)
[19:17:00] *** Quits: fabiand (fabiand@moz-23FC164C.adsl.alicedsl.de) (Quit: Verlassend)
[19:17:39] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Quit: Sharp)
[19:20:58] *** Joins: nejucomo (Adium@moz-C07D5168.p2p.sfo1.mozilla.com)
[19:22:36] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[19:23:17] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[19:25:25] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[19:25:25] *** ChanServ sets mode: +o pnkfelix
[19:27:00] *** Quits: prooftechnique (prooftechn@3AD0BB7B.6E83AEB1.6C361E84.IP) (Quit: )
[19:27:28] *** Quits: brendan (brendaneic@1865C1F9.ECF92FCA.CDBA6951.IP) (Quit: brendan)
[19:27:46] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[19:28:00] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[19:28:31] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[19:29:34] <TeXitoi> rusti: [1,2,3].iter().filter(|& &m| m % 2 == 0).to_owned_vec()
[19:29:35] -rusti- pastebinned 15 lines of output: http://sprunge.us/jYRA
[19:30:20] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[19:30:58] <TeXitoi> rusti: let v = [1,2,3]; v.iter().filter(|& &i| i % 2 == 0).to_owned_vec()
[19:30:59] -rusti- pastebinned 16 lines of output: http://sprunge.us/EYGK
[19:32:03] <TeXitoi> rusti: let v = [1,2,3]; v.iter().filter(|& &i| i % 2 == 0).map(|i| *i).to_owned_vec()
[19:32:03] -rusti- ~[2]
[19:32:12] <TeXitoi> rusti: let v = [1,2,3]; v.iter().filter(|&&i| i % 2 == 0).map(|i| *i).to_owned_vec()
[19:32:12] -rusti- pastebinned 6 lines of output: http://sprunge.us/IJTe
[19:32:55] <kimundi> rustc doesn't like && as anything else than the binary and operator :P
[19:33:57] <TeXitoi> kimundi: but rustc - --pretty normal change |& &i| by |&&i|...
[19:34:23] <FreeFull> Is there any time when a binary and would make sense in that context?
[19:34:33] <kimundi> rusts pretty printer is broken in that regard :p
[19:35:03] <kimundi> FreeFull: No, there could in fact be a special rule for && as a prefix
[19:35:03] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[19:35:09] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[19:35:13] <kimundi> FreeFull: So that it would work
[19:35:33] <TeXitoi> I try to add http://texitoi.eu/~texitoi/k-nucleotide/shootout-meteor-contest.rs in the src/tests/bench/ dir and --pretty test fail :/
[19:35:33] <FreeFull> Maybe if Rust had something like view patterns
[19:36:27] <kimundi> TeXitoi: Just move the deref into the closure body
[19:36:41] <kimundi> rusti: let v = [1,2,3]; v.iter().filter(|&i| *i % 2 == 0).map(|i| *i).to_owned_vec()
[19:36:41] -rusti- ~[2]
[19:36:52] <kimundi> rusti: let v = [1,2,3]; v.iter().filter(|i| **i % 2 == 0).map(|i| *i).to_owned_vec()
[19:36:53] -rusti- ~[2]
[19:36:53] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[19:39:22] <TeXitoi> kimundi: should I fill a bug report
[19:40:33] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[19:40:52] <kimundi> TeXitoi: Not sure if one is already open. If you don't find one, just open one :)
[19:41:16] <TeXitoi> kimundi: ok, thanks
[19:42:52] *** Joins: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net)
[19:43:09] *** Joins: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP)
[19:44:26] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[19:45:38] <TeXitoi> Mmm, is there a search on github? I can't find it :/
[19:45:57] <TeXitoi> OK, at the top...
[19:47:13] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[19:49:41] <myname> bug report to github: add a search search
[19:49:47] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[19:50:03] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[19:50:03] *** ChanServ sets mode: +o tjc
[19:50:16] <kimundi> They had a seperate serchbar for issues once, then they merged it :P
[19:50:31] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[19:52:31] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo)
[19:53:28] *** Joins: heftig (heftig@moz-A41AF02E.dip0.t-ipconnect.de)
[19:54:41] *** Quits: tikue (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue)
[19:55:35] *** Quits: Sorella_ (quildreen@D2D1E5DD.81EFC25A.A95FAE2B.IP) (Quit: Ex-Chat)
[19:55:50] *** Quits: Kruppe (user@moz-43706AAA.eng.wind.ca) (Ping timeout)
[19:59:55] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[20:00:57] *** Quits: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu) (Ping timeout)
[20:01:41] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Ping timeout)
[20:03:37] *** Joins: alan (alan@moz-FE02DD30.sat6.rackspace.com)
[20:06:30] *** Quits: avsej (avsej@D9A610B8.4841F515.FB33447D.IP) (Ping timeout)
[20:06:43] *** Joins: avsej (avsej@D9A610B8.4841F515.FB33447D.IP)
[20:07:57] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Quit: Sharp)
[20:10:32] *** Joins: maxiepoo (Max@moz-13F4F196.nuwlan.northwestern.edu)
[20:10:52] *** Joins: bynaryshef (bynaryshef@moz-433ADB5E.mem.bellsouth.net)
[20:11:00] *** Quits: bytewise (bytewise@moz-AB9A0CEA.eduroam.rwth-aachen.de) (Ping timeout)
[20:11:05] *** Quits: bynaryshef (bynaryshef@moz-433ADB5E.mem.bellsouth.net) (Client exited)
[20:11:12] *** Joins: bytewise (bytewise@moz-AB9A0CEA.eduroam.rwth-aachen.de)
[20:12:02] *** Joins: anri (solancile@moz-E49E7C4B.hsd1.wa.comcast.net)
[20:12:56] *** Quits: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP) (Quit: Leaving.)
[20:15:39] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[20:17:34] *** Quits: bytewise (bytewise@moz-AB9A0CEA.eduroam.rwth-aachen.de) (Ping timeout)
[20:17:43] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Client exited)
[20:18:52] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[20:19:17] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[20:19:29] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[20:19:29] *** ChanServ sets mode: +o pnkfelix
[20:20:07] *** Quits: maxiepoo (Max@moz-13F4F196.nuwlan.northwestern.edu) (Quit: maxiepoo)
[20:20:50] *** Joins: maxiepoo (Max@moz-13F4F196.nuwlan.northwestern.edu)
[20:23:04] *** Joins: GGpin (hell@moz-CF3E31A5.cst.lightpath.net)
[20:24:12] *** Quits: GGpin (hell@moz-CF3E31A5.cst.lightpath.net) (Quit: Falling asleep)
[20:24:12] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[20:25:30] *** Quits: Ms2ger (Ms2ger@B7B2FF50.C60A97A6.F9FB0584.IP) (Quit: nn)
[20:25:41] <Scriptor> alright, to elaborate on what I said earlier, does Rust support bit arrays in any way?
[20:28:53] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[20:29:04] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[20:33:12] <kimundi> Scriptor: WHat do you meant with 'supporting'?
[20:33:48] <Scriptor> supporting's a poor word, whether there's anything like one in the standard library, I guess
[20:34:10] <kimundi> Hm, not sure if theres anything in the stdlib
[20:34:37] <kimundi> WHat usecase do you have in mind?
[20:35:04] <Scriptor> something for work that I can't divulge too much on
[20:35:08] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Quit: Sharp)
[20:35:27] <Scriptor> but otherwise maybe I'll try implementing one
[20:35:31] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[20:36:40] <kimundi> What I mean is, what is a bit array exactly?
[20:37:56] *** Quits: nejucomo (Adium@moz-C07D5168.p2p.sfo1.mozilla.com) (Ping timeout)
[20:38:05] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[20:38:22] <Scriptor> kimundi: so one unsigned int32 can only represent a 32-bit bitmap (obviously)
[20:38:39] <kimundi> yeah
[20:38:42] <Scriptor> a bit array would chain together several integers so that you could theoretically have bitmaps of any number of bits
[20:38:57] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[20:39:13] <Scriptor> and abstract out regular bitwise operations on it
[20:39:13] <kimundi> A, so basically just a ~[bool] with a more efficient representation :)
[20:39:19] <Scriptor> yep :)
[20:39:53] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[20:39:57] <Scriptor> I know very little Rust, so I figure this'll force me to learn enough along the way
[20:40:09] <FreeFull> You could probably make your own pretty easily
[20:41:23] <rossm> if you make one of those, you're most of the way to a BigInteger class or something like that
[20:41:35] <Scriptor> hmm
[20:41:51] <FreeFull> I think an arbitrary size bit array isn't the best way to implement big integers
[20:42:01] <FreeFull> libgmp uses some sort of tree
[20:43:31] *** Quits: jordyd (jordyd@moz-383C39FB.seg58.ucf.edu) (Ping timeout)
[20:44:45] *** Quits: maxiepoo (Max@moz-13F4F196.nuwlan.northwestern.edu) (Quit: maxiepoo)
[20:45:12] <rossm> ah ok
[20:45:21] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[20:45:30] *** Joins: pcwalton (pcwalton@9C2E78E6.8C982E60.292610BC.IP)
[20:45:30] *** ChanServ sets mode: +ao pcwalton pcwalton
[20:46:50] *** Joins: josh (josh@62C71C0D.D6F172E7.2A2F4638.IP)
[20:48:11] *** Joins: jordyd (jordyd@moz-383C39FB.seg58.ucf.edu)
[20:50:15] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[20:51:22] *** Quits: kellogh (timkellogg@moz-68DF7EF7.teliax.com) (Quit: kellogh)
[20:52:34] *** Joins: xexio (xexio@E0B6D10F.3DF1D9C2.E62F6450.IP)
[20:52:45] *** Quits: Jackneill (Jackneill@moz-ED030615.pool.digikabel.hu) (Input/output error)
[20:53:40] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[20:54:49] *** Joins: CarpNet (Alasdair@moz-25C796BC.cable.virginm.net)
[20:57:44] *** Quits: anri (solancile@moz-E49E7C4B.hsd1.wa.comcast.net) (Ping timeout)
[20:58:33] *** Quits: jordyd (jordyd@moz-383C39FB.seg58.ucf.edu) (Ping timeout)
[20:58:40] *** Joins: jgilbert (jgilbert@moz-B37E0934.npg.sta.suddenlink.net)
[20:59:01] *** Quits: dradtke (dradtke@moz-849051B9.il.subnet.cable.rcn.com) (Connection reset by peer)
[21:02:18] *** Quits: xexio (xexio@E0B6D10F.3DF1D9C2.E62F6450.IP) (Ping timeout)
[21:02:43] *** Joins: jordyd (jordyd@moz-383C39FB.seg58.ucf.edu)
[21:02:50] *** Joins: dherman (dherman@9C2E78E6.8C982E60.292610BC.IP)
[21:02:50] *** ChanServ sets mode: +ao dherman dherman
[21:03:33] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[21:07:00] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[21:07:02] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[21:07:34] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[21:07:58] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[21:08:17] *** Joins: Janko (chatzilla@D9AEFC3E.9E37BD61.9C3D12F2.IP)
[21:08:23] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[21:09:39] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[21:11:54] *** Quits: josh (josh@62C71C0D.D6F172E7.2A2F4638.IP) (Ping timeout)
[21:12:33] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[21:13:21] *** Quits: jgilbert (jgilbert@moz-B37E0934.npg.sta.suddenlink.net) (Ping timeout)
[21:14:05] *** Joins: canhtak (canhtak@moz-24D0A1FD.wl.t.ulaval.ca)
[21:14:27] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[21:16:37] <sfackler> Scriptor: yes, extra::bitv
[21:16:51] *** Quits: lolwat (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[21:17:13] <Scriptor> ah, sweet
[21:19:39] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[21:19:39] *** ChanServ sets mode: +o tjc
[21:20:07] *** Quits: jordyd (jordyd@moz-383C39FB.seg58.ucf.edu) (Ping timeout)
[21:20:38] *** Quits: victorporof (victorporo@9B024C76.73B1E539.9B1E38F4.IP) (Ping timeout)
[21:20:42] *** Quits: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP) (Ping timeout)
[21:21:38] *** Joins: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP)
[21:21:45] *** Joins: jordyd (jordyd@moz-383C39FB.seg58.ucf.edu)
[21:23:41] *** Quits: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP) (Ping timeout)
[21:25:37] *** Quits: Liothen (liothen@moz-266BCA86.spkn.qwest.net) (Ping timeout)
[21:26:22] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[21:27:14] *** Joins: boredomist (ruqs@8186917.CC8FA3EE.E3401B6E.IP)
[21:31:15] *** Joins: JoelMcCracken (user@5A0F344D.918A71DA.60E22FEA.IP)
[21:32:24] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[21:32:53] *** Joins: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP)
[21:36:04] *** Quits: jordyd (jordyd@moz-383C39FB.seg58.ucf.edu) (Ping timeout)
[21:37:45] *** Joins: jordyd (jordyd@moz-383C39FB.seg58.ucf.edu)
[21:39:08] *** Joins: Skif_ (emschwar@moz-4C5BB5A8.beyondbb.com)
[21:39:08] *** Quits: Skif (emschwar@moz-4C5BB5A8.beyondbb.com) (Connection reset by peer)
[21:39:13] *** Joins: jensnockert (jensnocker@moz-5D53B643.cust.bredband2.com)
[21:40:09] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[21:41:35] *** Joins: Skif (emschwar@moz-4C5BB5A8.beyondbb.com)
[21:41:35] *** Quits: Skif_ (emschwar@moz-4C5BB5A8.beyondbb.com) (Connection reset by peer)
[21:47:37] *** Quits: jensnockert (jensnocker@moz-5D53B643.cust.bredband2.com) (Input/output error)
[21:50:06] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[21:52:34] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[21:54:19] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[21:54:43] *** Joins: nejucomo (Adium@moz-C07D5168.p2p.sfo1.mozilla.com)
[21:56:18] *** Joins: Savago (Savago@D8B9C081.E820043D.D4C04133.IP)
[21:56:59] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[21:57:39] *** kimundi is now known as zz_kimundi
[21:58:26] *** Joins: pnathan (Adium@moz-E3C3FAF2.hfc.comcastbusiness.net)
[21:58:27] *** Quits: JoelMcCracken (user@5A0F344D.918A71DA.60E22FEA.IP) (Ping timeout)
[22:00:51] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[22:01:08] *** Joins: geoffhill (geoffhill@moz-738DC0DB.org)
[22:02:55] *** Quits: Palmik (palmik@moz-DEC2AB.pks.muni.cz) (Quit: Lost terminal)
[22:04:55] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[22:06:50] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[22:06:53] *** Joins: jensnockert (jensnocker@moz-5D53B643.cust.bredband2.com)
[22:11:52] *** Joins: jviereck (Adium@moz-CF8216D6.dip0.t-ipconnect.de)
[22:18:34] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[22:20:18] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[22:22:06] *** Joins: brendan (brendaneic@1865C1F9.ECF92FCA.CDBA6951.IP)
[22:23:17] *** Joins: Kruppe (user@moz-9A6FCE9E.cable.teksavvy.com)
[22:24:14] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[22:26:36] *** Quits: Janko (chatzilla@D9AEFC3E.9E37BD61.9C3D12F2.IP) (Ping timeout)
[22:28:36] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[22:28:52] *** Joins: Janko (chatzilla@D9AEFC3E.9E37BD61.9C3D12F2.IP)
[22:29:09] *** Quits: Janko (chatzilla@D9AEFC3E.9E37BD61.9C3D12F2.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 28.0a1/20131112153009])
[22:30:22] <Thiez> rusti: trait A{} trait B{} impl<T: A> B for T{} impl<T: B> A for T{} fn foo<T:A>(_:T) { println!("foo!"); } foo(3)
[22:30:22] -rusti- Segmentation fault
[22:30:22] -rusti- application terminated with error code 139
[22:30:26] <Thiez> that a known bug? :)
[22:31:01] *** Joins: frogzilla (Mibbit@9E3D9565.2BD3C9FB.4555788E.IP)
[22:31:40] <frogzilla> hey guys
[22:31:42] <dbaupp> Thiez: https://github.com/mozilla/rust/issues/8762
[22:32:52] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo)
[22:33:10] <Thiez> oh, the 'trait A<T:A> {}' is even nicer
[22:33:41] <sam113101> rusti: trait A<T:A> {}
[22:33:41] -rusti- Segmentation fault
[22:33:41] -rusti- application terminated with error code 139
[22:33:45] <frogzilla> I want some functional programming guide of rust,can some one help
[22:34:59] <pnathan> what do you need, precisely?
[22:35:11] <sam113101> read the tutorial/manual
[22:35:42] <sam113101> you can't do functional programming without understanding the rest, anyway
[22:36:31] <frogzilla> I am newbie of rust,just want some tutorial 
[22:36:36] *** Joins: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP)
[22:37:05] <sam113101> frogzilla: http://static.rust-lang.org/doc/master/tutorial.html
[22:37:06] <frogzilla> And I prefer functional style
[22:37:18] <pnathan> frogzilla: do you need help learning functional programming, or do you need help learning rust?
[22:38:04] <frogzilla> Both, I want start rust with functional
[22:38:35] *** Quits: geoffhill (geoffhill@moz-738DC0DB.org) (Input/output error)
[22:38:56] <pnathan> frogzilla: that's doing things "hard mode", as Rust's docs are not always complete or correct. The tutorial and manual will help you with Rust itself.
[22:39:07] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[22:39:24] <pnathan> I would encourage you to look into Real World Haskell and maybe Real World OCaml for some help learning Functional Programming, they have similarities with Rust.
[22:39:37] <TeXitoi> frogzilla: what other language do you know ?
[22:40:12] <frogzilla> c and python
[22:40:36] <Thiez> frogzilla: http://learnyouahaskell.com/ is a pretty good tutorial for haskell (even though it doesn't look very serious)
[22:42:01] <TeXitoi> frogzilla: I don't think rust will be the best language to learn functional programming, even if you can have a quite functional style in rust
[22:42:36] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[22:42:47] <frogzilla> [It supports a mixture of imperative procedural, concurrent actor, object-oriented and pure functional styles] 
[22:42:54] <Scriptor> yes
[22:42:58] <frogzilla> is it?
[22:43:00] <frogzilla> oh
[22:43:01] <Scriptor> it's possible to write functionally in Rust
[22:43:19] <Scriptor> but if you want guides to also help you learn fp other languages have better resources for now
[22:43:38] <pnathan> https://realworldocaml.org/ <— The ML family is a big influence on Rust; this is a just released book on OCaML
[22:44:16] <TeXitoi> frogzilla: as you know C and phython, you'll be more confortable with imperative procedural/object oriented style
[22:44:18] <frogzilla> I will take a look of this thks
[22:45:10] <TeXitoi> frogzilla: so it will be hard to force using functional style
[22:45:24] *** Quits: jviereck (Adium@moz-CF8216D6.dip0.t-ipconnect.de) (Quit: Leaving.)
[22:45:43] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[22:46:32] <frogzilla> I just try something new,I have already learn some functional programming from python
[22:47:22] <frogzilla> May be I should try Ocaml first
[22:47:31] *** Quits: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) (Quit: Savago)
[22:47:33] <frogzilla> thanks
[22:48:00] <TeXitoi> frogzilla: if you want to try rust, then try the tutorial, and look at the iter module
[22:48:11] * TeXitoi prefere Haskell ;)
[22:49:53] *** Quits: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net) (Ping timeout)
[22:50:57] <doublec> +1 on real world ocaml. It's a great book for learning MLish families of languages.
[22:51:18] *** flaper87 is now known as flaper87|afk
[22:51:27] <frogzilla> I heard that haskell is not a industry language,so ocaml may be a good choice for me
[22:53:01] <pnathan> Both are probably about the same as far as industry goes. My guess is that a Haskell shop would hire an OCaml programmer & vice versa
[22:53:14] *** Quits: brendan (brendaneic@1865C1F9.ECF92FCA.CDBA6951.IP) (Quit: brendan)
[22:53:21] <pnathan> AFAICT, FP shops aren't as hooked on precise language knowledge as typical OO shops.
[22:54:15] *** Joins: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net)
[22:54:18] *** Joins: jviereck (Adium@moz-CF8216D6.dip0.t-ipconnect.de)
[22:55:55] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[22:57:36] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Ping timeout)
[22:57:55] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[22:59:39] *** Quits: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP) (Quit: lmandel)
[23:00:37] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Ping timeout)
[23:01:12] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[23:01:22] *** Quits: dew1 (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[23:01:26] *** Quits: CarpNet (Alasdair@moz-25C796BC.cable.virginm.net) (Quit: Leaving)
[23:01:35] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[23:04:06] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[23:04:06] *** ChanServ sets mode: +o tjc
[23:05:59] *** Quits: Kruppe (user@moz-9A6FCE9E.cable.teksavvy.com) (Ping timeout)
[23:07:24] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: night)
[23:07:25] <tjc> frogzilla: If anything, Haskell is more of an industry language than Ocaml is. Though both are still considered "niche" in industry
[23:08:48] <Scriptor> I wonder if ocaml has more adoption in france
[23:09:12] *** Quits: pcwalton (pcwalton@9C2E78E6.8C982E60.292610BC.IP) (Quit: pcwalton)
[23:09:15] *** Quits: frogzilla (Mibbit@9E3D9565.2BD3C9FB.4555788E.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[23:09:17] <tjc> Scriptor: My impression is Ocaml is much more popular than Haskell in France, but I'm not sure how many other countries there are where that's true :-)
[23:09:27] <tjc> since lots of the core developers are French
[23:09:43] <TeXitoi> Scriptor: OCaml is popular at the university
[23:09:48] <tjc> cmr: I know it's been a while, but at one point you said you were seeing a rustpkg assertion failure on your rustpkg/test branch...
[23:09:54] <tjc> I think my most recent landed pull request fixed it
[23:10:11] <tjc> I pulled your branch and rebased it off master to test it, but I still saw some test failures (none of them seem related to that assertion, though)
[23:11:09] <sfackler> tjc: does this make any sense to you? https://github.com/mozilla/rust/issues/10395
[23:11:57] <olsonjeffery> strcat: you aren't gonna go turbo on us, are you?
[23:12:07] <strcat> turbo? ;p
[23:12:18] <olsonjeffery> see: wreck-it-ralph
[23:12:23] *** Quits: dherman (dherman@9C2E78E6.8C982E60.292610BC.IP) (Quit: dherman)
[23:12:26] <strcat> I am just pushing for something I don't think is really going to happen before developing something on my own
[23:12:47] * strcat hasn't *really* put any non-trivial work into rust-core yet... just poking at it and fixing some rustc bugs
[23:13:07] * ChrisMorgan wonders why rustpkg seems to take no action on -O
[23:13:08] <olsonjeffery> strcat: i think the right direction is to push on generalizing scheduler and eventloop so that it has the abstractions to suppose 1:1 M:N as different strategies...
[23:13:24] <strcat> olsonjeffery: but I want to be able to write #[thread_local] static mut x = 5; like C++
[23:14:15] <strcat> I want to be able to set affinity, scheduling mode (batch, round-robin for real-time), priority and so on
[23:14:30] <strcat> I want memory mapped I/O by default (it's 2013)
[23:14:58] <strcat> I want something that's a ridiculous improvement over C++11, not a sidegrade
[23:15:37] <bjz> any ideas on why I might be getting "error: can't find crate for `std`"? the error just give the first line of my root module
[23:15:38] <olsonjeffery> have anyone brought up the phobos/tango split, yet?
[23:15:54] *** Quits: Skif (emschwar@moz-4C5BB5A8.beyondbb.com) (Ping timeout)
[23:16:13] *** Quits: jviereck (Adium@moz-CF8216D6.dip0.t-ipconnect.de) (Quit: Leaving.)
[23:16:13] <olsonjeffery> because i think it should be mentioned. the damage that did to the community. i mean, email isn't a good medium for communicating intent, but it kind of seems like you're pushing a major library schism in order to advance your hobby horse.
[23:16:25] *** Joins: Skif (emschwar@moz-4C5BB5A8.beyondbb.com)
[23:16:25] <olsonjeffery> and i say that as someone who has great respect for your contributions to the rust ecosystem to date
[23:16:49] <strcat> I will still keep pushing for making the same changes upstream
[23:16:52] <olsonjeffery> i think patrick put forward a really constructive proposal
[23:17:01] <strcat> but I won't not make the changes in rust-core if they get rejected upstream and I think they're right
[23:17:13] <bjz> tjc: is the task '<unnamed>' failed at 'assertion failed: pkg_src.start_dir.join(p).exists()', fixed in an outstanding pull?
[23:17:16] <strcat> unless they're just silly naming issues or something
[23:17:21] <strcat> I don't care about that, I'll match the stdlib
[23:17:26] <bjz> tjc: wasn't quite sure
[23:17:26] *** Quits: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP) (Ping timeout)
[23:18:27] <bjz> tjc: I'm trying to build gfx-rs/src/gen/
[23:18:28] <olsonjeffery> strcat: and it's certainly not fair to ask you to prove a negative.. but have you done the due dillgence to see if you can get the runtime semantics you want within the auspice of providing an EventLoop impl for scheduler that uses the native APIs you'd prefer?
[23:18:36] *** Quits: jensnockert (jensnocker@moz-5D53B643.cust.bredband2.com) (Input/output error)
[23:18:46] <bjz> tjc: I install sax-rs to my RUST_PATH
[23:18:52] <strcat> olsonjeffery: the semantics I want are 1:1 threading and the guarantee of task == thread, so that thread local == task local and so on
[23:19:02] <strcat> if it's not a guarantee, you can't program to it
[23:19:18] <bjz> tjc: and then try running `rustpkg install` from the src/gen/ directory
[23:19:19] *** Quits: moostik (Icedove@5A22E6A1.10715965.BCDF592F.IP) (Ping timeout)
[23:19:33] <bjz> task '<unnamed>' failed at 'assertion failed: pkg_src.start_dir.join(p).exists()', /Users/brendan/dev/rust/rust/src/librustpkg/lib.rs:520
[23:19:33] <bjz> task '<unnamed>' failed at 'receiving on closed channel', /Users/brendan/dev/rust/rust/src/libstd/rt/comm.rs:198
[23:20:03] <bjz> then I try doing: rustc -L .rust/build/*/github.com/bjz/sax-rs/ src/gen/main.rs
[23:20:16] <bjz> which gives:
[23:20:24] <bjz> src/gen/main.rs:1:0: 1:0 error: can't find crate for `std`
[23:20:24] <bjz> src/gen/main.rs:1 // Copyright 2013 The gl-rs developers. For a full listing of the authors,
[23:20:31] <bjz> :/
[23:20:31] <strcat> olsonjeffery: I trust the OS developers who decided M:N threading was a terrible idea, years ago, and the same developers who don't care about AIO support in the linux kernel
[23:20:42] <strcat> I feel like rust is going way against the whole "use proven technology" goal here
[23:21:02] <strcat> 1:1 threading is proven technology, it works, it scales - sure, nginx doesn't use it, but it can't use M:N threading either
[23:21:10] <mark_edward> what i dont understand About the RawPtr::offset method is, if it takes an int, doesn't that utoff a big bit of the the address space in the argument? ie if i need to do `p.offset(-(q  as int))` but q needed the MSB because it was big?
[23:21:29] <strcat> if context switches are a problem, a patch for the linux kernel adding another scheduler mode are in order
[23:21:44] <strcat> that's how I believe this should be approached - not in isolation, and not placing proprietary systems so high on the priority list
[23:21:49] <strcat> my priorities != rust's priorites
[23:21:50] <pnathan> strcat: can you comment on threading WRT using non-Linux operating systems & typical RTOS systems?
[23:21:53] <strcat> priorities*
[23:22:08] *** Joins: dradtke (dradtke@moz-849051B9.il.subnet.cable.rcn.com)
[23:22:09] <strcat> pnathan: well, POSIX has a lot of real-time features
[23:22:20] <sam113101> strcat: I don't understand your terminology, does 1:1 mean one thread for one core? what does M:N mean?
[23:22:27] <strcat> 1:1 threading works well for real-time, there's stuff like FIFO scheduling where it doesn't preempt
[23:22:36] <strcat> sam113101: 1:1 threading means task == thread
[23:22:44] <pnathan> strcat: No. I mean like QNX & VxWorks.
[23:22:55] <pnathan> Not Posix at all.
[23:23:10] <strcat> well, I don't know about that, but C11/C++11 have threads, atomics, and thread_local so it must work there
[23:23:18] <sam113101> what about M:N?
[23:23:20] <dradtke> Just submitted my first Rust bug report; apparently it doesn't like it when you try to pass an iterator to a function. https://github.com/mozilla/rust/issues/10467
[23:23:41] <strcat> any important group who objected to it could have blocked it from being standardized or brought up concerns
[23:24:28] <strcat> sam113101: ok so with 1:1 threading, each task has thread-local storage, affinity, priority, a thread ID and you can safely do any blocking calls on it without worrying
[23:24:32] <strcat> or churn the CPU as much as you want
[23:24:46] <strcat> it will preempt and do fair-ish scheduling
[23:25:08] <strcat> M:N means you have say, 4 threads, and 600 tasks
[23:25:13] <pnathan> strcat: that's not a valid answer. Many groups don't pay attention to new languages and the churn of the F/OSS world until things get really huge
[23:25:24] <strcat> pnathan: C/C++ aren't new languages
[23:25:43] <strcat> I mean there are *national bodies* heavily involved in the standards process, lots of groups have vested interests in C/C++
[23:25:56] *** Quits: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[23:25:57] <pnathan> Unless you have reps from Intel & Green Hills on the hook to respond, you can't claim they had an opportunity to respond 
[23:26:09] <tjc> sfackler: Sorry, got distracted. Yes, that makes sense -- I can believe that the test code doesn't correctly use workcache to not re-run tests if dependencies haven't changed
[23:26:10] <pnathan> Rust simply isn't large enough to demand attention
[23:26:18] <strcat> pnathan: not talking about rust
[23:26:18] <pnathan> Unlike C++ & C
[23:26:20] <strcat> talking about C
[23:26:26] <strcat> talking about the Linux kernel
[23:26:27] <strcat> and glibc
[23:26:31] <strcat> they dropped M:N scheduling
[23:26:48] <sfackler>  tjc: it's not the re-running that's weird it's the fact that it runs *different tests*
[23:26:58] <strcat> windows 7/8 has user-mode scheduling and it's presented as a replacement for fibers
[23:27:02] <olsonjeffery> strcat: i feel like the current scheduler could pretty much accomadate what you're asking for. the only thing that isn't in EventLoop is threading stuff, which happens external to the Scheduler. maybe thread/greenlet context acquisition could move into the eventloop ?
[23:27:03] <strcat> with no drawbacks
[23:27:12] <tjc> sfackler: oh, hmm
[23:27:20] <olsonjeffery> also use of the term "M:N scheduling" is misleading here because it implies that newsched has multiple strategies, and it doesn't.
[23:27:22] <olsonjeffery> it's 1:N
[23:27:27] <mark_edward> bjz: can you answer  the question i asked earlier?
[23:27:36] <strcat> olsonjeffery: it's M:N because tasks can move threads
[23:27:49] <strcat> if you spawn a task and init NSS, it can be moved to another thread and you're screwed - you'd have to pin it
[23:27:55] <tjc> sfackler: my guess is it's assuming there's only one test crate, and weird things happen if there's more than one
[23:28:02] <dbaupp> mark_edward: no, int and uint represent exactly the same range
[23:28:12] <sfackler> olsonjeffery: M:N is standard terminology for scheduling M logical threads on N kernel threads
[23:28:23] <dbaupp> mark_edward: well, when you add and subtract them, it makes no difference if the type is 'int' or if it's 'uint'
[23:28:37] <strcat> olsonjeffery: glibc used to do M:N scheduling
[23:28:39] <olsonjeffery> strcat: so then boil that stuff down into a heuristic/call on EventLoop and let the backend impl deal with it?
[23:28:43] <mark_edward> dbaupp: what do you mean? uint rhas a higher max val, and there's no such thing as a negative pointer?
[23:28:43] <dbaupp> mark_edward: (`uint as int` and vice versa have exactly the same bit representations)
[23:28:47] <strcat> context switches were viewed as too slows, syscalls were viewed as too slow
[23:28:50] <olsonjeffery> whether a task should be able to relocate to another scheduler
[23:28:57] <o11c> the issue I see here is that Rust requires you to create tasks just so they can fail!
[23:29:00] <dbaupp> mark_edward: the pointer arithmetic wraps, effectively
[23:29:05] <strcat> they improved it with stuff like futex to the point where they viewed M:N scheduling as worthless, and moved to 1:1
[23:29:07] <olsonjeffery> make work-stealing optional on a per-Scheduler-impl basis
[23:29:19] <tjc> sfackler: I wrote another comment on the bug to clarify what I think is happening. Good bug report, probably won't get fixed this week, though
[23:29:35] <mark_edward> dbaupp: ah, ok got it
[23:29:36] <o11c> even on Linux which is fast, you do not want to create an OS thread for trivial, blocking tasks
[23:29:39] <strcat> olsonjeffery: I don't want any of that complication, I just want KISS threads where stuff like SSE/AVX Just Work and a debugger works
[23:29:45] <sfackler> tjc: cool, thanks :)
[23:29:50] <strcat> o11c: user-mode scheduling says you do
[23:29:58] <strcat> o11c: threads are no heavier than rust tasks in terms of resources
[23:30:09] <strcat> they have faster TLS too
[23:30:14] <strcat> so you can happily abuse it for everything
[23:30:26] <strcat> and you can have statically initialized TLS
[23:30:37] <o11c> what need does rust have for TLS?
[23:30:37] <olsonjeffery> this is an interesting tension.
[23:30:39] <strcat> no dynamic pthread_{set,get}specific anymore (thanks C++11)
[23:30:56] <olsonjeffery> between people who want to "move down" from erlang and people want to "move up" from c++, heh.
[23:30:58] <strcat> o11c: TLS lets you write nice frameworks like flask/bottle in python
[23:31:22] <strcat> spawn a thread per request, use TLS for a dozen 'global' objects that a local to each request
[23:31:22] <o11c> please no magic globals
[23:31:32] <strcat> sure, you don't have to use it
[23:31:33] <o11c> pass me the freaking context
[23:32:07] <strcat> rust has TLS, it's just a horrible interface compared to C++11/D
[23:32:09] <o11c> incidentally ... what I'm really wanting as I learn Rust is something like pydoc
[23:32:16] <strcat> thread_local int x = 5;
[23:32:21] <strcat> use it as if it's a global
[23:32:31] <strcat> Just Works, and is *as fast* as accessing a global in a statically linked executable
[23:32:45] <strcat> it's just an offset
[23:32:49] <strcat> pthreads know how to copy the section per thread
[23:33:22] <strcat> lets say I want to use existing libraries, like libmagic
[23:33:23] <o11c> we were talking about a BSD bug related to TLS the other day in OFTC#llvm
[23:33:29] <strcat> the fact is that they all do blocking I/O
[23:33:57] <o11c> I'm not denying the usefulness of threads in general
[23:34:06] <strcat> the only way you're going to get a userspace scheduler with support for the existing huge library ecosystem in C is via 1:1 threading and user-mode scheduling support
[23:34:30] <o11c> but I think it's silly to create a new thread for a task that I'm going to block on anyway
[23:34:42] <strcat> o11c: a thread doesn't take more time to spawn than a task
[23:34:56] <strcat> and they use the same resources (8MiB stack makes kernel scheduler resources negligible)
[23:35:16] <strcat> if it blocks, it context switches away from it until it's done
[23:35:42] <strcat> the overhead is that it tries to do fair scheduling, and preempts
[23:35:56] <strcat> Google wants an opt-out of that in favour of a userspace scheduler and Microsoft already has this
[23:36:05] <strcat> (well, Google has it - they just didn't get it upstream yet)
[23:36:45] <strcat> if rust doesn't use it, there will be a better rust without the complexity of rust's concurrency using it
[23:37:12] <aatch> olsonjeffery, the issue I have with the tension is that we have a million languages that are more erlang-like. Performance nuts have been waiting decades for something to supplant C++
[23:37:36] <strcat> there are a million languages for writing servers
[23:37:52] <strcat> there is no viable replacement for C++, especially when you look at what C++11/C++14 offer
[23:37:59] *** Joins: tikue (tkuehn@561622AD.21C37D63.689607DE.IP)
[23:38:37] <strcat> you aren't going to beat Go for writing servers. you can beat C++ and languages like Java, and fill a niche begging for a better language
[23:40:07] <strcat> slower than Haskell/Go for servers and slower than C++ for everything else doesn't get rust anywhere
[23:40:21] <pnathan> my opinion is that Rust is a great start for embedded systems & safety critical systems and that decisions should be made in the light of correctness, predictability, and safety.
[23:40:47] <strcat> 1:1 threads is simple, robust and predictable
[23:41:03] *** jorendorff is now known as jorendorff_away
[23:41:13] <aatch> pnathan, that's my view too. People get too caught up in the concurrency stuff in rust and forget that many people come for the memory-related semantics.
[23:41:29] <strcat> it involves minimal work on the rust side to implement, it's well-charted territory and rust can provide the unique ability of not having data races but not having to copy memory between threads
[23:41:36] *** Joins: brendan (brendaneic@1865C1F9.ECF92FCA.CDBA6951.IP)
[23:41:36] <olsonjeffery> i agree that chasing perf is good. and maybe this is a red herring, but not sure TLS globals is the critical feature to push in advocating for it.
[23:42:02] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[23:42:09] <strcat> rust's stat is 35x slower than C
[23:42:11] <strcat> other I/O is similar
[23:42:35] <Earnestly> Wait, 35 *×* slower?
[23:42:37] <olsonjeffery> has acrichto wired up a native stat impl, yet?
[23:42:39] *** Quits: canhtak (canhtak@moz-24D0A1FD.wl.t.ulaval.ca) (Quit: canhtak)
[23:42:39] <olsonjeffery> no?
[23:42:42] <strcat> olsonjeffery: it uses libuv
[23:42:52] <acrichto> olsonjeffery: I am doing so right now :)
[23:43:07] <strcat> supporting both lowers everything to the lowest common denominator
[23:43:16] <strcat> if libuv is missing a field, so is the API
[23:43:31] <strcat> if libuv does things a certain way, rust will
[23:43:50] <olsonjeffery> strcat: i have mentioned creeping POSIX'ism/libuv idiomatic stuff in std::io several times.
[23:43:56] <olsonjeffery> i think everyone acknowledges that
[23:43:58] <strcat> what about memory mapped I/O?
[23:44:00] *** Parts: dradtke (dradtke@moz-849051B9.il.subnet.cable.rcn.com) ()
[23:44:10] *** jorendorff_away is now known as jorendorff
[23:44:10] <strcat> it fundamentally doesn't work with M:N threading
[23:44:25] <strcat> and it's perhaps the most awesome thing about 64-bit
[23:44:36] <tikue> why can't Rust fundamentally beat Go at writing servers?
[23:44:38] <strcat> the fact that you can treat files as arrays
[23:44:52] <aatch> tikue, Go is micro-optimized for it.
[23:45:02] <aatch> tikue, custom calling convention and all.
[23:45:03] <strcat> tikue: Go has a precise GC and no unmanaged pointers, they can move to relocatable stacks
[23:45:11] <strcat> custom calling convention sot that a context switch can swap 3 registers
[23:45:16] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[23:45:16] <bjz> tjc: any ideas?
[23:45:17] <strcat> incredibly slow FFI
[23:45:22] <strcat> they reinvented all of libc
[23:45:25] <strcat> they do the system calls themselves
[23:45:27] <bjz> tjc: sorry
[23:45:44] <strcat> they make compromises that rust isn't ever going to make
[23:45:49] <strcat> they'll win at the server game
[23:46:01] <tikue> strcat: will they be orders of magnitude better?
[23:46:16] <tikue> it seems to me rust has a good server story for combined performance + safety
[23:46:17] <strcat> sure, in terms of scalability they can be
[23:46:22] <tikue> ah wow
[23:46:25] <tikue> that's nuts
[23:46:36] <strcat> they could decide a stack starts at 300 bytes and relocates over and over as it grows
[23:46:47] <strcat> it will be slow, but Go is already pretty slow - they don't care
[23:46:54] <tikue> yea
[23:47:14] <aatch> I don't care about Rust's server story. I care about its application-level story.
[23:47:29] <aatch> Where you have to talk to a million other systems over a thousand APIs
[23:47:34] <bjz> strcat: as long as they're faster than ruby and python ;)
[23:47:50] <strcat> rust is developed by smart people but so are other languages - you have to make different compromises and fill different niches, can never do everything
[23:47:54] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[23:47:57] <tjc> bjz: Sorry, was distracted. Yes, that assertion failure was fixed and landed...
[23:48:09] <bjz> tjc: which patch?
[23:48:10] <tjc> bjz: in #10342
[23:48:16] <strcat> the Go developers know exactly what they're doing - make a language that's as simple as Java and can't be beaten for writing servers, everything else comes second
[23:48:26] <strcat> (simpler* than java)
[23:48:35] <aatch> Most desktop applications I see are written in either C, C++ or Java.
[23:48:43] <strcat> the kind of simplicity that C/Unix idealized but falls so far from :P
[23:48:58] <strcat> aatch: well, I don't see anything written in Java, at least nothing I'd want to use :P
[23:49:02] <strcat> IDEs for Java
[23:49:07] <bjz> tjc: hum, I've already pulled that one...
[23:49:19] <bjz> tjc: maybe I forgot to rebuild
[23:49:25] *** Quits: alan (alan@moz-FE02DD30.sat6.rackspace.com) (Ping timeout)
[23:49:25] <bjz> tjc: I'll try again
[23:49:38] <aatch> strcat, well yeah, but it's kind of telling that for GUIs, there's not really anything outside of that in common usage.
[23:49:49] <aatch> Given that Java is pretty low there.
[23:49:52] <tjc> bjz: Yeah, make sure it rebuilt fully and try again. let me know if it doesn't work...
[23:50:02] <vadimcn> pardon for jumping in, but I am wondering, have you guys looked at the greenthreads proposal I've posted on the mailing list yesterday?    Seems relevant to all this threads/asyncs discussion, but I am getting very little feedback.
[23:50:12] <bjz> tjc: any idea about the std thing?
[23:50:23] *** Quits: brendan (brendaneic@1865C1F9.ECF92FCA.CDBA6951.IP) (Quit: brendan)
[23:50:30] <bjz> tjc: the weird thing is that sax compiles fine
[23:50:42] <mark_edward> lz4rs/ll.rs:612:54: 612:62 error: expected `,` but found `<eof>`
[23:50:42] <mark_edward> lz4rs/ll.rs:612         if unlikely!(op.offset(reff as int) as uint < STEPSIZE) {
[23:50:52] <mark_edward> how could the be an eof in my file?
[23:50:59] <vadimcn> is it really so weird that nobody bothered reading?
[23:51:13] *** Joins: pcwalton (pcwalton@9C2E78E6.8C982E60.292610BC.IP)
[23:51:13] *** ChanServ sets mode: +ao pcwalton pcwalton
[23:51:54] *** Joins: brendan (brendaneic@1865C1F9.ECF92FCA.CDBA6951.IP)
[23:52:04] <tikue> vadimcn: "The future of M:N threading" hijacked most of my brain's computing availability for mailing list threads at the moment
[23:52:06] <tjc> vadimcn: most of the members of the core team are busy this week with a work week in South Korea. I expect that's part of why there have been fewer replies to posts
[23:52:18] *** Quits: brendan (brendaneic@1865C1F9.ECF92FCA.CDBA6951.IP) (Quit: brendan)
[23:52:21] <tikue> and I don't respond on list often anyway
[23:52:21] <tjc> hope that helps -- you might consider re-posting it in 2-3 weeks if you still haven't gotten a reply then, as people will be back home :-)
[23:52:47] *** jorendorff is now known as jorendorff_away
[23:53:52] <vadimcn> oh, I see
[23:54:03] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[23:54:06] <dbaupp> mark_edward: does the macro need two arguments?
[23:54:14] <tikue> vadimcn: your green threads proposal is basically an alternate M:N threading implementation right?
[23:54:19] <dbaupp> mark_edward: the <eof> might just be the end of the macro tokens
[23:54:20] <tikue> sorry I haven't read it too closely
[23:54:58] <mark_edward> dbaupp: nopre
[23:55:10] <dbaupp> mark_edward: what's the definition of the macro?
[23:55:29] <vadimcn> tikue: yes, pretty much.   Although it could be done on top of current M:N too.
[23:56:12] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[23:56:14] *** Quits: pcwalton (pcwalton@9C2E78E6.8C982E60.292610BC.IP) (Quit: pcwalton)
[23:56:39] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[23:56:53] <mark_edward> dbaupp: https://gist.github.com/MarkJr94/7458735 it's just mimicking code that suses GCC's __builtin_expect
[23:57:38] *** Joins: anri (solancile@moz-E49E7C4B.hsd1.wa.comcast.net)
[23:57:55] *** sam113101 is now known as sam113101_afk
[23:58:04] <tjc> bjz: I'm not sure about the std thing. I can tell you what RUST_LOG flags to set to get more output so you can gist it and I can look...
[23:58:12] <tjc> but that can be after rebuilding, if you want :-)
[23:58:37] <bjz> tjc: have to head out in a few minutes :(
[23:58:39] <dbaupp> mark_edward: `x != false` is exactly the same as `x`, just btw.
[23:58:58] <tjc> bjz: no worries, feel free to file an issue, though (even if it's not minimized… linking to code is fine too)
[23:59:07] <bjz> tjc: sure
[23:59:18] <dbaupp> mark_edward: i'd guess it's a problem with the definition of expect!(), I don't know...
[23:59:21] <mark_edward> dbaupp: i know, i'm just porting things as close to verbatim as i can. i'll worry about cleaning things up once it runs correctly
