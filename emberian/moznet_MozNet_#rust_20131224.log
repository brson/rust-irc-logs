[00:01:06] <bjz> Skrylar: Traits ves enums a two sides of the same coin, but the both offer different positives/negatives
[00:01:21] <bheylin> so the add op always returns a ~str? no matter what?
[00:01:49] <bjz> bheylin: well, it needs to store the new str somewhere
[00:01:50] <dbaupp> bheylin: yes
[00:01:51] <aatch> bheylin, yes, there is an 'append' somewhere, but that requires a '~str'
[00:02:10] <bheylin> in my case
[00:02:13] <aatch> But you said "two &str into one"
[00:02:23] <bheylin> i have two &str from a ~str
[00:02:26] <bheylin> yup
[00:02:27] <Skrylar> bjz: well what i was thinking with traits is that a user's custom things don't appear alien
[00:02:32] <bheylin> so the string already exists
[00:02:59] <bjz> Skrylar: exactly
[00:03:20] <Skrylar> bjz: though.. yeah, i'm not sure if there is a way to profile if the performance/memory is being murderred by the boxing for dispatch
[00:03:24] <dbaupp> bheylin: &str is guaranteed to be a contiguous slice into an already existant string, so you can't merge two &str's into a &str unless they are exactly adjacent in memory
[00:03:29] <bjz> Skrylar: that's the benefit of using traits, they are easily extensible
[00:03:35] *** Joins: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com)
[00:03:35] <dbaupp> (which would be fairly unusual)
[00:03:47] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[00:04:03] <bheylin> i have an unusual case :) 
[00:04:20] <bjz> Skrylar: use a #[bench]?
[00:04:23] <bheylin> i messing around with a modular parser with minimal allocations
[00:04:31] <Skrylar> bjz: haven't seen that before
[00:04:40] <bjz> Skrylar: but as I say, it might not matter as much in the long term
[00:04:46] *** Joins: tikue_ (tkuehn@moz-F4812C6E.hsd1.fl.comcast.net)
[00:04:47] <glaebhoerl> type Action<T> = ~FnMut<(T,), ()>:; // rustc's complaining about `:`, saying it expects `;`
[00:04:48] <aatch> bheylin, you'll probably need to use unsafe code then.
[00:04:53] <glaebhoerl> am I doing it wrong?
[00:04:54] <bjz> Skrylar: once we get DST
[00:04:54] <bheylin> i perform two calls, the return &str and are adjacent in memory
[00:05:05] <Skrylar> bjz: yeah, i know GUIs tend to be ugly internally
[00:05:20] <aatch> glaebhoerl, try ~FnMut<(T,), ()>:();
[00:05:24] <dbaupp> bheylin: oh, you will need to write the code for that yourself :)
[00:05:56] <bheylin> dbaupp: all good
[00:05:59] <Skrylar> bjz: my main goal is mostly that the GUI 'doesnt matter', you just give some plugs as though it was a scripting language and then the scene graph is mostly its own thing
[00:06:14] <Skrylar> most GUI libs make you micromanage the GUI
[00:06:17] <bjz> Skrylar: have you seen Shoes?
[00:06:25] <aatch> bheylin, I've got a bunch of unsafe code for the same concern.
[00:06:28] <kimundi> bheylin: you could also just return byte indices instead of &str, then you can do the merging yourself without unsafe code
[00:06:31] <Skrylar> bjz: before _why disappeared i did
[00:06:35] <glaebhoerl> aatch: actually... the right syntax was ~FnMut:<(T,), ()>
[00:06:42] <bjz> Skrylar: it's still maintained
[00:06:47] <Skrylar> bjz: i also saw Morphic, which seemed neat
[00:06:53] <dbaupp> bheylin: there's some structs/methods in std::unstable::raw which may help (you'll need to check the source for that; it's not in the docs)
[00:07:06] <bheylin> aatch: that unsafe code sounds interesting :)
[00:07:17] <bheylin> kimundi: that may be the simpler option
[00:07:46] <bheylin> kimundi: each parser module has a common return tuple ATM
[00:07:59] <bheylin> kimundi: that tuple works with splices
[00:08:15] <Skrylar> brb, moving
[00:08:17] *** Quits: Skrylar (Skrylar@moz-F692F728.austin.res.rr.com) (Quit: wheee)
[00:08:22] <glaebhoerl> man, `self.subs.borrow().borrow_mut().get().mut_iter()` is bad enough before having to break it up for the borrow checker :)
[00:08:26] <bheylin> kimundi:  I'll look at making it use indicies instead and delay the slicing until a later stage
[00:08:35] <glaebhoerl> (i guess this is not new for anyone who has ever written rust code with smart pointers before)
[00:08:50] <aatch> bheylin, the X11 protocol sends back data in a format that can be used directly, but being a protocol it's all serialized, so it's like a big variable-sized struct.
[00:09:22] *** Quits: gwty (gwtypc@785CBECF.F88EC6D1.27560D6E.IP) (Ping timeout)
[00:09:31] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[00:09:37] <aatch> So I have code that does pointer arithmetic to jump to the right place in memory and casts/transmutes to the right types.
[00:10:05] <bheylin> aatch: well that's general level interesting one way or the other
[00:10:52] <aatch> bheylin, I also don't really have a huge amount of choice if I want it to be efficient, since otherwise I have to copy a ton of data.
[00:10:58] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[00:11:38] <aatch> This way reading a message is 1 or 2 reads and a single allocation and possibly a realloc.
[00:12:27] <bheylin> aatch: sounds resonable, I'm not here to judge your morally questionable unsafe code
[00:13:19] <aatch> The pattern is basically: allocate generic structure -> read message -> check size field -> if more data (realloc to final size, read into rest of memory)
[00:14:14] <aatch> bheylin, it's somewhat scary code, hence why it's as self contained as possible.
[00:14:33] <bheylin> aatch: certainly a good place for a layer
[00:14:38] *** Joins: skrylar (skrylar@moz-F692F728.austin.res.rr.com)
[00:15:01] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[00:15:06] <aatch> The only major issue is the allocated memory, which has to have some amount of public API interaction.
[00:15:32] <skrylar> i've started doing this thing where my ~/Local directory for lib installs is under Git, since I found rebase is a fantastic way of snapshotting/removing dev builds of libraries
[00:15:37] <bheylin> aatch: what sort of interaction?
[00:16:02] <aatch> bheylin, well they're returned to the API user.
[00:16:37] <aatch> I wrapped it in a smart-pointer-ish structure though.
[00:16:45] *** Joins: z0w0 (zack@moz-D4EF1469.lnse2.cha.bigpond.net.au)
[00:17:07] <bheylin> aatch: I'm not so familiar with X, but doe it deal with binary blobs a lot ?
[00:17:34] <aatch> bheylin, all the messages are straight binary, and in the endianess you ask for at connection time.
[00:17:40] <speckle> let me guess, people are just going to write assembly to get around Rust's safety features? :P
[00:17:54] <skrylar> speckle: or just 'unsafe' :P
[00:18:00] <aatch> speckle, nah, unsafe { .. } is the escape hatch here.
[00:18:16] <aatch> It's more the work needed to re-establish safety.
[00:18:25] <aatch> but thats language-independent.
[00:18:33] <aatch> And actually much easier in Rust
[00:18:45] <speckle> Right, making safety the default without silly things like GC. I like that. Thanks!
[00:19:18] <aatch> bheylin, anyway, it means that if a certain part of a message is 'int32', then I can just read it as 'i32' and it's correct.
[00:19:30] <skrylar> its largely a problem (it seems to me) that figuring out what 'the rust way' actually is for a specific problem
[00:19:54] *** Quits: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com) (Quit: Leaving.)
[00:19:58] <wycats_> the stack string solution is DST (dynamic sized type)?
[00:20:04] <aatch> No worrying about endianess issues or alignment because the protocol is designed around those issues.
[00:20:10] <SiegeLord> Is it possible to detect whether you're using native threads for tasks?
[00:20:11] <wycats_> or am I on drugs
[00:20:14] <wycats_> well... I'm on drugs
[00:20:18] <aatch> SiegeLord, should be.
[00:20:41] <SiegeLord> I'm wrapping a library with TLS, and I want to bail if the user used the wrong runtime
[00:20:50] <bheylin> aatch: do you have the code up publically?soi can rub my brain against it
[00:20:51] <SiegeLord> Err... scheduler
[00:21:22] <aatch> SiegeLord, hmm, somewhere in std::rt I think there's something.
[00:21:37] <aatch> Otherwise you might have to wait for the libgreen,libnative stuff.
[00:21:37] <SiegeLord> Ok, as long as it's not against the design of it
[00:21:59] <speckle> Now, where it might get messy is when people start trying to use OpenCL with structs from Rust, which are known to sometimes have different alignment from native structs. I wonder how OpenCL binding designers will handle that, if at all.
[00:22:03] <SiegeLord> Like I know the idea is to make libstd agnostic, but as long as the agnosticism is not forced, it's all good
[00:22:22] <skrylar> speckle: probably tell the rust user to tag their structs with C alignment? C's not going anywhere
[00:22:28] <SiegeLord> OpenCL with structs is generally the wrong way to use OpenCL
[00:22:37] <aatch> SiegeLord, it'd be considered using non-public API's (probably), but othwerwise fine.
[00:22:48] <speckle> SiegeLord, it seems that way, but unfortunately googling wouldn't give you that impression right away
[00:22:56] *** Quits: pao (pao@moz-AF905E87.fbx.proxad.net) (Quit: pao)
[00:23:11] <aatch> speckle, skrylar, structs in Rust are laid out the same as C, also, we have a #[packed] attribute
[00:23:21] <speckle> I hope Rust can somehow encapsulate OpenCL some day.
[00:23:52] <aatch> speckle, there was a paper where one of the guys was compiling OpenCL kernels written in Rust.
[00:24:03] <aatch> I'll try to dig it up.
[00:24:17] <speckle> Thanks! That sounds really awesome
[00:24:23] <aatch> http://www.cs.indiana.edu/~eholk/papers/hips2013.pdf
[00:24:33] <aatch> eholk, you there?
[00:24:46] <eholk> aatch: hi!
[00:25:02] <aatch> eholk, we're talking about OpenCL and Rust
[00:25:08] <aatch> Thought you might be interested.
[00:25:11] <eholk> yeah!
[00:25:16] <eholk> do you know about the rust-opencl bindings?
[00:26:06] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[00:26:34] <aatch> Yeah, I just though that this sentence: <speckle> I hope Rust can somehow encapsulate OpenCL some day. was somewhat relevant
[00:27:15] <speckle> eholk, no, are they any good? It seems like a lot of "bindings" are just being able to pass in an OpenCL kernel as a string of some sort
[00:27:15] <eholk> yeah, definitely
[00:27:48] <eholk> speckle: for now that's all they do, with some semi-nice wrappers and things to simplify data transfer. They're intentionally pretty low level
[00:28:21] <eholk> there is steady development from a couple of contributors on the bindings (although I haven't updated them for the latest round of Rust changes)
[00:28:22] <aatch> eholk, was there any plan of integrating the changes you made in your paper into the mainline compiler?
[00:28:37] <eholk> aatch: not anytime soon
[00:29:14] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[00:29:34] <speckle> I see, thanks!  I had a bad experience trying to use the official C++ bindings for OpenCL, because I ended up having to look at the original C code to debug my code (what's even the point of the bindings??), and even found a bug in the C++ bindings fairly quickly.
[00:30:00] *** Quits: sigma1 (sigma@C91C7F36.70518F41.9D18269F.IP) (Ping timeout)
[00:30:25] <speckle> It seems like even C++ programmers just use the C functions for OpenCL.
[00:30:29] <eholk> speckle: well, there are almost certainly bugs in the rust ones too :)
[00:30:36] <eholk> yeah, that's been what works best for me
[00:30:44] <eholk> I have a couple of c++ wrappers around the C functions that I use
[00:31:17] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[00:31:31] * aatch should read the paper before trying to interpret the graphs
[00:31:36] <speckle> The bindings have to be really high quality to be worth it, otherwise it's easier to just call/wrap them yourself (since C++ can just call C), even though it feels like reinventing the wheel.
[00:31:45] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[00:31:53] *** Quits: zmthy (Tim@moz-2B252B09.dsl.dyn.ihug.co.nz) (Ping timeout)
[00:31:54] <speckle> Same with Rust, I am guessing.
[00:31:57] <eholk> i think a fun project would be to build OpenCL code generation functions in Rust
[00:32:24] <speckle> Would the Rust directly compile into OpenCL?  Or a subset thereof?
[00:32:26] <eholk> speckle: well, the advantage of using the Rust bindings is that you have to write them anyway if you want to use OpenCL. By having a standard set of bindings, you don't have to duplicate so much work
[00:32:57] *** Quits: hacker_sam (hacker_sam@CAF68D88.572E68FD.39C3E352.IP) (Ping timeout)
[00:33:07] <speckle> Ah, so Rust generally finds it harder to call C than C++ does..
[00:33:25] <eholk> i guess I imagine doing something like syntax extensions or operator overloading to build OpenCL kernels with Rust synatx
[00:34:08] <eholk> within the next year or so I'm going to do some work on making it so you can use Harlan code from within Rust
[00:34:16] <eholk> Harlan's a new GPU DSL I'm working on for my thesis
[00:34:49] <speckle> wait, YOU wrote Harlan??
[00:34:52] <eholk> yeah :)
[00:35:06] <speckle> I saw it in tech news a while back.  That's awesome!
[00:35:14] <aatch> speckle, this is why I pinged eholk :P
[00:36:41] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[00:37:44] <aatch> rusti's back?
[00:37:50] <aatch> rusti: 1
[00:37:53] -rusti- 1
[00:38:13] <aatch> rusti: version
[00:38:13] -rusti- "rustc 0.9-pre (61f8c05 2013-10-24 13:01:18 -0700)"
[00:38:18] <aatch> yay!
[00:38:31] *** Joins: AvianFlu (AvianFlu@974D245D.130DDD13.67CD788C.IP)
[00:38:39] *** Quits: tikue_ (tkuehn@moz-F4812C6E.hsd1.fl.comcast.net) (Quit: tikue_)
[00:39:44] <skrylar> oh dear
[00:40:02] <skrylar> _context.o needed by librustrt.a, no rule to make target :|
[00:40:07] * skrylar senses this is going to be a long night
[00:42:16] <skrylar> i should look up the repo version i was using on the windows machine and regress to that, see if that one works on the linux build
[00:42:37] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[00:42:43] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: willingc)
[00:42:58] *** kimundi is now known as zz_kimundi
[00:44:20] *** Quits: bmu (chatzilla@moz-A87574A6.hsd1.pa.comcast.net) (Ping timeout)
[00:44:44] <speckle> rusti: pastebin 6 lines of output
[00:44:46] -rusti- pastebinned 6 lines of output: http://ix.io/9uJ
[00:45:13] *** Joins: zmthy (Tim@moz-2B252B09.dsl.dyn.ihug.co.nz)
[00:45:32] <o11c> skrylar: what arch and distro?
[00:45:59] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Ping timeout)
[00:46:47] * ChrisMorgan is sad; ohloh clearly haven't updated the ohcount they're using so the just-scanned rust-lang isn't recognised as possessing Rust code despite ohcount now supporting it.
[00:48:07] <Eridius> "Mostly written in C" lol
[00:48:37] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Quit: Sharp)
[00:49:07] *** Quits: diverse (diverse@moz-ED94B8D.oc.oc.cox.net) (Quit: WeeChat 0.4.2)
[00:49:09] <ChrisMorgan> And lacking a few hundred thousand lines of Rust.
[00:49:40] <wycats_> there's no way to define a sized vector that could be allocated on the stack, is there?
[00:49:44] <Eridius> hmm, I haven't looked at Ohloh in a long time, but "Most recent commit: about 2 years ago" doesn't seem quite right
[00:49:51] <wycats_> (i.e. ~[Pod] with 10 elements)
[00:50:00] <cmr> [Pod, ..10]
[00:50:05] <Eridius> apparently it doesn't recognize most stuff I'm associated with
[00:50:07] <wycats_> and that is stack-allocatable?
[00:50:09] <cmr> Yup
[00:50:12] <wycats_> let x = [Pod, ..10]
[00:50:13] <wycats_> NEAT
[00:50:14] <wycats_> <3
[00:50:17] <wycats_> that's great
[00:50:20] <Eridius> wycats_: it's a value that represents 10 Pods
[00:50:27] <ChrisMorgan> Eridius: you mean for yourself or Rust? Rust is https://www.ohloh.net/p/rust-lang
[00:50:30] <wycats_> and the compiler validates that Pod is a Pod?
[00:50:33] <Eridius> ChrisMorgan: for myself
[00:50:41] <cmr> Well, [Pod, ..10] is the type. [some_expr, ..10] would be the initializer.
[00:50:42] <wycats_> so let x = [NonPod, ..10] will fail?
[00:51:05] <cmr> wycats_: it's [T, ..N] in general, for any T
[00:51:06] <Eridius> ChrisMorgan: it seems Ohloh has to be told about contributious to projects? I thought it could just detect that crap
[00:51:07] <aatch> wycats_, no.
[00:51:20] <wycats_> let x: [Point, ..10] = [..10] ?
[00:51:20] <ChrisMorgan> Eridius: depends; if you use the same email address it can.
[00:51:23] <Eridius> I do
[00:51:33] <dbaupp> wycats_: [initial_value, .. 10]
[00:51:35] <wycats_> I guess you would want Option<Point> in that case?
[00:51:38] <dbaupp> (on the RHS)
[00:51:39] <Edwards>  Is there any documentation anywhere on the Rust/JNI stuff referenced in these two issues? https://github.com/mozilla/rust/pull/10915 https://github.com/mozilla/rust/issues/4404
[00:51:45] <cmr> wycats_: need an expression there, of type Point, to initialize it.
[00:52:03] <wycats_> cmr: let x: [Option<Point>, ..10] = [None, ..10]
[00:52:05] <wycats_> does that work?
[00:52:06] *** Quits: zmthy (Tim@moz-2B252B09.dsl.dyn.ihug.co.nz) (Ping timeout)
[00:52:08] <cmr> yup
[00:52:11] <wycats_> nice
[00:52:19] *** Joins: omegaga_ (omegaga_@B77BB5D5.F09091A8.1348A864.IP)
[00:52:41] <dbaupp> the [init, ..10] repeat syntax does require a POD type though
[00:52:44] <aatch> wycats_, you could also do [Point { x: 0, y: 0},..10]
[00:52:52] <ChrisMorgan> Eridius: well, https://www.ohloh.net/people?q=kevin%20ballard&sort=latest_commit
[00:52:54] *** Quits: doomlord_ (servitor@moz-D40D68D6.range86-184.btcentralplus.com) (Quit: Leaving)
[00:52:57] *** Quits: omegaga_ (omegaga_@B77BB5D5.F09091A8.1348A864.IP) (Connection reset by peer)
[00:52:59] <dbaupp> you need [init, init, init, init] (etc) for non-POD types.
[00:53:12] <Eridius> ChrisMorgan: yeah I'm "claiming" the commits right now. I have no idea why this is necessary
[00:53:32] <wycats_> How would a non-Pod type work at all?
[00:53:39] <wycats_> Since you may not know its size
[00:53:46] <aatch> dbaupp, sort of, I think it's more that expression has to be constant-ish, hence using None
[00:53:47] <cmr> wycats_: Pod doesn't imply "has a size"
[00:53:47] <Eridius> wycats_: a type doesn't have to be Pod to have a fixed size
[00:53:48] <ChrisMorgan> Eridius: your "commits by language" at https://www.ohloh.net/accounts/eridius looks pretty :-)
[00:53:55] <cmr> wycats_: All types (right now) have a size.
[00:54:00] <aatch> wycats_, all types have a fixed size.
[00:54:17] <wycats_> But ~T's size is "pointer"
[00:54:20] <wycats_> Hmmm
[00:54:27] <Eridius> ChrisMorgan: heh, that is a neat graph. It's also a nice representation of my involvement in the projects I bothered to register with ohloh ;)
[00:54:33] <Eridius> wycats_: and "pointer" has a fixed size
[00:54:39] <wycats_> Indeed 
[00:54:39] <aatch> wycats_, yes, and [~T,..10] is enough space for 10 pointers
[00:54:41] *** Quits: k4nar (quassel@moz-F5EFF779.kimsufi.com) (Ping timeout)
[00:54:44] <wycats_> C
[00:54:48] <dbaupp> rusti: let x = [None::<~int>, .. 10];
[00:54:52] -rusti- pastebinned 10 lines of output: http://ix.io/9uK
[00:55:00] <dbaupp> aatch: ^
[00:55:05] <wycats_> ChrisMorgan: how would you feel about me using rust-http in a screencast
[00:55:13] <wycats_> Is it working and such?
[00:55:19] *** Joins: k4nar (quassel@moz-F5EFF779.kimsufi.com)
[00:55:23] <Eridius> anyway I'm quite surprised ohloh can't just let me auto-claim commits made under my email
[00:55:31] <wycats_> Also, any idea when you think you'd get around to chunked encoding?
[00:55:35] <ChrisMorgan> It's supposed to work that way.
[00:55:57] <ChrisMorgan> wycats_: feel free. So long as you're careful it works. Chunked encoding works fine for the server responses, just nowhere else.
[00:55:59] <dbaupp> aatch: there's an issue (which I can't find) about making that work
[00:56:01] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[00:56:05] <dbaupp> iirc
[00:56:06] <aatch> dbaupp, hmm, I remember their being something related to the handling of constant variant expressions.
[00:56:15] <Eridius> ChrisMorgan: I can see why automatically claiming contributious based on email might be wonky because nothing's stopping someone else from making commits with my email address, but at the very least it should present me with a list of projects and ask me to claim them
[00:56:18] <aatch> dbaupp, though I might just be thinking of the issue.
[00:56:30] <aatch> I thought it had been fixed, wishful thinking I suppose.
[00:56:41] * dbaupp does that regularly
[00:56:51] <ChrisMorgan> wycats_: I'm planning the significant rewrite; I started writing a blog post about how it all works from HTTP/0.9 to HTTP/2.0 to get myself in the write frame and to figure out what needs doing.
[00:57:07] <aatch> ChrisMorgan, *right
[00:57:09] <ChrisMorgan> s/write/right/
[00:57:24] * ChrisMorgan is embarrassed to not have written the write thing for once
[00:57:33] <dbaupp> "get yourself into the rewrite frame" would also work :P
[00:58:02] <aatch> "I'm planning the significant reright; I started writing a blog post about how it all works from HTTP/0.9 to HTTP/2.0 to get myself in the right frame and to figure out what needs doing."
[00:58:18] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[00:58:59] <Eridius> hrm, if I search for my full name on ohloh, it will find all the unclaimed committer IDs under that name. I can't search by email though, which is curious
[00:59:52] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[01:01:04] <Eridius> ChrisMorgan: hah, I'm claiming 1 commit on rust-http ;)
[01:01:11] *** Quits: bananapeel (nee__@moz-BF117112.netcologne.de) (Quit: Verlassend)
[01:01:44] <ChrisMorgan> May there be many more! :-)
[01:02:33] <wycats_> ChrisMorgan: if you want some help I wouldn't mind
[01:02:38] <Eridius> I really don't understand why there's not an automatic way to just claim commits made with my email, with the default project settings
[01:02:46] <wycats_> But my rust skills may not be up to par yet
[01:02:49] <ChrisMorgan> Eridius: there's supposed to be.
[01:02:56] <o11c> Eridius: I thought claiming was automatic as long as you actually used the same email
[01:03:13] <o11c> I know that some of mine are confused because sometimes my email has different dots ...
[01:03:34] *** Quits: dbaupp (Thunderbir@moz-EB2EFE6F.lns20.syd6.internode.on.net) (Ping timeout)
[01:03:49] <Eridius> o11c: except apparently it's not. I double-checked the email I have in ohloh, and it's correct
[01:04:11] <aatch> wycats_, writing code is best way to skill-up
[01:04:21] <aatch> Life works like an RPG, right?
[01:04:23] <ChrisMorgan> wycats_: rust-http was my first serious Rust project.
[01:04:50] <wycats_> Cool
[01:04:51] <ChrisMorgan> (That's part of the reason why a lot of it needs redesigning—what's there at present was written as a prototype.)
[01:05:15] <aatch> ChrisMorgan, ah, the age-old prototype-become-product promblem.
[01:05:25] <aatch> At least you're not in a corporate setting.
[01:05:28] <ChrisMorgan> It's mostly the transport parts that need rewriting, because what I've written thus far does not scale well.
[01:05:47] *** Joins: ptc (Adium@6C906E9F.9ECAA4DB.BCDD830B.IP)
[01:06:08] <wycats_> Makes sensr
[01:06:10] <wycats_> Sense
[01:06:23] <wycats_> Too bad there's no ragel back end for rust
[01:06:31] <cmr> there is, actually
[01:06:34] <cmr> erickt maintains it
[01:06:35] <cmr> google it
[01:06:49] <wycats_> Then let's use the mongrel parser, no?
[01:07:12] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[01:07:46] <ChrisMorgan> wycats_: I looked into that possibility, but in the end I don't think it will actually help much.
[01:08:07] <ChrisMorgan> (Feel free to prove me wrong; I didn't actually *try* it.)
[01:08:28] <wycats_> Why would you think it wouldn't help much?
[01:08:41] <wycats_> Basically gives you the full semantics for free :p
[01:09:16] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[01:09:35] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[01:11:01] <ChrisMorgan> The impression I get is that it becomes a little hard to tune for performance or to achieve especially precise object layout. Am I wrong in these?
[01:11:15] *** Joins: mosscollum (mosscollum@moz-8F108AD4.bstnma.fios.verizon.net)
[01:11:42] *** Joins: m_kato (m_kato@moz-C286AD9A.bitcat.net)
[01:13:38] *** Quits: ofeldt (ofeldt@moz-F84B263E.dip0.t-ipconnect.de) (Ping timeout)
[01:13:42] <cmr> Hah
[01:13:50] <cmr> I just came up with a hilarious example of type systems
[01:13:56] <cmr> "Roll a coin. Heads or 2?"
[01:14:24] *** Joins: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com)
[01:14:33] *** Joins: erickt2 (Adium@moz-6A641B4B.maine.res.rr.com)
[01:14:33] *** Quits: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com) (Connection reset by peer)
[01:15:01] *** Quits: Ferreus (ferreus@moz-F1460B0A.pools.arcor-ip.net) (Quit: WeeChat 0.4.2)
[01:15:16] *** Joins: k4nar_ (quassel@moz-EE8DAF45.ip-91-121-75.eu)
[01:16:48] <speckle> Hmm, it feels kind of silly having Rust bindings to a C/C++ OpenGL library.  Aren't those libraries bindings to OpenGL functions themselves?
[01:16:52] <speckle> Or wrappers thereof
[01:17:01] *** Joins: ofeldt (ofeldt@moz-F84B263E.dip0.t-ipconnect.de)
[01:17:30] <cmr> speckle: not quite sure what you mean
[01:17:42] <cmr> there's no way to access opengl except through that C interface
[01:17:43] <glaebhoerl> cmr: queen of hearts
[01:17:45] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[01:17:45] <cmr> that's what it is
[01:17:53] <cmr> glaebhoerl: perfect!
[01:19:17] <speckle> cmr, that's what I mean - libraries like GLFW and GLUT are built on top of OpenGL functions, aren't they?
[01:19:17] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Connection reset by peer)
[01:19:28] <cmr> speckle: GLFW, no.
[01:19:33] <cmr> GLFW is a windowing and input library.
[01:20:11] <cmr> GLUT is just windowing afaik
[01:20:13] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[01:21:24] *** Quits: ofeldt (ofeldt@moz-F84B263E.dip0.t-ipconnect.de) (Ping timeout)
[01:22:12] <cmr> speckle: GL doesn't provide any windowing or input or anything like that
[01:22:17] <speckle> Ah, so the various "GL" libraries actually just provide Window for GL to draw itself in, while GL is GL
[01:22:20] <speckle> *a window
[01:22:27] <cmr> EGL provide windowing, but not input.
[01:23:01] <cmr> speckle: mhm
[01:23:09] <cmr> speckle: these are more #rust-gamedev questions btw :)
[01:23:29] <speckle> Sorry
[01:23:58] <SiegeLord> "error: cannot implement a destructor on a structure that does not satisfy Send"
[01:24:02] <SiegeLord> Why is that unsafe?
[01:24:28] <cmr> SiegeLord: it's a way of preventing cycles. If there are cycles of things with destructors, one could have a reference to destroyed objects.,
[01:24:56] <o11c> cmr: GLUT does both windowing and output
[01:25:02] *** Joins: ofeldt (ofeldt@moz-F84B263E.dip0.t-ipconnect.de)
[01:25:03] <Edwards> Wow. parser.rs is very long.
[01:25:12] <cmr> o11c: input you mean?
[01:25:35] <o11c> one of those *put things
[01:25:41] <SiegeLord> Hmm... I don't think cycles are possible in my case
[01:26:03] <cmr> SiegeLord: #[unsafe_destructor] is a thing.
[01:26:20] <SiegeLord> I'll slap that on and hope it doesn't crash
[01:26:47] <aatch> SiegeLord, your more likely to get infinite loops lol.
[01:26:52] <aatch> you're*
[01:27:10] <SiegeLord> Hah
[01:27:15] <SiegeLord> Noted
[01:28:03] <SiegeLord> It's two structs, A and B and B has a borrowed pointer to A. A does not have the reverse
[01:28:09] <SiegeLord> So I don't think a cycle is possible
[01:29:23] *** Quits: ofeldt (ofeldt@moz-F84B263E.dip0.t-ipconnect.de) (Ping timeout)
[01:29:51] *** Joins: ptc1 (Adium@moz-70022D61.hsd1.ma.comcast.net)
[01:30:44] *** Quits: ptc (Adium@6C906E9F.9ECAA4DB.BCDD830B.IP) (Connection reset by peer)
[01:31:16] <speckle> Hmm, I'm trying to figure out why people use D when there's Rust.  To me it seems like they don't properly do manual memory management, since half their standard library doesn't even work without it.  Of course I'm afraid to ask that in #d, though....
[01:31:27] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[01:31:28] <cmr> speckle: D is actually, like, mature and stuff.
[01:31:34] *** Quits: ptc1 (Adium@moz-70022D61.hsd1.ma.comcast.net) (Ping timeout)
[01:31:41] <speckle> well apart from maturity..
[01:31:59] <cmr> Why do people use C when there's Rust? Aside from maturity...
[01:32:01] <cmr> :p
[01:32:11] <speckle> Libraries, not maturity of the language itself
[01:32:17] <speckle> I'm not aware of a lot of D libraries, heh
[01:32:23] *** Quits: moostik (Icedove@moz-6AF08E46.w92-135.abo.wanadoo.fr) (Ping timeout)
[01:32:31] <SiegeLord> D has had nearly a decade to get the word out... it's just more well known
[01:33:01] *** Quits: kvanb (kvanb@moz-1C09EC1.lnse1.win.bigpond.net.au) (Quit: kvanb)
[01:33:03] *** Joins: ofeldt (ofeldt@moz-F84B263E.dip0.t-ipconnect.de)
[01:33:04] <speckle> Hmm, but I guess there's no real advantage other than maturity it seems..
[01:33:05] <Edwards> And pretty much anything can use C libraries, that's not really an argument in favor of C.
[01:33:15] <Edwards> Maturity is a pretty big advantage
[01:33:18] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[01:33:28] *** Quits: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Connection reset by peer)
[01:33:32] *** Joins: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[01:33:48] <cmr> speckle: it's not like D doesn't have other advantages too. It has like, real metaprogramming.
[01:34:37] <speckle> Ah, okay, thanks.
[01:34:46] <speckle> But in general, I guess they want something more mature than Rust, without the corner case spaghetti of C++.
[01:35:13] <SiegeLord> It's more of a fettucine in D
[01:35:20] *** Quits: threecreepio (Adium@moz-9DA6CBAC.bredband.comhem.se) (Ping timeout)
[01:35:22] <cmr> heh
[01:35:34] <speckle> Not sure if that's good or bad
[01:37:29] *** Quits: ofeldt (ofeldt@moz-F84B263E.dip0.t-ipconnect.de) (Ping timeout)
[01:39:24] *** Quits: andreypopp (andreypopp@moz-7261DC60.net) (Quit: andreypopp)
[01:41:03] *** Joins: ofeldt (ofeldt@moz-F84B263E.dip0.t-ipconnect.de)
[01:41:13] *** Quits: k4nar (quassel@moz-F5EFF779.kimsufi.com) (Client exited)
[01:41:23] *** Quits: k4nar_ (quassel@moz-EE8DAF45.ip-91-121-75.eu) (Client exited)
[01:42:39] *** Quits: mosscollum (mosscollum@moz-8F108AD4.bstnma.fios.verizon.net) (Quit: mosscollum)
[01:43:18] *** Quits: doctor (ARealName@moz-9CB48492.nycmny.fios.verizon.net) (Quit: I found 1 in /dev/zero)
[01:43:35] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[01:43:55] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[01:44:04] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[01:44:10] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[01:45:39] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[01:47:05] *** Parts: nical (nico@moz-78B2E7FE.w86-211.abo.wanadoo.fr) ()
[01:51:29] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[01:51:54] *** Joins: threecreepio (Adium@moz-9DA6CBAC.bredband.comhem.se)
[01:53:04] *** Joins: omegaga_ (omegaga_@B77BB5D5.F09091A8.1348A864.IP)
[01:53:18] *** Joins: k4nar (quassel@moz-F5EFF779.kimsufi.com)
[01:53:39] *** Quits: erickt2 (Adium@moz-6A641B4B.maine.res.rr.com) (Quit: Leaving.)
[01:53:40] *** Quits: omegaga_ (omegaga_@B77BB5D5.F09091A8.1348A864.IP) (Connection reset by peer)
[01:55:34] *** Joins: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com)
[01:55:43] *** Joins: erickt2 (Adium@moz-6A641B4B.maine.res.rr.com)
[01:55:43] *** Quits: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com) (Connection reset by peer)
[01:55:58] *** Quits: erickt2 (Adium@moz-6A641B4B.maine.res.rr.com) (Quit: Leaving.)
[01:56:41] *** Joins: k4nar_ (quassel@moz-EE8DAF45.ip-91-121-75.eu)
[01:57:22] *** Joins: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com)
[01:59:13] *** Quits: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com) (Quit: Leaving.)
[01:59:58] *** Joins: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com)
[02:01:17] *** Joins: zmthy (Tim@moz-2B252B09.dsl.dyn.ihug.co.nz)
[02:02:01] *** Quits: k4nar (quassel@moz-F5EFF779.kimsufi.com) (Quit: http://quassel-irc.org - Chat comfortably. Anywhere.)
[02:02:29] *** Quits: mark_edward (quassel@moz-E0F1AB04.hsd1.in.comcast.net) (Ping timeout)
[02:02:53] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[02:02:58] *** Quits: zmthy (Tim@moz-2B252B09.dsl.dyn.ihug.co.nz) (Ping timeout)
[02:03:28] *** Joins: mosscollum (mosscollum@moz-8F108AD4.bstnma.fios.verizon.net)
[02:04:12] *** Quits: k4nar_ (quassel@moz-EE8DAF45.ip-91-121-75.eu) (Quit: http://quassel-irc.org - Chat comfortably. Anywhere.)
[02:04:19] *** Quits: trecer (trecer@moz-7F0DAC52.rb2.gh.centurytel.net) (Quit: Computer has gone to sleep.)
[02:04:30] *** Joins: k4nar (quassel@moz-EE8DAF45.ip-91-121-75.eu)
[02:04:41] *** Joins: trecer (trecer@moz-7F0DAC52.rb2.gh.centurytel.net)
[02:06:27] *** Quits: trecer (trecer@moz-7F0DAC52.rb2.gh.centurytel.net) (Ping timeout)
[02:13:24] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[02:13:49] *** Quits: AvianFlu (AvianFlu@974D245D.130DDD13.67CD788C.IP) (Input/output error)
[02:19:33] *** Quits: mosscollum (mosscollum@moz-8F108AD4.bstnma.fios.verizon.net) (Quit: mosscollum)
[02:19:39] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[02:22:00] *** Quits: k4nar (quassel@moz-EE8DAF45.ip-91-121-75.eu) (Client exited)
[02:22:01] *** Joins: k4nar (quassel@moz-EE8DAF45.ip-91-121-75.eu)
[02:23:58] *** Joins: kvanb (kvanb@moz-1C09EC1.lnse1.win.bigpond.net.au)
[02:24:06] *** Quits: k4nar (quassel@moz-EE8DAF45.ip-91-121-75.eu) (Client exited)
[02:24:07] *** Joins: k4nar (quassel@moz-EE8DAF45.ip-91-121-75.eu)
[02:26:44] *** Quits: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com) (Quit: Leaving.)
[02:27:30] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[02:27:39] *** Quits: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Ping timeout)
[02:28:20] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Connection reset by peer)
[02:28:52] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[02:31:27] *** Joins: zmthy (Tim@moz-2B252B09.dsl.dyn.ihug.co.nz)
[02:32:13] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[02:33:53] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[02:34:39] *** Joins: jviereck (Adium@moz-C1790E1.dip0.t-ipconnect.de)
[02:34:55] *** Joins: trecer (trecer@moz-7F0DAC52.rb2.gh.centurytel.net)
[02:35:28] *** Joins: mosscollum (mosscollum@moz-8F108AD4.bstnma.fios.verizon.net)
[02:36:01] *** Joins: bmu (chatzilla@moz-A87574A6.hsd1.pa.comcast.net)
[02:36:38] *** Quits: trecer (trecer@moz-7F0DAC52.rb2.gh.centurytel.net) (Ping timeout)
[02:37:45] *** Quits: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net) (Quit: leaving)
[02:40:54] *** Joins: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com)
[02:45:29] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:49:38] *** Quits: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com) (Quit: Leaving.)
[02:54:55] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[02:58:12] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[02:58:47] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[03:01:56] *** Joins: sankha93 (Instantbir@A9CD9C91.6074BD6D.EFB84E89.IP)
[03:02:17] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[03:02:46] *** Quits: sankha93 (Instantbir@A9CD9C91.6074BD6D.EFB84E89.IP) (Client exited)
[03:03:23] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[03:03:39] *** Joins: sankha93 (Instantbir@A9CD9C91.6074BD6D.EFB84E89.IP)
[03:05:31] *** Quits: sankha93 (Instantbir@A9CD9C91.6074BD6D.EFB84E89.IP) (Ping timeout)
[03:08:48] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[03:10:16] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[03:10:28] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[03:10:41] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[03:12:44] *** Joins: ptc (Adium@moz-70022D61.hsd1.ma.comcast.net)
[03:12:46] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[03:12:57] *** Joins: Ralith (ralith@114DA04D.CD83ED0A.BCDF04A6.IP)
[03:13:58] *** Quits: jviereck (Adium@moz-C1790E1.dip0.t-ipconnect.de) (Quit: Leaving.)
[03:14:14] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[03:14:43] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[03:15:14] *** Quits: ptc (Adium@moz-70022D61.hsd1.ma.comcast.net) (Connection reset by peer)
[03:15:20] *** Joins: ptc (Adium@6C906E9F.9ECAA4DB.BCDD830B.IP)
[03:17:08] <SiegeLord> Is there a way to write a macro that pastes what you pass into it in a a different spot?
[03:17:29] <SiegeLord> E.g. I want to go from my_macro!(foo; bar;) to if 0 {foo; bar;}
[03:18:45] <ChrisMorgan> SiegeLord: no
[03:20:41] <SiegeLord> That makes me sad
[03:21:42] <ChrisMorgan> SiegeLord: structural macros cannot store state in the compiler.
[03:22:01] <cmr> wait what
[03:22:29] <cmr> I'm confused... isn't that just simple expansion into if 0 { $input } ?
[03:22:42] <cmr> (also it should be if false, no implicit coercion)
[03:23:10] <SiegeLord> I can't find an $input that works
[03:23:19] <SiegeLord> tt doesn't work, e.g.
[03:24:04] <cmr> hm, I would have expected tt to work
[03:25:23] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[03:25:54] <SiegeLord> ignore! uses ($($x:tt)*
[03:25:58] <SiegeLord> But I can't get that to expand
[03:26:10] <SiegeLord> (ignore! obviously doesn't need to)
[03:27:05] <ChrisMorgan> tt can only be passed to other macros. It can't actually end up being used in the AST.
[03:27:24] <cmr> isn't there a macro that parses a tt into ast?
[03:28:27] <cmr> Maybe quote_tokens! ?
[03:30:44] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Connection reset by peer)
[03:31:06] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[03:31:14] <aatch> cmr, I think quote_tokens! is only really for the parser atm.
[03:31:27] <aatch> Since I think it needs some specific variable in scope
[03:31:43] <cmr> gah, yay hygiene :(
[03:33:28] <aatch> Why not just use `$x:expr`? Or `$($x:expr)`?
[03:33:54] <SiegeLord> The first will balk at the ;
[03:33:55] <ChrisMorgan> SiegeLord: I'm not actually sure what you're asking.
[03:34:06] <SiegeLord> The second will also balk at the ; I think
[03:34:14] <aatch> SiegeLord, then make the ; part of the macro.
[03:34:22] <SiegeLord> I am in fact using $x:expr instead, but I just invoke the macro with a block
[03:34:29] *** Quits: mosscollum (mosscollum@moz-8F108AD4.bstnma.fios.verizon.net) (Quit: mosscollum)
[03:34:32] <SiegeLord> It'd be neat not to have to do that though :P
[03:34:45] <aatch> `$($x:expr);*` should handle the above.
[03:35:22] <SiegeLord> It's ambiguous
[03:35:23] <ChrisMorgan> But you'd probably be better off just using expr or block.
[03:35:39] <SiegeLord> ChrisMorgan: I want the equivalent of C's #define FOO(x) x
[03:35:39] *** Joins: trecer (trecer@moz-7F0DAC52.rb2.gh.centurytel.net)
[03:35:46] <ChrisMorgan> Yeah, there are phoney local ambiguity bugs in its parser. It's rather sad :-(
[03:36:10] <aatch> ChrisMorgan, I tried fixing some of the worse ones and gave up after making it worse... :/
[03:36:44] <ChrisMorgan> SiegeLord: you can't do that, that's not safe
[03:37:04] <cmr> It isn't?
[03:37:09] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[03:37:17] <ChrisMorgan> cmr: I mean the C version. Thus you can't have a direct translation.
[03:37:18] <cmr> oh I see
[03:37:21] *** Quits: trecer (trecer@moz-7F0DAC52.rb2.gh.centurytel.net) (Ping timeout)
[03:37:37] <SiegeLord> Well, #define FOO(x) if true { x } then :P
[03:37:52] <ChrisMorgan> SiegeLord: again, not safe in C.
[03:38:05] <SiegeLord> I'm not sure why it's not safe
[03:38:31] <aatch> SiegeLord, what do you *actually* want to do?
[03:38:38] <ChrisMorgan> In Rust you need to constrain it to something like expr; macro_rules! foo(($x:expr) => (if true { $x })), then you can use foo!({ bar; baz; quux }).
[03:38:39] <aatch> I'm sensing X-Y problem here.
[03:38:57] <SiegeLord> Trust me, you won't get more if I actually paste it :P
[03:39:06] <ChrisMorgan> SiegeLord: try us
[03:39:07] <SiegeLord> http://pastebin.ca/2517422
[03:39:10] <SiegeLord> Wanna bet?
[03:39:48] <SiegeLord> I know you need to constrain it in Rust
[03:39:54] <SiegeLord> But that's a perfectly OK C macro
[03:39:55] <ChrisMorgan> I suggest you reduce the scope of the unsafeness: `if unsafe { ptr::is_null(al_get_target_bitmap()) } {`
[03:40:07] <SiegeLord> $b is always unsafe as well
[03:40:44] <cmr> SiegeLord: well, shouldn't block work here? A bit ugly, but it should work...
[03:40:57] <SiegeLord> Yes, a block is what I'm using
[03:41:23] <ChrisMorgan> SiegeLord: OK, I don't understand what the problem is. Doesn't what you have there work? What more do you want?
[03:41:32] <SiegeLord> It's ugly
[03:41:48] <SiegeLord> I have to do safe_draw!({...}) instead of safe_draw!(...)
[03:42:15] <aatch> It's also guaranteed to parse.
[03:42:33] <cmr> SiegeLord: it'd be nice if, when using macro_rules! foo { ... }, one could use safe_draw!{ /* interpreted as a block! */ }
[03:42:42] <ChrisMorgan> SiegeLord: sorry, you're stuck with the ugly way.
[03:42:53] <SiegeLord> I've figured that out 10 minutes ago :P
[03:44:21] <speckle> Things like that don't really bother me after having to write an anonymous class almost every time I want to make a closure in Java, but I guess newer languages have higher standards.
[03:46:22] *** Quits: klaus (koz@moz-E49E7C4B.hsd1.wa.comcast.net) (Quit: klaus)
[03:47:47] <cmr> bstrie_vacation: oh hey, File::create is a thing
[03:48:22] <ChrisMorgan> cmr: you're disturbing him from his vacation!
[03:48:32] *** Quits: zz_kimundi (kimundi@moz-8417F372.dip0.t-ipconnect.de) (Ping timeout)
[03:48:45] *** Joins: ptc1 (Adium@moz-70022D61.hsd1.ma.comcast.net)
[03:48:50] <speckle> Sometimes that last superfluous character or two can be very difficult to remove, compiler-wise, as far as I know.
[03:49:07] <shammancer> is there a way to get a task id?
[03:49:14] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[03:49:36] <ChrisMorgan> shammancer: what do you actually want, and from where?
[03:49:44] <ChrisMorgan> (From the same task, or from another one?)
[03:50:22] *** Quits: ptc (Adium@6C906E9F.9ECAA4DB.BCDD830B.IP) (Ping timeout)
[03:50:33] *** Quits: ptc1 (Adium@moz-70022D61.hsd1.ma.comcast.net) (Ping timeout)
[03:50:37] <shammancer> I want to spawn a bunch of tasks and print the id from inside of them
[03:51:01] <SiegeLord> aatch: I'm not sure what you mean by it's guaranteed to parse. I can make a macro today that will give a syntax error when instantiated... are you referring to something else?
[03:51:26] <cmr> shammancer: tasks don't have an id, no.
[03:51:30] <ChrisMorgan> SiegeLord: just that $($e:expr);* doesn't parse
[03:51:36] *** Joins: zz_kimundi (kimundi@moz-403B26B5.dip0.t-ipconnect.de)
[03:51:38] <ChrisMorgan> shammancer: they do have a name, is that what you meant?
[03:51:43] <aatch> SiegeLord, you can? that isn't the parameters that didn't parse?
[03:51:51] <SiegeLord> Yes
[03:51:53] *** zz_kimundi is now known as kimundi
[03:52:06] <SiegeLord> ($e:expr) => ($e true)
[03:52:19] <SiegeLord> It'll give a missing semicolon error for some expressions
[03:52:19] <shammancer> if ti is different for each task
[03:52:29] <SiegeLord> But not for all
[03:52:33] <cmr> task names aren't, unless you spawn them with a different name.
[03:52:42] <ChrisMorgan> SiegeLord: missing semicolon is right, you'd need ($e; true)
[03:52:48] <cmr> Can't even use the address of the name since it's a SendStr!
[03:52:59] <SiegeLord> Not for all, it'll work fine if you give it a block
[03:53:17] <ChrisMorgan> Hmm, that's not good.
[03:53:19] <shammancer> hum
[03:53:48] <ChrisMorgan> shammancer: basically, giving tasks IDs is up to you.
[03:54:03] <cmr> SiegeLord: heh, that macro definition isn't actually valid.
[03:54:11] <cmr> "error: macro expansion ignores token `true` and any following"
[03:54:13] <shammancer> k
[03:54:30] <SiegeLord> Well, take my safe_draw! macro and remove the ; after the $b
[03:54:37] <cmr> that's due to a bug though, I think
[03:54:39] <SiegeLord> Same idea for a valid macro
[03:54:40] <achin> on the subject of tasks, is there a way to test if a task has failed?
[03:54:45] <SiegeLord> I can believe that
[03:54:50] *** Joins: AvianFlu (AvianFlu@974D245D.130DDD13.67CD788C.IP)
[03:54:59] <achin> (other than task::try)
[03:54:59] <cmr> achin: http://static.rust-lang.org/doc/master/std/task/typedef.TaskResult.html
[03:55:12] *** Joins: mosscollum (mosscollum@moz-8F108AD4.bstnma.fios.verizon.net)
[03:55:21] *** Quits: mosscollum (mosscollum@moz-8F108AD4.bstnma.fios.verizon.net) (Quit: mosscollum)
[03:55:40] <cmr> achin: there's also std::task::failing() for if you're within the task
[03:55:59] *** Joins: mosscollum (mosscollum@moz-8F108AD4.bstnma.fios.verizon.net)
[03:56:23] <achin> i am thinking that the main task will launch some helper tasks, and at some point the main task might want to check on all the helper tasks
[03:56:41] *** Quits: mosscollum (mosscollum@moz-8F108AD4.bstnma.fios.verizon.net) (Quit: mosscollum)
[03:56:59] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[03:57:08] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[03:57:31] <shammancer> So I am getting this error: mutable variables cannot be implicitly captured. Is there a way to explicitly capture a variable
[03:57:47] <shammancer> ?
[03:58:09] <ChrisMorgan> shammancer: you need to ensure it's not bound mutably. e.g. `let x = x;` will do it if you had a `let mut x = something` earlier.
[03:59:00] <shammancer> hum
[03:59:25] <cmr> achin: you can give each task its own Port, and if .recv_opt returns None, the task failed.
[04:00:46] <achin> cmr: in that case, each task would have to send() something to indicate it's still alive?  else the recv_opt would block
[04:00:53] <shammancer> http://pastebin.com/JFqAhm0s
[04:01:01] <cmr> achin: you can do a try_recv first
[04:01:30] <shammancer> Were would let i = i because I don't want to lose the mutability
[04:02:03] <achin> i'm not entirely sure how try_recv helps me
[04:02:10] <cmr> achin: try_recv doesn't block
[04:02:24] <cmr> if it returns None, you can check if recv_opt is None
[04:02:41] <cmr> (without fear of blocking)
[04:02:53] <cmr> although there's a race condition there if you actually use that Port for things :)
[04:03:05] <achin> if my task is still running, but hasn't sent anything, try_recv() will return None, but recv_opt() will blok
[04:03:21] <cmr> oh, that's true
[04:03:40] <cmr> hm
[04:04:38] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[04:05:07] <aatch> shammancer, would the main task do anything itself?
[04:05:27] <aatch> Or, at least, do anything that *has* to be done on that task?
[04:05:27] <shammancer> Well later yes :P
[04:05:46] <achin> in some cases, that would be fine.  for example, i have a producing task and a consuming task.  the consuming task can use recv_opt to see if the producer has gone away (and if so, do something appropriate)
[04:05:48] <aatch> Because you could use select to wait for a message from the tasks.
[04:06:22] <cmr> achin: right. I can't come up with a good way to achieve the "have you failed?" check atm.
[04:06:27] <achin> but having a supervising task watching over all the produers and consumers seems like a common model
[04:06:28] * cmr should probably be sleeping
[04:08:44] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[04:09:17] <achin> cmr: no prob, thanks for lending at least part of your brain to this problem
[04:09:33] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[04:11:21] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[04:11:30] *** Joins: ptc (Adium@6C906E9F.9ECAA4DB.BCDD830B.IP)
[04:11:56] *** Joins: omegaga_ (omegaga_@B77BB5D5.F09091A8.1348A864.IP)
[04:12:54] *** Quits: omegaga_ (omegaga_@B77BB5D5.F09091A8.1348A864.IP) (Connection reset by peer)
[04:13:07] <shammancer> ...
[04:13:43] <shammancer> How do you convert a mutable variable to an inmutable one.
[04:14:15] <cmr> shammancer: `let x = x;`
[04:14:21] <cmr> rebind it as immutable
[04:16:12] <shammancer> When I do that the compiler gives me the cannot be implicitly captured error
[04:17:51] <shammancer> and j = i.clone() would not work
[04:18:10] <shammancer> eother...
[04:18:12] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Quit: Leaving.)
[04:18:18] <shammancer> *either
[04:19:28] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[04:23:09] *** Quits: zmthy (Tim@moz-2B252B09.dsl.dyn.ihug.co.nz) (Ping timeout)
[04:26:47] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[04:29:39] <ChrisMorgan> shammancer: can you post the full code?
[04:29:52] <shammancer> I got it to work now.
[04:30:04] <shammancer> Needed to put it outside of the task
[04:30:12] <ChrisMorgan> OK. If you want review, feel free to post it and I'll take a look at it.
[04:30:19] <shammancer> K thanks
[04:30:22] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[04:30:41] <jessta> can anyone point me to documentation on the lifetime syntax?
[04:31:28] <achin> static.rust-lang.org/doc/master/tutorial-borrowed-ptr.html
[04:33:51] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[04:34:29] <jessta> ah, thanks
[04:36:24] *** Joins: trecer (trecer@moz-7F0DAC52.rb2.gh.centurytel.net)
[04:38:06] *** Quits: trecer (trecer@moz-7F0DAC52.rb2.gh.centurytel.net) (Ping timeout)
[04:38:07] *** Joins: ptc1 (Adium@moz-70022D61.hsd1.ma.comcast.net)
[04:39:11] *** Quits: ptc (Adium@6C906E9F.9ECAA4DB.BCDD830B.IP) (Ping timeout)
[04:39:39] *** Joins: mosscollum (mosscollum@moz-8F108AD4.bstnma.fios.verizon.net)
[04:39:53] *** Quits: ptc1 (Adium@moz-70022D61.hsd1.ma.comcast.net) (Ping timeout)
[04:40:18] *** Joins: hacker_sam (hacker_sam@moz-77E88CEB.dsl.bngr.epix.net)
[04:41:15] *** Joins: zmthy (Tim@moz-1D8B7413.dsl.dyn.ihug.co.nz)
[04:42:25] <bjz> heh, cmr: "D is actually, like, mature and stuff."
[04:42:27] <bjz> :D
[04:44:08] *** Quits: ofeldt (ofeldt@moz-F84B263E.dip0.t-ipconnect.de) (Ping timeout)
[04:44:29] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[04:45:52] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[04:47:12] *** Quits: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp) (Quit: Tiarra 0.1+svn-39209: SIGINT received; exit)
[04:47:49] *** Joins: ofeldt (ofeldt@moz-F84B263E.dip0.t-ipconnect.de)
[04:49:35] *** Joins: brson (brson@E88F5EC0.CA971BF7.BBC5804F.IP)
[04:49:35] *** ChanServ sets mode: +ao brson brson
[04:53:17] <aatch> Woo, my code generator can generate enough to handle to monstrous "Setup" structure from the connection handshake.
[04:53:45] *** Joins: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp)
[04:54:20] *** Quits: zmthy (Tim@moz-1D8B7413.dsl.dyn.ihug.co.nz) (Ping timeout)
[04:54:34] *** Joins: zmthy (Tim@moz-1D8B7413.dsl.dyn.ihug.co.nz)
[04:59:19] *** Joins: dbaupp (dbaupp@moz-AF436A54.pa.nsw.optusnet.com.au)
[04:59:27] *** Quits: zmthy (Tim@moz-1D8B7413.dsl.dyn.ihug.co.nz) (Ping timeout)
[05:00:18] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[05:00:31] *** Quits: aatch (aatch@moz-2BB0AC01.cable.telstraclear.net) (Client exited)
[05:01:49] <dbaupp> achin: you can create a taskbuilder with `std::task::task()` and call .future_result and the spawn it, then check the future to check for failure
[05:02:29] <dbaupp> achin: http://static.rust-lang.org/doc/master/std/task/struct.TaskBuilder.html
[05:04:02] * achin takes a look
[05:04:06] *** Quits: hacker_sam (hacker_sam@moz-77E88CEB.dsl.bngr.epix.net) (Ping timeout)
[05:05:53] <achin> the docs say future_result returns a Port?  not a Future?
[05:07:11] *** Quits: dbaupp (dbaupp@moz-AF436A54.pa.nsw.optusnet.com.au) (Ping timeout)
[05:07:54] <achin> oh, i guess i can create a Future from a Port
[05:09:55] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Client exited)
[05:10:16] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[05:10:16] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[05:12:07] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[05:12:07] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[05:13:15] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[05:13:18] *** Joins: ercxx (ercan@moz-5B55241D.dyn.optonline.net)
[05:13:57] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Quit: Leaving...)
[05:14:16] <achin> i'm not sure how to see if the Future represented a finished task, or a still-running task
[05:14:49] *** Joins: dbaupp (dbaupp@moz-AF436A54.pa.nsw.optusnet.com.au)
[05:15:20] *** Quits: Jesin (Jesin@moz-4B662E55.washdc.fios.verizon.net) (Quit: Leaving)
[05:15:31] <dbaupp> (sorry dropped out)
[05:15:40] <achin> dbaupp: once i have my Future, what do i do with it?  
[05:15:47] *** Joins: mngs (Mibbit@moz-F0D65429.west.biz.rr.com)
[05:15:51] *** Quits: AvianFlu (AvianFlu@974D245D.130DDD13.67CD788C.IP) (Input/output error)
[05:15:55] *** Quits: echristo (echristo@moz-DBB0A5CE.oc.oc.cox.net) (Quit: echristo)
[05:16:25] <dbaupp> as a port you can just use the various .recv_opt and .try_recv or whatever
[05:16:29] *** Quits: mngs (Mibbit@moz-F0D65429.west.biz.rr.com) (Quit: http://www.mibbit.com ajax IRC Client)
[05:16:51] <achin> oh.  i think that has the same problem as cmr's suggestion
[05:17:37] <dbaupp> they return None if the task is still running or some if its done
[05:17:52] <achin> recv_opt will block, which is not what i want
[05:18:07] <dbaupp> try_recv should be fine?
[05:18:45] <achin> try_recv can't distingiush between a port that has no waiting data or a port that's been closed
[05:19:56] <dbaupp> in theory the future_result port won't be closed
[05:20:39] <achin> until the task exists, right?
[05:21:04] <achin> and while the task is running, attempting to get/unwrap that future will block
[05:21:04] <dbaupp> well, it is guaranteed to send one message, so as long as you dont recv on it again after getting data, it shouls be ok
[05:21:44] <dbaupp> i.e. after the first Some, the port will be closed aiui
[05:22:00] <achin> so how am i to interpret try_recv returning None ?
[05:22:04] <dbaupp> (also, acrichto has a PR that makes it distinguish between empty and closed.
[05:22:08] <dbaupp> )
[05:22:51] <achin> that may be the exact thing i need
[05:23:26] <dbaupp> if it hasnt returned Some yet, the task is still running. if it has, then the port is closed
[05:23:40] <sfackler> achin: this is the PR: https://github.com/mozilla/rust/pull/11112
[05:24:10] <achin> thanks.  i'll watch that pR
[05:24:44] <dbaupp> (the future_result port is guaranteed to send exactly one piece of data.)
[05:24:58] <dbaupp> after that is sent, the port closes
[05:25:11] <dbaupp> s/sent/received/
[05:25:23] <speckle> is Kate the best newbie IDE choice for people unfamiliar with vim/emacs?
[05:25:43] <achin> hmm, i am starting to see what you are saying.  if None is returned, the task is still running.  if Some is returned, the task has exited
[05:25:53] *** Quits: ofeldt (ofeldt@moz-F84B263E.dip0.t-ipconnect.de) (Ping timeout)
[05:26:00] <speckle> I'm reading a tutorial and it gives Kate as an example of a text editor with Rust plugins
[05:26:37] *** Joins: hacker_sam (hacker_sam@moz-232B271E.dsl.bngr.epix.net)
[05:26:37] <achin> kate is an editor, i think, not an IDE
[05:26:39] <dbaupp> yes, and after that Some is returned, any more Nones represent port-is-closed
[05:26:45] <speckle> okay, editor choice then
[05:26:55] <achin> dbaupp: got it.  thanks
[05:26:56] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[05:28:30] *** Joins: tikue_ (tkuehn@moz-F4812C6E.hsd1.fl.comcast.net)
[05:28:31] <achin> speckle: i'm not sure it would matter too much. the primary thing i think to look for is syntax highlighting
[05:28:50] <speckle> ah, for me the most important thing is automatic formatting
[05:28:52] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[05:29:06] *** Joins: jackneill (jackneill@moz-ACBC5616.pool.digikabel.hu)
[05:29:08] <achin> (personally, i tend to recommend vim or gvim even for newbies)
[05:29:09] <speckle> I love it when code is neatly formatted, but hate manually moving around indentation blocks and such
[05:29:43] <speckle> Sadly enough, there are popular text editors missing even that feature
[05:29:52] *** Joins: ofeldt (ofeldt@moz-F84B263E.dip0.t-ipconnect.de)
[05:30:35] <achin> i don't know if kate can do that (i've never used it)
[05:30:58] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[05:31:01] <speckle> Okay, I'll just poke around in vim/emacs then, heh
[05:31:04] *** Parts: dbaupp (dbaupp@moz-AF436A54.pa.nsw.optusnet.com.au) ()
[05:31:08] *** Quits: hacker_sam (hacker_sam@moz-232B271E.dsl.bngr.epix.net) (Client exited)
[05:31:42] <achin> i can confirm that vim will do proper rust indenting
[05:33:23] <shammancer> Hey guys just wondering wondering how to make msg a literal. http://pastebin.com/i2aXnhQ7
[05:33:30] <speckle> thank you! oops it's late, good night
[05:33:30] *** Quits: ofeldt (ofeldt@moz-F84B263E.dip0.t-ipconnect.de) (Ping timeout)
[05:34:33] <sfackler> shammancer: you can just do "socket.write(msg.as_bytes());"
[05:34:50] <sfackler> bytes! is for creating byte arrays at compile time
[05:34:57] <shammancer> Oh
[05:35:00] <shammancer> cool
[05:35:01] <sfackler> (e.g. let foo = bytes!("hello world");"
[05:35:18] <achin> also, what does "let ~msg = getstdin()" actually do
[05:35:31] <achin> i didn't know you could put a ~ over there
[05:35:49] <achin> i would have thought "let msg: ~str = getstdin()" would be the correct thing
[05:35:50] <shammancer> well I was just seeing if it would help it compile XD
[05:35:55] <shammancer> it did not...
[05:36:06] <achin> oh, ok
[05:36:52] *** Joins: ofeldt (ofeldt@moz-F84B263E.dip0.t-ipconnect.de)
[05:37:09] *** Joins: trecer (trecer@moz-7F0DAC52.rb2.gh.centurytel.net)
[05:38:57] *** Quits: trecer (trecer@moz-7F0DAC52.rb2.gh.centurytel.net) (Ping timeout)
[05:41:00] *** Quits: mosscollum (mosscollum@moz-8F108AD4.bstnma.fios.verizon.net) (Quit: mosscollum)
[05:42:04] *** Quits: ofeldt (ofeldt@moz-F84B263E.dip0.t-ipconnect.de) (Ping timeout)
[05:45:23] *** Joins: ofeldt (ofeldt@moz-F84B263E.dip0.t-ipconnect.de)
[05:46:25] *** Quits: Earnestly (earnest@88884C6.A3735F9C.39C00A7A.IP) (Ping timeout)
[05:52:46] *** Joins: hacker_sam (hacker_sam@moz-232B271E.dsl.bngr.epix.net)
[05:53:55] <shammancer> So I am using this http://pastebin.com/sMx0RsBL to communicate with https://github.com/cmr/rust-examples/blob/master/echo_server.rs and it seems that my client is hanging because it is still trying to read bytes off of the stream...
[05:54:51] <ChrisMorgan> http://www.rust-ci.org/ has 70 packages, and the latest commit is directly related to matching upstream language changes on 22 of them (almost ⅓). Fun times :-)
[05:56:11] <ChrisMorgan> shammancer: you've got deadlock there: both ends are blocked on read, waiting for the other to send something.
[05:56:19] <shammancer> hum...
[05:56:55] <Yurume> ChrisMorgan: is it becoming a reliable measure for language incompatibility? :)
[05:57:15] <shammancer> if I rerun the original client the server still responds
[05:57:46] <ChrisMorgan> shammancer: the server can cope with any number of clients, limited only by the OS
[05:58:06] <ChrisMorgan> Actually, I take that back. That server can only cope with one client at a time.
[05:59:03] <ChrisMorgan> But as soon as you terminate one client, it'll happily go on to the next one.
[05:59:21] <shammancer> Ok
[05:59:35] <shammancer> I see that now
[05:59:39] <ChrisMorgan> Good :-)
[06:01:02] <shammancer> So how do I prevent the deadlock from happening on the client
[06:01:58] *** Quits: brson (brson@E88F5EC0.CA971BF7.BBC5804F.IP) (Ping timeout)
[06:02:13] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[06:02:13] *** ChanServ sets mode: +ao brson brson
[06:03:15] <ChrisMorgan> shammancer: you'd need to read only as many bytes as you wrote.
[06:04:00] <achin> also, it doesn't look like rust gives you a way to close your sending side of the connection (not required for this exersize, though)
[06:04:54] <ChrisMorgan> This is a comparatively tricky detail of TCP; it gives you the pipes, but not the tools to say "I'm sending this much stuff through at this time, then that's all for the moment".
[06:05:04] <shammancer> hum
[06:05:29] <shammancer> what is the traditional terminate character?
[06:05:49] <achin> TCP also makes it easy to conflate messages and streams (which generally gets you into trouble)
[06:05:52] <geomyidae__> Is that more typical than having a header packet that says "Hey, I'm sending {pkt type} next and its {this big}" 
[06:06:47] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[06:07:16] <achin> for a simple ASCII line-based protocol, a new line (\n) is used to indicate the end of a message
[06:07:29] <shammancer> ok
[06:07:56] <achin> (irc is like this)
[06:08:20] *** Joins: zmthy (Tim@moz-1D8B7413.dsl.dyn.ihug.co.nz)
[06:08:34] <o11c> but packet size limits are a must
[06:08:39] <o11c> IRC uses 512 bytes
[06:08:50] <geomyidae__> Does it pad up to 512 bytes too?
[06:08:53] <shammancer> ?
[06:08:54] <achin> no
[06:08:56] <o11c> no
[06:09:03] <shammancer> no
[06:09:19] <achin> this way the receiving side can have a fixed buffer to reading in messages
[06:09:24] <geomyidae__> Stupid question, right, just read until max_size or terminating delim char
[06:09:29] <geomyidae__> Yeah, makes sense.
[06:09:38] <Yurume> IRC has a separate, mostly undocumented queue system to keep the server from the excess flood
[06:10:00] <shammancer> Hi Yurume
[06:10:02] *** Quits: zmthy (Tim@moz-1D8B7413.dsl.dyn.ihug.co.nz) (Ping timeout)
[06:10:03] <Yurume> hello
[06:10:03] <achin> that's just an implementation thing that most irc servers use
[06:10:12] <ChrisMorgan> shammancer: I'm actually in the middle of writing a blog post about how HTTP does this. It has a few ways in different parts; here are the three main ones (excluding "close the connection when done"):
[06:10:13] <ChrisMorgan> (a) in headers, CRLF (\r\n), though CR LF SP (\r\n ) is *not* an end of line;
[06:10:13] <ChrisMorgan> (b) for the body, the Content-Length header can define how long it will be;
[06:10:13] <ChrisMorgan> (c) for the body, it can use the "chunked" transfer coding, where it says "this chunk is N bytes long", follows it with N bytes, &c. until it gets to a zero-length chunk.
[06:10:36] <Yurume> achin: I'm not sure, but de-facto standard RPL_ISUPPORT(005) may have something about that
[06:10:48] <shammancer> hum
[06:11:21] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[06:11:32] <achin> Yurume: i don't see anything that stands out to me
[06:12:00] <Yurume> hmm, looking at my server it does not have fields for that, achin you are right
[06:12:02] <o11c> ChrisMorgan: but Content-Length isn't always used, sometimes you just read until EOF
[06:12:14] <o11c> ChrisMorgan: that said, in order to use keepalive, everybody uses chunked
[06:12:17] <Yurume> (I operate a mid-sized IRC network)
[06:12:20] <ChrisMorgan> o11c: ``(excluding "close the connection when done")``
[06:12:27] <shammancer> but is't end of file only when the socket closes?
[06:12:32] <o11c> shammancer: right
[06:12:40] <ChrisMorgan> o11c: Content-Length is also compatible with keep-alive
[06:12:47] <achin> Yurume: the irc RFC mentions these queues in an "best practices" section, but it's not part of the spec
[06:13:00] <o11c> right, but a lot of the internet these days is dynamically generated
[06:13:05] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[06:13:18] <ChrisMorgan> Sure, I was just ensuring that what you said was correct.
[06:13:22] <o11c> and IIRC HTTP 2.0 removes support for Content-Length
[06:13:42] <Yurume> achin: irc RFC is mostly useless anyway...
[06:13:47] <Yurume> especially IRC2 things.
[06:13:51] <achin> eventually rust needs a way to signal an EOF
[06:14:26] <achin> Yurume: true.  well, if you want to write a basic irc client, it's a good place to start.  it'll get you most of the way there
[06:14:41] <achin> if you want a modern fancy client, you'll need to look else where
[06:14:44] <ChrisMorgan> o11c: content-length is still a meaningful header in HTTP/2.0
[06:15:48] <Yurume> achin: yeah, RPL_ISUPPORT and rate limiting is crucial for robust IRC clients and bots
[06:16:06] <Yurume> anyone doing rust-irc (or sorta)? :)
[06:16:20] <achin> i started an irc client library
[06:16:21] <o11c> incidentally, EOF is one of the things that would have been nice about OSI
[06:16:31] <achin> but then got stuck due to lack of async IO in rust
[06:16:52] <Yurume> I thought of making a redis library for rust
[06:17:02] <Yurume> and I found five existing alternatives that do not work...
[06:17:07] <o11c> I expect at this point to do most I/O via libc::*
[06:17:22] <ChrisMorgan> An IRC client or server can still be written, it just takes a little more care in the design and the use of std::comm on top of the TcpStream.
[06:17:24] *** Quits: hacker_sam (hacker_sam@moz-232B271E.dsl.bngr.epix.net) (Client exited)
[06:17:32] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Quit: leaving)
[06:17:45] *** Joins: hacker_sam (hacker_sam@moz-232B271E.dsl.bngr.epix.net)
[06:17:58] <achin> i tried to give it some thought, but i still got stuck
[06:18:46] <achin> if i could seperate the Writer and Reader, i could send each part of the TcpStream to seperate tasks
[06:18:59] <o11c> ARC ?
[06:19:06] <geomyidae__> ChrisMorgan: are you using std::comm on top of the stream in rust-http?
[06:19:15] <achin> i thought an ARC can't deal with mutable stuffs
[06:19:19] <Yurume> wouldn't ARC block each other?
[06:19:41] <ChrisMorgan> geomyidae__: no, but such a solution will be necessary for HTTP/2.0 support
[06:19:51] <ChrisMorgan> acrichto: it's come up again :-) ^
[06:20:01] <ChrisMorgan> Tea time, g2g
[06:20:25] <achin> (a TcpStream needs to be mutable)
[06:21:39] <achin> i don't know how to get around the fact that TcpStream::read is blocking
[06:22:31] <achin> i'd love to hear ideas, but tomorrow
[06:22:34] * achin -> zZz
[06:29:19] <geomyidae__> the example in eof() wut http://static.rust-lang.org/doc/master/std/io/net/tcp/struct.TcpStream.html
[06:29:20] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[06:29:20] *** ChanServ sets mode: +ao pcwalton pcwalton
[06:29:25] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[06:32:27] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Taking a nap.)
[06:32:33] *** Quits: sfackler (sfackler@moz-AEECCEBA.com) (Ping timeout)
[06:32:33] *** Quits: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp) (Quit: Tiarra 0.1+svn-39209: SIGINT received; exit)
[06:32:36] *** Joins: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp)
[06:33:37] *** Quits: photex (photex@399640B9.24E301D6.9510F13D.IP) (Ping timeout)
[06:34:03] *** Quits: bmu (chatzilla@moz-A87574A6.hsd1.pa.comcast.net) (Quit: ChatZilla 0.9.90.1 [Firefox 26.0/20131205075310])
[06:35:45] *** Joins: sfackler (sfackler@moz-AEECCEBA.com)
[06:37:51] *** Joins: photex (photex@399640B9.24E301D6.9510F13D.IP)
[06:37:54] *** Joins: trecer (trecer@moz-7F0DAC52.rb2.gh.centurytel.net)
[06:39:46] *** Quits: trecer (trecer@moz-7F0DAC52.rb2.gh.centurytel.net) (Ping timeout)
[06:42:07] *** Joins: derek_c (derek@FC08A66C.72EB3852.5C3BDEF0.IP)
[06:42:42] *** Joins: trecer (trecer@moz-7F0DAC52.rb2.gh.centurytel.net)
[06:43:01] <derek_c> does Rust support Python-style list comprehension?  something like [x for x in lst]?  I vaguely remember seeing it somewhere but can't find the code anymore
[06:43:52] <eddyb> derek_c: no. most of the time you want to use iterators anyway
[06:43:52] <Yurume> it doesn't, but you can do lst.iter().map(|x| ...).collect().
[06:44:17] <eddyb> derek_c: we don't have generator comprehensions because we don't have generators yet
[06:48:12] <shammancer> Hey guys so I am getting the following error while trying to compile https://github.com/shammancer/rusty/blob/master/client.rs exoected , but found . @ line 34. Any ideas?
[06:48:47] <geomyidae__> 'c' might be for chars instead of "strings"
[06:49:03] <geomyidae__> to_uint looks like it should be to_uint() also
[06:49:20] <geomyidae__> Oh I'm dumb '\n' is a char.
[06:49:34] <derek_c> I see thanks
[06:49:34] <shammancer> XD
[06:49:47] <shammancer> I changed it to to_uint()
[06:49:51] <shammancer> no go...
[06:50:15] <eddyb> shammancer: "@" is a confusing character to use in this context :P
[06:50:24] <shammancer> at line
[06:50:37] <eddyb> yeah, I got it before I said that
[06:51:00] <eddyb> shammancer: you can't have a function call like that in pattern matching
[06:51:12] <shammancer> hum...
[06:51:45] <eddyb> uint is not a byte, so it would be just '\n' as u8
[06:52:12] <eddyb> the order is wrong, your first Some catches all Some
[06:52:27] *** Quits: indirect (indirect@moz-3589B90B.c.ircrelay.com) (Ping timeout)
[06:52:29] <eddyb> does socket.read return Option<u8>?
[06:53:10] <shammancer> ...
[06:53:22] <shammancer> Cant convert chars to integers...
[06:53:25] *** Quits: photex (photex@399640B9.24E301D6.9510F13D.IP) (Ping timeout)
[06:53:38] <shammancer> well not with that function anyways.
[06:53:43] <geomyidae__> You can't have two Some()s like that
[06:53:44] <eddyb> rusti: '\n' as u8
[06:53:45] -rusti- 10u8
[06:53:54] <eddyb> geomyidae__: you can, they're just in the wrong order
[06:54:16] *** Quits: sfackler (sfackler@moz-AEECCEBA.com) (Ping timeout)
[06:54:21] <eddyb> the "more specialized" patterns have to come before the fallback ones
[06:54:25] <geomyidae__> Gr, I need to work with them more, I've only used them to match enum variants. I see though.
[06:54:26] *** Quits: txdv (quassel@966F3542.3BA477DA.14C26596.IP) (Ping timeout)
[06:54:47] *** Quits: carter (carter@moz-3589B90B.c.ircrelay.com) (Ping timeout)
[06:55:41] <shammancer> how can I convert the char to a u8?
[06:55:47] <Yurume> '\n' as u8
[06:55:55] <eddyb> shammancer: I told you and gave you an example
[06:56:09] <eddyb> shammancer: you want something like "Some(_) if bytes[0] == '\n' as u8 => break, Some(_) => rcv.append(bytes), None => break" inside the match
[06:56:20] *** Joins: txdv (quassel@966F3542.3BA477DA.14C26596.IP)
[06:56:25] *** Quits: ricepuddin (graham@A584E1EF.E6D957F2.39C00A7A.IP) (Ping timeout)
[06:56:29] <shammancer> really what type of operation is that?
[06:56:56] <eddyb> "as" is a primitive cast
[06:57:06] <shammancer> hum...
[06:57:11] <shammancer> Thanks
[06:57:23] *** Joins: photex (photex@399640B9.24E301D6.9510F13D.IP)
[06:57:42] <Yurume> shammancer: it is used to convert primitive types to other primitive types, u8, u16, u32, i8, i16, i32, f32, f64, char(limited) etc.
[06:57:46] *** Joins: sfackler (sfackler@moz-AEECCEBA.com)
[06:57:56] <shammancer> nice to know
[06:58:00] <eddyb> it's part of the language because we don't have CTFE, actually
[06:58:01] <Yurume> since Rust does not implicitly convert from/to differently-sized numeric types
[06:58:10] *** Joins: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP)
[06:58:30] <eddyb> you could implement it in the library if it wasn't needed to create pointers in statics
[06:58:48] <eddyb> s/needed/required
[06:59:40] <Yurume> eddyb: is CTFE (compile-time function evaluation, to be exact) a planned feature or not?
[07:01:45] <eddyb> it's something we want, eventually. I did think about leveraging LLVM as much as possible so it doesn't end up being limited to functions with no statements other than a return and with restricted arguments like C++11 constexprs
[07:01:57] *** Joins: carter (carter@moz-3589B90B.c.ircrelay.com)
[07:01:59] *** Quits: maxiepoo (Max@moz-D66F3D4E.atvci.net) (Quit: maxiepoo)
[07:02:15] *** Joins: indirect (indirect@moz-3589B90B.c.ircrelay.com)
[07:03:16] <skrylar> back
[07:05:31] <shammancer> So I have got this now https://github.com/shammancer/rusty/blob/master/client.rs "error: the type of this value must be known in this context" I am not even sure what type rcv should be...
[07:05:36] <shammancer> line 35
[07:06:06] <eddyb> shammancer: rcv can't be empty
[07:06:08] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[07:06:17] <eddyb> shammancer: let rcv = ~[];
[07:06:37] <eddyb> I doubt append works, there's a push_all method which does what you want
[07:07:03] <shammancer> yup right again
[07:08:00] <eddyb> note that even if the type of the empty vector ~[] is not known, it can be deduced from the push_all call (or it should be. might not be initially, if you have other errors)
[07:08:08] *** Joins: maxiepoo (Max@moz-D66F3D4E.atvci.net)
[07:08:25] <eddyb> shammancer: it also has to be mutable
[07:08:34] <shammancer> Man your quick...
[07:08:50] <shammancer> Got it to compile
[07:09:25] <eddyb> and rcv.push(bytes[0]) makes more sense if you're not planning to increase the buffer size
[07:09:44] <shammancer> What do you mean by that?
[07:10:01] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[07:10:05] *** Quits: tikue_ (tkuehn@moz-F4812C6E.hsd1.fl.comcast.net) (Quit: tikue_)
[07:10:15] <shammancer> It works!!!!
[07:10:16] <eddyb> shammancer: your "bytes" is just a single byte
[07:10:24] <shammancer> oh
[07:10:26] <shammancer> right
[07:10:49] *** Quits: jessta (jessta@moz-FEFFE342.dyn.iinet.net.au) (Ping timeout)
[07:11:12] *** Quits: kvanb (kvanb@moz-1C09EC1.lnse1.win.bigpond.net.au) (Quit: kvanb)
[07:11:47] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[07:11:59] *** Quits: trecer (trecer@moz-7F0DAC52.rb2.gh.centurytel.net) (Quit: Computer has gone to sleep.)
[07:12:20] <shammancer> Thanks btw
[07:12:21] *** Joins: trecer (trecer@moz-7F0DAC52.rb2.gh.centurytel.net)
[07:12:30] <shammancer> Good night
[07:13:27] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[07:13:30] *** Joins: tikue_ (tkuehn@moz-F4812C6E.hsd1.fl.comcast.net)
[07:13:43] *** Joins: trecer_ (trecer@moz-7F0DAC52.rb2.gh.centurytel.net)
[07:13:45] *** Quits: trecer (trecer@moz-7F0DAC52.rb2.gh.centurytel.net) (Connection reset by peer)
[07:14:16] *** Joins: pepper_chico (pepper_chi@8D8AA2D3.F49227D1.F546FA5F.IP)
[07:15:25] *** Quits: trecer_ (trecer@moz-7F0DAC52.rb2.gh.centurytel.net) (Ping timeout)
[07:16:03] *** Joins: kvanb (kvanb@moz-1C09EC1.lnse1.win.bigpond.net.au)
[07:17:32] * geomyidae__ somehow thinks bitv would be useful for decoding ip headers, but isnt sure
[07:19:09] <eddyb> what's bitv?
[07:19:55] <geomyidae__> http://static.rust-lang.org/doc/master/extra/bitv/struct.Bitv.html
[07:19:57] <geomyidae__> bit vector
[07:20:11] <eddyb> you don't need
[07:20:25] <eddyb> err. you don't need anything fancy like that
[07:20:43] <olsonjeffery> huh. so i wanted to use an extra::uuid::Uuid as the key to a HashMap, but it doesn't impl IterBytes.. so i went ahead and did that, and maybe will submit a PR
[07:20:59] <eddyb> olsonjeffery: extra sometimes gets left behind
[07:21:02] <olsonjeffery> but it occured to me: would be better to just use a trie and use to_str() on the uuids ?
[07:21:15] <olsonjeffery> would it be*
[07:21:19] <eddyb> no, to_str has a cost
[07:21:29] <geomyidae__> Yeah, that looks like over kill for some bit shifting.
[07:21:54] <eddyb> bitv is a set of bits, basically an optimized ~[bool]
[07:23:02] <eddyb> (I'm saying that because I was thinking of how C++'s std::vector<bool> is optimized to a bit set like that)
[07:23:46] <eddyb> olsonjeffery: it might be better to use a trie which works on the bytes of the UUID, but I'm not sure if we have anything like that
[07:24:38] *** Quits: tikue_ (tkuehn@moz-F4812C6E.hsd1.fl.comcast.net) (Quit: tikue_)
[07:27:15] <shammancer> Hey guys I am getting a weird bug. With my client when I print the string weird mutations happen to my string
[07:27:45] <eddyb> you were printing bytes, not recv fwiw
[07:27:57] <shammancer> ?
[07:28:09] <shammancer> https://github.com/shammancer/rusty/blob/master/client.rs
[07:28:40] <eddyb> shammancer: what do you see?
[07:29:10] <shammancer> if I send for example s my client prints ss
[07:29:24] <shammancer> if I send ll -> ll is printed
[07:29:42] <eddyb> so when it's just one character?
[07:29:57] <eddyb> are you sure it's not the server doing it? (check with telnet if you can)
[07:29:58] <shammancer> if I send lll -> i get llllll
[07:30:03] <shammancer> k
[07:31:17] *** Quits: kvanb (kvanb@moz-1C09EC1.lnse1.win.bigpond.net.au) (Ping timeout)
[07:32:02] *** Quits: cdidd (cdidd@moz-A33FA5E5.broadband.corbina.ru) (Ping timeout)
[07:32:26] <shammancer> Telneting in works fine
[07:32:47] *** Joins: pao (pao@moz-AF905E87.fbx.proxad.net)
[07:33:27] *** Joins: victorporof (victorporo@221F1DFA.9004F55.9B1E38F4.IP)
[07:33:44] *** Quits: pao (pao@moz-AF905E87.fbx.proxad.net) (Quit: pao)
[07:34:07] <eddyb> shammancer: add println!("bytes={:?}", bytes); here https://github.com/shammancer/rusty/blob/master/client.rs#L34
[07:34:16] <eddyb> shammancer: also print the value inside Some for good measure
[07:36:41] <skrylar> bleh
[07:36:50] <skrylar> pulled out the latest head, build still breaks on linux (for the compiler)
[07:38:01] *** Joins: tikue_ (tkuehn@moz-F4812C6E.hsd1.fl.comcast.net)
[07:38:10] <shammancer> where do you want me to put the println!
[07:40:05] <eddyb> shammancer: replace the line with  Some(n) => {rcv.push_all(bytes);  println!("bytes={:?} rcv={:?} n={:?}", bytes, rcv, n);}
[07:42:42] <shammancer> llll
[07:42:44] <shammancer> bytes=[108u8] rcv=~[108u8] n=1u
[07:42:46] <shammancer> bytes=[108u8] rcv=~[108u8, 108u8] n=1u
[07:42:48] <shammancer> bytes=[108u8] rcv=~[108u8, 108u8, 108u8] n=1u
[07:42:50] <shammancer> bytes=[108u8] rcv=~[108u8, 108u8, 108u8, 108u8] n=1u
[07:42:52] <shammancer> llll
[07:43:00] *** Joins: Ms2ger (Ms2ger@F98499EB.6D359A20.187A1082.IP)
[07:43:24] <eddyb> shammancer: but there it works right
[07:43:29] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[07:43:29] <Luqman> shammancer: what's wrong exactly?
[07:43:51] <eddyb> shammancer: the point of the debug info is to explain why it doesn't work when it doesn't work :P
[07:44:03] *** Joins: moostik (Icedove@moz-D8A556EF.w92-135.abo.wanadoo.fr)
[07:44:13] <shammancer> It was not working before...
[07:44:19] <Luqman> oops, meant that for skrylar 
[07:44:36] <eddyb> shammancer: try something that breaks
[07:45:03] <skrylar> Luqman: [..] No rule to make target `i686-unknown-linux-gnu/rt/stage0/arch/i386/_context.o' [..]
[07:45:13] <eddyb> shammancer: as in, fool around until it breaks again
[07:45:14] <skrylar> Luqman: basically, the bootstrap script is b0rk
[07:46:02] <eddyb> skrylar: are you sure your clone is clean and configured?
[07:46:09] *** Quits: maxiepoo (Max@moz-D66F3D4E.atvci.net) (Quit: maxiepoo)
[07:46:23] <shammancer> Ok so I tried it without to find something that did not work and when I tried it again with the debug outputs it did work.
[07:46:30] <skrylar> i pulled it out earlier, ran ./configure (no errors, just as i did on windows+mingw) and make runs up until that part and jams
[07:46:51] <eddyb> shammancer: are you sure it wasn't your input that you were seeing?
[07:47:11] <shammancer> definitly
[07:47:24] <shammancer> sss
[07:47:26] <shammancer> ssssss
[07:47:32] <eddyb> because I seriously doubt you found a heisenbug
[07:47:41] <shammancer> First line input second output
[07:48:07] <eddyb> shammancer: where's your server?
[07:48:23] <eddyb> I was hoping telnetting would make it obvious, maybe it has the same delay property
[07:48:54] <shammancer> server.rs in the repo
[07:48:55] *** Joins: pongad (Mibbit@moz-4EEFC4CE.vpn.gatech.edu)
[07:49:07] <eddyb> skrylar: pulled? as in, you have built before there? make clean and maybe rm -rf i686-unknown-linux-gnu just in case
[07:49:16] <Luqman> skrylar: mind pasting it all?
[07:49:17] <skrylar> eddyb: cloned
[07:49:29] <shammancer> https://github.com/shammancer/rusty/blob/master/server.rs
[07:49:56] <skrylar> to be appeasing i re-cloned the repository to scorch anything; i'll toss the config/make through tee in a minute
[07:50:10] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[07:50:25] <eddyb> skrylar: is the build on a 64bit linux distro in any case?
[07:50:37] <skrylar> 32-bit
[07:50:51] <eddyb> hmpf. yeah, we'll want to see that log
[07:51:21] <eddyb> shammancer: okay, that's weird. though it might be related to the fact that you're not buffering
[07:51:49] <skrylar> eddyb: its rolling through config; it'll be about ten minutes
[07:51:53] <shammancer> Ok...
[07:51:55] <skrylar> ... or done
[07:52:28] *** Quits: victorporof (victorporo@221F1DFA.9004F55.9B1E38F4.IP) (Quit: victorporof)
[07:52:37] *** Quits: txdv (quassel@966F3542.3BA477DA.14C26596.IP) (Ping timeout)
[07:53:01] <geomyidae__> I would've thought a buffer would've been more likely.
[07:53:08] <shammancer> ?
[07:53:29] <geomyidae__> fill the buffer with xxxxxx and then yy and it may contain yyxxxx if you don't read the number of bytes read and reslice, or if you don't empty the buffer, etc
[07:53:41] <eddyb> not that kind of a buffer, geomyidae__
[07:53:51] <eddyb> this isn't C :P
[07:54:06] <skrylar> Luqman, eddyb: http://pastebin.com/m5PRg298
[07:54:27] <geomyidae__> I don't follow, is that not a typical pattern in rust land to have a byte slice that'd refilled on reads? Hrm, maybe I should hold my breath until I finish my tcp work :P
[07:54:44] <eddyb> we need an infobot so I can just do !pastebin and be done with it, otherwise I'll sound mean
[07:54:45] * geomyidae__ does that in golang :P
[07:55:07] <geomyidae__> If that's at me, I don't mind, I have my touch irc skin on :)
[07:55:13] <eddyb> geomyidae__: it's a C pattern. we still don't have a FixedCapGrowableVec
[07:55:28] *** Joins: maxiepoo (Max@moz-D66F3D4E.atvci.net)
[07:55:39] <shammancer> Well I pared it down to "Some(_) => {rcv.push_all(bytes); println!("rcv={:?}", rcv);}," and it works fine...
[07:55:40] <eddyb> which would have equivalent performance, but none of the safety issues
[07:55:56] <eddyb> shammancer: try replacing the stdin-read message with a static string and comment out the debug println, in the client
[07:56:14] <shammancer> k
[07:56:23] <Luqman> skrylar: hmm and that's with a clean build dir?
[07:56:29] <skrylar> yep
[07:56:37] <skrylar> cloned from rust's public github
[07:56:50] <eddyb> Luqman: you can see from "configure: making directories" and the following lines
[07:57:20] <eddyb> is the last snapshot from 17.12? that sounds old
[07:57:36] <Luqman> skrylar: so it seems like you're building in-tree, could you try in a separate build dir perhaps?
[07:57:43] <Luqman> eddyb: nope, that's the latest
[07:57:56] <skrylar> Luqman: I could try it, though my Windows/MinGW build was in-tree and was clean
[07:58:11] <Luqman> yea, it shouldn't be an issue
[07:58:12] <eddyb> in-tree is the only way I've seen it built fwiw
[07:58:26] <eddyb> maybe there's a way to run make so it prints more info
[07:58:44] <shammancer> let msg = "Hello\n"; resulted in "Heelllloo"
[07:59:05] <skrylar> Luqman: tried a subdir build, same error
[07:59:06] <Luqman> i've just always used a separate build dir since it makes it easier to wipe it all away
[07:59:25] <shammancer> and it is not consistant I am also getting HHeelllloo
[07:59:27] <skrylar> it looks like the makefile is just busted; that error means the rule isn't listed in it
[07:59:43] <skrylar> Luqman: you can also just have git blast the directory
[08:00:01] <eddyb> shammancer: can you try printing every byte you get, on the server?
[08:00:06] <Luqman> skrylar: sure, but rm -r is simple enough to remember :P
[08:00:20] <shammancer> sure
[08:00:22] <o11c> shammancer: make sure you're consuming enough of the buffer ...
[08:00:23] <eddyb> on x64, _context.d lists src/rt/arch/x86_64/_context.S
[08:00:30] *** Quits: tikue_ (tkuehn@moz-F4812C6E.hsd1.fl.comcast.net) (Quit: tikue_)
[08:00:57] <skrylar> there was a while i used 'tup' as a build system, which refused to put in a 'clean' option
[08:01:08] <skrylar> their workflow was to git-blast it, heh
[08:01:24] *** Joins: mosscollum (mosscollum@moz-8F108AD4.bstnma.fios.verizon.net)
[08:01:51] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Quit: buildmaster reconfigured: bot disconnecting)
[08:01:51] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[08:02:05] <eddyb> skrylar: mk/rt.k: RUNTIME_S_$(1)_$(2) := rt/arch/$$(HOST_$(1))/_context.S \
[08:02:40] <skrylar> eddyb: so it sounds like i have to go manually specify a platform
[08:03:08] <eddyb> no, it wants the .o file, which is generated from the .S filename
[08:03:12] <o11c> possibly ix86 the x is varying?
[08:03:15] *** Quits: mosscollum (mosscollum@moz-8F108AD4.bstnma.fios.verizon.net) (Ping timeout)
[08:03:35] <shammancer> The server is just seeing the six bytes from the client. "Hello"
[08:03:45] <shammancer> The server is just seeing the six bytes from the client. "Hello\n"
[08:04:16] <eddyb> shammancer: okay, try to send some fixed buffer from the server to the client, see if that works
[08:04:23] <shammancer> ?
[08:04:46] <eddyb> shammancer: instead of echoing the received bytes, just send "foobar" when the client connects
[08:04:57] <shammancer> oh
[08:04:59] <shammancer> k
[08:05:31] <eddyb> skrylar: one idea I have right now is that you don't have an assembler or something about the assembler rule is broken
[08:05:57] * geomyidae__ is going to clone it and play too
[08:06:04] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Quit: buildmaster reconfigured: bot disconnecting)
[08:06:04] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[08:06:11] <skrylar> eddyb: `which as` -> /usr/bin/as
[08:06:39] <Luqman> o11c: well, it should get normalized
[08:06:51] <skrylar> GNU assembler (GNU Binutils for Ubuntu) 2.23.2
[08:06:55] <eddyb> skrylar: the replacement pattern is $$(RUNTIME_S_$(1)_$(2):rt/%.S=$$(RT_BUILD_DIR_$(1)_$(2))/%.o)
[08:07:09] <eddyb> and the rule is $$(RT_BUILD_DIR_$(1)_$(2))/%.o: rt/%.S  $$(MKFILE_DEPS) \
[08:07:13] <skrylar> i think the i686 is breaking it
[08:07:24] *** Quits: andrew-d (andrew-d@6C6C9B53.23518FA3.CE794808.IP) (Ping timeout)
[08:07:26] <Luqman> skrylar: i don't seem to be running into it on x64 with --build/host=i686-unknown-linux-gnu
[08:07:28] <skrylar> if i look in the source directory, theres an i386 with the files under it
[08:07:41] <eddyb> skrylar: they're different things
[08:07:54] <eddyb> wait a second
[08:08:48] <skrylar> src/rt/arch -> arm, mips, i386, x86_64; and the rule you mention looks like it might be trying to find i686 in the folder
[08:09:01] * skrylar tries something out of curiosity
[08:09:01] <Luqman> skrylar: no, it knows to look for i386
[08:09:06] <Luqman> cfg: host for i686-unknown-linux-gnu is i386
[08:09:48] *** Joins: andrew-d (andrew-d@6C6C9B53.23518FA3.CE794808.IP)
[08:09:59] <Luqman> if it didn't it'd fail much earlier :P
[08:10:06] <skrylar> hrm, i tried making a copy just to see; didn't help
[08:10:16] <skrylar> well, i'm at a loss *nods* since i'm not a compiler dev
[08:10:23] <eddyb> skrylar: $$(RT_BUILD_DIR_$(1)_$(2))/%.o matches $$(RT_BUILD_DIR_$(1)_$(2))/%.o identically, which means it wants rt/%.S which is what it was replaced from, so it should work
[08:10:51] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Quit: buildmaster reconfigured: bot disconnecting)
[08:10:52] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[08:11:04] *** Quits: pongad (Mibbit@moz-4EEFC4CE.vpn.gatech.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[08:11:09] <eddyb> skrylar: gist the output of "find i686-unknown-linux-gnu"
[08:12:32] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[08:12:36] <skrylar> gist.. hrm, one minute let me get my github password
[08:12:59] <klutzy> what's the result of `make i686-unknown-linux-gnu/rt/stage0/arch/i386/_context.o --debug VERBOSE=1`?
[08:14:20] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[08:14:42] <eddyb> .S needs $$(LLVM_CONFIG_$$(CFG_BUILD))
[08:14:53] <eddyb> and LLVM is not built yet
[08:15:14] <eddyb> skrylar: can you remove this line and the \ on the previous line? https://github.com/mozilla/rust/blob/master/mk/rt.mk#L116
[08:15:30] <skrylar> eddyb: https://gist.github.com/Skrylar/8110262
[08:15:54] <geomyidae__> when I have the server output a constant byte array, the client seems to print the correct thing.
[08:16:02] *** Quits: ofeldt (ofeldt@moz-F84B263E.dip0.t-ipconnect.de) (Ping timeout)
[08:17:11] <skrylar> klutzy: File `i686-unknown-linux-gnu/rt/stage0/arch/i386/_context.o' does not exist.
[08:17:47] <eddyb> skrylar: try what I said, it doesn't make sense to depend on LLVM. or maybe the LLVM build should be triggered for you and it isn't
[08:18:04] <skrylar> just a sec, responding in order
[08:18:22] <eddyb> https://github.com/mozilla/rust/commit/4699b6865f9e25b638553e5852858d183476035a oh
[08:18:41] <skrylar> eddyb: if i do that, it complains about missing separators down the line
[08:18:46] <eddyb> if it's using LLVM when why is it built before LLVM?
[08:18:58] *** Quits: paulproteus (quassel@199.199.210.158) (Ping timeout)
[08:19:04] <eddyb> skrylar: did you remove the line and the \ on the previous line?
[08:19:15] <eddyb> skrylar: and you didn't leave an empty line there?
[08:19:27] *** Quits: andrew-d (andrew-d@6C6C9B53.23518FA3.CE794808.IP) (Ping timeout)
[08:19:27] *** Joins: paulproteus (quassel@458FE134.3EC36C88.CBDCF1DC.IP)
[08:19:37] *** Joins: ofeldt (ofeldt@moz-F84B263E.dip0.t-ipconnect.de)
[08:19:50] <skrylar> you just said to remove the \; one sec
[08:20:15] <skrylar> fiddled with it again
[08:20:22] <eddyb> skrylar: yes. Makefiles are very sensitive, I was just making sure you did everything right :P
[08:20:34] <geomyidae__> read_byte and write_u8
[08:21:00] <eddyb> geomyidae__: hah, I forgot about those
[08:21:09] <skrylar> eddyb: now it complains that llvm-mc was not found
[08:21:22] <skrylar> which is good because it didn't bother trying to build that first o_O
[08:21:29] <geomyidae__> https://www.irccloud.com/pastebin/CQpICOJU
[08:21:46] <eddyb> skrylar: that confirms my last suspicion: it's not building LLVM for you
[08:22:05] <eddyb> configure: not reconfiguring LLVM, external LLVM root
[08:22:14] <geomyidae__> almost, but not every single character is duplicated. Weird.
[08:22:18] <skrylar> i reconfigured it without --llvm-root
[08:22:25] <eddyb> LOL
[08:22:34] <eddyb> skrylar: you said you didn't have any configure args
[08:22:45] <skrylar> I did not actually say that :D
[08:22:54] <eddyb> and we were blind to not see the missing thousands of lines of LLVM building
[08:22:59] <eddyb> which should've been there
[08:23:08] *** Quits: ofeldt (ofeldt@moz-F84B263E.dip0.t-ipconnect.de) (Ping timeout)
[08:23:20] *** Joins: andrew-d (andrew-d@6C6C9B53.23518FA3.CE794808.IP)
[08:23:26] <eddyb> skrylar: right. you were a little ambiguous
[08:24:00] * skrylar peers at the log
[08:24:05] <skrylar> actually it does say CFG_CONFIGURE_ARGS
[08:24:15] <skrylar> but yeah, i derped with llvm-root
[08:24:44] <eddyb> it's cut off and buried in a wall of text :))
[08:25:07] <eddyb> skrylar: I don't think rust can even be built with non-rust-patched LLVM yet, and from the looks of it you don't have llvm installed at all. or you're pointing to the wrong thing
[08:25:19] <skrylar> eddyb: that doesn't particularly matter
[08:25:27] <skrylar> i did a git clean, reconfigure with zero flags whatsoever
[08:25:30] <skrylar> same result
[08:25:53] <skrylar> i686-unknown-linux-gnu/llvm/Release+Asserts/bin/llvm-mc: not found
[08:25:55] <eddyb> is it trying to build LLVM?
[08:25:57] <geomyidae__> shammancer: any progress, I'm intently curious now as well.
[08:26:11] <eddyb> skrylar: if it's not building LLVM, look and see why
[08:26:32] <eddyb> skrylar: the lines after configure: looking at LLVM
[08:27:08] *** Joins: ofeldt (ofeldt@moz-F84B263E.dip0.t-ipconnect.de)
[08:27:38] *** Quits: andrew-d (andrew-d@6C6C9B53.23518FA3.CE794808.IP) (Ping timeout)
[08:28:15] <skrylar> says its 'configuring LLVM for i686-unknown-linux-gnu'
[08:28:28] <skrylar> (in a clean build dir, no config flags)
[08:28:52] <eddyb> and it's trying to build librustrt before LLVM?
[08:28:57] <skrylar> correct
[08:29:22] <eddyb> skrylar: what's CFG_LLVM_BUILD_DIR_i686_unknown_linux_gnu?
[08:29:41] <skrylar> configure: CFG_LLVM_BUILD_DIR_i686_unknown_linux_gnu := /home/skrylar/Applications/rust/i68 ...
[08:29:59] <eddyb> why does it do that?
[08:30:03] <eddyb> or is it your terminal?
[08:30:36] * skrylar checks the log
[08:30:46] <skrylar> Configure just decided to, apparently
[08:30:47] <shammancer> What is a non scalar cast?
[08:30:56] <skrylar> ./configure 2>&1 | tee skry-config.log
[08:31:01] <shammancer> example & static str as &[u8]
[08:31:09] <eddyb> shammancer: you can't do that
[08:31:14] <eddyb> shammancer: .as_bytes()
[08:31:19] <shammancer> thanks
[08:31:23] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:32:13] <skrylar> i wonder about the windows build now; i already had an install of llvm+clang on that machine, i wonder if it just used an existing llvm through the shell before building the correct one to link with
[08:32:22] <shammancer> It is working now I'll push what I have to the repo...
[08:32:39] <eddyb> skrylar: try "make llvm" and see what that does
[08:32:55] <skrylar> should i revert the makefile change from earlier yet?
[08:33:00] <eddyb> yes
[08:33:14] <eddyb> also try without "make llvm"
[08:33:35] <shammancer> https://github.com/shammancer/rusty
[08:33:35] <eddyb> maybe it wasn't building LLVM because you removed the dependency? but you said you tried with a clean clone. idk
[08:34:11] <skrylar> okay; git reset hard / git clean / configure (no flags) / make
[08:34:18] <skrylar> *that* time it decided 'oh i should make llvm'
[08:34:32] <eddyb> shammancer: keep in mind you can amend commits and even remove then all together: https://github.com/shammancer/rusty/commits/master
[08:34:46] <skrylar> rebase is your friend :3
[08:34:54] <eddyb> that too
[08:35:32] <skrylar> i do possibly excessive rebasing locally; usually make off a branch and then commit after the tiniest progress, then rebase to squash it down in to logical chunks
[08:35:58] <shammancer> bah whatever for now...
[08:36:19] <skrylar> eddyb: the voodoo incantations seem to be working now, so thank you
[08:36:21] <shammancer> I'll rebase after I get it fixed...
[08:36:37] <eddyb> I think that's "squash"
[08:36:46] <eddyb> skrylar: everything makes sense, actually
[08:37:06] <eddyb> we should print a big warning for --llvm-root
[08:37:08] <skrylar> yeah i thought llvm-root was for a prefix, since i had tried --prefix and config rejected it
[08:37:19] <skrylar> though later it accepted it
[08:37:20] <shammancer> hum give me a minute
[08:37:48] <eddyb> the only way that would even work is if you had multiple rust clones with a single LLVM build, in one of them
[08:38:11] <geomyidae__> My last two commits on my fork made it work as well: https://github.com/colemickens/rusty/commits/master
[08:38:29] <skrylar> its currently building with a --prefix flag set, so i'll see tomorrow if it works
[08:38:39] <geomyidae__> (my commits make it work without sending back a fixed string too ;))
[08:38:44] <geomyidae__> it works end to end shammancer 
[08:38:58] <geomyidae__> Unfortunately, I don't understand why mine works and your original one didnt'.
[08:39:06] <skrylar> i like to install dev-ware to ~/local, since I put that under a git repository and use rebase to uninstall libs
[08:40:05] <shammancer> Did mine not work for you aswell?
[08:40:15] <geomyidae__> yes. I observed the same character doubling as you.
[08:40:17] <eddyb> geomyidae__, shammancer: go look at the docs and maybe the implementation of read_byte and whatnot. have fun
[08:40:30] * geomyidae__ is
[08:40:42] <shammancer> Not tonight
[08:40:50] <eddyb> skrylar: oh, that's smarter than the /usr/local crap I have to put up with by default :D
[08:40:58] <skrylar> yeah
[08:41:08] <skrylar> I already used it on rust 0.8
[08:41:21] <skrylar> just rebase <some earlier hash>, DD in vim to nuke the commit and save
[08:41:47] <skrylar> you *could* do the same to /usr/local, though
[08:42:04] <eddyb> root shenanigans :/
[08:42:21] <eddyb> and you end up with a weird package managed
[08:42:25] <eddyb> *manager
[08:42:27] <skrylar> you'd have to sudo to do anything with it
[08:42:33] <skrylar> LVM also does snapshotting
[08:42:44] *** Quits: eholk (eholk@moz-58C5EE6F.wavecable.com) (Ping timeout)
[08:42:52] <skrylar> I really should set up LVM on this computer :/ I suspect it would be a pain to convert over
[08:43:10] <skrylar> there was a wonderful ubuntu update which completely broke OpenGL in KDE apps, which means Krita = dead on arrival
[08:43:26] <eddyb> yay ubuntu -_-
[08:43:40] <skrylar> if I had LVM snapshots i could've just done a rollback -_-
[08:43:41] *** Joins: eholk (eholk@moz-58C5EE6F.wavecable.com)
[08:44:30] * eddyb tries to not express dislike for certain distros in here, because fights like that are a waste of time and energy
[08:44:32] <o11c> LVM snapshots are not designed to be permanent, just long enough to do a backup
[08:44:40] <geomyidae__> zsh/btrfs ftw
[08:44:51] <o11c> eddyb: it's okay, everybody hates Ubuntu
[08:45:13] <eddyb> I did have an idea of using something like git across the entire filesystem, and things like skeleton user config and app settings could be cloned for a default, and it would be dead easy to revert changes
[08:45:20] <o11c> I just reinstalled the other day and I was thinking about btrfs, but I talked to someone who said that when they said it's "not production ready", they really mean that
[08:45:59] <eddyb> well, you can install openSUSE on btrfs, but it's only recommended if you want to help with bug hunting and whatnot
[08:46:06] <skrylar> eddyb: it beats when someone told me to use slackware when i was a linux noob
[08:46:08] <eddyb> I didn't hear any horror stories yet
[08:46:08] <skrylar> yay RPM hell
[08:46:30] <shammancer> Oh they got brtfs for that :P
[08:46:32] <eddyb> I doubt RPMs are to be blamed for faulty package management software :P
[08:46:42] <skrylar> i hold on to apt
[08:46:47] <skrylar> it has super cow powers *nods*
[08:47:10] <eddyb> I have a debian server and I hate having to do anything with it
[08:47:15] <skrylar> weird
[08:47:16] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:47:39] <skrylar> all though after having to recover a CentOS server when some moron deleted the boot partition+kernel
[08:47:44] <o11c> I can make apt do everything I want to, but I really want to learn an rpm distro too just for knowledge
[08:47:45] <skrylar> i regained a slight amount of respect for it
[08:47:55] <eddyb> oh, and my N900 sucks at command-line package management
[08:48:26] <skrylar> its great fun when someone converts the boot sector in to an LVM drive :D
[08:48:52] <eddyb> o11c: I only use rpm for things like querying what file came from what package and whatnot. zypper <3
[08:49:38] <eddyb> with apt, you have to go through apt-query (was it that? I don't know, some weird shit) or aptitude, to search at all
[08:50:02] * skrylar hugs pandoc 
[08:50:05] <eddyb> and then you don't get all the info
[08:50:13] <skrylar> I tried sphinx for documentation a while back
[08:50:22] <eddyb> skrylar: we're moving to sphinx :P
[08:50:27] <skrylar> :/
[08:50:39] <skrylar> i guess if you code a rust environment in for it
[08:50:47] <eddyb> yeah, that's the plan
[08:51:02] <eddyb> ChrisMorgan knows more
[08:51:05] <skrylar> I wasn't a huge sphinx fan, mostly just because it was very emacsen
[08:51:14] <skrylar> that is, you have to write huge boilerplate modules for anything 
[08:51:29] *** Joins: zmthy (Tim@moz-1D8B7413.dsl.dyn.ihug.co.nz)
[08:52:06] <skrylar> I really enjoy using nanoc with pandoc as the markdown processor, but i'm a rubyist
[08:52:24] <shammancer> Well this is what I decided to do in the end and it works for me.
[08:52:43] <shammancer> Next time I am going to use std::io::buffered
[08:53:12] <skrylar> asciidoc is kind of nice, though i had some huge slowness issues with it
[08:53:22] <shammancer> Thanks for all your help guys especially eddyb
[08:53:31] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[08:53:33] *** Joins: kvanb (kvanb@moz-B19851B6.lnse7.lon.bigpond.net.au)
[08:53:44] * skrylar contemplates worthiness of asciidoc processor in rust...
[08:54:38] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[08:54:39] <o11c> eddyb: rpm == dpkg (only used for low-level commands like "list files in package", "install from local file", ...), apt* are the things built on top of it
[08:56:23] <skrylar> interesting... my version of pandoc is lacking the rust highlighter; none of the keywords get annotated
[08:57:27] *** Quits: pepper_chico (pepper_chi@8D8AA2D3.F49227D1.F546FA5F.IP) (Quit: Ex-Chat)
[08:58:22] *** Joins: andrew-d (andrew-d@6C6C9B53.23518FA3.CE794808.IP)
[08:58:56] <eddyb> o11c: I know that
[08:59:01] *** Quits: derek_c (derek@FC08A66C.72EB3852.5C3BDEF0.IP) (Quit: Leaving)
[08:59:07] * skrylar heads to bed, be around tomorrow or such
[08:59:10] <skrylar> thanks everyone
[08:59:12] *** Quits: skrylar (skrylar@moz-F692F728.austin.res.rr.com) (Quit: leaving)
[09:03:19] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[09:03:36] *** Quits: ercxx (ercan@moz-5B55241D.dyn.optonline.net) (Quit: WeeChat 0.4.2)
[09:04:46] *** Quits: threecreepio (Adium@moz-9DA6CBAC.bredband.comhem.se) (Quit: Leaving.)
[09:06:02] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[09:07:39] *** Joins: eddyb (eddy@CE93CC00.F7C96DA2.FCAAE698.IP)
[09:11:02] *** Joins: jaen (jaen@moz-5EEA7E4B.play-internet.pl)
[09:13:16] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[09:14:13] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Connection reset by peer)
[09:14:20] *** Joins: victorporof (victorporo@C2B4AD5C.602BD6C.79933D60.IP)
[09:14:33] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[09:15:30] *** Joins: arrrrrrrrr (arrrrrrrrr@moz-692CDDFF.ip-addr.inexio.net)
[09:15:44] <arrrrrrrrr> morning
[09:16:55] *** Joins: andreypopp (andreypopp@moz-7261DC60.net)
[09:19:16] *** Joins: smodo (tadnr@moz-6398EFDF.dclient.hispeed.ch)
[09:21:31] *** Joins: lenstr (lenstr@592A44AF.9636F313.7A27613B.IP)
[09:31:21] *** Joins: derek_c (derek@moz-FFFA9E3F.austin.datafoundry.com)
[09:32:03] *** Quits: lenstr (lenstr@592A44AF.9636F313.7A27613B.IP) (Ping timeout)
[09:32:17] <derek_c> after I use rustpkg to build a package, am I supposed to manually put the resulting .so file to somewhere like /usr/local/lib/ so that rustc can find it?
[09:32:53] <eddyb> derek_c: no, but I think you need a tree of packages
[09:33:18] <derek_c> eddyb: could you explain?
[09:33:28] <eddyb> if you've ever worked with npm it should make sense, modulo rustpkg bugs
[09:33:59] <derek_c> eddyb: right, but is there something like package.json?
[09:34:38] <eddyb> I think extern mod foo = "github.com/bob/foo"; is how it gets dependencies
[09:34:59] <eddyb> (if that even works atm, it might have been broken for a while)
[09:35:23] <eddyb> derek_c: but npm install works even without a package.json
[09:35:23] <derek_c> eddyb: I see. then what's the correct way to install a rust library locally?
[09:35:57] <derek_c> so that I can just do extern mod "foo";?
[09:36:07] <eddyb> foo not "foo"
[09:36:22] <eddyb> cd my_project; rustpkg install dependency_name_or_url_whatever;
[09:36:36] <eddyb> that should install it in a relative directory, I think ./.rust
[09:37:00] * eddyb needs to learn more about rustpkg. guesswork doesn't work that well when trying to help others
[09:38:04] <derek_c> eddyb: haha I see. thanks :)
[09:38:19] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[09:39:00] <o11c> basically, rustpkg is not intended to *install* packages, only to download them as dependencies of another package
[09:42:31] *** Quits: derek_c (derek@moz-FFFA9E3F.austin.datafoundry.com) (Ping timeout)
[09:53:42] *** Quits: maxiepoo (Max@moz-D66F3D4E.atvci.net) (Quit: maxiepoo)
[10:03:12] *** Joins: rsaarelm (rsaarelm@moz-D1CB7158.dhcp.inet.fi)
[10:07:43] *** Joins: rca (rcatolino@moz-97C04DFB.adsl.proxad.net)
[10:07:55] *** Quits: rca (rcatolino@moz-97C04DFB.adsl.proxad.net) (Quit: Lost terminal)
[10:13:20] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[10:17:20] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[10:23:07] *** Joins: fyolnish_ (fyolnish@moz-9CF791B7.panda-world.ne.jp)
[10:23:54] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[10:24:18] *** Joins: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[10:24:53] *** Quits: fyolnish_ (fyolnish@moz-9CF791B7.panda-world.ne.jp) (Ping timeout)
[10:25:10] *** Quits: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com) (Quit: csherratt)
[10:25:10] *** Quits: moostik (Icedove@moz-D8A556EF.w92-135.abo.wanadoo.fr) (Ping timeout)
[10:25:26] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[10:26:16] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[10:29:09] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[10:32:38] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (Ping timeout)
[10:34:01] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[10:38:39] *** Quits: ofeldt (ofeldt@moz-F84B263E.dip0.t-ipconnect.de) (Ping timeout)
[10:38:49] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[10:39:33] *** Quits: KindOne (KindOne@5CDBB343.E114B4AE.EC6A1518.IP) (Ping timeout)
[10:40:21] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[10:40:38] *** Quits: nfroidure (nfroidure@moz-A6ED9060.w90-18.abo.wanadoo.fr) (Ping timeout)
[10:41:54] *** Joins: phild (Mibbit@moz-A832471B.fbx.proxad.net)
[10:42:15] *** Quits: phild (Mibbit@moz-A832471B.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[10:42:19] *** Joins: ofeldt (ofeldt@moz-F84B263E.dip0.t-ipconnect.de)
[10:43:30] *** Joins: KindOne (KindOne@moz-1373E400.dynamic.ip.windstream.net)
[10:44:07] *** Quits: zmthy (Tim@moz-1D8B7413.dsl.dyn.ihug.co.nz) (Ping timeout)
[10:44:33] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[10:45:13] *** Quits: z0w0 (zack@moz-D4EF1469.lnse2.cha.bigpond.net.au) (Client exited)
[10:47:30] *** Quits: ofeldt (ofeldt@moz-F84B263E.dip0.t-ipconnect.de) (Ping timeout)
[10:50:49] *** Joins: ofeldt (ofeldt@moz-F84B263E.dip0.t-ipconnect.de)
[10:52:52] *** Joins: zmthy (Tim@moz-1D8B7413.dsl.dyn.ihug.co.nz)
[10:54:19] *** Quits: zmthy (Tim@moz-1D8B7413.dsl.dyn.ihug.co.nz) (Quit: leaving)
[10:58:56] *** Quits: Blub\w (wry@620605B3.71150E1A.237AE2BA.IP) (Quit: bbiab I hope)
[10:59:40] *** Quits: arrrrrrrrr (arrrrrrrrr@moz-692CDDFF.ip-addr.inexio.net) (Quit: arrrrrrrrr)
[11:04:11] *** Joins: nfroidure (nfroidure@moz-139A8041.w90-18.abo.wanadoo.fr)
[11:05:51] *** Quits: m_kato (m_kato@moz-C286AD9A.bitcat.net) (Quit: Leaving...)
[11:07:29] *** Quits: alex-abreu (alex@moz-37C4838C.w90-9.abo.wanadoo.fr) (Ping timeout)
[11:13:03] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[11:15:07] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[11:22:17] *** Joins: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP)
[11:25:08] *** Joins: alonlevy (alon@moz-FEAF8794.bb.netvision.net.il)
[11:25:48] <Mathuin> in Rust, i do something like let mem = ~[0, ..memsize] but the compiler doesn't like that and says «constant integer for repeat count but found variable»
[11:26:01] <Mathuin> how can i fix that ?
[11:28:11] *** Joins: fyolnish (fyolnish@moz-7F3E5EAD.uqwimax.jp)
[11:28:18] <eddyb> Mathuin: vec::from_elem(0, memsize)
[11:28:25] <Mathuin> thanks
[11:29:21] *** Joins: z0w0 (zack@moz-D4EF1469.lnse2.cha.bigpond.net.au)
[11:30:26] <Mathuin> now, the problem is that I'm initializing an ~[u8] but from_elem returns an [uint]
[11:30:35] * Mathuin searches through the std doc
[11:31:22] <kimundi> Mathuin: from_Element should be generic
[11:31:37] <kimundi> Mathuin: change the 0 to 0u8
[11:32:01] *** Quits: ofeldt (ofeldt@moz-F84B263E.dip0.t-ipconnect.de) (Ping timeout)
[11:32:02] <Mathuin> oh
[11:32:22] <Mathuin> that fixed it
[11:33:06] <FreeFull> rusti: vec::from_elem(0,10)
[11:33:10] -rusti- pastebinned 13 lines of output: http://ix.io/9uW
[11:33:56] <Mathuin> also, it's vec::from_elem(memsize, 0u8)
[11:33:59] <Mathuin> but thanks
[11:35:38] <Mathuin> mmh
[11:35:50] <Mathuin> I found that str has a CharIterator
[11:35:53] *** Joins: ofeldt (ofeldt@moz-7940084.dip0.t-ipconnect.de)
[11:36:13] <Mathuin> but I still can't to s.iter() with s a ~str
[11:36:14] <eddyb> for c in my_str.chars()
[11:36:57] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[11:36:58] <Mathuin> I didn't find that in the doc
[11:37:01] <Mathuin> thx
[11:38:39] *** Quits: ofeldt (ofeldt@moz-7940084.dip0.t-ipconnect.de) (Ping timeout)
[11:38:47] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[11:39:48] *** Quits: hacker_sam (hacker_sam@moz-232B271E.dsl.bngr.epix.net) (Ping timeout)
[11:42:23] *** Joins: ofeldt (ofeldt@moz-7940084.dip0.t-ipconnect.de)
[11:42:59] *** Joins: hacker_sam (hacker_sam@B471966E.A2BC3DF3.CA951B37.IP)
[11:43:12] <ChrisMorgan> eddyb: saying that we're moving to Sphinx is distinctly premature. I would only go so far as to say that most of the people who have a strong interest in it are at least mildly in favour of it, but there are still unresolved concerns. It's certainly not a fait accompli. (But when skrylar writes that Sphinx was very emacsen, writing huge boilerplate modules for anything—I haven't got a clue what he's talking about.)
[11:44:06] *** Quits: ofeldt (ofeldt@moz-7940084.dip0.t-ipconnect.de) (Ping timeout)
[11:44:42] <Ms2ger> I know that on the Gecko side, we're experimenting with Sphinx, so I guess that's a point in favour
[11:45:08] <Ms2ger> For those who don't mind being associated with Mozilla, at least :)
[11:47:49] *** Joins: gwty (gwtypc@DCAEFA45.41098343.F44414AF.IP)
[11:48:24] *** Joins: ofeldt (ofeldt@moz-7940084.dip0.t-ipconnect.de)
[11:51:50] *** kimundi is now known as zz_kimundi
[11:52:04] <ChrisMorgan> Ms2ger: what would Gecko be documenting with Sphinx?
[11:52:45] <ChrisMorgan> (I'm the main one that's been pushing Sphinx on this side; my experience with it in the past has been strongly positive and I know of no truly comparable tool.)
[11:53:03] <Ms2ger> https://ci.mozilla.org/job/mozilla-central-docs/Tree_Documentation/
[11:53:11] <Mathuin> can't I write level = match x { ... } ?
[11:53:13] <rsaarelm> I guess Rust doesn't currently support building static executables that would have a statically linked runtime embedded?
[11:53:26] <Ms2ger> Mathuin, yep
[11:53:35] <Mathuin> because it says «expected uint but found ()»
[11:53:47] <Ms2ger> You've got a semicolon too many, probably
[11:53:51] <rsaarelm> Use case is basically that I want to be able to drop a single .exe on a Windows box and have it just work, no extra .dlls needed.
[11:55:55] <Mathuin> it's at the for, it says error: mismatched types: expected `uint` but found `()` (expected uint but found ()) (http://paste.awesom.eu/Mathuin/JJH&ln)
[11:56:09] <Mathuin> (yep I'm a real newbie, I keep making stupid mistakes)
[11:56:39] <Ms2ger> Hmm
[11:57:14] <Mathuin> (that's an excerpt from my BF interpreter)
[11:58:11] <Ms2ger> Oh!
[11:59:03] <Ms2ger> If the for loop gets to the end of the string, what happens?
[12:00:57] <ChrisMorgan> Mathuin: just a hint on convention, if you care: standard Rust formatting has opening curly braces on the same line, and no space before type ascription colons (only after).
[12:01:24] <ChrisMorgan> Mathuin: also, that function doesn't need ~str; it'd do just fine with &str.
[12:01:30] *** Quits: alonlevy (alon@moz-FEAF8794.bb.netvision.net.il) (Ping timeout)
[12:02:22] <Ms2ger> Mathuin, and if you don't see it, add a semicolon after the closing } of the loop, then you get a better error message
[12:02:45] *** Quits: hacker_sam (hacker_sam@B471966E.A2BC3DF3.CA951B37.IP) (Ping timeout)
[12:04:42] *** Joins: Ferreus (ferreus@moz-32605A8E.pools.arcor-ip.net)
[12:05:05] *** Joins: hacker_sam (hacker_sam@moz-FE3C525B.dsl.bngr.epix.net)
[12:08:51] <Mathuin> oops
[12:09:07] <Mathuin> for the formatting, that's my C style which is surfacing :D
[12:09:35] *** Joins: Blub\w (wry@620605B3.71150E1A.237AE2BA.IP)
[12:09:51] <Mathuin> thanks, fixed
[12:13:31] * ChrisMorgan wants someone to fix up the pretty printer and make a rustfmt tool a strongly encouraged feature
[12:14:09] *** Joins: peterdn (chatzilla@moz-933EC8C2.range86-174.btcentralplus.com)
[12:14:53] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Ping timeout)
[12:17:13] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[12:20:41] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[12:22:43] *** Joins: bkircher (bkircher@moz-6B05F9C0.dip0.t-ipconnect.de)
[12:23:00] <bkircher> Hello there
[12:23:25] <bkircher> How do I iterate over an enum? Is it possible?
[12:25:44] <Mathuin> huhhh ?
[12:26:16] <Mathuin> why would you want to do that ?
[12:26:29] <Mathuin> it doesn't make sense to me
[12:26:46] <bkircher> Hmm, I have a finite set of distinct static values
[12:26:47] <Mathuin> you could iterate over an array of enum but iterating over an enum
[12:27:02] <bkircher> for instance i have an enum Day { Monday, Tuesday, ... }
[12:27:12] <Mathuin> hmm
[12:27:18] <bkircher> Now, I would like to iterate over it...
[12:27:37] <bkircher> What would be rust-idiomatic?
[12:27:40] <Mathuin> that's kind of ugly, but you could write [Monday, Tuesday, ...].iter() I think
[12:27:54] <bkircher> Hmm, yeah, ugly
[12:28:26] <bkircher> Would you put something like Weekdays in an enum in the first place?
[12:28:34] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[12:29:28] <Mathuin> idk
[12:29:36] <benh> Sure, seems to make sense
[12:30:06] <Mathuin> hmm
[12:30:28] <Mathuin> there must be a way to write a macro that can give us the list of elements
[12:30:38] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[12:32:16] *** Joins: jessta (jessta@moz-FEFFE342.dyn.iinet.net.au)
[12:33:00] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[12:33:06] *** Quits: smodo (tadnr@moz-6398EFDF.dclient.hispeed.ch) (Ping timeout)
[12:37:36] *** lpy is now known as lpy|coding
[12:38:09] <bkircher> I think i found an RFC (#5417) in the issues regarding this
[12:38:32] <bkircher> suppose you have: enum Dir { North, East, South, West }
[12:38:58] <bkircher> With above RFC in libcore you could write something like: for Enum::enumerate |dir: Dir| { ... }
[12:39:11] <bkircher> instead of: for [North, East, South, West].each |dir| { ... }
[12:39:50] *** Quits: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Ping timeout)
[12:40:38] *** Quits: doublec (farv@moz-EC11DA4D.members.linode.com) (Quit: leaving)
[12:42:16] <Mathuin> hey, funny, Rust gives errors about non-returning
[12:42:28] <Mathuin> i.e not all paths return a value
[12:42:54] <bkircher> yeah, I just saw that too:)
[12:43:09] <Mathuin> now that's a pain
[12:43:18] <Mathuin> because I can't find the error in my code :D
[12:43:39] <bkircher> Look out for semicolons
[12:47:02] <bkircher> esp. in the last expression/statement of your function
[12:47:45] *** Joins: smodo (tadnr@moz-6398EFDF.dclient.hispeed.ch)
[12:55:11] *** flaper87|afk is now known as flaper87
[12:55:36] *** Quits: gwty (gwtypc@DCAEFA45.41098343.F44414AF.IP) (Ping timeout)
[12:56:07] <FreeFull> That's the advantage of explicit returns rather than semicolons
[12:56:23] <FreeFull> Semicolons are too subtle
[12:58:21] <Mathuin> grrr
[12:59:27] <FreeFull> Mathuin: You could show us the code and the error
[13:02:32] <Mathuin> yes
[13:02:45] <Mathuin> but I do that all the time so i'm trying a bit by myself
[13:04:30] <Mathuin> Code: http://paste.awesom.eu/Mathuin/4Wg&ln and error message: http://paste.awesom.eu/Mathuin/3zi&ln
[13:05:36] <Mathuin> for the parse_prgm, there's a placeholder: both Jnz and Jz use matching_bracket_fwd
[13:06:27] *** Joins: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net)
[13:06:56] <bkircher> Mathuin: Hmm, remove semicolon in line 29?
[13:08:40] <FreeFull> Yep
[13:10:35] <Mathuin> thanks !
[13:10:46] <Mathuin> now, the explanation please :D
[13:10:51] * Mathuin is all ears
[13:12:08] <FreeFull> Mathuin: Semicolons get rid of return values of expressions
[13:12:35] <bkircher> :) Well I started learning rust a few minutes ago... but I'll give it a shot:
[13:13:02] <bkircher> If you do not have a semicolon it's an expression... if you have one it's a statement
[13:13:54] <bkircher> You can omit 'return' so that the last expression result is returned implicitly?
[13:14:01] <bkircher> does that make sense?
[13:14:21] *** Joins: hacker_s_ (hacker_sam@moz-76CE9354.dsl.bngr.epix.net)
[13:14:28] *** Quits: hacker_sam (hacker_sam@moz-FE3C525B.dsl.bngr.epix.net) (Ping timeout)
[13:14:58] <Mathuin> idk
[13:15:09] <Mathuin> bye
[13:15:26] <bkircher> bye
[13:18:12] *** Quits: kvanb (kvanb@moz-B19851B6.lnse7.lon.bigpond.net.au) (Quit: kvanb)
[13:18:34] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[13:23:33] <FreeFull> rusti: 3
[13:23:34] -rusti- 3
[13:23:35] <FreeFull> rusti: 3;
[13:23:36] -rusti- ()
[13:24:29] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[13:24:55] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[13:25:17] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[13:26:43] *** Quits: bkircher (bkircher@moz-6B05F9C0.dip0.t-ipconnect.de) (Client exited)
[13:27:47] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[13:29:40] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Connection reset by peer)
[13:30:09] *** Quits: smodo (tadnr@moz-6398EFDF.dclient.hispeed.ch) (Ping timeout)
[13:36:11] *** Joins: bkircher (bkircher@moz-6B05F9C0.dip0.t-ipconnect.de)
[13:41:58] *** Quits: Ferreus (ferreus@moz-32605A8E.pools.arcor-ip.net) (Quit: WeeChat 0.4.2)
[13:44:40] *** Joins: smodo (tadnr@moz-6398EFDF.dclient.hispeed.ch)
[13:46:09] *** Quits: bkircher (bkircher@moz-6B05F9C0.dip0.t-ipconnect.de) (Client exited)
[13:51:55] *** Joins: Earnestly (earnest@88884C6.A3735F9C.39C00A7A.IP)
[13:52:08] *** Joins: jviereck (Adium@moz-C1790E1.dip0.t-ipconnect.de)
[13:52:19] *** Joins: bkircher (bkircher@moz-6B05F9C0.dip0.t-ipconnect.de)
[13:54:14] *** Joins: klaus (koz@moz-E49E7C4B.hsd1.wa.comcast.net)
[13:56:36] *** Quits: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:56:44] *** Quits: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru) (Connection reset by peer)
[13:56:50] *** Joins: darthdeus (darthdeus@62EE3073.3B96A244.4E88690D.IP)
[13:57:44] *** zz_kimundi is now known as kimundi
[13:57:57] <darthdeus> hey guys, i know this is a stupid question considering the wiki explicitly says rust is "alpha" software, but would you recommend using it yet if i want to get into some systems-level thingies? or are the obstacles too big?
[13:59:08] <darthdeus> i just watched a few presentations and i really love how it has some features from haskell/etc... but i'm a bit worried that it might be too much for me to handle considering there would be issues in the language itself down the road ... or am i mistaken?
[13:59:19] <darthdeus> (i'm really not trolling)
[14:01:06] <Ms2ger> Use for what?
[14:01:27] <Ms2ger> If you've got a client who wants robust software next month, no
[14:01:27] <darthdeus> basically i want to try doing some game dev, and from what i've read Go isn't an option for that :( so it's either rust (which i like), or c++ which seems much harder
[14:01:36] <Ms2ger> If you just want to try things out, sure
[14:01:40] <darthdeus> no just for my own pet projects
[14:01:45] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[14:02:19] <Ms2ger> As long as you realize that you'll need to fix things every time you update rust :)
[14:02:37] <kimundi> darthdeus: Rust is far enough that there is nothing major stopping you from that - you just have to deal with future changes of the langauge, but thats mostly just going to be library changes at this point
[14:03:21] <Ms2ger> kimundi, I wouldn't put too much money on it being mostly library changes :)
[14:03:22] <darthdeus> i dont mind backwards compatibility breaking things :) i'm more worried about things not working at all from the start
[14:04:25] <kimundi> darthdeus: We are far enough that stuff should work mostly
[14:04:48] *** Joins: AvianFlu (AvianFlu@974D245D.130DDD13.67CD788C.IP)
[14:06:15] *** Joins: sigma1 (sigma@moz-6E1846A2.range86-184.btcentralplus.com)
[14:06:20] *** Joins: mosscollum (mosscollum@moz-8F108AD4.bstnma.fios.verizon.net)
[14:06:22] <darthdeus> cool, glad to hear that
[14:06:39] <kimundi> Ms2ger: Well, the only major thing I can think of is box right now. DST will only affect vectors/strings, and only mostly the implementation, and many other planned changes are additions. I mean, it's not like there is still the possibility that we get rid of traits for example
[14:07:12] <Ms2ger> Does @removal count as language?
[14:09:02] *** Quits: mosscollum (mosscollum@moz-8F108AD4.bstnma.fios.verizon.net) (Ping timeout)
[14:09:54] <kimundi> Well, okay @. But thats almost halfway done already, so I don't count it as _will_ change ;P
[14:13:42] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[14:22:46] <eddyb> darthdeus: if you haven't found it already, there's a gamedev community
[14:22:55] <darthdeus> eddyb: where? :O
[14:23:07] <darthdeus> i found the wiki page
[14:24:25] <eddyb> yeah, it says there's an #rust-gamedev
[14:25:09] <eddyb> oh, there's a bunch of libraries here https://github.com/mozilla/rust/wiki/Computer-Graphics-and-Game-Development
[14:25:15] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[14:27:00] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[14:27:41] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[14:28:34] *** Quits: AvianFlu (AvianFlu@974D245D.130DDD13.67CD788C.IP) (Input/output error)
[14:30:49] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[14:33:26] <kimundi> darthdeus: You can join #rust-gamedev on this network :)
[14:34:00] *** Joins: derek_c (derek@FE5D6C1E.80543B4A.7E5576EA.IP)
[14:35:23] <derek_c> what does #[feature(globs)] do?
[14:36:07] <Ms2ger> Allow use foo::*, I think
[14:37:39] *** Quits: andreypopp (andreypopp@moz-7261DC60.net) (Quit: andreypopp)
[14:39:22] *** Joins: rrust (Mibbit@B175C1A.F27E69A1.3BD9FE04.IP)
[14:39:23] <derek_c> Ms2ger: kk thanks
[14:39:49] <derek_c> how do you run tests?  I mean that kind of tests marked by #[cfg(test)]
[14:40:26] <darthdeus> kimundi: thanks :)
[14:40:35] <rrust> pub trait Server: Send + Clone {} , Does Rust support Union Type?
[14:40:45] *** Quits: pyon (user@D883E380.480D3EC1.1C8C8CE9.IP) (Quit: ERC Version 5.3 (IRC client for Emacs))
[14:41:17] <Ms2ger> Depending on what you mean by union type
[14:41:32] <rrust> like pub trait Server: Send + Clone {}
[14:42:07] <derek_c> ah I see
[14:43:32] <eddyb> rrust: it's not an "union type", trait inheritance is just multiple inheritance
[14:45:32] <rrust> eddyb thx
[14:45:51] *** Quits: z0w0 (zack@moz-D4EF1469.lnse2.cha.bigpond.net.au) (Ping timeout)
[14:46:22] <eddyb> rusti: trait Foo: Send + Clone {}
[14:46:24] -rusti- ()
[14:46:51] <eddyb> rusti: let x: ~Clone:Send;
[14:46:51] -rusti- out.rs:9:12: 9:13 warning: unused variable: `x`, #[warn(unused_variable)] on by default
[14:46:51] -rusti- out.rs:9         let x: ~Clone:Send;
[14:46:52] -rusti-                      ^
[14:46:52] -rusti- ()
[14:46:58] <eddyb> rusti: let x: ~(Clone+Send);
[14:47:01] -rusti- pastebinned 6 lines of output: http://ix.io/9v0
[14:47:06] <eddyb> rrust: that's what you can't do ^^
[14:47:59] <rrust> eddyb you mean "Send + Clone" is one single type?
[14:48:13] <rrust> not union?
[14:48:41] <eddyb> rrust: if you define a trait inheriting Send + Clone, it's actually inheriting Send and inheriting Clone, not their "union"
[14:49:21] <rrust> inheriting a type or trait?
[14:50:21] *** Joins: gwty (gwtypc@46960F17.108B122E.25B273F5.IP)
[14:51:01] <rrust> eddyb so we can: trait Foo1: T{} trait Foo2: Foo1 ?
[14:51:16] *** Joins: mosscollum (mosscollum@moz-8F108AD4.bstnma.fios.verizon.net)
[14:51:23] *** Quits: mosscollum (mosscollum@moz-8F108AD4.bstnma.fios.verizon.net) (Quit: mosscollum)
[14:51:25] <eddyb> rrust: traits can inherit other traits
[14:51:37] <darthdeus> should i use 0.8 or master?
[14:51:40] <eddyb> master
[14:51:44] <darthdeus> some libraries mention that 0.8 is too old
[14:51:51] <rrust> eddyb to inheriting by using type?
[14:51:51] <Ke> <3
[14:52:08] <eddyb> rrust: there is no types
[14:52:21] *** Quits: gwty (gwtypc@46960F17.108B122E.25B273F5.IP) (Ping timeout)
[14:52:30] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[14:52:38] <eddyb> rrust: traits are not types, types are not traits
[14:52:48] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[14:53:16] <rrust> eddyb but using the same symbol ":"
[14:53:39] <rrust> var x: type; trait y: trait
[14:53:57] <eddyb> rrust: those actually come from different languages, so to speak :P
[14:54:56] <eddyb> rrust: so in "trait Foo: Bar {}" and "fn baz<T: Clone>(......", the ":" refers to traits
[14:55:25] *** Joins: davidillsley (sid18481@moz-5F4AA75A.irccloud.com)
[14:55:59] <rrust> eddyb sorry, like this, let x: type; trait y: trait1;
[14:56:09] <eddyb> yeah
[14:56:23] <eddyb> ":" is just a delimiter
[14:56:51] <rrust> eddyb, I mean judge what ":"mean by keyword?
[14:57:49] <rrust> eddyb, Why make trait and type the same?
[14:57:58] <eddyb> rrust: not just keyword, but context
[14:58:07] <eddyb> it's not making them the same
[14:58:19] <eddyb> it's just like ","
[14:58:29] <eddyb> (a, b, c) uses "," to delimit the elements of a tuple
[14:58:51] <eddyb> <A, B, C> uses "," to delimit the elements of a generic type argument list
[14:59:27] <rrust> OK, I　understand
[14:59:48] <eddyb> struct Foo {field1: type1, field2: type2, field3: type3} uses "," to delimit the field definitions (or declarations? I always mix those up) inside the struct
[15:00:38] *** Quits: darthdeus (darthdeus@62EE3073.3B96A244.4E88690D.IP) (Quit: Leaving...)
[15:01:53] <rrust> I just thought that trait can be a type, accually, trait+struct can be a type right?
[15:02:55] <eddyb> trait+struct doesn't make sense
[15:03:01] <kimundi> rrust: A trait can not be a type
[15:03:19] <kimundi> rrust: You can haave a trait object though, which looks like ~Trait of &Trait
[15:03:30] <kimundi> but that in itself is a type, and not a trait
[15:04:24] <rrust> kimundi thx, I just hope that type is a first-class role
[15:04:43] *** Joins: [squiddy] (squiddy@moz-3F7DAEF9.dynamic.cablesurf.de)
[15:05:18] <eddyb> kimundi: maybe we need some kind of "how to help people coming from X getting accustomed to Rust" guides
[15:06:14] <eddyb> (to my shame) I only know a few languages, and that's not enough to deal with all the concepts that people expect to see, or are curious about in Rust
[15:06:37] <rrust> eddyb: my fault
[15:06:54] <rrust> eddyb not your problem
[15:07:06] <eddyb> rrust: nope. if you have some kind of higher-level background, feel free to mention it, it helps to know :)
[15:08:51] <rrust> I just began to learn type
[15:14:20] *** kimundi is now known as zz_kimundi
[15:14:34] *** Quits: rrust (Mibbit@B175C1A.F27E69A1.3BD9FE04.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:15:44] *** Quits: lpy|coding (lpy@7360AA58.F09091A8.1348A864.IP) (Quit: Leaving...)
[15:15:48] <derek_c> how do you refer to a type defined in a C library/
[15:15:50] <derek_c> ?
[15:15:58] <eddyb> derek_c: you have to describe it
[15:16:08] <derek_c> eddyb: how?
[15:16:17] <cmr> struct Foo { ... }
[15:16:23] <cmr> structs have the same layout as C
[15:16:32] <cmr> use bindgen if you want to be lazy (being lazy is nice)
[15:16:37] <eddyb> derek_c: if it's a struct and you only work with pointers to it, *c_void will also work
[15:16:41] *** Quits: hacker_s_ (hacker_sam@moz-76CE9354.dsl.bngr.epix.net) (Client exited)
[15:16:41] *** Joins: hacker_sam (hacker_sam@moz-76CE9354.dsl.bngr.epix.net)
[15:16:45] <eddyb> oh, yeah, bindgen, I forgot about that
[15:17:30] *** Quits: bkircher (bkircher@moz-6B05F9C0.dip0.t-ipconnect.de) (Client exited)
[15:17:51] <derek_c> eddyb: interesting. yeah I think I will only be using pointers
[15:17:57] <derek_c> cmr: thanks
[15:18:47] <eddyb> derek_c: if you want to distinguish between different types without needing their contents (and without being able to create a *value* of that type), you can do enum MyType {} and use *MyType
[15:19:12] <eddyb> that works well if the C API allocates an opaque pointer
[15:19:54] <derek_c> eddyb: hmm kk I will think about that. thanks :)
[15:19:57] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[15:20:22] *** Quits: hacker_sam (hacker_sam@moz-76CE9354.dsl.bngr.epix.net) (Client exited)
[15:20:42] *** Joins: hacker_sam (hacker_sam@moz-76CE9354.dsl.bngr.epix.net)
[15:21:10] *** Joins: alonlevy (alon@E474B5C2.66334A3F.AB64B967.IP)
[15:21:55] *** Joins: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com)
[15:22:43] *** Quits: derek_c (derek@FE5D6C1E.80543B4A.7E5576EA.IP) (Ping timeout)
[15:23:05] *** Joins: awidegreen (awidegreen@moz-83CE805F.dip0.t-ipconnect.de)
[15:23:06] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[15:24:49] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[15:25:29] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[15:25:55] *** Joins: glaebhoerl (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP)
[15:27:03] <SiegeLord> Does the metadata of a library crate get read as a whole, or only item-to-item?
[15:27:09] *** Quits: glaebhoerl (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP) (Connection reset by peer)
[15:27:16] *** Joins: glaebhoerl (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP)
[15:27:20] <cmr> I think it's whole atm
[15:29:32] *** Joins: bkircher (bkircher@moz-6B05F9C0.dip0.t-ipconnect.de)
[15:31:13] *** Joins: rrust (Mibbit@B175C1A.F27E69A1.3BD9FE04.IP)
[15:31:45] *** Joins: judder (maradukewa@837BB533.C8128DC0.78E362FE.IP)
[15:33:11] <rrust> struct Foo {a: u32, b: u32, c: u32, d: u32 }   struct Bar {a: Foo, b: Foo, c: Foo, d: Foo}
[15:33:21] <rrust> Is here Foo a type?
[15:33:36] <Ms2ger> Sure
[15:34:42] *** Parts: judder (maradukewa@837BB533.C8128DC0.78E362FE.IP) ()
[15:35:26] <rrust> Ms2ger, so tranditional class minus method can be a type, right?
[15:36:04] <cmr> rrust: it's a struct
[15:36:16] <cmr> it can have methods
[15:36:25] <cmr> impl Foo { fn bar(&self) { ... } }
[15:36:32] <cmr> but they're static dispatch
[15:36:59] <rrust> yes, I know that, and can not be inherited
[15:37:17] *** Joins: derek_c (derek@moz-8C0A746C.austin.datafoundry.com)
[15:37:26] <cmr> the only relation to classes is on the surface, they aren't a concept rust knows about
[15:37:40] <cmr> (although it used to have them!)
[15:39:14] <rrust> groups of fn=trait, we can impl fn or trait for a struct like oo, but de-ooed
[15:40:03] <rrust> impl just a simulator
[15:40:33] *** Quits: terje (terje@F5FDF11B.1D1EB2D6.85889BB1.IP) (Ping timeout)
[15:40:50] *** Quits: smodo (tadnr@moz-6398EFDF.dclient.hispeed.ch) (Ping timeout)
[15:41:00] *** Joins: nical (nico@moz-2E10F05D.w86-211.abo.wanadoo.fr)
[15:41:02] *** Quits: qmx (qmx@moz-B6DBCD05.qmx.me) (Ping timeout)
[15:41:54] *** Quits: eddyb (eddy@CE93CC00.F7C96DA2.FCAAE698.IP) (Ping timeout)
[15:42:11] *** Quits: awidegreen (awidegreen@moz-83CE805F.dip0.t-ipconnect.de) (Ping timeout)
[15:43:39] *** Joins: andreypopp (andreypopp@moz-7261DC60.net)
[15:43:45] *** Quits: rrust (Mibbit@B175C1A.F27E69A1.3BD9FE04.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:44:14] *** Joins: terje (terje@F5FDF11B.1D1EB2D6.85889BB1.IP)
[15:45:08] *** Joins: moostik (Icedove@moz-C8071472.w92-135.abo.wanadoo.fr)
[15:45:23] *** Joins: qmx (qmx@moz-B6DBCD05.qmx.me)
[15:47:33] *** Joins: ninechars (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP)
[15:47:33] *** Quits: glaebhoerl (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP) (Connection reset by peer)
[15:47:49] *** Joins: ptc (Adium@6C906E9F.9ECAA4DB.BCDD830B.IP)
[15:48:43] *** Quits: derek_c (derek@moz-8C0A746C.austin.datafoundry.com) (Ping timeout)
[15:49:49] *** Joins: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP)
[15:50:48] *** flaper87 is now known as flaper87|afk
[15:52:25] <cmr> bascule: ping
[15:54:48] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[15:55:00] *** Quits: qmx (qmx@moz-B6DBCD05.qmx.me) (Ping timeout)
[15:55:30] *** Joins: smodo (tadnr@moz-6398EFDF.dclient.hispeed.ch)
[15:57:54] *** Joins: qmx (qmx@moz-B6DBCD05.qmx.me)
[16:02:35] *** Joins: lpy (lpy@12172131.F09091A8.1348A864.IP)
[16:02:50] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[16:06:02] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[16:06:13] *** Joins: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru)
[16:06:40] *** Quits: ninechars (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP) (Connection reset by peer)
[16:06:45] *** Joins: ninechars (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP)
[16:07:42] *** Quits: mrshankly (mrshankly@3EE34383.CE0EEBAE.806C54C8.IP) (Ping timeout)
[16:08:00] *** Joins: mrshankly (mrshankly@3EE34383.CE0EEBAE.806C54C8.IP)
[16:08:29] *** Quits: Amanieu (amanieu@10FEE2FD.ECEF57A4.2CFD4520.IP) (Client exited)
[16:08:47] *** Joins: Amanieu (amanieu@10FEE2FD.ECEF57A4.2CFD4520.IP)
[16:09:30] *** Joins: gwty (gwtypc@F896BC4F.A75EAEA5.D66E6624.IP)
[16:11:28] *** Quits: Amanieu (amanieu@10FEE2FD.ECEF57A4.2CFD4520.IP) (Client exited)
[16:12:07] *** Quits: katis (katis@40C8AF65.EFDC2270.EE6E63A5.IP) (Ping timeout)
[16:12:27] *** Joins: Amanieu (amanieu@10FEE2FD.ECEF57A4.2CFD4520.IP)
[16:12:27] *** Quits: Amanieu (amanieu@10FEE2FD.ECEF57A4.2CFD4520.IP) (Client exited)
[16:13:10] *** Joins: Amanieu (amanieu@10FEE2FD.ECEF57A4.2CFD4520.IP)
[16:14:35] *** Joins: hacker_s_ (hacker_sam@moz-76CE9354.dsl.bngr.epix.net)
[16:14:44] *** Quits: hacker_sam (hacker_sam@moz-76CE9354.dsl.bngr.epix.net) (Connection reset by peer)
[16:15:55] *** Quits: mrshankly (mrshankly@3EE34383.CE0EEBAE.806C54C8.IP) (Ping timeout)
[16:16:21] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[16:17:52] *** Quits: Amanieu (amanieu@10FEE2FD.ECEF57A4.2CFD4520.IP) (Client exited)
[16:17:54] *** Quits: Kxepal (Miranda@moz-F5F2E19.pppoe.mtu-net.ru) (Ping timeout)
[16:18:25] *** Joins: Amanieu (amanieu@10FEE2FD.ECEF57A4.2CFD4520.IP)
[16:18:33] *** Quits: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP) (Ping timeout)
[16:19:33] *** Joins: mrshankly (mrshankly@3EE34383.CE0EEBAE.806C54C8.IP)
[16:19:58] <Mathuin> mm
[16:20:32] <Mathuin> rust feels quite feature-full to me
[16:20:54] <Mathuin> that's how people often criticize C++
[16:24:49] <SiegeLord> I think it's very possible to master Rust today
[16:24:57] *** Quits: alonlevy (alon@E474B5C2.66334A3F.AB64B967.IP) (Ping timeout)
[16:25:01] <SiegeLord> I don't think there's anybody mortal who has mastered C++
[16:26:25] <Mathuin> even Stroustrup ?
[16:26:39] <SiegeLord> I think there's a quote by him admitting that he doesn't understand all of it
[16:26:56] <cmr> Mathuin: C++ is designed by a committee, he isn't directly involved in all of it
[16:27:21] <Mathuin> ok
[16:28:54] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[16:30:03] <Scriptor> maybe if we ever turn g++ into a person
[16:31:25] *** Quits: terje (terje@F5FDF11B.1D1EB2D6.85889BB1.IP) (Ping timeout)
[16:31:42] <SiegeLord> Now once Rust gets struct inheritance, HKT and DST... well, then we'll be talking
[16:31:43] <SiegeLord> Hah
[16:31:46] *** Quits: qmx (qmx@moz-B6DBCD05.qmx.me) (Ping timeout)
[16:32:27] *** Quits: busylizzy (lisa@270089DC.4EF5D73F.4E00FFE9.IP) (Ping timeout)
[16:32:36] *** Joins: qmx (qmx@moz-B6DBCD05.qmx.me)
[16:32:40] <SiegeLord> Hopefully Rust implementation of HKT will finally explain to me what HKT is. Never understood pattern matching until I learned Rust
[16:33:06] <Scriptor> hkt?
[16:33:10] *** Quits: dbussink (dbussink@moz-E0A5568C.bussink.me) (Ping timeout)
[16:33:14] <SiegeLord> Higher Kinded Types
[16:33:18] <SiegeLord> Or something
[16:33:21] *** Joins: busylizzy (lisa@270089DC.4EF5D73F.4E00FFE9.IP)
[16:33:25] <Scriptor> oh, right
[16:33:33] *** Quits: hacker_s_ (hacker_sam@moz-76CE9354.dsl.bngr.epix.net) (Client exited)
[16:33:55] *** Joins: derek_c (derek@1B30C765.4BC8CD52.5C3BDEF0.IP)
[16:34:17] *** Quits: jpf (jan@moz-A8C26A15.org) (Ping timeout)
[16:34:24] *** Joins: darthdeus (darthdeus@62EE3073.3B96A244.4E88690D.IP)
[16:34:51] <eddyb> SiegeLord: AFAIK, it allows you to pass generics around
[16:35:46] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[16:35:48] *** Joins: terje (terje@F5FDF11B.1D1EB2D6.85889BB1.IP)
[16:35:56] *** Quits: qmx (qmx@moz-B6DBCD05.qmx.me) (Max SendQ exceeded)
[16:36:19] *** Joins: qmx (qmx@moz-B6DBCD05.qmx.me)
[16:37:08] *** Quits: bkircher (bkircher@moz-6B05F9C0.dip0.t-ipconnect.de) (Client exited)
[16:37:40] *** Joins: jpf (jan@moz-A8C26A15.org)
[16:37:49] <eddyb> SiegeLord: so you can do type OwnedVec<T> = ~[T]; type MutRefToOwnedVec = &mut OwnedVec; and then MutRefToOwnedVec is generic even though you didn't define it as such. and you can probably go further
[16:37:59] *** Joins: dbussink (dbussink@moz-E0A5568C.bussink.me)
[16:39:41] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[16:40:39] <lpy> long tutorial :)
[16:43:49] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[16:44:43] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[16:47:11] *** Joins: bananapeel (nee__@moz-F773DFE8.netcologne.de)
[16:47:50] *** Quits: paulproteus (quassel@199.199.210.158) (Ping timeout)
[16:48:29] *** Quits: bananapeel (nee__@moz-F773DFE8.netcologne.de) (Quit: Verlassend)
[16:48:30] *** Quits: victorporof (victorporo@C2B4AD5C.602BD6C.79933D60.IP) (Ping timeout)
[16:48:37] *** Joins: bananapeel (nee__@moz-F773DFE8.netcologne.de)
[16:49:57] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[16:49:57] *** Joins: paulproteus (quassel@458FE134.3EC36C88.CBDCF1DC.IP)
[16:51:27] *** Joins: hacker_sam (hacker_sam@moz-76CE9354.dsl.bngr.epix.net)
[16:53:23] *** Quits: jviereck (Adium@moz-C1790E1.dip0.t-ipconnect.de) (Ping timeout)
[16:53:48] *** Joins: jviereck (Adium@moz-3ABAFDB5.dip0.t-ipconnect.de)
[16:54:16] *** Quits: hacker_sam (hacker_sam@moz-76CE9354.dsl.bngr.epix.net) (Client exited)
[16:54:35] *** Quits: nical (nico@moz-2E10F05D.w86-211.abo.wanadoo.fr) (Ping timeout)
[16:54:36] *** Quits: Amanieu (amanieu@10FEE2FD.ECEF57A4.2CFD4520.IP) (Client exited)
[16:55:12] *** Joins: Amanieu (amanieu@10FEE2FD.ECEF57A4.2CFD4520.IP)
[16:56:14] *** Joins: nical (nico@moz-B6E15682.w83-113.abo.wanadoo.fr)
[16:57:35] *** Quits: lpy (lpy@12172131.F09091A8.1348A864.IP) (Client exited)
[16:57:44] *** Quits: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru) (Quit: Leaving.)
[16:57:57] *** Joins: hacker_sam (hacker_sam@moz-76CE9354.dsl.bngr.epix.net)
[17:00:13] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[17:01:59] *** Quits: [squiddy] (squiddy@moz-3F7DAEF9.dynamic.cablesurf.de) (Quit: Leaving)
[17:03:01] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[17:05:09] *** Quits: Ms2ger (Ms2ger@F98499EB.6D359A20.187A1082.IP) (Quit: nn)
[17:06:52] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[17:08:27] *** Quits: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP) (Ping timeout)
[17:10:13] *** Joins: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP)
[17:14:33] *** Joins: fyolnish_ (fyolnish@moz-7F3E5EAD.uqwimax.jp)
[17:14:33] *** Quits: fyolnish (fyolnish@moz-7F3E5EAD.uqwimax.jp) (Connection reset by peer)
[17:23:22] *** Joins: alan_andrade (alan_andra@11ED57E0.8C5D18C8.88E925D5.IP)
[17:24:36] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[17:26:09] *** Joins: ptc1 (Adium@moz-70022D61.hsd1.ma.comcast.net)
[17:26:28] *** Quits: ptc (Adium@6C906E9F.9ECAA4DB.BCDD830B.IP) (Connection reset by peer)
[17:26:58] *** Quits: Earnestly (earnest@88884C6.A3735F9C.39C00A7A.IP) (Ping timeout)
[17:27:12] *** Quits: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[17:27:15] *** Joins: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com)
[17:27:33] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[17:27:51] *** Quits: ptc1 (Adium@moz-70022D61.hsd1.ma.comcast.net) (Ping timeout)
[17:28:01] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[17:29:17] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[17:29:58] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[17:30:27] *** Quits: derek_c (derek@1B30C765.4BC8CD52.5C3BDEF0.IP) (Ping timeout)
[17:31:57] *** Joins: maxiepoo (Max@moz-D66F3D4E.atvci.net)
[17:32:06] *** Quits: jaen (jaen@moz-5EEA7E4B.play-internet.pl) (Ping timeout)
[17:32:42] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Ping timeout)
[17:33:07] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[17:42:45] *** Joins: victorporof (victorporo@AFD25FB8.16D3B2F1.79933D60.IP)
[17:44:13] *** Joins: JiXiY (YxJ@moz-4A80F86A.dip0.t-ipconnect.de)
[17:44:21] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[17:44:47] *** Quits: hacker_sam (hacker_sam@moz-76CE9354.dsl.bngr.epix.net) (Client exited)
[17:45:19] *** Quits: nical (nico@moz-B6E15682.w83-113.abo.wanadoo.fr) (Ping timeout)
[17:45:23] <JiXiY> Hey there, I'm rather new to rust and just about got started with master. What would be valid code for creating a function that does, e.g., "fn get_adder(a: int) -> (|int| -> int)"?
[17:45:33] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[17:45:58] *** Joins: cdidd (cdidd@moz-B7378E3E.broadband.corbina.ru)
[17:46:00] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[17:51:12] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[17:53:44] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[17:56:20] *** Joins: ptc (Adium@moz-70022D61.hsd1.ma.comcast.net)
[17:57:07] *** Joins: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com)
[17:57:36] *** Joins: Earnestly (earnest@88884C6.A3735F9C.39C00A7A.IP)
[17:57:49] <achin> JiXiY: i tried this: https://gist.github.com/eminence/88a2f0f8bbc8357b04ce
[17:57:55] <achin> but i'm getting lifetime errors
[17:58:02] *** Quits: ptc (Adium@moz-70022D61.hsd1.ma.comcast.net) (Ping timeout)
[17:59:03] *** Joins: fyolnish (fyolnish@moz-7F3E5EAD.uqwimax.jp)
[17:59:03] *** Quits: fyolnish_ (fyolnish@moz-7F3E5EAD.uqwimax.jp) (Connection reset by peer)
[18:02:56] <SiegeLord> It can't be done, afaik
[18:03:18] <SiegeLord> That's the ~fn that got removed
[18:07:04] <achin> hm, why can't this be done?
[18:07:28] *** Joins: ricepuddin (graham@A584E1EF.E6D957F2.39C00A7A.IP)
[18:07:39] <SiegeLord> Rust has no true closures
[18:07:47] <SiegeLord> And that example requires a true closure
[18:07:57] <SiegeLord> Rust used to have them, but no more
[18:08:12] <achin> oh.  what's the difference betweena true closure and the type of closures that rust has today?
[18:08:52] <SiegeLord> Rust has stack closures and proc's. Stack closures can only exist while the stack frame they are defined in exists
[18:09:09] *** Joins: sellout (Adium@moz-9408ED29.hsd1.pa.comcast.net)
[18:09:19] <SiegeLord> So that example is illegal because adder's stack frame ceases to exist after it returns the stack closure
[18:09:23] <achin> oh, so it's not possible at all to return a closure from a function?
[18:09:40] <SiegeLord> I think it will work if it has a 'static lifetime
[18:09:52] <SiegeLord> But that means it can't enclose any external state
[18:10:13] *** Quits: eholk (eholk@moz-58C5EE6F.wavecable.com) (Ping timeout)
[18:10:16] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[18:10:33] *** Joins: katis (katis@40C8AF65.EFDC2270.EE6E63A5.IP)
[18:11:02] <achin> does this also mean that varibales that are closed over need to have a lifetime that is at least that of the closure?
[18:11:20] <SiegeLord> I think so
[18:11:39] *** Joins: eholk (eholk@moz-58C5EE6F.wavecable.com)
[18:11:47] *** Joins: ptc (Adium@moz-70022D61.hsd1.ma.comcast.net)
[18:11:57] <achin> well, that's a litle annoying
[18:12:17] <SiegeLord> Absolutely
[18:14:33] <achin> JiXiY: you'd have to do somethign like:   let plustwo = |x: int| -> int {x + 2}; 
[18:14:59] <SiegeLord> What you have to do now is what you had to do in C++03 and earlier... make functors
[18:15:07] <SiegeLord> Except Rust has no operator () so... it's even worse
[18:15:08] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[18:17:50] <eddyb> SiegeLord: it might be coming. yes, I should be working on it. I'm only slacking because of this "broken" leg
[18:18:02] <SiegeLord> Yikes
[18:18:11] <achin> why is "broken" in "quotes" ?
[18:18:21] <SiegeLord> Yeah, get it broken for real man!
[18:19:45] <SiegeLord> I think functors will be better in Rust though, once operator () is added
[18:19:51] <alan_andrade> Hey @cmeiklejohn, did you get your code to work ?
[18:19:56] <SiegeLord> Since in C++ you couldn't use functors in templates
[18:20:39] <SiegeLord> Although returning them will still be a problem
[18:20:52] <eddyb> SiegeLord: it would be a Fn trait for f(...) just like a+b can be overloaded via an Add trait
[18:20:57] *** Joins: canhtak (canhtak@38266F07.7A8E554D.FC900DAF.IP)
[18:21:05] <SiegeLord> Right, of course
[18:23:34] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
[18:27:03] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[18:28:54] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[18:30:36] *** Quits: moostik (Icedove@moz-C8071472.w92-135.abo.wanadoo.fr) (Ping timeout)
[18:30:37] *** Quits: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP) (Quit: Leaving)
[18:31:33] *** Quits: jviereck (Adium@moz-3ABAFDB5.dip0.t-ipconnect.de) (Quit: Leaving.)
[18:36:09] *** Quits: sellout (Adium@moz-9408ED29.hsd1.pa.comcast.net) (Ping timeout)
[18:36:17] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[18:41:31] *** Joins: Jesin (Jesin@moz-4B662E55.washdc.fios.verizon.net)
[18:53:00] *** Quits: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com) (Ping timeout)
[18:53:12] *** Joins: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com)
[18:54:20] *** Quits: alan_andrade (alan_andra@11ED57E0.8C5D18C8.88E925D5.IP) (Input/output error)
[18:55:57] *** Quits: fyolnish (fyolnish@moz-7F3E5EAD.uqwimax.jp) (Connection reset by peer)
[18:55:57] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[18:56:09] *** Joins: fyolnish (fyolnish@moz-7F3E5EAD.uqwimax.jp)
[19:06:02] *** Quits: heftig (heftig@moz-120967D9.dip0.t-ipconnect.de) (Ping timeout)
[19:06:49] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[19:10:14] *** Joins: hacker_sam (hacker_sam@moz-76CE9354.dsl.bngr.epix.net)
[19:10:46] *** Joins: heftig (heftig@moz-4B65442D.dip0.t-ipconnect.de)
[19:13:02] <hoverbear> Is it weird that one of my chickens likes pickles?
[19:13:39] <achin> they have very tiny brains
[19:14:07] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[19:14:23] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Ping timeout)
[19:16:26] <hoverbear> achin: No smaller than the average Java dev. ;)
[19:16:43] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[19:16:52] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[19:17:37] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[19:18:29] <achin> ha!
[19:21:38] <Scriptor> :/
[19:21:52] <achin> i mean:  that's not very nice!
[19:22:06] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[19:22:26] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[19:23:01] <hoverbear> new AbstractApologyFactoryDecorator();
[19:23:32] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[19:24:19] *** Joins: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[19:25:26] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[19:27:28] <hoverbear> Wait I forgot bean!
[19:28:05] <Scriptor> DAE superior to puny java devs
[19:29:02] <hoverbear> Scriptor: IAMA JS dev, AMA.
[19:29:44] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[19:32:21] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[19:37:10] *** Quits: smodo (tadnr@moz-6398EFDF.dclient.hispeed.ch) (Ping timeout)
[19:39:00] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[19:39:41] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[19:42:09] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[19:43:23] *** Quits: ptc (Adium@moz-70022D61.hsd1.ma.comcast.net) (Quit: Leaving.)
[19:43:24] *** Quits: Chimmy (ctimothy@moz-1DB1FE6E.hsd1.wa.comcast.net) (Input/output error)
[19:45:34] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:45:37] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[19:46:07] *** Quits: hacker_sam (hacker_sam@moz-76CE9354.dsl.bngr.epix.net) (Client exited)
[19:50:32] *** Quits: canhtak (canhtak@38266F07.7A8E554D.FC900DAF.IP) (Quit: canhtak)
[19:51:40] *** Joins: smodo (tadnr@moz-6398EFDF.dclient.hispeed.ch)
[19:56:17] *** Quits: santiago (santiago@moz-F2B734D2.c3-0.sbo-ubr1.sbo.ma.cable.rcn.com) (Ping timeout)
[20:02:18] *** Joins: fyolnish_ (fyolnish@moz-7F3E5EAD.uqwimax.jp)
[20:02:19] *** Quits: fyolnish (fyolnish@moz-7F3E5EAD.uqwimax.jp) (Connection reset by peer)
[20:02:32] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[20:03:28] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[20:03:28] *** Joins: bkircher (bkircher@moz-6B05F9C0.dip0.t-ipconnect.de)
[20:04:01] *** Quits: andreypopp (andreypopp@moz-7261DC60.net) (Quit: andreypopp)
[20:04:46] *** Joins: alan_andrade (alan_andra@11ED57E0.8C5D18C8.88E925D5.IP)
[20:06:34] *** Quits: alan_andrade (alan_andra@11ED57E0.8C5D18C8.88E925D5.IP) (Ping timeout)
[20:07:17] <JiXiY> achin: thanks a lot, too bad that the support got dropped
[20:07:42] *** Quits: bkircher (bkircher@moz-6B05F9C0.dip0.t-ipconnect.de) (Client exited)
[20:08:58] <eddyb> achin: oh, I meant to answer. it's just a sprained ankle
[20:10:26] *** Joins: andreypopp (andreypopp@moz-7261DC60.net)
[20:12:17] *** Quits: maxiepoo (Max@moz-D66F3D4E.atvci.net) (Quit: maxiepoo)
[20:14:00] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[20:19:12] *** Joins: moostik (Icedove@moz-40E6ACEF.w2-2.abo.wanadoo.fr)
[20:23:56] *** Joins: maxiepoo (Max@moz-D66F3D4E.atvci.net)
[20:24:48] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[20:28:23] *** Joins: lenstr (lenstr@1F891AB5.9636F313.7A27613B.IP)
[20:32:36] <darthdeus> just out of curiosity, how long does it take you guys to compile rust? :P and how often do you recompile from master?
[20:33:02] <darthdeus> because i have quad core i7 and it took me 28 minutes to compile 0.8, now trying master :X
[20:33:13] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:35:06] <rsaarelm> I recall it took me something like 90 minutes with my laptop. Should try again now that I switched to SSD.
[20:35:41] *** Joins: ptc (Adium@moz-70022D61.hsd1.ma.comcast.net)
[20:35:41] <darthdeus> oh wow
[20:36:39] <rsaarelm> Here goes...
[20:36:46] *** Joins: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP)
[20:37:09] <rsaarelm> (Using Arch Linux and doing the aur rust-git package build)
[20:37:48] <JiXiY> darthdeus: took me ~22 earlier today i believe. also a quad i7
[20:39:20] <rsaarelm> (Thinkpad Edge E520 laptop, 2G memory)
[20:39:54] <bstrie_vacation> rsaarelm: compilation isn't bottlenecked by i/o, so I doubt you'll see any benefit from having an ssd
[20:42:34] *** Joins: orshem (orshem@B506D550.B9DE554A.EB50AD2C.IP)
[20:43:00] <rsaarelm> Probably not, but might as well try it.
[20:43:31] <rsaarelm> Not that I have any really reliable recollection of the past compile times either.
[20:44:18] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[20:45:27] *** Joins: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com)
[20:45:30] *** Joins: tikue_ (tkuehn@moz-F4812C6E.hsd1.fl.comcast.net)
[20:45:55] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Ping timeout)
[20:47:18] *** Quits: ptc (Adium@moz-70022D61.hsd1.ma.comcast.net) (Quit: Leaving.)
[20:47:46] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[20:50:37] *** Quits: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[20:52:24] *** Quits: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com) (Quit: csherratt)
[20:52:49] *** Quits: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP) (Ping timeout)
[20:56:12] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[20:56:27] *** Joins: Krymise (Nietzsche@1C166AC3.81BFCEFF.52A100C7.IP)
[20:59:29] <darthdeus> aaand i'm still compiling, 22 minutes later, on 16G ram :)
[20:59:39] <darthdeus> btw any tips for a good talk about rust?
[21:00:25] <rsaarelm> Giving one or finding one to listen to?
[21:00:31] *** Joins: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net)
[21:02:17] *** Joins: snearch (snearch@moz-5FA23446.pool.mediaways.net)
[21:03:10] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[21:04:09] <darthdeus> finding one to listen to :)
[21:05:49] *** Joins: SiegeLord (sl@moz-3B527BD6.bstnma.fios.verizon.net)
[21:10:39] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[21:11:17] <rsaarelm> darthdeus: pcwalton's SprocketNES talk seemed fun.
[21:12:43] <rsaarelm> https://air.mozilla.org/sprocketnes-practical-systems-programming-in-rust/ Some 25 minutes in.
[21:13:54] *** Joins: g3xzh (g3xzh@moz-E33C8149.red.bezeqint.net)
[21:15:10] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[21:15:41] <eholk> i'm getting link errors when I try to build Rust on OS X. Is anyone else seeing these?
[21:15:49] <eholk> it seems like it might be related to 10.9 switching to clang...
[21:16:37] <ziad> eholk: I had those too
[21:16:52] <eholk> ziad: had? does that mean you know how to fix them?
[21:16:54] <ziad> eholk: now I just use brew to install rust: `brew install --HEAD rust`
[21:17:07] <eholk> ahh, okay
[21:17:13] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[21:17:18] <ziad> it was really annoying, couldn't find out the root cause
[21:17:34] <ziad> some "fatal error" in /lib/xxx/xx/rand right?
[21:17:47] <eholk> mine seemed to be related to std::something
[21:17:56] <ziad> hmm
[21:17:59] <ziad> try brew
[21:18:07] <eholk> it looked like the kind of error you get when you link a c++ program with gcc instead of g++
[21:18:11] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:18:14] <eholk> yeah, i'll try brew
[21:18:45] <ziad> I asked on this mailing list, it was suggested I make g++/gcc/cc point to their clang cointerpsarts
[21:18:48] <ziad> counterparts*
[21:18:53] <eholk> I'd rather build from my own clone, but this will at least let me use a later version of rust than the two week old one I built
[21:19:05] <ziad> eholk, then ./configure --enable-clang
[21:19:26] <eholk> hmm, i tried --enable-clang, but i got basically the same result
[21:19:37] <ziad> yeah, it didn't work for me either
[21:19:47] <eholk> i wonder if something changed in 10.9.1
[21:19:47] <ziad> hopefully brew works
[21:19:52] *** Joins: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net)
[21:19:55] <eholk> that seems to be roughly when it quit working for me
[21:25:29] *** Quits: orshem (orshem@B506D550.B9DE554A.EB50AD2C.IP) (Quit: Leaving)
[21:25:30] *** Quits: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:27:06] <olsonjeffery> well ill be sitting tight on mountain lion, then
[21:27:30] <olsonjeffery> i stalled for the longest time in upgrading from snow leopard, too. i went straight to mountain lion.
[21:28:03] <eholk> i've been mostly unhappy with Mavericks so far
[21:28:07] *** Quits: tikue_ (tkuehn@moz-F4812C6E.hsd1.fl.comcast.net) (Quit: tikue_)
[21:28:23] *** Joins: tikue_ (tkuehn@moz-F4812C6E.hsd1.fl.comcast.net)
[21:28:32] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[21:29:54] <Edwards> Is there any sort of community convention for naming of modules in Rust?
[21:30:13] <Edwards> Like how Java packages generally go com.whatever.stuff
[21:30:47] <eholk> Edwards: not as far as I know
[21:32:59] *** Quits: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com) (Quit: Leaving.)
[21:33:06] *** Joins: jlong (jlong@5A41CB37.91E44075.E1156D21.IP)
[21:33:47] *** Quits: jackneill (jackneill@moz-ACBC5616.pool.digikabel.hu) (Ping timeout)
[21:34:14] <Edwards> Also, do directories have an effect on module names? I thought I remember reading somewhere that declarations will be in a module named after its relative path from /src or something?
[21:35:44] <eholk> yeah, rust looks for modules in either module_name.rs or module_name/mod.rs
[21:36:09] <Edwards> Ah, ok
[21:37:28] *** Quits: lenstr (lenstr@1F891AB5.9636F313.7A27613B.IP) (Client exited)
[21:37:48] *** Joins: lenstr (lenstr@1F891AB5.9636F313.7A27613B.IP)
[21:37:59] *** Quits: andreypopp (andreypopp@moz-7261DC60.net) (Quit: andreypopp)
[21:39:43] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[21:40:10] *** Joins: bkircher (bkircher@moz-1EB57231.adsl.alicedsl.de)
[21:41:18] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[21:44:02] *** Joins: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com)
[21:44:27] *** Quits: fyolnish_ (fyolnish@moz-7F3E5EAD.uqwimax.jp) (Connection reset by peer)
[21:44:45] *** Joins: fyolnish (fyolnish@moz-7F3E5EAD.uqwimax.jp)
[21:44:57] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[21:45:04] <JiXiY> where did extra::sort go btw?
[21:45:39] *** Joins: ptc (Adium@moz-70022D61.hsd1.ma.comcast.net)
[21:45:43] *** Quits: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com) (Ping timeout)
[21:46:31] <olsonjeffery> JiXiY: its .sort() on vec, now
[21:46:46] <olsonjeffery> impl TotalOrd and TotalEq for your T and it works for free
[21:47:07] <JiXiY> Yeah, just found the commit. Thanks!
[21:48:04] <olsonjeffery> or you can do sort_by() to the old, cb-based behavior
[21:48:10] <olsonjeffery> but i digress
[21:49:35] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[21:49:42] *** Quits: lenstr (lenstr@1F891AB5.9636F313.7A27613B.IP) (Client exited)
[21:50:08] *** Joins: nee (nee__@moz-1AFA0A33.netcologne.de)
[21:50:39] *** Quits: bananapeel (nee__@moz-F773DFE8.netcologne.de) (Ping timeout)
[21:50:44] *** Quits: JiXiY (YxJ@moz-4A80F86A.dip0.t-ipconnect.de) (Quit: leaving)
[21:50:46] <bkircher> Uhm, sorry if I ask a stupid question... but how do I return a vector from a function... Rust-idiomatic
[21:50:59] <bkircher> and how do I return a vector of strings
[21:51:47] *** Joins: Kxepal (Miranda@moz-ACDB79DE.pppoe.mtu-net.ru)
[21:52:00] <benh> it involves ~
[21:54:15] <bkircher> sure, an owned box... but when I do:
[21:54:16] *** Quits: snearch (snearch@moz-5FA23446.pool.mediaways.net) (Quit: Verlassend)
[21:54:37] <bkircher> fn weekdays() -> ~[Day] { ~[Monday, Tuesday, …] }
[21:54:56] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[21:55:15] <bkircher> for d in weekdays().iter() { println(day_name(*d)); }
[21:55:46] *** Quits: tikue_ (tkuehn@moz-F4812C6E.hsd1.fl.comcast.net) (Quit: tikue_)
[21:55:49] <bkircher> rustc says that the borrowed value does not live long enough
[21:55:50] <benh> That's probably just the "temporary goes away too early" thing? Try let ds = weekdays(); for d in ds.iter() { ... }?
[21:56:00] <olsonjeffery> bkircher: this is a borrow bug
[21:56:13] <olsonjeffery> do `let res = get_weekdays(); for i in res.iter() { ... }`
[21:56:22] <olsonjeffery> also, if you know the size of the vec
[21:56:32] <olsonjeffery> you can return [Foo, ...123] where Foo is the type, and 123 is the size
[21:57:59] <olsonjeffery> fn get_weekdays() -> [&'static str, ..7] { ["Monday", "Tuesday", ...] }
[21:58:40] *** Joins: hacker_sam (hacker_sam@moz-9FA495D5.dsl.bngr.epix.net)
[21:59:06] <olsonjeffery> er, yeah. no a borrow bug. what benh said.
[21:59:20] <benh> arguably still a bug :)
[21:59:55] <bkircher> Okay, when I store the temporary in a name than it works...
[21:59:59] <olsonjeffery> yeah, still a bug, just not a borrow issue. it's about stack-alloc'd values not living long enough because of fn return value chaining
[22:00:09] <olsonjeffery> mumble mumble
[22:00:35] *** Joins: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com)
[22:01:41] <bkircher> olsonjeffery: why should I explicitly state the size of the vector? Optimization
[22:01:53] <olsonjeffery> bkircher: ~[] is always a dynamic heap allocation
[22:02:10] <olsonjeffery> if you can make a vec with a static size, it'll be allocated up-front on the stack
[22:02:18] <benh> maybe just make a custom weekdayiterator ;)
[22:02:30] <olsonjeffery> not a big deal for toy/hello-world examples, but it adds up in a real application
[22:02:55] <olsonjeffery> a stack-allocated vec with a fixed size, i should say
[22:03:16] <olsonjeffery> but it's not always appropriate, and you still get stuck with ~[] in lots of places.
[22:03:37] <bkircher> olsonjeffery: okay stack allocation it is :) weekdayiterator: yeah, I looked into it... but I'am not there, yet... I'm still in the tutorial
[22:04:11] <rsaarelm> Looks like I'm almost done with the rust-git build now....
[22:04:19] *** Joins: kvanb (kvanb@moz-B19851B6.lnse7.lon.bigpond.net.au)
[22:04:49] <olsonjeffery> bkircher: that being said, ~[] is the only way to have a growable vector that you can .push()/.pop() to/from
[22:06:08] *** zz_kimundi is now known as kimundi
[22:06:23] <rsaarelm> darthdeus: So 1 h 28 minutes for my rust build, guess the SSD didn't help.
[22:07:02] <xitology> Hi! I'm looking how Vec is implemented in rust-core.  I don't understand how the destructor works: https://github.com/thestinger/rust-core/blob/master/core/vec.rs#L147
[22:07:23] <xitology> What's up with read_ptr?
[22:09:00] <SiegeLord> Looks like it copies the contents of the pointer onto the stack
[22:09:15] <xitology> Yep...
[22:09:16] <SiegeLord> And that then calls the destructor
[22:09:36] <xitology> Is it possible to invoke the destructor without copying?
[22:10:01] <xitology> What would be an idiomatic way to invoke a destructor on *T in unsafe code?
[22:11:06] *** Joins: andreypopp (andreypopp@moz-7261DC60.net)
[22:14:52] *** Quits: ptc (Adium@moz-70022D61.hsd1.ma.comcast.net) (Quit: Leaving.)
[22:16:04] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[22:18:10] *** Quits: ninechars (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP) (Quit: )
[22:18:28] <SiegeLord> I'm sure if strcat had to do that, then there is no other way to do it
[22:18:46] <SiegeLord> Not really seeing an issue for it
[22:19:39] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[22:20:22] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[22:20:40] <xitology> well, you need to copy the whole vector. is it really necessary?
[22:21:12] *** Quits: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com) (Quit: csherratt)
[22:21:24] *** Joins: pechorin (Mibbit@moz-28DD30CF.nationalcablenetworks.ru)
[22:21:27] <xitology> i guess the compiler is supposed to optimize it if the destructor is no-op
[22:21:40] <xitology> it's just look odd, that's all
[22:21:59] <SiegeLord> It might be optimized away by LLVM
[22:22:07] <SiegeLord> Obviously it's a workaround
[22:24:05] <xitology> Well, I was reading the tutorial where they define a single-linked list. Naturally, I wondered how one could define a double-linked list
[22:24:46] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[22:25:40] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:25:53] *** Joins: brson (brson@E88F5EC0.CA971BF7.BBC5804F.IP)
[22:25:54] *** ChanServ sets mode: +ao brson brson
[22:26:15] <xitology> So I guess my question is how you are supposed to deal with data structures where you can't use owned pointers.  For instance, when it's a DAG or a graph with cycles
[22:28:52] <xitology> Well, I guess Christmas Eve is not the best time to ask questions on IRC :)
[22:29:27] <tautologico> you could use indirection
[22:30:10] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Quit: WeeChat 0.4.2)
[22:30:24] <tautologico> you'd have a list of node, then the DAG refers to nodes by node ID (index into the node array perhaps) instead of using pointers
[22:30:55] *** Quits: bkircher (bkircher@moz-1EB57231.adsl.alicedsl.de) (Client exited)
[22:31:10] <xitology> right, it sounds reasonable
[22:31:12] <brson> xitology: can you use GC?
[22:31:19] <brson> i mean, if we had gc
[22:32:05] <tautologico> yeah, a Gc<Node> pointer
[22:32:22] *** Quits: nee (nee__@moz-1AFA0A33.netcologne.de) (Quit: Verlassend)
[22:32:24] <tautologico> refcounting would work if the graph was acyclical
[22:32:39] *** Joins: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com)
[22:32:47] <tautologico> I think the RC pointer already works
[22:33:14] *** Joins: bananapeel (banananana@moz-1AFA0A33.netcologne.de)
[22:34:34] <xitology> maybe. Let's take, for example, a widget tree..., or maybe a DOM tree?
[22:34:54] <xitology> where each node has a pointer to its parent
[22:35:08] *** Joins: threecreepio (Adium@moz-9DA6CBAC.bredband.comhem.se)
[22:35:36] <brson> if it has that kind of structure then you may be able to use something like strcat's strong/weak rc pointers to keep a tree of strong references with weak backreferences
[22:35:37] <xitology> so that one could navigate both from the parent widget to its children and back
[22:35:44] <brson> servo's dom is gc'd though by spidermonkey
[22:35:52] *** Quits: pechorin (Mibbit@moz-28DD30CF.nationalcablenetworks.ru) (Quit: http://www.mibbit.com ajax IRC Client)
[22:37:24] <xitology> brson: this one: https://github.com/thestinger/rust-core/blob/master/core/weak.rs ?
[22:38:21] <brson> xitology: yes
[22:38:34] <xitology> thank you
[22:39:52] <xitology> still don't understand this read_ptr() thing. Why couldn't I convert a *T pointer to a ~T pointer and let it be destroyed without copying T into stack?
[22:40:24] <xitology> oh, ~T deallocates
[22:40:40] <xitology> maybe that's why?
[22:40:49] *** Quits: StarLight (StarLight@moz-F33072.dynamic.avangarddsl.ru) (Ping timeout)
[22:41:09] *** kimundi is now known as zz_kimundi
[22:41:45] *** Quits: brson (brson@E88F5EC0.CA971BF7.BBC5804F.IP) (Quit: leaving)
[22:42:00] *** Joins: brson (brson@6A848D32.C1B840DD.76F66111.IP)
[22:42:00] *** ChanServ sets mode: +ao brson brson
[22:42:30] <benh> xitology: Yeah, if you let a fake ~T go out of scope it will do the ~-specific deallocation/destruction stuff
[22:42:54] <benh> that'll go disastrously wrong because whoever owns the T that you have a *T to will also do their own possibly different deallocation/destruction stuff
[22:45:09] *** Joins: StarLight (StarLight@moz-700742FF.dynamic.avangarddsl.ru)
[22:46:38] *** Quits: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com) (Quit: Leaving.)
[22:47:51] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[22:48:18] *** Joins: canhtak (canhtak@38266F07.7A8E554D.FC900DAF.IP)
[22:53:03] *** Joins: jviereck (Adium@moz-3ABAFDB5.dip0.t-ipconnect.de)
[22:55:02] *** Quits: sigma1 (sigma@moz-6E1846A2.range86-184.btcentralplus.com) (Ping timeout)
[22:56:31] <olsonjeffery> this has got to be one of the least helpful errors ever: rror: mismatched types: expected `world::EntityData<TPayload>` but found `world::EntityData<TPayload>` (expected type parameter but found type parameter)
[22:57:32] <olsonjeffery> ah. too much generics!
[22:59:00] <benh> same as https://github.com/mozilla/rust/issues/9914 ?
[22:59:55] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[23:01:22] *** Quits: hacker_sam (hacker_sam@moz-9FA495D5.dsl.bngr.epix.net) (Client exited)
[23:01:42] *** Joins: hacker_sam (hacker_sam@moz-9FA495D5.dsl.bngr.epix.net)
[23:01:48] *** Joins: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com)
[23:02:39] *** Joins: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru)
[23:04:54] *** Quits: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru) (Quit: Leaving.)
[23:04:59] *** Joins: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru)
[23:07:07] *** Quits: meTaAU (admin@moz-42953A1E.lns20.per1.internode.on.net) (Quit: leaving)
[23:07:52] <benh> rusti: fn foo() { foo(); } foo()
[23:07:55] -rusti- task '<unnamed>' has overflowed its stack
[23:07:55] -rusti- application terminated abnormally with signal 4 (Illegal instruction)
[23:08:53] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:09:12] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[23:10:20] <benh> that function seems to compile into a no-op with -O, instead of infinite recursion
[23:11:08] * benh is trying to figure out how to get rustc to demonstrate tail recursion
[23:12:06] <FreeFull> How about tail-recursive factorial?
[23:12:18] *** Joins: sigma1 (sigma@C91C7F36.70518F41.9D18269F.IP)
[23:12:25] *** Quits: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com) (Quit: Leaving.)
[23:12:40] *** Quits: brson (brson@6A848D32.C1B840DD.76F66111.IP) (Ping timeout)
[23:13:54] <benh> that seems to do it
[23:14:09] <benh> all my trivial examples either somehow got in the way of tail calls (landing pads?) or were optimized away :D
[23:15:21] *** zz_kimundi is now known as kimundi
[23:17:02] *** Quits: jviereck (Adium@moz-3ABAFDB5.dip0.t-ipconnect.de) (Quit: Leaving.)
[23:18:21] *** Quits: hacker_sam (hacker_sam@moz-9FA495D5.dsl.bngr.epix.net) (Ping timeout)
[23:19:59] *** Joins: csherratt (csherratt@809B0AE7.53510B49.971E19F6.IP)
[23:20:33] *** Quits: c-a (c-a@380CCB84.6116A87C.3B6D96BA.IP) (Ping timeout)
[23:20:47] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[23:21:57] *** Joins: dew1 (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[23:22:43] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[23:22:54] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[23:23:13] *** Quits: Krymise (Nietzsche@1C166AC3.81BFCEFF.52A100C7.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:24:33] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[23:30:16] *** Quits: threecreepio (Adium@moz-9DA6CBAC.bredband.comhem.se) (Quit: Leaving.)
[23:30:20] *** Joins: awidegreen (awidegreen@moz-D3B54680.dip0.t-ipconnect.de)
[23:31:20] *** Quits: sigma1 (sigma@C91C7F36.70518F41.9D18269F.IP) (Ping timeout)
[23:35:08] *** Quits: awidegreen (awidegreen@moz-D3B54680.dip0.t-ipconnect.de) (Ping timeout)
[23:35:46] <FreeFull> benh: There is also fibonacci
[23:38:19] <benh> It's ok, I'm twenty minutes deep in observing that my stack isn't overflowing, only my factorial accumulator is <:D
[23:38:37] *** Joins: awidegreen (awidegreen@moz-3FE0A1F.a357.priv.bahnhof.se)
[23:39:25] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Ping timeout)
[23:39:29] *** Quits: victorporof (victorporo@AFD25FB8.16D3B2F1.79933D60.IP) (Quit: victorporof)
[23:40:19] *** Quits: gwty (gwtypc@F896BC4F.A75EAEA5.D66E6624.IP) (Ping timeout)
[23:41:12] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[23:43:04] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Ping timeout)
[23:43:51] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Input/output error)
[23:44:04] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[23:44:50] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[23:45:30] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[23:46:46] <tautologico> how can I use trait objects now that @ pointers are gated?
[23:48:06] <FreeFull> benh: Factorial does grow pretty quickly =P
[23:48:22] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[23:48:28] <FreeFull> Could do sum from 1 to n instead
[23:48:49] <FreeFull> That only grows at a quadratic rate
[23:49:02] <speckle> benh, are you using native numbers or did you implement a BigInteger of some sort? :)
[23:49:48] <cmr> tautologico: @ was only one of three kinds of trait objects.
[23:49:52] <cmr> ~Trait and &Trait both exist
[23:50:18] <cmr> historically ~Trait and &Trait have been really broken but they work fine now
[23:50:20] <tautologico> cmr: thanks, for some reason I thought trait objects needed @
[23:51:22] <FreeFull> speckle: I wouldn't expect BigInteger to overflow =P
[23:51:37] <FreeFull> At least, not before you run out of RAM
[23:52:09] <speckle> speaking of RAM, Rust seems like a great language for implementing a prime sieve in
[23:52:51] <speckle> GCs don't seem to deal that well when you want to max out your ram usage - they don't free memory as fast as you need it
[23:52:52] <FreeFull> Try implementing a circular prime sieve
[23:53:20] <speckle> link? google turns up all kinds of things
[23:53:52] <benh> speckle: I'm just using u64s because I'm not really interested in the result, just that it doesn't overflow the stack
[23:53:57] <FreeFull> Ok, I think I got the name wrong
[23:55:24] <FreeFull> I meant a wheel sieve
[23:58:06] <speckle> neat, thanks!
[23:58:44] <speckle> I wonder if there's a way to allocate as much memory as possible without causing your application to swap
[23:58:50] <speckle> I am guessing it's OS-specific
[23:59:05] <cmr> Also depends on the configuration
[23:59:18] <cmr> Overcommit etc
[23:59:33] <cmr> Usually, just doing an allocation doesn't cause swap usage, actually using it does.
