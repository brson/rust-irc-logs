[00:01:07] <tikue> mein_asdf: in python it simply tells it to print out exactly what's typed right
[00:01:13] <mein_asdf> Yeah
[00:01:24] <mein_asdf> So you don't have to escape " or \, etc.
[00:01:25] <tikue> i don't think rust has that but could be mistaken
[00:01:36] *** Joins: maik (maik___@moz-9B1CE5EB.dip0.t-ipconnect.de)
[00:01:42] <SiegeLord> Rust's strings can span multiple lines, but that's about it irrc
[00:01:57] *** Joins: aatch (aatch@moz-B437F499.pocketrent.com)
[00:02:04] <bjz> zeuxcg: ping
[00:02:06] <mein_asdf> Alright.  I'll pre-format them for the time being then.
[00:02:06] <dbaupp> mein_asdf: iirc there's a bug open about it, even. :)
[00:02:33] *** Quits: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com) (Ping timeout)
[00:02:36] <mein_asdf> dbaupp: Didn't see it on github.  Though I was up against their search rate limit thing.
[00:02:42] <mein_asdf> So I probably missed it
[00:03:59] <dbaupp> mein_asdf: oh, maybe
[00:04:11] <dbaupp> maybe you could open one
[00:04:34] <jmgrosen> so what do I annotate with #[fixed_stack_segment] to call C funds?
[00:04:36] <jmgrosen> *funcs
[00:04:44] *** Quits: MauricioC (mauricioc@moz-2CFCD404.impa.br) (Ping timeout)
[00:05:07] <Eridius> the caller
[00:05:30] <Eridius> if you use the externfn!() macro to declare the FFI functions, that creates the #[fixed_stack_segment] wrapper function for you
[00:05:38] <Eridius> it also adds #[inline(never)], which you should do
[00:06:00] <sp3d> hm, I'd never even heard of externfn!()
[00:06:34] <Eridius> it's in the FFI tutorial now
[00:06:43] <sp3d> ah, cool
[00:07:13] *** Joins: MauricioC (mauricioc@moz-2CFCD404.impa.br)
[00:08:35] <dbaupp> it was added last week with nmatsakis extern fn super-patch.
[00:08:41] <dbaupp> *nmatsakis'
[00:08:59] <Eridius> r? https://github.com/mozilla/rust/pull/8750
[00:10:03] <dbaupp> Eridius: is there a ~[u8] -> ~str version that could be converted too? (it could be Result<~str, ~[u8]> so the bytes aren't lost?)
[00:10:16] *** Quits: tikue (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue)
[00:10:17] <Eridius> dbaupp: there is but it uses the not_utf8 condition
[00:10:26] <Eridius> as does the &[u8] -> ~str function
[00:10:26] <dbaupp> Eridius: ah; can this one use that?
[00:10:54] *** Quits: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP) (Client exited)
[00:10:58] <Eridius> dbaupp: no, a condition is a bit heavy for what's supposed to be a zero-allocation fast conversion.
[00:13:18] *** Quits: eevee (eevee@moz-9A8E1439.evrt.wa.frontiernet.net) (Connection reset by peer)
[00:13:29] *** Joins: eevee (eevee@moz-9A8E1439.evrt.wa.frontiernet.net)
[00:15:59] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:16:31] <Eridius> dbaupp: heh, I pushed a bit too fast. Screwed up the type signature of the new function. Ah well, I'm writing tests anyway
[00:17:39] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[00:18:45] <Eridius> ok, now it has tests and compiles correctly. r? #8750https://github.com/mozilla/rust/pull/8750
[00:18:51] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[00:19:10] *** Quits: RMF (RMF@moz-3ADFD14C.dsl.telepac.pt) (Quit: Textual IRC Client: www.textualapp.com)
[00:19:27] *** Joins: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP)
[00:19:58] *** Joins: RMF (RMF@moz-3ADFD14C.dsl.telepac.pt)
[00:20:17] <zeuxcg> bjz: pong
[00:21:00] <jmgrosen> bjz: is https://github.com/bjz/lmath-rs/issues/14 still relevant? and if not, when will lmath-rs be updated to latest rust?
[00:21:01] *** Quits: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se) (Ping timeout)
[00:23:29] <bjz> jmgrosen: oh, that is quite old
[00:23:57] <Eridius> rusti: bytes!("..")
[00:23:59] -rusti- &[46, 46]
[00:24:48] <sam113101> rusti: bytes!("â€¦")
[00:24:49] -rusti- &[226, 128, 166]
[00:25:03] <myname> interesting
[00:25:19] <bjz> jmgrosen: https://gist.github.com/bjz/70bd9d494a660c96b329
[00:25:34] <bjz> jmgrosen: that is something I have been playing around with
[00:26:46] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[00:29:52] <bjz> zeuxcg: ^
[00:30:38] <bjz> zeuxcg: been kinda inspired by sebcrozet's lib
[00:31:40] <bjz> zeuxcg: to let you know, he actually has something working with the current master: https://github.com/sebcrozet/nalgebra
[00:32:48] * bjz wonders if he should give up and just use seb's lib
[00:36:04] <SiegeLord> Can you do: trait Foo<Self: Bar> ?
[00:39:13] *** Joins: SingingBoyo (brandon@4DF3381A.51F4D838.4F048BDC.IP)
[00:41:15] <bjz> SiegeLord: 70bd9d494a660c96b329
[00:41:22] <bjz> oops
[00:41:24] <bjz> https://gist.github.com/bjz/70bd9d494a660c96b329#file-lmath_test-rs-L401
[00:41:50] *** Joins: mythmon (mythmon@moz-AD308AD7.members.linode.com)
[00:42:01] <mythmon> I feel a little odd asking, but how can I do exponents?
[00:42:24] <mythmon> like, 2 to the power of 8 is 256.
[00:42:29] <bjz> eh
[00:42:47] <bjz> have'nt done exponents for ints yet :/
[00:42:52] <bjz> only floats
[00:42:57] <bjz> -_-
[00:43:20] <SiegeLord> Oh sweet... you can do impl A for B;
[00:43:38] <mythmon> I saw this: http://static.rust-lang.org/doc/0.7/std/int.html#function-pow
[00:43:52] <mythmon> but I can't figure out how to actually use that.
[00:44:23] <bjz> SiegeLord: the horrible thing about that though is that once you do that you can't impl that trait for any other type, bcause it will conflict
[00:44:28] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[00:44:47] <SiegeLord> bjz: What's "that"?
[00:44:58] <bjz> oh
[00:45:00] <bjz> wait
[00:45:03] <bjz> sorry
[00:45:12] <bjz> mis0understood
[00:45:22] <bjz> dw
[00:45:45] <SiegeLord> rusti: use std::int; 1.pow(&2)
[00:45:46] -rusti- <anon>:5:23: 6:5 error: type `<VI0>` does not implement any method in scope named `pow`
[00:45:46] -rusti- <anon>:5          use std::int; 1.pow(&2)
[00:45:46] -rusti- <anon>:6     };
[00:45:46] -rusti- error: aborting due to previous error
[00:45:47] -rusti- application terminated with error code 101
[00:45:47] <bjz> for some reason I read you thing as: impl<B> A for B
[00:45:55] <SiegeLord> rusti: use std::int; 1.pow(2)
[00:45:56] -rusti- <anon>:5:23: 6:5 error: type `<VI0>` does not implement any method in scope named `pow`
[00:45:56] -rusti- <anon>:5          use std::int; 1.pow(2)
[00:45:56] -rusti- <anon>:6     };
[00:45:56] -rusti- error: aborting due to previous error
[00:45:56] -rusti- application terminated with error code 101
[00:46:27] <bjz> rusti: std::int::pow(3, 4)
[00:46:28] -rusti- 81
[00:46:34] <SiegeLord> rusti: use std::float; 1.0.pow(&2.0)
[00:46:37] -rusti- pastebinned 14 lines of output: http://ix.io/7zm
[00:46:54] <bjz> rusti: 1f.pow(&2.0)
[00:46:56] -rusti- 1
[00:46:59] <SiegeLord> Why is the int's pow a free function?
[00:47:12] <bjz> SiegeLord: it hasn't been traitified yet
[00:47:25] <bjz> SiegeLord: https://github.com/mozilla/rust/issues/4819
[00:47:31] <bjz> SiegeLord: complian there
[00:47:36] <bjz> *complain
[00:47:45] <bjz> SiegeLord: please do, I'm serious
[00:48:00] <bjz> SiegeLord: it was one of the things we missed
[00:48:09] <bjz> well, haven't got around to yet
[00:48:52] <bjz> and there are numerous
[00:49:42] *** Quits: heftig (heftig@moz-305746DD.dip0.t-ipconnect.de) (Ping timeout)
[00:51:06] *** Joins: recrack (ymin@5AB4884B.FCC4549.14D5B978.IP)
[00:51:59] *** Quits: lkuper (lkuper@moz-4227E445.hfc.comcastbusiness.net) (Quit: lkuper)
[00:53:58] <SiegeLord> Hmm... alternatively maybe int's pow shouldn't even exist :P
[00:55:37] <SingingBoyo> is there a function I can call to get the line-ending for whatever platform I'm on?  Or should I just use #[cfg(target_os="<os>")] and a constant?
[00:56:17] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[00:56:17] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/7sABHQ
[00:56:17] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[00:56:17] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[00:56:17] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/E1DlyQ
[00:56:18] <ghrust> 13rust/06auto 1450369bb 15Alex Crichton: Rewrite pass management with LLVM...
[00:56:18] <ghrust> 13rust/06auto 14883ebcc 15bors: auto merge of #8700 : alexcrichton/rust/better-llvm, r=thestinger...
[00:56:18] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[00:56:25] *** Quits: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com) (Ping timeout)
[00:56:25] *** Joins: dew1 (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com)
[00:56:27] <maik> bjz, are you currently working on lmath? Because I wanted to try to fix it again, but I don't want to step on your toes. 
[00:56:39] <bjz> maik: you can try to fix it again
[00:56:46] <bjz> maik: that would be great
[00:56:56] <bjz> maik: I'd really like to start using it again
[00:56:58] *** Joins: heftig (heftig@moz-23C21D3E.dip0.t-ipconnect.de)
[00:57:25] <maik> bjz, okay
[00:57:36] <bjz> maik: would be super nice if you could :)
[00:58:18] *** Joins: hjr3 (hradtke@moz-4D761D44.lsanca.dsl-w.verizon.net)
[00:58:25] <bjz> maik: any opinions of the gist I posted above? in the short term I think we should probably focus on getting lmath as it stands working
[00:58:35] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[00:58:43] <bjz> jmgrosen: o/
[00:59:11] *** Joins: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com)
[00:59:11] <jmgrosen> bjz: hey, sorry i had to go for a while there
[00:59:17] <bjz> jmgrosen: np
[00:59:40] <bjz> jmgrosen: maik says he is going to work on updating lmath to the current version
[00:59:58] <jmgrosen> bjz: oh, great; sounds awesome
[01:00:13] <bjz> jmgrosen: the trouble is I've been juggling a few things and I need folks to help keep things up to date :P
[01:00:23] <maik> :D
[01:00:28] *** Joins: jeff (jeff@563E18C1.6B387A20.C70C5AE6.IP)
[01:00:28] <jmgrosen> bjz: besides updating, what features are you planning on adding?
[01:00:48] <bjz> jmgrosen: well I plan to move the collision stuff out
[01:00:56] <bjz> jmgrosen: into a separate lib
[01:01:37] <jmgrosen> bjz: seems logical
[01:01:46] <bjz> jmgrosen: I think the focus should definitely remain on computer graphics. maybe a smaller scope than glm
[01:02:08] <bjz> jmgrosen: for example glm includes noise gen - I have that in a separate lib
[01:02:21] <bjz> jmgrosen: https://github.com/bjz/noise-rs
[01:03:00] <bjz> jmgrosen: can't remember if glm includes color stuff, but I have that in a separate lib too: https://github.com/bjz/color-rs
[01:03:07] <bjz> might need to be updated
[01:03:25] <jmgrosen> bjz: i'll look at those two; they sound interesting
[01:03:51] <bjz> jmgrosen: I welcome PRs
[01:04:38] <bjz> jmgrosen: there are many gaping holes in those last two libs
[01:05:11] <bjz> *so much to do*
[01:05:33] <jmgrosen> bjz: i'm afraid i don't know much about the topics :/ but i can work on updating them
[01:08:46] <bjz> jmgrosen: I've had to do a great deal of experimentation to lean how to use Rust's features nicely
[01:08:52] <bjz> still lots to learn
[01:09:42] <bjz> jmgrosen: the goal is to have slick, simple, ideomatic apis
[01:09:55] <bjz> but that kinda goes without saying
[01:10:18] <jmgrosen> bjz: I can't promise anything, but I can try :3
[01:10:54] <bjz> there are difficulties which stem from lacking associated items, and impl specialisation (which I've talked to nmatsakis about before, and he is aware of)
[01:12:20] *** Quits: jeff (jeff@563E18C1.6B387A20.C70C5AE6.IP) (Quit: jeff)
[01:12:23] <zeuxcg> I'll be happy to help once I get something more than a triangle being rendered
[01:12:35] <bjz> zeuxcg: ^_^
[01:12:53] <zeuxcg> I've written more than 5 math libraries before, I'd rather not write another one from scratch
[01:13:05] <bjz> zeuxcg: what did you think of that gist compared to the current lmath?
[01:13:55] <bjz> zeuxcg: also, lmath vs nalgebra?
[01:15:01] <bjz> zeuxcg: I'm open to dicussions about design
[01:15:06] <bjz> *descussions
[01:15:13] <bjz> :S
[01:15:36] * bjz 's spelling is atrociois
[01:15:51] <SiegeLord> I'm glad somebody's doing an N-dimensional linear algebra library
[01:16:24] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[01:16:49] <bjz> yeah the goal of lmath is not to be for scintific nD math
[01:16:58] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[01:16:59] <bjz> probably poorly named
[01:17:28] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Ping timeout)
[01:17:41] <SiegeLord> >_< LLVM errored out while compiling
[01:17:42] <bjz> zeuxcg: unfortunately you run into the issue that you can't parameterise over constants
[01:17:53] <SiegeLord> That's a bummer, I probably need to clean LLVM and start over :/
[01:18:04] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[01:18:32] <bjz> zeuxcg: https://mail.mozilla.org/pipermail/rust-dev/2013-August/005326.html
[01:18:35] <zeuxcg> nalgebra has way more traits than lmath if I read this right, not sure if this is useful
[01:19:16] <bjz> zeuxcg: indeed
[01:19:27] <zeuxcg> generally lmath sources are way easier to read for me :)
[01:19:29] <bjz> zeuxcg: seb has been working hard on it
[01:19:33] <zeuxcg> did not try using it or nalgebra though
[01:19:52] <bjz> zeuxcg: yeah, that's what I'm afraid of with going with nalg
[01:20:10] <bjz> zeuxcg: I have considered it - being afraid of being too NIH
[01:20:12] *** Quits: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com) (Ping timeout)
[01:20:29] <bjz> zeuxcg: did you see the gist?
[01:20:45] <bjz> https://gist.github.com/bjz/70bd9d494a660c96b329
[01:21:22] *** Joins: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com)
[01:21:44] *** Quits: mein_asdf (mein_asdf@1ADC2370.4B9E65B8.B79EA657.IP) (Quit:  HydraIRC -> http://www.hydrairc.com <- The professional IRC Client :D)
[01:22:24] <bjz> zeuxcg: nalg looks like something super useful, but tailored to seb's specific way of working - I'd like something more accessible - not to dumb it down though
[01:23:29] <bjz> zeuxcg: accessible in terms of being easier to scan, and to contribute to
[01:24:47] <bjz> zeuxcg: I think it might be useful to have a nice algebric foundation.
[01:25:17] *** Quits: garthk (garth@moz-B118B14A.static.internode.on.net) (Quit: garthk)
[01:25:29] <bjz> zeuxcg: but then that might make it less accessable
[01:25:34] <jmgrosen> bjz: https://github.com/bjz/color-rs/pull/3
[01:25:42] <bjz> zeuxcg: what is your opinion?
[01:25:58] <bjz> jmgrosen: oh!
[01:26:06] <bjz> jmgrosen: you're the cat guy!
[01:26:24] <jmgrosen> bjz: that's one way of describing me, i suppose :P
[01:27:04] <bjz> jmgrosen: oh I've seen your avatar+name before around rust
[01:27:04] <maik> oh boy
[01:27:20] <bjz> jmgrosen: but only connected the two now
[01:27:25] <bjz> maik: ?
[01:27:48] <maik> bjz, that's going to be 'some' work :D
[01:27:58] <bjz> maik: which?
[01:28:22] <maik> bjz, fixing lmath
[01:28:28] <bjz> maik: really?
[01:28:41] <bjz> maik: should I have a look? :(
[01:29:09] <bjz> maik: in terms of fixing what we have right now?
[01:29:10] <maik> bjz, no I am fine but I can't do it all today
[01:29:16] <bjz> ok
[01:29:32] <bjz> let me know if you want me to look at it
[01:29:39] <maik> I will thanks
[01:29:59] <bjz> feel free to open a PR and we can do it incrementally
[01:30:13] <bjz> after all, it's already broken :P
[01:30:31] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[01:30:33] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[01:30:35] <SiegeLord> Is there a thing to support binary flags yet?
[01:30:36] <cmr> sp3d: thanks
[01:30:39] <SiegeLord> *bitflags
[01:30:42] <cmr> (for the typo notice)
[01:30:45] <cmr> SiegeLord: extra::enumset iirc
[01:30:48] <cmr> moved out of librustc.
[01:31:08] <bjz> zeuxcg: I guess "generally lmath sources are way easier to read for me" is encouraging to hear
[01:31:20] <bjz> zeuxcg: means I'm not wasting my time :)
[01:31:55] <Eridius> I updated my PR to add _opt variants to from_bytes and from_bytes_owned as well. r? https://github.com/mozilla/rust/pull/8750
[01:32:06] *** Joins: jeff (jeff@563E18C1.6B387A20.C70C5AE6.IP)
[01:33:02] <bjz> SiegeLord: here's an example of interfacing with a C lib: https://github.com/bjz/glfw-rs/blob/master/examples/callbacks.rs#L292
[01:33:37] <bjz> SiegeLord: I might need to wrap that up though in a type
[01:33:52] <SiegeLord> I'm looking for a nice way to represent a flag in the Rust code and then send it to C
[01:34:03] <maik> we have no uint range anymore?
[01:34:12] <bjz> maik: just range
[01:34:13] <SiegeLord> I guess I'll need the other one too though... looking at enum_set atm
[01:34:53] <bjz> rusti: fn i in range(0, 3) { printf!("%?", i) }
[01:34:55] -rusti- <anon>:5:14: 5:16 error: expected `(` but found `in`
[01:34:56] -rusti- <anon>:5          fn i in range(0, 3) { printf!("%?", i) }
[01:34:56] -rusti-                        ^~
[01:34:56] -rusti- application terminated with error code 101
[01:34:58] <SiegeLord> Not really liking it's API though
[01:35:05] <bjz> rusti: for i in range(0, 3) { printf!("%?", i) }
[01:35:07] -rusti- 012()
[01:35:08] <Eridius> rusti: for i in range(0u, 3) { printf!(i) }
[01:35:09] -rusti- 012()
[01:35:14] <bjz> rusti: for i in range::<uint>(0, 3) { printf!("%?", i) }
[01:35:15] -rusti- 012()
[01:35:19] <SiegeLord> But I figured I wouldn't, as it's in libextra
[01:36:17] <cmr> It was grown, not designed, so it's entirely possible that it needs tons of work
[01:37:15] *** Quits: bytewise (bytewise@moz-4A801D04.unitymediagroup.de) (Quit: Leaving)
[01:37:39] *** Quits: dew1 (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com) (Ping timeout)
[01:37:40] <bjz> SiegeLord: you could wrap them in a newtype struct and impl BitOr on them
[01:37:45] *** Joins: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net)
[01:37:58] *** Quits: fread2281 (zcarterc@moz-CB181B42.dia.static.qwest.net) (Connection reset by peer)
[01:38:04] <SiegeLord> That's more along the lines of what I'm thinking right now
[01:38:47] <bjz> static A: T = T(...); ... Something::new(A | B | C)
[01:39:00] <bjz> SiegeLord: ^
[01:39:20] <zeuxcg> bjz: my general opinion -- without looking at how exactly nalgebra is structured -- is that accessibility beats algebraic foundation hands down :-D
[01:39:37] <bjz> zeuxcg: so my gist is too inaccessible?
[01:40:05] <zeuxcg> I'm not sure if sometimes having algebraic traits could be useful - the question is, whether there is code that can be generic over that trait
[01:40:23] <bjz> zeuxcg: I guess algebraic foundations would be more useful in a generic sci lib
[01:40:40] <zeuxcg> and I'm not exactly sure, all C++ libraries that tried to have generic algebraic foundation (like CGAL) are pretty hard to use and read.
[01:40:45] <bjz> zeuxcg: where as for CG it might be better to do it "Dumber"
[01:40:52] <zeuxcg> bjz: yeah
[01:40:57] <cmr> My dream flag library would be able to express constraints on flag combinations, such as mutual exclusion and implication (if this bit is set, so is this one), and statically verify those constraints.
[01:41:02] <bjz> zeuxcg: rust's traits make things easier though
[01:41:09] <cmr> But I'm pretty sure that needs dependant typing and would not be in rust
[01:41:24] <SiegeLord> Damn, my rustc segfaults >_<
[01:41:27] <zeuxcg> bjz: keep in mind that I got to know rust a few days ago :)
[01:41:31] *** Quits: threecreepio (jdp@moz-71E164C9.cust.bredbandsbolaget.se) (Quit: threecreepio)
[01:41:33] <bjz> zeuxcg: think of it like Rust starting with concepts
[01:41:37] <zeuxcg> SiegeLord: I think it's a problem with recent pushes
[01:41:45] <zeuxcg> I had to sync back two days ago
[01:41:51] <zeuxcg> for it to work again.
[01:42:14] <SiegeLord> How did this get past testing ._.
[01:42:32] <bjz> zeuxcg: traits (ie. typeclasses) lend themselves better to things like algebraic properties than templates
[01:42:47] <bjz> zeuxcg: also less debug insanity
[01:42:48] <zeuxcg> SiegeLord: so current trunk does not work for me, this rev https://github.com/mozilla/rust/commit/bbe347cee79df9cb68ee490ba957e515e3da70a1 does work
[01:43:07] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[01:43:13] <zeuxcg> bjz: yeah, I understand the theory, but don't understand the practical implications yet
[01:43:20] <bjz> zeuxcg: what is your background? done any haskell before? or just C++?
[01:43:33] <bjz> zeuxcg: ie. algol style/templates
[01:43:52] <zeuxcg> C++ and F# mostly, I can read Haskell... slowly...
[01:44:38] <bjz> yeah, all you need to know is we basically have type classes. a form of lightweight, ad-hoc polymorphism.
[01:45:05] <jmgrosen> bjz: can you explain the .clone() here? https://github.com/bjz/noise-rs/blob/master/src/perlin.rs#L35 I don't understand why it's there
[01:45:52] <bjz> jmgrosen: I have a modified version that gets rig of it
[01:46:00] <zeuxcg> bjz: the gist is sort of readable
[01:46:08] <zeuxcg> are all these maps expanded at compile time?
[01:46:13] <zeuxcg>     #[inline] fn add_s(&self, s: S) -> Self { self.map(|x| x.add(&s)) }
[01:46:27] <zeuxcg> these ^^^
[01:46:43] <bjz> zeuxcg: yeah, llvm should inline them
[01:46:54] <bjz> zeuxcg: and inlining is cross-crate
[01:47:11] <bjz> jmgrosen: besically it's trying to move out of the tuple into the method
[01:47:32] <bjz> jmgrosen: so you have to explicitly copy it
[01:47:33] <zeuxcg> I don't just mean inlining add_s, I also mean inlining map + closure and unrolling the loop
[01:47:45] <bjz> zeuxcg: yes, that's what I mean
[01:47:49] <zeuxcg> ok, cool
[01:47:57] <bjz> zeuxcg: llvm should inline the closure
[01:48:01] <maik> Okay I will go to sleep now, bjz I already started a PR *wip* so you can see my progress
[01:48:05] <cmr> *should*, not always
[01:48:12] <cmr> we don't generate ideal ir yet
[01:48:16] <bjz> zeuxcg: haven't looked at the code gen though
[01:48:26] <bjz> yeah, closures still need work
[01:48:41] <jmgrosen> bjz: so should it be just "x" or "&x.close()"?
[01:49:02] <bjz> jmgrosen: we could modify it so gen thakes a ref
[01:49:17] <bjz> oh wait
[01:49:22] <bjz> it already does :/
[01:49:23] *** Quits: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com) (Ping timeout)
[01:49:29] <jmgrosen> yeah :3
[01:50:02] *** Joins: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com)
[01:50:18] <bjz> jmgrosen: I'll show you my refactor
[01:50:31] *** Quits: maik (maik___@moz-9B1CE5EB.dip0.t-ipconnect.de) (Ping timeout)
[01:51:15] <bjz> jmgrosen: https://gist.github.com/bjz/1ee07fcc8333c8d3ff84
[01:51:51] <bjz> jmgrosen: rust's explicit clonine can sometimes be a pain, but it's good that it lets you know rather than sweeping it under the carpet
[01:52:27] <bjz> jmgrosen: if it were a concrete primitive type you wouldn't have to be explicit
[01:52:38] <bjz> jmgrosen: like an int or something
[01:52:57] <bjz> jmgrosen: it's because I'm using a generic T
[01:53:21] <jmgrosen> bjz: yeah, i had to deal with that when writing my own math stuff
[01:53:39] <jmgrosen> bjz: so you basically made gen* take T instead of &T?
[01:53:46] <bjz> zeuxcg: the macros should be more readable in the future, I had to split them up when because of limitations - they can't expand into multiple items
[01:53:55] <bjz> jmgrosen: it appears so :P
[01:54:02] *** Joins: eatkinson (eatkinson@moz-6C08E02F.dsl.bell.ca)
[01:54:08] *** Quits: momiga (Meta@moz-FE9D5AEE.bflony.fios.verizon.net) (Ping timeout)
[01:54:37] <bjz> zeuxcg: macros can be a pain atm, they need some TLC
[01:55:10] *** Joins: momiga (Meta@moz-FE9D5AEE.bflony.fios.verizon.net)
[01:55:15] <bjz> zeuxcg: but I'm sure they will be fixed by 1.0
[01:55:52] <cmr> TLC? Tender Love and Care?
[01:56:00] <bjz> cmr: aye :3
[01:56:02] <cmr> heh
[01:56:05] <bjz> zeuxcg: I impled directly onto the struct types because I want the nice Vec3::from_value(...) syntax
[01:56:07] <cmr> nice guess on my part
[01:56:48] <bjz> zeuxcg: currently if it's in a trait you need to do something like FromValue::from_value(...)
[01:57:00] <Eridius> rusti: "foo\x00bar"
[01:57:04] -rusti- "foo\x00bar"
[01:57:14] <Eridius> rusti: "foo\x00bar".find(0 as char)
[01:57:16] -rusti- Some(3)
[01:57:31] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[01:58:34] *** Joins: ChrisMorgan (chris@moz-F50F5A61.its.monash.edu.au)
[01:58:37] <bjz> zeuxcg: ie. Trait::function(..) not T::function(..). I would prefer the latter, but it does cause some complications in complex situations, and there are some fols who are in staunch opposition to it
[01:58:41] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[01:59:05] <bjz> zeuxcg: just to let you know why I have done certain things
[02:01:59] <jmgrosen> rusti: externfn!(fn strlen(s: *u8) -> uint); unsafe { "foo\x00bar".as_c_str(|s| strlen(s)) }
[02:02:01] -rusti- <anon>:5:56: 5:94 error: type `&'static str` does not implement any method in scope named `as_c_str`
[02:02:01] -rusti- <anon>:5          externfn!(fn strlen(s: *u8) -> uint); unsafe { "foo\x00bar".as_c_str(|s| strlen(s)) }
[02:02:01] -rusti-                                                                  ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[02:02:01] -rusti- error: aborting due to previous error
[02:02:03] -rusti- application terminated with error code 101
[02:04:04] <SingingBoyo> oh wonderful, I've managed to make rustc segfault every time I run it...
[02:04:11] <bjz> jmgrosen: with_c_str
[02:04:18] <jmgrosen> bjz: ah, thanks
[02:04:30] <jmgrosen> rusti: externfn!(fn strlen(s: *u8) -> uint); unsafe { "foo\x00bar".with_c_str(|s| strlen(s)) }
[02:04:31] -rusti- <anon>:5:91: 5:92 error: mismatched types: expected `*u8` but found `*i8` (expected u8 but found i8)
[02:04:31] -rusti- <anon>:5          externfn!(fn strlen(s: *u8) -> uint); unsafe { "foo\x00bar".with_c_str(|s| strlen(s)) }
[02:04:32] -rusti-                                                                                                     ^
[02:04:33] -rusti- error: aborting due to previous error
[02:04:35] -rusti- application terminated with error code 101
[02:04:36] <bjz> jmgrosen: bear in mind it does a hidden allocation
[02:04:42] <mythmon> Can someone explain to me what I did wrong here? https://gist.github.com/mythmon/6337540
[02:04:50] <ChrisMorgan> rusti: match Some(~4) { Some(p) if true => p, _ => fail!() }
[02:04:51] <bjz> jmgrosen: which dbaupp doesn't like
[02:04:51] -rusti- <anon>:5:31: 5:32 error: cannot bind by-move into a pattern guard
[02:04:51] -rusti- <anon>:5          match Some(~4) { Some(p) if true => p, _ => fail!() }
[02:04:51] -rusti-                                         ^
[02:04:52] -rusti- error: aborting due to previous error
[02:04:54] -rusti- application terminated with error code 101
[02:04:54] <ChrisMorgan> Why exactly is this?
[02:05:19] <ChrisMorgan> I mean, I'm not using p in the pattern guard, so is it valid for it to complain?
[02:05:33] <cmr> It seems to be a bit of a dumb heuristic
[02:05:35] <ChrisMorgan> Then too, could it not just move p twice if absolutely necessary?
[02:05:50] <bjz> jmgrosen: the full version is .to_c_str().with_ref
[02:05:59] <bjz> jmgrosen: I think
[02:06:43] <bjz> jmgrosen: it needs to allocate a new CStr, because rust's strings are (ptr, len), not null terminated
[02:07:17] <jmgrosen> yeah, i was curious about that
[02:07:45] <bjz> jmgrosen: the reason is that null terminated strs don't play nice with slices
[02:08:06] <bjz> one of the legacies of C
[02:08:07] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Client exited)
[02:08:18] <Eridius> bjz: btw .with_c_str() is a shorthand for your .to_c_str().with_ref()
[02:08:28] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[02:08:36] <bjz> Eridius: yes, I mentioned it further up
[02:08:48] <Eridius> ah
[02:08:52] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Connection reset by peer)
[02:08:58] * Eridius didn't read far back enough
[02:09:07] <bjz> Eridius: it hides an allocation though, which is why I'm a little wary of it
[02:09:09] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[02:09:39] *** Quits: jeff (jeff@563E18C1.6B387A20.C70C5AE6.IP) (Quit: jeff)
[02:09:48] <bjz> should be `. with_to_c_str`
[02:09:54] * bjz semi jokes
[02:09:58] <Eridius> hah
[02:11:01] <bjz> Eridius: 'with_' implies not allocating, as with `as_`
[02:11:07] <strcat> bjz: well and \0 is valid inside utf-8 anyway
[02:11:32] <strcat> proper C libs use ptr + len for anything but paths ;p
[02:11:36] <Eridius> bjz: does it? There's precedent for .with allocating
[02:11:55] <Eridius> specifically, I know std::path uses .with_foo to allocate
[02:11:56] <bjz> Eridius: linguisticly it seems to
[02:12:08] <Eridius> although in that case it's returning a new value, rather than providing a value to a closure
[02:12:39] <bjz> Eridius: we probably need to nail down these terms in the styl guide
[02:12:44] <bjz> *style guide
[02:12:50] <Eridius> probably a good idea
[02:13:07] <Eridius> .as_ means non-allocating, .to_ means allocating, .into_ means consuming and transforming (whether that requires an allocation or just a cast depends on the use)
[02:13:34] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[02:13:39] <bjz> I don't know a good prefix for .with_to
[02:13:49] <Eridius> there's precedent for .as_ providing data to a closure (e.g. .as_imm_buf()), so I'm ok with .with_ being an allocator that somehow mutates the receiver (as opposed to transforming it to another type)
[02:13:54] *** Quits: hjr3 (hradtke@moz-4D761D44.lsanca.dsl-w.verizon.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[02:14:00] <cmr> kimundi was pushing for standradization
[02:14:03] <Eridius> rather, .with_ potentially allocating
[02:14:07] <cmr> there was a message to the ML about it, and an issue open iirc
[02:14:08] <bjz> mm
[02:14:21] <Eridius> maybe c_str.with_ref should be renamed to .as_ref? Or maybe .get() or something
[02:15:51] <bjz> Eridius: but .with_ref takes a closure?
[02:16:16] <Eridius> oh right so no .get(), but .as_ref() would have the precedent in .as_imm_buf
[02:16:41] <Eridius> I'm not happy about the same prefix being either "return this" or "provide this to a closure", but I'm not sure how we could disambiguate that without having odd names
[02:16:44] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[02:17:54] <bjz> Eridius: I
[02:18:08] <ChrisMorgan> cmr: hang on, //! and /// are different, aren't they? //! applies to parent and /// to child?
[02:18:19] <bjz> Eridius: I'm pretty sure we should focus on linguistic connotations not precedents in std.
[02:18:24] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[02:18:24] <bjz> ChrisMorgan: aye
[02:18:50] <bjz> Eridius: as annoying and fuzzy as natural languages are :P
[02:19:08] <bjz> Eridius: the 'precedents' are already a little ad-hoc
[02:20:13] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[02:20:23] <jmgrosen> rusti: fn do_stuff() { println("hai"); } fn call_closure(f: ~fn()) { f(); } call_closure(do_stuff)
[02:20:27] -rusti- hai
[02:20:27] -rusti- ()
[02:21:30] *** Quits: MauricioC (mauricioc@moz-2CFCD404.impa.br) (Quit: leaving)
[02:21:55] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[02:22:31] <cmr> ChrisMorgan: yes, but convention-wise they're identical.
[02:24:13] <Eridius> rusti: static x: u8 = '.' as u8; x
[02:24:17] <ChrisMorgan> cmr: it just struck me as odd that you used one for A and C and the other for B. And the first sentence of your final paragraph seems a bit vagueâ€”I interpreted it to mean "functionally interchangeable" rather than "style-conventionally interchangeable".
[02:24:17] -rusti- 46
[02:24:36] <cmr> ChrisMorgan: Well A and C are usually where I see them
[02:24:46] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[02:24:47] <cmr> I'll clarify on the ML
[02:24:56] <ChrisMorgan> Oh, I get it.
[02:24:57] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Client exited)
[02:25:08] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[02:26:48] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[02:30:15] <SiegeLord> Hmm, so I downgraded rustc one commit and it started working again
[02:30:29] <SiegeLord> Something's very screwy with the latest commit
[02:30:36] *** Joins: inf-groupoid (user@580120F5.8ED93E28.1C8C8CE9.IP)
[02:33:44] <SiegeLord> Going to update, rebuild, replicate, submit a bug report, revert, and resume working >_<
[02:34:18] <Luqman> SiegeLord: screwy how so?
[02:34:25] <SiegeLord> rustc segfaults
[02:35:11] <SiegeLord> Just running it, no input files
[02:35:13] *** Quits: Kruppe (user@moz-EE1E894A.home3.cgocable.net) (Ping timeout)
[02:35:17] <SiegeLord> Backtrace is somewhere in dlopen
[02:35:23] <SiegeLord> But that's for step 3
[02:36:23] *** Joins: sprog (Mibbit@moz-ABE9BD2D.hsd1.ca.comcast.net)
[02:37:03] *** Joins: Tim (quassel@moz-FEADCD38.hsd1.pa.comcast.net)
[02:37:33] *** Tim is now known as tikue
[02:38:41] <bjz> zeuxcg: so yeah, let me keep me posted about your thoughts
[02:38:48] *** Quits: tikue (quassel@moz-FEADCD38.hsd1.pa.comcast.net) (Input/output error)
[02:38:52] *** Joins: tikue (quassel@moz-FEADCD38.hsd1.pa.comcast.net)
[02:39:09] <bjz> zeuxcg: I'm super interested to hear, because you seem to have much more experience at this than me
[02:41:46] <SingingBoyo> Siegelord: So going back to the commit ending in f89ec6 works?
[02:41:48] <sprog> through some intense googlery i was able to figure out that len() is how you get the length of an array. i had a hard time finding it in the official docs, though. am i just stupid/looking in the wrong place or is it just not formally described anywhere?
[02:42:07] *** Joins: Chef (Chef@moz-4C317041.dsl.teksavvy.com)
[02:42:08] <SingingBoyo> SiegeLord: just had the same thing with segfaults :(
[02:42:21] <sprog> (obvious newbie here... please be gentle :D)
[02:42:29] <SiegeLord> SingingBoyo: Yes, for me it does
[02:43:04] <aatch> sprog, it's a method on vectors
[02:43:09] <aatch> so it
[02:43:19] <ChrisMorgan> sprog: http://static.rust-lang.org/doc/std/vec.html#method-len
[02:43:24] <aatch> so it's documented under std::vec
[02:43:33] <ChrisMorgan> I would not expect you to be able to find it, though!
[02:43:38] <brson> SiegeLord: what platform are you on?
[02:43:46] <SiegeLord> Linux, 64 bit
[02:43:54] <sprog> ah, thanks ChrisMorgan / aatch
[02:44:02] <sprog> yeah i was looking for vector, not vec, haha
[02:44:08] <brson> the metadata commit uses a bunch of unsafe code. could be wrong
[02:44:19] <brson> i have to go to dinner now, but I can work on a revert when I get back
[02:44:30] <brson> nothing in bors queue right now?
[02:45:05] <ChrisMorgan> Seldaek: I can't find len() in your new docs frontend. Is it there?
[02:45:12] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Ping timeout)
[02:46:59] <sprog> and of course now that i know what to look for it appears in the tutorial a million times, haha
[02:47:35] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[02:47:55] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[02:48:05] *** Joins: busylizzy (lisa@85228838.12D0DC84.211374C4.IP)
[02:48:27] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[02:52:24] *** Quits: sprog (Mibbit@moz-ABE9BD2D.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:53:00] *** Joins: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[02:54:54] <ChrisMorgan> Testing found me a subtle bug in my HTTP-date parsing: the asctime format expects a leading space on a single-digit day (e.g. "Sun Nov  9"), but my header reading collapses linear white space into a single space...
[02:55:16] <Eridius> ChrisMorgan: wat? header collapsing should preserve all whitespace after the initial leading whitespace
[02:55:22] <Eridius> err header reading
[02:55:47] *** Quits: zz_kimundi (kimundi@moz-74ED7B9D.dip0.t-ipconnect.de) (Ping timeout)
[02:55:48] <Eridius> this could affect cookies too, and I'd imagine other arbitrary headers too
[02:56:03] *** Quits: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue_)
[02:56:18] <ChrisMorgan> Eridius: page 16, "A recipient MAY replace any linear white space with a single SP before interpreting the field value or forwarding the message downstream."
[02:56:24] <ChrisMorgan> (RFC 2616, that is.)
[02:56:31] <Eridius> wow, really? That sounds crazy
[02:57:13] <ChrisMorgan> Inside a quoted-string it won't be collapsed, forexample, but anywhere where LWS is expected it can be.
[02:57:19] <Eridius> I see
[02:57:46] *** Joins: hjr3 (hradtke@moz-4D761D44.lsanca.dsl-w.verizon.net)
[02:57:51] <ChrisMorgan> Matter of fact, what I'm doing at present is *probably* not standards-compliant, but the way HTTP/1.1 deals with LWS is an utter mess.
[02:58:38] *** Quits: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net) (Client exited)
[02:58:41] <klutzy> SiegeLord: built with latest, same segfaults for me (debian x64)
[02:58:51] *** Joins: zz_kimundi (kimundi@moz-D6FCFCB5.dip0.t-ipconnect.de)
[02:58:51] <olsonjeffery> brson: ping
[02:59:09] *** zz_kimundi is now known as kimundi
[02:59:26] <SiegeLord> Oh, darn... I didn't bother building with debug symbols :/
[03:00:33] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[03:01:42] <klutzy> (configured with --enable-debug)
[03:03:00] <SiegeLord> Do you get a good backtrace?
[03:03:29] <SiegeLord> http://pastebin.ca/2437659 is mine
[03:05:50] <Eridius> damn, I can't use bytes!(..) in a match arm
[03:05:53] <Eridius> that's disappointing
[03:06:19] <klutzy> SiegeLord: http://pastebin.ca/2437660
[03:07:56] <SiegeLord> I'll submit a quick bug report I guess
[03:08:02] <SingingBoyo> Siegelord, klutzy: looks like the metadata change broke library loading.
[03:08:18] <SingingBoyo> brson did say something about reverting once he got back
[03:08:33] <SiegeLord> Hmm
[03:08:50] <SiegeLord> I guess I'll wait until he comes back to submit anything, maybe he'll think it's unnecessary
[03:09:05] *** Quits: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com) (Quit: Leaving.)
[03:11:03] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[03:11:35] <Eridius> rusti: let xs: &[int] = []; xs.split_iter(|_| true).to_owned_vec()
[03:11:42] -rusti- pastebinned 16 lines of output: http://ix.io/7zx
[03:11:56] <Eridius> rusti: let xs: [int, ..0] = []; xs.split_iter(|_| true).to_owned_vec()
[03:11:59] -rusti- pastebinned 16 lines of output: http://ix.io/7zy
[03:12:35] <Eridius> rusti: let xs: [int, ..0] = []; let xs_ = xs.as_slice(); xs_.split_iter(|_| true).to_owned_vec()
[03:12:37] -rusti- pastebinned 16 lines of output: http://ix.io/7zz
[03:12:50] *** Quits: ChrisMorgan (chris@moz-F50F5A61.its.monash.edu.au) (Ping timeout)
[03:12:52] <Eridius> oh durr, thinking of the wrong lifetime
[03:13:05] <Eridius> rusti: let xs: [int, ..0] = []; let xs_ = xs.as_slice(); printfln!(xs_.split_iter(|_| true).to_owned_vec())
[03:13:07] -rusti- ~[&[]]
[03:13:07] -rusti- ()
[03:17:04] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[03:18:10] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[03:18:44] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[03:20:51] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[03:20:55] <brson> SiegeLord: please do submit a bug report. i'd like to understand what happened. going to revert now though
[03:22:14] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[03:23:54] <Eridius> rusti: match bytes!(".") { ['.' as u8] => true, _ => false }
[03:23:55] -rusti- <anon>:5:34: 5:36 error: expected `,` but found `as`
[03:23:55] -rusti- <anon>:5          match bytes!(".") { ['.' as u8] => true, _ => false }
[03:23:55] -rusti-                                            ^~
[03:23:55] -rusti- application terminated with error code 101
[03:24:11] <Eridius> rusti: match bytes!(".") { bytes!(".") => true, _ => false }
[03:24:11] -rusti- <anon>:5:34: 5:35 error: expected `=>` but found `!`
[03:24:12] -rusti- <anon>:5          match bytes!(".") { bytes!(".") => true, _ => false }
[03:24:12] -rusti-                                            ^
[03:24:12] -rusti- application terminated with error code 101
[03:25:10] *** Quits: webber46 (webber46@moz-717E9C5B.cust.bredband2.com) (Quit: webber46)
[03:26:22] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[03:26:22] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/Wbd0xg
[03:26:22] <ghrust> 13rust/06auto 144aa342b 15Brian Anderson: Revert "auto merge of #8745 : brson/rust/metadata, r=cmr"...
[03:26:22] <ghrust> 13rust/06auto 1424bde7f 15bors: auto merge of #8751 : brson/rust/metadata-revert, r=brson...
[03:26:23] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[03:26:53] <km> I'm seeing the same open_verify segfault when building stage2 libstd on Linux i686: http://pastebin.com/KaY7eeh1
[03:27:37] <enix> is it just me, or does "022f188 Don't ever compress metadata" cause segfaults
[03:27:59] <SiegeLord> Not just you
[03:28:05] <SiegeLord> I just made a bug report: https://github.com/mozilla/rust/issues/8752
[03:28:13] <SiegeLord> brson ^
[03:28:47] <enix> ah
[03:29:05] <enix> for me its slightly different - rustc builds fine and it can compile stuff
[03:29:15] <enix> but anything it compiles crashes instantly with a segfault
[03:29:17] <SiegeLord> Oh yeah? That's interesting
[03:29:17] *** Joins: obk (Mibbit@991D7890.9C346C7F.FAA4474F.IP)
[03:29:34] <SiegeLord> And it passed testing somehow
[03:30:02] <SiegeLord> In my case it compiles, but the rustc executable crashes
[03:30:13] <enix> but anything it compiles crashes instantly with a segfault
[03:30:28] <enix> ug, sorry to say the same thing twice. middle click error.
[03:30:43] <enix> yeah, thats kinda weird
[03:31:00] <enix> how can I get the backtrace for an executable that segfaults?
[03:31:03] <Eridius> hmm, DeepClone is derived for ~str but doesn't exist for ~[u8]
[03:31:13] <Eridius> rather, for any ~[T: DeepClone]
[03:31:23] *** Quits: RMF (RMF@moz-3ADFD14C.dsl.telepac.pt) (Quit: Textual IRC Client: www.textualapp.com)
[03:31:31] <strcat> Eridius: I have that in a branch
[03:31:49] <strcat> seemed too trivial to make a PR for it alone so I haven't yet ;p
[03:31:55] *** Quits: KindOne (KindOne@moz-55A6DBE3.dynamic.ip.windstream.net) (Ping timeout)
[03:32:13] <Eridius> Speaking of small PRs, care to r? https://github.com/mozilla/rust/pull/8750? I need this for my path module rewrite
[03:32:45] <Eridius> strcat: ^
[03:33:04] *** Joins: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com)
[03:33:09] <Eridius> thanks
[03:34:11] <strcat> Eridius: ugh this is one of the ones that got messed up from that git repo screwup
[03:34:13] <strcat> need to reapply it
[03:34:40] *** Joins: Valeentiina (Valeentiin@B79FBA79.E7B4806E.8FE679D8.IP)
[03:34:43] <Valeentiina> hi
[03:34:53] <Eridius> strcat: what do you mean?
[03:34:58] <SiegeLord> enix: gdb <executable> then issue commands: r and bt
[03:35:01] <strcat> anyway I also went and added it to most things deriving Clone
[03:35:06] *** Parts: Valeentiina (Valeentiin@B79FBA79.E7B4806E.8FE679D8.IP) ()
[03:35:08] <Eridius> oh your DeepClone thing. I see
[03:35:19] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[03:35:35] <enix> ah, ok, cool. i didn't know if that would work with a rust program
[03:35:47] *** Joins: KindOne (KindOne@moz-CE81D5D1.dynamic.ip.windstream.net)
[03:36:59] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Ping timeout)
[03:37:00] <SiegeLord> enix: You could also compile the rust program with -Z debug-info
[03:37:22] *** Quits: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net) (Ping timeout)
[03:37:27] <Eridius> rusti: printfln!(&[])
[03:37:43] -rusti- pastebinned 9 lines of output: http://ix.io/7zA
[03:37:50] *** Joins: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net)
[03:38:00] <Eridius> rusti: let xs: [int, ..0] = []; printfln!(&xs)
[03:38:02] -rusti- &[]
[03:38:02] -rusti- ()
[03:38:35] <enix> ah, k, thanks
[03:38:59] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[03:39:00] <enix> hrm, maybe my comment should be disregarded. i'm having a hard time getting it to compile again
[03:39:12] *** Joins: RMF (RMF@moz-3ADFD14C.dsl.telepac.pt)
[03:39:19] <enix> so, maybe I had a different commit when i was seeing rustc succeed and then the executable fail
[03:39:37] <enix> or maybe i was just assuming that the compile had succeeded and then running an already existing executable
[03:39:54] <enix> the executable did segfault, but, maybe it was trying to pick up the wrong libs
[03:40:26] <obk> http://mibpaste.com/JwgGwq http://mibpaste.com/bUxIiI 
[03:41:33] * obk is playing burrowed pointer sudoku again :-(
[03:43:04] *** Joins: ChrisMorgan (chris@moz-8CA8F104.its.monash.edu.au)
[03:43:49] <obk> Not sure this is even possible, but I want to avoid GC when using this pattern...
[03:43:59] <obk> Any ideas if it is possible?
[03:44:35] <Eridius> obk: why are you using a pastebin that doesn't even have the decency to serve up monospaced text?
[03:44:38] <Eridius> go use gist.github.com
[03:44:41] <strcat> obk: Slave<'a>
[03:44:47] <strcat> &'a Slave is a borrowed pointer to a Slave
[03:44:58] <strcat> and you're allocating it on the stack
[03:45:03] <strcat> so you can't return a reference to it
[03:45:49] <obk> Ok, I guess I should allocate it as ~Slave then?
[03:46:40] <strcat> no
[03:46:45] <strcat> obk: return it by-value
[03:46:57] <strcat> you rarely need ~
[03:47:10] <strcat> you *only* need it to make a recursive data structure
[03:47:45] <strcat> there are times it can be useful for performance reasons, but that's the only semantic one
[03:47:56] *** Quits: abacus (snoonan_mo@moz-F95B9243.hsd1.wa.comcast.net) (Ping timeout)
[03:48:09] <SiegeLord> How can I verify that #[fixed_stack_segment] is working?
[03:48:33] <strcat> do you have a reason to think it isn't working? ;p
[03:48:35] *** Quits: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net) (Ping timeout)
[03:48:36] *** Joins: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net)
[03:49:14] <Eridius> SiegeLord: the only expected reason for it to not work is if your function gets inlined (and the caller doesn't have #[fixed_stack_segment]), which is why it's recommended that you pair it with #[inline(never)]
[03:49:36] <strcat> it still works if it's inlined
[03:49:37] <SiegeLord> strcat: The lint is rejecting it's use
[03:49:39] <strcat> it applies to the parent function
[03:49:45] <Eridius> strcat: really? when did that happen?
[03:49:50] <obk> Huh, return-by-value worked. I guess what really happens is that it is allocated on the caller's stack?
[03:49:53] <SiegeLord> I want to know whether the lint is wrong, or it's actually not being applied
[03:49:57] <strcat> Eridius: always been that way, it's not why you put inline(never) on a wrapper
[03:50:10] <SiegeLord> It's on a default method
[03:50:19] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[03:50:24] <strcat> the problem is that it gets applied to the parent, and if the parent yields, it will essentially leak
[03:50:44] <strcat> anyway I think we shouldn't be caching at all
[03:50:47] <strcat> jemalloc already does
[03:50:53] <Eridius> strcat: hmm, I swear the tutorial used to say that the caller didn't get fixed_stack_segment during inlining, but it certainly backs up what you're saying now
[03:51:12] <strcat> it might have been wrong
[03:51:23] <obk> As opposed to being actually copied?
[03:52:01] <strcat> obk: yes
[03:52:05] <strcat> you want to do stuff by-value
[03:52:17] <strcat> only use &, ~, @ when that isn't going to work or you know it won't perform well
[03:52:55] <obk> Makes sense
[03:52:58] <obk> Thanks
[03:53:16] <strcat> rust will only ever do implicit shallow copies, so you never have to worry about an implicit heap allocation, etc.
[03:53:59] <strcat> just have to worry about really huge objects (which are rare), and use & instead of by-value when the type has a destructor (since by-value moves ownership)
[03:54:16] <strcat> and in general, by-value + those uses of & will be 90% of code
[03:54:20] *** Quits: momiga (Meta@moz-FE9D5AEE.bflony.fios.verizon.net) (Ping timeout)
[03:55:22] *** Joins: momiga (Meta@moz-FE9D5AEE.bflony.fios.verizon.net)
[03:56:03] *** Quits: recrack (ymin@5AB4884B.FCC4549.14D5B978.IP) (Quit: Lost terminal)
[03:56:21] *** Quits: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net) (Ping timeout)
[03:56:23] <zeuxcg> is the idiomatic way to go from ~ to & - &*v ?
[03:57:04] <strcat> zeuxcg: you don't need to do it implicitly
[03:57:05] <zeuxcg> I have ~T and I want to put it in a one-element array &[&T]
[03:57:06] <strcat> it will coerce
[03:57:22] <zeuxcg> [v] has a type &[~T], which does not get converted implicitly
[03:57:27] <zeuxcg> to &[&T]
[03:57:30] <zeuxcg> :(
[03:57:47] *** Joins: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net)
[03:58:00] <strcat> zeuxcg: &[&T] and &[~T] won't coerce
[03:58:04] <strcat> ~T will coerce to &T
[03:58:09] <jmgrosen> is github down for you guys?
[03:58:11] <zeuxcg> yeah, hence my question
[03:58:20] <strcat> zeuxcg: so you have an array of &[~T]?
[03:58:22] <Eridius> jmgrosen: seems to be, yes
[03:58:29] <Eridius> I wonder if they're being DDOSed again? Yesterday they had some CSS issues
[03:58:31] <zeuxcg> strcat, I have just one element
[03:58:34] <zeuxcg> or, well, two
[03:58:42] <strcat> zeuxcg: ~T will coerce to &T and let you store it
[03:58:47] <zeuxcg> let a = T::new(); let b = T::new(); boo([a, b])
[03:58:50] <zeuxcg> I want to do this.
[03:58:59] <jmgrosen> Eridius: maybe -- it's annoying though >.<
[03:59:02] <zeuxcg> T::new returns ~T, boo receives &[&T]
[03:59:30] <sfackler> rust-lang.org seems to be dying too
[03:59:33] <strcat> zeuxcg: because it's inferring the wrong type
[04:00:08] <strcat> ~T will coerce to &T when you're doing something that requires &T
[04:00:15] <strcat> rusti: let x = ~5; let y: &int = x; *y
[04:00:17] -rusti- 5
[04:00:24] <jmgrosen> sfackler: rust-lang.org is fine for me
[04:00:34] <SiegeLord> Damn, just as I was about to submit an issue >_<
[04:00:38] <strcat> rusti: let x = ~5; let y: &int = x; printfln!("%?", [y])
[04:00:39] -rusti- [&5]
[04:00:39] -rusti- ()
[04:00:51] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[04:01:05] <zeuxcg> strcat: yeah, I know that it's inferring the wrong type :) the question is, what's the best way to solve this
[04:01:11] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[04:01:17] <zeuxcg> &* works but feels awkward
[04:01:41] *** Quits: momiga (Meta@moz-FE9D5AEE.bflony.fios.verizon.net) (Quit: )
[04:02:29] <strcat> zeuxcg: well, it's awkward for a function to take [&T]
[04:02:50] <strcat> should likely use an iterator if it doesn't rely on the representation of [] being contiguous in memory
[04:03:00] <Luqman> zeuxcg: also, T::new() usually doesn't return ~T but just T
[04:03:04] <strcat> zeuxcg: you probably only need &* for the first element though
[04:03:20] <strcat> and then it should infer
[04:03:26] <jmgrosen> https://status.github.com/messages says "The site is unavailable again. We appear to be under another DDoS attck which we are working hard to mitigate."
[04:03:54] <jmgrosen> yes, it says "attck", not "attack" :P
[04:04:49] <jmgrosen> oh, already back up for me
[04:05:04] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[04:05:56] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Connection reset by peer)
[04:06:13] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[04:08:29] *** Quits: Earnestly (earnest@B0BDF733.8FDE20A.5411983D.IP) (Ping timeout)
[04:12:08] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Ping timeout)
[04:15:01] *** Quits: ChrisMorgan (chris@moz-8CA8F104.its.monash.edu.au) (Ping timeout)
[04:15:39] *** Joins: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com)
[04:16:02] *** Quits: obk (Mibbit@991D7890.9C346C7F.FAA4474F.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:16:11] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[04:16:49] <zeuxcg> strcat: iterator will restrict the calling code to one pass through data, right?
[04:16:54] <zeuxcg> or is there a way to rewind?
[04:17:21] <Eridius> zeuxcg: most iterators are cloneable
[04:17:24] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[04:17:34] <Eridius> (ones that take a closure aren't, since closures aren't clonable)
[04:17:55] <zeuxcg> ah, ok.
[04:18:04] <Eridius> rusti: let xs = [1,2,3,4,5]; let mut it = xs.iter(); printfln!((xs.next(), xs.next())); let mut it_ = it.clone(); printfln!(it.to_owned_vec()); printfln!(it_.to_owned_vec())
[04:18:08] -rusti- pastebinned 16 lines of output: http://ix.io/7zG
[04:18:28] <Eridius> rusti: let xs = [1,2,3,4,5]; let mut it = xs.iter(); printfln!((it.next(), it.next())); let mut it_ = it.clone(); printfln!(it.to_owned_vec()); printfln!(it_.to_owned_vec())
[04:18:30] -rusti- (Some(&1), Some(&2))
[04:18:30] -rusti- ~[&3, &4, &5]
[04:18:31] -rusti- ~[&3, &4, &5]
[04:18:31] -rusti- ()
[04:18:56] <jmgrosen> bjz: how's work on the updating of lmath-rs coming?
[04:18:58] <zeuxcg> strcat, Eridius, Luqman, thanks for the help
[04:19:04] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[04:19:29] *** Quits: hjr3 (hradtke@moz-4D761D44.lsanca.dsl-w.verizon.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[04:19:46] <strcat> rusti: fn foo<T: Iterator<int>>(mut xs: T) { for x in xs { printfln("%d", x) } }
[04:19:47] -rusti- <anon>:5:61: 5:69 error: unresolved name `printfln`.
[04:19:47] -rusti- <anon>:5          fn foo<T: Iterator<int>>(mut xs: T) { for x in xs { printfln("%d", x) } }
[04:19:47] -rusti-                                                                       ^~~~~~~~
[04:19:47] -rusti- error: aborting due to previous error
[04:19:48] -rusti- application terminated with error code 101
[04:19:50] <strcat> rusti: fn foo<T: Iterator<int>>(mut xs: T) { for x in xs { printfln!("%d", x) } }
[04:19:51] -rusti- ()
[04:19:58] <strcat> rusti: fn foo<T: Iterator<int>>(mut xs: T) { for x in xs { printfln!("%d", x) } } foo(range(0, 3))
[04:19:59] -rusti- 0
[04:19:59] -rusti- 1
[04:19:59] -rusti- 2
[04:20:00] -rusti- ()
[04:20:16] <strcat> rusti: fn foo<T: Iterator<int>>(mut xs: T) { for x in xs { printfln!("%d", x) } } let xs = [1, 2]; foo(xs.iter().map(|&x| x))
[04:20:17] -rusti- 1
[04:20:17] -rusti- 2
[04:20:17] -rusti- ()
[04:20:26] <strcat> that way the caller can choose what to pass
[04:21:05] <strcat> although if you need the fixed-size invariant, you're stuck with [T, ..n], or if you need random-access *for now*, or contiguous layout in memory
[04:22:22] <bjz> jmgrosen: goood
[04:22:48] *** Parts: Chef (Chef@moz-4C317041.dsl.teksavvy.com) ()
[04:22:51] *** Quits: SingingBoyo (brandon@4DF3381A.51F4D838.4F048BDC.IP) (Connection reset by peer)
[04:22:55] <bjz> jmgrosen: maik is working on updating what's there right now, I'm working on the redesign
[04:23:09] <bjz> jmgrosen: the api shouldn't change much
[04:23:22] <bjz> jmgrosen: just the way its structured
[04:23:31] <jmgrosen> bjz: don't mean to rush either one of you, but got an ETA on either?
[04:24:04] <bjz> jmgrosen: would you like me to attempt to fast-track the update of the current one?
[04:24:18] <bjz> maik has a version pushed
[04:24:24] <bjz> of his current work
[04:24:26] <jmgrosen> bjz: nah, it's fine -- school starts this week anyway so i won't have much time to work
[04:24:57] <jmgrosen> that reminds me
[04:25:18] <jmgrosen> any of you actually working at Mozilla, do you only accept college interns for your summer internships?
[04:25:33] <bjz> brson and nmatsakis work for mozilla
[04:26:01] <bjz> basically if they're opped, they're a core dev
[04:26:13] <bjz> bblum interned with them though
[04:26:23] <jmgrosen> biz, yeah, so did acrichto, right?
[04:26:26] <jmgrosen> *bjz
[04:26:33] <bjz> sully did too
[04:26:48] * bjz doesn't think he'd be good enough to intern
[04:26:59] <jmgrosen> ha, at this stage neither am i
[04:27:05] <jmgrosen> but possibly by next summer :)
[04:27:11] * bjz also doesn't have the funds to move to america for a summer
[04:27:17] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[04:27:19] <bjz> :P
[04:27:20] <jmgrosen> aw :/
[04:27:28] <jmgrosen> i'm only a couple hours from SF, luckily
[04:27:30] <Luqman> bjz: oh if you did intern at mozilla you wouldn't have to worry about that :P
[04:27:39] <bjz> Luqman: ?
[04:28:11] <Luqman> bjz: pretty much everything is taken care of for you
[04:28:12] <sully> acrichto was a mozilla intern, but not on rust
[04:28:19] <sully> he was a JS team intern, iirc
[04:28:22] <bjz> Luqman: really? :o
[04:28:52] <Luqman> bjz: yep. awesome experience altogether
[04:29:10] <bjz> still dunno if I'd be good enough :P
[04:29:20] *** Quits: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net) (Ping timeout)
[04:29:50] * bjz is a bit of a hack
[04:30:11] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[04:30:35] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[04:30:59] <jmgrosen> i'd also have the problem of living there -- my dad would probably have to come up and stay with me too
[04:31:20] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[04:31:20] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/Wbd0xg
[04:31:20] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[04:31:45] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Connection reset by peer)
[04:31:45] *** Joins: tcr_ (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[04:32:17] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[04:32:52] *** Joins: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net)
[04:32:59] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[04:34:32] *** Quits: tcr_ (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Connection reset by peer)
[04:34:39] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[04:36:18] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[04:36:18] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/rKfTBw
[04:36:18] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[04:36:19] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[04:36:19] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/sg4DjQ
[04:36:19] <ghrust> 13rust/06auto 146f9c68a 15Kevin Ballard: Add _opt variants to str byte-conversion functions...
[04:36:19] <ghrust> 13rust/06auto 14bdd188d 15bors: auto merge of #8750 : kballard/rust/str-opt-variant, r=thestinger...
[04:36:19] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[04:36:42] *** Quits: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net) (Ping timeout)
[04:40:44] <jmgrosen> welp, gotta get sleep for school tomorrow -- signing off
[04:40:57] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[04:40:59] <SiegeLord> Wonder when my school starts...
[04:45:58] <nsf> hm, rust doesn't have function varargs as far as I can see, is there a reason for that? are they planned?
[04:46:59] <Eridius> oh crud. borrowck is misbehaving in the face of my macro. This sucks
[04:47:09] <strcat> nsf: there's no proposal for them (as in no one has figured out how they would be incorporated into the type system), no there are no plans
[04:47:14] <Eridius> I'm getting an error: cannot borrow `*self` as mutable more than once at a time
[04:47:21] <Eridius> but when I manually expand my macro, the error goes away
[04:47:32] *** Joins: recrack (ymin@5AB4884B.FCC4549.14D5B978.IP)
[04:47:35] <strcat> nsf: supporting FFI vararg functions in planned, but that's going to be unsafe
[04:47:40] <strcat> is planned*
[04:48:30] <nsf> strcat: I see
[04:48:36] <SiegeLord> There've been some musings about using macros and arrays of trait objects here on IRC to be used for this purpose
[04:49:01] <strcat> not sure why you'd need trait objects
[04:49:26] <nsf> strcat: I guess it sounds like a Go way
[04:49:33] <SiegeLord> It depends on what kind of vararg, I suppose
[04:49:37] <nsf> where varargs are implemented through []interface{}
[04:49:57] <strcat> yeah if you did &[Trait] that would work
[04:50:04] <SiegeLord> The general idea is [1 as &A, "foo" as &A]
[04:50:24] <strcat> but you could also use an array of enums for most cases
[04:50:26] <SiegeLord> But if you're expecting uniform objects... then it'll work
[04:51:16] <strcat> nsf: it's more that they don't really fit well into a strong type system than people not wanting them
[04:51:29] <strcat> most languages with a type system similar to rust (like haskell) don't have them
[04:51:41] <nsf> yes, I understand that
[04:51:48] <strcat> C++11 has variadic templates, but they're a hack relying on recursively pattern matching out the head ;p
[04:52:06] <strcat> (they're still pretty neat)
[04:52:17] <nsf> they are quite painful to use indeed, but having them in C++ is better than not to
[04:52:32] <bjz> ooh, ne-lmath is turning out nice
[04:52:38] <bjz> *new-lmath
[04:52:45] <bjz> neo-lmath
[04:52:57] *** Quits: KindOne (KindOne@moz-CE81D5D1.dynamic.ip.windstream.net) (Ping timeout)
[04:53:27] <strcat> SiegeLord: although, you would probably use an iterator now
[04:53:28] <sfackler> fwiw, I find less of a need for varargs in rust since the array syntax is so much simpler
[04:53:35] <sfackler> foo(arg1, [arg2, arg3])
[04:53:46] <sfackler> instead of foo(arg1, new Object[] {arg2, arg3})
[04:54:13] <nsf> and I guess you can make it even more nicer with macros
[04:54:20] <nsf> foo!(arg1, arg2, arg3)
[04:54:26] <nsf> not sure if macros can do that, but it seems so
[04:54:47] <Eridius> grr, stupid macro bug: https://github.com/mozilla/rust/issues/8754
[04:54:54] <strcat> nsf: yeah, that works
[04:54:56] <SiegeLord> The new format macros are state of the art, but they are syntax extensions
[04:55:20] <strcat> but when you end up wanting some more logic, you're out of luck atm since procedural ones are baked into the compiler
[04:55:31] <nsf> SiegeLord: sure, what I mean is going the Go way using macros as a syntax sugar
[04:55:48] <nsf> that is hiding the fact that you're creating &[Trait] behind the scenes
[04:55:57] <SiegeLord> nsf: That's essentially what format macros are doing
[04:55:59] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[04:56:09] <SiegeLord> Arrays of &Trait afaik
[04:56:13] <nsf> I see
[04:56:34] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Connection reset by peer)
[04:56:51] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[04:56:52] *** Joins: KindOne (KindOne@moz-3332819A.dynamic.ip.windstream.net)
[04:57:37] <strcat> I really, really want FFI varargs ;[
[04:57:45] <strcat> don't like having to make a stub in C
[04:58:32] <nsf> hehe
[04:59:18] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[04:59:23] <nsf> I think in Go you can't even pass a function pointer to a C function in the Go itself when dealing with C code
[04:59:32] <nsf> and of course no calling as everything is done through macros
[04:59:54] <nsf> I wrote so many wrappers, don't even want to think about it :D
[04:59:59] <strcat> rust can finally call C fn pointers
[05:00:01] <strcat> landed recently
[05:00:07] <nsf> yes, very nice feature
[05:00:36] <nsf> oops
[05:00:42] <nsf> s/through macros/through wrappers/
[05:00:58] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Ping timeout)
[05:02:25] <nsf> the real challenge for rust would be if it decides to have really complete run-time reflection
[05:02:31] <nsf> and when someone writes gtk bindings
[05:02:59] <strcat> sadly I think ideal gtk bindings would need to be written by hand
[05:03:01] <strcat> like gtkmm
[05:03:06] <nsf> in Go I did some work on generating bindings, their compiler bloats .a files for gtk bindings to 50MB
[05:03:17] <nsf> and then the hello world binary is something like 10-15MB
[05:03:27] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Connection reset by peer)
[05:03:35] <strcat> nsf: the haskell ones are insane
[05:03:36] <nsf> strcat: gobject-introspection stuff is somewhat neat
[05:03:53] <nsf> it allows you to generate most of the bindings automatically
[05:04:27] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[05:04:54] <nsf> there's like 4k functions/methods in gtk alone
[05:05:02] <nsf> so.. doing it by hand is not exactly fun :)
[05:05:15] *** Quits: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com) (Ping timeout)
[05:05:32] *** Joins: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com)
[05:05:54] <sp3d> nsf: I'm working on that atm ;)
[05:06:11] <nsf> good luck with that
[05:06:18] <sp3d> yeah, it's still in early stages
[05:07:00] <strcat> nsf: yeah and Qt has something similar to generate bindings
[05:07:16] <sp3d> I have a crate compiling with all the simple definitions from GLib, but the generation of wrappers for functions, objects, and methods still needs to be done
[05:07:24] <strcat> just curious how well it would mix with doing it properly, as in mapping their resource management to destructors
[05:07:36] <nsf> strcat: I don't think so :( from what I saw, most bindings generator actually parse C++
[05:07:49] <nsf> Qt has a nice property though that it's written in C++
[05:07:52] <strcat> nsf: well, Qt (poorly) parses C++ just to work with moc
[05:07:55] <nsf> where object semantics is defined
[05:07:59] <strcat> if it was written today, it wouldn't
[05:08:17] <nsf> it means they don't need to have an extra layer of annotations to define it
[05:08:24] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Connection reset by peer)
[05:08:31] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[05:08:34] <nsf> so.. clang-based parser and you can parse it more or less just fine
[05:09:13] <nsf> sp3d: yeah, there's a lot of work, maybe you'll find that useful I don't know: https://github.com/nsf/gogobject
[05:09:31] <nsf> that's my work on the Go bindings gen, it's incomplete, but I've ported a big portion of gtk-demo
[05:09:55] <nsf> the worst parts are: cairo bindings need to be written by hand
[05:10:06] <nsf> same with pango as they don't work well with gobject-introspection
[05:10:15] <nsf> then there's closure marshalling :)
[05:10:30] <sp3d> I'm working from the fairly solid foundation of grust so far (<https://github.com/mzabaluev/grust>), but I'll give it a look
[05:10:30] <nsf> when you convert args from C to Language and back
[05:10:58] <strcat> oh and the other thing rust is missing in addition to varargs is untagged unions
[05:10:58] <nsf> oh, nice
[05:11:04] <strcat> for ffi
[05:11:18] *** Joins: ChrisMorgan (chris@moz-3959240D.its.monash.edu.au)
[05:11:21] <nsf> strcat: yeah, but it's not super hard to emulate
[05:11:27] *** Joins: kertap (kertap@moz-8FBDEFD1.b-ras3.mvw.galway.eircom.net)
[05:11:37] <nsf> the worst part of it that explicit size definitions aren't always cross-platform
[05:11:57] <nsf> like in SDL2 you know that SDL_Event enum is 56 bytes always
[05:12:00] <nsf> not a big deal
[05:12:09] <nsf> but in other cases and more complicated APIs
[05:12:23] <nsf> perhaps doing that all by hand is problematic
[05:12:37] <sp3d> my plan atm is to finish the hackish prototype in C which can generate enough bindings to rewrite the generator in rust (since it uses GObject-based libs to read out the GIR info)
[05:12:40] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[05:12:44] *** Joins: ab (alex@BC9D99CC.37C1012D.FE617B51.IP)
[05:12:51] <strcat> nsf: well, it might not be a problem
[05:13:00] <strcat> eventually, rust could learn to read C headers with libclang
[05:13:07] <strcat> and you wouldn't need to write definitions
[05:13:21] <strcat> really annoying having to write them >.<
[05:13:23] <nsf> strcat: in servo's dir there is a bindings gen somewhere
[05:13:25] <nsf> that uses clang :)
[05:13:34] <strcat> yeah there's rust-bindgen
[05:13:48] *** Quits: ChrisMorgan (chris@moz-3959240D.its.monash.edu.au) (Ping timeout)
[05:13:48] <sp3d> strcat: GIR knows the byte sizes of untagged unions, so I figure opaque accessor functions with unsafe guts should work ok for the purposes of G* bindings
[05:13:54] <strcat> but it'd be nice just to do something like '#[header = "sqlite3.h"] extern mod sqlite3;'
[05:13:56] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[05:14:12] <nsf> sp3d: well, you have grust, as far as I can tell it's the bindings for library that reads GIR, so.. just use it
[05:14:20] <sp3d> grust is a little less than that
[05:14:26] <strcat> and then have 'sqlite3::sqlite3_open' and so on
[05:14:28] <strcat> via the header
[05:14:49] <nsf> sp3d: https://github.com/nsf/gogobject/blob/master/gi/gi.go
[05:14:54] <nsf> that's what I started with
[05:15:00] <nsf> the C library isn't that big
[05:15:19] <nsf> I did bindings for it and was able to do the rest in Go alone
[05:15:53] <sp3d> is that file generated or hand-rolled?
[05:16:03] <nsf> hand-rolled :)
[05:16:04] <sp3d> my intention is to generate the analogue for grust
[05:16:29] <nsf> as I said, I wrote so many wrappers in Go that I don't even want to think about it anymore :(
[05:16:30] <sp3d> ideally prior to writing a *nice* generator in rust, because the current one is very ad-hoc
[05:16:34] <sp3d> haha :/
[05:17:44] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[05:17:52] <nsf> strcat: https://github.com/nsf/krawl/blob/master/examples/tetris.krl#L1-L2
[05:17:54] <nsf> strcat: like that? :)
[05:18:22] <nsf> strcat: in my toy language I did exactly this, had a clang plugin to extract|convert the typeinfo on the fly
[05:18:30] <strcat> nsf: yes :D
[05:18:57] *** Quits: KindOne (KindOne@moz-3332819A.dynamic.ip.windstream.net) (Ping timeout)
[05:19:02] <sp3d> what grust has right now (excluding my WIP generator) is mostly the pattern of glue for integrating GObjects w/ rust's memory-management and GMainLoops with rust's tasks (though the latter is very incomplete and may need a full rewrite)
[05:19:24] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[05:19:54] <nsf> sp3d: I see
[05:19:56] <sp3d> also some glue for integrating G* methods/interfaces with methods/traits
[05:21:22] *** Quits: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com) (Ping timeout)
[05:21:31] *** Joins: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com)
[05:22:09] <nsf> as for me, I'm working on SDL2 bindings for myself
[05:22:26] <nsf> which means - incomplete bindings :D
[05:23:07] <nsf> converting enums from C to Rust is quite painful
[05:23:11] *** Joins: KindOne (KindOne@moz-6794B877.dynamic.ip.windstream.net)
[05:23:11] <nsf> I know there is an issue
[05:23:13] <sp3d> yeah
[05:23:19] <nsf> suggesting that it needs helper macros
[05:23:31] <nsf> hopefully someone finds some time to implement that
[05:23:41] <sp3d> I found glib has a fair number of enums with duplicated values under different names
[05:23:57] <nsf> yeah, it's possible
[05:23:58] <sp3d> rust doesn
[05:24:02] <sp3d> 't like that :P
[05:24:13] <strcat> well you can't use rust enums if the glib ones are flags anyway
[05:24:23] <strcat> you want a struct, with the bitwise ops overloaded
[05:25:09] <sp3d> some are flags but most aren't
[05:25:10] <nsf> also are there some form of lightweight consts in Rust? because it seems that every static immutable global var creates a symbol in the .so
[05:25:19] <nsf> isn't exactly a best thing to do for const numbers
[05:25:24] *** Joins: victorporof (victorporo@moz-BAE8D951.pck.nerim.net)
[05:25:32] <nsf> or pehraps optimizing that away is planned?
[05:25:35] <Eridius> nsf: that's true for non-pub statics too?
[05:25:42] <nsf> Eridius: haven't checked
[05:25:53] <strcat> nsf: if they're not public it shouldn't make a symbol
[05:25:54] <Eridius> pub statics obviously need a symbol, but I would hope that priv statics don't
[05:26:02] *** Joins: victorporof_ (victorporo@moz-18BD542A.pck.nerim.net)
[05:26:04] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[05:26:25] <bjz> rusti: struct A; let a0 = A; let a1 = a0; (a0, a1)
[05:26:29] -rusti- ({}, {})
[05:26:34] <nsf> well, that's the point, if I make a bunch of const numbers which represent bit flags
[05:26:43] <nsf> I don't really want these symbols
[05:26:43] <zeuxcg> phew
[05:26:45] <strcat> nsf: there is #[address_insignificant] (might be off by a bit) and it will let LLVM merge them
[05:26:54] <strcat> in the future, we could not emit symbols for them maybe
[05:26:55] <zeuxcg> bjz: https://github.com/zeux/oxid/blob/master/src/oxid.rs
[05:26:57] <bjz> rusti: struct A; let a0 = A; let a1 = a0; impl Drop for A { fn drop(&self) {} } (a0, a1)
[05:27:02] *** Quits: victorporof (victorporo@moz-BAE8D951.pck.nerim.net) (Ping timeout)
[05:27:03] -rusti- pastebinned 8 lines of output: http://ix.io/7zH
[05:27:04] <nsf> strcat: k
[05:27:05] <zeuxcg> finally decomposed your tutorial :)
[05:27:27] <zeuxcg> also I need to configure my editor to stop using tabs.
[05:27:34] <strcat> nsf: rust's handling of stuff like generics/inlining when it comes to cross-crate codegen isn't great right now
[05:27:34] <Eridius> :set et
[05:27:40] <strcat> really needs to be overhauled
[05:27:44] <bjz> zeuxcg: neat!
[05:27:47] <bjz> zeuxcg: https://github.com/bjz/cgmath-rs
[05:28:07] <strcat> LLVM has #[available_externally] to expose the implementation details of a function but *not* emit a symbol
[05:28:09] <strcat> er
[05:28:11] <bjz> zeuxcg: will read you stuff
[05:28:16] <strcat> anyway
[05:28:31] <zeuxcg> still a bit fuzzy on pass/return by value vs ~
[05:28:45] <zeuxcg> but that's enough for today
[05:28:51] <strcat> in theory all functions could be inlineable cross-crate but also symbols it would link against
[05:28:52] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[05:28:53] <bjz> where?
[05:28:58] <strcat> ofc there are ABI concerns
[05:29:01] <strcat> for dynamic libs
[05:29:38] <bjz> zeuxcg: fn(~T) moves the ~T into the fn forever
[05:29:39] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Connection reset by peer)
[05:29:48] <zeuxcg> bjz: yeah, I know
[05:29:51] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[05:29:59] <zeuxcg> fuzzy as in "when exactly to use what"
[05:30:03] <bjz> zeuxcg: same with fn(~self)
[05:30:04] <zeuxcg> actually, pass is easy
[05:30:07] <zeuxcg> return is harder
[05:30:11] <strcat> zeuxcg: you just don't want to use ~/@
[05:30:36] <strcat> ~T and T have the same value semantics
[05:30:50] <strcat> ~T has a destructor, so it acts like other types with destructors (it moves)
[05:31:12] <zeuxcg> hmm, Drop won't work for T, only for ~T?
[05:31:18] <strcat> no
[05:31:29] <strcat> destructors work for both.
[05:31:40] <strcat> but ~T has a destructor for the memory allocation
[05:32:03] <strcat> zeuxcg: the only reason you would *ever* use ~T instead of T is if you actually need the one thing ~T provides
[05:32:04] <zeuxcg> so the only reason for ~T is if T is large?
[05:32:08] <strcat> it makes the type pointer-sized
[05:32:10] <strcat> zeuxcg: yes
[05:32:15] <zeuxcg> okay
[05:32:18] <strcat> so, for a recursive data structure it's a requirement
[05:32:26] <strcat> but otherwise it's a perf tradeoff (and it will be rare that it's a useful one)
[05:32:31] <zeuxcg> that was unusual coming from C++ / OO :)
[05:32:56] <bjz> rusti: struct A; impl A { fn consume(self) {} } impl Drop for A { fn drop(&self) {} } let a = A; a.consume(); a
[05:33:07] <strcat> zeuxcg: ~ is std::unique_ptr in C++
[05:33:21] -rusti- pastebinned 8 lines of output: http://ix.io/7zI
[05:33:22] <zeuxcg> strcat: yeah, I know
[05:33:28] <bjz> rusti: struct A; impl A { fn consume(self) {} } impl Drop for A { fn drop(&self) {} } let a = ~A; a.consume(); a
[05:33:32] -rusti- pastebinned 8 lines of output: http://ix.io/7zJ
[05:33:55] <bjz> neat
[05:33:57] <zeuxcg> strcat: it's just before C++11 move did not exist, so anything that's not copyable had to be returned by pointers, so I naturally stuck to ~
[05:34:13] <strcat> zeuxcg: ah, yeah
[05:34:34] <strcat> zeuxcg: the one other use case is dynamically sized types (trait objects) but generally in rust you use enums or generics
[05:34:52] <strcat> falls back to the same "it's pointer size" guarantee though
[05:34:57] <zeuxcg> generics are only for compile-time polymorphism though
[05:35:03] <zeuxcg> but yeah, I kinda understand the design space now
[05:35:24] <strcat> zeuxcg: enums are essentially little dynamic type systems though
[05:35:30] <zeuxcg> yeah, I know
[05:35:46] <zeuxcg> I'm used to sum types
[05:35:58] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Client exited)
[05:36:07] <strcat> trait objects should work better than they do atm, but because there are many better alternatives for most uses they haven't gotten as much attention as other things ;P
[05:37:20] <nsf> one thing I don't get about trait objects is why they don't implement themselves
[05:37:30] <bjz> strcat: "little dynamic type systems" is a great way to put it
[05:37:39] <nsf> or perhaps it's a good thing to disallow it by default, have no idea
[05:38:37] <nsf> I mean being unable to use a trait object &X as a T:X in a template function is confusing :)
[05:38:45] * strcat isn't sure if that's a technical limitation or an implementation flaw
[05:38:54] <SiegeLord> It introduces issues
[05:39:04] <SiegeLord> The classical example is for the equality trait
[05:39:22] <strcat> that uses Self though, so you can't have a trait object for it
[05:39:43] <nsf> :)
[05:40:39] <SiegeLord> https://github.com/mozilla/rust/issues/5087 is the issue
[05:41:14] <sfackler> don't you run into the Self issue even without &T implementing T?
[05:41:45] <strcat> yes, trait objects just plain can't exist for traits using Self
[05:41:59] <strcat> because Self requires a type of the same real type, and it doesn't know that
[05:42:03] <sfackler> right
[05:42:19] <strcat> rusti: ~5 as ~Eq
[05:42:27] <bjz> rusti: struct A; impl A { fn consume(a: A) {} } impl Drop for A { fn drop(&self) {} } let a = ~A; A::consume(a); a
[05:42:27] -rusti- <anon>:5:111: 5:112 error: mismatched types: expected `main::A` but found `~main::A` (expected struct main::A but found ~-ptr)
[05:42:27] -rusti- <anon>:5          struct A; impl A { fn consume(a: A) {} } impl Drop for A { fn drop(&self) {} } let a = ~A; A::consume(a); a
[05:42:28] -rusti-                                                                                                                         ^
[05:42:28] -rusti- error: aborting due to previous error
[05:42:29] -rusti- application terminated with error code 101
[05:42:36] <bjz> rusti: struct A; impl A { fn consume(a: A) {} } impl Drop for A { fn drop(&self) {} } let a = ~A; A::consume(*a); a
[05:42:41] -rusti- pastebinned 8 lines of output: http://ix.io/7zK
[05:42:43] <strcat> hm, wat
[05:43:10] <strcat> rusti: let a = ~5 as ~Eq; let b = ~5 as ~Eq; a.eq(&b)
[05:43:11] -rusti- <anon>:5:47: 6:5 error: cannot call a method whose type contains a self-type through an object
[05:43:11] -rusti- <anon>:5          let a = ~5 as ~Eq; let b = ~5 as ~Eq; a.eq(&b)
[05:43:11] -rusti- <anon>:6     };
[05:43:11] -rusti- error: aborting due to previous error
[05:43:11] -rusti- application terminated with error code 101
[05:43:18] <strcat> oh it's finer grained than it used to be
[05:43:21] <sfackler> strcat: i guess i'm just not sure what the rationale is for making &T not implement T then
[05:43:30] <strcat> used to just yell about casting to Eq in the first place
[05:43:56] <sfackler> i don't seen why disallowing the use of any Self-using functions through trait objects wouldn't be sufficient
[05:45:07] <sfackler> *see
[05:49:33] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[05:53:06] <zeuxcg> I hope that the "don't read all metadata" changes will land soon
[05:53:11] <zol> Anyone know if there are any up-to-date ncurses libs out there?
[05:53:13] <zeuxcg> I'm already down to 2.3s of compile time
[05:53:27] <zeuxcg> for 10 kb of code :(
[05:53:49] <zol> I mean.. I found https://github.com/drhodes/rust-ncurses which is 6 months old. If I start working on a new one/send him PRs, should I focus on master or 0.7 then?
[05:54:00] <strcat> master
[05:54:22] <zol> strcat: cool, thanks!
[05:54:30] <strcat> 0.7 was a time-based tag on master, doesn't actually get any support
[05:54:37] *** Joins: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com)
[05:56:21] <nsf> https://github.com/apribadi/rust-termbox/blob/master/termbox.rs
[05:56:26] <nsf> hehe, was looking at the code
[05:56:35] <nsf> rust has changed a lot in the past year
[05:57:55] <strcat> there's actually solid terminfo support in libextra now
[05:58:15] <nsf> zol: try termbox instead if you'll work on ncurses bindings anyway
[05:58:34] <nsf> strcat: terminfo support is available in the latest termbox as well
[05:58:42] <nsf> in both C and Go versions
[05:59:44] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[06:00:18] <nsf> zol: https://github.com/nsf/termbox sure it doesn't have all the features of curses, but if you don't need 256 colors it'll work just fine
[06:00:52] *** Quits: jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: zzz)
[06:00:58] *** Quits: kertap (kertap@moz-8FBDEFD1.b-ras3.mvw.galway.eircom.net) (Quit: kertap)
[06:03:38] <zol> nsf: it's the 256 colours I want :(
[06:03:57] <zol> nsf: thanks for mentioning it though!
[06:04:15] <aatch> I know I'm a little late, but trait objects don't implement themselves because there are all sorts of odd edge cases, especially when you start thinking about built-in traits like Send.
[06:04:32] <nsf> aatch: I see
[06:05:08] <nsf> in that case being able to implement a trait for itself in one line seems like a reasonable solution
[06:05:28] <aatch> If trait objects implemented themselves, then for `trait Foo : Send { }`, `@Foo` would implement Foo, but not send (because it's not sendable) but that means it _doesn't_ implement Foo (because it doesn't implement all the supertraits)
[06:05:58] *** Quits: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com) (Ping timeout)
[06:06:01] <aatch> nsf, possibly, yes. Yes explaining why there isn't a default impl for them.
[06:07:27] <nsf> I understand, I understand, language design is full of edge cases and tradeoffs, I'm not sure I want to understand exactly the reasons, but if there are ones, I believe you they are good enough reasons :)
[06:07:36] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[06:07:36] *** Joins: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com)
[06:08:07] *** Joins: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP)
[06:08:23] <aatch> nsf, thank you, many people tend to flail along the same path until they reach the same point as everybody else.
[06:09:57] <aatch> And more often that not, the reason is actually pretty much some variation of "Well we had to pick one, so we picked this one" or "The behaviour was confusing so we removed it"
[06:10:17] <nsf> yes, I know what you mean :)
[06:11:20] <aatch> nsf, the most frustrating cases are where the regular contributors like me only have a vague understanding of the reasons, so we end up having to effectively appeal to authority (normally nmatsakis or pcwalton).
[06:11:48] *** Joins: fabiand (fabiand@moz-9738CF3A.adsl.alicedsl.de)
[06:12:17] *** Quits: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP) (Ping timeout)
[06:12:26] <strcat> other than closures, the language is pretty solid now
[06:12:32] <nsf> well, in some cases it's good to know why the language design went that way and not the other 
[06:12:50] <nsf> but honestly it's a documentation problem, things like that should be documented
[06:12:50] <sfackler> aatch: pong from like 4 days ago
[06:12:58] <aatch> sfackler, oh right, yes.
[06:13:22] <aatch> sfackler, your postgres bindings, how would you like some help?
[06:13:31] <nsf> they seem irrelevant to ordinary language users, but it's not quite true, knowing reasoning behind the decisions helps understanding the language
[06:13:38] <sfackler> i'm actually rewriting them right now natively
[06:13:50] <sfackler> if you wanted to help with that
[06:13:51] <aatch> sfackler, natively? As in raw protocol?
[06:13:54] <nsf> and well, in rust case documentation isn't good anyway, and stuff in development
[06:13:55] <sfackler> yeah
[06:14:07] <nsf> is in*
[06:14:10] <sfackler> https://github.com/sfackler/rust-postgres/tree/native
[06:14:10] <aatch> sfackler, well not quite what I was expecting, but sure.
[06:14:38] <sfackler> thanks!
[06:14:40] <aatch> sfackler, I have a fair bit of experience with postgres, I wrote bindings for HipHop PHP.
[06:14:53] <sfackler> most of the functionality is fleshed out, but error handling is a mess
[06:15:37] *** Joins: sonwow (sonwow@5AB4884B.FCC4549.14D5B978.IP)
[06:17:19] <sfackler> it'd also be nice to support GSSAPI authentication if you wanted to tackle that nightmare D:
[06:18:04] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[06:19:44] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[06:19:51] *** Quits: goffrie (goffrie@moz-AC16A972.dsl.ncf.ca) (Ping timeout)
[06:20:26] *** Quits: sonwow (sonwow@5AB4884B.FCC4549.14D5B978.IP) (Quit: leaving)
[06:25:10] <aatch> sfackler, well I'll have to familiarise myself with the protocol first.
[06:29:37] <sfackler> it's actually decently reasonable http://www.postgresql.org/docs/9.2/static/protocol-flow.html
[06:30:12] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[06:31:43] <sfackler> except for some terrifying phrases like "MD5-encrypted password"
[06:34:18] <tiffany> what happens when you return; from within a closure in a for loop? does it act like break, like continue, or does it cause the parent function to exit?
[06:35:44] <strcat> for loops aren't closures anymore
[06:36:17] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[06:36:17] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/sg4DjQ
[06:36:17] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[06:36:31] <strcat> it used to act like break + manually managing a mutable Option<ReturnType>
[06:36:49] <strcat> now they aren't closures so it just returns.
[06:37:02] <tiffany> it changed between .7 and master?
[06:37:13] <strcat> yes
[06:37:15] <aatch> sfackler, well I think that conditions are a good fit for the kind of errors you get in postgres.
[06:37:38] <strcat> 0.7 was 90% of the way to using iterators, master is all the way there
[06:38:03] <strcat> rusti: for x in range(0, 3) { printfln!("%d", x) }
[06:38:05] -rusti- 0
[06:38:05] -rusti- 1
[06:38:05] -rusti- 2
[06:38:05] -rusti- ()
[06:38:12] <strcat> rusti: for x in range(0, 3).skip(1).map(|x| x * 2) { printfln!("%d", x) }
[06:38:14] -rusti- 2
[06:38:14] -rusti- 4
[06:38:14] -rusti- ()
[06:38:38] *** Joins: ChrisMorgan (chris@moz-3959240D.its.monash.edu.au)
[06:39:35] <sfackler> I was thinking about conditions, but they fit in kind of awkwardly for most error cases. The rt::io package has the same issue, where it has to use a combination of contitions and returning Option
[06:39:55] *** Quits: cubic_ (cubic@moz-FE5AD6C7.mc.videotron.ca) (Connection reset by peer)
[06:40:19] *** Quits: ChrisMorgan (chris@moz-3959240D.its.monash.edu.au) (Ping timeout)
[06:40:23] <sfackler> conditions make sense for connect for things like a missing password or username, but there's not a great fit for things like SQL syntax errors
[06:40:30] <tiffany> is there a function like fn<T,U> all_or_none(&fn(T)->Option<U>, ~[T]) -> Option<~[U]>?
[06:40:31] *** Quits: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com) (Quit: Leaving.)
[06:40:41] <strcat> tiffany: iterators have an `all` adaptor
[06:41:03] <strcat> rusti: let xs = [1, 3, 5, 7]; xs.iter().any(|&x| x & 1 == 0)
[06:41:04] -rusti- false
[06:41:13] <strcat> rusti: let xs = [1, 3, 5, 7]; xs.iter().any(|&x| x & 1 != 0)
[06:41:14] -rusti- true
[06:41:16] <strcat> rusti: let xs = [1, 3, 5, 7]; xs.iter().all(|&x| x & 1 != 0)
[06:41:18] -rusti- true
[06:41:37] <strcat> or did you mean something else?
[06:41:41] * strcat shrugs
[06:41:54] <strcat> Option has chain (bind), map, etc.
[06:41:59] <tiffany> I mean like, if one of them returns None, it returns None, but if they all return something, it returns an array of those things
[06:42:09] <sfackler> right now I'm leaning towards pairs of functions like try_prepare and prepare where try_prepare returns a Result and prepare is a convenience wrapper that unwraps the result of try_prepare
[06:42:17] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[06:42:28] <strcat> tiffany: well you could use filter_map/filter
[06:42:28] <sfackler> so the common case of not caring about syntax errors is not super painful
[06:42:36] <aatch> sfackler, that works.
[06:44:54] <aatch> sfackler, anything other than GSS auth?
[06:45:31] *** Quits: bjz (brendanzab@AE0B7388.B8C2BBC3.F4A11E52.IP) (Quit: Leaving...)
[06:45:47] <sfackler> some unified way of handling NoticeResponses for one
[06:45:59] <sfackler> i'm filing bugs right now so I don't forget anything
[06:46:08] <strcat> rusti: let xs = ~[Some(5), Some(10), None, Some(2)]; xs.move_iter().filter_map(|x| x).to_owned_vec()
[06:46:10] -rusti- ~[5, 10, 2]
[06:46:11] <sfackler> more impls of FromSql and ToSql
[06:46:16] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[06:46:18] <strcat> tiffany: that's sort of it
[06:46:31] *** Joins: bjz (brendanzab@AE0B7388.B8C2BBC3.F4A11E52.IP)
[06:46:49] <sfackler> potentially look into sending some parameter types in binary format instead of text to avoid doing a ton of ToStr calls on things like ints
[06:47:21] <aatch> sfackler, yeah, I was thinking about that too, seems like a bit of an anti-pattern as it is right now.
[06:47:56] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Ping timeout)
[06:48:40] <sfackler> the scary part about sending parameters in binary format is that the format is literally "whatever the backend implements it as". some of the documentation literally says to look at the source to figure out how to format stuff
[06:49:15] <aatch> sfackler, heh, well thats because you can implement your own data types.
[06:49:35] *** Quits: recrack (ymin@5AB4884B.FCC4549.14D5B978.IP) (Quit: leaving)
[06:49:46] *** Joins: recrack (ymin@5AB4884B.FCC4549.14D5B978.IP)
[06:50:00] <sfackler> yeah, that'd do it. It would be nice if they had well defined formats for all of the builtin types though
[06:51:58] *** flaper87|afk is now known as flaper87
[06:52:51] *** Quits: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com) (Ping timeout)
[06:55:35] *** Joins: goffrie (goffrie@moz-26934CA8.dsl.ncf.ca)
[06:59:22] <aatch> Goddamit, I updated from the wrong repo...
[07:01:08] <sfackler> hmmm
[07:01:21] <aatch> sfackler, didn't have extra::md5...
[07:01:40] <sfackler> so according to isrustfast yet, there haven't been any huge memory regressions, but i've started to oom compiling librustc
[07:03:29] <strcat> sfackler: do you have swap?
[07:03:31] <strcat> it uses more VM now
[07:03:47] <strcat> and the default linux overcommit ratio is too low for systems with no swap.
[07:04:06] <sfackler> could be that
[07:04:36] *** Quits: victorporof_ (victorporo@moz-18BD542A.pck.nerim.net) (Quit: victorporof_)
[07:06:51] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[07:08:23] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: sleep)
[07:09:39] *** Joins: leonvv (leonvv@moz-7D83A5F1.ip.telfort.nl)
[07:10:15] <zol> The emacs mode doesn't really indent rust code very well. :/
[07:11:25] <tiffany> are there any parser combinators for rust?
[07:11:29] <leonvv> Can anyone tell me what this error message means: "cannot borrow `(*self).buffer` as mutable because it is also borrowed as immutable" ?
[07:12:28] *** Quits: eskatrem (user@moz-D2023B8B.dyn.user.ono.com) (Client exited)
[07:15:19] <leonvv> I guess that's a no :)
[07:17:01] <sfackler> check out the borrowed pointer tutorial: http://static.rust-lang.org/doc/tutorial-borrowed-ptr.html
[07:17:18] <sfackler> it talks a bit about that kind of thing iirc
[07:18:21] <leonvv> Thanks sfackler, will give it a look
[07:18:24] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[07:19:20] *** Quits: tikue (quassel@moz-FEADCD38.hsd1.pa.comcast.net) (Connection reset by peer)
[07:19:53] *** Quits: dwhyte (dwhyte@1922756A.EDC594B0.7BF4A4B0.IP) (Client exited)
[07:20:04] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[07:20:21] <zol> You can create lambdas/closures in rust?
[07:20:29] <sfackler> zol: yeah
[07:20:44] <sfackler> rusti: let f = |x| {x + 1}; f(1)
[07:20:45] -rusti- <anon>:5:22: 5:23 error: the type of this value must be known in this context
[07:20:45] -rusti- <anon>:5          let f = |x| {x + 1}; f(1)
[07:20:45] -rusti-                                ^
[07:20:45] -rusti- error: aborting due to previous error
[07:20:46] -rusti- application terminated with error code 101
[07:20:50] <sfackler> rusti: let f = |x: int| {x + 1}; f(1)
[07:20:51] -rusti- 2
[07:21:06] <zol> sfackler: thanks!
[07:23:14] *** Quits: eatkinson (eatkinson@moz-6C08E02F.dsl.bell.ca) (Quit: eatkinson)
[07:27:33] *** Joins: victorporof (victorporo@DA4ABEAF.1DE10CA8.D8E68FF6.IP)
[07:27:58] *** Joins: victorporof_ (victorporo@87C1F78E.1DE10CA8.D8E68FF6.IP)
[07:28:27] *** Joins: ofeldt- (ofeldt@moz-2353770A.dip0.t-ipconnect.de)
[07:28:36] *** Quits: ofeldt (ofeldt@moz-42E43ACE.dip0.t-ipconnect.de) (Ping timeout)
[07:29:17] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[07:29:24] *** Quits: victorporof (victorporo@DA4ABEAF.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[07:29:27] *** Joins: threecreepio (jdp@moz-71E164C9.cust.bredbandsbolaget.se)
[07:29:29] <aatch> Does unwinding work in the new runtime at all?
[07:32:24] <sfackler> not sure about windows, but it does on linux
[07:33:30] <aatch> ok, well it doesn't seem to handle recovery very well. Some of the tests failed in postgres and I got some very strange error messages.
[07:33:36] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[07:34:16] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[07:35:08] <zol> http://hastebin.com/bicelutopi.rust -- my first rust code!
[07:36:17] <sfackler> if a Drop impl fails, the runtime prints some stuff from Lovecraft (?) and aborts, if that's what you mean
[07:37:11] <sfackler> aatch: try pulling. I had a fix for that and forgot to push it
[07:37:36] <sfackler> if you want to run the tests, you'll have to manually configure your postgres to add some users with different authentication types :(
[07:38:34] <aatch> sfackler, I'm ok with ignoring the failed tests for the moment.
[07:39:42] *** Joins: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com)
[07:39:45] *** Joins: squiddy (squiddy@moz-1E33BBE6.adsl.alicedsl.de)
[07:40:24] <aatch> sfackler, also, it looks like ifmt has been changed to format in the latest master.
[07:40:25] *** Joins: mindcat (mindcat@FEE528CF.DE7505BB.291A146C.IP)
[07:40:25] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[07:40:46] <sfackler> oh yeah
[07:41:37] <mindcat> rusti: "I can't download build rust need snapshot. Not really."
[07:41:38] -rusti- "I can\'t download build rust need snapshot. Not really."
[07:41:46] *** Quits: threecreepio (jdp@moz-71E164C9.cust.bredbandsbolaget.se) (Quit: threecreepio)
[07:42:02] * sfackler -> sleep
[07:42:19] <mindcat> rusti: "but sometimes is true."
[07:42:20] -rusti- "but sometimes is true."
[07:43:16] <mindcat> so why we need snapshot to build rust?
[07:43:49] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Quit: Konversation terminated!)
[07:43:56] *** Joins: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP)
[07:44:00] <aatch> mindcat, because it's a self-hosting compiler. You need a rust compiler in order to build the rust compiler.
[07:44:51] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[07:44:59] <tiffany> I seem to have crashed rustc
[07:45:31] *** Joins: z0w0 (zack@moz-7E6DC3A.lnse2.woo.bigpond.net.au)
[07:46:24] <klutzy> tiffany: https://github.com/mozilla/rust/issues/8752 this?
[07:46:27] <mindcat> aatch: so we can't build "rust compiler".
[07:46:49] <mindcat> aatch: without "rust compiler".
[07:46:51] <tiffany> wasn't a segfault
[07:47:04] <tiffany> I'm going to try running on git master before submitting the issue
[07:47:17] <klutzy> uhuh
[07:49:32] *** Quits: bblum (bblum@moz-2B41ACB5.andrew.cmu.edu) (Ping timeout)
[07:49:36] *** Quits: rpearl (rpearl@moz-2B41ACB5.andrew.cmu.edu) (Ping timeout)
[07:49:46] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[07:51:16] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[07:51:16] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/oh71ng
[07:51:16] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[07:51:17] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[07:51:17] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/y_-FYA
[07:51:17] <ghrust> 13rust/06auto 148722790 15Kevin Ballard: run: Process::new() should take &[Str] instead of &[~str] for args...
[07:51:17] <ghrust> 13rust/06auto 14fef178d 15bors: auto merge of #8203 : kballard/rust/process-new-args, r=pnkfelix...
[07:51:17] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[07:52:06] <mindcat> sometimes, I can't download snapshot, it tell me time out.
[07:53:07] <pnkfelix> mindcat: I think there is a configure switch to use a local download of the snapshot
[07:53:35] <pnkfelix> mindcat: so if you can download the snapshot once via some means that does not time out, then you could point your build at the local download
[07:54:20] <mindcat> pnkfelix: I don't have a server in home :D
[07:54:27] *** Joins: rpearl (rpearl@moz-2B41ACB5.andrew.cmu.edu)
[07:54:32] <pnkfelix> mindcat: I'm not talking about pointing it at a server
[07:54:37] <pnkfelix> mindcat: I'm talking about the local filesystem
[07:54:50] <mindcat> pnkfelix: Oh
[07:55:11] <pnkfelix> mindcat: You still of course need a download to get things started.  I'm reviewing the situation now.
[07:55:47] <mindcat> pnkfelix: ok
[07:56:08] <pnkfelix> mindcat: I think the relevant configure switches are --enable-local-rust and --local-rust-root=
[07:56:30] <klutzy> yes, two switches enable local rust
[07:56:55] <klutzy> but it does not work on windows because makefile finds "rustc", not "rustc.exe" :p
[07:57:25] <mindcat> klutzy: I don't play windows now :D
[07:57:32] <klutzy> then it's all ok :)
[07:57:32] <pnkfelix> klutzy: Ooh.  Is there already an issue filed for that?
[07:57:57] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[07:58:01] <klutzy> pnkfelix: I didn't checked at the time. I have to check now!
[07:58:45] *** Joins: bblum (bblum@moz-2B41ACB5.andrew.cmu.edu)
[07:58:46] <klutzy> pnkfelix: https://github.com/mozilla/rust/pull/2184 the pr mentions, but no proper issue is tracked
[07:59:08] <klutzy> I'll file a bug
[07:59:56] *** Joins: squiddy_ (squiddy@moz-E783773E.adsl.alicedsl.de)
[08:00:08] <pnkfelix> klutzy: Thanks.  I've been making baby-steps towards setting up a Windows environment for myself; a bug like this would provide some concrete motivation.
[08:00:46] <mindcat> Windows can do RAM Optimize with RAM Optimizer! :P
[08:00:54] *** Quits: squiddy (squiddy@moz-1E33BBE6.adsl.alicedsl.de) (Ping timeout)
[08:02:44] <mindcat> Windows kernel can stay swap pages :P
[08:03:57] <mindcat> I don't know Windows what's better now.
[08:04:20] <mindcat> XD
[08:04:35] <klutzy> pnkfelix: issued! https://github.com/mozilla/rust/issues/8756
[08:06:19] *** Joins: klapaucius (klapaucius@272B8F8B.5692770D.BB41F968.IP)
[08:06:27] *** Quits: klapaucius (klapaucius@272B8F8B.5692770D.BB41F968.IP) (Quit: klapaucius)
[08:06:30] *** Joins: klapaucius (klapaucius@272B8F8B.5692770D.BB41F968.IP)
[08:07:05] <Eridius> damn! The windows failures with my Process::new patch are still happening. What the heck is causing it? http://buildbot.rust-lang.org/builders/auto-win-32-nopt-t/builds/209/steps/compile/logs/stdio
[08:08:32] <klutzy> Eridius: seems like callconv difference?
[08:08:46] <Eridius> klutzy: none of my changes should have affected the presence or absence of those calls
[08:08:50] <Eridius> certainly not in libextra
[08:09:02] <leonvv> How can you cast an integer to a string?
[08:09:08] <Eridius> rusti: 3i.to_str()
[08:09:09] -rusti- ~"3"
[08:10:06] <mindcat> rusti: 3
[08:10:07] -rusti- 3
[08:10:15] <mindcat> rusti: &3
[08:10:19] <klutzy> Eridius: uh, then I'm lost. what's your pr url?
[08:10:24] -rusti- pastebinned 16 lines of output: http://ix.io/7zS
[08:10:35] <Eridius> https://github.com/mozilla/rust/pull/8203
[08:11:09] <mindcat> rusti: ~3
[08:11:10] -rusti- ~3
[08:11:17] <mindcat> rusti: @3
[08:11:18] -rusti- @3
[08:11:29] <leonvv> Eridius: Thanks, didn't expect the answer to be so easy
[08:12:00] <mindcat> rusti: 3.to_str()
[08:12:14] -rusti- pastebinned 35 lines of output: http://ix.io/7zT
[08:12:19] <mindcat> XD
[08:12:21] <Eridius> mindcat: it doesn't know which integral type you're trying to use
[08:12:36] <mindcat> Eridius: ok..
[08:12:51] <Eridius> that's why I used 3i in my example, that's explicitly typed as int
[08:13:45] <mindcat> Eridius: so I use "use str::int; int::from_str(3)" before.
[08:14:14] <Eridius> mindcat: that's converting in the other way
[08:14:37] <Eridius> rusti: use std::int; int::from_str("3")
[08:14:38] -rusti- Some(3)
[08:14:59] <Eridius> rusti: std::from_str::FromStr::from_str::<int>("3")
[08:15:00] -rusti- Some(3)
[08:15:46] *** Joins: robertknight (robertknig@moz-5D8FBA98.range81-151.btcentralplus.com)
[08:16:08] <mindcat> rusti: EOL
[08:16:09] -rusti- <anon>:5:9: 5:12 error: unresolved name `EOL`.
[08:16:09] -rusti- <anon>:5          EOL
[08:16:09] -rusti-                   ^~~
[08:16:09] -rusti- error: aborting due to previous error
[08:16:09] -rusti- application terminated with error code 101
[08:16:37] <mindcat> rusti: EOF
[08:16:38] -rusti- <anon>:5:9: 5:12 error: unresolved name `EOF`.
[08:16:38] -rusti- <anon>:5          EOF
[08:16:38] -rusti-                   ^~~
[08:16:38] -rusti- error: aborting due to previous error
[08:16:38] -rusti- application terminated with error code 101
[08:17:12] <Eridius> rusti: static slash: u8 = '/' as u8; [[1u8, 2], [3, 4], [5, 6]].connect_vec(&slash)
[08:17:13] -rusti- <anon>:5:39: 6:5 error: type `[[u8, .. 2], .. 3]` does not implement any method in scope named `connect_vec`
[08:17:13] -rusti- <anon>:5          static slash: u8 = '/' as u8; [[1u8, 2], [3, 4], [5, 6]].connect_vec(&slash)
[08:17:13] -rusti- <anon>:6     };
[08:17:13] -rusti- error: aborting due to previous error
[08:17:14] -rusti- application terminated with error code 101
[08:17:14] *** Quits: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com) (Quit: Leaving.)
[08:17:31] <Eridius> rusti: use std::vec::VectorVector; static slash: u8 = '/' as u8; [[1u8, 2], [3, 4], [5, 6]].connect_vec(&slash)
[08:17:32] -rusti- <anon>:5:67: 6:5 error: type `[[u8, .. 2], .. 3]` does not implement any method in scope named `connect_vec`
[08:17:32] -rusti- <anon>:5          use std::vec::VectorVector; static slash: u8 = '/' as u8; [[1u8, 2], [3, 4], [5, 6]].connect_vec(&slash)
[08:17:32] -rusti- <anon>:6     };
[08:17:32] -rusti- error: aborting due to previous error
[08:17:33] -rusti- application terminated with error code 101
[08:17:40] <Eridius> rusti: use std::vec::VectorVector; static slash: u8 = '/' as u8; (~[[1u8, 2], [3, 4], [5, 6]]).connect_vec(&slash)
[08:17:40] -rusti- <anon>:5:67: 6:5 error: type `~[[u8, .. 2]]` does not implement any method in scope named `connect_vec`
[08:17:40] -rusti- <anon>:5          use std::vec::VectorVector; static slash: u8 = '/' as u8; (~[[1u8, 2], [3, 4], [5, 6]]).connect_vec(&slash)
[08:17:41] -rusti- <anon>:6     };
[08:17:42] -rusti- error: aborting due to previous error
[08:17:44] -rusti- application terminated with error code 101
[08:17:49] <Eridius> rusti: use std::vec::VectorVector; static slash: u8 = '/' as u8; (~[&[1u8, 2], [3, 4], [5, 6]]).connect_vec(&slash)
[08:17:52] -rusti- pastebinned 8 lines of output: http://ix.io/7zZ
[08:18:02] <Eridius> rusti: use std::vec::VectorVector; static slash: u8 = '/' as u8; (~[&[1u8, 2], &[3, 4], &[5, 6]]).connect_vec(&slash)
[08:18:03] -rusti- ~[1, 2, 47, 3, 4, 47, 5, 6]
[08:18:44] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[08:19:13] <pnkfelix> mindcat: ping
[08:19:27] <mindcat> pnkfelix: ping?
[08:19:46] <pnkfelix> mindcat: Do you need assistance figuring out how to download a local copy of the snapshot?  Or do you already have one handy?
[08:20:24] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[08:20:26] <mindcat> pnkfelix: well, I am compiling now
[08:20:57] <pnkfelix> mindcat: Okay, then I'll take that as a "no,. I do not want to work on getting a local snapshot now."
[08:21:36] <mindcat> pnkfelix: I can do it for my...
[08:21:49] <pnkfelix> mindcat: But just so you are aware: The downloaded snapshots should be in a directory named "d/" in your build tree.
[08:22:06] <pnkfelix> mindcat: Argh. "dl/", not what I said above.
[08:22:25] <mindcat> pnkfelix: oh, something wrong happened. I need check it
[08:22:48] <heftig> rusti: range(0,31).map(|i| {i.population_count()}).to_owned_vec()
[08:22:49] -rusti- ~[0, 1, 1, 2, 1, 2, 2, 3, 1, 2, 2, 3, 2, 3, 3, 4, 1, 2, 2, 3, 2, 3, 3, 4, 2, 3, 3, 4, 3, 4, 4]
[08:23:10] <Eridius> heftig: you don't need the {} on that closure
[08:23:15] <pnkfelix> mindcat: Anyway, assuming your last download finished successfully, you can make copies of the .tar.gz 's that are in "dl/", put them somewhere else outside your build tree, and then, do a build pointing at the local copy via the â€”enable-local-rust stuff we previously discussed.
[08:23:18] <heftig> rusti: range(0,31).map(|i|i.population_count()).to_owned_vec()
[08:23:19] -rusti- ~[0, 1, 1, 2, 1, 2, 2, 3, 1, 2, 2, 3, 2, 3, 3, 4, 1, 2, 2, 3, 2, 3, 3, 4, 2, 3, 3, 4, 3, 4, 4]
[08:23:49] <dbaupp> rusti: range(0,32).map(|i|i.population_count()).to_owned_vec()
[08:23:50] -rusti- ~[0, 1, 1, 2, 1, 2, 2, 3, 1, 2, 2, 3, 2, 3, 3, 4, 1, 2, 2, 3, 2, 3, 3, 4, 2, 3, 3, 4, 3, 4, 4, 5]
[08:24:32] <zol> I have an enum, but how do I select one of the elements? Like.. enum Direction {N,E,S,W}, Direction.N ?
[08:24:38] <mindcat> pnkfelix: I just completed rust compile
[08:24:39] <heftig> just N
[08:25:06] *** Joins: Ms2ger (Ms2ger@moz-549ABB0C.adsl-dyn.isp.belgacom.be)
[08:25:36] <zol> heftig: cool, thanks!
[08:25:46] *** Joins: sebcrozet (sebcrozet@moz-F96421F3.w80-13.abo.wanadoo.fr)
[08:26:02] <heftig> zol: so I suggest actually naming it North, for clarity
[08:26:30] <zol> heftig: I did, saved some space in my question however. :)
[08:34:00] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[08:37:03] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Connection reset by peer)
[08:39:46] <Eridius> what the hell? I have a function which returns Some(~[&[46]]), and the immediate caller receives Some(~[&[0]])
[08:40:28] *** Quits: sebcrozet (sebcrozet@moz-F96421F3.w80-13.abo.wanadoo.fr) (Ping timeout)
[08:40:43] <Eridius> I have a sneaking suspicion that bytes!() returns a stack value, with a 'static lifetime
[08:40:45] <engla> is the &[46] slice stored in a static?
[08:40:50] <Eridius> engla: it's the result of bytes!(".")
[08:41:40] <Eridius> rusti: fn foo() -> &[u8] { bytes!(".") } printfln!(foo())
[08:41:41] -rusti- &[0]
[08:41:41] -rusti- ()
[08:41:42] <dbaupp> Eridius: iirc, this is a know issue
[08:41:45] <dbaupp> *known
[08:41:51] <engla> rusti: fn test() -> &'static [u8] { bytes!(".") }   test()
[08:41:52] -rusti- &[0]
[08:41:53] <Eridius> sure wish I knew about this earlier
[08:41:55] <engla> :-(
[08:42:01] <Eridius> is there an issue for it?
[08:42:06] <klutzy> Eridius: I cherry-picked your patch then ran make. it's not done yet, but it passes stage1/bin/extra.dll where your pr got failed
[08:42:09] *** Joins: tikue (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[08:42:19] <dbaupp> rusti: fn test() &'static [~int] { &'static [~1] } test()
[08:42:19] -rusti- <anon>:5:19: 5:20 error: expected `{` but found `&`
[08:42:20] -rusti- <anon>:5          fn test() &'static [~int] { &'static [~1] } test()
[08:42:20] -rusti-                             ^
[08:42:20] -rusti- application terminated with error code 101
[08:42:23] <Eridius> klutzy: curious
[08:42:27] <dbaupp> rusti: fn test() -> &'static [~int] { &'static [~1] } test()
[08:42:27] -rusti- &[~140595114905584]
[08:42:30] <engla> rusti: fn test() -> &'static [u8] { &[46u8] }   test()
[08:42:30] *** Parts: z0w0 (zack@moz-7E6DC3A.lnse2.woo.bigpond.net.au) ()
[08:42:30] -rusti- &[0]
[08:42:42] <Eridius> dbaupp: whoa
[08:42:42] * dbaupp is surprised that didn't segfault
[08:42:48] <dbaupp> rusti: fn test() -> &'static [~int] { &'static [~9] } test()
[08:42:49] -rusti- &[~139752210796528]
[08:42:54] <Eridius> dbaupp: why is it doing that?
[08:42:55] <dbaupp> rusti: fn test() -> &'static [~int] { &[~9] } test()
[08:42:56] -rusti- &[~139842853900272]
[08:42:59] * dbaupp has nfi
[08:43:03] <engla> hehe cool
[08:43:10] <Eridius> dbaupp: any idea what to search for in the issues?
[08:43:48] <Eridius> rusti: fn foo() -> &[u8] { &'static [46] }; foo()
[08:43:48] -rusti- &[0]
[08:43:55] <dbaupp> Eridius: dunno; I'm looking now
[08:44:03] *** Joins: sebcrozet (sebcrozet@moz-D8879CC3.w80-13.abo.wanadoo.fr)
[08:44:08] <dbaupp> https://github.com/mozilla/rust/issues/5688 is similar, but hard to tell if it's the same
[08:44:11] <Eridius> well this is going to be annoying. I suppose I need to make statics for the 3 different slices I'll need to deal with
[08:44:20] <dbaupp> wait; that's apparently fixed
[08:44:35] <Eridius> still open
[08:44:36] <engla> this is a bad bug, much worse than just bytes! being broken
[08:44:45] <dbaupp> Eridius: tagged needstest
[08:45:07] <dbaupp> I *do* remember seeing a bug about this; no idea how to find it thoguh
[08:46:59] <Eridius> rusti: fn foo() -> &[u8] { &[46] } foo()
[08:47:00] -rusti- &[0]
[08:47:02] <Eridius> doens't even need the 'static
[08:47:13] *** Quits: tikue (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Ping timeout)
[08:47:13] <engla> the return type is implicitly &'static
[08:47:26] <engla> it's the only lifetime fitting
[08:47:28] <dbaupp> that's just because 'static is the super region of every region, so &'static satisfies &[u8]
[08:47:31] <Eridius> ok
[08:48:16] <Eridius> dbaupp: remind me who you are on GitHub?
[08:48:20] <dbaupp> https://github.com/mozilla/rust/issues/3243
[08:48:20] <dbaupp> huonw
[08:48:54] <Eridius> thanks for the issue. I was just in the process of writing a new one because I couldn't find it
[08:49:57] * dbaupp ended up just trawling through the search results for "static"
[08:50:48] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[08:51:02] <engla> dbaupp: I'm benchmarking the charsplititerator changes. it can be quite confusing
[08:51:28] <engla> since sometimes it's just about how the optimizer settles, things that shouldn't have an effect do
[08:51:52] <engla> but at least your hunch was right, the byte loop does slow down by 2x by being split like that (while the other loop doesn't)
[08:52:01] <engla> s/loop/iterator/
[08:53:08] <dbaupp> does x.matches(b as char) && b < 128 have the same effect?
[08:53:22] <Eridius> rusti: static foo: &'static [u8] = &'static ['.' as u8]; foo
[08:53:23] -rusti- &[46]
[08:53:23] <dbaupp> (also, it wasn't a hunch; I'd benchmarked the same thing :P )
[08:53:50] <engla> dbaupp: switching the order of b < 128 is a minor difference
[08:53:53] *** Quits: sebcrozet (sebcrozet@moz-D8879CC3.w80-13.abo.wanadoo.fr) (Client exited)
[08:53:58] <dbaupp> I do agree that it's a safety hole, though, so it needs to be checked at some point.
[08:54:15] <dbaupp> minor difference compared to unchecked or compared to b < 128 && matches()?
[08:54:26] <engla> unchecked?
[08:54:35] <engla> minor difference to both
[08:55:07] *** Joins: sebcrozet (sebcrozet@moz-7FB6C00B.w193-252.abo.wanadoo.fr)
[08:55:14] <engla> the big difference is the branch on the ascii/not ascii case inside the loop
[08:56:31] <engla> dbaupp: I'll give you the data later :)  this is the benchmark notes. https://gist.github.com/anonymous/4247688e612020fd0637
[08:56:32] <dbaupp> oh, I see; you're talking about the choosing which iterator to use step?
[08:56:41] <engla> yes
[08:56:49] <engla> that's the "for loop" notes
[08:56:50] * dbaupp is good at misunderstanding people
[08:57:01] <engla> that was your hunch, right
[08:57:04] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[08:57:08] <engla> the choosing the iterator thing
[08:57:08] <engla> hehe
[08:57:34] <engla> anyway, benchmarking all the different CharEq impls is just confusing
[08:57:50] <engla> they perform so differently just because of how they inline or something like that
[08:58:09] <dbaupp> it's *really* weird that the extern one is slower than the closure one
[08:58:14] *** Quits: sebcrozet (sebcrozet@moz-7FB6C00B.w193-252.abo.wanadoo.fr) (Ping timeout)
[08:58:17] <dbaupp> but I guess it's just an inlining thing
[08:58:30] <dbaupp> what happens with #[inline(always)] for an extern fn?
[08:58:31] <engla> right, I didn't annotate the extern fn with #[inline]
[08:58:43] <engla> I realized now, I can try that.. mostly for curiosity
[08:58:58] <Eridius> woohoo, my path tests now pass! Now I just need to add a second set that tests bytes directly instead of going through the str functions
[08:59:13] <Eridius> if anyone is curious, my work is on my repo at https://github.com/kballard/rust/commits/path-rewrite. I'm going to bed.
[08:59:16] <dbaupp> engla: I wasn't sure that non-capturing closures were returnable when I wrote that, so you can probably remove the extern fn one
[08:59:26] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[09:00:02] <engla> right, they are returnable. but the extern fn case is Clone able
[09:00:15] <dbaupp> ah
[09:00:18] <dbaupp> so that is useful
[09:00:21] *** Quits: ross (ross@moz-8A84103E.br.br.cox.net) (Quit: )
[09:00:23] <engla> it's a confusing web right now, maybe not design for that confusion? hehe
[09:00:24] *** Joins: sebcrozet (sebcrozet@moz-87D51607.w80-13.abo.wanadoo.fr)
[09:00:25] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[09:00:44] * dbaupp loves confusion
[09:01:00] <dbaupp> what's the "replace byte < 128 check with assert" change?
[09:01:39] <engla> it's like this:   if self.sep.matches(byte as char) {  assert!(byte < 128u8, "CharEq::only_ascii violated");
[09:01:44] <engla> and it's the best performing version
[09:01:52] <dbaupp> also, it's weird that it's apparently faster than removing it entirely
[09:01:53] <dbaupp> yeah
[09:01:59] *** Quits: veddan (viktor@moz-C79BC80B.csbnet.se) (Client exited)
[09:02:21] <dbaupp> (mod 6 is faster on average though, btw.)
[09:03:04] <dbaupp> what's https://gist.github.com/anonymous/4247688e612020fd0637#file-gistfile1-txt-L36 ?
[09:03:05] <engla> minor code changes anywhere can tip the results a bit
[09:03:08] <engla> so it's a bit bogus
[09:03:35] <engla> that's after a minor change to mod 2 so it performed better
[09:03:39] <engla> that kind of change is just bogus
[09:03:43] <dbaupp> ah, I see
[09:03:51] <engla> just hilighting that the exact numbers or results dont' really matter
[09:04:15] <zol> What's the difference between the .rc and .rs extensions? 
[09:04:28] <dbaupp> engla: yeah, but the current PR is a little slow, we can tell that much. :)
[09:04:35] <dbaupp> zol: nothing; .rc is deprecated
[09:04:54] <dbaupp> it used to be treated as the top-level crate file, but now it's just legacy.
[09:05:14] <zol> dbaupp: thanks! 
[09:06:54] <dbaupp> engla: also, i found that certain configurations made distinguishing ascii_only much more valuable than not, which your benchmarks don't seem to show.
[09:07:09] <dbaupp> (something like splitting a very long string on ascii vs not.)
[09:07:43] <engla> my benchmarks 1-5 split on the same string
[09:07:45] *** Quits: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP) (Ping timeout)
[09:07:48] <engla> then the last 2 split on a unicode string
[09:08:01] <engla> and the later case shows a difference
[09:08:10] <leonvv> Is it possible to make a struct copyable?
[09:08:54] <engla> dbaupp: are you ready to see just how bogus microoptimization is?
[09:09:13] <engla> I present to you, just adding #[inline(always)] on the extern fn predicate, else everything is the same as mod 6
[09:09:18] <engla> https://gist.github.com/anonymous/69bebddee1c005dfbd17
[09:09:49] *** Joins: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP)
[09:09:59] <engla> closure case is faster too.. why?
[09:10:02] <engla> anyway
[09:10:49] *** Quits: leonvv (leonvv@moz-7D83A5F1.ip.telfort.nl) (Client exited)
[09:12:31] *** Quits: MrByte (MrByte@moz-147070D0.chy-wy.client.bresnan.net) (Connection reset by peer)
[09:12:35] *** Joins: MrByte (MrByte@moz-147070D0.chy-wy.client.bresnan.net)
[09:19:03] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[09:20:44] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[09:32:35] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[09:37:19] *** Quits: sebcrozet (sebcrozet@moz-87D51607.w80-13.abo.wanadoo.fr) (Client exited)
[09:38:51] *** Joins: sebcrozet (sebcrozet@moz-C27D92D8.w193-252.abo.wanadoo.fr)
[09:42:29] *** Joins: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP)
[09:45:07] <steven_is_false> Hi. I'm getting segfaults with Rust but I'm not sure if it's something dumb I've done or not.
[09:46:20] <steven_is_false> Tracing the problem with gdb apparently the dynamic libraries for it can't be found.
[09:46:35] <steven_is_false> Even though they exist in my directory ~/.local/lib
[09:49:12] *** Quits: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP) (Ping timeout)
[09:52:04] *** Joins: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP)
[09:53:32] *** Joins: jaen (jaen@moz-BFF8AF0D.neoplus.adsl.tpnet.pl)
[09:57:18] *** Quits: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP) (Ping timeout)
[09:57:42] <engla> dbaupp: updated PR
[10:01:20] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[10:01:20] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14fef178d to 14bdd188d: 02http://git.io/N3iJvQ
[10:01:20] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[10:01:20] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[10:01:21] <ghrust> 01[13rust01] 15bors pushed 6 new commits to 06auto: 02http://git.io/0BaR8Q
[10:01:21] <ghrust> 13rust/06auto 14ebfbbe2 15Felix S. Klock II: Port creader.rs from oldvisit to <V:Visitor> trait API.
[10:01:21] <ghrust> 13rust/06auto 14ec6ab8c 15Felix S. Klock II: Remove occurrences of `oldvisit` text to improve grepping for old oldvisit.
[10:01:21] <ghrust> 13rust/06auto 146af6b08 15Felix S. Klock II: Port middle/moves.rs from oldvisit to <V:Visitor> trait API.
[10:01:23] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[10:02:38] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[10:06:34] *** Quits: klapaucius (klapaucius@272B8F8B.5692770D.BB41F968.IP) (Quit: klapaucius)
[10:07:33] *** Joins: klapaucius (klapaucius@272B8F8B.5692770D.BB41F968.IP)
[10:08:52] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[10:12:58] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[10:15:41] *** Joins: steven_is_false (user@F511297F.DC0F4EDA.115CE8E4.IP)
[10:19:23] <zol> Anyone got the link to the nice html5 with fuzzy search documentation for rust?
[10:19:23] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[10:19:32] *** Joins: steven_i` (user@1E3F14AE.29819A33.115CE8E4.IP)
[10:19:44] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[10:20:19] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[10:20:26] *** Joins: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se)
[10:20:31] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[10:20:32] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Input/output error)
[10:20:35] *** Quits: flaper87 (flaper87@moz-107AD163.redhat.com) (Ping timeout)
[10:20:38] *** Quits: mmmonk (mmmonk@moz-F145F0FF.xlshosting.net) (Ping timeout)
[10:20:40] *** Quits: smvv (smvv@moz-A397289C.xlshosting.net) (Ping timeout)
[10:20:42] *** Quits: mixi (mixi@moz-DBD8904A.org) (Ping timeout)
[10:20:45] *** Quits: DasIch (dasich@moz-5EDA591.de) (Ping timeout)
[10:20:47] <zol> I'd like to get the system time somehow, so that I can keep track of how much time has passed - is there a built-in function for this? 
[10:20:55] *** Quits: steven_is_false (user@F511297F.DC0F4EDA.115CE8E4.IP) (Ping timeout)
[10:20:55] *** Joins: mixi (mixi@moz-DBD8904A.org)
[10:20:56] *** Quits: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se) (Input/output error)
[10:20:57] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Ping timeout)
[10:21:04] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[10:21:06] *** Quits: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP) (Ping timeout)
[10:21:09] *** Quits: kkris (kkris@moz-CB70009.yourvserver.net) (Ping timeout)
[10:21:11] *** Joins: kkris (kkris@moz-CB70009.yourvserver.net)
[10:21:18] *** Quits: ruediger (quassel@moz-C9B8D8D0.org) (Ping timeout)
[10:21:18] *** Joins: DasIch (dasich@moz-5EDA591.de)
[10:21:20] *** Joins: ruediger (quassel@moz-C9B8D8D0.org)
[10:21:22] *** Quits: pcdummy (pcdummy@moz-CF4CA865.page4me.ch) (Ping timeout)
[10:21:22] *** Joins: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP)
[10:21:23] *** Quits: patrickg (patrick@moz-35CE42C5.de) (Ping timeout)
[10:21:23] *** Joins: pcdummy (pcdummy@moz-CF4CA865.page4me.ch)
[10:21:26] *** Joins: patrickg (patrick@moz-35CE42C5.de)
[10:21:29] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[10:21:41] *** Joins: flaper87 (flaper87@moz-107AD163.redhat.com)
[10:21:43] *** Quits: steven_i` (user@1E3F14AE.29819A33.115CE8E4.IP) (Ping timeout)
[10:21:55] *** Joins: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se)
[10:24:06] <engla> zol: not sure if this is the newest URL for it
[10:24:07] <engla> http://seld.be/rustdoc/master/std/index.html
[10:24:13] <engla> it's not as up to date as the official docs
[10:24:52] <engla> (or maybe it is, today)
[10:24:59] <zol> engla: thanks!
[10:25:03] *** Joins: mmmonk (mmmonk@moz-F145F0FF.xlshosting.net)
[10:25:04] *** Joins: smvv (smvv@moz-A397289C.xlshosting.net)
[10:26:43] *** Quits: mmmonk (mmmonk@moz-F145F0FF.xlshosting.net) (Ping timeout)
[10:27:08] *** Joins: maik (maik___@moz-9B1CE5EB.dip0.t-ipconnect.de)
[10:34:44] <nmatsakis> h3r3tic: regarding the "system" ABI, I think extern "C stdcall" would do it
[10:39:21] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[10:40:16] *** Quits: robertknight (robertknig@moz-5D8FBA98.range81-151.btcentralplus.com) (Ping timeout)
[10:41:41] <zol> I don't really understand boxing. In C, you would specify that the variable is a pointer, in Rust, you specify that the value will be placed in a box?
[10:43:54] <zol> Aha, ok -- now I understand. The tutorial mentioned it further down.
[10:44:27] <engla> you can call ~T or @T either boxes or pointers
[10:45:57] *** Joins: mmmonk (mmmonk@moz-F145F0FF.xlshosting.net)
[10:47:37] <zol> engla: you mean that let p = @int, is a pointer to an int box?
[10:47:47] <zol> and that @5 is a box? 
[10:48:49] <engla> you can say that
[10:48:58] <zol> cool, ty!
[10:51:20] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[10:51:20] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 140d4f155 to 14bdd188d: 02http://git.io/N3iJvQ
[10:51:20] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[10:51:21] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[10:51:21] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/ZkhzIw
[10:51:21] <ghrust> 13rust/06auto 148ef8dd9 15Jed Davis: Make enum discriminants u64 instead of the host uint.
[10:51:21] <ghrust> 13rust/06auto 145f536ef 15Jed Davis: Don't truncate discriminants to host uint for C_uint's sake.
[10:51:22] <ghrust> 13rust/06auto 140db2b19 15Jed Davis: Add a test case for the preceding changes....
[10:51:24] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[10:51:59] *** Joins: steven_is_false (user@1E3F14AE.29819A33.115CE8E4.IP)
[10:52:42] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[10:53:22] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[10:54:49] *** Quits: recrack (ymin@5AB4884B.FCC4549.14D5B978.IP) (Quit: leaving)
[10:57:15] <mindcat> rusti: let é¾ = "é¾é¾é¾";é¾
[10:57:16] -rusti- "\u9f8d\u9f8d\u9f8d"
[10:58:11] <mindcat> rusti: let é¾ = "é¾é¾é¾";println(é¾);
[10:58:11] -rusti- é¾é¾é¾
[10:58:12] -rusti- ()
[10:59:02] *** Quits: Nisstyre (wes@moz-FD86289.netflash.net) (Quit: Leaving)
[10:59:46] * Ms2ger wonders if rustc requires utf-8
[11:02:19] <engla> probably
[11:02:50] <Ms2ger> Would be nice
[11:02:57] <mindcat> yea
[11:02:57] <engla> given that there is no other encoding support in libstd
[11:03:07] <engla> except utf-16 to some extent
[11:03:54] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[11:04:58] <zol> wow, streams/pipes are cool!
[11:07:12] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[11:07:43] * zol is working on a simple text/ncurses-based RPG simulation to learn Rust.
[11:07:59] <zol> With tasks I should be able to create output while still being able to handle input. 
[11:09:53] <bjz> maik: beep
[11:11:09] <steven_is_false> Hi. I'm making a new project. What should I name it?
[11:11:30] *** Joins: msingle (Thunderbir@DA5C57DC.AD7A4894.465000F8.IP)
[11:11:34] <steven_is_false> I was thinking it'd have something to do with lambda's or mathc.
[11:12:21] <engla> TWiR from yesterday http://cmr.github.io/blog/2013/08/25/this-week-in-rust/
[11:12:32] <engla> new file IO
[11:13:05] <steven_is_false> "TWiR from yesterday" doesn't seem like a good project name to me. Although something along those lines might be okay.
[11:13:07] <Ms2ger> Wow, negative issue churn
[11:13:15] * Ms2ger longs for that
[11:13:52] <engla> steven_is_false: I don't get it
[11:14:15] <steven_is_false> engla: I was being facetious
[11:16:02] <zol> I don't understand borrowed pointers. If you use them as an argument in a fn definition, sure. But not when you do let x = &30; -- could anyone explain? 
[11:16:24] <steven_is_false> Sure.
[11:16:36] <mindcat> rusti: @fn()
[11:16:36] -rusti- <anon>:5:9: 5:10 error: found `fn` in ident position
[11:16:36] -rusti- <anon>:5          @fn()
[11:16:37] -rusti-                   ^
[11:16:37] -rusti- error: aborting due to previous error
[11:16:37] -rusti- application terminated with error code 101
[11:16:46] <mindcat> rusti: @fn what ()
[11:16:47] <steven_is_false> let x = &30; is syntactic sugar for let y = 30; let x = &y;
[11:16:48] -rusti- pastebinned 7 lines of output: http://ix.io/7Af
[11:17:01] <steven_is_false> Where y is a new symbol.
[11:17:03] <darkf> can you cast an int to a C-like enum?
[11:17:11] <steven_is_false> I guess one could have a gensym!() macro for that.
[11:17:23] *** Joins: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com)
[11:17:26] *** Quits: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com) (Quit: kasey)
[11:17:28] <zol> steven_is_false: ooh! Smart. Thanks. :)
[11:17:44] <darkf> enum value rather (so enum K { A=1, B=2}; assert!(2 as K == B);)
[11:18:10] <cmr> ("value" is called the descriminant)
[11:18:10] <mindcat> rusti: assert!(1+1=2)
[11:18:11] -rusti- <std-macros>:84:15: 5:22 error: cannot apply unary operator `!` to type `()`
[11:18:11] -rusti- <std-macros>:82:4: 99:5 note: in expansion of assert!
[11:18:11] -rusti- <anon>:5:9: 6:5 note: expansion site
[11:18:11] -rusti- error: aborting due to previous error
[11:18:12] -rusti- application terminated with error code 101
[11:18:53] <cmr> darkf: no, you cannot do an `as` cast.
[11:19:01] <cmr> You can see how rust-zmq handles it safely: https://github.com/erickt/rust-zmq/blob/master/lib.rs#L114
[11:19:02] <darkf> cmr: can I do another kind of cast? :)
[11:19:05] <steven_is_false> I wonder if there's a gensym macro yet?
[11:19:10] <mindcat> rusti: let a = &~1;a
[11:19:12] -rusti- pastebinned 16 lines of output: http://ix.io/7Aj
[11:19:20] <darkf> well alright!
[11:19:43] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[11:20:11] <mindcat> I think this is rusti fault.
[11:20:46] <pnkfelix> mindcat: fyi, I do not know if you are just experimenting, or if you are generally trying to demonstrate something to the channel, but rusti does support private messages.
[11:20:47] <cmr> steven_is_false: https://github.com/mozilla/rust/pull/7745
[11:21:01] <pnkfelix> mindcat: (and then you get to talk directly to it)
[11:21:24] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[11:21:29] *** Quits: maik (maik___@moz-9B1CE5EB.dip0.t-ipconnect.de) (Ping timeout)
[11:21:38] <cmr> steven_is_false: I think there might be a macro for it from the PR
[11:21:40] <cmr> not positive
[11:22:25] <steven_is_false> Thanks for the start.
[11:22:36] *** Joins: Florob (Florob@moz-39532932.de)
[11:23:08] <dbaupp> engla: weird
[11:27:41] *** Joins: Guest_ (textual@moz-15DCD320.hfc.comcastbusiness.net)
[11:27:51] <engla> thanks for the comments dbaupp, indeed some strange misses there
[11:28:30] <dbaupp> engla: looks good other than the naming
[11:28:45] <dbaupp> engla: (the weird was about the benchmarks after the #[inline] addition, btw.
[11:28:46] <dbaupp> )
[11:28:58] <engla> oh that, yes
[11:31:41] <darkf> rusti: #[deriving(IterBytes)] enum K { A=1, B=2};
[11:31:42] -rusti- ()
[11:31:56] <dbaupp> darkf: deriving doesn't work in rusti, btw
[11:31:56] <engla> fixed by amending
[11:32:10] <darkf> ah err
[11:32:17] <dbaupp> https://github.com/mozilla/rust/issues/4913
[11:32:53] <darkf> well it fails with multiple candidates anyway
[11:33:22] <pnkfelix> Seldaek: what editor do you use?  Maybe it wouldn't be hard to plug in //! support ?
[11:33:32] <darkf> can I make it uthe iterbytes from uint or something?
[11:33:36] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[11:34:23] <darkf> use*
[11:34:28] <Seldaek> pnkfelix: well surely it's not impossible, but I'm curious why use this unfamiliar syntax ..
[11:34:40] <dbaupp> darkf: I'm not sure I understand the question?
[11:35:04] <dbaupp> darkf: (oh, did you skip a `se ` ?)
[11:35:21] <dbaupp> darkf: in any case, #[deriving(IterBytes)] should work
[11:35:34] <Seldaek> pnkfelix: but I use sublime text + docblockr which handles newlines in docblocks pretty well (except for /// which it continues as only //)
[11:35:42] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[11:35:47] <Seldaek> I'm sure it's an easy fix 
[11:35:48] <bjz> O_O
[11:35:58] <bjz> zsh: bus error  rustc cgmath.rs
[11:36:26] <dbaupp> darkf: woaaah, I just tried it
[11:36:27] * mindcat 0w0
[11:36:43] <darkf> dbaupp: indeed
[11:36:53] <darkf> whole slew of errors :\
[11:37:10] <dbaupp> darkf: ok, I got it to work with `enum Foo { A = 1u, B = 2u }
[11:37:11] <pnkfelix> Seldaek: Okay.  I've only played with Sublime Text a little but maybe I'll see if this can be fixed easily.
[11:37:19] <dbaupp> darkf: it's the same thing as:
[11:37:23] <dbaupp> rusti: 1.to_str()
[11:37:26] -rusti- pastebinned 35 lines of output: http://ix.io/7yB
[11:37:57] *** Joins: maik (maik___@moz-1318C3AE.dip0.t-ipconnect.de)
[11:37:59] <dbaupp> darkf: so the deriving syntax extension some interacts badly with the unsuffixed literals
[11:38:01] * dbaupp files a bug
[11:38:03] <bjz> zsh: segmentation fault  rustc cgmath.rs O_O
[11:38:05] <Seldaek> pnkfelix: well I'm not asking for someone to fix my problems :)
[11:38:10] <darkf> I hope we fix the error some day (maybe to something like "type too general" etc, and have suggestions)
[11:38:24] <pnkfelix> Seldaek: Its not just your problem.  Sublime Text is a popular editor.
[11:38:44] <darkf> dbaupp: oddly enough my output differs (I just get a bunch of "note: candidate #3 is `std::to_bytes::__extensions__::iter_bytes`")
[11:38:53] <pnkfelix> Seldaek: And its probably going to be easier to fix this than say, add Visual Studio support.  :)
[11:38:55] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[11:38:58] <Seldaek> pnkfelix: fair enough, but I'm looking into it quickly :)
[11:38:59] <darkf> or maybe that's just for derive
[11:39:53] <mitsuhiko> bjz: holy shit. 51MB for gl-rs? :D
[11:40:02] <dbaupp> darkf: well, the method is different?
[11:40:07] <bjz> mitsuhiko: 51mb?
[11:40:23] <mitsuhiko> bjz: i compiled it on lion and the dylib it spits out is 51mb
[11:40:27] <bjz> :O
[11:40:28] <dbaupp> rusti: 1.iter_bytes()
[11:40:32] -rusti- pastebinned 38 lines of output: http://ix.io/7Ao
[11:40:42] <bjz> mitsuhiko: optimised?
[11:41:00] *** Quits: maik (maik___@moz-1318C3AE.dip0.t-ipconnect.de) (Ping timeout)
[11:41:01] <mitsuhiko> --opt-level=3
[11:41:06] <bjz> :O
[11:41:10] <bjz> holy cow
[11:41:23] <bjz> mine is 8mb, and I thought it was bad
[11:41:33] <bjz> -_-
[11:41:37] <darkf> dbaupp: right, that - it's all std::to_bytes::..., they don't even give you a choice :)
[11:41:43] <mindcat> rusti: 1i.iter_bytes()
[11:41:44] -rusti- <anon>:5:9: 6:5 error: this function takes 2 parameters but 0 parameters were supplied
[11:41:44] -rusti- <anon>:5          1i.iter_bytes()
[11:41:44] -rusti- <anon>:6     };
[11:41:44] -rusti- error: aborting due to previous error
[11:41:44] -rusti- application terminated with error code 101
[11:41:50] <mitsuhiko> bjz: where does the size come from anyways? :)
[11:42:01] <dbaupp> darkf: https://github.com/mozilla/rust/issues/8760
[11:42:04] <bjz> mitsuhiko: h3r3tic says he has something that might reduce the size
[11:42:10] <mitsuhiko> i mean, there *are* 25000 symbols in there, but that can't be 51mb
[11:42:19] <bjz> mitsuhiko: no idea :(
[11:42:26] <darkf> dbaupp: thanks
[11:42:39] <bjz> mitsuhiko: rustc got confused?
[11:42:53] <dbaupp> rusti: enum Foo { A = 1i64, B = 1u8 }
[11:42:54] -rusti- <anon>:5:30: 5:37 error: discriminator value already exists
[11:42:54] -rusti- <anon>:5          enum Foo { A = 1i64, B = 1u8 }
[11:42:54] -rusti-                                        ^~~~~~~
[11:42:54] -rusti- error: aborting due to previous error
[11:42:54] -rusti- application terminated with error code 101
[11:42:59] <dbaupp> rusti: enum Foo { A = 1i64, B = 2u8 }
[11:43:00] -rusti- ()
[11:43:01] <Seldaek> anyone has a regex handy for rust identifiers?
[11:43:03] <mitsuhiko> bjz: well, aside from the size, pretty cool :)
[11:43:10] <bjz> mitsuhiko: I'm not surprised its confused
[11:43:13] <steven_is_false> Curse you internet cafe, and your blocked port 22!
[11:43:25] <dbaupp> Seldaek: \P{XID-Start}\P{XID-Continue}*
[11:43:29] <mitsuhiko> steven_is_false: that's why you run ssh on 443 :)
[11:43:40] <bjz> mitsuhiko: I make rust alternate between segfaults, bus errors and ICEs on a regular basis
[11:43:40] <dbaupp> Seldaek: i.e. unicode categories
[11:43:51] <bjz> mitsuhiko: *rustc
[11:44:00] <steven_is_false> mitsuhiko: And? Can you get Gitorious to do that?
[11:44:03] <Seldaek> dbaupp: hm ok.. not sure if that flies in python
[11:44:09] <steven_is_false> I suppose that's what a VPN is for though.
[11:44:18] <mindcat> steven_is_false: get a proxy now :D
[11:44:47] <mitsuhiko> steven_is_false: i run an ssh server that i can use as proxy for git
[11:44:48] <steven_is_false> Me â€”> Cafe â€“> Proxy â€“> Moon â€”> Gitorious 
[11:45:18] <bjz> mitsuhiko: what are you planning on using it for?
[11:45:20] <dbaupp> Seldaek: I'm not sure if python's built-in re supports unicode classes?
[11:45:25] <mitsuhiko> bjz: right now just playing
[11:45:38] <Seldaek> dbaupp: we'll see, probably doesn't matter..
[11:45:39] <bjz> mitsuhiko: sorry for the size :L
[11:45:42] <mitsuhiko> bjz: i would love to try a high level opengl binding at one point
[11:45:46] <mitsuhiko> but it's still too moving
[11:45:47] <dbaupp> darkf: if you didn't catch it, #[deriving(IterBytes)] enum Foo { A=1u, B=2u } seems to work
[11:46:00] <mindcat> pythoni: it is not here :(
[11:46:00] <bjz> mitsuhiko: we have a few people working on that stuff
[11:46:05] <mitsuhiko> and OpenGL's statemachine is still shitty :-/
[11:46:13] <steven_is_false> mitsuhiko: You could try taking a look at some of my work for inspiration if you like.
[11:46:20] <darkf> dbaupp: right :)
[11:46:23] <bjz> mitsuhiko: it's a nice way to test Rust's safety stuff
[11:46:47] <bjz> mitsuhiko: my possibly over-engineered shader thingy: https://gist.github.com/bjz/2eddf79971df6df87f8d
[11:47:23] <steven_is_false> So here's my wrapper http://gitorious.org/p-x/p-x/source/62080bd65c024933640119d18c2b61a433c79f61:src/core/engine/gl
[11:47:58] * mitsuhiko looks
[11:48:14] *** Joins: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP)
[11:48:38] <mitsuhiko> steven_is_false: i like your drops
[11:48:45] <mitsuhiko> and i mean that in a totally non dubstep kind of way
[11:48:52] <steven_is_false> :) "I like your drops"
[11:49:21] <steven_is_false> I use #[unsafe_destructor] too much for my liking.
[11:49:39] <mitsuhiko> the sending to the context though is pretty neat
[11:49:49] <steven_is_false> mitsuhiko: I took the idea from Chromium.
[11:49:58] <steven_is_false> Which has a multi-process model.
[11:50:17] <steven_is_false> I'm exploring the message passing idea even further in this Java program I'm writing.
[11:50:40] <mitsuhiko> bookmarked
[11:50:42] <mitsuhiko> will play with it :)
[11:50:45] <dbaupp> Seldaek: stack overflow seems to imply you'll need an external lib like `Ponyguruma` or `regex` if you want `\p{XID_Start}` etc
[11:50:57] <steven_is_false> I use a dynamic proxy class to automatically send method invocations to an actor (which is like a thread but lighter)
[11:51:16] <steven_is_false> I had to make a way for threads to be garbage collectable.
[11:51:20] <mitsuhiko> dbaupp: people use ponyguruma!?
[11:51:42] <bjz> yeah messaging to an opengl context is kinda cool
[11:51:51] <dbaupp> mitsuhiko: I dunno; but it was the highest voted answer on a question from 4 years ago
[11:52:00] * dbaupp hadn't even heard of it until just now
[11:52:03] <steven_is_false> So what I did is I made a scheduler that my actors send actions to to execute.
[11:52:23] <mitsuhiko> dbaupp: heh. i wrote that thing like 6 years ago or something and *never ever* use dit
[11:52:34] <steven_is_false> And I use waiters (basically oneshots in Rust) to make sure they execute in proper order.
[11:52:37] <dbaupp> mitsuhiko: http://stackoverflow.com/a/1836283/1256624 haha
[11:52:56] <Seldaek> dbaupp: thanks, but it seems I have bigger problems than the identifiers regex anyway ;)
[11:53:12] <dbaupp> Seldaek: well; you can at least get that down pat :P
[11:53:56] <mitsuhiko> steven_is_false: playing with the idea of doing a game that basically does double buffering for actors
[11:54:29] <mitsuhiko> i want to know if i can get the simulation run at a certain frequency and then lerp between two states to render at a different framerate
[11:54:37] <mitsuhiko> in a way that does not suck
[11:55:02] <steven_is_false> Borrow a technique from Shader math
[11:55:39] <steven_is_false> Pass in the surface normals which lerp well into the fragment shader instead of passing in the other data which doesn't lerp so well.
[11:55:45] <steven_is_false> Do that but for your use case.
[11:56:16] <steven_is_false> All though that might be too performance intensive so I don't know.
[11:57:10] <steven_is_false> I wonder if there's some mathematical abstraction which explains why surface normals lerp well but the calculated lighting doesn't.
[11:57:28] <steven_is_false> So one could have the compiler shout at you if you try to lerp stuff that won't lerp well.
[11:58:50] <steven_is_false> I was reading about the Bloom DSL where every operation has to be monotonic (and as a consequence sort of preserves data in a way.) Maybe a similar thing could be done for your case.
[11:59:26] <mitsuhiko> the things that don't lerp well you can still recalculate i suppose
[11:59:43] <steven_is_false> mitsuhiko: I did not think of that but that's a great idea.
[12:00:09] <steven_is_false> Have some actors which render at say 40 HZ, and some which render at 60 HZ.
[12:00:29] *** Joins: orshem (orshem@C5E06B1E.A5B6B765.E3D28531.IP)
[12:00:34] *** kimundi is now known as zz_kimundi
[12:00:48] <steven_is_false> Like the particle engine would fallback to rendering really slowly on a slow machine but the essentials would not fallback so quickly.
[12:00:52] *** Joins: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net)
[12:01:01] <mitsuhiko> cryengine does that
[12:01:11] <mitsuhiko> different parts of the physics simulations can run at different framerates
[12:01:20] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[12:01:20] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/ZkhzIw
[12:01:20] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[12:01:26] <mitsuhiko> so if your crazy barrel explosion is really crazy your character still moves normally
[12:01:34] <Seldaek> pnkfelix: ok I got a working patch I think, just to be sure //! style continues as //! on each line?
[12:02:37] <steven_is_false> How do they deal with the problem that different timesteps give different results for the integration. In general, Î£yÎ”x â‰  Î£yÎ”u
[12:02:42] <mindcat> http://paste.ubuntu.com/6028400/ :D
[12:02:57] <mindcat> rusti crashed
[12:03:22] <steven_is_false> rusti must of eaten too many botsnacks
[12:03:35] <steven_is_false> I meant have, sorry
[12:04:02] <steven_is_false> Thanks for the interesting conversation.
[12:04:23] <mindcat> I use master version
[12:04:32] *** Parts: orshem (orshem@C5E06B1E.A5B6B765.E3D28531.IP) (WeeChat 0.4.1)
[12:04:50] <cmr> mindcat: rusti is flakey
[12:04:54] <cmr> best to query rusti-the-bot.
[12:05:01] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[12:05:03] <pnkfelix> Seldaek: yeah.  At least according to ack -A 1 -B 1 '//!'
[12:06:17] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[12:06:17] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/fqTVVQ
[12:06:17] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[12:06:18] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[12:06:18] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/-V9bNg
[12:06:18] <ghrust> 13rust/06auto 14b59d503 15blake2-ppc: std::str: Double-ended CharSplitIterator...
[12:06:18] <ghrust> 13rust/06auto 14413f868 15blake2-ppc: std::str: bench tests for .split_iter()
[12:06:19] <ghrust> 13rust/06auto 144de9bca 15blake2-ppc: std::str: Tune CharSplitIterator after benchmarks...
[12:06:21] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[12:06:50] <dbaupp> steven_is_false: I would assume just by hoping the steps are small enough/using a more stable numerical integration technique
[12:07:59] *** Joins: orshem (orshem@C5E06B1E.A5B6B765.E3D28531.IP)
[12:08:47] *** Quits: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net) (Client exited)
[12:09:04] <steven_is_false> Fair enough.
[12:09:56] *** Quits: bct (bct@moz-D3BEA05.ed.shawcable.net) (Ping timeout)
[12:10:14] *** Quits: rbancroft (rumble@moz-4E8E0D7F.cg.shawcable.net) (Ping timeout)
[12:10:26] *** Quits: wilsonk-laptop (kvirc@moz-8E86F35A.cg.shawcable.net) (Ping timeout)
[12:10:27] *** Joins: rbancroft (rumble@99CB1D09.5825E03B.F97ED6F2.IP)
[12:11:06] <mitsuhiko> the dynamic support discussed on the mailinglist would be awesome for uniform binding ;)
[12:11:08] *** Joins: wilsonk-laptop (kvirc@moz-8E86F35A.cg.shawcable.net)
[12:11:35] *** Quits: msingle (Thunderbir@DA5C57DC.AD7A4894.465000F8.IP) (Ping timeout)
[12:12:32] *** Joins: bct (bct@moz-D3BEA05.ed.shawcable.net)
[12:15:40] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[12:16:39] *** Quits: steven_is_false (user@1E3F14AE.29819A33.115CE8E4.IP) (Ping timeout)
[12:17:44] *** Joins: webber46 (webber46@moz-717E9C5B.cust.bredband2.com)
[12:20:03] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[12:21:35] *** Joins: maxli (maxli@13F2CEC5.7672369.D8E68FF6.IP)
[12:21:43] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[12:23:03] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[12:24:13] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[12:24:14] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[12:24:27] *** Joins: maik (maik___@moz-1318C3AE.dip0.t-ipconnect.de)
[12:24:37] <maik> bjz, beep
[12:24:49] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[12:26:27] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[12:26:47] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[12:28:35] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[12:31:17] <bstrie> dbaupp: for some reason there's code in one of your reddit comments that looks like "enum List&lt;A&gt; {"
[12:31:37] <dbaupp> bstrie: gah!
[12:31:56] <dbaupp> I think editting a comment on my phone double escapes things
[12:32:06] <dbaupp> (thanks)
[12:32:57] <bstrie> dbaupp: incidentally maybe we can adopt the HTML character entity syntax for people whose keyboards don't include those characters. take C's `??!` trigraph to the next level
[12:33:10] <dbaupp> bstrie: I see that person wanting automatically generated setters and getters. :P
[12:33:21] <dbaupp> bstrie: hahahaha
[12:33:35] <dbaupp> we could just go full unicode
[12:33:50] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[12:33:51] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[12:34:34] <bjz> maik: did you see my new repo?
[12:34:48] <dbaupp> bstrie: `fn foo&langle;T&rangle;(x: T) &larr; T {}`
[12:34:54] <dbaupp> *rarr
[12:34:59] <maik> bjz, ?
[12:35:10] <dbaupp> because < and > are clearly comparisons, not delimiters
[12:35:30] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[12:35:35] <maik> bjz, cgmath?
[12:35:39] <bjz> maik: aye
[12:35:55] <maik> bjz, do you want to rewrite lmath?
[12:36:06] <bjz> maik: well, I'm copying stuff over
[12:36:21] <bjz> maik: the api won't change much
[12:36:34] <bjz> maik: and it shouldn't take too long
[12:37:03] <bjz> maik: let me know what you think
[12:38:41] <maik> bjz, okay
[12:39:08] *** Quits: jpf (jan@moz-A8C26A15.org) (Ping timeout)
[12:39:50] *** flaper87 is now known as flaper87|afk
[12:40:30] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[12:41:03] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[12:43:07] <maik> btw I have a question about inline. In c++ you almost never inline because the compiler can optimize it on it's own., but it can't remove "bad" inlines. How is that in Rust? 
[12:43:18] <maik> at least that was what I read in a book
[12:43:45] *** Joins: jpf (jan@moz-A8C26A15.org)
[12:43:54] <maik> I am asking because I always see explicit inlines
[12:44:02] <dbaupp> maik: you mean #[inline] ?
[12:44:09] <cmr> You should only see inline hints
[12:44:12] *** Quits: orshem (orshem@C5E06B1E.A5B6B765.E3D28531.IP) (Quit: Leaving)
[12:44:13] <cmr> which allows cross-crate inlining.
[12:44:16] <maik> dbaupp, yes
[12:44:18] <pnkfelix> maik: #[inline] is a hint. #[inline_always] is a directive.
[12:44:20] <dbaupp> that's "just" putting the AST into the crate metadata to allow inling
[12:44:26] <maik> ah okay
[12:44:28] <dbaupp> *inlining cross crate
[12:44:37] <dbaupp> #[inline] does make LLVM more eager to inline though
[12:44:49] <dbaupp> (so it's not *just* to enable cross-crate inlining.)
[12:45:14] <dbaupp> cmr: I had a question: don't you americans normally call it "college"?
[12:45:30] <cmr> dbaupp: silly americans!
[12:45:31] <dbaupp> (in TWiR you mention uni)
[12:45:42] <bjz> yay uni
[12:45:43] <pnkfelix> dbaupp: http://grammarist.com/usage/college-university/
[12:45:48] <cmr> my college is titled "clarkson university" though
[12:45:56] <maik> college was one "thing" below university right?
[12:46:08] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[12:46:14] <bjz> I went to a primary/highschool in australia that was Foo College
[12:46:18] <dbaupp> pnkfelix: ah
[12:46:53] <dbaupp> cmr: how sensible :)
[12:47:37] <dbaupp> cmr: "Still, no one talks about going to university in the U.S." (from pnkfelix's article)
[12:47:41] <dbaupp> cmr: clearly you don't exist
[12:48:02] <cmr> I find the terminology of the commonwealth and commonwealth-derivatives to be generally more sane.
[12:48:17] *** flaper87|afk is now known as flaper87
[12:48:19] <bjz> "The same roughly applies in Canada and Australia, where university is used more often than college as the generic termâ€”for example:" Clollege is *never* used here for university :P
[12:48:24] <maik> bjz, you are also studying CS right?
[12:48:41] <bjz> College is like, snotty private school
[12:48:55] <dbaupp> bjz: I'm not sure any place uses Clollege
[12:48:57] <bjz> maik: yah
[12:49:04] <bjz> dbaupp: baha
[12:49:06] <dbaupp> cmr: <3
[12:49:22] <maik> bjz, in which semester are you in?
[12:49:40] <bjz> maik: second :( - I'm just beginning
[12:50:25] <maik> bjz, ah cool I am now in my 5th but I am studying computational visualistics
[12:50:46] * bjz doesn't have much respect for his institution :(
[12:51:05] <maik> me neither :(
[12:51:24] <maik> I am mostly learning on my own
[12:51:31] <bstrie> I like to think that I'm in my... *counts on fingers* ninth year of college
[12:51:40] * dbaupp 's lecturers are striking (almost) every second week :/
[12:52:17] <bstrie> dbaupp: I thought for a moment that you were complimenting their appearance
[12:52:31] <bjz> heh
[12:52:33] <engla> haha that would be a step up
[12:52:39] <engla> at least what I'm used to
[12:52:53] <dbaupp> bstrie: that too
[12:53:02] <bstrie> "how inconvenient, my professors are all ravishing. who can get any work done in this environment"
[12:53:02] <dbaupp> bstrie: but that's every week :P
[12:53:52] *** Quits: webber46 (webber46@moz-717E9C5B.cust.bredband2.com) (Quit: webber46)
[12:54:00] <bstrie> has ifmt totally replaced fmt?
[12:54:26] <Ms2ger> bstrie, I think that's the goal
[12:54:27] <bjz> maik: does your uni lack perspective like mine? no sense of the history of CS?
[12:54:45] <dbaupp> bstrie: I think it's now called format!, and I think its features are a superset of fmt!
[12:54:53] <bstrie> weird
[12:55:10] <bjz> maik: my course feels like it's lobotomised
[12:55:18] <bjz> :[
[12:55:40] <bstrie> cmr: thanks again for twir, I've been too busy partying with hippies/falling in love over the past two weeks to actually keep up with what's happening. would be entirely lost without it
[12:55:53] <maik> bjz, it's complete garbage. I have 2 professors that are pretty decent but the rest is just soo bad. I don't even go to most of my lectures and I just read a book and write my exam
[12:56:01] *** Joins: dew1 (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com)
[12:56:06] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[12:56:11] *** Quits: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com) (Ping timeout)
[12:56:26] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Client exited)
[12:56:32] <maik> bjz, do you also have to do homework?
[12:56:36] <cmr> bstrie: np
[12:56:43] <maik> bjz, so that you get access to the exam?
[12:57:01] *** Joins: webber46 (webber46@moz-717E9C5B.cust.bredband2.com)
[12:57:10] <bstrie> IME, homework in college is optional. and in high school too. basically your entire life
[12:57:19] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[12:57:20] <bstrie> I think I stopped doing homework in fifth grade
[12:57:51] <bstrie> silly teachers, school is for work. home is for video games
[12:58:03] <bjz> maik: homework is optional
[12:58:05] <maik> bstrie, our homework is rated... we have to get at least 70% of the points over a semester or we are not allowed to write the exam
[12:58:07] * dbaupp had compulsory homework last year
[12:58:20] <bjz> actually
[12:58:26] <bstrie> well, I'm not saying it's not compulsory... just optional :)
[12:58:34] <Ms2ger> Ha
[12:58:38] <dbaupp> heh
[12:58:40] <sigma> bjz: I had that experience, I swear they deliberately glossed over a lot of things just so they wouldn't complicate their industry partners desire for people who can use GC'd by default, imperative, OO, shared memory systems. If I wanted to learn that i'd have done a programming course in tech, not _computer science_
[12:58:57] <bjz> sigma: exactly
[12:59:25] <sigma> it was infuriating
[12:59:29] <maik> sigma, haha same here
[12:59:34] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[12:59:39] <maik> sigma, most of my classmates only know java
[12:59:53] <bstrie> had a CS professor who was one of the Wizened Ancients from the IBM era, he was the only one willing to show us the mysteries of C and MIPS
[12:59:58] <Ms2ger> None of that seems to be happened here
[13:00:07] <Ms2ger> But then again, I majored in mathematics
[13:00:09] <bstrie> everyone else just used java and scheme :(
[13:00:29] <bjz> sigma: apparently Melbourne Uni (another uni nearby) used to have an awesome course that had a significant part devoted to declarative programming
[13:00:35] <bjz> sigma: and mathemagics
[13:01:00] <sigma> maik: we had the option of Java or C# for mose projects, I did my final year project in haskell just to spite them, none of the TAs or lower level lecturers could mark it
[13:01:17] <sigma> bjz: that sounds like it would have been aweseom
[13:01:18] <bjz> sigma: but of course folks I talk to who did it say that when they were doing it they thought it was weird and stupid
[13:01:23] <bjz> -_-
[13:01:28] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Connection reset by peer)
[13:01:51] <bjz> sigma: it has since been gobbled up into the BS
[13:02:06] <bjz> sigma: bachelor of science
[13:02:24] <sigma> we had 2 maths'y modules in the whole course, both of which were optional and had less than 10 people from a year of over 200
[13:02:35] <bjz> sigma: at least they could have put it into the maths course
[13:02:47] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[13:03:00] <bstrie> "the option of Java or C#" is, given historical context, a hilarious choice
[13:03:16] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[13:03:16] <bjz> sigma: yeah
[13:03:17] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[13:03:17] <maik> sigma, haha I am going to write my bachelor exam in Rust
[13:03:31] <dbaupp> maik: you'll have to specify which hash it compiles with
[13:03:35] <sigma> maik: that would have been amusing
[13:03:40] <bjz> sigma: the discrete maths stuff I'm doing is quite cool
[13:03:50] <bjz> sigma: but it's only one course
[13:03:52] <bjz> :(
[13:04:03] <dbaupp> bjz: can you transfer to melb.uni.?
[13:04:20] <sigma> I did all the relevant coursera courses I could find to help fill in gaps
[13:04:25] <maik> dbaupp, I'll write it in one year. I hope Rust 1.0 will be out then :)
[13:04:28] <bjz> sigma: I can see all the stuff they could link with functional languages and theorum provers etc, type theory
[13:04:46] <bjz> sigma: yeah, the PL course is coming up again
[13:05:06] <dbaupp> maik: that's no fun :P
[13:05:12] <maik> :D
[13:05:17] <sigma> bjz: yeh, it really frustrates me that they didn't even mention their existence. We had some prolog in the AI course, but that was the only non OO language in the whole course
[13:05:18] <bjz> sigma: really great, I only made it through abit, but had to drop it because I got too busy. but I'm trying again
[13:05:39] <bjz> sigma: and did your peers winge about it?
[13:05:46] <sigma> yes
[13:05:54] <sigma> incessantly
[13:05:54] <bjz> that pisses me off so much
[13:06:11] <bjz> sigma: half of the problem is the students
[13:06:16] <maik> that was our exam in programming http://www.scribd.com/doc/163160854/uni 
[13:06:28] * dbaupp enjoyed his AI course last semester that used some weak statistics/matrix stuff; no-one else did.
[13:06:34] <maik> don'T worry it's in english
[13:07:07] <bjz> the sad thing that there is a huge amount of people complaining online
[13:07:22] <sigma> dbaupp: so many people dropped our AI course when bayes theorem popped up, it wasn't even funny...
[13:07:30] <bjz> so now we do the course era stuff
[13:07:44] <bjz> sigma: CS should probably be part of maths
[13:07:56] <sigma> eh, I dunno
[13:07:58] <dbaupp> maik: that looks a lot like "learn the exact semantics/patterns of Java" :(
[13:08:01] <sigma> it's still quite seperate
[13:08:18] <sigma> I can see they should extract software development from the CS course though
[13:08:23] <maik> dbaupp, yeah we need to know java
[13:08:41] <maik> dbaupp, but I learned it a while ago so I was mostly fine
[13:09:02] <Seldaek> man am I the only non-student here? 
[13:09:03] *** Quits: metasyntax (tvenable@moz-63D9B3D.med-web.com) (Quit: Leaving)
[13:09:13] <dbaupp> Seldaek: apparently
[13:09:13] <sigma> I'm not anymore ^^
[13:09:16] <bstrie> Seldaek: ex-student here
[13:09:28] <maik> dbaupp, but it was my first 1.0 that I wrote :D
[13:09:35] <Seldaek> bstrie: ex like 2months ago or 5years? :p
[13:09:44] <bstrie> Seldaek: ugh, I don't even want to think about it...
[13:09:49] <Seldaek> haha
[13:09:51] <sigma> 2 months for me :)
[13:10:02] <Seldaek> sigma: yeah ok that almost doesn't count as ex- ;)
[13:10:08] <Seldaek> still making me feel old :p
[13:10:10] * bstrie is having a first-third-life-crisis
[13:10:18] <Seldaek> hahah
[13:10:48] <Seldaek> I was at a friend 40th birthday recently, that struck me as scary
[13:11:08] <bstrie> I'll be 26 in two months, and then I shall join the elves in their journey west to the undying lands, where ancients of our ilk reside
[13:11:17] <maik> master + bachelor is also 6+3 semester at your uni right?
[13:11:17] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[13:11:18] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/-V9bNg
[13:11:18] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[13:11:30] <maik> 3+6*
[13:11:39] <dbaupp> bstrie: better start some serious Rust hacking to get it all finished before you leave
[13:12:37] <bstrie> dbaupp: sure, I'll get right on that *reads reddit*
[13:12:43] *** Joins: Earnestly (earnest@B0BDF733.8FDE20A.5411983D.IP)
[13:13:02] <dbaupp> bstrie: /r/rust, right?
[13:13:03] <maik> bjz, can you name some of your courses?
[13:13:20] <bstrie> dbaupp: yeah, gotta make sure nobody's being uncivil so I read every comment... always...
[13:13:41] <dbaupp> bstrie: they might edit it maliciously!
[13:14:07] <bstrie> sshh, don't give them any ideas
[13:14:24] * dbaupp edits one of his old comments to violent swearing
[13:14:37] <bstrie> you are banned from /r/rust
[13:14:41] <maik> we definitely need more topics or /r/rust
[13:14:47] <Seldaek> bstrie: you could just crawl the whole subreddit every minute and read the diffs, that'd give you an amazing matrix operator feel 
[13:14:55] <bstrie> maik, why do you strive to make me suffer
[13:15:07] <maik> :D
[13:15:14] <bstrie> everyone, everyone is banned from /r/rust. no more comments to police
[13:15:48] <bjz> hehe
[13:15:55] <bstrie> Seldaek: I'm still trying to figure out how to get diffs. I have RES which tells me when there are new comments in a thread, but not which comments those are
[13:16:08] <sigma> :( now where can I have an above reddit-average knowledge of implementation details
[13:16:17] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[13:16:17] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/CzXZEQ
[13:16:17] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[13:16:18] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[13:16:18] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/uP0_Fg
[13:16:18] <ghrust> 13rust/06auto 14e2a5a7d 15Florian Hahn: Add script and tests for using keywords as identifiers
[13:16:18] <ghrust> 13rust/06auto 140141877 15bors: auto merge of #8739 : fhahn/rust/ticket_2275, r=pnkfelix...
[13:16:18] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[13:16:30] <bjz> rusti: trait A<T: B>{} trait B<T: A> {}
[13:16:31] -rusti- Segmentation fault
[13:16:31] -rusti- application terminated with error code 139
[13:16:35] <bjz> YEYS!
[13:16:36] <bstrie> hahaha
[13:16:58] <bstrie> you win the prize!
[13:17:00] <bjz> THAT ISSUE IS MINE
[13:18:13] <maik> cake for all
[13:18:41] *** Quits: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP) (Ping timeout)
[13:19:27] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Ping timeout)
[13:19:44] <bjz> https://github.com/mozilla/rust/issues/8762
[13:19:47] <bjz> :D
[13:19:56] <bjz> I m truley proud
[13:19:59] <bjz> rusti: trait A<T: B>{} trait B<T: A> {}
[13:20:00] -rusti- Segmentation fault
[13:20:00] -rusti- application terminated with error code 139
[13:20:22] <bjz> sully: is that your area? ^
[13:20:23] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[13:21:12] <bstrie> bjz: please attach another test case to ensure that the error isn't because of the errant space between trait B and the braces
[13:21:15] <bstrie> :)
[13:21:22] <bjz> ok
[13:21:30] <bstrie> btw that was a joke?
[13:21:32] <bstrie> I am tired
[13:21:38] <bstrie> too tired for making humor
[13:21:44] <bjz> what
[13:21:45] <bstrie> please take away my license
[13:21:48] *** Joins: sigma (sigma@moz-99F2DD14.range31-54.btcentralplus.com)
[13:22:03] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[13:22:06] <maik> rusti: trait A<T: B + Clone>{} trait B<T: A + Clone> {}
[13:22:06] -rusti- Segmentation fault
[13:22:06] -rusti- application terminated with error code 139
[13:22:11] <bjz> XD
[13:22:28] <klutzy> whoa, mingw-w64 cross-build seems to work finally :-/
[13:22:37] <klutzy> I hate windows
[13:22:46] <mitsuhiko> klutzy: :(
[13:22:58] <mitsuhiko> there is so much awesome stuff in windows, don't hate it for not being posix
[13:23:13] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[13:23:14] <maik> klutzy, why? Do you not like light?
[13:23:28] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[13:23:28] *** Quits: sigma (sigma@moz-99F2DD14.range31-54.btcentralplus.com) (Ping timeout)
[13:23:31] <maik> bad pun :(
[13:23:41] * bstrie defenestrates maik
[13:23:54] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[13:24:05] <klutzy> mitsuhiko, maik: my submitted had a problem with context switching, I fixed it now using undocumented internal stuff
[13:24:21] <klutzy> my previously submitted pr*
[13:24:25] <bjz> rusti: trait A<T:A> {}
[13:24:25] -rusti- Segmentation fault
[13:24:26] -rusti- application terminated with error code 139
[13:24:28] <bjz> HAHA
[13:24:30] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[13:24:32] <mitsuhiko> :D
[13:24:45] <maik> at least someone here has fun :D
[13:24:47] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[13:24:50] <flaper87> lol
[13:25:26] <maik> I bet rusti is crying right now
[13:25:38] <klutzy> I'm recently digging into win64 because I hate windows ;p
[13:26:00] <klutzy> I initially wanted to create a small utility then I am shaving yak for 2 weeks
[13:26:02] <bstrie> rusti: println("Segmentation fault\napplication terminated with error code 139");
[13:26:03] -rusti- Segmentation fault
[13:26:03] -rusti- application terminated with error code 139
[13:26:03] -rusti- ()
[13:26:07] <bjz> we need segfault golf
[13:26:14] *** Joins: io2 (io2@moz-A6202C16.home.otenet.gr)
[13:26:23] <bstrie> now I too get to file a bug
[13:26:33] <bjz> rusti: trait A<A>{}
[13:26:34] -rusti- ()
[13:26:44] <engla> I liked mine from yesterday or when it was
[13:26:49] <bjz> rusti: trait A<T:A>;
[13:26:50] -rusti- <anon>:5:21: 5:22 error: expected `{` but found `;`
[13:26:50] -rusti- <anon>:5          trait A<T:A>;
[13:26:50] -rusti-                               ^
[13:26:50] -rusti- application terminated with error code 101
[13:26:55] <engla> rusti: let f = 0 as extern fn(); f()
[13:26:56] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[13:27:01] <bjz> :D
[13:27:06] <bjz> that's good
[13:27:14] <maik> rusti: trait A<A:A>{}
[13:27:15] -rusti- <anon>:5:19: 5:20 error: A is not a trait
[13:27:15] -rusti- <anon>:5          trait A<A:A>{}
[13:27:15] -rusti-                             ^
[13:27:15] -rusti- application terminated with error code 101
[13:27:25] <bjz> hehe
[13:27:30] <bjz> AAA
[13:27:30] <maik> :(
[13:27:41] *** Quits: Guest_ (textual@moz-15DCD320.hfc.comcastbusiness.net) (Quit: Textual IRC Client: www.textualapp.com)
[13:27:51] <adridu59> Windows can be POSIX http://en.wikipedia.org/wiki/Interix
[13:28:02] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[13:28:04] <dbaupp> bstrie: nice catch!
[13:28:40] <dbaupp> The best segfault golf was `mod a;` in a.rs
[13:28:46] <bstrie> haha
[13:29:07] <dbaupp> (it didn't segfault when it was fixed, but it would now, if it still existed.)
[13:29:13] <klutzy> does it segfault rather than infinite loop?
[13:29:14] <dbaupp> *before it was fixed
[13:29:19] <bjz> rusti: trait A<T: Self> {}
[13:29:19] -rusti- <anon>:5:20: 5:24 error: Self is not a trait
[13:29:20] -rusti- <anon>:5          trait A<T: Self> {}
[13:29:20] -rusti-                              ^~~~
[13:29:20] -rusti- application terminated with error code 101
[13:29:48] <dbaupp> klutzy: it was fixed; but currently infinite recursion overflows the stack and segfaults (most of the time), because the new rt doesn't support segmented stacks
[13:30:07] *** Quits: maik (maik___@moz-1318C3AE.dip0.t-ipconnect.de) (Ping timeout)
[13:30:12] <dbaupp> rusti: main()
[13:30:12] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[13:30:20] <bstrie> now I'm wondering what the most concise segfault in C is
[13:30:23] <bstrie> C programmers, help me out
[13:30:36] <bstrie> I mean of the program obviously, not the compiler...
[13:30:46] <dbaupp> *NULL ?
[13:31:06] <Ms2ger> Probably optimized out
[13:31:11] <bstrie> haha
[13:31:18] <bjz> trait: trait Field: ScalarMul<S> {} trait ScalarMul<S: Field> {}
[13:31:28] <bjz> rusti: trait Field: ScalarMul<S> {} trait ScalarMul<S: Field> {}
[13:31:28] -rusti- <anon>:5:32: 5:33 error: use of undeclared type name `S`
[13:31:28] -rusti- <anon>:5          trait Field: ScalarMul<S> {} trait ScalarMul<S: Field> {}
[13:31:30] -rusti-                                          ^
[13:31:32] -rusti- error: aborting due to previous error
[13:31:33] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Client exited)
[13:31:34] -rusti- application terminated with error code 101
[13:31:46] <bjz> rusti: trait Field<S>: ScalarMul<S> {} trait ScalarMul<S: Field> {}
[13:31:46] -rusti- Segmentation fault
[13:31:47] -rusti- application terminated with error code 139
[13:32:04] <dbaupp> bjz: scalar mul doesn't require a field
[13:32:26] <dbaupp> *clearly* you only need a ring. :P
[13:32:33] <bjz> dbaupp: what about with a matrix/vector?
[13:32:51] <bjz> dbaupp: oh, true
[13:32:54] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[13:32:58] <dbaupp> bjz: yeah, a ring is all you need (it becomes a module rather than a vector space; but the scalar-mul property still exists.)
[13:33:20] * Ms2ger is vaguely reminded of an algebra course
[13:33:24] <dbaupp> bjz: I imagine that s/Field/Ring/ will still segfault
[13:33:46] <engla> are trait bounds on traits supported at all?
[13:33:47] * dbaupp would be happy if the compiler segfaulted on incorrect mathematical abstractions.
[13:33:53] <bjz> engla: yep
[13:34:07] <engla> I mean, intentionally?
[13:34:17] <pnkfelix> engla: Probably useful for writing default methods
[13:34:47] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[13:35:10] <engla> and no use for anything else
[13:35:16] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[13:35:35] <dbaupp> there are so many identical issues caused by 'self being special :( (assertion failed `rp.is_none()` blahblahblah)
[13:35:45] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[13:37:09] *** Joins: sigma (sigma@C91C7F36.70518F41.9D18269F.IP)
[13:37:25] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Ping timeout)
[13:39:51] <bjz> dbaupp: yeah it segfaults in Module
[13:40:37] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[13:41:16] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[13:41:16] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 140141877 to 14540d98e: 02http://git.io/N3iJvQ
[13:41:16] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[13:41:17] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[13:41:18] <ghrust> 01[13rust01] 15bors pushed 7 new commits to 06auto: 02http://git.io/7_y8ig
[13:41:18] <ghrust> 13rust/06auto 1436d698d 15gifnksm: bigint: cfg(target_arch = ...) => cfg(target_word_size = ...)
[13:41:18] <ghrust> 13rust/06auto 14b247d17 15gifnksm: bigint: remove unnecessary method implements
[13:41:18] <ghrust> 13rust/06auto 1417c8f8b 15gifnksm: bigint: inlining small functions
[13:41:20] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[13:41:39] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[13:42:37] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[13:43:00] *** Quits: sigma (sigma@C91C7F36.70518F41.9D18269F.IP) (Ping timeout)
[13:43:25] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[13:45:04] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[13:46:36] *** Joins: maik (maik___@moz-1318C3AE.dip0.t-ipconnect.de)
[13:47:02] <jorendorff> The type_path grammar seems ambiguous to me.    x::z<y> has two parses.
[13:47:13] <jorendorff> http://static.rust-lang.org/doc/0.7/rust.html#paths
[13:47:44] <jorendorff> maybe i am not reading the grammar correctly
[13:47:45] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[13:47:48] <bjz> no
[13:48:02] <bjz> you need x::z::<y>
[13:48:53] <bjz> rusti: std::sys::size_of<int>()
[13:48:53] -rusti- <anon>:5:27: 5:30 error: unresolved name `int`.
[13:48:54] -rusti- <anon>:5          std::sys::size_of<int>()
[13:48:54] -rusti-                                     ^~~
[13:48:54] -rusti- error: aborting due to previous error
[13:48:54] -rusti- application terminated with error code 101
[13:49:01] <bjz> rusti: std::sys::size_of::<int>()
[13:49:02] -rusti- 8
[13:49:14] <bjz> jorendorff: is that what you mean? ^
[13:49:56] <bjz> jorendorff: or something like
[13:50:12] <bjz> rusti: type t = std::hashmap::HashMap<int,~str>;
[13:50:12] <jorendorff> well -- i don't know the language
[13:50:12] -rusti- ()
[13:50:47] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Client exited)
[13:50:58] <jorendorff> that's a type_path, yes, that's what I was asking about
[13:51:03] <jorendorff> I'm sure the compiler works as intended, but this grammar seems ambiguous to me
[13:51:12] <engla> jorendorff: the type_path ?
[13:51:15] <bjz> jorendorff: no, it's important
[13:51:30] <bjz> jorendorff: good to ask these things
[13:51:42] <bjz> jorendorff: sorry I went all 'no' on you
[13:51:46] <engla> it looks ok to me
[13:51:47] <jorendorff> heh! no worries
[13:51:49] <Ms2ger> So what are the two parses?
[13:52:45] <jorendorff> std followed by three type_path_tails, "::hashmap", "::HashMap", "<int,~str>" seems like a valid parse
[13:52:57] <maik> does anyone here want to help translate https://github.com/masagroup/recastdetour to Rust?
[13:53:06] <bstrie> Ms2ger: to the parser, foo<bar> might be foo with a type specialized to bar, or it might be an expression "foo < bar"
[13:53:22] <bstrie> Ms2ger: to disambiguate would require unbounded lookahead iirc
[13:53:26] <jorendorff> also std followed by two type_path_tails, "::hashmap", "::HashMap<int,~str>"
[13:53:48] <bstrie> Ms2ger: hence why we require foo::<bar> if you want the first interpretation
[13:53:58] <jorendorff> the second one matches the second type_path_tail production because "HashMap<int,~str>" is a type_path
[13:54:09] <jorendorff> bstrie and I are saying two different, unrelated things
[13:55:45] <jorendorff> The text also seems out of sync with the grammar. for example
[13:55:47] <jorendorff> "the trailing component of a path may be an angle-bracket-enclosed list of type arguments"
[13:56:03] <jorendorff> but the grammar doesn't seem to make the trailing component special in any way
[13:56:07] <pnkfelix> jorendorff: Yes, I think you are right.  The formal grammar that jclements made might be a better reference point for now
[13:56:22] <pnkfelix> jorendorff: depending on what your goals are
[13:56:49] <pnkfelix> jorendorff: to my knowledge the grammar in rust.md is not checked to correspond to the language
[13:57:22] <Ms2ger> jorendorff, yeah, I think you're right
[13:57:26] <pnkfelix> jorendorff: https://github.com/jbclements/rust-antlr
[13:57:32] <jorendorff> excellent
[13:58:06] <sully> bjz: haha, welp
[13:58:26] <bjz> CURSE YOU SULLY!
[13:58:30] <sully> bjz: it probabaly fails slightly more gracefully outside of rusti?
[13:58:31] <bjz> :D
[13:58:36] <sully> bjz: it's a stack overflow, I assume
[13:58:39] <bjz> mm
[13:58:47] <bjz> I get a bus error at home
[13:58:51] <bstrie> Because of IRC's scandanavian origin, the characters "{}|" are considered to be the lower case equivalents of "[]\".
[13:59:03] *** Joins: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP)
[13:59:20] <bjz> sully: and the lovely: "You've met with a terrible fate, haven't you?" message
[13:59:24] <bjz> (I love it)
[13:59:32] <bjz> sully: intermittently
[13:59:38] <bstrie> it's a bit concise, compared to the others
[13:59:53] <bjz> bstrie: yeah, no lovecraft :(
[14:00:10] *** Joins: dan_johnsin (dan_johnsi@6902762D.11B071D.FB9A45AF.IP)
[14:00:16] <bjz> bstrie: we got some bonus points on HN for that
[14:00:21] <bjz> :)
[14:00:44] *** Joins: bytewise (bytewise@moz-4A801D04.unitymediagroup.de)
[14:00:45] *** Joins: Kruppe (user@moz-EE1E894A.home3.cgocable.net)
[14:01:37] *** Quits: mindcat (mindcat@FEE528CF.DE7505BB.291A146C.IP) (Ping timeout)
[14:01:53] <bjz> sully: yeah, I think my algebraic structure wants to be self-referential.
[14:02:08] <bjz> sully: I might be doing it wrong though
[14:02:09] <bjz> :P
[14:02:09] *** Joins: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP)
[14:02:26] <engla> bstrie: irc cares about case?
[14:02:52] *** Joins: sigma (sigma@moz-24A9AEB4.range109-145.btcentralplus.com)
[14:03:04] <bjz> sully: not to the extent of trait A<T:A> {} though
[14:03:07] <bstrie> engla: http://www.ietf.org/rfc/rfc1459.txt
[14:03:32] <bstrie> engla: "This is a critical issue when determining the equivalence of two nicknames."
[14:03:37] *** Joins: logic_chains (Mibbit@10F8E3A.623B366D.7565C1AC.IP)
[14:04:03] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[14:04:04] *** Joins: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP)
[14:04:04] *** engla is now known as engla[]
[14:04:08] *** engla[] is now known as engla{}
[14:04:33] *** Joins: engla[] (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[14:04:37] <engla[]> engla{}: sucker
[14:04:57] <engla{}> they are not equivalent
[14:05:25] <bstrie> engla{}: well tell that to mitsuhiko, it's from his twitter :P
[14:05:40] <logic_chains> Hi there. I wonder if anyone can help with a problem I'm having concatenating two vectors in the new Rust build.
[14:05:54] <bstrie> logic_chains: hello, you're that guy with the levgen stuff right
[14:06:02] <logic_chains> Yep
[14:06:11] <bstrie> s/guy/person
[14:06:17] <engla[]> maybe irssi agrees. It highlighted this nick too
[14:06:39] <logic_chains> Haha
[14:06:49] <bstrie> logic_chains: well I am too delirious to be of any help! it is such a convenient excuse, I should never sleep ever again
[14:06:57] <mitsuhiko> bstrie: why tell me? tell freenode, they are in voilation of the standard!
[14:07:08] <bstrie> mitsuhiko: you don't even know what network you're on!
[14:07:15] <mitsuhiko> oh damit
[14:07:17] <Ms2ger> Ha
[14:07:32] <bstrie> in ayn case it's probably the server software :P I think mozilla uses quakewhatever
[14:07:34] <doy> everyone is in violation of the standard
[14:07:36] <Ms2ger> Unreal
[14:08:07] <logic_chains> The server is hosted on the Unreal engine? Gives a whole new meaning to 'bots', I guess..
[14:08:22] *** Quits: engla[] (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Quit: leaving)
[14:08:24] <sp3d> the server sent CASEMAPPING=ascii in its options line on connect
[14:08:35] *** engla{} is now known as engla
[14:08:41] <bstrie> mitsuhiko: can't tell if "oh damit" is english or german :P
[14:09:01] <logic_chains> Maybe it's Dutch, you never know.
[14:09:12] <sp3d> which tells clients that it's not going to use the scandinavian IRC casemapping... most of IRC these days is defined by implementation concensus
[14:09:19] <Ms2ger> Doesn't look Dutch to me
[14:09:31] <Ms2ger> At least not as written by someone who knows Dutch :)
[14:09:37] <mitsuhiko> bstrie: well, it could be german, but it would not make much sense
[14:09:41] <sp3d> er, consensus*
[14:09:42] <logic_chains> Ik et melk en brood?
[14:09:44] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[14:10:02] <bstrie> nobody is allowed to speak in english in here for the next five minutes
[14:10:12] <bstrie> show off your polyglotudinality
[14:10:21] <StarLight> Ð´Ð¾Ð±Ñ€Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ
[14:10:39] <mitsuhiko> why was i expecting russian as first language to be dropped
[14:10:44] <nsf> Ñ…ÐµÑ…Ðµ
[14:10:46] <mitsuhiko> too much dota
[14:10:53] <bstrie> haha
[14:10:54] <logic_chains> æˆ‘æ˜¯é‡‘æ­£æ—¥
[14:10:56] *** squiddy_ is now known as squiddy
[14:11:00] <bstrie> er, I mean, keke
[14:11:12] <mitsuhiko> oh visual studio: http://i.imgur.com/G6PNLFa.png
[14:11:37] <bstrie> logic_chains: by the way, I believe you had an actual question before I distracted everyone with silliness...
[14:12:14] <logic_chains> Ah, yes.  I get: error: failed to find an implementation of trait std::clone::Clone for Level, for the line: 
[14:12:16] <logic_chains> let newlev = port.recv();         ls = ls + newlev;
[14:12:18] <bjz> mitsuhiko: that needs to go on http://www.reddit.com/r/softwaregore/
[14:12:23] <engla> why blame us? rfc's can be illogical without needing to blame an entire people for it
[14:12:27] <bjz> mitsuhiko: mind if I do the honors?
[14:12:32] <mitsuhiko> bjz: go ahead
[14:12:54] <bstrie> logic_chains: try putting the attribute #[deriving(Clone)] on top of the Level struct
[14:13:15] <bstrie> logic_chains: you can also implement it yourself, but usually it's trivial to do so. hence why we have deriving
[14:13:38] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[14:13:47] <bjz> mitsuhiko: http://www.reddit.com/r/softwaregore/comments/1l48pa/oh_visual_studio/ :D
[14:13:51] <mitsuhiko> :D
[14:13:56] <bstrie> logic_chains: but even better might be to try to find an approach that doesn't clone at all... but if you're doing parallel stuff maybe that's not feasible for what you're trying to demonstrate
[14:14:43] <logic_chains> Great, it worked, thanks. Any reason I didn't need to clone in the old version (early July) but do now?
[14:15:18] *** Quits: jaen (jaen@moz-BFF8AF0D.neoplus.adsl.tpnet.pl) (Ping timeout)
[14:15:18] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[14:15:19] <bstrie> logic_chains: if it worked before, it was because you were moving the array rather than cloning it
[14:15:33] <bstrie> logic_chains: moving is just a pointer copy, so very very cheap. cloning is potentially very expensive
[14:15:45] <bstrie> linear types will move by default
[14:15:52] <bstrie> so anything with the ~ squiggle
[14:16:57] <logic_chains> Hmm, well I didn't change any code, apart from having to declare explicitly declare the types of Port and CHan  (Port<~[Level]>, Chan<~[Level]>)
[14:18:42] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[14:19:01] <bstrie> logic_chains: strange, you mean the serial version of that code needs cloning now?
[14:20:20] <logic_chains> No, the parallel version seems to. But it didn't previously; " ls = vec::append(ls,port.recv() ); " used to work, but now it requires clone be defined for lev (and Room and Tile)
[14:20:33] <bstrie> is this after updating from 0.7 to master?
[14:20:43] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[14:20:47] <logic_chains> From 0.8pre from around July 13 to master
[14:21:14] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[14:21:42] <logic_chains> I'm also now getting: 'error: multiple applicable methods in scope' when trying 'let mut prngclone = prng.clone();', where prng is a uint declared outside the spawn block
[14:22:14] <logic_chains> Then it suggests ten candidates, all of which are: `std::clone::__extensions__::clone`
[14:22:19] <bstrie> it probably can't figure out that prng is a uint from context
[14:22:21] <bstrie> haha
[14:22:23] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[14:22:51] <bstrie> if you slap a type annotation somewhere to tell it explicitly that it's a uint, it should make that error go away
[14:23:40] <logic_chains> And, you were right agian, thanks a heap.
[14:23:42] <logic_chains> again*
[14:23:46] <bstrie> as for the clone issue... no idea
[14:23:50] <Ms2ger> Who's agian? ;)
[14:24:05] <bstrie> I'd say just getting the code working first will be a good first step
[14:24:16] <bstrie> I'm not even sure if vec::append is the preferred way of appending vecs
[14:24:19] *** Quits: maik (maik___@moz-1318C3AE.dip0.t-ipconnect.de) (Ping timeout)
[14:24:20] <bstrie> our libs are all over the place
[14:24:47] <logic_chains> Haha, right. Last time I tried with a stack array, there wasn't even an append function for them
[14:24:57] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Connection reset by peer)
[14:25:36] <bstrie> Welcome to Rust, where the libs are made up and the docs don't matter.
[14:26:25] <logic_chains> Ah well, at least it has closures :v
[14:27:04] <logic_chains> Hmm, I've got it to compile, but I must have screwed up the code somewhere, as it's taking longer and generating unreliable results.
[14:27:50] <bstrie> nondeterministic results?
[14:28:05] <logic_chains> Yep
[14:28:21] <bstrie> if you're using the built-in xorshift rng, we recently made it generate with a random seed if you don't give it a seed
[14:28:44] <logic_chains> Nah, I'm still using the custom one.
[14:28:52] <bstrie> wut
[14:29:21] <io2> hello bstrie :)
[14:29:25] <bstrie> io2: hellohello
[14:29:34] <bstrie> logic_chains: well, let's see the code
[14:30:21] *** Quits: Ralith (ralith@114DA04D.CD83ED0A.BCDF04A6.IP) (Ping timeout)
[14:31:28] <logic_chains> Sure, just gotta wait for Tor to load so I can access pastebin.
[14:31:56] <bstrie> that seems a bit excessive :P
[14:32:08] *** Joins: dave1629 (dave@7533B7AE.474E6E0A.DDE5D3F6.IP)
[14:32:14] * bstrie hugs his socks proxy
[14:32:36] <logic_chains> Tell that to the guys who blocked it, haha
[14:35:04] <logic_chains> Righto, here it is: http://pastebin.com/4iX5stmU
[14:36:10] <bstrie> ok, well I just realized that my rust build is actually recompiling llvm
[14:36:22] <bstrie> so I won't be helpful for a while
[14:36:36] <logic_chains> At least it'll keep it fresh.
[14:37:01] <bstrie> someone else should feel free to tag in, if they're around
[14:37:10] <bstrie> EST mornings are usually a little sleepy around here
[14:37:11] *** Joins: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net)
[14:37:11] <logic_chains> No problem. At least I've got it compiled now, thanks for that.
[14:37:18] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[14:37:23] <bstrie> devs don't get on until PST work hours
[14:37:27] <Ms2ger> logic_chains, do they also block pastebin.mozilla.org?
[14:38:05] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[14:39:49] <bstrie> woah, new bugzilla look is actually... legible
[14:40:03] <logic_chains> Ah, excellent, they don't block http://pastebin.mozilla.org/. Who knows what kind of  counter-revolutionary content is sneaking in under their noses.
[14:40:40] <Ms2ger> bstrie, it's not too bad, eh :)
[14:40:48] <logic_chains> Slightly ironically however, it doesn't yet have Rust syntax highlighting. 
[14:41:09] <bstrie> logic_chains: gist is the only pastebin I know of with rust highlighting
[14:41:35] <logic_chains> Cool
[14:42:39] <logic_chains> Here's the gist of it: https://gist.github.com/logicchains/6342156
[14:42:52] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[14:43:12] *** Joins: maik (maik___@moz-1318C3AE.dip0.t-ipconnect.de)
[14:43:39] <nsf> lol
[14:43:42] <nsf> https://gist.github.com/nsf/6342168
[14:43:50] <nsf> wrote uint to enum converter generator for rust
[14:43:53] <nsf> in lua
[14:43:55] <nsf> :D
[14:44:10] <nsf> (usage example and a script at the bottom of the page)
[14:44:12] <nsf> uses lpeg
[14:44:13] <logic_chains> Nice!
[14:44:30] *** Joins: Potash (Mibbit@CF7D7C7D.2FA676FE.D2FADA4.IP)
[14:44:33] <Potash> Hello
[14:44:58] <bstrie> logic_chains: nsf has also done some rust/go/d benchmarks in the past
[14:45:21] <Potash> On the topic of benchmarks, does anyone have any?
[14:45:41] <bstrie> Potash: regarding what specifically
[14:45:58] <Potash> Speed on certain algorithms compared to other languages
[14:46:06] <bstrie> Potash: the rust compiler has a src/test/bench folder for benchmarks, some of which have implementations in other languages
[14:46:21] <Potash> Are there _existing_ ones?
[14:47:03] <bstrie> you mean, do there exist benchmark tasks that are used to compare the performance of various languages? the answer is "yes, but almost always poorly"
[14:47:16] <Potash> Thanks
[14:47:38] <bstrie> Potash: check out http://benchmarksgame.alioth.debian.org/ for the most famous one
[14:47:44] <nsf> no doubt if you take pure math rust is close to C in that regard
[14:48:04] <nsf> what really needs to be benchmarked and optimized in rust is exactly things that are not available in other languages
[14:48:15] *** Quits: wilkie (wilkie@moz-A435EAAD.pitbpa.fios.verizon.net) (Ping timeout)
[14:48:20] <nsf> things like enum matches and stuff
[14:48:49] *** Joins: jaen (jaen@moz-6880BEC2.play-internet.pl)
[14:49:06] <logic_chains> If you're doing something that LLVM 3.2 handles better than whatever version of GCC you're using, and you're compiling C with GCC, then Rust could technically be faster, haha
[14:49:10] <nsf> but whatever, I wrote the enum converter gen, now it's time to generate a couple of converters :D
[14:49:16] <logic_chains> (Y)
[14:49:56] *** Joins: wilkie (wilkie@moz-A435EAAD.pitbpa.fios.verizon.net)
[14:50:17] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[14:51:35] <bstrie> oh btw, I see we have jemalloc back in
[14:51:43] <bstrie> are we still seeing the random failures from last time?
[14:51:45] *** Quits: Potash (Mibbit@CF7D7C7D.2FA676FE.D2FADA4.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:51:49] <bstrie> cmr ^ any knowledge?
[14:52:28] <bstrie> I'm still unclear if the earlier random failures were caused by too-small stacks or bad codegen
[14:52:40] *** Quits: wilkie (wilkie@moz-A435EAAD.pitbpa.fios.verizon.net) (Ping timeout)
[14:52:50] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[14:53:39] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[14:53:56] <bstrie> or perhaps an auspicious combination of the two
[14:54:29] *** Quits: jaen (jaen@moz-6880BEC2.play-internet.pl) (Ping timeout)
[14:55:00] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[14:55:20] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[14:56:08] *** Joins: wilkie (wilkie@moz-A435EAAD.pitbpa.fios.verizon.net)
[14:56:21] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[14:56:44] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[14:59:38] *** Joins: td (Mibbit@moz-2140D03F.cable.virginmedia.com)
[14:59:49] *** Joins: kvark (Mibbit@9A8A5739.49975FB2.AE2D72A6.IP)
[15:00:30] *** Parts: td (Mibbit@moz-2140D03F.cable.virginmedia.com) ()
[15:01:13] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[15:01:20] *** Joins: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP)
[15:01:25] <kvark> Simple question: suppose I received an owned pointer from a child task, how do I convert it to a managed pointer (I want to share it within the parent task)?
[15:01:38] <bstrie> kvark: is there a .to_owned() method?
[15:01:46] <bstrie> er, .to_managed()
[15:02:18] <bstrie> could also try something like @*my_owned_thing
[15:02:33] <kvark> I scanned through std lib on the wiki but couldn't find to_managed
[15:02:38] <kvark> I'll try @* now
[15:03:43] <kvark> doh, seems to work! somehow unexpected... but really clean
[15:03:45] <kvark> thanks bstrie
[15:04:18] <bstrie> np
[15:04:26] <bstrie> glad to see it doesn't require a .clone() anywhere in there
[15:04:40] <kvark> yeah, really wanted to avoid that
[15:05:07] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Quit: Leaving)
[15:05:13] <maik> we call them managed pointer now?
[15:05:17] <nsf> https://gist.github.com/nsf/6342168
[15:05:19] <nsf> modified it slightly
[15:05:25] <nsf> now uses match instead of if statement
[15:05:26] <bstrie> maik: that's always been the name
[15:05:31] <bstrie> at least for the past verylongtime
[15:05:33] <nsf> cleaner, more readable, smaller
[15:06:05] <maik> bstrie, wait is a managed pointer @?
[15:06:09] <bstrie> maik: yes
[15:06:15] <maik> bstrie, ah okay 
[15:06:29] <bstrie> nsf: dear god, that's so much better
[15:06:37] <bstrie> I was horrified at that earlier if statement
[15:06:47] <bstrie> hooray range patterns
[15:07:04] *** Quits: sebcrozet (sebcrozet@moz-C27D92D8.w193-252.abo.wanadoo.fr) (Ping timeout)
[15:07:07] <kvark> bstie: wait, somehow it's not moving the variable from owned to managed, see:
[15:07:17] <kvark> rusti: let a = ~5; let b = @*a; (a,b)
[15:07:18] -rusti- (~5, @5)
[15:07:28] <nsf> bstrie: :)
[15:07:31] <kvark> isn't it suppose to complain about 'a' being moved?
[15:07:40] <kvark> *supposed
[15:07:49] <bstrie> kvark: ...good question :)
[15:07:54] <Ms2ger> It's a copy, no?
[15:07:58] <nsf> and range of course should it optimize better in theory
[15:08:09] <bstrie> Ms2ger: I just thought it would require you to be explicit with a .clone in there somewhere
[15:08:16] <nsf> using bsearch
[15:08:26] <nsf> uhm, I mean match
[15:08:35] <kvark> Ms2ger: I want it to be moved, not copied
[15:08:36] <nsf> s/range/match/
[15:08:40] <bstrie> bsearch is too long to be a rust keyword
[15:08:40] <engla> kvark: ints are copyable :)
[15:08:42] *** Quits: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP) (Client exited)
[15:08:51] *** Quits: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com) (Ping timeout)
[15:09:06] <nsf> bstrie: I mean if I use match statement compiler is supposed to optimize it well for number cases like this
[15:09:07] <maik> let a = ~"hello"; let b = @*a; (a,b)
[15:09:11] <bstrie> kvark: it sounds like there *should* be a way to move an owned pointer into the managed heap. not sure how tho
[15:09:13] <maik> rusti: let a = ~"hello"; let b = @*a; (a,b)
[15:09:13] -rusti- <anon>:5:36: 5:38 error: type ~str cannot be dereferenced
[15:09:13] -rusti- <anon>:5          let a = ~"hello"; let b = @*a; (a,b)
[15:09:14] -rusti-                                              ^~
[15:09:14] -rusti- error: aborting due to previous error
[15:09:14] -rusti- application terminated with error code 101
[15:09:18] <maik> ups
[15:09:19] <nsf> it could do so for if statements as well, but it's harder
[15:09:23] <engla> it just disappears for generic functions, and you can't get it back because there is no Copy bound
[15:09:23] <bstrie> nsf: right
[15:09:38] <maik> rusti: let a = ~"hello"; let b = a.to_managed(); (a,b)
[15:09:47] <maik> .
[15:09:57] <nsf> and typically such match statement is transformed into an inlined binary search over ranges
[15:10:04] <nsf> which is nice
[15:10:06] -rusti- (~"hello", @"hello")
[15:10:18] <nsf> well, not necessarily in rust, but it's possible :)
[15:10:29] <maik> seems like it copies
[15:10:32] <maik> ?
[15:11:55] <kvark> maik: to_managed is a method of str. I need the conversion for arbitrary Send things instead
[15:12:27] <kvark> maik: and as we can see, to_managed doesn't move it either
[15:12:28] <engla> maik: yes it does
[15:13:05] <kvark> engla: any ideas how to move ~ to @?
[15:13:43] <engla> for a string?
[15:13:57] <engla> I don't think you can, either way
[15:13:59] <kvark> for any Send-bounded object
[15:14:40] * kvark feels sad for not being able to do this
[15:15:10] *** Joins: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu)
[15:15:28] <bstrie> kvark: perhaps you could file a bug?
[15:15:59] <zeuxcg> is extra::arc::Arc the solution if I need shared ownership?
[15:16:03] <kvark> bstrie: as a feature request? or to complain that it actually copies?
[15:16:35] <bstrie> kvark: both. don't be shy, we love bugs
[15:16:45] <engla> kvark: the int case is a special case
[15:16:55] *** Joins: jaen (jaen@moz-3827B24B.play-internet.pl)
[15:16:57] <kvark> zeuxcg: yes, according to that: https://github.com/mozilla/rust/blob/master/doc/tutorial-tasks.md
[15:17:08] <nsf> zeuxcg: there's also extra::rc::Rc
[15:17:11] <kvark> engla: I tried with custom structs too
[15:17:27] <kvark> bstrie: ok, just want to be sure it's not a dupe from the start
[15:17:29] <engla> well custom structs are implicitly copyable too, depending on content
[15:17:36] <nsf> zeuxcg: or maybe it's the same thing, but it's definitely called like that in the latest version :)
[15:17:42] *** Quits: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP) (Quit: Textual IRC Client: www.textualapp.com)
[15:17:45] *** Joins: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP)
[15:18:06] <nsf> zeuxcg: ah no, Rc is task local
[15:18:10] <zeuxcg> yeah
[15:18:49] <engla> rusti: fn to_at<T: 'static>(x: ~T) -> @T { @*x }    to_at(~())
[15:18:50] -rusti- @()
[15:19:11] *** Quits: logic_chains (Mibbit@10F8E3A.623B366D.7565C1AC.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:19:20] *** Joins: blarsen (Mibbit@CDEB6BFF.D3A46DCA.B1AF74A1.IP)
[15:19:24] <engla> now you could request a more efficient way to do this ^
[15:19:40] *** Quits: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP) (Client exited)
[15:19:57] <kvark> engla: your test case doesn't prove that it's not copied, does it?
[15:19:58] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[15:20:35] <kvark> rusti: fn to_at<T: 'static>(x: ~T) -> @T { @*x } let a = ~(); let b = to_at(a); (a,b)
[15:20:37] <engla> by copy by you mean something like memcpy?
[15:20:41] -rusti- pastebinned 8 lines of output: http://ix.io/7Aw
[15:20:51] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[15:20:58] <kvark> engla: ok, it works
[15:21:00] <engla> memcpy is likely. it's not a rust conceptual copy
[15:21:16] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[15:21:16] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/7_y8ig
[15:21:16] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[15:21:24] <kvark> engla: "error: use of moved value: `a`" is exactly what I would expect
[15:21:27] *** Joins: sebcrozet (sebcrozet@moz-7FB6C00B.w193-252.abo.wanadoo.fr)
[15:21:31] <kvark> engla: thanks for the solution!
[15:21:49] <engla> I don't even know what I'm solving, this is just what you did
[15:21:53] <engla> but in a generic function
[15:21:54] *** Joins: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP)
[15:22:11] *** Quits: maik (maik___@moz-1318C3AE.dip0.t-ipconnect.de) (Ping timeout)
[15:22:28] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[15:22:33] <kvark> engla: I don't quite understand why this works and just a "@*" (without a function) doesn't...
[15:22:50] <engla> your definition of works is inverted
[15:23:04] <engla> both do the move, the non-generic version is additionally permissive
[15:23:16] <engla> and permit you to used the moved-from value too
[15:25:41] <kvark> engla: I see... that's what I'd like to avoid. If I wanted to copy it, I'd tell that explicitly to Rust.
[15:25:49] <engla> a move is implemented with "memcpy" and the additional semantic that the moved-from value is defunct.  only with compiler optimizations (if present/possible?) will it be zero-memcpy
[15:26:17] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[15:26:17] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/8yJH3g
[15:26:17] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[15:26:17] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[15:26:18] <ghrust> 01[13rust01] 15bors pushed 7 new commits to 06auto: 02http://git.io/kisWjA
[15:26:18] <ghrust> 13rust/06auto 14ebfbbe2 15Felix S. Klock II: Port creader.rs from oldvisit to <V:Visitor> trait API.
[15:26:18] <ghrust> 13rust/06auto 14ec6ab8c 15Felix S. Klock II: Remove occurrences of `oldvisit` text to improve grepping for old oldvisit.
[15:26:18] <ghrust> 13rust/06auto 146af6b08 15Felix S. Klock II: Port middle/moves.rs from oldvisit to <V:Visitor> trait API.
[15:26:20] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[15:26:35] <Ms2ger> Hrm, I thought I'd seen that land already
[15:27:20] <kvark> engla: interesting... though I don't care what dirty tricks rust does under the hood - it may change any time. I want it to be clean on my (user) side.
[15:27:42] *** Quits: zeuxcg (zeuxcg@moz-80D1F912.hsd1.ca.comcast.net) (Ping timeout)
[15:28:55] <engla> we should ask someone what acutally happens with @*~x   I suspect it's a new allocation of a @ box and copying the contents of ~T into @T
[15:29:05] <engla> and the value is moved
[15:29:05] <pnkfelix> Ms2ger: you mean the visit stuff?  There were still a few more cases to port, somehow.  And I still need to do one more.
[15:29:17] <engla> move is a concept of ownership
[15:29:25] *** Joins: leonvv (leonvv@moz-7D83A5F1.ip.telfort.nl)
[15:30:05] <Ms2ger> pnkfelix, the grepping commit, at least
[15:30:37] <pnkfelix> Ms2ger: oh, no, I don't think that had made it into master.  It went through a test run earlier today but one of my lines was too long.  (whoops)
[15:31:02] <Ms2ger> pnkfelix, ah, I see
[15:31:26] <engla> kvark: hence, your question of an efficient way to transform ~T into @T still applies (I think)
[15:31:35] <kvark> engla: yeah, the value is moved, but then is somehow still available. An implicit copy is done? Is it something new in Rust that I'm not aware of? I strongly recall doing all copies where I need them explicitly at least in Rust-0.5
[15:31:56] <quasisphere> is rusti the bot coded in rust?
[15:32:01] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[15:32:07] *** Quits: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu) (Ping timeout)
[15:32:20] <engla> kvark: I don't know, simple types are implicitly copied, but the Copy trait is gone, so it's not possible with generics
[15:32:33] *** Joins: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu)
[15:32:52] *** Joins: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP)
[15:32:57] <engla> kvark: I'm pretty sure implicit copies have been around for a long time
[15:33:00] <leonvv> When I create a fixed-size vector of a struct, I get an error about the struct not being "copyable", does anyone know how to get around this?
[15:35:48] <bjz> sully: https://github.com/mozilla/rust/issues/8762#issuecomment-23271465
[15:35:55] <engla> does anyone know how I can build the documentation without rebuilding everything else
[15:37:24] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: Textual IRC Client: www.textualapp.com)
[15:37:35] *** Joins: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com)
[15:38:42] <kvark> leonvv: (seeing that nobody answers) it would help if you provide a sample code (gist,pastebin,etc)
[15:38:56] *** flaper87 is now known as flaper87|afk
[15:40:33] <leonvv> kvark: Thanks for answering, this is an example: http://pastebin.com/kaViwBbS
[15:40:43] <bjz> kvark: o/
[15:40:59] <leonvv> That code would give me an error about "SimpleStruct"
[15:41:05] <zol> http://hastebin.com/regepuwolu.rust -- what does this error mean? 
[15:41:26] <kvark> bjz: \o/
[15:42:06] <kvark> leonvv: the owned pointer is not implicitly copyable
[15:42:51] <bstrie> leonvv: when you create a struct like that, it creates the struct `SimpleStruct{a: ~"", b: ~""}` and then copies that 30 times. but it needs to know how to copy a struct like that. if you stick `#[deriving(Clone)]` on top of the definition of SimpleStruct, it might work
[15:42:59] <kvark> leonvv: there are ~[] constructors that allow you to construct each value, but I don't know if there are for a fixed-size array
[15:44:17] <bstrie> zol: you're not actually returning anything from that `move` function
[15:44:24] * kvark retires in favor of bstrie answer
[15:44:38] <bstrie> zol: in the signature you have `-> Point`, which means that you intend to return a point
[15:45:11] <zol> bstrie: Thanks, I just saw it myself after reading the error another 6 times
[15:45:22] <bstrie> zol: you were probably relying on `match` having a return value, but that only works when the match is the last thing in the function
[15:45:41] <zol> bstrie: Yeah, thanks a lot!
[15:45:50] <bstrie> np
[15:46:06] <leonvv> bstrie: No success :( But what do you mean with "know how to copy" ?
[15:46:18] <zol> Where should I look to find a random function and a function that can give me the current time?
[15:47:04] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[15:47:23] *** Joins: maik (maik___@moz-1318C3AE.dip0.t-ipconnect.de)
[15:48:26] <engla> zol: randomness is in std::rand
[15:49:01] <erickt> nmatsakis: ping
[15:49:13] <zol> engla: thank you!
[15:49:20] <engla> it's like this
[15:49:25] <engla> rusti: use std::rand::RngUtil; std::rand::task_rng().gen_int_range(0, 256)
[15:49:26] -rusti- 83
[15:50:07] <zol> engla: oh, cool! 
[15:50:20] <Thiez> dbaupp: I've investigated the rustray performance some more and I think it's a scheduler issue. Performance varies a lot between runs, I just tested with 20 runs and got times between 3.8 and 7.5 seconds
[15:50:27] <nmatsakis> erickt: pong
[15:50:37] <erickt> nmatsakis: good morning :)
[15:50:40] <zol> engla: In linux I know there is a function to get the current time, but do you happen to know if I will have to break out of rust and fetch the c function manually or is there some function built-in for that?
[15:50:43] <engla> zol: and there are multiple Rng implemented for speed or what you need
[15:50:58] <erickt> nmatsakis: got time to continue our conversation?
[15:51:02] *** Quits: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com) (Ping timeout)
[15:51:24] <engla> zol: I know there is a module extra::time, but I don't know what's in there :)
[15:51:43] <zol> engla: Thank you for pointing me into a direction! :)
[15:51:47] <nmatsakis> erickt: ok
[15:52:30] <olsonjeffery> huh.. region parameter syntax (eg trait Foo<'self> {) isn't supported in the latest rust-mode.el ?
[15:52:42] <kvark> leonvv: indeed it doesn't work with [deriving(Clone)]. You can use vec::from_fn() if you can tolerate an owned vector instead of a static one. I don't know how to do the same with static.
[15:52:44] <olsonjeffery> is it a limitation of the syntax highlighter or just not done?
[15:53:14] *** Joins: jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[15:53:16] *** flaper87|afk is now known as flaper87
[15:53:23] <erickt> nmatsakis: so the main bit I wanted to ask you about is whether or not you thought generators would act differently in regard to uniques/moves/lifetimes than a function that takes a closure. I started working on a couple examples here where they seem to be identical: https://gist.github.com/erickt/6325347
[15:53:30] <pnkfelix> olsonjeffery: I suspect it is just an oversight
[15:55:58] <nmatsakis> erickt: it seems resonable that they would be the same
[15:56:00] <olsonjeffery> g
[15:56:04] <olsonjeffery> acrichto: ping
[15:56:11] <zol> Can you have a block in a match? That is, perform multiple statements inside one of the cases in a match? 
[15:56:16] <leonvv> kvark: If I remember correctly I got error messages when I tried to mutate an owned pointer inside a struct
[15:56:32] <nmatsakis> erickt: since you can think of `yield` as a kind of "call" in a sense
[15:56:42] *** Joins: mrordinaire (Mibbit@1A659656.A607747.FD383126.IP)
[15:56:43] <engla> zol: { } blocks are expressions, so naturally yes
[15:56:53] <kvark> leonvv: could you share that code as well?
[15:56:59] <erickt> nmatsakis: yeah, I guess generators are pretty much the same thing as receiving a continuation and calling into it multiple times
[15:57:30] <pnkfelix> erickt: and capturing the continuation when you do yield, right?
[15:57:30] *** Joins: ozten (ozten@moz-8B3F407D.hfc.comcastbusiness.net)
[15:57:38] <erickt> yeah
[15:58:04] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[15:58:35] <erickt> so I suspect it might not require that much extra machinery in typeck to support generators
[15:59:10] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[15:59:19] <erickt> all the heavy lifting would happen in trans during the state machine generation
[15:59:30] <zol> engla: Rust is so awesome, thank you!
[15:59:49] <engla> don't thank me for that ;-)
[16:00:47] <nmatsakis> erickt: right
[16:01:35] <leonvv> kvark: I'm not able to reproduce the problem, I will try your suggestion using an owned pointer, thanks for you help!
[16:04:31] <pnkfelix> any emacs users want to give PR 8747 a look over so that I won't feel too evil about r+'ing it myself?
[16:05:10] <erickt> nmatsakis: the nice thing about doing the state machine in trans is that we can cheat with regards to uniques and references. My attempts of writing generators in pure rust required some ugly unsafe blocks in order to get them to work
[16:05:10] <zol> pnkfelix: How can I help? I don't know what PR 8747 means.
[16:05:26] <zol> pnkfelix: I use emacs24 on ubuntu 13.04 if that's relevant.
[16:05:45] <pnkfelix> zol: "PR" means "Pull Request."  So "PR 8747" refers to: https://github.com/mozilla/rust/pull/8747
[16:06:03] <zol> pnkfelix: Oh, thank you for the clarification.
[16:06:31] <acrichto> olsonjeffery: pong
[16:06:34] <pnkfelix> zol: That PR has a link to a bug ticket with a pretty thorough discussion of the problem I encountered.  (At some point I hope to send a bug into emacs-dev but I have not yet done so.)
[16:06:59] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[16:07:06] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[16:07:26] *** Quits: jaen (jaen@moz-3827B24B.play-internet.pl) (Ping timeout)
[16:07:33] <zol> pnkfelix: Yeah, I found it, reading at the moment. Have a feeling that this is above me, (or that I am in for a trip down the rabbit hole that is the magic of emacs.)
[16:07:42] *** Quits: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP) (Quit: lmandel)
[16:07:59] <pnkfelix> zol: Yes, I am thinking I should have said "elisp hackers" instead of "emacs users"
[16:08:17] *** Joins: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP)
[16:08:22] <nmatsakis> erickt: what's really required I guess is a nice mechanism for rewriting a fn into something where local variables are stored in a struct
[16:08:29] <nmatsakis> erickt: this would potentially be useful in other contexts as well
[16:08:41] <nmatsakis> erickt: if we wanted to avoid baking generators into trans
[16:08:44] <erickt> nmatsakis: I was just about to mention that :)
[16:08:56] <klutzy> anyone knows how to build llvm of specific host, without touching any other thing?
[16:08:56] <pnkfelix> zol: But then again, it is ever so much fun to explore the rabbit holes of emacs.  Yay M-x help f
[16:09:04] <klutzy> I knew before but forgot :'(
[16:09:57] <zol> pnkfelix: :D
[16:11:19] <erickt> nmatsakis: one neat thing about having this local-variables-in-a-struct is that we could have a closure we could move around without needing to malloc a box to store the locals
[16:12:37] <zol> http://hastebin.com/jehituvoqa.rust -- on line 36, is it the local variable that is immutable? I get a "cannot assign to immutable argument" error, but from what I can tell, the argument type is a mutable box of type Point, and I return a mutable box of type Point? 
[16:12:40] <bjz> nmatsakis: what do you mean by a 'generator' in this context?
[16:12:54] <erickt> bjz: a python style generator
[16:12:59] <bjz> oh ok
[16:13:04] <bjz> yeah, thought so
[16:13:05] <erickt> bjz: as in `gen foo() { yield 5; yield 7; }`
[16:13:16] <bjz> yep
[16:13:34] <kvark> leonvv: yw, good luck!
[16:13:47] <erickt> bjz: I'm getting more and more excited about them. Mainly because writing iterators is a pain in the butt
[16:14:16] <bjz> erickt: you mean implementing new ones?
[16:14:25] <bjz> erickt: or useing them?
[16:14:31] <erickt> bjz: implementing
[16:14:38] <bjz> ok
[16:14:45] <bjz> yeah, I've seen
[16:15:01] <nmatsakis> erickt: yes, that is more-or-less the plan for replacing closures with traits -- though if you want to move it around without a pointer, you will need to write the code to be generic rather than using e.g. an object type
[16:15:39] *** Joins: mib_7vjxtg (Mibbit@moz-F417FACE.rev.stofanet.dk)
[16:16:27] <erickt> nmatsakis: is there a PR for replacing closures with traits?
[16:16:34] *** Quits: kvark (Mibbit@9A8A5739.49975FB2.AE2D72A6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:17:24] *** Joins: eatkinson (eatkinson@moz-6C08E02F.dsl.bell.ca)
[16:17:32] <nmatsakis> erickt: No, it's an ongoing process.
[16:17:50] <nmatsakis> erickt: there are a number of blocking bugs to fix first
[16:18:24] <nmatsakis> erickt: there should be an issue, I should go fill it in with my current mental state about the best way to get from here to there
[16:19:01] <nmatsakis> erickt: certainly it would be helpful to have some facility for writing syntax extensions that take code and rewrite variable references to go through a "self" pointer or something like that
[16:19:12] <zol> rusti: struct Point {x: float, y: float}; fn assignLocally(p: @mut Point) { p = @mut Point {x:10.0f,y:20.0f};}; let mut p = @mut Point { x: 5.0f, y: 6.0f };
[16:19:15] -rusti- pastebinned 5 lines of output: http://ix.io/7AA
[16:19:22] <nmatsakis> erickt: that takes some thought I think. but if we did it right, we could address both generators and more genreal closures
[16:19:41] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[16:19:54] *** Joins: fread2281 (zcarterc@moz-CB181B42.dia.static.qwest.net)
[16:19:58] <SiegeLord> Can these generators make mutating iterators?
[16:20:23] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[16:20:25] <zol> Oh, I figured it out. :)
[16:20:43] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[16:21:37] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Connection reset by peer)
[16:21:47] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[16:21:49] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[16:22:09] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[16:22:40] <mitsuhiko> erickt: stay excited about generators, they are awesome
[16:22:42] <mitsuhiko> i want them :D
[16:22:48] <erickt> mitsuhiko: :)
[16:23:01] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[16:23:01] *** ChanServ sets mode: +o tjc
[16:23:24] <mitsuhiko> i think the best proposal yet was the one where the return value is a generic Iterator<T> which generates a struct behind the scenes that encapsulates the state
[16:23:29] * zol feels like he wants to get excited about generators as well..!
[16:23:41] <zol> What are generators, if you don't mind me googling first.
[16:23:46] <erickt> nmatsakis: are you thinking along the lines of every function's locals are stored in a struct, and then at trans time those locals may or may not be lowered into proper locals?
[16:23:57] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[16:24:26] <erickt> zol: check this doc out about python generators: http://wiki.python.org/moin/Generators
[16:24:52] <erickt> zol: they are conceptually pretty similar to what I'm trying to achieve.
[16:25:00] <zol> Oh, yes, I am also highly excited about generators! erickt: yeah, I've read that before, highly usable! Think it exists in C# as well?
[16:25:03] <SiegeLord> I remember a thread about generators over at D-land, and they were rejected because they could only create one type of iterator out of a whole bunch that are (apparently) commonly used in D
[16:25:19] <erickt> zol: they do exist in C#
[16:25:29] <mitsuhiko> SiegeLord: because they want to do everything with ranges
[16:25:41] <mitsuhiko> rust is more practical on that front :)
[16:25:48] <SiegeLord> An iterator is a range
[16:26:00] <mitsuhiko> oh stop nitpicking
[16:26:07] <SiegeLord> That's a fact :P
[16:26:09] <mitsuhiko> you know what i mean :)
[16:26:47] <mitsuhiko> also, rust's iterators are not at all compatible with d's ranges because the act of iterating is the signalling process
[16:27:03] <mitsuhiko> whereas in d a range indicates its state through a separate method
[16:27:09] <mitsuhiko> which is pretty terrible if you want to use them concurrently
[16:27:17] *** Quits: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP) (Client exited)
[16:27:47] <nmatsakis> erickt: hmm actually I think my thinking was a bit sloppy. I guess that in the case of closures, you only want to convert the upvars
[16:27:53] <nmatsakis> erickt: vs generators where you want to convert everything
[16:28:07] <zol> erickt: thank you again
[16:28:27] <nmatsakis> erickt: might be that generators ARE best handled in trans
[16:28:34] <SiegeLord> mitsuhiko: That doesn't strike me as a crucial difference
[16:28:42] <olsonjeffery> acrichto: hey i commented on the PR for the libuv work you did
[16:28:46] <nmatsakis> erickt: though I'm still inclind to say if it should be a syntax extension
[16:28:54] <mitsuhiko> SiegeLord: it's pretty crucial if you look at how the other range types are implemented
[16:28:56] *** Quits: mrordinaire (Mibbit@1A659656.A607747.FD383126.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:29:00] <nmatsakis> erickt: but that requires some amount of syntax extension support that we lack
[16:29:05] <mitsuhiko> ranges have more to do with containers than with iterators
[16:29:10] <olsonjeffery> acrichto: and i see you replied.
[16:29:21] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[16:29:31] <mitsuhiko> a range you can passively look at and ask it about its state, which is required for some operations with them
[16:29:36] <mitsuhiko> with a rust iterator you cannot do that
[16:30:05] <erickt> SiegeLord: my main reason to implement them is I'd like to be able to port serialize.rs to use iterators because they're easier for llvm to optimize. But trying to write a syntax extension that can generate an encoder/decoder requires generating a complicated state machine, which is most of the work for supporting generators
[16:30:06] <olsonjeffery> acrichto: the #libuv folks are quite ambivalent about mingw support.. they'll take patches but they don't really care to support it themselves and don't really advertise along those lines.. all the node.js build tooling, etc is targetting msvc
[16:30:11] <jld> kemurphy: trans::adt was my attempt at unifying structs and enums (and the N places scattered around trans that cared about enum layout), so if that didn't exist when you were working on this then, yes, things have changed a lot.
[16:30:34] <mitsuhiko> olsonjeffery: does rust care about mingw?
[16:30:46] <jld> kemurphy: Though, if I recall correctly, structs and enums could still do with a bit more unification.
[16:30:46] <mitsuhiko> i know it builds currently with it, but i always figured that's a temporary thing
[16:31:16] <erickt> nmatsakis: the reason why I think generators need to be done in trans instead of libsyntax is it's really hard to respect the move/reference rules without knowing the types of the locals
[16:31:16] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[16:31:16] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/kisWjA
[16:31:16] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[16:31:27] *** Quits: eatkinson (eatkinson@moz-6C08E02F.dsl.bell.ca) (Quit: eatkinson)
[16:31:29] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[16:31:32] <engla> mitsuhiko: there are sketches of some more range properties like random access iterator
[16:31:36] <engla> (in rust
[16:31:41] <engla> )
[16:32:21] <nmatsakis> erickt: I'm actually not sure that's true?
[16:32:40] <acrichto> olsonjeffery: oh that's unfortunate, we probably just shouldn't upgrade libuv at this point right nwo then
[16:33:03] <erickt> nmatsakis: maybe :) I wouldn't be surprised if there was a way to do it
[16:33:13] <bstrie> I heard that TLS just landed in libuv, or something. wonder if that's something worth using
[16:33:20] <acrichto> olsonjeffery: I think I've seen that we want to move towards msvc, right? Perhaps we can just wait until we move towards that to upgrade libuv
[16:33:31] <olsonjeffery> acrichto: someone has to put in the work
[16:33:36] <acrichto> yeah :(
[16:33:40] <SiegeLord> I'll be a sad day when MinGW is no longer supported
[16:33:42] <kemurphy> jld: trans::adt is beautiful, i'm trying to move that unification all the way up to the ast level
[16:34:13] <erickt> nmatsakis: what I found is that sure I could figure out the right combination of Option<foo>, .take(), and .get_ref() to get a particular example to work, I wasn't sure if I could do it for an arbitrary untyped function
[16:34:22] <cmr> bstrie: the earlier failures were stack shenanigans.
[16:34:30] <acrichto> olsonjeffery: I'll revert back to the old libuv for now, it's what works and getting this working is more important I think
[16:34:31] <cmr> They should be gone.
[16:34:41] <bstrie> cmr: but will they resurface when stacks are not hunormous?
[16:34:50] <kemurphy> jld: it was going well until i encountered Woe and Sadness in the pattern-matching code
[16:35:03] <bstrie> transt::adt::{Woe, Sadness}
[16:35:11] <mitsuhiko> SiegeLord: any specific reason?
[16:35:11] <nmatsakis> erickt: hmm. ok, yes, I see your point.
[16:35:34] <SiegeLord> mitsuhiko: C99
[16:35:54] <mitsuhiko> SiegeLord: i think rust will need to support msvc at one point, so c99 is out anyways
[16:36:01] <mitsuhiko> aside from that 2013 has more c99 than before
[16:36:02] *** Joins: graydon (Adium@A5087023.2354C43D.D8E68FF6.IP)
[16:36:02] *** ChanServ sets mode: +qo graydon graydon
[16:36:14] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[16:36:18] <nmatsakis> erickt: yes, you are correct now that I think harder about it
[16:36:38] <SiegeLord> mitsuhiko: Relative compliance is irrelevant... it's the absolute featureset that is important :P
[16:36:39] <erickt> nmatsakis: for an example, here's a partially finished hand written generator that's trying to support yielding moved elements from a vector: https://gist.github.com/erickt/6343539
[16:36:40] <cmr> bstrie: maybe, but if it does, we need to work out stack growing mechanism around it.
[16:36:47] <cmr> bstrie: at least that's the plan afaik
[16:36:52] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[16:37:03] <bstrie> is there any observable perf difference from jemalloc yet?
[16:37:11] <SiegeLord> Anyway, the point is my own libraries... if I write a C99 library, how am I to use it in Rust?
[16:37:13] <cmr> allocations are ~4x faster
[16:37:30] <mitsuhiko> SiegeLord: compile the library in mingw?
[16:37:34] <mitsuhiko> does not mean that rust will need to be compiled in it
[16:37:46] <Ms2ger> SiegeLord, give up on Windows? ;)
[16:37:48] <SiegeLord> I'd have to have MSVC and MinGW installed :P
[16:37:54] <nmatsakis> erickt: that is interesting, makes a good case for a deeper integration
[16:38:07] <SiegeLord> Ms2ger, With Ballmer leaving... it might no longer be a certainty ;)
[16:38:19] <nsf> uhm, why rust doesn't call abort() on fail!?
[16:38:41] *** Quits: leonvv (leonvv@moz-7D83A5F1.ip.telfort.nl) (Client exited)
[16:38:41] <nsf> doing so will make it a bit more debug friendly
[16:38:46] *** Quits: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu) (Ping timeout)
[16:38:57] <nsf> of course unless you handle failure and all that, it should call abort() imho
[16:39:10] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:39:11] <Ms2ger> Is it so? I understood that abort() was bad for debuggability
[16:39:14] <pnkfelix> nsf: You can set a break point on the stack unwinding function
[16:39:21] <pnkfelix> nsf: I think that will get you what you want
[16:39:25] <nsf> pnkfelix: I can, but I always forgot its name
[16:39:29] <nsf> forget*
[16:39:30] <cmr> nsf: because task failure is a normal part of the task model.
[16:39:30] <pnkfelix> nsf: yeah, same here
[16:39:31] *** Joins: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu)
[16:39:37] <pnkfelix> nsf: (I was just about to look it up again)
[16:39:43] <cmr> rust_begin_unwind iirc
[16:39:56] <bstrie> we can rename it to rust_abort :P
[16:40:16] <pnkfelix> nsf: It is indeed rust_begin_unwind
[16:40:16] <cmr> it doesn't abort anything, it just unwinds the stack and runs destructors.
[16:40:20] <nsf> pnkfelix: k
[16:40:24] <cmr> Ms2ger: it creates a core dump.
[16:40:30] <nsf> pnkfelix: thanks
[16:40:54] <nsf> also if you run gdb abort breaks there
[16:40:57] <nsf> leaving the stack trace
[16:41:05] <pnkfelix> nsf: My usual way of reminding myself: 1. Start gdb on rustc, 2. set bkpt on main(), 3. run, 4. after hitting aforementioned bkpt, then use tab-completion after typing in "b rust_"
[16:41:15] <nsf> oh, I guess if rust unwinds
[16:41:23] <nsf> then it can call abort only at the end of unwind
[16:41:28] <nsf> which will leave no stack trace anyway
[16:41:32] <nsf> so, it's pointless
[16:41:36] <nsf> sorry then :)
[16:41:37] <engla> nsf: fail is just for one task too
[16:42:06] <nsf> pnkfelix: :) now I need to remember that as well, haha
[16:42:30] <nsf> I'll just memorize the rust_begin_unwind thing
[16:42:30] <zol> Do you really have to create one implementation for each ptr type of a type? Further down at http://static.rust-lang.org/doc/tutorial.html#methods
[16:43:00] <cmr> zol: no, read further.
[16:43:10] * nmatsakis wishes C were stricter about int vs uint
[16:43:36] <pnkfelix> nsf: Well, the problem with remembering just "rust_begin_unwind", is that I don't think people are particularly wedded to any of the names we have for anything
[16:43:43] <Ms2ger> Or just integer conversions in general
[16:43:49] <pnkfelix> nsf: e.g. The transition away from fmt!, for example
[16:44:04] <pnkfelix> nsf: better to learn how to re-fish for it on demand, IMO
[16:44:14] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[16:44:18] <nmatsakis> Ms2ger: yes that too
[16:44:26] <cmr> well ifmt will be renamed to fmt when fmt goes away aiui
[16:44:36] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[16:44:40] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[16:45:21] <engla> it will actually be renamed to format!()
[16:45:31] <pnkfelix> cmr: I think you are missing forest for trees in my overall point.  The format of fmt is changing.  I don't object, but it means that memorizing little details is not a good way to go right now.
[16:46:10] <Ms2ger> engla, I hear the reddits saw red because the horrifying shortness of "fmt" and "str"
[16:46:11] <cmr> pnkfelix: ah, yeah
[16:46:41] <bstrie> Ms2ger: the opinion of reddit has nothing to do with this
[16:46:41] <SiegeLord> format is 6 letters long though, it fits the cutoff ;)
[16:46:58] <zol> cmr: Ah, so you will be fine most of the time by just having a borrowed pointer function definition? 
[16:46:59] <cmr> The cutoff is for keywords.
[16:47:03] <cmr> zol: yes.
[16:47:12] *** Joins: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net)
[16:47:49] <zol> cmr: Thank you, guess I misinterpretated that passage before I went on. 
[16:48:43] <zol> One of the many things that I prefer over Go is that Rust got generics. Way to go everyone!
[16:49:15] <nsf> another thing that kicks me hard sometimes
[16:49:26] <nsf> u32? oops, I want signed, rename -> s32...
[16:49:28] <nsf> oops
[16:49:30] <nsf> :)
[16:49:55] <nsf> for some reason i32/u32 feels unintuitive
[16:50:00] <bstrie> zol: we appreciate the praise, but we've heard all the go vs. rust comparisons before :) let's not incite any language wars
[16:50:10] <SiegeLord> I guess it's not too important what compiler is used to build rustc, what's more important is what linker it can use and what libraries it can link with
[16:50:25] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[16:50:28] <zol> bstrie: *grins* Ok, I will keep it to myself unless it's objective. :)
[16:50:37] <mark_edward> cmr: pong
[16:50:41] <cmr> mark_edward: hi
[16:50:46] <cmr> mark_edward: trait objects have been fixed!
[16:50:47] <bstrie> zol: no, we don't want to be compared to objective-C either :P
[16:50:48] <SiegeLord> It's been really frustrating to have issues with that with D on Windows, in my experience
[16:50:52] <cmr> Was going to ping you but you weren't around.
[16:50:59] * mark_edward explodes with joy
[16:51:12] * zol rofls at bstrie.
[16:51:13] * bstrie cleans up bits of mark edward from the walls and carpet
[16:51:21] <mark_edward> yeha i've had internet problems, just got fixed 10 minutes ago
[16:51:37] <erickt> nmatsakis: what exactly are upvars? Are those variables stored in a closure's environment?
[16:51:41] <SiegeLord> Ideally rust wouldn't need a C compiler environment at all, but that might be a pipedream
[16:51:58] <mark_edward> cmr: how's progress on rustdoc_ng? it's been a week now, right?
[16:52:18] <cmr> mark_edward: it has been a week!
[16:52:33] <cmr> SiegeLord: we won't once lld is more complete
[16:52:55] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[16:52:57] <cmr> mark_edward: only little polish work. I started uni, so not as much free time
[16:52:58] <bstrie> rustdoc_ng is done, which means that it's time to completely start over with a new approach. throw out all the old code!
[16:52:59] <SiegeLord> cmr: Where will the C runtime come from?
[16:53:32] *** Joins: orshem (orshem@C5E06B1E.A5B6B765.E3D28531.IP)
[16:53:40] <cmr> SiegeLord: won't need one
[16:53:55] <cmr> libuv and the eventually-pure-rust math library should provide all.
[16:54:07] <cmr> ...although I suppose libuv might need a libc
[16:54:25] <nmatsakis> erickt: yes that's what I mean by upvars
[16:54:35] <erickt> cmr: we could always pull a Go and write our own syscall API
[16:54:45] <cmr> erickt: dbaupp and aatch already have
[16:54:59] <erickt> cmr: *shock* *awe*
[16:55:04] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:55:10] <cmr> nothing wrong with it, it's better to not go through the libc for syscalls if you can avoid it.
[16:55:57] <erickt> nmatsakis: how do upvars, methods, and closures interact? Do methods have a self pointer and an environment? Or is self stored in the environment?
[16:56:16] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[16:56:17] <mark_edward> so theoretically one could write a Rust OS right now?
[16:56:21] <zol> engla: Found the time functions I was looking for, extra::time was the right direction.
[16:56:30] * erickt really should know this after my failed attempts to clean up the function call code
[16:56:31] <bstrie> mark_edward: people have already written a few kernels I think
[16:56:35] <cmr> mark_edward: already done
[16:56:39] <cmr> and I'm working on one too
[16:56:47] <bstrie> rustboot_ng
[16:56:51] <cmr> no :p
[16:56:52] <mark_edward> but like a real one with malloc and stuff
[16:57:07] <bstrie> people have written allocators in rust
[16:57:09] <mark_edward> cmr: what does _ng mean?
[16:57:10] <cmr> dbaupp has a pure-rust malloc implementation, although not bare metal
[16:57:16] <cmr> mark_edward: next/new generation
[16:57:23] <mark_edward> ah!
[16:57:43] <nmatsakis> erickt: methods are not closures, self is just a method argument.
[16:58:00] <nmatsakis> erickt: what I mean is: methods and top-levle functions have no environment, they just have arguments
[16:58:10] *** Joins: jclements (jclements@moz-DA3E01C8.wireless.calpoly.edu)
[16:58:13] <mark_edward> have the changes with fmt! landed as of today?
[16:58:23] <nmatsakis> erickt: closures have an environment which contains upvars -- one of which may be self -- as well as normal arguments
[16:58:40] <erickt> nmatsakis: gotcha
[16:58:45] <cmr> mark_edward: ifmt, yes.
[16:58:47] <nmatsakis> erickt: if we were going to "remap" a closure into an objcet type,
[16:58:55] <nmatsakis> erickt: then the `self` of the object type would be the environment,
[16:59:05] <nmatsakis> erickt: so the `self` that came from the upvars would wind up being something like `self.self_` or something
[16:59:46] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[16:59:56] <erickt> nmatsakis: is it possible for a local in a closure to be lifted into an upvar?
[17:00:09] <mark_edward> are there any docs on the new format! syntax yet?
[17:00:19] <zol> Using fmt!, how are you supposed to print an i32? 
[17:00:28] <cmr> rusti: fmt!("%d", 42i32)
[17:00:33] -rusti- pastebinned 7 lines of output: http://ix.io/7AB
[17:00:33] <nmatsakis> erickt: no
[17:00:35] <cmr> oh
[17:00:45] <cmr> zol: well you'd use %? or %s plus to_str
[17:00:51] <acrichto> rusti: format!("%d", 42i32)
[17:00:51] -rusti- <anon>:5:23: 5:28 error: argument never used
[17:00:51] -rusti- <anon>:5          format!("%d", 42i32)
[17:00:52] -rusti-                                 ^~~~~
[17:00:52] -rusti- error: aborting due to previous error
[17:00:52] -rusti- application terminated with error code 101
[17:00:52] <mark_edward> rusti: fmt!("%d", 42i32 as int)
[17:00:53] -rusti- ~"42"
[17:00:57] <acrichto> rusti: format!("{}", 42i32)
[17:00:58] -rusti- ~"42"
[17:01:05] <erickt> nmatsakis: so that would be something unique about generators then
[17:01:49] <mark_edward> im not clear on the whole new runtime thing
[17:02:02] <mark_edward> has all the old io stuff been removed? is the new runtime enabled by default
[17:02:12] <graydon> mark_edward: no and yes
[17:02:23] <graydon> the old io stuff called libc so just blocked the thread
[17:02:27] <zol> mark_edward: Thanks!
[17:02:35] <graydon> it is being excised as quickly as possible
[17:02:50] <erickt> nmatsakis: do you think closures-as-traits would expose the type of the closure structure to the end user?
[17:02:52] <graydon> those parts that there are viable replacements for in the new rtio (integrated io and scheduling) layer have been removed
[17:03:10] <graydon> eventually all thread-blocking io should migrate over to such replacements, but some are still wip
[17:03:11] <mark_edward> ok. so is the new io stuff able to fully replace old io? say for file io? are there docs on it?
[17:03:26] *** Quits: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu) (Quit: Leaving)
[17:03:28] <graydon> plumbing for file io just landed and is mid-transition
[17:04:18] <mark_edward> ah ok. so for now do you recommend just using the old io?
[17:04:46] <graydon> yeah, it's the only thing wired up to "user facing" interfaces. I think. lemme check the commit that added the plumbing, see how much it exposes.
[17:04:50] <erickt> nmatsakis: as in what's the return type here? `fn foo(x: int) -> ?fn() -> int { || x + 1 }`?
[17:04:57] <olsonjeffery> graydon: it exposes very little
[17:04:59] <graydon> mark_edward: ( https://github.com/mozilla/rust/commit/95c542e7fed0b6a76376f7c1146ac34499bbf238 fwiw )
[17:05:05] <olsonjeffery> the plumbing is in place to replace println et al
[17:05:15] <olsonjeffery> but im not sure what the path forward is
[17:05:18] <graydon> yeah, ok. so still old io, but be prepared for it to get swapped out and have the interface shift some
[17:05:25] <nmatsakis> erickt: I believe the plan is to expose types, yes, though there may be a standard trait for "thunks" (call once) and maybe for a 1-argument lambda or something
[17:05:28] <olsonjeffery> i guess i need to just look at std::io and make a checklist of stuff to replace?
[17:05:59] <nmatsakis> erickt: did you read my blog posts on the topic?
[17:06:05] <mark_edward> ah i see. thanks for the clarifications!
[17:06:06] <olsonjeffery> and the actual file io piece of being reimagined. so its not clear to me what stuff in std::io is going to be re-impl'd in newrt vs what will go away because of new abstractions in rt::io
[17:06:09] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[17:06:13] <graydon> olsonjeffery: more or less. std::io has a lot of very old idioms though, I would not take it as ... particularly _exact_ guidance on how to structure things.
[17:06:14] <erickt> nmatsakis: no, I think I missed it
[17:06:14] <nmatsakis> erickt: though they didn't quite dive into this issue, I think they focused on the run-once case (which in practice is the imp't one that we see)
[17:06:23] <olsonjeffery> yes.
[17:06:23] <cmr> olsonjeffery: for a highlevel view yes, but the interface really needs to be reworked
[17:06:40] <olsonjeffery> but i imagine println and company is reasonably set in its ways
[17:06:43] <nmatsakis> erickt: the posts are a bit old and I guess there is a need for a recap one...
[17:06:47] *** Quits: mib_7vjxtg (Mibbit@moz-F417FACE.rev.stofanet.dk) (Quit: http://www.mibbit.com ajax IRC Client)
[17:07:01] <nmatsakis> erickt: I'm mostly thinking of this http://smallcultfollowing.com/babysteps/blog/2013/06/03/more-on-fns/
[17:07:18] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[17:07:22] <erickt> nmatsakis: thanks
[17:08:16] *** Joins: spider-mario (spidermari@4C9DC03E.363ACB84.F049C0AD.IP)
[17:09:33] *** Quits: StarLight (StarLight@moz-BC9373.dynamic.avangarddsl.ru) (Ping timeout)
[17:09:47] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[17:09:59] <graydon> olsonjeffery: just looking over the interface. it looks like you implemented a fair amount of rtio (Reader, Writer, open, read, write, seek, tell) on FileStream...
[17:10:08] <engla> erickt, nmatsakis: will it be possible to .clone() (some) generators or closures?  like you can clone vec.iter() today
[17:10:11] *** Joins: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com)
[17:10:12] *** Joins: valenting (Thunderbir@moz-F42CB1FE.residential.rdsnet.ro)
[17:10:42] <graydon> olsonjeffery: does that just work? maybe most of what has to happen is just "migrate users of std::io to using rt::io::file"?
[17:11:01] <graydon> olsonjeffery: or maybe producing re-exports and convenience wrappers of rt::io::file in std::io?
[17:11:11] <olsonjeffery> graydon: well.. i think rt::io is supposed to move to the root of std..?
[17:11:12] *** Joins: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP)
[17:11:15] <olsonjeffery> once its deemed "stable" ?
[17:11:16] <nmatsakis> engla: if we succeed in representing closures as basically structs with a call method, and perhaps some sugar or macros to make this nicer, then certainly it is possible. 
[17:11:24] <olsonjeffery> i think that is brson's goal
[17:11:35] <graydon> oh. I wasn't sure about that. maybe best to talk to brson about strategy when he's in then, I am obviously way behind on strategy.
[17:11:37] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Connection reset by peer)
[17:11:40] <olsonjeffery> and my next PR is going to flesh out the rest of our file io scenarios (stat, etc) ..
[17:11:48] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[17:11:54] <olsonjeffery> graydon: a reexport would have the same effect
[17:12:19] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:12:26] <olsonjeffery> graydon: so what are the major sections of std::io ? file operations, printing to stdout, collecting input?
[17:13:20] <olsonjeffery> as i said.. we can do printing to stdout right now with the newrt interface .. you just have to go a little deeper than using FileStream because FileStream is set up to pretty much always use pread/pwrite, which don't seem to work well w/ STDOUT
[17:13:41] <bstrie> go go newio!
[17:13:52] <engla> nmatsakis: ok, that's neat. Especially for the cases of captureless &fn we have today often in iter().map() and .iter().filter() it would be neat.
[17:13:58] *** Joins: StarLight (StarLight@moz-62469A19.dynamic.avangarddsl.ru)
[17:14:19] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[17:14:55] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:15:05] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[17:15:10] <erickt> nmatsakis: didn't we use to some magic in the compiler that would copy/move values into a closure? Would thunks be re-adding this support?
[17:15:20] <graydon> olsonjeffery: it's a real hodge-podge. there are some utility reader/writer functions that are possibly duplicated in rt::io::extensions ... there are multiple Reader and Writer implementations (for raw file descriptors, for *libc::FILE, and for memory buffers)
[17:15:23] <olsonjeffery> graydon: and, yeah. if you have a strategy chat w/ brson, id love to be around for it, as my direction has been pretty immediately concerned with mapping more of the libuv, rather than a path to deprecating std::io
[17:15:28] <erickt> nmatsakis: used to *have*
[17:15:43] <nmatsakis> erickt: we still have copying closures, the idea would be to remove it from compiler and transition to a library
[17:15:57] <nmatsakis> erickt: that is, we still have it NOW, but we wouldn't under this plan 
[17:16:03] <olsonjeffery> graydon: i know brson also wants there to be impls of Reader/Writer that continue to use libc as fallbacks
[17:16:06] <SiegeLord> So anyway... back to my question yesterday, is there something I can look for in the assembly/llvm iR to verify that a function has a fixed stack?
[17:16:08] <nmatsakis> erickt: there would only be one sort of closure, always by ref
[17:16:10] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[17:16:10] *** ChanServ sets mode: +o pcwalton
[17:16:17] <olsonjeffery> the same with fallback impls of TcpStream that use bsd sockets/platform stuff
[17:16:30] <graydon> olsonjeffery: as well as a pile of weird code for forcing fsync and a number of convenience helpers that do the sort of "make a reader, pass it to closure" dance that predates & and &Trait and all sorts of stuff we can take for granted out
[17:17:01] *** Joins: leonvv (leonvv@moz-7D83A5F1.ip.telfort.nl)
[17:17:12] <graydon> olsonjeffery: ah. how do those fallbacks work?
[17:17:20] <olsonjeffery> graydon: good question!
[17:17:35] <olsonjeffery> this is all in brson's head.
[17:17:49] <graydon> ok. so if I recall correctly...
[17:18:29] <graydon> brson was going to have the whole system wired up to use a factory-model that would abstract out which implementations of Reader and Writer you were using at runtime
[17:18:29] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[17:18:37] <olsonjeffery> right now FileStream's backing impl is tightly coupled to whatever the scheduler's IoFactory provides
[17:18:37] <graydon> that's rt::rtio
[17:18:40] <olsonjeffery> yes.
[17:18:54] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[17:18:56] <graydon> and it has an XXX: about ~Object not working so just wiring the types to specific implementations via re-exports at the moment
[17:19:07] <graydon> so I expect it'll be a while before it's truly "switchable at runtime"
[17:19:16] <olsonjeffery> there's some cruft in rtio/uvio from before ~object was fixed
[17:19:26] <graydon> yeah, no doubt
[17:19:36] <olsonjeffery> that can be removed (and if you look at RtioFileStream, you'll see there's no newtype RtioFileStreamObject for it)
[17:19:37] *** Joins: eatkinson (eatkinson@moz-6C08E02F.dsl.bell.ca)
[17:20:00] <olsonjeffery> graydon: brson may have a different idea for the libc fallbacks, there
[17:20:18] <kmc> I want to (unsafely) set an Option<@T> field to None without touching the refcount at all... forget(x.take()) isn't good enough
[17:20:24] <olsonjeffery> like a different concrete type in rt::io that impls Reader/Writer .. maybe it just means adapting the stuff in std::io to that.
[17:20:49] <pcwalton> kmc: take a pointer, cast it to *(uint, uint), and throw (0, 0) in there :P
[17:20:53] <kmc> is there a better solution than just paving it over with memcpy()?
[17:20:59] <graydon> sure. in any case I expect that the idioms in std::io for wrapping libc are old enough that they'll be easier to rewrite (when appropriate switching technology exists) rather than try to preserve in the meantime
[17:21:08] <kmc> yeah that would work too ;P
[17:21:20] *** Quits: eatkinson (eatkinson@moz-6C08E02F.dsl.bell.ca) (Ping timeout)
[17:21:27] <graydon> olsonjeffery: but yes, probably best to ask brson for precise strategy
[17:22:04] *** Quits: Ms2ger (Ms2ger@moz-549ABB0C.adsl-dyn.isp.belgacom.be) (Quit: bbl)
[17:22:13] <graydon> huh. was the llvm regression supposed to have been fixed?
[17:22:29] <erickt> nmatsakis: can thunks be called multiple times?
[17:22:54] <olsonjeffery> erickt: i was wondering that same question.. (implied: once fns becomes moot?)
[17:23:11] <olsonjeffery> maybe different methods, one that consumes the thunk value in the invocation process?
[17:23:43] <erickt> thunks could be like generators, where the value is persistent across invocations
[17:23:44] <nmatsakis> erickt: no.
[17:23:47] <strcat> graydon: partly
[17:23:56] <nmatsakis> erickt: that's kind of the idea, that it can't be called more than once
[17:24:09] <strcat> graydon: it's our fault though - we're bitcasting functions with type_use, and LLVM doesn't know how to inline those in many cases
[17:24:16] <strcat> it should, but it doesn't
[17:24:29] <graydon> strcat: right, np. just checking if there was still stuff to do there.
[17:24:38] <strcat> I think the actual regression is fixed
[17:24:41] <pcwalton> graydon: if we don't compress the dynamic linker crashes.
[17:24:42] <graydon> (speed on nopt bots has not improved, so if so ..)
[17:24:43] <pcwalton> on linux.
[17:24:43] <strcat> but there's still a perf issue
[17:24:47] <pcwalton> brson and I are talking about this
[17:24:49] <graydon> pcwalton: woah!
[17:24:57] <strcat> graydon: I don't think it will effect the nopt ones
[17:24:59] <tjc> graydon: bug triage messages seem to not have been sent out
[17:25:01] <tjc> at least not to me
[17:25:04] *** Quits: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP) (Client exited)
[17:25:05] <graydon> tjc: checking
[17:25:07] <cmr> I didn't get one
[17:25:09] <erickt> nmatsakis: is that guaranteed by the type system or is there a runtime flag set on a thunk that says whether or not it's been evaluated?
[17:25:18] <olsonjeffery> so all "closures" effectively act like once fns in the promised land of thunk?
[17:25:31] <zol> Is there a way to make a local static variable? 
[17:25:40] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:25:40] *** ChanServ sets mode: +o brson
[17:25:54] <pcwalton> zol: "static mut" inside a function should work
[17:25:57] <pcwalton> but beware, it's unsafe
[17:26:02] <olsonjeffery> speak of the devil, and he shall appear
[17:26:13] <zol> pcwalton: Cool, thanks
[17:26:39] <nmatsakis> erickt: this would be guaranteed by the type system
[17:26:52] *** Joins: Sphax (sphax@moz-B9948B84.w80-9.abo.wanadoo.fr)
[17:27:01] <mark_edward> how can i find out the syntax for the new format! stuff?
[17:27:24] <bstrie> mark_edward: read the code, same as everything else in rust :P
[17:27:37] <mark_edward> lol okay
[17:27:48] <erickt> nmatsakis: would a thunk value then act a bit like a phantom type, where you can store the unevaluated thunk in a structure, but evaluating it moves it, thus invalidating the structure holding it?
[17:28:03] <maik> mark_edward, I think it's 1:1 the same as in python
[17:28:20] <bstrie> maik: but python doesn't have typechecking on format strings
[17:28:21] <erickt> nmatsakis: oh, I guess we don't need the phantom type to do that :)
[17:28:24] <mark_edward> maik: cool. just gotta remember how python works then!
[17:28:34] <bstrie> maik: probably more like C#, no?
[17:28:44] *** Joins: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP)
[17:28:50] <bstrie> not even sure if C# does static checking on format strings
[17:29:10] <maik> I meant syntactically :p
[17:29:23] <brson> graydon: I merged a patch over the weekend to not compress nor copy metadata. it was a 9% improvement on small test cases, didn't seem to actually affect cycle time, and also ended up causing the dynamic linker to crash, so I reverted. Will spend a little more time investigating this morning
[17:29:36] <bstrie> right, but python then also doesn't have a syntax for static checking on format strings :)
[17:29:37] *** Joins: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com)
[17:29:45] <graydon> brson: I saw. very odd.
[17:29:53] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[17:29:58] *** Quits: bytbox (s@moz-DC83764A.washdc.fios.verizon.net) (Ping timeout)
[17:29:58] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[17:30:03] <maik> okay maybe, but I am not too familiar with python :p
[17:30:07] <bstrie> but otherwise it would indeed be very nice to just be able to say "our new fmt things works exactly like this one other language, go read their docs"
[17:30:12] <erickt> nmatsakis: beyond generators, do you think there is a case for a closure that you move upvars into it and it *could* be called multiple times?
[17:30:19] *** Joins: bytbox (s@moz-DC83764A.washdc.fios.verizon.net)
[17:30:54] <erickt> nmatsakis: I suppose if we need that we could always make a struct/impl :)
[17:33:21] <mark_edward> what does `error: failed to find an implementation of trait std::fmt::Default` mean on a type implementing ToStr?
[17:33:32] *** Quits: squiddy (squiddy@moz-E783773E.adsl.alicedsl.de) (Ping timeout)
[17:33:33] <brson> bors's queue is empty
[17:33:37] <mark_edward> not type, but trait objecc
[17:33:40] * maik wonders why NASA is not involved in Rust
[17:34:15] <bstrie> maik: good point, get randall munroe in here to work on rust
[17:34:33] <mark_edward> Rust will BE the new NASA /smug
[17:35:25] <nmatsakis> erickt: well yes, I think those do come up, the idea was to represent them with structs/impls
[17:35:28] <tjc> maik: not sure how serious the question is, but from what I understand, NASA is very hesitant about using new programming languages, at least for anything mission-critical
[17:35:29] <bstrie> or let's use mozilla's marketing budget to get chris hadfield to wear rust shirts everywhere (ok that's canadian nasa, but still)
[17:35:32] *** Joins: Sonarpulse (user@moz-A783576F.dsl.pltn13.pacbell.net)
[17:35:39] <tjc> wait, Canada has a NASA?
[17:35:39] <nmatsakis> erickt: with some sort of macro to make generating instances prettier
[17:35:53] <strcat> tjc: CSA
[17:35:58] <cmr> tjc: well it's not /called/ NASA, but yes.
[17:35:59] *** Quits: valenting (Thunderbir@moz-F42CB1FE.residential.rdsnet.ro) (Ping timeout)
[17:36:09] <strcat> tjc: not to be confused with the confederate states of america
[17:36:15] * strcat doesn't think they had a very good space program
[17:36:17] <tjc> strcat: Or community-supported agriculture
[17:36:18] <brson> i recall a NASA engineer did ping us once asking what was up
[17:36:20] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[17:36:20] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/J6JOjg
[17:36:20] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[17:36:21] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[17:36:21] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/avloTw
[17:36:21] <ghrust> 13rust/06auto 14026304c 15blake2-ppc: doc: Link condition and error-handling tutorial from main tutorial
[17:36:21] <ghrust> 13rust/06auto 1436b5115 15bors: auto merge of #8764 : blake2-ppc/rust/doc-condition, r=graydon...
[17:36:21] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[17:36:31] <nsf> naming dilemma: sdl2::LAltKey vs. sdl2::key::LAlt? what do you think?
[17:36:33] <brson> we said not to put Rust in spaceships
[17:36:35] <brson> yet
[17:36:38] <bstrie> hahaha
[17:36:39] <strcat> poor three letter acronyms
[17:36:43] <tjc> putting Rust in spaceships seems like a bad idea
[17:36:54] <bstrie> yes, that was the reason I said "candian nasa" instead of "csa" :P
[17:37:10] <mark_edward> println!("{0!s}",obj) is giving me an unterminated format string error. what to do?
[17:37:40] <sully> well
[17:37:46] <sully> rust *is* Canadian Space C++
[17:37:54] <sully> (like how Ruby is Japanese Space Perl)
[17:38:04] <SiegeLord> mark_edward: Shouldn't it be {0:s} ?
[17:38:09] <olsonjeffery> what's the syntax to impl trait Foo for &trait objects of type &Bar ?
[17:38:10] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[17:38:11] <maik> what is NASA using for their spaceships ada? 
[17:38:22] <strcat> nasa doesn't have spaceships anymore :P
[17:38:22] <nsf> https://gist.github.com/nsf/6342168 <- uint to enum converter generator, works great btw, already had a chance to use it
[17:38:24] * strcat runs
[17:38:35] <cmr> olsonjeffery: impl Foo for &Bar
[17:38:37] <strcat> they pay russia to get them into space now, for real
[17:38:43] <bstrie> nsf: does that have applications beyond just wrapping SDL?
[17:38:46] <olsonjeffery> cmr: that choked for me..
[17:38:48] <strcat> and they're selling off their launch platforms
[17:38:51] <maik> haha
[17:38:53] <mark_edward> SiegeLord: python spec says "replacement_field ::=  "{" [field_name] ["!" conversion] [":" format_spec] "}"" but i'll try that
[17:38:57] <nsf> bstrie: it works for many C enum -> Rust enum cases
[17:39:06] <bstrie> ok
[17:39:06] <nsf> bstrie: I assume
[17:39:16] <strcat> they have a launch program still going but it's basically dead already
[17:39:24] *** Quits: victorporof_ (victorporo@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: victorporof_)
[17:39:26] <strcat> like, it's R&D where their funding was all cut
[17:39:30] <bstrie> nsf: perhaps you should link that from... somewhere. maybe the wiki. figure out where we mention bindgen
[17:39:35] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[17:39:42] <maik> okay 
[17:39:47] <strcat> rusti: ifmt!("{}", 5)
[17:39:47] -rusti- <anon>:5:9: 5:13 error: macro undefined: 'ifmt'
[17:39:47] -rusti- <anon>:5          ifmt!("{}", 5)
[17:39:47] -rusti-                   ^~~~
[17:39:48] -rusti- application terminated with error code 101
[17:39:55] <strcat> rusti: format!("{}", 5)
[17:39:56] -rusti- ~"5"
[17:40:01] <strcat> rusti: format!("{0}", 5)
[17:40:01] <olsonjeffery> error: cannot call a generic method through an object
[17:40:02] -rusti- ~"5"
[17:40:06] <olsonjeffery> ;+;
[17:40:09] <olsonjeffery> ;+;
[17:40:09] <strcat> rusti: format!("{1} {0} {0}", 5, 2)
[17:40:10] <maik> *what is NASA using for their mission critical projects, ada? 
[17:40:10] -rusti- ~"2 5 5"
[17:40:13] <olsonjeffery> ;_; !!
[17:40:20] <strcat> maik: probably
[17:40:23] <tjc> maik: they're using a subset of C, possibly some Fortran
[17:40:26] <nsf> bstrie: at the same time I don't think that many people actually need it, so I won't be putting a link to it anymore, two times is enough
[17:40:32] <tjc> before you get scared, they have a very laborious code review process
[17:40:42] <tjc> and where I say "subset" I mean things like "they don't use dynamic memory management"
[17:40:49] <brson> is anybody looking into last week's compile perf regression? it seems like it wasn't the llvm problem? so was it visitor related?
[17:40:51] <strcat> tjc: well and maybe they have really fancy static analysis
[17:41:03] <tjc> strcat: they definitely have static analysis, but they don't completely trust it
[17:41:21] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[17:41:28] <maik> what is dynamic memory? heap allocations?
[17:41:32] <strcat> brson: it's not the LLVM one because I bisected and found it *was* a regression, but it wasn't after my fix
[17:41:36] <tjc> maik: that is, their C code never calls malloc()
[17:41:45] <olsonjeffery> i want to believe
[17:41:52] <doomlord> C without dynamic memory management ... now, that i can do
[17:42:30] <jld> bstrie: trans::_match::{Woe,Sadness};
[17:43:03] <doomlord> thats like how we programmed the ps1
[17:43:35] <Seldaek> sounds.. fun?
[17:43:36] <zol> cool, got my game loop up and running!
[17:44:20] <darkf> doomlord: now write rust using only stack allocations and &
[17:44:21] <doomlord> its funny how the idea of "optimize for stack..(growable stack)"  did remind me of all those years ago when we didn't use malloc, just a stack :)
[17:44:54] <maik> ah that reminds me of sth
[17:44:58] <doomlord> ping pong between 2 stacks 
[17:45:13] <bstrie> what is the heap except a big ol shared stack
[17:45:26] <strcat> brson: we've regressed a lot in mem usage too
[17:45:27] <maik> why do I ever want to use @ if I can just use stack variables with `&`? 
[17:45:43] <zol> A trait implemented for a specific type, is it the same as an extension method in C#?
[17:45:51] <cmr> maik: non-obvious ownership semantics.
[17:45:57] <cmr> cycles
[17:46:09] <mark_edward> weird. calling to_str on a trait object where ToStr is a supertrait of that trait just seems to return the name of the underlying type...
[17:46:14] *** Quits: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com) (Quit: Leaving.)
[17:46:38] <olsonjeffery> brson: ping
[17:46:56] <maik> cmr, what do you mean with cycles?
[17:47:18] <strcat> if you have a graph of objects and no key
[17:47:20] <SiegeLord> Hmm, I'm getting the hunch that #[fixed_stack_segment] doesn't work on methods at all
[17:47:25] <strcat> you need @/@mut
[17:47:38] <SiegeLord> The generated assembly is identical, as far as I can tell...
[17:48:38] <maik> ah okay
[17:49:18] <cmr> strcat: is there any case you do have a key that isn't just a degenerate case of @/@mut?
[17:49:45] <strcat> I'm just saying if you have a key you can use a map or bimap instead
[17:50:32] *** Quits: orshem (orshem@C5E06B1E.A5B6B765.E3D28531.IP) (Ping timeout)
[17:50:36] <brson> strcat: do you know why mem usage regressed?
[17:50:49] <strcat> brson: no :(
[17:51:20] <strcat> we were down to ~1200MiB at one point
[17:51:25] <strcat> now it's something like 2000
[17:51:27] <strcat> or more
[17:51:31] <strcat> multiple regressions
[17:52:00] *** Quits: ozten (ozten@moz-8B3F407D.hfc.comcastbusiness.net) (Quit: ozten)
[17:52:07] <cmr> I'm going to try and get my bencher up on wednesday
[17:52:38] <brson> how do you zoom into the graphs on irfy?
[17:52:52] <bstrie> brson: click and drag to select a range?
[17:52:57] <brson> olsonjeffery: pong
[17:53:11] <olsonjeffery> brson: mousewheel
[17:53:20] <olsonjeffery> brson: my refined pitch for FileInfo https://gist.github.com/olsonjeffery/6344357
[17:53:21] <brson> ah, i don't have one of those
[17:53:34] <olsonjeffery> (i use twofinger school on my mbp)
[17:53:38] <bstrie> ah yes, I just realized it was the scrollwheel
[17:53:48] <olsonjeffery> scroll even
[17:54:24] <graydon> it's a pretty narrow window. I am happy to bisect if nobody else is on it.
[17:54:49] <strcat> also jemalloc decreased RES but increased VIRT
[17:55:03] *** Joins: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net)
[17:55:31] <cmr> I get my memory usage from cgroups, which I believe is RES but my observations have led me to believe otherwise (they uniformly show jemalloc increasing memory usage)
[17:55:36] <strcat> so a common place to hit OOM is the fork() for the linker, if you don't have overcommit all the way on
[17:55:57] <SiegeLord> I guess I'll just disable the cstack and hope nothing crashes 8)
[17:57:00] <brson> olsonjeffery: interesting idea implementing FileInfo for PathLike and FileStream
[17:57:02] <strcat> you can tell jemalloc to use less memory
[17:57:02] *** Joins: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com)
[17:57:06] <strcat> like freebsd's default config
[17:57:26] <strcat> performance vs memory tradeoff, as always
[17:57:53] <olsonjeffery> brson: i think it works! .net FileInfo is explicitly pitched as a wrapping for a String path.. and if you look at its semantics, you can create FileStreams all over the place to do IO
[17:58:12] <olsonjeffery> for us, we're better w/ housekeeping, hence the fn(self) methods
[17:58:34] <olsonjeffery> so i figured why not cut out the middleman.
[17:59:03] <olsonjeffery> and fn path(&self) -> Path could probably become fn path(&self) -> &'self PathLike
[17:59:15] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[17:59:18] <olsonjeffery> paths would just return themselves and FileStream would take a Path as a field
[17:59:31] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:59:35] <olsonjeffery> i like the idea of PathLike
[18:00:27] <olsonjeffery> brson: anyways.. i think this approach works.. im building out libuv stat mapping.. and im going to reorganize rt::io::file into conforming to this API after I finish that
[18:00:41] <olsonjeffery> assuming you have no objections
[18:01:31] <olsonjeffery> pretty much just file::open will remain as the sole entry point into file access from that module.. everything else will be built out in impls of FileInfo
[18:02:20] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[18:02:29] <olsonjeffery> and FileInfo will be defined in rt::io (only way to resolve dependency spaghetti)
[18:02:57] <olsonjeffery> i already had to do this with FileAccess and FileMode to allow encapsulate impl details of libuv stuff into uvio
[18:03:48] <quasisphere> is there anything in the library to turn strings into lowercase?
[18:03:51] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[18:03:55] <brson> olsonjeffery: it may not be appropriate for PathLike to implement FileInfo instead of Path, since &str implements PathLike. This would mean you can just call "foo".open(), etc
[18:04:03] <brson> which is a little strange
[18:04:07] <brson> "bar".sync()
[18:04:19] <olsonjeffery> strange... and great!
[18:04:23] <olsonjeffery> but, ok. fair enough.
[18:04:31] <bstrie> quasisphere: possibly only in the ascii module
[18:04:31] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[18:04:51] *** Joins: tikue (tkuehn@678D73BA.28259105.689607DE.IP)
[18:04:51] <bstrie> we probably don't have full unicode-aware lowercasing yet
[18:05:01] <olsonjeffery> let fs = "/user/foo/some/file.txt".open_read(); // that's not too bad
[18:05:06] <bstrie> because I'm guessing that we'd need something like libicu for that
[18:05:23] <olsonjeffery> also it isn't like users will be stubbing their toes, since they'll have to `use rt::io::FilePath;` to expose that..
[18:05:27] <quasisphere> bstrie: ah, thanks, I had overlooked that module
[18:05:34] <strcat> bstrie: we don't need libicu
[18:05:38] <olsonjeffery> or `use rt::io::support::PathLike`
[18:05:43] <olsonjeffery> so they know what they're getting into..
[18:05:47] <strcat> it's not hard to implement the unicode stuff ourselves like Go does
[18:05:51] <bstrie> strcat: not at all, ever? because that would be great if we could get away with it
[18:06:04] <strcat> bstrie: you want an enormous, insecure C library in-tree? ;p
[18:06:06] *** Joins: anders (anders@moz-329650BE.cust.bredbandsbolaget.se)
[18:06:28] <bstrie> strcat: no, but I was under the impression that it was also the only complete unicode-compliant lib of its kind
[18:06:28] <strcat> and it has a focus on UTF-16
[18:06:33] <graydon> strcat: Go does not implement a lot of unicode. it depends a lot where you draw the line.
[18:06:36] <brson> olsonjeffery: does .NET allow one to call FileInfo methods on file streams? it seems pretty strange to me to be calling most of these methods on a stream?
[18:06:46] <brson> -no question mark
[18:06:54] <strcat> graydon: it implements more than enough for most people though - graphemes, case folding, etc.
[18:06:59] *** Quits: anders (anders@moz-329650BE.cust.bredbandsbolaget.se) (Quit: anders)
[18:07:06] <strcat> I'm sure they'll keep adding more
[18:07:06] <brson> like, what does calling 'unlink' on an open file stream mean?
[18:07:18] <graydon> strcat: the strategy we've been following is to implement "minimal" (defined somewhat casually) subset of unicode in libstd and an optional binding to libicu in libextra.
[18:07:48] <bstrie> once again, if we can just do what go does then when people ask "why doesn't rust do all this other stuff" we can just point to go and shrug our shoulders. +1
[18:07:51] <olsonjeffery> brson: what does calling unlink on it mean if you called it on a top-level function in file::io while you had a FileStream open?
[18:08:05] <olsonjeffery> in this case, the file isn't removed until all open handles close
[18:08:12] <olsonjeffery> so the FileStream would remain valid
[18:08:21] <brson> olsonjeffery: even on windows?
[18:08:46] *** Quits: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[18:08:50] <olsonjeffery> brson: id have to look at libuv's impl to answer that
[18:09:07] <olsonjeffery> unlink could be a by-val self method
[18:09:15] <brson> olsonjeffery: does libuv expect these operations to be called on handles?
[18:09:20] <strcat> graydon: afaik ICU forces you to convert to UTF-16 for anything beyond simple stuff that we'd have
[18:09:22] <olsonjeffery> unlink is called on a path
[18:09:27] <strcat> so it's not ideal
[18:09:33] <olsonjeffery> FileStream would start keeping the path as a field, as i mentioned above
[18:09:44] <graydon> strcat: it's the only option for "complete" unicode in a liberal license
[18:09:56] *** Quits: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com) (Ping timeout)
[18:09:57] <graydon> strcat: you moved the goalposts. are you talking about "enough" unicode, or "complet"?
[18:09:59] <graydon> e
[18:10:07] <olsonjeffery> my point is that we don't have to hew *exactly* to FileInfo 100% and that it's a leaky abstraction, anyways.
[18:10:12] <Seldaek> strcat: yeah that's partly what derailed php6 and the unicode rewrite, dealing with the utf8/utf16 boundaries was a mess
[18:10:27] <olsonjeffery> i don't think the edges you've brought up negate its value. but i will defer to your judgement.
[18:10:30] <Seldaek> rust strings are utf8 right?
[18:10:34] <strcat> Seldaek: yes
[18:10:35] <cmr> Seldaek: always
[18:10:35] <graydon> strcat: I agree we can do "enough" in libstd. if we want "complete", you're talking years of work, or binding to icu.
[18:10:45] <Seldaek> that makes me happy :p
[18:11:06] <olsonjeffery> brson: and i will research the semantics of unlink's impl in windows and get back to you
[18:11:18] *** Joins: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com)
[18:12:23] <Seldaek> olsonjeffery: thanks for doing all this btw :)
[18:12:51] <graydon> strcat: we already do more than go on some counts, in the "enough" category. but it doesn't do normalization, collation, segmentation, transliteration, bidi, code conversions, regexps, any of cldr, etc. etc.
[18:13:05] <quasisphere> another silly question: assume I have an owned string and a static string, and I'd like to check if these are equal, how should I do that?
[18:13:33] <strcat> graydon: Go does normalization/collation/segmentation
[18:13:37] <graydon> strcat: I think we'll pick up normalizations (I was not sure, but it seems we will) and possibly some of collation, segmentation and case folding.
[18:13:40] <engla> quasisphere: static str == owned str
[18:14:00] <olsonjeffery> brson: and yes, the idea of impl'ing FileInfo for PathLike and FileStream is a little cheeky.. it occured to me while thinking about the ambiguity we discussed on friday night about operations that require a path vs those that require an fd and when to use which and whether a FileInfo needs to carry around an fd
[18:14:04] <graydon> strcat: where?
[18:14:07] <Seldaek> graydon: some translit would be cool
[18:14:14] <quasisphere> engla: compiler complains when I try to do tmp == "abc"
[18:14:19] <Seldaek> and regexes, but I realize that's a broader topic :)
[18:14:26] <engla> quasisphere: other way around
[18:14:42] <strcat> graydon: https://code.google.com/p/go/source/browse/?repo=text#hg
[18:14:46] <olsonjeffery> i feel like this abstraction provides a clean answer: PathLikes *never* carry the fd and FileStream carries it because that's its job. calls to open() et al will consume the existing FileStream and re-open it with new perms
[18:14:53] <strcat> graydon: they have their crypto/unicode stuff split out from the stdlib now
[18:14:55] <strcat> into packages
[18:15:05] <strcat> except for the extremely common stuff
[18:15:09] <zol> What's the idiomatic way of making constructors for structs? 
[18:15:11] <nsf> strcat: normalization isn't the part of the Go standard library afaik, it's in Go's "extra"
[18:15:20] <quasisphere> engla: wow, works, but is there a justification for this? seems pretty illogical :D
[18:15:27] <Seldaek> zol: fn new() 
[18:15:33] <olsonjeffery> and the resulting FileStream still satisfies FileInfo.. so there's an answer to questions about FileInfo's lifetime semantics when there's ongoing FileStream io happening
[18:15:36] <strcat> nsf: yeah but it's officially supported and doesn't wrap a C library, so that's essentially just making their regular distribution smaller
[18:15:40] <graydon> strcat: oh I see, they moved it to an external library.
[18:15:51] <engla> quasisphere: it's illogical, sure :(
[18:15:52] *** Joins: mschifer (Adium@moz-BBE3ABD.mv.mozilla.com)
[18:16:05] *** Joins: Florob (Florob@moz-39532932.de)
[18:16:09] <zol> Seldaek: Like fn new_gametime() -> GameTime {... GameTime {...}}?
[18:16:10] <brson> olsonjeffery: FileStream can only implement FileInfo only if it carries an extra Path?
[18:16:13] <strcat> graydon: they moved things like salsa20 to a separate crypto lib too
[18:16:44] <strcat> the 'go' package in Arch is 279MiB now :s
[18:16:49] <strcat> so I can see why...
[18:16:51] <Seldaek> zol: no sorry, impl GameTime { fn new() -> GameTime { GameTime { foo: bar } } } (man that doesn't read well on one line)
[18:16:53] <quasisphere> engla: is it just that someone forgot to implement the other direction, or is there some deeper explanation?
[18:16:58] <graydon> strcat: don't know what to say. we don't currently have the person-power to be doing that. more hands, maybe.
[18:17:07] <olsonjeffery> brson: i would imagine so, yes. It takes a &PathLike in open(), which is passed down to uvio.. we just get an fd back. so we would create a Path before passing it on to uvio, and then store that in the resulting FileStream struct that is returned to the caller.
[18:17:29] <strcat> graydon: yeah it doesn't have to be a priority at all, but I think we *should* aim to support more and more of unicode
[18:17:32] *** Joins: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com)
[18:17:47] <olsonjeffery> in this case, all of FileInfo's semantics are handled in the space of user-facing types (FileStream, PathLike, etc) and not within platform impls
[18:17:51] <zol> Seldaek: Aha, so you can use impl GameTime {...} for not only traits, but also for structs? 
[18:18:06] <olsonjeffery> which isn't a particular advantage of this approach, just pointing it out.
[18:18:07] <graydon> strcat: agreed.
[18:18:41] <olsonjeffery> brson: a Path will be the critical piece of internal data that any prospective version of FileInfo will have to keep
[18:18:44] <Seldaek> zol: yes impl Foo {} describes the methods of a struct, and impl Trait for Foo {} the methods of a traits on a given struct, e.g. https://github.com/mozilla/rust/blob/master/src/libstd/rt/io/mock.rs#L38
[18:18:46] <olsonjeffery> or str, whatever.
[18:19:20] <Seldaek> zol: you can see the highlighted one is just a plain implementation, and then some methods of Writer are implemented below
[18:19:22] *** Quits: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com) (Quit: Leaving.)
[18:19:48] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[18:19:55] <zol> Seldaek: Writer and Reader are the traits? 
[18:20:35] <brson> i wish i could accomplish more
[18:20:37] <Seldaek> zol: yes, they are common io traits 
[18:20:47] <zol> Seldaek: Cool, thank you very much
[18:20:48] <brson> acrichto: do you need help on the windows side of the libuv upgrade?
[18:21:43] <olsonjeffery> i would love for that libuv upgrade to land
[18:21:50] <olsonjeffery> we're using an older version of the uv_fs_stat api
[18:21:55] <acrichto> brson: I gave up trying to make libuv master build on mingw, so I went back to the current libuv, applied the process patch, and am working from that point. I don't think I'll be able to finish it until tonight though, so if you want to work through the compile errors I could just push the interim work
[18:22:00] <olsonjeffery> and it'd be much nicer to use what's in joyent/libuv's tip
[18:22:09] <acrichto> but it can't build on mingw?
[18:22:13] <Seldaek> brson: sometimes I feel a whole lot more would happen if we'd only have irc access 2hours a day or so :)
[18:22:16] <acrichto> or at least not with their build system
[18:24:16] *** Quits: mschifer (Adium@moz-BBE3ABD.mv.mozilla.com) (Quit: Leaving.)
[18:24:19] *** Joins: mschifer (Adium@moz-BBE3ABD.mv.mozilla.com)
[18:24:40] <tikue> strcat: ping
[18:24:43] <strcat> tikue: pong
[18:24:44] <Luqman> acrichto: you ping'd the other day?
[18:24:46] <brson> olsonjeffery: I prefer to only implement FileInfo for Path for now. To me it's a stretch to make a stream implement these operations.
[18:24:53] <brson> acrichto: i'll ping #libuv about the build issue
[18:25:00] <strcat> brson: I think it'd really help if we used posix_spawn to spawn the linker
[18:25:04] <strcat> it's always where I go OOM
[18:25:09] <tikue> strcat: you've mentioned lately that closure reform is one of the last major fixes rust needs. what specifically needs to change?
[18:25:10] <acrichto> Luqman: ah yes, I was working on something related to ARM that was breaking, but ended up figuring out the problem
[18:25:11] <brson> graydon: i'm not currently bisecting the regression
[18:25:15] <strcat> well, before I fixed my overcommit ratio
[18:25:17] <brson> strcat: why would that help?
[18:25:18] <graydon> brson: I am.
[18:25:20] <acrichto> Luqman: I had seen you were working in arm recently, so I ping'd
[18:25:30] <kmc> any general strategy for dealing with "cannot move out of captured outer variable"?
[18:25:35] <olsonjeffery> brson: understood
[18:25:39] <strcat> brson: because the default linux overcommit ratio doesn't make VM "free" unless you have swap
[18:25:46] <strcat> and lots of people have the defaults + no swap
[18:25:58] <strcat> so you go OOM on fork
[18:26:00] <tikue> kmc: deconstructing the struct?
[18:26:02] <Luqman> acrichto: ah ok, so the missing triple normalization thing you mentioned in your pull?
[18:26:03] *** Joins: dwhyte (dwhyte@1922756A.EDC594B0.7BF4A4B0.IP)
[18:26:23] <acrichto> Luqman: yeah, apparently "arm-linux-androidaebi" is not normalized, "arm--linux-androideabi" is
[18:26:40] <strcat> brson: glibc's posix_spawn knows how to use vfork for simple cases
[18:26:53] <strcat> so it won't double the VM
[18:27:07] <strcat> would help on 32-bit a lot
[18:27:21] <strcat> dunno if libuv's process bindings know how to do it
[18:27:21] <Luqman> acrichto: ah
[18:28:03] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[18:28:06] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:28:11] <kmc> tikue: it's not a struct.  i have f<T>(self, data: ~T) { do self.with_mut_base |base| { base.layout_data = Some(transmute(data)); } }
[18:28:45] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:29:17] <leonvv> What is the meaning of the Send trait?
[18:29:32] <tikue> leonvv: that it can be sent over channels 
[18:29:38] <tjc> cmr: I'm looking at https://github.com/mozilla/rust/issues/7685, which you opened
[18:29:39] <tikue> or the like
[18:29:50] <tjc> cmr: can't find a file called std-extra.rs -- does it still exist?
[18:29:58] <tikue> kmc: can you gist it with the error
[18:30:07] <brson> graydon: amazingly, after the no-decompress-metadata patch, rustc, when run from compiletest, operates just fine, but when run from the command line always segfaults
[18:30:20] <brson> during startup, in dl
[18:30:30] <graydon> highly suspicious!
[18:30:36] <graydon> any LD_LIBRARY_PATH settings?
[18:30:46] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[18:31:02] <strcat> or LD_PRELOAD
[18:31:28] <leonvv> tikue: Is there a way to make your structs sendable?
[18:31:29] <tikue> kmc: oh it's probably because you pass in self rather than &mut self
[18:31:38] <olsonjeffery> leonvv: Send is inferred if the contents of the type are only plain-old-data and/or unique ptrs (~)
[18:31:39] <tikue> leonvv: they are implicitly sendable unless they can't be
[18:31:55] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[18:31:55] <tikue> leonvv: anything with @ or @mut can't be sendable
[18:31:59] <brson> graydon: no. oh, it gets better. stage2/bin/compiletest also always segfaults from the command line, but runs just  fine frome make!
[18:32:00] <olsonjeffery> so any & or @ references make it non-sendable
[18:32:41] <strcat> or #[no_send] things like Rc
[18:32:46] <graydon> brson: I mean, when make or compiletest run, do _they_ adjust LD_LIBRARY_PATH?
[18:33:00] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[18:33:14] <kmc> tikue: http://pastebin.mozilla.org/2919751
[18:33:36] <brson> graydon: our makefiles do not. I don't know if make itself does
[18:33:39] <tikue> kmc: ah use a cell
[18:33:45] <kmc> ah right
[18:33:46] <kmc> thanks
[18:34:01] <tjc> Does anyone using Windows want to confirm whether https://github.com/mozilla/rust/issues/3667 is still an issue?
[18:34:08] <tjc> should be easy to check if you already have a Windows install
[18:34:19] <strcat> tikue: well closures are really painful right now because either you have a heap closure or one that can't outlive a stack frame
[18:34:50] <tikue> strcat: is that related to why you couldn't have a function that, say, returned a filter iter
[18:35:00] <leonvv> olsonjeffery, tikue: My problem is, I have a struct that has another struct as a property, but whenever I try to call the methods of the other struct (self.other_struct.method()) it complains about self not being sendable
[18:35:13] <strcat> tikue: yes
[18:35:20] <strcat> in C++, you can do that
[18:36:02] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[18:37:51] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[18:37:57] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[18:37:58] <brson> acrichto: what does your libuv patch do?
[18:38:00] *** Quits: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP) (Client exited)
[18:38:30] *** Joins: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP)
[18:38:31] <Seldaek> no markdown parser in rust yet is there?
[18:38:32] <acrichto> brson: it was actually a libuv contributor's patch, but it fixes https://github.com/joyent/libuv/issues/887
[18:38:55] <acrichto> brson: which is required unless we always set RUST_THREADS=1 for anything which touches processes
[18:39:17] <brson> acrichto: ok, so if we just upgrade libuv then we don't cherry-pick any new patches; if we don't upgrade libuv then we have to cherry-pick?
[18:39:28] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[18:39:41] <acrichto> brson: it's not merged yet (it's not the greatest fix), so regardless we must cherry-pick that patch
[18:40:25] <strcat> tikue: http://ix.io/7AM a stack closure returning a stack closure
[18:40:26] <acrichto> brson: that patch is cherry-pickable onto master, but if we cherry-pick onto the old libuv then we'd have to cherry-pick https://github.com/alexcrichton/libuv/commit/6415a4dae027c31f045109c6240ea4ee023c5830
[18:40:46] <acrichto> it applied cleanly but didn't compile, I modified it to compile on the current libuv that we're using
[18:40:54] <strcat> tikue: because in C++11, each closure has a unique type and their size is based on what they capture
[18:41:12] <strcat> you can box them as std::function
[18:41:16] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[18:41:16] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/avloTw
[18:41:16] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[18:41:33] <strcat> anyway rust doesn't have stack closures *in the type system*, they just get borrowed immediately
[18:41:37] <strcat> lose a lot of power there.
[18:42:45] <tikue> strcat: what is the fix?
[18:44:33] <strcat> well it's possible to make it so that you could have unboxed closures, but you're going to run into the same kinds of issues that happened in C++11 and are being fixed in C++14
[18:44:59] <strcat> like, this sample works because C++ closures infer the return type (it's not something you can write)
[18:45:17] <strcat> but you couldn't return a closure from a normal function with C++11 without boxing it, because you couldn't write the type
[18:45:22] <strcat> they added ret type inference
[18:46:15] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[18:46:15] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/uLaQWQ
[18:46:15] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[18:46:17] *** Quits: ktos (ktos@moz-D3D6BE18.swidnica.mm.pl) (Ping timeout)
[18:46:20] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[18:46:20] <ghrust> 01[13rust01] 15bors pushed 10 new commits to 06auto: 02http://git.io/hjUErg
[18:46:20] <ghrust> 13rust/06auto 145118ef6 15klutzy: rt: Remove leading underscore on Win64...
[18:46:20] <ghrust> 13rust/06auto 14a35bfa2 15klutzy: rt: Add {get,record}_sp_limit on Win64...
[18:46:20] <ghrust> 13rust/06auto 14e41a81b 15klutzy: Set main_name "WinMain" on Win64
[18:46:21] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[18:46:30] <brson> how do you debug the dynamic linker?
[18:46:33] *** Quits: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP) (Connection reset by peer)
[18:46:37] <strcat> strace?
[18:46:46] *** Joins: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP)
[18:46:51] *** Quits: spider-mario (spidermari@4C9DC03E.363ACB84.F049C0AD.IP) (Connection reset by peer)
[18:47:04] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[18:47:04] <strcat> maybe you need strace -f
[18:47:09] * strcat isn't sure
[18:47:26] *** Joins: ktos (ktos@moz-D3D6BE18.swidnica.mm.pl)
[18:47:28] <brson> can i make a debug build of ld.so that I can step through?
[18:48:15] <strcat> brson: ooo, try LD_DEBUG=all
[18:49:08] *** Quits: fabiand (fabiand@moz-9738CF3A.adsl.alicedsl.de) (Quit: Verlassend)
[18:50:49] <brson> strcat: it doesn't do much :) prints out the name of the library it's trying to load, *then* crashes
[18:50:49] <zol> How do you implement two traits for the same struct? Separately? impl Entity for Player {...} impl Drawable for Player {...}?
[18:51:10] <sfackler> zal: yep
[18:51:16] <sfackler> *zol
[18:51:28] <zol> sfackler: Aha, thank you!
[18:51:32] <brson> ecr: where are you sitting?
[18:51:35] *** Quits: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP) (Client exited)
[18:53:02] <ecr> brson: 2028B
[18:53:21] <ecr> it's by DWIM
[18:55:04] *** Joins: eatkinson (eatkinson@moz-FDE22382.dsl.bell.ca)
[18:56:25] <tikue> what is the syntax for trait inheritence?
[18:56:34] <tjc> tikue: trait Foo: Bar { means Foo inherits from Bar
[18:56:36] <tikue> pub trait Foo: Bar {
[18:56:40] <tikue> ok great thank you tjc
[18:56:55] <tikue> tjc: what if it's polymorphic 
[18:57:02] <tikue> trait Foo<A>: Bar<A> { 
[18:57:03] <tikue> ?
[18:57:05] <strcat> yes
[18:57:06] <tjc> tikue: yeah
[18:57:07] <tikue> thanks 
[18:57:17] *** Quits: jclements (jclements@moz-DA3E01C8.wireless.calpoly.edu) (Quit: jclements)
[18:57:18] <tjc> of course the ty params could be different in the parent and child
[18:57:48] <tikue> right, thank you :)
[18:58:19] *** Joins: riley (riley@8BA43816.9AA11D69.65DDFA89.IP)
[18:58:22] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[18:59:02] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[19:00:29] <tikue> strcat: in iterator.rs, in pub trait Iterator<A> { â€¦ }, are the functions with bodies default methods?
[19:00:32] *** Quits: leonvv (leonvv@moz-7D83A5F1.ip.telfort.nl) (Client exited)
[19:00:36] <strcat> tikue: yes
[19:00:40] <tikue> that's so cool 
[19:00:43] *** Quits: riley (riley@8BA43816.9AA11D69.65DDFA89.IP) (Client exited)
[19:00:44] <tikue> freakin default methods
[19:00:45] *** Joins: riley (riley@8BA43816.9AA11D69.65DDFA89.IP)
[19:00:47] <tikue> i didn't realize they worked so well
[19:01:11] <strcat> rusti: range(0, 3).map(|x| x * 2).skip(1).chain(range(5, 6)).to_owned_vec()
[19:01:12] -rusti- ~[2, 4, 5]
[19:01:13] <strcat> all default methods
[19:01:37] <strcat> there are still some generic impls left
[19:01:40] <strcat> since they require bounds
[19:02:02] <strcat> rusti: let mut xs = [1, 2, 3]; let mut ys = [4, 5, 6]; xs.mut_iter().chain(ys.mut_iter()).reverse_(); (xs, ys)
[19:02:03] -rusti- ([6, 5, 4], [3, 2, 1])
[19:02:21] <strcat> silly method resolve issue ;[
[19:03:26] <zol> Getting confused by mods.. I have a dir, with three files: roguelike.rs, utils.rs and entities.rs. In roguelike.rs I have mod utils; mod entities;. In entities.rs I need utils.rs so I try to do mod utils; and I get "error: unresolved import: found `utils` in `???` but it is private". But both mods are set to "pub"?
[19:03:38] *** Joins: ozten (ozten@moz-1F6A0305.hsd1.or.comcast.net)
[19:05:56] *** Joins: Ms2ger (Ms2ger@moz-549ABB0C.adsl-dyn.isp.belgacom.be)
[19:09:06] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[19:09:46] <adridu59> does modulo function necessarily return an int?
[19:10:00] <adridu59> rusti: 3 % 2
[19:10:01] *** Quits: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[19:10:01] -rusti- 1
[19:10:09] <adridu59> rusti: 3.3 % 2
[19:10:10] -rusti- <anon>:5:15: 5:16 error: mismatched types: expected `<VF0>` but found `<VI0>` (expected floating-point variable but found integral variable)
[19:10:10] -rusti- <anon>:5          3.3 % 2
[19:10:10] -rusti-                         ^
[19:10:10] -rusti- error: aborting due to previous error
[19:10:10] -rusti- application terminated with error code 101
[19:10:16] <adridu59> rusti: 3,3 % 2
[19:10:16] -rusti- <anon>:5:10: 5:11 error: expected one of `; }` but found `,`
[19:10:17] -rusti- <anon>:5          3,3 % 2
[19:10:17] -rusti-                    ^
[19:10:17] -rusti- application terminated with error code 101
[19:10:40] <adridu59> rusti: 3.3 % 2.0
[19:10:41] -rusti- 1.3
[19:10:53] *** Joins: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com)
[19:11:03] <cyndis> zol: put "pub mod utils" in your main file and then "use utils" elsewhere
[19:11:19] <adridu59> rusti: 1756 % 13
[19:11:20] -rusti- 1
[19:11:24] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[19:11:27] <adridu59> rusti: 1759 % 13
[19:11:27] -rusti- 4
[19:12:22] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[19:12:41] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[19:12:51] <tikue> anyone know what might cause this: 
[19:12:51] <tikue> error: type `extern "Rust" fn() -> ~std::iterator::Iterator<uint>:Send` does not implement any method in scope named `nth`
[19:12:56] <maik> is kimundi's visibility tutorial already available?
[19:13:03] <strcat> tikue: iterators won't work with trait objects
[19:13:05] <strcat> they use by-value self
[19:13:10] <tikue> oh
[19:13:21] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[19:13:30] <tikue> i thought they used &mut self?
[19:13:31] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:13:35] <strcat> next() does
[19:13:40] <strcat> adaptors use by-value self
[19:13:45] <tikue> mm
[19:14:02] <adridu59> rusti: 25 % 2
[19:14:03] -rusti- 1
[19:14:10] <adridu59> rusti: 26 % 2
[19:14:11] -rusti- 0
[19:14:22] <adridu59> rusti: 2520 % 8
[19:14:23] -rusti- 0
[19:15:46] *** Quits: tikue (tkuehn@678D73BA.28259105.689607DE.IP) (Quit: tikue)
[19:16:40] *** Quits: ozten (ozten@moz-1F6A0305.hsd1.or.comcast.net) (Quit: ozten)
[19:16:44] *** Quits: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net) (Client exited)
[19:16:47] *** Joins: tikue (tkuehn@678D73BA.28259105.689607DE.IP)
[19:17:06] <engla> .nth probably uses &mut self though
[19:17:13] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Quit: Leaving)
[19:17:18] *** Joins: huseby (huseby@13F2CEC5.7672369.D8E68FF6.IP)
[19:18:14] *** Quits: tikue (tkuehn@678D73BA.28259105.689607DE.IP) (Quit: tikue)
[19:18:51] *** flaper87 is now known as flaper87|afk
[19:18:54] <maik> I have a path in my lib like sgl::shader::Shader; can I rename this in my create to sgl::Shader?
[19:18:58] *** Joins: Florob (Florob@moz-39532932.de)
[19:19:47] *** Quits: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP) (Quit: Textual IRC Client: www.textualapp.com)
[19:22:24] <nsf> yes, in your crate file you can reexport it
[19:22:33] <nsf> pub use shader::Shader;
[19:22:36] <nsf> I think that way
[19:22:50] *** Joins: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP)
[19:23:00] <nsf> well, all "use" usage patterns apply
[19:23:04] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Ping timeout)
[19:23:06] <nsf> pub use shader::*;
[19:23:08] <nsf> if you wish, etc.
[19:23:17] *** Quits: ktos (ktos@moz-D3D6BE18.swidnica.mm.pl) (Ping timeout)
[19:24:13] <nsf> http://static.rust-lang.org/doc/rust.html
[19:24:17] <nsf> search for "re-export"
[19:24:22] <nsf> some docs there
[19:24:44] *** Joins: ktos (ktos@moz-D3D6BE18.swidnica.mm.pl)
[19:25:06] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[19:27:43] *** Joins: victorporof (victorporo@moz-BAE8D951.pck.nerim.net)
[19:27:54] *** Joins: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com)
[19:29:01] *** Quits: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com) (Connection reset by peer)
[19:29:47] <adridu59> rusti: 4^4
[19:29:48] -rusti- 0
[19:29:55] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[19:30:05] <adridu59> rusti: 4*4
[19:30:06] -rusti- 16
[19:30:15] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[19:30:24] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[19:30:24] <adridu59> is there any specific notation for squares?
[19:30:40] <engla> no
[19:30:46] <nsf> adridu59: there's pow function in int module somewhere
[19:30:51] <nsf> or is it num module
[19:31:04] <adridu59> pow is overkill, I'll stick to 4*4
[19:31:09] <adridu59> thanks guys
[19:31:14] *** Joins: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com)
[19:31:31] <nsf> oh, right square
[19:31:44] <nsf> s/right/right,/
[19:31:52] <nsf> yeah, a*a works :D
[19:32:19] *** Quits: maik (maik___@moz-1318C3AE.dip0.t-ipconnect.de) (Ping timeout)
[19:32:53] <adridu59> at first I was trying to use the 4^4 notation which iirc is for a bitwise (and?)
[19:33:02] <nsf> xor iirc
[19:33:08] <Ms2ger> Yeah, xor
[19:34:57] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[19:34:57] *** ChanServ sets mode: +o tjc
[19:35:17] *** flaper87|afk is now known as flaper87
[19:36:25] <cmr> tjc: good question
[19:37:08] *** Quits: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com) (Quit: ecr)
[19:37:28] <cmr> tjc: seems not
[19:38:36] *** Quits: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP) (Client exited)
[19:38:54] *** Joins: aruniiird (Mibbit@254A438E.F24A7F1B.260B031E.IP)
[19:39:01] *** Joins: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com)
[19:40:04] <strcat> rusti: @mut 5
[19:40:04] -rusti- @mut 5
[19:40:07] <strcat> rusti: 5i
[19:40:08] -rusti- 5
[19:40:36] <strcat> anyone know any particularly bad issues with the reflection-based printing? going to fix a few things like int suffixes
[19:41:01] <cmr> Suffixes are the only major one I've noticed.
[19:41:16] <strcat> luckily the issues with @mut are fixed now that normalization is gone
[19:41:33] <strcat> could probably remove the opaque box stuff from the compiler...
[19:41:34] <nsf> calls fail! on malformed enums, I guess that's not really an issue
[19:41:49] <strcat> nsf: well a malformed enum is undefined behaviour already ;]
[19:42:17] <strcat> nsf: we put guarantees on loads of enums for LLVM that the discriminant is one of the possible variants
[19:42:47] <strcat> rusti: enum Opaque {} unsafe { let x: Opaque = std::cast::transmute(()); x }
[19:42:49] -rusti- task <unnamed> failed at 'enum value matched no variant', /build/rust-git/src/rust/src/libstd/repr.rs:521
[19:42:49] -rusti- application terminated with error code 101
[19:42:55] <nsf> sure, I don't mind safe enums, but then having int -> enum convertion helper would be nice
[19:43:00] <nsf> https://gist.github.com/nsf/6342168
[19:43:04] <nsf> see what I do right now
[19:43:06] <nsf> :(
[19:43:33] <nsf> I know it's planned and all that
[19:43:36] <nsf> just complaining.. :)
[19:43:41] <nsf> never mind :D
[19:44:54] <strcat> hm
[19:45:02] *** Joins: mihneadb_ (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net)
[19:45:06] *** Quits: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[19:45:10] <strcat> rusti: printfln!("%?", &5)
[19:45:11] -rusti- &5
[19:45:12] -rusti- ()
[19:45:13] <strcat> rusti: printfln!("%?", &mut 5)
[19:45:14] -rusti- &mut 5
[19:45:14] -rusti- ()
[19:45:16] *** Quits: mihneadb_ (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net) (Input/output error)
[19:45:19] <strcat> rusti: printfln!("%?", &mut 5 as *mut int)
[19:45:20] -rusti- (0x7f2e0f6190a0 as *())
[19:45:20] -rusti- ()
[19:45:46] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Ping timeout)
[19:46:06] <strcat> rusti: 0.5
[19:46:07] -rusti- 0.5
[19:46:08] <strcat> rusti: 0.5f32
[19:46:08] -rusti- 0.5
[19:46:13] <strcat> lots of little things
[19:46:46] <nsf> oh and what's up with this new formatting thing, does it mean that printfln will go away?
[19:46:59] <strcat> nsf: well I think after a snapshot it will replace the old names
[19:47:08] <strcat> nsf: it's format!
[19:47:22] <strcat> rusti: format!("{0} {1} {0}", 0, 1)
[19:47:24] -rusti- ~"0 1 0"
[19:47:28] <strcat> rusti: format!("{0} {1} {0}", 5, 1)
[19:47:29] -rusti- ~"5 1 5"
[19:47:36] <nsf> what I'm interested is the formatting syntax
[19:47:36] <strcat> rusti: format!("{}", "foo")
[19:47:37] -rusti- ~"foo"
[19:47:40] <nsf> %? will go?
[19:47:43] <strcat> nsf: yes
[19:47:46] <nsf> k
[19:47:47] <strcat> I think that will be....
[19:47:49] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[19:47:56] <acrichto> {:?}
[19:48:00] <strcat> ah yes
[19:48:01] <nsf> s/interested/interested in/
[19:48:25] <strcat> off the top of someone's head, what's the string literal token called?
[19:48:29] <acrichto> nsf: libstd/fmt/mod.rs
[19:48:33] * strcat tries str
[19:48:42] *** Joins: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net)
[19:48:59] <adridu59> rusti: writeln("Hello !")
[19:49:00] -rusti- <anon>:5:9: 5:16 error: unresolved name `writeln`.
[19:49:00] -rusti- <anon>:5          writeln("Hello !")
[19:49:00] -rusti-                   ^~~~~~~
[19:49:00] -rusti- error: aborting due to previous error
[19:49:00] -rusti- application terminated with error code 101
[19:49:06] <nsf> acrichto: I see
[19:49:08] <acrichto> nsf: there's a large doc comment at the top of the file, but sadly it's not making it into the docs just yet :(
[19:49:11] <adridu59> rusti: printf!("Hello !")
[19:49:12] -rusti- "Hello !"()
[19:49:42] <acrichto> nsf: if you have any questions though, I've been working on that recently though so feel free to ask
[19:50:55] <nsf> seems solid at first glance
[19:51:18] <strcat> rusti: 0.5f
[19:51:19] -rusti- 0.5
[19:51:37] <bblum> when i @bors retry something
[19:51:41] <bblum> do i do it on the commit
[19:51:43] <bblum> or on the pr
[19:51:45] <strcat> commit
[19:52:24] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[19:53:15] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[19:53:24] <adridu59> anyone can order a retry?
[19:53:29] <strcat> no
[19:53:44] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[19:54:45] <cmr> adridu59: only reviewers can control bors
[19:54:50] <cmr> and sometimes not even them! ;p
[19:55:15] <adridu59> haha
[19:55:19] <strcat> rusti: bytes!($)
[19:55:20] -rusti- <anon>:5:16: 5:17 error: unexpected token: `$`
[19:55:20] -rusti- <anon>:5          bytes!($)
[19:55:20] -rusti-                          ^
[19:55:20] -rusti- application terminated with error code 101
[19:55:40] <cmr> rusti: bytes!(a)
[19:55:41] -rusti- <anon>:5:9: 6:5 error: Non-literal in bytes!
[19:55:41] -rusti- <anon>:5          bytes!(a)
[19:55:41] -rusti- <anon>:6     };
[19:55:41] -rusti- error: aborting due to previous error
[19:55:41] -rusti- application terminated with error code 101
[19:55:49] <cmr> heh
[19:56:05] <zol> How do I access my_fun from: pub mod utils { pub struct MyStruct {...}; pub trait MyTrait { pub fn my_fun(&self);} impl MyTrait for MyStruct { pub fn my_fun(&self} {...} }?
[19:56:17] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[19:56:17] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/hjUErg
[19:56:17] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[19:56:28] <strcat> import the trait into the scope you want the methods to resolve
[19:56:29] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[19:56:57] <adridu59> w64 support merged? nice!
[19:57:26] <zol> strcat: Thanks
[19:57:38] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[19:59:22] *** Joins: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP)
[20:01:12] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[20:01:12] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1vSeJg
[20:01:12] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[20:01:12] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[20:01:12] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/4OsbmA
[20:01:12] <ghrust> 13rust/06auto 14439073f 15Kevin Ballard: Handle `rustpkg build`, etc. when given no args properly...
[20:01:12] <ghrust> 13rust/06auto 14b2c4121 15bors: auto merge of #8697 : kballard/rust/rustpkg-no-args, r=catamorphism...
[20:01:13] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[20:02:16] *** Joins: toqueteos (Mibbit@moz-16CBFEDC.dynamic.jazztel.es)
[20:02:54] *** Quits: eatkinson (eatkinson@moz-FDE22382.dsl.bell.ca) (Quit: eatkinson)
[20:03:13] *** Joins: Aszarsha (Aszarsha@moz-16BFBC53.rev.numericable.fr)
[20:03:27] <toqueteos> why would rust 0.7 tarball fail to compile (or just freeze) when all prerequisites are met? pic: http://i.imgur.com/HO2xZGX.jpg
[20:04:08] <nsf> toqueteos: memory?
[20:04:10] <zol> strcat: Sorry, for the life of me I can't manage to solve it. 
[20:04:12] *** Quits: maxli (maxli@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Leaving.)
[20:04:30] <adridu59> rusti: let n: BigUint = 2;
[20:04:31] -rusti- <anon>:5:16: 5:23 error: use of undeclared type name `BigUint`
[20:04:31] -rusti- <anon>:5          let n: BigUint = 2;
[20:04:31] -rusti-                          ^~~~~~~
[20:04:31] -rusti- error: aborting due to previous error
[20:04:31] -rusti- application terminated with error code 101
[20:04:32] <strcat> zol: trait implementations are only in scope if the trait is in scope
[20:04:37] <toqueteos> nsf: mmm it may be, suggestions on required ram?
[20:04:44] <zol> https://gist.github.com/Zolomon/6345973 -- errors.txt show the errors I get. I'm really confused about these mods.
[20:04:59] <nsf> 2GB should be enough I guess
[20:05:07] <strcat> toqueteos: just give it more time
[20:05:19] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[20:05:19] *** ChanServ sets mode: +o tjc
[20:05:21] <strcat> each stage takes ~3.5 mins
[20:05:21] <toqueteos> it's been like 30mins like that
[20:05:28] <nsf> well, yeah it's easy to check if it needs more memory
[20:05:28] <engla> zol: put all mod declarations in one file at the top of the crate
[20:05:35] <nsf> just take a look at memory consumption
[20:05:37] <nsf> :)
[20:05:57] <nsf> if something is slow and you have a swap partition
[20:06:00] <nsf> it could be it
[20:06:02] <zol> engla: The compiler says I have to put uses before? 
[20:06:26] <engla> top of the crate refers to a file, not line in the file
[20:06:32] <toqueteos> i'll try with 1gb ram more. thanks nsf and strcat
[20:07:30] <adridu59> what is the import path for BigUint?
[20:07:40] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[20:07:51] <adridu59> rusti: use extra::bigint; let n: BigUint = 2;
[20:07:52] -rusti- <anon>:5:35: 5:42 error: use of undeclared type name `BigUint`
[20:07:52] -rusti- <anon>:5          use extra::bigint; let n: BigUint = 2;
[20:07:52] -rusti-                                             ^~~~~~~
[20:07:52] -rusti- error: aborting due to previous error
[20:07:52] -rusti- application terminated with error code 101
[20:08:09] <strcat> 'use extra::bigint' brings 'bigint' into the current scope
[20:08:10] *** Joins: txdv (quassel@966F3542.3BA477DA.14C26596.IP)
[20:08:19] <adridu59> ah ok
[20:08:26] <adridu59> rusti: use extra::bigint; let n: bigint::BigUint = 2;
[20:08:29] *** Quits: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net) (Quit: Leaving.)
[20:08:29] -rusti- pastebinned 5 lines of output: http://ix.io/7AR
[20:08:32] <strcat> you could just refer to it as extra::bigint though
[20:08:51] <doomlord> is di/mod.rs a special case in generating module hrc reflecting filesys dir layout  ..  ie foo/mod.rs brings in its siblings at foo::*, not foo::mod::*
[20:08:54] <strcat> use statements don't import, they just bring a name into the current scope
[20:09:22] <cmr> doomlord: correct.
[20:09:39] <cmr> doomlord: it formalizes the "#[path="foo/mod.rs"] mod foo;" pattern.
[20:09:45] <adridu59> I get "int literal is too large"
[20:09:57] <adridu59> I should declare it as a String anyways
[20:09:57] *** Joins: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net)
[20:10:03] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[20:11:45] <toqueteos> 3gb virtual machine, it's stuck on the same place, i'll give it 10mins
[20:11:46] <brson> i think we've accumulated at least two distinct valgrind failures since turning it off last week
[20:12:13] <brson> ooh! one of them is catching a failure-safety bug in vec::from_fn
[20:12:22] <nsf> toqueteos: well, it was just a guess as soon as I saw the VM on the screenshot
[20:12:40] <cmr> brson: kinda sobering that they are so common :\
[20:12:44] <adridu59> strcat: for a string function parameter should I use &str or ~str? I guess ~?
[20:12:50] <strcat> adridu59: no
[20:12:52] <strcat> &str
[20:12:57] <strcat> unless you need ownership of it
[20:13:15] <strcat> start with &str, move to ~str when you need a copy
[20:13:19] <nsf> uhm, question about crates, when I compile crate and trying to use std::something without "extern mod std;", it doesn't work
[20:13:34] <nsf> however, it works if I write "use std::something;" and then use something
[20:13:50] <nsf> that is without "extern mod std;"
[20:13:50] <adridu59> strcat: so, with &str the function will modify the var I declared in main?
[20:14:04] <strcat> adridu59: &str is an immutable slice (view) into a string
[20:14:08] <strcat> &mut str is a mutable slice
[20:14:08] <zol> engla: When you say put all mod declarations in one file at the top of the crate, what exactly do you mean? Should I create a new .rs where I do all my mods and then mod that at the top of the same file where my main() exists?
[20:14:27] <adridu59> strcat: ah makes sense!
[20:14:28] <strcat> if you pass ~str, you're *moving* ownership of a heap-allocated string into the function and the caller can no longer use it
[20:14:38] <engla> zol: then you have "mod" in two different files again, you don't want that :)
[20:14:44] <strcat> if the function absolutely requires a copy of the str, in that case you want ~str as the param type
[20:14:48] <olsonjeffery> cmr brson : for my work repo our has a sort of "mandatory" build/test script that has to run and pass before you push
[20:14:56] <strcat> so the caller can either move, or they can move a copy they make if they still need it
[20:14:56] <olsonjeffery> i know the argument that lots of people have is that make check is really slow
[20:15:10] <olsonjeffery> but how about "no excuses if you *don't* run this before pushing"
[20:15:13] <olsonjeffery> to include enabling valgrind
[20:15:24] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[20:15:32] <olsonjeffery> (which, personally, i always have enabled because i have no troubling generating valgrind errors, heh)
[20:15:34] <toqueteos> nsf: what else can i provide to help solve that? | aside: what do you think about this: https://github.com/mozilla/rust/issues/8765
[20:15:39] <adridu59> strcat: if I want to edit the str in my function and still have it availble from the caller as unchanged, I would have to pass &str and clone it?
[20:15:42] <olsonjeffery> i know other people complain about how it slows things down
[20:15:45] <zol> engla: Ok.. But I don't have any other mods than those in my main file? 
[20:15:53] <strcat> adridu59: in that case pass ~str
[20:15:53] * zol looks flummoxed.
[20:15:54] <cmr> adridu59: No, in that case you want to take a ~str
[20:16:08] <cmr> adridu59: That avoids a clone when the caller doesn't need to retain ownership.
[20:16:19] <strcat> rather than making copies, expose it in the API so the caller can move if they don't need it anymore
[20:16:21] <cmr> You shouldn't hide copies or allocations in your API
[20:16:22] <olsonjeffery> implicit in making a PR should be "I have run make check with valgrind enabled"
[20:16:31] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[20:16:46] <strcat> uh
[20:16:50] <engla> zol: I'd put all the mod lines in the main file, no "mod" anywhere else.
[20:16:51] <strcat> what the hell was a constr
[20:16:53] <strcat> wat.
[20:16:57] <adridu59> ok, I got it now
[20:17:05] <strcat>     fn visit_constr(&self, _inner: *TyDesc) -> bool { fail!(); }
[20:17:12] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[20:17:13] <nsf> toqueteos: have no idea, I'm not really familiar with a build process, as for first letter based visibility, I really hate camelCase, but I'm ok with CamelCase
[20:17:15] <zol> engla: So you would work with a single file? 
[20:17:17] * olsonjeffery comes down off of his high-horse.
[20:17:18] <cmr> strcat: constraint maybe?
[20:17:26] <engla> no
[20:17:37] <strcat> a big read-only block letter R
[20:17:37] <nsf> toqueteos: if going that direction means we will suddenly have somewhere camelCase in rust, I would rather not to :D
[20:17:46] <nsf> toqueteos: imho it's not a big deal, using pub is ok
[20:17:59] <brson> olsonjeffery: it's a nice ideal, but i doubt there's any way we can get all contributors to do it. *I* don't even run make check, let alone with valgrind, before making PR's. I lean on the automation heavily
[20:18:01] <nsf> or perhaps it wasn't a question just for me
[20:18:04] <nsf> because who am I anyway
[20:18:08] <nsf> :)
[20:18:11] <zol> engla: I really appreciate your help, I apologize if I'm being slow.
[20:18:50] <nsf> in that case it's a bad idea to ask that on irc on the same line as addressed message, no one probably saw it, except me
[20:18:51] <toqueteos> nsf: I don't like camelCase but it's helpful
[20:18:53] <nsf> :d
[20:19:01] <strcat> the naming conventions are pretty established at this point
[20:19:09] <toqueteos> nsf: how did you built rust then?
[20:19:18] <strcat> TypeName, function_or_variable_name, CONSTANT_NAME
[20:19:31] <nsf> toqueteos: I'm using archlinux and there is some guy who has a repo and it builds the rust frequently :D
[20:19:35] <doomlord> camelcase - consider glSetTexture   vs  gl::set_texture   ... i've prefered sticking with originall names for my own gl bindings
[20:19:37] <nsf> toqueteos: tried building myself, failed
[20:19:37] <strcat> nsf: me! :P
[20:19:40] <nsf> have no idea what's wrong :D
[20:19:46] <nsf> strcat: :D
[20:20:00] <doomlord> glBindTtexture sorry
[20:20:02] <strcat> it's just a daily cronjob on arch's build server
[20:20:10] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[20:20:10] *** ChanServ sets mode: +o dherman
[20:20:10] * strcat is a trusted user
[20:20:19] <nsf> strcat: Server = http://pkgbuild.com/~thestinger/repo/$arch
[20:20:21] <nsf> yours?
[20:20:21] <strcat> yep
[20:20:25] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[20:20:27] <nsf> well, thank you then :)
[20:20:36] <nsf> for some reason aur build fails on my machine
[20:20:38] <nsf> :(
[20:20:43] <strcat> nsf: I don't actually use the aur pkg
[20:20:47] <nsf> I see
[20:20:59] <doomlord> but i've found emacs can rebind keys, so to help me out with lower_case i've swapped _ and -
[20:21:01] <strcat> nsf: https://github.com/thestinger/packages/tree/master/rust-git
[20:21:05] *** Quits: fhahn (fhahn@moz-7924DB5C.vie.surfer.at) (Quit: ZNC - http://znc.in)
[20:21:05] <cmr> doomlord: for 1:1 (or near to it) bindings I agree about retaining original conventions
[20:21:09] <toqueteos> can anyone point me an ubuntu ppa with rust 0.7 baked in there?
[20:21:38] *** Joins: fhahn (fhahn@moz-7924DB5C.vie.surfer.at)
[20:21:40] <strcat> nsf: I originally stopped using it because it's just too much trouble to keep commenting with suggestions :P
[20:21:45] <strcat> but maybe it's broken now
[20:22:13] <nsf> it certainly fails on my machine, it's all I can tell
[20:22:17] <strcat> (also, rust's 'make check' is broken in a container/chroot due to tidy.py)
[20:22:21] <doomlord> its all personal preference .. i can see why peeps would generally prefer to have everything looking "rustic". for me, i'm happy to get the benefit of simple autocomplete for the common gl names
[20:22:26] * strcat can't figure out why that breaks
[20:22:41] <zol> engla: Aha, I figured it out. :) So I had mixed up two things: 1) Need to use "use" in the right scope, 2) have to apply the namespaces before the types/function calls.
[20:23:32] <doomlord> graphics programming without an advanced IDE ...hit  v for vector maths completions, and gl for the rendering API ..etc
[20:23:51] <adridu59> rusti: let n = "Hello"; substr(n, 0, 3)
[20:23:51] -rusti- <anon>:5:26: 5:32 error: unresolved name `substr`.
[20:23:51] -rusti- <anon>:5          let n = "Hello"; substr(n, 0, 3)
[20:23:51] -rusti-                                    ^~~~~~
[20:23:52] -rusti- error: aborting due to previous error
[20:23:52] -rusti- application terminated with error code 101
[20:24:18] <adridu59> rusti: let n = "Hello"; str::substr(n, 0, 3)
[20:24:21] -rusti- pastebinned 11 lines of output: http://ix.io/7AS
[20:24:47] <brson> The new rust-mode doesn't cope with `do (|| { ... }).finally { }` correctly, adds extra indendation
[20:25:01] *** Quits: igl (igl@moz-87909CD0.adsl.alicedsl.de) (Ping timeout)
[20:25:07] <strcat> rusti: 5.to_str_radix(16)
[20:25:13] -rusti- pastebinned 35 lines of output: http://ix.io/7AT
[20:25:14] <strcat> rusti: 5i.to_str_radix(16)
[20:25:15] -rusti- ~"5"
[20:25:17] <nsf> doomlord: I don't mind CamelCase per se, what I'm saying I really hate the one that starts with a lower-case word
[20:25:17] <cmr> adridu59: substr was removed 2 months ago.
[20:25:19] *** Joins: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP)
[20:25:29] <nsf> when half of the variables look like just plain lower-case words
[20:25:37] <nsf> and then some atPoint popup into your face
[20:25:39] <nsf> yuck
[20:25:43] <adridu59> cmr: is there any alternative or do I have to write a parser fn?
[20:25:47] <nsf> popups*
[20:25:48] <doomlord> could argue namespace-prefixed camelCase isn't as unreadable... glCamelCase 
[20:25:48] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:25:52] <cmr> rusti: let n = "Hello"; n.slice(0, 3)
[20:25:53] -rusti- "Hel"
[20:26:02] <adridu59> cmr: thank for the tip
[20:26:05] <strcat> acrichto: how do you write a string with the new formatting stuff to a writer?
[20:26:09] <strcat> like
[20:26:11] <nsf> doomlord: true, but only because gl is not a word really :)
[20:26:12] <doomlord> point taken about lowerCasePreceedingWords
[20:26:17] <strcat> foo!(&mut writer, "{}", bar)
[20:26:20] <acrichto> write!
[20:26:24] *** erickt_ is now known as erickt
[20:26:30] <strcat> acrichto: is it okay to use the new formatting in the stdlib?
[20:26:37] *** Joins: igl (igl@moz-DB9488CD.adsl.alicedsl.de)
[20:26:39] <Florob> stringByAppendingUTF8String:length:
[20:26:39] <acrichto> not usable at stage0
[20:26:41] <strcat> ah
[20:26:44] <acrichto> sadly :(
[20:26:49] <strcat> acrichto: well I can leave this broken at stage0
[20:26:50] <strcat> tis okay
[20:26:52] <acrichto> after the next snapshot I've got my work cut out for me
[20:26:57] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Reconnecting)
[20:26:58] <strcat> acrichto: how do I do hex - {:x}?
[20:26:58] <acrichto> but yeah after stage0 it's perfectly usable
[20:27:00] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:27:00] <acrichto> yes
[20:27:09] *** Quits: dave1629 (dave@7533B7AE.474E6E0A.DDE5D3F6.IP) (Quit: dave1629)
[20:27:15] <acrichto> {:X} for capital hex
[20:27:34] <strcat> IT'S OKAY, IT DOESN'T NEED TO YELL :)
[20:27:55] <acrichto> I never liked upper hex anyway
[20:28:14] <strcat> rusti: format!("{:x}", &5 as *int)
[20:28:14] <nsf> doomlord: but I agree about autocompletions, it's an interesting point
[20:28:19] -rusti- pastebinned 6 lines of output: http://ix.io/7AU
[20:28:21] <strcat> rusti: format!("{:x}", &5 as *int as uint)
[20:28:21] -rusti- ~"7f234f2190e0"
[20:28:25] *** zz_kimundi is now known as kimundi
[20:28:42] <strcat> rusti: format!("0x{:x}{}", &5 as *int as uint, "mut" if true else "")
[20:28:42] -rusti- <anon>:5:9: 6:5 error: expected token: `,`
[20:28:42] -rusti- <anon>:5          format!("0x{:x}{}", &5 as *int as uint, "mut" if true else "")
[20:28:42] -rusti- <anon>:6     };
[20:28:42] -rusti- error: aborting due to previous error
[20:28:42] -rusti- application terminated with error code 101
[20:28:44] <nsf> would be awesome to be able to bind a namespace in rust to a prefix :)
[20:28:48] <nsf> crazy, but awesome :D
[20:28:48] <strcat> heh
[20:28:53] * strcat has python on his brain
[20:29:03] <strcat> rusti: format!("0x{:x}{}", &5 as *int as uint, if true { "mut" } else { "" })
[20:29:03] -rusti- ~"0x7f7fb9a190e0mut"
[20:29:08] <strcat> anyway
[20:29:23] <acrichto> rusti: format!("0x{:016x}", &5 as *int as uint)
[20:29:24] -rusti- ~"0x00007f6fa92190e0"
[20:29:31] <doomlord> i have distant memories of writing C++ with little prefixes on the method methods originally
[20:29:38] <cmr> m_Foo?
[20:29:43] <strcat> hm
[20:29:47] <acrichto> rusti: format!("{}", &5 as *int)
[20:29:48] -rusti- ~"0x7f5dbe2190e0"
[20:29:53] <strcat> acrichto: oh.
[20:30:10] <acrichto> rusti: format!("{:x}", -1u64)
[20:30:11] -rusti- ~"ffffffffffffffff"
[20:30:14] <acrichto> rusti: format!("{:x}", -1u32)
[20:30:15] -rusti- ~"ffffffff"
[20:30:20] <acrichto> :D
[20:30:22] <doomlord> more like gfxWhatever .. pretty much using the c names i would have used. before it sunk in visual studio was really good
[20:30:22] <acrichto> that makes me happy
[20:30:42] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:31:03] <tjc> jack: ping
[20:31:23] <doomlord> 1998 class Render {   rDoSomething() /* still clinging to C habits*/} etc.
[20:31:32] <nsf> sleep time here, good night all :)
[20:31:33] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[20:32:22] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[20:33:37] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[20:33:57] *** Quits: fhahn (fhahn@moz-7924DB5C.vie.surfer.at) (Quit: ZNC - http://znc.in)
[20:34:29] *** Joins: fhahn (fhahn@moz-7924DB5C.vie.surfer.at)
[20:36:06] *** Joins: Palmik (palmik@moz-CC484FDD.tmcz.cz)
[20:37:00] *** Quits: ktos (ktos@moz-D3D6BE18.swidnica.mm.pl) (Ping timeout)
[20:37:41] <strcat> brson: btw it might make sense to just use push in from_fn
[20:37:48] <strcat> hm
[20:38:01] <strcat> I don't really think it would be slower because it's replacing that uint check with another
[20:38:23] <strcat> will look over that stuff later
[20:38:32] <strcat> heh acrichto already r+'ed it
[20:38:48] * strcat is too slow
[20:38:52] *** Joins: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP)
[20:39:04] <acrichto> oh whoops
[20:39:10] <strcat> acrichto: it's fine, it should be r+'ed
[20:39:15] <strcat> I'm just thinking it could be simpler
[20:39:42] *** Quits: toqueteos (Mibbit@moz-16CBFEDC.dynamic.jazztel.es) (Quit: http://www.mibbit.com ajax IRC Client)
[20:39:42] *** Joins: ktos (ktos@moz-D3D6BE18.swidnica.mm.pl)
[20:40:15] *** Joins: strcat1 (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:40:32] *** Quits: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP) (Ping timeout)
[20:40:55] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[20:41:01] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[20:41:11] *** Quits: rory (rory@moz-BBD47402.hsd1.ca.comcast.net) (Quit: leaving)
[20:41:14] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[20:41:14] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14b2c4121 to 14ce27752: 02http://git.io/N3iJvQ
[20:41:14] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[20:41:16] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[20:41:16] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/zwtspg
[20:41:16] <ghrust> 13rust/06auto 148dc13ac 15Brian Anderson: std: Make vec::from_fn failure-safe
[20:41:16] <ghrust> 13rust/06auto 149cd91c8 15bors: auto merge of #8766 : brson/rust/vecfromfn, r=alexcrichton...
[20:41:17] <zol> If I have one common struct, and a common trait, how can I make different implementations of the common trait for the common struct? 
[20:41:17] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[20:41:24] <brson> there are more unsafe fns in vec that also have this problem. trying to root them out now
[20:42:37] <zol> Guess I could add an enum to the struct and then patternmatch on the enum?
[20:42:54] <strcat1> brson: I think I'm going to end up removing most of those if they're no faster than iterators + collect
[20:43:04] <strcat1> just haven't gotten around to testing + narrowing down any optimization issues
[20:43:14] *** Joins: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP)
[20:43:22] <strcat1> less code is always better :)
[20:45:38] <strcat1> visit_var + visit_var_integral... 
[20:45:39] <strcat1> hrm
[20:47:33] <mitsuhiko> bjz: generating all permutations of glsl swizzles into methods. madness?
[20:48:07] *** Quits: ktos (ktos@moz-D3D6BE18.swidnica.mm.pl) (Ping timeout)
[20:48:32] *** Quits: reyre (reyre@moz-89E9865B.com) (Quit: ZNC - http://znc.in)
[20:48:52] <kimundi> zol: If the type already has an implementation, the only way is to wrap the type in a new type
[20:49:20] *** Joins: ktos (ktos@moz-D3D6BE18.swidnica.mm.pl)
[20:50:02] <tjc> I don't suppose anyone else is seeing compiletest fail because it can't open one of the run-pass test files (as in the source file)?
[20:50:06] <tjc> and the file clearly exists?
[20:50:17] <tjc> this is with master, no changes by me
[20:51:07] <strcat1> tjc: nope
[20:51:24] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[20:51:30] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[20:53:39] <strcat1> what are ty_self and ty_type? :s
[20:53:51] <strcat1> I can't see how you'd have either in an actual in-memory object
[20:53:57] <strcat1> (assuming ty_self is Self)
[20:54:51] <tjc> huh, I only have 16 MB of disk space free
[20:54:53] <tjc> maybe that's why
[20:55:16] <cmr> strcat1: whatever it is rustdoc_ng never sees either of them.
[20:55:39] <cmr> So unless they're added to the AST at somepoint they might be unused.
[20:56:35] <strcat1> poor TyVisitor
[20:57:18] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:57:53] *** Quits: Palmik (palmik@moz-CC484FDD.tmcz.cz) (Quit: Lost terminal)
[20:58:34] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: Places to go, people to annoy)
[20:58:34] *** Quits: aruniiird (Mibbit@254A438E.F24A7F1B.260B031E.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:59:22] <adridu59> how do I go about converting ~str to int? tried .to_int()
[20:59:37] <strcat1> FromStr trait
[20:59:39] *** Quits: eevee (eevee@moz-9A8E1439.evrt.wa.frontiernet.net) (Ping timeout)
[20:59:45] *** Joins: cowboyd (cowboyd@3C276A48.925F2E55.49CEED6B.IP)
[21:00:10] <Eridius> rusti: std::int::from_str("3")
[21:00:12] -rusti- Some(3)
[21:00:18] <adridu59> :)
[21:00:21] <sfackler> rusti: let i: int = FromStr::from_str("100"); i
[21:00:26] -rusti- pastebinned 7 lines of output: http://ix.io/7AY
[21:00:26] <Eridius> adridu59: use the [numtype]::from_str() if you know specifically what type you want
[21:00:30] <Eridius> if you're in a generic method, FromStr is the way to go
[21:00:41] <sfackler> rusti: let i: Option<int> = FromStr::from_str("100"); i
[21:00:42] -rusti- Some(100)
[21:00:47] <Eridius> rusti: std::from_str::FromStr::from_str::<int>("3")
[21:00:47] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[21:00:48] -rusti- Some(3)
[21:01:07] *** Joins: eskatrem (user@moz-D2023B8B.dyn.user.ono.com)
[21:01:23] <blarsen> I'm taking a look at the Rust Language Tutorial now.  Is there no way in Rust to have a global, constant string?
[21:01:23] <eskatrem> is someone using rust-sdl?
[21:01:30] <Eridius> blarsen: use a static
[21:01:33] <strcat1> eskatrem: [numtype]::function are generally obsolete
[21:01:35] <strcat1> er
[21:01:37] <strcat1> Eridius: *
[21:01:47] <Eridius> strcat1: they are? hmm.
[21:01:55] <Eridius> I know a bunch are, but I didn't think they all were
[21:02:06] <adridu59> and how do I cast from u8?
[21:02:14] <strcat1> if it's implemented as a method somewhere else, they're obsolete
[21:02:16] <Eridius> adridu59: from u8 to what? an int? `3u8 as int`
[21:02:17] <eskatrem> I can't get it (rust-sl) to compile
[21:02:20] *** Joins: eatkinson (eatkinson@moz-FDE22382.dsl.bell.ca)
[21:02:50] <Eridius> strcat1: return type polymorphism can be awkward to use. int::from_str() can be easier than FromStr::from_str() if your return type isn't otherwise constrianed
[21:02:53] <Eridius> *constrained
[21:03:00] <strcat1> Eridius: so it's a language issue needing to be fixed
[21:03:09] <Eridius> would be nice to have #[obsolete] implemented
[21:03:13] *** Joins: eevee (eevee@moz-9A8E1439.evrt.wa.frontiernet.net)
[21:03:13] *** strcat1 is now known as strcat
[21:03:23] <strcat> it's ridiculous to duplicate every static method in a trait for every type impl'ing it
[21:03:35] <adridu59> mismatched types: expected `~str` but found `&'static str`
[21:03:48] <zol> If you do "use mymod::*;", will that bring trait implementations into scope that exist inside mymod? 
[21:03:49] <Eridius> adridu59: what did you type?
[21:04:02] <adridu59> how do I fix that? passed ~str as parameter but it looks like my orig string isn't of the corresponding type
[21:04:09] <Eridius> adridu59: show your code
[21:04:09] * strcat doesn't think visit_bot makes much sense either
[21:04:12] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[21:04:15] <Eridius> the correct fix depends on what exactly you're doing
[21:04:15] <strcat> you won't ever *have* one
[21:04:19] <strcat> impossible! ;p
[21:04:30] <eskatrem> was externfn! removed from rust or somethling like that?
[21:04:30] <blarsen> Eridius: perhaps I don't have the right type then.  I'm trying something like 'static ITEM: str = "blah"', but the compiler doesn't like that...
[21:04:36] <Eridius> eskatrem: it's brand new
[21:04:42] <Eridius> eskatrem: it's like a week old. are you using an older rust?
[21:05:00] <Eridius> blarsen: `static foo: &str = "blah"` will get you a &'static str. `static foo: ~str = ~"blah"` will get you a ~str
[21:05:07] <adridu59> rusti: fn test(t: ~str) -> int {return 2;} fn main {let n = "732"; test(n);}
[21:05:07] -rusti- <anon>:5:53: 5:54 error: expected `(` but found `{`
[21:05:07] -rusti- <anon>:5          fn test(t: ~str) -> int {return 2;} fn main {let n = "732"; test(n);}
[21:05:08] -rusti-                                                               ^
[21:05:08] -rusti- application terminated with error code 101
[21:05:08] <Eridius> rusti: static foo: &str = "test"; foo
[21:05:08] -rusti- <anon>:5:21: 5:25 error: Illegal anonymous lifetime: only 'static is allowed here
[21:05:09] -rusti- <anon>:5          static foo: &str = "test"; foo
[21:05:11] -rusti-                               ^~~~
[21:05:13] -rusti- error: aborting due to previous error
[21:05:15] -rusti- application terminated with error code 101
[21:05:16] <Eridius> oh sorry, &'static str
[21:05:17] <eskatrem> I am using rust 0.8-pre
[21:05:24] <Eridius> eskatrem: how old though?
[21:05:33] <Eridius> adridu59: your function should probably take a &str
[21:05:40] <eskatrem> I think I compiled it one week ago
[21:05:41] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[21:05:50] <eskatrem> sam@debianSam:~/code/rust/rust-sdl$ rust --version
[21:05:50] <eskatrem> rust 0.8-pre (758c5e8 2013-08-17 22:52:00 -0700)
[21:05:55] <Eridius> adridu59: in general, you want to take borrowed pointers instead of owned objects as arguments, unless you have a specific need to receive an owned object
[21:06:05] <eskatrem> a bit more than 1 week :s
[21:06:25] <Eridius> eskatrem: it's older than externfn
[21:06:56] <Eridius> eskatrem: you're 11 commits behind the one that introduced externfn ;)
[21:06:59] <eskatrem> Eridius: do I have to recompile rust again?
[21:07:01] <Eridius> yep
[21:07:04] <eskatrem> man...
[21:07:13] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[21:07:25] <blarsen> Eridius: thanks.  But I've tried both of those forms; in the first, rustc tells me "illegal anonymous lifetime...", and in the second, rustc tells me "constant contains unimplemented expression type".  I'm running rustc built earlier this afternoon...
[21:07:38] <zol> Is there a way to turn an enum element into a string without the enum element having a string value? 
[21:07:42] <Eridius> rusti: static foo: &'static str = &"test";
[21:07:43] -rusti- ()
[21:07:43] <eskatrem> recompiling it, like, from scratch? that took ages last time :/
[21:07:46] *** Quits: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net) (Quit: Leaving.)
[21:07:46] <Eridius> rusti: static foo: &'static str = &"test"; foo
[21:07:48] -rusti- "test"
[21:08:03] <blarsen> Eridius: doh, sorry, I missed what you wrote above
[21:08:12] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[21:08:12] *** ChanServ sets mode: +o tjc
[21:08:38] <blarsen> thanks, that works!
[21:08:39] *** Joins: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net)
[21:08:43] <Eridius> \o/
[21:09:01] <blarsen> the 'static there is the region for foo?
[21:09:09] <Eridius> yes
[21:13:30] <strcat> graydon: can we close https://github.com/mozilla/rust/issues/8765 ? it seems like something that's been brought up and turned down before but I don't remember
[21:13:48] <tjc> my vote is for closing it, strcat
[21:13:54] <Eridius> fwiw I'm for closing it too
[21:14:03] <Eridius> I like the capital letter thing in Go, but that doesn't mean it belongs in any other language
[21:14:11] <tjc> Yeah, that ship has sailed
[21:14:17] <graydon> I certainly don't want to do it, yeah. might as well confirm with the others?
[21:14:23] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[21:14:49] <Eridius> rusti: bytes!("foo").to_owned()
[21:14:50] -rusti- <anon>:5:22: 5:23 error: unexpected token: `.`
[21:14:50] -rusti- <anon>:5          bytes!("foo").to_owned()
[21:14:50] -rusti-                                ^
[21:14:50] -rusti- application terminated with error code 101
[21:14:55] <Eridius> what the heck just happened there?
[21:15:11] <Eridius> rusti: let x = bytes!("foo").to_owned(); x
[21:15:12] -rusti- ~[102, 111, 111]
[21:15:19] <Eridius> seems to work in an expression position, but not a statement position?
[21:15:23] <mark_edward> are there any docs on benchmarking docs?
[21:15:24] *** Quits: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP) (Ping timeout)
[21:15:30] <mark_edward> on how to do the benchmarking?
[21:17:00] *** Quits: Ms2ger (Ms2ger@moz-549ABB0C.adsl-dyn.isp.belgacom.be) (Quit: nn)
[21:17:24] <brson> strcat: how do you get a reverse range?
[21:17:32] <strcat> brson: range(0, 10).invert()
[21:17:38] <strcat> will do [9..0]
[21:17:48] <strcat> it's just a double-ended iterator like vecs
[21:18:24] <mark_edward> strcat: do you know any examples of the benchmarking platform?
[21:18:32] <strcat> mark_edward: in libstd/vec.rs?
[21:18:37] <mark_edward> thanks
[21:18:59] <strcat> use extra::test::BenchHarness; #[bench] fn foo(b: &mut BenchHarness) { do b.iter { /* thing to benchmark */ } }
[21:19:01] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[21:19:27] *** Joins: kasey1 (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com)
[21:19:41] *** Quits: kasey1 (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com) (Quit: Leaving.)
[21:19:54] *** Quits: eatkinson (eatkinson@moz-FDE22382.dsl.bell.ca) (Ping timeout)
[21:21:00] <tjc> brson: setting RUST_THREADS to 2 seems to work
[21:21:05] <tjc> just in case anybody else asks :-)
[21:21:13] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[21:21:19] <Eridius> rusti: env!("HOME")
[21:21:20] -rusti- "/home/rust"
[21:21:23] <Eridius> why does that exist?
[21:21:57] <Eridius> rusti: env!("HOME").to_owned()
[21:21:57] -rusti- <anon>:5:21: 5:22 error: unexpected token: `.`
[21:21:57] -rusti- <anon>:5          env!("HOME").to_owned()
[21:21:58] -rusti-                               ^
[21:21:58] -rusti- application terminated with error code 101
[21:22:03] <Eridius> rusti: let x = env!("HOME").to_owned(); x
[21:22:04] -rusti- ~"/home/rust"
[21:22:07] <Eridius> sigh, same issue as bytes.
[21:22:11] *** Joins: eatkinson (eatkinson@moz-DACC1A92.dsl.bell.ca)
[21:22:16] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[21:22:44] <strcat> brson: so the linker dies in open_verify
[21:22:50] <strcat> brson: which I think is verifying the ELF header
[21:23:07] <acrichto> rusti: env!("not present")
[21:23:07] -rusti- <anon>:5:9: 6:5 error: Environment variable not present not defined
[21:23:07] -rusti- <anon>:5          env!("not present")
[21:23:07] -rusti- <anon>:6     };
[21:23:07] -rusti- application terminated with error code 101
[21:23:37] <Eridius> rusti: use std::util::id; id(bytes!("foo").to_owned())
[21:23:38] -rusti- ~[102, 111, 111]
[21:23:43] <kimundi> Eridius: what issue? unexpected token?
[21:23:47] <Eridius> kimundi: yeah
[21:23:57] <Eridius> I just filed this as https://github.com/mozilla/rust/issues/8770
[21:24:00] <kimundi> rusti: (env!("HOME")).to_owned()
[21:24:01] -rusti- ~"/home/rust"
[21:24:10] <Eridius> oh hey, simple parens. that's handy
[21:24:26] <kimundi> Need to tell rust 'this is a expression, not a statement'
[21:24:30] <Eridius> rusti: (bytes!("foo").to_owned())
[21:24:31] -rusti- ~[102, 111, 111]
[21:24:40] <Eridius> kimundi: I fail to see why that's necessary
[21:25:11] <Eridius> bytes!("foo") 3
[21:25:12] <brson> Eridius: I don't understand either
[21:25:15] <Eridius> rusti: bytes!("foo") 3
[21:25:19] -rusti- pastebinned 7 lines of output: http://ix.io/7B0
[21:25:38] <Eridius> how curious. bytes!() expands to a statement, but then typechecks incorrectly
[21:25:47] *** Quits: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Ping timeout)
[21:26:37] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[21:27:46] <strcat> macros are a bit weird
[21:27:50] <Eridius> it's a syntax extension
[21:27:57] <strcat> yes but it acts like macros do
[21:28:00] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[21:28:03] <strcat> they don't expand properly everywhere
[21:28:07] <strcat> even though you'd expect it
[21:28:17] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[21:28:26] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[21:28:38] <strcat> pauls can probably confirm, but I think it's just that it requires implementation work to make it expand in each new place
[21:28:41] <Eridius> rusti: macro_rules! foo(() => ([3])) foo!().to_owned()
[21:28:41] -rusti- <anon>:5:45: 5:46 error: unexpected token: `.`
[21:28:42] -rusti- <anon>:5          macro_rules! foo(() => ([3])) foo!().to_owned()
[21:28:42] -rusti-                                                       ^
[21:28:42] -rusti- application terminated with error code 101
[21:28:43] <Eridius> hah
[21:29:12] <strcat> like they can't expand inside an impl to make methods atm, but they probably could
[21:29:19] <pauls> strcat: what do you mean?
[21:29:25] <pauls> Oh, yes.
[21:29:25] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: night)
[21:29:31] <adridu59> mismatched types: expected `int` but found `std::option::Option<int>` (expected int but found enum std::option::Option)
[21:29:33] <adridu59> ugh
[21:29:41] <pauls> Correct: it's a small matter of programming.
[21:30:33] <kimundi> adridu59: Seems pretty clear to me
[21:30:38] <adridu59> std::int::from_str(myString.slice(a, a+1)) doesn't seem to return an int
[21:30:49] <ecr> of course not
[21:30:51] <pauls> ...provided that there isn't a grammar ambiguity.
[21:30:57] <ecr> it could fail to parse
[21:30:58] <kimundi> adridu59: Becaus ethe string colud not be an int
[21:30:59] <ecr> ergo, Option
[21:31:19] <kimundi> rusti: ::std::int::from_str("45")
[21:31:20] -rusti- Some(45)
[21:31:31] <adridu59> then how do I get it as plain int? I just want to extract an int from a large string on ints
[21:31:33] <ecr> rusti: std::int::from_str("foo")
[21:31:34] -rusti- None
[21:31:44] <ecr> match and handle the failure case
[21:31:52] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[21:31:55] <ecr> or use a method that does that internally (map, etc.)
[21:32:19] <strcat> brson: try using `readelf -a` on the libs
[21:32:22] <strcat> brson: we have some weird issues
[21:32:28] <kimundi> adridu59: Option<T> has methods, one of it is 'unwrap' which returns the int if it is a Some, and fails if it is None
[21:32:28] <strcat> readelf: Warning: corrupt note found at offset 0 into core notes
[21:32:28] <Luqman> klutzy: \o/ awesome work on the win64 stuff
[21:32:30] <strcat> readelf: Warning:  type: 7c075dec, namesize: 74737572, descsize: 01000000
[21:32:36] <strcat> brson: maybe it gets worse without compression of metadata
[21:32:43] <kimundi> rusti: ::std::int::from_str("45").unwrap()
[21:32:45] -rusti- 45
[21:32:50] <strcat> hm
[21:32:55] <kimundi> rusti: ::std::int::from_str("as").unwrap()
[21:32:56] -rusti- task <unnamed> failed at 'called `Option::unwrap()` on a `None` value', /build/rust-git/src/rust/src/libstd/option.rs:314
[21:32:56] -rusti- application terminated with error code 101
[21:32:57] <myname> rusti: None.unwrap()
[21:33:00] -rusti- pastebinned 6 lines of output: http://ix.io/7B1
[21:33:05] <ecr> or use .expect() which is like unwrap, but takes a message to print in case of failure
[21:33:24] <ecr> rather than just saying 'tried to unwrap None'
[21:33:29] <myname> rusti: ::std::int::from_str("").unwrap()
[21:33:30] -rusti- task <unnamed> failed at 'called `Option::unwrap()` on a `None` value', /build/rust-git/src/rust/src/libstd/option.rs:314
[21:33:30] -rusti- application terminated with error code 101
[21:33:34] <adridu59> nice, thanks
[21:33:35] <myname> i see
[21:33:55] <ecr> rusti: std::int::from_str("").expect("I am a proper error message")
[21:33:57] -rusti- task <unnamed> failed at 'I am a proper error message', /build/rust-git/src/rust/src/libstd/option.rs:342
[21:33:57] -rusti- application terminated with error code 101
[21:34:07] <adridu59> ecr: I won't use it here because I have an hardcoded value but that's good to know
[21:34:36] <Eridius> adridu59: if it's a hardcoded value, why are you parsing it?
[21:34:42] <Eridius> instead of just hardcoding it as an int?
[21:34:51] <strcat> because big integers in rust suck atm
[21:35:03] <strcat> because int literals aren't overloadable like haskell ;[
[21:35:05] <adridu59> Eridius: because it has way too much number and I couldn't get BigInt to work
[21:35:06] <kimundi> myname: None.unwrap() is ambigious. It could be the None case of any Option<T>.
[21:35:06] <Eridius> well if it's a big int you can't very well parse it as a regular int anyway
[21:35:10] <ecr> adridu59: that's fine too. failing on an unwrap is equivalent to a plain old null pointer exception. using expect as least helps you narrow it down.
[21:35:40] <adridu59> also Strings have better parse functions if I'm not mistaken
[21:35:40] <kimundi> rusti: None::<uint>.unwrap()
[21:35:41] -rusti- task <unnamed> failed at 'called `Option::unwrap()` on a `None` value', /build/rust-git/src/rust/src/libstd/option.rs:314
[21:35:41] -rusti- application terminated with error code 101
[21:35:43] <lkuper> Anyone feel like reading a draft of a blog post about default methods?
[21:35:45] *** Joins: brendan (brendaneic@moz-BE33DA21.fw1.sfo1.mozilla.net)
[21:35:53] <adridu59> lkuper: sure!
[21:35:57] <tjc> lkuper: Sure, send it my way
[21:36:38] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[21:37:16] <lkuper> adridu59, tjc: k, one sec.  github gist seems really reluctant to markdown-ify a huge file, so you may have to deal with plain text.
[21:37:18] *** Joins: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP)
[21:37:22] *** Joins: untothebreach (paul@moz-61A4D5B6.lightspeed.sgnwmi.sbcglobal.net)
[21:37:54] <adridu59> task <unnamed> failed at 'called `Option::unwrap()` on a `None` value'
[21:37:55] <adridu59> :D
[21:38:22] *** Quits: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net) (Ping timeout)
[21:38:59] *** Joins: maik (maik___@moz-1318C3AE.dip0.t-ipconnect.de)
[21:39:18] *** Joins: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP)
[21:39:42] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[21:40:13] <lkuper> adridu59, tjc: privmsg'd
[21:40:37] *** Quits: untothebreach (paul@moz-61A4D5B6.lightspeed.sgnwmi.sbcglobal.net) (Quit: leaving)
[21:40:50] <brson> strcat: readelf says there's a 'corrupt note'
[21:40:58] *** Quits: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP) (Ping timeout)
[21:41:03] <strcat> brson: yeah I see that with the working libstd though
[21:41:15] <strcat> was thinking it might be able to find other issues
[21:41:26] <strcat> since the verification pass of `ld` is what fails
[21:41:39] <brson> strcat: oh it says the samething with compression
[21:41:58] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[21:42:22] <brson> nothing else looks particularly alarming
[21:42:39] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[21:42:39] *** ChanServ sets mode: +o pcwalton
[21:43:35] <brson> still trying to bisect the mac valgrind failure
[21:43:44] <adridu59> lkuper: can you rename it as .md (Markdown)?
[21:45:26] *** Quits: sebcrozet (sebcrozet@moz-7FB6C00B.w193-252.abo.wanadoo.fr) (Ping timeout)
[21:45:43] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[21:46:15] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[21:46:15] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/zwtspg
[21:46:15] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[21:47:42] <strcat> ah I guess since you can visit parts of functions, you could visit !
[21:48:10] <mark_edward> are trait impls automatically marked pub?
[21:48:25] <strcat> no, their visibility is determined by the trait
[21:48:30] <strcat> since they have to satisfy the trait's requirements
[21:48:43] <tjc> lkuper: this is unusual, but I have absolutely no comments. it looks great!
[21:48:56] <mark_edward> strcat: what does that mean? so i don't need to mark trait fn's pub?
[21:49:09] <strcat> an impl of a trait can't decide visibility
[21:49:12] <strcat> the trait does
[21:49:27] <strcat> trait Foo { } /* private, as are all implementations */
[21:49:35] <strcat> pub trait Foo { } /* public, as are all implementations */
[21:49:48] <strcat> tjc: https://github.com/mozilla/rust/pull/8771 r?
[21:50:05] <tjc> strcat: looking
[21:50:18] *** Joins: ababo (Mibbit@moz-377EDCB3.dsl.pool.telekom.hu)
[21:51:14] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[21:51:14] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/i4IUsw
[21:51:14] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[21:51:15] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[21:51:15] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/wqUACQ
[21:51:15] <ghrust> 13rust/06auto 14707df55 15Alex Crichton: Rewrite pass management with LLVM...
[21:51:15] <ghrust> 13rust/06auto 14d6fb7e0 15bors: auto merge of #8700 : alexcrichton/rust/better-llvm, r=thestinger...
[21:51:15] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[21:51:20] <lkuper> tjc: cool, thanks.
[21:51:42] *** Joins: tikue (tkuehn@B8DA8A71.21C37D63.689607DE.IP)
[21:53:26] <strcat> rusti: fn foo() {} foo
[21:54:05] *** Quits: victorporof (victorporo@moz-BAE8D951.pck.nerim.net) (Quit: victorporof)
[21:54:19] *** Quits: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP) (Quit: lmandel)
[21:56:23] <maik> what editor are you using?
[21:57:11] *** Quits: huseby (huseby@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Leaving)
[21:57:52] <mitsuhiko> bjz: is this safe?
[21:57:52] <mitsuhiko>  let mut linked: ~Program<Linked> = unsafe { cast::transmute(self) };
[21:58:58] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Ping timeout)
[21:59:29] <Eridius> rusti: task().try(|| fail!("foo"))
[21:59:29] -rusti- <anon>:5:9: 5:13 error: unresolved name `task`.
[21:59:29] -rusti- <anon>:5          task().try(|| fail!("foo"))
[21:59:29] -rusti-                   ^~~~
[21:59:29] -rusti- error: aborting due to previous error
[21:59:30] -rusti- application terminated with error code 101
[21:59:34] <Eridius> rusti: std::task::task().try(|| fail!("foo"))
[21:59:38] -rusti- pastebinned 6 lines of output: http://ix.io/7B4
[21:59:54] <Eridius> rusti: std::task::task().try::<()>(|| fail!("foo"))
[21:59:56] -rusti- task <unnamed> failed at 'foo', <anon>:5
[21:59:56] <benh> oh, rusti is back :D
[21:59:56] -rusti- task <unnamed> failed at 'killed by linked failure', /build/rust-git/src/rust/src/libstd/rt/kill.rs:627
[21:59:56] -rusti- application terminated with error code 101
[22:00:10] <Eridius> kind of surprised that .try() doesn't implicitly call .supervised()
[22:00:21] <Eridius> rusti: std::task::task().supervised().try::<()>(|| fail!("foo"))
[22:00:21] -rusti- <anon>:5:9: 6:5 error: type `()` does not implement any method in scope named `try`
[22:00:22] -rusti- <anon>:5          std::task::task().supervised().try::<()>(|| fail!("foo"))
[22:00:22] -rusti- <anon>:6     };
[22:00:22] -rusti- error: aborting due to previous error
[22:00:22] -rusti- application terminated with error code 101
[22:00:50] <Eridius> oh pfft, the docs on task::try() suggest supervised() returns a value.
[22:01:19] <Eridius> rusti: let t = std::task::task(); t.supervised(); t.try::<()>(|| fail!("foo"))
[22:01:22] -rusti- pastebinned 8 lines of output: http://ix.io/7B5
[22:01:28] <Eridius> rusti: let mut t = std::task::task(); t.supervised(); t.try::<()>(|| fail!("foo"))
[22:01:29] -rusti- task <unnamed> failed at 'foo', <anon>:5
[22:01:29] -rusti- Err(())
[22:01:42] <adridu59> #[cfg(not(stage0))] is for bootstrapping certain new compiler functions?
[22:02:07] <strcat> yes
[22:02:18] <strcat> well, stdlib functions
[22:02:35] <strcat> I guess there are rare occasions when you would use it in librustc
[22:02:57] <SiegeLord> doomlord: Did you say you added Rust support to Geany? I'm not seeing a Rust lexer in their repository?
[22:03:15] <doomlord> lol :) i had a long argument with them
[22:03:23] *** Quits: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP) (Quit: Lost terminal)
[22:03:55] <Eridius> really wish there was a .try_with() right now
[22:03:59] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[22:04:06] <benh> rusti: struct S; impl Drop for S { fn drop(&self) { println("drop"); } } fn f(ref _s: S) {} fn main() { let s = S; f(s); }
[22:04:06] -rusti- ()
[22:04:11] <benh> ^ shouldn't that print drop? :)
[22:04:28] <doomlord> if you are interested you can get it from my github , https://github.com/dobkeratops/geany
[22:04:38] <SiegeLord> What was the argument about?
[22:05:01] *** Quits: ababo (Mibbit@moz-377EDCB3.dsl.pool.telekom.hu) (Quit: http://www.mibbit.com ajax IRC Client)
[22:05:06] <doomlord> things like "they dont like mixing declarations and code, please move all the variable declarations to the top " etc
[22:05:08] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[22:05:12] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:05:47] <SiegeLord> And so they rejected the effort?
[22:06:00] <doomlord> yes
[22:06:15] <SiegeLord> Even after you fixed those things?
[22:06:21] <doomlord> i lost patience :)
[22:06:35] <doomlord> the reason i got worked up about it is...
[22:06:48] <doomlord> .... i need to fix the *syntax highlighting* , and instead they're nit picking
[22:07:13] <tikue> rusti: struct Foo; impl Drop for Foo { fn drop(&self) { println("bye"); }} let foo = Foo;
[22:07:14] -rusti- <anon>:5:81: 5:84 warning: unused variable: `foo` [-W unused-variable (default)]
[22:07:14] -rusti- <anon>:5          struct Foo; impl Drop for Foo { fn drop(&self) { println("bye"); }} let foo = Foo;
[22:07:14] -rusti-                                                                                           ^~~
[22:07:14] -rusti- bye
[22:07:16] -rusti- ()
[22:07:20] <doomlord> with the current scintilla syntax highlighter, rust pointer lifetimes show up with pink backkgrounds to the end of the line, showing you that they're unterminated strings :(
[22:07:29] <tikue> benh: no it shouldn't, because you never call main
[22:07:36] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[22:07:39] <doomlord> THATS the bit I needed to fix 
[22:07:49] <benh> tikue: ugh, good point
[22:08:08] <benh> I couldn't come up with a less negative test case :(
[22:08:19] <benh> rusti: struct S; impl Drop for S { fn drop(&self) { println("drop"); } } fn f(ref _s: S) {} let s = S; f(s);
[22:08:20] -rusti- ()
[22:08:36] <tikue> that's weird
[22:08:51] <SiegeLord> That's a shame...
[22:08:52] <doomlord> well anyway - if geany support for rust interests you, what i've done is available on github. Scintilla changes apparently need to be submitted seperately to the scintilla people, then they'll be availble for other editors too
[22:09:05] <benh> I think ref in parameter patterns are broken, but I'm not sure whether supposed to work
[22:09:34] <tikue> benh: I didn't think you could put ref as an argument
[22:09:36] <doomlord> i've gone back to emacs, I thought you couldn't rebind escape, but i was using the wrong command.. its "keyboard-escape-quit", not "keyboard-quit" :) i'm a happy emacs user now.
[22:09:38] <tikue> that seems really weird to me
[22:09:55] <tikue> like shouldn't it be fn f(_s: &S) {}
[22:10:10] <benh> then it'd be called differently though
[22:10:15] <SiegeLord> doomlord: I'm confused... did you fix the lifetime syntax issue?
[22:10:19] <doomlord> and i've modified the syntax highlighting how i like it, struct/trait/impl/fn/enum all in slightly different hues, type paramshighlighted .. etc
[22:10:34] <tikue> benh: what do you mean? ref is the same as taking a borrowed pointer
[22:10:35] <Eridius> I would expect a ref in an arg to accept an argument of that value, but then bind the arg name in the function to a reference to the actual passed arg
[22:10:40] <Eridius> but I have no idea why you would ever want to do that
[22:10:57] <Eridius> rusti: let ref i = 3; i
[22:11:01] -rusti- pastebinned 16 lines of output: http://ix.io/7B6
[22:11:16] <Eridius> rusti: let i = 3; let ref ip = i; ip
[22:11:18] <doomlord> SiegeLord, i created a schintilla highlighter for rust cloned from their D stuff, in which i'd be able to work on it, but they stated "DONT submit any modifications to scintilla"
[22:11:18] -rusti- pastebinned 16 lines of output: http://ix.io/7B7
[22:11:20] <Eridius> rusti: let i = 3; let ref ip = i; printfln!(ip)
[22:11:20] -rusti- &3
[22:11:21] -rusti- ()
[22:11:23] <Eridius> heh
[22:11:39] <doomlord> if you want to change scintilla.. you need to do it seperately
[22:11:49] <Eridius> is there any way to suppress the "task <unnamed> failed at ..." messages, for expected failures?
[22:12:04] <doomlord> which is fair enough I guess, they'll get over-written when they grab the next version
[22:12:24] <benh> tikue: but then I'd call it as f(&S), not f(S), surely
[22:12:37] <tikue> benh: ah good point
[22:12:48] <tikue> i didn't know you could pattern match in function argument names
[22:12:54] *** Joins: toqueteos (Mibbit@moz-16CBFEDC.dynamic.jazztel.es)
[22:13:13] <doomlord> one idea is to add an option to the scintilla highligher to disable anything to do with '...', then it would be useable with the C highlighter
[22:13:14] *** Joins: [a]bacus (snoonan_mo@moz-F95B9243.hsd1.wa.comcast.net)
[22:13:25] *** [a]bacus is now known as abacus
[22:13:29] <Eridius> tikue: function argument names are irrefutable patterns
[22:13:31] <Eridius> just like let bindings
[22:13:48] <Eridius> this is why you can use _ as a name, even though that's not an identifier (it's a separate terminal token)
[22:13:56] <tikue> rusti: struct Foo { a: uint, b: uint } fn foo(Foo { ref a, _ }: uint) { println(a); } foo(Foo {a: 1, b: 2});
[22:13:59] -rusti- pastebinned 7 lines of output: http://ix.io/7B8
[22:14:21] <tikue> Eridius: why doesn't that work?
[22:14:27] <tikue> foudn ref in ident position
[22:14:29] <tikue> not sure what that means
[22:15:13] <Eridius> tikue: I think it's a limitation of irrefutable patterns atm, probably the same reason we can't yet say `let (mut a, b) = (1, 2)`
[22:15:36] <tikue> rusti: struct Foo { a: uint, b: uint } fn foo(Foo { a, _ }: uint) { println(a); } foo(Foo {a: 1, b: 2});
[22:15:40] -rusti- pastebinned 11 lines of output: http://ix.io/7B9
[22:15:47] <doomlord> you can improve the geany highlighting  a bit by changing the colors for the sting error context (stringeol ???) .. that makes it useable
[22:15:56] <tikue> rusti: struct Foo { a: uint, b: uint } fn foo(Foo { a, _ }: Foo) { println(a); } foo(Foo {a: 1, b: 2});
[22:15:57] -rusti- <anon>:5:77: 5:78 error: mismatched types: expected `&str` but found `uint` (expected &str but found uint)
[22:15:57] -rusti- <anon>:5          struct Foo { a: uint, b: uint } fn foo(Foo { a, _ }: Foo) { println(a); } foo(Foo {a: 1, b: 2});
[22:15:57] -rusti-                                                                                       ^
[22:15:57] -rusti- error: aborting due to previous error
[22:15:59] -rusti- application terminated with error code 101
[22:16:07] <tikue> rusti: struct Foo { a: uint, b: uint } fn foo(Foo { a, _ }: Foo) { println!(a); } foo(Foo {a: 1, b: 2});
[22:16:07] -rusti- <anon>:5:78: 5:79 error: format argument must be a string literal.
[22:16:07] -rusti- <anon>:5          struct Foo { a: uint, b: uint } fn foo(Foo { a, _ }: Foo) { println!(a); } foo(Foo {a: 1, b: 2});
[22:16:07] -rusti-                                                                                        ^
[22:16:08] -rusti- application terminated with error code 101
[22:16:12] <Eridius> try printfln!()
[22:16:19] <tikue> rusti: struct Foo { a: uint, b: uint } fn foo(Foo { a, _ }: Foo) { printfln!(a); } foo(Foo {a: 1, b: 2});
[22:16:20] -rusti- 1
[22:16:20] -rusti- ()
[22:16:22] <tikue> hahaha wow
[22:16:25] <tikue> that's amazing
[22:16:41] <tikue> rusti: struct Foo { a: uint, b: uint } fn foo(ref Foo { a, _ }: Foo) { printfln!(a); } foo(Foo {a: 1, b: 2});
[22:16:42] -rusti- <anon>:5:56: 5:57 error: expected `:` but found `{`
[22:16:42] -rusti- <anon>:5          struct Foo { a: uint, b: uint } fn foo(ref Foo { a, _ }: Foo) { printfln!(a); } foo(Foo {a: 1, b: 2});
[22:16:42] -rusti-                                                                  ^
[22:16:42] -rusti- application terminated with error code 101
[22:16:45] *** Joins: sebcrozet (sebcrozet@moz-A855F6C0.w82-127.abo.wanadoo.fr)
[22:16:56] <strcat> ref goes on the specific variable you're binding to
[22:17:01] <strcat> `ref a`
[22:17:08] <tikue> rusti: struct Foo { a: uint, b: uint } fn foo(Foo { ref a, _ }: Foo) { printfln!(a); } foo(Foo {a: 1, b: 2});
[22:17:12] -rusti- pastebinned 7 lines of output: http://ix.io/7Ba
[22:17:13] <tikue> thx strcat 
[22:17:19] <tikue> hm
[22:17:27] <kmc> ok now I'm getting "cannot move out of captured outer variable" when the variable in question is an &fn
[22:17:35] <kmc> but it seems like an &fn could just be copied
[22:17:35] <tikue> it seems to me that "ref foo" would almost always be better than foo: &Foo
[22:17:45] <Eridius> kmc: closures can't be cloned
[22:17:55] <Eridius> kmc: known limitation atm
[22:18:26] <kmc> but it's just a pointer >_<
[22:18:27] <kmc> but ok
[22:18:28] <strcat> tikue: oh I didn't notice you were doing it there
[22:18:30] <Eridius> tikue: why? It makes sense in a match pattern, because the real value can still live in the matched value, but as an argument? If I move a value into an argument, but then the argument binds by-ref, what actually owns the value?
[22:18:35] * strcat doesn't think that will work
[22:19:01] *** Quits: brendan (brendaneic@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: brendan)
[22:19:12] <Eridius> I think ref should just be disallowed on arguments
[22:19:21] *** Quits: txdv (quassel@966F3542.3BA477DA.14C26596.IP) (Ping timeout)
[22:19:25] <tikue> lol yeah i got excited for a second but idk
[22:19:39] <tikue> or how about regex
[22:19:57] <tikue> fn foo(bar: &*&Bar) {}
[22:21:51] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[22:22:16] *** Joins: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP)
[22:23:18] *** Quits: webber46 (webber46@moz-717E9C5B.cust.bredband2.com) (Quit: webber46)
[22:23:32] <Eridius> hrm, unused-mut and unused-variable seem to be giving spurious warnings in my macro
[22:23:32] *** Quits: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP) (Connection reset by peer)
[22:23:40] *** Joins: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP)
[22:24:47] <tjc> pcwalton or graydon: r? https://github.com/mozilla/rust/pull/8712
[22:25:10] <Eridius> curious, wrapping my macro body in {} removed the spurious warnings
[22:27:15] *** Joins: jmgrosen (jmgrosen@moz-BF80C818.sbcc.edu)
[22:28:17] *** Joins: txdv (quassel@966F3542.3BA477DA.14C26596.IP)
[22:32:36] *** Quits: eatkinson (eatkinson@moz-DACC1A92.dsl.bell.ca) (Quit: eatkinson)
[22:34:26] *** Joins: huseby (huseby@8F761026.B5EF4AF6.E96CA9D8.IP)
[22:35:03] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[22:35:23] <tjc> r? anybody: https://github.com/mozilla/rust/pull/8773
[22:35:47] *** Joins: eatkinson (eatkinson@moz-DACC1A92.dsl.bell.ca)
[22:37:09] *** Joins: reyre (reyre@moz-9002CDDA.cpe.net.cable.rogers.com)
[22:37:30] <tjc> thanks ecr! I wondered who anasazi was for a second :-)
[22:37:50] *** Quits: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP) (Ping timeout)
[22:37:58] <ecr> no problem :) that's my first r+ actually. figured it's simple enough that I couldn't possibly mess up
[22:37:59] *** Joins: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP)
[22:38:02] <tjc> heh, yeah
[22:38:33] *** Quits: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP) (Quit: Textual IRC Client: www.textualapp.com)
[22:41:27] <maik> where do I have to put the rust.ctags file again?
[22:43:02] <bjz> mitsuhiko: yes, because the data remains the same (the type param has no effect on the size/layout) and self is consumed
[22:43:07] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[22:43:33] <bjz> mitsuhiko: I wish there was a way around doing the transmute though
[22:48:27] *** Quits: io2 (io2@moz-A6202C16.home.otenet.gr) (Quit: )
[22:48:55] <h3r3tic> brson, bjz: finally got around to it: https://github.com/mozilla/rust/issues/8774
[22:49:12] <h3r3tic> bjz: did you have any ideas of what to do with gl-rs in the meantime?
[22:49:22] <cmr> h3r3tic: ... isn't "system" just "C" ?
[22:49:25] <h3r3tic> one option is to un-macro-ify the generated source
[22:49:37] <h3r3tic> cmr: I thought 'C' was cdecl
[22:49:46] <cmr> I thought "cdecl" was "cdecl"
[22:49:48] <bjz> h3r3tic: we could have an option to generate something different for windows
[22:49:50] <cmr> I don't actually know!
[22:49:58] <bjz> I think so
[22:50:07] <h3r3tic> cmr: and I proposed adding this 'system' alias yesterday, and brson didn't say C already did that :P
[22:50:33] <ecr> >.< I left r+ on the PR instead of the commit
[22:50:34] *** Quits: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se) (Ping timeout)
[22:50:43] <h3r3tic> bjz: hm true. but then if you want to check-in the generated sources anywhere, they have to be different for windows and nix
[22:51:16] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[22:51:16] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14d6fb7e0 to 149cd91c8: 02http://git.io/N3iJvQ
[22:51:16] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[22:51:17] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[22:51:17] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/r_NKMg
[22:51:17] <ghrust> 13rust/06auto 143e4e1a2 15Tim Chevalier: rustpkg: Test that different copies of the same package ID can exist in multiple workspaces...
[22:51:17] <ghrust> 13rust/06auto 141ac7d80 15bors: auto merge of #8712 : catamorphism/rust/rustpkg-issue-7241, r=pcwalton...
[22:51:18] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[22:51:36] <bjz> h3r3tic: I would just say that the user would have to generate it themselves if they're on windows, unfortunately
[22:51:43] <h3r3tic> :S
[22:51:51] <h3r3tic> I guess in the meantime that's fine.
[22:51:56] <bjz> h3r3tic: yeah
[22:52:04] <bjz> not an ideal solution
[22:52:22] <bjz> nmatsakis: https://github.com/mozilla/rust/issues/8774
[22:52:26] <h3r3tic> so, a platform switch to the generator?
[22:52:32] <bjz> yeah
[22:52:41] <bjz> would you be able to add that?
[22:52:50] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[22:52:51] <h3r3tic> sure :)
[22:53:02] <h3r3tic> btw awesome job on teh generator
[22:53:05] <bjz> h3r3tic: nmatsakis was behind the extern fns btw
[22:53:09] <h3r3tic> it's really neat to work with
[22:53:14] <h3r3tic> yeah I know
[22:53:15] <bjz> h3r3tic: oh really
[22:53:27] <h3r3tic> yussir
[22:53:27] * bjz thought it was pretty ugly
[22:53:29] <h3r3tic> haha
[22:53:45] <h3r3tic> nah, I likes. much much easier to jump into than that Lua one we used
[22:53:55] <bjz> h3r3tic: I wanted to keep it small though, I've seen loads of bloated ones
[22:54:00] <h3r3tic> mm
[22:54:13] <nmatsakis> you should be able to do `extern "C stdcall"` to get something that defaults to the normal C convention except on windows
[22:54:29] <nmatsakis> but I'm not convinced that the ABI strings are really setup right and am amenable to a simpler scheme
[22:54:50] <bjz> nmatsakis: D does extern (C) ...
[22:55:05] <h3r3tic> D has extern(System) and that's quite neat :P
[22:55:23] <h3r3tic> bjz: so do you want me to add that extra generator I wrote?
[22:55:28] <bjz> h3r3tic: I really want to be able to limit the number of extensions generated by default, using the part at the end of the xml
[22:55:35] <bjz> h3r3tic: yep
[22:55:38] <h3r3tic> cool
[22:55:42] <h3r3tic> hehe
[22:55:43] <bjz> h3r3tic: send a PR
[22:55:59] <h3r3tic> the current 'ptr' loader takes around 5 minutes to compile on my machine xD
[22:56:05] <bjz> -_-
[22:56:07] * maik ctags y u no work?
[22:56:07] <bjz> yeah
[22:56:15] <h3r3tic> could it be the macro processing?
[22:56:19] <bjz> I think 4.3-core should be default
[22:56:25] <h3r3tic> yus
[22:56:52] <bjz> then you could add extensions if you need them, or do `all`
[22:57:03] <bjz> but yeah
[22:57:08] <bjz> for now it's ok
[22:57:16] <bjz> just something to bear in mind
[22:57:21] <h3r3tic> nmatsakis: I'm confused, how does the compiler figure out that it should be using stdcall on windows and cdecl on *nix if you say "C stdcall" ?
[22:57:24] <bjz> atm lmath is more pressing
[22:57:32] <h3r3tic> nmatsakis: but thanks for sharing this information :D
[22:57:45] * bjz has users beating down his coor
[22:57:49] <bjz> *door
[22:57:50] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[22:57:51] <h3r3tic> lol
[22:57:59] <nmatsakis> h3r3tic: stdcall is "platform speciic", "C" is general, it picks the most specific one
[22:58:22] <nmatsakis> h3r3tic: in some cases, such as on arm, there are multiple "C" abis too -- like aapcs vs whatever-the-alternative-is
[22:58:45] <nmatsakis> anyway, gotta run
[22:59:01] <h3r3tic> nmatsakis: yeah, I looked up the compiler for the supported names :)
[22:59:15] <h3r3tic> but in that example, wouldn't stdcall be always the specific one?
[22:59:21] <h3r3tic> so that it would ignore 'C'? :o
[22:59:58] <bjz> h3r3tic: so for now we could do that
[23:00:03] <h3r3tic> bjz: ... but if "C stdcall" works currently, then maybe we can just do that in gl-rs rather than platform-specific generation?
[23:00:05] <h3r3tic> yeah ;D
[23:00:11] <bjz> h3r3tic: could you check if it works
[23:00:17] <h3r3tic> of course :)
[23:00:26] <bjz> h3r3tic: we might need to change glfw-rs too
[23:00:29] <h3r3tic> yup
[23:00:32] <h3r3tic> definitely
[23:00:38] <bjz> glad to have a windows user!
[23:00:41] <h3r3tic> :D
[23:00:47] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[23:00:54] <h3r3tic> I've decided I couldn't be arsed to be on linux any more :P
[23:00:58] <bjz> heh
[23:01:09] <bjz> it's important we have windows users
[23:01:13] <bjz> that
[23:01:18] <h3r3tic> yus
[23:01:22] <engla> toqueteos: using case for visibility would restrict the usable portion of unicode scripts. not sure if it would matter, but a lot of scripts don't have two cases
[23:01:37] <bjz> that's super important if rust want's to break into cg/gamedev
[23:01:39] <mcpherrin> I run windows day-to-day but hate developing on it, so SSH to the linux box immediately below it.  One of these days I'll fiddle with graphics stuff and will be glad for your effort :P
[23:01:58] <h3r3tic> bjz: yup. and I really hope it does :)
[23:02:10] <bjz> mcpherrin: aye. the goal is to make rust attractive for that field
[23:02:25] <bjz> that's basically the driving force behind my libs
[23:02:27] <bjz> :P
[23:02:31] <mcpherrin> I've noticed :)
[23:02:44] <h3r3tic> :D
[23:02:50] <jeaye> Graphics :)
[23:03:08] <toqueteos> engla: two cases? i don't understand your phrase, can you elaborate a bit more?
[23:03:14] * bjz would rather have a job that users Rust than C++, but that might be a little optimistic
[23:03:18] <engla> toqueteos: lower and upper case
[23:03:30] <toqueteos> engla: oh short variables you say?
[23:03:38] <engla> toqueteos: scripts = alphabets
[23:04:02] <mcpherrin> bjz: Heh, unless you work at mozilla I think that's pretty unlikely at this stage
[23:04:07] * mcpherrin goes back to writing c++ for work 
[23:04:07] <maik> does anyone know how I can explicitly add the rust.ctags file?
[23:04:15] <bjz> mcpherrin: aye :(
[23:04:16] <kmc> work at mozilla or start your own company :)
[23:04:16] <jeaye> bjz: I feel like I'd rather keep my C++ job for a while, at least until I'm as competent in Rust as I am C++ (which will probably take some time)
[23:04:28] <bjz> jeaye: yeah
[23:04:36] <toqueteos> engla: what language does people use to write code, most of the time?
[23:04:52] <toqueteos> there's always exceptions, but most of the time, answer is english
[23:05:09] <Eridius> rusti: macro_rules! foo(($($arg:expr),+) => (bytes!($($arg),+))) foo!("a b",42)
[23:05:12] -rusti- &[97, 32, 98, 42]
[23:05:22] <mcpherrin> toqueteos: I worked on a french codebase for a while and it was weird :P
[23:05:32] *** Quits: fhahn (fhahn@moz-7924DB5C.vie.surfer.at) (Ping timeout)
[23:05:39] <bjz> jeaye: I've spent a long time working out how to use Rust's features effectively - still lots to learn/explore
[23:06:05] <engla> I don't know, I'm a fan of making computers into tools (= speak the language I do), but the main point is that it would unmake a part of the unicode support
[23:06:51] <bjz> engla: but we want those mathemagical identifiers!
[23:07:16] <toqueteos> there's theta lower and upper case
[23:07:20] <toqueteos> extra hipstery
[23:07:29] * maik \o/ ctags works
[23:07:49] <toqueteos> how many here would use Ã± or Ã‘ in their code?
[23:08:07] <engla> I'll use Î±Â and Î²
[23:08:23] <mcpherrin> rusti: let ÃŸ = 4; ÃŸ
[23:08:24] -rusti- 4
[23:08:30] <toqueteos> hahaha
[23:08:45] <engla> let ÃŸ = 1; let Î² = 2; (ÃŸ, Î²)
[23:08:54] <engla> rusti: let ÃŸ = 1; let Î² = 2; (ÃŸ, Î²)
[23:08:55] -rusti- (1, 2)
[23:09:05] <toqueteos> let Î˜ = 2; let Î¸ = 3; Î˜*Ï‘
[23:09:06] <aatch> engla, that is pure evil...
[23:09:17] <toqueteos> rusti: let Î˜ = 2; let Î¸ = 3; Î˜*Ï‘
[23:09:18] -rusti- <anon>:5:30: 5:30 error: unresolved name `Ï‘`. Did you mean `Î˜`?
[23:09:18] -rusti- <anon>:5          let Î˜ = 2; let Î¸ = 3; Î˜*Ï‘
[23:09:18] -rusti-                                        ^
[23:09:18] -rusti- error: aborting due to previous error
[23:09:18] <engla> they look different to me
[23:09:19] -rusti- application terminated with error code 101
[23:09:28] <myname> xD
[23:09:28] <engla> see, it understands
[23:09:30] <toqueteos> rusti knows greek
[23:09:30] <aatch> engla, they do to me too.
[23:09:41] <bjz> rusti: fn a<T:Num>(Î”v: T, Î” t: T) { Î”v / Î”t }
[23:09:41] -rusti- <anon>:5:28: 5:29 error: expected `:` but found `t`
[23:09:42] -rusti- <anon>:5          fn a<T:Num>(Î”v: T, Î” t: T) { Î”v / Î”t }
[23:09:42] -rusti-                                      ^
[23:09:42] -rusti- application terminated with error code 101
[23:09:52] <bjz> rusti: fn a<T:Num>(Î”v: T, Î”t: T) { Î”v / Î”t }
[23:09:53] -rusti- <anon>:5:35: 5:40 error: mismatched types: expected `()` but found `T` (expected () but found type parameter)
[23:09:54] -rusti- <anon>:5          fn a<T:Num>(Î”v: T, Î”t: T) { Î”v / Î”t }
[23:09:54] -rusti-                                             ^~~~~
[23:09:54] -rusti- error: aborting due to previous error
[23:09:54] -rusti- application terminated with error code 101
[23:10:03] <bjz> eh
[23:10:21] <myname> just waiting for someone to make APL working inside rust
[23:10:24] <Luqman> bjz: didn't declare return type
[23:10:29] <bjz> ff
[23:10:36] <bjz> rusti: fn a<T:Num>(Î”v: T, Î”t: T) -> T { Î”v / Î”t }
[23:10:38] -rusti- ()
[23:10:41] <Eridius> maik: what did you do to get ctags to work?
[23:10:54] <bjz> rusti: fn a<T:Num>(Î”v: T, Î”t: T) -> T { Î”v / Î”t } a(3f, 5f)
[23:10:55] *** Joins: jclements (jclements@moz-62D9F423.wireless.calpoly.edu)
[23:10:56] -rusti- 0.6
[23:11:01] <bjz> :P
[23:11:09] <tikue> what's the current state of the new rustdocs?
[23:11:17] <maik> Eridius, I just added the file path like ctags -R --options=/home/maik/source/rust/src/etc/ctags.rust -f .tags
[23:11:37] <Eridius> maik: oh so you have to give it to the invocation of ctags? There's no way to teach ctags to automatically find it?
[23:11:58] <maik> Eridius, I do not know sry
[23:13:57] *** flaper87 is now known as flaper87|afk
[23:14:20] <toqueteos> can somebody tell me how to achieve something like "public void java_poop_printf(String format, Object... args)" in rust please (yes i know there's fmt!)
[23:14:28] <mcpherrin> rusti: fn âˆ‘(l: &[int])->int{l[0]+âˆ‘(l.tail())}; âˆ‘(~[1,2,3,4])
[23:14:29] -rusti- <anon>:5:12: 5:12 error: unknown start of token: \u2211
[23:14:29] -rusti- <anon>:5          fn âˆ‘(l: &[int])->int{l[0]+âˆ‘(l.tail())}; âˆ‘(~[1,2,3,4])
[23:14:29] -rusti-                      ^
[23:14:29] -rusti- application terminated with error code 101
[23:14:39] <bjz> rusti: fn sdiv<T:Num>(v: [T, T, T], s: T) -> T { [v[0], v[1], v[2]] } [ fn a<T:Num>(Î”v: [T, T, T], Î”t: T) -> T { div_s(Î”v, Î”t) } a([3f, 4f, 2f], 5f)
[23:14:39] -rusti- <anon>:6:4: 6:5 error: incorrect close delimiter: `}`
[23:14:40] -rusti- <anon>:6     };
[23:14:40] -rusti-              ^
[23:14:40] -rusti- application terminated with error code 101
[23:14:50] <cmr> toqueteos: You can't.
[23:14:54] <bjz> rusti: fn sdiv<T:Num>(v: [T, T, T], s: T) -> T { [v[0], v[1], v[2]] } fn a<T:Num>(Î”v: [T, T, T], Î”t: T) -> T { div_s(Î”v, Î”t) } a([3f, 4f, 2f], 5f)
[23:14:54] <cmr> toqueteos: You need a macro
[23:14:57] <cmr> There are no variadic functions.
[23:14:58] -rusti- pastebinned 4 lines of output: http://ix.io/7Bd
[23:15:01] <cmr> But you could take a slice.
[23:15:10] <toqueteos> damn it, that's where I was stuck
[23:15:19] <engla> that's the wrong sigma bjz, here Î£
[23:15:28] <toqueteos> cmr: slice of any type?
[23:15:31] <bjz> engla: mcpherrin
[23:15:39] <engla> ah sorry
[23:15:54] <bjz> mcpherrin: doesn't accept math symbols
[23:16:02] <mcpherrin> engla: That's the "UNARY SUMMATION" symbol, obviously the correct one ;)
[23:16:05] <mcpherrin> er,
[23:16:08] <mcpherrin> N-ARY.
[23:16:23] <engla> identifiers have to be letters and numbers, not symbols
[23:16:24] <cmr> mcpherrin: only letters and numbers are allowed, not symbols.
[23:16:49] <toqueteos> cmr: given "printf(String format, Object []args)" how would args be in rust then? still impossible?
[23:16:51] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[23:16:53] <tikue> rusti: let (port, chan) = ::std::comm::stream(); chan.send(1u); port.recv()
[23:16:56] -rusti- 1
[23:16:56] <aatch> specifically XID_Start/Continue
[23:16:59] <mcpherrin> MATHEMATICAL_OPERATORS should totally be valid in function names.
[23:17:01] <mcpherrin> :(
[23:17:03] <bjz> fn âˆš<T:Real>(x: T) -> T { x.sqrt() } âˆš(3.0)
[23:17:12] <bjz> rusti: fn âˆš<T:Real>(x: T) -> T { x.sqrt() } âˆš(3.0)
[23:17:13] -rusti- <anon>:5:12: 5:12 error: unknown start of token: \u221a
[23:17:13] -rusti- <anon>:5          fn âˆš<T:Real>(x: T) -> T { x.sqrt() } âˆš(3.0)
[23:17:13] -rusti-                      ^
[23:17:13] -rusti- application terminated with error code 101
[23:17:16] <bjz> :P
[23:17:23] <jeaye> heh
[23:17:28] <tikue> rusti: let (port, chan) = ::std::comm::stream(); chan.send(1u); chan.send(2u); (port.recv(), port.recv())
[23:17:30] -rusti- (1, 2)
[23:17:35] <cmr> toqueteos: You'd need to use reflection (or std::repr), probably with a ton of other traits for various conversions.
[23:17:36] <bjz> graydon: ... math symbols nao!
[23:17:47] <cmr> toqueteos: see the ifmt implementation for inspiration, but that's all compiletime
[23:17:50] <myname> we seriously need unicode function names!
[23:18:01] <cmr> myname: we have them.
[23:18:14] <aatch> since function names are identifiers, the characters should be valid as names.
[23:18:14] <toqueteos> cmr: thanks mate! i thought printf would be a nice starting project, seems not :/
[23:18:15] <bjz> myname: we do
[23:18:15] <cmr> but you can't use arbitrary characters.
[23:18:26] <myname> why not?
[23:18:32] <Earnestly> cmr: What's the restriction on square root?
[23:18:38] <mitsuhiko> is tehre any way to move types with a Drop?
[23:18:49] <cmr> Earnestly: it's a symbol
[23:18:49] <aatch> myname, because we only allow characters that are valid word-characters.
[23:18:51] <engla> mitsuhiko: yes, they move fine
[23:18:51] <cmr> .
[23:18:55] <kimundi> Anyone know how I can surpess that 'unused import' warning/error in a tutorial-doc-code example test?
[23:18:58] <cmr> http://www.unicode.org/reports/tr31/
[23:19:02] <mitsuhiko> becaues i get cannot move out of type `game::program::Linker`, which defines the `Drop` trait
[23:19:12] <jeaye> kimundi: Remove the import
[23:19:14] <myname> cmr: so no inline APL in rust ever? :(
[23:19:15] <aatch> mitsuhiko, ah, that's different.
[23:19:26] <mitsuhiko> ah yes, miswrote the question, i mean move out of a drop trait
[23:19:45] <mitsuhiko> starting to get a feeling why bjz does ugly things with transmute :P
[23:19:49] <Earnestly> cmr: That's well and good, but why is it a restriction?
[23:19:50] <kimundi> jeaye: Kinda hard to do, the code example is for showing how the import becomes unused by being shadoowed :P
[23:19:51] <cmr> myname: no
[23:19:59] <bjz> rusti: fn â—’() -> int { 1 } â—’()
[23:19:59] -rusti- <anon>:5:12: 5:12 error: unknown start of token: \u25d2
[23:19:59] -rusti- <anon>:5          fn â—’() -> int { 1 } â—’()
[23:20:00] -rusti-                      ^
[23:20:00] -rusti- application terminated with error code 101
[23:20:02] <bjz> :)
[23:20:07] <cmr> Earnestly: because they could be operators. it'd be like using + or / in an identifier.
[23:20:27] <Earnestly> cmr: And if it's not reserved, why can't we?
[23:20:37] <cmr> Earnestly: because the only valid identifiers are alphanumeric
[23:20:46] <bjz> cmr: we need user defined operators!
[23:20:49] <aatch> Earnestly, it's for sanity sake.
[23:21:03] <Earnestly> Arbitrary then, fair enough.  It's not that I disagree but was just trying to get a specific reason
[23:21:13] <cmr> We follow the unicode recommendation for identifiers.
[23:21:16] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[23:21:16] <myname> wee need inline APL!!!
[23:21:32] <aatch> Earnestly, not completely arbitrary. We use Start/Continue character classes.
[23:21:32] * bjz wants x â™ž y
[23:21:40] <Luqman> rusti: fn ì•ˆë…•() -> int { 3 } ì•ˆë…•()
[23:21:41] <Earnestly> myname: \/Â¯()
[23:21:41] -rusti- 3
[23:21:42] <jeaye> bjz: what would that do? :P
[23:21:53] <mitsuhiko> jeaye: cross product obviously
[23:22:05] <Luqman> so yea, unicode identifiers work
[23:22:09] <engla> it's not arbitrary, it's a natural extension of the rules for ascii-based identifiers
[23:22:16] <Earnestly> Luqman: We're not talking about identifiers though
[23:22:17] <bjz> jeaye: knight land operator
[23:22:21] <jeaye> o.O It just shows up as a tilted Christmas tree for me. :P
[23:22:22] <cmr> Earnestly: yes we are?
[23:22:27] <cmr> function names are identifiers.
[23:22:27] <Earnestly> cmr: symbols
[23:22:31] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[23:22:31] <kimundi> I think rust should tokenize any invalid sequence of characters as 'AlienToken's, usuable only for macro and syntax extensions.
[23:22:46] <Earnestly> cmr: Using symbols as identifiers, that is.
[23:22:55] <mitsuhiko> just to confirm: if i have a type with a Drop i cannot move anything out of it>
[23:23:02] <aatch> mitsuhiko, correct.
[23:23:08] <mitsuhiko> no way around that?
[23:23:17] <cmr> mitsuhiko: no way around it. the destructor would run on inconsistent state.
[23:23:25] <mitsuhiko> :(
[23:23:33] <aatch> mitsuhiko, not really. Rust needs to be able ensure the destructor is still safe.
[23:24:01] <engla> mitsuhiko: what is it you need to move out? You can change the type of that from T to Option<T> and "move" it out with .take()
[23:24:05] <aatch> mitsuhiko, you swap out the value. If you have the field as an Option you can swap in None
[23:24:20] <bjz> rusti: äº” + ä¸‰
[23:24:26] -rusti- pastebinned 8 lines of output: http://ix.io/7Bf
[23:24:33] <mitsuhiko> engla: i tried to move it out with mut_iter().to_owned_vec() from a vector
[23:24:54] <ecr> sigh. I really want `once` for stack closures
[23:24:57] <engla> that doesn't look like moving
[23:25:07] * bjz notes that rust doesn't add japanese numbers and is dissapoint
[23:25:08] <aatch> ecr, why?
[23:25:32] <Earnestly> bjz: one + two would fail too
[23:25:50] <bjz> rusti: IV + X
[23:25:56] <bjz> :P
[23:25:57] <mcpherrin> Earnestly: yeah we should have let one = 1; let two = 2; and so on and so forth in the prelude.
[23:25:57] -rusti- pastebinned 8 lines of output: http://ix.io/7Bg
[23:26:02] <olsonjeffery> acrichto: what was the outcome of the earlier talk about a libuv update? are you just going to cherrypick that patch w/o updating?
[23:26:04] <ecr> aatch: we use stack closures that run at most once ALL over the runtime and we need to move things into the closure very often. without `once` we have to use Cell and other hacks.
[23:26:06] <Earnestly> mcpherrin: Heh
[23:26:33] *** Quits: maik (maik___@moz-1318C3AE.dip0.t-ipconnect.de) (Ping timeout)
[23:26:35] <ecr> aatch: having `once` would make it *much* nicer
[23:26:56] <mcpherrin> bjz: were you the one talking about doing foo.zyxx style swizzling in rust?
[23:27:03] <bjz> mcpherrin: aye
[23:27:12] *** Quits: jmgrosen (jmgrosen@moz-BF80C818.sbcc.edu) (Quit: jmgrosen)
[23:27:13] <bjz> mcpherrin: would like that for lmath
[23:27:25] <mcpherrin> Is there any development on how that could/would work?
[23:27:28] <bjz> mcpherrin: I might not be the same dude though
[23:27:45] <bjz> mcpherrin: you'd probably want a macro or two
[23:27:57] <mcpherrin> I think I remember you talking about in lmath context.  Or maybe it was Luqman (who I know "in person")
[23:28:09] <bjz> mcpherrin: but according to pauls, concat_idents! is broken
[23:28:18] <bjz> dunno if that is still the case
[23:28:30] <bjz> mcpherrin: orly?
[23:28:53] <bjz> mcpherrin: he has indoctrinated you into the ways of Rust?
[23:28:56] <sp3d> ecr: GLib has 'once' closures too
[23:29:08] <sp3d> it'd be nice to have hack-free bindings for those
[23:29:10] <mcpherrin> bjz: heh, I think I was involved in rust before he was ;)
[23:29:12] <aatch> rusti: let concat_idents(a,b,c) = 1; abc
[23:29:15] -rusti- pastebinned 8 lines of output: http://ix.io/7Bh
[23:29:22] <mcpherrin> just .. in a low key way.
[23:29:24] <bjz> mcpherrin: the other way then? :P
[23:29:25] <aatch> rusti: let concat_idents!(a,b,c) = 1; abc
[23:29:26] -rusti- <anon>:5:26: 5:27 error: expected `;` but found `!`
[23:29:26] -rusti- <anon>:5          let concat_idents!(a,b,c) = 1; abc
[23:29:26] -rusti-                                    ^
[23:29:26] -rusti- application terminated with error code 101
[23:29:46] <aatch> rusti: let abc; concat_idents!(a,b,c) = 1; abc
[23:29:46] -rusti- <anon>:5:40: 5:41 error: unexpected token: `=`
[23:29:46] -rusti- <anon>:5          let abc; concat_idents!(a,b,c) = 1; abc
[23:29:46] -rusti-                                                  ^
[23:29:46] -rusti- application terminated with error code 101
[23:29:51] <mcpherrin> bjz: We've both interned at mozilla at various points ... That's the more likely indoctrinator
[23:30:01] <ecr> sp3d: not to mention all the higher order functions on Option, Cell, Result, etc. should take `once` closures.
[23:30:29] <bjz> mcpherrin: hehe
[23:30:41] <sp3d> time to picket to free once-fns from -Z :P
[23:30:59] <mitsuhiko> alright, why do i get that error? https://gist.github.com/mitsuhiko/6347961
[23:31:46] <cmr> mitsuhiko: looks like a bug to me
[23:32:06] <aatch> cmr, nah its not.
[23:32:11] <cmr> no?
[23:32:14] <aatch> Well, kinda. Bad error message
[23:32:17] <ecr> sp3d: I wish. It seems like everyone aside from the runtime folks are against it. I'd love to be able to just put an attribute #[allow_once_fns] and then frolic through the runtime dropping them everywhere.
[23:32:45] <aatch> you can't impl on a type alias.
[23:32:50] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[23:32:53] <cmr> ecr: I'm for it.
[23:33:03] *** Quits: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com) (Ping timeout)
[23:33:17] <aatch> I can't remember the reason why, pcwalton made the change though.
[23:33:31] <aatch> mitsuhiko, change the impl to be Foo<State[12]>
[23:33:58] <mitsuhiko> aatch: the problem with that is that the static methods do not show up on the aliased type
[23:34:00] <strcat> ecr: afaik the plan is to remove ~fn/@fn and it would be nice to overhaul stack closures so... perhaps it doesn't make sense to be adding more features
[23:34:06] <mitsuhiko> eg: you cannot do Foo1::new()
[23:34:12] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[23:34:19] <cmr> mitsuhiko: yes, typedefs don't get namespaces.
[23:34:21] <cmr> No way around that.
[23:34:43] <mitsuhiko> dammit. bjz wins
[23:34:43] <strcat> hm, why?
[23:34:54] <bjz> mitsuhiko: ?
[23:34:57] <cmr> I don't know why. I think it's weird.
[23:35:05] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[23:35:09] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[23:35:19] <mitsuhiko> bjz: i tried to hide the unlinked/linked differenciation from your shader program object
[23:35:25] <mitsuhiko> (for external callers)
[23:35:28] <cmr> It makes using extra::json *very* fragile.
[23:35:35] <bjz> mitsuhiko: yeah?
[23:35:42] <mitsuhiko> but it looks like what you have currently is pretty much the nicest that is possible
[23:35:47] <cmr> Because to create an Object, you need to create a HashMap or a TreeMap or whatever json feels like.
[23:36:02] <mitsuhiko> i tried two things: a) make the unlinked state a linker object with a drop, does not work, cannot move the shaders out
[23:36:17] <mitsuhiko> b) hide the state helpers (linked/unlinked) with typedefs, does not work either
[23:36:47] <bjz> mitsuhiko: one way would be to just do struct Program(UnlinkedProgram), but that's sort of distasteful semantically
[23:37:01] <bjz> aye
[23:37:18] <mitsuhiko> i like the state pattern in general
[23:37:26] <mitsuhiko> but it's very leaky
[23:37:32] <lkuper> posted: http://composition.al/blog/2013/08/26/default-methods-and-negative-diffstats
[23:37:47] <bjz> mitsuhiko: I used to do the stuff in the gist with lmath, but it was forbidden
[23:38:12] <mitsuhiko> i could swear that worked at one point though
[23:38:28] <h3r3tic> is it possible to add an object file ( from a C source ) to a Rust crate?
[23:38:34] <bjz> mitsuhiko: I believe pcwalton is going to add the ability to call static methods on aliases
[23:38:43] <mitsuhiko> lkuper: please kill the .advance :)
[23:38:45] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[23:38:58] <sp3d> h3r3tic: you might be able to do it by specifying linker options
[23:39:12] <h3r3tic> yeah, wondering where I'd put them :)
[23:39:37] <lkuper> mitsuhiko: yeah, I tried to explain in the post that it was a temporary wart
[23:39:39] <bjz> lkuper: please please please get rid of advance and use for i in foo.iter()
[23:40:37] <bjz> lkuper: advance was a verbose monstrosity designed for the sole reason to spur the move to the new syntax
[23:40:51] <lkuper> bjz: the reason I had to use advance is because the whole point of the post is that the code behaves differently between 0.7 and head-of-tree
[23:41:13] <bjz> lkuper: ahh sorry
[23:41:24] <bjz> lkuper: *facepalm*
[23:41:26] <lkuper> bjz: I try to explain this in the post.  I hate the advance thing, too
[23:41:56] *** Quits: eatkinson (eatkinson@moz-DACC1A92.dsl.bell.ca) (Quit: eatkinson)
[23:41:58] <bjz> lkuper: I must admit I just scrolled to the for loop, will read closer now
[23:42:36] <bjz> lkuper: it annoys me that some of these blog posters are on 0.7, and don't communicate with the community
[23:43:01] <SiegeLord> Maybe somebody should make nightly installers ;)
[23:43:02] <lkuper> bjz: ah!  so you immediately went and looked to see what version of `for` I was using -- I see.
[23:43:04] <aatch> bjz, so you get the annoying "Rust sucks because of a thing that was fixed"
[23:43:18] <bjz> aatch: indeed
[23:43:30] <cmr> SiegeLord: And we have a volunteer!
[23:43:38] <tjc> SiegeLord: there's a quite old issue open on it :-) https://github.com/mozilla/rust/issues/3721
[23:43:40] <bjz> aatch: "rust sucks because it has a verbose for loop"
[23:43:40] <lkuper> bjz: the thing is, the point of my post is to be like "here's a thing that used to not work and now works!" and so I needed to pick a reasonable point for "used to", and 0.7 was the obvious one to pick
[23:43:41] <SiegeLord> I'm not the one complaining 8)
[23:43:49] * strcat already has nightly builds :P
[23:43:59] <bjz> lkuper: yeah for sure, sorry to jump to conclusions
[23:44:02] <lkuper> :)
[23:44:35] <bjz> lkuper: could you maybe show off the new syntax?
[23:44:43] <SiegeLord> I'd have maybe phrased it in terms of "here's how it is without default methods and here's how it is with them"
[23:44:43] <bjz> lkuper: maybe as an appendix?
[23:44:55] <lkuper> well, I do show `for vec_elem in vec.iter()`
[23:45:01] <aatch> My favorite though is the "Rust sucks because it isn't <insert favorite language here>" style comments. Basically complaining that rust doesn't have features from Java, C++, Go, Python, Ruby, COBOL, BrainFuck, LOLCODE
[23:45:08] *** Joins: ryeguy (ryeguy@moz-3CE3DF43.lightspeed.livnmi.sbcglobal.net)
[23:45:11] <lkuper> right under the part you were complaining about?
[23:45:39] <lkuper> bjz: I don't show it every single time
[23:45:42] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[23:45:56] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: jorendorff)
[23:46:01] <aatch> Especially when the features fly completely in the face of some fairly entrenched Rust principles.
[23:46:02] <myname> aatch: don't forget APL
[23:46:11] <bjz> lkuper: oh sorry, still reading -_-
[23:46:44] <cmr> bjz: you should really wait to comment until /after/ you read it.
[23:46:58] <bjz> aatch: but Rust is like perl because it hase 7 kinds of pointers
[23:47:15] <Eridius> rusti: trait Foo { fn foo(&self) -> bool { self.bar() } fn bar(&self) -> bool { self.foo() } } impl Foo for int {} 3i.foo()
[23:47:15] <bjz> cmr: I am a little tired, that is my excuse
[23:47:16] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[23:47:20] <Eridius> whoa
[23:47:27] <cmr> bjz: I do not accept it.
[23:47:39] <aatch> myname, actually, out of all the languages we could incorporate features from, APL is one of the ones we could.
[23:47:46] <bjz> cmr: at least I didn't post to reddit
[23:47:50] <cmr> bjz: very true!
[23:47:54] <ryeguy> hey guys - is it possible to add methods to tuple structs? i can't seem to get them to work
[23:47:56] <strcat> Eridius: there is no protection against stack overflow right now
[23:48:10] * bjz is ashamed as his "angry on the internet dude" behaviour
[23:48:11] <tjc> ryeguy: Can you paste your code?
[23:48:15] <Eridius> strcat: I'm mildly surprised that it doesn't detect a cycle in the default methods
[23:48:20] <ryeguy> sure one second
[23:48:30] <cmr> rusti: struct Foo(int); impl Foo { fn foo(&self) -> int { *self } } let x = Foo(50); x.foo()
[23:48:31] -rusti- <anon>:5:60: 5:67 error: mismatched types: expected `int` but found `main::Foo` (expected int but found struct main::Foo)
[23:48:32] -rusti- <anon>:5          struct Foo(int); impl Foo { fn foo(&self) -> int { *self } } let x = Foo(50); x.foo()
[23:48:32] -rusti-                                                                      ^~~~~~~
[23:48:32] -rusti- error: aborting due to previous error
[23:48:32] <tjc> Eridius: that would fall into the category of "programmer error" :-)
[23:48:33] -rusti- application terminated with error code 101
[23:48:35] * bjz apologises profusely to lkuper
[23:48:40] <cmr> oops, needs an extra dereference.
[23:48:41] <Eridius> tjc: and the compiler's supposed to catch it! :P
[23:48:44] <cmr> ryeguy: but it does work fine
[23:48:58] <tjc> Eridius: I don't think GHC checks it, to pick another example of a language with type classes and default methods
[23:49:07] <tikue> rusti: let (ref mut port, chan) = ::std::comm::stream();
[23:49:08] -rusti- <anon>:5:13: 5:57 error: cannot determine a type for this local variable: unconstrained type
[23:49:08] -rusti- <anon>:5          let (ref mut port, chan) = ::std::comm::stream();
[23:49:08] -rusti-                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[23:49:08] -rusti- error: aborting due to previous error
[23:49:08] -rusti- application terminated with error code 101
[23:49:10] <Eridius> it doesn't? I assumed it does
[23:49:13] <tjc> I think in general it would be undecidable, though you could certainly catch some cases easily
[23:49:16] <tjc> nope
[23:49:19] <tikue> rusti: let (ref mut port, chan) = ::std::comm::stream(); chan.send(1u); port.recv()
[23:49:23] -rusti- pastebinned 8 lines of output: http://ix.io/7Bi
[23:49:31] <tjc> I mean, I'm pretty sure it doesn't. someone can write a Haskell program that proves me wrong if they wantâ€¦ or try to
[23:49:43] <tikue> rusti: let (ref mut port, ref chan) = ::std::comm::stream(); chan.send(1u); port.recv()
[23:49:45] -rusti- 1
[23:49:50] <ecr> GHC will only tell you about an infinite loop like that when you run
[23:49:58] <ecr> it'll go <<loop>> and be sad
[23:50:00] <tjc> Right
[23:50:04] <tjc> and that's not specific to default methods
[23:50:18] <tjc> it's something that's done for lots of cases where you try to enter a thunk while evaluating the same thunk
[23:50:19] <ryeguy> tjc: nevermind, I forgot &self :-/
[23:50:24] <tjc> ryeguy: Ah ok, cool
[23:50:26] <tikue> rusti: let (ref mut port, ref chan) = ::std::comm::stream(); let shchan = ::std::comm::SharedChan::new(*chan);
[23:50:26] <ecr> Yeah, I was just pointing out it requires you to RUN the program
[23:50:26] -rusti- <anon>:5:13: 5:61 error: cannot determine a type for this local variable: unconstrained type
[23:50:27] -rusti- <anon>:5          let (ref mut port, ref chan) = ::std::comm::stream(); let shchan = ::std::comm::SharedChan::new(*chan);
[23:50:27] -rusti-                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[23:50:27] -rusti- error: aborting due to previous error
[23:50:27] -rusti- application terminated with error code 101
[23:50:29] <tjc> right
[23:50:35] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[23:50:43] <tikue> rusti: let (ref mut port, ref chan) = ::std::comm::stream(); let shchan = ::std::comm::SharedChan::new(*chan); shchan.send(1u); port.recv()
[23:50:48] -rusti- pastebinned 5 lines of output: http://ix.io/7Bj
[23:50:59] <bjz> lkuper: I think it might be partly that the syntax highlighters haven't caught up to Rust yet
[23:51:00] <SiegeLord> Can you combine multiple attributes into one, or do you just have to list them
[23:51:04] <cmr> SiegeLord: list
[23:51:05] <SiegeLord> one after the other
[23:51:24] <Eridius> tjc: I'm pretty sure it's not undecidable, since you don't have to detect infinite loops in general. You just have to collect all the methods defined in the same trait that's called from each default impl
[23:51:30] <Eridius> and then in a given impl you can use that to detect a cycle
[23:51:43] <tikue> rusti: let (ref mut port, ref chan) = ::std::comm::stream(); let shchan = ::std::comm::SharedChan::new(chan); shchan.send(1u); port.recv()
[23:51:43] <strcat> you have to walk the calls
[23:51:45] <strcat> it's a graph
[23:51:46] -rusti- pastebinned 9 lines of output: http://ix.io/7Bk
[23:51:46] <tjc> Eridius: but in general, you could call a method in a different trait that calls back to methods in your trait
[23:51:52] <strcat> you don't have to call them directly
[23:51:54] <Eridius> strcat: right, but you only have to look at methods defined in that trait
[23:51:56] <bjz> lkuper: nice article, I liked it once I actually took the time to read it
[23:52:05] <strcat> Eridius: no
[23:52:09] <Eridius> tjc: can traits reference each other like that?
[23:52:13] <SiegeLord> Hmm... I wonder what should happen if you do #[fixed_stack_segment] on a default method but the omit it in the override?
[23:52:30] <strcat> you have to do a BFS/DFS of all their calls
[23:52:40] <tjc> Eridius: sure, traits at the top-level are mutually recursive with each other
[23:52:43] <tjc> I think that should be true, anyway
[23:52:44] <strcat> to see if you cycle back to itself
[23:52:59] <Eridius> rusti: trait Foo: Bar { fn foo(&self) { self.bar() } } trait Bar: Foo { fn bar(&self) { self.foo() } } impl Foo on int {} impl Bar on int {} 3i.foo()
[23:53:02] -rusti- pastebinned 4 lines of output: http://ix.io/7Bl
[23:53:14] <Eridius> rusti: trait Foo: Bar { fn foo(&self) { self.bar() } } trait Bar: Foo { fn bar(&self) { self.foo() } } impl Foo for int {} impl Bar for int {} 3i.foo()
[23:53:14] -rusti- Segmentation fault
[23:53:14] -rusti- application terminated with error code 139
[23:53:18] <tjc> haha
[23:53:20] <Eridius> hah, ok. I assumed you couldn't do that
[23:53:49] <Eridius> well, I'd be happy only detecting cycles within a single trait anyway, which means you only have to look at calls to methods within that trait
[23:54:04] <Eridius> I guess you could trigger the same error with some external func that's parameterized with your trait
[23:54:06] <tjc> that would be do-able
[23:54:11] <tjc> I mean, there's an argument on either side
[23:54:23] <tjc> the counter-argument is that it's confusing for the user if some of these errors are detected but not others
[23:54:28] <tjc> IDK, it would have to be discussed
[23:54:42] <aatch> SiegeLord, I think that the overridden method would not have the fixed_stack_segment attribute.
[23:54:58] <tikue> rusti: let mut port; port = 1u;
[23:54:59] <aatch> which is probably the right way.
[23:55:00] -rusti- pastebinned 7 lines of output: http://ix.io/7Bm
[23:55:22] <SiegeLord> aatch: Yeah, I guess that makes sense... the attribute should be per-function-instance
[23:55:43] <tikue> rusti: let mut port; let chan; (port, chan) = ::std::comm::stream(); chan.send(1u); port.recv()
[23:55:50] -rusti- pastebinned 8 lines of output: http://ix.io/7Bn
[23:56:09] <tikue> why doesn't that work
[23:56:19] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[23:56:20] <cmr> tikue: because the lhs of an assignment isn't a pattern
[23:56:24] <cmr> only the lhs of a `let`
[23:56:34] <tikue> ah true
[23:56:38] <tikue> is there a way to get a mutable port
[23:56:46] <tikue> so that it can be reassigned to a new port of its type
[23:56:52] <cmr> let (port, chan) = ...; let mut port = port;
[23:56:57] <tikue> ah thanks!
[23:57:09] <strcat> we should allow mut in patterns, but we don't ;p
[23:57:15] <aatch> tikue, not the prettiest code, but I think it's a temporary limitation.
[23:57:42] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[23:58:19] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[23:58:50] *** Quits: mschifer (Adium@moz-BBE3ABD.mv.mozilla.com) (Quit: Leaving.)
[23:58:51] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[23:59:38] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
