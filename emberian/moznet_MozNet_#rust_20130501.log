[00:00:09] <graydon> strcat: timer units?
[00:00:21] <strcat> http://www.freedesktop.org/software/systemd/man/systemd.timer.html these things
[00:00:22] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[00:00:22] <ghrust> 01[13rust01] 15brson merged 06incoming into 06snap-stage3: 02http://git.io/0yeswA
[00:00:22] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[00:00:32] <strcat> I guess upstart will have them too, if it doesn't already (they copy the fd.o APIs)
[00:00:41] <strcat> s/copy/implement/
[00:01:16] <strcat> one day at least, I don't think upstart has given up their weird shell-ish language for services yet
[00:02:00] <jld> There was this blog post I saw a little while back, about how FreeDesktop and related projects are becoming its own OS with a not-so-Unix-like philosophy.  I didn't entirely agree with it, but I think it wasn't entirely wrong either....
[00:02:23] <strcat> jld: well, fd.o is basically just hosting
[00:02:34] <strcat> you can ask to have your project hosted there
[00:02:47] <strcat> not really coordinated
[00:03:20] <strcat> it has the semblance of being some standards body but they really just exchange a few comments on bugzilla to decide if a project should be accepted ;p
[00:03:41] <strcat> https://bugs.freedesktop.org/show_bug.cgi?id=61064 like that
[00:05:03] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[00:05:03] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14bf94985 to 149329bd6: 02http://git.io/N3iJvQ
[00:05:03] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[00:05:07] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[00:05:07] <ghrust> 01[13rust01] 15bors pushed 41 new commits to 06auto: 02http://git.io/ABYEgg
[00:05:07] <ghrust> 13rust/06auto 14e47ee77 15Brian Anderson: wip
[00:05:07] <ghrust> 13rust/06auto 146a5c4f6 15Brian Anderson: core::rt: Just some poking at the I/O docs
[00:05:07] <ghrust> 13rust/06auto 141f97e6d 15Brian Anderson: rt: Add rust_dbg_next_port for generating test port numbers
[00:05:08] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[00:05:24] <strcat> jld: the video drivers, x11, wayland, etc. have all become pretty linux-centric though
[00:05:49] <strcat> aren't many people contributing who use freebsd, etc. so the projects are slowly losing support
[00:06:09] <strcat> I think they recently got intel video drivers again though.
[00:06:46] <strcat> rust has the same problem with windows ;p
[00:07:16] <graydon> hey now
[00:07:59] <graydon> we're not substantially worse -- arguably a fair bit better -- on windows now than we ever have been
[00:08:08] <strcat> well bors is quite helpful in regards to that
[00:08:23] <strcat> not many open-source projects actually use proper unit testing, let alone CI
[00:08:54] <graydon> not just. we have abstract path handling that likes windows somewhat. we map our strings down to utf16 for win32 calls. we're doing our evented IO on IOCP properly..
[00:09:05] <graydon> you can't ship browsers and just "leave out" windows
[00:09:18] <graydon> that's leaving out 90%+ of the market
[00:09:37] <strcat> graydon: I know, I mean in regards to support breaking and no one noticing (which is less likely now, even without bors)
[00:09:45] <strcat> that's what happens with the x11-related projects
[00:09:50] *** Joins: josh (josh@moz-6FB23C25.hvc.res.rr.com)
[00:10:14] <strcat> someone ports a driver to freebsd, 3 months later it breaks and no one notices
[00:10:20] <strcat> a year later someone ports it again
[00:10:39] <graydon> do they have an integration testing thing? that's really the only way to keep stuff working.
[00:10:46] <strcat> graydon: no, mostly they don't :(
[00:10:51] <graydon> :(
[00:11:19] <strcat> systemd has nice unit testing but none of the x11 stuff does
[00:11:23] <strcat> they have opengl tests at least
[00:11:56] <jld> ...and now I know why the HURD can't deal with segmented stacks (as brought up in the context of Go on the GCC list).
[00:12:01] <strcat> graydon: not even the linux kernel has any sort of CI
[00:12:13] <strcat> stuff breaks and people report it in the release candidates, ideally
[00:12:19] <brson> jld: why?
[00:12:51] <jld> It accesses thread-specific data by masking the stack pointer, so changing stacks breaks the world.
[00:13:14] <strcat> graydon: I use a rolling release distro so I have a pretty good experience with which projects do proper regression testing ;p
[00:13:14] *** Joins: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net)
[00:13:25] <jld> NetBSD had the same problem (and may still on some ports?) -- and malloc would use thread-specifics if you linked libpthread, even if you didn't use it.
[00:13:46] <graydon> strcat: heh. and/or don't change much.
[00:13:57] <strcat> graydon: yeah
[00:14:45] <strcat> we don't put the 3.x.0 or 3.x.1 kernel releases in the stable repos anymore
[00:14:49] <jld> (The extra bonus fun there is that the library for using NetBSD's equivalent of FUSE did its own setcontext coroutine thing and didn't have a lower-level interface or other way to opt out.  So try to use that and *boom*.)
[00:14:51] <strcat> no one really tests it.
[00:15:01] <strcat> so it waits for .2
[00:15:09] <strcat> gnome/kde have to be the same way - essentially no testing
[00:15:17] <strcat> they still break even if you wait for .2 or .3
[00:15:35] <graydon> eek
[00:15:48] *** Quits: int3_ (int3_@moz-359A42F6.subnet-248.amherst.edu) (Client exited)
[00:16:06] <strcat> anyway I use a window manager with nice unit testing + CI :p
[00:16:15] <graydon> I'm glad we built unit testing, regression testing, CI and set up bors before we "got to scale" and decided it would be impractical :)
[00:16:54] <graydon> (we never would have survived a tenth of the changes that have happened since without)
[00:17:48] <jld> I'm kind of impressed at how not blatantly broken the Linux kernel manages to be, all things considered.  (Though I might feel otherwise if I still used it on an uncommon platform/configuration.)
[00:18:31] <jld> perf(1), on the other hand, I've repeatedly crashed by giving it reasonable-seeming combinations of options.
[00:18:36] <graydon> given the churn rate, yeah
[00:18:49] <graydon> watching their commit diffs is a lesson in panic suppression
[00:18:59] <graydon> makes our changes look completely harmless
[00:19:09] <strcat> http://code.stapelberg.de/git/go-buildbot-announce/ heh, didn't realize that announce bot was Go
[00:19:48] <strcat> not surprising since I think he used to work for google :)
[00:20:15] <graydon> which bot is this?
[00:20:28] <strcat> i3-wm uses it to announce buildbot stuff to irc
[00:20:37] <strcat> and I lurk in that channel
[00:20:41] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ChatZilla 0.9.90-rdmsoft [XULRunner 18.0.2/20130201065344])
[00:20:54] * jld closes a bunch of browser tabs and returns to:
[00:21:04] <graydon> ah
[00:21:30] <jld> http://johnbender.us/2013/04/30/reasoning-about-the-heap-in-rust/ , which I think is slightly wrong at one point: `// { a -> 1 /\ b -> 1 }` after `b` has been deinitialized.
[00:21:42] <strcat> graydon: after a commit happens it builds debian/ubuntu packages and runs clang-analyze
[00:21:55] <strcat> would be cool if bors could make packages for the tip of incoming
[00:22:28] <graydon> strcat: that's for buildbot to do, not bors. bors _just_ talks to github (moves branches, closes bugs, makes comments)
[00:22:38] <graydon> but yeah. we'd like nightlies and packages.
[00:22:43] <strcat> graydon: right :), but I think of it as being bors :P
[00:23:16] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[00:23:28] <strcat> unless we come up with names for the builders
[00:25:15] <graydon> well, all builders _should_ be named "doozer" ( https://www.google.ca/images?q=doozer )
[00:25:29] <graydon> but that name has been re-assigned too many times in free software
[00:25:44] <graydon> (current google juice points to a go implementation of paxos / zookeeper)
[00:26:10] <strcat> well my cron job succeeded at making the x86_64 package
[00:26:15] <strcat> \o/
[00:27:06] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[00:27:07] <erickt> nmatsakis: any luck with your method side table idea?
[00:28:43] <strcat> somehow it ends up owned by the nobody user... silly package chroots
[00:29:34] <strcat> EXetoC: http://ix.io/5qm if you want to try the repo (package is rust-incoming-git)
[00:30:06] <strcat> with one of those wonderful git describe versions
[00:30:39] *** Quits: jclements (jclements@2557E599.66715431.D25A875A.IP) (Quit: jclements)
[00:33:55] *** Quits: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net) (Quit: dherman)
[00:35:25] <nmatsakis> erickt: haven't done anything in that direction, I worked around the problem I was facing at the moment, but I'd like to pursue it at some point
[00:36:06] *** Quits: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[00:36:09] *** Quits: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se) (Connection reset by peer)
[00:36:23] <strcat> anyway now I can make rusti use a daily incoming build without having to do it myself
[00:36:27] <graydon> down to 18 unassigned bugs in 0.7. enough for today.
[00:36:30] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[00:36:35] <graydon> see y'all tomorrow
[00:36:39] <strcat> cya
[00:36:47] *** Quits: graydon (graydon@3853DDD.39EEDBB3.D758B1AA.IP) (Quit: Leaving.)
[00:37:31] *** Joins: int3_ (int3_@moz-359A42F6.subnet-248.amherst.edu)
[00:41:05] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[00:41:05] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/E667aA
[00:41:05] <ghrust> 13rust/06auto 14edc11a9 15Tim Chevalier: rustc: Suppress derived pattern-match-checking errors...
[00:41:05] <ghrust> 13rust/06auto 14d8024e2 15Tim Chevalier: rustc: Change At to Managed and Uniq to Owned
[00:41:06] <ghrust> 13rust/06auto 14849f814 15Tim Chevalier: rustc / test: Fix error message
[00:41:08] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[00:42:00] <erickt> nmatsakis: okay, let me know if you start down that road soon.
[00:42:07] *** Joins: rgrinberg (rgrinberg@AE999E95.52DE4C60.258AD6F5.IP)
[00:42:27] <nmatsakis> erickt: ok. right now focused on borrow checker stuff, though I expect to land that in next day or so
[00:43:50] *** Quits: rgrinberg (rgrinberg@AE999E95.52DE4C60.258AD6F5.IP) (Ping timeout)
[00:45:54] <pcwalton> nmatsakis: tjc: do you know off the top of your head why "let val = vals[col]" might be out of bounds in compile_submatch?
[00:45:59] <pcwalton> right after pick_col
[00:46:03] <pcwalton> I don't really know what that method does
[00:46:25] <nmatsakis> pcwalton: off top of my head? no, let me look briefly at it though
[00:46:57] <nmatsakis> pcwalton: it's surprising that it would be invoked for a let statement though
[00:47:08] <pcwalton> it's not for a let statement, it's for a match.
[00:47:09] <nmatsakis> pcwalton: are you *sure* you have the right code? I think compile_submatch is only used for matches
[00:47:16] <pcwalton> it's definitely for a match
[00:47:21] <nmatsakis> oh oh
[00:47:27] <pcwalton> I mean that the out of bounds exception happens on that line
[00:47:29] <pcwalton> when compiling a match
[00:47:31] <nmatsakis> yes I see
[00:47:36] <nmatsakis> do you know which match etc?
[00:47:40] <nmatsakis> that'd be helpful
[00:47:41] <pcwalton> (Result, if you're curious)
[00:47:43] <pcwalton> recompiling Servo
[00:47:47] <pcwalton> give me a bit
[00:47:51] <pcwalton> it happens all over the place though
[00:47:56] <nmatsakis> ok
[00:48:18] <tjc> pcwalton: let me look at that code againâ€¦ it's been a while
[00:49:12] *** Joins: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP)
[00:49:21] <jgilbert> join #emscripten
[00:49:26] <jgilbert> hah, my bad
[00:49:28] <pcwalton> failed
[00:49:36] <jgilbert> shaaame :(
[00:49:58] <nmatsakis> pcwalton: hmm. hard to see why that should be. I'd say that the list of matches `m` is empty, but there is an assert that it's not..
[00:50:15] <nmatsakis> oh, wait
[00:50:32] <tjc> it seems like that would happen if the scrutinee has a different number of fields from one of the patterns
[00:50:34] <nmatsakis> pcwalton: can you run with RUST_LOG=rustc::middle::trans::_match?
[00:50:36] *** Quits: engla (engla@moz-BFD53D48.selucle.dyn.perspektivbredband.net) (Ping timeout)
[00:50:38] <nmatsakis> or has that been done?
[00:50:42] <nmatsakis> I sort of recall seeing that on the bug
[00:50:43] <tjc> but it would be good to see the code that's causing the ICE
[00:51:10] <nmatsakis> #6117, right?
[00:51:43] <tjc> I thought #6117 was fixed
[00:52:16] <tjc> at least, #6134 was merged, and #6134 was supposed to fix #6117
[00:52:32] * nmatsakis reads logs
[00:53:06] <nmatsakis> pcwalton: is there a guard? 
[00:54:38] <pcwalton> not sure
[00:54:45] <pcwalton> still working on logging.
[00:55:05] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[00:55:40] *** Joins: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP)
[00:55:40] *** Quits: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP) (Z:lined (Open Proxy found on your host. Please visit www.blitzed.org/proxy?ip=115.68.131.49 for more information.))
[00:56:59] <nmatsakis> based on the logs, I think it is this expression match *res { Ok(ref t) => f(t), Err(_) => () })
[00:57:00] *** Joins: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net)
[00:57:54] <nmatsakis> pcwalton: near as I can tell from reading the code, it is somehow getting confused about how many arguments Ok() has
[00:58:07] <nmatsakis> and thinking that Ok() has 0 arguments
[00:58:22] <strcat> ha, I segfaulted fcron
[00:58:38] <tjc> nmatsakis: isn't it the other way?
[00:58:48] <tjc> it's indexed into vals, which comes from the structure of *res
[00:58:50] * strcat wonders what rustc did to break cron :(
[00:59:01] <tjc> if I understand the code, and maybe I don't, since it's pretty undocumented
[00:59:12] <nmatsakis> tjc: vals is the empty list
[00:59:35] <tjc> nmatsakis: Rightâ€¦ so it seems like if vals is the empty list, some other code thought that *res is something with no fields
[01:00:01] <nmatsakis> tjc: yes, I see what you're saying, that's what I meant basically
[01:00:17] <tjc> nmatsakis: oh okâ€¦ I thought you were saying the code thought the pattern had 0 fields
[01:00:29] <nmatsakis> but actually I was confused
[01:02:08] <tjc> either brson or strcat: r? https://github.com/mozilla/rust/pull/6144
[01:04:31] <indutny> so I've a question: is there any way to destruct [u8]?
[01:04:48] <indutny> or better use imperative style loops, when working with it?
[01:04:51] <strcat> indutny: do you mean ~[u8]? [u8] isn't actually a type
[01:04:57] <indutny> yep
[01:04:59] *** Joins: Erik (Erik-S@moz-252DBA2.hsd1.co.comcast.net)
[01:05:06] <indutny> anyway, I'm implementing parser
[01:05:12] <indutny> for binary data
[01:05:23] <indutny> and wonder if there's any functional way of doing such stuff
[01:05:45] <strcat> indutny: oh you mean destructure? I interpreted that as destroy
[01:05:59] <strcat> indutny: there are [foo, ..rest] patterns
[01:06:02] <indutny> yes, please excuse me my engrish :)
[01:06:04] <strcat> that you can use in match
[01:06:10] <indutny> oh, kewl
[01:06:15] <strcat> [foo, bar, ..rest, baz] might work now
[01:06:16] <indutny> can I do [a,b,c, ...rest]?
[01:06:17] <indutny> ok
[01:06:19] <indutny> great
[01:06:21] <strcat> indutny: I think so :)
[01:06:26] <indutny> and tail-calls are present too, right?
[01:06:27] <indutny> :)
[01:06:35] <strcat> indutny: not really
[01:06:37] <indutny> oh
[01:06:48] <indutny> that'd be a problem
[01:07:03] <strcat> LLVM will optimize functions with the fastcc calling convention with TCO, if the tail call is a "sibling" (same function signature)
[01:07:20] <strcat> but rust doesn't use fastcc as the ABI
[01:07:28] <strcat> so LLVM only uses it on internal functions
[01:07:36] <strcat> and destructors make most things not tail calls
[01:07:46] <indutny> gosh
[01:07:56] <strcat> you *can* get LLVM to guarantee TCO but it involves making all calls a tiny bit slower
[01:07:59] <indutny> ok, also [a, â€¦b] isn't documented
[01:08:06] <strcat> haskell/erlang have their own calling convention for LLVM
[01:08:06] <indutny> just FYI
[01:08:08] <tjc> 'night all
[01:08:09] *** Quits: tjc (tjc@A5087023.2354C43D.D8E68FF6.IP) (Quit: Places to go, people to annoy)
[01:08:13] <nmatsakis> pcwalton: is this easy to reproduce?
[01:08:17] <indutny> strcat: nice
[01:08:21] <pcwalton> nmatsakis: yes, compile servo :)
[01:08:38] <indutny> is erlang using llvm now?
[01:08:49] <indutny> (offtopic)
[01:09:07] <Jesse> indutny: see https://mail.mozilla.org/pipermail/rust-dev/2013-April/003557.html if you're interested in details of why rust has few guarantees about tail-calls
[01:10:02] <indutny> sorry, time to sleep :)
[01:10:05] <indutny> thank you for answering
[01:10:17] <strcat> indutny: HiPE does
[01:10:27] <indutny> is it like as shitty as it was before LLVM?
[01:10:31] <indutny> but just with different backend
[01:10:47] <strcat> it's just a different backend to make it not slow ;p
[01:10:55] <strcat> not as slow, at least
[01:11:04] <indutny> haha
[01:11:06] <indutny> ah, ok
[01:11:15] <indutny> so my efforts on creating jit compiler might be worth it
[01:11:15] <indutny> ok
[01:11:18] <indutny> time to sleep
[01:11:18] <indutny> ttyl
[01:11:24] * indutny &
[01:12:05] <nmatsakis> pcwalton: can you apply this patch and re-run with RUST_LOG=rustc::middle::trans::_match https://gist.github.com/nikomatsakis/3c457e5d4f589175ca42
[01:12:52] <pcwalton> ohhh I wonder if it's adt-related!
[01:13:21] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[01:14:23] *** Joins: Thad (chatzilla@moz-C35F90AE.tx.res.rr.com)
[01:14:34] <nmatsakis> plausibly.
[01:15:13] <nmatsakis> pcwalton: the type in question is Result<@T, ()>
[01:15:18] <nmatsakis> I wonder if this triggers the null pointer case
[01:15:18] <pcwalton> nmatsakis: yes
[01:15:22] <nmatsakis> jld: ping
[01:15:22] <pcwalton> was thinking that
[01:16:29] <strcat> nmatsakis: there was just a fix related to that in a pull
[01:17:00] <strcat> https://github.com/mozilla/rust/pull/6134
[01:17:58] <nmatsakis> pcwalton: ^
[01:18:01] <jld> nmatsakis: pong
[01:18:03] <nmatsakis> that looks like it very well might be it
[01:18:13] <nmatsakis> jld: we're chasing down a bug, but it looks like you may have already fixed it
[01:18:28] <nmatsakis> jld: the problem being that Result<@T, ()> was getting array-out-of-bounds errors
[01:18:35] <nmatsakis> when compile_submatch
[01:18:39] <nmatsakis> because the vals array was empty
[01:18:39] <jld> nmatsakis: Yes, that sounds like #6117.
[01:18:52] <nmatsakis> oh.
[01:18:52] <nmatsakis> yes.
[01:18:55] <nmatsakis> indeed it is #6117 :)
[01:19:08] <nmatsakis> if only I'd read all the comments :)
[01:19:12] <nmatsakis> instead of reading the log myself 
[01:19:23] *** Joins: kanak (user@moz-891EA4F4.c3-0.wtr-ubr1.sbo-wtr.ma.cable.rcn.com)
[01:19:25] * nmatsakis blames pcwalton ;)
[01:19:27] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[01:20:05] <kanak> Hi, what is the equivalent of -Wall for rustc? 
[01:20:11] <jld> nmatsakis: Not to be confused with the llvm submodle reversion thing, which I discovered by accident while looking into #6117.
[01:20:45] * nmatsakis mildly pleased that he still kind of remembers how _match.rs works
[01:20:49] * nmatsakis also mildly horrified
[01:20:54] <jld> nmatsakis: As I was telling seth, who also asked me about #6117, it was an interesting morning for Rust development.
[01:22:03] *** Quits: thou (thou@moz-1C1CA9F7.fasttrackcomm.net) (Input/output error)
[01:22:55] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[01:23:20] *** Joins: snowmantw (Mibbit@moz-C707A5F2.dynamic.hinet.net)
[01:23:23] <Thad> brson: so should I be building LLVM for Cygwin ? or let the Rust build system do that ?  What's your interpretation ?
[01:23:42] <EXetoC> kanak: I'm not sure there's exactly that, but try rustc -W help
[01:23:56] <kanak> EXetoC: thank you.
[01:24:22] <seth> jld: heh, my memory failed me; i'm not the reporter on that bug. i'm sfowler on github
[01:25:16] <seth> jld: i see now that github doesn't email about issue references, which explains why i didn't see it was fixed from reading my email =)
[01:25:25] <brson> Thad: let rust build llvm
[01:25:40] <Thad> brson: ok, will do.
[01:30:22] <aatch> Can you access extern variables from inside rust?
[01:32:53] <pcwalton> aatch: you can put constants in extern { ... } blocks
[01:33:04] <aatch> but they aren't constants
[01:33:15] <pcwalton> you can transmute them to be mutable and I think it will work
[01:33:16] <pcwalton> evil hack
[01:33:21] <pcwalton> adding real globals is on my todo
[01:33:33] <aatch> So they get resolved properly?
[01:33:39] *** Quits: vosen_ (vosen@moz-266BA656.icpnet.pl) (Quit: Leaving)
[01:34:14] <pcwalton> yeah
[01:34:16] <pcwalton> I think so anyway.
[01:34:29] <aatch> Cool, that makes getting timezone information easier
[01:35:04] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[01:35:04] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/E667aA
[01:35:04] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[01:36:45] *** Joins: steven_is_false (quassel@moz-9001998F.bchsia.telus.net)
[01:38:11] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[01:38:11] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1zm89A
[01:38:11] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[01:38:14] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[01:38:14] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/5h_Wfw
[01:38:14] <ghrust> 13rust/06auto 1400ede34 15James Miller: Add `--linker` option to pass flags to the linker
[01:38:14] <ghrust> 13rust/06auto 14e75203c 15James Miller: Adds '--print-link-args' that outputs linker arguments that would be used
[01:38:14] <ghrust> 13rust/06auto 142deefbe 15James Miller: Change flags to -Z print-link-args and --link-args
[01:38:16] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[01:40:54] <Thad> brson: and should build be based against daily master or incoming for now ?
[01:41:31] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[01:42:05] *** Quits: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net) (Quit: ["Textual IRC Client: www.textualapp.com"])
[01:42:27] <brson> Thad: incoming
[01:42:38] <Thad> brson: ok
[01:43:11] *** Joins: Benvie_ (brandon@5FD20F9A.53D07D95.EFF8B7BF.IP)
[01:46:45] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[01:49:30] *** Quits: steven_is_false (quassel@moz-9001998F.bchsia.telus.net) (Ping timeout)
[01:54:44] *** Quits: lmandel (lmandel@2557E599.66715431.D25A875A.IP) (Quit: lmandel)
[01:56:27] *** Quits: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP) (Quit: pcwalton)
[01:57:16] <Thad> brson: ugh... it's even worse now it seems.... any points as to where things might be wrong ?  https://gist.github.com/thadguidry/5493287
[01:58:14] *** Quits: int3_ (int3_@moz-359A42F6.subnet-248.amherst.edu) (Client exited)
[02:00:02] <doomlord> pcwalton - how much do you know about the existing Android support - for iOS myintention is to just make source I can link & call from an objC app... but how does the android stuff work?
[02:00:16] <doomlord> ^or anyone else here
[02:02:06] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[02:04:30] *** Quits: igl (igl@moz-4977F47.adsl.alicedsl.de) (Ping timeout)
[02:04:38] *** Joins: steven_is_false (quassel@moz-9001998F.bchsia.telus.net)
[02:05:30] <brson> Thad: in rust_task.h RED_ZONE_SIZE is only defined for 32-bit windows. you may need to add another
[02:05:45] *** Joins: thou (thou@moz-1C1CA9F7.fasttrackcomm.net)
[02:05:48] <brson> oh, are you compiling for 32-bit windows?
[02:05:53] *** Joins: igl (igl@moz-57AF7DCD.adsl.alicedsl.de)
[02:06:25] <Thad> brson: I was trying to build for 32-bit windows, yes.   Using my x86_64 host  Windows 7
[02:06:29] <brson> actually, it's defined for both
[02:06:37] <brson> maybe your toolchain doesn't define __WIN32__?
[02:06:48] *** Joins: int3_ (int3_@moz-359A42F6.subnet-248.amherst.edu)
[02:06:50] <Thad> ?? perhaps... should it ?
[02:06:53] <brson> perhaps it should be something like _WIN32
[02:07:04] <brson> Thad: not necessarily
[02:07:34] <Thad> brson: ok, but the RED_ZONE_SIZE is an indicator or potential OS define problems typically ?
[02:07:34] <brson> I think _WIN32 is more common
[02:07:42] <brson> yes
[02:08:09] <Thad> brson: ok, and then what about variable 'limit' is uninitialized....blah
[02:09:07] <brson> Thad: same problem. the #ifdefs are not working, and that one *is* using _WIN32
[02:09:18] <brson> so ... none of the win32 defines seem to exist
[02:09:23] <Thad> ah, gotcha
[02:09:58] <Thad> change my target perhaps ? and code the platform.mk for that target ?   I'm thinking i686-pc-cygwin ... which LLVM and Clang support it appears
[02:10:09] *** Joins: dymk (dymk@9D0D0DA6.8F293D07.59A90BC7.IP)
[02:10:40] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Client exited)
[02:11:23] <brson> I don't think that will fix this problem. These macros aren't defined by our makefiles.
[02:12:00] <Luqman> adding -D__WIN32 to CFG_GCCISH_CFLAGS is an option
[02:12:08] <Thad> should I download the mingw32 package for Cygwin default ?
[02:14:40] <brson> Thad: did uv build successfully?
[02:14:51] *** Joins: Jesin (Jessin_@moz-1866A4CC.cc.lehigh.edu)
[02:15:42] <Thad> brson: how would I know ?  see an .exe under the i686...build path ?
[02:15:55] *** Quits: steven_is_false (quassel@moz-9001998F.bchsia.telus.net) (Ping timeout)
[02:16:11] <kanak> valgrind is complaining that there are 8 bytes that are still reachable even in my program which has an empty main(). I'm using rust 0.6 and the leak is from update_gc_metadata(void const*) (rust_gc_metadata.cpp:63) . Is this a known issue?
[02:16:41] <brson> Thad: there would be a libuv.a file under rt/$triple/libuv
[02:17:33] <Thad> brson: nope... only the src folder for libuv under there...and a .buildstamp
[02:25:28] <brson> Thad: the internet doesn't seem to have a consensus on which to use but one of _WIN32, WIN32, or __CYGWIN__ should seemingly be defined
[02:25:31] <brson> bbl
[02:25:31] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Quit: leaving)
[02:27:57] *** Joins: SiegeLord (sl@moz-56D7E78.bstnma.fios.verizon.net)
[02:28:02] <doomlord> match (e.node) {    expr_while(e, ref b) => ...  <<<<<< what does the 'ref' mean? 
[02:29:11] <aatch> doomlord, it means match b by reference
[02:29:11] *** Quits: thou (thou@moz-1C1CA9F7.fasttrackcomm.net) (Input/output error)
[02:29:38] *** Quits: josh (josh@moz-6FB23C25.hvc.res.rr.com) (Quit: josh)
[02:29:58] <strcat> doomlord: by default it works by-value, so it often moves out
[02:30:01] <strcat> there's also 'ref mut'
[02:30:03] <aatch> used when the variable is non-copyable 
[02:30:12] <aatch> mostly
[02:30:20] <Thad> where is that seemingly define for _WIN32 somewhere ?  anyone know ?
[02:30:26] <doomlord> oh of course that actually binds vars for the expression ...
[02:31:07] <aatch> strcat, would changing `ref (mut) foo` to `&(mut) foo` make more sense?
[02:31:27] <strcat> aatch: no
[02:31:32] <aatch> Or is there something I'm missing?
[02:31:35] <strcat> &, ~ and @ destructure stuff in patterns
[02:31:48] <Jesse> nmatsakis: is there an issue filed for https://mail.mozilla.org/pipermail/rust-dev/2013-April/003938.html ?
[02:31:53] <aatch> Fair enough
[02:31:55] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:32:12] <strcat> rusti: let x = ~5; let ~y = x; y
[02:32:17] <rusti> 15
[02:32:18] <strcat> .
[02:32:28] <aatch> what
[02:32:42] <strcat> aatch: destructuring is symmetric to construction
[02:32:50] <Jesse> rusti: let x = ~5; let ~y = x; x
[02:32:52] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/CBCc
[02:33:15] <strcat> rusti: let x = (1, ~2); let (a, ~b) = x; (a, b)
[02:33:16] <rusti> (1, 2)
[02:33:31] <strcat> aatch: so & in a pattern means dereference
[02:33:33] <strcat> essentially
[02:33:38] <strcat> that's why there's ref
[02:33:42] <aatch> strcat, fair enough.
[02:34:04] <aatch> Hence why I asked, rather than being all "It should be this way! Blah blah blah..."
[02:34:36] * aatch gets annoyed at people that do that
[02:34:52] <Luqman> strcat: am i missing something, why is it 15 instead of 5?
[02:35:14] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[02:35:19] <aatch> rusti: let x = ~5; let ~y = x; fmt!("%?", y)
[02:35:21] <rusti> ~"5"
[02:35:30] <strcat> Luqman: whoa, didn't notice that :\
[02:35:36] <strcat> that's... not good
[02:35:42] <aatch> rusti: let x = ~5; let ~y = x; t
[02:35:43] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/gXNf
[02:35:44] <aatch> rusti: let x = ~5; let ~y = x; y
[02:35:46] <rusti> 5
[02:35:48] <strcat> rusti: let x = ~5; let ~y = x; y
[02:35:59] <rusti> 5
[02:36:01] <strcat> Luqman: oh it's because I typed 1 in the VM's serial stdin
[02:36:04] <aatch> I do see rusti output '1' occasionally though
[02:36:06] <strcat> Luqman: I switched workspaces :)
[02:36:18] <Luqman> ah
[02:36:21] <strcat> rusti: 1
[02:36:22] <rusti> weird stuff
[02:36:22] <rusti> 1
[02:36:27] <Luqman> i was really confused there
[02:36:36] <strcat> it builds up stdin to the VM in a buffer for some reason
[02:36:46] <strcat> and it somehow ends up in stdout ;\
[02:36:56] * strcat shrugs
[02:37:14] <Jesse> let x = (1, ~2); let (a, ~b) = x; fmt!("%?", y)
[02:37:19] <Jesse> rusti: let x = (1, ~2); let (a, ~b) = x; fmt!("%?", y)
[02:37:21] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/SRZD
[02:37:26] <Jesse> rusti: let x = (1, ~2); let (a, ~b) = x; fmt!("%?", b)
[02:37:28] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/jXiV
[02:37:41] <Jesse> rusti: let x = (1, ~2); let (_a, ~b) = x; fmt!("%?", b)
[02:37:42] <rusti> ~"2"
[02:37:52] <Luqman> it other news, i got rustc to cross compile for arm linux. now to make it do useful things instead of ust segfault
[02:38:11] <aatch> Luqman, awesome!
[02:39:04] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[02:39:05] <strcat> Luqman: nice, I've wanted to put rusti on my arm plug computer :)
[02:39:36] <Jesse> strcat: you run the rusti bot? <3
[02:39:41] *** Joins: thou (thou@moz-1C1CA9F7.fasttrackcomm.net)
[02:39:42] <strcat> yeah
[02:40:02] <strcat> about to switch it to incoming now that I have a repo with nightly builds :)
[02:41:58] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[02:42:11] <Luqman> aatch: strcat: well, time to learn arm assembly :P
[02:42:17] <strcat> Luqman: heh
[02:44:30] <benh> rusti: let mut x: ~int = ~0; { let mut p: &mut int = x; let mut &q = &p; *q += 1; *p += 1; } println(x.to_str());
[02:44:31] <rusti> 2
[02:45:12] <doomlord> Luqman, i'm after iOS support, where do i start lol
[02:45:25] <Thad> Where do I define __WIN32 ?
[02:46:05] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[02:46:07] <Luqman> doomlord: probably want to add the target info to mk/platform.mk
[02:46:36] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[02:46:37] <doomlord> its "arm-apple-darwin" as far as clang/llvm are concerned?
[02:47:07] <Luqman> i believe so
[02:47:43] *** Quits: kanak (user@moz-891EA4F4.c3-0.wtr-ubr1.sbo-wtr.ma.cable.rcn.com) (Client exited)
[02:48:33] <doomlord> i should add, i dont expect it to make an executable - my goal is to get asm source that i can include in an ios project and call from objC
[02:48:46] <Jesse> rusti: let mut x: ~int = ~0; { let mut p: &mut int = x; let mut &q = &p; *p += 1; *q += 1; } println(x.to_str());
[02:48:48] <rusti> 2
[02:49:18] <Jesse> but overlapping &mut lifetimes?
[02:49:31] <Luqman> doomlord: sure, once you get rustc/llvm to accept that target then you would be able to do rustc --target arm-apple-darwin -S foo.rs
[02:50:14] <doomlord> is that really all there would be to it :)
[02:51:06] <Luqman> doomlord: well it might not be that simple :P
[02:51:25] <strcat> Jesse: &mut in & is unsound right now
[02:51:28] <strcat> it's a known issue
[02:51:46] <strcat> maybe nmatsakis fixed that in the new borrowck, dunno
[02:51:47] <doomlord> Luqman, i had also wanted to get C source code out of it, (LLVM IR-> C? ?) but apparently that is unsupported in LLVM now, it bitrotted
[02:51:57] <Luqman> Thad: you can try adding -D__WIN32 to CFG_GCCISH_CFLAGS_[target-you-want] in mk/platform.mk
[02:52:15] *** Quits: kimundi (kimundi@moz-904E250B.dip0.t-ipconnect.de) (Ping timeout)
[02:52:16] <benh> rusti: let (rd1, wr) = comm::stream(); { let &rd2 = &rd1; do task::spawn { io::println(~"t2: " + rd2.recv()); } } do task::spawn { io::println(~"t1: " +rd1.recv()); } wr.send("ok");
[02:52:28] *** Quits: ssbr (scorchsabe@A9D9D38C.B6F034AC.72A31D6.IP) (Ping timeout)
[02:52:31] <strcat> rusti: 1
[02:52:32] <rusti> 1
[02:52:35] <strcat> it timed out
[02:52:40] <benh> huh
[02:53:04] <strcat> infinite loop?
[02:53:07] <strcat> dunno
[02:53:11] <strcat> lemme update it to incoming
[02:53:19] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[02:53:41] <strcat> I tried before but I forgot to make the VM not use -snapshot
[02:53:51] <strcat> so it reverted to 0.6 on the next spawn :)
[02:54:12] <Thad> Luqman: thanks.  why would that not be there already I wonder... NO ONE uses Windows in the Rust community ?
[02:55:32] *** Joins: kimundi (kimundi@moz-ADB574EC.dip0.t-ipconnect.de)
[02:55:49] *** Joins: jeff (jeff@moz-AA611512.nycmny.east.verizon.net)
[02:55:56] <benh> does rusti import std?
[02:56:01] <dymk> A few days ago I was able to use build/install/info with rustpkg, and then I built and installed the latest master branch, and I'm getting "not implemented" messages. Was there a regression that happened with rustpkg in the past few days?
[02:56:54] <doomlord> does samsung backing ensure that android support is always going to be good
[02:57:55] *** kimundi is now known as zz_kimundi
[02:58:51] <dymk> benh: it looks like it tries to, but fails on Windows
[03:00:43] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:00:46] <strcat> rusti: 1
[03:00:48] <rusti> 1
[03:01:05] <strcat> rusti: core::run::run_program(~"rustc", [~"--version"]);
[03:01:06] <rusti> rustc 0.6 (7a85767 2013-04-30 17:39:36 -0700)
[03:01:06] <rusti> host: x86_64-unknown-linux-gnu
[03:01:13] <benh> rusti: let (rd1, wr) = comm::stream(); { let &rd2 = &rd1; do task::spawn { io::println(~"t2: " + rd2.recv()); } } do task::spawn { io::println(~"t1: " +rd1.recv()); } wr.send("ok");
[03:01:24] <strcat> rusti: 1
[03:01:25] <rusti> 1
[03:01:30] <strcat> benh: times out for some reason
[03:01:33] <benh> huh
[03:01:40] <benh> It "worked" in a private message
[03:01:44] <strcat> it gets 10 seconds and then it considers it timed out
[03:01:55] <strcat> benh: dunno :)
[03:02:10] <strcat> benh: and yes it imports std
[03:02:14] <dymk> was it just recently that rustpkg stopped implementing test? it was just working yesterday
[03:02:29] <strcat> rusti: core::run::run_program(~"cat", [~"/home/rust/build/foo.rs"]);
[03:02:30] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/XAKf
[03:03:36] <benh> rusti: let x = std::arc::ARC(42); let &y = &x;
[03:03:37] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/VPZc
[03:04:55] <strcat> huh
[03:05:26] <otters> is that for automatic reference counting
[03:05:40] <benh> ARC, yeah
[03:05:47] *** Quits: Benvie_ (brandon@5FD20F9A.53D07D95.EFF8B7BF.IP) (Ping timeout)
[03:06:00] <strcat> otters: the A is for atomic
[03:06:06] <strcat> although it is automatic :)
[03:06:12] <otters> oh cool
[03:06:17] *** Joins: mindginative (mindginati@moz-C1729134.dsl.clear.net.nz)
[03:06:19] *** Quits: mindginative (mindginati@moz-C1729134.dsl.clear.net.nz) (Quit: mindginative)
[03:06:31] <strcat> and apparently it doesn't work? ;\
[03:06:42] *** Joins: Benvie_ (brandon@5FD20F9A.53D07D95.EFF8B7BF.IP)
[03:06:45] <benh> The trick is that there's some brokenness around pointers in irrefutable patterns, and let &y = &x lets noncopyable things be copied
[03:06:58] <strcat> I essentially just did that build
[03:07:01] <strcat> benh: ah
[03:07:11] <strcat> Name                          Old Version                 New Version                 Net Change  Download Size
[03:07:13] <strcat> thestinger/rust-incoming-git  release.0.6.705.g9d966ae-1  release.0.6.713.g7a85767-1  0.00 MiB        24.97 MiB
[03:07:14] <strcat> oh well
[03:08:06] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[03:08:06] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/5h_Wfw
[03:08:06] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[03:08:21] *** Joins: brson (brson@51C589B3.EF2694B5.DFAC6AA7.IP)
[03:08:21] *** ChanServ sets mode: +o brson
[03:08:27] *** Quits: brson (brson@51C589B3.EF2694B5.DFAC6AA7.IP) (Quit: brson)
[03:08:36] *** Joins: brson (brson@51C589B3.EF2694B5.DFAC6AA7.IP)
[03:08:36] *** ChanServ sets mode: +o brson
[03:09:06] <strcat> benh: I only know about the holes in @mut ;p
[03:09:21] <strcat> and & &mut
[03:11:03] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[03:11:03] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/0yF38Q
[03:11:03] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[03:11:03] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[03:11:04] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/2gukZQ
[03:11:04] <ghrust> 13rust/06auto 14c1fdace 15Brian Anderson: core: Replace uses of 'drop' in task module with 'finally'. #5379
[03:11:04] <ghrust> 13rust/06auto 14c1ea72d 15bors: auto merge of #6113 : brson/rust/task-drop, r=graydon
[03:11:05] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[03:11:18] <strcat> rusti: core::hashmap::HashMap::new()
[03:11:19] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/PiaT
[03:11:57] *** Quits: brson (brson@51C589B3.EF2694B5.DFAC6AA7.IP) (Quit: leaving)
[03:12:00] <Jesse> why is that reasonable error message followed by "Segmentation fault"
[03:12:11] <strcat> rusti: let xs = [1, 2, 3, 4, 5]; let mut it = xs.iter(); for it.advance |&x| { println(x.to_str())
[03:12:13] <rusti> foo.rs:6:5: 6:6 error: incorrect close delimiter: `)`
[03:12:13] <rusti> foo.rs:6     });
[03:12:13] <rusti>               ^
[03:12:17] <strcat> rusti: let xs = [1, 2, 3, 4, 5]; let mut it = xs.iter(); for it.advance |&x| { println(x.to_str()) }
[03:12:19] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/SOCD
[03:12:32] *** Joins: brson (brson@E9CDE21E.991753BB.CA4D1600.IP)
[03:12:32] *** ChanServ sets mode: +o brson
[03:12:38] <strcat> rusti: use core::iterator::*; let xs = [1, 2, 3, 4, 5]; let mut it = xs.iter(); for it.advance |&x| { println(x.to_str()) }
[03:12:40] <rusti> 1
[03:12:40] <rusti> 2
[03:12:40] <rusti> 3
[03:12:40] <rusti> 4
[03:12:40] <rusti> 5
[03:13:18] <strcat> rusti: use core::iterator::*; let xs = [1, 2, 3, 4, 5]; let mut a = xs.iter(); let mut b = xs.iter(); for a.chain(b).advance |&x: &uint| { println(x.to_str()) }
[03:13:19] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/VNOO
[03:13:24] <seth> who should i talk to about problems with rust-core-foundation?
[03:13:30] <strcat> rusti: use core::iterator::*; let xs = [1, 2, 3, 4, 5]; let mut a = xs.iter(); let mut b = xs.iter(); for a.chain(b).advance |&x: &int| { println(x.to_str()) }
[03:13:31] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/ITGe
[03:13:40] <strcat> oh right rvalues
[03:13:45] <seth> error: cannot associate methods with a type outside the crate the type is defined in; define and implement a trait or new type instead
[03:13:58] <seth> i get several of theses, originating in rust-core-foundation, when trying to build servo
[03:18:26] <brson> seth: are you upgrading rust?
[03:18:48] <brson> i'm surprised you would see that using servo master
[03:18:55] <seth> the servo rust submodule is right where it should be
[03:19:04] <seth> though i do have rust installed on my system too...
[03:19:46] <seth> it's definitely using the internal rustc tho
[03:19:49] <seth> jsut checked
[03:20:23] <seth> ahh drat
[03:20:27] <seth> come to think of it...
[03:20:33] <seth> i DID upgrade rust =(
[03:21:20] <seth> i moved it to a commit from jld to solve a build issue that broke servo
[03:21:22] *** Quits: Erik (Erik-S@moz-252DBA2.hsd1.co.comcast.net) (Ping timeout)
[03:22:13] <seth> hmm. not sure how to cleanly solve this issue other than by creating a new rust branch from the point that is known to work for servo and cherrypicking jld's commit
[03:22:31] <doomlord> i seem to have got llc to generate some C++ from rust derived llvm IR .. didn't work when i had it calling println
[03:23:27] *** Quits: catpig (catpig@moz-E041C70E.dip0.t-ipconnect.de) (Quit: Verlassend)
[03:23:31] <seth> brson: do you have a better idea? because otherwise i'll just do that
[03:24:15] <strcat> rusti: use core::iterator::*; let xs = [1, 2, 4, 8, 16, 32]; let mut it = xs.iter().transform(|&x| x * 2).take_while(|&x| x < 20); for it.advance |x: int| { println(x.to_str()) }
[03:24:17] <rusti> 2
[03:24:17] <rusti> 4
[03:24:17] <rusti> 8
[03:24:17] <rusti> 16
[03:25:01] *** Quits: Jesse (jruderman@2557E599.66715431.D25A875A.IP) (Quit: Jesse)
[03:25:28] * strcat has yet to understand where that type hint is needed
[03:25:42] <strcat> needed with take_while, not needed with transform...
[03:29:29] *** Joins: ssbr (scorchsabe@A9D9D38C.B6F034AC.72A31D6.IP)
[03:29:46] <brson> seth: it sounds like we do need to upgrade rust. if you want to work around it then do the cherry-pick locally and configure servo with --disable-manage-submodules so that `configure` doesn't clobber your rust submodule. we can talk about upgrading tomorrow (or you can do it)
[03:29:59] <brson> seth: i would prefer not to fork rust - we haven't needed to do it yet
[03:30:24] *** Joins: akashj87 (akash@4F91ABEF.46EB02D4.35E3DDC8.IP)
[03:32:09] <brson> seth: you can clean rust with `make clean-rust`
[03:32:19] <seth> brson: that's fine. i'm not sure i'm experienced enough yet to be responsible for the upgrade, so i'll just work around locally for now
[03:34:04] <EXetoC> strcat: neat!
[03:34:07] *** Quits: EXetoC (ex@moz-2DBEB1E4.customer.t3.se) (Quit: WeeChat 0.4.0)
[03:37:57] *** Joins: pudgetta (Mibbit@moz-9CF4ABF3.intergen.net.nz)
[03:38:34] *** Joins: eholk (eholk@moz-D5BE5964.hsd1.in.comcast.net)
[03:39:44] <Thad> brson: getting some output noise under /rt now... tweaked the platform.mk file and added one for i686-pc-cygwin ... magically it seems to like it, which goes along with my Cygwin identifiers previously committed to ./configure file... lovely !  Still building now against that triple target, crossing fingers...
[03:40:24] <Thad> but it's not complaining that much at all so far :)
[03:40:57] *** Joins: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net)
[03:41:29] *** Quits: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[03:42:16] <Thad> bunch of .d and .o files , thus far.... :)
[03:43:53] *** Quits: seth (seth@moz-BE33DA21.fw1.sfo1.mozilla.net) (Input/output error)
[03:44:32] *** Joins: seth (seth@moz-BE33DA21.fw1.sfo1.mozilla.net)
[03:45:46] <Thad> rusti: let happyness = "Cygwin, LLVM, and Rust all compile on Thad's Win 7 machine"; println(happyness.to_str())
[03:45:48] <rusti> Cygwin, LLVM, and Rust all compile on Thad's Win 7 machine
[03:46:02] <Thad> not yet.
[03:46:42] *** Quits: seth (seth@moz-BE33DA21.fw1.sfo1.mozilla.net) (Input/output error)
[03:47:09] <Thad> but we're getting there Rust... don't you worry, I won't let you down, if you don't let me down.  WHY am I talking to a compiler?!?!?
[03:47:16] <Thad> lol
[03:47:24] <aatch> Thad, because you have gone mad
[03:47:27] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[03:47:29] <brson> :)
[03:47:31] <Thad> apparently
[03:47:58] <snowmantw> soon... a compiler passed the Turing test
[03:48:34] <aatch> I think the test is invalidated by an insane examiner
[03:49:00] <Thad> aatch: BUT... who's on the examining end ?  hmmmm.
[03:50:25] <Thad> getting a bunch of -Wno-maybe-uninitialized  warnings being output...but it's progressing... is that a problem ??
[03:51:02] <Thad> unknown-warning option for that it says... for all the .cpp files...
[03:52:54] *** Quits: jeff (jeff@moz-AA611512.nycmny.east.verizon.net) (Quit: jeff)
[03:53:23] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[03:53:23] * aatch renamed his remotes, now he doesn't have to worry about accidentally pushing to mozilla/rust
[03:54:45] *** Quits: pudgetta (Mibbit@moz-9CF4ABF3.intergen.net.nz) (Quit: http://www.mibbit.com ajax IRC Client)
[03:55:18] *** Quits: int3_ (int3_@moz-359A42F6.subnet-248.amherst.edu) (Client exited)
[03:57:14] *** Quits: blitter (blitter@moz-7C98731E.dyn.centurytel.net) (Ping timeout)
[03:57:43] *** Joins: int3_ (int3_@moz-359A42F6.subnet-248.amherst.edu)
[03:58:15] <dymk> yep, rustpkg on master branch no longer supports build or test, what happened?
[03:58:44] *** Quits: Jesin (Jessin_@moz-1866A4CC.cc.lehigh.edu) (Ping timeout)
[03:59:59] <Thad> dymk: brson told me to use Incoming
[04:00:21] <dymk> Alright, I'll try that, thanks
[04:03:02] *** Quits: akashj87 (akash@4F91ABEF.46EB02D4.35E3DDC8.IP) (Ping timeout)
[04:04:27] *** Quits: igl (igl@moz-57AF7DCD.adsl.alicedsl.de) (Ping timeout)
[04:04:49] <erickt> brson: ping
[04:05:31] *** Joins: igl (igl@moz-D7D5A70A.adsl.alicedsl.de)
[04:06:22] *** Quits: Thad (chatzilla@moz-C35F90AE.tx.res.rr.com) (Quit: ChatZilla 0.9.90 [Firefox 21.0/20130425162858])
[04:07:47] *** Quits: jfredett (jfredett@moz-C01C350.bstnma.fios.verizon.net) (Ping timeout)
[04:11:01] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[04:11:01] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/2gukZQ
[04:11:01] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[04:14:03] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[04:14:03] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/215SKg
[04:14:03] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[04:14:04] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[04:14:04] <ghrust> 01[13rust01] 15bors pushed 21 new commits to 06auto: 02http://git.io/LQKXug
[04:14:04] <ghrust> 13rust/06auto 14229ebf0 15John Clements: deleted two tests intended to test RUST_CC_ZEAL, an apparently defunct flag for the cycle collector
[04:14:05] <ghrust> 13rust/06auto 145d8db6f 15John Clements: remove (non-parsing) test related to impl d for d feature
[04:14:05] <ghrust> 13rust/06auto 1478942a2 15John Clements: this issue is a dup of another one that has a correct test case...
[04:14:08] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[04:15:51] *** Joins: dbaupp (Thunderbir@99439820.D5A1DCF.37681C44.IP)
[04:15:57] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[04:17:14] *** Quits: thou (thou@moz-1C1CA9F7.fasttrackcomm.net) (Input/output error)
[04:17:23] <brson> erickt: pong
[04:17:51] <erickt> I just saw you landed a patch that turned drop into finally, I wanted to let you know I'm trying to remove drop all together
[04:18:07] <erickt> are you trying to do the same thing?
[04:18:33] *** Joins: Jesin (Jessin_@moz-1866A4CC.cc.lehigh.edu)
[04:20:04] <bblum> remove drop altogether??
[04:20:13] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[04:20:16] <bblum> (presumably you mean "replace the word with 'finally'"?)
[04:20:18] <brson> erickt: no I'm not
[04:20:19] <erickt> bblum: it's been deprecated for a while
[04:20:30] <bblum> erickt: in favour of...?
[04:20:37] <erickt> The the Drop trait or finally
[04:21:06] <erickt> I'm referring to `struct foo { x: int, drop { â€¦ } }`
[04:21:36] *** Joins: sanxiyn (tinuviel@665E6AA3.19467A1.45C99EA8.IP)
[04:21:53] <bblum> oh, sure.
[04:21:57] <bblum> that's been deprecated forever :P
[04:23:03] *** Joins: thou (thou@moz-1C1CA9F7.fasttrackcomm.net)
[04:23:18] *** Quits: sanxiyn (tinuviel@665E6AA3.19467A1.45C99EA8.IP) (Ping timeout)
[04:23:46] *** Joins: sanxiyn (tinuviel@665E6AA3.19467A1.45C99EA8.IP)
[04:29:59] *** Quits: dbaupp (Thunderbir@99439820.D5A1DCF.37681C44.IP) (Ping timeout)
[04:30:15] *** Quits: SiegeLord (sl@moz-56D7E78.bstnma.fios.verizon.net) (Quit: It's a joke. It's all a joke.)
[04:30:41] *** Joins: igl1 (igl@moz-8B13A007.adsl.alicedsl.de)
[04:30:54] *** Quits: igl (igl@moz-D7D5A70A.adsl.alicedsl.de) (Ping timeout)
[04:32:51] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Input/output error)
[04:34:23] *** Quits: igl1 (igl@moz-8B13A007.adsl.alicedsl.de) (Ping timeout)
[04:34:51] *** Joins: igl (igl@moz-81A378FF.adsl.alicedsl.de)
[04:35:33] *** Joins: SiegeLord (siege@moz-56D7E78.bstnma.fios.verizon.net)
[04:39:01] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[04:48:10] *** Quits: cdidd (cdidd@moz-70981FCD.broadband.corbina.ru) (Ping timeout)
[04:51:10] <dymk> Thad: nah, still doesn't implement "test" or "build" in incoming branch
[04:55:37] <dymk> brson, did you tell Thad to use the incoming branch for rustpkg?
[04:56:04] <brson> dymk: yes
[04:56:12] <dymk> I'm still getting unimplemented errors with it on windows (build, test, install) when compiling from the latest version of the incoming branch
[04:56:28] *** Quits: naq (naq@D5C2D2DF.E4265FCD.E481B5B.IP) (Ping timeout)
[04:57:09] *** Joins: seth (seth@moz-D840E602.dsl.static.sonic.net)
[04:58:03] *** Quits: int3_ (int3_@moz-359A42F6.subnet-248.amherst.edu) (Client exited)
[04:58:29] *** Joins: naq (naq@D5C2D2DF.E4265FCD.E481B5B.IP)
[04:59:12] *** Quits: seth (seth@moz-D840E602.dsl.static.sonic.net) (Ping timeout)
[05:02:24] <Jeaye> What can I use to round an f32 up?
[05:02:34] <Jeaye> I didn't find anything in the f32 module.
[05:03:26] <strcat> up as in ceil?
[05:03:45] *** Quits: dymk (dymk@9D0D0DA6.8F293D07.59A90BC7.IP) (Quit: Leaving)
[05:03:50] <Jeaye> strcat: Exactly.
[05:04:09] <strcat> rusti: extern { #[fast_ffi] fn ceilf(x: f32) -> f32) }; unsafe { ceilf(2.5) }
[05:04:10] <rusti> foo.rs:5:53: 5:54 error: incorrect close delimiter: `)`
[05:04:10] <rusti> foo.rs:5          extern { #[fast_ffi] fn ceilf(x: f32) -> f32) }; unsafe { ceilf(2.5) }
[05:04:10] <rusti>                                                               ^
[05:04:16] <strcat> rusti: extern { #[fast_ffi] fn ceilf(x: f32) -> f32); }; unsafe { ceilf(2.5) }
[05:04:18] <rusti> foo.rs:5:53: 5:54 error: incorrect close delimiter: `)`
[05:04:18] <rusti> foo.rs:5          extern { #[fast_ffi] fn ceilf(x: f32) -> f32); }; unsafe { ceilf(2.5) }
[05:04:18] <rusti>                                                               ^
[05:04:24] <strcat> rusti: extern { #[fast_ffi] fn ceilf(x: f32) -> f32; }; unsafe { ceilf(2.5) }
[05:04:26] <rusti> 3
[05:04:31] <strcat> maybe that's in libc already?
[05:04:32] <Jeaye> Ehh, is there nothing in core or std?
[05:04:38] <Jeaye> I'll check.
[05:04:57] <TD-Linux> is there an explanation of fast_ffi anywhere?
[05:05:00] <strcat> Jeaye: there's no ceil in f32?
[05:05:14] <strcat> TD-Linux: well in the future all ffi will be fast_ffi, the old way will go away
[05:05:18] <strcat> it's just a transition right now
[05:05:25] <strcat> fast_ffi calls C functions on the rust stack
[05:05:28] <brson> dymk: rustpkg is still under construction. maybe it doesn't work right now. sadly, i have not tried it lately
[05:05:28] <Jeaye> Oh shit, there is a ceil in f32.
[05:05:29] <strcat> the old way used a separate C stack
[05:05:33] <Jeaye> Thanks. ^_^
[05:06:03] <TD-Linux> strcat, what was the issue with using the rust stack? I thought it was designed purposely to be compatible with C stack
[05:06:27] <strcat> TD-Linux: it's a segmented stack that expands a segment at a time as-needed
[05:06:28] *** Joins: Diablo-D3 (diablo@moz-52AA8794.port.east.myfairpoint.net)
[05:06:45] <Jeaye> rusti: let f = 3.1; f.ceil()
[05:06:46] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/EXBh
[05:06:54] <strcat> and C expects a big fixed size stack, implementations usually don't even check for stack overflow
[05:07:00] <Jeaye> rusti: let f = 3.1; f.ceil(); f
[05:07:03] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/bUVY
[05:07:06] <strcat> can do that with -fstack-protector=all with clang/gcc
[05:07:06] *** Joins: jack (jack@EF36212C.8FA609AD.840029BC.IP)
[05:07:10] <strcat> but it can't expand
[05:07:17] <TD-Linux> strcat, oh and you usually run really close to the stack size limit
[05:07:30] <Jeaye> rusti: let f = 3.1f32; f.ceil()
[05:07:30] <strcat> TD-Linux: yeah fast_ffi allocates a 2MiB segment right now
[05:07:31] <rusti> 4
[05:07:39] <strcat> TD-Linux: ideally functions could be annotated with the space they need
[05:07:55] <strcat> the old C stack with also 2MiB but it required a stack switch
[05:08:11] <strcat> was also*
[05:08:12] <TD-Linux> strcat, the segmented stack would actually be really nice for me
[05:08:21] <TD-Linux> in embedded you often allocate 1KB stacks per task
[05:08:33] <TD-Linux> and then try to meausre stack usage of entire tasks and pick correct size
[05:08:53] <TD-Linux> and then cry when it breaks later due to feature additions, and fails in a non obvious way
[05:09:03] <TD-Linux> does rust's segmented stack depend on a mmu?
[05:09:11] <TD-Linux> or is it just a linked list?
[05:09:16] <strcat> TD-Linux: just a linked list
[05:09:22] <TD-Linux> neato
[05:09:36] <strcat> LLVM and gcc have segmented stack support
[05:09:38] *** Joins: int3_ (int3_@moz-359A42F6.subnet-248.amherst.edu)
[05:10:00] <TD-Linux> strcat, weird, how does that work? that almost seems out of scope of llvm
[05:10:02] *** Joins: lmandel (lmandel@moz-9CE00FC0.holiday-inn-express.mozilla.hq)
[05:10:18] <strcat> TD-Linux: it has to keep track of alloca sizes I guess, I don't know about the details
[05:10:18] <TD-Linux> are stack frames allowed to be split between segments?
[05:10:25] <strcat> TD-Linux: don't think so
[05:10:38] <brson> in gcc they are, but not in rust
[05:10:43] <strcat> it has to allocate enough space to call a function up front if there isn't enough
[05:11:05] <TD-Linux> in gcc is segmented stack off by default? it sounds like it'd break ABI
[05:11:06] *** Joins: akashj87 (akash@C16F1968.3010DFE1.35E3DDC8.IP)
[05:11:20] <strcat> TD-Linux: yeah it's off by default, they added it for gccgo
[05:11:48] <strcat> "they" is probably really just ian lance taylor
[05:12:38] <TD-Linux> also I thought llvm didn't "know" about memory allocators? so how can it allocate more stack?
[05:12:52] <strcat> TD-Linux: it uses an external implementation
[05:17:02] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[05:17:02] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/LQKXug
[05:17:02] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[05:17:19] <TD-Linux> also unrelated question, does rust *depend* on hardware threads for anything important that I should know about?
[05:17:35] <TD-Linux> I'm in the process of ripping out all thread support from librt
[05:19:49] <brson> TD-Linux: no. it needs thread-local storage, but without threads this could just be a global
[05:20:03] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[05:20:03] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/Gbz0ng
[05:20:03] <ghrust> 13rust/06auto 14d50592b 15Tim Chevalier: core: Add remove_directory_recursive, change copy_file...
[05:20:03] <ghrust> 13rust/06auto 149312f2f 15Tim Chevalier: rustpkg: Implement install command...
[05:20:05] <ghrust> 13rust/06auto 143d23634 15bors: auto merge of #6124 : catamorphism/rust/rustpkg, r=catamorphism...
[05:20:06] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[05:20:14] <Diablo-D3> TD-Linux: you've joined the church of thread hate?
[05:22:07] *** Joins: arete (arete@moz-CC2E6F16.new.xen.prgmr.com)
[05:25:39] <TD-Linux> Diablo-D3, I've joined the church of not-having-threads 
[05:25:46] <Diablo-D3> YAY
[05:25:58] <Diablo-D3> I thought I was alone in my thread hate
[05:26:02] <TD-Linux> no I love threads
[05:26:03] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[05:26:04] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/L5QP2A
[05:26:04] <ghrust> 13rust/06auto 147fed480 15Daniel Micay: char: fix unused import warning
[05:26:04] <ghrust> 13rust/06auto 146f18bb5 15Daniel Micay: iter: add a find function
[05:26:04] <ghrust> 13rust/06auto 14a6eaa3b 15Daniel Micay: iter: add max and min functions
[05:26:05] <TD-Linux> I just don't have them
[05:26:05] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[05:26:11] <Diablo-D3> what
[05:26:17] <strcat> TD-Linux: and no processes either
[05:26:31] <Diablo-D3> strcat: now you're just being weird.
[05:26:37] <strcat> memory protection and VM? pfft, don't need those
[05:26:43] <TD-Linux> nope, without a mmu there isn't really a distinction between threads and processes
[05:26:49] *** Joins: jclements (jclements@moz-20AD2EFB.dsl.static.sonic.net)
[05:26:50] <Diablo-D3> I think I give a pass on rust's use of threads
[05:27:17] <Diablo-D3> the implementation just abuses the shared memory to make passing references fast
[05:27:21] <TD-Linux> I do actually have a very minimal mpu with 4 segments
[05:27:32] <Diablo-D3> the language itself cant do it
[05:27:38] <Diablo-D3> so in theory you cant fuck your shit up
[05:27:41] <TD-Linux> Diablo-D3, what are you talking about?
[05:27:48] <Diablo-D3> TD-Linux: conversation yesterday
[05:28:01] <Diablo-D3> channel was helping me evaluate rust as the next language I want to learn
[05:28:02] *** Joins: dbaupp (Thunderbir@88688F45.D5A1DCF.37681C44.IP)
[05:28:06] <TD-Linux> rust's threads are way safer than C threads
[05:28:14] <TD-Linux> err, how one would use threads in C
[05:28:19] <Diablo-D3> TD-Linux: rust doesnt have threads
[05:28:32] <Diablo-D3> Im talking about the internal implementation of everything here
[05:28:35] <Diablo-D3> not what rust does in rustlang
[05:28:57] <TD-Linux> I actually do have FreeRTOS available for preemptive threads, however I'd rather not use it for now
[05:29:04] <Diablo-D3> it implements its own fibre scheduler across OS threads
[05:29:13] <Diablo-D3> and then bottles up all that shit faaaar away from users
[05:29:23] <Diablo-D3> so they cant access it, they cant use it, and they cant fuck it up
[05:29:23] <TD-Linux> as I have one core I'd like to see what rust's built in task scheduler can do for me first
[05:29:41] <Diablo-D3> they only get what rust calls tasks (aka fibers)
[05:30:06] <Diablo-D3> which is pretty similar to the C framework I was working on
[05:30:27] <TD-Linux> can't one call, say, pthreads from rust and make threads?
[05:30:47] <TD-Linux> or in my case, FreeRTOS
[05:31:16] <Diablo-D3> yeah but then you're outside of rust
[05:31:20] <Diablo-D3> and then you have done something very stupid
[05:31:44] <TD-Linux> some limitations of rust's threads would be that they aren't preemptive if in a single task
[05:32:05] <mcpherrin> Is that necessarily true?
[05:32:12] <TD-Linux> *single thread
[05:32:25] <TD-Linux> mcpherrin, I haven't actually looked at rust's implementation
[05:32:34] <mcpherrin> I haven't looked at the implementation, but using a timer signal to "context switch" is totally doable.
[05:32:55] <Diablo-D3> TD-Linux: they COULD be preemptive
[05:33:03] <TD-Linux> mcpherrin, or any other interrupt, I suppose. But then is there a distinction in my case?
[05:33:08] <TD-Linux> maybe there is a distinction on UNIX
[05:33:12] <TD-Linux> because threads are processes in linux
[05:33:21] <TD-Linux> in my case, that's exactly what FreeRTOS does
[05:33:22] <Diablo-D3> threads just happen to be linux threads in linux
[05:33:28] <Diablo-D3> and processes are linux threads in linux too
[05:33:42] <Diablo-D3> which gets really weird once you realize how the linux scheduler is designed
[05:33:48] <TD-Linux> in an interrupt, it can trigger a context switch by saving state onto a stack, switching stacks, and popping state
[05:34:00] <strcat> mcpherrin: it's not necessarily true, they could preempt
[05:34:01] <strcat> but they don't
[05:34:05] <Diablo-D3> the thing with pre-emptive tasks
[05:34:10] <Diablo-D3> you'd need OS support for that
[05:34:17] <TD-Linux> no you wouldn't
[05:34:20] <TD-Linux> err yes you would
[05:34:22] <TD-Linux> you would need an "interrupt"
[05:34:27] <TD-Linux> which itself is preemtive :P
[05:34:29] <Diablo-D3> no no no
[05:34:32] <Diablo-D3> you have it wrong
[05:34:34] <strcat> there are signals
[05:34:35] <Diablo-D3> you create MORE threads
[05:34:37] <sanxiyn> I don't like preemption
[05:34:45] <Diablo-D3> which are set, say, SCHED_ISO
[05:35:07] <TD-Linux> strcat, on linux, do signals run on the same stack as the main program?
[05:35:13] <Diablo-D3> and then schedule your high priority fibers on those threads only
[05:35:19] <TD-Linux> do you have to reserve space in each stack segment in case a signal were to happen?
[05:35:25] <strcat> TD-Linux: you can set a signal stack
[05:35:27] <strcat> iirc
[05:35:38] <sanxiyn> TD-Linux: man sigaltstack
[05:35:44] <strcat> it's POSIX :)
[05:36:03] <TD-Linux> strcat, oh okay. On ARM's NVIC, it does a hardware save of all hardware registers onto the stack pointer, so I'd have to always have that available
[05:36:15] <TD-Linux> unless rust didn't use the stack pointer register for its stack
[05:36:17] <strcat> http://pubs.opengroup.org/onlinepubs/009695399/functions/sigaltstack.html
[05:37:13] <TD-Linux> sanxiyn, preemption is a fact of life when your deadlines are in the microseconds, or nanoseconds :P
[05:37:20] <Diablo-D3> yeah
[05:37:31] <Diablo-D3> but the trick with preemption is have your task run ahead of time anyhow
[05:37:43] <Diablo-D3> and linux cant do real realtime anyhow
[05:37:52] <TD-Linux> yeah, that's why I'm not using it :)
[05:38:09] <Diablo-D3> you need to switch to RTOS or vxworks
[05:38:21] <Diablo-D3> and Im not even sure if I wan tto call vxworks an OS
[05:38:30] <TD-Linux> it definitely is
[05:38:50] <Jeaye> What was the old label syntax?
[05:38:52] <TD-Linux> more so than FreeRTOS is, and it calls itself an OS when it's hardly more than a scheduler
[05:39:13] <Jeaye> `foo: loop doesn't work for me, since I'ven't pull in the past couple weeks.
[05:39:33] <Jeaye> 'foo: loop, that is.
[05:39:39] <Diablo-D3> TD-Linux: vxworks is a bunch of objects you statically compile into your app so you can boot your app
[05:39:53] <TD-Linux> Diablo-D3, how does that not make it an OS?
[05:40:00] <Diablo-D3> it turns your app into an OS
[05:40:10] <Diablo-D3> its not really an OS by itself
[05:40:11] <TD-Linux> what's the distinction?
[05:40:20] <Diablo-D3> its an OS construction kit =P
[05:40:30] <TD-Linux> on a device where the code runs directly out of ROM, that's the *only* way to do it
[05:41:08] <Diablo-D3> I know]
[05:41:15] <Diablo-D3> its kinda cool
[05:41:17] <Diablo-D3> but weird
[05:41:20] <TD-Linux> Diablo-D3, also vxworks allows programs to be loaded at runtime actually
[05:41:31] <TD-Linux> it has a really nice wifi debugger even
[05:41:46] <TD-Linux> depending on your platform
[05:41:56] <sanxiyn> Jeaye: Try loop foo: {
[05:42:31] <Diablo-D3> wifi debugger? hah.
[05:43:16] *** Quits: igl (igl@moz-81A378FF.adsl.alicedsl.de) (Ping timeout)
[05:43:24] *** Joins: igl (igl@moz-3A232B3D.adsl.alicedsl.de)
[05:43:29] *** Quits: RMF (RMF@moz-FD7F97AA.dsl.telepac.pt) (Quit: Textual IRC Client: www.textualapp.com)
[05:44:09] <Diablo-D3> so whats the best way of learning rust atm?
[05:44:37] <Diablo-D3> I know C, Perl, Java, and a smattering of other languages, so how hard can rust be? </famous last words>
[05:44:56] <sanxiyn> Jeaye: https://github.com/mozilla/rust/issues/2216#issuecomment-8216181
[05:45:02] <TD-Linux> if you know that many you should already know how to learn a language :P
[05:46:24] <sanxiyn> Is there a good document on "how to learn a new programming language"
[05:46:51] <sanxiyn> I roughly know how to, but it would be nice to have it written down
[05:46:51] <Jeaye> sanxiyn: Trying this: https://gist.github.com/Jeaye/1a59b9d170939e0df914
[05:47:17] <sanxiyn> Jeaye: oops
[05:47:20] <sanxiyn> won't work inside for
[05:47:29] <Jeaye> Damn.
[05:47:32] <Jeaye> What can I do?
[05:47:38] <sanxiyn> (inside for, break is returning boolean...)
[05:47:56] <Jeaye> Just rework the for loops into regular loops?
[05:48:03] <Diablo-D3> TD-Linux: rust has weird syntax
[05:48:06] <sanxiyn> Jeaye: I'd extract to function and do "return" where you break
[05:48:13] <Jeaye> hmm
[05:48:36] <sanxiyn> Jeaye: Reworking to regular loops should work too
[05:49:16] <Jeaye> It uses a lot of vars from the current scope, so another function would be more difficult.
[05:49:28] <Diablo-D3> TD-Linux: basically what Im asking is, is the current documentation sufficient to learn Rust
[05:49:36] <Jeaye> Unless I could do some inline function bullshit to make it capture those vars.
[05:50:10] <sanxiyn> ok
[05:50:13] <strcat> Diablo-D3: it must be because we all learned it ;p
[05:50:31] <aatch> Define "documentation"
[05:50:57] <sanxiyn> strcat: Well, most of us didn't learn *solely* from documentation
[05:51:18] <sanxiyn> aatch: Those under doc/ directory
[05:51:30] <aatch> sanxiyn, that's no fun
[05:51:59] <sanxiyn> Diablo-D3: I believe current documentation, *in addition to help from this channel*, should be sufficient to learn Rust
[05:52:38] *** Joins: geomyidae (geomyidae@9FDA6BE2.37A86C23.448B98CC.IP)
[05:52:50] <bjz> brson: r+? https://github.com/mozilla/rust/pull/6147
[05:52:56] <sanxiyn> Writing up report of the first Korean Rust user group meetup
[05:53:03] <mcpherrin> I'd argue you probably also need a copy of the rust compuler to learn rust :P
[05:53:17] <Diablo-D3> mcpherrin: thats only if I want to compile it ;)
[05:53:28] <aatch> Diablo-D3, he means to read
[05:53:48] <aatch> (I assume anyway)
[05:53:54] <sanxiyn> I learned that someone in Korea is working on binding to GNU Scientific Library
[05:54:02] <mcpherrin> I do.  Though having the binaries are probably also needed :)
[05:54:14] <bjz> Diablo-D3: do you know much functional programming?
[05:54:34] <Diablo-D3> bjz: not really, functional languages are confusing
[05:54:51] <bjz> Diablo-D3: well fust might help you learn! :)
[05:55:05] <bjz> Diablo-D3: it has some functional stuff rolled in
[05:55:09] <Diablo-D3> I wanted to learn erlang once. Gladly, I only made that mistake once.
[05:55:23] <bjz> why?
[05:55:31] <bjz> erlang looks neat
[05:55:32] <Diablo-D3> Erlang has crazy syntax.
[05:55:35] <Diablo-D3> It _looks_ neat
[05:55:38] <Diablo-D3> but oh hell no 
[05:55:41] <bjz> but the semantics?
[05:55:49] <aatch> Erlang is fine if you know prolog
[05:56:09] <doomlord> its funny, because you can see functional syntax is sometimes more elegant, but the more conventional languages are burned deep into your brain already
[05:56:12] <sanxiyn> Indeed, Erlang syntax can be offputting
[05:56:13] <TD-Linux> what do you even call "crazy syntax"? other than APL
[05:56:13] *** Joins: RMF (RMF@227CE653.89DFFE83.11F731AB.IP)
[05:56:15] <strcat> sanxiyn: tbh I didn't really have to learn rust, just the borrowck stuff ;p
[05:56:23] <strcat> sanxiyn: not much to learn if you already know C++11 and haskell
[05:56:32] *** Quits: RMF (RMF@227CE653.89DFFE83.11F731AB.IP) (Quit: Textual IRC Client: www.textualapp.com)
[05:56:43] <aatch> I've been with Rust long enough that the syntax has changed a few times underneath me
[05:56:57] *** Joins: igl1 (igl@moz-C751ACE3.adsl.alicedsl.de)
[05:57:06] *** Quits: igl (igl@moz-3A232B3D.adsl.alicedsl.de) (Ping timeout)
[05:57:13] <aatch> eg &int/r -> &'r int (I think)
[05:57:14] *** Quits: dbaupp (Thunderbir@88688F45.D5A1DCF.37681C44.IP) (Ping timeout)
[05:57:19] <Diablo-D3> [01:54:44] <doomlord> its funny, because you can see functional syntax is sometimes more elegant, but the more conventional languages are burned deep into your brain already
[05:57:19] <Diablo-D3> this
[05:57:37] <Diablo-D3> hell, its not even procedural thats burned in my brain, its C flavored procedural
[05:57:56] <aatch> Yep, which is why you power through and undo all that damage
[05:57:58] *** Quits: sanxiyn (tinuviel@665E6AA3.19467A1.45C99EA8.IP) (Ping timeout)
[05:58:12] *** Joins: snadon (chatzilla@moz-EFE8FD29.mc.videotron.ca)
[05:58:25] <Diablo-D3> lobotomy isnt good idea.
[05:58:36] <doomlord> i like the idea of a langauge simply having different syntax front ends...
[05:58:44] *** Quits: igl1 (igl@moz-C751ACE3.adsl.alicedsl.de) (Ping timeout)
[05:58:46] <TD-Linux> D:
[05:58:52] <Diablo-D3> doomlord: well, thats an idea I had for seaking
[05:59:00] <Diablo-D3> the seaking compiler would have had the ability to write plugins
[05:59:03] <doomlord> would be nice if a language was defined as its ast,and you just pick the syntax that suits you
[05:59:10] *** Quits: jack (jack@EF36212C.8FA609AD.840029BC.IP) (Quit: Leaving.)
[05:59:19] <TD-Linux> that's great if you reinvent the wheel for everything
[05:59:21] *** Quits: KindOne (KindOne@786EFC2.E114B4AE.EC6A1518.IP) (Ping timeout)
[05:59:38] <TD-Linux> and don't work in groups
[05:59:48] <Diablo-D3> so the seaking compiler would pull in a list of keywords from the plugin, such as "blocks that are keyworded with foo"
[06:00:00] <Diablo-D3> and then hand the ast node for that block to the plugin
[06:00:15] <strcat> TD-Linux: well in his world the compiler can input/output to pretty printed versions of all the syntax representations ;p
[06:00:22] *** Joins: igl (igl@moz-233E476F.adsl.alicedsl.de)
[06:00:23] *** Joins: akashj87_ (akash@6B2E87A0.D90B5583.35E3DDC8.IP)
[06:00:29] <doomlord> but imagine if the sourcecode was just an AST, and each programmer just encodes/recodes it in their IDE, seeing it however makes more sense to them
[06:00:30] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Connection reset by peer)
[06:00:48] * strcat is happy with one imperfect syntax instead of 1000 imperfect ones though
[06:00:49] *** Quits: akashj87 (akash@C16F1968.3010DFE1.35E3DDC8.IP) (Ping timeout)
[06:00:50] <Diablo-D3> doomlord: you know, you just described lisp
[06:01:18] <doomlord> yes in my parallel universe, the syntax is not the compilers concern. just the language semantics
[06:01:21] <aatch> Greenspun!
[06:01:32] <Diablo-D3> aatch: yeah really, I was about to quote that
[06:01:45] <Diablo-D3> all languages eventually become shitty versions of lisp
[06:02:03] <Diablo-D3> the older I get, the more I find thats true
[06:02:18] <Diablo-D3> if I could get the speed of C out of lisp, I'd probably just give up and learn it
[06:02:18] *** Quits: SiegeLord (siege@moz-56D7E78.bstnma.fios.verizon.net) (Connection reset by peer)
[06:02:20] <mcpherrin> Well the S-expr syntax of lisp wasn't even originally intended to be the human-readable one (M-exprs were), and yet everybody just writes S-exprs :P
[06:02:23] *** Quits: akashj87_ (akash@6B2E87A0.D90B5583.35E3DDC8.IP) (Ping timeout)
[06:02:24] <doomlord> i've only dabled with it a bit, i enjoyed it more than haskell, its macro system is amazing
[06:02:27] <mcpherrin> Diablo-D3: chicken scheme.
[06:02:53] <TD-Linux> that'd be a really fun thing to mix with version control
[06:02:56] <Diablo-D3> mcpherrin: well, you're not even limited to those two
[06:02:58] <mcpherrin> Diablo-D3: or Stalin.  Both very fast scheme implementations.
[06:03:06] <Diablo-D3> someone wrote a lisp that does json-exprs
[06:03:24] <jclements> Diablo-D3: did someone say macros? You should really take a look at Racket's macro system....
[06:03:48] <Diablo-D3> isnt racket the thing that hn is written with?
[06:03:52] <mcpherrin> mmm delicious racket macros
[06:03:52] <strcat> no
[06:04:01] *** Quits: igl (igl@moz-233E476F.adsl.alicedsl.de) (Ping timeout)
[06:04:03] <mcpherrin> HN is written in arc, which runs on Mzscheme 3
[06:04:08] <Diablo-D3> ahh
[06:04:20] <mcpherrin> (racket is the successor to PLT scheme)
[06:04:22] *** Joins: sanxiyn (tinuviel@665E6AA3.19467A1.45C99EA8.IP)
[06:04:22] <jclements> are stalin and chicken still faster than Racket? I have my doubts.
[06:04:28] <Diablo-D3> hrm, this makes me wonder
[06:04:28] *** Joins: igl (igl@moz-5B96348F.adsl.alicedsl.de)
[06:04:37] <Diablo-D3> does rust have powerful macros?
[06:04:48] <aatch> Fairly.
[06:04:50] *** Joins: SiegeLord (sl@moz-56D7E78.bstnma.fios.verizon.net)
[06:04:54] <jclements> Diablo-D3: please don't use the word "powerful" in that sentence.
[06:05:06] <Diablo-D3> okay fine, is it as powerful as c preprocessor?
[06:05:14] <doomlord> i've found rusts macros interesting, they can do some things C cant
[06:05:19] <aatch> Depends on what you mean.
[06:05:25] <jclements> Diablo-D3: please don't use the word "powerful" in that sentence. ;)
[06:05:30] <Sodel_the_V> Diablo-D3: It's not just simple text substitution
[06:05:39] <jclements> really, the word "powerful" has nearly no meaning in the context of a macro system.
[06:05:39] <aatch> CPP is a textual pre-processor
[06:05:47] <mcpherrin> jclements: Dunno, I haven't benchmarked in a while.  I mostly use racket and haven't touched chicken/stalin in a while.
[06:05:49] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[06:05:59] <aatch> whereas Rust works on syntax elements.
[06:06:03] <jclements> Most of the work in the last 30 years of macro systems is not about making them powerful, but making them usable and hygienic.
[06:06:05] <TD-Linux> C++ can't actually be implemented with a preprocessor anymore
[06:06:06] <doomlord> macro systems are used to patch over gaps in a language, but languages have gaps...
[06:06:07] <Diablo-D3> re racket, chicken, and stalin, they sound like very small communities
[06:06:20] <sanxiyn> Diablo-D3: ?
[06:06:37] <jclements> Diablo-D3: YES. they are small communities. Racket is much larger than the other two, I claim, but it's definitely a small community.
[06:06:52] <Diablo-D3> well, I learned Java, wrote a program, decided I hate Java very much, but I miss the size of Java's community
[06:06:54] <jclements> full disclosure: in my other life, I'm a racket developer.
[06:06:57] <mcpherrin> racket is arguably larger than rust?  (At least, in my racket-university-zone)
[06:07:01] <doomlord> TD-Linux - you say that C++ can't be implemented by converting to C now?
[06:07:06] <sanxiyn> mcpherrin: It probably is
[06:07:13] <Diablo-D3> mcpherrin: I dunno man, rust is starting to convert people pretty fast
[06:07:19] <TD-Linux> doomlord, actually I misinterpreted aatch, but yes that's true
[06:07:29] <doomlord> TD-Linux - which parts defeat it
[06:07:29] <Diablo-D3> it looks like rust might kill Go
[06:07:38] <doomlord> is it just exception handling
[06:07:39] *** Parts: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Killing koopas in another castle)
[06:07:53] <sanxiyn> On the other hand, r/racket has 466 people and r/rust 878 :)
[06:07:55] <strcat> Diablo-D3: doubt that, much different languages
[06:07:55] <sanxiyn> (Wrong metric!)
[06:08:01] <jclements> Take a look at racket compared to rust:
[06:08:02] <jclements> http://www.google.com/trends/explore#cat=0-5-31&q=racket%2C%20Rust&cmpt=q
[06:08:28] <mcpherrin> The number of universities teaching racket >> rust ;)
[06:08:34] <sanxiyn> jclements: Oh, that is interesting...
[06:08:36] <mcpherrin> (as in, I assume there are 0 using rust)
[06:08:42] <jclements> rust is on a hell of a tear.
[06:08:48] <Diablo-D3> why have I never heard of racket?
[06:08:55] <strcat> jclements: it's just an integer underflow
[06:09:01] <TD-Linux> doomlord, well yes, and a lot of things can't be implemented as efficiently either
[06:09:01] <Diablo-D3> strcat: lol
[06:09:17] <jclements> strcat: :)
[06:09:20] <TD-Linux> e.g. virtual functions
[06:09:38] <Diablo-D3> out of racket, chicken, and stalin, which are implemented with llvm
[06:09:40] <doomlord> TD-Linux - 'as efficiently' i know there are some different aliasing assumptiions - but you have __restrict to deal with that... anything else
[06:10:05] <jclements> Diablo-D3: Racket used to be called PLT Scheme. It's been used mostly as a language research platform and in education. Like I said before, it's a small-ish community.
[06:10:09] <TD-Linux> well it's hard to construct the same jumptables that C++ uses in C
[06:10:18] <Diablo-D3> are ANY lisps implemented with llvm?
[06:10:39] <doomlord> i know its very verbose, but isn't it just convinience ... looking up values, saving repeated arguemnt
[06:10:49] <TD-Linux> anyway it's my bedtime... use google :)
[06:10:50] <mcpherrin> Diablo-D3: Chicken outputs C, which you could use Clang on?
[06:10:51] <doomlord> object->vtable->function(object,args...)
[06:10:55] <Diablo-D3> mcpherrin: hrrrrm.
[06:11:03] <sanxiyn> Diablo-D3: Why would Lisps use LLVM?
[06:11:05] <jclements> Diablo-D3: can't speak for all lisps, but llvm is very continuation-unfriendly.
[06:11:15] *** Joins: KindOne (KindOne@786EFC2.E114B4AE.EC6A1518.IP)
[06:11:16] <sanxiyn> jclements: Also GC
[06:11:18] <sanxiyn> GC is important
[06:11:19] <Ralith> Diablo-D3: I know a guy writing a Common Lisp compiler on LLVM
[06:11:31] <Ralith> jclements: what've continuations got to do with llvm?
[06:11:39] <jclements> sanxiyn: yes, absolutely.
[06:11:39] <Diablo-D3> sanxiyn: Im against having 9000 compilers
[06:11:53] <sanxiyn> Diablo-D3: LLVM is not general enough yet to support many languages
[06:11:56] <Diablo-D3> we should have one common compiler framework that is very well written
[06:12:03] <doomlord> i like the idea of multiple frontends sharing a common backend
[06:12:05] <Diablo-D3> someday I hope llvm satisfies the well written part
[06:12:05] <sanxiyn> C-- tried to be one, but failed
[06:12:06] <Ralith> sanxiyn: GC and LLVM are compatible; few lisp impls optimize to the point where the flaws we've discussed at length matter.
[06:12:19] <sanxiyn> Ralith: Well there is SBCL
[06:12:29] <jclements> Ralith: continuation manipulations require you to be able to rewrite the stack drastically. Even tail-calling is hard, and that's about the simplest continuation manipulation there is.
[06:12:29] <Ralith> yes, and the SBCL people have been seriously considering LLVM
[06:12:29] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[06:12:32] <sanxiyn> I am sad that C-- went nowhere...
[06:12:47] <Ralith> in lieu of LLVM, all languages have to ultimately run on hardware ISAs
[06:12:49] <Ralith> LLVM IR is easier to target
[06:12:56] <sanxiyn> (Both current OCaml and GHC backend started from C--, I think)
[06:13:06] <sanxiyn> (Traces are left in names)
[06:13:14] <Diablo-D3> what would racket and chicken offer me that rust doesnt?
[06:13:23] <Ralith> jclements: well, LLVM implements decent TCO all on its own, so that's not a big deal
[06:13:30] <doomlord> lisps and rust are chalk and cheese, right
[06:13:37] <mcpherrin> Diablo-D3: more functionalish programming?  Mature langauges that are well-defined?
[06:13:52] *** Quits: igl (igl@moz-5B96348F.adsl.alicedsl.de) (Ping timeout)
[06:14:06] <Diablo-D3> the reason I stick with C is because I can do async message passing, futures, and do it quickly
[06:14:19] <Diablo-D3> and the language doesnt have absurd broken syntax *cough*c++*cough*
[06:14:48] <doomlord> i can stick with C++ if i murder everyone who insists everything has to be in classes
[06:15:06] <jclements> Ralith: continuation work requires a lot more than just tail-calling. Also, forgive me for doubting, but I suspect that LLVM's tail-calling hardware isn't quite up to snuff.  That's just me trash-talking, though.
[06:15:07] <aatch> doomlord, so you mean people that write C++ as if it's Java?
[06:15:11] <doomlord> yes
[06:15:15] *** Joins: igl (igl@moz-726479A.adsl.alicedsl.de)
[06:15:22] <Diablo-D3> yeah, I hate java for that
[06:15:22] <Ralith> jclements: hardware?
[06:15:27] <Diablo-D3> I used to think I hated c++ the most
[06:15:27] <aatch> Well there is a reason I hate Java
[06:15:32] <Ralith> jclements: I'm still not sure I see why continuations are coming up at all...
[06:15:32] <Diablo-D3> I think Java ties for that spot now
[06:15:36] <erickt> brson: ping
[06:15:49] <jclements> Ralith: no, no, I'm a software guy. When I say "hardware", I really mean... uh... software.
[06:15:53] <Ralith> :P
[06:15:56] <doomlord> so long as i can remember C++ as a better C is perfectly valid...i can stick with C++.
[06:15:57] <jclements> Ralith: wrt continuations...
[06:16:27] <doomlord> if in doubt, write a functoin, not a method
[06:16:29] <brson> erickt: pong
[06:16:37] <erickt> hey there :)
[06:16:41] <Jeaye> doomlord: That's fair. I wish more C devs thought similarly.
[06:16:49] <Ralith> jclements: continuations are a scheme thing, not a lisp thing
[06:16:53] <jclements> Ralith: capturing a continuation requires the ability to slice off and save a portion of the stack (ideally lazily). Invoking a continuation requires you to replace part or all of the stack.
[06:17:00] <Diablo-D3> C++ without templates and without multiple inheritence is a fine better C
[06:17:05] <Ralith> yes, I know continuations are a bear and a half to compile
[06:17:08] <Diablo-D3> problem is, people keep doing all sorts of nutty shit
[06:17:11] <jclements> Ralith: well, the lisp folks think of a scheme as a lisp....
[06:17:12] <Diablo-D3> like who the hell invented friend classes
[06:17:18] <erickt> brson: so I got my remove-drop patch done (yay!) but it's failing on one test (boo!): https://github.com/mozilla/rust/pull/6148
[06:17:21] <Ralith> jclements: and a square is a rectangle.
[06:17:21] <Diablo-D3> I want to beat him with a bat
[06:17:23] <Jeaye> templates can really make some things nice.
[06:17:30] <jclements> Ralith: touche
[06:17:30] <Ralith> jclements: that doesn't mean that 'continutions are hard' => 'llvm is bad for lisp'
[06:17:34] <sanxiyn> Diablo-D3: I like C++ templates
[06:17:38] <doomlord> i liked the idea that in C ,if something isn't in the header its private. if its in the header, its public. easy!
[06:17:40] <erickt> the problem is this bit of code: https://github.com/erickt/rust/commit/0b16a6ff43c1694e23002c19699e6382660453db
[06:17:46] <mcpherrin> Just make everything public and don't use inheritence.
[06:18:15] <erickt> brson: it's causing this test to fail: https://github.com/mozilla/rust/blob/master/src/test/run-pass/issue-3168.rs
[06:18:17] <Diablo-D3> rust is still meant for systems programming, though, right?
[06:18:26] <sanxiyn> Diablo-D3: It is
[06:18:31] <doomlord> what attracts me to rust is it fixes my most specific frustration with C++
[06:18:39] <sanxiyn> doomlord: What are they?
[06:18:41] <mcpherrin> Diablo-D3: yeah, though it still relies on a runtime so you couldn't quite yet write an OS in it
[06:18:43] *** Quits: lmandel (lmandel@moz-9CE00FC0.holiday-inn-express.mozilla.hq) (Ping timeout)
[06:18:46] <Diablo-D3> Im pretty sure I wouldnt want to use a lisp for that
[06:18:48] <erickt> brson: do you happen to know what I did wrong? or is the Drop trait not able to handle this situation?
[06:18:55] <Diablo-D3> and yes, Im aware of hardware lisp machines. they scare me.
[06:19:14] <doomlord> C++ syntax&culture herds you toward making methods, but they increase coupling, and worsen the problem of header files.
[06:19:29] <Diablo-D3> doomlord: yeah thats the thing
[06:19:30] <doomlord> if you could just bolt methods on whenever you want ,  it wouldn't be a problem
[06:19:32] <Diablo-D3> thats why I quit java
[06:19:34] <Diablo-D3> the language isnt THAT horrid
[06:19:42] <Diablo-D3> its the community that keeps writing shit code with it
[06:19:51] <brson> erickt: there is an unknown bug that makes Drop not work here :(
[06:19:53] <doomlord> it would be so simple to "fix" c++. just add those "impl { }" blocks
[06:19:59] <sanxiyn> doomlord: Ah, you mean extension methods? Yes I agree it is great improvement over C++
[06:20:03] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[06:20:03] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/L5QP2A
[06:20:03] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[06:20:10] <Diablo-D3> I want a language that has a good sized community but also a smart one
[06:20:15] <Diablo-D3> I dont think I can have both
[06:20:15] <doomlord> i discovered C# has them
[06:20:20] <erickt> brson: nooooo
[06:20:24] *** Joins: igl1 (igl@moz-512C309D.adsl.alicedsl.de)
[06:20:24] <Diablo-D3> doomlord: c# is worse than java as a language
[06:20:31] <doomlord> wow.
[06:20:51] <doomlord> most opinions i've heard are opposite, eg c# has a few things java is lacking
[06:20:56] <sanxiyn> doomlord: Objective-C added extension methods, so I am sure it can be added to C++ too
[06:21:00] <erickt> brson: that's the lone failure I'm getting with this patch series :(
[06:21:01] <Diablo-D3> it does, but it also has a slower runtime
[06:21:03] <sanxiyn> doomlord: Objective-C categories are well done
[06:21:06] <Diablo-D3> and its not multiplatform
[06:21:12] <Diablo-D3> mono is NOT an acceptable answer
[06:21:15] <sanxiyn> Diablo-D3: C# is multiplatform
[06:21:21] <sanxiyn> It *is* an acceptable answer
[06:21:26] <Diablo-D3> not if you want a gui app
[06:21:26] *** Quits: igl (igl@moz-726479A.adsl.alicedsl.de) (Ping timeout)
[06:21:33] <Diablo-D3> and dont want to use gtk#
[06:21:42] <sanxiyn> That is a strange combination, IMO
[06:21:48] <doomlord> note that when i say "bolt methods on" i really mean member-functions - i dont expect to be able to change the vtable format for virtuals; i know that objC is more dynamic with its message-maps or whatever they're called
[06:21:57] <sanxiyn> Also the usual way to handle that is write separate GUIs for each platform
[06:22:05] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[06:22:07] <Diablo-D3> mono also still doesnt implement the c# directx api in terms of opengl
[06:22:09] <doomlord> i know people who've got C# onto most game consoles
[06:22:09] <strcat> sanxiyn: or just use qt ;p
[06:22:32] <Diablo-D3> doomlord: well on xbox, the xbox os implements enough of whats needed from windows to make it work
[06:22:42] <Diablo-D3> doomlord: so c# on xbox is supported by microsoft
[06:22:44] <doomlord> i'm an ex-game developper, my experience has been C/C++ everywhere
[06:22:54] <Diablo-D3> but everywhere else, its fucking with mono
[06:23:02] <sanxiyn> Diablo-D3: Well C# also runs on PS3, Wii, etc.
[06:23:03] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[06:23:03] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/YcIIGw
[06:23:03] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[06:23:03] <doomlord> this is a nagging doubt with rust, i.e. the effort to get it onto *all* platforms
[06:23:06] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[06:23:06] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/64f7RA
[06:23:06] <ghrust> 13rust/06auto 140b377e5 15Daniel Micay: clear *everything* from the tmp directory...
[06:23:06] <ghrust> 13rust/06auto 1417ca136 15bors: auto merge of #6139 : thestinger/rust/tmp, r=graydon...
[06:23:08] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[06:23:10] <Diablo-D3> sanxiyn: yup, through mono
[06:23:13] <doomlord> but lets see how it goes with iOS
[06:23:14] <sanxiyn> (Disclosure: I am a Mono contributor)
[06:23:21] <Diablo-D3> I tried going the c# route after I rejected java
[06:23:31] <Diablo-D3> mono made my life hell
[06:23:38] <sanxiyn> Diablo-D3: I don't understand what is your problem with Mono, really
[06:23:40] <Diablo-D3> I dont own a windows box, I have no interest in using windows
[06:23:43] <Ralith> sanxiyn: incidentally, any news on you getting to work on LLVM's GC stuff?
[06:23:48] <doomlord> i'll never touch C# or java. i wrote a tiny amount of java to interact with the Android NDK
[06:23:51] <Diablo-D3> but I want a unified language where all the libraries I use work on windows
[06:24:08] <doomlord> if i had to do something onthe CLR,i'd willingly look at F#
[06:24:09] <Diablo-D3> the UI thing is what pissed me off though
[06:24:13] <erickt> brson: well I guess it's not something trivial so I'm off to bed. gnight all!
[06:24:20] <Diablo-D3> if windows gets to have a UI framework for C#, and I cant use it on linux, _fuck no_
[06:24:26] <Diablo-D3> I am not using gtk# on windows. no.
[06:24:28] <Diablo-D3> never
[06:25:04] <sanxiyn> Diablo-D3: Eh... so other languages have better cross-platform UI story?
[06:25:09] <sanxiyn> (I conceed that there is Qt)
[06:25:28] <Diablo-D3> sanxiyn: java does
[06:25:34] <sanxiyn> I mean, you usually don't evaluate language by its GUI library. I can't understand why you are doing so wrt C#
[06:25:35] <doomlord> seems each platform has its perfered language+UI combination
[06:25:45] <Diablo-D3> the eclipse ui toolkit uses native widgets on windows and osx, and gtk on linux
[06:25:47] <sanxiyn> Diablo-D3: You mean SWT?
[06:25:55] <Diablo-D3> yeah SWT I think
[06:26:12] <strcat> gtk3 barely works on windows and os x now
[06:26:14] <sanxiyn> ok C# has no SWT yet, I am not sure why you are badmouthing C# because of that
[06:26:16] <strcat> let alone looking native
[06:26:21] <Diablo-D3> Im evaluting C# on the GUI library because at the time I wanted to code a GUI app
[06:26:25] <strcat> but qt looks/acts fine everywhere
[06:26:26] <sanxiyn> Java had no SWT for a long time too
[06:26:27] <Diablo-D3> I have no interest in using it for actual performance
[06:26:28] <doomlord> some people told me crossplatform GUI is a waste of time - the platform IS the gui.  mac user wants Mac gui, windows user wants Windows GUI, etc... 
[06:26:34] <Diablo-D3> sanxiyn: yes, and java sucked because of it
[06:26:41] <brson> erickt: nite!
[06:26:41] <strcat> doomlord: nothing looks "native" on windows
[06:26:47] <Diablo-D3> doomlord: exactly
[06:26:52] <Diablo-D3> strcat: sadly this is true
[06:26:59] <snowmantw> BSOD is native in windows
[06:26:59] <Diablo-D3> microsoft needs to crack down on that
[06:27:00] <mcpherrin> Having the right widgets does not a native app make.
[06:27:16] <strcat> Diablo-D3: their own applications are inconsistent ;p
[06:27:18] <Diablo-D3> there is a fucking HIG, follow it
[06:27:23] <strcat> they don't use consistent widgets or anything else
[06:27:23] <Diablo-D3> strcat: I agree
[06:27:33] <Diablo-D3> at least on apple everything but itunes seems to follow shit
[06:28:04] <Diablo-D3> or steam, steam is ugly no matter what platform you're on
[06:29:05] <Diablo-D3> I dunno, Im tempted to just never write a GUI
[06:29:18] <strcat> nothing looks as bad as tk's look on linux
[06:29:21] *** Joins: jack (jack@EF36212C.8FA609AD.840029BC.IP)
[06:29:21] <Diablo-D3> just make everything into a webapp
[06:29:31] <sanxiyn> I found that C# has generics, extension methods, lightweight code generation, mainstream delimited continuation (aka yield), quasiquotation (aka linq), and all around tasteful choices
[06:29:34] <sanxiyn> Good language
[06:29:39] *** Joins: SimonSapin (simon@moz-C4A83ED9.net-89-2-126.rev.numericable.fr)
[06:29:44] <sanxiyn> (I never programmed C# on Windows though)
[06:29:56] <Diablo-D3> sanxiyn: yeah but I cant build desktop apps with C#
[06:30:00] <Diablo-D3> which is what I wanted to do
[06:30:08] <sanxiyn> C# also got checked integer overflow
[06:30:25] <sanxiyn> Diablo-D3: Yeah, never tried to use C# for that
[06:30:39] <Diablo-D3> I dunno, I just want to write and compile an app once and have it work everywhere
[06:30:50] <Diablo-D3> java successfully gave me that
[06:31:42] <Diablo-D3> I dont want to have to own 9000 machines just to package my app
[06:32:21] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[06:32:32] <Diablo-D3> so I think if I pick up rust, Im going to go back to the whole thing of releasing the source and telling anyone who asks for binaries to piss off
[06:32:53] <strcat> you can cross-compile
[06:32:58] <doomlord> or just give binary on your favourite platform?
[06:33:01] <Diablo-D3> strcat: doesnt help
[06:33:12] <Diablo-D3> you should test the binary before releasing it
[06:33:22] <Diablo-D3> and wine is not a suitable test platform for windows binaries
[06:33:38] <Jeaye> I just provide a way to conveniently build on different platforms. No point wasting time making my own binaries.
[06:33:48] <Diablo-D3> Jeaye: yeah exactly
[06:33:54] <SiegeLord> Shouldn't you test your Java app on different platforms too? :P
[06:33:55] <Jeaye> Have them ./configure && make && sudo make install
[06:34:02] <sanxiyn> Ralith: I probably won't work on LLVM/GC anytime soon; is busy with Rust compiler
[06:34:04] <Jeaye> Or whatever the platform does.
[06:34:09] <Diablo-D3> SiegeLord: nope, because its a java bug if it doesnt work
[06:34:55] *** Quits: jack (jack@EF36212C.8FA609AD.840029BC.IP) (Ping timeout)
[06:34:58] <SiegeLord> That seems overly simplistic
[06:34:59] <strcat> Diablo-D3: by that logic wouldn't it be a rustc bug if cross-compiling didn't work?
[06:35:07] <Ralith> sanxiyn: aw
[06:35:28] <Diablo-D3> SiegeLord: not all apps do OS-specific things.
[06:35:32] <Ralith> sanxiyn: I understand that good GC is a major TODO for rust
[06:35:40] <bjz> brson: should I ask strcat to review that commit?
[06:35:50] <Diablo-D3> strcat: possibly.
[06:35:56] <bjz> brson: *PR
[06:36:10] <Diablo-D3> strcat: but it wouldnt be a rust bug if my app compiles and fails to run properly and the bug cant be traced to a bug in the rust runtime
[06:36:36] <Diablo-D3> rust isnt a vm language, the same things dont apply to a language like java
[06:36:40] <sanxiyn> Ralith: Yes
[06:37:03] <strcat> Diablo-D3: it can run in a VM (LLVM's JIT), doesn't make it more or less portable
[06:37:18] <Diablo-D3> java was the first language that could say "fast" and "run anywhere" in the same sentence
[06:37:32] <Diablo-D3> I just dont think its worth the trouble anymore
[06:38:16] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: zzzZZZzzz)
[06:38:29] <sanxiyn> Ralith: Currently I am working on SIMD and OpenCL extensions for Rust
[06:38:36] <sanxiyn> After that, probably will look at C++ binding
[06:38:36] <Ralith> ooo
[06:38:44] <Ralith> exciting work
[06:38:48] <sanxiyn> Yup
[06:38:57] * sanxiyn gets paid to do so! How wonderful.
[06:39:25] * Ralith envy
[06:39:31] <brson> bjz: which pull request?
[06:39:32] <bjz> sanxiyn: are you working with Samsung?
[06:39:38] <sanxiyn> bjz: Yes
[06:39:41] *** Joins: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk)
[06:39:43] <bjz> brson: https://github.com/mozilla/rust/pull/6147
[06:39:46] <SiegeLord> sanxiyn, What constitutes an OpenCL extension? Why would that be better than using the OpenCL API?
[06:39:50] <Ralith> looking at grad school for the express purpose of getting paid (a stipend, admittedly) to do compilers work
[06:39:51] <bjz> sanxiyn: neat :)
[06:39:52] *** Quits: thou (thou@moz-1C1CA9F7.fasttrackcomm.net) (Input/output error)
[06:40:30] <sanxiyn> SiegeLord: The idea is to compile some subset of Rust to OpenCL. Not sure how it will work out.
[06:40:36] <sanxiyn> SiegeLord: Mostly modelled after C++ AMP
[06:41:00] <sanxiyn> SiegeLord: see https://github.com/mozilla/rust/issues/3814
[06:41:10] <Diablo-D3> [01:54:44] <doomlord> its funny, because you can see functional syntax is sometimes more elegant, but the more conventional languages are burned deep into your brain already
[06:41:14] <Diablo-D3> errrrrrrr
[06:41:21] <Diablo-D3> [02:37:04] <sanxiyn> Ralith: Currently I am working on SIMD and OpenCL extensions for Rust
[06:41:27] <Diablo-D3> sanxiyn: reeeeallllyyy?
[06:41:35] <sanxiyn> Diablo-D3: Eh, yes?
[06:42:03] <sanxiyn> Diablo-D3: If you have comments, I'd appreciate input on issue tracker
[06:42:07] <sanxiyn> https://github.com/mozilla/rust/issues/3499 and
[06:42:07] <sanxiyn> https://github.com/mozilla/rust/issues/3814
[06:42:17] <Diablo-D3> sanxiyn: I just want to use them =P
[06:42:22] <sanxiyn> Ah ok
[06:42:35] <SiegeLord> So far I've been dynamically creating OpenCL kernels at runtime so the entire idea seems a bit funny to me... but I guess it's interesting
[06:42:52] <sanxiyn> SiegeLord: Oh you are generating OpenCL code at runtime? I see
[06:43:07] *** Joins: seth (seth@moz-D840E602.dsl.static.sonic.net)
[06:43:08] <Diablo-D3> huh, I like that idea too
[06:43:24] <Diablo-D3> the app Im currently famous for is written in java and uses opencl
[06:44:10] <sanxiyn> Diablo-D3: Oh, interesting app
[06:44:37] <Diablo-D3> I do not want to use java anymore
[06:44:37] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[06:44:38] * sanxiyn is an early Bitcoin adopter
[06:44:56] <Diablo-D3> sanxiyn: oh hi =P
[06:45:05] * Diablo-D3 is a very early bitcoin adopter
[06:45:25] <sanxiyn> (early 2011)
[06:45:26] * mcpherrin sold my bitcoins when they spiked and hit $10 -- I was sure they were gonna crash :-(
[06:45:26] *** Quits: seth (seth@moz-D840E602.dsl.static.sonic.net) (Input/output error)
[06:45:32] <sanxiyn> Diablo-D3: When?
[06:45:43] *** Parts: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Killing koopas in another castle)
[06:45:43] <Diablo-D3> I was one of the first 100 users
[06:45:48] <sanxiyn> Oh
[06:45:58] <Diablo-D3> mined 650 BTC on a c2d e8500 @ 3.16ghz that wasnt even on 24/7
[06:46:07] <sanxiyn> I started right before GPU mining started
[06:46:26] <Diablo-D3> mcpherrin: heh, I sold quite a few below $5 because it was absurd anyone was paying that much
[06:50:58] <sanxiyn> I am also interested in beefing up std::par
[06:51:08] <Diablo-D3> par?
[06:51:20] <sanxiyn> parallel
[06:51:23] <sanxiyn> http://static.rust-lang.org/doc/std/par.html
[06:51:53] <Diablo-D3> btw, http://kentonv.github.io/capnproto/
[06:51:59] <Diablo-D3> can I do that natively in rust?
[06:53:04] <sanxiyn> Which part?
[06:55:10] <Diablo-D3> protocol buffers/thrift, but without the insane overhead, and using an actual compressor instead of stupid shortcuts
[06:55:32] <sanxiyn> At the minimum, std::par should have Intel TBB's parallel_reduce analog
[06:55:39] <sanxiyn> (Currently only have parallel_for analog)
[06:55:45] <Diablo-D3> fun fact: I can serialize things into json, lz4 the json, and decompress and parse the lz4 on the other side?.
[06:56:14] *** Joins: haard (fredrik@18E6EC45.6A26450D.BE04C429.IP)
[06:56:23] <Diablo-D3> and it will both be smaller compressed and the cost of serialization, compression, decompression, and parsing will be faster than thrift or protocol buffers
[06:56:32] <Diablo-D3> why do people _use_ these things, its nuts
[06:57:43] <Diablo-D3> cap'n proto seems to do this but instead of json something largely thats just specifically planned out structs
[06:58:06] <Diablo-D3> I want an easy to implement wire and disk format that can be implemented in other languages if need be
[06:58:34] <sanxiyn> Can't you use protobuf with compression too?
[06:58:48] <Diablo-D3> sanxiyn: "no"
[06:58:58] <Diablo-D3> protobuf and thrift both try to half ass a compressor
[06:59:00] <mcpherrin> capn' proto seems reasonably excellent.
[06:59:11] <Diablo-D3> and they do it much slower and with worst results
[06:59:30] <mcpherrin> (I thought capn' proto was an april fools joke last time I saw it, just because of that infinitely faster joke)
[06:59:39] <Diablo-D3> mcpherrin: nope, its real
[06:59:59] <sanxiyn> (I thought Google used protobuf with snappy)
[07:00:34] <Diablo-D3> sanxiyn: they might internally
[07:00:51] <Diablo-D3> but protobuf still has too much overhead in the uncompressed format
[07:01:33] <Diablo-D3> snappy didnt exist when protobuf was invented
[07:02:43] <Diablo-D3> basically, what I want is a wire format for messages that isnt rust-dependent but built into rust
[07:03:50] <sanxiyn> capnproto seems to be a good idea
[07:05:12] <Diablo-D3> yeah, I havent played with it yet, but it looks impressive
[07:05:17] <Diablo-D3> kind of a shame its written in c++ though
[07:06:08] *** Quits: jclements (jclements@moz-20AD2EFB.dsl.static.sonic.net) (Quit: jclements)
[07:08:16] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.0)
[07:08:20] <tiffany> wait, protobuf is slow?
[07:08:53] <mcpherrin> tiffany: slow is a relative term.
[07:09:05] <tiffany> yes
[07:09:10] <mcpherrin> (If you're a python developer, protobuf is blazingly fast)
[07:09:23] *** Quits: brson (brson@E9CDE21E.991753BB.CA4D1600.IP) (Quit: leaving)
[07:09:47] <tiffany> I'm primarily a C programmer, I ended up writing my own serialisation functions for my game engine
[07:10:08] <Diablo-D3> tiffany: protobuf is slower than it should be
[07:10:15] <sanxiyn> tiffany: A lot of people seem to do that
[07:10:30] <Diablo-D3> yeah
[07:10:32] <Diablo-D3> but that becomes stupid fast
[07:10:39] <Diablo-D3> and its largely redundant
[07:10:57] <Diablo-D3> I'd rather just have something like capn proto built into rust
[07:11:07] <Diablo-D3> it'd save me a lot of time on network apps
[07:12:05] <sanxiyn> I found GDC 2013 presentation from Blizzard interesting
[07:12:06] <sanxiyn> http://rumsey.org/GDC2013/JAM%20Presentation%20GDC%20Final.pdf
[07:12:54] <mcpherrin> Diablo-D3: a starting point would be "flatpipes" existing in rust now.
[07:15:50] *** Joins: seth (seth@moz-D840E602.dsl.static.sonic.net)
[07:17:11] <sanxiyn> Diablo-D3: You may be interested in http://blinkprotocol.org/
[07:21:00] *** Joins: bEcker (Thunderbir@moz-3F74B132.resnet.ucsc.edu)
[07:21:48] *** Quits: seth (seth@moz-D840E602.dsl.static.sonic.net) (Ping timeout)
[07:22:41] *** zz_kimundi is now known as kimundi
[07:23:56] *** Quits: SiegeLord (sl@moz-56D7E78.bstnma.fios.verizon.net) (Quit: It's a joke. It's all a joke.)
[07:24:37] *** Quits: bEcker (Thunderbir@moz-3F74B132.resnet.ucsc.edu) (Ping timeout)
[07:25:14] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[07:26:03] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[07:26:03] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/64f7RA
[07:26:03] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[07:26:35] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[07:26:57] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[07:27:48] *** Quits: doomlord (doomlod@moz-92EDFF3A.range31-52.btcentralplus.com) (Connection reset by peer)
[07:28:40] *** Joins: snearch (snearch@moz-5548BDA3.pool.mediaways.net)
[07:28:58] *** Quits: igl1 (igl@moz-512C309D.adsl.alicedsl.de) (Ping timeout)
[07:29:03] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[07:29:03] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/RvVYnA
[07:29:03] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[07:29:06] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[07:29:06] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/6MhWpw
[07:29:06] <ghrust> 13rust/06auto 145777c2e 15gareth: Convert most of rust_run_program.cpp to rust (issue #2674).
[07:29:06] <ghrust> 13rust/06auto 141535cf2 15bors: auto merge of #6140 : Dretch/rust/run-with-rust, r=graydon...
[07:29:06] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[07:29:15] *** Joins: igl (igl@moz-37DB1834.adsl.alicedsl.de)
[07:29:32] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[07:29:47] *** Joins: jack (jack@EF36212C.8FA609AD.840029BC.IP)
[07:30:46] *** Quits: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP) (Ping timeout)
[07:30:51] *** Quits: devbug (quassel@moz-E1DE087C.bchsia.telus.net) (Client exited)
[07:32:11] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[07:32:37] *** Quits: aatch (aatch@moz-2BB0AC01.cable.telstraclear.net) (Ping timeout)
[07:32:45] *** Joins: bEcker (Thunderbir@moz-597F0F80.resnet.ucsc.edu)
[07:34:46] *** Joins: jclements (jclements@moz-20AD2EFB.dsl.static.sonic.net)
[07:35:26] *** Joins: ysuzuki (ysuzuki@moz-60FA9D06.net119083145.t-com.ne.jp)
[07:35:34] *** Joins: aatch (aatch@moz-2BB0AC01.cable.telstraclear.net)
[07:35:42] *** Quits: jack (jack@EF36212C.8FA609AD.840029BC.IP) (Ping timeout)
[07:37:04] *** Quits: heftig (heftig@moz-2073F5D0.dip0.t-ipconnect.de) (Ping timeout)
[07:37:10] *** Quits: jclements (jclements@moz-20AD2EFB.dsl.static.sonic.net) (Quit: jclements)
[07:37:48] *** Quits: bEcker (Thunderbir@moz-597F0F80.resnet.ucsc.edu) (Quit: bEcker)
[07:43:39] *** Joins: heftig (heftig@moz-3E35CBE8.dip0.t-ipconnect.de)
[07:50:01] *** Joins: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP)
[07:55:23] *** Joins: gopi (gopi@moz-4B2225B3.hsd1.ca.comcast.net)
[07:59:02] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[07:59:02] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 141535cf2 to 1417ca136: 02http://git.io/N3iJvQ
[07:59:02] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[07:59:05] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[07:59:05] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/Ia1aWA
[07:59:05] <ghrust> 13rust/06auto 14782e06e 15Tim Chevalier: core/std: Fix race condition in os::mkdir_recursive tests...
[07:59:05] <ghrust> 13rust/06auto 14bfccfdc 15bors: auto merge of #6144 : catamorphism/rust/mkdir_recursive-breakage, r=thestinger...
[07:59:06] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[08:00:41] <Diablo-D3> [03:15:46] <sanxiyn> Diablo-D3: You may be interested in http://blinkprotocol.org/
[08:00:42] *** Quits: victorporof (victorporo@9310F178.477C3F8E.79933D60.IP) (Quit: victorporof)
[08:00:45] <Diablo-D3> that looks interesting too
[08:00:50] <Diablo-D3> [03:11:29] <mcpherrin> Diablo-D3: a starting point would be "flatpipes" existing in rust now.
[08:00:54] <Diablo-D3> flatpipes?
[08:01:11] <aatch> Diablo-D3, it's a module in the standard library
[08:01:12] <sanxiyn> Diablo-D3: http://static.rust-lang.org/doc/std/flatpipes.html
[08:01:15] <mcpherrin> https://github.com/mozilla/rust/blob/master/src/libstd/flatpipes.rs
[08:01:31] <Diablo-D3> sanxiyn: ahh, interesting
[08:01:49] <Diablo-D3> but its based on rust internals, right? I cant feed these to another language without difficulty?
[08:03:27] *** Quits: gopi (gopi@moz-4B2225B3.hsd1.ca.comcast.net) (Ping timeout)
[08:03:30] *** Joins: true_droid (Adium@moz-123FD9B8.beck.volia.net)
[08:04:01] <sanxiyn> Diablo-D3: At the moment, no, it's not language independent format
[08:04:32] <Diablo-D3> yeah, thats what I really want
[08:04:38] <Diablo-D3> although I wish all people would just use rust
[08:04:46] <Diablo-D3> we both know thats not going to happen
[08:04:57] <Diablo-D3> there is, and always will be, people who use shitty languages
[08:05:30] <mcpherrin> Well, as I said, a starting point.
[08:07:37] <doomlord_> people have to choose languages that make them employable usually, i think.
[08:08:45] <Ralith> you just need to find the right employer
[08:08:54] <Diablo-D3> yeah what Ralith 
[08:08:59] <Diablo-D3> or work for google and create your own language
[08:09:01] *** Joins: dbaupp (Thunderbir@moz-C599B201.lns20.syd6.internode.on.net)
[08:09:03] * Diablo-D3 looks at rob pike
[08:09:42] <doomlord_> if i get another job it will 99% be likely C++
[08:09:45] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[08:10:07] <Luqman> waiting for llvm + stage2 sucks :(
[08:10:15] <mcpherrin> Diablo-D3: We can't all be rob pike :p
[08:10:26] <aatch> mcpherrin, says you
[08:10:33] <Diablo-D3> I tried to be rob pike
[08:10:35] *** aatch is now known as rob_pike
[08:10:45] <rob_pike> I AM rob pike :P
[08:10:54] <Diablo-D3> then I realized I DONT want to code a language
[08:10:56] *** rob_pike is now known as aatch
[08:11:06] <aatch> Nevermind, that sucked
[08:11:23] <doomlord_> i always wanted to code a language but found rust implements my spec
[08:11:30] <aatch> doomlord_, same here
[08:11:49] <aatch> I tend to start with semantics, and most of the semantics are what Rust ends up with
[08:11:59] <mcpherrin> If you want to "code a language" as a learning exercise, a little c-like language isn't too hard
[08:12:39] <sanxiyn> Rust does not implement my spec, but it will be a great language to implement my language
[08:12:40] <sanxiyn> :)
[08:15:15] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[08:15:31] <sanxiyn> In the Rust user meetup, we had this joke:
[08:15:40] <sanxiyn> 1. People learn Java to get employed
[08:16:24] * aatch is on the edge of his seat
[08:16:37] <sanxiyn> phone call :(
[08:16:45] <mcpherrin> THATS THE JOKE.
[08:16:57] <sanxiyn> 2. Curious people use Java in work and learn Python
[08:16:59] <aatch> tell them this is important, dammit!
[08:17:07] <sanxiyn> 3. People who use Python in work learn Rust
[08:17:24] <sanxiyn> (Well joke was, in the meetup I polled what programming language do you use at work
[08:17:28] <sanxiyn> and Python was #1)
[08:17:44] <sanxiyn> So someone invariably asked me
[08:17:53] <sanxiyn> If one use Rust in work what does one learn
[08:18:01] <sanxiyn> So I told them I do Idris :)
[08:18:17] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[08:18:19] <aatch> Idris == your language?
[08:18:28] <sanxiyn> aatch: No
[08:18:36] <sanxiyn> http://idris-lang.org/
[08:18:48] <mcpherrin> I program exclusively in system F.
[08:18:50] <sanxiyn> Ok not very funny
[08:19:27] <sanxiyn> mcpherrin: Is that like programming a turing machine?
[08:19:29] <sanxiyn> http://rjlipton.wordpress.com/2010/01/27/programming-turing-machines-is-hard/
[08:19:39] <sanxiyn> "I program turing machines for a living"
[08:20:19] *** Joins: akashj87 (akash@8D977E4B.B574DF06.35E3DDC8.IP)
[08:20:27] <Ralith> sanxiyn: \o/
[08:20:47] *** Joins: seth (seth@moz-D840E602.dsl.static.sonic.net)
[08:20:50] <mcpherrin> sanxiyn: http://en.wikipedia.org/wiki/System_F
[08:20:57] <sanxiyn> mcpherrin: I know
[08:21:05] <sanxiyn> Another poll was this: what do you want to see most in Rust
[08:21:13] <sanxiyn> #1 was networking
[08:22:13] <sanxiyn> #2 was solid Unicode support (this is Korea, after all)
[08:22:17] <sanxiyn> #3 was GUI
[08:22:54] <Ralith> oh dear, GUI
[08:22:59] <sanxiyn> I am procrastinating on writeup, but in the mean time, you can look at these pictures for poll results :)
[08:23:01] <sanxiyn> https://fbcdn-sphotos-f-a.akamaihd.net/hphotos-ak-ash3/923265_10201058092154309_1482931723_n.jpg
[08:23:04] <sanxiyn> https://fbcdn-sphotos-g-a.akamaihd.net/hphotos-ak-prn1/11902_10201058091754299_1980340082_n.jpg
[08:23:16] *** Joins: pyrac (pyrac@moz-2FEC2239.w92-149.abo.wanadoo.fr)
[08:23:21] <sanxiyn> (traditional east Asian tally using an ideograph æ­£)
[08:23:43] * aatch actually has that character apparently
[08:24:22] <dbaupp> sanxiyn: are the columns the "use at work" and "is learning"?
[08:24:26] <sanxiyn> Writing is mine. Not that good penmenship :(
[08:24:34] <sanxiyn> dbaupp: No, use at work and favorite
[08:24:54] <sanxiyn> So... only 1 person use Rust at work (me) and only 1 person's favorite is Rust (again, me)
[08:24:56] <sanxiyn> :)
[08:25:09] <Luqman> sanxiyn: what is the third language on the right? something ending in eo is all i can tell :P
[08:25:11] <sanxiyn> Total: 16
[08:25:28] <sanxiyn> Luqman: It is "Korean language"
[08:25:39] <sanxiyn> (The same person who said "Email" on the left :)
[08:26:46] <mcpherrin> sanxiyn: Are you one of the samsung people working on servo?
[08:26:46] <Luqman> oh, is it suppose to be í•œêµ­ì–´?
[08:26:54] <sanxiyn> Luqman: Exactly
[08:26:58] *** Quits: seth (seth@moz-D840E602.dsl.static.sonic.net) (Ping timeout)
[08:27:01] <sanxiyn> mcpherrin: Yes
[08:27:06] <mcpherrin> mmkay
[08:27:22] <Luqman> sanxiyn: and i thought reading bad flow-y handwriting was hard :P
[08:27:37] <sanxiyn> Luqman: So... I guess you only saw Hangul in computer fonts... that is how it looks like in handwriting
[08:27:40] <Luqman> english that is
[08:27:45] <aatch> sanxiyn, out of curiosity, what is Samsung's interest in servo?
[08:28:19] <sanxiyn> aatch: vague strategic interest, as far as I can tell
[08:28:29] <aatch> fair enough
[08:28:30] <mcpherrin> Tizen?
[08:28:39] <sanxiyn> mcpherrin: As far as I know, no
[08:28:59] <sanxiyn> More like, let's have insurance against WebKit "goes wrong"
[08:29:00] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[08:29:01] <sanxiyn> whatever that is
[08:29:01] <aatch> Samsung is big enough that it can do things like have a random research division
[08:29:17] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[08:29:25] <mcpherrin> I've never worked for a company as large as Samsung, hard to wrap my head around :)
[08:29:45] <aatch> mcpherrin, neither. The company I work for has 3 employees, including me
[08:29:45] <Diablo-D3> samsung is not really a company anymore
[08:29:48] <Diablo-D3> its a bunch of companies
[08:29:52] <sanxiyn> mcpherrin: Yeah, true
[08:29:55] <sanxiyn> Diablo-D3: Also true
[08:30:11] <Diablo-D3> you know you're too big to succeed when your divisions are really companies
[08:30:17] *** Joins: jack (jack@EF36212C.8FA609AD.840029BC.IP)
[08:30:18] <Diablo-D3> same goes for sony, panasonic, lg, and uh
[08:30:25] <Diablo-D3> sharp and
[08:30:33] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[08:30:38] <Diablo-D3> theres another I cant think of
[08:30:51] <mcpherrin> mitsubishi?
[08:30:54] <Diablo-D3> yeah them
[08:31:03] <sanxiyn> I last worked for 8 people company)
[08:31:03] <aatch> Diablo-D3, actually, Samsung gets around this by making it's divisions behave like independent companies
[08:31:22] <Diablo-D3> aatch: it usually doesnt help, sony tried that
[08:31:41] <aatch> Was Sony as diversified though?
[08:31:42] <Diablo-D3> look at how failtastic a lot of their products are
[08:31:47] <Diablo-D3> kind of
[08:31:54] <Diablo-D3> I mean, they didnt make musical instruments and motor bikes like yamaha
[08:32:00] <mcpherrin> The last company I worked for was Mozilla, which was interesting enough.  Biggest was Amazon, which is still tiny next to the conglomerates here
[08:32:01] *** Quits: akashj87 (akash@8D977E4B.B574DF06.35E3DDC8.IP) (Ping timeout)
[08:32:06] *** Quits: jack (jack@EF36212C.8FA609AD.840029BC.IP) (Ping timeout)
[08:32:08] <mcpherrin> er, s/interesting/small/
[08:32:29] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[08:33:18] <sanxiyn> (Then, last-last was 5 people)
[08:34:06] <dbaupp> sanxiyn: next company will have a few billion
[08:34:10] *** Quits: Benvie_ (brandon@5FD20F9A.53D07D95.EFF8B7BF.IP) (Ping timeout)
[08:34:12] <sanxiyn> Luqman: Other Hangul handwritings are "ì“°ê³  ìžˆëŠ”", "ì¢‹ì•„í•˜ëŠ”", "ìžˆì—ˆìœ¼ë©´ ì¢‹ê² ì–´ìš”"
[08:34:20] <aatch> sanxiyn, at that curve, the next job you have will be with GE
[08:34:36] <sanxiyn> Not a curve at all...
[08:35:03] *** Joins: Benvie_ (brandon@5FD20F9A.53D07D95.EFF8B7BF.IP)
[08:35:26] <aatch> we have 3 points, that's enough for a curve
[08:36:26] <sanxiyn> Wikipedia tells me Samsung had >220,000 employees in 2012
[08:36:34] <sanxiyn> I can't imagine that
[08:36:41] <sanxiyn> (Samsung Electronics, that is)
[08:37:14] <Luqman> sanxiyn: yea, i guess it's only natural computer fonts are "neater"
[08:38:54] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[08:39:21] *** Quits: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP) (Ping timeout)
[08:39:24] <Luqman> sigh, turnaround time when making changes to llvm is too long
[08:40:46] <sanxiyn> You are patching LLVM?
[08:42:57] <Ralith> it's quite timely in my experience
[08:44:24] *** Quits: Jesin (Jessin_@moz-1866A4CC.cc.lehigh.edu) (Quit: Leaving)
[08:44:29] <Luqman> sanxiyn: trying to make the stack switch stuff work on arm/linux
[08:44:41] *** Quits: igl (igl@moz-37DB1834.adsl.alicedsl.de) (Ping timeout)
[08:44:41] *** Joins: igl (igl@moz-82A4C313.adsl.alicedsl.de)
[08:44:47] <sanxiyn> Luqman: Ah!
[08:45:07] *** Joins: jviereck (Adium@moz-92CFC059.dclient.hispeed.ch)
[08:45:46] <sanxiyn> I think it is mostly not OS-specific... should work (famous last word)
[08:46:24] *** Quits: igl (igl@moz-82A4C313.adsl.alicedsl.de) (Ping timeout)
[08:46:39] <Luqman> haha well that's what i was hoping for when i just deleted the if !android fail part
[08:46:45] <Luqman> sadly not
[08:46:48] *** Joins: igl (igl@moz-9B4D155F.adsl.alicedsl.de)
[08:47:08] <sanxiyn> Luqman: Did you figure out the problem?
[08:49:45] <Luqman> getting the tls base address seems to be done differently
[08:49:59] <sanxiyn> ah ok
[08:50:02] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[08:50:02] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/Ia1aWA
[08:50:02] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[08:51:58] *** Joins: engla (engla@moz-BFD53D48.selucle.dyn.perspektivbredband.net)
[08:53:03] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[08:53:03] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/i3FbdQ
[08:53:03] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[08:53:04] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[08:53:04] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/ixQTBw
[08:53:04] <ghrust> 13rust/06auto 14ee26c7c 15Brendan Zabarauskas: Revert rename of Div to Quot
[08:53:04] <ghrust> 13rust/06auto 14f67239f 15bors: auto merge of #6147 : bjz/rust/numeric-traits, r=brson...
[08:53:04] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[08:53:23] <Luqman> Bad machine code: Using an undefined physical register :(
[08:53:29] *** Quits: igl (igl@moz-9B4D155F.adsl.alicedsl.de) (Ping timeout)
[08:53:35] *** Joins: igl (igl@moz-5F71069D.adsl.alicedsl.de)
[08:54:18] *** Quits: sanxiyn (tinuviel@665E6AA3.19467A1.45C99EA8.IP) (Ping timeout)
[08:54:47] *** Joins: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP)
[08:55:21] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[08:56:42] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[08:58:28] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[09:01:15] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[09:02:10] *** Quits: igl (igl@moz-5F71069D.adsl.alicedsl.de) (Ping timeout)
[09:02:51] *** Joins: igl (igl@moz-6834C05D.adsl.alicedsl.de)
[09:03:42] <Diablo-D3> that blizzard talk pdf is wrong
[09:03:45] <Diablo-D3> flex and bison do NOT make it easy
[09:03:52] <Diablo-D3> go use re2c and lemon instead
[09:03:52] *** Joins: doomlord (doomlod@moz-92EDFF3A.range31-52.btcentralplus.com)
[09:04:35] *** Quits: igl (igl@moz-6834C05D.adsl.alicedsl.de) (Ping timeout)
[09:04:49] *** Parts: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Killing koopas in another castle)
[09:05:14] *** Joins: igl (igl@moz-52133554.adsl.alicedsl.de)
[09:07:43] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[09:09:49] *** Quits: ysuzuki (ysuzuki@moz-60FA9D06.net119083145.t-com.ne.jp) (Client exited)
[09:11:07] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[09:11:24] *** Quits: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP) (Ping timeout)
[09:12:07] <mcpherrin> Diablo-D3: I haven't used lemon before, but the interface looks nice.
[09:12:30] <Diablo-D3> Ive used re2c + lemon, its a lot easier to write parsers in than flex+bison
[09:12:51] <mcpherrin> I've done re2c + bison before. Screw bison.
[09:12:52] <Diablo-D3> https://blog.mozilla.org/services/2013/04/30/introducing-heka/
[09:12:54] *** Quits: igl (igl@moz-52133554.adsl.alicedsl.de) (Ping timeout)
[09:12:57] <Diablo-D3> >Go
[09:13:03] <Diablo-D3> if that guy works for mozilla, he needs to be fired
[09:13:17] <mcpherrin> Rust really isn't ready for production use :P
[09:13:20] <mcpherrin> Go is.
[09:13:24] *** Joins: igl (igl@moz-5F45F3AF.adsl.alicedsl.de)
[09:13:50] <Diablo-D3> Go isnt either
[09:13:54] <Diablo-D3> I dont care if Google is
[09:14:38] <Diablo-D3> I looked at Go, its never going to be ready if they keep pushing a compiler that isnt llvm-based and they dont improve the ability to write concurrent code (ironic, seeing as I agree with rob pike on how concurrency is meant to work)
[09:17:02] *** Quits: igl (igl@moz-5F45F3AF.adsl.alicedsl.de) (Ping timeout)
[09:17:31] *** Joins: igl (igl@moz-B26A77AE.adsl.alicedsl.de)
[09:19:54] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[09:21:28] <mcpherrin> Well the alternative is probably a python script, and there's no harm in using Go in this situation.
[09:21:37] *** Joins: pnkfelix|rcirc (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[09:21:40] *** Joins: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[09:21:49] *** Quits: igl (igl@moz-B26A77AE.adsl.alicedsl.de) (Ping timeout)
[09:22:00] *** Quits: geomyidae (geomyidae@9FDA6BE2.37A86C23.448B98CC.IP) (Quit: Tschuss!)
[09:22:01] *** Joins: igl (igl@moz-D9E323A6.adsl.alicedsl.de)
[09:22:20] <Diablo-D3> mcpherrin: yeah, but it'll have to be rewritten in rust later on
[09:22:27] <Diablo-D3> btw, was the name rust chosen because its the opposite of chrome?
[09:22:35] *** Joins: AutomatedTester (David@moz-DB4A9C19.scl3.mozilla.com)
[09:22:58] <mcpherrin> No. It was chosen because it was a place to play with old programming language ideas that weren't mainstream
[09:23:06] <mcpherrin> (ie, rusted)
[09:23:31] <Diablo-D3> ahh
[09:24:08] <mcpherrin> Also, I doubt it would get rewritten in rust.  Seems like a waste of time.
[09:24:40] <Diablo-D3> yeah, but writing something in a stillborn language is a waste of time too
[09:26:06] <AutomatedTester> s/stillborn/undergoing gestation/
[09:26:14] <AutomatedTester> stillborn suggests its dead
[09:26:53] <tristram> itâ€™s a bit annoying to have to make clean before make
[09:26:56] <mcpherrin> Given the amount of google services written in Go, and 3rd party use, I think assuming the language will go nowhere is unlikely.
[09:26:58] <Diablo-D3> yes, I suggested its dead.
[09:26:58] *** Joins: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP)
[09:27:05] <Diablo-D3> tristram: this is why shells have &&
[09:27:16] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[09:27:21] <aatch> Also, `make clean all`
[09:27:25] <Diablo-D3> mcpherrin: I dont really see it getting traction IN Google either
[09:27:45] <tristram> but I need almost an hour of compiling :) something incremental would have be lovely ;)
[09:28:09] <aatch> tristram, cleaning doesn't make a difference on that either way
[09:28:22] <aatch> It's just that rustc takes a while to build
[09:28:41] <kimundi> And the fact that it does so three time in a row
[09:28:47] <AutomatedTester> Diablo-D3: Go is getting traction, just really slowly 
[09:28:55] <Diablo-D3> AutomatedTester: thats a bad thing
[09:29:00] <AutomatedTester> mainly due to the idioms used, people dont grok them
[09:29:03] <Diablo-D3> Go is a pretty lousy language
[09:29:14] <AutomatedTester> I havent used it so cant comment
[09:29:28] <AutomatedTester> but I know a number of googlers and non-googlers who have
[09:29:40] *** Quits: igl (igl@moz-D9E323A6.adsl.alicedsl.de) (Ping timeout)
[09:30:24] <Diablo-D3> AutomatedTester: I looked through the docs and the examples given
[09:30:26] *** Joins: igl (igl@moz-D01E7865.adsl.alicedsl.de)
[09:30:33] <Diablo-D3> Ive also looked at benchmarks of the output from their compiler
[09:30:41] <Diablo-D3> I was impressed with neither.
[09:30:50] *** Joins: jack (jack@EF36212C.8FA609AD.840029BC.IP)
[09:30:55] <AutomatedTester> as I said the idioms arent what people understand
[09:30:59] <tristram> aatch: I guess for a compiler itâ€™s more complicated not to rebuild everything than for an usual app
[09:31:15] <AutomatedTester> I think Rust has idioms people can associate with
[09:31:32] <aatch> tristram, actually, it's mostly because rust doesn't support incremental recompilation of crates
[09:31:37] <aatch> (yet)
[09:31:50] <aatch> Since "crate" is the unit of compilation
[09:32:03] <Diablo-D3> btw, does vim have a rust syntax definition yet?
[09:32:10] <AutomatedTester> Diablo-D3: yes
[09:32:13] <AutomatedTester> its in the rust tree
[09:32:14] <aatch> Diablo-D3, yes
[09:32:15] <tristram> ok, I can stick with it :)
[09:32:18] <aatch> and it has for a while
[09:32:29] <kimundi> Diablo-D3: rust includes highlining infos for both vim and emacs
[09:32:35] *** Quits: jack (jack@EF36212C.8FA609AD.840029BC.IP) (Ping timeout)
[09:32:37] * AutomatedTester uses it, even though I am only playing with the language
[09:32:52] <Diablo-D3> yay
[09:33:11] <aatch> https://github.com/mozilla/rust/tree/master/src/etc/vim
[09:33:12] <Diablo-D3> all I need then is syntastic to support rustc
[09:33:16] *** Quits: igl (igl@moz-D01E7865.adsl.alicedsl.de) (Ping timeout)
[09:33:21] <aatch> Diablo-D3, it does
[09:33:36] <Diablo-D3> I think Ill try rust later today then
[09:33:42] <aatch> I get warnings all the time from syntastic
[09:34:06] <aatch> (mostly obsolete struct syntax)
[09:34:32] <AutomatedTester> Diablo-D3: I am trying to port some of my python/java libs over and its not proving too taxing
[09:34:42] <Diablo-D3> Im one of these people who are guilty of turning vim into an ide
[09:34:48] <AutomatedTester> the main issue I am having is understanding the variable declarations
[09:34:50] *** Joins: igl (igl@moz-71B5D272.adsl.alicedsl.de)
[09:35:02] <aatch> Diablo-D3, you fiend!
[09:35:10] <Diablo-D3> aatch: I know :<
[09:35:13] <AutomatedTester> Diablo-D3: most of Mozilla are guilty of turning (vim|emacs) into an IDE
[09:35:25] *** Quits: engla (engla@moz-BFD53D48.selucle.dyn.perspektivbredband.net) (Ping timeout)
[09:35:33] <aatch> Nah, I have YCM and Syntastic
[09:35:38] <Diablo-D3> https://github.com/Diablo-D3/config
[09:35:40] <aatch> Though that's about as far as I get
[09:35:45] <Diablo-D3> yeah I use YCM and Syntastic too
[09:35:47] *** Quits: pyrac (pyrac@moz-2FEC2239.w92-149.abo.wanadoo.fr) (Quit: pyrac)
[09:35:51] <Diablo-D3> thats my vim and zsh configs
[09:36:02] <Diablo-D3> my zsh prompt changes colors depending on the hostname :D
[09:36:03] <aatch> Woo, another zsh user!
[09:36:14] <tiffany> I have gvim with clang completion
[09:36:25] <Diablo-D3> tiffany: use YCM
[09:36:29] <Diablo-D3> much better than clang complete
[09:36:31] <aatch> tiffany, give YCM a go, it's much better than clang-complete
[09:36:38] <Diablo-D3> haha
[09:36:53] <Diablo-D3> I was using clang complete before YCM, Im glad I switched
[09:36:58] <mcpherrin> sometimes, I turn line numbers on in vim.  I've even tried autoindenting once or twice, but that was a little too much for me to handle.
[09:37:14] <aatch> mcpherrin, lol
[09:37:23] <aatch> You get used to it.
[09:37:26] *** Quits: igl (igl@moz-71B5D272.adsl.alicedsl.de) (Ping timeout)
[09:37:29] <aatch> Which isn't always a good thing
[09:37:47] * aatch often types :w into random text fields
[09:37:51] <AutomatedTester> Diablo-D3: https://github.com/AutomatedTester/dotfiles/blob/master/vimrc
[09:38:17] <aatch> <Esc>:w<CR>
[09:38:17] <mcpherrin> vim is the best editor, but too many people ruin it with all sorts of features that make it slow.
[09:38:43] *** Joins: pyrac (pyrac@moz-2FEC2239.w92-149.abo.wanadoo.fr)
[09:38:53] <aatch> mcpherrin, which is why I keep my plugins list tight
[09:38:53] <Diablo-D3> AutomatedTester: you should switch to YCM too, btw
[09:38:59] *** Joins: igl (igl@moz-987D7044.adsl.alicedsl.de)
[09:39:07] <Diablo-D3> hrm, I wonder if YCM supports rust yet :D
[09:39:10] <mcpherrin> syntax hilighting makes opening big files too annoying.
[09:39:32] <Diablo-D3> mcpherrin: you must be on a very slow machine
[09:39:44] <AutomatedTester> Diablo-D3: zomg that looks amazing
[09:40:00] <mcpherrin> Diablo-D3: Quad core Ivy Bridge i7 :P
[09:40:10] <Diablo-D3> AutomatedTester: yeah, it defeats all other tab complete impls
[09:40:16] <mcpherrin> Anything over 10k lines takes almost a quarter second to open :(
[09:40:28] <Diablo-D3> mcpherrin: wtf, my c2d e8500 @ 3.16ghz has served me well for like 7 or 8 years
[09:40:35] <Diablo-D3> OH JEE A FULL QUARTER OF A SECOND
[09:40:46] <mcpherrin> I want to open and close my editor at 60fps!
[09:40:46] <Diablo-D3> mcpherrin is trolling me :<
[09:41:08] <mcpherrin> I should switch to a cap'n proto interface to my mind.
[09:41:18] <Diablo-D3> heh, you know what Ive been doing lately?
[09:41:28] <Diablo-D3> my laptop sits below my desktop's monitor
[09:41:32] *** Quits: igl (igl@moz-987D7044.adsl.alicedsl.de) (Ping timeout)
[09:41:37] <Diablo-D3> so Ive been putting vim on my mac laptop
[09:41:41] *** Joins: igl (igl@moz-C288EB3D.adsl.alicedsl.de)
[09:41:47] <Diablo-D3> ssh from iterm2 and doing vim from there
[09:41:57] <mcpherrin> zsh is stillborn since it doesn't use llvm
[09:42:08] <Diablo-D3> and then fullscreen iterm2
[09:42:09] <aatch> Diablo-D3, aww, I was hoping you were going to say mind-machine interfacing
[09:42:17] <Diablo-D3> aatch: it gets pretty close to it
[09:42:20] *** Joins: jaen1 (jaen@moz-E0979827.copit.pl)
[09:42:25] <Diablo-D3> it blots out all distractions because I put all the distractions on my laptop
[09:42:30] <Diablo-D3> and leave my 26" monitor for work
[09:42:43] <Diablo-D3> like this irc client right here? on the laptop.
[09:42:57] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[09:43:23] <Diablo-D3> Im almost considering plugging my monitor into the mac too
[09:43:27] *** Quits: igl (igl@moz-C288EB3D.adsl.alicedsl.de) (Ping timeout)
[09:43:33] <mcpherrin> I use a VT320 in 80x50 mode.  Way better than 80x25 -- the extra lines are great.
[09:43:53] <Diablo-D3> mcpherrin: yeah Im getting like 150x100 or something like that in iterm2 with my font settings
[09:44:14] <Diablo-D3> I cant stand claustrophobic vims
[09:44:20] *** Joins: igl (igl@moz-25901C44.adsl.alicedsl.de)
[09:44:28] <mcpherrin> though the 9600 baud serial link is a bit slow
[09:44:42] <Diablo-D3> I may end up just buying another monitor or two and putting them sideways
[09:45:00] <Diablo-D3> and running vim on those
[09:45:03] <Diablo-D3> and terminals
[09:45:24] <aatch> I use cat to push characters onto a serial port.
[09:45:35] <Diablo-D3> s/cat/a cat/
[09:45:39] <Diablo-D3> # meow!
[09:46:13] <Diablo-D3> I actually wish xfce had fullscreen support for apps that dont hack it in (ie, everything oher than firefox)
[09:46:41] <mcpherrin> My neighbour's cat is named "/bin/cat"
[09:46:48] <aatch> bah, desktop environments!
[09:46:50] <mcpherrin> (you don't pronounce the slashes)
[09:46:56] <mcpherrin> X is terrible
[09:47:00] <Diablo-D3> X is terrible
[09:47:03] <Diablo-D3> but thats all you get on linux
[09:47:03] <dbaupp> personally, I find just pulling out the hard disks and manipulating the bytes directly works better
[09:47:13] <aatch> I still use X.
[09:47:15] <mcpherrin> Diablo-D3: framebuffers.
[09:47:19] <Diablo-D3> dbaupp: yeah, but wouldnt it just be easier to use butterflies?
[09:47:28] <Diablo-D3> mcpherrin: yeah but I need to see webpages
[09:47:34] <aatch> Meta-X Meta-Butterfly
[09:47:35] <kimundi> Diablo-D3: Try shift-f11 ? Not sure If I remeber the right wm...
[09:47:36] <mcpherrin> Diablo-D3: w3m.  It's fast.
[09:47:46] <Diablo-D3> and I also run opencl 
[09:47:47] *** Joins: igl1 (igl@moz-160D1D9C.adsl.alicedsl.de)
[09:47:53] <Diablo-D3> which means keeping X open no matter if I use it or not
[09:47:55] *** Quits: igl (igl@moz-25901C44.adsl.alicedsl.de) (Ping timeout)
[09:47:56] <dbaupp> Diablo-D3: I would, but it requires catching them :(
[09:48:00] <AutomatedTester> Diablo-D3: I see Mozilla has released a new project written in Go
[09:48:08] <mcpherrin> Diablo-D3: yeah but you don't need to /look/ at it
[09:48:13] <Diablo-D3> AutomatedTester: thats how this conversation started
[09:48:20] <AutomatedTester> ahh
[09:48:31] <Diablo-D3> mcpherrin: true, people bitcoin mine headless, just startx and have nothing running in it
[09:49:20] <Diablo-D3> ssh box, screen, startx && DISPLAY=:0 miner, ctrl-a d?, exit, done
[09:51:36] <mcpherrin> Pretty sure you can't startx inside a screen.
[09:51:47] <mcpherrin> Needs to get a handle to the VT of the current terminal.
[09:52:04] <aatch> why would you need to start x?
[09:52:04] <Diablo-D3> not only can you do that, you can do it while ssh'ed in.
[09:52:20] <Diablo-D3> aatch: opencl on nvidia and amd require it
[09:52:29] <aatch> really? that sucks
[09:52:39] <Diablo-D3> not really
[09:52:48] <Diablo-D3> its the fact the entire driver is in the x driver
[09:52:51] <Diablo-D3> hardware init, the works
[09:52:52] <aatch> I figured that they would need the library code
[09:52:58] *** Joins: doener (doener@moz-724BBC7C.unitymediagroup.de)
[09:53:00] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[09:53:00] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/ixQTBw
[09:53:00] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[09:53:01] <Diablo-D3> the library alone would do nothing
[09:53:05] <Diablo-D3> you still need to talk to the hardware
[09:53:15] <Diablo-D3> now, gallium DOES cure this by moving everything into the kernel
[09:53:28] <Diablo-D3> but gallium does not yet support my gpu nor does mesa have their opencl lib done yet
[09:53:41] <Diablo-D3> and it doesnt help nvidia users because nvidia is anti-foss
[09:54:39] <Diablo-D3> btw apparently xfce DOES have fullscreen mode now, and its alt f11
[09:54:56] <jaen1> Actually, why is X terrible? When I use a tiling wm instead of some gnomes/kdes it doesn't feel all that bad to me.
[09:55:35] <Diablo-D3> jaen1: its slow and its arcitectured badly
[09:55:50] *** Joins: ysuzuki (ysuzuki@moz-50A58707.bbtec.net)
[09:55:56] <Diablo-D3> this is why wayland exists
[09:56:00] <aatch> jaen1, X is terrible because X was fine 30 years ago
[09:56:01] <Diablo-D3> to make a windowing system that isnt shit
[09:56:12] *** jaen1 is now known as jaen
[09:56:14] <aatch> Diablo-D3, not a windowing system
[09:56:16] *** Quits: igl1 (igl@moz-160D1D9C.adsl.alicedsl.de) (Ping timeout)
[09:56:27] <Diablo-D3> soon as I can run opencl apps in wayland, Im ditching X without a second thought
[09:57:02] *** Joins: igl (igl@moz-5EC2D418.adsl.alicedsl.de)
[09:57:16] <Diablo-D3> aatch: fine, a protocol
[09:57:18] <jaen> Yeah, that's what I heard, that it doesn't make sense for xserver to be the way it is because noone does remote desktop by virtue of remoting drawing commands for example and whatnot
[09:58:02] <Diablo-D3> jaen: it EXTRA makes no sense because modern machines now are hetergenous non-uniform segmented memory machines with dedicated co-processors
[09:58:07] <Diablo-D3> ie, they're CPUs and GPUs.
[09:58:26] <aatch> There is also a lot of cruft accumulated over 31 years and 11 versions
[09:58:33] <mcpherrin> AMD recently announced their uniform memory plans for cpu+gpu
[09:58:35] <Diablo-D3> theres a) no reason to include the GPU manager stack inside of the display server, b) theres no reason for the display server to be anything but a normal app
[09:58:46] <mcpherrin> should be nice to lower the gpu latency for gpgpu stuff.
[09:58:51] *** Quits: igl (igl@moz-5EC2D418.adsl.alicedsl.de) (Ping timeout)
[09:58:55] <Diablo-D3> mcpherrin: its NUMA as opposed to completely segmented
[09:58:58] <Diablo-D3> which is a good thing
[09:59:05] <Diablo-D3> Im looking forwards to that
[09:59:27] <Diablo-D3> even if I have to buy a board that has HTX slots and buy HTX GPUs
[09:59:28] <Diablo-D3> Ill do it
[09:59:34] <mcpherrin> is it numa? I heard somebody say uniform.
[09:59:54] <Diablo-D3> its non-uniform purely because the memory is still on the GPU card
[10:00:05] <Diablo-D3> its not plugged into a memory controller that belongs to the cpu
[10:00:17] *** Joins: igl (igl@moz-2AA38D8.adsl.alicedsl.de)
[10:00:20] <Diablo-D3> its _more_ uniform than what we have now
[10:00:40] <Diablo-D3> right now only a small 256mb window of GPU memory can be seen from the CPU and its highly controlled
[10:00:41] <jaen> I don't know, I just use Xes to display some webpages and it works. Maybe I'm jsut behind times, when people now all use GPGU and shit ; p But even if Xes don't bother me personally it's good they doing Wayland. I don't get it why Ubuntu tries to make it's own server instead of helping out with Wayland though.
[10:01:00] <Diablo-D3> what AMD is doing is opening up the whole thing to not only just the CPU but to all GPUs on the system
[10:01:17] <Diablo-D3> so GPUs can natively send data between themselves without bouncing off the system RAM first
[10:01:45] <Diablo-D3> you're SUPPOSED to be able to do this with pci-e anyhow, but you're still stuck with that 256mb window limit because of stupid legacy reasons
[10:02:17] <Diablo-D3> that SLI bridge you plugin? its a pci-e x1 lane.
[10:02:48] <Diablo-D3> well, possibly one, Im not sure what nvidia is using, but AMD is using a specialized pci-e protocol over theirs
[10:03:12] <jaen> I thing it's quite interesting what they're doing with PS4, integrating all memory into one. I wonder when that will get to PCs.
[10:03:22] <Diablo-D3> jaen: its not that big of a thing actually
[10:03:34] <Diablo-D3> the way Fusion processors work is they are HTX native devices
[10:03:40] <Diablo-D3> not just the CPU but the GPU too
[10:03:53] <mcpherrin> gpu memory has been way too far from the cpu for too long already.
[10:04:04] <Diablo-D3> on AMD processors, the L3 is owned and managed by the memory controller, which it itself is an HTX device
[10:04:09] <mcpherrin> It works well enough but guh
[10:04:14] <Diablo-D3> and yes, that means the CPU and memory controller talk to each other as HTX devices
[10:04:28] <Diablo-D3> it simplifies design and increases performance
[10:04:35] *** Quits: igl (igl@moz-2AA38D8.adsl.alicedsl.de) (Ping timeout)
[10:04:42] <Diablo-D3> it also means cpus send messages across htx to other sockets to THEIR memory controllers in NUMA systems
[10:05:04] *** Joins: igl (igl@moz-E8A87F49.adsl.alicedsl.de)
[10:05:04] <Diablo-D3> anyhow, with fusion, the gpu can directly talk to the memory controller for that socket
[10:05:20] <Diablo-D3> what the PS4 CPU is is a very huge Fusion-like setup
[10:05:40] <Diablo-D3> Im not sure if the GPU is still on die, but its a fusion-ized 78xx-like GCN
[10:05:59] <Diablo-D3> combined with a bulldozer-type 8 core CPU
[10:06:08] <Diablo-D3> and the native memory of the system isnt ddr3, its gddr5
[10:06:23] *** Quits: snowmantw (Mibbit@moz-C707A5F2.dynamic.hinet.net) (Quit: http://www.mibbit.com ajax IRC Client)
[10:06:28] <Diablo-D3> so all they did was load it with 4? 8? gigs of that and gave it a gddr5 memory controller instead of a ddr3 one
[10:06:37] <Diablo-D3> so you get GPU memory performance _on the CPU_
[10:07:14] <Diablo-D3> which should be absolutely fucking fantastic for low complexity high memory bandwidth applications
[10:07:43] <Diablo-D3> infact, if AMD were to sell these normally and sell highly expensive GDDR5 sticks to shove in it, I would buy it without question
[10:07:50] <Diablo-D3> your computer is only as fast as its memory for the most part
[10:08:35] <Diablo-D3> its also why bulldozers standardized around ddr3-1866 instead of 1600 like on ivy bridge
[10:08:45] <Diablo-D3> AMD can use the bandwidth much more effectively
[10:08:55] <jaen> What I mean is, while I don't own a Fusion processor, I can't imagine you could suddenly hand a memory pointer as VBO in OpenGL for example, there'll still be some memory shuffling. Or am I wrong?
[10:09:09] <Diablo-D3> jaen: well your Fusion doesnt have L3
[10:09:13] <Diablo-D3> L2 is still owned by the CPU
[10:09:41] <Diablo-D3> jaen: also, GPUs already pull data in from system ram on their own using device initiated DMA
[10:10:24] <doomlord> in unified setups, you usually have gpu reousrces in memory flagged as uncached
[10:10:27] <doomlord> ithink
[10:10:39] <Diablo-D3> doomlord: well in opengl many resources can be flagged as dynamic
[10:10:41] <doomlord> but does the fusion setup bypass that
[10:10:45] <Diablo-D3> but thats a poor way of using the hardware
[10:10:45] <mcpherrin> syntax hilighting makes vim use like 15% more bandwidth
[10:11:03] <doomlord> does fusion mean you can go cpu->L2->gpu  
[10:11:05] <Diablo-D3> you usually want to either do the explicit update model, or just use static buffers
[10:11:09] <Diablo-D3> doomlord: no
[10:11:23] <Diablo-D3> it DOES mean you can go cpu->memory controller->L3->memory controller->GPU
[10:11:26] <Diablo-D3> but those chips dont HAVE L3
[10:11:26] <aatch> mcpherrin, hey, be thankful you have a fancy 9600 baud modem
[10:11:30] <Diablo-D3> not sure why AMD did that
[10:11:55] <jaen> Yeah, I just wonder when will it be that you could map a VBO into system memory and not have it be end-of-the-world sync point. Though that's probably less of an issue anyway since you can do GPGPU.
[10:11:57] *** Quits: igl (igl@moz-E8A87F49.adsl.alicedsl.de) (Ping timeout)
[10:12:07] *** Joins: igl (igl@moz-2F023E33.adsl.alicedsl.de)
[10:12:15] <Diablo-D3> doomlord: GPUs can _already_ do GPU DMA -> system ram or system ram -> GPU DMA without involving the CPU
[10:12:18] <doomlord> yes gpgpu
[10:12:27] <Diablo-D3> Fusion just makes GPU a HTX native device
[10:12:35] <Diablo-D3> so it can do it quicker and at higher bandwidth
[10:13:05] <doomlord> its funny how ps4 is like a 2013 xbox1
[10:13:20] <Diablo-D3> no
[10:13:26] <doomlord> as in x86
[10:13:26] <Diablo-D3> xbox1s didnt have unified GPU control
[10:13:33] <Diablo-D3> oh, yes, its x86
[10:13:45] <Diablo-D3> the 720 may also be based on a similar platform from what Ive heard
[10:14:37] *** Joins: igl1 (igl@moz-67CE9E42.adsl.alicedsl.de)
[10:14:49] *** Quits: igl (igl@moz-2F023E33.adsl.alicedsl.de) (Ping timeout)
[10:14:50] <Diablo-D3> the thing is, with non-segmented memory layouts, its like a normal NUMA device
[10:14:55] <Diablo-D3> and AMD has this shit down pat
[10:15:26] <Diablo-D3> memory controllers on all CPU sockets in a AMD NUMA machine conspire to increase bandwidth and decrease latency
[10:15:30] <doomlord> whats the HTX acronym, HyperTransport..
[10:15:40] *** Quits: SimonSapin (simon@moz-C4A83ED9.net-89-2-126.rev.numericable.fr) (Ping timeout)
[10:15:55] <Diablo-D3> lets say a core on one socket needs something that a memory controller on another socket has in its L3? its pulled out of that L3 instead of system ram
[10:15:55] <mcpherrin> eXpansion
[10:15:56] <aatch> eXtreme!
[10:16:02] <Diablo-D3> doomlord: just hypertransport
[10:16:10] <Diablo-D3> AMD didnt want it confused with hyperthreading
[10:16:18] <doomlord> ok
[10:16:19] <Diablo-D3> so they call it HTX instead of HT
[10:16:29] *** Quits: igl1 (igl@moz-67CE9E42.adsl.alicedsl.de) (Connection reset by peer)
[10:16:31] <doomlord> so its something AMD developped for fast multiprocessor communication
[10:16:35] <aatch> eXponentiation
[10:16:35] <Diablo-D3> yes
[10:16:47] <aatch> eXposition
[10:16:49] <Diablo-D3> its an extremely high speed skinny packet bus
[10:17:01] <Diablo-D3> 16 bits wide per link, but runs at up to like 3.2ghz
[10:17:08] <Diablo-D3> and CPUs have multiple links
[10:17:26] <Diablo-D3> its based on the Alpha EV7 bus which AMD bought when DEC was torn apart and sold for scrap
[10:17:32] <Diablo-D3> they bought a few of the employees that designed it too
[10:17:50] *** Joins: igl (igl@moz-AC26783B.adsl.alicedsl.de)
[10:17:51] <Diablo-D3> K8 and newer CPUs are surprisingly Alphaey inside
[10:18:08] <AutomatedTester> ycm is segfaulting for me locally
[10:18:11] <AutomatedTester> *winning*
[10:18:24] <Diablo-D3> AutomatedTester: sounds like your C compiler compiled clang wrong
[10:18:35] <Diablo-D3> or you didnt follow the instructions properly
[10:19:05] <Diablo-D3> anyhow, those giant AMD clusters on the Top500?
[10:19:15] <Diablo-D3> uses htx as the cluster bus
[10:19:17] *** Joins: igl1 (igl@moz-99B8DBAF.adsl.alicedsl.de)
[10:19:18] <Diablo-D3> its a giant NUMA box
[10:19:28] *** Quits: haard (fredrik@18E6EC45.6A26450D.BE04C429.IP) (Ping timeout)
[10:19:41] *** Quits: igl (igl@moz-AC26783B.adsl.alicedsl.de) (Ping timeout)
[10:19:42] <Diablo-D3> its virtually identical to an AMD machine you'd own
[10:19:49] <mcpherrin> lol, top500
[10:19:52] <Diablo-D3> thats how powerful that architecture is
[10:20:08] <Diablo-D3> Intel took 10 years to copy HTX, and they did so in an inferior way
[10:20:55] <Diablo-D3> now, arguably, using infiniband as a RDMA messaging protocol and not doing things NUMA may be a superior method and mooting the both AMD and Intel's activities
[10:20:59] *** Quits: igl1 (igl@moz-99B8DBAF.adsl.alicedsl.de) (Ping timeout)
[10:21:09] <Diablo-D3> it certainly plays to the whole async messaging methodology
[10:21:45] <Diablo-D3> but sometimes you just need dozens of TB of memory and several hundred cores accessing it
[10:21:45] *** Joins: igl (igl@moz-472950DF.adsl.alicedsl.de)
[10:21:51] <mcpherrin> infiniband is sweet
[10:21:53] <Diablo-D3> and AMD shines in that case
[10:22:03] * mcpherrin works on ethernet routers, so sad
[10:22:07] <Diablo-D3> you know whats really nice?
[10:22:43] <mcpherrin> yes.
[10:22:59] <Diablo-D3> mellanox sells converged FDR IB and 40gige controllers
[10:23:27] <Diablo-D3> single qfsp+ port on a pci-e 3.0 x8 slot
[10:23:32] <Diablo-D3> FDR = 54gbit/sec
[10:23:41] <Diablo-D3> pci-e 3.0 x8 = 64gbit/sec
[10:25:04] <mcpherrin> does anybody other than mellanox and intel make IB switches
[10:25:10] <Diablo-D3> no
[10:25:19] *** Quits: Benvie_ (brandon@5FD20F9A.53D07D95.EFF8B7BF.IP) (Ping timeout)
[10:25:25] <Diablo-D3> and intel bought out somebody else's IB division to do that
[10:25:32] <Diablo-D3> qlogic's? I forget
[10:25:38] <mcpherrin> cisco used to but they got out of that
[10:25:39] *** Joins: Benvie_ (brandon@5FD20F9A.53D07D95.EFF8B7BF.IP)
[10:25:49] <Diablo-D3> yeah, cisco is backing the 40/100gige shit
[10:26:04] <Diablo-D3> but they dont seem to be strongly supporting FCoE efforts
[10:26:06] <Diablo-D3> which is bizzare
[10:26:07] *** Quits: igl (igl@moz-472950DF.adsl.alicedsl.de) (Ping timeout)
[10:26:21] *** Quits: Tad (Tom@moz-2036EE54.kimsufi.com) (Ping timeout)
[10:26:38] *** Joins: igl (igl@moz-37D1208F.adsl.alicedsl.de)
[10:26:38] <Diablo-D3> I can get hardware from Brocade that handles that shit fine
[10:26:55] *** Joins: encode__ (Mibbit@moz-D1625D56.tbcn.telia.com)
[10:26:59] <Diablo-D3> and I can buy NICs that do converged gige + fcoe too
[10:27:05] *** Joins: seth (seth@moz-D840E602.dsl.static.sonic.net)
[10:27:14] * mcpherrin arista networks
[10:27:31] <Diablo-D3> yeah, arista has some nice looking shit
[10:27:39] <Diablo-D3> seems to get far lower latency than cisco gear
[10:27:49] *** Quits: rpearl (rpearl@moz-2B41ACB5.andrew.cmu.edu) (Client exited)
[10:27:51] *** Joins: rpearl (rpearl@moz-2B41ACB5.andrew.cmu.edu)
[10:27:59] <Diablo-D3> I dont like what intel is doing though
[10:28:05] <Diablo-D3> they're trying to push for an incompatible spec
[10:28:24] <Diablo-D3> their IB equipment supports some sort of double speed QDR
[10:28:28] *** Joins: pnkfelix1 (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[10:28:31] <Diablo-D3> which mellanox hardware doesnt support
[10:28:44] <Diablo-D3> their hardware also uses a different IB verb set
[10:28:50] *** Quits: seth (seth@moz-D840E602.dsl.static.sonic.net) (Ping timeout)
[10:28:59] <Diablo-D3> so if you're standardizing on mellanox hardware, nothing intel does can help you
[10:29:20] <Diablo-D3> and intel isnt a strong IB player, they've mostly mismanaged their purchase from qlogic
[10:29:20] *** Quits: pnkfelix|rcirc (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Ping timeout)
[10:29:34] <Diablo-D3> and I have _no clue_ what they're doing with their smart rack shit
[10:29:45] *** Joins: igl1 (igl@moz-D0CF4820.adsl.alicedsl.de)
[10:29:49] *** Quits: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Ping timeout)
[10:30:00] <mcpherrin> is smart rack like blade server shit?
[10:30:02] <Diablo-D3> it looked interesting, but if they're going to fuck it up like they did with thunderbolt
[10:30:11] <Diablo-D3> mcpherrin: more like IBM's hugescale shit
[10:30:14] *** Quits: igl (igl@moz-37D1208F.adsl.alicedsl.de) (Ping timeout)
[10:30:17] *** Joins: Tad (Tom@moz-2036EE54.kimsufi.com)
[10:30:25] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[10:30:37] <Diablo-D3> rack sized power and data backplanes, the entire rack turning into some form of a blade box
[10:30:50] <Diablo-D3> its strange shit
[10:31:00] <mcpherrin> mmkay.  Makes sense.
[10:31:18] <Diablo-D3> intel has a bad habit of creating standards then shitting over anyone that wants to use them
[10:31:19] *** Joins: jack (jack@EF36212C.8FA609AD.840029BC.IP)
[10:31:25] *** Quits: igl1 (igl@moz-D0CF4820.adsl.alicedsl.de) (Ping timeout)
[10:31:35] <Diablo-D3> I dont mind buying shit from them, their shit does work
[10:31:42] <Diablo-D3> but Im sure as hell not getting vendor locked with them
[10:32:18] <Diablo-D3> like, how many thunderbolt products are on the market?
[10:32:20] <Diablo-D3> like, what, 5?
[10:32:30] <Diablo-D3> pci-e over a displayport aux channel is a genius idea
[10:32:35] *** Joins: igl (igl@moz-3781D488.adsl.alicedsl.de)
[10:32:37] <mcpherrin> hey now, at least like 10 :P
[10:32:49] <Diablo-D3> you know what AMDs doing?
[10:33:02] *** Quits: wuwei`lab (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Ping timeout)
[10:33:03] <Diablo-D3> they officially said fuck Intel's bullshit, and are doing USB3 over Displayport aux channels
[10:33:07] *** Quits: jack (jack@EF36212C.8FA609AD.840029BC.IP) (Ping timeout)
[10:33:11] <mcpherrin> hahaha
[10:33:15] <mcpherrin> seriously?
[10:33:20] <mcpherrin> this is gonna turn into a shitheap.
[10:33:23] <Diablo-D3> which means with a simple adapter or a USB3 bridge in a monitor, you have MILLIONS of things that now work over it
[10:33:28] <Diablo-D3> mcpherrin: it gets even better
[10:33:37] <Diablo-D3> they want USB3 over aux to be part of the displayport standard
[10:33:46] <Diablo-D3> so any manufacturer that wants to participate can
[10:33:54] <Diablo-D3> you might see it in DP 1.5
[10:33:59] <mcpherrin> could be nice
[10:34:00] *** Quits: encode__ (Mibbit@moz-D1625D56.tbcn.telia.com) (Quit: http://www.mibbit.com ajax IRC Client)
[10:34:09] <Diablo-D3> yeah, it'd be very nice considering how many monitors have USB ports
[10:34:12] <Diablo-D3> one less wire to run
[10:34:33] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[10:34:50] <mcpherrin> Now if only there was mains power over displayport too :-)
[10:34:58] <Diablo-D3> eh
[10:35:01] <Diablo-D3> given how little power some monitors use
[10:35:11] <Diablo-D3> you could do firewire type powering
[10:35:23] <Diablo-D3> 24-48v floating over the 6 pin connectors
[10:35:23] <mcpherrin> Okay fine I'll settle for 50 watts at 12v DC 
[10:35:25] <mcpherrin> :P
[10:35:38] <mcpherrin> or that.
[10:35:48] <Diablo-D3> enough amperage to run surprisingly large shit
[10:35:59] <Diablo-D3> though a lot of firewire ports have power pins completely disconnected
[10:36:02] <Diablo-D3> which is unfortunate
[10:36:03] <mcpherrin> I actually have no idea how much power modern LCD monitors use.
[10:36:11] <Diablo-D3> mcpherrin: actually not that much
[10:36:15] <mcpherrin> I know my laptops use a few watts for the backlights, but dunno about standalone
[10:36:29] <Diablo-D3> if you have a LED backlight and no scaler or UI, it could be as little as 10 amps at 12v
[10:36:34] <Diablo-D3> depending on size, of course
[10:37:36] <Diablo-D3> btw I was wrong about firewire
[10:37:44] <mcpherrin> yeah, 120 watts ought to be enough
[10:38:01] <Diablo-D3> its up to 45 watts
[10:38:07] <Diablo-D3> up to 30 volts
[10:38:15] <mcpherrin> sounds reasonable
[10:38:24] *** pnkfelix1 is now known as pnkfelix
[10:38:27] <Diablo-D3> its moooore than enough to run some surprisingly beefy gear on
[10:38:30] <Diablo-D3> mcpherrin: btw
[10:38:36] <Diablo-D3> some monitors fix the multiple cable issue altogether
[10:38:37] <mcpherrin> maybe not quite enough to drive a monitor but better than the paltry power you get from usb2
[10:38:39] *** Joins: pnkfelix|rcirc (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[10:38:48] <Diablo-D3> they have a singular cable that fans out at the bottom
[10:39:11] <mcpherrin> yeah well I could do that with a bit of gaffer tape
[10:39:16] <Diablo-D3> usb, dvi, hdmi, whatever female plugs, powere
[10:39:18] <Diablo-D3> its just stupid
[10:39:18] <mcpherrin> single cable is nice because single connector into laptop
[10:39:23] <Diablo-D3> yeah
[10:39:29] <Diablo-D3> actually, its why I like thunderbolt
[10:39:39] <Diablo-D3> chain thunderbolt monitors, then plug single cable into mbp
[10:39:55] <Diablo-D3> problem is only one company makes thuderbolt monitors
[10:39:58] <Diablo-D3> apple.
[10:40:10] <Diablo-D3> you can charge your mbp off the monitor too
[10:40:27] <mcpherrin> oh really
[10:40:36] <mcpherrin> man, I need to go upgrade my shit to some thunderbolts.
[10:40:36] <Diablo-D3> yeah, has built in magwhatever charger plug
[10:40:39] *** Quits: pyrac (pyrac@moz-2FEC2239.w92-149.abo.wanadoo.fr) (Quit: pyrac)
[10:40:49] <Diablo-D3> but I fucking hate apple cinema displays
[10:41:09] <Diablo-D3> they're waaay to expensive for the inferior visual quality
[10:41:15] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[10:41:15] <Diablo-D3> they dont even have internal calibration hardware
[10:41:23] <mcpherrin> I currently have some 2009ish dell 22" ips displays that are starting to fizzle out on me
[10:41:33] <Diablo-D3> yeah, my NEC is sorta dyingish
[10:41:36] <Diablo-D3> I probably have another 2 years in it
[10:41:48] <Diablo-D3> what Im waiting for is new monitors based on Sharp's IZGO process
[10:42:10] <Diablo-D3> you get HDPI displays that are as high quality has IPS, cheap as non-retina IPS, and much much brighter
[10:42:20] <Diablo-D3> (which means less power to the backlight to maintain the same brightness)
[10:42:32] <Diablo-D3> Apple has basically already bought the entire first gen of that glass
[10:42:52] <Diablo-D3> its going in their next iphone, next ipad, and its rumored they're going to be shipping retina imacs and cinemas
[10:42:59] <Diablo-D3> oh, and their next mbp retinas too
[10:43:17] <Diablo-D3> they may even be killing the non-retina mbs
[10:43:45] <Diablo-D3> sharp is currently selling a 32" 4k res IZGO, but its like $5500 because its a limited edition
[10:43:51] *** Quits: snadon (chatzilla@moz-EFE8FD29.mc.videotron.ca) (Ping timeout)
[10:43:58] <Diablo-D3> from what Ive heard, its as good as any IPS screen
[10:44:19] *** Quits: jviereck (Adium@moz-92CFC059.dclient.hispeed.ch) (Quit: Leaving.)
[10:45:03] <Diablo-D3> mcpherrin: I mean, if I have to buy a cinema to get the monitor I want I will
[10:45:08] <Diablo-D3> but Im not going to be happy with it
[10:45:52] *** Quits: bblum (bblum@moz-2B41ACB5.andrew.cmu.edu) (Ping timeout)
[10:46:15] *** Quits: rpearl (rpearl@moz-2B41ACB5.andrew.cmu.edu) (Ping timeout)
[10:47:41] <aatch> Hey, for an n-bit signed integer, the range is -(2^(n-1)) to (2^(n-1))-1 right?
[10:48:12] <kimundi> aatch: Sounds right
[10:48:24] <aatch> cool.
[10:48:25] <kimundi> rusti:: u8::to_str(-128)
[10:48:27] <rusti> foo.rs:5:8: 5:9 error: unexpected token: `:`
[10:48:27] <rusti> foo.rs:5         : u8::to_str(-128)
[10:48:27] <rusti>                  ^
[10:48:39] <kimundi> rusti: u8::to_str(-128)
[10:48:40] <rusti> ~"128"
[10:48:43] <kimundi> rusti: u8::to_str(-128 - 1)
[10:48:44] <rusti> ~"127"
[10:49:01] <kimundi> rusti: u8::to_str((-127))
[10:49:02] <rusti> ~"129"
[10:49:16] <aatch> I realized that the internet was a thing I have and checked on wikipedia
[10:49:18] <kimundi> ... something is strange
[10:49:36] <Diablo-D3> lol
[10:49:56] <Diablo-D3> aatch: and yes, its easy to remember, 0 is positive in a signed number
[10:50:35] <aatch> rusti: (-128i8) as u8
[10:50:36] <rusti> 128
[10:51:26] <kimundi> rusti: print(i8::to_str(-128))
[10:51:28] <rusti> -128
[10:51:36] <kimundi> rusti: print(i8::to_str(-129))
[10:51:38] <rusti> 127
[10:52:07] <kimundi> should use a signed datatype to show signed overflow...
[10:57:26] <pnkfelix> nmatsakis: maybe an unsized type should be called a "pretype" or something.  (mostly I'm wondering about whether its confusing to distinguish them solely via the Sized bound, as opposed to treating them like a distinct semantic classâ€¦)
[10:58:24] *** Joins: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP)
[10:58:24] *** Quits: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP) (Z:lined (Open Proxy found on your host. Please visit www.blitzed.org/proxy?ip=115.68.131.49 for more information.))
[11:02:37] *** Joins: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se)
[11:09:55] *** Joins: pyrac (pyrac@moz-2FEC2239.w92-149.abo.wanadoo.fr)
[11:11:14] *** Joins: berak (chatzilla@77E45D42.5291F4C0.16E13E53.IP)
[11:12:07] *** Parts: berak (chatzilla@77E45D42.5291F4C0.16E13E53.IP) ()
[11:13:08] *** Joins: jfredett (jfredett@moz-EDD670C9.mycingular.net)
[11:13:13] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Textual IRC Client: www.textualapp.com)
[11:18:27] <nmatsakis> pnkfelix: I'm not sure if youre just discussing terminology or something more profound
[11:18:44] <pnkfelix> nmatsakis: i'm not sure either
[11:18:46] <nmatsakis> pnkfelix: e.g., you could imagine having a distinct lexical class for type variables that might map to unsized types
[11:19:04] <nmatsakis> pnkfelix: but I'd rather keep it a bound
[11:19:13] <nmatsakis> pnkfelix: it seems consistent to me with Owned
[11:19:20] <pnkfelix> nmatsakis: i think my main concern is about one's mental model
[11:19:24] <nmatsakis> pnkfelix: i.e., types have a certain property
[11:19:50] <pnkfelix> nmatsakis: e.g. one writes assertions stating that values have a particular type
[11:20:07] <pnkfelix> nmatsakis: or rather that expression have a particular type
[11:20:31] <pnkfelix> nmatsakis: and I've been wondering whether such statements make sense for the unsized-cases
[11:20:32] <nmatsakis> ok?
[11:20:54] <pnkfelix> nmatsakis: but maybe they do make sense, and my concern is unfounded
[11:21:15] <nmatsakis> I don' tknow, it makes sense to me
[11:21:27] <nmatsakis> pnkfelix: but ymmv  :)
[11:21:43] <pnkfelix> actually maybe that is the heart of it
[11:21:51] <pnkfelix> at first I wrote "a value has a particular type"
[11:21:54] <pnkfelix> but then I corrected myself
[11:22:24] <pnkfelix> and that correction is probably crucial in having a consistent view of what the unsized types are
[11:22:45] *** Joins: jviereck (Adium@moz-92CFC059.dclient.hispeed.ch)
[11:23:14] <aatch> for anybody interested, my initial draft proposal for a datetime library is here: https://github.com/Aatch/rust-datetime/blob/master/proposal.rst
[11:23:20] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[11:23:37] <pnkfelix> or maybe I'm still confusing matters.
[11:23:54] <pnkfelix> i don't know, ignore the above, let me muddle through.
[11:24:09] <nmatsakis> pnkfelix: let's discuss a bit later, busy atm, but I think there is value in thinking of them as types
[11:27:35] *** Joins: seth (seth@moz-D840E602.dsl.static.sonic.net)
[11:28:23] <dbaupp> aatch: just wondering, but have you seen https://github.com/mozilla/rust/wiki/Lib-datetime ?
[11:29:07] <aatch> dbaupp, I have
[11:29:24] <dbaupp> good, good :)
[11:29:27] *** Quits: seth (seth@moz-D840E602.dsl.static.sonic.net) (Ping timeout)
[11:29:35] <aatch> But it's just a ton of ideas
[11:29:44] <aatch> which is fine, but a proposal it ain't
[11:30:03] <aatch> I did help a lot
[11:30:05] *** Quits: jfredett (jfredett@moz-EDD670C9.mycingular.net) (Ping timeout)
[11:30:11] <aatch> it*
[11:31:17] <dbaupp> cool
[11:31:20] <dbaupp> 64-bit seconds are *really* good at avoiding year 2000/2035 problems.
[11:32:13] <dbaupp> no time-only representation?
[11:32:21] <aatch> I'm not sure yet
[11:32:44] <aatch> I'm trying to think of a decent case for it that isn't covered by Clock
[11:33:08] <dbaupp> Clock?
[11:33:34] *** Joins: akashj87 (akash@AB4E5A2B.CD3DEE44.35E3DDC8.IP)
[11:33:38] <aatch> I haven't done the implementation, but its just a system clock.
[11:33:52] <aatch> Doesn't represent any specific date or time
[11:34:00] <dbaupp> ah
[11:34:04] <aatch> but you can get two of them and compare them
[11:34:31] <aatch> (called clock because the posix function is clock())
[11:34:36] <dbaupp> I was thinking time-only like '11:30' and so on
[11:34:54] <aatch> dbaupp, yeah, I know, but how useful is that really?
[11:35:11] <aatch> Other than scheduling?
[11:35:18] <dbaupp> no idea, but many other languages seem to include it?
[11:35:25] <aatch> Not that I can tell
[11:35:39] <dbaupp> oh, just python then?
[11:36:13] <aatch> Also, you could have a duration of the right length
[11:36:39] <aatch> so either 11.5 hours or 690 minutes
[11:36:49] <dbaupp> yeah that works
[11:37:00] <dbaupp> https://github.com/search?q=datetime.time&type=Code
[11:37:59] <dbaupp> there are 4x as many results for datetime.datetime, so it is much less used
[11:39:20] *** Joins: aklt (aklt@83B8238.6BE5A349.B330AC0A.IP)
[11:39:23] <aatch> If the eventual implementation allows Date + {Second,Min,Hour}Duration => DateTime then it would be fairly easy to use
[11:40:25] *** Joins: cdidd (cdidd@moz-4A308F5.broadband.corbina.ru)
[11:40:34] <dbaupp> that sounds workable (with an (hour, min, second) -> duration function somewhere in there)
[11:41:32] <aatch> Yeah, I definitely plan to include all the various constructors and helper functions
[11:43:22] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Ping timeout)
[11:43:28] *** Joins: busylizzy (lisa@85228838.12D0DC84.211374C4.IP)
[11:43:31] <aatch> I also don't see why you couldn't do hours(11) + minutes(30) and get a minutes(690)
[11:44:26] <dbaupp> that would be nice
[11:44:46] <aatch> I've spent a lot of time dealing with dates.
[11:45:22] <aatch> I've hit 3 of those 5 issues I mentioned
[11:45:38] *** Quits: pyrac (pyrac@moz-2FEC2239.w92-149.abo.wanadoo.fr) (Quit: pyrac)
[11:45:40] *** Quits: int3_ (int3_@moz-359A42F6.subnet-248.amherst.edu) (Ping timeout)
[11:45:41] <bjz> nmatsakis: https://github.com/mozilla/rust/pull/6151
[11:45:56] <aatch> We recently converted our entire database to use UTC instead of NZ{SD}T
[11:46:25] <Diablo-D3> aatch: the scary thing is it wasnt UTC to begin with
[11:46:39] *** Joins: int3_ (int3_@moz-359A42F6.subnet-248.amherst.edu)
[11:47:13] <aatch> Diablo-D3, yeah, unfortunately it was overlooked. We also weren't expecting as much international interest as we got
[11:47:29] <Diablo-D3> doesnt matter, time fields should never not be UTC
[11:47:41] <Diablo-D3> I dont even know why databases ever allowed it
[11:47:54] <aatch> Diablo-D3, MySQL doesn't store the timezone
[11:48:05] <Diablo-D3> (for the ones that have a specific date type and its not just a long long storing seconds)
[11:48:25] <Diablo-D3> aatch: yes, but people keep doing stupid things, like using mysql.
[11:48:57] <aatch> yes, well we are learning from our mistakes
[11:49:09] <aatch> We are slowly migrating from our LAMP stack
[11:49:16] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[11:49:28] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[11:49:32] *** Joins: haard (fredrik@moz-6A86987C.dynamic.se.alltele.net)
[11:49:35] *** Joins: pyrac (pyrac@moz-2FEC2239.w92-149.abo.wanadoo.fr)
[11:50:51] <aatch> Anyway, other plans for the datetime stuff is have `Date` only normalize itself when it has to, so you can do +1 month, followed by +1 month and it'll be identical to +2 months
[11:51:16] <Diablo-D3> aatch: well thats the thing
[11:51:24] <Diablo-D3> parsing human text is very hard
[11:51:38] <Diablo-D3> +1 month != a months worth of seconds
[11:52:02] <aatch> Diablo, I know
[11:52:23] <Diablo-D3> building a datetime class is exceedingly difficult
[11:52:29] <Diablo-D3> no one has managed to write a perfect one
[11:52:42] <Diablo-D3> although JODA doesnt seem so bad
[11:52:43] <aatch> Diablo-D3, that is why I am aiming for good
[11:52:58] <Diablo-D3> JODA is probably one of the best ones Ive seen, shame its for Java
[11:54:11] <kimundi> nmatsakis: Your proposable certainly sounds like it generalises the mental modell of 'special' types like {&,@,~}[T], {&,@,~}str, {@,&,~}fn() in a away that doesn't require someone who wants to explain them to enumerate them all like I just did ;)
[11:54:39] <aatch> In my head, durations are split into absolute durations and date-dependent durations.
[11:54:53] <Diablo-D3> aatch: works for me
[11:55:01] <Diablo-D3> aatch: I just want to be able to input a unix time and get a unix time
[11:55:45] <Diablo-D3> er, input unix get string, input string get unix
[11:55:49] <Diablo-D3> you know what I mean
[11:55:49] <dbaupp> kimundi: {&,@,~}{[T],str,fn()} is shorter :P
[11:56:25] <aatch> Diablo-D3, given that I get a unix timestamp from unix machines anyway
[11:56:34] <kimundi> dbaupp: Geez, give me time. This is the first time I realized I could combine the sigils in front like that :)
[11:56:49] <Diablo-D3> aatch: yeah, but you know how many people do NOT store time as some form of a unixtime?
[11:56:53] <Diablo-D3> its nuts
[11:57:08] <Diablo-D3> representations of datetimes change, the count of seconds since the epoch does not.
[11:57:44] <aatch> I'm not using the unix epoch though, I'm using 0001-01-01.
[11:57:51] <aatch> Mostly to make the maths a little easier
[11:57:58] <Diablo-D3> that could work fine BUT
[11:58:08] <Diablo-D3> a) make sure thats in UTC
[11:58:15] <Diablo-D3> b) make sure you include a function to convert unixtimes
[11:58:29] <aatch> Diablo-D3, https://github.com/Aatch/rust-datetime/blob/master/proposal.rst#datetime
[11:59:11] <Diablo-D3> c) make sure you include every single change in the gregorian calandar 
[11:59:23] <Diablo-D3> including that one week we repeated
[12:00:03] <aatch> There are actually no changes in the proleptic gregorian calendar
[12:00:18] <aatch> There is however confusion with new-style vs old-style dates
[12:00:32] <aatch> since the gregorian calendar immediately skipped 10 days
[12:00:43] <Diablo-D3> yeah
[12:01:06] <Diablo-D3> presumably since you support 0001 as your first year, you need to support dates before the modern world
[12:01:22] <aatch> But that is only a problem if you are using the julian calendar
[12:02:42] <dbaupp> Diablo-D3: i think it's the date that 0001-01-01 would've been if the current calendar was extended backwards to then, so everything else is just a calendar conversion
[12:02:55] <aatch> the proleptic Gregorian calendar is what you get when you retro-actively apply the rules to dates prior to 15th October 1582
[12:03:21] <Diablo-D3> well it could be worse
[12:03:29] <Diablo-D3> we could be using the byzantine calendar
[12:04:14] <Diablo-D3> which is the julian calendar plus another 5509 years
[12:04:27] <aatch> Bah!
[12:04:35] <aatch> Try the Chinese calendar
[12:04:45] <aatch> With it's two different types of year
[12:04:51] <bjz> o_o
[12:04:53] <Diablo-D3> yeah wtf is with that
[12:05:18] <Diablo-D3> its 4650 or 4710 depending on how much drugs you did that day
[12:05:19] <aatch> solar year and lunar year
[12:06:15] <Diablo-D3> hebew calendar is 5774 
[12:06:21] <Diablo-D3> byzantine is 7522
[12:08:00] *** Quits: eholk (eholk@moz-D5BE5964.hsd1.in.comcast.net) (Quit: eholk)
[12:08:38] <aatch> At any rate, all of that stuff will be handled by a separate, pluggable, calendar system
[12:10:05] <aatch> Though the standard types will just use Gregorian for most of the "normal" operations behind the scenes
[12:10:23] <Diablo-D3> well they SHOULD use unixtime behind the scenes =P
[12:10:46] <Diablo-D3> since different calander systems is just start dates, definition of months, days, and years
[12:10:49] <Diablo-D3> and a list of quirks
[12:12:10] <aatch> I prefer year 1, since only unix-like machines give me a unix time anyway
[12:13:18] *** Joins: SimonSapin (simon@moz-C4A83ED9.net-89-2-126.rev.numericable.fr)
[12:13:18] <Diablo-D3> so how are you implementing the storage format? 64 bits + 64 bits?
[12:13:23] <aatch> depending on how I get it, windows gives me something based on 1900-01-01 or 1601-01-01
[12:13:29] <aatch> Diablo-D3, 64+32
[12:13:39] <Diablo-D3> not storing subsecond values?
[12:14:00] <aatch> 64bits for seconds, 32 for nanoseconds
[12:16:04] <Diablo-D3> ahh
[12:16:49] <aatch> since 64 bits of seconds can store the entire current history of the universe ~40 times over
[12:16:56] <aatch> Anyway, I should go sleep
[12:17:16] *** aatch is now known as aatch|bed
[12:17:18] <Diablo-D3> it can?
[12:17:50] <Diablo-D3> I guess it does
[12:18:43] <Diablo-D3> maximum value is 293 billion years
[12:18:59] <aatch|bed> 18446744073709551616 seconds = 584,554,049,253
[12:19:00] <kimundi> rusti: u64::from_str_radix(str::repeat("1", 64), 2).get() / (60*60*24*356)
[12:19:01] <rusti> 599730287456
[12:19:04] <aatch|bed> That's unsigned though
[12:19:19] <Diablo-D3> you need a signed value, obviously
[12:19:19] <aatch|bed> kimundi, s/356/365
[12:19:27] <kimundi> rusti: u64::from_str_radix(str::repeat("1", 64), 2).get() / (60*60*24*365)
[12:19:28] <kimundi> :P
[12:19:29] <rusti> 584942417355
[12:19:51] <kimundi> rusti: i64::from_str_radix(str::repeat("1", 63), 2).get() / (60*60*24*365)
[12:19:53] <rusti> 292471208677
[12:20:21] <aatch|bed> The earth will probably be dead in about 1 billion years though
[12:28:09] *** Joins: seth (seth@moz-D840E602.dsl.static.sonic.net)
[12:29:58] *** Quits: seth (seth@moz-D840E602.dsl.static.sonic.net) (Ping timeout)
[12:30:28] *** Joins: EXetoC (ex@moz-2DBEB1E4.customer.t3.se)
[12:30:30] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Quit: Computer has gone to sleep.)
[12:32:14] *** Joins: wuwei`lab (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[12:32:21] *** Joins: jack (jack@EF36212C.8FA609AD.840029BC.IP)
[12:32:25] *** Joins: victorporof (victorporo@9310F178.477C3F8E.79933D60.IP)
[12:33:37] *** Quits: wuwei`lab (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[12:34:02] *** Joins: wuwei`lab (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[12:34:03] *** Quits: jack (jack@EF36212C.8FA609AD.840029BC.IP) (Ping timeout)
[12:35:22] *** Quits: wuwei`lab (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[12:38:17] *** Joins: jeff (jeff@4231C034.745B261B.F12515B4.IP)
[12:53:20] *** Quits: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP) (Quit: Leaving)
[12:57:21] *** Quits: z0w0 (zack@moz-A9182BA0.lns8.woo.bigpond.net.au) (Quit: Leaving.)
[13:01:39] *** Joins: akashj87_ (akash@97236D21.CA70E901.35E3DDC8.IP)
[13:02:05] *** Quits: akashj87 (akash@AB4E5A2B.CD3DEE44.35E3DDC8.IP) (Ping timeout)
[13:03:03] *** Quits: pyrac (pyrac@moz-2FEC2239.w92-149.abo.wanadoo.fr) (Quit: pyrac)
[13:08:30] *** Quits: jviereck (Adium@moz-92CFC059.dclient.hispeed.ch) (Quit: Leaving.)
[13:09:06] *** Joins: jviereck (Adium@moz-92CFC059.dclient.hispeed.ch)
[13:11:19] *** Quits: jviereck (Adium@moz-92CFC059.dclient.hispeed.ch) (Quit: Leaving.)
[13:11:49] *** Joins: pyrac (pyrac@moz-2FEC2239.w92-149.abo.wanadoo.fr)
[13:14:55] *** Quits: akashj87_ (akash@97236D21.CA70E901.35E3DDC8.IP) (Quit: Leaving)
[13:16:28] *** Quits: int3_ (int3_@moz-359A42F6.subnet-248.amherst.edu) (Client exited)
[13:19:32] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[13:23:37] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Ping timeout)
[13:25:54] *** Joins: hmax (hmax@moz-53A94453.yandex.net)
[13:28:35] *** Joins: seth (seth@moz-D840E602.dsl.static.sonic.net)
[13:30:20] *** Quits: seth (seth@moz-D840E602.dsl.static.sonic.net) (Ping timeout)
[13:32:53] *** Joins: jack (jack@EF36212C.8FA609AD.840029BC.IP)
[13:34:40] *** Quits: jack (jack@EF36212C.8FA609AD.840029BC.IP) (Ping timeout)
[13:52:54] *** Joins: rsaarelm (rsaarelm@moz-D1CB7158.dhcp.inet.fi)
[13:54:33] *** Joins: snowmantw (Mibbit@moz-69896760.cs.nccu.edu.tw)
[13:55:30] *** Quits: ysuzuki (ysuzuki@moz-50A58707.bbtec.net) (Client exited)
[13:55:30] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[13:57:35] <nmatsakis> kimundi: that's the idea, yeah.
[13:57:41] <nmatsakis> I *think* it all works out nicely?
[14:01:30] *** Joins: jfredett (jfredett@moz-35CE0253.bstnma.east.verizon.net)
[14:03:15] <dbaupp> is anyone else getting an ICE building librustc on incoming?
[14:08:21] <doener> stage0 built fine here
[14:10:04] *** Joins: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP)
[14:13:42] <kimundi> nmatsakis: For what it's worth, I'm for that change.
[14:17:12] <nmatsakis> kimundi: cool
[14:17:14] *** Joins: int3_ (int3_@moz-D17C1897.cs.umass.edu)
[14:22:17] <dbaupp> doener: thanks, looks like it was just it running out of ram
[14:26:44] *** Joins: catpig (catpig@moz-49BBE43B.dip0.t-ipconnect.de)
[14:27:17] *** Joins: jack (jack@EF36212C.8FA609AD.840029BC.IP)
[14:29:28] <haard> so, I installed pre-0.7/incoming, and now rustc complains that I have two versions of core (and presumably a lot of other stuff)... is the right way to handle this covered anywhere?
[14:29:43] <haard> (I already had 0.6 installed)
[14:30:31] <dbaupp> haard: delete the old installed ones
[14:31:35] <dbaupp> probably in /usr/local/lib/rustc/...
[14:31:47] <dbaupp> (if you're on linux)
[14:31:47] <haard> ok, so the simple way it is. Anything else than lib/*0.6.dylib likely to bite me?
[14:31:55] <haard> osx, but same difference
[14:32:38] <dbaupp> I just delete everything that's the old version, and I've never had breakage
[14:32:45] <nmatsakis> man the += operator code is so broken.
[14:32:53] <nmatsakis> PSA: Do not use += on vecs and strings.
[14:33:01] *** Joins: sinma (seb@moz-6A11C47C.fbx.proxad.net)
[14:33:03] <nmatsakis> until we fix some bugs :)
[14:33:06] <sinma> Hi
[14:33:17] <haard> dbaupp: ok, thanks
[14:33:53] <dbaupp> nmatsakis: are *=, -= etc broken too? (except they don't work with vec/strings, I guess)
[14:34:02] *** Quits: int3_ (int3_@moz-D17C1897.cs.umass.edu) (Client exited)
[14:34:09] <nmatsakis> dbaupp: all of the "op=" code is broken if the operator is overloaded
[14:34:12] <nmatsakis> dbaupp: otherwise it's just fine
[14:34:19] <sinma> How to read data from stdin in Rust?
[14:34:32] <nmatsakis> dbaupp: the plan is to make `+=` an operator of its own with respect to overloading, though
[14:34:35] <nmatsakis> dbaupp: which should fix the various problems
[14:34:54] <nmatsakis> sinma: see the core::io module, in particular io::stdin...
[14:35:09] *** Joins: int3_ (int3_@moz-D17C1897.cs.umass.edu)
[14:35:21] <sinma> How to see it? :D
[14:35:31] *** Quits: int3_ (int3_@moz-D17C1897.cs.umass.edu) (Client exited)
[14:35:42] <nmatsakis> sinma: I usually just browse the source :) src/libcore/io.rs, but I understand we have docs on the website or something like that
[14:35:52] <sinma> ok
[14:35:56] <dbaupp> sinma: http://static.rust-lang.org/doc/core/io.html
[14:36:09] <nmatsakis> dbaupp: thanks :)
[14:36:56] <dbaupp> nmatsakis: yeah, I've looked really briefly at the operator overloading code to see if i could add 'add_assign' etc, but then there were distractions
[14:36:57] <sinma> yes I know this page but after browsing & the source I donâ€™t know what function to use
[14:37:12] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[14:37:19] <haard> the docs could do with source expansion though, since they're really terse / just a listing of functions and types
[14:37:30] <dbaupp> sinma: io::stdin() gives you access to stdin
[14:37:37] <haard> I use the docs to browse and the source to see what stuff does
[14:37:44] <sinma> ok
[14:37:51] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[14:37:55] <nmatsakis> sinma: http://static.rust-lang.org/doc/core/io.html#implementation-of-readerutil-for-t-where-t-reader
[14:38:01] <nmatsakis> sinma: those are probably the methods you would be most interested in
[14:38:08] <dbaupp> And then the methods on Reader and ReaderUtil are heplful, e.g. each_line, read_lines
[14:38:11] <nmatsakis> sinma: e.g. io::stdin().read_char()
[14:38:27] <sinma> ok, I understand now :)
[14:39:20] <dbaupp> nmatsakis: re += overloading, would things that overload + get a default implementation of += ?
[14:39:28] *** Joins: pnkfelix1 (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[14:39:30] *** Quits: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Connection reset by peer)
[14:39:57] *** pnkfelix1 is now known as pnkfelix
[14:39:59] <sinma> but itâ€™s not explained in the tutorial, and a bit tricky for those not used to this minimal documentation
[14:40:44] <dbaupp> sinma: yeah, learning/using Rust is very much a trial-and-error process at the moment
[14:40:50] <sinma> I think itâ€™s a good idea to explain it in the tutorial, cause itâ€™s very useful to write little programs and give a try in Rust.
[14:41:11] <nmatsakis> dbaupp: once default methods are working, we could probably arrange for that, yes :)
[14:41:42] <dbaupp> oh, nice
[14:41:54] <dbaupp> is there a timeframe for default methods at all? :)
[14:41:56] <sinma> So, how to read an int? (thereâ€™s many functions with Â«intÂ» in there names)
[14:42:17] <dbaupp> (i've been hanging out for them since I first started rust, haha)
[14:42:24] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[14:42:32] <sinma> Hum Iâ€™m studip, there is return type of each function
[14:42:43] <haard> am I right in the assumption that 'rust run' does not allow me to pass arguments to the binary?
[14:42:56] <dbaupp> sinma: do you mean an int that is written as '1234', or from the actual bytes
[14:43:06] <bjz> sinma: fn foo() -> int; // returns an in?
[14:43:10] <bjz> *int
[14:43:15] <sinma> Whatâ€™s the difference between read_le_int and read_be_int?
[14:43:16] <dbaupp> haard: it should allow you to pass arguments
[14:43:31] <dbaupp> sinma: little-endian and big-endian
[14:43:33] <sinma> I just want the user enter an int
[14:43:50] <dbaupp> you want to read a string, and then use int::from_str
[14:44:09] <kimundi> haard: It didn't originally, but I think someone made a patch so it does it itm?
[14:44:10] <sinma> a bit like in Python
[14:44:11] <sinma> ?
[14:44:20] <dbaupp> e.g. let str = io::stdin().readline(); int::from_str(str);
[14:44:20] <sinma> Python3 I mean
[14:44:22] <kimundi> haard: Not sure, have to look in source
[14:44:26] <haard> dbaupp: ok... it gives me usage info on rust run when I try it
[14:44:28] <dbaupp> kimundi: that was me, and yes
[14:44:29] <sinma> ok
[14:44:48] <dbaupp> haard: 'rust run foo.rs args' should work?
[14:45:06] <sinma> So str is an int at the end
[14:45:07] <sinma> ?
[14:45:30] <dbaupp> sinma: no, you'll have to assign it to something
[14:45:36] <haard> ah, yes. wrong terminal, 0.6. on incoming it works fine.
[14:46:05] <dbaupp> rusti: let str = "1234"; let x = int::from_str(str); print(fmt!("%d", x))
[14:46:06] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/FATE
[14:46:23] <dbaupp> rusti: let str = "1234"; let x = int::from_str(str).get(); print(fmt!("%d", x))
[14:46:25] <rusti> 1234
[14:46:46] <sinma> ok
[14:47:00] <dbaupp> sinma: from_str returns an Option<int>, because the conversion can fail
[14:47:18] <dbaupp> haard: yay :)
[14:47:25] *** Joins: Erik (Erik-S@moz-252DBA2.hsd1.co.comcast.net)
[14:47:47] <sinma> Itâ€™s possible to do it in one line?
[14:48:26] <dbaupp> sinma: int::from_str(io::stdin().read_line()).get()
[14:48:29] <dbaupp> does that count?
[14:48:55] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[14:49:00] <sinma> itâ€™s a bitâ€¦ O_O for a little input ^^
[14:49:23] <bjz> rusti: match int::from_str("1234") { Some(n) => n, None => fail!(~"Could not read number") } // example of matching on Option<int>
[14:49:24] <rusti> 1234
[14:49:39] <dbaupp> sinma: would you prefer `input()` like in python?
[14:49:46] <kimundi> sinma: Well the libaries are still kinda crappy atm. ;)
[14:50:04] <sinma> I'm used to cin in C++
[14:50:12] <bjz> sinma: IO is being completely redone
[14:50:54] <dbaupp> sinma: it would be possible to do that style of reading because of the FromStr trait, but it's not implemented
[14:50:56] <sinma> Youâ€™re going to change everything??
[14:51:06] <sinma> ok
[14:53:45] <haard> is str::concat([~"what", ~"ever"]) the one true way of concatenating strings? 
[14:54:23] <dbaupp> rusti: ~"what" + ~"ever"
[14:54:25] <rusti> ~"whatever"
[14:54:57] <haard> huh. must've messed up my pointer types when I tried. again... =P
[14:55:53] <dbaupp> it works if the first argument is ~str, otherwise not
[14:56:14] *** Joins: int3_ (int3_@moz-D17C1897.cs.umass.edu)
[14:56:27] *** Quits: int3_ (int3_@moz-D17C1897.cs.umass.edu) (Client exited)
[14:57:53] *** Joins: libertas (libertas@98ADBCEC.786003BB.593B3862.IP)
[14:57:59] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[15:01:22] <haard> dbaupp: ah, yes, I've seen the mails about that, and then I forgot...
[15:01:29] <haard> dbaupp: thanks again!
[15:02:47] <haard> not ugly in any way: ~"" + name + ~".txt"
[15:03:07] <dbaupp> haard: fmt!("%s.txt", name)
[15:03:13] <kimundi> name.to_str() + ~".txt" ?
[15:03:16] <sinma> the syntax coloring of Rust in Kate is really awful, strings are a red which kills my eyes
[15:03:38] <haard> so many better options, thanks =)
[15:04:33] <kimundi> sinma: Well you can change that in kates options
[15:04:46] <sinma> ah right
[15:05:02] <sinma> but by default it must be a little lighter for the eyes
[15:05:07] <sinma> I think
[15:05:50] *** Quits: dbaupp (Thunderbir@moz-C599B201.lns20.syd6.internode.on.net) (Ping timeout)
[15:06:32] <sinma> Much much better like that
[15:06:45] *** Joins: graham_king (graham_kin@moz-61791D81.vc.shawcable.net)
[15:09:26] <sinma> Thereâ€™s no do {} while(); in Rust, right?
[15:10:12] <kimundi> sinma: Nope, have to use loop { ... if !cond { breakh; }} for that
[15:10:26] <kimundi> err, minus the 'h'
[15:10:40] <sinma> ^^
[15:11:34] <Diablo-D3> what, seriously?
[15:12:29] <sinma> how to exit the program? (without using Â«returnÂ»)
[15:12:56] <kimundi> Diablo-D3: Well, the do while loop got removed somewhere in the past because it was regarded as not that highly used in praxis. there is still 'while cond {}' and infinite 'loop {}'
[15:13:20] <Diablo-D3> kimundi: yeah, but do while is a classic
[15:14:13] <kimundi> Yeah, I was missing it myself :). But that way it at least sidesteps the issue of varibles being valid outside the loop body
[15:14:14] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Ping timeout)
[15:14:15] <haard> Wanting to write a string to a file; do I have to basically drop down to libc?
[15:14:18] <sinma> Yeah, using do {} while(); is in fact a problem when I need to use it ^^
[15:14:52] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[15:15:30] <sinma> because exit() donâ€™t exist, in a main function without return type, how to exit the program?
[15:16:04] <sinma> Ok I found myself: using return ();
[15:16:16] <Yurume> just return;.
[15:16:25] <graham_king> haard: No, you  io::file_writer  and call .write(..) on what it gives you.
[15:16:31] <kimundi> I guess if too many people miss it there could be a macro somewhere in the future. loop {  ...  break_unless!(cond) } or so.
[15:16:32] <Yurume> (yeah, `return` is a shorthand for `return ()` indeed)
[15:16:37] *** Joins: engla (engla@moz-BFD53D48.selucle.dyn.perspektivbredband.net)
[15:16:55] <sinma> Cool, even shorter! ^^
[15:16:58] <Yurume> there exists os::set_exit_status, but it wouldn't terminate the program immediately
[15:17:14] <sinma> return; is fine to me
[15:18:03] <haard> graham_king: thanks. had I scrolled down half a page before asking I would have seen it. It's interesting being a total newbie again. Humbling even.
[15:18:28] *** Joins: int3_ (int3_@moz-D17C1897.cs.umass.edu)
[15:18:50] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[15:18:56] <graham_king> haard: :-) I agree!
[15:19:31] *** Quits: int3_ (int3_@moz-D17C1897.cs.umass.edu) (Client exited)
[15:19:33] <sinma> so, in module rand there are a rand function for int
[15:19:38] <sinma> How to use it?
[15:19:52] <sinma> rand::random and something else?
[15:19:53] <Yurume> what version of rustc are you using?
[15:20:00] <sinma> the last stable
[15:20:11] <Yurume> not 0.6 release?
[15:20:22] <sinma> 0.6
[15:20:28] <Yurume> ah, yeah
[15:20:53] <sinma> Hem, by stable I mean not the trunk
[15:21:03] *** Joins: jviereck (Adium@moz-692F639F.dclient.hispeed.ch)
[15:21:03] <Yurume> or incoming branch
[15:21:05] <Yurume> anyway
[15:21:14] <Yurume> you can use core::rand::random()
[15:21:30] <Yurume> but for finer-grained generation you would want core::rand::task_rng()
[15:21:36] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[15:21:50] <Yurume> and `use core::rand::RngUtil;` definition.
[15:22:22] <sinma> yeah, I understand
[15:22:50] <sinma> the core is not mandatory because thereâ€™s no function with the same name in other modules?
[15:23:21] <Yurume> unless you are using `use` definitions you can't omit `core::` part
[15:23:30] *** Joins: LimeBurst (me@247D1419.D73964AC.27A8748.IP)
[15:23:49] <Yurume> several core modules are `use`d by default though, that's why you can use `io::println` or even `println` directly
[15:24:02] <sinma> ok
[15:24:12] *** Joins: Blub\w (wry@moz-115FC52C.wireless.dyn.drei.com)
[15:27:03] <haard> and stuck yet again: trying to write to file but references to io::FileFlag.Create -> error: unresolved name: `io::FileFlag`.
[15:27:29] <kimundi> core::io::FileFlag ?
[15:27:42] *** Joins: josh (josh@moz-6FB23C25.hvc.res.rr.com)
[15:28:04] *** Joins: lmandel (lmandel@moz-9CE00FC0.holiday-inn-express.mozilla.hq)
[15:28:18] <kimundi> no wait, io is imported...
[15:28:22] <graham_king> haard: It's an enum variant, so you want one of these: http://static.rust-lang.org/doc/core/io.html#enum-fileflag
[15:28:31] <graham_king> Append, Create, etc
[15:28:45] <Yurume> haard, you just write `io::Create`.
[15:29:05] <graham_king> The variants of an enum are in your name space when you import the enum. That wasn't obvious to me at first.
[15:29:10] <Yurume> so enum variants like `Append` and `Create` lives the same namespace as enums like `FileFlag`
[15:29:16] <haard> aaah, totally missed that. thanks!
[15:29:26] *** Quits: aklt (aklt@83B8238.6BE5A349.B330AC0A.IP) (Quit: leaving)
[15:30:14] <graham_king> haard: If you haven't already, I'd recommend both the official Tutorial, and http://www.rustforrubyists.com/book/index.html
[15:30:29] <graham_king> They both helped me a lot.
[15:30:37] *** Joins: seth (seth@moz-D840E602.dsl.static.sonic.net)
[15:30:45] *** Quits: lmandel (lmandel@moz-9CE00FC0.holiday-inn-express.mozilla.hq) (Quit: lmandel)
[15:32:01] *** Joins: int3_ (int3_@moz-D17C1897.cs.umass.edu)
[15:32:14] <haard> the tutorial I've done, and re-read a couple of times, not read the rubyists book since I've not done ruby in a couple of years, but I'll have a look
[15:32:24] *** Quits: seth (seth@moz-D840E602.dsl.static.sonic.net) (Ping timeout)
[15:32:26] *** Quits: int3_ (int3_@moz-D17C1897.cs.umass.edu) (Client exited)
[15:33:35] <graham_king> I didn't know any Ruby, it was still helpful
[15:33:36] *** Quits: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net) (Ping timeout)
[15:35:52] *** Joins: thou (thou@moz-1C1CA9F7.fasttrackcomm.net)
[15:40:09] <sinma> Itâ€™s easy to generate some random numbers, but how to use RngUtil to generate numbers in a know range?
[15:42:16] <bstrie> nmatsakis: I'm excited for the dynamically-sized types proposal, but is there a potential perf hazard by going from thin pointers to fat pointers?
[15:43:34] <nmatsakis> bstrie: I don't think so, we'd want to evaluate that. I actually think perf could improve. the main difference is that it'd take a bit more memory
[15:43:41] <nmatsakis> though it probably all comes out in the wash
[15:44:01] *** Joins: int3_ (int3_@moz-D17C1897.cs.umass.edu)
[15:44:17] *** Quits: int3_ (int3_@moz-D17C1897.cs.umass.edu) (Client exited)
[15:45:42] <nmatsakis> bstrie: for something like ~[], you have the same total number of words of data, but they move around
[15:46:07] <nmatsakis> bstrie: for the rarely used @[], every reference to the array would have its own copy of the length, so total memory use increases somewhat.
[15:46:12] <nmatsakis> but that doesn't concern me at all
[15:47:29] <kimundi> nmatsakis: Would that change allow 'deep'-borrows? ~[~str] => &[&str] for example. Or would there be other typesystem-related reasons that wouldn't work?
[15:47:30] <sinma> How to generate a number in a know range??
[15:47:49] <kimundi> sinma: When in doub, do it manually. :)
[15:48:11] <kimundi> Rust is missing a lot of convenience functions still.
[15:48:43] <nmatsakis> kimundi: it doesn't allow that, because of the boxing.
[15:48:48] <nmatsakis> kimundi: you still have to skip the headers.
[15:48:52] <Yurume> sinma, task_rng().gen_int_range(a, b)?
[15:48:56] *** Joins: jclements (jclements@moz-BE33DA21.fw1.sfo1.mozilla.net)
[15:49:01] <Yurume> at least it has a method for that
[15:49:15] <nmatsakis> kimundi: tbh I'd be nervous about such a change anyway, though if we didn't have to worry about headers it might be plausible to make it work
[15:49:26] <nmatsakis> kimundi: at least I'd want to think it through a lot :)
[15:49:33] <kimundi> nmatsakis: But wouldn't the array just be a list of (ptr, len) tuples?
[15:49:49] <nmatsakis> kimundi: well, the thing is that the ptr in a ~str points at a Box<String>
[15:49:55] <nmatsakis> kimundi: and the ptr in a &str points at a String
[15:49:57] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[15:50:07] <nmatsakis> kimundi: in other words, there are some headers before the string data in the case of ~str and @str
[15:50:17] <sinma> Â«unresolved name: `task_rng`.Â»
[15:50:20] <nmatsakis> kimundi: it's possible that work on the GC could make those unnecessary, though we may want to reserve the right to add them back :)
[15:50:45] <kimundi> Ah, I though that was handled such that the pointer points at tha start of the data, and headers are at an negative offset from that.
[15:51:15] <nmatsakis> kimundi: not now. it can be done that way, but that carries other costs
[15:51:22] <tristram> rusti from master isnâ€™t usable (it crashes as soon a type "1+1"), am I doing something completly wrong, or is it known '
[15:51:28] <nmatsakis> kimundi: (takes more memory that way to keep things aligned, potentially quite a bit more memory)
[15:51:33] <kimundi> tristram: Known
[15:51:53] <tristram> thanks
[15:52:11] <sinma> Yurume: Â«unresolved name: `task_rng`.Â»
[15:52:15] <nmatsakis> kimundi: still, it makes that possibility tantalizingly close...
[15:52:31] <Yurume> sinma, as I've mentioned before it is actually `core::rand::task_rng()`
[15:52:34] <kimundi> nmatsakis: Ah, okay don't know about stuff like alignment :). Just thought it would be nice if that falls of from the change.
[15:52:39] <Yurume> and you need `RngUtil` for `gen_int_range` method
[15:52:58] <sinma> Yurume: same error
[15:53:12] <Yurume> hmm
[15:53:15] <sinma> Hem another error
[15:53:24] <sinma> type `@core::rand::Rng` does not implement any method in scope named `gen_int_range`
[15:53:39] <Yurume> do you have `use core::rand::RngUtil;`?
[15:54:04] <nmatsakis> kimundi: yeah. well, as I said, it ... is at least more possible than before. presuming nobody pokes a hole in my idea, it'd be something to consider afterwards maybe.
[15:54:29] <kimundi> nmatsakis: It would certainly make pointers in nested structural types less painful.
[15:55:14] <sinma> Yurume: no
[15:55:23] <Yurume> sinma, you need it
[15:55:38] <Yurume> so wrapping it up:
[15:55:39] <sinma> But if I put it in my source code, itâ€™s the same
[15:55:45] <Yurume> wait a min
[15:55:55] <Yurume> what error message do you get?
[15:56:04] <Yurume> still unresolved name?
[15:56:20] <sinma> no no it works now, thanks a lot
[15:56:29] <kimundi> Would disarm some common annoyances like "this function wants &[~str], but I just want to put some static strings in there. Why do I need a conversion function?"
[15:56:31] <Yurume> aha
[15:56:32] <Yurume> yeah
[15:56:37] <sinma> (donâ€™t hack two different source codes at the same times!)
[15:56:41] <Yurume> lol
[15:57:02] <Yurume> so wrapping up: many libraries has both types and traits
[15:57:30] <kimundi> But yeah, the change is big enough as it, allowing deep borrows should be considerd in details afterwards if at all. :)
[15:57:38] <Yurume> `use`-ing types and traits alone does not import associated implementations for traits
[15:57:57] <Yurume> (unless you are using an wildcard: `use core::rand::*`)
[15:58:06] <sinma> But Iâ€™ve a problem with the following code: Â«x if(x as uint == myst_nb) => { io::println(fmt!("Tu as gagnÃ© en %? coups!", nb_try)); break; }Â»
[15:58:07] *** Quits: engla (engla@moz-BFD53D48.selucle.dyn.perspektivbredband.net) (Ping timeout)
[15:58:15] <sinma> Â«expected `uint` but found `int` (expected uint but found int)Â»
[15:58:39] <Yurume> in Rust `int` and `uint` are different types, you need to check a type of `x` first
[15:58:52] <Yurume> or other variables
[15:59:00] <Yurume> maybe `myst_nb` was `int`
[15:59:01] <sinma> and I do: Â«Â»
[15:59:03] <sinma> let myst_nb = core::rand::task_rng().gen_int_range(1, 100);
[15:59:04] <sinma> 				let mut user_try = 0;
[15:59:20] <Yurume> aha
[15:59:24] <sinma> I need to force his type?
[15:59:45] <Yurume> sinma, use `gen_uint_range` instead of `gen_int_range` then
[16:00:17] <sinma> in fact, remove the cast in my match statement is a nice solution
[16:00:26] <Yurume> that is another solution
[16:00:30] <Yurume> in many cases you don't need to specify integer types manually
[16:00:51] *** Quits: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk) (Client exited)
[16:00:51] <sinma> Iâ€™ve put it before because the random() function returns an uint or something like that
[16:00:55] <Yurume> only casts and non-type-agnostic functions force them
[16:01:05] *** Quits: Erik (Erik-S@moz-252DBA2.hsd1.co.comcast.net) (Ping timeout)
[16:01:06] <Yurume> so it is good to look at those for such type errors
[16:02:54] *** Joins: jorendorff (jorendorff@moz-FAB36621.hsd1.tn.comcast.net)
[16:03:41] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[16:05:18] *** Quits: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net) (Ping timeout)
[16:07:22] *** Quits: burntsushi (burntsushi@moz-27A1B1D8.dhcp.oxfr.ma.charter.com) (Quit: Konversation terminated!)
[16:09:00] *** Quits: jviereck (Adium@moz-692F639F.dclient.hispeed.ch) (Quit: Leaving.)
[16:10:03] <graham_king> I love the compilers "Did you mean?". I'm guessing that's why core has levdistance.
[16:10:11] *** Joins: lmandel (lmandel@2557E599.66715431.D25A875A.IP)
[16:10:23] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[16:11:01] *** Joins: Kruppe (user@moz-4DDA8AB8.uwaterloo.ca)
[16:12:43] *** Quits: victorporof (victorporo@9310F178.477C3F8E.79933D60.IP) (Quit: victorporof)
[16:15:48] *** Quits: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se) (Ping timeout)
[16:17:47] *** Joins: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se)
[16:20:20] *** Joins: trapni (trapni@2FE54BF3.B4F8FFE1.A6BD37EB.IP)
[16:20:24] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[16:20:24] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/S3b1vg
[16:20:24] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[16:20:29] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[16:20:29] <ghrust> 01[13rust01] 15bors pushed 9 new commits to 06auto: 02http://git.io/FdeXeQ
[16:20:29] <ghrust> 13rust/06auto 145d79f94 15Erick Tryzelaar: core: Remove use of deprecated `drop`
[16:20:29] <ghrust> 13rust/06auto 147d6d002 15Erick Tryzelaar: syntax: remove parsing destructors
[16:20:29] <ghrust> 13rust/06auto 14c2e1f47 15Erick Tryzelaar: rustc: remove the rest of drop...
[16:20:31] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[16:20:42] *** Quits: jorendorff (jorendorff@moz-FAB36621.hsd1.tn.comcast.net) (Quit: jorendorff)
[16:20:53] <haard> if in a.rs I put 'mod b;', and in b.rs I define and implement traits (for ~[u8]), how can I make them useable in a.rs? When everything was in a.rs it worked fine, now I get error: type `~str` does not implement any method in scope named `encode`
[16:21:15] <haard> s/for ~[u8]/for ~str/.
[16:21:18] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[16:21:21] <haard> but likewise for u8
[16:21:46] <graham_king> haard: You need "pub impl ..."
[16:21:54] <haard> dammit, of course
[16:21:56] <haard> thanks
[16:22:13] <kimundi> haard: You need to make tkhe traid public, and import that in a.rs
[16:22:29] <graham_king> haard: I made some notes whilst I was learning, might be useful: http://www.darkcoding.net/software/rust-what-i-learnt-so-far/
[16:22:33] * graham_king pimps his own blog post
[16:22:38] <kimundi> pub impl doesn't do anything if its a trait impl
[16:23:04] <haard> ooo, I started reading that yesterday(?) but on my phone and lost it - thanks =)
[16:23:17] *** Quits: katis (katis@40C8AF65.EFDC2270.EE6E63A5.IP) (Ping timeout)
[16:23:39] *** Joins: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP)
[16:23:44] <kimundi> 'put impl TYPE': Ok. 'pub impl TRAIT for TYPE': wrong, need only pub on the trait itself.
[16:26:04] *** Quits: jclements (jclements@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[16:26:25] *** Quits: sinma (seb@moz-6A11C47C.fbx.proxad.net) (Quit: Konversation terminated!)
[16:26:37] *** Joins: akashj87 (akash@77BEEC8F.311ED440.35E3DDC8.IP)
[16:26:47] *** Joins: jclements (jclements@moz-C03D0C61.vlan426.asr1.sfo1.gblx.net)
[16:27:24] <haard> hm, not getting it to work, same error. playing around a bit
[16:28:04] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[16:28:14] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[16:28:21] <ssbr> I can't think of a reason to have a private implementation of a public trait, but that's still a little unexpected :(
[16:28:25] *** Quits: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Quit: Leaving.)
[16:28:26] *** Quits: akashj87 (akash@77BEEC8F.311ED440.35E3DDC8.IP) (NickServ (GHOST command used by akashj87_))
[16:28:45] *** Joins: akashj87 (akash@F0CC2774.F644F425.35E3DDC8.IP)
[16:28:48] *** Quits: pnkfelix|rcirc (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Quit: rcirc on GNU Emacs 24.2.1)
[16:28:53] <kimundi> ssbr: Hm? What do you mean?
[16:29:03] *** Joins: engla (engla@moz-BFD53D48.selucle.dyn.perspektivbredband.net)
[16:29:13] <haard> hm, not getting it to work, same error. playing around a bit
[16:29:22] <kimundi> ssbr: impls of trait have no visibility modiefiers, neither pub nor priv
[16:29:31] <ssbr> kimundi: Right, that's what I find unexpected.
[16:29:38] * haard presses arrow-up, enter in wrong terminal
[16:29:41] <ssbr> Even though I don't have a justification for wanting them.
[16:29:51] <kimundi> ssbr: Because the thing that decides that is the trait definition itself, so only that has it
[16:29:57] <ssbr> and certainly a public implementation of a private trait makes no sense
[16:30:36] <ssbr> kimundi: yes, I know, you said that :(
[16:30:47] <kimundi> ssbr: Having them would make sense if you could implement any trait on any typa anywhere.
[16:30:58] <ssbr> That's probably it.
[16:31:08] *** Joins: seth (seth@moz-D840E602.dsl.static.sonic.net)
[16:31:19] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[16:31:58] *** Quits: ircloggr (nodebot@moz-218B8E8E.compute-1.amazonaws.com) (Client exited)
[16:32:08] *** Joins: ircloggr (nodebot@moz-218B8E8E.compute-1.amazonaws.com)
[16:32:08] <kimundi> ssbr: But because of the cohorence rules, the impl either has to be in the same module as the type or the type. So you can either make the trait private, or the type. :)
[16:32:22] *** Joins: blitter (blitter@moz-7C98731E.dyn.centurytel.net)
[16:32:23] <ssbr> kimundi: Yes
[16:32:35] <ssbr> but I wonder if anyone would ever want a public type with a private trait implementation
[16:32:37] <nmatsakis> erickt: ping
[16:32:54] *** Quits: seth (seth@moz-D840E602.dsl.static.sonic.net) (Ping timeout)
[16:33:40] <nmatsakis> ssbr: conceivably, but we didn't want to deal with it. arguably, we should make it required to write `pub TRAIT for TYPE` to reserve the space to define private impls later...
[16:33:53] <nmatsakis> *`pub impl TRAIT for TYPE`
[16:34:08] *** Joins: Palmik (palmik@moz-DADC71F0.pks.muni.cz)
[16:34:19] <ssbr> nmatsakis: Everything you said makes sense to me :)
[16:36:48] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[16:37:24] <haard> I can't get it to work no matter where I add pub; in the same file it works fine, if from a 'mod x;' it does not
[16:37:31] <lucian> nmatsakis: defaulting to public forever doesn't seem that bad
[16:37:56] <nmatsakis> lucian: thing is that we have no priv keyword :)
[16:38:02] <nmatsakis> lucian: oh wait, yes we do, what am I saying
[16:38:10] <nmatsakis> lucian: anyhow, it doesn't, it's ut mil
[16:38:16] <nmatsakis> lucian: *just mildly inconsistent
[16:39:56] <kimundi> haard: Could you write down the layout of your two files and their content somewhere?
[16:40:07] *** Joins: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP)
[16:40:07] *** ChanServ sets mode: +o pcwalton
[16:43:23] *** Joins: dherman (dherman@2557E599.66715431.D25A875A.IP)
[16:43:23] *** ChanServ sets mode: +o dherman
[16:43:57] <haard> kimundi: I can do better - https://github.com/haard/rust-codecs/blob/master/codec_test.rs
[16:44:19] <haard> this is the file 'using' the traits, and as lain out now it works 
[16:44:46] *** Quits: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP) (Client exited)
[16:44:59] <haard> but if I move the traits to codecs_base.rs it breaks
[16:45:11] *** Quits: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[16:45:47] *** Quits: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP) (Ping timeout)
[16:46:07] <kimundi> you need to add a 'usecodec_base::{Encoable, Decodable}' so that it has the traits in scope then.
[16:46:27] *** Joins: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP)
[16:46:27] *** ChanServ sets mode: +o pcwalton
[16:46:37] <kimundi> 'use codec_base::{Encoable, Decodable}'
[16:47:41] *** Quits: doener (doener@moz-724BBC7C.unitymediagroup.de) (Quit: leaving)
[16:47:43] <haard> that gives me an unresolved import
[16:48:08] *** Quits: akashj87 (akash@F0CC2774.F644F425.35E3DDC8.IP) (Ping timeout)
[16:48:10] <haard> I really don't grok the use/mod/crate parts yet
[16:48:32] <kimundi> what error do you get?
[16:48:54] <kimundi> Could you gist up how the files look if you get the error?
[16:49:27] <haard> argh. now it works
[16:49:39] <haard> I was so very certain I tried that exact thing
[16:50:21] <haard> is pub needed both on trait and the fn in the trait?
[16:50:30] *** Joins: ysuzuki (ysuzuki@moz-60FA9D06.net119083145.t-com.ne.jp)
[16:50:41] <kimundi> Not sure
[16:51:37] <kimundi> Note that you have to write 'use self::codec_base::{Encoable, Decodable}' if the parent module itself is also just a submodule
[16:51:44] <pcwalton> nmatsakis: the map fn would need Sized, right?
[16:51:58] <haard> just tested, does not seem to make a difference without pub on the fn
[16:52:02] <pcwalton> also something like fn do_something<R>(f: &fn(int) -> R) -> R
[16:52:04] <pcwalton> would need to become
[16:52:12] <pcwalton> fn do_something<R:Sized>(f: &fn(int) -> R) -> R
[16:52:13] *** Joins: FrozenCow (FrozenCow@moz-9DF5D010.dynamic.upc.nl)
[16:52:25] <pcwalton> I think Sized would have to appear quite a lot
[16:52:28] <haard> kimundi: ok, thanks. moving stuff around a lot so in the end I might get how this works...
[16:54:07] <kimundi> pcwalton: Wouldn't function arguments and return value always imply Sized?
[16:54:13] <pcwalton> I'm not sure
[16:54:29] <kimundi> pcwalton: In nmatsakis proposal they do
[16:54:36] <pcwalton> oh, OK
[16:54:39] *** Joins: int3_ (int3_@9A375198.26321F00.F7721B25.IP)
[16:54:45] <pcwalton> didn't read closely enough
[16:55:02] <pcwalton> I do kind of wish they didn't so you could more easily write custom smart pointers
[16:55:04] <pcwalton> but I realize that's hard
[16:56:24] *** Quits: int3_ (int3_@9A375198.26321F00.F7721B25.IP) (Ping timeout)
[16:58:27] *** Quits: FrozenCow (FrozenCow@moz-9DF5D010.dynamic.upc.nl) (Client exited)
[16:59:26] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[17:02:04] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[17:02:05] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[17:02:05] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/FdeXeQ
[17:02:05] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[17:02:08] *** Joins: pnkfelix|rcirc (pnkfelix@moz-43495417.fbx.proxad.net)
[17:02:17] <nmatsakis> pcwalton: yes, it would.
[17:02:20] <pcwalton> yay, old drop is gone
[17:03:16] <nmatsakis> pcwalton: fn map<A:Sized,B:Sized>(a: &[A], b: &fn(&A) -> B) -> ~[B]
[17:03:38] *** Joins: jgilbert (jgilbert@moz-E7782931.hsd1.ca.comcast.net)
[17:03:48] <pcwalton> nmatsakis: it would be nice if this extended to allowing people to write their own custom smart pointers that can be used to wrap dynamically sized types
[17:03:54] <pcwalton> ARC<fn(...)>
[17:04:04] <nmatsakis> pcwalton: that seems... plausible?
[17:04:08] <nmatsakis> why would this not work?
[17:04:13] <pcwalton> that however requires arguments to be dynamically sized
[17:04:16] <nmatsakis> why?
[17:04:20] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[17:04:23] <pcwalton> fn ARC<T>(x: T) -> ARC<T>
[17:04:27] <pcwalton> so you can do
[17:04:28] <nmatsakis> it's going to be
[17:04:32] <nmatsakis> ARC<T>(x: *T)
[17:04:32] <pcwalton> ARC([1, 2, 3, 4, 5])
[17:04:36] <nmatsakis> I see.
[17:04:40] <pcwalton> so requires a copy? :(
[17:04:48] <pcwalton> ideally it would be able to eliminate that copy
[17:04:50] <pcwalton> and just use DPS
[17:05:00] <nmatsakis> yeah, I don't know how that would work
[17:05:26] <pcwalton> it's worth thinking about, I think
[17:05:35] <pcwalton> maybe we need a closure or something
[17:05:37] <nmatsakis> at minimum, we'd have to use the ARC(|| [1, 2, 3, 4, 5])
[17:05:40] <pcwalton> yes
[17:05:48] <nmatsakis> but you'd also need some way to tell the ARC how much space to allocator
[17:05:49] <nmatsakis> *allocate
[17:05:55] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[17:06:03] <nmatsakis> which is precisely what's not present in the type
[17:06:13] <nmatsakis> it seems like something a macro might address
[17:06:20] <pcwalton> it would need to be able to, at runtime, introspect its dynamically-sized argument to ask "how much space are you *really*?"
[17:06:29] <nmatsakis> but before it's constructed
[17:06:34] <nmatsakis> and before the closure is even called
[17:06:36] <pcwalton> yes
[17:06:40] <nmatsakis> it's really a literal form you want
[17:06:47] <nmatsakis> hence the idea to use a macro
[17:07:00] <nmatsakis> that desugars into the steps to build your ARC
[17:07:08] <pcwalton> yeah, that might work.
[17:07:32] <nmatsakis> interesting, I hadn't thought about this application
[17:07:39] <nmatsakis> but it does seem that something like this is a necessary first step
[17:07:50] <pcwalton> yes, I've thought a lot about custom smart pointers
[17:07:55] *** Joins: int3_ (int3_@moz-DCBE00F8.subnet-248.amherst.edu)
[17:08:01] <lucian> somewhat related, would it be possible at some point to have polymorphism between @ and an ARC type?
[17:08:04] <pcwalton> partially because I think I may prefer shared_ptr<T> to @T and unique_ptr<T> to ~T :)
[17:08:13] <pcwalton> and would like to typedef them
[17:08:41] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[17:09:02] *** Joins: mschifer (Adium@2557E599.66715431.D25A875A.IP)
[17:09:20] *** Quits: engla (engla@moz-BFD53D48.selucle.dyn.perspektivbredband.net) (Ping timeout)
[17:09:48] *** Quits: jgilbert (jgilbert@moz-E7782931.hsd1.ca.comcast.net) (Ping timeout)
[17:10:08] *** Quits: dcamp (dcamp@moz-930D5B64.hsd1.wa.comcast.net) (Ping timeout)
[17:10:18] <nmatsakis> lucian: that would certainly be much easier with this proposal, since I think it would make it much easier to have a trait you can use for code that handles both
[17:10:48] <lucian> persistent data structures in particular would benefit from this
[17:11:00] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[17:11:00] <nmatsakis> lucian: yes, I've wanted to toy around with making a trait for this reason
[17:11:01] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[17:11:23] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:11:27] <nmatsakis> lucian: I think you could...maybe do it today?
[17:12:31] <lucian> i haven't looked at it for a while, i don't know
[17:12:37] <lucian> my persistent vector has bitrotted
[17:13:13] *** Joins: dcamp (dcamp@moz-930D5B64.hsd1.wa.comcast.net)
[17:13:20] <haard> if vec += vec is inadvisable, is there a workaround except for iterating explicitly?
[17:14:04] <strcat> push_all/push_all_move
[17:14:28] <strcat> += vec does vec + vec and then assigns to the LHS
[17:14:51] <strcat> it it has to allocate a whole new vector and copy all the elements to it
[17:15:36] <lucian> nmatsakis: i could write it today twice, i don't know how i could have a trait for matching and constructing either @ or ARC
[17:15:45] <haard> so, the issues with += is that it is naive, not that it's broken?
[17:15:52] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[17:16:00] <strcat> heftig: += is naive, it uses Add instead of an in-place assignment trait
[17:16:03] <strcat> haard: *
[17:16:09] * strcat sucks at tab completion
[17:16:29] <haard> ok, thanks!
[17:16:48] <pcwalton> https://twitter.com/davecheney/status/329515195812675584 this is rude
[17:16:57] <pcwalton> from a Go core team member too
[17:18:46] *** Quits: ysuzuki (ysuzuki@moz-60FA9D06.net119083145.t-com.ne.jp) (Client exited)
[17:20:12] <nmatsakis> I...don't get it, really.
[17:20:47] *** Quits: jack (jack@EF36212C.8FA609AD.840029BC.IP) (Quit: Leaving.)
[17:21:50] *** Joins: gopi (gopi@moz-4B2225B3.hsd1.ca.comcast.net)
[17:23:02] <graham_king> Meh. They're both really interesting languages, IMHO. I think it's easy to mis-interpret a 140 char message.
[17:23:28] <Diablo-D3> hahahahah
[17:23:30] <Diablo-D3> oh man
[17:23:51] <Diablo-D3> it seems Im not the only asking that
[17:23:52] *** Quits: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[17:25:03] <pcwalton> it's because of language maturity
[17:25:10] *** Quits: catpig (catpig@moz-49BBE43B.dip0.t-ipconnect.de) (Quit: Verlassend)
[17:25:14] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[17:25:15] <pcwalton> the obvious reason
[17:31:45] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Quit: Computer has gone to sleep.)
[17:34:28] *** Joins: jack (jack@EF36212C.8FA609AD.840029BC.IP)
[17:38:37] *** Joins: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP)
[17:40:32] *** Quits: bleibig (bleibig@moz-58EF3B3A.rochester.res.rr.com) (Quit: bleibig)
[17:40:40] <haard> I think I'm in love with rustc
[17:41:59] *** Parts: Diablo-D3 (diablo@moz-52AA8794.port.east.myfairpoint.net) ()
[17:42:01] *** Joins: Diablo-D3 (diablo@moz-52AA8794.port.east.myfairpoint.net)
[17:43:10] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[17:44:51] *** Quits: pnkfelix|rcirc (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[17:45:20] *** Joins: lkuper (lkuper@CB5A6754.5693A486.EA8B5958.IP)
[17:46:01] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[17:46:10] <pcwalton> whee, 187 borrow check errors in librustc
[17:46:53] <otters> "good question"?
[17:47:28] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[17:47:47] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:48:09] *** Joins: ysuzuki (ysuzuki@moz-60FA9D06.net119083145.t-com.ne.jp)
[17:48:36] <kimundi> pcwalton: Almost there, eh? :)
[17:49:27] <pcwalton> kimundi: at least it passes typeck now!
[17:49:43] <pcwalton> I really had no idea eliminating mutable fields from a couple of modules of libstd would have this much fallout
[17:49:44] <kimundi> haha :)
[17:49:52] <pcwalton> the serializer has not been INHTWAMA-ified
[17:50:07] *** Joins: Blei (philipp@moz-96D25F7A.cust.bluewin.ch)
[17:51:16] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:51:37] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[17:52:23] *** Quits: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr) (Ping timeout)
[17:53:05] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[17:53:05] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/eMdKOw
[17:53:05] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[17:53:07] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[17:53:07] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/6B-umw
[17:53:07] <ghrust> 13rust/06auto 1400ce4a4 15Jesse Luehrs: libc bindings for glob.h...
[17:53:07] <ghrust> 13rust/06auto 144cbcf54 15Jesse Luehrs: add a higher level glob() function to os...
[17:53:07] <ghrust> 13rust/06auto 144159372 15Jesse Luehrs: glob_t should be public on all platforms
[17:53:09] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[17:53:53] <pcwalton> oh great, every method in metadata::encoder needs to be duplicated for stage0 and not(stage0)
[17:54:16] *** Joins: graydon (Adium@A5087023.2354C43D.D8E68FF6.IP)
[17:54:16] *** ChanServ sets mode: +qo graydon graydon
[17:55:37] *** Quits: haard (fredrik@moz-6A86987C.dynamic.se.alltele.net) (Ping timeout)
[17:56:32] *** Joins: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr)
[17:56:35] *** Quits: jack (jack@EF36212C.8FA609AD.840029BC.IP) (Quit: Leaving.)
[17:57:02] *** Joins: jack (jack@EF36212C.8FA609AD.840029BC.IP)
[17:57:15] <graydon> is anyone presently looking at the incoming breakage (alignment of tags)?
[17:57:16] *** Quits: int3_ (int3_@moz-DCBE00F8.subnet-248.amherst.edu) (Client exited)
[17:57:26] <pcwalton> don't think so
[17:57:27] *** Quits: gopi (gopi@moz-4B2225B3.hsd1.ca.comcast.net) (Ping timeout)
[17:57:30] <graydon> ok
[17:57:31] <pcwalton> we have alignment of tags issues still? :(
[17:57:32] <graydon> I will look
[17:57:39] <graydon> seems so
[17:57:41] <pcwalton> ugh
[17:57:54] <strcat> graydon: my chain of cron jobs seems to work ;p
[17:58:02] <graydon> strcat: \o/
[17:58:04] <graydon> what do they do?
[17:58:20] <strcat> well there's one that builds rust from incoming every day and puts it in an arch linux repo
[17:58:28] <strcat> and then another that updates rusti (the bot) to that package
[17:58:40] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[17:58:43] <strcat> I haven't dealt with generating deltas and removing the old builds though
[17:59:00] *** Joins: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net)
[17:59:10] <strcat> http://pkgbuild.com/~thestinger/repo/x86_64/ magic
[17:59:16] *** Quits: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[17:59:23] <strcat> and soon my space on that server is going to run out and I'll have to do something about the old ones ;p
[18:00:04] <strcat> assuming I have a space limit...
[18:02:59] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[18:04:16] <strcat> btrfs hates me apparently
[18:04:25] <strcat> I guess I'm not allowed to see the quota I know is there
[18:06:36] *** Joins: int3_ (int3_@moz-DCBE00F8.subnet-248.amherst.edu)
[18:06:57] <pcwalton> "buckets: ~[@~[entry<T>]]
[18:07:06] <pcwalton> somehow I think that is not as efficient as it could be
[18:07:18] <kimundi> hehe :)
[18:07:25] <pcwalton> unique_ptr<[shared_ptr<unique_ptr<[entry<T>]>>]>
[18:07:36] <kimundi> uuurg
[18:07:43] <otters> >]>>]>
[18:07:46] <otters> that kind of looks like a fish
[18:07:47] <strcat> well ~[] more like a plan old std::vector ;p
[18:07:50] <strcat> plain*
[18:07:51] *** Parts: mschifer (Adium@2557E599.66715431.D25A875A.IP) ()
[18:07:55] <pcwalton> it's brainf*ck :)
[18:08:20] <strcat> std::vector<std::shared_ptr<std::vector<entry<T>>>> ;p
[18:08:48] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[18:08:52] <strcat> and I don't want to think about the syntax for constructing it
[18:08:59] <pcwalton> I really like the dynamically sized types proposal
[18:09:13] <pcwalton> it decouples vector-ness from storage
[18:09:23] <pcwalton> which is a really nice improvement over C++
[18:10:23] *** Joins: akashj87 (akash@7F0C8BA4.F09595B1.35E3DDC8.IP)
[18:10:24] <erickt> nmatsakis: pong
[18:10:32] *** Quits: dherman (dherman@2557E599.66715431.D25A875A.IP) (Quit: dherman)
[18:10:42] <strcat> pcwalton: C++ strings are especially horrible, since a string constant doesn't know how big it is
[18:10:50] <pcwalton> oh yeah, that's true
[18:10:55] <strcat> compilers usually specialize strlen though
[18:11:05] <strcat> to work on string constants at compile-time
[18:11:08] <strcat> but not guaranteed
[18:12:59] <pcwalton>  10 files changed, 4911 insertions(+), 407 deletions(-)
[18:13:12] <jclements> JESUS: antlr is slow.
[18:13:25] <pcwalton> jclements: well, your grammar is LL(*)
[18:13:46] <pcwalton> due to the unbounded lookahead when parsing "maybe-type-or-pattern" functions
[18:14:04] <jclements> specifically, LEXING is 18x slower in antlr than in Racket, for heaven's sake. just lexing.
[18:14:37] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[18:14:37] *** ChanServ sets mode: +o brson
[18:16:15] <brson> incoming is broken again
[18:16:18] *** Quits: lkuper (lkuper@CB5A6754.5693A486.EA8B5958.IP) (Ping timeout)
[18:16:51] <brson> and the snapshot didn't finish because of an invalid read reported from valgrind
[18:18:23] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[18:18:46] <mcpherrin>  /3
[18:19:14] <strcat> very strange that fcrondyn segfaults on EOF, I must be the only person who exits shells with ctrl-d
[18:19:28] <otters> I do that too
[18:19:33] <otters> you'll never walk alone
[18:19:33] <benh> same
[18:19:43] *** Joins: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net)
[18:20:30] <nmatsakis> erickt: on call, will reping :)
[18:21:05] <pcwalton> well, down to 31 borrow check errors
[18:22:28] <erickt> nmatsakis: no problem :)
[18:23:11] *** Quits: ysuzuki (ysuzuki@moz-60FA9D06.net119083145.t-com.ne.jp) (Client exited)
[18:23:23] <tristram> Iâ€™m confused by : let v: &[int] = &[7, 5, 3]; what kind of box is v? I thought it was used to accept both ~ and @ where it doesnâ€™t matter what box youâ€™re using
[18:23:47] <strcat> &[T] is a slice
[18:24:06] <strcat> it's just a view into a vector (another slice, a fixed-size one or ~[]/@[])
[18:24:59] <kimundi> tristram: And &[7, 5, 3] would be a static vector.
[18:25:01] <tristram> but there I never declared an "actual" vector
[18:25:33] <tristram> so what would it mean compared to [7,5,3] ?
[18:25:54] <kimundi> well, [7,5,3] is not a legal type
[18:25:56] *** Joins: steven_is_false (quassel@1E3F14AE.29819A33.115CE8E4.IP)
[18:26:02] *** Joins: lkuper (lkuper@moz-D6AAFF3.cs.indiana.edu)
[18:26:04] <strcat> yes it is
[18:26:13] <strcat> it's [T, ..3]
[18:26:28] <kimundi> ah, yes, its a valid expression, my bad.
[18:27:53] <tristram> is there some C++ analogy to &[7,5] ?
[18:28:32] <strcat> static const std::array<int, 2> a {{7, 5}}; ?
[18:29:08] *** Joins: dherman (dherman@2557E599.66715431.D25A875A.IP)
[18:29:08] *** ChanServ sets mode: +o dherman
[18:29:11] <brson> http://lwn.net/SubscriberLink/548560/384a42e868c06ad0/
[18:29:38] <tristram> now I'm even more lost ;) what is then [7,5] ?
[18:30:39] <strcat> tristram: std::array<int, 2>
[18:31:03] <strcat> that's a more direct parallel
[18:31:06] <kimundi> tristram: an vector initialisation expression. it can be used to initialize a dynamic sized ~[int] or @[int], or a fixed-sized [int, ..2]
[18:31:21] <strcat> tristram: C++ doesn't have an equivalent to slices, at least in the stdlib with the standard containers
[18:31:27] <strcat> there's no &str/&[] in C++
[18:31:37] <strcat> unless you consider a pair of iterators to be a slice
[18:31:43] *** Joins: bheylin_ (brianheyli@E74A75A2.F993642.98C5AE08.IP)
[18:31:45] <strcat> in which case sure, a pair of iterators is equivalent ;p
[18:32:16] <brson> fyi, that lwn story is a *different* one from last week
[18:32:18] <strcat> and a &'static slice would be like a const_iterator of a constant array
[18:32:25] <tristram> all right, now I get lthe left hand part ( let v: &[int] =)
[18:32:47] *** Parts: graham_king (graham_kin@moz-61791D81.vc.shawcable.net) ()
[18:32:52] <tristram> so right hand, &[7,5] and [7,4] mean the same ?
[18:33:12] <kimundi> tristram, let v: &[int] = &[7, 5, 3]; would be equivalent to let v2: [int, ..3] = [7,5,3]; let v: &[int] = &v2;
[18:33:29] <kimundi> (I think. strcat?)
[18:33:42] *** Quits: int3_ (int3_@moz-DCBE00F8.subnet-248.amherst.edu) (Client exited)
[18:33:52] *** Joins: akashj87_ (akash@9CBA3061.2921AF61.35E3DDC8.IP)
[18:33:59] *** Quits: akashj87 (akash@7F0C8BA4.F09595B1.35E3DDC8.IP) (Ping timeout)
[18:34:06] <tristram> ok, makes sense, thanks
[18:34:16] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[18:35:23] *** Quits: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[18:36:56] * strcat thinks it will generate deltas now
[18:36:58] <strcat> lets see
[18:38:06] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[18:38:06] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/6B-umw
[18:38:06] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[18:39:25] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[18:39:25] *** Joins: snadon (chatzilla@moz-EFE8FD29.mc.videotron.ca)
[18:40:10] *** Joins: int3_ (int3_@moz-DCBE00F8.subnet-248.amherst.edu)
[18:42:16] *** Joins: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP)
[18:43:53] *** Quits: steven_is_false (quassel@1E3F14AE.29819A33.115CE8E4.IP) (Client exited)
[18:44:05] <pcwalton> down to 13 errors
[18:44:24] <pascal> Did the usage of RUST_LOG change? The example (http://static.rust-lang.org/doc/rust.html#logging-expressions) doesn't work for me - it only prints the error statements, nothing above.
[18:46:04] *** Quits: akashj87_ (akash@9CBA3061.2921AF61.35E3DDC8.IP) (Quit: Leaving)
[18:47:17] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[18:49:25] *** Quits: int3_ (int3_@moz-DCBE00F8.subnet-248.amherst.edu) (Client exited)
[18:50:28] <brson> when I run the build with valgrind there are errors, but the build doesn't fail
[18:50:39] *** Joins: int3_ (int3_@moz-DCBE00F8.subnet-248.amherst.edu)
[18:50:44] <graydon> which sorts of errors this time?
[18:50:57] <graydon> (which build is this?)
[18:51:07] <brson> blocks possibly lost
[18:51:21] <brson> I was trying to get the snapshot done, but the snapshot build had a valgrind error
[18:51:34] <brson> so I tried to reproduce it, got *different* errors, but built successfully :(
[18:52:08] *** Joins: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP)
[18:53:13] <graydon> :(
[18:58:57] *** Quits: int3_ (int3_@moz-DCBE00F8.subnet-248.amherst.edu) (Client exited)
[19:00:26] *** Joins: int3_ (int3_@moz-DCBE00F8.subnet-248.amherst.edu)
[19:01:05] <brson> i've also been fighting mysterious regression in code generation that are preventing me from landing my branch
[19:01:09] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[19:03:02] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[19:03:44] <graydon> brson: steps to reproduce? maybe I should just figure out why alignment went wrong. where there's smoke there's fire, in codegen ...
[19:03:56] *** Quits: int3_ (int3_@moz-DCBE00F8.subnet-248.amherst.edu) (Ping timeout)
[19:04:19] *** Joins: int3_ (int3_@moz-DCBE00F8.subnet-248.amherst.edu)
[19:05:25] *** Joins: ysuzuki (ysuzuki@moz-60FA9D06.net119083145.t-com.ne.jp)
[19:05:42] *** Quits: lieshidden (kvirc@moz-1DFB45D.dhcp.trlk.ca.charter.com) (Quit: KVIrc 4.1.3 Equilibrium http://www.kvirc.net/)
[19:06:05] *** Quits: int3_ (int3_@moz-DCBE00F8.subnet-248.amherst.edu) (Ping timeout)
[19:06:36] <brson> graydon: I haven't been able to reduce it yet. various tests in my branch are failing now. the first reason was borrowing from ~fn to &fn, but there appear to be other problems too
[19:06:48] <graydon> ok
[19:07:55] *** Joins: engla (engla@moz-BFD53D48.selucle.dyn.perspektivbredband.net)
[19:09:02] <brson> these silent valgrind errors appear to be coming from a subprocess
[19:09:59] <brson> the new run_* tests
[19:10:15] *** Quits: ysuzuki (ysuzuki@moz-60FA9D06.net119083145.t-com.ne.jp) (Client exited)
[19:10:59] <brson> ha, they are tests that we can kill a subprocess ... so they leak
[19:12:15] <strcat> brson: valgrind looks at the subprocess?
[19:13:10] <brson> strcat: looks like it
[19:13:22] <brson> I bet we can tell it not to
[19:13:24] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[19:13:24] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[19:13:36] <brson> I think we probably don't rely on it
[19:14:16] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:14:16] <nmatsakis> strcat: btw, on a local branch I have a fix for #5910---
[19:14:19] <brson> --trace-children=no
[19:14:29] <nmatsakis> strcat: so far the biggest problem is the way we handle `+=`, which is pretty broken
[19:14:31] <brson> oh, 'no' is the default :-/
[19:14:59] *** Quits: Blei (philipp@moz-96D25F7A.cust.bluewin.ch) (Quit: WeeChat 0.4.0)
[19:15:12] <pcwalton> oh good
[19:15:18] <pcwalton> that's not as spooky as I had worried
[19:15:18] <brson> --trace-children=no doesn't work
[19:15:46] *** Joins: int3_ (int3_@moz-DCBE00F8.subnet-248.amherst.edu)
[19:17:05] <brson> --child-silent-after-fork=yes
[19:18:32] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Quit: Computer has gone to sleep.)
[19:26:10] <pcwalton> bleh, ICE in stage2
[19:26:20] *** Joins: jorendorff (jorendorff@moz-B860E258.hsd1.tn.comcast.net)
[19:28:59] <tristram> sorry for my beginners questions : http://static.rust-lang.org/doc/core/hashmap.html >> how do I get the value given a key? and what would be the best to figure it out by myself?
[19:29:45] <strcat> rusti: let mut xs = core::hashmap::HashMap::new(); xs.insert(5, "foo"); xs.find(5)
[19:29:46] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/UiVi
[19:29:53] <strcat> rusti: let mut xs = core::hashmap::HashMap::new(); xs.insert(5, "foo"); xs.find(&5)
[19:29:55] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/fAfJ
[19:30:07] <strcat> heh silly wrapper stuff
[19:30:17] <strcat> rusti: let mut xs = core::hashmap::HashMap::new(); xs.insert(5, "foo"); fmt!("%?", xs.find(&5))
[19:30:19] <rusti> ~"Some(&\"foo\")"
[19:30:53] <tristram> thanks, so find is just undocumented?
[19:30:56] *** Joins: brendan (brendaneic@6BC3D9FF.179B5C1A.50A7E6A6.IP)
[19:31:09] <Jeaye> Seems so. 
[19:31:12] <strcat> tristram: it should be listed in there
[19:31:22] <Jeaye> strcat: I don't see it.
[19:31:26] <strcat> rustdoc bug
[19:31:34] <tristram> :)
[19:32:09] <strcat> that's really, really weird
[19:32:24] <strcat> Implementation of Map<K, V> for HashMap<K, V> where <K: Hash + Eq, V>
[19:32:28] <strcat> should be listed in there
[19:32:37] <strcat> :(
[19:33:08] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[19:33:54] *** Quits: lkuper (lkuper@moz-D6AAFF3.cs.indiana.edu) (Ping timeout)
[19:34:09] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[19:34:24] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:34:34] <strcat> rusti: 1
[19:34:35] <cmr> That is weird
[19:34:36] <rusti> ^[[D1
[19:34:39] <strcat> rusti: 1
[19:34:40] <rusti> 1
[19:34:51] <cmr> Does rustdoc improperly handle items with multiple attributes, maybe?
[19:35:17] <strcat> it's leaving out find and find_mut
[19:35:22] <strcat> maybe it doesn't like regions
[19:36:05] <strcat> http://static.rust-lang.org/doc/core/container.html Map trait is left out entirely here
[19:36:22] <tristram> HA! and actually I was looking for something like find_mut
[19:36:31] <strcat> oh
[19:36:39] <strcat> there are #[cfg(stage)] things
[19:36:49] <strcat> maybe it doesn't like those
[19:36:58] <cmr> that is my guess
[19:37:07] <cmr> (entirely uninformed, but a guess it is)
[19:37:09] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[19:37:10] <strcat> brson: does rustdoc not see stuff wrapped in #[cfg(stageN)]?
[19:37:12] *** Quits: Nisstyre (wes@moz-FD86289.netflash.net) (Ping timeout)
[19:37:34] <strcat> I should change them all to #[cfg(not(stage0))] anyway
[19:39:58] *** Quits: jorendorff (jorendorff@moz-B860E258.hsd1.tn.comcast.net) (Quit: Eaten by grue.)
[19:41:01] *** Joins: lkuper (lkuper@moz-D6AAFF3.cs.indiana.edu)
[19:41:58] *** Joins: vosen (vosen@moz-266BA656.icpnet.pl)
[19:42:00] *** Joins: jorendorff (jorendorff@moz-B860E258.hsd1.tn.comcast.net)
[19:42:34] <brson> strcat: probably not
[19:43:35] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[19:44:14] *** Quits: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[19:44:42] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:46:37] *** Joins: katis (katis@40C8AF65.EFDC2270.EE6E63A5.IP)
[19:47:07] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[19:47:20] *** Quits: blitter (blitter@moz-7C98731E.dyn.centurytel.net) (Ping timeout)
[19:48:14] <friggle> brson: interesting article, nice to see more Rust on LWN
[19:48:34] <cmr> Nice to see more intelligent, external discourse on rust in general ;)
[19:49:19] *** Joins: jorendorff_ (jorendorff@moz-B860E258.hsd1.tn.comcast.net)
[19:49:34] *** Quits: jorendorff (jorendorff@moz-B860E258.hsd1.tn.comcast.net) (Quit: Eaten by grue.)
[19:49:34] *** jorendorff_ is now known as jorendorff
[19:49:39] *** Quits: jorendorff (jorendorff@moz-B860E258.hsd1.tn.comcast.net) (Quit: jorendorff)
[19:49:45] *** Joins: jorendorff (jorendorff@moz-B860E258.hsd1.tn.comcast.net)
[19:56:44] <nmatsakis> brson: to get just 1 thread of exec, RUST_MAX_THREADS=1 ?
[19:56:52] <brson> nmatsakis: yes
[19:56:53] <pcwalton> RUST_THREADS=1
[19:57:03] <brson> nmatsakis: no
[19:57:16] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[19:57:30] *** Joins: pnkfelix|rcirc (pnkfelix@moz-43495417.fbx.proxad.net)
[19:57:57] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[19:58:13] <nmatsakis> what pcwalton said?
[19:58:33] *** Quits: josh (josh@moz-6FB23C25.hvc.res.rr.com) (Quit: josh)
[19:58:54] <brson> yes
[19:59:21] <brson> maybe we could run the full regression tests on auto before merging to incoming
[19:59:37] <brson> lunch
[20:02:29] *** dherman is now known as dherman-lunch
[20:04:40] *** Joins: seth (seth@moz-D840E602.dsl.static.sonic.net)
[20:05:34] *** Quits: bheylin_ (brianheyli@E74A75A2.F993642.98C5AE08.IP) (Quit: bheylin_)
[20:06:23] *** Quits: seth (seth@moz-D840E602.dsl.static.sonic.net) (Ping timeout)
[20:08:34] *** Joins: pnkfelix1 (pnkfelix@moz-43495417.fbx.proxad.net)
[20:09:19] *** Joins: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP)
[20:09:31] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[20:10:00] *** Quits: pnkfelix|rcirc (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[20:15:07] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[20:20:08] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[20:20:08] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/_bKtlA
[20:20:08] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[20:20:38] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[20:24:20] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:24:49] *** Joins: jviereck (Adium@moz-7205F065.dclient.hispeed.ch)
[20:28:02] *** Joins: devbug (quassel@moz-E1DE087C.bchsia.telus.net)
[20:28:29] *** Joins: steven_is_false (quassel@moz-FE728D33.bchsia.telus.net)
[20:30:36] *** Quits: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP) (Ping timeout)
[20:30:51] *** Quits: int3_ (int3_@moz-DCBE00F8.subnet-248.amherst.edu) (Client exited)
[20:33:32] *** Joins: Jesin (Jessin_@moz-1866A4CC.cc.lehigh.edu)
[20:33:43] *** Quits: Jesin (Jessin_@moz-1866A4CC.cc.lehigh.edu) (Connection reset by peer)
[20:34:33] *** Joins: Jesin (Jessin_@moz-1866A4CC.cc.lehigh.edu)
[20:35:14] *** Quits: Jesin (Jessin_@moz-1866A4CC.cc.lehigh.edu) (Connection reset by peer)
[20:35:32] *** Joins: Jesin (Jessin_@moz-1866A4CC.cc.lehigh.edu)
[20:36:14] *** Quits: Jesin (Jessin_@moz-1866A4CC.cc.lehigh.edu) (Connection reset by peer)
[20:36:37] *** Joins: Jesin (Jessin_@moz-1866A4CC.cc.lehigh.edu)
[20:37:14] *** Quits: Jesin (Jessin_@moz-1866A4CC.cc.lehigh.edu) (Connection reset by peer)
[20:37:33] *** Quits: vosen (vosen@moz-266BA656.icpnet.pl) (Quit: Leaving)
[20:37:38] *** Joins: Jesin (Jessin_@moz-1866A4CC.cc.lehigh.edu)
[20:38:08] *** pnkfelix1 is now known as pnkfelix
[20:38:48] *** Quits: jack (jack@EF36212C.8FA609AD.840029BC.IP) (Quit: Leaving.)
[20:39:08] *** Joins: jack (jack@EF36212C.8FA609AD.840029BC.IP)
[20:39:08] *** Quits: Jesin (Jessin_@moz-1866A4CC.cc.lehigh.edu) (Connection reset by peer)
[20:39:39] *** Joins: Jesin (Jessin_@moz-1866A4CC.cc.lehigh.edu)
[20:40:43] *** Quits: Jesin (Jessin_@moz-1866A4CC.cc.lehigh.edu) (Connection reset by peer)
[20:41:05] *** Joins: Jesin (Jessin_@moz-1866A4CC.cc.lehigh.edu)
[20:42:15] *** Quits: Jesin (Jessin_@moz-1866A4CC.cc.lehigh.edu) (Connection reset by peer)
[20:43:51] *** Quits: SimonSapin (simon@moz-C4A83ED9.net-89-2-126.rev.numericable.fr) (Ping timeout)
[20:44:22] *** Joins: SimonSapin (simon@moz-C4A83ED9.net-89-2-126.rev.numericable.fr)
[20:45:22] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Quit: Textual IRC Client: www.textualapp.com)
[20:47:27] *** Joins: jgilbert (jgilbert@43CB6079.66715431.D25A875A.IP)
[20:49:31] *** Joins: rpearl (rpearl@moz-2B41ACB5.andrew.cmu.edu)
[20:51:19] *** Quits: Blub\w (wry@moz-115FC52C.wireless.dyn.drei.com) (Quit: night)
[20:52:57] *** Quits: jgilbert (jgilbert@43CB6079.66715431.D25A875A.IP) (Ping timeout)
[20:56:05] <steven_is_false> Why is it that one can't implement Drop on enums?
[20:56:39] <kimundi> steven_is_false: You can implment drop on any type that doesn't contain & or @
[20:56:55] <steven_is_false> kimundi: Okay.
[20:58:57] *** Joins: Jesin (Jessin_@moz-A03A364F.cc.lehigh.edu)
[20:59:21] <steven_is_false> What's the difference between reinterpret_cast, and transmute?
[20:59:27] <lkuper> brson: ping
[21:00:44] <kimundi> steven_is_false: reinterpret takes a &T where T gets cast to U, transmute takes a T where T gets cast to U 
[21:01:03] <kimundi> steven_is_false: In short, reinterpret is basically unnecessarry
[21:01:10] <steven_is_false> kimundi: Okay.
[21:01:16] <kimundi> steven_is_false: Could get removed
[21:01:32] *** Joins: bblum (bblum@moz-2B41ACB5.andrew.cmu.edu)
[21:02:05] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[21:02:05] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/E_6v4A
[21:02:05] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[21:02:55] <bstrie> should be removed
[21:03:01] <bstrie> I think it's been deprecated for about a year
[21:03:20] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
[21:03:58] *** Quits: dherman-lunch (dherman@2557E599.66715431.D25A875A.IP) (Quit: dherman-lunch)
[21:04:18] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Quit: Leaving)
[21:04:27] *** Quits: jfredett (jfredett@moz-35CE0253.bstnma.east.verizon.net) (Ping timeout)
[21:05:10] *** Joins: seth (seth@moz-D840E602.dsl.static.sonic.net)
[21:06:30] *** Quits: dforsyth (dforsyth@AC76BBB4.5FDB5121.EE6E63A5.IP) (Ping timeout)
[21:07:13] *** Joins: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP)
[21:07:14] *** Quits: seth (seth@moz-D840E602.dsl.static.sonic.net) (Ping timeout)
[21:07:56] <strcat> bstrie: I don't think it can be removed
[21:08:05] <strcat> they have different behaviour
[21:08:52] <bstrie> strcat: no? that's a shame
[21:09:46] <strcat> looks like there's transmute and transmute_copy now
[21:09:52] <strcat> instead of reinterpret_cast
[21:09:54] *** Joins: dforsyth (dforsyth@AC76BBB4.5FDB5121.EE6E63A5.IP)
[21:10:08] *** Joins: gareth0 (gareth0@moz-68FD6291.dynamic.dsl.as9105.com)
[21:10:37] *** Joins: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP)
[21:10:37] *** Quits: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP) (Z:lined (Open Proxy found on your host. Please visit www.blitzed.org/proxy?ip=115.68.131.49 for more information.))
[21:11:07] <bstrie> especially since reinterpret_cast is only used in 8 places outside of cast.rs
[21:11:31] <bstrie> compared to transmute's 400 or so uses
[21:12:26] <kimundi> well, transmute simpty has the better name ;)
[21:12:31] <bstrie> indeed
[21:14:24] <brson> lkuper: pong
[21:15:11] <pcwalton> transmute has the more useful functionality
[21:15:16] <pcwalton> although sometimes transmute_copy is useful
[21:15:44] <lkuper> brson: hey!  so, I want to give rusti some much-needed attention
[21:16:11] <strcat> it's broken completely for me again ;p
[21:16:28] *** Joins: dherman (dherman@2557E599.66715431.D25A875A.IP)
[21:16:28] *** ChanServ sets mode: +o dherman
[21:16:58] <lkuper> brson: I thought it might be goot to start by actually writing some tests.  I noticed that `make check-stage[N]-rusti` exists but there are no tests for it to run
[21:17:49] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[21:18:23] <brson> lkuper: i endorse this activity
[21:18:23] <lkuper> brson: actually, I don't know if there's a more appropriate person to ask about rusti, but anyway, would you suggest putting tests right in librusti/rusti.rc using #[test], like someone might do for other crates?
[21:19:11] <pcwalton> please don't fix it by bumping the C stack size
[21:19:15] <pcwalton> it's already too large
[21:19:21] <pcwalton> if you need to do that make an API to do it
[21:19:59] <brson> lkuper: yes, if you can tolerate that, I think it is the preferred approach. the only real annoying i foresee is that you will be writing a lot of rust test cases as either strings or qquotes
[21:20:41] <graydon> hmmm
[21:21:05] <graydon> why would the test runner ignore tag-align-u64.rs when I ask it to run?
[21:21:24] <graydon>  /home/graydon/src/rust/src/test/run-pass/tag-align-u64.rs ... ignored
[21:21:37] <graydon> it's not xfailed...
[21:21:43] <brson> graydon: mine says it is xfailed
[21:21:52] <brson> and uses 'tag' syntax!
[21:22:03] <graydon> the word 'xfail' is not in the file
[21:22:09] <graydon> which branch?
[21:22:35] <brson> some local branch
[21:22:43] <lkuper> brson: strings or qquotes...for example?
[21:22:44] <graydon> jbclements fixed it in d1921fb3caa131c83673020a377e1d0cd245b1ea
[21:22:48] <graydon> to not be using 'tag'
[21:23:01] <graydon> do we cache xfail-ness somewhere in the workspace?
[21:24:13] <brson> lkuper: i imagine you will be jitting a lot of code, and that code would have to be written as strings or qquoted asts
[21:24:27] <brson> graydon: no
[21:24:41] <lkuper> brson: also, is it possible to xfail inline tests?  and, do rusti tests currently run automatically as part of the build (on bors, or whatever?  I don't know how y'all do things these days)
[21:25:22] <lkuper> strcat: when you say rusti is 'broken completely', in what sense do you mean that?
[21:25:24] <brson> lkuper: #[ignore] xfails a test and i think that rusti does run on th ebots
[21:25:30] <strcat> z
[21:25:35] <lkuper> brson: cool, ok
[21:25:36] <strcat> lkuper: it can't do 1 + 1
[21:25:57] <strcat> totally valgrind unclean, hits double frees and segfaults
[21:26:08] <strcat> even when it worked something was very wrong with it ;p
[21:26:31] <strcat> rusti> 1 + 1
[21:26:33] <strcat> 2
[21:26:35] <strcat> rusti> leaked memory in rust main loop (1 objects)
[21:26:37] <strcat>                                                   rusti: /build/src/rust/src/rt/memory_region.cpp:189: memory_region::~memory_region(): Assertion `false' failed.
[21:26:38] *** Quits: jorendorff (jorendorff@moz-B860E258.hsd1.tn.comcast.net) (Quit: jorendorff)
[21:26:39] <strcat>              zsh: abort (core dumped)  rusti
[21:26:42] <strcat> and then it screws up the terminal by doing weird escapes.
[21:26:48] <strcat> has to be reset
[21:26:52] *** Quits: Palmik (palmik@moz-DADC71F0.pks.muni.cz) (Quit: Lost terminal)
[21:27:11] *** Joins: pnkfelix|rcirc (pnkfelix@moz-43495417.fbx.proxad.net)
[21:27:15] <graydon> yeah, same here
[21:27:25] <brson> graydon: looking into this ignored test
[21:27:51] <lkuper> strcat: hm.  so this works for me:
[21:27:52] <graydon> brson: kinda weird: I also can't reproduce the failure happening on the bots :(
[21:27:53] <lkuper> lkuper@lenny:~$ rusti
[21:27:54] <lkuper> WARNING: The Rust REPL is experimental and may be
[21:27:54] <lkuper> unstable. If you encounter problems, please use the
[21:27:54] <lkuper> compiler instead.
[21:27:54] <lkuper> rusti> let x = 1 + 1; x
[21:27:55] <lkuper> 2
[21:27:57] <graydon> even if I run manually
[21:27:58] <lkuper> rusti> 
[21:28:14] <strcat> lkuper: from incoming?
[21:28:18] <lkuper> strcat: although having to do things that way is, uh, inhumane
[21:28:33] <strcat> it "works" for me with 0.6
[21:28:38] <brson> graydon: when I run the tests it says every one is ignored!
[21:28:40] <lkuper> strcat: oh, yeah, sorry, this is 0.6
[21:28:40] <strcat> it just leaks memory for each command
[21:28:57] <strcat> lkuper: I think the LLVM upgrade killed it
[21:29:00] <strcat> in incoming/master
[21:29:25] <lkuper> strcat: ugh.  what I want to do is encourage a culture of "don't break rusti, you fools!"
[21:29:31] <lkuper> maybe I should phrase it more nicely
[21:29:40] <brson> tests should help that
[21:29:41] <lkuper> "don't break rusti, good people of #rust!"
[21:29:44] <graydon> lkuper: a testsuite will be required
[21:29:57] <brson> although we did promptly break the debug-info tests as soon as they started working
[21:30:02] <lkuper> brson, graydon: yes, this is the problem...it gets unbroken and then broken again because no tests
[21:30:12] <strcat> lkuper: I don't think it ever worked 100% though
[21:30:31] <graydon> were the debuginfo tests part of the normal landing cycle?
[21:30:36] <strcat> I could never get it to run code with lots of ~ that ran in rustc
[21:30:38] <lkuper> strcat: agree
[21:30:42] <lkuper> d
[21:30:56] <graydon> I think it's pretty clear that if something's not part of the integration-test path, it will break
[21:31:08] <brson> graydon: yes, but they broke when we upgraded llvm and i disabled them all. special circumstances i guess
[21:31:15] <graydon> ah
[21:31:27] * strcat is just happy he has a nightly build of incoming now ;p
[21:31:29] *** Quits: jviereck (Adium@moz-7205F065.dclient.hispeed.ch) (Quit: Leaving.)
[21:31:30] <lkuper> graydon: yeah
[21:31:35] <strcat> going to try to unbreak the test suite in chroots
[21:31:43] <brson> this behavior of ignoring all tests is disturbing
[21:32:00] <brson> I wonder if it's happening on the bots
[21:32:12] <graydon> brson: nope; the bots are breaking!
[21:32:16] <brson> it is!
[21:32:22] <brson> bots say 'ignored' everywhere!
[21:32:22] <graydon> hm?
[21:32:27] <brson> http://buildbot.rust-lang.org/builders/incoming-quick-linux/builds/1340/steps/test/logs/stdio
[21:32:30] <brson> incoming-quick
[21:32:36] <brson> no tests are running
[21:32:38] <EXetoC> seems convenient
[21:33:12] <graydon> oh dear
[21:33:17] <graydon> not on incoming-full!
[21:33:25] <strcat> so things are so broken that the tests don't even fail
[21:33:27] <strcat> ;p
[21:33:48] <graydon> ok bors is turned off
[21:33:58] <graydon> let's figure out what on earth is happening to tests
[21:34:51] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[21:37:13] <doomlord> i tried adding arm-apple-darwin to mk/platform.mk (copy paste a load of symbols) ..  configured/compiled rustc with --target=arm-apple-darwin;   on attempting to run the compiler it tells me "can't find crate for core" - 
[21:37:16] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[21:37:26] <doomlord> ... i assume i have to do somethign to get it to build standard libarries...
[21:37:32] <doomlord> for the new target
[21:37:57] <graydon> "yes"
[21:38:13] <graydon> hard to say what exactly, because it's hard to tell what commands are working or not-working, or what you changed
[21:39:50] *** Joins: kalenedrael (wat@moz-DBB6BE74.zagar.us)
[21:41:04] <lkuper> brson, graydon: thanks for your advice.  i'll give rusti some love in the near future, if only filing bugs and writing xfailed tests.  i'll probably also send something to rust-dev...if I can encourage people to actually use it then problems will get noticed and fixed faster
[21:41:11] *** Joins: int3_ (int3_@moz-DCBE00F8.subnet-248.amherst.edu)
[21:41:23] <graydon> hope so!
[21:41:48] <doomlord> q1 will the standard libaries be interfacing with lot of system libraries  - which may work differently on ios .. q2 if so would there be a way of requesting it doesn't try to build the whole of core
[21:42:08] <graydon> doomlord: yes, no
[21:42:36] *** Quits: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se) (Client exited)
[21:42:55] *** Quits: gareth0 (gareth0@moz-68FD6291.dynamic.dsl.as9105.com) (Ping timeout)
[21:42:56] *** Quits: int3_ (int3_@moz-DCBE00F8.subnet-248.amherst.edu) (Ping timeout)
[21:44:06] <doomlord> would it have tried to build core and failed somewhere already
[21:44:15] <graydon> possibly
[21:44:23] <graydon> watch the build, see what it does
[21:44:44] <graydon> run with VERBOSE=1 make if you want more detail
[21:44:47] *** Quits: jeff (jeff@4231C034.745B261B.F12515B4.IP) (Quit: jeff)
[21:45:17] <doomlord> i'm very much stabbing around in the dark here :(
[21:45:28] <brson> doomlord: you can also run with RUST_LOG=rustc::metadata::loader to see what crates its looking at and rejecting
[21:45:38] <doomlord> ok
[21:45:49] <doomlord> rust c RUST_LOG=.... ?
[21:45:59] <doomlord> rustc RUST_LOG=.... ? when i try to compile sometihng?
[21:46:03] <graydon> unfortunately most of us have stabbing-in-the-dark of our own to do
[21:46:10] <brson> doomlord: RUST_LOG=... rustc
[21:46:11] <graydon> RUST_LOG=... rustc ...
[21:46:45] <kalenedrael> I came across an issue where rust considers a pointer live beyond where it probably should
[21:46:57] <pcwalton> kalenedrael: please file a bug
[21:47:02] <kalenedrael> when I try to compile this http://pastebin.mozilla.org/2366990
[21:47:07] <cmr> Is a new snapshot being tested right now?
[21:47:36] <kalenedrael> all right
[21:47:55] <pcwalton> I think that one may be known but I didn't think too hard
[21:47:55] <pcwalton> f
[21:47:58] <pcwalton> file it anyway :)
[21:48:04] <graydon> cmr: no, we're trying to figure out how seriously the tests are broken
[21:48:11] <cmr> Ah
[21:49:49] *** Joins: bleibig (bleibig@moz-58EF3B3A.rochester.res.rr.com)
[21:49:56] <graydon> right, so the tests started "always ignoring" somewhere in the past 2 merges
[21:50:59] <kalenedrael> how do I include code snippets in a bug report?
[21:51:07] <graydon> ~~~~
[21:51:09] <graydon> code
[21:51:10] <graydon> ~~~~
[21:51:18] <kalenedrael> ok, thanks
[21:51:24] <graydon> of `code` if it's short
[21:51:26] <graydon> *or
[21:51:33] <graydon> (note: backticks)
[21:51:37] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[21:52:00] <graydon> erickt: ping
[21:52:16] <graydon> whut
[21:52:17] <graydon> there it is
[21:52:32] <graydon> brson: in e9688fcfe3d345ae34e25c3bd51f878be4410d96
[21:52:43] <graydon> compiletest/header.rs => is_test_ignored
[21:52:48] <graydon> it always returns true now
[21:53:13] <brson> ha
[21:53:15] <aatch|bed> kalenedrael, also, you can use '```rust ... ```'
[21:53:32] <aatch|bed> (with the ```'s on separate lines)
[21:54:08] <brson> I guess rust must have been emitting a bogus warning there
[21:54:12] <graydon> true, false; who's checking?
[21:54:16] <graydon> anyway
[21:54:20] <strcat> brson: I think it was emitting 'not mutated'
[21:54:22] <graydon> it should be false, yes?
[21:54:26] <strcat> graydon: yeah
[21:54:34] <graydon> right. mind if I push that?
[21:54:42] <graydon> I can bors it if that's nicer :)
[21:54:48] <brson> no, just push
[21:54:54] <strcat> graydon: well if the tests aren't running, why bother? ;p
[21:54:59] <strcat> and some tests might fail if you go through bors
[21:55:05] <graydon> I dunno, ritual? :)
[21:55:07] <strcat> assuming bors wasn't testing at all before
[21:55:16] <strcat> better to have a red incoming than a wrongly green incoming
[21:55:34] <graydon> looks like ... yeah
[21:55:44] <graydon> it started ignoring everything after erickt's landing
[21:56:00] <graydon> we should actually retry the glob landing
[21:56:05] <graydon> since it wasn't tested :(
[21:56:28] <graydon> score one for human supervisors
[21:57:03] <strcat> should have a test of the test harness ;p
[21:57:07] <graydon> indeed
[21:57:28] <graydon> ok everyone, *WARNING ALARMS* I am going to force-push to incoming and it will move, dropping doy's glob commit
[21:57:56] <strcat> graydon: maybe you should just rv it
[21:58:25] <graydon> eh, ok
[21:58:49] *** aatch|bed is now known as aatch
[21:59:00] <aatch> graydon, you sound almost disappointed
[21:59:02] <graydon> er, no, it's a merge
[21:59:11] <graydon> reverting merges makes everything very sad
[21:59:14] <strcat> oh
[22:00:04] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[22:00:04] <ghrust> 01[13rust01] 15graydon 04force-pushed 06incoming from 14a972254 to 1408dd625: 02http://git.io/zRJyTw
[22:00:04] <ghrust> 13rust/06incoming 1408dd625 15Graydon Hoare: compiletest: stop ignoring all tests.
[22:00:05] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[22:01:51] <graydon> turning bors back on
[22:02:12] *** Quits: steven_is_false (quassel@moz-FE728D33.bchsia.telus.net) (Ping timeout)
[22:05:55] <doomlord> ok looking at the log, it seems its not trying to build arm as 32bit (some casting error)
[22:06:07] <doomlord> i must look at what the android setup does..
[22:07:19] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[22:07:39] <doomlord> ah silly me.
[22:09:33] <Sodel_the_V> I'm adding a spot of documentation to middle/ty.rs. I assume that vstore_fixed() corresponds to [T .. <size>]. Is that correct?
[22:09:49] <graydon> Sodel_the_V: yes
[22:09:54] <Sodel_the_V> Thanks!
[22:10:00] <graydon> jclements: ping
[22:10:28] *** Quits: Diablo-D3 (diablo@moz-52AA8794.port.east.myfairpoint.net) (Ping timeout)
[22:11:11] *** Joins: Diablo-D3 (diablo@moz-52AA8794.port.east.myfairpoint.net)
[22:11:57] * strcat likes that docstrings are in a different highlight class than comments now
[22:12:20] <strcat> http://ompldr.org/vaWE5cg pretty ;p
[22:12:52] <cmr> I see no difference?
[22:13:08] <strcat> well in my colorscheme SpecialComment is just Comment in bold
[22:13:16] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[22:13:33] <cmr> Oh it is bold
[22:14:13] *** Quits: libertas (libertas@98ADBCEC.786003BB.593B3862.IP) (Quit: Lost terminal)
[22:15:13] <strcat> solarized uses a completely different colour (comments in grey, doc comments in bright red o_o)
[22:15:25] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:15:36] <lkuper> bstrie: so I just saw your comment at https://github.com/mozilla/rust/issues/5469#issuecomment-15778358, while in the middle of creating an A-rusti tag
[22:16:17] <strcat> lkuper: seems worth having a tag if there are more than 2-3 bugs
[22:16:19] <strcat> imo
[22:16:32] <lkuper> strcat: I've tagged 9
[22:16:43] <strcat> and I think there are countless bugs and missing features related to it :)
[22:16:50] <lkuper> strcat: there are also some pull reqs that are relevant, but no way to tag them
[22:17:10] <lkuper> I think having a tag will help people remember "hey, rusti is a thing"
[22:17:15] <lkuper> at least, it can't hurt
[22:18:38] <strcat> https://github.com/mozilla/rust/issues/6160 another ;p
[22:19:15] * strcat is bad at concise titles
[22:19:38] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:20:21] <lkuper> oh, another repl-related question: what is `rust sketch`?  is that still a thing?  is it yet to become a thing?
[22:20:43] *** Quits: Jesin (Jessin_@moz-A03A364F.cc.lehigh.edu) (Ping timeout)
[22:20:51] <strcat> lkuper: it's just another way to start rusti
[22:21:08] <strcat> 'rust' currently shells out instead of using the libs like it should though
[22:21:29] <strcat> anyway I don't think both ways should exist
[22:21:41] <strcat> should either have stuff under a rust tool or individual tools
[22:21:54] <cmr> I see no problem with shelling out and having both
[22:22:05] <strcat> cmr: only works if rust is globally installed
[22:22:09] <pcwalton> it's like git
[22:22:13] <pcwalton> git foo == git-foo
[22:22:35] <kimundi> strcat: Well, shelling out is really the only easy way atm. All rust tools are libaries, but that doesn't automatically make them usable as one. :(
[22:22:36] <strcat> pcwalton: git has those commands in a lib dir though
[22:22:37] <strcat> not in PATH
[22:22:43] <strcat> and they're an implementation detail
[22:22:45] <pcwalton> that's fine
[22:23:03] <lkuper> just wanted to make sure that `rust sketch` and `rusti` weren't, like, completely different code paths
[22:23:31] <strcat> kimundi: afaik you just have to call the main function
[22:23:39] <strcat> src/driver/driver.rc
[22:23:44] <jclements> graydon: pong
[22:23:54] <kimundi> strcat: command line passing is hacky
[22:23:57] <graydon> jclements: hey, what did you have in mind for docstrings?
[22:24:58] *** Joins: trapnii (trapni@2FE54BF3.B4F8FFE1.A6BD37EB.IP)
[22:25:15] *** Quits: trapnii (trapni@2FE54BF3.B4F8FFE1.A6BD37EB.IP) (Quit: Leaving)
[22:25:20] *** Quits: trapni (trapni@2FE54BF3.B4F8FFE1.A6BD37EB.IP) (Quit: Leaving)
[22:25:20] <jclements> graydon: I've just been wading through the syntax that we have in place, and I was just yearning for something with a nice clear set of delimiters. Generally speaking, I'm always in favor of simpler syntax.  I don't have any specific desires or proposals, but I'd be happy to get rid of one of the existing ways.  Here, let me roll a proposal live...
[22:25:37] <jclements> How about getting rid of the block-form docstrings, and only allowing inner-docstrings at the beginning of the file?
[22:25:58] <strcat> yes please ;p
[22:26:07] <bstrie> +1 to getting rid of one of the two forms of doc comments
[22:26:10] <bstrie> er
[22:26:14] <bstrie> two of the four forms
[22:26:17] <bstrie> two of the six forms
[22:26:36] <strcat> bstrie: well I think he's proposing getting rid of all but 1, except for the special case at the top of the file
[22:26:41] <strcat> way too complicated atm imo
[22:26:45] <bstrie> +1 for that as well
[22:27:03] <jclements> wait... you lost me at four. I've got line-based-inner, block-inner, line-based-outer, and block-outer. Where are the other two?
[22:27:21] <strcat> jclements: it eliminates trailing * symbols, doesn't it?
[22:27:25] <graydon> #[] and #[];
[22:27:33] <kimundi> Don't really see a problem with having the option for all of them... Just thet rusts codebase needs an consistent style
[22:28:03] <graydon> nobody writes #[] for docs though; and we agreed to move our codebase to /// generally
[22:28:09] <graydon> (consistency-wise)
[22:28:09] <strcat> kimundi: because there are enough ways to do it that it's confusing
[22:28:25] <jclements> I'm fine with either; I admit that I lean toward /// for convenience of writing.
[22:28:52] <bstrie> I also prefer the /// form
[22:29:05] *** Quits: dherman (dherman@2557E599.66715431.D25A875A.IP) (Quit: dherman)
[22:29:31] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[22:29:36] <bstrie>  /** is also fine, but I still prefer to have just one
[22:30:24] <bstrie> the real problem here is that rust doesn't require that every source file be wrapped in a class, because then we could just annotate that :P
[22:30:59] <jclements> bstrie: well, nearly all files are implicitly modules, but I don't think people want to have to write 'mod' at the top, either.
[22:31:08] <bstrie> yes, faceity abounds
[22:31:23] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[22:31:29] <strcat> #[foo] #[bar] mod;
[22:31:36] <strcat> doesn't need a block
[22:31:55] * strcat shrugs
[22:32:19] *** Joins: dherman (dherman@2557E599.66715431.D25A875A.IP)
[22:32:19] *** ChanServ sets mode: +o dherman
[22:32:25] <strcat> anyway you get a big +1 from me for fewer ways to do completely equivalent things
[22:35:13] <bjz> I find it scary that comments can affect compilation
[22:35:22] <bjz> (personally)
[22:36:04] <strcat> the /// ones aren't comments though
[22:36:18] <bjz> https://github.com/mozilla/rust/issues/4106
[22:36:35] <bjz> strcat: to a user they are
[22:36:36] <aatch> Hey, there's no stylistic (or technical) reason to not use Windows API calls for cross-platform support, right?
[22:36:36] <kimundi> bjz: Depends on whether you view /// as special comments, or nice attributes.
[22:36:37] <aatch> As in doing some internal call to get some information from the platform
[22:36:58] <strcat> bjz: they shouldn't be viewed as comments, the editor highlighting shouldn't be the same
[22:37:34] <strcat> python users don't see docstrings as being useless string literals, they're metadata
[22:38:08] *** Joins: Jesin (Jessin_@moz-A03A364F.cc.lehigh.edu)
[22:39:43] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[22:39:52] <pcwalton> aatch: it's fine, the Rust standard library does in places
[22:40:00] *** Quits: Jesin (Jessin_@moz-A03A364F.cc.lehigh.edu) (Ping timeout)
[22:40:06] <SimonSapin> strcat: same for python implementations. Docstrings are significant and end up in f.__doc__
[22:40:15] <pcwalton> you should see all the Mac-specific font goop in Servo, it's horrendous...
[22:40:23] <aatch> pcwalton, this is for a standard library module.
[22:40:26] <pcwalton> ah
[22:40:28] <pcwalton> that's fine
[22:40:28] <strcat> bjz: http://ompldr.org/vaWFhNQ they look *completely* different with solarized
[22:40:31] <pcwalton> the stdlib does it in places
[22:40:35] <pcwalton> see core::run for example
[22:40:46] <EXetoC> not a fan of solarized light
[22:41:05] <strcat> EXetoC: I'm not really either, just looking at rust in different colorschemes atm ;p
[22:41:21] <pcwalton> I liked the proposal to change unsafe blocks to use Comic Sans
[22:41:23] <EXetoC> ok
[22:41:23] <pcwalton> Jesse's proposal
[22:41:29] <aatch> Basically, it turns out that getting the system timezone is pretty unreliable
[22:41:43] <bjz> pcwalton: I approve
[22:42:02] <bjz> pcwalton: in hot pink
[22:42:07] <pcwalton> fun fact: JS engines all throttle the call to the system date and use performance counters to calculate deltas if you call Date.now() in quick succession
[22:42:12] <pcwalton> because of the SunSpider benchmark :(
[22:42:16] <EXetoC> strcat: does the vim script still replace certain things with square symbols and 'Â´'?
[22:42:26] <bstrie> pcwalton: sheer brilliance
[22:42:26] <EXetoC> or maybe that was just on my system
[22:42:29] <strcat> EXetoC: yes which I turn off
[22:42:32] <bstrie> now how do we patch vim to show comic sans
[22:42:37] <strcat> I hate conceal
[22:42:37] <EXetoC> right
[22:43:07] <Jesse> "performance counters"?
[22:43:10] <aatch> Sigh..
[22:43:17] <pcwalton> Jesse: something like rdtsc
[22:43:35] <pcwalton> so you don't have to hit the kernel as often I guess.
[22:43:44] *** Quits: SimonSapin (simon@moz-C4A83ED9.net-89-2-126.rev.numericable.fr) (Ping timeout)
[22:44:39] <strcat> aatch: it's only recently being standardized on linux
[22:44:48] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[22:45:03] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ChatZilla 0.9.90-rdmsoft [XULRunner 18.0.2/20130201065344])
[22:45:14] <strcat> I don't think it's trivial to get the actual timezone instead of an offset ;p
[22:45:18] <strcat> cross-platform
[22:45:23] <aatch> strcat, I know. I have 5 steps for getting the timezone.
[22:45:30] *** Joins: catpig (catpig@moz-49BBE43B.dip0.t-ipconnect.de)
[22:45:31] <aatch> step 5 is give up and use UTC
[22:45:32] <strcat> % readlink /etc/localtime 
[22:45:34] <strcat> ../usr/share/zoneinfo/America/Toronto
[22:45:36] <strcat> that's the fd.o way now
[22:45:43] <strcat> which probably doesn't work on debian yet.
[22:46:13] <aatch> Well fortunately it seems that most linuxes have the info in the tm struct
[22:46:13] <strcat> I know it works on fedora, arch and opensuse... *maybe* ubuntu ;p
[22:46:44] <strcat> aatch: that's different than the configured timezone afaik
[22:46:55] <strcat> it gives you an accurate offset
[22:47:08] <strcat> but timezones get updated all the time and I don't think that one will change reliably with the configured one
[22:47:28] <aatch> Which is why it isn't the first thing on the list
[22:48:31] <aatch> But tm sometimes has a tm_zone field, which is the abbreviated timezone name.
[22:48:51] <strcat> ah
[22:49:48] *** Quits: brendan (brendaneic@6BC3D9FF.179B5C1A.50A7E6A6.IP) (Quit: brendan)
[22:50:07] <aatch> I'll have to update configure to check for it though
[22:50:48] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[22:51:47] <strcat> aatch: looking at python's dateutil
[22:51:55] <strcat> scary stuff
[22:52:01] *** Quits: pyrac (pyrac@moz-2FEC2239.w92-149.abo.wanadoo.fr) (Quit: pyrac)
[22:52:18] *** Quits: a_make (a__@moz-9BBD1F27.nycmny.fios.verizon.net) (Client exited)
[22:52:22] <strcat> aatch: http://ix.io/5rd http://ix.io/5re
[22:52:53] <strcat> well there's more...
[22:53:18] <aatch> Oh yeah, getting timezone info on linux.
[22:56:52] *** Quits: true_droid (Adium@moz-123FD9B8.beck.volia.net) (Quit: Leaving.)
[22:56:54] <aatch> I'm wondering if it might be better to have our own database from here: http://www.twinsun.com/tz/tz-link.htm
[22:57:51] <strcat> aatch: shouldn't it be using the system db?
[22:57:54] *** Joins: mib_1gp9yn (Mibbit@moz-B09549CC.fc.protectedgroup.com)
[22:58:02] <mib_1gp9yn> "el amor eterno, son tres palabras: alma, corazon y vida; nace, vive y se transforma: Â¿sera  la muerte el renacer?" bienvenidos: http://castroruben.com  *temo_un_ser_sin_rival*
[22:58:03] *** Parts: mib_1gp9yn (Mibbit@moz-B09549CC.fc.protectedgroup.com) ()
[22:58:23] <strcat> aatch: https://www.iana.org/time-zones
[22:58:36] <strcat> but afaik that's already on every linux distro
[22:58:57] <aatch> I think it might be the same data.
[23:00:01] <aatch> And while it's on every linux distro, it's not necessarily on other platforms.
[23:00:15] <strcat> rust won't be updated as quickly as time zones change
[23:00:37] <strcat> tzdata is already on the third release for 2013
[23:01:10] * strcat hates time zones
[23:01:13] *** Joins: seth (seth@moz-D840E602.dsl.static.sonic.net)
[23:01:48] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[23:02:09] <aatch> Hmm, I guess I'll have to figure out the best way of getting at the timezone data properly
[23:02:56] <strcat> aatch: well I think https://bazaar.launchpad.net/~dateutil/dateutil/trunk/files/head:/dateutil/ is a good place to look
[23:03:22] <strcat> doesn't look at all trivial though
[23:03:43] <strcat> look at parser.py ;\
[23:04:02] <strcat> that's just for parsing dates though
[23:04:14] <strcat> time is just scary
[23:04:24] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Client exited)
[23:04:40] <strcat> doesn't help that OSes use convoluted non-standard ways of doing this stuff ;p
[23:05:25] *** Quits: Kruppe (user@moz-4DDA8AB8.uwaterloo.ca) (Ping timeout)
[23:06:42] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[23:06:58] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[23:08:07] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[23:08:58] <aatch> strcat, this is amusing:
[23:09:03] <aatch>      ~ $ date -d "@1365253200"
[23:09:03] <aatch>      Sun Apr 7 02:00:00 NZDT 2013
[23:09:03] <aatch>      ~ $ date -d "@1365256800"
[23:09:03] <aatch>      Sun Apr 7 02:00:00 NZST 2013
[23:09:28] <strcat> DST switch?
[23:09:31] *** Joins: SiegeLord (sl@moz-56D7E78.bstnma.fios.verizon.net)
[23:09:33] <aatch> yep
[23:09:56] <strcat> DST is fun when you dual boot
[23:10:01] <aatch> if you drop the timezone, you get ambiguous timestamps
[23:10:28] <strcat> aatch: which is why the only timezone should be UTC and all timestamps should be iso8601 ;p
[23:10:32] <strcat> but sadly that's not true
[23:10:36] <strcat> so it can't be done that way :(
[23:10:56] <strcat> although I really wonder what the *expected* behaviour is when you schedule something 12 hours ahead
[23:11:07] <strcat> actually 12 hours? or 12 "hours" in the local timezone? ;p
[23:11:25] <cmr> aatch: no you know what's scary? addresses!
[23:11:31] <strcat> or something that's supposed to recur every 6 weeks
[23:11:59] *** Quits: igl (igl@moz-3781D488.adsl.alicedsl.de) (Ping timeout)
[23:12:11] <aatch> cmr, only because of conflicting terminology. And natural language parsing
[23:12:12] *** Joins: igl (igl@moz-7BD256B6.adsl.alicedsl.de)
[23:12:32] <strcat> aatch: and duplicates :)
[23:13:23] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Ping timeout)
[23:13:32] *** Joins: busylizzy (lisa@85228838.12D0DC84.211374C4.IP)
[23:13:48] *** Joins: igl1 (igl@moz-D0477C07.adsl.alicedsl.de)
[23:13:49] <aatch> strcat, what do mean by scheduling something 12 hours ahead?
[23:13:57] *** Quits: igl (igl@moz-7BD256B6.adsl.alicedsl.de) (Ping timeout)
[23:14:25] <erickt> graydon: pong
[23:14:30] <aatch> Oh, as in timezone switches?
[23:14:36] <strcat> aatch: opening up a calendar, scheduling an event, and clicking 'recur every 12 hours'
[23:15:07] <erickt> graydon: ack did I break tests?
[23:15:11] <aatch> I'd say the expected behaviour is 6am -> 6pm -> 6am ...
[23:15:15] <strcat> aatch: yeah but also stuff like leap days (for the 6 week example)
[23:15:27] <aatch> It's known as "Wall time"
[23:15:35] *** Quits: igl1 (igl@moz-D0477C07.adsl.alicedsl.de) (Ping timeout)
[23:15:55] *** Joins: igl (igl@moz-4369B9C3.adsl.alicedsl.de)
[23:16:02] <aatch> Well every 6 weeks would be actually every 42 days.
[23:16:05] <erickt> graydon: ack! that's a bad typo
[23:16:24] <EXetoC> ugh. let's use the same timezone everywhere, and simplify the date system
[23:17:04] <aatch> People expect something scheduled on a weekly basis to recur on the same day each week
[23:17:10] <erickt> graydon: thanks for fixing it
[23:17:21] <strcat> and lets use kiloseconds instead of hours :p
[23:17:26] * strcat dreams
[23:17:33] <aatch> Metric time!
[23:17:41] <strcat> actually existing
[23:17:44] <strcat> existed*
[23:17:50] * aatch has no plans of supporting metric time
[23:17:51] <strcat> after the french revolution
[23:17:52] <strcat> it died :9
[23:17:59] *** Quits: engla (engla@moz-BFD53D48.selucle.dyn.perspektivbredband.net) (Ping timeout)
[23:18:01] *** Joins: engla (engla@moz-BFD53D48.selucle.dyn.perspektivbredband.net)
[23:18:11] <strcat> there was a metric calendar iirc
[23:18:26] <aatch> That would have been interesting.
[23:18:26] *** kimundi is now known as zz_kimundi
[23:18:28] <strcat> https://en.wikipedia.org/wiki/French_Republican_Calendar
[23:18:31] *** Joins: dbaupp (Thunderbir@moz-91B99879.lns20.syd6.internode.on.net)
[23:18:32] *** Joins: igl1 (igl@moz-8F6E38ED.adsl.alicedsl.de)
[23:18:32] <EXetoC> maybe when lojban takes off
[23:18:35] <cmr> the problem with atlernate time systems like that is it needs to counter the intertia of all human culture
[23:18:43] *** Quits: igl (igl@moz-4369B9C3.adsl.alicedsl.de) (Ping timeout)
[23:18:54] <aatch> Since you can't do much about the year being ~365.2425 days long
[23:18:55] <EXetoC> cmr: is that going to be a problem?
[23:19:06] <cmr> that and we're on a rock rapidly whizzing around a ball of nuclear fire, and we really care about when that ball of fire is visible
[23:19:08] <aatch> (depending on how you measure the length of a year)
[23:19:13] <strcat> Each day in the Republican Calendar was divided into ten hours, each hour into 100 decimal minutes, and each decimal minute into 100 decimal seconds. Thus an hour was 144 conventional minutes (more than twice as long as a conventional hour), a minute was 86.4 conventional seconds (44% longer than a conventional minute), and a second was 0.864 conventional seconds (13.6% shorter than a conventional
[23:19:15] <strcat> second).
[23:20:33] <aatch> yeah, it's not going to happen now. The second has an SI-definition now.
[23:21:07] <strcat> aatch: well maybe our robot overlords will think otherwise, it will have to be base2
[23:21:14] <graydon> erickt: yeah, a "turn off all the tests" change :)
[23:21:14] <graydon> np
[23:21:27] <graydon> true <-> false, easiest thing to invert
[23:21:34] <strcat> nice round numbers like 340282366920938463463374607431768211456
[23:22:16] * aatch could probably handle using hexadecimal for a base2 system
[23:22:30] <erickt> graydon: I think it was just my subconscious figuring it was the fastest way to fix all the tests 
[23:22:40] <strcat> aatch: my fingers aren't very good at counting in base2 :(
[23:22:44] <graydon> mission accomplished!
[23:22:48] <aatch> 0x100000000000000000000000000000000
[23:26:10] *** Joins: brendan (brendaneic@6BC3D9FF.179B5C1A.50A7E6A6.IP)
[23:28:27] <pcwalton> blech, been at an EBML reading problem in stage2 metadata for 3 hours now
[23:28:34] <pcwalton> fixed a bunch of bugs but not the one I'm hitting
[23:30:37] <brson> maybe you fixed the one i'm hitting
[23:31:07] <pcwalton> brson: what are you hitting?
[23:31:24] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[23:31:49] *** Joins: a__ (a__@moz-9BBD1F27.nycmny.fios.verizon.net)
[23:31:51] *** Quits: a__ (a__@moz-9BBD1F27.nycmny.fios.verizon.net) (Client exited)
[23:32:04] *** Joins: a__ (a__@moz-9BBD1F27.nycmny.fios.verizon.net)
[23:32:13] <dbaupp> I think I'm being silly, but could I have an explanation of why http://www.reddit.com/r/programming/comments/1dcbos/a/c9qmfkj doesn't require Copy for `a`?
[23:33:01] <brson> I still don't know what I'm hitting. Something not being freed from the exchange heap
[23:33:02] <strcat> dbaupp: destructuring is unsound
[23:33:06] <brson> stil trying to bisect
[23:33:21] <dbaupp> strcat: so that code is actually incorrect?
[23:33:25] <strcat> dbaupp: yes
[23:33:52] <aatch> Ah yes, the pattern matching in let is different to the matching in match
[23:33:55] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:34:01] <aatch> Unless that was fixed (unlikely)
[23:34:15] <strcat> rusti: let x = ~5; let &y = &x;
[23:34:18] <rusti> foo.rs:5:26: 5:29 warning: unused variable: `y`
[23:34:18] <rusti> foo.rs:5          let x = ~5; let &y = &x;
[23:34:18] <rusti>                                    ^~~
[23:34:18] <rusti> note: in expansion of fmt!
[23:34:18] <rusti> foo.rs:4:12: 6:7 note: expansion site
[23:34:22] <strcat> hm
[23:34:24] <dbaupp> yes, it correctly fails if I use a match
[23:34:38] <dbaupp> engla: ^ (i assume you're englabunny on reddit?)
[23:34:42] <strcat> rusti: let x = ~5; let &y = &x; (x, y)
[23:34:43] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/jZDb
[23:34:51] <engla> dbaupp: hi! yes
[23:35:21] <strcat> rusti: let x = ~5; let ~y = x; (x, y)
[23:35:22] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/icOB
[23:35:35] * strcat forgets how to trigger that
[23:35:41] *** Joins: Thad (chatzilla@moz-C35F90AE.tx.res.rr.com)
[23:35:43] <strcat> rusti: let x = ~5; let &y = &x; y
[23:35:44] <rusti> ~5
[23:35:49] <engla> I see dbaupp, :-|  sorry for bugging you with incorrect code.. I'm trying to understand this myself
[23:36:00] *** Joins: RMF (RMF@moz-FD7F97AA.dsl.telepac.pt)
[23:36:13] <strcat> rusti: let mut x = ~5; let &y = &x; *x = 6;
[23:36:15] <rusti> foo.rs:5:30: 5:33 warning: unused variable: `y`
[23:36:15] <rusti> foo.rs:5          let mut x = ~5; let &y = &x; *x = 6;
[23:36:15] <rusti>                                        ^~~
[23:36:15] <rusti> note: in expansion of fmt!
[23:36:15] <rusti> foo.rs:4:12: 6:7 note: expansion site
[23:36:17] <dbaupp> engla: not at all :) I didn't understand it myself until I asked here
[23:36:18] <strcat> rusti: let mut x = ~5; let &y = &x; *x = 6; y
[23:36:19] <rusti> ~5
[23:36:47] <strcat> there ;p
[23:37:06] <engla> so all pattern matchings in let bindings are unchecked?
[23:37:33] <strcat> rusti: struct Foo { x: int }; impl Drop for Foo { fn finalize(&self) { for self.x.times { println("die") } } }; Foo{x: 5}
[23:37:34] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/RPHO
[23:37:48] <strcat> rusti: struct Foo { x: uint }; impl Drop for Foo { fn finalize(&self) { for self.x.times { println("die") } } }; Foo{x: 5}
[23:37:50] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/NAFO
[23:37:52] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[23:38:14] <strcat> rusti: struct Foo { x: uint }; impl Drop for Foo { fn finalize(&self) { for self.x.times { println("die") } } }; let x = Foo{x: 2}; let &_y = &x;
[23:38:15] <rusti> die
[23:38:15] <rusti> die
[23:38:15] <rusti> die
[23:38:15] <rusti> die
[23:38:28] <strcat> engla: well let patterns are totally unsound
[23:38:29] <EXetoC> calm down
[23:38:52] <strcat> I don't know if the match ones are...
[23:38:57] <graydon> jld: ping
[23:39:03] <dbaupp> strcat: wow
[23:39:14] <dbaupp> strcat: that's a bit concerning
[23:39:24] <engla> well match bindings are clearly checking that it needs Copy which let was not
[23:39:27] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[23:39:31] <strcat> well there are a lot of holes that need fixing, nmatsakis is fixing a lot of them with the new borrowck
[23:39:42] <graydon> jld: 1271 is done yes? null ptrs in 
[23:39:45] <graydon> enums
[23:39:52] <strcat> @mut has several holes, & &mut is a hole, let bindings, and lots of the stdlib is incorrect ;p
[23:39:55] <engla> strcat: ok. I guess there are bound to be a lot of things like this still
[23:39:56] <dbaupp> engla: I just added code to the reddit thread which shows the error that should be shown 
[23:40:05] <engla> great
[23:42:42] <Jeaye> Still no update on the Linux chdir assertion? :(
[23:44:21] <strcat> Jeaye: brson said it would be fixed by a snapshot
[23:44:29] <strcat> it doesn't happen on x86_64
[23:44:46] <Jeaye> What does that mean ETA-wise?
[23:44:48] * strcat ran into it while setting up a daily incoming build
[23:45:02] <strcat> Jeaye: well as soon as incoming has the terrible problems fixed I guess ;p
[23:45:40] <Jeaye> v_v
[23:45:48] *** Quits: a__ (a__@moz-9BBD1F27.nycmny.fios.verizon.net) (Quit: I haz left.)
[23:45:56] <brson> I still don't have a successful snapshot done on linux, and based on the mysterious errors I've been seeing I'm a little worried about snapshotting the particular commit I've been trying
[23:46:18] <Jeaye> Gotcha.
[23:46:59] <dbaupp> graydon: bors hasn't picked up the PR you retried https://github.com/huonw/rust/commit/a94c86eecdcd0288c56d4a6f782629eb74ebaa54#commitcomment-3126626
[23:47:08] <graydon> yeah I know, looking at it now
[23:47:10] <graydon> thanks
[23:49:19] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Ping timeout)
[23:50:53] <ssbr> Is it possible to use rustc as a library / use functions from rustc?
[23:51:22] <aatch> ssbr, yup
[23:51:27] <aatch> it might not be pretty
[23:51:27] <ssbr> aatch: how!
[23:51:33] <aatch> extern mod rustc
[23:51:51] <ssbr> Oh wait, that did work.
[23:51:52] <ssbr> Heh.
[23:52:07] <ssbr> I did that and saw a failure and just assumed the worst instead of reading. The failure was something else. Sorry. I'm dumb.
[23:52:35] <ssbr> Wait, no, that's a lie
[23:52:39] <aatch> it's not necessarily going to be a nice experience, but it'll work (for a given value of "work")
[23:52:41] <ssbr> "crate2h.rs:1:0: 1:17 error: can't find crate for `rustc`"
[23:52:54] <aatch> really?
[23:52:59] <ssbr> Really really!
[23:53:03] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[23:53:03] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14a972254 to 1408dd625: 02http://git.io/N3iJvQ
[23:53:03] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[23:53:04] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[23:53:04] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/4FA0Fw
[23:53:04] <ghrust> 13rust/06auto 140583462 15Jesse Luehrs: libc bindings for glob.h...
[23:53:04] <ghrust> 13rust/06auto 14685baed 15Jesse Luehrs: add a higher level glob() function to os...
[23:53:04] <ssbr> (windows 7, FWIW)
[23:53:05] <ghrust> 13rust/06auto 14ed81e33 15Jesse Luehrs: glob_t should be public on all platforms
[23:53:07] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[23:53:12] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[23:53:12] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 145eb32be to 1408dd625: 02http://git.io/N3iJvQ
[23:53:12] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[23:53:43] <ssbr> (rust 0.6)
[23:54:05] *** Joins: bEcker (Thunderbir@moz-597F0F80.resnet.ucsc.edu)
[23:55:13] <aatch> Well it works for me.
[23:55:23] <aatch> I'm on a fairly recent incoming build though
[23:55:34] <cmr> rustc links to librustc
[23:55:37] <cmr> something must be very wrong
[23:55:46] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[23:56:03] <ssbr> well, rustc works, so it can't be that wrong
[23:56:25] <aatch> However, is librustc in the same folder as libcore et al?
[23:56:46] <ssbr> aatch: one and not the other
[23:57:10] <aatch> huh?
[23:57:14] <ssbr> so there's C:\Program Files (x86)\Rust (let's call that Rust). It contains core-<HASH>.dll, rust-<HASH>.dll, core.dll, rust.dll, etc. etc., as well as rustc.exe
[23:57:48] <ssbr> aatch: there's also Rust\rustc\i686-pc-mingw32\ which has core, rustrt, std, libmorestack.a, but not rustc-<HASH>.dll
[23:58:06] <ssbr> I'm also very confused as to when the .dll is relevant and when the -<HASH>.dll is relevant
[23:58:13] <ssbr> e.g. there's no rustrt-<HASH>.dll
[23:58:48] <jld> graydon: Yes, that's fixed.
[23:58:52] <graydon> jld: thanks
[23:58:58] <dbaupp> ssbr: the ones with hashes are rust libraries, the ones without are C(++?) libraries
[23:59:01] <aatch> ssbr, try copying librustc-<hash>.dll into the other folder
[23:59:11] <ssbr> aatch: just did so
[23:59:12] <ssbr> it works
[23:59:18] <aatch> rustrt is written in C++
[23:59:22] <ssbr> (I also had to copy libsyntax)
[23:59:23] <jld> graydon: I thought I had a "Closes #1271" somewhere, which should auto-close it when it lands on master, and isn't master reasonably up-to-date these days?
[23:59:25] <aatch> its a search path issue
[23:59:31] <ssbr> dbaupp: except there's some empty .DLL files that neither use
[23:59:32] <dbaupp> aatch: thanks :)
[23:59:35] <ssbr> e.g. core.dll is a 0 byte file
[23:59:36] *** Quits: thou (thou@moz-1C1CA9F7.fasttrackcomm.net) (Input/output error)
[23:59:36] <graydon> no, master's quite behind :(
[23:59:45] <graydon> incoming's on fire
[23:59:45] <graydon> :((
