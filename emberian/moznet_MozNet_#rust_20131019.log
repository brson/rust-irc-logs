[00:00:01] *** Joins: tjc (tjc@moz-BE33DA21.fw1.sfo1.mozilla.net)
[00:00:01] *** ChanServ sets mode: +o tjc
[00:00:04] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[00:00:15] <erickt> brson: regarding alcohol, I see it at all the meetups I've been to. I don't think it's mandatory thoguh
[00:00:18] <brson> bjz: looping on try_recv is the way to do it
[00:01:00] <bjz> brson: lbergstrom reccomended while port.peek() { /* call recv and handle the events */ }
[00:01:25] <brson> bjz: oh, actually that's right. try_recv does something different
[00:01:32] <erickt> tjc: I didn't consider that people might not want to be in an environment without alcohol and so I'm okay without it
[00:01:43] <erickt> brson / tjc: I got to run though. Back online in an hour or so
[00:01:44] <brson> bjz: sadly, peek/recv is not as efficient as it could be
[00:01:49] <jason_> strcat: not sure what you mean by "we don't have select". the scheduler calls uv event loop, which calls platform select.
[00:01:50] <tjc> erickt: Yeah, it's not an issue for me personally but there are a few reasons why itmight be for some
[00:01:52] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[00:01:57] <strcat> jason_: we don't have a generic select
[00:02:01] <bjz> brson: ok
[00:02:13] <strcat> if you use select/epoll, you can make a timer, and select on both the timer and the I/O event
[00:02:22] <strcat> and it will wake up when the first one happens
[00:02:25] <strcat> we don't have that.
[00:02:35] <strcat> I don't mean select the C API, I mean select the concept
[00:02:54] <strcat> there's no workaround beyond polling or using tasks + channels
[00:03:02] <strcat> (or implementing select ;p)
[00:03:40] *** Joins: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net)
[00:03:45] *** Joins: test-fxos-nick (nodebot@moz-587A9999.hsd1.ca.comcast.net)
[00:04:11] <strcat> if you make a timer in rust, it's going to run to completion
[00:04:23] <strcat> afaik there's no way to cancel it early
[00:04:23] *** Quits: echristo (echristo@4241698A.2E4FD3DD.225F4543.IP) (Ping timeout)
[00:04:27] <brson> erickt: do we have a food preference?
[00:04:28] *** Joins: canhtak (jeremy@moz-44A7DE0.wl.t.ulaval.ca)
[00:04:47] *** Joins: _Vi (vi@DCE8FCEE.CAA062BC.FDCAC96B.IP)
[00:05:08] <benh> strcat: how do you do it with channels without leaving a channel hanging/failing, ultimately?
[00:05:52] *** Quits: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: My lid went down)
[00:05:58] <acrichto> brson: haha the nopt compilers have been possibly overflowing their stacks this entire time
[00:06:04] <strcat> benh: you always end up having to wait for the timer to finish afaik
[00:06:59] <strcat> I have no idea how to implement this kind of thing safely on top of libuv, I just know that epoll is higher-level despite it being what libuv is using
[00:07:14] <strcat> beyond it being a C API with quirky C-isms
[00:07:20] <dbaupp> acrichto: o_O
[00:07:22] * strcat shrugs
[00:07:29] <acrichto> dbaupp: http://buildbot.rust-lang.org/builders/auto-linux-64-nopt-c/builds/1137/steps/compile/logs/stdio
[00:07:29] <jason_> strcat: if a rust socket had a uv_timer associated with it that was set before descheduling the task, the runtime could stop the timer when the task is scheduled again for io or timer completion. thats all i was saying.
[00:07:35] <acrichto> dbaupp: and that's *after* doubling the size of the stack
[00:07:50] <dbaupp> acrichto: how do the tests pass?!? :S
[00:07:58] <acrichto> dbaupp: this is just compiling rustc
[00:08:05] <acrichto> I imagine most of the time it doesn't recurse so deep
[00:08:11] <dbaupp> acrichto: well, how does the build pass?
[00:08:17] <acrichto> dbaupp: that is a good question
[00:08:21] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[00:09:02] <dbaupp> acrichto: oh... running into the stack of the next thread and somehow not crashing that one?
[00:09:10] <brson> acrichto: that's sad
[00:09:21] <strcat> jason_: we don't have the primitives made to do it with the stdlib though
[00:09:21] <acrichto> gonna try to see what's recursing so deeply
[00:09:29] <sfackler> does rust not use guard pages?
[00:09:37] <acrichto> sfackler: not right now, no
[00:09:56] <strcat> it uses LLVM's segmented stack implementation to track stack usage
[00:09:57] <acrichto> we have 'let stack = vec::with_capacity(size)'
[00:10:15] <acrichto> man rust compiles fast when you don't have optimizations on
[00:10:37] *** Quits: test-fxos-nick (nodebot@moz-587A9999.hsd1.ca.comcast.net) (Client exited)
[00:10:42] <strcat> if by fast you mean an order of magnitude slower than clang ;p
[00:11:06] <dbaupp> strcat: but it's an order of magnitude faster than without -O :P
[00:11:09] <acrichto> I wonder how long it takes to compile clang
[00:11:10] <dbaupp> *with
[00:11:20] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[00:11:30] <strcat> we generate good code in many cases now, but there are enough really terrible things left that our IR is still enormous
[00:11:55] <dbaupp> what's the worst culprit(s) at the moment?
[00:11:59] <dbaupp> fail!() etc?
[00:11:59] <acrichto> I'd be curious to see what no_unwinding would do to rustc
[00:12:08] <strcat> dbaupp: it's more a library problem than a language problem now
[00:12:24] <pcwalton> acrichto: it was like 30% improvement
[00:12:25] <pcwalton> I want to do it
[00:12:29] <acrichto> pcwalton: that's huge
[00:12:34] <pcwalton> yeah it is
[00:12:37] <strcat> dbaupp: the codegen is much better
[00:12:44] <pcwalton> my patch to do it bounced for some silly reason a long time ago
[00:12:55] <dbaupp> strcat: ok, that's much nicer
[00:13:04] <dbaupp> libraries are "easy" :P
[00:13:09] <strcat> well, "easy"
[00:13:36] <acrichto> well recently fs_open was type-generic all the way down to the call to libuv
[00:13:45] <acrichto> we could do stuff like lifding the type-generic-ness up to a higher level
[00:13:48] <acrichto> lifting*
[00:13:52] *** Joins: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com)
[00:14:09] <acrichto> so if you asked for an "XContainer" then the first thing you do is "give me the X" and then everything beneath that level only takes X
[00:14:19] <acrichto> doesn't work for eerything though,
[00:14:22] <dbaupp> also, enabling mergefuncs (speaking of which.. how's upstream mergefuncs?)
[00:14:34] <acrichto> dbaupp: compile "fn main() { task::try(|| {}) }", it's an insane amount of llvm code
[00:15:01] <strcat> dbaupp: not ready
[00:15:06] <strcat> doesn't cast aggregates properly
[00:15:34] <strcat> we won't use mergefunc at -O0 anyway
[00:15:36] <Amaranth> Wait was no_unwinding a 30% improvement to build times? Object size?
[00:15:45] *** Joins: lfox (lfox@moz-F9C0E858.nycmny.east.verizon.net)
[00:16:00] <strcat> merging stuff makes debugging much harder
[00:16:03] <pcwalton> both I think
[00:16:12] <pcwalton> it was huge
[00:16:19] <jason_> strcat: if rust can deschedule a task until io is ready, i don't see why it can't deschedule a task until io *or* a timer is ready. and depending on which happens first use uv_timer_stop or uv_read_stop?
[00:16:52] <Amaranth> pcwalton: Now was that timing how long it takes to build rustc or how much faster rustc builds things?
[00:17:00] <pcwalton> the former
[00:17:00] <strcat> jason_: we need a generic solution
[00:17:06] <strcat> you may want to wait for two I/O events, a timer and a signal
[00:17:06] <pcwalton> but honestly this is a while ago, things might have changed
[00:17:20] <Amaranth> Alright because I wouldn't expect it to change how fast rustc itself is
[00:17:35] <strcat> I don't think hardcoding a case for waiting for specific events with timeouts is the solution - although having those as convenience functions would make sense
[00:18:25] <strcat> simple example use case is the evalbot here
[00:18:49] <strcat> it needs to wait for a stdout/stderr, the child exiting, or the timer expiring
[00:19:00] *** Quits: jordyd (jordyd@moz-BB628E0D.seg48.ucf.edu) (Ping timeout)
[00:19:01] <acrichto> libuv doesn't support cancelling anything other than fs/getaddrinfo/work requests :(
[00:19:02] <benh> if we have that, can we deschedule a task until io/a timer/some uv thing is ready *or* a port/chan stops blocking, or is that another kind of problem entirely?
[00:19:22] *** Quits: tjc (tjc@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: zzzzzzzzzz)
[00:19:22] <jason_> acrichto: uv_read_stop and uv_close
[00:19:36] <acrichto> jason_: ah! thanks :)
[00:20:01] <earlzlap> are iterators against vectors guaranteed to be in order? Like the first result is the first element, always ? or would that be considered an implementation detail? 
[00:20:08] <acrichto> jason_: oh wait now I remember, those don't support cancelling writes
[00:20:13] <strcat> earlzlap: yes, they are in-order
[00:20:27] <strcat> and if you invert the iterator, it's in reverse order
[00:20:31] <earlzlap> and what about, say hashset or hashmap? 
[00:20:48] <strcat> earlzlap: that's arbitrary (randomized for a given set of keys in a given hashmap)
[00:20:57] <strcat> hash tables are keyed
[00:21:16] *** Joins: aegeaner (Aegeaner@83533B47.BD9EA362.4446104D.IP)
[00:21:42] <jason_> strcat: yeah that'd be nice, but you can work around it as long as you have timeout for a single event. for example, you spawn a task per thing you'd like to wait on, have them all send their events back on a channel and have your main thing wait on that channel
[00:22:02] <jason_> acrichto: uv_close canceled writes
[00:22:14] <acrichto> jason_: but it also closes the whole file descriptor :(
[00:22:28] <jason_> only safe thing to do
[00:22:45] <acrichto> how so?
[00:22:52] <dbaupp> rusti: use std::hashmap::HashMap; let mut m1 = HashMap::new(); m1.insert(1, "a"); m1.insert(2, "b"); m1.insert(3, "c"); m1.insert(4, "d"); let mut m2 = HashMap::new(); m2.insert(1, "a"); m2.insert(2, "b"); m2.insert(3, "c"); m2.insert(4, "d"); (m1.move_iter().to_owned_vec(), m2.move_iter().to_owned_vec())
[00:22:53] -rusti- (~[(4, "d"), (3, "c"), (2, "b"), (1, "a")], ~[(3, "c"), (1, "a"), (4, "d"), (2, "b")])
[00:23:00] <dbaupp> earlzlap: ^
[00:23:05] <strcat> run it again
[00:23:09] <pcwalton> how do I get a mutable consuming iterator?
[00:23:11] <pcwalton> mut_move_iter?
[00:23:16] <dbaupp> strcat: well, it's already running it twice :P
[00:23:19] <strcat> dbaupp: oh
[00:23:24] <acrichto> pcwalton: move_iter consume so you control mutability?
[00:23:27] <dbaupp> pcwalton: that... doesn't make sense?
[00:23:28] <acrichto> consumes*
[00:23:34] <pcwalton> oh right
[00:23:37] <pcwalton> I guess I have to let mut
[00:23:51] <dbaupp> rusti: use std::hashmap::HashMap; let mut m1 = HashMap::new(); m1.insert(1, "a"); m1.insert(2, "b"); m1.insert(3, "c"); m1.insert(4, "d"); let mut m2 = HashMap::new(); m2.insert(1, "a"); m2.insert(2, "b"); m2.insert(3, "c"); m2.insert(4, "d"); (m1.move_iter().to_owned_vec(), m2.move_iter().to_owned_vec())
[00:23:52] -rusti- (~[(2, "b"), (4, "d"), (1, "a"), (3, "c")], ~[(3, "c"), (1, "a"), (4, "d"), (2, "b")])
[00:23:59] <dbaupp> strcat: there we go, 4 times :P
[00:24:16] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[00:24:52] <jason_> if you timeout on a write, you can't know what got sent, so its not safe to start sending more data. you'll garble whatever protocol you're trying to implement
[00:24:52] <earlzlap> What about modifying the base of the iterator? Like doing "foo".iter() and within the iterator changing "foo" to "bar" ? 
[00:26:22] <strcat> earlzlap: you can't invalidate an iterator, borrow checking prevents it
[00:26:42] <strcat> also, there's not really a 'within the iterator', they are state machines
[00:27:06] <earlzlap> ah
[00:27:09] <strcat> rusti: let xs = "foo"; let mut it = xs.iter(); (it.next(), it.next(), it.next(), it.next())
[00:27:09] -rusti- (Some('f'), Some('o'), Some('o'), None)
[00:28:01] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[00:28:05] *** Quits: Ferreus (ferreus@moz-B7818BDD.pools.arcor-ip.net) (Quit: WeeChat 0.4.2)
[00:28:23] <dbaupp> earlzlap: which means, that you can write an iterator that allows changing the 'base' while iterating... it'll have to pass the borrow checker though. (and none of the stdlib iterators support it)
[00:30:00] <jason_> acrichto: imagine you're trying to send an http request and timeout occurs. you can't use that connection for anything else (like sending another request) because you haven't completely sent the first request. read side is the same way. if the server has a timeout trigger while waiting for the request, it is going to close the socket.
[00:30:08] *** Quits: dbaupp (Thunderbir@moz-54ADD9F4.lns20.syd6.internode.on.net) (Ping timeout)
[00:30:39] <acrichto> jason_: makes sense, I can't imagine what else I'd do on a timeout either
[00:31:02] *** Quits: blank_name (blank_name@2E4E7E43.800E1818.31EC03F3.IP) (Quit: leaving)
[00:31:25] <jason_> the other reason you'd use a timeout is "i'd like to wait for something, but if it isn't done in this amount of time, i want to do something else." and you don't really need that with rust tasks, you just put the read in one task and the other thing you want to do in another task
[00:31:44] <earlzlap> If I have two separate iterators where each element of the two iterators (in order) is related to each other. Is there anything better I can do than manually calling .next() ?
[00:32:52] <strcat> earlzlap: zip
[00:33:00] *** Joins: tjc (tjc@moz-BE33DA21.fw1.sfo1.mozilla.net)
[00:33:00] *** ChanServ sets mode: +o tjc
[00:33:42] *** Joins: dbaupp (Thunderbir@moz-54ADD9F4.lns20.syd6.internode.on.net)
[00:33:42] <strcat> rusti: let x = "foo"; let mut y = range(6, 10); for (a, b) in x.iter().zip(y) { println!("{} {}", a, b) }
[00:33:44] -rusti- pastebinned 7 lines of output: http://ix.io/8Aw
[00:33:54] <strcat> rusti: let x = "foo"; let y = range(6, 10); for (a, b) in x.iter().zip(y) { println!("{} {}", a, b) }
[00:33:54] -rusti- f 6
[00:33:55] -rusti- o 7
[00:33:55] -rusti- o 8
[00:33:55] -rusti- ()
[00:34:02] <earlzlap> oh. that's cool
[00:34:08] <earlzlap> I forget that Rust has tuples heh
[00:34:19] <strcat> earlzlap: http://static.rust-lang.org/doc/master/std/iter/trait.Iterator.html there are a list of the default methods it provides there
[00:34:51] <strcat> (and some more on other traits, like next_back/invert)
[00:35:55] *** Quits: riley (riley@8BA43816.9AA11D69.65DDFA89.IP) (Client exited)
[00:37:09] <earlzlap> Am I the only one that finds navigating by traits a bit confusing? It'd be nice if the documentation had an alternative view that just said everything that can be done on a struct
[00:38:42] <strcat> I don't think it really knows that
[00:38:44] <strcat> due to generic impls
[00:39:11] <dbaupp> earlzlap: most structs list all the traits they (explicitly) implement
[00:39:51] <earlzlap> ah. I guess that would be true. It'd require more advanced analysis I imagine
[00:39:57] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[00:40:05] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[00:42:19] *** Joins: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net)
[00:43:26] <reedlepee> kl
[00:43:37] <reedlepee> brson:/rust/src/libextra/ebml.rs:626:4: 626:5 error: expected ident
[00:43:46] *** Quits: tjc (tjc@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: zzzzzzzzzz)
[00:43:47] <reedlepee> sorry /rust/src/libextra/ebml.rs:626:4: 626:5 error: expected ident
[00:44:15] <doomlord_> earlzlap - its not so hard to grep for all the impl's for a struct
[00:44:35] <reedlepee> when i ran "make check-stage1-extra" after making all the fields private 
[00:44:40] <reedlepee> it gave the abov error
[00:45:17] *** Quits: lfox (lfox@moz-F9C0E858.nycmny.east.verizon.net) (Quit: ZZZzzz…)
[00:45:36] <SiegeLord> earlzlap: I recall making that suggestion to people responsible... I'm not sure it got turned into an enhancement request
[00:45:40] <dbaupp> reedlepee: sounds like you have a typo
[00:45:45] <reedlepee> is it because i made writer priv in "       pub struct Encoder {      priv writer: @io::Writer,   " or it is because of something else
[00:46:05] <dbaupp> reedlepee: could you show us the code around line 626 of ebml.rs?
[00:46:16] <reedlepee> yeah sure
[00:46:16] *** Joins: blank_name (blank_name@2E4E7E43.800E1818.31EC03F3.IP)
[00:46:51] <reedlepee> shoud i paste it here ?
[00:46:55] *** Quits: Earnestly (earnest@moz-BE290A2B.dyn.plus.net) (Ping timeout)
[00:47:21] <reedlepee> http://mibpaste.com/3cLVFy 
[00:48:12] <SingingBoyo> reedlepee: extra comma at the end of line 625
[00:48:12] <reedlepee> dbaupp: the first field i changed to priv the second one was already priv
[00:48:33] <dbaupp> rusti: struct Foo { x: int, }
[00:48:34] -rusti- ()
[00:48:39] <dbaupp> SingingBoyo: that should be fine
[00:48:55] <SingingBoyo> reedlepee: the last field in a struct shouldn't have a comma after it.
[00:48:56] <dbaupp> reedlepee: weird! what happens if you remove the `priv` on the first field?
[00:49:01] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[00:49:08] <dbaupp> SingingBoyo: trailing commas there work fine
[00:49:19] *** Joins: tjc (tjc@moz-BE33DA21.fw1.sfo1.mozilla.net)
[00:49:19] *** ChanServ sets mode: +o tjc
[00:49:32] <dbaupp> reedlepee: hm, does the code you are compiling include those 2 comments?
[00:49:46] <benh> the problem is the doc comments, yeah :D
[00:49:49] <reedlepee> dhaupp: yes
[00:49:58] <reedlepee> dbaupp: yes
[00:50:01] <benh> /// comments have to come before something
[00:50:17] <dbaupp> reedlepee: ah, because they are `///` with three `/`'s they are "doc" comments, wihch need to be attached to something
[00:50:19] <benh> since there's nothing after the "/// this was already priv", only a }, it's not happy
[00:50:39] <benh> so you could remove them or make them into // comments with two /
[00:50:39] <dbaupp> reedlepee: so the compiler is looking for another field after the comment benh mentions
[00:51:18] <SingingBoyo> dbaupp: oh oops. I just never leave them and it seemed like it'd make it look for another field.  doc comment problem makes more sense though.
[00:52:04] <reedlepee> http://mibpaste.com/bCQUkw 
[00:52:12] <reedlepee> would this be okk?
[00:52:23] <dbaupp> it should be, yes
[00:52:34] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[00:53:09] <reedlepee> dbaupp: ohk i will change it :)
[00:53:11] <dbaupp> reedlepee: (although, those comments don't need to be in the final commit; someone interested in the history of the struct can just use `git blame`.)
[00:56:03] <SingingBoyo> For doc comments in functions using //!, if I have a second line of the comment, should it also start with //!?
[00:56:08] <benh> yes
[00:57:19] <jld> rusti: static S: uint = 23 as uint; [0, ..S]; ()
[00:57:20] -rusti- error: internal compiler error: node_id_to_type: no type for node `expr 23 as uint (id=23)`
[00:57:20] -rusti- task '<unnamed>' failed at 'explicit failure', /build/rust-git/src/rust/src/libsyntax/diagnostic.rs:98
[00:57:20] -rusti- task '<unnamed>' failed at 'explicit failure', /build/rust-git/src/rust/src/librustc/rustc.rs:391
[00:57:20] -rusti- application terminated with error code 101
[00:57:54] <dbaupp> SingingBoyo: each /// slash //! comment is parsed independent of the others,  the first time they get placed into one paragraph by rustdoc
[00:58:03] <reedlepee> dbaupp: those comments are basically for me . I added comments so that i can distinguish what i changed :)
[00:58:25] <dbaupp> reedlepee: yeah, no problem; I assumed that is the reason for that :)
[00:59:14] *** bent is now known as bent|away
[00:59:14] <pcwalton> is there a way to move each value out of a hashmap in turn, eventually ending up with an empty hashmap?
[00:59:14] <pcwalton> oth
[00:59:21] <pcwalton> other than swapping the hashmap with a new local
[00:59:35] *** Quits: nkoep (nik@moz-3BD3EE1F.pool.mediaways.net) (Client exited)
[00:59:39] <dbaupp> rusti: static S: uint = 23; [0, .. S];
[00:59:39] -rusti- ()
[00:59:47] <dbaupp> jld: weird that it works without that as
[00:59:55] <strcat> pcwalton: I think there's a consume iterator
[00:59:59] <strcat> (could be wrong)
[01:00:13] <pcwalton> I'll just use util::replace, this isn't perf critical
[01:00:14] *** Quits: jxv (jxv@4732E7D7.2AB34561.9B38A32A.IP) (Ping timeout)
[01:00:14] <dbaupp> strcat: doesn't that consume the whole hashmap? leaving you with nothing at the end
[01:00:21] <pcwalton> that's what I want
[01:00:26] <pcwalton> I just don't want to *move* the hashmap
[01:00:43] <dbaupp> yeah, that's what I mean, .move_iter moves the whole hashmap
[01:00:44] <Eridius> do you need to mutate the hashmap as you go?
[01:00:49] <Eridius> you can't just iterate the thing, then call .clear() when you're done?
[01:01:00] <pcwalton> Eridius: I need to consume each value
[01:01:10] <strcat> pcwalton: well, there's pop, but I don't think it will really work for that
[01:01:22] <strcat> it pops a specific value
[01:01:27] <strcat> we could have one popping an arbitrary value
[01:01:29] <pcwalton> it's no big deal, I'll just let map = util::replace(&mut self.map, HashMap::new());
[01:01:29] <ercxx> strcat: What time does thestinger/rust-git update the build?
[01:01:34] <pcwalton> and then move_iter that map
[01:01:50] <strcat> ercxx: uhh, it's in a different time zone than me - let me check
[01:02:02] <strcat> it could be in germany, I think
[01:02:05] * strcat isn't sure where Arch's servers are
[01:02:25] <Eridius> the documentation on std::hashmap::HashMap seems horribly broken. It doesn't seem to include any of the functions actually impled on it
[01:02:31] <Eridius> http://static.rust-lang.org/doc/master/std/hashmap/struct.HashMap.html
[01:02:38] <ercxx> strcat: Not a big deal.
[01:02:42] <strcat> ercxx: heh the server uses UTC as the time zone :)
[01:02:44] <strcat> so it runs at 9pm UTC
[01:02:45] <dbaupp> Eridius: default methods don't get listed in the trait listings
[01:02:53] <ercxx> strcat: thanks
[01:03:02] <strcat> ercxx: it builds LLVM every time so it takes a while
[01:03:08] <dbaupp> Eridius: so Map and MutableMap are rather empty :(
[01:03:13] <Eridius> dbaupp: I'm not talking about trait methods. I'm talking about `impl<K: Hash + Eq, V> HashMap<K, V>`
[01:03:20] <Eridius> this is HashMap, not Map
[01:03:22] <dbaupp> Eridius: oh... really?
[01:03:24] <Eridius> yep
[01:03:52] <strcat> pcwalton: python has popitem in addition to pop, popping an arbitrary one
[01:03:53] <strcat> and pop on sets
[01:03:58] <strcat> could copy that
[01:03:59] <dbaupp> Eridius: wow, yes
[01:04:13] *** Quits: tjc (tjc@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: zzzzzzzzzz)
[01:04:34] <earlzlap> So, with inp being &str and text being ~str.. you can do inp == text, but you get a casting error with text == inp. That's rather unintuitive
[01:04:35] <Eridius> pcwalton: incidentally, popping a hashtable may do a reasonable amount of work, since it has to re-build the bucket
[01:04:42] <pcwalton> yeah
[01:04:49] <pcwalton> swapping with HashMap::new() may be faster!
[01:04:51] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[01:05:56] * acrichto shakes fist at sfackler for making env! a compile time failure
[01:06:16] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:06:26] *** Quits: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Quit: jeffdb)
[01:06:44] <acrichto> Eridius: whoa that's concerning
[01:06:50] <acrichto> re hashmap
[01:07:20] <acrichto> maybe rustdoc doesn't handle multiple impl blocks very well
[01:07:21] <dbaupp> acrichto: just go and change them all to option_env!()
[01:07:28] <Eridius> acrichto: or maybe it's confused by impls that have trait bounds?
[01:07:28] *** Joins: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[01:07:39] <Eridius> I'm surprised this hasn't been noticed before now. Could it be a recent change?
[01:07:49] <acrichto> Eridius: whatever it is, this is not cool
[01:07:50] <Eridius> (and if so, that suggests rustdoc_ng tests aren't good enough)
[01:07:58] <acrichto> it was probably privacy stripping
[01:08:10] <acrichto> http://static.rust-lang.org/doc/0.8/std/hashmap/struct.HashMap.html
[01:08:12] <Eridius> oh you think it got the privacy rules wrong?
[01:09:36] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Ping timeout)
[01:09:40] *** Joins: busylizzy (lisa@85228838.12D0DC84.211374C4.IP)
[01:09:50] <acrichto> oh argh yep
[01:13:35] <pcwalton> the "destructor bomb" pattern is nice
[01:13:41] <Eridius> ?
[01:14:00] <pcwalton> where you have some resource you need to remember to explicitly destroy, perhaps because you need some argument
[01:14:13] <pcwalton> my concrete use case here is X11 Pixmaps, where you need a Display * to destroy it
[01:14:17] *** Quits: efyx (efyx@moz-27C66711.adsl-dyn.isp.belgacom.be) (Client exited)
[01:14:34] <Eridius> what does "destructor bomb" mean?
[01:14:37] <pcwalton> so you impl Drop on it and fail in the destructor saying "this should not happen"
[01:14:43] <pcwalton> i.e. a destructor bomb
[01:14:47] <Eridius> ahh
[01:14:50] <pcwalton> but you have a destroy() method that defuses the bomb
[01:14:59] <pcwalton> by setting a flag (in this case, setting the pixmap XID to 0)
[01:15:13] <pcwalton> apprently brson independently invented this in the rust uv code
[01:15:14] <Eridius> hrm, you could also util::forget() it...
[01:15:27] <pcwalton> right, that works too
[01:15:31] <pcwalton> requires unsafe but yes
[01:15:45] <pcwalton> (though XFreePixmap() also requires unsafe so no big deal)
[01:15:47] <Eridius> hrm, it would be nice if we could make a type that you can statically assert will never destruct
[01:15:47] <benh> it's a compromise to avoid carrying around a Display* field in every Pixmap object and just actually destroying it in the destructor?
[01:16:02] <Eridius> because then you can make the check at compile-time instead of runtime
[01:16:07] <jeaye> X11 :(
[01:16:11] <pcwalton> benh: carrying around a Display* is unsafe because you don't know if you destroyed the display first
[01:16:19] <pcwalton> you'd have to reference count the Display* and... eww :(
[01:16:20] <acrichto> Eridius: haha this rustdoc bug is a one-line fix
[01:16:23] <Eridius> acrichto: \o/
[01:16:36] <pcwalton> I'm slowly taming Xlib's madness using Rust's type system :)
[01:16:42] <benh> :D
[01:16:51] <pcwalton> and getting the graphics-related crashes out of Servo one by one
[01:16:56] <pcwalton> it's very gratifying!
[01:17:00] <Eridius> pcwalton: I'm actually rather tempted to say that you should be able to compile-time assert that a type is never destructed, and thus must use util::forget() to remove it
[01:17:07] <pcwalton> Eridius: that would be nice, yeah
[01:17:10] <pcwalton> #[indestructible]
[01:17:17] <Eridius> along with perhaps a message telling the user how they're supposed to kill it
[01:17:35] *** Joins: z0w0 (zack@moz-C877F2F7.lnse2.cha.bigpond.net.au)
[01:17:37] <Eridius> #[indestructible("call .destroy() to kill this")]
[01:17:54] <pcwalton> yeah, here it's
[01:17:58] <pcwalton> "
[01:18:14] <pcwalton> task failed at "You should have disposed of a native surface properly with destroy()! Instead of leaking I shall punish you!"
[01:18:33] <Eridius> yeah, which is better than nothing
[01:18:35] <Eridius> but compile-time > runtime
[01:18:41] <pcwalton> agreed
[01:18:46] <Eridius> you should file an issue on this ;)
[01:18:59] <benh> (trying really hard to suppress that kneejerk "wonder why you can't use xcb" reaction, argh! gotta read up on what the deal with glx is)
[01:19:09] <Eridius> although one worry about promoting the use of cast::forget() to destroy such types is you have to remember to destruct any fields that need destruction
[01:19:20] <Eridius> so maybe there should then be an intrinsic that destructs indestructible objects
[01:19:41] <acrichto> Eridius: https://github.com/mozilla/rust/pull/9941
[01:19:45] <pcwalton> oh no, lovecraft crash
[01:19:48] <pcwalton> "unwinding again"
[01:19:52] <pcwalton> I guess too many destructors fired
[01:19:56] <pcwalton> we should fix that at some point :)
[01:19:59] <strcat> Eridius: well you can just add a flag to implement ignore()
[01:19:59] <pcwalton> to just start leaking
[01:20:01] <Eridius> acrichto: nice
[01:20:01] <strcat> as a method
[01:20:28] <Eridius> strcat: why ignore?
[01:20:31] <strcat> pcwalton: what exactly happened?
[01:20:34] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[01:20:45] <pcwalton> strcat: presumably failing while unwinding
[01:21:09] *** Quits: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com) (Ping timeout)
[01:21:21] <benh> impl Drop1<*Display> for MyPixmap { fn drop(&mut self, d: *Display) {...}} :3
[01:21:27] <strcat> pcwalton: leaking seems bad because Arcs won't be poisoned
[01:21:38] <pcwalton> oh, it's bad for a lot of reasons
[01:21:51] <pcwalton> what I suggest is setting a "taint" flag
[01:21:59] <pcwalton> a la the Linux kernel's taint
[01:22:12] <pcwalton> saying that "this process is tainted, a well-behaved app should try to shut down this process ASAP"
[01:22:23] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[01:22:25] <pcwalton> here tainted because of leaks
[01:23:25] <pcwalton> Servo should do something smart for tainted processes... a tainted compositor will tell the user to save their work and restart, while a tainted tab will probably tell the user to reload the page
[01:23:37] <strcat> if you fail in a destructor, that task blocks and it informs the parent via a failure? *shrug*
[01:23:45] <pcwalton> well, blocking is a leak
[01:23:49] <strcat> yeah
[01:23:52] <strcat> but a safe leak
[01:23:55] <pcwalton> sure
[01:24:53] <pcwalton> instead of the "Aw snap!" page it's nice to tell the user "something has gone badly wrong and this tab is leaking, you should probably reopen it but you can keep interacting with it"
[01:24:56] <pcwalton> like the linux kernel oops
[01:25:25] <jld> pcwalton: Not related to the "tainted kernel" flag for module license management, I take it.
[01:25:33] <pcwalton> jld: it's the same mechanism
[01:25:39] <pcwalton> there are several taint bits in the linux kernel
[01:25:44] <pcwalton> license is a common one
[01:25:46] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[01:25:49] <strcat> jld: virtualbox modules are open source but taint the kernel :)
[01:25:52] <pcwalton> "an oops occurred" is another one
[01:25:58] <jld> pcwalton: Oh.
[01:26:14] <pcwalton> taint in the linux kernel is also used as a mechanism whereby the linux devs are free to ignore your bug reports if they see taint bits sets
[01:26:15] <Luqman> strcat: even without the usb stuff?
[01:26:20] <pcwalton> that's less important for us
[01:26:30] <strcat> Luqman: yep
[01:26:44] <strcat> Luqman: https://lkml.org/lkml/2011/10/6/317
[01:26:46] <pcwalton> but I find the "you should restart your system because a driver crashed, but I'll let you save your work" part of it interesting
[01:27:03] <pcwalton> a lot nicer than just calling panic() at the slightest hint of trouble
[01:27:04] <jld> pcwalton: I also found something from 1998 that's like a simple mandatory access control system.
[01:27:15] <pcwalton> seccomp?
[01:27:33] <jld> pcwalton: No.  http://haa.iki.fi/luennot/sec98/reports/3/
[01:27:47] <strcat> seccomp is a fun way to cause weird failures
[01:27:59] <strcat> since you can pick arbitrary error values
[01:28:17] <pcwalton> oh, interesting
[01:28:39] * jld <- sort of semi-accidentally volunteered to make seccomp e10s actually work.
[01:28:56] <pcwalton> cool, wanna make it work for servo when you're done? ;)
[01:29:03] <pcwalton> I'm doing a lot of the hard work now
[01:29:15] <pcwalton> to make the renderer and compositor not share data structures
[01:29:31] *** Quits: SingingBoyo (sboyo@DA28FB90.A5D0D593.4F048BDC.IP) (Ping timeout)
[01:29:32] <pcwalton> oh, btw, I really want a spawn_process() in libstd
[01:29:40] <pcwalton> that takes a ~fn (proc) and spawns it into a new process
[01:29:55] <dbaupp> that'd be cool. (How would captures work?)
[01:30:01] <pcwalton> oh er
[01:30:05] <pcwalton> I mean an extern "Rust" fn ;)
[01:30:10] <strcat> pcwalton: hm, wouldn't that require fork?
[01:30:13] <pcwalton> that would be a way cool feature and would make writing Chrome-style sandboxed apps way easier
[01:30:19] <pcwalton> strcat: with no captures, no
[01:30:28] <pcwalton> acrichto and I discussed an idea for this at the summit
[01:30:41] <pcwalton> the idea was to have the compiler whitelist entry points (say, with an attribute)
[01:30:46] *** Joins: jxv (jxv@4732E7D7.2AB34561.9B38A32A.IP)
[01:30:46] <pcwalton> throw those into a table
[01:30:57] <pcwalton> and then start the binary with RUST_ENTRY_POINT=0x12345678
[01:31:11] <strcat> jld: and namespaces! :)
[01:31:12] <pcwalton> and the runtime starts at the entry point you gave it if it's whitelisted
[01:31:17] *** Quits: crembo (crembo@moz-C2B364AA.vc.shawcable.net) (Client exited)
[01:31:21] <strcat> jld: those are easier though ;p
[01:31:45] * strcat is still patiently waiting for a working CLONE_NEWUSER
[01:32:12] *** Joins: SingingBoyo (SingingBoy@DA28FB90.A5D0D593.4F048BDC.IP)
[01:32:15] <pcwalton> but being able to write "do spawn_process { sandbox(NoNetwork); println("Hey there from a sandbox!"); }" and have it work
[01:32:28] <pcwalton> would be a huge leap forward for developing secure apps I think
[01:32:55] <strcat> pcwalton: lack of external networking is much easier than seccomp
[01:33:06] <dbaupp> pcwalton: it would need a sane wrapper to get communication back to the main process, right?
[01:33:07] <pcwalton> it's just an example :)
[01:33:11] <dbaupp> (to make it truely useable)
[01:33:18] <pcwalton> dbaupp: yup. something like flatpipes
[01:33:22] <strcat> pcwalton: I know, just pointing out that it's really easy to get it working ;p
[01:33:29] <acrichto> the dearly departed flatpipes :(
[01:33:46] <pcwalton> a thing that looks just like Chan and Port, but actually does serialization and runs over Unix pipes, or Windows named pipes
[01:33:49] <dbaupp> </3 moving so fast we break our own code
[01:34:02] *** Quits: SingingBoyo (SingingBoy@DA28FB90.A5D0D593.4F048BDC.IP) (Ping timeout)
[01:34:51] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:35:10] *** Joins: tjc (tjc@moz-BE33DA21.fw1.sfo1.mozilla.net)
[01:35:10] *** ChanServ sets mode: +o tjc
[01:37:11] *** Quits: blank_name (blank_name@2E4E7E43.800E1818.31EC03F3.IP) (Ping timeout)
[01:37:21] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[01:38:40] <strcat> pcwalton: an annoying problem is that to make a sandbox you need root access, until CLONE_NEWUSER is implemented
[01:38:55] <strcat> for seccomp you don't, but for namespaces you do
[01:39:00] <strcat> so you need some setuid shim
[01:39:12] <reedlepee> dbaupp:  error: field `data` is private /home/chitra/ac/myrust/rust/src/librustc/middle/astencode.rs:1066                 *doc.data,                                                                                    ^~~~~~~~
[01:39:17] <pcwalton> I was thinking mostly about seccomp
[01:39:56] <reedlepee> does it mean that wherever data field is private i should make it public ??
[01:40:25] <strcat> pcwalton: I think namespaces are more valuable overall - seccomp protects you from local root exploits by reducing the surface area, and namespaces make the exposed system calls guarantee isolation
[01:40:36] <strcat> if the kernel was perfect, you'd just need namespaces
[01:41:27] <dbaupp> reedlepee: yeah, sounds like the data field needs to be left public
[01:42:09] <reedlepee> but in some files like /libextra/arc.rs data field was already priv ..
[01:42:19] <reedlepee> i didn't make it priv in arc.rs
[01:42:49] *** Joins: SingingBoyo (SingingBoy@DA28FB90.A5D0D593.4F048BDC.IP)
[01:43:06] <reedlepee> i made it priv in  /libextra/ebml.rs
[01:43:26] <reedlepee> dbaupp: So should i make all data fields public
[01:43:39] <reedlepee> or the only those which i changed ?
[01:44:08] <dbaupp> reedlepee: yeah, doc is a extra::ebml::Doc, not an Arc
[01:44:30] <dbaupp> reedlepee: in fact, I think all the fields of extra::ebml::Doc should be left public
[01:45:09] <reedlepee> dbaupp: I didn't get you..
[01:45:44] <dbaupp> reedlepee: in libextra/ebml.rs, there is a struct Doc { ... }
[01:45:46] *** Joins: blank_name (blank_name@2E4E7E43.800E1818.31EC03F3.IP)
[01:46:09] <dbaupp> reedlepee: the fields are designed to be used externally, so they should be all public
[01:46:36] *** Quits: SingingBoyo (SingingBoy@DA28FB90.A5D0D593.4F048BDC.IP) (Ping timeout)
[01:46:44] <reedlepee> dbaupp: all the fields in ebml.rs should be public ??
[01:47:16] <dbaupp> reedlepee: no, only of the Doc struct
[01:47:47] <reedlepee> ohh ohk :)
[01:47:50] <dbaupp> reedlepee: (line 32) #[deriving(Clone)] pub struct Doc {    data: @~[u8],    start: uint,    end: uint,} doesn't need to be changed
[01:48:44] <reedlepee> ohk
[01:50:02] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[01:51:42] *** Joins: sankha93 (Instantbir@91E6EB46.329AE559.27560D6E.IP)
[01:51:47] *** Joins: SingingBoyo (SingingBoy@DA28FB90.A5D0D593.4F048BDC.IP)
[01:52:00] <SingingBoyo> how does one do something like haskell's flatMap with Option?
[01:52:08] *** Quits: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Ping timeout)
[01:52:32] *** Joins: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[01:52:52] <benh> that sounds like filterMap
[01:52:56] <benh> err. filter_map
[01:53:09] <SingingBoyo> used to be chain, but that doesn't exist anymore...
[01:53:09] <jld> strcat: CLONE_NEWUSER... as in it exists in a separate uid/gid namespace?
[01:53:10] *** Joins: crembo (crembo@moz-C2B364AA.vc.shawcable.net)
[01:53:26] <benh> oh, there's, like, map and and_then and for ... in ...
[01:53:39] <benh> one of them maybe?
[01:53:43] <strcat> jld: yep! and the big thing is that you can call CLONE_NEWUSER as non-root, and become "root"
[01:53:48] <strcat> jld: it's not finished though
[01:53:54] *** Quits: tjc (tjc@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: zzzzzzzzzz)
[01:54:07] <benh> and maybe? there's a lot of these
[01:54:18] * benh isn't very helpful and decides to go to sleep instead
[01:54:22] *** Joins: tjc (tjc@moz-BE33DA21.fw1.sfo1.mozilla.net)
[01:54:22] *** ChanServ sets mode: +o tjc
[01:54:34] *** Quits: geoffhill (geoffhill@moz-244CF33A.amazon.com) (Quit: geoffhill)
[01:55:02] *** Quits: SingingBoyo (SingingBoy@DA28FB90.A5D0D593.4F048BDC.IP) (Ping timeout)
[01:55:14] <strcat> jld: there was even a security vulnerability related to how the current unfinished implementation interacts with a shared filesystem
[01:55:19] <strcat> and it seems to be off-by-default now...
[01:55:37] *** Quits: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Quit: jeffdb)
[01:55:51] *** Quits: vmx (vmx@8155E38.294C4FB6.EBB03D7A.IP) (Ping timeout)
[01:57:19] *** Joins: SingingBoyo (SingingBoy@DA28FB90.A5D0D593.4F048BDC.IP)
[01:57:46] *** Joins: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[01:59:01] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[01:59:29] *** Quits: SingingBoyo (SingingBoy@DA28FB90.A5D0D593.4F048BDC.IP) (Quit: Leaving)
[01:59:30] *** Joins: SingingBoyo1 (SingingBoy@DA28FB90.A5D0D593.4F048BDC.IP)
[02:01:05] <SingingBoyo1> whoa the generated docs for option don't seem to have a list of methods anywhere for the impl<T> Option<T>.  That's not right :O
[02:01:36] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[02:01:42] *** Joins: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com)
[02:01:51] <earlzlap> rusti: "/".split_iter('/').len()
[02:01:52] -rusti- 2u
[02:02:00] <earlzlap> wait.. what? 
[02:02:08] <earlzlap> that doesn't seem right
[02:02:16] <benh> rusti: "/".split_iter('/').collect()
[02:02:18] -rusti- pastebinned 6 lines of output: http://ix.io/8AN
[02:02:29] <SingingBoyo1> rusti: let x:~[~str] = "/".split_iter('/').collect(); x
[02:02:31] -rusti- pastebinned 10 lines of output: http://ix.io/8AO
[02:03:03] <SingingBoyo1> let x:~[&str] = "/".split_iter('/').collect(); x
[02:03:20] <SingingBoyo1> rusti: let x:~[&str] = "/".split_iter('/').collect(); x
[02:03:21] -rusti- ~["", ""]
[02:03:27] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[02:03:29] <SingingBoyo1> earlzlap: ^
[02:03:41] <earlzlap> that is unlike any implementation of split I've seen heh
[02:03:42] <SingingBoyo1> earlzlap: splits it into the two empty strings on either side
[02:03:44] <dbaupp> SingingBoyo1: Eridius mentioned that an hour or so ago :)
[02:04:04] <dbaupp> earlzlap: which part is counter intuitive?
[02:04:15] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[02:04:15] <SingingBoyo1> dbaupp: whelp.  time for me to consider diving into rustdoc code hehe
[02:04:18] <mcpherrin> earlzlap: That's exactly what I'd expect? It's what python does, too
[02:04:35] * SingingBoyo1 isn't sure he could do much
[02:04:37] <earlzlap> rusti: "/foo/bar".split_iter('/').len()
[02:04:38] <dbaupp> SingingBoyo1: talk to acrichto, he may be working on it already
[02:04:38] -rusti- 3u
[02:04:55] <earlzlap> ah I guess I can see the rationale.. so it's just unlike C# I guess then heh
[02:05:02] <acrichto> SingingBoyo1: https://github.com/mozilla/rust/pull/9941 will fix the dox issue
[02:05:04] <dbaupp> >>> '/'.split('/')
[02:05:04] <dbaupp> ['', '']
[02:05:13] <sam113101> and unlike ruby
[02:05:32] <earlzlap> or wait. Is there an equivalent that removes empty strings? C# had an option for it in it's implementation of split
[02:05:39] <dbaupp> earlzlap: there's a few other versions of split too
[02:06:03] <SingingBoyo1> acrichto dbaupp: well then I can stay out of rustdoc! \o/ ?
[02:06:11] <dbaupp> rusti: "/foo/bar".split_iter('/').filter(|s| !s.is_empty()).to_owned_vec()
[02:06:11] -rusti- ~["foo", "bar"]
[02:06:32] <SingingBoyo1> earlzlap: if there isn't, there's always split and then filter
[02:06:53] <dbaupp> rusti: "/".split_terminator_iter('/').to_owned_vec()
[02:06:54] -rusti- ~[""]
[02:07:03] <dbaupp> rusti: "/foo/bar/".split_terminator_iter('/').to_owned_vec()
[02:07:04] -rusti- ~["", "foo", "bar"]
[02:07:42] <earlzlap> I'd just have to use something on the resulting iter to remove empty entries I suppose, because I also want for "/foo//bar" to result in ["foo", "bar"]
[02:08:17] *** SingingBoyo1 is now known as SingingBoyo
[02:08:24] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[02:08:25] <dbaupp> earlzlap: see my .filter one ^
[02:09:11] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[02:09:29] <earlzlap> yea. you're going to make me learn more functional stuff with this iterator business :) 
[02:11:40] <earlzlap> btw, how can I get a copy of rusti for my local shell? 
[02:11:57] <strcat> earlzlap: it's a thin wrapper around rustc
[02:12:07] <earlzlap> Source around anywhere? 
[02:12:35] <strcat> earlzlap: https://github.com/thestinger/rust-playpen/blob/master/bin/irc.sh + sandboxing + the irc part
[02:13:02] <strcat> all but the irc script is on github
[02:13:02] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[02:13:08] <mcpherrin> earlzlap: if you don't care about the sandboxing stuff http://csclub.uwaterloo.ca/~mimcpher/rusti
[02:14:01] <earlzlap> someone should replace the current rusti with that since actual rusti is so broken heh
[02:14:18] <strcat> earlzlap: there's no rusti in the rust source tree anymore
[02:14:26] <SiegeLord> I was thinking of something like rustc -c
[02:14:30] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: Textual IRC Client: www.textualapp.com)
[02:14:54] <SiegeLord> Well, not -c per se... but like python -c
[02:16:09] <earlzlap> was that removed yesterday ?
[02:16:53] <mcpherrin> yeah.
[02:20:03] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[02:20:07] <earlzlap> ah. so that's why it's still on my system. I hadn't updated today heh
[02:20:42] <mcpherrin> I'm not sure it actually gets removed either; it'll just stay there being broken.
[02:20:58] <mcpherrin> (just broken in a different way)
[02:21:11] <strcat> it will be removed if you install rust through a package manager or use rust via the build dir
[02:21:20] <jxs> hey there
[02:21:37] <jxs> is there a way to run rustc without the colors in the stdout?
[02:21:43] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[02:21:56] <benh> I was just thinking earlier we don't have enough colors :(
[02:21:59] <pcmattman> TERM=dumb rustc
[02:21:59] <strcat> jxs: TERM=dumb rustc
[02:22:09] <strcat> heh
[02:22:35] *** Quits: kimundi (kimundi@moz-729E00E8.dip0.t-ipconnect.de) (Ping timeout)
[02:22:38] <mcpherrin> I was going to suggest TERM= rustc but I feel like that has already been answered :P
[02:22:43] <jxs> nice thanks!
[02:23:14] * SingingBoyo thinks that's not actually running rustc without colors, but manipulating its environment instead
[02:23:26] <SingingBoyo> though I could (and probably am :/) wrong
[02:23:44] <ChrisMorgan> ercxx: pong (145 minutes later)
[02:23:58] <mcpherrin> SingingBoyo: rustc looks at its environment, and when it sees it doesn't support colours, doesn't emit them
[02:23:59] <strcat> SingingBoyo: it reads TERM in order to find the terminfo file for the terminal and identify if it has colors
[02:24:04] <jxs> SingingBoyo yup
[02:24:12] <jxs> and doesn't work in my case ehe
[02:24:32] <benh> is 'dumb' an actual magic value or is it just a value that happens to not be a known colorful terminal?
[02:24:46] <benh> "rustc 2>&1|cat"
[02:24:47] <strcat> benh: there's really an entry for 'dumb' in the terminfo db
[02:24:48] <jxs> i guess it's a not colorful terminal
[02:24:55] <strcat> benh: look at 'infocmp -L dumb'
[02:26:07] *** Joins: kimundi (kimundi@moz-D33AF750.dip0.t-ipconnect.de)
[02:26:31] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[02:26:38] <ercxx> ChrisMorgan: :)
[02:26:41] *** Quits: aegeaner (Aegeaner@83533B47.BD9EA362.4446104D.IP) (Ping timeout)
[02:27:40] <ercxx> I'm looking at issue #27. 
[02:27:56] <ercxx> It's a little hairy.
[02:27:59] *** Joins: aegeaner (Aegeaner@6D9BD02D.3B57393D.8395810B.IP)
[02:28:31] <ChrisMorgan> It is.
[02:29:46] <ercxx> I mean stuffing the bytes somewhere is trivial, but because of the amount of indirection I'm having hard time coming up with solving it.
[02:30:03] <ercxx> I didn't want to touch the codegen part
[02:30:20] *** kimundi is now known as zz_kimundi
[02:30:40] <jxs> would it make sense to add an option to rustc to output stdout without colors?
[02:31:28] <ercxx> so I figured I'll stuff them in RequestBuffer, but trying to deliver a mutable pointer through so many hoops to the iterator killed me.
[02:31:54] <ercxx> Are you planning on simplifying the codebase at some time. I believe I am way over my head in this.
[02:31:58] <ChrisMorgan> At present it's implemented using an iterator. I'm not certain whether that will be the best approach or not.
[02:32:09] <dbaupp> fmt! is (finally) gone!
[02:32:23] <ChrisMorgan> And fail! et al.?
[02:32:31] <dbaupp> are now format!-syntax
[02:33:00] *** Joins: aegeaner1 (Aegeaner@83533B47.BD9EA362.4446104D.IP)
[02:33:05] <ChrisMorgan> With fail2! gone also?
[02:33:18] <dbaupp> not yet
[02:33:23] <dbaupp> after the next snapshot
[02:33:32] <ChrisMorgan> Good, that's what I expected.
[02:33:42] <reedlepee> dbaupp: Now finally it gave "metrics saved to: tmp/check-stage1-T-i686-unknown-linux-gnu-H-i686-unknown-linux-gnu-extra-metrics.json test result: ok. 525 passed; 0 failed; 7 ignored; 65 measured"
[02:33:58] <ChrisMorgan> ercxx: there is some complexity inherent in the system but plenty of complexity in things like RequestBuffer which are there for historical reasons only
[02:34:04] <dbaupp> reedlepee: awesome! the tests all passed :)
[02:34:05] <reedlepee> So it does mean that all is correct??
[02:34:08] <dbaupp> yes
[02:34:14] *** Quits: aegeaner (Aegeaner@6D9BD02D.3B57393D.8395810B.IP) (Ping timeout)
[02:34:15] *** Parts: samx (sami@moz-D9DA5773.dyn.optonline.net) (Leaving)
[02:34:29] <dbaupp> (at least, everything is correct in the compiler code & the extra tests)
[02:34:30] <tiffany> is it possible to introduce dependant types to rust?
[02:34:32] <ercxx> ChrisMorgan: Yeah, trying to learn rust at the same time too :)
[02:34:45] <reedlepee> Now should i run 'make check' also
[02:34:46] <reedlepee> ??
[02:35:24] <ChrisMorgan> ercxx: ... some of the "historical reasons" are because I was also learning Rust when I started rust-http, it being the first non-trivial code I wrote
[02:36:11] <dbaupp> tiffany: with significant effort, probably
[02:36:39] <SingingBoyo> reedlepee: a full 'make check' is usually good to run before submitting a PR, if you have no other things to change.  Takes quite a long time though.
[02:36:45] <tiffany> it really seems like the only reasonable way to solve the checked int problem is with dependant types, which makes me sad rust doesn't have them
[02:37:06] *** Quits: crembo (crembo@moz-C2B364AA.vc.shawcable.net) (Client exited)
[02:37:13] *** Quits: sankha93 (Instantbir@91E6EB46.329AE559.27560D6E.IP) (Quit: Gone to save the world!)
[02:37:15] *** zz_kimundi is now known as kimundi
[02:37:25] <ercxx> ChrisMorgan: Is codegen necessary?
[02:37:42] <dbaupp> tiffany: they're a big (& complicated) step up from what we have now
[02:37:59] <earlzlap> rusti: ["foo", "bar"].iter().len().len()
[02:38:02] -rusti- pastebinned 7 lines of output: http://ix.io/8AQ
[02:38:20] <ChrisMorgan> ercxx: to avoid manually writing certain highly verbose but efficient code, yes.
[02:38:24] <earlzlap> rusti: let x=["foo", "bar"].iter(); x.len(); x.len()
[02:38:32] -rusti- pastebinned 20 lines of output: http://ix.io/8AR
[02:38:39] <reedlepee> SingingBoyo: I have to change libstd..
[02:38:40] <ercxx> I see
[02:38:56] <earlzlap> rusti: let x=~["foo", "bar"].iter(); x.len(); x.len()
[02:38:58] -rusti- pastebinned 20 lines of output: http://ix.io/8AS
[02:38:58] <reedlepee> So after changing that also i should run make check right ??
[02:39:02] <ChrisMorgan> Ideally I'd like to remove the codegen step, but it's not powerful enough yet.
[02:39:19] <ercxx> What do you mean?
[02:39:26] <earlzlap> rusti: let x=~[~"foo", ~"bar"].iter(); x.len(); x.len()
[02:39:30] -rusti- pastebinned 20 lines of output: http://ix.io/8AT
[02:39:59] <dbaupp> rusti: let v = ~["foo", "bar"]; let it = v.iter(); (v.len(), v.len())
[02:40:06] <dbaupp> earlzlap: you can private message rusti
[02:40:12] <earlzlap> yea, just remembered that
[02:40:14] -rusti- <anon>:9:38: 9:40 warning: unused variable: `it`, #[warn(unused_variable)] on by default
[02:40:14] -rusti- <anon>:9          let v = ~["foo", "bar"]; let it = v.iter(); (v.len(), v.len())
[02:40:14] -rusti-                                                ^~
[02:40:14] -rusti- (2u, 2u)
[02:40:26] <dbaupp> whoops
[02:40:38] <tjc> dbaupp: Maybe rusti should /msg somebody with "You can private message rusti!" if they make a few queries in a row :-)
[02:40:45] <dbaupp> rusti: let v = ~["foo", "bar"]; let mut it = v.iter(); (it.len(), it.len())
[02:40:46] -rusti- (2u, 0u)
[02:40:56] <tjc> I am telling you because I don't know how to submit an issue for it :-)
[02:41:00] <dbaupp> strcat: ^
[02:41:06] <dbaupp> tjc: ping strcat :P
[02:41:08] <earlzlap> So, how does that work. if an iter is just .next(), then how does len not take it to 0 on the second one? 
[02:41:26] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[02:41:28] <strcat> but that means I have to not be lazy and make it stateful
[02:41:34] <SingingBoyo> reedlepee: 'make check' is usually the last thing I do before submitting a PR, yes.
[02:41:38] <ChrisMorgan> ercxx: take the method reading example; doing it in macros would require the ability to concatenate chars together and stringify them at compile time; this can't be done at present.
[02:41:40] <earlzlap> It'd also be awesome if rusti would directly posted the message in PM, rather than trying to pastebin
[02:41:52] <dbaupp> earlzlap: my first working one was incorrect (v.len()), the second one was correct (it.len())
[02:42:01] <strcat> it does a pastebin so everyone can see it and so it doesn't get banned from the network
[02:42:15] <earlzlap> ah
[02:42:16] *** Joins: lfox (lfox@moz-F9C0E858.nycmny.east.verizon.net)
[02:42:31] <strcat> there are rate limits on most irc servers
[02:42:42] <dbaupp> which rusti used to hit here
[02:43:04] <tjc> strcat: heh, well, Rust should be well-suited enough for stateful programming :-)
[02:43:08] <earlzlap> So, if I need to get the total length of an iter, and then iterate over it, is there a good way to do that? especially if you have .filter() and other stuff
[02:43:08] <ChrisMorgan> ercxx: status is one where the code generation is less necessary, but the macro version of it would require writing both "I'm a teapot" and ImATeapot (not necessarily a bad thing for greppability, truth to tell)
[02:43:47] <ercxx> I see
[02:43:48] <dbaupp> earlzlap: if you need the total length and then iterate over it, you need to collect it into a vector
[02:45:17] <earlzlap> ah. Well, to do that, what does thsi error mean? "failed to find an implementation of trait std::iter::FromIterator<&str> for [type error]"
[02:46:26] <earlzlap> &"/foo/bar".split_iter('/').filter(|x| x!="").collect().len() 
[02:46:32] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[02:46:35] <SingingBoyo> earlzlap: something like 'let x = myIter.collect() won't work', but let x:~[int] = myIter.collect()' will. basically just make sure you specify the type to collect to.
[02:47:07] <earlzlap> Is that a limitation of Rust's type inference or something? 
[02:47:10] <earlzlap> seems odd heh
[02:47:22] <dbaupp> rusti: "/foo/bar".split_iter('/').filter(|x| !x.is_empty()).to_owned_vec().len()
[02:47:23] -rusti- 2u
[02:47:42] <dbaupp> earlzlap: no, it's a limit of any type inference in this situation (unless one had defaulting rules)
[02:48:38] <earlzlap> Didn't realize there was a to_owned_vec or str.is_empty method heh. 
[02:48:58] <dbaupp> earlzlap: since there is no way for rust to work out which type you are collecting into (since the only information you have is "it has .len()", but many types have that)
[02:49:04] *** Quits: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:49:13] <dbaupp> to_owned_vec is a workaround for that issue
[02:49:44] <dbaupp> rusti: "/foo/bar".split_iter('/').filter(|x| !x.is_empty()).collect::<~[&str]>().len()
[02:49:44] -rusti- 2u
[02:51:58] <SingingBoyo> earlzlap dbaupp: maybe it could be called a limitation to rust, as haskell might (might!) get it.
[02:51:58] *** Quits: _Vi (vi@DCE8FCEE.CAA062BC.FDCAC96B.IP) (Connection reset by peer)
[02:52:10] <SingingBoyo> though haskell's typing is a whole 'nother beast
[02:52:26] *** Joins: nwmcsween_ (nwmcsween@E0025B86.51EE1362.3655BBF5.IP)
[02:52:57] <earlzlap> ugh. Only annoying thing is that then each element becomes an &&str instead of just an &str... if `inp` is an &&str, how do you compare it to an ~str? Is there a better way to .to_owned() ? 
[02:52:59] *** Quits: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP) (Ping timeout)
[02:53:05] <dbaupp> SingingBoyo: how?
[02:53:18] <dbaupp> earlzlap: yes
[02:53:44] <dbaupp> rusti: let s: &str = "foo"; let ss: &&str = &s; *s == ~"foo"
[02:53:46] <earlzlap> *
[02:53:51] <earlzlap> yea, ok
[02:53:51] -rusti- pastebinned 6 lines of output: http://ix.io/8AV
[02:54:09] <SingingBoyo> dbaupp: well, I guess if you're using a REPL it wouldn't get it, but in some contexts I've thought rust could possibly figure things out that it doesn't.
[02:54:11] <dbaupp> rusti: let s: &str = "foo"; let ss: & &str = &s; *s == ~"foo"
[02:54:12] <earlzlap> I always think I can't * & pointers for some reason. get them confused with ~ pointers
[02:54:13] -rusti- pastebinned 7 lines of output: http://ix.io/8AW
[02:54:27] <dbaupp> rusti: let s: &str = "foo"; let ss: & &str = &s; *ss == ~"foo"
[02:54:31] -rusti- pastebinned 10 lines of output: http://ix.io/8AX
[02:54:36] * dbaupp gives up
[02:54:44] <dbaupp> oh, that one worked
[02:54:48] <dbaupp> silly -v
[02:55:22] <dbaupp> SingingBoyo: there are some instances where the inference could be improved (closures for example), but I don't think .collect().len() will ever be one
[02:55:31] <pcmattman>  rusti: ~0xFE
[02:55:42] <dbaupp> rusti: !0xFE
[02:55:43] -rusti- -255
[02:55:55] <pcmattman> hm.
[02:55:56] <dbaupp> rusti: !0xFEu8
[02:55:57] -rusti- 1u8
[02:56:42] <pcmattman> that... will take getting used to :)
[02:57:07] <SingingBoyo> dbaupp: yeah I was thinking more along the lines of collect() in general, not so much collect().len()
[02:57:47] *** bent|away is now known as bent
[02:57:49] *** Quits: bent (chatzilla@C36F5748.8CE62E0F.A36C57B9.IP) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[02:57:54] <ChrisMorgan> ercxx: do you have anything specific I might be able to help with?
[02:57:58] <dbaupp> SingingBoyo: yeah, I agree. (https://github.com/mozilla/rust/issues/9508 would help, as would HKT, although they might be overly restrictive for this)
[02:58:13] <doomlord_> is the rust module system the same as ML's
[02:59:01] *** Joins: DanC (connolly@moz-CAC8C247.dyn.everestkc.net)
[02:59:02] <tjc> doomlord_: Not at all
[02:59:19] *** Joins: crembo (crembo@moz-C2B364AA.vc.shawcable.net)
[02:59:20] <tjc> doomlord_: in Rust, modules are very simple namespace mechanisms. ML has a much more sophisticated module system
[03:00:03] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[03:00:10] *** Quits: SingingBoyo (SingingBoy@DA28FB90.A5D0D593.4F048BDC.IP) (Ping timeout)
[03:00:31] *** Joins: SingingBoyo (SingingBoy@DA28FB90.A5D0D593.4F048BDC.IP)
[03:00:59] *** Joins: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP)
[03:02:22] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[03:02:23] <ercxx> ChrisMorgan: I can't think of anything at the moment. I'll bug you when I need some info though :)
[03:02:36] *** Quits: aegeaner1 (Aegeaner@83533B47.BD9EA362.4446104D.IP) (Ping timeout)
[03:02:37] *** Joins: aegeaner (Aegeaner@6D9BD02D.3B57393D.8395810B.IP)
[03:02:43] *** Quits: z0w0 (zack@moz-C877F2F7.lnse2.cha.bigpond.net.au) (Quit: z0w0)
[03:03:08] *** Joins: aegeaner1 (Aegeaner@83533B47.BD9EA362.4446104D.IP)
[03:04:22] *** Quits: aegeaner (Aegeaner@6D9BD02D.3B57393D.8395810B.IP) (Ping timeout)
[03:04:33] *** Joins: z0w0 (zack@moz-C877F2F7.lnse2.cha.bigpond.net.au)
[03:04:46] *** Quits: lfox (lfox@moz-F9C0E858.nycmny.east.verizon.net) (Quit: ZZZzzz…)
[03:05:59] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Client exited)
[03:06:19] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[03:06:55] *** Joins: Yeri (jasonjasmi@41C91A8A.CE609BA5.E39FBF79.IP)
[03:08:02] <doomlord_> i might be doing it wrong still but i miss the ability in C++ to create some common context and include it in many places (the equivalent of including includes)
[03:08:06] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[03:08:24] *** Joins: _Vi (vi@DCE8FCEE.CAA062BC.FDCAC96B.IP)
[03:08:36] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[03:10:20] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Quit: Leaving.)
[03:10:24] <heftig> doomlord_: uh, you can just make a file full of includes?
[03:10:44] <dbaupp> rusti: include!("/etc/passwd")
[03:10:46] <doomlord_> i mean in rust i miss the ability you have in C++ to do that sort of thng
[03:10:54] -rusti- pastebinned 7 lines of output: http://ix.io/8AY
[03:11:01] <doomlord_> ah ..
[03:11:12] <doomlord_> include! i didnt' know of this
[03:11:21] <doomlord_> thats textual include ?
[03:11:29] <heftig> rusti: include!("/dev/urandom")
[03:11:34] -rusti- Killed
[03:11:34] -rusti- application terminated with error code 137
[03:11:45] <dbaupp> heftig: including an infinite file? :P
[03:11:50] <heftig> why not
[03:11:58] <dbaupp> rusti: include!("/dev/null")
[03:11:59] -rusti- pastebinned 6 lines of output: http://ix.io/8yZ
[03:12:03] <heftig> rusti: include!("/dev/full")
[03:12:04] -rusti- pastebinned 6 lines of output: http://ix.io/8AZ
[03:12:19] <SiegeLord> Why not 'use pub use foo::*;'?
[03:12:27] <dbaupp> doomlord_: I believe it just places the file directly into the ast at that point
[03:12:33] <SiegeLord> *use 'pub use
[03:12:39] <dbaupp> doomlord_: as in, parses it into the ast
[03:12:40] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[03:14:46] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Quit: Leaving.)
[03:17:06] <doomlord_> pub use .. in the crate root - i dont think that is seen in other modules
[03:18:03] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:18:38] *** Quits: SingingBoyo (SingingBoy@DA28FB90.A5D0D593.4F048BDC.IP) (Ping timeout)
[03:18:38] <SiegeLord> pub mod context { pub use whatever_you_want }; use context::*; //wherever you want
[03:18:46] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[03:19:26] <doomlord_> yes thats how i'm using it
[03:19:52] <SiegeLord> I'm not sure how that's different than in C++...
[03:19:53] *** Joins: SingingBoyo (SingingBoy@DA28FB90.A5D0D593.4F048BDC.IP)
[03:20:30] <doomlord_> if you have  a load of common 'use context::*'s  that you need to put in most of your modules, in C++ you can include them all in an master include .. and just include that one 
[03:21:11] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[03:21:11] <dbaupp> put a pile of pub use's in a prelude module, and `use prelude::*;`
[03:21:22] <SiegeLord> context is the master include
[03:21:24] <dbaupp> that's how the stdlib prelude works
[03:21:29] <jack> can someone please tell me why if i have `#[feature(globs)];` things work, but if i add `, macro_rules` or a second `#[feature(macro_rules)];` i get an error that it can't find the std crate?
[03:21:40] <jack> this keeps happening to me and it's driving me insane.
[03:21:44] *** Quits: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com) (Quit: Leaving.)
[03:22:19] <doomlord_> ok i have not tried this.
[03:22:30] <SiegeLord> Of course it won't work, due to bugs
[03:22:36] <dbaupp> jack: I assume without having macro_rules in one of the features it errors out?
[03:22:36] <SiegeLord> But the principle is sound
[03:22:53] <jack> dbaupp: the crate uses macros, so yes :)
[03:23:11] <jack> they both work individually. just not together.
[03:23:24] <dbaupp> that seems *really* strange
[03:23:32] <SiegeLord> Where are you placing these attributes?
[03:23:50] <jack> dbaupp: that's what i'm saying! :)
[03:24:22] <jack> https://github.com/mozilla-servo/rust-glut is an example. try to compile that and just add the feature lines to glut.rc
[03:24:44] <dbaupp> a minimal crate with `#[feature(..)] fn main() {}` seems to work
[03:25:14] <jack> dbaupp: did you add macros and globs?
[03:25:17] *** Joins: ross (ross@moz-5EA04060.br.br.cox.net)
[03:25:19] <jack> maybe it only fails if they are used?
[03:25:21] <dbaupp> (It might be a problem unrelated to #[feature], since #{feature] checking happens several stages before crates are searched for)
[03:25:23] * dbaupp tries
[03:25:29] <SiegeLord> In my library I use globs and macros and it works
[03:25:34] <SiegeLord> And struct variants
[03:25:40] *** Quits: SingingBoyo (SingingBoy@DA28FB90.A5D0D593.4F048BDC.IP) (Ping timeout)
[03:26:01] <SiegeLord> https://github.com/SiegeLord/RustAllegro/blob/master/src/lib.rs
[03:26:14] <dbaupp> jack: no, that seems to work
[03:26:17] <ercxx> rust-http, rust-sqlite and rust-mustache is available on AUR for Arch Linux users.
[03:26:22] *** Quits: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP) (Ping timeout)
[03:26:40] <dbaupp> ercxx: mailing list time! ;)
[03:26:57] <ercxx> what do you mean?
[03:27:10] <dbaupp> send an announcement email? :)
[03:27:16] <ercxx> I'm not there :)
[03:27:23] <dbaupp> oh
[03:27:26] <ercxx> let me find it
[03:27:32] *** Joins: MrByte (Dartakio@moz-147070D0.chy-wy.client.bresnan.net)
[03:27:46] <ChrisMorgan> So, Servo wants to use NSS, while the patch I have received uses sfackler's rust-ssl which uses OpenSSL. What needs to be done?
[03:28:02] <dbaupp> ercxx: https://mail.mozilla.org/listinfo/rust-dev
[03:28:13] *** Quits: canhtak (jeremy@moz-44A7DE0.wl.t.ulaval.ca) (Quit: canhtak)
[03:28:14] <jack> ChrisMorgan: NSS is FIPS certified. OpenSSl is not. So we can't really ship a browser with OpenSSL.
[03:28:24] <sam113101> "This year, the Rust and Servo projects are participating in the GNOME Outreach Program for Women (OPW)."
[03:28:35] <ercxx> dbaupp: Wouldn't this be more useful for rust-users? I know there isn't one :)
[03:29:21] <tjc> ercxx: right now there isn't an unmanageable amount of mailing list traffic, so it's ok for everything related to Rust to go to rust-dev
[03:29:26] <jack> ChrisMorgan: probably other people aren't as interested in all the stuff a browser needs like certificate checking/pinning etc.
[03:29:34] * ChrisMorgan isn't familiar with the story around OpenSSL vs. NSS
[03:29:50] <ChrisMorgan> rust-http should certainly do certificate checking for SSL connections.
[03:30:11] <strcat> chrome and ffx both use nss
[03:30:14] <jack> There's no real story except htat OpenSSL didn't exist back then, and NSS did. Mozilla paid to have NSS FIPS certified so that's what all the browsers use.
[03:30:15] <ChrisMorgan> sfackler: as rust-ssl author, what's your take on the situation?
[03:30:21] <strcat> fedora/rhel use NSS almost entirely, red hat patched everything to use it
[03:30:41] <ChrisMorgan> Why has OpenSSL become popular?
[03:31:00] <dbaupp> ChrisMorgan: how much of the implementation is OpenSSL specific? (could you take the OpenSSL patch (with cfg's to not require it) with a goal to swap the actual crypto subsystem for NSS when it's got a rust inferface)
[03:31:35] <jack> Better documentation? Better API? Who knows. FIPS certification is hte overriding criteria here I think.
[03:31:48] <jack> Which most people don't care about I'll admit.
[03:31:50] <ChrisMorgan> A cursory glance at rust-ssl suggested it's mostly OpenSSL bindings rather than an abstracting library.
[03:31:57] <jack> If we can make it a trait that we can implement, that works.
[03:32:34] <dbaupp> ChrisMorgan: I meant the code in rust-http itself?
[03:32:37] <jack> I just wanted to point out that we can't use OpenSSL and we certainly don't want to fork anything. We also haven't looked at bindings for NSS yet, so it's not like I have a ready made thing for you to plug in either
[03:32:52] *** Quits: MrByte (Dartakio@moz-147070D0.chy-wy.client.bresnan.net) (Quit: )
[03:33:02] *** Joins: MrByte (Dartakio@moz-147070D0.chy-wy.client.bresnan.net)
[03:33:05] *** MrByte is now known as Dartakio
[03:33:06] <ChrisMorgan> dbaupp: it's using rust-ssl, so rust-ssl being a transparent library affects that somewhat.
[03:33:29] <ChrisMorgan> The patch is pleasantly light.
[03:34:46] <dbaupp> https://github.com/chris-morgan/rust-http/pull/31/files#diff-a9387c342d97bd768ba84fffc80cb524R218 and the `extern mod` appear to be the only things specific to OpenSSL
[03:34:49] *** Parts: Dartakio (Dartakio@moz-147070D0.chy-wy.client.bresnan.net) ()
[03:35:23] * dbaupp thinks the code could do with using some temporaries though...
[03:35:50] *** Joins: mib_asxbd1 (Mibbit@moz-FE305E75.mia.fl.atlanticbb.net)
[03:36:07] *** Quits: mib_asxbd1 (Mibbit@moz-FE305E75.mia.fl.atlanticbb.net) (Quit: http://www.mibbit.com ajax IRC Client)
[03:36:15] *** Joins: MrByte (Dartakio@moz-147070D0.chy-wy.client.bresnan.net)
[03:36:55] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Ping timeout)
[03:37:23] <doomlord_> ok great that works. 
[03:38:40] *** Quits: nwmcsween_ (nwmcsween@E0025B86.51EE1362.3655BBF5.IP) (Connection reset by peer)
[03:38:54] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[03:39:26] *** Quits: blank_name (blank_name@2E4E7E43.800E1818.31EC03F3.IP) (Ping timeout)
[03:39:27] *** Joins: SingingBoyo (SingingBoy@DA28FB90.A5D0D593.4F048BDC.IP)
[03:39:49] *** Joins: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP)
[03:41:17] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Ping timeout)
[03:42:48] *** Joins: blank_name (blank_name@2E4E7E43.800E1818.31EC03F3.IP)
[03:44:45] *** Quits: SingingBoyo (SingingBoy@DA28FB90.A5D0D593.4F048BDC.IP) (Ping timeout)
[03:44:59] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[03:46:02] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Client exited)
[03:49:06] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Quit: Leaving.)
[03:49:07] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[03:49:08] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[03:49:22] <ChrisMorgan> jack: it looks to me like what we need is NSS bindings like rust-ssl and then using NSS in rust-http should be easy.
[03:50:04] <jack> ChrisMorgan: ok cool. i'll look into that.
[03:50:11] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Quit: Leaving.)
[03:50:13] *** Quits: blank_name (blank_name@2E4E7E43.800E1818.31EC03F3.IP) (Quit: leaving)
[03:53:05] *** Joins: dherman (dherman@moz-A7B57B40.bltmmd.fios.verizon.net)
[03:53:05] *** ChanServ sets mode: +ao dherman dherman
[03:53:07] *** Joins: blank_name (blank_name@2E4E7E43.800E1818.31EC03F3.IP)
[03:54:17] *** Joins: Jesin (Jessin_@moz-14627F8E.cc.lehigh.edu)
[03:54:53] *** Quits: dherman (dherman@moz-A7B57B40.bltmmd.fios.verizon.net) (Ping timeout)
[03:54:59] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[03:55:03] *** Quits: crembo (crembo@moz-C2B364AA.vc.shawcable.net) (Client exited)
[03:56:05] <sfackler> ChrisMorgan: I looked at NSS, but it appeared that it needed per-OS-thread initialization and I wasn't sure how to do that
[03:56:40] <sfackler> but I'd be toally willing to switch if that's what people want to use. There isn't a ton of code yet anyway
[03:56:55] <ChrisMorgan> Perhaps more importantly, if a task got switched from one thread to another, would the SSL break?
[03:57:37] <sfackler> on the openssl side, the only thread local stuff is error tracking
[03:58:13] <strcat> sfackler: yeah, I noticed that about NSS when I looked at it
[03:58:14] <sfackler> and that's not hard to work around
[03:58:15] <ChrisMorgan> It seems to me likely to be a good idea to get an NSS engineer to at least comment on the matter
[03:59:15] <sfackler> some of NSS's documentation is also hilariously old
[03:59:16] <sfackler> yeah
[04:00:07] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[04:00:22] <sfackler> "How is NSS compatible with other Netscape products?"
[04:00:24] <ChrisMorgan> pcwalton had https://github.com/pcwalton/rust-nss a year ago
[04:00:45] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[04:01:49] <sfackler> haha, the export restrictions part of the FAQ was last updated in 2000
[04:02:34] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[04:02:49] <Amaranth> Is there a reason NSS still exists other than everyone is afraid to write new crypto code?
[04:03:02] <Amaranth> I never got the impression it was well liked or easy to use
[04:05:05] <strcat> s/write/use/
[04:05:27] <Amaranth> That too :P
[04:05:43] *** Quits: tjc (tjc@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: zzzzzzzzzz)
[04:06:11] <strcat> Amaranth: fwiw, bind10 was rewritten in C++11/Python and uses http://botan.randombit.net/
[04:06:12] * strcat shrugs
[04:06:13] <sfackler> apparently everyone is also afraid to write documentation for crypto code c.c
[04:06:28] <acrichto> security through obscurity!
[04:07:07] <Amaranth> strcat: If bind is using it and it survives a year that's good enough for me
[04:09:29] <sfackler> ChrisMorgan: i'd also advise against using rust-ssl quite yet. it's still missing some important features (like error handling and certificate validation!)
[04:09:44] <strcat> if TLS was supposed to be secure, it would use a strong stream cipher like salsa20 ;p
[04:09:59] <Amaranth> strcat: Isn't that in TLS 1.2?
[04:10:04] <strcat> dunno, is it?
[04:11:00] <strcat> Amaranth: doesn't look like it
[04:11:18] <strcat> it has RC4 (totally broken!) as the only stream cipher
[04:11:27] <Amaranth> I guess I was thinking of chacha20 and I'm not sure what this actually means: https://www.imperialviolet.org/2013/10/07/chacha20.html
[04:11:29] <strcat> and AES in CBC mode
[04:12:11] <mcpherrin> There's an IETF draft for Salsa20 in TLS but it's not in
[04:12:56] <mcpherrin> 1.2 has AES-GCM which is good
[04:13:59] <strcat> mcpherrin: it's listed as a footnote but is it actually standard?
[04:14:44] <strcat> I only see RC4/AES-CBC and some weird 3DES thing in http://tools.ietf.org/html/rfc5246
[04:16:19] <mcpherrin> 6.2.3.3 definitely mentiones GCM mode
[04:17:37] * strcat shrugs
[04:18:27] <ChrisMorgan> sfackler: but if we used rust-ssl, bors could be written in Rust...
[04:18:55] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[04:19:23] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[04:21:50] <mcpherrin> strcat: Ah, tehy're in http://tools.ietf.org/html/rfc5288
[04:22:02] <SiegeLord> Hmm... I'm still getting linkage errors...
[04:22:04] <strcat> mcpherrin: ah
[04:22:07] <SiegeLord> Maybe privacy related
[04:22:12] <mcpherrin> strcat: The eternal problem of RFCs not being interlinked enough
[04:22:30] * mcpherrin deals with ietf standards all day long
[04:22:38] <strcat> would be fun to give servo dnssec
[04:22:43] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[04:23:04] <strcat> http://www.reddit.com/r/programming/comments/1opo3y/pointers_in_rust_a_guide/ccue03t?context=3 yay, trolls
[04:23:11] <strcat> at least I am assuming they are a troll ;p
[04:23:34] <strcat> great
[04:23:35] <strcat> I gave the wrong link
[04:25:44] <ChrisMorgan> Ah yes, I would rather like measured units in Rust.
[04:28:28] <sfackler> strcat: I wouldn't underestimate how dimb people can be :P
[04:28:35] <sfackler> *dumb
[04:28:39] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[04:31:45] *** Quits: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Ping timeout)
[04:31:57] *** Joins: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[04:33:00] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[04:37:58] *** Joins: tjc (tjc@moz-2C803B2F.tmodns.net)
[04:37:59] *** ChanServ sets mode: +o tjc
[04:38:09] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[04:39:34] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[04:40:14] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[04:43:56] *** Quits: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Quit: jeffdb)
[04:44:15] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[04:48:25] *** Joins: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[04:51:51] *** Quits: Yeri (jasonjasmi@41C91A8A.CE609BA5.E39FBF79.IP) (Quit: Yeri)
[04:57:12] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[04:58:27] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[05:01:15] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[05:03:19] <reedlepee> tjc: should i add priv infront of   UnsafeArc in " pub struct KillHandle(UnsafeArc<KillHandleInner>);"
[05:03:31] <reedlepee> or should i leave as it is 
[05:03:34] <tjc> reedlepee: I'll take a look at that code, I don't know offhand
[05:03:35] <tjc> one sec!
[05:05:46] <tjc> reedlepee: Ah, so that's a tuple struct
[05:05:57] <reedlepee> yeah 
[05:06:03] <tjc> I'm not even sure if it's legal to put a `pub` or `priv` on the one field
[05:06:09] <tjc> It might be either always public or always private
[05:06:16] <sfackler> you can't put a priv there
[05:06:16] <tjc> I was just looking for docs on that, but couldn't find any
[05:06:23] <sfackler> it should be turned into a normal struct with a private field
[05:06:24] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[05:06:27] <tjc> Yeah, that's what I thought
[05:06:52] <reedlepee> So should i leave it as it is ?
[05:07:06] <tjc> I think what sfackler suggested is a good idea
[05:07:29] <tjc> We might be removing tuple structs altogether, but I think this is a case where we want to make sure the inner field is private anyway
[05:07:41] <tjc> since it's a runtime system thing and we don't want random code looking at the implementation of it :-)
[05:07:44] <sfackler> reedlepee: I'd change it to "pub struct KillHandle { priv arc: UnsafeArc<KillHandleInner> }"
[05:07:52] *** Quits: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Quit: jeffdb)
[05:07:57] <reedlepee> actually previously also i came across tuple struct and i asked brson he said leave as it is 
[05:07:57] <strcat> ugh, that evil KillHandle thing
[05:08:07] <tjc> haha
[05:08:08] * strcat still has to figure out why it causes a double-free...
[05:08:17] <tjc> reedlepee: ok, brson is the authority here so I would defer to him
[05:08:22] <reedlepee> because tuple structs do not allow private fields !!
[05:08:42] <reedlepee> but he said for that tuple struct
[05:09:10] <tjc> I'm not sure what he meant, but he may have said that because we're considering removing tuple structs from the language
[05:09:14] <strcat> git grep shouldnt_be_public
[05:09:16] <tjc> so in that case, that work will get done later on anyway in one go
[05:09:18] * strcat laughed
[05:09:36] <reedlepee> ohk so i am leaving it as it is :)
[05:09:44] <strcat> I should start putting FIXME in my type names
[05:10:15] <tjc> yeah, that's the safest bet for now :-)
[05:10:18] <doomlord_> removing tuple structs ? 
[05:10:21] <tjc> strcat: that is terrible, you are terrible
[05:10:22] <tjc> ;-)
[05:10:37] <dbaupp> tjc: don't blame strcat... that was acrichto :P
[05:10:56] <tjc> doomlord_: Unless it was some sort of fever dream, the subject came up on IRC sometime in the past few days
[05:11:36] <doomlord_> in enums, is Some(T)   different to a single-element tuple struct.. is it a newtype
[05:12:20] <strcat> rusti: struct FIXME { yak: Option<FIXME> } std::mem::size_of::<FIXME>()
[05:12:21] -rusti- Segmentation fault
[05:12:21] -rusti- application terminated with error code 139
[05:12:24] <tjc> doomlord_: yes, it's different -- a tuple struct (like any struct) has a product type, so you don't necessarily need to store the discriminant as part of the runtime representation of the type
[05:12:24] <tjc> haha
[05:12:42] <tjc> doomlord_: but with Some(T), it has to store the discriminant because Option isn't a product type
[05:12:50] <tjc> that said, I think we optimize the representation of Option now
[05:12:58] <tjc> but it's true in general *waves ahnds*
[05:13:10] <strcat> Option<NonNullablePtr> is 1 word now, magic
[05:13:29] <tjc> Yeah
[05:13:39] <acrichto> dbaupp: what else would you name something that shouldn't be public? :P
[05:13:41] <strcat> one day I'll figure out where to insert the size error check for my #[non_nullable_ptr] attribute
[05:13:43] <tjc> The magic doesn't work for every enum type, though, just some simple cases like that one
[05:13:46] *** Quits: Kxepal (Miranda@moz-6C231589.pppoe.mtu-net.ru) (Ping timeout)
[05:13:57] <strcat> tjc: I think just that case :)
[05:14:08] <dbaupp> acrichto: 'keep_this_public', reverse psychology and all that :P
[05:14:09] <doomlord_> enum Option<T> {  None,  Some(T) }   <<<< you'll still be able to do this but.. maybe not..
[05:14:10] <tjc> strcat: there are other cases where you can do fun tricks, but that's the easiest one
[05:14:17] <strcat> tjc: yeah, I mean what's implemented
[05:14:19] *** Quits: jj2baile (jon@moz-345B5EBA.csclub.uwaterloo.ca) (Ping timeout)
[05:14:21] <tjc> yeah
[05:14:42] <strcat> it could steal bits from bool/char but who uses booleans anyway
[05:14:43] <doomlord_> enum Shape { Square(f32), Rect(f32,f32) } <<<< not this?
[05:14:49] *** Quits: mcpherrin (mimcpher@moz-345B5EBA.csclub.uwaterloo.ca) (Ping timeout)
[05:14:49] *** Quits: Luqman (laden@moz-AB7945E9.csclub.uwaterloo.ca) (Ping timeout)
[05:15:04] <dbaupp> doomlord_: I think those will be unlikely to become illegal
[05:15:12] <strcat> hm?
[05:15:30] <strcat> doomlord_: I don't think it can do anything magic there
[05:16:00] <doomlord_> the rust compiler source itself uses this alot doesn't it
[05:16:06] <strcat> will be 3 words, I guess
[05:16:26] <strcat> er
[05:16:38] <doomlord_> tuples in enums
[05:16:52] <doomlord_> tuple-struct variants in enums
[05:17:00] <strcat> yeah it uses the enum version of tuple structs everywhere, just not actual tuple structs
[05:17:15] *** Joins: Kxepal (Miranda@moz-31F7E1D4.pppoe.mtu-net.ru)
[05:17:15] <strcat> trans views them as the same thing, typeck doesn't
[05:17:16] <dbaupp> "tuple variants"?
[05:17:47] <doomlord_> have i got the terminology right... enum ... { ..variants...}
[05:17:52] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[05:18:20] <sfackler> can anyone think of a case where "priv use foo" is different than "use foo"?
[05:18:58] <strcat> sfackler: don't think it ever is
[05:19:23] <tjc> sfackler: I didn't even know we allowed `priv use foo`
[05:19:37] <sfackler> neither did I until a couple of minutes ago :P
[05:20:01] *** Joins: jj2baile (jon@moz-345B5EBA.csclub.uwaterloo.ca)
[05:20:09] <tjc> heh
[05:20:31] *** Joins: mcpherrin (mimcpher@moz-345B5EBA.csclub.uwaterloo.ca)
[05:20:34] *** Joins: Luqman (laden@moz-AB7945E9.csclub.uwaterloo.ca)
[05:21:24] <sfackler> time to dig around in the lexer D:
[05:21:46] <dbaupp> sfackler: the lexer? or the parser?
[05:22:08] <sfackler> I guess it'd probably be the parser actually
[05:22:21] <sfackler> or the privacy check, but that seems silly
[05:23:34] <dbaupp> rusti: priv fn foo() {}
[05:23:36] -rusti- pastebinned 10 lines of output: http://ix.io/8B8
[05:23:37] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Connection reset by peer)
[05:23:54] <dbaupp> sfackler: just grep for wherever that error message is emitted
[05:23:57] <sfackler> haha, it looks like whoever write check_sane_privacy thought it should happen in the parser as well
[05:24:04] <sfackler> yeah, it's in middle/privacy.rs
[05:24:14] <sfackler> there's a nice comment saying
[05:24:22] <sfackler>  In theory these qualifiers wouldn't parse, but that may happen later on down the road...
[05:25:16] <dbaupp> it's acrichto talking to you through a time machine :D
[05:25:50] <tjc> that would explain why acrichto is his own grandpa
[05:25:55] *** Quits: BitPuffin (isak@moz-98F8BF74.cust.tele2.se) (Ping timeout)
[05:31:15] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[05:33:04] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Connection reset by peer)
[05:33:50] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[05:34:30] *** Quits: tjc (tjc@moz-2C803B2F.tmodns.net) (Ping timeout)
[05:36:21] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[05:38:21] *** Joins: tjc (tjc@moz-DFAAACEB.tmodns.net)
[05:38:22] *** ChanServ sets mode: +o tjc
[05:39:41] <strcat> dbaupp: I think you missed .invert() in your comment
[05:43:08] <dbaupp> strcat: whoops, I had it originally, must've lost it somewhere
[05:44:26] *** Quits: tjc (tjc@moz-DFAAACEB.tmodns.net) (Ping timeout)
[05:44:31] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[05:44:32] <jld> rusti: std::mem::size_of::<[u8, ..std::i32::max_value]>()
[05:44:33] -rusti- 2147483647u
[05:44:38] <jld> rusti: std::mem::size_of::<[u8, ..std::i16::max_value]>()
[05:44:39] -rusti- 4294934527u
[05:44:49] <dbaupp> wat
[05:45:12] <dbaupp> jld: you're finding all sorts of screwy bugs with fixed-length vectors :S
[05:45:24] <Jesse> rusti: std::i16::max_value
[05:45:25] -rusti- 32767i16
[05:45:38] <strcat> jld: does it just not check for overflow?
[05:45:46] <strcat> hrm
[05:45:46] <strcat> wat
[05:45:46] <dbaupp> strcat: overflow??
[05:45:59] <strcat> nvm ;p
[05:46:12] <strcat> I don't understand how that could possibly happen
[05:46:14] <jld> What I don't get is what happened to the upper 32 bits.
[05:46:22] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[05:46:26] <dbaupp> incorrect sign extension or something?
[05:46:38] <jld> rusti: std::mem::size_of::<[u8, ..5000000000]>()
[05:46:39] -rusti- 705032704u
[05:46:41] <dbaupp> rusti: std::i16::max_value as i32 as u32
[05:46:42] -rusti- 32767u32
[05:46:45] <jld> O_o
[05:46:54] <strcat> could be my fault from when I messed with const exprs for changing the slice representation but I somewhat doubt it
[05:47:04] <dbaupp> wait, what. that's a positive number
[05:47:12] * dbaupp is 100% confused
[05:47:15] <adridu59> r? dbaupp https://github.com/mozilla/rust/pull/9868last build failed because of... missing separator, it wants tabs for multiline rules
[05:47:15] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Client exited)
[05:47:36] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[05:48:30] <dbaupp> rusti: format!("{:t}", 4294934527u)
[05:48:31] -rusti- ~"11111111111111110111111111111111"
[05:48:49] <adridu59> https://github.com/mozilla/rust/pull/9868 sry
[05:49:02] *** Quits: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP) (Ping timeout)
[05:49:11] <dbaupp> adridu59: in the makefile, you mean?
[05:49:12] <acrichto> sfackler: I'm attempting to put everything privacy-related in middle::privacy, so I wouldn't put modifications in the parser righ tnow
[05:49:15] <jld> rusti: enum E { V = std::i16::max_value } format!("{:x}", V as uint)
[05:49:16] -rusti- ~"ffffffffffff7fff"
[05:49:19] <adridu59> dbaupp yea
[05:49:25] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[05:49:28] <acrichto> sfackler: there's one thing in the parser which checks privacy, but that's b/c it's not propagated through to middle::privacy
[05:49:47] <adridu59> dbaupp but I have fixed it now
[05:49:47] <acrichto> jld: what
[05:49:49] <sfackler> cool
[05:49:50] <sfackler> oh god
[05:49:57] <jld> rusti: format!("{:x}", std::mem::size_of::<[u8, ..std::i16::max_value]>() as uint)
[05:49:57] -rusti- ~"ffff7fff"
[05:50:04] <Jesse> rusti: 32767_u32
[05:50:04] -rusti- 32767u32
[05:50:05] <sfackler> "pub extern mod foo;" is also legal c.c
[05:50:07] <adridu59> acrichto: r? https://github.com/mozilla/rust/pull/9868
[05:50:17] <jld> rusti: format!("{:x}", std::mem::size_of::<[u8, ..std::i16::min_value]>() as uint)
[05:50:17] -rusti- ~"ffff8000"
[05:50:18] <strcat> rusti: pub extern {}
[05:50:27] -rusti- pastebinned 10 lines of output: http://ix.io/8Bd
[05:50:27] <strcat> at least that doesn't work
[05:51:05] <acrichto> sfackler: view items in general just aren't checked when they should be
[05:51:10] <adridu59> ty :)
[05:51:13] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[05:51:15] <acrichto> Addle: np :)
[05:51:37] *** Joins: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP)
[05:51:40] <acrichto> wait wrong ping
[05:51:40] <dbaupp> acrichto: a lightning review request
[05:51:43] <acrichto> :(
[05:51:45] <jld> So, const_eval interprets integer casts as the identity, and the declared types of statics are ignored-ish.
[05:52:06] <sfackler> why do 'use' and 'extern mod' both parse to view_item? they seem pretty unrelated
[05:52:36] <acrichto> sfackler: they both in theory bring names into the current namespace
[05:52:39] <dbaupp> sfackler: `pub extern mod` seem legitimate btw: one might one to just collect a few other crates together
[05:52:44] <acrichto> but there's probably some weird ancient reason
[05:53:11] *** Quits: fmtq (fmt@moz-5769BD38.static.tpgi.com.au) (Ping timeout)
[05:53:16] <sfackler> does 'pub extern mod' actually reexport that name?
[05:53:33] <jld> Meanwhile, in my local tree:
[05:53:34] <jld> -pub static max_value: $T = min_value - 1 as $T;
[05:53:34] <jld> +pub static max_value: $T = !min_value;
[05:53:37] *** Quits: rveach (kvirc@moz-7E54B3A2.hsd1.ca.comcast.net) (Ping timeout)
[05:53:56] <acrichto> sfackler: I think that in theory yes, but it's completely broken in practice (I think?) and certainly not used anywhere
[05:54:24] *** Joins: squiddy (squiddy@moz-722BD301.adsl.alicedsl.de)
[05:55:05] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[05:55:35] <sfackler> should it? or should I add a privacy check for that as well, at least until someone fixes it
[05:55:54] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[05:56:07] <dbaupp> it does appear to be broken
[05:56:10] <acrichto> I would want to verify that first, but perhaps open an issue to clarify the semantics
[05:56:18] <acrichto> and put a FIXME saying that it should be addressed
[05:56:32] <acrichto> I'm inclined to say that we should deny 'pub' and 'priv', but I would want others opinions first
[05:56:54] <dbaupp> other.rs: 'pub extern mod extra;' main.rs: 'extern mod other; use other::extra::treemap; fn main() {}' doesn't work.
[05:57:03] <sfackler> i'll add checks for priv mod now and open an issue for pub extern mod
[05:57:08] <sfackler> er, priv use
[05:57:26] <sfackler> and I guess priv extern mod too
[05:58:39] <acrichto> if you deny 'pub extern mod' I may accidentally overlook it while reviewing it as well
[05:58:40] *** Joins: fmt (fmt@moz-5769BD38.static.tpgi.com.au)
[05:59:01] <sfackler> haha
[05:59:53] *** Joins: Liothen (liothen@moz-266BCA86.spkn.qwest.net)
[06:02:21] *** Quits: jxv (jxv@4732E7D7.2AB34561.9B38A32A.IP) (Quit: Leaving)
[06:06:56] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[06:17:20] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[06:18:07] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[06:19:01] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Ping timeout)
[06:20:19] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[06:21:15] *** Joins: GeneralMaximus (ankur@12476CF5.5288E270.BE90E62C.IP)
[06:22:34] <tiffany> cgmath isn't updated is it?
[06:23:03] <bjz> tiffany: travis says its building fine
[06:23:19] <tiffany> it uses fmt! instead of format! which prints deprecated errors
[06:23:29] <dbaupp> tiffany: you have a very new compiler
[06:23:34] <tiffany> yeah I just updated
[06:23:46] <tiffany> it had an error so I updated to see if that would fix it but it made it worse
[06:23:58] <dbaupp> yeah, the next rust-ci build will have a big pile of fmt! related failures I guess
[06:24:06] *** Joins: oberstet (quassel@moz-1D5E0627.dynamic.mnet-online.de)
[06:24:06] <bjz> oohk
[06:24:09] <tiffany> I have a feeling I hopped right over the version in which it compiled
[06:24:11] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[06:24:16] <tiffany> I hadn't updated in like a month just because of how long it takes
[06:26:08] <dbaupp> yeah, it compiled with a rustc 12 PRs ago
[06:26:33] <dbaupp> (and probably one 4 PRs ago, based on when the fmt changes landed)
[06:26:36] <dbaupp> *removal
[06:26:44] *** fmt is now known as fmtq
[06:26:48] <fmtq> lolhighlights
[06:27:22] <tiffany> I always get highlighted whenever peope talk about the .tiff format
[06:27:23] * dbaupp thinks we should've replaced fmt by fmtq
[06:27:31] <dbaupp> :P
[06:27:42] <tiffany> the only times I've ever been highlighted in #haskell were that bot announcing an image library updating
[06:28:41] <mcpherrin> My nickname in several other irc channels is "mm", that became frustrating here
[06:29:02] <mcpherrin> People seem to like to ponder thoughts with a mm or two
[06:30:31] <tiffany> heh
[06:34:22] *** Joins: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com)
[06:34:30] *** Parts: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com) ()
[06:35:04] <nwmcsween> rusti:include!("/dev/kmem")
[06:35:09] -rusti- pastebinned 6 lines of output: http://ix.io/8Be
[06:35:36] <nwmcsween> :)
[06:35:53] * bjz is a frequent offender of using 'mm'
[06:36:06] <bjz> -_-#
[06:36:27] *** Quits: reedlepee (Mibbit@EFDFDA63.8471470E.9D59D0D8.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:36:31] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[06:39:56] *** Joins: gour (gour@moz-26E5088E.adsl.net.t-com.hr)
[06:40:38] <FreeFull> rusti: include!("/dev/urandom")
[06:40:40] <sam113101> my nickname used to be s, not on freenode though
[06:40:44] -rusti- Killed
[06:40:44] -rusti- application terminated with error code 137
[06:40:56] <gour> morning
[06:41:26] <sam113101> (s is short for sam)
[06:41:41] <gour> do you know if the wxrust developer (kenz-gelssoft @github) is visiting this place?
[06:41:59] <sam113101> you ask
[06:42:18] <sam113101> .seen test
[06:42:23] <sam113101> !seen test
[06:42:45] <dbaupp> sam113101: so you're sam-am113101 ?
[06:43:30] <sam113101> no, I mean s (my previous nickname on another network) was short for sam
[06:43:38] <bjz> tiffany: would you be able to send me a pr with a fix?
[06:43:41] * dbaupp prefers recursion
[06:44:11] <sam113101> I kept being highlighted for words like "it's", etc.
[06:44:18] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[06:44:38] <tiffany> maybe tomorrow if I feel like poking the project I was going to use cgmath for
[06:44:42] <sam113101> I wish my nickname was recursive
[06:44:47] <sam113101> unfortunately it's not
[06:45:01] <bjz> tiffany: ok, I might be able to get it working tonight
[06:45:09] <bjz> tiffany: sorry for the brokedness!
[06:45:26] <tiffany> it is to be expected of a language which introduces breaking changes on a weekly basis
[06:46:21] <sam113101> I think I'm going to wait before learning rust
[06:46:33] <sam113101> looks pretty cool though
[06:46:52] <tiffany> waiting won't get you all that far
[06:47:09] <sam113101> what do you mean
[06:47:35] <tiffany> it's not that hard to keep your projects up to date with the latest rust, nor is it hard to adjust to the new stuff
[06:47:52] <tiffany> the only reason to wait would be to wait for more learning materials, which is kind of a self defeating thing
[06:47:55] *** Joins: bleibig (bleibig@moz-CB11172C.hsd1.ca.comcast.net)
[06:48:09] <tiffany> or if you have a really big project in mind I guess
[06:50:52] <sam113101> well I'd be more bothered by changes in the standard library than in the language itself I think
[06:51:02] <sam113101> ie. stuff gets moved or renamed
[06:51:09] <sam113101> or just a different interface
[06:53:23] *** Joins: marco (marco@moz-161CB040.dynamic.surfer.at)
[06:53:24] *** Quits: _Vi (vi@DCE8FCEE.CAA062BC.FDCAC96B.IP) (Connection reset by peer)
[06:54:02] *** Joins: reedlepee (Mibbit@EFDFDA63.8471470E.9D59D0D8.IP)
[06:54:15] *** marco is now known as m314159
[06:54:38] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Quit: Leaving)
[06:57:32] <nwmcsween> what was the reasoning behind inline asm e.g the asm keyword?
[06:58:13] <sam113101> have hardware access I guess, to do things that can be highly optimized
[06:58:22] <dbaupp> nwmcsween: because someone wanted inline asm?
[06:58:30] <Luqman> nwmcsween: because i just wanted to do it :P
[06:58:31] <dbaupp> (it's not a keyword; it's just a normal macro)
[06:58:41] <dbaupp> rusti: let asm = 1; asm // this wouldn't work with a keyword
[06:58:42] -rusti- 1
[06:59:03] <dbaupp> Luqman: do you also want to write some tests? :P
[06:59:24] <nwmcsween> hmm a macro? source for this?
[06:59:31] <Luqman> dbaupp: eddyb9 was kind enough to make it more robust and add tests :D
[07:00:09] <dbaupp> Luqman: oh, there are tests now? :D
[07:00:16] <Luqman> yep!
[07:00:23] <dbaupp> nwmcsween: as in, the implementation?
[07:00:36] <eddyb9> for constraint modifiers and output checks
[07:00:41] <nwmcsween> yes
[07:00:52] <eddyb9> you can, for example, initialize an immutable local with inline asm
[07:00:58] <nwmcsween> the commit preferablly
[07:01:06] <dbaupp> https://github.com/mozilla/rust/blob/master/src/libsyntax/ext/asm.rs
[07:01:14] <nwmcsween> I just dislike inline asm
[07:01:17] <dbaupp> you can look at the history if you want the origins
[07:01:22] <dbaupp> you're not forced to use it
[07:01:39] <nwmcsween> linux kernel makes heavy use of it and some of it is really bad
[07:01:48] <dbaupp> (and if you have specific questions, Luqman was the original author, so you can ask questions)
[07:01:52] <eddyb9> nwmcsween: it's marked as unsafe
[07:02:29] <dbaupp> rusti: asm!("int 5")
[07:02:31] -rusti- pastebinned 7 lines of output: http://ix.io/8Bg
[07:02:47] <dbaupp> (the unsafe requirement^)
[07:03:24] <sam113101> nwmcsween: how bad is it
[07:03:41] <FreeFull> rusti: unsafe { asm!("int 5") }
[07:03:44] -rusti- pastebinned 6 lines of output: http://ix.io/8Bh
[07:03:45] <Luqman> eddyb9: oh that reminds me, do you think it's worth using the same syntax to refer to operands as gcc/clang? (that is %1 vs $1) ?
[07:03:47] <sam113101> rusti: unsafe { asm!("HLT"); }
[07:03:48] -rusti- pastebinned 6 lines of output: http://ix.io/8Bi
[07:04:19] <FreeFull> sam113101: Your line had some weird character in it apparently
[07:04:26] <sam113101> shit
[07:04:44] <dbaupp> rusti: unsafe { asm!("hlt"); }
[07:04:44] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[07:04:46] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[07:04:47] <eddyb9> Luqman: LLVM-specific is fine
[07:04:59] <dbaupp> as long as we have documentation for it somewhere
[07:05:02] <FreeFull> HLT doesn't work outside of kernel code
[07:05:07] * dbaupp couldn't even find docs on the LLVM site
[07:05:16] <Luqman> eddyb9: yea, clang does the transformations itself before passing to llvm i guess to be compatible with gcc
[07:05:29] <nwmcsween> just gratuitous use of inline asm to use c features glibc does this to iirc
[07:05:48] <Luqman> dbaupp: yea, i remember looking through the clang source to figure it out
[07:05:57] <nwmcsween> I'll show some examples in a few
[07:06:01] <dbaupp> nwmcsween: using inline asm to use c features? can you be more specific?
[07:06:05] <eddyb9> Luqman: clang doesn't have its own inline asm, it handles both GCC and MSVC syntax
[07:06:11] <dbaupp> wouldn't teh c features be in C already?
[07:06:44] <dbaupp> Luqman: could you write it down (if you still remember it)? (e.g. a Note-inline-asm wikipage or something)
[07:06:54] <FreeFull> Not introducing another syntax is actually a pretty good idea
[07:07:26] *** Quits: ercxx (ercan@moz-7CFF3469.dyn.optonline.net) (Quit: WeeChat 0.4.2)
[07:07:31] <pcmattman> fwiw being able to do something quick and dirty with SSE in inline ASM is nice, if the compiler has failed to compile as well as it could
[07:07:34] <pcmattman> can't do that in Go
[07:07:47] <dbaupp> pcmattman: we have std::unstable::simd, iirc
[07:07:52] * dbaupp isn't 100% sure it works
[07:07:59] <dbaupp> (oh, wait, you're not using std, sorry.)
[07:08:06] <pcmattman> hey that's cool
[07:08:12] <Luqman> dbaupp: i wrote a bunch for the 0.6 detailed release notes
[07:08:15] <Luqman> https://github.com/mozilla/rust/wiki/Doc-detailed-release-notes
[07:08:15] <FreeFull> asm!  is nice if you want to do syscalls directly
[07:08:28] <pcmattman> sure but someone doing userspace stuff might have use of std::unstable::simd
[07:08:52] <ldunn> asm! is nice for debugging, too
[07:09:10] <ldunn> in an emulator, that is
[07:09:16] <pcmattman> unsafe { asm!("int $3") }; // sup gdb!
[07:09:24] <pcmattman> int3 rather.
[07:09:32] <dbaupp> Luqman: ah, I see. no mention of the syntax for specific registers, which confused me no end, until aatch told me the correct syntax (asm!("..." : "{ax}"(x)))
[07:09:46] *** Joins: _Vi (vi@DCE8FCEE.CAA062BC.FDCAC96B.IP)
[07:10:27] <Luqman> dbaupp: right, i think that still needs a bit more work from what i remember since some constraints didn't seem to work
[07:10:29] <pcmattman> dbaupp: I wrongly assumed it was clang syntax for specific registers until I read the LLVM source code (X86TargetLowering or something like that)
[07:15:14] <nwmcsween> you can do everything in a separate file that you can do with inline asm, inline is just easier. Unless there is a case i'm missing with rust
[07:16:00] <eddyb9> nwmcsween: LLVM integrates inline asm with the context
[07:16:07] <FreeFull> Inline can let you avoid function calls
[07:16:27] <eddyb9> and it can set immediate operands after inlining
[07:17:49] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[07:19:34] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Ping timeout)
[07:19:41] *** Joins: skade (skade@30BBD5E6.505237C9.CAE22B62.IP)
[07:19:50] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[07:21:07] *** Joins: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr)
[07:23:22] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[07:23:54] *** Joins: mindcat (mindcat@756E7557.C53DF77.D6E1F3C4.IP)
[07:24:20] <mindcat> rusti: "啊".len()
[07:24:20] -rusti- 3u
[07:25:06] <sam113101> rusti: "é".len()
[07:25:07] -rusti- 2u
[07:25:19] *** Joins: Ms2ger (Ms2ger@moz-92A79B55.adsl-dyn.isp.belgacom.be)
[07:25:30] <eddyb9> rusti: "啊".char_len()
[07:25:31] -rusti- 1u
[07:25:43] <sam113101> rusti: "é".char_len()
[07:25:44] -rusti- 1u
[07:25:51] <eddyb9> mindcat: maybe that's what you want, instead?
[07:25:54] <sam113101> rusti: " ".char_len()
[07:25:55] -rusti- 1u
[07:26:02] <mindcat> eddyb9: yea :D
[07:26:06] <sam113101> rusti: " ".char_len()
[07:26:06] -rusti- 1u
[07:27:12] *** Joins: Toussa (Mibbit@moz-C9342773.adsl.alicedsl.de)
[07:27:19] <Toussa> Hi guys
[07:27:47] <sam113101> rusti: "hi"
[07:27:48] -rusti- "hi"
[07:28:09] <dbaupp> mindcat: .char_len is O(n) btw.
[07:28:38] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[07:28:46] <reedlepee> dbaupp: is it a tuple struct " pub struct GetAddrInfoRequest(*uvll::uv_getaddrinfo_t);"
[07:28:53] *** Quits: skade (skade@30BBD5E6.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:29:18] <dbaupp> reedlepee: yes, that's a tuple struct
[07:29:26] <sam113101> what about .len? O(1)?
[07:30:13] <reedlepee> ohk
[07:30:16] <Luqman> sam113101: yes
[07:31:06] <dbaupp> sam113101: yes, it's just .len() on the underlying [u8] vector
[07:36:13] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[07:36:19] *** Quits: GeneralMaximus (ankur@12476CF5.5288E270.BE90E62C.IP) (Ping timeout)
[07:36:28] *** Joins: GeneralMaximus (ankur@E88D857A.113CFA4F.274D17D6.IP)
[07:38:13] *** Quits: GeneralMaximus (ankur@E88D857A.113CFA4F.274D17D6.IP) (Ping timeout)
[07:40:19] <SimonSapin> std::from_str relying on inference to determine the type feels too magic
[07:40:47] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[07:40:54] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[07:41:03] <SimonSapin> sometimes the line providing the type hint to the compiler can be "far away" from the from_str call
[07:41:09] <SimonSapin> making code hard to read
[07:41:10] <dbaupp> SimonSapin: it's bug that inference is the only way
[07:41:41] <dbaupp> (but, the from_str free standing function can be done with `from_str::<type>(string)`)
[07:41:43] <SimonSapin> dbaupp: thanks for summing up what I was trying to say :)
[07:41:44] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[07:41:54] *** Joins: GeneralMaximus (ankur@B6AAA315.9B524EE1.BE90E62C.IP)
[07:43:06] *** Quits: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net) (Ping timeout)
[07:43:34] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Ping timeout)
[07:45:50] *** Joins: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net)
[07:45:52] *** Quits: reed (reed@tech.monkey) (Ping timeout)
[07:46:01] *** Joins: Heather (Heather@CCE6A06B.9BD40128.256079E2.IP)
[07:46:08] <Heather> Good morning
[07:46:34] *** Joins: reed (reed@tech.monkey)
[07:46:49] <Heather> on one Win machine got > unable to find any of: CFG_PYTHON python2.7 python2.6 python2 python
[07:46:52] <Luqman> morning!
[07:47:06] <Luqman> you need python in your path
[07:47:14] <Heather> I've got it
[07:47:35] <Heather> I wonder why python provided by google depot tools doesn't recognized
[07:47:41] <Luqman> what does `echo %PATH%` say in cmd?
[07:49:00] <Heather> Luqman I've got it in C:\depot_tools;
[07:49:59] *** Quits: bleibig (bleibig@moz-CB11172C.hsd1.ca.comcast.net) (Quit: bleibig)
[07:50:19] <Luqman> Heather: odd, i've never used google depot tools so i'm not sure
[07:50:52] *** Joins: skade (skade@30BBD5E6.505237C9.CAE22B62.IP)
[07:51:36] *** Quits: GeneralMaximus (ankur@B6AAA315.9B524EE1.BE90E62C.IP) (Ping timeout)
[07:52:05] <Heather> Luqman will try to add C:\depot_tools\python_bin
[07:52:28] <mcpherrin> sigh, the pains of windows
[07:54:55] <Heather> mcpherrin pains? adding stuff to path? you're kidding...
[07:55:12] <mcpherrin> I *hate* editing the path on windows
[07:55:17] *** Joins: GeneralMaximus (ankur@E7029A2.B5ACBD0B.BE90E62C.IP)
[07:55:19] <mcpherrin> it makes you type things into that tiny box
[07:55:24] <mcpherrin> can't use a real text editor....
[07:55:33] <Heather> mcpherrin you can...
[07:55:41] <Heather> mcpherrin copy and past to any editor
[07:55:45] *** Joins: crembo (crembo@moz-C2B364AA.vc.shawcable.net)
[07:55:46] <Heather> mcpherrin for example emacs
[07:55:52] <mcpherrin> Oh I suppose I could
[07:55:57] <Heather> mcpherrin then do /s/;/;\n
[07:55:57] <mcpherrin> boo emacs. yay vim.
[07:56:33] <mcpherrin> Heather: I am currently angry at windows (upgrade to 8.1 isn't working) so would like to complain more than anything else constructive :)
[07:57:16] <dbaupp> mcpherrin: skip the complains, and just submit rust pull requests! \o/
[07:57:33] *** Quits: crembo (crembo@moz-C2B364AA.vc.shawcable.net) (Ping timeout)
[07:57:34] <Heather> mcpherrin I'm running 8.1 -_-'
[07:57:54] <Heather> mcpherrin did you used to setup preview before?
[07:58:25] <mcpherrin> I'm on 8.1 preview, trying to go to release
[07:58:48] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[07:59:06] <mcpherrin> dbaupp: I do all my rust dev on Linux, so it's orthogonal to complaining about Windows ;)
[07:59:14] <Heather> mcpherrin I know this problem, I didn't setup preview but my co-worker was successfully updated to 8.1 from preview just yesterday
[07:59:33] <dbaupp> mcpherrin: doesn't matter... Rust > complaints :P
[07:59:42] <mcpherrin> dbaupp: :-)
[08:00:13] <mcpherrin> I think I am going to go write some network code in Rust
[08:00:27] <mcpherrin> using scapy in python is probably better but Rust!
[08:01:22] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[08:03:03] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[08:03:28] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[08:06:18] *** Quits: doomlord_ (servitor@moz-6732E9D4.range86-184.btcentralplus.com) (Ping timeout)
[08:07:50] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[08:16:09] *** Joins: rsaarelm (rsaarelm@moz-D1CB7158.dhcp.inet.fi)
[08:17:21] *** Quits: GeneralMaximus (ankur@E7029A2.B5ACBD0B.BE90E62C.IP) (Ping timeout)
[08:17:29] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[08:20:42] *** Joins: GeneralMaximus (ankur@D525A860.E8744D7A.D5D59AD9.IP)
[08:23:44] *** Quits: squiddy (squiddy@moz-722BD301.adsl.alicedsl.de) (Ping timeout)
[08:27:19] *** Joins: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com)
[08:28:02] *** Joins: martndemus (martndemus@moz-876695FC.sshunet.nl)
[08:29:31] *** Quits: blank_name (blank_name@2E4E7E43.800E1818.31EC03F3.IP) (Ping timeout)
[08:30:22] *** Joins: geert (geert@moz-5EFDD81E.access.telenet.be)
[08:32:37] *** Quits: geert (geert@moz-5EFDD81E.access.telenet.be) (Ping timeout)
[08:34:12] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[08:34:46] *** Quits: GeneralMaximus (ankur@D525A860.E8744D7A.D5D59AD9.IP) (Ping timeout)
[08:36:19] *** Quits: themgt (themgt@moz-B8C84832.baf.movistar.cl) (Ping timeout)
[08:38:05] *** Joins: GeneralMaximus (ankur@9C04BB2A.DD2F417A.BE90E62C.IP)
[08:38:47] <rsaarelm> http://ix.io/8Bk Is this supposed to not work? The error is triggered by having "&A" to the static A with a type wrapper value, though the error message points to the static line. (v0.8, still waiting for trunk to compile to try this on it)
[08:40:24] *** Quits: Thiez (thiez@moz-BF669398.student.utwente.nl) (Ping timeout)
[08:41:24] <dbaupp> rusti: struct Foo(u8); static X: Foo = Foo(0);
[08:41:27] -rusti- ()
[08:41:37] *** Quits: GeneralMaximus (ankur@9C04BB2A.DD2F417A.BE90E62C.IP) (Ping timeout)
[08:41:48] <dbaupp> rusti: struct Foo(u8); static X: Foo = Foo(0); match Foo(1) { A => {} _ => {} }
[08:41:51] -rusti- pastebinned 7 lines of output: http://ix.io/8Bl
[08:42:00] *** Quits: Ms2ger (Ms2ger@moz-92A79B55.adsl-dyn.isp.belgacom.be) (Ping timeout)
[08:42:03] <dbaupp> rusti: struct Foo(u8); static X: Foo = Foo(0); match Foo(1) { X => {} _ => {} }
[08:42:04] -rusti- pastebinned 6 lines of output: http://ix.io/8Bm
[08:42:07] * dbaupp hates that first error
[08:42:25] *** Joins: Ms2ger (Ms2ger@moz-92A79B55.adsl-dyn.isp.belgacom.be)
[08:43:16] <rsaarelm> Right.
[08:43:38] <rsaarelm> So is that a bug or something that has reasons but a bad error message?
[08:43:50] <dbaupp> bug I guess
[08:44:54] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[08:44:58] *** Joins: GeneralMaximus (ankur@841C594.FCB1410C.274D17D6.IP)
[08:45:34] *** Joins: themgt (themgt@moz-78E3D768.baf.movistar.cl)
[08:47:14] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Quit: )
[08:47:46] *** Joins: biz (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[08:47:56] *** Quits: biz (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Quit: Leaving)
[08:48:13] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Client exited)
[08:48:19] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[08:49:07] *** Joins: pyrac (pyrac@moz-61FEC861.w83-114.abo.wanadoo.fr)
[08:49:30] *** Joins: mihneadb (mihneadb@moz-C5B7A4E3.residential.rdsnet.ro)
[08:50:14] <rsaarelm> Looks like its known already. https://github.com/mozilla/rust/issues/6533
[08:50:41] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Client exited)
[08:52:33] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[08:54:19] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[08:54:54] *** Parts: rsaarelm (rsaarelm@moz-D1CB7158.dhcp.inet.fi) ()
[08:54:55] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:58:08] *** Quits: GeneralMaximus (ankur@841C594.FCB1410C.274D17D6.IP) (Ping timeout)
[08:59:35] *** Quits: AutomatedTester (David@moz-DB4A9C19.scl3.mozilla.com) (Quit: ZNC - http://znc.in)
[08:59:35] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Quit: ZNC - http://znc.in)
[08:59:35] *** Quits: pmoore|away (pmoore@moz-DB4A9C19.scl3.mozilla.com) (Quit: ZNC - http://znc.in)
[09:01:03] *** Joins: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[09:01:20] *** Joins: GeneralMaximus (ankur@23159ED3.90CC607.BE90E62C.IP)
[09:01:31] *** Joins: pmoore|away (pmoore@moz-DB4A9C19.scl3.mozilla.com)
[09:02:57] *** Quits: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Quit: jeffdb)
[09:10:07] *** Joins: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[09:10:58] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[09:11:43] *** Quits: GeneralMaximus (ankur@23159ED3.90CC607.BE90E62C.IP) (Ping timeout)
[09:12:30] *** Joins: engla (engla@moz-E4A8CEF5.customer.cdi.no)
[09:15:13] *** Joins: GeneralMaximus (ankur@A709B450.48DE37B0.BE90E62C.IP)
[09:15:31] *** Joins: Jackneill (Jackneill@moz-7E25A43F.pool.digikabel.hu)
[09:15:34] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[09:17:28] *** Quits: rossm (rossm@moz-EE3BB1DC.br.br.cox.net) (Connection reset by peer)
[09:17:32] *** Joins: rossm (rossm@moz-EE3BB1DC.br.br.cox.net)
[09:17:35] *** Quits: martndemus (martndemus@moz-876695FC.sshunet.nl) (Ping timeout)
[09:18:14] <Heather> rustc -o deprecated?
[09:18:32] <Heather> ah not... random sudden bug
[09:20:52] *** Joins: blank_name (blank_name@2E4E7E43.800E1818.31EC03F3.IP)
[09:23:17] <balpert> can someone help me clear up a hopefully-simple bit I'm confused on? in https://gist.github.com/spicyj/0ead9688a08a74bc6b55 I'm trying to flat_map an int iterator to each int's digits but I'm running into some trouble with lifetimes -- it seems like my problem is that all iterators are passed around by value and there's no one to hold on to the vec returned by digits()...
[09:23:29] <balpert> ...but I'm unsure of a good way to fix this
[09:23:46] *** Joins: missingwords (missingwor@A3D1EA0D.B68B4625.7AC20EE.IP)
[09:25:30] *** Quits: missingwords (missingwor@A3D1EA0D.B68B4625.7AC20EE.IP) (Quit: )
[09:28:02] *** Joins: jaen (jaen@23B2D431.C79D1C03.43DC2829.IP)
[09:30:18] *** Quits: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com) (Ping timeout)
[09:32:39] *** Quits: GeneralMaximus (ankur@A709B450.48DE37B0.BE90E62C.IP) (Ping timeout)
[09:33:51] <Heather> https://github.com/mozilla/rust/pull/9949
[09:34:47] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[09:35:36] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[09:36:06] *** Joins: GeneralMaximus (ankur@142AC64F.E684EE73.BE90E62C.IP)
[09:37:07] <engla> balpert: right, flat_map is tricky to use for that reason. You have to map to an iterator that can be returned from the closure
[09:37:39] <engla> for example  digits(x).move_iter()
[09:38:24] <myname> how to declare a trait in main.rs and use it in included modules?
[09:38:31] <engla> balpert: it would be better to skip the intermediate ~[] allocation of course
[09:38:43] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[09:39:00] <balpert> engla: ahh, move_iter indeed works
[09:39:07] <balpert> how would I have been able to figure that out from the docs?
[09:39:46] *** Joins: nkoep (nik@moz-FC3E2242.pool.mediaways.net)
[09:39:52] <balpert> I was staring at them and I read the info about move_iter
[09:40:01] <kimundi> myname: YOu declare it, and `use` it
[09:40:11] <balpert> I guess MoveIterator<T> has a different lifetime than VecIterator<'self, T>
[09:40:11] <myname> kimundi: but how? use main::?
[09:40:26] <balpert> engla: so iter() lives only as long as the vec you call it on?
[09:40:34] <kimundi> myname: That depends on how your module hierachy is laid out
[09:40:36] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Input/output error)
[09:40:38] <engla> balpert: yes
[09:40:53] <balpert> engla: okay, thank you
[09:40:54] <myname> kimundi: is it possible to do main::?
[09:40:57] <kimundi> myname: If main is the crate root, then 'use MyTrait;' works
[09:41:06] <myname> ah
[09:42:01] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[09:42:32] <engla> balpert: the .iter()'s elements are references into the origin vector
[09:43:43] *** Quits: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Quit: jeffdb)
[09:43:55] *** Quits: GeneralMaximus (ankur@142AC64F.E684EE73.BE90E62C.IP) (Ping timeout)
[09:44:54] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[09:45:11] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[09:45:47] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[09:47:29] *** Joins: GeneralMaximus (ankur@87A76822.E44B0107.BE90E62C.IP)
[09:47:41] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[09:48:45] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[09:48:52] <balpert> engla: thanks, I think I see now
[09:49:32] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[09:49:43] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[09:52:46] <Toussa> Small question guys. Todo some metaprogramming, i should use macro right?
[09:54:33] *** Quits: Heather (Heather@CCE6A06B.9BD40128.256079E2.IP) (Quit: ~ Trillian - www.trillian.im ~)
[09:54:34] *** Quits: _Vi (vi@DCE8FCEE.CAA062BC.FDCAC96B.IP) (Connection reset by peer)
[09:54:51] <FreeFull> If you want to do metaprogramming, yes, but depending on what you are doing you might not actually need metaprogramming
[09:55:13] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Client exited)
[09:55:13] <Toussa> Im writing a monoid type
[09:55:43] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[09:56:17] <Toussa> i want to make sure at compile time that the implementation match associativity 
[09:57:51] *** Joins: Earnestly (earnest@moz-BE290A2B.dyn.plus.net)
[09:58:18] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[10:00:13] <myname> kimundi: i cannot 'use' enums that way?
[10:00:34] <dbaupp> myname: you have to 'use' each variant too
[10:00:44] <myname> oh dear
[10:02:31] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[10:04:25] *** Quits: eddyb9 (eddy@3C6E2DBB.FFB4E060.A5830293.IP) (Ping timeout)
[10:05:09] *** Joins: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP)
[10:05:29] <engla> Toussa: I don't think rust traits and types can encode that requirement
[10:05:56] <dbaupp> myname: well, only the ones you use, of course
[10:06:28] <Toussa> engla: hum, ok thanks, gonna try something let's see XD
[10:06:54] <engla> please tell if you do find out Toussa 
[10:07:52] <Toussa> engla: no problem i will
[10:11:02] *** Joins: _Vi (vi@DCE8FCEE.CAA062BC.FDCAC96B.IP)
[10:11:07] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[10:11:30] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[10:12:24] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[10:13:14] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[10:15:31] *** Quits: GeneralMaximus (ankur@87A76822.E44B0107.BE90E62C.IP) (Ping timeout)
[10:16:01] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[10:17:37] <myname> "error: failed to find an implementation of Trait Level for [type error]"
[10:17:39] <myname> interesting
[10:18:52] *** Joins: GeneralMaximus (ankur@371C2845.7B992933.BE90E62C.IP)
[10:19:54] *** Joins: Ferreus (ferreus@moz-BD74DCDB.pools.arcor-ip.net)
[10:20:28] <dbaupp> kimundi: if you use ~~~rust to start the code blocks on github you get pretty colours :P
[10:20:56] <dbaupp> kimundi: (I edited the 'rust' into https://github.com/mozilla/rust/issues/9950 :) )
[10:23:03] <kimundi> dbaupp: Ah, nice, I was wondering about that :)
[10:23:23] <kimundi> Thanks, much readable now xD
[10:24:00] <dbaupp> kimundi: '```rust' works too
[10:24:10] <kimundi> myname: That usually means there was an other error before that place in the code, and the compiler just kept going
[10:24:18] <dbaupp> if you're feeling like typing non-valid rust source into your issue reports :P
[10:24:33] <dbaupp> rusti: let rust = 1; ~~~rust
[10:24:34] -rusti- ~~~1
[10:24:41] <myname> kimundi: actually, i get an error message before that which is later in the code
[10:25:01] <myname> kimundi: i don't get that one, either
[10:25:03] <kimundi> dbaupp: Wait, which one should I use in doc comemnts?
[10:25:39] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[10:26:08] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[10:26:29] <myname> let mut l = lg.new(); l.draw(); complains because the type of l is not known in this context, but lg.new is defined as fn new<T: Level>(&self) -> T so i really don't know the type
[10:26:37] <eddyb> ```rust is the GitHub way
[10:26:55] <Earnestly> pandoc
[10:27:17] <Earnestly> ```<lang> is pandoc flavor that is, amung many other improvements
[10:27:50] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[10:28:34] <kimundi> myname: In that situation you need to tell rustc which type to use
[10:28:45] <myname> kimundi: how do i do that?
[10:28:57] <kimundi> foo.new::<MyType>()
[10:29:05] <dbaupp> kimundi: doc comments in the source should use which ever the other ones do
[10:29:11] <dbaupp> eddyb: but ~~~rust works too
[10:29:26] <dbaupp> kimundi: iirc it's ~~~
[10:29:26] <kimundi> Oh, eddyb btw
[10:30:22] * eddyb expects bad news
[10:30:29] <myname> kimundi: that kind of destroys my idea of abstraction
[10:30:46] *** Quits: joone_ (joone@moz-C50DC051.jf.intel.com) (Ping timeout)
[10:30:47] <kimundi> eddyb: Ha, nothing important. You wondered yesterday what pi in base 256 would look like.
[10:30:55] <kimundi> rusti: use std::num::Round; let alpha = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"; println!("base: {}", alpha.char_len()); let x: f64 = std::num::Real::pi(); let mut x = x / 10.0f64; loop { x = x * (alpha.char_len() as f64); let y = x.floor(); x = x.fract(); print(alpha.char_at(y as uint).to_str()); if x <= 0.0 { break; } }
[10:30:56] -rusti- base: 62
[10:30:56] -rusti- jtCWRthKU07Tu9hVHbke7xLDkp8Ibr1YwoxNv3hEglyodySfv()
[10:31:01] <Earnestly> lol
[10:31:04] *** Joins: joone_ (joone@moz-C04AAE60.fm.intel.com)
[10:31:13] <kimundi> Feel free to plug in more characters to make it base 256 :P
[10:31:37] <eddyb> hehe
[10:31:44] *** Quits: jaen (jaen@23B2D431.C79D1C03.43DC2829.IP) (Ping timeout)
[10:32:11] <sp3d> is there a rust lib with iterators that generate chunks of pi/e/other constants?
[10:32:17] <dbaupp> kimundi: I want (the equivalent of) the champernowne constant in base 62
[10:32:23] <kimundi> myname: If you want to return a type that implements a trait without the compiler knowing what exact type it is, you need to use trait objects
[10:32:24] * dbaupp thinks this one will be tricky
[10:32:28] <dbaupp> :P
[10:32:37] <myname> kimundi: that is?
[10:32:58] <kimundi> fn new(&self) -> ~Level
[10:32:59] <dbaupp> sp3d: probably not, it'd be fun though
[10:33:08] * dbaupp notes that idea down
[10:33:25] <myname> kimundi: i tried that
[10:33:43] <sp3d> iterator adaptors => math where you can choose your precision at the end of your calculation :D
[10:33:54] <myname> aaaaaah
[10:34:31] <dbaupp> kimundi: without any context, why are you encouraging returning `~`?
[10:34:37] <dbaupp> (unless it's a trait object...)
[10:34:47] <kimundi> Because it is a trait object
[10:35:01] <myname> kimundi: yeah, new error: cannot call a generic method through an object
[10:35:10] <dbaupp> kimundi: heh ok
[10:35:26] <kimundi> myname: Right, that doesn'T work with a trait object
[10:35:35] *** Quits: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr) (Quit: bholley)
[10:35:48] <myname> any other way to make that work?
[10:36:05] <kimundi> Because the type gets looked up at runtime, the compiler doesn't know how to specialize the generic methods
[10:36:46] <kimundi> myname: Dunno. Need to know what you actually want to do :)
[10:37:24] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[10:38:16] <myname> i have a UI that needs one or more levels, but should not know the 'class' of the levels directly. my idea was to pass a level generator with a method new which generates levels to use in UI
[10:39:43] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[10:40:24] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[10:40:38] *** Quits: joone_ (joone@moz-C04AAE60.fm.intel.com) (Ping timeout)
[10:40:42] *** Joins: squiddy (squiddy@moz-722BD301.adsl.alicedsl.de)
[10:40:54] *** Joins: joone_ (joone@moz-C50DC051.jf.intel.com)
[10:42:08] <kimundi> myname: hmm...
[10:42:35] <kimundi> myname: What generic methods are giving you trouble?
[10:43:51] *** Joins: eddyb9 (eddy@3C6E2DBB.FFB4E060.A5830293.IP)
[10:44:03] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Client exited)
[10:44:45] <myname> kimundi: everything that is defined in the level trait :D
[10:45:32] <kimundi> yeah, but _what_ are those methods doing?
[10:46:03] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: stuff to do again)
[10:46:09] <kimundi> You need to design your api differently if your using trait objects, than if you're using generics
[10:46:19] <myname> i see
[10:46:29] <myname> maybe i should have a closer look at trait objects
[10:47:24] *** Joins: martndemus (martndemus@moz-876695FC.sshunet.nl)
[10:47:42] *** Joins: autra (augustin@moz-BE76895F.fbx.proxad.net)
[10:48:12] <kimundi> myname: Trait objects are basically dynamic dispatch, while using trait bounds in a generic function is static dispatch
[10:48:42] <eddyb9> kinda like virtual base class in C++/Java 
[10:50:32] <kimundi> Ha, that'S typical. As soon as I start writing tests, I'm finding rustc bugs / ommissions everywhere
[10:51:56] *** Quits: engla (engla@moz-E4A8CEF5.customer.cdi.no) (Ping timeout)
[10:52:19] <dbaupp> kimundi: rustc bugs, or library bugs?
[10:52:22] <myname> kimundi: there is no way for an implementation to force a specific type?
[10:53:11] <myname> i.e. trait Generator { fn new<T: Level>(&self) -> T; } impl Generator for Foo { fn new(&self) -> Someactuallevel { ...
[10:53:56] <myname> oh, i might type the generator
[10:54:13] <nathan7> fn ceil_log2<T: Int>(num: T) -> T { let mut result: T = T::one();
[10:54:14] <dbaupp> myname: trait Generator<Lev> { fn new(&self) -> Lev; }
[10:54:18] <nathan7> This should work, no?
[10:54:23] <dbaupp> nathan7: no
[10:54:34] <dbaupp> result: T = One::one()
[10:54:39] <nathan7> ah
[10:54:40] *** Quits: _Vi (vi@DCE8FCEE.CAA062BC.FDCAC96B.IP) (Connection reset by peer)
[10:54:43] <dbaupp> (or using the wrapper std::num::one())
[10:56:09] <nathan7> Thank you!
[10:57:23] <nathan7> Next up..
[10:57:24] <nathan7> buddy.rs:38:4: 38:16 error: binary operation << cannot be applied to type `T`
[10:57:24] <nathan7> buddy.rs:38     result <<= 1;
[10:57:35] <nathan7> however, <T: Int>
[10:57:41] <nathan7> and Int includes Bitwise
[10:57:58] <dbaupp> result = result << 1
[10:58:08] <dbaupp> Generic <<= doesn't exist (yet)
[10:58:13] <nathan7> mhm
[10:58:33] *** Joins: engla (engla@moz-E4A8CEF5.customer.cdi.no)
[10:58:36] <myname> dbaupp: that at least move the error to somewhere else :D
[10:58:55] <dbaupp> myname: well that's a start... :D
[10:59:17] <kimundi> dbaupp: rustc bugs, but more of the "annoying workaround neccessarry, but nmo ICE happens" variant
[10:59:37] <kimundi> dbaupp: Like that one bug I filed
[11:00:07] <myname> dbaupp: now i have a problem with the method expecting the generator :D but i should be able to fix that
[11:01:44] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[11:03:24] *** Quits: mihneadb (mihneadb@moz-C5B7A4E3.residential.rdsnet.ro) (Input/output error)
[11:03:51] *** Joins: mihneadb (mihneadb@moz-C5B7A4E3.residential.rdsnet.ro)
[11:05:12] *** Joins: doener (doener@moz-C68F600D.unity-media.net)
[11:05:32] <myname> okay, maybe not
[11:05:33] *** Quits: mihneadb (mihneadb@moz-C5B7A4E3.residential.rdsnet.ro) (Ping timeout)
[11:05:34] <reedlepee> dbaupp: when i run make check-stage1-extra  
[11:05:41] <reedlepee> it gives following error
[11:06:34] <reedlepee> missing documentation for a field
[11:07:09] <reedlepee> http://mibpaste.com/HHRnTu 
[11:07:14] <reedlepee> error is in line 452
[11:07:29] <reedlepee> What does that mean ??
[11:07:51] <dbaupp> reedlepee: every public item (including struct fields) in the standard libraries has to have documentation
[11:07:55] <dbaupp> (that's what the error is)
[11:08:03] <dbaupp> did you make "args" public?
[11:08:44] <reedlepee> i think it was already public
[11:08:54] <reedlepee> or may i have changed it 
[11:09:54] <dbaupp> yes; my version of libstd/fmt/mod.rs has `priv args: ...`
[11:10:16] <reedlepee> ohh ohk then i will change to priv
[11:10:25] <dbaupp> (you can use `git diff` to see exactly what you've changed, by the way. and even `git diff filename` to see the changes within a file.)
[11:10:41] <reedlepee> ohh ohk 
[11:10:45] <reedlepee> :)
[11:10:50] <dbaupp> (in this case, filename would be 'src/libstd/fmt/mod.rs')
[11:11:08] *** Joins: _Vi (vi@DCE8FCEE.CAA062BC.FDCAC96B.IP)
[11:11:41] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[11:14:22] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[11:16:06] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Ping timeout)
[11:18:01] *** Quits: squiddy (squiddy@moz-722BD301.adsl.alicedsl.de) (Ping timeout)
[11:20:15] <dbaupp> kimundi: are you just enumerating all the programs that use trait objects and filing the bugs you hit? :P
[11:20:51] <sp3d> are we doing that yet (csmith-style stuff)? I feel like we should be doing that
[11:20:55] <kimundi> dbaupp: No, I'm writing tests for my Any trait patch, and every oneline turns into a monstrosity of a workaround and a new bug report :P
[11:21:00] <sp3d> some time prior to 1.0 at least
[11:21:26] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (Ping timeout)
[11:21:39] <kimundi> oneliner*
[11:21:56] <dbaupp> sp3d: there used to be a fuzzer, but it wasn't keeping up with the language
[11:22:04] <sp3d> nuts
[11:22:05] <dbaupp> so it was removed
[11:22:22] <dbaupp> having a working one is a wanted feature though, I believe.
[11:22:55] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[11:22:56] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[11:23:12] *** Quits: GeneralMaximus (ankur@371C2845.7B992933.BE90E62C.IP) (Quit: Computer has gone to sleep.)
[11:23:48] *** Joins: mib_pct12h (Mibbit@2635491F.DBD06D39.EFB84E89.IP)
[11:24:07] *** Quits: mib_pct12h (Mibbit@2635491F.DBD06D39.EFB84E89.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[11:25:44] <myname> zomg it's compiling
[11:26:03] <kimundi> myname: \o/
[11:26:12] <myname> and even working
[11:26:18] <myname> now i can move on
[11:26:40] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[11:27:04] <dbaupp> kimundi: in some ways https://github.com/mozilla/rust/issues/9951 is expected behaviour
[11:27:27] <dbaupp> kimundi: it's not dissimilar to ~[~str] =/=> ~[&str]
[11:27:39] <myname> i am a bit confused about a warning
[11:27:48] <dbaupp> (I guess it can work though, since it can work backwards from the explicit type)
[11:27:52] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[11:28:00] <myname> i have enum Direction { DLeft, Dright, ... }
[11:28:19] <myname> in my module i have fn foo(dir: Direction) { match dir { DLeft => ...
[11:28:38] <myname> if i do NOT 'use Direction' i get complains about unknown types
[11:28:52] <myname> if i do 'use Direction' i get a warning about unused imports
[11:29:01] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[11:29:08] <dbaupp> is the unused import pointing to `use Direction`?
[11:29:13] <myname> yes
[11:29:21] <dbaupp> code?
[11:29:29] <kimundi> dbaupp: Hm, yeah. ALso, it might get solved with dynamic sized types
[11:29:38] <myname> oh, i look if i can strip it down
[11:29:51] <dbaupp> kimundi: I don't think DST are necessary?
[11:30:11] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[11:30:34] <dbaupp> kimundi: (also, thinking about it: it isn't particularly similar to ~[~str] to ~[&str], since ~Trait and &Trait are exactly the same except in terms of move sematics.)
[11:32:41] <kimundi> dbaupp: Well, DST would mean the "&self method impled on a &Trait" situation would be a "&self method impld on a Trait", which would remove one klayer of indirection, and might make that stuff work.
[11:32:56] <myname> huh
[11:33:50] <myname> if i try stripping it down, the warning vanished
[11:34:24] <kimundi> dbaupp: Wait, we'Re you talking about the pattern binding, or the &self method one?
[11:34:34] <dbaupp> kimundi: patterns
[11:34:54] <dbaupp> myname: do you have nested modules?
[11:34:54] <kimundi> dbaupp: Ah, my bad. Let me re-read what you wrote...
[11:35:44] <dbaupp> myname: as in, a nested `mod foo { ... }` within one file
[11:36:15] <myname> no
[11:37:11] <gour> if we eliminate rust's FP features, what would be some other compelling reason to use it instead of e.g. ada (2012)?
[11:37:44] <myname> ah
[11:37:47] <dbaupp> gour: does ada have linear/affine types & the regions/lifetimes that Rust has?
[11:37:54] * dbaupp is asking a genuine question
[11:38:05] <kimundi> dbaupp: Okay, yeah the situation would be similar to [~Trait] -> [&Trait], with rustc in theory being able to just transmute it without any overhead. But that of course depnds on trait objects keeping the same layout etc.
[11:38:15] <myname> stupid mistake from me :S
[11:38:19] <gour> dbaupp: i'm not so familar with ada to tell it
[11:38:36] <gour> let me ask in #ada
[11:38:46] <dbaupp> gour: heh :) (also, what's ada's stance on/support for lightweight concurrency?)
[11:39:08] *** Quits: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP) (Quit: victorporof)
[11:39:42] <dbaupp> kimundi: yeah, I don't particularly see a reason why ~Trait and &Trait would be any different (indeed the vtables would have to be the same for ~ -> & coercion to work at all)
[11:39:45] <gour> dbaupp: i know they say concurrency is built in the language, but not sure about 'lightweight' 
[11:40:07] <gour> let me try with another, possibly easier question...
[11:40:14] <dbaupp> kimundi: especially since ~T and &T (for concrete types) have the same runtime representation, so the data pointer would be the same between ~Trait and &Trait
[11:40:20] *** Quits: _Vi (vi@DCE8FCEE.CAA062BC.FDCAC96B.IP) (Ping timeout)
[11:40:23] <gour> initial rust was built in ocaml, what about rust vs ocaml?
[11:40:35] *** Joins: _Vi (vi@DCE8FCEE.CAA062BC.FDCAC96B.IP)
[11:40:46] <gour> i like seeing stuff like wxrust emerging in rust making it potentially possible to write gui apps in rust
[11:40:46] <dbaupp> gour: does ocaml have linear types & lifetimes?
[11:40:55] <gour> heh
[11:40:59] <dbaupp> gour: what's ocamls stance on/support for lightweight concurrency?
[11:41:02] <dbaupp> :P
[11:41:21] <dbaupp> (both serious questions, and AIUI, ocaml isn't very strong at the latter)
[11:41:37] * dbaupp <- has only used OCaml twice
[11:41:42] *** Joins: cadence (Mibbit@moz-AF09698D.sub-70-209-1.myvzw.com)
[11:42:21] <gour> if/when i get some answer, i'll reply back ;)
[11:44:07] <gour> one ocaml answer: no lifetimes, only a generational GC
[11:45:45] <gour> as far as l.c.: "yes, two libs with both the same sort of monadic interface... quite stable and well integrated in ocaml's landscape (lwt and async)
[11:46:49] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[11:46:58] <cadence> Hi. I'm working on a wrapper for GObject Introspection so that maybe someday in the future GTK+ Rust bindings can be automatically generated.
[11:47:12] <cadence> I am trying to wrap g_irepository_require(): https://developer.gnome.org/gi/1.38/gi-girepository.html#g-irepository-require
[11:47:25] <cadence> Here's what I have: pastebin.com/pbDBsyyS
[11:47:25] <eddyb9> gir?
[11:47:32] <sp3d> cadence: have you seen grust?
[11:47:49] <cadence> sp3d: Oh, no.
[11:48:04] <sp3d> it's lacking a generator but there are two in progress (no bets on which gets finished first)
[11:48:18] <eddyb9> there's valabind, I could prolly add a rust output to it
[11:48:19] <sp3d> https://github.com/mzabaluev/grust
[11:49:13] <gour> gtk is nice on linux, but support for other OS-es is pretty poor these days...not to speak about plans for gtk4
[11:49:20] <sp3d> eddyb9: the interesting part of gir bindings for rust is writing the native-looking wrappers properly (and autogenerating them)
[11:49:22] <sp3d> gour: yeah
[11:49:38] <cadence> sp3d: Yeah.
[11:49:50] *** Joins: Drup (Drup@moz-46119624.guwlan.gu.se)
[11:49:58] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[11:50:04] <cadence> I didn't know about grust, but I thought that I had a good idea for how to create nice Rust wrappers.
[11:50:14] <gour> as far as ada: "it has the concurrency mechanism implemented by the library authors ... in
[11:50:15] <cadence> And in any case, I am trying to learn Rust.
[11:50:17] <gour> ada's case, it has two: native threads (which are implemented by os threads,
[11:50:19] <gour> which are usually pretty lightweight) and fsu threads, which are mostly
[11:50:21] <gour> unknown to me
[11:50:30] <sp3d> cadence: what were you thinking w/r/t wrappers?
[11:50:30] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[11:50:49] <Drup> (I figure out I could come to answer ocaml question, instead of using IRC over gour :)
[11:51:20] <cadence> sp3d: It's "high level" in my mind right now, nothing concrete :)
[11:51:29] <sp3d> ok
[11:51:44] <gour> Drup: thanks
[11:51:56] <cadence> sp3d: Are you the author of grust?
[11:52:00] <sp3d> I don't know whether I want to try to point you at what grust has sketched out so far or avoid tainting your thought process
[11:52:09] <sp3d> no, mzabaluev is
[11:52:14] <cadence> Oh.
[11:52:26] <cadence> sp3d: Well, I have a self-contained question.
[11:52:34] <sp3d> I've been doing work on it locally but don't have anything solid on github yet
[11:52:38] *** Quits: reedlepee (Mibbit@EFDFDA63.8471470E.9D59D0D8.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[11:52:42] <cadence> If you look at pastebin.com/pbDBsyyS
[11:52:45] <cadence> http://pastebin.com/pbDBsyyS
[11:52:50] <cadence> I am having trouble compiling it.
[11:53:12] <cadence> This is my idea of a wrapper for g_irepository_require(): https://developer.gnome.org/gi/1.38/gi-girepository.html#g-irepository-require
[11:53:32] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[11:53:43] <sp3d> is this a top-level item or is it within an impl block?
[11:53:44] <cadence> Because the version string is optional, I thought that I wanted the version parameter to be Option<str>, basically.
[11:53:52] <gour> Drup: the question was how does ocaml compare with rust considering that initial implementation of rust was done in ocaml, and dbaupp replied with the questions which i pasted in the #ocaml
[11:54:09] <cadence> sp3d: I don't understand the question.
[11:54:27] <Drup> gour: IMO it's just not the same goal at all
[11:55:04] <sp3d> cadence: well, the function has a "self" argument
[11:55:04] <cadence> This is supposed to be the "high-level" part, if that is what you are asking.
[11:55:13] <cadence> Oh! Right.
[11:55:13] *** Quits: _Vi (vi@DCE8FCEE.CAA062BC.FDCAC96B.IP) (Connection reset by peer)
[11:55:16] <cadence> Sorry.
[11:55:23] <cadence> Yes, this is an implementation block.
[11:55:24] <gour> Drup: that i understand. i'm looking in the context of writing multi-platform gui app...
[11:56:02] <gour> it's frustrating find decent language to write GUI without C(++)
[11:56:19] <eddyb9> node-webkit
[11:56:23] <cadence> sp3d: The error that I am getting is: error: cannot move out of captured outer variable
[11:56:25] *** Joins: crembo (crembo@moz-C2B364AA.vc.shawcable.net)
[11:56:26] * eddyb9 ducks and runs
[11:56:40] <sp3d> eddyb9: at least it has libuv!
[11:57:18] <Drup> eddyb9: I know someone who wrote ocaml code, compile it to js_of_ocaml and ship it as a standalone multi plateform app using node-webkit
[11:57:23] <Drup> it works pretty well
[11:57:42] <eddyb9> why use ocaml when you have ES6 these days?
[11:57:44] * gour would like to avoid JS, if possible
[11:58:03] <cadence> What I am trying to do is if opt_version is Some(version), then I can `with_c_str` to get a C-string copy to pass to the extern function.
[11:58:06] <Drup> eddyb9 no trick question, please :3
[11:58:08] <eddyb9> but I'm just starting a language war here
[11:58:09] *** Quits: crembo (crembo@moz-C2B364AA.vc.shawcable.net) (Ping timeout)
[11:58:19] <cadence> But, if it's None, then I need to pass ptr::null()
[11:58:26] <sp3d> mm
[11:58:34] <eddyb9> Drup: ES6 vs ES5 (current JS)
[11:58:50] <cadence> By the way: https://github.com/cadencemarseille/rust-gobject
[11:58:55] <sp3d> cool
[11:59:21] *** jorendorff_away is now known as jorendorff
[11:59:46] <dbaupp> ChrisMorgan: https://github.com/mozilla/rust/pull/9938#issuecomment-26648696 the joys of markdown /o\
[12:00:02] <ChrisMorgan> Have I ever said I hate Markdown in comparison with reStructuredText?
[12:00:05] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Quit: anshin)
[12:00:18] <ChrisMorgan> I believe it's unspecified behaviour what happens in a case like that in Markdown.
[12:00:25] <dbaupp> ChrisMorgan: only once or twice :P
[12:00:58] <ChrisMorgan> Really?
[12:01:14] <eddyb9> ChrisMorgan: who needs reST?
[12:01:16] *** Joins: mindcat_ (mindcat@7042A70A.725FD9F7.DBA68950.IP)
[12:01:27] *** Quits: mindcat (mindcat@756E7557.C53DF77.D6E1F3C4.IP) (Ping timeout)
[12:01:29] <dbaupp> ChrisMorgan: for large values of 'once' and 'twice'
[12:01:43] * ChrisMorgan decided to shun both reStructuredText and Markdown for all parts of his website, writing in HTML for optimal control
[12:02:02] <Drup> and optimal PITA
[12:02:15] <eddyb9> that's like dropping Rust for C
[12:02:27] <eddyb9> or B
[12:02:49] <dbaupp> ChrisMorgan: write it in Rust! \o/
[12:03:04] <dbaupp> do html { do head { ... }; do body { ... } }
[12:03:11] <dbaupp> indentation is fun
[12:03:11] <ChrisMorgan> eddyb9: not a bit like it. Rust is *more* expressive than C; Markdown/reStructuredText are *less* expressive than HTML
[12:03:21] <ChrisMorgan> dbaupp: *shudder*
[12:03:29] <eddyb9> ChrisMorgan: assembly then
[12:03:45] <eddyb9> dbaupp: I think someone made a HTML parsing macro
[12:04:00] <eddyb9> no strings attached
[12:04:01] <ChrisMorgan> eddyb9: again quite different. HTML isn't that awful to write in, whereas Assembly is just plain silly.
[12:04:58] *** Joins: sebcrozet (sebcrozet@moz-C27D92D8.w193-252.abo.wanadoo.fr)
[12:04:58] <ChrisMorgan> eddyb9 : the HTML - parsing - as - a - macro is a toy example , a joke ; the tokenisation means it can ' t possibly be perfect .
[12:05:13] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[12:05:31] <FreeFull> What's wrong with assembly?
[12:05:32] <kimundi> haha
[12:05:35] <eddyb9> ChrisMorgan: probably not with an ES6 script
[12:05:51] <dbaupp> eddyb9: yep (/me submitted it to /r/rust :P )
[12:05:59] * dbaupp didn't write it though
[12:06:14] *** Joins: maik (maik@moz-7B47CD17.dip0.t-ipconnect.de)
[12:06:32] <eddyb9> ChrisMorgan: since that can have "raw" strings which could screw with Rust
[12:06:47] <ChrisMorgan> eddyb9 : it & rsquo ; s far worse than that ; there is no way to tell whether there were spaces between tokens or not , so you can & rsquo ; t represent text nodes accurately
[12:06:56] <sp3d> cadence: how do I compile this? I've literally never used rustpkg :x
[12:07:27] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[12:07:27] <cadence> sp3d: You have to check out the rust-glib and rust-gobject repos.
[12:07:44] <cadence> https://github.com/cadencemarseille/rust-gobject
[12:07:46] <sp3d> ah, I didn't see rust-glib
[12:07:50] <cadence> https://github.com/cadencemarseille/rust-glib
[12:08:09] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[12:08:59] <cadence> sp3d: And then within the `src` directory of the rust-gobject checkout, I created a symbolic link to the `src/glib` folder.
[12:09:08] *** Joins: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP)
[12:09:14] <cadence> Then `make install` within rust-gobject/
[12:09:28] <cadence> You might have varying success.
[12:09:39] <eddyb9> ChrisMorgan: are.... you being funny?
[12:09:47] <dbaupp> heh
[12:10:00] <eddyb9> I've seen a lot of weird crap on IRC, I'm not sure that's intentional
[12:10:03] *** Quits: pyrac (pyrac@moz-61FEC861.w83-114.abo.wanadoo.fr) (Quit: pyrac)
[12:10:19] <cadence> sp3d: I am working around an issue where rustpkg wants to write to /usr/local/rustpkg_db.json
[12:10:47] <cadence> sp3d: Oh, and you'll need pkg-config and the development packages for GLib and GObject Introspection.
[12:10:56] <sp3d> but of course
[12:11:02] <sp3d> $ git clone https://github.com/cadencemarseille/rust-glib/
[12:11:04] <sp3d> Cloning into 'rust-glib'...
[12:11:17] <sp3d> it seems to be doing an awful lot of nothing, strange--rust-gobject cloned fine
[12:11:19] *** Joins: pyrac (pyrac@moz-61FEC861.w83-114.abo.wanadoo.fr)
[12:11:37] <cadence> sp3d: You know, I have been having some trouble this morning connecting to GitHub.
[12:11:43] *** Joins: _Vi (vi@DCE8FCEE.CAA062BC.FDCAC96B.IP)
[12:12:02] <dbaupp> dammit github! just as I was pushing.
[12:12:06] <sp3d> haha
[12:12:36] <dbaupp> "Major service outage." :'(
[12:12:38] <sp3d> cadence: what line was it complaining about with the "move" error?
[12:12:54] <cadence> sp3d: `Some(version) => {`
[12:13:00] <cadence> ??
[12:13:03] <sp3d> ok, that was what I expected
[12:13:24] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[12:13:34] <cadence> What am I doing wrong?
[12:13:37] <sp3d> try matching some(ref version)?
[12:13:37] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[12:14:09] <sp3d> (and then doing the resultant cleanup needed to satisfy the compiler elsewhere, if any)
[12:14:56] <cadence> sp3d: Hey, that worked! (and promptly caused a compiler issue somewhere else :))
[12:15:00] <sp3d> :D
[12:15:11] <cadence> What does the `ref` keyword do there?
[12:15:35] <myname> the same as & in argument lists
[12:15:35] <kimundi> It binds the variable name to a reference to the value
[12:15:39] *** Quits: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP) (Ping timeout)
[12:16:03] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[12:16:07] <cadence> Oh, okay. Hmmm. I am not sure why I haven't needed that a lot before.
[12:16:08] <sp3d> ref needs to be a worse-kept secret
[12:16:11] <kimundi> myname: No? Or which position in a argument list do you mean?
[12:16:18] <myname> oh
[12:16:44] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[12:17:09] <kimundi> fn foo(&foo: &Bar) and fn foo(ref foo: Bar) both bind foo to type &Bar
[12:17:16] <kimundi> err, no
[12:17:25] <dbaupp> fn foo(&self) is like ref though
[12:17:28] <kimundi> fn foo(&foo: &Bar) binds foo to type Bar
[12:17:36] <kimundi> fn foo(ref foo: Bar) binds foo to type &Bar
[12:17:51] <kimundi> one adds an reference, one removes it
[12:18:24] <kimundi> Right, &self is special in that it is sugar for "self: &Self"
[12:19:09] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[12:19:21] * kimundi just feels compelled to explain everything in detail as soon as confusion appears
[12:19:39] * dbaupp thinks kimundi should write this down
[12:19:48] <eddyb9> why is Rust not here? http://en.wikipedia.org/wiki/List_of_multi-paradigm_programming_languages
[12:19:50] <kimundi> dbaupp: Where?
[12:19:56] *** Joins: ifoo (Mibbit@moz-3374819.dyn.nltelcom.net)
[12:20:07] <eddyb9> kimundi: wait, you can have & or ref in arguments, before the name?
[12:20:14] *** Joins: ksf (ksf@moz-55BDF8F7.adsl.hansenet.de)
[12:20:15] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[12:20:17] <kimundi> dbaupp: I don't have time to rewrite the tutorial atm :P
[12:20:18] <dbaupp> kimundi: on the internet
[12:20:23] <eddyb9> I know what they do in matching
[12:20:23] <cadence> eddyb9: News to me too
[12:20:27] <dbaupp> kimundi: in a gist would be fine
[12:20:29] <kimundi> eddyb9: Argument names are also patterns
[12:20:45] <dbaupp> kimundi: just code examples with a comment explaining each one like you said here
[12:20:49] <cadence> The tutorial makes no mention of & or ref before an argument name.
[12:20:56] <eddyb9> kimundi: that.... might blow my mind
[12:20:59] <kimundi> eddyb9: fn foo((a, b, c): (uint, int, u8)) { ... work with a, b, c directly }
[12:21:12] <eddyb9> aaah, I know about destructuring
[12:21:31] <eddyb9> kimundi: so is &/ref used before the name anywhere in known rust code?
[12:22:03] <eddyb9> or at least inside the rust repo itself
[12:22:10] <dbaupp> eddyb9: "the name"?
[12:22:26] *** Joins: Thiez (thiez@moz-BF669398.student.utwente.nl)
[12:22:31] <ChrisMorgan> eddyb9: the thing to realise is that the function arguments list is using the pattern grammar; that's why it gets these features: because they *are* useful elsewhere
[12:22:34] *** Joins: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr)
[12:22:41] <kimundi> eddyb9: It used in regular patterns, and & destructuring get's used often. No idea if ref appears in anywhere though, it would serve no purpose as the function could just take a reference directly most of the time
[12:23:08] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[12:23:35] <dbaupp> kimundi: fn bar(&Foo { x: ref x }: &Foo) might appear somewhere
[12:23:41] * dbaupp guesses not though
[12:23:44] <kimundi> For the record, the 'name' of an argument and the 'name' of a local variable are both called 'binding' :)
[12:23:52] <eddyb9> right
[12:23:54] *** Parts: Drup (Drup@moz-46119624.guwlan.gu.se) ()
[12:24:16] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[12:24:21] <ChrisMorgan> dbaupp: do you think that would be wise, though?
[12:24:23] <kimundi> and 'ref', 'ref mut' and soon 'mut' are binding modifiers
[12:24:39] <dbaupp> ChrisMorgan: depends on your definition of wise
[12:24:45] * dbaupp isn't too bothered by it
[12:24:52] <eddyb9> kimundi: so using ref is useless in arguments because you can add the reference to the type?
[12:25:09] <dbaupp> eddyb9: it depends where you use the `ref`
[12:25:15] <kimundi> eddyb9: Well, it would probably be useless most of the time because of that, yeah.
[12:25:16] <sp3d> fwiw: the only place ref shows up in the docs is http://static.rust-lang.org/doc/master/tutorial-borrowed-ptr.html#borrowing-and-enums
[12:25:23] <dbaupp> eddyb9: fn foo(ref bar: Type) is certainly useless
[12:25:33] <dbaupp> eddyb9: but the example I give above isn't
[12:25:36] <kimundi> eddyb9: But dbaupp made a good example where it get'S used as part of destructuring
[12:25:41] <eddyb9> okay, thanks
[12:25:42] <dbaupp> `fn bar(&Foo { x: ref x }: &Foo)`
[12:25:49] <ChrisMorgan> wise, n., a Good Idea™ which will not in any way confuse people or lead to misunderstandings of your code or death threats
[12:26:21] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[12:26:54] <ChrisMorgan> GitHub web interface appears to be up again.
[12:26:57] <dbaupp> sp3d: yeah, it's not very nice
[12:27:09] <maik> is there a c_bool?
[12:27:18] <kimundi> Patterns in function arguments are kind dangerous in regard to documentation, imo. Something that's just sugar for and local variable declaration inside the function body appears as part of the public api
[12:27:18] <maik> or can I just use bool?
[12:28:04] <dbaupp> rusti: let _x: std::libc::c_bool;
[12:28:07] -rusti- pastebinned 7 lines of output: http://ix.io/8BB
[12:28:31] <dbaupp> kimundi: for internal functions it's not so bad
[12:29:16] <kimundi> It's important imo that something like rustdoc strips patterns as much as possible, or ideally is toggleable between "type signatur only" and "code as written in the crate", eg fn(&uint, (u8, u8)) vs fn foo(&a: &uint, (mut b, ref mut c): (u8, u8))
[12:29:29] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[12:31:18] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[12:33:04] *** Joins: ksh8281 (Mibbit@93E02D7B.BACDE851.97B9B372.IP)
[12:34:57] <cadence> error: failed to find an implementation of trait std::c_str::ToCStr for ~str
[12:35:39] <cadence> I did not expect that.
[12:35:46] <sp3d> does it work for &str?
[12:35:54] *** Joins: andrei (Mibbit@moz-1A5EACF.dip0.t-ipconnect.de)
[12:36:48] <dbaupp> ChrisMorgan: https://github.com/mozilla/rust/pull/9952
[12:37:03] <cadence> sp3d: I think so.
[12:37:16] <sp3d> borrow away!
[12:37:28] <cadence> My problem is trying to with_c_str on Option<~str>
[12:37:50] <cadence> Or, I have an `Option<~str>`
[12:37:55] *** Joins: mihneadb (mihneadb@ECA1F581.33B6743.89C0DD0D.IP)
[12:37:58] <cadence> (that's my `opt_version`)
[12:39:00] <sp3d> hm
[12:39:10] <kimundi> cadence: take the Option<~str>, and then...
[12:39:12] <sp3d> rusti: Some(~"foo").unwrap().with_c_str(|x| x as uint)
[12:39:13] -rusti- 139769269100088u
[12:39:29] <ChrisMorgan> dbaupp: ooh, fancy Unicode arrows! I'd be considering s/nothing/*nothing*/, what do you think?
[12:40:03] <dbaupp> ChrisMorgan: sounds good
[12:40:21] <sp3d> it's incredible how rusti manages to be faster than a simple local rustc wrapper
[12:40:28] *** jorendorff is now known as jorendorff_away
[12:40:44] <sp3d> I guess this machine is getting a little old :x
[12:40:48] <kimundi> rusti: let y = Some(~"hello"); let x: Option<&str> = y.as_ref().map(|&s| s.as_slice());
[12:41:00] -rusti- pastebinned 17 lines of output: http://ix.io/8BC
[12:41:01] *** Joins: Yurume_ (Yurume@A826BD81.8A0DEF81.38747683.IP)
[12:41:29] <kimundi> rusti: let y = Some(~"hello"); let x: Option<&str> = y.as_ref().map(|s| s.as_slice());
[12:41:29] -rusti- <anon>:9:37: 9:38 warning: unused variable: `x`, #[warn(unused_variable)] on by default
[12:41:29] -rusti- <anon>:9          let y = Some(~"hello"); let x: Option<&str> = y.as_ref().map(|s| s.as_slice());
[12:41:30] -rusti-                                               ^
[12:41:30] -rusti- ()
[12:41:30] <dbaupp> ChrisMorgan: done
[12:41:57] <kimundi> cadence: ^ That way you get a Option<&str> from a Option<~str> if you need to :P
[12:42:22] <cadence> kimundi: I'll have to try this. Thanks.
[12:43:54] <cadence> error: type `std::option::Option<~str>` does not implement any method in scope named `as_ref`
[12:44:09] *** Joins: canhtak (jeremy@moz-44A7DE0.wl.t.ulaval.ca)
[12:44:12] <dbaupp> cadence: what version of rust?
[12:44:17] <cadence> 0.8
[12:44:38] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Quit: Leaving)
[12:44:41] *** Yurume_ is now known as Yurume
[12:44:52] <kimundi> Yeah, that landed after 0.8
[12:44:53] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[12:45:03] <cadence> Ah.
[12:45:11] <cadence> Is there a release date for 0.9?
[12:45:18] <cadence> (Or release schedule?)
[12:45:22] <kimundi> Release is all three months
[12:45:29] <sp3d> your best bet is to track master
[12:45:33] <kimundi> If you can, use git master ;)
[12:46:04] *** Joins: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com)
[12:46:05] <kimundi> However, this function is possible to write with what we had at 0.8
[12:46:13] <cadence> Yeah, I probably should. I have been using the Homebrew package. I think they support --head.
[12:46:27] <kimundi> let y = Some(~"hello"); let x: Option<&str> = y.map(|s| s.as_slice());
[12:46:31] <kimundi> cadence: ^ Try that
[12:46:39] *** Quits: mihneadb (mihneadb@ECA1F581.33B6743.89C0DD0D.IP) (Ping timeout)
[12:46:39] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Ping timeout)
[12:47:34] *** Quits: Ferreus (ferreus@moz-BD74DCDB.pools.arcor-ip.net) (Ping timeout)
[12:47:48] *** Joins: Ferreus (ferreus@moz-BD74DCDB.pools.arcor-ip.net)
[12:47:48] <andrei> Hi guys! A rust aprentice here :)
[12:47:57] <andrei> I'm trying to create a strcture like this
[12:48:01] <andrei> struct Order {   name: ~str,   type: ~str }
[12:48:20] <andrei> and then init an "object" like this
[12:48:20] <andrei> let o = Order{ name: ~"foo", type: ~"baz" };
[12:48:23] *** Quits: maik (maik@moz-7B47CD17.dip0.t-ipconnect.de) (Ping timeout)
[12:48:26] *** Joins: deio (chris@moz-3441F678.dynamic.tstt.net.tt)
[12:48:27] <andrei> but this doesn't work
[12:48:34] <cadence> kimundi: That worked. Thank you.
[12:48:41] <FreeFull> Try getting rid of the ~ before the "foo" and "baz"
[12:48:53] <FreeFull> I think strings are pointers already
[12:49:02] *** Quits: ifoo (Mibbit@moz-3374819.dyn.nltelcom.net) (Quit: http://www.mibbit.com ajax IRC Client)
[12:49:11] <dbaupp> FreeFull: no
[12:49:21] <dbaupp> FreeFull: (well, yes, but not in the correct way)
[12:49:21] <andrei> the compiler also complains about
[12:49:21] <andrei> rust_example.rs:2   name: ~str,
[12:49:25] <sp3d> you can't use "type" as a field name?
[12:49:34] <andrei> ok I will change it's name
[12:49:39] <dbaupp> rusti: let type = 1;
[12:49:46] -rusti- pastebinned 7 lines of output: http://ix.io/8BF
[12:50:36] *** Joins: mihneadb (mihneadb@C65012AA.10D2EED.5BC07656.IP)
[12:50:42] <kimundi> cadence: Great. :) For reference, in 0.8 `map` used a reference into the option, and `map_move` took the Option by value. In current git, only `map` exists and takes by value, and `as_ref()` can be used to convert a &Option<T> into a Option<&T>, which makes those operations composable
[12:50:44] <andrei> works
[12:50:45] <andrei> let o = Order{ name: ~"foo", categ: ~"baz" };   println!("order {:s} {:s}", o.name, o.categ);
[12:50:53] *** Joins: GeneralMaximus (ankur@5B6947.58E1DE7B.D2D1FAF0.IP)
[12:50:54] <andrei> *let o = Order{ name: ~"foo", categ: ~"baz" };   println!("order {: s} {: s}", o.name, o.categ);
[12:50:57] <andrei> thanks a lot
[12:51:13] <andrei> I still have a question, is this a proper way to use strings ?
[12:51:14] *** Quits: mihneadb (mihneadb@C65012AA.10D2EED.5BC07656.IP) (Input/output error)
[12:51:17] <andrei> I mean, using the ~ ?
[12:51:28] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[12:51:47] <kimundi> andrei: If the struct is supposed to wn the string, then yes
[12:51:54] <kimundi> andrei: own*
[12:51:55] *** Joins: mihneadb (mihneadb@C65012AA.10D2EED.5BC07656.IP)
[12:52:11] <sp3d> ugh, the frustrating part of writing syntax highlighting is that it could be used to red-highlight some syntax errors... but in doing so I think you end up dealing with a language (rust-with-errors) which is fundamentally more difficult to parse
[12:52:12] <andrei> yes it supposed, too.
[12:52:17] *** Quits: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com) (Ping timeout)
[12:52:23] *** Joins: mib_c9ym1x (Mibbit@moz-D3F04ADC.dip0.t-ipconnect.de)
[12:52:26] <andrei> to have only a ref to a string I will use the &
[12:52:27] <andrei> ?
[12:52:31] <kimundi> andrei: If it is only supposed to hold temporary references to string that are owned by something different, use &str
[12:52:43] <sp3d> andrei: right, or a ref to a substring of a string
[12:52:44] <andrei> I see
[12:53:08] <andrei> ~ for owning, & for reference
[12:53:17] <andrei> is & smth like a weak reference ?
[12:53:27] <kimundi> What is a weak reference?
[12:53:29] <andrei> I am familiar with Obj-C ARC
[12:53:39] <kimundi> A & is nothing dynamic
[12:53:40] <sp3d> it's a strong reference :) nothing can modify something to which an & reference currently exists
[12:53:54] *** Quits: mib_c9ym1x (Mibbit@moz-D3F04ADC.dip0.t-ipconnect.de) (Quit: http://www.mibbit.com ajax IRC Client)
[12:54:11] <kimundi> The compiler will refuse to compile if you try to modify and/or delete the ~str the &str points to
[12:54:14] <andrei> so both & and ~ increase the ref count
[12:54:18] <sp3d> but like kimundi said, it's not "ref-counting"; there's no runtime component to it
[12:54:20] *** Joins: rubberduck (Mibbit@moz-D3F04ADC.dip0.t-ipconnect.de)
[12:54:22] <kimundi> None of them do
[12:54:29] <kimundi> They don't use ref counts
[12:54:40] <kimundi> Both are statically known operations
[12:55:46] <andrei> hmmm ok, I will read a bit more about this, do you recomend any articles except rustforrubyists.com and the rust tutorial ?
[12:55:49] <FreeFull> I think ~ passes ownership from one structure to another when you do assigment
[12:55:55] <kimundi> A ~T only results in the rust-equivalent of a malloc and free call at the places where it is created and destroyed, and a &T is just a plain raw pointer at runtime, without any dynamic checks neccessary
[12:56:07] <dbaupp> andrei: http://words.steveklabnik.com/pointers-in-rust-a-guide
[12:56:20] <dbaupp> (from the author of Rust for Rubyists)
[12:56:47] <kimundi> FreeFull: Right, but that ownership pass is again just a statically know operations, that doesn't need any runtime instrumentation
[12:56:52] <rubberduck> hi all. i am a noob of rust. can someone ack that rust can access directx on windows? i want to eval rust for a media-application on windows.
[12:57:04] <andrei> yep, thanks! I did talk with Steve Klabnik at Rupy, where he had a talk on Rust.
[12:57:31] <andrei> thanks guys, I will continue digging rust and see where I get :D
[12:57:48] <kimundi> rubberduck: In theory it should work, in practice rust is pain under windows at the memoment, and you likely will have to write a lot of C++ -> C glue code (Or does directx have a C api?)
[12:58:16] <kimundi> rubberduck: OpenGL, however, that works fine at this point, at least under Unix ;)
[12:58:48] <dbaupp> andrei: oh, you went to the talk? how was it?
[12:59:25] <andrei> was a good introduction to it, not very advance but quite informative 
[12:59:45] <bjz> rubberduck: we have gl bindings, but you'd have to roll your own for DirectX
[12:59:53] *** Quits: cadence (Mibbit@moz-AF09698D.sub-70-209-1.myvzw.com) (Quit: http://www.mibbit.com ajax IRC Client)
[13:00:04] <bjz> rubberduck: it would be a most useful contribution though, if you wanted to tackle it!
[13:00:11] *** Joins: Frostman (Frostman@moz-176765C9.ip57.fastwebnet.it)
[13:00:54] *** Quits: doener (doener@moz-C68F600D.unity-media.net) (Quit: leaving)
[13:01:16] <kimundi> Okay, now I need help :P If I have a `& &mut Trait`, does anyone know how to cast that to a &Trait without using unsafe code?
[13:01:32] <kimundi> (Is that even safe?)
[13:02:03] <bjz> dereference it?
[13:02:09] <rubberduck> directly access COM-objects in rust isn't possible at this time? (directx is accessible thu com-objects).
[13:02:51] <Frostman> Hello, Rust supports Sockets?
[13:03:05] <kimundi> bjz: That gets me a  error: cannot borrow an `&mut` in a `&` pointer; try an `&mut` instead
[13:03:11] <FreeFull> I'm pretty sure a &mut A can be used everywhere an &A can
[13:03:11] <rubberduck> opengl has no interface to dvb
[13:03:14] <Frostman> How socket tcp
[13:03:16] <bjz> rubberduck: no idea, but somehow I doubt it
[13:03:23] <FreeFull> Ah, maybe not
[13:03:40] <rubberduck> as far as i know
[13:03:58] <kimundi> Afaik I can boorow a &mut T to a &T safely
[13:04:03] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[13:04:16] *** Quits: Jesin (Jessin_@moz-14627F8E.cc.lehigh.edu) (Ping timeout)
[13:04:27] <bjz> rubberduck: that would be something D has over Rust
[13:04:27] <bjz> rubberduck: at least at the moment
[13:05:14] <ChrisMorgan> Frostman: yes, Rust has TCP support; there are a few examples around such as on Stack Overflow and GitHub
[13:05:24] <ChrisMorgan> At present, it's in std::rt::io::net::tcp
[13:05:40] <bjz> rubberduck: dvb?
[13:06:41] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[13:07:23] <Frostman> Oh, thank you ChrisMorgan, I'm a beginner and I come from languages how Javascript and C# (basics)
[13:08:23] <myname> is there some method prefered to str.iter().find(|&x| x == ch).is_none()?
[13:08:34] *** Quits: KindOne (KindOne@moz-EE7A90AF.dynamic.ip.windstream.net) (Ping timeout)
[13:08:34] *** Joins: DeTeam (DeTeam@moz-76DDA368.dyn.broadband.iskratelecom.ru)
[13:08:56] <rubberduck> satelite broadcasting tv
[13:09:29] <sp3d> rusti: !"foo".iter().any(|&x| x == 'b')
[13:09:31] -rusti- pastebinned 7 lines of output: http://ix.io/8BH
[13:09:38] <benh> rusti: "foo".contains_char('x')
[13:09:39] -rusti- false
[13:09:44] <myname> great
[13:09:46] <sp3d> oh, nice
[13:09:46] <bjz> rubberduck: are there any C libraries out there? they'd be much easier to bind
[13:10:12] <Frostman> rusti ?
[13:10:24] <rubberduck> so i have to write c glue-code to access com-objects?! is there a huge penaltiy in calling c-code?
[13:11:26] <eddyb9> not really, depends what you're passing
[13:12:37] *** Joins: KindOne (KindOne@moz-42C8DA9E.dynamic.ip.windstream.net)
[13:13:00] <rubberduck> i think of passing pointer of structs around to access various data-streams
[13:13:57] <dbaupp> rusti: let mut x: int = 1; let y = &mut x; let z = &y; let w: &int = *z; // kimundi
[13:13:59] -rusti- pastebinned 7 lines of output: http://ix.io/8BK
[13:14:19] *** Joins: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP)
[13:14:56] <eddyb9> rubberduck: you can pass Rust structures to C code, and they will work directly. strings require copying, I think
[13:15:49] <kimundi> dbaupp: Exactly that is my problem right now :P
[13:16:25] *** Quits: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP) (Ping timeout)
[13:17:12] <rubberduck> @eddyb9: at most no string but pointer to bytes or something like that
[13:17:26] <dbaupp> kimundi: (my point was it doesn't apply to only trait objects)
[13:17:34] <kimundi> AH, yeah
[13:17:54] *** Joins: sinma (seb@moz-6A11C47C.fbx.proxad.net)
[13:17:56] <eddyb9> rubberduck: those are basically free
[13:17:58] <dbaupp> kimundi: similar to https://github.com/mozilla/rust/issues/9629
[13:18:43] <kimundi> dbaupp: That seems to be exactly the same problem, yeah
[13:19:19] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[13:20:07] <rubberduck> eddyb9: basically free means not penalty (like copying)?
[13:20:25] *** Quits: sinma (seb@moz-6A11C47C.fbx.proxad.net) (Ping timeout)
[13:20:27] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[13:21:01] <eddyb9> rubberduck: yupp
[13:21:44] *** Joins: deio_ (chris@moz-38C6BDE1.dynamic.tstt.net.tt)
[13:21:53] *** Quits: deio (chris@moz-3441F678.dynamic.tstt.net.tt) (Ping timeout)
[13:21:54] <eddyb9> rubberduck: Rust compiles to native code and it can do the C calls just like C code does them
[13:22:31] <eddyb9> rubberduck: if you link with LTO against your C wrapper, it can inline the code inside the C wrapper functions
[13:22:52] *** Joins: sinma (seb@moz-6A11C47C.fbx.proxad.net)
[13:22:54] <rubberduck> eddyb9: LTO?
[13:23:09] <eddyb9> rubberduck: link time optimization
[13:23:31] <rubberduck> eddyb9: ah, ok
[13:23:42] *** Joins: mib_i8wfw2 (Mibbit@B65DA69C.F6D2D5B.978FFCEF.IP)
[13:23:46] *** Quits: Frostman (Frostman@moz-176765C9.ip57.fastwebnet.it) (Quit: Arrivederci)
[13:24:26] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[13:24:48] <sinma> How to see jap documentation?
[13:24:55] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[13:25:59] <eddyb9> would anyone care for an extern "C++" that would mangle the names and types like C++?
[13:26:28] <eddyb9> (for a limited C++ ffi)
[13:26:30] *** Quits: Jackneill (Jackneill@moz-7E25A43F.pool.digikabel.hu) (Ping timeout)
[13:26:34] <kimundi> eddyb9: There is more to C++ support than that
[13:26:34] <sp3d> I thought "like C++" was toolchain-specific
[13:26:52] <kimundi> eddyb9: If it where taht easy, we would alredy have that :P
[13:27:17] <eddyb9> I know, but just mangling
[13:27:42] <eddyb9> I'm curious how hard some tasks are on top of that
[13:28:02] <rubberduck> eddyb9: i think the glue code is just to call the function-pointers from the com-object-vtable, so should be easily inlinable
[13:28:19] <dbaupp> eddyb9: we currently mangle similar to C++ already
[13:28:49] <sinma> It seems that the japanese tutorial is not accessible on the website, altought present in the repo
[13:29:33] <bjz> sinma: I'm not sure how up to date that translation would be
[13:29:59] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[13:30:18] <eddyb9> dbaupp: I know, but just the namespace part
[13:32:47] <nathan7> Oh, wonderful
[13:33:15] <nathan7> I wrote a bitvector just to find out extra has one
[13:33:26] <eddyb9> hehe
[13:33:32] *** Joins: mihneadb_ (mihneadb@ECA1F581.33B6743.89C0DD0D.IP)
[13:33:40] <nathan7> It was a fun exercise, though
[13:34:15] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[13:34:18] *** Joins: maik (maik@moz-7B47CD17.dip0.t-ipconnect.de)
[13:34:22] *** Quits: mihneadb (mihneadb@C65012AA.10D2EED.5BC07656.IP) (Ping timeout)
[13:34:47] *** Quits: autra (augustin@moz-BE76895F.fbx.proxad.net) (Ping timeout)
[13:34:52] <sinma> bjz: it seems not bad
[13:35:12] <eddyb9> kimundi: any idea how easy it is to use clang programatically?
[13:35:17] <sinma> bjz: I just want to see where my French translation will appear when it’s done
[13:35:51] <kimundi> kimundi: No idea
[13:36:16] *** Quits: martndemus (martndemus@moz-876695FC.sshunet.nl) (Ping timeout)
[13:36:49] <sinma> And btw, why it’s «?%» on master, and «{}» on the website? WTF https://github.com/mozilla/rust/blob/master/doc/po/tutorial.md.pot#L788
[13:36:58] <eddyb9> kimundi: to parse headers, extract a class (possibly templated), and create a LLVM call for each method, that you would wrap in a Rust impl fn
[13:37:01] <sinma> (for fmt! syntax extension)
[13:37:04] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[13:37:13] <eddyb9> fmt! is dead
[13:37:24] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Client exited)
[13:37:38] <sinma> ifmt has been renamed to fmt! as I heard
[13:38:07] <benh> {} is format! which is the future
[13:38:14] <sinma> Oh yes it’s format
[13:38:28] <sinma> But why the difference between the website and master?
[13:38:51] <sinma> My changes (tomorrow) to the doc appears almost immediately
[13:38:57] <eddyb9> kimundi: with templates, the safest way would be to interface with a C++ compiler, and clang should work on the same LLVM context
[13:39:34] <benh> I guess the translations aren't updated all the time
[13:39:39] <dbaupp> eddyb9: apparently libclang is very good to use programmatically
[13:39:53] *** Joins: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com)
[13:40:22] <sinma> benh: my changes accepted tomorrow upstream are already on the doc
[13:41:07] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[13:41:08] <eddyb9> but people would kill me if I brought clang into rust, too. we should be able to bind directly to the system libclang, once all llvm patched are applied upstream, no?
[13:41:16] <eddyb9> *patches
[13:41:24] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Quit: WeeChat 0.4.1)
[13:41:43] <sinma> benh: http://static.rust-lang.org/doc/master/tutorial.html#syntax-extensions and https://github.com/mozilla/rust/blob/master/doc/po/tutorial.md.pot#L788
[13:42:02] *** Quits: rubberduck (Mibbit@moz-D3F04ADC.dip0.t-ipconnect.de) (Quit: http://www.mibbit.com ajax IRC Client)
[13:42:37] <benh> I meant that maybe no is taking care of the .pot files
[13:43:02] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Ping timeout)
[13:43:30] <benh> the tutorial on the website is gonna be generated from https://github.com/mozilla/rust/blob/master/doc/tutorial.md , not from .pot files
[13:45:02] <dbaupp> eddyb9: there is a plan is actually to use libclang to allow something like `include "foo.h";` which would automatically bring in the structs/functions etc.
[13:45:19] <eddyb9> dbaupp: :D
[13:45:28] <dbaupp> eddyb9: we used to build clang along with LLVM for exactly that purpose, but it was disabled because we're not using it yet
[13:45:45] <dbaupp> eddyb9: (and yes, system clang once we've upstreamed everything)
[13:46:42] <sinma> benh: so it’s just not in sync
[13:47:19] <sinma> So I will write {} etc in pot files and make a pull request
[13:47:51] <benh> I assumed the pot files were autogenerated somehow
[13:48:06] <sinma> benh: yes, I was thinking about it
[13:48:45] <sinma> Anybody knows how the .pot files are generated?
[13:49:45] <eddyb9> hehe
[13:49:50] <eddyb9> sinma: you grow them
[13:50:27] <eddyb9> and then you harvest them each release
[13:51:11] <kimundi> And then you notice that they rotted in the meantime, and have to start from scratch :(
[13:51:34] *** Joins: zeuxcg (zeuxcg@moz-CBF2B401.pppoe.avangarddsl.ru)
[13:51:49] *** Joins: kvark (Mibbit@moz-F30E0473.cpe.net.cable.rogers.com)
[13:52:15] *** Quits: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com) (Ping timeout)
[13:53:41] <sinma> Ok so I must do the job «at hand»?
[13:56:12] <kvark> Hi! I'm getting the following compile error: "mismatched types: expected `&'a mut int` but found `@mut int` (expected &-ptr but found @-ptr)". Why doesn't it allow me to borrow it, and how to work around it?
[13:56:12] *** Quits: _Vi (vi@DCE8FCEE.CAA062BC.FDCAC96B.IP) (Connection reset by peer)
[13:57:25] <kvark> test case : https://gist.github.com/anonymous/7056197
[13:58:40] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[13:59:39] <sinma> kimundi, eddyb9: the way is to do it by hand, right?
[13:59:56] <kimundi> sinma: Sadly, I don't know :(
[14:00:26] <kimundi> kvark: The dirty secret is that @mut T -> &mut T coercion only happens at a function call and in variable bindings. In situations like this, you need to explicitly use one of those two
[14:00:39] <sinma> kimundi: free software projects are funny sometimes ;)
[14:00:57] <benh> Still can't borrow a @mut into a &mut that you return, apparently
[14:01:00] <benh> :(
[14:01:41] <kimundi> kvark: try returning { let tmp: &'a mut int = self.a; tmp }
[14:02:16] <kvark> kimundi: tried... doesn't work: looks like a temporary variable limits the scope
[14:02:32] <dbaupp> kvark: the lifetime of a @mut isn't connect to it's owner, so you can't do it
[14:02:36] <dbaupp> *connected
[14:03:03] <kimundi> kvark: &mut *self.a ?
[14:03:44] <kimundi> dbaupp: Wiat, this should work though? The &mut self would enable dynamic borrow checking, right?
[14:03:46] <kvark> dbaupp: but... until the owner is dead it holds @mut object, doesn't it? Unless, of course, it's a double-linked list of sorts
[14:04:34] <kimundi> err, I'm confusing the type here, but still
[14:04:47] <kvark> kimundi: &mut *self.a doesn't work either: "cannot root managed value long enough"
[14:05:02] <kimundi> hmm
[14:05:33] <kvark> kimundi: and in my actual case it doesn't even allow me to dereference the @mut object...
[14:06:01] *** Joins: martndemus (martndemus@moz-876695FC.sshunet.nl)
[14:06:47] <dbaupp> kimundi: not really; when does the dynamic borrow check scope end?
[14:07:00] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[14:07:02] <dbaupp> kimundi: (which is what kvark's error message is trying to say)
[14:07:17] <dbaupp> kvark: yes, but the exact @mut it holds can change
[14:07:31] <kimundi> yeah, I was confused about what part of the type is Qmut and what &mut
[14:08:54] <kvark> dbaupp: I expected &'a mut to root the value as immutable for the scope of 'a. There is a flaw in this logic, but I don't understand yet where exactly
[14:09:37] <kvark> oh, sorry, my original testcase was trying to root it as *immutable*. I changed it to mutable here to simplify things...
[14:11:36] <kvark> oh well, I guess I can't have @mut as immutable temporarily then.
[14:12:25] *** Joins: _Vi (vi@DCE8FCEE.CAA062BC.FDCAC96B.IP)
[14:14:29] <dbaupp> do you need an @mut?
[14:14:50] *** Joins: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP)
[14:15:02] <sinma> kimundi, benh, eddyb9: I guess http://po4a.alioth.debian.org/index.php.en is used here
[14:15:18] <sinma> Since there is a po4a.conf in the doc directory
[14:15:35] <kvark> dbaupp: yes, I want to store it internally as @mut, but then provide outside (temporarily) as immutable
[14:15:38] <benh> yeah, I don't have any experience with that :(
[14:16:12] *** Joins: Jackneill (Jackneill@moz-7E25A43F.pool.digikabel.hu)
[14:17:12] <sinma> benh: It’s pretty easy to use
[14:17:27] <sinma> benh: it seems, at least
[14:18:00] <Toussa> i have something wrong in this code
[14:18:02] <Toussa> https://gist.github.com/Einh06/0dceec06339c43e8524b
[14:18:42] <Toussa> my variable hello(owned pointer passed by reference) is somehow consumed, and don't know why
[14:18:56] *** Quits: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP) (Ping timeout)
[14:21:05] <kvark> Toussa: can you just use "hello + world" instead? append clearly consumes the value, according to the docs
[14:21:51] <benh> oh so the problem is that toussa's append wasn't called at all, the std::str::...append was?
[14:22:49] <Toussa> benh: actually i don;t know what is calling what, i will change the name see if its chaging something
[14:23:11] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[14:23:57] *** Joins: alonlevy (alon@moz-B0E66DB7.static.bezeqint.net)
[14:24:06] <Toussa> benh: this was the problem, std::~str::...append was called, instead for my Semigroup::append()
[14:24:18] <Toussa> benh: as you mentioned
[14:24:28] <benh> that sucks D:
[14:24:37] *** Quits: maik (maik@moz-7B47CD17.dip0.t-ipconnect.de) (Client exited)
[14:25:03] <Toussa> kindda. i renamed that dot,  (which is closer to the math representation)
[14:26:04] <Toussa> but it work now
[14:26:57] <Toussa> i will try to have this kind of Monoid now M: T->U
[14:27:11] <Toussa> and then going to Monads
[14:27:14] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[14:27:21] *** Quits: martndemus (martndemus@moz-876695FC.sshunet.nl) (Ping timeout)
[14:27:22] <Toussa> lets see hope this gonna work
[14:27:23] *** jorendorff_away is now known as jorendorff
[14:29:55] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[14:32:25] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[14:33:02] <FreeFull> Toussa: I tried doing functors before but had trouble making them properly polymorphic
[14:33:10] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[14:34:53] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[14:35:18] *** Quits: deio_ (chris@moz-38C6BDE1.dynamic.tstt.net.tt) (Quit: Ex-Chat)
[14:35:30] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Quit: Leaving.)
[14:35:33] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[14:36:27] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[14:38:29] <kimundi> rusti: let (a, b) = (&mut 5u, &mut 5u); a == b
[14:39:21] -rusti- pastebinned 7 lines of output: http://ix.io/8BR
[14:40:15] <sinma> benh, kimundi: that’s strange. po4a generate «"// {:?} will conveniently print any type println!(\"what is this thing: "
[14:40:48] <sinma> benh, kimundi: but in the tutorial.md, println! is on a new line
[14:41:37] <benh> i guess po4a doesn't grok the code blocks syntax :/
[14:42:03] <sinma> benh: do you think it will work?
[14:42:22] <benh> no idea. :(
[14:42:30] * sinma kill myself
[14:42:45] <sinma> hum… fail
[14:42:52] <cmr> please don't joke about that
[14:43:26] <sinma> The generated doc will be on doc/l10n/{fr,ja}, so in the website too?
[14:43:34] *** Joins: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP)
[14:44:06] <sinma> (I must change the links)
[14:44:17] *** Joins: Houm (Houm@2BD26E49.BEA97A19.B6260F18.IP)
[14:44:49] *** Quits: andrei (Mibbit@moz-1A5EACF.dip0.t-ipconnect.de) (Quit: http://www.mibbit.com ajax IRC Client)
[14:45:17] <sinma> cmr: I’m sorry, didn’t want to disturb
[14:45:26] <eddyb9> cmr: why?
[14:46:14] *** jorendorff is now known as jorendorff_away
[14:46:17] <cmr> eddyb9: I don't really want to explain myself but will in a query if you feel it is necessary.
[14:46:23] *** Joins: autra (augustin@moz-BE76895F.fbx.proxad.net)
[14:46:47] *** Quits: kvark (Mibbit@moz-F30E0473.cpe.net.cable.rogers.com) (Quit: http://www.mibbit.com ajax IRC Client)
[14:49:20] *** Joins: froglegstew (Mibbit@moz-C15C4576.bb.online.no)
[14:49:59] <froglegstew> I have trouble installing rust 0.8 on mac
[14:50:33] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[14:52:08] <froglegstew> make[1]: *** [obj.target/libuv/src/unix/fsevents.o] Error 1 make: *** [x86_64-apple-darwin/rt/stage0/libuv/libuv.a] Error 2
[14:53:04] <FreeFull> rusti: let (a, b) = (&mut 5u, &mut 5u); *a == *b
[14:53:05] -rusti- true
[14:53:45] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[14:54:09] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[14:55:02] *** Joins: martndemus (martndemus@moz-876695FC.sshunet.nl)
[14:55:35] <froglegstew> this is the first time I install Rust
[14:56:05] *** Joins: crembo (crembo@moz-C2B364AA.vc.shawcable.net)
[14:56:57] <froglegstew> how can I check that I got everything I need to install Rust?
[14:57:52] <froglegstew> seems I have an old version of g++ and clang++
[14:58:19] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[14:59:17] *** Quits: Toussa (Mibbit@moz-C9342773.adsl.alicedsl.de) (Quit: http://www.mibbit.com ajax IRC Client)
[15:00:11] *** Quits: aegeaner1 (Aegeaner@83533B47.BD9EA362.4446104D.IP) (Connection reset by peer)
[15:01:00] <bstrie> froglegstew: just try to make and see what happens :)
[15:01:26] <bstrie> ah I see
[15:01:27] <bstrie> you did
[15:01:29] <bstrie> hm
[15:01:36] <bstrie> not sure about macs
[15:01:43] <bstrie> froglegstew: what version of macos?
[15:01:44] <froglegstew> I am downloading an update now of Lion
[15:01:58] <froglegstew> I need to do this before I can update Xcode
[15:02:02] <bstrie> kk
[15:04:55] *** Joins: CarpNet (Alasdair@moz-EF831A5E.cable.virginmedia.com)
[15:06:35] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[15:06:58] *** Quits: Houm (Houm@2BD26E49.BEA97A19.B6260F18.IP) (Ping timeout)
[15:08:11] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[15:08:36] *** Joins: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com)
[15:08:39] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[15:09:58] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Ping timeout)
[15:16:02] *** Quits: froglegstew (Mibbit@moz-C15C4576.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[15:16:04] *** Joins: squiddy (squiddy@moz-722BD301.adsl.alicedsl.de)
[15:16:31] *** Quits: pyrac (pyrac@moz-61FEC861.w83-114.abo.wanadoo.fr) (Quit: pyrac)
[15:18:56] <kimundi> rusti: (@"foo", @("foo"), @(&"foo"))
[15:19:00] -rusti- pastebinned 7 lines of output: http://ix.io/8BU
[15:19:25] <kimundi> rusti: (@"foo", @("foo"))
[15:19:26] -rusti- (@"foo", @"foo")
[15:19:41] <FreeFull> rusti: ~~~~~~~~"foo"
[15:19:42] -rusti- ~~~~~~~~"foo"
[15:20:04] <FreeFull> rusti: ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#"foo"
[15:20:28] -rusti- pastebinned 6 lines of output: http://ix.io/8BV
[15:20:57] <FreeFull> rusti: ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"foo"
[15:21:03] -rusti- Killed
[15:21:03] -rusti- application terminated with error code 137
[15:21:13] <FreeFull> What's error code 137?
[15:21:31] *** Quits: _Vi (vi@DCE8FCEE.CAA062BC.FDCAC96B.IP) (Ping timeout)
[15:21:47] <eddyb9> well, it could be two things
[15:23:59] <Soft> Is RandomAccessIterator maybe little too inflexible
[15:24:17] <Soft> what if I want to implement containers that are not indexable by simple uint
[15:24:24] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[15:25:18] <engla> RandomAccessIterator is just experimental I think
[15:25:25] *** Joins: calatalee (Mibbit@moz-7A0697A1.east.sannet.ne.jp)
[15:25:32] <engla> also the indexing traits are still not redesigned
[15:26:11] * Ms2ger makes engla redesign them :)
[15:26:39] <engla> hehe
[15:26:52] *** Quits: mib_i8wfw2 (Mibbit@B65DA69C.F6D2D5B.978FFCEF.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:27:41] *** Quits: mindcat_ (mindcat@7042A70A.725FD9F7.DBA68950.IP) (Quit: Lost terminal)
[15:28:18] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[15:28:23] *** Joins: myra (myra@9B9315E1.A6025CA.1C37C358.IP)
[15:28:51] <myra> part
[15:28:54] *** Parts: myra (myra@9B9315E1.A6025CA.1C37C358.IP) ()
[15:33:28] <bstrie> does anyone know where there are any examples of overloading ops in the stdlib?
[15:33:36] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[15:33:44] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[15:34:08] <engla> libstd/vec.rs has the implementations of Add for vectors
[15:34:50] *** Quits: calatalee (Mibbit@moz-7A0697A1.east.sannet.ne.jp) (Quit: http://www.mibbit.com ajax IRC Client)
[15:35:49] <eddyb9> btw, you can have a variable-dimension vector (as in math/physics/gfx)
[15:37:09] <eddyb9> Vec<[u8, ..N]>, and you can alias Vec3 to be Vec<[u8, ..3]>
[15:37:49] <eddyb9> although, it might be possible to extract the type from the fixed length vector used in the generic
[15:37:50] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[15:38:30] <eddyb9> so Vec3d = Vec3<f64> = Vec<[f64, ..3]>
[15:38:34] <bstrie> are bigints integral only?
[15:43:01] <bstrie> or are they actually bignums
[15:43:11] <eddyb9> bstrie: int in their name == integer
[15:43:41] <eddyb9> bignum is kinda hard to do... how do you represent 1/3?
[15:45:19] <bstrie> eddyb9: with a numerator and a denominator :P
[15:45:27] <bstrie> man I dunno! I ain't the iee
[15:45:34] <bstrie> I'm sure they have a spec for this stuff
[15:45:35] <nathan7> e
[15:45:40] <bstrie> ieeeeee
[15:45:52] <bstrie> that's the sound of a standards body falling off a mountain
[15:45:54] *** Quits: crembo (crembo@moz-C2B364AA.vc.shawcable.net) (Client exited)
[15:46:01] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Quit: Leaving.)
[15:46:17] *** Joins: doomlord_ (servitor@moz-3F3192E5.range86-184.btcentralplus.com)
[15:49:55] <eddyb> bstrie: hahaha
[15:50:30] *** Joins: crembo (crembo@moz-C2B364AA.vc.shawcable.net)
[15:50:33] <eddyb> bstrie: that's Rational<BigInt>
[15:50:59] <eddyb> and it would work for some pathological cases with floating point
[15:51:08] <eddyb> bstrie: but now try to represent PI
[15:51:30] <Ms2ger> Irrational<BigInt>, clearly
[15:52:32] <Ms2ger> enum Irrational<T> { Pi, E, Root(T, T) }
[15:52:47] <Ms2ger> That should be enough irrationals for everybody
[15:52:53] <sp3d> hm, I thought there were a couple more than that
[15:53:02] <bstrie> I don't think so
[15:53:04] <Ms2ger> No important ones :)
[15:53:12] <bstrie> name any other irrational number
[15:53:18] <bstrie> I dare you
[15:53:22] <sp3d> Pi+E
[15:53:29] <Leo`> the "1 crate = 1 compile unit" thing is fine but... when you have to recompile the whole librustc crate for a single file modification...
[15:53:34] <Leo`> it becomes quite boring...
[15:53:48] *** Quits: GeneralMaximus (ankur@5B6947.58E1DE7B.D2D1FAF0.IP) (Quit: Computer has gone to sleep.)
[15:53:52] <eddyb> Ms2ger: you can actually compose those
[15:54:10] <Ms2ger> Hmm?
[15:54:32] <eddyb> Ms2ger: Rational<Irrational> will be Irrational
[15:54:44] <Ms2ger> That's pretty irrational
[15:54:44] *** Joins: GeneralMaximus (ankur@5B6947.58E1DE7B.D2D1FAF0.IP)
[15:54:46] <Ms2ger> (Sorry)
[15:55:02] <eddyb> you probably want Real to include Rational<Real> and Irrational
[15:55:22] *** Joins: calatalee (Mibbit@moz-D21B16F.dc.dc.cox.net)
[15:55:30] <eddyb> so now you can do PI/sqrt(5)*E
[15:55:31] *** Quits: sebcrozet (sebcrozet@moz-C27D92D8.w193-252.abo.wanadoo.fr) (Ping timeout)
[15:55:36] <Ms2ger> Yay!
[15:55:55] *** Joins: _Vi (vi@DCE8FCEE.CAA062BC.FDCAC96B.IP)
[15:56:03] *** Quits: cdidd (cdidd@moz-AD2A8F17.broadband.corbina.ru) (Input/output error)
[15:56:16] <eddyb> wait, that requires an algebraic (haskell guys will kill me) DAG-like type. include trigonometric functions and ln
[15:56:24] *** Joins: cdidd (cdidd@moz-AD2A8F17.broadband.corbina.ru)
[15:56:36] <eddyb> you end up with an unusable thing
[15:56:37] *** Quits: _Vi (vi@DCE8FCEE.CAA062BC.FDCAC96B.IP) (Connection reset by peer)
[15:57:01] <eddyb> (although you might be able to create a simple SMT solver on top of it, and use it for something obscure)
[15:57:34] <calatalee> Hello I tried installing rust from source as: git clone https://github.com/mozilla/rust.git && cd rust && ./configure && make install
[15:57:46] <calatalee> It fails as 686-apple-darwin11-llvm-g++-4.2: x86_64-apple-darwin/rt/libuv/libuv.a: No such file or directory make: *** [x86_64-apple-darwin/rt/stage0/librustrt.dylib] Error 1
[15:58:04] *** Quits: squiddy (squiddy@moz-722BD301.adsl.alicedsl.de) (Input/output error)
[15:58:13] <calatalee> does libuv need to be installed separately?
[15:58:14] *** Quits: doomlord_ (servitor@moz-3F3192E5.range86-184.btcentralplus.com) (Quit: Leaving)
[15:58:15] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[15:58:18] *** Joins: doomlord_ (servitor@moz-3F3192E5.range86-184.btcentralplus.com)
[15:58:20] <SiegeLord> Leo`: It's a big design problem of Rust that hasn't really been getting the attention it deserves
[15:58:24] <bstrie> calatalee: shouldn't need to be, no
[15:58:31] <bstrie> we seem to be having macos problems today
[15:58:43] <calatalee> okay.
[15:58:51] <bstrie> calatalee: what version of macos?
[15:59:00] * Ms2ger isn't too happy about full-crate compilation either
[15:59:07] <Leo`> SiegeLord: yeah
[15:59:08] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Connection reset by peer)
[15:59:16] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[15:59:27] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Client exited)
[15:59:33] <SiegeLord> I feel like Rust will get the reputation as very slow to compile, which is unfortunate
[15:59:48] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[15:59:52] <calatalee> it is Mountain lion.
[15:59:58] <Leo`> unless you split into multitude of crates
[15:59:59] <calatalee> Darwin Kernel Version 12.5.0: Sun Sep 29 13:33:47 PDT 2013; root:xnu-2050.48.12~1/RELEASE_X86_64 x86_64
[16:00:11] <Leo`> which is not necessarily a good thing either
[16:00:11] <Ms2ger> SiegeLord, that's an interesting use of the future tense there ;)
[16:00:27] <bstrie> calatalee: I don't have a mac myself, can't help :(
[16:00:36] <SiegeLord> Ms2ger: Well, it's not the first thing people mention about it yet ;)
[16:00:51] <calatalee> its alight..nothing urgent. 
[16:00:52] <Ms2ger> I guess that's "why do you have 9000 pointers?" :)
[16:00:53] <SiegeLord> For now it's the "dozens of pointers"
[16:00:57] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Connection reset by peer)
[16:01:00] <Ms2ger> :D
[16:01:03] <calatalee> it might get fixed future pull.
[16:01:03] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[16:01:39] <Ms2ger> Coming from a C++ project that has more custom pointers than rust has built-in... :)
[16:02:21] *** Quits: calatalee (Mibbit@moz-D21B16F.dc.dc.cox.net) (Quit: http://www.mibbit.com ajax IRC Client)
[16:02:35] <Leo`> are there people who know the Rustc source code here ?
[16:02:59] *** Quits: DeTeam (DeTeam@moz-76DDA368.dyn.broadband.iskratelecom.ru) (Quit: DeTeam)
[16:03:02] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Client exited)
[16:03:03] <Leo`> when I use span_err() to report an error, the error is reported but the compilation continues
[16:03:11] <Leo`> this is unfortunate... 
[16:03:21] <eddyb> huh?
[16:03:21] <sinma> SiegeLord: Rust compile faster than C++ at least ;)
[16:03:23] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[16:03:34] <eddyb> sinma: for the same amount of code?
[16:03:58] <SiegeLord> sinma: Is that true? And anyway, most of the time you re-compile after a change rather than compile from scratch
[16:04:09] <sinma> eddyb: It’s the impression that I have
[16:04:15] <cmr> It doesn't, I've measured.
[16:04:19] <sinma> But I haven’t done test
[16:04:25] <cmr> clang kicks our butt for the examples I've exampled.
[16:04:30] *** Joins: BitPuffin (isak@moz-98F8BF74.cust.tele2.se)
[16:04:41] <eddyb> Leo`: are you sure it's not "buffering" errors? although I remember seeing -> ! in those functions, which would mean they don't return
[16:04:49] <sinma> cmr: so it’s a false impression
[16:04:51] <sinma> xD
[16:05:07] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[16:05:12] <sinma> It might be possible to compile faster than C++, I hope?
[16:05:19] <cmr> Maybe.
[16:05:22] <Leo`> eddyb: dunno
[16:05:29] *** Joins: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com)
[16:05:33] <SiegeLord> No theoretical reason why compillation from scratch can't be faster
[16:06:03] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[16:06:27] <SiegeLord> There's been silly talk of decreasing compillation times 100 fold... but I'm not betting on that
[16:06:36] *** Quits: sinma (seb@moz-6A11C47C.fbx.proxad.net) (Quit: Konversation terminated!)
[16:07:06] <Amanieu> Most of the compilation time is spent in optimization, the problem is that rustc emits a lot more bitcode than clang for roughly equivalent code
[16:07:10] <Amanieu> At least from what I understood
[16:07:11] <bstrie> SiegeLord: er, the talk of decreasing compilation times 100-fold has always been "lol right, what are you smoking"
[16:07:14] *** Joins: sebcrozet (sebcrozet@moz-D8879CC3.w80-13.abo.wanadoo.fr)
[16:08:48] <SiegeLord> Ah, maybe it was just 10x
[16:08:52] <SiegeLord> Still not seing it :P
[16:09:26] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[16:10:12] <SiegeLord> This is a solution asking for a redesign/algorithmic improvement
[16:10:22] <SiegeLord> *problem
[16:10:29] *** Joins: pyrac (pyrac@moz-61FEC861.w83-114.abo.wanadoo.fr)
[16:10:35] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[16:11:54] <Leo`> the essential problem is not compilation time for a from-scratch compilation
[16:12:01] <Leo`> the problem is that you have to recompile to whole crate each time
[16:12:11] *** Quits: pyrac (pyrac@moz-61FEC861.w83-114.abo.wanadoo.fr) (Quit: pyrac)
[16:12:17] <Leo`> where a C++ compiler just recompiles your .cpp file and then redo the linking
[16:12:44] <SiegeLord> I'd be nice to have http://huonw.github.io/isrustfastyet/buildbot/ show more than the past few days...
[16:12:46] <Leo`> it's not a problem if a projet is split into small crates, but this is obviously not the case for Rust itself right now
[16:12:56] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[16:13:04] <bstrie> SiegeLord: ask dbaupp to add that feature :)
[16:13:07] *** Joins: _Vi (vi@DCE8FCEE.CAA062BC.FDCAC96B.IP)
[16:13:47] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[16:14:48] <myname> any way to make enumerate starting at a different value?
[16:15:55] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[16:17:03] *** Joins: jordyd (jordyd@moz-DB376585.seg32.ucf.edu)
[16:17:23] <SiegeLord> I guess http://huonw.github.io/isrustfastyet/mem/ has that red dashed line
[16:18:38] *** Quits: alonlevy (alon@moz-B0E66DB7.static.bezeqint.net) (Ping timeout)
[16:19:17] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[16:20:42] *** Quits: z0w0 (zack@moz-C877F2F7.lnse2.cha.bigpond.net.au) (Client exited)
[16:21:19] *** Joins: jxv (jxv@4732E7D7.2AB34561.9B38A32A.IP)
[16:21:56] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Ping timeout)
[16:22:53] <myname> got a way that works for me
[16:24:29] <LU324> what happens when a ~ or @ pointer fails to allocate its box? is there some way to handle the error?
[16:25:07] *** Joins: inc (inc@moz-8A9CD85B.client.mchsi.com)
[16:25:22] <LU324> also, when binding a C function that allocates a structure and can fail, what would be the recommended thing to do when it fails?
[16:25:34] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[16:25:38] *** Joins: Jesin (Jessin_@moz-14627F8E.cc.lehigh.edu)
[16:25:57] <SiegeLord> I'd use an Option
[16:26:09] <engla> LU324: libstd defines the malloc lang items for rust and calls abort on malloc failure
[16:27:27] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[16:27:47] *** Quits: crembo (crembo@moz-C2B364AA.vc.shawcable.net) (Client exited)
[16:29:06] <LU324> engla: ...so it's not possible to check if an allocation failed and do something else instead?
[16:29:25] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[16:29:59] <LU324> SiegeLord: that seems like a good idea, but why should it be possible to handle a C function failing to allocate but not a ~ pointer?
[16:30:25] *** Joins: crembo (crembo@moz-C2B364AA.vc.shawcable.net)
[16:30:27] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Client exited)
[16:30:37] <engla> LU324: it's not possible when using ~T or the vector ~[T] together with libstd in the current implementation
[16:30:48] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[16:31:44] <engla> It would be awesome if you could fail!() a task on OOM
[16:32:28] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[16:32:30] *** Joins: jeeq (jeeq@moz-F1922DA5.hsd1.ca.comcast.net)
[16:33:02] <LU324> what about a function that takes a type, and returns Some(~T) on success, or None on OOM? does that exist/is possible to write?
[16:34:07] <engla> you can write a type that works identically with ~T except it doesn't have the syntactic sugar
[16:34:10] <engla> so that's possible
[16:34:34] <engla> I guess you could also call the allocator yourself and transmute into ~T on success but that's fragile
[16:35:05] <engla> I don't know what allocates in the fail!() path still
[16:35:25] <engla> acrichto: do you know if it will be possible to use fail on OOM?
[16:36:39] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[16:37:47] *** Quits: dbaupp (Thunderbir@moz-54ADD9F4.lns20.syd6.internode.on.net) (Ping timeout)
[16:38:21] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[16:39:02] <bstrie> what is the rule for implicitly copyable things
[16:39:24] <bstrie> I can never remember
[16:39:35] <engla> everything except types with destructor, or ~T, or ~[T], or &mut  or &fn or ~fn
[16:40:07] *** Quits: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP) (Quit: victorporof)
[16:40:38] <bstrie> so basically everything :P
[16:40:51] <engla> no
[16:41:27] *** Quits: heftig (heftig@moz-895B551B.dip0.t-ipconnect.de) (Ping timeout)
[16:41:31] <engla> everything else is implicitly copyable including composites of implicitly copyable types
[16:41:44] *** Joins: heftig (heftig@moz-19B25E43.dip0.t-ipconnect.de)
[16:41:59] <bstrie> right, I mean that basically everything is implicitly copyable
[16:42:05] <engla> just regard &fn as a &mut fn in spirit, and then the rule is just that ~ and &mut "sigils" are not copyable
[16:42:09] <engla> yeah
[16:42:27] *** Quits: crembo (crembo@moz-C2B364AA.vc.shawcable.net) (Client exited)
[16:42:32] *** inc is now known as thequeerpastry
[16:47:06] <acrichto> engla: right now I believe that you cna
[16:47:19] <acrichto> engla: but it's a bit tricky b/c unwinding can run arbitrary code
[16:48:59] *** Quits: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com) (Ping timeout)
[16:49:07] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[16:49:41] <engla> oh that's true
[16:51:36] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:52:52] <myname> that sounds more like "nothing" to me
[16:56:52] *** Joins: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com)
[16:57:52] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[16:57:56] *** Joins: rveach (kvirc@moz-7E54B3A2.hsd1.ca.comcast.net)
[16:58:57] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[17:05:09] *** Quits: a__ (a__@moz-4CC03B10.nycmny.fios.verizon.net) (Ping timeout)
[17:06:57] *** Joins: Serow225 (Mibbit@moz-82D7696B.hsd1.mn.comcast.net)
[17:07:27] <indirect> so I feel especially dumb, but I cannot for the life of me find the place in docs.mk that generates the doc/index.html file
[17:07:50] <indirect> which redirects to doc/extra/index.html
[17:08:29] <Serow225> Hi all, I noticed that if you do a Google search for 'rust tutorial' the top two links are for old versions (0.3 and 0.7 I think?) which could be very confusing for newcomers :)
[17:09:02] <Serow225> Any ideas about the best place to log this? The github issue tracker doesn't seem like quite the right place.
[17:09:19] <Serow225> Not sure exactly what the best way to handle this situation would be...
[17:10:17] *** Joins: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP)
[17:11:37] <bstrie> Serow225: we use the issue tracker for stuff like this as well
[17:11:48] <bstrie> feel free to file a bug there
[17:12:00] <Serow225> bstrie, thanks will do.
[17:12:16] <acrichto> engla: but we already have the problem of failing while failing, so it may certainly possible to unwind on OOM
[17:12:49] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[17:15:51] <kimundi> error: expected outer comment
[17:15:58] <kimundi> ANyone know what that is about?
[17:17:06] *** Quits: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP) (Ping timeout)
[17:17:33] *** Joins: mib_0pg2yr (Mibbit@moz-7571F04.w90-24.abo.wanadoo.fr)
[17:17:53] *** Quits: ksh8281 (Mibbit@93E02D7B.BACDE851.97B9B372.IP) (Ping timeout)
[17:17:56] *** Joins: ercxx (ercan@moz-7CFF3469.dyn.optonline.net)
[17:18:43] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[17:18:47] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[17:18:57] *** Quits: Serow225 (Mibbit@moz-82D7696B.hsd1.mn.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[17:19:34] *** Joins: kphelps (kphelps@moz-8B098CA5.hsd1.ma.comcast.net)
[17:20:41] *** Quits: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com) (Ping timeout)
[17:21:18] *** Joins: gamefrick (Mibbit@B5E481BF.16EC52AF.62758839.IP)
[17:21:51] <gamefrick> http://www.bvog.com/?post=IDei1NEo9yg75Jjio
[17:22:40] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[17:25:48] *** Joins: a__ (a__@moz-4CC03B10.nycmny.fios.verizon.net)
[17:26:59] *** Parts: mib_0pg2yr (Mibbit@moz-7571F04.w90-24.abo.wanadoo.fr) ()
[17:29:22] *** Quits: gamefrick (Mibbit@B5E481BF.16EC52AF.62758839.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:30:24] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[17:30:49] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[17:31:46] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Client exited)
[17:31:59] *** Joins: ofeldt (ofeldt@moz-1564EB92.dip0.t-ipconnect.de)
[17:32:34] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[17:32:43] *** Quits: ofeldt- (ofeldt@moz-EC2920C3.dip0.t-ipconnect.de) (Ping timeout)
[17:33:26] *** Joins: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP)
[17:33:26] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[17:35:08] *** Joins: tgummerer_ (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[17:37:03] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[17:42:36] <LU324> what does this error mean? http://pastebin.com/uLjwWUUq
[17:43:16] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[17:43:21] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[17:43:35] <sfackler> LU324: http://static.rust-lang.org/doc/master/tutorial-ffi.html#segmented-stacks-and-the-linter
[17:43:42] *** Quits: Jesin (Jessin_@moz-14627F8E.cc.lehigh.edu) (Ping timeout)
[17:43:44] <LU324> but i guess that function wouldn't be a good idea anyway, for example because of structs with other ~ pointers in them, right?
[17:44:58] *** Quits: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com) (Ping timeout)
[17:45:38] <sfackler> i would also imagine that bad things will happen when the destructor of the returned value runs
[17:46:05] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Client exited)
[17:46:22] <sfackler> the memory's also uninitialized
[17:46:26] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[17:46:37] *** Joins: obk (Mibbit@moz-E977B938.red.bezeqint.net)
[17:46:43] <strcat> LU324: that's not actually safe because if T is managed, it will have a different representation
[17:47:09] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[17:47:57] *** Joins: Jesin (Jessin_@moz-14627F8E.cc.lehigh.edu)
[17:48:07] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[17:48:12] <obk> If I have a ~Foo, where struct Foo { bar: ~Bar, baz: ~Baz }, how do I get both the Bar and the Baz out of it (discarding the Foo and never using it again)? If I take them one at a time, Rust complains about partially moved values.
[17:48:52] <strcat> destructure it (but it seems pretty weird to have those ~ boxes)
[17:49:09] <FreeFull> Use match on it
[17:49:12] <obk> You mean, match on it?
[17:49:18] <obk> Ah. Right. Makes sense.
[17:49:26] <strcat> obk: no, not match
[17:49:30] <obk> ?
[17:49:35] <strcat> you can destructure in any pattern
[17:49:37] <FreeFull> Hmm, I thought you could destructure with both let and match
[17:49:47] <FreeFull> And that match was the recommended method
[17:49:51] <strcat> no
[17:49:56] <obk> So let Foo { bar: bar, baz: baz } = foo; ?
[17:49:56] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[17:50:06] <strcat> obk: yes
[17:50:11] <strcat> FreeFull: you can destructure in any pattern
[17:50:24] <strcat> you definitely shouldn't be using match if you don't want to match on more than one pattern
[17:50:27] <kimundi> no need for match
[17:50:27] <kimundi> let Foo { bar: ~a, baz: ~b } = foo(); .... use a and b
[17:50:48] <obk> Got it. Thanks!
[17:51:45] <kimundi> wut
[17:51:55] <kimundi> &'static str is a different type than &str?
[17:52:13] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[17:52:28] <kimundi> I get that the lifetime is different, but that I get two different typedescriptors for them is strange
[17:52:39] <obk> Isn;t every &'a str different (for different values of a)?
[17:52:54] <strcat> obk: yes
[17:53:42] *** Quits: Jesin (Jessin_@moz-14627F8E.cc.lehigh.edu) (Ping timeout)
[17:54:29] <kimundi> Right, but I didn't expect that that actually results in those two types getting different type descriptors - lifetimes don't change the typelayout after all
[17:55:28] <obk> I think &'static are _never_ dropped, so maybe there is a difference?
[17:55:43] <kimundi> Hm, that could be it... also &'static is sendable...
[17:56:24] <obk> Hmmm - I suppose there's no &'static mut, right?
[17:57:51] <kimundi> There is static mut, so I'm pretty sure you get an &'static mut from that
[17:58:26] <obk> And that is also sendable? Interesting...
[17:59:20] <kimundi> rusti: let x: &'static str = "foo"; fn foo<T:Send>(_: T){} foo(x);
[17:59:21] -rusti- ()
[17:59:40] *** Quits: themgt (themgt@moz-78E3D768.baf.movistar.cl) (Quit: themgt)
[17:59:45] *** Joins: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com)
[17:59:57] *** Joins: Jesin (Jessin_@moz-14627F8E.cc.lehigh.edu)
[18:00:29] *** Quits: oberstet (quassel@moz-1D5E0627.dynamic.mnet-online.de) (Client exited)
[18:01:12] <obk> rusti: let x: &'static mut x = "foo"; fn foo<T:Send)(_: T){} foo(x);
[18:01:13] -rusti- pastebinned 6 lines of output: http://ix.io/8C4
[18:01:47] <obk> rusti: let x: &'static mut x = "foo"; fn foo<T:Send>(_: T){} foo(x);
[18:01:50] -rusti- pastebinned 7 lines of output: http://ix.io/8C5
[18:02:08] <obk> rusti: let x: &'static mut str = "foo"; fn foo<T:Send>(_: T){} foo(x);
[18:02:10] -rusti- pastebinned 10 lines of output: http://ix.io/8C6
[18:02:11] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[18:02:18] <kimundi> I think you need to make a explict static mut, and use something different as a string
[18:02:33] <obk> Right...
[18:03:02] <obk> Anyway - if there is static mut, how does Rust prevent multiple mutable accesses? Maybe it boxes it (like a @, but without the GC)?
[18:03:17] <kimundi> rusti: static mut FOO: uint = 34; let x: &'static mut = &mut FOO; *x
[18:03:18] -rusti- pastebinned 6 lines of output: http://ix.io/8C7
[18:03:30] <kimundi> obk: It doesn't
[18:03:36] <kimundi> It's unsafe to access a static mut
[18:03:44] <obk> Ah.
[18:03:50] <kimundi> rusti: static mut FOO: uint = 34; let x: &'static mut uint = &mut FOO; *x
[18:03:52] -rusti- pastebinned 7 lines of output: http://ix.io/8C8
[18:03:59] <obk> So, only inside unsafe { ... }, I guess.
[18:04:19] <kimundi> rusti: static mut FOO: uint = 34; let x: &'static mut uint = unsafe {&mut FOO}; *x
[18:04:20] -rusti- 34u
[18:04:30] <kimundi> rusti: static mut FOO: uint = 34; let x: &'static mut uint = unsafe {&mut FOO}; *x = 498; *x
[18:04:31] -rusti- 498u
[18:04:33] <nmatsakis> kimundi: regarding type descriptors, I don't think it's very clearly defined when you would get a distinct type descriptor yet
[18:05:23] <nmatsakis> also, I don't think we'd very strongly considered what happens with &'static mut :) you need unsafe to *create* the ref, but then it can leak out (as you observed) --
[18:05:35] <nmatsakis> -- we should probably make it unsafe to assign to an &'static mut as well
[18:05:40] <acrichto> bstrie: ping
[18:05:47] <nmatsakis> -- but that's not enough
[18:05:49] <kimundi> nmatsakis: Indeed
[18:06:01] *** Quits: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net) (Client exited)
[18:06:03] <nmatsakis> I might be more inclined to just prevent the creation of an &'static mut in the first place
[18:06:18] <nmatsakis> though that could be too limiting, unless we provided another way
[18:06:37] <nmatsakis> i.e., I'd prefer if you could only get an unsafe ptr to a static mut value
[18:06:49] <nmatsakis> but right now the way you get unsafe ptrs is by converting a borrowed ptr
[18:07:07] <nmatsakis> which perhaps implies we need special rules regarding the upcast of &'static mut to &'a mut. unfortunate.
[18:07:25] * nmatsakis hates static mut variables.
[18:07:29] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Ping timeout)
[18:07:36] <obk> Unless they are boxed, like an ARC.
[18:07:45] <obk> Making them safe (and expensive).
[18:07:52] <strcat> can't have an Arc in a static mut
[18:08:01] <nmatsakis> I don't really know what boxed would mean in this case,
[18:08:04] <obk> No need for the RC, just for the A.
[18:08:07] <nmatsakis> but the whole idea of static mut was to provide cheap global variables.
[18:08:13] <nmatsakis> for unsafe use cases
[18:08:48] <kimundi> nmatsakis: Imo creating a &'static mut should require unsafe, but there might be situations where they are safe? Like, one task only singleton-pattern like situations. Are &mut sendable  in general?
[18:09:07] <nmatsakis> borrowed pointers are not sendable except for those with static lifetimes
[18:09:07] <obk> & aren't sendable AFAIK
[18:09:13] <obk> Except &'static
[18:09:18] <nmatsakis> but that rule was devised before static mut existed
[18:09:37] <nmatsakis> I don't know that there is much we can do about it
[18:09:39] <kimundi> nmatsakis: And possible future fork join modifications
[18:10:02] <obk> Well, since &'static mut is unsafe by definition, and "global", it makes little sense _not_ to allow to send it.
[18:10:20] <nmatsakis> well, we could make upcasting &'static mut unsafe, or possibly even illegal
[18:10:20] <obk> It would be as unsafe to access it then...
[18:10:26] <nmatsakis> it'd just be a weird little irregularity
[18:10:41] <obk> upcasting to &'static ? Sure, that would be unsafe.
[18:10:47] <kimundi> nmatsakis: If a &mut is not sendable in general, then I don't think a &'static mut would be unsafe in general
[18:10:50] <nmatsakis> no, upcasting to a shorter lifetime
[18:10:51] <obk> Because someone else might be modifying it under your feet
[18:11:12] <nmatsakis> you can't "upcast" away a mut, because there is no subtyping relationship
[18:11:28] <obk> Upcasting to shorter lifetime would have the same problem - no safety against modification "under your feet"
[18:11:32] <nmatsakis> I don't know that we can prevent upcasts from &'static mut though, not in the face of generic fns
[18:11:34] <obk> So yeah, should be unsafe.
[18:11:36] <kimundi> nmatsakis: Like, require unsafe to _create_ a &'static mut, but not to create it, imo :P. Well I don't really care anyway, but that seems to make sense to me
[18:11:53] <nmatsakis> kimundi: I'm not sure I understand what you mean by that last sentence
[18:12:17] <nmatsakis> I think the bottom line is that creating &'static mut is fraught with danger -- and we should either accept it, or say that you can't take the address of a static mut varibale
[18:12:22] *** Quits: thequeerpastry (inc@moz-8A9CD85B.client.mchsi.com) (Client exited)
[18:12:29] <nmatsakis> what we really need is a way to take the address and get back a *mut T
[18:12:43] *** Joins: thequeerpastry (inc@moz-8A9CD85B.client.mchsi.com)
[18:12:49] <nmatsakis> that'd be the proper thing
[18:13:17] <kimundi> Sorry, what I mean is: It makes sense to me to require unsafe to create a &'static mut, but using it should neither be forbidden, nor require unsafe, as there might be situations where you can offer a safe API through them
[18:13:31] *** Joins: themgt (themgt@moz-78E3D768.baf.movistar.cl)
[18:14:01] <nmatsakis> kimundi: I see, well, that IS the status quo. And it technically preserves the rule that you can't induce a data race or segfault without unsafe, but it bends it -- because the unsafe block may have come and gone
[18:14:14] <nmatsakis> it'd be nicer if that rule required that the unsafe block be somewhere on the stack at the time
[18:14:32] *** Quits: thequeerpastry (inc@moz-8A9CD85B.client.mchsi.com) (Ping timeout)
[18:14:41] <strcat> I think &'static mut would be too hard to use correctly
[18:14:44] <kimundi> nmatsakis: Well, it's not exactly the status quo ;)
[18:14:49] <kimundi> rusti: static mut FOO: uint = 34; let x: &'static mut uint = unsafe {&mut FOO}; *x = 498; *x
[18:14:49] -rusti- 498u
[18:15:05] <nmatsakis> kimundi: isn't that permitted by the rules you specified? you needed a unsafe block to create it
[18:15:10] <kimundi> The creation of the &'static mut does not require unsafe, just the access of the static mut
[18:15:26] *** Joins: thequeerpastry (inc@moz-8A9CD85B.client.mchsi.com)
[18:15:40] <nmatsakis> kimundi: I am confused. "unsafe {&mut FOO}" creates the ptr, and (seemingly) requires unsafe?
[18:15:44] <kimundi> Like, i'd require the unsafe block to span the let` too
[18:16:02] <kimundi> wait
[18:16:04] <kimundi> Arg, sorry
[18:16:22] <kimundi> I confused myself :(
[18:16:29] <bstrie> acrichto: pong
[18:16:32] *** Joins: gamakichi (Mibbit@moz-F15D0993.hsd1.va.comcast.net)
[18:16:34] <nmatsakis> strcat: main thing that concerns me about forbidding taking the address of a static mut variable is that I can imagine wanting to pass such an addr into a C library or something
[18:16:34] <kimundi> I think strcat is right, they are to hard to use xD
[18:16:45] <acrichto> bstrie: you were helping reedlepee get started recently, right?
[18:16:47] <nmatsakis> yeah I'm not a big fan
[18:16:52] <bstrie> acrichto: yep
[18:17:17] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[18:17:47] <acrichto> bstrie: I think I remember hearing that she was interested in library work, so https://github.com/mozilla/rust/issues/9958 may be something good to work on if she's looking for something to bite off
[18:17:48] <obk> It seems that creating a &'static mut is pretty safe - _using_ it in any way is unsafe (just like using a `*T`).
[18:18:24] <obk> Actually, if you think of `&'static mut` as a `*T` which is global, it is a pretty good way to think about it.
[18:18:32] <nmatsakis> obk: yeah, the problem is that we really can't prevent it from being used. The assumption is that `&mut T` values point at safe memory that obeys the rules...
[18:18:32] <gamakichi> I want to avoid the 'use of moved value' error. How can I copy a variable if I can't use .clone() ?
[18:18:47] <nmatsakis> obk: that's why I say that, to do this right, we really need a way to make a *T
[18:18:52] <bstrie> acrichto: thanks, I'll point her to it, but I think in the meantime we found another bug for her to work on. she's already gotten in her first patch towards fixing it
[18:19:04] <acrichto> bstrie: ah, carry on then! :)
[18:19:24] <nmatsakis> I guess we could just maybe a super special rule that says "&mut FOO" (where FOO is a static mut) yields a * pointer
[18:19:31] <nmatsakis> but that's tricky
[18:19:45] <nmatsakis> for now I'd rather just ban taking the address of static mut things until we know we need it :)
[18:19:57] <nmatsakis> at worst poeple can link a C library to create the memory
[18:20:16] * nmatsakis wouldn't really mind removing static mut either, but I guess they have their role to play
[18:20:49] *** Joins: TeXitoi (Mibbit@moz-EA958D66.texitoi.eu)
[18:20:52] <Ms2ger> Maybe once we have compile time evaluation
[18:21:03] <obk> nmatsakis: You don't need to make a `*mut T`, you just treat `&'static mut` the same as `*mut T` in every way that matters,
[18:21:12] <TeXitoi> hi
[18:21:16] <bstrie> TeXitoi: hello
[18:21:22] <kimundi> nmatsakis: Is there not *mut operator taking the address directly? I guess not, would conflict with the deref operator...
[18:21:26] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[18:22:16] <TeXitoi> I'd like to do something as stdin().line_iter().fold(~"", |accu, l| {accu.push_str(l); accu})
[18:22:35] <nmatsakis> kimundi strcat obk : https://github.com/mozilla/rust/issues/9959
[18:22:36] <TeXitoi> but I can't find anything as line_iter()
[18:22:50] <nmatsakis> obk: yeah but we can't do that, is what I'm saying.
[18:22:55] <bstrie> TeXitoi: did you find that line of code somewhere?
[18:22:55] <strcat> nmatsakis: I don't necessarily think we should forbid it
[18:22:59] <strcat> just that it isn't really a useful pattern
[18:23:09] <TeXitoi> no I writed it
[18:23:42] <strcat> nmatsakis: someone *might* have a use case for it, because the aliasing rule goes away if you immediately coerce them all to *mut
[18:24:05] <nmatsakis> strcat: feel free to comment on the bug. I can imagine use cases but would rather wait and add something if we need it then leave in a footgun.
[18:24:23] <bstrie> TeXitoi: our I/O situation is very confusing right now, it's all being reworked. I'm honestly not sure what it's possible to do with stdin right now
[18:24:24] <TeXitoi> I have that working, but It look so 0.7 ;)
[18:24:29] <TeXitoi> let mut res = ~"";     stdin.each_line(|l| {res.push_str(l); true});     res
[18:24:39] *** Quits: gamakichi (Mibbit@moz-F15D0993.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[18:25:00] <TeXitoi> OK, I'll stay with each_line, thanks
[18:25:01] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Connection reset by peer)
[18:25:59] <TeXitoi> another question: I'd like to transform a string to (ascii) uppercase letter, any hint?
[18:26:27] <nmatsakis> strcat: though thinking more I think that the current rules permit something like `&'static *x` where x is an unsafe ptr
[18:26:32] <nmatsakis> strcat: which is obviously equally problematic
[18:26:32] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[18:26:37] <kimundi> TeXitoi: Look into std::ascii
[18:26:42] <nmatsakis> strcat: but we could fix that...
[18:27:02] <kimundi> TeXitoi: You can either convert a string completly into ascii, or just map the ascii chars in a regualr unicode string to upper/lowercase
[18:27:09] <TeXitoi> kimundi: thx, I look
[18:27:10] <strcat> nmatsakis: an unsafe function could also just return a null pointer or something with an incorrect lifetime
[18:27:28] *** Joins: Satwiki (chatzilla@99093936.5EFAFDC8.EFB84E89.IP)
[18:27:36] <nmatsakis> strcat: yeah, I guess that's true, with transmute you can do anything
[18:28:06] <strcat> rusti: enum Void {} let x: Void = unsafe { std::cast::transmute(()) }; x
[18:28:07] -rusti- task '<unnamed>' failed at 'enum value matched no variant', /build/rust-git/src/rust/src/libstd/repr.rs:555
[18:28:07] -rusti- application terminated with error code 101
[18:28:10] <nmatsakis> strcat: that does persuade me otherwise, now I think we should just leave it -- perhaps add a lint
[18:28:11] <strcat> rusti: enum Void {} let x: Void = unsafe { std::cast::transmute(()) }; match x {}
[18:28:13] -rusti- pastebinned 12 lines of output: http://ix.io/8Cb
[18:28:27] <strcat> rusti: enum Void {} let x: Void = unsafe { std::cast::transmute(()) }; match x { _ => 1 }
[18:28:27] -rusti- 1
[18:28:44] <strcat> rusti: enum Void {} let x: Void = unsafe { std::cast::transmute(()) }; x == 5
[18:28:47] -rusti- pastebinned 7 lines of output: http://ix.io/8Cc
[18:28:49] <Satwiki> #rust Hello, I want to contribute to Rust. My area of choice is: Benchmarking. 
[18:29:06] <Satwiki> Please assist me as how to get started! Thanks in advance. 
[18:29:23] <strcat> rusti: fn foo(x: Void) -> ! { match x {} }
[18:29:25] -rusti- pastebinned 7 lines of output: http://ix.io/8Cd
[18:29:34] <strcat> rusti: enum Void {} fn foo(x: Void) -> ! { match x {} }
[18:29:35] -rusti- ()
[18:29:39] * strcat cackles
[18:29:57] <strcat> rusti: enum Void {} fn foo(x: Void) -> ! { match x {} } let x: Void = unsafe { std::cast::transmute(()) }; foo(x)
[18:30:00] -rusti- pastebinned 12 lines of output: http://ix.io/8Cb
[18:30:05] <strcat> ;[
[18:30:11] <strcat> rusti: enum Void {} fn foo(x: Void) -> ! { match x {} } let x: Void = unsafe { std::cast::transmute(()) }; foo(x); 2
[18:30:14] -rusti- pastebinned 12 lines of output: http://ix.io/8Cb
[18:30:15] <bstrie> strcat: is there a tag in the issue tracker for benchmarks
[18:30:22] <strcat> don't think so
[18:30:32] <strcat> it's nearly impossible to write correct benchmarks atm
[18:30:34] <strcat> no #[volatile]
[18:31:17] <bstrie> Satwiki: are you familiar with C++? in general we need benchmarks that directly compare C++ and rust. as strcat says, these won't be immediately useful... but one day they will be :)
[18:31:25] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[18:31:47] <Satwiki> Yes I am familiar with C++ and data structure as well, in case it is important too! :) 
[18:32:15] *** Quits: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com) (Ping timeout)
[18:32:29] <Satwiki> I have been setting up Rust in my machine. Please tell me how to start contribution. 
[18:33:08] <obk> Het, was the `rust` command removed in the head?
[18:33:58] <Ms2ger> obk, yes
[18:34:08] <bstrie> Satwiki: one sec
[18:34:53] *** Joins: StarLight (StarLight@moz-8F220F46.dynamic.avangarddsl.ru)
[18:35:03] <obk> Ms2ger: Just like that?
[18:35:31] <Ms2ger> It was unmaintained
[18:35:36] <obk> I actually dislike compilers which are also complex build system by themselves, on general principles.
[18:35:43] *** Quits: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Quit: ozten)
[18:35:46] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[18:35:57] <obk> It ends with tears when combined with a real build system of a complex project.
[18:36:10] <obk> So maybe removing `rust` is actually a good idea...
[18:36:52] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[18:37:07] <engla> `rust` wasn't complex though
[18:39:01] <kimundi> obk: You might confuse rust with rustpkg here, the latter of which still exists :)
[18:39:22] <kimundi> rust was just a launcher for rustc, rusti, rustpkg and rustdoc
[18:39:55] <bstrie> rust can be reinvented once rusti, rustpkg, rustdoc, rustfmt, etc all work
[18:40:04] <bstrie> until then it was just confusing having two ways to invoke rustc
[18:40:23] <kimundi> yeah
[18:40:51] *** Quits: thequeerpastry (inc@moz-8A9CD85B.client.mchsi.com) (Quit: )
[18:41:59] *** Quits: themgt (themgt@moz-78E3D768.baf.movistar.cl) (Quit: themgt)
[18:42:02] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Ping timeout)
[18:43:52] *** Quits: GeneralMaximus (ankur@5B6947.58E1DE7B.D2D1FAF0.IP) (Quit: Computer has gone to sleep.)
[18:45:36] *** Quits: autra (augustin@moz-BE76895F.fbx.proxad.net) (Ping timeout)
[18:47:06] *** Quits: BitPuffin (isak@moz-98F8BF74.cust.tele2.se) (Ping timeout)
[18:47:31] *** Joins: thequeerpastry (ibnc@moz-8A9CD85B.client.mchsi.com)
[18:47:52] *** Joins: BitPuffin (isak@moz-98F8BF74.cust.tele2.se)
[18:48:11] *** thequeerpastry is now known as ibnc
[18:49:41] *** Quits: BitPuffin (isak@moz-98F8BF74.cust.tele2.se) (Ping timeout)
[18:50:31] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[18:50:53] *** Quits: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[18:51:46] *** Joins: Adhaa (Adhaa@6F1DD6D9.83764248.55CD930E.IP)
[18:51:51] *** Quits: Adhaa (Adhaa@6F1DD6D9.83764248.55CD930E.IP) (Connection reset by peer)
[18:52:50] *** Quits: Satwiki (chatzilla@99093936.5EFAFDC8.EFB84E89.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 15.0.1/20120905151427])
[18:57:10] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[18:57:29] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[18:57:56] <adridu59> acrichto: r? https://github.com/mozilla/rust/pull/9960 to work around the issue I didn't move the css files in that PR
[18:57:57] *** Quits: _Vi (vi@DCE8FCEE.CAA062BC.FDCAC96B.IP) (Connection reset by peer)
[18:59:00] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[18:59:17] *** Quits: obk (Mibbit@moz-E977B938.red.bezeqint.net) (Quit: http://www.mibbit.com ajax IRC Client)
[18:59:24] *** Joins: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net)
[19:02:29] *** Joins: AmunRa (Fu@moz-3B13DA05.cable.virginmedia.com)
[19:02:53] *** Joins: BitPuffin (isak@moz-98F8BF74.cust.tele2.se)
[19:03:08] <AmunRa> Hello, I am trying out rust, launched the repl, typed a few things and it segfaulted. Where can I report bugs?
[19:03:32] <Eridius> you mean rusti? It's horribly broken
[19:03:34] <Eridius> don't use it
[19:03:49] <Eridius> in general, you can file bugs on github.com/mozilla/rust/issues, but the fact that rusti is broken is extremely well-known already
[19:04:07] <AmunRa> Ah, ok.. should it not be removed from the distribution then?
[19:04:25] <Eridius> if it's not fixed by 1.0, possibly.
[19:04:30] *** Quits: engla (engla@moz-E4A8CEF5.customer.cdi.no) (Ping timeout)
[19:04:33] <Eridius> but a lot of people hold out hopes that it can be fixed
[19:05:04] <AmunRa> I tend to be a bit more ruthless in my team, that's what branches in git are for :-)
[19:07:59] *** Joins: GeneralMaximus (ankur@5B6947.58E1DE7B.D2D1FAF0.IP)
[19:09:49] <kimundi> AmunRa: rusti has, in fact, been removed
[19:10:20] <kimundi> It doesn't exist in current git master anymore
[19:10:37] <kimundi> Eridius: ^ Fyi
[19:10:47] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[19:10:52] <AmunRa> Nice, sounds good :-)
[19:10:59] *** Joins: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net)
[19:11:10] <kimundi> AmunRa: However, there is still the rusti here :)
[19:11:16] <kimundi> rusti: "say hello"
[19:11:17] -rusti- "say hello"
[19:11:33] <kimundi> Ha! What a joker!
[19:12:17] *** Quits: martndemus (martndemus@moz-876695FC.sshunet.nl) (Ping timeout)
[19:12:44] *** Quits: GeneralMaximus (ankur@5B6947.58E1DE7B.D2D1FAF0.IP) (Quit: Textual IRC Client: www.textualapp.com)
[19:13:12] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[19:14:32] *** Joins: _Vi (vi@DCE8FCEE.CAA062BC.FDCAC96B.IP)
[19:16:26] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Ping timeout)
[19:16:26] *** Joins: jhenahan (jhenahan@moz-65B7D4EE.hsd1.vt.comcast.net)
[19:22:07] <AmunRa> Hello, I'm just getting started learning the language: Is there a place where I can read up about the rust runtime, who calls main, how and when name mangling happens and in general how code built with rustc and appears to other native code, say written in C (can I build static/dynamic libs, which linker is used, calling conventions, how do I start the runtime from C, etc.)
[19:22:41] <strcat> AmunRa: no, there isn't really a place you can read up on it
[19:23:12] <strcat> rust doesn't have to be used with the runtime though
[19:23:57] <AmunRa> does it depend on the C++ runtime?
[19:24:44] *** Joins: DeTeam (DeTeam@moz-76DDA368.dyn.broadband.iskratelecom.ru)
[19:24:58] <strcat> AmunRa: the rust runtime does, rust as a language doesn't
[19:25:12] <strcat> the 'runtime' is just defined in the standard library
[19:25:15] <strcat> and there's #[no_std]
[19:28:22] *** Quits: BitPuffin (isak@moz-98F8BF74.cust.tele2.se) (Ping timeout)
[19:31:23] *** Joins: autra (augustin@moz-BE76895F.fbx.proxad.net)
[19:34:02] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[19:34:02] *** ChanServ sets mode: +o tjc
[19:34:15] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[19:36:01] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[19:37:10] *** Quits: autra (augustin@moz-BE76895F.fbx.proxad.net) (Quit: by!)
[19:37:39] *** Quits: TeXitoi (Mibbit@moz-EA958D66.texitoi.eu) (Quit: http://www.mibbit.com ajax IRC Client)
[19:38:35] <mcpherrin> AmunRa: A lot of this stuff isn't really documented explicitly, so your three options are reading code, asking people, and trying to figure out the state of the world from past mailing list / github issues
[19:41:36] *** Joins: BitPuffin (isak@moz-98F8BF74.cust.tele2.se)
[19:44:10] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[19:45:52] <kimundi> rusti: do std::task::try { do spawn { fail2!() } }
[19:45:53] -rusti- task '<unnamed>' failed at 'explicit failure', <anon>:9
[19:45:54] -rusti- Err(())
[19:47:09] *** Joins: reedlepee (Mibbit@EC9A78E6.3CAE2EA8.9D59D0D8.IP)
[19:48:46] *** Quits: AmunRa (Fu@moz-3B13DA05.cable.virginmedia.com) (Ping timeout)
[19:48:51] <strcat> rusti: do std::task::try { do spawn { fail2!() } }
[19:48:52] -rusti- task '<unnamed>' failed at 'explicit failure', <anon>:9
[19:48:52] -rusti- Err(())
[19:52:28] *** Quits: DeTeam (DeTeam@moz-76DDA368.dyn.broadband.iskratelecom.ru) (Quit: DeTeam)
[19:53:09] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[19:57:11] *** Quits: BitPuffin (isak@moz-98F8BF74.cust.tele2.se) (Ping timeout)
[19:57:27] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[19:58:35] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[19:59:39] *** Quits: zeuxcg (zeuxcg@moz-CBF2B401.pppoe.avangarddsl.ru) (Ping timeout)
[20:00:05] *** Joins: pyrac (pyrac@moz-61FEC861.w83-114.abo.wanadoo.fr)
[20:01:31] *** Quits: Jackneill (Jackneill@moz-7E25A43F.pool.digikabel.hu) (Input/output error)
[20:02:56] *** Quits: reedlepee (Mibbit@EC9A78E6.3CAE2EA8.9D59D0D8.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:03:23] *** Joins: reedlepee (Mibbit@EC9A78E6.3CAE2EA8.9D59D0D8.IP)
[20:04:56] *** Joins: themgt (themgt@A766FE1A.D59CA935.886CAED5.IP)
[20:06:08] *** Quits: gour (gour@moz-26E5088E.adsl.net.t-com.hr) (Quit: WeeChat 0.4.1)
[20:06:52] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Ping timeout)
[20:07:26] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[20:08:49] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[20:09:15] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Ping timeout)
[20:09:18] *** Joins: martndemus (martndemus@moz-876695FC.sshunet.nl)
[20:11:16] *** Quits: martndemus (martndemus@moz-876695FC.sshunet.nl) (Ping timeout)
[20:14:45] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Ping timeout)
[20:20:08] *** Quits: ibnc (ibnc@moz-8A9CD85B.client.mchsi.com) (Client exited)
[20:20:11] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[20:20:29] *** Joins: ibnc (ibnc@moz-8A9CD85B.client.mchsi.com)
[20:21:36] *** Joins: zeuxcg (zeuxcg@moz-CBF2B401.pppoe.avangarddsl.ru)
[20:21:52] *** Joins: ibnc_ (ibnc@moz-8A9CD85B.client.mchsi.com)
[20:21:56] *** Quits: ibnc (ibnc@moz-8A9CD85B.client.mchsi.com) (Connection reset by peer)
[20:23:38] *** Quits: zeuxcg (zeuxcg@moz-CBF2B401.pppoe.avangarddsl.ru) (Ping timeout)
[20:25:17] <kimundi> Is it legal to put a type impl in another module than the type, as long as it is the same crate?
[20:25:36] *** Joins: mib_pa8q6y (Mibbit@moz-F15D0993.hsd1.va.comcast.net)
[20:27:25] <mark_edward> is anyone here familiar with regexes? i have a question a bit unrelated to rust i know, but i don't know where else to go
[20:27:32] <mib_pa8q6y> how can I copy a variable when I can't use .clone()?
[20:29:12] <kimundi> mib_pa8q6y: You can copy any type that is implicit copyable by just asigning them by value to a new variable. ANy type that is not implicit copyable gets moved instead, and you will need clone() or something that does the same as clone() to copy them
[20:29:20] <Ms2ger> mark_edward, somewhat... You can try us :)
[20:29:43] <mib_pa8q6y> I get errors because it's non-copyable
[20:29:47] <mark_edward> Ms2ger: are you familiar with django and how i matches URLs?
[20:29:51] <kimundi> Then you need clone
[20:29:53] <mark_edward> s/i/it
[20:29:55] <Ms2ger> No :)
[20:30:14] <mib_pa8q6y> the clone is not implemented for what I have to use
[20:30:21] <mib_pa8q6y> .....
[20:30:40] <mark_edward> Ms2ger: ok this is the regex i ahve: '^community/(?C<com_id>\d+)/posts/$'
[20:30:46] <kimundi> Then you have to implement it/fill a bug report/write a patch and send a pull request
[20:31:02] <mark_edward> Ms2ger: and i keep getting error, unexpected end of pattern
[20:31:39] <mib_pa8q6y> is there any way i can get the moved variable back?
[20:31:41] <kimundi> Or use unsafe code to copy it and have weird/buggy/unsafe behavior :)
[20:32:09] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[20:32:15] <Ms2ger> mark_edward, that's more complex than the bit of regexps I know :)
[20:32:19] <kimundi> Well, wherever you moved something to, you can in theory also move it back from
[20:32:46] <kimundi> As long as the function or whatever is written to return the value to you, at least
[20:33:08] <mib_pa8q6y> I'm not familiar with the language, and I don't really know how to bring the moved variable back
[20:33:11] <hansjorg> mark_edward: shouldn't the group be denoted by P<com_id> and not C?
[20:33:31] <nejucomo> kimundi: I don't know the answer to where impls may live wrt the type, and I filed a doc issue on it: https://github.com/mozilla/rust/issues/9743
[20:33:43] <hansjorg> I'm not proficient with Python regexes, but that's what I use in Django :)
[20:33:54] <kimundi> mib_pa8q6y: Could you paste your code somewhere? 
[20:34:25] <mark_edward> hansjorg: oh thank you!
[20:34:46] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[20:35:10] <nejucomo> mib_pa8q6y: Are you writing a generic function, where you don't know the concrete type, or are you attempting to copy a known concrete type?
[20:35:32] <kimundi> nejucomo: Afaik coherence is per-crate at the moment, and only relevant for traits, and implementing the trait in different modules from the type is fine.
[20:36:00] <nejucomo> I haven't written any code using conditions, but I don't grok them.  How can the trapping code possibly know how to handle an error deep within the context of some library?
[20:36:04] *** Quits: ibnc_ (ibnc@moz-8A9CD85B.client.mchsi.com) (Client exited)
[20:36:21] <cmr> nejucomo: because the set of valid condition handlers is documented.
[20:36:25] <mib_pa8q6y> wait. I need some time to transfer code from linux
[20:36:25] *** Joins: ibnc (ibnc@moz-8A9CD85B.client.mchsi.com)
[20:36:35] <nejucomo> kimundi: Ok.  Could you introspect as to how you know that?  ;-)
[20:36:46] <nejucomo> (-and then put the reference in that ticket?)
[20:36:47] *** Quits: ibnc (ibnc@moz-8A9CD85B.client.mchsi.com) (Connection reset by peer)
[20:37:03] *** Joins: ibnc (ibnc@moz-8A9CD85B.client.mchsi.com)
[20:37:09] <nejucomo> cmr: I understand the set of condition handlers is documented, but I don't know how I would write my own condition handler.
[20:37:20] <cmr> nejucomo: you can't
[20:37:23] <nejucomo> Maybe I should wait until I've tried/seen some examples.
[20:37:25] <cmr> You can only use the ones provided.
[20:37:26] <kimundi> nejucomo: Hm, I don't have any reference, just memories from having asked about that a few months ago :P
[20:37:36] <cmr> http://static.rust-lang.org/doc/master/tutorial-conditions.html
[20:37:37] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[20:37:53] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[20:38:00] <mib_pa8q6y> let mut acceptor = socket.listen().unwrap(); let shared_count = arc::RWArc::new( visitor_count );       for stream in acceptor.incoming() { 	let stream1 = stream; 	match stream1 	{ 		Some(s) =>  { 	let mut s1 = s; 				match s1.peer_name(){ 					Some(pn) => {println( fmt!("Peer address: %s \n", pn.to_str() ));}, 					None     => () 				} 			     } 		None     =
[20:38:02] <mib_pa8q6y> oops
[20:38:10] <mib_pa8q6y> how do i paste it 
[20:38:12] <kimundi> I recommend a pastebin website :P
[20:38:23] <kimundi> https://gist.github.com/
[20:38:32] *** Joins: BitPuffin (isak@moz-98F8BF74.cust.tele2.se)
[20:38:47] *** Quits: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP) (Ping timeout)
[20:38:56] <mib_pa8q6y> http://mibpaste.com/G0SUUH 
[20:39:04] * kimundi has the feeling he is overusing ":P" way to much
[20:39:07] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[20:39:13] <mib_pa8q6y> still kind of weird
[20:39:23] *** Joins: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP)
[20:39:24] <kimundi> Use https://gist.github.com/ :)
[20:39:29] <nejucomo> Ok, so this sort of makes sense: "The input type should therefore convey all relevant information to the condition handler. The output type should convey all relevant information for continuing execution at the site of error."
[20:40:23] <nejucomo> I was hung up on not understanding what the output might be for various APIs.  It seems like it must be sensitive to a specific context deep within some stack outside of the handler's understanding...
[20:42:10] *** Joins: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com)
[20:43:08] *** Joins: crembo (crembo@moz-C2B364AA.vc.shawcable.net)
[20:43:10] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[20:43:17] *** Quits: Jesin (Jessin_@moz-14627F8E.cc.lehigh.edu) (Quit: Leaving)
[20:43:43] <mib_pa8q6y> gist:7061288
[20:43:48] <mib_pa8q6y> how do i do it?
[20:43:51] <mib_pa8q6y> whatever
[20:43:55] <kimundi> just paste the url
[20:44:07] <mib_pa8q6y> https://gist.github.com/hsm5xw/2483da2178428e5d6cf4
[20:44:17] <kimundi> there we go :)
[20:44:37] <kimundi> So, let's see...
[20:44:51] *** Quits: crembo (crembo@moz-C2B364AA.vc.shawcable.net) (Ping timeout)
[20:44:58] <kimundi> Where does it error there?
[20:45:02] <mib_pa8q6y> oh. I inadvertently made it secret
[20:45:04] <mib_pa8q6y> https://gist.github.com/hsm5xw/7061288 
[20:45:10] <mib_pa8q6y> this is public
[20:45:50] <kimundi> secret or public doesn't matter as long as you paste the url :). public ones just can be searched for, and get listed under your username
[20:46:00] <mib_pa8q6y> ok ok
[20:48:17] <kimundi> AGain, where does it error there exactly?
[20:49:49] <mib_pa8q6y> https://gist.github.com/hsm5xw/9f75afdd4aa4f0c43148
[20:49:55] <mib_pa8q6y> sorry for taking so long
[20:50:59] <mib_pa8q6y> I think the error occurs because the variable is moved to get the peer ip address
[20:51:01] <kimundi> Okay, so you want to match on stream to print out the address, and then continue using stream afterwards, correct?
[20:51:04] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[20:51:08] <mib_pa8q6y> yeah
[20:51:26] <mib_pa8q6y> I tried the code at the end, and I got no error
[20:51:42] <mib_pa8q6y> I mean, moving getting the peer ip address stuff
[20:51:43] <kimundi> Okay, that's no problem. You just have to write the code so that you're working with references in the match, and not move stream inot it
[20:52:14] * kimundi looks into what needs to get changed
[20:52:27] *** Joins: zeuxcg (zeuxcg@moz-CBF2B401.pppoe.avangarddsl.ru)
[20:52:28] *** Joins: engla (engla@moz-E4A8CEF5.customer.cdi.no)
[20:52:28] <mib_pa8q6y> oh ..
[20:53:20] <kimundi> Does peer_name use &self or &mut self?
[20:54:19] *** Quits: zeuxcg (zeuxcg@moz-CBF2B401.pppoe.avangarddsl.ru) (Ping timeout)
[20:54:21] <mib_pa8q6y> no, I don't think so, but I don't exactly understood the question. isn't peer_name() just a function?
[20:54:46] <mib_pa8q6y> http://static.rust-lang.org/doc/0.8/std/rt/io/net/tcp/struct.TcpStream.html
[20:54:50] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[20:55:31] *** Joins: crembo (crembo@moz-C2B364AA.vc.shawcable.net)
[20:55:31] <kimundi> Ah, thx
[20:57:08] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[20:57:29] <kimundi> mib_pa8q6y: I think this might work: https://gist.github.com/Kimundi/4c6bddf896fd4943cd8e
[20:58:14] *** Quits: jeeq (jeeq@moz-F1922DA5.hsd1.ca.comcast.net) (Quit: jeeq)
[21:00:09] <mib_pa8q6y> thanks, let me try to see if I get a good result
[21:00:52] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[21:02:35] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[21:03:54] *** Quits: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr) (Quit: bholley)
[21:04:06] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[21:04:32] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Client exited)
[21:04:37] <mib_pa8q6y> ok, it works perfectly
[21:04:42] <mib_pa8q6y> Thank you very much !!!!!
[21:04:53] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[21:05:06] <kimundi> Glad I could help :)
[21:05:16] *** Joins: Jesin (Jessin_@moz-14627F8E.cc.lehigh.edu)
[21:05:36] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[21:06:31] <mib_pa8q6y> ok, so do we just use 'ref mut' to reference the variable that's non-copyable?
[21:06:39] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[21:07:04] *** Quits: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Quit: ozten)
[21:07:06] <kimundi> OKay, what happens here is this:
[21:07:25] *** Quits: pyrac (pyrac@moz-61FEC861.w83-114.abo.wanadoo.fr) (Quit: pyrac)
[21:07:46] <kimundi> if you match on a value, like in "match stream {Some(foo) => ...}"
[21:08:20] *** Joins: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr)
[21:08:24] <kimundi> Then Some(foo) is a pattern
[21:08:35] <mib_pa8q6y> right
[21:08:51] <kimundi> And the 'foo' is called a bind, which is basically a local variable that gets initialized with the value of the Some
[21:08:55] <kimundi> binding*
[21:09:10] <kimundi> But, there are binding modifiers
[21:09:20] *** Joins: martndemus (martndemus@moz-876695FC.sshunet.nl)
[21:10:09] <kimundi> If "foo" is a binding of type T, "ref foo" is a binding of type &T, and "ref mut foo" is aa binging of type &mut T
[21:10:39] <mib_pa8q6y> i see
[21:11:24] <kimundi> In the future "mut foo" will also be a valid modifer, and do the same as a "let mut foo = foo;"
[21:11:38] <kimundi> But that'S not possible yet
[21:11:43] <mib_pa8q6y> i see
[21:12:17] <mib_pa8q6y> ok, thank you very much ! I've been having trouble with that since noon
[21:12:27] *** Joins: alonlevy (alon@moz-3F073415.bb.netvision.net.il)
[21:12:27] <mib_pa8q6y> thanks again
[21:12:31] <kimundi> So, anyway, because in the match you only bound a reference to the content of the Option, 'stream' does not get moved in the match body
[21:12:56] *** Quits: Jesin (Jessin_@moz-14627F8E.cc.lehigh.edu) (Ping timeout)
[21:13:00] <kimundi> match is kinda smart about that
[21:13:47] <mib_pa8q6y> alright ... thanks again and have a nice day
[21:13:57] <kimundi> You too. :)
[21:14:15] *** Quits: mib_pa8q6y (Mibbit@moz-F15D0993.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[21:16:10] *** Joins: Jesin (Jessin_@moz-14627F8E.cc.lehigh.edu)
[21:16:29] <nejucomo> Hrm…  I forget the current (non-deprecated) macro for string formatting.
[21:16:35] <Ms2ger> format!()
[21:16:38] <nejucomo> Thanks.
[21:16:42] <Ms2ger> Np
[21:16:53] <nejucomo> The API docs for it are not in stdlib, right, because it's implemented in the parser?
[21:17:01] <FreeFull> If you are printing the string, you can use print! or println!
[21:17:16] <nejucomo> FreeFull: I'm not.  Also, does format!() result in a new ~str?
[21:17:22] <kimundi> yes
[21:17:26] <nejucomo> Ok.
[21:17:33] <nejucomo> Is there an API doc for it?
[21:17:44] *** Quits: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr) (Quit: bholley)
[21:18:02] <kimundi> yes
[21:18:09] <kimundi> std::fmt module doc comment
[21:18:16] <FreeFull> http://static.rust-lang.org/doc/master/std/fmt/index.html  Here is the documentation
[21:23:26] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[21:24:11] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[21:24:51] *** Joins: TeXitoi (Mibbit@moz-EA958D66.texitoi.eu)
[21:26:15] *** Joins: tjc (tjc@94FDE217.2A034839.284344F5.IP)
[21:26:15] *** ChanServ sets mode: +o tjc
[21:26:37] <TeXitoi> can I have any feedback on style/efficiency on http://texitoi.eu/~texitoi/k-nucleotide/k-nucleotide.my.rs (comparing to the c++ version http://texitoi.eu/~texitoi/k-nucleotide/k-nucleotide.my.cc)
[21:26:38] *** Quits: tjc (tjc@94FDE217.2A034839.284344F5.IP) (Quit: zzzzzzzzzz)
[21:26:43] <nejucomo> Thanks.
[21:27:14] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[21:27:46] *** Joins: tjc (tjc@94FDE217.2A034839.284344F5.IP)
[21:27:46] *** ChanServ sets mode: +o tjc
[21:27:48] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[21:28:48] <kimundi> TeXitoi: I'm only looking at the name here, but I think we have k-nucleotide benchmark implementations in our codebase.
[21:29:17] <TeXitoi> shure, that's just my first rust program
[21:29:31] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[21:29:36] *** Quits: mcpherrin (mimcpher@moz-345B5EBA.csclub.uwaterloo.ca) (Quit: leaving)
[21:29:45] <kimundi> I mean, you can compare to that too :)
[21:29:53] <TeXitoi> and it is to learn, and to compare with a equivalent implementation
[21:30:08] <TeXitoi> good idea
[21:30:15] <TeXitoi> in the git ?
[21:30:22] <kimundi> yeah
[21:30:31] <kimundi> src/test/bench
[21:30:41] <engla> no guarantees that the in-tree version is up to date and rustic though
[21:32:03] <kimundi> Right, I think our benchmarks are full of unsafe code
[21:32:08] *** Joins: berleon (leon@moz-755E8ABA.superkabel.de)
[21:32:11] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[21:32:18] <kimundi> TeXitoi: Stylistaically, your code seems good
[21:32:23] *** Joins: McPherrin (mimcpher@moz-345B5EBA.csclub.uwaterloo.ca)
[21:32:48] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: night)
[21:32:55] <engla> the in-tree version doesn't compile I think :(
[21:32:57] <kimundi> I also don't see anything that's slower than neccessary
[21:33:03] <TeXitoi> I do not like the 'if match' pattern in get_map
[21:33:11] *** Quits: cade (cade@66A6305B.C2D6DAC0.9510F13D.IP) (Ping timeout)
[21:33:30] *** Quits: stvc (quassel@DDF9BE86.571456BD.9510F13D.IP) (Ping timeout)
[21:33:30] *** Quits: Tobbi (Tobbi@moz-CAA98E97.xxx) (Ping timeout)
[21:33:39] <kimundi> TeXitoi: You could move the true case behind the None =>
[21:33:48] *** Quits: km (quassel@moz-777F24DE.kevinmehall.com) (Ping timeout)
[21:33:56] *** Quits: wting (wting@4F978BD6.5564A9BA.9510F13D.IP) (Ping timeout)
[21:33:56] *** Quits: dg (dg@moz-AF6F3E94.com) (Ping timeout)
[21:33:56] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Ping timeout)
[21:34:07] <TeXitoi> no, the map is frosen
[21:34:15] <kimundi> Oh, right
[21:35:01] *** Joins: stvc (quassel@DDF9BE86.571456BD.9510F13D.IP)
[21:35:09] *** Joins: km (quassel@moz-777F24DE.kevinmehall.com)
[21:35:20] *** Joins: Tobbi (Tobbi@moz-CAA98E97.xxx)
[21:35:23] *** Joins: dg (dg@moz-AF6F3E94.com)
[21:35:56] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[21:36:17] *** jack is now known as jack|plane
[21:36:21] <kimundi> replace the match with res.find_mut(&key).map(|nb| *nb = *nb + 1).is_some() maybe?
[21:36:43] <kimundi> not really shorter though...
[21:36:43] *** Quits: berleon (leon@moz-755E8ABA.superkabel.de) (Client exited)
[21:36:44] <TeXitoi> and for get_sequence, it seems not too much 'rust 0.8', but io seems outdated, and I didn't find how to use std::rt::io
[21:37:05] <kimundi> Yeah, that's to be expected
[21:37:13] <kimundi> new IO is still not good, and old never was
[21:37:19] *** Joins: wting (wting@4F978BD6.5564A9BA.9510F13D.IP)
[21:37:30] *** Joins: cade (cade@66A6305B.C2D6DAC0.9510F13D.IP)
[21:37:44] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[21:38:19] <TeXitoi> kimundi: funny line ;) seems quite strange to map on an Option ;)
[21:38:40] <benh> for-loops over Options!
[21:39:53] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[21:39:54] *** ChanServ sets mode: +ao brson brson
[21:41:30] <kimundi> rusti: Some(5u).iter().map(|&x| x + 100).to_owned_vec()
[21:41:35] -rusti- pastebinned 13 lines of output: http://ix.io/8Cl
[21:43:29] *** Quits: crembo (crembo@moz-C2B364AA.vc.shawcable.net) (Client exited)
[21:45:09] *** Quits: tjc (tjc@94FDE217.2A034839.284344F5.IP) (Quit: zzzzzzzzzz)
[21:49:18] *** Joins: crembo (crembo@moz-C2B364AA.vc.shawcable.net)
[21:49:35] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[21:50:11] <TeXitoi> if ! res.find_mut(&key).mutate(|nb| {*nb = *nb + 1; nb}) {             res.insert(key, 1);         }
[21:50:23] <TeXitoi> not perfect but better
[21:50:36] *** Quits: crembo (crembo@moz-C2B364AA.vc.shawcable.net) (Client exited)
[21:51:21] *** Joins: crembo (crembo@moz-C2B364AA.vc.shawcable.net)
[21:54:51] *** Joins: lkuper_ (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[21:55:10] *** Quits: earlzlap (earlz@moz-9E279EAD.neo.res.rr.com) (Ping timeout)
[21:58:10] *** Joins: berleon (leon@moz-755E8ABA.superkabel.de)
[21:59:07] *** Joins: tefter (tefter@B5D119DC.B856A0A1.73804765.IP)
[22:01:50] *** Joins: ambimorph (amber@moz-F1964F26.hlrn.qwest.net)
[22:04:11] *** Quits: tgummerer_ (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[22:04:21] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[22:06:17] *** Joins: q66_ (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[22:07:17] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[22:07:37] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[22:07:51] *** Joins: Florob (Florob@moz-39532932.de)
[22:08:00] *** Quits: Ms2ger (Ms2ger@moz-92A79B55.adsl-dyn.isp.belgacom.be) (Ping timeout)
[22:13:27] *** Quits: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net) (Quit: Leaving.)
[22:14:25] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[22:15:19] *** Quits: martndemus (martndemus@moz-876695FC.sshunet.nl) (Ping timeout)
[22:15:28] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[22:16:06] *** Joins: Ms2ger (Ms2ger@moz-C96856.adsl-dyn.isp.belgacom.be)
[22:16:41] *** McPherrin is now known as mcpherrin
[22:17:14] <mark_edward> [o__o]: ping
[22:17:14] <[o__o]> Are you in need of my services, mark_edward?
[22:17:15] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[22:17:29] <mark_edward> [o__o]: are you a person?
[22:17:40] *** Quits: Ms2ger (Ms2ger@moz-C96856.adsl-dyn.isp.belgacom.be) (Input/output error)
[22:18:00] <kimundi> (he isn't)
[22:18:11] <strcat> it? ;p
[22:18:49] <mark_edward> what is it?
[22:18:50] *** Quits: CarpNet (Alasdair@moz-EF831A5E.cable.virginmedia.com) (Connection reset by peer)
[22:19:01] *** Joins: CarpNet (Alasdair@moz-EF831A5E.cable.virginmedia.com)
[22:19:20] <mark_edward> it looks like a robot (it's nick)
[22:19:43] <kimundi> It's the botbot.me bot
[22:19:59] *** Quits: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP) (Ping timeout)
[22:20:00] <kimundi> https://botbot.me/mozilla/rust
[22:20:19] <mark_edward> oh cool!!! botbot.me is such a nice website!
[22:20:47] <eddyb9> motmot.be
[22:21:41] *** Joins: hickorynut (Mibbit@moz-B167420D.eugn.qwest.net)
[22:22:02] <devbug> Has anyone in here used LLVM for a JIT?
[22:22:53] <hickorynut> I am new to IRC, testing...
[22:23:00] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[22:23:20] *** Joins: dbaupp (Thunderbir@moz-54ADD9F4.lns20.syd6.internode.on.net)
[22:23:38] <hickorynut> okay, last time I said something, I received the message "Cannot send to channel: #rust"
[22:24:22] <Earnestly> Probably weren’t registered with the services
[22:24:35] <hickorynut> ah
[22:25:08] <Ralith> devbug: of?
[22:25:29] <devbug> Ralith: hmm?
[22:25:46] <devbug> As a native codegen, basically
[22:25:46] *** Joins: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP)
[22:26:57] <devbug> I guess the best bet is to look over Rubinus
[22:27:11] <Ralith> devbug: perhaps the LLVM channel would be a better place to ask?
[22:27:37] <devbug> Ralith: for sure, but consumers usually know more
[22:27:37] *** Joins: mib_x2osmv (Mibbit@moz-F7C7061F.f8.protectedgroup.com)
[22:27:44] *** Quits: skade (skade@30BBD5E6.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:27:48] *** Quits: mib_x2osmv (Mibbit@moz-F7C7061F.f8.protectedgroup.com) (User has been banned from Mozilla (no spamming here))
[22:28:00] <Ralith> I know that a lot of LLVM consumers hang out in #llvm, for one.
[22:28:09] <devbug> Fair enough.
[22:28:21] <Earnestly> Man, “consumer” used to be a negative term a few years ago.  Brave New World, etc.
[22:29:43] <Earnestly> “End don’t mend”, “More stiches, less riches”.  heh
[22:30:03] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[22:30:13] <devbug> Earnestly: it's still there; connotations haven't changed.
[22:30:40] *** Quits: ambimorph (amber@moz-F1964F26.hlrn.qwest.net) (Ping timeout)
[22:37:04] *** Quits: cdidd (cdidd@moz-AD2A8F17.broadband.corbina.ru) (Input/output error)
[22:37:04] <dbaupp> rusti: main()
[22:37:05] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[22:37:20] <dbaupp> acrichto: didn't stack overflow aborting land?
[22:37:47] <dbaupp> ... oh, rusti doesn't update instantly. (obviously...)
[22:37:49] * dbaupp is silly
[22:38:07] *** Parts: TeXitoi (Mibbit@moz-EA958D66.texitoi.eu) ()
[22:38:59] *** Quits: kphelps (kphelps@moz-8B098CA5.hsd1.ma.comcast.net) (Quit: Lost terminal)
[22:39:11] *** Joins: cdidd (cdidd@moz-5D81FD0F.broadband.corbina.ru)
[22:42:30] *** Quits: ibnc (ibnc@moz-8A9CD85B.client.mchsi.com) (Client exited)
[22:42:51] *** Joins: ibnc (ibnc@moz-8A9CD85B.client.mchsi.com)
[22:44:38] *** Quits: ibnc (ibnc@moz-8A9CD85B.client.mchsi.com) (Ping timeout)
[22:45:11] *** Joins: cadence (Mibbit@moz-E2D8E781.sub-70-209-5.myvzw.com)
[22:45:43] <cadence> I am having trouble building Rust on Mac.
[22:45:46] <cadence> i686-apple-darwin11-llvm-g++-4.2: x86_64-apple-darwin/rt/libuv/libuv.a: No such file or directory
[22:46:34] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:47:17] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[22:49:03] <indirect> cadence: you didn't check out the submodules
[22:49:32] <cadence> indirect: Ah!
[22:49:37] <cadence> Be right back...
[22:49:41] <kimundi> ./configure should do that
[22:49:45] <kimundi> I thin
[22:49:51] <kimundi> k
[22:50:29] <cadence> Hmmm.
[22:50:29] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[22:50:55] <cadence> I am following the instructions on the README: https://github.com/mozilla/rust#linux--os-x
[22:51:39] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:51:49] <cadence> Do I just `git submodule init` then `git submodule update`?
[22:51:51] *** Quits: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP) (Ping timeout)
[22:51:59] <cadence> (I haven't used submodules before.)
[22:52:43] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[22:53:42] *** Joins: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP)
[22:54:01] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[22:54:02] <kimundi> The configure script should do that automatic
[22:54:09] <kimundi> afaik
[22:54:21] <kimundi> At least, I nver needed to do that manually
[22:54:27] <kimundi> Under Linux
[22:54:37] <indirect> configure does it for me to (osx)
[22:54:43] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[22:54:59] <cadence> indirect: What OS X version do you have? I have 10.7.
[22:55:19] <indirect> 10.8
[22:55:33] <SiegeLord> Anybody with a recentish rust could help me reproduce this bug? https://gist.github.com/SiegeLord/7062562
[22:56:08] *** Quits: mihneadb_ (mihneadb@ECA1F581.33B6743.89C0DD0D.IP) (Input/output error)
[22:57:34] *** Joins: Skif (emschwar@moz-4C5BB5A8.beyondbb.com)
[22:57:41] *** lbergstrom is now known as lbergstrom|dinner
[23:00:09] *** Quits: Skif (emschwar@moz-4C5BB5A8.beyondbb.com) (Ping timeout)
[23:01:08] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[23:02:16] *** Joins: ibnc (ibnc@moz-8A9CD85B.client.mchsi.com)
[23:04:59] <dbaupp> SiegeLord: I can reproduce it with a 3 day old rustc (d8d1b8f)
[23:05:08] <SiegeLord> Ok, great
[23:07:52] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[23:08:53] <cadence> submodules must have initialized because `src/libuv/` has files in it.
[23:09:01] *** Quits: CarpNet (Alasdair@moz-EF831A5E.cable.virginmedia.com) (Quit: Leaving)
[23:09:41] <glennsl> How do you bench something that takes a long time? It just returns 0 ns/iter for me
[23:10:41] <hickorynut> Anyone know how to split a string?
[23:11:39] <dbaupp> hickorynut: split by what?
[23:11:52] <dbaupp> glennsl: by hand :( (or make the bench shorter)
[23:12:29] <glennsl> by hand it is then :) thanks
[23:12:32] <dbaupp> rusti: "foo bar baz".split_iter(' ').to_owned_vec()
[23:12:33] -rusti- ~["foo", "bar", "baz"]
[23:13:06] <hickorynut> Thanks, I will give that a try
[23:13:18] <dbaupp> rusti: for x in "foo bar\tbaz\nqux".split_iter(|c: char| c.is_whitespace()) { print!(r#""{}" "#, x) }
[23:13:19] -rusti- "foo" "bar" "baz" "qux" ()
[23:14:34] <SiegeLord> Yay for raw strings
[23:16:27] *** Joins: skade (skade@moz-D8051715.pools.arcor-ip.net)
[23:17:59] *** Joins: sruggier (sruggier@B3C08253.4562CF68.6BEEAEBD.IP)
[23:19:40] *** Quits: engla (engla@moz-E4A8CEF5.customer.cdi.no) (Ping timeout)
[23:19:43] *** Joins: mib_iuoncx (Mibbit@moz-CBD47140.nycmny.fios.verizon.net)
[23:19:49] *** Quits: cadence (Mibbit@moz-E2D8E781.sub-70-209-5.myvzw.com) (Quit: http://www.mibbit.com ajax IRC Client)
[23:20:55] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[23:21:17] <sruggier> I have an AtomicUint, and I'm trying to prevent false sharing of whatever cache line it happens to be on with other unrelated data. Right now I'm just padding either side with 60 bytes, is there a somewhat more efficient way to do it?
[23:22:06] <sruggier> for example, being able to specify alignment would at least cut the waste out from one side
[23:24:50] <myname> what the hell is r#?
[23:25:00] <dbaupp> myname: raw string
[23:25:17] <myname> dbaupp: i.e.?
[23:25:38] <myname> something heredocish?
[23:25:45] <sruggier> it saves you from having to escape characters
[23:25:51] *** Quits: mib_iuoncx (Mibbit@moz-CBD47140.nycmny.fios.verizon.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:25:53] <strcat> sruggier: call aligned_alloc?
[23:26:14] <strcat> there isn't a way to do it with a variable/global
[23:26:16] <strcat> atm
[23:26:44] <sruggier> I will just waste the bytes for now, then, it's not on something that will be allocated heavily, naturally
[23:26:54] <dbaupp> myname: http://en.wikipedia.org/wiki/String_literal#Raw_strings
[23:27:21] <dbaupp> myname: our syntax is r#*"..."#*, where the number of hashes has to match
[23:27:53] *** Joins: engla (engla@moz-E4A8CEF5.customer.cdi.no)
[23:27:58] <myname> sounds a bit strange
[23:28:44] <sruggier> it has to be strange to avoid the need for escaping
[23:28:58] <myname> not that
[23:29:03] <myname> the #-thing
[23:29:27] <sruggier> yeah, the #-thing in the raw strings, right?
[23:29:43] *** Quits: engla (engla@moz-E4A8CEF5.customer.cdi.no) (Ping timeout)
[23:29:52] *** lbergstrom|dinner is now known as lbergstrom
[23:29:59] *** Joins: _Y_ (Mibbit@moz-6936738F.dynamic.isp.telekom.rs)
[23:30:29] <_Y_> guys I got a question
[23:30:50] <mcpherrin> I might have an answer!
[23:30:51] <_Y_> how does one unwrap values from enumeration like Option<~str>
[23:30:57] <_Y_> without match 
[23:31:03] <_Y_> like inside if
[23:31:22] <_Y_> that's great mcpherrin :) (sorry for lame intro)
[23:31:33] <mcpherrin> rust-buildbot: let x: Option<~str> = Some(~"_Y_"); x.unwrap()
[23:31:42] <mcpherrin> rusti: let x: Option<~str> = Some(~"_Y_"); x.unwrap()
[23:31:43] -rusti- ~"_Y_"
[23:31:58] <mcpherrin> rusti: let x: Option<~str> = None; x.unwrap()
[23:31:59] -rusti- task '<unnamed>' failed at 'called `Option::unwrap()` on a `None` value', /build/rust-git/src/rust/src/libstd/option.rs:289
[23:31:59] -rusti- application terminated with error code 101
[23:32:23] <mcpherrin> rusti: let x: Option<~str> = None; x.is_none()
[23:32:24] -rusti- true
[23:32:33] <mcpherrin> rusti: let x: Option<~str> = Some(~"_Y_"); x.is_none()
[23:32:33] -rusti- false
[23:32:41] <mcpherrin> Those should be all the operations you need
[23:32:53] <mcpherrin> The basics at least.
[23:33:02] <_Y_> ok, but suppose I don't have option but my own enumeration
[23:33:17] <_Y_> x.is_none() isn't going to work on those
[23:33:30] <_Y_> how do I check if my enum is of certain type?
[23:33:46] <mcpherrin> use Match
[23:33:57] <myname> if they don't have arguments you may derive(Eq)
[23:34:05] *** Joins: mihneadb (mihneadb@ECA1F581.33B6743.89C0DD0D.IP)
[23:34:17] <mcpherrin>     pub fn is_none(&self) -> bool {
[23:34:18] <mcpherrin> 150         match *self { None => true, Some(_) => false }
[23:34:22] <myname> if they do, you are pretty much bound to match
[23:34:32] <mcpherrin> That's how is_none is implemented for option
[23:34:35] <_Y_> aha, so i impl on them right?
[23:34:48] <myname> yes
[23:38:48] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[23:39:18] *** sam113101 is now known as sam113101_afk
[23:39:18] *** Quits: sebcrozet (sebcrozet@moz-D8879CC3.w80-13.abo.wanadoo.fr) (Connection reset by peer)
[23:39:27] <_Y_> thanks :)
[23:40:44] *** Quits: Jesin (Jessin_@moz-14627F8E.cc.lehigh.edu) (Quit: Leaving)
[23:41:14] *** Joins: ksf_ (ksf@moz-8D2477CB.adsl.hansenet.de)
[23:41:16] *** Quits: ksf (ksf@moz-55BDF8F7.adsl.hansenet.de) (Ping timeout)
[23:41:44] *** Joins: nejucomo1 (Adium@moz-434492BB.dsl.static.sonic.net)
[23:41:52] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Connection reset by peer)
[23:43:07] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[23:43:16] *** Quits: ksf_ (ksf@moz-8D2477CB.adsl.hansenet.de) (Quit: Leaving)
[23:44:29] *** Joins: martndemus (martndemus@moz-876695FC.sshunet.nl)
[23:44:33] *** Quits: nejucomo1 (Adium@moz-434492BB.dsl.static.sonic.net) (Ping timeout)
[23:44:42] *** Quits: skade (skade@moz-D8051715.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:45:35] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[23:45:53] *** Quits: blank_name (blank_name@2E4E7E43.800E1818.31EC03F3.IP) (Ping timeout)
[23:46:25] *** Quits: martndemus (martndemus@moz-876695FC.sshunet.nl) (Ping timeout)
[23:47:38] <eddyb> rusti: 1.to_str()
[23:47:40] -rusti- pastebinned 37 lines of output: http://ix.io/8Ct
[23:47:53] <eddyb> rusti: 1u.to_str()
[23:47:54] -rusti- ~"1"
[23:47:59] <eddyb> rusti: 1..to_str()
[23:48:04] -rusti- pastebinned 6 lines of output: http://ix.io/8Cu
[23:48:18] <eddyb> hmm, so how does Rust parse floating-point constants?
[23:48:29] <eddyb> rusti: 1.
[23:48:30] -rusti- 1f64
[23:48:47] <eddyb> rusti: 1.0.to_str()
[23:48:49] -rusti- pastebinned 13 lines of output: http://ix.io/8Cv
[23:49:04] <Eridius> eddyb: the character following the . has to not be another ., and has to not be an identifier start
[23:50:25] *** Joins: blank_name (blank_name@2E4E7E43.800E1818.31EC03F3.IP)
[23:56:29] *** Quits: _Y_ (Mibbit@moz-6936738F.dynamic.isp.telekom.rs) (Quit: http://www.mibbit.com ajax IRC Client)
[23:58:10] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[23:59:20] <benh> rusti: 1. .to_str()
[23:59:21] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[23:59:22] -rusti- pastebinned 13 lines of output: http://ix.io/8Cw
