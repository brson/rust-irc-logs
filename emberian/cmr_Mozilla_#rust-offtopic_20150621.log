[00:09:19] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[00:09:24] <fmtq> huon: wot
[00:09:31] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[00:15:40] <huon> fmtq: wot wot?
[00:17:53] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Quit: Leaving)
[00:17:56] <fmtq> wot wot wot, huon
[00:18:09] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[00:29:03] <eddyb> > On July 18, 2014, TNT renewed the show for a 10-episode fifth and final season, which is slated to begin on June 28, 2015
[00:29:18] <eddyb> nice, Falling Skies in a week
[00:33:22] *** kimundi is now known as zz_kimundi
[01:01:26] <c74d> Hm. I think my password's been lost for at least a year, but the network hasn't stopped complaining about me using a nick that's supposedly "owned by someone else".
[01:09:04] <WindowsBunny> pub type PSEC_APPLICATION_PROTOCOL_NEGOTIATION_STATUS = *mut SEC_APPLICATION_PROTOCOL_NEGOTIATION_STATUS;
[01:11:08] <eddyb> I never liked the P types
[01:12:12] <WindowsBunny> pub type SEC_GET_KEY_FN = Option<unsafe extern "system" fn(Arg: *mut ::c_void, Principal: *mut ::c_void, KeyVer: ::c_ulong, Key: *mut *mut ::c_void, Status: *mut SECURITY_STATUS)>;
[01:40:04] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[01:49:40] *** Joins: dpc (dpc@moz-t6gr4b.ca.comcast.net)
[01:51:50] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:57:53] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[02:16:27] *** Quits: aotic (martini_bik@moz-35p504.35n5.ltgp.0306.2602.IP) (Connection closed)
[02:25:50] <eddyb> so this https://www.flickr.com/photos/romainguy/6853156632/
[02:25:56] <eddyb> is a nice city skylines map
[02:26:02] <eddyb> (or that's what I thought when I saw it)
[02:38:38] <c74d> rrg, I suppose I'd better learn to use <Esc><Up> rather than <Alt-Up>
[02:38:46] *** Quits: blue_deref (blue_deref@moz-u9gmm1.res.rr.com) (Quit: bbn)
[02:40:12] <Tobba> gah
[02:40:21] <Tobba> I'm starting to become worried about rustc's output :/
[02:40:31] <Tobba> the register thrashing is completely mad
[02:40:35] <c74d> when I press <Alt-Up> in NixOS, the console I'm on and all consoles I haven't yet logged in on (but not a logged-in but inactive console) gets messed up and stops working :\
[02:41:10] <Tobba> and there's ridiculous amounts of badly optimized branching and ad-hoc jumptables
[02:41:16] <eddyb> Tobba: you mean LLVM's regalloc is not state of the art :P?
[02:41:25] <Tobba> eddyb: certainly, what the fuck is this shit
[02:41:45] <Tobba> it seems to produce bad results when branching is involved, which may not be terribly surprising
[02:42:12] <eddyb> can you come up with a sample?
[02:42:33] <eddyb> it sounds like phi treatment is suboptimal
[02:42:49] <Tobba> I'm trying to find a good isolated thing
[02:42:56] *** Quits: zz_kimundi (kimundi@moz-t4jqnn.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[02:43:37] <c74d> I get /bin/sh complaining about /sbin/sulogin not existing. Of course it *doesn't* exist, but shouldn't NixOS have taught /bin/sh that?
[02:43:38] <Tobba> a rather small thing generated 8.5k lines of asm (45k assembled), with 1k branches, 3.4k movs and 800 nops
[02:44:01] <eddyb> if you have the IR you can just keep the body of one function and only signatures for functions it calls
[02:44:09] <Tobba> so it would seem that the majority of the generated instructions don't do jack shit
[02:44:27] <Tobba> yeah I'm trying to find a good isolated section of brokeness, which is hard because the generated code is *huge*
[02:45:48] *** Joins: zz_kimundi (kimundi@moz-m2hafk.dip0.t-ipconnect.de)
[02:45:49] *** zz_kimundi is now known as kimundi
[02:47:09] <Tobba> eddyb: one thing I'm noticing is that LLVM seems to be aggressively trying to minimize false dependencies when dealing with u8 values using zero-extension
[02:47:38] <Tobba> which seems to work fine about half the time, let me find a good example of that becoming bad as well
[02:48:36] *** Joins: ytain (ytain@moz-p96068.dsl.teksavvy.com)
[02:51:07] <Tobba> eddyb: https://gist.github.com/Tobba/6396ffca7ad4b0d9be77 from the code generated by from_str_radix(s, 16)
[02:51:12] <Tobba> I think this is a good example of the thrashing
[02:56:11] <Tobba> actually, it's not, hold on
[02:58:40] *** Joins: Quxxy (chatzilla@moz-efh10q.internode.on.net)
[03:02:09] <eddyb> http://copy.sh/v86/?profile=archlinux
[03:02:13] <eddyb> I ran ./qemu.sh
[03:02:23] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:02:25] <eddyb> is it really going to start qemu
[03:02:33] <eddyb> yupp, it is
[03:02:35] <eddyb> oh dear
[03:02:49] <Tobba> lol
[03:03:34] <eddyb> speed: 15000kIPS
[03:03:37] <eddyb> so 15MIPS?
[03:03:42] <Tobba> yep?
[03:03:51] <Tobba> that's actually 10x better than my build of bochs at peak
[03:03:55] <Tobba> I'm not quite sure what's wrong with it
[03:03:56] <eddyb> ./qemu.sh starts FreeDOS apparently
[03:04:09] <eddyb> Tobba: built with no optimizations?
[03:04:19] <Tobba> with optimizations
[03:04:37] <eddyb> or using emulation?
[03:04:48] <eddyb> because this thing doesn't have to nest emulators
[03:04:56] <Tobba> bochs always does emulation
[03:04:59] <Tobba> that's kinda the point
[03:05:58] <eddyb> I'd be impressed if qemu under this thing ends up JITting machine code from the JS VM
[03:06:20] <eddyb> even if not, wasm will get us there :D
[03:06:26] <Tobba> :D
[03:06:35] <Tobba> eddyb: I'm noticing two things:
[03:06:38] <Tobba> 1. our printing fucking sucks
[03:06:44] <eddyb> (no kidding)
[03:06:58] <Tobba> 2. failure results in lots of branches which confuse the register allocator and optimizer
[03:07:04] <eddyb> (can't change much though at this point)
[03:07:07] <Tobba> seemingly leading to incredibly bad results
[03:07:34] <eddyb> Tobba: what if you replace failure with aborts and/or disable landing pads?
[03:08:00] <Tobba> landing pads are off
[03:08:16] <eddyb> so you mean the Err kind of failure?
[03:08:27] <Tobba> from_str_radix may panic in 3 ways(!)
[03:08:33] <Tobba> and then there's an unwrap around the call
[03:09:08] <eddyb> Tobba: I just started invaders. on FreeDOS in qemu. on Arch running in v86. in v8 (chrome)
[03:09:22] <eddyb> it's not doing much tho
[03:09:31] <Tobba> eddyb: as for printing, WHY ARE WE COPYING A 32-BYTE STRUCTURE TO PRINT A NUMBER
[03:09:45] * eddyb hides
[03:09:50] <eddyb> Tobba: what do you mean?
[03:10:06] <eddyb> is it never-inline stuff?
[03:10:27] <eddyb> bah it's not starting up and it's frying my laptop, I kinda want to close it
[03:10:32] <Tobba> http://is.gd/rzsqYy I forgot playpen doesn't let you use LTO, but release/nightly and take a look at the asm
[03:11:08] <eddyb> the IR is messed up
[03:11:47] <Tobba> eddyb: not to mention it's putting a pointer to something on the stack on the stack
[03:12:06] <Tobba> probably thanks to our fucked-up mechanics of passing ANYTHING over pointer size as a reference, including slices
[03:12:12] <Tobba> so you get icky double dereferencing
[03:12:12] <eddyb>   call void @_ZN9panicking9panic_fmt20h03749e86046e7c85E8BE(%"2.core::fmt::Arguments"* noalias nocapture nonnull dereferenceable(48) %0, { %str_slice, i32 }* noalias nonnull readonly dereferenceable(24) @"_ZN6result24Result$LT$T$C$$u20$E$GT$6unwrap10_FILE_LINE20h74a0205287565336zIFE")
[03:12:26] <aatch> Tobba, actually, fat pointers are now passed as two args.
[03:12:27] <eddyb> oh, you're calling unwrap on it
[03:12:40] <aatch> Tobba, might not be in the latest nightly, but it's on master.
[03:12:48] <Tobba> aatch: oh, that was fixed? neat
[03:13:14] <eddyb> a call to panic_fmt is still messed up
[03:13:29] <eddyb> too much setup
[03:13:35] <eddyb> even a bloody memset
[03:13:50] <Tobba> eddyb: a part of the problem is that panic_fmt is marked cold
[03:14:00] <eddyb> so?
[03:14:06] <Tobba> so even if all it does is print a static string, it invokes massive setup
[03:14:45] <eddyb> the problem is that it actually needs these complicated structures
[03:15:36] <Tobba> there's something weird around the from_str_radix call as well
[03:15:45] <Tobba> it lea's into rbx then copies it to rdi
[03:16:45] <eddyb> the IR itself is weird
[03:16:51] <aatch> Tobba, a lot of that is to do with our ridiculous number of temporary stack slots.
[03:16:54] <eddyb> since we're packing (u8, u32) in an u64
[03:17:59] <Tobba> aatch: that could explain a whole lot of other things as well
[03:18:53] <aatch> Tobba, I have a patch that gets rid of some of the worst offenders. Like the store/load pair for functions that return immediates.
[03:19:05] <Tobba> ouch
[03:19:52] <eddyb> Tobba: this codegen tempts me to modify core::fmt to put anything <= pointer, and with no drop glue, directly inside the structure, instead of keeping a reference to them
[03:20:31] <eddyb> it won't have any overhead because of monomorphization, but it's a bit crazy :P
[03:20:45] <Tobba> considering this generates a 60kb ELF file and my kernel is something like 130kb, I suspect most of the generated code is formatting glue
[03:21:30] <eddyb> yuck
[03:21:55] <eddyb> Tobba: oh, one thing you can do, is pass all parts of the arguments directly
[03:22:06] <eddyb> which may mean more register pressure, but less structure building
[03:22:32] <eddyb> except you can't just do that with the current APIs, you'd need new ones (JOY!)
[03:23:03] <eddyb> or an #[inline] wrapper that expands the arguments structure and calls a cold function with all the bits
[03:23:32] <Tobba> hm
[03:23:57] <eddyb>   call void @llvm.memcpy.p0i8.p0i8.i64(i8* %5, i8* bitcast ({ %str_slice*, i64 }* @_ZN4main15__STATIC_FMTSTR20hc32cd9f0322f361eraaE to i8*), i64 16, i32 8, i1 false) #4, !alias.scope !23, !noalias !27
[03:24:10] <eddyb> this is the point where you start wanting length-prefixed static strings
[03:24:44] <Tobba> the fuck happened there
[03:24:45] <eddyb> wait, no, what is that thing?
[03:24:59] <eddyb> is it &'static [&'static str]?
[03:25:53] <eddyb> (still could be length-prefixed :P)
[03:25:59] <aatch> eddyb, no, it's copying the string to a stack-slot
[03:26:09] <eddyb> aatch: it's not copying a string
[03:26:15] <eddyb> it's copying a &[&str]
[03:26:49] <eddyb> hmm, if we were to use unsafe code...
[03:27:13] <eddyb> we have a bunch of redundant lengths in fmt::Arguments because the slices are supposed to be in lockstep
[03:27:20] <aatch> eddyb, it's copying the fat pointer.
[03:27:49] <eddyb> &[&str] is a fat pointer
[03:28:18] <eddyb> anyways, look at all that waste https://github.com/rust-lang/rust/blob/master/src/libcore/fmt/mod.rs#L244-L254
[03:30:12] <Tobba> ouch
[03:31:47] <Tobba> it looks like the Option in .fmt could be replaced by having the slice be zero-length instead?
[03:31:53] <eddyb> Tobba: they all have the same length and fmt is just as 'static as pieces (so they could go in the same place)
[03:32:00] <eddyb> Tobba: that's already optimized
[03:32:17] <eddyb> it's 6x ptr size
[03:32:28] <eddyb> but it could be 3x or 2x
[03:32:53] <eddyb> 2x with no perf degradation would be ideal
[03:33:01] *** Joins: yjv (yjv@moz-ll38tk.pa.comcast.net)
[03:33:04] <Tobba> eddyb: oh true, fat pointers are also nullable
[03:33:49] <eddyb> (stick the length, the pieces and the extra fmt specifiers behind a thin 'static pointer)
[03:33:59] *** Quits: yjv (yjv@moz-ll38tk.pa.comcast.net) (Connection closed)
[03:34:06] <eddyb> well, not 'static, but doesn't matter, really, as long as format_args! can generate it
[03:35:05] <aatch> I wonder, also, if special casing stuff like `println!("{}", foo)` to a direct call to the appropriate formatter would be a win?
[03:35:17] <eddyb> wondered that myself
[03:35:40] <Tobba> aatch: can't be a special case in format_args though, and you can't really fit that kind of behaviour into a macro
[03:35:41] <eddyb> since I added a thousand write!(f, "{}", foo) and write!(f, "bar") to rustc
[03:36:00] <eddyb> Tobba: you can special-case println!("{}", expr)
[03:36:12] <eddyb> and "{:?}", expr
[03:36:24] <eddyb> but it's more useful with write! than print stuff
[03:36:38] * Quxxy is, again, awful tempted to suggest an eval! macro
[03:36:47] * Tobba shoots Quxxy 
[03:36:58] <Tobba> (in the leg, duh)
[03:37:09] * Quxxy matches the bullet and substitutes it into a steel box, rendering it harmless
[03:37:34] <eddyb> haha
[03:37:42] <eddyb> I am so glad I made us pass fmt::Arguments by value
[03:37:46] <Tobba> eddyb: reading further down, there's a backwards compat hazard introduced by our dubious macro hygine :(
[03:37:56] <eddyb> because we can make it 2x-ptr
[03:37:58] <Tobba> *and* the Argument values are 2x pointer size and have to be built on the fly, but have a constant
[03:38:36] <eddyb> and then have that pair passed as two arguments (needs a lot more trans work though)
[03:38:41] <eddyb> Tobba: oh!
[03:38:47] <eddyb> that's a very good point
[03:39:37] <Tobba> tbh if you rely on ArgumentV1 you are an utter fool
[03:39:42] <eddyb> Tobba: you know what the issue with that is, though?
[03:39:47] <WindowsBunny> hi Quxxy
[03:39:53] * WindowsBunny nibbles on Quxxy
[03:39:59] <Tobba> eddyb: probably?
[03:40:04] <eddyb> ArgumentV1 is unstable fwiw
[03:40:10] <eddyb> so don't mind it
[03:40:17] <Tobba> oh shit it is
[03:40:22] <Quxxy> You know, as soon as you said that, I thought "what, he's not going to just bite me out of nowhere?"
[03:40:29] <Tobba> hooray for wacky macro semantics allowing for hacky hygine
[03:40:29] <eddyb> everything but fmt::Arguments as an opaque struct, is unstable
[03:41:04] <eddyb> Tobba: the issue is that the Argument values are produced from a &T
[03:41:20] <eddyb> how do you get that T into a constant?
[03:41:33] <eddyb> ha ha hah haahahaaaaaa
[03:41:37] <eddyb> Tobba: fuck me. const fn
[03:41:43] <Tobba> excellent.
[03:41:45] <eddyb> well
[03:41:53] <eddyb> it won't "just" work
[03:41:59] <eddyb> but it will kinda will
[03:42:10] <eddyb> it's... complicated and it requires rvalue promotion
[03:42:22] <eddyb> oh look 1.2 doesn't have rvalue promotion even if 1.0 could have had it jsut fine
[03:42:35] <eddyb> just because I can't focus long enough to write a RFC
[03:42:46] <eddyb> freaking fantastic, that's what that is
[03:42:57] <Tobba> hm
[03:43:06] <eddyb> it's still hard to engineer, though
[03:43:26] <eddyb> maybe you just get typeof and call it a day
[03:43:35] <Quxxy> I found a video of eddyb laughing: https://www.youtube.com/watch?v=oOQNQTrq3tc&t=66
[03:43:50] <eddyb> gtg 7am sleep
[03:45:07] <aatch> Tobba, you'll be pleased to hear that there are no calls to memcpy in the example you have.
[03:45:28] <aatch> Tobba, on the latest master
[03:45:35] <Tobba> woo
[03:45:54] <eddyb> I know how to do it
[03:45:56] <Tobba> I'm updating to the latest nightly now actually (sadly there's a breaking change in the layout of the archives, it seems)
[03:46:04] <Tobba> eddyb: two raw pointers and the length in the pieces?
[03:47:18] <eddyb> trick(&(Display::fmt, Debug::fmt, Debug::fmt), &(link(Display::fmt, &a), link(Debug::fmt, &b), link(Debug::fmt, &c)))
[03:47:39] <Tobba> aatch: those memcpy's were a *lot* worse with SSE disabled (20-30 instructions)
[03:47:50] <eddyb> where fn link<T>(f: fn(&T, &mut Formatter) -> Result, _: &T) -> fn(&T, &mut Formatter) -> Result {f}
[03:48:05] <aatch> Tobba, the relevant patch was merged ~6 hours ago, so it might not be in the latest nightly (I don't know when they get built).
[03:48:06] <WindowsBunny> Quxxy: I'm not biting you, I'm merely nibbling on you
[03:48:09] <eddyb> and fn trick<T>(x: &'static T, _: &T) -> &'static T {x}
[03:48:16] <eddyb> now can I go to sleep?
[03:48:50] <eddyb> (it requires only rvalue promotion which is a single line change in the compiler to enable, has been working "undercover" for months)
[03:49:04] <Quxxy> WindowsBunny: That's a *kind* of biting
[03:49:08] <eddyb> Tobba: or do I need to explain how the snippet above works?
[03:49:27] <Tobba> eddyb: I should probably also sleep and work on some defmtbloating when I have time
[03:50:10] <aatch> Tobba, well it's only copying 2 pointers, but it does avoid a lot of stack churn due to not needing a location to pass a pointer a pointer to.
[03:50:13] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[03:50:13] *** ChanServ sets mode: +o erickt
[03:50:21] <eddyb> the `link` function just does what Argument::new does
[03:50:48] <eddyb> it supplies the concrete argument types, taken from the actual arguments
[03:51:03] <eddyb> in the form of the fmt method signature
[03:51:26] <eddyb> trick requires that both of its arguments have the same type. they're tuples, but not bound by anything, so they can have arbitrary lengths
[03:51:54] <eddyb> the information from the runtime rvalues in the second argument of `trick` "trickle back" into the first argument
[03:51:58] <eddyb> which is a const rvalue
[03:52:09] <Tobba> aatch: yeah, it should lead to some massive improvements in the code I'm looking at right now
[03:52:40] *** Joins: psd (psd@moz-1dik8c.mtnl.net.in)
[03:52:42] <eddyb> the result is a &'static tuple with all the function pointers
[03:53:54] <eddyb> (even without user-visible rvalue promotion, you can use unsafe code as the reference will actually be pointing to .rodata)
[03:54:32] <eddyb> (well, the way the macro works the lifetimes will work fine anyways)
[03:55:19] <eddyb> I really am curious what impact this makes
[03:55:24] *** Quits: aatch (james@moz-is4j4r.cable.telstraclear.net) (Ping timeout: 121 seconds)
[03:55:36] <eddyb> and I really like the inference trick :P
[04:02:17] *** Quits: dpc (dpc@moz-t6gr4b.ca.comcast.net) (Ping timeout: 121 seconds)
[04:06:58] <Tobba> oh boy, /cargo problems/
[04:07:18] <Tobba> this is going to be ~fun~
[04:09:02] *** Joins: dpc (dpc@moz-t6gr4b.ca.comcast.net)
[04:13:17] *** Quits: ytain (ytain@moz-p96068.dsl.teksavvy.com) (Quit: Textual IRC Client: www.textualapp.com)
[04:17:02] *** Joins: yjv (yjv@moz-ll38tk.pa.comcast.net)
[04:21:03] <Tobba> ... and someones overriden the Debug formatter on this damn thing, WHY?! it breaks the trace!() info
[04:22:47] <WindowsBunny> Tobba: lol
[04:22:56] <Tobba> I fucking hate Cargos code
[04:23:03] <Tobba> it *looks* structured but it's sphagetti and meatballs
[04:23:06] <WindowsBunny> Tobba: nice!
[04:23:32] <Tobba> held up by a fragile structure of non-boiled sphagetti with nonexistent error handling
[04:24:53] <Quxxy> Tobba: ... I kinda liked how they distinguish between errors caused by the user and those *not* caused by the user
[04:25:11] <XMPPwocky> anybody got anacron working on nixos? 
[04:25:20] <Tobba> Quxxy: it really doesn't do that though
[04:25:28] <XMPPwocky> i have tarsnap for backup and atm i just have it on a weekly cronjob, but this is a laptop
[04:25:28] <Tobba> some of the input verification is nearly nonexistent
[04:26:15] <Tobba> and it does things which are wacky as hell, for example it seems that having certain Cargo.toml files in nearby directories causes it to catch fire when reading the Cargo.toml
[04:26:29] <XMPPwocky> so atm if it's not on (and not booted into linux) at sunday on midnight, no backup for that week
[04:26:40] <WindowsBunny> Tobba: You should go on a cargo refactoring then :D
[04:26:58] <Quxxy> Tobba: I *did* run into a situation a while back where I ran Cargo from the wrong directory, and it ended up going to a sibling directory, then down a level to find a manifest
[04:27:03] <Tobba> WindowsBunny: I think I'd have an aneurysm
[04:27:10] <Quxxy> I have *no* idea how or *why* it did, but it did
[04:27:33] <Tobba> I'm hitting this
[04:27:34] <Tobba> https://github.com/rust-lang/cargo/blob/master/src/cargo/sources/path.rs#L58
[04:27:46] <Tobba> also see line 269
[04:32:34] *** Quits: dpc (dpc@moz-t6gr4b.ca.comcast.net) (Ping timeout: 121 seconds)
[04:36:54] *** Joins: dpc (dpc@moz-t6gr4b.ca.comcast.net)
[04:38:15] <Tobba> oh jesus fuck this rust update, it fragments core feature flags all over the place
[04:38:27] <Tobba> I have to add something like 5 feature flags to all my 20 crates
[04:39:44] *** Joins: Kingsquee (kingsley@moz-lu638h.bchsia.telus.net)
[04:44:18] <WindowsBunny> Tobba: :D
[04:44:31] <WindowsBunny> That's what you get for using nightly
[04:44:35] <Dabo> xD
[04:44:44] <Dabo> I suppose it will help with knowing exactly what is used
[04:45:33] <Tobba> it wont
[04:45:38] <Tobba> I have no idea what the fuck the point of this is
[04:46:04] <Tobba> unless someone is planning to stablize core, which is going to end horrifically if attempted right now
[04:47:48] <Tobba> actually, some are useful (for things that you probably don't actually want to use), but most of these feature flags are utterly useless
[04:57:11] *** Quits: dpc (dpc@moz-t6gr4b.ca.comcast.net) (Ping timeout: 121 seconds)
[04:58:41] *** Joins: blue_deref (blue_deref@moz-u9gmm1.res.rr.com)
[05:07:20] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[05:07:41] <Tobba> #![feature(core, alloc, collections, libc, core_prelude, core_slice_ext, core_str_ext, core_intrinsics, ptr_as_ref, vec_push_all, fnbox, raw, slice_bytes)]
[05:07:44] <Tobba> I'm going to shank someone.
[05:07:55] <whipsch> #![feature(shank)]
[05:08:18] <Tobba> #![feature(core_shank, core_handle, as_weapon, murder)]
[05:10:50] <WindowsBunny> #![feature(bunny)]
[05:10:56] <Tobba> lol, I think I just ran into type inference breakage
[05:11:12] * WindowsBunny gnaws on Tobba's leg
[05:11:47] <Astrum|Lap> what will people think of rust in 30 years
[05:12:39] <WindowsBunny> hmmmm
[05:12:53] <WindowsBunny> Astrum|Lap: That's a really good question
[05:14:08] <niconii> Astrum|Lap: "gosh, programming sure was nice before our apple overlords destroyed every computer we had and replaced them with iTelescreens"
[05:14:11] <Tobba> oh, it's only broken with intrinsics
[05:14:12] <Tobba> weird
[05:14:38] <Astrum|Lap> niconii: I love how apple is now the bad guy
[05:14:55] <Astrum|Lap> interesting to see things change over time
[05:15:07] <Tobba> except no, it's all function calls
[05:15:10] <WindowsBunny> Astrum|Lap: You gotta fight the system
[05:15:16] <WindowsBunny> Astrum|Lap: And right now apple is the system
[05:15:36] <Astrum|Lap> depends on how you define the system
[05:15:47] <WindowsBunny> Astrum|Lap: I define the system as Apple
[05:15:56] <Astrum|Lap> then that's circular =P
[05:16:22] <Astrum|Lap> apple still has a better track record of open sourcing stuff than MS
[05:16:46] <Astrum|Lap> MS is going that route now that balmer is out of the picture
[05:17:24] <WindowsBunny> MS nowadays is doing a lot of really cool things
[05:17:30] <Tobba> http://is.gd/LaGQmG
[05:17:37] <Tobba> compare stable/nightly
[05:17:55] <WindowsBunny> Tobba: time to file an issue :D
[05:18:28] <Tobba> there was a breaking change recently, but that was about lifetime inference, I think?
[05:18:30] <Astrum|Lap> on the plus side, apple isn't a monopoly
[05:18:33] <Astrum|Lap> MS legitimately was
[05:18:56] <WindowsBunny> MS isn't a monopoly nowadays so its all good
[05:19:12] <Astrum|Lap> hence why I said 'was'
[05:19:14] <niconii> Astrum|Lap: alternatively: "gosh, programming sure was nice before someone found out you really *can* do anything at zombo.com, and wiped all other technology from the face of the earth"
[05:19:30] <Astrum|Lap> I have no idea what zombo.com is...
[05:19:45] <niconii> http://www.zombo.com/
[05:19:49] <WindowsBunny> I wish zombo.com was upgraded to html5 specs
[05:19:57] <WindowsBunny> I don't wanna enable flash just for zombo
[05:20:01] <niconii> https://html5zombo.com/
[05:20:14] <Astrum|Lap> what... in the world
[05:20:23] <niconii> welcome to zombo.com
[05:20:36] <Astrum|Lap> anyway
[05:21:32] <WindowsBunny> I have an idea
[05:21:42] <WindowsBunny> I should put an emoji rabbit into all of my PRs to rust
[05:21:42] <WindowsBunny> :D
[05:21:43] <Astrum|Lap> I'm sure in 30 years if rust becomes sufficiently mainstream it will be looked at with contempt and reluctance
[05:22:18] <Tobba> and C will be the next COBOL?
[05:22:48] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[05:23:22] <Astrum|Lap> to some extent it already is
[05:23:40] *** Quits: blue_deref (blue_deref@moz-u9gmm1.res.rr.com) (Quit: bbn)
[05:24:52] <WindowsBunny> weekends are so slow for homu
[05:25:03] <WindowsBunny> homu is even trying to land PRs slated for rollups!
[05:25:31] <niconii> in 30 years, COBOL will come back in vogue
[05:26:41] <niconii> no, sorry, i mean
[05:26:44] <niconii> COBOL.js
[05:27:17] <Astrum|Lap> well if that's the case I'd expect the new fad right now to be punch card programming... .js
[05:27:37] <whipsch> doit
[05:27:42] <Astrum|Lap> alright
[05:27:53] <Astrum|Lap> I guess I have a new project that will fix all of the webs problems! =D
[05:29:07] <whipsch> who needs webassembly when you have punchcard.js?
[05:29:43] <Astrum|Lap> I am somewhat tempted to make this happen
[05:30:37] <Quxxy> punch.js: code is stored as an image of a punch card, with the "holes" punched by making those pixels transparent
[05:31:21] <Astrum|Lap> I shall have to consider this a bit...
[05:31:36] <whipsch> i was thinking an ascii punchcard drawing and then maybe an interactive editor that is sort of like a flipbook of a grid of checkboxes
[05:32:04] <whipsch> EBCDIC i guess
[05:32:07] <Astrum|Lap> it'd be handy if I were old enough to have actually used or even seen punch card programming in action
[05:34:37] *** Quits: fkaa (fkaa@moz-501od2.business.telia.com) (Ping timeout: 121 seconds)
[05:36:47] <WindowsBunny> I wish there was msdn documentation on SECURITY_KERNEL
[05:55:43] <Astrum|Lap> huh... babylon 5 apparently has unisex bathrooms
[05:55:49] *** Quits: saml_ (saml@moz-rkfmct.res.rr.com) (Quit: Leaving)
[06:12:02] *** Quits: yjv (yjv@moz-ll38tk.pa.comcast.net) (Connection closed)
[06:19:40] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[06:33:49] <WindowsBunny> what the fuck microsoft
[06:33:58] <WindowsBunny> you define a function DelegateSecurityContext in your headers
[06:34:04] <WindowsBunny> but it isn't in _any_ of your import libraries
[06:34:12] <WindowsBunny> and doesn't have a single mention on the internet!
[06:34:28] <WindowsBunny> (except for mirrors of the header that has the function)
[06:36:10] <Quxxy> WindowsBunny: It's a trap for the Wine devws
[06:36:13] <Quxxy> *devs
[06:36:22] <Quxxy> "Ha!  This'll stymie them!"
[06:37:22] <WindowsBunny> Quxxy: If only google turned up results of a forum where wine people are confused about it
[06:37:26] <WindowsBunny> but not even that :(
[06:40:05] *** Joins: blue_deref (blue_deref@moz-u9gmm1.res.rr.com)
[06:40:11] <Skyler> that's when you know you're fucked, when the only relevant google results are from forums.winehq.org
[06:56:46] <Quxxy> Skyler: No, it's when the only relevant results are from some dinky phpbb site last posted to last decade, which has the question followed by "nvm i wrkd it out lol" and no further details
[06:57:55] <WindowsBunny> hmmm
[06:58:07] <WindowsBunny> I appear to have an infestation of carpet beetle larvae under my bed
[06:58:23] <WindowsBunny> welp, so much for sleeping soundly
[06:58:36] <WindowsBunny> tomorrow I'm starting a vicious cleaning campaign
[07:05:21] *** Quits: Romster (Romster@moz-4g83e8.rev.eftel.com) (Ping timeout: 121 seconds)
[07:05:38] *** Joins: Romster (Romster@moz-4g83e8.rev.eftel.com)
[07:19:21] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[07:19:21] *** ChanServ sets mode: +o erickt
[07:20:10] *** Quits: blue_deref (blue_deref@moz-u9gmm1.res.rr.com) (Quit: bbn)
[07:21:16] *** Joins: dpc (dpc@moz-t6gr4b.ca.comcast.net)
[07:24:21] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[07:38:03] *** Quits: dpc (dpc@moz-t6gr4b.ca.comcast.net) (Ping timeout: 121 seconds)
[07:39:56] *** Quits: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net) (Connection closed)
[07:41:18] *** Joins: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net)
[07:43:13] *** Quits: Quxxy (chatzilla@moz-efh10q.internode.on.net) (Ping timeout: 121 seconds)
[07:43:40] *** Joins: Quxxy (chatzilla@moz-efh10q.internode.on.net)
[07:45:05] <XMPPwocky> aha, i figured out how to implement a really sick grappling hook
[07:45:20] <XMPPwocky> with no new physics code
[07:53:31] *** Quits: nathan7 (nathan@moz-t4c1lb.nathan7.eu) (Ping timeout: 121 seconds)
[08:07:16] *** Quits: panicbit (panicbit@moz-vqobnf.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[08:16:25] *** Joins: psd_ (psd@moz-997cnu.mtnl.net.in)
[08:19:37] *** Quits: psd (psd@moz-1dik8c.mtnl.net.in) (Ping timeout: 121 seconds)
[08:22:45] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[08:34:02] *** Joins: fkaa (fkaa@moz-501od2.business.telia.com)
[08:50:11] *** Quits: niconii (nicole@moz-r8dlmh.frgo.qwest.net) (Quit: leaving)
[08:52:05] *** Quits: psd_ (psd@moz-997cnu.mtnl.net.in) (Quit: Leaving)
[08:56:59] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[09:00:47] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[09:06:58] *** Quits: Oflor (Oflor@moz-482d77.dsl.orel.ru) (Quit: Leaving)
[09:08:29] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[09:08:29] *** ChanServ sets mode: +o erickt
[09:13:14] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[09:25:11] *** Quits: stl (stl@moz-sa1.66b.15.176.IP) (Ping timeout: 121 seconds)
[09:49:09] *** Joins: spider-mario (spidermario@moz-coblcf.fbx.proxad.net)
[10:01:32] *** Joins: Lilly (Lilly@moz-pfkvo9.bredband.comhem.se)
[10:11:19] *** Joins: stl (stl@moz-511.ict.15.176.IP)
[10:35:01] *** Quits: RC9 (RCIX@moz-vnmep7.ph.cox.net) (Connection closed)
[10:44:56] *** Joins: ogham (rally@moz-c52.itm.29.185.IP)
[10:50:23] <cmr> WindowsBunny: that's horrifying.
[10:53:52] *** Quits: ogham (rally@moz-c52.itm.29.185.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[10:57:18] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[10:57:18] *** ChanServ sets mode: +o erickt
[10:58:11] *** Quits: pingveno (alevar@moz-v9m50e.members.linode.com) (Ping timeout: 121 seconds)
[10:58:17] *** Joins: pingveno (alevar@moz-oia.vdk.239.23.IP)
[11:00:13] *** Quits: Kingsquee (kingsley@moz-lu638h.bchsia.telus.net) (Quit: Konversation terminated!)
[11:00:24] *** Joins: ogham (rally@moz-7gq.itm.29.185.IP)
[11:01:58] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[11:02:01] *** Joins: nathan7 (nathan@moz-t4c1lb.nathan7.eu)
[11:04:19] *** Quits: gsingh93 (gsingh93@moz-uqh.mfp.236.104.IP) (Ping timeout: 121 seconds)
[11:07:02] *** Joins: gsingh93 (gsingh93@moz-uqh.mfp.236.104.IP)
[11:23:29] *** Joins: ytain (ytain@moz-p96068.dsl.teksavvy.com)
[11:56:09] <kimundi> Hm, in C++, if I inherit from from a templated class like `class Bar: public Foo<int> { ... }`, how do I correctly write an implementation of a method in it?
[11:56:52] <kimundi> Say there was a `virtual T getBaz() = 0;`
[11:58:47] <kimundi> I'm trying `int Bar::getBaz() { ... }`, but that doesn't seem to work (the error messages seem to imply that it gets considered a new method rather than a override. "the following virtual functions are pure within Bar", etc )
[12:24:35] *** Joins: Binero (Binero@moz-91joat.69vi.s4ge.1810.2a02.IP)
[12:24:54] <Mutabah> kimundi: well, first off, C++11's 'override' annotation is useful
[12:25:06] <kimundi> Oh, that exists?
[12:25:28] <Mutabah> Yes, it goes after the prototype
[12:25:56] *** Joins: Ms2ger (Ms2ger@moz-vbh.07m.182.91.IP)
[12:26:54] <Mutabah> that said... it's more defensive than anything iirc
[12:27:24] <kimundi> Mutabah: Wait, do I need to redeclare the prototypes of those parent virtual functions in the Bar class definition?
[12:28:15] * kimundi is still unsure about how the whoel system works in general
[12:28:49] <Mutabah> kimundi: Inside the class that is providing definitions, there needs to be a prototype for the virtual
[12:28:59] <Mutabah> 'virtual int getBaz() override;'
[12:29:09] <kimundi> aah, lets try that...
[12:29:25] <Mutabah> Then you can do 'int Bar::getBaz() { ... }'
[12:32:19] <kimundi> Mutabah: Thanks, that works. Now I need to figure out why this worked with other classes though...
[12:32:41] <Mutabah> kimundi: Maybe it didn't, and they weren't pure virtual?
[12:32:42] <kimundi> (where I did just single inheritance and did not have templates, but implemented the virtual functions with redeclaring them)
[12:34:28] <kimundi> Mutabah: Turns out I actually did redeclare the protoype in those other classes already
[12:34:37] <kimundi> SO that explains that
[12:35:06] <kimundi> Mutabah: thanks!
[12:35:47] <Mutabah> Welcome to C++
[12:37:40] *** Parts: Ms2ger (Ms2ger@moz-vbh.07m.182.91.IP) ("Leaving")
[12:45:20] *** Quits: ogham (rally@moz-7gq.itm.29.185.IP) (Quit: Textual IRC Client: www.textualapp.com)
[12:45:59] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[12:45:59] *** ChanServ sets mode: +o erickt
[12:46:57] *** Joins: nerdopoly (nerdopoly@moz-l5r8u8.range217-42.btcentralplus.com)
[12:50:44] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[13:01:11] *** Quits: Lilly (Lilly@moz-pfkvo9.bredband.comhem.se) (Quit: bajs)
[13:06:25] *** Quits: nerdopoly (nerdopoly@moz-l5r8u8.range217-42.btcentralplus.com) (Quit: leaving)
[13:08:44] <Tiffany> [2440:2440:0621/090822:ERROR:url_pattern_set.cc(240)] Invalid url pattern: chrome://print/*
[13:08:44] <Tiffany> fish: Job 1, “google-chrome-stable” terminated by signal SIGBUS (Misaligned address error)
[13:08:48] <Tiffany> o_o
[13:18:21] <Moonlightning> I tried going to chrome://crash and chrome://hang on a Chrome OS machine once
[13:18:38] <Moonlightning> It didn't cause the system to crash or hang. I was disappointed.
[13:21:08] <Tiffany> the weird thing is that this happened instantly on startup
[13:21:13] <Tiffany> I wasn't navigating to chrome://print/
[13:22:35] <Moonlightning> The government was trying to control your computer and make you print out something incriminating!
[13:22:38] * Moonlightning spookyhands
[13:26:02] <Tiffany> I don't have a printer configured, although it would be nice to do that, so I can print out manuals and stuff
[13:26:21] <Moonlightning> (kimundi: nice GitHub avatar :p )
[13:30:33] <kimundi> Moonlightning: Heh, thanks :)
[13:34:33] *** Quits: ytain (ytain@moz-p96068.dsl.teksavvy.com) (Quit: Textual IRC Client: www.textualapp.com)
[13:37:35] <kimundi> Mutabah: Okay, got another C++ question. If I have a template<class T> class Foo { ... T getBaz(); ...}, how do I implement that correctly? I did template<class T> T Foo<T>::getBaz() { ... }, but that does not seem to work correctly
[13:38:31] <Mutabah> kimundi: For teplated classes, the method code needs to be in the class
[13:39:03] <Mutabah> WEll... that's how I do it, dunno if there's another way
[13:41:06] *** Quits: Binero (Binero@moz-91joat.69vi.s4ge.1810.2a02.IP) (A TLS packet with unexpected length was received.)
[13:41:14] <kimundi> Mutabah: Thanks, that fixed it
[14:01:45] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[14:01:45] *** ChanServ sets mode: +o erickt
[14:06:30] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[14:20:08] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[14:28:06] <Quxxy> WindowsBunny: Hey
[14:32:50] <cmr> TIS-100 is too easy.
[14:33:14] <cmr> >:|
[14:33:28] <cmr> And yet real-life programming is too boring... no reward cycle :P
[14:37:37] <Quxxy> For reason, typing "iocp" is *incredibly* hard
[14:37:41] <Quxxy> I keep typing "icop"
[14:41:35] *** Quits: eddyb_ (eddyb@moz-5ad.8f9.121.86.IP) (Connection closed)
[14:45:42] *** Joins: eddyb_ (eddyb@moz-5ad.8f9.121.86.IP)
[14:47:19] <Tiffany> cmr: I haven't finished the last row of levels yet
[14:47:22] <Tiffany> assuming those are the last levels
[14:53:47] <eddyb> cmr: couldn't get TIS-100 to run :(
[15:01:34] <eddyb> Quxxy: C is hard
[15:01:59] <eddyb> index finger, pressing vertically
[15:02:21] <eddyb> IOP is way more relaxed
[15:02:30] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[15:02:31] *** ChanServ sets mode: +o erickt
[15:02:40] <eddyb> great now I am typing iocp repeatedly just to feel the pain of C
[15:03:12] <cmr> erickt: r? https://github.com/serde-rs/serde/pull/92
[15:03:17] <Tobba> eddyb: I just move my hand down a row
[15:03:48] <eddyb> Tobba: if I do that, then my palms are not on top of the laptop anymore
[15:03:55] <Tobba> oh, laptop
[15:03:58] <Tobba> fuck those keyboards in general
[15:04:04] <eddyb> and there's some friction involved in doing that
[15:04:07] <Quxxy> eddyb: Actually, it was more of a synchronisation issue between my hands
[15:04:13] <Quxxy> I guess they're running in different threads
[15:04:20] <Quxxy> One little race condition, *bam*, typos
[15:04:22] <eddyb> Tobba: it doesn't help that I have the longest fingers (out of everyone I know :))
[15:04:51] <Tobba> I have incredibly massive hands as well
[15:04:58] <eddyb> Quxxy: my point was that the threads weren't doing the same kind of work, harder to sync :D
[15:05:04] <Tobba> I just type by slightly shifting my hands around and using any finger for any key instead
[15:05:09] <Tobba> (it's faster, but more error prone)
[15:07:13] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[15:09:23] *** Joins: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se)
[15:17:46] <Quxxy> Wheee!  std and libc have different c_void types!
[15:21:39] <cmr> Quxxy: std exposes a c_void?
[15:21:53] <Quxxy> Sort of; I need AsRawHandle
[15:21:57] <Quxxy> And that returns a HANDLE
[15:22:01] <Quxxy> Which is really a *mut c_void
[15:22:33] <cmr> that seems bad (because of what you just mentioned; c_void is not a primitive type and the libc that std uses is not the same libc applications can use)
[15:22:48] <cmr> You should open an issue.
[15:22:58] <eddyb> std's c_void is libc's c_void
[15:23:05] <eddyb> the issue is incompatible libc crates
[15:23:08] <cmr> eddyb: different versions of libc
[15:23:20] <cmr> that's what I said ;P
[15:23:29] <Quxxy> cmr: Well, given that AsRawHandle is unstable, is there really any point? :P
[15:23:39] <eddyb> just don't mention types
[15:23:42] <eddyb> as *mut _ works
[15:24:49] <cmr> Quxxy: I guess not, but if it is ever stable this issue will rear its head.
[15:25:44] <Quxxy> Presumably, std would just have to make sure its definition of HANDLE is public, and have libc re-export it
[15:26:10] <cmr> libc doesn't depend on std.
[15:26:59] <Quxxy> No, but AsRawHandle is in std (I think); so it would have to make public types it depends on, which would include HANDLE and c_void... oh, you mean crates.io libc is no_std?
[15:27:46] <cmr> the crates.io libc is not no_std, but libc shouldn't have dependencies on std.
[15:28:02] <Quxxy> ... Cargo feature libc_depend_on_std_so_the_types_match? :P
[15:28:14] <cmr> Yeah I guess :\
[15:29:02] <Quxxy> This is fun; I'm trying to learn IO completion ports... but I can't get the write to *actually* be asynchronous
[15:31:45] *** burntsushi__ is now known as burntsushi
[15:31:48] *** Quits: eddyb_ (eddyb@moz-5ad.8f9.121.86.IP) (Connection closed)
[15:31:49] *** ChanServ sets mode: +o burntsushi
[15:31:52] *** Joins: eddyb_ (eddyb@moz-5ad.8f9.121.86.IP)
[15:44:25] *** Quits: det (chris@moz-6q2one.lv.cox.net) (Quit: Leaving)
[15:44:26] *** Joins: det- (chris@moz-6q2one.lv.cox.net)
[15:44:31] *** Quits: det- (chris@moz-6q2one.lv.cox.net) (Connection closed)
[15:44:32] *** Joins: det (chris@moz-6q2one.lv.cox.net)
[15:55:13] <Layl> I think I'm gonna do a nice game of micro-optimization
[15:55:16] <Layl> because I feel like it
[15:55:41] *** Quits: spider-mario (spidermario@moz-coblcf.fbx.proxad.net) (A TLS packet with unexpected length was received.)
[15:55:41] <Layl> let's see how efficient I can get a hexstring-to-bytearray conversion
[15:58:24] <eddyb> http://dberard.com/home-built-stm/electronics/
[15:58:38] <eddyb> I wanted to do this 4 years ago, maybe it's gotten easier since :D
[16:05:26] *** kimundi is now known as zz_kimundi
[16:10:10] <cmr> eddyb: what was the error launching TIS-100?
[16:10:36] *** Joins: Lilly (Lilly@moz-pfkvo9.bredband.comhem.se)
[16:10:36] <eddyb> cmr: there's no error, I can hear the startup sequence but the window is black
[16:10:40] <eddyb> and it's not redrawing
[16:11:04] <cmr> hrm, I assume glxgears works?
[16:11:17] <eddyb> TF2 and DOTA2 both work
[16:11:20] <cmr> alright
[16:11:30] <cmr> how annoying!
[16:11:37] <eddyb> tried them in case the chroot didn't have proper GL access
[16:12:15] <Tiffany> hmm
[16:14:37] *** Joins: Oflor (Oflor@moz-482d77.dsl.orel.ru)
[16:20:33] <Tiffany> layl: so you can extract a nibble without error checking doing if v < 0x3A { v & 0xF} else { (v & ~0x60) + 9 }
[16:33:18] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[16:33:18] *** ChanServ sets mode: +o erickt
[16:38:01] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[16:46:59] *** Quits: cow_2001 (un@moz-pk4.og5.226.188.IP) (Quit: ASCII Muhammad - @o<-<)
[16:52:13] *** Joins: panicbit (panicbit@moz-vqobnf.dip0.t-ipconnect.de)
[17:05:36] *** Joins: yjv (yjv@moz-ll38tk.pa.comcast.net)
[17:20:06] <WindowsBunny> Quxxy: With 1.1 c_void will be stable in std
[17:20:13] <WindowsBunny> Quxxy: So I'll rely on that instead of libc
[17:20:19] <Quxxy> WindowsBunny: k
[17:20:25] <WindowsBunny> Quxxy: thus making my HANDLE compatible with std handles, probably
[17:21:02] <WindowsBunny> Quxxy: Do you need help with IOCP?
[17:21:28] <WindowsBunny> cmr: It's only because there was a thick layer of hair and dust and crumbs on my floor
[17:21:41] <WindowsBunny> cmr: so if you looked closely you saw tons of larvae squirming about
[17:21:54] <WindowsBunny> cmr: I just vacuumed most of them though
[17:21:56] <Quxxy> WindowsBunny: I'm not ready to give up just yet... I'm going to try translating an existing bit of code
[17:22:05] <Quxxy> Though I still don't understand if I was doing something wrong or not
[17:22:25] <fkaa> is this font too fonty? http://puu.sh/ixoiZ/79a30e6cd1.png
[17:22:38] <WindowsBunny> Quxxy: I already made several examples using iocp, so I know exactly how to use it
[17:23:18] <cmr> fkaa: seems fine to me
[17:23:34] <Quxxy> WindowsBunny: Is it normal for calls to WriteFile on a handle attached to an IOCP to complete synchronously?
[17:23:58] <Quxxy> I was expecting to get FALSE and an error of ERROR_IO_PENDING
[17:24:04] <Quxxy> But I kept getting TRUE back
[17:24:20] <Quxxy> I don't know if that's because I was on the main thread, or I'd screwed something else up
[17:25:30] <WindowsBunny> Quxxy: did you bind the HANDLE to the iocp
[17:25:40] <WindowsBunny> using CreateIoCompletionPort?
[17:25:48] <Quxxy> I believe so
[17:26:11] <WindowsBunny> Quxxy: Are you using WriteFile and passing an OVERLAPPED structure?
[17:26:39] <Quxxy> I was... although I ended up deleting that because I thought maybe I was supposed to use WriteFileEx, which appears to be a *different* kind of asynchonrous system :P
[17:27:01] <WindowsBunny> yeah, WriteFileEx uses a callback instead
[17:27:06] <WindowsBunny> which is not what you want for iocp
[17:27:18] <WindowsBunny> Quxxy: Also, did you create the file with FILE_FLAG_OVERLAPPED?
[17:27:43] <Quxxy> I used .flags_and_attributes(win32::winapi::FILE_FLAG_OVERLAPPED) on an OpenOptions to make it
[17:29:05] <WindowsBunny> Quxxy: well assuming you're using WriteFile, with a handle that is associated with an iocp, and you passed and overlapped to WriteFile and you opened the file with the overlapped flag
[17:29:12] <WindowsBunny> Quxxy: Then it should be completing asynchronously
[17:29:19] <Quxxy> HMm
[17:29:28] <Quxxy> Well, it's 3:30 AM, so I doubt I'll have another attempt tonight :P
[17:29:30] <WindowsBunny> Quxxy: can I see ur coeds
[17:33:56] <Quxxy> WindowsBunny: https://gist.github.com/052f994a3af311dd406f
[17:34:12] <Quxxy> Should run in cargo script
[17:35:39] * WindowsBunny sneezes viciously
[17:35:43] <fmtq> derp
[17:35:58] <WindowsBunny> all this dust in the air from vacuuming is making me sick
[17:36:11] <Skyler> the alternative is beetles
[17:36:36] *** Joins: madmalik (uid13697@moz-lfin5p.brockwell.irccloud.com)
[17:38:29] <WindowsBunny> Skyler: the larvae are grosser than the beetles
[17:38:47] <Skyler> yuck
[17:39:23] <cmr> WindowsBunny: the fact that your floor got gross enough for that to happen disgusts me
[17:39:52] <Tobba> you expect a bunny to handle a vacuum cleaner?
[17:55:35] <cmr> Ok how the hell do I use AVX intrinsics with clang
[17:55:57] <cmr> I define __AVX2__ and include immintrin.h and I get crap like error: unknown type name '__m256i'
[17:56:24] <cmr> ok I need to also define __AVX__ because clang won't do it for me :(
[17:57:23] * WindowsBunny defines __cmr__
[18:00:12] <huon> cmr: um, isn't that -march=native (or some specific cpu that supports AVX2?)
[18:00:46] <cmr> huon: no, that's just a hint to the code generator :(
[18:01:05] <cmr> woo hit a clang ice
[18:01:06] <cmr> fatal error: error in backend: Do not know how to split the result of this operator!
[18:01:44] <cmr> gcc can't even deal with its avx2intrin.h
[18:01:58] * cmr sighs and writes some assembly
[18:02:19] <huon> cmr: wfm
[18:02:41] <huon> I know mtune is just a hint, but march is more than that
[18:03:17] <Tobba> I like how wikipedia tells you exactly how to synthezise VX
[18:04:13] *** Quits: Quxxy (chatzilla@moz-efh10q.internode.on.net) (Ping timeout: 121 seconds)
[18:04:15] *** Joins: sigma (sigma@moz-l8bauc.range217-44.btcentralplus.com)
[18:05:43] <Tobba> just, good to know information
[18:06:20] <cmr> AVX-512 has 16K of SIMD registers.
[18:06:42] <cmr> huon: In what way? afaik march is always just a "you are allowed to emit these instructions"
[18:06:54] <Tobba> yikes, that's a quarter the size of the L1
[18:07:10] <cmr> (whereas mtune in theory tweaks which timing/latency/whatever models the compiler uses)
[18:07:13] <cmr> (afaik)
[18:07:28] <huon> cmr: the latter is what I thought you meant by hint
[18:07:56] <huon> cmr: in any case, -march=native definitely makes `#include <immintrin.h> int main() { __m256i d; }` compile for me
[18:08:19] <cmr> huon: Ohh I know what the issue is
[18:08:32] <cmr> no I don't
[18:09:09] <huon> how about -march=core-avx2?
[18:09:10] <cmr> huon: it works with gcc for me, but not clang.
[18:09:19] <cmr> hm, that does work.
[18:09:22] <cmr> strange.
[18:09:30] <cmr> I do have avx/avx2 in /proc/cpuinfo
[18:09:36] <huon> clang isn't detecting what native is properly?
[18:09:40] <cmr> I guess
[18:11:25] <cmr> Hm, I do think my VM is messed up somehow.
[18:11:40] <cmr> /proc/cpuinfo reports AVX2 but clang uses cpuid which doesn't lie
[18:11:52] <cmr> and I do get a sigill when executing the relevant instruction.
[18:13:34] <cmr> I guess qemu just doesn't like avx yet.
[18:22:00] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[18:22:00] *** ChanServ sets mode: +o erickt
[18:23:16] *** Quits: sigma (sigma@moz-l8bauc.range217-44.btcentralplus.com) (Ping timeout: 121 seconds)
[18:26:45] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[18:28:30] *** Joins: dpc (dpc@moz-t6gr4b.ca.comcast.net)
[18:35:25] <cmr> Layl: well, I tried to SIMDify hex decoding, but compacting a vector of nibbles (stored in the low bits of each byte in the vector) into a vector of bytes seems to be impossible.
[18:40:02] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[18:41:17] <Layl> I was more thinking it would be a neat way to learn how to avoid cache misses and pipeline flushes
[18:43:09] <Layl> also perhaps threading if I've got a large enough set of data to transform
[18:44:07] <cmr> Should be pretty easy to write a decoder at the speed of memory.
[18:46:02] <Layl> perhaps an interesting note, in how stuck I am in object oriented thinking sometimes, I end up immediately thinking about this in the terms of individual nibbles
[18:46:21] <Layl> rather than following "where there's one there's many" from data oriented design
[18:48:53] *** Joins: sigma (sigma@moz-l8bauc.range217-44.btcentralplus.com)
[18:49:58] <Astrum|Lap> dod is great
[18:50:18] <Layl> I like to combine the two in my stuff
[18:50:22] <lahwran> teach me about dod!
[18:50:28] <lahwran> I still am not completely clear what that means
[18:50:32] <Layl> sometimes object oriented is a better approach, sometimes it isn't
[18:50:56] <fkaa> lahwran: link coming up
[18:51:02] <cmr> lahwran: there's a book: http://www.dataorienteddesign.com/dodmain/
[18:51:08] <lahwran> is it a good one
[18:51:12] <Layl> sometimes you can combine data and object oriented fluently without much problem
[18:51:12] <lahwran> @fkaa
[18:51:21] <fkaa> courtesy of dzmitry https://github.com/gfx-rs/gfx/blob/master/info/research.md
[18:51:28] <lahwran> fkaa: your links about it have often confused the hell out of me :p
[18:52:51] <fkaa> not even sure how to pronounce his name :o
[18:53:15] <cmr> it's pronounced, "kvark" :P
[18:53:42] <Layl> it's actually pronounced "throatwobbler mangrove"
[18:54:12] <cmr> heh
[18:56:54] <XMPPwocky> alright, grappling hook time
[18:58:48] *** Quits: dpc (dpc@moz-t6gr4b.ca.comcast.net) (Ping timeout: 121 seconds)
[19:26:46] <eddyb> https://news.ycombinator.com/item?id=9753730
[19:26:58] <eddyb> Tobba: ^^ pcwalton's answer there might be of use to you
[19:28:32] *** Joins: RC9 (RCIX@moz-gqi.dfa.8.198.IP)
[19:28:52] <Tobba> eddyb: sounds about right
[19:29:42] <eddyb> https://news.ycombinator.com/item?id=9752974
[19:29:47] <eddyb> > Tooth fillings and bone conduction could pick up AM signals, because of the nature of AM.
[19:30:07] <eddyb> hah that's crazy, I wonder if anyone "heard voiced" from it
[19:30:59] <Tobba> I've seen some weird feedback loops in amplifiers become ad-hoc AM receivers
[19:31:04] <Tobba> it actually sounds incredibly scary
[19:40:17] *** Joins: blue_deref (blue_deref@moz-u9gmm1.res.rr.com)
[19:44:56] *** Quits: sigma (sigma@moz-l8bauc.range217-44.btcentralplus.com) (Ping timeout: 121 seconds)
[19:49:13] *** Quits: yjv (yjv@moz-ll38tk.pa.comcast.net) (Connection closed)
[19:53:43] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[20:01:46] *** Quits: eddyb_ (eddyb@moz-5ad.8f9.121.86.IP) (Quit: Bye)
[20:03:36] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:10:18] <WindowsBunny> cmr: now the problem is the vacuum is full, but it has carpet beetle larvae inside, and I don't want to open up the vacuum to empty it D:
[20:10:30] <cmr> Burn it with fire.
[20:10:45] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[20:10:46] *** ChanServ sets mode: +o erickt
[20:11:00] <WindowsBunny> so instead I am sitting here eating caviar
[20:11:22] <Tiffany> lahwran: data oriented design is where you build applications as transformations of  batches of data, instead of as a bunch of objects poking other objects
[20:11:50] <Tiffany> it naturally, and importantly, results in code which has very high cache efficiency, and doesn't bottleneck on memory as easily
[20:12:05] <Tiffany> which is very important in applications which deal with large amounts of data, like games
[20:12:30] <Tiffany> because the difference between iterating an array of uncached pointers and iterating a sequential array can be a hundredfold difference
[20:12:50] <cmr> (and console hardware until this most recent generation sucked0
[20:13:01] <Tiffany> no, you still need to worry about it on consoles
[20:13:10] <Tiffany> the PS4 uses GDDR5 memory, which trades latency for bandwidth
[20:13:21] <Tiffany> iirc it's something like 600 cycles worth of latency on a cache miss
[20:13:38] <cmr> I'm not saying you don't need to worry about it
[20:13:51] <Tiffany> you're saying that you can get away with brute force more easily, then?
[20:13:53] <Tiffany> I suppose that's the case
[20:13:54] <cmr> I'm saying that that 100 would be a 1000 or more on older consoles since they had a deep pipeline and no cache
[20:13:57] <WindowsBunny> linked lists on the PS4 are brutal
[20:14:05] <cmr> little to no
[20:14:08] <Tiffany> yeah, linked lists are always brutal
[20:14:17] <Tiffany> hope you're not trying to write a game in lisp
[20:15:03] <WindowsBunny> but you can feed your data to the GPU on the PS4, then things are okay
[20:15:31] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[20:16:55] <Tiffany> I'm trying to verify what I said about the PS4 latency and having trouble
[20:17:02] <Tiffany> apparently GDDR5 has a CAS latency of 15
[20:18:50] <Tiffany> I don't really know what a CAS latency is
[20:19:48] <cmr> welcome to DRAM, it's magical!
[20:20:02] <Tiffany> apparently it's the time to access a specific memory column
[20:20:10] <Tiffany> wikipedia does not, however, describe what a memory column is
[20:20:16] <Tiffany> or more importantly, how big is it
[20:21:14] <Tiffany> wait what, DRAM is one byte at a time?
[20:21:25] <Tiffany> at what point does it turn into a cache line at a time?
[20:22:12] <Tiffany> okay
[20:22:53] <Tiffany> so a cache line is split up into 8 words to be requested, with the most important word coming first (and then the rest in left to right? idk)
[20:23:11] <Tiffany> oh, this makes more sense
[20:23:18] <fkaa> that hardware stuff all sounds magic to me
[20:23:21] <Tiffany> and then each word is built out of 8 CAS accesses
[20:23:23] <Tiffany> with some overhead
[20:23:42] <Tiffany> so a CAS access may take only 2 nanoseconds to access a single byte, but then it takes 20 nanoseconds to access the first word
[20:23:48] <Tiffany> and 90 to access all 8 of one cache line
[20:27:37] <Tiffany> I'm not sure in which way GPUs have more latency while having lower bandwidth
[20:29:34] <Tiffany> I can't find any concrete information on how much latency the PS4 has
[20:29:45] <Tiffany> only internet commentators arguing over whether it's better than the xbox one
[20:30:10] <cmr> my understanding is that it's pretty much just an AMD PC.
[20:30:21] <Tiffany> well, kind of cmr
[20:30:29] <Tiffany> it uses a custom SoC from AMD
[20:30:34] <Tobba> the memory latency can be compensated for anyways since you have pretty good control
[20:30:38] <Tiffany> and it uses GDDR5 instead of DDR3
[20:30:38] <cmr> yeah but it's GCN.
[20:30:49] <Tiffany> it's still an APU, yeah
[20:31:23] <Tiffany> so I looked up for GDDR5 in general (as opposed to fo rthe PS4 specifically)
[20:32:29] <Tiffany> on some GPUs, the memory latency is a near constant 500 cycles
[20:32:40] <Tiffany> but it's all over the board
[20:33:23] <Tiffany> http://www.sisoftware.net/images/gp_lat_global.png only the HD 6850 on this uses GDDR5, the 660TI uses DDR5(???), the 8800 and 260 use GDDR3, and the rest use DDR3
[20:34:22] <Tiffany> it looks like the only ones that score under 300 are using DDR3 (intel and GT 555M) but it's hard for me to tell since it's colour coded
[20:35:09] <Tiffany> I can clearly see which one is the HD8650 though, and that one starts out just above 300 cycles
[20:37:21] <fkaa> xbone and the ps4 use the same gpu/cpu combo right?
[20:37:54] <Tiffany> I think they use different GPUs
[20:38:04] <Tiffany> they both have custom  SoCs from AMD too, but they are both APUs
[20:38:19] <Tiffany> the xbox one doesn't use GDDR5, for system memory at least
[20:38:22] <Tiffany> I don't know if it has unified
[20:40:00] <Tiffany> apparently the PS4's APU is the most powerful they have built
[20:40:23] <Tiffany> it looks like the PS4 GPU is a bit better than the xbox one GPU
[20:41:31] <Tiffany> I don't think anyone has bought a PS4 because it has a 15% faster GPU, though
[20:41:44] <Tiffany> well, someone probably has, but it's not a very good reason
[20:41:47] <WindowsBunny> I'm waiting for AMD Zen
[20:42:12] <Tiffany> people who play halo got xbox ones, people who .. I don't know what huge exclusives the PS4 have.. got PS4s
[20:42:29] <Astrum|Lap> my friend just got a ps4 yesterday actually
[20:42:37] <Tiffany> I wouldn't mind having one
[20:42:43] <Tiffany> it's certainly cheaper than building a gaming PC
[20:42:50] <Astrum|Lap> he doesn't want to support MS apparently
[20:43:22] <Astrum|Lap> eh, I'm building a gaming PC, but I can also program on it
[20:43:24] <Tiffany> I don't really care all that much for exclusives
[20:43:30] <Astrum|Lap> which is why I'm not much of a console person
[20:43:38] <Tiffany> besides nintendo and halo, they tend to be pretty bland
[20:44:07] <Tiffany> yeah
[20:44:12] <Tiffany> I wish I could install linux on a PS4
[20:44:21] <Tiffany> then it would be a very affordable PC
[20:44:51] <cmr> I didn't actually look into it but I saw a few steamboxes got announced for preorder
[20:45:09] <Tiffany> will the steamboxes be competitively priced?
[20:45:18] <cmr> I don't know, I didn't look into it
[20:45:29] <RC9> the prices on the 2 announced are iirc
[20:45:32] <Astrum|Lap> alienware one is 450
[20:45:32] <Tiffany> I'm expecting what are essentially alienware PCs but with a steam logo and with a controller included
[20:45:32] <RC9> 450 and 500
[20:45:33] <RC9> usd
[20:45:37] <Astrum|Lap> syber is 500
[20:46:00] <Astrum|Lap> I do want to try out the steam controller
[20:46:05] <RC9> it looks good assuming A: all you care about is steam games and B: it actually properly runs the majority of the steam library
[20:46:22] <Tiffany> right now about a quarter of the games on steam run for linux
[20:46:34] <Tobba> a quarter?
[20:46:39] <Tiffany> I expect there to be a massive drop in the amount of games being released for linux in the next couple months, so they can all be launch titles on the steambox
[20:46:49] <Tobba> if I select linux only my whole library disappears, except for all valve games
[20:46:51] <RC9> steambox is functionally linux though
[20:46:55] <WindowsBunny> The AMD Quantum looks like the perfect steambox
[20:46:58] <RC9> isnt it?
[20:47:01] <Tiffany> tobba: valve and indie games make up a large amount of the linux games
[20:47:06] <cmr> 199 of my 319 games are on linux
[20:47:08] <RC9> linux with a healthy coating of valve sugar
[20:47:14] <Tiffany> there's also the uncounted number of games which could support linux which don't
[20:47:21] <cmr> RC9: yes.
[20:47:22] <Tiffany> you know, all of the games made with game maker, unity, unreal
[20:47:25] <Tiffany> soruce
[20:47:30] <WindowsBunny> srsly, Project Quantum has dual Fury X GPUs
[20:47:34] <RC9> so i dont see why theyd do steambox games that arent on linux
[20:47:49] <cmr> well they literally can't.
[20:47:59] <RC9> unless cash grab, and as much money as valve makes i cant cite obvious cash grabs that have worked for them recently
[20:48:02] <cmr> unless they want to do grid style streaming, which sucks.
[20:48:10] *** zz_kimundi is now known as kimundi
[20:48:39] <RC9> ini home streaming, do we know if that will work
[20:48:45] <RC9> from the steambox to thing
[20:48:46] <RC9> s
[20:49:01] <RC9> because that suddenly becomes a major selling point for me if i can stream to my surface
[20:49:12] <RC9> most of, if not all, the heavyweight games i play are on steam
[20:49:37] <c74d> Gankro: you were asking for review of <http://cglab.ca/~abeinges/blah/turpl/…>? In <http://cglab.ca/~abeinges/blah/turpl/conversions.html#transmuting-types>, s/can't emphasize/& enough/ .
[20:50:22] <c74d> I think it's “guardrails”, not “railguards”? Google Ngram Viewer has no results for “railguards”.
[20:51:08] <Tiffany> RC9: all of the games which will run on the steambox say so on their store page
[20:51:09] <c74d> More commata could be good.
[20:51:28] <Tiffany> from what I remember, steamOS is derived from debian
[20:51:33] <Tiffany> but with up to date packages
[20:51:38] <Tiffany> like, they use the package manager
[20:51:49] <Tiffany> or maybe it was ubuntu, that would make more sense
[20:52:02] <Tiffany> anyway, it's a linux distro with boot-to-big-picture-mode and automatic updates
[20:52:07] <RC9> yeah
[20:52:16] <RC9> that makes me not hopeful for inhome streaming though :(
[20:52:22] <RC9> did they like, give up on that feature
[20:52:24] <cmr> Tiffany: they nuked ubuntu for debian.
[20:52:32] <Tiffany> in-home streaming is going fine
[20:52:39] <Tiffany> last time I used it, it was quite buggy, however
[20:52:47] <c74d> “boot-to-big-picture-mode”? meaning bootsplash, or kiosk mode?
[20:52:49] <Tiffany> I think you need to have the same resolutions of monitor plugged in still
[20:52:53] <RC9> really? last i checked was 
[20:52:54] <RC9> that
[20:52:55] <Tiffany> it doesn't create a fake screen or anything
[20:53:03] <RC9> you can only stream off a windows host
[20:53:09] <RC9> which would exclude steamos boxes
[20:53:09] <Tiffany> oh, you can?
[20:53:14] <Tiffany> I thought you could stream off any hosts
[20:53:23] <Tiffany> I tried playing a game on my linux laptop from a windows box
[20:53:35] <RC9> *SteamOS, Linux, and Mac OS X stream hosting coming soon.
[20:53:37] <RC9> yeah :(
[20:53:38] <Tiffany> the windows box has a 1440x900 monitor and I have two monitors, one 1366x768 and one 1920x1080
[20:53:41] <RC9> hopefully that means itll work
[20:54:05] <Tiffany> does anyone know if they have added resolution matching? it's pretty important
[20:54:49] <Tiffany> I suppose if it comes to it, you could use one of those tools which lets you create fake monitors on windows
[20:55:02] <RC9> it doesnt match resolutions? o.O
[20:55:18] <Tiffany> last time I used it, I ended up with a window of resolution 1440x900 on my 1920x1080 screen
[20:55:24] <Tiffany> and it couldn't be resized
[20:55:31] <Tiffany> like, it didn't even do scaling
[20:55:40] <RC9> ew
[20:55:43] <cmr> grrr what the fuck why is there no bswap instrinsic in clang.
[20:56:12] <Gankro> c74d can you log an issue againat the repo (or submit a patch!)?
[20:56:14] <Tiffany> imagine trying to stream to your TV and having it be cropped because you have a 720p TV and a 1080p monitor
[20:56:16] <Tiffany> or vise verse
[20:56:18] <Gankro> On phone
[20:56:26] <Tiffany> versa?
[20:56:41] <c74d> Gankro: hm, I'd be doing that from a phone too, but I could.
[20:56:45] *** Joins: niconii (nicole@moz-r8dlmh.frgo.qwest.net)
[20:57:00] <Tiffany> but yeah
[20:57:03] <Tiffany> the last time I used it
[20:57:11] <Tiffany> steam in-home streaming was a glorified VNC
[20:57:16] <RC9> how was the controls
[20:57:19] <RC9> laggy? or no
[20:57:21] <Tiffany> but with X.264 encoding and mouse grab
[20:57:22] <Tiffany> eh
[20:57:38] <cmr> The one time I saw it IRL it was not very laggy but the quality was meh
[20:57:43] <Tiffany> because wifi is unreliable, there were a few quarter-second hiccups
[20:57:46] <cmr> but this was when it was like first released.
[20:57:51] <Tiffany> but there was essentially no latency
[20:57:58] <Tiffany> and that could probably be helped by having a better router
[20:58:48] <Tiffany> at one point, I ended up with some kind of bug where I managed to minimize the game I was playing
[20:58:57] <Tiffany> which left me looking at a windows desktop, but unable to make any inputs
[20:59:03] <Tiffany> the inputs went to the game, not to windows
[20:59:21] <Tiffany> I think they've fixed that, but I'm not sure
[20:59:35] <cmr> Layl: well it's broken but https://gist.github.com/anonymous/206a342b2de33edb45cf
[20:59:55] <cmr> should in theory perform about 2/3 cycles per byte.
[20:59:55] *** Joins: brson (brson@moz-mm0.ktd.219.104.IP)
[20:59:55] *** ChanServ sets mode: +o brson
[21:00:08] <Layl> cmr, have I unintentionally nerd sniped you a few hours ago?
[21:00:10] <Tiffany> oh my
[21:00:12] <cmr> yes
[21:00:13] <cmr> yes you have
[21:00:19] <Tiffany> I didn't even think of SIMD, cmr
[21:00:35] <Tiffany> what does set1_epi8 even do?
[21:00:52] <cmr> packs a byte into every lane in a SIMD vector.
[21:01:54] <cmr> e packed integer 8?
[21:01:56] <cmr> I don't really know
[21:02:15] <cmr> I've had basically this code for a while, I've been poking at it to try and get it to work.
[21:02:24] <cmr> without killing performance
[21:02:26] <cmr> not sure if possible
[21:02:45] <Tiffany> I wonder if there's anyone out there who needs to decode base16 at a gigabyte per second
[21:02:54] <Tiffany> per core
[21:02:59] <cmr> oh this can go much faster than that.
[21:03:10] <Tiffany> oh
[21:03:17] <Tiffany> you said it was 2/3 cycles per byte and I extrapolated
[21:03:30] <Tiffany> oh
[21:03:31] <Tiffany> that's two thirds
[21:03:33] <Tiffany> not two or three
[21:03:35] <Tiffany> hah
[21:03:36] <cmr> yeah sorry
[21:03:54] <Tiffany> I guess it would have been 2-3 cycles per byte if it was that
[21:03:56] <cmr> about 20-25 cycles (I haven't really counted that well) for 32 bytes.
[21:04:13] <Layl> less than a cycle per byte, impressive
[21:04:21] <cmr> the magic of SIMD!
[21:04:36] <cmr> I don't know if it's possible to actually implement though
[21:04:58] <cmr> this is the first SIMD I've written
[21:05:05] *** Joins: sigma (sigma@moz-l8bauc.range217-44.btcentralplus.com)
[21:05:48] <fkaa> looks very serious
[21:06:09] <cmr> it certainly looks impressive
[21:06:22] <cmr> and by that I mean incomprehensible without decoding the names
[21:07:22] <Layl> that sure is simd
[21:07:36] <Tiffany> what's broken about it?
[21:07:47] <c74d> rrg, according to #nixos, NixOS's Xorg requires being run as root
[21:07:51] <cmr> it outputs: 0 10 20 30 40 50 60 70 80 90 A0 B0 C0 D0 E0 F0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
[21:07:56] <WindowsBunny> c74d: lol nix
[21:08:16] <cmr> It should output: 0 1 2 3 4 5 6 7 8 9 A B C D E F 10 12 13 14 15 16 17 18 19 1A 1B 1C 1D 1E 1F
[21:08:39] <Tiffany> so it has the endianness flipped up until 10, and then it just dies
[21:08:52] <cmr> nibble-endianness, yeah.
[21:09:06] <Tiffany> I have no idea what's going on in this code, so
[21:09:20] <cmr> allow me to comment
[21:09:35] <c74d> WindowsBunny: I allege that you're just jealous because it's drawing people away from your precious Microsoft Windows!
[21:09:52] <c74d> dangit
[21:10:03] <c74d> okay no, I'm sorry, I oughtn't have engaged like that
[21:10:11] * WindowsBunny nibbles on c74d
[21:10:15] <Tiffany> Wicrosoft Mindows
[21:10:29] <cmr> looks like you set the belt to wumbo
[21:10:46] * WindowsBunny takes a nap on Tiffany's head
[21:12:48] <fkaa> how many nibbles do you have WindowsBunny 
[21:13:34] <WindowsBunny> oh gawd
[21:13:34] <WindowsBunny> pub type SecPkgContext_RemoteCredenitalInfo = SecPkgContext_RemoteCredentialInfo;
[21:13:39] <WindowsBunny> spot the difference
[21:13:50] <cmr> Credenital!
[21:14:04] <WindowsBunny> friggin backwards compatibility
[21:15:21] <cmr> Tiffany: https://gist.github.com/cmr/11238c99e16c3b18beb0
[21:16:11] <Gankro> cmr you know huon's doing simd support all summer, yeah?
[21:16:28] <cmr> Gankro: I do :)
[21:16:33] <cmr> I'm pretty excited about it!
[21:18:09] <Gankro> Rust is gonna be javascript it no time at all
[21:18:32] <cmr> I could have written this in Rust with https://github.com/huonw/llvmint but what's the point
[21:18:43] <WindowsBunny> cmr: You should've abused winapi for that
[21:19:30] <Tiffany> oh
[21:19:41] <Tiffany> so your code is like a SIMD version of that nibble expression I wrote cmr?
[21:19:49] <Tiffany> it looks similar, at least
[21:19:52] <Tiffany> which I suppose it would be
[21:19:57] <cmr> Tiffany: yeah it's the naive algorithm :P
[21:20:02] <cmr> but easy to vectorize
[21:20:08] <cmr> doing a lookup table is beyond my knowledge
[21:20:14] <Tiffany> I dread to think what the complex algorithm is
[21:20:21] <cmr> I hope there isn't one
[21:20:21] <WindowsBunny> I'm sad that AMD hasn't updated their developer manuals since 2011
[21:20:40] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[21:20:54] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:21:38] <Layl> close one, aaaalmost just messed up my acceptance to the study I'll be following next school year
[21:22:04] <Layl> because the organization that handles acceptance didn't inform me the deadline for sending in my exam results was in 2 days
[21:22:12] <cmr> whoops
[21:22:22] <Layl> and I will get my exam results in... 20 days
[21:22:40] <Layl> so I had to request a delay for that
[21:22:44] <Tiffany> I'm guessing it's the masking bit that's fudged up?
[21:22:53] <cmr> Tiffany: yeah.
[21:22:55] <Tiffany> also, that addition of 9 seems redundant
[21:23:02] <cmr> you're right
[21:23:10] <cmr> should instead subtract by a different constant
[21:24:10] <cmr> the pext is going the "wrong way aroudn"
[21:24:22] <Tiffany> I think your pseudocode for pext is incorrect but I get the gist
[21:24:34] <cmr> oops yeah
[21:24:37] <cmr> should have a secondary index
[21:25:22] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[21:25:32] <Tiffany> what happens when you shift NIBMASK so it starts with F?
[21:25:46] <cmr>  all 0's since those nibbles are empty
[21:25:54] <Tiffany> oh
[21:25:55] <Tiffany> I see
[21:26:36] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[21:26:36] *** ChanServ sets mode: +o erickt
[21:30:07] <Tiffany> I'm guessing winterbunny is someone else, windowsbunny?
[21:30:31] <WindowsBunny> Tiffany: wat
[21:30:53] <Tiffany> a person called Winterbunny apparently modified sethbling's mario AI to play mario kart
[21:30:58] <WindowsBunny> Tiffany: not me
[21:31:16] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[21:37:16] <RC9> thats cuz windowsbunny is hot, not cold
[21:37:20] <RC9> ;)
[21:56:14] *** Quits: brson (brson@moz-mm0.ktd.219.104.IP) (Quit: leaving)
[21:58:28] *** Quits: Lilly (Lilly@moz-pfkvo9.bredband.comhem.se) (Quit: bajs)
[22:01:36] *** Quits: sigma (sigma@moz-l8bauc.range217-44.btcentralplus.com) (Ping timeout: 121 seconds)
[22:06:47] <RC9> hey so
[22:07:00] <RC9> im messingaround with my music library, trying to convert out of flac (because hard drive space)
[22:07:17] <RC9> and im sitting on some flac files mediamonkey will play but foobar says is corrupted when i try to play or convert :/
[22:07:21] <RC9> any ideas?
[22:12:38] <cmr> what does vlc say?
[22:13:16] <RC9> sec, lemme locate another
[22:15:39] <RC9> huh
[22:15:51] <RC9> at least for this flac file
[22:15:54] <RC9> its actually broken
[22:16:00] <RC9> and ive just been seeing the non broken mp3 version
[22:16:07] <RC9> well i have other stuff to do
[22:16:14] <RC9> il go find the rest of the broken ones later
[22:27:17] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[22:27:17] *** ChanServ sets mode: +o erickt
[22:32:02] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[22:49:15] *** Quits: fkaa (fkaa@moz-501od2.business.telia.com) (Ping timeout: 121 seconds)
[23:00:36] *** Joins: rdgawdzi (sid91768@moz-36ps68.ealing.irccloud.com)
[23:03:30] *** Joins: dpc (dpc@moz-t6gr4b.ca.comcast.net)
[23:09:06] <c74d> !explain 0119
[23:09:07] <rustbot> https://doc.rust-lang.org/error-index.html#E0119
[23:09:35] <c74d> :(
[23:10:00] <c74d> I'm installing X! :C
[23:10:49] *** Quits: Dr-Emann (Dr-Emann@moz-80o.ltq.115.24.IP) (Ping timeout: 121 seconds)
[23:12:13] <c74d> my hands are dirty from fetching my cat in from the dirty outdoors
[23:12:30] <c74d> my hands were dirty as I consigned this laptop to X
[23:12:41] <c74d> this feels symbolic
[23:12:59] <Layl> what kind of base64 does cryptopals even want people to convert the hex string to
[23:13:28] <cmr> Layl: the standard base64?
[23:14:33] <Layl> I wasn't aware there was an agreed upon common standard for what is "base64"
[23:15:16] <cmr> RFC3548
[23:15:48] <Layl> I see
[23:16:21] <niconii> Layl: yeah, that one worked fine for me
[23:16:30] <cmr> if you're on a YooNAX platform, there's a base64 tool you can use as a reference impl.
[23:17:02] <Layl> huh I'm reading here that RFC3548 is actually obsolete
[23:17:58] <cmr> oh yeah it's right there on the rfc reader
[23:18:02] <cmr> https://tools.ietf.org/html/rfc4648
[23:18:09] <c74d> Layl: if you're reading the HTML version of an IETF RFC, it should have a link to the obsoleting RFC.
[23:18:28] <cmr> standards track vs informational
[23:18:40] <niconii> doesn't seem like base64 actually changed between the two, though
[23:23:19] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[23:48:02] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[23:55:26] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[23:55:26] *** ChanServ sets mode: +o erickt
[23:59:22] *** kimundi is now known as zz_kimundi
[23:59:26] *** Joins: yjv (yjv@moz-ll38tk.pa.comcast.net)
