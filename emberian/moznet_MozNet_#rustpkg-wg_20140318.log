[09:25:13] *** Joins: Seldaek (seld@moz-5DEA7688.ch)
[12:05:45] *** Quits: o11c (ben@3492CB95.7BF6B158.8D3CC9DB.IP) (Ping timeout)
[12:15:01] *** Joins: o11c (ben@moz-C0FD33EF.a357.priv.bahnhof.se)
[16:24:52] <Seldaek> wycats: heya, just wanted to say I'm glad to have you guys on board for this. I'm the lead of composer (php's npm/bundler-inspired dep manager) and I am quite happy if this goes in a sane easy to use direction :)
[16:25:26] <wycats> :)
[16:25:32] <cmr> oh!
[16:25:36] <cmr> I forgot about this channel
[16:25:52] <o11c> heh, me too
[16:25:54] <Seldaek> also happy to review and give feedback, we did some slightly different things in composer that may or may not be interesting
[16:25:56] *** ChanServ sets mode: +o cmr
[16:26:22] <wycats> Will definitely ping you for feedback
[16:26:39] <wycats> Personally, the lock file and conservative updating are the parts I am most proud of
[16:26:49] <Seldaek> yeah this is a must 
[16:27:04] <Seldaek> and I guess the main thing we snatched from bundler :)
[16:28:08] <Seldaek> anyway I'm watching the ml, curious to see your first draft
[16:28:17] *** cmr changes topic to 'Announcing cargo! https://github.com/carlhuda/cargo'
[16:28:38] <o11c> wycats: hm ... what is the expected behavior if, in two separate terminals, the user runs 'cargo install foo' and 'cargo install bar' both of which depend on libqux ?
[16:29:16] <o11c> if you do no lock, Bad Things happen; if you do a global lock, you cna't do parallel, but if you do a lock per-package then you can install them in parallel ...
[16:29:24] <o11c> but only if you don't have to deal with conflicts
[16:29:46] <cmr> the lockfile is about package versions
[16:29:48] <wycats> Downloading can be done in parallel,  compilation can't (and need not be)
[16:30:22] <o11c> could probably solve that by also locking the conflicting packages ... or possibly, by only holding a global lock when doing the actual install
[16:30:28] <wycats> Probably
[16:30:43] <o11c> one of the things I *love* about Gentoo is that you can run multiple instances of emerge at the same time and it all just works
[16:31:10] <Seldaek> then again, let's hope it turns out fast enough that you never even have that problem :P
[16:31:21] <o11c> I hate coming back to Debian and being unable to 'apt-get install newprogram' at the same time as 'aptitude upgrade'
[16:31:33] <o11c> still, even parallel downloads is nice
[16:31:38] <o11c> Debian can't even do that
[16:31:53] <o11c> of course, rustc will never be fast, so ...
[16:33:35] <wycats> Multitab workflows are fraught but I will keep it in mind as we go
[16:33:48] <wycats> In the case of cargo, the only central thing is the cache
[16:34:03] <wycats> Otherwise each project has different deps etc
[16:34:31] <wycats> It seems not inconceivable that you could run two builds in parallel and dependencies would work and get compiled once
[16:34:44] <cmr> cargo-daemon!
[16:34:49] <wycats> Simple locking and parallelization would seem to be enough there
[16:35:07] <Seldaek> wycats: one thing I wondered about is regarding the resolution of deps, what do you have planned? For composer we ported https://en.opensuse.org/openSUSE:Libzypp_satsolver to php which is great but a tad slow, so I was thinking if we had a rust port of it it'd be great for both cargo and also for re-use in other languages if it has a good API. I find that most package managers have really poor solvers which is a shame
[16:35:40] <wycats> We're thinking about libgecode
[16:35:44] <wycats> Unsure yet
[16:36:19] <Seldaek> ok, is the plan to go the npm way though and just treat it all as a big tree and install things recursively to avoid dependency hell? 
[16:36:29] <Seldaek> because I guess that way you don't really need a good solver
[16:36:37] <wycats> No definitely not
[16:36:46] <wycats> I do not want servo to be 10GB
[16:36:53] <Seldaek> great :)
[16:37:03] <wycats> we can support that as an option if the solver fails
[16:37:06] <o11c> npm doesn't play nice with stufff that you want to install to ~/bin/ AFAICT
[16:37:36] <wycats> Cargo will have everything configurable
[16:37:54] <Seldaek> o11c: that's not really a big deal in practice I think, things you install globally just have their deps nested and it works well in my experience
[16:38:09] <wycats> We'll see the details
[16:38:26] <Seldaek> yes of course I was just curiou what the general idea is
[16:38:34] *** Joins: dherman (dherman@moz-62518563.mtv2.mozilla.com)
[16:39:00] <o11c> I just hope that, whatever magic is used for libraries, they are installed in a sufficiently global way that it's easy to write *ad-hoc* programs - not just full-blown packages - that use them
[16:39:08] <wycats> Seldaek: we're planning on doing a resolver to keep the community from becoming dependent on huge binary sizes
[16:39:21] <Seldaek> wycats: I ruminated on this all day waiting for the US to wake up so I'm flushing my brain at once now sorry :)
[16:39:24] <wycats> o11c: the plan is a global cache
[16:39:49] <wycats> If you want to extern a crate from the cache, you can run cargo commands to find where the -L would be in cargo
[16:40:03] <wycats> cargo build --dry-run
[16:40:05] <cmr> (RUST_PATH!)
[16:40:09] <wycats> -1
[16:40:11] <wycats> ;)
[16:40:44] <o11c> the equivalent of $(pkg-config --libs) is reasonable to expect to call from ad-hoc programs
[16:40:46] <Seldaek> cmr: all the $LANG_PATH I had to deal with made me cry :p
[16:41:17] <wycats> o11c: yeah we'll have that 
[16:41:54] <wycats> The main thing is that there may be multiple versions of the same package in there
[16:42:18] <wycats> I don't recall if extern crate can handle that
[16:42:42] <cmr> it can
[16:42:51] <cmr> extern crate foo = "foo#1.3";
[16:42:59] <cmr> a bit janky since you have to duplicate the name.
[16:43:29] <o11c> rust's version and hash thing is promising to solve a lot of these problems
[16:43:38] <Seldaek> wycats: gecode looks interesting, I didn't know of it. Still kinda wish we had a rust lib for it, but I can see that it's not as urgent as getting cargo up and running
[16:45:27] <o11c> cargo in rust shouldn't be important at this time
[16:45:46] <o11c> that's a post-1.0 thing
[16:46:56] <wycats> We're totally doing it in rust ;)
[16:47:16] <wycats> But if we use gecode we'll bind obviously 
[17:18:22] *** Quits: dherman (dherman@moz-62518563.mtv2.mozilla.com) (Quit: dherman)
[18:13:13] *** Joins: dherman (dherman@moz-24157589.mtv2.mozilla.com)
[18:13:30] *** Quits: dherman (dherman@moz-24157589.mtv2.mozilla.com) (Quit: dherman)
[18:20:10] *** Joins: dherman (dherman@moz-62518563.mtv2.mozilla.com)
[18:31:32] *** Quits: dherman (dherman@moz-62518563.mtv2.mozilla.com) (Quit: dherman)
[20:29:06] *** Joins: dherman (dherman@moz-62518563.mtv2.mozilla.com)
[22:52:48] *** Quits: dherman (dherman@moz-62518563.mtv2.mozilla.com) (Quit: dherman)
[22:59:42] *** Quits: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org) (Ping timeout)
