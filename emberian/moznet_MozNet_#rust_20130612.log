[00:00:21] <strcat> I guess that's not going to work
[00:00:36] <bblum> llvm pattern matching is such a huge kludge
[00:00:46] <bblum> (i mean its internal pattern matching)
[00:01:43] *** Joins: tikue (tkuehn@2557E599.66715431.D25A875A.IP)
[00:02:37] *** Quits: \n (NDesaulnie@2557E599.66715431.D25A875A.IP) (Ping timeout)
[00:03:25] *** Joins: \n (NDesaulnie@43CB6079.66715431.D25A875A.IP)
[00:04:40] *** Joins: doomlord (doomlod@moz-8F385DB0.range109-153.btcentralplus.com)
[00:05:22] *** Quits: \n (NDesaulnie@43CB6079.66715431.D25A875A.IP) (Ping timeout)
[00:08:31] *** Joins: \n (NDesaulnie@2557E599.66715431.D25A875A.IP)
[00:08:40] *** Joins: eholk (eholk@moz-9AB4D52F.hsd1.ut.comcast.net)
[00:08:47] *** Joins: pnkfelix1 (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[00:08:50] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[00:08:53] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[00:09:12] *** Quits: pnkfelix1 (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Max SendQ exceeded)
[00:12:52] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[00:12:52] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/T1CzqQ
[00:12:52] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[00:13:25] *** Joins: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP)
[00:14:18] <bblum> aatch: is there an issue for having a relaxed semantics atomic ordering flag?
[00:14:40] <aatch> bblum, nope, other than all the intrinsics that need to be added
[00:15:29] <aatch> I'd prefer to refactor it so it wasn't so ad-hoc...
[00:15:30] <bblum> aatch: i'm looking at this rejected pull request you made that added "Monotonic"
[00:15:48] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[00:15:48] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/Zo220g
[00:15:48] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[00:15:49] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[00:15:49] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/ojZ8zA
[00:15:49] <ghrust> 13rust/06auto 14715f259 15Steven Stewart-Gallus: Prototyped a dynamic library facility interface
[00:15:49] <ghrust> 13rust/06auto 14e25f0a8 15Steven Stewart-Gallus: Fixed up formatting, and nits
[00:15:50] <ghrust> 13rust/06auto 14a35d76b 15Corey Richardson: Fix windows code for dll
[00:15:52] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[00:16:05] <bblum> hmmm
[00:16:10] <bblum> i see an issue for it
[00:16:13] <bblum> i'm going to reopen it
[00:18:06] *** Joins: SimonSapin (simon@moz-73287A57.zone9.bethere.co.uk)
[00:18:07] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[00:18:14] *** Quits: \n (NDesaulnie@2557E599.66715431.D25A875A.IP) (Ping timeout)
[00:18:35] <aatch> bblum, if you're going diving in the intrinsics code, it would be nice if the common atomics code was refactored. The easiest way would probably be to have a special-case check for names starting with "atomic_"
[00:18:35] *** Parts: ecr (ereed@2557E599.66715431.D25A875A.IP) ()
[00:18:57] *** Joins: \n (NDesaulnie@43CB6079.66715431.D25A875A.IP)
[00:19:00] *** Quits: eschweic (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[00:19:08] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[00:19:27] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[00:19:48] <bblum> aatch: i'm not gonna deal with the intrinsics; i just want your library to provide a relaxed ordering for me
[00:20:00] <aatch> bblum, ah...
[00:21:17] <aatch> well then, I'll add the intrinsics myself later.
[00:21:36] <bblum> well
[00:21:48] <bblum> hopefully we can just reopen and merge the pull request you already made
[00:21:58] *** Quits: tjc (tjc@moz-A4D91ECF.hfc.comcastbusiness.net) (Quit: zzzzzzzzzz)
[00:22:05] <aatch> bblum, it still merges?
[00:22:15] <bblum> probably it bitrotted :P
[00:22:16] <bblum> but
[00:22:25] <bblum> mostly i wanna tag my code with a fixme and an issue number
[00:23:07] *** Quits: skchrko__ (sk@61A494B3.BA40E8A.AAC02D62.IP) (Input/output error)
[00:23:13] *** Quits: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP) (Ping timeout)
[00:23:15] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[00:23:18] <aatch> bblum, fair enough. though you can add an enum variant and it'll fall back to SeqCst anyway.
[00:23:42] <bblum> oh, you mean you wanna add the llvm backend thingie
[00:23:46] <bblum> to generate no barrier instructions too
[00:24:08] <aatch> bblum, yeah. So it's /actually/ monotonic ordering.
[00:24:16] *** Quits: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net) (Quit: ["Textual IRC Client: www.textualapp.com"])
[00:24:52] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[00:24:52] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14ef2e4c2 to 143f900dc: 02http://git.io/N3iJvQ
[00:24:52] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[00:24:54] <bblum> why is it called "monotonic"?
[00:24:54] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[00:24:54] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/8TT9cQ
[00:24:54] <ghrust> 13rust/06auto 14305f511 15Alex Crichton: Add a finally impl for `extern "Rust" fn()`
[00:24:54] <ghrust> 13rust/06auto 1478404af 15Alex Crichton: Ignore the test_package_request_version test for now
[00:24:56] <ghrust> 13rust/06auto 14e06579b 15bors: auto merge of #7056 : alexcrichton/rust/issue-4727, r=catamorphism...
[00:24:57] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[00:26:03] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[00:26:22] *** Joins: k00mi (koomi@moz-B054AB86.pools.arcor-ip.net)
[00:26:42] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[00:27:00] *** Quits: koomi (koomi@moz-202752AD.pools.arcor-ip.net) (Ping timeout)
[00:27:04] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[00:27:31] <bblum> aatch: ^
[00:28:43] *** Quits: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[00:30:02] *** Quits: eschweic (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[00:30:36] <aatch> bblum, ah, sorry, monotonic is actually 1 step up from unordered. unordered is actually kinda useless. 
[00:30:57] <bblum> what's the difference?
[00:31:03] <aatch> it's called monotonic because it can't be re-ordered with other operations on the same address
[00:31:26] <aatch> but can be re-ordered with ops on different addresses.
[00:31:43] <bblum> what would cause same-location reordering?
[00:31:55] <bblum> i didn't think that made sense, even between cores
[00:32:38] <aatch> bblum, without atomics, llvm is allowed to do things like dead-store/dead-load optimizations.
[00:34:16] <bblum> i see
[00:34:31] <aatch> basically it gives the same guarentees as Java's volatile.
[00:34:40] <bblum> sure yeah
[00:34:47] *** Quits: doomlord (doomlod@moz-8F385DB0.range109-153.btcentralplus.com) (Ping timeout)
[00:34:52] <aatch> No, wait. it doesn't even do that.
[00:35:01] <bblum> hmm, i still feel like my boolean flag doesn't need to be an atomic
[00:35:14] <aatch> bblum, monotonic is probably what you're after.
[00:35:21] <bblum> yes
[00:35:35] <aatch> if it's going to be changed by multiple threads.
[00:35:46] <bblum> hmmmm
[00:35:50] <bblum> hmm
[00:37:09] <aatch> There are also some oddities with atomics. Like, if you write to a location with a regular instruction, there is no guarentee that other threads will /ever/ see that change.
[00:37:26] <aatch> montonic guarentees that, eventually, they will.
[00:37:58] <bblum> suppose i have a regular instruction write followed by something else that causes a full barrier
[00:38:01] <bblum> then will it show up?
[00:38:55] <bblum> or do i need to have a monotonic thing to make llvm not reorder past... everything
[00:39:17] <aatch> bblum, it's an ordering thing, so any thread that sees the full barrier write will also see the previous writes.
[00:39:24] *** Joins: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP)
[00:39:53] <aatch> That may only be if the previous writes have a memory dependency on the barrier though.
[00:40:54] <bblum> hm.
[00:40:57] <bblum> of course it wouldn't
[00:41:13] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[00:41:18] <aatch> Part of the issue here is that most of this stuff it irrelevant on a lot of architectures.
[00:41:40] <graydon> dammit. bug was in the fuzzer.
[00:41:52] <aatch> graydon, fuzzer-fuzzer!
[00:41:59] *** Quits: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP) (Ping timeout)
[00:42:07] <graydon> back to having no idea why the gc isn't working
[00:42:19] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Quit: tikue)
[00:42:53] <bblum> wait, aatch, how can that make sense... the whole point of locks is so you don't have to think about memory dependency
[00:43:24] <bblum> thread a: lock(foo); sharedstate = 5; unlock(foo); signal(b);
[00:43:32] <aatch> bblum, sorry, I think I'm getting confused between different ideas.
[00:43:42] <bblum> thread b: wait(); lock(foo); assert sharedstate == 5; unlock(foo)
[00:43:57] <brson> I bugpointed!
[00:44:12] *** Quits: EXetoC (ex@moz-2DBEB1E4.customer.t3.se) (Quit: WeeChat 0.4.1)
[00:44:26] <bblum> aatch: yeah, this is all wild west to me; i grew up on x86
[00:44:30] *** Quits: kornholi (kornholi@otland.net) (Ping timeout)
[00:45:04] <aatch> bblum, ok. Sorry, I confused `volatile` semantics and the atomic semantics.
[00:45:55] <flu_> aatch, bblum - this could be a helpful read http://www.cs.umd.edu/~pugh/java/memoryModel/jsr-133-faq.html
[00:46:21] <aatch> so instructions cannot be re-ordered past atomics that are Acquire/Release or stronger.
[00:46:22] <flu_> not directly relevant, but the jvm has supported reordering and visibility barriers since forever, so they've dealt with a lot of these problems
[00:46:51] <aatch> flu_, LLVM has direct support for C++11 atomic memory model
[00:47:03] <aatch> it's just trying to sort out what means what.
[00:47:06] <erickt> graydon: thanks for the cc on https://github.com/mozilla/rust/pull/7039. How did everyone get on this fixup-the-str-module kick? I thought I was in the clear when I started all this work :)
[00:47:07] <flu_> ha! probably a far more relevant document out there then :-)
[00:47:26] <aatch> flu_, like this one: http://llvm.org/docs/Atomics.html ?
[00:47:39] *** Quits: \n (NDesaulnie@43CB6079.66715431.D25A875A.IP) (Ping timeout)
[00:48:02] <flu_> I like that they immediately delegate to the JVM spec :-P
[00:48:15] *** Joins: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net)
[00:48:19] <graydon> erickt: random triage
[00:48:46] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[00:48:50] <aatch> flu_, and the c++ one, which is why the LLVM support exists to start with.
[00:49:39] <erickt> graydon: I'm glad to see we all had roughly the same approach though. We don't have complete overlap, so I don't think I'll have wasted that much effort though
[00:49:47] <aatch> bblum, so with monotonic, regular loads/stores can be re-ordered around it.
[00:50:19] <aatch> bblum, what are you implementing btw?
[00:50:23] <bblum> sync::rwlock
[00:50:34] <bblum> it currently has a bool and an int inside of an exclusive
[00:50:38] <bblum> i am making it use xadd instead
[00:50:45] <bblum> and i think the bool can be entirely nonatomic
[00:51:00] <aatch> bblum, whats it used for?
[00:51:04] <bblum> RWARC
[00:51:05] *** Joins: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP)
[00:51:14] <aatch> I mean the bool
[00:51:18] <bblum> ah
[00:51:36] <bblum> it tells which mode the rwlock is locked in (read/write), which only affects control flow in the case of a downgrading thread
[00:52:05] <bblum> downgrade sets read_mode to true, and the downgrade unlock path queries read_mode to choose which mode to unlock for
[00:52:42] <bblum> a different reader can unset read_mode only if it's the last reader to exit, so it can never interfere with the downgrader's decision there
[00:52:52] *** Quits: eholk (eholk@moz-9AB4D52F.hsd1.ut.comcast.net) (Quit: eholk)
[00:53:05] *** Joins: Ralith (ralith@moz-50F3C77.vc.shawcable.net)
[00:53:12] *** Quits: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net) (Ping timeout)
[00:54:11] *** Joins: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net)
[00:54:53] <aatch> hmm, so does it's value need to be consistent with anything?
[00:54:56] *** Joins: kornholi (kornholi@moz-185F17B0.net)
[00:55:05] <bblum> "with anything"?
[00:55:25] <aatch> other state
[00:55:29] <bblum> it just needs to be true when the downgrader is doing its final exit, *if* the downgrader actually downgraded
[00:55:46] <aatch> so if true => i > 0
[00:55:59] <aatch> (for example)
[00:57:08] <aatch> bblum, I think you might be right, doesn't look like it needs to be atomic at all.
[00:57:37] <bblum> presently deciding which semantics to use for the fetch_adds/subs
[00:59:01] <aatch> Although unordered might be worthwhile, simply because it guarentees that the entire operation is atomic (in case you get some very odd platform in which it might not be)
[00:59:49] <flu_> since concurrency is such a gimme in rust, i'm looking forward to parallelized collections making it in. IIRC, i stumbled across a par_map implementation somewhere in the codebase
[01:00:46] <flu_> it'll be a huge plus for a developer to write something that looks pretty much procedural, but with appropriate map and fold calls, can see all their cores light up when it runs
[01:00:54] *** Quits: k00mi (koomi@moz-B054AB86.pools.arcor-ip.net) (Ping timeout)
[01:01:06] <bblum> aatch: i am told that xadd is always atomic, though, right?
[01:01:18] <bblum> like even if you don't use a barrier
[01:01:57] <bblum> or, well, if you have two xadds, they are automatically consistent wrt each other
[01:02:22] <aatch> bblum, well it's a read-modify-write operation, so it just makes sure that you don't get a write between read- and -write
[01:02:30] *** Joins: deepdog (deepdog@moz-490E834C.client.mchsi.com)
[01:03:10] <aatch> the barriers are just to make sure that any "happens-before" conditions are kept.
[01:03:42] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[01:03:59] <bblum> ok.
[01:05:10] <aatch> the only difference between non-atomic and unordered, btw, is that unordered will give you sane results in the face of a race.
[01:05:35] <bblum> how do you mean?
[01:05:48] <aatch> so there is a partial order across threads, but no global ordering.
[01:06:27] <aatch> as in, technically, if two threads try to change the same location non-atomically the result is undefined
[01:07:42] <aatch> unordered just asserts that in a race, one will come first.
[01:07:50] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Ping timeout)
[01:08:05] <bblum> because of... partial stores?
[01:08:10] <aatch> again, it's most meaningless on systems with atomic stores by default.
[01:08:13] <aatch> bblum, yep.
[01:08:14] *** Quits: kornholi (kornholi@moz-185F17B0.net) (Ping timeout)
[01:08:20] *** Joins: eholk (eholk@moz-4EB1DCC1.hfc.comcastbusiness.net)
[01:08:35] <aatch> though it's the same with a store and a load.
[01:08:52] <bblum> yeah
[01:08:56] *** Joins: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net)
[01:09:37] *** Quits: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP) (Quit: lmandel)
[01:09:57] <bblum> i'm beginning to think that if you have a location where xadd is the only way it's ever accessed, then no extra barriers are needed; is that right?
[01:10:50] <aatch> bblum, I think so.
[01:11:18] <aatch> fwiw, monotonic corresponds to C++ relaxed.
[01:11:35] *** Joins: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP)
[01:11:41] *** Quits: true_droid (Adium@moz-123FD9B8.beck.volia.net) (Quit: Leaving.)
[01:12:27] *** Joins: kornholi (kornholi@moz-185F17B0.net)
[01:12:46] *** Quits: SimonSapin (simon@moz-73287A57.zone9.bethere.co.uk) (Ping timeout)
[01:13:37] <aatch> ok, so monotonic doesn't provide any general syncronization, so you probably want that for your xadd, assuming that it's never read from.
[01:13:58] *** Joins: tikue (tkuehn@2557E599.66715431.D25A875A.IP)
[01:15:07] <brson> I have not been able to reproduce the problem on incoming using llc. I suspect we may be configuring llvm wrong
[01:15:24] *** Joins: dbaupp (Thunderbir@moz-73E90475.lns20.syd6.internode.on.net)
[01:15:45] *** Joins: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP)
[01:15:45] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/8TT9cQ
[01:15:45] *** Parts: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP) ()
[01:16:07] <brson> our register allocation passes from -time-llvm-passes looks different than llc's
[01:16:08] <aatch> brson, the ebml problem?
[01:16:13] <brson> aatch: yeah
[01:16:41] <aatch> brson, as I said, I can't even reproduce it here.
[01:16:45] <aatch> with llvm
[01:16:51] <aatch> our one
[01:17:13] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[01:17:18] *** Quits: kornholi (kornholi@moz-185F17B0.net) (Ping timeout)
[01:17:27] *** Quits: cstrahan (cstrahan@moz-4C7E5789.hsd1.dc.comcast.net) (Ping timeout)
[01:18:44] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[01:18:44] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/7POQLg
[01:18:44] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[01:18:45] *** Joins: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP)
[01:18:46] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/o1MB6A
[01:18:46] <ghrust> 13rust/06auto 145ff42ab 15James Miller: Ignore LD_PRELOAD for inherited environment test
[01:18:46] <ghrust> 13rust/06auto 14046e3f0 15bors: auto merge of #7057 : Aatch/rust/rust-ld-preload, r=graydon...
[01:18:46] *** Parts: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP) ()
[01:19:47] *** Quits: dbaupp (Thunderbir@moz-73E90475.lns20.syd6.internode.on.net) (Quit: dbaupp)
[01:20:19] *** Joins: cstrahan (cstrahan@moz-4C7E5789.hsd1.dc.comcast.net)
[01:20:42] *** Joins: kornholi (kornholi@moz-185F17B0.net)
[01:21:06] *** Joins: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP)
[01:23:23] *** Joins: dbaupp (Thunderbir@moz-73E90475.lns20.syd6.internode.on.net)
[01:23:53] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[01:24:49] *** Quits: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP) (Quit: ChatZilla 0.9.90 [Firefox 21.0/20130511120803])
[01:25:33] *** Joins: jdm (jdm@DB05BBF2.BB1F48F2.971E19F6.IP)
[01:25:42] *** Quits: terje (terje@moz-C0F75C5F.san.res.rr.com) (Ping timeout)
[01:26:39] *** Quits: kornholi (kornholi@moz-185F17B0.net) (Ping timeout)
[01:29:19] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Quit: tikue)
[01:34:22] *** Quits: cstrahan (cstrahan@moz-4C7E5789.hsd1.dc.comcast.net) (Ping timeout)
[01:35:05] *** Joins: kornholi (kornholi@moz-185F17B0.net)
[01:35:16] *** Joins: doomlord (doomlod@moz-8F385DB0.range109-153.btcentralplus.com)
[01:36:05] <strcat> rusti: 
[01:36:06] -rusti- ()
[01:36:54] <bjz> Luqman: ping
[01:37:07] <strcat> rusti: use std::iterator::*; let x = Some(5); let ys = [1, 2, 3]; for x.iter().chain(ys.iter()).advance |x| { println(x.to_str()) }
[01:37:09] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/PdAa
[01:37:43] <Luqman> bjz: pong
[01:37:56] <bjz> Luqman: done some more reorganisation of lmath
[01:38:09] <bjz> Luqman: I have some map methods
[01:38:21] *** Quits: eholk (eholk@moz-4EB1DCC1.hfc.comcastbusiness.net) (Quit: eholk)
[01:38:24] *** Quits: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net) (Connection reset by peer)
[01:38:32] <dbaupp> strcat: https://github.com/mozilla/rust/issues/5268
[01:38:36] <bjz> Luqman: not sure if I should use them to implement the component-wise ops
[01:38:37] *** Joins: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net)
[01:38:50] <bjz> Luqman: dunno how well rust optimises them
[01:39:05] <dbaupp> strcat: I'm not quite sure the best way to implement this for iterator, since it requires copy/clone (maybe)
[01:39:10] <bjz> aatch: ^
[01:39:12] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[01:39:22] <Luqman> bjz: you could give them a try and compare the llvm ir
[01:39:37] <bjz> Luqman: no idea how to do that :P
[01:39:45] <bjz> Luqman: could you help?
[01:39:55] <aatch> bjz, as a general rule, maps get optimized pretty well with the right pushes
[01:40:04] <bjz> Luqman: it might cut down on the code a ton
[01:40:09] <bjz> aatch: mmk
[01:40:12] *** Joins: tikue (tkuehn@2557E599.66715431.D25A875A.IP)
[01:40:27] <bjz> just need a bit of help I think
[01:40:53] <bjz> I'm thinking higher order functions might help a heap in cutting down the size of the code
[01:41:15] <Luqman> bjz: weren't you using them at one point?
[01:41:26] *** Joins: terje (terje@moz-C0F75C5F.san.res.rr.com)
[01:41:31] <bjz> I was toying with the idea of using them
[01:41:31] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[01:42:04] <bjz> Luqman: did you see aatch sped up rray abit?
[01:42:40] <Luqman> oh yea! i saw it last night.
[01:42:42] <Luqman> aatch: ++
[01:43:49] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[01:44:19] <bjz> Luqman: only a couple of changes too!
[01:44:21] <bjz> :)
[01:44:31] <aatch> heh, well between writing to a file and the stack-switching from the FFI call, all those prints meant a lot of time was spent in the kernel.
[01:45:09] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[01:45:32] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[01:46:42] <bjz> eh, github is down :P
[01:46:51] <bjz> http://downforeveryoneorjustme.com/github.com
[01:47:54] *** Joins: KindOne (KindOne@moz-60DAB58D.dynamic.ip.windstream.net)
[01:49:17] <cmr> https://status.github.com/
[01:49:28] <cmr> much better indicator of github's status :)
[01:50:58] <bjz> cheers cmr
[01:50:58] <heftig> github just dropped off the net
[01:51:04] <bjz> poof
[01:51:13] <bjz> *poofs*
[01:51:22] *** Parts: judder (maradukewa@85208D00.97F8E51D.E305BD61.IP) ()
[01:52:21] <heftig> last time it took then 1½ hours to restore it
[01:52:27] <heftig> er, s/then/them/
[01:52:50] <cmr> and it's back
[01:53:35] <bjz> nice!
[01:54:48] *** Joins: eholk (eholk@moz-9AB4D52F.hsd1.ut.comcast.net)
[01:55:16] *** Quits: cpeterson (cpeterson@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[01:55:38] <heftig> and it's gone again
[01:56:00] <heftig> never mind, just being slow
[01:57:10] *** Joins: cdidd (cdidd@moz-106778E9.broadband.corbina.ru)
[01:57:44] *** Quits: seth (seth@2557E599.66715431.D25A875A.IP) (Input/output error)
[02:00:10] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[02:00:12] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[02:00:38] <heftig> they're getting DDoSed.
[02:03:44] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[02:03:48] *** Joins: Benvie_ (brandon@5FD20F9A.53D07D95.EFF8B7BF.IP)
[02:03:51] *** Quits: Benvie_ (brandon@5FD20F9A.53D07D95.EFF8B7BF.IP) (Client exited)
[02:03:57] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[02:04:43] *** Quits: RMF (RMF@moz-494A6C28.dsl.telepac.pt) (Quit: Textual IRC Client: www.textualapp.com)
[02:09:11] *** Joins: pnkfelix1 (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[02:09:33] *** Quits: pnkfelix1 (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Max SendQ exceeded)
[02:13:36] *** cscottnet_away is now known as cscottnet
[02:13:40] *** Quits: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP) (Ping timeout)
[02:15:46] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[02:15:46] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14046e3f0 to 14e06579b: 02http://git.io/N3iJvQ
[02:15:46] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[02:15:50] *** Joins: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP)
[02:15:50] <ghrust> 01[13rust01] 15bors pushed 14 new commits to 06auto: 02http://git.io/z4zazA
[02:15:50] <ghrust> 13rust/06auto 1485cd1d4 15Huon Wilson: std: convert {vec,str}::to_owned to methods.
[02:15:50] <ghrust> 13rust/06auto 142b5fac7 15Huon Wilson: std: replace str::append with a method
[02:15:50] <ghrust> 13rust/06auto 14ef7e2cb 15Huon Wilson: std: convert str::repeat to a method.
[02:15:53] *** Parts: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP) ()
[02:16:23] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Quit: tikue)
[02:18:56] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (Ping timeout)
[02:21:49] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Client exited)
[02:22:43] *** Quits: jrfeenst (jrfeenst@moz-F912484F.cpe.norwoodlight.com) (Quit: jrfeenst)
[02:23:47] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[02:24:29] *** Quits: zz_kimundi (kimundi@moz-52983424.dip0.t-ipconnect.de) (Ping timeout)
[02:24:38] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[02:24:44] *** Quits: an0nymous (an0nymous@moz-A6B0CE4.tx.res.rr.com) (Ping timeout)
[02:24:45] *** Joins: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP)
[02:24:46] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14b92d7dd to 14e06579b: 02http://git.io/N3iJvQ
[02:24:46] *** Parts: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP) ()
[02:24:49] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[02:24:49] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/JeYJAQ
[02:24:49] <ghrust> 13rust/06auto 1418ae6a1 15Luqman Aden: librustc: Don't allow duplicate methods on a trait.
[02:24:49] <ghrust> 13rust/06auto 143942d48 15Luqman Aden: librustc: Don't allow duplicate methods on impls.
[02:24:49] <ghrust> 13rust/06auto 14e678b8c 15Luqman Aden: Add tests for duplicate methods on traits/impls.
[02:24:50] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[02:25:20] *** Joins: ssbr (ssbr@moz-C9F16F18.dsl.bell.ca)
[02:25:45] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[02:26:17] *** Joins: Jesse_ (jruderman@2557E599.66715431.D25A875A.IP)
[02:26:33] *** Quits: Jesse (jruderman@2557E599.66715431.D25A875A.IP) (Connection reset by peer)
[02:26:45] *** Joins: MaikKlein1 (maik@moz-7BA8C29B.dip0.t-ipconnect.de)
[02:27:30] <bjz> MaikKlein1: if you didn't see, I fixed lmath
[02:27:30] *** Joins: zz_kimundi (kimundi@moz-F037B1AB.dip0.t-ipconnect.de)
[02:27:54] *** zz_kimundi is now known as kimundi
[02:28:23] *** Quits: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP) (Ping timeout)
[02:28:33] <bjz> MaikKlein1: thought I'd let you know seeing as you were interested in it
[02:28:41] *** Quits: MaikKlein1 (maik@moz-7BA8C29B.dip0.t-ipconnect.de) (Ping timeout)
[02:29:13] *** Quits: Jesse_ (jruderman@2557E599.66715431.D25A875A.IP) (Ping timeout)
[02:29:38] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[02:30:31] *** Quits: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP) (Quit: lmandel)
[02:32:11] *** Quits: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com) (Client exited)
[02:38:05] *** Joins: tjc (tjc@moz-B867959A.redactedconsulting.com)
[02:38:05] *** ChanServ sets mode: +o tjc
[02:38:59] <bjz> nmatsakis: having trouble with this :/ https://gist.github.com/bjz/fa4087af167a19e28312
[02:39:30] <bjz> is that not possible?
[02:39:45] *** Joins: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP)
[02:39:46] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 148236224 to 14e06579b: 02http://git.io/N3iJvQ
[02:39:46] *** Parts: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP) ()
[02:39:55] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[02:39:56] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/CIAwew
[02:39:56] <ghrust> 13rust/06auto 1448c7bc1 15Brian Anderson: rustc: Remove task type defs from trans
[02:39:56] <ghrust> 13rust/06auto 148761b1f 15bors: auto merge of #7067 : brson/rust/notasktrans, r=graydon
[02:39:56] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[02:40:06] *** Joins: an0nymous (an0nymous@moz-A6B0CE4.tx.res.rr.com)
[02:41:41] <bjz> nmatsakis: I do some mutable operations on vectors, and would like to make them more succinct by using HOFs
[02:42:03] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[02:42:56] <flu_> bjz: HOF?
[02:43:10] <flu_> (being nosey for the sake of knowledge)
[02:43:11] <bjz> higher-order-functions
[02:43:14] <flu_> ah
[02:43:14] <dbaupp> bjz: it might work with temporary variables... maybe
[02:43:15] <bjz> no worries
[02:44:07] <dbaupp> (also, what about `for uint::range(0,4) |i| { f(self.index_mut(i)) }`?)
[02:44:20] <bjz> dbaupp: see if I could do something like that, then I might be able to use default methods in the future
[02:44:33] <aatch> ahh, right.
[02:44:48] <aatch> bjz, can you drop the lifetime on the closure param?
[02:45:35] *** Joins: Jesse (jruderman@2557E599.66715431.D25A875A.IP)
[02:45:43] <bjz> no, &'a fn(&'a mut T) doesn't work :(
[02:45:55] *** Joins: Guest_ (textual@moz-E64A54F3.nyc.res.rr.com)
[02:46:10] <aatch> bjz, no, I mean &fn(&mut T)
[02:46:28] <Guest_> hey guys i was just reading through the rust for rubyists book online and i don't see where core::pipes::stream is
[02:46:31] <bjz> hah!
[02:46:32] <aatch> with the 'a, you're basically saying "this borrow will last for at least 'a"
[02:46:33] <bjz> it works
[02:46:57] <bjz> thankyou!
[02:46:58] <brson> Guest_: currently called std::comm::stream
[02:47:10] <aatch> bjz, you could drop the rest of the lifetimes on that function now too.
[02:47:22] <Guest_> ah but my code still worked when i wrote use core::pipes::stream
[02:47:25] <bjz> yeah, I did that too
[02:47:37] <Guest_> and when i look at the docs it has no mention of it on my current version
[02:49:28] <brson> Guest_: which version of rust and which version of the docs?
[02:49:48] <aatch> an anonymous lifetime lasts for the current block, so you borrow for as long as the HOF, then reborrow into the closures, but since each borrow lasts only for the length of the closure, you don't have any overlapping borrows
[02:49:55] <Guest_> i'm running 0.6 installed via homebrew and looking at the 0.6 docs
[02:50:20] <aatch> what you wrote said the the borrow into the closure lasts for as long as the HOF.
[02:50:28] <bjz> aatch: yeah, still learning that stuff
[02:50:31] *** Quits: bent (chatzilla@moz-932324BF.hsd1.ca.comcast.net) (Quit: ChatZilla 0.9.90-rdmsoft [XULRunner 18.0.2/20130201065344])
[02:50:36] <Guest_> in the 0.6 docs it is definitely part of comm
[02:50:43] *** Guest_ is now known as tyler
[02:50:47] <bjz> Guest_: use git/incoming rather than what is on homebrew
[02:50:56] <tyler> ok
[02:50:57] <aatch> bjz, don't worry about it. It's not easy to get. I actually ran into the same issue recently.
[02:51:29] <bjz> tyler: rust is moving swiftly, and it's good to stay on top of the updates/improvements
[02:51:40] <tyler> ok i'll do that instead
[02:51:53] <bjz> aatch: yeah, at least it catches this stuff
[02:51:54] <aatch> though I hit issues with lifetime params on the data as well. Turns out the borrow checker can't quite handle that.
[02:52:05] <tyler> thank you bjz
[02:52:12] <dbaupp> bjz: an unfortunate corollary of moving swiftly is that it is hard to stay on top of everything :(
[02:52:13] <bjz> tyler: no worries!
[02:52:19] <bjz> dbaupp: yeah
[02:52:29] <tyler> is using brew install rust --HEAD discouraged?
[02:52:36] <tyler> oh i guess that isn't incoming, so probably
[02:52:53] <bjz> dbaupp: but I'd rather it not stay still and accumulate cruft
[02:52:55] <strcat> bjz: vectors implement mut_iter btw
[02:53:05] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Quit: leaving)
[02:53:10] <aatch> inside an impl that itself had a parameterized lifetime.
[02:53:39] <aatch> I think I ended up needing syntax that didn't exist.
[02:53:45] <bjz> tyler: I'm not really sure how homebrew works unfortunately :)
[02:53:52] <dbaupp> bjz: I agree
[02:53:55] <bjz> tyler: I use MacPorts
[02:54:15] <tyler> ah
[02:54:35] <bjz> tyler: I'm not hip enough to brew x)
[02:55:05] <tyler> hah, well thanks for the help, I'm just learning so i'm sure there will be more questions
[02:55:21] <bjz> of course, always happy to help :)
[02:55:33] <bjz> tyler: what brings you to rust?
[02:55:37] *** Joins: carter (carter@moz-12C317EF.nyc.res.rr.com)
[02:56:02] <bjz> dbaupp: there's many deep warts that need to be fixed, so I hope the devs are still up for making changes
[02:56:04] <tyler> I'm the maintainer of the ruby driver for mongodb and saw the request for a mongo driver
[02:56:17] <bjz> dbaupp: although its much better than it was
[02:56:33] <bjz> tyler: nice!
[02:56:35] <tyler> we have two interns at 10gen that are working on a rust driver for mongo and myself and another engineer are the mentors
[02:56:35] <dbaupp> bjz: deep warts in Rust? ... I've noticed ;)
[02:56:37] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[02:56:52] <bjz> tyler: that would be super awesome
[02:56:54] <tyler> yeah and it seems really great
[02:56:58] *** Joins: Jesin (Jessin_@moz-3AD6F09F.res.lehigh.edu)
[02:57:05] <tyler> all the good things about c and all the good things about ruby combined
[02:57:12] <bjz> tyler: just be aware that things are still in flux
[02:57:13] *** Joins: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP)
[02:57:20] <tyler> oh for sure, but that makes it fun
[02:57:25] <flu_> heh
[02:57:33] <aatch> tyler, careful though, a lot is more similar to python. Especially the explicitness.
[02:57:42] <dbaupp> strcat: you broke my pull request! All from a single '.any' :'(
[02:57:42] <tyler> i don't mind
[02:57:45] <dbaupp> strcat: :P
[02:57:51] <tyler> i was a python guy :-)
[02:57:59] <bjz> tyler: it's better to stay up to date with incoming and deal with the incremental changes, then leaving it till the point release
[02:58:02] <dbaupp> there's also a bit of Haskell in Rust
[02:58:04] <tyler> the c stuff is new to me
[02:58:15] <cmr> on the ML I recomended to one of the interns updating every week
[02:58:23] <bjz> pretty sure Haskell/ML is a bigger influence
[02:58:32] <bjz> (than ruby/python) :D
[02:58:33] <tyler> i've noticed, when rust builds itself it only uses one core
[02:58:47] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[02:58:47] <aatch> Well the bootstrap compiler was written OCaml
[02:58:55] <bjz> aatch: indeed
[02:59:11] <bjz> aatch: hench the similar semantics in some places
[02:59:25] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[02:59:27] <aatch> tyler, yep. It also builds entire crates, not individual files.
[02:59:34] <tyler> ah
[02:59:43] <cmr> tyler, yup. rustc doesn't have any parallelism or incrementalism yet
[02:59:44] <tyler> the nes emulator project looks really cool, i want to maybe try something like that but less hard core, maybe a chip8 emulator or an irc server
[03:00:01] <aatch> tyler, I think somebody is doing a chip8
[03:00:12] <tyler> cool!
[03:00:15] <dbaupp> tyler: yeah, it's mostly historical that the compiler is single threaded, I think (too much @, which stops parallelism (at the moment))
[03:00:15] * cmr is starting on a wayland library and compositor
[03:00:29] <tyler> do you know who, I'm still going to try it but maybe we can chat?
[03:00:51] <tyler> the sdl wrapper makes it a little easier :-)
[03:01:08] <aatch> tyler, can't remember sorry. But it's up on github (assuming it exists at all)
[03:01:45] <tyler> ok nice, well I'm just learning the lower level c stuff so i will be asking very stupid questions in here
[03:01:46] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[03:01:50] <tyler> i hope you all don't mind
[03:02:00] <aatch> tyler, that's fine.
[03:02:08] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[03:02:10] <cmr> aatch, all I could find referencing it is http://www.reddit.com/r/programming/comments/187m5a/sprocketnes_nes_emulator_written_in_rust/c8cl1f6
[03:02:17] <bjz> aatch: if I make use of my HOFs in lmath, would you be able to assist in the optimisation stuff?
[03:02:27] <aatch> bjz, sure
[03:02:28] *** Joins: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com)
[03:02:32] <tyler> ah
[03:02:45] <tyler> so is this actually used by mozilla at all or do they just sponsor the development
[03:02:53] <bjz> tyler: I've learned so much about low level stuff via Rust
[03:03:05] <aatch> tyler, servo is a rendering engine written in Rust
[03:03:13] <tyler> oh right
[03:03:18] <cmr> Also part of mozilla research
[03:03:23] <tyler> is that going into a new firefox at some point?
[03:03:38] <bjz> tyler: it's a much better language to learn it than C, as you can ease yourself into the more advanced concepts, as opposed to taking it on all at once
[03:03:38] <aatch> tyler, "some point"
[03:03:50] <cmr> tyler, considering it can't even *load* wikipedia right now...
[03:04:03] <dbaupp> cmr: it can!
[03:04:06] <tyler> hahah, ok then, well i like where we are headed
[03:04:09] <dbaupp> cmr: sort of...
[03:04:10] <cmr> dbaupp, they fixed the crashing bug!?
[03:04:13] <zq> how to make bitwise not in rust for great good
[03:04:18] <erickt> hey #rust, what do you all think about standardizing on using "to_foo" when converting from one type to another, such as "str.to_vec() -> ~str", and "as_foo" when we can get a reference out of a type without a copy, such as "fn vec.as_str() -> &str"?
[03:04:27] <dbaupp> cmr: not sure, but pcwalton (?) had a screen shot of the firefox wiki page
[03:04:28] <cmr> rusti: !0x80
[03:04:30] -rusti- -129
[03:04:32] <cmr> zq, ^^
[03:04:34] <bjz> tyler: Servo is still considered a 'high risk research project' :)
[03:04:44] <zq> cmr: nowai. but how make logical not for greater good
[03:04:46] <dbaupp> cmr: the formatting was crap, but there was text
[03:05:01] <cmr> zq, logical not only works on bools
[03:05:05] <zq> nvm
[03:05:05] <zq> ! Logical negation. On the boolean type, this flips between true and false. On integer types, this inverts the individual bits in the two's complement representation of the value. 
[03:05:09] <cmr> rusti: !false
[03:05:10] -rusti- true
[03:05:11] <zq> cmr: tenks my man
[03:05:15] <dbaupp> erickt: that's what I've been doing
[03:05:32] <aatch> erickt, I think standardizing is good.
[03:05:49] <zq> hm, let's see. uint8 kappa = 120; !~kappa
[03:05:50] <dbaupp> erickt: well, I've only been doing the references, since for strs and vecs there's already .to_owned() if someone needs a copy of the slice
[03:06:03] <zq> nvm, worked it out
[03:06:21] <cmr> erickt, works for me, but... being able to overload `as` would be nice
[03:06:31] <erickt> dbaupp: great :)
[03:06:35] <cmr> zq, you need to "as bool" things you want a bool from :)
[03:06:36] <tyler> how often do you guys build rust? daily?
[03:06:45] <erickt> cmr: that would be interesting...
[03:06:48] <aatch> tyler, I do. but I hack on the compiler
[03:07:06] <dbaupp> tyler: a lot of us are doing compiler work, which means almost constantly building
[03:07:35] <zq> cmr: ye, neat way to save an operator
[03:07:38] <tyler> gotcha
[03:07:45] <dbaupp> tyler: I think cmr's suggestion of building every week or so would give a good balance of stability and keeping up to date
[03:07:55] <cmr> zq, well it's not saved really. ~ is used for allocation and owned pointer type
[03:07:55] *** Quits: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com) (Ping timeout)
[03:08:33] <cmr> tyler, updating on monday would probably best. most really extensive changes land during the weekend, for logistic reasons ;)
[03:10:26] *** Quits: tjc (tjc@moz-B867959A.redactedconsulting.com) (Quit: zzzzzzzzzz)
[03:10:34] *** Quits: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP) (Ping timeout)
[03:10:35] <erickt> cmr: That's an intriguing idea to turn `as` into an overloadable operator. Practically speaking, an `as` function would have to be something like `trait As<'self, T> { fn as(&self) -> &'self T; }, but I'm not sure if that would work for number conversions. `let x: i8 = 5; let y = x as int` is really doing a copy, not a cast
[03:10:55] <cmr> erickt, It'd also need overloading I think?
[03:10:58] <tyler> gotcha
[03:11:03] <tyler> ok thanks guys
[03:11:52] <erickt> cmr: I'm presuming there's a `impl i8<'self, T>: As<'self, T> { fn as(&self) { â€¦ } }`
[03:12:10] <cmr> erickt, So you'd have impl As<int> for FooType {fn as(&self) -> int { .... } }
[03:13:06] <dbaupp> strcat: ping
[03:13:08] <erickt> cmr: and a `impl<T> As<&[T]> for &str { â€¦ }`? That could work...
[03:13:21] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[03:13:28] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Client exited)
[03:13:57] <dbaupp> erickt, cmr: I'm not sure that would allow you to overload more than 1 cast for each type, without using an extra trait... :(
[03:14:08] <erickt> dbaupp / cmr: we'd have to do some sort of double dispatch in order to allow for multiple "as" implementations
[03:14:51] <cmr> erickt, Would it? I'd think it could be static like current traits-with-bounds are, for the most part.
[03:14:55] <tyler> is the concept of "Boxes" a rust thing or does that exist in other languages as well?
[03:14:59] <dbaupp> yeah, you can do `trait IntAs { fn to_int(&self) -> int; } impl IntAs for uint {} impl IntAs for float {} .. impl<I: IntAs> As<Int> for int {}`
[03:15:04] <erickt> where you have a `StrAs<T>` trait, and do `impl<T> StrAs<T> for ~str`, or something. I think nmatsakis has a blog post on how to do it
[03:15:23] <cmr> `foo as i8` would just call out to foo::as<i8>()
[03:15:49] <cmr> I'm still relatievely new to rust, and haven't worked much with traits beyond the simplest ones, so that might not make sense :)
[03:15:49] <erickt> tyler: boxes are a common concept for a managed pointer. c++ calls them smart pointers
[03:15:52] <dbaupp> tyler: "Box" is just a different name for "pointer" (or "smart pointer", really)
[03:15:54] *** Joins: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP)
[03:16:23] <cmr> tyler, also in java and .net I think, but there's only 1 type of box, unlike C++ or Rust
[03:16:29] <erickt> dbaupp / cmr: I'll file a ticket about this. I'm starting to like this idea
[03:16:33] <dbaupp> cmr: yeah, the problem is you can't do `impl Foo<int> for uint {} impl Foo<i8> for uint {}`
[03:16:36] *** Quits: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP) (Input/output error)
[03:16:41] <cmr> dbaupp, Yet!
[03:17:22] <erickt> dbaupp / cmr: see this post for how to do overloading: http://smallcultfollowing.com/babysteps/blog/2012/10/04/refining-traits-slash-impls/
[03:17:33] <erickt> it's a little ugly, but it gets the job done
[03:19:03] <dbaupp> erickt: you're a reviewer right?
[03:19:59] *** Quits: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net) (Quit: ["Textual IRC Client: www.textualapp.com"])
[03:20:22] <erickt> dbaupp: I am
[03:20:33] <dbaupp> erickt: ok cool... https://github.com/mozilla/rust/pull/7060 r? :) (It was previously r+'d, except for the last commit, and it doesn't touch the [u8] -> str stuff that you(?) are working on)
[03:20:55] <erickt> heh, I just dropped a comment in that pull request to link it to mine :)
[03:21:05] <erickt> I'll check it out
[03:21:06] <dbaupp> erickt: heh, just got the email :)
[03:21:26] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke. It's all a joke.)
[03:21:40] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[03:21:48] <dbaupp> erickt: most of it's formulaic moving of functions to methods, except for the "highlights" I list there
[03:22:05] <cmr> erickt, very ugly, but the arguments against overloading are compelling
[03:22:37] *** Joins: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP)
[03:23:00] <dbaupp> erickt: oh, looks like strcat's r+'d already :)
[03:23:19] *** Joins: msingle (Thunderbir@moz-20675462.nrflva.fios.verizon.net)
[03:23:31] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[03:23:41] <tyler> thanks car erickt and dbaupp cool, smart pointers aren't part of c++ proper right? they are added by something like boost if i recall correctly
[03:23:55] <cmr> tyler, they are in the STL
[03:24:01] <tyler> oh, interesting
[03:24:05] <strcat> tyler: no they're part of the standard
[03:24:22] <erickt> cmr: what's your github user name?
[03:24:30] <tyler> how long does it take you guys to build rust? i've been going for about 25 mins now on my i7 :-)
[03:24:31] <cmr> tyler, some are, at least. shared_ptr, unique_ptr, weak_ptr
[03:24:34] <erickt> tyler: they got added to c++11
[03:24:34] <strcat> and anyway they are plain old types with destructors
[03:24:34] <cmr> erickt, @cmr
[03:24:36] *** Quits: eholk (eholk@moz-9AB4D52F.hsd1.ut.comcast.net) (Quit: eholk)
[03:24:46] <tyler> ah but not before c++11?
[03:24:56] <strcat> they're library features in c++11
[03:24:59] <cmr> tyler, ~18 minutes here, but if you have to build LLVM, it can take a lot longer
[03:25:05] <strcat> no language changes
[03:25:16] *** Quits: sp3d (a@moz-49806493.dhcp.stls.mo.charter.com) (Ping timeout)
[03:25:32] <tyler> yeah i think i saw it building llvm, but i think i have that already on osx, does that make sense?
[03:25:46] <dbaupp> tyler: Rust has it's own LLVM
[03:25:56] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[03:25:59] <tyler> ok thanks dbaupp 
[03:26:03] <dbaupp> there are some Rust specific changes required
[03:26:14] <dbaupp> (you only have to build LLVM once/very rarely)
[03:26:16] <flu_> eh.. the disconnect between OptGroup and Opt is kind of broken in getopts. When you call the actual getopts function, the OptGroup is flattened into the corresponding long and short Opts. Practically, this means that if you specify a foo = groups::optflag("h", "help", "Print Usage"), you still have to check for "h" or "help" with opt_present
[03:26:17] <cmr> if someone would work on upstreaming them that'd be cool
[03:26:19] <cmr> lot of work though
[03:26:21] <tyler> so basically these boxes are just pointers that have specific scopes
[03:26:47] <tyler> @is garbage collected and manager
[03:26:49] <tyler> managed*
[03:27:01] <cmr> tyler, They are various ways of managing access to a pointer.
[03:27:02] <flu_> it seems like OptGroup is the much nicer alternative - is the other syntax meant to parallel an old, unfriendly library I wonder
[03:27:16] *** Quits: Sorella (queen@B12A78F5.BA14766C.95C8B7C6.IP) (Quit: (quit))
[03:27:18] <tyler> ok, i'll read more before i talk/ask questions :-)
[03:27:57] <cmr> tyler, http://en.wikipedia.org/wiki/Smart_pointer
[03:28:08] <tyler> ok reading...
[03:29:28] <strcat> better to read about destructors imo... they are just a specific use case of them
[03:29:53] *** Quits: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP) (Connection reset by peer)
[03:29:59] <strcat> @/@mut aren't really smart pointers
[03:30:09] <strcat> ~ and extra::rc are
[03:30:10] <tyler> ah, the owned box is the managed pointer that "assigns ownership of the object to a single pointer"
[03:30:20] *** Joins: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP)
[03:30:22] <tyler> and the managed box is a reference counting pointer?
[03:30:25] <cmr> ~ is explicitly unmanaged
[03:30:26] <strcat> no
[03:30:31] <cmr> it's entirely compile-time
[03:30:45] <tyler> ok
[03:30:47] *** Joins: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP)
[03:30:47] <strcat> @/@mu aren't smart ptrs in the traditional sense of the term
[03:30:47] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/CIAwew
[03:30:47] *** Parts: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP) ()
[03:30:53] <strcat> they are opt-in gc
[03:31:07] <strcat> extra::rc is refcounting with destructors
[03:31:16] <strcat> like shared_ptr in c++
[03:31:42] <strcat> copy -> refcount += 1, destructors do refcount -= 1
[03:32:12] *** Joins: RMF (RMF@FE1B430.5FDF6461.11F731AB.IP)
[03:33:47] *** Joins: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP)
[03:33:47] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/AHQ2lA
[03:33:47] *** Parts: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP) ()
[03:33:48] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[03:33:48] <ghrust> 01[13rust01] 15bors pushed 15 new commits to 06auto: 02http://git.io/NEqOaw
[03:33:48] <ghrust> 13rust/06auto 1496cd61a 15Huon Wilson: std: convert {vec,str}::to_owned to methods.
[03:33:48] <ghrust> 13rust/06auto 143c23a0a 15Huon Wilson: std: replace str::append with a method
[03:33:49] <ghrust> 13rust/06auto 148786bca 15Huon Wilson: std: convert str::repeat to a method.
[03:33:50] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[03:33:52] *** Joins: bugweiser (Mibbit@7CB25501.3495256C.1F1B246B.IP)
[03:33:58] *** Quits: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP) (Ping timeout)
[03:34:18] *** Quits: bugweiser (Mibbit@7CB25501.3495256C.1F1B246B.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:35:42] <flu_> thanks ghrust bot! totally just saved me a future merge headache
[03:36:18] <tyler> ok sorry guys i need to learn more before opening my mouth
[03:36:26] <cmr> tyler, nah, don't worry about it :)
[03:36:37] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[03:36:37] <dbaupp> flu_: sorry about these huge changes :(
[03:37:05] <cmr> tyler, You should check out http://www.rustforrubyists.com/book/index.html though
[03:37:08] <strcat> dbaupp: you're welcome for these huge sweeping improvements*, you mean :)
[03:37:11] <cmr> tyler, it's a pretty good introduction
[03:37:15] <cmr> strcat++
[03:37:31] <dbaupp> strcat: heh, yes
[03:37:36] <flu_> dbaupp: heheh, all in the name of progress! I was working in getopts and had just noted all those str::to_owned calls before ghrust gave a shout
[03:38:12] <dbaupp> flu_: that first commit converts them all to .to_owned(), so yes... merge conflicts! :(
[03:38:15] *** Joins: pong (Mibbit@moz-483DE200.hfc.comcastbusiness.net)
[03:38:33] *** Quits: pong (Mibbit@moz-483DE200.hfc.comcastbusiness.net) (Quit: http://www.mibbit.com ajax IRC Client)
[03:38:37] <flu_> dbaupp: ya, totally dodged it by having not actually written any code worth saving yet ;)
[03:38:39] *** Joins: pongad (Mibbit@moz-483DE200.hfc.comcastbusiness.net)
[03:38:47] <dbaupp> strcat: I couldn't quite believe how horrible the str -> [u8] conversions were. :O
[03:39:05] <dbaupp> strcat: 5 functions, and with incorrect documentation to boot.
[03:39:05] <strcat> dbaupp: well I can't believe how horrible the [u8] -> str conversions are (as in unsound) ;p
[03:39:13] <dbaupp> strcat: there's that too
[03:39:23] <strcat> and push_char or whatever it is
[03:39:25] <dbaupp> strcat: it's marginally better now (I hope)
[03:39:28] <strcat> the utf-8 encoding is wrong
[03:39:35] <dbaupp> fix it? :)
[03:39:40] <strcat> I tried, broke json :(
[03:39:42] <strcat> don't know why.
[03:39:47] <strcat> a json test
[03:40:00] <dbaupp> strcat: (at least, it'll be marginally better once erickt's [u8] -> str stuff lands, hopefully)
[03:40:01] <strcat> github is being really slow
[03:40:07] <dbaupp> something about DDOS
[03:40:16] <strcat> dbaupp: well it will still be wrong but it will be smaller :)
[03:40:19] <cmr> What's up with the random linux drop? http://huonw.github.io/isrustfastyet/
[03:40:34] <cmr> 4 minute drop is pretty significant
[03:40:42] <dbaupp> cmr: and a big jump
[03:40:50] <dbaupp> probably just "noise"
[03:41:00] <strcat> we'll gain a minute by building jemalloc once instead of 3 times ;p
[03:41:17] <strcat> adding it didn't slow down the compile but it didn't speed it up because of that
[03:41:38] <cmr> Using -janything would also be nice
[03:41:51] <cmr> I use -j8 and saw a 2 minute speedup
[03:42:10] <cmr> just for the rt build though, not for everything else
[03:42:23] <cmr> especially not for tests, the harness already uses cpu_count tasks
[03:42:58] <strcat> can remove some more option methods soon
[03:43:12] <tyler> cmr i am reading that now
[03:43:24] <tyler> besides that and the tutorial are there any other excellent resources?
[03:43:34] <tyler> or is it best to just play with things from there out
[03:43:53] <strcat> tyler: http://static.rust-lang.org/doc/tutorial-ffi.html#destructors reimplementation of ~ as a library type
[03:43:56] *** Joins: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP)
[03:44:03] <strcat> extra::rc is pretty simple too
[03:44:22] <dbaupp> tyler: #rust is a pretty good resource ;) not sure if there are many other (up-to-date) tutorials other than the main documentation though
[03:44:26] <strcat> dbaupp: failed again :[
[03:44:31] <dbaupp> wat
[03:44:36] <dbaupp> it passed here
[03:45:07] <Jesse> strcat: what's the difference between "smart pointer" and "opt-in [safety, rc, gc, ...]"?
[03:45:10] <dbaupp> urgh, cfg(win)
[03:45:20] <cmr> Has the terminology settled on "owned box"?
[03:45:24] <strcat> cmr: no
[03:45:32] <strcat> hasn't been decided yet
[03:45:38] <strcat> I have a bug open about deciding on the terms
[03:45:45] <pongad> Wait, ~ is a library type?
[03:45:45] *** Joins: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP)
[03:45:46] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 140d8fbee to 148761b1f: 02http://git.io/N3iJvQ
[03:45:46] *** Parts: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP) ()
[03:45:47] *** Joins: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP)
[03:45:47] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/vWQTtA
[03:45:47] <ghrust> 13rust/06auto 14f526434 15BjÃ¶rn Steinbrink: Codegen: Combine two PointerCasts into one...
[03:45:47] <ghrust> 13rust/06auto 147033dfc 15bors: auto merge of #7069 : dotdash/rust/cast_combine, r=graydon...
[03:45:49] *** Parts: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP) ()
[03:45:53] <cmr> pongad, no
[03:45:55] <strcat> pongad: no, but it can be implemented as one
[03:45:58] <strcat> ~ is sugar
[03:46:12] <strcat> rust has destructors, so you can implement that stuff in a library
[03:46:13] <flu_> ~ is love
[03:46:16] <Jesse> sugar is delicious
[03:46:20] <Jesse> therefore, ~ is delicious
[03:46:21] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[03:46:38] <pongad> strcat: how do you define an operator like that? I thought Rust didn't support it?
[03:46:45] *** Joins: sankha93 (Instantbir@B0ABF041.4C100BA0.8B6C1D65.IP)
[03:46:53] <strcat> pongad: as in Unique::new(5)
[03:47:02] *** Joins: sp3d (a@moz-49806493.dhcp.stls.mo.charter.com)
[03:47:06] <dbaupp> strcat: https://github.com/huonw/rust/commit/9f0c85acc967110c85f9a8bdcb32df4606a6dff5 r?
[03:47:07] <pongad> Oh, ok, that makes more sense :D
[03:47:11] <strcat> ~ is just syntactic sugar for something the language can express in a library
[03:47:14] <strcat> is what I'm saying
[03:47:21] <pongad> I see
[03:47:33] <pongad> I thought you went C++ on me there
[03:48:51] <strcat> pongad: https://github.com/mozilla/rust/blob/incoming/src/libextra/rc.rs#L37 (missing a way to implement a trait to make it act like the built-ins though)
[03:49:05] <flu_> rusti: ~"Turkey".char_at(0u)
[03:49:06] -rusti- ~'T'
[03:50:08] <pongad> Nice!
[03:51:11] <pongad> strcat: I'm new to Rust and everything looks awesome. Now feeling like I found a new hobby :D
[03:52:17] <dbaupp> strcat: doing ~make_a_huge_type() (or @make_a_large_type()) avoids doing a huge memcpy, right?
[03:52:38] *** Quits: Jesin (Jessin_@moz-3AD6F09F.res.lehigh.edu) (Ping timeout)
[03:52:54] <aatch> dbaupp, correct
[03:53:18] <dbaupp> aatch: and this isn't possible yet with library smart pointers?
[03:53:20] <flu_> dbaupp: is there a prevailing trend to start converting the c-style stuff of 'pub mod foo { pub struct Bar { }; fn do_thing(x:&Bar,...) }' into using methods?
[03:53:31] <tyler> ah i see that now int::to_str() can just be called on integers themselves is that a change that occurred since 0.6?
[03:53:34] <aatch> dbaupp, correct
[03:53:36] <dbaupp> flu_: yes
[03:53:38] <pongad> Sorry for a noob question, if I have a trait Bird which have a method fly() and struct Eagle implementing Bird, can I do my_eagle.fly()?
[03:53:46] <cmr> flu_, Not so much c-style as old-crufty-rust-tyle :p
[03:53:52] <flu_> heheh
[03:54:08] <dbaupp> aatch: do you happen to know if it's part of the new pointer plan?
[03:54:09] <aatch> pongad, yes. Though remember that methods have explicit self.
[03:54:10] <cmr> pongad, yup
[03:54:13] <strcat> pongad: yes you can have generic implementations for types implementing certain traits
[03:54:19] <aatch> dbaupp, no idea. probably though.
[03:54:25] <strcat> and eventually, default methods provided by traits that you can override (not yet stable enough to use)
[03:54:28] <dbaupp> aatch: hopefully
[03:54:28] <flu_> cmr, dbaupp - I really want to give getopts some lovin' - it's a non-trivial change though. Should I get some input through filing an issue, or just build something and PR it?
[03:54:44] <cmr> flu_, just build something and :shipit:
[03:54:46] *** Quits: zq (p@moz-4A6945B7.de) (Quit: leaving)
[03:54:49] <flu_> word :-)
[03:54:53] <pongad> aatch, cmr, strcat: I might have done something stupid :D
[03:55:02] <strcat> pongad: https://github.com/mozilla/rust/blob/incoming/src/libstd/iterator.rs here's an example - a type implementing Iterator (one method) gets a bunch of methods for free
[03:55:08] *** Quits: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP) (Ping timeout)
[03:55:22] <strcat> soon to be default methods, I hope :)
[03:55:34] *** Joins: zq (p@moz-4C4640FD.com)
[03:55:35] <dbaupp> flu_: pull request is good (but mailing list is probably better than an issue for getting input)
[03:58:09] <tyler> is comm::DuplexStream no longer around?
[03:58:44] <pongad> strcat: That's what I thought, compiler is complaining about "type `Eagle` does not implement any method in scope named `fly`"
[03:58:57] <pongad> strcat: I'm using 0.6, if that matters
[03:59:16] <strcat> pongad: look at what the Iterator trait does
[04:01:55] *** Joins: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP)
[04:02:13] *** Quits: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP) (Input/output error)
[04:03:17] *** Joins: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP)
[04:03:44] <strcat> pongad: I'm not sure if what you want is actually a default method
[04:04:04] <pongad> strcat: So you have trait Iterator, and every Iterator implements IteratorUtil
[04:04:08] <strcat> you'd have to post the code that's not compiling for us to actually help
[04:04:51] <strcat> pongad: yes
[04:05:06] <strcat> pongad: traits can define default methods but that doesn't really work yet
[04:05:07] *** Quits: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP) (Ping timeout)
[04:05:08] <strcat> so it's a workaround
[04:05:22] <pongad> strcat: https://gist.github.com/pongad/5762754
[04:05:37] <pongad> strcat, I think I tried to do the default method thing :D
[04:05:56] <tyler> is the new DuplexStream a SharedChan or are duplex streams not a thing anymore?
[04:06:06] <strcat> pongad: no, a default method would be 'fn fly' defined in the trait
[04:06:14] *** Joins: mib_ftzq4c (Mibbit@moz-43C591CF.nycmny.east.verizon.net)
[04:06:26] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[04:06:33] *** Joins: brson (brson@5F06B402.AD1E507F.3688B332.IP)
[04:06:33] *** ChanServ sets mode: +o brson
[04:07:10] <strcat> pongad: that impl results in a compiler error with an up-to-date rust
[04:07:10] <pongad> strcat: Oh I see, so what I tried to doesn't work period? xD
[04:07:46] <strcat> yes
[04:07:48] <strcat> :p
[04:08:15] <strcat> trait { fn foo(&self); fn bar(&self) { println("I'm a default method, and I don't really work yet." } }
[04:08:38] <mib_ftzq4c> question about uv -- I'm trying to set up a client/server connection where the client loops, prompting the user for a string that it then sends to the server, who just echoes it back, but on the second user submission the client program crashes with Assertion failed: (!uv__io_active(&stream->io_watcher, UV__POLLIN) && "stream->read_cb(status=-1) did not call 
[04:08:44] <mib_ftzq4c> any ideas...? thanks
[04:08:45] <pongad> :P I see, that makes sense
[04:08:47] <dbaupp> strcat: s/don't really work/don't work at all/ ?
[04:08:50] <strcat> so a type implementing that trait would only *have* to implement foo, and they would get a default bar
[04:09:01] <strcat> but if they wanted they could override bar
[04:09:11] <strcat> the hack Iterator uses with IteratorUtil doesn't allow overriding it
[04:09:27] *** Joins: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[04:09:51] *** Quits: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Max SendQ exceeded)
[04:10:25] <pongad> It is finally making sense :D
[04:11:02] *** Joins: mr_fribble (Mibbit@1429E993.8B2434C4.927B248E.IP)
[04:12:41] <strcat> yeah it doesn't work. the compiler just didn't know to spit out an error then[iterator 9696348] add IteratorUtil to the prelude
[04:12:43] <strcat> ugh
[04:12:48] <strcat> stupid touchpad ;p
[04:12:50] <strcat> [iterator 9696348] add IteratorUtil to the prelude
[04:12:52] <strcat> dbaupp: ^^
[04:13:01] <strcat> method resolve bug is still around but...
[04:13:05] <dbaupp> strcat: :D
[04:13:08] <strcat> I think I renamed the conflicting methods already
[04:13:14] <strcat> we'll see if it compiles.
[04:13:32] <strcat> git ls-files | xargs sed -i '/use core::iterator::IteratorUtil;/d' ;p
[04:13:53] *** Quits: sankha93 (Instantbir@B0ABF041.4C100BA0.8B6C1D65.IP) (Ping timeout)
[04:14:20] <dbaupp> strcat: delete the new line too! :P
[04:14:30] <strcat> dbaupp: that does
[04:14:46] <dbaupp> strcat: oh, right, /d, not s///
[04:14:51] <strcat> it just deletes any line with that pattern
[04:15:08] <dbaupp> yup. (reading is hard ;) )
[04:16:01] <strcat> anyway. seems to work
[04:16:25] *** Joins: seth (seth@moz-D840E602.dsl.static.sonic.net)
[04:16:47] <pongad> strcat: Thanks a lot for your help! Looking forward to learning more Rust, but now I must go to dinner :)
[04:16:53] <strcat> \o
[04:17:08] *** Quits: pongad (Mibbit@moz-483DE200.hfc.comcastbusiness.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:17:36] *** Joins: sankha93 (Instantbir@BDB871DE.AAB4B81.8B6C1D65.IP)
[04:18:21] <mib_ftzq4c> (sorry, realized the error message got cut off) question about uv -- I'm trying to set up a client/server connection where the client loops, prompting the user for a string that it then sends to the server, who just echoes it back, but on the second user submission the client program crashes with
[04:18:36] <mib_ftzq4c> Assertion failed: (!uv__io_active(&stream->io_watcher, UV__POLLIN) && "stream->read_cb(status=-1) did not call uv_close()"), function uv__read
[04:18:44] <mib_ftzq4c> any ideas? thanks!
[04:19:51] <mib_ftzq4c> what other information can I offer that would be useful?
[04:21:42] <aatch> mib_ftzq4c, code?
[04:22:00] <dbaupp> mib_ftzq4c: are you calling uv directly?
[04:22:05] <mib_ftzq4c> sure... coming shortly
[04:22:11] <mib_ftzq4c> dbaupp: I'm using iotasks
[04:22:35] *** Joins: tjc (tjc@moz-B867959A.redactedconsulting.com)
[04:22:35] *** ChanServ sets mode: +o tjc
[04:22:54] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[04:23:17] <tyler> how does one find modules in extra?
[04:23:22] <tyler> like what is in extra?
[04:23:32] <tyler> is there a way to search std?
[04:23:38] <mib_ftzq4c> dbaupp: that is, tcp::connect(ip, port, &iotask)
[04:24:01] <dbaupp> tyler: there's the docs http://static.rust-lang.org/doc/extra/index.html
[04:24:19] <mib_ftzq4c> aatch: where shortly is not so short...sory
[04:24:47] <dbaupp> tyler: looking at the code is possibly easier though, unfortunately :(
[04:24:50] <mib_ftzq4c> dbaupp: and iotask = uv::global_loop::get()
[04:25:21] <tyler> gotcha, how did you get there from rust-lang.org i didn't see the link to extra anywhere?
[04:26:37] <mib_ftzq4c> http://mibpaste.com/YlqgjN should be something like that
[04:27:26] <mib_ftzq4c> apologies for (lack of) indentation...
[04:27:44] <mib_ftzq4c> tyler: there unfortunately isn't... I got it through guess-and-checking :P
[04:27:55] <mib_ftzq4c> *isn't afaik
[04:28:11] <dbaupp> tyler: it's being updated https://github.com/graydon/rust-www/pull/5
[04:29:13] <tyler> oh niceâ€¦ i just added a link to the wiki, i hope nobody minds
[04:29:53] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[04:29:57] *** Quits: sp3d (a@moz-49806493.dhcp.stls.mo.charter.com) (Quit: sp3d)
[04:30:21] *** Joins: sp3d (a@moz-49806493.dhcp.stls.mo.charter.com)
[04:30:50] *** Quits: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net) (Quit: Leaving)
[04:31:00] *** cscottnet is now known as cscottnet_away
[04:31:14] <mib_ftzq4c> moving the loop outside i.e. making a new connection before every prompt "solved" the problem but is suboptimal
[04:31:23] *** Quits: tyler (textual@moz-E64A54F3.nyc.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[04:33:28] <dbaupp> mib_ftzq4c: I've got no idea what the problem is... I can't even get it to run on a new incoming `rust: task failed at 'client could not connect', iotasks.rs:21`, sorry :(
[04:34:03] <mib_ftzq4c> sorry, I was hoping it'd only need a quick fix (and quick look to find) so I didn't put up the server code
[04:34:07] <mib_ftzq4c> will do in a moment
[04:34:43] <mib_ftzq4c> in the meanwhile, how exactly do iotasks function? they're not single-use...?
[04:35:19] *** Joins: Jesin (Jessin_@moz-157A63DD.cc.lehigh.edu)
[04:35:29] <mib_ftzq4c> http://mibpaste.com/7UVRi7 so that's the server-side code
[04:35:34] <mib_ftzq4c> earlier was the client-side code
[04:36:08] <mib_ftzq4c> so the server-side code should be run, then the client-side code
[04:36:17] <mib_ftzq4c> enter at the prompt; the second time should crash
[04:36:51] *** Joins: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP)
[04:36:51] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/vWQTtA
[04:36:51] *** Parts: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP) ()
[04:37:07] *** Quits: sankha93 (Instantbir@BDB871DE.AAB4B81.8B6C1D65.IP) (Ping timeout)
[04:37:16] <dbaupp> mib_ftzq4c: yup ''get called on error result: {err_name: ~"EOF", err_msg: ~"end of file"}' is what I see
[04:37:23] <dbaupp> (I'm using incoming, not 0.6)
[04:37:53] <mib_ftzq4c> dbaupp oh that's interesting, different from what I'm getting (but also bad haha)
[04:38:08] <mib_ftzq4c> I'm also using incoming, but pulled a couple of days ago
[04:38:13] <mib_ftzq4c> thanks for the heads up though!
[04:38:35] *** Quits: brson (brson@5F06B402.AD1E507F.3688B332.IP) (Ping timeout)
[04:39:00] <dbaupp> oh... strange
[04:39:50] *** Joins: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP)
[04:39:50] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/uxYPcA
[04:39:50] *** Parts: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP) ()
[04:39:52] *** Joins: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP)
[04:39:52] <ghrust> 01[13rust01] 15bors pushed 16 new commits to 06auto: 02http://git.io/PNqCJQ
[04:39:52] <ghrust> 13rust/06auto 1496cd61a 15Huon Wilson: std: convert {vec,str}::to_owned to methods.
[04:39:52] <ghrust> 13rust/06auto 143c23a0a 15Huon Wilson: std: replace str::append with a method
[04:39:52] <ghrust> 13rust/06auto 148786bca 15Huon Wilson: std: convert str::repeat to a method.
[04:39:54] *** Parts: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP) ()
[04:40:43] <mib_ftzq4c> hrm... well, I guess I'll just ask about iotasks at a high level then -- conceptually, should an iotask be able to persist after it's finished reading/writing once?
[04:40:57] <mib_ftzq4c> or are iotasks "consumed" after a I/O op?
[04:41:03] <strcat> I don't think you really want to make iotasks
[04:41:07] <strcat> you just want to use rust's global one
[04:41:38] *** Quits: carter (carter@moz-12C317EF.nyc.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[04:41:38] <mib_ftzq4c> ah, I'm "making" iotasks via uv::global_loop::get()
[04:41:43] <mib_ftzq4c> is that what you mean?
[04:41:48] <strcat> ah that's just the same one
[04:41:53] <mib_ftzq4c> awesome
[04:41:55] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[04:42:13] <mib_ftzq4c> so if I want to have a connection between a client and server where I'm sending data back and forth in several iterations,
[04:42:52] <mib_ftzq4c> what do I need to do with that "gotten" iotask aside from passing it into the "listen" (server-side) and "connect" (client-side) functions?
[04:44:21] *** Joins: brson (brson@DA348D07.AD1E507F.3688B332.IP)
[04:44:21] *** ChanServ sets mode: +o brson
[04:44:46] <mib_ftzq4c> (std::net::net_tcp::listen and connect, respectively)
[04:45:27] *** Joins: vaidik (vaidik@moz-CF8BEBEF.dia.static.qwest.net)
[04:45:35] *** Quits: deepdog (deepdog@moz-490E834C.client.mchsi.com) (Quit: Leaving)
[04:45:45] *** Joins: isaacaggrey (isaac@moz-E6CFC61F.dfw.dsl-w.verizon.net)
[04:46:01] *** Parts: isaacaggrey (isaac@moz-E6CFC61F.dfw.dsl-w.verizon.net) ()
[04:46:25] *** Parts: vaidik (vaidik@moz-CF8BEBEF.dia.static.qwest.net) (Leaving)
[04:46:26] <mib_ftzq4c> where the server and client are just passing back and forth data, nothing more
[04:48:08] <mib_ftzq4c> (incidentally, it seems like some characters got eaten in the paste bin... they should both connect to 8000... whoops)
[04:50:08] <mib_ftzq4c> or are there good places for examples of libuv use?
[04:50:11] <dbaupp> mib_ftzq4c: you could try looking at the tests in net_tcp.rs... I've got no idea other than that
[04:50:49] <mib_ftzq4c> yeah, that's where I've been looking... I'll look harder then, thanks
[04:50:56] <erickt> dbaupp: unfortunately I wasn't able to review your pull request, maybe strcat can help you out with it
[04:51:19] <erickt> cmr / dbaupp: Here's my `Cast` RFC: https://github.com/mozilla/rust/issues/7080
[04:51:37] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[04:51:48] <dbaupp> erickt: it's fine... it's on its 4th run through bors right now :)
[04:51:58] *** Joins: sankha93 (Instantbir@198BF369.91DE4C67.8B6C1D65.IP)
[04:52:03] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[04:52:04] <mib_ftzq4c> incidentally, out of curiosity, are the net_* modules under active development?
[04:52:04] <dbaupp> mib_ftzq4c: https://github.com/mozilla/rust/blob/incoming/src/libextra/net_tcp.rs#L1443
[04:52:36] <mib_ftzq4c> yep :P the server_client tests there originated those two files...
[04:53:00] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[04:53:06] <mib_ftzq4c> does the server_and_client test ping-pong back and forth, though...?
[04:53:21] <dbaupp> mib_ftzq4c: doesn't look like it, the only changes in the last three weeks have been renaming methods for other things/language syntax changes
[04:53:39] <mib_ftzq4c> right-o, thanks much
[04:53:48] <dbaupp> mib_ftzq4c: and dunno about the test
[04:54:03] <mib_ftzq4c> haha, well thanks for your help anyway!
[04:54:45] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Ping timeout)
[04:55:52] <dbaupp> erickt: reading it now
[04:58:01] <dbaupp> erickt: looks good!
[04:58:13] <mark_edward> i was in here the other day grumbling on problems i had trying to do some network stuff
[04:59:10] <mark_edward> and i built a tiny wrapper over the curl_easy easy interface
[04:59:16] <flu_> rusti: let a = "apple"; let b = "bear"; let c = "chocolate"; ~[a, b, c]
[04:59:19] -rusti- ~["apple", "bear", "chocolate"]
[04:59:33] <mark_edward> and i was wondering if anyone had any ideas as to how to make it more useful
[04:59:40] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[04:59:46] <mark_edward> here it is: https://github.com/MarkJr94/rust_curl
[05:00:10] <flu_> rusti: let a = "apple"; let b = "bear"; let c = "chocolate"; ~[&a, &b, &c]
[05:00:12] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/gESc
[05:00:49] <flu_> mark_edward: when I told my buddy how ridiculous the imagemagick API is, he asked if I had ever looked at libcurl. From what I understand, you must be brave. haha
[05:01:16] <dbaupp> rusti: let (a,b,c) = ("apple", "bear", "chocolate"); println(fmt!("%?", ~[&a, &b, &c]))
[05:01:17] -rusti- ~[&"apple", &"bear", &"chocolate"]
[05:01:17] -rusti- ()
[05:01:28] <mark_edward> the setopt stuff is so weird. so much... state i thik has to be kept in the programmer's mind
[05:01:49] <flu_> dbaupp: so that error was more a symptom of the way rusti-the-bot is built?
[05:02:26] <dbaupp> flu_: correct
[05:02:48] <dbaupp> flu_: it runs `println(fmt!("%?", { <code> }))`
[05:03:04] <flu_> dbaupp: if I don't build that vector out of borrowed pointers, would the strings be allocated twice?
[05:03:19] <dbaupp> flu_: not necessarily
[05:03:44] <flu_> the use case I have is that I want to keep aliases to some values, but pack them up into a vector to send to functions
[05:03:48] <dbaupp> flu_: with literal strings, there's no allocation at all
[05:03:52] <flu_> don't want unique copies of the two
[05:04:03] <flu_> it's structs in my actual case
[05:04:10] <dbaupp> flu_: with ~str there's only an allocation you need to
[05:04:28] <dbaupp> i.e. if you need to use the original after moving it into the vector
[05:04:45] <dbaupp> oh, for structs, it's like ~str
[05:05:05] *** Quits: tjc (tjc@moz-B867959A.redactedconsulting.com) (Quit: Places to go, people to annoy)
[05:05:09] <flu_> dbaupp: which I do. maybe declare them as ~Foo and make the vector of [&a, &b, &c]?
[05:06:04] <dbaupp> yes
[05:06:14] <flu_> gotcha
[05:06:16] <dbaupp> (do you actually need the '~'? stack allocation is often enough)
[05:06:35] *** Quits: devbug (quassel@moz-E1DE087C.bchsia.telus.net) (Ping timeout)
[05:07:04] <flu_> dbaupp: good point. These are definitely task local. I could just stack alloc them, and still use & to build the vec out of references
[05:07:11] *** Quits: mib_ftzq4c (Mibbit@moz-43C591CF.nycmny.east.verizon.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:10:01] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[05:17:13] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[05:18:50] *** Quits: Jesin (Jessin_@moz-157A63DD.cc.lehigh.edu) (Ping timeout)
[05:22:26] *** Joins: thou (thou@moz-1C1CA9F7.fasttrackcomm.net)
[05:27:24] *** Joins: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP)
[05:27:42] *** Quits: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP) (Quit: ChatZilla 0.9.90 [Firefox 21.0/20130511120803])
[05:29:50] <dbaupp> strcat: \o/
[05:30:23] <strcat> there are still a lot of internal iterators to replace ;p
[05:30:47] *** Joins: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP)
[05:30:47] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/PNqCJQ
[05:30:47] *** Parts: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP) ()
[05:30:52] <aatch> bah, stupid buggy freezing.
[05:31:41] <dbaupp> strcat: don't rain on my parade! :P
[05:33:19] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[05:33:21] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:33:37] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[05:33:46] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[05:33:47] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/svFhuA
[05:33:47] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[05:33:47] *** Joins: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP)
[05:33:47] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/bxyT8A
[05:33:47] <ghrust> 13rust/06auto 14107e371 15Daniel Micay: fix the ptr::set_memory docstring
[05:33:47] <ghrust> 13rust/06auto 14fbae011 15Daniel Micay: fix the docstring for copy_nonoverlapping_memory
[05:33:48] <ghrust> 13rust/06auto 144a52ff0 15bors: auto merge of #7072 : thestinger/rust/ptr, r=catamorphism...
[05:33:50] *** Parts: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP) ()
[05:34:25] <dbaupp> rusti: std::str::to_owned("foo")
[05:34:41] *** Parts: Ben (Ben@moz-9E05E9C9.hfc.comcastbusiness.net) ()
[05:34:45] <aatch> Woo, looks like I'm passed this section. Now back to breaking the compiler!
[05:34:50] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:34:58] <dbaupp> rusti: std::str::to_owned("foo")
[05:34:59] -rusti- ~"foo"
[05:35:11] <dbaupp> strcat: why isn't rusti updated yet? ;P
[05:35:14] *** Joins: Palmik (palmik@moz-5CA3F354.pks.muni.cz)
[05:35:25] <strcat> dbaupp: updated before that landed
[05:35:40] <strcat> oh you mean the latest one? ;p
[05:35:45] <dbaupp> strcat: it's been landed for 3 whole minutes!
[05:35:53] <strcat> :)
[05:35:53] <dbaupp> easily enough time to update ;P
[05:37:05] *** Joins: devbug (quassel@moz-E1DE087C.bchsia.telus.net)
[05:37:22] *** Joins: berak (chatzilla@F8A5F4.5E545589.16E13E53.IP)
[05:38:12] *** Joins: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net)
[05:40:18] <engla> what kind of supercomputer is that ^^
[05:40:38] *** Quits: Jesse (jruderman@2557E599.66715431.D25A875A.IP) (Quit: Jesse)
[05:41:16] <aatch> engla, the best kind.
[05:41:39] *** Quits: graydon (graydon@moz-9918B407.vc.shawcable.net) (Quit: Leaving.)
[05:47:25] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[05:49:18] *** Parts: berak (chatzilla@F8A5F4.5E545589.16E13E53.IP) ()
[05:52:30] <bjz> aatch: eck
[05:52:46] <aatch> bjz, what?
[05:53:01] <bjz> aatch: trying to work out how I'd be able to zip my types
[05:53:09] <bjz> not sure how I'd do it
[05:53:31] <dbaupp> bjz: are you trying to implement iterators?
[05:54:05] <bjz> dbaupp: I'm trying to implement zip/map/fold on my types
[05:54:18] <bjz> dbaupp: would you maybe be able to help me?
[05:54:27] <dbaupp> I can try
[05:54:43] <bjz> dbaupp: I'm trying to reduce the code repetition
[05:55:05] <bjz> but I would like it to compile down to the equivalent of if I did it by hand
[05:55:47] <bjz> dbaupp: eg. https://github.com/bjz/lmath-rs/blob/master/src/vec4.rs#L259
[05:56:06] <bjz> or: https://github.com/bjz/lmath-rs/blob/master/src/vec4.rs#L355
[05:56:17] <dbaupp> bjz: (rem_self_v is incorrect there, btw)
[05:56:59] <bjz> what did I do wrong?
[05:57:10] <dbaupp> s@/=@%=@
[05:57:23] <bjz> oh
[05:57:24] <bjz> haha
[05:57:31] <bjz> *facepalm*
[05:57:35] <dbaupp> heh
[05:57:37] <dbaupp> :)
[05:58:03] <bjz> I can do something like this, which is nice: https://github.com/bjz/lmath-rs/blob/master/src/vec4.rs#L124
[05:58:45] <dbaupp> you basically need an external iterator
[05:58:55] <dbaupp> (well, two, a mutable one and an immutable one)
[05:59:15] <bjz> but I have trouble with working out how to do something like (Vec<T>, Vec<U>).zip -> Vec<V>
[05:59:24] <bjz> mmk
[05:59:37] <bjz> would that compile down nicely?
[05:59:42] <bjz> seems expensive
[05:59:45] <dbaupp> sure
[05:59:56] <dbaupp> the iterators seem to compile down really well
[06:00:02] * bjz is ignorant of iterators
[06:00:30] * bjz would like to learn more
[06:00:36] <dbaupp> give me a second
[06:01:38] <bjz> I don't want to be prematurely optimising, but it HAS to compile down to the equivalent of: *self.index(0) * *other.index(0) + *self.index(1) * *other.index(1) + *self.index(2) * *other.index(2) + *self.index(3) * *other.index(3)
[06:01:48] <bjz> for example
[06:02:01] *** Joins: SimonSapin (simon@moz-73287A57.zone9.bethere.co.uk)
[06:02:32] <bjz> (that's the dot product, of course)
[06:03:10] <bjz> the other thing is zipping between two Dimensionals of the same size, like a Mat3 and a Vec3
[06:03:35] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[06:03:35] <bjz> dunno if that is possible atm
[06:04:50] <dbaupp> bjz: https://gist.github.com/huonw/f9589a34bf3162857d62
[06:04:57] <dbaupp> bjz: (haven't actually compiled it)
[06:05:38] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[06:05:56] <bjz> neat
[06:07:12] <dbaupp> bjz: updated with a dot fn
[06:07:55] *** Joins: z0w0 (zack@FDF4EF6A.2CA5CD8.5F93A189.IP)
[06:07:55] <dbaupp> bjz: you'd have to actually compile it with -S (and --emit-llvm, if you're more comfortable with LLVM IR than asm) to see what it generates
[06:08:11] <bjz> -S?
[06:08:31] <dbaupp> emit the asm, rather than a compiled executable
[06:08:40] <bjz> mmk
[06:08:48] <dbaupp> (i.e. you can go in an look at the instructions it generates)
[06:09:20] <dbaupp> Vec4MutIterator would be the same except with `&'self mut` instead of `&'self`
[06:09:28] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[06:09:33] <bjz> could I zip with a Mat4?
[06:09:44] *** Joins: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[06:10:01] <dbaupp> sure, if you had a Mat4 iterator
[06:10:09] *** Quits: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Max SendQ exceeded)
[06:12:07] <aatch> dbaupp, btw, I think I know why isrustfastyet is bouncing up and down for linux.
[06:12:17] <aatch> It seems that one of the bots is faster than the other.
[06:12:36] <dbaupp> aatch: oh nice
[06:12:46] <bjz> heh
[06:13:46] <dbaupp> I'd guessed that was the explanation... but from a cursory investigation it looked false... I thought I saw slow builds on the same machine as there were fast builds... maybe
[06:13:49] * dbaupp checks
[06:14:58] <dbaupp> aatch: ok, maybe not.. linux2 is fast, linux1 is slow
[06:15:17] <aatch> yep
[06:16:18] *** Quits: SimonSapin (simon@moz-73287A57.zone9.bethere.co.uk) (Ping timeout)
[06:17:31] *** Joins: steveklabnik (steveklabn@moz-C3166165.hsd1.ca.comcast.net)
[06:21:07] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[06:21:42] <aatch> Bah, stupid "returns True if error"
[06:21:51] *** Joins: SimonSapin (simon@moz-73287A57.zone9.bethere.co.uk)
[06:24:45] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[06:24:45] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/bxyT8A
[06:24:45] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[06:26:44] <bjz> dbaupp: how does the iterator create a new Vec4/Mat4?
[06:27:00] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Client exited)
[06:27:45] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[06:27:45] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/cRBfAg
[06:27:45] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[06:27:59] <dbaupp> bjz: hm
[06:28:05] <dbaupp> bjz: it probably can't
[06:28:15] <bjz> :(
[06:28:35] <bjz> that's what I would need
[06:29:55] <dbaupp> for the Vec4::new() ones, you might need to create an empty one, and then empty.mut_iter().zip(other1.iter()).zip(other2.iter()).advance(|((assign, o1), o2)| *assign = *o1 + *o2)
[06:30:40] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[06:31:17] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[06:31:30] <bjz> sorry, back now
[06:32:48] <dbaupp> bjz: did you get my last one?
[06:32:54] <bjz> no
[06:32:56] <dbaupp> "for the Vec4::new() ones, you might need to create an empty one, and then empty.mut_iter().zip(other1.iter()).zip(other2.iter()).advance(|((assign, o1), o2)| *assign = *o1 + *o2)"
[06:33:13] <dbaupp> the other option is to .clone() and use the in-place operations
[06:33:38] <bjz> 8/
[06:34:26] *** Quits: steveklabnik (steveklabn@moz-C3166165.hsd1.ca.comcast.net) (Quit: Lost terminal)
[06:35:04] *** Quits: sankha93 (Instantbir@198BF369.91DE4C67.8B6C1D65.IP) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[06:36:57] <bjz> dbaupp: will that be nicer in ther future
[06:37:17] <bjz> tbh that's kinda a scary line of code
[06:37:22] <dbaupp> heh :)
[06:37:30] <dbaupp> it's not great
[06:37:55] <dbaupp> but you can use advance in a for loop, which might make it (slightly) nicer
[06:38:31] <dbaupp> (also that means my example there is incorrect: is should be { *assign = *o1 + *o2; true })
[06:39:24] *** Quits: msingle (Thunderbir@moz-20675462.nrflva.fios.verizon.net) (Ping timeout)
[06:39:37] <dbaupp> I think strcat was considering adding .zip3() which would make it `for empty.mut_iter().zip3(other1.iter(), other2.iter()).advance |(assign, o1, o2)| { *assign = *o1 + *o2; }`
[06:40:29] *** Joins: nano (nano@moz-972880B.superkabel.de)
[06:40:55] <bjz> That's still rather verbose. Is the sugar in the future meant to alleviate that?
[06:41:11] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[06:42:20] <dbaupp> yeah, hopefully the .iter()'s and the .advance can go away with default methods
[06:42:33] <dbaupp> (and the for loop protocol changing to accept iterators)
[06:43:17] <bjz> mmk
[06:43:22] <dbaupp> i.e. `for empty.mut_iter().zip3(other1, other2) |(assign, o1, o2)| { *assign = *o1 + *o2; }`
[06:43:32] *** Joins: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP)
[06:43:32] *** Quits: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP) (Z:lined (Open Proxy found on your host. Please visit www.blitzed.org/proxy?ip=115.68.131.49 for more information.))
[06:43:44] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[06:46:44] *** Joins: fabiand (fabiand@moz-B309C268.adsl.alicedsl.de)
[06:46:49] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[06:47:45] <bjz> I wish it could be as simple as: (self, other).zip(|&s, &o| s * o).foldl(0, |acc, &x| acc + x)
[06:47:48] <bjz> :(
[06:49:48] <dbaupp> ooh, that might work
[06:50:21] <dbaupp> (self, other).transform(|(&s, &o)| s * o).sum()
[06:50:40] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[06:50:47] <dbaupp> it'd require some stuff for tuples, but otherwise, that would work *now*
[06:51:08] <dbaupp> (there is std::iterator::AdditiveIterator trait for .sum(), btw)
[06:53:04] *** Joins: sankha93 (Instantbir@7BC9B34D.E6798AF8.8B6C1D65.IP)
[06:53:18] <dbaupp> hm, actually it'd probably have to be `(self, other).iter(). ...` now, but otherwise, that'd work
[06:54:36] <dbaupp> bjz: (just to be clear, the `for empty.mut_iter() ...` piece is for .add_v)
[06:55:04] <bjz> mmk
[07:04:17] *** Joins: Blei (philipp@moz-96D25F7A.cust.bluewin.ch)
[07:04:32] *** Quits: zxcdw (r-a@moz-C7C5467B.cust.bredband2.com) (Ping timeout)
[07:07:27] *** Quits: SimonSapin (simon@moz-73287A57.zone9.bethere.co.uk) (Ping timeout)
[07:07:49] *** Joins: zxcdw (r-a@moz-C7C5467B.cust.bredband2.com)
[07:10:47] *** Quits: terje (terje@moz-C0F75C5F.san.res.rr.com) (Ping timeout)
[07:11:43] *** Quits: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net) (Quit: Leaving)
[07:12:11] *** Joins: orshem (orshem@19491716.F0FDCE77.E3D28531.IP)
[07:16:36] *** Joins: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP)
[07:16:53] *** Quits: bsmedberg (bsmedberg@moz-748CAEF1.jst.pa.atlanticbb.net) (Ping timeout)
[07:17:38] *** Joins: anri (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net)
[07:18:45] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[07:18:47] *** Quits: brson (brson@DA348D07.AD1E507F.3688B332.IP) (Quit: leaving)
[07:20:48] *** Quits: anri (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net) (Quit: anri)
[07:20:57] *** Quits: zxcdw (r-a@moz-C7C5467B.cust.bredband2.com) (Ping timeout)
[07:21:05] *** Joins: snearch (snearch@moz-21729AFD.pool.mediaways.net)
[07:21:10] *** Joins: zxcdw (r-a@moz-C7C5467B.cust.bredband2.com)
[07:21:57] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[07:22:58] *** Joins: mleise (marco@moz-3468AB5B.pools.arcor-ip.net)
[07:23:09] *** Joins: bsmedberg (bsmedberg@moz-748CAEF1.jst.pa.atlanticbb.net)
[07:23:11] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: Don't tell them I was here...)
[07:25:21] *** Quits: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP) (Ping timeout)
[07:26:47] *** Quits: nano (nano@moz-972880B.superkabel.de) (Connection reset by peer)
[07:31:46] *** Joins: csmedberg (bsmedberg@moz-748CAEF1.jst.pa.atlanticbb.net)
[07:32:31] *** Quits: bsmedberg (bsmedberg@moz-748CAEF1.jst.pa.atlanticbb.net) (Ping timeout)
[07:34:40] *** Joins: Blub\w (wry@moz-4710E069.wireless.dyn.drei.com)
[07:38:01] <Eridius> seems to me we might have gone slightly overboard in removing functions from str
[07:38:23] <dbaupp> Eridius: possibly, but it was partly on purpose
[07:38:30] <Eridius> str::to_chars is gone, and there's no .to_chars method to take its place. .iter().collect() is slightly less-obvious, and doesn't even necessarily work right without explicit parameterization
[07:38:32] <dbaupp> which ones in particular?
[07:38:40] <dbaupp> oh, right
[07:39:01] <Eridius> splitting a string into chars is something that's reasonable enough to want to do to have a method to actually do it
[07:39:04] *** Quits: blitter (blitter@moz-FB45689C.dyn.centurytel.net) (Ping timeout)
[07:39:31] <Eridius> we kept the .to_bytes method, .to_chars would make sense as a companion
[07:39:45] <dbaupp> how often do you want the resulting vector though? rather than immediately iterating over them, or performing some trasformation?
[07:40:09] <dbaupp> Eridius: we don't have .to_bytes any more. more removals landed just recently.
[07:40:58] *** Quits: orshem (orshem@19491716.F0FDCE77.E3D28531.IP) (Ping timeout)
[07:41:07] <Eridius> dbaupp: wait, we killed to_bytes too? wtf
[07:41:16] <Eridius> what's the replacement for that? .iter() is a character iterator
[07:41:25] <dbaupp> Eridius: it's now .as_bytes(&self) -> &'self [u8]
[07:41:32] <dbaupp> Eridius: there's bytes_iter()
[07:41:32] *** Joins: SimonSapin (simon@88F51059.F3BBB17D.144F44FA.IP)
[07:41:36] <Eridius> ehhhhh
[07:41:42] <Amanieu> dbaupp: when you want to do a lot of per-char random access on a string, it would be more efficient to treat is as [char]
[07:41:52] <Amanieu> Main example would be text rendering
[07:42:00] <Eridius> in the code I'm maintaining (rustcrypto), str::to_chars was used to build a ~[char] that was used for hex conversion
[07:42:02] *** Joins: orshem (orshem@19491716.F0FDCE77.E3D28531.IP)
[07:42:10] <Eridius> (though I don't know why it doesn't just use a static array)
[07:42:21] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Quit: eatkinson)
[07:42:22] <dbaupp> there is a fundamental difference between bytes and chars though, since the [u8] is binary identical to the str
[07:42:31] <dbaupp> where as [char] is not
[07:42:52] <Eridius> dbaupp: you sure .to_bytes is gone?
[07:42:54] <Eridius> because I just called it
[07:43:02] <dbaupp> Eridius: it landed like 3 hours ago
[07:43:10] <Eridius> dbaupp: I just pulled and built a few minutes ago
[07:43:16] <Eridius> 4a52ff0
[07:43:50] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[07:44:11] <Eridius> dbaupp: dbaupp to_bytes is defined on any IterBytes, which still exists
[07:44:27] *** Joins: anri (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net)
[07:44:40] <dbaupp> Eridius: oh, right, yes. the string specific .to_bytes is gone though
[07:46:00] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Quit: eatkinson)
[07:46:30] <dbaupp> in any case, str was full of crap. a lot of redundancy was removed (there is more to go, btw). pattens that occur a lot can be added back in.
[07:47:01] *** victorporof_ is now known as victorporof
[07:47:20] <dbaupp> Amanieu: oh, I hadn't though about that. although I guess one actually wants unicode graphemes, not code points.
[07:47:45] *** Quits: Blei (philipp@moz-96D25F7A.cust.bluewin.ch) (Quit: WeeChat 0.4.1)
[07:50:43] <Eridius> ack, I have code that used substr that actually kinda wanted substr
[07:50:49] <Eridius> (e.g. byte index, char count)
[07:51:10] <Eridius> well... I guess only kinda. I suppose there was still an edge case where it could have failed
[07:51:18] <Eridius> which I also suppose was kinda the point in removing it
[07:51:35] <Eridius> I'm just not a fan of how .slice() can fail because it can't return utf-8
[07:52:01] <dbaupp> > 50% of its occurences in rust/src were incorrect, so yeah, killing it was the best option
[07:52:15] <Eridius> slice_chars is ugly though because presumably it's O(n) just to find the start
[07:52:22] <dbaupp> you can use .slice_from(byte_start).slice_chars(0, n)
[07:52:28] <Eridius> hmm
[07:53:01] <dbaupp> Eridius: it is ugly, but there's no other option for a char-based slicer
[07:53:35] <Eridius> dbaupp: I think rust is doing a lot of things right, but tbh Go seems to have a much better approach to strings
[07:53:53] <Eridius> which is, they can contain anything, but interpreting them as characters will produce replacement chars on invalid sequences
[07:54:11] <Eridius> which is nice because I can slice and dice them without worrying about assertions
[07:54:52] <dbaupp> just convert a Rust string to [u8] if you need to be so liberal with characters
[07:55:19] <Eridius> but then it becomes really hard to deal with characters when I actually want characters
[07:56:22] <dbaupp> you lose the guarantee that a string is always valid though
[07:57:16] <Eridius> dbaupp: I'm not convinced that guarantee is worthwhile. Since Go gives me a ReplacementChar instead of an invalid sequence, I can always be sure I'm processing valid chars whenever I actually access characters
[07:57:53] <Eridius> ok bedtime
[07:58:58] *** Quits: mr_fribble (Mibbit@1429E993.8B2434C4.927B248E.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:00:16] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[08:00:21] <dbaupp> Eridius: that's disguising bugs "you screwed up, but we'll pretend you didn't" which is not the attitude of Rust at all.
[08:03:03] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[08:03:08] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Input/output error)
[08:08:06] *** Joins: pyrac (pyrac@moz-B2CB8564.w92-156.abo.wanadoo.fr)
[08:10:04] *** Joins: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[08:10:28] *** Quits: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Max SendQ exceeded)
[08:12:25] *** Joins: brendan (brendaneic@moz-3C352883.sub-70-197-6.myvzw.com)
[08:15:24] *** Quits: brendan (brendaneic@moz-3C352883.sub-70-197-6.myvzw.com) (Quit: brendan)
[08:17:58] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[08:18:13] *** Joins: nano (nano@moz-972880B.superkabel.de)
[08:18:59] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[08:19:24] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[08:20:01] <orshem> does newtype "struct newtype(oldtype)" cost an extra redirection at runtime?
[08:20:03] *** Quits: Voomer_ (Voomer@moz-E97E8EB7.br.br.cox.net) (Connection reset by peer)
[08:20:19] <kimundi> orshem: No
[08:20:40] <orshem> kimundi: thanks
[08:20:55] <kimundi> rusti: std::sys::size_of<u8>()
[08:20:58] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/QaAP
[08:21:06] <dbaupp> orshem: it's not supposed to, but it does at the moment, I think
[08:21:44] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[08:21:44] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14cd52ac8 to 144a52ff0: 02http://git.io/N3iJvQ
[08:21:44] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[08:21:47] *** Joins: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP)
[08:21:47] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/3zLONg
[08:21:47] <ghrust> 13rust/06auto 148fc14b6 15Luqman Aden: librustc: Don't allow duplicate methods on a trait.
[08:21:47] <ghrust> 13rust/06auto 14c6f3103 15Luqman Aden: librustc: Don't allow duplicate methods on impls.
[08:21:48] <ghrust> 13rust/06auto 1447772bc 15Luqman Aden: Add tests for duplicate methods on traits/impls.
[08:21:50] *** Parts: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP) ()
[08:21:54] <kimundi> wut? No way. Where does it allocate then?
[08:22:12] <kimundi> rusti: std::sys::size_of::<u8>()
[08:22:14] -rusti- 1
[08:22:35] *** Quits: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org) (Ping timeout)
[08:22:42] <kimundi> rusti: struct Foo(u8); std::sys::size_of::<Foo>()
[08:22:43] -rusti- 1
[08:22:54] <kimundi> No ptr, no indirection
[08:22:57] <dbaupp> kimundi: it doesn't allocate, but for a newtype like struct Foo(int), calling a function foo(Foo(i)), the arg gets passed by reference, but foo(i) gets passed by value
[08:23:31] *** Joins: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org)
[08:23:32] <dbaupp> (at least it did, I think Blei(?) had a fix, but I'm not sure if it's landed yet)
[08:23:36] <orshem> dbaupp: that will change?
[08:23:43] <kimundi> rusti: struct Foo(u8); let x = Foo(255); unsafe{ transmute::<u8>(x) }
[08:23:44] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/MgRF
[08:24:05] <dbaupp> kimundi: they're binary-identical, it's just when calling functions
[08:24:20] <dbaupp> orshem: I hope so
[08:24:26] <kimundi> Ah, so it's just an implementation bug
[08:24:27] <dbaupp> orshem: it's a bug
[08:24:34] <dbaupp> kimundi: yes
[08:24:51] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[08:25:30] <dbaupp> kimundi, orshem: git@github.com:kballard/rustcrypto.git
[08:25:33] <dbaupp> gah, sorry
[08:25:38] <dbaupp> https://github.com/mozilla/rust/issues/6612
[08:25:44] <kimundi> orshem: So, per design it doesn't cause an indirection.
[08:26:48] <kimundi> HOWEVER, accessing the internal type is done per pointer-dereference operator :P But that doesn't actually dereference anything, it's just sugar for a cast
[08:27:13] <kimundi> rusti: struct Foo(u8); let x = Foo(255); (x, *x)
[08:27:14] -rusti- ({__field__: 255}, 255)
[08:27:35] *** Quits: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com) (Ping timeout)
[08:28:13] <orshem> kimundi dbaupp: good to know. it's exciting watching a language develop before your eyes.
[08:28:29] <kimundi> Indeed it is :)
[08:28:47] *** Joins: doener (bs@moz-AA189A5A.unitymedia.biz)
[08:28:50] <xenocons> some good rust articles around today
[08:29:38] <orshem> is there any editor with syntax highlighting that accounts for lifetime variables? gedit is ruining my eyes :)
[08:29:56] <orshem> xenocons: links?
[08:30:28] <mcpherrin> Vim?
[08:30:56] <xenocons> http://smallcultfollowing.com/babysteps/blog/2013/06/11/on-the-connection-between-memory-management-and-data-race-freedom/
[08:30:56] <dbaupp> orshem: emacs syntax highlighting works ok (the brace matching does though)
[08:31:00] <xenocons> http://smallcultfollowing.com/babysteps/blog/2013/06/11/data-parallelism-in-rust/
[08:31:23] <orshem> xenocons: thanks!
[08:31:37] <kimundi> orshem: kate also works
[08:31:37] <xenocons> np
[08:31:57] <orshem> mcpherrin dbaupp: I was raised on visual studio. vim and emacs is high magic for me.
[08:32:10] <dbaupp> (in general, most rust articles get posted to http://www.reddit.com/r/rust, and there is sometimes interesting discussion there too.)
[08:32:14] <xenocons> was wanting to use emacs for rust, but im getting pains in my left hand below the pinky from emacs
[08:32:22] <dbaupp> orshem: heh :)
[08:32:30] <xenocons> dbaupp: cool, didn't know about that site
[08:32:35] <xenocons> (subreddit)
[08:33:25] *** Quits: devbug (quassel@moz-E1DE087C.bchsia.telus.net) (Client exited)
[08:33:36] <dbaupp> xenocons: people often say that changing caps-lock to act as ctrl is more comfortable
[08:33:45] <xenocons> ah
[08:33:50] <xenocons> that might be a good idea
[08:34:01] <xenocons> left ctrl is awkawrd for me for some reason
[08:34:56] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Quit: Leaving)
[08:35:01] <orshem> kimundi: is the syntax highlighter in kate for rust built in?
[08:35:45] <mcpherrin> orshem: I was raised on vim.  I'm currently trying to figure out visual studio.  Really hard -- lots of confusing buttons :(
[08:35:48] <kimundi> orshem: There is a highlining file in /etc in the rust repo
[08:35:58] <xenocons> mcpherrin: ignore buttons
[08:35:59] <kimundi> for kate
[08:36:03] <xenocons> for they are unneeded
[08:36:30] <orshem> mcpherrin: heh
[08:36:42] <mcpherrin> Upgraded to VS2012 just now and it's a bunch clearer than 2008
[08:36:51] *** Joins: Blei (Philipp@moz-96D25F7A.cust.bluewin.ch)
[08:36:56] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[08:37:09] <orshem> kimundi: that's where I got the file for gedit. But it doesn't account for lifetime variables.
[08:37:55] <kimundi> orshem: Hm, all I can say is that my monts old kate config accounts for them
[08:38:06] <xenocons> dbaupp: come to think of it, capslock is pretty useless anyway
[08:39:07] <dbaupp> xenocons: yeah, I decided that too... mine currently toggle keyboard layouts :)
[08:39:39] *** Joins: jensnockert (jensnocker@moz-AB3D54BA.cust.bredband2.com)
[08:39:47] <xenocons> hah
[08:39:59] <xenocons> ive also got all these fancy keys left of the caps lock that i have no idea what they do
[08:40:15] *** Joins: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[08:40:42] *** Quits: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Max SendQ exceeded)
[08:40:58] <Amanieu> I remapped caps lock to shift
[08:41:10] <Amanieu> mainly because of fat fingers :P
[08:43:22] *** Quits: thou (thou@moz-1C1CA9F7.fasttrackcomm.net) (Input/output error)
[08:46:40] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[08:47:48] *** Quits: sam1 (sam@moz-ADDDDFB1.mc.videotron.ca) (Ping timeout)
[08:49:33] <mark_edward> these new iterators
[08:49:35] <mark_edward> I like them
[08:49:50] <mark_edward> they remind me of C++ iterators, but a lot better 
[08:50:06] <mark_edward> and it's cool that there's an iterator trait to implement
[08:50:58] <kimundi> yeah, they are nice
[08:52:45] <dbaupp> they'll get even better when default methods work!
[08:52:52] * dbaupp is looking forward to default methods
[08:54:29] <orshem> kimundi: thanks. kate shows them correctly. though the i find the kde theme a bit garish :)
[08:56:26] *** Quits: jensnockert (jensnocker@moz-AB3D54BA.cust.bredband2.com) (Ping timeout)
[08:58:08] *** Joins: MaikKlein1 (maik@moz-7BA8C29B.dip0.t-ipconnect.de)
[09:00:29] *** Quits: KindOne (KindOne@moz-60DAB58D.dynamic.ip.windstream.net) (Ping timeout)
[09:01:22] *** Joins: jensnockert (jensnocker@moz-AB3D54BA.cust.bredband2.com)
[09:02:01] *** Joins: novabyte (Instantbir@moz-9B83A1F0.mullvad.net)
[09:02:44] <orshem> is there a way to turn off unused variables warnings only in #[test] blocks?
[09:02:57] *** Joins: jensnock_ (jensnocker@moz-AB3D54BA.cust.bredband2.com)
[09:02:58] *** Quits: jensnockert (jensnocker@moz-AB3D54BA.cust.bredband2.com) (Connection reset by peer)
[09:03:32] <dbaupp> orshem: often people wrap the tests in a #[cfg(test)] mod tests { ... } block
[09:03:52] *** Joins: sam1 (sam@moz-ADDDDFB1.mc.videotron.ca)
[09:03:58] *** Joins: EXetoC (ex@moz-2DBEB1E4.customer.t3.se)
[09:04:06] <dbaupp> and then you can set #[allow(dead_assignment)]
[09:04:24] <dbaupp> (the other option is to just put _ at the start of the variable names)
[09:04:45] *** Joins: KindOne (KindOne@moz-60F9A56E.dynamic.ip.windstream.net)
[09:04:46] *** Joins: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk)
[09:04:49] <orshem> dbaupp: _ that seems better somehow
[09:04:50] <xenocons> kde is evil!
[09:04:53] <orshem> less intrusive
[09:05:11] <orshem> kde seems to be very much in the spirit of c++
[09:05:34] <xenocons> cluttered :P?
[09:07:00] <xenocons> id love to wipe away windows and install linux on my desktop heh
[09:07:06] <xenocons> but ive got a feeling i would regret it
[09:07:14] <xenocons> http://fluxbox.org/screenshots/screenshots_full/screenshot_tenner.png <- nice WM
[09:08:25] <dbaupp> xenocons: what are you wait for? format your hard drive now! :P
[09:09:17] <xenocons> dbaupp: so incredibly tempted
[09:09:41] <orshem> xenocons: do what I do: work in a VM
[09:09:51] *** Joins: k00mi (koomi@moz-B054AB86.pools.arcor-ip.net)
[09:09:56] <xenocons> orshem: dont you hate VMs though? i shutdown my pc daily
[09:10:12] <xenocons> no matter how close it gets to the system, i always find them a nusence
[09:10:38] <orshem> xenocons: nah. I have more than a few running. windows 7, window 8, ubuntu
[09:11:26] <orshem> mac
[09:11:37] <orshem> I don't shut down my computet though
[09:13:17] *** Quits: pyrac (pyrac@moz-B2CB8564.w92-156.abo.wanadoo.fr) (Quit: pyrac)
[09:14:39] <xenocons> ah yeh
[09:14:40] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[09:15:13] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[09:15:35] <xenocons> might do some research about it, since im pretty confident that rust will be my next major lang, might be time to switch
[09:16:43] *** Quits: MaikKlein1 (maik@moz-7BA8C29B.dip0.t-ipconnect.de) (Ping timeout)
[09:17:35] *** Quits: jensnock_ (jensnocker@moz-AB3D54BA.cust.bredband2.com) (Ping timeout)
[09:18:04] <Blei> asontehusantoehusantoheu
[09:18:06] <Blei> line endings
[09:18:16] <Blei> i hate windows/mingw
[09:18:17] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[09:18:41] <orshem> xenocons: i thought rust works on windows?
[09:18:44] *** Joins: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP)
[09:18:44] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/3zLONg
[09:18:44] *** Parts: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP) ()
[09:18:59] <xenocons> orshem: yeah it does (im using it now) but erm, the whole opensource thing really is just nicer in linux, imo
[09:19:15] <xenocons> whole mingw thing is quite unsightly
[09:19:50] <orshem> xenocons: not necessarily. my experience with go no windows has been largely positive
[09:20:01] <Blei> so i got some mysterious build failures, after some debugging it was found that autoconf doesn't replace some stuff that it should
[09:20:10] <xenocons> orshem: yeah its not bad
[09:20:18] <xenocons> and i do like windows
[09:20:43] <xenocons> maybe just feel like a change
[09:20:45] <Blei> now after even more debugging, it turns out that autoconf has problems with \r\n line endings -- but only in files that are used in AC_CONFIG_HEADERS
[09:20:52] <Blei> all the rest seems to work ok
[09:21:21] <dbaupp> Blei: how strange
[09:22:10] <mark_edward> xenocons: dualbooting is my solution
[09:22:20] <mark_edward> but i end up going weeks without booting into widows
[09:22:28] <xenocons> hm thats a good idea
[09:22:31] <orshem> xenocons: i'd stay on windows just for office
[09:22:40] <xenocons> wonder how grub handles win8 boot sector
[09:22:54] <xenocons> orshem: yeah, cant get away from that unfortunately
[09:23:05] * xenocons vein pops out on head thinking about office
[09:23:14] <dbaupp> xenocons: I'm dualbooting win8 and debian, and it mostly works
[09:23:23] <xenocons> yeah, i think ill give this a go
[09:23:56] <orshem> dbaupp: which wm?
[09:24:02] <dbaupp> orshem: LaTeX all the way
[09:24:04] <xenocons> first ill find out where i mysteriously lost 113GB of my SSD
[09:24:05] *** Joins: jensnock_ (jensnocker@moz-AB3D54BA.cust.bredband2.com)
[09:24:14] <dbaupp> orshem: the default, gnome3
[09:24:30] *** Quits: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com) (Ping timeout)
[09:24:31] <orshem> xenocons: that's why people go the apple way. they get unixy stuff + apple stuff + office
[09:24:41] <orshem> and parallel is nice
[09:25:21] <mark_edward> xenocons: just fine for me. I have windows 8
[09:29:08] *** Joins: MaikKlein1 (maik@moz-7BA8C29B.dip0.t-ipconnect.de)
[09:29:18] <EXetoC> LibreOffice and OO were alright last time I checked, but then again I only used them for basic stuff, and not for a particularly long time
[09:31:35] <mcpherrin> They really aren't...
[09:31:59] <mcpherrin> They're barely passable, at best
[09:32:45] <mark_edward> mcpherrin: in terms of what? I've had no trouble with them.
[09:32:56] <mark_edward> all i do is write papers and essays
[09:33:21] <mark_edward> for basic stuff, which is like 90% of use cases, there's o difference
[09:33:29] <EXetoC> ok
[09:33:32] <mcpherrin> Until you have to send a document to somebody else
[09:33:47] <mcpherrin> "barely passable" is all many people need, sure.
[09:34:35] <mcpherrin> But this is #rust, not #office, so who cares.
[09:34:41] <mark_edward> i just save it as a word doc. i haven't used anything where that fails
[09:34:57] <EXetoC> I did that successfuly before, but I don't know if there are new formats that they can't handle very well yet. trying to kill of the competition that way is an ms tradition isn't it :>
[09:35:13] *** Joins: igl1 (igl@moz-3DA0C609.adsl.alicedsl.de)
[09:35:17] <mark_edward> along with servo, mozilla should develop an open-source office  alternative
[09:35:21] <mark_edward> IN RUST
[09:35:33] *** Quits: igl (igl@moz-77397090.adsl.alicedsl.de) (Ping timeout)
[09:35:34] <mark_edward> then we could talk about it forever in this channel
[09:35:53] <EXetoC> good idea
[09:36:06] <Earnestly> howaboutno
[09:36:22] <mark_edward> sounds like a great project as a proving ground for a new PL
[09:36:35] <EXetoC> maybe if they can afford to hire one or two new programmers
[09:36:41] <mcpherrin> It really doesn't.  Editors are mostly an exercise in user experience.
[09:36:42] <EXetoC> actually, make it 15
[09:36:57] <mcpherrin> And brute manpower for office compat
[09:37:31] <mark_edward> it'd still be cool >.> not much competition in the space
[09:37:52] *** Joins: sdh_ (sdh@327ABE25.365E45D9.41207AE9.IP)
[09:38:01] <mark_edward> utilize a JSON doc format with cloud-syncing and a RESTful API!
[09:38:12] * mark_edward needs more buzzwords
[09:38:25] <kimundi> synergy!
[09:38:31] <Blei> make it scale!
[09:38:38] <Earnestly> webscale.
[09:38:41] <Blei> NoSQL!
[09:38:53] <kimundi> web 3.0!
[09:38:54] *** Quits: jensnock_ (jensnocker@moz-AB3D54BA.cust.bredband2.com) (Connection reset by peer)
[09:38:56] <mark_edward> mobile!
[09:39:02] <Blei> disruptive eventual-consistency document editing!
[09:39:17] <mark_edward> it sounds beautiful. 
[09:39:36] *** Joins: jhark (jhark@moz-B9920504.jhark.net)
[09:40:16] <Earnestly> http://securityreactions.tumblr.com/post/47620827419/realizing-the-client-was-serious-when-they-used
[09:40:43] *** Quits: MaikKlein1 (maik@moz-7BA8C29B.dip0.t-ipconnect.de) (Ping timeout)
[09:44:14] *** Joins: true_droid (Adium@moz-123FD9B8.beck.volia.net)
[09:44:22] <xenocons> mark_edward: can i ask what distro you are using?
[09:44:52] <xenocons> orshem: guilty confession: i tried mac a year back, i had to stop after about 6 months, nearly went postal, cant stand them
[09:45:00] <mark_edward> ubuntu 13.04. I've tried Fedora, Mint, and Debian
[09:45:09] <xenocons> ah, hows mint? i hear good things
[09:45:17] <xenocons> not a fan of ubuntus appleisation of UI
[09:45:27] <mark_edward> it's cool, but i really like the Unity UI
[09:45:39] <xenocons> unity UI?
[09:45:42] *** Quits: indirect (indirect_m@moz-770AB053.hsd1.ca.comcast.net) (Ping timeout)
[09:45:47] <xenocons> is that the new one that looks like a webbrowser
[09:45:49] <mark_edward> that's what's it's called
[09:46:11] <mark_edward> the Unity shell, with the dash and the icons on the left and stuff
[09:46:18] <xenocons> ah k
[09:47:17] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[09:47:24] *** Joins: jensnockert (jensnocker@moz-AB3D54BA.cust.bredband2.com)
[09:47:34] *** Joins: indirect (indirect_m@moz-770AB053.hsd1.ca.comcast.net)
[09:49:27] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[09:51:05] *** Joins: sk (sk@44FB31D1.A56C954C.78DD174B.IP)
[09:54:38] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[09:59:01] *** Quits: jensnockert (jensnocker@moz-AB3D54BA.cust.bredband2.com) (Ping timeout)
[10:03:58] *** Quits: jdm (jdm@DB05BBF2.BB1F48F2.971E19F6.IP) (Ping timeout)
[10:04:05] *** Quits: ILyoan (ILyoan@B4104EBB.3CC170B1.1E14B209.IP) (Ping timeout)
[10:06:36] *** Quits: heftig (heftig@moz-F83F2908.dip0.t-ipconnect.de) (Ping timeout)
[10:10:52] *** Joins: heftig (heftig@moz-3D6EBBD3.dip0.t-ipconnect.de)
[10:17:06] *** Joins: jensnockert (jensnocker@moz-AB3D54BA.cust.bredband2.com)
[10:20:56] *** Joins: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[10:21:07] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[10:21:37] <kimundi> xenocons: Btw thx for that fluxbox link. That wm looks like it could be what I was looking for :)
[10:21:58] <xenocons> kimundi: np, im going to try set it up tonight
[10:25:15] *** Quits: jensnockert (jensnocker@moz-AB3D54BA.cust.bredband2.com) (Connection reset by peer)
[10:25:26] <pnkfelix> nmatsakis: ping
[10:25:43] *** Joins: jensnockert (jensnocker@moz-AB3D54BA.cust.bredband2.com)
[10:26:34] *** Quits: jensnockert (jensnocker@moz-AB3D54BA.cust.bredband2.com) (Connection reset by peer)
[10:27:03] *** Joins: jensnockert (jensnocker@moz-AB3D54BA.cust.bredband2.com)
[10:27:36] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[10:32:30] *** Quits: jensnockert (jensnocker@moz-AB3D54BA.cust.bredband2.com) (Connection reset by peer)
[10:32:56] *** Joins: jensnockert (jensnocker@moz-AB3D54BA.cust.bredband2.com)
[10:33:53] *** Quits: jensnockert (jensnocker@moz-AB3D54BA.cust.bredband2.com) (Connection reset by peer)
[10:34:20] *** Joins: jensnockert (jensnocker@moz-AB3D54BA.cust.bredband2.com)
[10:37:40] *** kimundi is now known as zz_kimundi
[10:39:12] *** Quits: EXetoC (ex@moz-2DBEB1E4.customer.t3.se) (Quit: WeeChat 0.4.1)
[10:40:10] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[10:40:16] *** Parts: orshem (orshem@19491716.F0FDCE77.E3D28531.IP) (WeeChat 0.4.0)
[10:41:35] *** Joins: EXetoC (ex@moz-C741B177.customer.t3.se)
[10:57:08] <novabyte> xenocons: might also be worth trying ElementaryOS (http://elementaryos.org/) ;)
[10:57:10] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[10:57:35] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[10:58:26] <xenocons> novabyte: looks very mac like, are you trying to have me killed ;)
[10:58:46] <cmr> Elementary is a great project
[10:58:50] *** Quits: k00mi (koomi@moz-B054AB86.pools.arcor-ip.net) (Ping timeout)
[10:58:57] <novabyte> xenocons: Lol, believe it or not but those guys have been building elementary for years
[10:59:18] <xenocons> is iti stable?
[10:59:20] <xenocons> it*
[10:59:20] <novabyte> a lot of Apple's own recent innovation has come from bits they've done (and vice versa)
[10:59:52] <novabyte> xenocons: well, Luna release should ship in a couple of months
[10:59:58] <novabyte> it's Beta2 at the moment
[11:00:10] <novabyte> I use it regularly with out trouble though
[11:00:11] <xenocons> ah ;p
[11:00:31] <xenocons> ill stick to the platforms nvidia has drivers for atm
[11:00:32] <novabyte> their new website is here: http://master.elementaryos.org/
[11:00:39] <novabyte> fair enough ;)
[11:01:17] <cmr> xenocons: it's a linux distro
[11:03:54] *** Joins: nooy (user@moz-2458675D.a146.priv.bahnhof.se)
[11:04:18] *** Quits: sankha93 (Instantbir@7BC9B34D.E6798AF8.8B6C1D65.IP) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[11:04:50] *** Joins: dualhbridge (dad@moz-9FEE6D3B.maine.res.rr.com)
[11:04:52] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[11:06:48] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[11:06:58] <dbaupp> aatch: ping
[11:10:27] *** Quits: jensnockert (jensnocker@moz-AB3D54BA.cust.bredband2.com) (Connection reset by peer)
[11:10:52] *** Joins: jensnockert (jensnocker@moz-AB3D54BA.cust.bredband2.com)
[11:11:28] *** Joins: orshem (orshem@19491716.F0FDCE77.E3D28531.IP)
[11:11:28] *** Joins: judder (maradukewa@85208D00.97F8E51D.E305BD61.IP)
[11:13:30] *** Quits: jensnockert (jensnocker@moz-AB3D54BA.cust.bredband2.com) (Connection reset by peer)
[11:13:58] *** Joins: jensnockert (jensnocker@moz-AB3D54BA.cust.bredband2.com)
[11:14:05] <Blei> hrm. how would one go about converting a configure/make project to use msvc? cmake would be an idea, but iirc that's not welcome
[11:15:34] <dbaupp> Blei: I saw your comment about jemalloc & msvc: doesn't firefox use jemalloc on windows? how do they compile it?
[11:15:47] <orshem> Blei: can llvm be built on windows using msvc?
[11:15:50] <Blei> that's what i thought as well, so i looked it up
[11:16:05] <Blei> https://hg.mozilla.org/mozilla-central/file/0414d6d0f60d/memory/jemalloc
[11:16:27] <Blei> they use their custom mozbuild system somehow
[11:16:46] <Blei> orshem: yes, that should work
[11:16:57] <Blei> orshem: but the rest of rust is configure/make only
[11:17:11] <Blei> err, sorry
[11:17:26] <Blei> llvm can be built because it uses cmake, but the rest of rust ...
[11:17:38] <dbaupp>     35 ifdef _MSC_VER
[11:17:38] <dbaupp>     36 LOCAL_INCLUDES += -I$(srcdir)/src/include/msvc_compat
[11:18:40] <Blei> dbaupp: yes, but they still somehow have to call configure for jemalloc, no?
[11:18:56] <dbaupp> Blei: no idea
[11:19:15] <dbaupp> (that seems to imply that they do use msvc, though?)
[11:19:28] <Blei> yeah, so it should be possible somehaw
[11:20:10] <dbaupp> there's not that much required https://github.com/mozilla/mozilla-central/tree/master/memory/jemalloc/src/include/msvc_compat
[11:20:16] <orshem> Blei: rust dependency on mingw is only because of llvm? what about uv?
[11:20:18] <dbaupp> (other than the build system)
[11:20:53] <Blei> orshem: no, llvm shouldn't be a problem i think. i'm not sure about the rest yet
[11:20:53] *** Quits: jensnockert (jensnocker@moz-AB3D54BA.cust.bredband2.com) (Connection reset by peer)
[11:21:35] <dbaupp> libuv's readme says that visual studio is supported
[11:21:37] *** Joins: jensnockert (jensnocker@moz-AB3D54BA.cust.bredband2.com)
[11:25:44] *** Joins: ilyoan (ilyoan@B4104EBB.3CC170B1.1E14B209.IP)
[11:26:21] <nmatsakis> pnkfelix: pong
[11:26:30] <nmatsakis> cmr: I intended that kind of thing (parallel map) as a higher-order wrapper
[11:26:40] <nmatsakis> cmr: but I certainly agree we want it in the std lib
[11:26:46] <pnkfelix> nmatsakis: I finally spent a little time on visitor refactoring last night
[11:27:07] <nmatsakis> pnkfelix: oh yeah? (ps, sully has been fixing various bugs in default methods...)
[11:27:16] <pnkfelix> nmatsakis: my main insight (which you might have already told me), was that if I want to try to proceed in incremental steps, then the first step could well be to replace all the 
[11:27:22] <pnkfelix> fn(â€¦, E, vt<E>)
[11:27:24] <pnkfelix> with
[11:27:29] <pnkfelix> fn(â€¦, (E, vt<E>))
[11:27:37] <pnkfelix> then, after putting in a Visitor trait
[11:27:49] <pnkfelix> I can make (E, vt<E>) implement that Visitor trait
[11:28:02] *** Joins: sankha93 (Instantbir@C6D2B809.CC944C2F.8B6C1D65.IP)
[11:28:03] <nmatsakis> huh, I hand't considered that
[11:28:19] <nmatsakis> I was figuring we'd just make a copy (let's call it visitor2) that is trait based
[11:28:25] <nmatsakis> and port the passes one-by-one
[11:28:53] <pnkfelix> nmatsakis: that is also an option, yes
[11:29:09] <pnkfelix> nmatsakis: this seemed easier to put in to me, in terms of convincing myself
[11:29:13] <pnkfelix> nmatsakis: that the transformation is correct
[11:29:22] <Blei> heh, so i installed mozilla's build tools. they include msys, so the autoconf mystery is solved :P
[11:29:35] <pnkfelix> nmatsakis: but of course, that is only delaying the "real work"
[11:29:38] <Blei> that could actually work for rust too
[11:30:05] <Blei> i bet there's not too much that would have to be changed...
[11:30:07] <dbaupp> Blei: cool! do you know what we actually require mingw for?
[11:30:32] <pnkfelix> nmatsakis: Anyway, if I'm going to do this intermediate step
[11:30:43] <pnkfelix> nmatsakis: its a bit of a boil-the-ocean kind of change
[11:30:46] <Blei> i know that we need it for the build system for now. maybe some gcc specific dlls? we'll see
[11:31:03] <pnkfelix> nmatsakis: I have a patch that I made last night
[11:31:35] *** Quits: ilyoan (ilyoan@B4104EBB.3CC170B1.1E14B209.IP) (Connection reset by peer)
[11:31:46] <pnkfelix> nmatsakis: maybe you could skim it, see if you think if its a waste of time, or potentially the right track?  And if its reasonable, we'll see if bors accepts it?
[11:32:06] <nmatsakis> pnkfelix: sure
[11:32:10] <pnkfelix> nmatsakis: https://github.com/pnkfelix/rust/commit/ecef9ad75adb929521e3e6a3cd2137964f7cd36c
[11:32:17] *** Joins: ilyoan (ilyoan@B4104EBB.3CC170B1.1E14B209.IP)
[11:32:38] <pnkfelix> nmatsakis: I was impressed that I didn't have to add too many lifetime annotations (only one, I think)
[11:32:46] <pnkfelix> nmatsakis: I think the main bit of pain
[11:33:15] <pnkfelix> nmatsakis: was that when I transformed `fn(â€¦, e: E, v)` to `fn(â€¦, (e, v): (E, vt<E>)`
[11:33:50] <pnkfelix> nmatsakis: the E's were sometimes large, and it might have been nice if we had a wildcard syntax for type-components, to tell the type-inferencer to fill in the blank in `fn(â€¦, (e, v): (E, _)`
[11:38:41] *** Quits: jensnockert (jensnocker@moz-AB3D54BA.cust.bredband2.com) (Ping timeout)
[11:39:37] *** Joins: jensnockert (jensnocker@moz-AB3D54BA.cust.bredband2.com)
[11:41:25] *** Quits: rocode (rocode@moz-64C1010D.rocode.net) (Ping timeout)
[11:45:06] *** Joins: rocode (rocode@moz-64C1010D.rocode.net)
[11:49:30] *** Quits: jensnockert (jensnocker@moz-AB3D54BA.cust.bredband2.com) (Connection reset by peer)
[11:49:59] *** Joins: jensnockert (jensnocker@moz-AB3D54BA.cust.bredband2.com)
[11:50:12] *** Quits: Excureo (c@moz-DE8C33F1.static.yakm.wa.charter.com) (Ping timeout)
[11:51:05] *** Joins: Amanieu_ (amanieu@moz-D5D10CA8.halls.manchester.ac.uk)
[11:51:05] *** Quits: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk) (Connection reset by peer)
[11:51:05] <nmatsakis> pnkfelix: 
[11:51:17] *** Joins: Excureo (c@moz-DE8C33F1.static.yakm.wa.charter.com)
[11:51:41] <pnkfelix> nmatsakis: ?
[11:51:45] <nmatsakis> pnkfelix: sorry for delay, looks reasonable.
[11:51:58] <nmatsakis> pnkfelix: I'm trying to envision the individual steps now
[11:52:07] <nmatsakis> pnkfelix: so next step is to define trait and make (E, vt) implement the triat?
[11:52:12] <pnkfelix> nmatsakis: Yeah, that's what I was thinking
[11:52:32] <pnkfelix> nmatsakis: on the one hand, it might be good to wait to land this until after I confirm that the whole path makes snese
[11:52:51] *** zz_kimundi is now known as kimundi
[11:52:52] <pnkfelix> nmatsakis: on the other hand, waiting to land it introduces more effort later to rebase the patch
[11:52:58] <nmatsakis> pnkfelix: on the other, bit rot...? yeah, the usual trade.
[11:53:11] <nmatsakis> pnkfelix: does it affect compile-time?
[11:53:26] <nmatsakis> pnkfelix: I can imagine the generated code will be less efficient, but it's probably not by much.
[11:53:32] <pnkfelix> nmatsakis: so the real question: Is there real risk here?  Part of me thinks that this change to the tuple might be a strict improvement in readability
[11:53:37] <pnkfelix> nmatsakis: ah, I did not measure compile-time
[11:53:40] <pnkfelix> nmatsakis: hmm.
[11:53:54] <pnkfelix> nmatsakis: I'll do that first.
[11:54:00] <nmatsakis> pnkfelix: we're not super smart about these things right now, but I think that typically the user data is a pointer, so it doesn't really make much difference
[11:54:00] *** Joins: pyrac (pyrac@moz-B2CB8564.w92-156.abo.wanadoo.fr)
[11:54:10] <nmatsakis> pnkfelix: though there are a few places we use structs (they probably *should be* pointers)
[11:57:56] <pnkfelix> nmatsakis: any good + easy self-contained timing tests for rustc that you use?
[11:58:07] <pnkfelix> nmatsakis: preferably ones that are quick?
[11:58:26] *** Joins: pnkfelix|rcirc (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[12:00:24] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[12:05:11] *** Quits: ilyoan (ilyoan@B4104EBB.3CC170B1.1E14B209.IP) (Input/output error)
[12:06:02] *** Joins: cr (anonymous@moz-B141BCC5.dip0.t-ipconnect.de)
[12:06:47] *** Quits: snearch (snearch@moz-21729AFD.pool.mediaways.net) (Quit: Verlassend)
[12:07:02] *** Joins: snearch (snearch@moz-21729AFD.pool.mediaways.net)
[12:07:20] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[12:07:33] <nmatsakis> pnkfelix: I just usually build rustc.rc
[12:07:42] <nmatsakis> pnkfelix: sometimes with --no-trans
[12:09:02] <pnkfelix> nmatsakis: okay, thanks.  I'm going out for lunch now; ttyl.
[12:09:29] <cr> newbie alert! i initialise an Option<@s> struct parameter with None, then replace it with its final @s (which isn't know on init).
[12:09:49] <cr> how do i resolve the type conflict that results? error: mismatched types: expected `core::option::Option<@Symref>` but found `@Symref`
[12:10:08] <bstrie> cr: instead of replacing it with @s, replace it with Some(@s)
[12:10:24] <dbaupp> bstrie: feel like closing https://github.com/mozilla/rust/issues/7019 ? :)
[12:10:36] <bstrie> cr: if you have the code online I can take a look at it
[12:11:10] *** Quits: snearch (snearch@moz-21729AFD.pool.mediaways.net) (Quit: Verlassend)
[12:11:41] <cr> bstrie: will try the Some()
[12:12:26] <bstrie> cr: if you *know* that eventually your value won't be None, then I don't think you necessarily need an Option at all
[12:14:14] <bstrie> dbaupp: closÃ©d
[12:14:32] <cr> bstrie: i need to build a self-referencing node
[12:14:54] <bstrie> ah, then I think an option works there
[12:15:10] <cr> is there a different way that taking the Option<> route?
[12:15:19] <cr> s/that/than/
[12:16:18] <kimundi> Not really.
[12:16:37] <bjz> cr: You could also make your own enum
[12:17:04] <kimundi> You can use some other type that Option to do the same thing as option, or you can use unsafe pointers, but functionality-wise there is not difference.
[12:17:06] <bjz> cr: if you wanted to be self-documenting.
[12:17:23] <cr> bjz: how would that go?
[12:17:31] <bjz> cr: but Option does have some very nice methods that are useful
[12:17:46] <dbaupp> bstrie: thanks!
[12:17:54] <cr> i'll try Option for now
[12:18:30] <bjz> rusti: enum Thing { Widget(@Thing), Nada }
[12:18:32] -rusti- ()
[12:18:53] <bjz> see? very self documenting
[12:18:57] <bjz> :D
[12:18:58] <cr> but it looks like the struct must become mutable for this to work, even though it could/should be immutable outside the constructor
[12:19:38] <cr> ohmigosh.
[12:19:38] *** Quits: jensnockert (jensnocker@moz-AB3D54BA.cust.bredband2.com) (Ping timeout)
[12:19:39] <cr> :)
[12:19:52] <bjz> cr: hmm?
[12:20:12] <kimundi> cr: types in rust are not mutable or immutable, they inherit mutability from their owner.
[12:20:15] <cr> self-dosumenting...
[12:20:32] <cr> self-documentingâ€¦ i have never seen Widget
[12:21:14] <cr> kimundi: i know, and that is part of the problem
[12:21:40] <bjz> cr: Widget is a highly technical computer science term
[12:21:44] <kimundi> Hm, what exactly is the propblem then?
[12:22:11] <bstrie> bjz: oh god, tell me you're not trying to explain widgets
[12:22:19] <bstrie> do you *want* to scare away all the new users?
[12:22:23] <kimundi> lol
[12:22:36] <cr> i should prepare some codeâ€¦ sec
[12:22:40] <bjz> well see, a widget is like a doodad...
[12:22:58] * bjz thinks he should write a blog post
[12:23:25] <bstrie> I don't think a widget is like a doodad at all...
[12:23:39] <bstrie> at least not any definition of doodad I've ever heard of
[12:23:52] <bstrie> if anything, it's like a thingamajig
[12:24:38] <bjz> bstrie: no analogy is perfect, but I admit it was a little clumsy
[12:25:14] <bstrie> more technically, a doodad is a whatsoid in the category of endowhoosits
[12:25:42] <bjz> you really just have to start using widgets to understand them
[12:26:10] <bstrie> you can think of it like a quesadilla in a diving bell
[12:26:29] <cr> http://pastebin.com/ZguzENYA
[12:26:44] *** Quits: true_droid (Adium@moz-123FD9B8.beck.volia.net) (Ping timeout)
[12:28:31] <bstrie> cr: you don't necessarily need to define that trait, you can just say `impl Ruledata { fn new() { ...`
[12:28:41] <cr> please disregard for now that the SymLink type isn't used in the struct Symbol as should be
[12:28:42] <bstrie> unless you were planning on using the trait elsewhere for something
[12:29:13] <cr> ok, but i will take care of that later
[12:29:46] <cr> so the code as shown fails due to writing to immutable fields.
[12:30:22] <bstrie> cr: what version do you have?
[12:30:26] *** Joins: true_droid (Adium@moz-123FD9B8.beck.volia.net)
[12:30:32] <cr> 0.6, bstrie
[12:31:38] <cr> if I use let guard = @mut Symbolâ€¦ instead, the compiler complains that it expects an Option<@Symbol>, but got @mut Symbol instead
[12:32:30] <cr> so i figure that i can only make this work if my Symbols become mut all around, or is the a way to cast @mut Symbol to @Symbol?
[12:32:38] * dbaupp thinks there should be a safe way to "tie the knot" for @
[12:33:14] <dbaupp> cr: if you had `left: Option<@mut Symbol>, right: Option<@mut Symbol>` it should work with @mut
[12:33:24] <bstrie> cr: that's a good question, using @ and @mut is tricky
[12:33:36] <dbaupp> cr: it'd be tricky to make it work without @mut :(
[12:33:50] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[12:34:19] <cr> dbaupp: ok. that would be what i described as "@mut all around". but could I prevent that?
[12:34:50] <cr> ok, so i'll go mutable and deal with the consequences ;)
[12:36:30] <dbaupp> cr: I don't think it's possible to avoid @mut without using unsafe and some large hacks, or restructuring the code to not not store direct @ pointers back to self
[12:38:05] <cr> bummr.
[12:38:44] <cr> but for now the code works with adding Some() to soothe the Option, and making the Symbols mutable.
[12:38:48] <cr> thanks!
[12:40:48] <cr> btw, I read all the doc and examples around Option that I could find on rust-lang.org, but it just didn't occur to me that I would need the Some() as used in Option's enum definition
[12:40:52] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[12:41:26] *** Joins: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP)
[12:49:57] *** Joins: k00mi (koomi@moz-B054AB86.pools.arcor-ip.net)
[12:53:48] <cmr> cr: It's because it's an enum, that's justhow enums work (I was also very confused about it when i was getting started). How do you thibnk the docs could be more clear?
[12:57:19] <cr> cmr: by example would do the trick. cover the case of assigning to an Optioned field.
[12:58:27] <cr> cmr: also, i think that giving more non-trivial enum examples might would have tipped-off that thought in me to use Some(), as the definition of Option is there.
[12:59:07] <cmr> cr: you're right, the tutorial gives enums a trivial treatment, only using pattern matching
[12:59:43] <cr> cmr: also, i was not able to find explicit doc on Some() byt searching for "Some" in specs, tutorial and core doc. so i couldn't really place it
[13:01:10] <cr> cmr: now that you ask. iirc, reading the specs didn't make clear the en enum must be deconstructed to access struct content. that was only in the tutorial
[13:01:27] <cr> s/en //
[13:01:29] <cmr> cr: Option probably deserves its own section in the tutorial, considering it's a core rust idiom
[13:01:53] <dbaupp> rusti: match @"foo" { @"foo" => true, _ => false }
[13:01:54] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/JWSf
[13:01:55] <cr> i would agree
[13:02:04] <dbaupp> rusti: match @"foo" { "foo" => true, _ => false }
[13:02:05] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/TZWH
[13:02:46] *** Joins: terje (terje@moz-C0F75C5F.san.res.rr.com)
[13:03:06] <doener> hm, why are the libs installed to lib/ as well as lib/rustc/$target_triple/lib? Removing all libs except librustllvm.so from lib/ seems to have no ill effects
[13:03:37] <cr> cmr: also, regarding enums, the docs never make quite clear that the need for deconstruction means that you cannot really assign new values to single enum struct fields (unless i got that wrong)
[13:03:50] *** Quits: tbrock (tbrock@34641662.FB4DE631.66C78B76.IP) (Input/output error)
[13:04:37] <dbaupp> doener: remove that part of make install and submit a pull request and see if anyone objects?
[13:05:46] *** Quits: sankha93 (Instantbir@C6D2B809.CC944C2F.8B6C1D65.IP) (Ping timeout)
[13:05:58] <doener> dbaupp: looking at the make targets probably explains it. Cross compilers need that
[13:06:24] <dbaupp> doener: oh, right. that makes sense: libraries for host and for target
[13:06:54] <doener> yep
[13:06:56] <dbaupp> wooooo \o/ libsyntax builds with @str instead of @~str
[13:07:09] <dbaupp> aaand librustc gives me 544 errors :(
[13:07:21] <doener> no build it with ~str and &str :-)
[13:07:26] <doener> s/no/now/
[13:07:57] <dbaupp> doener: that's hard
[13:08:34] <doener> I know
[13:09:31] <doener> I guess the @~str requirement (instead of just @str) was mostly lifted with the interners now accepting &str?
[13:09:31] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[13:09:55] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[13:10:06] <doener> or were there other roadblocks left that you had to get rid of?
[13:10:07] *** Joins: sankha93 (Instantbir@2DF87934.7C1EA8E.8B6C1D65.IP)
[13:10:59] <dbaupp> not really sure
[13:11:29] <dbaupp> but having the string functions as methods possibly helps
[13:11:33] * dbaupp shrugs
[13:12:48] *** Joins: mindginative (mindginati@moz-D5A0DD8.dsl.dyn.ihug.co.nz)
[13:13:47] *** Quits: sankha93 (Instantbir@2DF87934.7C1EA8E.8B6C1D65.IP) (Ping timeout)
[13:14:10] *** Joins: sankha93 (Instantbir@2DF87934.7C1EA8E.8B6C1D65.IP)
[13:16:10] *** Quits: orshem (orshem@19491716.F0FDCE77.E3D28531.IP) (Ping timeout)
[13:17:47] *** Quits: nano (nano@moz-972880B.superkabel.de) (Connection reset by peer)
[13:17:56] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[13:18:56] *** Joins: nano (nano@moz-972880B.superkabel.de)
[13:19:45] <cr> follow-up question to Option<> and Some()-wrapping: how do i access struct fields that are inside an Option'd field
[13:19:54] *** Joins: orshem (orshem@19491716.F0FDCE77.E3D28531.IP)
[13:20:41] <cr> i run into "error: attempted access of field `left` on type `core::option::Option<@mut Symbol>`, but no field with that name was found"
[13:21:51] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[13:21:54] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[13:22:27] <EXetoC> left? anyway, did the example in option.rs not help? it shows how destructuring is done
[13:23:16] <cr> deconstructing lets me read them, but how would i write?
[13:24:11] <cr> EXetoC: but you are right: in this case deconstructing might work
[13:27:18] *** Joins: ilyoan (ilyoan@B4104EBB.3CC170B1.1E14B209.IP)
[13:27:40] <cr> it looks like the good old self.left.left.leftâ€¦ will have to get spoiled with deconstruction :/
[13:29:22] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[13:29:23] <EXetoC> several functions unwrap for you, but causes a failure if it doesn't contain the variant that you expect
[13:31:45] *** Joins: cstrahan (cstrahan@moz-4C7E5789.hsd1.dc.comcast.net)
[13:32:28] <EXetoC> I don't know write to a destructured value. maybe using ref. keep in mind that a lot has changed since 0.6
[13:33:50] *** Joins: webber46 (webber46@moz-AC14FDEA.se)
[13:36:36] <cr> would you say that starting with 0.6 is bad idea? :)
[13:36:53] <EXetoC> I guess
[13:37:00] *** Joins: jed (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[13:37:06] <EXetoC> doing some grepping now. "libextra/bitv.rs:        Big(ref mut b)   => b.set(i, x),". I'm not sure if this works in 0.6 as well
[13:38:38] *** Quits: Blei (Philipp@moz-96D25F7A.cust.bluewin.ch) (Quit: Blei)
[13:39:04] <cr> i am not able to comprehend that
[13:39:32] *** Joins: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net)
[13:39:34] <cr> very new to rust.
[13:40:02] *** Quits: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[13:40:11] <bstrie> cr: so you have an option that contains a field but is itself contained in a field, and you want to assign to the inner field?
[13:40:25] <cr> yes
[13:40:41] *** Quits: MX80 (MX80@moz-32BE33CD.dsl.g3telecom.net) (Connection reset by peer)
[13:40:58] <bstrie> how about `foo.outer_field = Some(whatever_you_want_the_inner_field_to_be)`
[13:41:07] <cr> the good old self.left.left.left, where .left is an Option field
[13:41:50] *** Quits: joelteon (joel@moz-317E8D0C.io) (Ping timeout)
[13:41:59] <bstrie> if you want to go deeper, try `foo.outer_field.get().inner_field.get().innermore_field = whatever`
[13:42:07] *** Quits: Palmik (palmik@moz-5CA3F354.pks.muni.cz) (Ping timeout)
[13:42:20] <bstrie> .get() will get you the value contained inside an option, and fail if it finds a None
[13:42:34] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[13:42:35] <cr> bstrie: that works, but becomes ugly by deconstruction if you want to access in depth like (hypothetically) foo.outer_field.outer_field
[13:43:13] *** Joins: joelteon (joel@moz-317E8D0C.io)
[13:43:24] <cr> oh. ok! will read more on Option
[13:43:42] <bstrie> yeah, this doesn't involve deconstructing at all
[13:43:54] *** Joins: josh (josh@ADD3CD3F.D6F172E7.2A2F4638.IP)
[13:44:20] <cr> but doesn't have the nice error-handling capabilities that come with deconstruction
[13:44:25] <EXetoC> not explicitly anyway
[13:45:47] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[13:46:08] <bstrie> cr: you can also use .expect("foo") rather than .get(), to print a more specific error on failure, or you can use .get_or_default(foo) to give a default value when it finds None
[13:47:17] <EXetoC> you make me want to use Rust again, so I'm just going to ignore this channel for a while
[13:47:38] <cr> run! :)
[13:48:03] <cr> bstrie: catching up on the Option doc now.
[13:48:51] <cr> the bad part is that i only need this on init for the self-reference
[13:49:28] <cr> there should be way to initialise self-referencing structs without Option :/
[13:50:32] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[13:50:58] *** Joins: Blei (philipp@moz-96D25F7A.cust.bluewin.ch)
[13:51:18] <EXetoC> wasn't something like that discussed before?
[13:51:40] <cr> i bet
[13:52:15] *** Joins: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP)
[13:52:29] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[13:52:32] *** Quits: pyrac (pyrac@moz-B2CB8564.w92-156.abo.wanadoo.fr) (Quit: pyrac)
[13:53:58] <cr> a more generalised problem would be to initialise two structs that reference each other without resorting to Option
[13:56:36] *** Quits: sp3d (a@moz-49806493.dhcp.stls.mo.charter.com) (Ping timeout)
[13:58:18] <dbaupp> cr: I just filed an issue with exactly that example (before seeing you write it here... great minds think alike :D ): https://github.com/mozilla/rust/issues/7082
[13:58:49] <cr> neat :)
[13:58:52] <dbaupp> cr: mind if use yours as another example?
[13:59:03] <cr> not at all.
[14:01:13] *** Quits: josh (josh@ADD3CD3F.D6F172E7.2A2F4638.IP) (Quit: josh)
[14:01:26] <cr> although my problem evolved a bit from the mutability
[14:01:37] *** Joins: mk270 (mk@moz-170FA469.qwghlm.org)
[14:02:06] <pnkfelix> nmatsakis: looks to me like the tupling increases time of `rustc rustc` by 0.4 seconds on average, from 66.7 to 67.1.  From the variation in the samples, I'd say that's in the noise, but then again pcwalton put something in recently with the note "improves rustc build time by 1 sec"
[14:03:31] <cr> dbaupp: it's now about the Option "workaround", and all the Some()-ing and deconstruction that comes with it
[14:04:04] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Textual IRC Client: www.textualapp.com)
[14:04:08] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[14:04:31] *** Quits: sankha93 (Instantbir@2DF87934.7C1EA8E.8B6C1D65.IP) (Ping timeout)
[14:04:32] <EXetoC> I'm not sure it's a particularly big issue
[14:04:54] *** Quits: csmedberg (bsmedberg@moz-748CAEF1.jst.pa.atlanticbb.net) (Connection reset by peer)
[14:07:11] <EXetoC> wouldn't you do basically the same thing with a raw pointer in Rust or some other language?
[14:07:25] <cr> it's not a big issue unless you must work with nested data structures based on pointer references
[14:07:57] <cr> afaiu it's discouraged anyway. that's where bad things happen.
[14:08:10] <dbaupp> EXetoC: yeah, but unsafe pointers are unsafe.. so it'd be nice to be able to do it without them
[14:08:12] <cmr> cr: It's just plain not clean to express safely at all, in any language
[14:08:24] <cr> yop
[14:08:33] *** Joins: sankha93 (Instantbir@224C00B9.7C1EA8E.8B6C1D65.IP)
[14:08:39] *** cscottnet_away is now known as cscottnet
[14:11:56] <cr> i like the way rust makes you rethink your algorithms. in that respect i am confident that the fact that rust's architecture exposes such issues is a sign that it is on to something important there.
[14:12:03] <EXetoC> dbaupp: I don't see why this should be an exception. you need some kind of null value since you can't instantiate recursively forever
[14:14:11] *** Joins: Guest (textual@34641662.FB4DE631.66C78B76.IP)
[14:14:18] <dbaupp> EXetoC: possibly, but I could imagine a function that at least wraps up most of the the pointer manipulations so that it's only unsafe if someone uses it wrong
[14:14:50] <dbaupp> EXetoC: (rather than being unsafe if they write the manipulations incorrectly, which would be much easier to do, since they are probably nontrivial)
[14:18:06] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[14:18:44] <EXetoC> I'm not sure what you're getting at now, but you'd use Option in any other case where you might have either a valid instance or "null"
[14:19:01] <EXetoC> so I don't see how the actual recursion changes much at all, but maybe I need a more elaborate example
[14:19:33] *** Joins: mib_ftzq4c (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[14:19:49] <dbaupp> what I'm getting at is trying to avoid @mut when the mutability is only required in a local scope at construction time
[14:20:26] <dbaupp> i.e. after construction, the structure is frozen and plain @ would be perfect
[14:21:37] <nmatsakis> pnkfelix: sounds...minimal.
[14:22:42] *** Quits: orshem (orshem@19491716.F0FDCE77.E3D28531.IP) (Ping timeout)
[14:26:08] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[14:27:52] *** Joins: orshem (orshem@19491716.F0FDCE77.E3D28531.IP)
[14:28:47] <EXetoC> dbaupp: are your issues really similar though? maybe I should've replied to cr instead
[14:29:18] <EXetoC> cr: the idiomatic way of expression "null" is by using Option. that's all I wanted to say really, but ignore what I said if it isn't at all relevant
[14:29:53] <Thiez> dbaupp: I suppose you could cheat by using memset or something along those lines
[14:30:50] <cr> EXetoC: it started out as the same issue of requiring mut only on init, but now my problem evolved being stuck to Option although I don't need None except on init
[14:31:45] <cr> which is okay for now, as i can work with it
[14:31:51] <dbaupp> Thiez: yeah, I actually was thinking that you could do `unsafe { let foo = @intrinsics::uninit(); let mut_foo = make_foo_unsafely_mutable(); <create object within mut_foo *without* reading from (mut_)foo>; foo }`
[14:31:53] <cr> just ugly
[14:32:45] <dbaupp> Thiez: so in that, you reserve your memory, so you have the correct pointer to create a cycle... the "only" unsafeness is if you try to read from foo before you've finished building it
[14:32:46] *** Joins: thou (thou@moz-1C1CA9F7.fasttrackcomm.net)
[14:34:20] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[14:34:29] *** Joins: Jesin (Jessin_@moz-48B48C95.eecs.lehigh.edu)
[14:36:01] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[14:36:03] *** Quits: nano (nano@moz-972880B.superkabel.de) (Connection reset by peer)
[14:36:19] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[14:36:52] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[14:36:59] *** Joins: nano (nano@moz-972880B.superkabel.de)
[14:37:53] *** Joins: pyrac (pyrac@moz-B2CB8564.w92-156.abo.wanadoo.fr)
[14:43:56] *** Quits: sankha93 (Instantbir@224C00B9.7C1EA8E.8B6C1D65.IP) (Ping timeout)
[14:46:39] *** Joins: sp3d (a@moz-49806493.dhcp.stls.mo.charter.com)
[14:48:45] *** Joins: sankha93 (Instantbir@4FC71717.549EE3E8.8B6C1D65.IP)
[14:49:27] *** Quits: webber46 (webber46@moz-AC14FDEA.se) (Quit: webber46)
[14:52:01] *** Joins: graydon (graydon@moz-9918B407.vc.shawcable.net)
[14:52:01] *** ChanServ sets mode: +qo graydon graydon
[14:52:38] <Thiez> gah, this is so horrible, but it works
[14:52:40] <Thiez> use std::unstable::intrinsics::*; use std::ptr::*; struct Foo { name: ~str, other: Option<@Foo> } fn circle(s:~str) -> @Foo { unsafe {let f = @Foo{ name:s, other:None};let x = Some(f); copy_memory::<Option<@Foo>>(transmute(&f.other), &x, 1); forget(x) ;f }} let f = circle(~"Hi"); println(f.name); println(f.other.get().name) ; println(f.other.get().other.get().name)
[14:52:49] <Thiez> rusti: use std::unstable::intrinsics::*; use std::ptr::*; struct Foo { name: ~str, other: Option<@Foo> } fn circle(s:~str) -> @Foo { unsafe {let f = @Foo{ name:s, other:None};let x = Some(f); copy_memory::<Option<@Foo>>(transmute(&f.other), &x, 1); forget(x) ;f }} let f = circle(~"Hi"); println(f.name); println(f.other.get().name) ; println(f.other.get().other.get().name)
[14:52:51] -rusti- Hi
[14:52:51] -rusti- Hi
[14:52:51] -rusti- Hi
[14:52:51] -rusti- ()
[14:53:51] <Thiez> I don't think most people would want to do that in practice though
[14:53:59] <dbaupp> Thiez: that's pretty cool!
[14:54:05] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[14:54:11] <Thiez> dbaupp: no really, I feel ashamed that I got it to work ;)
[14:54:22] <dbaupp> Thiez: I imagine that wrapping it in a function (an unsafe one) would make it *much* nicer
[14:54:29] <dbaupp> (for users, at least)
[14:58:08] <mk270> gday - where do i download/ build "cargo" from? 
[14:58:23] <Thiez> cargo is no longer used
[14:58:30] <mk270> aha
[14:58:49] <mk270> is there an alternative?
[14:58:52] <Thiez> you'll want to get rustpkg instead
[14:59:29] <Thiez> I'm not sure if it's included with the 0.6 release, but if you're building from incoming it should already be included
[14:59:41] <Thiez> I am not sure how usable it is
[15:00:09] <mk270> looks like i have rustpkg
[15:02:37] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[15:02:50] <Thiez> dbaupp: the code above is wrong, should have omitted the 'forget'
[15:02:54] *** Joins: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com)
[15:03:03] <doener> fn circle(s:~str) -> @Foo { unsafe { let f = @Foo{ name:s, other: uninit() }; let mut x = Some(f); std::util::swap(&mut x, transmute(&f.other)); f } }
[15:03:57] <Thiez> or do whatever doener is doing :p
[15:04:37] *** Quits: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[15:04:50] *** Joins: BitPuffin (quassel@7C6672D2.7B6DBEFA.AFF0AF16.IP)
[15:05:08] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[15:06:47] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: Textual IRC Client: www.textualapp.com)
[15:09:15] <doener> using copy_memory generates slightly better code than swap though
[15:11:04] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[15:12:12] <Thiez> copy_nonoverlapping would be even cleaner
[15:12:49] <Thiez> rusti: use std::unstable::intrinsics::transmute; struct Foo { name: ~str, other: Option<@Foo> } fn circle(s:~str) -> @Foo { unsafe {let f = @Foo{ name:s, other:None};let x = Some(f); std::ptr::copy_nonoverlapping_memory::<Option<@Foo>>(transmute(&f.other), &x, 1);f}} fn destroy<T>(_:T){} #[unsafe_destructor] impl Drop for Foo { fn finalize(&self) {println("destroyed")} }let f = ~circle(~"Hi"); println("before") ; destroy(f) ; println("after")
[15:12:50] -rusti- before
[15:12:50] -rusti- destroyed
[15:12:50] -rusti- after
[15:12:50] -rusti- ()
[15:13:02] <Thiez> without the forget it even drops correctly.
[15:13:52] <Thiez> too bad rustc still won't accept 'struct Foo{@Foo}' even though we can initialize it with evil magicks.
[15:14:08] <Thiez> eh, struct Foo{next: @Foo}
[15:14:13] <Thiez> or something along those lines
[15:14:15] <mk270> is there a recommended web framework for rust yet?
[15:14:45] <Thiez> mk270: no, but we hope to get one once the new IO stuff lands
[15:15:27] *** Quits: mindginative (mindginati@moz-D5A0DD8.dsl.dyn.ihug.co.nz) (Quit: zzZZZ)
[15:15:51] *** Quits: mk270 (mk@moz-170FA469.qwghlm.org) (Quit: leaving)
[15:16:03] <Thiez> s/lands/is ready/
[15:16:41] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[15:16:59] <dbaupp> Thiez: do you want to drop a comment with that on https://github.com/mozilla/rust/issues/7082 ? :)
[15:17:12] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[15:17:45] <pnkfelix> nmatsakis: mind tagging issue #7084 with an r+ ?
[15:18:11] *** Quits: sankha93 (Instantbir@4FC71717.549EE3E8.8B6C1D65.IP) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[15:18:46] <nmatsakis> pnkfelix: ok, but one clarification: I do not intend to use objects
[15:18:57] <Thiez> dbaupp: I'm not sure if "using unsafe code I can get this to work" would really add something to that discussion
[15:18:58] <nmatsakis> that is, I think issue 7081 isn't quite what I had in mind, I can sketch in the issue
[15:19:07] <pnkfelix> nmatsakis: ah, even when there is state to be carried?
[15:19:23] <pnkfelix> nmatsakis: that's fine
[15:19:27] <dbaupp> Thiez: sure it would
[15:19:36] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[15:19:44] <pnkfelix> nmatsakis: I believe I know what you mean: parameterize over <V : Visitor>, right?
[15:20:02] <dbaupp> Thiez: I'm pretty sure that unsafe code is the only way to get it to work at the moment
[15:21:17] <pnkfelix> nmatsakis: I can rewrite issue 7081; I think you and I talked about this before, and I just let some old muscle memory guide how I wrote this down.
[15:21:18] *** Quits: doener (bs@moz-AA189A5A.unitymedia.biz) (Quit: leaving)
[15:23:17] <nmatsakis> pnkfelix: https://github.com/mozilla/rust/issues/7081#issuecomment-19333028
[15:23:30] <pnkfelix> nmatsakis: yeah I tried to beat you but github didn't stop you from posting
[15:23:33] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[15:23:46] *** Joins: Palmik (palmik@moz-5CA3F354.pks.muni.cz)
[15:25:03] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[15:25:25] *** Quits: nano (nano@moz-972880B.superkabel.de) (Connection reset by peer)
[15:27:12] <dbaupp> I appear to have a rustc that successfully uses @str rather than @~str \o/
[15:27:26] <Thiez> nice
[15:28:10] *** Quits: orshem (orshem@19491716.F0FDCE77.E3D28531.IP) (Ping timeout)
[15:28:10] <Thiez> dbaupp: you were huonw on github, correct?
[15:28:10] *** Joins: jdm (jdm@F2D29657.F60B0462.67AC9B1.IP)
[15:28:18] <dbaupp> Thiez: yes
[15:28:23] <Thiez> ok :)
[15:32:21] *** Quits: sdh_ (sdh@327ABE25.365E45D9.41207AE9.IP) (Ping timeout)
[15:33:28] *** Joins: orshem (orshem@19491716.F0FDCE77.E3D28531.IP)
[15:33:40] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[15:34:39] *** Joins: sdh_ (sdh@327ABE25.365E45D9.41207AE9.IP)
[15:34:49] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[15:34:50] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[15:38:38] *** kimundi is now known as zz_kimundi
[15:38:58] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[15:39:35] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[15:40:10] *** Quits: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP) (Connection reset by peer)
[15:40:45] <Thiez> dbaupp: done.
[15:40:52] *** Quits: thou (thou@moz-1C1CA9F7.fasttrackcomm.net) (Input/output error)
[15:41:17] <dbaupp> Thiez: cool thanks :)
[15:41:34] *** Quits: graydon (graydon@moz-9918B407.vc.shawcable.net) (Quit: Leaving.)
[15:42:41] *** Quits: z0w0 (zack@FDF4EF6A.2CA5CD8.5F93A189.IP) (Client exited)
[15:45:46] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[15:46:29] *** zz_kimundi is now known as kimundi
[15:52:01] *** Joins: lmandel (lmandel@moz-248D37F9.cpe.net.cable.rogers.com)
[15:53:34] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[15:54:36] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[15:54:40] *** Joins: MaikKlein (maik@moz-7BA8C29B.dip0.t-ipconnect.de)
[15:55:49] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[15:58:19] *** Quits: terje (terje@moz-C0F75C5F.san.res.rr.com) (Ping timeout)
[15:58:53] *** Joins: bytbox (s@moz-2E27684C.student.umd.edu)
[16:01:49] *** Joins: terje (terje@moz-C0F75C5F.san.res.rr.com)
[16:01:54] *** Quits: MaikKlein (maik@moz-7BA8C29B.dip0.t-ipconnect.de) (Ping timeout)
[16:03:15] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[16:03:22] *** Quits: toddaaro (toddaaro@moz-98F46974.us) (Ping timeout)
[16:04:50] *** Joins: doener (doener@moz-121949B3.unitymediagroup.de)
[16:05:04] *** Joins: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP)
[16:05:04] *** ChanServ sets mode: +o pcwalton
[16:06:08] *** Amanieu_ is now known as Amanieu
[16:07:04] *** Joins: toddaaro (toddaaro@moz-98F46974.us)
[16:07:28] *** Joins: \n (NDesaulnie@2557E599.66715431.D25A875A.IP)
[16:08:37] *** Quits: rocode (rocode@moz-64C1010D.rocode.net) (Ping timeout)
[16:08:56] *** Joins: rocode (rocode@moz-64C1010D.rocode.net)
[16:09:26] *** Quits: toddaaro (toddaaro@moz-98F46974.us) (Ping timeout)
[16:10:24] <cyndis> bjz: great! just got it compiled with minor changes (& on atan2 parameters). though now i'll have to update all the ancient code in rsmc :)
[16:12:01] *** Joins: toddaaro (toddaaro@moz-98F46974.us)
[16:12:49] *** jdm is now known as jdm|away
[16:13:09] *** Quits: Jesin (Jessin_@moz-48B48C95.eecs.lehigh.edu) (Ping timeout)
[16:16:19] *** Joins: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP)
[16:16:20] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/Aqayug
[16:16:20] *** Parts: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP) ()
[16:16:21] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[16:16:21] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/DzhM2w
[16:16:21] <ghrust> 13rust/06auto 14ecef9ad 15Felix S. Klock II: Visitor refactoring: Step 1, couple (Env, vt<Env>) together in a tuple.
[16:16:21] <ghrust> 13rust/06auto 14700b1aa 15bors: auto merge of #7084 : pnkfelix/rust/fsk-visitor-refactoring, r=pnkfelix...
[16:16:21] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[16:22:35] *** Joins: ecr (ereed@2557E599.66715431.D25A875A.IP)
[16:23:10] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:23:23] <pnkfelix> How do I get an pull request off the bors queue?  Should I just close the pull request and tell the author to re-open after they fix the problem?
[16:24:00] <pnkfelix> (The specific case is #7070, but its a more general bors workflow question.)
[16:25:32] <EXetoC> immutable borrowed pointers can often be turned into value parameters, unlike in C++ for example where there are barely any guarantees at all, am I right?
[16:25:49] <EXetoC> which would be pretty convenient
[16:26:22] *** Joins: eholk (eholk@moz-35385025.uconnect.utah.edu)
[16:26:31] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[16:27:31] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[16:29:59] *** Quits: eholk (eholk@moz-35385025.uconnect.utah.edu) (Quit: eholk)
[16:30:30] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Ping timeout)
[16:34:38] *** kimundi is now known as zz_kimundi
[16:34:41] <pnkfelix> nmatsakis: ping
[16:35:29] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[16:35:30] *** Quits: Ralith (ralith@moz-50F3C77.vc.shawcable.net) (Ping timeout)
[16:35:51] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[16:36:32] *** Quits: mib_ftzq4c (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:38:18] *** cade is now known as cade_foodz
[16:38:55] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[16:39:29] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[16:41:27] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[16:42:39] *** Joins: lmandel_ (lmandel@moz-248D37F9.cpe.net.cable.rogers.com)
[16:43:01] *** Quits: lmandel_ (lmandel@moz-248D37F9.cpe.net.cable.rogers.com) (Quit: lmandel_)
[16:43:32] *** Quits: lmandel (lmandel@moz-248D37F9.cpe.net.cable.rogers.com) (Ping timeout)
[16:44:31] * pcwalton is going through all the backwards compatibility issues and closing or renominating a bunch
[16:45:20] *** Joins: MaikKlein (maik@moz-7BA8C29B.dip0.t-ipconnect.de)
[16:45:30] <\n> was vec::{alli, all, any} all removed?
[16:46:38] *** Joins: vosen (vosen@moz-266BA656.icpnet.pl)
[16:47:02] *** Quits: pyrac (pyrac@moz-B2CB8564.w92-156.abo.wanadoo.fr) (Quit: pyrac)
[16:47:05] <pnkfelix> pcwalton: do you think we need a way to mark issues explicitly as "Just a bug; discouraged from future I-nominated" ?
[16:47:07] <dbaupp> \n: yes
[16:47:24] <pcwalton> pnkfelix: I just comment "I don't think this is backwards incompatible"
[16:47:28] <\n> dbaupp: moved or removed?
[16:47:33] <dbaupp> \n: vec::all(v, f) => v.iter().all(f)
[16:47:43] <pnkfelix> pcwalton: (I guess the comment trail on the issue should serve as well as any other marking.)
[16:47:46] <\n> cool thanks!
[16:48:02] *** Quits: jed (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:48:07] <dbaupp> \n: also, alli => iter().enumerate().all(|(i, v)| f(i, v))
[16:48:11] <pnkfelix> pcwalton: But "I don't think this is backwards incompatible" can mean that it belongs on a different milestone, or it can mean it doesn't belong on any milestone, right?
[16:48:26] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[16:48:29] <pcwalton> right
[16:48:49] <\n> dbaupp: thank you, do you know where they are defined?
[16:49:11] <dbaupp> \n: which? the new .all and .any? they're in std::iterator
[16:49:17] <\n> cool
[16:49:28] <dbaupp> (methods on IteratorUtil, which possibly has to be imported)
[16:49:35] <pnkfelix> pcwalton: anyway, its thankless work.  Until now: "Thank you."  :)
[16:51:04] *** Joins: mschifer (Adium@2557E599.66715431.D25A875A.IP)
[16:51:36] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[16:51:39] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[16:52:16] <erickt> dbaupp: nice str cleanup :)
[16:52:27] <dbaupp> erickt: thanks :)
[16:52:28] *** Quits: sk (sk@44FB31D1.A56C954C.78DD174B.IP) (Quit: Leaving)
[16:52:39] <dbaupp> erickt: yours looks pretty good too
[16:53:51] <erickt> it's got a ways to go :) my only comment is I do find the _consume functions ugly. What do you think about keeping as_bytes for getting references,and to_bytes when moving from one type to another?
[16:54:26] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[16:54:55] <erickt> that's the pattern I was using in my patch
[16:55:08] <dbaupp> hm, I'm not sure I understand, are you talking about 'as_bytes_with_null_consume'?
[16:55:17] <erickt> yeah
[16:55:18] *** Joins: Ralith (ralith@moz-3767A14F.wireless.sfu.ca)
[16:55:21] <dbaupp> yeah, that could definitely have a better name, feel free to rename it
[16:55:57] <dbaupp> it's called 'as' because it doesn't allocate, it just transmutes self, but that's not a great reason
[16:56:01] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[16:56:21] *** Quits: MaikKlein (maik@moz-7BA8C29B.dip0.t-ipconnect.de) (Ping timeout)
[16:56:24] <erickt> great :)
[16:56:47] *** Joins: lmandel (lmandel@556E85CD.E855F8D7.412CF160.IP)
[16:57:27] *** Joins: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP)
[16:57:27] *** Quits: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP) (Z:lined (Open Proxy found on your host. Please visit www.blitzed.org/proxy?ip=115.68.131.49 for more information.))
[16:57:43] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Quit: Computer has gone to sleep.)
[16:58:43] <erickt> we need a third adverb (Is that the right one?). We got `as` to get references, `to` for moves, now we need one for copies 
[16:59:33] *** Joins: carllerche (carllerche@moz-BF6CB667.hsd1.ca.comcast.net)
[16:59:34] <erickt> or maybe it's a preposition? I'm terrible at grammar
[16:59:49] <sp3d> preposition
[17:00:41] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:01:28] <doener> anyone already working on removing the addrspaces?
[17:02:16] <dbaupp> well, it seems reasonable avoid methods/fns that contain a copy when there are other ways to do it (e.g. .as_bytes().to_owned()), not sure what others think...
[17:02:21] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[17:02:41] <dbaupp> (I guess .to_owned()/.to_managed() are examples of needing a new preposition?)
[17:02:51] <sp3d> maybe "as/into/to" for "convert/move/copy"?
[17:04:27] <erickt> sp3d: that could work
[17:07:34] <erickt> the use case I was thinking of is how do we go from a HashMap<K,V> into a ~[(K, V)]. You really can only either copy or move the individual items, you can't really make a sensible no-copy &[(K, V)]
[17:08:06] <erickt> so we can't really say we only support convert and move.
[17:08:28] <erickt> Maybe this needs an rfc
[17:08:30] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[17:08:53] <nmatsakis> pnkfelix: pong.
[17:09:17] <pnkfelix> nmatsakis: I'm trying to understand your note on Issue 5723
[17:09:21] <bblum> erickt: you could make a ~[(&K, &V)] though
[17:09:23] <dbaupp> erickt: yup, agree with that use case
[17:09:40] *** Joins: eholk (eholk@moz-35385025.uconnect.utah.edu)
[17:09:42] <pnkfelix> nmatsakis: I can see how the second signature you list is passing along the lifetime 'a
[17:09:44] <dbaupp> erickt: actually... I don't. we should be using iterators for that
[17:09:52] <erickt> bblum: yeah I thought about that too :) I wasn't sure about that case.
[17:10:01] *** Quits: BitPuffin (quassel@7C6672D2.7B6DBEFA.AFF0AF16.IP) (Ping timeout)
[17:10:04] <bblum> erickt: seems possible; just tie the lifetimes all together
[17:10:06] <erickt> dbaupp: agreed
[17:10:17] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[17:10:27] <pnkfelix> nmatsakis: but in the first "fixed" signature, is the connection between "s: &str" and the "&Reader" passed to the `f` inferred ?
[17:11:04] <erickt> dbaupp: Did the iterator rewrite add a consuming iterator?
[17:11:14] *** Quits: dumitru (dgherman@311ED075.DD6131A9.A746F37F.IP) (Quit: leaving)
[17:11:20] *** Joins: reyre_ (reyre@86C3727C.33EE9F8A.1139E686.IP)
[17:11:23] <dbaupp> erickt: for vec? I don't think so
[17:11:51] <dbaupp> erickt: the consuming internal one should still be there, hopefully.
[17:12:19] <nmatsakis> pnkfelix: there is no connection.
[17:12:23] *** Joins: camilo (camilo@CE8E3C93.AE3B94DD.4206AA37.IP)
[17:12:45] <nmatsakis> pnkfelix: it's just that the f() callback takes a reader with *any* lifetime
[17:12:46] <pnkfelix> nmatsakis: okay then I simply do not understand what the bug is saying.
[17:12:56] <erickt> dbaupp: Hm, so `as` for cheap conversions, `to` for moves, and external iterators for cheap copies?
[17:13:08] <pnkfelix> nmatsakis: so is the bug a complaint that the signature is prematurely committing to a @Reader ?
[17:13:16] <pnkfelix> nmatsakis: when it should be more general ?
[17:13:27] <nmatsakis> pnkfelix: no, the bug is that this type: @Reader does not contain any lifetimes.
[17:13:29] *** Joins: dumitru (dgherman@311ED075.DD6131A9.A746F37F.IP)
[17:13:42] <nmatsakis> pnkfelix: therefore, it should not be possible for it to reference an &str
[17:13:52] *** zz_kimundi is now known as kimundi
[17:14:07] *** Quits: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net) (Input/output error)
[17:14:17] <dbaupp> erickt: that sounds good, although I'm not sure that external iterators will work for every one of the latter (can't think of an instance where they don't work, though)
[17:14:25] <pnkfelix> nmatsakis: okay, so the issue is that the underlying code is unsafely allowing a reference to the str to leak via the reader ?
[17:14:53] *** Joins: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net)
[17:15:28] <pnkfelix> nmatsakis: (and an owned str could be deallocated while the reader still holds a reference to it?)
[17:15:37] *** Quits: camilo (camilo@CE8E3C93.AE3B94DD.4206AA37.IP) (Quit: brb)
[17:15:57] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[17:16:05] <nmatsakis> pnkfelix: right, the compiler will be unable to guarantee that the @Reader does not outlive the &str
[17:16:10] <bstrie> pcwalton: you need to double the amount of rust in servo so that github properly classifies it as a rust project rather than a python project
[17:16:30] <pnkfelix> nmatsakis: I'm assuming that the reason no one sees this in the current code is that no one actually stashes a reference to the @Reader to a location that outlives the dynamic extent of the with_str_reader invocation
[17:16:35] <pcwalton> I think that will eventually happen
[17:16:42] <pnkfelix> nmatsakis: (as in, why no one sees a crash due to this problem.)
[17:17:39] <pnkfelix> nmatsakis: okay.  I think I now understand why you don't need the lifetime annotation with the first fixed signature.  thanks.
[17:17:42] <nmatsakis> pnkfelix: right
[17:18:27] *** Joins: pyrac (pyrac@moz-B2CB8564.w92-156.abo.wanadoo.fr)
[17:18:30] <erickt> dbaupp: hrm, `to_str` wouldn't fit this pattern. We could do `into_str`. Or we could use `into` for the move prefix
[17:19:03] *** Joins: Jesin (Jessin_@moz-48B48C95.eecs.lehigh.edu)
[17:21:00] <dbaupp> erickt: it'd be nice for the move prefix to be the short one, but changing .to_str seems worse
[17:21:52] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[17:21:59] *** Quits: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk) (Client exited)
[17:23:08] *** Quits: sdh_ (sdh@327ABE25.365E45D9.41207AE9.IP) (Ping timeout)
[17:23:18] <erickt> dbaupp: Yeah. Now that I think about it, the copy/alloc conversion might be more common than the move conversions
[17:23:43] *** Joins: mib_ftzq4c (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[17:24:08] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[17:24:32] *** Quits: Ralith (ralith@moz-3767A14F.wireless.sfu.ca) (Ping timeout)
[17:25:37] <cr> do we have some doc on how to implement your own iterators on custom data types?
[17:27:01] <dbaupp> cr: the external iterators? I don't think so, currently the best resource is the code
[17:27:10] <flu_> Can I get a bors pass on https://github.com/mozilla/rust/pull/7073 again? Had the unrelated stack test failure problem again
[17:27:12] *** Joins: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP)
[17:27:32] <flu_> this one: "Assertion failed: (PrettyStackTraceHead.get() == this && "Pretty stack trace entry destruction is out of order")"
[17:27:34] <dbaupp> cr: I believe strcat is planning a tutorial... hopefully before 0.7
[17:27:40] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[17:28:25] <cr> ah, well
[17:28:31] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:29:02] *** Joins: blitter (blitter@moz-FB45689C.dyn.centurytel.net)
[17:29:06] <dbaupp> who would be the most appropriate person to ping for a review of https://github.com/mozilla/rust/pull/7086 ?
[17:29:11] <Blei> so, about cmake and msvc: is it still correct that a cmake build system for rust is not desired? if so, what are the plans for getting it to work on non-mingw, non-cygwin windows?
[17:29:13] <cmr> cr: you just need to implement std::iterator::Iterator on your struct.
[17:29:58] <cmr> cr: http://static.rust-lang.org/doc/core/iterator.html#trait-iterator
[17:30:12] *** Quits: Jesin (Jessin_@moz-48B48C95.eecs.lehigh.edu) (Quit: Leaving)
[17:30:14] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[17:30:27] *** Joins: Jesin (Jessin_@moz-48B48C95.eecs.lehigh.edu)
[17:30:58] <dbaupp> http://static.rust-lang.org/doc/std/iterator.html#trait-iterator is slightly more up-to-date
[17:31:36] <cmr> ugh, didn't even notice I was looking at the old core and not std
[17:32:06] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[17:32:07] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[17:34:57] *** Joins: nano (nano@moz-972880B.superkabel.de)
[17:34:59] *** Joins: jed (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[17:35:18] *** Quits: orshem (orshem@19491716.F0FDCE77.E3D28531.IP) (Ping timeout)
[17:35:52] *** Joins: MaikKlein (maik@moz-7BA8C29B.dip0.t-ipconnect.de)
[17:36:43] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[17:36:43] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/0kNS9g
[17:36:43] <ghrust> 13rust/06auto 14d641b0b 15SiegeLord: Alter rust.css to make the documentation look more appealing
[17:36:44] <ghrust> 13rust/06auto 14bd25dc3 15bors: auto merge of #7077 : SiegeLord/rust/new_css, r=pnkfelix...
[17:36:44] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[17:36:56] <pcwalton> oooh
[17:37:48] <cmr> SiegeLord: awesome, thanks for getting that through :)
[17:38:13] <sp3d> how quickly does that drip down to the website?
[17:39:17] <cmr> next snapshot, should be (at least, that's usually when incoming gets merged into master I thought)
[17:39:25] <cmr> god knows when that will be :)
[17:39:54] *** Joins: tjc_ (tjc@moz-E289BB50.pathcom.ca)
[17:40:24] <doener> dbaupp: was there a change that allows for those Equiv impls for the "plain" str types? IIRC I tried that when I made the StrInterner and it complained about overlapping impls, thus I used the StringRef newtype
[17:40:41] <dbaupp> doener: it requires some trickery
[17:41:04] <dbaupp> doener: specifically, a second trait (which in this case i'd added as part of the strings changes)
[17:41:52] <dbaupp> doener: `Str` which provides .as_slice(), and that's all that's needed for Equiv
[17:42:19] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[17:42:20] *** Quits: novabyte (Instantbir@moz-9B83A1F0.mullvad.net) (Quit: bye bye)
[17:44:37] *** Quits: eevee (eevee@moz-A643AA65.evrt.wa.frontiernet.net) (Ping timeout)
[17:45:07] *** Joins: Ralith (ralith@moz-50F3C77.vc.shawcable.net)
[17:47:18] *** jdm|away is now known as jdm
[17:47:20] *** Quits: tjc_ (tjc@moz-E289BB50.pathcom.ca) (Ping timeout)
[17:47:45] <steven_is_false> So I'm going to go ahead with making https://github.com/mozilla/rust/pull/7027 only *nix platforms for now, and then somebody can extend it to Windows later. Is there any reason not to do so?
[17:48:32] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[17:48:58] *** Joins: eevee (eevee@moz-A643AA65.evrt.wa.frontiernet.net)
[17:49:23] *** Quits: MaikKlein (maik@moz-7BA8C29B.dip0.t-ipconnect.de) (Ping timeout)
[17:49:27] *** Joins: orshem (orshem@19491716.F0FDCE77.E3D28531.IP)
[17:50:33] <cmr> steven_is_false: sounds good to me :)
[17:50:38] <steven_is_false> cmr: Okay.
[17:50:51] <cmr> steven_is_false: really need a bona fide windows dev in here somewhere...
[17:51:12] <steven_is_false> cmr: I was hoping I could use WINE to develop somewhat eventually.
[17:51:35] *** Joins: tjc (tjc@moz-E289BB50.pathcom.ca)
[17:52:01] *** Quits: pyrac (pyrac@moz-B2CB8564.w92-156.abo.wanadoo.fr) (Quit: pyrac)
[17:54:08] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[17:55:22] *** Quits: tjc (tjc@moz-E289BB50.pathcom.ca) (Ping timeout)
[17:55:52] <erickt> pcwalton / dbaupp: speaking of the Equiv trait, do we really need it? We could extend nmatsakis's double dispatch from http://smallcultfollowing.com/babysteps/blog/2012/10/04/refining-traits-slash-impls/ to the Eq trait
[17:55:53] *** Joins: tjc (tjc@moz-E289BB50.pathcom.ca)
[17:55:53] *** ChanServ sets mode: +o tjc
[17:56:06] <steven_is_false> Unfortunately, one can't disable the target_os = "linux" flag. see issue https://github.com/mozilla/rust/issues/7025
[17:57:17] <dbaupp> erickt: I have a feeling that doing that would make type inference with == very poor. not sure though.
[17:57:43] <steven_is_false> Is it possible to build Rust in a Windows configuration on a Linux box using WINE?
[17:57:52] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[17:58:46] <pcwalton> erickt: possibly, I'd be worried about inference though as dbaupp mentioned
[18:00:05] <Jeaye> steven_is_false: Had a chance to try the out of source build?
[18:00:29] *** Quits: tjc (tjc@moz-E289BB50.pathcom.ca) (Ping timeout)
[18:00:44] <dbaupp> doener: erickt's link ^ explains the trait-to-avoid-overlapping-impls trick, btw
[18:00:46] <nmatsakis> pnkfelix: pong
[18:00:47] <steven_is_false> Jeaye: Yes.
[18:00:51] <nmatsakis> pnkfelix: oh, never mind
[18:01:20] *** Joins: tjc (tjc@moz-E289BB50.pathcom.ca)
[18:01:20] *** ChanServ sets mode: +o tjc
[18:01:31] <mleise> steven_is_false: A virtual machine image might sound overkill, but you get a good experience with it.
[18:02:03] *** Quits: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Quit: Leaving.)
[18:02:03] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Ping timeout)
[18:02:14] <steven_is_false> mleise: Even better, you can set it up to ssh into it, and mount it as a filesystem with sshfs.
[18:02:19] <mleise> For example in VirtualBox I can link in directories from the host system as network paths.
[18:03:49] *** Quits: pnkfelix|rcirc (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Ping timeout)
[18:04:18] <steven_is_false> mleise: One thing I want to try is running Rust with the Windows configuration under Valgrind
[18:04:46] *** Joins: rajul (quassel@A2DDF553.812B5995.2051BA92.IP)
[18:04:55] <mleise> you want to run valgrind on windows or wine in valgrind?
[18:05:20] <steven_is_false> mleise: Rust-Windows conf under Wine with Valgrind
[18:05:24] <steven_is_false> On Linux
[18:05:45] <mleise> wouldn't that just measure mostly wine?
[18:06:29] <steven_is_false> mleise: I don't follow.
[18:06:57] *** cade_foodz is now known as cade
[18:07:22] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[18:07:24] <mleise> would you run something like? valgrind wine rustc
[18:08:00] <steven_is_false> mleise: It'd be a little bit more complicated but basically.
[18:08:07] *** Joins: devinus (devinus@moz-3C0F65B9.sw.biz.rr.com)
[18:08:10] *** Joins: tehepicpineapple (Mibbit@moz-97DEEC1.clt.bellsouth.net)
[18:08:42] <tehepicpineapple> Is there anyone that would be willing to help me with an installing problem?
[18:10:28] *** Quits: tehepicpineapple (Mibbit@moz-97DEEC1.clt.bellsouth.net) (Quit: http://www.mibbit.com ajax IRC Client)
[18:10:37] *** Quits: dbaupp (Thunderbir@moz-73E90475.lns20.syd6.internode.on.net) (Ping timeout)
[18:13:23] *** Joins: deepdog (deepdog@moz-490E834C.client.mchsi.com)
[18:14:53] *** Parts: steven_is_false (user@moz-144077DE.bchsia.telus.net) (ERC Version 5.3 (IRC client for Emacs))
[18:16:10] <cr> how would i check that two @mut variables point to the same box on the heap?
[18:17:04] <pcwalton> cr: box::ptr_eq
[18:17:07] <pcwalton> managed::ptr_eq
[18:17:09] <pcwalton> rather
[18:17:14] <pcwalton> box::ptr_eq in rust 0.3 or something
[18:17:21] <cr> 0.6 here
[18:17:28] <cr> thanks! will check that out
[18:17:37] *** Joins: graydon (graydon@moz-9918B407.vc.shawcable.net)
[18:17:37] *** ChanServ sets mode: +qo graydon graydon
[18:17:51] <mleise> why do I see so many :p smilies?
[18:17:57] <erickt> pcwalton: I posted an rfc to merge Eq and Equiv with a working example here: https://github.com/mozilla/rust/issues/7088
[18:18:13] <erickt> I'm on an overloading kick this week
[18:20:02] <tjc> graydon: ping
[18:20:08] <graydon> pong
[18:20:18] <tjc> graydon: I have a really boring question for you
[18:20:28] <tjc> when a package doesn't have an explicit version (like when it's not in a git repo)...
[18:20:57] <tjc> should rustpkg fill in a version? or name the installed library file without a version in it? (if it's a library)?
[18:21:57] <graydon> i thought we were going with "0.1" in that case
[18:22:13] <graydon> semver-compatible: 0.x means unstable
[18:22:27] <graydon> "initial revisions"
[18:23:03] <graydon> also we dicussed inferring from dir name and/or in-the-crate version attribute
[18:23:20] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[18:23:20] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14bd25dc3 to 14135ba94: 02http://git.io/N3iJvQ
[18:23:20] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[18:23:20] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[18:23:20] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/CIHw6A
[18:23:20] <ghrust> 13rust/06auto 14ecef9ad 15Felix S. Klock II: Visitor refactoring: Step 1, couple (Env, vt<Env>) together in a tuple.
[18:23:20] <ghrust> 13rust/06auto 1491bced8 15Felix S. Klock II: Fix linebreak and whitespace issues to placate make tidy.
[18:23:21] <ghrust> 13rust/06auto 14db9793b 15bors: auto merge of #7084 : pnkfelix/rust/fsk-visitor-refactoring, r=pnkfelix...
[18:23:23] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[18:23:27] <erickt> graydon / tjc: how about 0.1.0 to be semver compatible?
[18:24:29] <erickt> java maven uses 0.0.1 by default
[18:25:01] *** Joins: jviereck (Adium@moz-C49F5BDB.ethz.ch)
[18:25:07] <tjc> graydon: I was using 0.1 at first but at some point I started thinking maybe it would be nicer to not assume a version in that case
[18:25:23] <tjc> and inferring versions from the dir name and attribute seems orthogonal
[18:25:37] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[18:25:37] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14db9793b to 14135ba94: 02http://git.io/N3iJvQ
[18:25:37] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[18:25:40] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[18:25:40] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/3Eoc9w
[18:25:40] <ghrust> 13rust/06auto 14ecef9ad 15Felix S. Klock II: Visitor refactoring: Step 1, couple (Env, vt<Env>) together in a tuple.
[18:25:40] <ghrust> 13rust/06auto 1491bced8 15Felix S. Klock II: Fix linebreak and whitespace issues to placate make tidy.
[18:25:40] <ghrust> 13rust/06auto 1467d4f46 15bors: auto merge of #7084 : pnkfelix/rust/fsk-visitor-refactoring, r=pnkfelix...
[18:25:41] <tjc> but, I think it'll be simpler to just go back to having a default version
[18:25:42] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[18:25:52] <graydon> i don't think "no version" is likely to help. still requires an ordering etc.
[18:26:03] <tjc> yeah
[18:29:09] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[18:30:44] *** Quits: barosl (barosl@E287D94F.C81E10FB.7544CABF.IP) (Quit: ëžœë¤ì€ ì‡ í‡´í–ˆìŠµë‹ˆë‹¤.)
[18:31:08] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[18:31:08] *** ChanServ sets mode: +o brson
[18:31:31] <sp3d> is there an explanation somewhere of the reasoning behind the crate filename hashes? the tutorial doesn't go into much detail
[18:35:44] <kimundi> sp3d: Basically, they offer a way to have multible versions of the same libary installed next to each other and/or being used by the same rust program
[18:36:06] <bstrie> sp3d: it's not just the file name that gets hashed, all the symbols are hashed as well
[18:36:11] <kimundi> the symbols are mangled with the hash as well
[18:37:37] <sp3d> and hashes include author names? it seems like those would change regularly without corresponding to compatibility of the actual functions
[18:38:14] <bstrie> I don't think it's necessary to change the hash when the author name changes
[18:38:20] <bstrie> we really don't care about that
[18:38:28] *** Quits: tjc (tjc@moz-E289BB50.pathcom.ca) (Quit: zzzzzzzzzz)
[18:38:31] <bstrie> all we care about is the version info and the name of the library
[18:39:02] <sp3d> hm, in that case why hash instead of using a human-readable concatenation/mangling?
[18:39:13] <bstrie> we do both
[18:39:24] <sp3d> or does the hash for the crate have information from the signatures of the functions within as well
[18:39:38] <sp3d> I guess I should be reading source >_>
[18:39:41] <bstrie> you're correct, the hash should also change when function signatures change
[18:39:45] <bstrie> at least aiui
[18:39:45] <kimundi> sp3d: Currently it simply hashes all meta information, of which author is one. Only hashing a relevant subset would probably work
[18:40:26] <sp3d> so if a function is added in a new version of the library, preserving compatibility of other functions, you still need to recompile library users?
[18:40:38] <bstrie> most likely, yes
[18:41:28] <sp3d> sounds like a nightmare for linux distributions w/ rust shared-libs :/
[18:42:08] <flu_> sp3d: I have to agree to a degree unfortunately, semver let's you make a note of when bugfixes are pushed out, API functions are added, etc, and explicitly note when breaking changes are introduced
[18:42:09] <bstrie> not really, you can always use the old versions of the lib
[18:42:17] <bstrie> they can live side-by-side
[18:42:19] <kimundi> well, you only need to recompile irf you want to use the new library
[18:42:37] <bstrie> that's the point of all this. no conflicts from different versions of the same library
[18:42:39] <sp3d> generally linux distributions only keep one version of a library installed at once
[18:42:50] <flu_> ^- disagree
[18:43:19] <kimundi> doesn't mean its the right thing to do in such a situation
[18:43:19] <sp3d> there are situations like gtk2 vs. gtk3--but it seems like there would be resistance to mirroring those semantics for every update to every rust library
[18:43:28] <bstrie> sp3d: it seems to me like that's a consequence of the fact that C and C++ don't do this hashing thing
[18:43:48] <pcwalton> sp3d: no, that is not intended to be the case
[18:43:53] <pcwalton> bstrie: that is not correct
[18:43:53] <flu_> bstrie: is the library hash optional? I don't remember if that was one of the required metadata
[18:43:58] *** Joins: tjc (tjc@moz-E289BB50.pathcom.ca)
[18:44:01] <pcwalton> graydon explicitly wanted to do this right
[18:44:02] <bstrie> flu_: it is optional
[18:44:05] <flu_> cool
[18:44:19] <bstrie> pcwalton: I would appreciate some schooling, then :)
[18:44:26] <pcwalton> I don't have it all in my head but graydon does
[18:44:27] *** Joins: sdh_ (sdh@327ABE25.365E45D9.41207AE9.IP)
[18:44:34] *** Quits: devinus (devinus@moz-3C0F65B9.sw.biz.rr.com) (Quit: Computer has gone to sleep.)
[18:44:42] <sp3d> +1 for a page dissecting graydon's headstate on this, then ;)
[18:44:42] <pcwalton> and this is very explicitly designed to meet the needs of linux packagers
[18:44:59] <bstrie> flu_: oh wait, I think right now *symbol* hashing is optional, I don't know if there's a way to not hash the library name itself yet
[18:45:18] <graydon> I can type a little bit if you want to know the current plan :)
[18:45:26] <graydon> my shoulder will give out in 
[18:45:29] <graydon> ~30min
[18:45:31] <sp3d> D:
[18:45:41] <sp3d> don't kill yourself, but I am curious
[18:45:41] *** Quits: Jesin (Jessin_@moz-48B48C95.eecs.lehigh.edu) (Ping timeout)
[18:45:45] <bstrie> graydon: dictation software!
[18:45:52] <flu_> graydon, pcwalton - I'd be interested in seeing your views on hash-as-version as compared to semver
[18:45:59] <graydon> so there's "what rust does now" and there's "what it'll do longer-term"
[18:46:02] <pcwalton> I really have no opinions
[18:46:08] <pcwalton> as to how versioning should work
[18:46:13] <graydon> neither of which use hashes as versions
[18:46:21] <sp3d> ah
[18:46:28] <bstrie> flu_: rustpkg is intended to support semver, or at least one of its flavors since semver isn't completely unambiguous
[18:46:41] <flu_> ah, I'm misunderstanding as well then :-)
[18:46:41] <graydon> (though do not get me wrong -- I spent 5 years working on hash-based revision control and I think it's quite an appropriate technology for many cases!)
[18:47:15] <graydon> currently and in the future, a rust library name looks like lib<shortname>-<hash>-<version>.so
[18:47:16] <anri> ;b1
[18:47:29] <anri> mistype sorry
[18:47:30] *** Quits: rajul (quassel@A2DDF553.812B5995.2051BA92.IP) (Connection reset by peer)
[18:47:36] <graydon> or lib<shortname>-<hash>.so.<version>, I can never figure out which way linux wants this written. easy to change.
[18:47:43] <graydon> <version> is not included in <hash>
[18:47:46] *** Quits: deepdog (deepdog@moz-490E834C.client.mchsi.com) (Ping timeout)
[18:47:55] <graydon> <hash> is there to prevent 2 different authors who pick the same <shortname> from colliding
[18:48:16] <graydon> eg. you can have two authors decide they want to make "rustsdl" and they won't collide so long as they pick different input-to-the-hash
[18:48:41] <graydon> currently input-to-the-hash is the link meta tags in the crate. #[link(uuid=.., url=..., etc.)];
[18:48:48] <graydon> in the future, we'll shift this to just hash the pkgid
[18:48:50] <sp3d> but the hash, theoretically, shouldn't shuffle around with every couple commits?
[18:48:55] <sp3d> ok
[18:48:56] <graydon> that is, github.com/yourname/packagename
[18:49:03] <graydon> the has should not change per-commit
[18:49:05] *** Quits: fabiand (fabiand@moz-B309C268.adsl.alicedsl.de) (Quit: Verlassend)
[18:49:05] <graydon> the hash
[18:49:20] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[18:49:26] <graydon> it should be stable. it's a name-collision-resistance device
[18:49:33] <flu_> ohhh, it's an identity thing, not a versioning thing
[18:49:38] <graydon> yes
[18:49:41] *** Quits: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk) (Connection reset by peer)
[18:49:43] <graydon> that's the _crate_ level hashing
[18:49:48] <graydon> now, there's also symbol level hashing
[18:49:54] <sp3d> my question then is why is a hash the right solution rather than merely requiring "author name" to be instead be "ascii organization identifier" and using that in place of hash
[18:50:55] *** Joins: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk)
[18:51:27] <graydon> sp3d: because of collision probability. we're not using base32 yet (we should) but we can get a nice uniform collision-resistance out of say 5 chars in a way much less likely to resist colliding if we have people making up names.
[18:51:28] <sp3d> I saw a great portmanteau to the effect of "ascii privilege" a bit ago but can't remember the exact word... is the hash merely to avoid limiting author names to a subset of ascii?
[18:51:50] <sp3d> mm
[18:51:54] <graydon> it's to avoid constraining the names at all, and to give even odds, probability-wise, on collision
[18:52:06] <graydon> if you want to collide, we can't stop you. but we can make it really improbable.
[18:52:13] <graydon> (for benign inputs)
[18:53:07] <sp3d> but in general the "author" is not e.g. "union(committers)" but "owning organization" or "dictator for life"
[18:53:10] <graydon> this is not a security system. it's an approximation of a global namespace in the absence of a real system. in theory we could also name crates libcom.github.graydon.foo.so.<version>
[18:53:12] *** Quits: vosen (vosen@moz-266BA656.icpnet.pl) (Quit: Leaving)
[18:53:16] <sp3d> right
[18:54:17] <sp3d> thanks for all the explanation <3
[18:54:36] <graydon> sp3d: yeah, in generla the author is the person controlling the repo the thing is located at, and is participating in a global namespace. I guess there's an edge case where two pkgids hash to the same hash + shortname combination, but I'm willing to consider that weird / rare enough to not worry about. the user can work around if they run into it without _too_ much misery, and we can reduce the odds to like 1-in-a-billion without much effort.
[18:55:03] *** Joins: carter (carter@moz-BDFE46F6.nyc.biz.rr.com)
[18:55:09] <graydon> (8 chars base32 => 1 trillion? anyway, negligable)
[18:55:15] <graydon> so then, there's also symbol hashing
[18:55:18] <graydon> this is more subtle
[18:55:38] <graydon> each symbol in the crate has a C++-mangled name
[18:55:47] <flu_> mhm
[18:56:06] <graydon> the last 2 components of which are <hash> and <version>
[18:56:40] <graydon> eg: cleanup::annihilate::_c0b9e988aa1ab6bf::_07pre
[18:56:47] <graydon> (that's a symbol in rustc, currently)
[18:56:52] <graydon> the first part is just the crate-local name
[18:57:02] <graydon> the hash and version are there for 2 separate reasons
[18:57:33] <graydon> the inputs to the hash are: the crate hash _and_ a serialization of the type of the symbol
[18:57:37] <graydon> type in the rust-type-system sense
[18:57:47] <graydon> the crate hash serves to reproduce the collision-resistance at a linkage level
[18:57:54] <flu_> nice!
[18:57:54] *** Quits: SimonSapin (simon@88F51059.F3BBB17D.144F44FA.IP) (Quit: Leaving.)
[18:57:56] <graydon> because even if you had two people picking non-colliding short crate names
[18:58:07] <graydon> you might have them making 2 functions called foo::bar
[18:58:11] <sp3d> mm
[18:58:15] <graydon> and we want the linux PLT to not assign them to the same slot
[18:58:29] <graydon> we want to preserve the illusion of "separate crates have separate namespaces"
[18:58:36] *** Quits: tjc (tjc@moz-E289BB50.pathcom.ca) (Quit: zzzzzzzzzz)
[18:58:40] <graydon> even though linux linking happens in a flat symbol table
[18:58:55] <flu_> graydon: I've certainly encountered that class of problem in the java space. Scala allowed for aliasing of imports as a way to work around it. Glad to see some built in protection for that!
[18:59:05] <graydon> yeah, it's kinda gross
[18:59:09] *** Joins: peeves (Mibbit@DC30A197.D5560FFE.A3D1B221.IP)
[18:59:13] *** Quits: jviereck (Adium@moz-C49F5BDB.ethz.ch) (Connection reset by peer)
[18:59:27] <graydon> so then the other input, the symbol type, is to guard against type drift, to keep code-that-typechecks linkage-safe
[18:59:59] <graydon> if you link against a library that changed types w/o changing version info or providing an old symbol of the right type, it should be caught during compilation
[19:00:09] <graydon> but if someone swaps the library out after compilation, it turns into a runtime linkage error
[19:00:15] <graydon> not just mysterious misbehavior
[19:00:23] <sp3d> alright, cool, that all sounds very reasonable
[19:00:30] <flu_> nice. for great safety! :-)
[19:00:40] <graydon> the final version number is just to let you ship multiple versions of the same symbol if you want to be bug-compatible or such
[19:00:44] <graydon> we're not exploiting it yet
[19:00:59] <graydon> it inherits version number from the crate, but we intend to let you set a per-symbol version if you want to compile two versions of foo::bar
[19:01:06] <graydon> in the same crate
[19:01:14] <sp3d> I guess the important things are to explain the proper semantics of "author" to users, and also actually implement all this :P
[19:01:22] <sp3d> as the former isn't clear from the name alone, imo
[19:01:51] <graydon> incidentally, if someone wants to write all this down and fix all the implementation bugs in it currently, I'd be very thankful for the help. the original design has drifted some. in ways I can specify pretty directly ...
[19:01:57] *** Quits: \n (NDesaulnie@2557E599.66715431.D25A875A.IP) (Ping timeout)
[19:02:43] <graydon> there are two major issues to address. one is that we're transitioning from "bag of meta tags" to "single pkgid" per crate. and everyone's confused / doesn't know what to write in their crates.
[19:02:50] <sp3d> I wouldn't mind cleaning up this discussion and posting it somewhere but I don't want to own any rust bugs atm, I have most of my time allocated elsewhere
[19:03:07] <graydon> sp3d: even just a tidied-up version posted to the wiki would be great
[19:03:17] <sp3d> I'll see what I can do
[19:03:22] <graydon> I think it hasn't been documented well anytime in the past. if you can put in concerns you or any other packagers have, that'd also be helpful.
[19:03:26] <graydon> I'll try to answer them
[19:04:10] <graydon> the other major issue is that we currently generate a bunch of synthetic symbols based on counters. both method and impl prefixes and, I think, certain names associated with types
[19:04:21] <graydon> such that the symbol names and the inputs-to-symbol-hashing are not stable
[19:04:30] *** Joins: \n (NDesaulnie@43CB6079.66715431.D25A875A.IP)
[19:04:32] <sp3d> and those counters need to be hashes or such, right
[19:04:39] <graydon> you change one thing and it throws the sequence off, all the subsequent symbols change downstream
[19:04:54] <graydon> and you wind up with strcat's absurd "every symbol changed" nightly diffs
[19:05:24] <peeves> hey can ne one tell me why vector can't be of type @
[19:05:37] <graydon> they need to be derived from _something_ local, rather than a per-crate counter. I'm not sure what the right mechanism is. it involves looking at the symbols coming out and trying to eliminate accidental sources of drift in them.
[19:05:57] <kimundi> peeves: What do you mean?
[19:06:29] <peeves> all vector fn in library are using ~ pointr
[19:06:47] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[19:06:47] <peeves> kimundi: y can't we use @ pointers
[19:06:53] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[19:07:15] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[19:07:20] <kimundi> I still don't understand. No one prevents you from using them?
[19:07:34] *** Joins: Guest__ (textual@BBE7C46A.B4F11D08.8612FA94.IP)
[19:07:56] <peeves> no u can check in libcore/vec.rs
[19:07:57] <cmr> peeves: You can use @[], but they are less performant than ~[]
[19:08:01] <brson> i still have not been able to figure out what in llvm is causing the miscompilation on incoming. the code we generate is noticably different from what llc generates. I think I've ruled out IR optimizations as the culprit. so far #llvm is not offering assistance (maybe they're at wwdc)
[19:08:05] <kimundi> However, ~ is the prefered way and thus the one the library aims to use almost excusivly
[19:08:32] *** Quits: carllerche (carllerche@moz-BF6CB667.hsd1.ca.comcast.net) (Quit: carllerche)
[19:08:36] <peeves> kimundi: i tried using them 
[19:08:46] <peeves> but they will give some compiler error
[19:09:17] *** Joins: carllerche (carllerche@moz-BF6CB667.hsd1.ca.comcast.net)
[19:09:21] <graydon> brson: :(
[19:09:23] <cmr> brson: you're comparing to a local llc, right, and not the system one?
[19:09:30] <brson> cmr: yes
[19:09:32] <kimundi> use them correctly then :) IF you have more specific questions, just ask.
[19:09:33] <flu_> peeves: I've found these to be helpful reads - http://pcwalton.github.io/blog/2013/03/18/an-overview-of-memory-management-in-rust/ - http://tim.dreamwidth.org/1784423.html
[19:10:21] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Ping timeout)
[19:10:27] <erickt> Jesse: ping
[19:10:34] <graydon> brson: all strength and luck to you! it's in there somewhere (as with this bloody gc bug)
[19:10:45] <Jesse> erickt: pong
[19:10:48] <peeves> kimundi: What i conclude after seeing the compiler is that the , while using @ pointer we can have dangling pointers , since @ pointer are not moved by default
[19:11:18] <pcwalton> brson: we build up the list of llvm optimizations manually now
[19:11:19] <erickt> Jesse: hey! Are you the Jesse that asked about inviting twitter followers in the mailing list?
[19:11:24] <Jesse> erickt: yes
[19:11:25] <pcwalton> so make sure you are running the exact same optimizations
[19:11:25] *** Quits: eevee (eevee@moz-A643AA65.evrt.wa.frontiernet.net) (Quit: resetting perl interpreter)
[19:11:37] *** Joins: eevee (eevee@moz-A643AA65.evrt.wa.frontiernet.net)
[19:11:45] <pcwalton> in the same order
[19:11:48] <kimundi> peeves: I still don't know what your asking, neither @ nor ~ can become dangling in rust
[19:12:08] <peeves> @ can become dangling 
[19:12:12] <kimundi> No
[19:12:12] <flu_> rust commiter type folks - can I get a bors re-fire on https://github.com/mozilla/rust/pull/7073 ? Last run failed tests due to that bizarre bug with the pretty stack trace thing
[19:12:22] <peeves> kimundi: not dangling
[19:12:23] <flu_> it's just doc changes :-/
[19:12:24] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[19:12:26] <Jesse> erickt: (i asked that in an off-list reply, iirc)
[19:12:43] <erickt> Jesse: So I got about 18 confirmed for tonight, so I'm not sure if we could really fit more
[19:12:53] <peeves> kimundi : but still i am not fully satisified
[19:13:09] <cmr> erickt: Tell me how that goes btw, I want a paragraph or two in "This Week In Rust"
[19:13:10] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[19:13:21] <erickt> cmr: ack, homework!
[19:13:24] <kimundi> @ is meant to be garbage collected. At the moment it uses reference counting for that, wich can result in cycles no being freed until the task exits, but the proper tracing gc is almos there.
[19:13:34] <cmr> erickt: well not a paragraph or two from you :p
[19:13:37] <Jesse> erickt: ok, thanks for letting me know. 18 is plenty for a restraurant meetup!
[19:13:47] <erickt> cmr: :)
[19:14:08] <erickt> Jesse: I know! I'm excited. I half expected only a handful would come
[19:14:17] <flu_> thanks pcwalton 
[19:14:24] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[19:15:34] <peeves> kimundi: i am using arcs in my code
[19:15:39] <flu_> erickt, Jesse - what country / region are you guys in? I'm in SoCal
[19:15:54] <peeves> kimundi: and it takes hell lot of time in acquiring locks and all
[19:15:55] <erickt> flu_: SF bay area
[19:15:59] <flu_> of course
[19:15:59] <flu_> lol
[19:16:00] *** Joins: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP)
[19:16:00] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1467d4f46 to 14135ba94: 02http://git.io/N3iJvQ
[19:16:00] *** Parts: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP) ()
[19:16:02] *** Joins: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP)
[19:16:02] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/PyTpgQ
[19:16:02] <ghrust> 13rust/06auto 1437489a6 15Ron Dahlgren: Iterator documentation fixes...
[19:16:02] <ghrust> 13rust/06auto 1478cddc8 15bors: auto merge of #7073 : influenza/rust/iterator-doc-fixes, r=catamorphism...
[19:16:02] *** Parts: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP) ()
[19:16:15] <flu_> LA gets no love in the tech scene
[19:16:28] <peeves> kimundi: i have compared a cprog and a rust prog for internment of string
[19:16:57] <peeves> kimundi: in rust it is taking around 50 times more , since i have used RWARc
[19:17:14] <peeves> kimundi: is there any suggestion to improve it?
[19:17:37] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[19:17:50] <kimundi> Don't know, haven't used the multithreading primitives much.
[19:18:59] *** Quits: orshem (orshem@19491716.F0FDCE77.E3D28531.IP) (Ping timeout)
[19:23:30] <kimundi> Hm, graydon mentioned placement new in the last meeting notes, and I've seen the term thrown around with smartpointers a lot. What exactly is it/why is it needed?
[19:24:21] <graydon> if we adopted it, it'd be an effectively-binary (2-operand) expression that evaluates its 2nd operand _into the memory returned by_ its first operand
[19:25:22] <graydon> it would be needed to support allocating "into" a particular heap. which you could fake by doing an allocate-on-stack-and-then-move-to-heap, and might even be able to boil away the move of with enough inlining, for fixed-size types
[19:26:01] <graydon> but for dynamic-sized types, in particular things like [1,2,3], it wouldn't work
[19:26:12] <kimundi> Hm, I'm not sure where the difference is.
[19:26:28] <graydon> now it might be the case that a dynamic sized type isn't actually important, or not important enough to warrant an expression
[19:26:54] <graydon> not sure where what difference is?
[19:27:36] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[19:27:48] <kimundi> Where the difference to sth like 'let foo = ~bar()' is
[19:28:19] *** Joins: orshem (orshem@19491716.F0FDCE77.E3D28531.IP)
[19:28:22] <graydon> ~bar() allocates the result of bar() in the global ("exchange") heap
[19:28:22] *** Quits: eschweic (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[19:28:27] <graydon> this would just be generalizing that
[19:28:36] <graydon> to permit allocating the result of bar() in other heaps
[19:28:41] <graydon> (or arenas)
[19:29:05] <kimundi> Is that fakeable right now with (verbose) rust code?
[19:29:23] <graydon> for sized types, yes. more or less. might involve a move.
[19:29:46] <graydon> let x = heap.alloc(|| bar());
[19:29:47] <graydon> say
[19:29:55] <kimundi> closures have been mentioned in such situations too, something about initialising by running a fn?
[19:29:57] <peeves> graydon can u elaborate y vector are created as ~ and not @
[19:30:11] *** Quits: \n (NDesaulnie@43CB6079.66715431.D25A875A.IP) (Quit: \n)
[19:30:25] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[19:31:31] <graydon> kimundi: yeah, as I pointed out there. the idea being that if the allocator carves out the memory before running the closure, casts the resulting *void to a *T and then evaluates the closure as the RHS of an assignment, the compiler might boil off the move and just evaluate bar() "into" the destination memory.
[19:32:07] <graydon> kimundi: I'm not certain if that works, it might still move sometimes. but we might well be able to make it work. it would not be _great_ for all ~ and @ allocations to have to be written that way, though
[19:32:30] <kimundi> graydon: Okay, so alloc(|| bar()) would fake it by running the closure, which writes its return value via the out ptr to the place on the heap it should go to?
[19:32:34] *** Joins: johnvanenk (sw17ch@moz-DA3743.hfc.comcastbusiness.net)
[19:32:49] <peeves> pcwalton
[19:32:57] *** Joins: snearch (snearch@moz-21729AFD.pool.mediaways.net)
[19:32:58] <graydon> kimundi: pcwalton has been thinking about trying to deprecate or remove the sigils in favour of library code. gc.alloc(|| foo()) returning Gc<T>, rather than @foo() returning @T
[19:33:11] <peeves> i finds a bug in to_bytes fn i str
[19:33:23] <kimundi> Just trying to wrap my head around it
[19:33:24] <peeves> (~"hell\xc2\xa0o!").to_bytes()   i s not giving expected output
[19:33:35] <peeves> may be some escap chars are not handled
[19:34:00] <benh> Does that extend to Uniq<T>, uniq.alloc(|| ...)?
[19:34:02] <Thiez> do iterators have a .each() somewhere?
[19:34:09] <benh> Thiez: I think it's .advance()
[19:34:35] <kimundi> graydon: I'd like to see the sigils stay as shorthand. ~ as short sugar for the 'default'-way to do heap allocation, and @ as part of syntactic sugar for all other smartpointer/allocators
[19:34:44] <Thiez> benh: thanks, I was grepping the wrong thing :)
[19:34:52] <erickt> rusti: bytes!("hell\xc2\xa0o!")
[19:34:53] -rusti- &[104, 101, 108, 108, 195, 130, 194, 160, 111, 33]
[19:35:21] <peeves> ~[104 , 101 , 108 , 108 , 194 , 160 , 111 , 33]
[19:35:42] <peeves> 194 should be escaped
[19:35:59] <peeves> rusti : 194 should be escaped
[19:36:09] <graydon> kimundi: yeah, perhaps. this is still a bit speculative. the main reason for wanting it is to simplify the "rust has 4 pointer types" story (into "rust has 1 actual-pointer type, plus some library smart pointers") and to level the playing field for the other smart pointers. and possibly -- though we differ in opinion on how valuable this is -- possibly eliminate the sigils. I think we're a bit split as a community on how noisy the sigils read.
[19:36:30] <kimundi> Yeah
[19:36:36] *** Joins: jviereck (Adium@moz-20AF768E.ethz.ch)
[19:36:50] <Thiez> graydon: what would our '1 actual-pointer type' be?
[19:36:57] <kimundi> I personally think the sigils are fine, they have one concrete meaning, you just have to learn it
[19:37:00] <graydon> &
[19:37:18] <Thiez> surely * is the 'actual' pointer
[19:37:23] <peeves> actual pointer is basically a * pointer 
[19:37:23] *** Quits: orshem (orshem@19491716.F0FDCE77.E3D28531.IP) (Quit: Leaving)
[19:37:29] <peeves> usng malloc
[19:37:33] <erickt> peeves: what's it supposed to be?
[19:37:38] <graydon> * is just & without any safety proofs.
[19:37:50] <kimundi> We just have to stop talking about the other sigils as pointers, ant talk about them as sugar for smartpointers :)
[19:37:57] <graydon> yeah, perhaps
[19:38:05] <peeves> erickt: ~[104 , 101 , 108 , 108 , 194 , 160 , 111 , 33]
[19:38:28] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[19:38:54] *** Joins: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net)
[19:39:05] <peeves> erickt: c2 as hex and a0 as hex
[19:39:25] <Thiez> doesn't putting stuff in the library eliminate many opportunities for optimization? for instance, when I copy a @ptr and later discard it, and it never escapes the scope, there is no point in modifying the refcount
[19:39:39] <Thiez> I imagine such optimizations are much harder when @ is a library type
[19:39:43] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[19:40:53] <Thiez> ofc llvm could probably detect this one
[19:41:40] <kimundi> "1 safe ptr (&T), 1 recommended default smartpointer (~T), and sugar for any custom smartpointer (@SP T)" is, I think a fair way to seperate them.
[19:42:24] <Thiez> and 1 unasfe ptr (*T)
[19:42:28] <Thiez> unsafe even :p
[19:43:25] <kimundi> Thiez: That should not be part of an beginner explanation ;) Besides, it might get folded ints & (&'unsafe)
[19:43:25] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[19:43:45] <Thiez> hmmn, I might like that one, &'unsafe
[19:45:07] <Thiez> I think you're all worrying too much about what people might think about pointers, and not too much about the answer to the question "What should I use when I want to build a webserver to try rust?" :p
[19:45:22] <Thiez> not much enough*
[19:45:45] <flu_> Thiez: https://github.com/erickt/mre  :-P
[19:46:06] <Thiez> okay that's pretty nice :p
[19:46:18] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[19:46:36] <flu_> then you can cruze your mre based site with servo and drink ALL THE KOOLAID
[19:46:42] <peeves> let mut v: ~[u8] = ::cast::transmute(to_owned(s));
[19:46:59] <Thiez> peeves: what are you doing?
[19:47:02] <peeves> this is what to_bytes looks like
[19:47:14] <peeves> and is giving wrong answers
[19:47:22] <peeves> ignoring escape characters
[19:47:29] *** Quits: jviereck (Adium@moz-20AF768E.ethz.ch) (Ping timeout)
[19:47:33] <peeves> i have asked about it twice 
[19:47:46] <peeves> but nobody is replying for that
[19:47:52] <erickt> peeves: we seem to be doing the same thing that python does. If you run [ord(c) for c in u"hell\xc2\xa0o!".encode('utf-8')], you get [104, 101, 108, 108, 195, 130, 194, 160, 111, 33]
[19:48:16] <Eridius> peeves: what do you mean when you say 194 should be escaped?
[19:48:34] <erickt> flu_ / Thiez: mre is my baby. It doesn't work with rust HEAD yet though :(
[19:48:46] <zq> meals ready to eat?
[19:48:47] <kimundi> A possible futurey FAQ entry:  "Which pointer do I use?" - "Rust has just one pointer, &. Use that and stack allocation. If you need a heap allocation, the ~ sigil is a shorthand for a smartpointer for heap allocations with a single owner, and should be primary used. For more special needs like cross_task data sharing or cyclic data structire, rust has a number of smartpointers in its library that can be used with the @-sugar"
[19:48:51] <erickt> zq: yep :)
[19:49:05] <peeves> actually \x is a escape chars
[19:49:05] <zq> erickt: i'm so hungrrr.
[19:49:09] <erickt> zq: also means mongrel2 + rust + elasticsearch
[19:49:11] <peeves> so actual answer should be
[19:49:38] <peeves> ~[104 , 101 , 108 , 108 , 194 , 160 , 111 , 33];
[19:49:44] <zq> rust for web dev
[19:49:49] <zq> erickt: seriously?
[19:50:30] <erickt> zq: it was a crazy time. I was young and foolish back then, and rust's networking library didn't work :)
[19:50:34] <peeves> hell    (hex of c2)   (hex of a0) o!
[19:50:40] <zq> erickt: no actually it makes sense
[19:51:02] <Eridius> rusti: "hell\xc2\xa0o"
[19:51:03] -rusti- "hell\xc2\xa0o"
[19:51:10] <Eridius> heh it recreates the escapes. nice
[19:51:19] <joelteon> rusti: "hÃ¯"
[19:51:20] -rusti- "h\xef"
[19:51:21] <kimundi> rusti: "\x32"
[19:51:22] -rusti- "2"
[19:51:34] <joelteon> wait a second
[19:51:37] <Blei> rusti: "é‡‘"
[19:51:37] <joelteon> am I sending latin1?
[19:51:38] -rusti- "\u91d1"
[19:51:46] <mib_ftzq4c> quick question - is there an equivalent to "continue" or "next" in rust?
[19:51:53] <Eridius> mib_ftzq4c: loop
[19:51:54] <peeves> yes loop
[19:52:10] <mib_ftzq4c> no I mean within loop
[19:52:13] <Eridius> loop
[19:52:14] <Thiez> mib_ftzq4c: loop
[19:52:24] <Eridius> mib_ftzq4c: loop { loop } 
[19:52:27] <mib_ftzq4c>  just call loop within loop?
[19:52:27] <kimundi> rusti: loop { loop; }
[19:52:29] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/fORF
[19:52:30] <mib_ftzq4c> haha, crossed
[19:52:31] <mib_ftzq4c> cool, thanks!
[19:52:40] <Blei> peeves: rust strings are always in utf8, and iirc every code point over 127 is represented as 2 or more bytes, which is what you are observing
[19:52:55] <erickt> peeves: I think I understand what's going on
[19:53:08] <erickt> Blei got it
[19:53:23] <peeves> erickt: ok so are we planning to change or 
[19:53:41] <peeves> we'll use it like this only
[19:53:48] <Blei> peeves: no, everything works as intended
[19:53:56] <kimundi> peeves: rust strings will remain utf8
[19:54:06] <erickt> peeves: what are you trying to do that needs it?
[19:55:07] <peeves> erickt: i was just checking for mibenum of some_string
[19:55:13] <erickt> rusti: bytes!("hell\xc0\xcao!")
[19:55:15] -rusti- &[104, 101, 108, 108, 195, 128, 195, 138, 111, 33]
[19:55:50] <Thiez> rusti: bytes!("hell\xc0\xcao!".to_str())
[19:55:50] -rusti- <anon>:10:9: 11:5 error: Non-literal in bytes!
[19:55:51] -rusti- <anon>:10          bytes!("hell\xc0\xcao!".to_str())
[19:55:51] -rusti- <anon>:11     }));
[19:55:51] -rusti- error: aborting due to previous error
[19:55:51] -rusti- application terminated with error code 101
[19:55:52] <Eridius> erickt: looks like rust is treating \xc0 as a request for U+00C0
[19:55:54] <Thiez> baw :D
[19:55:59] <erickt> peeves: that said, I think you may have a point that we don't have a way to make a raw non-utf8 string
[19:56:15] <peeves> yes
[19:56:35] <Blei> rusti: bytes!("hell", 0xc0, 0xca, "o!")
[19:56:35] -rusti- &[104, 101, 108, 108, 192, 202, 111, 33]
[19:56:40] <kimundi> raw non_utf8 strings exist: [u8]
[19:56:42] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Quit: Ex-Chat)
[19:56:46] <Eridius> erickt: my feeling is \x should be used for raw bytes, but the compiler should yell if you've constructed a non-utf8 static string
[19:56:57] <erickt> Blei: oh yeah, I forgot about that form
[19:57:03] *** Quits: Guest__ (textual@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[19:58:17] *** Quits: Blei (philipp@moz-96D25F7A.cust.bluewin.ch) (Quit: gnight)
[19:58:25] <kimundi> One could envision a syntax extension that iterates through the chars of a string literal and cast them, to a byte slice
[19:58:27] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[19:59:01] <peeves> so i think i shoul file an issue for this 
[19:59:18] <peeves> so that it can be fixed in near future
[19:59:28] <Thiez> I think we should get working CTFE and get rid of such syntax extensions :p
[19:59:43] <erickt> peeves: Blei's use of bytes!("hell", 0xc0, 0xca, "o!") should cover this
[19:59:43] <kimundi> "syntax extension for creating non_utf8 byte vector from a string literal"
[20:00:08] <kimundi> oh right, THAT works today
[20:00:35] <kimundi> rusti: bytes!(0xff)
[20:00:35] <peeves> erickt: but this is a hack
[20:00:36] -rusti- &[255]
[20:00:57] <Thiez> unrelated, which are the most important processor architectures rust targets?
[20:01:01] <erickt> We just need better documentation to say you should use this form of bytes! instead of bytes!("hell\xc0\xca\o1!")
[20:01:16] <kimundi> peeves: Less than a hack to abusa rusts utf_8 string literals to not expand to utf8 I'd say :P
[20:01:42] <peeves> erickt: hmm may be this can work(change in documentation)
[20:02:08] *** Quits: eholk (eholk@moz-35385025.uconnect.utah.edu) (Ping timeout)
[20:02:09] <peeves> kimundi :)
[20:04:33] *** Quits: eschweic (Adium@2557E599.66715431.D25A875A.IP) (Ping timeout)
[20:05:31] <erickt> Thiez: Most important? as in x86_64?
[20:05:59] <erickt> I think that gets the most support. Then x86, then in a distant third, ARM
[20:06:55] <erickt> Thiez: I'm not even sure if the ARM support can compile code yet
[20:07:01] <peeves> erickt: what if we have to read from some file as string and then convert it to bytes
[20:07:04] *** Joins: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP)
[20:07:04] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/PyTpgQ
[20:07:04] *** Parts: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP) ()
[20:07:35] <Thiez> would be nice to run rust on ARM tho
[20:07:39] <flu_> erickt: llvm can emit arm code, why wouldn't it work? (not a rhetorical question, I'm no expert)
[20:08:32] <erickt> flu_: there's a lot of architecture-specific shenanigans that still must be accounted for. Such as different ways to do atomic operations, different calling conventions, and etc. llvm only helps with some of that
[20:08:40] <kimundi> peeves: If you need to read non_utf8, use a [u8] reader. If you read utf8 use a str reader. :P
[20:08:41] <flu_> hmm, ok
[20:08:58] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[20:09:09] <Thiez> erickt: anyway, thanks :)
[20:09:45] *** Joins: \n (NDesaulnie@43CB6079.66715431.D25A875A.IP)
[20:09:46] <peeves> kimundi : even \n are not intrepreted correctly
[20:10:00] <erickt> Thiez: I've exhausted my knowledge of arm support, unfortunately. You could dig through the repo to find who's doing the arm work
[20:10:09] <erickt> they could answer your questions
[20:10:19] <jdm> erickt: does the android cross-compiler count?
[20:10:21] <Thiez> I don't have any ARM specific questions really
[20:10:31] <kimundi> peeves: Hu? ABout what are you talking, where are they not interpreted correctly?
[20:10:42] <kimundi> rusti: "\n"
[20:10:43] -rusti- "\n"
[20:10:44] <Thiez> it's just that I want an ABA-problem-proof AtomicPtr
[20:10:46] <erickt> jdm: yeah, that's what I'm talking about
[20:10:58] <kimundi> rusti: "\n".to_bytes()
[20:10:58] -rusti- ~[10]
[20:11:03] <jdm> erickt: it totally works. servo's running on android.
[20:11:04] <Thiez> and this would be easy on x86/x64 with double-length CAS
[20:11:14] <erickt> jdm: ! that's great!
[20:11:40] <Thiez> but platforms like ARM don't have double-length CAS, but they do have LL/SC which is just as nice, but there is no LLVM support for that afaik
[20:11:47] *** Quits: echristo (echristo@D423593A.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[20:12:58] <Thiez> I can probably magic that with #[cfg] and some inline ASM, but I can only test x86/x64 :D
[20:14:32] *** Joins: SiegeLordEx (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[20:14:36] <peeves> kimudi: rusti: 92 11-
[20:14:45] <peeves> 92 , 110
[20:15:13] <johnvanenk> on the topic of ARM, has there been any luck in running it without an underlying OS? I've some interest in targeting a Cortex-M3/M4.
[20:15:29] * johnvanenk scolds IRC client for getting his nick wrong
[20:15:30] *** johnvanenk is now known as sw17ch
[20:15:32] <sw17ch> there
[20:15:41] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[20:15:59] *** Joins: orshem (orshem@19491716.F0FDCE77.E3D28531.IP)
[20:16:02] <flu_> sw17ch: welcome! I dragged you here from twitter (@ScaleItRon)
[20:16:04] <kimundi> peeves: I don't undetrstand what those numbers mean
[20:16:15] <sw17ch> flu_, ah marvelous :)
[20:16:42] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:17:13] *** Joins: echristo (echristo@D423593A.D6CCE4AE.77834EAA.IP)
[20:17:36] <peeves> 92 for \ and 110 for n
[20:17:44] <sw17ch> It seems odd, but it appears that browsers and embedded platforms have a lot of the same concerns. So, I've found Rust (especially the focus on memory semantics) fascinating.
[20:17:48] <peeves> kimundi: 92 for \ and 110 for n
[20:18:00] <Eridius> peeves: \n is an escape that translates to U+0010
[20:18:04] <kimundi> peeves: Okay, and where is the problem?
[20:18:05] <erickt> peeves: you need to write "\\n"
[20:18:13] <joelteon> rusti: "\\n"
[20:18:14] -rusti- "\\n"
[20:18:26] <kimundi> rusti: "\\n".to_bytes()
[20:18:27] -rusti- ~[92, 110]
[20:18:29] <flu_> sw17ch: I think the consensus was that the arm pros aren't lurking here atm. mailing list / git history might indicate who the pros are
[20:18:32] *** Parts: \n (NDesaulnie@43CB6079.66715431.D25A875A.IP) ()
[20:18:58] <sw17ch> flu_: well, that's someplace i might be able to contribute. I'll start hunting.
[20:19:23] <peeves> erickt: u r saying while reading a file as string and then coverting it to string will not work properly without handling cases of \n \t etc.
[20:19:37] <peeves> ignore 
[20:19:49] <flu_> sw17ch: t's definitely a great use case. The emphasis on rust as a _systems_ language really seems to lend itself to close to the metal usage
[20:19:53] <flu_> *it's
[20:19:57] <peeves> 92 for \ and 110 for nerickt: u r saying while reading a file as string and then coverting it to bytes will not work properly without handling cases of \n \t etc.
[20:20:24] <sw17ch> flu_: precisely
[20:21:04] <erickt> peeves: this area of rust is pretty well covered by our test suite. Since we use rust to compile rust, we'd be in a world of hurt if we couldn't read in \n, \t, etc correctly
[20:21:31] <kimundi> peeves: We don't knowwhere your problem is. From what little you say we don't know if you're talking about reading in a file as bytes, reading in a file as string, about wether you want to interpret what you've read as a string or bytes, or if yuo'r just talking about  writing a string literal in a rust source file.
[20:23:49] <erickt> peeves: we're happy to help you learn rust, but please try to ask questions on how do to things than just declaring X doesn't work
[20:23:55] <jensnockert> bjz: I made the PR for removing freestanding functions https://github.com/mozilla/rust/pull/7090
[20:24:11] <jensnockert> *the freestanding numeric functions
[20:24:20] <erickt> jensnockert: I was conerned
[20:24:25] <erickt> err. concerned
[20:24:35] * jensnockert hugs erickt.
[20:25:09] <Eridius> peeves: escapes such as \n in a string literal are interpreted by rust, just like almost every other computer language in existence
[20:25:14] * erickt hugs his free standing functions. I wouldn't ever let anyone take you away, honey!
[20:25:21] <Eridius> reading in strings at runtime, e.g. from a file or user input, does not translate escapes
[20:25:26] <Eridius> again, just like nearly every language in existence
[20:26:27] <flu_> erickt: are you using getopts in any of your projects?
[20:26:44] <peeves> kimundi: this is my use case:   i have a .dat file containing css to be lexed(#data) and corresponding output(#expected tokens).   now my lexer takes in #data as string and gives resulted token(# result) as bytes ........  now i have to compare #expected token with # result  to chk if my lexer working properly
[20:27:22] <erickt> flu_: nope, I've been deep in the compiler for the past couple months
[20:27:35] <Eridius> peeves: sounds like your lexer needs to interpret escapes
[20:27:42] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[20:27:47] <flu_> erickt: cool. you have more than one rust project, so I'm considering you to comprise the bulk of the language use community. haha
[20:28:01] <erickt> I flu_: I was at one point :)
[20:28:10] <erickt> Not sure if I am nowadays
[20:28:53] <flu_> heh, you've been awarded the rust hipster badge! ("I was making webservers in rust before it was cool!")  :-P
[20:29:09] * erickt will where that badge with pride
[20:29:21] <erickt> wow, and a terrible speller badge as well
[20:29:25] <erickt> *wear
[20:30:07] *** Joins: devbug (quassel@moz-E1DE087C.bchsia.telus.net)
[20:31:54] *** Quits: orshem (orshem@19491716.F0FDCE77.E3D28531.IP) (Client exited)
[20:32:13] <peeves> erickt: i was only asking about that ,  but since nobody replied positively on that , i was forced to change my way
[20:32:43] <peeves> Eridius: My lexer is emiitng write token , i have matched them 
[20:33:00] <erickt> peeves: our channel can be chatty, it's can be easy for a question to be missed
[20:33:27] <peeves> eridius: my test case file of matching expcted data and resultant file have to habdle this case
[20:34:17] *** Quits: nano (nano@moz-972880B.superkabel.de) (Connection reset by peer)
[20:34:23] <erickt> peeves: perhaps my json parser will be a guide for you: https://github.com/mozilla/rust/blob/incoming/src/libextra/json.rs
[20:34:44] *** Quits: seth (seth@moz-D840E602.dsl.static.sonic.net) (Input/output error)
[20:35:22] <peeves> erickt: escape_str is what i've done
[20:35:49] <erickt> peeves: do you have your code online?
[20:36:30] <peeves> erickt: no
[20:40:01] *** Quits: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Quit: msingle)
[20:42:11] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[20:42:13] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[20:42:18] *** Joins: seth (seth@moz-D840E602.dsl.static.sonic.net)
[20:44:08] *** Quits: peeves (Mibbit@DC30A197.D5560FFE.A3D1B221.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:46:54] <sw17ch> Speaking of parsers; are there any existing libs that people more versed in Rust enjoy?
[20:47:03] <sw17ch> or is 'roll your own' fairly common?
[20:50:19] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[20:51:45] <flu_> sw17ch: there's a json module in extra
[20:51:46] *** Joins: nik (Mibbit@moz-96836C82.pool.mediaways.net)
[20:51:58] <flu_> sw17ch: https://github.com/mozilla/rust/blob/incoming/src/libextra/json.rs - haven't used it, but hey it exists!
[20:52:17] <flu_> oh
[20:52:18] <sw17ch> Yeah, erickt just linked to that which prompted my question. :)
[20:52:24] <flu_> heh, looks at scrollback
[20:52:38] *** Joins: martin (martin@BC6DAA0E.F689A8C9.EB438161.IP)
[20:53:33] <sw17ch> The recursive decent parsers in Haskell are fun. I'm trying to get an idea what they'd look like in Rust.
[20:55:32] <flu_> yeah, I saw your mention of working on 's-exp calculator' - relating to S and K combinators I'm assuming?
[20:56:56] <jed> I define a struct in an external module and I implement it in a different file. The implementation has some functions with are not methods. How can I call them?
[20:57:25] <jed> I can't use FooStruct::new() because it will say FooStruct is undefined, but foo_pkg::FooStruct::new() also doesn't work
[20:58:18] <martin> Hi #rust! Is there any way to transform an @io::Reader into an owned box? I'm trying to pass a source reader to a closure (in spawn()). See http://git.io/a1DX_Q
[20:58:46] <martin> This is v0.6 by the way.
[20:59:24] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[20:59:57] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[21:01:05] *** Quits: SiegeLordEx (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: WeeChat 0.3.8)
[21:01:08] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke. It's all a joke.)
[21:01:15] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[21:03:12] <nik> is there a way to define a generic function which operates on vectors and str? the problem seems to be that str is a distinct type. therefore "fn foo<T>(s: &[T]) {}" doesn't work with "foo(~"bar");" according to the tutorial str is implemented using vectors of u8 so I thought this might be possible somehow
[21:03:28] *** Quits: Palmik (palmik@moz-5CA3F354.pks.muni.cz) (Quit: Lost terminal)
[21:03:29] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[21:03:42] <Eridius> nik: define a trait and implement the trait twice, once on vectors, and once on strings
[21:03:57] <Eridius> a string may, under the hood, be an array of bytes, but the API is different
[21:04:14] <Eridius> and notabaly, strings must be valid utf-8 at all times, but ~[u8] has no such requirement
[21:04:44] *** Quits: bytbox (s@moz-2E27684C.student.umd.edu) (Ping timeout)
[21:04:52] *** Quits: reyre_ (reyre@86C3727C.33EE9F8A.1139E686.IP) (Client exited)
[21:04:55] <Eridius> nik: depending on what your method does, your str impl may just call .as_bytes() and then call the &[u8] impl on that
[21:05:22] <olsonjeffery> erickt: ping
[21:05:39] <flu_> rusti: let foo = @10; *foo
[21:05:39] *** Joins: Jesin (Jessin_@moz-157A63DD.cc.lehigh.edu)
[21:05:40] -rusti- 10
[21:05:43] <flu_> hmm
[21:05:49] <erickt> sw17ch: I got a fork of ragel that supports rust: https://github.com/erickt/ragel. It's a little out of sync with rust incoming though
[21:05:54] <nik> aye, that sounds promising. cheers, Eridius 
[21:06:01] <flu_> rusti: let foo = io::stdin(); *foo
[21:06:02] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/LZhM
[21:06:03] <erickt> olsonjeffery: pong
[21:06:13] <flu_> rusti: let foo = std::io::stdin(); *foo
[21:06:14] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/YDFg
[21:06:22] <flu_> huh
[21:06:29] <olsonjeffery> erickt: howdy.. what's the state of json serialization? can you point some working examples, if any?
[21:06:34] <flu_> how is it that @std::io::Reader refuses to be dereferenced?
[21:06:38] <Eridius> flu_: io::Reader may not be copyable
[21:06:41] <erickt> olsonjeffery: json serialization works fine :)
[21:06:44] <flu_> aha
[21:06:44] <bjz> jensnockert: looks good!
[21:06:47] <olsonjeffery> both to/from strings/rust-types
[21:06:49] <flu_> martin: I think that's your issue
[21:06:50] <Eridius> flu_: and you can't move out of a @ box
[21:07:02] *** Quits: kini (kini@moz-92AA953A.members.linode.com) (Ping timeout)
[21:07:11] <flu_> martin: sort of side stepping your question, but in that particular case you could assign source to std::io::stdin() in your spawn block
[21:07:21] <Eridius> flu_: util::replace() might be able to help
[21:07:26] <jensnockert> bjz: \o/
[21:07:27] <olsonjeffery> erickt: are there tests that cover it?
[21:07:28] <flu_> Eridius: checking it out
[21:07:31] *** Joins: kini (kini@moz-92AA953A.members.linode.com)
[21:07:38] <flu_> Eridius: is that in std or extra?
[21:07:39] *** Quits: Blub\w (wry@moz-4710E069.wireless.dyn.drei.com) (Quit: WeeChat 0.4.1)
[21:07:44] <Eridius> flu_: std
[21:07:44] <Luqman> flu_: Reader is a trait
[21:07:44] <flu_> (on incoming)
[21:07:50] <erickt> olsonjeffery: yeah, here's one: https://github.com/mozilla/rust/blob/master/src/test/run-pass/auto-encode.rs
[21:07:55] *** Joins: MaikKlein (maik@moz-A09E278A.dip0.t-ipconnect.de)
[21:08:01] <Eridius> or maybe util::swap
[21:08:09] <Eridius> I'm not terribly familiar with the behavior of @-boxes though
[21:08:09] <erickt> olsonjeffery: that's serialization in general
[21:08:52] <erickt> olsonjeffery: here are the json tests: https://github.com/mozilla/rust/blob/incoming/src/libextra/json.rs#L1356
[21:09:04] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[21:09:16] <martin> flu_: Right, but in my "real" code it's a parameter :)
[21:09:24] <olsonjeffery> erickt: danke
[21:09:34] <martin> flu_: Essentially I'm building a lexer that accepts an input reader
[21:09:40] *** Joins: mindginative (mindginati@moz-C1729134.dsl.clear.net.nz)
[21:09:41] <sw17ch> erickt, flu_: the parser me and Mike started on follows the parser-combinator model.
[21:09:51] *** Joins: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP)
[21:09:57] <sw17ch> chaining together different parts of the parser with HOFs
[21:10:02] <martin> flu_: The lexer spawns a background task that acs like a coroutine, hence the need for an owned box (I guess).
[21:10:18] <sw17ch> the implementation so far is more than a little awkward, but i'm also still just learning Rust
[21:10:28] <flu_> sw17ch: I read a post Debasish Gnosh wrote on parser combinators in Scala - that's about the extend of my expertise there :-P
[21:10:35] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[21:10:36] <erickt> sw17ch: those work too :) I got ragel working because I wanted to use a specific http parser
[21:10:49] *** Joins: tikue (tkuehn@2557E599.66715431.D25A875A.IP)
[21:11:15] <bblum> woo race confirmed
[21:11:29] <flu_> martin: Yeah, I kind of assumed it wasn't the trivial case you linked to. haha. I'm interested in how to deal with this too, will let you know if I figure something out
[21:11:43] <martin> flu_: Alright, thanks :)
[21:11:53] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[21:12:09] <steven_is_false> Someone r+? I made https://github.com/mozilla/rust/pull/7027 *NIX only for now because I can't test on Windows, and cmr couldn't get it working.
[21:13:06] <sw17ch> flu_: here's what we got started. it's horrid code, i know. but L97 might give you a hint as to what we're trying to accomplish with this exercise: https://github.com/englishm/egone/blob/parsing/rustcalc.rs#L97
[21:13:16] *** Joins: pyrac (pyrac@moz-B2CB8564.w92-156.abo.wanadoo.fr)
[21:13:44] *** Quits: jdm (jdm@F2D29657.F60B0462.67AC9B1.IP) (Ping timeout)
[21:15:14] <flu_> martin: is your Reader already opened when you pass it to the task? maybe you could instead have your struct hold an &fn (maybeYouNeedAPath: str) -> @io::Reader'?
[21:15:15] *** Quits: sdh_ (sdh@327ABE25.365E45D9.41207AE9.IP) (Quit: Konversation terminated!)
[21:15:39] <flu_> drop that last single quote - it's not relevant :-)
[21:16:39] *** Joins: Voomer (Voomer@moz-E97E8EB7.br.br.cox.net)
[21:18:09] *** Quits: pyrac (pyrac@moz-B2CB8564.w92-156.abo.wanadoo.fr) (Quit: pyrac)
[21:19:33] <Jeaye> steven_is_false: What OS are you on?
[21:19:34] <flu_> sw17ch: one potentially helpful thing - if you look at std::iterator on the incoming branch, there's lots of support for a lot of the functional goodies you may be used to. filter, map, fold, etc
[21:19:49] <sw17ch> flu_: oooo, yes
[21:19:51] <steven_is_false> Jeaye: Linux
[21:19:52] <bblum> argh, but race confirmed with a test case that fails like 1 in 400 times
[21:20:04] <bblum> that is not a test case that's appropriate to put into the codebase
[21:20:05] <bblum> hmmm
[21:21:09] <Jeaye> steven_is_false: Ok. q3 (out of source) should be working now on Mac and Linux; there were some hiccups in my first commit. Let me know if things are ok for you and I'll close the issue.
[21:22:14] <steven_is_false> Jeaye: Thanks! I'll try it out.
[21:23:59] <Thiez> bblum: which code? :)
[21:24:07] <bblum> Thiez: extra::sync
[21:24:17] <bblum> https://github.com/mozilla/rust/issues/7065
[21:24:36] <steven_is_false> Jeaye: As a side issue, remember to add a shebang to the configure script. 
[21:25:03] <steven_is_false> Jeaye: The script seems works fine with bash but fails with sh (actually dash.)
[21:25:13] <martin> flu_: Thing is I want to be able to read other things than files, like strings
[21:25:21] <Jeaye> steven_is_false: configure has a shebang.
[21:25:38] <Jeaye> #!/bin/sh
[21:25:56] <steven_is_false> Jeaye: Doh!, I thought I scrolled to the top of it.
[21:26:10] <martin> flu_: Ah, wait, yeah that might work
[21:26:18] <steven_is_false> Jeaye: Anyways it should either ported to sh, or changed to #! /bin/bash 
[21:26:47] *** Joins: Jesse (jruderman@2557E599.66715431.D25A875A.IP)
[21:27:11] <Jeaye> steven_is_false: Yeah, agreed. Thanks for testing that. Did everything else work fine? (can you then `make` without error?)
[21:27:29] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Quit: tikue)
[21:27:29] <steven_is_false> Jeaye: Actually, I can't make correctly either.
[21:27:36] <Jeaye> rawh
[21:28:12] <steven_is_false> Jeaye: You didn't set the VPATH in the Makefile?
[21:28:19] *** Joins: tikue (tkuehn@2557E599.66715431.D25A875A.IP)
[21:28:42] <steven_is_false> I see you used the PROJ_DIR variable instead.
[21:28:50] <Jeaye> steven_is_false: configure should be using sed to do that if it detects an out of source build.
[21:29:22] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[21:29:55] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[21:30:11] <Jeaye> You have a Makefile, but PROJ_DIR is not set properly?
[21:30:12] *** Quits: sw17ch (sw17ch@moz-DA3743.hfc.comcastbusiness.net) (Quit: sw17ch)
[21:30:15] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[21:30:43] <steven_is_false> Jeaye: PROJ_DIR appears to be set correctly but the usual way to do this sort of thing is use the VPATH variable.
[21:30:56] *** Quits: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP) (Quit: victorporof)
[21:31:59] <Jeaye> steven_is_false: Yeah, that can be adjusted. What's your actual error?
[21:32:34] <steven_is_false> Jeaye: ../../sources/q3/src/main.rs:19:4: 19:6 error: error opening sources/q3/src/gl/mod.rs ../../sources/q3/src/main.rs:19 mod gl;
[21:32:34] <steven_is_false>  
[21:32:42] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Ping timeout)
[21:32:56] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[21:33:13] *** Quits: klutzy (th@BA61F396.8E859986.ECA1BB11.IP) (Ping timeout)
[21:33:50] *** Joins: klutzy (th@BA61F396.8E859986.ECA1BB11.IP)
[21:34:38] *** Quits: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP) (Ping timeout)
[21:34:46] *** Joins: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP)
[21:36:11] <Jeaye> steven_is_false: How're you invoking configure? With a relative path from sources, or an absolute path from / or ~?
[21:36:43] *** Joins: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP)
[21:36:43] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/IcLhmA
[21:36:43] *** Parts: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP) ()
[21:36:44] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[21:36:44] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/hm8R4g
[21:36:44] <ghrust> 13rust/06auto 14ecef9ad 15Felix S. Klock II: Visitor refactoring: Step 1, couple (Env, vt<Env>) together in a tuple.
[21:36:44] <ghrust> 13rust/06auto 1491bced8 15Felix S. Klock II: Fix linebreak and whitespace issues to placate make tidy.
[21:36:44] <ghrust> 13rust/06auto 1458b4fe6 15Felix S. Klock II: Merge branch 'moz-incoming' into fsk-visitor-refactoring
[21:36:46] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[21:36:48] *** Joins: vcl_ (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP)
[21:36:53] *** Quits: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP) (Ping timeout)
[21:36:55] <steven_is_false> ../../sources/q3/configure 
[21:36:59] *** vcl_ is now known as vcl
[21:37:19] <bblum> whyyyyyy
[21:37:46] <bblum> i put in "for 5.times { task::yield(); }" lines in my test case where i think they would make the race more likely to happen
[21:37:49] <bblum> and
[21:37:50] <bblum> they make it less likely
[21:37:53] <bblum> by like 50x
[21:37:54] <bblum> whyyy
[21:38:37] <kimundi> maybe you need a much higher number?
[21:38:47] *** Joins: vcl_ (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP)
[21:38:51] <kimundi> yield 500 times :P
[21:38:52] *** Quits: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP) (Ping timeout)
[21:38:58] *** vcl_ is now known as vcl
[21:39:02] <bblum> that is not valgrind-friendly
[21:39:51] <strcat> if only we had asan/tsan
[21:40:24] <Thiez> bblum: are the competing tasks running on the same core?
[21:40:44] *** Quits: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP) (Ping timeout)
[21:40:47] *** Joins: vcl_ (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP)
[21:40:49] *** vcl_ is now known as vcl
[21:40:58] <bblum> Thiez: hmm, probably not
[21:41:17] <bblum> strcat: using data race detectors as a crutch results in stuff like https://github.com/mozilla/rust/issues/2787
[21:41:57] <strcat> bblum: not as a crutch but to find bugs in the runtime
[21:42:21] <strcat> or unsafe code in general
[21:42:57] <bblum> you would need some sort of "systematic execution" to find the race i'm presently working on
[21:43:04] <bblum> some sort of... https://github.com/mozilla/rust/issues/6957 ;)
[21:43:07] <graydon> phew!
[21:43:16] <graydon> borrowck sure likes memory!
[21:43:37] <bblum> strcat: but, in this case, i know what the race is and how to fix it; i am just working on a test case to make sure it never comes back
[21:43:44] <Eridius> graydon: is borrowck why building rust likes to take 1.6+ GB of RAM?
[21:43:51] <bblum> and a test case that only exposes the race 1 in 400 times will not do a very good job of future-proofing your code
[21:44:04] <graydon> Eridius: maybe. I'm trying to reduce presently.
[21:44:21] <Eridius> graydon: godspeed!
[21:44:47] *** Joins: vcl_ (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP)
[21:44:49] *** Quits: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP) (Ping timeout)
[21:44:51] *** Quits: seth (seth@moz-D840E602.dsl.static.sonic.net) (Input/output error)
[21:44:59] *** vcl_ is now known as vcl
[21:45:27] <graydon> nmatsakis: ping
[21:46:00] <nmatsakis> graydon: pong
[21:46:08] <graydon> hey
[21:46:10] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: WeeChat 0.3.8)
[21:46:21] <graydon> I'm trying a different strategy on "making the gc bootstrap" today
[21:46:32] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[21:46:48] <graydon> this strategy involves trying to figure out why we're peaking quite so high in memory use
[21:46:51] *** Quits: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP) (Ping timeout)
[21:47:04] <graydon> and I'm seeing one area of borrowck using a ton of memory. wondering if you can help me dig into it some..
[21:48:32] <graydon> something in borrowck::move_data is calling vec::from_fn (I think probably indirectly), building very large (or very many) vectors
[21:49:02] <flu_> what's the correct syntax for invoking a struct's closure member from an impl? -> https://gist.github.com/influenza/5769368
[21:49:14] <graydon> 1.6gb of realloc by the look of it
[21:49:19] <bblum> flu_: (self.source_getter)()
[21:49:29] <flu_> aha! thanks
[21:50:56] <nmatsakis> graydon: yes I know what the problrm is
[21:51:00] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[21:51:13] <graydon> nmatsakis: oh?
[21:52:06] <nmatsakis> graydon: yes, but I have to go this sec, can we discuss in 30-45 mins?
[21:52:20] <graydon> sure
[21:52:44] <nmatsakis> k, I will ping you soon
[21:54:12] <SiegeLord> My pull request inexplicably caused some test failures... what do I do? https://github.com/mozilla/rust/pull/7077
[21:55:53] <Jeaye> steven_is_false: Fixed and pushed; I'm no longer able to repro that bug. 
[21:56:04] <flu_> martin: something like this maybe? https://gist.github.com/influenza/5769469
[21:56:10] <steven_is_false> Jeaye: cool
[21:56:32] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[21:56:43] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:56:49] <Luqman> SiegeLord: seems unrelated. it should work with a retry
[21:56:49] *** Quits: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP) (Quit: Leaving.)
[21:57:04] <flu_> I don't like the side-effecty-ness of it, but that's what I came up with. haha
[21:57:25] <SiegeLord> Luqman: Thanks!
[21:57:26] <steven_is_false> Jeaye: Thanks! It works.
[21:57:35] *** Quits: eschweic (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[21:57:37] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Connection reset by peer)
[21:58:28] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[21:58:47] <Jeaye> Cheers. :)
[22:00:01] <kimundi> graydon: After reading/thinking about what you've said earlier about placement new... Is the full extend of the problem to find a expression form that does 1) place the return value directly into a memory allocation 2) Allow that location to be provided by a static fn of a custom type 3) Allow that location to be provided by a instance of a custom type 4) Allow it to use unsized types ? Or are there other areas I'm not yet aware of?
[22:01:00] *** Joins: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP)
[22:01:22] <graydon> kimundi: I think that's all, and I'm not _sure_ #4 is necessary. it might be that we can just tell people to call alloc.vec::<T>(n, |i| elt()) as a special case for [1,2,..,n]
[22:02:03] <graydon> IOW if we can provide this via library interfaces w/o any new language machinery, and all we have is a small wart concerning allocating dynamic-sized vectors from arenas, I won't mind too much.
[22:02:27] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Quit: tikue)
[22:03:21] *** Joins: tikue (tkuehn@2557E599.66715431.D25A875A.IP)
[22:04:28] <kimundi> Hmm. I'm thinking about how to build some kind of trait framework for that.
[22:04:56] *** Quits: doomlord (doomlod@moz-8F385DB0.range109-153.btcentralplus.com) (Ping timeout)
[22:07:30] *** Quits: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP) (Ping timeout)
[22:10:14] <kimundi> graydon: Do you think it would be hard to guarantee that "|| bar()" called as "*foo = f()" would optimize to "|ptr| *ptr = bar()" called as "f(foo)"? That is, make sure it allways constructs in place.
[22:10:44] <graydon> I think we could probably bend things enough to make that true
[22:11:00] <graydon> it might involve some careful arrangement in trans, but it might already work
[22:11:01] *** Joins: jfb (jfb@C587E14D.D6CCE4AE.77834EAA.IP)
[22:12:10] <flu_> Has there been any discussion about explicitly setting the mutability of fields in a struct? the concept of "the box the struct is in must be mutable" in order to change field values strikes me as a little unexpected
[22:12:23] <Thiez> flu_: it used to be that way
[22:12:43] *** Quits: doener (doener@moz-121949B3.unitymediagroup.de) (Ping timeout)
[22:12:48] <flu_> something like "let x = Foo { bar: mut whatev, baz: 10 }"
[22:13:36] <graydon> flu_: used to be that way
[22:13:41] <flu_> Thiez: do you happen to remember what drove the decision to change it? (maybe I should scour the mailing list history)
[22:13:50] <flu_> ^-- also directed to graydon
[22:13:54] <graydon> at great length, removed. inherited mutability "works" much better.
[22:14:04] <graydon> that is, if you have a mutable field in an immutable value, what does it mean?
[22:14:05] <flu_> graydon: from an optimization standpoint?
[22:14:14] <flu_> ah, semantically
[22:14:15] <graydon> alternatively, if you have an immutable field in a mutable value, what does it mean?
[22:14:31] <graydon> it makes things work much better if we say "mutability inherits though ownership"
[22:15:11] <graydon> whatever is the root of an owned tree of values determines the mutability of the whole thing at once
[22:15:12] *** Joins: jst_ (quassel@2557E599.66715431.D25A875A.IP)
[22:15:16] <graydon> this has some neat follow-on effects
[22:15:27] <graydon> namely we can "freeze" such trees by moving them from mut to non-mut
[22:15:27] *** Joins: RageOfThou (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[22:15:33] <graydon> all the mutator methods disappear, statically
[22:15:36] <flu_> graydon: I guess that's similar to the safety you get from c++'s const keyword, given its strict requirements on spreading around
[22:15:45] <graydon> they were there on the mutable version, they disappear on the immutable one
[22:15:54] *** Joins: jensnock_ (jensnocker@moz-8BE55278.customer.t3.se)
[22:16:05] *** Quits: klutzy (th@BA61F396.8E859986.ECA1BB11.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: Voomer (Voomer@moz-E97E8EB7.br.br.cox.net) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: MaikKlein (maik@moz-A09E278A.dip0.t-ipconnect.de) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: kini (kini@moz-92AA953A.members.linode.com) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: nik (Mibbit@moz-96836C82.pool.mediaways.net) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: snearch (snearch@moz-21729AFD.pool.mediaways.net) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: mib_ftzq4c (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: mschifer (Adium@2557E599.66715431.D25A875A.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: ilyoan (ilyoan@B4104EBB.3CC170B1.1E14B209.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: k00mi (koomi@moz-B054AB86.pools.arcor-ip.net) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: true_droid (Adium@moz-123FD9B8.beck.volia.net) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: nooy (user@moz-2458675D.a146.priv.bahnhof.se) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: EXetoC (ex@moz-C741B177.customer.t3.se) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: heftig (heftig@moz-3D6EBBD3.dip0.t-ipconnect.de) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: jhark (jhark@moz-B9920504.jhark.net) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: igl1 (igl@moz-3DA0C609.adsl.alicedsl.de) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: sam1 (sam@moz-ADDDDFB1.mc.videotron.ca) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: anri (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: mleise (marco@moz-3468AB5B.pools.arcor-ip.net) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: zxcdw (r-a@moz-C7C5467B.cust.bredband2.com) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: cr (anonymous@moz-B141BCC5.dip0.t-ipconnect.de) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: RMF (RMF@FE1B430.5FDF6461.11F731AB.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: kimundi (kimundi@moz-F037B1AB.dip0.t-ipconnect.de) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: cdidd (cdidd@moz-106778E9.broadband.corbina.ru) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: yong (chatzilla@74DA0C97.4E87ADC2.263D9828.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: rfw (rfw@moz-C65A114.rfw.name) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: ski (md9slj@moz-4BB5E0FF.studat.chalmers.se) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: cscottnet (cscott@moz-2577C94A.net) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: zheng_li (zheng_li@moz-D6711E9E.xenplanet.org) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: noj (jon@moz-D51AE9DE.swym.se) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: mark_edward (quassel@moz-6B90E517.rh.uchicago.edu) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: _1126 (1126@moz-83D60E55.lileth.net) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: pascal (pascal@moz-3A678551.pascalj.de) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: noam_ (noam@F6B530A7.720527A7.416762B.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: benh (ben@moz-4A0366D2.org) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: Boreeas (Boreeas@moz-F35C832D.boreeas.net) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: ion (ion@heh.fi) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: wuehlmaus (wuehlmaus@moz-BBCFACA0.de) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: idkfa (idkfa@moz-141F54A4.krasinfo.ru) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: IdolfHatler (idolf@moz-4103EACC.pwnies.dk) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: Kroisse (Kroisse@7CF4064D.E3B51CAE.ECA1BB11.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: aatch (aatch@moz-B437F499.pocketrent.com) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: gmcabrita (uid4474@moz-D8B63698.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: sawrubh (uid6719@moz-D8B63698.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: doy (doy@moz-5FE28A32.akrasiac.org) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: SeanTAllen_ (uid4855@moz-D8B63698.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: jihyun (uid7128@moz-D8B63698.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: doomlord__ (servitor@moz-8F385DB0.range109-153.btcentralplus.com) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: LimeBurst (me@247D1419.D73964AC.27A8748.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: jessicah (jessicah@moz-B8A3AE25.massey.ac.nz) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: gazoombo (uid6629@moz-D8B63698.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: dforsyth (dforsyth@AC76BBB4.5FDB5121.EE6E63A5.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: wycats_ (uid79@moz-C944F5EC.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: geomyidae__ (uid214@moz-C944F5EC.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: mixi (mixi@moz-DBD8904A.org) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: decoder (quassel@moz-D7023D7D.own-hero.net) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: molnarg (darkelf@moz-A80E711.clients.your-server.de) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: DasIch (dasich@moz-5EDA591.de) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: ruediger (quassel@moz-C9B8D8D0.org) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: doomlord_ (walter@moz-8F385DB0.range109-153.btcentralplus.com) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: jst (quassel@2557E599.66715431.D25A875A.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: cyndis (cyndis@moz-FA10A1CD.fi) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: keruspe (keruspe@moz-F2539FEC.imagination-land.org) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: tristram (tristram@moz-C498CC41.eu) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: dju (dju@moz-83BD5EC.dmz.me) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: Mowah (Mowah@moz-C7674B3E.cust.bredbandsbolaget.se) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: reyre (rick@B2D8AB09.33EE9F8A.1139E686.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: xenocons (otk@moz-C675529E.members.linode.com) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: alexrp (zor@moz-180BED6.rfw.name) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: glandium (glandium@moz-A09032B1.kimsufi.com) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: andor (andor@518ECB3F.6B32A7A2.A2798B07.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: vermeille (vermeille@moz-436628F6.net) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: kaeso (kaeso@moz-F21FF626.unstable.it) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: Seldaek (seld@moz-5DEA7688.ch) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: wilfred (uid159@moz-C944F5EC.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: toshok (toshok@moz-67C55A1F.com) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: ldlework (ldlework@6AEB83D1.B92A0FC.176AC772.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: sfackler (sfackler@moz-316FE70F.compute-1.amazonaws.com) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: jj2baile_ (jon@moz-DCEF6040.csclub.uwaterloo.ca) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: Thiez (thiez@moz-BF669398.student.utwente.nl) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: prudhvi (prudhvi@moz-154A460A.supr.io) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: krig (krig@A2A7CF2C.5AB9C4E2.B1C414DA.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: pcdummy (quassel@moz-CF4CA865.page4me.ch) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: katis (katis@40C8AF65.EFDC2270.EE6E63A5.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: h3r3tic (heretic@moz-8BC3B3DB.se) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: jakubw (ubuntu@moz-D137E450.eu-west-1.compute.amazonaws.com) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: chee (chee@moz-E5A0DD8.org) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: Fliboo (Flibo@moz-40397852.org.aalto.fi) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: CMCL_ (cmcl@moz-8C2E912C.co.uk) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] *** Quits: Luqman (laden@moz-DCEF6040.csclub.uwaterloo.ca) (concrete.mozilla.org gravel.mozilla.org)
[22:16:05] <flu_> ha! nice. the amount of static magic that rust accomplishes is really amazing
[22:16:15] <graydon> flu_: no, const is very weak in C++. it it doesn't spread through pointers transitively.
[22:16:23] <sp3d> how does one format pages on the wiki? markdown?
[22:16:25] <graydon> that is, if my struct is const, it can hold non-const & and * values
[22:16:36] <graydon> and if you mutate the things pointed-to through them, nobody notices / complains
[22:16:45] <graydon> sp3d: yes, github flavoured markdown
[22:16:49] *** Joins: klutzy (th@BA61F396.8E859986.ECA1BB11.IP)
[22:16:49] <flu_> graydon: I see
[22:16:54] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[22:16:54] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[22:16:54] *** Joins: true_droid (Adium@5C7A0982.41F4CE1E.C7DB93CC.IP)
[22:16:54] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[22:16:54] *** Joins: RMF (RMF@moz-494A6C28.dsl.telepac.pt)
[22:16:54] *** Joins: Voomer (Voomer@moz-E97E8EB7.br.br.cox.net)
[22:16:54] *** Joins: MaikKlein (maik@moz-A09E278A.dip0.t-ipconnect.de)
[22:16:54] *** Joins: kini (kini@moz-92AA953A.members.linode.com)
[22:16:54] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[22:16:54] *** Joins: snearch (snearch@moz-21729AFD.pool.mediaways.net)
[22:16:54] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[22:16:54] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[22:16:54] *** Joins: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk)
[22:16:54] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[22:16:54] *** Joins: mib_ftzq4c (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[22:16:54] *** Joins: mschifer (Adium@2557E599.66715431.D25A875A.IP)
[22:16:54] *** Joins: ilyoan (ilyoan@B4104EBB.3CC170B1.1E14B209.IP)
[22:16:54] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[22:16:54] *** Joins: k00mi (koomi@moz-B054AB86.pools.arcor-ip.net)
[22:16:54] *** Joins: cr (anonymous@moz-B141BCC5.dip0.t-ipconnect.de)
[22:16:54] *** Joins: nooy (user@moz-2458675D.a146.priv.bahnhof.se)
[22:16:54] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[22:16:54] *** Joins: heftig (heftig@moz-3D6EBBD3.dip0.t-ipconnect.de)
[22:16:54] *** Joins: jhark (jhark@moz-B9920504.jhark.net)
[22:16:54] *** Joins: igl1 (igl@moz-3DA0C609.adsl.alicedsl.de)
[22:16:54] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[22:16:54] *** Joins: sam1 (sam@moz-ADDDDFB1.mc.videotron.ca)
[22:16:54] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[22:16:54] *** Joins: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org)
[22:16:54] *** Joins: anri (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net)
[22:16:54] *** Joins: mleise (marco@moz-3468AB5B.pools.arcor-ip.net)
[22:16:54] *** Joins: zxcdw (r-a@moz-C7C5467B.cust.bredband2.com)
[22:16:54] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[22:16:54] *** Joins: kimundi (kimundi@moz-F037B1AB.dip0.t-ipconnect.de)
[22:16:54] *** Joins: cdidd (cdidd@moz-106778E9.broadband.corbina.ru)
[22:16:54] *** Joins: yong (chatzilla@74DA0C97.4E87ADC2.263D9828.IP)
[22:16:54] *** Joins: rfw (rfw@moz-C65A114.rfw.name)
[22:16:54] *** Joins: ski (md9slj@moz-4BB5E0FF.studat.chalmers.se)
[22:16:54] *** Joins: cscottnet (cscott@moz-2577C94A.net)
[22:16:54] *** Joins: zheng_li (zheng_li@moz-D6711E9E.xenplanet.org)
[22:16:54] *** Joins: mark_edward (quassel@moz-6B90E517.rh.uchicago.edu)
[22:16:54] *** Joins: _1126 (1126@moz-83D60E55.lileth.net)
[22:16:54] *** Joins: pascal (pascal@moz-3A678551.pascalj.de)
[22:16:54] *** Joins: Boreeas (Boreeas@moz-F35C832D.boreeas.net)
[22:16:54] *** Joins: benh (ben@moz-4A0366D2.org)
[22:16:54] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[22:16:54] *** Joins: ion (ion@heh.fi)
[22:16:54] *** Joins: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw)
[22:16:54] *** Joins: wuehlmaus (wuehlmaus@moz-BBCFACA0.de)
[22:16:54] *** Joins: idkfa (idkfa@moz-141F54A4.krasinfo.ru)
[22:16:54] *** Joins: IdolfHatler (idolf@moz-4103EACC.pwnies.dk)
[22:16:54] *** Joins: aatch (aatch@moz-B437F499.pocketrent.com)
[22:16:54] *** Joins: gmcabrita (uid4474@moz-D8B63698.irccloud.com)
[22:16:54] *** Joins: sawrubh (uid6719@moz-D8B63698.irccloud.com)
[22:16:54] *** Joins: doy (doy@moz-5FE28A32.akrasiac.org)
[22:16:54] *** Joins: SeanTAllen_ (uid4855@moz-D8B63698.irccloud.com)
[22:16:54] *** Joins: jihyun (uid7128@moz-D8B63698.irccloud.com)
[22:16:54] *** Joins: doomlord__ (servitor@moz-8F385DB0.range109-153.btcentralplus.com)
[22:16:54] *** Joins: LimeBurst (me@247D1419.D73964AC.27A8748.IP)
[22:16:54] *** Joins: jessicah (jessicah@moz-B8A3AE25.massey.ac.nz)
[22:16:54] *** Joins: gazoombo (uid6629@moz-D8B63698.irccloud.com)
[22:16:54] *** Joins: dforsyth (dforsyth@AC76BBB4.5FDB5121.EE6E63A5.IP)
[22:16:54] *** Joins: wycats_ (uid79@moz-C944F5EC.irccloud.com)
[22:16:54] *** Joins: geomyidae__ (uid214@moz-C944F5EC.irccloud.com)
[22:16:54] *** Joins: mixi (mixi@moz-DBD8904A.org)
[22:16:54] *** Joins: decoder (quassel@moz-D7023D7D.own-hero.net)
[22:16:54] *** Joins: molnarg (darkelf@moz-A80E711.clients.your-server.de)
[22:16:54] *** Joins: DasIch (dasich@moz-5EDA591.de)
[22:16:54] *** Joins: ruediger (quassel@moz-C9B8D8D0.org)
[22:16:54] *** Joins: doomlord_ (walter@moz-8F385DB0.range109-153.btcentralplus.com)
[22:16:54] *** Joins: alexrp (zor@moz-180BED6.rfw.name)
[22:16:54] *** Joins: cyndis (cyndis@moz-FA10A1CD.fi)
[22:16:54] *** Joins: keruspe (keruspe@moz-F2539FEC.imagination-land.org)
[22:16:54] *** Joins: tristram (tristram@moz-C498CC41.eu)
[22:16:54] *** Joins: dju (dju@moz-83BD5EC.dmz.me)
[22:16:54] *** Joins: Seldaek (seld@moz-5DEA7688.ch)
[22:16:54] *** Joins: reyre (rick@B2D8AB09.33EE9F8A.1139E686.IP)
[22:16:54] *** Joins: xenocons (otk@moz-C675529E.members.linode.com)
[22:16:54] *** Joins: kaeso (kaeso@moz-F21FF626.unstable.it)
[22:16:54] *** Joins: andor (andor@518ECB3F.6B32A7A2.A2798B07.IP)
[22:16:54] *** Joins: wilfred (uid159@moz-C944F5EC.irccloud.com)
[22:16:54] *** Joins: sfackler (sfackler@moz-316FE70F.compute-1.amazonaws.com)
[22:16:54] *** Joins: toshok (toshok@moz-67C55A1F.com)
[22:16:54] *** Joins: ldlework (ldlework@6AEB83D1.B92A0FC.176AC772.IP)
[22:16:54] *** Joins: jj2baile_ (jon@moz-DCEF6040.csclub.uwaterloo.ca)
[22:16:54] *** Joins: Thiez (thiez@moz-BF669398.student.utwente.nl)
[22:16:54] *** Joins: prudhvi (prudhvi@moz-154A460A.supr.io)
[22:16:54] *** Joins: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com)
[22:16:54] *** Joins: krig (krig@A2A7CF2C.5AB9C4E2.B1C414DA.IP)
[22:16:54] *** Joins: pcdummy (quassel@moz-CF4CA865.page4me.ch)
[22:16:54] *** Joins: katis (katis@40C8AF65.EFDC2270.EE6E63A5.IP)
[22:16:54] *** Joins: h3r3tic (heretic@moz-8BC3B3DB.se)
[22:16:54] *** Joins: jakubw (ubuntu@moz-D137E450.eu-west-1.compute.amazonaws.com)
[22:16:54] *** Joins: chee (chee@moz-E5A0DD8.org)
[22:16:54] *** Joins: CMCL_ (cmcl@moz-8C2E912C.co.uk)
[22:16:54] *** Joins: Fliboo (Flibo@moz-40397852.org.aalto.fi)
[22:16:54] *** Joins: Luqman (laden@moz-DCEF6040.csclub.uwaterloo.ca)
[22:16:55] *** Quits: gavin (gavin@moz-DB4A9C19.scl3.mozilla.com) (Client exited)
[22:16:55] *** Quits: dumitru (dgherman@311ED075.DD6131A9.A746F37F.IP) (Client exited)
[22:17:02] <graydon> https://help.github.com/articles/github-flavored-markdown
[22:17:06] *** Joins: dumitru (dgherman@311ED075.DD6131A9.A746F37F.IP)
[22:17:07] *** Quits: a__ (a__@moz-250D9B4.nycmny.fios.verizon.net) (Ping timeout)
[22:17:07] *** Joins: gavin (gavin@moz-DB4A9C19.scl3.mozilla.com)
[22:17:16] *** Joins: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr)
[22:17:22] *** Joins: vermeille (vermeille@moz-436628F6.net)
[22:17:26] *** Joins: glandium (glandium@moz-A09032B1.kimsufi.com)
[22:17:26] *** Joins: Mowah (Mowah@moz-C7674B3E.cust.bredbandsbolaget.se)
[22:17:48] * strcat doesn't like github's markdown at all
[22:17:49] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[22:18:06] *** Joins: noj (jon@moz-D51AE9DE.swym.se)
[22:18:07] <flu_> strcat: at least it isn't confluence flavored!
[22:18:12] <strcat> their rst support is more like pandoc markdown
[22:18:44] <strcat> but you can't use that in issues/comments ;p
[22:19:09] *** Quits: dumitru (dgherman@311ED075.DD6131A9.A746F37F.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: gavin (gavin@moz-DB4A9C19.scl3.mozilla.com) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: true_droid (Adium@5C7A0982.41F4CE1E.C7DB93CC.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: RMF (RMF@moz-494A6C28.dsl.telepac.pt) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: Voomer (Voomer@moz-E97E8EB7.br.br.cox.net) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: MaikKlein (maik@moz-A09E278A.dip0.t-ipconnect.de) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: kini (kini@moz-92AA953A.members.linode.com) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: snearch (snearch@moz-21729AFD.pool.mediaways.net) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: mib_ftzq4c (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: mschifer (Adium@2557E599.66715431.D25A875A.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: ilyoan (ilyoan@B4104EBB.3CC170B1.1E14B209.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: k00mi (koomi@moz-B054AB86.pools.arcor-ip.net) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: nooy (user@moz-2458675D.a146.priv.bahnhof.se) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: heftig (heftig@moz-3D6EBBD3.dip0.t-ipconnect.de) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: jhark (jhark@moz-B9920504.jhark.net) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: igl1 (igl@moz-3DA0C609.adsl.alicedsl.de) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: sam1 (sam@moz-ADDDDFB1.mc.videotron.ca) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: anri (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: mleise (marco@moz-3468AB5B.pools.arcor-ip.net) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: zxcdw (r-a@moz-C7C5467B.cust.bredband2.com) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: cr (anonymous@moz-B141BCC5.dip0.t-ipconnect.de) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: kimundi (kimundi@moz-F037B1AB.dip0.t-ipconnect.de) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: cdidd (cdidd@moz-106778E9.broadband.corbina.ru) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: yong (chatzilla@74DA0C97.4E87ADC2.263D9828.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: rfw (rfw@moz-C65A114.rfw.name) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: ski (md9slj@moz-4BB5E0FF.studat.chalmers.se) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: cscottnet (cscott@moz-2577C94A.net) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: zheng_li (zheng_li@moz-D6711E9E.xenplanet.org) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: mark_edward (quassel@moz-6B90E517.rh.uchicago.edu) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: _1126 (1126@moz-83D60E55.lileth.net) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: pascal (pascal@moz-3A678551.pascalj.de) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: benh (ben@moz-4A0366D2.org) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: Boreeas (Boreeas@moz-F35C832D.boreeas.net) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: ion (ion@heh.fi) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: wuehlmaus (wuehlmaus@moz-BBCFACA0.de) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: idkfa (idkfa@moz-141F54A4.krasinfo.ru) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: IdolfHatler (idolf@moz-4103EACC.pwnies.dk) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: aatch (aatch@moz-B437F499.pocketrent.com) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: gmcabrita (uid4474@moz-D8B63698.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: sawrubh (uid6719@moz-D8B63698.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: doy (doy@moz-5FE28A32.akrasiac.org) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: SeanTAllen_ (uid4855@moz-D8B63698.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: jihyun (uid7128@moz-D8B63698.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: doomlord__ (servitor@moz-8F385DB0.range109-153.btcentralplus.com) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: LimeBurst (me@247D1419.D73964AC.27A8748.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: jessicah (jessicah@moz-B8A3AE25.massey.ac.nz) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: gazoombo (uid6629@moz-D8B63698.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: dforsyth (dforsyth@AC76BBB4.5FDB5121.EE6E63A5.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: wycats_ (uid79@moz-C944F5EC.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: geomyidae__ (uid214@moz-C944F5EC.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: mixi (mixi@moz-DBD8904A.org) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: decoder (quassel@moz-D7023D7D.own-hero.net) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: molnarg (darkelf@moz-A80E711.clients.your-server.de) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: DasIch (dasich@moz-5EDA591.de) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: ruediger (quassel@moz-C9B8D8D0.org) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: doomlord_ (walter@moz-8F385DB0.range109-153.btcentralplus.com) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: cyndis (cyndis@moz-FA10A1CD.fi) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: keruspe (keruspe@moz-F2539FEC.imagination-land.org) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: tristram (tristram@moz-C498CC41.eu) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: dju (dju@moz-83BD5EC.dmz.me) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: reyre (rick@B2D8AB09.33EE9F8A.1139E686.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: xenocons (otk@moz-C675529E.members.linode.com) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: alexrp (zor@moz-180BED6.rfw.name) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: andor (andor@518ECB3F.6B32A7A2.A2798B07.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: kaeso (kaeso@moz-F21FF626.unstable.it) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: Seldaek (seld@moz-5DEA7688.ch) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: wilfred (uid159@moz-C944F5EC.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: toshok (toshok@moz-67C55A1F.com) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: ldlework (ldlework@6AEB83D1.B92A0FC.176AC772.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: sfackler (sfackler@moz-316FE70F.compute-1.amazonaws.com) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: jj2baile_ (jon@moz-DCEF6040.csclub.uwaterloo.ca) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: Thiez (thiez@moz-BF669398.student.utwente.nl) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: prudhvi (prudhvi@moz-154A460A.supr.io) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: krig (krig@A2A7CF2C.5AB9C4E2.B1C414DA.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: pcdummy (quassel@moz-CF4CA865.page4me.ch) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: katis (katis@40C8AF65.EFDC2270.EE6E63A5.IP) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: h3r3tic (heretic@moz-8BC3B3DB.se) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: jakubw (ubuntu@moz-D137E450.eu-west-1.compute.amazonaws.com) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: chee (chee@moz-E5A0DD8.org) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: Fliboo (Flibo@moz-40397852.org.aalto.fi) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: CMCL_ (cmcl@moz-8C2E912C.co.uk) (concrete.mozilla.org gravel.mozilla.org)
[22:19:09] *** Quits: Luqman (laden@moz-DCEF6040.csclub.uwaterloo.ca) (concrete.mozilla.org gravel.mozilla.org)
[22:19:46] *** Joins: Kroisse (Kroisse@7CF4064D.E3B51CAE.ECA1BB11.IP)
[22:19:46] *** Joins: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr)
[22:19:46] *** Joins: gavin (gavin@moz-DB4A9C19.scl3.mozilla.com)
[22:19:46] *** Joins: dumitru (dgherman@311ED075.DD6131A9.A746F37F.IP)
[22:19:46] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[22:19:46] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[22:19:46] *** Joins: true_droid (Adium@5C7A0982.41F4CE1E.C7DB93CC.IP)
[22:19:46] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[22:19:46] *** Joins: RMF (RMF@moz-494A6C28.dsl.telepac.pt)
[22:19:46] *** Joins: Voomer (Voomer@moz-E97E8EB7.br.br.cox.net)
[22:19:46] *** Joins: MaikKlein (maik@moz-A09E278A.dip0.t-ipconnect.de)
[22:19:46] *** Joins: kini (kini@moz-92AA953A.members.linode.com)
[22:19:46] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[22:19:46] *** Joins: snearch (snearch@moz-21729AFD.pool.mediaways.net)
[22:19:46] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[22:19:46] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[22:19:46] *** Joins: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk)
[22:19:46] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[22:19:46] *** Joins: mib_ftzq4c (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[22:19:46] *** Joins: mschifer (Adium@2557E599.66715431.D25A875A.IP)
[22:19:46] *** Joins: ilyoan (ilyoan@B4104EBB.3CC170B1.1E14B209.IP)
[22:19:46] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[22:19:46] *** Joins: k00mi (koomi@moz-B054AB86.pools.arcor-ip.net)
[22:19:46] *** Joins: cr (anonymous@moz-B141BCC5.dip0.t-ipconnect.de)
[22:19:46] *** Joins: nooy (user@moz-2458675D.a146.priv.bahnhof.se)
[22:19:46] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[22:19:46] *** Joins: heftig (heftig@moz-3D6EBBD3.dip0.t-ipconnect.de)
[22:19:46] *** Joins: jhark (jhark@moz-B9920504.jhark.net)
[22:19:46] *** Joins: igl1 (igl@moz-3DA0C609.adsl.alicedsl.de)
[22:19:46] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[22:19:46] *** Joins: sam1 (sam@moz-ADDDDFB1.mc.videotron.ca)
[22:19:46] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[22:19:46] *** Joins: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org)
[22:19:46] *** Joins: anri (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net)
[22:19:46] *** Joins: mleise (marco@moz-3468AB5B.pools.arcor-ip.net)
[22:19:46] *** Joins: zxcdw (r-a@moz-C7C5467B.cust.bredband2.com)
[22:19:46] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[22:19:46] *** Joins: kimundi (kimundi@moz-F037B1AB.dip0.t-ipconnect.de)
[22:19:46] *** Joins: cdidd (cdidd@moz-106778E9.broadband.corbina.ru)
[22:19:46] *** Joins: yong (chatzilla@74DA0C97.4E87ADC2.263D9828.IP)
[22:19:46] *** Joins: rfw (rfw@moz-C65A114.rfw.name)
[22:19:46] *** Joins: ski (md9slj@moz-4BB5E0FF.studat.chalmers.se)
[22:19:46] *** Joins: cscottnet (cscott@moz-2577C94A.net)
[22:19:46] *** Joins: zheng_li (zheng_li@moz-D6711E9E.xenplanet.org)
[22:19:46] *** Joins: mark_edward (quassel@moz-6B90E517.rh.uchicago.edu)
[22:19:46] *** Joins: _1126 (1126@moz-83D60E55.lileth.net)
[22:19:46] *** Joins: pascal (pascal@moz-3A678551.pascalj.de)
[22:19:46] *** Joins: Boreeas (Boreeas@moz-F35C832D.boreeas.net)
[22:19:46] *** Joins: benh (ben@moz-4A0366D2.org)
[22:19:46] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[22:19:46] *** Joins: ion (ion@heh.fi)
[22:19:46] *** Joins: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw)
[22:19:46] *** Joins: wuehlmaus (wuehlmaus@moz-BBCFACA0.de)
[22:19:46] *** Joins: idkfa (idkfa@moz-141F54A4.krasinfo.ru)
[22:19:46] *** Joins: IdolfHatler (idolf@moz-4103EACC.pwnies.dk)
[22:19:46] *** Joins: aatch (aatch@moz-B437F499.pocketrent.com)
[22:19:46] *** Joins: gmcabrita (uid4474@moz-D8B63698.irccloud.com)
[22:19:46] *** Joins: sawrubh (uid6719@moz-D8B63698.irccloud.com)
[22:19:46] *** Joins: doy (doy@moz-5FE28A32.akrasiac.org)
[22:19:46] *** Joins: SeanTAllen_ (uid4855@moz-D8B63698.irccloud.com)
[22:19:46] *** Joins: jihyun (uid7128@moz-D8B63698.irccloud.com)
[22:19:46] *** Joins: doomlord__ (servitor@moz-8F385DB0.range109-153.btcentralplus.com)
[22:19:46] *** Joins: LimeBurst (me@247D1419.D73964AC.27A8748.IP)
[22:19:46] *** Joins: jessicah (jessicah@moz-B8A3AE25.massey.ac.nz)
[22:19:46] *** Joins: gazoombo (uid6629@moz-D8B63698.irccloud.com)
[22:19:46] *** Joins: dforsyth (dforsyth@AC76BBB4.5FDB5121.EE6E63A5.IP)
[22:19:46] *** Joins: wycats_ (uid79@moz-C944F5EC.irccloud.com)
[22:19:46] *** Joins: geomyidae__ (uid214@moz-C944F5EC.irccloud.com)
[22:19:46] *** Joins: mixi (mixi@moz-DBD8904A.org)
[22:19:46] *** Joins: decoder (quassel@moz-D7023D7D.own-hero.net)
[22:19:46] *** Joins: molnarg (darkelf@moz-A80E711.clients.your-server.de)
[22:19:46] *** Joins: DasIch (dasich@moz-5EDA591.de)
[22:19:46] *** Joins: ruediger (quassel@moz-C9B8D8D0.org)
[22:19:46] *** Joins: doomlord_ (walter@moz-8F385DB0.range109-153.btcentralplus.com)
[22:19:46] *** Joins: alexrp (zor@moz-180BED6.rfw.name)
[22:19:46] *** Joins: cyndis (cyndis@moz-FA10A1CD.fi)
[22:19:46] *** Joins: keruspe (keruspe@moz-F2539FEC.imagination-land.org)
[22:19:46] *** Joins: tristram (tristram@moz-C498CC41.eu)
[22:19:46] *** Joins: dju (dju@moz-83BD5EC.dmz.me)
[22:19:46] *** Joins: Seldaek (seld@moz-5DEA7688.ch)
[22:19:46] *** Joins: reyre (rick@B2D8AB09.33EE9F8A.1139E686.IP)
[22:19:46] *** Joins: xenocons (otk@moz-C675529E.members.linode.com)
[22:19:46] *** Joins: kaeso (kaeso@moz-F21FF626.unstable.it)
[22:19:46] *** Joins: andor (andor@518ECB3F.6B32A7A2.A2798B07.IP)
[22:19:46] *** Joins: wilfred (uid159@moz-C944F5EC.irccloud.com)
[22:19:46] *** Joins: sfackler (sfackler@moz-316FE70F.compute-1.amazonaws.com)
[22:19:46] *** Joins: toshok (toshok@moz-67C55A1F.com)
[22:19:46] *** Joins: ldlework (ldlework@6AEB83D1.B92A0FC.176AC772.IP)
[22:19:46] *** Joins: jj2baile_ (jon@moz-DCEF6040.csclub.uwaterloo.ca)
[22:19:46] *** Joins: Thiez (thiez@moz-BF669398.student.utwente.nl)
[22:19:46] *** Joins: prudhvi (prudhvi@moz-154A460A.supr.io)
[22:19:46] *** Joins: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com)
[22:19:46] *** Joins: krig (krig@A2A7CF2C.5AB9C4E2.B1C414DA.IP)
[22:19:46] *** Joins: pcdummy (quassel@moz-CF4CA865.page4me.ch)
[22:19:46] *** Joins: katis (katis@40C8AF65.EFDC2270.EE6E63A5.IP)
[22:19:46] *** Joins: h3r3tic (heretic@moz-8BC3B3DB.se)
[22:19:46] *** Joins: jakubw (ubuntu@moz-D137E450.eu-west-1.compute.amazonaws.com)
[22:19:46] *** Joins: chee (chee@moz-E5A0DD8.org)
[22:19:46] *** Joins: CMCL_ (cmcl@moz-8C2E912C.co.uk)
[22:19:46] *** Joins: Fliboo (Flibo@moz-40397852.org.aalto.fi)
[22:19:46] *** Joins: Luqman (laden@moz-DCEF6040.csclub.uwaterloo.ca)
[22:19:47] *** Quits: Boreeas (Boreeas@moz-F35C832D.boreeas.net) (Ping timeout)
[22:19:47] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Killed (gravel.mozilla.org (Nick Collision)))
[22:19:47] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[22:19:48] *** Quits: dumitru (dgherman@311ED075.DD6131A9.A746F37F.IP) (Client exited)
[22:20:48] *** bent is now known as IRCMonkey14819
[22:20:52] *** Quits: Guest (textual@34641662.FB4DE631.66C78B76.IP) (Quit: Textual IRC Client: www.textualapp.com)
[22:21:08] *** Quits: carter (carter@moz-BDFE46F6.nyc.biz.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[22:21:11] *** Joins: a__ (a__@moz-250D9B4.nycmny.fios.verizon.net)
[22:21:14] *** Joins: Boreeas (Boreeas@moz-F35C832D.boreeas.net)
[22:21:38] *** Quits: MaikKlein (maik@moz-A09E278A.dip0.t-ipconnect.de) (Ping timeout)
[22:21:38] *** Quits: alexrp (zor@moz-180BED6.rfw.name) (Ping timeout)
[22:22:06] *** Joins: dumitru (dgherman@311ED075.DD6131A9.A746F37F.IP)
[22:23:01] *** Joins: EXetoC (ex@moz-C741B177.customer.t3.se)
[22:23:14] *** Joins: alexrp (zor@moz-180BED6.rfw.name)
[22:23:20] *** IRCMonkey14819 is now known as bent
[22:24:49] *** Quits: snearch (snearch@moz-21729AFD.pool.mediaways.net) (Quit: Verlassend)
[22:24:54] *** kimundi is now known as zz_kimundi
[22:27:39] <nmatsakis> graydon: yes, but I have to go this sec, can we discuss in 30-45 mins?
[22:27:55] <nmatsakis> graydon: ping
[22:28:00] <graydon> nmatsakis: pong
[22:28:16] *** Joins: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP)
[22:28:16] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/hm8R4g
[22:28:16] *** Parts: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP) ()
[22:28:18] <nmatsakis> graydon: ok, back, sorry for the resent msg there.
[22:28:25] <nmatsakis> graydon: anyway, yes, so I think I know what the problem is...
[22:28:36] <graydon> ok?
[22:28:49] <nmatsakis> when I was designing the dataflow pass, I made the (erroneous) assumption that the node ids for a particular item were densely packed
[22:29:01] <nmatsakis> therefore, it computes the min and max id and then allocates all the data for the fn in one swoop
[22:29:08] <graydon> oh? huh
[22:29:11] <nmatsakis> however, I have since observed that due to macro expansion, this is very much not true.
[22:29:18] <nmatsakis> I have a fixed version,
[22:29:41] <nmatsakis> but it's ... not quite ready, because I was introducing a control-flow graph as well,
[22:29:46] <graydon> could you point out the .. smallest change required there? I think it's interacting badly with conservative retain-too-much behavior in the 32bit gc
[22:29:53] <nmatsakis> yes, so what I was going to say is
[22:29:57] <nmatsakis> I was trying to do things in the "right" way
[22:30:01] <nmatsakis> but if this issue is blocking,
[22:30:01] <graydon> sure
[22:30:04] <nmatsakis> I think I can prepare a much more targetd ptach
[22:30:06] <nmatsakis> *patch
[22:30:14] <nmatsakis> or you can :) the short version 
[22:30:15] <graydon> well .. it's one of a number of issues blocking. a targeted patch would certainly be a step forward, yes
[22:30:23] *** Quits: KindOne (KindOne@moz-60F9A56E.dynamic.ip.windstream.net) (Ping timeout)
[22:30:24] <nmatsakis> is going to be introducing a hashtable that maps from node_id to dataflow_id
[22:30:24] <graydon> if you can just point to where, I can hack something up
[22:30:27] <graydon> sure
[22:30:30] <nmatsakis> and the dataflow_id will be dense
[22:30:58] <nmatsakis> ok, probably best if you do it, both because I've got too much on my plate as is and because it's one more person who's seen the code in question :)
[22:31:08] <graydon> sure
[22:31:14] <nmatsakis> graydon: so, the code is middle::dataflow.rs,
[22:31:15] <graydon> where abouts is this?
[22:31:20] *** Joins: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP)
[22:31:20] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/8cjlbQ
[22:31:21] *** Parts: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP) ()
[22:31:38] <nmatsakis> graydon: let me just open that file up and try to give you a few pointers
[22:31:44] <graydon> k
[22:31:47] <graydon> thanks!
[22:31:50] <strcat> removing each from vectors will be "fun" ;p
[22:31:55] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:31:56] <nmatsakis> don't recall if I commented it very well :)
[22:32:11] <nmatsakis> graydon: ok, so if you look in the struct DataFlowContext,
[22:32:24] <nmatsakis> you'll see three fields `gens`, `kills`, and `on_entry`
[22:32:40] <nmatsakis> those are the bit vectors for all the ids in the function
[22:32:51] <nmatsakis> if you look up a bit, you'll see that there is e.g. words_per_id
[22:32:58] <nmatsakis> that indicates how many uints we use per id
[22:33:04] <nmatsakis> so if you want to find the bitvector for id #22,
[22:33:16] <nmatsakis> you would lookup somtehing like gens.slice(22*words_per_id, 23*words_per_id)
[22:33:30] <nmatsakis> graydon: in particular, that range is computed by `compute_id_range()`
[22:33:40] <bblum> okay wee who wants to help me with a borrow check error
[22:33:47] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[22:33:47] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/8cjlbQ
[22:33:47] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[22:33:50] <nmatsakis> bblum: ooh! me! me!
[22:33:54] <strcat> heh
[22:34:18] <bblum> http://pastebin.mozilla.org/2517113
[22:34:35] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[22:34:37] <bblum> trying to put an option of a borrowed pointer into a struct to pass to a closure that takes the struct by reference
[22:35:22] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: WeeChat 0.3.8)
[22:35:31] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[22:35:45] <bblum> separating it out into named intermediaries doesn't help
[22:35:49] <nmatsakis> graydon: anyway, the fix imagine will take two parts: first, we'll have to build up the hash mapping from node_id -> dataflow_id during the "gather loans" phase,
[22:36:01] <nmatsakis> graydon: then we'll have to modify `compute_id_range` to lookup the id in this hashtable
[22:36:03] *** Joins: seth (seth@moz-D840E602.dsl.static.sonic.net)
[22:36:17] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:36:25] <nmatsakis> graydon: and they'll be some annoying period where you have to keep adding ids for different kinds of things in the table until you've got them all...
[22:36:40] <nmatsakis> graydon: I think we'll need to have the id of every expr and pattern that occurs within the fn
[22:36:47] <nmatsakis> graydon: anyway, that's enough for a start, as I said, ping me later.
[22:36:54] <nmatsakis> bblum: ok, let me take a look
[22:37:33] <nmatsakis> bblum: doesn't look like those line numbers correspond?
[22:37:40] <bblum> oops
[22:37:45] <bblum> i deleted a comment in the middle
[22:37:49] <bblum> one sec
[22:37:59] <nmatsakis> bblum: also, this is not the borrow checker (just fyi) but the region inferencer (not that it matters)
[22:38:08] <bblum> i see, yeah
[22:39:04] <nmatsakis> bblum: I'm pretty sure this is the standard bug due to the fact that type parameters must be invariant
[22:39:10] <nmatsakis> bblum: at the moment, anyhow.
[22:39:10] <bblum> http://pastebin.mozilla.org/2517116 ok, here it is with line numbers matching, the type of condvar visible, and intermediaries named
[22:39:41] <bblum> ...what's the bug?
[22:40:21] * strcat is starting to hate closures because of the wonderful borrowck errors they lead to
[22:40:25] *** Quits: seth (seth@moz-D840E602.dsl.static.sonic.net) (Ping timeout)
[22:40:34] *** Joins: SiegeLord (siege@moz-CAF07B4C.hsd1.ma.comcast.net)
[22:41:08] <strcat> nmatsakis: isn't this because of the blk parameter taking &?
[22:41:12] <bblum> nmatsakis: do you mean lifetime parameters must be invariant?
[22:41:14] <nmatsakis> strcat: no.
[22:41:16] <nmatsakis> bblum: no.
[22:41:21] <nmatsakis> bblum: I mean *type parameters* must be invariant.
[22:41:26] <nmatsakis> bblum: in this case, Option<T>
[22:41:52] <nmatsakis> bblum: so, what you want is to have the 'self of the semaphore be the intersection of the two lifetimes...
[22:42:00] <nmatsakis> bblum: ...but it doesn't seem to be inferring that.
[22:42:21] <nmatsakis> bblum: I'm not yet 100% sure if it should be :)
[22:42:34] <bblum> what reason would there be to not?
[22:42:35] <bblum> ?
[22:44:23] <bblum> (like, could that be not safe sometimes?)
[22:45:02] <nmatsakis> bblum: it seems like it's failing to infer where it should succeed to me
[22:45:52] <nmatsakis> bblum: in patricular I don't quite understand the origin of the first constraint that it lists
[22:46:34] <nmatsakis> bblum: I wonder if we can reproduce this in a smaller test
[22:47:08] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[22:47:28] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Textual IRC Client: www.textualapp.com)
[22:47:42] <bblum> i could get it in less lines of code for sure, but i dunno if i could get it logically simpler
[22:47:55] <bblum> i don't really understand what it means that type parameters have to be invariant
[22:48:04] <bblum> or how that's relevant here
[22:48:39] *** Joins: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com)
[22:49:30] <bblum> i got what appear to be similar errors in arc.rs at the same time as i changed the data structure
[22:49:40] <bblum> on a bunch of code that didn't previously error; presumably this is due to the Option
[22:49:51] *** Joins: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP)
[22:50:05] <nmatsakis> bblum: I made a very small test now
[22:50:07] <nmatsakis> bblum: I'll take a look
[22:50:22] <bblum> but i bet if i define my own non-polymorphic option enum, that will solve this
[22:50:29] <nmatsakis> maybe
[22:51:11] <nmatsakis> bblum: ah, I think I get it. I think the problem is because of the Option<&'self Semaphore>,
[22:51:26] <nmatsakis> bblum: which means that 'self appears in an invariant location,
[22:51:35] <bblum> i figured it involved that
[22:51:44] <nmatsakis> bblum: which then means that it is not permitted to bind 'self to the intersection of the two, the two lifetimes must be equal.
[22:51:56] <bblum> so... that disables sub-lifetimeing
[22:51:58] <bblum> when i use it there?
[22:52:09] *** cscottnet is now known as cscottnet_away
[22:52:31] *** Joins: seth (seth@moz-D840E602.dsl.static.sonic.net)
[22:53:05] <nmatsakis> bblum: yes. and indeed making a non-polymorphic enum fixes it.
[22:53:07] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[22:53:16] <bblum> is there an issue open for this?
[22:53:19] <nmatsakis> bblum: yes.
[22:53:48] <nmatsakis> bblum: https://github.com/mozilla/rust/issues/3598
[22:54:00] <bblum> found it already
[22:54:06] <nmatsakis> bblum: consensus last time we brought this up was that we were going to generalize the inference we use for regions...
[22:58:36] *** Quits: lmandel (lmandel@556E85CD.E855F8D7.412CF160.IP) (Ping timeout)
[22:58:58] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[22:59:26] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[23:01:05] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[23:02:59] *** Joins: Diamond (dick@moz-625C0DAF.ks.ok.cox.net)
[23:03:19] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[23:03:39] *** Joins: lmandel (lmandel@556E85CD.E855F8D7.412CF160.IP)
[23:04:24] *** Quits: Jesin (Jessin_@moz-157A63DD.cc.lehigh.edu) (Ping timeout)
[23:04:44] *** Quits: EXetoC (ex@moz-C741B177.customer.t3.se) (Quit: WeeChat 0.4.1)
[23:05:23] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[23:06:09] *** Joins: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP)
[23:06:17] *** Joins: mib_h6e5c9 (Mibbit@moz-7620D22B.retail.telecomitalia.it)
[23:06:53] *** Parts: Diamond (dick@moz-625C0DAF.ks.ok.cox.net) ()
[23:07:27] *** Joins: Diamond (dick@moz-625C0DAF.ks.ok.cox.net)
[23:07:38] *** Quits: joelteon (joel@moz-317E8D0C.io) (Ping timeout)
[23:07:50] *** Quits: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP) (Input/output error)
[23:08:15] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[23:08:35] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[23:08:49] *** Quits: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP) (Ping timeout)
[23:09:17] <steven_is_false> rusti: 2
[23:09:17] -rusti- 2
[23:09:24] *** Joins: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP)
[23:10:34] *** Joins: joelteon (joel@moz-317E8D0C.io)
[23:10:34] *** Quits: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP) (Input/output error)
[23:11:00] *** Joins: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP)
[23:11:11] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[23:12:37] *** Quits: martin (martin@BC6DAA0E.F689A8C9.EB438161.IP) (Ping timeout)
[23:14:04] *** Quits: mib_h6e5c9 (Mibbit@moz-7620D22B.retail.telecomitalia.it) (Quit: http://www.mibbit.com ajax IRC Client)
[23:17:09] *** Joins: martin (martin@63686BC7.F689A8C9.EB438161.IP)
[23:17:44] *** Quits: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP) (Connection reset by peer)
[23:17:57] *** Quits: jed (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[23:21:27] *** Joins: dbaupp (Thunderbir@moz-73E90475.lns20.syd6.internode.on.net)
[23:23:47] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[23:24:15] *** Quits: dbaupp (Thunderbir@moz-73E90475.lns20.syd6.internode.on.net) (Quit: dbaupp)
[23:24:25] *** Joins: dbaupp (Thunderbir@moz-73E90475.lns20.syd6.internode.on.net)
[23:24:43] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[23:24:43] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/U-2_4g
[23:24:43] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[23:24:44] *** Quits: mib_ftzq4c (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[23:25:19] *** Joins: Jesin (Jessin_@moz-157A63DD.cc.lehigh.edu)
[23:25:34] <dbaupp> graydon: are you the right person to review https://github.com/mozilla/rust/pull/7086 ?
[23:25:36] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[23:25:44] <graydon> dbaupp: ping
[23:25:54] <dbaupp> graydon: pong
[23:26:01] <graydon> oh, I was just about to ask about that
[23:26:15] <graydon> and was going to r+ if I could figure out why there are so many ~"" => @"" changes
[23:26:26] <graydon> the @~"" => @"" changes are clear wins
[23:26:31] <graydon> the others .. unclear to me?
[23:26:56] <dbaupp> most of the ~"" => @"" changes are because they're actually `let a = ~""; ... @a`
[23:27:20] <graydon> hm?
[23:27:22] <dbaupp> (the @~" was done with sed, and ~" was done when the compiler complained.)
[23:27:34] *** Joins: Sorella (queen@B12A78F5.BA14766C.95C8B7C6.IP)
[23:27:40] *** Quits: Jesin (Jessin_@moz-157A63DD.cc.lehigh.edu) (Ping timeout)
[23:27:41] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[23:27:41] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/-4JKYw
[23:27:41] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[23:27:44] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[23:27:44] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/okB_Jg
[23:27:44] <ghrust> 13rust/06auto 14a159f85 15Michael Sullivan: Properly translate calls to default methods in a number of cases. Closes #4350.
[23:27:44] <ghrust> 13rust/06auto 145835158 15Michael Sullivan: Drop some dead method handling code.
[23:27:44] <ghrust> 13rust/06auto 1436e3d64 15Michael Sullivan: Fix a lot of the handling of default methods and type parameters. Closes #4099, #4102.
[23:27:46] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[23:27:53] <aatch> graydon, I noticed that a lot.
[23:27:58] <graydon> I mean changes in like https://github.com/huonw/rust/commit/7f0856ff57590ae85dbb3c2b247f3a06398ce35b and such
[23:28:03] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[23:28:12] <aatch> where a ~str was allocated in order to put it in a @-box
[23:28:37] <dbaupp> as in, the ~"" is going to become a @~"". the @-boxing just happens later.
[23:29:00] <dbaupp> https://github.com/huonw/rust/commit/7f0856ff57590ae85dbb3c2b247f3a06398ce35b#L0R84
[23:29:46] <graydon> right, but why does the ~"-" turn into a @"-" there as well?
[23:30:20] <dbaupp> because the source filename ended up as @str too
[23:30:58] <dbaupp> I'm not exactly sure why this was necessary, but there where quite a few /* bad */copy loc.file.name.
[23:31:00] <strcat> shouldn't they just be &'static str?
[23:31:10] <strcat> to_managed on &'static str won't be any slower than @"foo"
[23:31:13] <strcat> it's what happens anyway
[23:31:35] <graydon> strcat: not all filenames are static
[23:31:47] <graydon> but ok, r+ anyway, this will bitrot fast and it looks good
[23:32:18] <strcat> oh I see the function signature changed
[23:32:26] * strcat was looking too far down
[23:32:58] <dbaupp> yay!
[23:33:54] <graydon> acrichto: very nice work on rusti, btw
[23:34:27] <acrichto> graydon: thanks!
[23:35:24] <aatch> graydon, I'm guessing you can't up the priority after approval?
[23:35:36] <graydon> yes, sure
[23:35:58] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[23:36:04] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Ping timeout)
[23:36:21] <aatch> I just figure that a PR like that, it's a bigger hassle for dbaupp to rebase than somebody else.
[23:36:38] <graydon> there should be no collision with extra::par in the queue
[23:36:55] <graydon> the only other one is sully's default methods which are currently landing (hope hope)
[23:36:56] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[23:37:00] <aatch> graydon, ok then. nvm.
[23:37:15] * strcat really, really wants default methods for iterators
[23:37:28] <dbaupp> if something else gets approved with a lower issue number, that goes in front, doesn't it?
[23:37:36] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[23:37:38] <strcat> if they have the same priority
[23:37:44] <sully> ok
[23:37:47] * sully dives into the metadata
[23:37:54] <sully> if I don't come back, tell my family that I loved them
[23:38:02] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[23:38:19] *** Joins: dylukes (dylukes@moz-6F76CDFE.wireless.pitt.edu)
[23:38:29] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[23:38:52] <graydon> dbaupp: oh, yes
[23:38:58] *** Joins: Guest__ (textual@moz-E64A54F3.nyc.res.rr.com)
[23:39:07] <graydon> dbaupp: I will give it a priority bump
[23:39:37] <strcat> dbaupp: evalbot updated itself finally ;p
[23:39:48] <dbaupp> strcat: :D
[23:40:16] <dbaupp> graydon: thanks! hopefully defaults methods lands, and this doesn't conflict...
[23:40:25] <graydon> I hope so too
[23:40:29] <strcat> graydon: https://github.com/mozilla/rust/pull/7079 r? pretty minor version bump, just fixes 1 bug
[23:40:30] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[23:41:01] <strcat> for some reason they changed a lot of whitespace ;p
[23:41:15] <graydon> I'm reading correctly that the android problem is not related to this PR?
[23:41:22] <strcat> graydon: yeah it exists in incoming too
[23:41:27] <strcat> was waiting to find that out
[23:41:30] <aatch> sully, I just want to say good luck, we're all counting on you.
[23:42:09] <graydon> r+
[23:44:15] *** Quits: SiegeLord (siege@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[23:45:14] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ChatZilla 0.9.90-rdmsoft [XULRunner 18.0.2/20130201065344])
[23:45:37] <yichoi> strcat: any idea to solve jemalloc on android ?
[23:45:59] *** Quits: Nisstyre (wes@moz-FD86289.netflash.net) (Quit: Leaving)
[23:46:07] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[23:46:34] *** Quits: martin (martin@63686BC7.F689A8C9.EB438161.IP) (Ping timeout)
[23:47:24] <nmatsakis> gazoombo: back now
[23:47:31] <nmatsakis> oops, graydon ^
[23:47:53] <graydon> nmatsakis: cool. I'm still fighting other minor hiccups but was just about to look into that.
[23:48:39] <nmatsakis> graydon: ok, I was thinking, in the first pass of the borrow checker ("gather loans") there is already code that adds various ids to the id range. Today that just updates the min/max. Probably the right thing to do is to replace the uses of id_range with a new id_map
[23:48:47] <strcat> yichoi: not sure. it seems like it can't work on android without prefixes
[23:48:59] <strcat> yichoi: I think for MSVC and android we need to prefix it with je_
[23:49:10] <strcat> but elsewhere we shouldn't
[23:49:18] <nmatsakis> graydon: of course the old scheme was much more forgiving of errors, so it may be missing a few ids that never got added to the id range
[23:49:38] <graydon> nmatsakis: I think I don't actually understand what's going on in there at all
[23:49:38] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[23:49:57] <nmatsakis> graydon: ok, when you're finish with other things, I can explain more...
[23:50:02] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[23:50:13] <graydon> nmatsakis: now's ok. is it really a bitset?
[23:50:52] <strcat> yichoi: https://bugzilla.mozilla.org/show_bug.cgi?id=559263
[23:50:57] <nmatsakis> graydon: yes, the dataflow tracks 3 bitsets per id---gen, kill, and on_entry
[23:51:04] <nmatsakis> graydon: each bit represents a loan (in this case)
[23:51:07] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[23:51:17] <nmatsakis> graydon: that may or may not have occurred at a particular point during execution
[23:51:18] <graydon> ok. so bits_per_id is like .. number-of-possible-loans-in-the-function?
[23:51:22] <nmatsakis> yes.
[23:51:36] <graydon> and the id is the node associated with the bitset
[23:51:45] <nmatsakis> yes.
[23:51:50] *** Quits: dylukes (dylukes@moz-6F76CDFE.wireless.pitt.edu) (Quit: ["Textual IRC Client: www.textualapp.com"])
[23:51:54] <nmatsakis> well, I think yes? I wouldn't express it that way
[23:51:57] <yichoi> strcat: yes, i've read this url and tried but not sure how to exactly apply lasted jemalloc
[23:52:07] <nmatsakis> graydon: the id is some point in the control flow, e.g. an expr
[23:52:11] <nmatsakis> graydon: and associated with the id are the 3 bitsets
[23:52:20] <graydon> right, yeah
[23:52:28] <graydon> 3 entries in the bitset-vectors
[23:52:29] <nmatsakis> graydon: `gen` is the set of loans that the id *generates*, `kill` is the set that it removes from scope,
[23:52:38] <nmatsakis> graydon: and `on_entry` are the set that are still in scope on entry
[23:52:42] <graydon> ok
[23:52:50] <nmatsakis> graydon: those are the traditional names (I didn't invent them)
[23:53:07] <nmatsakis> graydon: probably it would be better, in retrospect, to represent gen in a more sparse way, but anyhow.
[23:53:13] <nmatsakis> though may not.
[23:53:30] <nmatsakis> yeah, so we represent all the gen bitsets in one big ~[uint]
[23:53:34] <nmatsakis> and all the kill bitsets in another
[23:53:35] <graydon> so the problem, you think, is that you're storing loans by just indexing into the bitset by node-number
[23:53:38] <graydon> bitset-vector
[23:53:44] <nmatsakis> yes, basically the id-range gets *huge*
[23:53:50] <graydon> and that falls down if the node-number is very large
[23:53:52] <graydon> ok
[23:53:52] <xenocons> debian installed
[23:53:59] <nmatsakis> graydon: I mean, it'd be fine if that really *were* the range of useful ids
[23:54:01] <graydon> (large / sparse)
[23:54:02] <xenocons> excited to get rust setup in linux :^)
[23:54:07] <graydon> sparseness is the problem
[23:54:08] <nmatsakis> graydon: right, but it's sparse.
[23:54:24] <graydon> so you just want a map from nodeid <-> some-actually-sparse-counter
[23:54:28] <nmatsakis> yes
[23:54:31] <graydon> er, actually-dense
[23:54:36] <nmatsakis> er, yes
[23:54:42] <nmatsakis> I originally hoped to avoid this map just to spare the lookup,
[23:54:47] <nmatsakis> but obviously this particular scheme isn't working out so well
[23:54:56] <nmatsakis> the newer control-flow-graph-based code I had addresses this nicely,
[23:55:04] <nmatsakis> but it's not really ready yet
[23:55:22] *** Quits: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net) (Quit: computer sleeping)
[23:55:26] <nmatsakis> I certianly observed during testing very large id ranges in practice
[23:55:29] <graydon> I'm curious about rounding up to a multiple of uint as well (rather than say multiple of u8) but I guess this is likely a speed win in the dataflow
[23:55:36] <graydon> ok
[23:56:00] <nmatsakis> that might be worth experimenting with, but I'm pretty sure it'd be a second order effect
[23:56:03] <nmatsakis> compared to the sparse id range
[23:56:03] <graydon> yeah
[23:56:05] <nmatsakis> I considered it
[23:56:09] <nmatsakis> I also considered u16
[23:56:13] <nmatsakis> which seemed like a reasonable compromise...
[23:56:23] * nmatsakis shrugs
[23:56:27] <graydon> I think the sparse id range is only hurting here because the gc is not so great at collecting stuff immediately, especially if there's a lot of recursion and transiently held @-boxes
[23:56:30] <nmatsakis> that'd be worth gathering data on
[23:56:40] <nmatsakis> graydon: yeah, and unfortuntaely the data flow stuff winds up in a box,
[23:56:51] <nmatsakis> graydon: because the visitor (with its boxed fns) kind of requires it
[23:56:56] <graydon> yeah. what are the odds we can fix that?
[23:57:12] <graydon> if default methods work as of this week or next (yay sully!) maybe we can overhaul the visitor in some cases?
[23:57:27] <nmatsakis> graydon: pretty good? sully's work is making good strides, and then there is issue #7081
[23:57:33] <graydon> there are a few very-high-frequency visitors in the compiler that are ... not kind to the gc :(
[23:57:52] <steven_is_false> What happened to the to_bytes string method?
[23:58:39] <nmatsakis> graydon: certainly we need cross-crate default methods to work, which don't work today, as the visitor is in the syntax crate
[23:58:48] <nmatsakis> but I think that's what sully is looking at now
[23:58:48] <graydon> mhm
[23:58:51] <graydon> ok
[23:59:01] <nmatsakis> anyhow
[23:59:18] <graydon> actually .. is that true? we could surely define the "new" visitor (trait) in librustc for now
[23:59:23] <graydon> and move it to libsyntax when fixes
[23:59:24] <graydon> d
[23:59:43] <nmatsakis> I was just thinking the same thing :)
