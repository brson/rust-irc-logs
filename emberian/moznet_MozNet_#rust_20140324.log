[00:00:00] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:00:11] *** Joins: Kazimuth (james@moz-F82198F6.hsd1.ma.comcast.net)
[00:00:47] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[00:01:07] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[00:03:47] *** Joins: ekwan (ekwan@moz-6635E2EF.hsd1.ca.comcast.net)
[00:04:04] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[00:04:24] *** Quits: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:04:29] *** Parts: ekwan (ekwan@moz-6635E2EF.hsd1.ca.comcast.net) ()
[00:05:17] *** Joins: eternaleye (eternaleye@D55ECA0A.3FAF8C6D.B8C1C2E1.IP)
[00:07:41] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Input/output error)
[00:08:16] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[00:09:57] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[00:14:01] *** Joins: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net)
[00:14:07] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[00:15:32] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[00:17:04] *** Joins: lpy (lpy@186A8F3A.F09091A8.1348A864.IP)
[00:17:15] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[00:19:31] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:20:00] *** Joins: sunfish (chatzilla@8F761026.B5EF4AF6.E96CA9D8.IP)
[00:21:07] *** Joins: cschneid (cschneid@moz-A708F11D.hlrn.qwest.net)
[00:21:37] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:22:29] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[00:24:54] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[00:25:15] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[00:25:29] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[00:25:29] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[00:26:14] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[00:26:26] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[00:27:10] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[00:27:16] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[00:28:01] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[00:28:22] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[00:28:38] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[00:28:38] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[00:29:12] *** Quits: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net) (Input/output error)
[00:29:23] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[00:29:38] *** Joins: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net)
[00:29:43] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[00:30:27] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[00:30:34] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[00:30:58] <meyer> So, the Grapheme Break Property Table document I'm parsing (http://www.unicode.org/Public/UCD/latest/ucd/auxiliary/GraphemeBreakProperty.txt)
[00:31:18] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[00:31:19] <meyer> Lists D800..DFFF as "Control", but rust and Wikipedia are telling me these are never valid characters
[00:31:23] *** Quits: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net) (Ping timeout)
[00:31:39] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[00:31:41] <meyer> So I can't use them in the sorted array of (char, char, u8)
[00:31:57] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[00:31:57] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[00:32:24] <andor> can i not store closures in structs? what the heck?
[00:32:28] <meyer> Should I just remove them from the table and assume that no query will ever be made for those codepoints?
[00:32:42] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[00:32:51] <andor> rusti: struct Foo { bar: || }
[00:32:52] -rusti- <anon>:10:27: 10:29 error: missing lifetime specifier
[00:32:52] -rusti- <anon>:10         struct Foo { bar: || }
[00:32:52] -rusti-                                     ^~
[00:32:52] -rusti- error: aborting due to previous error
[00:32:52] -rusti- application terminated with error code 101
[00:32:56] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[00:33:06] <sfackler> struct Foo<'a> { bar: 'a || }
[00:33:21] <andor> why is that necessary? 
[00:33:22] *** Quits: Guest (textual@3E0487DF.D8252BC.9532F1CE.IP) (Quit: Textual IRC Client: www.textualapp.com)
[00:33:24] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[00:33:41] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[00:33:47] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[00:34:03] <sfackler> the closure doesn't own the things it closes over so you need to make sure that instaces of Foo don't outlive the lifetimes of things that bar closes over
[00:34:32] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[00:34:41] <sfackler> e.g. this is illegal: fn foo() -> Foo { let i = 1; Foo { bar: || { println!("{}
[00:34:47] <sfackler> ", i) } } }
[00:34:53] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[00:35:01] <kimundi> andor: Because a stack closure can capture thing on the stack, which means those captures have a lifetime for which they are valid, which means that lifetime needs to be declared as a generic parameter
[00:35:37] *** Quits: kris (kris@moz-147EE6DF.diku.dk) (Ping timeout)
[00:35:38] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Connection reset by peer)
[00:35:44] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[00:35:48] <kimundi> Just like for references like in `struct Foo<'a> { p: &'a uint }` for example
[00:37:04] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[00:37:25] *** Quits: nkoep (nik@moz-8846C716.pool.mediaways.net) (Client exited)
[00:37:28] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[00:37:32] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[00:39:41] *** Joins: clusterfoo (Mibbit@moz-F8B381B4.hm.shawcable.net)
[00:40:03] *** Joins: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca)
[00:41:25] <SiegeLord> Hmm... that documentation change was nearly a week ago
[00:41:48] <SiegeLord> Maybe Hans isn't aware of it
[00:42:20] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[00:42:43] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[00:42:53] <SiegeLord> hansjorg: Are you the rust-ci person? The doc upload script needs to be updated in response to https://github.com/mozilla/rust/pull/12946
[00:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:44:08] <meyer> rusti: '\ud800'
[00:44:08] -rusti- <anon>:10:12: 10:16 error: illegal numeric character escape
[00:44:08] -rusti- <anon>:10         '\ud800'
[00:44:08] -rusti-                      ^~~~
[00:44:09] -rusti- application terminated with error code 101
[00:44:30] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[00:44:39] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[00:44:40] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[00:44:41] *** ChanServ sets mode: +ao brson brson
[00:44:59] <meyer> rusti: ::std::char::from_u32(0xd800)
[00:45:00] -rusti- None
[00:45:36] <meyer> rusi: ::std::char::from_u32(0xdfff)
[00:46:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:47:39] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[00:47:51] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[00:49:48] *** Quits: lpy (lpy@186A8F3A.F09091A8.1348A864.IP) (Client exited)
[00:50:05] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[00:50:15] *** Joins: lpy (lpy@186A8F3A.F09091A8.1348A864.IP)
[00:50:36] *** Quits: lpy (lpy@186A8F3A.F09091A8.1348A864.IP) (Connection reset by peer)
[00:54:08] *** Joins: Havvy (Havvy@moz-4FE57F72.hsd1.wa.comcast.net)
[00:54:35] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[00:56:33] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[00:57:02] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[00:58:42] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[00:59:49] *** Quits: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca) (Ping timeout)
[01:00:38] *** Joins: bleibig (bleibig@moz-B4D9C5AF.hsd1.ca.comcast.net)
[01:00:48] *** Joins: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net)
[01:02:20] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[01:02:29] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[01:02:42] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[01:03:07] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:04:13] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[01:04:56] *** Quits: aurynj (Eon@C498BDEC.C264657C.C6282BC4.IP) (Ping timeout)
[01:05:03] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:05:38] <SiegeLord> Hmm... can you make a test that tests compilation failure?
[01:05:51] *** Joins: lpy (lpy@186A8F3A.F09091A8.1348A864.IP)
[01:08:26] *** kimundi is now known as zz_kimundi
[01:11:35] *** Joins: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca)
[01:12:53] <Kazimuth> quick question: what's the difference between Vec<a> and ~[A]? I see lots of things mentioning it but I can't find the original post/PR/etc
[01:13:14] <Kazimuth> *Vec<A>
[01:13:34] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Ping timeout)
[01:13:38] *** Joins: kris (kris@moz-8CA26176.dk.customer.tdc.net)
[01:13:57] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[01:14:18] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[01:16:38] *** Joins: dougxxx (dougxxx@moz-2801788.perm.iinet.net.au)
[01:17:58] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[01:17:58] *** ChanServ sets mode: +ao brson brson
[01:17:58] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[01:19:29] *** Quits: kris (kris@moz-8CA26176.dk.customer.tdc.net) (Ping timeout)
[01:19:38] <aatch> SiegeLord, is this for a rustc test or your own test?
[01:19:49] <SiegeLord> My own
[01:19:54] *** Quits: lpy (lpy@186A8F3A.F09091A8.1348A864.IP) (Client exited)
[01:20:07] <aatch> SiegeLord, then not using the standard testing framework.
[01:20:15] <SiegeLord> That's a shame
[01:20:24] <aatch> SiegeLord, well, if it can't parse, it can't compile
[01:20:29] <SiegeLord> I wonder if it's even possible
[01:20:41] <SiegeLord> In this case, it doesn't type check
[01:20:49] *** Joins: gwty (gwtypc@6FD8EC9F.DA4EE100.BD94A9D5.IP)
[01:20:51] <aatch> SiegeLord, same problem.
[01:21:34] <nrc> Kazimuth: [A} is disappearing, but will return, use Vec<A> now
[01:21:36] <SiegeLord> I guess I'll have to make up my own system eventually
[01:23:50] *** Quits: kanru (kanru@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[01:24:11] <Kazimuth> nrc: okay, thanks
[01:24:26] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:25:09] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[01:25:31] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[01:26:37] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:27:01] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[01:27:14] *** Joins: kris (kris@moz-8CA26176.dk.customer.tdc.net)
[01:27:26] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[01:27:29] *** Quits: mye (mye@moz-E368405.dip0.t-ipconnect.de) (Quit: So long, and thanks for all the fish!)
[01:27:34] *** Quits: fournm (Aria@moz-ABB60BA0.austin.res.rr.com) (Quit: Leaving)
[01:28:49] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[01:29:00] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[01:29:06] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[01:29:20] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[01:29:56] *** Quits: kris (kris@moz-8CA26176.dk.customer.tdc.net) (Ping timeout)
[01:31:03] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[01:31:32] *** Quits: LU324 (asdf@moz-864C7465.dyn.embarqhsd.net) (Ping timeout)
[01:34:21] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[01:35:56] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[01:37:57] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[01:40:36] *** Joins: Mathieu (cicak@420C86E4.9C1E3043.FBF02BB8.IP)
[01:41:09] *** Quits: blank_name (blank_name@AD525492.9285D4F9.93A5C78C.IP) (Ping timeout)
[01:43:17] <kvanb> 64-bit windows rust build still chugging along!!
[01:43:53] *** Quits: IanCormac84 (User@841D33B0.2A8D8854.67DFF8B4.IP) (Ping timeout)
[01:44:05] *** Joins: Titof (Titof@moz-EAAEA701.w81-248.abo.wanadoo.fr)
[01:44:32] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:44:51] *** Joins: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net)
[01:45:11] *** Quits: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net) (Quit: Leaving...)
[01:45:20] *** Joins: IanCormac84 (User@96BBDB32.2A8D8854.67DFF8B4.IP)
[01:45:23] *** Quits: listboss (listboss@moz-CC5410C2.hsd1.ca.comcast.net) (Quit: listboss)
[01:46:23] *** Quits: Kazimuth (james@moz-F82198F6.hsd1.ma.comcast.net) (Quit: gas leak)
[01:46:57] *** Joins: kris (kris@moz-6D20263F.fullrate.dk)
[01:48:02] <meyer> Alright. Grapheme cluster iterator is written and compiles. (not tested yet, rustc still building)
[01:48:10] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:51:22] <aatch> meyer, why are you developing it in-tree?
[01:51:41] <meyer> I wanted to familiarize myself with the codebase anyway
[01:51:56] <meyer> Is that not normally how people submit additions to the standard library?
[01:52:08] <aatch> meyer, your cycle times will be much better if you do the bulk out-of-tree and then integrate later
[01:52:26] <aatch> unless you need stuff internal to the library, it's just more efficient.
[01:52:40] <SiegeLord> I may have managed to hijack Rust's aliasing prevention to deal with aliasing problems with matrix algebra
[01:52:41] <meyer> That's a good point
[01:53:25] <SiegeLord> If there's a possibility of aliasing problems, you go through &mut and let Rust prevent errors... otherwise you go through & and use internal mutability
[01:53:26] <meyer> In this case, doing it externally would have meant duplicating code in unicode.py / unicode.rs. It still might have been a better strategy, though
[01:53:32] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[01:53:59] <meyer> aatch: Can I #[allow(non_camel_case_types)] to make a kinda hacky thing work?
[01:54:12] *** Quits: clusterfoo (Mibbit@moz-F8B381B4.hm.shawcable.net) (Quit: http://www.mibbit.com ajax IRC Client)
[01:54:19] *** Joins: ganitsu (ganitsu@moz-9B731C8A.dialup.adsl.anteldata.net.uy)
[01:54:24] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[01:55:08] <aatch> meyer, depends on what it is, but if you restrict it to the smallest scope possible, I don't see why not.
[01:55:15] *** Quits: ganitsu (ganitsu@moz-9B731C8A.dialup.adsl.anteldata.net.uy) (Quit: WeeChat 0.4.3)
[01:55:31] <meyer> The file I'm parsing for the property ranges has "Regional_Indicator" as a possible property value (all the others are properly camel case). I then put a bunch of (%s, %s, %s as u8) (where the third argument is the property string) into the generated code
[01:55:34] <aatch> You can do it for now either way, it doesn't matter until it hits the tree.
[01:55:58] <meyer> And define the property enum with the name, so I don't need to do any fancy mapping, and Rust just uses the enum variant names
[01:56:17] <meyer> Can I attach allows to a single block?
[01:57:06] <kvanb> should `make` build stage3 or just stage2?
[01:57:22] <aatch> meyer, pretty sure, yeah
[01:57:30] *** Quits: cschneid (cschneid@moz-A708F11D.hlrn.qwest.net) (Client exited)
[01:57:52] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[01:58:15] *** Quits: Titof (Titof@moz-EAAEA701.w81-248.abo.wanadoo.fr) (Quit: Titof)
[01:58:19] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[01:58:39] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[01:59:30] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[02:01:12] <kvanb> running testsuite on new 64-bit windows compiler ..
[02:03:05] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:03:56] *** Quits: dagle (dagle@moz-B17C4A95.cust.tele2.se) (Client exited)
[02:04:54] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[02:06:12] <kvanb> so, if I get something like this: /z/git/rust/mk/tests.mk:616: recipe for target 'tmp/check-stage2-T-x86_64-w64-mingw32-H-x86_64-w64-mingw32-rpass.ok' failed .... make: *** [tmp/check-stage2-T-x86_64-w64-mingw32-H-x86_64-w64-mingw32-rpass.ok] Error 67
[02:06:21] <kvanb> how do I know what to be looking at to fix it
[02:06:45] *** Joins: blank_name (blank_name@5EC13E3.964BADD.93A5C78C.IP)
[02:07:11] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[02:07:32] <aatch> kvanb, are you doing make check or make check-lite ?
[02:07:39] <kvanb> make check
[02:07:52] <aatch> I'm not sure if that works on windows, I know stuff changed recently
[02:08:06] <meyer> What's the difference between check and check-lite?
[02:09:57] *** Joins: p1start (rewi@moz-E7F3D014.org)
[02:09:59] <aatch> check-lite runs less tests, because some don't work on windows.
[02:10:09] <aatch> I'm not sure if we can catch failure on windows yet or not.
[02:10:25] <meyer> Okay. Not something I need to worry about under Linux, then.
[02:10:40] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[02:10:55] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[02:10:56] *** Quits: not_gavin (gavin@gavinsharp.com) (Input/output error)
[02:11:03] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[02:11:06] <kvanb> ran check-lite
[02:11:13] *** Joins: not_gavin (gavin@gavinsharp.com)
[02:11:21] <kvanb> got some build failures in libstd which I can fix, so I'll just keep fixing them until I see what happens..
[02:12:29] <kvanb> "unexpected end of macro invocation" ?
[02:12:48] <kvanb> fn check_size() { assert_eq!(mem::size_of::<super::imp::arch::CONTEXT>() == 1232); }
[02:13:45] <o11c> kvanb: , not ==
[02:14:10] <aatch> assert_eq(<expr>, <expr>)
[02:14:14] <kvanb> oh
[02:14:14] <aatch> assert_eq!(<expr>, <expr>)
[02:14:25] <kvanb> thanks.
[02:14:40] <aatch> I guess we could add a case that accepted `<expr> == <expr>` though...
[02:14:52] <kvanb> .. it actually wasn't my code, I didn't put it there
[02:14:56] <kvanb> someone else must have broken it..
[02:15:03] *** Joins: neopara (neopara@moz-58DA824C.hfc.comcastbusiness.net)
[02:15:13] *** Joins: mib_9izerj (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP)
[02:15:36] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[02:16:46] <neopara> How do you handle the install --prefix in a rust binary? Should I use self_exe_path or is there a way to pass compiler defines like c?
[02:17:05] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[02:17:08] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[02:17:29] *** Quits: mib_9izerj (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:17:45] *** Joins: refold (gman@moz-42D68426.a258.priv.bahnhof.se)
[02:17:53] *** Quits: not_gavin (gavin@gavinsharp.com) (Input/output error)
[02:18:10] *** Joins: not_gavin (gavin@gavinsharp.com)
[02:19:02] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[02:19:09] *** Joins: cschneid (cschneid@moz-621ACC77.hlrn.qwest.net)
[02:19:20] *** Joins: mno2 (mno2@E1E0A0A3.621D86F0.CFF65E33.IP)
[02:20:50] *** Quits: cschneid (cschneid@moz-621ACC77.hlrn.qwest.net) (Ping timeout)
[02:20:55] *** Joins: richo (richo@CB5FD8B9.7DCE6D6E.F711B458.IP)
[02:21:05] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Ping timeout)
[02:21:19] *** Joins: cschneid (cschneid@moz-621ACC77.hlrn.qwest.net)
[02:21:43] <richo> I'm looking to write a set of bindings to libgit2 for rust both because I need them, and to get my feet a bit wetter. Is there a set of good canonical bindings to something the community would recommend as being idiomatic (right now)?
[02:22:04] <nrc> is there anyway to initialise a graph without making all the nodes Rc<RefCell<Node>> ?
[02:23:44] <kvanb> ooo, test suite not failed yet for 64-bit windows
[02:23:59] <kvanb> I hope it just flukes.
[02:25:00] <aatch> richo, I don't know of any examples, but it looks like libgit2 is a pretty object-oriented API, so it shouldn't be too difficult to map to Rust
[02:25:26] <kvanb> getting lots of deprecated allow_owned_vectors
[02:26:12] <richo> aatch: the wrappers themselves will be really easy, I'm mostly concerned about writing Good Rust, instead of Working Rust
[02:26:14] <richo> if that makes sense
[02:27:04] <aatch> richo, well you're somewhat limited by the semantics of the library you're binding too, but it doesn't look like that'll be much of a problem here.
[02:28:20] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[02:28:54] <aatch> richo, You're probably looking at having a wrapper struct for each "object" type in libgit
[02:29:08] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[02:29:10] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:29:15] <richo> Yup, that's exactly it
[02:29:18] <aatch> and then implementing the functions from libgit as methods on those types.
[02:29:28] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Ping timeout)
[02:29:52] <richo> ok, I'm just gunna write some code. When I've got something partially working I might ask in here for some eyes over it to stop me before I do anything too ridiculous
[02:29:53] <richo> thanks!
[02:30:03] *** Joins: kanru (kanru@moz-DB4A9C19.scl3.mozilla.com)
[02:30:03] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[02:30:04] <aatch> richo, sounds good.
[02:30:08] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[02:30:09] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[02:30:25] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[02:30:32] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[02:30:35] <aatch> Try to leverage the type system as much as you can to enforce/reflect the behaviour of the library
[02:30:35] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[02:30:46] <kvanb> test suite still running \o/
[02:30:47] *** Quits: p1start (rewi@moz-E7F3D014.org) (Ping timeout)
[02:30:56] <aatch> like mutator methods should take a &mut self, etc.
[02:31:25] <kvanb> why was @ removed?
[02:31:32] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:31:49] <kvanb> pressure from people who enjoyed rust on bare metal to rip the gc out of the language?
[02:32:13] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[02:32:21] <aatch> kvanb, not really. `@` wasn't really GC (as people normally mean) it was reference counting.
[02:32:33] *** Quits: richo (richo@CB5FD8B9.7DCE6D6E.F711B458.IP) (Ping timeout)
[02:32:39] <mcpherrin> kvanb: simplifying the language, too much pointer sigil noise, and @ didn't really work for everybody
[02:32:41] <aatch> It was removed because it has been replaced by Rc<T>
[02:33:14] <kvanb> better that way
[02:33:17] <aatch> which is almost completely a full replacement for `@`, just waiting on DST to fill the last gap.
[02:33:28] <kvanb> personally I prefer things really really high level
[02:33:40] <kvanb> features which can be implemented with other features are great.
[02:33:56] <YourBestFriend> implement everything with macros
[02:34:07] <YourBestFriend> if you can't, your macros aren't powerful enough
[02:34:40] <kvanb> C macros are indeed not, so I wrote a blog post about using m4 to replace the standard cpp
[02:34:49] <kvanb> generated duffs device and some other stuff 
[02:35:00] * Havvy wonders if there's room in C++ for a real macro system...
[02:35:05] <aatch> kvanb, at the end of the day, Rust is still a system language, so having a Gc tightly integrated was a non-started no matter what.
[02:35:29] * Havvy is happy that @ is going away.
[02:35:50] <YourBestFriend> I wish I could learn rust
[02:35:51] <kvanb> I won't be able to get people onboard
[02:36:02] <kvanb> but I'd be really happy to get rust on a micro
[02:36:14] <kvanb> we're building a racecar over here..
[02:36:22] <aatch> mcpherrin, aren't you an embedded guy?
[02:36:38] <mcpherrin> aatch: well sorta :p
[02:37:07] <mcpherrin> aatch: my "embedded" devices have more cpu & ram than the average desktop computer :)
[02:37:15] <aatch> mcpherrin, oh
[02:37:29] <aatch> mcpherrin, that's just cheating
[02:37:42] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[02:37:48] *** Quits: leowoe (Leo@moz-9AE46036.dip0.t-ipconnect.de) (Quit: Leaving.)
[02:38:03] *** Quits: quux00 (uid24415@moz-E77DEB21.irccloud.com) (Quit: Connection closed for inactivity)
[02:38:08] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[02:38:19] <Havvy> YourBestFriend:  You could.
[02:38:25] *** Quits: neopara (neopara@moz-58DA824C.hfc.comcastbusiness.net) (Ping timeout)
[02:38:32] <kvanb> uh, < 1kb stack here
[02:39:10] *** Joins: neopara (neopara@moz-58DA824C.hfc.comcastbusiness.net)
[02:39:28] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[02:39:45] <mcpherrin> If you passed on any of the standard library, you could run Rust on a microcontroller
[02:39:55] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[02:40:05] <kvanb> rust-boot is kind of going in the right direction for that kind of stuff
[02:40:12] <YourBestFriend> Havvy: I can't
[02:40:20] <kvanb> the standard library should not rely too heavily on stuff that won't work everywhere, should it?
[02:40:23] <YourBestFriend> I must practice my C++ otherwise I'm going to lose it
[02:40:27] <kvanb> arguably anything like that should be broken into its own libs..
[02:40:46] <mcpherrin> kvanb: Well you kinda write code differently when you've got 2kb of sram
[02:41:00] *** Quits: IanCormac84 (User@96BBDB32.2A8D8854.67DFF8B4.IP) (Ping timeout)
[02:41:03] <mcpherrin> versus having a 32 bit or larger address space and at least 32 megs of ram
[02:41:30] <meyer> aatch: How does this look?: https://github.com/Meyermagic/rust/compare/graphemecluster 
[02:41:46] *** Joins: IanCormac84 (User@9BB74D6B.64D641E5.67DFF8B4.IP)
[02:41:55] <meyer> I still need to add tests, probably profile and optimize a bit, documentation, etc.
[02:41:56] <mcpherrin> Rust *should* be usable in those environments, but it isn't for now
[02:42:35] <aatch> meyer, you should use the code review tool cmr set up.
[02:42:42] <meyer> Link?
[02:42:44] <aatch> http://phabricator.octayn.net
[02:43:03] <Havvy> I'd argue that if you made the standard library work in every environment, you make one that is painful for all environments.
[02:43:06] <aatch> you'll also need to install arcanist
[02:43:06] <meyer> Oh, phabricator. I used that at Facebook, cool.
[02:43:11] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[02:43:17] <aatch> meyer, ah, so you already know. Cool.
[02:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:44:08] <meyer> Going to need to remember how it works, but yeah. 
[02:44:52] <aatch> `arc install-certificate http://phabricator.octayn.net/api`
[02:46:22] <kvanb> make: *** [x86_64-w64-mingw32/stage1/bin/rustlib/x86_64-w64-mingw32/lib/stamp.std] Segmentation fault
[02:46:32] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:46:40] <kvanb> :( doesn't tell me much useful.
[02:46:59] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[02:47:07] *** Quits: gwty (gwtypc@6FD8EC9F.DA4EE100.BD94A9D5.IP) (Ping timeout)
[02:47:22] <aatch> kvanb, try adding `VERBOSE = 1` to the make command
[02:47:22] *** Joins: goffrie_ (goffrie@moz-463E9F66.dsl.ncf.ca)
[02:47:37] *** Quits: goffrie (goffrie@moz-8FCD10C8.dsl.ncf.ca) (Ping timeout)
[02:50:11] <kvanb> oww, I have to rebuild all of rust with debug symbols maybe
[02:50:51] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:52:16] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[02:53:21] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:53:57] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Input/output error)
[02:54:34] *** Quits: japaric (japaric@D2861789.743D7231.BFC118EE.IP) (Ping timeout)
[02:55:32] <kvanb> ow, my gdb can't hack it
[02:56:35] *** Joins: IanCormac841 (User@711FF974.2A8D8854.67DFF8B4.IP)
[02:56:54] *** Quits: IanCormac84 (User@9BB74D6B.64D641E5.67DFF8B4.IP) (Ping timeout)
[02:56:55] *** Joins: japaric (japaric@65A1FC0F.FD3D1332.95AFB88D.IP)
[02:58:30] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Connection reset by peer)
[02:58:38] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[02:59:01] *** Joins: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net)
[02:59:02] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[02:59:14] *** Joins: Titof (Titof@moz-EB3CB9F7.w80-8.abo.wanadoo.fr)
[03:00:49] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[03:00:55] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[03:01:07] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[03:02:13] <kvanb> segfault is in 0x000000006f6c077e in middle::resolve::Module::new::h954cfe49007cace7C7S::v0.10.pre () from /z/git/rust/x86_64-w64-mingw32/stage1/bin/rustc-6ccece0c-0.10-pre.dll
[03:02:17] *** Quits: enos (jkingyens@moz-E6FB95AC.lightspeed.sntcca.sbcglobal.net) (Quit: enos)
[03:03:17] <klutzy> when I tried win64 it segfaulted if built optimized
[03:03:19] <meyer> aatch: Who should I tag as a reviewer?
[03:03:29] <aatch> meyer, me
[03:03:36] <kvanb> yeah this is compiling libstd with -O
[03:03:36] <aatch> same name as here
[03:03:40] *** jorendorff_away is now known as jorendorff
[03:03:43] <meyer> kk
[03:03:44] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:04:36] *** Joins: aravindavk (aravinda@moz-BD0CADEE.redhat.com)
[03:05:18] <kvanb> segfaults after  callq  0x6f6c0cc0 <_ZN7hashmap5table25RawTable$LT$K$C$$x20V$GT$3new20h6c364d5fa140090bKCx9v0.10.preE>
[03:05:24] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[03:05:51] <meyer> aatch: Oop... "ERR-CONDUIT-CORE: Attempting to construct a query containing characters outside of the Unicode Basic Multilingual Plane. MySQL will silently truncate this data if it is inserted into a `utf8` column. Use the `%B` conversion to escape binary strings data."
[03:06:46] <aatch> meyer, 0.0
[03:07:05] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[03:07:14] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: willingc)
[03:07:20] <aatch> cmr, you around?
[03:07:53] <meyer> aatch: I installed PHP 5.5 from my distro's package manager. Might it be an incompatibility?
[03:08:26] <klutzy> kvanb: it may be during some random() work?
[03:08:27] <meyer> "5.2 and newer"
[03:08:40] <aatch> meyer, was it a local error? It looks like that comes from the server
[03:08:41] <klutzy> since optimization inlined them
[03:08:58] <meyer> I'll put the traced run in a gist, hold on
[03:09:53] <meyer> https://gist.github.com/Meyermagic/9733502
[03:10:02] *** Joins: p1start (rewi@moz-E7F3D014.org)
[03:10:04] <klutzy> kvanb: maybe librand has some non-win64-safe code
[03:10:24] <klutzy> (but it doesn't explain well why non-optimized rustc worked well)
[03:11:44] <kvanb> hmm
[03:11:47] <kvanb> let me see
[03:11:48] <aatch> meyer, yeah, thats returned from the server
[03:12:03] <aatch> cmr might be able to tweak some settings on the server though
[03:12:41] <meyer> Other people use this frequently, though? I don't think I actually included any characters outside of ASCII in my diff
[03:13:07] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:13:31] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[03:13:37] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[03:13:43] <kvanb> what might  call   0x70aa01e8 <_ZN11TaskRng.Rng8next_u6420h70c34330cb2883cfw2c9v0.10.preE> return
[03:13:52] <kvanb> eax = TaskRng* ?
[03:14:51] <meyer> aatch: I should also get rid of all that whitespace noise in the diff. 
[03:14:52] *** Joins: richo (richo@EE96DF3F.C1F8B311.2BFAEB23.IP)
[03:15:03] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:15:03] <meyer> aatch: Is there a way to attach a series of commits to an issue, without making a PR?
[03:15:13] <meyer> Just so other people know it exists.
[03:15:16] <aatch> meyer, nope sorry
[03:15:25] <aatch> Other than just mentioning them on the issue
[03:15:55] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[03:15:56] *** Joins: enos (jkingyens@moz-B0C1B161.hsd1.ca.comcast.net)
[03:16:31] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[03:17:09] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[03:18:24] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[03:18:38] *** Quits: richo (richo@EE96DF3F.C1F8B311.2BFAEB23.IP) (Ping timeout)
[03:20:20] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[03:20:27] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[03:20:47] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: It is tiem!)
[03:20:55] *** Quits: Earnestly (earnest@18162BE0.BA6AC103.30311652.IP) (Ping timeout)
[03:22:34] <kvanb> iunno \o/
[03:23:02] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: Textual IRC Client: www.textualapp.com)
[03:23:05] *** Joins: richo (richo@EE96DF3F.C1F8B311.2BFAEB23.IP)
[03:23:40] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[03:23:54] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[03:24:59] *** Quits: richo (richo@EE96DF3F.C1F8B311.2BFAEB23.IP) (Ping timeout)
[03:25:07] *** Quits: soumyaC (uid15286@moz-E77DEB21.irccloud.com) (Quit: Connection closed for inactivity)
[03:25:29] *** Quits: Titof (Titof@moz-EB3CB9F7.w80-8.abo.wanadoo.fr) (Quit: Titof)
[03:25:38] *** Quits: IanCormac841 (User@711FF974.2A8D8854.67DFF8B4.IP) (Ping timeout)
[03:25:43] *** Joins: IanCormac84 (User@59F81F12.64D641E5.67DFF8B4.IP)
[03:26:07] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[03:27:31] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[03:27:50] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[03:28:33] *** Joins: jph- (user@moz-59A755C2.hackworth.be)
[03:28:48] <jph-> hi folks, brand new to rust and just installed a nightly package. What do I use in place of rustpkg? 
[03:29:03] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[03:29:12] <bjz> rustpkg is deprecated
[03:29:18] <bjz> well, it is gone
[03:29:30] <bjz> not deprecated
[03:29:35] <jph-> yeh i know cargo is coming
[03:29:40] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[03:29:41] <jph-> so do i download and install manually in interim
[03:29:42] <bjz> we are getting a new package manager
[03:29:51] <bjz> yeah, unfortunately :(
[03:29:56] <jph-> and if so, are there docs on the steps i need to take
[03:30:01] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[03:30:05] <jph-> git clone ...
[03:30:08] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[03:30:12] <bjz> what platform?
[03:30:14] <jph-> linux
[03:30:38] <bjz> some distros hav nightlies, but I'm on osx and just clone from github
[03:30:45] <meyer> If it is a single crate, you can use rustc to get an rlib, which you can link against
[03:30:46] <jph-> nightlies of what?
[03:30:51] <bjz> rust
[03:30:54] <jph-> i have the rust nightly ppa setup
[03:30:54] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[03:30:57] <jph-> but it doesnt include rustpkg
[03:30:59] *** Joins: WalrusPony1 (retep998@moz-9F58AA44.bstnma.east.verizon.net)
[03:31:00] <bjz> ohh good
[03:31:06] <jph-> so i'm wondering how i get external libraries
[03:31:08] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[03:31:12] <jph-> since rustpkg isnt around
[03:31:15] *** Quits: WalrusPony (retep998@moz-9F58AA44.bstnma.east.verizon.net) (Ping timeout)
[03:31:17] <jph-> what the manual steps are
[03:31:36] <bjz> you will need to manually compile them or use an included makefile if it has one
[03:31:44] <bjz> rustc is the rust compiler
[03:31:46] <jph-> is there a doc i can read?
[03:31:52] *** Quits: drawoc (drawoc@moz-BAC1D3AB.res-cmts.sesh.ptd.net) (Quit: WeeChat 0.4.3)
[03:31:55] <jph-> seems like existing docs assume rustpkg
[03:32:06] <jph-> i havent seen manual steps yet
[03:32:07] <bjz> which docs are you looking at?
[03:32:13] <jph-> whatever google takes me to
[03:32:18] <jph-> (rustpkg)
[03:32:21] <bjz> is it 0.9?
[03:32:35] <bjz> any docs relating to rustpkg are obsolete
[03:32:39] <jph-> i'm just googling how to install external dependencies
[03:32:47] <bjz> you can't
[03:32:47] *** Quits: kris (kris@moz-6D20263F.fullrate.dk) (Ping timeout)
[03:32:49] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[03:32:52] <jph-> and it seems there's a gap in documentation since rustpkg is deprecated
[03:32:57] <jph-> so i'm wondering how to do it manually
[03:33:02] <meyer> You need to manually link things
[03:33:04] <meyer> http://static.rust-lang.org/doc/master/rust.html#linkage
[03:33:08] <jph-> meyer, cheers
[03:33:12] <bjz> meyer: cheers
[03:33:16] <meyer> Describes the linking system
[03:33:18] *** Quits: untitaker (untitaker@moz-4ED70EEC.adsl.highway.telekom.at) (Ping timeout)
[03:33:20] <meyer> Wait, what?
[03:33:22] <jph-> so just git clone, compile the library locally, and link
[03:33:37] <jph-> link when rustc'ing
[03:33:45] <meyer> (why did you both say "cheers"?)
[03:33:52] <jph-> meyer, BOTS
[03:33:58] <jph-> probably both of british or colonial heritage
[03:34:50] <aatch> jph-, well done, bjz is an Aussie
[03:34:51] *** Quits: lkuper (lkuper@moz-61339218.dyn.optonline.net) (Ping timeout)
[03:34:57] <bjz> meyer: common word used for in place of "thanks"
[03:35:05] <bjz> jph-: indeed!
[03:35:08] * bjz claps
[03:35:12] <jph-> aatch, well he wouldnt be british based on timezone
[03:35:14] <jph-> heh
[03:35:14] <meyer> Ah.
[03:35:17] <bjz> jph-: http://static.rust-lang.org/doc/master/tutorial.html#a-minimal-example
[03:35:23] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[03:35:32] <jph-> bjz, awesome, lemme go and read
[03:35:37] <aatch> jph-, I'm British though. I just don't live there :P
[03:35:38] <bjz> jph-: I could be just a really bad sleeper
[03:35:39] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[03:35:47] <bjz> aatch: nz!
[03:35:56] <bjz> aatch: was that colonial?
[03:36:11] <aatch> bjz, is it, but that doesn't stop me from being british.
[03:36:15] <bjz> definitely commonwealth
[03:36:17] <bjz> yeah
[03:36:27] <bjz> you are just out in the empire :D
[03:36:27] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[03:36:29] <aatch> I was born in England
[03:36:40] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[03:37:24] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[03:37:27] <kvanb> fff
[03:37:39] <kvanb> this shit all works on 64-bit linux
[03:37:46] <kvanb> there is no reason 64-bit windows should fail
[03:38:18] <bjz> jph-: are you british or colonial?
[03:38:28] <klutzy> hey, it's windows!
[03:38:45] <jph-> bjz, no comment, cobber
[03:38:51] <bjz> heh
[03:39:01] <bjz> jph-: how goes the reading?
[03:39:14] *** Quits: sunfish (chatzilla@8F761026.B5EF4AF6.E96CA9D8.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 28.0/20140317233501])
[03:39:16] <jph-> bjz, first question was "what the f- are crates?" then "oooh"
[03:39:24] <bjz> ahh
[03:39:32] <bjz> yeah - they are the compilation unit
[03:39:37] <jph-> bjz, i'm coming from ruby/clojure background most recently, but i started (and left) C 10+ years ago
[03:39:42] <bjz> ah neat
[03:39:55] <bjz> we have a few rubiers and pythoners
[03:39:55] <jph-> Go pissed me off, so I thought I'd checkout Rust
[03:40:12] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[03:41:35] *** Joins: untitaker (untitaker@moz-8C7CCA71.adsl.highway.telekom.at)
[03:41:38] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[03:41:54] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:42:01] <bjz> jph-: yeah Rust and Go don't really focus on the same kinds of things
[03:42:32] *** Joins: mib_3hlmx9 (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP)
[03:42:37] <jph-> bjz, coming from a dynamic language like Ruby, Go was this sadistic headmaster "you're not using that variable! compile failed", "you're not using that library! compile failed"
[03:43:00] <bjz> heh, I think Rust might be even more sadistic
[03:43:13] <jph-> i'll see soon enough
[03:43:22] <bjz> we come here because we like bondage and discipline
[03:43:24] <bjz> :D
[03:43:43] <jph-> so is rust-http the default library for http cli/srv stuff?
[03:43:55] <kvanb> hey could it segfault because the floating point arch size stuff was never filled in
[03:44:09] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:44:27] <bjz> jph-: I'd recommend pushing though the pain though - it's worth it. you definitely start to develop an intuition and you see less errors as time goes on
[03:44:53] <bjz> jph-: I don't know much about that area, but rust-http is apparently very good
[03:44:57] <jph-> bjz, i doubt i'd use rust as primary language, but i like to have something AOT compiled, fast that doesn't piss me off
[03:45:05] <bjz> yeah
[03:45:19] <jph-> bjz, yeh, rust-http master isn't compiling atm... the fun of living on bleeding edge
[03:45:23] <bjz> rust isn't going to be the language to suit all your needs
[03:45:38] <kvanb> rust is fast
[03:45:40] <bjz> heh, bug ChrisMorgan about that
[03:45:48] <bjz> :)
[03:46:02] <kvanb> I've heard it might even end up faster than C because of better aliasing and stuff inside non unsafe blocks
[03:46:16] <bjz> jph-: I think it should be generally kept up to date
[03:46:27] <aatch> kvanb, it's theoretically possible to optimize Rust code better, yes
[03:46:29] *** Quits: mib_3hlmx9 (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:46:33] <jph-> bjz, it's failing travis CI atm
[03:46:34] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:46:41] <jph-> bjz, and there's some related issues on the issues list
[03:46:43] <bjz> jph-: but I manage lots of libraries and often my stuff can be a day or so behind
[03:46:46] <bjz> ahh
[03:46:52] <bjz> any PRs?
[03:46:58] <jph-> looks like one
[03:47:13] <bjz> jph-: yeah, it's the fun of Rust
[03:47:16] <jph-> this is my first day with rust, i just want to try out some http/json api stuff
[03:47:19] <jph-> :(
[03:47:26] <bjz> but it is worth the pain
[03:47:34] <bjz> sorry for the issues :(
[03:47:44] * bjz can't wait for cargo
[03:47:46] <kvanb> does rustc have -g?
[03:47:56] <sfackler> yes
[03:48:00] <jph-> yeh im looking forward to cargo
[03:48:16] *** Quits: refold (gman@moz-42D68426.a258.priv.bahnhof.se) (Quit: leaving)
[03:48:18] <bjz> jph-: this is quite useful for staying up to date: http://rust-ci.org/
[03:48:48] <bjz> jph-: maybe you might need to try something else for now - at least the json is there atm
[03:48:59] <bjz> jph-: then bug ChrisMorgan tonight :D
[03:49:15] <meyer> aatch: This phabricator error is really bugging me. Seems like I'm the only one who has ever gotten it. Do you think it is actually server-side, and not an issue with my config / system?
[03:49:49] *** Quits: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net) (Quit: Leaving)
[03:49:53] <aatch> meyer, I'm not sure what it actually sends to the server, so it may well include characters outside the BMP
[03:50:02] <bjz> jph-: tonight melbourne time, that is
[03:50:22] * bjz forgets about timezones occasionally
[03:50:49] <bjz> kvanb: what would -g do?
[03:51:07] *** Quits: zz_kimundi (kimundi@moz-2E6F4AE4.dip0.t-ipconnect.de) (Ping timeout)
[03:51:31] <jph-> oh rust-ci is useful, i can pull the last version that compiled
[03:52:55] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[03:53:03] <bjz> jph-: might be a challenge
[03:53:27] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[03:54:07] *** Joins: zz_kimundi (kimundi@moz-B2FDAD53.dip0.t-ipconnect.de)
[03:54:22] *** Joins: aurynj (Eon@C498BDEC.C264657C.C6282BC4.IP)
[03:54:24] *** zz_kimundi is now known as kimundi
[03:55:06] <kvanb> bjz: give me more debugging information for gdb to figure out what's wrong
[03:55:08] <bjz> jph-: what are you hoping to use Rust for?
[03:55:26] <bjz> kvanb: I think there is an option for debugging stuff
[03:55:36] <bjz> kvanb: -h cave you nothing?
[03:55:38] <bjz> *gave
[03:55:51] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:55:59] <bjz> jph-: or is it just explaratory atm?
[03:56:10] <jph-> bjz, right now i have a few bitcoin exchange api libraries, so i want to test our a rust equivalent
[03:56:20] <bjz> nice!
[03:56:42] <bjz> go didn't suit your needs?
[03:57:21] <jph-> bjz, im a dynamic language guy, trying to decode JSON with Go for poorlly documented nested JSON results from these exchanges was like pulling teeth
[03:57:29] <bjz> ah
[03:57:31] <jph-> in ruby, it's one line JSON.decode(blah)
[03:57:44] <jph-> if the json you get isn't well structured, it's a PITA
[03:57:47] <jph-> (in Go)
[03:58:12] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:58:13] <jph-> i wasted several hours trying to figure out marshall/unmarshal bollocks before giving up and moving to clojure
[03:58:15] <bjz> well Rust has a static type system, but it should be rich enough to make things like that easier to work with
[03:58:17] <jph-> that was a few months back
[03:58:23] <kvanb> I uhh
[03:58:29] <kvanb> did not try -h
[03:58:34] <bjz> things like sum types can help
[03:59:01] *** Joins: gavinb (gavinb@E673F25E.B9698BFB.D3BA2C17.IP)
[03:59:05] *** Joins: future_horizons (Mibbit@D43271B6.278C2F23.97BBD552.IP)
[03:59:29] <bjz> jph-: the issue with go is the same issue as with java afaik - it's a static type system, but it isn't very expressive
[03:59:56] <jph-> bjz, i wouldnt know about java, but i do know it's dead easy in clojure and ruby
[04:00:13] <bjz> jph-: a good static type system will allow you to model more interesting things, just with a safety belt
[04:00:14] <future_horizons> Issue with lifetimes http://mibpaste.com/UYOvA1
[04:00:15] <jph-> i wont always know what structure the json doc will be in
[04:00:35] <jph-> bjz, yep, and where it's known i can use typing ... 
[04:00:45] *** Quits: p1start (rewi@moz-E7F3D014.org) (Ping timeout)
[04:00:59] <jph-> since i cant get rust-http to compile, time to try and compile something for json
[04:01:17] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[04:01:26] <bjz> kvanb: `-g                  Equivalent to --debuginfo=2`
[04:01:34] <bjz> kvanb: from the rustc help info
[04:01:35] *** Quits: gavinb (gavinb@E673F25E.B9698BFB.D3BA2C17.IP) (Quit: gavinb)
[04:01:42] *** Joins: gavinb (gavinb@E673F25E.B9698BFB.D3BA2C17.IP)
[04:02:01] <strcat> jph-: you already have libserialize with json if you have rust
[04:02:12] <jph-> strcat, oh, lemme look that up
[04:02:14] <jph-> thanks
[04:02:31] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[04:03:09] <bjz> jph-: yeah, clojure will always be nicer for data manipulation stuff. but Rust can do lots of other things better than clojure. it's sort of 'the right tool for the job' thing.
[04:04:22] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:04:29] <bjz> jph-: the good thing about Rust is that it's different enough from clojure/ruby for it to be useful to invest in. Go is closer to the dynamic GCed langugaes that you normally use, so the pay-off is less
[04:04:33] <gavinb> Does an enum have an implicit integer type, like uint?
[04:05:01] <strcat> gavinb: enums are tagged unions, not integers
[04:05:04] <jph-> bjz, challenge at the moment is due to all the changes in rust, finding relevant, current documentation is a challenge when googling
[04:05:18] <strcat> gavinb: there's a concept of "C-like" enums where they're just a bunch of constants
[04:05:20] <jph-> i have to distrust all but most recent results
[04:05:21] <bjz> jph-: the rust language tutorial is best
[04:05:21] <strcat> and you can pick the type
[04:05:26] <strcat> that it represents the enum with
[04:05:33] <bjz> jph-: I wouldn't rely on google at the moment
[04:05:42] <jph-> bjz, what would you rely on?
[04:05:46] <strcat> the tutorial and official docs
[04:05:48] <gavinb> strcat: ok so if I’m writing a parser for a binary file format and need C-style enums for flags, what would be the best representation in rust?
[04:05:50] <strcat> the api docs have a search
[04:05:59] <bjz> jph-: also cmr's "This Week in Rust" is useful for keeping up to date
[04:06:05] <strcat> gavinb: can't do flags you need to OR with enums in rust
[04:06:06] *** Joins: brendan (brendaneic@moz-264E1FDC.static.wiline.com)
[04:06:07] <gavinb> strcat: oh that sounds like exactly what I neeed
[04:06:09] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[04:06:17] <bjz> jph-: http://static.rust-lang.org/doc/master/tutorial.html
[04:06:26] <strcat> gavinb: it's not if you need to combine them
[04:06:39] <bjz> jph-: also asking #rust is a great way to figure stuff out if you are really stuck :D
[04:06:46] <strcat> you want a struct, some predefined constants and overloaded operators
[04:06:55] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[04:06:55] <bjz> jph-: but yeah, google is pretty useless right now :P
[04:07:02] *** Quits: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca) (Quit: canhtak)
[04:07:08] <bjz> jph-: http://static.rust-lang.org/doc/master/std/index.html
[04:07:11] <jph-> bjz, well i usually use filter by results in last year or last month 
[04:07:28] <bjz> jph-: http://static.rust-lang.org/doc/master/serialize/index.html
[04:07:37] <gavinb> strcat: well I’m writing TIFF file support, so mostly the flags will be mutually exclusive. But I need them to be a certain size, eg. u16 for the endian flag.
[04:07:41] <bjz> jph-: last month is probably the best :P
[04:07:51] *** Joins: diodesign (diodesign@moz-498DA4AB.pepperfish.net)
[04:07:56] <diodesign> hi
[04:07:59] <bjz> jph-: luckily language changes have slowed down a ton
[04:08:00] <tiffany> that highlighted me
[04:08:20] <bjz> jph-: most of the changes are now to the library APIs
[04:08:39] <bjz> jph-: we are iterating on them, trying to really polish things for 1.0
[04:08:44] <jph-> bjz, it's still a hugely shifting landscape compared to alternatives... i just hope the payoff is worth it post 1.0
[04:08:55] <gavinb> strcat: So this is legit?
[04:08:57] <gavinb> enum ByteOrder {
[04:08:58] <gavinb>     ByteOrderLittleEndian = 0x4949u16,
[04:08:59] <gavinb>     ByteOrderBigEndian = 0x4d4du16,
[04:08:59] <gavinb> }
[04:09:04] <bjz> jph-: I think it will be a decent pay off.
[04:09:14] *** Joins: magg (magg@320B6217.6CE66C5C.EB08AFC4.IP)
[04:09:16] <kvanb> bjz: cheers
[04:09:19] <bjz> gavinb: you can do #[repr(u16)]
[04:09:21] <kvanb> I will chip away at win64 ... slowly
[04:09:42] <bjz> gavinb: then you don't need the literal annotation
[04:09:43] <gavinb> bjz: aha! that’s even better - thanks!
[04:09:45] *** jph- is now known as jph-away
[04:10:46] <magg> is there a way to push values to a [T]? I’m getting this “error: type `&mut [T]` does not implement any method in scope named `push`”
[04:10:49] <bjz> jph-away: we won't hold it against you if you wait until 1.0 though, it takes a special kind of person to keep up with the blistering pace of rust development
[04:11:05] <bjz> magg: it needs to be owned and mutable
[04:11:29] <gavinb> hm you can’t use a type alias with #repr
[04:11:36] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[04:12:00] <bjz> gavinb: no, it's super annoying
[04:12:06] <bjz> magg: http://static.rust-lang.org/doc/master/std/vec/struct.Vec.html#method.push
[04:12:10] <magg> bjz: it is mut… so to_owned()?
[04:12:32] <bjz> magg: you can't push to a slice is what I mean
[04:12:36] *** jph-away is now known as jph
[04:12:48] <bjz> magg: with a slice you might be in the middle of a vector
[04:12:57] <kvanb> sorry but rust docs are inferior to haddock
[04:13:00] <jph> bjz, is there a generic json decode option for when you don't know json structure?
[04:13:02] <magg> bjz: oh, thanks
[04:13:07] <kvanb> stylesheet needs heaaps of work guys :/
[04:13:26] <bjz> kvanb: head over to #rust-branding
[04:13:31] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[04:13:31] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: lawrence)
[04:13:43] <kvanb> I'm already working on something.
[04:13:44] <bjz> kvanb: TheHydroImpulse is working on it ^_^
[04:14:53] <gavinb> A question about naming in libraries - say you have an enum called Compression. Is it idiomatic to prefix the enum variants with Compression to avoid name conflicts? If the variants are None, Huffman and PackBits, I can’t use the bare ‘None’ as it conflicts (in the same namespace) as the rest of the module.
[04:14:58] <bjz> magg: do you kind of uns=derstand whay it's not possible?
[04:15:00] <sfackler> jph: you can decode to the Json enum
[04:15:06] <kvanb> there should be a get_mut_checked
[04:15:39] <bjz> jph: sorry, I have not really used the json stuff :(
[04:15:43] <kvanb> anyway, off to classes bye
[04:16:49] <bjz> jph: unfortunately the tests might be a good way of getting an idea of it: https://github.com/mozilla/rust/blob/master/src/libserialize/json.rs#L1744-L2605
[04:17:05] <jph> oh im used to using tests for learning libraries
[04:17:12] <bjz> jph: I know that is really bad on our part
[04:17:15] <bjz> but yeah
[04:17:25] <bjz> I find that super helpful
[04:17:34] <jph> im coming from a world where i dont have to define structs in advance for decoding json (if i dont want to)
[04:17:38] <magg> bjz: kind of… so it might be a slice.. and you can’t push more values to the slice? because it can’t increase the size of the vector dynamically? 
[04:17:59] *** Joins: pupoque (Adium@297D6F99.EF706C30.C0C64AB3.IP)
[04:18:05] <sfackler> magg: the slice can be pointing to the middle of another vector. There's no way to add things on the end
[04:18:06] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[04:18:07] <bjz> magg: so in a vec you can do: vec.slice(min, max)
[04:18:19] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[04:19:02] <magg> kk. thanks sflacker and bjz
[04:19:12] <bjz> `[1, 2, 3, 4, 5].slice(1, 2) -> &[2, 3]` - I can't push onto it because it will be pusing into the place of 4
[04:19:35] <bjz> if that makes sense
[04:19:48] *** Quits: pupoque (Adium@297D6F99.EF706C30.C0C64AB3.IP) (Ping timeout)
[04:19:48] <bjz> jph: yeah
[04:19:56] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[04:20:09] <bjz> jph: you will have to jump through more hoops - that's just a reality
[04:20:31] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[04:20:38] <bjz> jph: but in clojure you would have to write tests as well
[04:20:40] <jph> i understand, you have to whenever you go from dynamic to typed
[04:20:41] <magg> bjz, i get it now
[04:21:11] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[04:21:59] <bjz> jph: you can sort of think of a type system as a set of automatic unit tests - unfortunately it slows down your development, and can sometimes limit expressiveness, but it provides quality assurance
[04:22:21] <jph> i understand, but my favourite is having the choice to use types or not ;)
[04:22:25] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[04:22:25] <bjz> jph: this is super important if you are working at a systems programming level
[04:22:30] <jph> yes
[04:22:40] *** Quits: IanCormac84 (User@59F81F12.64D641E5.67DFF8B4.IP) (Ping timeout)
[04:22:52] <jph> i've recently switched to heavy typing in my api libraries because they're dealing with financial data
[04:23:02] <bjz> core.typed?
[04:23:15] <jph> prismatic/schema with always-validate for funcs
[04:23:20] <bjz> ah
[04:23:32] <bjz> is that clojure or ruby?
[04:23:36] <jph> clojure
[04:23:39] <bjz> ok
[04:23:59] <jph> https://github.com/prismatic/schema
[04:24:10] *** Joins: IanCormac84 (User@9A425872.2A8D8854.67DFF8B4.IP)
[04:24:42] *** Quits: future_horizons (Mibbit@D43271B6.278C2F23.97BBD552.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:24:57] <bjz> the issue is that you are still working in a dynamic language, so you still get the overhead of the dynamic checks - I think the jvm can do optimisations over time, but Rust can do it right at compile time
[04:25:17] <jph> type hints result in optimized code in clojure
[04:25:22] <bjz> oh good
[04:25:32] <jph> the hints (passed through via schema) are picked up by jvm
[04:25:40] <bjz> that's good
[04:25:55] <jph> and you can define your validation rules upfront too.. so they aren't dynamically compiled
[04:26:50] <bjz> ah that's neat
[04:27:30] <bjz> yeah, I might have some of this wrong, I am not too experienced with the clojure world and ecosystem
[04:28:26] <bjz> jph: how does prismatic/schema compare to core.typed?
[04:28:30] *** Joins: Doppp (Doppp@moz-6B405134.hsd1.ca.comcast.net)
[04:29:04] <jph> bjz, no idea, havent touched core.typed yet... once i saw schema could do auto-validation/exceptions i skipped it
[04:29:12] <bjz> ah
[04:29:24] <jph> it was easier to start with schema vs core.typed
[04:29:37] <bjz> cool
[04:29:46] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[04:29:51] <bjz> yeah I heard that core.typed had a bit of a learning curve
[04:29:52] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Ping timeout)
[04:30:24] <bjz> I just look at it... and the core.typed code looks very verbose. sort of negates the niceties of clojure
[04:30:29] <jph> yeh
[04:30:33] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[04:30:36] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[04:31:09] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[04:31:32] <gavinb> bjz: wondering if you have any thoughts about my naming Q earlier? :)
[04:31:36] <jph> i just need to add (s/defn ^:always-validate in func definition and [pair :- ValidPairs ... ] in param definition and it throws exception on bad input automatically
[04:31:36] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[04:31:53] <jph> validpairs being a validation enum rule
[04:31:56] <bjz> gavinb: hmm
[04:32:04] <bjz> gavinb: depends
[04:33:02] <bjz> gavinb: having a prefix sometimes works
[04:33:08] <bjz> but it can get verbose
[04:33:14] <gavinb> bjz: well I can’t see a decent way around it
[04:33:17] <bjz> there are no hard/fast rules
[04:33:34] <bjz> sometimes I have a prefix, sometimes I don't
[04:33:39] <gavinb> Is there a library in Rust that is a good model for naming, API etc?
[04:33:45] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[04:33:53] <gavinb> (Not one generated with bindgen)
[04:33:54] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[04:34:22] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[04:34:26] <bjz> there was a suggestion for having `enum mod` which would scope things under the enum's identifier, but that was rejected
[04:34:46] <Havvy> Why was that rejected?
[04:34:48] <bjz> hmm
[04:35:09] <bjz> https://github.com/mozilla/rust/issues/10090
[04:35:10] <jph> what data type size is unix time in milliseconds? 
[04:35:17] <bjz> Havvy: ^
[04:35:29] <Havvy> jph:  i64
[04:35:34] <jph> cheers
[04:35:35] <gavinb> bjz: that would make sense (at least in this instance)
[04:35:37] <Havvy> Or at least, it should be.
[04:36:10] <bjz> jph: there is a libtime
[04:36:19] <jph> bjz, this is for a struct for json decoding
[04:36:28] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[04:36:36] <jph> i dont have to do this in clojure :P
[04:36:44] <bjz> jph: oh, just might be useful if you are storing something: http://static.rust-lang.org/doc/master/time/index.html
[04:36:46] <jph> now i'm scratching my head about what types to shove things into
[04:36:47] <jph> hehe
[04:36:59] <bjz> jph: it's always good to have descriptive types
[04:37:02] <gavinb> bjz: that issue is precisely what I’m up against :/
[04:37:24] <bjz> jph: as that helps for self-documenting the code
[04:37:56] *** Quits: magg (magg@320B6217.6CE66C5C.EB08AFC4.IP) (Client exited)
[04:38:00] <bjz> jph: like, so the reader of the code or the documentation doesn't have to scratch their head wondering what the u64 is for
[04:38:11] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[04:38:22] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Ping timeout)
[04:38:43] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[04:38:46] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[04:39:08] *** Quits: mno2 (mno2@E1E0A0A3.621D86F0.CFF65E33.IP) (Quit: mno2)
[04:39:09] <bjz> jph: like, you could have a: struct UnixTime(u64)
[04:39:13] <Havvy> Hmm, adding `enum mod` could be done post-1.0, but not if we wanted `enum` to act like that by default.
[04:39:23] <bjz> Havvy: yep
[04:39:29] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[04:39:33] <bjz> Havvy: I'm fine with the current way
[04:39:41] <jph> bjz, you're jumping a few steps ahead of where i'm at, right now i'm trying to hold back annoyance at writing a struct at all
[04:39:46] <jph> :P
[04:40:02] <bjz> jph: just trying to explain the philosophy is all
[04:40:07] <jph> yep
[04:40:16] <bjz> jph: the types are an extension of the documentation
[04:40:22] <Havvy> `enum mod` works syntactically enough already though...so...
[04:40:55] <bjz> Havvy: I do think leaving it to post 1.0 is an ok compromise
[04:41:04] <Havvy> Yeah.
[04:41:37] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[04:41:48] <gavinb> I guess I’ll just use a common prefix for now. I tried using ‘_’ to separate the prefix from the variant to make it cleaner, but then it complained about the identifier not being CamelCase.
[04:41:50] <bjz> Havvy: its a change that isn't necessary, so unfortunately (for some use cases) it is better to hold off for now
[04:42:03] <Havvy> bjz:  I agree.
[04:42:14] <bjz> gavinb: yeah, better not to have underscores in identifiers
[04:42:22] <bjz> type identifiers I mean
[04:44:29] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[04:44:30] *** Quits: brandonson (SingingBoy@610D90A5.EE9B234.1ECA502.IP) (Quit: WeeChat 0.4.3-dev)
[04:45:04] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[04:46:38] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[04:47:16] *** Joins: ChrisOei (ChrisOei@moz-30D80888.hsd1.ca.comcast.net)
[04:48:00] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:48:26] <gavinb> Are there many Rusticians based in Melbourne? Wondering about a meetup if there’s any interest.
[04:49:31] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[04:49:54] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[04:50:07] <bjz> gavinb: I am!
[04:50:14] <bjz> gavinb: ChrisMorgan is too
[04:50:20] <bjz> I would be interested
[04:50:38] <gavinb> cool
[04:50:39] <bjz> might not bee too many folks though
[04:50:42] <bjz> :)
[04:51:05] <gavinb> 3 is enough!
[04:51:16] <bjz> gavinb: Rust meetup #1
[04:51:18] <bjz> :D
[04:51:25] <csherratt> giant spider edition
[04:51:33] <bjz> lolwut
[04:51:37] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[04:51:55] <bjz> jph: you can think of it as the same as avoiding magic numbers - avoid magic types :D
[04:51:58] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[04:52:21] <dsrx> ^
[04:52:33] <dsrx> that is a good analogy
[04:52:40] <bjz> :)
[04:53:24] <jph> i think i need to wait till rust settles down more
[04:53:43] <bjz> well, in dependently typed languages, types are values. so it can be useful to think of them as values themselves, even if it is not supported by the language
[04:53:54] <bjz> jph: yeah, I don't blame you for that
[04:54:15] <jph> i can see potential but not having a compiling rust-http library, not having anything for lib managment between rustpkg and cargo is just a big PITA
[04:54:20] <bjz> jph: just hope you are not too put off by it - things will stabilise
[04:54:33] <jph> no i see the potential
[04:54:35] <bjz> yeah, I agree very much with that
[04:54:40] <jph> it's more the tooling that im annoyed by
[04:55:14] <jph> i just want to write and compile, i dont want to have to clone libraries and learn linking 
[04:59:47] *** Quits: reverend_paco (chatzilla@moz-FDBE15EC.hsd1.ma.comcast.net) (Ping timeout)
[04:59:56] <Havvy> Wait, what?  https://gist.github.com/Havvy/94abda8e61f703241693 and https://github.com/Havvy/rustlike/blob/stairs/src/librusttower/world/mod.rs
[05:00:09] *** Joins: rchar (chatzilla@moz-9AC54D4D.lv.lv.cox.net)
[05:00:52] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:00:52] <Havvy> (Errors in gist. Source in second link.)
[05:01:27] <aatch> Havvy, you have statics with the same name.
[05:01:36] <aatch> There's a lint that should catch that >.>
[05:01:53] <Havvy> I can't shadow statics?
[05:02:09] <aatch> Havvy, not like that, no.
[05:02:14] *** Joins: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net)
[05:02:25] *** Joins: andrew-d_w (andrew-d_w@moz-17320F4E.hsd1.ca.comcast.net)
[05:02:26] <aatch> It's recommended to have statics be in ALL_CAPS
[05:02:30] *** Joins: heftig_ (heftig@moz-19E06ABC.dip0.t-ipconnect.de)
[05:02:34] <aatch> there's even a lint that checks for it.
[05:02:36] *** Quits: andrew-d_w (andrew-d_w@moz-17320F4E.hsd1.ca.comcast.net) (Input/output error)
[05:02:43] *** Quits: cceckman (cceckman@moz-135DFDD5.bootp.virginia.edu) (Client exited)
[05:02:55] *** Quits: heftig (heftig@moz-D8B6C64B.dip0.t-ipconnect.de) (Ping timeout)
[05:02:58] <aatch> Dammit, it's off by default.
[05:03:17] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[05:03:17] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:06:14] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[05:07:20] <bjz> jph: understandable
[05:07:28] <bjz> jph: make is a pita
[05:07:31] <bjz> :)
[05:07:42] <jph> bjz, yeh, i've moved on from that
[05:07:43] <jph> heh
[05:07:50] <jph> dont make me learn it again
[05:07:57] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[05:07:59] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[05:08:01] <bjz> :)
[05:08:07] <bjz> dw, we will get there
[05:08:15] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[05:08:39] *** Quits: gavinb (gavinb@E673F25E.B9698BFB.D3BA2C17.IP) (Quit: gavinb)
[05:08:45] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[05:08:51] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[05:09:09] <bjz> Havvy: you can't shadow items. only bindings
[05:09:48] <Havvy> Yeah. I see that.  Turns out I didn't want to shadow anyways.
[05:10:30] *** Quits: brendan (brendaneic@moz-264E1FDC.static.wiline.com) (Quit: brendan)
[05:11:13] *** Quits: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[05:11:26] <meyer> When possible, is it generally better to use composed iterators for things, rather than hand-coded ones, even if they are complicated 
[05:11:28] <meyer> Like
[05:11:30] <meyer> type GraphemeClusters<'a> = Scan<'a, char, Option<&'a str>, CharOffsets<'a>, (Option<char>, uint)>;
[05:12:14] <rchar> what's the Rust way to iterate over strings for each character
[05:12:35] <meyer> chars() will iterate unicode codepoints
[05:13:01] <meyer> But I'm actually working on something that'll iterate user-perceived characters (approximately) right now
[05:13:03] <rchar> thanks!
[05:13:05] <meyer> (Grapheme clusters)
[05:14:16] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Connection reset by peer)
[05:15:25] *** Joins: kopasetik (wale@42F7A438.657ED1E.284344F5.IP)
[05:17:10] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:18:18] <Havvy> Why is `use` absolute when everywhere else type paths are relative?
[05:19:16] <Yurume> meyer: why does it return Option<&'a str> rather than &'a str?
[05:20:58] *** Quits: kopasetik (wale@42F7A438.657ED1E.284344F5.IP) (Quit: leaving)
[05:20:59] <meyer> Haven't tested it yet (right now GRaphemeClusters uses a struct and manual next implementation), but the docs say "The yielded values from the closure are yielded from the Scan instance when not None."
[05:21:22] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[05:21:24] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[05:21:29] <meyer> So I figured I'd yield None when no cluster boundary is between current and next character
[05:21:30] <Yurume> meyer: maybe that should be a separate struct of its own.
[05:21:32] <meyer> And yield the slice
[05:21:37] <meyer> Otherwise
[05:21:56] *** Joins: rook (rook@moz-31CCE085.hfc.comcastbusiness.net)
[05:22:13] <meyer> I'll probably try it with Scan, profile, and look how sane the implementation looks
[05:22:28] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[05:22:47] *** Joins: espindola (espindola@moz-8F3C95E7.dsl.teksavvy.com)
[05:22:59] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[05:23:05] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[05:24:03] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Quit: Textual IRC Client: www.textualapp.com)
[05:24:12] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[05:26:05] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[05:27:32] *** Joins: mno2 (mno2@E1E0A0A3.621D86F0.CFF65E33.IP)
[05:28:36] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[05:30:32] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[05:30:38] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[05:31:24] *** Joins: p1start (rewi@moz-E7F3D014.org)
[05:32:11] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Connection reset by peer)
[05:32:20] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[05:32:23] *** Quits: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca) (Input/output error)
[05:32:34] *** Joins: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca)
[05:32:59] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[05:34:01] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[05:35:42] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[05:36:59] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[05:37:04] *** Quits: Rym (y@C5DDBC24.DE104CC8.51C6DE68.IP) (Ping timeout)
[05:38:26] <olsonjeffery> this is pretty curious: error: unresolved import: there is no `slice` in `std`
[05:39:04] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[05:39:17] <Yurume> how?
[05:39:23] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[05:39:41] <olsonjeffery> ah. it's a new module.
[05:39:53] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[05:39:57] <olsonjeffery> my rust src is newer than my installed version by a few days.
[05:40:13] *** Quits: espindola (espindola@moz-8F3C95E7.dsl.teksavvy.com) (Quit: Leaving...)
[05:44:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:46:25] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:47:33] <bjz> fn main(){for r in range(0,64){for c in range(0,64){print!("{}",if(r&c)==0{"X"}else{" "})}println!("")}} // what does it do?
[05:48:53] <dougxxx> aw... what happened to rusti?
[05:49:03] <bjz> heh
[05:49:09] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Input/output error)
[05:49:18] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[05:49:58] <sfackler> bjz: nice
[05:50:10] <bjz> sfackler: https://news.ycombinator.com/item?id=7456751
[05:51:15] <meyer> Is there any way to set default values for individual fields in a struct, since we initialize structs with explicit field names?
[05:51:46] <bjz> meyer: no
[05:51:57] <meyer> Thanks
[05:52:02] <sfackler> you can use functional struct update like this though:
[05:52:12] <bjz> meyer: normally I have constructor functions
[05:52:22] <sfackler> static DEFAULTS: Foo = Foo { a: 10, b: "hi" }; let f = Foo { a: 11, ..DEFAULTS};
[05:52:22] <dougxxx> ? Doesn't Default do something like that?
[05:52:44] <bjz> sfackler: yep that is nice
[05:52:49] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Connection reset by peer)
[05:52:50] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[05:52:50] *** Quits: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca) (Ping timeout)
[05:52:54] <sfackler> dougxxx: Default allows you to call Default::default() to get a default initialized version of the struct
[05:53:14] <sfackler> so you could do let f = Foo { a: 11, ..Default::default() }
[05:53:20] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[05:53:31] <meyer> Not Foo::default()?
[05:53:41] *** Joins: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca)
[05:53:51] <sfackler> not right now
[05:54:11] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[05:54:15] <dougxxx> macro~ default!()
[05:54:22] <bjz> meyer: you will be able to do that in the future
[05:54:23] <dougxxx> Be easy to make surely~
[05:54:55] <bjz> meyer: I would normally just have a function impled directly on the type
[05:55:09] <bjz> like Foo::new() or Foo::empty()
[05:55:52] <bjz> you could also do some chained API, like Foo::new().a(10).b(~"hi")
[05:56:05] *** Joins: richo (richo@moz-7D9F2266.lflg1.vic.bigpond.net.au)
[05:56:31] <bjz> the methods would take self by-val
[05:56:37] <meyer> It is a really minimal thing, I'll either do new() or nothing at all
[05:57:55] *** Quits: richo (richo@moz-7D9F2266.lflg1.vic.bigpond.net.au) (Ping timeout)
[05:58:30] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[05:58:53] *** Joins: Ferreus (ferreus@moz-5854E1A7.customers.d1-online.com)
[05:59:01] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:59:52] <fmtq> hmm
[05:59:56] <fmtq> get an error building rust from git 
[05:59:56] <fmtq> 'llvm/IR/IRBuilder.h' file not found
[06:00:01] <fmtq> building on OS X 10.9
[06:00:43] <Yurume> is it a fresh clone or update?
[06:00:45] *** Quits: Ferreus (ferreus@moz-5854E1A7.customers.d1-online.com) (Ping timeout)
[06:00:45] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[06:00:59] <fmtq> update
[06:01:01] <fmtq> did a pull 
[06:01:09] <fmtq> didn't clean up properly?
[06:01:12] <Yurume> I think running ./configure again will fix that
[06:01:17] <fmtq> I did do that.
[06:01:22] <Yurume> hmm
[06:01:28] *** Quits: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca) (Quit: Leaving.)
[06:01:31] <fmtq> will try again 
[06:01:34] <fmtq> will run make clean first 
[06:01:35] <Yurume> how about `make clean-llvm` (or `make llvm-clean`? I'm not sure)
[06:01:39] <bjz> fmtq: you might have to nuke it
[06:01:45] <Yurume> that should force rebuilding LLVM
[06:01:46] <bjz> oh, try that^
[06:01:47] <fmtq> make clean-llvm running 
[06:02:02] <fmtq> can I do make -j5 without anything breaking?
[06:02:07] <fmtq> I know some build systems do not support -j well
[06:02:28] *** Joins: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp)
[06:02:44] <bjz> fmtq: I think it automattically does it in parallel if you have the cores
[06:02:52] <fmtq> it wasn't for me >_>
[06:03:09] <bjz> fmtq: also, it is better to do it in a separate directory
[06:03:17] <fmtq> how 
[06:03:29] <bjz> like, mkdir build; cd build; ../configure
[06:03:29] <fmtq> I know how to do that with cmake but not automake 
[06:03:30] <fmtq> haha
[06:03:33] <fmtq> orly
[06:03:40] <fmtq> well that's my mind fully esplode.
[06:03:43] <bjz> yerly
[06:03:44] <Yurume> bjz: wait a min, what does it do?
[06:03:55] <Yurume> I never ran ./configure in the separate directory
[06:04:01] <bjz> Yurume: does your build in a subdirectory
[06:04:04] <Yurume> oh
[06:04:14] <Yurume> that sounds quite interesting
[06:04:21] <fmtq> less mess more delete
[06:04:22] <Yurume> without rebuilding LLVM?
[06:04:25] <bjz> so if you have any problems, it's much easier to nuke the files
[06:05:09] *** Joins: edwardw (Mibbit@13A2FE5.E4C8743.30C05AB6.IP)
[06:05:11] <bjz> Yurume: it would rebuild it.
[06:05:19] <Yurume> that.. is unfortunate ;)
[06:05:22] <bjz> heh
[06:05:33] <bjz> I would only do that with a fresh clone
[06:05:54] *** Quits: nfroidure (nfroidure@moz-C115682E.w90-34.abo.wanadoo.fr) (Quit: Ex-Chat)
[06:05:54] <bjz> but it does make everything much cleaner
[06:06:28] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[06:06:31] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Taking a nap.)
[06:06:37] *** Joins: benjamin_____ (benjamin@moz-CB0B0B91.dip0.t-ipconnect.de)
[06:08:20] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:10:36] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:10:51] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[06:13:26] *** Quits: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp) (Client exited)
[06:14:42] *** Joins: brendan (brendaneic@212685B3.5B8F260F.586E6F35.IP)
[06:15:25] <tyoverby> Is there a way to do a parallel map over a Vec?
[06:16:08] *** Joins: derek_c (derek@moz-16A6DFBC.cit.cornell.edu)
[06:16:21] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[06:16:24] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[06:16:39] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[06:16:54] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[06:17:09] <derek_c> is there any difference between `fail!(err)` and `fail!("{}", err)`, assuming err implemented Show?
[06:17:29] *** Joins: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP)
[06:17:42] <derek_c> I mean, between `fail!("{}", err)` and `fail!(err.to_str())`
[06:18:02] <meyer> Are pattern guards idiomatic in general, rather than a normal match + block with an if/elseif/else inside?
[06:18:12] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Taking a nap.)
[06:18:12] *** Quits: ktt3ja (ktt3ja@moz-8D2A07E1.hsd1.va.comcast.net) (Quit: Leaving)
[06:18:33] <Yurume> derek_c: for the later cases, no differences AFAIK. for the former cases, it does have an important difference since fail!() arguments are wrapped in ~Any so that the parent can inspect it.
[06:18:40] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[06:18:54] <Yurume> rusti... oops!
[06:18:55] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[06:19:14] <derek_c> meyer: yeah I think so, particularly if that saves you a level of indentation
[06:19:20] <derek_c> Yurume: kk thanks
[06:19:33] <meyer> Alright. Going with pattern guards, then.
[06:20:10] <derek_c> Yurume: is there a more key-saving way to say fail!("{}", err)?  Just wondering
[06:20:20] <derek_c> something like failf?
[06:20:28] *** Joins: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp)
[06:20:32] *** Quits: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp) (Client exited)
[06:20:33] *** Joins: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp)
[06:20:47] <sfackler> derek_c: you can write it yourself
[06:20:52] *** Quits: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[06:20:58] <derek_c> sfackler: all right :)
[06:21:37] <rchar> I'm trying to write useful test function names; does rust have any hidden trickery to help me? A way to extend function names over multiple lines, or to give a string argument to test functions instead of nothing?
[06:22:01] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[06:22:07] *** Joins: brontron (brontron@moz-C8D86903.tc.ph.cox.net)
[06:22:13] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[06:23:14] <Yurume> derek_c: other than .to_str(), I don't see any shorter solution. cf. http://static.rust-lang.org/doc/master/std/macros/macro.fail.html
[06:24:12] *** Quits: kvanb (uid6924@moz-31ABA2C0.irccloud.com) (Quit: Connection closed for inactivity)
[06:24:58] <derek_c> Yurume: kk thanks!
[06:25:33] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[06:25:41] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[06:25:46] <carllerche> How can one specify timeouts w/ TCP connect?
[06:25:59] <Yurume> hmm, btw it is interesting, the unwind code does special-case &str and ~str to print a correct error message. ToStr impls wouldn't help here.
[06:26:32] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[06:26:36] *** Quits: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP) (Quit: This computer has gone to sleep)
[06:27:28] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[06:27:38] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[06:27:41] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[06:27:51] <Yurume> carllerche: it is a long-wanted feature which design is not yet set in stone. please refer to issues #3015, #3016, #6842 (main discussion), #11165 and #11223 for details.
[06:28:00] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[06:28:04] <derek_c> given an instance of an enum, is there a way to retrieve the name of the specific variant of the enum?
[06:28:25] <Yurume> derek_c: #[deriving(Show)] and invoke .to_str() method?
[06:29:01] <derek_c> I mean like, if you have `enum E {HAHA, HEHE}`, can you get "HAHA" from a HAHA instance? 
[06:29:03] <meyer> Should PRs be against a branch with all the commits squashed?
[06:29:41] <meyer> Or for a branch, that is.
[06:29:43] <Yurume> derek_c: #[deriving(Show)] enum E {HAHA, HEHE} fn main() { println!("{}", HAHA); }
[06:30:00] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:30:11] <derek_c> Yurume: I'm implementing Show myself though, so I want to get "HAHA" within my own fmt() implementation
[06:30:12] <edwardw> rusti: #[deriving(Show)] enum E {HAHA, HEHE} fn main() { println!("{}", HAHA); }
[06:30:32] *** Joins: richo (richo@moz-5897CF8A.static.tpgi.com.au)
[06:30:42] <Yurume> edwardw: no rusti ;_;
[06:30:50] <derek_c> what happened to rusti?
[06:30:55] *** Joins: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP)
[06:31:17] <Yurume> it runs on strcat's laptop (I think) so it is down when strcat is not here
[06:31:18] <edwardw> the laptop running it goes offline, I suppose
[06:31:51] <derek_c> ..............
[06:32:23] <Yurume> klutzy: you should bring mia here and compete with strcat :p
[06:32:29] <derek_c> back to my question though, what if I want "HAHA" in my own implementation of fmt()?
[06:32:42] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[06:33:00] <Yurume> derek_c: I don't understand the use case, do you want something like an error code plus description?
[06:33:04] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[06:33:12] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[06:33:18] <derek_c> Yurume: that's exactly it, yeah
[06:33:25] *** Joins: Ferreus (ferreus@moz-305FE1C6.dip0.t-ipconnect.de)
[06:33:33] <derek_c> I mean, I could just pattern match myself
[06:33:39] <Yurume> I don't think there is a good solution here
[06:33:48] <Yurume> other than the (slow) reflection
[06:34:24] <Yurume> technically speaking, #[deriving(Encodable)] and some Encoder hack can give you a variant name
[06:34:43] <Yurume> but I'd rather duplicate the code in the error message :p
[06:34:48] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[06:34:51] <Yurume> (and add tests to ensure that)
[06:36:04] <richo> So I'm fiddling with building these libgit2 bindings. Where is how rust will layout structs in memory documented? Is it best to create a rust struct with a single element containing a pointer to my libraries type, or to create the same struct in rust and pass it over?
[06:36:11] *** Joins: skade (skade@moz-1EC0F118.pools.arcor-ip.net)
[06:37:17] <edwardw> richo: http://static.rust-lang.org/doc/master/guide-ffi.html
[06:37:42] <richo> edwardw: am I just missing something?
[06:37:56] <richo> I've read this doc three times already today, btu it doesn't seem to make reference to structs in the ffi side anywhere
[06:38:06] <Yurume> aha
[06:38:18] <richo> only when you're poking at primive types in the foreign library
[06:38:44] <Yurume> richo: basically Rust struct follows the same alignment rules as C struct
[06:39:00] <richo> ok, that answers half of my question
[06:39:16] <Yurume> so if you have a C struct, you can literally copy that into Rust (with a syntax adjustment of course)
[06:39:37] <richo> awesome, thanks.
[06:39:43] <Yurume> I'm saying "basically" since passing the struct directly as a function argument is a bit more complex
[06:39:59] <Yurume> there are some bugs around it so you are currently not advised to do that
[06:40:00] *** Joins: alonlevy (alon@2CD54432.57968636.E9C721AF.IP)
[06:40:08] *** Quits: Soft (soft@moz-EC8D39F.yok.fi) (Ping timeout)
[06:40:18] <Yurume> richo: what is a remaining half of your question? :)
[06:40:24] <richo> well, the alternative is to just allocate myself a *u8 of the right length
[06:40:52] <richo> essentially that, is it considered best practice to have a struct that contains all of the fields, and pass that in, or have a struct that just contains a buffer of the right length and pass that in
[06:41:21] <richo> the paranoid part of me feels that if you link this against a weird version of libgit2 that changes implementation details, I can use a larger than needed buffer to start with and it'll still Just Work
[06:41:21] *** Joins: ofeldt (ofeldt@moz-B5600294.dip0.t-ipconnect.de)
[06:41:26] *** Quits: j3rky (gmpreussne@moz-97180B8B.nc.res.rr.com) (Quit: Leaving)
[06:41:48] <Yurume> if you treat the buffer as a black box *and* you know the exact size of the buffer, the buffer may work.
[06:41:59] <richo> (I'm also trying to work out how to make this not do ridiculous things if you build it against a different version than the one I copypasted all the structs from, is there any plan to let rust use native structs from C ?)
[06:42:07] *** Quits: ofeldt- (ofeldt@moz-D7DFF966.dip0.t-ipconnect.de) (Ping timeout)
[06:42:08] <richo> well, I don't need to know the exact size
[06:42:24] <Yurume> how can you allocate the buffer when you don't know the exact size?
[06:42:29] <richo> just a lower bound on what will work, the C side of things isn't going to care if you pass it too much memory unless it's doing something thoroughly broken internally
[06:43:10] <edwardw> ah, there's a tutorial doc metabug: https://github.com/mozilla/rust/issues/11755
[06:43:12] <Yurume> you at least need to know that lower bound. ;)
[06:43:22] <richo> oh, yes
[06:43:29] <richo> I definitely agree you need to know the lower bound
[06:43:34] <edwardw> there of them are FFI related, nothing covers C struct though :(
[06:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[06:44:22] <richo> once I'm more comfortable with rust internals I might have a look into it
[06:44:27] <richo> seems like a fun project
[06:44:54] <Yurume> richo: or you can measure the exact size for each platform and use #[cfg] to allocate the buffer with the exact size per each platform supported.
[06:45:28] <Yurume> btw, does the libgit2's interface frequently change?
[06:45:53] <Yurume> if it is the case then the situation might be much worse
[06:46:06] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Input/output error)
[06:46:09] <fmtq> hmm
[06:46:18] <fmtq> is it possible to get the length of an enum?
[06:46:24] <Yurume> length?
[06:46:26] <fmtq> do they even have a length?
[06:46:26] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:46:29] <fmtq> haha
[06:46:31] <Yurume> 3 for enum A {X,Y,Z} etc?
[06:46:33] <fmtq> the amount of items within the enum.
[06:46:36] <fmtq> yes 
[06:46:42] <Yurume> you can't without the reflection.
[06:46:46] <richo> Yurume: they're going about only changing on major releases, but it might be a pain to detect that in rust
[06:47:03] <richo> Yurume: (I also work on pygit2, so I know the git api ok, I just need to work out the rust part)
[06:47:33] <fmtq> I'm trying to think of a sane way to have a fixed set of identifiers have an equal sized vector 
[06:47:44] <fmtq> and use those enum items as the index identifiers
[06:47:51] <Yurume> richo: that sounds a bit painful. do the API-incompatible versions of libgit2 use the same library name? is it versioned?
[06:47:56] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[06:48:08] <Yurume> (there are some complex C/C++ libraries to do that in order to avoid the incompatibility issues)
[06:48:08] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[06:48:19] <edwardw> fmtq: https://github.com/mozilla/rust/blob/master/src/librustc/middle/lang_items.rs does that with macro
[06:48:19] *** Quits: heftig_ (heftig@moz-19E06ABC.dip0.t-ipconnect.de) (Quit: Quitting)
[06:48:32] <richo> it is versioned, so I guess I can just link against libgit2-21 instead of libgit2 and let the linker fix this for me
[06:48:33] <richo> libgit2.21*
[06:48:34] <Yurume> fmtq: macros are useful for that.
[06:48:39] <fmtq> macros!
[06:49:08] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[06:49:14] <Yurume> richo: I guess you need separate Rust libraries for each incompatible version of libgit2 then...
[06:49:15] <Sharp> *macro!s
[06:49:18] <Yurume> or #[cfg] magics.
[06:49:29] <fmtq> oh my that's insane
[06:49:30] <edwardw> Sharp: LOL
[06:49:32] <fmtq> haha
[06:50:00] <richo> Yurume: I don't see why I'd support anything other than latest stable
[06:50:12] <richo> it's more about trying to make it refuse to build against things that are going to barf horribly at runtime
[06:50:33] <Yurume> richo: ah, of course, if you only target the most recent version that'd be easy.
[06:50:58] <Yurume> I was talking about more general cases as I don't know about libgit2.
[06:51:07] <richo> yeah, no stress
[06:51:16] <richo> Hrm. Does rust's compiler know anything about bitfields?
[06:51:23] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[06:51:32] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:51:34] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[06:51:37] <richo> and it's best practice to treat things that are essentially as void* as *u8 right?
[06:51:48] <sfackler> no and yes
[06:51:59] <sfackler> there's also a c_void typedef in std::libc
[06:51:59] <richo> Sorry for all the silly questions. I've done some hello world stuff but not much Actual Stuff
[06:52:19] <sfackler> (I think it's actually an alias for () rather than u8)
[06:52:49] <sfackler> there should be aliases for all of the basic C types in std::libc
[06:52:59] <richo> awesome, thanks
[06:53:16] <richo> blurgh. I'm just realising now how much converting types by hand I'm going to have to do before I'll get any gratification at all :(
[06:53:30] <sfackler> richo: check out rust-bindgen
[06:53:36] <fmtq> seen some rumblings about vector changes lately 
[06:53:41] <fmtq> what should I be doing with vectors?
[06:53:45] <sfackler> it'll generate rust bindings for header files you give it automatically
[06:53:55] <sfackler> fmtq: ~[T] is being replaced by Vec<T>
[06:54:11] <fmtq> what does this mean to me, the layman
[06:54:54] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[06:54:55] <richo> sfackler: I had a look, it needs libclang and honestly I reckon I can do this by hand before libclang builds on this machine
[06:54:59] <Yurume> fmtq: Vec<T> would be required when you want to change its size in place.
[06:55:11] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[06:55:14] <richo> I don't suppose I can use the llvm and compiler-rt builds I've already got for rust for upstream libclang?
[06:55:29] *** Joins: mgottschlag (quassel@moz-93D11D99.cust.bluewin.ch)
[06:55:40] <Yurume> fmtq: the existing syntax ~[T] would be reused for an owned vector which size cannot be changed, but for the smoother transition it is currently being deprecated.
[06:56:07] <Yurume> once the original ~[T] is converted to Vec<T>, ~[T] with a new semantics will revive.
[06:56:11] *** Quits: skade (skade@moz-1EC0F118.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:56:30] <fmtq> very nice
[06:56:55] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[06:57:21] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[06:58:26] *** Joins: fabiand (fabiand@moz-2CF3E016.adsl.alicedsl.de)
[06:58:51] *** Parts: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) ()
[06:58:59] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[06:59:05] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[07:01:58] *** Joins: Titof (Mibbit@moz-DF84E0A1.univ-reunion.fr)
[07:02:18] <Titof> hi
[07:03:19] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[07:03:51] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[07:04:22] <Titof> can we use inheritance without implemented all trait methods
[07:04:54] *** Joins: Anupkumar (uid16774@moz-A42E5B7B.irccloud.com)
[07:05:34] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[07:05:51] *** Quits: alonlevy (alon@2CD54432.57968636.E9C721AF.IP) (Ping timeout)
[07:06:08] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[07:06:36] <diodesign> hm, anyone using rust-core? do you need the very latest rustc build to use it? I'm using rustc 0.9 and can't build it
[07:06:45] <diodesign> rust-core == https://github.com/thestinger/rust-core
[07:07:23] <Yurume> diodesign: many Rust libraries depend on the recent Rust builds within a week.
[07:07:48] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[07:07:51] <diodesign> and when I say "can't build", I mean I'm seeing a load of "error: intrinsic has wrong number of type parameters: found 1, expected 0" errors
[07:08:01] <geomyidae> Is there discussion of std::vec::Vec and what that means with ~[] ? I'm a bit confused,
[07:08:03] <diodesign> Yurume: yikes, ok
[07:08:17] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[07:09:07] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[07:09:26] <diodesign> Yurume: I'll build it from src
[07:09:36] <geomyidae> diodesign: what distro?
[07:09:48] <Yurume> diodesign: you can also find nightlies for your OS
[07:10:25] <diodesign> geomyidae: debian
[07:10:27] <Yurume> there are also nightlies for Windows (slightly lagging behind the Linux nightlies, but generally not bad to deal with)
[07:10:36] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Input/output error)
[07:10:49] <diodesign> Yurume: I tried to find nightly builds for x64 linux but just couldn't find any
[07:10:57] <diodesign> so I grabbed the 0.9 tarball and built it
[07:11:06] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[07:11:13] <Yurume> aha...
[07:11:15] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:11:35] <Yurume> I'm not sure about Debian, there is an Ubuntu PPA for Rust nightlies though
[07:11:41] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Input/output error)
[07:11:42] <fmtq> sane way to define a global constant like the size of a buffer?
[07:11:43] <diodesign> yeah it's ok
[07:11:51] <Titof> can we use inheritance without implemented all trait methods
[07:11:52] *** Quits: aurynj (Eon@C498BDEC.C264657C.C6282BC4.IP) (Quit: Leaving)
[07:11:53] <mcpherrin> diodesign: There are at least ubuntu and Arch builds.  You should build git master if you want source
[07:11:56] <diodesign> I'll just git clone, make install and sleep ;)
[07:11:57] <geomyidae> Is Vec<z> just superseceding ~[z] ?
[07:11:58] <Yurume> fmtq: static BUFSIZE: uint = 42; ?
[07:12:04] <mcpherrin> geomyidae: Yes
[07:12:04] <fmtq> static
[07:12:09] <geomyidae> mcpherrin: thanks
[07:12:13] <fmtq> danke
[07:12:20] <Yurume> geomyidae: Vec<T> takes over the current semantics of ~[T], ~[T] will be another type which is currently not possible
[07:12:25] <mcpherrin> geomyidae: At least, Vec<z> will be what ~[z] is now.
[07:12:42] <geomyidae> oh
[07:12:51] <mcpherrin> ~[T] will be more like ~[T, ..N]
[07:12:53] <geomyidae> Is this like DST related changes?
[07:12:58] <Yurume> yeah
[07:13:10] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[07:13:12] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:13:15] * geomyidae needs to get learned about that stuff, I've been avoiding it
[07:13:15] <mcpherrin> ~[T] won't be resizable
[07:13:19] <fmtq> Rust does my head in in a good way 
[07:13:20] <fmtq> :)
[07:13:21] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[07:13:24] <Yurume> the current semantics of ~[T] would be not same as ~([T]) when the DST lands
[07:13:33] <Yurume> so that has to be changed for the sake of consistency
[07:13:43] <Yurume> not to mention the efficiency ;)
[07:14:02] <diodesign> as a C programmer, all the strange Rust <T> stuff is my biggest sticking point right now, personally
[07:14:13] <Titof> Is there a way to make the inheritance without implemented  all methods ?
[07:14:30] <mcpherrin> Titof: no
[07:14:59] <Yurume> Titof: automatic dereference with `Deref` trait would make it a bit easier, but in general, no.
[07:15:27] <Yurume> diodesign: it is a C++ influence to be exact. :)
[07:15:57] <diodesign> Yurume: I thought as much
[07:15:57] <Yurume> we have changed many keywords to make it familiar to the existing C and C++ programmers
[07:16:05] <diodesign> cool
[07:16:09] <Yurume> `return` was originally `ret`, for example
[07:16:21] <mcpherrin> Rust is really closer to C than C++ in many ways
[07:16:29] <dougxxx> Everyone still seems to hate return though...
[07:16:31] <mcpherrin> the generics are nowhere near c++ templates
[07:16:32] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[07:16:38] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[07:16:41] <mcpherrin> dougxxx: People hate return? I haven't heard this
[07:16:52] <mcpherrin> You don't have to type it too often in Rust
[07:16:56] <Yurume> mcpherrin: semantically yes, but its surface syntax still resembles C++ enough
[07:17:08] <dougxxx> mhm, last statement = don't use return
[07:17:13] <dougxxx> I get told that a lot.
[07:17:22] <fmtq> rubyist swine!
[07:17:26] * fmtq pulls a sword
[07:17:36] * Yurume pushes a sword
[07:17:42] <mcpherrin> No need to get all swordfighty :)
[07:17:48] <fmtq> haha
[07:17:56] <fmtq> no it's perfectly fine in a system with proper type safety 
[07:18:05] <fmtq> because the compiler will warn you if you've screwed it up
[07:18:09] *** Joins: bjz_ (bjz@B398BE78.F804C29E.D35A31DF.IP)
[07:18:42] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[07:19:03] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:19:10] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[07:19:21] * dougxxx isn't convinced.
[07:19:22] <Titof> someone have a tuto for Rc/Gc ?
[07:19:36] <mcpherrin> Gc doesn't really work
[07:20:32] <Titof> why
[07:20:53] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[07:21:09] <Yurume> Titof: it is ongoing work
[07:21:38] <Yurume> the proper support for Gc would require some compiler changes
[07:22:26] <Yurume> Titof: if you are interested on it: https://github.com/mozilla/rust/pull/11399 is the main discussion.
[07:22:39] <Titof> thx
[07:22:41] <mcpherrin> Titof: Rc is mostly a box that contains a value that you can dereference
[07:22:51] *** Quits: mgottschlag (quassel@moz-93D11D99.cust.bluewin.ch) (Ping timeout)
[07:22:56] <mcpherrin> Rather, you can dereference the Rc to get the thing inside it
[07:23:16] <mcpherrin> it's basically a pointer and refcount
[07:23:30] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[07:23:40] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[07:24:11] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[07:25:25] *** Quits: limeburst (me@247D1419.D73964AC.27A8748.IP) (Ping timeout)
[07:25:36] *** Quits: trustin (trustin@946D547D.87A02F9E.6FF1C976.IP) (Ping timeout)
[07:25:39] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[07:25:46] *** Quits: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP) (Ping timeout)
[07:25:53] *** Quits: Valloric (Valloric@moz-288722BA.hsd1.ca.comcast.net) (Quit: Valloric)
[07:25:57] *** Joins: Soft (soft@moz-EC8D39F.yok.fi)
[07:26:03] *** Quits: Yurume (Yurume@A826BD81.8A0DEF81.38747683.IP) (Ping timeout)
[07:26:27] *** Quits: IanCormac84 (User@9A425872.2A8D8854.67DFF8B4.IP) (Ping timeout)
[07:27:03] *** Joins: IanCormac84 (User@9A425872.2A8D8854.67DFF8B4.IP)
[07:27:41] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[07:28:49] *** Joins: Rym (y@FD880926.C67B62F8.8772DA20.IP)
[07:29:01] <derek_c> how do you check if a pointer is null pointer?
[07:29:14] <edwardw> .is_null
[07:29:16] <eibwen> derek_c: a unsafe pointer?
[07:29:20] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[07:29:24] <derek_c> eibwen: yeah
[07:29:37] <edwardw> rather .is_null()
[07:29:48] *** Quits: richo (richo@moz-5897CF8A.static.tpgi.com.au) (Ping timeout)
[07:30:17] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[07:30:19] <edwardw> http://static.rust-lang.org/doc/master/std/ptr/trait.RawPtr.html#tymethod.is_null
[07:30:20] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[07:30:25] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[07:31:06] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[07:31:33] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Input/output error)
[07:31:56] <edwardw> ha, also is_not_null(), I didn't know that
[07:31:58] *** Quits: brontron (brontron@moz-C8D86903.tc.ph.cox.net) (Ping timeout)
[07:32:27] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[07:32:37] *** Joins: alan_andrade_ (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[07:33:25] *** Joins: ahunt (ahunt@moz-5E5AB5C8.range86-145.btcentralplus.com)
[07:33:49] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[07:34:10] *** Quits: alan_andrade_ (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Input/output error)
[07:34:29] <derek_c> edwardw: thanks :)
[07:34:58] *** Quits: Titof (Mibbit@moz-DF84E0A1.univ-reunion.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[07:35:15] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[07:35:19] *** Joins: trustin (trustin@946D547D.87A02F9E.6FF1C976.IP)
[07:35:30] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[07:35:31] *** Joins: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP)
[07:36:46] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Input/output error)
[07:37:04] *** Quits: bjz_ (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[07:37:13] *** Joins: Yurume (Yurume@A826BD81.8A0DEF81.38747683.IP)
[07:37:15] *** Joins: limeburst (me@247D1419.D73964AC.27A8748.IP)
[07:37:50] *** Joins: alan_andrade_ (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[07:38:03] <Yurume> awww, IRC connection was mysterically blocked from irc.mozilla.org (or my ISP)
[07:38:08] <Yurume> I had to get it around by using SSL
[07:38:44] <mcpherrin> Yurume: Some ISPs block IRC as it was or is popular for botnet command and control
[07:39:01] *** Joins: brontron (brontron@moz-C8D86903.tc.ph.cox.net)
[07:39:15] <Yurume> yes, but my box is in the IDC and even serves its own IRC server (for legitimate cases).
[07:39:21] *** Quits: alan_andrade_ (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Input/output error)
[07:39:22] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[07:39:30] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[07:40:16] <Yurume> actually that was PITA for me since moznet's open proxy checker mistook the IRC server as a proxy :S
[07:40:21] *** Quits: Soft (soft@moz-EC8D39F.yok.fi) (Ping timeout)
[07:40:26] *** Joins: alan_andrade_ (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[07:40:48] <Yurume> (I had to block all IRC connections from moznet servers)
[07:40:57] *** flaper87|afk is now known as flaper87
[07:41:57] *** Quits: alan_andrade_ (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Input/output error)
[07:42:10] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[07:43:39] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[07:43:51] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[07:43:55] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[07:44:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:44:33] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Input/output error)
[07:46:03] *** Joins: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net)
[07:46:03] *** ChanServ sets mode: +o huon
[07:46:06] *** Quits: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net) (Input/output error)
[07:46:25] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:47:14] *** Joins: newbie (kvirc@moz-FE27BA67.dip0.t-ipconnect.de)
[07:48:29] *** Quits: eibwen (kvirc@moz-BBC2056C.dip0.t-ipconnect.de) (Ping timeout)
[07:48:47] *** Quits: onelson (owen@18CF7301.95770028.5B6BFE7D.IP) (Ping timeout)
[07:49:16] *** Joins: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net)
[07:49:16] *** ChanServ sets mode: +o huon
[07:49:19] <geomyidae> I went from something that used to work, to something that builds but crashes. I know it's related to the pkt_data_ptr and the from_raw_parts or pcap_next_ex. the pointer syntax with C interface confuses me
[07:50:17] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[07:50:42] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[07:51:32] *** Quits: newbie (kvirc@moz-FE27BA67.dip0.t-ipconnect.de) (Ping timeout)
[07:51:44] <bjz> what is the differenc between NoShare and NoSend kind markers?
[07:52:14] <eddyb> Send is deep threadsafe ownership
[07:52:43] <eddyb> (you can move the value from one task to another)
[07:52:59] *** Quits: pepper_chico (pepper_chi@BE2968B5.6F4A2706.E4090502.IP) (Ping timeout)
[07:54:08] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:54:23] <eddyb> while Share means thread-safe non-ownership (multiple tasks can see the same &T, and if there's interior mutation, it has to be atomic/locked)
[07:54:50] <eddyb> bjz: good enough? or do I have to find the actual definitions?
[07:55:05] <bjz> hmm
[07:55:14] <bjz> I think it would be good to have examples
[07:55:22] <eddyb> riight
[07:55:26] <bjz> sorry
[07:55:48] <bjz> so I have some non-threadsafe ffi functions
[07:55:51] *** jorendorff is now known as jorendorff_away
[07:55:52] <eddyb> non-shared ownership with no interior mutation is Send, in general
[07:56:00] <bjz> and I want to make a context that cant be sent
[07:56:08] <bjz> to other tasks
[07:56:08] <eddyb> NoSend
[07:56:21] <bjz> ok
[07:56:37] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:56:43] <eddyb> if you have non-threadsafe operations through &T, also NoShare
[07:57:04] <eddyb> bjz: Arc<T> requires only T: Share AFAIK
[07:57:25] *** Joins: dotfelix (felix@BDCFDF84.AB3AC796.40E092AA.IP)
[07:57:31] <bjz> do you think it sounds like NoSend would be ok?
[07:58:10] <eddyb> is there any non-thread-safe method that works on &self?
[07:58:18] <bjz> like, they are ffi functions that are not protected by mutex stuff (whatever it is)
[07:58:43] <bjz> you mean &self of the context type?
[07:58:52] <eddyb> yeah
[07:58:54] <bjz> that was my plan
[07:59:01] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[07:59:03] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[07:59:04] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[07:59:09] <eddyb> add NoShare as well
[07:59:11] <bjz> to have like: glfw.poll_events()
[07:59:21] <bjz> so I need both?
[07:59:25] <eddyb> yupp
[07:59:43] <bjz> so confusing
[07:59:51] <bjz> heh, sorry
[07:59:54] *** Joins: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP)
[08:00:15] <eddyb> it's something like T: Share implies &T is Send
[08:00:32] <eddyb> (modulo lifetime issues)
[08:01:12] <bjz> mmk
[08:02:52] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[08:03:08] <eddyb> and I guess Arc<RWLock<T>> is Send even with only Share on T, so the mutability requirement of the methods doesn't matter
[08:03:50] <eddyb> bjz: so yeah, go for NoSend + NoShare if you have doubts
[08:03:53] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[08:03:57] <bjz> ok
[08:04:22] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[08:04:23] <eddyb> (<3 Rust expressing C API thread safety)
[08:04:44] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Ping timeout)
[08:04:45] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[08:05:46] *** Joins: dranov (dranov@10725E3C.94264913.FB866788.IP)
[08:06:46] <huon> The definition of Share is "T: Share if &T is threadsafe" (I think "threadsafe" here is "no data races")
[08:07:10] <mcpherrin> offtopic, but is imgur.com loading for anyone? I can't view http://imgur.com/a/uIPxf#0
[08:07:20] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Ping timeout)
[08:07:34] * huon can view 3 pictures about "holland drive"
[08:09:41] <mcpherrin> hmmph, it must just hate me then
[08:10:13] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[08:10:18] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[08:12:10] *** Parts: edwardw (Mibbit@13A2FE5.E4C8743.30C05AB6.IP) ()
[08:15:04] *** Quits: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP) (Quit: This computer has gone to sleep)
[08:16:15] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:16:41] *** Quits: dapz (textual@moz-F958911.hsd1.ca.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[08:18:06] *** Quits: derek_c (derek@moz-16A6DFBC.cit.cornell.edu) (Ping timeout)
[08:18:13] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:19:17] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[08:19:35] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[08:19:56] *** pmoore|away is now known as pmoore
[08:21:19] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[08:21:20] *** Joins: twi (Adium@moz-ED056769.cust.vodafonedsl.it)
[08:22:20] *** pmoore is now known as pmoore|buildduty
[08:24:25] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[08:25:28] *** Joins: Soft (soft@moz-EC8D39F.yok.fi)
[08:27:03] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Ping timeout)
[08:28:38] *** Joins: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP)
[08:29:58] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[08:30:18] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Max SendQ exceeded)
[08:30:24] *** Joins: jviereck (Adium@moz-859307B0.dclient.hispeed.ch)
[08:31:43] *** Quits: brontron (brontron@moz-C8D86903.tc.ph.cox.net) (Ping timeout)
[08:32:00] *** Quits: Ferreus (ferreus@moz-305FE1C6.dip0.t-ipconnect.de) (Quit: WeeChat 0.4.4-dev)
[08:34:01] *** Joins: yota (sdouche@moz-7D878FB8.securactive.net)
[08:34:28] *** Quits: Rym (y@FD880926.C67B62F8.8772DA20.IP) (Ping timeout)
[08:34:35] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[08:35:12] *** Joins: Rym (y@FD880926.C67B62F8.8772DA20.IP)
[08:35:59] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[08:36:17] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[08:36:39] *** Quits: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP) (Quit: leaving)
[08:36:59] *** Joins: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP)
[08:37:24] *** Quits: Soft (soft@moz-EC8D39F.yok.fi) (Ping timeout)
[08:37:56] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[08:41:40] *** Quits: dotfelix (felix@BDCFDF84.AB3AC796.40E092AA.IP) (Quit: dotfelix)
[08:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:44:09] *** Joins: Ms2ger (Ms2ger@moz-4A14BC33.ugent.be)
[08:45:31] *** Joins: brihat (bdsatish@moz-5EC00491.dhcp.inet.fi)
[08:45:42] *** Parts: brihat (bdsatish@moz-5EC00491.dhcp.inet.fi) ()
[08:46:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:47:00] *** Quits: lukem (Mibbit@7F64772F.63E6F0B5.217FF3D2.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:47:57] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[08:48:29] <fmtq> hmm
[08:48:34] <fmtq> how do you make an object copyable?
[08:48:39] *** Quits: jviereck (Adium@moz-859307B0.dclient.hispeed.ch) (Ping timeout)
[08:49:29] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[08:49:53] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[08:50:24] *** Joins: paraze (paraze@moz-96380A71.w86-209.abo.wanadoo.fr)
[08:51:02] <eddyb> fmtq: as in, let x = ...; let y = (x, x, x, x, x);?
[08:51:16] <fmtq> I think I mean a cloneable trait 
[08:51:19] <fmtq> maybe
[08:51:26] <fmtq> error: copying a value of non-copyable type
[08:51:26] <Ms2ger> #[deriving(Clone)]?
[08:51:34] <fmtq> what is this syntax I don't even 
[08:51:48] <fmtq> looks like something out of a CDATA nightmare
[08:51:54] <eddyb> lol unrelated
[08:51:58] *** Joins: paraze_ (paraze@moz-96380A71.w86-209.abo.wanadoo.fr)
[08:52:02] *** Quits: paraze_ (paraze@moz-96380A71.w86-209.abo.wanadoo.fr) (Client exited)
[08:52:12] <eddyb> fmtq: the error you get is because your type isn't Pod
[08:52:20] <fmtq> what is pod 
[08:52:24] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[08:52:28] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[08:52:36] <eddyb> fmtq: I don't have a better example than the one with making a few copies of x in a tuple, but it's the same thing
[08:52:58] <eddyb> fmtq: Pod comes from "plain old data" and it means your type copies by default, instead of moving
[08:53:37] <eddyb> fmtq: you can't contain fields that require any kind of destructor
[08:54:12] <eddyb> like, ~T won't be freely copiable, because that would easily result in multiple frees on the same pointer
[08:54:12] <fmtq> I feel I am doomed.
[08:54:16] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[08:54:27] <eddyb> fmtq: *however* we have the Clone trait that can be automatically derived
[08:54:51] <eddyb> fmtq: put #[deriving(Clone)] (like Ms2ger said) right before your struct/enum definition
[08:55:11] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[08:55:16] <fmtq> that means I have to put a clone method on every child of that struct too right
[08:55:30] <eddyb> each field has to implement Clone
[08:55:34] <eddyb> but you can just have deriving everywhere
[08:55:36] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[08:55:45] <eddyb> fmtq: that will let you call .clone() on it to create the cheapest (potentially deep) clone it can
[08:55:49] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[08:56:30] <eddyb> a shared pointer like Rc<T> will just increase the refcount and give you a new handle. but ~T will have to clone T's contents (which can lead to a deep clone)
[08:56:38] <eddyb> same with Vec<T>
[08:57:00] *** Joins: [squiddy] (squiddy@moz-686F69E9.dip0.t-ipconnect.de)
[08:58:19] <fmtq> hmm
[08:58:25] <fmtq> I found a slight flaw in my plan there 
[08:58:31] <eddyb> fmtq: we really ought to have a guide for value/ownership semantics in Rust and related concepts
[08:58:45] <fmtq> I am trying to make a 2D vector of an object
[08:58:53] <fmtq> object isn't even the right term for rust is it 
[08:58:59] <fmtq> an instantiation of a struct?
[08:59:00] <fmtq> lol
[08:59:03] <eddyb> a value ;)
[08:59:05] *** Joins: oxum (anonymous@DC665320.FE7DDF00.520CDC98.IP)
[08:59:07] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:59:10] <fmtq> copying a value of non-copyable type `[Tile, .. 32]
[08:59:21] <eddyb> fmtq: what's in Tile?
[08:59:24] <fmtq> it doesn't not approve of my [[Tile, ..32], ..32]
[08:59:39] <eddyb> Tile sounds like maybe it should be Pod
[08:59:41] <fmtq> I'll just gist this
[08:59:44] *** Quits: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:59:57] <eddyb> I mean, if you have 1024 Tile's you don't want each of them to own something big
[08:59:58] <fmtq> https://gist.github.com/bbqsrc/c8b6c34cc834a1d37fb8
[09:00:16] <fmtq> at this point I'm just playing around 
[09:00:30] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[09:00:39] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[09:01:00] <eddyb> fmtq: this is likely wrong https://gist.github.com/bbqsrc/c8b6c34cc834a1d37fb8#file-confuse-rs-L9-L13
[09:01:26] <fmtq> wrong how
[09:01:27] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:01:38] <eddyb> fmtq: well, that enum optimizes to a nullable pointer, maybe that's what you want
[09:01:45] <fmtq> that is what I wanted
[09:01:49] <fmtq> hence doing it :P 
[09:01:54] <eddyb> fmtq: but do you really want a heap allocation for each tile?
[09:02:03] <fmtq> for now, yes 
[09:02:11] <eddyb> isn't &'static Fixture better than ~Fixture?
[09:02:20] <fmtq> I don't know 
[09:02:23] <fmtq> I'm new here
[09:02:44] <eddyb> the enum would still be a nullable pointer, and you would just have all the fixture types in static memory
[09:03:12] <eddyb> fmtq: it would reuse memory instead of allocating on the heap for each tile
[09:03:24] <eddyb> aaand Tile would be Pod
[09:03:38] <fmtq> omg
[09:03:40] <fmtq> it was that
[09:03:57] <eddyb> fmtq: that was the only thing that can't be freely copied
[09:04:22] <dougxxx> or you could use *
[09:04:27] <fmtq> the pointer system in Rust entirely does my head in.
[09:04:28] <dougxxx> probly a bad idea I usppose
[09:04:29] <eddyb> dougxxx: nonono
[09:04:32] <fmtq> I need good reading material on this.
[09:04:39] <eddyb> dougxxx: never suggest needless unsafe
[09:04:42] <dougxxx> * is good; it's simple. Giant unsafe blocks are amazing. 
[09:04:43] <dougxxx> :P
[09:04:49] <fmtq> hey now
[09:04:50] * eddyb kicks dougxxx
[09:04:53] <fmtq> I'm not using C for a reason
[09:05:28] <eddyb> fmtq: static FIXTURE_FOO: Fixture = Fixture {id: FOO_ID, icon: 'F'};
[09:05:46] *** Quits: pepijndevos (pepijndevo@9EACEF43.E50A3180.BCE47D84.IP) (Ping timeout)
[09:05:49] <fmtq> and I can define that in a module to keep the namespace clean
[09:05:51] * fmtq rubs beard
[09:05:53] <eddyb> fmtq: if you have that, then you can take &FIXTURE_FOO and that's a copiable reference, of type &'static Fixture
[09:06:04] <dougxxx> I'm quite serious though; for large arrays I still think unsafe is better than messing around with borrowing data; just wrap it in a safe public api.
[09:06:13] * dougxxx shrugs
[09:06:22] <dougxxx> *large multidimensional arrays
[09:07:03] <eddyb> dougxxx: you can still do those with a Vec<T> and storing dimensions separately
[09:07:12] *** Joins: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP)
[09:07:13] * dougxxx looks dubious
[09:07:28] <eddyb> dougxxx: though a possible future ~[[T]] is probably your best bet there
[09:07:32] <dougxxx> yep
[09:07:37] <dougxxx> I can agree with that
[09:07:56] <eddyb> I mean, most of the time you don't want resizeable
[09:08:40] <eddyb> so a DST ~[T] with two dimension counts can still work as a library
[09:08:46] <eddyb> s/as/in
[09:08:53] <fmtq> eddyb: how do I then create a tile out of that static though?
[09:09:05] <fmtq> eddyb: how do I then create a tile out of that static though?
[09:09:05] <fmtq> error: mismatched types: expected `FixtureType` but found `Fixture` (expected enum FixtureType but found struct Fixture)
[09:09:15] <fmtq> derp how did I hit up instead of paste
[09:09:21] <fmtq> and then still hit enter? >_>
[09:09:25] <eddyb> fmtq: Fixture(&FIXTURE_FOO)
[09:09:31] <fmtq> oooh
[09:09:54] <fmtq> I'm getting it!
[09:09:55] <fmtq> :D
[09:09:57] <eddyb> fmtq: you can use Option<T> instead of your FixtureType, if you want all the fancy methods
[09:10:21] <eddyb> Option<&'static Fixture> to be precise
[09:10:29] * fmtq rubs beard
[09:10:35] <fmtq> but then I have Some and None
[09:10:42] <fmtq> less pretty.
[09:10:45] <eddyb> you can iterate an Option, you can do Functor-like and Monad-like patterns
[09:10:56] <eddyb> fmtq: you only use those to construct
[09:11:13] <eddyb> and fixture: Some(&FIXTURE_FOO) makes sense
[09:11:22] <fmtq> yes 
[09:11:51] <eddyb> then you can do things like tile.fixture.unwrap_or(&FIXTURE_DEFAULT)
[09:11:56] *** Joins: jviereck (Adium@moz-B9C0530E.ethz.ch)
[09:11:58] <eddyb> or other crazy things depending on your needs
[09:12:25] <eddyb> fmtq: I wish I knew how to make this cheaper https://gist.github.com/bbqsrc/c8b6c34cc834a1d37fb8#file-confuse-rs-L60-L62
[09:12:54] <eddyb> you can probably store a &'static str in Fixture, now that you're not making a million copies of it on the heap
[09:13:56] <eddyb> fmtq: is this something like nethack or Dwarf Fortress? what you have is already interesting :D
[09:14:19] <fmtq> haha yes
[09:14:22] <fmtq> like a crossbreed
[09:14:39] <fmtq> I was thinking more like ascii survival horror 
[09:14:44] <fmtq> in a roguelike fashion
[09:14:51] <fmtq> with an ultima online style skill system.
[09:15:23] *** Joins: Veld (Mibbit@moz-4A19983C.ip227.fastwebnet.it)
[09:16:02] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 31.0a1/20140322030204])
[09:17:03] <eddyb> hmm, you know what's easy to do in Rust, and I'd really like to see?
[09:17:13] <eddyb> fmtq: do you know how minecraft's chunk generation can lead to lag?
[09:17:14] <myname>  fmtq: like cataclysm dda?
[09:17:32] <fmtq> I have never heard of that myname
[09:17:33] *** Joins: jviereck1 (Adium@moz-B9C0530E.ethz.ch)
[09:17:58] <myname> it's a game where you have to survive a zombie outbreak as long as possible
[09:18:00] *** Quits: jviereck (Adium@moz-B9C0530E.ethz.ch) (Connection reset by peer)
[09:18:01] <fmtq> haha wow that looks cool 
[09:18:33] <myname> you can push yourself with drugs but have to make sure not to get addicted
[09:18:40] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[09:18:43] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[09:18:46] *** Joins: libfud (libfud@moz-73F272E4.res-cmts.eph2.ptd.net)
[09:18:54] *** Joins: jviereck (Adium@moz-B9C0530E.ethz.ch)
[09:19:03] <eddyb> fmtq: in Rust, you could just generate chunks in separate tasks (you can get fancy and use a WorkQueue - I hear Servo has a nice one)
[09:19:11] <myname> i can't play it very well now, but i like the idea
[09:19:11] *** Quits: jviereck (Adium@moz-B9C0530E.ethz.ch) (Client exited)
[09:19:18] *** Quits: jviereck1 (Adium@moz-B9C0530E.ethz.ch) (Ping timeout)
[09:19:22] <eddyb> fmtq: and then send them very cheaply to the render thread
[09:19:30] <Ms2ger> I'm being told we do have a nice one
[09:19:44] <libfud> so I'm considering packaging a rust rpm for fedora (need to go through the whole process on that end)
[09:19:47] <fmtq> eddyb: yeah I was thinking of doing just that haha 
[09:20:12] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[09:20:18] <eddyb> there's like nothing ridiculously complicated that you have to think of
[09:20:21] <fmtq> it's pretty much what I'm here to do 
[09:20:23] <libfud> what do I need to do for permission from you (rust devs an dmozilla)
[09:20:26] <fmtq> see how that plays 
[09:20:38] <fmtq> but I haven't actually considered how to do the UI layer right now
[09:20:40] <eddyb> if it compiles and if it doesn't crash outright, it's likely to never break
[09:20:59] *** Quits: oxum (anonymous@DC665320.FE7DDF00.520CDC98.IP) (Quit: Bye..)
[09:21:13] *** Joins: oxum (anonymous@DC665320.FE7DDF00.520CDC98.IP)
[09:21:13] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[09:21:54] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[09:22:02] <eddyb> Ms2ger: I have a feeling Heisenbugs will die just like Heisenberg
[09:22:15] <eddyb> gonna miss 'em
[09:22:28] *** Joins: Soft (soft@moz-EC8D39F.yok.fi)
[09:22:31] <eddyb> those 0xb00b1e55 page faults
[09:22:51] <fmtq> eddyb: now I need to work out how to random number generate
[09:23:12] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:23:24] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[09:23:31] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[09:23:48] *** Joins: heftig (heftig@moz-D746319F.unitymedia.biz)
[09:23:51] <eddyb> fmtq: check out the docs, it's pretty straight forward
[09:24:00] <fmtq> oh it's already a thing?
[09:24:02] <fmtq> much shiny
[09:24:23] <eddyb> fmtq: you can even implement the relevant trait for your own types, and, like, generate random Tile values
[09:24:32] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[09:24:50] <eddyb> do we have #[deriving(Rand)]?
[09:25:34] <eddyb> Ms2ger: hahaha I just thought of putting #[deriving(Rand)] on the entire AST
[09:25:46] * Ms2ger glares
[09:25:53] <eddyb> who needs source level fuzzing?
[09:25:58] <Yurume> eddyb: with Boltzmann sampler?
[09:26:06] <Yurume> I remember graydon has suggested that
[09:26:17] <eddyb> though it's a recursive structure so you need to restrict it somehow
[09:26:20] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Ping timeout)
[09:26:25] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[09:27:33] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[09:27:50] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[09:27:52] *** Quits: Rym (y@FD880926.C67B62F8.8772DA20.IP) (Connection reset by peer)
[09:27:54] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[09:28:06] <eddyb> Yurume: hmmm
[09:28:09] *** Joins: Rym (y@FD880926.C67B62F8.8772DA20.IP)
[09:28:15] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Ping timeout)
[09:28:20] <Jesse> what's a Boltzmann sampler?
[09:28:34] <eddyb> Yurume: genetic coding on the AST with compiler error resolution
[09:28:56] <Yurume> Jesse: http://algo.inria.fr/flajolet/Publications/DuFlLoSc04.pdf
[09:28:57] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Client exited)
[09:29:34] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[09:30:04] <eddyb> Yurume: interesting read
[09:30:04] *** Quits: neopara (neopara@moz-58DA824C.hfc.comcastbusiness.net) (Client exited)
[09:30:41] <Yurume> yeah, it is quite interesting, though I don't have enough understanding to actually try to implement that
[09:30:49] *** Joins: neopara (neopara@moz-58DA824C.hfc.comcastbusiness.net)
[09:30:50] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[09:30:57] <fmtq> hmm
[09:31:05] <fmtq> use rand::random; doesn't seem to work for me 
[09:31:14] <eddyb> fmtq: did you do extern crate rand;?
[09:31:23] <fmtq> what is this witchcraft
[09:31:27] *** Joins: doener (bs@moz-AA189A5A.unitymedia.biz)
[09:31:38] <eddyb> fmtq: importing libraries, basically
[09:31:59] <fmtq> hmm
[09:32:04] <fmtq> wasn't rand part of std back in teh day 
[09:32:06] <fmtq> or extra 
[09:32:12] <eddyb> extra is dead
[09:32:16] <fmtq> oh my
[09:32:28] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[09:32:36] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[09:32:36] *** Quits: neopara (neopara@moz-58DA824C.hfc.comcastbusiness.net) (Ping timeout)
[09:32:52] <fmtq> randomness always did my head in 
[09:33:17] *** Quits: brendan (brendaneic@212685B3.5B8F260F.586E6F35.IP) (Quit: brendan)
[09:36:01] <fmtq> not sure how to go about randomly generating this without a giant match statement with a Range 
[09:37:18] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[09:37:28] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[09:40:08] <Jesse> like match uint_less_than(5) { 0 => ..., 1 => ..., }
[09:40:09] <Jesse> ?
[09:40:21] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[09:40:37] <Jesse> i'm going to write a macro to replace that ugly pattern
[09:40:45] <Jesse> if someone doesn't beat me to it
[09:41:20] <eddyb> fmtq: if you have an enum, #[deriving(Rand)] (which exists, I've checked) will pick variants for you
[09:41:25] *** Joins: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca)
[09:41:50] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[09:42:41] <fmtq> I do not have an enum for the tiles
[09:42:44] <fmtq> as Tile is just a struct
[09:43:02] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[09:43:47] <eddyb> fmtq: yeah, right, you'll have to write a range yourself
[09:43:52] <fmtq> nuuuu
[09:43:55] *** Joins: arturo (Thunderbir@moz-7C33E8D7.pool.mediaways.net)
[09:44:46] <eddyb> fmtq: though you can probably define all the static data like fixture types *and* the code to match a range over them, with a macro
[09:44:59] <fmtq> I'd have to write a macro then though 
[09:45:46] <eddyb> fmtq: or you can put them in an array
[09:46:10] <eddyb> and just do FIXTURE_TYPES[x % FIXTURE_TYPES.len()]
[09:46:20] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:47:26] *** Joins: richo (richo@5BEF6C48.4F8E5344.E8FB17D0.IP)
[09:47:41] *** Quits: zootm (calum@moz-150DDDC2.sgyl.cable.virginm.net) (Ping timeout)
[09:47:46] <richo> was there any reply to "Can I find out the length/size of an enum" in the end?
[09:47:50] *** Joins: skade (skade@B4A5FE21.505237C9.CAE22B62.IP)
[09:48:03] <eddyb> richo: length and size can mean two different things
[09:48:16] <eddyb> richo: you can do size_of::<T>() for any T, including enums
[09:48:24] <Yurume> richo: no, but you can use macros or other mechanisms to semi-automatically get the number of variants.
[09:48:33] <Yurume> (I think richo's original question was about the number of variants)
[09:48:33] *** Quits: p1start (rewi@moz-E7F3D014.org) (Ping timeout)
[09:48:52] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[09:48:53] <eddyb> you may be able to get what you need with derived implementations
[09:48:59] <richo> Oh, yes. I want the number of variants, not the size of a thing in an enum
[09:49:00] <richo> Sorry
[09:49:12] <richo> If it helps for context, I just posted this to the list https://mail.mozilla.org/pipermail/rust-dev/2014-March/009167.html
[09:49:13] <eddyb> richo: what for?
[09:49:14] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[09:49:19] * eddyb reads
[09:49:25] <richo> which is now absurdly meta because it also references a discussion on irc
[09:49:54] <richo> There's a part of me that kinda hopes it is a bug, purely so I have an excuse to hack on rust itself
[09:50:08] <eddyb> richo: it is a bug
[09:50:12] <fmtq> richo: you and I wanted the same thing 
[09:50:15] <Yurume> it should *not* work. enums variants are totally typed, meaning that it may cause the non-exhaustive pattern in the match for example.
[09:50:32] <eddyb> Yurume: ahh right
[09:50:35] <fmtq> I wanted to create a vector based on how many variants of an enum there was 
[09:50:36] <fmtq> haha
[09:50:39] <Yurume> i.e. it is not even correct to use `*_MAX` variant in the enums
[09:50:51] <eddyb> Yurume: associated items to the rescue?
[09:50:53] <richo> fmtq: I want the same thing
[09:50:59] <eddyb> ::MIN and ::MAX?
[09:51:10] <Yurume> eddyb: more preferably, #[deriving(Bounded)]?
[09:51:30] <Yurume> in conjunction with CTFE...
[09:51:34] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[09:51:38] <eddyb> Yurume: but it could have associated items
[09:51:41] <richo> Yurume: Surely that can still be handled by the type system, or am I missing something? It seeems that if the enum variant you use is nonscalar it should just barf?
[09:52:10] <eddyb> richo: it could be the discriminant values
[09:52:21] <Yurume> richo: well, for example, enum X { A, B, C, MAX } will be problematic when you match against X: match v { A => "A", B => "B", C => "C", MAX => ????? }
[09:52:28] <fmtq> rogue.rs:46:15: 46:43 error: type `rand::distributions::range::Range<int>` does not implement any method in scope named `ind_sample`
[09:52:28] <fmtq> rogue.rs:46         match between.ind_sample(&mut rng) {
[09:52:29] <fmtq> :|
[09:52:43] <eddyb> fmtq: you will have to import all the traits
[09:52:55] <fmtq> oh
[09:52:56] <eddyb> fmtq: with use rand::SomeTrait;
[09:53:09] <eddyb> because rand is not in std, it means you don't get all the traits in the prelude
[09:53:19] *** Quits: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net) (Ping timeout)
[09:53:19] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[09:53:33] <Vermeille> what would be the best way to write a lexer? in Haskell you would just pattern match against the lazy string, in C/C++ use some kind of implicitly buffered stream. What about Rust?
[09:53:34] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[09:53:49] <richo> Yurume: oh, I see what you're saying. it's not that it wouldn't work as a scalar length for the vector, it's that the dangling variant which is implicitly invalid is silly?
[09:54:04] <eddyb> Vermeille: iterators
[09:54:35] <eddyb> Vermeille: you get the (theoretical) performance of Haskell while keeping yourself rooted in precise resource management
[09:54:43] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[09:55:09] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[09:55:48] <fmtq> oh this is cool: http://static.rust-lang.org/doc/master/rand/distributions/struct.WeightedChoice.html
[09:57:12] <Vermeille> eddyb: so you would use .chars() and go back to the C/C++ way? accumulating a token then compare it against keywords etc
[09:57:22] <eddyb> with DST we'll be able to have MaybeOwned<T> {Owned(~T), Static(&'static T)} and it will work for str and [T]
[09:58:01] *** Joins: nkoep (nik@moz-ECB2D115.pool.mediaways.net)
[09:58:18] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[09:58:20] *** Joins: jackneill (jackneill@moz-45F260D4.pool.digikabel.hu)
[09:58:29] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[09:58:42] <eddyb> Vermeille: I guess you can't simply be as lazy as in Haskell because we don't have generators, so you'll have to write your own state machine
[09:59:43] *** Quits: skade (skade@B4A5FE21.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[09:59:44] <eddyb> Vermeille: you can still pattern match your way through it, just slightly more verbose
[10:00:28] <fmtq> https://gist.github.com/bbqsrc/c8b6c34cc834a1d37fb8
[10:00:31] <Ms2ger> eddyb, so did you know something about those urandom failures?
[10:00:43] <fmtq> https://gist.github.com/bbqsrc/c8b6c34cc834a1d37fb8#file-confuse-rs-L94
[10:00:47] <fmtq> not sure what I'm doing wrong here.
[10:00:50] *** Joins: neopara (neopara@moz-58DA824C.hfc.comcastbusiness.net)
[10:01:36] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[10:01:45] <huon> fmtq: you call trait method via the trait
[10:01:52] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[10:01:52] <huon> i.e. Rand::rand()
[10:01:57] <fmtq> oh
[10:01:57] <huon> but then you're missing arguments
[10:02:00] <huon> (the Rng)
[10:02:07] <fmtq> many confuse 
[10:02:14] <huon> and that will duplicate a single random instances
[10:02:17] <Vermeille> okay thank you eddyb !
[10:02:17] <eddyb> fmtq: aww but that won't work ^^
[10:02:21] <huon> not creating several
[10:02:24] <kimundi> fmtq: What exactly confused you about that one line?
[10:02:32] *** Quits: neopara (neopara@moz-58DA824C.hfc.comcastbusiness.net) (Ping timeout)
[10:02:34] <huon> Ms2ger: what failures?
[10:02:49] <fmtq> kimundi: the part where it doesn't work because I implemented the trait wrong or called it wrong or whatever
[10:02:55] <Ms2ger> huon, task '<unnamed>' failed at 'Error opening /dev/urandom',
[10:03:09] <eddyb> Vermeille: ... partial::FO => match c {'r' => keyword::FOR, c => ident(str::from_chars(['f', 'o', c]))}, ...
[10:03:19] <fmtq> huon: so where should I begin fixing this?
[10:03:26] <huon> fmtq: theoretically `let mut rng = rand::task_rng(); [rng.gen(), rng.gen(), rng.gen(), ...]`
[10:03:32] <Ms2ger> From hashmap::HashMap::new -> os::imp::OSRng::new
[10:03:33] <huon> assuming you want different instances for each one
[10:03:41] <huon> Ms2ger: oh, that's weird
[10:03:50] <eddyb> Ms2ger: can you provide full backtrace?
[10:03:50] <huon> why would /dev/urandom fail to open?
[10:03:52] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[10:03:56] <huon> eddyb: I know the problem
[10:03:57] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[10:04:04] <huon> it's almost certainly creating a hashmap
[10:04:04] <eddyb> oh you do?
[10:04:11] <Ms2ger> It is
[10:04:11] * fmtq does not understand.
[10:04:12] <huon> which initialises the task_rng
[10:04:13] <richo> I actually have to run. I'm on ludicrously expensive tethered internet. I'll check in later
[10:04:22] <huon> which seeds itself from /dev/urandom
[10:04:25] * huon wrote that code
[10:04:27] <huon> fmtq: sec
[10:04:30] <eddyb> sure, but why would it fail?
[10:04:36] <huon> eddyb: yeah, don't know
[10:04:39] <eddyb> is it creating a HaskMap outside of a task?
[10:04:41] <huon> maybe too many files open?
[10:04:42] <huon> eddyb: nope
[10:04:45] <eddyb> that's why I want to see a backtrace
[10:04:46] <huon> it works fine normally
[10:04:59] <eddyb> Vermeille: you can maybe use macros to make that more compact
[10:05:06] <Ms2ger> https://pastebin.mozilla.org/4666191
[10:05:09] <huon> Ms2ger: is this a new failure?
[10:05:23] <Ms2ger> Came with the rust upgrade in Servo
[10:05:40] <Ms2ger> So, last 30 days or so
[10:05:45] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[10:05:55] *** Quits: richo (richo@5BEF6C48.4F8E5344.E8FB17D0.IP) (Ping timeout)
[10:06:04] <eddyb> Ms2ger: can you run it under strace?
[10:06:14] <Ms2ger> Probably?
[10:06:15] <huon> Ms2ger: weird
[10:06:19] <Vermeille> I will try that eddyb :) is there any equivalent to >>= ?
[10:06:21] <eddyb> Ms2ger: maybe you can find the actual error returned by open or whatever
[10:06:31] <huon> Vermeille: .and_then is defined on some types
[10:06:45] *** Quits: arturo (Thunderbir@moz-7C33E8D7.pool.mediaways.net) (Ping timeout)
[10:07:11] <eddyb> Vermeille: why would you use that? Rust code can't "yield", we'd use generators for that but we don't have them
[10:07:13] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[10:07:13] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: daschl)
[10:07:43] <huon> Ms2ger: (I'm going to submit a PR that makes the errors more useful)
[10:07:53] <Ms2ger> Yay, another upgrade :/
[10:08:00] <eddyb> Ms2ger: just run it under strace :P
[10:08:01] <Ms2ger> eddyb, what am I looking for
[10:08:02] <Ms2ger> ?
[10:08:06] <eddyb> open(
[10:08:15] <huon> Ms2ger: the patch will be small
[10:08:16] <eddyb> Ms2ger: actually, grep for /dev/urandom
[10:08:24] <huon> so you can back port it for debugging purposes
[10:08:28] <Ms2ger> open("/dev/urandom", O_RDONLY)          = 3
[10:08:32] <eddyb> there shouldn't be more than ten lines total
[10:08:42] <Ms2ger> Four of those
[10:08:45] *** Joins: skade (skade@B4A5FE21.505237C9.CAE22B62.IP)
[10:08:49] <eddyb> Ms2ger: hmm that's not failing
[10:09:02] <Vermeille> eddyb: it's useful when dealing with Options, to make sure that a sequence of operations does not fail without checking at every step if it's not Nothing
[10:09:13] <Ms2ger> Next is futex(0x21b7c18, FUTEX_WAKE_PRIVATE, 1task '<unnamed>' failed at 'Error opening /dev/urandom'...
[10:09:14] <meyer> huon: I think it was you I mentioned this (grapheme cluster iteration) to yesterday. I have a diff: https://github.com/Meyermagic/rust/commit/86baa14a1a00a106b19b7c12cf00acd64d8d6d52 . Besides adding tests, is there anything glaring you think I should change before I submit a PR?
[10:09:14] <eddyb> (None in Rust)
[10:09:27] <eddyb> Vermeille: I guess I was still thinking in the context of a state machine
[10:09:33] <huon> meyer: I'll look in a bit
[10:09:44] <meyer> huon: kk. No hurry.
[10:10:01] <huon> fmtq: do you want every entry to be random?
[10:10:25] <fmtq> ultimately yes 
[10:10:33] <fmtq> but I know right now it'll just generate one and copy it 32*32 times
[10:10:40] <Ms2ger> eddyb, so much for strace :)
[10:10:51] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[10:10:55] <fmtq> was going to get the randomness working first then work out how to sanely do that 
[10:10:56] <fmtq> :P
[10:11:05] *** Joins: jviereck (Adium@moz-B9C0530E.ethz.ch)
[10:11:42] <eddyb> Vermeille: where you want to be able to handle the minimal unit, a char in this case
[10:11:59] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[10:12:49] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[10:12:52] <eddyb> Vermeille: however, if you have an Iterator, you can freely do iter.next().and_then(|a| iter.next().and_then(|b| [a, b]))
[10:12:58] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[10:13:15] <huon> fmtq: https://gist.github.com/huonw/3277f2f66f4c59cdafe6/revisions
[10:13:32] <eddyb> Vermeille: we have a try!(expr) macro for early return in the case of Err (for Result), you can wrap a char iterator so it returns Result instead
[10:13:38] <fmtq> okay that's cool
[10:13:44] <fmtq> but how do I implement the trait I was trying to implement?
[10:14:07] <eddyb> Vermeille: and then do let a = try!(get()); let b = try!(get());
[10:14:09] <fmtq> or did we do that already 
[10:14:14] <fmtq> I'm not sure what's going on here I suppose 
[10:14:33] <eddyb> Vermeille: you can see that you can go further and wrap such a pattern in specific macros, akin to a DSL
[10:14:48] <huon> fmtq: oh?
[10:14:58] <huon> fmtq: you mean https://gist.github.com/huonw/3277f2f66f4c59cdafe6#file-confuse-rs-L40-L61 ?
[10:15:06] <fmtq> yes
[10:15:14] <fmtq> is that already being used by rng.gen()?
[10:15:16] <huon> fmtq: just use the `rng`
[10:15:18] <fmtq> ie, type system magic 
[10:15:23] <huon> yeah
[10:15:24] <huon> magic
[10:15:25] <fmtq> wow 
[10:15:28] <fmtq> I approve
[10:15:41] <huon> fmtq: http://static.rust-lang.org/doc/master/rand/trait.Rng.html#method.gen
[10:15:47] <huon> the magic is the <T: Rand>
[10:16:13] <fmtq> aha
[10:16:19] <fmtq> I am still getting my head around traits.
[10:16:31] <fmtq> I come from a Java/Python/JavaScript world.
[10:16:42] *** Quits: jviereck (Adium@moz-B9C0530E.ethz.ch) (Connection reset by peer)
[10:16:42] *** Joins: jviereck1 (Adium@moz-B9C0530E.ethz.ch)
[10:17:12] <eddyb> fmtq: well, they're like Java interfaces
[10:17:30] <huon> fmtq: (updated with a neater implementation of Rand)
[10:17:41] <eddyb> fmtq: but instead of being contained within classes, they're atop (or aside) types
[10:17:55] <eddyb> fmtq: the disconnection makes them more powerful than interfaces, in general
[10:18:12] <fmtq> oh yeah I get the core concept 
[10:18:13] <huon> fmtq: http://static.rust-lang.org/doc/master/src/rand/home/rustbuild/src/rust-buildbot/slave/doc/build/src/librand/lib.rs.html#186-189 is the definition of gen
[10:18:21] <fmtq> I mean to say the syntax and the practical application
[10:18:22] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[10:18:25] <fmtq> it's one thing to understand it in theory haha
[10:18:40] <huon> you can see how it's just deferring directly to the only information that it has about T (i.e. that it implements the Rand trait)
[10:18:43] *** Quits: mno2 (mno2@E1E0A0A3.621D86F0.CFF65E33.IP) (Quit: mno2)
[10:18:54] <eddyb> huon: interesting, so this fails even though open doesn't fail https://github.com/mozilla/rust/blob/master/src/librand/os.rs#L39-L40
[10:18:55] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[10:19:07] <eddyb> Ms2ger: all those open calls, they all return positive numbers, right?
[10:19:10] <Ms2ger> Yes
[10:19:12] <Ms2ger> All 3
[10:19:29] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[10:19:41] <Ms2ger> All four return 3, that is
[10:19:52] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[10:20:05] <fmtq> huon: yeah 
[10:20:10] <fmtq> "defined duck typing"
[10:20:24] <eddyb> fmtq: parametric polymorphism
[10:20:32] * fmtq has a brain esplode
[10:20:36] <Ms2ger> "magic"
[10:20:39] <fmtq> haha
[10:21:04] <eddyb> I think "defined duck typing" means "parametric non-parametric polymorphism"
[10:21:19] <whitequark> isn't "duck typing" just "structural typing"?
[10:21:21] <fmtq> hmm maybe 
[10:22:15] <eddyb> i.e. duck typing can be defined by the absence of parametric polymorphism while you used the reverse
[10:22:18] <fmtq> also I couldn't find anywhere in the documentation that strings could be mutable
[10:22:25] <fmtq> in fact, the tutorial led me to believe they were not 
[10:22:50] <eddyb> fmtq: they are growable
[10:22:58] <eddyb> and I guess truncatable
[10:23:10] <fmtq> well I know that now :P 
[10:23:27] <eddyb> they are not mutable in the sense that you can't just change a character
[10:23:37] <eddyb> and remove/insert can be expensive
[10:23:46] *** Quits: jviereck1 (Adium@moz-B9C0530E.ethz.ch) (Quit: Leaving.)
[10:24:10] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[10:24:34] <eddyb> we could have a sane 32-bit unicode string implementation that makes it cheap to change characters, but it's something specialized
[10:24:48] <libfud> man I really wish that this page would have come up on some google searches
[10:24:51] <libfud> http://static.rust-lang.org/doc/0.9/complement-cheatsheet.html
[10:24:57] <eddyb> well, that's 0.9
[10:25:00] <kimundi> strings are values, so mutable/immutable only applies to the APIs they expose, not to the type itself.
[10:25:10] <huon> eddyb: the open does fail?
[10:25:13] <jmgao> eddyb: if by character you mean codepoint, sure
[10:25:18] <eddyb> huon: I mean, the open syscall doesn't fail
[10:25:28] <huon> eddyb: ... yeah it does?
[10:25:30] <eddyb> huon: oh and its green so it could be something funky in libuv :/
[10:25:30] <fmtq> okay, thanks peeps for helping me out today 
[10:25:32] <fmtq> :)
[10:25:33] *** Quits: klaus (koz@moz-4486E876.hsd1.wa.comcast.net) (Quit: klaus)
[10:25:36] <huon> eddyb: oh, I see what you mean
[10:25:38] <huon> sorry
[10:25:39] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[10:25:42] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[10:26:03] <eddyb> jmgao: right
[10:26:08] <eddyb> libfud: SEO PRs are welcome :P
[10:26:24] <libfud> haha
[10:26:49] <libfud> I may actually try something like that once I get done with some other things
[10:27:01] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[10:27:13] <libfud> eddyb: what I'm more interested in right now is getting rust packaged for fedora
[10:27:23] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[10:27:23] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[10:27:26] <libfud> not that it's especially hard to just build it
[10:27:44] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[10:27:49] <eddyb> huon: there's like 4 levels of abstraction that could each fail, we'll have to wait for your error fix
[10:28:01] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:28:18] <eddyb> libfud: not having terrible URLs would help, too :)
[10:28:45] <libfud> it is what it is I guess
[10:28:56] <libfud> I've recently discovered rustdoc
[10:29:02] <libfud> which is freakin amazing
[10:29:05] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[10:29:20] <eddyb> libfud: it's all fixable
[10:30:02] <libfud> oh yeah, i've been trying to find info on this
[10:30:03] <eddyb> but we can't just experiment with the amazon server, so someone who knows what they're doing has to talk to brson or some other core dev which has access to that and get things changed :/
[10:30:09] <libfud> what architectures does rust build on?
[10:30:36] <eddyb> at least x86, x64, ARM, MIPS
[10:30:51] <eddyb> I don't know whether LLVM even supports, x32, I should check that
[10:31:01] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[10:31:16] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[10:31:24] <libfud> cool, covers the primaries for fedora
[10:31:56] <libfud> well it's an i686 and x86_64 package on fedora
[10:32:06] <libfud> oh, do you mean a different thing
[10:32:30] <eddyb> i686 is x86 and x86_64 is x64 (or amd64)
[10:32:42] <eddyb> (the former is also ia32)
[10:32:44] <libfud> yeah, you just said x32 so I thought 32 bit
[10:33:01] <eddyb> ia64 is itanium IIRC. x32 is x64 with 32-bit address space
[10:33:03] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[10:33:10] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[10:33:12] <sigma> libfud: If it's any help here's the nightly build packages on arch: http://pkgbuild.com/~thestinger/repo/
[10:33:15] <libfud> does intel still make itanium?
[10:33:30] <libfud> thanks sigma
[10:33:41] <libfud> rpms are a little different though
[10:33:44] *** Joins: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru)
[10:33:45] *** Quits: aravindavk (aravinda@moz-BD0CADEE.redhat.com) (Quit: Leaving)
[10:33:54] <sigma> yeh, it was just for inspiration :)
[10:33:56] <eddyb> http://www.phoronix.com/scan.php?page=news_item&px=MTExNDE
[10:34:05] *** Joins: Earnestly (earnest@18162BE0.BA6AC103.30311652.IP)
[10:34:06] <libfud> apparently someone already has an rpm for it
[10:34:12] <libfud> but it's in a ppa style thing
[10:34:30] <libfud> I'd rather have it in rpmfusion or preferably the release/update repos
[10:34:32] <eddyb> "The patch to LLVM adds X32 psABI support and introduce a new 'X32' environment for x86-64 target to tell X32 psABI from LP64 psABI"
[10:34:32] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Client exited)
[10:34:45] <fmtq> so er
[10:34:53] <fmtq> why is there the text from a book in my binary
[10:34:58] <eddyb> ohh so maybe we only need to add cabi support for x32 and it will just work?
[10:35:03] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[10:35:04] <eddyb> fmtq: hahaha
[10:35:12] <fmtq> is this an rng thing
[10:35:18] <eddyb> fmtq: how did you manage to trigger rtabort? or did you run "strings"?
[10:35:21] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[10:35:25] <fmtq> I ran strings
[10:35:32] <fmtq> the binary is 2MB and I was questioning why 
[10:35:41] <eddyb> that's rtabort, like failure during failure
[10:35:44] <huon> meyer: (I'm not sure if a detailed review is what you wanted, but that's what you're getting :) )
[10:35:50] <fmtq> whut
[10:35:53] <eddyb> fmtq: it's huge because of dead code that can't be proven dead
[10:36:00] <eddyb> rusti isn't here so I can't demonstrate
[10:36:18] <libfud> I heard that it's deprecated
[10:36:19] <meyer> huon: No, this is exactly what I wanted. I won't have time to respond and edit tonight, though. I'm going to sleep soon.
[10:36:21] <libfud> :(
[10:36:25] <meyer> Thanks a bunch.
[10:36:58] <huon> meyer: np, no rust
[10:37:01] <huon> *rush
[10:37:09] <huon> lots of rust!
[10:37:11] <meyer> Yes rust, no rush
[10:37:14] <eddyb> fmtq: struct Foo; impl Drop for Foo {fn drop(&mut self) {fail!("bar");}} fn main() {let x = Foo; fail!("foo");}
[10:37:17] <eddyb> fmtq: that should trigger it
[10:37:37] <libfud> https://github.com/fabiand/rust-spec/blob/master/rust.spec
[10:37:49] <fmtq> eddyb: it just crashed normally.
[10:37:54] <fmtq> task failed during unwinding (double-failure - total drag!)
[10:37:54] <fmtq> rust must abort now. so sorry.
[10:38:03] <eddyb> oh, that changed
[10:38:13] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[10:38:39] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[10:38:58] <eddyb> fmtq: the large binary size issue is known
[10:38:59] <Yurume> libfud: eddyb refers to rusti the IRC bot, not rusti the command.
[10:39:06] <libfud> oh
[10:39:55] <eddyb> fmtq: you may try to add -Z lto to your rustc invocation
[10:40:13] <eddyb> fmtq: though I warn you that it is signfinicantly slower
[10:41:08] <huon> fmtq: also -O, if you're not doing that already
[10:41:37] <Earnestly> eddyb: (I thought -Z was now -g, hm)
[10:41:47] <eddyb> Earnestly: -g is -Z debuginfo
[10:41:57] <Earnestly> Ah yes
[10:42:50] <Vermeille> how do you take the (first) value an iterator points to? I only see next(), I assume there is a better way than .nth(0)
[10:43:01] <fmtq> I am confused now 
[10:43:04] <fmtq> what are we trying to do here 
[10:43:10] <fmtq> make it print chunks of book?
[10:43:24] <eddyb> fmtq: -O -Z lto is all optimization stuff
[10:43:25] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[10:43:33] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[10:43:34] <kimundi> Vermeille: Well next() is the same as nth(0), and both do exactly what you want
[10:43:44] *** Joins: richo (richo@2D0DF12.84D8D36B.BC5E5DF7.IP)
[10:43:52] <eddyb> Vermeille: keep in mind that it moves the iterator forward
[10:44:00] <fmtq> -Z lto gets it down to 400KB
[10:44:01] <fmtq> :) 
[10:44:13] <richo> How can I initialize an empty struct, basically I just want the memory so I can call an ffi function to init it
[10:44:14] <fmtq> there's still a book in it though 
[10:44:17] <bvssvni> Vermeille: therefore iterators needs to be mut
[10:44:25] <eddyb> richo: mem::init()
[10:44:29] *** Joins: kris (kris@moz-147EE6DF.diku.dk)
[10:44:36] <eddyb> fmtq: see my comment about dead code not being removed
[10:44:49] <Zr40> fmtq: https://github.com/mozilla/rust/blob/master/src/libgreen/macros.rs
[10:45:05] <Zr40> from line 72 onwards
[10:45:07] <richo> let mut mything: *Repository = mem::init() ? Will it infer the size?
[10:45:10] <fmtq> it clicks now
[10:45:14] <eddyb> richo: that's wrong
[10:45:15] <Vermeille> Oh my bad, I thought that next() would advance the iterator *then* return the pointed value
[10:45:44] <richo> eddyb: yeah, I'm not sure I understood you
[10:45:47] <eddyb> Vermeille: it gets the value then advances. i.e. the first time you call .next() you get the first value
[10:45:58] <eddyb> richo: mem::init() gives you a zeroed structure
[10:46:32] <eddyb> let mut my_thing: Repository = mem::init(); some_ffi_init_fn(&mut Respository);
[10:46:41] *** Joins: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP)
[10:47:06] <eddyb> fmtq: the task mechanism is too dynamic for LLVM to actually see through so it has to keep all the IO runtime with everything that you don't use
[10:47:12] *** Joins: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net)
[10:47:15] <eddyb> fmtq: not to mention the fact that it doesn't inline those things
[10:47:18] <bvssvni> Vermeille: http://static.rust-lang.org/doc/master/std/iter/trait.Iterator.html#tymethod.next
[10:47:27] <fmtq> eddyb: presumably fixing this is in the pipeline?
[10:47:42] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[10:47:45] <richo> eddyb: Ah, I see now. I guess I should just make the caller pass the repo in on the stack, rather than returning memory elsewhere?
[10:47:53] <eddyb> fmtq: not "coming next week" but rather "acrichto is banging his head sometimes trying to figure it out"
[10:48:02] <richo> I'm still getting my head around exactly how ownership works in rust
[10:48:16] <huon> meyer: needs tests ;) (looks pretty good)
[10:48:18] <fmtq> eddyb: yeah 
[10:48:29] <fmtq> "on the list"
[10:48:44] <eddyb> I do have a workable solution, with weak items *and it doesn't require LTO*
[10:48:57] <huon> eddyb: idea, or implementation?
[10:48:57] <eddyb> I'm pretty sure "LTO as a requirement" was why we dropped the weak ideas
[10:49:18] <eddyb> huon: the implementation shouldn't be impossible
[10:49:21] <meyer> huon: Great. After I add tests and address most of those comments, I'll go ahead and submit a PR, I guess.
[10:49:25] <eddyb> huon: I mean, for me
[10:49:44] *** Quits: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru) (Quit: Leaving...)
[10:49:44] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:49:47] <eddyb> huon: but I'm not sure, for example, where I would specialize libraries (the std-green-jemalloc example from yesterday)
[10:49:59] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[10:50:15] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[10:50:42] <eddyb> I guess rustc could modify the .bc from an rlib (to include the resolution of said weak items) and trigger optimizations passes on it
[10:51:07] <eddyb> huon: Tobba wants to write an RFC and I have other things to do :/
[10:51:22] <huon> eddyb: an implementation theoretically not being impossible is a good start :P
[10:51:54] <eddyb> huon: but where do you save the specialized binary :/?
[10:52:05] <eddyb> the build system can trigger it, no problem
[10:52:30] <eddyb> but what if you need a crazy combination after you installed in /usr? without caching this method is useless
[10:52:48] <Ms2ger> huon, (you'll let me know if you have news about urandom?)
[10:53:18] <huon> Ms2ger: yeah, writing the patch now
[10:53:36] <eddyb> Ms2ger: you can probably change a couple lines in librand and just recompile it in the last stage
[10:53:37] <Ms2ger> Thanks
[10:54:30] <eddyb> Ms2ger: to display the IoError instead of dismissing it, when it fails
[10:54:35] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[10:54:38] <eddyb> Ms2ger: maybe we should've said this half an hour ago :P?
[10:54:44] <Ms2ger> Maybe :)
[10:55:03] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[10:55:06] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[10:55:09] <eddyb> but huon's patch is good in general, so I hope you found something else to do in the meanwhile :P
[10:55:25] <Ms2ger> Eh, class :)
[10:56:05] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[10:56:26] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[10:56:39] <huon> eddyb: how do you know my patch is good?
[10:56:51] <huon> that's a big claim :P
[10:57:05] <eddyb> huon: not dismissing errors is good in general
[10:57:33] *** Joins: neopara (neopara@moz-58DA824C.hfc.comcastbusiness.net)
[10:58:13] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[10:59:14] *** Quits: neopara (neopara@moz-58DA824C.hfc.comcastbusiness.net) (Ping timeout)
[10:59:54] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[11:00:01] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[11:00:39] *** Joins: leowoe (Leo@moz-CEF2400C.inf.uni-konstanz.de)
[11:01:04] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[11:02:37] *** Joins: vmx (vmx@moz-42FD76A7.pools.arcor-ip.net)
[11:02:41] <tfogal> I've got a C library that exposes some symbols as enums or maybe #defines, in very much the manner of the 'flags' argument of open(2).  The FFI guide doesn't explain how to wrap these constants... do I need to look up the actual number things map to and encode that as a rust variable?
[11:03:29] *** Joins: Sorella (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[11:04:39] *** Quits: Blub\1 (wry@620605B3.71150E1A.237AE2BA.IP) (Ping timeout)
[11:04:39] *** Joins: wry (wry@620605B3.71150E1A.237AE2BA.IP)
[11:04:58] *** Quits: Sorella (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Client exited)
[11:05:20] *** Joins: hirsch (Mibbit@moz-93FB92D1.itwm.fhg.de)
[11:08:29] * Ms2ger recompiles rustc...
[11:09:34] *** Quits: richo (richo@2D0DF12.84D8D36B.BC5E5DF7.IP) (Ping timeout)
[11:09:40] <Yurume> tfogal: look at collections::EnumSet.
[11:09:43] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:10:15] <Yurume> though open(2) is slightly more complex than ordinary bit flags, so EnumSet might not be suitable for it.
[11:10:45] <tfogal> Interesting.. but I am not sure this actually addresses my question.  Maybe I'm missing something
[11:11:03] <tfogal> i'm wondering if, since O_RDONLY is defined in a C header file, there is some way I can use O_RDONLY from within rust
[11:11:07] <eddyb> tfogal: I think bindgen can gather constants from defines and stuff
[11:11:32] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:12:12] * Ms2ger recompiles rustc...
[11:12:16] <Yurume> tfogal: yeah, either use bindgen or hand-write the necessary constants. if there are lots of constants, the former will be helpful (but not perfect).
[11:12:20] <tfogal> eddyb: hadn't heard of that until now.  you're referring to gh crabtw/rust-bindgen?
[11:12:36] <Yurume> yes.
[11:13:02] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[11:13:06] * tfogal gives it a try.
[11:13:07] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[11:13:07] <tfogal> thanks!
[11:13:54] <Vermeille> is there a way to match expr in macros? let say the argument is '42 + 666' can I match a pattern like 'a + b'?
[11:15:24] *** Quits: Rym (y@FD880926.C67B62F8.8772DA20.IP) (Ping timeout)
[11:17:55] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[11:17:58] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[11:18:21] <eddyb> Vermeille: what's an expr?
[11:18:34] *** Joins: marc_ (uid5324@moz-31ABA2C0.irccloud.com)
[11:18:39] *** Joins: Rym (y@FD880926.C67B62F8.8772DA20.IP)
[11:18:40] <eddyb> Vermeille: you're in Haskell anymore ;)
[11:19:41] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[11:19:41] *** Quits: japaric (japaric@65A1FC0F.FD3D1332.95AFB88D.IP) (Ping timeout)
[11:19:49] <Ms2ger> *not
[11:19:59] *** Joins: japaric (japaric@2B3146EA.839FBF92.95AFB88D.IP)
[11:20:02] <huon> tfogal: btw, there's std::libc with many constants like that pre-defined
[11:20:03] <eddyb> Ms2ger: wow I totally ruined that
[11:20:10] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[11:20:21] * eddyb puts head down in shame
[11:20:21] <huon> I'd guess std::libc::O_RDONLY works (although I'm not sure)
[11:20:25] *** Joins: Sorella (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[11:20:33] <bvssvni> Vermeille: did you meant ($a:expr + $b:expr) => ?
[11:20:50] <eddyb> oh and they said "macros" and not "match"
[11:20:56] <eddyb> why do I even open my mouth?
[11:21:14] <eddyb> or rather, why do I write when I can't read?
[11:21:28] <bvssvni> eddyb: at least you don't force push to wrong repository :P
[11:21:28] <Vermeille> bvssvni: kind of. expr can be any Rust expresion. is there a way to "destructure" this expr?
[11:21:39] <eddyb> Vermeille: ahh no :(
[11:21:52] <Ms2ger> foo!(a + b + c)
[11:22:05] <tfogal> huon: yeah unfortunately it's not exactly that, I just didn't expect anyone to know what NetCDF is and wanted to frame the question understandably :-)
[11:22:09] <eddyb> Vermeille: macro parsing is a bit too eager for that (if you use expr on the LHS)
[11:22:12] <tfogal> huon: but good to know nonetheless, thanks!
[11:22:28] <eddyb> Vermeille: with syntax extensions you have access to the AST, but that may be overkill here
[11:22:34] <huon> tfogal: oh, ok :)
[11:22:43] <Vermeille> Okay :) that would be very fun for DSLs but definitely not an absolute necessity
[11:22:54] <huon> I don't think $a: expr + $b: expr will ever work
[11:23:00] <eddyb> Vermeille: you can use tt or ident instead of expr though
[11:23:03] <huon> the + $b will always get consumed into the $a
[11:23:12] <huon> (oh, eddyb said that...)
[11:23:21] * huon tunes back out
[11:23:34] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[11:24:36] <huon> tfogal: btw, I've heard of NetCDF (never used it or looked at it much, though :P )
[11:25:13] <Vermeille> I'm writing a little interpreted and it would have been fun to have something like `to_ast!(1 + 2 * 3)` which returns `Plus (~Const (1), ~Mult (~Const (2), ~Const (3)))`
[11:25:18] <Vermeille> interpreter*
[11:25:22] <tfogal> heh
[11:25:39] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[11:25:58] <bvssvni> Vermeille: then you will have problems with infix operator precedence
[11:26:48] <Vermeille> bvssvni: there's a way to do exactly that in Template Haskell, but I don't remember how they deal with precedence
[11:27:51] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[11:28:16] <bvssvni> Vermeille: make sure to add a bunch of unit tests
[11:28:47] *** jorendorff_away is now known as jorendorff
[11:29:19] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[11:29:57] *** Joins: lunaryorn (lunaryorn@moz-B9F1570E.dynamic.mnet-online.de)
[11:30:11] <bvssvni> Vermeille: it's the first time I hear of 'Template Haskell' :o
[11:30:24] <Vermeille> There is definitely a lack of exercises for newbies and stupid people in Rust. In find myself being completely unable to write a lexer because I don't manage to iterate on chars
[11:30:33] *** Quits: Mathieu (cicak@420C86E4.9C1E3043.FBF02BB8.IP) (Ping timeout)
[11:30:38] <Vermeille> bvssvni: it's absolutely crazy and wonderful :D
[11:30:40] <eddyb> Vermeille: I think you can do that in macros
[11:30:40] *** Quits: gimpf (gimpf@moz-F83BFCD0.adsl.highway.telekom.at) (Ping timeout)
[11:31:07] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[11:31:10] *** Quits: benjamin_____ (benjamin@moz-CB0B0B91.dip0.t-ipconnect.de) (Ping timeout)
[11:31:11] <eddyb> Vermeille: but I don't know if we have a matcher type for literals :/
[11:31:21] <eddyb> Vermeille: well, it's a tt so it should work
[11:32:06] <Ms2ger> std::io::IoError{kind: IoUnavailable, desc: "I/O is unavailable", detail: None}
[11:32:23] <huon> Ms2ger: that's weird...
[11:32:35] <huon> it looked a lot like you were in a task context to me before
[11:32:37] <Vermeille> eddyb: what's a tt? I don't see anything about that on the wiki
[11:32:40] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[11:32:57] <eddyb> Vermeille: token tree
[11:33:06] <eddyb> Vermeille: usually one token
[11:33:08] *** Parts: meyer (meyer@moz-A9CF56E4.hsd1.ca.comcast.net) ()
[11:33:45] <eddyb> huon: maybe the task pointer gets "stolen"?
[11:34:03] * huon checks the servo contents
[11:34:38] <eddyb> not sure if Local::take() does that
[11:34:51] <eddyb> huon: this was my first guess though
[11:35:03] <huon> eh, doesn't seem to
[11:35:33] *** Joins: Kynes (Kynes@moz-3DC6C6E7.mit.edu)
[11:35:41] <huon> https://github.com/mozilla/servo/blob/master/src/components/main/constellation.rs#L312-L316 are the only two hashmap::new's and they certainly seem to be in a task context
[11:35:47] <huon> (spawn_named: https://github.com/mozilla/servo/blob/master/src/components/util/task.rs )
[11:35:54] * huon confuzzled
[11:36:40] <huon> Ms2ger: sorry, looks like you'll just have to throw Servo out and start from scratch
[11:36:48] <eddyb> huon: Local::take() does: let mut t: ~Task = Local::take();
[11:36:48] <huon> it'll be a long Rust upgrade this time
[11:37:09] <huon> eddyb: where exactly is the Local::take in that code?
[11:37:16] <Ms2ger> What do you mean by "the only two hashmap::new's"?
[11:37:20] <huon> (I know what it does... but I don't see one)
[11:37:36] <eddyb> huon: so anything that calls... wait, no, Local::take() doesn't return an Option<~Task> which means it would fail somehow else :/
[11:37:58] <huon> Ms2ger: the backtrace seems to suggest that it's being called from a HashMap::new() in constellation
[11:38:02] <Ms2ger> Ah
[11:38:04] <huon> and those are the only two culprits I can see
[11:38:07] <eddyb> so the task is there, but local_io() returns None
[11:38:19] <huon> unless there's something getting inlined elsewhere
[11:38:27] <huon> (do you have debuginfo on?)
[11:38:33] <eddyb> just going to say that :)
[11:38:42] <eddyb> also, you can ditch optimizations to get nicer stack traces
[11:39:05] <eddyb> (which would also make the code build faster)
[11:39:15] <Ms2ger> Yeah, bt points at pipelines: HashMap::new(),
[11:39:32] <Ms2ger> And building with --enable-debug --disable-optimize
[11:39:54] <huon> ah, ok, that's what I was expecting
[11:40:32] *** Quits: leowoe (Leo@moz-CEF2400C.inf.uni-konstanz.de) (Quit: Leaving.)
[11:41:52] <Ms2ger> OH: "a compiler doesn't make errors"
[11:42:09] <eddyb> Ms2ger: it works without optimizations?
[11:42:21] <Ms2ger> eddyb, ?
[11:42:26] <dsrx> Ms2ger: that sufficiently smart compiler everyone always talks about doesn't :D
[11:42:29] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[11:42:52] <eddyb> Ms2ger: I thought that's why you were saying that. nvm
[11:42:52] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[11:42:57] *** Quits: EastByte_ (EastByte@moz-4B858842.ewe-ip-backbone.de) (Ping timeout)
[11:43:12] <Ms2ger> (That quote was my professor just now)
[11:43:20] <eddyb> lol
[11:43:23] *** Joins: EastByte_ (EastByte@moz-86F67B98.ewe-ip-backbone.de)
[11:43:24] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[11:43:34] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[11:43:39] <eddyb> Ms2ger: just give them some ICE
[11:44:00] <Ms2ger> To be fair, he was comparing to hand-optimizing asm
[11:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:44:56] <eddyb> Ms2ger: oh, then I should mention that LLVM will get a SAT solver to test the sanity of certain optimizations for a reason :P
[11:45:13] <Ms2ger> A SAT solver? Sounds slow :)
[11:45:34] * Ms2ger heads off for lunch
[11:45:39] <eddyb> Ms2ger: not during normal optimizations, just proving that the optimizer doesn't screw up
[11:45:49] <Ms2ger> Ah
[11:45:50] *** Quits: Ms2ger (Ms2ger@moz-4A14BC33.ugent.be) (Quit: bbl)
[11:46:17] *** Joins: soumyaC (uid15286@moz-E77DEB21.irccloud.com)
[11:46:22] <eddyb> I did manage to use z3 to create Minecraft seeds out of simple constraints on the result
[11:46:27] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:46:31] *** Joins: gimpf (gimpf@moz-F3893FF0.adsl.highway.telekom.at)
[11:46:43] <eddyb> I actually even reimplemented the biome generation code in functional ES6
[11:47:22] <eddyb> (so I could potentially abstract it into something I can feed to a SAT solver)
[11:48:17] *** Joins: LU324 (asdf@moz-864C7465.dyn.embarqhsd.net)
[11:49:49] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[11:49:58] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[11:50:45] *** Quits: mindcat (mindcat@C7D9CC0E.E1ABDF54.E47F7BFE.IP) (Connection reset by peer)
[11:51:14] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[11:52:17] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[11:52:18] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:53:52] *** Quits: enos (jkingyens@moz-B0C1B161.hsd1.ca.comcast.net) (Quit: enos)
[11:54:39] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:54:50] <SiegeLord> Heh, that bitset macro by bjz is basically the same thing I made for my own libraries
[11:55:00] <SiegeLord> *bitflags
[11:55:45] *** Joins: mindcat (mindcat@37DA2A5.14B01478.F956842C.IP)
[11:55:51] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[11:56:00] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[11:56:19] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[11:56:45] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[11:56:55] <bjz> SiegeLord: what do you think of it?
[11:56:57] <bvssvni> SiegeLord: link?
[11:57:10] <SiegeLord> I think it's awesome and I'd use it instead of my own copy ;P
[11:57:13] <huon> bvssvni: https://github.com/mozilla/rust/pull/13072
[11:57:25] <SiegeLord> It's literally the same idea, less a few methods
[11:57:46] <bjz> SiegeLord: compared to EnumSet?
[11:57:51] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[11:58:00] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[11:58:12] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[11:58:24] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[11:58:41] <SiegeLord> Yes, primarily for the bitwise operator reason
[11:58:49] <bvssvni> bjz: shouldn't those flags be 0b instead of 0x?
[11:59:11] <bjz> SiegeLord: could you comment?
[11:59:24] <bjz> bvssvni: doesn't really matter
[11:59:27] *** Joins: ganitsu (ganitsu@moz-C7E9B0F2.dialup.adsl.anteldata.net.uy)
[11:59:49] <bvssvni> bjz: ah ok, just checking
[11:59:55] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[12:00:26] <bjz> SiegeLord: it's important to have feedback - if only to check my own sanity
[12:01:00] * huon checks bjz's sanity
[12:01:01] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[12:01:11] <bjz> huon: how does it look?
[12:01:16] <bjz> bad, doctor?
[12:01:26] <huon> I'm sorry...
[12:01:29] <bjz> :(
[12:01:30] <huon> it looks like you're entirely sane
[12:01:34] <huon> :(
[12:01:37] <bjz> AAARGHGHG
[12:01:47] * huon quickly backpedals
[12:01:50] * bjz froths at the mouth with sanity
[12:02:18] <bjz> %)
[12:02:28] *** Joins: jviereck (Adium@moz-B9C0530E.ethz.ch)
[12:03:19] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[12:03:23] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[12:03:29] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[12:04:24] *** Quits: Sorella (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: Ex-Chat)
[12:04:28] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[12:04:33] <bjz> SiegeLord: could I at least have a link to your code? Then I'll post it as a case in the wild
[12:04:43] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[12:05:08] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[12:05:10] <huon> hah
[12:05:15] * huon has:
[12:05:24] <bjz> oh, awesome
[12:05:26] <huon> pub fn ... { fn ... { fn ... { extern { fn 
[12:05:28] <huon> all nested
[12:05:32] <bjz> muahaha
[12:05:35] *** Joins: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru)
[12:05:37] <bjz> where?
[12:05:40] <bjz> canisee
[12:05:48] <bjz> canisee
[12:05:50] <bjz> canisee
[12:05:53] <bjz> ????
[12:06:00] <kimundi> no
[12:06:04] <bjz> oh
[12:06:06] <huon> https://github.com/mozilla/rust/blob/master/src/libstd/os.rs#L658
[12:06:07] <bjz> :(
[12:06:14] <huon> (well, I guess I don't have it.. mozilla/rust has it)
[12:06:33] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[12:06:53] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[12:06:54] <bjz> doesn't actually look as bad indented
[12:07:23] <bjz> SiegeLord: cheers mate
[12:07:55] <huon> bjz: yeah, it's not all together either
[12:08:09] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[12:08:15] * huon is shaving a yak addressing Ms2ger's problem
[12:08:16] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[12:08:22] *** Joins: leowoe (Leo@moz-CEF2400C.inf.uni-konstanz.de)
[12:08:42] *** Joins: brendan (brendaneic@212685B3.5B8F260F.586E6F35.IP)
[12:10:24] <bvssvni> bjz: bitflags looks much easier to use than EnumSet
[12:10:35] *** Quits: brendan (brendaneic@212685B3.5B8F260F.586E6F35.IP) (Ping timeout)
[12:10:35] <bjz> bvssvni: why?
[12:11:02] <bvssvni> bjz: not sure exactly why...
[12:11:10] <bjz> bvssvni: sorry, just curious
[12:11:12] <bvssvni> bjz: intuition?
[12:11:17] <bjz> :P
[12:11:27] *** Joins: jviereck1 (Adium@moz-B9C0530E.ethz.ch)
[12:11:36] *** Quits: jviereck (Adium@moz-B9C0530E.ethz.ch) (Connection reset by peer)
[12:13:23] *** Joins: jviereck (Adium@moz-B9C0530E.ethz.ch)
[12:13:34] *** Quits: jviereck1 (Adium@moz-B9C0530E.ethz.ch) (Connection reset by peer)
[12:14:26] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:15:57] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Connection reset by peer)
[12:16:29] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:18:10] *** Quits: Phoop (Phoop@moz-E68FED0B.me) (Ping timeout)
[12:18:31] *** Quits: skade (skade@B4A5FE21.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[12:18:35] *** Quits: jviereck (Adium@moz-B9C0530E.ethz.ch) (Quit: Leaving.)
[12:18:48] *** Joins: mye (mye@moz-99055859.dip0.t-ipconnect.de)
[12:19:49] <SiegeLord> ::sigh:: I wish you could use two unrelated traits for two unrelated types with the same method name in the same scope :P
[12:20:26] *** Joins: asmyers (quassel@1AED7747.A07F7734.FAA4474F.IP)
[12:21:06] *** Joins: skade (skade@B4A5FE21.505237C9.CAE22B62.IP)
[12:21:38] <huon> `{ use Trait1; x.foo() } { use Trait2; x.foo() }`
[12:21:50] <eddyb> that's a new trick for me
[12:23:02] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[12:23:08] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[12:23:14] <SiegeLord> That's the thing, it's not x each time
[12:23:46] <SiegeLord> It's x: T; y: U; x.foo(); y.foo();
[12:24:00] <SiegeLord> Different types, different traits... just happen to have the same method
[12:24:06] <SiegeLord> *method name
[12:24:20] <SiegeLord> Same workabout works, but it's most certainly a bug
[12:26:44] <hirsch> I saw a codeblock in a Rand impl which has an if statement depending on the size of an int (32 or 64). Why it this descision made at runtime and not at compile time?
[12:27:46] <huon> hirsch: it's made at compile time (due to optimisations)
[12:28:33] <huon> hirsch: it's mainly because I wanted to be sure that it was generating a value of the correct size
[12:28:33] <hirsch> Ah ok, didn't know that the compiler is so smart.
[12:29:08] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[12:29:20] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[12:29:27] <huon> that's just a constant comparison, so the optimiser should be able to "evaluate" it and remove the branch that is guaranteed to never be followed
[12:29:54] <huon> (it could use #[target_word_size] but theoretically that could be different to the pointer size... maybe.)
[12:30:04] <huon> (and `int` is pointer sized.)
[12:30:23] <hirsch> ah ok
[12:31:17] <bvssvni> bjz: EnumSet uses a phantom type to bind the usage, but a macro to generate the type seems cleaner
[12:31:49] <bvssvni> bjz: I think most people are more likely to get confused by phantom types
[12:34:03] <bvssvni> bjz: the fact that generic constraints are decoupled from type declaration makes it harder to tell "can I use an u16 with this?"
[12:34:12] <bjz> yeah
[12:34:26] <bjz> I also wonder about the need for polymorphism here
[12:34:37] *** Joins: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl)
[12:36:02] <bjz> as in, parametric polymorphism
[12:36:10] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:37:04] <bvssvni> bjz: I wonder how much EnumSet is used
[12:37:23] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[12:37:37] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[12:38:03] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:38:35] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[12:38:35] <bjz> bvssvni: it is used once in the rust source: librustc/middle/ty.rs
[12:39:29] <bvssvni> bjz: I'll add a comment to the issue
[12:39:32] *** Quits: Rym (y@FD880926.C67B62F8.8772DA20.IP) (Ping timeout)
[12:39:37] <bjz> cheers
[12:39:53] *** Joins: nical (nico@DA4ABEAF.1DE10CA8.D8E68FF6.IP)
[12:40:52] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[12:41:17] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[12:41:30] *** Joins: glaebhoerl (glaebhoerl@moz-3590251D.kabelnet.hu)
[12:43:46] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Client exited)
[12:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:44:11] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[12:46:29] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:46:39] <bvssvni> bjz: I wish one could type struct<E: A+B+C> Foo<E> {..} where A, B, C are phantom types
[12:46:51] *** Quits: nical (nico@DA4ABEAF.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[12:46:52] *** Joins: reverend_paco (chatzilla@moz-FDBE15EC.hsd1.ma.comcast.net)
[12:46:59] <bjz> bvssvni: thanks! I added a reply
[12:47:51] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[12:48:07] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[12:48:49] *** Joins: edwardw (Mibbit@FF3CCB4.1B2F6624.7F41E82D.IP)
[12:49:02] <edwardw> rusti: version
[12:49:03] <Vermeille> does my_str[idx] returns the idxth char or the idxth *byte* ?
[12:49:37] <huon> byte
[12:49:42] <huon> will probably be removed
[12:50:02] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[12:50:21] *** Joins: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl)
[12:50:22] <fmtq> bestest rust syntax highlighter for vim
[12:50:23] <fmtq> ?
[12:50:23] <Vermeille> so, is there a O(1) way to access the idxth char without my_str.chars().nth(idx)?
[12:50:34] <edwardw> By implementing Ord, one overrides <=, >= etc., doesn't it?
[12:50:34] <huon> fmtq:  the one in src/etc/vim
[12:50:39] <fmtq> well played.
[12:51:02] <huon> Vermeille: there's no O(1) way to access codepoints (aka chars) with a UTF-8 encoded string
[12:51:12] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[12:51:15] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[12:51:16] <huon> edwardw: yes
[12:51:21] <edwardw> k
[12:52:05] <Vermeille> C++ solves that by making wstring a vector of wchar_t, and the indexing is in constant time, despite using more memory
[12:52:18] <huon> Vermeille: (accessing individual code points is incorrect for arbitrary unicode strings, anyway.)
[12:52:26] <huon> you can achieve the same thing with a Vec<char>
[12:52:49] <huon> I guess you lose some methods and the nice literal syntax
[12:53:07] <SiegeLord> It might be useful to access individual bytes when you don't have an option of iterating over bytes
[12:53:22] <SiegeLord> But I assume you'll still have str.bytes()[i] or something of the sort
[12:54:09] <huon> yes
[12:54:36] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[12:54:39] *** Quits: japaric (japaric@2B3146EA.839FBF92.95AFB88D.IP) (Ping timeout)
[12:55:10] *** Joins: japaric (japaric@E3A27319.2A33E3C8.A936879B.IP)
[12:56:03] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[12:56:07] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[12:57:18] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:58:35] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[12:59:40] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:59:42] *** Joins: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP)
[13:00:18] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[13:01:27] *** jorendorff is now known as jorendorff_away
[13:03:22] *** Joins: benjamin_____ (benjamin@moz-CB0B0B91.dip0.t-ipconnect.de)
[13:03:35] *** Joins: Chris (chsitter@C5C92391.35A75BF5.E8E9A8EF.IP)
[13:04:09] *** Joins: jviereck (Adium@moz-B9C0530E.ethz.ch)
[13:07:09] <bvssvni> bjz: can type be used to specify a phantom type? like type Foo<A, B> = Bar<A>?
[13:07:38] <eddyb> bvssvni: no
[13:07:40] <eddyb> you lose B
[13:08:00] *** Quits: IanCormac84 (User@9A425872.2A8D8854.67DFF8B4.IP) (Ping timeout)
[13:08:12] <bvssvni> eddyb: ok
[13:08:43] *** Quits: kris (kris@moz-147EE6DF.diku.dk) (Ping timeout)
[13:08:52] *** jorendorff_away is now known as jorendorff
[13:08:53] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[13:09:01] *** Joins: IanCormac84 (User@7B004C66.64D641E5.67DFF8B4.IP)
[13:09:56] *** Joins: Ms2ger (Ms2ger@6BCD8197.DF5CCC78.F15B0BB3.IP)
[13:11:24] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[13:11:43] *** Parts: edwardw (Mibbit@FF3CCB4.1B2F6624.7F41E82D.IP) ()
[13:12:23] *** Quits: glaebhoerl (glaebhoerl@moz-3590251D.kabelnet.hu) (Ping timeout)
[13:13:25] *** Quits: jviereck (Adium@moz-B9C0530E.ethz.ch) (Quit: Leaving.)
[13:14:10] *** Joins: mno2 (mno2@C9C55379.F9BA5024.DA359910.IP)
[13:14:26] * Ms2ger badgers in again
[13:15:15] <bjz> badger badger badger
[13:15:23] <bjz> mushroom mushroom mushroom
[13:15:42] <huon> Ms2ger: I'm shaving a yak :P
[13:15:43] *** Joins: Rym (y@FD880926.C67B62F8.8772DA20.IP)
[13:15:44] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[13:15:56] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[13:15:57] <Ms2ger> [a snake a snake]
[13:18:51] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[13:19:09] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[13:19:11] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[13:19:14] *** Quits: Rym (y@FD880926.C67B62F8.8772DA20.IP) (Ping timeout)
[13:19:25] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:19:54] *** Joins: glaebhoerl (glaebhoerl@moz-3590251D.kabelnet.hu)
[13:20:01] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[13:20:01] *** ChanServ sets mode: +o jdm
[13:20:29] *** Joins: Rym (y@FD880926.C67B62F8.8772DA20.IP)
[13:20:49] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[13:21:26] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:22:57] <fmtq> how to capture a single character of input (arrow keys in this case)?
[13:23:01] *** Joins: obi_wan (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP)
[13:23:48] *** Joins: maattdd (matthieu@moz-BD1940C7.fbx.proxad.net)
[13:24:05] *** Joins: io2 (io2@moz-EE406A5.home.otenet.gr)
[13:24:19] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[13:24:26] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[13:26:33] *** Joins: brendan (brendaneic@212685B3.5B8F260F.586E6F35.IP)
[13:26:56] *** Joins: gwty (gwtypc@834AF78F.8B603116.F64220F6.IP)
[13:27:42] *** jorendorff is now known as jorendorff_away
[13:29:50] *** Joins: floatboth (floatboth@99D1228.4257CAE7.56994E57.IP)
[13:30:48] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[13:31:00] *** Joins: neopara (neopara@moz-58DA824C.hfc.comcastbusiness.net)
[13:32:03] *** Quits: obi_wan (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:32:38] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[13:32:40] *** Quits: neopara (neopara@moz-58DA824C.hfc.comcastbusiness.net) (Ping timeout)
[13:32:56] *** Quits: cschneid (cschneid@moz-621ACC77.hlrn.qwest.net) (Client exited)
[13:33:07] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[13:33:19] *** Parts: IanCormac84 (User@7B004C66.64D641E5.67DFF8B4.IP) ()
[13:33:20] *** Joins: kris (kris@moz-147EE6DF.diku.dk)
[13:34:48] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[13:37:19] *** Joins: Tari (tari@moz-A009139E.net)
[13:38:38] *** Joins: vikstrous (v@13F2CEC5.7672369.D8E68FF6.IP)
[13:38:43] <tfogal> okay, i've got my module that compiles fine with 'rustc --crate-type lib' (thanks Yurume/eddyb/huon!), but i can't seem to find a way to import it.  'use mymodule;' complains about 'unresolved import', and adding the requested 'extern crate' declaration says it "can't find crate", despite it being in the same directory.
[13:39:26] *** Quits: gwty (gwtypc@834AF78F.8B603116.F64220F6.IP) (Ping timeout)
[13:39:39] <tfogal> I'm not finding anything in the tutorials about how to do proper modules, and e.g. the examples i'm finding online all seem to be out of date ("extern mod" instead of "extern crate").. any pointers towards something which clarifies this?
[13:40:03] <tfogal> err, this == how to separate code into different files and/or modules.
[13:40:12] *** Joins: nszceta (nszceta@moz-E458A7C0.pharm.pitt.edu)
[13:40:13] <SiegeLord> extern crate is right. You probably need to pass -L. to rustc
[13:40:26] <SiegeLord> The default search path is... complicated last I checked
[13:40:48] <tfogal> Gotcha.  Welp, that at least changes my error message :-)
[13:40:50] <tfogal> i call that progress
[13:40:53] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:40:54] <tfogal> thanks!
[13:40:54] <Kroisse> fmtq: I think std::io::stdio::stdin_raw() could be a solution, but i'm not sure.
[13:41:41] *** Joins: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca)
[13:41:44] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[13:42:09] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[13:42:16] <Kroisse> ah, you said about the keycode...
[13:43:02] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:43:23] *** Quits: maattdd (matthieu@moz-BD1940C7.fbx.proxad.net) (Ping timeout)
[13:43:33] *** jorendorff_away is now known as jorendorff
[13:43:42] <Vermeille> stupid question incoming: let mut a = Something { ... }; fn_taking_a_borrowed_ptr(&a); Why does the compiler complains?
[13:45:03] *** Quits: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca) (Ping timeout)
[13:45:30] *** Quits: mno2 (mno2@C9C55379.F9BA5024.DA359910.IP) (Quit: mno2)
[13:45:58] *** Joins: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca)
[13:46:24] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[13:46:29] <Yurume> Vermeille, error message?
[13:46:31] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[13:46:45] <Vermeille> error: cannot borrow immutable dereference of `&`-pointer as mutable
[13:47:06] *** pmoore|buildduty is now known as pmoore|mtg
[13:47:15] *** Joins: bollu (bollu@31CCE710.7065DDB9.6D6A344F.IP)
[13:47:17] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[13:47:41] <Tari> fn_taking_a_borrowed_ptr(&mut a);
[13:48:09] <Vermeille> really? &mut is an operator?
[13:48:12] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[13:48:16] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[13:48:33] *** Quits: khodzha1 (khodzha@9C64BDF9.3E410295.CA6E2165.IP) (Ping timeout)
[13:48:40] <Vermeille> so a needs to be mut AND I need to borrow it with &mut?
[13:48:54] <pnkfelix> Vermeille: yes.  Belt-and-suspenders.
[13:49:09] *** Quits: goffrie_ (goffrie@moz-463E9F66.dsl.ncf.ca) (Ping timeout)
[13:49:10] *** Joins: goffrie (goffrie@moz-2E1C73A.dsl.ncf.ca)
[13:50:05] *** Joins: jviereck (Adium@moz-B9C0530E.ethz.ch)
[13:50:08] <pnkfelix> Vermeille: The `let mut a = ...` is minor; we could easily infer that, but our belief is that it catches bugs to force people to say what they intended there.
[13:50:32] <pnkfelix> Vermeille: but the act of taking a mutable borrow via `&mut` is far more severe, since it has an impact on what other borrows are allowed to be in scope at the same time.
[13:51:03] <Tobba> rusti: let a = 5; let b = &mut a; *b = 3;
[13:51:22] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[13:51:26] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[13:51:28] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[13:52:02] <Vermeille> pnkfelix: Okay, I won't pretend to fully understand what that implicates, but it makes more sense to me now
[13:52:22] *** Joins: maattdd (matthieu@moz-BD1940C7.fbx.proxad.net)
[13:52:25] *** Joins: khodzha (khodzha@9C64BDF9.3E410295.CA6E2165.IP)
[13:52:39] *** Joins: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net)
[13:52:42] *** Quits: jviereck (Adium@moz-B9C0530E.ethz.ch) (Ping timeout)
[13:53:07] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[13:53:25] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[13:54:12] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[13:54:25] *** Quits: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net) (Ping timeout)
[13:55:29] *** Joins: pepper_chico (pepper_chi@BE2968B5.6F4A2706.E4090502.IP)
[13:55:42] *** Quits: pepper_chico (pepper_chi@BE2968B5.6F4A2706.E4090502.IP) (Quit: WeeChat 0.4.1)
[13:55:50] <eddyb> Tobba: heeeey. are you going to write an RFC soon?
[13:56:04] <Tobba> I might
[13:56:12] <Tobba> I'm not a terribly good writer person but I should try
[13:56:16] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[13:56:27] *** Quits: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:56:41] <eddyb> Tobba: I thought about caching, and there's a slight problem when your, e.g. distro, doesn't include std-green-shenanigans, but you need it. ~/.rust might be a good place on Linux, not sure about other systems
[13:56:54] <eddyb> Tobba: I'm afraid it's a bit too magical, but it should work otherwise
[13:57:34] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[13:58:00] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[13:58:10] *** Joins: IanCormac84 (User@7B004C66.64D641E5.67DFF8B4.IP)
[13:58:56] *** Quits: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[13:59:02] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[13:59:19] <Tobba> eddyb: I'm not entirely sure about the design you had in mind though
[13:59:40] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[13:59:42] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[13:59:44] <Tobba> I mean
[13:59:48] <eddyb> combine libraries that contain weak items with the providers of weak items
[13:59:51] <eddyb> at the bitcode level
[13:59:58] <Tobba> right
[14:00:17] <eddyb> producing a .bc that can be optimized and then codegen'd into a .o
[14:00:42] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[14:00:46] <eddyb> take libstd.rlib and libgreen.rlib and get libstd+libgreen.rlib or something like that
[14:00:52] <eddyb> (since - is valid in crate names)
[14:01:24] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[14:01:41] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[14:01:49] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[14:02:09] <Tobba> that was kinda my pitch for how things should work when linking to libs in general
[14:02:21] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:03:29] <Tobba> difference between LTO and non-LTO could just be optimize bitcode, link together with impoted crates, or linked together and then optimize that
[14:04:17] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[14:04:42] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:05:09] *** Quits: Veld (Mibbit@moz-4A19983C.ip227.fastwebnet.it) (Quit: http://www.mibbit.com ajax IRC Client)
[14:05:27] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[14:05:49] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[14:06:04] <Tobba> I think I get your idea but yeah it might just be a bit too much magic
[14:06:08] *** Joins: jviereck (Adium@moz-B9C0530E.ethz.ch)
[14:06:16] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[14:06:37] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[14:07:18] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[14:08:40] *** Joins: d1 (Mibbit@moz-7678354D.cm-4-2b.dynamic.ziggo.nl)
[14:08:44] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[14:09:46] <tfogal> is there a way to type in a "string" and have it be a C string?  or how can I go from a rust string to a C string for the purposes of the FFI?
[14:10:13] *** Quits: ganitsu (ganitsu@moz-C7E9B0F2.dialup.adsl.anteldata.net.uy) (Ping timeout)
[14:10:14] <Ms2ger> CString
[14:11:44] *** Joins: jviereck1 (Adium@moz-B9C0530E.ethz.ch)
[14:12:01] <tfogal> somehow the 'use' on CString doesn't complain, but it is still an unresolved name
[14:12:05] *** Quits: jviereck (Adium@moz-B9C0530E.ethz.ch) (Ping timeout)
[14:12:10] *** Joins: ganitsu (ganitsu@moz-C7E9B0F2.dialup.adsl.anteldata.net.uy)
[14:12:48] <tfogal> renamed in master?
[14:12:59] <tfogal> hrm, no, doesn't look like it..
[14:13:04] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[14:13:26] *** Quits: jviereck1 (Adium@moz-B9C0530E.ethz.ch) (Ping timeout)
[14:13:33] *** Quits: d1 (Mibbit@moz-7678354D.cm-4-2b.dynamic.ziggo.nl) (Quit: http://www.mibbit.com ajax IRC Client)
[14:14:01] *** pmoore|mtg is now known as pmoore|buildduty
[14:15:18] <tfogal> "test".with_c_str(|p| unsafe {p});
[14:15:20] <tfogal> seems to do it
[14:15:29] <tfogal> FWIW
[14:16:37] *** Joins: mib_2qkkf1 (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP)
[14:16:48] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[14:16:48] *** ChanServ sets mode: +ao dherman dherman
[14:18:39] <eddyb> tfogal: that's wrong, AFAIK
[14:18:51] <eddyb> tfogal: the pointer you get is only valid within that closure
[14:18:55] <eddyb> that's the reason it's in a closure
[14:19:16] <tfogal> i see.
[14:19:41] <Ms2ger> We should pass a &c_char
[14:19:47] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[14:19:49] *** Quits: ChrisOei (ChrisOei@moz-30D80888.hsd1.ca.comcast.net) (Ping timeout)
[14:20:12] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[14:20:37] *** Quits: mib_2qkkf1 (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:20:38] <SiegeLord> Hmm... should foo.iter().map() implement Clone?
[14:21:00] <Ms2ger> Should it?
[14:21:16] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[14:21:28] <SiegeLord> I want to go through an iterator twice
[14:23:22] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[14:23:46] <SiegeLord> I can construct it twice without a problem, so cloning it shouldn't be one either
[14:23:48] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[14:24:06] <SiegeLord> But last PR I made that impleemented a whole bunch of traits got rejected, so I'm not doing it this time :P
[14:24:33] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:25:08] <SiegeLord> Maybe you can't clone the closure
[14:25:48] *** Joins: penguin_dan (dan_johnsi@6902762D.11B071D.FB9A45AF.IP)
[14:26:23] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:27:04] *** Joins: maxli1 (Adium@moz-EE42E0E.student.cs.uwaterloo.ca)
[14:27:36] *** Quits: patpat (patpat@moz-1599AAE4.as13285.net) (Ping timeout)
[14:27:36] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[14:27:46] *** Quits: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca) (Ping timeout)
[14:27:53] <jensnockert> aatch: I noticed you pinged me a few days ago right now, sorry for missing that :(
[14:28:14] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[14:28:17] *** Joins: jviereck (Adium@moz-B9C0530E.ethz.ch)
[14:28:31] *** Joins: qwerty_nor (Thunderbir@A5447B90.EDC74FC5.E19950A4.IP)
[14:28:41] *** Quits: maxli1 (Adium@moz-EE42E0E.student.cs.uwaterloo.ca) (Ping timeout)
[14:30:17] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[14:30:26] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[14:31:11] *** Joins: jviereck1 (Adium@moz-B9C0530E.ethz.ch)
[14:31:33] *** Quits: jviereck (Adium@moz-B9C0530E.ethz.ch) (Connection reset by peer)
[14:31:34] <tfogal> Ms2ger: dunno, you tell me ;-)  unfortunately i'm bound by the C interface and so I need to use *c_schar instead of more sane memory management
[14:33:39] *** Quits: vikstrous (v@13F2CEC5.7672369.D8E68FF6.IP) (Input/output error)
[14:33:43] *** Quits: jviereck1 (Adium@moz-B9C0530E.ethz.ch) (Quit: Leaving.)
[14:34:47] *** Joins: vikstrous (v@13F2CEC5.7672369.D8E68FF6.IP)
[14:35:05] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[14:36:51] *** Quits: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl) (Quit: Computer gone to sleep - Zzzz...)
[14:37:49] *** Joins: jviereck (Adium@moz-B9C0530E.ethz.ch)
[14:37:57] *** Quits: jviereck (Adium@moz-B9C0530E.ethz.ch) (Client exited)
[14:38:36] *** Quits: voltagex (voltagex@moz-11D4D0E3.voltagex.org) (Ping timeout)
[14:38:50] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[14:38:51] *** Joins: voltagex (voltagex@moz-11D4D0E3.voltagex.org)
[14:40:21] *** Joins: jviereck (Adium@moz-B9C0530E.ethz.ch)
[14:43:06] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[14:45:05] <floatboth> how do I zero out a string without segfault? I'm trying to do this (in a destructor of a struct with content: ~str): unsafe { ptr::zero_memory(ptr::to_mut_unsafe_ptr(&mut self.content), self.content.len()); }
[14:45:28] *** pmoore|buildduty is now known as pmoore|buildduty-brb
[14:45:39] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:46:01] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[14:46:16] *** Joins: gwty (gwtypc@834AF78F.8B603116.F64220F6.IP)
[14:46:33] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[14:47:35] <pnkfelix> floatboth: you can get at the underlying byte vector via std::str::raw::as_owned_vec
[14:47:55] <pnkfelix> floatboth: http://static.rust-lang.org/doc/master/std/str/raw/fn.as_owned_vec.html
[14:48:01] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:48:05] *** Joins: dschatzberg (dschatzber@moz-E2680405.bu.edu)
[14:48:09] *** Quits: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca) (Quit: canhtak)
[14:48:11] *** Quits: dschatzberg (dschatzber@moz-E2680405.bu.edu) (Quit: dschatzberg)
[14:49:04] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[14:49:10] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[14:49:20] <floatboth> pnkfelix: thanks
[14:50:53] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[14:50:57] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[14:51:25] *** Joins: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca)
[14:51:34] *** Quits: jviereck (Adium@moz-B9C0530E.ethz.ch) (Quit: Leaving.)
[14:52:55] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Connection reset by peer)
[14:53:25] *** Quits: gwty (gwtypc@834AF78F.8B603116.F64220F6.IP) (Ping timeout)
[14:54:46] *** Quits: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP) (Ping timeout)
[14:59:04] *** Joins: cschneid (cschneid@moz-CA025D57.ip.mcleodusa.net)
[14:59:10] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[14:59:17] *** Quits: cschneid (cschneid@moz-CA025D57.ip.mcleodusa.net) (Client exited)
[14:59:23] *** pmoore|buildduty-brb is now known as pmoore
[14:59:57] *** Joins: cschneid (cschneid@moz-CA025D57.ip.mcleodusa.net)
[15:00:09] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[15:00:20] *** Quits: vikstrous (v@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[15:00:27] *** pmoore is now known as pmoore|buildduty
[15:00:45] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[15:00:51] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[15:01:55] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[15:02:16] *** Joins: benjamin_ (benjamin@moz-852745DE.dip0.t-ipconnect.de)
[15:02:48] *** Quits: benjamin_____ (benjamin@moz-CB0B0B91.dip0.t-ipconnect.de) (Ping timeout)
[15:04:08] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[15:04:28] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[15:05:43] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[15:07:50] *** Joins: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca)
[15:07:58] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:07:59] *** Quits: fabiand (fabiand@moz-2CF3E016.adsl.alicedsl.de) (Ping timeout)
[15:07:59] *** Joins: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP)
[15:09:42] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:09:47] *** Joins: fabiand (fabiand@moz-2CF3E016.adsl.alicedsl.de)
[15:10:23] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[15:10:41] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[15:11:54] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[15:12:15] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[15:12:19] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Connection reset by peer)
[15:13:18] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[15:13:38] *** Joins: ChrisOei (ChrisOei@moz-53A9266A.blurb.com)
[15:14:00] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[15:14:00] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[15:14:57] *** Quits: murph (murph@moz-769F6638.oracle.com) (Ping timeout)
[15:15:50] *** Quits: Earnestly (earnest@18162BE0.BA6AC103.30311652.IP) (Quit: WeeChat 0.4.4-dev)
[15:16:05] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[15:16:05] *** ChanServ sets mode: +ao brson brson
[15:16:08] *** Joins: murph (murph@moz-769F6638.oracle.com)
[15:17:33] *** Quits: hirsch (Mibbit@moz-93FB92D1.itwm.fhg.de) (Quit: http://www.mibbit.com ajax IRC Client)
[15:18:12] *** Joins: ozten (ozten@moz-87FC77D4.hsd1.wa.comcast.net)
[15:18:19] <Ms2ger> tfogal, well, &c_char would decay to *c_char when actually calling into C, but it'd make the common bug foo("test".with_c_str(|p| p)) a bit harder
[15:18:42] *** Quits: Rym (y@FD880926.C67B62F8.8772DA20.IP) (Ping timeout)
[15:18:57] *** Joins: enos (jkingyens@moz-B0C1B161.hsd1.ca.comcast.net)
[15:19:33] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[15:19:33] <tfogal> oh, I actually got it working as "test".to_c_str().unwrap() without having to 'use' anything, thus getting around my 'use' error
[15:19:42] <tfogal> though i'm not sure i understand what unwrap actually does yet
[15:19:47] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[15:20:07] *** Joins: Earnestly (earnest@18162BE0.BA6AC103.30311652.IP)
[15:20:24] <cmr> tfogal: http://static.rust-lang.org/doc/master/std/c_str/struct.CString.html#method.unwrap
[15:21:10] *** Joins: vikstrous (v@13F2CEC5.7672369.D8E68FF6.IP)
[15:21:25] *** Joins: Rym (y@FD880926.C67B62F8.8772DA20.IP)
[15:22:12] <Ms2ger> tfogal, what unwrap does?
[15:22:16] <Ms2ger> tfogal, "leak" :)
[15:23:03] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[15:23:31] *** Quits: enos (jkingyens@moz-B0C1B161.hsd1.ca.comcast.net) (Quit: enos)
[15:23:44] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Input/output error)
[15:23:53] *** Joins: enos (jkingyens@moz-B0C1B161.hsd1.ca.comcast.net)
[15:24:02] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[15:24:05] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[15:24:40] *** Joins: patpat (patpat@F478761.D798B35A.98F3E2B5.IP)
[15:25:15] *** Joins: pupoque (Adium@297D6F99.EF706C30.C0C64AB3.IP)
[15:25:43] <tfogal> err, sure, I read the docs, but the doc does not make it clear to me whether I should think of that as (c++ here:) 'str.data()' or 'a = new arr[_internal.size()+1]; strcpy(a, _internal.ptr); return a;'
[15:25:51] <tfogal> but i guess from your response it is more the latter
[15:26:10] *** Joins: edwardw (edwardw@2BFF2300.F4429B.7E4FEB66.IP)
[15:26:17] <Ms2ger> Something like the latter, yes
[15:26:39] <Ms2ger> Not sure if strcpy null-terminates
[15:26:53] <cmr> it's not like the later, in that that would create a new copy of the CString
[15:27:02] <cmr> unwrap just returns its internal pointer
[15:27:09] <cmr> consuming the structure in the process
[15:27:30] <Ms2ger> cmr, I was thinking of equivalence to .to_c_str().unwrap()
[15:27:35] <cmr> ah
[15:27:43] *** Quits: glaebhoerl (glaebhoerl@moz-3590251D.kabelnet.hu) (Connection reset by peer)
[15:27:47] *** Joins: glaebhoerl_ (glaebhoerl@moz-3590251D.kabelnet.hu)
[15:27:50] <cmr> well, there's two very different operations there :p
[15:28:03] <tfogal> cmr: in the parlance i invented above, you mean it's more like 'rv = _internal.ptr; delete _internal; return rv;'?
[15:28:39] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[15:28:48] <Ms2ger> Depends, does _internal's dtor delete the backing char[]? :)
[15:29:19] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:29:23] <cmr> tfogal: the source might be more enligtening: http://static.rust-lang.org/doc/master/src/std/home/rustbuild/src/rust-buildbot/slave/doc/build/src/libstd/c_str.rs.html#88-91
[15:30:10] <tfogal> cmr: very much so.  thanks.
[15:30:48] *** Quits: reverend_paco (chatzilla@moz-FDBE15EC.hsd1.ma.comcast.net) (Ping timeout)
[15:30:58] <Ms2ger> cmr, huh, the CString still keeps the pointer around?
[15:31:23] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:31:32] <cmr> Ms2ger: yeah. the dtor checks owns_buffer_
[15:31:34] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Client exited)
[15:32:04] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[15:32:28] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[15:33:46] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[15:34:45] *** Quits: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[15:34:58] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[15:35:19] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[15:37:02] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[15:39:30] *** Joins: gwty (gwtypc@834AF78F.8B603116.F64220F6.IP)
[15:41:02] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[15:41:08] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[15:42:07] *** Joins: reverend_paco (chatzilla@moz-1DCFAF50.hsd1.ma.comcast.net)
[15:42:50] *** Quits: gwty (gwtypc@834AF78F.8B603116.F64220F6.IP) (Ping timeout)
[15:42:51] *** Joins: WalrusPony (retep998@moz-9F58AA44.bstnma.east.verizon.net)
[15:43:29] *** Quits: WalrusPony1 (retep998@moz-9F58AA44.bstnma.east.verizon.net) (Ping timeout)
[15:44:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:45:33] *** Joins: judder (maradukewa@75FA4DEE.A989D80C.78E362FE.IP)
[15:45:50] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[15:46:25] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:47:35] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Ping timeout)
[15:47:35] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[15:49:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:50:10] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[15:50:37] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[15:50:49] *** Quits: japaric (japaric@E3A27319.2A33E3C8.A936879B.IP) (Ping timeout)
[15:51:04] *** Joins: lpy (lpy@1834E2CB.F09091A8.1348A864.IP)
[15:52:40] *** Quits: reverend_paco (chatzilla@moz-1DCFAF50.hsd1.ma.comcast.net) (Ping timeout)
[15:52:57] *** Quits: floatboth (floatboth@99D1228.4257CAE7.56994E57.IP) (Quit: Textual IRC Client: www.textualapp.com)
[15:53:18] *** Joins: zenon (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP)
[15:53:52] <Ms2ger> cmr, hey, long time no twir :)
[15:54:49] *** Joins: brontron (brontron@moz-C8D86903.tc.ph.cox.net)
[15:54:57] <cmr> yeah yeah
[15:55:01] *** Joins: khodzha1 (khodzha@43058C92.A859D9FD.CA6E2165.IP)
[15:55:02] <cmr> soon!
[15:55:09] <Ms2ger> Winter is coming!
[15:55:26] *** Quits: khodzha (khodzha@9C64BDF9.3E410295.CA6E2165.IP) (Ping timeout)
[15:56:46] *** Joins: dradtke (dradtke@moz-77578067.hfc.comcastbusiness.net)
[15:57:00] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[15:57:06] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[15:57:12] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[15:57:26] <dradtke> so do macros invocations have to be surrounded by either parentheses or braces?
[15:57:38] <cmr> dradtke: at the moment yes.
[15:57:57] <cmr> additionally all delimiters must be balanced
[15:58:04] *** Quits: rchar (chatzilla@moz-9AC54D4D.lv.lv.cox.net) (Ping timeout)
[15:58:06] <cmr> this is to make it very easy to lex.
[15:58:27] <dradtke> so there's no plans on letting a macro look like a statement, e.g. "my_macro! ...;"?
[15:58:48] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[15:58:52] <cmr> not at the moment, though for certain flavors of macro that could certainly be allowed.
[15:59:19] <pauls> dradtke: a macro can expand to a statement, but looking like one is problematic.
[15:59:21] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[15:59:21] <dradtke> the use case I'm thinking of is as a shorthand for static variable declarations
[15:59:26] *** abinader is now known as abinader_lunch
[15:59:41] *** Joins: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[15:59:44] <dradtke> I was just curious, and it would be cool if it did end up supporting that syntax.
[15:59:50] <pauls> ...essentially, leaving off the delimiters means having wacky ad-hoc limitations on what syntax a macro expects. 
[15:59:59] *** Joins: rchar (chatzilla@moz-9AC54D4D.lv.lv.cox.net)
[16:00:19] <pauls> Maybe we just haven't found the sweet spot yet, though.
[16:01:07] *** Quits: skade (skade@B4A5FE21.505237C9.CAE22B62.IP) (Quit: Textual IRC Client: www.textualapp.com)
[16:01:08] <cmr> pauls: I feel like there might be a usecase for macros that accept only expressions being able to look like that, but I don't know of one off-hand.
[16:01:22] *** Quits: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP) (Quit: leaving)
[16:01:31] <kimundi> Just add a tt counter ;)
[16:01:38] <kimundi> zero!0
[16:01:44] <kimundi> one!1 ()
[16:01:50] <kimundi> two!2 () {}
[16:01:55] <pauls> cmr: I think the problem winds up being that you typically want to accept $n$ expressions.
[16:02:35] <pauls> kimundi: yeah, like that. Others have suggested `m!` `m!!` `m!!!` `m!!!!`.
[16:02:41] <kimundi> my_op!3 (expr1) + (expr2)
[16:02:58] <cmr> pauls: yeah. I can't think of any macros that would look better like that though.
[16:03:00] <kimundi> pauls: Actually, that other one was me too ;D
[16:03:06] *** Joins: japaric (japaric@E3A27319.2A33E3C8.A936879B.IP)
[16:03:30] <cmr> kimundi: sure, that helps the implementation, but makes Rust code much much harder to naively parse.
[16:03:50] <kimundi> But yeah, no matter how  switch it up, I don't end up with a syntax thats nice enough
[16:04:06] <kimundi> cmr: You mean for highlighter and stuff?
[16:04:13] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[16:04:20] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[16:04:32] <cmr> kimundi: and any other tooling, yeah.
[16:04:35] *** Quits: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net) (Ping timeout)
[16:04:43] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[16:04:43] *** ChanServ sets mode: +o jdm
[16:04:47] <cmr> "easy to parse" is a nice property for a language to have
[16:04:54] <kimundi> chain! foo ! (bar bar bar) ! baz
[16:05:24] *** Joins: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net)
[16:05:37] <pnkfelix> pauls: even just allowing a fixed number of identifier tokens to precede the delimited expression could help in certain cases.  I'm thinking in particular of a pub_struct! macro `pub_struct! St { f: S, g: T, ... }` ==> `pub struct St { pub f: S, pub g: T, ... }`, where `pub_struct` would say in its definition that it is always followed by an identifier before the {}-delimited token tree.
[16:05:41] <kimundi> ident! tt (!tt)*
[16:05:42] *** Joins: onelson (owen@moz-DD666EC5.laika.com)
[16:06:10] <pnkfelix> pauls: (though to be fair the previous example does not properly generalize to type-parametric structs)
[16:06:21] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Quit: 전 이만 갑니다.)
[16:06:25] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[16:06:42] <cmr> pnkfelix: there's https://github.com/mozilla/rust/issues/3190 open about that actually
[16:06:51] <cmr> this is a perfect usecase for it
[16:07:17] *** Joins: glaebhoer1 (glaebhoerl@moz-3590251D.kabelnet.hu)
[16:07:18] *** Quits: glaebhoerl_ (glaebhoerl@moz-3590251D.kabelnet.hu) (Ping timeout)
[16:09:10] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[16:09:16] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[16:10:15] *** Quits: zenon (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:10:46] *** Quits: bleibig (bleibig@moz-B4D9C5AF.hsd1.ca.comcast.net) (Quit: bleibig)
[16:13:45] *** Joins: newbie (kvirc@moz-A1C6347E.dip0.t-ipconnect.de)
[16:17:57] *** Joins: Kruppe (user@moz-253119B0.esg.uwaterloo.ca)
[16:18:35] *** Quits: ganitsu (ganitsu@moz-C7E9B0F2.dialup.adsl.anteldata.net.uy) (Ping timeout)
[16:20:03] *** Joins: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[16:23:13] *** Quits: kkris (kkris@A3AA235B.6C5E2088.F4DE8378.IP) (Quit: Coyote finally caught me)
[16:23:16] *** Joins: kkris (kkris@moz-CB70009.yourvserver.net)
[16:23:50] *** Joins: reverend_paco (chatzilla@moz-15582D1B.dia.static.qwest.net)
[16:26:12] *** Joins: pepper_chico (pepper_chi@BE2968B5.6F4A2706.E4090502.IP)
[16:27:26] *** Joins: klaus (koz@moz-4486E876.hsd1.wa.comcast.net)
[16:27:48] *** Quits: murph (murph@moz-769F6638.oracle.com) (Ping timeout)
[16:28:00] *** Joins: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca)
[16:28:44] *** Joins: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP)
[16:31:31] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Ping timeout)
[16:32:36] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[16:33:20] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[16:35:00] *** Quits: brendan (brendaneic@212685B3.5B8F260F.586E6F35.IP) (Quit: brendan)
[16:36:40] *** Joins: exobit_ (textual@moz-E06F46F0.corp.bitshelter.com)
[16:38:07] *** Quits: leowoe (Leo@moz-CEF2400C.inf.uni-konstanz.de) (Quit: Leaving.)
[16:39:36] *** Quits: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp) (Ping timeout)
[16:39:37] *** Joins: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp)
[16:39:50] *** pmoore|buildduty is now known as pmoore|buildduty-dinner
[16:42:29] *** Quits: reverend_paco (chatzilla@moz-15582D1B.dia.static.qwest.net) (Ping timeout)
[16:42:39] *** Quits: doener (bs@moz-AA189A5A.unitymedia.biz) (Quit: leaving)
[16:43:16] *** Joins: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl)
[16:44:53] *** Joins: murph (murph@moz-416250FA.oracle.com)
[16:45:01] *** Quits: pupoque (Adium@297D6F99.EF706C30.C0C64AB3.IP) (Quit: Leaving.)
[16:45:04] *** Joins: maxli1 (Adium@moz-EE42E0E.student.cs.uwaterloo.ca)
[16:45:53] *** Joins: pupoque (Adium@297D6F99.EF706C30.C0C64AB3.IP)
[16:45:58] *** Quits: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[16:46:45] *** Quits: maxli1 (Adium@moz-EE42E0E.student.cs.uwaterloo.ca) (Ping timeout)
[16:46:51] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[16:47:21] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[16:47:32] *** Quits: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net) (Ping timeout)
[16:49:54] *** Quits: azakai (alon@moz-62518563.mtv2.mozilla.com) (Quit: Ex-Chat)
[16:50:05] *** Joins: azakai (alon@moz-62518563.mtv2.mozilla.com)
[16:50:10] *** Quits: klaus (koz@moz-4486E876.hsd1.wa.comcast.net) (Ping timeout)
[16:51:59] *** abinader_lunch is now known as abinader
[16:52:05] *** Joins: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[16:52:16] *** Joins: neopara (neopara@moz-58DA824C.hfc.comcastbusiness.net)
[16:53:25] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[16:53:55] *** Joins: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca)
[16:53:57] *** Quits: neopara (neopara@moz-58DA824C.hfc.comcastbusiness.net) (Ping timeout)
[16:54:12] *** Quits: luz (lu.cy@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[16:54:14] *** Quits: pepper_chico (pepper_chi@BE2968B5.6F4A2706.E4090502.IP) (Quit: WeeChat 0.4.1)
[16:54:35] *** Joins: luz (lu.cy@moz-CD18B14B.customer.cdi.no)
[16:54:59] *** Quits: marc_ (uid5324@moz-31ABA2C0.irccloud.com) (Quit: Connection closed for inactivity)
[16:55:06] *** Quits: patpat (patpat@F478761.D798B35A.98F3E2B5.IP) (Ping timeout)
[16:55:41] <cmr> Ms2ger: !! congratulations on your first rust contribution?
[16:55:54] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[16:55:54] *** ChanServ sets mode: +ao pcwalton pcwalton
[16:55:55] <cmr> I'm not sure if I trust my script
[16:56:43] <Ms2ger> cmr, your script is correct
[16:56:49] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[16:57:01] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[16:57:11] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[16:57:26] <pcwalton> acrichto: "when linking a rust library built with a different version of rustc, we've gone from compiler ICEs to "unable to find" errors"
[16:57:29] <pcwalton> is this true?
[16:57:34] *** Quits: Kxepal (Miranda@moz-CC5238CC.pppoe.mtu-net.ru) (Ping timeout)
[16:57:43] <acrichto> pcwalton: yes
[16:57:45] <o11c> oo, shiny
[16:57:54] <pcwalton> hmm, could we be more specific as to what the error is?
[16:58:06] <acrichto> yeah, do you have an example?
[16:58:15] <pcwalton> it was just what jdm said
[16:58:19] <pcwalton> that we don't consider the libraries candidates
[16:58:26] <pcwalton> it might be nice to say why a library wasn't a candidate, I guess
[16:58:30] *** Quits: pupoque (Adium@297D6F99.EF706C30.C0C64AB3.IP) (Quit: Leaving.)
[16:58:34] <acrichto> if we don't find any that would be nice yeah
[16:58:41] <acrichto> we certainly do have a large list of candidates somewhere
[16:58:46] <cmr> it does that that it found an out-of-date copy and that it needs recompiling, doesn't it?
[16:58:59] <jdm> cmr: right
[16:59:10] *** Quits: harish (harish@moz-24DD2596.hsd1.ca.comcast.net) (Ping timeout)
[16:59:18] <acrichto> jdm: do you have a reproducible example that I could work with?
[16:59:47] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[16:59:59] <jdm> acrichto: pull servo master and build, then checkout the rustup branch, reconfigure and run make
[17:00:08] <acrichto> hahaha
[17:00:18] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[17:00:18] <acrichto> maybe I'll go stare at the code and find a smaller reproducible case...
[17:00:22] <cmr> heh
[17:00:22] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[17:00:23] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[17:00:29] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[17:00:29] *** ChanServ sets mode: +ao pcwalton pcwalton
[17:00:46] <jdm> it's kind of like when we find a PGO bug for firefox
[17:01:11] <jdm> just tar up the mozilla-central source and attach it to an email to the compiler team
[17:01:26] *** Joins: Kxepal (Miranda@moz-DE055BA8.pppoe.mtu-net.ru)
[17:02:12] *** Quits: lunaryorn (lunaryorn@moz-B9F1570E.dynamic.mnet-online.de) (Quit: )
[17:02:27] *** Quits: heftig (heftig@moz-D746319F.unitymedia.biz) (Quit: Quitting)
[17:02:32] *** Joins: gwty (gwtypc@834AF78F.8B603116.F64220F6.IP)
[17:02:38] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:02:40] <acrichto> jdm: what version of rustc are you using?
[17:02:54] <acrichto> the one that just says "crate not found"
[17:02:56] <jdm> acrichto: right now, the 3/21 one
[17:03:29] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[17:03:30] <acrichto> sha?
[17:03:32] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[17:04:15] *** Joins: azita (Azita@moz-62518563.mtv2.mozilla.com)
[17:05:30] <Ms2ger> acrichto, jdm, no, -23
[17:05:44] *** Quits: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: brendan)
[17:06:01] *** Joins: jensnockert (jensnocker@moz-EF95FD94.astro.lu.se)
[17:06:11] <Ms2ger> acrichto, aa39d755e3f9823b51cc57761c0c8c75759aca2e
[17:06:41] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[17:06:41] *** Joins: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net)
[17:06:51] <acrichto> thanks
[17:06:54] *** Joins: echristo (echristo@CEE37253.D6CCE4AE.77834EAA.IP)
[17:07:03] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[17:08:38] *** Joins: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[17:09:48] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[17:11:29] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[17:11:59] <acrichto> jdm: can you paste the output with RUST_LOG=rustc::metadata::loader?
[17:12:10] <jdm> acrichto: nope, rebuilt a while ago
[17:12:25] <acrichto> oh well
[17:12:40] *** Joins: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP)
[17:13:31] *** Quits: lpy (lpy@1834E2CB.F09091A8.1348A864.IP) (Client exited)
[17:13:34] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[17:13:38] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[17:13:44] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[17:14:07] *** Joins: reverend_paco (chatzilla@moz-FDBE15EC.hsd1.ma.comcast.net)
[17:14:33] <edwardw> acrichto: sorry to interrupt, but RUST_LOG=rustc::metadata::loader still works, not RUST_LOG=::help?
[17:15:06] <acrichto> edwardw: indeed, we're removing the support from the crate map so there's now no longer a list of modules anywhere to print out
[17:15:15] <edwardw> k
[17:15:32] *** Quits: jensnockert (jensnocker@moz-EF95FD94.astro.lu.se) (Input/output error)
[17:16:51] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[17:16:55] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[17:17:52] *** Quits: khodzha1 (khodzha@43058C92.A859D9FD.CA6E2165.IP) (Ping timeout)
[17:17:52] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:18:00] *** jorendorff is now known as jorendorff_away
[17:18:38] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[17:19:51] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Ping timeout)
[17:20:12] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:20:14] *** Joins: khodzha (khodzha@43058C92.A859D9FD.CA6E2165.IP)
[17:20:56] *** Joins: ewalstad (Adium@moz-9A04E871.dedicated.static.sonic.net)
[17:21:08] *** Quits: azita (Azita@moz-62518563.mtv2.mozilla.com) (Quit: azita)
[17:21:39] *** Quits: Rym (y@FD880926.C67B62F8.8772DA20.IP) (Ping timeout)
[17:22:04] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[17:22:31] *** Joins: Rym (y@FD880926.C67B62F8.8772DA20.IP)
[17:22:49] *** jorendorff_away is now known as jorendorff
[17:23:14] *** Quits: gwty (gwtypc@834AF78F.8B603116.F64220F6.IP) (Ping timeout)
[17:24:54] *** Parts: ozten (ozten@moz-87FC77D4.hsd1.wa.comcast.net) ()
[17:25:25] *** Quits: glaebhoer1 (glaebhoerl@moz-3590251D.kabelnet.hu) (Ping timeout)
[17:26:42] *** Joins: azita (Azita@moz-62518563.mtv2.mozilla.com)
[17:28:00] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[17:29:05] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[17:29:20] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:29:59] *** Quits: masonl (masonl@AE7AAB74.497EC1B8.5EFB9497.IP) (Ping timeout)
[17:30:38] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:31:08] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:31:08] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Connection reset by peer)
[17:31:33] *** Joins: jensnockert (jensnocker@moz-EF95FD94.astro.lu.se)
[17:31:39] *** Joins: gwty (gwtypc@1DCDD019.781836C4.CEFA97FA.IP)
[17:32:07] *** Joins: doctor (ARealName@moz-1BCE629A.hsd1.ca.comcast.net)
[17:32:15] *** Joins: jensnock_ (jensnocker@moz-33279404.customers.ownit.se)
[17:32:21] *** Quits: [squiddy] (squiddy@moz-686F69E9.dip0.t-ipconnect.de) (Input/output error)
[17:32:31] *** Quits: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com) (Ping timeout)
[17:33:26] <jdm> acrichto: any suggestions for debugging "error opening /dev/urandom" failures when spawning green tasks on unix?
[17:33:32] *** Joins: masonl (masonl@28321515.497EC1B8.5EFB9497.IP)
[17:33:37] <jdm> I actually see two tasks failing simultaneously with that error
[17:33:41] *** Joins: kngl (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP)
[17:34:00] <jdm> https://pastebin.mozilla.org/4668577
[17:34:02] *** Quits: jensnock_ (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[17:34:30] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[17:34:35] <cmr> jdm: trying raising the open fd limit with `ulimit`?
[17:34:54] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:34:54] *** Quits: rook (rook@moz-31CCE085.hfc.comcastbusiness.net) (Connection reset by peer)
[17:35:02] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[17:35:45] *** jorendorff is now known as jorendorff_away
[17:36:15] <Ms2ger> cmr, jdm, this was "std::io::IoError{kind: IoUnavailable, desc: "I/O is unavailable", detail: None}", fwiw
[17:36:21] <cmr> oh
[17:36:32] * jdm didn't notice that
[17:36:47] *** Quits: blank_name (blank_name@5EC13E3.964BADD.93A5C78C.IP) (Ping timeout)
[17:36:47] <jdm> Ms2ger: where do you see it?
[17:36:51] <Ms2ger> I needed a rust patch to bring it out
[17:37:06] *** Joins: guest2222 (guest2222@B71F5E24.F299E8.284344F5.IP)
[17:37:25] <jdm> ah, I see
[17:37:25] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[17:37:52] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[17:37:56] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[17:37:56] *** ChanServ sets mode: +ao pcwalton pcwalton
[17:38:06] *** Quits: guest22221 (guest2222@moz-1D2D613F.ga.at.cox.net) (Ping timeout)
[17:38:11] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[17:38:14] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[17:38:15] <acrichto> jdm: be sure to link with librustuv
[17:38:26] * jdm tries
[17:38:49] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[17:38:58] *** Quits: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca) (Quit: canhtak)
[17:39:38] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:40:20] *** Joins: blank_name (blank_name@5EC13E3.964BADD.93A5C78C.IP)
[17:40:55] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Quit: Leaving)
[17:41:06] *** Quits: luz (lu.cy@moz-CD18B14B.customer.cdi.no) (Input/output error)
[17:41:12] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[17:41:14] *** Joins: luz (lu.cy@moz-CD18B14B.customer.cdi.no)
[17:41:59] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:42:29] *** Quits: masonl (masonl@28321515.497EC1B8.5EFB9497.IP) (Ping timeout)
[17:42:32] *** Joins: masonl (masonl@AE7AAB74.497EC1B8.5EFB9497.IP)
[17:42:40] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[17:43:13] *** Quits: Kynes (Kynes@moz-3DC6C6E7.mit.edu) (Quit: Leaving)
[17:44:02] *** Quits: gwty (gwtypc@1DCDD019.781836C4.CEFA97FA.IP) (Client exited)
[17:44:47] *** jorendorff_away is now known as jorendorff
[17:45:16] *** Quits: Kruppe (user@moz-253119B0.esg.uwaterloo.ca) (Client exited)
[17:45:37] *** Joins: Kruppe (user@moz-253119B0.esg.uwaterloo.ca)
[17:47:34] *** Parts: IanCormac84 (User@7B004C66.64D641E5.67DFF8B4.IP) ()
[17:48:25] *** Joins: hjr3 (hradtke@moz-445FF0C5.public.wayport.net)
[17:48:57] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[17:49:14] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[17:49:20] *** Joins: bakkdoor (bakkdoor@moz-A526B6C0.osnanet.de)
[17:50:06] *** Quits: kanru (kanru@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[17:50:08] *** Quits: StarLight (StarLight@moz-737B2678.pppoe.avangarddsl.ru) (Ping timeout)
[17:52:07] *** Joins: sunfish (chatzilla@13F2CEC5.7672369.D8E68FF6.IP)
[17:52:26] *** Joins: harish (harish@moz-A9E56CFE.hfc.comcastbusiness.net)
[17:53:18] *** Joins: philix (felipe@moz-90A0AE19.user.veloxzone.com.br)
[17:53:40] *** Joins: StarLight (StarLight@moz-D2759C29.dynamic.avangarddsl.ru)
[17:53:43] *** Joins: patpat (patpat@moz-1599AAE4.as13285.net)
[17:54:28] <jdm> brson: I lied to you the other day: http://stackoverflow.com/a/448939/3830
[17:54:36] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:55:06] <Ms2ger> Make?
[17:55:09] <Ms2ger> I'm so sorry
[17:55:48] *** Quits: guest2222 (guest2222@B71F5E24.F299E8.284344F5.IP) (Ping timeout)
[17:55:48] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[17:55:58] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[17:56:01] *** Joins: guest2222 (guest2222@moz-AFE5D8E0.xlate.ufl.edu)
[17:56:28] *** Quits: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[17:57:02] *** Quits: azita (Azita@moz-62518563.mtv2.mozilla.com) (Quit: azita)
[17:57:10] *** Joins: lawrence (lawrence@moz-50C57CC5.wireless.utoronto.ca)
[17:57:12] *** Quits: lawrence (lawrence@moz-50C57CC5.wireless.utoronto.ca) (Quit: lawrence)
[17:57:31] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[17:57:34] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Quit: Leaving.)
[17:57:42] <YourBestFriend> Ms2ger: does make suck that much?
[17:57:52] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[17:58:08] <Ms2ger> It sucks about as bad as all build tools, I guess
[17:58:09] *** Quits: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: brendan)
[17:58:15] <Ms2ger> It's just the one that hurt me most :)
[17:58:15] *** Parts: ewalstad (Adium@moz-9A04E871.dedicated.static.sonic.net) ()
[17:58:51] *** Joins: sp3d (a@moz-41A29595.dhcp.stls.mo.charter.com)
[17:58:52] *** Quits: sp3d (a@moz-41A29595.dhcp.stls.mo.charter.com) (Client exited)
[17:59:07] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[17:59:08] <jdm> acrichto: is it just a matter of adding -lrustuv to the final rustc command?
[17:59:16] <acrichto> jdm: extern crate rustuv
[17:59:20] <jdm> ah, right
[17:59:38] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[18:00:44] <tedh> why isn't that a link time error?
[18:01:11] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[18:01:31] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:02:09] *** Joins: Sharp (Sharp@moz-3301C7AB.static-ip.telepacific.net)
[18:02:10] *** Joins: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[18:02:34] *** Quits: benjamin_ (benjamin@moz-852745DE.dip0.t-ipconnect.de) (Ping timeout)
[18:03:01] *** Quits: bollu (bollu@31CCE710.7065DDB9.6D6A344F.IP) (Client exited)
[18:03:20] *** Quits: vmx (vmx@moz-42FD76A7.pools.arcor-ip.net) (Quit: Leaving)
[18:05:34] *** Quits: Sharp (Sharp@moz-3301C7AB.static-ip.telepacific.net) (Quit: Sharp)
[18:05:43] <seanmonstar> any settings i should use for vim when editting mozilla/rust files? pretty much always tells me that macro_rules are unstable :D
[18:07:02] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[18:07:13] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[18:08:56] *** eatkinson-away is now known as eatkinson
[18:09:27] *** Quits: jensnockert (jensnocker@moz-EF95FD94.astro.lu.se) (Input/output error)
[18:09:46] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[18:09:54] *** Joins: jensnockert (jensnocker@moz-EF95FD94.astro.lu.se)
[18:10:15] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Quit: WeeChat 0.4.3)
[18:11:36] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[18:11:36] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Connection reset by peer)
[18:11:38] *** Quits: jensnockert (jensnocker@moz-EF95FD94.astro.lu.se) (Ping timeout)
[18:11:48] *** Quits: bakkdoor (bakkdoor@moz-A526B6C0.osnanet.de) (Quit: Leaving...)
[18:11:54] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[18:12:02] *** Joins: jensnockert (jensnocker@moz-EF95FD94.astro.lu.se)
[18:12:32] *** Quits: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net) (Ping timeout)
[18:13:29] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[18:13:29] *** ChanServ sets mode: +o tjc
[18:14:06] *** Quits: rootnode (rootnode@moz-83F76E1A.pools.arcor-ip.net) (Ping timeout)
[18:15:10] *** Quits: Anupkumar (uid16774@moz-A42E5B7B.irccloud.com) (Quit: Connection closed for inactivity)
[18:18:12] *** Joins: Sharp (Sharp@moz-3301C7AB.static-ip.telepacific.net)
[18:18:14] *** Joins: azita (Azita@moz-24157589.mtv2.mozilla.com)
[18:18:48] *** Joins: ganitsu (ganitsu@moz-B8BA2EA8.dialup.adsl.anteldata.net.uy)
[18:19:55] *** Quits: azita (Azita@moz-24157589.mtv2.mozilla.com) (Quit: azita)
[18:21:41] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[18:21:55] *** Joins: Savago (Savago@F7A245C3.E820043D.D4C04133.IP)
[18:22:43] *** Joins: azita (Azita@moz-62518563.mtv2.mozilla.com)
[18:23:24] *** Quits: dranov (dranov@10725E3C.94264913.FB866788.IP) (Ping timeout)
[18:24:33] *** Quits: azita (Azita@moz-62518563.mtv2.mozilla.com) (Quit: azita)
[18:24:46] *** Joins: IanCormac84 (User@7B004C66.64D641E5.67DFF8B4.IP)
[18:25:08] *** Quits: maattdd (matthieu@moz-BD1940C7.fbx.proxad.net) (Ping timeout)
[18:25:16] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[18:25:29] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[18:25:40] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[18:26:29] *** Joins: q66 (q66@moz-FDC9B85A.range109-150.btcentralplus.com)
[18:26:54] *** Joins: p1start (rewi@moz-E7F3D014.org)
[18:27:04] <dsrx> seanmonstar: you can mitigate that with a #[feature(macro_rules)]; at the top of your file
[18:27:48] *** Quits: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca) (Ping timeout)
[18:27:58] <seanmonstar> dsrx: im hacking on the rust repo. that line is in each lib.rs
[18:28:18] *** eatkinson is now known as eatkinson-away
[18:28:23] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[18:28:24] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: rcirc on GNU Emacs 24.3.1)
[18:28:38] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[18:29:03] *** Joins: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca)
[18:29:20] <dsrx> weird
[18:29:36] <carllerche> what's the easiest way for me to find out what a pub extern "C" fn that returns ~str will actually return?
[18:29:43] *** Joins: Anupkumar (uid16774@moz-A42E5B7B.irccloud.com)
[18:29:50] <Ms2ger> Mm
[18:30:12] *** Parts: dradtke (dradtke@moz-77578067.hfc.comcastbusiness.net) ()
[18:30:47] <dsrx> that squelches any error from the compiler for me, which also removes the errors from flycheck-mode
[18:30:56] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[18:31:36] *** Joins: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP)
[18:31:40] <kimundi> carllerche: What do you mean?
[18:31:49] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[18:31:52] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[18:31:55] <carllerche> I'm trying to figure out he memory layout that would be returned to C
[18:32:09] <carllerche> curiosity mostly
[18:32:13] <seanmonstar> dsrx: the vim scripts will rustc check the file i'm editing, which usually isnt the lib.rs, so it doesn't load the lib.rs into rustc
[18:32:27] <kimundi> The memory layout of the current ~str is *{uint, uint, u8...}
[18:32:31] <carllerche> I guess I'm mostly curious about what all the various pointer types, Option, etc.. look like 
[18:32:59] <kimundi> carllerche: Note that right now ~str and ~[T] in general have a different layout than any other ~T
[18:33:06] *** Joins: p1start1 (rewi@moz-E7F3D014.org)
[18:33:10] *** Quits: p1start (rewi@moz-E7F3D014.org) (Quit: Leaving.)
[18:33:20] *** Quits: ganitsu (ganitsu@moz-B8BA2EA8.dialup.adsl.anteldata.net.uy) (Quit: WeeChat 0.4.1)
[18:33:34] <dsrx> seanmonstar: I think this is above my pay grade now
[18:33:34] <kimundi> We're currently in a transition where those differences will be more uniformly defined.
[18:33:35] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[18:33:35] *** Joins: Denommus (user@7ACE3361.B4C8460.B9657DD5.IP)
[18:33:41] <Denommus> hm
[18:33:47] <carllerche> kimundi: are ~str and ~[u8] the same?
[18:33:51] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[18:33:56] <kimundi> carllerche: memory layout wise, yes
[18:33:57] <Denommus> TotalEq doesn't have an "equals" method any longer. What should I use instead? Eq?
[18:34:00] <Denommus> *eq?
[18:34:17] <seanmonstar> dsrx: was a question to those that hack on the rust repo frequently :)
[18:34:19] <sfackler> Denommus: TotalEq extends Eq so you can just use ==
[18:34:21] <carllerche> kimundi: what about Option<…>?
[18:34:31] <kimundi> Denommus: Afaik yes. I think TotalEq is only a marker type now, that indicates that Eq is Total
[18:34:51] *** Quits: p1start1 (rewi@moz-E7F3D014.org) (Ping timeout)
[18:34:55] <sfackler> carllerche: unspecified in general
[18:34:59] <Denommus> so the impl should be empty?
[18:35:06] <kimundi> carllerche: A Option is just a enum, which don't have an defined memory layout to allow for optimizations.
[18:35:11] <sfackler> Option<~T> will be a nullable pointer for example
[18:35:20] <sfackler> i.e. None is represented as NULL
[18:35:22] <carllerche> cool
[18:35:26] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[18:36:09] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[18:36:09] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[18:36:31] <kimundi> carllerche: However, right now you can say that for any T that is not a pointer type like ~ or &, Option<T> adds a one byte discriminant at the beginning. So a Option<u8> should be 2 bytes, while a Option<u64> is 16 bytes because of alignment
[18:37:01] *** Joins: glaebhoer1 (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP)
[18:37:34] <kimundi> carllerche: A Option for a (non-nullable) pointer type, like Option<~T> or Option<&T>, is optimized to just be one pointer, with the NULL case representing the None value of the Option.
[18:38:07] *** Joins: samuel (samuel@moz-8E438DDE.cust.tele2.de)
[18:38:11] *** Quits: kngl (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP) (Quit: Leaving.)
[18:38:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:38:29] <carllerche> if I wanted to return an Option<~str> to a C function caller, what would be the recommended way to do that? make a custom struct?
[18:38:54] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[18:39:23] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[18:39:23] <kimundi> Well, ideally as long as we don'T have official guarantees, you just wouldn't return a enum to C.
[18:40:07] <kimundi> But if you want to anyway, you'd define a custom struct, yeah
[18:40:31] *** Quits: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP) (Quit: This computer has gone to sleep)
[18:40:34] <Denommus> now I'm getting "failed to find an implementation of trait std::cmp::TotalEq for scancode::ScanCode"
[18:40:51] *** Quits: samuel (samuel@moz-8E438DDE.cust.tele2.de) (Quit: Leaving)
[18:42:04] *** Quits: kris (kris@moz-147EE6DF.diku.dk) (Ping timeout)
[18:42:30] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[18:42:35] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[18:43:25] *** Joins: maattdd (matthieu@moz-BD1940C7.fbx.proxad.net)
[18:44:18] <carllerche> kimundi: I'm looking at the llvm output, if I'm reading it right, the layout for a ~str is { i64, i64, …. } I'm guessing that it's platform dependent
[18:44:46] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Input/output error)
[18:45:00] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:45:07] <sfackler> carllerche: it'd probably be a safer bet to have the C function return a char * and length and use std::c_str::CString
[18:45:16] <carllerche> yeah
[18:45:26] <carllerche> sfackler: how does one deal w/ ownership?
[18:45:41] <carllerche> if in rust I have ~str and I use unsafe code to get a pointer to it, won't the memory be freed?
[18:45:43] <Denommus> ... okay, migrating to SFML for now, I'm too confused by TotalEq
[18:45:52] <sfackler> CString can be told that it owns the buffer and will call free() on it when it's destructed
[18:45:54] <carllerche> i guess CString copies it out
[18:46:04] <sfackler> I don't think it copies
[18:46:16] <carllerche> sfackler: ~str isn't null terminated though? (afaik)
[18:46:27] <sfackler> right, which is why you'd use the CString type instead
[18:46:31] <carllerche> so wouldn't it need to copy it w/ a null byte at the end
[18:46:54] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[18:47:06] <sfackler> http://static.rust-lang.org/doc/master/std/c_str/struct.CString.html
[18:47:15] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[18:47:19] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:48:11] <carllerche> sfackler: Ah, that takes in a char* and wraps it for rust
[18:48:14] <carllerche> I'm trying to do the reverse
[18:48:54] <sfackler> oh
[18:50:36] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[18:50:53] *** Joins: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca)
[18:51:09] *** Joins: krdln (krdln@moz-C271714F.dynamic.chello.pl)
[18:51:34] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[18:52:41] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[18:53:03] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[18:53:13] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[18:54:03] *** Joins: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de)
[18:54:32] <kimundi> carllerche: Do you want a owning, or a non-owning string for the C side? (I assume owning because of ~). Should it be a null terminated string, or a pointer+len pair? Depending on combination you either can get it for free, or need to copy the buffer, or need to copy and add null, or can not convert all possible the Rust strings because of embedded nulls.
[18:54:59] <carllerche> I want the C side to "own"
[18:55:10] *** Joins: dranov (dranov@10725E3C.94264913.FB866788.IP)
[18:55:24] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:55:26] <carllerche> allocate a ~str in a rust "lib" function, and pass "ownership" to a C caller
[18:55:31] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[18:56:05] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[18:56:46] <sfackler> you should be able to push a null byte, get a raw pointer out of the string and then use cast::forget to keep rust from freeing it
[18:56:54] <kimundi> Okay, and should it be a null terminated string or not? And if not, are embedded nulls allowed or not?
[18:57:14] *** Quits: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl) (Quit: Bye)
[18:57:23] <kimundi> sfackler: forgetting would be a memory leak.
[18:57:31] <sfackler> not if the C code is taking ownership
[18:57:53] <sfackler> although the representations may not work out rigt
[18:57:56] <sfackler> yeah
[18:58:12] *** Quits: q66 (q66@moz-FDC9B85A.range109-150.btcentralplus.com) (Ping timeout)
[18:58:14] <kimundi> unless the c code takes a pointer to the beginning of the allocation, and not to the beginning of the string bytes, it looses the allocation start
[18:58:49] <carllerche> I don't need it to be null terminated since I control the C side
[18:58:59] <carllerche> I can have the C side expect a struct that has a char* and len
[18:59:16] <carllerche> char* and size_t
[18:59:39] <kimundi> Then I would just define a struct for the memory layout of a ~str
[19:00:09] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[19:00:28] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[19:00:30] <carllerche> kimundi: so, this all started because I was experimenting w/ doing that and for some reason, ~str would crash but ~[u8] would not, and I was under the impression that the memory layouts between the two were the same :)
[19:00:44] <kimundi> carllerche: This contains low level struct definitions of the memory layouts of these types: https://github.com/mozilla/rust/blob/master/src/libstd/raw.rs
[19:00:59] <carllerche> ah, very nice, did not see that
[19:01:01] <kimundi> carllerche: Well they really ought to be the same.
[19:01:20] *** eatkinson-away is now known as eatkinson
[19:01:24] <carllerche> i mean, the crash could be unrelated to the memory layout, but it seemed suspicious
[19:01:35] <kimundi> how did you build either? Maybe differences in capacity/size 
[19:02:12] *** Joins: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl)
[19:02:13] *** Quits: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca) (Quit: canhtak)
[19:02:14] <carllerche> kimundi: on the rust side they are built exactly the same, just when I returned the ~[u8] I called as_bytes() on the ~str in rust before returning it to C
[19:02:34] <kimundi> ah, that explains it
[19:02:46] <kimundi> ~[T] and &[T] have very different memory layout
[19:03:36] <carllerche> kimundi: sorry, i am calling into_bytes()
[19:03:40] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[19:03:42] *** Joins: geomyidae_ (uid214@moz-E77DEB21.irccloud.com)
[19:03:52] *** Joins: drawoc (drawoc@moz-BAC1D3AB.res-cmts.sesh.ptd.net)
[19:03:58] <kimundi> ah, then it should be identical.. let me look at its impl.
[19:04:44] <kimundi> yeah it literally transmutes the ~str to a ~[u8]
[19:05:01] <kimundi> (https://github.com/mozilla/rust/blob/master/src/libstd/str.rs#L3003-L3005)
[19:05:04] <carllerche> then maybe something else is causing the crash :-/
[19:05:15] <carllerche> i should do more investigation
[19:05:19] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[19:05:24] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[19:05:54] *** Joins: claudiu (claudiu@moz-6F0C4397.thefacebook.com)
[19:06:29] *** Quits: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: brendan)
[19:06:52] *** Joins: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net)
[19:07:19] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:08:13] *** Joins: derek_c (derek@moz-BBA7279D.cit.cornell.edu)
[19:08:58] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[19:09:05] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[19:09:24] *** Quits: doctor (ARealName@moz-1BCE629A.hsd1.ca.comcast.net) (Ping timeout)
[19:09:53] <geomyidae_> made this commit last night and broke things, i get silent crashing now. I think it's related to data_packet_ptr https://github.com/colemickens/rust-pcap/commit/23dbdaa7e4b6921f83fcd3fbcafe3f3bc51949cb#diff-8c13b5c367b1a0d3dc04da468ea844bdR114
[19:10:05] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[19:10:22] <geomyidae_> I'm either passing it incorrectly to pcap_next_ex or I'm passing it incorrectly to Vec::from_raw_parts, but I can't figure it out
[19:10:38] *** Quits: jensnockert (jensnocker@moz-EF95FD94.astro.lu.se) (Input/output error)
[19:10:39] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:10:49] <geomyidae_> (that should build anywhere and example/simple.rs is a small test app that will demonstrate it crashing)
[19:11:04] *** Quits: maattdd (matthieu@moz-BD1940C7.fbx.proxad.net) (Ping timeout)
[19:11:10] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[19:11:11] *** Joins: jensnockert (jensnocker@moz-EF95FD94.astro.lu.se)
[19:11:23] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[19:12:52] *** Quits: jensnockert (jensnocker@moz-EF95FD94.astro.lu.se) (Ping timeout)
[19:13:35] *** Quits: philix (felipe@moz-90A0AE19.user.veloxzone.com.br) (Ping timeout)
[19:13:46] *** Joins: azita (Azita@moz-62518563.mtv2.mozilla.com)
[19:17:02] *** Joins: maattdd (matthieu@moz-BD1940C7.fbx.proxad.net)
[19:17:51] *** Quits: wilfred (uid159@moz-5F4AA75A.irccloud.com) (Quit: Connection closed for inactivity)
[19:18:08] *** Quits: hjr3 (hradtke@moz-445FF0C5.public.wayport.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[19:21:16] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Input/output error)
[19:22:53] *** Quits: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl) (Quit: Computer gone to sleep - Zzzz...)
[19:23:37] *** Quits: Rym (y@FD880926.C67B62F8.8772DA20.IP) (Ping timeout)
[19:24:19] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[19:24:26] *** Joins: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl)
[19:25:13] *** Joins: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP)
[19:27:22] <Denommus> traits can't have fields, right?
[19:28:35] <cmr> Denommus: nope
[19:29:00] *** Quits: Kruppe (user@moz-253119B0.esg.uwaterloo.ca) (Client exited)
[19:29:03] <Denommus> cmr: ok, so I should create just a property signature, like I would with a C# interface, right?
[19:29:08] <Denommus> cmr: e.g., get_foo, set_foo
[19:29:23] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:29:37] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[19:30:00] <cmr> Denommus: that's one workaround.
[19:30:02] *** Joins: Kruppe (user@moz-253119B0.esg.uwaterloo.ca)
[19:30:26] *** Joins: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca)
[19:31:12] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[19:31:19] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:32:12] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[19:32:59] *** Joins: jensnock_ (jensnocker@moz-33279404.customers.ownit.se)
[19:33:36] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[19:33:43] *** Quits: dranov (dranov@10725E3C.94264913.FB866788.IP) (Ping timeout)
[19:34:48] *** Quits: jensnock_ (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[19:35:19] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:35:51] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[19:36:26] *** Joins: doctor (ARealName@moz-1BCE629A.hsd1.ca.comcast.net)
[19:37:56] *** Quits: doctor (ARealName@moz-1BCE629A.hsd1.ca.comcast.net) (Connection reset by peer)
[19:40:45] *** Quits: pcmattman (pcmattman@moz-D9B7D938.net) (Ping timeout)
[19:41:17] *** Joins: pcmattman (pcmattman@moz-D9B7D938.net)
[19:43:21] *** Quits: harish (harish@moz-A9E56CFE.hfc.comcastbusiness.net) (Connection reset by peer)
[19:44:14] *** Joins: doctor (ARealName@moz-1BCE629A.hsd1.ca.comcast.net)
[19:44:43] *** Quits: doctor (ARealName@moz-1BCE629A.hsd1.ca.comcast.net) (Connection reset by peer)
[19:46:00] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:46:23] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[19:46:45] *** Quits: enos (jkingyens@moz-B0C1B161.hsd1.ca.comcast.net) (Ping timeout)
[19:47:32] *** jorendorff is now known as jorendorff_away
[19:48:26] *** Quits: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl) (Client exited)
[19:49:23] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[19:50:21] *** Quits: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP) (Connection reset by peer)
[19:50:47] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:50:51] *** Joins: Rym (y@FD880926.C67B62F8.8772DA20.IP)
[19:51:01] *** Joins: enos (jkingyens@moz-B0C1B161.hsd1.ca.comcast.net)
[19:51:12] *** Joins: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP)
[19:51:49] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:52:41] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:52:57] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[19:53:18] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:53:38] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[19:53:39] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[19:54:00] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Input/output error)
[19:55:48] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:55:54] *** Joins: harish (harish@moz-A9E56CFE.hfc.comcastbusiness.net)
[19:57:00] *** Joins: guest22221 (guest2222@F7E899E.F299E8.284344F5.IP)
[19:57:48] *** Quits: guest2222 (guest2222@moz-AFE5D8E0.xlate.ufl.edu) (Ping timeout)
[19:57:51] *** Quits: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP) (Quit: leaving)
[19:58:22] *** Quits: nszceta (nszceta@moz-E458A7C0.pharm.pitt.edu) (Quit: Textual IRC Client: www.textualapp.com)
[20:00:22] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[20:00:32] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[20:00:50] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[20:00:54] *** Joins: guest2222 (guest2222@F7E899E.F299E8.284344F5.IP)
[20:01:12] *** jorendorff_away is now known as jorendorff
[20:02:01] *** Quits: guest22221 (guest2222@F7E899E.F299E8.284344F5.IP) (Ping timeout)
[20:02:26] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[20:02:43] *** Quits: edwardw (edwardw@2BFF2300.F4429B.7E4FEB66.IP) (Quit: Leaving...)
[20:03:13] *** Joins: Jesse (jruderman@moz-62518563.mtv2.mozilla.com)
[20:03:14] *** Quits: derek_c (derek@moz-BBA7279D.cit.cornell.edu) (Connection reset by peer)
[20:03:32] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:04:14] *** Joins: doctor (ARealName@moz-1BCE629A.hsd1.ca.comcast.net)
[20:05:49] *** Quits: doctor (ARealName@moz-1BCE629A.hsd1.ca.comcast.net) (Connection reset by peer)
[20:08:24] *** Joins: guest22221 (guest2222@F7E899E.F299E8.284344F5.IP)
[20:08:46] *** Quits: guest2222 (guest2222@F7E899E.F299E8.284344F5.IP) (Ping timeout)
[20:10:48] *** Joins: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de)
[20:10:55] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[20:11:36] *** Quits: asmyers (quassel@1AED7747.A07F7734.FAA4474F.IP) (Ping timeout)
[20:12:43] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Quit: leaving)
[20:12:46] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[20:12:46] *** ChanServ sets mode: +ao brson brson
[20:14:10] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Quit: Lost terminal)
[20:14:59] *** Quits: harish (harish@moz-A9E56CFE.hfc.comcastbusiness.net) (Ping timeout)
[20:15:04] *** Joins: kngl (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP)
[20:15:51] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[20:16:57] *** Joins: janra (Janus@1CDC5701.A48867D7.52E4E107.IP)
[20:17:06] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[20:17:09] *** pmoore|buildduty-dinner is now known as pmoore
[20:19:14] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[20:19:14] *** ChanServ sets mode: +o tjc
[20:19:22] *** Joins: harish (harish@moz-A9E56CFE.hfc.comcastbusiness.net)
[20:20:03] *** Quits: Kruppe (user@moz-253119B0.esg.uwaterloo.ca) (Client exited)
[20:20:14] *** Joins: derek_c (derek@moz-BBA7279D.cit.cornell.edu)
[20:21:09] *** Quits: harish (harish@moz-A9E56CFE.hfc.comcastbusiness.net) (Ping timeout)
[20:21:56] <huhlig> sigh... I fail at rust
[20:22:19] *** Joins: nszceta (nszceta@moz-E458A7C0.pharm.pitt.edu)
[20:22:27] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[20:22:28] *** ChanServ sets mode: +ao dherman dherman
[20:22:58] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[20:23:20] *** Quits: qwerty_nor (Thunderbir@A5447B90.EDC74FC5.E19950A4.IP) (Ping timeout)
[20:23:27] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[20:23:57] *** Quits: azita (Azita@moz-62518563.mtv2.mozilla.com) (Quit: azita)
[20:24:01] <huhlig> if I compile a crate and emit llvm IR
[20:24:13] *** Joins: azita (Azita@moz-62518563.mtv2.mozilla.com)
[20:24:13] <huhlig> how do I declare an extern crate and have it find it
[20:24:22] *** Joins: harish (harish@moz-A9E56CFE.hfc.comcastbusiness.net)
[20:24:28] <huhlig> extern crate core; seems to be unable to locate it
[20:24:42] <huhlig> even if explicitly told where it is
[20:25:07] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[20:25:19] *** Quits: silven (quassel@moz-F81D3961.a328.priv.bahnhof.se) (Client exited)
[20:25:46] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[20:25:57] *** Joins: sinsnare (AndChat576@moz-C3025F49.pools.spcsdns.net)
[20:26:26] <kmc> I think the compiler only looks for fully compiled libraries, not IR
[20:26:31] <kmc> what are you trying to do?
[20:26:58] <sinsnare> Hey, if I wanted to get the type of something in a .rs file, how could I do that?
[20:27:08] <Ms2ger> Stare at the code
[20:27:11] <cmr> sinsnare: the easiest way is to do `let dummy: () = that_variable;`
[20:27:18] <cmr> and then rustc will tell you the type in the type error message
[20:27:19] <sinsnare> Like for an IDE I mean 
[20:28:20] *** Quits: azita (Azita@moz-62518563.mtv2.mozilla.com) (Quit: azita)
[20:28:55] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[20:29:00] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[20:29:32] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[20:29:39] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:29:50] <sinsnare> Would it be somwhere in librustc/libsyntax?
[20:30:34] *** Joins: hjr3 (hradtke@moz-E952E90B.hsd1.or.comcast.net)
[20:30:35] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:31:13] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[20:31:34] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[20:31:48] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[20:31:55] <kimundi> sinsnare: It would be most of librustc/libsyntax... after an major rewrite and additional tooling to support the kind of functionality you need for an IDE
[20:32:01] <Denommus> is it worth it to subdivide your project in smaller crates to have more parallelism on the build? If so, which kind of crate is ideal for the subdivisions? Static libraries?
[20:32:02] *** Joins: harish_ (harish@moz-A9E56CFE.hfc.comcastbusiness.net)
[20:32:19] <sinsnare> Kim
[20:32:57] <sinsnare> kimundi: so you're saying the functionality isn't necessarily there?
[20:33:02] *** Joins: azita (Azita@moz-62518563.mtv2.mozilla.com)
[20:33:09] *** Quits: harish (harish@moz-A9E56CFE.hfc.comcastbusiness.net) (Ping timeout)
[20:33:17] *** Joins: bmccallister (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[20:33:31] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[20:33:32] *** Quits: bmccallister (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Quit: Leaving...)
[20:33:37] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[20:33:50] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Input/output error)
[20:34:02] *** Joins: guest2222 (guest2222@moz-1D2D613F.ga.at.cox.net)
[20:34:36] *** Quits: guest22221 (guest2222@F7E899E.F299E8.284344F5.IP) (Ping timeout)
[20:34:57] *** Quits: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Ping timeout)
[20:35:10] *** Quits: Anupkumar (uid16774@moz-A42E5B7B.irccloud.com) (Quit: Connection closed for inactivity)
[20:35:12] *** Quits: fabiand (fabiand@moz-2CF3E016.adsl.alicedsl.de) (Quit: Verlassend)
[20:35:29] <kimundi> sinsnare: Not in a way to be useful for proper IDE support at least. You can In theory run the compiler partially until it finished typechecking, and then try to extract the type in a fashion usable to you, but I'm not sure what this would entail in detail.
[20:36:43] <sinsnare> Makes sense, is there a planned refactoring of rustc to support this kind of functionality?
[20:36:49] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[20:37:01] <kimundi> sinsnare: Not a priority for 1.0
[20:37:26] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[20:37:26] *** Joins: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[20:38:15] <sinsnare> Yeah, I hope it gets done though, because I feel like a rust ide can be on par with java/C# levels of tooling
[20:38:33] *** Quits: azita (Azita@moz-62518563.mtv2.mozilla.com) (Quit: azita)
[20:38:40] <sinsnare> And that could be a great boon to try rust
[20:39:11] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:39:17] *** Quits: jackneill (jackneill@moz-45F260D4.pool.digikabel.hu) (Ping timeout)
[20:39:50] <kimundi> definitly
[20:40:16] *** Joins: philix (felipe@moz-90A0AE19.user.veloxzone.com.br)
[20:40:36] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[20:40:42] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[20:40:44] <olsonjeffery> sinsnare: sadly, the Rust team doesn't have anywhere near the dedicated, paid resources as those at DevDiv w/ Microsoft or Sun/Oracle
[20:40:51] *** Quits: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP) (Client exited)
[20:41:04] <olsonjeffery> the usual, copout reply at this point is to say something like "this is open source; patches welcome!"
[20:41:13] *** Joins: azita (Azita@moz-62518563.mtv2.mozilla.com)
[20:41:13] *** Joins: harish (harish@moz-A9E56CFE.hfc.comcastbusiness.net)
[20:41:14] <olsonjeffery> but this isn't very useful or constructive.
[20:41:26] *** Joins: doctor (ARealName@moz-1BCE629A.hsd1.ca.comcast.net)
[20:41:37] <huhlig> kmc trying to link rust-core into a kernel module and some assembler
[20:41:42] <sinsnare> I wish I was smart enough to help something like a compiler :)
[20:41:45] <huhlig> right now I am trying to create my main
[20:42:02] *** Quits: harish_ (harish@moz-A9E56CFE.hfc.comcastbusiness.net) (Ping timeout)
[20:42:03] *** Quits: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP) (Ping timeout)
[20:42:24] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[20:42:32] <sfackler> fwiw, eclipse uses its own compiler, not javac, to get better tooling support
[20:42:44] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[20:42:48] *** Joins: dotfelix (felix@F873882B.AB3AC796.40E092AA.IP)
[20:43:10] <sinsnare> sfackler: I was actually thinking about that, but then I concluded I couldn't do that, so yeah.
[20:43:27] <huhlig> does rust have anything like this yet? http://gcc.godbolt.org/
[20:43:35] <aatch> sinsnare, best way to learn is to start. That's what I did.
[20:44:08] <aatch> sinsnare, Had no idea what I was doing, but added support for a custom entry point via the `#[start]` attribute.
[20:44:10] <sinsnare> I really can't wait to take a compiler course at UMD, maybe thatll motivate me
[20:44:11] <kmc> huhlig: last I played with rust-core, you were supposed to include it in your project's crate, not build it as a separate crate
[20:44:15] <sfackler> (I would not advise writing second Rust compiler until the language is finalized :P)
[20:44:22] <huhlig> kmc oh hmm
[20:44:24] <kmc> huhlig: out of curiosity, what kind of kernel module are you writing? :)
[20:44:25] *** Quits: doctor (ARealName@moz-1BCE629A.hsd1.ca.comcast.net) (Connection reset by peer)
[20:44:30] <doomlord_> configurations: is it possible to pass a configuration flag like -Dblahblah for a #define in C ... i've seen all the #[cfg(...)]  for platforms and #[test] for unit tests .... my usecase is almost unittest but not quite, a 'test-bed' .. it might be cleaner to have another .rs to do this but its nice for simple experimentation
[20:44:42] <huhlig> kmc right now I am just trying to bootstrap a simple raspberry pi kernel
[20:44:54] <kmc> doomlord_: --cfg foo
[20:44:54] <sfackler> doomlord_: rustc --cfg foo
[20:44:58] <doomlord_> thanks
[20:44:58] <sfackler> haha
[20:45:06] *** Joins: heftig (heftig@moz-19E06ABC.dip0.t-ipconnect.de)
[20:45:54] *** Quits: sinsnare (AndChat576@moz-C3025F49.pools.spcsdns.net) (Ping timeout)
[20:46:11] <aatch> sfackler, a second *parser* might be worth it, given Rust's relatively simple grammar, and that would go a long way towards better tooling support.
[20:46:31] <sfackler> yeah
[20:46:56] *** Joins: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP)
[20:48:07] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[20:49:46] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Input/output error)
[20:49:50] *** Joins: guest22221 (guest2222@F7E899E.F299E8.284344F5.IP)
[20:49:58] *** Quits: guest2222 (guest2222@moz-1D2D613F.ga.at.cox.net) (Connection reset by peer)
[20:50:05] *** Joins: guest2222 (guest2222@moz-1D2D613F.ga.at.cox.net)
[20:50:21] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[20:50:28] *** Quits: brontron (brontron@moz-C8D86903.tc.ph.cox.net) (Ping timeout)
[20:50:39] *** Joins: Kruppe (user@moz-253119B0.esg.uwaterloo.ca)
[20:51:33] *** Quits: guest22221 (guest2222@F7E899E.F299E8.284344F5.IP) (Ping timeout)
[20:52:02] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[20:52:09] *** Quits: derek_c (derek@moz-BBA7279D.cit.cornell.edu) (Ping timeout)
[20:54:09] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[20:57:16] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[20:57:35] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[20:58:23] *** Joins: q66 (q66@moz-FDC9B85A.range109-150.btcentralplus.com)
[21:00:13] *** Quits: ahunt (ahunt@moz-5E5AB5C8.range86-145.btcentralplus.com) (Input/output error)
[21:00:44] *** Joins: brontron (brontron@moz-CF02444.dia.static.qwest.net)
[21:01:05] *** Quits: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Quit: Leaving...)
[21:01:13] *** Joins: doctor (ARealName@moz-1BCE629A.hsd1.ca.comcast.net)
[21:01:49] *** Quits: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca) (Ping timeout)
[21:02:27] *** Joins: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca)
[21:02:34] *** Quits: doctor (ARealName@moz-1BCE629A.hsd1.ca.comcast.net) (Connection reset by peer)
[21:02:57] *** Joins: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[21:03:37] *** Quits: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca) (Quit: Leaving.)
[21:03:48] *** Joins: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca)
[21:04:33] *** Quits: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Quit: Leaving...)
[21:05:02] *** Joins: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[21:05:08] *** Joins: wzsk (wzsk@4F7252F2.CEBBE496.E48CFF63.IP)
[21:05:44] *** Joins: neopara (neopara@CFC3C6C3.D6CCE4AE.77834EAA.IP)
[21:07:19] *** Quits: Kruppe (user@moz-253119B0.esg.uwaterloo.ca) (Ping timeout)
[21:07:46] <doomlord_> if you think my obsession with blobs is unfounded, consider immutable enums .. one can implement these unpadded in blobs
[21:08:52] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[21:09:16] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[21:09:48] *** Quits: brontron (brontron@moz-CF02444.dia.static.qwest.net) (Ping timeout)
[21:09:50] *** Joins: brontron (brontron@moz-CF02444.dia.static.qwest.net)
[21:10:21] *** Joins: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net)
[21:10:41] *** Joins: carllerche (carllerche@moz-F43E6AFB.hfc.comcastbusiness.net)
[21:10:57] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[21:11:23] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:11:39] *** Quits: brontron (brontron@moz-CF02444.dia.static.qwest.net) (Ping timeout)
[21:12:43] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[21:12:48] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[21:15:01] *** Quits: Axord (xord@moz-BC8E2FBC.static.rvsd.ca.charter.com) (Ping timeout)
[21:15:38] *** Joins: brontron (brontron@moz-CF02444.dia.static.qwest.net)
[21:16:23] <eddyb> doomlord_: those are unsized enums
[21:16:45] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:16:47] *** Joins: derek_c (derek@moz-FFD3FF4D.cit.cornell.edu)
[21:17:48] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[21:17:52] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[21:18:04] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[21:18:05] <eddyb> doomlord_: I actually considered having a (*T, discr) representation that's opt-in - you lose the ability to change the variant (without reallocating - but that excludes shared ownership) but potentially gain a lot in terms of size
[21:18:43] <aatch> Hey, so I'm gonna be in SF for (hopefully) about a week soon, how many people on the Rust team are in the SF offices?
[21:18:47] *** Quits: brontron (brontron@moz-CF02444.dia.static.qwest.net) (Ping timeout)
[21:18:56] <andor> https://gist.github.com/andor44/9749371 can someone help me with this?
[21:19:02] <doomlord_> interesting
[21:19:32] <andor> every combination i tried seems to result in a lifetime error
[21:19:48] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[21:19:53] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[21:19:57] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[21:19:58] *** Joins: lord (lord@87D98E32.4046EB22.428F94DD.IP)
[21:20:02] <aatch> It'd be cool to actually meet a bunch of you guys that I otherwise only know via here.
[21:20:19] <eddyb> doomlord_: you have to think about consequences though
[21:20:27] <lord> Noob question — does Rust have any bitwise rotation functions?
[21:20:37] <lord> I've googled around and can't seem to find any
[21:20:54] <eddyb> lord: have you worked in languages where the equivalent bitwise ops don't optimize to a rotate instruction?
[21:21:07] <eddyb> I'm pretty sure it works even in JS :P
[21:21:23] *** Joins: doctor (ARealName@moz-1BCE629A.hsd1.ca.comcast.net)
[21:21:34] *** Quits: doctor (ARealName@moz-1BCE629A.hsd1.ca.comcast.net) (Connection reset by peer)
[21:22:02] <eddyb> lord: that said, you should search the docs instead (or look in std::num), I know we have a bunch of methods defined on all sorts of numbers
[21:22:10] *** Joins: brontron (brontron@moz-CF02444.dia.static.qwest.net)
[21:22:18] <aatch> eddyb, I think that some versions of gcc didn't, like from 10 years ago.
[21:22:18] <eddyb> doomlord_: you don't want to allow expanding on weird axis as it becomes feature bloat
[21:22:26] *** Quits: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de) (Input/output error)
[21:22:36] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[21:23:04] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[21:23:09] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[21:23:15] <eddyb> aatch: ahh that's before my time
[21:23:48] <lord> eddyb: I've done a fair amount of js, but haven't really ever messed with bitwise ops. std::num looks like it doesn't have rotate, just shl and shr.
[21:23:48] <aatch> eddyb, before my time too
[21:23:58] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Ping timeout)
[21:24:13] <aatch> lord, I can guarentee you that it will optimize to whatever is fastest.
[21:24:57] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[21:25:08] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[21:25:28] <lord> Hmm, okay. Thanks.
[21:25:46] *** jorendorff is now known as jorendorff_away
[21:25:51] <eddyb> lord: have you ever seen (x << n) | (x >> (bits_in_type_of_x - n)) or whatever the right combination is?
[21:26:11] <aatch> you can make it a macro or a helper function if you wish.
[21:26:40] *** Quits: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP) (Ping timeout)
[21:26:42] <lord> eddyb: I just came across that now. I think that's what I'm going to try, thanks!
[21:27:22] <o11c> remember to special-case roation by 0 and rotation by bits_in_type
[21:27:30] <o11c> because otherwise the shift is undefined
[21:27:37] *** Joins: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP)
[21:27:58] <aatch> The LLVM optimiser is pretty good, the instruction selector does a good job too. GCC often produces slightly better code, but LLVM has been gaining for a while.
[21:28:42] <aatch> GCC has a had a massive head-start though.
[21:30:11] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[21:30:39] <Denommus> doomlord_: hello, dude
[21:30:42] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[21:31:06] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[21:31:13] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: willingc)
[21:31:26] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:33:04] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[21:33:06] <Denommus> anyone besides me use flycheck in Emacs? How to get it to know where to find extern crates and modules?
[21:33:10] <eddyb> aatch: but it gets harder to add to it, I bet :P
[21:33:15] *** Quits: neopara (neopara@CFC3C6C3.D6CCE4AE.77834EAA.IP) (Client exited)
[21:33:26] <lord> o11c: ahh, didn't know about the special 0 case, thanks so much!
[21:33:28] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[21:33:37] <aatch> eddyb, yeah, diminishing returns and all that
[21:33:50] *** Joins: jensnock_ (jensnocker@moz-33279404.customers.ownit.se)
[21:34:05] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[21:34:37] <eddyb> aatch: I can't think (let alone say) "spaghetti code" without feeling hungry. I should've went to dinner hours ago. IRC is keeping me chattin' :/
[21:34:38] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[21:34:58] <aatch> eddyb, I think LLVM could still outstrip GCC due to it's more modern and modular codebase, but GCC has picked it's game up in that regard.
[21:35:26] <eddyb> I heard about a move to C++ some years ago
[21:35:38] *** Quits: jensnock_ (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[21:35:46] <eddyb> I don't watch GCC development as closely nowadays
[21:35:51] <andor> no one? :(
[21:36:06] <aatch> eddyb, neither, just what I hear on the grapevine, so to speak
[21:36:24] *** Quits: dotfelix (felix@F873882B.AB3AC796.40E092AA.IP) (Ping timeout)
[21:36:31] *** Joins: dotfelix (felix@F873882B.AB3AC796.40E092AA.IP)
[21:36:36] <eddyb> andor: first, you can't return a borrowed pointer
[21:36:40] *** Quits: dpanth3r (dinofelis@228444B8.6B06001A.BB6F225C.IP) (Client exited)
[21:36:47] <o11c> andor: you need a lifetime on your argument also
[21:36:49] <Ms2ger> eddyb, get out and eat something
[21:37:16] <eddyb> fn new(closure: 'a ||) -> Foo<'a> { Foo {bar: closure}}
[21:37:17] <o11c> eddyb: GCC has gotten a *lot* better since LLVM gave it some competition
[21:37:18] <andor> o11c: i had that, but then types will mismatch since foo expects a ||, not a &'a 
[21:37:26] *** Joins: dpanth3r (dinofelis@228444B8.6B06001A.BB6F225C.IP)
[21:37:41] *** Quits: murph (murph@moz-416250FA.oracle.com) (Ping timeout)
[21:37:43] *** Quits: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net) (Ping timeout)
[21:37:43] <eddyb> o11c: that's always good
[21:37:46] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[21:37:50] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[21:37:58] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[21:38:01] <eddyb> Ms2ger: and then I have to sleep
[21:38:07] <Ms2ger> Yes, that too :)
[21:38:10] <doomlord_> Denommus, hi again
[21:38:11] <andor> eddyb: why is it Foo<'a> and not 'a Foo?
[21:38:14] <eddyb> Ms2ger: yay 0 progress day
[21:38:24] <o11c> basically ... when there is no competition, politics can stop a lot. When there *is* competition ...
[21:38:43] <eddyb> andor: because it's the same syntax as the definition of Foo
[21:38:47] <Denommus> I heard that Eric Raymond was asking for GCC's license to allow more modularity and plugins, but RMS didn't appreciate the suggestion
[21:38:49] <aatch> o11c, without competition they fight each other
[21:39:02] <andor> eddyb: err... sorry but what does that mean?
[21:39:09] <andor> oh wait, i think i get it
[21:39:11] <aatch> with competition they have an "Other" to fight instead
[21:39:14] <eddyb> andor: if you think the lifetime syntax for lifetimes shows up anywhere else - it doesn't. it's actually a mistake
[21:39:19] <Ms2ger> Does match foo { Some(~"blah") => ... } still work?
[21:39:21] <Denommus> doomlord_: I started the scratch for the game engine I'm doing for the Rust workshop I'll do in the company :)
[21:39:22] <tiffany> [17:35] <eddyb> I heard about a move to C++ some years ago
[21:39:24] <eddyb> Ms2ger: no
[21:39:30] *** Quits: Savago (Savago@F7A245C3.E820043D.D4C04133.IP) (Quit: Savago)
[21:39:31] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Ping timeout)
[21:39:33] <Ms2ger> What do I do instead? map()?
[21:39:37] <Denommus> doomlord_: for now all it does is abstract SFML's main loop, though
[21:39:39] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[21:39:39] <tiffany> they didn't really modernise the codebase when they did that, afaik the only real change was from a C-based vector type to std::vector
[21:39:43] <eddyb> andor: it's supposed to be ||:'a but there was some parser shenanigans
[21:40:02] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[21:40:03] <eddyb> Ms2ger: I guess. we don't have an borrow on Option :(
[21:40:23] <eddyb> and we don't have DST either
[21:40:29] <eddyb> tiffany: haha
[21:40:31] <tiffany> and of course this relies on a subjective definition of "modern", the main difference I'm thinking of is OOP vs procedural
[21:40:39] <Ms2ger> Might get there
[21:40:42] *** jorendorff_away is now known as jorendorff
[21:40:43] *** Joins: Axord (xord@moz-BC8E2FBC.static.rvsd.ca.charter.com)
[21:41:05] *** Joins: doctor (ARealName@moz-1BCE629A.hsd1.ca.comcast.net)
[21:41:10] <doomlord_> Denommus, interesting.   just messing with bsp files at the minute myself
[21:41:13] <dsrx> Denommus: check out flycheck-rust-library-path
[21:41:18] <eddyb> with DST, that would be foo.borrow() to go from &'a Option<~str> to Option<&'a str>
[21:41:19] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[21:41:24] <tiffany> as for licensing, if gcc wasn't so strict about freedom through regulation then llvm probably wouldn't even exist
[21:41:38] <cmr> http://cmr.github.io/blog/2014/03/24/this-week-in-rust/
[21:41:39] <eddyb> tiffany: I've heard that one before
[21:41:43] <eddyb> Ms2ger: pattern guards might work better in some cases
[21:41:44] <dsrx> Denommus: the variable I mean, or in customize
[21:41:45] <Ms2ger> error: `p` does not live long enough, of course
[21:41:49] <Denommus> C++ is not just about OOP, though. It also adds generic programming (though it's through templates) and some extra safety (of course, not as safe as Rust)
[21:41:56] <eddyb> Ms2ger: .as_ref() solves that issue
[21:41:59] <cmr> And metaprogramming!
[21:42:00] <o11c> C++ is all about lifetimes
[21:42:01] <doomlord_> optional safety :)
[21:42:06] <Denommus> dsrx: is this variable buffer-local?
[21:42:13] <tiffany> if you really, truly need generics, then there's always C preprocessor macros
[21:42:15] <Denommus> dsrx: forget it, I'll check it myself on the docs -.-
[21:42:16] * Ms2ger stops trying to improve this
[21:42:22] <tiffany> I implemented vectors using macros
[21:42:24] *** Quits: vikstrous (v@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[21:42:31] <eddyb> cmr: close to 100/w :D
[21:42:36] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[21:42:36] *** Quits: doctor (ARealName@moz-1BCE629A.hsd1.ca.comcast.net) (Connection reset by peer)
[21:42:42] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[21:42:42] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[21:43:04] <eddyb> cmr: "the old std::vec_ng" there's no right way to put it, is it?
[21:43:09] <doomlord_> macros could end up being one of the best bits of rust for me
[21:43:18] <dsrx> Denommus: yep it's buffer local I'm fairly sure
[21:43:20] <eddyb> cmr: I read that as "the old new vector"
[21:43:39] <cmr> eddyb: I read that as "the old std::vec_ng" :P
[21:44:01] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Connection reset by peer)
[21:44:13] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[21:44:19] <dsrx> it's really too bad that the word "macro" is tainted for so many systems programmers because of C/C++
[21:44:20] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[21:44:22] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[21:44:22] <eddyb> cmr: "Atomics are no longer immutable, due to the work on Share, they can safely use interior mutability."?
[21:45:06] <cmr> eddyb: they don't take &mut
[21:45:09] *** pmoore is now known as pmoore|away
[21:45:11] <JustAPerson> I haven't been keeping up with Rust lately, how are errors propagated in a non terminating way? Just return codes?
[21:45:14] <cmr> eddyb: click the link for details!
[21:45:17] <eddyb> cmr: I thought "no longer require mutable references" was the story, not "are no longer immutable"
[21:45:21] <cmr> JustAPerson: the Result type.
[21:45:22] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[21:45:23] <andor> can i clone closures?
[21:45:26] <cmr> andor: no.
[21:45:34] <andor> :(
[21:45:43] <eddyb> cmr: maybe you're technically correct (and yes, I know the changes) but it almost sounds like the opposite :P
[21:45:44] <cmr> eddyb: I'll rephrase
[21:46:03] <Denommus> dsrx: it is. It solves the problem of "extern crate rsfml", but apparently I can't use it for detecting modules in other files
[21:46:05] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[21:46:12] <andor> cmr: any way i can duplicate one?
[21:46:17] <cmr> andor: no.
[21:46:21] <dsrx> Denommus: hrmm
[21:46:21] <andor> dang
[21:46:28] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Connection reset by peer)
[21:46:33] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[21:46:58] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[21:47:06] <andor> cmr: how about procs?
[21:47:08] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[21:47:17] <Denommus> dsrx: e.g., lib.rs has "extern crate rsfml; pub mod game;", and game.rs has "use rsfml::foo;"
[21:47:22] <eddyb> cmr: also, Freeze is tied in with Share/Unsafe, though that's not important
[21:47:32] <Denommus> dsrx: game.rs points to an error in the "use" statement
[21:47:44] <JustAPerson> cmr: any way to propagate that more than one call frame? Like how exceptions in other languages may be caught beyond the immediate caller's frame
[21:47:56] <JustAPerson> well, automatically propagate
[21:48:02] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Connection reset by peer)
[21:48:12] <cmr> JustAPerson: return a Result type :)
[21:48:32] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[21:48:33] <JustAPerson> cmr: so you have to check against every function call that may error? ok :(
[21:48:36] <cmr> JustAPerson: there's no catchable exceptions, but we used to have "conditions" in the standard library that did something somewhat similar.
[21:48:48] <strcat> only sort of similar
[21:48:48] <cmr> JustAPerson: the `try` macro helps here.
[21:48:56] <JustAPerson> yeah, I thought conditions were removed
[21:49:00] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[21:49:10] <strcat> catchable exceptions let you catch exceptions anywhere along the stack unwinding
[21:49:19] <Denommus> JustAPerson: that's not very different from throwing exceptions up. If you know your function will catch the error and not propagate it upwards, you may simple return T instead of Result<T>
[21:49:21] <JustAPerson> wondering what the plan was afterwards if it's just back to error error code like checking
[21:49:48] <strcat> JustAPerson: Option/Result
[21:49:58] <cmr> JustAPerson: Result isn't really "error code", since there's no way to get the wrapped data without handling the error case.
[21:50:07] <strcat> Option<ErrorType>, Result<ValueType, ErrorType>
[21:50:12] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[21:50:33] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Connection reset by peer)
[21:50:51] *** Joins: pepijndevos (pepijndevo@9EACEF43.E50A3180.BCE47D84.IP)
[21:51:00] <dsrx> Denommus: not sure. flycheck-rust does something like (pardon my weird elisp/shell pseudosyntax) `rustc --no-trans -L $(flycheck-rust-library-path) --crate-type=lib yourfile.rs`
[21:51:42] *** Quits: Rym (y@FD880926.C67B62F8.8772DA20.IP) (Ping timeout)
[21:51:54] <kmc> is there a type like Option<~[T]> but without including Some(~[])? i.e. a vector without any heap allocation in the empty case
[21:51:55] *** Quits: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de) (Connection reset by peer)
[21:52:03] *** Joins: leowoe (Leo@moz-D5256331.dip0.t-ipconnect.de)
[21:52:03] *** Joins: Rym (y@FD880926.C67B62F8.8772DA20.IP)
[21:52:09] <Ms2ger> kmc, smallvec?
[21:52:20] <strcat> kmc: Vec<T> doesn't do heap allocation in the empty c
[21:52:23] <strcat> ~[T] is deprecated anyway
[21:52:23] <Ms2ger> Not sure if that's only in Sevo
[21:52:25] <Ms2ger> Servo
[21:52:29] <strcat> empty case*
[21:52:33] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[21:52:41] <strcat> kmc: 7x faster push + no allocation in the empty case
[21:52:51] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[21:52:55] <Ms2ger> Why does it push faster?
[21:52:58] <strcat> https://github.com/mozilla/rust/issues/8981
[21:53:16] <kmc> strcat: cool.  i'm on month+ old Rust though
[21:53:19] <strcat> Ms2ger: because the old one had to do offsets from a header, calculate sizes based on a header (with overflow checks), etc.
[21:53:19] <Ms2ger> Want to summarize? :)
[21:53:23] <kmc> i'll just wait and use that later
[21:53:25] <Ms2ger> Ah
[21:53:33] <strcat> Ms2ger: there are benchmark numbers in that link
[21:53:41] <Ms2ger> Might read tomorrow
[21:53:41] <Denommus> JustAPerson: I'm under the impression that having something more complex than that, besides breaking linear typing, is not very useful because of RAII (the only thing that a normal exception system does besides returning a weird value is having "finally", which RAII renders useless)
[21:53:48] <strcat> Ms2ger: just a simple table of numbers ;)
[21:54:18] <strcat> 45000ns/iter -> 7-8k ns/iter for pushing 10k
[21:54:19] * Ms2ger goes to bed
[21:54:26] <Ms2ger> eddyb, you should too :)
[21:54:40] *** Joins: murph (murph@moz-29F9DAC6.oracle.com)
[21:54:48] <strcat> kmc: Vec<T> might have existed a month ago
[21:54:51] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[21:54:55] *** Joins: mib_78e4g3 (Mibbit@moz-7AD9232F.rev.numericable.fr)
[21:54:56] <strcat> kmc: as std::vec_ng though
[21:54:56] *** Quits: Ms2ger (Ms2ger@6BCD8197.DF5CCC78.F15B0BB3.IP) (Quit: nn)
[21:54:57] <strcat> don't remember.
[21:56:20] <o11c> JustAPerson: somebody wrote a macro to make Option chains prettier ...
[21:56:52] <JustAPerson> Denommus: the thing I'm looking to avoid is having to check the returns of every function that may error along the way. I rather liked with try/except being able to designate 1 failspot for multiple related errors (obviously not 1 try{} in main(), but on a much smaller scale)
[21:57:20] *** Joins: brendan (brendaneic@moz-62518563.mtv2.mozilla.com)
[21:58:04] *** Quits: leowoe (Leo@moz-D5256331.dip0.t-ipconnect.de) (Ping timeout)
[21:58:43] *** Quits: brontron (brontron@moz-CF02444.dia.static.qwest.net) (Ping timeout)
[21:59:39] *** Joins: leowoe (Leo@moz-D5256331.dip0.t-ipconnect.de)
[21:59:51] <strcat> JustAPerson: you can still do that, by composing Option/Result with the available methods
[22:00:00] <strcat> and we can add new features to those
[22:00:11] *** Quits: nkoep (nik@moz-ECB2D115.pool.mediaways.net) (Ping timeout)
[22:01:13] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[22:01:19] <strcat> instead of
[22:01:20] *** Joins: doctor (ARealName@moz-1BCE629A.hsd1.ca.comcast.net)
[22:01:56] *** Joins: brontron (brontron@moz-CF02444.dia.static.qwest.net)
[22:01:58] *** Quits: twi (Adium@moz-ED056769.cust.vodafonedsl.it) (Ping timeout)
[22:02:05] *** Joins: twi (Adium@moz-ED056769.cust.vodafonedsl.it)
[22:02:05] *** Joins: sinsnare (AndChat576@moz-C3025F49.pools.spcsdns.net)
[22:02:06] <strcat> instead of doing it manually on each return*
[22:02:38] *** Quits: doctor (ARealName@moz-1BCE629A.hsd1.ca.comcast.net) (Connection reset by peer)
[22:02:40] <JustAPerson> strcat: could you please elaborate? what methods?
[22:02:47] *** Joins: nkoep (nik@moz-225B6993.pool.mediaways.net)
[22:02:57] <strcat> look at the available methods on Option/Result (like and_then)
[22:03:08] <strcat> you don't have to manually handle each error separately
[22:03:37] *** Quits: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca) (Quit: Leaving.)
[22:03:41] *** Joins: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca)
[22:03:42] *** Quits: kngl (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP) (Quit: Leaving.)
[22:03:46] *** Joins: Kazimuth (james@moz-F82198F6.hsd1.ma.comcast.net)
[22:03:49] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[22:03:56] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[22:04:43] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Client exited)
[22:05:03] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: brb)
[22:05:04] *** Joins: doctor (ARealName@moz-1BCE629A.hsd1.ca.comcast.net)
[22:05:23] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[22:05:23] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[22:06:00] *** Quits: exobit_ (textual@moz-E06F46F0.corp.bitshelter.com) (Quit: )
[22:06:45] *** Quits: doctor (ARealName@moz-1BCE629A.hsd1.ca.comcast.net) (Connection reset by peer)
[22:08:22] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[22:09:10] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[22:09:34] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Quit: Leaving)
[22:09:45] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[22:10:36] *** Quits: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca) (Quit: canhtak)
[22:10:37] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Quit: Computer has gone to sleep.)
[22:10:45] *** Quits: derek_c (derek@moz-FFD3FF4D.cit.cornell.edu) (Ping timeout)
[22:10:56] *** Quits: Rym (y@FD880926.C67B62F8.8772DA20.IP) (Ping timeout)
[22:11:01] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[22:12:37] *** Quits: dotfelix (felix@F873882B.AB3AC796.40E092AA.IP) (Quit: Leaving)
[22:12:44] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[22:12:46] *** Joins: dotfelix (felix@F873882B.AB3AC796.40E092AA.IP)
[22:12:55] *** Quits: brontron (brontron@moz-CF02444.dia.static.qwest.net) (Ping timeout)
[22:12:55] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Connection reset by peer)
[22:13:04] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[22:13:38] *** Joins: inokid (felix@F873882B.AB3AC796.40E092AA.IP)
[22:14:32] *** Quits: inokid (felix@F873882B.AB3AC796.40E092AA.IP) (Quit: Leaving)
[22:14:34] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[22:16:14] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[22:17:32] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[22:18:05] *** Quits: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net) (Ping timeout)
[22:18:14] *** Quits: dotfelix (felix@F873882B.AB3AC796.40E092AA.IP) (Quit: Leaving)
[22:19:03] *** Quits: twi (Adium@moz-ED056769.cust.vodafonedsl.it) (Ping timeout)
[22:19:10] *** Joins: twi (Adium@moz-ED056769.cust.vodafonedsl.it)
[22:20:57] *** Joins: apollow (yellowy432@B668B53A.C253D4DF.4C3B1D9.IP)
[22:22:10] *** Quits: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Quit: Leaving...)
[22:22:42] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[22:23:02] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[22:23:20] <eddyb> whoa whoa http://erllvm.softlab.ntua.gr/
[22:23:36] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Quit: Textual IRC Client: www.textualapp.com)
[22:24:13] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Client exited)
[22:24:39] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[22:24:48] *** Joins: brontron (brontron@moz-CF02444.dia.static.qwest.net)
[22:25:00] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[22:25:01] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[22:25:11] *** Quits: apollow (yellowy432@B668B53A.C253D4DF.4C3B1D9.IP) (Ping timeout)
[22:25:14] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[22:25:26] *** Joins: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca)
[22:25:49] <huon> cmr: twir: s/bignum/bigint/, s/Removing a word/Removing two words/, [std::sync::atomics] has no URL
[22:26:51] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Client exited)
[22:27:08] *** Quits: leowoe (Leo@moz-D5256331.dip0.t-ipconnect.de) (Connection reset by peer)
[22:27:10] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Connection reset by peer)
[22:27:12] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[22:27:22] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[22:28:55] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Ping timeout)
[22:29:07] *** Joins: leowoe (Leo@moz-D5256331.dip0.t-ipconnect.de)
[22:30:05] *** Quits: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru) (Input/output error)
[22:30:06] <cmr> huon: <3 thans
[22:30:34] *** Joins: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru)
[22:31:20] <carllerche> Is there a way to "extend" Result and be able to add more fns to it? I did type MyResult = Result<(), ~str>, and then tried to add an impl, but that did not work. My goal is to have a type that I can add fns to and also use try!(..) with
[22:31:51] <cmr> carllerche: you can make a trait and implement that trait for Result
[22:31:55] *** Quits: cschneid (cschneid@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[22:32:11] *** Joins: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[22:32:17] *** Quits: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru) (Ping timeout)
[22:32:23] *** Quits: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Client exited)
[22:32:25] *** Joins: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[22:33:43] <carllerche> cmr: should the trait be MyResult? or do I still use type MyResult = … and then have MyTrait and implement it for Result?
[22:34:23] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[22:34:24] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Connection reset by peer)
[22:34:33] <andor> does a sender block until the receiver receives what was sent?
[22:34:41] <andor> or can i just keep sending over and over again
[22:35:32] <cmr> carllerche: you can never have an impl for a typedef.
[22:35:46] *** Quits: janra (Janus@1CDC5701.A48867D7.52E4E107.IP) (Ping timeout)
[22:35:51] <cmr> carllerche: you can have MyResult and implement it for Result.
[22:36:22] <brson> 91 prs!
[22:37:08] *** Joins: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com)
[22:38:42] *** Quits: brontron (brontron@moz-CF02444.dia.static.qwest.net) (Ping timeout)
[22:40:21] *** Quits: sunfish (chatzilla@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[22:40:23] *** Joins: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru)
[22:40:34] <huon> andor: it doesn't block
[22:40:46] *** Joins: pupoque (Adium@297D6F99.EF706C30.C0C64AB3.IP)
[22:40:46] <newbie> does float implement TotalEq?
[22:40:55] *** jorendorff is now known as jorendorff_away
[22:41:03] <strcat> newbie: f32/f64 don't implement it, and won't
[22:41:14] <newbie> so no hashmap for floats? mhk
[22:41:28] <strcat> newbie: you can make a wrapper type implementing a proper equality method for them
[22:41:35] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Quit: Leaving)
[22:41:41] *** newbie is now known as eibwen
[22:41:46] <strcat> the IEEE754 equality doesn't work for hash tables
[22:41:56] <strcat> -0.0 and 0.0 have different hashes, but compare equal
[22:42:05] <strcat> NaN compares non-equal to itself, despite being equivalent
[22:42:30] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Quit: )
[22:42:36] <strcat> so yes - you could use either your own non-partial equivalence relation, or reuse the IEEE754 totalOrder one
[22:42:38] *** Joins: apollow (yellowy432@B668B53A.C253D4DF.4C3B1D9.IP)
[22:42:44] <strcat> but floats as table table keys are not necessarily a good idea anyway ;)
[22:42:46] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[22:43:01] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[22:43:02] *** Joins: awidegre1n (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[22:43:36] <acrichto> carllerche: you can do "trait Foo { fn bar(&self); }" and then "impl<T, U> Foo for Result<T, U> {... }"
[22:43:41] *** Quits: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru) (Input/output error)
[22:43:45] <acrichto> that'll retroactively add methods to an existing type from another crate
[22:44:42] *** Quits: lord (lord@87D98E32.4046EB22.428F94DD.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:45:19] *** Joins: doctor (ARealName@moz-1BCE629A.hsd1.ca.comcast.net)
[22:46:05] *** Quits: doctor (ARealName@moz-1BCE629A.hsd1.ca.comcast.net) (Connection reset by peer)
[22:46:34] *** jorendorff_away is now known as jorendorff
[22:46:48] <krdln> Where can I find anything about #[unsafe_no_drop_flag]?
[22:46:58] <carllerche> acrichto: do I have to import the trait to use those fns then?
[22:47:10] <strcat> krdln: not documented, it's basically an implementation detail for now
[22:47:20] <acrichto> carllerche: yes
[22:47:32] <strcat> that stuff is going to change in backwards incompatible ways - and it may silently break code depending on it
[22:47:49] <krdln> strcat: so what it is? I see it in std, and I want to understant why is it needed
[22:47:52] <strcat> it omits the drop flag and relies on the current zeroing
[22:47:53] <andor> is there a reverse-tail? a method that returns a slice except the last element?
[22:47:58] *** Quits: maattdd (matthieu@moz-BD1940C7.fbx.proxad.net) (Ping timeout)
[22:48:28] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[22:48:47] *** Joins: copumpkin (copumpkin@moz-FC353116.dyn.optonline.net)
[22:48:50] <krdln> strcat: ok, that makes sense, but what is drop flag anyway?
[22:49:08] <strcat> krdln: types will destructors currently have a flag to know if they were moved from
[22:49:14] <strcat> may go away in the future
[22:49:16] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:49:49] <krdln> oh, thanks, thought that was known statically
[22:49:59] <strcat> can't be known statically atm
[22:50:06] <strcat> compiler is too permissive for that
[22:50:38] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[22:50:58] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[22:51:17] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[22:51:26] <krdln> andor: http://static.rust-lang.org/doc/master/std/slice/trait.ImmutableVector.html#tymethod.init
[22:51:46] <andor> krdln: oh, cool, cheers!
[22:52:02] *** Joins: brontron (brontron@moz-CF02444.dia.static.qwest.net)
[22:53:13] <krdln> strcat: Hm, thats weird that compiler can issue an error at compile time, but has to do runtime checks
[22:53:32] <strcat> krdln: because it's not strict enough
[22:53:45] <strcat> it allows cases like
[22:54:00] <strcat> let x = foo(); if condition { bar(x) }
[22:54:08] <strcat> where passing to bar moves from `x`
[22:54:16] <strcat> so after that if statement, `x` *may* be moved from
[22:54:19] <strcat> a flag is needed to be sure
[22:54:29] <strcat> the semantics of the language would need to change to remove the drop flag
[22:55:03] <strcat> either it needs to implicitly drop it in the invisible `else` branch (and any other branches that may not cause a move explicitly) or forbid that code
[22:55:04] <kmc> is the inverse of char::escape_default in the stdlib anywhere?
[22:55:14] *** Joins: rook (rook@moz-DE88DB2D.hfc.comcastbusiness.net)
[22:55:16] <strcat> kmc: maybe in libsyntax? ;p
[22:56:08] <krdln> strcat: and silently dropping at „else” would break raii.. thanks for clarifying
[22:56:40] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:56:46] <strcat> krdln: well it wouldn't really break it, just change the semantics
[22:57:07] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[22:57:13] <strcat> the alternative would be making you explicitly else { drop(x) }
[22:57:28] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[22:57:52] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:57:53] *** Quits: vadimcn (chatzilla@moz-E841EA3A.hsd1.wa.comcast.net) (Connection reset by peer)
[22:57:57] *** Quits: paraze (paraze@moz-96380A71.w86-209.abo.wanadoo.fr) (Client exited)
[22:58:09] *** Quits: Kazimuth (james@moz-F82198F6.hsd1.ma.comcast.net) (Client exited)
[22:58:28] <andor> i have some method that takes &mut self, why can't i do let mut bar = self.bar; ?
[22:59:04] <aatch> andor, depends on what `self.bar` is
[22:59:04] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[22:59:06] *** Joins: toshok (toshok@moz-43741342.cat)
[22:59:06] <eibwen> thanks for another This Week in Rust, cmr!
[22:59:09] <krdln> andor: becouse that would move self out. try `let ref mut bar = &self.bar`
[22:59:11] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Ping timeout)
[22:59:22] <aatch> krdln, you don't need both there.
[22:59:28] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[22:59:36] <aatch> that would give you a `&mut &Bar`
[22:59:57] <krdln> aatch: right, thanks
[23:00:00] <andor> hmm, might be impossible given what i want to do :\
[23:00:07] <andor> it's a TcpAcceptor
[23:00:18] <andor> and i want to .listen() on it, too
[23:00:21] <aatch> andor, you can do `let bar = &mut self.bar`
[23:00:24] <andor> which takes self... :(
[23:01:38] *** Quits: philix (felipe@moz-90A0AE19.user.veloxzone.com.br) (Ping timeout)
[23:02:04] *** Joins: philix (felipe@moz-79610F94.user.veloxzone.com.br)
[23:04:25] <cmr> andor: you'd have to swap in a new TcpAcceptor.
[23:04:31] <cmr> andor: or you could use an Option in your struct
[23:04:33] <cmr> and use the `take` method.
[23:04:53] <andor> cmr: swap in a new TcpAcceptor...?
[23:05:25] *** Joins: doctor (ARealName@moz-1BCE629A.hsd1.ca.comcast.net)
[23:05:32] *** Joins: Kazimuth (james@moz-F82198F6.hsd1.ma.comcast.net)
[23:05:37] <cmr> yes, construct a new one and use the `swap` function.
[23:05:48] <cmr> you need the TcpAcceptor by value.
[23:05:52] <cmr> but you can't move out of a &mut self
[23:05:56] <cmr> so you need to swap in a new value.
[23:06:26] *** Joins: alisdair (textual@BB0336C3.D2943E17.C579BC3E.IP)
[23:06:29] *** Joins: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP)
[23:06:34] *** Quits: twi (Adium@moz-ED056769.cust.vodafonedsl.it) (Ping timeout)
[23:06:47] <andor> nah, actually rather i'll just pass only SocketAddr, and construct TcpAcceptor (and listener) in this method
[23:07:02] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[23:07:06] <cmr> Just saying that what you want to do isn't impossible :p
[23:07:20] <andor> true, but it isn't very pretty
[23:07:27] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[23:07:55] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[23:08:18] *** Quits: awidegre1n (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[23:08:22] *** Quits: doctor (ARealName@moz-1BCE629A.hsd1.ca.comcast.net) (Connection reset by peer)
[23:09:06] *** Joins: Florob (Florob@moz-39532932.de)
[23:10:19] *** Joins: kvanb (kvanb@moz-1D7B51F2.lnse4.lon.bigpond.net.au)
[23:11:33] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[23:11:41] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[23:13:19] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[23:13:27] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[23:13:31] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[23:13:33] *** Joins: Rym (y@FD880926.C67B62F8.8772DA20.IP)
[23:14:02] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[23:14:12] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[23:14:37] *** Joins: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru)
[23:15:13] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Ping timeout)
[23:15:33] *** Quits: Rym (y@FD880926.C67B62F8.8772DA20.IP) (Ping timeout)
[23:15:40] *** Quits: carllerche (carllerche@moz-F43E6AFB.hfc.comcastbusiness.net) (Quit: carllerche)
[23:15:54] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Ping timeout)
[23:16:10] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[23:16:22] *** Quits: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru) (Ping timeout)
[23:16:23] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Quit: leaving)
[23:16:36] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[23:17:27] <kvanb> still no solution to the x64 segfault on windows
[23:17:48] *** Quits: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP) (Input/output error)
[23:19:27] *** Quits: brontron (brontron@moz-CF02444.dia.static.qwest.net) (Ping timeout)
[23:21:26] <andor> https://gist.github.com/andor44/9751472 this gives me some really weird error messages
[23:22:07] *** Joins: doctor (ARealName@moz-1BCE629A.hsd1.ca.comcast.net)
[23:22:17] *** Quits: doctor (ARealName@moz-1BCE629A.hsd1.ca.comcast.net) (Connection reset by peer)
[23:22:25] *** Quits: sinsnare (AndChat576@moz-C3025F49.pools.spcsdns.net) (Connection reset by peer)
[23:22:36] *** Parts: jneen|afk (jneen@7DA3DF65.A4ACDD73.AED9BA81.IP) ()
[23:23:45] *** Joins: brontron (brontron@moz-CF02444.dia.static.qwest.net)
[23:23:52] *** Quits: icebattle (wayne@8A14A542.EBE2EE2B.C7CEC4ED.IP) (Quit: leaving)
[23:24:17] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[23:24:31] *** Joins: toshok_ (toshok@8EC99D26.4B7A7726.A2E931B1.IP)
[23:25:49] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[23:25:58] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[23:25:58] *** ChanServ sets mode: +ao pcwalton pcwalton
[23:26:10] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[23:26:22] <kimundi> andor: The error message is bad, yeah. The actual problem is that a typedef (type Foo = ...) is literally _just_ a typedef. You can use the name `Foo` anywhere where a type is expected, but you can't access it as a module (which calling a associated function is basically), nor can you import from it etc.
[23:27:16] <kimundi> So, let x: Foo = HashMap::new(); would be the way to initialize it
[23:27:24] *** Quits: ldlework (ldlework@6AEB83D1.B92A0FC.176AC772.IP) (Quit: Rust is like, totally so cool.)
[23:27:51] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[23:27:54] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[23:28:05] <andor> kimundi: dang... and is it not going to be possible in the future, either?
[23:28:09] *** Quits: brendan (brendaneic@moz-62518563.mtv2.mozilla.com) (Quit: brendan)
[23:28:30] <kimundi> The current behavior is not set in stone
[23:28:32] *** Joins: brendan (brendaneic@moz-62518563.mtv2.mozilla.com)
[23:28:35] *** Joins: ldlework (ldlework@6AEB83D1.B92A0FC.176AC772.IP)
[23:28:50] *** Quits: brendan (brendaneic@moz-62518563.mtv2.mozilla.com) (Quit: brendan)
[23:29:49] *** Joins: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net)
[23:31:16] *** Quits: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl) (Quit: Computer gone to sleep - Zzzz...)
[23:32:25] *** Joins: brendan (brendaneic@moz-62518563.mtv2.mozilla.com)
[23:34:04] *** Quits: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net) (Ping timeout)
[23:34:33] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[23:36:20] *** Quits: Pursuit (josh@moz-11DE1CB6.dhcp.insightbb.com) (Ping timeout)
[23:36:29] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[23:38:38] *** Joins: richo (richo@CB5FD8B9.7DCE6D6E.F711B458.IP)
[23:39:25] *** Joins: clusterfoo (clusterfoo@moz-F8B381B4.hm.shawcable.net)
[23:39:31] *** Quits: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca) (Quit: canhtak)
[23:39:31] *** Joins: doctor (ARealName@moz-1BCE629A.hsd1.ca.comcast.net)
[23:40:01] *** Quits: clusterfoo (clusterfoo@moz-F8B381B4.hm.shawcable.net) (Quit: Leaving...)
[23:40:10] *** Joins: clusterfoo (clusterfoo@moz-F8B381B4.hm.shawcable.net)
[23:41:03] *** Quits: doctor (ARealName@moz-1BCE629A.hsd1.ca.comcast.net) (Connection reset by peer)
[23:42:10] *** Joins: Pursuit (josh@moz-11DE1CB6.dhcp.insightbb.com)
[23:42:18] *** Quits: q66 (q66@moz-FDC9B85A.range109-150.btcentralplus.com) (Quit: Leaving)
[23:43:49] *** eatkinson is now known as eatkinson-away
[23:44:05] *** Quits: io2 (io2@moz-EE406A5.home.otenet.gr) (Quit: )
[23:44:49] *** Quits: Pursuit (josh@moz-11DE1CB6.dhcp.insightbb.com) (Ping timeout)
[23:45:33] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Ping timeout)
[23:45:48] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[23:45:56] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[23:46:01] *** Quits: geomyidae_ (uid214@moz-E77DEB21.irccloud.com) (Quit: Connection closed for inactivity)
[23:46:17] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[23:47:14] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[23:49:24] <steven_is_false> What's the current story on overloaded assignment operators?
[23:49:36] <steven_is_false> I thought it was fixed but apparently not?
[23:50:16] <cmr> steven_is_false: wasn't fixed to my knowledge
[23:50:25] *** Joins: Savago (Savago@D8B9C081.E820043D.D4C04133.IP)
[23:50:33] <steven_is_false> cmr: Okay, what's the new issue number for it then?
[23:51:10] <steven_is_false> Some of the code is out of date and refers to closed issues.
[23:51:34] <cmr> https://github.com/mozilla/rust/issues/5992 is still open
[23:51:34] *** Joins: cschneid (cschneid@moz-621ACC77.hlrn.qwest.net)
[23:51:35] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[23:51:45] *** Joins: Pursuit (josh@moz-11DE1CB6.dhcp.insightbb.com)
[23:52:11] *** Quits: richo (richo@CB5FD8B9.7DCE6D6E.F711B458.IP) (Ping timeout)
[23:52:42] <steven_is_false> cmr: Thanks! I'll fixup a few old issue numbers in the code then.
[23:52:49] <cmr> thanks :)
[23:53:17] *** Joins: doctor (ARealName@moz-1BCE629A.hsd1.ca.comcast.net)
[23:54:08] *** Quits: brontron (brontron@moz-CF02444.dia.static.qwest.net) (Ping timeout)
[23:54:52] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Client exited)
[23:54:59] *** Quits: doctor (ARealName@moz-1BCE629A.hsd1.ca.comcast.net) (Connection reset by peer)
[23:55:02] *** Joins: Rym (y@FD880926.C67B62F8.8772DA20.IP)
[23:55:22] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[23:56:12] *** Joins: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca)
[23:57:03] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Ping timeout)
[23:57:45] *** Quits: alisdair (textual@BB0336C3.D2943E17.C579BC3E.IP) (Ping timeout)
