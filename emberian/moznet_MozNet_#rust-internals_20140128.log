[00:01:44] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[00:01:45] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/FxD2XQ
[00:01:45] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[00:06:31] <acrichto> dbaupp: pong
[00:06:37] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[00:06:37] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/T3p1_Q
[00:06:37] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[00:06:38] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[00:06:39] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/TtC-lg
[00:06:39] <ghrust> 13rust/06auto 140d38e1f 15Alex Crichton: Depend on libnative when testing...
[00:06:39] <ghrust> 13rust/06auto 14daf60f0 15bors: auto merge of #11847 : alexcrichton/rust/fix-test-deps, r=pcwalton...
[00:06:39] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[00:07:49] *** Joins: lpy (lpy@9248CA04.F930CE91.65042015.IP)
[00:08:51] <dbaupp> acrichto: so I was thinking about this inner-function thing I used for formatted-fail...
[00:09:05] <dbaupp> and, is there any fundamental reason why we shouldn't do that for all fail!()'s?
[00:09:35] <dbaupp> i.e. have it expand to `fn foo() -> ! { begin_unwind(...) } foo()`
[00:09:36] <acrichto> using an inner function or using format_args?
[00:09:46] *** Quits: lpy (lpy@9248CA04.F930CE91.65042015.IP) (Ping timeout)
[00:09:48] <dbaupp> then the call-site for fail!() is just a single function call
[00:10:05] <acrichto> formatting might need local variables though
[00:10:08] <dbaupp> oh
[00:10:10] <acrichto> you can also fail!(foo)
[00:10:14] <dbaupp> of course
[00:10:16] <dbaupp> I'm dumb
[00:10:22] <acrichto> I like your thinking though lol
[00:13:24] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Quit: leaving)
[00:19:47] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[00:19:47] *** ChanServ sets mode: +o tjc
[00:20:34] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: Textual IRC Client: www.textualapp.com)
[00:24:50] <brson> we are running 6480 tests for a single target now. that seems pretty good to me
[00:24:56] <brson> <3 tests
[00:26:26] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[00:26:54] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[00:26:59] <dbaupp> brson: is that including ignored/xfail'd ones?
[00:27:08] * ChrisMorgan <3 statically typed languages where one doesn't *need* so many tests as in dynamically typed languages
[00:27:25] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[00:28:42] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[00:32:30] *** Joins: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca)
[00:32:38] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[00:36:35] <brson> dbaupp: nope. that's ones we run
[00:36:48] <brson> 616 ignored
[00:36:51] <brson> er 316
[00:37:41] <dbaupp> ah, cool; we don't ignore a huge number
[00:41:19] *** Quits: dbaupp (Thunderbir@32742E97.D5A1DCF.37681C44.IP) (Ping timeout)
[00:42:30] *** Quits: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: dherman)
[00:42:43] <acrichto> brson: r? https://github.com/mozilla/rust/pull/11853
[00:42:49] *** Joins: dbaupp (Thunderbir@32742E97.D5A1DCF.37681C44.IP)
[00:45:44] *** Quits: c-a (c-a@moz-57C82A9.a163.priv.bahnhof.se) (Quit: Ex-Chat)
[00:48:48] *** Joins: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[00:48:48] *** ChanServ sets mode: +ao dherman dherman
[00:48:58] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[00:51:23] <brson> android bot is staying green
[00:51:38] <acrichto> it's a christmas miracle!
[00:51:41] <acrichto> only, early
[00:51:54] <acrichto> brson: I think you should turn on gating
[00:52:02] <acrichto> especially b/c it finishes super quickly
[00:52:05] <acrichto> relative.y
[00:52:29] <brson> ok, I'm going to do it
[00:53:11] <brson> ... if i can remember how
[00:53:16] <xales> what's the best way to get an iotest to only run for native (fundamentally breaks on green, because libuv is doing magic)
[00:53:36] <xales> move it to native?
[00:53:37] <acrichto> xales: put the test in libnative, but how come it's broken on libgreen?
[00:53:44] <acrichto> what's the behavior you're seeing?
[00:53:48] <brson> restarting buildbot
[00:54:02] <acrichto> brson: wait no!
[00:54:04] <acrichto> reconfigure may work
[00:54:11] <brson> i'm reconfiguring
[00:54:12] <xales> double-binding a socket works in libuv, because it's looking to see if it already owns such a socket (from what I can tell)
[00:54:13] <acrichto> lol
[00:54:28] <xales> it's calling some function maybe_new_socket which I assume does that, haven't bothered to look (and I can think of no other reason for it to fail)
[00:54:28] <acrichto> xales: interesting, did you find some code in question?
[00:54:31] <brson> it does seem to have reconfiged
[00:54:52] <acrichto> brson: huh, I would have thought gating would be a bors modification rather than a buildbot modification
[00:55:04] <acrichto> xales: I think that's just initializing the local one, this should work on libgeen
[00:55:20] <xales> hm, yeah, it should
[00:55:34] <acrichto> xales: lemme test a bit
[00:55:38] <brson> acrichto: it's both. buildbot kills other auto builds when any fail and that has to be reenabled
[00:55:58] <brson> ok. we're gated on android
[00:56:03] <xales> acrichto: is there any way to magic the file descriptor out of a TcpListener?
[00:56:26] <acrichto> brson: ah, indeed, interesting, black magic
[00:56:39] <acrichto> xales: are you just calling TcpListener::bind() or also .listen()
[00:56:46] <xales> just bind
[00:56:51] <acrichto> I'm getting the error on listen()
[00:57:01] <xales> hm
[00:57:03] <acrichto> for libgreen
[00:57:09] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:57:15] <acrichto> try just doing that in the tests
[00:57:41] <acrichto> xales: https://gist.github.com/8660507
[00:57:53] <acrichto> brson: btw I think the mutex thing will work out
[00:58:10] <acrichto> brson: still working out all the details, but your idea of entirely separate worlds for green/native threads I think will work out nicely
[00:58:24] <acrichto> brson: try_lock interfering with lock() may make things slow, but straight up lock/unlock should be superfast
[00:58:44] <jdm> brson: \o/
[00:59:31] <brson> acrichto: awesome!
[01:02:37] <dbaupp> woah, c-a's LLVM thing is amazing
[01:03:49] <acrichto> agreed!
[01:04:04] *** Joins: ktt3ja (ktt3ja@moz-85E2770C.hsd1.va.comcast.net)
[01:04:38] <dbaupp> are we sure it's correct (& threadsafe?)
[01:04:58] <acrichto> not really
[01:05:07] <dbaupp> heh
[01:05:11] <acrichto> I would imagine that the threadsafety comes from modifying the passes during compilation
[01:05:14] <acrichto> but that's just a guess
[01:05:17] <dbaupp> live life on the edge
[01:05:20] <acrichto> I'll let bors figure out whether it's safe :P
[01:06:26] <larsberg> brson: did I just hear "gated on android"? Great work! jack will also be excited - thanks for getting that together
[01:06:50] <brson> larsberg: np
[01:07:04] <brson> (actually it was a huge problem)
[01:07:07] <acrichto> brson: is the leading gold star holder for the day!
[01:07:07] <larsberg> now I just owe acrichto a bunch of runtime tests that simulate the unnatural ways that Servo loads/uses rust code on android
[01:07:51] <acrichto> larsberg: take your time!
[01:07:57] <acrichto> no rush :)
[01:08:32] <larsberg> lol! I think the shorter the time we build ServoAndroid with a libstd that knows about libservo.so the better :-)
[01:08:34] *** Joins: lpy (lpy@9248CA04.F930CE91.65042015.IP)
[01:10:33] *** Quits: lpy (lpy@9248CA04.F930CE91.65042015.IP) (Ping timeout)
[01:11:30] *** Quits: jdm (jdm@moz-C07D5168.p2p.sfo1.mozilla.com) (Ping timeout)
[01:11:31] *** Joins: jdm (jdm@moz-C07D5168.p2p.sfo1.mozilla.com)
[01:12:27] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[01:21:00] <dbaupp> acrichto: https://github.com/mozilla/rust/pull/11858 r?
[01:21:45] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[01:21:45] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/TtC-lg
[01:21:45] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[01:26:55] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[01:26:55] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/DHpXfQ
[01:26:55] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[01:26:56] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[01:26:56] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/eJhjxA
[01:26:56] <ghrust> 13rust/06auto 14ea9db66 15Nick Desaulniers: can borrow mut in proc Fixes #10617
[01:26:56] <ghrust> 13rust/06auto 148c6c229 15bors: auto merge of #11626 : nickdesaulniers/rust/issue10617, r=alexcrichton...
[01:26:57] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[01:29:11] <Eridius> brson: wow, bold move
[01:29:31] <Eridius> brson: I applaud your ability to avoid the sunk cost fallacy
[01:30:00] *** Joins: new_one (new_one@E41125F4.AD901773.B3C0173E.IP)
[01:30:04] <brson> Eridius: lol
[01:30:23] <dbaupp> acrichto: https://github.com/alexcrichton/rust/commit/cdfdc1eb6b9ff58b4a264d1c112dfcbf6e9187ae#diff-ebe2626c4d404bbab7b4a1790121fff7R858
[01:30:41] <dbaupp> acrichto: is that necessary for splitting out libextra modules? or just a general fix?
[01:35:51] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Quit: Leaving...)
[01:37:05] *** Quits: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: dherman)
[01:40:43] <brson> acrichto: your llvm upgrade doesn't hit the clean trigger
[01:42:05] <xales> acrichto: should these be made to line up better? https://gist.github.com/xales/3c05d39a2d5d9c82f8ef
[01:48:37] *** Joins: gwty (gwtypc@8B449003.36A22018.137C914F.IP)
[01:49:59] *** Quits: Luqman (laden@moz-AB7945E9.csclub.uwaterloo.ca) (Quit: leaving)
[01:50:17] *** Joins: Luqman (laden@moz-AB7945E9.csclub.uwaterloo.ca)
[01:50:52] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[01:50:52] *** ChanServ sets mode: +ao pcwalton pcwalton
[01:50:57] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[01:57:37] *** Quits: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP) (Connection reset by peer)
[02:02:32] <xales> I'm not sure why this failed - http://buildbot.rust-lang.org/builders/auto-linux-64-nopt-t/builds/2936 but it left https://github.com/mozilla/rust/pull/11837 still open (docs fix)
[02:03:20] <brson> xales: random failure
[02:07:40] <acrichto> dbaupp: I'm not sure I follow, that's just a generic build rule?
[02:07:43] <acrichto> brson: you are quite right
[02:08:14] <acrichto> xales: I wouldn't worry about alignment in error messages
[02:09:18] <xales> acrichto: okay; right now I'm just checking for either in assert (pushed working tests now)
[02:09:19] *** Joins: lpy (lpy@9248CA04.F930CE91.65042015.IP)
[02:09:31] <dbaupp> acrichto: sorry... more context: that's in the commit that moves extra/flate to libflate; just wondering if that change was part of the movement (i.e. if other splits need to do something like that too)
[02:10:03] <acrichto> dbaupp: oh sorry about that, I should have put forth more effort to separate test fixes from that commit
[02:10:14] <acrichto> dbaupp: but no, all you need to modify is mk/crates.mk, and that's it
[02:10:19] <dbaupp> acrichto: ok cool
[02:10:44] <dbaupp> acrichto: (just mentoring a friend through doing a split, so having and example is useful.)
[02:10:58] <acrichto> yeah sorry about that
[02:11:01] <bytbox> Trying to kill the do syntax (brson): http://ix.io/a9N
[02:11:01] <acrichto> I tried to make it a clear split
[02:11:04] <acrichto> and then I got too lazy :(
[02:11:14] *** Quits: lpy (lpy@9248CA04.F930CE91.65042015.IP) (Ping timeout)
[02:11:21] <acrichto> bytbox: I like the sound of that!
[02:11:27] <bytbox> this seems like something needs to be added to support macros expanding to proc()? Or, I missed something altogether.
[02:11:39] <bytbox> achricto: almost done! Just this error and a few more left.
[02:11:55] <ChrisMorgan> bytbox: did you look at my patch for removing do?
[02:11:59] <dbaupp> acrichto: in theory we'll have a truly clean example in an hour or so :)
[02:12:15] <acrichto> dbaupp: nice! what's on the chopping block?
[02:12:33] <bytbox> ChrisMorgan: not closely (it was easy enough to start from scratch, and I wanted to get more familiar with things by doing that), but I'll see if you changed that line
[02:12:39] <ChrisMorgan> bytbox: (my patch was only removing do *usage*; I didn't get to removing it completely)
[02:12:50] <bytbox> ah, this usage may have been left
[02:12:53] <bytbox> hang on - lemme see
[02:13:03] <bytbox> (it's not found by a simple grep, easily)
[02:13:04] <ChrisMorgan> I seem to recall coming up with that one, I think it was because it was $block, which needs to be $expr instead
[02:14:02] *** Quits: jdm (jdm@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: Lost terminal)
[02:14:12] <bytbox> really? proc() takes an expr?
[02:14:21] <bytbox> oh
[02:14:24] <bytbox> I guess it does...
[02:14:44] <dbaupp> acrichto: arena and glob
[02:14:55] <bytbox> yeah, that's it - thanks ChrisMorgan!
[02:19:58] <acrichto> dbaupp: brson: $target/doc ?
[02:20:24] <dbaupp> I'm fine with whatever
[02:22:02] *** Quits: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca) (Quit: canhtak)
[02:27:52] <brson> acrichto: that's fine by me, though it will change the doc.mk build rules significantly
[02:28:03] <brson> since you can theoretically build docs into any stage
[02:28:29] <brson> and into any host
[02:28:44] <brson> oh, you are saying $target/doc, not $target/$stage/doc
[02:28:55] <acrichto> you're right though
[02:29:01] <acrichto> it could be any $host/$stage pair
[02:29:21] <acrichto> well docs are full of copy/paste anyway
[02:29:24] <acrichto> time for a rewrite!
[02:29:36] <brson> well, not all hosts can even run on the build platform
[02:29:37] <brson> in theory
[02:29:41] <brson> so i'm not sure this makes sense
[02:29:57] <acrichto> I think it mostly just makes sense to put them in the build dir
[02:30:00] <acrichto> rather than the main dir
[02:30:07] *** nrc|lunch is now known as nrc
[02:30:08] <acrichto> make doc would just be make doc-$host-stage2
[02:30:30] <brson> but they always use the $build compiler?
[02:30:42] <acrichto> or maybe doc-$build-stage2
[02:30:45] <brson> so we build docs twice for multi-host builds
[02:30:48] <acrichto> right now they use CFG_BUILD
[02:31:00] <acrichto> should doc building be part of 'make' ?
[02:31:07] <acrichto> seems like it should be separate...
[02:31:23] <brson> don't have a strong opinion
[02:32:26] *** Quits: dbaupp (Thunderbir@32742E97.D5A1DCF.37681C44.IP) (Quit: dbaupp)
[02:33:44] *** Joins: dbaupp (Thunderbir@32742E97.D5A1DCF.37681C44.IP)
[02:38:47] <ChrisMorgan> bytbox: with `do` it was the case that it was (simplified) "do" EXPR BLOCK (BLOCK is "{" *STMT "}", EXPR is roughly (STMT | BLOCK)). Thus, "do foo { bar }" is OK, "do foo bar" is not. With proc, it's "proc(...)" EXPR, which is why "proc() bar" is OK, and "proc() { bar }" is also OK.
[02:39:26] <ChrisMorgan> Thus, you need the likes of "proc() $EXPR" (the curly braces around the expression are superfluous)
[02:41:57] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[02:41:57] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/eJhjxA
[02:41:57] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[02:46:49] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[02:46:49] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/3KySbA
[02:46:49] <ghrust> 13rust/06auto 1428b987b 15David Manescu: Feature gate #[simd]...
[02:46:49] <ghrust> 13rust/06auto 146f0a47f 15bors: auto merge of #11738 : dmanescu/rust/11721, r=alexcrichton...
[02:46:49] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[02:46:51] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[02:46:51] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/Ly2xSw
[02:46:51] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[02:48:25] *** Joins: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca)
[02:50:50] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[03:00:25] *** Quits: gwty (gwtypc@8B449003.36A22018.137C914F.IP) (Ping timeout)
[03:07:47] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[03:10:15] *** Joins: lpy (lpy@9248CA04.F930CE91.65042015.IP)
[03:11:59] *** Quits: lpy (lpy@9248CA04.F930CE91.65042015.IP) (Ping timeout)
[03:31:25] *** Quits: zz_kimundi (kimundi@moz-B70A68F6.dip0.t-ipconnect.de) (Ping timeout)
[03:34:44] *** Joins: zz_kimundi (kimundi@moz-D56C9025.dip0.t-ipconnect.de)
[03:34:45] *** zz_kimundi is now known as kimundi
[03:36:40] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[03:36:40] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 146f0a47f to 148c6c229: 02http://git.io/N3iJvQ
[03:36:40] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[03:36:43] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[03:36:43] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/Z2XSUA
[03:36:43] <ghrust> 13rust/06auto 1428b987b 15David Manescu: Feature gate #[simd]...
[03:36:43] <ghrust> 13rust/06auto 14a2e5792 15bors: auto merge of #11738 : dmanescu/rust/11721, r=alexcrichton...
[03:36:43] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[03:41:02] *** Joins: lpy (lpy@9248CA04.F930CE91.65042015.IP)
[03:41:30] *** Quits: dbaupp (Thunderbir@32742E97.D5A1DCF.37681C44.IP) (Ping timeout)
[03:41:34] *** Joins: dbaupp (Thunderbir@32742E97.D5A1DCF.37681C44.IP)
[03:43:23] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[03:43:23] *** ChanServ sets mode: +ao pcwalton pcwalton
[03:51:26] *** Parts: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca) ()
[03:56:50] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[03:58:45] *** Quits: new_one (new_one@E41125F4.AD901773.B3C0173E.IP) (Client exited)
[04:07:11] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[04:10:27] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[04:10:27] *** ChanServ sets mode: +ao pcwalton pcwalton
[04:26:38] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[04:26:38] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14a2e5792 to 148c6c229: 02http://git.io/N3iJvQ
[04:26:38] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[04:26:40] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[04:26:40] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/7THTSw
[04:26:40] <ghrust> 13rust/06auto 14cb02a37 15Huon Wilson: syntax: make deriving have slightly less cryptic error messages....
[04:26:40] <ghrust> 13rust/06auto 14d21b183 15bors: auto merge of #11826 : huonw/rust/7621-deriving-errors, r=alexcrichton...
[04:26:40] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[04:33:29] *** Joins: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP)
[04:35:53] <eddyb> I haven't seen strcat in days - I wanted to tell him to strike out take glue :P https://github.com/mozilla/rust/issues/11425
[04:52:40] <erickt1> dbaupp: ping
[04:56:46] <dbaupp> erickt1: pong
[04:57:05] <dbaupp> eddyb: done
[04:57:34] <eddyb> dbaupp: heh, thanks
[04:59:10] <erickt1> dbaupp: I finally uploaded my first bit of my Hash rewrite if you got time to check it out: https://github.com/mozilla/rust/pull/11863
[04:59:40] <eddyb> erickt1: this is going to be even more sweet with default type params
[05:00:06] <dbaupp> erickt1: awesome! I don't have time for a detailed look right now, but I can give it a glance
[05:00:19] <erickt1> dbaupp: I just saw your comment on https://github.com/mozilla/rust/issues/8038, I haven't done anything with it yet
[05:00:55] <eddyb> let's see if https://github.com/mozilla/rust/pull/11853 has any significant effect on binary size - though I don't think irsy measures that
[05:03:16] <dbaupp> erickt1: looks pretty good
[05:04:51] <erickt1> dbaupp: great. I'll see about macroing it down some
[05:05:15] <erickt1> do you think a FixedHasher should be exposed?
[05:07:30] <dbaupp> Maybe
[05:09:10] <dbaupp> that is, yes, if we can make it and StreamHasher work together without requiring say, a separate type FixedHasherHashMap
[05:09:31] <dbaupp> (i.e. so that HashMap could use either of a FixedHasher or a StreamHasher)
[05:09:43] <eddyb> what's the difference?
[05:09:54] <eddyb> between Fixed and Stream?
[05:10:18] <dbaupp> Fixed you pass all the data at once
[05:10:30] <dbaupp> Stream can you progressively add more and mroe
[05:10:37] <erickt1> dbaupp: oops, I found a couple bugs.
[05:11:34] <eddyb> so Fixed can take &[u8]?
[05:12:16] <eddyb> but I thought most types had to procedurally iterate through a representation of their contents
[05:12:19] <dbaupp> I don't think we have a solid design yet
[05:12:40] <eddyb> so I don't see how FixedHasher could work
[05:12:45] <dbaupp> (FixedHash would be for optimising HashMap<uint, ...> etc.)
[05:13:22] <eddyb> oh, I see
[05:13:33] <erickt1> eddyb: I have an example of a custom hasher that defers the hash computation to a Hash: https://github.com/mozilla/rust/pull/11863/files#diff-ae1284090feb4c99a611f29ed4e8ae9eR411
[05:14:06] <dbaupp> it's not clear to me that (a) we can integrate a FixedHasher as well as StreamHasher, and (b) if any complexity added by this is worth the (possible) performance boost
[05:14:13] <erickt1> it's in the tests module though
[05:14:52] <erickt1> dbaupp: I already got a FixedHasher-style thing working. I just called it CustomHasher
[05:15:11] <dbaupp> ah
[05:15:23] * dbaupp thinks
[05:15:39] <erickt1> I'm not sure what the right interface would be to declare a CustomHashMap though
[05:16:12] <erickt1> so my plan is to just have HashMap use the SipHasher
[05:16:54] <dbaupp> Hm! `HashMap<K: Hash, V, H: Hasher<K>>` would work "perfectly"
[05:17:05] <dbaupp> (with default type parameters.)
[05:17:08] <erickt1> especially with default type params
[05:17:09] <erickt1> heh
[05:17:23] <dbaupp> cool! I like this design already
[05:17:26] <erickt1> but yeah, thats the plan
[05:17:43] <eddyb> dbaupp, erickt1: talk to acrichto to make it top priority on the meeting agenda :P
[05:17:48] <erickt1> heh
[05:17:51] <dbaupp> anyway, gtg; I'll look tonight.
[05:17:56] <erickt1> thanks!
[05:17:59] <eddyb> erickt1: it's been delayed like a month now
[05:18:45] <erickt1> :(
[05:19:08] <eddyb> erickt1: totally my fault for providing distractions :P
[05:20:37] <erickt1> well the self arg thing is pretty nifty
[05:27:51] <eddyb> we should allow Self in other contexts than trait default methods (and trait method definitions), if only because it would make the whole self thing simpler
[05:28:34] <eddyb> A self B could be always self: A Self B
[05:29:23] <eddyb> and maybe we should allow self: Rc<Self>
[05:30:44] *** Quits: ktt3ja (ktt3ja@moz-85E2770C.hsd1.va.comcast.net) (Quit: Leaving)
[05:31:45] <eddyb> is there any reason for not allowing self as a regular identifier? maybe disable shadowing for it, or something, but let me write it in argument positions in any function. I'm sick of "this"
[05:36:12] *** Joins: jdm (jdm@moz-D434EC03.dsl.sca.megapath.net)
[05:41:36] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[05:41:36] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/7THTSw
[05:41:36] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[05:46:33] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[05:46:33] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1WsXRA
[05:46:33] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[05:54:21] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[05:56:49] <cmr> rusti: use {a, b, c};
[05:56:54] -rusti- pastebinned 20 lines of output: http://ix.io/a9S
[05:57:57] <cmr> eddyb: ohhh, de-env landed? congrats!
[05:58:10] <eddyb> thanks :)
[06:00:17] *** Joins: lkuper (lkuper@moz-528BDC8B.public.wayport.net)
[06:01:57] *** Quits: luz (lucy@moz-CD18B14B.customer.cdi.no) (Quit: 04‚Üê)
[06:01:58] *** Joins: luzie (lucy@moz-CD18B14B.customer.cdi.no)
[06:07:04] <eddyb> what if all traits were considered to include Drop?
[06:07:20] <eddyb> though it wouldn't allow us to have &Trait without drop glue
[06:10:30] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[06:18:30] *** Joins: new_one (new_one@2557A8B3.328FFDD8.B3C0173E.IP)
[06:25:28] *** Quits: dbaupp (Thunderbir@32742E97.D5A1DCF.37681C44.IP) (Ping timeout)
[06:26:51] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[06:27:48] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[06:29:52] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[07:01:27] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[07:01:28] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/9xDxVA
[07:01:28] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[07:06:26] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[07:06:26] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/rRql2A
[07:06:26] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[07:06:27] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[07:06:27] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/bqiFww
[07:06:27] <ghrust> 13rust/06auto 14580db13 15Corey Richardson: syntax: add better error message for unexpected inner attrs...
[07:06:27] <ghrust> 13rust/06auto 14980dd1d 15Corey Richardson: driver: use libnative
[07:06:28] <ghrust> 13rust/06auto 14bfff111 15Corey Richardson: Align stack size to page size
[07:06:30] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[07:07:16] <acrichto> oh man my commit sha is cceccec, that's awesome
[07:07:33] <acrichto> full one is cceccec053ba53458402ccaa5b2ce56a6fdaf1fc, so not *that* exciting
[07:08:11] <cmr> vanity sha1's
[07:08:16] <cmr> totally needs to be a thing
[07:10:20] <eddyb> cmr: but this with sha2 is so 2009
[07:10:43] <eddyb> or whenever bitcoin started. though I agree zeroes are boring compared to cceccec
[07:13:18] <acrichto> cmr: reading over those irc logs, was libnative having trouble?
[07:13:53] <cmr> acrichto: hm?
[07:14:13] <acrichto> https://botbot.me/mozilla/rust-internals/msg/10219659/
[07:14:25] <cmr> no, worked beautifully
[07:14:31] <acrichto> hurray!
[07:14:34] <acrichto> first thing that has :P
[07:14:41] <cmr> that comment was about me not knowing how the timer helper thread would interact with fork
[07:14:46] <cmr> but I wasn't using timers so it was fine
[07:15:13] <acrichto> I feel like benchmarking rust-http
[07:15:19] <acrichto> I don't believe libnative is 2x faster than libgreen
[07:16:01] <eddyb> could be one of those silly things
[07:16:18] <cmr> it was just updated to master
[07:16:21] <cmr> (rust-http was)
[07:16:41] <acrichto> oh yay!
[07:16:43] <acrichto> how convenient
[07:17:05] <eddyb> we have too many variables (no pun intended) with optimizations
[07:17:33] <eddyb> cmr: did you manage to get anywhere with making /dev/urandom constant?
[07:18:06] <cmr> eddyb: yeah but there didn't seem to be much of a difference with it.
[07:18:16] <cmr> I've run out of hard drive space for rustc builds.
[07:18:20] <eddyb> are binaries even identical for unrelated changes that show up in the graph with different memory/CPU usage?
[07:18:26] <eddyb> yeah, I've heard :(
[07:18:53] <cmr> I'll be shuffling around my partitions later, but for now the bencher is down.
[07:19:32] <eddyb> cmr: do you happen to have hashes of the binaries?
[07:19:40] <cmr> no but I can get them real easy.
[07:21:01] <eddyb> cmr: so I have this open from a few days ago - pretty sure these shouldn't change the binary at all. could you check that? http://huonw.github.io/isrustfastyet/mem/#77eedda,9dbbfb8,d150f6b
[07:21:23] <acrichto> ugh it's all scheduling, libgreen is indeed faster than libnative with RUST_THREADS=1
[07:21:27] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[07:21:28] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14b27f3d7 to 141ac9bf6: 02http://git.io/N3iJvQ
[07:21:28] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[07:21:28] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[07:21:28] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/ai4ejA
[07:21:28] <ghrust> 13rust/06auto 142846ee6 15Kevin Ballard: Add /doc/{flate,rustdoc} to .gitignore
[07:21:28] <ghrust> 13rust/06auto 141fdd231 15bors: auto merge of #11833 : kballard/rust/gitignore-doc-flate-rustdoc, r=brson
[07:21:29] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[07:21:36] <cmr> eddyb: rustc isn't deterministic.
[07:21:56] <eddyb> okay then. binary sizes?
[07:22:13] <eddyb> cmr: but why would rustc not be deterministic when the code is untouched?
[07:22:43] <eddyb> I know about doc comments being attributes and whatnot, and I understand how that could affect hashes
[07:22:52] <cmr> I don't remember what the nondeterminism comes from atm
[07:23:10] <cmr> but you can see it with just a fn main() {} 
[07:23:21] <eddyb> but unless rustc -v gives me a git hash or a build date, I don't see why it would have to be non-deterministic
[07:23:23] <cmr> size seems to be unaffacted.
[07:23:44] <cmr> rustc -v does have the build hash
[07:23:48] <cmr> and date
[07:23:48] <eddyb> oh I know where the difference in fn main comes from, it's the link order
[07:23:58] <eddyb> cmr: any bindiff handy?
[07:25:29] <cmr> lots of differences
[07:25:33] <cmr> for fn main(){}
[07:25:34] <eddyb> acrichto: does libgreen introduce some kind of scheduling noise?
[07:25:52] <eddyb> cmr: I was thinking about the rustc binaries
[07:25:55] <acrichto> eddyb: libgreen is currently pretty inefficient with light, but parallel workloads
[07:26:12] <acrichto> eddyb: https://github.com/mozilla/rust/issues/11730
[07:26:26] <eddyb> that is, could it account for randomness in memory usage and/or performance even with /dev/urandom "turned off"?
[07:26:35] <acrichto> eddyb: basically, every task enqueue is a write() syscall right now, which kinda means that all context switches are syscalls, which is *definitely* bad
[07:26:35] <cmr> eddyb: sizes for the three hashes you listed are constant
[07:27:01] <acrichto> cmr: for https://github.com/mozilla/rust/pull/11431 you'll need to update the dependencies of the rustc tool
[07:27:07] <acrichto> and the rustdoc/rustpkg tools as well likely
[07:27:30] <acrichto> cmr: https://github.com/mozilla/rust/blob/master/mk/crates.mk#L69-L71
[07:28:43] <eddyb> cmr: though now I'm curious. I know someone tested fn main(){} and got like two or three possible hashes, coming from the link order - something like the linker searching for .so's in parallel and ending up with different orders
[07:29:07] <eddyb> acrichto: okay, that's bad. would RUST_THREADS=1 remove some of that noise?
[07:29:20] <acrichto> eddyb: yeah definitely, with RUST_THREADS=1 libgreen outperforms libnative
[07:29:25] <acrichto> at least on the rust-http benchmark
[07:29:27] <acrichto> in RPS
[07:29:59] <acrichto> 3800 => 8894 RPS
[07:30:05] <acrichto> for libgreen
[07:30:07] <eddyb> cmr: ^^ I guess that's the next thing you could try - whenever you can, that is
[07:30:29] <cmr> eddyb: according to vbindiff the only difference between them are the build dir and git hash, if I'm interpreting its output correctly.
[07:30:41] <eddyb> cmr: awesome
[07:30:45] *** Joins: dbaupp (Thunderbir@moz-68C83524.lns20.syd6.internode.on.net)
[07:31:03] <eddyb> so it's definitely runtime and not really /dev/urandom
[07:31:44] <eddyb> dbaupp: we were just talking about irsy randomness and how green thread scheduling is my next culprit
[07:32:45] <cmr> rustc only has two tasks afaik
[07:32:53] <cmr> the monitoring one and the one that actually does stuff
[07:34:04] <eddyb> libc allocator behavior + non-deterministic IO could also cause some weird patterns
[07:34:26] *** Quits: new_one (new_one@2557A8B3.328FFDD8.B3C0173E.IP) (Client exited)
[07:35:36] <cmr> acrichto: why is libgreen so much faster than libnative, in that case?
[07:35:54] <acrichto> cmr: https://github.com/mozilla/rust/issues/11730
[07:36:04] <acrichto> the scheduler is pretty inefficient on not very parallel workloads
[07:36:19] <cmr> libgreen *faster* than native, not slower.
[07:36:19] <acrichto> what's happening is that all the green tasks are constantly moving between schedulers, when they should be pretty much pinned to one scheduler
[07:36:24] <acrichto> exactly!
[07:36:34] <acrichto> green I/O really can be much faster
[07:36:35] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[07:36:41] <acrichto> we have optimizations to do 
[07:38:56] <eddyb> is it doing network?
[07:39:10] <eddyb> libuv networking is supposed to be the best thing
[07:39:26] <acrichto> yeah it's a rust-http benchmark
[07:39:27] <cmr> that's all it's doing ;p
[07:39:31] <acrichto> just using ab to make a bunch of concurrent requests
[07:39:38] <acrichto> and measuring the RPS that ab spits out
[07:39:48] <eddyb> it's probably something so small that node.js loses in v8
[07:40:12] <acrichto> apparently libgreen is significantly better than node.js
[07:40:17] <acrichto> even without RUST_THREADS=1
[07:40:23] <acrichto> I think all the allocations really hurt node.js
[07:40:27] <acrichto> just speculation though
[07:40:28] <dbaupp> <3 being fast
[07:40:31] <eddyb> either JIT or going from C++ to v8 and back to C++
[07:40:41] <acrichto> once you get running we're a 0-allocation I/O framework
[07:40:44] <eddyb> acrichto: you mean the GC?
[07:40:53] <acrichto> eddyb: perhaps, dunno
[07:40:56] <eddyb> v8 tries to be good at that, but maybe it's not great
[07:41:08] <eddyb> don't make me profile it. nope, not doing that
[07:41:19] <acrichto> lol
[07:41:51] <eddyb> I ran massif once on it. my decompiler thing leaks somehow and ends up at the heap limit :(
[07:42:05] <acrichto> perf record on node is so bad
[07:42:10] <acrichto> it's all jit functions lol
[07:42:13] <acrichto> no symbols
[07:42:34] <eddyb> acrichto: I think v8 can generate some dynamic info, but I doubt perf can use any of that
[07:42:41] <acrichto> it doesn't spend *that* much time in allocations though
[07:42:44] <acrichto> clear_page is pretty high up
[07:42:46] <eddyb> (can't say I ever figured it out, but it's probably my fault, helped by the lack of precise memory management)
[07:42:54] <acrichto> do_huge_pmd_anonymous_page
[07:42:55] <acrichto> what
[07:43:08] <eddyb> huh?
[07:43:22] <eddyb> is that called from v8's platform class or something?
[07:43:36] <acrichto> looked like it's just some kernel
[07:43:38] <eddyb> acrichto: almost sounds like linux kernel internals
[07:43:40] <acrichto> kernel thing*
[07:43:41] <acrichto> dealing with faults
[07:43:47] <cmr> it is.
[07:43:53] <cmr> it's part of hugepages
[07:44:11] <acrichto> can I tell perf to not record kernel samples?
[07:44:16] <acrichto> and attribute them all to userspace?
[07:44:31] <eddyb> that's probably the GC's newspace/oldspace thing. I wonder if it does something worse than it could
[07:44:33] <cmr> that's the default
[07:44:42] <cmr> how are you invoking it?
[07:44:50] <acrichto> perf record node foo.js
[07:44:59] *** flaper87|afk is now known as flaper87
[07:45:01] <cmr> hm
[07:47:45] <cmr> try -j u
[07:47:51] <cmr> just a guess
[07:48:32] <cmr> not recording time spent in the kernel isn't very fun though
[07:48:49] <dbaupp> kernel time doesn't *really* happen
[07:48:51] <cmr> flamegraphs can give you a better visualization, since it actually uses call graph
[07:48:59] <dbaupp> it's just a myth perpetuated by the government
[07:49:16] * dbaupp tin foil hat
[07:49:26] <acrichto> cmr: hm, some kernel error showed up
[07:49:28] <acrichto> oh well
[07:49:50] <cmr> hm it seems http://www.brendangregg.com/flamegraphs.html has been updated!
[07:49:56] <dbaupp> acrichto: you crashed the kernel?
[07:50:06] <acrichto> thankfully no lol
[07:50:07] <acrichto> The sys_perf_event_open() syscall returned with 95 (Operation not supported) for event (cpu-clock).
[07:56:50] *** Joins: c-a (c-a@moz-57C82A9.a163.priv.bahnhof.se)
[08:00:16] <dbaupp> acrichto: do the buildbots run make with -j<anything>?
[08:13:40] *** Quits: jdm (jdm@moz-D434EC03.dsl.sca.megapath.net) (Ping timeout)
[08:14:41] *** Joins: jdm (jdm@moz-D434EC03.dsl.sca.megapath.net)
[08:21:18] *** Joins: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se)
[08:36:35] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[08:36:35] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/ai4ejA
[08:36:35] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[08:39:06] *** Quits: jdm (jdm@moz-D434EC03.dsl.sca.megapath.net) (Quit: Lost terminal)
[08:41:30] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[08:41:30] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/tI7T1g
[08:41:30] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[08:41:31] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[08:41:32] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/65x4ng
[08:41:32] <ghrust> 13rust/06auto 14f572379 15xales: Minor fix to docs.
[08:41:32] <ghrust> 13rust/06auto 143781728 15bors: auto merge of #11837 : xales/rust/doc-fixes, r=cmr,huonw,alexcrichton
[08:41:32] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[08:55:21] <nrc> so, zero length files, or even files with no rust code in them really screw up codemap
[08:55:28] <nrc> is this a known bug?
[08:55:40] <cmr> hm, I haven't seen it before.
[08:56:04] <eddyb> I've seen attribute nonsense before
[08:56:08] <eddyb> rustilite: // foobar
[08:56:09] -rustilite- error: main function not found
[08:56:09] -rustilite- error: aborting due to previous error
[08:56:09] -rustilite- application terminated with error code 101
[08:56:26] <eddyb> looks fine, nevermind
[08:56:28] *** Joins: mankyKitty (Instantbir@moz-9B898D95.enst-bretagne.fr)
[08:57:07] <nrc> I think we have been lucky because we never ask for a span in exactly the right place where codemap would get confused
[08:57:08] <cmr> rustilite: /// foobar
[08:57:08] -rustilite- <anon>:1:1: 1:12 error: expected item after attributes
[08:57:09] -rustilite- <anon>:1 /// foobar
[08:57:09] -rustilite-          ^~~~~~~~~~~
[08:57:09] -rustilite- error: aborting due to previous error
[08:57:09] -rustilite- application terminated with error code 101
[08:57:22] <cmr> eddyb: that "nonsense"?
[08:57:47] <eddyb> cmr: I remember being very confused about it
[08:57:55] <eddyb> not sure why I even used /// back then
[08:59:03] <nrc> I will investigate more, it might be a bug in my code which calls codemap. I'll file a bug if it is an issue in the compiler
[09:01:13] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[09:07:18] <dbaupp> nrc: it's very likely to be a bug in the compiler... I've seen issues in the spans of /*! doc comments, and also issues with the spans of macro expanded things
[09:07:20] *** Joins: rca (rcatolino@moz-3F131AFE.adsl.proxad.net)
[09:07:27] <dbaupp> i.e. we do spans incorrectly in many ways
[09:07:45] <nrc> oh yeah, spans and macros do not go well together :-(
[09:07:54] * dbaupp should probably file those bugs
[09:08:00] <dbaupp> if I can find the testcases I had...
[09:09:05] <nrc> also kind of annoying how few spans we keep around - I'm having to re-tokenize and synthesise my own spans a lot of the time and that is super fragile :-(
[09:09:36] <dbaupp> can you just put more spans into the AST?
[09:10:48] <nrc> I probably could, I was trying to be minimally invasive wrt the compiler. And the extra memory required for storing spans for a whole bunch more tokens would be non-trivial
[09:11:06] <nrc> (I need them for all path segments and all idents, at the least)
[09:11:12] <dbaupp> ah
[09:11:18] <dbaupp> that'd be quite a lot of spans
[09:11:29] <cmr> very memory, much span :(
[09:11:34] <nrc> wow
[09:12:33] <cmr> bytbox: rebase that do removal quick, I wanna get that in there asap!
[09:13:43] <eddyb> now we can do something else with do :P
[09:14:28] <eddyb> do! { a <- b; c <- a; return (b, c); }
[09:17:34] *** Quits: c-a (c-a@moz-57C82A9.a163.priv.bahnhof.se) (Ping timeout)
[09:17:47] *** Joins: c-a (c-a@moz-57C82A9.a163.priv.bahnhof.se)
[09:19:10] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[09:20:19] *** Joins: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk)
[09:26:05] *** Quits: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk) (Ping timeout)
[09:29:03] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[09:30:59] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[09:42:30] *** Joins: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk)
[09:44:12] *** Quits: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk) (Ping timeout)
[09:50:33] *** Joins: jensnock_ (jensnocker@moz-33279404.customers.ownit.se)
[09:51:22] *** Quits: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se) (Ping timeout)
[09:56:13] *** Quits: lkuper (lkuper@moz-528BDC8B.public.wayport.net) (Quit: lkuper)
[09:56:32] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[09:56:32] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/65x4ng
[09:56:32] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[10:00:34] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[10:01:31] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[10:01:31] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/9kd75A
[10:01:31] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[10:01:33] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[10:01:34] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/aLrkNA
[10:01:34] <ghrust> 13rust/06auto 14965387a 15Felix S. Klock II: Fix bug: metadata for struct constructor function needs to encode info...
[10:01:34] <ghrust> 13rust/06auto 14b315aba 15Felix S. Klock II: test case for issue #10031.
[10:01:34] <ghrust> 13rust/06auto 14e90a8c4 15bors: auto merge of #11851 : pnkfelix/rust/fsk-fix-issue-10031, r=alexcrichton...
[10:01:36] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[10:18:02] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[10:47:05] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Client exited)
[10:47:27] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[10:48:28] *** Joins: tq (tq@moz-632DBD9.ad.umu.se)
[10:49:08] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Ping timeout)
[10:52:41] *** Quits: jensnock_ (jensnocker@moz-33279404.customers.ownit.se) (Input/output error)
[10:53:13] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[10:54:55] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[11:11:48] *** Joins: mrmonday_ (mrmonday@moz-1E82AE75.members.linode.com)
[11:12:14] *** Quits: mrmonday_ (mrmonday@moz-1E82AE75.members.linode.com) (Input/output error)
[11:13:42] *** Joins: mrmonday_ (mrmonday@moz-1E82AE75.members.linode.com)
[11:16:30] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[11:16:30] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/aLrkNA
[11:16:30] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[11:17:18] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[11:20:45] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[11:21:29] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[11:21:30] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/_-i4Bg
[11:21:30] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[11:21:30] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[11:21:30] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/ff6bFw
[11:21:30] <ghrust> 13rust/06auto 142cd98e2 15Alex Crichton: Upgrade LLVM...
[11:21:30] <ghrust> 13rust/06auto 14f2c4fc9 15bors: auto merge of #11853 : alexcrichton/rust/up-llvm, r=brson...
[11:21:30] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[11:28:32] *** kimundi is now known as zz_kimundi
[11:31:26] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[11:31:26] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14f2c4fc9 to 14e90a8c4: 02http://git.io/N3iJvQ
[11:31:26] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[11:38:53] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[11:50:31] *** Quits: mrmonday_ (mrmonday@moz-1E82AE75.members.linode.com) (Input/output error)
[11:57:00] *** Quits: rca (rcatolino@moz-3F131AFE.adsl.proxad.net) (Ping timeout)
[12:08:32] <dbaupp> cmr: it's `// SNAP <first hash in src/snapshots.txt>` for the SNAP warning thing, right?
[12:08:46] <cmr> dbaupp: yeah
[12:15:48] <dbaupp> thanks
[12:22:16] *** zz_kimundi is now known as kimundi
[12:23:54] *** Joins: gwty (gwtypc@F772A19C.DCF3E831.27560D6E.IP)
[12:29:14] *** Joins: rca (rcatolino@moz-3F131AFE.adsl.proxad.net)
[12:44:44] *** Joins: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca)
[13:06:28] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[13:06:28] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/Wi4-AA
[13:06:28] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[13:08:14] *** Quits: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca) (Quit: canhtak)
[13:11:13] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Input/output error)
[13:11:30] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[13:11:30] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/e709jA
[13:11:30] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[13:11:32] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[13:11:33] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/YD9v-A
[13:11:33] <ghrust> 13rust/06auto 14ea7b20d 15comex: Add appropriate LLVM module flags for debug info....
[13:11:33] <ghrust> 13rust/06auto 14b3d10f4 15bors: auto merge of #11864 : comex/rust/11352, r=alexcrichton...
[13:11:33] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[13:11:48] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[13:13:28] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[13:15:37] *** Quits: kdou (Mibbit@moz-26F24B28.cs.virginia.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[13:17:46] *** Joins: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se)
[13:25:07] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.3.50.1)
[13:26:33] *** Joins: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca)
[13:51:53] *** Joins: rca_ (rcatolino@moz-27E0D9CF.adsl.proxad.net)
[13:52:30] *** Quits: rca (rcatolino@moz-3F131AFE.adsl.proxad.net) (Ping timeout)
[14:02:17] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[14:09:10] *** Quits: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca) (Quit: canhtak)
[14:13:30] *** Joins: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca)
[14:26:29] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[14:26:29] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/YD9v-A
[14:26:30] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[14:31:33] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[14:31:33] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/SKC7DA
[14:31:33] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[14:31:46] *** Quits: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se) (Input/output error)
[14:35:41] *** Joins: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se)
[14:35:57] *** Joins: new_one (new_one@276E97E1.1DF5627.B3C0173E.IP)
[14:39:56] *** Quits: gwty (gwtypc@F772A19C.DCF3E831.27560D6E.IP) (Ping timeout)
[14:50:35] *** flaper87 is now known as flaper87|afk
[14:59:57] *** Quits: c-a (c-a@moz-57C82A9.a163.priv.bahnhof.se) (Ping timeout)
[15:00:10] *** Joins: c-a (c-a@moz-57C82A9.a163.priv.bahnhof.se)
[15:05:22] *** Quits: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca) (Quit: canhtak)
[15:07:24] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[15:09:35] *** Joins: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca)
[15:13:23] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Client exited)
[15:13:45] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[15:15:19] <cmr> It's DrawElements, it's ELEMENT_ARRAY_BUFFER, but it's an IBO!
[15:15:24] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Ping timeout)
[15:15:25] <cmr> whoops wrong channel
[15:15:26] <cmr> ah well
[15:16:00] <cmr> ah IBO comes from direct3d, which actually calls them IndexBuffers
[15:24:43] *** Joins: gwty (gwtypc@8C592A90.D8EE24C5.E7DAB6F9.IP)
[15:30:47] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[15:32:44] *** Joins: lkuper (lkuper@moz-528BDC8B.public.wayport.net)
[15:36:03] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[15:43:21] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[15:51:46] *** Quits: Kxepal (Miranda@moz-A53C85B.pppoe.mtu-net.ru) (Ping timeout)
[15:54:48] *** Joins: jdm (jdm@moz-D434EC03.dsl.sca.megapath.net)
[16:03:25] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[16:04:31] *** Joins: Kxepal (Miranda@moz-9BB50C73.pppoe.mtu-net.ru)
[16:06:47] *** Joins: jensnock_ (jensnocker@moz-33279404.customers.ownit.se)
[16:07:21] *** Quits: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se) (Ping timeout)
[16:12:10] *** flaper87|afk is now known as flaper87
[16:15:18] <flaper87> is it me or NO_REBUILD is broken ?
[16:15:31] <flaper87> mmh, it keeps rebuilding everything
[16:16:57] *** Quits: jensnock_ (jensnocker@moz-33279404.customers.ownit.se) (Input/output error)
[16:24:04] *** Quits: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca) (Quit: canhtak)
[16:28:20] *** Joins: erickt1 (Adium@8C9ECD8F.3A598286.F12515B4.IP)
[16:37:00] *** Quits: new_one (new_one@276E97E1.1DF5627.B3C0173E.IP) (Client exited)
[16:37:12] *** Quits: mankyKitty (Instantbir@moz-9B898D95.enst-bretagne.fr) (Ping timeout)
[16:39:07] *** Joins: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca)
[16:42:18] *** Quits: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca) (Quit: canhtak)
[16:56:59] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[16:59:46] *** Quits: rca_ (rcatolino@moz-27E0D9CF.adsl.proxad.net) (Ping timeout)
[17:03:02] *** Quits: lkuper (lkuper@moz-528BDC8B.public.wayport.net) (Quit: lkuper)
[17:03:32] *** Quits: tq (tq@moz-632DBD9.ad.umu.se) (Quit:  HydraIRC -> http://www.hydrairc.com <- Go on, try it!)
[17:06:18] <acrichto> dbaupp: nah the bots are always -j1
[17:06:28] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[17:06:29] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14162910a to 14b3d10f4: 02http://git.io/N3iJvQ
[17:06:29] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[17:06:31] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[17:06:32] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/0H4kcA
[17:06:32] <ghrust> 13rust/06auto 145690f23 15Niko Matsakis: Introduce marker types for indicating variance and for opting out...
[17:06:32] <ghrust> 13rust/06auto 148bd8084 15bors: auto merge of #11768 : nikomatsakis/rust/issue-11385-cell-and-variance, r=pnkfelix...
[17:06:32] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[17:08:20] *** Joins: rca (rcatolino@moz-27E0D9CF.adsl.proxad.net)
[17:09:44] *** Joins: mankyKitty (Instantbir@moz-21AD3B58.rev.sfr.net)
[17:09:52] *** Quits: erickt1 (Adium@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[17:13:46] <eddyb> oooh, I like the uses of ContravariantLifetime on vector iterators :D
[17:15:53] <Yurume> https://github.com/mozilla/rust/issues/11882 yay! it's ICE time again :)
[17:16:15] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[17:16:17] <Yurume> does the const value pass the different pass than the static item?
[17:19:08] *** Quits: jdm (jdm@moz-D434EC03.dsl.sca.megapath.net) (Ping timeout)
[17:19:11] *** Joins: jdm (jdm@moz-D434EC03.dsl.sca.megapath.net)
[17:19:31] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Input/output error)
[17:20:47] *** kimundi is now known as zz_kimundi
[17:23:35] *** Quits: jdm (jdm@moz-D434EC03.dsl.sca.megapath.net) (Quit: Lost terminal)
[17:28:44] *** flaper87 is now known as flaper87|afk
[17:29:56] <pnkfelix> acrichto: ping
[17:30:04] <acrichto> pnkfelix: pong
[17:30:29] <pnkfelix> acrichto: silly Q: in PR #11883, did you mean to also remove those other install-target-$(1)-host-$(2)-foo targets ?
[17:30:43] <acrichto> pnkfelix: yeah, I forgot to delete them earlier
[17:30:46] <pnkfelix> acrichto: (I cannot tell offhand whether that was driveby fix or accident)
[17:30:49] <pnkfelix> acrichto: okay
[17:30:53] <acrichto> sorry about that :(
[17:31:02] <pnkfelix> acrichto: np, just wanted to be sure.  I will r+
[17:35:19] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[17:36:31] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[17:36:32] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 148bd8084 to 14b3d10f4: 02http://git.io/N3iJvQ
[17:36:32] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[17:36:35] *** Joins: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca)
[17:38:44] *** Joins: jdm (jdm@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[17:39:13] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[17:43:16] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: rcirc on GNU Emacs 24.3.1)
[17:45:02] <cmr> dbaupp: ping
[17:51:31] *** Joins: dherman (dherman@moz-21F91504.cfw-a-gci.corp.yahoo.com)
[17:51:32] *** ChanServ sets mode: +ao dherman dherman
[17:56:41] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[17:56:43] *** Quits: lpy (lpy@9248CA04.F930CE91.65042015.IP) (Client exited)
[18:00:10] *** Quits: mankyKitty (Instantbir@moz-21AD3B58.rev.sfr.net) (Ping timeout)
[18:02:49] *** zz_kimundi is now known as kimundi
[18:03:05] *** Joins: mankyKitty (Instantbir@moz-21AD3B58.rev.sfr.net)
[18:04:27] <mankyKitty> acrichto: ping
[18:04:50] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[18:04:50] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:05:06] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:05:06] *** ChanServ sets mode: +qo brson brson
[18:05:08] *** Joins: sunfish (chatzilla@moz-BBE3ABD.mv.mozilla.com)
[18:05:18] <acrichto> mankyKitty: I'll get back to you in about an hour (meeting now)
[18:05:23] <mankyKitty> rgr rgr
[18:07:34] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[18:08:28] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[18:16:37] *** Joins: lkuper (lkuper@46B5412F.3597C859.3AF705F3.IP)
[18:21:36] *** Quits: dherman (dherman@moz-21F91504.cfw-a-gci.corp.yahoo.com) (Quit: dherman)
[18:22:51] *** Joins: TimAbraldes (quassel@moz-BF4D134B.hsd1.or.comcast.net)
[18:23:37] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[18:24:06] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[18:24:57] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[18:24:58] *** Joins: dherman (dherman@moz-21F91504.cfw-a-gci.corp.yahoo.com)
[18:24:59] *** ChanServ sets mode: +ao dherman dherman
[18:25:05] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[18:27:20] *** Joins: lpy (lpy@9248CA04.F930CE91.65042015.IP)
[18:29:50] *** Quits: lpy (lpy@9248CA04.F930CE91.65042015.IP) (Connection reset by peer)
[18:30:24] *** Joins: lpy (lpy@9248CA04.F930CE91.65042015.IP)
[18:32:10] *** Quits: lpy (lpy@9248CA04.F930CE91.65042015.IP) (Ping timeout)
[18:36:50] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[18:37:20] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[18:39:01] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[19:02:14] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[19:05:10] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[19:06:05] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[19:06:50] *** Joins: new_one (new_one@C308C12.B4699C3B.B3C0173E.IP)
[19:12:10] *** Quits: sunfish (chatzilla@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[19:12:53] *** Quits: lkuper (lkuper@46B5412F.3597C859.3AF705F3.IP) (Quit: lkuper)
[19:14:27] <acrichto> mankyKitty: back
[19:15:44] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Quit: Leaving)
[19:16:32] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[19:16:32] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 142b5cb3f to 14b3d10f4: 02http://git.io/N3iJvQ
[19:16:32] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[19:16:34] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[19:16:34] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/aH1T0g
[19:16:34] <ghrust> 13rust/06auto 14f11c9d7 15Niko Matsakis: Introduce marker types for indicating variance and for opting out...
[19:16:34] <ghrust> 13rust/06auto 14862ab7b 15bors: auto merge of #11768 : nikomatsakis/rust/issue-11385-cell-and-variance, r=pnkfelix...
[19:16:34] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[19:17:42] <mankyKitty> acrichto: woo
[19:18:09] <mankyKitty> sorry to be a pain but I was hoping for a bit of guidance on the PR I'm working on for stricter checking on extern fns
[19:18:52] <acrichto> of course!
[19:19:00] <acrichto> how can I help?
[19:19:10] <mankyKitty> I've 'made it work
[19:19:12] <mankyKitty> TM
[19:19:35] <mankyKitty> but my tests are failing, despite having matching errors, they're compile fail tests
[19:19:47] <mankyKitty> and I'm out of know-how about debugging it
[19:19:48] <mankyKitty> https://github.com/mozilla/rust/pull/11804
[19:20:07] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[19:20:07] *** ChanServ sets mode: +ao pcwalton pcwalton
[19:22:49] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[19:22:56] <strcat> acrichto: can you try something on OS X for me? delete Options.NoFramePointerElim = true from PassWrapper.cpp and see if gdb can do a backtrace
[19:23:02] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[19:23:21] * strcat is curious if we generate the debug info properly now...
[19:23:30] <acrichto> even if we don't generate debug-info?
[19:23:30] <strcat> not supposed to need frame ptrs
[19:23:43] <strcat> acrichto: dunno, if it works with debug info then that's good enough
[19:23:49] <acrichto> mankyKitty: could you show me a paste of the output of the cfail tests?
[19:23:51] <strcat> lldb can't actually use frame pointers afaict
[19:24:00] <acrichto> mankyKitty: it should tell you the reason why it failed somewhere near the top
[19:24:21] <eddyb> strcat: does removing frame pointers help codegen size a bit?
[19:24:34] <acrichto> strcat: building now
[19:24:40] <strcat> eddyb: it saves a register
[19:25:01] <strcat> it matters a lot on non-long-mode
[19:25:05] <eddyb> oh, I guess that's something, maybe prevents a bunch of spilling
[19:26:14] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[19:26:14] <ghrust> 01[13rust01] 15alexcrichton pushed 1 new commit to 06try: 02http://git.io/MQqEnQ
[19:26:14] <ghrust> 13rust/06try 142cd98e2 15Alex Crichton: Upgrade LLVM...
[19:26:14] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[19:26:30] <mankyKitty> running the tests again now
[19:31:10] *** Joins: lpy (lpy@9248CA04.F930CE91.65042015.IP)
[19:32:56] *** Quits: lpy (lpy@9248CA04.F930CE91.65042015.IP) (Ping timeout)
[19:33:46] <Eridius> acrichto: regarding the I/O discussion in the meeting: the motivating factor for me to be able to split a TcpStream was so I could effectively wrap a stream in a Port/Chan pair, and I wanted that so I could Select.
[19:34:05] <Eridius> the ability to Select on a TcpStream directly along with the port/chan would be much more useful
[19:34:09] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[19:34:09] <ghrust> 01[13rust01] 15alexcrichton pushed 1 new commit to 06try: 02http://git.io/DLKbcg
[19:34:09] <ghrust> 13rust/06try 14a976420 15Alex Crichton: Trying something
[19:34:09] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[19:34:19] <Eridius> (although I think that the ability to split a stream is still independently useful)
[19:34:38] <acrichto> Eridius: clone() is a "more general" split() and select() is something that is proving to be quite difficult
[19:34:48] <Eridius> sure, clone() instead of split() is fine
[19:34:53] <acrichto> the concept is very easy to wrap your head around, but the implementation I have been unable to wrap my head around
[19:35:05] <acrichto> I'm going to open a PR with clone() soon-ish
[19:35:11] <Eridius> but I'm not looking forward to having to use libgreen directly just so I can avoid using an unnecessary OS thread in order to implement the port/chan wrapper
[19:35:51] <Eridius> ok, as long as you don't throw away the idea of a generic select, .clone() is a reasonable working solution for the time being
[19:35:58] <acrichto> yeah I don't want to throw it away
[19:36:02] <acrichto> but we need *a* solution
[19:36:10] <Eridius> generic select would also let you implement timeouts on reads
[19:36:14] <acrichto> with clone() you can make a Chan/Port
[19:36:34] <acrichto> it's true, a truly generic select would allow us to do lots of things
[19:37:39] <Eridius> ok, so for the time being, I'm in favor of clone(), with no special effort made to stop simultaneous reads/writes (i.e. no mutex for libnative)
[19:38:04] <acrichto> yeah that's my plan
[19:38:11] <Eridius> awesome
[19:38:12] <strcat> but you're only going to be able to select on channels, socket ready-state and timers cross-platform afaik
[19:38:12] <acrichto> we need one for libgreen, but that's a libuv limitation
[19:38:18] <strcat> unless you use the crappy thread pool solution ;p
[19:38:38] <Eridius> strcat: I don't need to know how much data is available, I just need to know whether the socket has any data at all
[19:38:43] <Eridius> (and whether it's ready for a write)
[19:38:49] <strcat> Eridius: well that will work
[19:39:04] <strcat> I mean that you won't get cross-platform AIO for files and other I/O without thread pool nonsense
[19:39:05] <Eridius> although I suppose I do need the ability to do a partial write (i.e. no blocking if it can't write the whole thing)
[19:39:14] <strcat> Eridius: well that's not possible
[19:39:20] <acrichto> strcat: I've got a backtrace in lld without frame pointers
[19:39:22] <Eridius> strcat: no?
[19:39:32] *** Joins: sunfish (chatzilla@moz-BBE3ABD.mv.mozilla.com)
[19:39:37] <mankyKitty> acrichto: This is the report from during the test-http://pastebin.com/DZFzpAmh
[19:39:44] <mankyKitty> gah http://pastebin.com/DZFzpAmh
[19:39:48] <strcat> acrichto: does it work in ancient crappy OS X gdb too? assuming they have it
[19:39:56] * strcat will make a PR for that then
[19:40:01] <acrichto> strcat: I don't have gdb any more, one sec, lemme test -O as well
[19:40:01] <strcat> I wonder when it started working
[19:40:29] <strcat> Eridius: write on a non-blocking socket can block
[19:40:34] <acrichto> strcat: yeah I've got one iwth -O as well, who knows
[19:40:34] <strcat> Eridius: cause you can fill kernel buffers
[19:40:43] <acrichto> there are definitely no frame pointers
[19:41:05] <acrichto> mankyKitty: look farther above that
[19:41:07] <Eridius> strcat: I thought the "non-blocking" in "non-blocking socket" meant it doesn't block if the buffer fills up
[19:41:13] <acrichto> mankyKitty: it should have more output
[19:41:17] <Eridius> strcat: write() should just return the number of bytes actually written
[19:41:26] <acrichto> mankyKitty: it may not have printed an error for a line that it was expecting an error for
[19:41:29] <strcat> Eridius: afaik it can block on linux
[19:41:49] <Eridius> strcat: that's quite surprising, and seems like a serious limitation.
[19:42:57] <acrichto> I think everyone's lives are a lot easier if you just block everywhere
[19:42:58] <acrichto> sadly
[19:43:00] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[19:43:28] <strcat> Eridius: hm, maybe it's not possible anymore
[19:43:31] <mankyKitty> acrichto: this bit? 
[19:43:34] <strcat> it certainly used to be
[19:43:48] <mankyKitty> test [compile-fail] compile-fail/extenv-not-defined-custom.rs ... ok
[19:43:48] <mankyKitty> error: expected error on line 19 not found: expected ident, found `(`
[19:43:49] <mankyKitty> command: x86_64-apple-darwin/stage1/bin/rustc ~/rust/src/test/compile-fail/extern-bad-fn-decls.rs -o x86_64-apple-darwin/test/compile-fail/extern-bad-fn-decls.stage1-x86_64-apple-darwin -L x86_64-apple-darwin/test/compile-fail --target=x86_64-apple-darwin -L x86_64-apple-darwin/test/compile-fail/extern-bad-fn-decls.stage1-x86_64-apple-darwin.libaux --cfg rtopt --cfg debug -Z prefer-dynamic -O
[19:44:11] <acrichto> mankyKitty: could you paste that whole output?
[19:44:15] <acrichto> pastebin*
[19:44:20] <strcat> Eridius: technically there are aio_* functions
[19:44:25] <Eridius> acrichto: in a lightweight task world, blocking is doable. It's working reasonably for Go.
[19:44:28] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.3.1)
[19:44:43] <strcat> Eridius: our tasks aren't 'lightweight' though
[19:44:50] <strcat> without segmented stacks
[19:45:04] <acrichto> our tasks are exactly the amount of weight that we want them to be
[19:45:06] <Eridius> strcat: yeah, and I'm wondering how Go is going to be impacted when they remove the segmented stacks
[19:45:07] <strcat> we're going to end up needing AIO but it doesn't need to be in libstd
[19:45:10] <acrichto> we are in complete control over everything about our tasks
[19:45:14] <acrichto> green ones that is
[19:45:25] <strcat> acrichto: but I doubt we really want segmented stacks ever again
[19:45:59] <acrichto> strcat: segmented stacks aren't necessarily the only solution
[19:46:38] *** Quits: new_one (new_one@C308C12.B4699C3B.B3C0173E.IP) (Ping timeout)
[19:46:42] *** Joins: new_one (new_one@C308C12.B4699C3B.B3C0173E.IP)
[19:46:48] <mankyKitty> http://pastebin.com/FV3ZeF7T
[19:47:54] <acrichto> mankyKitty: it looks like you have an expected error on line 19 that isn't getting emitted by the compiler
[19:48:31] *** Quits: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca) (Quit: canhtak)
[19:53:21] <mankyKitty> that's what I can't work out.. there is probably something that obvious that I'm missing, but when I try to compile it separately, the error seems correct...http://pastebin.com/Gp50QHU3
[19:54:07] *** Quits: sunfish (chatzilla@moz-BBE3ABD.mv.mozilla.com) (Client exited)
[19:54:21] <acrichto> mankyKitty: do you have two //~ ERROR lines in that file?
[19:54:44] <mankyKitty> acrichto: uh-oh.. err I have six.. why? >.>
[19:55:33] <acrichto> mankyKitty: yeah it looks like you're only emitting the error on one of them 
[19:55:45] <acrichto> the //~ ERROR lines are a precise check that an error is emitted at each line
[19:55:51] <acrichto> and only that exact set of lines have errors on them
[19:57:21] <mankyKitty> I don't think I follow, so I can't have six in one file because only the first will report correctly? *goes back to test notes*
[19:57:55] <eddyb> if you want to test all of the errors and it fails after the first one, make a test for each one of them
[19:58:55] <acrichto> mankyKitty: span_err will emit an error, but keep going, while span_fatal will kill compilation immediately
[19:59:48] <strcat> acrichto: https://github.com/mozilla/rust/pull/11879 r? added commit removing that line
[20:00:32] <strcat> did we change how we generate debug info or something? I remember executables used to warn on OS X or something
[20:00:36] * strcat shrugs
[20:00:39] <strcat> as long as it works now
[20:00:43] <acrichto> strcat: thanks
[20:00:51] <acrichto> it may have just been gdb
[20:00:55] <acrichto> and lldb is "all the rage" now
[20:01:02] <mankyKitty> eddyb, acrichto: right yes that makes perfect sense, *headdesk*. Thanks. I'll fix that up.
[20:01:03] <acrichto> and lldb may just be way different than gdb
[20:01:15] <acrichto> strcat: https://github.com/mozilla/rust/pull/11887
[20:01:15] <strcat> acrichto: I don't think lldb knows how to use frame pointers for traces
[20:01:23] <acrichto> even better! lol
[20:01:28] <strcat> \o/
[20:01:44] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[20:01:44] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14862ab7b to 14b3d10f4: 02http://git.io/N3iJvQ
[20:01:44] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[20:01:46] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[20:01:46] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/IjwznA
[20:01:46] <ghrust> 13rust/06auto 14e901c4c 15xales: Set SO_REUSEADDR by default in libnative....
[20:01:46] <ghrust> 13rust/06auto 14c6bd053 15bors: auto merge of #11845 : xales/rust/libnative, r=alexcrichton...
[20:01:46] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[20:02:02] <strcat> acrichto: https://github.com/mozilla/rust/issues/8543 can probably close this then
[20:02:05] <strcat> I think it was the same issue
[20:02:36] <acrichto> oh that's a different issue
[20:02:47] <acrichto> that's becuase the call instruction is the last instruction in the function
[20:02:54] <acrichto> so the return address is inot the middle of nowhere
[20:03:02] <acrichto> so lldb can't backtrace
[20:03:54] <strcat> ah
[20:04:00] <eddyb> make LLVM output a nop after the call?
[20:04:07] <acrichto> llvm won't emit anything
[20:04:11] <strcat> 'make LLVM' do anything is not easy
[20:04:11] <acrichto> I think we've solved this with rust_fail
[20:04:22] <acrichto> or rather we can easily solve this
[20:04:29] <acrichto> rust_fail could not return !
[20:04:38] <acrichto> and then everything calling rust-fail would immediatel intrinsics::abort()
[20:04:49] <acrichto> rust_fail would never get inlined
[20:04:55] <acrichto> so we're guaranteed there's an instruction afterwards
[20:06:03] <eddyb> ahh, I missed the meeting
[20:06:20] *** Joins: rocode (rocode@moz-8ACDD150.clsp.qwest.net)
[20:06:38] <acrichto> we talked about default type parameters!
[20:06:43] <strcat> acrichto: I know how to kill most of the visit glue anyway
[20:06:47] <eddyb> yes... where is gated stuff checked?
[20:06:50] <acrichto> strcat: oh nice!
[20:06:53] <strcat> which is by removing TyDesc from proc/~Trait ;p
[20:06:56] <acrichto> eddyb: librustc/front/feature_gate.rs
[20:06:58] <strcat> it's unnecessary
[20:07:05] <eddyb> strcat: not used by {:?} :D
[20:07:14] <strcat> instead of the vtable being [TyDesc, ptr, ptr, ptr] it can be [dtor_ptr, ptr, ptr, ptr]
[20:07:16] <strcat> eddyb: yes
[20:07:29] <strcat> (as in not used by it)
[20:07:33] <acrichto> strcat: you may want to talk with pnkfelix about that, I'm not sure if gc needs it
[20:07:35] <eddyb> acrichto: hmpf. can't check *uses* before typeck
[20:07:40] <strcat> acrichto: I did, it doesn't need it ;)
[20:07:53] <acrichto> eddyb: that's fine, you can punt that check to later in compilation
[20:08:03] <strcat> it can use a side table instead and that's what pcwalton wants
[20:08:03] <acrichto> eddyb: you could just have a boolean flag as to whether the feature is enabled
[20:08:06] <acrichto> strcat: awesome!
[20:08:10] <acrichto> perfect
[20:08:21] <strcat> it's just a matter of dealing with trans
[20:08:24] <eddyb> acrichto: typeck has special behavior for expanding, that is, it has to grab the default type params, and thus knows when it's happening
[20:08:35] <strcat> I don't know how hard it'll be
[20:08:44] <strcat> anyway afaik that's where 99% of the TyDesc come from
[20:08:56] <strcat> I think the only other way to get one is get_tydesc...
[20:09:05] <strcat> we could actually remove the concept of TyDesc completely
[20:09:08] <strcat> oh, well, and @ has them inside
[20:09:24] <acrichto> eddyb: yeah you can gate at that time
[20:09:45] <strcat> @ technically just wants a dtor ptr too
[20:09:46] <eddyb> strcat: anything that can get the information using intrinsics, please burn to the ground :D
[20:09:47] <strcat> but screw updating that
[20:10:00] <eddyb> strcat: &Trait/&mut Trait with &[dtor_ptr, ptr], can that be just ptr?
[20:10:13] <strcat> eddyb: yes but it can be dealt with later
[20:10:22] <eddyb> all of this is delicious :D
[20:10:42] <strcat> I think we can also remove auto-slicing without pain
[20:10:55] <eddyb> strcat: by adding a ton of methods everywhere?
[20:11:06] <strcat> eddyb: by implementing the slice methods on that AsSlice thing
[20:11:08] <strcat> instead of slices
[20:11:16] *** Joins: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[20:11:30] <eddyb> strcat: oh, right... hmm
[20:11:34] <strcat> and then vec.iter() or whatever will work
[20:11:40] <strcat> *without* auto-slicing
[20:11:42] <eddyb> strcat: but then there's a myriad of functions taking &[T]
[20:11:49] <strcat> eddyb: well, .as_slice() for those
[20:11:53] <strcat> eddyb: preserves value semantics
[20:11:59] <strcat> foo(x) with ~T should be by-value
[20:12:04] <eddyb> I trust you know what you're doing
[20:12:06] <strcat> the auto-borrow is weird
[20:12:16] <strcat> eddyb: well I don't really plan on *removing* auto-slicing
[20:12:22] <strcat> just not adding it for Vec<T>...
[20:12:41] <strcat> and ~[T] will have to be reimplemented or just removed
[20:15:04] *** Quits: new_one (new_one@C308C12.B4699C3B.B3C0173E.IP) (Ping timeout)
[20:16:27] <eddyb> "Maybe suggest to eddyb that he keep working on this and allocators."
[20:16:33] <eddyb> acrichto: what was that part about ^^?
[20:17:27] <strcat> pcwalton: it'd be nice if we could just use something like zero install
[20:17:30] <strcat> for rust pkgs
[20:17:43] <strcat> I didn't realize zero install was cross-platform before
[20:17:47] <strcat> I thought it was for linux
[20:18:34] * strcat will play with that later
[20:21:53] <eddyb> "pcwalton: Existentials. If you wrap it in the trait, you don't know if it will be visited. I think we'd need a Show type bound on them, maybe. Because of monomorph, we do know if it will be visited or not. We could work on improving reflection... but I don't really want to touch that code."
[20:22:05] <eddyb> did anyone mention that we don't actually go through traits?
[20:22:14] <eddyb> rusti: ~0 as ~Clone
[20:22:15] -rusti- ~std::clone::Clone:Send
[20:22:56] <larsberg> eddyb: IIRC, the segment in the meeting that mentioned you was about your (much-liked) PR for default type parameters
[20:23:21] <larsberg> since the primary example was of allocators, there was some interest in seeing if we could get an example of using them with real allocator examples
[20:23:41] <eddyb> ah, ok, I might try. I'm curious what the design they mentioned was
[20:23:44] <larsberg> there was a claim that you had expressed interest in that in the past, so I think somebody was going to follow up with you about it
[20:24:06] <eddyb> yeah, well, I express interest in everything
[20:24:06] <larsberg> sorry if the notes are a bit terse or missed something - I try to keep up, but occasionally fall behind if the conversation starts flying
[20:24:24] <strcat> larsberg: I had 'working' allocators before
[20:24:27] <strcat> but generic dtors don't work
[20:24:30] <strcat> so they didn't really work.
[20:24:36] <eddyb> riiight, that too
[20:25:24] <larsberg> strcat: makes sense! Something we're definitely interested in from servo's greedy point of view :-)
[20:25:32] <eddyb> I had a few thoughts on how to fix that, but I need to look at it closely
[20:25:36] *** Quits: TimAbraldes (quassel@moz-BF4D134B.hsd1.or.comcast.net) (Input/output error)
[20:26:02] <larsberg> I hope we can make it work, because having custom classes with built-in allocators (e.g. the great perf wins we got from pcwalton's small vector allocation tweaks) would be massive type bloat
[20:26:46] <strcat> fwiw the new rust stdlib vector (std::vec_ng) has 6x faster push and doesn't allocate for zero-length vectors ;p
[20:27:09] <strcat> missing a bit of integration works (implementing slice traits + we need indexing traits)
[20:27:12] <eddyb> strcat: how good of an interface does jemalloc have?
[20:27:14] <strcat> s/works/work/
[20:27:32] <strcat> eddyb: well it has the malloc/free one and then one with no backwards compatibility guarantee
[20:27:43] <strcat> in fact jemalloc 3.5.0 redid it completely.
[20:27:54] <strcat> eddyb: http://www.canonware.com/download/jemalloc/jemalloc-latest/doc/jemalloc.html look here
[20:27:56] <eddyb> because I'm thinking of using my weak &'static Trait idea to allow pulling in a crate redefining the default allocator :)
[20:28:03] <strcat> mallocx, reallocx, etc. is the new API
[20:28:17] <strcat> allocm, rallocm, etc. was the old jemalloc-specific one and is going to be removed ASAP
[20:28:23] <eddyb> __xxallocxx__
[20:28:34] <larsberg> strcat: I think we're also interested in small vectors (PR here: https://github.com/mozilla/servo/pull/1564 ) because we can do some analysis of "all teh web" to understand for some types what the most common vector sizes would be
[20:28:43] <strcat> larsberg: ah
[20:29:03] <larsberg> we then optimize that size inline in the vector to avoid an allocation unless you go over it
[20:29:19] <strcat> yep I know
[20:29:28] <strcat> I opened the feature request for small vectors in rust ;p
[20:30:12] <eddyb> "The sallocx() function returns the real size of the allocation at ptr." sweet stuff :D
[20:31:10] <eddyb> strcat: I feel like we should totally have "extern mod jemalloc;" be a thing
[20:31:35] <strcat> eddyb: well you can do better than sallocx
[20:31:42] <eddyb> (maybe) change the default allocator and provide custom arenas
[20:32:02] *** Joins: lpy (lpy@9248CA04.F930CE91.65042015.IP)
[20:32:20] <eddyb> then we can run rustc with a million configurations
[20:32:29] <strcat> eddyb: you can use nallocx to ask what the size of an allocation would be
[20:32:40] <strcat> without searching through the allocation data structure
[20:32:49] <strcat> like if you know you asked for 3000
[20:32:54] <strcat> you just ask nallocx
[20:33:09] <eddyb> what's that for, size classes?
[20:33:16] <strcat> eddyb: yep
[20:33:27] <strcat> eddyb: so you call rallocx for your vector
[20:33:34] <strcat> then ask nallocx what the *real* capacity is
[20:33:36] <strcat> and set it to that
[20:33:42] *** Quits: lpy (lpy@9248CA04.F930CE91.65042015.IP) (Ping timeout)
[20:33:45] <strcat> reallocx*
[20:33:56] <strcat> saves on lookups in the allocation data structure
[20:34:02] <strcat> not incredibly important
[20:34:18] <eddyb> strcat: wouldn't be easier if there was a realloc function returning that size?
[20:34:23] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[20:34:25] <strcat> eddyb: that's what they used to do...
[20:34:30] <strcat> eddyb: decided it was redundant
[20:34:44] *** Joins: new_one (new_one@565B6F06.B4699C3B.B3C0173E.IP)
[20:34:55] <strcat> eddyb: the experimental API was the prototype of this
[20:35:48] <eddyb> their size classes aren't just powers of two. meh, it's probably much smarter than Slam/Blam
[20:36:09] <strcat> eddyb: yeah did you see the table in the man page?
[20:36:25] <eddyb> do you mean Table 1?
[20:36:30] <strcat> yep
[20:37:54] <strcat> eddyb: anyway it also lets you ask for alignment/zeroing with both mallocx and reallocx
[20:38:03] <strcat> unlike POSIX/C11 which only has alignment for the malloc-like function
[20:38:15] <strcat> it saves memory usage compared to making your own aligned alloc wrapper
[20:42:56] <eddyb> larsberg, acrichto: can you someone tell everyone involved in the visit_glue discussion that {:?} doesn't go through ~Trait atm? doesn't seem obvious from the meeting notes
[20:43:23] <mankyKitty> booyah
[20:43:47] <mankyKitty> ahem
[20:43:54] <mankyKitty> As you were... >.>
[20:45:41] *** Quits: doomlord_ (servitor@moz-841308DB.range86-160.btcentralplus.com) (Connection reset by peer)
[20:45:58] *** Quits: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP) (Ping timeout)
[20:46:02] <larsberg> eddyb: is there a PR/Issue that people can comment on about it? It sounds like a larger discussion with more issues than something that can be addressed with a quick update to the meeting notes wiki.
[20:47:14] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[20:49:36] *** Joins: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP)
[21:01:19] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[21:03:32] *** Quits: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[21:05:13] *** Joins: mrmonday_ (mrmonday@moz-1E82AE75.members.linode.com)
[21:05:27] *** Joins: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[21:10:25] *** Quits: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP) (Ping timeout)
[21:10:57] *** Quits: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: Jesse)
[21:12:23] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[21:12:39] *** Joins: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[21:12:55] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[21:14:37] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[21:15:11] *** Joins: notmatt (notmatt@CC62CF7E.1E7FDFDB.A82DBDDB.IP)
[21:18:51] *** Joins: lkuper (lkuper@5D0E93D8.BBB8E1FF.2A5718D4.IP)
[21:23:45] *** Quits: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: Jesse)
[21:25:52] *** Joins: doomlord_ (servitor@moz-841308DB.range86-160.btcentralplus.com)
[21:29:17] *** Joins: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[21:31:56] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[21:31:56] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/IjwznA
[21:31:56] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[21:32:35] *** Joins: lpy (lpy@9248CA04.F930CE91.65042015.IP)
[21:33:32] <mankyKitty> woo, okay tests rebuilt and everything seems happy now.. pushed up latest for my PR :)
[21:33:50] <mankyKitty> make check passed too \o/
[21:33:58] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[21:34:29] *** Quits: lpy (lpy@9248CA04.F930CE91.65042015.IP) (Ping timeout)
[21:36:52] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[21:36:52] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/nnboCQ
[21:36:52] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[21:36:54] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[21:36:54] <ghrust> 01[13rust01] 15bors pushed 12 new commits to 06auto: 02http://git.io/l3ClBg
[21:36:54] <ghrust> 13rust/06auto 14ae6d793 15Scott Lawrence: Removing do keyword from librustdoc
[21:36:54] <ghrust> 13rust/06auto 149f6aa87 15Scott Lawrence: Removing do keyword from libstd and librustc
[21:36:54] <ghrust> 13rust/06auto 148b261d8 15Scott Lawrence: Remove do keyword from librustuv
[21:36:56] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[21:38:02] *** Quits: mankyKitty (Instantbir@moz-21AD3B58.rev.sfr.net) (Quit: mankyKitty)
[21:43:03] <dbaupp> cmr: pong (briefly)
[21:43:11] <cmr> dbaupp: unping, but thanks :)
[21:43:17] *** Quits: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: Jesse)
[21:44:02] <dbaupp> cmr: (I think I saw you fork rust-rand? ... i believe everything relevant is upstream now, and it hasn't been touched for months, fwiw.)
[21:44:09] <cmr> yeah
[21:44:58] <dbaupp> ok, cool; just making sure you weren't hitting your head against it
[21:45:04] * dbaupp disappears
[21:46:44] *** Quits: dbaupp (Thunderbir@moz-68C83524.lns20.syd6.internode.on.net) (Ping timeout)
[21:46:48] *** Quits: lkuper (lkuper@5D0E93D8.BBB8E1FF.2A5718D4.IP) (Quit: lkuper)
[21:52:17] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.3.1)
[21:55:41] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[22:03:02] * acrichto just learned about VPATH in make
[22:03:10] <acrichto> no wonder these doc rules are so messed up in some places
[22:03:16] * cmr goes to learn about vpath
[22:03:20] <acrichto> and *that*'s why the rntime works in others...
[22:03:33] <cmr> " vPath: The Secret Sauce to Enabling Virtual Network Services" nope not that
[22:03:43] <acrichto> lol
[22:06:27] <cmr> fancy
[22:07:01] <Eridius> huh, hadn't heard of VPATH before. That's an odd bit of functionality
[22:07:16] <Eridius> I suppose that lets you, the person invoking Make, indicate that you have some deps available elsewhere
[22:10:02] *** Joins: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[22:10:52] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[22:10:55] <acrichto> yeah I'm removing this from our makefiles
[22:11:01] <acrichto> this is totally messing up all doc dependencies
[22:11:28] <jdm> oh, hello github ui revamp
[22:11:30] <jdm> that was sudden
[22:11:34] <cmr> jdm: linkity?
[22:11:35] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[22:11:35] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/YvJpbA
[22:11:35] <ghrust> 13rust/06auto 149f60e7c 15William Ting: Update extract-tests.py to use same test directives as rustdoc....
[22:11:35] <ghrust> 13rust/06auto 14edfb546 15bors: auto merge of #11490 : wting/rust/wting_11362_update_extract_tests, r=alexcrichton...
[22:11:36] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[22:11:37] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[22:11:38] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 140d94531 to 14c6bd053: 02http://git.io/N3iJvQ
[22:11:38] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[22:11:39] <jdm> https://github.com/mozilla/rust/pull/11853#issuecomment-33529822
[22:11:56] <cmr> well that's marginally worse.
[22:11:57] <acrichto> whoa!
[22:12:06] <acrichto> whoa hold the phones
[22:12:10] <cmr> Issue numbers: now unreadable
[22:12:29] <acrichto> the actual commit is so tiny :(
[22:12:43] <cmr> yeah
[22:12:47] <cmr> I actually couldn't find it at ifrst
[22:12:49] <jdm> yep
[22:12:57] <acrichto> https://github.com/mozilla/rust/pull/11889
[22:13:01] <acrichto> that looks... interesting
[22:13:22] <cmr> I'm a big fan of gitlab's interface
[22:23:00] *** Joins: ktt3ja (ktt3ja@moz-85E2770C.hsd1.va.comcast.net)
[22:33:20] *** Joins: lpy (lpy@9248CA04.F930CE91.65042015.IP)
[22:35:15] *** Quits: lpy (lpy@9248CA04.F930CE91.65042015.IP) (Ping timeout)
[22:39:01] *** Quits: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: Jesse)
[22:41:12] *** Joins: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[22:41:12] *** ChanServ sets mode: +qo brson brson
[22:43:51] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:44:10] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:47:34] <acrichto> brson: r? https://github.com/mozilla/rust/pull/11754
[22:51:33] <Eridius> whoa, did github just push a new UI?
[22:51:46] <strcat> Eridius: just for issues/pulls
[22:51:50] <Eridius> https://github.com/blog/1767-redesigned-conversations
[22:51:54] <strcat> major sidegrade
[22:52:10] <strcat> now how about they fix the bugs :(
[22:52:18] <Eridius> bugs? On github? Pfft
[22:52:19] <strcat> and use a sane commit sort order
[22:52:52] * strcat feels a bit guilty fixing typos in random issue comments he sees
[22:53:04] <Eridius> haha
[22:53:13] *** Quits: Kxepal (Miranda@moz-9BB50C73.pppoe.mtu-net.ru) (Quit: Kxepal)
[22:53:27] *** Joins: Kxepal (Miranda@moz-9BB50C73.pppoe.mtu-net.ru)
[22:53:30] <Eridius> strcat: I finally got around to getting r+ the other day, and now I have a fresh appreciation for how much traffic the rust repo has
[22:53:56] <Eridius> I'm actually seriously considering switching email providers just so I can have powerful mail filtering, so I can filter on X-Github-Reason :/
[22:53:59] * ChrisMorgan wonders what would happen if GitHub did automatic spelling correction (with confirmation of changes, of course.)
[22:54:53] <Eridius> gah, I need to finish my slide deck for tonight
[22:55:33] <strcat> Eridius: can't you just do that in a client?
[22:56:10] <Eridius> strcat: multiple computers and mobile devices. I don't use client-side filtering
[22:56:27] <strcat> Eridius: which webmail thing do you use now then?
[22:56:27] <Eridius> otherwise my iPhone would be constantly receiving emails only to have them then disappear when my desktop client fetches new mail
[22:56:34] <Eridius> Gmail, through a free google apps domain
[22:56:42] <Eridius> my father owns the domain, and he doesn't want to move to a paid host
[22:56:49] <strcat> gmail filters don't work on arbitrary headers? ;s
[22:56:57] * Eridius is considering getting a personal fastmail.fm account (they support Sieve!) and forwarding all email there
[22:57:01] <Eridius> nope! Gmail filtering is pretty bad
[22:59:19] *** Joins: dbaupp (Thunderbir@32742E97.D5A1DCF.37681C44.IP)
[22:59:42] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:00:07] *** Joins: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[23:06:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:09:50] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[23:09:50] *** ChanServ sets mode: +o tjc
[23:14:14] *** Quits: rca (rcatolino@moz-27E0D9CF.adsl.proxad.net) (Ping timeout)
[23:25:46] *** Quits: gwty (gwtypc@8C592A90.D8EE24C5.E7DAB6F9.IP) (Ping timeout)
[23:31:42] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[23:31:43] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/YvJpbA
[23:31:43] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[23:32:59] *** Quits: c-a (c-a@moz-57C82A9.a163.priv.bahnhof.se) (Quit: Ex-Chat)
[23:34:03] *** Joins: lpy (lpy@9248CA04.F930CE91.65042015.IP)
[23:35:52] *** Quits: lpy (lpy@9248CA04.F930CE91.65042015.IP) (Ping timeout)
[23:36:42] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[23:36:42] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/G_EpHg
[23:36:42] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[23:36:45] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[23:36:45] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/8R3vRQ
[23:36:45] <ghrust> 13rust/06auto 14069f030 15Alex Crichton: Implement an unused_result lint...
[23:36:45] <ghrust> 13rust/06auto 14538f8ed 15Alex Crichton: Flag Result as #[must_use] and deal with fallout.
[23:36:45] <ghrust> 13rust/06auto 14b69a997 15bors: auto merge of #11754 : alexcrichton/rust/unused-result, r=brson...
[23:36:47] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[23:48:56] *** Joins: ChrisMorgan1 (chris@moz-6AC741CA.static.tpgi.com.au)
[23:49:05] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Quit: Leaving.)
[23:49:14] *** ChrisMorgan1 is now known as ChrisMorgan
[23:56:31] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[23:56:32] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14b69a997 to 14edfb546: 02http://git.io/N3iJvQ
[23:56:32] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[23:56:32] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[23:56:33] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/BdVWMQ
[23:56:33] <ghrust> 13rust/06auto 14daaf8ec 15Alex Crichton: Generate rlibs by default (instead of dylibs)...
[23:56:33] <ghrust> 13rust/06auto 1487b11f8 15bors: auto merge of #11706 : alexcrichton/rust/issue-11253, r=huonw...
[23:56:33] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
