[00:29:24] *** Quits: nagisa (nagisa@moz-8t068g.static.zebra.lt) (Quit: off to sleep)
[00:46:36] *** Joins: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net)
[01:16:27] *** Joins: proc (proc@moz-os2240.dip0.t-ipconnect.de)
[01:47:08] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[02:00:26] *** Joins: brson (brson@moz-bi8.crj.56.172.IP)
[02:00:26] *** ChanServ sets mode: +qo brson brson
[02:18:54] *** Quits: blank_name (blank_name@moz-ms6nj1.mi.frontiernet.net) (Ping timeout: 121 seconds)
[02:38:17] *** Quits: kimundi (kimundi@moz-jppfl0.aq82.95ei.4fe2.2002.IP) (Ping timeout: 121 seconds)
[02:43:28] *** Joins: kimundi (kimundi@moz-79q5d9.pdi0.audv.4fe2.2002.IP)
[02:50:14] *** Joins: blank_name (blank_name@moz-ms6nj1.mi.frontiernet.net)
[03:05:16] *** Quits: proc (proc@moz-os2240.dip0.t-ipconnect.de) (Quit: Gotta eat my pizza)
[03:13:36] *** Quits: brson (brson@moz-bi8.crj.56.172.IP) (Ping timeout: 121 seconds)
[03:15:37] *** Joins: brson (brson@moz-i25.7vl.56.172.IP)
[03:15:37] *** ChanServ sets mode: +qo brson brson
[03:22:20] *** Quits: brson (brson@moz-i25.7vl.56.172.IP) (Ping timeout: 121 seconds)
[03:23:02] *** Joins: brson (brson@moz-i25.7vl.56.172.IP)
[03:23:02] *** ChanServ sets mode: +qo brson brson
[03:25:39] *** Joins: WindowsBunny1 (Peter@moz-vlal7g.east.verizon.net)
[03:26:39] *** Quits: WindowsBunny (Peter@moz-vlal7g.east.verizon.net) (Ping timeout: 121 seconds)
[03:33:32] *** Quits: WindowsBunny1 (Peter@moz-vlal7g.east.verizon.net) (Ping timeout: 121 seconds)
[03:42:00] *** Joins: WindowsBunny (Peter@moz-p21po0.east.verizon.net)
[03:56:35] *** Joins: aatch (james@moz-tr6.omt.54.210.IP)
[04:33:46] *** Quits: barosl (barosl@moz-tmp.qma.67.220.IP) (Quit: Leaving)
[04:36:32] *** Joins: barosl (barosl@moz-tmp.qma.67.220.IP)
[04:42:07] *** Quits: brson (brson@moz-i25.7vl.56.172.IP) (Ping timeout: 121 seconds)
[05:17:15] <Gankro> SimonSapin: https://crates.io/crates/raw-vec
[05:33:47] <SimonSapin> ChrisMorgan: I had checked that `cargo test` ran the doctests, but I just checked `cargo doc` output as well
[05:34:04] <SimonSapin> Gankro: nice! Time to rewrite smallvec, maybe
[05:37:44] <SimonSapin> ah, but #![feature]
[05:43:17] <ChrisMorgan> I really like the way SmallVec has made the inlinable size adjustable.
[05:46:16] <Gankro> SimonSapin: Yeah sorry, alloction is crazy unstable :(
[05:46:51] <SimonSapin> ChrisMorgan: that’s entirely stolen from bluss’s arrayvec :)
[05:47:33] <SimonSapin> Gankro: Ok, it can wait.
[05:47:47] *** Quits: aatch (james@moz-tr6.omt.54.210.IP) (Ping timeout: 121 seconds)
[05:48:05] <ChrisMorgan> RFC: bump mopa version from 0.2.0 to 1.0.0 with no changes to indicate guaranteed stability.
[05:48:07] <SimonSapin> I wonder how terrible it would be to rewrite raw_vec on top of forgotten vecs :)
[06:25:53] *** Quits: bluss (bluss@moz-rip51k.cust.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[07:05:07] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[08:26:34] *** Joins: killercup (killercup@moz-4u70ka.dip0.t-ipconnect.de)
[08:31:14] *** Quits: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net) (Connection closed)
[08:42:28] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[08:51:39] *** Joins: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net)
[09:14:34] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[09:24:57] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[09:50:22] *** Joins: nagisa (nagisa@moz-8t068g.static.zebra.lt)
[10:04:59] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[10:07:14] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[10:13:36] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Ping timeout: 121 seconds)
[10:27:58] *** Joins: bluss (bluss@moz-rip51k.cust.bredbandsbolaget.se)
[10:31:06] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[11:09:30] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[11:20:57] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[11:25:15] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[11:31:49] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Ping timeout: 121 seconds)
[11:42:49] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[12:09:25] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[12:23:29] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Connection closed)
[12:34:49] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[12:52:29] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[12:53:53] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[13:18:07] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[13:25:53] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[13:27:58] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[13:28:58] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[13:46:48] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[13:46:57] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[14:02:34] *** Quits: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net) (Quit: Leaving...)
[15:03:27] <SimonSapin> Is there a replacement for std::env::page_size? Servo’s using it
[15:04:08] <SimonSapin> for parsing /proc/self/statm
[15:04:14] <SimonSapin> in the memory profiler
[15:05:44] <bluss> servo devs should make sure they see & review all stabilization and deprecation changes
[15:06:40] <SimonSapin> bluss: what’s the communication channel to watch?
[15:07:06] <bluss> I don't know, seems like something servo and rust projects should decide on a better strategy for
[15:07:17] <bluss> this particular PR was https://github.com/rust-lang/rust/pull/26914
[15:07:25] <bluss> any servo people on the libs team?
[15:07:44] <SimonSapin> (looks…) no
[15:10:28] <SimonSapin> this one seems easy enough to replace, it’s a one-liner with libc
[15:10:35] <SimonSapin> and the servo usage is OS specific already
[15:11:48] <bluss> Gankro: weird test failure in tarpl examples https://github.com/rust-lang/rust/pull/27370
[15:13:19] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[15:15:47] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[15:23:26] *** Joins: dwins (dwins@moz-snlnmo.hr.cox.net)
[15:25:46] <SimonSapin> This is slightly unfortunate: https://github.com/servo/rust-url/commit/a3801885466ad5c9f6471aff52f1aa0c8f45b548
[15:27:28] <aturon> SimonSapin: yeah :-/
[15:27:43] <aturon> we have some plans to make this smoother in the future
[15:28:08] <aturon> in particular: deprecations tied to stable versions
[15:29:21] *** Quits: scott (uid25790@moz-gkpu6a.charlton.irccloud.com) (Connection closed)
[15:29:21] *** Quits: carllerche (sid50851@moz-l50env.charlton.irccloud.com) (Connection closed)
[15:29:21] *** Quits: spastorino (sid27384@moz-sbv1td.charlton.irccloud.com) (Connection closed)
[15:29:21] *** Quits: frewsxcv (sid86219@moz-99o8eo.charlton.irccloud.com) (Connection closed)
[15:29:22] *** Quits: reem (sid78397@moz-fjt2tg.charlton.irccloud.com) (Connection closed)
[15:29:40] <aturon> libs team: what do you think about announcing deprecations with an FCP, the same way we do for stabilization? I feel like we often hear about important uses of stuff only after we deprecate it (e.g. from Servo). cc acrichto SimonSapin 
[15:41:28] <Gankro> bluss: uh, is that the link you wanted?
[15:41:57] <acrichto> aturon: r+
[15:44:38] <Gankro> bluss: LMAO
[15:44:49] <Gankro> My section on data races is literally demonstrating data races
[15:44:54] <Gankro> as intended
[15:55:30] <Gankro> s/data race/race condition
[15:55:55] *** Quits: Gankro (sid71432@moz-g8qprj.ealing.irccloud.com) (Connection closed)
[16:03:08] <bluss> aturon: sounds good, and servo must decide to keep the eye out
[16:14:08] *** Quits: dwins (dwins@moz-snlnmo.hr.cox.net) (A TLS packet with unexpected length was received.)
[16:15:09] *** Joins: dwins (dwins@moz-snlnmo.hr.cox.net)
[16:21:29] *** Joins: scott (uid25790@moz-gkpu6a.charlton.irccloud.com)
[16:22:44] *** Joins: spastorino (sid27384@moz-sbv1td.charlton.irccloud.com)
[16:24:11] *** Quits: dwins (dwins@moz-snlnmo.hr.cox.net) (A TLS packet with unexpected length was received.)
[16:39:35] <huon> aturon: yes
[16:39:57] <huon> aturon: seems like obviously what we should be doing, in retrospect
[16:40:04] <aturon> yeah
[16:40:07] *** Joins: carllerche (sid50851@moz-l50env.charlton.irccloud.com)
[16:42:27] <sfackler> yeah, sounds good to me
[16:52:37] *** Joins: reem (sid78397@moz-fjt2tg.charlton.irccloud.com)
[16:53:53] *** Joins: Gankro (sid71432@moz-g8qprj.ealing.irccloud.com)
[16:56:12] *** Joins: dwins (dwins@moz-snlnmo.hr.cox.net)
[16:56:25] *** Joins: frewsxcv (sid86219@moz-99o8eo.charlton.irccloud.com)
[17:52:48] *** Quits: nagisa (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[18:05:30] *** Quits: dwins (dwins@moz-snlnmo.hr.cox.net) (A TLS packet with unexpected length was received.)
[18:05:40] *** Joins: dwins (dwins@moz-snlnmo.hr.cox.net)
[18:29:48] <acrichto> sfackler: ping
[18:30:10] <sfackler> pong
[18:30:39] <acrichto> sfackler: so I'm seeing this weird assertion in rust-postgres
[18:30:47] <acrichto> it popped up in the last few days for the crates.io tests
[18:30:50] <acrichto> (haven't updated postgres in ages)
[18:30:56] <acrichto> thread 'test::set_processed_true' panicked at 'assertion failed: self.depth == conn.trans_depth', /home/alex/.cargo/
[18:30:56] <acrichto> registry/src/github.com-0a35038f75765ae4/postgres-0.9.3/src/lib.rs:1203                                             
[18:31:02] <acrichto> wondering if you know how that might happen?
[18:31:37] *** Joins: nagisa (nagisa@moz-8t068g.static.zebra.lt)
[18:31:44] <sfackler> that should only happen if you have nested transactions and try to make a new transaction with the not-leaf transaction
[18:31:46] <sfackler> IIRC
[18:32:01] <acrichto> hmm
[18:33:16] <sfackler> oh wait no
[18:33:22] <sfackler> that's a debug assert in the destructor
[18:33:35] <sfackler> uh, you shouldn't be able to end up in that situation
[18:33:44] <sfackler> are you doing weird unsafe stuff with the lifetimes of your transactions?
[18:33:51] <acrichto> nah not any more
[18:33:57] <sfackler> https://github.com/sfackler/rust-postgres/blob/master/src/lib.rs#L1208
[18:34:08] <acrichto> er well let me check
[18:34:44] <acrichto> so yeah there's one place where I tarnsmute to Transaction<'static>
[18:36:22] <sfackler> are you using nested transactions?
[18:36:37] <sfackler> if not, it's probably a use-after-free with the Connection dropping before the Transaction
[18:36:57] <sfackler> if you turn logging on postgres up to DEBUG it'll dump all the queries it runs which might help figure it out
[18:37:10] <acrichto> I'm definitely using nested transactions, but the code path with Transaction<'static> isn't hit in this tet at all
[18:37:26] <acrichto> hm that didn't print anything...
[18:37:37] <acrichto> oh wait nvmd
[18:40:43] <acrichto> sfackler: so I see two `SAVEPOINT sp` but only one RELEASE
[18:41:08] <acrichto> sfackler: if I don't explicitly call finish() the test also passes...
[18:41:08] <sfackler> it sounds like the first transaction is being dropped before the nested one
[18:41:17] <sfackler> dropck bug maybe?
[18:41:25] <sfackler> that would be unfortunate
[18:41:33] <acrichto> this isn't anything weird going on though
[18:41:39] <acrichto> it's just vanilla scopes and whatnot
[18:41:50] <acrichto> I think the second one just isn't being dropped
[18:42:15] <acrichto> dropck bug sounds like it though
[18:42:18] <acrichto> b/c this happened on nightly recently
[19:02:08] *** Quits: dwins (dwins@moz-snlnmo.hr.cox.net) (A TLS packet with unexpected length was received.)
[19:12:39] *** Joins: dwins (dwins@moz-snlnmo.hr.cox.net)
[19:38:09] *** Quits: dwins (dwins@moz-snlnmo.hr.cox.net) (A TLS packet with unexpected length was received.)
[19:39:01] *** Joins: dwins (dwins@moz-snlnmo.hr.cox.net)
[19:40:09] *** Quits: dwins (dwins@moz-snlnmo.hr.cox.net) (A TLS packet with unexpected length was received.)
[19:41:11] *** Joins: dwins (dwins@moz-snlnmo.hr.cox.net)
[19:49:05] *** Quits: dwins (dwins@moz-snlnmo.hr.cox.net) (A TLS packet with unexpected length was received.)
