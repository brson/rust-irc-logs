[00:00:13] <cmr> that'd be fine I guess
[00:01:30] <acrichto> 2 snapshots down, 2 to go
[00:02:51] <Eridius> hrm, `pub type Foo = Bar` won't let me say Foo::static_method()
[00:03:01] <Eridius> that's quite annoying, since Foo and Bar are in fact the same type
[00:03:13] <cmr> Eridius: it's intentional iirc
[00:03:20] <Eridius> cmr: why?
[00:03:26] *** Joins: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au)
[00:03:29] <cmr> Eridius: ask pcwalton
[00:03:34] <Eridius> `let f: Foo = Bar::new()` works, so why can't I just say `let f = Foo::new()`?
[00:03:49] <Eridius> this means I have to go back to using a `pub use` for my Path rewrite instead of a typedef
[00:04:01] <pcwalton> oh, it's because pub uses are resolved earlier than typedefs
[00:04:15] <pcwalton> you might get a lot of cyclic imports otherwise
[00:04:19] <Eridius> :/
[00:04:43] <pcwalton> I mean, it's not something I *like*, and it might be fixable
[00:04:58] <pcwalton> I'd take a patch to fix it that didn't regress other resolve things
[00:05:46] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[00:05:46] <ghrust> 01[13rust01] 15brson tagged 060.8 at 14b5ca800: 02http://git.io/WKEylQ
[00:05:46] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[00:06:12] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[00:06:12] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/Gvgh3Q
[00:06:12] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[00:06:12] <[o__o]>  abstract common patterns in AST formatters: https://github.com/mozilla/rust/issues/3
[00:06:39] <cmr> erm
[00:06:59] <cmr> why is [o__o] talking :|
[00:07:07] <Eridius> erm, I can't say `pub use PosixPath = posix::Path` because it says it thinks posix is an unresolved import
[00:07:23] <Eridius> because I have to put the `pub mod posix` after the use
[00:07:44] <Eridius> oh wait, self::posix::Path should work
[00:10:29] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[00:11:04] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Max SendQ exceeded)
[00:11:13] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[00:11:13] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/7CNEeQ
[00:11:13] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[00:11:15] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[00:11:15] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/OE-5LA
[00:11:15] <ghrust> 13rust/06auto 14eb2b25d 15Alex Crichton: Refactor the logging system for fewer allocations...
[00:11:15] <ghrust> 13rust/06auto 141434b4b 15bors: auto merge of #9261 : alexcrichton/rust/logging, r=huonw...
[00:11:15] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[00:12:08] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[00:29:40] <brson> cmr: that's kind of creepy!
[00:30:55] <Eridius> who's [o__o]?
[00:31:15] <mcpherrin> Eridius: the botbot.me logger
[00:31:20] <Eridius> ah
[00:52:48] <Luqman> 44 files changed, 559 insertions(+), 571 deletions(-)
[00:53:04] <Luqman> all to make building_library just bool instead of @mut bool
[00:53:14] <strcat> lol
[00:53:39] <Luqman> well, it also had the sideeffect of not passing around @Session
[00:54:01] <Luqman> everything wanted it's own session :(
[00:54:05] <Eridius> why is os::fill_charp_buf public? The only use in the entire rust codebase is further down in os
[00:54:23] <Luqman> you could do: bcx.sess() or bcx.ccx.sess or bcx.ccx.tcx ...
[00:54:46] <acrichto> and if you're brave, bcx.fcx.ccx.tcx.sess!
[00:54:59] <acrichto> Eridius: lots of stuff is public when it probably shouldn't be
[00:55:24] <Luqman> acrichto: yea, i just let tcx have it since they all have access to tcx
[00:55:25] <Eridius> acrichto: I want to convert this over to Option<CString>, and I'm highly tempted to just make it non-pub. Issue #2620 exists to move it to str, but I think that should just be rejected
[00:56:34] <Eridius> incidentally, this also means that os::self_exe_path() will return None if the path is >= 1000 bytes, which is crummy
[00:56:36] <acrichto> Eridius: I have a feeling that the CString work kinda supercedes that function
[00:57:34] <Eridius> acrichto: the whole point seems to be to stack-allocate a buffer, fill it, then convert to ~str. It's largely just a convenience method
[01:26:42] <Eridius> huh, libc only has sysctl for freebsd
[01:27:01] <Eridius> or rather, it only has the sysctl MIB constants
[01:37:06] *** Quits: steveklabnik (steveklabn@moz-389D91E.public.wayport.net) (Ping timeout)
[01:39:18] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[01:39:18] <cmr> Eridius: they're mostly added as-needed
[01:40:01] *** Quits: pcwalton (pcwalton@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: pcwalton)
[01:41:12] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[01:41:12] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/OE-5LA
[01:41:12] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[01:42:37] *** Joins: sully (sully@moz-388398CC.leptoquark.net)
[01:46:13] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[01:46:13] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/Iy7Qlw
[01:46:13] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[01:46:14] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[01:46:14] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/frjULA
[01:46:14] <ghrust> 13rust/06auto 1488272a4 15Brian Anderson: Add 'continue' as a synonym for 'loop'
[01:46:14] <ghrust> 13rust/06auto 14c1d6429 15Brian Anderson: Add 'continue' keyword to emacs, vim, gedit, kate
[01:46:15] <ghrust> 13rust/06auto 14a94158c 15bors: auto merge of #9504 : brson/rust/continue, r=alexcrichton
[01:46:17] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[01:50:56] <acrichto> resolve is making me hungry, so many ribs
[02:07:54] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[02:10:44] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[02:11:20] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Max SendQ exceeded)
[02:28:54] <Eridius> brson: I'm currently trying to port libstd over to my new Path, and rt::io::support::PathLike has me concerned
[02:29:17] <Eridius> brson: the new PosixPath isn't necessarily utf-8, so you can't always convert it to a str
[02:29:50] <strcat> isn't a windows path not necessarily a str too? since it's UCS2, but not necessarily valid UTF-16
[02:30:13] <Eridius> strcat: correct. I'm ignoring that though, since Windows paths are too screwy anyway
[02:30:19] <strcat> ah ;p
[02:30:27] <Eridius> or rather, UCS2 is a subset of UTF-16, so it can be converted to astr
[02:30:29] <Eridius> *a str
[02:30:44] <strcat> Eridius: but UCS2 will allow surrogates, I think
[02:30:46] <Eridius> the only problem is converting a str into a WindowsPath, and I don't really care about handling supplementary plane characters
[02:30:52] <strcat> in weird ways
[02:30:56] <Eridius> strcat: I thought the surrogate chars were Private Use in UCS2?
[02:31:25] <strcat> Eridius: which means it will let people put them in paths afaik
[02:31:56] <Eridius> strcat: it's technically possible to put a supplementary plane char in one of my WindowsPaths. That can be fixed by adding an extra check in from_str
[02:32:28] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[02:32:31] <Eridius> just as how PosixPath uses a ~[u8] but ensures you cannot construct one with an embedded NUL, WindowsPath can continue to use ~str and just rule out surrogate chars. I just don't care enough to do that
[02:32:46] <Luqman> oh resolve, using fmt! and then to_managed which just gets passed to another fmt! ...
[02:32:56] <strcat> Eridius: what I mean is that I think NTFS actually allows them
[02:33:06] <strcat> anyway I don't really care about windows ;p
[02:33:15] <Eridius> strcat: I'm confused. UCS2 doesn't have surrogate pairs. Any character in the surrogate pair range is technically illegal in UCS2
[02:33:32] <Eridius> so if Windows paths are UCS2, then Windows paths should not be able to have surrogate pairs, and therefore cannot have supplementary plane chars
[02:33:44] * strcat didn't realize it would really be treated as illegal
[02:34:03] <Eridius> I believe they're supposed to be illegal in UCS2
[02:34:40] *** Quits: bytewise (bytewise@moz-4A801D04.unitymediagroup.de) (Quit: Leaving)
[02:34:58] <Eridius> anyway, lets see if I can convert PathLike to have .path_as_vec() instead of .path_as_str(). I wonder how severe a change this is?
[02:35:09] <Eridius> alternatively, I could just file an issue saying that needs to be converted
[02:35:30] <Eridius> I'll do the latter
[02:37:22] *** Quits: zz_kimundi (kimundi@moz-822AC7D.dip0.t-ipconnect.de) (Ping timeout)
[02:39:31] <klutzy> eh.. windows uses ucs2 not utf16 for paths?
[02:39:42] <cmr> klutzy: yep
[02:40:09] <strcat> klutzy: windows still mostly uses ucs2 internally and only theoretically has utf16 support
[02:40:22] <strcat> even simple programs like notepad are still broken with unicode
[02:40:24] * strcat shrugs
[02:40:32] <strcat> java ecosystem is like that too
[02:40:41] *** Joins: zz_kimundi (kimundi@moz-221F72D2.dip0.t-ipconnect.de)
[02:40:42] *** zz_kimundi is now known as kimundi
[02:40:49] <strcat> just legacy reasons, yay backwards compatibility ;p
[02:41:17] <strcat> and js is ucs2, essentially
[02:46:06] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Connection reset by peer)
[02:46:08] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Connection reset by peer)
[02:46:10] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:46:15] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:59:44] <klutzy> I'm confused; I'm able to create "\U10480.txt" on explore and open it with notepad.
[03:00:58] <strcat> klutzy: NTFS is UCS2, as are the internal APIs - externally, it will try to treat it as UTF-16 (the notepad problems are mostly with zero-width chars in the text)
[03:01:11] <strcat> not in the filename
[03:01:15] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[03:01:15] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/frjULA
[03:01:15] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[03:01:32] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[03:01:32] <ghrust> 01[13rust01] 15alexcrichton fast-forwarded 06snap-stage3 from 1448499c7 to 141434b4b: 02http://git.io/OE-5LA
[03:01:32] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[03:02:51] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[03:03:06] <klutzy> strcat: isn't it that ntfs accepts arbitrary u16 array?
[03:03:08] <klutzy> oops
[03:06:10] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[03:06:10] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/FdOl6g
[03:06:10] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[03:06:11] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[03:06:11] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/r-LYIQ
[03:06:11] <ghrust> 13rust/06auto 14d798e00 15kud1ing: Enclose code in documentation in backticks
[03:06:11] <ghrust> 13rust/06auto 14d964f79 15kud1ing: base64: backticks for code in documentation
[03:06:12] <ghrust> 13rust/06auto 14c873216 15kud1ing: bigint: backticks for code in documentation
[03:06:14] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[03:08:07] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:08:15] <brson> Eridius: PathLike can probably convert to [u8] instead of str
[03:08:35] *** Joins: pcwalton (pcwalton@moz-BE33DA21.fw1.sfo1.mozilla.net)
[03:08:35] *** ChanServ sets mode: +ao pcwalton pcwalton
[03:08:41] <Eridius> brson: yeah I'm going to file an issue about that later
[03:08:52] <Eridius> there's other spots in rt that assume strs that will need to be modified, I think, but PathLike is the big one
[03:25:54] <Eridius> hrm, run::process_status() and friends really should take ~[u8] args instead of ~str
[03:26:02] <Eridius> (or rather, Vec instead of Str, if I could ever get my patch to land on windows)
[03:26:11] <Eridius> Vec<u8> that is
[03:33:47] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[03:47:21] <tikue_> acrichto: your privacy fixes address the fact that cross crate privacy was nonexistent before?
[03:47:34] <acrichto> tikue_: yes
[03:47:49] <acrichto> although it ended up breaking a lot because it should have been pub when it wasn't
[03:48:25] <tikue_> acrichto: i remember strcat saying something about the fix for this causing some kind of code bloat but I don't remember the specificsâ€¦do you know what I'm referring to?
[03:48:43] <sfackler> speaking of that, am I right in thinking that the contents of the {Buf,Mem}{Reader,Writer} structs should be private?
[03:49:27] <strcat> tikue_: the code bloat is already there
[03:49:59] <tikue_> strcat: i was curious what the ramifications are, then. what's the state of that problem?
[03:50:20] <strcat> tikue_: every single function in a library that's not an instantiation of a generic is marked external
[03:50:36] <strcat> so it gets a symbol, and cannot be optimized by deadargelim/argpromotion or given the fastcc calling convention
[03:50:58] <strcat> and dead code can't be eliminated, for example after a private function is inlined in 2 places it can't be removed even if it's not used elsewhere
[03:52:07] <tikue_> strcat: are there any possible long-term fixes for this, or is it something that'll have to be considered more?
[03:53:09] <strcat> https://github.com/mozilla/rust/issues/9495
[03:53:28] <strcat> tikue_: I've reported lots of I-slow things (and fixed a lot too! ;p)
[03:54:01] <strcat> anyway, in a non-library rustc now marks all functions as internal
[03:54:09] <strcat> so if you don't use libraries, there's no problem ;p
[03:54:12] <dbaupp> acrichto: fwiw, I did investigate the regression in august a little bit: https://github.com/mozilla/rust/issues/8589
[03:54:18] <dbaupp> (mem regression)
[03:54:41] <tikue_> strcat: well, what exactly counts as a library? i have a two-file program and main.rs has `mod lib;`
[03:54:52] <acrichto> dbaupp: oh I forgot about that!
[03:55:01] <strcat> tikue_: no library, then
[03:55:08] <strcat> tikue_: library == .so file, compiled with --lib
[03:55:13] <strcat> for example, libstd and libextra
[03:55:25] <strcat> every single function in them is marked external
[03:55:35] <strcat> except generic instantiations...
[03:55:42] <strcat> and some oddball things like glue
[03:55:48] <strcat> intrinsics
[03:56:27] <tikue_> ah, so any use of std or extra causes _everything_ to be marked external?
[03:57:26] <strcat> no
[03:57:37] <strcat> everything in libstd/libextra is marked external
[03:57:54] <strcat> it doesn't change the fact that any functions declared by your binary will be marked internal now
[03:58:02] <tikue_> ok
[03:58:45] <tikue_> that doesn't sound awful then
[04:29:29] *** Quits: tikue_ (tkuehn@B489EA5.B9B3942C.689607DE.IP) (Quit: tikue_)
[04:51:14] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[04:51:14] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/r-LYIQ
[04:51:14] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[04:54:17] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[04:55:21] *** Quits: pcwalton (pcwalton@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: pcwalton)
[04:56:15] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[04:56:15] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/VFv21A
[04:56:15] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[04:56:17] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[04:56:17] <ghrust> 01[13rust01] 15bors pushed 9 new commits to 06auto: 02http://git.io/Fn3C3g
[04:56:17] <ghrust> 13rust/06auto 1480e0dc2 15Erick Tryzelaar: std and rustc: Convert users of c_str to use .with_c_str
[04:56:17] <ghrust> 13rust/06auto 14e2d7d3c 15Erick Tryzelaar: std: removed some warnings in tests.
[04:56:17] <ghrust> 13rust/06auto 146a22f52 15Erick Tryzelaar: std: implement Container for CString
[04:56:19] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[04:56:26] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[05:00:46] <erickt1> wow, that was fast. go bors!
[05:01:53] *** Joins: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP)
[05:07:22] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[05:07:33] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[05:09:34] <dbaupp> erickt1: ah, I was too slow with my comment :(
[05:11:14] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[05:11:14] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14e9dc7f9 to 14fcd3776: 02http://git.io/N3iJvQ
[05:11:14] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[05:11:16] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[05:11:16] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/LqfYlg
[05:11:16] <ghrust> 13rust/06auto 14d96dfc9 15klutzy: syntax: Fix wrong span on ObsoleteEmptyImpl
[05:11:16] <ghrust> 13rust/06auto 14a56e2ee 15klutzy: syntax: Fix wrong span on ObsoleteMode
[05:11:16] <ghrust> 13rust/06auto 14fc44a9c 15klutzy: syntax: Fix wrong span on trait fn visibility...
[05:11:18] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[05:11:29] <dbaupp> oh, it's ok
[05:11:43] <erickt1> lol
[05:11:48] <erickt1> dbaupp: I'll fix it :)
[05:12:17] <erickt1> saved by a llvm rebuild
[05:19:38] <erickt1> r? https://github.com/mozilla/rust/pull/9250
[05:19:46] <erickt1> it's separate from my last PR
[05:21:19] <erickt1> ack, already unmergable
[05:22:38] <dbaupp> erickt1: I'm willing to r+ it, but is it "approved" generally?
[05:23:15] <erickt1> dbaupp: not clear. I'm happy just for you to say "I'd give it a r+ if it gets consensus"
[05:23:38] <erickt1> I've been too busy this week to get an opinion from everyone during the day :(
[05:23:54] <tikue> erickt1: strong r+ here fwiw ;D
[05:23:59] <erickt1> :)
[05:24:02] <tikue> it'd clean up servo's profiler code significantly
[05:24:29] <erickt1> tikue: awesome!
[05:26:23] <dbaupp> erickt1: ok, I'll comment to that effect
[05:33:02] <erickt1> dbaupp: on the CStr PR, what if I did this? https://gist.github.com/erickt/6724540
[05:33:24] <erickt1> dbaupp: that still is using unsafe, but's at least using a lot less code
[05:34:36] <dbaupp> erickt1: don't we need the null terminator?
[05:34:51] <erickt1> dbaupp: it gets added in with_c_str_unchecked
[05:35:34] * dbaupp looks
[05:35:43] <erickt1> although we are checking the length twice, which is a little redundant
[05:39:01] <dbaupp> erickt1: hm, I feel like we could just have an internal function `fn with_c_str_maybe_small(s: &str, check_for_nulls: bool, &fn(..) -> ..)`
[05:39:14] <erickt1> dbaupp: that's what I'm adding
[05:39:16] <erickt1> :)
[05:39:32] <dbaupp> cool :)
[05:41:30] <dbaupp> (nonetheless I do think we should avoid the pointer memcpys)
[05:45:11] <erickt1> dbaupp: good? https://gist.github.com/erickt/6724600
[05:45:42] <erickt1> assuming I fixed all the `self` references :)
[05:46:45] <dbaupp> erickt1: does check_for_null need a mutable buffer?
[05:46:48] <dbaupp> weird
[05:47:21] <dbaupp> oh, i see
[05:47:27] <erickt1> dbaupp: yeah, it possibly replaces chars
[05:47:38] <dbaupp> yeah, cool
[05:49:00] <dbaupp> erickt1: but yes, that looks fine to me
[05:49:44] <erickt1> dbaupp: thanks. assuming my tests pass I'll push it up in a sec 
[05:53:41] <erickt1> dbaupp: r? https://github.com/mozilla/rust/pull/9352
[05:57:56] <dbaupp> erickt1: r+
[05:59:09] <erickt1> thanks!
[06:05:26] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[06:07:08] *** Quits: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP) (Ping timeout)
[06:09:46] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[06:17:05] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[06:46:14] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[06:46:14] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/LqfYlg
[06:46:14] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[06:51:13] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[06:51:14] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/4Z8DWg
[06:51:14] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[06:51:15] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[06:51:15] <ghrust> 01[13rust01] 15bors pushed 10 new commits to 06auto: 02http://git.io/s42mYw
[06:51:15] <ghrust> 13rust/06auto 144834661 15Erick Tryzelaar: std and rustc: Convert users of c_str to use .with_c_str
[06:51:15] <ghrust> 13rust/06auto 140bdc99d 15Erick Tryzelaar: std: removed some warnings in tests.
[06:51:16] <ghrust> 13rust/06auto 142a9e763 15Erick Tryzelaar: std: implement Container for CString
[06:51:18] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[06:56:20] *** Quits: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Bye!)
[06:56:28] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[07:08:07] *** jack is now known as jack|zzz
[07:11:48] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[07:32:35] *** flaper87|afk is now known as flaper87
[08:13:33] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Ping timeout)
[08:15:00] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: sleep)
[08:31:18] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[08:31:18] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/s42mYw
[08:31:18] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[08:36:16] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[08:36:16] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/ppPmgQ
[08:36:16] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[08:36:21] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[08:36:21] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/slKlmA
[08:36:21] <ghrust> 13rust/06auto 14a4b7474 15Branimir: Fix ICE caused by my previous patch, that is, if super trait had more...
[08:36:21] <ghrust> 13rust/06auto 14afbc242 15bors: auto merge of #9527 : bmaxa/rust/master, r=alexcrichton...
[08:36:21] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[09:10:14] *** Seld is now known as Seldaek
[09:33:59] *** Quits: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au) (Ping timeout)
[09:34:19] *** Joins: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au)
[09:45:37] *** Quits: olsonjeffery (pf@B8927AE1.CFEFA148.239A1A9E.IP) (Ping timeout)
[09:47:35] *** Joins: olsonjeffery (pf@B8927AE1.CFEFA148.239A1A9E.IP)
[09:51:13] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[09:51:14] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/slKlmA
[09:51:14] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[09:56:14] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[09:56:14] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/tbC2NA
[09:56:14] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[09:56:18] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[09:56:18] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/56jLZQ
[09:56:18] <ghrust> 13rust/06auto 14c504241 15Daniel Micay: remove no-op make_take_glue cases
[09:56:18] <ghrust> 13rust/06auto 14ba4129c 15bors: auto merge of #9534 : thestinger/rust/take, r=alexcrichton
[09:56:18] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[10:08:16] *** Quits: doomlord_ (servitor@moz-2BA2D1DA.range86-184.btcentralplus.com) (Connection reset by peer)
[10:11:13] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[10:11:13] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14ba4129c to 14afbc242: 02http://git.io/N3iJvQ
[10:11:13] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[10:11:15] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[10:11:15] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/mtEavw
[10:11:15] <ghrust> 13rust/06auto 146979418 15Alex Crichton: Remove the notion of an "unknown format"...
[10:11:15] <ghrust> 13rust/06auto 14dc4815c 15bors: auto merge of #9535 : alexcrichton/rust/no-format-default, r=thestinger...
[10:11:15] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[10:11:45] *** Joins: doomlord_ (servitor@moz-2BA2D1DA.range86-184.btcentralplus.com)
[10:12:02] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[10:12:38] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Max SendQ exceeded)
[10:19:37] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[10:20:31] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[10:31:14] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[10:31:14] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14dc4815c to 14afbc242: 02http://git.io/N3iJvQ
[10:31:14] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[10:31:21] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[10:31:21] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/xId6dg
[10:31:21] <ghrust> 13rust/06auto 14c3e4e06 15Daniel Micay: remove type_use...
[10:31:21] <ghrust> 13rust/06auto 14ae8a2ff 15bors: auto merge of #9538 : thestinger/rust/type_use, r=pcwalton...
[10:31:21] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[10:36:07] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[10:44:08] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[11:46:14] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[11:46:14] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/xId6dg
[11:46:14] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[11:51:14] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[11:51:14] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/bBcR0w
[11:51:14] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[11:51:16] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[11:51:16] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/n8glxA
[11:51:16] <ghrust> 13rust/06auto 14c429c7c 15Alex Crichton: rustdoc: Fix broken struct field search links...
[11:51:16] <ghrust> 13rust/06auto 14ca697d3 15Alex Crichton: rustdoc: Generate documentation for foreign items...
[11:51:16] <ghrust> 13rust/06auto 146a277dc 15Alex Crichton: rustdoc: Strip implementations of private traits...
[11:51:18] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[11:51:47] <pnkfelix> hmm, why did PR 9538 close Issue 6971?  Was that a typo from strcat ?
[11:52:41] <pnkfelix> or was the type_use code the reason that we were monomorphizing the destructors incorrectly?  I guess its time for me to write a test case...
[11:52:51] <dbaupp> I'd guess it's the former
[11:53:14] * pnkfelix doesn't know what type_use even is ...
[11:53:29] <dbaupp> pnkfelix: also, https://github.com/mozilla/rust/issues/1772 (re the attribute syntax) shebangs actually work now
[11:53:36] <pnkfelix> It does seem like the two are intertwined...
[11:53:50] * dbaupp was extremely surprised when he discovered this (from a go mailing list thread, in fact)
[11:54:51] <pnkfelix> dbaupp: â€¦ wait, are you noting this point about she-bang because of the discussion about changes to inner attribute syntax?
[11:55:02] <dbaupp> pnkfelix: yeah, just coincidentally
[11:55:27] <dbaupp> I'm currently researching how languages that don't use # as a line comment handle shebangs
[11:55:35] <pnkfelix> dbaupp: okay.  We'd still need to deal with the ambiguity in some way
[11:55:37] <dbaupp> (and there doesn't appear to be many)
[11:55:39] <dbaupp> yeah
[11:55:48] <pnkfelix> dbaupp: I think Scheme handled this in a particularly ugly way for R6RS
[11:56:49] <pnkfelix> dbaupp: because '#' is usually an initial character for one of a number of special constants or forms.  E.g. booleans #t #f, graph syntax #1=(a #1#), character #\a
[11:57:45] <pnkfelix> dbaupp: http://www.r6rs.org/final/html/r6rs-app/r6rs-app-Z-H-6.html#node_sec_D.2.1
[11:57:48] <dbaupp> pnkfelix: ah, so they ha{d,ve} to specialcase the first line a lot?
[11:58:10] <pnkfelix> dbaupp: well, actually, I don't think I minded how they specified the handling of the first line
[11:58:24] <dbaupp> yeah, it seems reasonable
[11:58:46] <pnkfelix> dbaupp: I think my problem may have been in how Will Clinger decided to deal with this requirement in the context of Larceny
[11:59:00] * dbaupp has no context at all
[11:59:25] <pnkfelix> dbaupp: PLT Racket has a nice hack where, I think, #!foo is synonymous with #lang foo
[11:59:47] <pnkfelix> dbaupp: because their environment is designed to support having each module written in a different language
[12:00:27] <pnkfelix> or maybe that was just a special case for #!r6rs.  Not sure.
[12:00:27] <dbaupp> yeah, it's neat
[12:01:21] <dbaupp> (the environment is neat, I didn't know about the synonym)
[12:01:30] <pnkfelix> dbaupp: (because #lang foo is yet again another shorthand, where the whole file gets wrapped in (module <filename> lang   <filecontents>)
[12:01:51] <pnkfelix> dbaupp: Yes I'm hoping at some point to make a Rust language level for PLT Scheme
[12:01:59] <pnkfelix> oops, I meant PLT Racket
[12:02:35] <pnkfelix> dbaupp: but only after we are generating our own parser from a formal grammar that I can use as the basis
[12:04:39] <dbaupp> in many ways, I think the r6rs spec for shebangs is good. (that is, just ignore the first line if it matches /#![\/ ]/.)
[12:06:47] <pnkfelix> I think a reason that Will might have objected to it, is that he did not want to treat files as special standalone entities
[12:07:25] <pnkfelix> e.g. I think he wanted the same behavior when you read a concatenated series of files from an input port as if you had loaded each of them in order separately
[12:07:49] <pnkfelix> and if you treat the first line of a file as a special thing, then of course concatenating them is going to break stuff.
[12:08:03] <flaper87> +1 for r6rs spec!
[12:08:19] <pnkfelix> but that's Scheme, not Rust.  We already treat the ordering of items in a file as very very speical
[12:08:43] <pnkfelix> (i.e. there's very little chance that concatenating the lines of a Rust source file will itself yield a working source file)
[12:09:44] <pnkfelix> flaper87: the reason not to use the R6RS spec as is, is because we want to switch our  inner attribute syntax to look like `#!inner(attribute);` instead of `#inner(attribute);`
[12:10:08] <dbaupp> yep; I could imagine that foo.rs: `#! doc(hidden)\nfn foo() { ... }` would be annoying (i.e. the attribute accidentally disappearing)
[12:10:18] <dbaupp> (as brson(?) said on the issue)
[12:10:21] <flaper87> pnkfelix: mmh, I didn't know that, is there an issue for that? I'd like to `watch` it
[12:10:33] <pnkfelix> flaper87: but the proposal on the table is to speculatively attempt, if it matches #!, to parse the start of the file as if  it holds an inner attribute. If the attempt fails, then ignore the first liune
[12:10:36] <flaper87> that could be a real mess
[12:10:39] <pnkfelix> flaper87: yeah, give me a sec to get the issue number
[12:10:47] <dbaupp> pnkfelix: https://github.com/mozilla/rust/issues/2569
[12:10:53] <flaper87> dbaupp: pnkfelix danke
[12:10:55] <dbaupp> *flaper87
[12:12:13] <flaper87> pnkfelix: dbaupp that proposal - ignoring the first line if it doesn't match an inner attribute - sounds reasonable to me!
[12:13:52] <bstrie> pnkfelix: haven't read the scrollback, is this about having shebangs in rust files?
[12:13:57] <bstrie> because we do already allow that
[12:14:36] <dbaupp> bstrie: making it work with a new attribute syntax
[12:14:44] <bstrie> I would love a new attribute syntax
[12:14:47] <dbaupp> (is what we're discussing, kinda)
[12:14:48] <pnkfelix> dbaupp: look at #2569
[12:14:52] <bstrie> part of me has been holding off on proposing one though
[12:14:54] <pnkfelix> bstrie: I meant
[12:14:55] <bstrie> because
[12:15:03] <pnkfelix> bstrie: I meant you should look at #2569
[12:15:08] <bstrie> part of me wants to repurpose @ once it GC is in a library
[12:15:21] <bstrie> so that we can have attributes that look like @foo
[12:15:28] <bstrie> or @bar(baz)
[12:15:35] <pnkfelix> bstrie: â€¦ why?
[12:16:02] <bstrie> pnkfelix: because I think the @ looks a little nicer than the #, and because it's familar to python and java folks
[12:16:06] <bstrie> but really
[12:16:12] <bstrie> all I care about is getting rid of the brackets
[12:16:24] <bstrie> #foo would already be a 1000x win over #[foo]
[12:16:28] <bstrie> so much lighter
[12:16:31] <pnkfelix> bstrie: I think that will happen with #2569 regardless of anything else
[12:16:38] <pnkfelix> bstrie: since brson has pretty much said it will
[12:16:42] <bstrie> ok good :)
[12:16:44] <dbaupp> bstrie: (according to the description of 2569 you've already proposed a new one :P )
[12:16:48] <bstrie> been waiting for this for years now
[12:16:58] <bstrie> like I said :P
[12:17:13] <flaper87> yeah [] are pretty annoying! 
[12:17:58] <bstrie> I was also going to propose that we get rid of the #[foo="bar"] form and standardize on #[foo("bar")]
[12:18:05] <dbaupp> can we implement it now? (possibly disabling shebangs temporarily, since I don't imagine many people will be using them (?))
[12:18:12] <dbaupp> bstrie: (that currently doesn't parse, fwiw)
[12:18:29] <bstrie> dbaupp: what doesn't?
[12:18:43] <dbaupp> bstrie: foo("bar")
[12:18:48] <bstrie> news to me
[12:18:51] <bstrie> why not?
[12:18:56] <pnkfelix> dbaupp: You mean now that 0.8 is out?  Yeah I imagine we can implement anything we want.
[12:19:11] <dbaupp> bstrie: grammar is attr = ident | ident(attr*) | ident=literal
[12:19:24] <dbaupp> (literal is bool, string, numbers iirc.)
[12:19:43] <bstrie> not familiar with the exact grammar of attributes
[12:19:44] <dbaupp> pnkfelix: yeah, and given the degree of approval from brson on the issue
[12:19:56] <dbaupp> bstrie: that^ is it :P
[12:19:57] <bstrie> anyway, I think we should have just one form, and I think the () is more flexible than the =
[12:21:15] <dbaupp> I think it would look weird writing (e.g.) cfgs with it: #cfg(target_word_size("64")) rather than #cfg(target_word_size=64)
[12:21:17] <pnkfelix> dbaupp: hmm, I don't think I realized that you could keep nesting them
[12:21:22] <dbaupp> (actually, that's not too bad)
[12:21:39] <bstrie> #cfg(target_word_size(64))
[12:22:01] <bstrie> the = would be fine if attributes had any kind of persistent state
[12:22:08] <dbaupp> pnkfelix: yeah, arbitrarily, but I think the deepest in common use would be `#[cfg(not(foo))]`
[12:22:14] <bstrie> like if in one attribute you could do #foo=bar and then later on #cfg(foo)
[12:22:18] <bstrie> but they don't
[12:22:21] <pnkfelix> oh of course, I had forgotten about good old "not"
[12:22:22] <bstrie> and I'm not proposing that they do
[12:22:49] <dbaupp> bstrie: yeah, I agree that might be a nice simplification, assuming it works grammar-wise
[12:23:57] <dbaupp> pnkfelix: (it's not that good: `cfg(not(not(foo)))` checks for `--cfg 'not(foo)' rather than being equivalent to `cfg(foo)`)
[12:24:36] <pnkfelix> bstrie: I have no opinion on whether to get rid of `ident=literal` variant, but I think we should not attempt that change until we've landed one of the proposals we've already settled on for #2569
[12:25:00] <pnkfelix> bstrie: (though I guess some would argue that if we're going to change, we should only change it once...)
[12:25:39] <flaper87> pnkfelix: yeah, I think we should start moving forward less and more atomic backward incompatible changes, IMHO
[12:25:51] <dbaupp> the attribute syntax change will be an interesting bootstrap
[12:26:15] <bstrie> this is a backward incompatible change that has been a long time coming
[12:26:19] <bstrie> it's not like this is out of left field
[12:26:26] <pnkfelix> flaper87: sorry, i could not parse your statement.  "less and more atomic" ?
[12:26:27] <bstrie> been talking about this since literally 0.2
[12:27:21] <flaper87> pnkfelix: erm sorry about that, I meant to say that I would rather change it once than splitting the change in 2 different commits / versions
[12:27:27] <flaper87> hope that makes more sense :D
[12:27:27] <bstrie> I also feel like getting rid of the = form makes the bracket-less attributes a bit more viable
[12:27:48] <bstrie> I realize that #foo=bar is easy enough to parse, but I feel like it's just a little bit harder to *read* than #foo(bar)
[12:27:59] * dbaupp agrees
[12:28:04] * flaper87 nods
[12:28:14] <dbaupp> btw, what would #foo\n(bar) do?
[12:28:16] <pnkfelix> its not currently #foo=bar though, its #foo="bar"
[12:28:17] <bstrie> especiall since we allow attributes on the same line as their following function
[12:28:24] <dbaupp> be the same as `#foo(bar)` ?
[12:28:49] <pnkfelix> (or rather, its currently `#[foo="bar"]`, and it would become, for me, `#foo="bar";`)
[12:29:06] <bstrie> I've been avoiding the semicolon issue :P
[12:29:17] <bstrie> I really hate that they're significant in attributes
[12:29:29] <flaper87> o.0 are they? 
[12:29:29] <bstrie> it's long been on my list as the Second Worst Thing About Rust
[12:29:31] <pnkfelix> shoot, I screwed up again
[12:29:33] * flaper87 didn't know that
[12:29:41] <pnkfelix> It would become `#!foo="bar";`
[12:29:41] <flaper87> I realize I still need to do more rust
[12:29:47] <bstrie> blehhhh
[12:30:02] <bstrie> let's not add the semicolons to attributes if we can avoid it :)
[12:30:34] <bstrie> it would be like forcing you to end line comments in semicolons
[12:30:37] <dbaupp> flaper87: internal attributes are terminated by a `;`
[12:30:39] <pnkfelix> I continue to assert that its good to have redundant indicators at both the the start and the end of inner attributes
[12:30:43] <bstrie>  // add one to this integer;
[12:31:28] <dbaupp> flaper87: e.g. https://github.com/mozilla/rust/blob/master/src/libstd/ops.rs#L13 is attached to the std::ops module, *not* the next item (trait Drop)
[12:32:16] <flaper87> dbaupp: oooohhhhhhhh, good point! TBH, I completely ignored that
[12:32:20] <flaper87> dbaupp: thanks
[12:33:04] <bstrie> if we have to have semicolons on all attributes, I'll be grumpy but it's still fine as long as they're not *significant*
[12:33:10] <flaper87> would it be too difficult to check if the attribute is followed by an empty line?
[12:33:18] <flaper87> instead of having `;`s ?
[12:33:42] <bstrie> flaper87: currently we don't have any whitespace significance in rust
[12:33:51] <bstrie> we've been avoiding that
[12:34:06] <bstrie> it's entirely legal right now to do `#[test] fn foo() {`
[12:34:12] <bstrie> which I like
[12:34:20] * dbaupp thinks #test fn foo() { ... } looks peculiar
[12:34:22] <bstrie> I want it to become `#test fn foo() {`
[12:34:22] <pnkfelix> bstrie: of course you meant to say "all *inner* attributes", right?
[12:34:31] <flaper87> I like that as well
[12:34:55] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[12:34:57] <bstrie> pnkfelix: in which context?
[12:35:16] <pnkfelix> bstrie: when you said "if we have to have semicolons on all attributes â€¦"; it of course does not apply to outer attributes
[12:35:16] <dbaupp> completely out of left field: have we considered `#^foo` for inner attributes? (they point to what they're attached too.)
[12:35:51] <bstrie> pnkfelix: what I'm saying is that the use of the semicolon should not be used to distinguish between inner and outer attributes. it is an abomination
[12:36:04] <bstrie> that's my #1 concern right now
[12:36:25] <pnkfelix> bstrie: okay I feel like we're going to end up talking in circles
[12:36:53] <bstrie> dbaupp: that could work
[12:36:55] <pnkfelix> bstrie: no need to rehash the discussion that's already present on #2569
[12:37:11] <bstrie> well I'm not sure what you're trying to emphasize to me here :P
[12:37:14] <dbaupp> (using #^ would solve the shebang issue too)
[12:37:33] <pnkfelix> bstrie: (because I agree with you that using the semicolon *alone* as the way to distinguish outer- and inner- is terrible.)
[12:38:05] <dbaupp> I imagine there are quite a few attributes attached to the wrong thing accidentally because of it
[12:38:21] <bstrie> pnkfelix: it would seem strange to have *two* ways of distinguishing inner and outer attributes...
[12:38:40] <pnkfelix> bstrie: but I have argued and will continue to argue that it is useful to require its presence *in tandem* with some other syntactic marker.  Such as the leading #!, as suggested at the end of the comment trail in #2569
[12:39:38] <pnkfelix> bstrie: i.e. https://github.com/mozilla/rust/issues/2569#issuecomment-24710464
[12:43:04] <bstrie> pnkfelix: is the first space in brson's proposal `# foo` intentional?
[12:43:07] <pnkfelix> dbaupp: FYI, I was wrong:  It looks like PR 9538 really does fix Issue 6971.
[12:43:20] <pnkfelix> bstrie: I think so.
[12:43:29] <pnkfelix> bstrie: I imagine he finds the leading spaces more readable
[12:43:30] <dbaupp> pnkfelix: ah, nice.
[12:44:42] <pnkfelix> bstrie: we currently allow leading spaces, e.g. both `#  [attr]` and `#[  attr]` are okay
[12:45:33] <bstrie> super gross
[12:45:58] <dbaupp> will the new syntax disallow omitting the leading space? (I hope not, fwiw.)
[12:46:06] <bstrie> we probably do that in a lot of places that I don't realize
[12:46:14] <bstrie> like I wonder if `~ 1` is a valid pointer
[12:46:44] <flaper87> I don't think disallowing leading spaces there is a good idea, that sounds more like a coding style standards to me
[12:47:19] <bstrie> ok good, when I rewrite rustfmt to dictate rust's idiomatic style I'll be sure to remove them :)
[12:48:05] <flaper87> bstrie: :D
[12:48:28] <pnkfelix> flaper87: +1. We should make a lint for it and move on.  :)
[12:48:36] <dbaupp> rusti: ~          1
[12:48:37] -rusti- ~1
[12:48:40] <bstrie> nooooo
[12:48:44] <bstrie> stupid sexy whitespace rules
[12:48:47] <flaper87> T_T
[12:48:51] <dbaupp> bstrie: whitespace independence and all that
[12:48:54] <flaper87> ssssssssssssssssssssssssooooooo gross
[12:49:24] <flaper87> I read that as ~ is chasing 1 and finally gets to it :P
[12:49:26] <bstrie> rusti: f            n foo() { "hello" } foo()
[12:49:27] -rusti- <anon>:7:22: 7:23 error: expected one of `; }` but found `n`
[12:49:27] -rusti- <anon>:7          f            n foo() { "hello" } foo()
[12:49:27] -rusti-                                ^
[12:49:27] -rusti- application terminated with error code 101
[12:49:40] <bstrie> I rest my case
[12:49:51] <bstrie> ...whatever it was
[12:50:13] <dbaupp> bstrie: we're not quite fortran yet :P
[12:52:04] <dbaupp> btw, I'm not sure the lints (in rust terms, i.e. rustc::middle::lint) can handle purely syntactic constructs like extra whitespace
[12:52:23] <pnkfelix> dbaupp: darn, there goes that argument
[12:52:59] *** Joins: bytewise (bytewise@moz-4A801D04.unitymediagroup.de)
[12:53:01] <dbaupp> I imagine you could hook something into the parser than gets picked up by rustc::middle::lint
[12:53:17] <dbaupp> I think several of the lints use this (unused_{variable,mut,unsafe} iirc)
[12:54:22] <dbaupp> actually; I guess you've have to put it in the tokeniser and somehow identify which whitespaces were bad vs. good there (or transmit the whitespace info up to the parser). ... not trivial
[12:55:00] <pnkfelix> dbaupp: or have the attribute tokens carry metadata about how they were lexed?
[12:56:12] <dbaupp> pnkfelix: it would be peculiar to have a lint specifically detecting `# foo` rather than including `~ 1` and `foo ( )` too?
[12:56:24] <pnkfelix> dbaupp: (e.g. line + column number for the leading `#` versus the start of the attribute name?  Not pretty, I admit.  I guess that's what you meant by "transmit the whitespace info up to the parser")
[12:56:35] <dbaupp> (something like that yeah)
[13:06:13] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[13:06:13] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/n8glxA
[13:06:13] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[13:11:13] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[13:11:13] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/zPNr_A
[13:11:13] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[13:11:15] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[13:11:15] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/0HLnrg
[13:11:15] <ghrust> 13rust/06auto 148095009 15Alex Crichton: mk: Fully clean out old documentation...
[13:11:15] <ghrust> 13rust/06auto 1450176f5 15bors: auto merge of #9544 : alexcrichton/rust/clean-docs, r=pnkfelix...
[13:11:15] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[13:21:23] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[13:21:23] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1450176f5 to 1474dfd93: 02http://git.io/N3iJvQ
[13:21:23] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[13:21:28] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[13:21:28] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/s56n3w
[13:21:28] <ghrust> 13rust/06auto 142aadd36 15Daniel Micay: mark globals as internal when not building a library...
[13:21:28] <ghrust> 13rust/06auto 1401313a1 15bors: auto merge of #9548 : thestinger/rust/internal, r=alexcrichton...
[13:21:28] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[13:32:37] *** Joins: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net)
[13:49:56] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[14:16:48] *** Quits: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au) (Quit: ChatZilla 0.9.90.1 [Firefox 25.0/20130923194050])
[14:19:27] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[14:30:36] <bstrie> so...
[14:30:42] <bstrie> since adopting nested comments
[14:30:46] <bstrie> ...again...
[14:30:50] <bstrie> makes our grammar irregular
[14:31:08] <bstrie> can we also get rid of the :: in the ::<> type annotation syntax? :)
[14:31:30] *** jack|zzz is now known as jack
[14:32:02] <pnkfelix> bstrie: uh, isn't that a much more serious change?  Maybe I'm confused.
[14:32:33] <bstrie> pnkfelix: remember how I said that significant semicolons were the Second Worst Thing In Rust? well guess what the first worst is :P
[14:32:53] <pnkfelix> bstrie: i.e. the parser can still figure out how to parse a file with nested comments, without having to consult the metadata 
[14:32:53] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[14:33:09] <bstrie> I know, I know
[14:33:26] <bstrie> still waiting for pcwalton's generalized type ascription thing to save us from ::<>
[14:33:33] *** Joins: jensnockert (jensnocker@F1E3FD84.8AAAF769.FAAB0799.IP)
[14:36:15] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[14:36:15] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/s56n3w
[14:36:15] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[14:41:11] <nmatsakis> bstrie: I can't you don't like significant semicolons 
[14:41:13] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[14:41:13] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/4g43yg
[14:41:13] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[14:41:19] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[14:41:19] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/sCDy7A
[14:41:19] <ghrust> 13rust/06auto 143a76509 15Tim Chevalier: rustpkg: Implement `rustpkg test`...
[14:41:19] <ghrust> 13rust/06auto 14dab8234 15bors: auto merge of #9549 : catamorphism/rust/rustpkg-test-command, r=metajack...
[14:41:19] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[14:41:23] <nmatsakis> I think they're the greatest thing since sliced bread
[14:41:31] * nmatsakis realizes this is not an appropriate #rust-internals discussion!
[14:42:16] <pnkfelix> wait, it isn't?
[14:42:32] <pnkfelix> oh, I guess it isn't.
[14:43:05] * nmatsakis really wishes he had time to write more rust today
[14:43:08] <nmatsakis> or this week at all.
[14:43:11] <nmatsakis> grr.
[14:43:50] <nmatsakis> ok, this coffee house has gone from "pleasant background buzz" to "horribly intrusive clammer". time to pack up and find someplace new to sit.
[14:47:14] <jdm> heh
[15:21:23] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[15:21:23] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14dab8234 to 1401313a1: 02http://git.io/N3iJvQ
[15:21:23] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[15:21:25] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[15:21:25] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/dadjbw
[15:21:25] <ghrust> 13rust/06auto 1409a5338 15Alex Crichton: Remove the printf{,ln}! macros...
[15:21:25] <ghrust> 13rust/06auto 14409182d 15Alex Crichton: Update the compiler to not use printf/printfln
[15:21:26] <ghrust> 13rust/06auto 1410e7f12 15bors: auto merge of #9550 : alexcrichton/rust/remove-printf, r=thestinger...
[15:21:28] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[15:25:38] <bstrie> nmatsakis: I meant significant semicolons in attributes, sorry
[15:25:45] <bstrie> I like significant semicolons in return position
[15:25:48] <bstrie> just took me a while :)
[15:26:33] <nmatsakis> bstrie: oh, in attributes, yeah, that's a mess
[15:26:49] <nmatsakis> bstrie: I like the `#foo` and `#!foo` I saw proposed somewhere
[15:27:14] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:27:31] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:27:34] <bstrie> that's what we were talking about this morning, yeah
[15:27:42] <pnkfelix> nmatsakis: Issue 2569 
[15:34:42] *** Quits: StarLight (StarLight@moz-5873EB8D.dynamic.avangarddsl.ru) (Ping timeout)
[15:39:04] *** Joins: StarLight (StarLight@moz-FFA9EA5.dynamic.avangarddsl.ru)
[15:40:26] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[15:40:30] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[15:42:33] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Ping timeout)
[15:43:23] *** Joins: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com)
[15:47:27] *** Quits: jensnockert (jensnocker@F1E3FD84.8AAAF769.FAAB0799.IP) (Input/output error)
[16:01:37] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[16:01:37] *** Joins: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[16:17:16] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[16:17:37] <Seldaek> if anyone here ever gets bored of writing code, looking at this would be nice https://github.com/graydon/rust-www/issues/9
[16:20:18] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[16:28:27] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[16:33:01] *** Joins: tjc (tjc@moz-FEE214EF.tmodns.net)
[16:33:01] *** ChanServ sets mode: +o tjc
[16:36:10] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[16:36:10] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/dadjbw
[16:36:10] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[16:37:57] <cmr> Can we use ^ instead of ! ?
[16:38:04] <cmr> It 1. makes more sense, 2. doesn't conflict with hashbangs
[16:38:22] <bstrie> only if we can also change inner doc comments to be /*^
[16:38:28] <bstrie> slash //^
[16:38:30] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[16:38:31] <cmr> Hm
[16:38:37] <cmr>  //^ isn't as pretty as //!
[16:38:47] <bstrie> actually I quite like it
[16:38:51] <cmr> also ^ is in a more awkward place on the keyboard
[16:39:11] <Seldaek> cmr: I already fixed the sublime text plugin to support //! :( 
[16:39:14] <steveklabnik>  /*^ is werid
[16:40:06] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:40:18] <cmr> What about doubling the #, so ##cfg(foo) and //# and /*#
[16:40:27] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[16:40:29] <steveklabnik> three random symbols in a row looks bad
[16:40:33] <steveklabnik> two with a third looks better
[16:40:35] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:40:41] <steveklabnik> i'd take //# over /*#
[16:40:56] <steveklabnik> also, i demand them to be blue. ;)
[16:41:08] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[16:41:08] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/Ayx-gw
[16:41:08] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[16:41:11] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[16:41:11] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/Uw2zsA
[16:41:11] <ghrust> 13rust/06auto 14b74663e 15Alex Crichton: Remove the notion of an "unknown format"...
[16:41:11] <ghrust> 13rust/06auto 1478c3fac 15bors: auto merge of #9535 : alexcrichton/rust/no-format-default, r=thestinger...
[16:41:11] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[16:50:49] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[16:51:36] *** Quits: tjc (tjc@moz-FEE214EF.tmodns.net) (Quit: zzzzzzzzzz)
[16:52:05] *** Joins: rlbaker (rlbaker@moz-D05907D4.hfc.comcastbusiness.net)
[17:16:27] *** Quits: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net) (Quit: Leaving.)
[17:33:03] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[17:40:28] *** Joins: tjc (tjc@moz-FEE214EF.tmodns.net)
[17:40:28] *** ChanServ sets mode: +o tjc
[17:46:15] *** Quits: tjc (tjc@moz-FEE214EF.tmodns.net) (Quit: zzzzzzzzzz)
[17:48:44] *** Joins: jdm (jdm@FCCEA34F.7672369.D8E68FF6.IP)
[17:56:08] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[17:56:08] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/Uw2zsA
[17:56:08] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[18:01:14] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[18:01:14] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/hI1cYQ
[18:01:14] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[18:01:16] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[18:01:16] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/4ecT-w
[18:01:16] <ghrust> 13rust/06auto 14b4b937a 15Alex Crichton: mk: Fully clean out old documentation...
[18:01:16] <ghrust> 13rust/06auto 14927f4d9 15bors: auto merge of #9544 : alexcrichton/rust/clean-docs, r=pnkfelix...
[18:01:16] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[18:11:08] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[18:11:08] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14927f4d9 to 1478c3fac: 02http://git.io/N3iJvQ
[18:11:08] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[18:11:09] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[18:11:09] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/aik7-g
[18:11:09] <ghrust> 13rust/06auto 14d8db96c 15Alex Crichton: mk: Fully clean out old documentation...
[18:11:09] <ghrust> 13rust/06auto 1476e8f08 15bors: auto merge of #9544 : alexcrichton/rust/clean-docs, r=pnkfelix...
[18:11:09] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[18:18:58] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:18:59] *** ChanServ sets mode: +qo brson brson
[18:19:50] *** Joins: tjc (tjc@moz-BE33DA21.fw1.sfo1.mozilla.net)
[18:19:50] *** ChanServ sets mode: +o tjc
[18:59:58] *** Quits: vadimcn (chatzilla@A2267643.76F9E272.DA40C4B3.IP) (Connection reset by peer)
[19:00:22] *** Joins: vadimcn (chatzilla@A2267643.76F9E272.DA40C4B3.IP)
[19:00:43] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[19:10:34] *** Joins: jensnockert (jensnocker@moz-2DBD7676.mobileonline.telia.com)
[19:12:48] *** Joins: SiegeLord (sl@moz-3D449DF.bstnma.fios.verizon.net)
[19:24:57] <bstrie> brson: I sent a PR to rust-www
[19:26:08] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[19:26:08] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/aik7-g
[19:26:08] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[19:31:05] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[19:31:05] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/nDvt3A
[19:31:05] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[19:31:09] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[19:31:09] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/ySNAOg
[19:31:09] <ghrust> 13rust/06auto 1496bdcd0 15Tim Chevalier: rustpkg: Implement `rustpkg test`...
[19:31:09] <ghrust> 13rust/06auto 14e699d91 15bors: auto merge of #9549 : catamorphism/rust/rustpkg-test-command, r=catamorphism,metajack...
[19:31:10] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[19:35:52] *** Joins: tikue_ (tkuehn@58063012.87C752B1.689607DE.IP)
[19:36:38] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[20:01:02] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[20:05:42] <erickt> hey folks, does anyone have any arguments against landing https://github.com/mozilla/rust/pull/9250 once it's mergable? It adds bounds checking to fns .to_int(), which will add some extra overhead to casting between numeric types
[20:06:37] <strcat> erickt: I think we should have different conversion functions
[20:07:01] <strcat> anyway I dunno
[20:07:10] <erickt> strcat: like what, `.to_int_checked()`?
[20:07:32] <strcat> well, there's more than one way of handling it
[20:07:43] <strcat> large fixnum -> small fixnum
[20:07:46] <erickt> or add `.to_int_unchecked()` that wrap `foo as int`?
[20:07:49] <strcat> you can clamp to the max, if it's above
[20:07:55] <strcat> or you can truncate (like 'as')
[20:08:18] <brson> bstrie: thanks
[20:08:21] <strcat> or you can check
[20:08:29] <erickt> strcat: and also floor/ceil for floats
[20:08:40] <strcat> or round ;p
[20:09:18] <strcat> erickt: and then you still have to deal with the integer potentially being larger/smaller than the fixnum type
[20:09:24] * strcat shrugs
[20:09:27] <strcat> numbers!
[20:09:32] <strcat> bah
[20:09:37] <erickt> strcat: we should add all of those :)
[20:09:56] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[20:10:15] <strcat> and then there are conversions you know are okay
[20:10:20] <strcat> small int -> larger int
[20:10:22] <erickt> strcat: what do you think the default should be for the short form `.to_int()`?
[20:10:33] <strcat> erickt: not sure if it should be the short form ;P
[20:10:44] <strcat> I'm not sure if making this stuff really generic will make sense
[20:10:55] <strcat> if you're using fixed-sized integers, you always have to write code specific to the sizes
[20:11:16] <erickt> strcat: my PR already handles that. It optimizes down to just `fn to_int(x: i8) -> Option<int> { Some(x as int) }`
[20:12:10] * strcat really doesn't know what do with this number stuff
[20:13:18] <erickt> I'm not opposed to having `.to_int_checked()`, `.to_int_truncate()`, and `.to_int_clamp
[20:15:28] * strcat will think about it for a while
[20:15:38] <strcat> no obvious "right" solution :(
[20:15:54] <cmr> erickt: would it be possible to split the enum stuff out from the number stuff?
[20:15:58] <cmr> or would it be painful
[20:16:23] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[20:17:11] *** Quits: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com) (Ping timeout)
[20:21:39] *** Joins: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com)
[20:22:16] <erickt> cmr: enum stuff depends on the number stuff
[20:22:23] <cmr> ok
[20:22:27] <erickt> so we could do the number stuff first then the enum
[20:22:51] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Connection reset by peer)
[20:23:14] *** Joins: Jesse_ (jruderman@moz-BBE3ABD.mv.mozilla.com)
[20:27:15] <erickt> and for the floating point numbers, we have `.to_int_floor()` and `.to_int_ceil()`
[20:27:56] <erickt> it's a shame all these fns result in a combinatorial explosion of conversion functions
[20:30:25] <cmr> yes
[20:30:38] <cmr> we seem to bump up against combinatorial explosions a lot
[20:30:57] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[20:31:21] *** flaper87 is now known as flaper87|afk
[20:31:33] <strcat> erickt: the built-in fixed-size integers will probably be the only fixed-size ones, at least
[20:32:52] <erickt> hopefully :)
[20:32:57] *** Quits: tjc (tjc@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: zzzzzzzzzz)
[20:33:37] <strcat> erickt: and I have a PR open removing float based on the RFC, guess it probably needs to go through a meeting
[20:33:51] <strcat> although we'll probably end up adding f128
[20:33:58] <erickt> we can at least partially macrotize these functions, so an i128 won't be that hard to add
[20:34:35] <strcat> if only eu4 was written in rust, it wouldn't keep crashing
[20:34:43] <cmr> heh
[20:34:58] <erickt> eu4?
[20:35:07] <strcat> europa universalis 4
[20:35:10] <cmr> do you have weird artifacts in the unexplored fog when zooming out?
[20:35:15] <strcat> cmr: no
[20:35:38] <strcat> cmr: there was a problem where it was really dark while zoomed in and I had to edit a shader
[20:35:46] <strcat> I am not sure if they fixed it or if it is still edited
[20:35:47] <erickt> strcat: will there be any issue with us not having a float type and us interacting with c libraries?
[20:36:01] <engla> strcat: would eu4 work on a snb intel graphics (linux)?
[20:36:03] <strcat> erickt: float != float in C
[20:36:10] <strcat> our float is always f64
[20:36:28] <strcat> C float is usually (always, on existing platforms) f32
[20:37:09] <cmr> engla: I play it with radeon on linux, which is opengl 3.1 (core)
[20:37:33] <erickt> well then I'm +1 on dropping float. It'll certainly make my conversion functions visually line up better :)
[20:37:52] <cmr> I think float should be removed too
[20:38:46] * erickt has never played the europa universalis games... it's only been civ for me
[20:39:11] <strcat> erickt: they're great! :)
[20:39:17] <strcat> and crusader kings 2 + victoria 2 too...
[20:39:18] <engla> cmr: how much more demainding than eu3 5 is it?
[20:39:29] <strcat> eu4 runs fine on my laptop with an hd4000 intel GPU
[20:39:34] <cmr> I never played eu3
[20:39:35] <strcat> 1920x1080, runs smoothly
[20:39:45] <strcat> as do ck2 and vicky2.
[20:39:57] <engla> ok. only got SNB hd3000 unfortunately. maybe it's fine
[20:40:12] <strcat> (eu4 and ck2 on linux, but vicky2 was released before they supported it ;[)
[20:40:26] <strcat> anyway
[20:40:50] <strcat> we need data parallalism for paradox to like rust ;p
[20:40:55] <strcat> they use thread building blocks
[20:41:14] <erickt> In other news, I wish we could decide on having only `.to_foo()` or `from_foo()`. It's annoying writing both forms
[20:41:24] <strcat> since they have a huge amount of CPU-bound easily parallel calculations
[20:41:37] <cmr> I prefer to_foo
[20:41:57] <strcat> probably why the patch with perf improvements added caches... yay data races
[20:42:04] <strcat> s/caches/crashes/
[20:42:08] <erickt> heh
[20:44:07] *** flaper87|afk is now known as flaper87
[20:44:12] <erickt> cmr: one downside with `.to_foo` is it requires a new trait and impl, whereas `.from_foo` is easier to leverage a pre-existing trait
[20:44:33] *** Joins: tjc (tjc@moz-BE33DA21.fw1.sfo1.mozilla.net)
[20:44:33] *** ChanServ sets mode: +o tjc
[20:44:59] *** Quits: tjc (tjc@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: zzzzzzzzzz)
[20:45:55] <erickt> cmr: also, `.from_foo()` only needs one impl for &str and &[T], whereas `.to_foo()` needs impls for ~str,@str,&str,~[T],@[T],&[T] (I think)
[20:46:10] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[20:46:10] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/ySNAOg
[20:46:10] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[20:46:12] <cmr> erickt: that's a pretty major downside
[20:47:06] <erickt> I wonder if we have a ticket out there to fix that downside...
[20:51:08] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[20:51:08] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/zAObWw
[20:51:08] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[20:51:10] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[20:51:10] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/D9AxOQ
[20:51:10] <ghrust> 13rust/06auto 1499c1fb8 15Brian Anderson: Update version numbers to 0.9-pre
[20:51:10] <ghrust> 13rust/06auto 1467394f2 15bors: auto merge of #9552 : brson/rust/0.9-pre, r=alexcrichton
[20:51:11] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[20:57:36] <erickt> cmr: the obvious thing to do is we can add a `impl_str!` and `impl_vec!` macros that'll just expand one impl out to three
[20:58:24] <erickt> dunno why I didn't think of that first :)
[21:00:52] *** Quits: Jesse_ (jruderman@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[21:01:17] *** Quits: tikue_ (tkuehn@58063012.87C752B1.689607DE.IP) (Quit: tikue_)
[21:01:37] <erickt> although a part of me is a little worried we may be over using macros to solve problems that would be better to solve in the language
[21:01:38] *** Joins: tikue_ (tkuehn@58063012.87C752B1.689607DE.IP)
[21:02:01] *** Quits: tikue_ (tkuehn@58063012.87C752B1.689607DE.IP) (Quit: tikue_)
[21:02:20] <strcat> erickt: I think over time we'll figure out better ways of composing things
[21:02:45] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[21:04:36] <engla> strcat: what's the status of the Option changes?
[21:05:17] <strcat> engla: everyone seems to like it, dunno
[21:06:11] *** Joins: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net)
[21:06:41] <engla> ok
[21:09:08] <cmr> acrichto: Are you actively working on removing fmt! ?
[21:09:23] <acrichto> cmr: actively in the sense of when I have spare time
[21:09:27] <acrichto> I have a patch to remove it from libstd
[21:09:32] <acrichto> although I hit a bug
[21:09:38] <acrichto> which I think the last snapshot fixed, haven't tested that theory yet
[21:09:50] * acrichto runs git rebase
[21:10:18] <acrichto> I'm thinking about adding a --cfg nofmt
[21:10:23] <acrichto> to prevent it from creeping into the compiler
[21:10:26] <acrichto> without completely removing it
[21:11:02] <Eridius> acrichto: I think we first need to convert debug!/etc. over to format!(). What's the plan for that?
[21:11:10] <cmr> Eridius: debug2 etc exist.
[21:11:16] <Eridius> oh? Haven't seen them
[21:11:18] <acrichto> yeah debug => debug2
[21:11:22] <acrichto> XXX => XXX21
[21:11:24] <Eridius> and asserts too?
[21:11:24] <acrichto> 2*
[21:11:27] <acrichto> assert! doesn't have assert2
[21:11:32] <acrichto> but almost no one uses the format messages anyway
[21:11:35] <Eridius> well that needs fixing
[21:11:36] <Eridius> I do!
[21:11:48] <acrichto> it's mostly a bootstrapping problem for the compiler
[21:11:53] <Eridius> in my path rewrite, any time I was getting nasty test failures, I'd switch over to an assert!() with a good format string to help me read the errors
[21:12:05] <acrichto> oh hm maybe I should add assert2 then
[21:12:09] <acrichto> then it needs a snapshot :(
[21:12:18] <acrichto> or I could do assert!(e, format!())
[21:12:19] <acrichto> :D
[21:12:29] <Eridius> you mean assert!(e, "%s", format!())
[21:12:34] <Eridius> which means you're still using fmt! strings :P
[21:13:37] <acrichto> yeah I dunno
[21:13:41] <engla> rusti: assert!(false, format!("hi"))
[21:13:43] -rusti- task <unnamed> failed at 'hi', <anon>:7
[21:13:43] -rusti- application terminated with error code 101
[21:13:43] <engla> it works
[21:13:45] <acrichto> I probably just need to ass assert2
[21:20:02] *** Joins: tikue_ (tkuehn@885B1A5.2ACBBF24.689607DE.IP)
[21:20:44] <Eridius> oh ugh, glob parses patterns as Paths? That's rather pointless and problematic
[21:20:48] <Eridius> since my new Path always normalizes
[21:22:48] <Eridius> boy I hope glob's tests are comprehensive. There's a lot of them, so I'm assuming the answer is yes
[21:22:59] * Eridius is relying quite heavily on tests to ensure his porting to the new Path is correct
[21:23:34] <Eridius> I hate code that relies on access to Path.components though, since I no longer have that
[21:32:35] *** Quits: rlbaker (rlbaker@moz-D05907D4.hfc.comcastbusiness.net) (Ping timeout)
[21:33:20] *** Quits: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net) (Quit: Leaving.)
[21:35:29] *** Joins: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net)
[21:37:45] <acrichto> Eridius: oh dear, I'm currently writing code using that
[21:37:48] <acrichto> what would you recommend?
[21:39:15] <acrichto> sometimes I really wish fail messages had backtraces
[21:39:45] <Eridius> acrichto: what's your code doing?
[21:39:53] <acrichto> walking over the components of a path
[21:39:56] <Eridius> my Path rewrite doesn't expose components, but it does expose an Iterator for components
[21:40:03] <acrichto> oh that's fine then
[21:40:26] <Eridius> right now I'm trying to figure out how to make Glob behave, because it needs to be able to handle Windows paths, but not normalize paths
[21:40:39] <Eridius> I'm tempted to just re-write a mini parser for Windows C: and \\a\b\ paths
[21:40:51] <Eridius> although it really is more complicated than that, so I dunno
[21:41:20] <Eridius> in fact I doubt the current glob code correctly handles all windows paths
[21:44:20] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[21:45:32] <Eridius> incidentally, from reading glob, I'm pretty sure it never handled Windows glob patterns like `?:\foo` or `\\?\?\bar`
[21:45:46] <Eridius> not that I'm quite sure what it would do for those, but w/e
[21:46:14] *** Quits: jensnockert (jensnocker@moz-2DBD7676.mobileonline.telia.com) (Connection reset by peer)
[21:49:01] *** Joins: jensnockert (jensnocker@moz-2DBD7676.mobileonline.telia.com)
[21:50:10] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[21:55:34] *** Quits: tikue_ (tkuehn@885B1A5.2ACBBF24.689607DE.IP) (Quit: tikue_)
[21:56:23] *** Quits: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com) (Ping timeout)
[21:58:10] *** flaper87 is now known as flaper87|afk
[22:06:09] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[22:06:09] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/D9AxOQ
[22:06:09] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[22:11:15] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[22:11:15] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/4eyYRQ
[22:11:15] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[22:11:16] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[22:11:16] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/pUu0KA
[22:11:16] <ghrust> 13rust/06auto 1425bc6b6 15Brian Anderson: Remove a little bit of unused C++
[22:11:16] <ghrust> 13rust/06auto 14f53d84e 15bors: auto merge of #9553 : brson/rust/lesscxx, r=thestinger
[22:11:17] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[22:12:57] *** Joins: ecr (Thunderbir@moz-10C88DA7.dyn.cs.washington.edu)
[22:13:02] *** Quits: ecr (Thunderbir@moz-10C88DA7.dyn.cs.washington.edu) (Quit: ecr)
[22:15:05] *** flaper87|afk is now known as flaper87
[22:26:15] *** Joins: ecr (Thunderbir@moz-10C88DA7.dyn.cs.washington.edu)
[22:33:55] *** flaper87 is now known as flaper87|afk
[22:37:37] *** Quits: jensnockert (jensnocker@moz-2DBD7676.mobileonline.telia.com) (Connection reset by peer)
[22:40:56] *** flaper87|afk is now known as flaper87
[22:42:19] *** Joins: tjc (tjc@moz-17B89992.tmodns.net)
[22:42:19] *** ChanServ sets mode: +o tjc
[22:43:05] *** flaper87 is now known as flaper87|afk
[22:46:13] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[22:46:37] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[22:47:29] *** Joins: tikue_ (tkuehn@885B1A5.2ACBBF24.689607DE.IP)
[23:04:42] *** Quits: ecr (Thunderbir@moz-10C88DA7.dyn.cs.washington.edu) (Quit: ecr)
[23:06:39] *** Joins: ecr (Mibbit@F06EF90.A19A88BC.64990CF8.IP)
[23:07:29] *** Quits: ecr (Mibbit@F06EF90.A19A88BC.64990CF8.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[23:16:05] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[23:16:05] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/7cP1TQ
[23:16:05] <ghrust> 13rust/06auto 1425bc6b6 15Brian Anderson: Remove a little bit of unused C++
[23:16:05] <ghrust> 13rust/06auto 14cde44ea 15bors: auto merge of #9553 : brson/rust/lesscxx, r=thestinger
[23:16:06] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[23:16:51] <cmr> Yay more c++ gone
[23:21:13] *** Joins: steveklabnik (steveklabn@moz-A6B56C6E.lsan.ca.megapath.net)
[23:21:13] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[23:21:13] <ghrust> 01[13rust01] 15catamorphism 04force-pushed 06try from 14fe302e0 to 14b656b16: 02http://git.io/k471pw
[23:21:13] <ghrust> 13rust/06try 14b656b16 15Tim Chevalier: Make dependencies work right
[23:21:13] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[23:21:56] <dbaupp> cmr: nope
[23:22:03] <cmr> dbaupp: nope what?
[23:22:17] <dbaupp> cmr: the C++ removal failed
[23:22:19] <cmr> oh
[23:22:25] <cmr> dbaupp: irfy isn't updating.
[23:23:33] <dbaupp> cmr: ok, will investigate
[23:29:49] *** Quits: tjc (tjc@moz-17B89992.tmodns.net) (Ping timeout)
[23:31:29] *** Joins: tjc (tjc@moz-17B89992.tmodns.net)
[23:31:29] *** ChanServ sets mode: +o tjc
[23:38:31] *** Quits: tjc (tjc@moz-17B89992.tmodns.net) (Quit: zzzzzzzzzz)
[23:40:26] <Eridius> le sigh. I wish mut was allowed without ref in match patterns
[23:41:06] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:49:20] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
