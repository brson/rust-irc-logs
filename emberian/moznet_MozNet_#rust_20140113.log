[00:00:05] <cmr> magg: but when you leave the function, the triemap will be destroyed, invalidating the reference.
[00:00:10] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[00:01:06] <magg> yeah i get that. how can i return a reference that won't be destroyed. do i have to use owned pointers?
[00:01:55] <cmr> why not just return the map?
[00:02:04] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Quit: WeeChat 0.4.2)
[00:02:16] <kimundi> halorgium: Hehe, got distracted the last hour anyway :P
[00:03:01] <magg> i just want the lowest value
[00:03:02] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[00:03:25] *** Joins: atomical (atomical@moz-C4295341.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com)
[00:03:36] <cmr> so return the value?
[00:04:11] <magg> i'm trying to do that :(
[00:04:27] <cmr> what *are* you trying to do?
[00:04:52] *** Quits: nkoep (nik@moz-A53D11F.pool.mediaways.net) (Quit: Leaving)
[00:04:53] <magg> i'm returning the lowest value, with that snippet.
[00:05:04] <magg> or i think i'm doing that
[00:05:43] *** Quits: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de) (Connection reset by peer)
[00:05:54] *** Quits: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net) (Quit: syatchmenoff)
[00:06:10] <magg> do mean to return just the bucket's values?
[00:06:19] <cmr> looks like triemap doesn't support a move iterator.
[00:06:24] <cmr> so you'll need to clone the value
[00:06:28] <cmr> (.unwrap().clone())
[00:06:30] <magg> ooh
[00:06:36] *** Quits: hjr3 (hradtke@moz-1ED9056D.lsanca.dsl-w.verizon.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[00:07:38] *** Joins: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net)
[00:09:31] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[00:15:03] <Gracenotes> hm. perhaps I should try porting my uni computer graphics project to Rust.
[00:16:29] *** Quits: io2 (io2@moz-871549F5.home.otenet.gr) (Quit: )
[00:16:32] *** Joins: deens (Mibbit@moz-A47475CE.hsd1.ca.comcast.net)
[00:16:48] *** Parts: deens (Mibbit@moz-A47475CE.hsd1.ca.comcast.net) ()
[00:17:40] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[00:17:52] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[00:18:47] <Gracenotes> although it would require porting a subset of libnoise... hm
[00:18:59] <Gracenotes> maybe something less ambitious first
[00:19:37] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[00:19:53] *** Quits: Earnestea (earnest@moz-E86D50FA.dyn.plus.net) (Ping timeout)
[00:20:07] <mcpherrin> Gracenotes: Writing a little C interface that has the functionality you need called from Rust shouldn't be too hard
[00:20:48] *** Joins: tristramh (tris@moz-F94D69DC.lns20.syd6.internode.on.net)
[00:21:21] *** Joins: Earnestly (earnest@moz-E86D50FA.dyn.plus.net)
[00:22:02] <Gracenotes> well... libnoise is a bit special in that the way you use it is by creating a hierarchy of C++ classes from a given virtual class, where some interesting noise function subclasses are already built-in
[00:22:41] <Gracenotes> it's one of the few C++ libraries that really did a modular, extensible system well. not the best for FFI-ing with, though.
[00:23:05] <cmr> noise-rs exists.
[00:23:22] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[00:23:23] <FreeFull> C++ is horrible for FFI
[00:24:23] <Gracenotes> oh hm. it seems to implement Perlin noise... should be useful, because it's kind of a pain to code
[00:25:45] *** Quits: atomical (atomical@moz-C4295341.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com) (Ping timeout)
[00:25:54] *** Quits: dylukes (dylukes@moz-ED57011A.oakland.resnet.pitt.edu) (Quit: Textual IRC Client: www.textualapp.com)
[00:26:06] <cmr> What other algorithms do you need? (Genuine question; they can be implemented)
[00:27:13] *** Joins: atomical (atomical@moz-C4295341.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com)
[00:27:46] *** Quits: vgeddes (vincent.ge@moz-4C6314FC.dsl.mweb.co.za) (Ping timeout)
[00:29:45] <Gracenotes> oh, without any available noise functions, I was just going to implement uniform random noise. whatever noise functions I used were largely for aesthetic value.
[00:30:59] <Gracenotes> most of the other ones were variations on Perlin noise, with absolute value fns added in various places.
[00:31:31] <Gracenotes> the main interesting bit would be architecturing it. /me think.
[00:31:44] <Tobba> ugh
[00:31:47] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[00:31:48] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[00:31:59] <Tobba> you can cast non-mutable refs into mutables right?
[00:32:14] <cmr> with transmute, yes.
[00:32:20] <Tobba> ugh
[00:32:31] <Tobba> I need this thing to return a mut, it doesnt actually mutate it though
[00:32:49] <Tobba> but if its mutable it gets moved into the first iteration of the loop and it dies in a fire
[00:33:41] <ChrisMorgan> An eventful week in the Rust community, this one just past that I've mostly missed!
[00:34:58] *** Quits: c-a (c-a@moz-57C82A9.a163.priv.bahnhof.se) (Quit: Ex-Chat)
[00:37:02] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Ping timeout)
[00:37:24] <ChrisMorgan> Argh, this prelude's doc comment is now significantly out of date. bjz: you missed that when removing println in https://github.com/mozilla/rust/pull/11416
[00:38:02] <bjz> ChrisMorgan: agh, sorry!
[00:38:12] <bjz> ChrisMorgan: I updated the tutorial stuff
[00:38:19] <Tobba> basicaly, is there any way to have a mutable without it getting moved all over
[00:38:23] <bjz> ChrisMorgan: must have missed that though
[00:42:08] <cmr> This Week in Rust: remove all the things
[00:42:30] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[00:42:54] * bjz is excited about removing things
[00:43:03] * cmr is too
[00:43:56] * bjz is super excited about std::num. after months of turning it over in his head, he thinks there is a solution to the mess
[00:44:06] <bjz> \o/
[00:44:22] <bstrie> what is the problem/solution with std::num
[00:44:59] <bjz> bstrie: https://github.com/mozilla/rust/issues/10387#issuecomment-32125505
[00:45:51] *** Quits: steveno (steveno@moz-2B2BE86F.hsd1.pa.comcast.net) (Quit: Leaving)
[00:46:44] <bjz> bstrie: basically at the moment we have an ugly compromise
[00:47:27] * bjz thinks we need a well-defined mandate for the std
[00:49:09] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Input/output error)
[00:52:54] *** Quits: magg (magg@14B25297.CD956C53.3D0AE249.IP) (Quit: magg)
[00:55:11] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[00:57:29] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[00:57:57] *** Quits: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca) (Quit: eatkinson)
[00:58:22] <cmr> ChrisMorgan: how long are you going to be around?
[00:58:34] <ChrisMorgan> cmr: hours and hours
[00:58:40] <cmr> Alright.
[00:58:57] <cmr> I'm about to write a quote database, might have some questions about rust-http :)
[00:59:20] <ChrisMorgan> Hokay.
[00:59:37] <cmr> wycats_: <3 route-recognizer
[00:59:51] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[01:00:18] <wycats_> Glad to hear it
[01:00:19] * ChrisMorgan is looking forward to fixing up rust-http so that it's not all icky in its transfer level
[01:00:34] <wycats_> I need to optimize the capture stuff
[01:00:46] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[01:00:48] <wycats_> Right now I just keep arrays of state integers
[01:01:21] * ChrisMorgan is wondering about writing and publishing a nice simple HTTP/0.9 library today or tomorrow. Should be the work of an hour at most—seriously.
[01:01:24] <wycats_> ChrisMorgan: you should prioritize integrating the SSL patch
[01:01:39] <ChrisMorgan> wycats_: yep, that's certainly going in before the rewrite.
[01:02:04] <ChrisMorgan> (Fortunately it's also a fairly unobtrusive change. I like rust-openssl and the likes which can just wrap a stream.)
[01:02:08] <wycats_> The current rust-http is pretty slow; known issue?
[01:02:21] <ChrisMorgan> wycats_: client or server?
[01:02:24] <wycats_> Server
[01:02:27] <qrada> hey, quick q.. i made a generic min/max function, but i can't use < > >= <= etc within that function: pub fn max<T>(a:T,b:T) -> T { if (a > b) { return a; } b } .. etc.. i imagine somehow I have to tell my generic max func that the params are part of the 'ord' trait/class etc.. is this possible or am i looking at this wrong?
[01:02:36] <wycats_> ChrisMorgan: also would like to discuss web sockets
[01:02:55] <cmr> qrada: fn max<T: Ord>
[01:03:06] <qrada> jaja! thanks alot
[01:03:13] <ChrisMorgan> wycats_: I have simple comparison benchmarks for Node/Go/Rust in rust-http/comparisons/, have you run that at all?
[01:03:25] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[01:03:45] * wycats_ is done with the list of things he's bee waiting for an appearance of ChrisMorgan to say
[01:04:08] <wycats_> ChrisMorgan: no - I was just surprised by only getting 4kish rps on a hello worlf
[01:04:12] <wycats_> World*
[01:04:21] *** Joins: ling0322 (Android@D4D993B6.80E526F4.57F5F11F.IP)
[01:04:22] <wycats_> Maybe my env is fucked?
[01:04:37] <qrada> what's 'rps'
[01:04:44] *** Joins: jzcz (nick@moz-4C262E7E.dyn.centurytel.net)
[01:04:47] <cmr> requests per second
[01:05:00] <ChrisMorgan> wycats_: sorry I've been out, this conference took quite a lot more work than I expected. I only spent an hour or so not asleep at home each day.
[01:05:20] <wycats_> Understood
[01:05:31] <wycats_> My appearance can be highly variable too
[01:06:10] <wycats_> I also tend to find that overhead in usec is a better metric for reasoning about things than rps so another mea culpa
[01:07:26] * ChrisMorgan needs to rebuild rust now so that he can rerun those performance comparisons
[01:07:48] <cmr> ChrisMorgan: is it as simple as running a script?
[01:07:53] <cmr> I can run them, if so.
[01:07:54] *** Quits: heftig (heftig@moz-36A81853.dip0.t-ipconnect.de) (Ping timeout)
[01:08:04] <ChrisMorgan> cmr: yep, `cd comparisons; python run.py`
[01:08:24] <ChrisMorgan> (Requires go, node, ab [I know], rustc.)
[01:09:39] *** Quits: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net) (Quit: syatchmenoff)
[01:09:51] *** Joins: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net)
[01:11:01] <cmr> this is going to take a while isn't it
[01:12:45] <cmr> ChrisMorgan: is bigger better?
[01:12:51] <cmr> if so, we're doing pretty good
[01:12:58] <ChrisMorgan> cmr: yep, the numbers are RPS.
[01:13:10] <cmr> https://gist.github.com/cmr/39b82d46d6e10038f08c
[01:13:17] *** Joins: heftig (heftig@moz-A047F9ED.dip0.t-ipconnect.de)
[01:13:26] <ChrisMorgan> (Compare with README.txt.)
[01:13:38] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[01:14:08] *** Joins: magg (magg@14B25297.CD956C53.3D0AE249.IP)
[01:14:32] *** Joins: dbaupp (Thunderbir@1D1B1F7A.D5A1DCF.37681C44.IP)
[01:14:49] <ChrisMorgan> cmr: I'm disappointed it's not better than Go for concurrency 1 on your machine (it does on mine). But at least it's still roundly beating Node.
[01:15:15] <cmr> I'm about to try with libnative
[01:16:06] * ChrisMorgan hasn't tried such things yet, would #[no_uv] be the correct attribute to make that happen?
[01:16:09] <cmr> yup
[01:16:11] <cmr> one sec
[01:17:08] <cmr> http://ix.io/9PS/diff
[01:17:26] <flu-> I'm wrapping up a C API that has a single enum with a number of duplicated constants. Rust will complain about a duplicate discriminate if I try to bring it over verbatim - any pointers on what might be a better route for wrapping these constants up? I also get in a bit of a bind with the fact that one of the definitions is defined in terms of bitwise operations on other values
[01:17:39] <flu-> *discriminant
[01:17:47] <cmr> flu-: don't use enums, use statics.
[01:18:04] <flu-> is the all caps naming convention enforced or just preferred?
[01:18:09] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[01:18:09] <cmr> prefered
[01:18:13] <flu-> k
[01:18:27] <ChrisMorgan> cmr: it's people like you that made the HTTP header Referer!
[01:18:48] <cmr> generally you should be exposing a high-level interface that uses rust idioms (like enums) anyway, not the raw C interface
[01:18:52] <cmr> ChrisMorgan: at least it's not Reefer!
[01:19:03] <cmr> ChrisMorgan: it seems that run.py is no longer printing the rust results..
[01:19:14] <cmr> it says it's running them, but doesn't print
[01:19:26] <ChrisMorgan> Could well be that it doesn't work.
[01:19:30] <flu-> cmr: I agree, but I think my API users would probably want to refer to these constants by name, and I need some way of packing them back up into bit flags before sending off to the api
[01:19:34] <ChrisMorgan> (i.e. HTTP serving isn't working.)
[01:19:57] <cmr> ah
[01:19:59] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[01:19:59] <cmr> task '<unnamed>' failed at 'Unhandled condition: io_error: io::IoError{kind: ConnectionRefused, desc: "address in use", detail: Some(~"Address already in use")}', /build/rust-git/src/rust/src/libstd/condition.rs:139
[01:20:02] <cmr> well
[01:20:05] <flu-> converting a somewhat complex library probably wasnt the best task to pick for learning rust. lol
[01:20:38] <ChrisMorgan> cmr: then something's already serving on that port
[01:20:45] <cmr> ss -ntlp disagrees.
[01:21:38] *** Quits: SingingBoyo (SingingBoy@DA28FB90.A5D0D593.4F048BDC.IP) (Quit: WeeChat 0.4.3-dev)
[01:24:13] <ChrisMorgan> cmr: then try again
[01:25:04] <ChrisMorgan> If something doesn't close a socket properly, it can be still unavailable until a timeout of some form.
[01:25:32] * ChrisMorgan discovered that when writing a C web server from scratch a couple of years ago
[01:26:00] <cmr> yeah
[01:26:20] <cmr> it works standalone but not when the script is running it
[01:27:02] * cmr raises the kill delay
[01:28:48] * ChrisMorgan must wait for Rust to build before he can check these things out himself
[01:30:01] <cmr> eugh it's just plain not working anymore. I wonder what libnative is doing differently.
[01:30:29] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[01:33:22] *** Quits: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net) (Client exited)
[01:35:02] *** Quits: magg (magg@14B25297.CD956C53.3D0AE249.IP) (Quit: magg)
[01:42:14] *** Quits: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net) (Ping timeout)
[01:44:10] *** Joins: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP)
[01:46:37] *** Joins: telotortium (rmi1@moz-46F0EE50.hsd1.ca.comcast.net)
[01:48:45] <cmr> wycats_: ChrisMorgan: with libnative we trounce go: https://gist.github.com/cmr/00e196c8b842a2042ac5
[01:49:31] <brson> cmr: at what?
[01:49:31] <dbaupp> cmr: no 8 for Rust?
[01:49:37] <cmr> brson: rust-http benchmarks
[01:49:45] <cmr> dbaupp: yeah, because of the weird socket in use thing :(
[01:49:49] <cmr> let me try a re-run
[01:50:00] *** Joins: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net)
[01:50:18] <brson> cmr: what are the numbers with libgreen?
[01:51:05] <cmr> brson: https://gist.github.com/cmr/39b82d46d6e10038f08c
[01:51:29] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[01:51:37] <cmr> pretty damning for libgreen I think
[01:52:20] <cmr> http://cmr.github.io/blog/2014/01/11/this-week-in-rust/
[01:52:23] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[01:52:29] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[01:52:35] <erickt1> Eridius: ping
[01:52:36] <brson> i imagine we can catch up, but at this point there may not be much incentive
[01:52:58] <ChrisMorgan> Sounds to me like libnative's TCP sockets don't handle disconnecting entirely correctly. Possibly a race condition somewhere in there.
[01:53:02] <dwrensha> cmr: sounds like there's an easy way to switch between libgreen and libnative
[01:53:07] <dwrensha> how does that work?
[01:53:08] <cmr> dwrensha: there is.
[01:53:18] <cmr> dwrensha: http://ix.io/9PS/diff :)
[01:53:19] <dwrensha> I'm interested in running my Cap'n Proto benchmark
[01:53:26] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[01:53:34] *** Joins: hjr3 (hradtke@moz-1ED9056D.lsanca.dsl-w.verizon.net)
[01:53:43] <cmr> I'm a bit sad #[boot] was cut, since that would have made it that much easier.
[01:54:46] <brson> once native is the default it will still be pretty easy to switch into green as long as you don't mind main being on a native thread
[01:54:50] <dwrensha> does std::os::args() not work in libnative?
[01:55:14] <cmr> it should
[01:55:20] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[01:55:26] <dbaupp> cmr: if we get exportable syntax extensions we could have `native::main!(...)` do the boilerplate of #[start] etc.
[01:55:41] <cmr> dbaupp: ohh that'd be fancy.
[01:55:58] <dbaupp> cmr: (although, as brson says, if native is the default this is irrelevant.)
[01:56:10] <cmr> sure but the same applies for green
[01:56:11] <dbaupp> green::main!(...)
[01:56:13] <dbaupp> yeah
[01:56:21] *** Joins: Cevn (sameer@moz-F316C21E.hr.hr.cox.net)
[01:56:51] <cmr> dwrensha: it does work, just tested.
[01:57:22] <brson> i realized that println! is not quite as convenient as println() when all you want to print is a string variable, since println! requires a literal as the first argument
[01:57:27] <dwrensha> ok, I just ran the benchmark
[01:57:35] <dwrensha> looks like libnative is almost twice as fast
[01:57:52] <brson> cmr: thanks for twir again this week
[01:57:59] <cmr> ofc
[01:58:00] *** Joins: diverse (diverse@moz-ED94B8D.oc.oc.cox.net)
[01:58:15] * dbaupp pokes cmr about state of 0.9
[01:58:22] <cmr> mmrrh
[01:58:25] <ChrisMorgan> brson: I just hit that in rust-http in one place, println(str::from_utf8(...)).
[01:58:38] <brson> cmr: at some point maybe we should consider reporting the number of open 1.0 issues, though I'm not sure if we're making enough progress on them to publicise
[01:59:00] * ChrisMorgan wonders, but is too lazy to check just precisely at present, whether println!("{}", str) is as efficient as println(str)
[01:59:17] <dbaupp> ChrisMorgan: little difference
[01:59:32] <brson> yeah i think the "{}" will end up being a no-op at runtime
[01:59:41] * ChrisMorgan hopes so
[01:59:54] <ChrisMorgan> cmr: can I get into your Quotes of the Week with a line like this, even if it's not about Rust except insofar as it says it's not about Rust?
[01:59:59] <brson> i wonder if there's a way to make it do the write thing for unary string calls
[02:00:02] <dbaupp> brson: it's probably not a complete no-op (given it's an indirect function call)
[02:00:03] <brson> *right
[02:00:14] <dbaupp> (and so can't be optimised as easily)
[02:00:34] <SiegeLord> Why can't you capture a possibly uninitialized value?
[02:00:38] <brson> dbaupp: I imagine that println!("{}", s) ends up as stream.write(s)
[02:00:47] <dbaupp> brson: I find that unlikely :)
[02:00:49] <brson> with the format string itself there's nothing to write to output
[02:00:53] <dbaupp> maybe with -Z LTO
[02:01:06] <cmr> ChrisMorgan: I'm about to write a QOTW nominator thingamabob (in Rust of course), so that decision will (hopefully) be out of my hands.
[02:01:13] <brson> really? doesn't the new format just end up as a bunch of calls to `write`?
[02:01:15] <SiegeLord> I'd imagine the better error would have been if I tried to read from it, not if I tried to initialize it...
[02:01:33] <ChrisMorgan> SiegeLord: sounds like a basic soundness assurance.
[02:02:12] <SiegeLord> It's a bit inconvenient... I'm initializing a variable with a return of a C function, which takes a C string
[02:02:26] <SiegeLord> And I do the with_c_str which forces a closure on me...
[02:02:40] <SiegeLord> Now I need to not only manually annotate the variable, but make it mutable too
[02:02:42] <phil_> is box() built-in or reserved now?
[02:02:50] <cmr> phil_: it has been reserved for a while.
[02:02:54] <phil_> hm
[02:03:04] <aatch> SiegeLord, since you're already working with unsafe, you can use the uninit() intrinsic.
[02:03:06] <dbaupp> brson: https://gist.github.com/huonw/3f93afcb75ab0c640c49
[02:03:10] <phil_> up until a couple of weeks ago ncurses-rs was fine
[02:03:18] <phil_> but now one of the examples wont compile
[02:03:20] <cmr> yeah that sounds about right, a couple of weeks.
[02:03:23] <dbaupp> brson: it emits an function pointer to the appropriate thing to call
[02:03:29] <dwrensha> cmr: thanks for the help. I'm excited that with libnative, Rust performs quite competitively to C++ on the Cap'n Proto benchmark.
[02:03:31] <phil_> actually
[02:03:33] <phil_> even a week ago
[02:03:36] <phil_> it was working
[02:03:39] <SiegeLord> aatch: Will that save me a type annotation?
[02:03:50] <aatch> SiegeLord, you shouldn't need it either way.
[02:04:04] <aatch> unless it actually can't infer the type.
[02:04:13] <SiegeLord> Ah, right... I didn't try it without it
[02:04:23] <SiegeLord> Well, I can live with it being mutable I gues
[02:04:25] <SiegeLord> *guess
[02:04:29] <cmr> phil_: it was reserved on december 15th
[02:04:48] *** Joins: mib_rni2gz (Mibbit@F4BFA80B.7CB713AB.EF43EC08.IP)
[02:05:12] <brson> dbaupp: oh, so it's only printing one thing (the string) but it's doing it indirectly?
[02:05:19] <aatch> SiegeLord, `uninit()` is a no-op btw, exists only to supress that one compiler error.
[02:05:24] *** Parts: mib_rni2gz (Mibbit@F4BFA80B.7CB713AB.EF43EC08.IP) ()
[02:06:02] <whitequark> dbaupp: btw, has it been improved recently?
[02:06:15] <dbaupp> brson: yes
[02:06:17] <whitequark> I recall the IR being much much fatter not long ago
[02:06:21] <phil_> hm ok
[02:06:24] <dbaupp> whitequark: that's with optimisations
[02:06:28] <copumpkin> omg there's a comex in here
[02:06:31] *** Joins: ehsanul (Mibbit@29896722.D02B26E5.A36C57B9.IP)
[02:06:31] <dbaupp> whitequark: LLVM is pretty good at trimming it down
[02:06:32] <whitequark> I think I tried with opts too...
[02:06:42] <whitequark> might want to recheck
[02:06:49] <SiegeLord> aatch: I wish there was documentation for these things
[02:07:01] <SiegeLord> *generated
[02:07:15] <dbaupp> brson: it looks alright with LTO https://gist.github.com/huonw/3f93afcb75ab0c640c49#file-lto-s
[02:07:52] <aatch> SiegeLord, well it's defined in unstable, which is explicitly hidden from the docs.
[02:08:19] <cmr> How do we feel about un-doc-hiddening unstable? There's lots of useful stuff in there :\
[02:08:56] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[02:09:08] <aatch> I think the name "unstable" makes that a bad idea, probably
[02:09:47] <ehsanul> hi everyone, just posted a question on reddit: http://www.reddit.com/r/rust/comments/1v2ptr/is_nonblocking_io_possible_in_rust/
[02:11:17] <SiegeLord> Anyway, uninit doesn't work
[02:11:18] <brson> cmr: I think docs should indicate the stability
[02:11:22] <SiegeLord> I still have to make it mutable
[02:11:23] <brson> show everything public
[02:11:31] <dbaupp> brson: (although, even with LTO, the indirect calls aren't being eliminated or inlined through the with_task_stdout call.)
[02:11:33] <brson> we need better stability calculations still though
[02:11:36] <SiegeLord> I might as well use a safe ptr::null() and have LLVM optimize it away
[02:11:36] <cmr> brson: they do: http://static.rust-lang.org/doc/master/std/reflect/index.html
[02:11:37] <dbaupp> brson: they do show some stability
[02:11:51] <cmr> should show it in the module index though
[02:11:55] <brson> awesome. you two are all over it
[02:12:05] <dbaupp> cmr: do they propagate it downwards? (i.e. things in an #[unstable] module aer unstable)
[02:12:05] <brson> i think we need stability to propagate up and down the ast
[02:12:22] <brson> down first, then up
[02:12:22] <cmr> dbaupp: unforuntately not.
[02:12:31] <dbaupp> I've tried to drive the compiler to do that
[02:12:34] <dbaupp> can't work out how
[02:12:35] <dbaupp> :(
[02:16:13] <cmr> I swear I have misspelled compiler "copmiler" a dozen times writing this one paragraph.
[02:16:47] <dbaupp> try writing "compiler metadata and intrinsics" or something like that
[02:17:01] <cmr> "copmiler meatdata and instrinsics"
[02:17:10] <dbaupp> <3 speeling
[02:17:23] *** Joins: skittles (Mibbit@moz-2198B477.dllstx.fios.verizon.net)
[02:17:25] <cmr> or, slightly more mangled, "instrinsic copfeeler meatiler"
[02:17:52] *** Quits: skittles (Mibbit@moz-2198B477.dllstx.fios.verizon.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:18:36] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[02:18:55] <brson> I always forget whether multiline strings do or do not eat whitespace and what \ at the end means
[02:19:05] *** Quits: hjr3 (hradtke@moz-1ED9056D.lsanca.dsl-w.verizon.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[02:19:32] <kimundi> brson: They don't eat per default, and \ at the end eats it ;
[02:19:40] <kimundi> ;)
[02:20:20] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[02:20:29] *** Joins: nightpool (nightpool@moz-7CAAC068.wi.res.rr.com)
[02:21:04] * geomyidae should write an irc bot in rust to post to #rust when there is a post to /r/rust
[02:21:05] <kimundi> (In other words, Rust does the lazy thing: everything between two " gets taken as is, and then escape codes apply)
[02:21:57] *** Joins: phil (phil@684D2576.37BA1B1C.20F09BA6.IP)
[02:21:58] <brson> geomyidae: nice idea
[02:22:16] <FliPPeh> geomyidae: you should call him Rusty
[02:22:20] <brson> or when something gets posted to hn/new
[02:22:28] <brson> to alert the upvote brigade
[02:22:36] <ChrisMorgan> geomyidae: good luck: it can't be done with TcpStream in safe code until there's select.
[02:23:09] <geomyidae> Yeah, I was kinda wondering, especially given that I'm currently stuck there in a project and given the most recent /r/rust post :s
[02:23:30] <geomyidae> http://www.reddit.com/r/rust/comments/1v2ptr/is_nonblocking_io_possible_in_rust/
[02:23:38] <ChrisMorgan> HTTP/2.0 can't be implemented either for the same reasons—we must be able to read and write simultaneously.
[02:24:17] <ehsanul> how big of a deal would adding select be?
[02:24:20] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[02:25:09] <brson> ehsanul: acrichto might be able to mentor someone who wants to work on it
[02:25:32] <brson> it's probably like, hard, but not that hard, to be scientific about it
[02:25:32] *** Quits: tristramh (tris@moz-F94D69DC.lns20.syd6.internode.on.net) (Ping timeout)
[02:25:51] <brson> have to find an api that works for both runtimes
[02:26:03] <brson> for all i know acrichto might know exactly how to do it already
[02:27:17] <ehsanul> brson: i could probably devote my weekends to it, since I can't go further with my websockets library without it
[02:27:24] <ChrisMorgan> I take back what I said earlier about documentation and packaging being the two most urgent things for Rust at present—I had forgotten this. I think that this is more urgent than both of them.
[02:27:29] <nrc> is it possible to call a static method defined on a trait?
[02:27:33] <Eridius> erickt1: pong
[02:27:34] <cmr> nrc: yes.
[02:27:39] <cmr> TraitName::method()
[02:27:56] <ChrisMorgan> nrc: so long as the type of Self can be inferred (i.e. it is in the signature as an argument or return type).
[02:28:32] <nrc> ChrisMorgan: I thought static methods did not have self?
[02:28:43] <ChrisMorgan> nrc: Self, not self.
[02:28:44] <cmr> nrc: upper-case Self, the type the trait is implemented for.
[02:28:54] <dbaupp> brson: "have to find an api that works for both runtimes" If we can't find one that is performant for both, will we just punt on IO selection?
[02:28:57] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[02:28:57] *** Quits: jzcz (nick@moz-4C262E7E.dyn.centurytel.net) (Ping timeout)
[02:29:12] *** Joins: jzcz (nick@moz-4C262E7E.dyn.centurytel.net)
[02:29:18] *** Quits: Earnestly (earnest@moz-E86D50FA.dyn.plus.net) (Ping timeout)
[02:29:22] <erickt1> Eridius: good evening! I had a question about Path::components. I find it a little surprising that the components of "/foo/bar/baz" are ["foo", "bar", "baz"] and not ["/", "foo", "bar", "baz"]
[02:29:41] <nrc> cmr, ChrisMorgan: why does that constraint exist?
[02:29:54] <Eridius> erickt1: it is a bit odd, but the former can be joined with the path separator and the latter can't
[02:29:56] <cmr> nrc: it's a bug
[02:30:09] <cmr> the eventual syntax, when Self cannot be inferred, will be TraitName::<for T>::method()
[02:30:09] <nrc> ah, ok
[02:30:18] <cmr> (where `T` is `Self`)
[02:30:20] <erickt1> Eridius: that's why I'm adding a Path::from_components method :)
[02:30:31] <Eridius> hah. I feel like I had some other reason too, but I don't remember anymore
[02:31:01] <erickt1> Eridius: okay :) I'll start working on a PR to make the change.
[02:31:07] <Eridius> I'm willing to be convinced that it should be changed, but windows paths would be problematic as the latter
[02:31:12] <nrc> cmr: why do you need any Self type though? If the method is defined in TraitName, what more needs to be known?
[02:31:20] <Eridius> erickt1: //?/foo/bar/baz components would be.. what? (with the change)
[02:31:30] <Eridius> make that \\?\foo\bar\baz. stupid windows
[02:31:38] <Eridius> and \\?\UNC\foo\bar]baz?
[02:31:40] <erickt1> Eridius: I was planning on following what Python does.
[02:31:43] <Eridius> gah, s/]/\/
[02:31:46] <cmr> nrc: you need to know the method to call, and to get that you need to know which type the trait is implemented for to call.
[02:31:51] *** Quits: Cevn (sameer@moz-F316C21E.hr.hr.cox.net) (Ping timeout)
[02:31:56] <Eridius> erickt1: I don't think python handles windows paths specially, but I'm not sure
[02:32:18] <cmr> Compiling `fn main() { }` is 1.2 - 1.6 faster than 0.8. (1.2 for static linking, 1.6 for dynamic)
[02:32:21] <erickt1> Eridius: I'm not sure what "\\?\foo" does, but it does split "c:\foo\bar", into ["c:", "\", foo", "bar"]
[02:32:25] <cmr> 1.2-1.6x, that is.
[02:32:44] <erickt1> Eridius: I'll do a survey
[02:32:54] <Eridius> erickt1: \\?\foo is a curious type of path. See http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247.aspx
[02:33:14] <nrc> cmr: what exactly do you mean by 'type'? I would have thought the name of the trait is enough of a type
[02:33:19] * nrc is missing something....
[02:33:21] <Eridius> erickt1: heck, even just \\server\share\path is non-obvious how you would handle
[02:33:28] <nightpool> What would the difference be between Trait::<for T>::method() and T::method()? 
[02:33:32] <brson> dbaupp: no, I/O select is critical. we'll make it work
[02:33:43] <kimundi> halorgium: Whew, finished, sorta. It's way to late here, and I'm not exactly a good writer, but this should be usable: https://gist.github.com/Kimundi/8391398
[02:33:43] <Eridius> nightpool: static trait methods must be called on the trait, not the implementing type
[02:33:57] <cmr> nrc: take FromPrimitive for example. FromPrimitive::from_uint. What type do you want that to return?
[02:34:09] <nightpool> Any particualy reason?
[02:34:14] <nightpool> *particular
[02:34:38] <kimundi> Anyone else here who wants to look at a light comparison of Rust and Java generics I wrote?
[02:34:44] <cmr> kimundi: yes
[02:34:52] <erickt1> Eridius: "\\\\server\\foo" gets split into ["\\\\", "server", "foo"]
[02:34:56] *** Joins: gnuvince (vince@moz-A18BB9C9.dsl.colba.net)
[02:35:01] <erickt1> Eridius: in python
[02:35:07] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[02:35:24] <Eridius> erickt1: ehh, that's not very great :/
[02:35:26] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[02:35:28] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[02:35:32] <kimundi> https://gist.github.com/Kimundi/8391398 - Probably needs a proofreader though, and someone to tell me where I'm wrong. :P
[02:35:42] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[02:35:42] *** ChanServ sets mode: +ao brson brson
[02:35:42] *** Joins: Cevn (sameer@moz-F316C21E.hr.hr.cox.net)
[02:36:01] <Eridius> also C:\foo vs C:foo, turning foo\bar\baz into ["foo", "bar", "baz"] makes it look like the empty spaces all get backslashes, but C:foo into ["C:", "foo"] is not supposed to have the backslash
[02:36:05] <Eridius> erickt1: ^
[02:36:09] <dbaupp> kimundi: "type erasue"
[02:36:10] <nrc> cmr: that makes sense because Slef is in the return type, but if there is no Self type used in the method, then why do we need to infer one?
[02:36:18] <steveklabnik> kimundi: reading
[02:36:26] <cmr> nrc: because we need to know what function to call.
[02:36:30] <nrc> cmr: assuming the static method has a default implementation in the trait, not just a signature
[02:36:32] <steveklabnik> i have also written a new short utirla
[02:36:34] <cmr> nrc: every implementation of the trait is going to have a different one.
[02:36:35] <steveklabnik> tutorial
[02:36:41] <steveklabnik> that i'll be sharing tomorrow
[02:36:42] <Eridius> erickt1: basically, this style of handing component splitting for windows paths seems ill-defined and full of special cases for how the resulting component array is to be interpreted
[02:36:43] <cmr> ok, default it's not so obvious that it's necessary.
[02:36:50] <dbaupp> kimundi: (the Java implementation ends up requiring virtual calls, right?)
[02:37:07] <gnuvince> Is there a guide somewhere that describes what good Rustic code looks like?  I'm doing some Project Euler projects, and I usually end up with two solutions: one that is pretty much like I'd write it in C with everything marked mutable, and the other like I'd write it in Haskell with inner, tail-recursive functions.  Is there a nice middle ground?
[02:37:15] <kimundi> dbaupp: A quick googling told me yes, plus minus jit optimizations
[02:37:17] <dbaupp> kimundi: s/instanciation/instantiation/
[02:37:21] *** Quits: scpayson (scp@moz-9BEDE8C8.hsd1.ca.comcast.net) (Ping timeout)
[02:37:29] <cmr> nrc: the concrete implementation can still override it.
[02:37:42] <steveklabnik> gnuvince: we don't have anything GREAT yet, but...
[02:37:55] <steveklabnik> gnuvince: https://github.com/mozilla/rust/wiki/Note-style-guide
[02:37:58] <Eridius> gnuvince: fwiw a lot of "mutable" variables don't necessarily have to be mutable, you can redeclare them if they're in the same scope, e.g. `let a = 3; let a = a+1`
[02:38:08] <geomyidae> Did bindgen's builtins flag change? It doesn't seem to completely output builtins anymore
[02:38:29] <dbaupp> kimundi: I'd say you should mention the jargon "virtual call" at least once :)
[02:38:31] <nightpool> I'm still wondering why they can't be called on the implementing type. Just to simplify dispatch?
[02:38:44] <Eridius> nightpool: also to avoid ambiguity
[02:39:01] *** Quits: quux00 (Mibbit@moz-59EA8D29.drr01.drhm.nc.frontiernet.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:39:06] <dbaupp> kimundi: s/SomeStandartTrait/SomeStandardTrait/
[02:39:11] <steveklabnik> kimundi: "Javas Type system is build" -> "Java's type system is built"
[02:39:17] <dbaupp> kimundi: (also, Rust's trait objects?)
[02:39:36] <steveklabnik> kimundi: and some 'java' -> Java
[02:39:42] <nrc> cmr: so the path to a fn does not dictate the actual fn called, even if it is a static path, it just gives a static 'labelling' of the function
[02:39:46] <gnuvince> Eridius: is that good style?
[02:39:47] <steveklabnik> "emitt" -> emit
[02:39:59] <Eridius> gnuvince: depends on what you're doing. I use that trick sometimes
[02:40:04] <gnuvince> ok
[02:40:39] <nrc> cmr: in other words, 'static' means literally static dispatch, not static location as in C
[02:40:42] <nrc> ++
[02:40:55] <cmr> nrc: basically
[02:41:05] <dwrensha> nightpool: there's a discussion here: http://smallcultfollowing.com/babysteps/blog/2013/04/03/associated-items-continued/
[02:41:06] <cmr> "static method" is an astoundingly poor name.
[02:41:11] <cmr> What they really are is associated functions.
[02:41:11] *** Joins: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP)
[02:41:35] *** Quits: Cevn (sameer@moz-F316C21E.hr.hr.cox.net) (Ping timeout)
[02:42:37] <nrc> cmr: cool. Thanks for helping me understand :-)
[02:43:29] <kimundi> dbaupp: Yeah, Rusts's trait objects are relevant, but not exactly part of generics.
[02:44:18] <dbaupp> kimundi: maybe mentioning "Rust's trait objects provide very similar functionality to Java-style generics"
[02:44:33] *** Joins: tristramh (tris@moz-F94D69DC.lns20.syd6.internode.on.net)
[02:45:26] <nightpool> Oh, its cause of multiple inheritance. I get it. Or at least that's how I'm explaining it to myself. That makes sense.
[02:45:33] *** Joins: Cevn (sameer@moz-F316C21E.hr.hr.cox.net)
[02:47:03] <erickt1> Eridius: here's a python components-esque script: https://gist.github.com/erickt/8393956 
[02:52:01] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[02:52:01] *** ChanServ sets mode: +o jdm
[02:52:27] <bstrie> bjz: what was the name of your lispy rust language thing?
[02:52:44] <cmr> rusp
[02:53:04] <cmr> dwrensha: ping
[02:53:15] <dwrensha> cmr: pong
[02:53:30] <cmr> dwrensha: can you write up something about the capn proto benchmark on libnative? I'd like to include in the state of rust
[02:53:57] <dwrensha> cmr: yeah, I was planning on doing that eventually
[02:54:12] <dwrensha> what's "the state of rust"?
[02:54:36] <cmr> It's the postmortem I write every release about the super cool stuff that happened, where we've improved, and what to expect moving forward.
[02:54:50] <dbaupp> bstrie: it's rather dead :P
[02:54:52] <cmr> ("every release"; since 0.7, when I got involved)
[02:54:54] <dwrensha> so this would be about 0.9?
[02:54:58] <cmr> yes
[02:55:47] *** Joins: hjr3 (hradtke@moz-1ED9056D.lsanca.dsl-w.verizon.net)
[02:56:08] <kimundi> dbaupp: Added a bit about trait objects at the end of the gist, and also fixed all spelling mistakes mentioned here.
[02:56:44] <nightpool> So, what's wrong with this line? I'm trying to generate a [0,1] random number, and I copied this code exactly from the docs. let rand::Closed01(val) = random::<rand::Closed01<f32>>(); 
[02:56:56] <nightpool> However, rustc says "mismatched types: expected `std::rand::Closed01<f32>` but found `std::rand::Closed01<BUG[0u]>` (expected f32 but found type parameter)"
[02:57:50] <dwrensha> cmr: hm. I suppose I could make a branch that's compatible with 0.9.
[02:58:13] <cmr> dwrensha: it's fine if the data is from rust master.
[02:58:17] <cmr> it's only been 3 days
[02:58:28] <dwrensha> cmr: but it's incompatible already
[02:58:28] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Ping timeout)
[02:58:48] <dwrensha> cmr: what's your timeline for TSOR?
[02:59:06] <cmr> I'm almost finished
[02:59:11] <ChrisMorgan> cmr: ignoring the option of libnative which is now feasible, rust-http benchmarks have certainly improved significantly from 0.8 to 0.9, most especially in scalability to multiple cores—on my dual core machine it was getting scalability of 1.25× from 1 to 8 concurrent requests, now it's more like 1.75×.
[02:59:22] <cmr> dwrensha: the point is to compare libgreen/native perf.
[02:59:42] <FliPPeh> nightpool: Try "... = random::<rand::Closed01::<f32>>();"
[02:59:50] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[03:00:49] <nightpool> No, that doesn't work. Because the closed01 is a generic type
[03:00:56] <nightpool> The function call is on random
[03:01:10] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[03:01:14] <FliPPeh> Oh right
[03:01:48] <Yurume> nightpool: a full example?
[03:02:01] <comex> copumpkin: hello
[03:02:23] <Yurume> hmm okay
[03:02:29] <comex> i'm here to complain about rustc while not being helpful
[03:02:29] <Yurume> I have reproduced the problem
[03:02:40] <nightpool> https://gist.github.com/nightpool/8394056
[03:02:45] *** Quits: hjr3 (hradtke@moz-1ED9056D.lsanca.dsl-w.verizon.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[03:02:57] <copumpkin> comex: aha, sounds like a good plan
[03:04:55] <dwrensha> cmr: I think I could have a writeup in a few days. There's one new feature that I've implemented and would like to add to the benchmark first.
[03:05:32] <bstrie> ChrisMorgan: wycats_ was saying that he'd been having poor performance with rust-http, wondered if he ever caught up with you
[03:06:08] <ChrisMorgan> bstrie: sort of; we've been discussing performance matters a little
[03:06:32] <ChrisMorgan> wycats_: are your performance figures comparable with the ones cmr posted or which are in comparisons/README.txt?
[03:06:49] *** Quits: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP) (Client exited)
[03:07:40] *** Joins: Dessimat0r (Dessimat0r@moz-E3008B7A.me)
[03:08:39] *** Quits: ling0322 (Android@D4D993B6.80E526F4.57F5F11F.IP) (Quit: -a- Android IRC 2.1.3)
[03:09:31] <bstrie> dbaupp: I agree with not giving steveklabnik, the doc string syntax, since that's dumb. but also I hate our attribute syntax, as appropriate as it is :P
[03:09:38] <bstrie> I was thinking `do steveklabnik`
[03:09:55] <bstrie> because it looks a little ruby-esque
[03:09:57] <steveklabnik> heheh
[03:10:00] *** Quits: veddan (viktor@moz-C79BC80B.csbnet.se) (Connection reset by peer)
[03:10:14] <bstrie> steveklabnik: would you prefer to be a docstring or would you prefer to be do-ed
[03:10:24] <steveklabnik> docs
[03:10:47] <steveklabnik> :D
[03:11:28] <dbaupp> bstrie: using the ugly attribute syntax was partly punishment for *asking* for flair. What sort of a monster what do that!?
[03:11:38] *** Joins: veddan (viktor@moz-C79BC80B.csbnet.se)
[03:11:41] <bstrie> dbaupp: indeed, I think it is an appropriate punishment
[03:11:44] <steveklabnik> hehe
[03:11:50] <steveklabnik> yeah, i can't read apparently :(
[03:11:52] <bstrie> but now that I know that he likes it I think maybe we should give him the opposite
[03:12:06] <bstrie> steveklabnik: do you have this new feature enabled in your web browser, it is called: CSS
[03:12:15] <steveklabnik> does it work with lynx?
[03:12:18] *** Joins: hjr3 (hradtke@moz-1ED9056D.lsanca.dsl-w.verizon.net)
[03:12:19] <bstrie> ...yes
[03:12:32] *** Quits: hjr3 (hradtke@moz-1ED9056D.lsanca.dsl-w.verizon.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[03:12:34] <steveklabnik> just kidding, i actually run iceweasel
[03:12:49] <bstrie> I mean of all the CSS features, before and after pseudoelements would probably be the easiest to support in lynx
[03:13:05] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[03:13:11] <bstrie> as long as they only have text content
[03:15:12] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[03:16:35] *** Joins: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP)
[03:17:02] <dbaupp> kimundi: "goes through a pointer at all", s/at all// ?
[03:17:20] *** Quits: paulproteus (quassel@199.199.210.158) (Ping timeout)
[03:17:31] *** Quits: tristramh (tris@moz-F94D69DC.lns20.syd6.internode.on.net) (Ping timeout)
[03:17:31] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[03:17:42] *** Joins: eholk (eholk@moz-58C5EE6F.wavecable.com)
[03:18:01] <dwrensha> cmr: I'm happy to push for a mid-week capnproto-rust benchmark post if that that means you can include it, but no problem if you want to post sooner. Just let me know.
[03:18:22] <dbaupp> kimundi: (also, virtual calls are harder to optimise, (e.g. inlining))
[03:18:24] *** Quits: kimundi (kimundi@moz-6726BDB1.dip0.t-ipconnect.de) (Ping timeout)
[03:18:55] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[03:19:06] *** Joins: paulproteus (quassel@458FE134.3EC36C88.CBDCF1DC.IP)
[03:19:10] *** Quits: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com) (Ping timeout)
[03:19:33] *** Quits: dapz (textual@moz-F958911.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:20:47] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[03:21:07] <cmr> dwrensha: I'll just say you report a 2x perf improvement with libnative, without any citation.
[03:21:39] *** Joins: kimundi (kimundi@moz-B9792FFA.dip0.t-ipconnect.de)
[03:22:10] <dbaupp> bstrie: I couldn't work out how to use " directly, fwiw (you should use your higher CSS level to beat that boss and fix it.)
[03:22:27] <dbaupp> kimundi: did you see my last two messages?
[03:22:41] <dbaupp> kimundi: https://botbot.me/mozilla/rust/msg/9692868/
[03:23:09] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Ping timeout)
[03:24:21] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[03:24:23] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[03:25:58] *** Quits: victorporof (victorporo@416E2802.271BFD43.9B1E38F4.IP) (Quit: victorporof)
[03:26:12] *** kimundi is now known as zz_kimundi
[03:26:50] *** Joins: aravindavk (aravinda@164F9FE7.C4563864.274D17D6.IP)
[03:27:18] <Tobba> bleh, managed some cleanup
[03:27:56] <cmr> steveklabnik: how would you describe the presentation you gave at Bay Area Rust about the docs?
[03:28:02] <cmr> I don't want to say harsh, because that has negative connotations..
[03:28:06] <steveklabnik> heh
[03:28:15] <steveklabnik> hmmmmmm
[03:28:15] <bstrie> dbaupp: I fucking HATE reddit's stupid CSS validator
[03:28:20] <steveklabnik> tough love?
[03:28:21] <Tobba> oh right, steves presentation
[03:28:27] <Tobba> I forgot about that actually
[03:28:37] <bstrie> REDDIT THIS IS LEGAL CSS
[03:28:40] <cmr> I'm not sure that's an adjective.
[03:28:44] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Quit: )
[03:28:47] <steveklabnik> it's not
[03:28:53] <cmr> "Steve Klabnik gave a _____ presentation about ..."
[03:29:06] *** Quits: jadbaires (jadrian@B338873B.2E7B5617.6119BA41.IP) (Quit: Konversation terminated!)
[03:29:07] <steveklabnik> brutal
[03:29:08] <steveklabnik> :p
[03:29:11] <cmr> why not
[03:29:12] <steveklabnik> hmmmmmm
[03:29:13] *** Joins: jadbaires (jadrian@moz-EE1C894.dsl.telepac.pt)
[03:29:22] <Tobba> lets see what thesaurus has to say
[03:29:26] <cmr> The State of Rust is supposed to make us look *good* :P
[03:29:36] <dbaupp> cmr: "harsh but constructively-critical"
[03:29:42] <cmr> criticl!
[03:29:45] <cmr> *critical
[03:29:48] <cmr> that's the word.
[03:30:02] * dbaupp is the Thesaurust
[03:30:06] *** Joins: ross (r@moz-35D0ADAB.clr.io)
[03:30:12] *** Quits: jadbaires (jadrian@moz-EE1C894.dsl.telepac.pt) (Connection reset by peer)
[03:30:18] *** Joins: jadbaires (jadrian@moz-EE1C894.dsl.telepac.pt)
[03:30:24] *** Quits: biardjd (kzzch@moz-BB97B490.washdc.fios.verizon.net) (Quit: WeeChat 0.4.1)
[03:30:34] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[03:30:53] <dwrensha> cmr: qualify it with "approximately", and I'm happy with that
[03:31:00] <cmr> dwrensha: alright. thanks <3
[03:31:07] *** Quits: jzcz (nick@moz-4C262E7E.dyn.centurytel.net) (Quit: Konversation terminated!)
[03:31:10] <steveklabnik> ahh yes
[03:31:13] <bstrie> dbaupp: so the reason that it is impossible to do quotation marks is because reddit's css validator is satan, who is the devil
[03:31:17] <steveklabnik> why did i not think of critical
[03:31:20] <dbaupp> bstrie: >:(
[03:31:31] <steveklabnik> given that that's like all i do
[03:31:32] <bstrie> dbaupp: http://www.reddit.com/r/bugs/comments/15snr0/backslashes_are_completely_disallowed_irrelevant/
[03:31:32] <Tobba> does it not check for quote escaping properly or something
[03:31:37] <Tobba> just use unicode quotes
[03:31:43] *** Quits: mleise (marco@moz-850E56A9.pools.arcor-ip.net) (Ping timeout)
[03:31:49] <bstrie> yeah I think that's the next approach
[03:31:51] <bstrie> still makes me mad
[03:32:19] <dbaupp> does CSS allow single quotes as well as double?
[03:32:23] <steveklabnik> dumb question time
[03:32:24] <steveklabnik> http://static.rust-lang.org/doc/0.9/extra/base64/enum.CharacterSet.html
[03:32:25] <steveklabnik> i have
[03:32:30] <steveklabnik> use extra::base64::CharacterSet;
[03:32:33] *** Quits: eholk (eholk@moz-58C5EE6F.wavecable.com) (Quit: eholk)
[03:32:38] <steveklabnik> but when I try to refernece UrlSafe it doesn't work
[03:32:43] <Tobba> I had that issue earlier
[03:32:46] <cmr> ChrisMorgan: are you actively working on a reST whatevermabob (environment?)?
[03:32:48] * ChrisMorgan likes his “ ‘curly quotation marks’ ” and types them reg’larly
[03:32:54] <Tobba> use extra::base::{Standard, UrlSafe}
[03:32:55] <Tobba> I think
[03:32:58] <ChrisMorgan> cmr: not yet
[03:33:01] <dbaupp> steveklabnik: you need to import the variants you use explicitly too
[03:33:02] *** zz_kimundi is now known as kimundi
[03:33:20] <steveklabnik> ahhh, that makes sense
[03:33:23] <steveklabnik> thanks Tobba !
[03:33:27] <steveklabnik> (and dbaupp )
[03:33:41] <steveklabnik> ChrisMorgan: cmr: yeah, i'd like to see it happen. i haven't had time to try it either
[03:34:26] *** Joins: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca)
[03:34:52] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[03:35:24] *** Quits: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP) (Quit: Lost terminal)
[03:37:16] *** Quits: darthdeus (darthdeus@62EE3073.3B96A244.4E88690D.IP) (Quit: Leaving...)
[03:38:08] <cmr> wycats_: btw did you ever figure out that weird ffi problem?
[03:43:49] <wycats_> cmr: which one?
[03:43:55] <cmr> wycats_: there were multiple? D:
[03:44:00] <wycats_> the one where I was getting a segv?
[03:44:03] <cmr> something about skylight_log
[03:45:12] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[03:45:29] <cmr> maybe
[03:45:44] <cmr> you were giving a pointer to C (or maybe the other way around) and it wasn't coming through correctly.
[03:46:18] <wycats_> yeah tl;dr
[03:46:26] <wycats_> Option<&str> is not a nullable Slice
[03:46:28] *** Joins: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP)
[03:46:36] *** Joins: tristramh (tris@moz-F94D69DC.lns20.syd6.internode.on.net)
[03:46:36] <cmr> it... isn't?
[03:46:41] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[03:46:42] <cmr> is it a bug?
[03:46:45] <wycats_> it's a struct { discrim: u8, slice: Slice }
[03:46:48] <wycats_> allegedly no
[03:46:58] <wycats_> we need a rust.h to handle this stuff
[03:47:08] *** Quits: telotortium (rmi1@moz-46F0EE50.hsd1.ca.comcast.net) (Ping timeout)
[03:47:34] <cmr> how unexpected :(
[03:47:40] <Tobba> is there any way to have mutables without them ending up all over the place
[03:47:46] <Tobba> by moving
[03:47:51] <cmr> Tobba: &mut ?
[03:47:58] <pyon> When T: Freeze + Send, then extra::arc::Arc<T> implements Freeze, right?
[03:47:58] <SiegeLord> Is it a thing to use complicated Rust types for FFI?
[03:48:03] <Tobba> taking out all the mut's out of this block works, since it doesnt mutate anything, it stops the moving issues
[03:48:10] <Tobba> but I need it to return a mutable version, I might just have to transmute it
[03:48:20] *** Joins: telotortium (rmi1@moz-46F0EE50.hsd1.ca.comcast.net)
[03:48:30] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[03:48:30] <Tobba> but, safety
[03:48:53] <dbaupp> pyon: yes
[03:49:11] <pyon> Ah, nice! :-)
[03:49:26] <Tobba> basicaly, see this mess http://pastebin.com/JpuJhKbu
[03:49:32] <Tobba> if you take every instance of "mut" out, it compiles
[03:49:49] <Tobba> if you leave them in it fails due to moving, but I need the function to return a mutable version of the structure
[03:49:53] <dbaupp> pyon: (fwiw, any Arc you can construct will always be freeze since the only way to make one has a Freeze bound)
[03:50:09] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[03:50:48] <dbaupp> Tobba: i'm nearly 100% sure you can make it safe using std::util::replace (or a reimplementation of it)
[03:51:13] <Tobba> yeah I'm just kinda not following how that'd work
[03:51:33] <dbaupp> every time you need to move out to return
[03:51:37] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Quit: Lost terminal)
[03:51:44] <dbaupp> you match on `replace(<the value>, None)`
[03:51:49] <dbaupp> rather than just <the value>
[03:52:10] <dbaupp> and then if you take a branch that doesn't return, set the value back to it's original value
[03:52:15] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[03:52:15] *** ChanServ sets mode: +ao brson brson
[03:52:20] <Tobba> ah, hm
[03:52:24] <Tobba> that seems really silly though
[03:52:34] <dbaupp> safety
[03:53:08] <dbaupp> (it won't be too expensive: the values you're handling are just nullable pointers, so replace(x, None) is just setting the original value to 0)
[03:53:28] <dbaupp> ... oh, I forgot, it needs to be `match x {` => `match replace(&mut x, None) { ... }`
[03:54:02] <dbaupp> (the additional &mut shouldn't change anything though.)
[03:54:37] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[03:54:37] *** ChanServ sets mode: +ao dherman dherman
[03:54:56] <Tobba> I think I'll just opt for this gem
[03:54:57] <Tobba> fn fuckit<'c>(a: &'c LANode) -> Option<&'c mut LANode> { unsafe { Some(transmute(a)) } }
[03:55:20] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[03:55:27] <dbaupp> that's ... breaking some compiler invariants
[03:55:46] <Tobba> probably, I havent tested it yet
[03:55:50] <dbaupp> you may find things blow up in your face (maybe not now, but the compiler may change)
[03:56:08] <Tobba> yeah this is a really shitty idea
[03:56:39] <Tobba> I'm just getting tired of all this mutability being really annoying + having to put in replace() stuff in very performance critical code, even though the hit is minimal
[03:56:54] <wycats_> SiegeLord: I should write up a thing about Rust types with FFI
[03:57:08] <dbaupp> Tobba: you could use unsafe code
[03:57:13] <dbaupp> (in the actual loops)
[03:57:26] <wycats_> tl;dr pass rust types to FFI and have the other side call back into Rust to do stufg
[03:57:29] *** Joins: hjr3 (hradtke@moz-1ED9056D.lsanca.dsl-w.verizon.net)
[03:57:37] <Tobba> making the loop unsafe would work?
[03:57:37] <wycats_> Treat it like an opaque pointer
[03:57:39] *** Quits: hjr3 (hradtke@moz-1ED9056D.lsanca.dsl-w.verizon.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[03:57:57] <SiegeLord> wycats_: It seems weird to depend on implementation details of enums w/e other type not defined in std::libc
[03:58:07] <dbaupp> Tobba: you'd have to change from using &mut to passing around a *mut, and then `&mut *x` when you return it (to get a &mut)
[03:58:39] <wycats_> Also have externed functions take &T or ~T and obey the invariants on the C side
[03:59:18] <dbaupp> Tobba: I personally would write it with replace and check to if LLVM can't remove the zeroings (since it probably can, written correctly, all the zeroings are dead stores), which would leave you with safe and fast code
[03:59:40] <Tobba> ugh
[03:59:41] <Tobba> probably
[03:59:48] <wycats_> SiegeLord: in general yes but passing an optional string to rust is unfortunately sometimes necessaru
[04:00:14] <SiegeLord> Why not pass a char*?
[04:00:18] <Tobba> it feels dumb it moves stuff even if you're not going to mutate it
[04:00:21] <Tobba> I'll do the replace() stuff though
[04:00:30] <Tobba> although llvm's optimizer is weirdly unreliable
[04:00:47] <Tobba> sometimes it makes some really genius optimizations, other times its just smoking crack
[04:01:06] <dbaupp> this one seems like something that should be pretty easy once replace gets inlined
[04:01:06] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Ping timeout)
[04:01:19] <Tobba> probably actually
[04:01:45] <diverse> Tobba: how's the kernel?
[04:01:54] <Tobba> memory allocator madness
[04:01:57] <Tobba> + goddamn mutability
[04:02:02] <diverse> ahh...
[04:02:10] <Tobba> been stuck on it for a while
[04:02:14] <dbaupp> <3 smart compilers
[04:02:16] <dbaupp> :P
[04:02:18] <Tobba> I can make it work in a really shitty way where the tree doesnt self balance
[04:02:31] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[04:02:34] <Tobba> then I'll fix it later when it starts to have shitfits I guess
[04:03:51] <diverse> Sounds like you have made some progress
[04:04:46] <whitequark> Tobba: LLVM's optimizer apparently chokes on rustc's output sometimes because it's mainly tuned to accept clang's
[04:04:46] *** Quits: onix (Mibbit@moz-4806B979.nyc.res.rr.com) (Quit: http://www.mibbit.com ajax IRC Client)
[04:04:53] <nightpool> Could someone take a look a this code for generating a random number? Its not compiling, even though I copied the code straight from the docs, and I'm very sure it should work. The code is https://gist.github.com/nightpool/8394056 and the error the compiler gives me is error: mismatched types: expected `std::rand::Closed01<f32>` but found `std::rand::Closed01<BUG[0u]>` (exp
[04:04:54] *** Joins: yng (user@moz-F9859B59.nyc.res.rr.com)
[04:04:55] <Tobba> heh
[04:04:58] <nightpool> ected f32 but found type parameter)
[04:05:12] <diverse> whitequark: ouch
[04:05:15] <Tobba> reminds me of how the memcpy detection would only kick in when I made the function extern "C"
[04:05:33] *** Quits: Cevn (sameer@moz-F316C21E.hr.hr.cox.net) (Ping timeout)
[04:06:23] <dbaupp> Tobba: `let mut x = 1; replace(&mut x, 10)` gets optimised to just 1 for me.
[04:06:47] <Tobba> you mean 10?
[04:06:54] <Tobba> or wait no
[04:07:06] <diverse> because x is referenced?
[04:07:07] <wycats_> In general I like to avoid taking c types in externed functions
[04:07:21] <wycats_> It gives me another thing to reason about
[04:07:23] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[04:07:42] *** kimundi is now known as zz_kimundi
[04:07:43] <wycats_> I'd rather have a rust.h with a OPTION_SLICE(ptr, len)
[04:07:58] <wycats_> Keep in mind that rust will already obey invariants about ownership with a slice
[04:08:26] <wycats_> i.e. the C code can avoid copying and get guarantees from the rust side
[04:08:35] *** Quits: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net) (Quit: bye!)
[04:08:39] <dbaupp> nightpool: that's weird
[04:08:41] <wycats_> That's generally why I like the rust side to take slices 
[04:08:48] <wycats_> And &T in general
[04:08:58] <nightpool> dbaupp: Tell me about it
[04:09:15] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[04:09:20] <SiegeLord> wycats_: Well, as long as it's legitimately specified and tested, I guess it's fine...
[04:09:26] <nightpool> The compiler error is on the gist too, it got borked by IRC and my copying.
[04:09:51] <dbaupp> nightpool: I'm so confused
[04:09:55] <SiegeLord> But it seems weird to needlessly constrain a compiler in implementing a type efficiently
[04:10:02] <dbaupp> this makes no sense at all... ;/
[04:10:05] *** Quits: moostik (Icedove@moz-53E05E9C.w92-151.abo.wanadoo.fr) (Ping timeout)
[04:11:12] <diverse> nightpool: wtf is 'BUG[0u]'?
[04:11:13] <dbaupp> nightpool: this work around works https://gist.github.com/huonw/5eb5ea125c54ba1f791a
[04:11:19] <Tobba> ugh, gotta implement util::swap
[04:11:22] <dbaupp> diverse: internal compiler error, basically
[04:11:27] <Tobba> not happy with the default implementation, time to do a goddamn xor swap on this
[04:11:28] <dbaupp> Tobba: it's pretty trivial ;P
[04:11:29] *** Joins: moostik (Icedove@moz-53E05E9C.w92-151.abo.wanadoo.fr)
[04:11:33] <nightpool> Woot! 
[04:11:38] <dbaupp> Tobba: that's... slower?
[04:11:40] <nightpool> Workarounds are good enough for me. 
[04:11:59] <Tobba> default is p big
[04:12:00] <dbaupp> Tobba: (I'm sure LLVM will recognise and lower a swap to xoring if it things it will be faster.)
[04:12:08] <diverse> Tobba: you need a swap function?
[04:12:12] <nightpool> at this point my workaround was num::cast(4).unwrap() // Chosen by fair dice roll
[04:12:19] <dbaupp> heh
[04:12:22] <Tobba> yeah, std's uses like 4 other weird functions
[04:12:27] <dbaupp> nightpool: could you file a bug with that example :)
[04:12:33] <dbaupp> Tobba: they're all compiler intrinics
[04:12:41] <dbaupp> extern "rust-intrinsic" { ... }
[04:12:45] <Tobba> ah
[04:13:01] <dbaupp> https://github.com/mozilla/rust/blob/master/src/libstd/unstable/intrinsics.rs#L396-L404
[04:13:12] <indirect> so if I have an iterator, is there a way to collect all of the values the iterator provides into a vec?
[04:13:14] <dbaupp> https://github.com/mozilla/rust/blob/master/src/libstd/unstable/intrinsics.rs#L368
[04:13:15] <dbaupp> etc.
[04:13:18] <nightpool> dbaupp, sure. 
[04:13:21] <dbaupp> indirect: .collect() or .to_owned_vec()
[04:13:34] <dbaupp> indirect: http://static.rust-lang.org/doc/master/std/iter/trait.Iterator.html#method.collect
[04:13:54] <indirect> dbaupp: dammit. I swear I looked at collect :)
[04:13:57] <indirect> thanks!
[04:13:57] <dbaupp> Tobba: (they may be lowered to calls to memcpy and memmove for large values (but not small ones))
[04:14:00] *** Quits: Skrylar (Skrylar@moz-F692F728.austin.res.rr.com) (Ping timeout)
[04:14:47] <diverse> Tobba: I made an implimentation of swap for fun, although I don't know if the libstd does it this way: https://gist.github.com/anonymous/8636398f78e990852d05
[04:14:51] *** Parts: yng (user@moz-F9859B59.nyc.res.rr.com) (ERC Version 5.3 (IRC client for Emacs))
[04:15:13] <dbaupp> diverse: definitely not
[04:15:14] <Tobba> yeah thats slower than libstd diverse
[04:15:21] <diverse> darn :(
[04:15:22] <dbaupp> diverse: libstd doesn't use Clone for swap
[04:15:27] *** Quits: tristramh (tris@moz-F94D69DC.lns20.syd6.internode.on.net) (Connection reset by peer)
[04:15:30] <dbaupp> (it uses unsafe code)
[04:15:42] <dbaupp> diverse: also, https://gist.github.com/anonymous/8636398f78e990852d05#file-gistfile1-rs-L5 the .clone() there isn't necessary
[04:15:58] <nightpool> dbaupp, any kind of idea of root-cause, so I can name it nicely? I'm still not quite sure what the problem is. 
[04:15:59] <dbaupp> in fact, the only clone you need is `let temp = a.clone();`
[04:16:19] <diverse> dbaupp: ah, cool.
[04:16:41] <dbaupp> nightpool: no idea, but seems like it might be related to pattern matching on tuple structs
[04:16:43] * dbaupp shrugs
[04:17:26] <dbaupp> diverse: the other lines just move their respective values
[04:17:31] <dbaupp> and so don't need a copy
[04:17:35] <dbaupp> hm
[04:17:38] <dbaupp> waiiiittt...
[04:17:52] <dbaupp> you can't move out of &mut. so yeah, those clones are necessary in safe code.
[04:17:52] <diverse> hmm?
[04:19:23] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[04:20:56] <wycats_> But it seems weird to needlessly constrain a compiler in implementing a type efficiently
[04:21:00] <wycats_> ^^ SiegeLord 
[04:21:04] <wycats_> that's why I want a rust.h
[04:21:10] <wycats_> OPTION_SLICE(ptr, len)
[04:21:13] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[04:21:17] <wycats_> do whatever you want under the hood
[04:21:37] <dbaupp> wycats_++
[04:21:57] <diverse> Tobba: btw, which one is the fastest in libstd, you said there was four of them?
[04:21:58] <SiegeLord> Hmm, I suppose you will want the same rust.h for different Rust compilers
[04:22:07] <dbaupp> wycats_: fwiw, https://github.com/mozilla/rust/issues/10530
[04:22:09] <SiegeLord> For them to be binary compatible... I guess it's ok then
[04:22:22] <Tobba> diverse: I said it used 4 other functions
[04:22:33] <Tobba> they were all intrinsics apparently though
[04:22:36] <wycats_> SiegeLord: no... the only requirement is that they #define OPTION_SLICE
[04:22:42] <wycats_> they can define it however they want
[04:22:45] <dbaupp> diverse: https://github.com/mozilla/rust/blob/master/src/libstd/util.rs#L27
[04:22:49] <wycats_> it's just an interface thing
[04:22:57] <wycats_> #include <rust.h>
[04:23:11] <cmr> https://docs.google.com/a/octayn.net/spreadsheet/oimg?key=0ArjzeYh7LqL2dENRREdRbDljajR4LWt1RlozM2YyY0E&oid=1&zx=ca2n5hpu0w2y
[04:23:16] <dbaupp> Tobba: only 3, uninit, copy_nonoverlapping_memory and forget :)
[04:23:31] <cmr> (two of those are nops!)
[04:23:40] <Tobba> close enough and why the shit is windows constantly switching me to dvorak
[04:23:43] <wycats_> I heard that in general Option<T> ~ *T in C is something that could be specced
[04:23:46] <Tobba> goddamnit
[04:24:01] <cmr> wycats_: no, Option<~T> / Option<&T>
[04:24:06] <cmr> ie, non-nullable pointers.
[04:24:09] <wycats_> ah yeah
[04:24:12] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[04:24:14] <wycats_> sorry I was being lazy
[04:24:16] *** Joins: twi (Adium@moz-D208FD4D.pa.vic.optusnet.com.au)
[04:24:16] <cmr> it's k
[04:24:32] <dbaupp> cmr: ? that docs.google link is a white rectangle
[04:24:42] <wycats_> Tobba: remove the dvorak keyboard ;P
[04:24:43] <cmr> dbaupp: ... that's truly unfortunate.
[04:24:45] <wycats_> also don't use Windows ;P
[04:24:50] * cmr fiddles with privacy settings
[04:24:54] <Tobba> say that when linux has good graphics drivers
[04:25:05] <Tobba> (preferably that can run a text editor without artifacts, goddamn)
[04:25:14] <diverse> Tobba: Linux does, use nvidia.
[04:25:16] <wycats_> Tobba: I believe there is another popular operating system
[04:25:19] <cmr> Tobba: I don't know which driver you're using, but I haven't seen any of that :P
[04:25:33] *** Quits: sellout (Adium@moz-76D71F1A.hlrn.qwest.net) (Quit: Leaving.)
[04:25:34] <wycats_> it is also the only operating system with good support for hidpi
[04:25:35] <Tobba> glorious opensource AMD drivers
[04:25:43] <cmr> those are what I use
[04:25:56] <wycats_> ChromeOS/OSX are the only OSes with seamless HiDPI support
[04:25:56] <Tobba> I've got a 7xxx card?
[04:26:03] <cmr> ah southern islands
[04:26:06] <cmr> I'm sorry.
[04:26:21] <diverse> ;/
[04:26:24] <cmr> dbaupp: try again?
[04:26:28] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[04:26:46] <dbaupp> cmr: graphs!
[04:26:50] <dbaupp> <3 speed
[04:27:02] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[04:27:04] <dbaupp> weird that 4 < 3
[04:27:10] <Tobba> ugh
[04:27:18] <Tobba> the default swap function doesnt compile
[04:27:21] <cmr> yeah I also found that strange.
[04:27:35] <cmr> I even re-ran it a few times, that number is stable.
[04:27:40] <dbaupp> Tobba: you'll need to use the intrinics directly, rather than going via the ptr and cast modules
[04:27:55] <dbaupp> cmr: upload it to imgur and post it to the world! \o/
[04:27:59] <Tobba> yeah no shit
[04:28:02] <Tobba> it complains about mutability
[04:28:05] <dbaupp> oh
[04:28:06] <dbaupp> weird
[04:28:12] <cmr> dbaupp: nah I'm embedding it in the state of rust 0.9
[04:28:18] <Tobba> actually I think I know why
[04:28:28] <dbaupp> cmr: post that to the world! \o/
[04:28:37] <cmr> I will!
[04:28:41] <Tobba> yep, ptr has its own copy_nonoverlapping_memory
[04:28:48] <Tobba> which just casts the arguments around and then uses the intrinsic
[04:29:04] <dbaupp> nightpool: thanks for filing that :)
[04:29:17] <nightpool> No probs. 
[04:29:51] <nightpool> I'm writing a game with rust, but I just started this morning. There's not really any game to speak of yet. 
[04:29:57] <wycats_> mmm games
[04:30:11] <diverse> games ♥
[04:30:30] <nightpool> But I figured out rust and rust-sdl and all sorts of things. I wrote a merge sort yesterday, as my first rust project. 
[04:30:33] <o11c> I really need to write a game from scratch someday ...
[04:30:49] <o11c> I had a really genius idea sometime recently, I don't remember what it was though
[04:31:12] <diverse> o11c: it will come back
[04:33:31] *** Quits: a__ (a__@moz-56DB9895.nycmny.fios.verizon.net) (Quit: I haz left.)
[04:34:27] *** Joins: a__ (a__@moz-56DB9895.nycmny.fios.verizon.net)
[04:34:31] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[04:35:42] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Quit: 랜덤은 쇠퇴했습니다.)
[04:35:46] *** Quits: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net) (Quit: Leaving...)
[04:35:50] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[04:36:19] <Tobba> oh god
[04:36:22] <Tobba> it compiles and returns mutables
[04:36:32] <wycats_> is there an open proposal for a macro for defining a constructor
[04:36:46] <wycats_> currently: fn new() -> Type { Type{ ... } }
[04:37:04] <wycats_> new { Type{ ... } } might be nice
[04:37:09] *** Quits: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net) (Quit: tikue)
[04:37:23] <wycats_> new! :P
[04:37:39] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Quit: Leaving.)
[04:37:40] *** Quits: bjustin (bjustin@moz-4B914826.hsd1.mn.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[04:38:59] <diverse> that might be a good idea
[04:39:13] <nightpool> Man all these number casts are getting annoying. Is this always going to be a problem? Any time I want to add or do anything to a number I have to cast them both explicitly to the same type. It gets annoying fast, especially cause SDL has a lot of different number types they use in different places.
[04:39:42] <dbaupp> Tobba: \o/ with replace?
[04:39:53] <Tobba> yeah
[04:39:57] <Tobba> science
[04:40:41] <Tobba> though the code is even worse now
[04:41:02] <Tobba> its just a 83 line pyramid of death
[04:41:40] <dbaupp> macros! \o/
[04:42:07] <Tobba> dont think that'd help tbh
[04:42:35] *** Joins: Cevn (sameer@moz-F316C21E.hr.hr.cox.net)
[04:42:37] *** Joins: dmz (Mibbit@moz-F30E0473.cpe.net.cable.rogers.com)
[04:43:07] <dbaupp> sure it would `unwrap!(some_option, x => x + 1, default)` instead of `match some_option { Some(x) => x + 1, None => default }`
[04:43:17] <dbaupp> etc.
[04:43:40] <diverse> wycats_: I like the idea of a constructor being a macro
[04:43:51] <dmz> I'm lost in RefCell borrows. Could anyone take a look plz? https://gist.github.com/kvark/8394826
[04:44:19] <cmr> dmz: first, import Rc and RefCell directly. rc::Rc and cell:RefCell is so ugly :(
[04:44:28] *** Joins: blank_name (blank_name@BC51D793.16360A46.537E532E.IP)
[04:44:39] <cmr> dmz: you might need to introduce some temporaries, to appease the compiler. nmatsakis is working on avoiding that.
[04:44:58] *** Joins: pzol (pzol@moz-553BEE64.dynamic.chello.pl)
[04:46:09] <dmz> as for the style, I prefer shorter paths for something that is used a lot. This whole file access Rc and RefCell maybe only 2-3 times.
[04:46:26] <dmz> and about temporaries... separate the creation of Rc and RefCell?
[04:46:43] <cmr> no, introduce temporaries for .borrow() and maybe .try_borrow_mut()
[04:47:02] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[04:47:04] <dmz> hmm
[04:47:59] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[04:48:16] *** Joins: Jesin (Jesin@moz-A43618DF.res.lehigh.edu)
[04:50:37] <dmz> cmr: temporaries don't help me
[04:51:20] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[04:51:26] <cmr> dmz: ok, what's the error?
[04:53:51] <dmz> cmr: https://gist.github.com/kvark/8394826
[04:53:51] <dmz> first file
[04:55:44] <dmz> cmr: looks like my RefCells are totally broken
[04:56:41] <dmz> git doesn't show any local changes of mine, so it must be the compiler error. I wonder how it passed the tests...
[04:56:56] <ChrisMorgan> cmr: I do find it interesting looking at your libgreen rust-http scalability results; they're worse than on my fairly old dual-core laptop—you're only getting around 50% speedup whereas I get closer to 75% (100% being the theoretical optimum).
[04:59:24] <cmr> http://cmr.github.io/blog/2014/01/12/the-state-of-rust-0-dot-9/
[04:59:35] <wycats_> ChrisMorgan: https://github.com/chris-morgan/rust-http/blob/master/src/http/headers/mod.rs#L1034
[04:59:44] <wycats_> why are none of these Option<~str>
[05:00:00] <wycats_> aha: https://github.com/chris-morgan/rust-http/blob/master/src/http/headers/mod.rs#L888
[05:00:02] <wycats_> they all are :P
[05:00:07] <ChrisMorgan> Indeed.
[05:00:19] <cmr> The magic of macros :)
[05:01:19] * ChrisMorgan likes making that type of macro—he's also done it in a couple of places in librustc/libsyntax since then
[05:01:37] <ChrisMorgan> Actually, Option isn't a complete solution there; "invalid value" is important for HTTP headers (most notably the Expire header), so they can't just be discarded like they are at present.
[05:01:51] <wycats_> ChrisMorgan: also, I've been thinking that all these strings could be &str
[05:02:00] <wycats_> since there's no reason the Request outlives the original stream
[05:02:12] <cmr> ChrisMorgan: damn you, *I* wanted that HN karma.
[05:02:40] <ChrisMorgan> cmr: sorry 'bout that, you should have been faster! (I figured you'd forgotten it.)
[05:02:48] <cmr> nah it's fine :p
[05:03:27] <dmz> cmr: nice writing there! any info on my RefCell issue?
[05:03:49] <dbaupp> cmr: should the graph be centred?
[05:04:04] <cmr> dbaupp: potentially.
[05:04:08] <cmr> but, cbf.
[05:04:09] <ChrisMorgan> wycats_: (a) if they're &str, what's owning the string?
[05:04:22] <cmr> dmz: that doesn't look like it should be happening, but I have to go to bed now.
[05:04:22] <wycats_> ChrisMorgan: the original bytes in the Request
[05:04:27] <wycats_> sorry in the Stream
[05:04:36] <dmz> cmr: ok, me too
[05:05:10] <ChrisMorgan> wycats_: the same memory is reused; the raw request is not at present retained, nor would it be reasonable to because of linear white space being compacted across new lines.
[05:05:17] <dmz> could anyone else look at this please? https://gist.github.com/kvark/8394826
[05:05:32] <ChrisMorgan> wycats_: and (b) that'd only do for server requests and client responses—server responses and client requests would need to be owned still
[05:06:12] *** Joins: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net)
[05:06:21] <wycats_> ChrisMorgan: hm
[05:06:28] <wycats_> ChrisMorgan: separately, why is Accept a ~str
[05:06:31] <wycats_> and not a MimeType
[05:06:34] <wycats_> ~[MimeType]
[05:06:48] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[05:06:48] <ChrisMorgan> Most of them are simply not implemented yet.
[05:06:51] <dbaupp> cmr: you didn't even submit it to proggit?
[05:06:57] * dbaupp gets that karma! \o/
[05:07:06] <wycats_> ChrisMorgan: k
[05:08:01] <dbaupp> cmr: (also, by you having that posted after the release, we get to squeeze out every last drop of publicity from it! :D )
[05:08:03] *** Quits: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net) (Ping timeout)
[05:08:04] <ChrisMorgan> wycats_: on the topic of linear white space, that's like "Header: value across\r\n multiple lines" can correctly be treated as equivalent to "Header: value across multiple lines", and removing CR and LF makes it easier to deal with later—another reason against &str
[05:08:18] <cmr> dbaupp: damn, that one I *did* forget about
[05:08:20] <cmr> Ah well
[05:08:35] <cmr> but, it's past my bedtime
[05:08:50] <wycats_> some of the things like Authorization probably want enum Authorization { BasicAuth(BasicAuth), TokenAuth(TokenAuth), Unknown(~str) }
[05:09:05] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[05:10:22] <ChrisMorgan> wycats_: my plans there are largely to directly follow RFC 2616 and the other relevant RFCs. Sometimes there are slight collisions with ergonomics there; I haven't determined what we're best to do there yet.
[05:11:13] <cmr> ohh someone tweeted me, too.
[05:11:18] <wycats_> ChrisMorgan: one of my concerns about the typed approach you're using now is that you front-load processing
[05:11:21] * cmr can't resist watching the google realtime analytics
[05:11:26] <wycats_> seems better to lazy-process
[05:11:29] <_achin> if i have `let plusfive: |int| -> int = |x| {x + 5};`  how can i convert this into something generic, where my closure type is |T| -> T (where T implements the Add trait)
[05:11:38] <dbaupp> cmr: do you move by default? are you now owned by twitter-space?
[05:11:56] <cmr> dbaupp: I don't know, I'm a syntax extension :(
[05:12:06] <wycats_> ChrisMorgan: maybe use Index?
[05:12:16] <ChrisMorgan> wycats_: I've wondered a little about that, but I think you'll find that actually pretty much everything already processes things at least once—often twice.
[05:12:17] <wycats_> headers[ContentType]
[05:12:35] *** Joins: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net)
[05:12:38] <cmr> wycats_: problem with that is that Index needs a constant return type.
[05:12:45] <cmr> you can't return a specific nicely typed enum
[05:12:52] <wycats_> why ever not?
[05:12:56] <wycats_> that's not true at all
[05:13:00] <wycats_> unless I'm missing something
[05:13:10] <cmr> well unless you want enum ZomgEveryHeaderType { ... }
[05:13:19] <wycats_> you already have that ;)
[05:13:27] <cmr> headers[Authorization] can't return a different type than headers[ContentType]
[05:13:30] <dbaupp> cmr: I guess that means you're Pod (since syntax extensions are basically just a fn(tokens) -> ast, but with more arguments)
[05:13:31] <ChrisMorgan> cmr: `struct ContentType;` `impl Index<ContentType> for HeaderCollection { ... }`
[05:13:50] * ChrisMorgan doesn't know whether that would work or not, but suspects the answer to be no
[05:14:03] <wycats_> it'll work
[05:14:09] <cmr> oh hm
[05:14:13] <wycats_> impl Index<ContentType, Whatever> for HeaderCollection
[05:14:26] <cmr> maybe
[05:14:30] * cmr really goes to bed this time
[05:14:31] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[05:14:41] <ChrisMorgan> wycats_: theoretically it might, but I don't know if it does in practice—there are issues with having multiple implementations of a trait with different generic bounds. Have you tried it?
[05:14:52] <wycats_> ChrisMorgan: I've used index a bunch recently
[05:14:58] <wycats_> I'd be surprised if it didn't work
[05:14:58] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[05:15:06] <ChrisMorgan> With different types like this would need?
[05:15:24] *** Quits: dmz (Mibbit@moz-F30E0473.cpe.net.cable.rogers.com) (Quit: http://www.mibbit.com ajax IRC Client)
[05:15:37] <lennart> could someone help explain what sort of type inference is happening here? http://pastebin.mozilla.org/4000701
[05:15:56] <lennart> all my attempts to annotate x with a type in line 3 result in compile errors
[05:15:59] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[05:16:14] <ChrisMorgan> BTW, cmr's The State of Rust 0.9 is at https://news.ycombinator.com/item?id=7048993
[05:16:46] <ChrisMorgan> lennart: |&int|
[05:16:49] <_achin> let f: |int| -> () = |x| { thigns.push(x); };
[05:16:51] <dbaupp> (don't click that link and upvote...)
[05:16:53] <_achin> maybe?
[05:16:55] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[05:17:12] <dbaupp> ChrisMorgan: HN detects referrer headers to remove things that have been hit by a voting ring
[05:17:41] <dbaupp> (so posting direct links can cause something to be removed, if too many people follow it)
[05:17:54] <lennart> achin: that doesn't compile since foo is an &int
[05:18:08] <ChrisMorgan> lennart: the type of f is |&int|
[05:18:18] <diverse> alright, time to proof read what cmr wrote!
[05:18:19] <_achin> oops.  let f: |&int| -> () ... ?
[05:18:23] *** Quits: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net) (Ping timeout)
[05:19:04] <lennart> chrismorgan: strangely, when I let f: |&int| -> (), or let f = |x: &int| { ...
[05:19:10] <lennart> I get lifetime inference errors
[05:19:23] <lennart> which I don't fully understand
[05:19:49] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[05:20:16] *** Quits: short (Mibbit@moz-85C0C507.hsd1.wa.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:20:19] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[05:20:37] *** Joins: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net)
[05:20:44] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[05:20:46] *** Quits: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net) (Quit: Linkinus - http://linkinus.com)
[05:20:53] <ChrisMorgan> lennart: you can fix that by specifying the lifetime explicitly—insert the <'a> onto the fn and change all &int to &'a int
[05:20:58] <wycats_> ChrisMorgan: I'll play with it
[05:21:10] <wycats_> I'm documenting the current state and playing with formalizing what I need for routing
[05:21:34] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[05:21:36] *** Quits: heftig (heftig@moz-A047F9ED.dip0.t-ipconnect.de) (Ping timeout)
[05:21:55] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[05:22:14] <lennart> ahh, this is when you would need named lifetimes
[05:22:44] <ChrisMorgan> lennart: yes. https://pastebin.mozilla.org/?diff=4000774 for the explicit lifetime annotation I described.
[05:22:57] <lennart> thanks!
[05:23:24] * ChrisMorgan still wonders whether it's correct for it to behave as it does, failing if you don't make the lifetimes explicit
[05:23:48] *** Quits: jadbaires (jadrian@moz-EE1C894.dsl.telepac.pt) (Quit: Konversation terminated!)
[05:23:51] <ChrisMorgan> Yes, I'm satisfied it is.
[05:24:02] *** Quits: gnuvince (vince@moz-A18BB9C9.dsl.colba.net) (Client exited)
[05:24:03] <ChrisMorgan> It's not pleasant behaviour, but is necessary for soundness.
[05:24:25] <lennart> but then why didn't I get compile errors without the type annotation?
[05:24:27] *** Quits: atomical (atomical@moz-C4295341.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com) (Quit: atomical)
[05:24:59] <ChrisMorgan> Without any type annotation it's free to determine what it is: the same lifetime as the outermost references.
[05:25:19] <ChrisMorgan> But with a type annotation, it defaults to "just used inside this function/closure", which is not enough for your case.
[05:25:51] <acrichto> ehsanul: I saw you and brson talking about select() over I/O, I'd be more than willing to talk about it right now, I wish I had an answer but I don't really have a good one right now (I have a few bad ones floating around in my head)
[05:26:18] <lennart> ChrisMorgan: ah, I see, thanks so much
[05:27:06] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Quit: Leaving.)
[05:27:47] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[05:27:51] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Connection reset by peer)
[05:28:06] <ChrisMorgan> acrichto: I think it's really becoming a very pressing problem. There's a lot of activity going on and interest in network applications, but most are at present impossible because of this particular issue.
[05:28:21] <acrichto> ChrisMorgan: I agree, that's why we put it on the 1.0 milestone
[05:29:48] *** Quits: twi (Adium@moz-D208FD4D.pa.vic.optusnet.com.au) (Quit: Leaving.)
[05:30:19] * _achin is happy to see it getting some attention
[05:30:20] *** Joins: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net)
[05:30:53] * ChrisMorgan is also not satisfied with any of the answers he's come up with
[05:31:38] <acrichto> ChrisMorgan: yeah that's the problem, I want a solution I'm satisfied with :(
[05:32:13] *** Quits: pzol (pzol@moz-553BEE64.dynamic.chello.pl) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:32:23] *** Joins: khodzha (khodzha@D40BD4BD.3E410295.CA6E2165.IP)
[05:32:56] *** Quits: lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net) (Ping timeout)
[05:32:56] <dbaupp> acrichto: what's the drawback of allowing streams (where possible) to be split into reader and writer?
[05:33:35] <acrichto> dbaupp: it's seems like a not-so-solution that has to be implemented for all streams everywhere and doesn't involve a "once" generic implementation
[05:33:55] <ChrisMorgan> dbaupp: they must then be handed to different tasks for that to be generally useful.
[05:33:56] <acrichto> conceptually, though, I like that one the most (it's the first thing everyone jumps to)
[05:34:44] <ChrisMorgan> Another problem related vaguely to that is live upgrades—the ability to pass an open socket to a new version of the code, upgrading the server software in place.
[05:34:50] <dbaupp> acrichto: wouldn't a select need to be implemented for each stream type too? (and they would be mutually incompatible, in general, so a generic implementation can't work)
[05:34:58] <dbaupp> ChrisMorgan: ah, yes
[05:35:52] <acrichto> dbaupp: perhaps, but on libnative everything is a file descriptor and in libuv everything we care about is a uv_stream_t
[05:36:03] <dbaupp> acrichto: ah, true enough
[05:36:09] <acrichto> so you still have to opt-in the type to being selectable, but you don't have to do reference counting or something like that yourself
[05:36:54] <dbaupp> (is it possible to make the runtimes upset by passing a green File into a native task, or vice versa?)
[05:37:27] *** Joins: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net)
[05:38:02] <ChrisMorgan> Really, the more I've thought about it the more I realise that splitting into a reader and a writer isn't the final solution for rust-http, or for most things, I think; for HTTP/2.0, I'll need to be able to send and receive from many tasks—so I'll probably end up with just one task taking care of the actual communication in both directions, which doesn't need them to be split—select would be just fine as a solution.
[05:38:13] <acrichto> dbaupp: so in theory that should properly assert
[05:38:26] <acrichto> dbaupp: what happens right now is that green handles will assert with an obscure error and native handles will just block the thread
[05:39:15] <dbaupp> acrichto: do you have a final goal for what *should* happen?
[05:39:54] <acrichto> dbaupp: sadly not particularly, the original problem we're setting out to solve is that you can't read and write on a tcp stream simultaneously
[05:40:06] <acrichto> the problem is a little more far reaching than that though, it's just the initial impetus
[05:42:34] <dbaupp> http://www.reddit.com/r/programming/comments/1v34ut/the_state_of_rust_09/ btw (afaik, reddit doesn't have referrer checking, so feel free to upvote)
[05:43:07] <_achin> i've been told reddit does have a referrer checker, or some other related logic
[05:43:34] <dbaupp> oh, ok (I know that HN does)
[05:43:55] <dbaupp> acrichto: yeah; do we have examples of how other languages solve this?
[05:44:04] *** Quits: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: movie & gf)
[05:44:09] <dbaupp> (Go just... doesn't solve it, right?)
[05:44:22] <acrichto> in Go tcp streams are "threasafe"
[05:44:25] <acrichto> threadsafe*
[05:44:32] <acrichto> at least I think...
[05:44:54] <acrichto> in C you have what the kernel has: select/epoll/dup/etc
[05:44:54] <dbaupp> do they offer select?
[05:44:59] <acrichto> not that I know of
[05:45:02] <acrichto> but it's been awhile for me
[05:45:17] <acrichto> dunno what ruby/python have
[05:45:27] <acrichto> node is all asynchronous so it "just works"
[05:45:28] <_achin> python has select
[05:45:38] <dbaupp> http://docs.python.org/2/library/select.html http://docs.python.org/3/library/select.html apparently
[05:45:49] <_achin> in some use cases, people just make their sockets non-blocking
[05:46:02] <dbaupp> rather OS specific though
[05:46:04] <acrichto> hm, who was saying we're going to write libuv in libnative?
[05:46:19] <acrichto> oh wait that's just the raw wrappers around syscalls...
[05:46:34] <dbaupp> yeah
[05:46:37] <_achin> in python, select() works on all platforms, as far as i know.  as long as you give it a network socket (windows can't select() on anything but a network FD)
[05:46:56] <Yurume> yeah, that's annoying (in windows)
[05:47:26] *** Quits: limeburst (me@247D1419.D73964AC.27A8748.IP) (Quit: leaving)
[05:47:32] *** Joins: limeburst (me@247D1419.D73964AC.27A8748.IP)
[05:47:35] <Yurume> apparently Java has a same problem and NIO Selector does not accept FileChannel. ;)
[05:48:25] <_achin> in general, i've not heard any complaints about python developers wanting to use select() on something like a file on windows
[05:48:47] <eevee> weeeell python developers are generally chided for using select() in the first place
[05:48:53] <_achin> so perhaps rust could make the same decision?  it doesn't make you feel warm and fuzzy, though
[05:49:09] <_achin> eevee: why's that?
[05:50:08] <eevee> it's low-level and has some wonky edge cases i can't list but that twisted (or gevent, or asyncio, ...) developers love to announce they've long since solved  :)
[05:50:41] <_achin> sure, you can bring in some higher-level event library.  but they all use something like select()
[05:51:07] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[05:52:23] * _achin -> zZz
[05:54:11] *** Quits: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca) (Quit: eatkinson)
[05:57:10] *** Joins: benjamin_ (benjamin@moz-7D037579.dip0.t-ipconnect.de)
[06:01:28] *** Quits: ehsanul (Mibbit@29896722.D02B26E5.A36C57B9.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:02:35] *** Quits: nobody (nobody@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[06:02:44] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[06:02:51] *** Joins: nobody (nobody@moz-7E09A266.neo.res.rr.com)
[06:04:15] *** Joins: rootnode (rootnode@moz-7FAB5E8.ip1.george24.com)
[06:07:30] *** Quits: nobody (nobody@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[06:08:01] *** Joins: nobody (nobody@moz-7E09A266.neo.res.rr.com)
[06:09:47] *** Joins: matthewbot (user@moz-C6814817.ga.at.cox.net)
[06:10:54] *** Joins: kris (kris@moz-6D20263F.fullrate.dk)
[06:17:11] <diverse> btw, what's replacing globs, since they are getting removed?
[06:18:19] *** Joins: lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net)
[06:19:41] *** Joins: kanru (kanru@moz-99690620.hinet-ip.hinet.net)
[06:19:46] <dbaupp> diverse: they aren't necessarily being removed
[06:20:01] *** Quits: lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net) (Ping timeout)
[06:20:07] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[06:20:08] <dbaupp> they just aren't ready for the big-time (bugs and ill-defined semantics)
[06:20:44] <diverse> oh, I thought pcwalton was keen on removing them for good? I guess not?
[06:21:05] <dbaupp> yes, he is; that doesn't necessarily mean it *will* happen.
[06:21:10] * dbaupp isn't sure
[06:21:13] *** Joins: pzol (pzol@moz-553BEE64.dynamic.chello.pl)
[06:21:44] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[06:21:52] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[06:23:10] <acrichto> we're not sure if we want to continue suporting "pub use foo::*"
[06:23:25] <acrichto> and possibly importing a DAG on "pub use foo;"
[06:23:33] <acrichto> enforcing* 
[06:23:36] <acrichto> not importing
[06:23:59] <acrichto> doing so would make resolve much more deterministic than it is right now
[06:24:05] <acrichto> (from what I gather)
[06:25:52] <o11c> I know they're bad practices, it's just that sometimes they're *useful*
[06:26:13] <o11c> there are two limited cases that are more predictable, though
[06:26:20] <acrichto> "pub use foo::*" I don't think is too useful
[06:26:26] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Taking a nap.)
[06:26:31] <acrichto> use foo::* is quite useful sometimes (if it is indeed a smell)
[06:26:31] <o11c> 1. a module with no actual content, that does a * import from several other modules
[06:27:18] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[06:27:20] *** Joins: lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net)
[06:27:22] <o11c> 2. a module that contains several non-* imports, which is intended to be *-imported by users
[06:27:32] <o11c> ah, that latter would not be pub use
[06:27:57] <o11c> so it's only the special case of a module with no content
[06:28:03] *** Joins: okard (okard@moz-EF62E409.dyn.hrz.tu-darmstadt.de)
[06:28:58] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[06:30:11] *** Quits: pzol (pzol@moz-553BEE64.dynamic.chello.pl) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:33:04] *** Joins: Jemaclus (Mibbit@moz-A0EB9A8E.hsd1.ca.comcast.net)
[06:34:00] <Jemaclus> Howdy. I'm having trouble compiling rustc on my Mac. Getting an error about "ar s" failing. Anyone know of any resources to check to fix this?
[06:34:32] <wycats_> ChrisMorgan: https://gist.github.com/wycats/8395627
[06:34:36] *** Quits: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net) (Quit: tikue)
[06:34:37] <wycats_> I'm only about 2/3 through
[06:34:55] <wycats_> basic proposal for adding types to the ~str current stuff
[06:35:58] <dbaupp> Jemaclus: https://github.com/mozilla/rust/issues/11162 maybe
[06:36:36] <dbaupp> wycats_: (what happens on invalid headers?)
[06:36:51] <wycats_> None?
[06:36:54] <wycats_> or fail?
[06:36:59] <Jemaclus> I saw that. Not really sure how to go about uninstalling llvm on my Mac... or even sure if that's a good idea.
[06:37:06] <ChrisMorgan> At present, invalid headers are dropped.
[06:37:17] <wycats_> ChrisMorgan: does this seem like a good starting point?
[06:37:26] <wycats_> I was just sad at the number of ~str types
[06:37:34] <wycats_> still have the last section to go
[06:37:55] <ChrisMorgan> wycats_: certainly, the significant majority shouldn't be ~str.
[06:38:03] <wycats_> ChrisMorgan: c
[06:38:11] <wycats_> ChrisMorgan: I found 1 ~str I think
[06:38:15] <wycats_> of the ones I went through
[06:38:24] <wycats_> From
[06:38:35] <ChrisMorgan> Yeah, I found one or two where that was semantically about all you could do with it, can't remember which they were.
[06:38:36] <wycats_> the rest had some kind of structure
[06:38:44] *** Quits: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP) (Ping timeout)
[06:38:51] <wycats_> even just typing "*" as Any is useful
[06:39:09] <wycats_> but I think if you're gonna do this much processing making them lazy is important
[06:39:25] <wycats_> if Index doesn't work .get() should be fine
[06:39:26] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[06:39:38] <wycats_> .get::<ContentType>() :P
[06:39:40] <dbaupp> ChrisMorgan: http://www.reddit.com/r/rust/comments/1v34ic/the_state_of_rust_09/ceoa0c7 how does rust-http/comparisons/run.py work?
[06:40:12] <wycats_> Rust, yuno type type?
[06:40:59] *** Joins: frogonia (Mibbit@5EDF65C3.47A979A0.B66DD36E.IP)
[06:41:10] *** Quits: frogonia (Mibbit@5EDF65C3.47A979A0.B66DD36E.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:41:30] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[06:41:34] *** Joins: ferminter (Mibbit@5EDF65C3.47A979A0.B66DD36E.IP)
[06:42:10] <wycats_> https://twitter.com/wycats/status/422619491285999616
[06:42:25] *** Quits: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP) (Client exited)
[06:43:44] <ChrisMorgan> wycats_: good ☺
[06:44:00] <wycats_> ChrisMorgan: https://github.com/mozilla/rust/issues/6976
[06:44:04] <wycats_> looks like this is fixed
[06:44:08] <wycats_> should make your header macro nicer
[06:45:34] <ChrisMorgan> wycats_: I thought I'd gone back to using #[deriving(Clone)] there. Must have done it on my tablet and never actually committed it, I think—
[06:45:41] <dbaupp> ChrisMorgan: it's weird that your HN post hasn't shown up on the front page yet...
[06:45:42] <wycats_> :P
[06:46:52] <wycats_> ah looks like I should be using libnative for benching
[06:46:55] <ChrisMorgan> dbaupp: yeah, it's a fairly bad time for it :-(
[06:47:32] <wycats_> what's the story with box()
[06:47:39] <ChrisMorgan> wycats_: strange, I can't find any evidence of it anywhere, yet I am absolutely certain that I did it. Must have accidentally destroyed it at some point. :-/
[06:47:44] <wycats_> O_O
[06:47:48] <dbaupp> ChrisMorgan: https://news.ycombinator.com/item?id=7049099 has fewer votes and was posted at a similar time, but is on the front page
[06:47:49] <wycats_> I'm excited
[06:47:54] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[06:47:57] <wycats_> ChrisMorgan: do you agree about making parsing headers lazy?
[06:48:00] *** Quits: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net) (Quit: zztr)
[06:48:02] <wycats_> basically have an internal _headers
[06:48:06] <wycats_> with all _str types
[06:48:11] <wycats_> ~str
[06:48:28] <dbaupp> parse the most common ones eagerly?
[06:48:30] <ChrisMorgan> wycats_: only if the API can still be nice.
[06:48:43] <wycats_> ChrisMorgan: why couldn't it be?
[06:48:56] <wycats_> you're scared Index won't work?
[06:49:11] <wycats_> or you don't like headers[ContentType]?
[06:49:59] <ChrisMorgan> wycats_: I'm not sure whether it works or not, that's all. And it *isn't* as nice as headers.content_type, really.
[06:50:16] <wycats_> ChrisMorgan: headers.content_type() is almost as nice
[06:50:30] <wycats_> ChrisMorgan: I'm pretty sure the processing perf of a million headers is a real issue
[06:51:10] <wycats_> headers[ContentType] has the suck of needing to import ContentType
[06:51:18] <ChrisMorgan> wycats_: actually, I did do the Clone derivation, on 2013-12-23. Just was looking at the wrong thing on my tablet.
[06:51:54] <ChrisMorgan> wycats_: once it's not straight field access we need to start dealing with references, assignation, &c.
[06:52:03] <wycats_> https://github.com/chris-morgan/rust-http/blob/master/src/http/headers/mod.rs#L886
[06:52:25] <wycats_> ChrisMorgan: you don't think string processing all these headers is going to be a perf issue in practice?
[06:52:30] <wycats_> that seems extremely unlikely
[06:52:57] <wycats_> what if we return an opaque object containing the string with a .process() on it
[06:53:57] <wycats_> or headers() to front-load everything with field lookup and .head.content_type.process() to lazy load each
[06:54:16] <wycats_> I'm just trying to avoid baking in really expensive stuff for the base API
[06:54:21] <wycats_> for a proxy this is really ugly
[06:54:36] *** Quits: Jemaclus (Mibbit@moz-A0EB9A8E.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[06:54:59] *** Joins: eebrah (Mibbit@3BF304DB.1654B6C2.2132FB26.IP)
[06:55:05] *** Quits: nobody (nobody@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[06:55:46] *** Joins: nobody (nobody@moz-7E09A266.neo.res.rr.com)
[06:56:54] <ChrisMorgan> If we could *safely* discard the raw header values as they are read, it would be very convenient. But I've ended up deciding that in case of bad header values we really do need to retain the value, which is a sad thing for performance.
[06:58:29] *** Joins: fabiand (fabiand@moz-1B9F8AAE.adsl.alicedsl.de)
[06:58:44] <wycats_> ChrisMorgan: just take() the values out of an Option<~str>
[06:59:05] <ChrisMorgan> Still, the usage of buffering could make the normal case have good performance characteristics for valid headers (a little worse for invalid headers).
[06:59:16] <wycats_> seems ok for me
[07:00:07] <ChrisMorgan> I mean, digging into the buffer to get the value back if it turns out we have an invalid value. Naturally this means we can't just use the libstd buffer, but we already weren't (though for the wrong reasons)
[07:00:33] <wycats_> yeah I was going to ask about that
[07:01:28] <ChrisMorgan> wycats_: I think we should find that parsing the headers at load time is actually faster than delaying it for many, perhaps most, headers, because you can avoid an extra heap allocation.
[07:01:52] <dbaupp> to the experimentation truck!
[07:02:24] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[07:02:24] *** Joins: mib_d1frr8 (Mibbit@F0C9B9A0.84EFE80E.B9DBF852.IP)
[07:02:33] *** Quits: paulproteus (quassel@199.199.210.158) (Ping timeout)
[07:02:39] <dbaupp> it'd be *awesome* if we could use static typing to control which headers are loaded
[07:02:56] <dbaupp> and just ignore the others, at compile time
[07:03:05] *** Joins: paulproteus (quassel@458FE134.3EC36C88.CBDCF1DC.IP)
[07:03:10] <ChrisMorgan> I think that it should only be headers that require extra heap allocations that will be slower than lazy loading.
[07:04:02] *** Quits: mib_d1frr8 (Mibbit@F0C9B9A0.84EFE80E.B9DBF852.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:04:34] <wycats_> ChrisMorgan: for proxying, parsing and restringifying a header will always be slower than just proxying the raw thing
[07:05:08] <ChrisMorgan> dbaupp: I had that thought myself early on (performance! yay!) but discarded it: that's a very small part of the request/response cycle (minuscule in most applications) and it could make debugging or arbitrary middleware difficult.
[07:05:09] <wycats_> you still want some basic parsing because it would be an HTTP proxy not a TCP proxy
[07:05:11] <telotortium> Jemaclus: Do you have gnu binutils installed? Take /usr/local/bin and /opt/local/bin off your PATH while compiling.
[07:05:16] <wycats_> so for example you may want to whitelist headers
[07:05:22] <wycats_> or blacklist
[07:05:39] <wycats_> ChrisMorgan: it's worth benching of course
[07:05:51] <wycats_> I just don't want to see 500usec of overhead for hello world
[07:06:04] * ChrisMorgan doesn't know enough about how HTTP proxies actually operate
[07:06:16] <wycats_> ChrisMorgan: pretty much like it sounds
[07:06:20] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[07:06:32] <wycats_> a single process that acts like a client and server at the same time
[07:06:36] <dbaupp> ChrisMorgan: you've got to microoptimise irrelevant parts of the library before you can do real work
[07:07:20] *** Joins: pnathan (Adium@moz-A8921E45.tukw.qwest.net)
[07:07:27] <wycats_> dbaupp: I'm not convinced that not requiring up-front parsing of every header counts as micro-optimization
[07:07:31] <ChrisMorgan> wycats_: I do not expect proxies to use the RequestReader and ResponseWriter types; there's a bit of stratification to make it more general that needs to happen for a proxy to be nice to write (but yes, it is important).
[07:07:57] *** Quits: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca) (Quit: canhtak)
[07:08:09] <wycats_> ChrisMorgan: as long as you keep it in mind
[07:08:23] <dbaupp> wycats_: I have literally no idea if it is a micro or macro opt :)
[07:08:48] <ChrisMorgan> I wrote when I was initially planning it that I did intend rust-http to be a general HTTP library, useful for more than just origin servers.
[07:09:37] *** Quits: pnathan (Adium@moz-A8921E45.tukw.qwest.net) (Ping timeout)
[07:09:41] *** Quits: DasIch (dasich@moz-5EDA591.de) (Ping timeout)
[07:09:57] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[07:10:06] <wycats_> dbaupp: precisely
[07:10:15] <wycats_> ChrisMorgan: :)
[07:10:28] <wycats_> ChrisMorgan: you should be able to write something like varnish using it
[07:10:31] <ChrisMorgan> Then the only difficulty is figuring out how to best do that!
[07:10:34] <dbaupp> #[inline(never)] on parse_headers + perf == answer our questions
[07:10:44] *** Joins: pnathan (Adium@moz-A8921E45.tukw.qwest.net)
[07:10:51] <wycats_> so you will want to read Vary
[07:10:55] <wycats_> but perhaps nothing else
[07:11:03] <wycats_> maybe varnish should just be a TCP proxy
[07:11:08] <wycats_> with limited HTTP capabilities
[07:11:09] <wycats_> unknown
[07:11:24] <wycats_> would be nice to be able to do it via rust-http
[07:11:29] *** Quits: Kxepal (Miranda@moz-D1EB3C25.pppoe.mtu-net.ru) (Ping timeout)
[07:12:11] <wycats_> have you given any thought to websockets?
[07:12:19] *** Quits: dbaupp (Thunderbir@1D1B1F7A.D5A1DCF.37681C44.IP) (Ping timeout)
[07:13:00] <Gracenotes> hm. is there a Rust tutorial with exercises and stuff?
[07:13:31] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Input/output error)
[07:13:49] *** Parts: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com) ()
[07:14:48] <Gracenotes> seems like one thing it shares with Haskell is that many of the language features are closely knit, so there are big SCCs
[07:14:59] *** Joins: Kxepal (Miranda@moz-DC764D4E.pppoe.mtu-net.ru)
[07:15:10] <wycats_> SCC?
[07:15:20] <Gracenotes> strongly connected components
[07:16:26] <ChrisMorgan> wycats_: yes, I have, and I've received interest from a couple of others on the topic also. Given that interest and how comparatively straightforward it is, I'm not interested in implementing it myself at this stage—I expect others will do so. Oh, and also there's the minor problem that it's not possible yet with TcpStream because of this can't-do-simultaneous-reading/-writing issue.
[07:16:45] <wycats_> ChrisMorgan: I may do it if you don't
[07:16:47] <wycats_> in routed-http
[07:17:10] * ChrisMorgan should check through his logs to see who it was that was interested in implementing it
[07:17:27] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[07:17:42] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[07:17:56] *** Joins: pzol (pzol@322A273C.DEB41A6D.AADC76B.IP)
[07:18:23] *** Quits: matthewbot (user@moz-C6814817.ga.at.cox.net) (Client exited)
[07:20:00] <ChrisMorgan> wycats_: parties interested in implementing WebSocket: jmgrosen, hoverbear; possibly interested: whitglint, olsonjeffery.
[07:20:25] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[07:20:50] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[07:21:41] <wycats_> seems legi
[07:21:49] <mindcat> how can I fix "error: wrong number of type arguments: expected 1 but found 0"
[07:21:56] <mindcat> http://paste.ubuntu.com/6743192/
[07:22:10] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[07:22:32] *** Joins: sellout (Adium@moz-76D71F1A.hlrn.qwest.net)
[07:22:57] *** Quits: ferminter (Mibbit@5EDF65C3.47A979A0.B66DD36E.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:23:02] <mindcat> I don't know how do
[07:23:16] *** Joins: shilgapira (chatzilla@moz-703651C7.barak.net.il)
[07:23:42] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[07:23:45] <mindcat> and I am writing a lib
[07:23:50] <mindcat> library
[07:24:01] *** Joins: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP)
[07:24:29] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[07:24:30] <ChrisMorgan> mindcat: TAG isn't a type: some TAG<T> is what you want.
[07:25:23] <ChrisMorgan> And your trait implementation looks to be back to front, and needs to be after the trait
[07:25:57] <ChrisMorgan> mindcat: what you're trying to do there is not possible.
[07:26:31] <mindcat> ChrisMorgan: not possible..
[07:26:38] <pzol> what's the current best way to work with json in rust?
[07:27:14] <ChrisMorgan> (I don't understand quite what you mean by it, truth to tell, because the code is significantly invalid enough that I can only guess at your intent.)
[07:27:26] <ChrisMorgan> pzol: extra::json is the normal tool used, I think.
[07:27:33] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[07:27:40] *** Quits: FreeFull (freefull@moz-5FBA4B73.as13285.net) (Quit: )
[07:28:23] <geomyidae> In the hashmap example from the talk, why does the take() still make a copy of the hashmap if the compiler is enforcing the move?
[07:28:32] *** Quits: kvanb (kvanb@moz-8A43FA87.lnse5.lon.bigpond.net.au) (Quit: kvanb)
[07:28:36] <pzol> ChrisMorgan are you aware of any way to easily define json from within rust code... ideally ruby - like with a hashmap like structure?
[07:28:40] <ChrisMorgan> mindcat: can you explain what you want?
[07:28:54] <mindcat> ChrisMorgan: I am try
[07:29:17] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[07:30:05] <eddyb> ChrisMorgan: we can cheat around HKT with traits, so from what I gather, it might be possible, with some redesign
[07:30:29] <ChrisMorgan> eddyb: I mean that the approach he's taken is impossible.
[07:31:19] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[07:31:36] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Quit: Leaving.)
[07:32:17] <mindcat> ChrisMorgan: TAG_Compound is container, can be contain different type "TAG"
[07:33:34] <eddyb> oooh, implementing NBT? that is very easy :)
[07:33:41] <mindcat> eddyb: yea
[07:33:59] <ChrisMorgan> mindcat: could that not just be an enum?
[07:34:12] <eddyb> enum Tag { TagCompound(HashMap<~str, Tag>), TagArray(~[Tag]), TagU32(u32), ...}
[07:34:26] <eddyb> ChrisMorgan: it *should* be an enum. any other way is a waste of time
[07:34:29] <ChrisMorgan> Yeah, `enum Tag { End, Byte(i8), Short(i16), ... }`
[07:34:53] <eddyb> err, yeah, signed. trust me, I dealt with it some months ago
[07:34:54] <ChrisMorgan> (But is byte really supposed to be i8? I'd have thought u8 was more likely to be the right thing.)
[07:35:01] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[07:35:18] * ChrisMorgan wonders what NBT is
[07:35:39] *** Quits: Cevn (sameer@moz-F316C21E.hr.hr.cox.net) (Ping timeout)
[07:35:52] <eddyb> ChrisMorgan: http://wiki.vg/NBT
[07:35:56] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[07:36:03] <mindcat> actally, I am rewriting the NBT implement
[07:36:36] <eddyb> the Java way is virtual, it's easier to start from scratch with enums
[07:37:03] <mindcat> because it seem doesn't correct http://paste.ubuntu.com/6743228/
[07:37:14] <eddyb> ChrisMorgan: I wanted to use it for a game I was working on, since it was written in Java (and using LWJGL, just like Minecraft) - but that was a bust, and I would use msgpack and Rust now
[07:37:50] <mindcat> thanks eddyb and ChrisMorgan 
[07:38:20] <mindcat> but how to unpack?
[07:38:28] *** Quits: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net) (Ping timeout)
[07:38:53] <pzol> in 0.9 I can't do this anymore,right? type entry = { key: str, value: str } 
[07:39:03] <eddyb> pzol: that's... ooold
[07:39:07] <pzol> :)
[07:39:16] <eddyb> struct entry {key: ~str, value: ~str}
[07:39:22] <eddyb> well, Entry to be kosher
[07:39:46] <pzol> eddyb thanks, thought so... too many posts with deprecated syntax floating around
[07:39:47] <ChrisMorgan> pzol: that's *really* old.
[07:39:52] <ChrisMorgan> Years ago.
[07:39:54] <pzol> :)
[07:40:00] <mindcat> XD
[07:40:04] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[07:40:06] <wycats_> pzol: there's no JSON literal in Rust
[07:40:24] <pzol> wycats_ could be done with a macro?
[07:40:26] <eddyb> it is valid Rust though, you might be able to do something with a macro ;)
[07:40:26] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[07:40:57] <mindcat> hey! where is "Decorator"
[07:41:03] <wycats_> pzol: it would be rough
[07:41:03] *** Quits: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca) (Quit: Leaving.)
[07:41:04] <eddyb> mindcat: hmpf. the List being a waste of space annoys me. you could have another enum List {ListByte(~[u8]), ListShort(~[u16]), ...}
[07:41:26] <pzol> wycats_ might be... that's the pieces I miss from ruby :)
[07:41:40] <wycats_> pzol: yeah, I miss hash literal syntax too
[07:41:50] <eddyb> s/ruby/JS
[07:41:52] *** Joins: yutongzhao (yutongzhao@moz-325F8282.hsd1.ca.comcast.net)
[07:42:09] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[07:42:15] <wycats_> eddyb: yeah
[07:42:17] <eddyb> I would love the same shorthands used in matching to be allowed when constructing structures
[07:42:21] <wycats_> eddyb: it's tough to get in
[07:42:24] <eddyb> Point {x, y}
[07:42:29] <mindcat> eddyb: ok..
[07:42:33] <eddyb> (a la ES6)
[07:42:33] <wycats_> eddyb: doesn't really solve JSON
[07:42:45] <eddyb> wycats_: JSON => macros
[07:42:45] <wycats_> { foo: 1, bar: "hello", baz: true }
[07:42:57] <wycats_> I don't see how to do ^^ with a macro
[07:43:14] *** Quits: lerc (quassel@moz-289EFA2.telstraclear.net) (Connection reset by peer)
[07:43:29] <wycats_> it isn't valid Rust, so json!(...) wouldn't work
[07:43:36] *** Joins: victorporof (victorporo@416E2802.271BFD43.9B1E38F4.IP)
[07:43:40] <eddyb> impl ToJson for bool {fn to_json(&self) -> Json {JsonBool(*self)}}
[07:44:00] *** Quits: lennart (lennart@moz-DE70D6F.stanford.edu) (Ping timeout)
[07:44:07] <eddyb> wycats_: I wasn't explicit enough. it's valid Rust "lexing"
[07:44:17] <eddyb> kinda like syntax, but lower level. it's a valid token-tree
[07:44:21] <mindcat> let a = JSON { GOO: 1, LOL: "龙", what: 5.0 }
[07:44:23] <wycats_> eddyb: I thought macros operated on the parse tree, not the token tree
[07:44:29] *** Joins: lerc (quassel@moz-289EFA2.telstraclear.net)
[07:44:30] <mindcat> what about this?
[07:44:36] <eddyb> wycats_: how else could they do anything at all?
[07:44:42] <eddyb> mindcat: still needs macros
[07:44:54] <mindcat> eddyb:  it is
[07:44:58] <wycats_> hm... I guess ^ is actually getting closer
[07:45:07] *** Joins: Heather (Heather@19663F6.F53BAACC.9C17E900.IP)
[07:45:08] <wycats_> json!(J{ foo: 1, bar: true })
[07:45:15] <Heather> Hi ) where is print
[07:45:17] <eddyb> drop the J
[07:45:20] <eddyb> Heather: print!
[07:45:23] <Heather> omg
[07:45:24] <Heather> why
[07:45:28] <wycats_> eddyb: if it works on the lex tree, then yeah
[07:45:36] <wycats_> shipit
[07:45:38] <eddyb> Heather: because they do the same thing without format args?
[07:45:44] <wycats_> the docs on macros are too sparse
[07:45:56] *** Quits: victorporof (victorporo@416E2802.271BFD43.9B1E38F4.IP) (Quit: victorporof)
[07:45:58] <wycats_> I guess if it's lex-time then even json!(foo: 1, bar: true) would work
[07:46:05] <Heather> eddyb print and print! ?
[07:46:15] <eddyb> Heather: yeah
[07:46:18] <pzol> wycats_ did you think about a generic rust-ruby bridge gem maybe? :)
[07:46:25] <Heather> I see....
[07:46:31] <eddyb> wycats_: json! {foo: 1, bar: true}
[07:47:01] <mindcat> eddyb: XD
[07:47:24] <pzol> eddyb that'd be neat... can you do also nested hashmaps?? json! { foo: 1, bar: { fagazi: 1, fagezi: 2 }}
[07:47:52] <eddyb> though JSON is not what you want to call something that can very well have ES6 syntax. nah, it would produce JSON enums anyway
[07:48:09] <eddyb> pzol: yupp, it would produce something similar to what decoding JSON produces
[07:48:22] <pzol> eddyb awesome, where can I get it :D
[07:48:40] <wycats_> eddyb: I thought you needed parens in macros?
[07:48:55] *** Joins: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP)
[07:49:10] <eddyb> wycats_: hopefully not in the future https://gist.github.com/bjz/8333444
[07:49:20] <wycats_> eddyb: awesome
[07:49:27] <wycats_> eddyb: I am excite
[07:49:34] <eddyb> pzol: you could write it yourself :)
[07:49:34] <wycats_> can we get rid of the ! while we're at it ;)
[07:49:39] <mindcat> rusti: "I am still dead. :("
[07:49:53] <mindcat> sooo, rusti is dead
[07:50:01] <eddyb> wycats_: nope, that's still very important
[07:50:01] <pzol> eddyb yeah... in a couple of months from now maybe.... 
[07:50:16] <wycats_> eddyb: why's that?
[07:50:26] <wycats_> eddyb: if macro imports were via usemacro foo
[07:50:34] <wycats_> then you'd always know a macro was a macro
[07:50:38] <wycats_> even without the !
[07:50:39] <eddyb> nope
[07:50:42] <yutongzhao> what does "C/C++ compatible" mean? does it compile to binaries and magically spit out C headers or something?
[07:50:48] <eddyb> wycats_: we can currently parse the entire source without any knowledge of macros
[07:51:10] <eddyb> yutongzhao: no. what does it say before "C/C++ compatible"?
[07:51:21] <yutongzhao> ahead-of-time
[07:51:30] <wycats_> eddyb: macro discovery via ! and macro discovery via usemacro are isomorphic
[07:51:34] <pzol> does this make "sense"? struct Entry<'a> { id: &'a str, name: ~str } ???
[07:51:35] <mindcat> hey eddyb, so macro can do python style?
[07:51:42] <wycats_> both totally lexical
[07:51:54] <yutongzhao> as opposed to something like python (Completely dynamic), vs. Java (JIT time?)
[07:52:01] <mindcat> eddyb: or coffeescript like?
[07:52:10] <eddyb> mindcat: maybe. needs to be procedural to have access to spans
[07:52:22] <eddyb> don't expect to get rid of semicolons, they are very important in Rust
[07:52:40] <eddyb> pzol: sure
[07:52:56] *** Quits: shilgapira (chatzilla@moz-703651C7.barak.net.il) (Ping timeout)
[07:52:58] <eddyb> pzol: id is borrowed, name is owned. id can even be a static string
[07:52:58] <pzol> eddyb thx :)
[07:53:07] *** Joins: dapz (textual@moz-F958911.hsd1.ca.comcast.net)
[07:53:46] <eddyb> yutongzhao: yeah, something like that. "Compilation model" is the important part I was looking for. you can link C/C++ code and Rust code together in the same binary
[07:54:18] <wycats_> is there a char.to_u32?
[07:54:23] <yutongzhao> eddyb: well that's what i don't get, usually for me link against C code I need some headers
[07:54:29] <eddyb> wycats_: you can cast it AFAIK
[07:54:37] <wycats_> unsafely?
[07:54:42] <eddyb> no, as
[07:54:51] <eddyb> yutongzhao: it doesn't mean more compatibility than that (we've known it's badly phrased, I hoped someone would fix it by now), though we have C FFI
[07:54:57] <eddyb> yutongzhao: erm, no, that's not linking
[07:55:16] <eddyb> headers are used during preprocessing, which comes before compilation, which comes before linking :)
[07:55:23] <wycats_> eddyb: ah
[07:55:28] <eddyb> they're literally at the opposite ends of the process
[07:56:40] *** Joins: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca)
[07:57:32] *** Joins: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net)
[07:57:41] <yutongzhao> suppose I have module A written in rust, another written B in C/C++, you're saying I shove all the symbols from and A and B into the same library D, and then use all the symbols from D (both rust symbols and C symbols) in another piece of code E? 
[07:58:25] *** Quits: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca) (Ping timeout)
[07:58:33] *** Quits: nobody (nobody@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[07:58:59] *** Joins: nobody (nobody@moz-7E09A266.neo.res.rr.com)
[07:59:27] *** flaper87|afk is now known as flaper87
[07:59:42] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: It is tiem!)
[07:59:53] *** Joins: oberstet (quassel@moz-53D57230.dynamic.mnet-online.de)
[08:00:33] <eddyb> yutongzhao: you can use symbols from A in B and from B in A, as long as you write your own "external" definitions
[08:01:38] <eddyb> a pub extern "C" fn in Rust will be callable from C, while a C function (not C++ though. there's some messy things that we'd need to bind to clang for) can be called from Rust via "FFI" (it's not dynamic, fwiw)
[08:02:20] *** Quits: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net) (Quit: syatchmenoff)
[08:02:54] <mindcat> then I should learn C++/C & Rust
[08:03:49] *** Joins: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net)
[08:04:09] <yutongzhao> given a Rust function's declaration, how do I know what its corresponding C extern is supposed to look like?
[08:04:36] <mindcat> oh! also assambly language
[08:04:47] *** Joins: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com)
[08:04:48] <eddyb> yutongzhao: you declare the extern "C" fn in Rust using C types, then it's a 1:1 mapping
[08:04:57] <eddyb> mindcat: why learn C/C++ when you have Rust :P?
[08:05:48] <mindcat> eddyb: for future jobs
[08:05:59] <eddyb> s/future/old
[08:06:14] <yutongzhao> with simple cases, I know that pub extern fn add(lhs: uint, rhs: uint) -> uint  is equal to C's extern unsigned int add(unsigned int lhs, unsigned int rhs);   but what about more complicated declarations like fn angle(vector: (f64, f64)) -> f64
[08:06:25] <eddyb> that's wrong :)
[08:06:28] <mindcat> eddyb: ok, for old jub
[08:06:33] <mindcat> eddyb:  job*
[08:06:44] <eddyb> yutongzhao: tuples are not C types, thus you shouldn't use them
[08:06:45] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[08:07:11] <eddyb> yutongzhao: uint == uintptr_t not unsigned int
[08:07:41] <eddyb> yutongzhao: look in std::libc for all the C types that you could ever need (and we have a CString wrapper around somewhere)
[08:08:16] <eddyb> yutongzhao: Rust structs are equivalent to C ones
[08:08:48] <yutongzhao> so if uint -> uintpr_t, do I allocate memory on the C side explicitly and free it on the C side as well?
[08:08:49] *** Quits: eebrah (Mibbit@3BF304DB.1654B6C2.2132FB26.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:09:01] <yutongzhao> before passing in the corresponding alloc'd pointer
[08:09:25] <eddyb> how are the two related?
[08:09:38] <eddyb> uintptr_t is an unsigned integer that has the same size as void*
[08:09:57] <yutongzhao> oh
[08:09:58] <yutongzhao> sorry
[08:09:59] <yutongzhao> i misread
[08:10:06] *** Quits: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com) (Ping timeout)
[08:10:12] <eddyb> maybe you should stick to Rust :P
[08:10:27] *** Joins: mib_252h95 (Mibbit@moz-CF296F8E.nc.res.rr.com)
[08:10:31] <yutongzhao> (I'm a C++ programmer)
[08:10:34] *** Joins: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com)
[08:10:41] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[08:10:45] <yutongzhao> let me map C++11's tuple to rusts tuple? :P
[08:10:55] <eddyb> nope, don't even try that
[08:11:03] *** Joins: shilgapira (chatzilla@moz-703651C7.barak.net.il)
[08:11:06] <eddyb> you're risking too much
[08:11:14] <pzol> why does the first assert work fine, but the second fails??   let rakgu = &~"Orc"; assert!("Orc" == *rakgu); assert!(*rakgu == "Orc"); with   error: mismatched types: expected `~str` but found `&'static str` (str storage differs: expected ~ but found &'static )
[08:11:14] <mindcat> yutongzhao: C++ programming is painful?
[08:11:15] <whitequark> rust's tuple is a C++ struct
[08:12:03] <eddyb> pzol: because you're comparing different types
[08:12:20] <eddyb> pzol: inthe same case, the ~str coerces to &str
[08:12:24] <eddyb> *in the first case
[08:12:28] <yutongzhao> hm
[08:12:35] * pzol is confused
[08:12:38] *** Quits: pnathan (Adium@moz-A8921E45.tukw.qwest.net) (Quit: Leaving.)
[08:12:39] <Ralith> eddyb: but why not in the second case?
[08:12:57] *** Joins: dbaupp (Thunderbir@moz-6002BAEA.lns20.syd6.internode.on.net)
[08:13:00] <eddyb> &str doesn't magically turn into ~str
[08:13:31] *** Quits: telotortium (rmi1@moz-46F0EE50.hsd1.ca.comcast.net) (Quit: telotortium)
[08:13:47] *** Quits: shilgapira (chatzilla@moz-703651C7.barak.net.il) (Ping timeout)
[08:14:01] <dbaupp> wycats_: JSON tokenises fine, so `stringify!( { "foo": [1, 2], "bar": null } )` is a json "literal" (as a string, could have another macro that passes it through extra::json)
[08:14:09] <dbaupp> (fwiw)
[08:14:24] *** Quits: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net) (Ping timeout)
[08:14:32] <eddyb> though we could allow ~T == &T to map to &T == &T
[08:14:37] <wycats_> I need to learn more about macros
[08:15:05] <dbaupp> <3 macros
[08:15:20] *** Joins: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net)
[08:15:27] <pzol> eddyb intuitevely the == should work the same both ways
[08:15:31] <mindcat> ohhh dbaupp is online
[08:15:38] <mindcat> dbaupp: PING
[08:15:49] <yutongzhao> another question, does rust have access to anything like C/C++ SSE/SSE2/AVX instructions?
[08:16:06] <yutongzhao> (and deal with annoying things like me having to port SSE2 code to NEON code etc)
[08:16:47] <Yurume> yutongzhao: Rust supports an inline assembly and a rudimentary (i.e. needs ongoing work but exists) support for SIMD intrinsics.
[08:17:14] <mindcat> "TODO"
[08:17:17] <mindcat> right?
[08:17:23] *** Joins: buster (buster@3A0EAB5F.9C69795C.ACFE537F.IP)
[08:17:28] <wycats_> in other news fuck HashSet is slow
[08:17:37] <Yurume> mindcat: right, but if you feel adventerous you can try using std::unstable::simd.
[08:17:51] <eddyb> wycats_: blame SipHash
[08:17:59] *** Joins: gkostyanikov (gkostyanik@531C4285.3E410295.CA6E2165.IP)
[08:18:15] <wycats_> https://www.irccloud.com/pastebin/kvpRQ0WV
[08:18:24] <Yurume> eddyb: blame  direct chaining
[08:18:31] <mindcat> wycats_: then Java is slow?
[08:18:32] <dbaupp> mindcat: PONGGGGG
[08:18:39] <mindcat> dbaupp: XD
[08:18:40] <wycats_> char_set was me trying to improve by using a bitmask for ascii
[08:18:56] *** Quits: mib_252h95 (Mibbit@moz-CF296F8E.nc.res.rr.com) (Quit: http://www.mibbit.com ajax IRC Client)
[08:19:18] <dbaupp> wycats_: what is that benchmark?
[08:19:22] <yutongzhao> does the unstable::simd  abstract away shit like movapd and other intrinsics and automatically figure out how to map it the corresponding instruction sets on ARM/IntelChips/etc?
[08:19:31] <dbaupp> wycats_: (i assume the others have been dead-code eliminated to a noop)
[08:19:36] <wycats_> just .contains on a Set<char>
[08:20:39] <dbaupp> wycats_: as I say, 2 ns/iter is a strong sign of dead code elimination
[08:21:08] <wycats_> dbaupp: I have doubts
[08:21:17] <mindcat> I forgot one thing, it is rust have date time support?
[08:21:24] <wycats_> mindcat: not great support
[08:21:28] <Yurume> yutongzhao: well, not yet at the moment.
[08:21:30] <dbaupp> wycats_: show me the code
[08:21:37] <wycats_> mindcat: I have a small project with some additional date time stuff
[08:21:39] <wycats_> dbaupp: k
[08:21:49] <wycats_> https://gist.github.com/8396506
[08:21:51] <mindcat> wycats_: github?
[08:21:51] <Yurume> it does support normal packed arithmetics
[08:22:05] <wycats_> dbaupp: while you're add it, maybe you can help me with this error:
[08:22:11] <wycats_> https://www.irccloud.com/pastebin/bkXGtEXJ
[08:22:17] <wycats_> mindcat: it's really proof of concept
[08:22:28] <wycats_> https://github.com/wycats/rust-activesupport
[08:22:42] <wycats_> https://github.com/wycats/rust-activesupport/blob/master/date.rs#L7
[08:22:43] <Yurume> yutongzhao: if you want a stability at this moment you'd rather use an inline assembly which cannot be changed to something incompatible (surely)
[08:22:45] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[08:22:46] <dbaupp> wycats_: treemap doesn't implement clone
[08:22:54] <wycats_> really :(
[08:22:54] <dbaupp> wycats_: I've tried to fix that horrible error message
[08:23:03] <dbaupp> but I couldn't get it to compile
[08:23:05] <wycats_> the date time stuff in here is probably more interesting than the activesupport shenanigans
[08:23:13] <wycats_> dbaupp: am I just pwned then?
[08:23:15] <wycats_> seems bad
[08:23:15] <dbaupp> (I'm the semi-maintainer of the #[deriving] stuff.)
[08:23:21] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[08:23:21] <yutongzhao> I see
[08:23:25] <dbaupp> submit a PR adding clone to treemap
[08:23:27] <dbaupp> I'd r+
[08:23:37] <dbaupp> can probably be done with deriving
[08:23:45] <wycats_> I don't know how to implement a deriving
[08:23:52] <dbaupp> no
[08:24:01] <dbaupp> just stick a #[deriving(Clone)] on TreeMap
[08:24:03] <halorgium> #[deriving(Clone)] ?
[08:24:04] <wycats_> ah ok
[08:24:07] <wycats_> seems easy :P
[08:24:08] <dbaupp> in src/libextra/treemap.rs
[08:24:28] <dbaupp> while you're at it, can put DeepClone in there too
[08:24:29] <wycats_> it's already there
[08:24:37] <wycats_> line 37
[08:24:45] <dbaupp> oh, just on TreeSet then
[08:25:56] <pzol> seriously... I should be able to do assert!(*s == "str"); (which doesn't work) - I need to do assert!(*s == ~"str");
[08:26:03] <dbaupp> wycats_: it is being dead code eliminated
[08:26:08] <pzol> where let s = &"str"
[08:26:09] <dbaupp> pzol: you can do `"str" == s`
[08:26:22] <yutongzhao> does rust's concurrency model allow for scalability in cluster node environments (preferably via MPI?)
[08:26:35] <wycats_> dbaupp: why would tree_set be eliminated but not hash_set?
[08:26:39] <yutongzhao> (Sorry for being annoying, I work on a lot of HPC stuff)
[08:26:49] <pzol> dbaupp I know... but it took me half an hour to figure that out... that is totally not obvious, especially to beginners
[08:26:55] <dbaupp> wycats_: hash_set is significantly more complicated/harder to optimise
[08:27:00] <dbaupp> wycats_: I assume
[08:27:04] <dbaupp> wycats_: I'm reading the IR now
[08:27:13] <wycats_> https://github.com/mozilla/rust/pull/11510
[08:27:32] <wycats_> I also have many doubts about code inside of a benchmark being DCE
[08:27:51] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[08:28:02] <Heather> there are bugs with print(a+ "" + b) ?
[08:28:06] <dbaupp> wycats_: https://gist.github.com/huonw/5c47afd7704a530abfdb
[08:28:09] <wycats_> dbaupp: isn't it by definition not dead code
[08:28:19] <dbaupp> wycats_: as far as LLVM knows it is daed
[08:28:28] <wycats_> dbaupp: O_O
[08:28:32] <wycats_> how to avoid this?
[08:28:34] <wycats_> pub fn?
[08:28:38] <dbaupp> nah, sec.
[08:28:52] * wycats_ is excited about his first Rust PR
[08:29:00] *** Joins: mouse (mouse@moz-373942D2.dhcp.yndx.net)
[08:29:38] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[08:29:53] <wycats_> does make -jN help on rust compilation or just llvm?
[08:30:06] *** Joins: bogomips (dfukdev@EC7448F1.247D1A12.3F821976.IP)
[08:30:28] <halorgium> is the removal of std::util::Either because it is possible to use an enum with the Left and Right instead?
[08:30:38] <Yurume> halorgium: and it is isomorphic to Result, yes.
[08:30:54] <dbaupp> wycats_: could I be annoying and pester you to add Eq and Ord tot that #[deriving]? :)
[08:30:57] <wycats_> halorgium: zomg a wild halorgium appears
[08:31:01] <wycats_> dbaupp: sure
[08:31:05] <wycats_> once make is done
[08:31:17] <wycats_> so give me an hour or two :P
[08:31:23] <Yurume> it is not reducing the features, it makes sure that there is only one option for one use
[08:31:23] <dbaupp> wycats_: -j only really helps LLVM; it does allow for some parallelism
[08:31:36] <wycats_> rustc yuno parallel
[08:31:46] <wycats_> I heard rust was concurrent, safe, fast
[08:31:49] <Yurume> Heather: I have a question about NuGet and Chocolatey
[08:32:00] <dbaupp> wycats_: if you add it now and push to the PR it'll be in master in ~1.5 hours
[08:32:06] <halorgium> Yurume: i see, what do you mean by Result?
[08:32:09] <wycats_> dbaupp: gimme a sec
[08:32:24] <dbaupp> (otherwise you'll ahve to wait for me to come back from dinner... :P )
[08:32:32] <Yurume> does NuGet and/or Chocolatey support a stable install path other than <chocoroot>\lib\Rust.<unstable-id>\bin?
[08:32:34] <wycats_> halorgium: Result is enum<T,U> { Ok(T), Err(U) }
[08:32:45] <halorgium> oh, i see!
[08:32:47] <wycats_> dbaupp: gimme a sec
[08:32:56] <wycats_> halorgium: I like Result for error handling
[08:33:11] <mcpherrin> Basically there's no good use for Either
[08:33:14] <halorgium> yer, i implemented a Result for our java code ;)
[08:33:36] <mcpherrin> I think Either is used in Haskell for things that idomatic Rust code should use Result for
[08:33:42] <halorgium> mcpherrin: especially if it is trivial to implement and you can have a N-way Either
[08:33:42] <mindcat> hey, if a device 1MB memory only, then how limit memory usage in Rust?
[08:34:19] <mcpherrin> mindcat: You've got exact control over allocations in Rust just like you'd have in C
[08:34:33] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (Quit: Coyote finally caught me)
[08:34:34] <mcpherrin> mindcat: 1MB is certainly doable if you don't link in the runtime
[08:34:38] <halorgium> to confirm, an enum is never read or written positionally, right?
[08:34:43] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[08:34:46] *** Joins: z0w0 (zack@moz-87AABEA0.lnse1.woo.bigpond.net.au)
[08:34:46] <wycats_> halorgium: confirm
[08:34:49] <dbaupp> wycats_: part of the problem with that bench is the sets are so small
[08:34:51] <mcpherrin> halorgium: Right.  You can only pattern match to decompose it
[08:34:52] <mindcat> mcpherrin: I just ask it is possible
[08:34:56] <dbaupp> hashmap would be better for huge ones
[08:35:00] <wycats_> match enum { Ok(foo) => , Err(foo) => }
[08:35:02] <dbaupp> *hashset
[08:35:07] <Heather> Yurumechan yes?
[08:35:18] <wycats_> dbaupp: ?
[08:35:20] <mcpherrin> mindcat: I'm not sure anyone has ever done it, but it should be possible to run Rust code in a meg of address space and/or ram, yes
[08:35:50] <Yurume> Heather: well, I tried using Rust NuGet package via Chocolatey (while documenting it) and it turns out that MSYS does not like rustc.bat etc. at all
[08:35:56] <wycats_> halorgium: you can also add methods to enums
[08:36:04] <Yurume> a draft document here: https://gist.github.com/lifthrasiir/8386766 (English version below)
[08:36:06] <Heather> Yurume I doubt that I can answer it. I don't use Chocolatey
[08:36:08] <wycats_> Option<T>.is_none()
[08:36:10] <mcpherrin> Somebody may have tried to run Rust on at Arduino or similar class microcontroller 
[08:36:11] <Yurume> hmm
[08:36:23] <wycats_> Result<T,U>.is_ok()
[08:36:24] <mcpherrin> And they generally have less than a meg of sram+flash
[08:36:29] <Yurume> do you use Visual Studio then?
[08:36:36] <wycats_> Some("foo").map(|str| )
[08:36:49] <Heather> how to make print(foo()) now?
[08:36:53] <Yurume> (I have no copy of VS atm but it seems that VS has a separate console for NuGet)
[08:36:56] <dbaupp> wycats_: a hashset is doing a lot of work, but is O(1), while TreeSet is O(log n) but with very little initialisation time for each lookup
[08:36:59] <wycats_> dbaupp: I would expect my bitmask version to be faster always for ascii
[08:37:04] <whitequark> mcpherrin: it's possible with... as low RAM as you want. I have a board with 20K here.
[08:37:04] <Heather> Yurume yes I use VS
[08:37:09] <Yurume> dang :)
[08:37:17] <whitequark> but you need a custom stdlib
[08:37:26] <wycats_> and since URLs are almost always ASCII
[08:37:30] *** Joins: ecl3ctic (Mibbit@moz-E1FAD64C.wzfv1.vic.bigpond.net.au)
[08:37:30] <dbaupp> wycats_: but yeah, the bitmask one will be ridiculously fast for ascii
[08:37:31] <wycats_> it seems like the way to go
[08:37:36] <whitequark> rust as a language doesn't have lower limits on RAM, just like C
[08:37:47] <wycats_> dbaupp: now how do I properly bench without getting DCE
[08:37:53] <mcpherrin> whitequark: I figured as much but haven't actually tried it -- I figured there could be implementation bugs that prevent it from working properly :-)
[08:37:57] <ross> I have chocolatey nuget installed, though I don't regularly use it
[08:38:00] <dbaupp> wycats_: I just put assert!(...) on each .contains()
[08:38:03] <dbaupp> and it seemed to work
[08:38:07] <wycats_> whitequark: the lower limit is an empty main() {}
[08:38:14] *** Joins: benjamin__ (benjamin@moz-CAB4ED9.dip0.t-ipconnect.de)
[08:38:17] <whitequark> wycats_: doesn't necessarily need any RAM
[08:38:19] <dbaupp> (or assert!(!...); as appropriate)
[08:38:21] <Heather> how to print ( foo() ) ? :)
[08:38:30] <dbaupp> Heather: print!("{}", foo())
[08:38:37] <dbaupp> Heather: or `use std::io::print;`
[08:38:44] *** Quits: nobody (nobody@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[08:38:49] <mindcat> hey, how do compile Rust in Raspberry Pi?
[08:38:54] <Heather> dbaupp Hell, no
[08:38:56] <Yurume> Heather: print!/println! is almost a direct replacement for oldy print :)
[08:39:00] *** Quits: benjamin_ (benjamin@moz-7D037579.dip0.t-ipconnect.de) (Ping timeout)
[08:39:01] *** Joins: nobody (nobody@moz-7E09A266.neo.res.rr.com)
[08:39:02] <Heather> dbaupp why there is no easy way?
[08:39:15] <dbaupp> Heather: both of those are very easy
[08:39:18] <wycats_> dbaupp: working on it
[08:39:26] <mcpherrin> mindcat: I think Luqman keeps binaries of Rustc around that'll run on a pi
[08:39:27] <mcpherrin> http://luqman.ca/rust-builds/
[08:39:28] <wycats_> mindcat: it should "just work"
[08:39:29] <bogomips> what's the most popular editor/ide for coding rust atm?
[08:39:33] <Heather> dbaupp print!({}, foo()) is not easy
[08:39:41] <dbaupp> bogomips: vim and emacs have good support
[08:39:47] <mcpherrin> bogomips: I gather a large portion of folks are split between emacs and vim.
[08:39:54] <Yurume> IMO println! is easy since you don't have to know if foo() returns ~str/&str or something non-string which can be formatted nevertheless
[08:39:59] <Heather> dbaupp I liked old way
[08:40:00] <dbaupp> bogomips: there are some config files for other editors in the src/etc folder of the main repository
[08:40:00] <bogomips> thanks
[08:40:07] <mindcat> mcpherrin: ohhh
[08:40:09] <Yurume> if foo() returns uint, you cannot use print at all
[08:40:22] <mindcat> mcpherrin: yea XD
[08:40:34] <mcpherrin> mindcat: Compiling your own rustc on the pi itself is a little tricky
[08:40:35] <Heather> Yurumechan it returns string
[08:40:50] <Heather> * Yurume ^
[08:40:51] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[08:41:07] <Yurume> yeah, it does work for str-returning functions, it does not for uint-returning functions
[08:41:14] <wycats_> https://www.irccloud.com/pastebin/cvXTzNQo
[08:41:28] <wycats_> dbaupp: tl;dr my bitmask version is almost as fast as no code :P
[08:41:41] <Yurume> it makes something convenient while sacrificing something else inconvenient, which may or may not be acceptable, but to me it does not make much difference
[08:41:49] <Heather> ah
[08:41:52] <Heather> I forgot 05use std::io::print01
[08:42:10] <Yurume> |asdf|
[08:42:11] <Yurume> hmm
[08:42:18] <Heather> now it's clear
[08:42:33] <Yurume> awww, mIRC color :)
[08:42:33] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[08:44:35] <TheHydroImpulse> Are there any LLVM bindings for Rust?
[08:44:43] <Yurume> rustc has them
[08:44:47] <mcpherrin> mindcat: I just confirmed http://luqman.ca/rust-builds/rust-0.9-8adbb38-arm-unknown-linux-gnueabihf.zip runs on a Raspian pi no problemo
[08:45:17] <dbaupp> wycats_: yup :D
[08:45:27] <dbaupp> (anyway, gtg for a bit)
[08:45:38] <Yurume> TheHydroImpulse: https://github.com/mozilla/rust/blob/master/src/librustc/lib/llvm.rs
[08:45:45] *** Joins: shilgapira (chatzilla@moz-703651C7.barak.net.il)
[08:46:02] <TheHydroImpulse> Yurume Awesome, thanks
[08:46:14] <mindcat> mcpherrin: I am downloading ;D
[08:47:06] <mcpherrin> mindcat: You probably don't have enough RAM to build updated versions of rust on the Pi itself, unfortunately.  I think Luqman still does it with qemu on an x64 server
[08:47:15] <wycats_> dbaupp: also HashSet is ridiculously slow
[08:48:42] <mindcat> mcpherrin: oh! I have a server too
[08:48:44] <wycats_> is there a way to run --test or --bench with a particular bench or test to run?
[08:49:12] <mcpherrin> mindcat: well the fact that it is a server is mostly irrellevant ;)
[08:50:18] *** Quits: yutongzhao (yutongzhao@moz-325F8282.hsd1.ca.comcast.net) (Quit: yutongzhao)
[08:51:41] <eddyb> http://www.reddit.com/r/rust/comments/1uxaig/memory_ownership_and_lifetimes_niko_matsakis/cen1f4u?context=10
[08:51:41] <mindcat> I want "(),{}" get rid
[08:51:42] <eddyb> teehee
[08:52:46] <mindcat> so Nfn! Nenum! Nstruct! etc..
[08:52:54] <eddyb> erm, what?
[08:53:19] <eddyb> mindcat: what is the context? I feel like I missed some interesting discussion
[08:53:19] <Yurume> Nfn! f a:int, b:int -> int { a+b }?
[08:53:28] <Yurume> Nfn! f a:int b:int -> int { a+b }*
[08:53:32] <eddyb> eww
[08:54:05] <mindcat> "Nfn! main \n  1+1"
[08:54:09] <eddyb> but who can argue with bad taste?
[08:54:20] <eddyb> mindcat: that is worse than Haskell
[08:55:49] <mindcat> eddyb: I want use indent
[08:56:23] <eddyb> good luck implementing python with procedural macros
[08:58:15] <Yurume> mindcat: I suggest making a separate front end with the same AST as rustc ;)
[08:58:49] <Yurume> no matter what is good and bad with curly braces, Rust today is too stable (!) to make such changes.
[08:59:11] *** Joins: achim (achim@moz-254418F2.dip0.t-ipconnect.de)
[08:59:36] <mindcat> http://paste.ubuntu.com/6743508/
[08:59:40] <mindcat> like this feel
[09:00:00] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[09:00:19] <eddyb> completely unreadable, parseable though
[09:00:25] <Yurume> mindcat: I urge you to read the resyntaxed C++, SPECS: http://www.csse.monash.edu.au/~damian/papers/HTML/ModestProposal.html
[09:02:39] <mindcat> Yurume: woohoo, sorry I am not english master. so it is fantasy
[09:02:56] <Yurume> so do I :)
[09:03:27] <eddyb> s/so do I/neither am I/
[09:03:50] *** Parts: Heather (Heather@19663F6.F53BAACC.9C17E900.IP) ()
[09:04:04] <eddyb> (it could be worse, we could have a lot of RE experts talking exclusively in engrish)
[09:04:27] <Yurume> eddyb: pun intended
[09:04:30] *** Joins: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com)
[09:04:36] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[09:04:47] <wycats_> dbaupp: https://github.com/mozilla/rust/pull/11510
[09:05:38] <Yurume> but yeah, that was what my head gave me at the first time indeed, proving I'm not fluent in English
[09:06:23] *** Quits: gkostyanikov (gkostyanik@531C4285.3E410295.CA6E2165.IP) (Ping timeout)
[09:06:29] *** Quits: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com) (Quit: csherratt)
[09:07:05] <eddyb> come to think of it, it probably was OSDev that forced me to improve my English - though cartoons and TV series definitely helped
[09:07:30] <Yurume> lol
[09:07:35] <mindcat> Japanese anime? XD
[09:07:59] <eddyb> nope, Disney cartoon series
[09:08:21] <eddyb> as 'murican as they get
[09:08:24] *** Joins: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com)
[09:09:09] <eddyb> (it's funny how I might have been watching Tom&Jerry and Stargate at the same time at one point - same producers, decades apart)
[09:09:34] <Yurume> !
[09:09:52] *** Joins: gkostyanikov (gkostyanik@531C4285.3E410295.CA6E2165.IP)
[09:10:00] <eddyb> SyFy fucked up though :(
[09:11:01] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Ping timeout)
[09:12:00] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[09:12:39] <wycats_> eddyb: how so?
[09:12:43] <mindcat> mcpherrin: ok, I am go to write a PKGBUILD
[09:12:59] *** Quits: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com) (Quit: csherratt)
[09:13:13] *** Joins: jackneill (jackneill@moz-985E4FF7.pool.digikabel.hu)
[09:13:15] <eddyb> wycats_: canceling SG:U
[09:14:00] *** Quits: wtw (wtw@moz-D8FB7390.org) (Quit: Lost terminal)
[09:14:09] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[09:17:40] <wycats_> eddyb: I was not a fan
[09:17:49] <wycats_> dbaupp: turns out I didn't need to derive thos
[09:17:59] <wycats_> eddyb: huge fan of SG1 and sort of SG:A
[09:18:01] <wycats_> SG:U was :(
[09:18:56] <mcpherrin> SG1 was pretty good, though I stopped watching after replicators / prometheus, maybe S07? Got kinda tired of the show
[09:19:13] <mcpherrin> Also, graduated college and free time went down :P
[09:19:49] <dbaupp> wycats_: you can pass a string to the test runner, and it will only run those tests/benches that have that as a substring
[09:20:00] <wycats_> dbaupp: yep
[09:20:03] <wycats_> figured it out
[09:20:05] <wycats_> don't pull that yet
[09:20:08] <dbaupp> awesome
[09:20:10] <wycats_> pushing a new PR momentarily
[09:20:21] <wycats_> you confused me with the request to add derivings that were already implemented :P
[09:20:30] <wycats_> gotta recompile librustc and libsyntax
[09:20:33] <wycats_> many hours
[09:20:34] <wycats_> :P
[09:21:15] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[09:21:17] <wycats_> dbaupp: between the CharSet fix and https://github.com/wycats/route-recognizer.rs/commit/18c9fc1085a483e7076ea4c9a63dc0a21177d767 the router is 4x faster now :D
[09:21:32] <wycats_> iterate twice as many times, 3x improvement
[09:21:33] <wycats_> whee
[09:24:18] <mindcat> mcpherrin: hey! I have HG255D router, can I running rust program inside? http://wiki.openwrt.org/toh/huawei/hg255d
[09:24:41] <mindcat> MIPS CPU
[09:24:53] <mindcat> XD
[09:24:54] <mcpherrin> mindcat: I think people have run MIPS code, yes
[09:25:07] <mcpherrin> mindcat: I don't have first hand knowledge though, so I can't be of much more help
[09:25:11] <ChrisMorgan> wycats_: I suddenly thought of something: using headers[HeaderName] would have the advantage that you could have first-class support for extension headers.
[09:25:24] <wycats_> ChrisMorgan: c
[09:25:34] <wycats_> ChrisMorgan: the negative is having to import the header names
[09:25:43] <wycats_> #[feature(glob)] amirite?
[09:25:46] <mcpherrin> mindcat: I do have a bunch of MIPS computers though, so I could try at some point :P
[09:26:37] <ChrisMorgan> wycats_: that would let you `import http::headers::*;`
[09:26:43] <mindcat> mcpherrin:  http://paste.ubuntu.com/6743612/
[09:27:17] * ChrisMorgan is now fairly quickly coming to like this proposal a lot
[09:28:09] *** Joins: skade (skade@541D1605.505237C9.CAE22B62.IP)
[09:28:10] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[09:28:54] *** Quits: shilgapira (chatzilla@moz-703651C7.barak.net.il) (Ping timeout)
[09:29:53] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[09:30:07] *** Joins: Ferreus (ferreus@moz-DE3C0D57.dip0.t-ipconnect.de)
[09:30:15] <wycats_> ChrisMorgan: :D
[09:30:26] <ChrisMorgan> Now I must find out if it will work.
[09:30:27] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[09:30:34] <wycats_> ChrisMorgan: I'm just not sure if globs are acceptable at all
[09:30:41] <wycats_> or if they're deprecated a la @-boxes
[09:31:27] <eddyb> they cause some problems. maybe just fixing them is easier than removing them
[09:32:03] <ChrisMorgan> I believe pcwalton wants to remove them, but I think they're unlikely to be removed before 1.0 at least. They're just too useful for certain types of cases—and the fundamental problems they cause (shadowing and the likes) are significantly reduced in a language like Rust compared to Python.
[09:32:23] <ChrisMorgan> They've been feature-gated because they're known to be a tad buggy.
[09:32:49] <ChrisMorgan> (Viz. not because they're deprecated.)
[09:32:50] <wycats_> ChrisMorgan: I think they're generally a bad idea
[09:32:54] <wycats_> but useful in this case
[09:33:03] <wycats_> the shadowing problem is real
[09:33:18] <ChrisMorgan> I agree—PEP 8 made the right call in recommending against glob imports.
[09:33:26] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[09:33:35] <wycats_> but I think this is a use-case where they're clearly useful
[09:33:36] <ChrisMorgan> And yes, it is still a slight problem in a language like Rust, just not as big a problem as in Python.
[09:33:40] <wycats_> and much better than the alternative
[09:33:49] <ChrisMorgan> Ditto with status codes and such.
[09:33:58] *** Quits: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com) (Ping timeout)
[09:34:10] <ross> where's println? (not the macro)
[09:34:46] <nobody> ChrisMorgan! of rust-http fame?
[09:34:53] <wycats_> ChrisMorgan: it's not such a big issue because fns have closed scope
[09:34:54] <ross> oh it's just recently been moved or removed huh
[09:34:56] <wycats_> (like Ruby)
[09:35:09] <klutzy> ross: it's at std::io::stdio
[09:35:10] <ross> I see it in the 0.9 tutorial, but not master
[09:35:18] <wycats_> so the only issue would be struct ShadowSomething
[09:35:24] <wycats_> which I assume would just shadow?
[09:35:24] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[09:35:26] <klutzy> ross: re-exports were removed recently
[09:35:27] <wycats_> and not asplode?
[09:35:37] <wycats_> klutzy: pub use is gone?
[09:36:02] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[09:36:05] <klutzy> wycats_: ugh, my words were bad. re-exporting of print was removed
[09:36:35] <klutzy> i.e. https://github.com/mozilla/rust/pull/11416
[09:37:32] <ross> thanks :)
[09:38:38] *** Quits: lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net) (Ping timeout)
[09:38:39] <ChrisMorgan> nobody: yep, rust-http is my project
[09:38:45] <wycats_> dbaupp: soon my PR will be update
[09:38:47] <wycats_> updated
[09:38:51] <wycats_> compilation takes ages
[09:39:33] <nobody> does this sound familiar off-hand? error: unresolved import. maybe a missing `extern mod buffer`
[09:40:21] <ChrisMorgan> nobody: on a line `use buffer::something;`?
[09:40:36] <wycats_> nobody: where is buffer from?
[09:40:49] <nobody> it's from src/http/server/mod.rs:11:5
[09:40:51] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[09:41:01] *** Quits: qlkzy (qlkzy@moz-A97B5CE9.members.linode.com) (Quit: ZNC - http://znc.sourceforge.net)
[09:41:07] <nobody> i'm having trouble using the library
[09:41:22] <nobody> i've tried rust head, rust 0.9, rust 0.8
[09:41:23] *** Joins: qlkzy (qlkzy@moz-A97B5CE9.members.linode.com)
[09:41:49] <ChrisMorgan> nobody: have you made modifications of your own?
[09:42:00] <nobody> nope
[09:42:08] <nobody> just trying to get off the ground
[09:42:13] <wycats_> so many stages
[09:42:21] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Ping timeout)
[09:42:27] <nobody> i was told a few days ago rustpkg doesn't work with rust-http
[09:42:33] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[09:42:49] <wycats_> nobody: sounds possible
[09:42:55] <wycats_> nobody: rustc is really easy to use
[09:43:00] <wycats_> go into rust-http
[09:43:01] <wycats_> type make
[09:43:05] <nobody> so i ran 'make all' and then copied the src/http to my own src dir, is that the right thing to do?
[09:43:17] <wycats_> nobody: I'd put it in a lib/
[09:43:21] <ChrisMorgan> nobody: well, it can be done with rustpkg, it will just take a couple of steps.
[09:43:24] <wycats_> and then when you rustc
[09:43:30] <wycats_> do rustc -L ../lib
[09:43:36] <wycats_> nobody: you're missing the -L
[09:43:48] <wycats_> to tell rustc where to look for dependencies
[09:44:03] <wycats_> ChrisMorgan: I wouldn't send noobs down the rustpkg rathole
[09:44:05] <nobody> ah i'll try it, thanks
[09:44:05] <ChrisMorgan> nobody: don't copy the source; it's the .so/.dylib/.rlib/.dll file(s) that you want; add the path to them to the path.
[09:44:16] <ChrisMorgan> wycats_: ditto
[09:44:29] <wycats_> ChrisMorgan: hopefully soon it will be better
[09:44:34] <wycats_> I hope to work on it
[09:44:39] <ChrisMorgan> (The lattermost "path" there being the -L that wycats_ spoke of.)
[09:44:41] <nobody> does the compiler not need the lib source?
[09:44:49] <wycats_> nobody: nope
[09:45:06] <wycats_> nobody: the .rlib (or .so) contains all the info the compiler needs
[09:45:11] <wycats_> magix
[09:45:18] *** Joins: rca (rcatolino@moz-5C941ACC.adsl.proxad.net)
[09:45:19] <nobody> oh very cool
[09:45:27] <wycats_> ChrisMorgan: I'd recommend that people use the .rlib no?
[09:45:41] <eddyb> best optimization, largest output size
[09:45:41] <ChrisMorgan> .so/.dylib/.dll is for dynamic linking, .rlib permits static linking.
[09:45:50] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[09:45:52] <eddyb> -Z lto is more magic
[09:46:07] <wycats_> ChrisMorgan: you can still build an .so final output with an .rlib input
[09:46:20] <wycats_> such magic
[09:47:45] <wycats_> .rlib is the simplest approach
[09:47:55] <wycats_> if not for the size issues it would be the default
[09:47:56] *** Joins: heftig (heftig@moz-D746319F.unitymedia.biz)
[09:48:42] *** Quits: pzol (pzol@322A273C.DEB41A6D.AADC76B.IP) (Quit: Textual IRC Client: www.textualapp.com)
[09:49:19] <nobody> SUCCESS!
[09:49:29] <nobody> thanks wycats_ , ChrisMorgan 
[09:49:38] <wycats_> nobody: I should write this up
[09:49:44] <wycats_> it's very simple
[09:49:51] <wycats_> and why I don't recommend rustpkg to people
[09:49:53] <nobody> i was about to say, a tutorial would have helped
[09:49:55] *** Quits: Ferreus (ferreus@moz-DE3C0D57.dip0.t-ipconnect.de) (Connection reset by peer)
[09:49:59] <wycats_> ccc
[09:50:05] <wycats_> nobody: I was where you are a month ago
[09:50:08] <nobody> i did look, i promise :)
[09:50:12] <wycats_> except I spent 1.5 days on rustpkg
[09:51:13] * ChrisMorgan just knows that two copies of .so files and then .rlibs to top it off is too big for his tablet to cope with easily (with a 2GB loop disk), so he has a script which hardlinks all identical files to save space
[09:51:29] *** Joins: fyolnish (fyolnish@moz-F8CCFEA4.uqwimax.jp)
[09:52:00] <nobody> ChrisMorgan- want a pull request adding this to rust-http README?
[09:52:17] *** Joins: pzol (pzol@322A273C.DEB41A6D.AADC76B.IP)
[09:52:22] <ChrisMorgan> nobody: sure
[09:52:37] <nobody> alright
[09:52:43] <nobody> also
[09:52:46] <nobody> while i'm here
[09:53:06] <nobody> i saw references to a "rust" tool that used commands like 'rust run' and such
[09:53:27] <nobody> is that not installed by default?
[09:53:31] <sigma> it was removed
[09:53:48] <nobody> rustc it is then
[09:54:08] <ChrisMorgan> It had problems and wasn't being maintained, and nothing it could do couldn't be done in fewer than four commands.
[09:56:04] <sigma> hmm, does anyone have an opinion of which embeddable scripting language would suit a rust project?
[09:56:21] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[09:57:04] <mindcat> rust-run -L . hello.rs => "mkdir tmp; rust -L . -o tmp/tmp-`date "+%Y-%m-%d_%H-%M-%S"` hello.rs"
[09:57:08] <mindcat> no
[09:57:43] <hansjorg> sigma: lua bindings: https://github.com/kballard/rust-lua
[09:57:47] * nobody likes Lua
[09:57:52] <sigma> I want a scripting language as an escape hatch from the toy build system I'm working on and can't decide which would have the lowest impedence mismatch
[09:58:13] <nobody> i mean, a lot of people like lua, i guess
[09:58:13] <sigma> yeh, I've looked at lua, ruby, python and a few others, lua seems to be the best technically
[09:58:15] <nobody> not nobody
[09:58:19] <nobody> i should get a real nick
[09:58:44] *** Quits: Kxepal (Miranda@moz-DC764D4E.pppoe.mtu-net.ru) (Ping timeout)
[09:59:04] <sigma> I'm just not sure whether it would be worth going for something like python because of the ubquity
[09:59:09] <mindcat> rust-run -L . hello.rs => "DATE=`date "+%Y-%m-%d_%H-%M-%S"`; mkdir ./tmp; rust -L . -o tmp/$DATE hello.rs; ./tmp/$DATE; rm -f ./tmp/$DATE"
[09:59:14] *** Joins: shilgapira (chatzilla@84CF3C3A.47BE6D97.F9582E85.IP)
[09:59:16] <mindcat> non-test
[09:59:38] *** Joins: Ferreus (ferreus@moz-DE3C0D57.dip0.t-ipconnect.de)
[09:59:43] *** Quits: qlkzy (qlkzy@moz-A97B5CE9.members.linode.com) (Quit: ZNC - http://znc.sourceforge.net)
[09:59:56] *** Joins: lukem (Mibbit@moz-67A308A0.dyn.iinet.net.au)
[10:00:15] <sigma> I'm definitely not going down the cMake route of writing my own language ^^
[10:00:37] <nobody> lua was made for embedding.. python and ruby are monsters in comparison
[10:01:17] <lukem> I have a newb question, the ! syntax on the syntax extensions like println! etc. I was wondering if there is somewhere explaining why that is used? instead of just println() etc. just interested 
[10:01:23] <nobody> and it's ranked #22 on github fwiw, not shabby at all
[10:01:32] <sigma> yeh, I know they'd be extra work (I've embedded python in things before)
[10:01:40] <sigma> hmm, didn't know it was that widely used
[10:01:42] <sigma> Lua it is
[10:01:54] <TheHydroImpulse> lukem It's a macro
[10:02:05] <TheHydroImpulse> http://static.rust-lang.org/doc/0.9/guide-macros.html
[10:02:13] *** Joins: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP)
[10:02:15] <ChrisMorgan> wycats_: sad, things like `headers[CONTENT_TYPE].type_` won't work at present—"failed to find an implementation of trait Header<CONTENT_TYPE> for [type error]", it'd need to be `let content_type: ContentType = headers[CONTENT_TYPE]; content_type.type_`
[10:02:25] *** Joins: Kxepal (Miranda@moz-49BF091C.pppoe.mtu-net.ru)
[10:02:31] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[10:02:39] <wycats_> ChrisMorgan: can you show me the code?
[10:02:52] <wycats_> the Index impl?
[10:03:51] <eddyb> ChrisMorgan: that sounds like inference screwing up
[10:04:50] <lukem> right so the ! just tells us its a macro
[10:05:41] <ChrisMorgan> wycats_: https://gist.github.com/chris-morgan/a7c7af3f210e682a11c6
[10:06:15] <ChrisMorgan> eddyb: yes indeed—it should work but it doesn't. My point is purely that at present it doesn't work.
[10:06:43] <dbaupp> wycats_: optimisation \o/
[10:07:09] <dbaupp> (re being 4x faster)
[10:07:33] <wycats_> c
[10:07:34] <dbaupp> wycats_: that said... I don't see any array copying in the old version of https://github.com/wycats/route-recognizer.rs/commit/18c9fc1085a483e7076ea4c9a63dc0a21177d767 ?
[10:07:41] <wycats_> why isn't C just HeaderName or whatever
[10:08:32] * ChrisMorgan rather liked doing `#[cfg(not(broken))] fn main() { /* code that works */ } #[cfg(broken)] fn main() { /* code that is, well, broken */ }` just then
[10:08:49] <dbaupp> wycats_: um, unfortunately the #[deriving] PR can't be done with deriving :(
[10:09:02] <dbaupp> wycats_: (also, it has 2 commits, the second of which undoes the first one)
[10:09:20] <wycats_> dbaupp: deny
[10:09:27] <wycats_> dbaupp: you were wrong about Ord and Eq
[10:09:33] <wycats_> the first commit does Clone, Ord and Eq
[10:09:36] <wycats_> then acrichto merged
[10:09:41] *** Quits: shilgapira (chatzilla@84CF3C3A.47BE6D97.F9582E85.IP) (Ping timeout)
[10:09:42] <wycats_> or auto-merged or whatever
[10:09:46] <wycats_> then I realized my mistake
[10:09:51] <wycats_> and submitted a second that just left Clone
[10:09:54] <wycats_> but no Ord or Eq
[10:10:06] <dbaupp> ChrisMorgan: there's also the 'delete' key, which does an effective job of removing broken code
[10:10:15] <dbaupp> so I've been told, anyway
[10:10:23] *** Joins: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP)
[10:10:27] <dbaupp> wycats_: oh, so you mean Ord and Eq don't work?
[10:10:33] <ChrisMorgan> dbaupp: I was demonstrating the code that worked and the code that didn't in that gist
[10:10:39] <wycats_> they're already implemented
[10:10:48] *** Joins: qlkzy (qlkzy@moz-A97B5CE9.members.linode.com)
[10:10:49] <dbaupp> oh, magic.
[10:10:59] <dbaupp> (to both ChrisMorgan and wycats_)
[10:11:00] *** Joins: c-a (c-a@moz-57C82A9.a163.priv.bahnhof.se)
[10:11:03] * dbaupp is SIMD
[10:11:23] * ChrisMorgan congratulates dbaupp on achieving the elusive goal of multitasking
[10:11:34] <ChrisMorgan> Probably illusive also.
[10:11:35] *** Joins: shilgapira (chatzilla@84CF3C3A.47BE6D97.F9582E85.IP)
[10:11:48] <dbaupp> wycats_: oh, so if the Ord and Eq on is broken, could you remove that commit?
[10:12:03] <dbaupp> (sorry for telling you lies.)
[10:12:05] <dbaupp> *one
[10:13:41] *** Joins: nkoep (nik@moz-6B6D2FFF.pool.mediaways.net)
[10:14:03] *** Quits: StarLight (StarLight@moz-7174B56.dynamic.avangarddsl.ru) (Ping timeout)
[10:15:24] <lukem> are there any rust wrappers (or the beginnings of one) for Appkit (Osx)? to play around with some UI ?
[10:16:15] *** Joins: victorporof (victorporo@48342A5A.33FD6404.79933D60.IP)
[10:16:15] *** Joins: Ferreus_ (ferreus@moz-DE3C0D57.dip0.t-ipconnect.de)
[10:16:29] *** Quits: Ferreus_ (ferreus@moz-DE3C0D57.dip0.t-ipconnect.de) (Quit: WeeChat 0.4.3-dev)
[10:17:52] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[10:17:57] *** Joins: StarLight (StarLight@moz-6F88DE29.dynamic.avangarddsl.ru)
[10:18:11] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[10:18:46] *** Joins: bachm (Mibbit@moz-4A19983C.ip227.fastwebnet.it)
[10:19:49] <wycats_> dbaupp: it was already pulled
[10:20:53] <dbaupp> wycats_: it failed tests, so editing the PR is fine
[10:21:49] <wycats_> done
[10:22:19] <wycats_> dbaupp: how is Peekable meant to be used?
[10:22:46] <dbaupp> for Iterators?
[10:23:21] <wycats_> yeah
[10:23:36] <wycats_> I'm kind of hoping for a method that iterates and gives me the next one too
[10:23:52] <wycats_> for (elem, next) in vec.iter().something()
[10:23:59] <wycats_> where next would be Option<T>
[10:24:17] <dbaupp> hm
[10:24:29] <wycats_> I could use zip
[10:24:46] <dbaupp> well, .peekable() wraps your iterator into a Peekable, which you can then call .peek() on
[10:24:47] <wycats_> zip with take(1)
[10:24:54] <wycats_> dbaupp: yeah it doesn't work
[10:25:03] <wycats_> because I don't have access to the current iterator inside a for loop
[10:25:12] <dbaupp> ah
[10:25:24] <dbaupp> you'll need to write the for loop desugaring manually
[10:25:32] <wycats_> actually
[10:25:33] <dbaupp> loop { match iter.next() { None =
[10:25:35] <wycats_> I could probably do:
[10:25:42] <wycats_> for iter = thing.peekable()
[10:25:42] <dbaupp> > break, Some(x) => { ... } } }
[10:25:50] <wycats_> for foo in iter { iter.peek() }
[10:26:00] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Ping timeout)
[10:26:06] <wycats_> peekaboo() ?
[10:26:07] <wycats_> :P
[10:26:12] <diverse> iseeyou()
[10:26:21] <dbaupp> I don't think what you wrote there will work, without the desugaring
[10:26:35] <dbaupp> (the fact that it doesn't work is a bug)
[10:27:09] <wycats_> dbaupp: borrow checker limitations?
[10:27:22] <wycats_> I should sleep now that the PR is in
[10:27:40] <diverse> wycats_: if you can sleep, I envy you
[10:27:46] <wycats_> lol
[10:28:01] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[10:28:03] <wycats_> I can try anyway ;)
[10:28:24] <dbaupp> wycats_: yeah, for loops borrow the iterator, so it can't be used later
[10:28:31] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[10:28:38] <wycats_> dbaupp: yeah I hit a similar issue before
[10:28:42] <wycats_> with a read write buffer
[10:28:57] <dbaupp> https://github.com/mozilla/rust/issues/8372
[10:28:57] <wycats_> for line in buffer.lines() { write() }
[10:29:14] <dbaupp> (you can run rust with --pretty expanded to see what for loops become)
[10:29:17] <dbaupp> *rustc
[10:30:17] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[10:30:18] <dbaupp> wycats_: r+ btw (sorry, forgot to do it before)
[10:30:42] <wycats_> r+?
[10:30:50] *** Quits: bachm (Mibbit@moz-4A19983C.ip227.fastwebnet.it) (Quit: http://www.mibbit.com ajax IRC Client)
[10:31:22] <dbaupp> "review positive" or "approved", which triggers bors (the integration bot) to run the test suite on the various platforms
[10:31:28] <dbaupp> (and merge if they pass)
[10:31:35] <wycats_> :D
[10:31:47] <dbaupp> (when the r+ is a comment on the HEAD commit of the PR, that is.)
[10:31:51] <diverse> oh yeah, I remember that now
[10:31:57] <wycats_> the array copying was in fork_trace btw
[10:32:02] <dbaupp> ah, I see
[10:32:14] <dbaupp> (well, that commit didn't remove that copying?)
[10:32:42] <diverse> you can also review positive and give the credit to someone else by `r=someone`
[10:33:12] <wycats_> dbaupp: it didn't remove it but it eliminated it in the common case of only one child state
[10:33:20] <dbaupp> wycats_: ah
[10:33:24] * dbaupp reads it more closely
[10:33:38] <wycats_> I still need to fork the trace if I have multiple possible states
[10:33:55] <wycats_> I'm changing the entire thing to do the capture tracking up front
[10:34:05] <wycats_> and thus not need to trace all states
[10:34:15] <wycats_> but I'll still need this optimization
[10:34:20] <wycats_> to avoid unnecessary cloning
[10:34:27] <dbaupp> I assume count == 1 is the common case?
[10:34:31] <wycats_> yeah
[10:34:38] <wycats_> it's basically a mini-regex engine
[10:34:48] <wycats_> it's rare to be looking at a character and have multiple options
[10:35:05] <diverse> wycats_: btw, how is you tutorial going? I would love to read it, so it can make sleepier.
[10:35:17] <diverse> *make me
[10:35:17] <wycats_> "/posts/(new|[^/]+)"
[10:35:26] <wycats_> dbaupp: let's say that regex
[10:35:30] <wycats_> if you scan /posts/1
[10:35:41] <wycats_> the only place where there are multiple choices is right after the second /
[10:35:45] <dbaupp> ah, yeah, it's always the second
[10:35:54] *** Joins: kcii (o0@moz-D77E1EA9.cable.mindspring.com)
[10:36:14] <wycats_> so the vast majority of times you can just modify the existing "thread state"
[10:36:41] <wycats_> in the rare case of multiple choices, you have to clone the current thread state and then start tracking multiple threads
[10:36:54] <wycats_> (many of which will usually be abandoned quickly)
[10:37:41] <wycats_> like I said I'm switching to explicitly modeling the "thread state"
[10:38:06] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[10:38:23] <wycats_> ok bedtime
[10:38:35] * diverse shakes fist at wycats_
[10:41:03] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[10:41:37] *** Quits: kcii (o0@moz-D77E1EA9.cable.mindspring.com) (Quit: leaving)
[10:42:00] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Connection reset by peer)
[10:42:21] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[10:44:08] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[10:45:06] <diverse> anyone want to decypher this numeric code? `82 117 115 116 32 105 115 32 99 111 111 108 33`
[10:45:19] <diverse> hint: check the ascii table
[10:46:23] <ecl3ctic> Rust is cool!
[10:46:28] <diverse> bingo!
[10:46:44] <ecl3ctic> But I sped things up: http://www.unit-conversion.info/texttools/ascii/
[10:47:05] <ecl3ctic> And Rust *is* cool
[10:47:08] <ecl3ctic> very cool
[10:47:11] *** Quits: shilgapira (chatzilla@84CF3C3A.47BE6D97.F9582E85.IP) (Ping timeout)
[10:47:20] <ecl3ctic> the greatest language of all time
[10:47:27] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[10:48:15] <ecl3ctic> What is <VI0> supposed to mean in compiler error messages?
[10:48:23] *** Quits: gavin (gavin@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[10:49:13] <lucian> not-yet-resolved type parameter
[10:49:23] <lucian> equivalent to the traditional <T>
[10:49:38] <dbaupp> ecl3ctic: an integer that doesn't have a definite type
[10:49:50] <dbaupp> since unsuffixed integer literals are generic
[10:50:01] *** Joins: vgeddes (vincent.ge@moz-E5B12DD4.dsl.mweb.co.za)
[10:50:02] <dbaupp> <VF0> is the same for floats
[10:50:04] <ecl3ctic> oh that makes sense
[10:50:25] <ecl3ctic> now I can stop wondering :)
[10:50:26] <ecl3ctic> thanks
[10:50:57] <dbaupp> it could *definitely* be more useful
[10:51:05] * dbaupp sees if he can make it so
[10:51:10] *** Quits: jackneill (jackneill@moz-985E4FF7.pool.digikabel.hu) (Quit: WeeChat 0.4.1)
[10:51:14] *** Quits: gkostyanikov (gkostyanik@531C4285.3E410295.CA6E2165.IP) (Ping timeout)
[10:51:41] *** Quits: lukem (Mibbit@moz-67A308A0.dyn.iinet.net.au) (Quit: http://www.mibbit.com ajax IRC Client)
[10:52:04] <dbaupp> ah, looks easy
[10:52:31] <ecl3ctic> what, changing the error messages?
[10:52:39] *** Joins: gavin (gavin@moz-DB4A9C19.scl3.mozilla.com)
[10:52:43] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[10:53:41] <dbaupp> ecl3ctic: yeah
[10:53:45] *** Joins: kvanb (kvanb@moz-8A43FA87.lnse5.lon.bigpond.net.au)
[10:53:56] <dbaupp> ecl3ctic: do you happen to have a piece of code that causes that to be printed to hand?
[10:54:14] <ecl3ctic> it's pretty easy to do it
[10:54:19] <dbaupp> ah, 1.blah()
[10:54:37] <ecl3ctic> create any function that takes a &, and give it an int or float literal
[10:55:07] *** Quits: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net) (Quit: syatchmenoff)
[10:55:14] *** Joins: gkostyanikov (gkostyanik@531C4285.3E410295.CA6E2165.IP)
[10:56:59] * diverse tries to run self.sleep(); but it returns an Err
[10:57:00] *** Quits: achim (achim@moz-254418F2.dip0.t-ipconnect.de) (Quit: ["Textual IRC Client: www.textualapp.com"])
[10:57:17] <ecl3ctic> you can also do the opposite, e.g. print_int(&1)
[10:57:30] <ecl3ctic> if the function takes a plain i32 or something..
[10:58:53] <dbaupp> ecl3ctic: thanks for the examples
[10:59:58] *** Joins: jackneill (jackneill@moz-985E4FF7.pool.digikabel.hu)
[11:00:34] <ecl3ctic> dbaupp: no problem
[11:01:12] *** Joins: killerswan (kevin.cant@E9A7755D.F485DE6D.5604FD67.IP)
[11:01:18] <ecl3ctic> on a related note, it's kind of verbose and redundant for the compiler to spit out messages when it invokes fail!() everywhere after a program fails to compile
[11:01:36] <ecl3ctic> this:
[11:01:36] <ecl3ctic> task 'rustc' failed at 'explicit failure', /home/nick/workspace/rust/src/libsyntax/diagnostic.rs:75 task '<main>' failed at 'explicit failure', /home/nick/workspace/rust/src/librustc/lib.rs:453
[11:02:10] *** Joins: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP)
[11:04:09] <ecl3ctic> there should be a fail_quietly!()
[11:04:26] <diverse> hehe
[11:04:30] *** zz_kimundi is now known as kimundi
[11:04:51] <dbaupp> there's a bug about making that quiet...
[11:04:54] <dbaupp> can't find it
[11:05:37] *** Quits: mouse (mouse@moz-373942D2.dhcp.yndx.net) (Ping timeout)
[11:05:44] <diverse> ecl3ctic: the exclamation point just after it makes it sound like a demand
[11:06:07] <ecl3ctic> it adds enthusiasm to the code
[11:07:37] <diverse> indeed, the programmer goes "fail!() just shut up already, geez, why so verbose and whiny all the time?"
[11:09:43] <ecl3ctic> also: test.rs:5:11: 5:13
[11:09:46] <ecl3ctic> enough colons?
[11:10:00] <ecl3ctic> we need some parentheses there or something
[11:10:53] <ecl3ctic> test.rs (5:11 to 5:13)
[11:11:05] <dbaupp> it needs to work with M-x compile
[11:11:10] * dbaupp <3 M-x compile
[11:13:08] <ecl3ctic> what is m-x compile?
[11:13:16] * diverse is also curious
[11:15:11] <dbaupp> ah, an emacs function that will run a command and then allow jumping to the position of errors based on a `filename:line:column` format
[11:15:22] <dbaupp> (it might understand more formats, I'm not sure)
[11:15:51] <diverse> hmm, I wonder if vim has something like that?
[11:16:06] <dbaupp> probably
[11:16:09] <dbaupp> ecl3ctic: https://github.com/mozilla/rust/pull/11513 fwiw
[11:17:28] <diverse> maybe that `syntastic` plugin probably does that
[11:17:50] *** Joins: bheylin (brianheyli@moz-300B2629.vanguardgames.net)
[11:18:49] <ecl3ctic> dbaupp: nice
[11:19:40] <ecl3ctic> if you were trying to write <VI0> etc in your issue, I think markdown fucked that up
[11:19:48] *** Quits: buster (buster@3A0EAB5F.9C69795C.ACFE537F.IP) (Ping timeout)
[11:19:57] <diverse> dbaupp: ah that helps take away the confusion.
[11:20:12] *** Joins: lukem (Mibbit@moz-67A308A0.dyn.iinet.net.au)
[11:20:17] <dbaupp> ecl3ctic: ah, yeah
[11:20:46] <dbaupp> ecl3ctic: fixed, thanks
[11:23:34] <diverse> a small but extremely huge improvement
[11:24:25] *** Joins: mouse (mouse@moz-45757DCA.dhcp.yndx.net)
[11:24:48] <dbaupp> diverse: I'm not sure you know what "small" and "extremely huge" mean :P
[11:25:03] *** Quits: blank_name (blank_name@BC51D793.16360A46.537E532E.IP) (Ping timeout)
[11:25:44] <benh> (i think :make in vanilla vim calls make and then navigates to compilation errors, not sure)
[11:27:57] *** Joins: blank_name (blank_name@BC51D793.16360A46.537E532E.IP)
[11:27:59] <diverse> dbaupp: What I mean specifically is that while the change is small, from that, the improvement gain is huge
[11:28:23] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Quit: 랜덤은 쇠퇴했습니다.)
[11:28:42] <diverse> benh: that requires a makefile, I assume?
[11:28:52] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[11:29:18] *** Quits: skade (skade@541D1605.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[11:29:23] <dbaupp> diverse: :)
[11:30:34] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[11:31:53] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[11:31:59] *** Quits: benjamin__ (benjamin@moz-CAB4ED9.dip0.t-ipconnect.de) (Ping timeout)
[11:32:26] *** Quits: lukem (Mibbit@moz-67A308A0.dyn.iinet.net.au) (Quit: http://www.mibbit.com ajax IRC Client)
[11:33:25] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[11:33:46] *** Quits: blank_name (blank_name@BC51D793.16360A46.537E532E.IP) (Ping timeout)
[11:33:55] <mouse> hi! I have a question about MemWriter. How to proper call "inner_ref()"? Previously, https://github.com/chris-morgan/rust-http/blob/master/src/http/headers/test_utils.rs#L16 there was a "get_ref()". I've tried to call: *writer.inner_ref() as in mem.rs in tests. I suppose, it is a private method. How to workaround it?
[11:34:19] *** Joins: ofeldt (ofeldt@moz-99D5C8E8.dip0.t-ipconnect.de)
[11:35:04] *** Quits: kvanb (kvanb@moz-8A43FA87.lnse5.lon.bigpond.net.au) (Ping timeout)
[11:35:06] *** Quits: ofeldt- (ofeldt@moz-85F39ADD.dip0.t-ipconnect.de) (Ping timeout)
[11:35:18] <diverse> dbaupp: plus I'm tired, I'm probably vague too much at times.
[11:35:51] <dbaupp> mouse: I think just .inner() will work
[11:36:09] <dbaupp> (and it will save a copy, because the .to_owned() call will then be unnecessary)
[11:36:12] *** Quits: gkostyanikov (gkostyanik@531C4285.3E410295.CA6E2165.IP) (Ping timeout)
[11:36:41] <mouse> error: type `std::io::mem::MemWriter` does not implement any method in scope named `inner`
[11:36:51] <dbaupp> mouse: hm
[11:36:52] <mouse> str::from_utf8_owned(*writer.inner())
[11:36:57] <dbaupp> must've changed
[11:37:06] * dbaupp consults the documentation
[11:37:08] <dbaupp> http://static.rust-lang.org/doc/master/std/io/mem/struct.MemWriter.html
[11:37:13] <dbaupp> ah, it's .unwrap()
[11:37:19] <diverse> good ol' docs
[11:37:25] <dbaupp> str::from_utf8_owned(writer.unwrap())
[11:37:40] <mouse> cool! )
[11:38:24] *** Joins: kvanb (kvanb@moz-2C33D4E6.lnse3.lon.bigpond.net.au)
[11:38:24] <diverse> remember, you can unwrap it or match it, pick your poison ;)
[11:38:56] *** Joins: LQDH (uid17894@moz-31ABA2C0.irccloud.com)
[11:39:53] <mouse> dbaupp, no such method in 0.9
[11:40:02] <marc_> how do you println! to stderr
[11:40:06] *** Joins: gkostyanikov (gkostyanik@531C4285.3E410295.CA6E2165.IP)
[11:41:34] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[11:41:36] <diverse> dbaupp: was that recently added in master?
[11:43:16] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[11:43:18] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[11:43:26] <dbaupp> mouse: weird
[11:43:30] <dbaupp> diverse: probably
[11:43:46] <mouse> get_ref / unwrap are exists in master, but not in 0.9
[11:43:51] <dbaupp> mouse: the 0.9 docs: http://static.rust-lang.org/doc/0.9/std/io/mem/struct.MemWriter.html
[11:44:00] <diverse> yeah 0.9 doesn't have it
[11:44:11] <dbaupp> mouse: ah, you'll need to import `std::io::Decorator` to use .inner()
[11:44:20] <dbaupp> (it's all the way at the bottom.)
[11:44:43] <diverse> ah ha
[11:44:45] <dbaupp> mouse: http://static.rust-lang.org/doc/0.9/std/io/mem/fn.with_mem_writer.html might be nicer, btw
[11:45:18] <dbaupp> std::from_utf8_owned(mem::with_mem_writer(|w| v.to_stream(w)))
[11:45:26] <mouse> dbaupp, use Decorator helps, thank you
[11:45:46] <diverse> yet another happy customer
[11:47:20] <dbaupp> wycats_: you're officially a Rust contributor! \o/
[11:47:50] <diverse> wycats_: congrats
[11:48:01] *** Joins: blank_name (blank_name@BC51D793.16360A46.537E532E.IP)
[11:49:42] *** Quits: blank_name (blank_name@BC51D793.16360A46.537E532E.IP) (Ping timeout)
[11:50:41] <LQDH> is there a nice way to get a refrence to the thing your matching from inside the match? 
[11:51:12] <diverse> I think you use 'ref' for that
[11:51:28] <ecl3ctic> (ref x, ref y) =>
[11:51:46] <LQDH> like match ref i { Some(_) => i }?
[11:51:50] *** Quits: KindOne (KindOne@moz-AD9EA3F2.dynamic.ip.windstream.net) (Ping timeout)
[11:52:08] <LQDH> oh thanks
[11:52:57] <ecl3ctic> if you're looking to pull something out of an Option, you'd just do:
[11:53:01] *** Joins: blank_name (blank_name@BC51D793.16360A46.537E532E.IP)
[11:53:12] <LQDH> im looking to return a refrence to the acutal option
[11:53:17] <LQDH> actual*
[11:53:17] <ecl3ctic> match my_var { Some(my_thing) => thing }
[11:53:28] <ecl3ctic> uh, *my_thing
[11:53:56] <diverse> you spelled it correctly already
[11:54:08] <diverse> oh wait
[11:54:20] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[11:54:34] <diverse> ecl3ctic: but he wants to return a reference
[11:54:52] <LQDH> I want a refrence to the thing im matching, not something inside it
[11:55:17] <ecl3ctic> oh, well, put it in a variable before you try and match it?
[11:55:29] <dbaupp> match my_var { a @ Some(_) => return a, ... }
[11:56:11] *** Joins: KindOne (KindOne@moz-91FF02E1.dynamic.ip.windstream.net)
[11:56:11] <dbaupp> LQDH: ^
[11:56:26] <LQDH> that works? thats cool
[11:56:31] <LQDH> ill use that
[11:56:40] *** Joins: bluz (blaz@moz-611721D9.orange.fastwebserver.de)
[11:57:00] *** Quits: blank_name (blank_name@BC51D793.16360A46.537E532E.IP) (Ping timeout)
[11:57:17] *** Quits: bheylin (brianheyli@moz-300B2629.vanguardgames.net) (Quit: bheylin)
[11:57:29] <ecl3ctic> dbaupp: wait, what's happening there?
[11:58:09] <dbaupp> ecl3ctic: dark rituals
[11:58:31] <dbaupp> (it actually just binds a to the whole thing that the Some(_) pattern matches)
[11:59:40] <dbaupp> it's useful for something like `match x { Some(whole_vector @ [ head, .. tail ]) => ... }` if you sometimes need the whole vector and sometimes just the head/tail, in the body of that match arm
[11:59:41] <ecl3ctic> I... don't see that documented
[11:59:46] <dbaupp> don't think it is
[11:59:51] <dbaupp> :P
[12:00:10] <ecl3ctic> was it added after managed pointers started to get kicked out?
[12:00:19] <ecl3ctic> otherwise that's a bad choice of symbol
[12:00:19] <diverse> Sigh, it's no fair that dbaupp gets to know all the good stuff
[12:00:47] <LQDH> someone should document that, it seems real useful
[12:00:56] *** Quits: aravindavk (aravinda@164F9FE7.C4563864.274D17D6.IP) (Quit: Leaving)
[12:01:01] <ecl3ctic> definitely
[12:01:34] <dbaupp> nah, it was stolen from haskell (which uses @)
[12:01:52] <dbaupp> it was considered to be changed from @, but then managed pointers were removed so that's unnecessary
[12:02:01] <ecl3ctic> well good thing @ now has no other meaning :)
[12:02:17] <mouse> how to tell Rust how much HW cores to use (instead of green threads)?
[12:02:22] <ecl3ctic> someone should document that - I've got to remember that now, it will be useful
[12:02:31] <dbaupp> https://github.com/mozilla/rust/issues/7173 and https://github.com/mozilla/rust/pull/10917
[12:02:34] <diverse> yay for consistency with other languages! \o/
[12:03:15] <dbaupp> mouse: RUST_THREADS=n controls how many OS threads (not green threads) the green threads are multiplexed on
[12:04:14] *** Quits: Ferreus (ferreus@moz-DE3C0D57.dip0.t-ipconnect.de) (Ping timeout)
[12:04:50] <ecl3ctic> dbaupp: so @ was *almost* documented it seems
[12:04:55] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[12:05:00] *** Joins: vmx (vmx@moz-BA8A49E.pools.arcor-ip.net)
[12:05:06] <ecl3ctic> oh well
[12:05:28] <diverse> well, time to kick ass and bring it back up again
[12:06:48] *** Joins: blank_name (blank_name@29F64526.16360A46.537E532E.IP)
[12:08:05] <ChrisMorgan> diverse: yes, Vim has an equivalent to `M-x compile`. First ":compiler rustc" (do that in e.g. ~/.vim/ftplugin/rust.vim if you want to do it thus generally) and then you can just use ":make"
[12:08:37] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[12:09:17] <diverse> ChrisMorgan: thanks man
[12:10:08] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[12:10:51] * ChrisMorgan should go back to that and improve it so that it can cope with finding lib.rs or main.rs and compile that instead of %
[12:11:02] <dbaupp> ChrisMorgan: speaking of vim, https://github.com/mozilla/rust/pull/11492
[12:11:09] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[12:11:31] <ChrisMorgan> Oh, good!
[12:11:45] *** Quits: z0w0 (zack@moz-87AABEA0.lnse1.woo.bigpond.net.au) (Ping timeout)
[12:12:19] * ChrisMorgan seriously wanted that but never actually got round to making it work
[12:12:26] *** Quits: Phoop (sid20507@moz-31ABA2C0.irccloud.com) (Quit: )
[12:13:11] <ChrisMorgan> That patch needs work, though. I'll comment as appropriate on it.
[12:13:34] <diverse> ChrisMorgan: btw, is there a reason not to add `compiler rustc` in rusts default ftplugin?
[12:14:29] *** Quits: okard (okard@moz-EF62E409.dyn.hrz.tu-darmstadt.de) (Ping timeout)
[12:14:56] <ChrisMorgan> diverse: yes; many projects at present are working with Makefiles, so I decided that for the moment it was probably better not set. Also without it compiling the lib.rs or main.rs instead it's often useless.
[12:15:19] *** Joins: jadbaires (jadrian@moz-EE1C894.dsl.telepac.pt)
[12:15:31] <diverse> Ah gotcha. I had hunch there was a reason.
[12:16:52] *** Joins: mib_043pub (Mibbit@F4BDF881.F3A76357.73513262.IP)
[12:17:52] <ecl3ctic> I'm going to hit the hay... 43 degrees C day to look forward to tomorrow
[12:17:56] <ecl3ctic> I hope I don't die
[12:18:11] <diverse> turn the AC on
[12:18:16] *** Joins: Ferreus (ferreus@moz-7F9E813A.dip0.t-ipconnect.de)
[12:18:19] <ecl3ctic> GENIUS
[12:18:24] * ChrisMorgan doesn't intend to die, 43°C or no 43°C
[12:18:32] <ecl3ctic> why didn't I think of that
[12:19:03] <ecl3ctic> I don't intend to die either, I have Rust to live for
[12:19:12] <ecl3ctic> night
[12:19:15] * ChrisMorgan is feeling more pity for his sister who works at a plant nursery and who might need to work out in the sun tomorrow
[12:19:23] <ecl3ctic> oh geez
[12:19:24] <diverse> ecl3ctic: was that sarcasm :P
[12:19:41] <ecl3ctic> diverse: so was what I said :P
[12:19:49] <ecl3ctic> wait
[12:19:54] <ecl3ctic> I fail at reading
[12:19:58] <ecl3ctic> this is why I need to sleep
[12:20:02] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[12:20:05] <ecl3ctic> yes, yes it was
[12:20:20] <diverse> awesome, now get some sleep and hope to live another day
[12:20:30] <ecl3ctic> will do
[12:20:33] *** Quits: ecl3ctic (Mibbit@moz-E1FAD64C.wzfv1.vic.bigpond.net.au) (Quit: http://www.mibbit.com ajax IRC Client)
[12:23:31] <diverse> ChrisMorgan: I guess it's summer over there isn't it?
[12:23:46] <dbaupp> diverse: definitely
[12:23:47] *** Quits: rca (rcatolino@moz-5C941ACC.adsl.proxad.net) (Ping timeout)
[12:23:58] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[12:24:02] <ChrisMorgan> diverse: sure is. Tomorrow will probably be the hottest day of the year. http://www.bom.gov.au/vic/forecasts/melbourne.shtml
[12:24:16] <diverse> argh
[12:24:23] <ChrisMorgan> Yep, it's a hot week.
[12:24:58] *** Quits: mib_043pub (Mibbit@F4BDF881.F3A76357.73513262.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:25:03] <dbaupp> ChrisMorgan: we've only got a maximum of 31 this week :P
[12:25:24] <Boreeas> I am having trouble with borrowing. This: http://pastebin.com/sDXAnq4d results in these errors: http://pastebin.com/9FdSNg2g - The borrow in the first block shouldn't affect the rest of the code, am I missing something?
[12:26:45] <diverse> ChrisMorgan, dbaupp: I'm going to try get some sleep now (long over due). Don't let the heat beat you.
[12:27:36] <sigma> I don't understand how people live in countries where it gets warmer than 30 degrees or colder than -5
[12:28:06] <diverse> sigma: because of the Earth's rotation and who is nearest the Sun.
[12:28:17] <sigma> I can't function at over about 22
[12:28:26] <Yoric> Well, -5 helps with overclocking your CPU, which in turn makes building rust faster.
[12:28:35] <sigma> I know how it works :P I just don't understand how people do it ^^
[12:28:44] <diverse> Yoric: haha, there you go, you got yourself a heater
[12:28:51] <diverse> alright, I'm off!
[12:29:00] <bjz> ChrisMorgan: 43!!!
[12:29:11] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[12:29:12] <bjz> ChrisMorgan: yeek.
[12:29:29] *** Quits: sigma (sigma@moz-9EAC972C.range86-184.btcentralplus.com) (Client exited)
[12:29:33] <bjz> ChrisMorgan: how high was it today?
[12:29:45] <ChrisMorgan> High 30s, I think.
[12:30:01] <bjz> felt reasonably hot - not deadly though
[12:30:07] <bjz> :P
[12:30:36] * bjz is just glad not to have the humidity of brisbane
[12:30:38] <dbaupp> bjz: are you back in melbourne?
[12:30:38] * ChrisMorgan goes cycling in shorts and a T-shirt in mid-winter, 5°C
[12:30:40] * ChrisMorgan goes cycling in shorts and a T-shirt in mid-summer, 40°C
[12:30:53] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[12:31:01] <bjz> dbaupp: yeah, had christmas in melbourne with the fam
[12:31:10] *** Joins: Earnestly (earnest@moz-E86D50FA.dyn.plus.net)
[12:31:16] <bjz> ChrisMorgan: not lycra?
[12:31:20] <ChrisMorgan> Oh, and I cycle as fast as I can whichever extreme it is. But that's a little lower in the middle of summer.
[12:31:36] <bjz> :P
[12:31:43] <dbaupp> bjz: oh? I thought you were from brissie originally?
[12:31:59] <bjz> dbaupp: I was, for most of my life
[12:32:06] <bjz> but I was born in melbourne
[12:32:10] <ChrisMorgan> Ah, the people that don't know the joys of cycling in 5°C at speeds in excess of 60 km/h.
[12:32:17] * bjz tells his life story
[12:32:36] <bjz> ChrisMorgan: wow, nice
[12:32:50] <bjz> ChrisMorgan: I used to ride pretty fast - in brisbane though
[12:33:03] <bjz> never 5 degrees though
[12:33:22] <bjz> ./#rust-offtopic
[12:33:22] <ChrisMorgan> bjz: I can actually join the ranks of the spandex-clad now when I feel like it as with my new bike I got late last year (well, second hand; eBay is good to me) had such a suit with it.
[12:33:24] <dbaupp> bjz: brisbane doesn't know how to go below 15 :P
[12:33:35] * ChrisMorgan is glad not to live in Brisbane
[12:33:38] <bjz> dbaupp: oh we have single digits
[12:33:53] <dbaupp> bjz: I don't believe you ;P
[12:33:58] <bjz> only in the nights or mornings though
[12:34:01] <ChrisMorgan> s/had such/I received such/
[12:34:09] *** Joins: sigma (sigma@moz-9EAC972C.range86-184.btcentralplus.com)
[12:34:11] <ChrisMorgan> s/ with it\.$/./
[12:34:23] <bjz> ChrisMorgan: mfug this thursday!
[12:34:28] <ChrisMorgan> s/ChrisMorgan/bed/
[12:34:31] *** Joins: autra (augustin@A14DAE84.7F753DD1.EE2CA32B.IP)
[12:34:35] * ChrisMorgan should see if he can come along
[12:34:35] <bjz> oh
[12:34:36] <bjz> o/
[12:34:45] <bjz> I'll be doing some Oz I think
[12:34:49] <bjz> it's a hack night
[12:34:58] <bjz> nothing too serious
[12:35:25] <bjz> just a chance to show stuff, chat etc
[12:35:47] * bjz needs to get further through the Oz book
[12:37:32] *** kimundi is now known as zz_kimundi
[12:38:19] *** Quits: gkostyanikov (gkostyanik@531C4285.3E410295.CA6E2165.IP) (Ping timeout)
[12:38:53] *** Joins: gkostyanikov (gkostyanik@531C4285.3E410295.CA6E2165.IP)
[12:39:33] *** Quits: sigma (sigma@moz-9EAC972C.range86-184.btcentralplus.com) (Client exited)
[12:40:43] *** Joins: skade (skade@541D1605.505237C9.CAE22B62.IP)
[12:41:55] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[12:42:21] *** Joins: sigma (sigma@moz-9EAC972C.range86-184.btcentralplus.com)
[12:43:46] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[12:47:12] *** Joins: rca (rcatolino@moz-5C941ACC.adsl.proxad.net)
[12:48:10] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Connection reset by peer)
[12:48:55] *** Joins: james (jdeng@moz-6548813B.blktn6.nsw.optusnet.com.au)
[12:50:01] *** Joins: buster (buster@3A0EAB5F.9C69795C.ACFE537F.IP)
[12:50:33] <james> hey, I found out that there is not Ord impl for a type T: TotalOrd.
[12:51:04] <james> But isn't obvious that a TotalOrd type also satisfies Ord?
[12:55:36] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:56:03] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[12:56:44] <ChrisMorgan> james: one thing that springs to my mind is that you may be able to calculate Ord more efficiently than TotalOrd
[12:57:41] <james> I mean impl<T: TotalOrd> Ord for T {}
[12:57:44] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Ping timeout)
[12:58:29] <james> maybe less operation.
[12:58:58] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[12:59:46] <bjz> james: unfortunately impl on T smothers all other impls on types
[13:00:28] <bjz> so you would get resolve errors I think if you tried to access the methods on the trait
[13:00:44] <james> impl<T: TotalOrd> Ord for T { fn lt(&self, other: &Self)  { self.cmp(other) == Less } }
[13:00:47] *** Joins: benjamin__ (benjamin@moz-CAB4ED9.dip0.t-ipconnect.de)
[13:01:27] <bjz> Ah, I see what you mean
[13:01:38] <james> bjz: Sorry, I cannot get your point.
[13:01:49] <bjz> I mean
[13:01:51] <dbaupp> If you do that, no other types can implement Ord by hand
[13:02:09] <bjz> impl<T: TotalOrd> Ord for T {} impl Ord for int {}
[13:02:23] <james> Oh, so bad.
[13:02:30] <james> Why this occurs?
[13:02:34] <bjz> 1i < 2 // couldn't know which impl to use
[13:03:08] <james> bjz: I see.
[13:03:41] *** Joins: lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net)
[13:03:49] *** Quits: igork (igork@moz-578E0B8C.broadband.corbina.ru) (Quit: Leaving)
[13:04:37] <james> No way to hide or prefer an imll?
[13:04:47] <james> impl
[13:05:45] *** Joins: Florob (Florob@moz-39532932.de)
[13:06:42] <dbaupp> no
[13:06:48] <dbaupp> (not yet)
[13:08:20] *** Quits: jadbaires (jadrian@moz-EE1C894.dsl.telepac.pt) (Quit: Konversation terminated!)
[13:08:27] *** Joins: jadbaires (jadrian@moz-EE1C894.dsl.telepac.pt)
[13:09:47] *** Quits: moostik (Icedove@moz-53E05E9C.w92-151.abo.wanadoo.fr) (Quit: moostik)
[13:10:54] <james> In C++ template instantiation, a specific case can be provided to override the general case.
[13:11:31] <james> Will Rust support this? 
[13:12:48] *** Quits: mouse (mouse@moz-45757DCA.dhcp.yndx.net) (Ping timeout)
[13:12:53] <mindcat> if I have many arm server, can rust do parallel computing?
[13:13:07] <mindcat> or write code by self?
[13:13:12] <bjz> james: I think there might be some plans, but I'm not sure
[13:13:41] <eddyb> james: you mean specialization? you can use traits to get *somewhere* but it's not as all-powerful
[13:14:00] <ChrisMorgan> mindcat: parallelism is entirely up to you. Rust gives you the tools to make parallel code but does not do it for you.
[13:14:09] * bjz hopes for some kind of specialisation
[13:14:21] <mindcat> ChrisMorgan: ok..
[13:14:35] * ChrisMorgan → bed
[13:14:53] <james> As in this instance: impl<T: TotalOrd> Ord for T {} impl Ord for int {}
[13:15:13] <james> The second impl should be preferred.
[13:15:39] <james> As it is a specialisation.
[13:15:51] <dbaupp> james: https://github.com/mozilla/rust/issues/7059?source=c and https://github.com/mozilla/rust/issues/7059?source=c#issuecomment-22050795
[13:16:28] <eddyb> source=c?
[13:16:34] *** Joins: Ms2ger (Ms2ger@AA55AE55.592AEF45.F15B0BB3.IP)
[13:17:15] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[13:17:18] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[13:17:32] <ChrisMorgan> eddyb: no, ?source=c :P
[13:17:39] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[13:17:41] * ChrisMorgan really → bed
[13:17:45] <eddyb> does it do anything at all?
[13:17:58] <dbaupp> eddyb: artifact from coming from the search box, I think
[13:19:42] *** zz_kimundi is now known as kimundi
[13:22:47] <mindcat> rust must can be replace C++/C well
[13:24:30] <mindcat> it seem not possible
[13:25:50] <mindcat> I mean here http://www.tiobe.com/index.php/content/paperinfo/tpci/index.html
[13:25:53] *** Quits: kvanb (kvanb@moz-2C33D4E6.lnse3.lon.bigpond.net.au) (Quit: kvanb)
[13:26:55] <lucian> mindcat: it doesn't have to be absurdly popular to be successful. as long as there is the option to not use C++, it'll be great
[13:27:36] *** Joins: mouse (mouse@moz-373942D2.dhcp.yndx.net)
[13:27:50] <lucian> mindcat: also, Rust has support for in-process parallelism, but multi-machine you'd probably need to use some separate transport/rpc mechanism
[13:29:36] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[13:31:19] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[13:32:53] *** Quits: rca (rcatolino@moz-5C941ACC.adsl.proxad.net) (Ping timeout)
[13:33:01] <eddyb> lucian: though you can use (almost) the same message-passing technique for both :)
[13:33:18] <lucian> sure, you can have almost the same API too
[13:33:38] <lucian> but you'd probably have to handle failure explicitly, since it's so much more likely
[13:35:12] *** Joins: rca (rcatolino@moz-5C941ACC.adsl.proxad.net)
[13:36:15] *** Quits: bluz (blaz@moz-611721D9.orange.fastwebserver.de) (Z:lined (dronebot))
[13:36:32] *** Joins: bluz (blaz@moz-FF0B8E6D.ipredator.se)
[13:39:08] *** Quits: jadbaires (jadrian@moz-EE1C894.dsl.telepac.pt) (Quit: Konversation terminated!)
[13:39:14] *** Joins: jadbaires (jadrian@moz-EE1C894.dsl.telepac.pt)
[13:40:07] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[13:41:04] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[13:42:26] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[13:43:38] *** Quits: james (jdeng@moz-6548813B.blktn6.nsw.optusnet.com.au) (Quit: james)
[13:44:19] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[13:46:06] *** Joins: TisButMe (Mibbit@moz-5233EFA9.w92-144.abo.wanadoo.fr)
[13:48:32] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[13:48:32] *** ChanServ sets mode: +o jdm
[13:49:11] <Tobba> gotta love when you realize your design is slightly wrong
[13:49:19] <Tobba> I think you were right eddyb
[13:49:54] <Tobba> I could fix my implementation but its better to just use a buddy system at this point
[13:51:42] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[13:51:49] *** Quits: skade (skade@541D1605.505237C9.CAE22B62.IP) (Ping timeout)
[13:52:27] <bstrie> cmr: The State of Rust has 100 points on proggit and no comments yet. it's a miracle
[13:53:34] * Ms2ger comments
[13:53:40] <bstrie> :(
[13:53:46] <Ms2ger> "Rust won't work on quantum computers!"
[13:53:54] <Ms2ger> "C++ for evah!"
[13:53:59] <bstrie> Qrust
[13:54:01] *** Quits: dapz (textual@moz-F958911.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[13:54:11] <eddyb> bstrie: do you read that like "Crust"?
[13:54:12] <dbaupp> bstrie: maybe they're all just in awe of the language
[13:54:15] <Tobba> I love the http benchmark
[13:54:17] <bstrie> eddyb: indeed
[13:54:28] <eddyb> Qrustaceans?
[13:54:28] <Tobba> with node.js getting curbstomped
[13:54:33] <bstrie> eddyb: we should trademark it before pizza hut does
[13:54:40] <kimundi> "Introducing the Q pointer"
[13:54:42] <Tobba> Qrust sounds like Qt in Rust
[13:54:55] <kimundi> "let x: Q uint = qox 5;"
[13:54:58] <bstrie> Reflections on Qrusting Qrust
[13:55:05] *** Joins: skade (skade@541D1605.505237C9.CAE22B62.IP)
[13:55:17] <eddyb> kimundi: yesterday I was saying #[lang="qubit"]
[13:55:27] <kimundi> heh, good one
[13:55:43] <bstrie> let x: quint = qubox 5;
[13:55:53] <eddyb> Rust truly is syntactically future-proof
[13:55:53] <bstrie> no, we can do better than that
[13:55:55] <Tobba> Q pointer
[13:55:59] <eddyb> (but so is LISP)
[13:56:00] <Tobba> points to your data 50% of the time
[13:56:03] <bstrie> qulet qux: quint qu= qubox qu5 qu;
[13:56:04] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[13:56:21] <eddyb> bstrie: that last qu :))
[13:56:40] <bstrie> the first programming language that can be dictated by a pigeon
[13:56:52] <bstrie> groundbreaking
[13:57:04] <eddyb> how am I ever going to get anything done with you guys :D?
[13:57:15] <Ms2ger> Face it, you aren't
[13:57:20] *** Joins: dylukes (dylukes@BCD873B4.AF8B4D87.E8393EEB.IP)
[13:57:24] <eddyb> error: variable does not need to be mutable, #[deny(unused_mut)] on by default
[13:57:32] <dylukes> I still don't get this
[13:57:32] <dylukes> https://gist.github.com/DylanLukes/8400747
[13:57:47] <dylukes> Why can't rust resolve that type (apart from the pointer)
[13:57:53] <eddyb> pub fn unwrap(mut self) -> W { self.inner.unwrap() }
[13:58:02] <eddyb> my change is already finding bugs in the std!
[13:58:12] *** Quits: jadbaires (jadrian@moz-EE1C894.dsl.telepac.pt) (Connection reset by peer)
[13:58:18] *** Quits: pzol (pzol@322A273C.DEB41A6D.AADC76B.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[13:58:18] <bstrie> eddyb: oh, is deny the new default? that sounds nifty
[13:58:19] *** Joins: jadbaires (jadrian@moz-EE1C894.dsl.telepac.pt)
[13:58:34] <bstrie> but wasn't it on warn before?
[13:58:43] <bstrie> sounds like these shouldn't really be all that unheard of...
[13:58:54] <eddyb> bstrie: my change is about self. I allow self to be unused because that's how it has to be
[13:58:59] *** Joins: shilgapira (chatzilla@84CF3C3A.47BE6D97.F9582E85.IP)
[13:59:03] <eddyb> but mut... this is a new development :D
[14:00:03] <bstrie> dylukes: are you expecting that closure to automatically coerce to ~Arrow?
[14:00:30] <dylukes> Arrow is a trait. I was expecting if I return ~{something that implements Arrow} it should work...
[14:00:57] <bstrie> dylukes: might be an oversight on the new coercion rules. have you tried explicitly putting `as ~Arrow` after it?
[14:01:29] *** Joins: igork (igork@moz-578E0B8C.broadband.corbina.ru)
[14:01:34] <eddyb> maybe it's missing Send
[14:01:49] <dylukes> One moment, lemme fiddle with something
[14:02:09] <dylukes> Weird. I can't apply "self" as a callable in a trait impl?
[14:02:18] *** Quits: shilgapira (chatzilla@84CF3C3A.47BE6D97.F9582E85.IP) (Connection reset by peer)
[14:02:43] <bstrie> no idea
[14:02:50] <eddyb> dylukes: as in, fn foo(self?
[14:02:59] <dylukes> nmd got it
[14:03:04] <dylukes> self is &, needed to deref
[14:03:16] *** Quits: jadbaires (jadrian@moz-EE1C894.dsl.telepac.pt) (Quit: Konversation terminated!)
[14:03:23] *** Joins: jadbaires (jadrian@moz-EE1C894.dsl.telepac.pt)
[14:03:50] <cmr> bstrie: it really is a miracle.
[14:03:57] <cmr> bstrie: I've never seen that before
[14:04:24] <dylukes> bstrie error: can only cast an ~-pointer to a ~-object, not a type parameter
[14:04:28] <dylukes> can't explicitly use as
[14:04:39] *** Joins: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP)
[14:04:52] <bstrie> dylukes: well I'm not sure that it even makes sense to coerce a closure to ~Anything, can you use a proc instead?
[14:05:01] <dylukes> https://gist.github.com/DylanLukes/8400747
[14:05:03] <dylukes> here we go
[14:05:37] <dylukes> I tried as ~Arrow... as well
[14:06:00] <bstrie> coercing closures to traits seems like it might be something that nobody's ever tried before :P
[14:06:13] * ChrisMorgan really really → bed :P
[14:06:19] <kimundi> dylukes: "as Arrow..." won't work in either case
[14:06:19] * Ms2ger kicks ChrisMorgan 
[14:06:30] <dylukes> kimundi well yes >_>
[14:06:34] *** Joins: moostik (Icedove@moz-53E05E9C.w92-151.abo.wanadoo.fr)
[14:06:35] <kimundi> dylukes: As that would mean an unboxed trait, which we don't have
[14:07:00] <Boreeas> is there a biginteger type for rust?
[14:07:01] *** Quits: jackneill (jackneill@moz-985E4FF7.pool.digikabel.hu) (Quit: WeeChat 0.4.1)
[14:07:18] *** Joins: jackneill (jackneill@moz-985E4FF7.pool.digikabel.hu)
[14:07:31] <dylukes> Sadly it doesn't work :<
[14:07:36] <cmr> Boreeas: in extra, yes.
[14:07:54] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[14:08:19] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[14:09:59] <dylukes> bstrie :(
[14:10:11] <dylukes> No traits for closures </3
[14:10:20] <dylukes> Well I mean, I have one.
[14:10:27] <bstrie> dylukes: I think you should file a bug, maybe it is not intentional
[14:10:50] <dylukes> Maybe it's failing on the lifetime?
[14:11:18] <dylukes> Even if I add Send, it still gives "expected `~Arrow<A,C>:Send` but found `~|A| -> C`"
[14:11:51] *** Quits: gkostyanikov (gkostyanik@531C4285.3E410295.CA6E2165.IP) (Ping timeout)
[14:11:51] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[14:12:45] <dylukes> Oh. Wait I see an issue.
[14:12:57] <dylukes> Conceptually i'm returning a closure, not a general Arrow, anyhow.
[14:13:09] <dylukes> No matter what the type.
[14:15:03] *** Joins: dk (Mibbit@moz-FF4909F9.dsl.telepac.pt)
[14:15:09] <benh> Maybe the Send is the problem?
[14:15:39] *** Quits: jackneill (jackneill@moz-985E4FF7.pool.digikabel.hu) (Quit: WeeChat 0.4.1)
[14:15:45] *** Joins: gkostyanikov (gkostyanik@531C4285.3E410295.CA6E2165.IP)
[14:15:56] *** Joins: mleise (marco@moz-850E56A9.pools.arcor-ip.net)
[14:15:59] *** Quits: lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net) (Ping timeout)
[14:16:10] *** Joins: jackneill (jackneill@moz-985E4FF7.pool.digikabel.hu)
[14:16:41] * benh feels circular
[14:17:02] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[14:18:04] *** Quits: jackneill (jackneill@moz-985E4FF7.pool.digikabel.hu) (Quit: WeeChat 0.4.1)
[14:18:51] *** Joins: jackneill (jackneill@moz-985E4FF7.pool.digikabel.hu)
[14:19:05] <dylukes> Okay here's an issue
[14:19:13] <kimundi> dylukes: I identified a core problem with your last gist, I think
[14:19:15] <dylukes> trait Arrow<B, C> { ... fn compose<A>(&self, &Arrow<A, B>) -> ~Arrow<A, C>; ... }
[14:19:20] <dylukes> this is *not* the type signature I want.
[14:19:38] <dylukes> I don't want to allow an arbitrary arrow... I want one of the same type as Self :\
[14:19:42] <dylukes> oh what kimundi ?
[14:19:50] <kimundi> sec
[14:20:04] <kimundi> dylukes: okay
[14:20:06] <dylukes> Gah, if we had HKTs, I could write
[14:20:13] <dylukes> trait Arrow<B, C> { ... fn compose<A>(&self, &Self<A, B>) -> ~Self<A, C>; ... }
[14:20:16] <dylukes> Yeah, go on?
[14:20:18] <kimundi> So, in compose, you create a stack closure
[14:20:32] <kimundi> The |a: A| -> C { g.apply(f.apply(a)) }
[14:20:33] <dylukes> okay
[14:21:12] <kimundi> becuase it is a stack closure it can only reference things on the stack - in this case it has references to the two function paramters f and g
[14:21:25] <dylukes> Right I follow :)
[14:22:33] <kimundi> However, if you try to put that closure (directly, or wrapped as a ~Arrow), it would have to somehow "take with it" the values it references - but it can't becuase they only exist inside the function
[14:22:45] <kimundi> try to return*
[14:22:50] <dylukes> Can I remedy that with any lifetime specification?
[14:23:45] <kimundi> I think if you explcitly bind the lifetime out f and g to something inside of the return value ~Arrow, it would work - but afaik thats not properly implemented
[14:24:12] <kimundi> fn compose<'a, A, B, C>(g: &'a Arrow<B, C>, f: &'a Arrow<A, B>) -> ~Arrow<A, C>:'a 
[14:24:24] <dylukes> :'a?
[14:24:30] *** Quits: Blub\1 (wry@620605B3.71150E1A.237AE2BA.IP) (Ping timeout)
[14:24:42] *** Joins: Blub\1 (wry@620605B3.71150E1A.237AE2BA.IP)
[14:25:17] <kimundi> "Give the trait object the lifetime bound 'a"
[14:25:33] <kimundi> But that's not implemented right now, afaik - only 'static is currently valid there
[14:25:37] <cmr> wait does that actually work?
[14:25:37] <dylukes> That's new to me.
[14:25:39] <cmr> ok
[14:25:50] <dylukes> I've only ever seen it in the "after the pointer type" position
[14:25:52] <cmr> kimundi: are you sure that's intended? the stuff after : is for kinds, and 'static is a kind.
[14:25:59] <dylukes> :\
[14:26:03] <dylukes> Wait 'static is a kind.
[14:26:06] <dylukes> what the bloody...
[14:26:06] *** Quits: sigma (sigma@moz-9EAC972C.range86-184.btcentralplus.com) (Client exited)
[14:26:06] <kimundi> The much simpler solution would be to just use a heap closures, that takes ownership of f and g - however we deprecated them in favour of only-callable-once procs
[14:26:11] <cmr> as well as a lifetime, yes.
[14:26:14] *** Joins: sigma (sigma@moz-9EAC972C.range86-184.btcentralplus.com)
[14:26:19] *** Joins: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca)
[14:26:26] <cmr> it's for types which contain no borrowed pointers outside of the lifetime 'static
[14:26:45] <dylukes> Because in our dreams and runtime
[14:26:47] <dylukes> they will live
[14:26:48] <dylukes> forever.
[14:27:30] <dylukes> kimundi caaaan I just clone f and g :)?
[14:27:36] *** Joins: cjs2 (Mibbit@moz-AA9F09C4.superkabel.de)
[14:27:50] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Input/output error)
[14:27:51] *** Joins: gwty (gwtypc@6DBFAC54.62E8A8A5.137C914F.IP)
[14:27:52] *** Joins: Nulldata (Mibbit@moz-B05BC887.seas-nve.net)
[14:27:58] <Nulldata> Hello!
[14:28:03] *** Joins: gwty_ (gwtypc@6DBFAC54.62E8A8A5.137C914F.IP)
[14:28:12] <kimundi> dylukes: Wouldn't make a difference - the closure you return simply does not support storing those values next to it
[14:28:22] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[14:28:35] <cjs2> Could someone help me with the syntax for creating a boolean vector?
[14:28:36] <bstrie> Nulldata: hello!
[14:28:36] *** Quits: skade (skade@541D1605.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[14:28:41] <dylukes> I guess |a: A| -> C { let (f,g) = (f.clone, g.clone()), g.apply(f.apply(a)) }
[14:28:41] *** Joins: skade (skade@541D1605.505237C9.CAE22B62.IP)
[14:28:45] <dylukes> wouldn't work for the same reason
[14:28:53] <bstrie> cjs2: do you know how big you want it to be, or do you want it to be able to grow as needed?
[14:29:06] <cjs2> it's fixed width
[14:29:08] <Nulldata> Do any of you know if Rust is going to have something like the "defer" functionality at any point?
[14:29:13] <cjs2> sorry fixed size
[14:29:20] <dylukes> kimundi Well, I could work around it with a struct :\
[14:29:22] <cmr> Nulldata: not planned.
[14:29:33] <kimundi> dylukes: The simples, working solution right now would be to give up on either Arrow and compose or build in closure syntax :( - Either don't try to do this, or construct closures manually with unique types and traits, that is
[14:29:35] <dylukes> cmr Say, does rust have a trait for being Callable?
[14:29:41] <cmr> dylukes: not yet
[14:29:42] <bstrie> cjs2: let foo = [false, ..10];  // length of 10, every elements starts as false
[14:29:43] <dylukes> Is it planned at all?
[14:29:47] <eddyb> dylukes: yes
[14:29:50] <dylukes> Ok cool :)
[14:29:51] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[14:29:54] <Nulldata> Cool
[14:29:54] <cjs2> okay thanks
[14:29:56] <dylukes> So I'll be able to just build my own closure types.
[14:29:57] <sigma> Nulldata: "defer" like in which language?
[14:30:05] <Nulldata> Go specifically.
[14:30:24] <sigma> Nulldata: Thanks, was just curious
[14:30:35] <cmr> Nulldata: it's easy to workaround though. You don't need language support for it.
[14:30:44] <cmr> One can implement scope guards just using regular types with destructors.
[14:30:45] <eddyb> dylukes: I have an RFC for variadic generics (required for that Fn trait)
[14:31:02] <kimundi> dylukes: It is planned to have a Fn trait, and if e have it it is planned to change |A| -> T and proc to be sugar for trait objects using it - at that point you have much more freedom for situations like this
[14:31:11] <Nulldata> cmr: I know but it would still be a nice feature to have builtin
[14:31:14] <dylukes> Cool.
[14:31:16] <mletterle> I'm baaaaaaack rustopians.. GOOD MORNING
[14:31:29] <dylukes> So far in my rustplay, I'm missing that and HKTs...
[14:31:31] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[14:31:38] <cmr> Nulldata: I disagree. It'd bloat the language when we already have features that subsume it.
[14:31:40] <dylukes> I should go squash some bugs in the compiler, get to know it.
[14:31:41] <kimundi> mletterle: morning for you, maybe!
[14:31:47] <cmr> A syntax extension could make it prettier.
[14:31:50] <cmr> defer! { .... }
[14:31:57] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[14:32:09] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[14:32:17] <dylukes> Nulldata keep in mind Iced Coffeescript achieves defer by transpilatin
[14:32:20] <dylukes> transpilation
[14:32:27] <dylukes> you should be able to do it in a syntax extension
[14:33:02] *** Quits: KindOne (KindOne@moz-91FF02E1.dynamic.ip.windstream.net) (Ping timeout)
[14:33:05] *** Joins: noel (noel@moz-DD794775.as13285.net)
[14:34:02] *** Joins: herrwolfe45 (user@CACBD77F.4EBBBE62.C082B7DC.IP)
[14:34:03] <Nulldata> Pushing a function call onto the stack, so that it will be executed after returned from the current function for the most part, as long as the struct is bound to a variable with the same lifetime as the function.
[14:34:03] <bstrie> noel: hello
[14:34:03] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[14:34:07] <kimundi> dylukes: Basically, while we support higher order functions, due to different ownership semantics, safety concerns, and being explicit, actually applying higher order concepts to them is very hard right now - we try what we can to improve that situation though!
[14:34:18] <noel> Hi
[14:34:27] <Nulldata> Oops ignore my last message
[14:34:43] <Nulldata> Had a message in my message bar that I didn't see.
[14:34:43] <kimundi> what does defer do?
[14:34:55] <cmr> kimundi: same thing destructors do
[14:34:57] <cmr> it's a scope guard
[14:35:04] <kimundi> ah, okay
[14:35:25] <dylukes> cmr any good places to start you think?
[14:35:36] <kimundi> (I think the devs where talking about that to make RAII easier)
[14:35:36] <cmr> dylukes: for what?
[14:35:42] <dylukes> E-Easy's to tackle :p
[14:35:44] <Nulldata> It's just a nice way of making sure that code will be executed when leaving the current scope/lifetime
[14:35:49] <dylukes> tedious is fine, I'd like to get my feet wet in the code
[14:36:34] *** Joins: abhaykadam (Mibbit@B60C6AF4.1D1FCDDD.6237D8DF.IP)
[14:36:36] <kimundi> dylukes: Eh, if you want tedious, you could update code styles in the compiler ;)
[14:36:45] <dylukes> I saw those ;p.
[14:36:55] *** Joins: KindOne (KindOne@moz-81E2B941.dynamic.ip.windstream.net)
[14:37:03] <cjs2> I'm assuming It's not possible to create an array of constant size from a variable? something like: let mut bitfield = [true, ..MAX] where MAX is some int variable?
[14:37:12] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[14:37:16] <cmr> cjs2: no, since that's not constant.
[14:37:28] <noel> I'm trying to do some type level tricks in Rust. Specifically I'm trying to implement an HList
[14:37:40] <noel> It seems that members of an Enum can't have generic parameters.
[14:37:43] <kimundi> noel: Whats a HList?
[14:37:44] <noel> So this doesn't work:
[14:37:45] <noel> enum HList<H, T> {
[14:37:46] <noel>     HNil,
[14:37:47] <noel>     HCons<H1, H, T>(hd: H1, tl: ~HList<H, T>)
[14:37:48] <noel> }
[14:37:49] <noel> HCons(1, HCons("hi", HNil))
[14:37:52] <cjs2> cmr: should I just create a variable array then populate upto the size i want?
[14:37:54] <noel> An HList is like a tuple but it has unbounded length
[14:38:17] <cmr> Nulldata: kimundi: https://gist.github.com/cmr/8401403
[14:38:19] <dylukes> It's a heterogeneous list.
[14:38:25] <kimundi> noel: Don'T need type params for the variant, only once for the type
[14:38:31] <dylukes> It's a type of telescope.
[14:38:34] <cmr> Ideally `let _ = defer!...` would work, but due to a bug it doesn't.
[14:38:44] <Nulldata> cmr: Yup looks like what I'd written too
[14:39:14] <kimundi> enum HList<H1, H, T> { HNil, HCons(H1, ~HList<H1, H, T>) }
[14:39:23] <Nulldata> cmr: Maybe a way to force the defer to go off instead of doing when dropping, but yeah not that hard.
[14:39:32] <cmr> Nulldata: what do you mean "forcing"
[14:39:48] <cmr> Nulldata: destructor calling is guaranteed in rust, and has a defined order.
[14:39:56] *** Joins: bakkdoor (bakkdoor@moz-8C13C5B8.osnanet.de)
[14:39:58] <Nulldata> cmr: just make it execute the code as a function call, and not when dropping
[14:40:08] <Nulldata> cmr: Just in case.
[14:40:17] <kimundi> Ah, I'm remembering what heterogeneous actually means right now... Need to add some indirection and type erasure for H1 then
[14:40:22] <cmr> There's no "just in case", it *does* work this way, and it will continue to.
[14:40:24] <Nulldata> cmr: But's it's all super simple
[14:40:31] *** Joins: glaebhoerl (glaebhoerl@moz-3590251D.kabelnet.hu)
[14:40:46] *** Joins: noy (user@moz-44A5916A.a146.priv.bahnhof.se)
[14:40:54] <kimundi> enum HList { HNil, HCons(~Any, ~HList) } // For example
[14:40:55] <Nulldata> cmr: Well maybe I'd like to have a premature defer call instead of waiting for destruction.
[14:40:57] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[14:41:07] <cmr> Nulldata: drop(x);
[14:41:22] <Nulldata> I was not aware of that ^^
[14:41:24] <cmr> or, _x, sorry.
[14:41:38] <cmr> it's just a normal destructor. if you move it into a function's stack frame, it will be dropped when that function returns.
[14:41:49] <noel> kimundi: erasing the types is unfortunate. Keeping them around is the point of HLists.
[14:41:54] *** Quits: Khady (Khady@moz-31F9D77E.khady.info) (Ping timeout)
[14:42:01] <cmr> (it's `fn drop<T>(_x: T) { }`, in the prelude)
[14:42:08] <noel> It looks like Rust can't do this kind of party trick yet.
[14:42:37] <Nulldata> noel: just add some unsafe assembly code and it'll all work ;)
[14:42:43] <noel> Ok then!
[14:42:56] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[14:43:01] <kimundi> noel: Hm, the only other way I see is to make every HLIST witha different size or a different type at any position a seperate type - I'm not sure how useful that is
[14:43:08] <dylukes> cmr maybe doing the Rosetta Code tasks might help find more bugs
[14:43:13] <noel> Yeah, that's basically a tuple
[14:43:29] *** Joins: atomical (atomical@moz-C92D67E2.library.northwestern.edu)
[14:43:42] <kimundi> Ah, a linked list tuple xD
[14:44:20] <bstrie> kimundi: couldn't you just have a ~[~Any] for an indeterminate-sized heterogenous list?
[14:44:24] *** Joins: Khady (Khady@moz-31F9D77E.khady.info)
[14:44:27] *** Quits: abhaykadam (Mibbit@B60C6AF4.1D1FCDDD.6237D8DF.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:44:41] <noel> Nested tuples are mostly the same as HLists
[14:44:41] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[14:44:46] *** Joins: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com)
[14:45:19] <noel> (but not quite as useful.)
[14:45:37] <cmr> dylukes: https://github.com/mozilla/rust/issues/10485, https://github.com/mozilla/rust/issues/10602
[14:45:40] <noel> bstrie: The name of the game is keep the types specifics, and avoid run tie dispatch
[14:45:51] <cmr> dylukes: one boring, one fun ;)
[14:46:09] <dylukes> "conditions"?
[14:46:18] <kimundi> noel: But keep the pointer indirection and heap allocation?
[14:46:24] <cmr> dylukes: http://static.rust-lang.org/doc/master/guide-conditions.html
[14:46:28] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[14:46:52] <cmr> also, https://github.com/mozilla/rust/issues/9303
[14:47:07] <noel> kimundi: Heap allocation is theoretically optional, but I think boxing is necessary for this kind of container.
[14:47:11] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[14:47:38] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[14:47:58] <kimundi> noel: I have the feeling we need HKT this - and it seems silly to me to not 
[14:48:12] <kimundi> enum HList<T, HL> { HNil, HCons(T, ~HList<?>) }
[14:48:28] * cmr -> class
[14:48:54] <kimundi> Whoops, mangled my messages there
[14:49:42] <noel> kimundi: Not 100% sure it is a HKT situation, but it is in the same area of type level messing around.
[14:49:47] *** Joins: elux (peter@B6F21F4B.1F20BC31.2170E5F.IP)
[14:49:53] <kimundi> Anyway, I think we need either variadic type parameters or HKT for this - and it seems silly to me to implement (A, B, C, D) that way :P
[14:49:56] <dylukes> cmr I'll take a look at those, thanks
[14:50:05] *** Quits: skade (skade@541D1605.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[14:50:10] <noel> Well, believe it or not they actually have uses.
[14:50:15] <kimundi> \me -> 15min afk
[14:50:24] <noel> A common one in Scala is parsing URLs
[14:51:37] <dylukes> brb
[14:51:39] *** Quits: dylukes (dylukes@BCD873B4.AF8B4D87.E8393EEB.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[14:52:46] *** Joins: skade (skade@541D1605.505237C9.CAE22B62.IP)
[14:55:01] *** Joins: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP)
[14:56:08] *** Quits: gkostyanikov (gkostyanik@531C4285.3E410295.CA6E2165.IP) (Quit: My iMac has gone to sleep. ZZZzzz…)
[14:57:02] <kimundi> noel: Hm, what are the uses?
[14:57:25] <noel> Writing a DSL for parsing URLs in HTTP requests
[14:57:55] <noel> You want to write composable parsers
[14:58:02] <noel> Something like:
[14:58:08] <noel> let root = "v1" / "api"
[14:58:14] <noel> let user = "user"
[14:58:56] <kimundi> I mean, what advantage has expressing it like an linked list?
[14:59:01] <noel> let my_service = root / user / id_as_integer |the_int| do_something(the_int)
[14:59:08] <noel> Composition.
[14:59:28] <noel> You don't know in advance the routes you'll be gluing together
[14:59:54] <mouse> With the master Rust I have a strange behaviour of threads spawing on 4 core CPU: http://pastebin.com/7t4LX5pV   from time to time I have different order of buffer output (#2, #3, waiting for a second for #1) or waiting for a second for #1 then print #2 and #3.
[14:59:55] <noel> and you can pass the parsed url fragments (like id_as_integer) down to the handlers
[14:59:57] <kimundi> But its constant at compiletime due to the code layout, right?
[15:00:14] <noel> Yes, it has to be.
[15:00:25] <noel> Or at least the types have be known
[15:00:40] <noel> You could dynamically substitute different handlers but the types must be the same.
[15:00:48] <kimundi> Hm, I think if we get variadics we could express that with tuples just as well
[15:00:51] <noel> With macros one could possibly achieve the same effect.
[15:01:09] <lucian> kimundi: is there a particular hesitance to do HKT?
[15:01:18] <kimundi> fn append<T>(tup: (..T), U) -> (..T, U)
[15:01:36] <kimundi> lucian: Not really, its just complicated to implemnt, and not a priority
[15:01:37] <bstrie> lucian: the devs aren't interested in new features for 1.0
[15:01:59] <noel> (Here's a talk we did a few years ago about HLists for URL parsing: http://untyped.com/untyping/2011/10/10/reading-writing-and-the-rest/)
[15:02:50] <kimundi> lucian: A well designed patch would probably get accepted
[15:03:02] <kimundi> But maybe not pre 1.0 at this point
[15:03:23] <lucian> bstrie: i was assuming it'd be after 1.0 anyway
[15:04:47] *** Joins: Merkator (Merkator@moz-D6C49A87.goleniow.vectranet.pl)
[15:05:08] <nobody> can anyone help me with a question about procs?
[15:05:09] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[15:05:19] <nobody> i can't figure out how to call a proc in a data structure
[15:05:26] <nobody> test case at http://pastebin.com/cE3fjBR5
[15:06:03] *** Quits: vgeddes (vincent.ge@moz-E5B12DD4.dsl.mweb.co.za) (Ping timeout)
[15:06:39] <mouse> ...with a timer::sleep it looks fine. Could it be possible that RUST_THREADS=4 is not actually runs three threads as system-threads but green threads?
[15:06:42] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[15:06:54] *** Joins: DasIch (dasich@moz-5EDA591.de)
[15:07:44] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Ping timeout)
[15:08:08] <bstrie> nobody: I'm kinda fuzzy, but a proc can only be called once. this means that when you call it, it has to move. and since a references doesn't own what it's pointing to, you can't move out and therefore a call can't happen
[15:08:57] <nobody> oh... i didn't know procs were call-once
[15:09:21] *** Quits: killerswan (kevin.cant@E9A7755D.F485DE6D.5604FD67.IP) (Ping timeout)
[15:09:36] <bstrie> yup
[15:10:07] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[15:10:46] <nobody> and yep, changing to ~self compiles
[15:12:04] *** Joins: squiddy (squiddy@moz-189D9828.adsl.alicedsl.de)
[15:12:44] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[15:14:04] <bstrie> cool :)
[15:14:48] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[15:15:03] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[15:16:04] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[15:17:10] *** Joins: dylukes (dylukes@moz-6BD71A37.wireless.pitt.edu)
[15:17:34] *** Joins: darthdeus (darthdeus@62EE3073.3B96A244.4E88690D.IP)
[15:17:49] *** Quits: dylukes (dylukes@moz-6BD71A37.wireless.pitt.edu) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[15:20:36] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[15:21:50] <nmatsakis> glaebhoerl / dylukes: an add'l 2 months between jan and feb would be awesome
[15:22:18] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[15:22:41] <nmatsakis> (in reference to backscroll)
[15:24:22] <bstrie> dbaupp: dammit, why did you break the silence?? it was so nice ;_;
[15:24:25] *** Joins: dylukes (dylukes@moz-6BD71A37.wireless.pitt.edu)
[15:24:32] <bstrie> you can't just *encourage* people to comment
[15:24:52] <bstrie> people are idiots! they have nothing to contribute
[15:24:55] <eddyb> nmatsakis: nice to see you around while I'm awake :D
[15:25:08] <eddyb> the talk was awesome btw
[15:25:10] *** Joins: killerswan (kevin.cant@E9A7755D.F485DE6D.5604FD67.IP)
[15:25:48] <bstrie> cmr: I'm angry at your graph in The State of Rust, where you have libnative as a green bar and libgreen as a yellow bar
[15:26:02] <eddyb> haha
[15:26:13] <nobody> hmm, mind taking a look at another test case?
[15:26:22] <nobody> http://pastebin.com/dyN8KUEy
[15:26:32] <bstrie> it's as bad as people who graph browser performance. srsly folks: IE = blue, opera = red, firefox = orange, chrome = green
[15:27:03] <nobody> there's some trait intricacies i'm not aware of, i think
[15:27:31] *** Joins: achim (achim@moz-254418F2.dip0.t-ipconnect.de)
[15:27:51] <nobody> i switched it to a closure with explicit lifetime because i need to call it more than once
[15:28:02] *** jorendorff_away is now known as jorendorff
[15:28:04] <bjz> bstrie: I help along the conversation a little
[15:28:08] <bjz> *helped
[15:28:37] <bstrie> I'm going to downvote both of you so that nobody can see your comments
[15:28:41] <bstrie> there's still time to make this right
[15:28:42] <nmatsakis> eddyb: thanks
[15:29:11] <bstrie> nobody: you've defined Test to store a closure, but you're constructing it with a proc
[15:29:17] <nmatsakis> eddyb: hopefully gonna' land that branch for temporaries this week, chasing down the last few crashes now, then I have to rebase again ...
[15:29:20] <bstrie> that shouldn't be possible
[15:29:37] *** Joins: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net)
[15:29:37] <dylukes> bstrie Safari = light blue? Konqueror = rainbow + sparkles?
[15:29:57] <bstrie> safari can be silver. I dunno, nobody cares about safari
[15:30:07] <nobody> oh weird yeah, that should have errored
[15:30:13] <eddyb> nmatsakis: going to mix with my current work on making self even less special, but it shouldn't clash
[15:30:14] <dylukes> Ive been using it more lately. Chrome is getting Firefoxy.
[15:30:22] <dylukes> Firefox meanwhile is getting nicer.
[15:30:27] <nobody> but i changed it to '~Test { func: || {} };' and still same error
[15:30:30] <dylukes> Chrome is approaching 2004 Firefox.
[15:31:30] <Ms2ger> You're welcome ;)
[15:31:34] <nobody> #[deriving(Send)] would have been too easy
[15:32:56] *** kimundi is now known as zz_kimundi
[15:32:58] *** Quits: dk (Mibbit@moz-FF4909F9.dsl.telepac.pt) (Quit: http://www.mibbit.com ajax IRC Client)
[15:33:48] <bstrie> nobody: filed a bug: https://github.com/mozilla/rust/issues/11515
[15:34:09] <bstrie> nobody: I really don't know how trait objects are supposed to work. they're a mystery to me
[15:34:55] <Ms2ger> Magic vtables!
[15:35:02] <nobody> i''ve been playing with it less than a day and i'm already breaking the compiler :P
[15:35:23] <bstrie> I think it was a mistake to allow automatic coercion to trait objects. now everybody actually wants to use them and everything is terrible :P
[15:36:02] <SiegeLord> Hah
[15:36:21] *** Joins: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com)
[15:37:11] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[15:37:58] <nobody> i googled that error and got my pastebin from 9 minutes ago. very impressive
[15:38:05] <bstrie> hahahaha
[15:38:12] <bstrie> indeed
[15:38:30] <lucian> i've seen it happen faster than that. it's even more confusing when you find your own question from ages ago
[15:39:32] <dylukes> So for working on rustc stuff,
[15:39:44] <dylukes> what's the best way to do it? Compile a specific library and use tests? 
[15:39:50] <dylukes> (rather than recompile the whole thing :p)
[15:39:56] *** Joins: herrwolf` (user@CACBD77F.4EBBBE62.C082B7DC.IP)
[15:40:00] <bstrie> someone on wikipedia just edited one of my rust examples to remove "flippant" language
[15:40:05] *** Quits: igork (igork@moz-578E0B8C.broadband.corbina.ru) (Quit: Leaving)
[15:40:07] <bstrie> lollll wikipedia editors
[15:40:38] *** Quits: herrwolfe45 (user@CACBD77F.4EBBBE62.C082B7DC.IP) (Ping timeout)
[15:41:54] <SiegeLord> lol
[15:42:04] <dylukes> bstrie well stop being so flippant
[15:42:13] * bstrie flips dylukes out a window
[15:42:23] <dylukes> As someone of Czech heritage,
[15:42:27] <bstrie> hahaha
[15:42:32] <dylukes> I find defenestration jokes INCREDIBLY offensive.
[15:42:33] *** Quits: cjs2 (Mibbit@moz-AA9F09C4.superkabel.de) (Quit: http://www.mibbit.com ajax IRC Client)
[15:42:47] <bstrie> that's part of your heritage!
[15:42:50] <dylukes> Have you ever thought about how much you *hurt* people who just aren't like you making off hand comments like that?
[15:43:00] <dylukes> Ugh.
[15:43:04] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: It is tiem!)
[15:43:10] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[15:43:38] <lucian> haha http://en.wikipedia.org/w/index.php?title=Rust_%28programming_language%29&diff=590497658&oldid=590252854
[15:43:39] <bstrie> I'm... so ashamed...
[15:43:43] * bstrie defenestrates self
[15:43:45] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[15:43:47] <dylukes> Go review your political correctness.
[15:43:57] <dylukes> Remember, you should think about how *anything and everything you say* could offend anyone.
[15:44:02] <bstrie> impl bstrie { fn defenestrate(self) { } }
[15:44:05] <dylukes> Because it's everyone's right to not be offended.
[15:44:32] <dylukes> And if you offend someone, it makes any points you've made recently or in the immediate future *wrong*.
[15:44:40] <dylukes> True story ;p.
[15:44:53] <dylukes> (but actually, those^ kind of people should be thrown out a window)
[15:45:28] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[15:45:53] <dylukes> I have this one joke about an old one legged jewish black leper woman who identifies as gender-male and sexually as a crab.  
[15:45:55] <SiegeLord> It's a shame 'Rust' can't be used in more sentences
[15:46:00] <dylukes> But the internet always gets offended.
[15:46:02] <SiegeLord> Like 'Go' can be...
[15:46:03] <bstrie> lucian: flippancy shall not be tolerated. or, shall be only intermittently tolerated. or shall be tolerated while no one who cannot tolerate it is looking
[15:46:12] *** Quits: herrwolf` (user@CACBD77F.4EBBBE62.C082B7DC.IP) (Client exited)
[15:46:26] <SiegeLord> Should have named the language 'The'
[15:46:42] <bstrie> SiegeLord: better idea: let's name it after a letter of the alphabet
[15:46:52] <lucian> bstrie: stop discussing flippancy flippantly! :)
[15:46:54] <SiegeLord> That's just silly :P
[15:47:02] <SiegeLord> Nobody would use a language named like that
[15:47:12] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[15:47:19] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: hoverbear)
[15:47:38] <lucian> even better: how about a confusing operation in the language applied to a variable named after a single letter?
[15:47:56] <nobody> SiegeLord- so what if i would?
[15:49:21] <bstrie> SiegeLord: maybe I'll change my full name to "Who" and then invent a language named "What"
[15:49:35] <LinearInterpol> who invented what now?
[15:49:52] <bstrie> "What's the language?" "Yes" "The name of the language" "What." "What's the name?" "That's what I said!"
[15:50:05] <LinearInterpol> AnC..
[15:50:06] *** Quits: bakkdoor (bakkdoor@moz-8C13C5B8.osnanet.de) (Quit: Leaving...)
[15:50:06] <SiegeLord> bstrie: That's just asking to be visited by a time traveling alien
[15:51:11] <bstrie> I sort of want to subtly troll the person who objects to my flippant language in strings in code examples
[15:51:16] <bstrie> here's how
[15:51:27] <bstrie> I make an example where I simulate ants on a diving board
[15:51:34] <bstrie> and I make them do flips
[15:51:36] <Ms2ger> So that's why the time travelers didn't go back to kill Hitler
[15:51:47] <dylukes> bstrie: fn flipprint(s: ~str) { println!("like, {:}!", s) }
[15:52:26] <dylukes> anyhow, gotta go learn about Stone-Weierstrass
[15:52:33] *** Quits: dylukes (dylukes@moz-6BD71A37.wireless.pitt.edu) (Quit: Textual IRC Client: www.textualapp.com)
[15:54:10] *** Joins: arrdem (arrdem@moz-2E1DB1F9.ece.utexas.edu)
[15:54:46] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[15:55:08] <Florob> bstrie, "And who wrote it?" "Certainly"
[15:55:59] <bstrie> the command-line compiler will be named "why"
[15:56:11] *** Quits: arrdem (arrdem@moz-2E1DB1F9.ece.utexas.edu) (Quit: leaving)
[15:56:14] *** Joins: arrdem (arrdem@moz-2E1DB1F9.ece.utexas.edu)
[15:57:28] <Florob> inb4: All compiler errors are "I don't know"
[15:57:29] <LinearInterpol> bstrie: make it into an esolang. :)
[15:57:35] *** Quits: arrdem (arrdem@moz-2E1DB1F9.ece.utexas.edu) (Quit: leaving)
[15:57:36] *** Joins: arrdem (arrdem@moz-2E1DB1F9.ece.utexas.edu)
[15:57:57] *** Quits: Merkator (Merkator@moz-D6C49A87.goleniow.vectranet.pl) (Client exited)
[15:58:46] *** Joins: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net)
[15:59:10] *** Quits: khodzha (khodzha@D40BD4BD.3E410295.CA6E2165.IP) (Ping timeout)
[15:59:31] *** Quits: arrdem (arrdem@moz-2E1DB1F9.ece.utexas.edu) (Quit: leaving)
[15:59:37] *** Joins: arrdem (arrdem@moz-2E1DB1F9.ece.utexas.edu)
[16:00:39] *** Quits: arrdem (arrdem@moz-2E1DB1F9.ece.utexas.edu) (Quit: leaving)
[16:00:43] *** Joins: arrdem (arrdem@moz-2E1DB1F9.ece.utexas.edu)
[16:01:34] *** Joins: telotortium (rmi1@moz-46F0EE50.hsd1.ca.comcast.net)
[16:01:38] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[16:01:41] *** Quits: telotortium (rmi1@moz-46F0EE50.hsd1.ca.comcast.net) (Quit: telotortium)
[16:02:27] *** Joins: yutongzhao (yutongzhao@moz-325F8282.hsd1.ca.comcast.net)
[16:02:35] *** Joins: eholk (eholk@3A717AE8.2A034839.284344F5.IP)
[16:04:20] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[16:04:41] *** jorendorff is now known as jorendorff_away
[16:05:44] *** Joins: Kruppe (user@moz-B5BC6760.net.uwaterloo.ca)
[16:06:22] *** Joins: espindola (espindola@8EC99D26.4B7A7726.A2E931B1.IP)
[16:06:30] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:06:37] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[16:07:17] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:07:21] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[16:07:42] *** jorendorff_away is now known as jorendorff
[16:10:52] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[16:11:03] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[16:12:03] *** Quits: arrdem (arrdem@moz-2E1DB1F9.ece.utexas.edu) (Quit: leaving)
[16:12:05] *** Joins: arrdem (arrdem@moz-2E1DB1F9.ece.utexas.edu)
[16:12:15] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[16:15:40] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[16:15:40] *** ChanServ sets mode: +ao dherman dherman
[16:15:47] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[16:16:29] *** Joins: khodzha (khodzha@56E1B165.FF90EB8A.4595224C.IP)
[16:17:04] *** Quits: eholk (eholk@3A717AE8.2A034839.284344F5.IP) (Quit: eholk)
[16:19:18] *** Quits: Nulldata (Mibbit@moz-B05BC887.seas-nve.net) (Quit: http://www.mibbit.com ajax IRC Client)
[16:20:19] *** Joins: bakkdoor (bakkdoor@moz-E5FFD787.dip.osnanet.de)
[16:21:09] *** Quits: bakkdoor (bakkdoor@moz-E5FFD787.dip.osnanet.de) (Connection reset by peer)
[16:22:36] *** Quits: kris (kris@moz-6D20263F.fullrate.dk) (Ping timeout)
[16:26:18] *** Joins: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net)
[16:27:03] *** Quits: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net) (Quit: Leaving.)
[16:27:03] *** Joins: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net)
[16:27:07] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[16:27:41] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[16:28:14] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[16:28:22] *** Quits: khodzha (khodzha@56E1B165.FF90EB8A.4595224C.IP) (Ping timeout)
[16:29:12] *** Joins: derek_c (derek@moz-1AB923CD.fwd.datafoundry.com)
[16:34:04] <derek_c> am I right in understanding that, when I do something like `let x = SomeStruct{...}`, x is allocated on the private heap of the current task; if I do `let x = ~SomeStruct{...}`, x is allocated on the global heap?
[16:34:49] *** Joins: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net)
[16:34:52] <lucian> the first is actually on the stack, the second on the (global) heap, but owned by the current task
[16:35:28] <derek_c> lucian: when do things get allocated on the private heap?
[16:35:49] <lucian> that would be Rc or Gc
[16:36:20] <lucian> why do you ask? no other task can access your ~ unless you explicitly send it
[16:36:42] <derek_c> lucian: if the first is on stack, then what happens when I move it to another task?  Does it get copied?
[16:36:49] <derek_c> just trying to understand how Rust works
[16:37:18] *** Joins: sedman (sedman@E4D2F0A.47298EC7.57E8EAD3.IP)
[16:37:24] <lucian> if you send it, it gets copied. but that will only work if it has the Send trait. it's possible you could have as one of SomeStruct's members a thing that isn't sendable (like Rc/Gc)
[16:37:27] *** Quits: eevee (eevee@moz-8DEBFFC9.lv.lv.cox.net) (Ping timeout)
[16:37:39] <eddyb> derek_c: just the pointer, the contents don't get copied
[16:37:56] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[16:38:03] <derek_c> eddyb: so is the content on the global heap?
[16:38:16] <derek_c> eddyb: when I do `let x = SomeStruct{...}`?
[16:38:18] <eddyb> yupp
[16:38:27] <derek_c> hmm
[16:38:31] <eddyb> wait, without ~?
[16:38:35] <derek_c> eddyb: yeah
[16:38:42] <lucian> without ~ it's on the stack and it gets copied
[16:38:54] <lucian> with ~ it's on the heap and only pointer gets copied
[16:38:56] <eddyb> ^ that. there's no allocation without ~, @ or box
[16:39:13] <eddyb> (and soon, only box will be usable to allocate)
[16:39:17] <lucian> (@ is being replaced by Gc and Rc>
[16:39:17] <derek_c> so if I do `let x = SomeStruct{}; do spawn {let y = x}`, then x gets implicitly copied?
[16:39:35] <eddyb> derek_c: yes, to the global heap (inside the proc's env)
[16:39:47] <derek_c> eddyb: to the global heap?
[16:40:10] <derek_c> ok I guess that makes sense
[16:40:18] <lucian> and it gets moved into the new task i think, when the proc gets executed?
[16:40:23] <eddyb> well, I forgot to mention that proc also does allocation
[16:40:39] <eddyb> lucian: nah there's no magic, just Rust move semantics
[16:40:57] <lucian> eddyb: right, but it has to get to the stack of the new task somehow
[16:41:04] <eddyb> it's never on any stack :)
[16:41:05] <lucian> eddyb: and that happens through the proc's ~ env
[16:41:22] <lucian> i'll shut up, i appear to be too confused
[16:41:24] <derek_c> eddyb: didn't you just say it's on stack?
[16:41:36] <eddyb> derek_c: the original value, the copy doesn't get put on the stack
[16:41:42] <eddyb> it remains in the proc's env
[16:41:47] <derek_c> eddyb: ok
[16:41:50] *** Joins: eevee (eevee@moz-8DEBFFC9.lv.lv.cox.net)
[16:41:51] <derek_c> thanks guys
[16:42:05] <eddyb> you don't need to do let y = x; - it's enough to use "x"
[16:42:31] *** Joins: mib_bbgr2s (Mibbit@moz-BA0FA134.hsd1.pa.comcast.net)
[16:42:58] <derek_c> eddyb: yeah
[16:43:04] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[16:43:45] *** Quits: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net) (Client exited)
[16:44:04] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[16:44:20] *** Quits: buster (buster@3A0EAB5F.9C69795C.ACFE537F.IP) (Client exited)
[16:45:46] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[16:46:12] *** Quits: mib_bbgr2s (Mibbit@moz-BA0FA134.hsd1.pa.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[16:46:26] *** Joins: mib_ryc0su (Mibbit@9DFAAD6D.CE265EEF.5017C12F.IP)
[16:46:28] *** Quits: mib_ryc0su (Mibbit@9DFAAD6D.CE265EEF.5017C12F.IP) (Quit: mib_ryc0su)
[16:46:52] <derek_c> what is an example of something that's not sendable?
[16:47:59] <eddyb> derek_c: @T
[16:48:17] <derek_c> eddyb: because the content is on the private heap?
[16:48:18] <eddyb> also Rc<T> because it's not atomic (Arc<T> is sendable)
[16:48:30] <eddyb> derek_c: that doesn't actually matter
[16:48:42] *** Joins: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP)
[16:48:42] *** Joins: khodzha (khodzha@D40BD4BD.3E410295.CA6E2165.IP)
[16:48:44] <eddyb> the private/global heap nonsense has little to do with sendability
[16:48:59] <derek_c> eddyb: first of all, is there something called private heap at all?
[16:49:06] <derek_c> in Rust
[16:49:15] *** Joins: jdm (jdm@FCCEA34F.7672369.D8E68FF6.IP)
[16:49:15] *** ChanServ sets mode: +o jdm
[16:49:20] <eddyb> it's called the local heap - but I think calls to it just go to malloc
[16:49:28] *** Quits: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP) (Quit: Taking a nap.)
[16:49:38] *** Joins: gbarboza (gbarboza@moz-27D488DA.com)
[16:49:39] <lucian> i'm pretty sure there's just a single heap where everything gets allocated
[16:49:43] <eddyb> the C heap is already reentrant
[16:49:59] <lucian> the distinction is only logical, differentiated by smart pointer that owns a particular bit of memory
[16:50:03] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[16:50:06] <derek_c> lucian: that makes sense
[16:50:07] <eddyb> the stack could be sendable if you would make the compiler believe it
[16:50:36] <eddyb> Rc<RefCell<T>> is not sendable, Arc<RefCell<T>> is either not sendable or it can't be constructed
[16:50:40] <lucian> derek_c: there could be separate heaps, but it doesn't really matter where the data is stored
[16:50:57] <eddyb> only thread-safe shared ptrs are Send
[16:51:24] *** Quits: jdm (jdm@FCCEA34F.7672369.D8E68FF6.IP) (Ping timeout)
[16:51:29] <derek_c> I'm still kinda confused
[16:52:01] <derek_c> how would the stack be sendable? things on stack are immediately freed when the function returns
[16:52:04] *** Joins: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP)
[16:52:04] *** ChanServ sets mode: +o jdm
[16:52:21] *** Quits: glaebhoerl (glaebhoerl@moz-3590251D.kabelnet.hu) (Ping timeout)
[16:52:50] *** Joins: awidegreen (awidegreen@moz-B6DD5BB1.a137.corp.bahnhof.se)
[16:52:55] <eddyb> derek_c: it was just an extreme claim. I still think it's doable, but you'd have to track lifetimes across tasks
[16:53:16] <derek_c> eddyb: I see what you mena
[16:53:19] <derek_c> *mean
[16:53:30] <lucian> core-dump style, it should be sound to send over a dead tasks' stack
[16:53:45] *** Quits: sellout (Adium@moz-76D71F1A.hlrn.qwest.net) (Quit: Leaving.)
[16:53:48] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[16:53:49] *** Joins: sellout (Adium@moz-76D71F1A.hlrn.qwest.net)
[16:54:04] *** Joins: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP)
[16:54:52] <derek_c> isn't @ just a syntactic sugar for Rc?
[16:54:58] <eddyb> &mut T is not shareable anyway, &T might be sendable, actually. sending it could cause a poisoning of the original variable, protecting it from mutation
[16:55:04] <eddyb> derek_c: nope, it's built-in
[16:55:17] *** Joins: doener (doener@moz-C68F600D.unity-media.net)
[16:55:29] <eddyb> it's nicer than Rc (especially since it has GC-like copy semantics) but evil
[16:55:37] *** Quits: sellout (Adium@moz-76D71F1A.hlrn.qwest.net) (Ping timeout)
[16:55:47] *** Quits: awidegreen (awidegreen@moz-B6DD5BB1.a137.corp.bahnhof.se) (Ping timeout)
[16:55:49] <derek_c> eddyb: where can I find the implementation for @?
[16:55:55] <derek_c> i.e. which files?
[16:56:12] *** Quits: noel (noel@moz-DD794775.as13285.net) (Quit: noel)
[16:56:29] *** Joins: skrylar (skrylar@moz-F692F728.austin.res.rr.com)
[16:56:32] <lucian> @ is being removed, so look at Rc and Gc instead
[16:56:48] *** Joins: awidegreen (awidegreen@moz-B6DD5BB1.a137.corp.bahnhof.se)
[16:56:51] <pnkfelix> eddyb: ... "protecting [&T] from mutation" ... and preventing you from popping that stack frame?
[16:57:07] <eddyb> pnkfelix: shouldn't lifetimes guard that?
[16:57:10] *** Quits: Kxepal (Miranda@moz-49BF091C.pppoe.mtu-net.ru) (Ping timeout)
[16:57:17] *** Quits: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP) (Quit: Taking a nap.)
[16:58:41] *** Quits: awidegreen (awidegreen@moz-B6DD5BB1.a137.corp.bahnhof.se) (Ping timeout)
[16:58:44] <pnkfelix> eddyb: i don't see what you are suggesting, but maybe you meant something other than sending any potential &T
[16:58:49] *** Joins: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP)
[16:59:49] *** Joins: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[17:00:04] <pnkfelix> eddyb: my intution is that when I send a value across a channel, I've handed it off and now I get to start returning (popping my stack) if I want to.
[17:00:24] <eddyb> pnkfelix: yeah, nevermind that thought
[17:01:30] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[17:04:41] *** Joins: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com)
[17:05:52] *** Joins: mib_xdblye (Mibbit@CF0E1B01.25BE8D68.F7A44A1B.IP)
[17:06:38] <mib_xdblye> can someone answer my newbie question: how do you bind a mutable refrence in an enum? i keep getting lifetime errors
[17:07:36] <eddyb> mib_xdblye: enum Foo<'a> {Variant(&'a mut Bar), ...}
[17:08:06] <mib_xdblye> thats what i have, im getting the error in assigning
[17:08:13] <mib_xdblye> lemme show an example
[17:08:16] *** Joins: Kxepal (Miranda@moz-2D7B8971.pppoe.mtu-net.ru)
[17:08:16] *** Quits: Ferreus (ferreus@moz-7F9E813A.dip0.t-ipconnect.de) (Ping timeout)
[17:08:39] <Luqman> mcpherrin: no i cross compile, the qemu thing was an experiment that failed :P
[17:09:46] <mib_xdblye> http://pastebin.com/m8NxSXV3
[17:09:58] *** zz_kimundi is now known as kimundi
[17:10:51] *** Quits: rossm (rossm@moz-EE3BB1DC.br.br.cox.net) (Quit: )
[17:11:02] <eddyb> mib_xdblye: the return type should be SomeEnum<'a>
[17:11:07] *** Quits: heftig (heftig@moz-D746319F.unitymedia.biz) (Quit: Quitting)
[17:11:25] <mib_xdblye> yay
[17:11:25] <bstrie> aaaaaggghhhhh
[17:11:30] <mib_xdblye> thank you so much
[17:11:31] <bstrie> penny arcade did a comic on Rust-the-game
[17:11:34] <mib_xdblye> <3
[17:11:43] <bstrie> dbaupp: brace yourself
[17:11:45] *** Joins: lucian_ (lucian@303F9692.4304AE1E.CE5E78F6.IP)
[17:11:46] <Ms2ger> And not /r/rust is full?
[17:11:48] *** Quits: sedman (sedman@E4D2F0A.47298EC7.57E8EAD3.IP) (Ping timeout)
[17:11:57] *** Joins: dylukes (dylukes@moz-7AB3779F.wireless.pitt.edu)
[17:12:05] <SiegeLord> Which one, the borrow check game? Or the moved out value game?
[17:12:05] <dylukes> So @mut Foo is gone?
[17:12:13] <dylukes> Should I be using Rc<Mut<Foo>>?
[17:12:14] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[17:12:14] <o11c> mib_xdblye: also on line 20 the return is not needed if you drop the semi
[17:12:29] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[17:12:37] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[17:12:45] <bstrie> dylukes: I think it's Rc<RefCell<Foo>>
[17:12:46] <dylukes> I want let foo = @mut ...
[17:12:47] <dylukes> :\
[17:12:54] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[17:12:55] <bstrie> dylukes: @mut is bad and you should feel bad
[17:12:59] <dylukes> :(
[17:13:08] <bstrie> I can see that you feel bad. excellent.
[17:13:26] <dylukes> I don't see these changes in the manual :\
[17:13:28] *** Quits: lucian_ (lucian@303F9692.4304AE1E.CE5E78F6.IP) (Ping timeout)
[17:13:34] <dylukes> What's happening to our pointer types :<
[17:13:47] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[17:14:10] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[17:14:11] <bstrie> dylukes: there are only ~ and & and &mut now
[17:14:20] <bstrie> and then there were three
[17:14:23] <dylukes> damnit
[17:14:25] <dylukes> I was going to say
[17:14:29] <dylukes> cheers
[17:17:04] <dylukes> I'm trying to add emit ast :p.
[17:17:22] *** Joins: chromatic (chromatic@moz-28CBC7F4.hsd1.or.comcast.net)
[17:17:55] <Ms2ger> bstrie, *?
[17:18:22] <dylukes> llvmdeps
[17:18:25] <dylukes> it is missing :o?
[17:18:27] *** ross is now known as rossm
[17:18:52] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[17:19:32] *** Joins: okard (okard@moz-23FFB3AD.dip0.t-ipconnect.de)
[17:20:23] <bstrie> Ms2ger: * is just a feature for use with the C interface. we also have variadic C functions, but you wouldn't say that rust has variadic functions
[17:20:38] *** Joins: icebattle (icebattle@8A14A542.EBE2EE2B.C7CEC4ED.IP)
[17:23:31] *** Quits: skade (skade@541D1605.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[17:24:41] <dylukes> Can I just rustpkg build librustc?
[17:24:47] <dylukes> It seems to be missing llvmdeps.rs
[17:24:53] <cmr> * is *not* just a feature for use with the C interface. Many of  our safe abstractions are built on top of it (Rc, Arc, etc etc etc)
[17:25:01] <cmr> dylukes: no
[17:25:04] <cmr> dylukes: use make.
[17:25:07] <cmr> make stage-rustc
[17:25:10] <cmr> make stageN-rustc
[17:25:12] <dylukes> mmk :\
[17:25:20] <dylukes> Need to build YACL...
[17:25:25] <dylukes> yet another copy of llvm
[17:27:00] <bstrie> cmr: no, no, you're doing it wrong. the truth is irrelevant. please don't go around telling people that rust actually has more pointer types. our job is to fight FUD, and the truth is that the vast majority of people will not use *
[17:27:06] <bstrie> contrast the other three, which are unavoidable
[17:28:33] <dylukes> bstrie I have a task for you
[17:28:42] <bstrie> yes dylukes
[17:28:55] <dylukes> fork CPython and call it "Glorious People's Python" or "CCCPython",
[17:29:11] <dylukes> then set yourself up as its MDFL (malicious dictator for life) and make breaking changes every week
[17:29:32] <bstrie> dylukes: I actually had the idea to "fork" python and call it "PHPy" and sell licensed copies of the interpreters to enterprises
[17:29:35] <bstrie> I'd make a fortune
[17:29:41] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[17:29:43] *** Joins: Florob (Florob@moz-39532932.de)
[17:30:03] <dylukes> "lemon" is now a reserved word. You may not use lemon in your code. If you were to use "lemon", and the compiler does not emit an error, please stand by for collection by the Python Secret Police.
[17:31:02] *** Quits: yota (sdouche@moz-7D878FB8.securactive.net) (Quit: Ex-Chat)
[17:31:10] <bstrie> dylukes: you would like http://p-nand-q.com/programming/languages/TMMLPTEALPAITAFNFAL.html
[17:31:21] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[17:31:31] <SiegeLord> Modify pep8 to simply delete non-compliant code... and kill your family
[17:31:55] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[17:32:24] <dylukes> SiegeLord: PUEP1 (Python User Enhancement Proposal 1): Microchips 
[17:32:33] <dylukes> Microchips will be used to track non-compliant coding.
[17:33:01] <dylukes> Well, not quite microchips. For the first iteratin:
[17:33:03] <dylukes> 1) you will be shaved
[17:33:12] <dylukes> 2) holes will be bored through your skull to the relevant regions
[17:33:26] <SiegeLord> I hope Rust doesn't get a pep8...
[17:33:33] <dylukes> 3) wires will be inserted and wired to an arduino hot glued to the back of your head
[17:33:33] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[17:33:54] <dylukes> 4) remember to check in at your local office regularly for anaesthesia, a 9 volt battery, and your daily dose of soma.
[17:34:10] <dylukes> SiegeLord I think PEP8 was a good thing personally.
[17:34:11] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[17:34:44] <cmr> what's wrong with pep8?
[17:34:55] <dylukes> I like PEP8 :p.
[17:34:59] <dylukes> Especially + linters.
[17:35:06] <Ms2ger> obsolete syntax: enum wildcard
[17:35:08] <Ms2ger> :(
[17:35:09] <dylukes> PyCharm automatically PEP8's all my code nicely. 
[17:35:22] <o11c> SiegeLord: pep8 is the best thing ever to happen to *any* language
[17:35:27] <dylukes> It's up there.
[17:35:32] <SiegeLord> pep8 dictates the one code style to rule them all
[17:35:42] <o11c> which means an end to holy wars!
[17:36:02] <dylukes> Yay tyranny!
[17:36:07] <SiegeLord> In the sense that capitulation is an end to wars :P
[17:36:34] <dylukes> No, it's more in the sense that a world government and strictly enforced social guidelines would be an end to wars.
[17:36:37] <Ms2ger> The French must like pep8 then
[17:36:39] <dylukes> Except it's a much simpler system.
[17:36:48] <dylukes> So it, you know, actually works.
[17:37:17] <bstrie> Ms2ger: I think napoleon would like to have a word with you :P
[17:37:48] <Ms2ger> Tell me where Napoleon ended up ;)
[17:37:57] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[17:38:03] <dylukes> on top of the better part of the western world?
[17:38:06] <dylukes> and then a prison island.
[17:38:08] <Kxepal> golang has more tyranny with force code autoformatting to official style out of box, so pep8 is more liberal solution (:
[17:38:16] <bstrie> and then off the island and back on top again
[17:38:19] *** Quits: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP) (Ping timeout)
[17:38:21] <bstrie> and then onto another island
[17:38:21] <dylukes> exactly :p
[17:38:48] *** Joins: Ferreus (ferreus@moz-999B6F0A.customers.d1-online.com)
[17:39:12] *** Joins: tikue (tkuehn@268C2DFE.FAD414BA.D74CC41D.IP)
[17:39:44] <dylukes> bstrie my favorite part:
[17:39:46] <dylukes> "There were other plots to rescue Napoleon from captivity including one from Texas, where exiled soldiers from the Grande Armée wanted a resurrection of the Napoleonic Empire in America."
[17:39:56] <LinearInterpol> Rust vs. Go.
[17:39:59] *** Quits: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com) (Quit: csherratt)
[17:40:02] * LinearInterpol dives for cover.
[17:40:06] <cmr> LinearInterpol: no
[17:40:09] <dylukes> nope.
[17:40:12] <luz> no
[17:40:25] <dylukes> Honestly, I like a lot of Go, but the lack of any sort of generics, etc makes it feel really weird to me.
[17:40:33] <cmr> dylukes: no!
[17:40:37] <dylukes> Like, it's straddling the boundary awkwardly. I'm cool with that in Python.
[17:40:39] <dylukes> But it's weird in Go.
[17:40:40] <cmr> let's just stop going there
[17:40:47] <dylukes> Ok. 
[17:40:49] <dylukes> Go is weird.
[17:40:52] <cmr> this exact conversation has played out a thousand times
[17:40:56] <dylukes> heh, I can imagine :p
[17:41:07] <LinearInterpol> couldn't resist, sorry guys. :P
[17:41:07] <SiegeLord> I like the subtle variations in wording ;)
[17:41:15] <dylukes> Quick: Why is <language X> not more like Haskell??
[17:41:26] * LinearInterpol hides in the bushes.
[17:41:27] <sbalmos> because it's not Haskell
[17:41:41] <dylukes> sbalmos Why is Haskell not more like Haskell?
[17:42:00] *** Quits: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net) (Input/output error)
[17:42:05] <sbalmos> dylukes: Because of a domestic dispute
[17:42:11] <dylukes> ah ok
[17:42:35] <LinearInterpol> domestic dispute. lmfao.
[17:42:42] <olsonjeffery> It would be a real shame if Rust followed in the footsteps of <language/community I'm demagoguing for the purpose of this concern troll> and <made decision I don't agree with>.
[17:43:10] *** Joins: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net)
[17:43:33] <olsonjeffery> I just checked out <most recent Rust release> and found <thing that I don't like>. Let me know when Rust is <doing things the way I want>.
[17:43:33] <LinearInterpol> This is why <language X> will never truly compete with <language Y>: <arbitrary "flaw">
[17:44:02] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:44:20] *** Quits: Ferreus (ferreus@moz-999B6F0A.customers.d1-online.com) (Ping timeout)
[17:44:21] <dylukes> Quick, someone make "Code Against Humanity: the card game for horrible programmers"
[17:44:25] <olsonjeffery> How can rust possibly consider itself ready for primtime when it doesn't even <conflate library feature with language completeness>.
[17:44:25] <WebeWizard> Our standard libary doesn't include <method I want> because <other language> doesn't include it in their standard library
[17:44:30] <olsonjeffery> s/./?/
[17:44:33] <dylukes> http://enterprise-js.com
[17:44:37] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[17:44:39] <dylukes> Too bad theres no http://enterprise-rust.com
[17:44:53] *** Joins: mib_42u58t (Mibbit@moz-C12FB235.sdsl.bell.ca)
[17:44:57] *** Joins: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP)
[17:44:59] <olsonjeffery> ok. enough backhandedness from me. i duefully apologize.
[17:45:03] *** Quits: tikue (tkuehn@268C2DFE.FAD414BA.D74CC41D.IP) (Quit: tikue)
[17:45:04] <LinearInterpol> too bad there's no http://enterprise-${language}.com
[17:45:17] <sbalmos> enterprise-lcars.com
[17:45:31] *** Quits: Florob (Florob@moz-39532932.de) (Ping timeout)
[17:45:38] <luz> is http://www.reactivemanifesto.org/ a parody?
[17:46:02] <LinearInterpol> ...I'm.. hoping.
[17:46:07] *** Quits: bluz (blaz@moz-FF0B8E6D.ipredator.se) (Input/output error)
[17:46:21] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[17:46:26] <dylukes> luz what is this
[17:46:48] *** Joins: Florob (Florob@moz-39532932.de)
[17:46:49] *** Quits: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net) (Quit: Leaving.)
[17:47:45] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[17:47:49] <olsonjeffery> <disingenuous>I would rather be *proactive* than *reactive*</disingenuous>
[17:47:55] *** Joins: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de)
[17:48:05] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[17:48:56] <dylukes> brb to philosophy
[17:48:56] *** Quits: dylukes (dylukes@moz-7AB3779F.wireless.pitt.edu) (Quit: Textual IRC Client: www.textualapp.com)
[17:48:57] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Connection reset by peer)
[17:49:08] <LinearInterpol> jmp philosophy
[17:49:24] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[17:50:36] *** Quits: kanru (kanru@moz-99690620.hinet-ip.hinet.net) (Ping timeout)
[17:50:59] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[17:51:07] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[17:51:14] *** Joins: jhasse (jhass_000@moz-6F37A68B.ewe-ip-backbone.de)
[17:51:15] <bstrie> johnsoft: hello
[17:51:30] *** Quits: nobody (nobody@moz-7E09A266.neo.res.rr.com) (Quit: Leaving)
[17:51:37] <johnsoft> howdy
[17:51:57] <johnsoft> guess this is the business channel
[17:52:13] *** Quits: pauls (pauls@moz-7140CF01.ccs.neu.edu) (Ping timeout)
[17:52:19] <bstrie> we are all business here
[17:52:24] <bstrie> flippancy is entirely disallowed
[17:52:32] <bstrie> I am wearing a suit.
[17:52:51] <johnsoft> i believe everything you are telling me without question
[17:53:06] <bstrie> I believe that you believe everything that I am telling you without question
[17:53:32] <LinearInterpol> I love you guys.
[17:54:11] <johnsoft> anyways, i'm trying to write a curried adder function using closures
[17:54:27] <johnsoft> fn adder(x: int) -> |int| -> int { |y| x + y }
[17:54:29] *** Quits: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[17:54:51] *** Quits: benjamin__ (benjamin@moz-CAB4ED9.dip0.t-ipconnect.de) (Ping timeout)
[17:54:55] *** Joins: valenting (Thunderbir@moz-BD1A2D46.residential.rdsnet.ro)
[17:55:20] <johnsoft> but i'm getting an error about the lifetime
[17:55:44] <johnsoft> i assume it doesn't mean lifetime TV
[17:55:52] <bstrie> johnsoft: leave the jokes to us
[17:56:13] <johnsoft> o...ok.
[17:56:19] <bstrie> it seems like a lot of people are asking about closures today!
[17:56:27] <bstrie> maybe we need a tutorial or something
[17:56:44] <johnsoft> couldn't hurt
[17:57:18] <bstrie> let me fiddle with it
[17:57:32] *** Joins: igork (Adium@moz-578E0B8C.broadband.corbina.ru)
[17:57:40] *** Joins: FreeFull (freefull@moz-569D1032.as13285.net)
[17:58:03] <bstrie> haha
[17:58:09] <bstrie> wow that's actually a pretty awesome error message
[17:58:31] <bstrie> johnsoft: what version are you using?
[17:58:35] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:59:10] *** Quits: mouse (mouse@moz-373942D2.dhcp.yndx.net) (Ping timeout)
[17:59:12] *** Joins: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com)
[17:59:28] <johnsoft> yes it reminds me very much of stl bugs in c++
[17:59:33] <johnsoft> i'm on 0.9
[17:59:41] *** Joins: glaebhoerl (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP)
[17:59:45] <bstrie> no, this error message actually looks useful
[17:59:48] <bstrie> at least the one I'm getting
[18:00:15] *** Joins: refold (gman@moz-42D68426.a258.priv.bahnhof.se)
[18:00:39] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[18:00:39] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:00:54] <johnsoft> "...so that closure does not outlive its stack frame"
[18:01:03] *** Quits: nuts (tii@822A8E7E.6AD15BF5.75D3BBDB.IP) (Ping timeout)
[18:01:07] <johnsoft> what if i want it to outlive the stack frame?
[18:01:22] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[18:01:34] <bstrie> hm
[18:01:45] *** Quits: Kruppe (user@moz-B5BC6760.net.uwaterloo.ca) (Ping timeout)
[18:02:39] <pcwalton> johnsoft: it can't -- use a trait object instead, or a proc()
[18:02:40] *** Joins: glaebhoer1 (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP)
[18:02:43] <bstrie> johnsoft: closures live on the stack, so the problem is that when that function returns your closure's stack frame is destroyed
[18:02:58] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[18:03:02] <bstrie> johnsoft: it works with procs, but those can only be called once. which might not work for you
[18:03:11] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[18:03:13] *** Quits: Sharp (Sharp@moz-EEC85237.hsd1.ca.comcast.net) (Quit: Sharp)
[18:03:18] <bstrie> pcwalton: I'd be curious to see some documentation on using trait objects for this, it seems non-obvious to me
[18:03:26] *** Quits: moostik (Icedove@moz-53E05E9C.w92-151.abo.wanadoo.fr) (Ping timeout)
[18:03:26] *** Quits: glaebhoerl (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP) (Ping timeout)
[18:03:34] *** Quits: FreeFull (freefull@moz-569D1032.as13285.net) (Ping timeout)
[18:03:38] <pcwalton> bstrie: just put all your upvars in a struct and implement a call() method on that struct
[18:03:47] <pcwalton> it's fairly painful which is what unboxed closures will be for
[18:03:48] <johnsoft> pcwalton- a trait object as in, a struct with a method?
[18:03:53] <pcwalton> yeah
[18:04:00] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[18:04:04] <johnsoft> oops too slow, thanks, got it
[18:04:15] *** Quits: killerswan (kevin.cant@E9A7755D.F485DE6D.5604FD67.IP) (Ping timeout)
[18:04:45] <johnsoft> unboxed closures?
[18:05:07] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[18:05:18] <bstrie> echo that question, I'm unclear on what parts of fn reform have yet to be done
[18:05:25] <bstrie> or need to be redone
[18:05:31] *** Joins: ninechars (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP)
[18:05:46] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[18:05:56] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[18:06:25] *** Quits: glaebhoer1 (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP) (Ping timeout)
[18:06:29] <johnsoft> i found &|y| x + y syntax in a group post, it didn't work
[18:06:35] <johnsoft> why can procs only be called once?
[18:06:49] <Eridius> johnsoft: because that's fundamental to how procs are designed
[18:07:02] <Eridius> they must be called only once in order to allow values to be moved into them from the environment
[18:07:15] <bstrie> johnsoft: so that linear types can be moved into them
[18:07:15] *** Joins: Ferreus (ferreus@moz-3B4D2092.pools.arcor-ip.net)
[18:07:31] <bstrie> they're the functional equivalent to linear values
[18:07:39] <Eridius> bstrie: aren't they affine types? Is there any truly linear type in rust?
[18:08:12] <bstrie> Eridius: I talked with nmatsakis about this once, and depending on how you look at it you can consider either to be true
[18:08:16] <olsonjeffery> linear just means it *must* be used once, affine means it *may* only be used once.
[18:08:22] <Eridius> bstrie: hmm. linear types confuse me slightly
[18:08:26] *** Joins: pauls (pauls@moz-7140CF01.ccs.neu.edu)
[18:08:38] <olsonjeffery> so the distinction is whether your compiler is configured to warn/error on unused values ;{
[18:08:40] <olsonjeffery> ;P
[18:08:41] <SiegeLord> I don't quite get that though... you could make a struct with an owned pointer and a call method, and you'll be able to call that method several times
[18:08:41] *** Joins: mib_7b2iyn (Mibbit@B0325B19.B303F028.3AC0C1AF.IP)
[18:08:43] <Eridius> olsonjeffery: hah!
[18:08:44] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[18:08:59] *** Quits: mib_7b2iyn (Mibbit@B0325B19.B303F028.3AC0C1AF.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:09:09] <Eridius> SiegeLord: the method is called with &self. If it took self you could only call it once
[18:09:10] *** Joins: noel (noel@moz-DD794775.as13285.net)
[18:09:20] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[18:09:29] <johnsoft> we're getting further into PLT than i can handle, methinks
[18:09:30] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:09:30] *** ChanServ sets mode: +ao brson brson
[18:09:31] <bstrie> the reason that you can consider rust as having linear rather than affine types is because we *do* use them at least once... everything has to go out of scope at some point
[18:09:35] <SiegeLord> Sure, but either way, the struct owns the pointer that got moved into it
[18:09:46] *** Quits: sigma (sigma@moz-9EAC972C.range86-184.btcentralplus.com) (Client exited)
[18:09:53] <SiegeLord> I don't quite get why proc's have the 'call method' take a self and not a &self
[18:09:56] <Eridius> bstrie: hmm.
[18:10:08] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[18:10:11] *** Joins: pzol (pzol@moz-553BEE64.dynamic.chello.pl)
[18:10:14] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Quit: ziad)
[18:10:25] <olsonjeffery> SiegeLord: because taking "value-self" consumes the self after invocation..
[18:10:26] <Eridius> SiegeLord: because otherwise they couldn't consume captured values
[18:10:46] *** ninechars is now known as glaebhoerl
[18:10:47] *** Parts: igork (Adium@moz-578E0B8C.broadband.corbina.ru) ()
[18:10:49] <olsonjeffery> thus enforcing its only called once. that's the compiler mechanism by which "once" is enforced.
[18:10:49] *** Joins: igork (Adium@moz-578E0B8C.broadband.corbina.ru)
[18:10:52] <johnsoft> is the pragmatic reason so closed-over vars are only destructed/dropped once?
[18:10:58] *** Parts: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP) ()
[18:11:03] <SiegeLord> That's just a circular way of saying they can only be called once
[18:11:14] <SiegeLord> I'm asking for the why
[18:11:40] <olsonjeffery> johnsoft: its about the compiler being able to enforce memory safety
[18:11:54] <olsonjeffery> so, yes.
[18:11:54] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[18:11:55] *** Quits: mib_xdblye (Mibbit@CF0E1B01.25BE8D68.F7A44A1B.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:12:15] <olsonjeffery> you can only ensure that a type closed over in a a given closure is destructed one time only if you only allow it to be invoked once
[18:12:22] <olsonjeffery> s/type/value/
[18:12:40] <SiegeLord> That's not true, as I showed with the struct example
[18:12:47] *** Quits: mib_42u58t (Mibbit@moz-C12FB235.sdsl.bell.ca) (Quit: http://www.mibbit.com ajax IRC Client)
[18:12:58] *** Quits: noel (noel@moz-DD794775.as13285.net) (Quit: noel)
[18:13:14] <johnsoft> what if those vars were destructed when the var containing the proc went out of scope, rather than the proc reaching the end of the block?
[18:13:34] *** Joins: FreeFull (freefull@moz-C6BCA20D.as13285.net)
[18:13:41] <olsonjeffery> SiegeLord: but in your example, the owned-box that lives in the struct doesn't get destructed when the method ends
[18:13:42] <Eridius> johnsoft: the proc can't go out of scope until it's done executing
[18:13:47] <olsonjeffery> it gets destructed when the struct's lifetime ends
[18:13:50] <bstrie> SiegeLord: I think it might have something to do with http://smallcultfollowing.com/babysteps/blog/2013/04/30/the-case-of-the-recurring-closure/ (note: old)
[18:13:54] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Input/output error)
[18:13:55] <SiegeLord> Why is that a good idea?
[18:14:03] <SiegeLord> I find niko's posts impenetrable :P
[18:14:12] <Eridius> SiegeLord: niko's posts are great
[18:14:17] <olsonjeffery> SiegeLord: also, if the method in that struct try to do something to end the owned-pointer's life before its own, the compiler would object because you'd be moving that owned-box out of the struct
[18:14:20] <johnsoft> Eridius- let x = proc(); x(); x(); /* x goes out of scope here */
[18:14:35] <Eridius> johnsoft: you can't do the second x()
[18:14:48] <bstrie> when you invoke a proc, you lose ownership of it
[18:16:01] *** Joins: awidegreen (awidegreen@moz-B6DD5BB1.a137.corp.bahnhof.se)
[18:16:11] <johnsoft> i'm talking more what-if
[18:16:48] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[18:17:08] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[18:17:42] <johnsoft> let i = 0; let x = proc() { i }; /* x gains ownership of i */ x(); /* don't destruct i just yet */ x(); /* x goes out of scope, so i is destructed */
[18:18:15] <johnsoft> i wish to be shown the holes in my reasoning :)
[18:18:22] <bstrie> johnsoft: iirc it's because of something like this: `let x = ~"hello"; let f = proc() { do_a_thing(x) }; f(); /* goodbye x */
[18:18:50] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[18:18:59] <Eridius> johnsoft: the first call to x() will "consume" x. It's a by-value call, so the body of the proc gains ownership, and when the proc is finished executing, x will destruct
[18:19:13] <Eridius> johnsoft: the second call to x() will trigger a compiler error, probably something on the order of "value is already moved"
[18:20:16] *** Quits: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com) (Quit: csherratt)
[18:20:56] <johnsoft> by-value call means the proc's "self" is by-value?
[18:21:01] <Eridius> yes
[18:21:20] <Eridius> you can pretend procs have a method `fn call(self)`
[18:21:27] *** Joins: cschneid (cschneid@moz-CA025D57.ip.mcleodusa.net)
[18:21:32] <Eridius> johnsoft: try running this: struct X; impl Drop for X { fn drop(&mut self) { println!("dropping X") } } fn main() { let i = X; let x = proc() { i }; x(); println!("after x()"); }
[18:21:33] <johnsoft> what's stopping it from being &self?
[18:21:40] <Eridius> this will print the drop message before x goes out of scope
[18:21:44] *** Joins: alan_andrade_ (uid23020@moz-31ABA2C0.irccloud.com)
[18:21:47] <Eridius> johnsoft: the definition of a proc
[18:22:18] <Eridius> johnsoft: you can implement a proc-like value yourself by using a trait object where the traint defines `fn call(self)`
[18:22:18] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:22:24] <Eridius> s/traint/trait/
[18:23:19] <cschneid> if I'm an experienced Ruby / Haskell programmer - what's the best quickstart guide for playing with Rust?
[18:23:20] <johnsoft> would the language lose anything by defining proc to take &self? (genuinely curious)
[18:23:54] <bstrie> cschneid: steveklabnik has some good stuff
[18:24:00] <bstrie> cschneid: see http://words.steveklabnik.com/a-30-minute-introduction-to-rust
[18:24:02] *** Joins: new_one (new_one@B317A076.68E6A41C.B3C0173E.IP)
[18:24:04] <olsonjeffery> cschneid: there's a wealth of information out there.. steveklabnik's Rust for Rubyists , the Rust Tutoriual itself, etc
[18:24:04] <Eridius> johnsoft: yes. it would no longer be able to consume captured affine values
[18:24:04] <bstrie> cschneid: also google "rust for rubyists"
[18:24:09] <cschneid> cool thanks
[18:24:18] <olsonjeffery> the wiki has a list of blog posts
[18:24:31] <sfackler> johnsoft: the proc body couldn't consume any of the closed over variables
[18:24:34] <cschneid> I know the language is changing fast - has the core stuff changed much, or is it on the fringes mostly? (ie, libraries being unstable)
[18:24:56] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[18:25:04] *** Joins: ziad (ziad@B20586FB.BDB3D91.6E370BFC.IP)
[18:25:10] *** Quits: autra (augustin@A14DAE84.7F753DD1.EE2CA32B.IP) (Ping timeout)
[18:25:17] <olsonjeffery> cschneid: depends on who you ask.
[18:25:19] <SiegeLord> It's still not clear why it's good for proc body to consume those variables... 
[18:25:21] *** Joins: killerswan (kevin.cant@E9A7755D.F485DE6D.5604FD67.IP)
[18:25:31] <olsonjeffery> most of the disruptive changes are done. but there are a few more coming (DSTs, for example)
[18:25:38] <cschneid> olsonjeffery: well, mostly - if I read blog posts about 0.7 or 0.8 versions, are they outdated, or still useful
[18:25:57] <olsonjeffery> lots of churn in the runtime/stdlib still as the APIs get updated to more current, idiomatic styles of Rust
[18:25:59] <bstrie> steveklabnik: when reading your post that tries to explain ownership via books, I get this sudden sinking feeling that you're really talking about burritos in spacesuits...
[18:25:59] *** Joins: dylukes (dylukes@moz-7AB3779F.wireless.pitt.edu)
[18:26:08] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[18:26:20] <SiegeLord> I assume struct with a &self call function will still be Send'able
[18:26:34] <SiegeLord> So you could send it to a different task and call it all you want
[18:26:40] <olsonjeffery> cschneid: API-wise id say they're outdated. syntax-wise, though, most of the important semantics from 0.8 still hold.
[18:26:57] <johnsoft> hmm, i might have to write up a post for the email list
[18:26:58] <Eridius> SiegeLord: sure, but you can't move any values out of the closure at that point
[18:27:14] *** Quits: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net) (Ping timeout)
[18:27:16] <cschneid> olsonjeffery: pointer types, and such have stayed similar/same?
[18:27:23] <SiegeLord> Eridius: And you can do that with a proc?
[18:27:30] <Eridius> SiegeLord: let's say I have a function `fn foo(s: ~str)`. I can say `let s = ~"test"; let x = proc() { foo(s) }; x()`
[18:27:36] <olsonjeffery> well, @-pointers are on their way out (in favor of library types)
[18:27:39] <Eridius> but I can _only_ do that because of by-value calling
[18:27:43] *** Joins: m_george (textual@moz-364496FE.hsd1.tn.comcast.net)
[18:27:49] <olsonjeffery> and some stuff w/ placement new is forthcoming that will possibly change ~
[18:27:52] <Eridius> SiegeLord: if procs were called with &self then foo(s) would be illegal because it would attempt to move out of a dereference of a & pointer
[18:27:55] <Eridius> which you cannot do
[18:28:02] <olsonjeffery> but the important stuff around lifetimes/references and bounds still holds
[18:28:09] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[18:28:32] *** Quits: FreeFull (freefull@moz-C6BCA20D.as13285.net) (Ping timeout)
[18:28:46] <Eridius> SiegeLord: if you try to do that right now using || foo(s) instead of proc() { foo(s) } you'll get an error
[18:28:52] <Eridius> "error: cannot move out of captured outer variable"
[18:28:57] <SiegeLord> Eridius: Ok, that makes sense. However... that's just if you want to call foo
[18:29:01] <Eridius> which is just a closure-specific variant of "cannot move out of dereference of & pointer"
[18:29:09] <SiegeLord> If you're not interested in moving things out of the closure, then it's all good
[18:29:57] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[18:29:57] *** ChanServ sets mode: +o tjc
[18:30:20] <SiegeLord> I guess I'm wondering if task::spawn requires that feature of it
[18:30:32] <SiegeLord> Or can it just take... T:Func+Send
[18:30:38] <olsonjeffery> a brief digression: trying to communicate Rust's value proposition to newcomers in 800 words or less is quite the constraint...
[18:30:41] <steveklabnik> bstrie: shhhh
[18:30:43] <steveklabnik> heheh
[18:30:44] <SiegeLord> With the hypothetical Func trait
[18:30:48] <Eridius> SiegeLord: task::spawn, by definition, will only call the proc once. So there's no need to be able to call it multiple times
[18:30:53] <steveklabnik> olsonjeffery: did you see the thing I just posted? i wonder how many words it is
[18:31:01] <Eridius> SiegeLord: but not being able to move captured values would be a pretty severe limitation on spawned tasks
[18:31:03] <olsonjeffery> the ptr tut?
[18:31:09] *** Quits: squiddy (squiddy@moz-189D9828.adsl.alicedsl.de) (Input/output error)
[18:31:12] <olsonjeffery> i use M-= in emacs
[18:31:18] <steveklabnik> olsonjeffery: nope: http://words.steveklabnik.com/a-30-minute-introduction-to-rust
[18:31:45] *** Joins: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net)
[18:32:48] <acrichto> steveklabnik: out of curiosity, how come you're always using channels to send data to child tasks instead of using closures
[18:32:49] * olsonjeffery resists the urge to pull a HackerNews and complain about the CSS
[18:33:02] <dylukes> What is foo.c
[18:33:05] <dylukes> in the compiler
[18:33:08] *** Joins: sellout (Adium@moz-76D71F1A.hlrn.qwest.net)
[18:33:12] <johnsoft> Eridius- what if values were only moved if you tried to move them, and borrowed if you tried to borrow them?
[18:33:31] <SiegeLord> I dunno... maybe you don't have a proc but you have a Send'able Func implementor
[18:33:36] <johnsoft> or would that be mixing stages of compilation?
[18:34:02] <olsonjeffery> steveklabnik: you owe nmatsakis royalties!
[18:34:03] <SiegeLord> I guess you can move it into a proc... but the extra allocation!
[18:34:24] <olsonjeffery> it is a great presentation, though.
[18:34:54] <Eridius> johnsoft: I don't follow. The act of creating a proc needs to move all the captured values into the proc
[18:34:58] *** Quits: Ferreus (ferreus@moz-3B4D2092.pools.arcor-ip.net) (Ping timeout)
[18:34:59] <bstrie> I like to troll the kudos counter on subtle
[18:35:06] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[18:35:08] <bstrie> let the circle get alllllmost full and then move away
[18:35:16] <Eridius> johnsoft: theoretically you could design a proc-like closure that let you explicitly annotate which values to move and which ones to borrow, but then the closure itself wouldn't be Sendable
[18:35:31] <dylukes> bstrie ^
[18:35:33] <Matthias247> acrichto: do you had a chance to read what I've written about IO in the issue?
[18:35:38] <dylukes> its pronounced svbtle bstrie 
[18:35:48] <dylukes> suh-vuh-buh-tlé
[18:35:52] <olsonjeffery> steveklabnik: a simple cut-and-paste into emacs says 2239 words
[18:35:56] <acrichto> Matthias247: I took a look at it, haven't digested it much yet though
[18:35:59] <dylukes> the first three syllables are pronounced as quickly as possible
[18:36:00] <SiegeLord> johnsoft: It seems to me that a 'Func' trait is likely, so proc won't be the only closure that can own its state
[18:36:03] <dylukes> the last one is drawn out
[18:36:10] <steveklabnik> acrichto: because of erlang etc
[18:36:15] <SiegeLord> It is now though, so one just has to deal
[18:36:16] <steveklabnik> dylukes: it's the source file i was writing in
[18:36:24] <bstrie> dylukes: if I ever get the chance to pronounce it I will surely use this guide
[18:36:30] <steveklabnik> olsonjeffery: absolutely. nmatsakis 's talk was so damn good
[18:36:44] <Matthias247> acrichto: ok. I play around with it a little more and will see where I'm getting
[18:36:54] <johnsoft> Eridius- i think it just clicked for me
[18:36:58] <dylukes> bstrie it sounds somewhere in between French and Nahuatl.
[18:37:12] <Eridius> johnsoft: oh good
[18:37:14] <johnsoft> i think what i really want is a sort-of &proc
[18:37:29] <Eridius> johnsoft: || -> T still exists, but of course it always borrows and never moves
[18:37:49] <Eridius> and yes, if you want more control, you're encouraged to create your own struct with a call() method and call call() on it
[18:37:52] <johnsoft> but like you said, i can make that myself
[18:38:02] <Eridius> and there has been talk of creating some standardized Func trait for this sort of thing
[18:38:08] *** Joins: dv (dv@4E84A121.6B684CF9.27E2265F.IP)
[18:38:29] <johnsoft> so impl MyStruct { fn call(&self) {} } is all you need to respond to function call syntax?
[18:38:31] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[18:38:39] <olsonjeffery> have a proc that returns a proc that curries your closed-over value?
[18:38:39] <bascule> lol @ arbitrary precision math rant
[18:38:59] <Eridius> johnsoft: no. The compiler doesn't know anything about that at this time
[18:39:04] <Eridius> johnsoft: but you can certainly say mystruct.call()
[18:39:07] <Eridius> instead of mystruct()
[18:39:12] <Matthias247> acrichto: i already hat the same discussion about that that with strcat yesterday that appeared today on reddit ;)
[18:39:30] *** Joins: rca_ (rcatolino@moz-1D2195F3.adsl.proxad.net)
[18:39:31] *** Quits: pzol (pzol@moz-553BEE64.dynamic.chello.pl) (Ping timeout)
[18:39:36] <johnsoft> oh. well, good enough i suppose
[18:39:47] <johnsoft> thanks for talking me through it :)
[18:39:48] *** Quits: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net) (Input/output error)
[18:39:58] *** Joins: pzol (pzol@moz-553BEE64.dynamic.chello.pl)
[18:40:09] *** Quits: rca (rcatolino@moz-5C941ACC.adsl.proxad.net) (Ping timeout)
[18:41:41] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[18:41:46] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:42:54] *** Quits: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca) (Quit: canhtak)
[18:43:00] *** Joins: lennart (lennart@moz-DE70D6F.stanford.edu)
[18:43:09] *** Joins: mib_8k60hn (Mibbit@moz-91A6551.xlate.ufl.edu)
[18:43:56] <nmatsakis> steveklabnik: I haven't read what you wrote fully yet, but it looked good when I skimmed it
[18:44:09] <steveklabnik> cool, thank you. and seriously, that talk was so good
[18:44:18] <steveklabnik> :D
[18:44:39] <LinearInterpol> steveklabnik: that was lovely!
[18:44:46] <steveklabnik> :metal:
[18:44:51] <mib_8k60hn> Can I take an immutable pointer from a mutable non-Freeze value?
[18:44:53] <LinearInterpol> haha.
[18:44:55] *** Quits: okard (okard@moz-23FFB3AD.dip0.t-ipconnect.de) (Ping timeout)
[18:44:55] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[18:45:19] <dylukes> I don't get this.
[18:45:25] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[18:45:25] *** ChanServ sets mode: +o tjc
[18:45:30] *** Quits: oberstet (quassel@moz-53D57230.dynamic.mnet-online.de) (Client exited)
[18:45:30] <dylukes> extra::json::Encoder has a constructor like this
[18:45:32] <dylukes> fn new<'a>(wr: &'a mut Writer) -> Encoder<'a>
[18:45:49] <dylukes> how can it accept a mutable borrowed pointer to Writer, when that writer is going to keep on existing elsewhere?
[18:45:53] <dylukes> It's not really "borrowing" it
[18:46:15] <dylukes> I get that the new Encoder has the same lifetime as the Writer... 
[18:46:21] <dylukes> is this allowing for one to interleave Encoders?
[18:46:34] *** Quits: refold (gman@moz-42D68426.a258.priv.bahnhof.se) (Quit: leaving)
[18:46:43] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[18:46:45] <Eridius> dylukes: the writer is going to keep existing elsewhere, but as long as the Encoder is in scope the writer is considered to be mutably borrowed
[18:46:47] <mib_8k60hn> dylukes: Doesn't that mean wr is mutable?
[18:46:56] <Eridius> dylukes: the lifetime 'a refers to the lifetime of the mutable borrow
[18:47:06] <mib_8k60hn> oH, nvm
[18:47:20] <mib_8k60hn> Explicit lifetimes, yay
[18:47:22] <dylukes> I thought when something is mutably borrowed it can't be used by anything else in the scope of the borrower?
[18:47:43] <Eridius> dylukes: well yes, as long as Encoder<'a> exists, the writer can't be used
[18:47:45] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:47:45] <dylukes> Will rustc emit an error if I try to make two encoders for one writer?
[18:47:48] <dylukes> ok.
[18:48:26] <dylukes> cool thanks :)
[18:48:28] *** Quits: dylukes (dylukes@moz-7AB3779F.wireless.pitt.edu) (Quit: Textual IRC Client: www.textualapp.com)
[18:49:01] <mib_8k60hn> Wow. That is amazing
[18:49:13] <mib_8k60hn> Why didn't C++ have this when it first came out?
[18:49:58] *** Joins: Ferreus (ferreus@moz-3B4D2092.pools.arcor-ip.net)
[18:50:01] <steveklabnik> is this true? https://news.ycombinator.com/item?id=7052488
[18:50:33] <Ms2ger> I doubt it
[18:51:48] <acrichto> steveklabnik: lifetimes prevent that
[18:52:04] <steveklabnik> i thought so
[18:52:06] <acrichto> steveklabnik: the lifetime of the &mut T in the closure is restricted to the closure, and you'll be given an error if you let it escape
[18:53:00] *** Quits: blank_name (blank_name@29F64526.16360A46.537E532E.IP) (Quit: leaving)
[18:53:10] <steveklabnik> yeah, i don't have a 0.9 compiler handy or I would have just tried it out
[18:53:30] *** Quits: igork (Adium@moz-578E0B8C.broadband.corbina.ru) (Quit: Leaving.)
[18:54:10] <marc_> steveklabnik: in your post you say "Rust copies the vector when it is sent through the channel" - I thought Chan worked by just moving the value into the receiver?
[18:54:13] <benh> It compiles but I think it returns a copy of the three-elem vecs
[18:54:27] <Eridius> acrichto: technically, he's not trying to let a &mut escape. It looks like he's actually trying to copy nums, without calling .clone()
[18:54:33] *** Quits: mib_8k60hn (Mibbit@moz-91A6551.xlate.ufl.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[18:54:51] <benh> if you change it to a ~-vec it'll complain about refusing to move out of the *nums derefernece
[18:54:58] <olsonjeffery> there are numerous things wrong with that example
[18:55:07] <olsonjeffery> eg return ~(*nums)
[18:55:25] <Tobba> is there any builtin for doing bitscans?
[18:55:32] <Tobba> I need it for my closest power of two detection
[18:55:42] *** Joins: igork (Adium@moz-578E0B8C.broadband.corbina.ru)
[18:55:54] *** Quits: derek_c (derek@moz-1AB923CD.fwd.datafoundry.com) (Quit: Leaving)
[18:56:17] *** Joins: blank_name (blank_name@29F64526.16360A46.537E532E.IP)
[18:57:15] *** Joins: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca)
[18:57:29] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[18:58:06] <WebeWizard> marc_ chan indeed makes a copy of the value sent
[18:58:40] <marc_> OK, thanks
[18:58:42] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[18:58:51] *** Joins: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net)
[18:59:01] <Matthias247> It depends on the type
[18:59:04] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[18:59:05] *** Joins: Sindwiller (quassel@moz-743130B2.dynamic.hispeed.ch)
[18:59:09] *** Joins: Sindwiller_ (quassel@moz-743130B2.dynamic.hispeed.ch)
[18:59:11] *** Quits: Sindwiller (quassel@moz-743130B2.dynamic.hispeed.ch) (Quit: http://quassel-irc.org - Chat comfortably. Anywhere.)
[18:59:12] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[18:59:26] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Quit: Leaving.)
[18:59:27] <WebeWizard> if you only want to send a reference to the receiver, you need to use Arc from the extra lib
[18:59:31] <Matthias247> POD types will be copied, others will be moved
[18:59:44] *** Quits: Sindwiller_ (quassel@moz-743130B2.dynamic.hispeed.ch) (Client exited)
[18:59:51] *** Quits: Ponderosa (Ponderosa@moz-B8A8DB32.onp-omron.com) (Quit: )
[19:00:13] *** Quits: pzol (pzol@moz-553BEE64.dynamic.chello.pl) (Ping timeout)
[19:00:14] *** Joins: okard (okard@moz-6D90BE39.dip0.t-ipconnect.de)
[19:00:45] <bstrie> steveklabnik: the line "which is the name of the package Rust implements channels with" is both kinda awkward and misleading... "Chan" isn't a "package"!
[19:00:45] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[19:00:49] *** Joins: pzol (pzol@moz-553BEE64.dynamic.chello.pl)
[19:00:58] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[19:01:06] <steveklabnik> hmmmmmm
[19:01:20] <steveklabnik> yeah, I maybe shouldn't use such generic terminology
[19:02:40] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[19:05:01] *** Joins: Fatalnix (bhodgins@moz-1F0BEDCC.static.gwi.net)
[19:05:06] <bstrie> steveklabnik: I'm also not sure that talking about unsafe is warranted here. makes the reader lose sight of the focus of the article, which is ownership
[19:05:07] <Fatalnix> bstrie: I made it!
[19:05:20] <steveklabnik> bstrie: writing a comment about this, one second
[19:06:04] <steveklabnik> https://news.ycombinator.com/item?id=7052596
[19:06:26] *** Joins: autra (augustin@moz-BE76895F.fbx.proxad.net)
[19:06:40] <Eridius> steveklabnik: as I put in my comment, I think a useful way to talk about it is as an escape hatch for implementing things the compiler cannot statically reason about
[19:06:58] *** Quits: autra (augustin@moz-BE76895F.fbx.proxad.net) (Quit: by!)
[19:07:10] *** Joins: autra_ (augustin@moz-BE76895F.fbx.proxad.net)
[19:07:39] *** Quits: awidegreen (awidegreen@moz-B6DD5BB1.a137.corp.bahnhof.se) (Ping timeout)
[19:08:17] <steveklabnik> right
[19:09:04] *** Quits: autra_ (augustin@moz-BE76895F.fbx.proxad.net) (Ping timeout)
[19:09:05] <bstrie> steveklabnik: ugh, I was about to tell you to actually link to the tutorial in the line " encourage you to check out the tutorial"
[19:09:13] <steveklabnik> i fied it
[19:09:14] <steveklabnik> fixed
[19:09:15] <bstrie> and then I realized that that IS a link, just completely invisible
[19:09:16] <steveklabnik> oh
[19:09:17] <steveklabnik> yeah
[19:09:22] <steveklabnik> i already tweeted at svbtle about it
[19:09:24] <bstrie> what a frustrating theme
[19:09:32] <Eridius> bstrie: it's a very svbtle link
[19:09:38] *** Joins: autra_ (augustin@moz-BE76895F.fbx.proxad.net)
[19:09:58] *** Joins: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr)
[19:10:00] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[19:10:16] <adridu59> what's using heap besides ~, ~[] and ~str?
[19:10:21] <Eridius> ~anything
[19:10:34] <kimundi> Rc and Gc
[19:10:37] <benh> @? malloc?
[19:10:37] <kimundi> proc
[19:10:46] <bstrie> benh: @ isn't a thing
[19:10:52] <bstrie> let us not speak of it
[19:10:56] <steveklabnik> hehe
[19:11:06] <adridu59> malloc isn't exposed in Rust afaik
[19:11:07] <kimundi> (it still is, but not for long :P)
[19:11:27] *** Joins: tetsuhar_ (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[19:11:42] <adridu59> also, what's different in Rc compared to Gc?
[19:11:43] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[19:11:50] <kimundi> adridu59: I think it is, as part of libc? We're just not using it
[19:11:55] *** Joins: SingingBoyo (SingingBoy@DA28FB90.A5D0D593.4F048BDC.IP)
[19:11:56] <steveklabnik> rc is reference counted, gc is garbage collected
[19:12:02] <adridu59> kimundi: right!
[19:12:12] <kimundi> adridu59: Rc uses reference counting for garbage collection, Gc will use a tracing garbage collector
[19:12:35] <kimundi> Rc destruction is deterministic
[19:12:49] <adridu59> so: tracing is everywhere a ref is created you track and tracing is you analyze and research references?
[19:13:10] *** Quits: tetsuhar_ (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[19:13:16] <adridu59> oh god, horrible wording
[19:13:22] <kimundi> Rc will leak if you make a cycle between non-weak ones, gc will handle cycles without a hitch
[19:13:47] <adridu59> what's a cycle, a loop?
[19:13:49] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[19:13:51] <SingingBoyo> where is println now?  build is failing with 'unresolved name 'println'' so I'm guessing it got moved
[19:14:00] <adridu59> SingingBoyo: println!
[19:14:00] <jhasse> SingingBoyo: pritnln!
[19:14:10] *** Joins: elan-workweek (elancaster@moz-7B0110AD.mv.mozilla.com)
[19:14:13] *** Joins: kgrandon (Adium@moz-C07D5168.p2p.sfo1.mozilla.com)
[19:14:13] <kimundi> adridu59: yes - a contains b, which contains a
[19:14:15] *** Joins: vikstrous1 (v@13F2CEC5.7672369.D8E68FF6.IP)
[19:14:19] *** Joins: avsej (avsej@D9A610B8.4841F515.FB33447D.IP)
[19:14:34] <adridu59> is there a warning if you use Rc in a loop?
[19:14:41] *** Joins: reuben (reuben@moz-DB4A9C19.scl3.mozilla.com)
[19:14:53] <Eridius> adridu59: why so emphatic?
[19:14:59] <Eridius> ;)_
[19:15:01] <Eridius> s/_//
[19:15:09] <kimundi> SingingBoyo: (Actual answer) println is still in std::io::println - it just got removed from the prelude because handling it with the central println! macro is simpler
[19:15:11] <SingingBoyo> adridu59: I think the type constraints Rc has currently prevent loops.
[19:15:18] <Eridius> SingingBoyo: that got relaxed
[19:15:37] <kimundi> adridu59: No, its not possible to detect that at compiletime without restricting it to much
[19:16:03] <adridu59> so would it silently leak?
[19:16:11] *** Joins: John-Galt (kris@moz-882434A3.hsd1.or.comcast.net)
[19:16:24] <kimundi> We had the constraint that you could only types in Rc that where either Send or Freeze - but that excluded useful patterns
[19:16:25] <Matthias247> cycles are not loops. You have a cycle when sth. in struct A references struct B and something in struct B would reference A
[19:16:46] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[19:16:49] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[19:16:50] *** ChanServ sets mode: +ao brson brson
[19:16:54] <kimundi> leaked memory is not memory unsafe, and there a few other ways to leak in Rust, so it made no sense to cripple Rc for that
[19:17:28] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[19:22:39] *** Joins: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr)
[19:22:56] <benh> kimundi: what other ways to leak are there?
[19:23:17] <kimundi> afaik you can put a channel inside itself or so
[19:24:33] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[19:25:14] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[19:25:36] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[19:25:43] <Tobba> is there any way to avoid this transmute?
[19:25:45] <Tobba> 		let mut _levels: [&[u8], ..8] = [&[], ..8];
[19:25:45] <Tobba> 		let mut levels: [&mut [u8], ..8] = unsafe{transmute(_levels)};
[19:26:02] <kimundi> yes, don't do that
[19:26:05] <Tobba> the array is initialized with non-empty arrays right afterwards
[19:26:09] <kimundi> turing a & into &mut is unsafe
[19:26:13] <Tobba> yeah no shit
[19:26:17] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[19:26:21] <Tobba> I cant really dodge it though
[19:26:31] <steveklabnik> isn't there a with_capacity method on vectors
[19:26:36] <steveklabnik> that lets you do something like that?
[19:26:37] <bstrie> steveklabnik: srsly this is completely unacceptable http://seleniac.org/verysubtle.png spot the link!
[19:26:37] <kimundi> is this just for initilaization unti a real value comes along?
[19:26:41] <Tobba> yeah
[19:26:51] <steveklabnik> bstrie: yup. as i said, pinged them.
[19:27:00] <Tobba> its initailized in the next line
[19:27:07] <kimundi> Tobba: we  have a intrinsic for that
[19:27:10] <geomyidae> std::unstable::intrinsics::uninit()
[19:27:12] <Tobba> oh good
[19:27:19] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[19:27:30] *** Quits: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP) (Client exited)
[19:27:33] *** Quits: achim (achim@moz-254418F2.dip0.t-ipconnect.de) (Quit: Computer has gone to sleep.)
[19:28:05] <Eridius> bstrie: ooh ooh I got it! There's no link because that's an image! ;)
[19:28:26] <bstrie> Eridius: no you're just not looking hard enough!!
[19:28:31] <hoverbear> Scumbag professor. "You can use any language you want for this project." Assigns a project that requires use of a Java library.
[19:28:43] <Eridius> Tobba: you can just say `let mut levels;` as long as you initialize it to a real value in all code paths before it's read
[19:28:56] <Tobba> hoverbear: use JNI in spite
[19:29:00] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[19:29:07] <bstrie> hoverbear: interface with it by shelling out to java :P
[19:29:13] <Eridius> `let mut levels; if foo() { levels = [1,2,3]; } else { levels = [4,5,6]; }`
[19:29:15] <hoverbear> bstrie: :3
[19:29:22] <Eridius> this also works without `mut`
[19:29:25] <Tobba> Ereidius: it was an array containing array
[19:29:35] <Tobba> it didnt really seem to approve of that
[19:29:57] *** Joins: awidegreen (awidegreen@moz-B6DD5BB1.a137.corp.bahnhof.se)
[19:30:07] <Eridius> Tobba: you'd have to show more code
[19:30:20] <Tobba> uninit() seems to be the most appropriate here
[19:30:41] <Eridius> Tobba: if you use uninit() you also need move_val_init() to avoid running the destructor on the uninitialized value
[19:30:52] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[19:31:04] *** jdm is now known as jdm|f00ding
[19:31:18] <Tobba> I can avoid initially initializing it
[19:31:25] <Tobba> but the compiler isnt sophisicated enough to detect a range()
[19:31:34] <Tobba> and complains about it being possibly uninitialized
[19:31:51] *** Quits: autra_ (augustin@moz-BE76895F.fbx.proxad.net) (Ping timeout)
[19:32:33] <steveklabnik> hoverbear: i had that happen
[19:32:42] <glaebhoerl> Tobba: I know repetition is the bane of our existence, but why not just write `&mut []` 8 times, if that number is fixed?
[19:32:45] <steveklabnik> "you can use whatever you want"
[19:32:45] <steveklabnik> "I hate python" *marks you down*
[19:32:46] <glaebhoerl> or am I misunderstanding the problem?
[19:33:10] <hoverbear> steveklabnik: Oh man, yeah, he had that bit too. "You can use whatever you want... But if you're using python it'll be too slow."
[19:34:03] <Matthias247> hoverbear: if it's a java library you could at least use scala and some other stuff ;)
[19:34:06] <Tobba> glaebhoer: that doesnt actually compile
[19:34:19] *** Joins: mouse (mouse@moz-32DFB3CF.broadband.corbina.ru)
[19:34:24] <hoverbear> Matthias247: Yeah, that's what I'm looking at.
[19:34:26] <Tobba> issue is if I initialize it to a mut it seems to try and copy it, which it cant
[19:34:36] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[19:34:55] <SingingBoyo> hoverbear: use clojure?  :D
[19:35:14] <hoverbear> SingingBoyo: I want to use Rust though :(
[19:35:39] <glaebhoerl> Tobba: `let mut levels: [&mut [u8], ..8] = [&mut [], &mut [], &mut [], &mut [], &mut [], &mut [], &mut [], &mut []];` this compiles fine here, though I didn't try to write any subsequent code using it
[19:35:48] <SingingBoyo> hoverbear: JN then?  think someone suggested that though
[19:35:57] <SingingBoyo> hoverbear: make that JNI
[19:36:14] *** Joins: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[19:36:26] <Tobba> wait, ah right
[19:36:34] <Tobba> I left the ..8 in
[19:36:37] <Eridius> Tobba: btw, what the heck is the point of `&mut []`? It's mutable but.. it's also empty. There's nothing to mutate
[19:36:40] <hoverbear> Tobba, SingingBoyo: JNI is a good idea, I'll have to figure out how to do it.
[19:36:56] <Tobba> Eridius: I need it initialized to something otherwise the compiler complains
[19:37:04] <Eridius> you're swapping out the arrays later?
[19:37:10] <Tobba> glaebhoer: yep, that worked
[19:37:15] <Tobba> its swapped out instantly afterwards
[19:37:44] *** Quits: SingingBoyo (SingingBoy@DA28FB90.A5D0D593.4F048BDC.IP) (Ping timeout)
[19:38:06] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Ping timeout)
[19:38:10] <Tobba> normally mutables arent copyable, but statically empty arrays probably should be
[19:38:21] <bstrie> steveklabnik: why is your svtbleicon a meeple
[19:38:47] <glaebhoerl> Tobba: iirc there was a similar issue with copyable variants of non-copyable enums, don't know if it was fixed (but think not)
[19:39:34] <steveklabnik> bstrie: this is my forearm: http://i.imgur.com/0xHtr.jpg
[19:39:52] *** Joins: moostik (Icedove@5A22E6A1.10715965.BCDF592F.IP)
[19:40:07] *** Joins: SingingBoyo (SingingBoy@moz-D32F7035.ubcsecure.wireless.ubc.ca)
[19:40:15] <bstrie> steveklabnik: that seems almost dystopian
[19:40:26] <bstrie> new carcassone expansion: "Carcassone: 1984"
[19:40:36] <chromatic> Carcassone: Paranoia
[19:40:47] <steveklabnik> ahahahah
[19:40:59] *** Quits: awidegreen (awidegreen@moz-B6DD5BB1.a137.corp.bahnhof.se) (Ping timeout)
[19:41:15] <bstrie> If you want a vision of the future, imagine a meeple stamping on a human face -- forever.
[19:41:16] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[19:41:22] <chromatic> "A new meeple has been activated. All hail the computer."
[19:41:31] <SingingBoyo> That's unfortunate.  I think my ssh daemon just went down.
[19:41:42] <bstrie> SingingBoyo: you seem to be taking it well
[19:41:56] <SingingBoyo> eh.  I've got class in 20 minutes anyway
[19:41:59] *** Joins: neokrish (Mibbit@moz-BA0FA134.hsd1.pa.comcast.net)
[19:42:05] <Tobba> asking again, are there any intrinsics/builtins for doing compare and swap operations or bitscans?
[19:42:42] *** Joins: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP)
[19:42:50] *** Quits: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP) (Quit: leaving)
[19:43:03] <neokrish> Hello!
[19:43:05] <bstrie> Tobba: we've got an instrinsics module somewhere you could root around in
[19:43:14] <o11c> Tobba: compile a .c file that uses the builtins to LLVM to get the LLVM intrinsic name, then grep in the intrinsic module?
[19:43:19] * SingingBoyo may need to find a way of remotely restarting ssh in case this happens again
[19:43:20] <bstrie> neokrish: hello!
[19:43:21] <acrichto> Tobba: take a look around https://github.com/mozilla/rust/blob/master/src/libstd/unstable/intrinsics.rs -- we have all of those
[19:43:47] <o11c> SingingBoyo: mosh?
[19:43:57] <bstrie> SingingBoyo: plug out and plug in the computer, let system init take care of that for you
[19:44:13] <o11c> SingingBoyo: ssh != sshd is important though
[19:44:31] <Tobba> oh shit I didnt know all these intrinsics existed
[19:44:49] <neokrish> I've been trying to build Rust for the past few days. Even did a clean install of my OS to see if that would help. But I keep hitting a wall. If someone could help me with one cryptic error I'm unable to decipher, it would a lot of help
[19:44:54] <fabiand> hey does someonek now if rust-opencl is somewhere used?
[19:45:13] <acrichto> neokrish: do you have a pastebin/gist of the output?
[19:45:13] <o11c> neokrish: it depends on whether you pastebin us the error or not
[19:45:13] <bstrie> neokrish: what OS?
[19:45:18] <jhasse> How can I let my thread (or program) sleep/delay in rust?
[19:45:22] <SingingBoyo> bstrie: difficult when it's my home desktop and I'm at school
[19:45:30] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[19:45:32] <acrichto> jhasse: take a look at std::io::timer
[19:45:37] <jhasse> acrichto: thx
[19:45:48] *** Quits: vikstrous1 (v@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[19:45:52] *** Quits: pzol (pzol@moz-553BEE64.dynamic.chello.pl) (Ping timeout)
[19:45:55] <bstrie> SingingBoyo: wire up an arduino with an actuator to toggle the switch on its power supply
[19:46:13] *** Quits: victorporof (victorporo@48342A5A.33FD6404.79933D60.IP) (Quit: victorporof)
[19:46:21] <o11c> SingingBoyo: well, a mosh session doesn't require ssh except for startup, and mosh sessions can survive pretty long disconnects
[19:47:02] *** Quits: glaebhoerl (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP) (Ping timeout)
[19:47:06] <SingingBoyo> bstrie: or I could just set up remote VirtualBox control...
[19:47:14] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[19:47:17] <SingingBoyo> given that it's a VM
[19:48:02] <SingingBoyo> o11c: yeah, might have to look into that.  The computer science building here has wifi problems though, so the disconnects can be ridiculous
[19:48:14] <o11c> that's mosh's best use case!
[19:48:49] *** Quits: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP) (Client exited)
[19:48:54] <bstrie> SingingBoyo: I hope you're also using tmux or screen so you don't lose all your stuff when you dc
[19:48:56] <neokrish> Mac OS 10.6.8. I understand 10.7 is listed as minimum OS level. But I did want to try before upgrading. I created pastebin - http://pastebin.com/V0MKS4vS
[19:49:11] *** Joins: vikstrous1 (v@13F2CEC5.7672369.D8E68FF6.IP)
[19:49:21] <SingingBoyo> bstrie: yup, screen should still be compiling rust for me
[19:49:44] *** Joins: rgawdzik (chatzilla@moz-4CB69E9E.net.uwaterloo.ca)
[19:50:02] <o11c> neokrish: This is you: http://thedailywtf.com/Articles/Classic-WTF-A-Misleading-Memory.aspx
[19:50:13] <rgawdzik> (I noob) Where are flags located in the src? For example, if I do rust --ls, where would i find the command binding for ls?
[19:50:18] <rgawdzik> *rustc --ls
[19:50:39] <bstrie> neokrish: I know there are people who want to support 10.6, but I'm not sure how much of a priority it is
[19:51:01] <bstrie> rgawdzik: good question
[19:51:26] <jhasse> Why does std::io::timer::Timer::new() return an Option?
[19:51:39] *** Quits: killerswan (kevin.cant@E9A7755D.F485DE6D.5604FD67.IP) (Connection reset by peer)
[19:52:07] *** Joins: pzol (pzol@moz-553BEE64.dynamic.chello.pl)
[19:52:11] *** Joins: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP)
[19:52:23] <acrichto> jhasse: not all runtimes may provide I/O such as timers
[19:52:45] <steveklabnik> bstrie: it's actually a matching tattoo with one of my best friends: http://instagram.com/p/iUK_WRhcUc/
[19:52:57] *** Quits: fabiand (fabiand@moz-1B9F8AAE.adsl.alicedsl.de) (Quit: Verlassend)
[19:53:04] <cmr> rgawdzik: src/librust/driver/driver.rs
[19:53:05] <jhasse> acrichto: ok, thx
[19:53:07] <cmr> librustc*
[19:53:24] *** Quits: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: brendan)
[19:53:39] *** Joins: heftig (heftig@moz-E5CB42A0.dip0.t-ipconnect.de)
[19:54:03] <Ms2ger> steveklabnik, ... is that a Carcassonne tattoo?
[19:54:07] <steveklabnik> yup
[19:54:31] <steveklabnik> i have the black meeple and she has the red one
[19:54:36] <bstrie> steveklabnik: I hope that you're really, really good at carcassone
[19:54:37] *** jdm|f00ding is now known as jdm
[19:54:45] <steveklabnik> it's actually not even my favorite board game
[19:54:47] *** Quits: SingingBoyo (SingingBoy@moz-D32F7035.ubcsecure.wireless.ubc.ca) (Ping timeout)
[19:54:54] <bstrie> like you show up to the tournament
[19:54:59] <steveklabnik> it's just very iconic
[19:55:02] <bstrie> rocking a friggin permanent tattoo
[19:55:07] <bstrie> get crushed in every game
[19:55:10] <bstrie> very embarrassing
[19:55:11] <steveklabnik> lol
[19:55:23] <hoverbear> steveklabnik: Matching board game tattoos, awesome.
[19:55:38] <steveklabnik> :)
[19:55:59] *** Quits: kgrandon (Adium@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: Leaving.)
[19:56:18] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[19:56:40] <bstrie> steveklabnik: you should add more friends to this group. and then create a pact that, when you die, all your skin will be stripped off to collectively create a macabre carcassone mural quilt
[19:56:46] <jhasse> How can I "do nothing" in a match branch? E.g. match t { Some(a) => some(), None => *nothing here* }
[19:56:51] *** Joins: SingingBoyo (SingingBoy@moz-D32F7035.ubcsecure.wireless.ubc.ca)
[19:56:52] <bstrie> the last one to survive gets to keep the quilt
[19:56:56] <rgawdzik> cmr: Thanks a bunch
[19:56:57] <bstrie> as a memory of their dear friends
[19:56:58] <steveklabnik> lmfao. wow. that is creeepy
[19:57:05] <steveklabnik> anyway, this is getting VERY offtopic
[19:57:10] <neokrish> o11c: I'm guessing the hint wasn't that I needed more memory on my machine? ( I do have just about the bare minimum 2GB, so I did wonder if that would cause build problems apart from a slow build)
[19:57:10] <steveklabnik> jhasse: ()
[19:57:18] <jhasse> steveklabnik: ahh. Thx :)
[19:57:32] *** Quits: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca) (Quit: canhtak)
[19:57:37] <bstrie> neokrish: hm, 2GB sounds like it should be just enough
[19:57:43] <bstrie> but I'm not sure if our memory usage has increased
[19:58:57] <neokrish> bstrie: Thanks. So, my takeaway is that it would be best to upgrade to 10.7+ and try again
[19:59:07] <bstrie> neokrish: yup, sorry
[19:59:29] <bstrie> neokrish: note though that I'm still not 100% sure that it will work with only 2gb
[19:59:36] <bstrie> our memory use tends to fluctuate
[19:59:55] <bstrie> really it's llvm's memory use... though we could be using it better
[20:00:13] *** Joins: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[20:00:42] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[20:01:00] <SingingBoyo> bstrie, neokrish: I've been fine for a while on a 2GB vm with a bit of swap space, so unless memory usage has jumped you should be fine.
[20:01:27] <neokrish> bstrie: Gotcha. Thanks for the help. I'll try upgrading the OS and see if that gets all the pre-reqs correct. I understand the 2GB might slow this down a bit. Will keep my fingers crossed otherwise.
[20:02:12] <bstrie> neokrish: thanks for your patience :)
[20:02:26] <neokrish> SingingBoyo: That's definitely comforting. I'll try the upgrade and let you all know the result! :)
[20:03:00] <o11c> neokrish: it's just that systems that are unsupported are unsupported, however you phrase your question
[20:03:02] *** Quits: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: brendan)
[20:04:06] *** Quits: doener (doener@moz-C68F600D.unity-media.net) (Quit: leaving)
[20:04:15] <neokrish> o11c: Yup. I feared that, but wanted to give it a shot and avoid an upgrade if I could.
[20:04:41] *** Quits: SingingBoyo (SingingBoy@moz-D32F7035.ubcsecure.wireless.ubc.ca) (Ping timeout)
[20:04:54] *** Quits: neokrish (Mibbit@moz-BA0FA134.hsd1.pa.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[20:05:25] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[20:05:45] *** Joins: guest45629 (fern@A81E881C.7943E25F.26528C0E.IP)
[20:06:01] *** Joins: killerswan (kevin.cant@E9A7755D.F485DE6D.5604FD67.IP)
[20:06:33] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[20:06:36] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[20:06:45] *** Quits: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP) (Ping timeout)
[20:06:45] *** Quits: paulproteus (quassel@199.199.210.158) (Ping timeout)
[20:07:08] *** Joins: paulproteus (quassel@458FE134.3EC36C88.CBDCF1DC.IP)
[20:07:42] *** Parts: guest45629 (fern@A81E881C.7943E25F.26528C0E.IP) ()
[20:08:03] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:10:14] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[20:10:22] *** Quits: rgawdzik (chatzilla@moz-4CB69E9E.net.uwaterloo.ca) (Client exited)
[20:11:28] *** Joins: dylukes (dylukes@5F5DE41.AF8B4D87.E8393EEB.IP)
[20:11:28] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[20:11:28] *** ChanServ sets mode: +ao brson brson
[20:11:29] *** Quits: dylukes (dylukes@5F5DE41.AF8B4D87.E8393EEB.IP) (Quit: dylukes)
[20:11:31] *** Joins: dylukes (dylukes@5F5DE41.AF8B4D87.E8393EEB.IP)
[20:11:57] <dylukes> So, @mut should now be Cell?
[20:11:57] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[20:12:14] <Ms2ger> Rc<RefCell<T>> is the usual replacement, I think
[20:12:29] <bstrie> dylukes: didn't I already tell you that @mut is bad and you should feel bad
[20:12:34] <dylukes> Yes XD
[20:12:36] <bstrie> well get ready to feel bad
[20:12:42] <dylukes> Oh god
[20:12:43] <bstrie> by typing Rc<RefCell<T>>
[20:12:47] <bstrie> over and over again
[20:12:48] <dylukes> :p
[20:12:56] <dylukes> Wait.
[20:13:01] <dylukes> Rc<RefCell<T>> ?
[20:13:02] <dylukes> Why.
[20:13:09] <dylukes> That's like.. @&mutT
[20:13:15] <dylukes> Looks like something I'd type out of anger.
[20:13:21] *** Joins: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca)
[20:13:50] <dylukes> Wouldn't you use RcMut there?
[20:13:55] *** Quits: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca) (Quit: canhtak)
[20:14:03] <cmr> RcMut doesn't exist anymore.
[20:14:09] <cmr> It's been replaced by Rc<RefCell<T>>
[20:14:12] <dylukes> It's in the changelog for 0.9???
[20:14:17] <cmr> rather than RcMut doing the dynamic borrow checks, RefCell does.
[20:14:24] <dylukes> no offense but that's horrible compared to @mut :\
[20:14:25] <nmatsakis> also, RefCell is not analagous to &mut
[20:14:33] <eddyb> dylukes: RefCell<T> isn't &mut T
[20:14:45] <dylukes> Is there any document outlining the new pointer types/cell types?
[20:14:52] <eddyb> it's (semantically) DynMut<T> or "mut T"
[20:14:56] <nmatsakis> dylukes: type RcMut<T> = Rc<RefCell<T>> makes it shorter if you prefer
[20:15:14] <nmatsakis> but more often than not,
[20:15:20] <nmatsakis> you ought to move the mutability into the fields
[20:15:35] <nmatsakis> e.g., Rc<T> where T is a struct like struct T { ... hp: Cell<uint> ... }
[20:15:42] <eddyb> nmatsakis: Rc<RefCell<Trait>> pls :)
[20:16:04] <eddyb> (not sure if it was explicitly mentioned in DST5, I hope it will work)
[20:16:14] <dylukes> Alrighty.
[20:16:22] <o11c> dylukes: that's a feature, not a bug
[20:16:28] <nmatsakis> eddyb: I didn't mention that explicitly .. I think it would work, though, have to look into it in detail
[20:16:32] <dylukes> I was just looking at a case like this
[20:16:33] <o11c> ugly things should be ugly
[20:16:55] <dylukes> nevermind
[20:17:00] <dylukes> anyways, thanks :)
[20:17:15] *** Joins: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca)
[20:17:22] <cmr> steveklabnik: so you talk about Arc, which is a way of sharing data, but not about sending a ~T, which avoids copies but retains ownership semantics.
[20:17:24] <dylukes> btw, stack allocating
[20:17:34] <dylukes> is it still Rust-endorsed (i.e. moreso than in C?)
[20:17:36] <steveklabnik> truth
[20:17:40] <dylukes> or is it now a "don't do it"
[20:17:43] <steveklabnik> dylukes: stack allocation is preferred
[20:17:45] <dylukes> okay.
[20:19:09] <dylukes> So, if a function takes &mut...
[20:19:18] <dylukes> er, &mut still exists?
[20:19:22] *** Joins: autra_ (augustin@moz-BE76895F.fbx.proxad.net)
[20:19:56] <kimundi> dylukes: yeah, &mut is integral to the language
[20:20:10] <kimundi> & and &mut is prtty much irreplecable at this point
[20:22:10] *** Joins: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net)
[20:24:12] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[20:25:15] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[20:25:39] <dylukes> 'error: use of undeclared module `extra::json`
[20:25:42] <dylukes> bloody hell
[20:25:54] <dylukes> I can even see the file in libextra *right there*
[20:26:25] *** Joins: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[20:26:32] <kimundi> did you extern mod extra; ?
[20:26:45] *** Quits: killerswan (kevin.cant@E9A7755D.F485DE6D.5604FD67.IP) (Ping timeout)
[20:28:08] <dylukes> There are other extra modules being used.
[20:28:16] <dylukes> this is in driver.rs in rustc :p
[20:28:27] <dylukes> optflag, which is from extra, is definitely working...
[20:28:57] <kimundi> hm, what exactly is trying to access extra::json where?
[20:29:08] <dylukes> I'm writing an AST emitting routine
[20:29:14] <dylukes> so it's just a toplevel in driver.rs
[20:29:15] *** Quits: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net) (Ping timeout)
[20:29:16] <kimundi> A use line, or a path in an expression?
[20:29:25] <dylukes> use line.
[20:29:28] <dylukes> json::Encoder(...)
[20:29:54] <dylukes> extra::json::Encoder(...) doesn't work either
[20:30:01] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[20:30:12] <kimundi> is the use and the expression in the same module?
[20:30:27] *** Quits: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Quit: msingle)
[20:30:29] *** Quits: jhasse (jhass_000@moz-6F37A68B.ewe-ip-backbone.de) (Quit: Verlassend)
[20:30:31] <dylukes> both are top level.
[20:30:38] <kimundi> try ::extra::json::Encoder(...)
[20:30:43] <dylukes> use's in the same block were necessary for std stuff
[20:30:53] <dylukes> I don't understand why, there are other things from extra being used just fine.
[20:30:59] <dylukes> Such as getopts.
[20:31:18] <kimundi> can you put it somewhere where I can take a look at the offending line?
[20:31:31] <dylukes> yeah one moment, still haven't worked out my pointers haha.
[20:34:07] <flaper87> mmh, how can I run libextra tests?
[20:34:17] <kimundi> make check-stage1-extra
[20:34:22] <flaper87> oh, ok
[20:34:28] <kimundi> or stage0, or stage2
[20:34:40] <kimundi> will build up to the libextra tests, and then run them
[20:35:03] * flaper87 still doesn't know what exactly those stages are
[20:35:09] <flaper87> kimundi: mind explaining ?
[20:35:09] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[20:35:11] <flaper87> :)
[20:35:19] * flaper87 always uses stage1
[20:35:20] <dylukes> oneliner pathological case kimundi 
[20:35:26] <dylukes> pub fn this_doesnt_work() { let c = json::Encoder(&::std::io::util::NullWriter()); () }
[20:35:34] <dylukes> with `use extra::json;` in the prelude.
[20:35:40] *** Quits: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP) (Quit: Taking a nap.)
[20:35:42] *** Joins: achim (achim@moz-254418F2.dip0.t-ipconnect.de)
[20:35:49] <dylukes> and the error is "621:26 error: unresolved name `json::Encoder`."
[20:36:29] <kimundi> stage0 == the downloaded snapshot compiler and downloaded snapshot libraries are used to build compiler and libraries from the current source 
[20:36:42] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[20:36:59] <dylukes> I don't understand kimundi  :<
[20:37:22] <dylukes> ::extra::json::Encoder doesn't work either :)
[20:37:30] <dylukes> It's like it doesn't exist...
[20:37:46] <rca_> dylukes: shouldn't it be Encoder::new() ?
[20:37:47] *** Joins: dogurness (dogurness@moz-1BF32EBD.pitbpa.fios.verizon.net)
[20:38:08] <kimundi> dylukes: Encoder actually is a newtype like struct, right?
[20:38:28] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[20:38:29] <dylukes> wow.
[20:38:30] <dylukes> that fixed it.
[20:38:33] <dylukes> really misleading error.
[20:38:52] <dylukes> and no, Encoder is just a plain struct.
[20:39:07] <dylukes> It's just a container for the writer :p.
[20:39:16] <kimundi> well, there is no function at the path "extra::json::Encoder" - though I get how the error message might sound confusing
[20:39:19] *** Quits: elan-workweek (elancaster@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[20:40:22] <flaper87> kimundi: danke
[20:40:48] <kimundi> stage1 == the compiler and libraries build with the old compiler and libraries are used to build compiler and libraries from the current source 
[20:41:05] <kimundi> stage2 == the compiler and libraries build with the new compiler and libraries are used to build compiler and libraries from the current source 
[20:41:39] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[20:41:48] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[20:41:59] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[20:42:05] *** Joins: elan-workweek (elancaster@moz-7B0110AD.mv.mozilla.com)
[20:42:36] <kimundi> basically, because the code of the compiler itself can change the output, it needs to push itself to 100% current code in three steps
[20:43:43] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[20:44:14] *** Joins: zakora (NC@moz-28181BF.fbx.proxad.net)
[20:44:15] *** Quits: zakora (NC@moz-28181BF.fbx.proxad.net) (Max SendQ exceeded)
[20:44:19] *** Joins: fabiand (fabiand@moz-1B9F8AAE.adsl.alicedsl.de)
[20:44:42] *** Joins: zakora (NC@moz-28181BF.fbx.proxad.net)
[20:45:12] <flaper87> kimundi: understood, thanks a lot!
[20:46:02] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[20:47:43] *** Quits: achim (achim@moz-254418F2.dip0.t-ipconnect.de) (Quit: Computer has gone to sleep.)
[20:47:45] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[20:48:26] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[20:48:44] *** Joins: msingle (yaaic@moz-930E5D97.hr.hr.cox.net)
[20:48:49] *** Quits: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP) (Ping timeout)
[20:49:33] *** Joins: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP)
[20:50:44] *** Quits: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net) (Quit: Leaving)
[20:51:03] *** Quits: msingle (yaaic@moz-930E5D97.hr.hr.cox.net) (Quit: Yaaic - Yet another Android IRC client - http://www.yaaic.org)
[20:51:56] *** Joins: kris (kris@moz-6D20263F.fullrate.dk)
[20:52:03] *** Joins: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP)
[20:53:21] *** Joins: pcwalton (pcwalton@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[20:53:21] *** ChanServ sets mode: +ao pcwalton pcwalton
[20:54:43] *** Joins: lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net)
[20:54:49] <Fatalnix> Okay, so my first impression of rust is: OMG there's so much STUFF to DO!
[20:55:02] <Fatalnix> That is what I decided.
[20:56:15] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Ping timeout)
[20:56:57] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[20:57:12] <kimundi> Fatalnix: Hm? what do you mean? :)
[20:57:37] *** Joins: mhenretty (sid11899@moz-5F4AA75A.irccloud.com)
[20:57:45] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Quit: Leaving.)
[20:57:47] <Fatalnix> kimundi: I just got excited.
[20:57:48] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[20:57:53] *** Joins: msingle (yaaic@moz-930E5D97.hr.hr.cox.net)
[20:58:01] <kimundi> haha, alright
[20:58:08] <Fatalnix> Like, ever get so excited you can't wait to get out of work?
[20:58:30] <Fatalnix> and you get so excited about it that as soon as you get out of work you forget about it and wake up the next morning thinking crap, I forgot to do that!
[20:59:01] <kimundi> heh, I guess I know that feeling  :)
[20:59:06] *** Joins: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP)
[20:59:45] *** Quits: msingle (yaaic@moz-930E5D97.hr.hr.cox.net) (Quit: Yaaic - Yet another Android IRC client - http://www.yaaic.org)
[21:00:10] <sw17ch> so, i was just reading over the "Is Non-Blocking IO Possible in Rust" topic on reddit.com/r/rust and i'm wondering if the solution isn't necessarily non-blocking IO but separation of the read/write operations into separate objects? For example, rather than having TcpAcceptor.accept return Option<TcpStream>, it could return Option<(TcpReadStream, TcpWriteStream)>.
[21:00:31] <sw17ch> Then, in this same vein, I'm wondering if this paradigm couldn't be extended to most IO handles.
[21:00:57] *** Quits: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP) (Ping timeout)
[21:01:08] <sw17ch> It seems to me that this would enable a model allowing a thread on the reader, a thread on the writer, and a cluster of threads assigned the role of processing requests and sending them to the writer
[21:01:23] <sw17ch> This make sense to any one, or is this an old theory?
[21:02:55] *** Quits: jix (jix@moz-D969BFFC.de) (Ping timeout)
[21:02:59] <bascule> sw17ch: I'd like that in general too
[21:03:04] *** Quits: zakora (NC@moz-28181BF.fbx.proxad.net) (Quit: Textual IRC Client: www.textualapp.com)
[21:03:17] *** Quits: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com) (Ping timeout)
[21:03:21] <bascule> sw17ch: I've run into ownership issues trying to separate read and write concerns
[21:03:40] <pcwalton> yes, that's the "split" proposal
[21:03:47] <pcwalton> "select" would also work
[21:04:06] <sw17ch> pcwalton: i think i much prefer the "split" proposal to "select"
[21:04:15] <sw17ch> "split" in addition to an async API
[21:04:18] <pcwalton> select is more flexible
[21:04:22] <Matthias247> both have their pros and cons
[21:04:39] <sw17ch> I suppose it is.
[21:04:58] <Matthias247> I'm working a little bit on the select tyle
[21:05:00] <Matthias247> style
[21:05:21] <Matthias247> don't know yet if it will result an usuable API ;)
[21:05:26] *** Joins: jix (jix@moz-D969BFFC.de)
[21:05:27] <brson> i wonder if split con be implemented on top of select
[21:05:42] <sw17ch> I may be severely Stockholm Syndrom'ed by Haskell, but having 'select' behavior modeled in green threads has felt less painful to me than using select.
[21:05:59] <sw17ch> I'd think you could do either in terms of the other, no brson?
[21:06:00] <brson> aiui it's not a common pattern in C to read and write to streams from seperate threads, but i haven't done much i/o programming
[21:06:31] <Matthias247> it's quite common. Many old applications use a dedicated read thread
[21:06:46] <Ms2ger> In my experience, everything is on the main thread :)
[21:06:50] <sw17ch> brson: i model most of my socket work that way--even in embedded applications
[21:06:53] <Matthias247> And it's also that what I have done for a long time ;)
[21:07:49] <Matthias247> In the meantime I like the async/select style better. Less thread synchronization to do
[21:08:12] <sw17ch> Is there a reason not to support all of them?
[21:08:21] <sw17ch> other than the work it would take?
[21:08:32] <sw17ch> are they mutually exclusive?
[21:08:50] <Matthias247> no, they are not, C also allows both
[21:09:04] <Matthias247> the question is if you can build a good high level api that allows both things
[21:09:16] <brson> sw17ch: thanks, i didn't know
[21:09:20] <bstrie> Ms2ger: https://twitter.com/horse_js/status/390835148293304320
[21:09:28] *** Quits: jackneill (jackneill@moz-985E4FF7.pool.digikabel.hu) (Ping timeout)
[21:09:41] <dylukes> Hm
[21:09:44] <Ms2ger> Are you @horse_js?
[21:09:48] *** Quits: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: brendan)
[21:09:48] <dylukes> so @"foo" is still being used in the compiler?
[21:09:54] <bstrie> Ms2ger: I'll never tell
[21:09:55] <dylukes> was that for interning or something?
[21:10:14] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[21:10:55] <dylukes> Matthias247 I think the answer is: don't
[21:11:04] <dylukes> build a low level api that facilitates building both high level APIs
[21:11:17] <bstrie> the subscriber count to /r/rust marches ever higher
[21:11:25] <bstrie> /r/lua has long since been crushed beneath our heel
[21:11:27] <Matthias247> dylukes: yes, but that would be an 1:1 unsafe wrap of the C API
[21:11:29] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[21:11:30] <bstrie> we're coming for you next, /r/scala
[21:11:47] <Matthias247> which has the problem that it is not even consistent across OS
[21:11:51] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[21:11:54] <Ms2ger> Let's write a game called Scala
[21:11:56] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[21:12:07] <bstrie> Ms2ger: it should have the crafting of DayZ and the combat of Minecraft
[21:12:59] <sw17ch> the overlap of /r/rust and /r/playrust has muddled many of my work conversations
[21:13:14] *** Joins: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com)
[21:13:31] <Taneb> sw17ch, what's /r/playrust about?
[21:13:41] <Ms2ger> A game called Rust
[21:13:43] <Matthias247> I have written some of my thoughts about async/select API into the github issue. Feel free to comment :)
[21:13:45] <bstrie> sw17ch: "did you hear that the implemented pistols in rust?" "what, is that a new pointer type?"
[21:13:52] <sw17ch> And the characterization "it's a little buggy, still under lots of development, isn't ready for a full release yet, and shows tremendous promise" applies to both.
[21:13:58] <kimundi> dylukes: Less interning, more "There was a time in Rusts history when all pointers where managed ones. Rewriting all code to ~ once they existed was to bothersome."
[21:14:09] <kimundi> too*
[21:14:11] <Tobba> I think I'm gonna call my kernel Oxide just to increase the rust/playrust confusion
[21:14:17] <Tobba> theres a popular modding API named oxide apparently
[21:14:31] <bstrie> I'm pissed that the game will try to take all our good rust-themed names
[21:14:33] <kimundi> Tobba: Sounds great!
[21:14:34] <bstrie> we have to strike preemptively
[21:14:40] <kimundi> Indeed
[21:14:42] <sw17ch> bstrie: I need an excuse to write a Rust library named "airdrop" now
[21:14:44] <bstrie> quick, everyone make empty github repos with the best names you can think of
[21:14:59] *** Quits: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[21:15:00] <Matthias247> sw17ch: be aware to net get sued by apple then ;)
[21:15:09] <kimundi> Everyone, pull your metallurgy textbooks and starting looking for names!
[21:15:18] <sw17ch> Matthias247: huh, didn't even think of that one :)
[21:15:34] <sw17ch> kimundi: i happen to know two metallurgists but they both work with Uranium ingots :(
[21:15:52] *** Quits: dylukes (dylukes@5F5DE41.AF8B4D87.E8393EEB.IP) (Quit: Textual IRC Client: www.textualapp.com)
[21:16:07] *** Joins: SingingBoyo (SingingBoy@moz-BA08DB2A.ubcsecure.wireless.ubc.ca)
[21:16:07] <kimundi> Eh, Uranium oxide is a thing too :P
[21:16:44] <sw17ch> kimundi: if i'm not mistaken, that's the bit that makes uranium scary.
[21:16:44] <kimundi> This might make a nice obscure name based on oxydation: http://en.wikipedia.org/wiki/Yellowcake
[21:16:56] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[21:17:02] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[21:17:04] <sw17ch> and by scary, i mean the part that keeps an ingot from dissipating its heat faster than it builds up
[21:17:14] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[21:17:14] *** ChanServ sets mode: +ao dherman dherman
[21:17:18] <sw17ch> (pro tip: don't talk to metallurgists who work with uranium)
[21:17:25] <SingingBoyo> I think I need to go read the logs to figure out what's going on in here...
[21:18:11] <kimundi> SingingBoyo: "Finding good names / bad puns for rust libraries, based on oxidation"
[21:18:39] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:18:43] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[21:18:48] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[21:19:02] <pcwalton> brson: acrichto: getting a question on twitter about whether rust rt is fork safe
[21:19:11] <Matthias247> hmm, should better build something on aluminium or titanium ;)
[21:19:12] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:19:25] <lennart> thanks for reminding me to subscribe to the subreddit :)
[21:19:49] <acrichto> pcwalton: good question, it's not exactly designed with that in mind, but it might be coincidentally?
[21:19:55] *** Joins: ssbr (~ssbr@46FE74EC.C60FE7DC.4065847B.IP)
[21:20:02] <sw17ch> A quick look at libnative/io/net.rs and rt::rtio seems to imply that a split-tcp wouldn't be too hard, right?
[21:20:10] <pyon> What is the naming convention for static constants?
[21:20:19] <bstrie> pyon: NAME_THEM_LIKE_THIS
[21:20:22] <sw17ch> or is there a lot more magic under the hood here than self.fd being a unix socket?
[21:20:25] <pyon> bstrie: Thanks!
[21:20:25] <bstrie> sorry for shouting
[21:20:29] <eddyb> AKA_FAT_SNAKES
[21:20:29] <SingingBoyo> steel-utensils can be the dining philosopher solution.
[21:20:30] <acrichto> pcwalton: wouldn't you leak all file descriptors owned by other threads?
[21:20:37] <eddyb> CAN_WE_CALL_THEM_FAT_SNAKES_PLS?
[21:20:40] <pyon> bstrie: eddyb: No, no, I understsand. It is just code. :-)
[21:20:40] <pcwalton> acrichto: dunno, maybe
[21:20:48] *** Quits: elux (peter@B6F21F4B.1F20BC31.2170E5F.IP) (Quit: Bye!)
[21:21:00] <acrichto> pcwalton: also, if you only clone the current thread, a green scheduler would get wedged almost immediately b/c no one would be listening on other schedulers
[21:21:03] *** Quits: fabiand (fabiand@moz-1B9F8AAE.adsl.alicedsl.de) (Quit: Verlassend)
[21:21:09] <pcwalton> yeah
[21:21:27] <pyon> eddyb: :-)
[21:21:35] <Matthias247> sw17ch: I think close() is the problem
[21:22:24] <bstrie> pcwalton: who's asking? I don't see it tagged with #rustlang
[21:22:27] <Matthias247> it does not exist on the Trait and is currently called only on the destructor
[21:22:34] <pcwalton> bstrie: @evanphx
[21:22:55] <pcwalton> acrichto: there aren't any background threads if you use libnative though I assume?
[21:23:02] <pcwalton> and it doesn't use pid values from a grep
[21:23:13] <acrichto> pcwalton: there will be once we have native timers (but that's not necessarily set in stone)
[21:23:27] <acrichto> pcwalton: currently there are no background threads
[21:23:32] <pcwalton> ok
[21:23:44] <brson> pcwalton: it's not
[21:23:50] <sw17ch> Matthias247: i walked away from the keyboard for a moment and that hit me. one would need a reference count on the file descriptor
[21:23:57] *** Joins: mib_8xvowr (Mibbit@moz-4014DDC7.ga.at.cox.net)
[21:24:25] <Matthias247> sw17ch: yes. That's possible. But you still must be able to manually close the write end so that a read on the read end would unblock
[21:24:45] <brson> i'd be curious to hear about runtimes that are fork safe and what they do to ensure that
[21:24:59] <pcwalton> brson: apparently rubinius is
[21:25:00] <sw17ch> Matthias247: afaik, a closing socket unblocks a pending read or write, no?
[21:25:02] <pcwalton> he says it's a huge pain
[21:25:10] *** Joins: silven (quassel@moz-F81D3961.a328.priv.bahnhof.se)
[21:25:15] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[21:25:29] <Tobba> whats the return value of atomic_cxchg?
[21:25:32] <Tobba> the old value?
[21:25:37] *** Joins: io2 (io2@moz-871549F5.home.otenet.gr)
[21:25:38] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[21:25:38] *** ChanServ sets mode: +o tjc
[21:25:52] *** Quits: mouse (mouse@moz-32DFB3CF.broadband.corbina.ru) (Ping timeout)
[21:25:54] <Matthias247> sw17ch: with native sockets yes. With libuv I can imagine that accessing the other side would segfault afterwards. Because a close there equivalents a free
[21:25:55] *** Quits: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com) (Ping timeout)
[21:26:03] <silven> Hello rust. Just a short short question/notice: somearray[-1] passes by the compiler, shouldn't that be an error?
[21:26:09] <brson> pcwalton: with the native runtime it's possible that we are as forksafe as any other multithreaded program
[21:26:14] <brson> or if not, could get there
[21:26:23] <Matthias247> sw17ch: however I don't know the implementation there in detail
[21:26:30] *** Joins: mouse (mouse@moz-32DFB3CF.broadband.corbina.ru)
[21:27:41] <bstrie> silven: you're noticing that negative unsigned integers will wrap in rust :)
[21:27:50] <kimundi> silven: hat do you mean with passes?
[21:28:21] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[21:28:45] <bstrie> silven: we're still discussing whether or not this behavior is desirable, given the cost of the alternatives
[21:28:48] <silven> bstrie: the literal "-1" is an unsigned int? That doesn't sound right
[21:28:51] *** Quits: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca) (Quit: canhtak)
[21:28:55] <sw17ch> Matthias247: i now realize you (or some one) said this, but close being in the impl for Drop seems scary.
[21:29:18] *** Quits: autra_ (augustin@moz-BE76895F.fbx.proxad.net) (Ping timeout)
[21:29:19] <sw17ch> Matthias247: I agree that's a great place to ensure it happens, but seems that it should be a close-if-not-yet-closed
[21:29:20] <eddyb> silven: it becomes unsigned after - is applied, so it's hard to tell what's going on
[21:29:26] <bstrie> silven: I don't know whether or not it's inferred to be a uint in this context, but yes, -1 is a legal unsigned int
[21:29:30] *** Joins: eglimi (Mibbit@moz-C62C798E.cust.bluewin.ch)
[21:29:37] <eddyb> silven: changing the representation of an integer literal might allow a lint on that
[21:29:46] <Matthias247> sw17ch: I agree
[21:29:55] <pyon> Does Rust accept C-style "broken string literals": assert!(hope_we_didnt_derp(), "this is a very" "long string literal");
[21:29:56] <pyon> ?
[21:29:56] <eddyb> or maybe negating an uint in general?
[21:30:00] <SingingBoyo> rusti: let x:uint = -1; x 
[21:30:01] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[21:30:06] <bstrie> rusti isn't here!
[21:30:10] <eddyb> pyon: nope
[21:30:19] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[21:30:19] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[21:30:21] <SingingBoyo> bstrie: rusti's never here anymore :/
[21:30:45] <sw17ch> Matthias247: and that writing/reading to a closed socket should fail! or be None in Option<t>
[21:30:46] <bstrie> pyon: you can just wrap string literals in rust and the compiler won't care. if you end the line with a backslash, it will also silently eat all the whitespace
[21:30:46] * SingingBoyo wonders if he could get it running from his home desktop
[21:30:50] <kimundi> pyon: concat!("foo" "bar")
[21:30:59] <SingingBoyo> I mean I never turn it off anyway...
[21:31:09] <Matthias247> sw17ch: IoError in IoResult :-)
[21:31:11] <kimundi> pyon: But you can also just linebreak in the string
[21:31:15] <sw17ch>  :)
[21:32:46] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[21:33:13] <SingingBoyo> anyone know where that repo with the rusti code/script stuff is?
[21:33:18] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Quit: Leaving...)
[21:33:31] <kimundi> playpen
[21:33:32] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[21:33:44] <kimundi> from thestinger
[21:33:53] <kimundi> (afaik)
[21:34:03] <SingingBoyo> kimundi: looks right, thanks
[21:34:44] <sw17ch> Matthias247: i honestly have no idea if i'm repeating things you know, but it appears to me as if close in libtnative/io/net.rs is just calling the cstdlib close
[21:34:52] *** Joins: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[21:35:34] <Matthias247> sw17ch: yes. But is' only called in Drop for TcpStream
[21:35:39] <steveklabnik> SingingBoyo: you might also like https://github.com/tarcieri/irust
[21:35:41] <Matthias247> at least in my version ;)
[21:36:01] <sw17ch> Matthias247: yup, mine too. 
[21:36:08] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[21:36:38] <Matthias247> to have it save the fd must be reset and the other functions would have to check it on each invocation
[21:36:42] *** Quits: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP) (Ping timeout)
[21:36:46] *** Joins: iCe (seeker1705@moz-19012D9F.access.telenet.be)
[21:36:49] *** Joins: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca)
[21:37:00] <iCe> hey guys, is there any channel to advertise new servers on?
[21:37:11] <Matthias247> at least I think so. Don't know what the OS will do if you do syscalls on invalid fds
[21:37:17] <SingingBoyo> steveklabnik: also interesting.  was really hoping to end up just being able to run the bot though.  ah well, maybe I have to set up another vm to make it easy and go from there.
[21:37:35] <bstrie> iCe: ...are you looking for Rust the game?
[21:37:36] <pyon> eddyb: bstrie: kimundi: ty!!
[21:37:47] <iCe> yea xD
[21:37:55] <pyon> More annoying questioning: How do I pattern-match a *reference* to a tuple struct?
[21:38:19] <sw17ch> Matthias247: what would the performance overhead be of boxing up the file descriptor in an Arc? seems that's at least one way to do it right (if not fast).
[21:38:20] <kimundi> iCe: Well, you've come to the wrong place then :)
[21:38:25] <sw17ch> the FD doesn't need to be mutable at all
[21:38:26] <SingingBoyo> iCe: This is for the rust programming language.  Check /r/playrust for reddit stuff, and you'd probably have better luck finding an IRC on freenode or QuakeNet
[21:38:44] <SingingBoyo> iCe: though freenode's #rust is the rust language as well
[21:39:00] <bstrie> steveklabnik: ping
[21:39:06] <steveklabnik> bstrie: sup
[21:39:17] <bstrie> steveklabnik: looks like rust for rubyists is still telling people to use the `rust` command-line tool?
[21:39:23] <steveklabnik> ugh
[21:39:26] <steveklabnik> i thought i removed all of those
[21:39:45] <bstrie> steveklabnik: http://www.rustforrubyists.com/book/chapter-05.html
[21:39:51] <bstrie> steveklabnik: try grepping for "rust"
[21:39:54] *** Quits: doomlord_ (servitor@moz-CA917A47.range86-184.btcentralplus.com) (Ping timeout)
[21:39:55] <bstrie> that should do it
[21:39:58] <steveklabnik> yeah
[21:40:02] <Matthias247> sw17ch: propably not much. But I currently don't know whether an ARC for the fd or a mutex for locking the whole struct would be more appropriate
[21:40:05] <steveklabnik> i did before, must have screwed it up :/
[21:40:36] <sw17ch> Matthias247: i'm shying away from the mutex because, unless i've Done It Wrong™ for the last few years, i think the OS takes care of that for you
[21:40:48] <sw17ch> the scarier part about the FD is reuse
[21:40:56] *** Joins: khodzha1 (khodzha@9BB3C301.EF9FA30D.CA6E2165.IP)
[21:40:59] <sw17ch> which i don't understand or know at the OS level
[21:41:02] <Matthias247> yep
[21:41:06] <mib_8xvowr> Can you explicitly call a value's destructor in Rust?
[21:41:13] <Matthias247> close and reopen and you could get the same fd again
[21:41:18] *** Quits: khodzha (khodzha@D40BD4BD.3E410295.CA6E2165.IP) (Ping timeout)
[21:41:24] <Matthias247> and then you write an somebody elses socket without noticing
[21:41:52] <acrichto> mib_8xvowr: drop(value)
[21:42:22] <Matthias247> sw17ch: however I currently try to play a little bit with async IO instead of trying to clone the socket and get it threadsafe\fs26
[21:42:55] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[21:43:03] *** Joins: maxiepoo_ (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[21:43:19] <pyon> Is there any way to get a *reference* to a field of a tuple struct?
[21:43:32] <pyon> Or do I have to use structs with named fields for this?
[21:43:47] <acrichto> pyon: let (ref foo, _, _) = (1, 2, 3);
[21:44:23] <pyon> acrichto: Aaaaaaaaaaaaah!
[21:44:23] <pyon> Thanks!
[21:44:33] *** Joins: Kruppe (user@moz-C8AED8C9.net.uwaterloo.ca)
[21:45:49] <pyon> acrichto: btw for a tuple, struct, would it be "let &Tuple(ref foo, _) = ref_to_struct;" ???
[21:46:00] <pyon> s/tuple, struct/tuple struct/
[21:46:22] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[21:46:43] <acrichto> pyon: indeed
[21:47:07] *** Quits: maxiepoo_ (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo_)
[21:47:40] <pyon> thanks!
[21:48:05] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[21:48:19] <mib_8xvowr> What would happen if a method called the destructor on &self?
[21:49:11] *** Joins: drewolson (Adium@961B4727.B2E7F80F.784188F5.IP)
[21:49:41] <drewolson> am i totally missing something or is there no documentation for the net package? i see references to it in blog posts but can't find it anywhere in the docs referenced from the webpage
[21:49:46] <pyon> mib_8xvowr: AFAIK you never call drop() directly.
[21:49:56] <ChrisMorgan> wycats_: there, I did eventually push that deriving-in-macro change from a few weeks ago that you were discussing yesterday: https://github.com/chris-morgan/rust-http/commit/55b071b76c348abd1fbc6a5631355a336d12abea
[21:50:03] <bstrie> pyon: but it's just a method, so you theoretically should be able to :P
[21:50:07] <ChrisMorgan> drewolson: you mean std::io::net?
[21:50:16] <drewolson> ah, that's it :)
[21:50:17] <bstrie> but not on &self, you'd need to own it to call the destructor on it
[21:50:26] *** Joins: jzcz (nick@moz-6E6530A2.rb.lax.centurytel.net)
[21:50:35] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:52:01] *** Quits: dbaupp (Thunderbir@moz-6002BAEA.lns20.syd6.internode.on.net) (Ping timeout)
[21:52:16] *** Joins: will_ (will@A40CA9CD.E6CB677E.689607DE.IP)
[21:52:23] *** will_ is now known as wcrichto
[21:53:03] *** Joins: maxiepoo_ (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[21:53:21] *** Quits: nkoep (nik@moz-6B6D2FFF.pool.mediaways.net) (Client exited)
[21:53:24] <pyon> bstrie: Ah!
[21:53:30] <Tobba> uh
[21:53:36] <Tobba> how is bitwise inversion done without ~
[21:53:41] <mcpherrin> Tobba: !
[21:53:44] <Tobba> agh
[21:53:46] <Tobba> ah*
[21:54:00] *** Quits: SingingBoyo (SingingBoy@moz-BA08DB2A.ubcsecure.wireless.ubc.ca) (Ping timeout)
[21:54:35] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Quit: Sharp)
[21:54:42] <bstrie> mcpherrin: !
[21:54:43] *** Quits: eglimi (Mibbit@moz-C62C798E.cust.bluewin.ch) (Quit: http://www.mibbit.com ajax IRC Client)
[21:54:54] *** Quits: dhedlund (dhedlund@moz-D5D07BE4.ptld.qwest.net) (Quit: ChatZilla 0.9.90.1 [Firefox 26.0/20131212154635])
[21:55:11] <mcpherrin> bstrie: !!!
[21:55:29] *** Parts: iCe (seeker1705@moz-19012D9F.access.telenet.be) ()
[21:56:28] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[21:56:40] *** Joins: Guest59077 (seeker1705@moz-19012D9F.access.telenet.be)
[21:57:27] *** Quits: heftig (heftig@moz-E5CB42A0.dip0.t-ipconnect.de) (Quit: Quitting)
[21:58:00] *** Joins: FlyingFoX (quassel@moz-8F529370.weh.rwth-aachen.de)
[21:59:16] *** Quits: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: brendan)
[22:00:14] *** Quits: Fatalnix (bhodgins@moz-1F0BEDCC.static.gwi.net) (Quit: Lost terminal)
[22:00:51] <carter> bjz: ++ on the num stuff :)
[22:01:03] <bjz> carter: :)
[22:01:09] *** Quits: pzol (pzol@moz-553BEE64.dynamic.chello.pl) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:01:09] <carter> bjz: did you see my tidket?
[22:01:10] <bjz> carter: super excited about it
[22:01:20] <bjz> carter: yeah, sorry for not replying
[22:01:23] <carter> np
[22:01:37] <carter> i guess you also can only have the classes that are sort of single parameter
[22:01:47] <bjz> carter: yeah I think they might be more trouble than they're worth for this particular thing
[22:01:51] <carter> yeah
[22:02:05] <bjz> but yeah, definitely for more complex stuff
[22:02:31] <carter> like, you don't really have a way of saying   "the algebra of formed by the group G coefffs in field F "
[22:02:39] <carter> because of single parameter traits right?
[22:02:56] * bjz is beginning to really wish operators weren't coupled to specific traits
[22:03:07] <bjz> hmm?
[22:03:24] <bjz> what do you mean, single parameter traits?
[22:03:30] *** Joins: AnimalMachine (AnimalMach@moz-C5E39CCE.wi.res.rr.com)
[22:03:34] <carter> yes
[22:03:35] <carter> well
[22:03:41] <bjz> I know that's a hasekll limitation - i think
[22:03:41] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[22:03:44] <carter> nope
[22:03:50] *** Quits: avsej (avsej@D9A610B8.4841F515.FB33447D.IP) (Ping timeout)
[22:03:50] <carter> haskell can have multiple parameters
[22:03:54] <bjz> oh ok
[22:03:54] *** Quits: mouse (mouse@moz-32DFB3CF.broadband.corbina.ru) (Ping timeout)
[22:04:16] <bjz> go ahead, explain :)
[22:04:22] <carter> rust traits can be defined on types with instatiated parameter
[22:04:40] *** Quits: Kruppe (user@moz-C8AED8C9.net.uwaterloo.ca) (Ping timeout)
[22:04:40] <carter> imple FOO for LIst<T>
[22:04:48] <carter> but you can't be like 
[22:05:23] *** Quits: drewolson (Adium@961B4727.B2E7F80F.784188F5.IP) (Quit: Leaving.)
[22:05:25] *** Joins: SingingBoyo (SingingBoy@moz-BA08DB2A.ubcsecure.wireless.ubc.ca)
[22:05:28] *** Joins: FreeFull (freefull@moz-7CCB1CA8.as13285.net)
[22:05:47] <carter> hrmm, the haskell algebra lib seems to only use single paramter stuff
[22:05:48] <carter> hangon
[22:05:58] <carter> http://hackage.haskell.org/package/algebra is one algebra type class lib in haskell
[22:06:05] *** Joins: skade (skade@moz-B73EE4D5.pools.arcor-ip.net)
[22:06:06] <bjz> I think it might be a ghc extension
[22:06:06] <carter> not perfect, and i don't use it, but it has some neat ideas
[22:06:09] <carter> yes
[22:06:10] <carter> well,
[22:06:14] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[22:06:16] <carter> no one codes in H98 :)
[22:06:29] <bjz> :)
[22:07:17] <bjz> we can do: trait A: B + C {} ?
[22:07:19] <carter> heres an example http://hackage.haskell.org/package/numeric-prelude-0.4.0.3/docs/src/Algebra-Module.html#C
[22:07:22] <carter> yes
[22:07:28] <carter> erm
[22:07:32] <carter> I think so
[22:07:39] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[22:07:40] <carter> so heres an exmaple in haskell
[22:07:41] <carter> class (Ring.C a, Additive.C v) => C a v where
[22:07:44] <carter> that'd be like 
[22:07:50] <carter> trait C : Additive + Ring
[22:07:58] <carter> IFFF
[22:08:01] <carter> a === v
[22:08:27] *** Joins: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[22:08:32] *** Joins: nical (nico@moz-4754F405.fbx.proxad.net)
[22:08:43] <bjz> that would be: trait<T: Ring> Module: Additive {}
[22:08:54] <carter> which would be?
[22:08:56] <carter> ok yeah
[22:09:03] <bjz> oh, woops
[22:09:08] <bjz> that would be: trait<T: Ring> Module<T>: Additive {}
[22:09:20] <carter> explain that notation more pelase
[22:09:27] <bjz> v is Self, T is a
[22:09:42] <carter> why is v self and t v?
[22:09:43] <bjz> wow that ordering
[22:09:49] <bjz> v is Self, a is T
[22:10:06] <carter> ok
[22:10:21] <mib_8xvowr> What would happen if an object owned the only Rc pointing to it and then destructed it? How could the object die while a method is still running on it?
[22:10:23] <nical> hi there, what's the easy way to create a, says, 512 chars long ~str filled with '\0' ?
[22:11:03] <bjz> carter: traits are defined kinda weirdly in Rust, they are always impled on a "Self". That's to make the method notation work
[22:11:09] <carter> yeah
[22:11:10] <carter> ok
[22:11:30] <bjz> carter: so: fn foo(&self) -> Self {} would get the Self type
[22:11:38] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[22:11:41] <bjz> (for self)
[22:11:47] <bstrie> nical: I wonder if `['\0', ..512].to_str();` would suffice
[22:11:52] *** Quits: gwty_ (gwtypc@6DBFAC54.62E8A8A5.137C914F.IP) (Connection reset by peer)
[22:11:54] *** Quits: gwty (gwtypc@6DBFAC54.62E8A8A5.137C914F.IP) (Connection reset by peer)
[22:12:03] <bstrie> wait no
[22:12:05] <bstrie> that's dumb!
[22:12:19] <bstrie> I'm sure there's a method to convert an array of u8 to a string, though
[22:12:24] <bstrie> maybe it's to_utf8()
[22:12:27] *** Parts: Guest59077 (seeker1705@moz-19012D9F.access.telenet.be) ()
[22:12:28] <bjz> carter: the first type param is implicit, to add other type parameters on, you need to make a parameter list
[22:12:30] <carter> bjz: but can I write only one instance per Self?
[22:12:31] *** Joins: drewolson (Adium@961B4727.B2E7F80F.784188F5.IP)
[22:12:35] <carter> ok
[22:12:47] <carter> or can i have Self and List, self and Vector
[22:12:48] <carter> etc 
[22:12:51] <carter> ?
[22:12:56] <carter> idk if my question makes sen
[22:12:58] <bjz> carter: yes.
[22:13:00] <carter> ok
[22:13:23] <bjz> carter: but it's hard to do impls for multiple types of the type params
[22:13:37] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[22:13:37] <carter> hard or "doesnt work"
[22:13:44] <bjz> doesn't work
[22:13:45] <bjz> :P
[22:13:47] *** Parts: drewolson (Adium@961B4727.B2E7F80F.784188F5.IP) ()
[22:13:47] <carter> ok
[22:13:49] <carter> are there tickets yet?
[22:13:51] *** Joins: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu)
[22:13:56] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[22:14:00] <bjz> I think pcwalton is interested in changing that
[22:14:01] <carter> does it work if you do explicitly type application?
[22:14:14] <nical> bstrie: it looks like it works
[22:14:20] <bjz> it works if you give th impl a concrete type
[22:14:22] <pcwalton> there is no way to work around the implicit fundep right now
[22:14:27] <carter> ok
[22:14:37] <pcwalton> niko and I are going to discuss it and finalize what we want to do for 1.0
[22:14:41] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[22:14:41] *** ChanServ sets mode: +ao dherman dherman
[22:14:46] <pcwalton> clearly what is there right now is too restrictive
[22:14:50] <carter> yay!
[22:14:51] <carter> ok
[22:14:53] <pcwalton> (e.g. you can't make custom hash functions)
[22:14:57] <carter> urk
[22:14:58] <carter> yeah
[22:15:02] <pcwalton> which is the biggest problem for systems programming
[22:15:09] *** Joins: gwty (gwtypc@3D97BDC1.C4000CA7.137C914F.IP)
[22:15:15] <bjz> pcwalton: specialisation for concrete types is a huge thing
[22:15:20] *** Joins: gwty_ (gwtypc@3D97BDC1.C4000CA7.137C914F.IP)
[22:15:21] <carter> i'd love to help make that nicer
[22:15:27] <pcwalton> I don't think we're ever going to support specialization
[22:15:28] <pcwalton> like C++
[22:15:29] <carter> (once i have a clone or something)
[22:15:40] <pcwalton> there are cleaner ways to do it in Haskell
[22:15:52] <carter> cleaner ways for which?
[22:15:55] <bjz> pcwalton: I'm also finding that operators tied to traits might be causing trouble
[22:15:59] <pcwalton> specialization
[22:16:03] <carter> yeah
[22:16:11] <carter> bjz: you mean additive vs multiplicative stuff?
[22:16:24] <nical> bstrie: err actually I see what you meant, it builds fine but repints [ , , , , , , , , (...)
[22:16:36] *** Quits: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: brendan)
[22:16:42] <carter> or that mathematics reuses notation
[22:17:01] <bjz> carter: Well, to get an operator overload you need to impl a trait from std::ops
[22:17:10] <carter> erm?
[22:17:11] <carter> really?
[22:17:12] *** Quits: moostik (Icedove@5A22E6A1.10715965.BCDF592F.IP) (Ping timeout)
[22:17:13] <carter> explain
[22:17:13] <bjz> like Mul<Rhs, Result>
[22:17:25] <Ms2ger> Dammit mathematics
[22:17:32] *** Joins: matthewbot (user@moz-C6814817.ga.at.cox.net)
[22:17:34] <pcwalton> the fundeps there just need to go away
[22:17:43] <pcwalton> you should be able to Mul<int,float> and Mul<int,int>
[22:17:45] <carter> fundeps where?
[22:17:46] <carter> yeah
[22:17:46] <bjz> which is annoying, because that ties everything to a trait with no semantic meaning
[22:17:55] <bjz> other than syntax
[22:18:07] <pcwalton> eh, I think that is the right way to do it
[22:18:12] <bjz> + is just a function
[22:18:14] <carter> what is?
[22:18:23] <pcwalton> using a trait there
[22:18:32] <carter> ok
[22:18:33] <pcwalton> sure, + is a function
[22:18:39] <pcwalton> it's an implicit function which has the signature
[22:19:10] <pcwalton> fn +<RHS,Result,LHS<LHS,Result>>(x: LHS: y: RHS) -> Result { x.add(y) }
[22:19:13] *** Joins: p0nce (ponce@moz-D65F4148.fbx.proxad.net)
[22:19:22] <pcwalton> err
[22:19:26] <pcwalton> fn +<RHS,Result,LHS<RHS,Result>>(x: LHS: y: RHS) -> Result { x.add(y) }
[22:19:39] <pcwalton> fn +<RHS,Result,LHS<RHS,Result>>(x: &LHS: y: &RHS) -> Result { x.add(y) }
[22:19:39] *** Joins: brandonw (brandonw@moz-B334F9B.dhcp.oxfr.ma.charter.com)
[22:19:40] <pcwalton> there :)
[22:20:03] <phil_> hi brson
[22:20:04] <phil_> err
[22:20:05] <phil_> brandonw: 
[22:20:12] <brandonw> hello
[22:20:16] <bjz> I don't understand, sorry :/
[22:20:21] *** Joins: \n (uid15310@moz-31ABA2C0.irccloud.com)
[22:20:28] <carter> ohh
[22:20:29] <carter> i see
[22:20:29] <pcwalton> you can think of + as a function that has an implementation in the prelude
[22:20:32] <pcwalton> with that signature
[22:20:34] <pcwalton> and implementation
[22:20:41] <nical> bstrie: thanks for the hint I found: let mut buffer: ~str = std::str::raw::from_utf8_owned(~[0, ..512]);
[22:20:55] <carter> and that LHS side is a hack to make it work despite lacking a solver currently?
[22:21:00] <\n> has anyone had luck with rust vim support, I've had no luck with: https://github.com/mozilla/rust/wiki/Doc-vim-support ?
[22:21:08] <pcwalton> I don't know of any hacks
[22:21:12] <carter> ok
[22:21:13] <pcwalton> it's just that
[22:21:19] <pcwalton> there is basically a fundep right now
[22:21:24] <carter> yeah
[22:21:25] <pcwalton> LHS -> (RHS, Result)
[22:21:30] <pcwalton> because of how coherence works
[22:21:30] <carter> wait, rust can express fundeps?
[22:21:34] <bjz> pcwalton: do you mean: fn (+)<RHS,Result,LHS: Add<RHS,Result>>(x: &LHS: y: &RHS) -> Result { x.add(y) }
[22:21:35] <pcwalton> there is always a fundep
[22:21:41] <pcwalton> yeah
[22:21:45] <bjz> ahhh!
[22:21:46] <pcwalton> from Self -> other parameters
[22:21:47] <carter> no, i mean i didn't realize rust could express that much
[22:21:50] <pcwalton> in the multi parameter type classes
[22:21:53] <ChrisMorgan> \n: it's easiest if you use something like pathogen
[22:22:02] <pcwalton> we didn't really intentionally design it that way, it just happened ;)
[22:22:06] <carter> ok
[22:22:07] <pcwalton> we need to relax that restriction
[22:22:11] <carter> what restrictions?
[22:22:12] <pcwalton> because while the fundep is nice sometimes
[22:22:15] <bjz> pcwalton: I still find that concerning - we don't do that for any other function types
[22:22:18] <pcwalton> that there HAS to be a fundep
[22:22:24] <bjz> sorry, function Identifiers
[22:22:31] <\n> ChrisMorgan: vundle would work, if there was a repo for it
[22:22:34] <pcwalton> well, + has to be kind of magical because it has syntax
[22:22:50] <pcwalton> the question is whether you can make a new "+" and import it but I think that's fairly limited, no?
[22:23:01] <carter> why does infix have to have magic?
[22:23:04] <pcwalton> that would mean if you had your custom + in scope, you couldn't add integers and floats anymore
[22:23:04] *** Quits: Ferreus (ferreus@moz-3B4D2092.pools.arcor-ip.net) (Quit: WeeChat 0.4.2)
[22:23:10] <pcwalton> I just don't see the use
[22:23:15] <bjz> pcwalton: could we just have a bunch of definable operators?
[22:23:18] *** Quits: wcrichto (will@A40CA9CD.E6CB677E.689607DE.IP) (Ping timeout)
[22:23:19] <ChrisMorgan> \n: all you really need is to add src/etc/vim to 'runtimepath'
[22:23:32] <Ycros> definable operator downward sprial (see also: scala)
[22:23:33] *** Joins: wcrichto (will@moz-FFEC7B0.wv.cc.cmu.edu)
[22:23:41] <bjz> pcwalton: and no more? if your worried about folks going overboard?
[22:23:48] <carter> so can i add a new infix operator myself?
[22:23:50] <pcwalton> we could have user definable operators but it seems kinda low priority right now
[22:23:52] <pcwalton> no you can't
[22:23:54] *** Joins: heftig (heftig@moz-E5CB42A0.dip0.t-ipconnect.de)
[22:23:57] <carter> ;?
[22:24:00] <carter> :/
[22:24:02] <carter> ok
[22:24:05] <carter> is there a ticket for that?
[22:24:09] <pcwalton> not sure
[22:24:18] *** Quits: brandonw (brandonw@moz-B334F9B.dhcp.oxfr.ma.charter.com) (Quit: leaving)
[22:24:33] *** Joins: brandonw (brandonw@moz-B334F9B.dhcp.oxfr.ma.charter.com)
[22:24:34] <carter> https://github.com/mozilla/rust/issues/8824
[22:24:34] <\n> ChrisMorgan: I did, no beans
[22:24:37] <carter> https://github.com/mozilla/rust/issues/2052
[22:24:54] <carter> umm
[22:24:57] <ChrisMorgan> \n: `set rtp+=/path/to/src/etc/vim` works just fine
[22:24:58] <carter> i guess not
[22:25:08] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[22:25:12] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[22:25:12] *** ChanServ sets mode: +ao dherman dherman
[22:25:20] <\n> oh, maybe I copied the dir as well, so it's nested too deep
[22:25:32] *** Parts: AnimalMachine (AnimalMach@moz-C5E39CCE.wi.res.rr.com) ()
[22:25:51] <carter> i'll write a stub ticket right now, g2g head off to dinner shortly
[22:25:52] <bjz> pcwalton: so, like trait Foo { fn (+)(a: &Self, b: &Self) -> Self; } would do the infix, but you could only do it for +, -, *, /, %, <<, >>, ... etc
[22:26:10] <carter> bjz: sounds like a feature needed for you math lib to get nice :)
[22:26:14] *** Quits: rca_ (rcatolino@moz-1D2195F3.adsl.proxad.net) (Ping timeout)
[22:26:19] <pcwalton> I disagree
[22:26:28] <pcwalton> why would you want to redefine +?
[22:26:38] <mcpherrin> Is there an equivalent of a "volatile" pointer somewhere? I want to make sure to write to a hardware register
[22:26:42] <bjz> pcwalton: well, it's more about abusing traits for syntax
[22:26:45] <\n> ChrisMorgan: yay, that was it
[22:26:46] <\n> ty
[22:26:48] <mcpherrin> Or should I just use an assembly function called from ffi?
[22:26:48] <pcwalton> it's not an abuse
[22:26:51] *** Quits: valenting (Thunderbir@moz-BD1A2D46.residential.rdsnet.ro) (Ping timeout)
[22:26:52] *** Joins: Ferreus (ferreus@moz-3B4D2092.pools.arcor-ip.net)
[22:26:58] *** Quits: Ferreus (ferreus@moz-3B4D2092.pools.arcor-ip.net) (Quit: Ferreus)
[22:27:08] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[22:27:09] <pcwalton> it's just how overloading is done in rust
[22:27:10] <pcwalton> fn (+)<RHS,Result,LHS: Add<RHS,Result>>(x: &LHS: y: &RHS) -> Result { x.add(y) }
[22:27:14] <pcwalton> that's what + looks like
[22:27:31] <carter> so i can't define a |-| tie figher operator currenlty
[22:27:35] <carter> right?
[22:27:38] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Quit: Leaving.)
[22:27:45] *** Quits: brandonw (brandonw@moz-B334F9B.dhcp.oxfr.ma.charter.com) (Quit: leaving)
[22:27:47] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[22:27:47] <pcwalton> that would be ambiguous anyway because of closures
[22:27:52] *** Parts: \n (uid15310@moz-31ABA2C0.irccloud.com) ()
[22:27:52] <carter> oh ok
[22:27:54] <pcwalton> if you overrode +
[22:28:00] <carter> \-/ ?
[22:28:02] <bjz> carter: yeah, we would not be able to do that
[22:28:04] <carter> ok
[22:28:08] <pcwalton> with something that doesn't have that implementation
[22:28:09] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:28:12] <pcwalton> you wouldn't be able to write
[22:28:19] *** Quits: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP) (Quit: restart)
[22:28:19] *** Joins: brandonw (brandonw@moz-B334F9B.dhcp.oxfr.ma.charter.com)
[22:28:22] <pcwalton> fn println("{} {}", 1 + 1, 1.0 + 1.0)
[22:28:24] <carter> i think the idea is you could do qualified imports of the standard defn
[22:28:26] <pcwalton> because that depends on + being overloaded
[22:28:32] <carter> and provide those instances to the new op
[22:28:44] <pcwalton> I just don't see the use
[22:28:49] <carter> could be
[22:28:52] <carter> just thinking out loud
[22:29:00] <carter> erm
[22:29:01] *** Quits: m_george (textual@moz-364496FE.hsd1.tn.comcast.net) (Ping timeout)
[22:29:06] <carter> wait
[22:29:11] *** Quits: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[22:29:12] <carter> whats fn println("{} {}", 1 + 1, 1.0 + 1.0) mean
[22:29:12] <carter> ?
[22:29:17] <bjz> pcwalton: I guess what I'm saying is, traits should be for semantics, not syntax.
[22:29:20] <pcwalton> sorry
[22:29:22] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[22:29:27] <pcwalton> println!("{} {}", 1 + 1, 1.0 + 1.0)
[22:29:32] <pcwalton> they are for semantics
[22:29:42] <pcwalton> the builtin syntax desugars to that function
[22:29:46] <carter> ok
[22:29:49] <pcwalton> fn (+)<RHS,Result,LHS: Add<RHS,Result>>(x: &LHS: y: &RHS) -> Result { x.add(y) }
[22:29:52] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[22:30:00] <jmgrosen> could someone explain when I'd want to use Rc vs Gc?
[22:30:02] <carter> sooo if someone gives an alt defn fo thr the standard stuff, that'd be a win
[22:30:03] <pcwalton> and then the overloading happens because of the way Add works
[22:30:17] <pcwalton> traits are how overloading works in Rust
[22:30:31] <pcwalton> Add is not a special case
[22:30:48] *** Quits: Ms2ger (Ms2ger@AA55AE55.592AEF45.F15B0BB3.IP) (Quit: nn)
[22:31:05] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[22:31:09] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[22:31:12] *** Joins: tbogdala (AnimalMach@moz-C5E39CCE.wi.res.rr.com)
[22:31:14] <carter> ok
[22:31:26] <carter> so you can't do a qualified reference to a trait?
[22:31:40] <carter> and then have a local trait with the same unqualified name/
[22:31:43] <bjz> pcwalton: https://github.com/bjz/num-rs/blob/master/src/lib.rs
[22:31:56] <Matthias247> jmgrosen: rc when you are sure that you have no cycles and want deterministic destruction. otherwise gc
[22:32:16] <carter> bjz: keep fighting the mathy fight, night all
[22:32:38] <jmgrosen> Matthias247: hmm, okay
[22:32:53] <bjz> pcwalton: basically I'm trying to keep strictly to semantics
[22:32:54] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[22:32:56] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[22:33:19] <bjz> pcwalton: but when you mix in the Add<T,U> trait it falls apart
[22:33:41] <bjz> pcwalton: I realise it's a specialised use case though
[22:33:44] *** Joins: mccr8 (mccr8@moz-BBE3ABD.mv.mozilla.com)
[22:34:22] <bjz> it makes more sense for Ord and Eq
[22:34:32] <bjz> anyway, I'll have a thing about it
[22:34:36] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[22:34:43] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[22:35:00] <bjz> pcwalton: #rust isn't really the place for this kind of thing
[22:35:00] <Matthias247> what is TrieMap? Is it a simple ordered map like std::map ?
[22:35:04] <pcwalton> so I don't see how redefining + is going to fix this
[22:35:44] <pcwalton> you need to have one + implementation in scope
[22:36:19] <bjz> pcwalton: I'll have a think about it - right now I have to head off
[22:36:29] <pcwalton> it's possible that modifying the coherence rules will fix this
[22:36:35] <bjz> pcwalton: I can see where you are coming from
[22:37:28] *** Joins: ecl3ctic (Mibbit@moz-E1FAD64C.wzfv1.vic.bigpond.net.au)
[22:37:41] <pcwalton> it seems like it's the same way Haskell does it
[22:37:43] <pcwalton> + is a part of Num
[22:37:54] *** Joins: kvanb (kvanb@moz-2C33D4E6.lnse3.lon.bigpond.net.au)
[22:38:07] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[22:38:31] <bjz> pcwalton: but haskell allows for extensibility with other numeric libs
[22:38:31] <erickt> Matthias247: see http://en.wikipedia.org/wiki/Trie
[22:38:40] <pcwalton> is that just a matter of not having the fundep?
[22:38:46] <pcwalton> because I want to get rid of that
[22:39:00] <bjz> pcwalton: if don't like the impl of Add in std, I don't need to import it
[22:40:04] <Matthias247> erickt: ok, thx. So only uint keys
[22:40:13] <pcwalton> oh, so you want to shadow + with your own +
[22:40:18] <bjz> pcwalton: haskell has had huge issue relating to Num, things that only came to light later
[22:40:42] <bjz> pcwalton: but they have got around it because things were extensible
[22:40:42] *** Joins: biardjd (kzzch@moz-BB97B490.washdc.fios.verizon.net)
[22:40:44] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[22:40:45] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[22:40:50] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[22:41:03] <pcwalton> if we have to add shadowable + I guess we can do it backwards compatibly
[22:41:05] <pcwalton> low priority for sure though
[22:41:36] <bjz> pcwalton: oh yeah, it would be backwards compatible yes.
[22:41:38] <biardjd> so i downloaded weechat source to get some idea of how to extend my embryonic irc client and then i hopped on reddit/r/rust and welp!
[22:42:06] *** Joins: lukem (Mibbit@moz-67A308A0.dyn.iinet.net.au)
[22:42:15] *** Joins: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[22:42:18] <bjz> pcwalton: anyway, #rust is not the place for this - if I have any more thoughts I'll write it up in a gist
[22:42:20] *** Joins: \n (uid15310@moz-31ABA2C0.irccloud.com)
[22:42:25] <pcwalton> ok
[22:42:33] <bjz> pcwalton: and I might find that you are indeed right
[22:42:40] *** Joins: moostik (Icedove@moz-53E05E9C.w92-151.abo.wanadoo.fr)
[22:42:43] <bjz> (always open to that)
[22:42:53] <bjz> :)
[22:42:54] <\n> has anyone blogged about rust-pkg?
[22:43:01] <bjz> tjc has
[22:43:19] <bjz> http://tim.dreamwidth.org/1820526.html
[22:43:26] <bjz> \n: ^
[22:43:27] <tjc> \n: Going back to April, most of my posts on http://tim.dreamwidth.org/tag/research are about rustpkg...
[22:43:36] <tjc> but I'm not sure how helpful they are; it's really more like a "what I did today" log
[22:43:51] <sw17ch> biardjd: https://github.com/mozilla/rust/issues/11165#issuecomment-32116120
[22:43:56] <sw17ch> biardjd: ^^ take a look at that workaround
[22:44:01] <\n> Just looking for a quick "how do I make my lib shareable"
[22:44:13] <\n> I'll probably write up something like that once I figure it out
[22:44:25] <\n> not sure if I need a lib dir or a lib.rs
[22:44:36] <lukem> hello
[22:45:02] <lukem> is there some good documentation on linking to external libraries with rust?
[22:45:29] <tjc> \n: if you want to install your library to someplace other than the default location, set your RUST_PATH environment to what you want the destination directory to be
[22:45:36] <tjc> the first entry will be taken as the place to put installed files
[22:45:45] <biardjd> uh, what is that a workaround for?
[22:45:47] *** Joins: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu)
[22:45:49] <ChrisMorgan> Has the different-filesystem-doesn't-work bug been fixed?
[22:45:53] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[22:46:02] *** Joins: gamakichi (Mibbit@moz-7DC6937F.range213-123.btcentralplus.com)
[22:46:05] <\n> tjc: why not /usr/local/lib/ ???
[22:46:08] <biardjd> never mind, i didn't copy the whole link
[22:46:21] <tjc> \n: because rustpkg is designed to encapsulate dependencies by default
[22:46:32] <sw17ch> biardjd: did that elp?
[22:46:38] <sw17ch> help*, or at least clarify
[22:46:39] <sw17ch> ?*
[22:46:40] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
[22:46:44] <sw17ch> keyboards and me are not friends today
[22:46:56] <tjc> (you can force the other behavior with RUST_PATH=/usr/local:...)
[22:47:06] <biardjd> thanks, it's cool, i only copied a bit of the link and it took me somewhere baffling ;)
[22:47:07] <\n> ah
[22:47:12] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[22:47:30] <luz> lukem, something like <http://static.rust-lang.org/doc/master/guide-ffi.html>?
[22:47:34] <sw17ch> biardjd: the internet as many of those places
[22:47:34] <\n> tjc: what if RUST_PATH is not set?
[22:47:42] * biardjd nods
[22:48:20] <lukem> luz, thanks. I've been looking but clearly not well
[22:48:24] <tjc> \n: if RUST_PATH isn't set, it defaults to installing dependencies into ./.rust
[22:48:35] <tjc> so that different packages can use different versions of the same libraries and they won't affect each other
[22:48:56] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[22:49:11] *** Joins: flounder (Mibbit@moz-9B182637.d.c400.guam.net)
[22:49:29] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[22:49:33] *** Quits: gamakichi (Mibbit@moz-7DC6937F.range213-123.btcentralplus.com) (Quit: http://www.mibbit.com ajax IRC Client)
[22:49:35] <luz> lukem, it's linked in the "Other docs" pages at rust-lang.org
[22:49:54] *** Joins: rgawdzik (chatzilla@moz-BC6EF590.net.uwaterloo.ca)
[22:49:55] *** Quits: maxiepoo_ (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo_)
[22:50:19] <lukem> ahh, thanks
[22:50:19] <steveklabnik> Option has no runtime overhead, yeah?
[22:50:23] <lukem> time to read
[22:50:49] <acrichto> steveklabnik: depends what you mean by runtime overhead
[22:50:51] *** Joins: elux (peter@B6F21F4B.1F20BC31.2170E5F.IP)
[22:50:52] *** Quits: elux (peter@B6F21F4B.1F20BC31.2170E5F.IP) (Quit: elux)
[22:50:56] <pcwalton> steveklabnik: Option is optimized into a nullable pointer if possible
[22:51:02] <\n> tjc: for example, this list: https://github.com/mozilla/rust/wiki/Rustpkg has a lib: https://github.com/cadencemarseille/rust-pcre that doesn't have the package structure from here: https://github.com/mozilla/rust/blob/master/doc/rustpkg.md#package-structure
[22:51:03] <steveklabnik> that's what i thought
[22:51:05] <acrichto> steveklabnik: it needs a tag to dictate whether it's Some/None which may constitue as "overhead'
[22:51:06] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[22:51:34] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Quit: Leaving)
[22:51:41] <tjc> \n: Yes, that structure is for a workspace, not a package. The section heading is kind of misleading...
[22:51:44] *** Quits: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[22:51:47] <tjc> but it's describing how a workspace should be structured
[22:51:47] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[22:51:58] *** Joins: kvark (Mibbit@9A8A5739.49975FB2.AE2D72A6.IP)
[22:51:58] <tjc> you check out packages into a workspace (or rustpkg checks them out into one for you)
[22:52:06] <biardjd> steveklabnik: your doc talk was entertaining and educational
[22:52:11] <steveklabnik> thanks :)
[22:52:24] <mcpherrin> I kinda wish rust had a u24 or u31 so Option<u32> packs densely
[22:52:30] <mcpherrin> er
[22:52:39] <biardjd> it motivated me to try to write an introduction to systems programming
[22:52:41] <mcpherrin> Option<u31> is the size of u32.
[22:52:43] <kvark> cmr: I'd like to bother you a bit
[22:52:50] <matthewbot> tjc: so a github repo is itself a workspace, not a package?
[22:52:51] <\n> workspace, package, libs, Ay yi yi
[22:53:27] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[22:53:34] <flaper87> Is there something wrong with this struct? http://pastebin.mozilla.org/4006724
[22:53:34] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[22:53:43] <tjc> matthewbot: No, a github repo should be a package.
[22:53:48] <cmr> kvark: sure what's up
[22:53:59] <kvark> cmr: file get_snapshot.py
[22:54:05] <kvark> cmr: line "tar = tarfile.open(dl_path)"
[22:54:08] <brson> do relaxed atomics guarantee that subsequent reads and/or writes actually happen after? I think no
[22:54:11] <matthewbot> tjc: so rust-pcre is wrong?
[22:54:17] *** Quits: mleise (marco@moz-850E56A9.pools.arcor-ip.net) (Quit: Leaving.)
[22:54:23] <flaper87> when I try to access it from one of the traits impl I get type `&'a mut [uint]` does not implement any method in scope named `push`
[22:54:30] <cmr> matthewbot: almost every repo is wrong
[22:54:30] <matthewbot> tjc: it looks like a workspace to this newbie, it has a src directory
[22:54:31] <\n> why does the makefile call: https://github.com/cadencemarseille/rust-pcre/blob/master/Makefile#L4
[22:54:32] <aatch> brson, nope
[22:54:35] <kvark> cmr: problem is, the file is "tar.bz2", so technically it should require 'r:bz2' parameter, and fail on the default 'r'
[22:54:53] *** Quits: skade (skade@moz-B73EE4D5.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:54:54] <tjc> matthewbot: It's okay -- there can be another src/ dir as a subdirectory of src/
[22:54:54] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[22:54:56] *** Quits: lukem (Mibbit@moz-67A308A0.dyn.iinet.net.au) (Quit: http://www.mibbit.com ajax IRC Client)
[22:55:06] <aatch> brson, relaxed atomics just mean that it's, well, atomic. no ordering guarantees at all.
[22:55:07] *** Quits: kris (kris@moz-6D20263F.fullrate.dk) (Ping timeout)
[22:55:08] <lennart> flaper87: I think it needs to be an owned vector ~[]
[22:55:10] <tjc> If you were to check it out manually (because you wanted to edit it, for example), you would do:
[22:55:11] <lennart> to support push
[22:55:16] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[22:55:17] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[22:55:20] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[22:55:21] <brson> acrichto: i'm a little worried about some of the relaxed atomics in channels
[22:55:23] <tjc> mkdir -p ~/MyWorkspace/src # assuming you're making a new workspace
[22:55:35] <tjc> cd ~/MyWorkspace/src; git clone https://github.com/cadencemarseille/rust-pcre
[22:55:35] *** Quits: SingingBoyo (SingingBoy@moz-BA08DB2A.ubcsecure.wireless.ubc.ca) (Ping timeout)
[22:55:35] <aatch> flaper87, a `&'a mut [T]` is a slice
[22:55:40] <tjc> so then you would have src/rust-pcre/src
[22:55:46] <tjc> which looks a little funny but works
[22:55:53] <cmr> brson: I didn't notice any of the relaxed atomics needing different ordering, which ones are you concerned about?
[22:56:08] <acrichto> brson: perhaps I should just reset everything to SeqCst and deal with performance problems when we hit them
[22:56:10] <matthewbot> tjc: ah! ty
[22:56:15] <tjc> no problem
[22:56:26] <tjc> somehow this seems to be perennially confusing... doc improvements are welcome :-)
[22:56:27] <flaper87> aatch: ohh, mhh.. Interesting. How should I change that line to have a mutable vec ?
[22:56:30] <o11c> <cue more arguing by random people that "rust packaging doesn't work" and rust developers arguing that it does, you just don't understand it>
[22:56:40] <brson> cmr: this one and its companion worried me, but i haven't looked closely yet
[22:56:43] <o11c> I think I understand rust packaging now, and I still think it's dumb
[22:56:44] <brson> https://github.com/alexcrichton/rust/commit/3386a3bb85516b8bd8ab9ce12e8e9b0f7b3777ec#diff-2fafeeaea35549061e5dccef1e59996dR678
[22:56:51] <aatch> flaper87, you need to use an owned vector.
[22:57:02] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[22:57:04] <brson> if inner.packet.increment() is acquire then it may be fine
[22:57:06] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[22:57:07] <\n> tkc: so if a workspace only has 1 lib, you have to have the structure workspace_name/src/lib_name/src/files ???
[22:57:15] <aatch> Any time you have '&[T]' or similar, you have a slice into some *other* memory.
[22:57:30] <acrichto> brson: oh that one I actually wanted to keep, I thought atomics just had to do with other memory side effect visibility, and it shouldn't matter with the go_home flag
[22:57:35] <flaper87> got it
[22:57:39] <flaper87> thanks
[22:57:41] <acrichto> brson: if you see go_home as true, you will always and forever need to go home
[22:57:45] <\n> tjc*
[22:57:53] *** Quits: wcrichto (will@moz-FFEC7B0.wv.cc.cmu.edu) (Ping timeout)
[22:58:09] <brson> acrichto: that check must happen first thing in the function though, right?
[22:58:10] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[22:58:34] <acrichto> brson: yeah, it's main usage is to prevent starvation of the draining sender
[22:58:50] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[22:58:55] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[22:59:10] <biardjd> anyone know how to create a package for ubuntu?
[23:00:05] <\n> biardjd: ubuntu uses debian packages
[23:00:30] <cmr> kvark: so what's the question?
[23:00:38] <kvark> cmr: why does it work?
[23:00:40] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[23:00:42] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[23:00:46] <cmr> kvark: beats me :)
[23:00:51] <\n> tjc: do you have an example of a perfect dir for rust-pkg I could reference real quick?
[23:00:58] *** Joins: wcrichto (will@A40CA9CD.E6CB677E.689607DE.IP)
[23:01:03] *** Quits: vikstrous1 (v@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[23:01:04] <tjc> \n: You can have workspace_name/src/lib_name/foo.rs and so on
[23:01:09] <brson> acrichto: istm that check can definitely be reorded to after the subsequent check of packet.cnt
[23:01:09] <tjc> the files can be directly under lib_name
[23:01:18] <tjc> \n: I made an example package at one point, let me see if it's still where I think it is...
[23:01:19] <brson> acrichto: not sure about the push
[23:01:21] *** Quits: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: brendan)
[23:01:35] <kvark> cmr: I ask because there is an important human out there, for whom it *doesn't* work, and tarfile.open() returns ReadError
[23:01:40] <tjc> \n: https://github.com/catamorphism/test-pkg - but this is about as simple as it gets
[23:01:51] <\n> tjc: and if I want to upload it to github, I have to have the workspace as the top level dir?
[23:01:51] <cmr> kvark: a hypothetical human or a real human?
[23:01:52] <tjc> if you checked this out under a workspace's src/, you would have (for example) workspace/src/test-pkg/lib.rs
[23:01:53] <acrichto> brson: I would believe that, do you think it should be?
[23:01:55] <brson> acrichto: push would have to contain a release barrier to avoid the reordering
[23:02:04] <acrichto> *oh*
[23:02:09] <acrichto> that kind of reordering
[23:02:12] <tjc> \n: rustpkg assumes that the github repo name is the package name, yeah
[23:02:16] <kvark> cmr: a real one, the owner of compileonline.com
[23:02:27] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[23:02:28] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[23:02:31] <cmr> kvark: what python version are they using?
[23:02:42] <tjc> \n: If you haven't seen the tutorial before, http://static.rust-lang.org/doc/master/guide-rustpkg.html might help (it also talks about the directory structure)
[23:02:45] <\n> tjc: based on your example, no.  But looks like I can just name my file lib.rs
[23:02:50] <flaper87> aatch: mmh, but I need it to be mutable 
[23:02:55] <cmr> kvark: and on what operating system?
[23:03:03] <brson> we should get some real arm hardware to stress test
[23:03:06] <aatch> flaper87, mutability is inherited
[23:03:19] <aatch> so if the struct is mutable, then the vector is mutable
[23:03:28] <acrichto> brson: I've been thinking about these wrong I think, I need to go back and rethink, they either need to be changed to Acquire or Release, I basically don't want SeqCst but I don't want reorderings
[23:03:38] *** Joins: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[23:03:46] <flaper87> aatch: gotcha! thanks
[23:03:50] <kvark> cmr: all I got so far is a console output with this ReadError thing. Target triple is: x86_64-unknown-linux-gnu. I can ask him more questions, we just need to figure out all of them now
[23:04:11] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[23:04:16] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[23:04:21] <kvark> cmr: why do we rely on some python version 'guessing' about the tar format against the specification? why not do it properly instead?
[23:04:57] *** Quits: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net) (Quit: Leaving.)
[23:04:58] *** Joins: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net)
[23:04:58] <cmr> kvark: because whoever wrote it didn't know about it
[23:05:00] <brson> acrichto: ok. i would be happy to change all the relaxed atomics to seqcst
[23:05:01] * cmr didn't know about it either
[23:05:06] <cmr> kvark: submit a PR
[23:05:09] *** Quits: dogurness (dogurness@moz-1BF32EBD.pitbpa.fios.verizon.net) (Quit: dogurness)
[23:05:14] <brson> until we get hardware that cares
[23:05:17] <seanmonstar> hai! tried searching, but couldn't find much, except maybe i need an apostrophe: why is `struct A { b: &str }` an error?
[23:05:17] *** Joins: dbaupp (Thunderbir@DF3B07E7.D5A1DCF.37681C44.IP)
[23:05:25] <acrichto> brson: I'm trying to avoid SeqCst though b/c it turns into a xchg on x86
[23:05:36] <acrichto> brson: which I've actually seen fairly high in profiles before
[23:05:49] <Matthias247> is there a thing like *Trait for unsafely storing a virtual callback?
[23:05:58] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[23:06:03] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[23:06:07] <kvark> cmr: I was going to submit a PR, but then I need to know if we are always going to use bzip2. Do you know about that? Otherwise, I'll need to put some detection code based on the file extension.
[23:06:25] <cmr> kvark: if it changes, the snapshot will fail, and we'll change it then.
[23:06:34] <kvark> cmr: https://gist.github.com/kvark/8409862 for your reference
[23:06:36] <\n> tjc: could you help me with: https://github.com/nickdesaulniers/rust-re2 ?
[23:06:41] <brson> acrichto: maybe we can walk through the channel code some time this week in person and think about reordering
[23:06:45] *** Quits: ptc (Adium@moz-8F01578B.z72-46-65.customer.algx.net) (Ping timeout)
[23:06:54] <brson> i wonder if we can get some kind of simulator for testing this stuff
[23:07:01] *** Quits: c-a (c-a@moz-57C82A9.a163.priv.bahnhof.se) (Quit: Ex-Chat)
[23:07:02] <\n> tjc: I have 1 file for binding.  1 file for testing the bindings, and 2 scripts for install 2 library dependencies
[23:07:06] <kvark> cmr: I'll ask him to try this change, and if it works - will submit a PR
[23:07:07] <pcwalton> promela! :)
[23:07:10] <acrichto> brson: sure, I may start lumping these all together as well
[23:07:11] <brson> or hire an expert to review
[23:07:35] <acrichto> brson: what do you think about having a custom enum in std::comm for try_recv() ?
[23:07:42] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Quit: Textual IRC Client: www.textualapp.com)
[23:07:43] <acrichto> brson: don't define any fluff methods and just see how it goes
[23:07:44] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[23:07:47] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[23:07:48] <brson> acrichto: it's my preferred option atm
[23:07:48] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[23:07:55] <acrichto> k
[23:07:56] <brson> i feel that try_recv is relatively rare
[23:08:13] <brson> though maybe once it works people will prefer it to `End` messages
[23:08:15] <cmr> brson: I'm convinced now that that should be acquire/release, too.
[23:08:53] <tjc> \n: I'm taking a look
[23:09:28] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Ping timeout)
[23:10:11] *** Quits: flounder (Mibbit@moz-9B182637.d.c400.guam.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:10:18] <tjc> \n: installing the library dependencies (if they're not Rust libraries) can be custom build logic...
[23:10:22] *** Quits: TisButMe (Mibbit@moz-5233EFA9.w92-144.abo.wanadoo.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[23:11:00] *** Quits: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca) (Quit: canhtak)
[23:11:12] <tjc> \n: As far as testing, unfortunately, this is an unresolved question -- see https://github.com/mozilla/rust/issues/9003
[23:11:22] *** Joins: valenting (Thunderbir@moz-BD1A2D46.residential.rdsnet.ro)
[23:11:38] <tjc> that said, any of the three approaches describe there should work, it's just that 2 out of 3 are awkward
[23:11:41] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[23:12:51] *** Joins: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu)
[23:12:52] *** Joins: vikstrous1 (v@13F2CEC5.7672369.D8E68FF6.IP)
[23:12:55] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[23:14:37] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[23:14:37] *** Quits: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[23:15:30] *** Joins: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca)
[23:16:02] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[23:16:15] *** Joins: flounder (Mibbit@moz-9B182637.d.c400.guam.net)
[23:16:23] <seanmonstar> im getting "missing lifetime specifier", but can't find anything in the manual or the googles
[23:16:39] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[23:16:53] <cmr> seanmonstar: you can't have a reference in a struct with an anonymous lifetime
[23:16:55] <flounder> Is there any way to automagically convert a plain enum to an int?
[23:17:01] *** Quits: mib_8xvowr (Mibbit@moz-4014DDC7.ga.at.cox.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:17:05] <cmr> you need struct Foo<'a> { x: &'a int }
[23:17:13] <cmr> flounder: `val as int`
[23:17:27] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[23:17:29] <seanmonstar> cmr: whats <'a>? is there a doc?
[23:17:37] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[23:17:38] <steveklabnik> seanmonstar: a lifetime
[23:17:42] <steveklabnik> specifically, a named lifetime
[23:17:43] *** Joins: carllerche (carllerche@moz-2B516F15.hsd1.or.comcast.net)
[23:17:45] <flounder> cmr: awesome, thanks
[23:17:52] <cmr> seanmonstar: lifetime parameter. http://static.rust-lang.org/doc/master/guide-lifetimes.html
[23:17:53] <steveklabnik> http://static.rust-lang.org/doc/0.9/guide-lifetimes.html
[23:17:59] *** Quits: vikstrous1 (v@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[23:18:20] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Connection reset by peer)
[23:18:22] <seanmonstar> thanks!
[23:19:02] *** Quits: flowsnake (flowsnake@moz-10902DAB.cable.virginm.net) (Ping timeout)
[23:20:08] *** Joins: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu)
[23:20:34] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[23:20:53] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[23:21:13] *** Quits: valenting (Thunderbir@moz-BD1A2D46.residential.rdsnet.ro) (Ping timeout)
[23:21:54] *** Quits: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[23:21:54] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[23:21:55] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[23:23:08] *** Quits: vmx (vmx@moz-BA8A49E.pools.arcor-ip.net) (Quit: Leaving)
[23:23:37] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[23:23:40] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[23:24:05] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[23:24:43] *** flaper87 is now known as flaper87|afk
[23:25:22] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[23:25:30] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[23:25:32] *** Quits: ecl3ctic (Mibbit@moz-E1FAD64C.wzfv1.vic.bigpond.net.au) (Quit: http://www.mibbit.com ajax IRC Client)
[23:26:12] *** Quits: wcrichto (will@A40CA9CD.E6CB677E.689607DE.IP) (Ping timeout)
[23:26:29] <jmgrosen> so lint passes only work on the ast, right?
[23:26:36] <jmgrosen> so, for example, you couldn't lint tab size
[23:26:37] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[23:26:43] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[23:26:57] <tjc> jmgrosen: right. That should probably be a separate script or something
[23:27:04] <Diamond> how do you force a newline in rustdoc?
[23:27:08] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[23:27:15] *** Quits: flounder (Mibbit@moz-9B182637.d.c400.guam.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:27:16] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[23:27:16] <cmr> Diamond: add an extra newline.
[23:27:17] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[23:27:18] <cmr> it's markdown.
[23:27:24] *** Quits: jzcz (nick@moz-6E6530A2.rb.lax.centurytel.net) (Quit: Konversation terminated!)
[23:27:28] <Diamond> cmr: thanks
[23:27:30] *** Joins: jzcz (nick@moz-6E6530A2.rb.lax.centurytel.net)
[23:27:30] <cmr> or that'd be a separate paragraph I suppose
[23:27:32] <SiegeLord> Or, apparently add two spaces at the end of the line, heh
[23:27:34] <cmr> same effect really.
[23:27:39] <cmr> SiegeLord: really?!?
[23:27:44] <SiegeLord> Yep
[23:27:47] <cmr> wut
[23:27:52] *** kimundi is now known as zz_kimundi
[23:28:18] *** Joins: flowsnake (flowsnake@moz-10902DAB.cable.virginm.net)
[23:28:20] <SiegeLord> http://daringfireball.net/projects/markdown/syntax#p
[23:28:23] *** Parts: \n (uid15310@moz-31ABA2C0.irccloud.com) ()
[23:28:25] <SiegeLord> Second to last paragraph
[23:28:28] *** Quits: FreeFull (freefull@moz-7CCB1CA8.as13285.net) (Ping timeout)
[23:28:40] *** Joins: Sharp (Sharp@moz-EEC85237.hsd1.ca.comcast.net)
[23:28:41] *** Joins: FreeFull (freefull@moz-7CCB1CA8.as13285.net)
[23:28:54] <cmr> who knew
[23:28:59] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[23:29:03] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[23:29:11] *** Quits: cschneid (cschneid@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[23:29:17] <SiegeLord> There was a commit recently that stripped trailing whitespace and broke Rust docs, heh
[23:30:26] *** jorendorff is now known as jorendorff_away
[23:30:44] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[23:30:50] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[23:32:10] <SiegeLord> https://github.com/kballard/rust/commit/de6f213927f4b4040a970b19cd5060698fb6731f
[23:32:13] *** Joins: wcrichto (will@A40CA9CD.E6CB677E.689607DE.IP)
[23:32:13] <SiegeLord> Hehe
[23:32:21] <SiegeLord> I feel that's reason enough to drop Markdown :P
[23:32:26] <SiegeLord> I wonder if Pandoc fixes this annoyance
[23:32:36] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[23:32:37] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[23:32:57] <SiegeLord> It does... you add a \ before a newline
[23:33:05] <SiegeLord> Too bad we don't use it anymore, eh?
[23:34:19] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[23:34:23] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[23:34:33] *** Quits: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP) (Client exited)
[23:36:57] *** Quits: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP) (Quit: Taking a nap.)
[23:37:32] *** Joins: lenstr (lenstr@4BAE5C94.9636F313.7A27613B.IP)
[23:37:49] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[23:37:52] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[23:37:57] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[23:39:04] <bascule> regular Markdown is pretty terrible
[23:39:07] *** Quits: elan-workweek (elancaster@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[23:39:12] <bascule> Github Flavored Markdown fixes a lot of the problems :|
[23:39:41] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[23:39:44] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[23:40:21] *** Quits: lenstr (lenstr@4BAE5C94.9636F313.7A27613B.IP) (Client exited)
[23:41:17] *** Quits: rgawdzik (chatzilla@moz-BC6EF590.net.uwaterloo.ca) (Ping timeout)
[23:41:26] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[23:41:31] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[23:42:59] *** Joins: svercer (svercer@moz-C5015154.secundaverba.net)
[23:43:16] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[23:43:17] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[23:44:17] *** Joins: mib_yoynh3 (Mibbit@moz-CF296F8E.nc.res.rr.com)
[23:44:18] *** Quits: io2 (io2@moz-871549F5.home.otenet.gr) (Quit: )
[23:44:46] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[23:46:26] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Ping timeout)
[23:47:10] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[23:47:13] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[23:47:33] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[23:48:17] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[23:48:18] *** Joins: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu)
[23:48:28] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[23:49:00] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[23:49:42] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[23:50:03] *** Quits: dgalling1 (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[23:50:06] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[23:51:20] *** Quits: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[23:52:27] *** Quits: mib_yoynh3 (Mibbit@moz-CF296F8E.nc.res.rr.com) (Quit: http://www.mibbit.com ajax IRC Client)
[23:53:08] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: sw17ch)
[23:53:21] *** Joins: ercxx (ercan@moz-88DD3A7E.dyn.optonline.net)
[23:55:14] <ercxx> Should I be getting a segfault without doing anything 'unsafe'?
[23:55:20] <cmr> ercxx: no
[23:55:22] *** Quits: wcrichto (will@A40CA9CD.E6CB677E.689607DE.IP) (Ping timeout)
[23:55:56] <ercxx> Ok, I'll try to slim it down to a few lines and see if I can reproduce it.
[23:56:00] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[23:56:07] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[23:57:48] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[23:57:53] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
[23:58:23] *** Joins: elan-workweek (elancaster@moz-7B0110AD.mv.mozilla.com)
[23:59:21] *** Quits: jzcz (nick@moz-6E6530A2.rb.lax.centurytel.net) (Ping timeout)
[23:59:27] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[23:59:33] *** Quits: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu) (Ping timeout)
[23:59:41] *** Joins: dgalling (dgalling@moz-A5EB8EA7.bucknell.edu)
