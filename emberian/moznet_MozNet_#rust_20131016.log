[00:00:03] <strcat> on my laptop
[00:00:08] <strcat> you mean repo?
[00:00:14] <brson> strcat: no, what's the url for the web interface
[00:00:24] <strcat> http://strcat.zapto.org:8000/
[00:00:41] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[00:01:11] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[00:01:22] <brson> thanks
[00:02:28] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[00:02:37] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[00:02:50] *** Quits: BitPuffin (isak@moz-98F8BF74.cust.tele2.se) (Quit: WeeChat 0.4.1)
[00:05:36] <kmc> is there a function which takes a vec and a callback that receives both a raw pointer and length?
[00:05:43] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[00:06:02] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[00:06:51] <strcat> kmc: yes (as_{mut,imm},buf), but you can do it without the closure
[00:06:58] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[00:07:09] <strcat> rusti: use std::unstable::raw::Repr; let xs = &[1, 2, 3]; xs.repr()
[00:07:10] -rusti- std::unstable::raw::Slice<int>{data: (0x7fa2e322a0e8 as *()), len: 24u}
[00:07:38] <strcat> (well, or just get the length from the len method for now)
[00:08:10] <kmc> ok, thanks
[00:08:34] *** Joins: kurisumasu (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[00:10:07] <geoffhill> Quick question: The type checker gets confused when constructing expressions with a polymorphic return type.
[00:10:23] <geoffhill> e.g. let v: uint = rand::random() % n;
[00:10:32] <geoffhill> Any way to manually specify?
[00:11:24] *** Parts: doomlord_ (servitor@moz-6732E9D4.range86-184.btcentralplus.com) (Leaving)
[00:12:21] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[00:12:29] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[00:12:35] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: nejucomo)
[00:14:02] <shachaf> id::<t>(x) is one way to specify a type for something.
[00:14:12] <shachaf> I don't know whether it's necessary in that case.
[00:15:22] <dwrensha> rand::random::<uint>()
[00:15:47] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[00:16:12] <shachaf> Oh, and you can specify a type for any polymorphic thing, of course, yes.
[00:16:22] <geoffhill> Ahh, I was missing the "::" between func and type. Thanks!
[00:17:36] *** Joins: doomlord_ (servitor@moz-6732E9D4.range86-184.btcentralplus.com)
[00:17:58] *** Quits: doomlord_ (servitor@moz-6732E9D4.range86-184.btcentralplus.com) (Client exited)
[00:18:02] *** Joins: doomlord_ (servitor@moz-6732E9D4.range86-184.btcentralplus.com)
[00:19:32] *** Quits: jvns_ (bork@87D98E32.4046EB22.428F94DD.IP) (Ping timeout)
[00:20:13] <McPherrin> rusti: ::std::rand::random::<uint>()
[00:20:14] -rusti- 6454538115979917130u
[00:20:20] <McPherrin> rusti: ::std::rand::random::<u8>()
[00:20:20] -rusti- 76u8
[00:23:39] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[00:24:00] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[00:28:04] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[00:28:32] <McPherrin> Forgive me for asking without googling/looking first, but is there an API in rust for dealing with raw network packets?
[00:28:54] <McPherrin> I need to write a network tool and seems like a good excuse to use rust
[00:29:53] <sfackler> std::rt::io::net has interfaces for TCP socket and (I think) UDP sockets
[00:30:02] <sfackler> *TCP sockets
[00:30:16] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[00:30:42] <sfackler> McPherrin: ^
[00:30:45] <McPherrin> Nah, too high level
[00:31:04] <McPherrin> I want to construct layer 3 frames
[00:31:50] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:31:56] <McPherrin> I'll look at how those are implemented though
[00:32:43] <tikue_> is there any reason why fn foo(bar: BarInterface) { ... } couldn't be syntactic sugar for `fn foo<T: BarInterface>(bar: T) { ... }`
[00:32:52] <Luqman> McPherrin: those are implemented ontop of libuv, for what you want you'd probably have to wrap the c calls
[00:33:11] <McPherrin> Luqman: Yeah, I figured, but I don't know enough about LibUV to be sure
[00:34:21] *** Quits: riley (riley@8BA43816.9AA11D69.65DDFA89.IP) (Client exited)
[00:34:39] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[00:35:48] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[00:38:57] *** Joins: recrack (ymin@5AB4884B.FCC4549.14D5B978.IP)
[00:40:56] *** recrack is now known as ksh8281
[00:41:19] <ksh8281> hi i'm newbie on rust.
[00:41:31] <ksh8281> i have a question
[00:42:03] <ksh8281> i'm writing small program with rust.
[00:43:14] <McPherrin> We're eagerly awaiting your question :)
[00:43:34] <ksh8281> i try to use extra::flatpipes::serial module
[00:45:26] *** Joins: lfox (lfox@moz-B8648F0F.nycmny.fios.verizon.net)
[00:46:16] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[00:46:22] <ksh8281> https://gist.github.com/ksh8281/8524f58de24cb2553f64
[00:47:06] <jason_> McPherrin: std::rt::io::native might have something (i haven't looked)
[00:47:18] <ksh8281> i sent data with serial that is success
[00:47:34] <jason_> that is the non-libuv io
[00:47:37] <ksh8281> but port.recv() causes ebml format fault
[00:48:04] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[00:48:44] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[00:48:49] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[00:48:55] <ksh8281> how can i send raw data with channel and port
[00:49:05] <McPherrin> jason_: yeah, I didn't see anything in there.
[00:49:10] <McPherrin> I'll just wrap the C functions
[00:49:27] <McPherrin> Thanks for the input though :)
[00:49:44] *** Joins: aegeaner (Aegeaner@C8372C16.21B75AD6.FA28A497.IP)
[00:49:50] *** Quits: Guest_ (textual@3406FB1C.AE8426E7.16E13E53.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:49:57] <McPherrin> I need to receive ICMP and send constructed IP frames
[00:50:13] <brson> ksh8281: from looking at the flatpipes test cases it appears that flatpipes is pretty broken
[00:50:45] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[00:51:54] <ksh8281> brson: thank you. i already saw that tese case.
[00:52:28] <ksh8281> actually, i want to send raw data with flatpipes.
[00:52:37] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[00:52:40] <ksh8281> do you have some idea?
[00:54:43] <brson> ksh8281: if your data doesn't contain any pointers then you can try pod::pipe_stream(). That doesn't rely on serialization
[00:55:34] *** jorendorff_away is now known as jorendorff
[00:59:37] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[00:59:50] <ksh8281> brson: thank you very much!
[01:00:22] *** Quits: ksh8281 (ymin@5AB4884B.FCC4549.14D5B978.IP) (Quit: leaving)
[01:00:32] *** Joins: recrack (ymin@5AB4884B.FCC4549.14D5B978.IP)
[01:01:38] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[01:02:24] *** Joins: bleibig (bleibig@moz-CB11172C.hsd1.ca.comcast.net)
[01:04:37] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:05:37] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[01:10:28] *** jorendorff is now known as jorendorff_away
[01:13:08] *** Quits: canhtak (jeremy@moz-EF57C296.wl.t.ulaval.ca) (Quit: canhtak)
[01:13:16] *** Joins: Jesin (Jessin_@moz-2FC45CE5.cc.lehigh.edu)
[01:14:27] *** McPherrin is now known as mcphrerin
[01:17:15] *** Joins: GGpin (hell@moz-B9EFFE2E.dyn.optonline.net)
[01:17:27] *** Quits: GGpin (hell@moz-B9EFFE2E.dyn.optonline.net) (Quit: AndroIRC - Android IRC Client ( http://www.androirc.com ))
[01:19:03] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[01:20:29] <earlz> "The Rc type provides shared ownership of an immutable value" ... "RcMutMutable reference counted pointer type" isn't that a bit contradicting? heh
[01:20:42] *** Joins: Gpin (hell@moz-B9EFFE2E.dyn.optonline.net)
[01:21:20] <earlz> ah wait. it then says RcMut, nvm
[01:21:45] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[01:21:49] *** Joins: jordyd (jordyd@7DAC4ACE.77F880E0.D9401097.IP)
[01:24:05] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[01:24:12] *** Quits: KindOne (KindOne@moz-82EEF0C7.dynamic.ip.windstream.net) (Ping timeout)
[01:24:40] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[01:25:14] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[01:25:46] *** Quits: rveach (rveach@410D297A.C7FE7DD2.1302FB2C.IP) (Ping timeout)
[01:25:59] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[01:26:25] *** Joins: jvns_ (bork@87D98E32.4046EB22.428F94DD.IP)
[01:26:51] *** Quits: jordyd (jordyd@7DAC4ACE.77F880E0.D9401097.IP) (Ping timeout)
[01:27:30] *** Joins: canhtak (jeremy@moz-EF57C296.wl.t.ulaval.ca)
[01:27:49] *** Joins: KindOne (KindOne@moz-AF4FC72D.dynamic.ip.windstream.net)
[01:30:22] <earlz> Does any example code exist for actually using RcMut<> ?
[01:30:57] *** Quits: jvns_ (bork@87D98E32.4046EB22.428F94DD.IP) (Ping timeout)
[01:32:02] *** Joins: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net)
[01:34:29] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[01:34:30] <earlz> Do I have to use like rcmut.with_borrow to actually get a usable reference? 
[01:35:13] <kmc> yes
[01:35:31] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Quit: anshin)
[01:35:52] *** Joins: pcwalton (pcwalton@moz-B51927E9.hsd1.ca.comcast.net)
[01:35:52] *** ChanServ sets mode: +ao pcwalton pcwalton
[01:36:41] <earlz> And I guess the f: argument is a closure/function that returns a default if it fails? or what? 
[01:37:05] <earlz> I'm confused as to why the method has a <U> generic parameter
[01:38:56] <aatch> earlz, to return any type
[01:39:06] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[01:39:19] *** Quits: dbaupp (Thunderbir@moz-54ADD9F4.lns20.syd6.internode.on.net) (Ping timeout)
[01:39:50] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Quit: anshin)
[01:40:14] <earlz> So, the general pattern to be expected using RcMut is to do all your actual processing within the closure, and then return the result and to never save the pointer outside of that? 
[01:40:16] *** Joins: jordyd (jordyd@7DAC4ACE.77F880E0.D9401097.IP)
[01:40:17] *** Joins: minzh (Mibbit@AEC6E6CC.5CE80800.D2BA945D.IP)
[01:40:18] <kmc> yes
[01:40:24] <kmc> it's kind of inconvenient
[01:40:35] <earlz> That's one word that would descibe it heh
[01:40:53] <aatch> earlz, actually, you *can't* store the pointer outside of it.
[01:40:56] <earlz> I thought RcMut was just going to have a .value() or some such ugh
[01:40:59] <kmc> the alternative is for with_borrow to return a 'smart pointer' which will undo the borrow in its destructor
[01:41:12] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[01:41:13] <kmc> I expect Rc will be rewritten in that style eventually
[01:41:17] <aatch> earlz, kmc, it's done that way because anything else is unsound.,
[01:41:22] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[01:41:29] <kmc> probably once we have a trait for smart pointer syntactic sugar
[01:41:36] <aatch> It's why you get dynamic borrow failures when using @mut
[01:41:45] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[01:42:18] <earlz> I don't really see how this is reference counting :/ 
[01:42:38] <kmc> you can copy a Rc<T> without copying the underlying T
[01:42:43] <kmc> doing so bumps a reference count
[01:42:47] <aatch> earlz, when you call "clone" you get a new pointer to the same data.
[01:43:00] <kmc> it's much like std::shared_ptr in C++
[01:43:16] <kmc> (but with a lot more static safety checking)
[01:43:30] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[01:43:49] <earlz> if you do let ptr2 = ptr1; where ptr1 is an Rc<T>, it'll automatically call Clone right? 
[01:43:54] <aatch> earlz, no
[01:44:02] <kmc> no, Rust never calls clone() automatically
[01:44:06] <kmc> that would be a move
[01:44:26] <earlz> So, the expected thing to do is call clone() when passing an Rc through different objects and such? 
[01:44:30] *** Quits: fran_ (fran@203ECF45.9D5079D8.87338559.IP) (Ping timeout)
[01:44:36] <kmc> when you need to copy the reference and not move it, yes
[01:44:56] <earlz> Rust is still a bit mind blowing with it's move semantics ugh 
[01:45:14] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[01:45:55] <aatch> earlz, eh, move semantics aren't too hard. It's just that you have to explicitly say you're copying something most of the time. (Some types are implicitly copyable)
[01:46:13] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[01:46:35] <earlz> what makes a type implicitly copyable? 
[01:46:46] <earlz> I know things like integers and simple types are, anything else?
[01:46:51] <kmc> structs made of only those
[01:46:52] <aatch> earlz, if all of the members are implicitly copyable
[01:47:26] <earlz> ahh. No pointers or vectors I guess is what it boils down? 
[01:47:36] <aatch> earlz, if it can be done in a single memcpy, then it's implicitly copyable.
[01:47:43] <aatch> earlz, well, raw pointers are ok.
[01:47:44] <earlz> ok 
[01:47:46] *** Joins: fran_ (fran@moz-DEF1167F.telecom.net.ar)
[01:48:00] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[01:48:20] <aatch> I think fixed vectors are ok too if they contain implicitly copyable things
[01:48:22] *** Quits: recrack (ymin@5AB4884B.FCC4549.14D5B978.IP) (Quit: leaving)
[01:48:26] <earlz> One day when I finally grok all this I swear I'm going to write a tutorial complete with extensive examples and "you should use this when doing that" knowledge
[01:48:29] *** Joins: recrack (Mibbit@5AB4884B.FCC4549.14D5B978.IP)
[01:48:39] <aatch> rusti: let a = [1,2,3]; let b = a; (a, b)
[01:48:41] -rusti- ([1, 2, 3], [1, 2, 3])
[01:48:42] *** Quits: recrack (Mibbit@5AB4884B.FCC4549.14D5B978.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:48:45] <kmc> @-pointers are also implicitly copyable
[01:48:47] <earlz> heh guess so
[01:48:53] *** Joins: fabiand_ (fabiand@moz-8CBADDBC.adsl.alicedsl.de)
[01:48:55] *** Joins: recrack (Mibbit@5AB4884B.FCC4549.14D5B978.IP)
[01:48:58] <kmc> this is one of the reasons we want them to go away :)
[01:49:15] <earlz> But that's the only reason my noob program works! :) 
[01:49:26] <kmc> the big differences between @ and Rc are 1) @ is implicitly copyable, 2) @ can have cycles whereas Rc prohibits them statically using traits
[01:49:27] *** Quits: recrack (Mibbit@5AB4884B.FCC4549.14D5B978.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:49:44] *** Joins: dcrewi (david@moz-AB8667CE.gyrae.net)
[01:49:47] <aatch> A lot of time is spent on twiddling the the refcount in '@'
[01:49:51] <kmc> they're actually both reference counted at the moment
[01:49:57] *** Quits: fabiand (fabiand@moz-DDB9B420.adsl.alicedsl.de) (Ping timeout)
[01:50:03] <kmc> no true GC yet
[01:50:14] <aatch> And the guy working on it left.
[01:50:19] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[01:50:24] <earlz> Well I'm converting to Rc so that when @ is finally removed, conversion will be easier.. 
[01:50:32] <aatch> earlz, good man
[01:50:35] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[01:50:36] <earlz> Hopefully by that time smart pointer syntactic sugar will be there as well
[01:50:42] <kmc> but the RcMut API is so painful :/
[01:50:44] <kmc> yeah
[01:50:59] <strcat> earlz: if a type has a destructor/&mut/&fn inside it, it moves ownership
[01:51:02] *** Quits: lfox (lfox@moz-B8648F0F.nycmny.fios.verizon.net) (Quit: )
[01:51:05] *** Joins: lfox (lfox@moz-B8648F0F.nycmny.fios.verizon.net)
[01:51:07] <earlz> I assume many attempts have been made at refining it, but it's currently limited by syntax ability?
[01:51:20] <strcat> not really many attempts
[01:51:30] <strcat> I wrote it a while ago for libextra and recently moved it to libstd
[01:52:27] <strcat> the API is the same as it was originally, just tweaked a bit to make it sound
[01:52:47] <strcat> need a trait to overload * and &* for Rc<T>
[01:53:13] <earlz> Well I guess having borrows contained within a closure is the only safe way to do it though without more syntax ability though? 
[01:53:37] <strcat> RcMut<T> can't have an overloaded *
[01:53:40] <strcat> wouldn't be sound
[01:54:00] <kmc> you'd have a method which returns a different thing with an overloaded *
[01:54:11] <strcat> right but that adds overhead over what's currently there
[01:54:17] <kmc> really? why?
[01:54:23] <strcat> the dynamic freezes would no longer have stack discipline
[01:54:38] <strcat> you can take the object it gave you pass it by move somewhere or store it
[01:54:44] <strcat> makes it more complicated
[01:54:50] <earlz> Actually, with the way my project(a library) is structured, Rc isn't even that painful for users of my library, just for me while implementing it all :( 
[01:55:03] <kmc> does that harm performance even when it's used with stack discipline?
[01:55:13] <kmc> i think the ability to do things outside of stack discipline is a big advantage of the RAII style
[01:55:21] <strcat> kmc: it will harm performance because it writes into a pointer
[01:55:33] <strcat> LLVM can't really optimize it
[01:55:47] <strcat> I don't know *how much* it will harm performance
[01:55:49] <kmc> there's a great composibility between resource managers (stacks, refcounting, gc, etc.) and resources to be managed
[01:55:57] <kmc> i see
[01:56:18] <strcat> kmc: yeah but this isn't really a resource
[01:56:23] <aatch> strcat, you could overload '*' for RcMut where `T:Clone`
[01:56:25] <strcat> it's just a weird dynamic freezing invariant
[01:56:31] <kmc> true
[01:56:41] <earlz> strcat: if you had something like foo.with_mut_borrow(|p| bar()); and then bar also did a mut_borrow, that would be a fail right? 
[01:56:50] <strcat> aatch: nope
[01:57:04] <strcat> not unless lifetimes improve
[01:57:30] <strcat> trait Pointer<T> { fn deref<'a>(&'a self) -> &'a T; } is how I think it has to be defined
[01:58:03] <strcat> it would be really weird if *x called Clone with some pointers too
[01:58:26] *** Quits: Jesin (Jessin_@moz-2FC45CE5.cc.lehigh.edu) (Ping timeout)
[01:58:46] <pcwalton> why is RcMut painful?
[01:58:54] <pcwalton> btw, it should eventually become RC<Mut<..>>
[01:59:06] <aatch> strcat, that definitely seems like it could be done differently.
[01:59:10] <strcat> pcwalton: yeah, currently blocked by that Freeze inheritance thing
[01:59:30] <pcwalton> oh
[01:59:33] <pcwalton> we should fix that for sure then :)
[01:59:56] <strcat> atm Rc has to require a Freeze type, but I did add an unsafe new_unchecked
[02:00:05] <strcat> I want it to have from_send(x) too for non-Freeze things
[02:00:22] <strcat> but then it has to bubble that up
[02:00:30] *** Quits: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: I feel so disconnected now	)
[02:01:51] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[02:02:34] <strcat> pcwalton: I did the slice thing btw https://github.com/mozilla/rust/pull/9885
[02:02:50] <strcat> I wanted to clean up the non-optimized IR but hit a really terrible bug :\
[02:02:59] <strcat> atm if you take a slice and index it
[02:03:06] <strcat> it will generate a multiply by the size, and then a divide by the size
[02:03:11] <strcat> so it optimizes out as a no-op but... ugh
[02:03:12] *** Joins: jvns_ (bork@moz-DE62990.nyc.res.rr.com)
[02:03:27] <earlz> So, I have 2 RcMut objects. I have a context where I would have borrowed pointers to both. How can I contain them in a single struct (for easy passing to functions)? 
[02:03:52] <pcwalton> strcat: cool \o/
[02:04:23] <aatch> earlz, well you can have a lifetime parameter on the struct.
[02:04:26] <strcat> pcwalton: cleaning up the IR led to the stage1 compiler passing all tests, but the stage2 compiler hit a local heap memory leak assert while compiling a vector match test ;\
[02:04:30] <pcwalton> weird
[02:04:34] <strcat> pcwalton: a memory leak *in the compiler*, not the test
[02:04:43] <pcwalton> eww
[02:04:49] <earlz> So lifetimes would be required there? I was hoping to avoid them :/ 
[02:05:04] <aatch> earlz, any time you're storing a '&'
[02:05:11] <strcat> I suspect it's a weird unrelated @ bug :(
[02:05:22] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[02:08:33] <earlz> well, I was hoping to avoid storing a & :) 
[02:08:39] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[02:08:55] <aatch> earlz, but... you just said...
[02:09:13] <earlz> I just want the compiler to understand what I want and know that it's safe :( 
[02:10:22] *** Joins: simon (simon@moz-FD4ADBC6.cable.teksavvy.com)
[02:10:39] <aatch> earlz, well if a struct contains a borrowed pointer, it's lifetime is now limited to that of the stored pointer
[02:10:39] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[02:11:15] <aatch> since if the struct lasts for longer than the stored pointer, it is no longer valid.
[02:11:53] <earlz> yes, that's actually what I want.. and now that I've looked more at lifetimes, maybe they aren't so bad after all. heh. 
[02:12:21] <aatch> earlz, lifetimes are just a way of telling the compiler a bit more information
[02:12:33] *** Quits: jordyd (jordyd@7DAC4ACE.77F880E0.D9401097.IP) (Ping timeout)
[02:12:52] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[02:14:24] *** Joins: jordyd (jordyd@7DAC4ACE.77F880E0.D9401097.IP)
[02:16:16] *** Joins: Jesin (Jessin_@moz-F9E93AAD.cc.lehigh.edu)
[02:16:57] <mark_edward> arer there any timers in the std/extra?
[02:17:18] *** Quits: Gpin (hell@moz-B9EFFE2E.dyn.optonline.net) (Client exited)
[02:17:22] *** Joins: Gpin (hell@moz-B9EFFE2E.dyn.optonline.net)
[02:18:06] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[02:18:57] <sfackler> mark_edward: timer as in "sleep for x seconds" or timer as in "how long has it been"?
[02:19:31] <mark_edward> timer as in sleep for x seconds
[02:19:59] <sfackler> std::rt::io::timer
[02:20:32] <mark_edward> thank you!
[02:20:47] *** Quits: jyasskin_w (jyasskin@DAF66858.C60FE7DC.4065847B.IP) (Ping timeout)
[02:20:59] <earlz> Is it possible to specify something like Rc<Foo> as self somehow, so I could do let x=Rc::new(Foo{..}); x.some_method(); ?
[02:21:27] *** Quits: geoffhill (geoffhill@moz-244CF33A.amazon.com) (Quit: geoffhill)
[02:21:33] <earlz> Or wait, I guess my impl would just be on Rc<Foo>, not Foo itself
[02:22:41] <sfackler> you could impl Rc<Foo>, but I'd personally just make a struct wrapping Rc<Foo> and implement some_method on that
[02:23:38] *** Quits: kurisumasu (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: G'night everynyan~!)
[02:23:42] <dcrewi> sfackler: this may not fit what you're doing, but another solution is to push some_method into a trait and define that trait on Rc<T> as well
[02:23:50] <earlz> heh, you can't do something like RcMut<Foo>::new() apparently :/ 
[02:23:55] *** jorendorff_away is now known as jorendorff
[02:24:08] *** toshok` is now known as toshok
[02:25:07] *** Quits: zz_kimundi (kimundi@moz-E2582413.dip0.t-ipconnect.de) (Ping timeout)
[02:25:07] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Ping timeout)
[02:25:21] <earlz> protomvc.rs:155:19: 155:24 error: unresolved name `RcMut`.
[02:25:21] <earlz> protomvc.rs:155     let mut router=RcMut<Router>::new();
[02:26:36] <strcat> earlz: the syntax would be new::<T>()
[02:26:42] <strcat> but it expects 1 parameter, not 0
[02:27:11] <strcat> rusti: let x = Rc::new(1); let y = x.clone(); *y.borrow()
[02:27:13] -rusti- pastebinned 13 lines of output: http://ix.io/8uN
[02:27:23] <strcat> rusti: use std::rc::Rc; let x = Rc::new(1); let y = x.clone(); *y.borrow()
[02:27:24] -rusti- 1
[02:27:27] <earlz> No, I mean I'm trying do an impl on Rcmut<Router> to provide a custom new function
[02:27:52] <earlz> I don't actually think I need Rc there afterall though
[02:28:39] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[02:29:01] *** Joins: zz_kimundi (kimundi@moz-265AA1A2.dip0.t-ipconnect.de)
[02:29:18] *** zz_kimundi is now known as kimundi
[02:30:35] <earlz> In C# I tended to stuff references to everything everywhere "just in case" .. in Rust adding a reference somewhere that it's not needed is usually ridiculously hard heh
[02:31:26] *** Quits: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net) (Client exited)
[02:36:31] *** Joins: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net)
[02:38:06] *** Quits: pcwalton (pcwalton@moz-B51927E9.hsd1.ca.comcast.net) (Quit: pcwalton)
[02:38:06] *** Joins: jyasskin_w (jyasskin@DAF66858.C60FE7DC.4065847B.IP)
[02:38:16] *** Quits: heftig (heftig@moz-A0106691.dip0.t-ipconnect.de) (Quit: Quitting)
[02:38:51] *** Joins: heftig (heftig@moz-A0106691.dip0.t-ipconnect.de)
[02:39:16] *** Joins: tautologico (shung@703660AA.CFE755C8.C27E1635.IP)
[02:39:34] *** Quits: fyolnish (fyolnish@moz-5CEAE5D8.uqwimax.jp) (Client exited)
[02:39:55] *** Joins: fyolnish (fyolnish@moz-5CEAE5D8.uqwimax.jp)
[02:40:19] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[02:40:21] <tautologico> so any plans to add higher-kinder types?
[02:40:47] *** Quits: jordyd (jordyd@7DAC4ACE.77F880E0.D9401097.IP) (Ping timeout)
[02:41:02] *** Quits: Gpin (hell@moz-B9EFFE2E.dyn.optonline.net) (Quit: AndroIRC - Android IRC Client ( http://www.androirc.com ))
[02:41:43] *** Quits: fyolnish (fyolnish@moz-5CEAE5D8.uqwimax.jp) (Ping timeout)
[02:42:08] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[02:42:08] *** Quits: Jesin (Jessin_@moz-F9E93AAD.cc.lehigh.edu) (Ping timeout)
[02:42:08] *** Quits: simon (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[02:42:13] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:42:52] <aatch> earlz, yeah, that's kind of the point for Rust. Memory safety without garbage collection.
[02:44:33] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[02:45:36] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[02:45:59] *** Quits: sw17ch (sw17ch@moz-675AFBCF.hsd1.mi.comcast.net) (Ping timeout)
[02:46:17] <earlz> yea, it's about as eye opening as the last time I looked at a functional programming language. Having to formally qualify ownership of pieces of memory causes you to have to really think about your structures, where as in C, it might work with a few memory leaks heh
[02:46:37] <jack> What does error: can't find crate for `std`
[02:46:41] <jack> mean?
[02:46:59] <jack> This seems to happen occasionally when using #[feature(foo)]; annotations on a crate.
[02:47:16] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[02:51:09] *** Joins: [squiddy] (squiddy@moz-72DD312B.adsl.alicedsl.de)
[02:52:04] *** Quits: [squiddy] (squiddy@moz-72DD312B.adsl.alicedsl.de) (Quit: Leaving)
[02:52:18] *** Joins: marti1125 (Mibbit@95B7094E.988D4E0B.84437BC5.IP)
[02:52:25] <marti1125> hi!!
[02:52:44] <marti1125> someone can help me?
[02:52:55] <marti1125> I can't run rust in win7
[02:53:14] <mcphrerin> marti1125: Rust on windows isn't the easiest.  Where are you stuck?
[02:53:18] <aatch> marti1125, care to elaborate? We aren't too strong on windows yet
[02:54:00] <earlz> Is there anything I can do to avoid having to explicitly do { } to force this object out of scope with a possible borrowed pointer? http://pastebin.com/pzQrpdy0
[02:54:27] *** Quits: Earnestly (earnest@moz-BE290A2B.dyn.plus.net) (Ping timeout)
[02:54:40] <marti1125> :O 
[02:54:44] <aatch> earlz, I don't think so.
[02:54:52] <klutzy> marti1125: do you use 0.8 binary or latest one from source?
[02:55:02] <marti1125> I saw this (the program can't start because libgcc_s_dw2-1.dll is missing from you computer)
[02:55:25] <marti1125> klutzy: I installed .exe
[02:55:28] <klutzy> marti1125: aha, you definitely use 0.8. you need some mingw dll files
[02:55:38] <marti1125> ok
[02:56:07] <mcphrerin> marti1125: there is a wiki page explaining how to fix that; let me find it
[02:56:08] <marti1125> this ?? http://sourceforge.net/projects/mingw/
[02:56:16] <mcphrerin> (This was fixed after 0l8)
[02:56:23] <mcphrerin> 0.8 rather
[02:56:27] *** Joins: sw17ch (sw17ch@moz-675AFBCF.hsd1.mi.comcast.net)
[02:57:16] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[02:57:21] *** Joins: Jesin (Jessin_@moz-2FC45CE5.cc.lehigh.edu)
[02:57:23] <klutzy> marti1125: yep. they provide installer, but it installs programs which are too new for us
[02:57:38] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[02:57:44] <klutzy> marti1125: https://github.com/mozilla/rust/wiki/Note-getting-started-developing-Rust
[02:58:09] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Client exited)
[02:58:19] <marti1125> klutzy: thanks :)
[02:59:06] *** Joins: eholk (eric@moz-F70D5031.hsd1.in.comcast.net)
[02:59:39] *** Joins: dcrewi (david@moz-AB8667CE.gyrae.net)
[03:00:13] <earlz> Removed all @'s from my program :) Doing so required me to actually think about ownership.. turns out I didn't need reference counting either heh
[03:00:54] <aatch> earlz, woo!
[03:01:43] <earlz> garbage collection is just a crutch for the weak :)
[03:01:47] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[03:02:29] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[03:03:13] <tautologico> I've written a few hundred lines of rust code so far
[03:03:22] <tautologico> I still haven't used a single @
[03:03:25] <tautologico> this was a surprise
[03:03:32] <bjz_> :)
[03:03:44] *** jorendorff is now known as jorendorff_away
[03:04:09] <tautologico> probably more than 1k LOC already
[03:06:08] <earlz> heh my MVC prototype project is 171 lines. It's getting close to the time to integrate it with rust-http :) 
[03:07:12] <tautologico> can I use a type parameter with the Self type?
[03:07:42] <aatch> tautologico, what do you mean?
[03:09:34] <tautologico> Self<T>
[03:10:31] <aatch> tautologico, no, since Self is the type the method is implemented on.
[03:10:58] <tautologico> that's what I thought
[03:11:33] *** Quits: echristo (echristo@4EEA9249.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[03:12:40] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[03:13:33] *** Quits: vmx (vmx@8155E38.294C4FB6.EBB03D7A.IP) (Quit: Leaving)
[03:14:07] *** Joins: pcmattman (pcmattman@moz-D9B7D938.net)
[03:14:34] <sfackler> earlz: try "let _ = test;"
[03:14:40] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[03:14:53] <tautologico> is return a reserved word?
[03:17:06] <mcphrerin> Yes, return returns early from a function
[03:17:18] <aatch> rusti: return;
[03:17:21] -rusti- pastebinned 12 lines of output: http://ix.io/8rG
[03:17:31] <tautologico> I know, but can I define a function called return or is it reserved?
[03:17:31] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[03:17:41] <mark_edward> is there any way to use rustc --test when you need to use std::rt::start_on_main_thread
[03:17:42] <aatch> tautologico, it's a keyword, so no.
[03:18:49] *** Quits: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP) (Ping timeout)
[03:18:52] <aatch> because it would interfere with return syntax. Calling a function called return: `return(1,2,3)`, returning a 3-tuple: `return (1,2,3)`
[03:19:21] <tautologico> yes
[03:19:25] <aatch> The lexer skips whitespace, so the parser just sees: 'return', '(', '1', ... etc.
[03:22:35] *** Joins: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP)
[03:23:13] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:23:33] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[03:24:22] *** Joins: torsopants (Mibbit@moz-4B2DE764.hsd1.wa.comcast.net)
[03:24:57] <torsopants> Greetings
[03:24:58] *** Joins: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP)
[03:25:39] <mcphrerin> How does blocking C functions called through the ffi interact with the runtime?
[03:27:08] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[03:29:24] *** Joins: sankha93 (Instantbir@483B7190.AA42D49B.2FB84AC6.IP)
[03:30:18] <torsopants> Is there a plan for a dlopen-like API?
[03:31:18] <klutzy> std::unstable::dynamic_lib?
[03:32:40] <torsopants> Is it undocumented?  I just looked at the libstd/libextra docs.
[03:32:41] *** Quits: eholk (eric@moz-F70D5031.hsd1.in.comcast.net) (Quit: Konversation terminated!)
[03:33:25] *** Quits: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP) (Ping timeout)
[03:35:12] *** Quits: fran_ (fran@moz-DEF1167F.telecom.net.ar) (Ping timeout)
[03:36:00] <mcphrerin> torsopants: it's half-baked / probably broken, I think
[03:36:13] *** Quits: sankha93 (Instantbir@483B7190.AA42D49B.2FB84AC6.IP) (Connection reset by peer)
[03:36:14] <mcphrerin> patches welcome :P
[03:36:57] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[03:37:28] *** mcphrerin is now known as mcpherrin
[03:37:32] <torsopants> Hmm.  It is even possible to have a memory-safe dlopen implementation?
[03:37:46] <torsopants> I guess only if you never allow the library to be unloaded.
[03:38:26] <torsopants> Then you just need to implement some sort of dynamic type check when looking up a symbol.
[03:39:01] *** Joins: fran_ (fran@moz-8E824616.telecom.net.ar)
[03:39:24] <sfackler> you can make it memory safe, or close to it
[03:40:00] <sfackler> the lifetime of the function pointer could be scoped to the lifetime of the library object
[03:40:13] <sfackler> if it's a rust library, you can theoretically even typecheck the symbol you're pulling
[03:40:52] <torsopants> What about items within the library that have static lifetimes?  If a reference can escape the library, you can never unload it safely.
[03:42:17] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[03:42:43] *** Joins: mib_julrk0 (Mibbit@E19C1D7A.4B605195.A208C5.IP)
[03:43:11] *** Quits: minzh (Mibbit@AEC6E6CC.5CE80800.D2BA945D.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:43:18] *** Quits: mib_julrk0 (Mibbit@E19C1D7A.4B605195.A208C5.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:43:32] <sfackler> so the idea is
[03:43:57] <sfackler> you load a library by calling DynamicLibrary::open("libfoo.so")
[03:44:04] <sfackler> it returns a DynamicLibrary object
[03:44:17] <sfackler> currently, you then do something like
[03:44:18] *** Joins: NewGuy (Mibbit@moz-E759CEF9.resnet.usf.edu)
[03:44:34] *** Quits: sw17ch (sw17ch@moz-675AFBCF.hsd1.mi.comcast.net) (Quit: sw17ch)
[03:44:36] <NewGuy> Howdy everybody.
[03:44:44] <sfackler> let f: extern "C" fn(c_int) -> c_int = library.load("my_fn");
[03:44:59] <sfackler> that's obviously unsafe since f can outlive the lifetime of "library"
[03:45:11] <sfackler> and libfoo will get unloaded when library falls out of scope
[03:45:22] *** Joins: pcwalton (pcwalton@moz-B51927E9.hsd1.ca.comcast.net)
[03:45:22] *** ChanServ sets mode: +ao pcwalton pcwalton
[03:45:24] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:45:42] <sfackler> but it should be possible to have load return something that's lifetime is scoped to that of library's
[03:45:59] <sfackler> so if it's possible to use "f", then the library it points to must still be loaded
[03:46:07] <NewGuy> Real quick question. I wrote a function that counts the words in a given string using a set of common delimiters. http://mibpaste.com/BB0EE7 
[03:46:18] <tautologico> how do I call a static method from a trait? (using something which has an impl of the trait, not a trait object)
[03:46:38] <NewGuy> Currently, the implementation is case-sensitive, which is not the desired effect.
[03:47:08] <NewGuy> How would I go about using case-insensitive comparison when using insert_or_update_with?
[03:47:08] <aatch> tautologico, `MyTrait::function::<Type>()` I think.
[03:47:17] <torsopants> That's fine, but imagine that libfoo is a rust library, and you load a function that returns an item with lifetime 'static (e.g. a global string constant)
[03:47:53] <sfackler> oh, yeah, then you're SOL
[03:47:56] <torsopants> This isn't bound by the lifetime of the library handing.  However, if you dlclose the library, the page containing the data will be unmapped from the process.
[03:48:09] <torsopants> s/handing/handle/
[03:48:11] <sfackler> the dynamic_library API will always end up being tagged unsafe for that reason
[03:48:32] <torsopants> Unless you never call dlclose
[03:48:46] <sfackler> yeah, you could have a version that intentionally leaks the library
[03:48:57] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[03:48:59] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[03:49:20] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Quit: anshin)
[03:49:29] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[03:49:30] *** Joins: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP)
[03:49:34] <torsopants> People will probably want the ability to use plugin systems with Rust while sticking to the safe subset
[03:50:08] <aatch> torsopants, that would still be possible. Just need to stick to some rules.
[03:50:40] <sp3d> torsopants: shouldn't the dlopen functionality just turn 'static things to 'library or such?
[03:50:40] <aatch> The low-level API would still be unsafe, but you could implement a safe system on top of it.
[03:51:17] <sp3d> 'static can't have a constructor or destructor afaik so I don't see how correctness would be upset... unless you needed to pass the thing to a function requiring a 'static argument :|
[03:51:26] <pcmattman> NewGuy: you could lowercase the string going in, case normalisation rather than case insensitive comparisons
[03:51:35] <torsopants> Destruction doesn't matter
[03:51:51] <torsopants> Even if it's just a reference to an int or something, the memory backing it goes away on dlcose
[03:52:01] <torsopants> So you now have a segfault waiting to happen
[03:52:05] <sp3d> right--convert 'static to a shorter lifetime and you're ok
[03:52:09] <tautologico> it's not working
[03:52:34] <sp3d> unless 'static is named in function parameters, in which case you do have a problem
[03:52:37] <sfackler> sp3d: I don't know if that's possible in the general case
[03:52:46] <NewGuy> pcmattman: That was my backup plan, actually. In Ada, the way hash maps work I can specify an Eq function, so I was wondering if there was an equivalent here! 
[03:52:55] <sp3d> dunno, it seems not completely unreasonable
[03:53:04] <sp3d> soundness is hard!
[03:53:31] <sfackler> the trouble is that you could get arbitrarily far away from the dynanmic_lib interface before running into a 'static lifetime
[03:53:48] <sfackler> e.g. imagine a function which returns a function which returns a 'static string
[03:53:53] <tautologico> that's what I'm trying: https://gist.github.com/tautologico/7002435
[03:53:56] <sp3d> hmmm
[03:54:13] <aatch> sp3d, well technically getting from symbol to function is just a transmute, so you could just not transmute into something with `-> 'static...`
[03:54:49] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[03:55:38] <aatch> tautologico, in that case, you have to type-hint the variable
[03:55:57] <torsopants> Can't a value with lifetime 'static be used where any other lifetime is expected, since it is as-long-lived as another other possible lifetime?
[03:56:11] <torsopants> *any other
[03:56:17] <sfackler> yep
[03:56:25] <aatch> so `let opt : Zoption<int> = Monad::ret(5);`
[03:56:32] <tautologico> ah
[03:56:37] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[03:57:19] <tautologico> aatch: it works, thank you
[03:57:30] <sp3d> hmm, the problem I keep coming back to with converting all 'statics in a lib into a library-object-linked lifetime is interoperation with types having an explicit 'static lifetime
[03:57:32] <torsopants> So think of a function that take an Option<String> and returns a reference either to the string inside, or to a default static string if it's None
[03:58:01] <torsopants> This doesn't have 'static anywhere in the signature, but it would cause a hazard on dlclose
[03:58:14] *** Joins: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP)
[03:58:31] *** Joins: MrOrdinaire (Mibbit@1A659656.A607747.FD383126.IP)
[03:58:32] <sp3d> hmmm
[03:58:40] <torsopants> I think you just have to never unload the library
[03:58:55] <nwmcsween> what is the default string type in rust?
[03:59:08] <nwmcsween> a struct with len?
[03:59:17] <nwmcsween> pascal style?
[03:59:19] <pcwalton> nwmcsween: a (ptr, len) tuple
[03:59:27] <nwmcsween> why not ptr ptr?
[03:59:33] <sfackler> iirc, it's backed by a [u8]
[03:59:46] <pcwalton> because it makes bounds checks on indexing easier
[04:01:36] <nwmcsween> shouldn't it be the same with ptr ptr?
[04:02:45] <MrOrdinaire> did any change in the runtime break libc::read and libc::write?
[04:04:03] *** Quits: doomlord_ (servitor@moz-6732E9D4.range86-184.btcentralplus.com) (Ping timeout)
[04:04:19] *** Quits: Jesin (Jessin_@moz-2FC45CE5.cc.lehigh.edu) (Quit: Leaving)
[04:05:14] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[04:05:49] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[04:05:55] *** Quits: lfox (lfox@moz-B8648F0F.nycmny.fios.verizon.net) (Quit: ZZZzzz…)
[04:06:41] <MrOrdinaire> here's a small program reproducing the bug on my machine. It's confirmed on my friend's machine, too. https://gist.github.com/mrordinaire/7002534
[04:07:31] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[04:07:31] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[04:07:44] *** Quits: lerc (quassel@moz-95D8600C.telstraclear.net) (Ping timeout)
[04:08:51] *** Quits: marti1125 (Mibbit@95B7094E.988D4E0B.84437BC5.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:09:15] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Ping timeout)
[04:10:44] <strcat> nwmcsween: having the length lets you check right away and then offset the ptr with inbounds arithmetic (giving LLVM good aliasing info)
[04:11:01] *** Joins: lerc (quassel@3563182F.869384DE.788638A4.IP)
[04:11:13] <strcat> if you have two ptrs, you have to calculate the length and then offset
[04:11:38] <strcat> if you offset first and compare to the end, you can't use inbounds ptr arithmetic
[04:11:58] <strcat> anyway it probably doesn't matter very much
[04:12:18] <strcat> VecIterator is a ptr pair
[04:12:50] <Jesse> note to self: VecIterator != Velociraptor
[04:13:09] <mcpherrin> How can I ensure 1 rust task == 1 os thread?
[04:13:34] <mcpherrin> (So I don't screw things up using a blocking ffi call)
[04:13:36] <sfackler> MrOrdinaire: it may be libuv doing bad things to the file descriptors at fork time
[04:13:44] <strcat> common use case of an iterator is consuming it, so two ptrs means you need to update 1 field instead of both
[04:13:55] <strcat> matters a lot for loops
[04:14:13] <sfackler> mcpherrin: screw things up as in running out of threads and deadlocking yourself?
[04:14:18] * strcat is fine with having both for now
[04:14:38] <mcpherrin> sfackler: yeah.
[04:16:59] *** Quits: pcwalton (pcwalton@moz-B51927E9.hsd1.ca.comcast.net) (Quit: pcwalton)
[04:17:20] <sfackler> iirc there was a way to do it in oldrt, but maybe not in newrt
[04:17:34] <sfackler> there appears to be a way of manually booting OS threads in std::rt::thread
[04:17:45] <sfackler> dunno how sketchy it is though
[04:17:57] <MrOrdinaire> sfackler: okay... that's bad
[04:18:20] *** Quits: lerc (quassel@3563182F.869384DE.788638A4.IP) (Ping timeout)
[04:18:57] *** Joins: lerc (quassel@moz-1AC1A28C.telstraclear.net)
[04:19:58] <mcpherrin> sfackler: looks like those don't run in task context, which would be annoying 
[04:20:20] <zenware> has anybody experimented with stuff like writing a terminal emulator in rust?
[04:20:30] <mcpherrin> zenware: it's on my TODO :)
[04:20:32] <sfackler> mcpherrin: what are you interfacing with?
[04:20:45] <mcpherrin> sfackler: C library I've got
[04:20:56] <mcpherrin> For networking stuffs.
[04:21:38] <zenware> mcpherrin: Okay, I was just curious because I've been playing around lately and thought about doing something like that. Mostly because I'd get to call it rustty
[04:21:54] <mcpherrin> looks like std::rt:sched might be helpful for me?
[04:22:00] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[04:22:07] <sfackler> mcpherrin: convert it all to rust :D
[04:22:18] <mcpherrin> zenware: haha, I was going to use the same name :p
[04:22:27] <mcpherrin> sfackler: I still need to call berkley sockets at some point...
[04:22:52] <mcpherrin> Unless I like, add support for raw sockets to the runtime
[04:25:47] *** Quits: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP) (Ping timeout)
[04:26:06] <sfackler> there is a skeleton for unix sockets in std::rt::io::net::unix that you could implement if you feel adventurous. libuv has native support for them
[04:26:15] *** Joins: alonlevy (alon@moz-697DD27F.bb.netvision.net.il)
[04:27:08] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Quit: Leaving)
[04:27:47] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[04:28:39] *** Joins: Jesin (Jessin_@moz-76F15F40.cc.lehigh.edu)
[04:30:01] *** Joins: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP)
[04:30:39] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[04:30:58] *** Joins: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[04:32:15] <mcpherrin> eugh I just want to write the code I need to write tonight
[04:32:20] <mcpherrin> not implement things in libstd :P
[04:32:28] <mcpherrin> Fuck it I'm writing it in c++ instead
[04:33:10] <mcpherrin> augh I don't want to do that either anymore
[04:33:14] * mcpherrin goes to bed defeated
[04:34:21] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[04:34:48] <tautologico> can I create an anonymous trait object?
[04:35:07] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[04:35:11] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[04:37:53] *** Quits: NewGuy (Mibbit@moz-E759CEF9.resnet.usf.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[04:37:59] *** Quits: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Quit: jeffdb)
[04:38:06] <Luqman> mcpherrin: do std::task::spawn_sched(std::task::SingleThreaded) { ... } 
[04:38:10] *** Quits: relrod (relrod@moz-AABB5D31.redhat.com) (Ping timeout)
[04:38:17] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[04:38:21] *** Quits: nixprime (nixprime@moz-B5BC087D.hsd1.ca.comcast.net) (Ping timeout)
[04:39:14] <mcpherrin> Luqman: isn't that the opposite of what I want?
[04:39:27] <mcpherrin> Only giving me one thread?
[04:40:43] <mcpherrin> Or I will go read the source.
[04:40:53] <Luqman> that'll give you a new task in it's own thread which is what i thought you meant by 1 rust task == 1 os thread
[04:41:11] <mcpherrin> Luqman: Okay, sure
[04:41:31] <mcpherrin> Luqman: How does that interact with work stealing?
[04:41:51] <mcpherrin> That new thread won't steal work from other threads?
[04:41:54] *** Joins: nixprime (nixprime@moz-B5BC087D.hsd1.ca.comcast.net)
[04:41:58] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[04:42:27] *** Joins: simon (simon@moz-FD4ADBC6.cable.teksavvy.com)
[04:42:44] <Luqman> mcpherrin: no, it's a non-work stealing scheduler
[04:42:57] <Luqman> https://github.com/mozilla/rust/pull/9857#issuecomment-26372082
[04:43:47] <mcpherrin> Okay, that makes sense.
[04:43:51] <mcpherrin> Yes, that's what I want
[04:44:15] <mcpherrin> But now it's more than an hour to figure that out and I'm sleepy :P
[04:44:39] <Luqman> lol
[04:44:43] *** Quits: fran_ (fran@moz-8E824616.telecom.net.ar) (Ping timeout)
[04:45:40] *** Joins: nattoenemies (tsutsumi@moz-A369A791.warosu.org)
[04:45:53] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[04:46:19] *** Quits: nixprime (nixprime@moz-B5BC087D.hsd1.ca.comcast.net) (Ping timeout)
[04:48:18] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:48:22] *** Joins: fran_ (fran@moz-A50E10D2.telecom.net.ar)
[04:48:35] *** Quits: nattoenemies (tsutsumi@moz-A369A791.warosu.org) (Quit: さよなら)
[04:49:53] *** Joins: nixprime (nixprime@moz-B5BC087D.hsd1.ca.comcast.net)
[04:51:26] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[04:51:37] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[04:51:51] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[04:51:51] *** Quits: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP) (Client exited)
[04:51:58] *** Joins: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP)
[04:53:09] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[04:53:09] *** Quits: Yeri (jasonjasmi@41C91A8A.CE609BA5.E39FBF79.IP) (Quit: Yeri)
[04:55:55] *** Joins: relrod (relrod@moz-AABB5D31.redhat.com)
[04:56:01] *** Quits: eddyb9 (eddy@3C6E2DBB.FFB4E060.A5830293.IP) (Ping timeout)
[04:59:08] *** Joins: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[04:59:19] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[05:00:08] *** Quits: torsopants (Mibbit@moz-4B2DE764.hsd1.wa.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:00:14] *** Joins: dbaupp (Thunderbir@moz-54ADD9F4.lns20.syd6.internode.on.net)
[05:01:03] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[05:01:18] *** Quits: jvns_ (bork@moz-DE62990.nyc.res.rr.com) (Ping timeout)
[05:02:18] *** Joins: nattoenemies (tsutsumi@moz-A369A791.warosu.org)
[05:02:32] *** Quits: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Quit: jeffdb)
[05:02:41] *** Quits: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP) (Ping timeout)
[05:03:59] *** Joins: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[05:07:02] *** Joins: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP)
[05:07:13] *** Quits: tikue_ (tikue_star@2772A85E.EB08480C.689607DE.IP) (Ping timeout)
[05:07:33] *** Quits: MrOrdinaire (Mibbit@1A659656.A607747.FD383126.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[05:08:19] *** Quits: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Quit: jeffdb)
[05:10:40] *** Joins: Heather (Heather@19663F6.F53BAACC.9C17E900.IP)
[05:10:48] *** Quits: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP) (Ping timeout)
[05:10:52] <Heather> Good morning
[05:11:13] <Heather> where can I check good up-to 8.0 date threads handling example? :)
[05:11:43] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[05:11:43] <mcpherrin> 0.8 is already not up to date ;)
[05:12:01] <Heather> damn
[05:12:23] *** Quits: Kxepal (Miranda@moz-10B83CD2.pppoe.mtu-net.ru) (Ping timeout)
[05:12:35] <Heather> mcpherrin wait, I saw you on "rust this week" but sadly don't know what it was about
[05:12:46] *** Quits: dbaupp (Thunderbir@moz-54ADD9F4.lns20.syd6.internode.on.net) (Ping timeout)
[05:12:49] <mcpherrin> Heather: haha excellent
[05:12:52] *** Quits: canhtak (jeremy@moz-EF57C296.wl.t.ulaval.ca) (Quit: canhtak)
[05:12:54] <mcpherrin> my campaign of spam is victorious!
[05:13:20] *** Joins: dew1 (Instantbir@moz-8EDFD40B.static.stls.mo.charter.com)
[05:13:24] *** Quits: mark_edward (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Client exited)
[05:13:34] *** Joins: eddyb9 (eddy@DAB169D3.A32D897.4A6B528C.IP)
[05:14:02] <mcpherrin> Heather: anyways, do you mean OS threads or do you mean Rust tasks?
[05:14:06] *** Joins: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP)
[05:14:10] <mcpherrin> Because while they're related, it isn't quite the same question
[05:14:26] *** Quits: dew (Instantbir@moz-8EDFD40B.static.stls.mo.charter.com) (Ping timeout)
[05:15:03] <Heather> mcpherrin rust tasks? do they runs in the os threads?
[05:15:17] <Heather> mcpherrin here: http://cmr.github.io/blog/2013/10/12/this-week-in-rust/ -> mcpherrin in #rust says “Hello, everyone!” :)
[05:15:30] *** Joins: Kxepal (Miranda@moz-2EDC98B.pppoe.mtu-net.ru)
[05:15:40] <mcpherrin> Heather: yes, that's me!  Saying hello to everyone.
[05:15:47] <mcpherrin> You're everyone so you can feel included :D
[05:16:02] <Heather> hello everyone!
[05:16:02] <eddyb9> can I use #[cfg(...)] to optionally add fields to a structure?
[05:16:09] <Heather> mcpherrin will they write about me too? :)
[05:16:12] <eddyb9> (assuming I got disconnected)
[05:16:25] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Ping timeout)
[05:16:32] <mcpherrin> Heather: if you want to.  cmr writes that, and I told him to put that there.  So he did
[05:16:34] *** Quits: simon (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[05:16:49] <Heather> mcpherrin sure I want :D
[05:17:24] <mcpherrin> cmr: ^ Heather says "Hello, Everyone!" too.  Very important TWiR announcements here.
[05:17:49] *** Quits: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP) (Ping timeout)
[05:17:59] <mcpherrin> Anyways it's approaching my bed time so i won't be able to help you with threading things
[05:18:02] <mcpherrin> sorry :)
[05:18:05] * Heather is reading about rust tasks
[05:18:20] <Heather> mcpherrin good night then :)
[05:18:32] *** Joins: tikue_ (tikue_star@2772A85E.EB08480C.689607DE.IP)
[05:19:56] <eddyb9> what are my options for initializing a static structure without giving values for its fields?
[05:20:17] <eddyb9> I assume MyStruct::new() won't work :(
[05:21:08] *** Quits: tikue_ (tikue_star@2772A85E.EB08480C.689607DE.IP) (Ping timeout)
[05:21:11] *** Joins: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP)
[05:24:11] *** Joins: dbaupp (Thunderbir@moz-54ADD9F4.lns20.syd6.internode.on.net)
[05:28:52] <eddyb9> do I need a macro to create structure and an init function to do the non-const stuff?
[05:28:55] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[05:29:02] <eddyb9> actually, with a macro, it would be constant
[05:30:00] *** Quits: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP) (Ping timeout)
[05:31:09] <dbaupp> eddyb9: you can make a `pub static DEFAULT_FOO: Foo = Foo { ... };` and use that
[05:32:03] <eddyb9> dbaupp: it's mutable. wait, can I copy an immutable default into a mutable static?
[05:32:15] <dbaupp> eddyb9: yes
[05:32:32] <dbaupp> rusti: static foo: int = 1; static mut bar: int = foo;
[05:32:34] -rusti- ()
[05:33:04] <eddyb9> sweeet, thanks :D
[05:33:15] *** Joins: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[05:33:31] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[05:33:45] <eddyb9> pcmattman: you're sneaky
[05:34:12] *** Joins: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP)
[05:35:59] <eddyb9> dbaupp: what if I have a reference with the 'self lifetime inside the structure?
[05:36:26] *** Parts: Asa (asa@4508CAE6.38324963.204CA821.IP) ()
[05:36:38] <dbaupp> eddyb9: it'll need to be 'static for a `static`, i.e. `static FOO: Foo<'static> = Foo { ... }`
[05:37:17] <eddyb9> dbaupp: can I change the reference later?
[05:37:34] <eddyb9> although there's no sane default :(
[05:37:36] <dbaupp> eddyb9: no, it's a constant
[05:38:10] <eddyb9> if I use a macro, all my problems are solved. but what I want really is a constexpr constructor
[05:38:42] <dbaupp> not possible (yet, or in the near future)
[05:39:01] <dbaupp> so, yes, a macro appears to be the only solution.
[05:40:26] *** Joins: ross (ross@moz-5EA04060.br.br.cox.net)
[05:40:44] <eddyb9> dbaupp: can macros do constexpr sized vectors as comprehensions?
[05:40:58] * dbaupp doesn't understand the question
[05:41:24] <eddyb9> [foo {i: i} for(i in range(0, N))]
[05:41:47] <dbaupp> no
[05:42:05] *** Quits: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[05:42:08] <eddyb9> the number is a literal, can the macro not recurse based on that?
[05:42:12] <dbaupp> nope
[05:42:36] <dbaupp> well, yes, if you write a pattern for each of 1, ..., 100
[05:42:57] <dbaupp> but macros can't do the addition/subtraction necessary
[05:43:31] <dbaupp> (they're apparently turing complete, so in theory you can do something like it... but it won't be pretty.)
[05:43:57] *** Joins: oberstet (quassel@moz-273B8CA4.dynamic.mnet-online.de)
[05:47:11] <Heather> how to get value from Result?
[05:47:57] <Heather> unwrap ?
[05:48:28] <dbaupp> match foo { Ok(o) => { ... } Err(e) => { /* handle error */ }
[05:48:28] <tautologico> you can use a pattern match
[05:48:30] <dbaupp> }
[05:49:41] <Heather> dbaupp I see, I've got not fulfill `Send`, in a bounded closure, how can I path and &Path to closure?
[05:49:50] *** Joins: tikue_ (tikue_star@2772A85E.EB08480C.689607DE.IP)
[05:51:11] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:52:28] <Heather> dbaupp e.g. I do task::try and can't use my &Path variable there, I should pass it somehow :S but for now can't understand how
[05:52:36] *** Joins: sanxiyn (tinuviel@B4104EBB.3CC170B1.1E14B209.IP)
[05:52:59] *** Quits: themgt (themgt@moz-84498CCE.baf.movistar.cl) (Ping timeout)
[05:53:48] *** Joins: themgt (themgt@moz-9B7DF13D.baf.movistar.cl)
[05:55:24] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[05:55:33] *** Quits: tikue_ (tikue_star@2772A85E.EB08480C.689607DE.IP) (Ping timeout)
[06:01:03] *** Joins: m_kato (m_kato@moz-C286AD9A.bitcat.net)
[06:01:28] *** Quits: Jesin (Jessin_@moz-76F15F40.cc.lehigh.edu) (Ping timeout)
[06:03:21] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[06:03:34] *** Joins: Jesin (Jessin_@moz-76F15F40.cc.lehigh.edu)
[06:06:17] *** Quits: noam_ (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[06:06:41] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[06:07:04] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[06:07:17] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[06:08:52] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[06:11:27] *** Quits: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP) (Ping timeout)
[06:11:54] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[06:14:06] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[06:15:42] *** Joins: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP)
[06:16:39] *** Joins: jaen (jaen@138A5D71.4C038AE9.C4431F0E.IP)
[06:17:21] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[06:17:49] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[06:19:45] *** Joins: sankha93 (Instantbir@483B7190.AA42D49B.2FB84AC6.IP)
[06:21:06] *** Quits: alonlevy (alon@moz-697DD27F.bb.netvision.net.il) (Ping timeout)
[06:21:06] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[06:22:26] *** Joins: alonlevy (alon@moz-697DD27F.bb.netvision.net.il)
[06:22:52] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[06:23:07] *** Joins: tikue_ (tikue_star@2772A85E.EB08480C.689607DE.IP)
[06:23:13] <ChrisMorgan> earlz: just looking briefly at your RustyMVC proto, and I have a one or two comments that might help. Router.add takes a (heap-allocated) ~Route and immediately dereferences it; this is inefficient: have it take a (stack-allocated) Route instead. In general, avoid ~ beyond vectors and strings.
[06:23:19] *** Joins: Ms2ger (Ms2ger@moz-FAA90543.ugent.be)
[06:24:13] *** Quits: themgt (themgt@moz-9B7DF13D.baf.movistar.cl) (Quit: themgt)
[06:25:22] *** Quits: tikue_ (tikue_star@2772A85E.EB08480C.689607DE.IP) (Ping timeout)
[06:26:24] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[06:27:58] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Quit: Leaving)
[06:28:42] <ChrisMorgan> Also, in many places where you have a ~str, a &'static str would be slightly more efficient; if you're interested in supporting both (e.g. run-time adding of routes), take a look at std::send_str::SendStr (SendStr et al. are in the prelude, so you don't need to import them).
[06:28:48] *** Joins: squiddy (squiddy@moz-72DD312B.adsl.alicedsl.de)
[06:28:54] <ChrisMorgan> (But using ~str is certainly easier.)
[06:29:53] *** Quits: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP) (Ping timeout)
[06:31:36] <Heather> how should I write something alike :   let res= do task::try |r, loc| {    sync(r, loc);      }; ?
[06:32:18] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[06:33:01] *** Quits: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Quit: jeffdb)
[06:33:25] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[06:33:33] *** Joins: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP)
[06:33:54] <cmr> mcpherrin: Please don't encourage people to abuse my kindness :P
[06:34:16] <Heather> cmr >_<
[06:35:09] <mcpherrin> cmr: :-)
[06:35:51] *** Quits: fran_ (fran@moz-A50E10D2.telecom.net.ar) (Ping timeout)
[06:36:56] <Heather> mcpherrin you're not sleeping -_-'
[06:37:21] *** Quits: squiddy (squiddy@moz-72DD312B.adsl.alicedsl.de) (Ping timeout)
[06:37:26] <mcpherrin> Heather: To be fair, I'm in bed :p
[06:38:01] <Heather> mcpherrin okay, I forgive you :)
[06:38:26] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[06:38:30] *** Joins: whitekis (Mibbit@8F7991D.3C419CA6.67D1952C.IP)
[06:38:54] *** Quits: whitekis (Mibbit@8F7991D.3C419CA6.67D1952C.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:39:10] *** Joins: fran_ (fran@29C57D10.B73F83FF.8ACE28DB.IP)
[06:39:31] <ChrisMorgan> Heather: re. "how should I write ...", could you elaborate?
[06:39:49] <Luqman> mcpherrin: you said you were going to sleep hours ago :P
[06:40:18] *** Quits: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP) (Ping timeout)
[06:41:04] <Heather> ChrisMorgan well it fails with mismatched types: expected `~fn:Send()` but found `~fn:Send(&Crystal:: Repository, &std::path::WindowsPath)` (incorrect number of function parameters)
[06:41:37] <mcpherrin> Luqman: only like one hour now
[06:41:37] <Heather> ChrisMorgan so I want to pass those two arguments to it (sync fn) but don't know how
[06:42:09] <ChrisMorgan> If they're already in scope, it'd just be `do task::try { sync(r, loc) }`
[06:42:37] *** Quits: sanxiyn (tinuviel@B4104EBB.3CC170B1.1E14B209.IP) (Quit: Leaving)
[06:43:02] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Client exited)
[06:43:19] <Heather> ChrisMorgan  fulfill `Send`, in a bounded closure
[06:43:22] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[06:43:36] <Heather> ChrisMorgan cannot capture variable of type `&Crystal::Repository`, which does not
[06:43:47] *** Joins: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP)
[06:44:06] <ChrisMorgan> True. It'll need to be a Repository or ~Repository.
[06:44:32] <Heather> ChrisMorgan should I use .clone or .as_slice ? :S
[06:45:03] <Luqman> you can't send a & to another task
[06:45:10] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[06:45:15] <Heather> it's strange since it's normal for functions to get & arguments
[06:45:16] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[06:45:25] <ChrisMorgan> Assuming the type implements Clone, .clone() is correct.
[06:45:39] <ChrisMorgan> Rust tasks are isolated from one another.
[06:45:52] <ChrisMorgan> Thus, you can't have a reference to another task's objects.
[06:46:07] <Luqman> Heather: yes because the compiler can reason about the lifetime of the object. but if you send it to another task it can't
[06:46:43] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[06:47:12] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[06:48:07] <Heather> ChrisMorgan and then to_owned in fn ?
[06:48:34] <Heather> or ... 01task::try { sync(r.clone().to_owned() ) }`01 ?
[06:48:43] <ChrisMorgan> to_owned is a method on Str.
[06:48:47] <Heather> ah...
[06:49:00] <Heather> how then I can convert Path to &Path ?
[06:49:24] <ChrisMorgan> For t: &T where T implements Clone, t.clone() returns ~T. For t: T, t.clone() returns T.
[06:49:35] <ChrisMorgan> &p
[06:50:09] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[06:51:12] <Heather> ChrisMorgan what means cannot move out of captured outer variable in a heap closure
[06:51:18] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[06:52:13] *** Quits: tautologico (shung@703660AA.CFE755C8.C27E1635.IP) (Quit: tautologico)
[06:52:30] <ChrisMorgan> That's a problem at present which will be resolved with the new function types. The fix is that you'll need to wrap the objects in a Cell and then take them out of it inside the closure.
[06:53:07] <myname> how do i wait for a number of tasks to finish?
[06:53:09] <ChrisMorgan> The reason why this happens is that the closure is taking the objects, but the compiler does not *know* that it will only be called once, and a second call would cause memory inconsistency.
[06:53:20] *** Joins: squiddy (squiddy@moz-72DD312B.adsl.alicedsl.de)
[06:53:38] <ChrisMorgan> myname: take a look at future_result in tasks.
[06:53:48] <Heather> ChrisMorgan use .cell instead of clone?
[06:53:55] <myname> ew :S okay
[06:54:08] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:54:08] *** Quits: sankha93 (Instantbir@483B7190.AA42D49B.2FB84AC6.IP) (Connection reset by peer)
[06:54:14] *** Quits: m_kato (m_kato@moz-C286AD9A.bitcat.net) (Ping timeout)
[06:54:15] <ChrisMorgan> Heather: no, you'll clone it and then put the cloned object into a cell with Cell::new.
[06:54:35] *** Joins: m_kato (m_kato@moz-C286AD9A.bitcat.net)
[06:54:57] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[06:55:57] <ChrisMorgan> https://github.com/chris-morgan/rust-http/blob/master/src/libhttp/server/mod.rs#L78 and onwards may be of use to you, Heather
[06:57:38] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[06:57:45] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[06:58:00] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[06:58:00] *** Quits: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP) (Ping timeout)
[06:59:28] *** Joins: sankha93 (Instantbir@483B7190.AA42D49B.2FB84AC6.IP)
[06:59:38] *** Joins: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[06:59:57] <Heather> ChrisMorgan like this: https://gist.github.com/Heather/7003700 ? o_O
[07:00:44] *** Quits: sankha93 (Instantbir@483B7190.AA42D49B.2FB84AC6.IP) (Quit: Gone to save the world!)
[07:01:05] <Heather> ChrisMorgan at least it works %D
[07:01:37] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[07:01:38] *** Joins: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP)
[07:02:03] <ChrisMorgan> Heather: yep, that's probably what's needed.
[07:03:41] <Heather> ChrisMorgan don't you see it looks a bit complex? :S
[07:03:45] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Ping timeout)
[07:04:17] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[07:04:31] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[07:04:36] <ChrisMorgan> It is, at present.
[07:04:49] *** Quits: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Quit: jeffdb)
[07:06:00] <ChrisMorgan> We do not like that this is how it must be at present.
[07:07:05] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[07:07:21] *** Joins: martndemus (martndemus@moz-E30F5776.adsl.xs4all.nl)
[07:08:02] <Heather> ChrisMorgan I see :) some parts in code should be marked as //this part should be changed with newer compiler
[07:08:25] <Heather> ChrisMorgan who is bors? :)
[07:09:12] <ChrisMorgan> Integration bot.
[07:09:22] <Heather> ChrisMorgan I knew...
[07:09:34] *** Joins: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[07:09:37] *** Quits: alonlevy (alon@moz-697DD27F.bb.netvision.net.il) (Ping timeout)
[07:09:45] * ChrisMorgan took a while to catch on to what bors was when he started with Rust
[07:09:52] <Heather> ChrisMorgan is there some gui things in rust so far?
[07:10:05] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[07:10:19] *** Quits: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP) (Ping timeout)
[07:10:27] <ChrisMorgan> Someone's made wxRust.
[07:11:29] <Heather> ChrisMorgan what about gtk
[07:12:12] <ChrisMorgan> I'm not aware of anything recent. There look to be bindings from mid and late 2012, but those will be absolutely obsolete now.
[07:12:20] *** Quits: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP) (Ping timeout)
[07:12:29] *** Joins: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP)
[07:12:45] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[07:13:53] <Heather> I see...
[07:15:05] <Heather> ChrisMorgan is there timers?
[07:15:13] <ChrisMorgan> Sure, extra::timers, I think
[07:15:29] <Heather> ChrisMorgan cool, and can I run task in async mode?
[07:15:34] *** Quits: tikue (quassel@moz-FEADCD38.hsd1.pa.comcast.net) (Connection reset by peer)
[07:16:01] <ChrisMorgan> Tasks *are* async. What precisely do you mean?
[07:16:24] <Heather> ChrisMorgan I mean parallel
[07:16:37] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[07:17:24] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[07:17:37] <ChrisMorgan> Just spawn multiple tasks.
[07:18:08] *** Quits: zenware (zenware@470ADAFA.537A73B5.DF43B824.IP) (Ping timeout)
[07:18:50] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:18:52] <Heather> ChrisMorgan I do but they are not parallel
[07:19:02] <Heather> ChrisMorgan or task::try is now spawn
[07:19:24] <ChrisMorgan> try is synchronous, blocking until it gets the result of the task.
[07:19:25] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[07:19:32] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[07:19:48] <ChrisMorgan> Note also that by default Rust will only run as many tasks at once as you have logical processors.
[07:19:49] <Heather> I see
[07:20:06] <Heather> it's even good
[07:20:15] *** Joins: zenware (zenware@470ADAFA.537A73B5.DF43B824.IP)
[07:20:46] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[07:20:48] <Heather> ChrisMorgan I want parent to control try Task and kill / abort if it executes to long
[07:21:35] <Heather> not for practical usage but more interesting in deatails of realization
[07:22:11] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[07:22:33] <ChrisMorgan> Take a look around in http://static.rust-lang.org/doc/master/std/task/index.html
[07:23:22] <ChrisMorgan> I'm not certain if tasks can be killed manually by a parent at present.
[07:24:10] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[07:24:18] <Heather> ChrisMorgan well they can just die on their on by timer with fail I guess
[07:24:44] *** Joins: ksh8281 (ksh8281@5AB4884B.FCC4549.14D5B978.IP)
[07:24:46] <Heather> ChrisMorgan but then they should own this timer I think
[07:25:07] <ChrisMorgan> I haven't tried anything along those lines yet and am not certain what the situation is.
[07:25:18] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[07:25:26] *** kimundi is now known as zz_kimundi
[07:26:03] <Heather> ChrisMorgan np ) I will try to get it, thanks for help
[07:27:04] *** Quits: ksh8281 (ksh8281@5AB4884B.FCC4549.14D5B978.IP) (Quit: leaving)
[07:27:05] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[07:27:38] *** Joins: ksh8281 (ksh8281@5AB4884B.FCC4549.14D5B978.IP)
[07:28:06] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[07:30:10] *** flaper87|afk is now known as flaper87
[07:30:19] <ksh8281> hi
[07:30:34] <ksh8281> i have a little question
[07:31:02] *** Joins: DeTeam (DeTeam@3F8887A3.6883A39.F5F3AF2.IP)
[07:32:07] <ksh8281> i am trying to use std::select
[07:32:34] <ksh8281> but rustc cannot found impl of select();
[07:32:44] <ksh8281> https://gist.github.com/ksh8281/e454d58b7e6d414dd4d8
[07:33:27] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[07:33:47] <ksh8281> i got this error message " error: failed to find an implementation of trait std::select::Select for std::comm::Port<int>"
[07:35:13] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[07:35:19] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Connection reset by peer)
[07:35:30] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[07:35:34] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[07:37:03] *** Joins: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP)
[07:39:35] *** Joins: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr)
[07:40:28] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[07:41:09] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[07:42:02] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[07:42:38] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[07:43:47] *** Quits: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP) (Ping timeout)
[07:44:21] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[07:46:52] *** Quits: Jesin (Jessin_@moz-76F15F40.cc.lehigh.edu) (Ping timeout)
[07:46:53] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[07:47:12] *** Joins: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP)
[07:47:20] *** Quits: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP) (Ping timeout)
[07:47:20] *** Joins: Heather__ (Heather@19663F6.F53BAACC.9C17E900.IP)
[07:47:22] *** Joins: alonlevy (alon@moz-B0E66DB7.static.bezeqint.net)
[07:47:35] *** Joins: Jesin (Jessin_@moz-76F15F40.cc.lehigh.edu)
[07:47:56] *** Quits: Heather (Heather@19663F6.F53BAACC.9C17E900.IP) (Ping timeout)
[07:48:43] *** Quits: nattoenemies (tsutsumi@moz-A369A791.warosu.org) (Quit: さよなら)
[07:49:08] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[07:49:21] *** Joins: Heather___ (Heather__@19663F6.F53BAACC.9C17E900.IP)
[07:49:24] *** Heather___ is now known as Heather
[07:49:50] *** Joins: autra (augustin@moz-2EA7A1DF.fullsix.com)
[07:49:53] *** Quits: joone_ (joone@3CCE8CB5.2160464A.A34EC3BB.IP) (Ping timeout)
[07:49:53] *** Quits: Heather__ (Heather@19663F6.F53BAACC.9C17E900.IP) (Ping timeout)
[07:50:16] *** Joins: joone_ (joone@3CCE8CB5.2160464A.A34EC3BB.IP)
[07:50:39] <bjz_> is there a way of popping off the first element of a vector?
[07:51:03] *** Quits: Jesin (Jessin_@moz-76F15F40.cc.lehigh.edu) (Ping timeout)
[07:51:03] *** Quits: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP) (Ping timeout)
[07:51:28] <bjz_> oh, shift_opt
[07:52:07] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[07:53:14] <engla> .shift or .shift_opt
[07:53:41] <engla> but shift/unshift are of course very expensive since the vector can only grow on the far end
[07:53:42] <ChrisMorgan> ksh8281: that is correct; std::comm::Port<T> does not implement std::select::Select.
[07:54:09] <ChrisMorgan> std::rt::comm::Port<T>, however, does.
[07:54:11] <ChrisMorgan> c.f. http://static.rust-lang.org/doc/master/std/select/trait.Select.html
[07:57:12] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:58:15] *** Quits: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Quit: jeffdb)
[07:58:45] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[08:00:39] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[08:01:02] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[08:05:07] <ksh8281> ChrisMorgan : thank you.
[08:05:34] * ChrisMorgan is not sure what the deal is with std::comm vs. std::rt::comm at present
[08:06:24] <ksh8281> what is the function for select([std::comm::Port<T>])?
[08:07:02] <Luqman> ksh8281: what do you mean?
[08:07:28] <ksh8281> i need select function for std::comm::Port<T>
[08:07:37] <ksh8281> sorry for my poor english
[08:07:38] <ChrisMorgan> You mean, how can I select std::comm::Port<T> rather than std::rt::comm::Port<T>.
[08:08:00] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[08:08:11] * ChrisMorgan does not know if it is possible
[08:08:42] <Luqman> ksh8281: ah no, i just misread that. in any case i've used rt::comm just fine but i'm not sure how things will change
[08:09:02] <ChrisMorgan> std::comm::Port doesn't implement any traits which would suggest selectability.
[08:09:14] <ksh8281> ah thank you 
[08:09:17] *** Quits: FreeFull (freefull@31BCA4E6.5B0E29BE.159B5998.IP) (Quit: )
[08:09:18] <ksh8281> i understand
[08:09:34] <ksh8281> i have to use std::rt::comm
[08:09:35] *** Quits: joone_ (joone@3CCE8CB5.2160464A.A34EC3BB.IP) (Ping timeout)
[08:09:42] <ChrisMorgan> Looks like it.
[08:09:50] <ksh8281> for select(port);
[08:09:58] *** Joins: joone_ (joone@3CCE8CB5.2160464A.A34EC3BB.IP)
[08:10:02] <ksh8281> ok thank you very much
[08:11:10] <ChrisMorgan> std::task also uses std::comm rather than std::rt::comm types, so I guess you can't efficiently wait for task results, selecting the first one to finish, at present. :-(
[08:11:54] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[08:12:10] *** Joins: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP)
[08:13:44] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[08:15:09] <ksh8281> ChrisMorgan> Thank you. i understand that!
[08:15:32] *** Quits: zenware (zenware@470ADAFA.537A73B5.DF43B824.IP) (Ping timeout)
[08:16:15] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[08:16:48] *** Joins: zenware (zenware@470ADAFA.537A73B5.DF43B824.IP)
[08:16:54] *** pmoore|away is now known as pmoore
[08:18:58] *** Joins: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com)
[08:20:54] *** Quits: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com) (Ping timeout)
[08:21:09] <bjz_> is there a way of spawning a task schedualed on the parent thread?
[08:21:50] <bjz_> does task::SchedMode::SingleThreaded do that?
[08:22:07] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[08:22:18] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[08:22:30] <Luqman> bjz_: that creates a new scheduler afaik
[08:22:37] * ChrisMorgan was wondering the same thing a brief time ago but not enough to find out
[08:23:05] <bjz_> Luqman: I want the stuff in my spawned thingy to be called on the platform thread
[08:23:17] *** Joins: dissimile (dissimile@moz-141B07E7.static.as13285.net)
[08:23:37] <bjz_> Luqman: I have the #[start] stuff set up
[08:24:20] <bjz_> but when I do task::spawn the extern function calls get annoyed because they're not on the main event loop
[08:24:47] *** zz_kimundi is now known as kimundi
[08:24:53] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[08:25:29] *** Quits: dissimile (dissimile@moz-141B07E7.static.as13285.net) (Quit: ttfn)
[08:25:39] <Luqman> as of brson's recent (which landed about an hour ago) the main thread scheduler should behave like one created with SingleThreaded
[08:26:07] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[08:26:13] *** Joins: dissimile (dissimile@moz-141B07E7.static.as13285.net)
[08:26:38] <bjz_> yeah?
[08:26:43] *** Joins: Ferreus (ferreus@moz-FC760E19.dip0.t-ipconnect.de)
[08:26:52] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[08:27:56] <bjz_> Luqman: how will that work?
[08:28:13] *** flaper87 is now known as flaper87|afk
[08:31:04] *** Joins: avsej (avsej@DF1824D5.EFF97412.48F984E6.IP)
[08:31:59] *** Quits: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP) (Ping timeout)
[08:34:56] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[08:36:11] *** Joins: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP)
[08:37:32] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[08:37:55] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[08:39:37] *** Joins: z0w0 (zack@moz-C877F2F7.lnse2.cha.bigpond.net.au)
[08:40:56] <Luqman> bjz_: hmm, i don't think there's any way to do what you want right now
[08:41:37] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[08:41:40] <bjz_> dang
[08:47:52] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[08:50:17] <Luqman> bjz_: so yea, doesn't seem to work https://gist.github.com/luqmana/5ca0adaa87583b182bbd
[08:50:20] *** Quits: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP) (Ping timeout)
[08:51:29] <bjz_> :[
[08:51:37] *** flaper87|afk is now known as flaper87
[08:53:04] *** Quits: autra (augustin@moz-2EA7A1DF.fullsix.com) (Connection reset by peer)
[08:53:09] *** Joins: autra_ (augustin@moz-2EA7A1DF.fullsix.com)
[08:54:41] *** Joins: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP)
[08:58:29] *** Quits: dissimile (dissimile@moz-141B07E7.static.as13285.net) (Quit: Either I put my laptop to sleep or my battery died)
[09:00:09] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[09:00:36] *** Quits: z0w0 (zack@moz-C877F2F7.lnse2.cha.bigpond.net.au) (Quit: z0w0)
[09:01:23] *** Quits: zenware (zenware@470ADAFA.537A73B5.DF43B824.IP) (Ping timeout)
[09:01:37] *** Quits: squiddy (squiddy@moz-72DD312B.adsl.alicedsl.de) (Ping timeout)
[09:02:52] *** Quits: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP) (Ping timeout)
[09:03:44] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[09:04:02] *** Joins: squiddy (squiddy@moz-72DD312B.adsl.alicedsl.de)
[09:04:10] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[09:04:12] *** Joins: zenware (zenware@470ADAFA.537A73B5.DF43B824.IP)
[09:04:35] *** Joins: dissimile (dissimile@moz-141B07E7.static.as13285.net)
[09:06:24] *** Joins: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP)
[09:12:36] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[09:16:00] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[09:18:46] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[09:18:57] *** Joins: HollyRain (HollyRain@moz-50A83091.dyn.user.ono.com)
[09:19:24] <HollyRain> why was removed "extra::flatpipes" ?
[09:19:36] <HollyRain> https://github.com/mozilla/rust/commit/194302493ca269eb33e2718672c2f12380a19497
[09:19:55] *** Quits: zenware (zenware@470ADAFA.537A73B5.DF43B824.IP) (Ping timeout)
[09:21:04] *** Quits: DeTeam (DeTeam@3F8887A3.6883A39.F5F3AF2.IP) (Ping timeout)
[09:21:11] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[09:21:55] *** Joins: zenware (zenware@470ADAFA.537A73B5.DF43B824.IP)
[09:22:07] *** Joins: DeTeam (DeTeam@92C799C.31715274.F5F3AF2.IP)
[09:22:44] *** Quits: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP) (Ping timeout)
[09:23:04] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[09:26:02] *** Joins: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP)
[09:27:56] *** Quits: arodier74 (Thunderbir@moz-25EB015.in-addr.btopenworld.com) (Quit: arodier74)
[09:28:18] *** Joins: arodier74 (Thunderbir@moz-25EB015.in-addr.btopenworld.com)
[09:29:54] <dbaupp> HollyRain: all the tests were disabled, and so it didn't work very well
[09:30:43] *** Quits: dissimile (dissimile@moz-141B07E7.static.as13285.net) (Ping timeout)
[09:31:08] *** Quits: m_kato (m_kato@moz-C286AD9A.bitcat.net) (Quit: Leaving...)
[09:31:32] *** Joins: dissimile (dissimile@moz-141B07E7.static.as13285.net)
[09:33:29] *** kimundi is now known as zz_kimundi
[09:33:54] *** Joins: z0w0 (zack@moz-C877F2F7.lnse2.cha.bigpond.net.au)
[09:43:13] *** Quits: dissimile (dissimile@moz-141B07E7.static.as13285.net) (Quit: Either I put my laptop to sleep or my battery died)
[09:44:21] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[09:46:02] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[09:46:34] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[09:48:13] *** Quits: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP) (Ping timeout)
[09:48:21] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Ping timeout)
[09:49:26] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[09:51:34] *** Joins: dissimile (dissimile@moz-141B07E7.static.as13285.net)
[09:51:55] *** Joins: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP)
[09:52:28] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[09:52:42] *** Quits: aegeaner (Aegeaner@C8372C16.21B75AD6.FA28A497.IP) (Connection reset by peer)
[09:54:20] *** Quits: zenware (zenware@470ADAFA.537A73B5.DF43B824.IP) (Ping timeout)
[09:54:35] *** Joins: zenware (zenware@470ADAFA.537A73B5.DF43B824.IP)
[09:59:29] *** Quits: dissimile (dissimile@moz-141B07E7.static.as13285.net) (Connection reset by peer)
[10:00:04] *** Quits: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP) (Ping timeout)
[10:01:09] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Client exited)
[10:03:09] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[10:04:26] *** Joins: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP)
[10:04:43] *** Joins: dissimile (dissimile@moz-F3007ED4.static.as13285.net)
[10:06:45] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[10:08:06] *** Quits: HollyRain (HollyRain@moz-50A83091.dyn.user.ono.com) (Quit: bye, bye)
[10:10:28] *** Quits: eddyb9 (eddy@DAB169D3.A32D897.4A6B528C.IP) (Ping timeout)
[10:12:24] *** Quits: StarLight (StarLight@moz-983417BD.dynamic.avangarddsl.ru) (Ping timeout)
[10:15:11] <eddyb> so I can't create [f(0), f(1), f(2), f(3)] from a macro!(4)
[10:15:33] *** Joins: nkoep (nik@moz-E4F66740.pool.mediaways.net)
[10:15:36] <eddyb> but what if I list (0, 1, 2, 3) manually, can I transform each of them?
[10:16:09] *** Quits: fran_ (fran@29C57D10.B73F83FF.8ACE28DB.IP) (Ping timeout)
[10:16:45] *** Joins: StarLight (StarLight@moz-C80940BC.pppoe.avangarddsl.ru)
[10:18:10] <dbaupp> rusti: macro_rules! macro ( ($func:expr, $($num:expr),*) => { [$( $func($num) ),*] } ); macro!(|x: int| (x + 1), 0, 1, 2, 3)
[10:18:10] -rusti- [1, 2, 3, 4]
[10:19:23] *** Joins: fran_ (fran@moz-FCBB8286.telecom.net.ar)
[10:19:48] <eddyb> dbaupp: thanks, that's very useful
[10:20:09] <eddyb> yay for inlineable fully initialized static allocator
[10:20:09] *** Parts: Heather (Heather__@19663F6.F53BAACC.9C17E900.IP) ()
[10:20:25] *** Joins: sankha93 (Instantbir@68C0F22.AA42D49B.2FB84AC6.IP)
[10:20:53] *** Joins: ksf (ksf@moz-9DA86FE9.adsl.hansenet.de)
[10:21:29] <dbaupp> eddyb: btw, if you're playing around with/debugging macros, you can use `rustc --pretty expanded` to see the expansion (or put `trace_macros!(true)` somewhere)
[10:22:23] *** Quits: martndemus (martndemus@moz-E30F5776.adsl.xs4all.nl) (Ping timeout)
[10:22:44] *** Quits: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP) (Ping timeout)
[10:22:57] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[10:23:31] <eddyb> hmm, is there an intrinsic that would help with getting the next power of two? something like clz
[10:30:05] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[10:32:08] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[10:32:22] *** Joins: jdm (jdm@moz-300427AD.cable.virginmedia.com)
[10:32:22] *** ChanServ sets mode: +o jdm
[10:33:24] *** Joins: mib_7a4ona (Mibbit@C8A2E35A.38F7F17E.9D59D0D8.IP)
[10:34:33] *** Joins: reedlepee (Mibbit@C8A2E35A.38F7F17E.9D59D0D8.IP)
[10:35:04] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[10:36:04] <reedlepee> hi I would like to contribute to rust through OPW . 
[10:36:21] <reedlepee> can someone help me how to get started with
[10:36:21] *** Joins: ezio (ezio@moz-E19BFE62.cust.dsl.vodafone.it)
[10:36:33] *** Quits: ezio (ezio@moz-E19BFE62.cust.dsl.vodafone.it) (Quit: )
[10:36:59] <bjz_> reedlepee: https://github.com/mozilla/rust/wiki/Note-guide-for-new-contributors
[10:37:01] <bjz_> :)
[10:37:12] <dbaupp> reedlepee: "OPW"?
[10:37:28] <bjz_> indeed
[10:37:30] <bjz_> OPW?
[10:37:36] <reedlepee> gnome outreach program for women
[10:37:49] <bjz_> yeah I dunno
[10:37:58] *** Joins: MrOrdinaire (Mibbit@6BA65136.A607747.FD383126.IP)
[10:38:01] <benh> didn't tjc mention that.
[10:38:05] <bjz_> but yeah, anyone can contribute
[10:38:28] <bjz_> benh: sounds like something tjc would be supporting
[10:39:22] <bjz_> reedlepee: yeah you might want to talk to tjc, but yeah, the rust community on the whole is pretty nice/welcoming
[10:39:42] <bjz_> reedlepee: tjc is on during west-coast hours though
[10:39:46] *** Joins: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP)
[10:39:54] <bjz_> he might know more
[10:40:00] <benh> tjc is indeed listed as mentor for rust projects for opw
[10:40:09] <bjz_> oh ok
[10:40:10] <bjz_> nice
[10:40:20] <bjz_> yeah first time I've heard of it
[10:40:29] <bjz_> is it a funding initiative?
[10:40:51] *** flaper87 is now known as flaper87|afk
[10:40:57] <benh> Sounds a bit like gsoc, except during the winter :)
[10:41:00] <bjz_> https://wiki.gnome.org/OutreachProgramForWomen?
[10:41:10] <benh> https://wiki.gnome.org/OutreachProgramForWomen/2013/DecemberMarch specifically
[10:41:19] <bjz_> oh cool
[10:41:19] <dbaupp> benh: or the southern hemisphere summer :P
[10:41:26] <bjz_> yep!
[10:41:30] <bjz_> we do exist
[10:41:37] *** Quits: MrOrdinaire (Mibbit@6BA65136.A607747.FD383126.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:41:39] <reedlepee> yeah i want to contribute to mozilla through opw
[10:41:45] <bjz_> cool
[10:41:59] *** Quits: mib_7a4ona (Mibbit@C8A2E35A.38F7F17E.9D59D0D8.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:42:00] <bjz_> have you done any rust before, or just starting out?
[10:42:07] <reedlepee> just starting
[10:42:15] <bjz_> awesome, welcome!
[10:42:44] <reedlepee> i have  beginner-level proficiency programming in C
[10:43:18] *** Joins: adridu59 (Mibbit@moz-E7A273CD.ac-paris.fr)
[10:43:25] <bjz_> personnally I've found I can now comprehend C much better from doing Rust
[10:43:49] * bjz_ wasn't too experienced when he started
[10:43:54] <bjz_> (in C)
[10:43:58] *** Quits: alonlevy (alon@moz-B0E66DB7.static.bezeqint.net) (Ping timeout)
[10:44:22] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[10:44:23] *** Quits: dissimile (dissimile@moz-F3007ED4.static.as13285.net) (Ping timeout)
[10:44:27] <benh> gee, it's the middle of the night in west coast time, isn't it
[10:44:31] <reedlepee> bjz_ could you please help in starting
[10:44:32] <bjz_> yep
[10:44:41] <benh> i still haven't quite come to terms with non-utc-ish timezones
[10:44:47] <Jesse> i can confirm that it is the middle of the night in california
[10:44:59] <bjz_> reedlepee: what made you interested in Rust?
[10:45:07] <reedlepee> i am actually beginner to open source
[10:45:25] <Ms2ger> Jesse, by being awake in the middle of the night? :)
[10:45:28] <bjz_> have you used github before?
[10:45:34] <reedlepee> no
[10:46:04] <bjz_> you might want to get an account if you haven't already
[10:46:07] <Jesse> Ms2ger: exactly!
[10:46:10] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[10:46:21] *** Quits: adridu59 (Mibbit@moz-E7A273CD.ac-paris.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[10:46:26] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[10:46:32] <bjz_> we do all our stuff through github
[10:46:44] <reedlepee> yeah ..can you explain a lil about rust 
[10:47:00] *** zz_kimundi is now known as kimundi
[10:47:10] <reedlepee> what needs to be done in this project
[10:47:55] <benh> I don't know what projects tim chevalier had in mind for opw
[10:47:58] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[10:48:29] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[10:48:40] <reedlepee> ohh ohk can you give me  a brief idea about the projects currently going on ?
[10:48:45] <kimundi> library work, bug fixes, usability feedback...
[10:49:02] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[10:49:12] <bjz_> reedlepee: people mainly focus on what interest them, but the dev team has more focused goals
[10:49:22] <benh> you can have a look at https://github.com/mozilla/rust/issues/ to get a nitty-gritty list of defects/to-do items that need working on
[10:49:35] <reedlepee> bjz_ : how can i contact tjc?
[10:50:01] <bjz_> reedlepee: he'll be online soon
[10:50:11] *** Joins: dissimile (dissimile@4AFCE06E.FE075EF5.9E9884D0.IP)
[10:50:34] <dbaupp> reedlepee: you may be able to find an email address from https://github.com/catamorphism, (or http://catamorphism.org/)
[10:50:53] *** Joins: martndemus (martndemus@moz-E30F5776.adsl.xs4all.nl)
[10:51:02] <bjz_> reedlepee: https://github.com/mozilla/rust/issues?labels=A-an-interesting-project&page=1&state=open
[10:51:07] *** Joins: aegeaner (Aegeaner@7F208F22.BD9EA362.4446104D.IP)
[10:52:11] *** Quits: nkoep (nik@moz-E4F66740.pool.mediaways.net) (Ping timeout)
[10:52:24] <bjz_> reedlepee: documentation work is also a nice way to get started if you're just getting used to filing pull requests
[10:53:00] <bjz_> reedlepee: there's also https://github.com/mozilla/rust/issues?labels=E-easy&page=1&state=open
[10:53:40] <benh> A good very first thing to do is probably to get familiar with git / github, checking out the repository and getting through the build process to get a working compiler :)
[10:53:43] <eddyb> rusti: static foo : int = if 5 > 7 { 5 } else { 7}; foo
[10:53:46] -rusti- pastebinned 7 lines of output: http://ix.io/8v7
[10:54:09] <bjz_> but yeah, I'd reccommend looking on that first link I posted: https://github.com/mozilla/rust/wiki/Note-guide-for-new-contributors
[10:54:09] <eddyb> why not constexpr folding for conditionals :(?
[10:54:13] *** Quits: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net) (Ping timeout)
[10:54:17] <bjz_> benh: yeah, ++
[10:54:20] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[10:54:37] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[10:54:45] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[10:54:59] <bjz_> reedlepee: github has super nice docs: https://help.github.com/
[10:55:07] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[10:55:07] <eddyb> rusti: static foo : bool = 5 > 7; foo
[10:55:08] -rusti- false
[10:55:33] <eddyb> so why is if constexpr { constexpr } else { constexpr } not folded?
[10:55:43] <dbaupp> eddyb: because it's not been implemented yet
[10:56:02] <bjz_> reedlepee: the first link is probably what you want: 'set up git'
[10:56:04] <eddyb> dbaupp: does it need special implementation for static, or folding in general?
[10:56:52] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[10:56:53] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[10:56:53] *** Quits: martndemus (martndemus@moz-E30F5776.adsl.xs4all.nl) (Ping timeout)
[10:56:55] <dbaupp> eddyb: with the current implementation of constexprs, yes; there are plans for proper & well-designed CTFE (compile-time function execution) at some point, which will make all this easier.
[10:57:09] <dbaupp> ... I think that's a post-1.0 feature though.
[10:58:46] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[10:59:07] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[10:59:15] *** Joins: martndemus (martndemus@moz-E30F5776.adsl.xs4all.nl)
[10:59:26] <eddyb> dbaupp: my thinking is that static trans comes after constant folding, which should fold the if/else expression. so your "yes" is for constant folding?
[11:00:31] *** Quits: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP) (Ping timeout)
[11:01:38] *** Quits: lerc (quassel@moz-1AC1A28C.telstraclear.net) (Ping timeout)
[11:01:59] <eddyb> I'm pretty sure I don't want to dive in that part of rustc myself, at least not yet, but I would've expected this to work already
[11:02:03] <dbaupp> eddyb: well, there's 2 stages of "folding": the in-Rust constant evaluation which doesn't handle if (yet), and the LLVM constant folding which is an optimisation.
[11:02:27] *** Joins: Earnestly (earnest@moz-BE290A2B.dyn.plus.net)
[11:02:32] <eddyb> dbaupp: any replacement? I need max(constexpr, constexpr)
[11:02:57] <dbaupp> no-one's had a pressing need to use `static foo: int = if 1 > 2 { a } else { b };` yet, so it's not implemented, much like with the rest of the fringe features.
[11:03:28] <dbaupp> no replacement that I know... don't you know exactly which is greater anyway, since they're both constants?
[11:03:40] *** Joins: lerc (quassel@moz-1AC1A28C.telstraclear.net)
[11:04:01] *** Joins: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP)
[11:04:31] <eddyb> because one of them is 1 << constexpr in a macro (the 0, 1, 2, 3 thing) and the other one is a static
[11:06:09] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[11:06:25] *** Joins: Blub\w (wry@moz-864FF0B9.wireless.dyn.drei.com)
[11:06:27] *** Joins: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP)
[11:07:49] *** Joins: nkoep (nik@moz-12ABCC93.vpn.rwth-aachen.de)
[11:08:11] <eddyb> dbaupp: hmmm, I rarely need that structure member, and I can do the max operation when I need it (it might even get folded after inlining)
[11:08:19] <dbaupp> ah, yeah, the easiest fix for that would be going to librustc/middle/const_eval.rs and updating it to handle ExprIf
[11:08:26] <dbaupp> oh, yes, that would work too
[11:08:47] <dbaupp> (and it will almost certainly get const-folded by LLVM when optimisations are turned on)
[11:09:43] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[11:10:14] <eddyb> it's max(self.object_size, MINIMUM_SIZE), and object_size is constant (can I mark struct members are immutable?)
[11:10:27] <eddyb> s/are/as/
[11:10:33] *** Quits: sankha93 (Instantbir@68C0F22.AA42D49B.2FB84AC6.IP) (Ping timeout)
[11:10:58] *** Parts: msch (msch@moz-DA0E34D4.clients.your-server.de) ()
[11:11:09] *** Quits: jdm (jdm@moz-300427AD.cable.virginmedia.com) (Quit: Lost terminal)
[11:11:15] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[11:11:36] *** Joins: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net)
[11:12:10] <dbaupp> no, things inherit the mutability of their owner
[11:12:29] <dbaupp> (so you can't mark an individual field as a immutable, just like you can't mark one as mutable)
[11:13:50] *** Quits: dissimile (dissimile@4AFCE06E.FE075EF5.9E9884D0.IP) (Ping timeout)
[11:14:47] <eddyb> dbaupp: I guess I want a numeric generic parameter, but that's far into the future
[11:14:59] *** Joins: sankha93 (Instantbir@68C0F22.AA42D49B.2FB84AC6.IP)
[11:15:09] * dbaupp wants them too
[11:16:50] <eddyb> is there any specific reason for not being able to specify that a field is assign-once?
[11:17:07] <dbaupp> yes, inherited mutability
[11:17:10] <eddyb> although I'm not sure that would help with optimizations
[11:17:13] *** Quits: sankha93 (Instantbir@68C0F22.AA42D49B.2FB84AC6.IP) (Connection reset by peer)
[11:17:40] <dbaupp> (well, that said, I'm not 100% sure that inherited mutability excludes assign-once fields.)
[11:17:58] *** Parts: rwall (rwall@moz-820DAEA7.biscuit.org.uk) ()
[11:18:48] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[11:18:49] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[11:19:59] <eddyb> dbaupp: with safe-only code, it would get checked, and then an optimization pass could assume it's constant after initialization, so if it knows the initial value, it can inline that value
[11:20:33] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[11:21:26] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[11:25:01] <eddyb> I asked this before, but... is there an intrinsic that would help with getting the next power of two? something like clz (next_pow2(x : u32) == 32 - clz(x - 1))
[11:26:29] <dbaupp> unlikely there's an intrinsic for it
[11:26:42] <dbaupp> (if you want to be sure, there's a list in librustc/middle/intrinsics.rs, iirc)
[11:26:46] *** Joins: dissimile (dissimile@moz-141B07E7.static.as13285.net)
[11:27:00] <engla> eddyb: it's implemented in std::uint::next_power_of_two  (or similar name)
[11:27:14] <eddyb> engla: O(1)?
[11:27:27] <engla> and that function uses the commonly used bitwise method
[11:27:32] <engla> it's constant time yes
[11:28:00] <engla> I guess it's O(N bits in uint)
[11:28:17] <engla> I think that's constant time
[11:29:10] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[11:30:32] <eddyb>     /// Counts the number of leading zeros. Wraps LLVM's `ctlz` intrinsic.
[11:31:53] <eddyb> engla: O(lg2(N))
[11:32:47] *** Quits: dissimile (dissimile@moz-141B07E7.static.as13285.net) (Ping timeout)
[11:33:22] * eddyb wonders if it would be faster to use ctlz
[11:33:23] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[11:33:36] <dbaupp> eddyb: faster than?
[11:33:38] <engla> maybe
[11:33:43] <engla> try it
[11:33:43] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[11:33:47] <eddyb> dbaupp: faster than the loop version
[11:34:19] <dbaupp> oh, yeah, it's almost certainly faster
[11:34:34] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[11:34:39] <engla> eddyb: next_power_of_two performs the same steps regardless of value passed to the function, so it does not depend on that.
[11:34:43] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Client exited)
[11:35:28] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[11:35:31] <eddyb> engla: you're thinking of timing attacks?
[11:35:42] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Client exited)
[11:35:51] <engla> not at all. Just thinking of your question of complexity
[11:36:29] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[11:37:10] <eddyb> if the loop is unrolled, it does 4 shifts and 4 bitwise or's, compared to a single clz
[11:37:28] *** Joins: canhtak (jeremy@moz-EF57C296.wl.t.ulaval.ca)
[11:37:34] *** Joins: dissimile (dissimile@4AFCE06E.FE075EF5.9E9884D0.IP)
[11:37:35] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[11:37:54] <engla> the clz will be some kind of loop too, but probably a more efficient one.
[11:38:18] <engla> Anyway, loops or not doesn't matter, if the loop is always run the same number of steps, then it is O(1)
[11:38:47] <dbaupp> many CPUs have a clz instruction
[11:39:17] *** Joins: mib_nf2mk8 (Mibbit@moz-6968CB7E.cpe.net.cable.rogers.com)
[11:39:32] <dbaupp> (unless you're talking about a microcode loop)
[11:39:51] <engla> I was thinking of allowing for all of that yes :)
[11:40:18] <mib_nf2mk8> Guys when you click Ctrl+W you will get an amazing thing to happen to you. :)
[11:40:29] <mib_nf2mk8> Yeah kbai
[11:41:08] <mib_nf2mk8> Lmao @People who clicked it
[11:41:13] *** Quits: mib_nf2mk8 (Mibbit@moz-6968CB7E.cpe.net.cable.rogers.com) (Quit: http://www.mibbit.com ajax IRC Client)
[11:42:31] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[11:42:34] *** Joins: skade (skade@30BBD5E6.505237C9.CAE22B62.IP)
[11:43:55] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[11:45:22] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[11:45:28] *** Quits: ksh8281 (ksh8281@5AB4884B.FCC4549.14D5B978.IP) (Quit: Lost terminal)
[11:47:12] *** kimundi is now known as zz_kimundi
[11:47:27] <eddyb> this feels weird: I like let foo : Type; and Foo {bar: baz}, i.e. a space before the colon, but not inside structures
[11:48:07] <eddyb> ah, std doesn't have a space before : AFAICT, then I guess I can get rid of mine
[11:48:36] *** Joins: sankha93 (Instantbir@B3F15789.7DCF141.F44414AF.IP)
[11:48:53] <engla> I have a problem with  Foo{bar: baz}; I can't find any good way to space that out.   Foo{bar: baz} is too crammed but  Foo { bar: baz  has too much air
[11:48:58] *** Joins: jdm (jdm@88F51059.F3BBB17D.144F44FA.IP)
[11:48:58] *** ChanServ sets mode: +o jdm
[11:49:06] <engla> yes I think      let x: T = 2; is the common style there by far
[11:49:18] <dbaupp> (whitespace is ignored, except as a token separator)
[11:49:26] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[11:50:05] <eddyb> dbaupp: oh I know, this is a style problem
[11:53:26] *** Joins: jvns_ (bork@moz-DE62990.nyc.res.rr.com)
[11:54:43] *** Quits: fran_ (fran@moz-FCBB8286.telecom.net.ar) (Ping timeout)
[11:56:00] <ChrisMorgan> Of all the options I've seen, `Foo { bar: baz }` is the best. `Foo{bar: baz}` could be seen as being similar to `Foo(bar: baz)`, but we're used to having a space around `{`.
[11:56:09] <ChrisMorgan> And certainly, `x: T` rather than `x : T`.
[11:56:40] <benh> can't wait until : is also the type ascription operator so I can write Foo { bar :baz: int } or somethin
[11:56:43] <benh> g
[11:57:15] <ChrisMorgan> `x : T` reminds me of Java's enumeration, `for (T i : iterable) {`
[11:57:57] * ChrisMorgan still finds it difficult to comprehend that "reminds" is not in the standard en_AU dictionary on his Ubuntu machine... but has he filed a bug report? No!
[11:58:33] *** Quits: jvns_ (bork@moz-DE62990.nyc.res.rr.com) (Ping timeout)
[11:58:35] <dbaupp> ChrisMorgan: you should surely know it's spelled "remiunds"
[11:58:47] <dbaupp> extra 'u's and all that.
[11:58:51] *** Joins: fran_ (fran@moz-8B3365E6.telecom.net.ar)
[11:58:55] <ChrisMorgan> dbaupp: sorry, that isn't in the dictionary either!
[11:58:57] <dbaupp> benh++
[11:59:00] <dbaupp> ChrisMorgan: :P
[11:59:19] <eddyb> can I impl a generic struct without declaring the type params?
[11:59:43] <ChrisMorgan> Sure, `impl<T> Foo<T>` works fine.
[11:59:49] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[12:00:05] <eddyb> I was thinking impl Foo<_> or something like that
[12:00:23] <ChrisMorgan> (I took "without declaring the type params" to mean without constraints, for some reason.)
[12:00:48] <eddyb> it's actually impl<'self, Base> UsedNode<'self, Base> :(
[12:00:49] <ChrisMorgan> No, you can't do it without declaring type params at all.
[12:00:56] <eddyb> okay, thanks
[12:01:20] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[12:02:24] *** Parts: zenware (zenware@470ADAFA.537A73B5.DF43B824.IP) ()
[12:03:09] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[12:03:12] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[12:05:18] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[12:06:32] <bjz_> ChrisMorgan: are you aussie?
[12:06:37] <ChrisMorgan> Yep. Melbourne.
[12:06:42] <bjz_> ooh, me too!
[12:07:10] <bjz_> do you ever go to the Melbourne Functional User Group?
[12:07:31] <ChrisMorgan> I seem to recall you inviting me there a couple of months ago. I haven't followed it up at all yet.
[12:07:58] <bjz_> ahh ok
[12:08:01] <bjz_> hehe
[12:08:07] <bjz_> :)
[12:08:27] <bjz_> we had a great haskell workshop several weekends ago
[12:08:34] * benh wonders how functional has to be to go to a functional user group
[12:08:41] <benh> functional one has to be*
[12:08:41] * bjz_ learned lots
[12:09:04] *** Quits: Ms2ger (Ms2ger@moz-FAA90543.ugent.be) (Ping timeout)
[12:09:07] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[12:09:09] *** jorendorff_away is now known as jorendorff
[12:09:15] * ChrisMorgan is a functional human being... or should that be "functioning human being"?
[12:09:20] <bjz_> benh: it's pretty loose
[12:10:04] * bjz_ is barely functioning, but it's enough
[12:10:20] <ChrisMorgan> The talk on November 7 http://www.meetup.com/Melbourne-Functional-User-Group-MFUG/events/140155142/ sounds pretty relevant to me. String typing is something that I'm avoiding like the plague in rust-http.
[12:10:56] <bjz_> nice
[12:11:09] <bjz_> I mainly go just to get exposed to new ideas
[12:11:52] <bjz_> we have a hack night tomorrow as well
[12:12:32] * bjz_ plans to implement some tapl stuff in idris
[12:12:36] * ChrisMorgan has no time whatsoever to spare at present and should probably not even be here getting distracted...
[12:12:36] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[12:12:43] <bjz_> heh
[12:12:59] <bjz_> ChrisMorgan: work or study?
[12:13:16] <ChrisMorgan> Uni. Rust is *far* too distracting for my own good.
[12:13:32] <bjz_> indeed
[12:13:37] <bjz_> which uni?
[12:13:40] <ChrisMorgan> Monash.
[12:13:44] <bjz_> ah nice
[12:13:51] <bjz_> how is it over there?
[12:13:53] *** Quits: canhtak (jeremy@moz-EF57C296.wl.t.ulaval.ca) (Quit: canhtak)
[12:14:10] <ChrisMorgan> Question too vague. I can't cope with vague questions. :-)
[12:14:17] <bjz_> heh
[12:15:23] *** Joins: alonlevy (alon@moz-29263FE5.red.bezeqint.net)
[12:15:26] <bjz_> you getting enough actual CS over there?
[12:15:29] *** jorendorff is now known as jorendorff_away
[12:15:57] <bjz_> RMIT is a little light on that stuff, more OO software engineering and 'practical' stuff
[12:16:38] * ChrisMorgan doesn't know precisely what is meant by CS in that context
[12:17:36] <ChrisMorgan> Having partaken only of Monash's curriculum in that regards, I am probably unfit to comment on the matter.
[12:18:11] <ChrisMorgan> bjz_: you're first year, right? When you're already competent as a programmer, first year is mostly stuff you already know.
[12:18:28] <bjz_> indeed
[12:19:42] *** Joins: peeves (Mibbit@moz-E759CEF9.resnet.usf.edu)
[12:19:51] *** zz_kimundi is now known as kimundi
[12:20:06] <peeves> Is there a function to convert a string to lowercase in the standard library?
[12:20:20] <bjz_> ChrisMorgan: I was talking more algorithms, discrete math, type theory
[12:20:25] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[12:20:55] <ChrisMorgan> Algorithms and discrete maths, yes. Type theory, not so much. Writing a programming language, not at all. :-(
[12:21:19] *** flaper87|afk is now known as flaper87
[12:21:21] <dbaupp> rusti: use std::ascii::StrAsciiExt; print("FOO bar ÄÖÅ".to_ascii_lower())
[12:21:22] -rusti- foo bar ÄÖÅ()
[12:21:23] <bjz_> ChrisMorgan: no compilers/automata?
[12:21:32] <dbaupp> peeves: ^ (only ascii for now)
[12:21:51] <kimundi> peeves: Yes, but only for ASCII
[12:22:00] <ChrisMorgan> Had a bit of automata last year, but no compilers.
[12:22:06] *** Quits: sp3d (a@6361F3B1.19CD1E54.8354FB35.IP) (Ping timeout)
[12:22:26] *** jorendorff_away is now known as jorendorff
[12:22:30] <bjz_> mmk
[12:22:30] *** Quits: fran_ (fran@moz-8B3365E6.telecom.net.ar) (Quit: Leaving)
[12:22:32] <benh> Are we planning to have, like, more unicode support for 1.0?
[12:22:39] * dbaupp hopes so
[12:22:42] * bjz_ just does it in his spare time
[12:22:47] <peeves> dbaupp: That's all I needed! Anywhom, UTF8 capitalization is tricky last I checked. Especially with characters like 'ß'.
[12:22:54] <dbaupp> benh: https://github.com/mozilla/rust/pull/9414
[12:23:06] <dbaupp> peeves: yes
[12:23:32] <dbaupp> benh: (that is, there's code hanging around that moves us closer to having proper unicode support)
[12:24:34] <ChrisMorgan> And when you get to case twiddling, everyone HATES Turkish. It has to have a special knob just for it.
[12:25:00] *** Joins: canhtak (jeremy@moz-EF57C296.wl.t.ulaval.ca)
[12:25:16] <benh> ß!
[12:25:31] <ChrisMorgan> ss!
[12:25:36] *** Quits: dissimile (dissimile@4AFCE06E.FE075EF5.9E9884D0.IP) (Ping timeout)
[12:25:52] <dbaupp> macro_rules!
[12:26:08] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[12:26:37] <ChrisMorgan> macros_rule!
[12:26:39] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[12:27:06] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[12:29:54] *** Joins: Houm_ (Houm@moz-25669AA8.fbx.proxad.net)
[12:30:22] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[12:30:32] *** Joins: Ms2ger (Ms2ger@moz-C53BB8E2.ugent.be)
[12:32:06] <kimundi> lower(”I”) != ”i” !
[12:33:02] *** Joins: jvns_ (bork@moz-DE62990.nyc.res.rr.com)
[12:33:16] *** Quits: z0w0 (zack@moz-C877F2F7.lnse2.cha.bigpond.net.au) (Client exited)
[12:33:36] <Ms2ger> kimundi, Turkish i's?
[12:34:22] *** jorendorff is now known as jorendorff_away
[12:34:25] *** Quits: peeves (Mibbit@moz-E759CEF9.resnet.usf.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[12:34:47] <kimundi> Yeah
[12:35:05] <Ms2ger> Those are so lovely
[12:35:29] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[12:38:00] *** Joins: dissimile (dissimile@moz-141B07E7.static.as13285.net)
[12:41:45] *** Joins: FreeFull (freefull@31BCA4E6.5B0E29BE.159B5998.IP)
[12:42:06] *** Quits: FreeFull (freefull@31BCA4E6.5B0E29BE.159B5998.IP) (Quit: )
[12:44:54] *** Joins: FreeFull (freefull@31BCA4E6.5B0E29BE.159B5998.IP)
[12:47:27] <eddyb> rusti: impl uint {fn foo() {}}
[12:47:30] -rusti- pastebinned 10 lines of output: http://ix.io/8vb
[12:50:17] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[12:50:29] *** Quits: dissimile (dissimile@moz-141B07E7.static.as13285.net) (Ping timeout)
[12:50:34] <myname> how to sleep?
[12:50:46] *** Joins: sw17ch (sw17ch@moz-852B2C80.hfc.comcastbusiness.net)
[12:51:14] *** Joins: kurisumasu (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[12:51:36] *** Joins: dissimile (dissimile@moz-141B07E7.static.as13285.net)
[12:52:07] *** Quits: xAndy (xandy@moz-1C332306.unity-media.net) (Client exited)
[12:52:25] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[12:54:22] *** Quits: dissimile (dissimile@moz-141B07E7.static.as13285.net) (Quit: ttfn)
[12:54:37] <canhtak> myname: std::rt::io::timer::sleep ?
[12:54:54] <myname> huh, why is timer in io?
[12:55:41] *** Quits: jvns_ (bork@moz-DE62990.nyc.res.rr.com) (Ping timeout)
[12:56:44] <benh> Because it uses libuv facilities
[12:57:06] *** Quits: Earnestly (earnest@moz-BE290A2B.dyn.plus.net) (Ping timeout)
[12:57:21] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[12:58:31] *** Joins: q66 (q66@moz-463E955C.range86-148.btcentralplus.com)
[13:03:30] *** Quits: q66 (q66@moz-463E955C.range86-148.btcentralplus.com) (Ping timeout)
[13:04:13] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[13:04:49] *** Joins: q66 (q66@moz-463E955C.range86-148.btcentralplus.com)
[13:06:15] *** Joins: Earnestly (earnest@moz-BE290A2B.dyn.plus.net)
[13:06:37] *** Quits: q66 (q66@moz-463E955C.range86-148.btcentralplus.com) (Ping timeout)
[13:07:19] *** Joins: q66 (q66@moz-463E955C.range86-148.btcentralplus.com)
[13:09:25] <eddyb> task '<unnamed>' failed at 'assertion failed: m != ast::MutMutable', /home/abuild/rpmbuild/BUILD/rust-git-0.8.git.1381410384/src/librustc/middle/trans/consts.rs:219
[13:09:29] <eddyb> great, I caused an ICE :(
[13:09:47] *** Joins: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP)
[13:11:35] *** kimundi is now known as zz_kimundi
[13:11:45] *** Quits: q66 (q66@moz-463E955C.range86-148.btcentralplus.com) (Ping timeout)
[13:12:07] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[13:12:38] *** Joins: q66 (q66@moz-463E955C.range86-148.btcentralplus.com)
[13:16:22] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[13:17:40] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[13:17:57] <eddyb> error: use of mutable static requires unsafe function or block :(
[13:18:02] *** Joins: pnkfelix (pnkfelix@moz-813314A4.hsd1.ma.comcast.net)
[13:18:02] *** ChanServ sets mode: +o pnkfelix
[13:18:44] <eddyb> and unsafe { &foo } doesn't work either >:(
[13:19:43] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[13:21:23] <dbaupp> eddyb: using a static mut in another static?
[13:21:30] <eddyb> yupp
[13:21:55] <dbaupp> https://github.com/mozilla/rust/issues/9852
[13:22:15] <dbaupp> i.e. currently impossible, but under discussion.
[13:23:21] *** jorendorff_away is now known as jorendorff
[13:24:18] *** zz_kimundi is now known as kimundi
[13:24:27] <eddyb> dbaupp: how would that last example be unsafe?
[13:26:47] <dbaupp> which one?
[13:26:55] <eddyb> dbaupp: last one in the issue
[13:27:02] <dbaupp> static mut FOO: int = 0;
[13:27:02] <dbaupp> static PTR: &'static mut int = &mut FOO; ?
[13:27:05] <eddyb> yupp
[13:27:25] <eddyb> that looks quite benign
[13:27:37] <dbaupp> because you can then write `*PTR = 1` in safe code, even though you're updating a global variable
[13:28:05] <eddyb> aaaah
[13:28:23] <eddyb> I thought PTR was mut, my bad
[13:28:34] <eddyb> dbaupp: but shouldn't &'static mut be unsafe as well?
[13:28:46] *** Joins: sp3d (a@6361F3B1.19CD1E54.8354FB35.IP)
[13:28:58] <eddyb> I mean, that is the solution that makes sense to me
[13:29:21] <dbaupp> maybe, but it's covered by the rule "any use of a static mut variable is unsafe", we just need to make that rule work properly in statics.
[13:30:03] <dbaupp> (as in, the only way to create a &'static mut is via transmute (unsafe) or using a static mut (also unsafe).)
[13:30:19] <eddyb> uhm, why?
[13:30:29] <dbaupp> why what?
[13:30:37] <eddyb> why not make accessing &'static mut unsafe, but creating it safe?
[13:31:11] <eddyb> it should be just unsafe pointer casting
[13:31:14] <dbaupp> oh. because we can have one rule rather than two? (I guess that rule there would match with the rules for *)
[13:32:04] <dbaupp> also, it special-cases the 'static lifetime for &mut.
[13:32:18] <eddyb> it makes more sense to me :/
[13:35:46] <eddyb> all of this pain is to build an inlineable allocator :(
[13:37:37] *** Joins: simon (simon@moz-FD4ADBC6.cable.teksavvy.com)
[13:37:41] <eddyb> if I didn't care about performance, I would just have an static &mut Allocator object reference that I would assign later, but that would mean going through a vtable every single time
[13:39:01] <eddyb> dbaupp: there's no way I can disable the unsafe mut statics, is there?
[13:39:04] <dbaupp> that wouldn't work either :P
[13:39:08] <dbaupp> rusti: trait Foo {} impl Foo for uint {} static x: &'static Foo = (&1u) as &Foo:'static;
[13:39:10] -rusti- pastebinned 7 lines of output: http://ix.io/8vh
[13:39:29] <dbaupp> eddyb: other than patching the compiler, no (but, it's probably not too hard in this instance)
[13:39:36] <eddyb> dbaupp: not a static lifetime..... oh, wait. dammit
[13:39:45] <dbaupp> (patching it to allow `unsafe {}` in constexprs, that is)
[13:40:00] <eddyb> no, not consider mut unsafe at all
[13:40:30] <eddyb> I guess it's a bad idea, but my structures are thread & SMP safe
[13:40:37] <dbaupp> yeah, but that might be harder
[13:40:57] <dbaupp> I was just thinking of the easiest way to get something that works
[13:41:08] <eddyb> that would work too
[13:41:09] <dbaupp> even if it's not the "optimal" one
[13:41:44] <eddyb> rusti: static foo : int = {0; 1}; foo
[13:41:45] *** Joins: mib_r887si (Mibbit@2412C000.BC32F0E5.27A02188.IP)
[13:41:47] -rusti- pastebinned 7 lines of output: http://ix.io/8vi
[13:42:08] <eddyb> dbaupp: if/else and unsafe should be trivial if that is implemented
[13:42:26] <dbaupp> yes
[13:42:36] <eddyb> brb, food
[13:43:54] <dbaupp> (src/librustc/middle/const_eval.rs in the rust codebase, if you do feel like adding them... the rust way: try to do *X*, hit compiler snag, fix compiler, repeat.)
[13:45:11] *** Joins: Jackneill (Jackneill@moz-F4877152.pool.digikabel.hu)
[13:45:50] *** Quits: canhtak (jeremy@moz-EF57C296.wl.t.ulaval.ca) (Ping timeout)
[13:46:01] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[13:46:52] *** Joins: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com)
[13:46:54] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[13:47:55] *** Joins: themgt (themgt@moz-9B7DF13D.baf.movistar.cl)
[13:50:02] *** Quits: joone_ (joone@3CCE8CB5.2160464A.A34EC3BB.IP) (Ping timeout)
[13:51:07] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[13:51:26] *** Joins: joone_ (joone@moz-C50DC051.jf.intel.com)
[13:51:37] *** Quits: mib_r887si (Mibbit@2412C000.BC32F0E5.27A02188.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:52:02] *** Joins: clopez (Mibbit@A4D4ECDA.649B08D2.D98F9367.IP)
[13:52:42] *** Quits: clopez (Mibbit@A4D4ECDA.649B08D2.D98F9367.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:54:54] *** Joins: Florob (Florob@moz-39532932.de)
[13:57:54] <myname> spawn does not support anything like join, does it?
[13:59:51] <eddyb> dbaupp: oh I know, I have a PR for better inline asm handling (I need to get to that and update based on review)
[13:59:59] *** Joins: canhtak (jeremy@moz-EF57C296.wl.t.ulaval.ca)
[14:00:07] <eddyb> it is painful to recompile rustc every single time
[14:00:21] <eddyb> and I'm not myself when I'm hungry, I know have two options now
[14:00:56] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[14:01:26] <dbaupp> eddyb: (you can halve the compile times by just running `make rustc-stage1`, btw)
[14:01:48] <eddyb> I know that, too
[14:01:55] <dbaupp> ok, cool
[14:02:03] *** Quits: squiddy (squiddy@moz-72DD312B.adsl.alicedsl.de) (Ping timeout)
[14:02:41] <eddyb> dbaupp: I can either store the base allocator using an unsafe pointer (but that might not work either with mut statics) or use static methods on a trait
[14:03:16] *** Quits: avsej (avsej@DF1824D5.EFF97412.48F984E6.IP) (Client exited)
[14:03:54] <eddyb> is there a way to annotate trait methods so they work with both &self and &mut self?
[14:04:18] <dbaupp> no, but in theory &mut self borrows to &self automatically
[14:04:27] <dbaupp> unless you want different behaviour for &mut vs &?
[14:04:47] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[14:05:13] *** Joins: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net)
[14:05:23] <eddyb> if I have &Foo in a struct, I want to do Foo.method, but I also need that struct to implement the trait methods with &mut self
[14:06:29] <eddyb> dbaupp: basically, I want to leave the choice of &self or &mut self to the implementations
[14:06:37] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[14:06:49] <dbaupp> ah, well, that's impossible, afaik
[14:07:01] *** Joins: squiddy (squiddy@moz-72DD312B.adsl.alicedsl.de)
[14:07:21] <dbaupp> it has to be &mut, and implementations that don't need the mutability just have to put up with it.
[14:07:44] <eddyb> the problem is not the implementation but the usage
[14:08:31] <eddyb> I don't want to have &'static mut Foo if Fooo.... yeah nvm
[14:08:42] <dbaupp> yes, there's no way around it
[14:09:13] <dbaupp> either all implementors are immutable with &self, or every user needs to have the callee in a mutable position (with &mut self)
[14:09:19] <eddyb> static impl methods it is
[14:09:30] *** Joins: tikue_ (tikue_star@2772A85E.EB08480C.689607DE.IP)
[14:09:41] <dbaupp> it's a static method now?
[14:09:53] <eddyb> (it's not like this allocator will ever have multiple instances anyway)
[14:10:05] <eddyb> dbaupp: I'm going to remove the self from the trait methods
[14:10:39] *** Joins: exobit_ (textual@moz-E06F46F0.corp.bitshelter.com)
[14:10:48] <dbaupp> why do you need a trait, if there's only going to be one implementor?
[14:11:50] *** Quits: tikue_ (tikue_star@2772A85E.EB08480C.689607DE.IP) (Client exited)
[14:12:08] *** Joins: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP)
[14:12:39] *** Quits: simon (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[14:12:46] <eddyb> dbaupp: I wanted a common interface, and this struct, SlamAllocator<Base> would implement Allocator for an Allocator base
[14:13:48] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Quit: )
[14:13:49] <dbaupp> eddyb: oh, so by "instance" you mean it's a singleton, not there's only one thing implementing the trait.
[14:14:03] * dbaupp is clearly to tired to be on IRC
[14:14:15] <dbaupp> *too
[14:14:18] * dbaupp -> bed
[14:14:21] <eddyb> :(
[14:14:40] <eddyb> I wanted to be sure, I can't have pointers or the mut qualifier as part of a generic, can I?
[14:14:49] <eddyb> like Foo<&mut Bar>
[14:15:07] <eddyb> *pointer sigils
[14:15:11] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[14:15:14] <dbaupp> you can, but yo need 'self for borrowed ones
[14:15:24] <dbaupp> and 'self is very fragile
[14:15:48] <eddyb> pub struct Cache<'self, Base> {
[14:15:50] <eddyb>     priv base: &'self mut Base,
[14:16:08] *** Joins: pcwalton (pcwalton@moz-B51927E9.hsd1.ca.comcast.net)
[14:16:08] *** ChanServ sets mode: +ao pcwalton pcwalton
[14:16:11] <dbaupp> (it mostly-kinda works, but having it in type parameters (of traits, especially) is particularly touchy, in my experience :( )
[14:16:26] <eddyb> dbaupp: so no way of specifying the mutability of Base there?
[14:17:01] <dbaupp> not independently of the &mut Base type
[14:17:12] *** Joins: jvns_ (bork@87D98E32.4046EB22.428F94DD.IP)
[14:17:42] <dbaupp> i.e. you could have Cache<Base> { priv base: Base } and just pass in Base == &mut SomeType when you need it
[14:18:10] <eddyb> hmm
[14:18:14] <dbaupp> and then &mut SomeType would implement the appropriate traits, but it'd also allow you to put something in there by value
[14:18:21] <dbaupp> *would have to implement
[14:18:31] <eddyb> dbaupp: what about 'self?
[14:18:38] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[14:19:07] *** Joins: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP)
[14:19:13] <dbaupp> eddyb: only necessary if you have a lifetime-requiring type in there directly; it's "inherited" from generics automatically
[14:19:33] <eddyb> dbaupp: ooooh, thanks a lot, that might be it :D
[14:21:02] <eddyb> OMG it compiles
[14:21:43] <eddyb> dbaupp: &mut happens to works for values because it refers to the storage inside the struct
[14:22:27] <eddyb> *work
[14:23:48] *** Joins: curmet (Mibbit@2412C000.BC32F0E5.27A02188.IP)
[14:27:36] *** Quits: curmet (Mibbit@2412C000.BC32F0E5.27A02188.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:28:43] *** ozten is now known as ozten|afk
[14:29:06] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[14:33:19] *** pmoore is now known as pmoore|away
[14:36:19] *** pmoore|away is now known as pmoore
[14:36:50] <bstrie> what's the preferred way to read the lines of a file into an array
[14:36:59] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[14:37:46] <bstrie> is there a clever iterator-based solution
[14:37:54] * pcwalton wants to know as well :)
[14:37:54] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[14:38:30] <bstrie> in particular I'm not sure what the status of std::io is
[14:39:06] <bstrie> I know we're replacing it with std::rt::io, but I'm not sure if that means that we're using the same underlying api implemented in new terms or if we're just going to chuck out the old for the newe
[14:39:12] *** Joins: Guest_ (textual@moz-7D72AF75.rev.vodafone.pt)
[14:39:26] <bstrie> and if the former, I have no idea how much of that work is already complete
[14:39:49] <bstrie> think I will just grep the io modules for implementations of Iterator :P
[14:41:14] *** jorendorff is now known as jorendorff_away
[14:41:25] <bstrie> ha, std::io has `use iter::Iterator`, but Iterator doesn't appear anywhere else in the file
[14:41:32] <bstrie> I thought that was supposed to be caught by lint
[14:42:26] *** Quits: heftig (heftig@moz-A0106691.dip0.t-ipconnect.de) (Quit: Quitting)
[14:43:26] *** jorendorff_away is now known as jorendorff
[14:43:32] *** ozten|afk is now known as ozten
[14:43:33] *** flaper87 is now known as flaper87|afk
[14:44:10] <bstrie> oh, hm...
[14:44:19] <bstrie> looks like we implement those in terms of internal iterators
[14:44:29] <bstrie> at least according to the docs
[14:44:46] <bstrie> oh wait
[14:44:48] <bstrie> line_iter()
[14:44:59] <pcwalton> what is the difference between std::io and std::rt::io these days functionality-wise?
[14:45:07] <pcwalton> I thought that std::rt::io worked for files now
[14:45:29] *** Joins: ianj (ianjneu@moz-7140CF01.ccs.neu.edu)
[14:46:38] *** Quits: jaen (jaen@138A5D71.4C038AE9.C4431F0E.IP) (Ping timeout)
[14:48:35] <ChrisMorgan> Yes, file I/O in newrt works.
[14:49:16] <ChrisMorgan> The impression I have received is that it's largely now just a matter of switching uses of std::io to use std::rt::io and then std::io can be thrown away, but there may still be a few things to be done with it.
[14:49:37] * ChrisMorgan wants things like std::comm vs. std::rt::comm sorted out too
[14:49:57] <bstrie> bleh, the examples in the docstrings are wrong
[14:50:16] <bstrie> File::open("message.txt").line_iter().to_vec(); // `File` isn't a thing, anywhere
[14:50:33] *** Quits: pcwalton (pcwalton@moz-B51927E9.hsd1.ca.comcast.net) (Quit: pcwalton)
[14:51:33] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[14:52:04] <Florob> My last experience was that std::rt:io lacked a lot of functionality in its ReaderUtil. And that still seems to be the case.
[14:52:11] *** Joins: alan (alan@moz-FE02DD30.sat6.rackspace.com)
[14:52:20] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[14:52:52] *** Quits: efyx (efyx@moz-27C66711.adsl-dyn.isp.belgacom.be) (Ping timeout)
[14:52:59] *** Quits: pnkfelix (pnkfelix@moz-813314A4.hsd1.ma.comcast.net) (Quit: Leaving.)
[14:53:06] *** Joins: efyx (efyx@moz-27C66711.adsl-dyn.isp.belgacom.be)
[14:53:42] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[14:53:52] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[14:54:01] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[14:54:20] <bstrie> haha, can't even figure out how to open a damn file
[14:54:23] <bstrie> our docs need work :(
[14:54:48] *** Quits: Ms2ger (Ms2ger@moz-C53BB8E2.ugent.be) (Ping timeout)
[14:54:55] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[14:55:58] <ChrisMorgan> bstrie: http://static.rust-lang.org/doc/master/std/rt/io/file/fn.open.html
[14:56:15] <bstrie> yeah I found it, eventually
[14:56:30] <bstrie> I expected that you would just initalize a FileReader with a file name, or something
[14:56:40] <bstrie> how do you even use FileReader with the object returned by open
[14:57:00] *** Quits: canhtak (jeremy@moz-EF57C296.wl.t.ulaval.ca) (Quit: canhtak)
[14:57:01] <FreeFull> It'd be nice if rust had local docs too
[14:57:15] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[14:57:34] <kimundi> FreeFull: make will also build the html docs locally
[14:57:54] <ChrisMorgan> Into doc/, e.g. doc/std/index.html
[14:58:28] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[14:59:27] <FreeFull> kimundi: I have rust installed globally from a nightly package though
[14:59:38] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[14:59:52] <kimundi> hum... okay no idea then :P
[14:59:53] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[15:00:02] *** Quits: aegeaner (Aegeaner@7F208F22.BD9EA362.4446104D.IP) (Connection reset by peer)
[15:00:03] <FreeFull> I guess it wouldn't hurt to get the source
[15:01:04] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[15:01:12] <eddyb> static mut allocator: SlamAllocator<()> = SlamAllocator!(());
[15:01:16] <eddyb> yuss, it finally works :D
[15:01:33] <eddyb> (I love how I can impl a trait for () as a placeholder)
[15:01:40] *** Quits: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP) (Client exited)
[15:01:53] *** flaper87|afk is now known as flaper87
[15:02:34] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[15:02:47] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[15:03:19] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[15:03:26] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Connection reset by peer)
[15:03:59] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[15:04:45] *** Joins: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP)
[15:04:52] *** Joins: doomlord_ (servitor@moz-6732E9D4.range86-184.btcentralplus.com)
[15:05:26] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[15:06:38] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[15:07:36] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[15:07:50] *** Joins: eholk (eholk@moz-BA312F07.crest.iu.edu)
[15:08:05] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[15:08:46] *** Joins: GeneralMaximus (ankur@708D283E.27DDE783.BE90E62C.IP)
[15:09:17] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[15:09:38] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[15:09:45] *** Joins: pcwalton (pcwalton@moz-B51927E9.hsd1.ca.comcast.net)
[15:09:45] *** ChanServ sets mode: +ao pcwalton pcwalton
[15:10:08] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[15:10:42] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[15:11:39] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[15:12:04] *** Quits: Blub\w (wry@moz-864FF0B9.wireless.dyn.drei.com) (Quit: back tomorrow or maybe later tonight)
[15:13:20] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[15:14:05] <engla> eddyb: sometimes it can be more useful to have a separate unit type for that
[15:14:12] <engla> struct Placeholder; or similar
[15:14:32] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[15:15:59] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[15:16:40] *** Joins: BitPuffin (isak@moz-98F8BF74.cust.tele2.se)
[15:16:55] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[15:17:34] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[15:18:09] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[15:18:41] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[15:19:45] *** Joins: pnkfelix (pnkfelix@moz-B65AF445.hfc.comcastbusiness.net)
[15:19:45] *** ChanServ sets mode: +o pnkfelix
[15:19:53] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[15:20:13] <eddyb> rusti: assert!(16 % 0 == 0)
[15:20:14] -rusti- task '<unnamed>' failed at 'attempted remainder with a divisor of zero', <anon>:9
[15:20:14] -rusti- application terminated with error code 101
[15:20:24] *** Joins: xAndy (xandy@moz-1C332306.unity-media.net)
[15:20:36] <eddyb> rusti: let mut x = 0; assert!(16 % x == 0)
[15:20:37] -rusti- <anon>:9:17: 9:18 warning: variable does not need to be mutable, #[warn(unused_mut)] on by default
[15:20:37] -rusti- <anon>:9          let mut x = 0; assert!(16 % x == 0)
[15:20:37] -rusti-                           ^
[15:20:37] -rusti- task '<unnamed>' failed at 'attempted remainder with a divisor of zero', <anon>:9
[15:20:37] -rusti- application terminated with error code 101
[15:20:46] <eddyb> hmm, is that a runtime error?
[15:21:20] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[15:21:23] <engla> yes
[15:21:37] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[15:21:58] <engla> hm not sure
[15:22:10] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[15:22:32] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[15:23:57] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[15:24:52] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[15:25:57] <eddyb> engla: yeah it is
[15:26:00] *** jorendorff is now known as jorendorff_away
[15:26:09] <eddyb> I can't get feature attribute to work :(
[15:26:12] <eddyb> #[feature(globs)];
[15:26:22] <eddyb> I tried without the semicolon, too
[15:26:38] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[15:27:11] <eddyb> also, some types of comments trigger weird syntax errors
[15:27:25] *** Quits: Ferreus (ferreus@moz-FC760E19.dip0.t-ipconnect.de) (Quit: WeeChat 0.4.1)
[15:27:52] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[15:28:07] <bstrie> eddyb: yep, our doc comments are secretly just attributes, so if they appear in the wrong place it will yell at you
[15:28:09] <benh> eddyb: the #[feature] bit might need to be at the crate root scope
[15:28:11] <bstrie> it's bad
[15:28:26] <bstrie> we need to work on doc comment syntax (dammit wadler)
[15:28:35] <eddyb> benh: oooh, so in my main.rs?
[15:28:39] <benh> I think so!
[15:28:44] <benh> not 100% sure :)
[15:29:15] <eddyb> thanks, works now :D
[15:29:29] *** Quits: GeneralMaximus (ankur@708D283E.27DDE783.BE90E62C.IP) (Quit: Computer has gone to sleep.)
[15:29:49] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[15:30:24] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[15:30:35] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[15:31:15] *** Joins: heftig (heftig@moz-E8E2034C.inf.fh-bonn-rhein-sieg.de)
[15:31:52] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[15:32:06] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Ping timeout)
[15:32:22] *** Quits: DeTeam (DeTeam@92C799C.31715274.F5F3AF2.IP) (Quit: DeTeam)
[15:33:28] *** Quits: sp3d (a@6361F3B1.19CD1E54.8354FB35.IP) (Ping timeout)
[15:33:52] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[15:34:33] *** Quits: reedlepee (Mibbit@C8A2E35A.38F7F17E.9D59D0D8.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:34:38] *** pmoore is now known as pmoore|teaaaaaa
[15:37:37] <eddyb> hmm, how stable is uint == uintptr_t?
[15:38:02] <eddyb> if it's always going to be that way, I'm not sure I want to have uintptr_t and size_t aliases all over my Rust code
[15:38:32] *** jorendorff_away is now known as jorendorff
[15:40:11] <engla> I think it will always be that way. sticking it to a C type maybe isn't the best way to express it though
[15:41:13] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[15:41:13] <eddyb> sed time
[15:41:21] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[15:44:31] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[15:44:40] *** Quits: pnkfelix (pnkfelix@moz-B65AF445.hfc.comcastbusiness.net) (Quit: Leaving.)
[15:45:21] <strcat> eddyb: I just use uint myself
[15:45:31] <eddyb> strcat: ohai :D
[15:45:39] *** Joins: canhtak (jeremy@moz-EF57C296.wl.t.ulaval.ca)
[15:45:41] <strcat> I don't like that we have aliases for uint8_t, uintptr_t, size_t, etc.
[15:45:47] <eddyb> strcat: it's getting better and better http://forum.osdev.org/viewtopic.php?f=15&t=20878&p=228353#p228353
[15:46:06] <strcat> imo, we should only have aliases for weird things like C char (signed or unsigned), short, int, long, long long
[15:46:15] <strcat> where they don't have a corresponding rust type
[15:46:28] * strcat made a PR about it a while ago and it was rejected
[15:46:31] <eddyb> and in c_type module, not imported by default
[15:49:11] *** Joins: KENZ (Mibbit@moz-8933D851.ppp-bb.dion.ne.jp)
[15:49:49] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[15:49:59] *** Joins: Ferreus (ferreus@moz-FC760E19.dip0.t-ipconnect.de)
[15:50:09] <eddyb> strcat: fully initialized and inlineable static mut allocator, with thread safety and a relatively low overhead, and without the recovery (not implemented yet. I couldn't test, no VMM) it's just over 230 lines
[15:51:21] *** Joins: chal (Mibbit@46E430D1.B015E2B0.EB06F97B.IP)
[15:52:08] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[15:52:10] *** Quits: chal (Mibbit@46E430D1.B015E2B0.EB06F97B.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:52:29] <eddyb> strcat: I'm feeling like a salesman. yesterday morning I had no idea how this thing was working and now I've already improved it :P
[15:53:10] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[15:53:27] <eddyb> hmpf, how do I import a macro from a module?
[15:53:36] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[15:53:56] <FreeFull> eddyb: If it was in a module not imported by default I'd be fine with it
[15:54:00] *** Joins: tautologico (lymph@703660AA.CFE755C8.C27E1635.IP)
[15:54:50] <strcat> eddyb: #[macro_escape] will make macros escape from a module, it's a hopefully temporary hack
[15:55:10] <eddyb> I've... tried it. let's try it again :D
[15:56:01] <eddyb> nope, still not working. I think I know now why there's a need to change the attr syntax
[15:56:33] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[15:56:48] <strcat> eddyb: #[macro_escape]; *
[15:56:52] <strcat> needs to apply to the module
[15:56:52] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[15:57:06] <eddyb> yeah, that's what I have
[15:57:27] *** Quits: q66 (q66@moz-463E955C.range86-148.btcentralplus.com) (Ping timeout)
[15:57:32] <eddyb> strcat: maybe this is of greater importance: I have two modules using each-other. can I have some ordering in there?
[15:57:38] *** Joins: q66 (q66@moz-463E955C.range86-148.btcentralplus.com)
[15:57:42] <strcat> eddyb: ordering?
[15:57:47] <eddyb> strcat: or should I split one of the modules to remove the cycle?
[15:57:51] <strcat> it doesn't matter
[15:58:02] <strcat> crates are built as a single unit, modules are just organization
[15:58:40] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Ping timeout)
[15:59:14] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[15:59:27] *** autra_ is now known as autra
[16:00:00] <eddyb> lol, failed to resolve import only after I commented the macro
[16:00:20] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[16:00:24] <strcat> great I figured it out
[16:00:32] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[16:01:19] *** Joins: mib_bcsgeg (Mibbit@39C2C95A.3A27401E.16E13E53.IP)
[16:03:18] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[16:03:23] *** Quits: mib_bcsgeg (Mibbit@39C2C95A.3A27401E.16E13E53.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:03:29] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[16:03:46] *** Quits: Ferreus (ferreus@moz-FC760E19.dip0.t-ipconnect.de) (Ping timeout)
[16:04:24] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[16:09:14] *** Joins: pyrac (pyrac@moz-A696FE33.w92-162.abo.wanadoo.fr)
[16:09:37] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[16:10:11] *** AutomatedTester is now known as AutomatedTester|away
[16:10:21] *** Quits: martndemus (martndemus@moz-E30F5776.adsl.xs4all.nl) (Ping timeout)
[16:11:12] *** Joins: simon (simon@moz-FD4ADBC6.cable.teksavvy.com)
[16:13:12] *** Quits: heftig (heftig@moz-E8E2034C.inf.fh-bonn-rhein-sieg.de) (Ping timeout)
[16:13:22] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[16:13:26] *** Joins: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP)
[16:13:28] *** Quits: Guest_ (textual@moz-7D72AF75.rev.vodafone.pt) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[16:14:25] <bstrie> ugh
[16:14:29] <bstrie> still can't open a file
[16:14:43] <bstrie> the open function takes enums to determine the file access and file mode
[16:14:48] *** Joins: pnkfelix (pnkfelix@moz-B65AF445.hfc.comcastbusiness.net)
[16:14:48] *** ChanServ sets mode: +o pnkfelix
[16:14:51] <bstrie> I can import these enums fine
[16:14:55] <bstrie> but the variants simply cannot be used
[16:14:57] <bstrie> rust can't find them
[16:15:02] <bstrie> I can see the variants in libstd
[16:15:05] <bstrie> they exist
[16:15:16] *** Joins: HollyRain (HollyRain@moz-50A83091.dyn.user.ono.com)
[16:15:24] *** Joins: heftig (heftig@moz-E8E2034C.inf.fh-bonn-rhein-sieg.de)
[16:15:54] <bstrie> but it's always just "error: unresolved name `Open`"
[16:16:06] *** Joins: sp3d (s@6361F3B1.19CD1E54.8354FB35.IP)
[16:16:25] <HollyRain> why there are not benchmarks for Rust in http://benchmarksgame.alioth.debian.org/ ?
[16:16:29] <eddyb> bstrie: did you import the variants as well?
[16:16:29] <bstrie> does each individual variant have to be marked as public??
[16:16:33] <bstrie> eddyb: wut
[16:16:40] <bstrie> there's no way that's necessary
[16:16:47] <bstrie> why would I import the enum and *not* want the variants
[16:16:50] <eddyb> use ....::{Option, Some, None}
[16:17:06] <eddyb> I've seen that in libstd just a few minutes ag
[16:17:30] <bstrie> that definitely didn't use to be the case
[16:17:31] <eddyb> bstrie: pollution. you can still access them using the full::name::Variant
[16:18:12] <eddyb> rusti: size_of::<[u8, ..15]>()
[16:18:14] -rusti- pastebinned 7 lines of output: http://ix.io/8vt
[16:18:24] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[16:18:31] <eddyb> rusti: std::sys::size_of::<[u8, ..15]>()
[16:18:31] -rusti- 15u
[16:18:56] <erickt> HollyRain: We got a bunch of those benchmarks in our test framework. I don't think we've tried getting into the benchmark game b/c rust is still very much in flux
[16:19:03] *** Quits: simon (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[16:21:03] *** Quits: pnkfelix (pnkfelix@moz-B65AF445.hfc.comcastbusiness.net) (Ping timeout)
[16:21:14] <strcat> erickt: the ones that are in-tree are poorly written lack time I checked
[16:26:02] *** flaper87 is now known as flaper87|afk
[16:28:16] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Ping timeout)
[16:28:42] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[16:29:07] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[16:29:07] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Connection reset by peer)
[16:29:21] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[16:29:37] <zokier`> http://www.rust-lang.org down?
[16:30:20] <strcat> zokier`: no
[16:30:38] <FreeFull> Up for me
[16:31:49] <zokier`> must have been some temporary issue then, works for me now too
[16:34:03] *** Joins: GeneralMaximus (ankur@91142E9A.98D49A57.BE90E62C.IP)
[16:34:52] *** Joins: vmx (vmx@8155E38.294C4FB6.EBB03D7A.IP)
[16:35:13] *** Quits: GeneralMaximus (ankur@91142E9A.98D49A57.BE90E62C.IP) (Quit: Computer has gone to sleep.)
[16:36:32] *** Quits: HollyRain (HollyRain@moz-50A83091.dyn.user.ono.com) (Quit: bye, bye)
[16:36:44] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[16:37:02] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[16:37:19] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[16:38:16] *** Quits: skade (skade@30BBD5E6.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[16:38:26] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[16:42:09] *** Quits: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: ZZZzzz…)
[16:43:07] *** Quits: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net) (Client exited)
[16:43:57] *** Joins: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net)
[16:47:21] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[16:48:15] *** Quits: oberstet (quassel@moz-273B8CA4.dynamic.mnet-online.de) (Client exited)
[16:53:06] *** Joins: pnkfelix (pnkfelix@moz-B65AF445.hfc.comcastbusiness.net)
[16:53:06] *** ChanServ sets mode: +o pnkfelix
[16:55:51] *** Quits: pnkfelix (pnkfelix@moz-B65AF445.hfc.comcastbusiness.net) (Ping timeout)
[16:59:03] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Quit: No Ping reply in 180 seconds.)
[16:59:08] <eddyb> rusti: [u8, ..10]
[16:59:11] -rusti- pastebinned 7 lines of output: http://ix.io/8vw
[16:59:21] <eddyb> rusti: [0u8, ..10]
[16:59:22] -rusti- [0u8, 0u8, 0u8, 0u8, 0u8, 0u8, 0u8, 0u8, 0u8, 0u8]
[16:59:26] *** Joins: busylizzy (lisa@85228838.12D0DC84.211374C4.IP)
[16:59:44] *** Joins: GeneralMaximus (ankur@91142E9A.98D49A57.BE90E62C.IP)
[17:00:08] *** Joins: bent|away (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:00:17] *** Quits: nkoep (nik@moz-12ABCC93.vpn.rwth-aachen.de) (Ping timeout)
[17:00:23] *** bent|away is now known as bent
[17:00:26] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[17:00:26] *** ChanServ sets mode: +ao dherman dherman
[17:01:00] *** pmoore|teaaaaaa is now known as pmoore|away
[17:02:03] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[17:02:09] *** Joins: riley (riley@8BA43816.9AA11D69.65DDFA89.IP)
[17:02:11] *** Quits: GeneralMaximus (ankur@91142E9A.98D49A57.BE90E62C.IP) (Quit: Computer has gone to sleep.)
[17:03:36] *** Quits: Heo__ (Heo@13864F63.2DD6919B.56C9C5CA.IP) (Ping timeout)
[17:04:40] *** Joins: mikezaby (mikezaby@moz-908EA8DE.home.otenet.gr)
[17:06:13] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[17:06:36] *** Joins: pnkfelix (pnkfelix@moz-B65AF445.hfc.comcastbusiness.net)
[17:06:36] *** ChanServ sets mode: +o pnkfelix
[17:07:41] <FreeFull> eddyb: It's weird to me that its all zeroes, is it not a range?
[17:07:54] <FreeFull> rusti: [0..10]
[17:07:56] -rusti- pastebinned 12 lines of output: http://ix.io/8vx
[17:08:01] <eddyb> FreeFull: no, it's 10 zeroes, ranges aren't a thing
[17:08:06] <eddyb> rusti: range(0, 10)
[17:08:07] -rusti- std::iter::Range<int>{state: 0, stop: 10, one: 1}
[17:08:14] <FreeFull> Ok
[17:08:30] <eddyb> FreeFull: that is, within the language itself. they're in std and they don't use special syntax
[17:08:43] <FreeFull> rusti: range('a', 'z')
[17:08:45] -rusti- pastebinned 12 lines of output: http://ix.io/8vy
[17:08:46] <nielsle> rusti: range(0, 10).to_owned_vec()
[17:08:47] -rusti- ~[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
[17:09:26] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:09:26] *** ChanServ sets mode: +ao brson brson
[17:09:31] <FreeFull> Maybe rather than having Add, something like Enum would be good
[17:09:41] <FreeFull> Since succ can make sense for types for which addition doesn't
[17:09:57] <mikezaby> chr
[17:10:44] <eddyb> rusti: 'z' - 'a'
[17:10:46] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[17:10:53] -rusti- failed to pastebin 7 lines of output
[17:10:54] <eddyb> interesting...
[17:11:47] <FreeFull> rusti: range(0,26).to_owned_vec().map(|x : int| chr(x))
[17:11:49] -rusti- pastebinned 7 lines of output: http://ix.io/8vz
[17:12:04] *** Joins: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net)
[17:13:02] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[17:14:11] <strcat> FreeFull: the first 26 char are not 'a' .. 'z' anyway
[17:14:26] <strcat> 'a' is 97
[17:14:35] *** Quits: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP) (Client exited)
[17:14:37] *** Joins: Kruppe (user@moz-253119B0.esg.uwaterloo.ca)
[17:14:40] <FreeFull> strcat: Yeah, I know
[17:14:47] *** Joins: eatkinson (eatkinson@moz-3CD3C4A7.airbears2.berkeley.edu)
[17:14:59] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[17:18:22] *** Quits: sw17ch (sw17ch@moz-852B2C80.hfc.comcastbusiness.net) (Quit: sw17ch)
[17:18:47] *** Joins: nkoep (nik@moz-E4F66740.pool.mediaways.net)
[17:19:27] *** Quits: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP) (Ping timeout)
[17:20:05] <FreeFull> rusti: range(0,26).to_owned_vec().map(|x : u8| x + ('a' as u8) as char)
[17:20:06] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Connection reset by peer)
[17:20:09] -rusti- pastebinned 10 lines of output: http://ix.io/8vE
[17:20:16] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[17:20:25] <olsonjeffery> rusti: (2+2) == 5
[17:20:26] -rusti- false
[17:20:37] <FreeFull> rusti: range(0,26).to_owned_vec().map(|x : u8| (x + ('a' as u8)) as char)
[17:20:47] -rusti- failed to pastebin 7 lines of output
[17:20:58] *** Joins: sw17ch (sw17ch@moz-852B2C80.hfc.comcastbusiness.net)
[17:22:02] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Ping timeout)
[17:22:26] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[17:23:09] *** Quits: pyrac (pyrac@moz-A696FE33.w92-162.abo.wanadoo.fr) (Quit: pyrac)
[17:24:10] <engla> rusti: range(0u8, 26).map(|x| (x + 65) as char).to_owned_vec()
[17:24:11] -rusti- ~['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z']
[17:25:36] <FreeFull> That works
[17:25:49] <FreeFull> rusti: range(0u8, 26).map(|x| (x + 65 + 32) as char).to_owned_vec()
[17:25:50] -rusti- ~['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z']
[17:26:02] *** Joins: skade (skade@moz-4865967C.pools.arcor-ip.net)
[17:26:15] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[17:27:45] *** Joins: andre (andre@CA528A4A.45A4338E.8EE27E6.IP)
[17:28:19] <andre> hello
[17:28:19] *** Joins: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP)
[17:28:36] <andre> i'm getting started with rust, trying to write my own version of std::os::walk_dir
[17:28:44] <engla> FreeFull: see this
[17:28:46] <engla> rusti: fn char_range(a: char, b: char) -> std::iter::Map<u32, char, std::iter::Range<u32>> { range(a as u32, b as u32 +1).map(|c| std::char::from_u32(c).unwrap()) }  char_range('a', 'z').to_owned_vec()
[17:28:47] -rusti- ~['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z']
[17:28:57] <andre> i have a working function here: http://pastebin.com/5aXcuKVm
[17:29:27] <andre> why do i need to use a closure in the recursive call to walk_dir, ie, why can't i just call it as walk_dir(p, f)?
[17:29:35] *** Joins: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com)
[17:29:44] *** Quits: dew1 (Instantbir@moz-8EDFD40B.static.stls.mo.charter.com) (Ping timeout)
[17:30:05] <FreeFull> engla: That works. I can see why the standard range doesn't include the last element, even if it makes more sense the other way
[17:30:33] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[17:30:38] <engla> well of course range's behavior makes sense in some way, otherwise it wouldn't be that wya
[17:31:00] *** Quits: autra (augustin@moz-2EA7A1DF.fullsix.com) (Ping timeout)
[17:31:39] <engla> char_range will fail if you try to cross the range of invalid chars after 0xD7FF
[17:31:50] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Ping timeout)
[17:32:00] *** Joins: ofeldt- (ofeldt@moz-EC1A65EE.dip0.t-ipconnect.de)
[17:32:16] *** Joins: nuclearsandwich (smll@moz-4ACEE7B7.hfc.comcastbusiness.net)
[17:32:40] *** Quits: ofeldt (ofeldt@moz-38848B1A.dip0.t-ipconnect.de) (Ping timeout)
[17:32:48] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:33:14] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[17:33:40] <engla> it will be correct to use FilterMap instead of Map
[17:33:45] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[17:34:43] *** Joins: reedlepee (Mibbit@3C9ED70E.61B8DFA9.9D59D0D8.IP)
[17:34:56] <engla> rusti: fn char_range(a: char, b: char) -> std::iter::FilterMap<u32, char, std::iter::Range<u32>> { range(a as u32, b as u32 +1).filter_map(|c| std::char::from_u32(c)) }  char_range('\ud7fc', '\ue000').to_owned_vec()
[17:34:57] -rusti- ~['\ud7fc', '\ud7fd', '\ud7fe', '\ud7ff', '\ue000']
[17:35:07] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[17:35:29] <engla> rusti: fn char_range(a: char, b: char) -> std::iter::FilterMap<u32, char, std::iter::Range<u32>> { range(a as u32, b as u32 +1).filter_map(|c| std::char::from_u32(c)) }  char_range('\u0000', '\U0010FFFF').len()
[17:35:30] -rusti- 1112064u
[17:36:02] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Connection reset by peer)
[17:36:08] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[17:37:42] *** Parts: nuclearsandwich (smll@moz-4ACEE7B7.hfc.comcastbusiness.net) (WeeChat 0.3.8)
[17:37:46] *** Joins: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com)
[17:38:17] *** Joins: spott_ (spott@moz-5158CBDE.colorado.edu)
[17:38:19] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Connection reset by peer)
[17:39:23] *** Joins: sinma (seb@moz-6A11C47C.fbx.proxad.net)
[17:40:25] *** Joins: DeTeam (DeTeam@moz-F128FD8B.dyn.broadband.iskratelecom.ru)
[17:40:54] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[17:41:35] *** Quits: DeTeam (DeTeam@moz-F128FD8B.dyn.broadband.iskratelecom.ru) (Quit: DeTeam)
[17:42:06] <sinma> Hi, I wonder why «pub struct Game { entities: ~[entity] } impl Game { pub fn new() -> Game { Game { entities = ~[] }» won’t compile («error: expected one of `;`, `}` but found `{`» and «task '<unnamed>' failed at 'explicit failure'»).
[17:42:33] <sinma> rusti: pub struct Game { entities: ~[int] } impl Game { pub fn new() -> Game { Game { entities = ~[] }
[17:42:34] -rusti- pastebinned 12 lines of output: http://ix.io/8vZ
[17:43:03] <sinma> The error message is even weirder with rusti…
[17:43:30] <engla> the syntax should be  Game{ entities: ~[]}    without =
[17:43:41] <sinma> rusti: pub struct Game { entities: ~[int] } impl Game { pub fn new() -> Game { Game { entities = ~[] } }
[17:43:42] -rusti- pastebinned 9 lines of output: http://ix.io/8w0
[17:43:46] <engla> for the construction
[17:44:30] <sinma> ok, works
[17:44:31] *** Quits: spott_ (spott@moz-5158CBDE.colorado.edu) (Connection reset by peer)
[17:44:45] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[17:44:55] <bjz_> andre: what was the error with walk_dir(p, f) again?
[17:45:06] <sinma> The error message indicated that the problem were on «Game {»
[17:45:47] <andre> bjz_: use of moved value: `f`
[17:45:54] <andre> and a following note: `f` moved here because it has type `&fn<no-bounds>(&std::path::PosixPath)`, which is a non-copyable stack closure (capture it in a new closure, e.g. `|x| f(x)`, to override)
[17:46:14] *** Quits: heftig (heftig@moz-E8E2034C.inf.fh-bonn-rhein-sieg.de) (Quit: Quitting)
[17:47:08] *** Joins: julmas (Mibbit@moz-2A79EF00.junet.se)
[17:49:31] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[17:49:51] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:50:02] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[17:50:37] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:50:54] <julmas> Hello. I've just started playing around with rust. I've had plenty of syntax errors, but today I got my first runtime error (program just dies). I'm attempting to insert one of my structs into an extra::PriorityQueue. The line that pushes my @thingie is the one that crashes. Are there any known gotchas I should be aware of when using the prio queue?
[17:51:01] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[17:51:18] *** Joins: snadon (chatzilla@27E48760.187AFC12.47C41102.IP)
[17:51:31] *** Joins: Ms2ger (Ms2ger@B7B2FF50.C60A97A6.F9FB0584.IP)
[17:51:37] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[17:51:45] *** Quits: sw17ch (sw17ch@moz-852B2C80.hfc.comcastbusiness.net) (Quit: sw17ch)
[17:52:36] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[17:52:57] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:54:42] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[17:56:48] *** Quits: jdm (jdm@88F51059.F3BBB17D.144F44FA.IP) (Quit: Lost terminal)
[17:58:27] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[17:58:59] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[17:59:07] *** Quits: eatkinson (eatkinson@moz-3CD3C4A7.airbears2.berkeley.edu) (Quit: eatkinson)
[17:59:21] <earlz2> So, when rusti is removed, will that mean the IRC bot is also removed? 
[17:59:21] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:59:21] *** ChanServ sets mode: +ao brson brson
[17:59:23] <Earnestly> julmas: Show the code perhaps
[17:59:26] <sfackler> julmas: that sounds like a dynamic borrow error as opposed to a priority queue issue
[17:59:33] <bstrie> earlz2: rusti the bot does not actually use rusti :)
[17:59:57] <earlz2> oh. that's misleading heh
[18:00:22] *** Joins: tikue (tikue_star@2772A85E.EB08480C.689607DE.IP)
[18:00:25] <FreeFull> It'd be nice to have a working Rust REPL
[18:00:30] <sp3d> ^
[18:00:33] <FreeFull> Sadly rusti doesn't work
[18:00:51] <tikue> is there a way to coerce a closure to be ~fn when it's not being inferred correctly?
[18:00:53] <bstrie> people keep saying that! if only someone would actually make it work :P
[18:00:57] <benh> I'll take no repl over a repl that only tempts me but only repl-ies with "Segmentation fault"
[18:01:14] <bstrie> tikue: `let foo: ~fn() = || {};`
[18:01:16] <bstrie> I think
[18:01:36] <topspin> are there any working online Rust evaluators, ah la codepad, ideone, etc?  compileonline is broken atm.
[18:01:38] <earlz2> tikue: I ran into that problem. The only solution I could find is to not ever store the closure in an intermediate local variable
[18:01:56] <benh> strcat keeps linking http://strcat.zapto.org:8000/ but it doesn't actually work for me
[18:02:08] <tikue> earlz, funny, the problem I'm having is with your code actually :P
[18:02:19] <tikue> earlz2, ^
[18:02:20] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[18:02:26] <topspin> thanks. seems to work for me
[18:02:31] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[18:02:38] <earlz2> For instance, not let f=| | {}; Foo{fun: f}; ... but rather Foo{fun: || {} }; 
[18:02:39] <FreeFull> benh: The hello world works for me
[18:02:44] <earlz2> tikue: oh really? 
[18:02:49] *** Joins: bhearsum (bhearsum@moz-FBAE94.members.linode.com)
[18:02:58] <FreeFull> benh: The output appears on the bottom
[18:03:02] <tikue> earlz, yeah in your proto mvc, line 112 or so
[18:03:05] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[18:03:15] <tikue> i put it in a temp var and that seemed to make it very unhappy
[18:03:38] <earlz2> yea, you can't use temp vars. I assume that's a compiler bug
[18:03:51] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Quit: Leaving)
[18:03:59] <tikue> yeah
[18:04:00] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[18:04:01] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[18:04:11] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[18:04:20] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[18:04:21] <earlz2> out of curiousity, what are you doing with it? :) 
[18:05:13] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[18:05:19] <strcat> bstrie: it's not easy to make it work
[18:05:21] <strcat> it has never actually worked
[18:05:38] <strcat> it was always just a leaky abstraction over compiling + running the whole input again
[18:06:01] <bstrie> strcat: it never *worked*, but there was a time, long ago, where typing `let foo = 1;` did not cause a segfault :P
[18:06:04] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Ping timeout)
[18:06:10] <tikue> here's the problem i'm having: https://gist.github.com/anonymous/b057f15a1e26b66d44cf
[18:06:27] <strcat> bstrie: yeah, and 'let mut x = 5;', 'x = 10', 'x' would print 5, back when it 'worked' ;p
[18:06:37] *** Quits: snadon (chatzilla@27E48760.187AFC12.47C41102.IP) (Client exited)
[18:06:39] <strcat> bstrie: I don't think we should ship a pretend REPL
[18:06:39] <bstrie> strcat: you're so picky!
[18:06:42] <earlz2> You're using a master build right? 
[18:06:43] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[18:06:44] <bstrie> but yeah I agree
[18:06:46] <strcat> it makes us look bad
[18:06:47] <bstrie> lots of people want it
[18:06:53] <bstrie> but nobody can get it to work
[18:06:55] <strcat> we're pretending we have a REPL but we don't have one
[18:06:57] <FreeFull> rusti: let mut x = 5; x = 10; x
[18:06:59] <earlz2> (master build of rust that is) 
[18:07:09] <strcat> FreeFull: the irc bot is rustc
[18:07:16] <FreeFull> Oh, the bot is gone
[18:07:19] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[18:07:19] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:07:20] <benh> I bet all the code I'd like to repl is not gonna borrowck anyway
[18:07:27] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[18:07:29] <FreeFull> strcat: I know
[18:07:29] <bstrie> let's rename the irc bot to rustci, that will surely clear up all naming confusion
[18:07:36] <FreeFull> I just wanted to see what it would do
[18:07:47] <FreeFull> bstrie: How about rusty?
[18:08:32] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[18:08:36] <sp3d> rustj
[18:09:02] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Ping timeout)
[18:09:31] <bstrie> well there will be no need to rename once we remove rusti
[18:09:41] <bstrie> but I do think that "rusty" is a cuter name for a bot :)
[18:09:59] <tikue> can someone take a look at this gist? i'm not sure if this is the compiler being finnicky or something actually wrong 
[18:10:05] <tikue> https://gist.github.com/anonymous/b057f15a1e26b66d44cf
[18:10:26] *** Quits: q66 (q66@moz-463E955C.range86-148.btcentralplus.com) (Ping timeout)
[18:11:02] <earlz2> Yea, I'm not sure. I'd have to look at it later when I have more time. It looks fine to me
[18:11:10] <julmas> Earnestly, sfackler: I uploaded my rs file to http://julmas.se/rust/rustball.rs 
[18:11:33] <strcat> bstrie: I really want http://strcat.zapto.org:8000/ on rust-lang.org too, and an editor with easy code evaluation makes a fake REPL kinda pointless ;p
[18:11:50] *** Joins: pyrac (pyrac@moz-A696FE33.w92-162.abo.wanadoo.fr)
[18:12:17] <bstrie> strcat: I disagree, rusti is great for demonstrating small code examples to the irc channel. don't make me follow links!!!
[18:12:35] <strcat> bstrie: I don't mean it makes the irc bot pointless, I mean actual rusti :P
[18:12:44] <bstrie> ah I see
[18:12:47] <bstrie> maybe we do need a rename
[18:12:49] <bstrie> :P
[18:13:29] <Earnestly> Go’s tour is quite nice, something more languages might want to emulate
[18:13:37] *** Joins: slackito (slackito@moz-7779E4A6.dyn.user.ono.com)
[18:13:53] <strcat> if it was on rust-lang.org we could have the samples in the tutorial run using it
[18:13:57] <earlz2> tikue: do you want to share your full code? 
[18:14:07] <Earnestly> strcat: That would be pretty nice
[18:14:12] <bstrie> instead of a repl, perhaps we could do a thing like firefox's javascript scratchpad
[18:14:24] <tikue> earlz2, the rest of the code is simply https://github.com/Earlz/rustymvc/blob/master/proto/protomvc.rs#L64
[18:14:38] <bstrie> it does get a little tedious to compile-and-run files just to try out small code things locally
[18:14:43] <strcat> bstrie: well we could ship something like this web interface with rust
[18:14:46] <strcat> without sandboxing
[18:14:50] <strcat> Go does that
[18:15:11] <bstrie> but really maybe I'm just asking for a vim plugin that can run rust code in the current buffer and show me the output :)
[18:15:18] <tikue> earlz2, these lines (https://github.com/Earlz/rustymvc/blob/master/proto/protomvc.rs#L107-L115) are what I changed to the gist
[18:15:18] <bstrie> but yeah a local web interface sounds nice
[18:15:21] <strcat> cppreference also has code samples that you can run/edit now
[18:15:33] <bstrie> I think go also has all of their docs on a local web thing
[18:15:59] <bstrie> which might actually be served from localhost via their http lib, or something hilarious like that
[18:16:58] <strcat> bstrie: well that's how their 'play' thing works
[18:17:01] <strcat> it's a go web server
[18:17:11] <strcat> and on their site they obviously use sandboxing of some sort
[18:17:16] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[18:17:21] <strcat> maybe google's container library
[18:17:32] <strcat> (playpen is better! ;p)
[18:17:38] *** Joins: simon (simon@moz-FD4ADBC6.cable.teksavvy.com)
[18:18:06] *** Joins: Blub\w (wry@moz-3ABE0667.wireless.dyn.drei.com)
[18:18:28] *** Joins: autra (augustin@moz-BE76895F.fbx.proxad.net)
[18:19:01] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[18:19:22] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[18:19:23] <earlz2> tikue: you might try maybe  `Some(ref t) => |c| invoker(&mut t(c), c` I don't think that'd actually fix it though. idk closures are buggy is my prediction. 
[18:19:37] *** Joins: msingle (Thunderbir@moz-1A29E89B.nrflva.fios.verizon.net)
[18:20:15] *** Quits: autra (augustin@moz-BE76895F.fbx.proxad.net) (Max SendQ exceeded)
[18:20:21] *** Quits: simon (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[18:20:25] <earlz2> Yea, I don't think you can do anything without wrapping the match in another closure, due to the variable-storage of closures making ~ closures into & closures
[18:20:31] *** Joins: autra (augustin@moz-BE76895F.fbx.proxad.net)
[18:21:01] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Ping timeout)
[18:21:43] *** Joins: sebcrozet (sebcrozet@moz-D8879CC3.w80-13.abo.wanadoo.fr)
[18:21:52] <strcat> pcwalton: I figured out that incredibly strange error.... it was evil zero-size types screwing up pointer arithmetic
[18:22:03] <pcwalton> ah
[18:22:09] <pcwalton> divide by zero? :)
[18:22:14] <strcat> pcwalton: the thing I "broke" already has undefined behaviour though
[18:22:34] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[18:22:39] <strcat> pcwalton: well, by switching from byte offsets to offsets by the actual type, I made the end ptr used in iteration somewhere the same as the start
[18:22:42] <tikue> pcwalton, having to propagate a result at each stack frame seems pretty painful
[18:22:53] <strcat> pcwalton: https://github.com/mozilla/rust/issues/9890 it needs to be fixed though, because what it's doing is indexing past the end :\
[18:23:04] <pcwalton> tikue: from a usability POV or from a performance POV?
[18:23:09] <tikue> pcwalton, usability
[18:23:21] <tikue> it doesn't represent what's really going on
[18:23:21] <strcat> I had to special-case zero-size types in VecIterator because of this
[18:23:24] <pcwalton> we'll probably want a "do" notation macro
[18:23:27] <pcwalton> like Haskell
[18:23:32] <pcwalton> so you can automatically thread results through
[18:23:34] <strcat> but the compiler has built-in iteration for drop/take glue >.<
[18:23:35] <pcwalton> instead of having to write and_then
[18:24:19] <strcat> if we get failure in destructors working we can have errors you can't ignore via RAII
[18:24:34] <strcat> write() -> Error<SomeEnum>
[18:24:44] <strcat> where if you don't unwrap the enum, you get a failure in the destructor
[18:24:54] <tikue> yeah i saw the issue where that idea was thrown around
[18:25:02] <acrichto> strcat: I think that'd be pretty awesome to have
[18:25:05] <tikue> it's definitely better than having a more explicit match. but...
[18:25:17] <strcat> well this example wouldn't be replacing a match
[18:25:27] <topspin> strcat: thanks for the rust playpen
[18:25:28] <tikue> strcat, sorry i was responding to pcwalton, i haven't fully grocked what you mean 
[18:25:32] <strcat> oh
[18:25:38] <tikue> grok sp?
[18:25:43] * tikue shrugs
[18:25:48] <strcat> so lets say you have a function like 'write' which can fail to work
[18:25:59] <tikue> ok
[18:26:05] <bstrie> tikue: spellings vary, it's a martian word
[18:26:07] *** Quits: ksf (ksf@moz-9DA86FE9.adsl.hansenet.de) (Ping timeout)
[18:26:08] *** Joins: ksf (ksf@moz-1DF7C0A6.adsl.hansenet.de)
[18:26:14] <strcat> you can 1) use a condition (can't ignore the error), 2) failure (can't *handle* the error sanely), 3) return value
[18:26:18] <tikue> bstrie, :P 
[18:26:21] <strcat> if you use a return value, you can accidentally ignore it
[18:26:47] <pcwalton> I want to fix that problem
[18:26:48] <tikue> you mean like ignoring via unwrapping?
[18:26:48] <strcat> but if the error type has a destructor throwing a failure... you get the best of both of return/failure worlds
[18:26:53] <pcwalton> by making ignoring return values a warning
[18:27:00] <pcwalton> been wanting to do that for a long time
[18:27:08] <strcat> pcwalton: wouldn't that be really annoying though?
[18:27:13] <pcwalton> I doubt it
[18:27:15] <tikue> oh nvm, I see
[18:27:17] <pcwalton> it's true in OCaml and I love it
[18:27:17] <bstrie> I think it has the potential to be pretty annoying
[18:27:21] <engla> you can silently ignore the error with a semicolon as long as that line of code is not executed. That's better than exceptions which you can silently ignore until they exceptional case occurs, at least.
[18:27:39] <pcwalton> I really don't think it'll be annoying if we design the APIs right
[18:27:45] <bstrie> but I don't think a lint mode for it is unwarranted
[18:27:51] <bstrie> just not sure if I want it on by default
[18:27:53] <strcat> stuff like 'insert' on maps returns bool for convenience, and that would become an inconvenience ;p
[18:28:02] <pcwalton> yeah, I always though "insert" was misdesigned
[18:28:21] <pcwalton> it's already annoying if you use "insert" in a pattern match for example and the other arms don't return bool
[18:28:24] <bstrie> once we have a lint mode we can figure out just how annoying it would be
[18:28:33] <pcwalton> I think ignorable return values just don't really work that great in Rust to begin with
[18:28:38] *** ozten is now known as ozten|afk
[18:29:06] <pcwalton> just have two methods, one that returns the value and the other that doesn't, if you want an ignorable return value
[18:29:09] <strcat> managed pointers are proving to a problem in changing the ~[T] representation...
[18:29:20] <strcat> I'm not sure how to maintain support for an imaginary GC
[18:29:29] <tikue> strcat, so if the return had a destructor, it still can't propagate right?
[18:29:31] <pcwalton> how so?
[18:29:38] <strcat> pcwalton: well atm the box allocation has a length in it
[18:29:49] <strcat> so the annihilator knows how long the thing is it has to destroy
[18:30:00] *** Quits: vmx (vmx@8155E38.294C4FB6.EBB03D7A.IP) (Ping timeout)
[18:30:09] <strcat> if they were { len, capacity, data* }, they could inform a gc about how long they were
[18:30:12] <strcat> but the current way isn't going to work
[18:30:56] <pcwalton> oh I see, maybe we do need a length inside the data
[18:31:06] <pcwalton> that might actually sink the whole {len, capacity, data*} idea
[18:31:09] <strcat> pcwalton: only when @ is inside, which we know statically
[18:31:20] *** Joins: vmx (vmx@8155E38.294C4FB6.EBB03D7A.IP)
[18:31:32] <strcat> pcwalton: ~[T] already adds a box header with a tydesc, it could also have a length
[18:31:34] <pcwalton> yeah but I don't want sizeof(~[T:Send]) to be different from sizeof(~[T:Nonsend])
[18:31:35] <pcwalton> that's weird
[18:31:42] <strcat> it already needs a tydesc though
[18:31:46] <strcat> so it can call the right destructor
[18:31:53] <pcwalton> and have the len in two places?
[18:31:55] <tikue> what is the problem with exceptional control flow that rust is trying to avoid?
[18:32:45] *** Joins: echristo (echristo@4EEA9249.D6CCE4AE.77834EAA.IP)
[18:32:49] <strcat> pcwalton: for ones containing @, yes
[18:33:12] <strcat> I think local_malloc is probably memory unsafe btw
[18:33:19] <strcat> I really doubt it checks for overflow
[18:33:37] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[18:33:46] <strcat> it makes allocations bigger
[18:34:18] <strcat> hrm
[18:34:49] *** Joins: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com)
[18:34:57] <strcat> pcwalton: the difference isn't based on Send btw
[18:35:07] <strcat> I added a contains_managed intrinsic for this when I removed the unique headers
[18:35:28] <strcat> pretty much all the vector functions already branch on it to deal with the header @ adds
[18:35:46] <pcwalton> hmm, ok
[18:36:09] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[18:36:23] <strcat> it's ugly but... I think it will always need a typeid thing
[18:37:33] *** Joins: heftig (heftig@moz-B2FE7F86.dip0.t-ipconnect.de)
[18:38:27] <bstrie> tikue: the reason to avoid exceptions is to avoid the need for papers like this: http://www.stroustrup.com/except.pdf
[18:38:45] *** Quits: vmx (vmx@8155E38.294C4FB6.EBB03D7A.IP) (Ping timeout)
[18:38:45] <tikue> bstrie, heh, I realized the answer to my question almost immediately after I asked it :P
[18:38:47] <pcwalton> it's just opinionated design, Rust tries to avoid exceptions
[18:39:10] <pcwalton> because they don't do a good job of putting the world back into a known-good state, except at the task level where we have data isolation
[18:39:41] <bstrie> pcwalton: from all the discussions it seems more like memory safety is impossible to guarantee in the face of exceptions, rather than just opinionated design
[18:39:49] <pcwalton> I don't think so
[18:39:52] <pcwalton> but I could be wrong of course
[18:39:56] <bstrie> but I don't pretend to have ever written C++ code that cared about exception safety :P
[18:39:59] *** Quits: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net) (Quit: brendan)
[18:40:21] <strcat> bstrie: it's harder to make low-level code memory safe if you have to restore back to a sane state
[18:40:24] <benh> (Do we really have data isolation given that there's RWARCs and implicit state in terms of what tasks are running and have what data in which streams?)
[18:40:28] *** Quits: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net) (Client exited)
[18:40:44] *** Joins: vmx (vmx@8155E38.294C4FB6.EBB03D7A.IP)
[18:40:56] <bstrie> benh: RWARCs get poisoned if their writer task fails, or something like that
[18:42:16] *** Joins: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net)
[18:42:25] <pcwalton> ah, another person on HN who thinks C++ with smart pointers is memory-safe
[18:42:40] <pcwalton> someday we will eradicate this notion
[18:42:54] <bstrie> pcwalton: need to start a propaganda campaign
[18:43:06] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Ping timeout)
[18:43:10] <tikue> i'm not actually 100% on that issue -- what exactly is unsafe in smart-pointer C++?
[18:43:15] *** Quits: efyx (efyx@moz-27C66711.adsl-dyn.isp.belgacom.be) (Ping timeout)
[18:43:19] <bstrie> pcwalton: comments like http://www.reddit.com/r/rust/comments/1oi4fp/im_learning_rust_so_i_can_move_away_from_c/ccsxzpj are what convinced me that you were right in wanting to axe managed pointers
[18:43:26] *** Joins: busylizzy (lisa@85228838.12D0DC84.211374C4.IP)
[18:43:28] *** Joins: efyx (efyx@moz-27C66711.adsl-dyn.isp.belgacom.be)
[18:43:58] <bstrie> tikue: not a C++ programmer, but iirc C++ doesn't stop you from ignoring the uniqueness of a unique_ptr
[18:44:12] <tikue> bstrie, lol wut
[18:44:24] <tikue> bstrie, not a c++ programmer either...but that sounds incredible
[18:44:30] <tikue> what's the point then :\
[18:44:30] <benh> eh
[18:44:33] <pcwalton> tikue: that, you have to take references and references don't have lifetimes
[18:44:37] <pcwalton> that, and*
[18:44:41] <tikue> pcwalton, ahhh 
[18:44:43] <pcwalton> so you can invalidate your references easily
[18:44:48] <pcwalton> this is as easy as calling a method
[18:44:54] <pcwalton> "this" is an unsafe pointer and has no lifetime
[18:44:56] *** Quits: vmx (vmx@8155E38.294C4FB6.EBB03D7A.IP) (Ping timeout)
[18:45:07] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[18:46:55] *** Joins: vmx (vmx@8155E38.294C4FB6.EBB03D7A.IP)
[18:47:03] *** Quits: pyrac (pyrac@moz-A696FE33.w92-162.abo.wanadoo.fr) (Quit: pyrac)
[18:47:33] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[18:47:53] *** Joins: pyrac (pyrac@moz-A696FE33.w92-162.abo.wanadoo.fr)
[18:48:20] <tikue> bstrie, exceptions are definitely memory safe
[18:48:20] *** Quits: pyrac (pyrac@moz-A696FE33.w92-162.abo.wanadoo.fr) (Quit: pyrac)
[18:48:43] <strcat> tikue: alone
[18:48:56] <tikue> strcat, hm?
[18:49:00] *** Joins: pepper_chico (pepper_chi@5B1C9931.F07E9C90.2E5C92D8.IP)
[18:49:01] <strcat> preserving memory safety in the presence of exceptions isn't easy
[18:49:04] <bstrie> exceptions are probably memory safe in languages other than C++
[18:49:06] <tikue> SML does it
[18:49:10] <benh> my_smart_pointer a = new blah; my_smart_pointer b = a.operator->(); *whistles innocently*
[18:49:14] <bstrie> though maybe not?
[18:49:21] * bstrie googles python exception safety
[18:49:28] <strcat> bstrie: python has exception safety issues
[18:49:33] <strcat> and python doesn't care about safety
[18:49:53] *** Quits: alonlevy (alon@moz-29263FE5.red.bezeqint.net) (Ping timeout)
[18:49:54] <bstrie> strcat: so can you get python to segfault from exceptions?
[18:50:17] <bstrie> I can believe that it lets you get into a weird and inconsistent state
[18:50:25] <bstrie> but that doesn't seem inherently unsafe, just wrong
[18:50:29] <strcat> sure, and that leads to memory unsafety
[18:50:41] <strcat> python doesn't enforce safety boundaries, it's easy to make it corrupt memory 
[18:50:52] <strcat> there are lots of leaky abstractions that are memory unsafe in the stdlib
[18:51:02] <bstrie> define "corrupt"
[18:51:07] <bstrie> is it scribbling on random bits?
[18:51:31] <strcat> writing/reading to/from arbitrary memory
[18:52:04] *** Joins: ato (ato@moz-9CC2E667.no)
[18:52:06] <bstrie> is there code that I can look at that demonstrates writing to arbitrary memory in python via exceptions?
[18:52:23] <strcat> it's the same as C++
[18:52:34] <strcat> write something that's only memory safe when it's in a consistent state
[18:52:38] *** Joins: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net)
[18:52:56] <strcat> write a function possibly throwing an exception part of the way through a transition between states
[18:52:58] <strcat> memory unsafe
[18:53:29] <tikue> rust could do safe exceptions
[18:53:32] <strcat> in rust, only unsafe blocks/functions would have to worry about exception safety
[18:53:35] <benh> I assume writing something that is only memory safe when it's in a consistent state is harder in python than in c++?
[18:53:38] <strcat> but it would be really hard to get right
[18:53:40] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[18:53:57] *** Quits: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net) (Quit: brendan)
[18:54:03] <strcat> benh: well, C++ handles out-of-memory by throwing, and move constructors can throw
[18:54:19] <strcat> so there are a lot of exception safety issues you don't have if you abort on OOM (like rust does atm)
[18:54:32] <strcat> consider reallocating a vector to a larger size
[18:54:43] <strcat> push receives ownership of an element
[18:54:53] <strcat> it then has to expand the existing allocation, which may fail
[18:55:01] <strcat> what exactly is it supposed to do?
[18:55:18] <strcat> C++ std::vector has the performance hit of not being able to use realloc
[18:55:30] <tikue> strcat, what does it do now?
[18:55:33] <bstrie> what's the rationale for throwing an exception when oom?
[18:55:37] <bstrie> is that actually recoverable?
[18:55:47] <strcat> bstrie: yes, it's recoverable if none of your destructors allocate
[18:55:51] <tikue> strcat, if it fails now couldn't it fail even if rust supported exceptions?
[18:56:00] <tikue> task failure + exceptions are orthogonal
[18:56:06] <strcat> tikue: they aren't
[18:56:12] <strcat> atm it only has to make sure all the destructors are called
[18:56:24] <strcat> if you could catch it, the vector would also have to be in a consistent state
[18:56:55] <strcat> (since it aborts on OOM, it's not a real example anyway)
[18:57:17] <strcat> bstrie: anyway here's the practical difference between rust vs. C++ in regards to this
[18:57:26] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[18:57:43] <strcat> C++: out-of-memory -> stack unwinds, all destructors are called, flushing data out to the disk
[18:57:51] <strcat> rust: out-of-memory -> abort, destructors not called
[18:58:03] <strcat> you probably wouldn't actually be able to *handle* that exception
[18:58:10] <strcat> but it's still better than aborting
[18:58:25] <strcat> rust-core won't use unwinding.
[18:58:35] <strcat> so...
[18:58:42] <strcat> I am not sure how to make OOM recoverable
[18:58:57] <tikue> i'm confused. why would it have to be?
[19:00:17] <strcat> the C++ world views it as important to call your destructors when you run out of memory
[19:00:21] *** Joins: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net)
[19:00:35] <bstrie> strcat: I can't tell whether you like or dislike the fact that rust doesn't have exceptions :)
[19:01:13] <bjz_> bstrie: does he have to?
[19:01:28] <bstrie> bjz_: well I presume that he has an opinion on the matter
[19:01:44] <benh> Let's make ~42 return Option<~int> so you have to pattern-match every time you allocate, and handle oom right there~
[19:01:59] <strcat> I don't think handling OOM is useful
[19:02:07] <strcat> it was just an example of an exception
[19:02:17] <tikue> having exceptions =/= using them everywhere
[19:02:23] <bstrie> bjz_: how do *you* feel about not having exceptions
[19:02:32] <strcat> LLVM doesn't use exceptions because they are really bad for performance
[19:02:39] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[19:02:40] <strcat> so they actually use sum types for error reporting
[19:03:09] <strcat> unwinding causes *enormous* code bloat, which libstd suffers from
[19:03:34] *** Quits: jvns_ (bork@87D98E32.4046EB22.428F94DD.IP) (Ping timeout)
[19:03:35] <strcat> because it has to make sure to make landing pads everywhere
[19:03:38] <pcwalton> yeah, I wish we could just crash on unwind :P
[19:03:39] <bstrie> strcat: are you referring to the drop glue?
[19:03:56] <pcwalton> I want a #[disable_unwinding] for sprocketnes
[19:03:57] * bstrie doesn't really know what drop glue or landing pads are supposed to do
[19:04:06] <pcwalton> and for rustc for that matter
[19:04:19] <strcat> pcwalton: well for sprocketnes, LLVM could figure out that nothing unwinds
[19:04:20] <pcwalton> rustc has no need to unwind, if any part of compilation fails there is nothing useful it can do
[19:04:20] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Connection reset by peer)
[19:04:20] <bjz_> bstrie: I don't know enough about it. exceptions seem to cause a large amount of complexity, but I don't have enough real-world experience with them.
[19:04:21] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[19:04:27] <pcwalton> strcat: bounds checks
[19:04:28] <strcat> pcwalton: we need an annotation for extern fns to mark them with attributes
[19:04:33] <bstrie> pcwalton: is unwinding useful for debugging?
[19:04:34] <strcat> pcwalton: you can have bounds checks abort
[19:04:41] <strcat> it uses #[no_std], right?
[19:04:45] <pcwalton> sure, but that's equivalent to no_unwind ;)
[19:04:47] <pcwalton> oh, I see
[19:04:49] <pcwalton> hah, clever
[19:04:57] <tikue> bjz_, they're nice because they _reduce_ the complexity of code you actually write
[19:05:06] <pcwalton> bstrie: unwinding is mainly useful for Servo
[19:05:10] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[19:05:10] <strcat> pcwalton: sadly LLVM currently thinks a call to libc abort can unwind since we have no way to mark it that way ;p
[19:05:20] <strcat> I exposed llvm.trap as an intrinsic though
[19:05:39] <pcwalton> because we would like to e.g. be able to have an image that fails crash that image only
[19:05:50] <pcwalton> that is a very nice property of Servo/Rust design that gives it an edge over Chrome, for example
[19:05:57] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[19:05:57] *** ChanServ sets mode: +ao brson brson
[19:06:09] <pcwalton> but that requires unwinding
[19:06:32] <strcat> pcwalton: I was playing around with language performance issues with https://github.com/thestinger/rust-core/tree/master/core
[19:06:39] <bstrie> pcwalton: could you disable unwinding and just "crash" the task instead? or does abort always kill the entire process tree
[19:06:46] <strcat> it's somewhat funny that abort is a performance issue... but it is
[19:06:47] <eddyb> pcwalton: image as in?
[19:07:29] <strcat> could add #[readonly], #[readnone], #[nounwind] as attributes for extern fns to solve this
[19:07:48] *** Quits: tikue (tikue_star@2772A85E.EB08480C.689607DE.IP) (Client exited)
[19:08:20] <strcat> clang has the gcc __attribute__((pure)) __attribute__((const)) and __attribute__((nothrow))
[19:08:28] <strcat> and stuff in headers get marked that way
[19:08:34] <strcat> we now have 'noreturn' via -> !
[19:08:42] <bstrie> nifty
[19:09:48] <pcwalton> eddyb: the threat model here is that someone posts a comment on yourbank.com that embeds an image from evil.com that exploits a bug in the image decoder and then steals all your credentials on yourbank.com
[19:09:59] <strcat> rusti: extern { fn #[link_name = "abort"] c_abort() -> !; } fn abort() -> ! { unsafe { c_abort() } }
[19:10:01] -rusti- pastebinned 6 lines of output: http://ix.io/8w7
[19:10:01] <pcwalton> memory safety + unwinding solves this problem in servo
[19:10:16] <strcat> rusti: extern { #[link_name = "abort"] fn c_abort() -> !; } fn abort() -> ! { unsafe { c_abort() } }
[19:10:18] <eddyb> pcwalton: ah, image as in graphics. can never be sure in such a complex context :P
[19:10:21] <pcwalton> yeah
[19:10:27] -rusti- failed to pastebin 7 lines of output
[19:10:31] <strcat> wat
[19:10:34] <bstrie> haha
[19:10:39] <bstrie> that was happening yesterday too
[19:10:41] <strcat> rusti: extern { #[link_name = "abort"] fn c_abort() -> !; } fn abort() -> ! { unsafe { c_abort() } }
[19:10:47] <strcat> stupid ix.io
[19:10:52] -rusti- failed to pastebin 7 lines of output
[19:11:02] <strcat> I think rusti goes over some rate limit
[19:11:17] <benh> You gotta run your own pastebin service and somehow leverage rust/rust-http for that... ;)
[19:11:27] <strcat> (anyway my point was that the rust wrapper there gets tagged as noreturn, but not as nounwind)
[19:11:51] *** Joins: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu)
[19:12:02] *** Quits: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net) (Quit: brendan)
[19:12:31] *** Quits: sankha93 (Instantbir@B3F15789.7DCF141.F44414AF.IP) (Quit: Gone to save the world!)
[19:12:41] <Earnestly> strcat: ix.io has been really slow over the past few weeks.  Switched back to his older sprunge.us pastebin
[19:13:59] *** Quits: pepper_chico (pepper_chi@5B1C9931.F07E9C90.2E5C92D8.IP) (Quit: Ex-Chat)
[19:14:37] *** Quits: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP) (Quit: Konversation terminated!)
[19:14:41] *** Joins: _eddyb_ (eddy@3C6E2DBB.FFB4E060.A5830293.IP)
[19:14:53] *** Joins: martndemus (martndemus@moz-876695FC.sshunet.nl)
[19:15:00] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[19:15:21] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:15:35] <sinma> I get «error: type `game::Game` does not implement any method in scope named `start`» when I try to compile a code which refer to a pub method of an impl
[19:15:42] <benh> Do non-C++ languages with exceptions have a cheaper/less bloaty model for unwinding than we do?
[19:15:49] <sinma> Any tough on the reason of the problem?
[19:15:58] <strcat> benh: no
[19:16:07] <strcat> there are basically two ways to do it
[19:16:41] <bstrie> sinma: did you bring the trait into scope?
[19:16:43] <strcat> 1) bubble up exceptions as return values (huge performance cost, due to adding branches everywhere)
[19:16:48] *** Quits: _eddyb_ (eddy@3C6E2DBB.FFB4E060.A5830293.IP) (Ping timeout)
[19:16:59] *** jorendorff is now known as jorendorff_away
[19:17:07] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[19:17:14] <sinma> It’s not a trait, it’s a impl directon a struct
[19:17:18] <sinma> *directly on a struct
[19:17:19] <strcat> 2) table-based unwinding, which is "zero-cost" for the non-throwing case in the sense that no extra instructions are run
[19:17:25] <sinma> And I’ve imported the struct
[19:17:47] <sinma> Cause I can use «let game = Game::new();» but not «game.start()»
[19:17:53] <benh> sinma: does the declaration look like `fn start(&self...) {`?
[19:17:53] <strcat> but table-based unwinding means you have to generate code to handle possibly exceptions, and it does end up having performance implications due to limiting the transformations the compiler can do
[19:17:59] <benh> maybe you're missing the self ;)
[19:18:04] <sinma> benh: holly sh***
[19:18:22] <sinma> Those things are so easy to forget
[19:18:31] <strcat> return-based unwinding is likely strictly worse ...
[19:18:34] <benh> :)
[19:18:49] <strcat> afaik the setjmp/longjmp exception handling ends up just being an even worse form of return-based
[19:18:49] <benh> strcat: iirc someone had a branch for that a while back and it was slower for rustc, anyway
[19:19:14] <sinma> benh: too many time coding in Java and C++, and not many in Python
[19:19:27] *** Joins: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net)
[19:19:42] <strcat> well I guess sjlj style would at least not have to output branches
[19:20:18] <benh> so pretty much the best we can do is try to minimize how many landing pads we generate for our tables?
[19:20:19] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[19:20:58] <strcat> the best we can do is offer an alternative to the standard library without unwinding or segmented stacks ;p
[19:21:24] <benh> ok, then the best servo can do ;)
[19:21:34] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[19:22:06] *** Joins: pyrac (pyrac@moz-A696FE33.w92-162.abo.wanadoo.fr)
[19:22:14] <strcat> do blink/chromium use exceptions?
[19:22:37] *** Quits: canhtak (jeremy@moz-EF57C296.wl.t.ulaval.ca) (Quit: canhtak)
[19:22:38] <strcat> I have a feeling they don't
[19:22:44] <strcat> since google generally doesn't
[19:22:59] <bstrie> how do you opt-out of exceptions in C++, if oom throws them?
[19:23:02] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[19:23:02] <bstrie> just a compiler flag?
[19:23:40] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[19:23:45] <strcat> if you truly want to use C++ without exceptions you don't use the C++ stdlib
[19:23:52] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[19:23:53] <earlz2> most compilers have a -fno-exceptions flag or some such, but behavior when an exception would otherwise be thrown is completely undefined
[19:24:03] <strcat> you also have to use nothrow new, etc.
[19:24:12] <strcat> and pass a custom allocator to every stdlib container
[19:24:23] <sinma> «undefined»… too many times I heard it about C and C++.
[19:24:29] <strcat> probably easier to get right if you just don't use the stdlib ;p
[19:24:43] <earlz2> If you want C++ without exceptions, then use C :) 
[19:25:01] <benh> my templates :(
[19:25:17] <strcat> and then you also lose out on destructors, templates, first-class functions + closures, etc.
[19:25:19] <strcat> ;p
[19:25:30] <strcat> LLVM uses C++ without exceptions or RTTI
[19:25:32] <Amaranth> I'm not sure how many C++ features KHTML or WebKit used
[19:25:33] <earlz2> you don't need those.. C is turing complete afterall :) 
[19:25:47] <benh> so is brainfuck, i hear
[19:25:47] <doomlord_> there's many reasons to use C++ without exceptions
[19:26:34] <Amaranth> Size constraints are the main reason I can think of
[19:26:36] <earlz2> The only reason I've heard of using C++ with exceptions /disabled/ (as opposed to just not using them in your code) is in embedded environments where it's too heavy
[19:27:03] <benh> does firefox/gecko disable exceptions?
[19:27:14] <benh> I'm not much of a mozillian I'm afraid
[19:27:18] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Quit: Leaving)
[19:27:21] <doomlord_> games is a big niche for C++ .. and its usually without exceptions
[19:27:57] <strcat> earlz2: unwinding limits the transformations the compiler can do quite a bit
[19:28:13] *** Quits: autra (augustin@moz-BE76895F.fbx.proxad.net) (Ping timeout)
[19:28:19] <earlz2> really? I would imagine if you construct your code such that an exception should never be thrown, performance hits are minimal
[19:28:20] <Amaranth> I've never heard any valid reason for not using exceptions in games except for code style opinions
[19:28:29] <Amaranth> At least since everyone moved to table-based unwinding
[19:28:46] <strcat> table-based unwinding doesn't cause any instructions to be executed on the non-throw code path
[19:28:57] <strcat> but it *does* hurt performance by limiting the transformations an optimizing compiler can do
[19:29:02] <strcat> they aren't zero-cost
[19:29:17] <earlz2> ah. Is it really that significant though? 
[19:29:35] <Amaranth> I can't think of why that would limit transformations
[19:29:37] <strcat> it's significant enough that LLVM is strictly free of exceptions because it's performance critical
[19:29:37] <doomlord_> very significant yes
[19:29:42] <earlz2> I know assembly and such, but have never had to worry about extracting every bit of performance from a piece of code heh
[19:29:54] <doomlord_> performance is really energy efficiency
[19:29:56] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[19:30:01] <doomlord_> what size computer does your program need to run
[19:30:02] <strcat> Amaranth: because it executes code on unwinding, and the compiler would have to preserve the same semantics on unwinding
[19:30:10] <strcat> so it has to keep the stack frames the same
[19:30:22] <doomlord_> "extracting every bit of performance" could mean running it on a phone instead of a desktop
[19:30:24] <pcwalton> mmm, I'm not convinced it hurts performance
[19:30:45] <pcwalton> I think the reason for -fno-exceptions is just code bloat and exception safety being a giant pain in C++
[19:30:46] <doomlord_> anything can run fast if you can waste energy
[19:31:19] <Amanieu> libstdc++ calls abort() instead of throwing an exception when using -fno-exceptions
[19:31:27] <earlz2> heh am I the only one that doesn't hate exceptions in here? :) 
[19:31:29] <pcwalton> I can see how it could reduce performance but... I'm not convinced it matters
[19:31:32] <pcwalton> I don't hate exceptions
[19:31:37] <pcwalton> I just don't see them as suitable for Rust
[19:31:42] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[19:31:47] <doomlord_> i've never used exceptions, i've never wanted them
[19:31:49] <earlz2> no, I wouldn't say they are either..
[19:31:55] <Amaranth> I still can't think of a valid optimization exceptions would block
[19:31:57] <pcwalton> I actually think it's very hard to come up with a replacement for exceptions that isn't worse :)
[19:32:09] <Yoric> pcwalton: Exceptions in any language other than C++ :)
[19:32:37] <strcat> exceptions in any language have the same exception safety issues as C++ afaik
[19:32:46] <strcat> exception safety isn't unique to C++
[19:32:54] <strcat> apparently knowing and caring about it is unique to C++ though
[19:33:02] *** Quits: pyrac (pyrac@moz-A696FE33.w92-162.abo.wanadoo.fr) (Quit: pyrac)
[19:33:13] <pcwalton> they do, but the use of RAII for memory management makes it exceptionally (ha ha) important in C++
[19:33:23] <doomlord_> i'd always worried about unwinding  compared to the freedom you have for pointers in c++
[19:33:23] <Amaranth> Well in other languages that have exceptions you don't have to worry about memory
[19:33:31] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Connection reset by peer)
[19:33:35] <Yoric> The fact that you can throw anything in C++ makes stuff more complicated.
[19:33:47] <strcat> Amaranth: you don't have to worry about memory leaks, but you still have to worry about resource leaks and higher-level correctness issues
[19:33:52] *** Joins: canhtak (jeremy@moz-EF57C296.wl.t.ulaval.ca)
[19:34:01] <earlz2> I think C++ not introducing a base Object type was a big mistake heh
[19:34:03] <pcwalton> right, that's the reason why exceptions are task-level in Rust
[19:34:04] <Eridius> woohooo my std::path rewrite has landed
[19:34:07] <pcwalton> \o/
[19:34:12] <Eridius> so all ya'll who have been using Path, be prepared to update your code ;)
[19:34:14] <doomlord_> earlz2 - object type, YIKES
[19:34:24] <strcat> it's easy to write C++ code without memory leak related exception safety issues
[19:34:44] <strcat> memory leaks are no harder to deal with in C++ than rust, they're equal there
[19:34:45] <bstrie> Eridius: actually I just rewrote all the APIs to just use strings, so much simpler :P
[19:34:47] <strcat> memory safety is another story
[19:34:56] *** Quits: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com) (Ping timeout)
[19:35:04] <bstrie> stringly-typed programming triumphs again!
[19:35:06] <rossm> there are other concerns too that languages don't always handle gracefully. for example in C# (unchecked exceptions) I often don't care to know exactly what kind of exceptions a library can throw. I want to catch almost any of them and log some error and continue. but there are some I definitely don't want to catch
[19:35:12] <rossm> like out of memory exceptions, etc
[19:35:13] <benh> My C++ code segfaulted because boost was internally throwing an exception that made it internally violate memory safety, boo!
[19:35:33] <sinma> benh: awesome!
[19:35:34] <rossm> and I have no way of saying "catch error-type exceptions and not system-disaster-type exceptions"
[19:35:41] <rossm> because they're used for both situations. conflating them
[19:35:52] <Yoric> bstrie: I don't know what stringly-typed programming is, but I certainly like the name :)
[19:35:56] <strcat> rossm: you can catch specific kinds of exceptions
[19:36:05] *** Quits: Jackneill (Jackneill@moz-F4877152.pool.digikabel.hu) (Input/output error)
[19:36:09] <rossm> right, but I'd have to list out 100 different kinds that I want to catch
[19:36:11] *** Quits: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: ZZZzzz…)
[19:36:13] <strcat> rossm: no
[19:36:17] <rossm> I can't say "catch everything except these 10 terrible ones"
[19:36:21] <benh> You can just list the ones you don't wanna catch
[19:36:23] <benh> and rethrow them
[19:36:25] <strcat> you can use an exception inheritance hierarchy
[19:36:27] <strcat> like the C++ stdlib
[19:36:30] <Amaranth> rossm: This is more of an argument about exceptions being used for unexceptional circumstances
[19:36:36] <benh> and then have a fall-back catch-all that doesn't rethrow but log (afaik)
[19:36:37] <rossm> amaranth yeah
[19:36:52] <Yoric> OCaml does nice stuff in that category with polymorphic variants.
[19:37:02] <benh> Amaranth: It's really hard to get two pieces of code to agree about what's exceptional though :(
[19:37:13] <strcat> rossm: if you catch std::exception, you catch anything inheriting from it
[19:37:15] <Yoric> You can pattern-match (including while exception catching) with shortcuts "any stuff that defines type #foo"
[19:37:24] <strcat> rossm: but you could make other hierarchies afaik
[19:37:42] <Amanieu> my main use of exceptions in C++ is to catch I/O errors using std::system_error
[19:38:00] <Amaranth> Yep and being overly strict about what exceptional means basically gets you abort() but with a type and/or message
[19:38:03] <rossm> strcat most of those just inherit from the same types in .net. OutOfMemoryException derives from SystemException, along with like 1000 other common ones
[19:38:13] <Amanieu> that way I can wrap a bunch of I/O operations in a try/catch and then figure out at the end whether it failed
[19:38:18] *** Joins: jordyd (jordyd@moz-A4658EC8.seg41.ucf.edu)
[19:38:32] <rossm> these aren't user-defined exceptions. they're built-in stuff like ArgumentNullException, InvalidOperationException, etc. which are just "oops I messed up" rather than ".net has exploded"
[19:38:35] <strcat> as long as you don't use iostream/fstream
[19:38:41] <strcat> because those just have a generic error ;p
[19:40:21] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[19:40:21] *** ChanServ sets mode: +o tjc
[19:40:44] <rossm> benh you can sort of do that. you have to catch everything (type Exception), and then attempt to cast to stuff I don't want to catch, one at a time. if the cast succeeds, rethrow. it's messy but I guess it's doable
[19:41:08] <rossm> sorry to derail
[19:41:36] <benh> rossm: I thought you'd just do try { ... } catch (OutOfMemoryException) { throw; ) catch (SomeHarmlessException e) { log(e): }?
[19:41:56] <benh> with a catch-all at the end? or does the rethrowing end up in the catch-all?
[19:41:56] <rossm> ah true
[19:42:02] <rossm> no. it doesn't
[19:42:02] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Connection reset by peer)
[19:42:12] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[19:42:12] *** ChanServ sets mode: +o tjc
[19:42:18] <rossm> it will only ever hit one catch in a set of them
[19:42:23] <rossm> they're like else catch
[19:42:28] *** Quits: echristo (echristo@4EEA9249.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[19:43:05] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[19:43:05] *** ChanServ sets mode: +ao dherman dherman
[19:43:54] *** Joins: jeffdb (jeffbelg@moz-ABCAA64B.efi.com)
[19:43:58] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[19:44:20] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[19:44:21] *** ChanServ sets mode: +o tjc
[19:45:14] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[19:45:23] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[19:45:30] *** AutomatedTester|away is now known as AutomatedTester
[19:46:15] <earlz2> So @horse_xaml on twitter gave a unique idea. Who wants a XAML implementation in Rust? lmao
[19:46:32] *** ozten|afk is now known as ozten
[19:47:42] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[19:48:22] *** Joins: echristo (echristo@4EEA9249.D6CCE4AE.77834EAA.IP)
[19:49:52] *** Quits: sinma (seb@moz-6A11C47C.fbx.proxad.net) (Quit: Konversation terminated!)
[19:50:15] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[19:50:15] *** ChanServ sets mode: +o tjc
[19:51:14] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[19:51:59] <petantik> Hi, I'm trying to read data from a file. I'm trying to compile this code, https://gist.github.com/petantik/ed9767c0cafe8e5ac8f6 , I get an error error: type `std::rt::io::file::FileStream` does not implement any method in scope named `read`
[19:52:43] <tjc> Hey reedlepee -- benh said you were asking a while ago about GNOME OPW? 
[19:53:43] *** Quits: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net) (Quit: brendan)
[19:54:29] *** Joins: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net)
[19:55:46] <myname> is there some place to paste code to people who want to yell at everything stupid?
[19:56:22] <tjc> myname: gist.github.com and then link it here :-)
[19:57:01] <myname> :D
[19:58:41] <sfackler> petantik: you need ot "use std::rt::io::Reader;"
[19:58:49] *** Joins: alonlevy (alon@moz-B0E66DB7.static.bezeqint.net)
[19:58:55] <myname> so i made this tic tac toe and it works for me™, but a) in some strange way the ai fails to play good against itself and b) i do think i can make it faster if i could make tha stuff at ai.rs:37 in tasks and c) it's propably horrible :D
[19:59:00] <myname> https://github.com/mynery/xxo
[19:59:39] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:00:13] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[20:00:31] <petantik> sfackler: Ah, so the read requires that Reader is also imported since it implements the trait?
[20:00:54] *** Joins: rveach (kvirc@410D297A.C7FE7DD2.1302FB2C.IP)
[20:01:19] <sfackler> yep
[20:01:29] <sfackler> it's a way of making it a bit more explicit where methods come from
[20:01:35] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[20:01:35] *** ChanServ sets mode: +ao brson brson
[20:02:50] *** Joins: Jesin (Jessin_@moz-76F15F40.cc.lehigh.edu)
[20:02:57] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[20:03:51] *** Quits: andre (andre@CA528A4A.45A4338E.8EE27E6.IP) (Quit: leaving)
[20:03:52] *** Joins: mihneadb (mihneadb@moz-C5B7A4E3.residential.rdsnet.ro)
[20:04:24] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[20:04:24] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Client exited)
[20:05:58] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[20:05:59] *** Joins: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com)
[20:06:41] *** Joins: jvns_ (bork@87D98E32.4046EB22.428F94DD.IP)
[20:07:42] <pnkfelix> myname: for a more long term review process, there is also http://codereview.stackexchange.com/ and http://refactormycode.com/
[20:07:59] <pnkfelix> (though the latter appears to be down at the moment)
[20:08:04] *** Quits: eholk (eholk@moz-BA312F07.crest.iu.edu) (Quit: eholk)
[20:08:28] <myname> i thought of throwing at to reddit
[20:08:40] <myname> not sure how active they are and how welcome that is, though
[20:08:54] <tjc> myname: /r/rust is pretty active
[20:09:14] <tjc> I'm not the mod of it, but I think code critiques would be totally welcome there
[20:09:21] <earlz2> Has anyone posted anything in Rust on codereview.stackexchange? I'm big on stackexchange, but not sure how popular Rust is there
[20:09:36] *** Quits: mikezaby (mikezaby@moz-908EA8DE.home.otenet.gr) (Input/output error)
[20:09:41] <myname> earlz2: they better get prepared!
[20:09:50] <tjc> earlz2: Personally, I never go to stackexchange. I think rust-dev or /r/rust are the best fora for that right now
[20:09:56] <pnkfelix> earlz: it doesn't seem to have a `rust` tag for the codereview subsite yet
[20:09:59] <tjc> soon, I hope, it'll be everywhere :-)
[20:10:04] <pnkfelix> earlz2: ^
[20:10:19] <earlz2> Yea, I noticed that there is a [rust] tag on stackoverflow and like 2 or 3 pages of answered questions
[20:10:27] <myname> i am annoying a lot of people with my rust obsession at university *g*
[20:10:29] <earlz2> that's the idea! :) 
[20:10:43] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[20:11:02] <reedlepee> tjc: I would like to contribute to rust OPW...
[20:11:21] <reedlepee> could you please help me how to get started with
[20:11:25] <tjc> reedlepee: Great! We're still working on the project descriptions, but I can try to answer your questions if you have any...
[20:11:28] <earlz2> I'm at a .Net shop(partners with Microsoft even) and I have been annoying my coworkers with Rust as well, I infected one other coworker thus far :) 
[20:11:35] *** Quits: Ms2ger (Ms2ger@B7B2FF50.C60A97A6.F9FB0584.IP) (Ping timeout)
[20:11:54] *** Joins: CarpNet (Alasdair@moz-EF831A5E.cable.virginmedia.com)
[20:12:11] <tjc> reedlepee: Are you more interested in Rust or Servo (or both)? Either one would involve programming in Rust
[20:12:35] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:13:54] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[20:13:54] *** ChanServ sets mode: +ao brson brson
[20:13:58] <reedlepee> tjc:I am interested in both anyone would do.. I haven't programming in rust yet but i have experience in C programming
[20:14:19] *** Joins: q66 (q66@moz-463E955C.range86-148.btcentralplus.com)
[20:14:43] <bstrie> having just used "continue" for the first time in my life, I'm not convinced that changing the keyword was a good move :P
[20:14:52] <tjc> reedlepee: great! The next step for you would be to make the first "small contribution" as explained at https://wiki.gnome.org/OutreachProgramForWomen ...
[20:15:18] <tjc> reedlepee: We haven't yet talked amongst ourselves about what the contribution would look like. But, I have a few possible ideas...
[20:15:43] *** Joins: eatkinson (eatkinson@moz-D86C5DB2.airbears2.berkeley.edu)
[20:15:50] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:16:22] <reedlepee> yeah for the same could you help me to get started ..
[20:16:35] <tjc> reedlepee: Yeah, let me confer with my colleagues for a minute or two
[20:16:43] *** jorendorff_away is now known as jorendorff
[20:16:51] <reedlepee> yeah sure :)
[20:17:19] *** Quits: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: ZZZzzz…)
[20:17:37] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[20:17:43] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[20:18:56] *** Joins: simon (simon@moz-FD4ADBC6.cable.teksavvy.com)
[20:19:49] *** Joins: autra (augustin@moz-BE76895F.fbx.proxad.net)
[20:21:52] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[20:22:41] <rveach> hey, I'm compiling rust on windows, after "make" it is just sitting after extracting the snapshot, is it normal for it to not say anything for a while?
[20:22:56] *** Quits: msingle (Thunderbir@moz-1A29E89B.nrflva.fios.verizon.net) (Ping timeout)
[20:23:09] <strcat> rveach: it takes ~4 minutes to compile each stage, and there are 3 stages
[20:23:12] <strcat> and each only has a few libs
[20:23:18] <strcat> so there are long pauses with no output
[20:23:24] <bstrie> rveach: is windows much slower?
[20:23:27] <bstrie> er
[20:23:30] <bstrie> strcat ^
[20:23:33] <strcat> dunno
[20:23:47] <rveach> hmm, that's what i was afraid of
[20:23:58] <strcat> windows has slow kernel memory management and scheduling, but it shouldn't really effect it much afaik
[20:24:08] <strcat> it only really matters when you're scaling to many threads/processes
[20:25:14] <bstrie> also it depends on your machine
[20:25:22] <strcat> rveach: how much memory do you have?
[20:25:25] <bstrie> if you're compiling on a windows netbook, go make a sandwich :)
[20:25:28] <rveach> 16gb
[20:25:33] <strcat> ok not a problem then ;p
[20:25:39] <tjc> reedlepee: I'm making a list of suggested "easy" starter bugs and I'll add it to the wiki page. will let you know when that's done
[20:25:41] <rveach> lol ya, im on my desktop
[20:26:08] <tjc> reedlepee: you can start looking at https://github.com/mozilla/rust/issues?direction=asc&labels=E-easy , but in my opinion, most of those are only easy for someone who's already been hacking the compiler for a while :-)
[20:27:08] <reedlepee> so a contribution means solving a bug ??
[20:27:14] *** Quits: eatkinson (eatkinson@moz-D86C5DB2.airbears2.berkeley.edu) (Quit: eatkinson)
[20:27:46] <tjc> reedlepee: in the past, that's usually what it's meant. I'm trying to make a list of bugs that shouldn't take too long to fix, since obviously the point isn't to make you spend a month working on something just in order to apply
[20:27:57] *** Quits: fabiand_ (fabiand@moz-8CBADDBC.adsl.alicedsl.de) (Ping timeout)
[20:28:01] <tjc> This is the first year Rust has been part of OPW, so we're making stuff up as we go along :-0
[20:28:42] <jensnockert> What's OPW? Outreach Program for Women?
[20:29:08] *** Quits: simon (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[20:29:37] <tjc> jensnockert: Yes - http://gnome.org/opw/
[20:29:43] <jensnockert> Cool!
[20:30:11] <reedlepee> and now there is not even a month left before the application deadline ...  I am completely new to open source .. your help would be appreciated :)
[20:31:04] <tjc> reedlepee: Yup, I hear that -- we (Mozilla) got on board sort of at the last minute this time
[20:31:08] *** Quits: autra (augustin@moz-BE76895F.fbx.proxad.net) (Ping timeout)
[20:31:21] *** Quits: Blub\w (wry@moz-3ABE0667.wireless.dyn.drei.com) (Ping timeout)
[20:31:32] *** Quits: alonlevy (alon@moz-B0E66DB7.static.bezeqint.net) (Ping timeout)
[20:32:07] <reedlepee> so what should be a small contribution for applying ??
[20:32:31] <tjc> reedlepee: I'm making a list of suggested bugs right now, I'll paste the link to you when I add it to the wiki
[20:32:56] <reedlepee> ohk :)
[20:34:44] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Connection reset by peer)
[20:34:44] *** Joins: spott_ (spott@moz-5158CBDE.colorado.edu)
[20:35:51] *** Quits: mihneadb (mihneadb@moz-C5B7A4E3.residential.rdsnet.ro) (Input/output error)
[20:36:54] *** Joins: eatkinson (eatkinson@moz-D86C5DB2.airbears2.berkeley.edu)
[20:37:05] *** Joins: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net)
[20:38:45] *** Joins: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com)
[20:42:17] <bstrie> tjc++
[20:42:20] <bstrie> reedlepee++++
[20:44:17] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:44:27] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[20:46:25] *** Joins: fabiand_ (fabiand@moz-8CBADDBC.adsl.alicedsl.de)
[20:47:39] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[20:47:39] *** ChanServ sets mode: +ao brson brson
[20:47:49] <bjz_> reedlepee: yayy you found your tjc
[20:48:09] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[20:48:27] <bjz_> x]
[20:49:38] *** Joins: kr0e (Mibbit@moz-4383DA38.dip0.t-ipconnect.de)
[20:49:51] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[20:49:59] *** Quits: acrichto (acrichto@moz-69F2E428.ugrad.cs.cmu.edu) (Quit: leaving)
[20:50:06] *** Joins: acrichto (acrichto@moz-69F2E428.ugrad.cs.cmu.edu)
[20:50:06] *** ChanServ sets mode: +o acrichto
[20:50:29] <reedlepee> bjz_: yeah i found him :)
[20:50:41] *** Quits: kr0e (Mibbit@moz-4383DA38.dip0.t-ipconnect.de) (Quit: http://www.mibbit.com ajax IRC Client)
[20:51:34] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[20:51:38] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:51:44] <bjz_> reedlepee: did you find any of those links useful?
[20:52:22] <tjc> bjz_: I was explaining the first-contribution part to reedlepee -- right now I'm working on making a list of bugs that are actually "easy" so that people have things to choose from for the first contribution
[20:52:28] <tjc> because many of our labeled-"easy" bugs are not easy :-)
[20:53:01] <bjz_> yeah, hehe
[20:53:14] <bjz_> that's what I thought, looking at them
[20:53:27] <bjz_> easy if you know what you're doing
[20:53:48] <bjz_> which is a good reason enough for having the category
[20:53:52] <reedlepee> bjz_: yeah somewhat  but still i am not able to start with 
[20:54:07] <bjz_> but a beginner category might be nice
[20:54:35] <bjz_> reedlepee: the github getting started pages are probably the best thing if you haven't used it before
[20:55:03] <tjc> reedlepee: all right, check out https://wiki.mozilla.org/GNOME_Outreach_December2013#Contributions_for_Rust
[20:55:17] * bjz_ still uses a gui for git -_-#
[20:55:21] <tjc> and if there's anything on there that I coudl make clearer, let me know! you're serving as the alpha tester here :-)
[20:56:14] <bjz_> tjc: the number<->string conversions would be a good, self contained project
[20:56:24] <tjc> bjz_: good point, is there an issue open for that?
[20:56:29] <bjz_> tjc: not sure
[20:56:42] <tjc> bjz_: if there's not, and you make one, I'll add it to the list
[20:57:55] <bjz_> tjc: https://github.com/mozilla/rust/issues/6220
[20:58:20] <tjc> bjz_: great, thanks!
[20:58:39] <bjz_> reedlepee: might that be of interest?
[20:59:17] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[21:00:15] *** Joins: rveach|2 (kvirc@410D297A.C7FE7DD2.1302FB2C.IP)
[21:00:21] *** Quits: eatkinson (eatkinson@moz-D86C5DB2.airbears2.berkeley.edu) (Quit: eatkinson)
[21:00:27] <bjz_> tjc: basically it's all been swept up under the carpet in num::strconv - it works fine, so nobody has got around to tackling it
[21:00:30] *** Quits: rveach (kvirc@410D297A.C7FE7DD2.1302FB2C.IP) (Ping timeout)
[21:00:59] <bjz_> tjc: but it basically needs a re-write to fit with the current numerics, which didn't exist at the time
[21:01:27] <earlz2> Does rust have the concept of a global variable? 
[21:01:34] <strcat> earlz2: yes, 'static'
[21:01:40] <bjz_> earlz2: static, or static mut
[21:01:55] <strcat> a mutable static requires unsafe code to read/write to it though, since they aren't thread-safe alone
[21:01:59] <bjz_> earlz2: there is also task local storage, or TLS
[21:02:37] <reedlepee> bjz_:is that a easy bug?
[21:02:37] <earlz2> sweet thanks
[21:02:47] <bjz_> reedlepee: well, it's a project
[21:03:09] <reedlepee> oops 
[21:03:15] <tjc> reedlepee: I think it's an easy bug to approach, but as far as "first contribution" goes, you will want to either break it down into steps, or pick something smaller...
[21:03:22] <bjz_> reedlepee: might want to start off on some smaller things
[21:03:25] <tjc> the API *could* be a project for the entire 3 months. Well, maybe.
[21:03:31] <tjc> it could be part of one, anyway
[21:03:52] <tjc> reedlepee: We also have a list of suggested projects-for-the-whole-3-months already, I'm just waiting for more of the team members to okay that before I post it on the wiki
[21:05:08] * bjz_ apologises to tjc for jumping the gun
[21:05:16] <tjc> bjz_: No worries!
[21:05:22] <bjz_> x)
[21:05:49] <reedlepee> hmm but for the application to be accepted i need to make a small contribution right?
[21:06:07] <tjc> reedlepee: Yes -- for the most part, the things I just put on the "first contributions" list are small
[21:06:12] <tjc> or at least I think they should be small :-)
[21:06:16] *** bhearsum is now known as bhearsum|afk
[21:06:23] *** Quits: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org) (Ping timeout)
[21:06:37] *** Joins: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org)
[21:06:52] <jeffdb> tjc: as someone who has been following your conversation with reedlepee but isn't OWP, can I steal one of those bugs as a first go at contributing, or would that be rude?
[21:06:54] *** Quits: spott_ (spott@moz-5158CBDE.colorado.edu) (Connection reset by peer)
[21:07:03] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[21:07:10] <tjc> jeffdb: Nope, it's not rude.
[21:07:25] <bjz_> jeffdb: hah, I'm sure everyone would be most gracious
[21:07:32] <jeffdb> :)
[21:07:33] *** Quits: rveach|2 (kvirc@410D297A.C7FE7DD2.1302FB2C.IP) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[21:07:34] <tjc> they're not "reserved" or anything, I just wanted to make it clear for people applying for OPW which bugs we *really* think are "easy" :-)
[21:07:37] <bjz_> jeffdb: its all stuff that needs work
[21:07:43] *** Joins: eatkinson (eatkinson@moz-D86C5DB2.airbears2.berkeley.edu)
[21:08:16] <jeffdb> yeah. It's a handy list for sure!
[21:08:24] *** jld is now known as jld|haircut
[21:08:46] <petantik> How can I use the functions in ReaderUtil as opposed to Reader on a FileStream type?
[21:09:05] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Connection reset by peer)
[21:09:11] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[21:10:13] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[21:10:22] *** Quits: Kruppe (user@moz-253119B0.esg.uwaterloo.ca) (Client exited)
[21:10:34] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[21:10:37] <Luqman> tjc: i would say https://github.com/mozilla/rust/issues/9882 is something pretty easy
[21:10:41] <pnkfelix> Luqman: ping
[21:10:50] <Luqman> pnkfelix: pong
[21:11:41] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[21:11:46] <benh> could also see some easy bugs of the sort of "add docs/examples to std::blah"/"update tutorial/manual"
[21:11:46] <tjc> Luqman: thanks, I'll add it
[21:11:52] <pnkfelix> Luqman: I'm trying to use asm! to put in a debug breakpoint
[21:12:01] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:12:04] <pnkfelix> Luqman: but I'm getting an error from rustc: https://gist.github.com/pnkfelix/7014964 
[21:12:17] <pnkfelix> Luqman: what is the current syntax for asm! ?
[21:12:22] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Ping timeout)
[21:12:31] <Luqman> pnkfelix: asm!("int3")
[21:12:39] <acrichto> rusti: unsafe { asm!("int3") }
[21:12:40] -rusti- application terminated abnormally with signal 5 (Trace/breakpoint trap)
[21:12:45] *** Quits: eatkinson (eatkinson@moz-D86C5DB2.airbears2.berkeley.edu) (Quit: eatkinson)
[21:12:53] <pnkfelix> Luqman: so… why am I getting this error ...
[21:13:06] <pnkfelix> Luqman: oh wait
[21:13:07] <Luqman> pnkfelix: you have {/} instead of (/)
[21:13:17] <pnkfelix> Luqman: okay thanks, that was what was wrong
[21:13:50] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[21:14:13] <pnkfelix> Luqman: (any chance that error message could be improved?  Or is that originating from somewhere else in the macro parser/expander…)
[21:14:24] <strcat> pnkfelix: btw we could have support for debug breakpoints with an intrinsic
[21:14:26] <strcat> LLVM supports it
[21:14:37] <pnkfelix> strcat: yeah probably a decent idea
[21:14:47] <strcat> I already added non-debug traps
[21:15:07] <acrichto> oh man really? I've always wanted that
[21:15:37] <Luqman> pnkfelix: i guess it's a result of how syntax extensions are implemented
[21:15:41] <pnkfelix> strcat: is the benefit of using an intrinsic here rather than assembly is that it would give LLVM more optimization freedom?  I was assuming LLVM can already just plug in the asm it parsed...
[21:15:44] <strcat> rusti: unsafe { std::unstable::intrinsics::abort() }
[21:15:46] -rusti- pastebinned 7 lines of output: http://ix.io/8wk
[21:15:57] <strcat> rusti: fn foo() { unsafe { std::unstable::intrinsics::abort() } } foo()
[21:15:59] -rusti- pastebinned 7 lines of output: http://ix.io/8wl
[21:16:06] * strcat sighs
[21:16:08] <strcat> need to update it
[21:16:10] <kimundi> Hi, once again I had some weird idea that I needed to write down as a Proposal ;) Macro invocation sugar: https://github.com/mozilla/rust/issues/9894
[21:16:25] <strcat> pnkfelix: asm isn't portable :)
[21:16:28] <acrichto> strcat: how do we get debug breakpoints from llvm? I thought I looked into that awhile ago and couldn't find anything
[21:16:34] <strcat> llvm.debugtrap
[21:16:39] <strcat> llvm.trap is what I made an intrinsic for
[21:16:47] <strcat> rusti: fn foo() { unsafe { std::unstable::intrinsics::abort() } } foo()
[21:16:48] -rusti- application terminated abnormally with signal 4 (Illegal instruction)
[21:16:58] <strcat> woo? ;p
[21:17:28] <mcpherrin> kimundi: interesting, but weird
[21:17:29] <acrichto> strcat: I think I remember that not being an no-op under a debugger, but I forget
[21:18:06] <strcat> acrichto: http://llvm.org/docs/LangRef.html#llvm-debugtrap-intrinsic
[21:18:46] *** Joins: GGpin (hell@moz-BCA68D55.cst.lightpath.net)
[21:19:22] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:19:23] *** Quits: Qibbit (Qibbit@B7BFB858.FAB07856.1A968954.IP) (Quit: Lost terminal)
[21:19:34] *** Joins: abnrngr (Mibbit@155C9E44.B6057BC0.E4BABBAA.IP)
[21:21:26] <strcat> I added trap for rust-core to use on bounds checks ;p
[21:21:33] <strcat> because I want that working without --cfg libc
[21:22:07] <acrichto> strcat: it still generates a "trace trap" when not under a debugger
[21:22:15] <acrichto> the llvm.debugtrap intrinsic
[21:22:21] <strcat> acrichto: yeah that's intended
[21:22:32] <strcat> you would have to put it behind a #[cfg] thing to make it not do that
[21:22:57] <Luqman> n
[21:23:11] *** Parts: GGpin (hell@moz-BCA68D55.cst.lightpath.net) (AndroIRC - Android IRC Client ( http://www.androirc.com ))
[21:23:30] <strcat> acrichto: afaik at least...
[21:23:31] *** Joins: GGpin (hell@moz-BCA68D55.cst.lightpath.net)
[21:24:41] *** Quits: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP) (Quit: lmandel)
[21:25:55] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[21:26:52] <pnkfelix> hmm, asm! does not require an unsafe block?
[21:26:57] <pcwalton> it should!
[21:27:04] <pcwalton> it was definitely intended to
[21:27:07] <pnkfelix> agreed.  :)
[21:27:16] <pcwalton> there is code that tries to enforce it
[21:27:22] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Input/output error)
[21:27:27] <pcwalton> maybe it regressed
[21:27:27] <pnkfelix> oh wait
[21:27:44] <pnkfelix> no I'm totally wrong, I cut-and-pasted an unsafe { asm!(..) } into an unsafe fn
[21:28:11] <pnkfelix> And I misinterpreted the resulting redundant-unsafe warning
[21:30:28] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[21:31:45] *** Quits: squiddy (squiddy@moz-72DD312B.adsl.alicedsl.de) (Ping timeout)
[21:37:54] *** Joins: eatkinson (eatkinson@moz-392601D4.lightspeed.sntcca.sbcglobal.net)
[21:38:15] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[21:41:28] *** Joins: jbaldwin (Mibbit@EF784383.FC9BECD6.A8DE49A2.IP)
[21:43:31] <reedlepee> bjz_:i think first i should download the code from https://github.com/mozilla/rust/wiki/Note-getting-started-developing-Rust right ??
[21:44:09] <reedlepee> Do I need to have a github account before following the instructions on the above link?
[21:44:17] <tjc> reedlepee: yes, that's the first step. building takes a long the first time, so it's good to start it right away
[21:44:30] <tjc> reedlepee: you don't need to have an account to just download the code, but you will need one later, so you might as well make one
[21:45:34] <reedlepee> ohk first i will the instructions from the link then i will make a github account  :)
[21:46:59] <jbaldwin> hey, I'm stuck on trying to return a borrowed ptrfrom within a struct that has an owned ptr, either tells me I have mismatched types or when I explicitly cast using 'as' that my trait does not implement "Send"
[21:48:10] <jbaldwin> error: mismatched types: expected `&Library::Letter<no-bounds>` but found `&~Library::Letter:Send` (expected trait Library::Letter but found &-ptr)
[21:48:21] *** Quits: abnrngr (Mibbit@155C9E44.B6057BC0.E4BABBAA.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:48:41] <tjc> jbaldwin: can you paste the function definition somewhere? (specifically, trying to figure out what return type you declared the function (or method) as having)
[21:48:50] <jbaldwin> sure
[21:49:17] <tjc> Hey, Unix/Linux people, bear with me for a possibly silly question
[21:49:32] <tjc> Can having too many files in /tmp cause problems even on a machine where /tmp isn't on a separate partition?
[21:49:56] <jbaldwin> https://gist.github.com/jbaldwin/7015522
[21:50:06] <strcat> tjc: shouldn't matter
[21:50:18] <strcat> tjc: /tmp is really annoying because it's a shared resource though, so security is hard
[21:50:19] <sp3d> "too many" would need to be many thousands before you have fs troubles, but if you fill up the parition some software might get upset
[21:50:20] <jbaldwin> fn at line 27
[21:50:22] <mcpherrin> tjc: You could run out of inodes...
[21:50:36] <tjc> sp3d: Too many as in 150000 subdirectories
[21:50:39] <mcpherrin> tjc: It could get so full that performance suffers....
[21:51:02] <mcpherrin> tjc: 150000 is getting to the point where some filesystems might falter
[21:51:04] <sp3d> that's more than I would be super comfortable with
[21:51:08] <jbaldwin> I'm guessing I need to add lifetimes as well since rustc knows &Letter is the same as ~Library
[21:51:12] <strcat> tjc: that's fine on tmpfs or ext4
[21:51:21] <jbaldwin> *does not know
[21:51:42] <strcat> tjc: if it's ext3 you're going to have a problem :)
[21:51:52] <tjc> jbaldwin: Yeah, you have to add named lifetimes here
[21:51:54] <strcat> but you don't need to support ext3
[21:52:05] <tjc> as a rule of thumb, when you return a borrowed pointer to the inside of a struct, it'll need a named lifetime
[21:52:16] <strcat> tjc: yeah, ext3 has a 32k max subdir limit
[21:52:21] <tjc> strcat: Specifically it's on the linux2 bot, which has Ubuntu 12.something
[21:52:46] <tjc> yeah, ext4
[21:52:52] <strcat> tjc: no limits on subdirs then
[21:52:56] *** Quits: sebcrozet (sebcrozet@moz-D8879CC3.w80-13.abo.wanadoo.fr) (Ping timeout)
[21:52:58] <tjc> strcat: ok, thanks
[21:52:59] <strcat> 4 billion default limit on total # of files
[21:53:00] <jbaldwin> fn get_book<'a>(&'a mut self, letter: char) -> &'a Letter; ?
[21:53:02] <strcat> doubt you're hitting it :)
[21:53:14] * strcat just looked at the mkfs docs
[21:53:22] *** Joins: sebcrozet (sebcrozet@moz-D8879CC3.w80-13.abo.wanadoo.fr)
[21:53:33] *** Quits: sebcrozet (sebcrozet@moz-D8879CC3.w80-13.abo.wanadoo.fr) (Quit: Gone)
[21:53:39] *** Quits: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net) (Quit: brendan)
[21:53:39] *** Quits: eatkinson (eatkinson@moz-392601D4.lightspeed.sntcca.sbcglobal.net) (Ping timeout)
[21:53:47] <jbaldwin> I still get the same error though hmm
[21:54:40] <tjc> jbaldwin: Actually, I think you want to make the value type for your HashMap Letter rather than ~Letter
[21:54:43] *** Joins: eatkinson (eatkinson@moz-392601D4.lightspeed.sntcca.sbcglobal.net)
[21:54:46] *** Quits: GGpin (hell@moz-BCA68D55.cst.lightpath.net) (Quit: Falling asleep)
[21:54:55] <tjc> the ~ is why you're getting the error -- it expects a ~Letter to borrow, sees a &~Letter
[21:55:21] <jbaldwin> Then I get the following error -> error: reference to trait `Letter` where a type is expected; try `@Letter`, `~Letter`, or `&Letter`
[21:55:42] <tjc> oh, sorry, I didn't realize Letter was a trait
[21:55:51] <jbaldwin> oh
[21:55:58] <jbaldwin> if it was a struct that would work.. 
[21:56:04] <tjc> trait borrowing is… sorta buggy right now, or at least last time I checked
[21:56:17] <jbaldwin> ok, I'll try it directly as a struct 
[21:56:27] <jbaldwin> thanks
[21:56:32] <tjc> np
[21:56:32] <strcat> trait objects are really rough around the edges
[21:56:46] <strcat> since we don't have many use cases for them... they have never been improved
[21:56:55] <strcat> inheritance still doesn't work properly with them
[21:57:02] <pcwalton> my branch on servo uses them extensively
[21:57:09] <pcwalton> if I can ever figure out this Xlib junk
[21:57:11] <jbaldwin> I'm porting some C# code so I was trying to use traits as the interfaces
[21:57:20] <dbaupp> strcat: that's not true, ~Trait has been dramatically improved
[21:57:30] <strcat> well it doesn't generate invalid code anymore
[21:57:32] <pcwalton> they don't generally segfault anymore
[21:57:34] <pcwalton> which is good
[21:57:37] <strcat> but it's still really rought semantically
[21:57:39] <strcat> rough*
[21:57:43] <pcwalton> sprocketnes uses them too
[21:57:58] *** Quits: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr) (Quit: bholley)
[21:57:59] *** Joins: Heo__ (Heo@13864F63.2DD6919B.56C9C5CA.IP)
[21:58:16] *** Joins: guacamole (Mibbit@moz-C2B364AA.vc.shawcable.net)
[21:58:23] * pcwalton wants to get this servo branch landed so he can get back to finishing up the Rust language
[21:58:32] <strcat> if they implemented the trait when there was no Self, they'd be a lot nicer
[21:58:54] <strcat> and if inheritance was done properly in trans, and you could cast to a supertrait
[21:58:54] *** Quits: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com) (Broken pipe)
[21:58:55] * strcat shrugs
[21:59:04] <strcat> I played with them a bit and they were really, really annoying to use
[21:59:08] *** Quits: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP) (Ping timeout)
[21:59:13] *** Quits: guacamole (Mibbit@moz-C2B364AA.vc.shawcable.net) (Quit: http://www.mibbit.com ajax IRC Client)
[21:59:18] <pcwalton> they work fine in servo
[21:59:23] <pcwalton> probably your use case just didn't work yet
[21:59:35] <SiegeLord> It'd be great if they implemented traits sometimes
[21:59:42] <SiegeLord> *when possible
[22:00:01] <benh> Why don't they, again?
[22:00:08] <pcwalton> it causes weird semantics
[22:00:11] <SiegeLord> Back when I was reading that bug, the proposed rules were somewhat confusing... is the "no Self" rule really what they boil down to?
[22:00:18] <SiegeLord> Or is it too coarse?
[22:00:21] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[22:00:26] <pcwalton> I'd have to page the exact problems into my brain
[22:00:35] <pcwalton> but they caused really strange semantic issues in some cases
[22:00:42] <benh> ok :)
[22:01:13] *** Joins: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net)
[22:01:17] *** Joins: crembo (crembo@moz-C2B364AA.vc.shawcable.net)
[22:01:46] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[22:01:56] <dbaupp> I think there are problems with generic methods too
[22:02:11] <pcwalton> they basically can't be
[22:02:14] <pcwalton> because of monomorphization
[22:02:48] <jbaldwin> hey hey that worked ;-)
[22:02:54] <strcat> pcwalton: you'd actually have to figure out how to trans generic methods though
[22:03:11] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[22:03:11] <strcat> into vtables
[22:03:15] *** Joins: dcrewi (david@moz-AB8667CE.gyrae.net)
[22:03:31] *** Quits: canhtak (jeremy@moz-EF57C296.wl.t.ulaval.ca) (Quit: canhtak)
[22:03:51] *** Quits: tautologico (lymph@703660AA.CFE755C8.C27E1635.IP) (Quit: tautologico)
[22:04:20] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[22:05:32] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[22:06:06] *** Joins: dew (Instantbir@moz-8EDFD40B.static.stls.mo.charter.com)
[22:06:10] *** Quits: CarpNet (Alasdair@moz-EF831A5E.cable.virginmedia.com) (Quit: Leaving)
[22:13:05] *** Joins: bytbox (s@moz-558A9016.wireless.umd.edu)
[22:14:52] *** Joins: canhtak (jeremy@moz-EF57C296.wl.t.ulaval.ca)
[22:16:29] *** Joins: holomorph (holomorph@moz-CF91A262.hsd1.md.comcast.net)
[22:16:53] *** Quits: jbaldwin (Mibbit@EF784383.FC9BECD6.A8DE49A2.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:17:53] *** Joins: jgilbert (jgilbert@moz-4C088FCE.hsd1.ca.comcast.net)
[22:18:31] *** jld|haircut is now known as jld
[22:18:33] <julmas> How do I reverse an iterator? I want to search the iterator returned from TreeSet::lower_bound_iter leftwards
[22:19:02] <SiegeLord> Are there any issues with this idea? https://github.com/mozilla/rust/issues/9826
[22:19:14] *** Quits: dornyi (test@moz-EC11DA4D.members.linode.com) (Quit: leaving)
[22:19:15] <dbaupp> julmas: some iterators support the .invert() method which makes it iterate from the other end
[22:19:31] <SiegeLord> I'm just coding in hashbang file detection for Geany, and I'm wondering what to put in there
[22:19:34] <julmas> ok. Thanks dbaupp!
[22:19:44] <SiegeLord> I guess whatever the tool, it'll probably have 'rust' in it somewhere
[22:19:52] *** Quits: saati (s@moz-11469F61.harmless.hu) (Ping timeout)
[22:20:11] <dbaupp> julmas: unfortunately, from http://static.rust-lang.org/doc/master/std/trie/struct.TrieMapIterator.html it looks like it doesn't implement the DoubleEndedIterator trait necessary for that, so it's not possible
[22:20:32] <julmas> :(
[22:20:34] <dbaupp> julmas: unfortunately the easiest way will be just collecting them into a ~[] and iterating on that in reverse
[22:20:54] <julmas> Too slow I'm afraid
[22:21:14] <julmas> Unless the collecting is lazy in some way
[22:21:27] <dbaupp> no, it can't be
[22:22:05] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:22:10] <dbaupp> (also, if it's too slow, you're stuck without modifying the stdlib, because there's no other way.)
[22:23:46] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[22:23:46] *** ChanServ sets mode: +ao dherman dherman
[22:24:54] *** Joins: Guest_ (textual@moz-7D72AF75.rev.vodafone.pt)
[22:25:35] *** Quits: ianj (ianjneu@moz-7140CF01.ccs.neu.edu) (Quit: leaving)
[22:25:51] <julmas> I see dbaupp. Modifying the stdlib is a few orders of magnitude above my level at the moment. But with time maybe :)
[22:26:19] <SiegeLord> Looks like it looks for the string prefix to be something... so I'll just make it 'rust'
[22:26:32] *** Joins: doublec (test@moz-EC11DA4D.members.linode.com)
[22:26:34] <SiegeLord> That'll match rustpkg, rustc or rustrun or w/e it ends up being named
[22:26:35] *** Quits: alan (alan@moz-FE02DD30.sat6.rackspace.com) (Quit: alan)
[22:26:36] <sfackler> julmas: file an issue about it. triemap's iterator should definitely be reversible
[22:26:47] *** Quits: reedlepee (Mibbit@3C9ED70E.61B8DFA9.9D59D0D8.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:27:08] *** Quits: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net) (Ping timeout)
[22:27:39] *** Joins: simon (simon@moz-FD4ADBC6.cable.teksavvy.com)
[22:27:42] <dbaupp> julmas: it's easier than you might expect :)
[22:28:04] * dbaupp 's first contribution was a one line change in the stdlib
[22:28:21] *** Quits: pnkfelix (pnkfelix@moz-B65AF445.hfc.comcastbusiness.net) (Quit: Leaving.)
[22:28:32] <julmas> hmm. I'd love to contribute. I'll look into it tomorrow.
[22:28:45] *** Joins: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net)
[22:29:46] *** Quits: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net) (Quit: brendan)
[22:29:55] <dbaupp> julmas: yay! :) (feel free to ask here if you need any help)
[22:30:29] <julmas> Sure. It will probably be your fix with my name on it :)
[22:30:30] *** Joins: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net)
[22:30:31] *** Joins: benh_ (ben@moz-4A0366D2.org)
[22:30:34] *** Quits: benh_ (ben@moz-4A0366D2.org) (Quit: benh_)
[22:33:52] *** Quits: julmas (Mibbit@moz-2A79EF00.junet.se) (Quit: http://www.mibbit.com ajax IRC Client)
[22:34:43] *** Quits: canhtak (jeremy@moz-EF57C296.wl.t.ulaval.ca) (Quit: canhtak)
[22:35:26] <jeffdb> maybe this is too broad of a question, but when you aren't inside an unsafe code, is a segfault the sign of a bug in the compiler or just my code?
[22:35:31] <jeffdb> With my incredibly limited understanding of Rust's memory management I would have thought that segfaults shouldn't really happen.
[22:36:10] <sp3d> if you do something wrong enough in an unsafe block you can cause safe code to segfault
[22:36:22] <kimundi> jeffdb: In principle, rust should never segfault outside a unsafe block, so if it fdoes it measn there is a bug
[22:36:24] <sp3d> otherwise segfaults are a compiler bug
[22:36:38] <tjc> jeffdb: it's a bug in the compiler or runtime code
[22:36:44] <jeffdb> k
[22:36:56] <kimundi> And yeah, depending on what you do in a unsafe block you can mess things up in a way that safe code segfaults later
[22:36:57] *** Quits: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net) (Quit: Leaving.)
[22:37:04] <dbaupp> rusti: let x: ~int = unsafe { std::cast::transmute(0u) }; x
[22:37:05] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[22:37:06] <jeffdb> no i have no unsafe blocks
[22:37:18] <dbaupp> then, yes, compiler/stdlib bug
[22:37:29] <jeffdb> i guess i should figure out how to report or see if it's already logged
[22:38:07] <dbaupp> jeffdb: https://github.com/mozilla/rust/issues/new (do you have a small example?)
[22:38:38] *** Quits: eatkinson (eatkinson@moz-392601D4.lightspeed.sntcca.sbcglobal.net) (Quit: eatkinson)
[22:39:00] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[22:39:08] <jeffdb> yeah, gimme a sec
[22:39:09] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[22:39:25] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Broken pipe)
[22:39:29] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[22:39:47] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[22:41:07] <jeffdb> https://gist.github.com/JeffBelgum/7016255
[22:41:09] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Ping timeout)
[22:41:24] <brson> anybody have opinions about by ref iterator adapters (https://github.com/mozilla/rust/pull/9634)?
[22:41:27] <brson> strcat: ^
[22:41:42] <jeffdb> it only happens when I use the to_str() but the problem may be happening before that
[22:41:57] <dbaupp> jeffdb: it may be a stack overflow... but that seems weird
[22:42:25] <dbaupp> jeffdb: (oh, that's right: overflowing the stack currently segfaults too, we don't have any stack protections at the moment)
[22:42:47] <jeffdb> right, [0, ..1000000] will do it
[22:43:17] *** Joins: alonlevy (alon@moz-697DD27F.bb.netvision.net.il)
[22:43:29] <dbaupp> jeffdb: ah, yes, stack overflow
[22:43:52] * dbaupp guess the #[deriving(ToStr)] code is incorrect in the presence of recursive types like that
[22:44:04] <dbaupp> jeffdb: file it please! :)
[22:44:12] <jeffdb> will do.
[22:44:46] *** Quits: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net) (Quit: brendan)
[22:46:01] *** Quits: slackito (slackito@moz-7779E4A6.dyn.user.ono.com) (Quit: leaving)
[22:47:12] *** Joins: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net)
[22:47:16] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[22:48:08] <dbaupp> jeffdb: waaaiit, the infinite recursion is expected
[22:48:18] <jeffdb> oh
[22:48:23] <dbaupp> you're making a cycle with *list = Cons(1i, list)
[22:48:24] *** Quits: sp3d (s@6361F3B1.19CD1E54.8354FB35.IP) (Ping timeout)
[22:48:28] <jeffdb> lol
[22:50:49] *** Quits: simon (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[22:50:52] *** Joins: sp3d (s@6361F3B1.19CD1E54.8354FB35.IP)
[22:51:06] *** Joins: simon (simon@moz-FD4ADBC6.cable.teksavvy.com)
[22:52:04] <jeffdb> dbaupp: should the compiler let you do that though?
[22:54:17] <dbaupp> jeffdb: why should it stop you?
[22:54:42] <dbaupp> (e.g. one might be creating a graph, where the edges are represented by @mut references to other nodes)
[22:55:47] *** Quits: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: ZZZzzz…)
[22:55:49] <dbaupp> it's the programmers fault if they accidentally hit infinite recursion. (Although it is a bug that we just segfault on stack-overflow, rather than detecting it and handling it "safely".)
[22:57:11] <jeffdb> I guess I'm going with the (mistaken?) assumption that Rust won't allow for segfaults if you aren't using unsafe code. Clearly I wrote broken code. I don't really know enough about language design to know if my assumption is even possible.
[22:57:34] <pcwalton> the fact that we segfault on infinite recursion is a bug in rust
[22:58:05] <jeffdb> pcwalton: but it's not something that can be detected until runtime?
[22:58:17] <pcwalton> infinite recursion is very hard to detect at compile time
[22:58:32] <pcwalton> you'd need something like Agda I think ;)
[23:00:12] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Client exited)
[23:00:50] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[23:01:01] <aatch> You can detect *potential* infinte recursion, but that'd have like a 95% false-positive rate.
[23:01:30] <dbaupp> presumably it's equivalent to the Halting problem (almost by definition), so any Turing-complete language doesn't have a 100% detection-rate infinite-recursion detector
[23:01:37] <pcwalton> yeah
[23:01:39] <pcwalton> it is
[23:01:43] <pcwalton> I think Agda can do it
[23:01:55] <pcwalton> because Agda ensures that all programs are terminating
[23:02:00] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[23:02:09] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[23:02:14] <pcwalton> well, if Agda ensures that all programs are terminating then it clearly forbids infinite recursion
[23:02:20] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[23:02:53] <dbaupp> maybe it executes the first step in 1s, the next in .5, the next in .25, and so will finish an infinite recursion in 2s...
[23:03:04] * dbaupp has a feeling that Agda isn't *that* amazing, yet.
[23:03:36] <pcwalton> as I understand it it's just a type system that ensures that at each step you do "less" work
[23:03:38] <pcwalton> in a sense
[23:03:41] <pcwalton> so that you always end up terminating
[23:03:55] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[23:04:44] <FreeFull> You can ensure that either a program terminates or that it is productive (producing each piece of data takes a finite time)
[23:04:44] <ksf> ...if you so chose. agda "just" has a type system powerful enough to let you write proofs that your program terminates.
[23:04:51] <dbaupp> aatch: you can also detect definite infinite recursion, but that'd have a 95% false-negative rate
[23:05:04] <FreeFull> Not all terminating programs can be proven to terminate though
[23:05:10] * pcwalton stands corrected :)
[23:05:18] <pcwalton> I figured there would be some Agda experts in here :)
[23:05:24] <pcwalton> my knowledge of Agda is fairly spotty
[23:05:29] <ksf> dunno about that, but definitely not automatically.
[23:05:32] <pcwalton> i.e. fairly nonexistent
[23:05:41] <dbaupp> aatch: (which would be still useful of course, for detecting silly things like my impl<R: Rng> Rng for @mut Rng bug)
[23:05:57] <FreeFull> Automatically or not, there are some programs which no human or machine can prove will halt or won't halt
[23:06:06] <dbaupp> halting problem \o/
[23:06:18] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[23:06:49] *** Quits: bytbox (s@moz-558A9016.wireless.umd.edu) (Ping timeout)
[23:06:55] <strcat> brson: yeah, I just forgot to r+ this before when I looked at it
[23:06:55] <ksf> ...in bounded time.
[23:06:58] <FreeFull> If there was a way to decide if any program halts or not, we wouldn't need mathematics anymore
[23:07:38] <strcat> FreeFull: a language doesn't have to be turing complete to be useful
[23:07:45] *** Joins: reedlepee (Mibbit@3C9ED70E.61B8DFA9.9D59D0D8.IP)
[23:07:50] <ksf> well, I was of the impression that given any *concrete* program, it just needs enough inspiration to actually prove it terminating.
[23:07:51] <FreeFull> ksf: Obviously, you could just run the program for all possible inputs, but that could potentially take infinite time even if it does halt for all inputs
[23:08:12] <ksf> but then people who write proofs are magic sky fairies to me, anyway.
[23:08:27] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[23:08:51] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[23:10:14] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[23:10:14] *** ChanServ sets mode: +ao brson brson
[23:10:19] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[23:10:45] <FreeFull> To prove something like    let mut x = input; loop { if x == 1 { break; }; if divisible(x,2) then { x /= 2; } else { x = 3*x + 1; } } terminates for all inputs, you need to prove the Collatz conjecture
[23:11:09] *** Joins: alan (alan@moz-F8EE186F.lightspeed.snantx.sbcglobal.net)
[23:11:34] <benh> If you try to trick your friendly halting oracle into proving mostly unrelated theorems for you, they might refuse service!
[23:11:42] <FreeFull> Conversely, if you have a proof that it does terminate for all inputs, then you have a proof of the Collatz conjecture
[23:11:49] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[23:13:00] <bjz_> pcwalton: you'd be better off asking for idris folks
[23:13:15] <bjz_> pcwalton: Ralith is involved in idris
[23:13:38] <bjz_> pcwalton: not sure if it deals with that though
[23:14:15] <pcwalton> hm
[23:14:25] <strcat> FreeFull: it wouldn't let you write that, is the point
[23:14:50] <ksf> idris is non-total by default, but you can turn the checker on.
[23:15:03] <FreeFull> strcat: Unless it is clever enough to prove Collatz
[23:15:14] <strcat> afaik agda just compiles down to haskell and that's how you use it for something useful (calling it from haskell)
[23:15:37] *** Quits: q66 (q66@moz-463E955C.range86-148.btcentralplus.com) (Quit: Leaving)
[23:15:42] <ksf> asserting totality is a feature of all modern dependently typed languages, as you wouldn't want to have non-terminating compilation.
[23:15:55] *** Quits: martndemus (martndemus@moz-876695FC.sshunet.nl) (Ping timeout)
[23:16:44] *** Joins: wolfwood (wolfwood@moz-A19F104D.pitbpa.fios.verizon.net)
[23:17:29] *** Joins: canhtak (jeremy@moz-3DC6023A.wl.t.ulaval.ca)
[23:17:59] *** Quits: crembo (crembo@moz-C2B364AA.vc.shawcable.net) (Client exited)
[23:19:01] <ksf> FreeFull, let me formulate the whole thing differently: assuming we want to write a productive program (and not one for the sake of proving stuff), it's going to be designed to terminate. therefore, proof might be hard, but it's possible.
[23:19:04] <bjz_> ksf: I knew there'd be at least one other idris fellow on here
[23:19:06] <bjz_> :P
[23:20:57] *** Quits: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net) (Quit: brendan)
[23:21:37] <strcat> ksf: lots of programs are an infinite loop responding to events and not necessarily terminating ;p
[23:22:02] <bjz_> games!
[23:22:23] <ksf> ...but they're still productive. that is, doing a finite amount of work per input signal (including frame ticks)
[23:22:43] <dbaupp> ksf: 0 is still finite :P
[23:25:19] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[23:28:39] *** Joins: crembo (crembo@moz-C2B364AA.vc.shawcable.net)
[23:30:08] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[23:34:03] *** kimundi is now known as zz_kimundi
[23:41:55] *** Joins: saati (s@moz-11469F61.harmless.hu)
[23:42:27] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[23:42:47] *** Quits: ksf (ksf@moz-1DF7C0A6.adsl.hansenet.de) (Quit: Leaving)
[23:44:07] *** Quits: Guest_ (textual@moz-7D72AF75.rev.vodafone.pt) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:44:45] *** Joins: rveach (rveach@410D297A.C7FE7DD2.1302FB2C.IP)
[23:45:26] *** Joins: martndemus (martndemus@moz-876695FC.sshunet.nl)
[23:45:58] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[23:46:48] *** Joins: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net)
[23:48:59] *** Joins: mystal (Mibbit@3FB4C2BC.2E4FD3DD.225F4543.IP)
[23:49:28] *** Joins: jxv (jxv@4732E7D7.2AB34561.9B38A32A.IP)
[23:51:01] *** Quits: saati (s@moz-11469F61.harmless.hu) (Ping timeout)
[23:51:37] *** Quits: martndemus (martndemus@moz-876695FC.sshunet.nl) (Ping timeout)
[23:52:39] *** Quits: nkoep (nik@moz-E4F66740.pool.mediaways.net) (Client exited)
[23:55:02] <jeffdb> This "push" function for a linked list I wrote has a lot of new concepts for my Java educated self. Would anyone mind taking a look and seeing if my comments about it are correct. And if there's any flaws I've missed? 
[23:55:06] <jeffdb> https://gist.github.com/JeffBelgum/7016255
[23:55:44] <jeffdb> it's a 3 line function and any input would be much appreciated!
[23:56:22] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[23:57:35] *** Quits: skade (skade@moz-4865967C.pools.arcor-ip.net) (Quit: Textual IRC Client: www.textualapp.com)
[23:59:03] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[23:59:29] <brson> jeffdb: it looks to me like (*l).clone will copy an entire List<T>, so it's copying one element then a pointer to the rest of the list
