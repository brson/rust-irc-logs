[03:18:47] <cmr> dbaupp: the folder seems to be working out quite well
[03:18:57] <cmr> I am having a bit of a problem though
[03:19:09] <cmr> https://gist.github.com/cmr/60af7c6d6b3e7735aa3b
[03:19:21] <cmr> Am I going to need to do the swap trick again?
[03:19:56] <cmr> feh it's late, I need to sleep
[09:33:04] *** Quits: dbaupp (Thunderbir@moz-712A1135.lns20.syd6.internode.on.net) (Ping timeout)
[09:33:36] *** Quits: Seldaek (seld@E733C546.5464C2F1.F113998C.IP) (Ping timeout)
[09:33:40] *** Joins: dbaupp (Thunderbir@moz-712A1135.lns20.syd6.internode.on.net)
[09:35:05] *** Joins: Seldaek (seld@moz-5DEA7688.ch)
[09:41:14] *** Quits: Seldaek (seld@moz-5DEA7688.ch) (Ping timeout)
[09:43:57] <dbaupp> cmr: yeah, the swap + extend trick
[09:44:38] *** Joins: Seldaek (seld@moz-5DEA7688.ch)
[13:57:17] <cmr> dbaupp: fwiw I think I can clean up the JSON output by implement Encodable, rather than a full Encoder
[13:57:36] <cmr> (and Decodable)
[13:59:38] <dbaupp> cmr: Encodable for each thing?
[13:59:48] <cmr> dbaupp: mostly just for Type, since that's where most of the pain is
[14:00:03] <cmr> and Attribute
[14:00:05] <dbaupp> ah, right, I guess the structs are fine, it's just the enums?
[14:00:11] <cmr> yeah
[14:06:09] *** Joins: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP)
[14:21:36] *** Quits: dbaupp (Thunderbir@moz-712A1135.lns20.syd6.internode.on.net) (Ping timeout)
[16:21:20] *** Quits: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP) (Ping timeout)
[16:58:10] *** Joins: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP)
[17:18:49] <jedestep> cmr: I fixed the comment stripping bug
[17:19:17] <cmr> jedestep: is it implemented as a plugin in passes.rs?
[17:19:17] <jedestep> but github is being stupid about my commit history :( even after 3 rebases it still wants me to submit 32 commits in my PR
[17:19:24] <jedestep> cmr: no I can do that though
[17:19:32] <cmr> jedestep: what branch are you sending the PR to?
[17:19:41] <cmr> should be master
[17:19:45] <cmr> and let me push to master real quick
[17:20:10] <jedestep> cmr: was sending it to master
[17:20:24] <cmr> weird
[17:20:47] <jedestep> I think my repo got messed up somehow
[17:21:08] <cmr> it is possible I accidentally force-pushed to master
[17:21:44] <jedestep> hmm
[17:23:18] <jedestep> should I also implement collapse_docs as a plugin?
[17:23:39] <cmr> Yes please! There should already be a stub in passes.rs for it
[17:23:45] <cmr> alright pushed
[17:23:59] <jedestep> ok let's see what happens here
[17:24:16] <cmr> I don't think the folder works correctly yet, at least the strip-hidden one doesn't actually strip items which should be hidden
[17:25:36] <jedestep> `struct Stripper;` :I
[17:25:58] <cmr> hm I suppose that has societal connotations doesn't it
[17:26:17] <jedestep> lol
[17:31:19] <jedestep> 'clean.rs:1136: file ended with unbalanced delimiters' :(
[17:31:26] <cmr> eh?
[17:31:33] <cmr> It builds locally :\
[17:31:38] <jedestep> yeah it was me
[17:31:44] <jedestep> somewhere
[17:31:46] <jedestep> in 1100 lines
[17:31:49] <cmr> heheh
[17:31:52] <cmr> I see now
[17:35:34] <cmr> Oh I see why the folder "isn't working"
[17:35:47] <cmr> The crate is inserted into the json before it's ever put through the plugin pipeline
[17:39:06] <cmr> Fah!
[17:42:33] <jedestep> ah
[17:42:50] <jedestep> my guess would have been that fold_crate was using fold_item instead of fold_item_recur
[17:43:08] <cmr> Ohhh the plugin never calls fold_item_recur
[17:43:10] <cmr> oops
[17:43:15] <jedestep> so for strip_hidden you would be skimming only the attrs of the crate
[17:44:27] <cmr> That was also the bug
[17:44:30] <cmr> Two bugs, yay!
[17:45:05] <cmr> Right, the old API had something else calling fold_item_recur, which called fold_item (it was "visit" then)
[18:03:30] <cmr> Now just gotta figure out why modules aren't getting attributes and it's golden
[18:03:43] * cmr goes back to working on the bencher
[18:17:25] <jedestep> huh, so my fix for comment cleaning apparently doesn't work when it's run as a plugin. o.o
[18:17:52] <cmr> yay! are you using the inferface correctly?
[18:18:02] <cmr> Well, it'd be hard not to.
[18:18:04] <cmr> Compiler, and all
[18:18:48] <jedestep> the interface isn't the issue, it definitely runs the plugin
[18:19:04] <cmr> Right, but are you returning the correct Item and soforth?
[18:19:12] <jedestep> I should be
[18:19:16] <jedestep> the /// are all gone
[18:19:27] <cmr> huh :\
[18:30:59] <jedestep> https://github.com/cmr/rustdoc_ng/pull/30
[18:31:25] <cmr> jedestep: ... mind if I just cherry pick that last one? :p
[18:31:31] <jedestep> please do
[18:31:55] <jedestep> i might actually delete my fork and remake it because it is just in an extremely confused state
[18:32:24] <jedestep> w.r.t commit history
[19:20:25] *** Quits: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP) (Ping timeout)
[19:28:37] *** Joins: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP)
[21:50:10] *** Joins: dbaupp (Thunderbir@moz-712A1135.lns20.syd6.internode.on.net)
[21:58:58] *** Quits: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP) (Ping timeout)
[22:22:23] <Seldaek> cmr: getting somewhere with encodable and all? 
[22:23:07] <cmr> Seldaek: Yes, and I have JSON for you if you want it, but it's going to change as soon as I'm done putzing with the benchmarker
[22:23:22] <cmr> dbaupp: speaking of benchmarker, I have distributed builds setup, just gotta get auto-build working again :D
[22:24:46] <Seldaek> nah I'd better sleep than hack on an on final json :)
[22:24:53] <Seldaek> but good to hear you're getting there
[23:30:16] <cmr> Seldaek: ping
[23:30:23] <cmr> wait nevermind that can't work
[23:30:26] <cmr> unping
[23:31:04] <Seldaek> :)
[23:34:36] <cmr> Alright! Fix the json, save the world
[23:35:04] <cmr> Seldaek: making the json pretty is basically the last thing needed in rustdoc_ng I think
[23:35:11] <cmr> So I'll try and help on rustdoc_web
[23:35:54] <Seldaek> ok
[23:36:02] <Seldaek> I probably should cclean up some stuff though
[23:36:07] <Seldaek> it's kind of a mine field right now :)
[23:36:34] <Seldaek> way too much global vars and closures abusing their access to outer scopes
[23:39:12] <Seldaek> cmr: if you like to write a search engine that doesn't suck that'd be nice.. :)
[23:39:24] <cmr> Seldaek: Sure, I can try and tackle that
[23:40:17] <Seldaek> might be good to check out the sources of the one I'm using now to see how the index storage and access is done, but at least a proper text analyzer should be replaced/added
[23:40:43] <Seldaek> something that understands :: boundaries, and treats _ or CamelCase stuff as it should be
[23:41:13] <Seldaek> then having word stemming would be cool too, because right now unless you type the exact word you usually don't get results
[23:41:23] <Seldaek> anyway there's lots that can be done :)
[23:42:34] <Seldaek> and it's probably easier to get into than diving in the chaos of rustdoc.js 
[23:42:52] <Seldaek> guess I'd better update to the new json and clean up that code a bit first
[23:50:35] <cmr> Seldaek: alright I take it back, this interface is way way too obtuse for me to be able to do anything useful with it :\
[23:50:48] <cmr> It's... supposed to be generic, but it kinda isn't
[23:51:03] <cmr> Well, it is generic
[23:51:10] <cmr> Just not usably generic for JSON :p
[23:54:36] <Seldaek> you mean you can't make the json pretty?
[23:54:57] <cmr> Not while using extra::serialize
[23:55:00] <cmr> dbaupp: ping
